# StackOverflow 问答 13199000-13199999

# algorithm - 两个数字相加为第三个

> ID：13199005
> 
> 赞同：1
> 
> 时间：2012-11-02T16:08:55.140
> 
> 标签：algorithm, language-agnostic

给定一个整数数组`[a1 a2 ... an]`，不一定是不同的，给出一个算法，如果有**不同的**索引`i,j,k`，则返回“是”，否则返回“否” `ai + aj = ak`。

有没有办法比蛮力更快地做到这一点，这需要 O(n^3)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:18:05.510

就在这里。

第一步：**对数组进行排序**。

然后你以一种*聪明的方式*浏览你的索引。一个聪明的方法可能是选择

*   a0 + a1
*   a0 + a2
*   a0 + a3
*   ...
*   a0 + a(n-1)
*   a1 + a(n-1)
*   a1 + a(n-2)

*这里的聪明*意味着两对连续的测试指数不能彼此相距太远。

对于第一个，您`aO + a1`会发现在.`k``a0 + a1 = ak``O(logn)`

对于以下的，假设被测试的对接近前一个，这意味着如果有一个`k'`这样的，`ai + aj = ak'`那么`k'`一定是接近的`k`。您可能可以摆脱线性搜索，`k`直到您的`k'`匹配或变得太大/太小`ai + aj`。在一般情况下，这是成本`O(1)`。

由于您最多必须测试`n^2`对，因此整个算法是`O(n^2)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:18:47.517

*   建立所有可能和 ai + aj 的列表：O(n^2)。
    该列表将具有 size=n^2

*   然后将该列表与数组进行比较，看看是否有任何相似之处：

    *   首先对每个列表进行排序： O((n^2)log(n^2)) + O(nlogn)
    *   遍历它们以找到任何匹配项：O(n^2)

总计：O((n^2)log(n^2))（= O((n^2)log(n)) 每条来自alestanis 的评论）

编辑：我忘记了不同的要求，但这不应该改变结果。
首先，为了确保 i!=j，在步骤 1 中构建所有和的列表时只排除 i==j。
其次，为了确保 i!=k 和 j!=k，用其索引 i,j 标记每个和，并在排序前用索引 k 标记每个原始值。
然后在最后一步找到任何匹配项时，检查标记的索引是否不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:48:13.607

下面的python代码实现了一个类似于alestanis所说的方法，也类似于Daniel Le提到的[维基百科文章中给出的二次算法。](http://en.wikipedia.org/wiki/3SUM#Quadratic_algorithm)对于大的均匀随机正整数，所述的 O(n^2) 复杂度似乎成立。（平均而言，增加 k 的内部搜索循环执行大约 (n^2)/4 次。）在旧 AMD Athlon 5000 处理器上的 linux 下运行的定时样本的输出首先出现，然后是代码。

```
0.002519    N 50    NN 2500     ops 607     NN/ops 4.1186   NN/t 992405.8   Matches 0
0.00752     N 100   NN 10000    ops 1902    NN/ops 5.2576   NN/t 1329794.2  Matches 0
0.035443    N 200   NN 40000    ops 10648   NN/ops 3.7566   NN/t 1128570.5  Matches 2
0.063056    N 400   NN 160000   ops 37403   NN/ops 4.2777   NN/t 2537427.4  Matches 33
0.176328    N 800   NN 640000   ops 163247  NN/ops 3.9204   NN/t 3629595.6  Matches 244
0.729919    N 1600  NN 2560000  ops 658122  NN/ops 3.8899   NN/t 3507238.7  Matches 2062
2.720713    N 3200  NN 10240000     ops 2535751     NN/ops 4.0383   NN/t 3763719.4  Matches 16178
11.07818    N 6400  NN 40960000     ops 10160769    NN/ops 4.0312   NN/t 3697358.2  Matches 128793 
```

```
import random, bisect, time
V, W, N, Nlim = 500, 500000, 50, 6400
while N <= Nlim:
    t0 = time.time()
    U=sorted([random.randint(V,V+W) for i in range(N)])
    bigsum = U[-1]
    U.append(N*W)
    matches = ops = 0
    for i, ai in enumerate(U[:-2]):
        k = bisect.bisect_right(U, ai+U[i+1])
        for j, aj in enumerate(U[i+1:-1]):
            while ai+aj > U[k]:
                k += 1
                ops += 1
            if U[k] == ai+aj:
                #print 'Match', i, j, k, ai, aj, ai+aj, U[k]
                matches += 1
            if ai+aj > bigsum:
                break
    et = time.time() - t0
    print round(et,6), '\tN',N, '\tNN', N*N, '\tops', ops, '\tNN/ops',
    print round(float(N*N)/ops,4), '\tNN/t', round(N*N/et,1), '\tMatches', matches
    N *= 2 
```

代码可能应该按照维基百科的大纲重写；重写可能会清除一些尴尬的数组切片编号和无关的完成检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T18:00:50.653

```
#include <cstdio>
#include <algorithm>
#include <vector>

using namespace std;

bool SUM3(vector<int> &v)
{
  sort(v.begin(), v.end());

  for (int i = 0; i < v.size(); ++i) {
    int j = 0, k = v.size() - 1;

    while (j < k) {
      int result = v[j] + v[k] - v[i];

      if (result < 0 || i == j) ++j;
      else if (result > 0) --k;
      else return true;
    }
  }

  return false;
}

int main()
{
  int a1[] = {25, 7, 9, 2, 4, 8, 10};
  vector<int> v1(a1, a1 + sizeof a1 / sizeof a1[0]);

  printf("%s\n", SUM3(v1) ? "true" : "false");

  int a2[] = {1, 2, 4};
  vector<int> v2(a2, a2 + sizeof a2 / sizeof a2[0]);

  printf("%s\n", SUM3(v2) ? "true" : "false");
  return 0;
} 
```

该算法的复杂度为 O(n^2)。

# ios - UIButton 和选择器 iOS

> ID：13199007
> 
> 赞同：0
> 
> 时间：2012-11-02T16:09:12.357
> 
> 标签：ios, uibutton, selector

我有一个按钮构造函数类，在那个类中我有这个方法来设计我的按钮

```
- (void)setupWithPosition:(CGPoint)point withImage:(UIImage *)image withImageFloat:(NSString *)imageFloat withTitle:(NSString *)title withLineWidth:(CGFloat)lineWidth respondsToSelector:(NSString*)selector
{
    // create button
    ButtonWithImage* button = [[ButtonWithImage alloc] initWithFrame:CGRectMake(0, 0, 200, 40)];

    //[button setTitle:[title uppercaseString] forState:UIControlStateNormal];
    [button setupViewWithText:title andImage:image andImageFloat:imageFloat];

    [button addTarget:self
               action:NSSelectorFromString(selector)
     forControlEvents:UIControlEventTouchUpInside];

    CGRect buttonFrame = button.frame;
    CGFloat lineX = 0.0f;

    // setup image
    if ([[imageFloat lowercaseString] isEqualToString:@"right"]) {
        lineX = buttonFrame.origin.x + buttonFrame.size.width;
    } else {
        lineX = 0.0f;
        buttonFrame.origin.x = lineWidth;
        button.frame = buttonFrame;
    }

    self.line = [[UIView alloc] initWithFrame:CGRectMake(lineX, buttonFrame.size.height/2, lineWidth, LINE_HEIGHT)];
    self.line.backgroundColor = [UIColor lineNormalColor];

    [self addSubview:self.line];
    [self addSubview:button];
} 
```

我使用以下方法调用它：

```
homepageButtons = [[NSMutableArray alloc] init];

    CategoryButtonView* za = [[CategoryButtonView alloc] initWithFrame:CGRectMake(200, 250, 300, 46)];
    [za setupWithPosition:CGPointMake(100, 100) withImage:[UIImage imageNamed:@"zas.png"] withImageFloat:@"right" withTitle:@"za" withLineWidth:80.0f respondsToSelector:@"buttonClicked"]; 
```

按钮放置正确，但是当我点击它们时，我得到了那个错误

```
CategoryButtonView buttonClicked]: unrecognized selector sent to instance 0xa1a46a0
2012-11-02 17:53:43.844 Man[3432:14c03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CategoryButtonView buttonClicked]: unrecognized selector sent to instance 0xa1a46a0' 
```

我想这是一个 SEL 问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:13:55.730

你有这一行：

```
[button addTarget:self
           action:NSSelectorFromString(selector)
 forControlEvents:UIControlEventTouchUpInside]; 
```

你真的想要“自我”吗？这意味着您传入的任何选择器都必须是`CategoryButtonView`类中的方法，而不是用于创建`CategoryButtonView`.

您很可能希望`target`随参数添加`selector`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:43:22.717

必须添加它才能使其工作

```
NSString *temp = [NSString stringWithFormat:@"%@:",selector];

    [button addTarget:sender
               action:NSSelectorFromString(temp)
     forControlEvents:UIControlEventTouchUpInside]; 
```

# c++ - 将 lexical_cast 用于无符号类型时检查负值

> ID：13199008
> 
> 赞同：5
> 
> 时间：2012-11-02T16:09:13.323
> 
> 标签：c++, boost

我有一种情况，我正在获取命令行参数并使用`boost::lexical_cast<unsigned long>(my_param)`. 我希望 my_param 的负值会导致 lexical_cast 抛出，但相反它会愉快地转换它们，将 -1 变为`18446744073709551615`. 这看起来很荒谬，因为 unsigned long 的最大值是 2^32-1，它看起来更像是 unsigned long long。

因此，我正在寻找一种更智能的方法将 char * 输入转换为 unsigned long，或者验证我没有接受伪装成大 unsigned long long 的负值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:15:50.177

有一个针对您的问题的提升的错误报告，它解释了为什么它会以这种方式运行：

> boost::lexical_cast 具有 stringstream 的行为，它使用 std::locale 的 num_get 函数来转换数字。如果我们查看编程语言的 [22.2.2.1.2] — C++（或 [22.2.2.1.2] 工作草案，C++ 编程语言标准），我们会看到 num_get 使用 scanf 的规则进行转换. 而在 C99 标准中 %u 的输入值减号是可选的，因此如果读取的是负数，则不会出现错误，结果将是二进制补码。

还有一个建议的包装解决方法：

[https://svn.boost.org/trac/boost/ticket/5494](https://svn.boost.org/trac/boost/ticket/5494)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:13:52.040

这正是按照标准处理负值的方式。他们使用模 2 ^N算术。这实现了一个方便的技巧：使用 -1 作为某种类型的最大可能无符号值的简写。

如果您不喜欢这种转换，则必须在进行转换之前扫描输入以查找减号。

# php - 如何在 Twitter API 结果中使用 max_id 进行分页 (PHP)

> ID：13199009
> 
> 赞同：0
> 
> 时间：2012-11-02T16:09:14.497
> 
> 标签：php, twitter, pagination

我想使用 Twitter API 来获取用户的状态（和相关信息），我想得到的一件事是提及，所以我在搜索 API 中搜索 to:"user"。我使用这些行：

```
$url  = 'http://search.twitter.com/search.json?q=to%3A'.$screenname.'&include_entities=true&result_type=recent';
$json = file_get_contents($url);
$searchStats = json_decode($json, true); 
```

在结果页面中（例如 Lady Gaga：[http](http://search.twitter.com/search.json?q=to%3Aladygaga&include_entities=true&result_type=recent) ://search.twitter.com/search.json?q=to%3Aladygaga&include_entities=true&result_type= recent ）有一行写着 next_page，我怎样才能自动转到下一个每次翻页？只要生成的推文来自 2012 年 10 月 27 日之后，我怎么能说转到下一页？

我首先在 PHP 中执行此操作，因为这是我正在学习的语言，但我最终希望将其作为客户端操作，一旦我学习了一些 Ajax/Javascript（例如： [http：/ /designwithpc.com/post/11924263674/get-twitter-profile-data-with-jquery-ajax](http://designwithpc.com/post/11924263674/get-twitter-profile-data-with-jquery-ajax)），这可能吗？可以翻译成这样吗？

# facebook - 打开图形操作链接没有响应

> ID：13199010
> 
> 赞同：1
> 
> 时间：2012-11-02T16:09:21.527
> 
> 标签：facebook, facebook-opengraph

我已经使用开放图形操作在 facebook 上发布了一个故事。我能够发布并看到这个故事。问题是当我单击故事中的操作链接时。当我单击发布的打开图表故事中的操作链接时，我没有得到任何响应。我正在使用沙盒模式来测试流程，并且服务器到服务器的通信没有发生。

# html - 如何在html中排列两个表格？

> ID：13199016
> 
> 赞同：0
> 
> 时间：2012-11-02T16:10:01.413
> 
> 标签：html, css

我希望这两个表格在我的网站标题底部的顶部对齐。我怎样才能让两个表格都对齐到顶部？目前，一张桌子位于左上角（正确位置），另一张桌子位于页面中心，但位于另一张桌子下方。如何将桌子抬高以与另一张桌子对齐？

网站`http://108.210.72.235/docs/`
或 [屏幕截图](http://i.imgur.com/MOE3q.png)

```
<TABLE CELLSPACING="0" COLS="4" BORDER="0" style="margin:65px 0px 0px 70px;">
    <COLGROUP SPAN="4" WIDTH="85"></COLGROUP>
    <TR>
        <TD BGCOLOR="#D7D7D7" style="font-family: DejaVu, serif;font-size: 150%;HEIGHT="18" ALIGN="LEFT"><A HREF="/docs" style="text-decoration: none;">Documents</A></TD>

    <TR>
        <TD BGCOLOR="#DD8D8"style="font-family: DejaVu, serif;font-size: 150%;HEIGHT="18" ALIGN="LEFT"><A HREF="/erm" style="text-decoration: none;">Erm?</A></TD>
        <TD ALIGN="LEFT"><BR></TD>
    <TR>
        <TD BGCOLOR="#D8D8D8"style="font-family: DejaVu, serif;font-size: 150%;HEIGHT="18" ALIGN="LEFT"><A HREF="/music" style="text-decoration: none;">Music</A></TD>
        <TD ALIGN="LEFT"><BR></TD>

</TABLE>
<TABLE VALIGN=CENTER ALIGN=CENTER>
<?php
 if ($handle = opendir('.')) {
   while (false !== ($file = readdir($handle)))
      {
          if ($file != "." && $file != "..")
      {
            $thelist .= '   <TR>
        <TD BGCOLOR="#D8D8D8" style="font-family: DejaVu, serif;font-size: 150%;HEIGHT="18" ALIGN="LEFT"><a href="'. $file.'">' .$file. '</a></TD>
        <TD ALIGN="LEFT"><BR></TD>';
          }
       }
  closedir($handle);
  }
?>
<P><?=$thelist?></p>
</TABLE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:12:22.383

添加`float:left`到左侧表格的样式。

```
<TABLE CELLSPACING="0" COLS="4" BORDER="0" style="margin:65px 0px 0px 70px;float:left"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:13:12.383

表格是块元素，因此永远不会位于另一个块旁边（遵循页面的正常流程）以下列方式之一更改表格的样式应该会得到您正在寻找的效果：

```
float:left;

display:inline-block; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:18:16.453

如果您希望第二个表格显示在左侧，请在第一个表格下方从第二个表格中删除`valign`and`align`属性。

如果您希望第二个表格确实显示在您的标题下，请在第一个表格的右侧将以下代码添加到`style`您的第一个表格的属性中`float:left;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:18:33.403

试试这个..

```
<table border="1" width="100%">  
  <tr>  
    <td width="20%>  
      Insert table 1 here  
    </td>  
    <td width="80%>  
      Insert table 2 here  
    </td>  
  </tr>  
</table> 
```

# java - Tomcat 7 集成在 Eclipse 类路径问题中

> ID：13199026
> 
> 赞同：0
> 
> 时间：2012-11-02T16:10:39.627
> 
> 标签：java, eclipse, spring, tomcat7

我在 Mac 上运行 Eclipse，并且我的 tomcat 文件夹位于 /Library/WebServer/apache-tomcat。我在 eclipse 中使用 tomcat 7 服务器并将其配置为使用原始 tomcat 文件夹作为其工作目录。

问题是，当在 Spring 3.1 中使用 PropertyPlaceholderConfigurer bean 并将位置指定为“classpath:database.properties”时，当我启动 tomcat 时，它总是会给我一个 FileNotFoundException。

我尝试将 database.properties 文件放在 tomcat 文件夹的 lib、conf 和根文件夹中。

我没有选择，请帮助！

**编辑 1**

尝试了 Guido Simone 的解决方案，但我得到：

```
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: /Library/WebServer/apache-tomcat-7.0.32/conf/database.properties (No such file or directory) 
```

所以我终于看到了spring正在寻找文件的完整路径（这是正确的）并且文件实际上就在那里。还有其他建议吗？如果这行得通，其他网络服务器是否也有这个 catalina.base 变量或者这个 tomcat 是特定的？因为我在后期有点需要平台独立性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:39:01.250

出于这个原因，我倾向于不使用类路径 URL。我讨厌必须准确跟踪类路径是如何为各种运行时环境配置的。对于可能被编辑的属性文件（并且不能进入 WAR 文件），我会推荐类似的东西：

```
 <bean id="propertyPlaceholderConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="file:${catalina.base}/conf/database.properties"/> 
```

现在，很明显该文件位于 conf 文件夹中，以及所有其他配置内容。

[更新]

catalina.base 绝对是 Tomcat 特定的，因此上面的确切 XML 不能移植到其他应用程序服务器。如果您决定继续使用`file:`前缀，则需要做更多工作并定义自己的系统属性以指示所有配置文件的位置 ( `file:${my.product.conf}/database.properties`)

您需要查看每个应用服务器的文档，以了解如何在启动时设置此属性。

不知道为什么你现在仍然得到`FileNotFoundException`完整的绝对路径。我唯一能想到的可能是该文件并不是您认为的真正位置:) :) :) 抱歉。

# c++ - 是否有任何清晰的入门级文档可用于 boost-spirit？

> ID：13199027
> 
> 赞同：7
> 
> 时间：2012-11-02T16:10:45.917
> 
> 标签：c++, documentation, boost-spirit

我试图浏览 Boost Spirit 页面上的官方文档，但我发现它完全无法理解（尽管有 25 年以上的编程经验和英语语言学位）——它显然是由熟悉系统的人编写的（好）但假设读者也很了解系统（不好）。我需要一些不会抛出类似句子的东西

> Spirit 中的解析器和生成器已完全归因

显然，我不知道“归属”的含义，而且网络搜索也无济于事。或者

> 序列需要一个属性类型来公开融合序列的概念，其中该融合序列的所有元素都必须与组件序列的相应元素兼容

什么是融合序列？我所知道的唯一一个发生在太阳中。在 C++ 中如何“公开”一个“概念”？

有没有从初学者的角度描述 Boost Spirit 的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:08:28.470

我发现这份文档对于 Boost 来说是一本不错的读物。

[http://en.highscore.de/cpp/boost/parser.html](http://en.highscore.de/cpp/boost/parser.html)

# encryption - Windows.Security.Cryptography 和 Windows Phone 8 SDK？

> ID：13199028
> 
> 赞同：11
> 
> 时间：2012-11-02T16:10:47.223
> 
> 标签：encryption, sdk, windows-8, cryptography, windows-phone-8

今天我安装了新的**windows phone 8 sdk** ( [w8phone sdk](https://dev.windowsphone.com/en-us/downloadsdk) )...试图从 windows 8 应用程序中包含一些我的基类...他们说的相同核心...但是哎呀？

不是`Windows.Security.Cryptography`吗？

我使用`SymmetricKeyAlgorithmProvider`WCF 服务对序列化数据进行端到端加密。（[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br241537.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br241537.aspx)）

似乎使用 .NET Framework 加密对于平台/设备来说是相当专有的。

有人建议在**Windows 8 Phone**上使用相同的功能吗？

谢谢。

**编辑/更新**

我通过移植[http://www.bouncycastle.org/](http://www.bouncycastle.org/)来分离 Windows 8 和 Windows Phone 8 Libs 以及从这里稍微更改的小 BC 引擎版本解决了这个问题：[Encrypt/Decrypt using Bouncy Castle in C#](https://stackoverflow.com/questions/5910454/encrypt-decrypt-using-bouncy-castle-in-c-sharp)

![在此处输入图像描述](../Images/4f315e7aba9dfbbd3886b6f6f39023dd.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T19:06:20.417

`Windows.Security.Cryptography`是一个 WinRT API。Windows Phone 8 仍然主要使用 Silverlight 的 API `System.Security.Cryptography`，其中不包括`SymmetricKeyAlgorithmProvider`.

您仍然可以[`AesManaged`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)在 Windows Phone 上使用 API，这可能足以满足您的目的，也可能不够。

`Windows.Security.Cryptography`很可能只是 Microsoft cryptolib 的 x86 COM 抽象，与`System.Security.Cryptography`.NET 3.5-4.0 上的大多数相同

# javascript - 在 Node.js 中使用 Slim 或 Haml & Sass / SCSS？

> ID：13199033
> 
> 赞同：8
> 
> 时间：2012-11-02T16:11:07.220
> 
> 标签：javascript, node.js, haml, meteor, slim-lang

我有一个相当健壮的项目，它的所有模板都用 Slim 和一点 Haml 实现。我正在考虑将项目转移到基于 Node.js 的结构（可能构建在 Tower.js 或类似的东西之上；可能是 Meteor），但是我想继续使用 Slim 或 Haml 作为模板，而不是转移到另一个模板引擎。

到目前为止，有没有人这样做或花时间弄清楚如何做到这一点，如果是这样，你的发现是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:59:20.987

Tower.js 包装了 express.js 模板引擎系统，因此您应该可以通过将以下内容添加到配置中来使用任何 express.js 模板引擎`Tower.View.engine = "haml"`

Tower.js 使用内置 HAML 的[mint](https://github.com/viatropos/mint.js)，因此您只需要目录中的[haml 模块](https://github.com/visionmedia/haml.js/)。

苗条是有问题的。首先它不是直接在 mint.js 中，所以你需要注册一个新的模板引擎。你需要做的待办事项

1.  创建一个`customAdapter`mint.js 可以使用的函数，你可以查看 mint.js 源代码。下面是一个haml适配器函数的例子：

    ```
    function(content, options, callback) {
      var result;
      result = require('hamljs').render(content, options || {});
      if (callback) {
        callback.call(this, null, result);
      }
      return result;
    } 
    ```

2.  您需要通过执行将适配器添加到 mint.js`require("mint").engines.slim = customAdapter`

但是 Slim 没有 express.js 引擎，而且由于 Slim 包含 ruby​​ 代码片段，所以不太可能会有。
如果您真的想这样做，那么您需要为模板文件创建自己的 javascript 解析器（可能使用类似[http://opalrb.org/](http://opalrb.org/)之类的东西，尽管没有特定的 ruby​​ 库），然后创建一个 express。 js引擎（我不知道怎么做）。

我怀疑这将是一个非常富有成效的练习。
我建议你要么将你的 Slim 文件转换为 haml（或 jam，或 express.js 可以使用的任何模板引擎），要么不要采取行动。
我也找不到任何方法可以自动将 Slim 转换为 haml 或任何其他模板引擎（可能是因为它包含 ruby​​ 代码），因此您必须完全手动进行转换。

# doctrine - 如何使用 Doctrine 获取列不在（值数组）中的每一行？

> ID：13199035
> 
> 赞同：0
> 
> 时间：2012-11-02T16:11:10.617
> 
> 标签：doctrine, doctrine-orm, entitymanager

我正在尝试完成类似于以下 SQL 的操作，但使用 Doctrine API。

```
SELECT * FROM table_name WHERE column_name NOT IN (1, 2, 3); 
```

我在想这样的事情：

```
$entityManager->getRepository($entity)->findBy(array('ID' => array('NOT IN' => array(1, 2, 3)))); 
```

......我有多远？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:01:40.180

您可以使用 DQL 执行此操作：

```
$result = $entityManager->createQuery("SELECT e FROM $entity e 
        WHERE e.ID NOT IN (:ids)")
    ->setParameter('ids', array(1, 2, 3), \Doctrine\DBAL\Connection::PARAM_INT_ARRAY)
    ->getResult(); 
```

从 Doctrine 版本 2.1 开始支持将数组作为参数传递。

# permissions - 在我的脚本中引用 someelse 的 google doc 脚本库

> ID：13199038
> 
> 赞同：0
> 
> 时间：2012-11-02T16:11:28.333
> 
> 标签：permissions, google-apps-script, shared-libraries, spreadsheet

我是具有编辑权限的谷歌电子表格的用户（不是所有者），并且想要引用另一个用户创建的脚本库。我知道库脚本键和库有可用的版本。但是当尝试在脚本编辑器 > 资源 > 管理库中引用它时，我收到以下错误。

```
 *You do not have access to library LIB, used by your script, or it has been deleted.* 
```

我实际上是库脚本的所有者。我是否遗漏了一些东西以使图书馆对其他用户可用？缺少一些步骤？？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:29:37.780

是的，您需要共享您的库以允许其他人（在本例中为电子表格的所有者）使用它。[这篇文章](https://stackoverflow.com/questions/13113564/scriptdb-in-library-accessed-by-webapp)中概述了一些步骤，但要点是 - 1\. 在脚本编辑器中打开库项目 2\. 转到文件 -> 共享

# javascript - 显示隐藏子导航

> ID：13199040
> 
> 赞同：1
> 
> 时间：2012-11-02T16:11:40.577
> 
> 标签：javascript, jquery, html

如何切换每个项目的子导航，如果一个是打开的，隐藏打开的一个以显示当前的？如果没有显示，只需切换。如果您单击一个并显示子导航然后单击另一个隐藏上一个并显示当前。

这是我的html -

```
<header>
    <div class="content-wrapper">
        <div class="user-menu-wrapper">
            <div class="hsn-logo"></div>
            <div class="user-greeting-wrapper">
                <div class="user-greeting">Hi, Abraham</div>
            </div>
            <div class="user-menu">
                <ul class="user-menu-items">
                    <li>@Html.ActionLink(" ", "Index", "Home", new { @class = "my-account" })</li>
                    <li>@Html.ActionLink(" ", "Index", "Home", new { @class = "my-favorites" })</li>
                    <li>@Html.ActionLink(" ", "Index", "Home", new { @class = "my-bag" })</li>
                </ul>
            </div>
        </div>
        <div class="hsn-nav-wrapper">
            <div class="hsn-nav">
                <ul class="hsn-nav-items">
                    <li style="width: 25%">
                        <a class="shop" href="#">
                            <span class="hsn-nav-item-wrap">
                                <span>SHOP</span><span class="drop-down-arrow"></span>
                            </span>
                        </a>
                    </li>
                    <li style="width: 25%">
                        <a class="watch" href="#">
                            <span class="hsn-nav-item-wrap">
                                <span>WATCH</span><span class="drop-down-arrow"></span>
                            </span>
                        </a>
                    </li>
                    <li style="width: 25%">
                        <a class="play" href="#">
                            <span class="hsn-nav-item-wrap">
                                <span>PLAY</span><span class="drop-down-arrow"></span>
                        </span>
                        </a>
                    </li>
                    <li style="width: 15%">
                        <a href=""><span class="hsn-search-icon"></span>
                        </a>
                    </li>
                </ul>
            </div>
            <br class="clear" />
        </div>
    </div>
</header>
<subnav id="shop" class="shop-subnav">
    <div class="hsn-subnav-wrapper">
        <div class="hsn-subnav">
            <div class="hsn-subnav-left">
                <ul>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li><span class="hsn-subnav-callout">Deals</span></li>
                </ul>
            </div>
            <div class="hsn-subnav-right">
                <ul>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li>SubnavItem</li>
                    <li><span class="hsn-subnav-callout">Clearance</span></li>
                </ul>
            </div>
        </div>
    </div>
</subnav>
<subnav id="watch" class="watch-subnav">
    <div class="hsn-subnav-wrapper">
        <div class="hsn-subnav">
            <div class="hsn-subnav-left">
                <ul>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                </ul>
            </div>
            <div class="hsn-subnav-right">
                <ul>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                    <li>SubnavItem2</li>
                </ul>
            </div>
        </div>
    </div>
</subnav> 
```

这是我的 Jquery / JS -

```
$(document).ready(function () {
$('ul.hsn-nav-items li a').click(function () {
    var navitem = $(this).attr('id')
        , id = $(this).attr('class')
        , subnav = $('subnav.' + id + '-subnav');
    $('a.selected').not(this).removeClass('selected');
    $(this).toggleClass('selected');
        $('#'+id).toggle();
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:17:42.180

只需浏览您的 html - 您有重复的 ID。链接到“play”的“a”也有一个 ID 为“play”——将选择该元素，而不是 subnav！

此外，您的两个链接是分类手表，没有商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:58:42.743

解决此问题的最简单方法是`<subnav>`在每次单击时隐藏所有内容。您现有的所有代码都可以正常工作，它已经负责切换相关的`<subnav>`.

```
var $subNavs = $('subnav');
$subNavs.hide();

$('ul.hsn-nav-items li a').click(function () {
    $subNavs.hide();

    var navitem = $(this).attr('id')
        , id = $(this).attr('class')
        , subnav = $('subnav.' + id + '-subnav');
    $('a.selected').not(this).removeClass('selected');
    $(this).toggleClass('selected');
        $('#'+id).toggle();
    return false;
}); 
```

我还添加了一个`return false;`来停止正在执行的默认点击事件`<a>`，这可能会导致页面加载，因为`href="#"`.

也就是说，这`<subnav>`是一个非标准元素，最好使用更简单的标记来描述数据。为每个 subnav 提供一个公共类也可能很有用，这使得通过 jQuery 找到它们更简单。

我还使用以下简化代码做了一个[**小演示**](http://jsfiddle.net/y4sCJ/)

HTML

```
<a class="shop" href="#">
    <span class="hsn-nav-item-wrap">
        <span>SHOP</span><span class="drop-down-arrow"></span>
    </span>
</a><br/>
<a class="watch" href="#">
    <span class="hsn-nav-item-wrap">
        <span>WATCH</span><span class="drop-down-arrow"></span>
    </span>
</a><br/>
<a class="play" href="#">
    <span class="hsn-nav-item-wrap">
        <span>PLAY</span><span class="drop-down-arrow"></span>
</span>
</a>
<div id="shop" class="shop subnav">
shop
</div>
<div id="watch" class="watch subnav">
watch
</div>
<div id="play" class="play subnav">
play
</div> 
```

JavaScript

```
var $subNavs = $('.subnav');
$subNavs.hide();

$('a').click(function () {
    var $subNavToToggle = $('#' + ($(this).attr('class').split(' ')[0]));
    var doToggle = $subNavToToggle.is(':not(:visible)');
    $subNavs.hide();

    $('a.selected').not(this).removeClass('selected');
    $(this).toggleClass('selected');

    $subNavToToggle.toggle(doToggle);

    return false;
}); 
```

# c++ - 将一串多字节字符转换为宽字符会产生意想不到的结果

> ID：13199042
> 
> 赞同：1
> 
> 时间：2012-11-02T16:11:45.103
> 
> 标签：c++, unicode, wininet

我正在尝试使用 WinInet 库以 UTF-8 编码读取网页。

这是我的一些代码：

```
HINTERNET hUrl = ::InternetOpenUrl(hInet, wurl.c_str(),NULL,NULL,NULL,NULL);
    CHAR buffer[65536];
    std::wstring full_content;
    std::wstring read_content;
    DWORD number_of_bytes_read=1;

    while(number_of_bytes_read)
    {
        ::InternetReadFile(hUrl, buffer, 65536, &number_of_bytes_read);
    //  ::InternetReadFileExW(hUrl, &buffersw, IRF_SYNC,NULL);
            //((hUrl,buffer,65536,&number_of_bytes_read);
        read_content.resize(number_of_bytes_read);

        ::MultiByteToWideChar(CP_ACP,MB_COMPOSITE,
                     &buffer[0],number_of_bytes_read,
                     &read_content[0],number_of_bytes_read);
        full_content.append(read_content);
        //readed_content.append(buffer,number_of_bytes_read);
    } 
```

我正确地看到了英文符号，但我看到的是垃圾而不是俄语符号。会是什么？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:17:17.723

您的网页是 UTF-8，但您使用 ANSI 代码页 (CP_ACP) 对其进行解码。改用 CP_UTF8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:59:18.947

根本不转换。将其 UTF-8 保存在内存中。仅在与 Windows API 函数交互时转换为 UTF-16。

[http://utf8everywhere.org](http://utf8everywhere.org)中有关此方法的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:27:20.007

将 CP_ACP 更改为 CP_UTF8 并将 MB_COMPOSITE 更改为 0

从文档

对于 UTF-8 或代码页 54936（GB18030，从 Windows Vista 开始），dwFlags 必须设置为 0 或 MB_ERR_INVALID_CHARS。否则，函数将失败并显示 ERROR_INVALID_FLAGS。

# c# - 为什么 ReSharper 认为“thread.Name == null”总是错误的？

> ID：13199043
> 
> 赞同：8
> 
> 时间：2012-11-02T16:11:47.503
> 
> 标签：c#, multithreading, resharper

我正在编写一个辅助方法来方便地设置`Name`a `Thread`：

```
public static bool TrySetName(this Thread thread, string name)
{
    try
    {
        if (thread.Name == null)
        {
            thread.Name = name;
            return true;
        }
        return false;
    }
    catch (InvalidOperationException)
    {
        return false;
    }
} 
```

它按预期工作。然而，ReSharper 声称该条件始终为假，并且相应的代码在启发式上是无法访问的。那是错误的。在分配字符串之前， A`Thread.Name`始终为空。

![](../Images/7a7d27705aa6abfa1ae2899958a6f0e2.png)

那么，为什么 ReSharper 会这么认为呢？有没有办法告诉 ReSharper 它不是（除了`// ReSharper disable ...`）？

我正在使用 ReSharper 5.1.3。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T16:22:22.480

我认为这是在 6+ 的 RS 中修复的。见[这里](http://devnet.jetbrains.net/message/5273899)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:25:39.183

它似乎是 R# 中的一个错误，已在 v6 中修复。

见：[http ://devnet.jetbrains.net/message/5366898](http://devnet.jetbrains.net/message/5366898)

# jquery - 内置 this->js->submit cakephp 运行两次

> ID：13199044
> 
> 赞同：3
> 
> 时间：2012-11-02T16:11:48.073
> 
> 标签：jquery, ajax, cakephp-2.1, helpers

各位程序员。

我只发现[这个](https://stackoverflow.com/questions/4824859/ajax-form-submit-form-submitted-twice)对我的问题的引用，这没有帮助。

我在**$this->Js->submit中内置了蛋糕 phps**

**我想做的事：**

我的逻辑开始的站点包含一个包含我的数据的表。在这个站点上，我还有几个包含表单并由模式窗口（jquery ui 对话框）打开的元素

1.  将对象插入数据库。*（在职的）*
2.  我插入的表单位于模式对话框窗口中。*（在职的）*
3.  提交按钮是一个图像。*（在职的）*
4.  在提交表单之前，验证被触发*（工作）*
5.  提交表单后，关闭模式并将新对象放在表格的第一行*（工作）*。

**那么我的问题是什么？**

一切都会触发两次。

** 代码 **

由于我所有的其他代码似乎都在工作，我将只粘贴我的代码的**$this->Js->submit**部分，所以你们可以专注于似乎是问题所在。

如果需要任何其他代码，请写信给我，我很乐意在编辑部分粘贴更多代码。

```
echo $this->Js->submit(' ', array (
        'label' => 'Send',
        'onsubmit'=>"event.returnValue = false; return false;",
        'div'   => array('class' => 'send_button'), //style submit to be an image
        'url'   => array('controller' => 'records', 'action' => 'append_new_record'),
        'type' => 'json',
        'success' => '
            if (data.success == true) {
                $("#element_add").dialog("close");
                var newLine = data.recordLine;
                $("#content").find("table tbody").find("tr:first").before(newLine);
            }
            else { 
                $("#element_add").html(data.form);
            }
            ',
        'buffer' => false, //true did not help (refreshes the whole web site)
        'before' => '
            if (!checkAdd()) { //validation (custom js function)
                return false;
            }
        '
    )); 
```

**我试过的**

1.  在“成功”代码块的末尾添加一个 return false 行。
2.  在“之前”代码块的开头添加 event.preventDefault()。

**EDIT1 这是生成的 HTML 代码**

```
 </script><div class="send_button"><input  id="submit-1182269389" type="submit" value=" "/></div><script type="text/javascript">

$("#submit-1182269389").bind("click", function (event) {$.ajax({beforeSend:function (XMLHttpRequest) {
                if (!checkAdd()) {
                    return false;
                }
            }, data:$("#submit-1182269389").closest("form").serialize(), dataType:"json", label:"Send", onsubmit:"event.returnValue = false; return false;", success:function (data, textStatus) {
                if (data.success == true) {
                    $("#element_add").dialog("close");
                    var newLine = data.recordLine;
                    $("#okno").find("table tbody").find("tr:first").before(newLine);
                }
                else {
                    $("#element_add").html(data.form);
                }
                }, type:"post", url:"\/my_app\/records\/append_new_record"});
return false;});

</script></form> 
```

**EDIT2 1\. 尝试无效**

```
<script type="text/javascript">
    $('#addForm').submit(function(event) {
        event.preventDefault();
    });
</script> 
```

所以这会阻止整个 ajax 事情（刷新页面后数据被附加到表中，仍然两次）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:51:03.543

我通过一个很好的解决方法解决了这个问题，所以如果有人提供信息为什么会这样，我会很高兴。

我的解决方案：

*   添加了隐藏输入

    ```
    $this->Form->input('submit_type', array('id'=>'add_submit_type', 'type'=>'hidden', 'value'=>0)); 
    ```

*   在我添加这段代码之前

    ```
    var value = $("#add_submit_type").val();
    if (value == 1) {
        $("#add_submit_type").val("0");
    } else {
        $("#add_submit_type").val("1");
    } 
    ```

*   在我的 PHP 中，如果 $this->request->data 的 submit_type == 0，我不允许创建对象。

# java - 休眠多对一映射，我应该这样插入吗？

> ID：13199045
> 
> 赞同：0
> 
> 时间：2012-11-02T16:11:48.283
> 
> 标签：java, hibernate, orm

假设我们有两个表，`user`并且`domain`. 用户可能有一个域，一个域可能有多个用户。所以我们将做单向多对一：

```
@Entity
@Table(name = "DOMAIN")
public class Domain implements Serializable
{
    @Id
    @Column(name = "DOMAIN_ID")
    private Integer domainId;

    @Column(name = "NAME")
    private String domainName;
}

@Entity
@Table(name = "\"USER\"")
public class User implements Serializable
{
    @Id
    @GeneratedValue(generator = "USER_SEQ")
    @GenericGenerator(name = "USER_SEQ", strategy = "sequence", parameters = @Parameter(name = "sequence", value = "SEQ_USER_ID"))
    @Column(name = "USER_ID", nullable = false)
    private Long userId;

    @Column(name = "FIRST_NAME")
    private String firstName;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "DOMAIN_ID")
    @ForeignKey(name = "DOMAIN_ID")
    private Domain domain;
} 
```

`Domain`表是不变的东西，字典。虽然`User`是可编辑的表。

我正在创建一个基本表单，用户选择将在其中创建新用户的域。假设我的控制器收到了这些数据：

```
Integer domainId = 1;
String firstName = "aaa"; 
```

所以我正在创建新用户：

```
User newUser = new User();
newUser.setFirstName( firstName ); 
```

现在我的问题来了，我应该这样做吗？

```
Domain domain = somthingThatWillFetchObjectFromDb.getDomain( domainId );
newUser.setDomain( domain );
//save user 
```

这将生成额外的选择，以获取域。当然我可以用`Integer domainId`POJO 代替，但那不是 ORM。那么问题又来了，这是应该做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:23:38.463

是的，这就是你应该做的。如果您不想实际从数据库中加载域信息，请使用名称奇怪`Session.load()`的方法而不是`Session.get()`方法。如果域尚未加载到会话中，`Session.load()`将简单地为您返回该域的统一实体代理（就像您加载了一些与域的惰性关联的实体一样），而不会访问数据库。

也就是说，如果域是不可更改的，为什么要`@Cascade(CascadeType.ALL)`在域字段上设置？这意味着每次您合并或更新用户时，域也将被合并或更新。更糟糕的是：如果您删除一个用户，该域也将被删除（如果其他用户引用同一个域，这当然会导致异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:23:22.880

是的。要保存子实体`User`，您需要在其中设置父实体，即`Domain`实体。

另一种方法是在父实体中定义双向映射（OneToMany），即。域，加载`Domain`，添加一个或多个`User`对象`Domain`并仅保存`Domain`实体，例如

`Domain`实体：

```
 @OneToMany(fetch = FetchType.LAZY, mappedBy = "domain")
  List<User> users = null;

  public List<User> getUsers(){
     return this.users;
  }

  public void setUsers(List<User> user){
     this.users = users;
  }

  public void addUser(User user){
     user.setDomain(this);//set the parent entity
     if(this.users==null){
        this.users = new ArrayList<User>();
     }
     this.user.add(user);
  } 
```

然后保存用户：

```
 User user1 = new User();
   ......
   User user2 = new User();
   ......
   Domain domain = loadDomain();//<- use actual method to load the domain
   //< add all the users to be saved at once
   domain.addUser(user1); 
   domain.addUser(user2);
   //save parent entity i.e. domain
   saveDomain(domain);//use actual method to save the entity 
```

# wordpress - 二十十二个标题图像和导航在同一行

> ID：13199046
> 
> 赞同：0
> 
> 时间：2012-11-02T16:11:49.460
> 
> 标签：wordpress, wordpress-theming

你怎么能把导航和二十二中的标题图片放在同一行？现在导航菜单在图像上方，但我希望它们彼此相邻。有什么办法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:30:34.140

将“位置：相对”添加到#masthead：

```
#masthead {position: relative;} 
```

然后用绝对位置定位您的导航：

```
#site-navigation {
    position: absolute;
    bottom: 0; /* or top, if you prefer */
    right: 0;
} 
```

# sql - 如何设置sql字段值等于同一张表中的另一个值

> ID：13199051
> 
> 赞同：4
> 
> 时间：2012-11-02T16:12:04.893
> 
> 标签：sql

我有一个表，其中包含`location id and the item number combination form the primary key`. 在成本等方面，两个位置的许多项目都是相同的。我需要修复一个位置信息，该位置信息以某种方式被用户更改。我正在寻找有关如何将值设置为`location 1 for item 1`与`location 2 item 1`. 如果值在不同的表中，我知道如何执行此操作，但是当值在同一个表中时，我不确定如何完成此操作。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T16:15:43.653

我想你正在寻找这个：

```
UPDATE table SET col1 = col2 
```

在表“table”的所有行中将“col1”设置为“col2”的值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:28:52.377

我认为你需要这个：

```
UPDATE l1
SET COST = l2.COST
FROM TableA l1
INNER JOIN TableA l2 ON l2.Location = 2 AND l1.item = l2.item
WHERE l1.location = 1 and l1.item = 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-29T11:24:26.970

如果你想在同一个表中设置一个列值，另一个列值然后使用这个查询

```
UPDATE table_name SET column_1 = column_2 
```

column_1 假设这在所有记录中都是空白的，而 column_2 这个列你想在 column_1 中放置相同的值，然后使用下面的示例：

```
UPDATE customer SET `blank_column` = `student_name` 
```

运行查询，blank_column 可以填充与 student_name 值相同的值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T16:17:24.007

这是你想要的吗？

```
UPDATE table t1 JOIN table t2
SET t1.col1 = t2.col1, t1.col2 = t2.col2, ...
WHERE t1.item_number = 1 and t1.location_id = 1
AND t2.item_number = 1 and t2.location_id = 2 
```

# xaml - winrt xaml PageLayout VisualState

> ID：13199052
> 
> 赞同：0
> 
> 时间：2012-11-02T16:12:07.267
> 
> 标签：xaml, grid, windows-runtime, storyboard, visualstates

我的页面上放置了很多用户控件。所有这些都在网格行和列中。还有几个包含用户控件的嵌套网格。但现在我需要为这些用户控件提供 Snapped VisualState，但布局完全不同。

为 UserControls 选择内部样式很容易，但我不清楚如何将例如 Grid.RowDefinitions 与 2 行更改为 Grid.RowDefinitions 与 3 行，更改内部 UserControls 的每个 Grid.Row 属性，甚至更多以替换一些子元素从一个网格到另一个网格。

是否可以为网格元素制作一些模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:01:47.893

经过一些努力尝试根据视图状态动态布局和重新设置控件样式后，我决定使用模板方法，并为不同的视图提供单独的视图。基本上每个视图都有单独的逻辑树，并根据视图状态切换它们的可见性。

# mysql - 查找具有 0 个帖子、1-5 个帖子和 >5 个帖子的用户的平均年龄

> ID：13199060
> 
> 赞同：2
> 
> 时间：2012-11-02T16:12:37.653
> 
> 标签：mysql, sql, database, database-design, aggregate-functions

我需要生成一份关于我们一些用户的年龄的报告，这些用户的帖子数按他们的居住国分组。

这是我现在架构的简化版本：

```
DESCRIBE countries;
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| id    | int(11)     | NO   | PRI | NULL    | auto_increment |
| name  | varchar(45) | NO   |     | NULL    |                |
+-------+-------------+------+-----+---------+----------------+

DESCRIBE users;
+------------+---------+------+-----+---------+----------------+
| Field      | Type    | Null | Key | Default | Extra          |
+------------+---------+------+-----+---------+----------------+
| id         | int(11) | NO   | PRI | NULL    | auto_increment |
| age        | int(11) | NO   |     | NULL    |                |
| country_id | int(11) | NO   | MUL | NULL    |                |
+------------+---------+------+-----+---------+----------------+

DESCRIBE posts;
+---------+-------------+------+-----+---------+----------------+
| Field   | Type        | Null | Key | Default | Extra          |
+---------+-------------+------+-----+---------+----------------+
| id      | int(11)     | NO   | PRI | NULL    | auto_increment |
| content | text        | NO   |     | NULL    |                |
| user_id | int(11)     | NO   | MUL | NULL    |                |
+---------+-------------+------+-----+---------+----------------+ 
```

我想要一个看起来像这样的结果集：

```
country.name | AVG(age of users with 0 posts) | AVG(age of users with 1-5 posts | AVG(age of users with 1-5 posts
----------------------------------------
Denmark  | 17.4   | 23.2   | NULL
Germany  | 20.1   | 27.8   | 34.7
England  | 31.1   | NULL   | 28.3 
```

其中 NULL 表示在特定后计数级别没有用户的国家/地区。例如，丹麦的每个人都有 0 到 5 个帖子，仅此而已。我想它不必说NULL，但应该清楚的是，这个值是不确定的。

到目前为止，这是我的查询：

```
SELECT
    c.name,
    AVG(something) AS avg_age_with_no_posts,
    AVG(something) AS `avg_age_with_1-5_posts`,
    AVG(something) AS `avg_age_with_gt5_posts`
FROM
    users u
    JOIN posts p ON p.user_id=u.id
    JOIN countries c ON c.id=u.country_id
GROUP BY c.id; 
```

我知道这并不多，但实际上我已经用其他子句（嵌套选择、HAVING、COUNT(CASE ... WHEN ...)）挫败了很多（几个小时）。上面的查询只是我知道我需要的基本内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:28:26.900

尝试

```
 Select c.name,
    Avg(Case When pc.postCount == 0 Then pc.Age End) avgAgeNoPosts,
    Avg(Case When pc.postCount Between 1 And 5 Then pc.Age End) avgAge1_5Posts,
    Avg(Case When pc.postCount > 5 Age End) Then pc.Age End) avgAgeGT5Posts
 From users u
    Join countries c On c.id=u.country_id
    Join (Select user_id uid, Count(*) postCount
          From posts
          Group By user_id ) pc
       On pc.UId = u.id
 Group By c.name 
```

为了解释为什么`Sum(Case When ... End)`表达式在没有 else 的情况下工作，当在 When 子句中指定的选项都不为真时，将输出空值。并且所有聚合运算符（包括 Sum() ）将忽略空值。

# css - Primefaces：边界外的数据表

> ID：13199064
> 
> 赞同：1
> 
> 时间：2012-11-02T16:12:52.257
> 
> 标签：css, jsf, jsf-2, datatable, primefaces

我在面板中有一个 PrimeFaces 数据表。但它有一个令人不安的外部边界，我想删除它但失败了。这是xhtml代码：

```
 <p:panel styleClass="centerPanel" id="centerPanel">
       <p:dataTable styleClass="DataTable" style="width:100%;" liveScroll="true" value="#{PanelController.panelList}" var="GridPanel" scrollable="true" scrollRows="20" scrollHeight="470" rows="5">
               <p:column>

               </p:column>
       </p:dataTable>
   </p:panel> 
```

这是css代码：

```
.ui-datatable.DataTable th, .ui-datatable.DataTable tr, .ui-datatable.DataTable td, .ui-datatable.DataTable {
background: rgba(220, 220, 220, 0.50) none;
border: none; !important;
border-color: rgba(0,0,0,0); !important;
-webkit-background-clip:border;!important;
color:rgba(0,0,0,0);
}

.DataTable.ui-datatable table thead {
    display: none;
    border: none; !important;
} 
```

看来![喜欢](../Images/fd17157b80244c5244e2126c0c7d2f6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:31:21.013

使用以下 CSS 样式：

```
 .DataTable table > thead > tr > th,
    .DataTable table > tbody,
    .DataTable table > tbody > tr,
    .DataTable table > tbody > tr > td {
        border: none !important;
    } 
```

如果你不关心你的过滤器输入框和这样的元素

```
 .DataTable table * {
       border: none !important;
   } 
```

# javascript - jQuery滑动和延迟淡出不起作用

> ID：13199066
> 
> 赞同：1
> 
> 时间：2012-11-02T16:12:57.887
> 
> 标签：javascript, jquery, jquery-animate

我正在为 jQuery 编写一个通知插件。作为插件的一部分，通知可以设置为在一定时间后自动消失。出于某种原因，虽然它只是淡出并且`slideUp`不像我期望的那样。我究竟做错了什么？

```
$('#' + plugin.uniqID)
    .delay(plugin.settings['autoclose'])
    .queue(function () {
        $(this)
            .fadeOut({ duration: plugin.settings['speed'], queue: false })
            .slideUp(plugin.settings['speed']);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:33:39.850

adeneo 是对的，您需要调用[.dequeue()](http://api.jquery.com/dequeue/)

[http://jsbin.com/opiluy/1/edit](http://jsbin.com/opiluy/1/edit)

```
$('#' + plugin.uniqID)
    .delay(plugin.settings['autoclose'])
    .queue(function () {
        $(this)
            .fadeOut({ duration: plugin.settings['speed'], queue: false })
            .slideUp(plugin.settings['speed']);
        }).dequeue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:37:43.713

您只需要`queue: false`为两个动画调用指定。这将正常工作。

```
$('#' + plugin.uniqID)
.delay(plugin.settings['autoclose'])
.queue(function () {
    $(this)
        .fadeOut({ duration: plugin.settings['speed'], queue: false })
        .slideUp({ duration: plugin.settings['speed'], queue: false });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:25:30.763

作为替代建议，您能否仅使用 animate 并更改 animate 函数中的高度和不透明度？像这样：

$(this).animate({ height:"whateverheight", opacity:"whateveropacity" },whateverspeed);

# java - 对象递归可行吗？

> ID：13199076
> 
> 赞同：-2
> 
> 时间：2012-11-02T16:13:35.630
> 
> 标签：java, object, recursion

我有一个名为 Program 的类，它包含一个网格。它有两个方法 possi() 保存所有可能的进入网格的方法，并保存 ArrayList possi 和所有可能的入口点和方法solve ，它实际进入并使用提供的入口点进入网格。我已经使用 dfs 和 bfs 完成了 mazesolvers，但我的问题是，solve 实际上基本上改变了网格，通常 bfs 和 dfs 不考虑被改变的迷宫。这就是我不使用它们的原因。我想通过切入点和进一步点的所有可能性。我的第一级入口点存储在 lev1.possi 中，我可以循环访问它们。然后我必须创建一个网格的新实例，因为solve会改变结构并应用solve然后从那个新对象返回新的possi。所以本质上我正在为每次更改创建一个新对象。

```
 Program lev1 = new Program();//initializes grid randomly
    lev1.possi();//calculates entry points and stores in possi

    ArrayList<Program> lev = new ArrayList<Program>();//stores all possible objects
    for (int i = 0; i < lev1.possi.size(); i++)//loops through all entry points
    {
        Program pick = new Program(lev1.grid.clone());//makes a new object
        lev.add(pick);
        lev.get(i).solve(lev1.possi.get(i));//changes the new object
        lev.get(i).possi();//calculates further points to go through
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:30:52.860

我假设`grid`是一些复杂类型，其中包含复杂类型，如数组等。在这种情况下`clone()`，不会创建深层副本（即它不会像数组一样递归地克隆部分）。

下面是一个`clone()`复杂类型方法的例子：在这个例子中，我们有一个`FlightLogEntry`包含`TreeMap`. 要克隆一个`FlightLogEntry`，我们需要创建一个新`TreeMap`元素并使用原始元素填充地图。在此示例中，这些元素没有被克隆 ( `clone.setAttendant(p, this.attendats.get(p)`)。如果您需要从 clone 方法中获得更深的副本（这取决于克隆的使用），您可能还想像这样克隆 attenat `clone.setAttendant(p, this.attendats.get(p).clone()`：.

```
@Override
public FlightLogEntry clone() {
    FlightLogEntry clone = (FlightLogEntry) super.clone();
    clone.attendants = new TreeMap<Person, Duty>();
    for( Person p : this.attendants.keySet() ) {
        clone.setAttendant(p, this.attendants.get(p));
    }
    return clone;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:19:34.910

您需要在 Program(grid) 构造函数中实例化一个新的网格对象，然后将旧网格中的值分配给新网格。

# javascript - MediaElementJS 非常错误

> ID：13199077
> 
> 赞同：0
> 
> 时间：2012-11-02T16:13:38.197
> 
> 标签：javascript, html, video

我为我的视频实现了一个 mediaelement.js 实例，这些视频都是 mp4 格式的。但是，我无法让它正常工作。首先是我如何实现它：

视频：

```
<video src="/video.mp4" type="video/mp4" controls preload="none" width="500" height="282"></video> 
```

放置在正文的末尾，就在包含 mediaelement.js 本身之后：

```
$("video").mediaelementplayer({
  mode:"shim",
  startVolume:0.3
 }); 
```

我遇到的问题是：

*   在 IE 中，silverlight 播放器不会播放媒体。看起来它正在加载，因为正在显示视频长度。
*   当模式设置为“shim”时，Chrome 不允许全屏显示。
*   当模式设置为“shim”时，iPhone 用户会遇到死链接。
*   当模式未设置为“shim”时，iPhone 用户会遇到不会播放视频的播放器。

视频是 .mp4 和 h.264 编码。

在此先感谢您提供帮助的任何尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:10:08.277

问题是视频已被媒体编码器隔行扫描。IE+iPhone 不玩那些。

全屏是 flashplayer 的问题，仅在某些版本的 Chrome 中发生。

# javascript - Array[element+1] 返回未定义？

> ID：13199078
> 
> 赞同：2
> 
> 时间：2012-11-02T16:13:37.940
> 
> 标签：javascript, arrays, undefined

我正在尝试检查数组中的给定元素是否大于它的两个相邻元素，但 array[element+1] 返回 - 未定义。但是，当我尝试使用 array1[(element-1)+2] 时，它工作得很好。

这是数组：

```
var array1 = [1, 5, 56, 6, 7, 8, 12, 5, 1]; 
```

我的代码：

```
function biggestOfThree(element){
    if((element == 0)||(element == array1Length-1)){
        document.write("There aren't 2 adjacent elements in the array");
    }
    else{
        if((array1[element]>array1[element+1])&&(array1[element]>array1[element-1])){
            document.write(array1[element] + " is bigger than it's adjacent elements")
        }
        else{
            document.write(array1[element] + " isn't bigger than it's adjacent elements")
        }
    }

} 
```

...以及用户接收元素的功能：

```
function assign(){
var i_element = document.getElementById('indexOfTheElement');
var i = i_element.value;
    biggestOfThree(i)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:16:32.637

您看到的错误是由于 JavaScript 的**动态类型**。使用**[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)**

```
var i = parseInt(i_element.value); 
```

`+ 1`仍然认为它是一个字符串并附加 1 到它。执行 a`-1`迫使它认为它是一个 int。因此你的结果。始终使用转换为 int`parseInt()`

```
"1" + 1 = 11
"1" - 1 = 0 
```

正如@Elias 所说，最好在使用 parseInt 时定义基数。

```
parseInt(string, 10)
                  ^ radix 
```

# c++ - 详尽搜索：找零的最少硬币数量。使用递归时保留解决方案数组

> ID：13199083
> 
> 赞同：2
> 
> 时间：2012-11-02T16:13:56.590
> 
> 标签：c++, recursion

问题在于最小化提供准确找零所需的硬币数量。总会有 1 的硬币可用，因此问题总会有解决方案。

一些样品硬币套及其解决方案的金额为 40 美分：

硬币组 = {1, 5, 10, 20, 25}，解决方案 = {0, 0, 0, 2, 0}

硬币集 = {1, 5, 10, 20}，解决方案 = {0, 0, 0, 2}

实现返回正确的最小值。硬币的数量，但我无法保存正确的解决方案数组。

```
int change(int amount, int n, const int* coins, int* solution) {
    if(amount > 0) {
        int numCoinsMin = numeric_limits<int>::max();
        int numCoins;
        int imin;
        for(int i = 0; i != n; ++i) {
            if(amount >= coins[i]) {
                numCoins =  change(amount - coins[i], n, coins, solution) + 1;
                if(numCoins < numCoinsMin) {
                    numCoinsMin = numCoins;
                    imin = i;
                }   
            }   
        }   
        solution[imin] += 1;
        return numCoinsMin;
    }   
    return 0;
} 
```

样品运行：

```
int main() {
    const int n = 4;
    int coins[n] = {1, 5, 10, 20, 25};
    int solution[n] = {0, 0, 0, 0, 0};
    int amount = 40;

    int min = change(amount, n, coins, solution);
    cout << "Min: " << min << endl;
    print(coins, coins+n); // 1, 5, 10, 20
    print(solution, solution+n); // 231479, 20857, 4296, 199
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:53:37.657

您仍然可以使用数组来执行此操作，但我会更改程序的结构以使其递归更简洁。

我将不得不为你编写这个伪代码，因为我几乎不使用 C++，但你可以把它放在一起。这利用了模除法（C# 中的 %，不知道如果它在 C++ 中相同，你可以查一下），它只返回除法的余数。大多数编程语言中的正常除法 (/) 将返回整数答案并忽略任何余数。

```
//declare a function that takes in your change amount and the length of your coins array
int changeCounter(int amount, int coins.length)
      int index = coins.length-1;

      //check to see if we're done... again dunno what 'or' is in C++, I put ||

      if (amount <= 0 || index < 0)
         **return** your results array or whatever you want to do here

      //sees how many of the biggest coin there are and puts that number in the results
      if amount > coins[index]
      {
        result[index]= (amount / coins[index])
        //now recurse with the left over coins and drop to the next biggest coin
        changeCounter((amount % coins[index]), index-1)
      }

      //if the amount isnt greater than the coin size then there obviously arent any of that size, so just drop coin sizes and recurse again
      else
         changeCounter(amount,index-1) 
```

这应该让您朝着正确的方向开始，我试图为您评论它，很抱歉我不能为您提供完美的 C++ 语法，但将我在这里所做的转换成您正在尝试的应该不会太难去做。

如果您有任何问题，请告诉我

# php - PHP中的连接：缺少空格

> ID：13199086
> 
> 赞同：1
> 
> 时间：2012-11-02T16:14:04.077
> 
> 标签：php, mysql, string-concatenation

我正在做一个像这样的简单连接`$string = $a.' '.$b.' '.$c` 并且`$b`是一个可能为空的变量。因此，如果`$b`为 null，则`$string = $a.' '.' '.$c`, 并且在 MySQL 中似乎如此。
但是，当我回显它时，$string 在 $a 和 $c 之间只有一个空格，当`$b`它为空时，一个空格神秘地丢失了。
有人知道这里发生了什么吗？

附加说明：我这样做是因为我忘记在 60 小时解析之前检查 $middlename 是否为空。所以现在在我的数据库中，有正确形式的`adam c. johnson`名字和不正确形式的名字，比如名字和姓氏`adam johnson`之间有两个空格。如果有一种方法可以消除那些不正确名称中的一个额外空格，它也可以解决我的问题。

评论中的代码：

```
$name = $list["firstname"].' '.$list["middlename"].' '.$list["lastname"];
if (strlen($name)>20) {
   //echo $name."<br>";
   $name_cut=substr($name,0,20);
   $stmt= $conn->stmt_init();
   $sql = 'UPDATE ? SET name=replace(name, \'?\', \'?\');';
   if ($stmt->prepare($sql)) {
      $stmt->bind_param('sss', $table, $name_cut, $name);
      $stmt->execute();
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:20:48.833

空格处理在[http://www.w3.org/TR/html4/struct/text.html#h-9.1](http://www.w3.org/TR/html4/struct/text.html#h-9.1)中定义（HTML4 规范——它似乎不在 HTML5 规范中，尽管我认为它遵循相同的规则）。

> 特别是，用户代理在产生输出字间距时应该折叠输入的空白​​序列。即使在没有语言信息的情况下也可以而且应该这样做

如果要打印实际空间，请将要打印的内容放入`<pre>`带样式的元素中`white-space: pre`，或者使用不间断的空格实体 ( `&nbsp;`) 代替空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:42:21.623

检查 $list["middlename"] 是否为 NULL

```
if ($list["middlename"]==NULL){ 
  $ name = $list["firstname"].' '.$list["lastname"];
}
else{
     $ name = $list["firstname"].' '.$list["middlename"].' '.$list["lastname"];
}
if (strlen($name)>20) {
   //echo $name."<br>";
   $name_cut=substr($name,0,20);
   $stmt= $conn->stmt_init();
   $sql = 'UPDATE ? SET name=replace(name, \'?\', \'?\');';
   if ($stmt->prepare($sql)) {
      $stmt->bind_param('sss', $table, $name_cut, $name);
      $stmt->execute();
   }
} 
```

# xcode - 如何将 libjpeg 静态链接到 xCode 项目

> ID：13199091
> 
> 赞同：2
> 
> 时间：2012-11-02T16:14:13.850
> 
> 标签：xcode, libjpeg

我正在尝试使用 libjpeg，我需要将它静态链接到我的 xCode 项目。我是一个完整的初学者，所以我不知道从哪里开始。我有 xCode v4.5，Mac OX 10.8。有什么帮助吗？？

# php - 转义变量

> ID：13199095
> 
> 赞同：2
> 
> 时间：2012-11-02T16:14:45.213
> 
> 标签：php, security, escaping, xss

我读过这已经足够了，甚至建议在输出上转义字符，而不是在输入上。

它可以很容易地应用于所有 get 变量，因为它们不会从表单级别注入数据库。

但是，我不确定如何处理所有帖子变量。如果它不是来自数据库，那么如果它是原始输入数据，则完全需要转义。但我正在使用 PDO 准备/执行来转义所有变量。现在的问题：

1.  在 select 和 insert 语句中都使用 PDO 的准备/执行是否可以？不是两次转义变量吗？
2.  假设我通过 PDO exeute 语句得到了一些变量 - 是否可以简单地使用 $_POST['variable'] 显示这个变量而不转义它（如果它已经在 PDO 函数中完成）？
3.  htmlspecialchars() 是否足以逃避诸如 GET 变量之类的不是来自数据库的东西？

最重要的是——所有这些、PDO 准备/执行和 htmlspecialchars() 是否足以阻止所有 XSS 攻击？还是我也应该做更多？如果是这样，这应该是什么？从输入中删除所有 html 标签？改用 BB 码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T16:23:33.020

> 我读过这已经足够了，甚至建议在输出上转义字符，而不是在输入上。

通常，您希望：

*   使用准备好的语句验证**输入并存储它。**准备好的语句将保护您的数据库免受 SQL 注入。通常，您不希望在输入时去除 HTML 标记，因为这样做可能会导致数据完整性丢失。
*   在显示用户生成的数据（**输出**）时，您可以结合使用 htmlentities 和 mb_convert_encoding 来防范 XSS。

注意[另一个问题的](https://stackoverflow.com/a/110576/491494)[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)函数：

> 即使您在 HTML 标记之外使用 htmlspecialchars($string)，您仍然容易受到多字节字符集攻击向量的攻击。
> 
> 最有效的方法是使用 [mb_convert_encoding](http://php.net/manual/en/function.mb-convert-encoding.php)和[htmlentities](http://php.net/manual/en/function.htmlentities.php)的组合，如下所示。

```
$str = mb_convert_encoding($str, ‘UTF-8′, ‘UTF-8′);
$str = htmlentities($str, ENT_QUOTES, ‘UTF-8′); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:26:40.010

> 在输出上转义字符，而不是在输入上

是的。

> 轻松应用于所有获取变量

但是 $_GET 是*根据定义* **输入**

> 不是两次转义变量吗？

不 - 通过转义内容，您只是将其与处理代理的错误解释隔离开来。数据库不存储转义数据，它存储原始数据。

因此，如果从

```
O'Reilly 
```

然后转义将其拼接成一个SQL字符串......

```
O\'Reilly 
```

然后*存储*在数据库中并由 SELECT 语句检索的值是

```
O'Reilly 
```

当你想输出你的 HTML 时，你可以通过 htmlspecialchars() 来获取

```
O&quot;Reilly 
```

您可以根据数据的去向使用适当的方法来转义数据 - 因此在将内容放入数据库时​​使用 mysql_real_escape() 或参数绑定或类似方法，在将内容*放入*html 时使用 htmlspecialchars *(* )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:21:56.077

1.  每当数据来自用户时，对其进行清理（如果将其存储在数据库中，请特别注意。）。所以带有prepared statement的PDO是必须的。你做的其他事情就是额外的奖金。

2.  是的（这里的观点因人而异）用于防止 sql 注入（假设您使用的是准备好的语句）。虽然我更喜欢将原始数据存储在数据库中，即使这意味着牺牲一些恶意 XSS 代码可能包含它。输出时，请格外小心。

3.  不，使用[htmlpurifier](http://htmlpurifier.org/)（使用您从数据库输出的视图。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:20:16.400

我使用 mysqli_real_escape_string 和 preg_replace

```
$email = mysqli_real_escape_string($dbc, trim($_POST['email']));
$password = mysqli_real_escape_string($dbc, trim($_POST['password']));
$domain = preg_replace('/^[a-zA-Z0-9][a-zA-Z0-9\._\-&!?=#]*@/', '', $email); 
```

此外，这里是一个类似帖子的链接，关于 PDO 转义[PDO 语句的 Escape 参数？](https://stackoverflow.com/questions/2874636/escape-arguments-for-pdo-statements)

# java - 从 Eclipse IDE 创建可运行的 JAR

> ID：13199096
> 
> 赞同：2
> 
> 时间：2012-11-02T16:14:47.920
> 
> 标签：java, eclipse, executable-jar

我在网上查看了很多信息，也在这里查看了一些问题，但无法解决我的问题，所以我发布了这个问题。我有一个相当简单的项目，使用`SWING`它在 Eclipse 下编译和运行，但是当我尝试使用标准`Export->Java->Runnable Jar`时，最后保留默认属性时，我有一个文件，当我双击时我得到这个：`Could not find the main class: TableFilterDemo. Program will exit`. 这是我的项目结构：

![在此处输入图像描述](../Images/d2adb0108a6a9d919d8970fc7a6aca4c.png)

这是我用于创建的配置`Runnable Jar`：

![在此处输入图像描述](../Images/2326290af47cd13a0b26ee108ef9aa36.png)

并且因为据我了解该错误在定位`main`我留下的方法时存在一些问题，`TableFilterDremo.java`其中仅包含该`main`方法：

```
public class TableFilterDemo{
    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                CreateGUI.createAndShowGUI();
            }
        });
    }
} 
```

到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:16:15.763

如果您通过 Eclipse 提供的完整向导，您会看到有一个屏幕提示您选择一个主类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:29:32.450

在屏幕截图中显示的屏幕之前的屏幕上，您必须手动选择将包含在 jar 中的类。

检查它们是否包含在内的一个好方法是解压缩生成的 jar 文件（例如使用 winzip 或 winrar）并检查它是否包含所有文件。

# ruby - 如何使用 selenium-wedriver 检测 Flash 内容？

> ID：13199098
> 
> 赞同：1
> 
> 时间：2012-11-02T16:14:49.750
> 
> 标签：ruby, selenium-webdriver

我正在自动化一个网站；整个网站都在 html 中，除了少数“复制”按钮在 flash 中。由于该按钮没有元素，我无法验证它的功能（我必须检查它是否可点击并点击它会导致剪贴板中的内容）。有什么办法，我们可以通过添加 java 脚本片段或其他东西来自动化该按钮的功能？
我正在使用 ruby​​ api 来自动化站点。

# iphone - 在编译器中设置一个标志不显示 NSLog

> ID：13199101
> 
> 赞同：2
> 
> 时间：2012-11-02T16:15:00.333
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

是否有任何特定标志可以设置为在调试或发布时不显示 NSLog 输出？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:21:15.900

在 Xcode 中，您可以为特定的构建配置定义宏。例如，这里我`DEBUG`为 Debug 构建定义了，而没有为 release 构建定义。

![在 Xcode 中为 Debug Build Config 设置的 DEBUG 标志](../Images/3bebdf6f8a267687d2b5e1786c688a3a.png)

然后在代码中使用它，将您的`NSLog(...)`语句包装在（或者无论您选择使用宏，**更新**：darren 的方法非常适合这种技术）：

```
#ifdef DEBUG
    NSLog(...);
#endif 
```

对仅发布配置逻辑使用相同的机制。

如果您有不同数量的构建配置，您可以使用此功能，如果您想为不同的构建配置启用/禁用不同级别的功能，您可以定义多个宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:22:20.483

一种选择可能是使用宏作为 NSLog 的替代品（如果此时您可以轻松更改内容）。我喜欢这些家伙使用的前缀头文件：

[http://www.cimgf.com/2010/05/02/my-current-prefix-pch-file/](http://www.cimgf.com/2010/05/02/my-current-prefix-pch-file/)

基本上他们的日志记录功能是：

```
#ifdef DEBUG
  #define DLog(...) NSLog(@"%s %@", __PRETTY_FUNCTION__, [NSString stringWithFormat:__VA_ARGS__])
#else
  #define DLog(...) do { } while (0)
#endif 
```

因此，如果您不在 DEBUG 构建中，则日志记录宏将变为无操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T16:25:48.653

通常，人们编写自己的宏（例如 DebugLog）来“编译”日志：

```
#undef DebugLog
#ifdef DEBUG_MODE
#define DebugLog( s, ... ) NSLog( @"%@", [NSString stringWithFormat:(s), ##__VA_ARGS] )
#else
#define DebugLog( s, ... )
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-22T15:21:06.973

新 Xcode 项目的默认标志是`DEBUG`Debug 而不是 Release。因此，您将以这种方式隐藏`NSLog`在 Release 中：

```
#ifndef DEBUG
#   define NSLog(...)
#   define NSLogv(...)
#endif 
```

或者，如果您也想要漂亮的自定义日志（不在`#ifdef`这里使用，因为不简单`#elifdef`）：

```
#if DEBUG
#   define NSLog(format, ...) NSLog((@"%s " format), __PRETTY_FUNCTION__, ##__VA_ARGS__)
#   define NSLogv(format, ...) NSLog(@"%s %@", __PRETTY_FUNCTION__, [[NSString alloc] initWithFormat:format arguments:__VA_ARGS__])
#elif ADHOC
    // default logs
#else// Release
#   define NSLog(...)
#   define NSLogv(...)
#endif 
```

如果你想覆盖这些宏并且有时仍然记录一些东西，你可以使用：

```
(NSLog)(@"This log is always visible!"); 
```

现在，如何隐藏这些？这将要求您`#define NSLog NoLog`将 NoLog 定义为具有空实现（如`void NoLog(NSString *format, ...) {}`. 但是完全避免使用`(NSLog)`并使用带有 LogLevel 枚举的函数可能会更干净：

```
typedef NS_ENUM(NSUInteger, LogLevel) {
    LogLevelRelease,
    LogLevelAdHoc,
    LogLevelDeveloper,
};

void CustomLog(LogLevel level, NSString *format, ...) {
#if !DEBUG
    if (LogLevel == LogLevelDeveloper)
        return;
#if !ADHOC
    if (LogLevel == LogLevelAdHoc)
        return;
#endif
#endif
    va_list ap;
    va_start (ap, format);
    NSLogv(format, ap);
    va_end (ap);
} 
```

此 CustomLog 的缺点是参数总是被评估，即使在 Release 中也是如此。因此，最佳解决方案是多个宏：

```
#define NSLog(format, ...) NSLog((@"%s " format), __PRETTY_FUNCTION__, ##__VA_ARGS__)
#if DEBUG
#   define DebugLog(...) NSLog(__VA_ARGS__)
#   define AdHocLog(...) NSLog(__VA_ARGS__)
#   define ReleaseLog(...) NSLog(__VA_ARGS__)
#elif ADHOC
#   define DebugLog(...)
#   define AdHocLog(...) NSLog(__VA_ARGS__)
#   define ReleaseLog(...) NSLog(__VA_ARGS__)
#else// Release
#   define NSLogv(...)
#   define DebugLog(...)
#   define AdHocLog(...)
#   define ReleaseLog(...) NSLog(__VA_ARGS__)
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T16:20:35.550

使用此宏检查调试模式

```
#ifdef DEBUG
//NSLog(@"XYZ");
#endif 
```

以上 NSLog 将不会在 Release 模式下打印

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T16:20:40.323

您可以在预编译头文件 (.pch) 中定义一个宏来禁用 NSLog：

```
#ifdef RELEASE
#   define NSLog(...)
#endif 
```

这会在发布版本中禁用 NSLog。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-13T09:02:58.003

添加此 b/c 似乎没有一个答案可以解决您使用其中一些方法可能遇到的警告（取决于项目设置）。

这是我能找到的唯一方法来抑制 NSLog 而不会收到任何警告。否则我会使用我们使用的设置（警告未使用的变量）。

```
#undef NSLog

#define NSLog(fmt, ...) if (0) { printf("%s", [[NSString stringWithFormat:fmt, ##__VA_ARGS__] UTF8String]); } 
```

然后你需要做的就是把它放在你用于发布版本的任何 pch 文件中，或者放在你想抑制日志的任何地方。

感谢@Hot Licks 提供了如何使变量“使用”的示例。

# javascript - 无法在 select2 中选择通过 jsonp 填充的项目

> ID：13199103
> 
> 赞同：3
> 
> 时间：2012-11-02T16:15:11.847
> 
> 标签：javascript, jsonp, geonames

我正在尝试使用地名数据填充 select2 元素。我有一个定义的FormatSelection方法，但选择了一个项目时不会触发。

这是 HTML 元素：

```
<input id="location" size="30" type="text">​ 
```

Select2 与格式函数的绑定：

```
function locationFormatResult(location) {
    var markup = "<table class='location-result'><tr>";

    if (location.countryCode !== undefined) {
        markup += "<td class='flag-image'><img src='http://www.geonames.org/flags/x/" + location.countryCode.toLowerCase() + ".gif' /></td>";
    }

    markup += "<td class='location-info'>";
    markup += "<div class='location-name'>" + location.name + ", " + location.adminName1 + ", " + location.countryName + "</div>";
    markup += "</td></tr></table>";

    return markup;
}

function locationFormatSelection(location) {
    return location.name + ", " + location.adminName1 + ", " + location.countryName;
}

$(function () {
    $('#location').select2({
        placeholder: 'Location',
        allowClear: true,
        width: '260px',
        minimumInputLength: 2,
        ajax: {
            url: 'http://ws.geonames.org/searchJSON',
            dataType: 'jsonp',
            data: function (term) {
                return {
                    featureClass: 'P',
                    q: term
                };
            },
            results: function (data) {
                return {
                    results: data.geonames
                };
            }
        },
        formatResult: locationFormatResult,
        formatSelection: locationFormatSelection,
        dropdownCssClass: "bigdrop"
    });
}); 
```

你可以在这里看到完整的小提琴：http: [//jsfiddle.net/6CVbw/1/](http://jsfiddle.net/6CVbw/1/)

为什么选择一个项目不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T18:03:10.730

我想到了。当你在一个元素上实例化 select2 插件时，你必须指定一个 ID 属性。这有效：

```
$(function () {
    $('#location').select2({
        id: function(e) { return e.name + '|' + e.adminName1 + '|' + e.countryName },
        placeholder: 'Location',
        allowClear: true,
        width: '260px',
        minimumInputLength: 2,
        ajax: {
            url: 'http://ws.geonames.org/searchJSON',
            dataType: 'jsonp',
            data: function (term) {
                return {
                    featureClass: 'P',
                    q: term
                };
            },
            results: function (data) {
                return {
                    results: data.geonames
                };
            }
        },
        formatResult: locationFormatResult,
        formatSelection: locationFormatSelection,
        dropdownCssClass: "bigdrop"
    });
}); 
```

你可以在这里看到更新的小提琴：http: [//jsfiddle.net/6CVbw/2/](http://jsfiddle.net/6CVbw/2/)

# matlab - 如何在 Matlab 中将数据绘制为“最适合”的 cos² 图？

> ID：13199107
> 
> 赞同：0
> 
> 时间：2012-11-02T16:15:22.483
> 
> 标签：matlab, curve-fitting

我目前是一名物理专业的学生，​​几周来一直在编译与“量子纠缠”相关的数据。我现在已经到了必须将我的数据（应该类似于 cos² 图 - 并且确实如此）绘制成一种“最合适”的 cos² 图的地步。实验室脚本说明了以下内容：

> 更精确地确定可见性 V（这基本上是数据的“干净”程度）遵循使用函数对测量数据的最佳拟合：
> 
> f(b) = A/2[1-Vsin(bb(中心)/P)]

当然，这可能并不意味着脱离上下文，但本质上 A 是幅度，b 是角度，P 是周期性。因此，这也是一个“波浪”，就像我发现的实验数据一样。

由此我明白，如前所述，我正在制作一条“最佳拟合”曲线。但是，有人告诉我，这在 Excel 中是不可能的，最好的方法是 Matlab。

我知道中级 JavaScript，但不知道 Matlab，并希望有一些方向。

有没有我可以阅读的教程？有人可以和我一起经历吗？我真的不知道它需要什么，所以任何反馈将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:02:37.250

## 初始步骤

我想我们应该首先在 Matlab 中获得您要建模的函数的表示。您的公式的直接翻译如下所示：

```
function y = targetfunction(A,V,P,bc,b)
    y = (A/2) * (1 - V * sin((b-bc) / P));
end 
```

## 掌握数据

我的下一步将是生成一些可以使用的数据（您自然会使用自己的数据）。所以这是一个生成一些嘈杂数据的函数。请注意，我已经为参数提供了一些值。

```
function [y b] = generateData(npoints,noise)

    A  = 2;
    V  = 1;
    P  = 0.7;
    bc = 0;

    b = 2 * pi * rand(npoints,1);

    y = targetfunction(A,V,P,bc,b) + noise * randn(npoints,1);

end 
```

该函数`rand`在区间上生成随机点`[0,1]`，我将它们乘以`2*pi`在区间上随机获得点`[0, 2*pi]`。然后我在这些点应用了目标函数，并添加了一些噪声（该函数`randn`生成正态分布的随机变量）。

## 拟合参数

最复杂的函数是将模型拟合到您的数据的函数。为此，我使用了函数`fminunc`，它可以进行无约束的最小化。例程如下所示：

```
function [A V P bc] = bestfit(y,b)

    x0(1) = 1;   %# A
    x0(2) = 1;   %# V
    x0(3) = 0.5; %# P
    x0(4) = 0;   %# bc

    f = @(x) norm(y - targetfunction(x(1),x(2),x(3),x(4),b));

    x = fminunc(f,x0);

    A  = x(1);
    V  = x(2);
    P  = x(3);
    bc = x(4);

end 
```

让我们逐行浏览。首先，我定义`f`要最小化的函数。这不是太难。为了在 Matlab 中最小化一个函数，它需要将单个向量作为参数。因此，我们必须将我们的四个参数打包到一个向量中，我在前四行中这样做了。我使用的值与我用来生成数据的值很接近，但并不相同。

然后我定义我想要最小化的函数。它需要一个参数`x`，将其解包并提供给`targetfunction`，以及`b`我们数据集中的点。希望这些接近`y`。`y`我们通过减去`y`和应用函数来测量它们的距离，该函数`norm`对每个分量求平方，将它们相加并取平方根（即它计算均方根误差）。

然后我调用`fminunc`我们的函数以最小化，并对参数进行初始猜测。这使用一个内部例程来为每个参数找到最接近的匹配项，并将它们返回到向量中`x`。

最后，我从 vector 中解压参数`x`。

## 把它们放在一起

我们现在拥有了我们需要的所有组件，所以我们只需要一个最终函数将它们联系在一起。这里是：

```
function master

    %# Generate some data (you should read in your own data here)
    [f b] = generateData(1000,1);

    %# Find the best fitting parameters
    [A V P bc] = bestfit(f,b);

    %# Print them to the screen
    fprintf('A = %f\n',A)
    fprintf('V = %f\n',V)
    fprintf('P = %f\n',P)
    fprintf('bc = %f\n',bc)

    %# Make plots of the data and the function we have fitted
    plot(b,f,'.');
    hold on
    plot(sort(b),targetfunction(A,V,P,bc,sort(b)),'r','LineWidth',2)

end 
```

如果我运行这个函数，我会看到它被打印到屏幕上：

```
>> master

Local minimum found.

Optimization completed because the size of the gradient is less than
the default value of the function tolerance.

A = 1.991727
V = 0.979819
P = 0.695265
bc = 0.067431 
```

并出现以下情节：

![在此处输入图像描述](../Images/c4766947dcf41c31078bd8882321d89a.png)

这种合身对我来说已经足够好了。如果您对我在这里所做的任何事情有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:41:13.767

当你提到 f(a) 并且你的函数不包含 a 时，我有点惊讶，但一般来说，假设你想绘制 f(x) = cos(x)^2

首先确定要绘制的 x 值，例如

```
xmin = 0;
stepsize = 1/100;
xmax = 6.5;
x = xmin:stepsize:xmax;
y = cos(x).^2;
plot(x,y) 
```

但是，请注意，这种方法在 excel 中同样有效，您只需做一些工作即可在正确的单元格中获取 x 值和函数。

# php - magento 如何以最低的价格列出浏览次数最多的产品

> ID：13199108
> 
> 赞同：1
> 
> 时间：2012-11-02T16:15:22.337
> 
> 标签：php, magento

您好我想知道如何编写 php 语句来执行一些 sql 查询。

例如：（列出所有价格最低的产品）

```
$collection1 = Mage::getModel('catalog/product')->getCollection();
$collection1
->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
->addAttributeToFilter('attribute_set_id', 4)
->setOrder('created_at', 'desc')
->addMinimalPrice()
->addFinalPrice()
->addTaxPercents(); 
```

sql查询是这样的：

```
SELECT `e`.*, `price_index`.`price`, `price_index`.`tax_class_id`, `price_index`.`final_price`,
IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, `price_index`.`max_price`,
`price_index`.`tier_price` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_product_index_price` AS
`price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND
price_index.customer_group_id = 0 WHERE (`e`.`attribute_set_id` = '4') ORDER BY `e`.`created_at` desc 
```

但我知道以下 php 语句可以列出查看次数最多的产品：

```
$collection2 = Mage::getResourceModel('reports/product_collection');
$collection2->addViewsCount(); 
```

然后，sql查询是这样的：

```
SELECT COUNT(report_table_views.event_id) AS `views`, `e`.* FROM `report_event` AS `report_table_views`
INNER JOIN `catalog_product_entity` AS `e` ON e.entity_id = report_table_views.object_id AND e.entity_type_id = 4
WHERE (report_table_views.event_type_id = 1) GROUP BY `e`.`entity_id` HAVING 
(COUNT(report_table_views.event_id) > 0) ORDER BY `views` DESC 
```

我正在考虑如何编写用于组合上述两个 sql 查询的 php 语句，我想显示以下 sql 查询的结果。

```
SELECT COUNT(report_table_views.event_id) AS `views`, `e`.*, `price_index`.`price`, `price_index`.`tax_class_id`,
`price_index`.`final_price`, IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price,
price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, 
`price_index`.`max_price`, `price_index`.`tier_price` FROM `report_event` AS `report_table_views` INNER JOIN 
`catalog_product_entity` AS `e` ON e.entity_id = report_table_views.object_id AND e.entity_type_id = 4  INNER JOIN
`catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = 
'1' AND price_index.customer_group_id = 0 WHERE (report_table_views.event_type_id = 1 AND `e`.`attribute_set_id` =
'4') GROUP BY `e`.`entity_id` HAVING (COUNT(report_table_views.event_id) > 0) ORDER BY `views` DESC 
```

我以为我可以编写以下 php 语句，但它不起作用，也许 addViewsCount() 是覆盖整个 sql 语句。

```
$collection3 = Mage::getResourceModel('reports/product_collection');

$collection3
->addAttributeToSelect('*')
->addAttributeToFilter('attribute_set_id', 4)
->addOrderedQty()
->addMinimalPrice()
->addFinalPrice()
->addTaxPercents()
->addViewsCount(); 
```

现在，谁能知道如何编写 php 语句以列出以最低价格查看最多的产品，请原谅我有一个麻烦的要求，即所有产品实体的属性集 id 必须为 4。我知道这个问题非常具有挑战性，因为我不知道从谷歌搜索此类信息。请大家看问题。感谢您的每一次努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T16:44:51.917

尝试类似的东西

```
$productCount = 5;

//Get Store ID

$storeId = Mage::app()->getStore()->getId();      

// Get most viewed product collection

$products = Mage::getResourceModel('reports/product_collection')
    ->addAttributeToSelect('*')     
    ->setStoreId($storeId)
    ->addStoreFilter($storeId)
    ->addAttributeToSelect(array('name', 'price', 'minimal_price', 'small_image')) 
    ->addViewsCount()
    ->setPageSize($productCount);

Mage::getSingleton('catalog/product_status')
        ->addVisibleFilterToCollection($products);
Mage::getSingleton('catalog/product_visibility')
        ->addVisibleInCatalogFilterToCollection($products);

print_r($products->getData()); 
```

阅读更多：

*   [http://www.magentocommerce.com/boards/viewthread/14764/P15/](http://www.magentocommerce.com/boards/viewthread/14764/P15/)

*   [http://blog.chapagain.com.np/magento-how-to-get-most-viewed-products/](http://blog.chapagain.com.np/magento-how-to-get-most-viewed-products/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T06:09:47.370

```
<?php $productCount = 5;
 $storeId = Mage::app()->getStore()->getId(); 
$products = Mage::getResourceModel('reports/product_collection') ->addAttributeToSelect('*') ->setStoreId($storeId) ->addStoreFilter($storeId) ->addViewsCount() ->setPageSize($productCount); Mage::getSingleton('catalog/product_status') ->addVisibleFilterToCollection($products); 
Mage::getSingleton('catalog/product_visibility') ->addVisibleInCatalogFilterToCollection($products);
 print"<pre>";
 print_r($products); ?> 
```

# c# - 我可以从文化代码中获取文本方向吗？

> ID：13199110
> 
> 赞同：6
> 
> 时间：2012-11-02T16:15:29.840
> 
> 标签：c#, cultureinfo, culture, hebrew, right-to-left

如果我有国家/语言组合的文化代码，是否可以从中找到文本方向。

例如，对于 en-US，我如何从中得到文本方向是从左到右的？反过来从 ar-EG，我怎么知道文本方向是从右到左？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T10:35:30.367

这可以使用以下`TextInfo.IsRightToLeft`属性轻松完成`CultureInfo`

例子：

```
CultureInfo.GetCultureInfo("ar-EG").TextInfo.IsRightToLeft; // Return True
CultureInfo.GetCultureInfo("en-us").TextInfo.IsRightToLeft; // Return False
CultureInfo.GetCultureInfo("he-il").TextInfo.IsRightToLeft; // Return True 
```

# windows-xp - 在新的 System XP 中恢复批处理文件、VB 脚本快捷方式

> ID：13199112
> 
> 赞同：0
> 
> 时间：2012-11-02T16:15:32.153
> 
> 标签：windows-xp, registry

在我的旧系统 (XP) 中，我在桌面上的一个文件夹中创建了许多快捷方式来打开 eclipse、notepad++ 等程序和一些脚本文件。我为 Eclipse分配了诸如`Cnrl`++之类的快捷方式 ，为记事本分配了`Alt`++等。`E``Cnrl``Alt``N`

我已将桌面上的快捷方式文件夹和批处理/脚本文件夹备份并恢复到我的新系统中的同一路径中。

是否有任何脚本可以一次性注册所有注册表快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:21:52.573

热键是文件的功能。

XP 在 4 个地方寻找热键：

```
%UserProfile%\desktop
%AllUsersProfile%\desktop
%UserProfile%\Start Menu
%AllUsersProfile%\Start Menu 
```

在这三种文件类型中：

```
*.lnk
*.pif
*.url 
```

只要文件在这些位置，热键应该仍然有效

此 vbs 脚本将显示分配给文件的热键：

```
on error resume next
set WshShell = WScript.CreateObject("WScript.Shell" )
Set Arg=Wscript.Arguments
set lnk = WshShell.CreateShortcut(Arg)
If lnk.hotkey <> "" then
msgbox Arg & vbcrlf & lnk.hotkey
End If 
```

将它与传递给脚本的文件名一起使用，例如`thescript.vbs %UserProfile%\desktop\myshortcut.lnk`

# java - Android：AlarmManager 有时不调用 BroadcastReceiver

> ID：13199115
> 
> 赞同：1
> 
> 时间：2012-11-02T16:15:40.717
> 
> 标签：java, android, broadcastreceiver, alarmmanager, commonsware-cwac

在我的应用程序中，我有一个`BroadcastReceiver`，它由一个`AlarmManager`. 这`BroadcastReceiver`称为 CommonsWare 的`WakefulIntentservice`.

我在手机上对此进行了测试，有时似乎`BroadcastReceiver`根本没有打电话给我。我真的很困惑它可能是什么。我的 BroadcastReceiver 和 WakefulIntentservice 已在清单中注册。

这是我的代码： 在 AlarmActivity 中：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 2);

Intent intent = new Intent(this, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), savedIntervalAutomaticMilisInt, pendingIntent);

Toast.makeText(this, "Saved", Toast.LENGTH_LONG).show();

finish(); 
```

报警接收器：

```
package com.something.app;

import com.commonsware.cwac.wakeful.WakefulIntentService;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Intent i = new Intent(context, AlarmService.class);
        WakefulIntentService.sendWakefulWork(context, i);
    }
} 
```

和警报服务：

```
package com.something.app;

import android.app.PendingIntent;
import android.content.Intent;
import com.commonsware.cwac.wakeful.WakefulIntentService;

public class AlarmService extends WakefulIntentService {

    public AlarmService() {
        super("AlarmService");
    }

    @Override
    protected void doWakefulWork(Intent arg0) {
        //A looooooooot of stuff
    } 
```

有谁知道为什么`BroadcastReceiver`有时不调用？

编辑：我听说设置 a `BroadcastReceiver`which receive `onBootCompleted`. 这是必需的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:47:10.423

所以，这就是问题所在：如果设备重新启动，它有时会清除警报，因此您必须在`BroadcastReceiver`接收`onBootCompleted`

# asp.net - Internet Explorer 将我的代码放在不需要的 div 中

> ID：13199116
> 
> 赞同：0
> 
> 时间：2012-11-02T16:15:42.167
> 
> 标签：asp.net, css, internet-explorer-9

愚蠢的 IE9 搞砸了我的 aspx 页面布局。在 chrome 中它看起来很完美： ![在此处输入图像描述](../Images/c0ac9fabdc17572534b07c8ff5493ec7.png)

但是在 EI9 中，它弄乱了我的布局，使它看起来像这样： ![在此处输入图像描述](../Images/a518e366d6c74e5b14ee180ff3f86d5e.png)

我已经弄清楚为什么它看起来像它的样子。显然 IE9 将我的“保存注释”按钮、描述标签和描述文本框封装在一个 div 中并使其浮动。而主内容持有人显示双重的原因是因为IE复制了它，但在复制的内容持有人中，它没有控件或任何东西。只是背景颜色。

这是它生成的html：

```
 <div class="mainContentHolder">
    <span style="display: none;">
        <label>File</label>
        <label style="width: auto;" id="lblCaseFileID">2011630988 - </label>
    </span>
    <h3 id="quickNoteHeader">Quick Note: 2011630988 / 10/04/2012 08:47:12 <div style="float: right;">USES CURRENT DATE AND TIME<div></div></div></h3><div style="float: right;"><div>

    <span>
        <label class="inlineLbl">Description</label>
        <input style="width: 82%;" id="txtDescription" name="txtDescription" type="text">
        <span style="color: red; display: none;" id="ctl02" class="validation" title="Description is required">*</span>
        <input style="width: 75px;" id="saveNote" onclick="saveNewQuickNote()" name="saveNote" value="Save Note" type="button">
    </span>
    </div>
    <input id="hidCaseFileID" name="hidCaseFileID" value="2011630988" type="hidden">
    <input id="hidInvestigatorLoggedOnID" name="hidInvestigatorLoggedOnID" value="25" type="hidden">
</div>

<div class="mainContentHolder">
<div style="float: right;">
</div> 
```

这是我的 .aspx 页面：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        </head>
    <body>
    <form id="form1" runat="server">
    <div class="mainContentHolder">
    <span style="display:none;">
        <label>File</label>
        <label style="width:auto;" runat="server" id="lblCaseFileID"></label>
    </span>
    <h3 runat="server" id="quickNoteHeader">Quick Note</h3>
    <span>
        <label class="inlineLbl">Description</label>
        <input type="text" style="width:82%;" id="txtDescription" runat="server" />
        <asp:RequiredFieldValidator class="validation" ErrorMessage="*" Display="Dynamic" ControlToValidate="txtDescription" ToolTip="Description is required" runat="server" />
        <input type="button" ID="saveNote" style="width:75px;" Value="Save Note" runat="server" onclick="saveNewQuickNote()" />
    </span>
    </div>
    <asp:HiddenField ID="hidCaseFileID" runat="server" />
    <asp:HiddenField ID="hidInvestigatorLoggedOnID" runat="server" />
    </form>
</body> 
```

有什么建议么？我不知道为什么 IE 这样做或如何防止它/修复它编辑：css：`.mainContentHolder { margin: 0px; background-color: #f3f3f3; border: solid 1px #a1a1a1; min-width:890px; width:920px; height:50px; } .mainContentHolder h3 { font-size:13px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 20px; margin-right: 1%; } .mainContentHolder label { font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 20px; margin-bottom: 10px; margin-right: 1%; } .mainContentHolder input { width:70px; } .ui-dialog { font-size:12px; } .ui-widget-header { background: #8D122B; } .ui-datepicker { font-size:12px; } #quickNoteHeader { color: Green; }`

编辑 - 似乎布局在 IE 10 中确实有效。但不是 IE9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:41:58.273

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
    <html xmlns="http://www.w3.org/1999/xhtml">
</head> 
```

不是有效的 HTML。

你要：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  </head> 
```

并且不要忘记结束`</html>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:06:39.007

更正您的文档类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  </head> 
```

并设置显示块和宽度 100% 的跨度

```
<span style="display:block;width:100%;">
        <label class="inlineLbl">Description</label>
        <input type="text" style="width:82%;" id="txtDescription" runat="server" />
        <asp:RequiredFieldValidator class="validation" ErrorMessage="*" Display="Dynamic" ControlToValidate="txtDescription" ToolTip="Description is required" runat="server" />
        <input type="button" ID="saveNote" style="width:75px;" Value="Save Note" runat="server" onclick="saveNewQuickNote()" />
    </span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:34:18.087

亲爱的约翰，当我把这段代码放在我的本地网站上时，它的工作......

![在此处输入图像描述](../Images/0a47458a0f93a4003f8f1bc3312868aa.png)

我认为另一个CSS是冲突的..

# python - 正则表达式行以字符集开头

> ID：13199118
> 
> 赞同：21
> 
> 时间：2012-11-02T16:15:44.240
> 
> 标签：python, regex

假设我想搜索出现在行首或后跟“a”的“b”。

为什么不`re.match('[\^a]b','b')`匹配，而匹配`re.match('^b','b')`？

**更新：**我意识到我应该使用`search`而不是`match`. 我希望它对“b”、“cab”、“ab”、“bc”和“abd”之类的东西是积极的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-02T16:24:02.817

正则表达式`[\^a]b`将匹配`ab`or `^b`，因此它不应匹配字符串`'b'`。

请注意，`re.match()`仅匹配字符串的开头，就好像您在正则表达式的开头有一个字符串锚的开头（`^`或`\A`启用了多行选项）。

因此，“要搜索出现在行首或后跟 'a' 的 'b'”，您需要使用`re.search()`以下正则表达式：

```
(^|a)b 
```

请注意，我对此的解释与其他答案略有不同，我*认为*您的要求意味着您要匹配 'b' in`'bob'`以及`ab`in `'taboo'`，因此行首要求仅适用于 a 之前`b`没有`a`.

组中的这种交替方法为您提供了比 更具可扩展性的解决方案`^b|ab`，因此要匹配`b`字符串的开头或前面的`a`, `x`, `2`，或者`5`您可以使用以下内容：

```
(^|[ax25])b 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-02T16:19:35.683

你的第一个正则表达式真的意味着：

```
[\^a]b   # match a literal '^' or 'a', followed by a 'b' 
```

你的第二个正则表达式：

```
^b       # match start of line followed by a 'b' 
```

您真正想要的第一个正则表达式是：

```
^b|ab    # match start of line followed by a 'b', 
         # OR 
         # an 'a' followed by a 'b' 
```

另请注意`re.match()`，自动尝试从开头开始查找匹配项，`re.search()`如果要查找出现在字符串中间的字符串，则要使用该匹配项。

> 假设我要搜索行开头或“a”，或“x”，或“2”或“5”，后跟“b”。我不能`[^ax25]b`代替`^b|ab|xb|2b|5b`吗？

在这种情况下，我会这样做：

```
(^|[ax25])b 
```

字符类只能包含*字符*。插入符号 ( `^`) 的特殊含义是作为匹配字符串开头的零宽度断言，当它位于字符类中时：它可以否定整个字符类，如果它的第一个字符或意味着文字插入符号 ( `^`)，如果它被转义或放置在其他地方。

# opengl - 给定旋转后的法向量，求平面的 OpenGL 旋转矩阵

> ID：13199126
> 
> 赞同：11
> 
> 时间：2012-11-02T16:15:54.997
> 
> 标签：opengl, matrix, rotation, plane

给定新的法向量，有没有办法获得将平面旋转到新方向的矩阵

下图描述了所描述的内容

![在此处输入图像描述](../Images/945ed5c5c104b9e1693ae4866900a154.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T16:25:03.817

鉴于旧法线`N`和新法线`N'`，您可以通过以下方式获得旋转：

```
RotationAxis = cross(N, N')
RotationAngle = arccos(dot(N, N') / (|N| * |N'|)) 
```

在哪里

*   `cross(x, y)`是向量的叉积`x`和`y`
*   `dot(x, y)`是向量的点积`x`和`y`
*   `|x|`是向量的长度`x`

这将以尽可能短的方式将旧法线旋转到新法线上。

**笔记**

*   `RotationAngle`将以弧度表示（如果 arccos 像在大多数实现中那样返回弧度）
*   `arccos`是余弦函数的倒数。这是必要的，因为向量之间的角度在`dot(N, N') = |N| * |N'| * cos(RotationAngle)`哪里。`RotationAngle`
*   `RotationAxis`未标准化
*   如果两个法线都归一化，则除以`(|N| * |N'|)`变得不必要（实际上，如果`N`归一化，您可以忽略`|N|`产品，如果`N'`归一化则忽略`|N'|`）
*   如果`N' = -N`（因为有无限多的最短路径），此方法将失败

**它是如何工作的？**

第一个观察结果是两个法线将始终定义（至少）一个平面，两者都位于其中。将它们分开的最小角度也将在该平面内测量。

所以`RotationAxis`向量将是包含两者的平面的法线，`N`并且`N'`是`RotationAngle`前面提到的两者之间的最小角度。

因此，通过`RotationAxis`旧`RotationAngle`法线`N`的旋转，在平面内以最短的路径旋转`N'`。

# android - 在同一个“共享”进程中调用服务的方法而不使用 AIDL

> ID：13199127
> 
> 赞同：1
> 
> 时间：2012-11-02T16:16:00.950
> 
> 标签：android, service, android-activity, ipc, aidl

我正在尝试从活动绑定服务并获得调用它的方法的可能性。它们在不同的应用程序 (apk) 中，但使用相同的 sharedUserId 和进程。

由于他们使用相同的流程，我是否必须使用 AIDL 或者我可以使用经典的 IBinder，例如本地服务（在[Android 开发人员示例](http://developer.android.com/guide/components/bound-services.html)中描述）？

我都试过了。AIDL 工作正常，本地服务的方法不起作用，我有一个 ClassCastException ：

```
E/AndroidRuntime(17511): java.lang.ClassCastException: com.example.app.MyService$LocalBinder cannot be cast to com.example.app.MyService$LocalBinder 
```

是否可以使用这种方法在一个共同的“共享”进程中使用两个应用程序调用服务？还是说这个共享进程的使用还是需要像AIDL这样的IPC方式？

如果我想使用经典的 IBinder，这是为了让我的应用程序尽可能简单。

希望你能帮助我，并为我糟糕的英语感到抱歉；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-09T23:27:21.760

您的问题是每个应用程序都有自己的 APK，其中包含自己的 CLASSES.DEX，并且它们之间不共享类和接口。`App1.apk/com.example.Class1`被视为与 不同的类型`App2.apk/com.example.Class1`。它们是否相同并不重要。

有几种方法可以解决这个问题：

1) 如您所见，您可以使用 AIDL。这是效率最低的机制，并且显然将您限制为仅与 AIDL 兼容的类型。

2）您可以使用Java反射API。这在效率方面比 AIDL 好，但语法当然不是那么好。

3）您可以尝试使用自定义类加载以某种方式对其进行修改，以便两个应用程序都可以访问相同的类型。对于您正在尝试做的事情，这将比它的价值更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:23:41.413

我想问题如下。即使您使用 sharedUserId 并且您的应用程序在同一进程中运行，您也无法在本地调用服务的方法，因为您的服务和应用程序位于不同的包中。因此，您只能使用将在您的客户端应用程序中创建代理的 AIDL。

# android - 切换按钮的背景不起作用

> ID：13199132
> 
> 赞同：1
> 
> 时间：2012-11-02T16:16:09.393
> 
> 标签：android, button

我创建了一个应用程序，假设每次单击时都会切换按钮背景颜色。这是代码：

```
package com.example.flash.light;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button screen = (Button) findViewById(R.id.screen);
        Drawable background = getResources().getDrawable(R.drawable.black);
        screen.setBackgroundDrawable(background);

        screen.setOnClickListener(new Button.OnClickListener(){ 
            public void onClick(View v) { 
                Button screen = (Button) findViewById (R.id.screen);
                Drawable background = screen.getResources().getDrawable(screen.getId());
                if(background == getResources().getDrawable(R.drawable.black)){
                    Drawable newBackgroun = getResources().getDrawable(R.drawable.white);
                    screen.setBackgroundDrawable(background);
                }
                if(background == getResources().getDrawable(R.drawable.white)){
                    Drawable newBackgroun = getResources().getDrawable(R.drawable.black);
                    screen.setBackgroundDrawable(background);
                }
            } 
        }); 
    } 
```

点击按钮没有反应。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:24:35.047

我相信这里的问题是您返回的资源

```
getResources().getDrawable(int id) 
```

每次调用都不一样。Android 只是构建可绘制类的新实例，而不是返回旧实例。（至少我相信在这种情况下没有缓存）

用 == 运算符比较三个不同的实例永远不会返回 true。

第二件事是代码中的一个明显错误：

```
 Button screen = (Button) findViewById (R.id.screen);
            Drawable background = screen.getResources().getDrawable(screen.getId());
            if(background == getResources().getDrawable(R.drawable.black)){
                Drawable newBackgroun = getResources().getDrawable(R.drawable.white);
                screen.setBackgroundDrawable(**newBackground**);
            }
            if(background == getResources().getDrawable(R.drawable.white)){
                Drawable newBackgroun = getResources().getDrawable(R.drawable.black);
                screen.setBackgroundDrawable(**newBackground**);
            } 
```

而不是背景，你应该有 newBackground 那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:54:28.017

尝试这个 ：

```
public class MainActivity extends Activity {

    private boolean isBlack = false;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        // your code

        final Button screen = (Button) findViewById (R.id.screen);
        isBlack = true;
        screen.setBackgroundColor(Color.BLACK);
        screen.setOnClickListener(new Button.OnClickListener(){ 
            public void onClick(View v) { 
                if (isBlack){ 
                    screen.setBackgroundColor(Color.WHITE);
                    isBlack = false;
                }
                else{
                    screen.setBackgroundColor(Color.BLACK);
                    isBlack = true;
                }
            }

        });
}
} 
```

# data-binding - 动态生成单选按钮的模型更新

> ID：13199141
> 
> 赞同：6
> 
> 时间：2012-11-02T16:17:13.527
> 
> 标签：data-binding, radio-button, angularjs

请有人可以帮我解决这个小小的绑定混乱。我正在尝试生成任务列表

这是我的 TaskController 中的模型定义：

```
angular.module('yeomantestApp')
  .controller 'TaskController', ($scope) ->
    $scope.currentTask
    $scope.tasks = [
        {
            id: 1
            name: 'write test'
            elapsedTime: 15
        },
        {
            id: 2
            name: 'run test'
            elapsedTime: 32
        },
        {
            id: 3
            name: 'write code'
            elapsedTime: 22
        }
    ] 
```

所以，现在我想用下面的视图来渲染模型。该视图遍历任务数组并为每个任务构建一个单选按钮列表。我的问题是，绑定到 currentTask 的模型无法正常工作。当我选择任何任务时， currentTask 模型条目不会更新。但根据教程和文档，它应该。

```
<div class="hero-unit" ng-controller="TaskController">
    <h1>Tasks</h1>
    <h2>current {{currentTask}}</h2>
    <form name="taskForm">
        <div ng-repeat="task in tasks">
            <input type="radio" name="taskGroup" ng-model="currentTask" value="{{task.id}}">{{task.name}} {{task.elapsedTime}}
        </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T16:32:37.757

`ng-model`将属性更改为`ng-model="$parent.currentTask"`应该可以解决您的问题。

这是 jsFiddle：http: [//jsfiddle.net/dp3xq/8/](http://jsfiddle.net/dp3xq/8/)

# excel - 将行从一个表复制到另一个表而不创建重复项

> ID：13199145
> 
> 赞同：2
> 
> 时间：2012-11-02T16:17:27.817
> 
> 标签：excel, vba

我有一个 Excel 工作簿，其中有一个主工作表来跟踪项目及其当前位置，另一个工作表跟踪过去位置或项目所在的位置。目前，当主表中的记录发生更改时，该行被手动复制并粘贴到第二张表中。我想创建一个宏来查找主表中不在第二张表中的项目，并在记录更改时将它们复制到第二张表中。

下面是我找到并修改的一个示例宏，它很接近，但它复制和粘贴*所有*行而不是新行或不同行。这些行只需要在 A、B 和 D 列上进行比较。

```
Public Sub Sample()
Dim shM As Worksheet, sh2 As Worksheet
Dim shMData As Variant
Dim sh2DataA As Variant
Dim sh2Data As Variant
Dim iM As Long, os2 As Long, i2 As Variant
Dim DoSearch As Boolean

Set shM = Sheets(1)
Set sh2 = Sheets(2)

With shM
    shMData = .Range(.[A1], .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 4)
End With

DoSearch = False
For iM = 2 To UBound(shMData, 1)
    With sh2
        sh2DataA = .Range(.[A1], .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 1)
        sh2Data = .Range(.[A1], .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 4)
    End With
    os2 = 0
    Do
        If UBound(shMData, 1) > 1 Then
            i2 = Application.Match(shMData(iM, 1), sh2DataA, 0)

        Else
            If shMData(iM, 1) = sh2DataA Then
                i2 = 1
            Else
                i2 = CVErr(xlErrNA)
            End If

        End If

        If Not IsError(i2) Then

                If (shMData(iM, 2) = sh2Data(i2, 2)) And (shMData(iM, 4) = sh2Data(i2, 4)) Then
                MsgBox "Match found Master = " & iM & ", sheet2 = " & i2 + os2

                Else

                    shM.Activate
                    shM.Range(Cells(iM, 1), Cells(iM, 7)).Select
                    Selection.Copy

                    sh2.Select
                    FinalRow = Range("A65536").End(xlUp).Row
                    NextRow = Range("A65536").End(xlUp).Row + 1
                    Range("A" & NextRow).Select
                    ActiveSheet.Paste

                End If

            os2 = os2 + i2
            If os2 < UBound(sh2Data, 1) Then
                With sh2
                    sh2DataA = .Range(.Cells(i2 + os2, 1), .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 1)
                    sh2Data = .Range(.Cells(i2 + os2, 1), .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 4)
                End With
                DoSearch = True

            Else
                DoSearch = False
            End If

        Else
            shM.Activate
            shM.Range(Cells(iM, 1), Cells(iM, 7)).Select
            Selection.Copy

            sh2.Select
            FinalRow = Range("A65536").End(xlUp).Row
            NextRow = Range("A65536").End(xlUp).Row + 1
            Range("A" & NextRow).Select
            ActiveSheet.Paste

            DoSearch = False
        End If
    Loop Until Not DoSearch
Next
End Sub 
```

添加消息框只是为了验证代码是否正常工作 - 它不是必需的组件。再次感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:12:52.450

谢谢大家的帮助，我找到了一个解决方案，但它在 Excel 2003 中不起作用。如果有人知道他们的头脑为什么会很好，否则我想我想明白了。这是代码。

[HTML]Public Sub NewEntWhole() Dim loM As ListObject, lo2 As ListObject Dim TblMData As Variant Dim iM As Long Dim dDate As Date Dim strDate As String Dim lDate As Long Dim rng As Range Dim ct As Variant Dim shM As Worksheet Dim sh2作为工作表将 hdM 调暗为整数

```
hdM = 0 'rows above table M
Set shM = Sheets(1)
Set sh2 = Sheets(2)
Set loM = Sheets(1).ListObjects(1)
Set lo2 = Sheets(2).ListObjects(1)

With loM
    TblMData = .DataBodyRange
End With

For iM = 2 To UBound(TblMData, 1) + 1
    sh2.Activate

    With lo2
        .Range.AutoFilter Field:=1, Criteria1:=loM.Range(iM, 1).Value
        .Range.AutoFilter Field:=2, Criteria1:=loM.Range(iM, 2).Value

        If IsDate(loM.Range(iM, 4)) Then
            sDate = loM.Range(iM, 4)
            dDate = DateSerial(Year(sDate), Month(sDate), Day(sDate))
            lDate = dDate
            .Range.AutoFilter Field:=4, Criteria1:=">=" & lDate, Operator:=xlAnd, Criteria2:="<" & lDate + 1
        Else
            .Range.AutoFilter Field:=4, Criteria1:=loM.Range(iM, 4).Value
        End If

    End With

   Set rng = lo2.AutoFilter.Range

    ct = rng.Columns(1).SpecialCells(xlCellTypeVisible).Count - 1

    If ct = 0 And loM.Range(iM, 1).Value > 0 Then

        shM.Activate
        shM.Range(Cells((iM + hdM), 1), Cells((iM + hdM), 7)).Copy

        sh2.Activate
        FinalRow = Range("B65536").End(xlUp).Row
        NextRow = Range("B65536").End(xlUp).Row + 1
        Range("A" & NextRow).Select
        ActiveSheet.Paste

    End If

    With lo2
        .Range.AutoFilter Field:=1
        .Range.AutoFilter Field:=2
        .Range.AutoFilter Field:=4
    End With
Next
shM.Activate 
```

结束子[/HTML]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:27:21.873

假设您从未在主列表中获得两行完全相同的内容，您可以使用内置的 Excel 功能删除重复项（至少在 2010 年的“数据”选项卡上）。如果你有 x 个重复的行，同样的，其中 x-1 个被删除。因此，您可以复制整个其他表，将其粘贴到主列表下方，然后在主列表上运行删除重复项。您只需要知道用于删除重复项的 VBA。

```
 ActiveSheet.Range("$A$40:$D$43").RemoveDuplicates Columns:=Array(1, 3, 4), Header:=xlNo 
```

根据需要进行调整

# vb.net - ftp连接并上传如果有异常连接会发生什么

> ID：13199151
> 
> 赞同：0
> 
> 时间：2012-11-02T16:17:48.303
> 
> 标签：vb.net

下面是如何使用 ftp 上传文件的代码。我的问题是如果try中出现异常会发生什么，ftp连接会在catch中自动关闭吗？使用“使用”更好吗？

谢谢你

```
Try
  'connect to ftp server
  Dim ftp As New FTPConnection
  ftp.ServerAddress = "ftp.example.com"
  ftp.UserName = "example_user"
  ftp.Password = "example_pass"
  ftp.Connect()
  ftp.TransferType = FTPTransferType.BINARY

  'upload a file
  ftp.UploadFile("s:\test.txt", "test.txt")

  'close the connection
  ftp.Close()

Catch ex As Exception
  MessageBox.Show(ex.Message.ToString())
End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:20:24.470

不，如果在执行完成之前发生异常，它不会关闭`ftp.Close()`。您应该使用一个`Finally`块来确保它`ftp`始终处于关闭状态，即使发生异常也是如此。这意味着您应该`ftp`在比 try 块中更高的范围级别进行定义，以便在 finally 块中可以访问它。从技术上讲，您可以`Close`从 catch 块中调用，但 A) 不会涵盖两种/所有情况，并且 B) 如果 catch 中的代码抛出另一个异常，则可能无论如何都无法工作。

```
Dim ftp As New FTPConnection
Try

Catch ex As Exception
  MessageBox.Show(ex.Message.ToString())
Finally      
  ftp.Close()
End Try 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:20:47.913

当异常发生时（不管它是什么），控制流会跳过一切，直到它到达 Catch 指令。

因此，在这种情况下，如果 UploadFile 中有异常，您将不会关闭连接。

如果 FTPConnection 类是 IDisposable，那么最好的选择是使用 using 关键字。否则，如格兰特所说，使用 Catch 之后的 finally 语句。

# signalr - 如何使用 SignalR 从服务器调用客户端？

> ID：13199152
> 
> 赞同：1
> 
> 时间：2012-11-02T16:17:55.970
> 
> 标签：signalr

我正在关注[“从集线器外部通过集线器广播”](https://github.com/SignalR/SignalR/wiki/Hubs)，但我的客户端浏览器没有收到任何消息。也没有错误。就好像 signalR 在拉取 hubContext 并发送消息时不知道我的浏览器一样。

但是，当从客户端调用到集线器时，我的集线器确实按预期运行。

我的枢纽：

```
[HubName("myHub")]
public class MyHub : Hub
{        
    public void SaySomething(string message)
    {
        Clients.say(message);
    }

    public void SayHelloWorld()
    {
        Clients.say("hello world");
    }

} 
```

服务器中其他地点和时间的代码：

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
context.Clients.say(message); 
```

还有我的客户端脚本：

```
<script src="Scripts/jquery.signalR-0.5.3.js" type="text/javascript" > </script>
<script src="signalr/hubs"> </script>   

<script type="text/javascript">
    var hub = $.connection.myHub;

    $.extend(hub, {
        Say: function(message) {
            alert(message); //this only works when the sayHelloWorld() method is executed
        }
    });

    $.connection.hub.start()
        .done(function(){
            hub.sayHelloWorld(); //this works
        });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:27:40.487

如果您使用的是最新的 nuget 包（v 1.0.1），请尝试：

```
$.extend(hub.client, {
        say: function(message) {
            alert(message); //this only works when the sayHelloWorld() method is executed
        } 
```

和：

```
$.connection.hub.start()
        .done(function(){
            hub.server.sayHelloWorld(); //this works
        }); 
```

SignalR 为集线器定义了客户端和服务器属性，我正在尝试视频中的 MoveShape 示例并遇到同样的问题。

希望能帮助到你，

# drop-down-menu - 集会：如何在我更改另一个下拉菜单后自动更新下拉菜单？

> ID：13199157
> 
> 赞同：1
> 
> 时间：2012-11-02T16:18:05.420
> 
> 标签：drop-down-menu, rally

我正在尝试设置两个下拉菜单。一个中的值取决于另一个的当前值。如何链接它们，当我在一个下拉菜单中更改所选值时，它会自动更新另一个下拉菜单？

谢谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html>
 <head>
<title>User Stories By Iteration</title>
 <meta name="Name" content="App Example: User Stories Table" />
 <script type="text/javascript" src="/apps/1.32/sdk.js"></script>
 <script type="text/javascript">

 var rallyDataSource;
 var relDropdown;
var table;
var relDropdown2;

function onReleaseSelected(releases, eventArgs) {
   var queryConfig = {
     type : 'testset',
     attribute : 'Name',
     query: '(Release.Name = "' + releases.getDisplayedValue() + '")'
  };
   relDropdown2 = new rally.sdk.ui.ObjectDropdown(queryConfig, rallyDataSource);
   relDropdown2.display(document.getElementById("releaseDiv2"));
 }

 function onLoad() {
   rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                                '__PROJECT_OID__',
                                '__PROJECT_SCOPING_UP__',
                                '__PROJECT_SCOPING_DOWN__');
  var relConfig = {};
   relDropdown = new rally.sdk.ui.ReleaseDropdown(relConfig, rallyDataSource);
   relDropdown.display(document.getElementById("releaseDiv"), onReleaseSelected);
 }

 rally.addOnLoad(onLoad);
  </script>

</head>
<body>
<div>
 <div id="releaseDiv"></div>
 <div id="releaseDiv2"></div>
 </div>
<br/><br/>
</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:43:25.960

SDK 1.x 下拉菜单在呈现后无法刷新其值。但是，您可以做的是销毁第二个下拉列表并重新创建它以响应第一个下拉列表的更改事件。

因此，在您的 onReleaseSelected 中，只需在创建和显示新代码之前添加以下代码：

```
if(relDropdown2) {
    relDropdown2.destroy();
} 
```

# email - 端口 25 / 26 使用 Telnet 显示“无法打开连接”

> ID：13199166
> 
> 赞同：0
> 
> 时间：2012-11-02T16:19:11.907
> 
> 标签：email, iis, smtp, localhost, telnet

我目前正在对我的服务器（IIS 7,5，Windows server 2008 R2）的电子邮件问题进行故障排除。当我运行“Telnet”命令时，我得到“正在连接到 127.0.0.1... 无法打开与主机的连接，在端口 25 上”。

我一直在运行命令：

*   “远程登录 127.0.0.1 25”
*   “远程登录 127.0.0.1 26”
*   “远程登录本地主机 25”
*   “远程登录本地主机 26”

所有这些都返回相同的消息。如果我在 80 端口运行，我会得到响应。

我试图关闭我的防火墙，它没有改变行为（仍然无法打开......）。

这是通常的行为吗？发送电子邮件应该仍然有效，还是有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:58:45.747

端口 25 用于 MTA（消息传输代理），它在电子邮件从发件人到收件人的过程中传递电子邮件。如果您没有安装并在本地运行，则该本地端口上没有任何监听。听起来就是这样。

*发送*电子邮件是一种传出连接（使用一些随机的本地端口），可以通过连接到可通过网络访问的任何机器上的 MTA 来完成；它不必在本地机器上使用一个。

# ms-access - 在 VBA 中导入 UTF-8 文件

> ID：13199168
> 
> 赞同：2
> 
> 时间：2012-11-02T16:19:14.573
> 
> 标签：ms-access, vba, ms-access-2007

我想在表中导入一个以管道分隔的文件，但该文件采用 UTF-8 格式，具有动态结构。

我曾尝试过使用 TranfertText 和 FSO，但只有 ADODB.Stream 似乎可以很好地处理这种编码，但它只能读取全文......

如何每行读取这样的文件行以在现有表中添加行？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:57:45.443

您可以使用其[ReadText](http://www.w3schools.com/ado/met_stream_readtext.asp)方法从 ADO 流中读取一行。

```
strLine = objStream.ReadText -2 ' adReadLine 
```

您可能需要先设置流的[LineSeparator](http://www.w3schools.com/ado/prop_stream_lineseparator.asp)属性。

阅读该行后，您可以拆分管道字符。

```
Split(strLine, "|") 
```

# ipython - 如何在 python 文本文件中写入 ipython 命令的输出？

> ID：13199170
> 
> 赞同：33
> 
> 时间：2012-11-02T16:19:25.240
> 
> 标签：ipython

我想将以下 ipython 命令的输出捕获到文件中：命令和输出区域如下：

```
`decoder.get_hyp()`

WARNING: "ngram_search.c", line 1000: </s> not found in last frame, using ++NOISE++ instead
INFO: ngram_search.c(1046): lattice start node <s>.0 end node ++NOISE++.171
INFO: ps_lattice.c(1225): Normalizer P(O) = alpha(++NOISE++:171:185) = -2003082
INFO: ps_lattice.c(1263): Joint P(O,S) = -2036704 P(S|O) = -33622
Out[7]: ('WELCOME TO MY TALK', '000000000', -36704586) 
```

我只想将“欢迎来到我的谈话”部分捕获到我的文件中。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-09-23T05:10:38.587

使用 IPython 魔术函数[`store`](http://ipython.org/ipython-doc/rel-0.12/config/extensions/storemagic.html)

```
%store foo >a.txt # Store (overwrite) value of foo to file a.txt

%store foo >>a.txt # Append value of foo to file a.txt 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-16T05:07:24.377

只需执行以下操作：

```
%save file_name.py _oh[7] 
```

PS：一些额外的有用命令：

```
%save file_name.py _ 
```

'_' 指的是先前的输出。

或者您可以：

```
%save file_name.py _oh[i] 
```

'i' 指的是输出历史编号，您可以通过以下方式首先查看输出：

```
_oh 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-26T12:31:27.093

如果您需要，单元格魔法会保存运行命令的 stdout/stderr输出[`%%capture`。](http://ipython.readthedocs.io/en/stable/interactive/magics.html#cellmagic-capture)这是使用语法：

```
%%capture [--no-stderr] [--no-stdout] [--no-display] [output] 
```

而且，这是一个使用示例：

```
In [1]: %%capture my_print_output
    ...: print('test')
    ...:

In [2]: my_print_output
Out[2]: <IPython.utils.capture.CapturedIO at 0x7f2efa2c12d0>

In [3]: test_output.show()
test 
```

输出对象是 的一个实例[`IPython.utils.capture.CapturedIO`](http://ipython.readthedocs.io/en/stable/api/generated/IPython.utils.capture.html#IPython.utils.capture.CapturedIO)，它有一个简洁的接口用于访问 stdout/stderr 或组合输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T23:30:49.833

IPython 捕获变量 _（下划线）中最后一个命令的值（输出）。

```
%edit some_variable 
```

将在您的编辑器中打开一个变量的值。

因此，“%edit _”应该使您能够编辑和保存最后一个命令的值。

请参阅[IPython 文档的历史记录部分](http://ipython.org/ipython-doc/rel-0.13.1/interactive/tutorial.html#history)

要了解 %edit 魔术函数的可能参数，请在 ipython 提示符下键入以下内容：

```
%edit? 
```

# android - Android：等待 super.onPause 直到按下按钮

> ID：13199171
> 
> 赞同：1
> 
> 时间：2012-11-02T16:19:27.273
> 
> 标签：android, save, wait, onpause

如果程序要关闭或处于暂停模式，我想保存程序。我用 name 创建了一个函数`save`。但现在我的问题是，我如何才能使用该`super.onPause()`方法等待`save`对话框中的按钮被按下？这是我的代码：

```
@Override 
    public void onPause()
    {

         AlertDialog.Builder builder2=new AlertDialog.Builder(rechner.this);
         builder2.setMessage("Möchten sie ihre Noten Speichern?");
         builder2.setPositiveButton("OK",new DialogInterface.OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int which) {
              save();
                 }
              });

            builder2.setNegativeButton("Nein Danke!", new DialogInterface.OnClickListener() {
            @Override
             public void onClick(DialogInterface dialog, int which) {
            Toast.makeText(getApplicationContext(), "Danke, dass sie mein Programm verwendet haben", Toast.LENGTH_SHORT).show();
             onDestroy();
             }});
             builder2.setTitle("Speichern");
             builder2.show();
           //wait until somethin clicked
            super.onPause();    

    } 
```

希望你能帮助我，并对糟糕的英语感到抱歉；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:24:04.387

我要继续说*你不能*。至少，你*不应该*。为了让事情顺利运行，Android 需要能够在需要时关闭您的应用程序。如果你接到一个电话，当用户想要接听电话时你尝试显示一个弹出窗口怎么办？不会是一个快乐的露营者。

如果您真的需要它， 您可能可以覆盖*后退按钮操作以显示您的弹出窗口。*

此外，暂停可能不应该是最终的。暂时保存状态并返回它`onResume()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:50:08.193

你为什么不把这一行：“super.onPause();” 进入点击监听器？喜欢：

```
@Override 
public void onPause()
{
     if(pauseAlreadyClicked) {
         super.onPause();
     } else {

     AlertDialog.Builder builder2=new AlertDialog.Builder(rechner.this);
     builder2.setMessage("Möchten sie ihre Noten Speichern?");
     builder2.setPositiveButton("OK",new DialogInterface.OnClickListener() {
     @Override
     public void onClick(DialogInterface dialog, int which) {
          save();
          pauseAlreadyClicked = true;
          onPause();
             }
          });

        builder2.setNegativeButton("Nein Danke!", new DialogInterface.OnClickListener() {
        @Override
         public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(getApplicationContext(), "Danke, dass sie mein Programm verwendet haben", Toast.LENGTH_SHORT).show();
         onDestroy();
         }});
         builder2.setTitle("Speichern");
         builder2.show();    

     }
} 
```

所以它会等待用户说是。如果用户取消对话框，那么我猜什么都不会发生......（当然，你可以为这种情况设置一个 OnCancelListener ）

# django - 将 django 函数通用视图转换为基于类的通用视图

> ID：13199173
> 
> 赞同：0
> 
> 时间：2012-11-02T16:19:32.750
> 
> 标签：django, django-generic-views, django-class-based-views

我为我的所有模型添加了一个“用户”字段。当用户创建对象时，我想通过外键附加他们的 ID

```
user = models.ForeignKey(User) 
```

以前，我使用的是 create_object 和 update_object。我相信我需要切换到基于类的通用视图，以便最轻松地将所需的用户插入到记录中。但是我对如何在调用 create_object 或 update_object 之前在之前的函数中进行一些预先计算感到困惑。

我有一个处理所有对象编辑的函数，无论是创建还是更新：

```
@login_required 
def edit_item(request, modelname, submodelname=None, slug=None, id=None):
    # Get parameter "next" to determine where to send user after object is created or updated

    # Define which template to use

    # Determine whether user is converting an object to another type

    # Determine which form_class to use based on modelname and whether user is converting or not

    # Redirect user if slug and id are not both correct

    # Abort if user hit cancel instead of submit

    # If object exists (slug and id are defined):
        # Update_object with form_class, object_id, template_name, post_save_redirect, and extra_context
    # Else
        # Create_object with form_class, template_name, post_save_redirect, and extra_context 
```

在基于类的通用视图中，我如何/在何处/何时执行其中一些计算（围绕定义模板或基于标准的 form_class 的逻辑）？我很困惑，因为文档似乎直接进入定义：

```
class ContactView(FormView):
    template_name = 'contact.html'
    form_class = ContactForm
    success_url = '/thanks/' 
```

我可以把逻辑扔在那里吗？

```
class ContactView(FormView):
    A = 1 + 2
    if A == 3:
        template_name = 'contact.html'
    else:
        template_name = 'contact_two.html'
    form_class = ContactForm
    success_url = '/thanks/' 
```

以及我将/应该如何改变我的逻辑以转移到使用 CreateView 或 UpdateView 与我在这里在同一函数中使用 create_object 或 update_object 所做的，这取决于是否定义了 slug/id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:15:03.077

基于类的通用视图具有用于您需要的任务的方法。例如，对于创建您使用的对象的表单`CreateView`，以及定义使用哪个表单的覆盖`get_form_class()`方法。

我强烈建议您不要尝试完全转换您当前的逻辑，而是花一些时间来了解基于类的视图的细节，因为那里已经详细解决了许多常见功能。

# xml - Grails XML GET 请求

> ID：13199174
> 
> 赞同：0
> 
> 时间：2012-11-02T16:19:33.550
> 
> 标签：xml, grails, xml-parsing, httpbuilder

我有以下代码来获取 XML 页面：

```
withHttp(uri: "PAGE") {
        get(path : 'PATH',
            query : [xxx:'xxx']){ resp, xml ->
            for (AuthToken in xml){
                println AuthToken.text()
            }
        }
     } 
```

我的问题是，结果没有打印为 xml 树。仅打印 XML 文档的叶子。我想打印 xml 文档，所以我可以用 XML Parser 解析它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:07:13.690

你得到的 XML 应该已经被解析了，所以你不需要再次解析它。无论如何，您可以使用以下节点打印 xmlSlurper：

```
new StreamingMarkupBuilder().bind { out << AuthToken } 
```

# java - 如何在操作栏下方添加按钮

> ID：13199177
> 
> 赞同：1
> 
> 时间：2012-11-02T16:19:39.407
> 
> 标签：java, android, xml, button, actionbarsherlock

谁能告诉我如何在操作栏下方添加按钮？我的意思是完美拉伸的三个按钮（发布、签到、刷新）：

[http://i.stack.imgur.com/EYhuE.png](http://i.stack.imgur.com/EYhuE.png)

对不起我的英语很差

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T16:24:16.203

您可以将其包含在`Activity`. 那不是该`ActionBar`地区的一部分。

# iphone - How to get selected row from UITableView with Search Display Controller

> ID：13199178
> 
> 赞同：0
> 
> 时间：2012-11-02T16:19:46.400
> 
> 标签：iphone, uitableview, uisearchdisplaycontroller, didselectrowatindexpath

I have my search display view controller based off [TableSearch](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html).

Normally, following expression gives selected index row:

```
self.tableView.indexPathForSelectedRow.row 
```

However while in search mode, selected row can be obtained using:

```
self.searchDisplayController.searchResultsTableView.indexPathForSelectedRow.row 
```

I use the above indices to remove respective rows (from my back end arrays) soon after some processing - at the end of didSelectRowAtIndexPath. The arrays I use are listContent and filteredListContent - as per the Apple example.

My issue is, while in search mode, I remove a row using:

```
[self.filteredListContent removeObjectAtIndex: self.searchDisplayController.searchResultsTableView.indexPathForSelectedRow.row] 
```

However, at the same time, I also want to remove the same object from self.listContent because when I return to non-search mode, that row should not appear.

I saw that self.tableView.indexPathForSelectedRow.row does not update regularly while in search results view. Instead, it gives the last selected row before I entered the search results view.

Off course, I can put some content into my array objects so that both indexes can be cross-referenced. But is there any efficient solution other than that? I think table view should have this mechanism.

And yes, I already do following in my viewWillAppear:

```
 [self.tableView deselectRowAtIndexPath:self.tableView.indexPathForSelectedRow animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:51:08.443

This is working fine for me...

```
 #pragma mark - delete row
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {

        if(tableView == self.searchDisplayController.searchResultsTableView)
             // searching mode
        {
            // find row (index) from listContent
            arrayObject = [filteredlistContent objectAtIndex:indexPath.row];
            NSUInteger fooIndex = [listContent indexOfObject: arrayObject];
            NSLog(@"index listContent %u", fooIndex);
            //remove from listContent
            [self.listContent removeObjectAtIndex:fooIndex];
            [self.tableView reloadData];

            //remove from filteredlistContent
            [self.filteredlistContent removeObjectAtIndex:indexPath.row];
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        }
        else  //  tableView mode
        {
        [self.listContent removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        }
    }
} 
```

# oracle - 如何使用 SSIS 连接到 Oracle？我收到错误消息：“在 connect_data 中没有给 tns 侦听器提供 service_name”

> ID：13199181
> 
> 赞同：6
> 
> 时间：2012-11-02T16:19:49.973
> 
> 标签：oracle, ssis, oracle11g

我正在尝试通过 SSIS 中的 Oracle Provider for OLE DB 连接到 Oracle DB，但在测试连接时出现以下错误：“tns listener was not given the service_name in connect_data”。我对Oracle不太熟悉，所以有人可以为我提供一些解决此错误的指导吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-23T21:12:33.257

您可以在主机名之后添加服务名称，并在它们之间添加正斜杠。这在 Microsoft 和 Oracle OLE DB 提供程序中都有效。

![Oracle SQL Developer 连接属性](../Images/43e11ea70b1bf6ca3fccb22ff62fce4b.png)

![Visual Studio 连接属性](../Images/58c4e24a20235e1f93b56040ce64233b.png)

IP/Service_Name 也有效，“12.12.123.123/Server1.domain.com”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:56:52.220

首先，始终使用 Oracle 驱动程序。不是微软的。

然后，在连接时，将 TNSNAME、USERNAME 和 PASSWORD 提供给 OLEDB 连接。

就这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T10:31:08.223

好吧好吧，一直在这里，这就是有效的：

您需要 oracle 数据访问组件[http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)

下载适用于您的那个（11g、12c ...）它安装了一个 OLE DB 提供程序，它是 FAST 和 .NET 连接器（也非常好用），所以我建议使用 OLEDB（另外，attunity 连接器也能创造奇迹安装 ODAC 后）。

然后只需使用 ip/服务名称 + 凭据进行连接，例如

[图片](http://i.stack.imgur.com/yIr2u.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T10:27:09.887

您需要在 Server Name Field 中输入“Servername/ServiceName”。

# compression - 在哪里可以找到 CCITT Group 4 压缩规范？

> ID：13199182
> 
> 赞同：4
> 
> 时间：2012-11-02T16:19:52.853
> 
> 标签：compression, fax

我正在寻找对 CCITT Group 4 Compression 算法的足够描述，以便我可以从中编写功能代码。有谁知道在哪里可以找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:38:16.680

您可以在此处找到规范：[http ://www.itu.int/rec/T-REC-T.6-198811-I/en](http://www.itu.int/rec/T-REC-T.6-198811-I/en)

# java - 如何导出rich:dataTable到excel

> ID：13199185
> 
> 赞同：6
> 
> 时间：2012-11-02T16:20:01.023
> 
> 标签：java, excel, jsf, richfaces, apache-poi

我想导出 a`<rich:dataTable>`或`<rich:extendedDataTable>`excel 的内容。

*   我看到 PrimeFaces 具有“导出器功能” [http://www.primefaces.org/showcase/ui/exporter.jsf](http://www.primefaces.org/showcase/ui/exporter.jsf)

*   我希望能够在不使用 PrimeFaces 的情况下做与此类似的事情，但使用 RichFaces（版本 3.3.3）......（我想在未来的某个时候迁移到 RichFaces 4，但我坚持使用 3.3 .3 现在）

*   [我已经读到可以使用http://poi.apache.org/](http://poi.apache.org/)构建自己的， 但我不知道从哪里开始实施这样的事情......

任何关于如何最好地执行所需导出和示例的想法将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T16:50:08.490

在 JSF 中使用 POI 与在纯 Java 中使用 POI 并没有什么不同。只需拥有代表每条记录的项目集合。您必须已经拥有它，因为您正在使用也采用此类集合的数据表。您只需遍历完全相同的集合即可在 POI 中创建 Excel 工作表。

这是一个启动示例，您也在数据表中使用的`items`a是：`List<Item>`

```
Workbook workbook = new HSSFWorkbook();
Sheet sheet = workbook.createSheet("sheet title");
int rowIndex = 0;

for (Item item : items) {
    Row row = sheet.createRow(rowIndex++);
    int columnIndex = 0;

    row.createCell(columnIndex++).setCellValue(item.getId());
    row.createCell(columnIndex++).setCellValue(item.getName());
    row.createCell(columnIndex++).setCellValue(item.getValue());
    // ...
}

workbook.write(someOutputStream); // Write the Excel result to some output. 
```

为了将此作为 JSF 响应的下载提供，您需要提供[`ExternalContext#getResponseOutputStream()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResponseOutputStream%28%29)as `someOutputStream`. 您还需要设置响应内容类型（以便浏览器知道与其关联的应用程序）和响应内容处置（以便将其作为附件打开并且具有有效的文件名）。

```
FacesContext context = FacesContext.getCurrentInstance();
ExternalContext externalContext = context.getExternalContext();
externalContext.responseReset(); 
externalContext.setResponseContentType("application/vnd.ms-excel");
externalContext.setResponseHeader("Content-Disposition", "attachment;filename=export.xls");
workbook.write(externalContext.getResponseOutputStream());
context.responseComplete(); // Prevent JSF from performing navigation. 
```

最后，[`FacesContext#responseComplete()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#responseComplete%28%29)必须调用，以防止 JSF 执行默认导航任务（这只会通过将导航页面的一些 HTML 输出附加到末尾来破坏 Excel 文件）。

请注意，上面的 JSF 示例假定 JSF 2.x。如果您实际使用的 JSF 1.x 缺少几个方便的委托`ExternalContext`方法，那么您需要获取原始数据并对其执行操作。另请参阅[如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)`HttpServletResponse`[`ExternalContext#getResponse()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResponse%28%29)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-19T13:35:47.067

我还需要这个功能，所以我采用了 primefaces dataExporter 组件并对其进行了修改以将其与 Richfaces 一起使用。我还添加了导出 collapsibleSubTable 内部表格的功能。Primefaces 和 Richfaces 是开源的，请随时改进。包含源代码和示例的软件包： [bundle](https://www.sendspace.com/file/jrprk3)

# git - 如何知道合作者的总承诺

> ID：13199197
> 
> 赞同：4
> 
> 时间：2012-11-02T16:20:41.347
> 
> 标签：git, github

我想知道我的合作者有多少贡献。所以我需要知道自己写了多少代码并推送到github。但是，在github中，也有合并消息会打扰我。

在 github 或 git 中是否有办法让我知道协作者在特定时间内实际提交代码？（在每个分支）

**更新** 我可以看到这个合作者的非重复提交的差异吗？IE。其他人的提交也将显示在合并提交中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:27:33.723

[`git shortlog`](https://www.kernel.org/pub/software/scm/git/docs/git-shortlog.html)是您正在寻找的工具。利用：

```
git shortlog -s 
```

获取用户提交的摘要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:33:27.020

Github 实际上在存储库的 Graphs 部分为您完成了这项工作。“贡献者”和“影响”选项卡都包括所有非合并提交的#commits、+lines/-lines。

编辑：刚刚意识到你想要所有分支的数据，Github 的图表只报告主分支。我不知道有什么方法可以从 Github 获取所有分支信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:39:29.597

Github 现在（2013 年 4 月）提出了一种可视化每个协作者的提交数量的方法，项目**[Pulse](https://github.com/zmoazeni/csscss/pulse)**（“ [Get up to speed with Pulse](https://github.com/blog/1476-get-up-to-speed-with-pulse) ”）

> **Pulse 将向您显示谁一直在积极提交，以及项目的默认分支中发生了什么变化**：

![脉冲](../Images/d9e515ab66a80e64a2e21f1f981349e1.png)

> 您可以在导航栏左侧找到链接。

![关联](../Images/00f2bcb1dfd1e6607118f5064ca93297.png)

但是，这只是**在一段时间内**：

*   24小时
*   3天
*   1周
*   1个月

因此，这不是在项目的整个生命周期中获取合作者活动的方法。

# scala - 在 PostgreSQL 和 Slick 中使用自动递增字段

> ID：13199198
> 
> 赞同：21
> 
> 时间：2012-11-02T16:20:45.870
> 
> 标签：scala, slick, typesafe-stack

如何使用带有 Slick 映射表的 AutoInc 键将记录插入 PostgreSQL？如果我在我的案例类中使用 and Option 作为 id 并将其设置为 None，那么 PostgreSQL 将在插入时抱怨该字段不能为空。这适用于 H2，但不适用于 PostgreSQL：

```
//import scala.slick.driver.H2Driver.simple._
//import scala.slick.driver.BasicProfile.SimpleQL.Table
import scala.slick.driver.PostgresDriver.simple._
import Database.threadLocalSession

object TestMappedTable extends App{

    case class User(id: Option[Int], first: String, last: String)

    object Users extends Table[User]("users") {
        def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
        def first = column[String]("first")
        def last = column[String]("last")
        def * = id.? ~ first ~ last <> (User, User.unapply _)
        def ins1 = first ~ last returning id
        val findByID = createFinderBy(_.id)
        def autoInc = id.? ~ first ~ last <> (User, User.unapply _) returning id
    }

 // implicit val session = Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver").createSession()
    implicit val session = Database.forURL("jdbc:postgresql:test:slicktest",
                           driver="org.postgresql.Driver",
                           user="postgres",
                           password="xxx")

  session.withTransaction{
    Users.ddl.create

    // insert data
    print(Users.insert(User(None, "Jack", "Green" )))
    print(Users.insert(User(None, "Joe", "Blue" )))
    print(Users.insert(User(None, "John", "Purple" )))
    val u = Users.insert(User(None, "Jim", "Yellow" ))
  //  println(u.id.get)
    print(Users.autoInc.insert(User(None, "Johnathan", "Seagul" )))
  }
  session.withTransaction{
    val queryUsers = for {
    user <- Users
  } yield (user.id, user.first)
  println(queryUsers.list)

  Users.where(_.id between(1, 2)).foreach(println)
  println("ID 3 -> " + Users.findByID.first(3))
  }
} 
```

将上述内容与 H2 一起使用成功，但如果我将其注释掉并更改为 PostgreSQL，那么我会得到：

```
[error] (run-main) org.postgresql.util.PSQLException: ERROR: null value in column "id" violates not-null constraint
org.postgresql.util.PSQLException: ERROR: null value in column "id" violates not-null constraint 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T03:35:34.603

这是在这里工作：

```
object Application extends Table[(Long, String)]("application") {   
    def idlApplication = column[Long]("idlapplication", O.PrimaryKey, O.AutoInc)
    def appName = column[String]("appname")
    def * = idlApplication ~ appName
    def autoInc = appName returning idlApplication
}

var id = Application.autoInc.insert("App1") 
```

这就是我的 SQL 的样子：

```
CREATE TABLE application
(idlapplication BIGSERIAL PRIMARY KEY,
appName VARCHAR(500)); 
```

**更新：**

关于带有 User 的映射表的具体问题（如问题中所示）可以解决如下：

```
 def forInsert = first ~ last <>
    ({ (f, l) => User(None, f, l) }, { u:User => Some((u.first, u.last)) }) 
```

这是来自[Slick git 存储库中的测试用例](https://github.com/slick/slick/blob/797e81172cd152ed7fce8cd2e3335a8dac8edb9b/slick-testkit/src/main/scala/com/typesafe/slick/testkit/tests/MapperTest.scala#L20)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-17T00:21:07.353

我以不同的方式解决了这个问题。因为我希望我的`User`对象在我的应用程序逻辑中总是有一个 id，并且唯一没有它的地方是在插入数据库期间，所以我使用了一个`NewUser`没有 id 的辅助案例类。

```
case class User(id: Int, first: String, last: String)
case class NewUser(first: String, last: String)

object Users extends Table[User]("users") {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def first = column[String]("first")
  def last = column[String]("last")

  def * = id ~ first ~ last <> (User, User.unapply _)
  def autoInc = first ~ last <> (NewUser, NewUser.unapply _) returning id
}

val id = Users.autoInc.insert(NewUser("John", "Doe")) 
```

同样，如果您想避免使用额外的 case 类，可以`User`将 1:1 映射到数据库条目/行，而`NewUser`可以用元组替换，因为它仅用作`insert`调用的数据容器。

**编辑：** 如果您想要更多安全性（稍微增加冗长），您可以使用案例类的特征，如下所示：

```
trait UserT {
  def first: String
  def last: String
}
case class User(id: Int, first: String, last: String) extends UserT
case class NewUser(first: String, last: String) extends UserT
// ... the rest remains intact 
```

在这种情况下，您将首先将模型更改应用于特征（包括您可能需要的任何混合），并可选择将默认值添加到`NewUser`.

*作者的观点：我仍然更喜欢 no-trait 解决方案，因为它更紧凑，对模型的更改只需复制粘贴`User`参数，然后删除`id`(auto-inc 主键)，无论是在案例类声明中还是在表中预测。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T08:58:58.500

我们正在使用稍微不同的方法。我们没有创建进一步的投影，而是请求表的下一个 id，将其复制到案例类中，并使用默认投影“*”插入表条目。

对于 postgres，它看起来像这样：

让你的表对象实现这个特性

```
trait TableWithId { this: Table[_] =>
  /**
   * can be overriden if the plural of tablename is irregular
   **/
  val idColName: String = s"${tableName.dropRight(1)}_id"
  def id = column[Int](s"${idColName}", O.PrimaryKey, O.AutoInc)
  def getNextId = (Q[Int] + s"""select nextval('"${tableName}_${idColName}_seq"')""").first
  } 
```

您所有的实体案例类都需要这样的方法（也应该在特征中定义）：

```
case class Entity (...) {
  def withId(newId: Id): Entity = this.copy(id = Some(newId)
} 
```

现在可以通过这种方式插入新实体：

```
object Entities extends Table[Entity]("entities") with TableWithId {
  override val idColName: String = "entity_id"
  ...
  def save(entity: Entity) = this insert entity.withId(getNextId) 
} 
```

代码仍然不是 DRY，因为您需要为每个表定义 withId 方法。此外，您必须在插入可能导致性能影响的实体之前请求下一个 id，但除非您一次插入数千个条目，否则不应引起注意。

主要优点是不需要第二次投影，这使得代码不易出错，特别是对于具有许多列的表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-15T05:19:17.553

最简单的解决方案是像这样使用 SERIAL 类型：

`def id = column[Long]("id", SqlType("SERIAL"), O.PrimaryKey, O.AutoInc)`

这是一个更具体的块：

```
// A case class to be used as table map
case class CaseTable( id: Long = 0L, dataType: String, strBlob: String)

// Class for our Table
class MyTable(tag: Tag) extends Table[CaseTable](tag, "mytable") {
  // Define the columns
  def dataType = column[String]("datatype")
  def strBlob = column[String]("strblob")

  // Auto Increment the id primary key column
  def id = column[Long]("id", SqlType("SERIAL"),  O.PrimaryKey,  O.AutoInc)

  // the * projection (e.g. select * ...) auto-transforms the tupled column values
  def * = (id, dataType, strBlob) <> (CaseTable.tupled, CaseTable.unapply _)

}

// Insert and  get auto incremented primary key
def insertData(dataType: String, strBlob: String, id: Long = 0L): Long = {
  // DB Connection
  val db = Database.forURL(jdbcUrl, pgUser, pgPassword, driver = driverClass)
  // Variable to run queries on our table
  val myTable = TableQuery[MyTable]

  val insert = try {
    // Form the query
    val query = myTable returning myTable.map(_.id) += CaseTable(id, dataType, strBlob)
    // Execute it and wait for result
    val autoId = Await.result(db.run(query), maxWaitMins)
    // Return ID
    autoId
  }
  catch {
    case e: Exception => {
      logger.error("Error in inserting using Slick: ", e.getMessage)
      e.printStackTrace()
      -1L
    }
  }
  insert
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-27T04:44:46.143

当我将数据库更改为 Postgres 时，我在尝试从 play-slick-3.0 制作计算机数据库示例时遇到了同样的问题。解决问题的方法是将进化文件 /conf/evolutions/default/1.sql 中的 id 列（主键）类型更改为 SERIAL（最初是在 BIGINT 中）。查看[https://groups.google.com/forum/?fromgroups=#%21topic/scalaquery/OEOF8HNzn2U](https://groups.google.com/forum/?fromgroups=#%21topic/scalaquery/OEOF8HNzn2U)
以了解整个讨论。干杯，ReneX

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-01T15:01:50.533

另一个技巧是将案例类的 id 设置为 var

```
case class Entity(var id: Long) 
```

要插入一个实例，像下面这样创建它 `Entity(null.asInstanceOf[Long])`

我已经测试过它可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-06T01:20:20.423

我找到的解决方案是`SqlType("Serial")`在列定义中使用。我还没有对它进行广泛的测试，但它似乎到目前为止有效。

所以而不是

```
def id: Rep[PK[SomeTable]] = column[PK[SomeTable]]("id", O.PrimaryKey, O.AutoInc) 
```

你应该做：

```
def id: Rep[PK[SomeTable]] = column[PK[SomeTable]]("id", SqlType("SERIAL"), O.PrimaryKey, O.AutoInc) 
```

Where`PK`的定义类似于“Essential Slick”一书中的示例：

```
final case class PK[A](value: Long = 0L) extends AnyVal with MappedTo[Long] 
```

# python - 在 Python 中使用递归编写自动换行函数？

> ID：13199201
> 
> 赞同：-3
> 
> 时间：2012-11-02T16:21:01.187
> 
> 标签：python, word, word-wrap

```
def insertNewLine(text, lenght):

    if len(text) < lenght:
        return text
    else:
        print text[:lenght]
        return (text[:lenght]+'\n'+ insertNewLine(text[lenght:],lenght)) 
```

但问题是这个词被我的程序分开了..这不应该发生..例如

=> 输入：

“要再次换行的随机文本。” 和长度：5

=> 我的输出：

```
兰多
米特克斯
到
裹
再次
.

```

=> 预期输出：

```
随机的
文本
包裹
再次。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:02:38.567

看起来您需要在一定长度后将整个单词换行，并忽略空格；我会做这样的事情：

```
def wrap(text, length):
    words = text.split()
    lines = []
    line = ''
    for w in words:
        if len(w) + len(line) > length:
            lines.append(line)
            line = ''
        line = line + w + ' '
        if w is words[-1]: lines.append(line)
    return '\n'.join(lines) 
```

这基本上是通过将文本拆分为整个单词，然后将它们的行组装到您的换行长度。这样你就不必弄清楚你是否想在一个单词中间打断。我没有费心检查你的单词是否`length`比最长的单词短，但这也是一个考虑因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T09:31:56.303

```
def insertNewline(text, length):
    '''
    This function can only be applied to normal text.
    '''
    if len(text) <= length:
        print(text)
        return
    elif text[length - 1] == ' ':
        print(text[:length - 1])
        return insertNewline(text[(length):], length)
    elif text[length] == ' ':
        print(text[:length])
        return insertNewline(text[(length + 1):], length)        
    else:
        i = 0
        while text[length + i] != ' ' and text[length + i] != ',' and text[length + i] != '.':
            i += 1
        if text[length + i] == ' ':
            print(text[:(length + i)])
            return insertNewline(text[(length + i + 1):], length)
        else:
            print(text[:(length + i + 1)])
            return insertNewline(text[(length + i + 2):], length) 
```

此代码适用于普通文本，我的意思是简单的英语句子，只有“，”和“。” 作为标点符号，并且每个标点符号之后只有一个空格，就像正常的论文写作一样。如果您想将此代码应用于更完整的文本，我认为您可以自己更新此代码。我根据您的问题使用“递归”。我认为这段代码应该对你有帮助。我不是python专家，还在学习过程中。希望你能从我的回答中得到你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:46:07.657

```
def insertNewLine(text, lenght):

if len(text) < lenght:
    return text
else:
    print text[:lenght]
    return (text[:lenght]+'\n'+ insertNewLine(text[lenght:],lenght)) 
```

“要再次换行的随机文本。” 和长度：5

问题是你说的是

```
'\n' 
```

你想要一个新行，每行 5 个字符。Random 这个词有 6 个，这就是它在 Rando 被删减的原因。还要记住，空格也算作一个字符。因此，当您的递归通过时，它只是计算 5 个字符，然后每 5 个字符插入一个新行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:30:38.917

这是您的问题的一个可能的解决方案，我使用 re python 模块将 \n 字符放在正确的位置。

```
import re
def insertNewLine(text, lenght):
    return re.sub('((.*){' + str(lenght-1) + ',}?)\s', '\g<1>\n', text)

if __name__ == "__main__":
    print insertNewLine("Random text to wrap again.", 5)

>>>python test.py 
Random
text
to wrap
again. 
```

# python - Python：使用“yield”生成树

> ID：13199203
> 
> 赞同：1
> 
> 时间：2012-11-02T16:21:07.960
> 
> 标签：python, yield, itertools

我正在尝试建立一个系统来生成一组“配置”。这些配置是存储在 python dict 中的简单键/值对。

这些配置是用一系列函数转换字典的结果，这就是我所说的工作流。

这是我最终得到的一个简单示例：

```
global_data = [dict()]

def workflow_step1(data):
    results = []
    for i in range(1,4):
        data['key'] = i
        results.append(copy.deepcopy(data))
    return results

def workflow_step2(data):
    results = []
    for i in range(1,3):
        data['otherkey'] = i
        results.append(copy.deepcopy(data))
    return results

def workflow_step3(data):
    data['yetanotherkey'] = 42
    return [copy.deepcopy(data)]

def list_workflow():
    return [workflow_step1, workflow_step2, workflow_step3]

def merge(lhs,rhs):
    return lhs+rhs

def run(data):
    for step in list_workflow():
        data = reduce(lambda lhs, rhs: lhs+rhs, [step(d) for d in data])
    return data

print run(global_data) 
```

这很好用，我得到：

```
[{'yetanotherkey': 42, 'otherkey': 1, 'key': 1},
 {'yetanotherkey': 42, 'otherkey': 2, 'key': 1},
 {'yetanotherkey': 42, 'otherkey': 1, 'key': 2},
 {'yetanotherkey': 42, 'otherkey': 2, 'key': 2},
 {'yetanotherkey': 42, 'otherkey': 1, 'key': 3},
 {'yetanotherkey': 42, 'otherkey': 2, 'key': 3}] 
```

如您所见，目标是获取字典的所有可能组合。工作流的每个步骤都会返回一组可能的组合，这应该为接下来的步骤创建一个新的可能性分支。

我面临的问题是，用户现在正在创建越来越多的工作流程步骤，从而导致组合爆炸。

我幼稚的设计中的问题是我一次生成了所有可能性的整个树。

我希望使用`yield`和生成器来解决这个问题，一次生成一种可能性，因此不会同时存储所有内容。

我当然能够使用 yield 重写工作流程步骤：

```
def workflow_step1(data):
    for i in range(1,4):
        data['key'] = i
        yield copy.deepcopy(data)

def workflow_step2(data):
    for i in range(1,3):
    data['otherkey'] = i
        yield copy.deepcopy(data)

def workflow_step3(data):
    data['yetanotherkey'] = 42
    yield copy.deepcopy(data)

def list_workflow():
    yield workflow_step1
    yield workflow_step2
    yield workflow_step3 
```

但是我就是无法让我的大脑去想如何重写`run`函数来依次处理每个步骤。我迷失在产量和生成器的大脑迷宫中。

任何想法都更受欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:35:23.313

我认为`itertools.product`会做你想要的。这是一种返回生成器的方法，该生成器一次生成三个步骤的一个组合。即使一个步骤中有更多选项，也不会占用大量时间或内存。

```
def step1():
    return [("key", i) for i in range(1,4)]

def step2():
    return [("otherkey", i) for i in range(1,3)]

def step3():
    return [("yetanotherkey", 42)]

def workflow_generator():
    return (dict(p) for p in itertools.product(step1(), step2(), step3())) 
```

如果您希望能够处理可变数量的步骤，您可以稍微修改一下以使其工作：

```
def workflow_generator(steps):
    return (dict(p) for p in itertools.product(*(step() for step in steps))) 
```

调用这个版本`workflow_generator([step1, step2, step3])`会得到与前一个版本相同的结果，但如果你愿意，你可以用其他方式组合参数（比如从一个函数中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:44:17.553

Yes, your datastructures are messed up. The following code is just to give an idea (not fully operational in terms of your current structures). You should use trees basically and make a class like a workflow manager which registers steps. Steps are trees of steps. Use true id's instead of numbers.

Two suggestions

1.

```
import copy

global_data = [dict()]

class workflowManager:

    def __init__(self):
        self.steps = []
        self.data = list()

    def registerStep(self,step,stepNumber=1):
        for i in range(1,stepNumber+1):
            self.steps.append(step)

    def registerSubStep(self,step,substep):

    '''
    def hookToStep(self,step,hook):
        #find all steps
        indices = [i for i, x in enumerate(self.steps) if x == step]
        print 'hooking at ',indices
        for k in indices:
            a = self.steps[:k]
            b = self.steps[k:]
            self.steps = a + [hook] + b
    '''

    def performOnData(self):
        print 'self.data ',self.data
        for step in self.steps:
            print 'performing step ',step
            print 'data ',self.data
            self.data = step(self.data)

    def __str(self):
        return str(data)

def step1(data):
    lastn = 0
    try:
        lastn = data[-1]['key']
    except:
        pass
    data.append({'key': lastn+1})
    return data

def step2(data):
    lastn = 0
    try:
        lastn = data[-1]['otherkey']
    except:
        pass

    data.append({'otherkey': lastn+1})
    return data

def step3(data):
    data.append({'yetanotherkey': 42})
    return data

w = workflowManager()
w.step_register(step1,4)
#w.step_register(step2,3)
#w.step_register(step3,1)
w.hookToStep(step1,step3)

print w

w.performOnData()

print w 
```

2.

```
class Step:

    def __init__(self,name,extra=None):
        self.steps = []
        self.name = name

    def addChild(self,child,repeat=1):
        for j in range(1,repeat+1):
            self.steps.append(child)

    def __str__(self):
        s = self.name + "\n"
        for sub in self.steps:
            s+=str(sub)
        return s

step1 = Step("yetanotherkey",42) #root
step2 = Step("otherkey")
step3 = Step("key")

step2.addChild(step3,2)
step1.addChild(step2,3)

print step1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:58:15.387

我建议您将循环从`workflow_step`函数中取出，并`itertools.product`像这样使用：

```
import copy
import itertools

def workflow_step1(data, param):
    data['key'] = param

def workflow_step2(data, param):
    data['otherkey'] = param

def workflow_step3(data, param):
    data['yetanotherkey'] = param

def list_workflow():
    return ([workflow_step1, workflow_step2, workflow_step3],
            [range(1,4),     range(1,3),     [42]])

def run(data):
    steps, param_lists = list_workflow()
    for params in itertools.product(*param_lists):
        d = copy.deepcopy(data)
        for step, param in zip(steps, params):
            step(d,param)
        yield d

for result in run({}):
    print result 
```

# c# - 如何确定对象是否实现任何类型的 IDictionary 或 IList

> ID：13199204
> 
> 赞同：5
> 
> 时间：2012-11-02T16:21:09.427
> 
> 标签：c#, .net

假设我声明以下内容

```
Dictionary<string, string> strings = new Dictionary<string, string>();
List<string> moreStrings = new List<string>();

public void DoSomething(object item)
{
   //here i need to know if item is IDictionary of any type or IList of any type.
} 
```

我试过使用：

```
item is IDictionary<object, object>
item is IDictionary<dynamic, dynamic>

item.GetType().IsAssignableFrom(typeof(IDictionary<object, object>))
item.GetType().IsAssignableFrom(typeof(IDictionary<dynamic, dynamic>))

item is IList<object>
item is IList<dynamic>

item.GetType().IsAssignableFrom(typeof(IList<object>))
item.GetType().IsAssignableFrom(typeof(IList<dynamic>)) 
```

所有这些都返回错误！

那么我如何确定（在这种情况下）项目实现 IDictionary 或 IList？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T16:38:31.950

```
 private void CheckType(object o)
    {
        if (o is IDictionary)
        {
            Debug.WriteLine("I implement IDictionary");
        }
        else if (o is IList)
        {
            Debug.WriteLine("I implement IList");
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:25:50.537

您可以使用非泛型接口类型，或者如果您确实需要知道该集合是泛型的，您可以`typeof`不使用类型参数来使用。

```
obj.GetType().GetGenericTypeDefinition() == typeof(IList<>)
obj.GetType().GetGenericTypeDefinition() == typeof(IDictionary<,>) 
```

为了更好地衡量，您应该检查`obj.GetType().IsGenericType`以避免`InvalidOperationException`非泛型类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:27:09.190

不确定这是否是您想要的，但您可以`GetInterfaces`在项目类型上使用，然后查看是否有任何返回的列表是`IDictionary`或`IList`

```
item.GetType().GetInterfaces().Any(x => x.Name == "IDictionary" || x.Name == "IList") 
```

我认为应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-31T22:34:38.707

以下是一些适用于 vb.net 框架 2.0 中的通用接口类型的布尔函数：

```
Public Shared Function isList(o as Object) as Boolean
    if o is Nothing then return False
    Dim t as Type = o.GetType()
    if not t.isGenericType then return False
    return (t.GetGenericTypeDefinition().toString() = "System.Collections.Generic.List`1[T]")
End Function

Public Shared Function isDict(o as Object) as Boolean
    if o is Nothing then return False
    Dim t as Type = o.GetType()
    if not t.isGenericType then return False
    return (t.GetGenericTypeDefinition().toString() = "System.Collections.Generic.Dictionary`2[TKey,TValue]")
End Function 
```

# python - Python 中的类型错误

> ID：13199205
> 
> 赞同：0
> 
> 时间：2012-11-02T16:21:13.643
> 
> 标签：python

我有两个课程以防万一：

测试.py：

```
class Functions:
    def mapping(func, x):
        return func(x) 
```

我尝试运行下面的代码：

```
import testing

def doubleMe(data):
    return data * data

res = stream.Functions.map(testdouble, [1,2,3,4,5])
print res 
```

在我尝试运行代码后，我得到了错误

> TypeError：必须使用函数实例作为第一个参数调用未绑定的方法映射（）（改为获取函数实例）

我不太清楚这里出了什么问题，我可以给点建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:28:14.813

Python 函数总是将类或实例作为类函数/方法的第一个参数。

```
class Functions:
    def mapping(self, func, x):
        return func(x) 
```

或者，如果您不想总是创建类的实例，请执行以下操作以创建类方法而不是实例方法。

```
class Functions:
    @classmethod
    def mapping(cls, func, x):
        return func(x) 
```

`@`操作员创建一个*函数 decorator*，如果它是您想更多地搜索的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:24:14.517

我无法理解您的代码（似乎不完整，并且名称不匹配：映射->映射，流->测试），但是从错误消息来看，您似乎需要构造一个实例功能第一。所以你需要类似的东西：

```
func = stream.Functions()
func.map(testdouble, [1, 2, 3, 4, 5]) 
```

正如 Kurt 指出的那样，您还需要正确声明 map/mapping 方法（在决定是否需要实例或类方法之后）。

# cron - 每 > 60 分钟作业的 cron 表达式

> ID：13199209
> 
> 赞同：5
> 
> 时间：2012-11-02T16:21:22.527
> 
> 标签：cron

有没有办法将 cron 表达式设计为每 70 分钟或 210 分钟运行一次，即 > 60 分钟。我试图搜索这个，但找不到这个。

我终于使用了一个包装脚本，该脚本将进行所需的时间检查，每 5 分钟调用一次（或最佳重复时间）。

如何在 cron 表达式中完成这样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-22T15:47:21.110

每70分钟跑一次

```
* */1.1666 
```

或者

每 210 分钟运行一次

```
* */3.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-17T10:03:48.323

这个答案与[这个](https://stackoverflow.com/questions/49688651/is-it-possible-to-execute-cronjob-in-every-50-hours/49693590#49693590)和[这个完全一样](https://stackoverflow.com/questions/1382634/how-to-set-cronjob-for-2-days/48547339#48547339)

如果你想每`n`分钟运行一次 cron，有两种情况需要考虑：

*   每`n`th 分钟 (60 可被 整除`n`)
*   从（通用）开始的每`n`分钟`YYYY-MM-DD HH:MM:00`

后者涵盖了 OP 的情况，但为了保持通用性，我介绍了这两种情况。

## 每`n`th 分钟 (60 可被 整除`n`)

这对 ( `n=1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30`)有效

为此，我们使用定义范围和步长值的组合：

> **`man 5 crontab`：**步长值可以与范围结合使用。跟随一个范围，`/<number>`指定跳过该范围内的数字值。例如， `0-23/2`可以在“小时”字段中使用以指定每隔一小时执行一次命令（V7 标准中的替代方案是`0,2,4,6,8,10,12,14,16,18,20,22`）。星号后也允许使用步骤值，因此如果指定要每两小时运行一次的作业，您可以使用`*/2`.

请参见以下示例：

```
# Example of job definition:
# .----------------- minute (0 - 59)
# |   .------------- hour (0 - 23)
# |   |  .---------- day of month (1 - 31)
# |   |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |   |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7)
# |   |  |  |  |
# *   *  *  *  *   command to be executed
  m/n *  *  *  *   command1 
```

在这里，`command1`将从 m 到 59 每 n 分钟执行一次。

这意味着 ：

*   如果`m<=n`，它们将始终以`n`分钟为间隔。例如。`m=2,n=10`:: 作业将在几分钟内运行`2,12,22,32,42,52`
*   如果`m>n`，它们将始终以`n`分钟为间隔，除了在小时的开始。例如。`m=12,n=10`:: 作业将在几分钟内运行 `12,22,32,42,52`。所以这里我们在`52`nd 和`12th`minute 之间有 20 分钟的跳跃。

**注意：**您清楚地看到，如果`n`不完美地划分60，您将遇到问题。例如。`m=0,n=11`继续运行 `0,11,22,33,44,55`，所以我们只有 5 分钟才能进行下一次运行。

## 每`n`分钟从`YYYY-MM-DDTHH:MM:00`

如果你想每`n`分钟运行一次 cron，你不能用 cron 干净地做到这一点，但这是可能的。为此，您需要在测试检查时间的 cron 中进行测试。最好在查看 UNIX 时间戳（自`1970-01-01 00:00:00 UTC`. 假设我们想从 McFly 到达 Riverdale 的那一刻开始：

```
% date -u -d '2015-10-21 07:28:00' +%s 
1445412480

# Example of job definition:
# .---------------- minute (0 - 59)
# |  .------------- hour (0 - 23)
# |  |  .---------- day of month (1 - 31)
# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7)
# |  |  |  |  |
# *  *  *  *  *   command to be executed
  *  *  *  *  *   mintestcmd "2015-10-21 07:28:00"   7 && command1
*/10 *  *  *  *   mintestcmd "2015-10-21 07:00:00"  70 && command2
*/30 *  *  *  *   mintestcmd "2015-10-21 07:00:00" 210 && command3 
```

`mintestcmd`定义为

```
#!/usr/bin/env bash
starttime=$(date -d "$1" "+%s")
# return UTC time
now=$(date "+%s")
# get the amount of minutes
delta=$(( (now - starttime) / 60 ))
# set the modulo
modulo=$2
# do the test
(( delta >= 0 )) && (( delta % modulo == 0)) 
```

在上面的例子中，我们有：

*   `command1``2015-10-21 07:28:00`将在, `2015-10-21 07:35:00`, `2015-10-21 07:42:00`, `2015-10-21 07:49:00`, ...上每 7 分钟运行一次
*   `command2`以后每 70 分钟运行一次`2015-10-21 07:00:00`。由于 70 可以被 10 整除，并且开始时间完美地从整点开始，我们可以将 cron 设置为每 10 分钟运行一次。
*   `command3`以后每 210 分钟运行一次`2015-10-21 07:00:00`。由于 210 可以被 30 整除，并且开始时间完美地从整点开始，我们可以将 cron 设置为每 30 分钟运行一次。

**备注：** UNIX 时间以 UTC 给出。如果您的 cron 在受夏令时影响的不同时区运行，建议不要在 2 点到 3 点之间运行命令。这可能会跳过命令或运行命令两次（取决于时间是向前跳还是向后跳）

**备注：** UNIX时间不受闰秒影响

**备注：** `cron`没有亚秒级精度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T20:40:38.090

基本上，您需要每分钟运行一次 cron：

```
* * * * * 
```

并让您的脚本确定其最后一次执行日期是在 70 分钟还是 210 分钟前。
如果是这样，它将继续脚本的其余部分。
如果没有，它将立即退出。

换句话说，不要尝试将所有内容都放在 cron 表达式中。

正如[Keith Thompson](https://stackoverflow.com/users/827263/keith-thompson)评论的那样，您可以减少运行该脚本的频率 (0 0/5 0 ? * * *)，在 70 分钟进行一次测试，或者每 30 分钟 ( `0 0/30 0 ? * * *`) 在 210 分钟进行一次测试。

# c - scanf 卡住了

> ID：13199213
> 
> 赞同：2
> 
> 时间：2012-11-02T16:21:40.563
> 
> 标签：c, scanf

我是 C 的初学者。我在我的 c 程序中使用 scanf 函数，但它卡住了，程序只有在我键入 exit 时才会继续运行。我面临问题的代码部分是：

```
while(fread(&emr,recsize_emr,sizeof(emr)/recsize_emr,fp)==1)
{
    if(emr.emr_id==emr_id)
    {
        printf("%s %s %s %d %d %s %s %f \n\n",emr.fname,emr.lname,emr.company_name,emr.emr_id,emr.agt_id,emr.pol_start_date,emr.pol_end_date,emr.amount);
        printf("Enter New First Name, Last Name, Company Name, EmployerID, AgentID, Policy Start Date, Policy End Date, Amount : ");
        scanf("%s %s %s %d %d %s %s %f \n",emr.fname,emr.lname,emr.company_name,&emr.emr_id,&emr.agt_id,emr.pol_start_date,emr.pol_end_date,&emr.amount);
        fseek(fp,-recsize_emr,SEEK_CUR);
        fwrite(&emr,recsize_emr,sizeof(emr)/recsize_emr,fp);
        break;
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:48:57.490

在

```
scanf("%s %s %s %d %d %s %s %f \n"); 
```

final在读取完`" \n"`之后会消耗所有空格。`float`这意味着`scanf`它在接收到非空白字符之后的唯一返回`float`- 为了使该字符到达程序，您通常需要在其后输入换行符。

如果您从格式字符串中删除最后一个空格，

```
scanf("%s %s %s %d %d %s %s %f"); 
```

`scanf`读完后立即返回`float`。然后它将`float`在输入缓冲区中留下换行符 - 或输入中的任何字符，因此在进一步扫描之前可能需要清除输入缓冲区。

# scala - slf4j 中的参数化日志记录 - 它与 scala 的别名参数相比如何？

> ID：13199214
> 
> 赞同：9
> 
> 时间：2012-11-02T16:21:41.943
> 
> 标签：scala, parameter-passing, slf4j, callbyname

这里有两个似乎被普遍接受的陈述，但我无法克服：

1) Scala 的别名参数优雅地替换了令人讨厌的 log4j 使用模式：

```
if (l.isDebugEnabled() ) { 
      logger.debug("expensive string representation, eg: godObject.toString()") 
   } 
```

因为在方法调用之前不会 对 by-name-parameter（**Scala 特定的语言功能）进行评估。**

2）但是，这个问题是通过slf4f中的参数化日志记录来解决的：

```
logger.debug("expensive string representation, eg {}:", godObject[.toString()]); 
```

那么，这是如何工作的呢？slf4j 库中是否有一些低级魔法会阻止在“调试”方法执行之前对参数进行评估？（这甚至可能吗？*图书馆*可以影响语言的这样一个基本方面吗？）

或者仅仅是一个简单的事实，一个对象被传递给方法——而不是一个字符串？（如果适用，可能在 debug() 方法本身中调用该对象的 toString()）。

但是，log4j 不也是这样吗？（它确实有带有对象参数的方法）。这是否意味着如果你传递一个字符串——如上面的代码——它的行为与 log4j 相同？

我真的很想对这件事有所了解。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T18:57:26.820

slf4j 没有魔法。日志记录的问题曾经是，如果你想记录让我们说

```
logger.debug("expensive string representation: " + godObject) 
```

那么无论是否在记录器中启用了调试级别，您总是评估`godObject.toString()`哪个可能是一项昂贵的操作，然后还要进行字符串连接。这仅仅是因为在 Java（和大多数语言）中，参数在传递给函数之前会被评估。

这就是引入 slf4j 的原因`logger.debug(String msg, Object arg)`（以及更多参数的其他变体）。整个想法是，您将廉价的参数传递给`debug`函数，它会调用`toString`它们并将它们组合成一条消息，只有在调试级别打开时。

请注意，通过调用

```
logger.debug("expensive string representation, eg: {}", godObject.toString()); 
```

你大大降低了这个优势，因为这样你`godObject`在传递它之前一直在转换`debug`，无论调试级别是什么。你应该只使用

```
logger.debug("expensive string representation, eg: {}", godObject); 
```

* * *

但是，这仍然不理想。它只保留调用`toString`和字符串连接。但是，如果您的日志消息需要一些其他昂贵的处理来创建消息，那将无济于事。就像您需要调用一些`expensiveMethod`来创建消息一样：

```
logger.debug("expensive method, eg: {}",
    godObject.expensiveMethod()); 
```

then`expensiveMethod`在传递给 之前总是被评估`logger`。为了让 slf4j 有效地完成这项工作，您仍然必须求助于

```
if (logger.isDebugEnabled())
    logger.debug("expensive method, eg: {}",
        godObject.expensiveMethod()); 
```

Scala 的名称调用在这方面有很大帮助，因为它允许您将任意一段代码包装到一个函数对象中，并仅在需要时评估该代码。这正是我们所需要的。例如，让我们看一下 [slf4s](https://github.com/weiglewilczek/slf4s)。这个库公开了类似的方法

```
def debug(msg: => String) { ... } 
```

为什么没有像 slf4j 中的参数`Logger`？因为我们不再需要它们了。我们可以只写

```
logger.debug("expensive representation, eg: " +
    godObject.expensiveMethod()) 
```

我们不传递消息及其参数，我们直接传递一段对消息进行评估的代码。但前提是记录器决定这样做。如果调试级别未打开，`logger.debug(...)`则不会评估其中的任何内容，整个事情都会被跳过。既没有`expensiveMethod`被调用，也没有任何`toString`调用或字符串连接发生。所以这种方法是最通用和最灵活的。您可以传递任何计算结果为 to 的表达式，`String`无论`debug`它有多复杂。

# python - 如何使用 cython 创建自定义 numpy dtype

> ID：13199218
> 
> 赞同：25
> 
> 时间：2012-11-02T16:21:48.793
> 
> 标签：python, numpy, cython

[这里](https://github.com/numpy/numpy-dtypes)有使用 C 创建自定义 numpy dtypes 的示例：

此外，[似乎可以](http://scipy-lectures.github.com/advanced/advanced_numpy/index.html#exercise-building-an-ufunc-from-scratch)在 cython 中创建自定义 ufunc：

似乎也应该可以使用 cython 创建一个 dtype（然后为其创建自定义 ufunc）。可能吗？如果是这样，你可以发布一个例子吗？

用例：

我想做一些生存分析。基本数据元素是具有相关审查值的生存时间（浮点数）（如果关联时间表示故障时间，则为假，如果它表示审查时间（即在观察期间没有发生故障），则为真）。

显然，我可以只使用两个 numpy 数组来存储这些值：一个用于时间的浮点数组和一个用于审查值的布尔数组。但是，我想考虑一个事件多次发生的可能性（这是一个很好的模型，比如说，心脏病发作 - 你可以有不止一个）。在这种情况下，我需要一个我称之为`MultiEvent`s 的对象数组。每个都`MultiEvent`包含一系列浮点数（未经审查的故障时间）和一个观察期（也是一个浮点数）。请注意，所有`MultiEvent`s 的失败次数并不相同。

我需要能够对`MultiEvent`s 数组执行一些操作：

1.  获取每个失败的次数

2.  获取删失时间（即观察时间减去所有失效时间的总和）

3.  根据其他参数数组（例如危险值数组）计算对数似然。例如，单个`MultiEvent` `M`恒定危险值的对数似然值`h`类似于：

    `sum(log(h) + h*t for t in M.times) - h*(M.period - sum(M.times))`

其中`M.times`是故障时间列表（数组，等等）并且`M.period`是总观察期。我希望应用适当的 numpy 广播规则，以便我可以执行以下操作：

```
log_lik = logp(M_vec,h_vec) 
```

只要 和 的尺寸兼容，它就可以`M_vec`工作`h_vec`。

我当前的实现使用`numpy.vectorize`. 这对于 1 和 2 来说效果很好，但对于 3 来说太慢了。还要注意，我不能这样做[，](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html)因为我的 MultiData 对象中的失败次数事先不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:32:12.163

Numpy 数组最适合固定大小的数据类型。如果数组中的对象不是固定大小的（例如您的 MultiEvent），则操作会变得慢得多。

我建议您将所有生存时间存储在具有 3 个字段的一维线性记录数组中：event_id、时间、周期。每个事件可以在数组中出现多次：

```
>>> import numpy as np
>>> rawdata = [(1, 0.4, 4), (1, 0.6, 6), (2,2.6, 6)]
>>> npdata = np.rec.fromrecords(rawdata, names='event_id,time,period')
>>> print npdata
[(1, 0.40000000000000002, 4) (1, 0.59999999999999998, 6) (2, 2.6000000000000001, 6)] 
```

要获取特定索引的数据，您可以使用精美的索引：

```
>>> eventdata = npdata[npdata.event_id==1]
>>> print eventdata
[(1, 0.40000000000000002, 4) (1, 0.59999999999999998, 6)] 
```

这种方法的优点是您可以轻松地将其与基于 ndarray 的函数集成。您还可以按照[手册](http://cython.readthedocs.org/en/latest/src/tutorial/numpy.html)中的说明从 cython 访问此数组：

```
cdef packed struct Event:
    np.int32_t event_id
    np.float64_t time
    np.float64_6 period

def f():
    cdef np.ndarray[Event] b = np.zeros(10,
        dtype=np.dtype([('event_id', np.int32),
                        ('time', np.float64),
                        ('period', np.float64)]))
    <...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:26:04.600

我很抱歉没有直接回答这个问题，但我以前也遇到过类似的问题，如果我理解正确，你现在遇到的真正问题是你有可变长度数据，这真的，真的不是numpy 的优势，这就是您遇到性能问题的原因。除非您事先知道多事件的最大条目数，否则您会遇到问题，即使那样，您也会浪费大量的内存/磁盘空间，这些空间为那些不是多事件的事件填充了零。

您有多个字段的数据点，其中一些与其他字段相关，其中一些需要分组标识。这强烈暗示您应该考虑使用某种形式的数据库来存储此信息，出于性能、内存、磁盘空间和完整性的原因。

对于一个不熟悉代码的人来说，理解一个简单的数据库模式要比理解一个复杂的、被黑客入侵的 numpy 结构要容易得多，后者会令人沮丧地缓慢和臃肿。相比之下，SQL 查询快速且易于编写。

根据我对您的解释的理解，我建议您使用 Event 和 MultiEvent 表，其中每个 Event 条目在相关的 MultiEvent 表中都有一个外键。

# z3 - Z3 量词支持

> ID：13199219
> 
> 赞同：7
> 
> 时间：2012-11-02T16:21:51.560
> 
> 标签：z3

我需要一个定理证明器来解决一些简单的线性算术问题。但是，即使是简单的问题，我也无法让 Z3 工作。我知道它是不完整的，但是它应该能够处理这个简单的例子：

```
(assert (forall ((t Int)) (= t 5)))
(check-sat) 
```

我不确定我是否忽略了某些东西，但这应该是微不足道的反驳。我什至尝试了这个更简单的例子：

```
(assert (forall ((t Bool)) (= t true)))
(check-sat) 
```

这应该可以通过详尽的搜索来解决，因为 boot 只包含两个值。

在这两种情况下，z3 的答案都是未知的。我想知道我是否在这里做错了什么，或者如果没有，您是否可以为这些类型的公式推荐一个定理证明器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:29:52.633

为了处理这种量词，您应该使用 Z3 中可用的量词消除模块。这是一个如何使用它的示例（在[http://rise4fun.com/Z3/3C3](http://rise4fun.com/Z3/3C3)在线尝试）：

```
(assert (forall ((t Int)) (= t 5)))
(check-sat-using (then qe smt))

(reset)

(assert (forall ((t Bool)) (= t true)))
(check-sat-using (then qe smt)) 
```

该命令`check-sat-using`允许我们指定解决问题的策略。在上面的示例中，我只是使用`qe`（量词消除）然后调用通用 SMT 求解器。请注意，对于这些示例，`qe`就足够了。

这是一个更复杂的例子，我们真的需要结合`qe`和`smt`（在线尝试：[http](http://rise4fun.com/Z3/l3Rl) ://rise4fun.com/Z3/l3Rl ）

```
(declare-const a Int)
(declare-const b Int)
(assert (forall ((t Int)) (=> (<= t a) (< t b))))
(check-sat-using (then qe smt))
(get-model) 
```

**编辑** 这是使用 C/C++ API 的相同示例：

```
void tactic_qe() {
    std::cout << "tactic example using quantifier elimination\n";
    context c;

    // Create a solver using "qe" and "smt" tactics
    solver s = 
        (tactic(c, "qe") &
         tactic(c, "smt")).mk_solver();

    expr a = c.int_const("a");
    expr b = c.int_const("b");
    expr x = c.int_const("x");
    expr f = implies(x <= a, x < b);

    // We have to use the C API directly for creating quantified formulas.
    Z3_app vars[] = {(Z3_app) x};
    expr qf = to_expr(c, Z3_mk_forall_const(c, 0, 1, vars,
                                            0, 0, // no pattern
                                            f));
    std::cout << qf << "\n";

    s.add(qf);
    std::cout << s.check() << "\n";
    std::cout << s.get_model() << "\n";
} 
```

# r - 加速运行 if.. else 在 R 中循环

> ID：13199221
> 
> 赞同：5
> 
> 时间：2012-11-02T16:21:56.227
> 
> 标签：r

有谁知道如何加快运行以下命令？我想用字符串替换数字“月”值……例如，第 1 个月转到“七月”。

这个命令真的很慢，因为我试图在其上实现它的数据框非常大！

```
for (i in 1:length(CO2$month)){
    if(CO2$month[i]=='1') {CO2$months[i]<-'Jul'} else
    if(CO2$month[i]=='2') {CO2$months[i]<-'Aug'} else
    if(CO2$month[i]=='3') {CO2$months[i]<-'Sept'} else
    if(CO2$month[i]=='4') {CO2$months[i]<-'Oct'} else
    if(CO2$month[i]=='5') {CO2$months[i]<-'Nov'} else
    if(CO2$month[i]=='6') {CO2$months[i]<-'Dec'} else
    if(CO2$month[i]=='7') {CO2$months[i]<-'Jan'} else
    if(CO2$month[i]=='8') {CO2$months[i]<-'Feb'} else
    if(CO2$month[i]=='9') {CO2$months[i]<-'Mar'} else
    if(CO2$month[i]=='10') {CO2$months[i]<-'Apr'} else
    if(CO2$month[i]=='11') {CO2$months[i]<-'May'} else
    if(CO2$month[i]=='12') {CO2$months[i]<-'Jun'}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:26:09.623

您可以在没有循环且没有 if-else 的情况下执行此操作：

```
set.seed(21)
CO2 <- data.frame(month=as.character(sample(1:12,24,TRUE)),
  stringsAsFactors=FALSE)
MonthAbbRotated <- month.abb[c(7:12,1:6)]
CO2$months <- MonthAbbRotated[as.numeric(CO2$month)] 
```

如果你的`month`专栏不是真正的人物，这更容易：

```
set.seed(21)
CO2 <- data.frame(month=sample(1:12,24,TRUE))
MonthAbbRotated <- month.abb[c(7:12,1:6)]
CO2$months <- MonthAbbRotated[CO2$month] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:35:57.583

我可能会遗漏一些东西，但为什么不只使用一个因素呢？

`CO2$month <- factor(CO2$month, levels=1:12, labels=c("Jul","Aug","Sept","Oct","Nov","Dec","Jan","Feb","Mar","Apr","May","Jun"))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:35:03.177

```
month =c("jul","aug","sep","oct","nov","dec","jan","feb","mar","apr","may","jun")

for (i in 1:length(CO2$month)){ CO2$month[i] = month[as.integer(CO2$month[i])]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T16:36:42.223

这也可以工作，即使它是用于没有类似`month.abb`使用的简洁功能的东西：

```
Mon <- data.frame(month=1:12, months=c("Jul","Aug","Sept","Oct","Nov","Dec",
                                "Jan","Feb","Mar","Apr","May","Jun"))
CO2 <- merge(CO2, Mon, by="month", all.x=TRUE) 
```

# android - 如果程序强制停止，警报不会响起

> ID：13199223
> 
> 赞同：0
> 
> 时间：2012-11-02T16:22:04.083
> 
> 标签：android

我有一个警报应用程序，我认为它是使用`AlarmManager`and以标准方式编程的`BroadcastReceiver`。我什至添加了代码，以便在重新启动后警报保持活动状态。几个星期以来，我一直在毫无问题地使用该程序。

我被引导相信以这种方式做事意味着不必让我的警报程序一直运行，但令我恐惧的是，我刚刚发现如果我设置了警报然后强制停止我的警报应用程序，然后闹钟永远不会响起。

我不确定这是否意味着我在编码中犯了错误，或者我被误导相信即使应用程序停止也可以保持警报设置。

也许操作系统以某种方式检测到我的警报应用程序正在运行警报，因此避免将其关闭？因此，只要用户不*手动*强制停止，那么一切都会好起来的。

有任何想法吗？

**编辑：**我刚刚测试了“Alarm Clock Xtreme”。我设置了闹钟。然后强制停止了……警报没有响起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:31:44.483

如果您的应用程序被强制关闭，这是预期的行为。但是，如果用户通过返回或主页按钮等正常方式离开应用程序，警报应该会继续按预期工作。

参见：[关闭应用后取消Android闹钟](https://stackoverflow.com/questions/4643850/android-alarm-is-cancelled-after-closing-the-application)

# java - WebDriver FluentWait - 函数/谓词可以抛出异常吗？

> ID：13199224
> 
> 赞同：0
> 
> 时间：2012-11-02T16:22:05.147
> 
> 标签：java, selenium, webdriver, guava

我正在将 Selenium 的`By`类扩展为一个更广泛的`Locator`类，它可以接受不同类型的位置标准，并将为我们的`SearchContext`和/或版本提供新的方法`WebDriver`。

我有以下方法等待唯一元素存在、显示和启用：

```
public void waitForElementPresent(BSWebDriver driver, int timeoutSeconds) {
    try {
        FluentWait<BSWebDriver> wait = new FluentWait<BSWebDriver>(driver)
                .withTimeout(timeoutSeconds, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        wait.until(new Function<BSWebDriver, Boolean>() {
            public Boolean apply(BSWebDriver driver)  {
                return isElementPresent(driver);
            }
        });
    } catch (TimeoutException timeoutEx) {
        throw new WaitForElementException(this, timeoutSeconds,
                WAIT_FOR.PRESENT);
    }
} 
```

`isElementPresent`是一种处理检查元素是否存在（即它存在、显示和启用）但无需等待的方法。问题在于，如果定位器没有唯一标识一个元素（即，如果返回多个与位置条件匹配的元素），则会`isElementPresent`引发自定义错误。`Exception`上述代码中当前存在编译错误，因为据我所知，既不允许`Function`也`Predicate`不允许抛出`Exception`，也没有任何子类可以。

有没有办法做到这一点？是否有某种形式的*或可以*`Function`抛出`Predicate`异常，例如 Java 的vs. ？如果没有，我想我可能只需要编写自己的等待功能版本。谢谢！*`Callable``Runnable`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:53:24.037

如果你让你的自定义异常抛出扩展 RuntimeException 而不是 Excetion 你应该能够很好地抛出它。*

# javascript - 使用 Javascript / JQuery 动态创建具有不同点击事件处理程序的多个 HTML 按钮

> ID：13199225
> 
> 赞同：1
> 
> 时间：2012-11-02T16:22:12.890
> 
> 标签：javascript, jquery, button, dynamic, click

我正在尝试使用 Javascript / JQuery 来动态创建几个 HTML 按钮，每个按钮在单击时都会执行不同的操作。

我的第一次尝试是这样的：

```
function myFunc( target_div, num_buttons ) {
    var buttons="";
    for ( var i=0; i<num_buttons; i++ ) {
        buttons += '<input type="button" id="button_'+i+'" value="button_'+i+'"></input>';
    }
    target_div.html( buttons );
    var doButtonPress = function( i ) {
        alert( i ); // I actually do something more complicated here, but it's not important now
    }
    for ( var i=0; i<num_buttons; i++ ) {
        $('#button_'+i).click( function() { doButtonPress(i); } );
    }
} 
```

不幸的是，这不起作用，因为（我认为）当点击事件发生时，doButtonPress 总是在 myFunc 的范围内传递 i 的当前值，而不是 - 如我所愿 - 定义点击事件时的值。因此，无论按下哪个按钮，传递给 doButtonPress 的值始终等于 num_buttons。所以我然后尝试了这个：

```
$('#button_'+i).click( new Function( "doButtonPress("+i+");" ) ); 
```

不幸的是，这也不起作用 - 我收到一条消息“ReferenceError：找不到变量：returnResult”。我认为这是因为在单击事件发生之前不会解析 Function 构造函数的 arg 值，而那时我已经超出了 myFunc 的范围，所以 doButtonPress 未定义？到目前为止，我做得对吗？

所以……我该怎么办？:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:26:50.730

您的代码不起作用，因为变量的范围`i`总是`num_button`在处理程序中。您可以通过将其包装在 a 中来修复它，`closure`但如何通过添加一个类并使用按钮的 id 来简化它。

```
function myFunc( target_div, num_buttons ) {
    var buttons="";
    for ( var i=0; i<num_buttons; i++ ) {
        //                             added class ----------------v
        buttons += '<input type="button" id="button_'+i+'" class="mybuttons" value="button_'+i+'"></input>';
    }
    target_div.html( buttons );
    var doButtonPress = function( i ) {
        alert( i ); // I actually do something more complicated here, but it's not important now
    }

    //yes, mybuttons exist 
    $('.mybuttons').click(function () {
         doButtonPress(this.id.replace('button_', ''));
         //this.id.replace('button_', '') <- returns i value
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:30:45.203

我的建议是`data`为每个按钮分配一个属性，然后在单击按钮时可以读取该属性。这将避免对不必要的（和丑陋的）增量`id`属性的需要。像这样的东西：

```
function myFunc($target_div, num_buttons) {
    var buttons = [];
    for (var i = 0; i < num_buttons; i++) {
        buttons.push($('<input type="button" class="button" data-id="' + i + '" value="button ' + i + '" />'));
    }
    $target_div.append(buttons);

    var doButtonPress = function() {
        alert($(this).data('id'));
    }

    $(".button").click(doButtonPress);
} 
```

[**示例小提琴**](http://jsfiddle.net/v8kju/)

# asp.net - ASP.NET WebForms 4.5 - 不显眼的验证架构

> ID：13199226
> 
> 赞同：2
> 
> 时间：2012-11-02T16:22:15.163
> 
> 标签：asp.net, validation, webforms, unobtrusive-validation

有没有人知道在哪里呈现不显眼的验证元素？什么控制或类负责？

示例场景：

```
<asp:FormView runat="server" ID="fvMain" ... DefaultMode="Edit">
 <EditItemTemplate>
  <asp:DynamicControl runat="server" DataField="Order" Mode="Edit">
  </asp:DynamicControl>
 </EditItemTemplate>
</asp:FormView> 

public class Entity
{
 public int Order { get;set; }
} 
```

呈现RegularExpressionValidator、RangeValidator、CompareValidator、RequiredFieldValidator...谁负责？

非常感谢您的回答，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T23:00:52.403

看看[https://davalidation.codeplex.com](https://davalidation.codeplex.com)。这里有一篇文章的链接，解释了更多关于 .NET 中的验证框架[http://amanek.com/building-data-annotations-validator-control-with-client-side-validation/](http://amanek.com/building-data-annotations-validator-control-with-client-side-validation/)

# jquery - $.ajax 回调函数中的作用域

> ID：13199231
> 
> 赞同：1
> 
> 时间：2012-11-02T16:22:35.470
> 
> 标签：jquery, ajax, callback, scope

如果我使用此代码，为什么“doStuff”警报的范围发生了变化？有没有办法可以确保范围是我的对象而不是 Window 对象？

这是[jsfiddle](http://jsfiddle.net/RW4Ge/1/)中的相同代码。

```
(function ($) {
    var c$ = {};

    c$.TestScope = function () {

        this.doAjax = function (onComplete) {
            var self = this;
            $.ajax({
                url: 'badurl',
                complete: function (data) {
                    alert('doAjax2 self === c$.oTestScope: ' + (self === c$.oTestScope).toString());
                    onComplete(data);
                }
            });
            alert('doAjax1 self === c$.oTestScope: ' + (self === c$.oTestScope).toString());  
        };

        this.doStuff = function (data) {
            var self = this;
            alert('doStuff self === c$.oTestScope: ' + (self === c$.oTestScope).toString());
        }

    };

    c$.oTestScope = new c$.TestScope();
    c$.oTestScope.doAjax(c$.oTestScope.doStuff);
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:35:55.793

您应该能够将`this`值指定为参数中的上下文`$.ajax()`：

```
var c$ = {};

c$.TestScope = function() {

    this.doAjax = function(onComplete) {

        alert('doAjax1 this === c$.oTestScope: ' + (this === c$.oTestScope).toString());

        $.ajax({
            url: 'badurl',
            context: this,
            complete: function(data) {
                alert('doAjax2 this === c$.oTestScope: ' + (this === c$.oTestScope).toString());
                onComplete.call(this, data);
            }
        });
    };

    this.doStuff = function(data) {
        alert('doStuff this === c$.oTestScope: ' + (this === c$.oTestScope).toString());
    }

};

c$.oTestScope = new c$.TestScope();
c$.oTestScope.doAjax(c$.oTestScope.doStuff); 
```

**编辑**我为此做了一个[小提琴](http://jsfiddle.net/slashingweapon/S7fZJ/)并验证它可以正常工作。没有乱用额外的`self`参数，也不必乱用闭包来保留你的变量。

您缺少的部分内容是调`onComplete.call(this, data)`​​用调用`doStuff()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:29:20.680

我已更改您的代码以将引用传递给`this`doStuff() 代码。

```
(function ($) {
    var c$ = {};

    c$.TestScope = function () {

        this.doAjax = function (onComplete) {
            var self = this;
            $.ajax({
                url: 'badurl',
                complete: function (data) {
                    alert('doAjax2 self === c$.oTestScope: ' + (self === c$.oTestScope).toString());
                    onComplete(data,self);
                }
            });
            alert('doAjax1 self === c$.oTestScope: ' + (self === c$.oTestScope).toString());  
        };

        this.doStuff = function (data,thisRef) {
            var self = thisRef;
            alert('doStuff self === c$.oTestScope: ' + (self === c$.oTestScope).toString());
        }

    };

    c$.oTestScope = new c$.TestScope();
    c$.oTestScope.doAjax(c$.oTestScope.doStuff);
})(jQuery);​ 
```

# php - 无法输入数据：“字段列表”中的未知列“emp_salary”

> ID：13199233
> 
> 赞同：-2
> 
> 时间：2012-11-02T16:22:42.090
> 
> 标签：php, mysql

这是导致我粘贴在标题中的错误的代码。我很确定错误来自查询，但无法弄清楚。

我尝试的最后一件事是您可以在此处看到的“真正的逃生”功能，我在其他一些相同类型的问题中发现了该功能；仍然是同样的错误。我从编码开始，可能只是愚蠢......无论如何，谢谢你的帮助！

```
<?php
if(isset($_POST['add']))
{
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'boom';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
  die('Could not connect: ' . mysql_error());
}

if(! get_magic_quotes_gpc() )
{
   $emp_name = addslashes ($_POST['emp_name']);
   $emp_address = addslashes ($_POST['emp_address']);
   $emp_salary = addslashes ($_POST['emp_salary']);
}
else
{
   $emp_name = $_POST['emp_name'];
   $emp_address = $_POST['emp_address'];
   $emp_salary =  $_POST['emp_salary'];
}

$sql = "INSERT INTO employee (emp_name,emp_address,emp_salary) 
   VALUES('".mysql_real_escape_string($emp_name)."','".mysql_real_escape_string($emp_address)." ','".mysql_real_escape_string($emp_salary)." ')";

mysql_select_db('test_db');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not enter data: ' . mysql_error());
}
echo "Entered data successfully\n";
mysql_close($conn);
}
else
{
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:26:44.177

创建在相应表中命名的列`emp_salary`。

你不能使用`mysql_`函数族，因为你更容易受到 SQL 攻击。

使用 mysqli 或更好地使用 PDO

# sql-server - 仅对列中的单个值进行索引

> ID：13199234
> 
> 赞同：0
> 
> 时间：2012-11-02T16:22:45.713
> 
> 标签：sql-server, tsql, indexing

我有一个表，我在其中使用引用计数来删除过时的行。为了有效地做到这一点，我想创建一个索引，只索引表中的行，其中引用计数为 0。这可能吗，还是我最好使用视图或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:24:04.247

听起来您想使用过滤索引。也许是这样的：

```
CREATE NONCLUSTERED INDEX MyIndex
ON MyTable(MyColumn)
WHERE ReferenceCount = 0 
```

[您可以在此处](http://blog.sqlauthority.com/2008/09/01/sql-server-2008-introduction-to-filtered-index-improve-performance-with-filtered-index/)了解有关它们的更多信息

# php - 使用 RexEx 在具有自定义格式的文件中查找语法错误

> ID：13199237
> 
> 赞同：0
> 
> 时间：2012-11-02T16:22:48.657
> 
> 标签：php, regex, syntax-error, text-processing

我有一个大文本文件（144000 行），其自定义格式如下：

```
xxx
XXXfield1XXX
value1
xxx
xxx
XXXfield2XXX
value2
xxx
xxx
XXXfield3XXX
value3
xxx 
```

但是文件中存在语法错误（可能更多）（因为文件的总行数不可分为四）

如何仅使用 **RegExp**找到错误的行号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:25:01.137

检测错误很容易..想象一下

日志.txt

```
xxx
XXXfield1XXX
value1
xxx
xxx
XXXfield2XXX <----- Note that this field has no value 
xxx
xxx
XXXfield3XXX
value3
xxx
value3
xxx 
```

简单的扫描仪

```
$fileSource = "log.txt";
$tagRow = "xxx";
$tagField = "XXX";

$rh = fopen($fileSource, 'rb');
if (!$rh) {
    trigger_error("Can't Start File Resource");
}
echo "<pre>";
$i = 0;
while ( ! feof($rh) ) {
    $l = trim(fgets($rh));
    if ((($i % 4) == 0 || ($i % 4) == 3) && $l != $tagRow) {
        echo "Row tag error line $i \n";
        break;
    }

    if (($i % 4) == 1 && strpos($l, $tagField) !== 0) {
        echo "Missing Field tag line $i  \n";
        break;
    }

    if (($i % 4) == 2 && (strpos($l, $tagRow) === 0 || strpos($l, $tagRow) === 0)) {
        echo "Fixed Missing Value line $i \n";
        break;
    }
    $i ++;
}
fclose($rh); 
```

输出

```
 Fixed Missing Value line 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:07:43.700

编写一个程序来读取文件，一次一行，然后解析它。如果一行与格式不一致，则报错并退出。

在阅读每一行时，请跟踪行号。`%`使用运算符和 switch 语句基于行号进行测试。

```
switch ($linecount % 4) {
    case 0:
        $error = (some condition that evaluates the line);
        break;
    case 1:
        $error = (some condition that evaluates the line);
        break;
    case 2:
        $error = (some condition that evaluates the line);
        break;
    case 3:
        $error = (some condition that evaluates the line);
        break;
}
if ($error) {
    echo 'Error on line ' . $linenum . ': ' . $line;
    exit;
} 
```

# objective-c - iOS6将不同的子视图放入现有的子视图中

> ID：13199238
> 
> 赞同：0
> 
> 时间：2012-11-02T16:22:55.517
> 
> 标签：objective-c, xcode, ios6

我有一个带有分段控件和目标视图的 xib 文件。我在这个 zib 文件中添加了其他三个子视图。当用户选择分段控件时，我想将适当的子视图放入目标视图中。我无法显示适当的子视图。这是我的代码：

```
// putting all 3 views in the target frame
self.activationView.frame = self.targetView.frame;
self.preferencesView.frame = self.targetView.frame;
self.aboutView.frame = self.targetView.frame;

// show the appropriate frame
self.targetView.hidden = YES;
self.preferencesView.hidden = YES;
self.aboutView.hidden = YES;

self.activationView.hidden = NO; 
```

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:34:17.513

尝试以下

```
 [UIView transitionFromView:SourceView 
                            toView:DestinationView
                          duration:0.5 
                           options:(UIViewAnimationOptionTransitionFlipFromRight)
                        completion:^(BOOL finished) {
                            if (finished) 
                            {
                                NSLog(@"Changed View");
                            }
                        }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:28:31.073

你确定这3个视图不是targetView的子视图吗？如果是这样，那么如果您隐藏 targetView，您也将无法看到子视图。

# regex - EDI 的 Powershell 正则表达式模式

> ID：13199240
> 
> 赞同：3
> 
> 时间：2012-11-02T16:23:11.417
> 
> 标签：regex, powershell, edi

Powershell/Regex/EDI 的新手。请不要评论为什么不应该使用 EDI 的正则表达式来完成，我已经看到了警告，但别无选择。

我需要的很可能是基本的，但我需要一些帮助。我必须找到一个段的所有实例，并从中检索一个特定的元素值。正在搜索的文本将被读取为一个长字符串，没有 CR/LF/等。

示例数据：

```
~SV1*HC:V2020*35*UN*1***1~DTP*472*D8*20120807~REF*6R*
~SV1*HC:V2100:LT*28.98*UN*1***1~DTP*472*D8*20120807~REF*6R*
~SV1*HC:92014*165*UN*1***1~DTP*472*D8*20120716~REF*6R* 
```

我在另一个段上使用以下命令，它就像我想要的那样工作，但它也不必考虑非单词字符：

```
Select-String -pattern '~svd\*\w+\*(\d+|\d+\.\d+)\*' -input $string -AllMatches | %{$_.Matches} | %{$_.Groups[1]} | %{$_.Value} 
```

理想情况下，我想找到一个“~SV1*”的实例，跳到下一个星号，然后通过下一个星号阅读所有内容。这样，那里的字母/数字/字符无关紧要，它会跳过它。在上面的数据示例中，我希望返回 35、28.98、165。如果没有，那么我可以使用我所拥有的，但是匹配单词/非单词字符的组合让我很困惑，因为我不知道它们可能存在的顺序。我玩过的其他所有东西都继续拉动其余的弦，并且没有正确停止。

如果我能做到这一点，我会很高兴：

```
~SV1*<skip this>*<get this>*<skip to next SV1>~SV1*<skip this>*<get this>*<skip to next SV1> 
```

最后，被提取的数据是一个货币字段，因此它可能有也可能没有小数。如果有比 (\d+|\d+.\d+) 更清洁的方法，我完全赞成。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:42:00.800

一个起点，但您需要对其进行测试：

```
Select-String -pattern '(?<=~sv\d\*.*\*)(\d*\.?\d+)(?=\*un)' -input $string -AllMatches | %{$_.Matches} | % {$_.Groups[1]} | %{$_.Value} 
```

使用您的示例数据返回 35、28.98、165。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:58:08.250

使用这样的模式：

```
 ~sv\d\*[^*]*\*([^*]*)\* 
```

# asp.net-mvc-4 - 在哪里从用户名中删除域？ASP.NET MVC 4

> ID：13199243
> 
> 赞同：1
> 
> 时间：2012-11-02T16:23:16.970
> 
> 标签：asp.net-mvc-4, asp.net-authentication

这是一个用 MVC 4 编写的内部网应用程序，需要用户登录。从用户输入的用户名中删除域的最佳位置在哪里？( `Username.Name.Split('\')[1];`)。这是在用户进入域的情况下。

**看法：**

```
@Html.ValidationSummary(true, "Login failed.")
@using (Html.BeginForm())
{
    <div style="width: 400px">
        <fieldset>
            <legend>Account Information</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.Username)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Username)
                @Html.ValidationMessageFor(m => m.Username)
            </div>
            ... 
```

**登录型号：**

```
[Required]
[Display(Name = "Username")]
public string Username { get; set; }
.... 
```

**控制器：**

```
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
        {
        if (Membership.ValidateUser(model.Username, model.Password))
            {
                //set authentication cookie
                ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:32:25.670

如果您只想要用户名而不是域，为什么不尽早验证，例如不要在用户名中全部使用 \。正如您所建议的那样，在登录操作中始终有服务器验证来支持这一点，例如

```
if(model.UserName.Contains('\')  
         model.UserName = model.Username.Name.Split('\')[1]; 
```

如果始终是同一个域，请将域名放在文本框旁边，以明确它不是被要求的。

# c++ - 如何用 C++ 连续编写一个文本文件并同时由其他程序（不是 c++）连续读取同一个文本文件？

> ID：13199246
> 
> 赞同：1
> 
> 时间：2012-11-02T16:23:25.457
> 
> 标签：c++, visual-studio, file, real-time

我正在使用 VC++ 生成一个文本文件并连续写入（通过 fstream）数据。我有另一个应用程序2（不是 C++），它访问 C++ 附加的同一个文件。在应用程序2 访问该文件的瞬间，来自 C++ 程序的新数据无法写入该文件。似乎来自 c++ 的新数据进入了某个临时文件。当 application2 关闭文件时，新数据会更新到文件中。我希望将数据实时写入文件并由application2同时读取。我应该在 c++ 中做什么才能使新数据出现在 application2 打开的文件中？

C++ 方面：

```
int realTimeValues  // this variable is updated continuously

FILE * pFileTXT; 

while(1)
{
 pFileTXT = fopen ("realTimeData.txt","a"); // Opening file in append mode
 fprintf (pFileTXT, "%d\n",realTimeValues);   // saving values to file
 fclose (pFileTXT)                            // Closing the file
} 
```

在 application2 方面，我不知道它是如何打开这个文件的。该应用程序是通用实时软件示波器。在菜单中有一个选项“从文件中读取”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:56:25.273

啊。有很多事情在起作用：

1.  默认情况下，fprintf 输出可能会缓冲在私有 ram 缓冲区中。此缓冲区仅在需要时或在您执行 fclose 时刷新。如果您想强制输出数据，您可以调用 setbuf（阅读文档）或在每个 fprintf 之后显式调用 fflush。
2.  我不知道 fopen 是否允许同时阅读。考虑到缓冲行为，可能不会。如果您想要读/写共享，您应该查看文档以查看是否有显式模式参数来启用此功能。
3.  不幸的是，这只涵盖了您可以控制的部分。如果阅读器（您无法控制的应用程序）不支持共享阅读，那么您就不走运了。

# python - Django中的子域问题

> ID：13199247
> 
> 赞同：1
> 
> 时间：2012-11-02T16:23:30.900
> 
> 标签：python, django, subdomain, middleware

我正在尝试设置一个中间件，该中间件将读取请求中的子域并根据子域提供不同应用程序的 urls.py ......但我遇到了一些不稳定的行为

这是我的中间件：

```
class SubdomainsMiddleware:
def process_request(self, request):
    request.domain = request.META['HTTP_HOST']
    request.subdomain = ''
    parts = request.domain.split('.')

    if len(parts) == 3 or (re.match("^localhost", parts[-1]) and len(parts) == 2):
        request.subdomain = parts[0]
        request.domain = '.'.join(parts[1:])

    # set the right urlconf
    if request.subdomain == 'foo':
        settings.ROOT_URLCONF = 'bqsite.urls'
    else:
        settings.ROOT_URLCONF = 'dhsite.urls' 
```

我的理解是，如果这行得通，那么项目的根 urls.py 永远不应该被击中。那是对的吗？我变得非常奇怪和不稳定的行为，如果我重新启动 apache，该站点会显示 django 欢迎屏幕，但在 refrshing 使用正确的 urls 文件之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:40:21.743

您[不应该在运行时更改您的设置](https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime)。

更好的方法是设置请求`urlconf`设置，如[*django 如何处理*](https://docs.djangoproject.com/en/dev/topics/http/urls/#how-django-processes-a-request)url 文档中的请求部分所述。

```
if request.subdomain == 'foo':
    request.urlconf = 'bqsite.urls'
else:
    request.urlconf = 'dhsite.urls' 
```

# javascript - 如何在 Javascript 中对整数数组、整数字母组合和范围进行排序？

> ID：13199251
> 
> 赞同：0
> 
> 时间：2012-11-02T16:23:38.177
> 
> 标签：javascript, arrays, node.js, sorting, underscore.js

我有一个奇怪的数组，我需要以某种方式进行排序，我不确定如果没有大量的体力劳动它是否可行。

考虑数组：`[ '1a', '2a', '2aa', '5-6', '1', '2', '3', '20' , '7', '8']`

它是一个字符串数组。正确排序，它看起来像：

`[ '1', '1a', '2', '2a', '2aa', '3', '5-6', '7', '8', '20' ]`

把它想象成一个大纲编号系统。

我怎样才能按这个顺序排序？

这是一个 jsfiddle，显示了常规排序如何使用其默认的字典行为来处理它（它实际上非常接近它所需要的）：

[http://jsfiddle.net/qkE9m/](http://jsfiddle.net/qkE9m/)

我在 node.js 工作，并且可以使用 underscore.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:13:35.403

好的，这是我解决这个问题的尝试。该代码现在非常冗长，但我正在研究如何缩小它，并将在我进行时更新我的​​答案。这应该足以解决问题，让您移动。我会将我的代码作为节点模块发布，因为那是你的环境。

它的要点是它将项目分解成可以单独分类的单独部分。它并行循环这些数组中的每一个，一旦发现不匹配，它将运行基本的排序比较。

### 排序器.js

```
// regex patterns to determine how to "parse" an input item
var patterns = [
    /^([a-zA-Z]+)$/,                      // only letters
    /^(\d+)$/,                          // only contains an integer
    /^(\d+)\-\d+$/,                     // contains 2 integers separated by a hyphen
    /^(\d+)([a-z]+)?\-(\d+)([a-z]+)?$/, // contains a 2 integer/letter combos separated by a hyphen
    /^(\d+)([a-z]+)$/                   // contains an integer followed by letters
];

function itemComparator(item) {
    var len = patterns.length,
        matches, x, regex;

    for (x = 0; x < len; x++) {
        regex = patterns[x];
        if (regex.test(item)) {
            matches = item.match(regex).slice(1);
            if (/^\d+$/.test(matches[0])) {
                matches[0] = parseInt(matches[0], 10);
            }
            return matches;
        }
    }

    throw new Error("could not parse item for comparison: " + item);
}

module.exports = function (a, b) {
    var compA = itemComparator(a),
        compB = itemComparator(b),
        x, len, tmpA, tmpB, typeA, typeB; // tmp vars

    // find the largest size, so we don't miss anything
    len = Math.max(compA.length, compB.length);

    // loop each comp arr in parallel
    for (x = 0; x < len; x += 1) {
        // store for speed
        tmpA = compA[x];
        tmpB = compB[x];
        typeA = typeof tmpA;
        typeB = typeof tmpB;

        // if the elements are not equal
        if (tmpA !== tmpB) {
            // then do the comparison, and stop the loop
            if (typeA === typeB) {
                return tmpA < tmpB ? -1 : 1;
            } else if (typeA === "undefined") {
                return -1;
            } else if (typeB === "undefined") {
                return 1;
            } else if (typeA === "string") {
                return -1;
            } else if (typeB === "string") {
                return 1;
            } else {
                console.warn("unexpected condition for %s (%s) and %s (%s)", tmpA, typeA, tmpB, typeB);
                return 0;
            }
        }
    }
}; 
```

### 测试.js

```
var sorter = require("./sorter"),
    arr = [
        '1a', 'aa', '2a', '2aa', '5-6', '1', '2', '3', 'DBA', 'bb',
        '20', '2b', '7', '8', '125a', '33a-35', 'ABC',
        '3aaa-4c', '3aaa-52d', 'AA', 'c', '5dd', 'aa'
    ];

console.log(arr.sort(sorter));

// [ 'AA',
//   'ABC',
//   'DBA',
//   'aa',
//   'aa',
//   'bb',
//   'c',
//   '1',
//   '1a',
//   '2',
//   '2a',
//   '2aa',
//   '2b',
//   '3',
//   '3aaa-4c',
//   '3aaa-52d',
//   '5-6',
//   '5dd',
//   '7',
//   '8',
//   '20',
//   '33a-35',
//   '125a' ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:30:50.040

我不知道您的实际数据是什么样的，但这应该会推动您朝着正确的方向前进，我认为：

```
[ '1a', '2a', '2aa', '5-6', '1', '2', '3', '20' , '7', '8'].sort(function(a,b)
{
    if (parseFloat(a) !== parseFloat(b))
    {
        return parseFloat(a) - parseFloat(b);
    }
    if (a.charAt(0) !== b.charAt(0))
    {//just to be on the safe side
        return +(a[0]) - +(b[0]);
    }
    return a.length - b.length;
});
//result:
["1", "1a", "2", "2a", "2aa", "3", "5-6", "7", "8", "20"] 
```

# magento - 必须加载 PHP 扩展“curl”

> ID：13199254
> 
> 赞同：9
> 
> 时间：2012-11-02T16:23:49.450
> 
> 标签：magento, magento-1.7

我正在尝试在我的服务器上安装 Magento，当我进入“配置”时，安装启动：必须加载 PHP 扩展“curl”。

我检查了我的 php.ini，**extension=php_curl.dll**没有被注释。对于 Apache 和 PHP 文件夹。我还检查了我的 Wamp 管理器，它看起来像这样：

![我的 PHP 信息](../Images/f5f297a3d74ae800b87cc434d87900e9.png).

所以我想我的 php_curl 工作正常......但是当我安装 Magento 时我仍然收到相同的消息：

![我的 Magento 安装](../Images/7c13771ec71a7384347df9a9badb4b88.png).

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T16:26:36.280

我有同样的问题。wamp 中的**mod_curl**扩展有一个错误。

您可以将其替换为较新的版本。我不知道您使用的是哪个 PHP 版本，但在这里您可以下载更新的版本。下载该模块的 TS (TheadSafe) 版本并将其替换为您现有的 curl 模块。

[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

还有一个有用的帖子：

[http://forum.wampserver.com/read.php?2,85716](http://forum.wampserver.com/read.php?2,85716)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T13:34:24.620

[通过从http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)下载 将旧的替换`php_curl.dll`为新的 。现在它的工作。这是最近的wamp安装包的错误。`\wamp\bin\php\php5.4.3\ext\`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T10:58:57.763

您必须修改 xampp 文件夹中的 php.ini 文件。需要更改三个不同位置的三个文件。

按照以下步骤在 Windows 中使用 XAMPP 启用 curl 库：

**步骤1：**

浏览并打开以下3个文件

```
C:\Program Files\xampp\apache\bin\php.ini
C:\Program Files\xampp\php\php.ini
C:\Program Files\xampp\php\php4\php.ini 
```

**第2步：**

通过删除分号 (;) 取消注释 php.ini 文件中的以下行。

```
;extension=php_curl.dll 
```

之后它看起来像下面的东西 -

```
extension=php_curl.dll 
```

**第 3 步：**

重新启动您的 Apache 服务器。

**第4步：**

检查您的 phpinfo() 以查看 curl 是否已正确启用。

喜欢使用 curl() 库。

# jquery - jQuery Mobile 固定页脚与文本滚动一次然后在 iOS 应用程序中停止

> ID：13199258
> 
> 赞同：1
> 
> 时间：2012-11-02T16:24:04.710
> 
> 标签：jquery, css, scroll, footer, css-position

我使用 jquery-mobile (1.1.1) 和 Adob​​e PhoneGap Build 创建了一个 iOS 应用程序。该应用程序具有固定的页眉和页脚，并且转换设置为“无”。页脚包含 4 个导航按钮，通过 javascript 提供导航到应用程序内的四个页面。我使用了一个多页模板，所以只有一个 HMTL 文件。

最初，我使用“data-position:fixed”在屏幕上定位页眉和页脚，但在页面之间切换时遇到了一些不必要的闪烁和页面跳转。因此，我转而使用 CSS 将页眉和页脚固定到屏幕上（如本文所述：[https](https://github.com/jquery/jquery-mobile/issues/4024) ://github.com/jquery/jquery-mobile/issues/4024 ）。这解决了闪烁问题，但引入了不同的问题。

问题是：我**第一次**滚动文本时，在任何页面上，页脚都会随着文本移动（即它不会保持固定）。但只是第一次 - 从那时起，每当我滚动文本时，页脚都会保持不变。为了澄清，这里有几个例子：

*示例 1*

*   打开应用程序，在第一页滚动文本 - 页脚移动。
*   切换到第二页，滚动文本 - 页脚保持固定。

*示例 2*

*   打开应用程序，无需在第一页滚动即可切换到第二页 - 页脚在第二页上移动。
*   切换回第一页，页脚保持固定。

我应该提到的另一件事 - 如果我启用页面转换，那么问题只会发生在第一页上。例如。如果应用程序加载并且我在没有先滚动第一页上的文本的情况下切换到另一个页面，则页脚保持不变。

任何有关解决此问题的方法的建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:43:01.370

我刚刚遇到了完全相同的问题，并在应用程序启动时使用以下 hack 修复了它。请注意，我们在使用 Phonegap/Cordova 方法手动隐藏启动屏幕之前运行此 .js 片段。这应该可以防止在用户看到主屏幕之前出现任何闪烁/移动。

```
function fixJqmScrollBug() {
    window.scrollTo(0, 1);
    setTimeout(function() {
        window.scrollTo(0, 0);
        if( navigator && navigator.splashscreen ) navigator.splashscreen.hide()
    }, 20);
} 
```

此代码模拟第一次打破固定页脚的初始滚动，但将其放回默认位置。我们不得不稍微延迟重新定位回滚动 (0,0) 以使修复工作 - 因此 20 毫秒超时。

# ruby-on-rails - Rails ActiveRecord Mongoid 对象

> ID：13199266
> 
> 赞同：1
> 
> 时间：2012-11-02T16:24:40.617
> 
> 标签：ruby-on-rails, activerecord, mongoid

在我的用户模型中，我有

```
field :contact_info, :default=>{}
field :info, :default=>{} 
```

我怎么能创建一个 User.new`contact_info.[some key]`

`[some key]`是用户自己提供的钥匙

# c++ - 在 Qt 服务器上对用户进行身份验证

> ID：13199267
> 
> 赞同：3
> 
> 时间：2012-11-02T16:24:44.967
> 
> 标签：c++, qt

我正在尝试使用 C++/QtTcpSocket 为个人项目（多人国际象棋游戏）实现身份验证系统。

我的朋友建议了一种验证用户的方法，但我想问是否有更简单或更好的方法。来自 Python 背景，主要从事这个项目是为了加深对 C++ 的理解。

我将发布我朋友建议的方法，并寻求更好的解决方案。

他以一种伪代码方式构建它。服务器主要是构建的，我现在希望实现身份验证

*干杯

```
void process_packet(PACKET *pkt)
{
    switch(pkt->PacketID)
    {
        case 0: // let's say packet id 0 is the logon packet; packet contents are username and password
        {
            //let's say packet size is 101 bytes; packet id was already received, so get the other 100 bytes
            unsigned char BUFFER[101] = {0}; // i always add an extra byte to the end of the buffer to allow for off-by-one errors ^_^

            int result = recv_packet(pkt->cSocket, 100, BUFFER);

            if(result <= 0)
                return; // connection error; no packet data was received

            unsigned char *UserName = BUFFER+0; //+0 is not neccessary, but the username starts at the beginning. just getting the point across.
            unsigned char *PassWord = BUFFER+50;

            //side note: if we did "unsigned long *blah = BUFFER+4" or something, we would have to make sure the byte order is right. network byte order is BIG ENDIAN
            //  WINDOWS byte order is LITTLE ENDIAN

            result = QueryDatabase("SELECT username, password FROM chess_players WHERE username = '%s'", FILTER_INVALID_CHARS(UserName));

            // check result

            unsigned char ServerResponse[2] = {0};

            if(result['password'] == PassWord)
            {
                ServerResponse[0] = 1; // packet id will be 1\. the next byte can be 1 or 0 to indicate logon success or failure.
                ServerResponse[1] = true; // so packet 0x0101 mean logon success, packet 0x0100 means logon failure
                send_packet(pkt->cSocket, ServerResponse, 2);
            } else {

                ServerResponse[0] = 1;
                ServerResponse[1] = false;
                send_packet(pkt->cSocket, ServerResponse, 2);
            }
        }
        break;

        default:
        {
            // received an unknown packet id; send a packet to the client that indicates an error_status_t

            unsigned char *ServerResponse[2] = {0};
            ServerResponse[0] = 2; // packet id 2 means server error
            ServerResponse[1] = 0; // error code 0 means 'unknown packet id'

            send_packet(pkt_cSocket, ServerResponse, 2);
        }
        break;
    }

    delete pkt; // must delete pkt, was created with 'new' in get_client_packets()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:35:49.467

这看起来相当 C 风格，不像 Qt 的做事方式。您的问题没有一般性的答案，但我的建议如下：

听听`newConnection()`信号`QTcpServer`。您的处理程序必须调用`nextPendingConnection()`才能让下一个客户端在队列中等待。您要做的第一件事可能是您的用户身份验证。一旦通过身份验证，您将 QTcpSocket 保留在您的活动连接列表中。

看看例如财富客户端/服务器示例如何实际写入/读取数据包。您可能还想查看流运算符`<<`来序列化您的对象。这比您发布的低级方法更容易且不易出错。此外，QDataStream 将自动处理主机和网络字节顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:19:11.730

如果您遵循了财富客户端/服务器示例，您应该有一个 QTcpServer ( `Rfserver`) 和一个 QThread 子类 ( `Rfdevice`，它的实例变量`thread`在下面的代码中被调用)，其中包含一个 QTcpSocket ( `listenSocket`)。

话虽如此，在您的服务器类中，侦听传入连接，我的设置如下所示：

```
void Rfserver::incomingConnection(int socketDescriptor){
    if(thread){ //if thread exists, there is probably still an open connection
        if(thread->listenSocket){//if thread exists and the listenSocket is filled, there is definately an open connection
            if(thread->listenSocket->state() == QAbstractSocket::UnconnectedState){ 
                //but alas, it could just be in the unconnected state, if so kill it.
                this->disconnect();
                thread->terminate();
                thread=0;
                connected=false;
            }//otherwise, do nothing, because the software is happily connected to a device
        }
    }
    if(!thread){    //if no thread exists, we are by no means connected
        thread = new rfdevice(socketDescriptor, this); //set up a new thread
        //this first connection communicates the string from your socket to the server parent...use it if you want.
        connect( thread, SIGNAL(RemoteButton(QString)),this,SLOT(remoteButton(QString)),Qt::BlockingQueuedConnection); 
        connect( thread, SIGNAL(error(QTcpSocket::SocketError)),this,SLOT(tcpError(QTcpSocket::SocketError)),Qt::AutoConnection);
        connect( thread, SIGNAL(finished()), this, SLOT(threadZero())); //I have a threadZero function that deletes all the data then schedules the socket for deletion.
        thread->start(); 
        connected=true;
        QString *welcome = new QString("Enter your password:\r\n");
        echoCommand(welcome); //this is a function you will implement that sends the welcome message to the pending device.
    }
} 
```

好的，现在，当设备尝试连接到服务器时，设备会显示`"Enter your password:\r\n"`. 您的设备可能会使用密码和用户名对此做出响应。但是 Qt 方面看起来像这样：

```
/*
 FUNCTION:read
    this is a polling runloop that listens for data as long as the socket is connected or connecting.  If a
 write is ever scheduled, it will be called from this runloop..
 */
void Rfdevice::read(void){
    while((listenSocket->state() == QAbstractSocket::ConnectedState) || (listenSocket->state() == QAbstractSocket::ConnectingState)){
        //if there is data available to send write it to the socket
        if(dataToSend) this->write();
        if(listenSocket->waitForReadyRead(50)) readBytes(); 
        //wait for 50ms for data from the device
        //if there is ever data available to be read, read it.
    }
} 
```

您的设备会使用 格式的用户名/密码进行响应`username---password\r\n`。然后套接字执行此操作：

```
/*
FUNCTION:readBytes
this is like a callback function because it only gets called when there is data available for read.
It basically converts the data to a string.
 */
void Rfdevice::readBytes(void){
    QByteArray newData;
    newData = listenSocket->readAll();
    QString *recieved = new QString(newData);
    QStringList userAndPass = recieved.split("---");//this is your delimiter
    QString username = userAndPass.at(0);
    QString password = userAndPass.at(1);

    //NOW, check the username and password vs your SQL or wherever it's saved.

} 
```

伪代码在细节上非常完整。希望你能把它们放在一起！如果您需要更多代码，请告诉我。

# apache - 子文件夹的 htaccess 指令

> ID：13199268
> 
> 赞同：1
> 
> 时间：2012-11-02T16:24:50.057
> 
> 标签：apache, .htaccess, directory

我有（根目录中的.htaccess）花哨的目录列表，例如：

IndexOrderDefault 降序日期

所以所有子文件夹都正确列出（日期降序），但我只希望根目录按字母顺序列出文件夹（按名称升序排序）并保持子文件夹不变，为每个子文件夹创建 htaccess 不是一个选项，所以它必须完成在 root 的 htaccess 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:45:13.663

您必须在您的 vhost/server 配置中设置这些内容 a `<Directory>`and `<DirectoryMatch>`，可能是这样的：

```
<Directory "/path/to/date-order/dir">
    IndexOrderDefault Descending Date
</Directory>

<DirectoryMatch "^/path/to/date-order/dir/[^/]+/">
    IndexOrderDefault Ascending Name
</DirectoryMatch> 
```

这`IndexOrderDefault Ascending Name`是默认排序。

# javascript - chrome在调整大小时使div元素的小方块不可见

> ID：13199269
> 
> 赞同：2
> 
> 时间：2012-11-02T16:24:52.597
> 
> 标签：javascript, jquery, html, css

我制作了一个脚本，可以在页面加载和窗口大小调整时调整网页上某些 div 元素的大小。问题是，当我将 chrome 从窗口更改为全屏时（我并不是指 F11 全屏模式，只是它从边缘到边缘），div 的一小部分变得不可见。它不会发生在任何其他浏览器中。我正在运行最新版本的 chrome。

有这个问题的 div 是#black_line_bottom，你可以在右下角看到#bottom_container div。

调整大小（js）的代码：

```
function calcHeight(factor){
if($(window).height() > 720){
    return $(window).height() * factor / 100;
}
else{
    return 720 * factor / 100;
}
}

function getEl(x){
return document.getElementById(x)
}

function resizeHeight(){
var height = calcHeight(3.5);
getEl("black_line_bottom").style.height = height + "px";
getEl("white_line_bottom").style.bottom = height + "px";
height = calcHeight(7.8);
getEl("bottom_container").style.height = height + "px";
getEl("white_line_bottom").style.height = (height - calcHeight(3.5)) + "px";
height = calcHeight(20.5);
};

$(window).on( "resize ready" , resizeHeight); 
```

html:

```
<body>
    <div id = "bottom_container" >
        <div id = "black_line_bottom" class = "black_line">

        </div>
        <div id = "white_line_bottom"class = "white_line">

        </div>
    </div>
</body> 
```

CSS：

```
.black_line {
position : fixed;
background-color : #0a0a0a;
width : 100%;
height : 41px;
left : 0px;
right : 0px;
}

#black_line_bottom {
bottom : 0px;
}

#bottom_container {
position : fixed;
width : 100%;
height : 90px;
left : 0px;
right : 0px;
bottom : 0px;
}

.white_line {
position : absolute;
background-color : red;
width : 100%;
height : 100%;
left : 0px;
right : 0px;
}

#white_line_bottom {
bottom : 41px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:15:10.370

我做了一些研究，它似乎是 chrome 中的一个错误。

错误链接： [http ://code.google.com/p/chromium/issues/detail?id=151623](http://code.google.com/p/chromium/issues/detail?id=151623)

# c++ - 取消引用数组与指针

> ID：13199270
> 
> 赞同：-3
> 
> 时间：2012-11-02T16:24:53.770
> 
> 标签：c++, c

我确定以前有人问过这个问题，但是粗略的谷歌和堆栈溢出搜索并没有找到答案。

```
#include <stdio.h>

int main() {
    char a[128][1024];
    strcpy(a[0], "hello");
    strcpy(a[1], "foo");
    strcpy(a[2], "bar");
    char **b = a;
    printf("%s\n", a[0]); //same as printf("%s\n", a)
    printf("%s\n", a[2]+1); //print from 2nd char of 3rd string
    printf("%s\n", b); //same as printf("%s\n", a), makes sense
    printf("%s\n", b[0]); //segfault???
} 
```

首先，为什么最后一个是段错误？我期望与 array 相同的行为`a`。如何以通用方式从 b 访问第 n 个字符串？a和b在治疗上有什么区别？

在类似的注释中，我理解它的方式`a[n]`是`*(a+n)`. 这对指针和数组都正确吗？然而，它似乎对`a`和有不同的行为`b`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:36:08.277

`char **b``b`说：“在指向的地方`b[0]`，有一个指向 char 的指针。而且，如果我使用`b[1]`, `b[2]`,...，它们也是指向 char 的指针。”</p>

相比之下`char a[128][1024]`，“<code>a 是 128 个 1024 个字符的数组”。当你这样做的时候，在那个地方，`a`没有指针。只有字符。在内存中，它看起来像连续 131,072 个字符 (128•1024 = 131,072)。

当您分配 时`char **b = a`，假设编译器允许您这样做，您将设置`b`为 的地址`a`。使用时`b[0]`，那里应该有一个指针。但是没有。那里只有炭。当您传递`b[0]`给 printf 时，编译器会转到`b`指向的位置，加载几个字节，就像它们是指针一样，并将结果值传递给 printf。然后 printf 崩溃，因为字节指向某个错误的位置。

的正确定义`b`是`char (*b)[1024] = a;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:27:24.480

这个

```
char **b = a; 
```

是类型不匹配，因为`a`没有`char[][]`索引使用的是`char *`.

您可能想切换所有编译器警告（通过 执行`gcc`此操作`-Wall`）。

这条线

```
printf("%s\n", b[0]); 
```

取消引用指向字符指针的指针，即地址值。然后它尝试将地址值值打印为（0 结尾的）字符串，这很可能会访问随机内存。

# xml - 解析 Junit xml 文件

> ID：13199272
> 
> 赞同：8
> 
> 时间：2012-11-02T16:24:55.750
> 
> 标签：xml, junit, xml-parsing, report

是否有任何开源库可以使用 java 解析 junit xml 并获取执行的测试套件名称、与测试套件对应的测试用例、失败次数和成功次数等信息？我刚看到[junit风格的报告工具](http://www.soapui.org/Reporting/junit-style-html-reports.html)，有没有开源库可以在java中获取这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:06:55.557

您可以使用 ant 的**junitreport**任务生成一些报告文件，其中显示您需要的信息。还要检查问题[自定义 JUnit 报告？](https://stackoverflow.com/q/1727616/286934)关于如何根据您的需要自定义生成的报告。

# css - Twitter bootstrap 响应式下拉菜单不会在 IE7-8 中下推内容

> ID：13199277
> 
> 赞同：0
> 
> 时间：2012-11-02T16:25:20.083
> 
> 标签：css, internet-explorer, twitter-bootstrap

当我折叠的下拉菜单折叠时，它会将内容推送到 FF 和 Chrome 中的页面下方，但在 IE [甚至 9] 中，它会掉落在内容上，使其在很大程度上无法阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:52:32.450

您可能想查看“溢出”css 属性，听起来它在浏览器之间的处理方式不同。另外，尝试在 ie 中查看 int Developer Tools (shift - f12) 并查看 ie 正在拾取或缺少其他浏览器没有的 css 属性。

# cassandra - 删除一行超列并立即将其替换为新数据

> ID：13199284
> 
> 赞同：1
> 
> 时间：2012-11-02T16:25:42.267
> 
> 标签：cassandra

假设我在 Cassandra 中有一排超级列。我删除了整行（现在用墓碑标记）。然后我立即（在任何压缩/节点工具修复之前）添加具有相同行键的不同数据。我的问题是，Cassandra 是否正确处理了这个问题并删除了数据，或者是否存在应该删除的 sstables 被孤立的风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:07:11.593

一切都取决于时间戳。后面的时间戳获胜....因此，如果删除时间戳在修改时间戳之前，则修改获胜并将内容放入其中。

院长

用于 Cassandra 开发人员的 PlayOrm

# tridion - SDL Tridion 2011：使用 C# TBB 动态填充或添加元数据字段

> ID：13199288
> 
> 赞同：7
> 
> 时间：2012-11-02T16:25:55.997
> 
> 标签：tridion, dd4t

是否可以从 TBB 动态设置元数据字段的值？或者是否可以从 TBB 动态添加不一定存在于模式上的元数据字段？

我想这样做的原因是我正在使用 DD4T，并且我希望将面包屑自动添加到 DD4T xml 中。

我尝试了以下方法：

```
 public override void Transform(Engine engine, Package package)
    {
        Initialize(engine,package);

        var page = GetPage();

        string output = page.OrganizationalItem.Title;

        var parent = page.OrganizationalItem as StructureGroup;
        while (parent != null)
        {
            output = GetLinkToStructureGroupIndexPage(parent) + Separator + output;
            parent = parent.OrganizationalItem as StructureGroup;
        }

        // I tried this to dynamically add the field
        //var metadata = page.Metadata.OwnerDocument.CreateElement("breadcrumb");
        //metadata.InnerText = output;
        //page.Metadata.AppendChild(metadata);

        //I tried this to dynamically set an existing field on the schema
        foreach (XmlNode xml in page.Metadata)
        {
            Log.Debug("Metadata field:" +xml.Name);
            if(xml.Name == "breadcrumb")
            {
                xml.InnerText = output;    
            }
        }

        package.PushItem(Package.PageName, package.CreateTridionItem(ContentType.Page, page));
    } 
```

但是，这些方法似乎都不起作用。这是不可能的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:43:06.067

DD4T 具有实用程序类`FieldsBuilder`，`AddFields`您可以在其中注入其他元数据。DD4T 有一个 TBB，它确实从文件夹元数据更新组件元数据，它被称为`InheritMetadataComponent`.

你可以在这里看看这个，你可以实现相同的：

[http://code.google.com/p/dynamic-delivery-4-tridion/source/browse/trunk/dotnet/DD4T.Templates/InheritMetadataComponent.cs](http://code.google.com/p/dynamic-delivery-4-tridion/source/browse/trunk/dotnet/DD4T.Templates/InheritMetadataComponent.cs)

`FieldsBuilder.AddFields(component.MetadataFields, tcmFields, 1, false, mergeAction, Manager);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:49:18.093

`page.MetadataFields.Add(name, field);`如果您的模板扩展了`DD4T.Templates.Base.BasePageTemplate`

您还可以查看[DD4T](http://code.google.com/p/dynamic-delivery-4-tridion/source/browse/trunk/dotnet/DD4T.Templates/InheritMetadataPage.cs)`Add inherited metadata to page`中的TBB 的来源，它还显示了添加发布到代理的元数据的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T22:21:56.793

最简单的方法是创建一个实现 DD4T.Templates.Base.BasePageTemplate 的模板类。在该类中，您实现了 TransformPage 方法，该方法将 DD4T 页面作为其参数。您可以使用 GetTcmPage() 方法访问“TCM 页面”。

例子：

```
 using TCM = Tridion.ContentManager.CommunicationManagement;
    using Dynamic = DD4T.ContentModel;

    public class MyTemplate : BasePageTemplate 
    {
       protected override void TransformPage(Dynamic.Page page)
       {
          TCM.Page tcmPage = GetTcmPage();
          string breadCrumbs = GetBreadCrumbs (tcmPage); // TODO: implement GetBreadCrumbs
          Field f = new Field();
          f.Name = "breadCrumbs";
          f.FieldType = FieldType.Text;
          f.Values.Add(breadCrumbs);
          page.MetadataFields.Add("breadCrumbs", f);
       }
    } 
```

# sql-server-2008 - 查找 2 个工作日

> ID：13199290
> 
> 赞同：0
> 
> 时间：2012-11-02T16:26:02.240
> 
> 标签：sql-server-2008, tsql

我有一个日历表。我想在今天的日期之前获得 2 份业务，同时跳过假期和周末。

例如：

示例 1：2013 年新年是星期二。如果是星期四 (1/3)，那么我的开始日期将是星期一 (12/31)。

示例 2：如果是星期一 (12/31)，那么我的开始日期将是星期四 (12/27)。

我的 Clandar 表预先填充了 30 年的日期，并带有标志来确定哪些是周末和假日。该表具有以下字段：

dt: 30 年的日期和时间 Y: 年 D: 日 M: 月 Isholiday: (是不是假期, 用 0 表示“否”, 1 表示“是”) IsWeekday: (是工作日吗?用 0 表示表示“否”，1 表示“是” HolidayDescription: 假日名称

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:52:16.120

这就是你想要的：

```
select top 1 *
  from ( select * 
           from Calendar 
          where IsHoliday = 0 
            and IsWeekday = 1 
            and dt between DateAdd( Day, -6, GetDate ) and GetDate() 
       ) tmpCalendar
 where dt <= DateAdd( Day, -2, GetDate() )
 order by dt desc 
```

确保`*`仅替换为您想要的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:59:45.647

试试这个：

```
SELECT dt FROM
(
    SELECT dt, ROW_NUMBER() OVER (ORDER BY dt DESC) AS R
    FROM
        Calendar
    WHERE
        IsHoliday = 0
        AND IsWeekday = 1
        AND dt < GETDATE()
) T
WHERE R = 2 
```

# javascript - 不断获得“意外令牌”，变量中的坐标

> ID：13199291
> 
> 赞同：0
> 
> 时间：2012-11-02T16:26:05.687
> 
> 标签：javascript, google-maps, variables

我正在尝试从变量中获取纬度和经度，但我一直在获取`Unexpected token ,`. 我试过使用`var coordinates = 59.328615,13.485699`， `var coordinates = '59.328615,13.485699'`但我只得到了同样的错误。现在我没有想法了。怎么了？！

```
var coordinate_latitude = 59.328615;
var coordinate_longitude = 13.485699;
var marker;
var gm_map;

function initialize() {
    var latlong = new google.maps.LatLng(coordinate_latitude, coordinate_longitude);

    var googlemaps_options = {
        zoom: 18,
        minZoom: 4,
        maxZoom: 18,
        center: latlong,
        mapTypeId: google.maps.MapTypeId.SATELLITE,
        streetViewControl: false
    }

    gm_map = new google.maps.Map(document.getElementById('google-maps'), googlemaps_options);

    marker = new google.maps.Marker({
        position: latlong,
        draggable: true,
        map: gm_map
    });
}

$(document).ready(function() {

    // INITIERA GOOGLE MAPS
    initialize();

}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:07:47.477

不要使用 ready 函数来初始化地图。渲染页面后，需要在加载事件中完成。如果我删除 jquery 并改为这样做，它对我来说很好：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_unexpectedToken.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:55:13.750

`var coordinates = 59.328615,13.485699`不是有效的 JS。它应该是这样的：

```
var coordinate_latitude = 59.328615, coordinate_longitude = 13.485699; 
```

但是，您报告的错误消息与您发布的代码没有任何关系（正如 alestanis 所指出的）。您当前的代码不应该出错，或者如果出错，它必须是与您在问题中提到的不同的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:06:14.023

感谢Dr.Molle，我得到了它的工作。geocodezip 也有正确的答案，但我会使用 Dr.Molles 解决方案（`initialize();`在`$(document(ready(function() { ...`）。[这是工作代码](http://jsfiddle.net/EDzv5/)。

# c# - 用于比较的哈希函数

> ID：13199295
> 
> 赞同：3
> 
> 时间：2012-11-02T16:26:14.377
> 
> 标签：c#, wolfram-mathematica

好吧，我想知道通常哈希函数会创建一个唯一的数字。是否还有可用于近似比较的哈希函数？

所以例如

```
6 7 8  9 10 11 23 40 10 
5 8 10 9  9 12 24 40 20   would match

25 7 12  9 10 12 90 90    would not match 
```

我想知道这是因为我正在考虑模式识别。我想知道是否有一些数学可以给出你想要找到的匹配百分比。使用 C# 作为编程语言。

**一些澄清**，首先让我解释一下我喜欢捕捉的同义词。想象一下水滴落下，但它不是恒定流动的。测量工具也不完美。所以现在我正在计时液滴掉落之间的差异，这是一个系列的测量，比如在 19 到 25 个液滴之间，实际上我可以一次测量这样的系列，例如如果我有相机并拍摄它。

现在我想弄清楚下一个系列开始时有这个“系列”是不同还是相同，系列之间可能存在随机时间间隔，并且测量工具不会检测系列的开始或结束，他们一次只进行 19 或 25 次测量。

我不确定该朝哪个方向发展，也许是模糊逻辑，神经网络模式检测，距离向量..有很多方法有接缝，但我想知道会更简单（我在想像哈希之类的东西，但也许应该是别的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:25:35.477

Hash functions can be used for (not uniquely) identifying certain values. They are not guaranteed to be unique (better said, it is guaranteed that some different values will have identical hash codes). A small deviation in the value usualy results in a completely different hash code (As @Bobson already has mentioned.) Another use of hash codes is to find in-equality of two values in constant time.

It might be possible to design a hash code function that will do what you want, specialy if you know the domain your values are living in. But that will need a mathematical background to do.

As far as I know there is no hash function for the example you gave.

Here is another idea for integers, use modulo 10 operations and calculate the absolute difference betweeen each digit. This way you calculate the 'distance' between two number, not the 'difference'. I did something similar once on strings to find strings close to each other.

Some pseudo code:

```
int Distance(int x, int y)
{
    int result = 0;
    while ((x > 0) && (y > 0))
    {
        result += abs(x%10 - y%10);
        x /= 10;
        y /= 10;
    }
    return result;
}

void Caller()
{
    int distance = Distance(123, 456);

    if (distance == 0) write("x and y are equal");
    else write("the relative distance between x and y = " + distance.ToString())'
} 
```

# ghostscript - 是否可以使用 GhostScript 检查 PDF 是 CMYK 还是 RGB？

> ID：13199296
> 
> 赞同：0
> 
> 时间：2012-11-02T16:26:14.903
> 
> 标签：ghostscript

是否可以使用 GhostScript 检查 PDF 是 CMYK 还是 RGB？

我知道 inkcov 功能，但这只是返回 CMYK 值（静默转换）？

是真正的检查，检查 PDF 中的 RGB 颜色或 RGB 图像吗？不确定 RGB 和 CMYK 图像是否可以同时存在于同一个 PDF 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:39:49.057

图像不是 PDF 文件中唯一可以包含的内容，您还可以包含文本、线条和阴影。也可以在特定颜色空间中指定透明度混合。颜色空间不限于 RGB 或 CMYK，还可以包括灰色和专色（分离）颜色，以及基于 ICC 的颜色空间和某些特定的 CIE 颜色空间，例如 Lab。

所有这些色彩空间都可能同时存在于 PDF 文件中。

Ghostscript 目前不包含任何工具来告诉您 PDF 文件中使用了哪些颜色空间，尽管可以修改 pdf_info.ps 脚本以针对不寻常（不是灰色/RGB/CMYK）空间这样做。您还可以编写一小段 PostScript，它可以告诉您何时使用了颜色空间，以及它是哪种颜色。

inkcov 设备是 CMYK 设备，因此 PDF 中指定的所有颜色在“打印”到计算覆盖范围的 inkcov 设备之前都将转换为 CMYK。它不会告诉您有关原始 PDF 文件的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:18:35.930

我的理解是 PDF 可以同时包含 RGB 和 CMYK 图像，因此您需要一个可以查看所有图像并报告其模式的工具。

如果 GhostScript 不包含执行此操作的选项，您可能必须编写脚本以使用 PDF 库来解析图像并报告其包含的元素的详细信息。

例如，Perl 中的这个[Cam::PDF](http://search.cpan.org/~cdolan/CAM-PDF-1.58/lib/CAM/PDF.pm)模块说它可以解析任何 PDF v1.5 格式的文件。

# r - 拆分和表格

> ID：13199301
> 
> 赞同：0
> 
> 时间：2012-11-02T16:26:42.683
> 
> 标签：r

我有一个这样的数据框：

> ```
>  GN  SN  
>   a   b   
>   a   b   
>   a   c   
>   d   e   
>   d   f 
>   d   e 
> ```

我想要以下输出：
GN: a SN: 2 b 1 c
GN d SN: 2 e 1 f

换句话说，我想在 SN 列上有一个 data.frame 的 table() 首先我根据 $GN 拆分了 data.frame，所以我有块。在这一点上，我无法根据我所做的拆分计算 SN 列上的​​元素。“应用”功能是一种方法吗？以及如何保存属于拆分功能的一般输出？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:33:39.213

使用您的数据：

```
df <- data.frame(GN = rep(c("a","b"), each = 3),
                 SN = c(rep("b", 2), "c", "e", "f", "e")) 
```

我们可以这样做：

```
> lapply(with(df, split(SN, GN)), table)
$a

b c e f 
2 1 0 0 

$b

b c e f 
0 0 2 1 
```

但是，如果您不想要所有级别（`0`条目），那么我们需要删除空级别：

```
> lapply(with(df, split(SN, GN)), function(x) table(droplevels(x)))
$a

b c 
2 1 

$b

e f 
2 1 
```

## 将各个表写入文件

这并不完美，但至少你可以使用它

```
## save tables
tmp <- lapply(with(df, split(SN, GN)), function(x) table(droplevels(x)))

## function to write output to file `fname`
foo <- function(x, fname) {
    cat(paste(names(x), collapse = " "), "\n", file = fname, append = TRUE)
    cat(paste(x, collapse = " "), "\n", file = fname, append = TRUE)
    invisible()
}

fname <- "foo.txt"
file.create(fname)                # create file fname
lapply(tmp, foo, fname = fname)   # run our function to write to fname 
```

这给出了：

```
R> readLines(fname)
[1] "b c " "2 1 " "e f " "2 1 " 
```

或从操作系统：

```
$ cat foo.txt
b c 
2 1 
e f 
2 1 
```

# javascript - Levenshtein 使用阵列进行距离测量

> ID：13199313
> 
> 赞同：1
> 
> 时间：2012-11-02T16:27:30.223
> 
> 标签：javascript, jquery, html

有什么方法可以将 Levenshtein Distance 与数组一起使用，例如我有一个包含多个文本的 div

```
<div>one,two,three,longtext,anything</div> 
```

和一个输入

```
<input type="text"> // sometext 
```

我试图做的是用逗号分隔输入中的文本来测量每一个。我已经尝试过 jquery .split() 但它出现未定义或我在那里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:43:24.917

你不需要 jQuery 来处理所有事情。您可以使用 native 拆分字符串，您要拆分的字符串`s.split(",")`在哪里。`s`

例如，假设函数`levenshtein`接受两个参数并返回它们的 levenshtein 距离，您可以使用以下代码：

HTML：

```
<div id="mydiv">one,two,three,longtext,anything</div>
<input id="comparison" type="text"> 
```

JS：

```
var arr = $('#mydiv').html().split(",");
for(var i = 0;i < arr.length; i++){
    console.log("distance " + arr[i] + " to " $('#comparison').val() + ":" + levenshtein(arr[i], $('#comparison').val());
} 
```

# python - 将项目字典作为单个参数传递给方法

> ID：13199315
> 
> 赞同：0
> 
> 时间：2012-11-02T16:27:45.950
> 
> 标签：python, python-2.7

我有一个看起来像这样的方法：

```
def order_by(*args):
    print list(args) 
```

有没有办法可以传递三个项目的列表，并将列表中的每个项目作为单独的参数传递？

```
params = ['a', 'b', 'c'] 
```

相当于

```
order_by('a', 'b', 'c') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:29:18.757

该`*arguments`语法也可用于*调用*函数，只要`params`是可迭代的：

```
order_by(*params) 
```

请参阅[调用语法规范](http://docs.python.org/2/reference/expressions.html#calls)。

对于实际字典，请使用以下`**kwargs`语法：

```
params = dict(a='a', b='b', c='c')
somemethod(**params) 
```

where`somemethod`接受`a`,`b`和`c`arguments 或有一个`**kw`包罗万象的论点。请注意，如果您的所有函数定义都是位置参数包罗万象，这*将*`**params`不起作用。*`*args`*

 ** * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-02T16:49:23.930

使用 Python 内置`apply`：

```
apply(order_by, params) 
```*

# xml - 如何从 XML Schema 文件中提取数据类型？

> ID：13199317
> 
> 赞同：0
> 
> 时间：2012-11-02T16:27:52.463
> 
> 标签：xml, types, xsd, vb.net-2010

我想分析并从 XML 模式文件 (XSD) 中提取其中包含的[原始数据类型](http://www.w3.org/TR/xmlschema-2/#built-in-primitive-datatypes)。

IE

```
<xs:element name="floatValue" type="xs:float">
<xs:element name="timeValue" type="xs:Time">
<xs:element name="stringValue" type="xs:string">
<xs:element name="booleanValue" type="xs:boolean"> 
```

我正在尝试确保我的 VB.NET WinForms 应用程序涵盖以下[可用数据类型](http://msdn.microsoft.com/en-us/library/47zceaw7%28v=vs.100%29.aspx)。

除了在平面文件上运行`Ctrl`+之外，是否有任何自动化工具或方法可以完成此任务？`F`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:17:56.943

.NET 包含用于解析 XSD 文件的类，创建（相对）易于使用的类 - 请参见[此处](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschema.read.aspx)。使用这些类，您可以在 VB.NET 中编写一个程序来提取您需要的信息。

我不知道有任何现成的工具可以满足您的需求。

# ios - UIGestureRecognizer 通过后如何保存 UIImageView？

> ID：13199319
> 
> 赞同：1
> 
> 时间：2012-11-02T16:28:02.133
> 
> 标签：ios, xcode, uiimage, save

我有一个带有 2 个 UIImageView 的应用程序，它们相互重叠。我有 backgroundImg 和 FrontImg。其中 frontImg 可以：通过 UIGestureRecognizers 旋转、移动、缩放。

当我想保存我的 UIImages 时，我会合并它们，但它们会被保存，就好像它们从未被触摸过一样。

有谁知道如何解决这个问题？

这是我的保存方法： UIGraphicsBeginImageContext(self.backgroundImg.image.size);

```
 CGRect rect = CGRectMake(0, 0, self.backgroundImg.image.size.width, self.backgroundImg.image.size.height);
    self.frontImg.contentMode = UIViewContentModeScaleAspectFit;
    [self.backgroundImg.image drawInRect:rect];
    [self.frontImg.image drawInRect:rect];

    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //[imageView3 setImage:resultingImage];

    UIGraphicsBeginImageContextWithOptions(self.backgroundImg.bounds.size, NO,0.0);
    [self.backgroundImg.image drawInRect:CGRectMake(0, 0, self.backgroundImg.frame.size.width, self.backgroundImg.frame.size.height)];
    //UIImage *SaveImage = UIGraphicsGetImageFromCurrentImageContext();
    //UIImage *resultingImage = [self mergeImage:self.backgroundImg.image withImage:self.frontImg.image];
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(resultingImage, self,@selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

这些是我的手势功能：

```
-(IBAction)handlePan:(UIPanGestureRecognizer *)recognizer{
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
}

-(IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale =1;
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return ![gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]];
}

-(IBAction)handleRotate:(UIRotationGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
    self.frontImg.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
    recognizer.rotation = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:22:13.150

您的正面图像没有按照视图中的坐标、比例等绘制。您正在使用与背景相同的矩形（0、0、backgroundWidth、backgroundHeight）来绘制它。您需要确保在将其绘制到图形上下文时，您获得了正确的位置、大小和比例。

如果两个图像都包含在同一个视图中，您可以截取该视图。这篇文章应该可以帮助你：http: [//ios-dev-blog.com/how-to-create-uiimage-from-uiview/](http://ios-dev-blog.com/how-to-create-uiimage-from-uiview/)

# entity-framework-4 - DxGrid 双向数据绑定到实体框架实体

> ID：13199326
> 
> 赞同：0
> 
> 时间：2012-11-02T16:28:36.283
> 
> 标签：entity-framework-4, devexpress

我正在使用 EF 4.0。我的模型和数据库之间有流畅的 API 映射。在一个小型实用程序应用程序中，我只想将我的实体显示为表格，因此我可以使用 DevExpress Grid 控件从 WPF 用户界面添加/编辑/删除记录。我关注了他们的视频[http://tv.devexpress.com/#DXGridWPFBindEF4](http://tv.devexpress.com/#DXGridWPFBindEF4)，现在我在网格中看到了我的数据，但我无法编辑它。

```
 control.gridUsers.ItemsSource = new LinqServerModeSource
                                            {
                                                ElementType = typeof (User),
                                                KeyExpression = "Login",
                                                QueryableSource = control._dbContext.Users
                                           }; 
```

有什么方法可以使这种绑定以两种方式工作吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:31:18.617

不使用 LinqServerModeSource 作为数据源，因为它是只读的。“服务器模式”-数据源旨在显示大型数据源。它们实现了分页机制，因此并非来自服务器的所有数据都被查询并传输到客户端，而只有当前可见的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:50:51.873

我实际上得到了帮助我的 DevExpress 支持团队的回复。

[http://www.devexpress.com/Support/Center/p/Q442601.aspx](http://www.devexpress.com/Support/Center/p/Q442601.aspx)

# python - Python 动态创建自定义命名函数

> ID：13199329
> 
> 赞同：1
> 
> 时间：2012-11-02T16:28:49.357
> 
> 标签：python, python-2.7, metaprogramming, dynamic-function

> **可能重复：**
> [使用自定义名称创建 Python 动态函数](https://stackoverflow.com/questions/13184281/python-dynamic-function-creation-with-custom-names)

我写了一个小脚本来确定我想做的事情是否可行。这是。

我的目标是动态地（在运行时）创建函数（或方法），其名称基于任意大小的列表（列表大小 = 动态创建的函数数）。所有的函数都做同样的事情（现在），它们只是打印它们的参数。

下面的代码正是我想要的，但是，它不干净而且非常蛮力。我试图弄清楚是否有更好的方法来做到这一点。

```
class Binder:
    def __init__(self, test_cases):
        """"
        test_cases: a list of function/method names.
        length of test_case = number of methods created.
        """

        for test_case in test_cases:
            #construct a code string for creating a new method using "exec" 
            func_str = "def "
            func_str += test_case
            func_str += "(*args):"
            func_str += "\n\t"
            func_str += "for arg in args:"
            func_str += "\n\t\t"
            func_str += "print arg"
            func_str += "\n"

            """
            For example, func_str for test_cases[0]= "func1" is simply:
            def func1(*args):
                for arg in args:
                    print arg
            """
            #use exec to define the function
            exec(func_str)

            #add the function as a method to this class
            # for test_cases[0] = "func1", this is: self.func1 = func1
            set_self = "self." + test_case + " = " + test_case
            exec(set_self)

if __name__ == '__main__':
    #this list holds the names of the new functions to be created
    test_cases = ["func1", "func2", "func3", "func4"]
    b = Binder(test_cases)

    #simply call each function as the instant's attributes
    b.func1(1)
    b.func2(1, 3, 5)
    b.func4(10) 
```

输出是：

```
1
1
3
5
10 
```

正如预期的那样。

**更新**函数的内容不仅仅是一个打印参数的for循环，它会做一些更有意义的事情。我从上面的代码中得到了我想要的确切结果，只是想知道是否有更好的方法。

**更新**我正在绑定一个更大模块的两端。一端确定测试用例是什么，除此之外，填充测试用例名称的列表。另一端是函数本身，它必须与测试用例名称进行 1:1 映射。所以我有了测试用例的名称，我知道我想对每个测试用例做什么，我只需要创建具有测试用例名称的函数。由于测试用例的名称是在运行时确定的，因此基于这些测试用例的函数创建也必须在运行时进行。测试用例的数量也是在运行时确定的。

有一个更好的方法吗？？欢迎任何和所有建议。

提前致谢。

马赫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:07:04.923

在 Python 中，这是通用元编程最合理的方法。

如果您只需要代码中的一些常量，那么闭包可能会解决问题......例如：

```
def multiplier(k):
    "Returns a function that multiplies the argument by k"
    def f(x):
        return x*k
    return f 
```

对于任意代码生成，Python 有一个[ast](http://docs.python.org/dev/library/ast.html)模块，**理论上**您可以使用该方法检查或创建函数。然而，在 Python 代码中很难以这种方式表示和操作，因此通常的方法是在运行时完成所有操作，而不是编译特定的函数。当您真的可以获得优势时，您可以使用`eval`（获得 lambda）或`exec`. ast 模块主要用于检查。

编写生成代码的代码就是所谓的**[元编程](http://en.wikipedia.org/wiki/Metaprogramming)**，Python 对这种方法不是很友好。

您可能听说过 C++ 声称支持元编程，但实际上它只是**基于模板的**元编程，您可以在其中将**类型**或**常量**替换为**固定结构**。[您可以使用像SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)规则这样的“高级元编程”来玩一些技巧，但它们只不过是诡计。

Python 不需要模板，因为该语言不是静态类型的并且您有闭包（C++ 是静态类型的并且没有闭包），但是 Python 对通用元编程方法没有帮助（即编写生成或操作代码的通用代码）。

如果您对元编程感兴趣，那么选择的语言可能是 Common Lisp。编写代码对 Lisp 来说并不是什么特别的事情，虽然编写**宏**（编写代码的函数）当然比仍然使用 Lisp 的常规运行时函数更难，但困难大多是必不可少的（问题确实更难) 而不是因为语言限制而人为的。

lispers 之间有一个老笑话，或多或少类似于“我正在编写代码，编写代码，编写代码，编写代码，人们付钱给我”。元编程确实只是第一步，之后你就有了元元编程（编写代码来编写代码生成器）等等。当然，事情变得越来越难（但再次因为问题更难，而不是因为任意强加的限制......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:18:31.747

首先，这可能是一个非常糟糕的主意。要了解原因，请阅读评论和其他答案。

但是要回答您的问题，这应该可行（尽管它是一种技巧并且可能会产生奇怪的副作用）：

```
from types import MethodType

def myfunc(self, *args):
    for arg in args:
        print arg

class Binder(object):
    def __init__(self, test_cases):
        for test_case in test_cases:
            method = MethodType(myfunc, self, Binder)
            setattr(self, test_case, method) 
```

在这种情况下，对函数的引用是硬编码的，但您当然也可以将其作为参数传递。

这是输出：

```
>>> b = Binder(['a', 'b'])
>>> b.a(1, 2, 3)
1
2
3
>>> b.b('a', 20, None)
a
20
None 
```

# php - 下载隐藏图像 URL 的脚本

> ID：13199331
> 
> 赞同：3
> 
> 时间：2012-11-02T16:28:55.753
> 
> 标签：php, image, url, download, hidden

这个我找遍了整个地方...

（[下载链接隐藏](https://stackoverflow.com/questions/1514171/download-link-hidden)）

（[隐藏产品图片的文件名](https://stackoverflow.com/questions/5635691/hide-filenames-for-product-images)）

（[隐藏图片网址](https://stackoverflow.com/questions/9852279/hiding-image-url)）

现在，我想下载一张图片，但它没有任何 url...php 页面包含一些文本和 1 张图片，如果你右键单击并复制 imageurl，你会得到类似的东西：

```
www.example.com/index.php?module=Profile&file=showuserinfo&function=showuserinfo&userid=2090 
```

好的。这似乎不是一个可下载的图像......确实使用 wget，它只是给了我一个 index.php 文件。所以我尝试了 WinHTTrack...在那里我得到了所有文本的一个很好的副本。但是页面和内容文件夹都缺少什么？这该死的图像……它就像一个幽灵图像……

现在这将是一件愚蠢的事情，并称我为愚蠢，但我从未见过这样的事情......有没有办法下载这个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:55:46.203

如果图像在 Web 浏览器中可见，则它是可下载的。浏览器必须在显示之前下载图像。

有各种各样的方法可以使将图像保存到本地文件*变得更加困难*，但这些方法都不会打败对 HTML 有任何了解的人。我最喜欢的两个是将图像的扩展名更改为脚本文件（即 myimage.php?id=1234 而不是 myimage.png），这使得识别源中的哪个元素是图像和将图像包裹在具有透明背景的 div 后面，这使得右键单击 -> 保存图像命令无用。

此外，将图像包装在脚本中允许您在传输图像之前施加某些条件；也许用户必须登录；也许请求必须来自发送您在页面加载时生成的令牌的脚本......您可以做各种创造性的事情来使其更难。

但是在 HTTP 中无法下载图像是不可能的。

# c - 有人可以解释什么是强大的更新并举一个例子来说明它吗？

> ID：13199335
> 
> 赞同：4
> 
> 时间：2012-11-02T16:29:04.393
> 
> 标签：c, pointers, heap-memory, variable-assignment

我正在阅读一篇关于*C 程序的高效上下文敏感指针分析的论文的*[强更新](http://suif.stanford.edu/papers/wilson95/subsection3_4_1.html#SECTION0004100000000000000)部分，但我无法准确理解它的含义。有人可以提供一个例子，特别是对于链接中的这一行：

 *> 这极大地提高了我们执行强更新的能力。由于堆块代表在特定上下文中分配的所有存储，我们假设本地分配的堆块永远不会唯一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:51:26.393

## 强更新，弱更新

在静态分析的上下文中，人们试图一次推断程序的所有可能行为，*强更新*是一种更新（分配）操作，其中被更新的地址是精确已知的。相比之下，写入地址不准确的赋值称为*弱更新*。

在处理弱更新时，不仅新值可以写入多个位置并且不知道是哪个位置，而且必须考虑每个位置保持其旧值的可能性（因为更新可能发生在其他地方）。

## 例子

考虑[Frama-C 的 value analysis](http://frama-c.com/try_out_value.html)，这是一种高效的上下文敏感指针分析，用于在大多数 Linux 发行版中作为包提供的 C 程序。假设我们正在分析以下程序：

```
int a, b, c, d, *p, t[5];

int main(int argc, char **argv){
  a = 1; // strong
  p = &b;
  *p = 2; // strong
  if (c & 1) 
    p = &c;
  else
    p = &d;
  *p = 3; // weak

  t[2] = 4; // strong
  t[c & 2] = 5; // weak
} 
```

当用 Frama-C 的价值分析来分析这个例子时，可以得到：

```
$ frama-c -val t.c
[value] Values at end of function main:
  a ∈ {1}
  b ∈ {2}
  c ∈ {0; 3}
  d ∈ {0; 3}
  p ∈ {{ &c ; &d }}
  t[0] ∈ {0; 5}
   [1] ∈ {0}
   [2] ∈ {4; 5}
   [3..4] ∈ {0}
  __retres ∈ {0} 
```

位置`c`、`d`和已成为弱更新的目标`t[0]`。`t[2]`它们每个都可以包含一个新值（可能已经写在那里）或一个旧值（当时在那里并且可以保留）。

遭到反对，`a`并被`b`强烈更新的对象。众所周知，赋值正在准确地写入这些变量中的每一个，因此无需考虑它们可能保留其旧值的可能性。

## 在文章的上下文中

关于您引用的确切段落：

> 关键是要认识到表示唯一指针初始值的扩展参数可以是唯一块，即使该指针在调用上下文中有许多可能的值。由于指针在任何时候只能包含其中一种可能性，因此扩展参数是过程范围内的唯一块。只有当多个位置指向扩展参数并且该参数的实际值不是单个唯一位置时，我们才必须将该参数标记为非唯一。这极大地提高了我们执行强更新的能力。

研究人员的目标是尽可能频繁地使用强更新，因为它更精确。在本段中，他们指出，尽管指针`p`可能指向几个可能的位置，但如果您为“位置`p`指向”命名，那么您可以强烈更新该位置。我想这就是他们所说的。

在我的示例程序中，这将允许从`*p`程序末尾读取并发现它完全包含`3`，尽管`p`指向`c`可能包含`0`or`3`或指向`d`可能包含`0`or的点`3`。旧版本的 Frama-C 价值分析使用类似于所描述的技术（如果我理解正确的话）推断此信息，但它太昂贵并且被删除。*

# xpath - 查找所有前面的兄弟节点，直到找到具有特定子节点属性的一个

> ID：13199336
> 
> 赞同：1
> 
> 时间：2012-11-02T16:29:04.837
> 
> 标签：xpath

我想在特定行标识符（行列上的属性）之后获取所有表行，直到找到该特定行标识符。

这是我要解析的html：

```
 <tr>
    <td colspan="4">
      <h3>Header 1</h3>
    </td>
  </tr>
  <tr>
    <td>Item desc - Header 1</td>
    <td>more info</td>
    <td>30</td>
    <td>500</td>
  </tr>
  <tr>
    <td colspan="4">
      <h3>Header 2</h3>
    </td>
  </tr>
  <tr>
    <td>Item desc - header 2</td>
    <td>other</td>
    <td>4</td>
    <td>49</td>
  </tr>
  <tr>
    <td>Item 2 desc - header 2</td>
    <td>other 2</td>
    <td>65</td>
    <td>87</td>
  </tr> 
```

我希望能够抓取标题 1 下的项目并在找到标题 2 时停止；然后是标题 2 下的项目，并在找到标题 3 时停止；等等

这可能在xpath下吗？在找到具有特定属性（colspan =“4”）的子节点之前，我无法让它只找到 TR 节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:19:05.043

这可能会给你你正在寻找的东西，而不是最正统的手段：

```
//*/tr/td[not(child::h3)]/ancestor::tr 
```

这将为您提供a中不是标题块的所有`<td>`节点。`<tr>`

您可以指定标题：

`//*/tr/td[not(child::h3/text()='Header 1')]/ancestor::tr`

或者更一般的：

`//*/tr/td[not(child::h3[contains(text(),'Header')])]/ancestor::tr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:53:46.233

这在 XPath 1.0 下是不可能的。您必须以某种方式固定标头 tr，因为您试图找到其后面的所有兄弟，其第一个前面的标头 tr*是原始的*。没有对原始标题的引用，一切皆有可能。但是您可能使用某种可以用来记住值的语言工作。

例如，在[xsh](http://p3rl.org/XML%3a%3aXSH2)中：

```
for my $x in //tr[td/@colspan="4"] {
    echo ($x/td/h3) ;
    for $x/following-sibling::tr[count(td)=4
                                 and preceding-sibling::tr[count(td)=1][1]=$x]
        echo "  " (td) ;
} 
```

输出：

```
Header 1
   Item desc - Header 1 more info 30 500
Header 2
   Item desc - header 2 other 4 49
   Item 2 desc - header 2 other 2 65 87 
```

# java - 奇怪的距离 Java 3d

> ID：13199338
> 
> 赞同：0
> 
> 时间：2012-11-02T16:29:14.297
> 
> 标签：java, math, 3d, java-3d

我将展示一些关于我的问题的图片，这样一切都会更容易理解：

[图 1](http://imageshack.us/photo/my-images/152/stackover.jpg/)
[图 2](http://imageshack.us/photo/my-images/703/stackn.jpg/)

我的第一张图片显示了轴（x 轴由圆柱体组成，y 轴由圆锥体组成，z 轴由球体组成）和 3 个圆柱体的位置如下：

x 轴上方的圆柱体（右）支持 RotZ(PI/4) 和 RotX(0)。z 轴上方的圆柱体（左）支持 RotX(PI/4) 和 RotZ(0)。中间气缸支持RotX(PI/4)和RotZ(PI/4)。

我的第二张图片显示了 3 个角度值完全相同的圆柱体，但它们的原点是一个球体并且视角发生了变化，这使得奇怪的是显而易见：上圆柱体（实验上是“x 轴”圆柱体）更靠近中间圆柱体（第一张图像中的中间圆柱体）比下圆柱体（第一张图像中的“z轴”圆柱体）。从**任何**角度都可以看到差异，所以问题不是透视。

我认为问题可能是我进行旋转的方式。圆柱体的长度为 2f，所以我首先将圆柱体平移到 (0,1,0)，这样圆柱体一端的圆中间的点。这个想法是我想围绕 (0,0,0) 点旋转。然后进行旋转。
这可能是问题吗？

下面的代码显示了如何放置圆柱体

```
 private void addSimpleBound(float x,float y,float z)
    {

    Cylinder b=new Cylinder();
    TransformGroup tg=new TransformGroup();
    tg.addChild(b);
    TransformGroup element=translate(tg, new Vector3f(0f,1f,0f)); 
    TransformGroup gr=rotate(element,xAngle,zAngle);
    elements.addChild(gr);
}
    TransformGroup rotate(Node node,
        double xAngle,
        double zAngle)
{

    Transform3D tiltAxisXform = new Transform3D();
    Transform3D tempTiltAxisXform = new Transform3D();
    tiltAxisXform.rotX(xAngle);
    tempTiltAxisXform.rotZ(zAngle);
    tiltAxisXform.mul(tempTiltAxisXform);
    TransformGroup rotatedGroup = new TransformGroup(tiltAxisXform);
    rotatedGroup.addChild(node);
    return rotatedGroup;
}// The rotation method 
```

![带轴的透视图](../Images/f81407e05ae0b4613cffd3a589c6d8c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:35:53.130

**编辑：**

根据评论，您的圆柱体的端点位于

```
 (sqrt(0.5), sqrt(0.5), 0),
  (0, sqrt(0.5), sqrt(0.5)),
  (sqrt(0.5), 0.5, 0.5) 
```

这意味着距离实际上是不对称的。为了获得更对称的结果，第二次旋转必须围绕 y 轴。

**原答案：**

这一点也不奇怪。你的圆柱体的末端在

```
 (sqrt(0.5), sqrt(0.5), 0),
  (0, sqrt(0.5), sqrt(0.5)),
  (0.5, sqrt(0.5), 0.5) 
```

第一端到第二端的距离为 1，第一端到第三端（或第二端到第三端）的距离为 sqrt(1 - sqrt(0.5)) < 1。

PS如果你想让图像更对称，你可以把第三个圆柱体的末端放在(sqrt(0.5),0,sqrt(0.5))。

# sql - SQL Teradata 查询

> ID：13199339
> 
> 赞同：2
> 
> 时间：2012-11-02T16:29:14.890
> 
> 标签：sql, sql-order-by, teradata

我有一个表 abc 有许多列 col1,col2,col3,

```
dept         | name |  marks |

science         abc      50
science         cvv      21
science         cvv      22  
maths           def      60
maths           abc      21
maths           def      62
maths           ddd      90 
```

我需要按部门和姓名排序，排名为 ddd- 1，cvv - 2，abc -3，否则 4 然后需要找出个人的最大分数。预期结果是

```
dept         | name |  marks |

science         cvv      22
science         abc      50
maths           ddd      90
maths           abc      21
maths           def      62 
```

. 我该怎么做。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:35:07.173

```
SELECT
  dept,
  name,
  MAX(marks)   AS mark
FROM
  yourTable
GROUP BY
  dept,
  name
ORDER BY
  CASE WHEN name = 'ddd' THEN 1
            name = 'cvv' THEN 2
            name = 'abc' THEN 3
                         ELSE 4 END 
```

或者，最好有另一个包含排序顺序的表。

```
SELECT
  yourTable.dept,
  yourTable.name,
  MAX(yourTable.marks)   AS mark
FROM
  yourTable
INNER JOIN
  anotherTable
    ON yourTable.name = anotherTable.name
GROUP BY
  yourTable.dept,
  youtTable.name
ORDER BY
  anotherTable.sortingOrder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:26:30.313

这应该有效：

```
SELECT Dept, Name, MAX(marks) AS mark
FROM yourTable
GROUP BY Dept, Name
ORDER BY CASE WHEN Name = 'ddd' THEN 1
              WHEN Name = 'cvv' THEN 2
              WHEN Name = 'ABC' THEN 3
              ELSE 4 END 
```

# php - 设置标准以外的 cookie

> ID：13199340
> 
> 赞同：0
> 
> 时间：2012-11-02T16:29:17.213
> 
> 标签：php, cookies, smf-forum

我正在尝试修改主题模板以使用 php 设置一些新的 cookie。我的代码适用于非 SMF 测试页面，但是当我将其放入 index.template.php 文件时，它会阻止页面加载。

cookie 是在 php 中设置的，整个代码基本上是尝试从页面上的新表单中获取 POST 数据。

正如我所提到的，在一个简单的测试页面上，我可以将我的 php 代码放在 HTML 之上，它工作正常。

SMF 处理 cookie 的方式有什么特别之处吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:12:47.520

好的，他们可能已经发送了标头。

发送标头后，您将无法设置 cookie。

==== 更新 ====

如果您想使用 jQuery，请参阅：

[如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

# ios - 由于 UIRefreshControl 的异常

> ID：13199344
> 
> 赞同：1
> 
> 时间：2012-11-02T16:29:37.560
> 
> 标签：ios, ios6, uirefreshcontrol

我第一次使用 UIRefreshControl，在加载刷新控件时出现异常。

这里是我的报关表 ：

```
self.refreshControl = [[UIRefreshControl alloc] init];
self.refreshControl.tintColor = [UIColor grayColor];
[self.refreshControl addTarget:self action:@selector(refreshView:) forControlEvents:UIControlEventValueChanged];
[self.actualitesTableView addSubview:self.refreshControl]; 
```

这是我的功能：

```
- (void)refreshView:(UIRefreshControl *)sender {
    [self performSelectorInBackground:@selector(threadAction) withObject:nil];
}

- (void)threadAction {
    [self choixMAJ];
    NSLog(@"OK1");
    [self.refreshControl endRefreshing];
    NSLog(@"OK2");
} 
```

当我使用 choixMAJ() 方法时，它工作得很好。

一切正常，并记录了 OK2，但之后，当刷新控件消失时，应用程序因以下错误而崩溃：

```
*** -[__NSArrayM removeObject:]: message sent to deallocated instance 0x655a1a0 
```

我不明白为什么..有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T12:18:26.603

> 好吧，对于初学者，您不应该在后台线程上调用 -endRefreshing。UIKit 方法（包括那个）应该在主线程上执行。不过，我不确定这是否真的导致了您的问题。

谢谢shusta，它对我有很大帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T16:03:58.630

这里的答案是正确的，为了解决这个问题，我做了以下事情。我在主线程中设置了一个计时器来监视布尔值。当您准备停止复习时...在您的子线程中将该布尔值设置为 true。计时器将看到并从主线程调用 endRefreshing 函数。

# html - 我怎样才能摆脱这个空间 物品？据我所知，它不是填充或边距

> ID：13199347
> 
> 赞同：0
> 
> 时间：2012-11-02T16:29:57.357
> 
> 标签：html, css

我正在制作的网站上有一些`<li>`项目作为我的导航栏的一部分，我完全被这些项目之前出现的一些间距所困扰。

margin 和 padding 都是 0，并且 list-style-type 设置为 none。有任何想法吗？

忘记[网址了！这里。](http://www.holly.im/) ![在此处输入图像描述](../Images/258ac39f683af43d7966c0744d6ac629.png)

**根据要求的其他详细信息：**

*   项目的文本`<li>`是实际文本，而不是图像。
*   项目的文本`<li>`未对齐（删除了多余
    的 'center' ）。

**相关CSS：**

```
/*****************

NAVIGATION STYLING

*****************/
#navigation{
    position: absolute;
    top: 0;
    z-index:10;
    text-align: center;
    width: 100%;
    margin: 0 auto 0 auto;
}
    #navigation a:link, a:visited{
        text-decoration: none;
        color: white;
        font-size:4.16em;
        margin: 0.5em;
        line-height: 1.5em;
        text-transform: uppercase;
        float: left;
        width:100%;
    }
    #navigation #me{

    }
    #navigation a.im:link, a.im:visited{
    line-height: 0em;
    }
    #navigation a.holly:link, a.holly:visited{
    line-height: 0em;
    }
    #navigation a.games_programmer:link, a.games_programmer:visited{
    line-height: 0em;
    }
    #navigation ul{
        height: 50px;
        text-decoration: none;
        background:#1d6482;
        margin: 0;
        padding: 0;
    }
    #navigation li{
        display: inline-block;
        list-style-type: none;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:51:15.053

您在导航中拥有任何链接都应该拥有的`margin: 0.5em`. 这看起来是关于空间的大小。您的屏幕截图显示您已在 Chrome 中打开它。您应该能够看到应用于该元素的所有样式，并使用每个样式上的复选框来删除甚至更改应用的样式以找到罪魁祸首。

# sql-server - VB2010读取工具条子菜单中的菜单项

> ID：13199351
> 
> 赞同：0
> 
> 时间：2012-11-02T16:30:06.777
> 
> 标签：sql-server, vb.net, dynamic, drop-down-menu, menu

SQL Server/VB2010 新手。在两个方面对抗学习曲线。

我正在 VB2010 中为 SQL Server 数据库创建一个 UI，该数据库将允许用户编辑数据库中的表。由于随着项目的发展，数据库中的表可能会发生变化（添加新表或删除过时表），因此表名会动态添加到子菜单中，如下面的屏幕截图所示：

![屏幕盖](../Images/4f75caf7f704c86a1e88e0517a63f07e.png)

然后我使用 AddHandler 函数来运行点击事件子。这很好用，但我需要做的是获取子菜单项的实际文本（“VehicleList”、“Maintenance”等）以在 SQL SELECT 字符串中使用以打开数据库中的选定表，如下所示：

```
"SELECT * from [selected_menu_item] WHERE yada, yada" 
```

我已经在互联网上搜索了这个，但如果它在那里，我找不到它。尝试了很多方法，但我要么得到顶部菜单项（“表格”），要么得到列表中的最后一项，或者有时只是一个空行。

最好是获取实际名称，但即使有索引值，我也可以使用它来引用表名数组。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:55:44.520

答案是在处理程序中使用“ByVal e As ToolStripItemClickedArgs”参数，如下所示：

```
 Private Sub MenuItem_click(ByVal sender As System.Object, ByVal e As ToolStripItemClickedEventArgs)

    Debug.WriteLine(e.ClickedItem.Text)

End Sub 
```

[在http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitemclickedeventargs.clickeditem.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitemclickedeventargs.clickeditem.aspx)找到这个

它完全按照我的需要工作！

# dynamics-crm-2011 - 插件未在部署时更新

> ID：13199352
> 
> 赞同：1
> 
> 时间：2012-11-02T16:30:10.990
> 
> 标签：dynamics-crm-2011

我的 CRM 系统不知何故陷入了一个奇怪的境地。

导入解决方案时，我开发的插件未正确更新。当我选择维护自定义时，插件更新不会被应用，但是当我选择覆盖自定义时，步骤会加倍，因此插件会被触发两次。

这有发生在其他人身上吗？我该如何阻止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:51:53.480

我遇到过类似的情况，我在导入后注册了两次插件。

我相信我解决这个问题的方法是：

1.  使用插件注册工具从您要部署到的服务器中删除插件。
2.  重新导入解决方案。

我看不到你在这里造成任何重大损害，但我建议先备份服务器，因为我不是 100% 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:20:38.083

您是否为程序集分配了一个强名称？我在 CRM 4.0 中看到过这种事情。如果您不使用键指定强名称，CRM 似乎不会看到它是同一个程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T12:20:21.140

如果您使用插件注册工具部署插件，解决方案部署将重复所有步骤，因为它无法识别已部署的插件步骤，因为它们的 ID 已更改。

如果在没有步骤的情况下部署插件程序集，您忘记将步骤添加到解决方案的“Sdk 消息处理步骤”部分。

@JamesWood approach will always work but is very heavy handed for a production environment, an IIS Reset and restart of the MSCRM services (in services.msc) usually clears any cached plugin assembly, while a redeployment should only be needed/used in dire situations.

# iphone - convertToWorld-/NodeSpace 是如何工作的？

> ID：13199353
> 
> 赞同：2
> 
> 时间：2012-11-02T16:30:10.153
> 
> 标签：iphone, ipad, cocos2d-iphone

我正在开发一款游戏一段时间，我通过反复试验与 convertToWorldSpace 合作。它总是奏效，但老实说，我不知道我在做什么。我真的很讨厌我不明白自己在做什么，但不幸的是，互联网上并没有提供太多关于这个问题的信息。所以我希望有人能解释一下，为什么我必须从节点的父节点调用 convertToWorldSpace，以及当我使用 convertToNodeSpace 时。我完全没有头绪。有人可以大致解释一下他们的工作并举个例子吗？我真的很感激！:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:37:59.973

简单的说...

世界空间是屏幕的坐标网格。

nodespace 是图层的坐标网格。

cocos2d 和大多数其他游戏框架在一个场景中包含多个图层，您很可能会有一堆其他小节点/精灵。当您计算图层中每个精灵的坐标时，您将使用节点空间，但是当您获得触摸位置时，它将位于世界空间中，因此您需要使用 convertToNodeSpace 等对其进行转换。

希望这可以帮助！

- - 编辑 - -

也许一个例子会有所帮助......

```
 [somenode convertToWorldSpace:ccp(x, y)]; 
```

上面的代码会将坐标 (x, y) 转换为屏幕上的坐标。例如，如果 (x, y) 为 (0, 0)，则该位置将是节点的左下角，但不一定在屏幕上。这会将节点的 (0, 0) 转换为屏幕的位置。

```
[somenode convertToNodeSpace:ccp(x, y)]; 
```

上面的代码会做相反的事情。它会将屏幕上的坐标 (x, y) 转换为 somenode 上的坐标。

因此，当您想要移动某个其他节点或图层的子节点（或获取其位置或其他任何内容）时，它会派上用场，因为大多数时候您想要移动它相对于屏幕而不是在该层内。

# asp.net-mvc - SignalR 不工作

> ID：13199355
> 
> 赞同：2
> 
> 时间：2012-11-02T16:30:34.703
> 
> 标签：asp.net-mvc, signalr

我正在尝试用信号器做一些事情。我的中心是

```
 public class Customer : SignalR.Hubs.Hub
{
    public void Send(string uid, string from, string msg)
    {
        string make = from + uid;
        Clients.Addmsg(msg, make);
    }
} 
```

客户端代码是

```
 <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
 <script src="Scripts/jquery.signalR-0.5.3.min.js" type="text/javascript"></script>
<script src="/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
    $(function () {
        // Proxy created on the fly
        var care = $.connection.Customer;

        $("#broadcast").click(function () {
            // Call the chat method on the server
            care.send($('#msg').val(), "HariOm", "jai jai ram")
        .done(function () {
            console.log('Success!');
        })
        .fail(function (e) {
            console.warn(e);
        });
        });

    // Declare a function on the chat hub so the server can invoke it
    care.Addmsg = function (message, make) {
        alert(message + msg);
    };

        // Start the connection
        $.connection.hub.start();

    });

</script> 
```

加载页面后出现此错误

未捕获的类型错误：无法设置未定义的属性“Addmsg”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:37:11.007

您的问题是客户端的集线器名称应该是小写的，因为代理生成以驼峰形式生成集线器名称。所以你的代理应该是这样的：

```
 var care = $.connection.customer; 
```

这就是为什么您会收到您的`care`对象未定义的错误。这记录在[SignalR Wiki - JS Client Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)页面上。此外，如果您在`/signalr/hubs`浏览器中查看生成的页面，您将看到集线器及其定义的方法。

# c# - Stringbuilder 忽略最后一个空格

> ID：13199363
> 
> 赞同：-3
> 
> 时间：2012-11-02T16:30:57.187
> 
> 标签：c#, .net, stringbuilder

我正在初始化 a`StringBuilder`如下：

```
StringBuilder builder = new StringBuilder("Symptoms are "); 
```

在此之后，我遍历一个列表并将每个字符串项添加到末尾使用

```
foreach(var item in list)
{
    builder.Append(item);
} 
```

一个例子`item`是“头痛”，但一旦我将它附加到“症状是”并称之为`builder.ToString()`显示：

```
"Symptoms areHeadache...etc" 
```

与

```
"Symptoms are Headache...etc" 
```

为什么忽略空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:50:29.097

由于您提供的代码不会产生您描述的问题，我猜您的*实际*问题是症状（项目）之间缺少空格。在这种情况下，我建议[`String.Join()`](http://msdn.microsoft.com/en-us/library/0h8wc12c.aspx)这样使用：

```
var output = String.Format("Symptoms are {0}.", String.Join(", ", items)); 
```

现在您的项目将以逗号分隔，中间有一个填充空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:05:15.773

它不需要占用其他 PC 上的空间。也许尝试一台新电脑。

```
StringBuilder builder = new StringBuilder("Symptoms are ");
List<string> list = new List<string>() { "headache", "corrupt memory" };

foreach(var item in list)
{
        builder.Append(item);
}
System.Diagnostics.Debug.WriteLine(builder.ToString()); 
```

# c - volatile 对数组和类型转换的意义

> ID：13199364
> 
> 赞同：6
> 
> 时间：2012-11-02T16:31:02.347
> 
> 标签：c, arrays, casting, volatile

伙计们，

考虑一下这段（可恶的）代码：

```
volatile unsigned long a[1];  
unsigned long T; 

void main(void) 
{    
    a[0] = 0x6675636b;   /* first access of a */
    T = *a; 
    *(((char *)a) + 3) = 0x64; /* second access of a */
    T = *a;
} 
```

...问题：是`((char *)a)`易失性还是​​非易失性？

这就引出了一个更大的问题：a 的两个访问之间是否存在依赖关系？也就是说，人类常识说有，但是 C99 标准说 volatile 的东西不会给 non-volatile 的东西加上别名——所以如果`((char *)a)`是 non-volatile，那么这两个访问不会别名，并且没有依赖。

更准确地说，C99 6.7.3（第 5 段）如下：

> “如果尝试通过使用具有非 volatile 限定类型的左值来引用具有 volatile 限定类型定义的对象，则行为未定义。”

那么当我们进行类型转换时`a`，是否使用 volatile 限定符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:55:41.433

如有疑问，请运行一些代码 :) 我编写了一些类似（稍微不那么可恶）的测试代码（msvs 2k10 中的 win32 C++ 应用程序）

```
int _tmain(int argc, _TCHAR* argv[]) {
    int a = 0;
    volatile int b = 0;

    a = 1; //breakpoint 1
    b = 2; //breakpoint 2
    *(int *) &b  = 0; //breakpoint 3
    *(volatile int *) &b  = 0; //breakpoint 4

    return 0;
} 
```

在为发布而编译时，我可以在 2 和 4 处断点，但不能在 1 和 3 处。

我的结论是类型转换决定了行为，并且 1 和 3 被优化掉了。直觉支持这一点 - 否则编译器必须保留某种类型的所有内存位置列表作为易失性并检查每次访问（硬，丑陋），而不是仅仅将它与标识符的类型相关联（更容易和更直观） .

我还怀疑它是特定于编译器的（甚至在编译器中也可能是特定于标志的），并且会在取决于此行为之前在任何平台上进行测试。

实际上从头开始，我只是尽量不依赖这种行为:)

另外，我知道您专门询问数组，但我怀疑这会有所不同。您可以轻松地为数组编写类似的测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:42:33.280

就像你说的，它的“未定义”。这意味着恶魔可以从你的鼻子里出来。请尽可能坚持“定义”的行为。说明`volatile`符会要求编译器*不要*优化该值，因为它是一个“重要”和临界值，如果由于不同的优化机制而发生更改，可能会导致问题。但这就是它所*能做*的。

# java - 没有 Java 反射的对象深度克隆

> ID：13199370
> 
> 赞同：2
> 
> 时间：2012-11-02T16:31:31.657
> 
> 标签：java

在没有 Java 反射的情况下进行深度对象克隆的可能性是什么？我使用了使用反射的对象克隆库，但 AppEngine 不允许这样做。

所以我现有的与 Tomcat 一起工作的应用程序不起作用。

**更新：**

推土机库似乎是最好的选择：

```
Mapper mapper = new DozerBeanMapper();
DestinationObject destObject =  mapper.map(sourceObject, DestinationObject.class); 
```

问题是，如果我不需要自定义映射，我可以按原样执行上述操作吗？

例如：

```
Cat cat = new Cat();

Mapper mapper = new DozerBeanMapper();
Cat newCat =  mapper.map(cat, Cat.class); 
```

**更新：**

当我使用 Dozer 运行我的应用程序时，出现此错误：

```
Caused by: java.lang.NoSuchMethodError: org.apache.commons.lang.StringUtils.contains(Ljava/lang/String;Ljava/lang/String;)Z
    at org.dozer.util.ResourceLoader.getResource(ResourceLoader.java:53)
    at org.dozer.util.DefaultClassLoader.loadResource(DefaultClassLoader.java:44)
    at org.dozer.config.GlobalSettings.loadGlobalSettings(GlobalSettings.java:116)
    at org.dozer.config.GlobalSettings.<init>(GlobalSettings.java:67)
    at org.dozer.config.GlobalSettings.<clinit>(GlobalSettings.java:46) 
```

看起来我错过了一些东西，虽然我使用 Maven 添加了推土机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:33:29.033

好吧，您总是可以手动进行深度克隆，只需覆盖`clone()`类中的方法。非常重复的工作，但可行。而且也比使用反射更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:37:25.140

您是否考虑过使用[推土机](http://dozer.sourceforge.net/documentation/gettingstarted.html)？

[来自他们的网站]

> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。
> 
> Dozer 支持简单属性映射、复杂类型映射、双向映射、隐式-显式映射以及递归映射。这包括映射集合属性，这些属性也需要在元素级别进行映射。
> 
> Dozer 不仅支持属性名称之间的映射，还支持类型之间的自动转换。大多数转换方案都支持开箱即用，但 Dozer 还允许您通过 XML 指定自定义转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:34:46.233

你可以试试 ObjectOutputStream/ObjectInputStream。这使用反射，但您的 SecurityManager 可能允许它，因为您没有直接调用它。

# php - 静态和全局？

> ID：13199372
> 
> 赞同：0
> 
> 时间：2012-11-02T16:31:37.793
> 
> 标签：php, forms, global

我查看了 PHP 文档，似乎这是可能的，但它仍然使用 global 删除我的变量值。有什么我想念的吗？

我将 $var 设置为一个值。然后将其声明为全局 $var。那么值不应该改变，我将能够在全球范围内使用它，对吗？原谅我的无知，我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:35:01.483

也许您可以尝试使用超全局变量。您可以使用 $GLOBALS 变量来执行此操作。

```
$GLOBALS['newvar'] = 'foo'; 
```

如果您尝试访问两个不同文档之间的变量，则可以改用会话：

```
session_start();
$_SESSION['newvar'] = 'bar'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:38:38.447

该`global`关键字不会使变量成为全局变量，它使变量可以在函数的上下文中访问。

如果要使变量全局化，可以使用`$GLOBALS`数组

从[手册](http://php.net/manual/en/language.variables.scope.php)：

> $GLOBALS 数组是一个关联数组，全局变量的名称是键，该变量的内容是数组元素的值。注意 $GLOBALS 如何存在于任何范围内，这是因为 $GLOBALS 是超全局的。

```
$GLOBALS['myvar'] = 'test'; // $GLOBALS['myvar'] can now be accessed in any scope 
```

# php - 通过引用返回多个值

> ID：13199374
> 
> 赞同：0
> 
> 时间：2012-11-02T16:31:43.733
> 
> 标签：php, function, reference, return

我正在尝试将函数中的多个变量返回到另一个 php 页面。

我查看了其他来源，但无法正常工作。我在这里做错了什么？

```
function byRef($value1, &$value2, &$value3){

    global $value1, $value2, $value3;

    string.$value1 = "Hello";
    string.$value2 = "World";
    string.$value3 = " ";

    string.$value3 .= $value1 . $value2 ;

}

byRef($value1, $value2, $value3);

echo $value3; 
```

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:22:45.807

不要使用全局，它会导入不在函数中的变量。

不要使用那个字符串。东西要么。我不知道它是什么或它是否存在，但不要使用它。

```
<?php

$value1 = 'not hello';

function byRef($value1, &$value2, &$value3){

    $value1 = "Hello";
    $value2 = "World";
    $value3 = " ";

    $value3 .= $value1 . $value2 ;

}

byRef($value1, $value2, $value3);

echo $value3; 
```

# visual-studio - 如何使用 Team Foundation Server 打开要编辑的项目

> ID：13199375
> 
> 赞同：7
> 
> 时间：2012-11-02T16:31:46.343
> 
> 标签：visual-studio, tfs, visual-studio-2012

我刚开始使用新的免费 Team Foundation Server (http://tfs.visualstudio.com/) 我有一个项目已签入，我可以在网站的源代码查看器中看到所有源代码。

我在 Visual Studio 中连接到我的项目。但是，我的解决方案资源管理器中绝对没有出现任何内容，而且我似乎无法弄清楚如何加载所有源代码以便我可以处理我的项目。

有什么建议么？我不知道如何使用它，并且我已经阅读了网站上的所有教程，但它们并没有告诉我如何实际打开我的项目。

同样，我已连接到该项目，但“解决方案资源管理器”中没有显示任何内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T16:37:03.933

在 Team Explorer 中导航到您的项目并双击解决方案。

或者，转到文件...源代码管理...高级...从源代码管理中打开。

您需要映射您的工作区以使任何选项起作用。

要映射工作区，请从 Source Control Explorer 的 Workspace 向下钻取中选择工作区选项。从那里选择您要映射和编辑的工作空间。您只需从那里选择本地文件夹即可。

# html - 将 PSD 转换为 XHTML

> ID：13199378
> 
> 赞同：0
> 
> 时间：2012-11-02T16:32:00.533
> 
> 标签：html, css, slice, psd

如果我要将 PSD 转换为 HTML，在创建典型网页时，我在 Photoshop 中的文档大小应该是多少？

我还没有尝试过，但我脑子里想的是，我将根据我的文档大小来缩放我的图像，如果我的文档大小太大或太小，它不会反映我想要实现的目标我的网页。

如何在 Photoshop 中设计一个典型的网页，以使布局在大小上与网页的布局相同？

这是基于居中网页而不是全宽网页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:34:53.980

真的很简单.. 您显然知道您希望您的“居中”网页有多宽？在 Photoshop 中创建一个与该大小完全相同的画布。为网络和设备保存，Photoshop 应该会自动为您创建一个该大小的表格。然后，您所要做的就是将其居中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:40:43.257

这取决于您的目标显示器大小。您应该寻找较低的公分母。如果你认为你会得到很多小屏幕，那么**955px**是一个不错的开始尺寸（目标尺寸是 1024），但如果你认为你的网站会在更大的显示器中被查看，你可以高达**1140px**（针对 1280 个屏幕）。

这实际上取决于您打算针对谁。对此没有一个答案。

另外，请记住，随着响应式设计的出现，您必须针对不同的分辨率设计不同的布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:40:19.957

1.  首先分析您的用户群。主要是移动用户吗？笔记本电脑用户？桌面超级用户？
2.  根据您的分析，查找最流行的屏幕分辨率的一些统计数据。
3.  决定您是要采用固定大小的布局还是流动布局。对于刚接触网页设计的平面设计师来说，固定尺寸会更“舒适”，因为这意味着，一旦你设置了最外层宽度，你的大量决定都是基于精确测量的。Fluid 稍微复杂一些，但它具有可扩展性和灵活性足以处理不同显示器尺寸等问题的优势。

您应该对一些基于网格的解决方案进行一些研究，例如 Twitter 的 Bootstrap (http://twitter.github.com/bootstrap/)、960gs (http://960.gs/) 或 Blueprint (http:// www.blueprintcss.org/) ... 也有 Photoshop 模板可以帮助您按照他们的规范进行设计。

在网络上，第一条规则是放弃控制一切的需要。有些战斗根本不值得付出努力，而且您经常会发现网络上的约定在用户中根深蒂固，以至于试图产生与这些约定背道而驰的设计通常会给您带来更多麻烦（当您尝试从设计到代码）并在此过程中混淆您的用户。

祝你好运！

# android - 如何将 Android 片段添加到我的 FragmentActivity？

> ID：13199379
> 
> 赞同：5
> 
> 时间：2012-11-02T16:32:00.540
> 
> 标签：android, android-fragments, android-support-library

我正在使用 Compatibility Package，修订版 4 将 Fragments 添加到我的 Gingerbread 应用程序中。没有记录错误，但是片段不再显示在屏幕上（在我开始清理它并添加方法之前曾经有一次！）。底部的 Fragment 有望封装我的导航方法，例如“goHome”和“goCart”，并放置在所有屏幕上。
我尝试将元素添加到我的布局中，并收到了 android.view 的可怕 Classnotfound 错误。使用这种方法，我已经走得更远了。

我的日志显示片段已添加。这是片段：

```
public class BottomFragment extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    View v = inflater.inflate(R.layout.bottom_nav, container, false);
    Log.v("BottomFragment","onCreate after inflate");
    /*
    ImageView find_img = (ImageView)v.findViewById(R.id.bottom_find_image);

    find_img.setOnClickListener( new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Log.v("BottomFragment.OnClickListener"," with Find clicked");
            findRegistry();
        }
    });
     */
    // Inflate the layout for this fragment
    return v; 
```

日志消息如上所示。这是添加片段的活动：

```
public class StartActivity extends FragmentActivity {

public static Context appContext;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.find_main);

    appContext = getApplicationContext();

    // Create new fragment and transaction
    BottomFragment newFragment = new BottomFragment();

    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add( R.id.frame_bottom_frag, newFragment );
     // Commit the transaction
    transaction.commit();
} 
```

这是 Fragment 使用的 bottom_nav.xml。

```
<RelativeLayout
    android:id="@+id/bottom_nav"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    <ImageView
            android:layout_height="wrap_content"
            android:layout_width="60dp"
            android:id="@+id/bottom_home_image"
            android:src="@drawable/home"
            android:clickable="true"
            android:onClick="goHome"
            />

    <ImageView
            android:layout_height="wrap_content"
            android:layout_width="60dp"
            android:id="@+id/bottom_shopping_cart_image"
            android:src="@drawable/shopping_cart"
            android:clickable="true"
            android:onClick="goCart"
            />
</LinearLayout>
</RelativeLayout> 
```

这是 Activity 布局 find_main：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
     android:layout_height="fill_parent" android:layout_gravity="center">
<TableLayout
    android:id="@+id/main_screen"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >      

<TableRow android:padding="20dip">

    <ImageView
            android:layout_height="60dip"
            android:layout_width="60dip"
            android:id="@+id/home_image"
            android:src="@drawable/create"

            android:clickable="true"
            android:onClick="goHome"
            />

        <TextView
                android:id="@+id/home_text"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/home" android:textAppearance="?android:attr/textAppearanceLarge"
                android:textStyle="bold"
                android:layout_toRightOf="@id/home_image"

                android:clickable="true"
                android:onClick="goCart"/>
</TableRow>
</TableLayout>   
<FrameLayout android:name="com.marcole.gingerbread.grw.BottomFragment"
          android:id="@+id/frame_bottom_frag"
          android:layout_weight="2"
          android:layout_width="0dp"
          android:layout_height="match_parent">
</FrameLayout>
</LinearLayout> 
```

继承人的一些日志：

```
11-02 16:20:57.650: INFO/ActivityManager(61): Start proc com.marcole.gingerbread.grw for     activity com.marcole.gingerbread.grw/.StartActivity: pid=522 uid=10041 gids={3003}
11-02 16:20:57.690: INFO/dalvikvm(513): JNI: AttachCurrentThread (from ???.???)
11-02 16:20:57.690: INFO/AndroidRuntime(513): NOTE: attach of thread 'Binder Thread #3' failed
11-02 16:20:58.090: WARN/ActivityThread(522): Application com.marcole.gingerbread.grw is waiting for the debugger on port 8100...
11-02 16:20:58.100: INFO/System.out(522): Sending WAIT chunk
11-02 16:20:58.110: INFO/dalvikvm(522): Debugger is active
11-02 16:20:58.310: INFO/System.out(522): Debugger has connected
11-02 16:20:58.310: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:58.510: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:58.721: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:58.920: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:59.121: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:59.322: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:59.522: INFO/System.out(522): waiting for debugger to settle...
11-02 16:20:59.721: INFO/System.out(522): debugger has settled (1408)
11-02 16:21:00.771: DEBUG/dalvikvm(522): GC_EXTERNAL_ALLOC freed 59K, 49% free 2757K/5379K, external 2121K/2137K, paused 62ms
11-02 16:21:00.851: VERBOSE/BottomFragment(522): onCreate after inflate
11-02 16:21:01.521: INFO/ActivityManager(61): Displayed com.marcole.gingerbread.grw/.StartActivity: +3s935ms 
```

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:33:19.607

我发现了问题。我需要将 FrameLayout 移动到 TableLayout 内部。从：

```
</TableLayout>   
    <FrameLayout android:name="com.marcole.gingerbread.grw.BottomFragment"
      android:id="@+id/frame_bottom_frag"
      android:layout_weight="2"
      android:layout_width="0dp"
      android:layout_height="match_parent">
   </FrameLayout>
</LinearLayout> 
```

至：

```
</TableRow>
    <FrameLayout android:name="com.marcole.gingerbread.grw.BottomFragment"
                 android:id="@+id/frame_bottom_frag"

                 android:layout_width="wrap_content"
                 android:gravity="bottom"
                 android:layout_centerHorizontal="true"
                 android:layout_height="wrap_content">
    </FrameLayout>
</TableLayout>
</LinearLayout> 
```

现在，如果我能让它一直走到底部！

# python - 从 python gui 打开新窗口

> ID：13199381
> 
> 赞同：0
> 
> 时间：2012-11-02T16:32:08.693
> 
> 标签：python, user-interface, window, pyqt

我在我的 python gui 应用程序中打开新窗口时遇到问题。我有 3 个课程（显示第一次登录，然后打开了 2 个窗口）。这工作正常：

```
class LoginDialog(QtGui.QDialog):
    def __init__(self, parent = None):
        super(LoginDialog, self).__init__(parent)
    .....

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
            QtGui.QWidget.__init__(self, parent)
    .....

class ImageViewerMainWindow(QtGui.QMainWindow):
    def __init__(self, path, parent = None):
        super(ImageViewerMainWindow, self).__init__(parent)
    .....

if __name__ == "__main__":
    qtApp = QtGui.QApplication(sys.argv)

    loginDlg = LoginDialog()
    if not loginDlg.exec_():
        sys.exit(-1)

    MyMainWindow = MainWindow()
    MyMainWindow.show()

    viewer = ImageViewerMainWindow("C:\image.jpg")
    viewer.show()

    sys.exit(qtApp.exec_()) 
```

我需要从 MainWindow 执行查看器，但是当我这样放置时，它只会闪烁并消失：

```
class MainWindow(QtGui.QMainWindow):
        def __init__(self, parent = None):
                QtGui.QWidget.__init__(self, parent)
        .....
        def DoOpenImageViewer(self):
                viewer = ImageViewerMainWindow("C:\image.jpg")
                viewer.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:45:46.250

您需要保留对查看器的引用，否则新窗口会在`viewer`超出范围时被破坏并被垃圾收集。如果您一次只需要一个窗口，您可以执行以下操作：

```
class MainWindow(QtGui.QMainWindow):
        def __init__(self, parent = None):
                QtGui.QWidget.__init__(self, parent)
        .....
        def DoOpenImageViewer(self):
                self.viewer = ImageViewerMainWindow("C:\image.jpg")
                self.viewer.show() 
```

否则，您可以使用列表来存储引用。

# performance - JMeter在重放测试期间的不同结果

> ID：13199383
> 
> 赞同：0
> 
> 时间：2012-11-02T16:32:14.043
> 
> 标签：performance, jmeter

我对 JMeter 有一个奇怪的问题。
我已经录制了某种 Web 应用程序，没有任何问题。播放测试时出现问题。出于某种原因，我在播放期间收到的结果与在录制期间不同。

当我比较录制和播放期间发出的 Http 请求时，我看不到任何区别（除了一些安全令牌，我从早期请求中提取并作为参数传递）。更准确地说，在录制过程中，我收到了一个大主体（> 5kB）的响应，而在播放过程中，响应主体是空的。响应代码为 200（确定）。这个主体包含来自数据库的关键数据，所以我担心这个 JMeter 脚本所做的测量不会反映应用程序的实际行为，根本不会测量我真正需要的东西。

现在我的问题：

1.  是否有一些工具或 JMeter 插件可以更有效地查看 HTTP 请求的内容及其响应？如果我可以比较录制和播放期间提出的请求，那就太好了。到目前为止，我使用了两个侦听器：“查看结果树”。我夹在它们之间以比较录制和播放的请求。
2.  JMeter 中是否有一些已知的错误可以解释这种差异？例如与录制过程有关的东西？

以下是请求示例：

```
POST http://10.133.27.81:8080/c/portal/render_portlet

POST data:
p_l_id=69210&p_p_id=blank_WAR_Blank_INSTANCE_iNM3&p_p_action=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-2&p_p_col_pos=1&p_p_col_count=2

[no cookies]

Request Headers:
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Accept-Language: pl
Accept: */*
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
csrf_token: 1GXK-0QD7-GFPJ-JLDG-JP2G-J390-BFLG-7LL7
Pragma: no-cache
Method: POST /c/portal/render_portlet HTTP/1.1
X-Requested-With: OWASP CSRFGuard Project
Referer: http://10.133.27.81:8080/group/bou
Accept-Encoding: gzip, deflate
Content-Length: 143
Host: 10.133.27.81:8080 
```

* * *

**更新**：为了确保哪些标头或参数是恒定的，我在不同的会话期间对相同的测试用例进行了 4 次记录并比较了它们，所以我很确定只需`csrf_token`要从其他请求中获取值的字段。我添加了调试采样器以验证是否正确获取了此值。

* * *

**更新 2**：发现问题。
有两个问题：

1.  当您进行搜索（Ctrl-F）时，JMeter 中有一个错误，它会搜索整个项目，除了`HTTP Header Menager`s 和我的请求包含`csrf_token`在标题中（我在发布此问题之前检测到）。使用文本编辑器在 xml 中进行搜索是一个很好的解决方法。
2.  当我试图找到问题的根源时，在我找到第一个问题之前，我通过删除 a 添加了一个新问题`HTTP Cookie Manager`（我为此责备自己和 IE）。

通常将 Internet Explorer 更改为带有 HttpFox 附加组件的 FireFox 有助于发现问题。

感谢大家的支持。

马立克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:34:08.040

响应代码 200 并不一定意味着在应用程序级别一切顺利。

要了解更多详细信息，您可以使用[Debug sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)和[Debug PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#Debug_PostProcessor)。[这里](http://www.sourcepole.ch/debugging-jmeter-tests)
的 例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:33:08.257

您的问题肯定来自您没有计算的缺少的动态请求参数。

例如在 csrf_token 标头中查找您是否将其设置为变量？或者您是否传输其初始记录的值，以及包含某些哈希数据或数字数据的任何参数，这些数据引用您的页面或请求中不存在的某些内容。

例如 col pos 我看到 p_p_col_id 和相关参数，你确定它们在你的回放中引用了一些东西。

在这种情况下，出现 JMeter 错误的可能性非常小。

# c - 为什么这个 OpenMP 并行操作没有尽可能快？

> ID：13199384
> 
> 赞同：1
> 
> 时间：2012-11-02T16:32:14.170
> 
> 标签：c, parallel-processing, openmp

我有一个必须使用 OpenMP 库实现的 C 程序。它的结构是：

```
for (t = 0; t < IT; ++t) {
#pragma omp parallel for private(i, j, k, l) schedule(dynamic)
    for (i = 0; i < n; ++i) {
        for (j = 0; j < n; ++j) {
                for (k = 0; k < n; ++k) {
                    for (l = 0; l < n; ++l) {
                        // calculations 0
                    }
                }

        // calculations 1
        }
    }

#pragma omp parallel for private(i, j) schedule(dynamic)
    for (i = 0; i < n; ++i) {
        for (j = 0; j < n; ++j) {
            // calculations 2
        }
    } 
} 
```

该程序对矩阵进行一些计算。计算 2 必须在计算 0 和 1 完成后进行，因为它会对矩阵进行一些修改。

问题是加速非常糟糕，即程序不可扩展。给定输入的串行版本在 79.46 秒内运行。使用两个线程运行时，它在 41 秒内完成，几乎完美地加速了 1.93 倍，但在运行 3 个线程时，它在 37.86 秒内完成（加速仅为 2.1 倍），而使用 4 个线程时，它需要 34.104 秒（加速仅为 2.3 倍）。

为什么这不可扩展？

PS。我有一个 4 核的 Intel i5 430M。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T17:50:34.413

它不是那么可扩展，因为您拥有 Intel Core I5。Intel Core I5 有 2 Cores 和 4 Threads，所以只有 2 个真正的核心，而不是 4 个。（这种处理器使用超线程技术）

具有 2 个内核和 2 个线程的处理器（例如 Dual Core、Core 2 Duo、Core I3）和您的 Core I5（具有 2 个内核和 4 个线程并使用超线程来充当四核处理器）之间的区别是您的超线程酷睿 I5 的性能提升**可**高达 30%。但是您无法将超线程 Core I5 与 Core I7（具有 4 个内核和 4 个线程）进行比较。

# vb.net - 设置范围值时不评估 Excel 命令

> ID：13199387
> 
> 赞同：1
> 
> 时间：2012-11-02T16:32:25.877
> 
> 标签：vb.net, excel

我正在尝试使用多维字符串数组来填充 Excel 工作表，并且在插入公式时遇到了麻烦。下面的小案例说明了这个问题：

```
Dim tA(3, 3) As String
tA(1, 1) = "=HYPERLINK(""www.stackoverflow.com"")"
tA(1, 2) = "=HYPERLINK(""www.stackexchange.com"")"
tA(2, 1) = "=2+5"
tA(2, 2) = "Normal Text"
worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).Value = tA 
```

评估此代码时，Excel 工作表不会自动转换超链接或评估公式。也就是说，当我查看 Excel 时，(2,1) 处的单元格将根据需要显示“=2+5”而不是“7”。有没有办法强制 excel 评估所有单元格以查看是否存在命令？

我应该注意，如果我将命令插入到单个单元格中，那么它会被正确评估，但这不是一个选择，因为我有数千个单元格并且一次填充一个单元格会慢几个数量级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:54:47.933

您会得到它，因为公式作为值被传输，将以下行添加到您的代码中，您应该很高兴：

`worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).formular1c1= worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).formular1c1`

完整的代码是

```
Dim tA(3, 3) As String
tA(1, 1) = "=HYPERLINK(""www.stackoverflow.com"")"
tA(1, 2) = "=HYPERLINK(""www.stackexchange.com"")"
tA(2, 1) = "=2+5"
tA(2, 2) = "Normal Text"
worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).Value = tA
worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).formular1c1= worksheet.Range(worksheet.Cells(1, 1), worksheet.Cells(4, 4)).formular1c1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:55:00.817

...这有点像黑客，但我过去曾成功使用过它...

将公式中的“=”替换为您不会使用的另一个字符（我通常使用“#”，但您可以使用任何字符），然后使用替换。

您的代码如下所示：

```
Dim tA(3, 3) As String
tA(1, 1) = "#HYPERLINK(""www.stackoverflow.com"")"
tA(1, 2) = "#HYPERLINK(""www.stackexchange.com"")"
tA(2, 1) = "#2+5"
tA(2, 2) = "Normal Text"
Sheets(1).Range(Sheets(1).Cells(1, 1), Sheets(1).Cells(4, 4)).Value= tA
Sheets(1).Range(Sheets(1).Cells(1, 1), Sheets(1).Cells(4, 4)).Replace "#", "=" 
```

希望这可以帮助

# wordpress - 用于 wordpress 开发的虚拟 /etc/hosts 文件

> ID：13199388
> 
> 赞同：1
> 
> 时间：2012-11-02T16:32:26.263
> 
> 标签：wordpress, web, dns, hosts

我正在开发一个 wordpress 网站（mywebsite.net）并有两个版本：

*   已发布版本（主机位于 IP 地址 xx.xx.xx.xx）
*   本地版本（本地主机在 127.0.0.1）

如果我想在本地版本和托管版本之间切换，我必须更改 /etc/hosts 文件。

有没有更简单的切换方式？例如，我正在考虑一个将覆盖 DNS 设置的 firefox 扩展：它将允许我使用 Safari 访问已发布的版本，并使用 firefox 访问本地版本。

我也可以使用不同的 dns，但它会破坏绝对的 wordpress 链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:54:57.277

您可以在 hosts 文件中创建一个虚假的本地域，例如 wordpress.localhost。我有几十个，都在 127.0.0.1 上运行。域是不同的，但在大多数 PHP 应用程序中，如果有的话，这是一个简单的更改。您还可以创建一个本地子域，例如 dev.mywebsite.net，这在某些情况下会有所帮助。您提到了断开的链接，但我发现这是始终使用相对路径的一个很好的理由。

# java - 如何在同一个 Workbench 中运行 Eclipse 插件？

> ID：13199391
> 
> 赞同：0
> 
> 时间：2012-11-02T16:32:44.527
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我通过向导创建了简单的 Eclipse 插件，`Hello, World Command`但它在单独的 Eclipse 中运行。

是否可以在我工作的同一个 Eclipse 中运行插件？

我想为设计过程写一些助手。

**更新**

我的 Eclipse 版本是 Juno

我的操作系统版本是 Windows Prof 7 x64

Eclipse 下运行`C:/Program Files/Java/jdk1.7.0/bin/javaw.exe`根据`eclipse.ini`

运行配置`Eclipse Application`引用相同的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:43:28.487

我认为您需要在 Eclipse 中**安装插件**才能在 Eclipse 中像其他插件一样运行它。

有关 Eclipse 插件安装的常见问题解答可在此处找到：[**常见问题解答如何安装新插件？**](http://wiki.eclipse.org/FAQ_How_do_I_install_new_plug-ins%3F)

# xpages - 如何使用 csjs 或 ssjs 展开可折叠部分？

> ID：13199394
> 
> 赞同：0
> 
> 时间：2012-11-02T16:33:01.150
> 
> 标签：xpages

我在 xPage 上有几个部分。

如何使用 csjs 或 ssjs 展开可折叠部分？

我可以一次展开/折叠吗？我可以单独做吗？

如何使用 csjs 或 ssjs 展开/折叠可折叠部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:11:14.847

考虑到您的部分名称，`section1`您可以使用以下 SSJS 代码展开/折叠特定部分：

```
getComponent("section1").setClosed(boolean); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T17:11:56.507

要同时设置所有展开/折叠，请将属性计算为 viewScope 变量，然后切换 viewScope 属性。这是我以前使用过的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T16:45:01.067

我知道这是一个老问题，我相信使用 SSJS 来完成这个简单的任务，完全或部分刷新有点过头了。使用客户端JS更简单。使用 JQuery，这是您可以使用并将其附加到单击事件的代码：

`x$("#{id:section1}").show(); x$("#{id:section1}").hide();`

# php - 从阻止 CURL 的页面中获取 HTML

> ID：13199395
> 
> 赞同：0
> 
> 时间：2012-11-02T16:33:06.477
> 
> 标签：php, curl, fopen

我被要求从页面中抓取某行，但似乎该站点已阻止 CURL 请求？

有问题的网站是[http://www.habbo.com/home/Intricat](http://www.habbo.com/home/Intricat)

我尝试更改 UserAgent 以查看他们是否阻止了它，但它似乎没有起到作用。

我正在使用的代码如下：

```
<?php

$curl_handle=curl_init();
//This is the URL you would like the content grabbed from
curl_setopt($curl_handle, CURLOPT_USERAGENT, "Mozilla/5.0");
curl_setopt($curl_handle,CURLOPT_URL,'http://www.habbo.com/home/Intricat');
//This is the amount of time in seconds until it times out, this is useful if the server you are requesting data from is down. This way you can offer a "sorry page"
curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,2);

curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
$buffer = curl_exec($curl_handle);
//This Keeps everything running smoothly
curl_close($curl_handle);

// Change the message bellow as you wish, please keep in mind you must have your message within the " " Quotes.
if (empty($buffer))
{
    print "Sorry, It seems our weather resources are currently unavailable, please check back later.";
}
else
{
    print $buffer;
}
?> 
```

如果他们阻止了 CURL 请求，我可以从该页面获取一行代码的任何想法？

编辑：在通过我的服务器运行 curl -i 时，该站点似乎首先设置了一个 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:38:37.223

你对你所说的块类型不是很具体。有问题的网站`http://www.habbo.com/home/Intricat`首先检查浏览器是否启用了 javascript：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
    <script type="text/javascript">function setCookie(c_name, value, expiredays) {
        var exdate = new Date();
        exdate.setDate(exdate.getDate() + expiredays);
        document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString()) + ";path=/";
    }
    function getHostUri() {
        var loc = document.location;
        return loc.toString();
    }
    setCookie('YPF8827340282Jdskjhfiw_928937459182JAX666', '179.222.19.192', 10);
    setCookie('DOAReferrer', document.referrer, 10);
    location.href = getHostUri();</script>
</head>
<body>
<noscript>This site requires JavaScript and Cookies to be enabled. Please change your browser settings or upgrade your
    browser.
</noscript>
</body>
</html> 
```

由于 curl 没有 javascript 支持，您要么需要使用具有 - 或者 - 您需要模仿该脚本并创建自己的 cookie 和新请求 URI 的 HTTP 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:37:32.250

进入您的浏览器并复制正在发送的确切标头，该站点将无法判断您正在尝试卷曲，因为请求看起来完全相同。如果使用 cookie - 将它们作为标题附加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:38:04.583

这是我几年前做的 Curl 课的剪切和粘贴，希望你能从中挑选一些宝石。

```
function get_url($url)
{ 
    curl_setopt ($this->ch, CURLOPT_URL, $url); 
    curl_setopt ($this->ch, CURLOPT_USERAGENT, $this->user_agent);
    curl_setopt ($this->ch, CURLOPT_COOKIEFILE, $this->cookie_name);
    curl_setopt ($this->ch, CURLOPT_COOKIEJAR, $this->cookie_name);
    if(!is_null($this->referer))
    {
        curl_setopt ($this->ch, CURLOPT_REFERER, $this->referer);  
    }
    curl_setopt ($this->ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt ($this->ch, CURLOPT_HEADER, 0); 
    if($this->follow)
    {
        curl_setopt ($this->ch, CURLOPT_FOLLOWLOCATION, 1);
    }
    else
    {
        curl_setopt ($this->ch, CURLOPT_FOLLOWLOCATION, 0);
    }
    curl_setopt ($this->ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt ($this->ch, CURLOPT_HTTPHEADER, array("Accept: text/html,text/vnd.wap.wml,*.*"));
    curl_setopt ($this->ch, CURLOPT_SSL_VERIFYPEER, FALSE);  // this line makes it work under https

    $try=0;
    $result="";
    while( ($try<=$this->retry_attempts) && (empty($result)) )  // force a retry upto 5 times
    {
        $try++;
        $result = curl_exec($this->ch);
        $this->response=curl_getinfo($this->ch);
        // $response['http_code'] 4xx is an error
    }
    // set refering URL to current url for next page.
    if($this->referer_to_last) $this->set_referer($url);

    return $result; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T22:20:34.780

我知道这是一个很老的帖子，但是由于我今天必须回答自己同样的问题，所以我在这里分享给来的人，它可能对他们有用。我也完全了解 OP 的`curl`具体要求，但是 - 就像我一样 - 可能有人对解决方案感兴趣，无论是否`curl`。

我想获得的页面`curl`阻止了它。如果阻止**不是**因为`javascript`，而是因为代理（这是我的情况，并且设置代理`curl`没有帮助），那么`wget`可能是一个解决方案：

```
wget -o output.txt --no-check-certificate --user-agent="Mozilla/5.0 (Windows NT 5.2; rv:2.0.1) Gecko/20100101 Firefox/4.0.1" "http://example.com/page" 
```

# c++ - OpenMP：为“共享”预定“共享”？

> ID：13199398
> 
> 赞同：9
> 
> 时间：2012-11-02T16:33:15.737
> 
> 标签：c++, vector, openmp

请参阅此函数（矩阵向量积）：

```
std::vector<double> times(std::vector<std::vector<double> > const& A, std::vector<double> const& b, int m, int n) {

    std::vector<double> c;
    c.resize(n);

    int i, j;
    double sum;

    #pragma omp parallel for default(none) private(i, j, sum) shared(m, n, A, b, c)
    for (i = 0; i < m; ++i) {
        sum = 0.0;
        for (j = 0; j < n; j++) {
            sum += A[i][j] * b[j];
        }
        c[i] = sum;
    }

    return c;
} 
```

当尝试使用 OpenMP 编译它时，编译器失败并显示：

```
Invoking: GCC C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -fopenmp -MMD -MP -MF"src/OpemMPTutorial.d" -MT"src/OpemMPTutorial.d" -o "src/OpemMPTutorial.o" "../src/OpemMPTutorial.cpp"
../src/OpemMPTutorial.cpp:127: warning: ignoring #pragma omp end
../src/OpemMPTutorial.cpp: In function 'std::vector<double, std::allocator<double> > times(std::vector<std::vector<double, std::allocator<double> >, std::allocator<std::vector<double, std::allocator<double> > > >&, std::vector<double, std::allocator<double> >&, int, int)':
../src/OpemMPTutorial.cpp:200: error: 'b' is predetermined 'shared' for 'shared'
../src/OpemMPTutorial.cpp:200: error: 'A' is predetermined 'shared' for 'shared'
make: *** [src/OpemMPTutorial.o] Error 1 
```

这里有什么问题？

（请注意，简单地删除`const`结果会导致相同的错误。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T20:54:51.087

我遇到了一个非常相似的问题，并且在我从OpenMP 指令部分中删除了共享`const`变量之后，可以使用 Apple 的 GCC 4.2 编译这样的程序。`shared`它们被预先确定为共享的，因为它们是恒定的，并且不需要为每个线程制作副本。而且编译器似乎只是不接受在它已经知道的时候明确地告诉它......</p>

我也会删除`default(none)`规范（但请参阅[下面的评论](https://stackoverflow.com/questions/13199398/openmp-predetermined-shared-for-shared/13770822#comment30469273_13770822)）。OpenMP 旨在减少显式规范，所以让它完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:08:28.227

这是由 gcc-4.2 中的 OpenMP 支持不足引起的。代码片段使用 gcc-4.7 编译没有问题。

# javascript - 微调器未加载到外部链接中

> ID：13199406
> 
> 赞同：0
> 
> 时间：2012-11-02T16:33:34.020
> 
> 标签：javascript, jquery, jquery-mobile

我正在开发一个应用程序，其中有内部和外部链接。我注意到点击外部链接时 Jquery mobile 不会加载微调器：

例子

```
<a href = "/products">Spinner is shown </a>

<a href = "othersite.com" rel = "external">Spinner is NOT shown </a> 
```

我努力了 ：

```
$('a[href][rel=external]').click(function(){  //doesnt work
     $.mobile.showPageLoadingMsg();

 } 
```

和：

```
$('a[href][rel=external]').click(function(){
// shows the spinner but it gets stuck forever
     $.mobile.showPageLoadingMsg();

    $('#loadingDiv').div("refresh");

} 
```

当点击 rel = 外部链接时，有人可以帮我显示微调器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:58:14.297

[http://jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)

> 指向其他域或具有 rel="external"、data-ajax="false" 或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（rel="external" 和 data-ajax="false"）具有相同的效果，但语义不同：链接到另一个站点或域时应使用 rel="external"，而 data-ajax=" false" 对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是选择链接到外部域的 Ajax 行为。

您不会得到加载微调器，因为它只是进行页面重定向。同样对于您的 jsfiddle，google.com 将无法正常工作，因为它们不允许 iframe 访问。如果您将其更改为另一个站点，例如[http://jsfiddle.net](http://jsfiddle.net)，它将正确切换站点。

如果你必须显示微调器，你可以做这样的事情

[http://jsfiddle.net/RqkYM/10/](http://jsfiddle.net/RqkYM/10/)

```
$('a[href][rel=external]').click(function(e){
    e.preventDefault();
    e.stopPropagation();
     $.mobile.showPageLoadingMsg();
    window.location = $(this).attr('href');

});​ 
```

它将显示微调器然后执行重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:16:56.767

如果需要，您可以使用`$.mobile.changePage()` See [here for docs](http://jquerymobile.com/test/docs/api/methods.html)加载外部页面。 它有一个`showLoadMsg`选项“决定在加载外部页面时是否显示加载消息”。

编辑：

这是一个加载外部页面的示例，如我所描述的：

[http://jsfiddle.net/KYvDv/2/](http://jsfiddle.net/KYvDv/2/)

```
$.mobile.changePage( "/gQxCN/1/show/", {
    showLoadMsg: true
}); 
```

# eclipse - 如何访问用户当前从 Eclipse 插件打开的文件？

> ID：13199407
> 
> 赞同：2
> 
> 时间：2012-11-02T16:33:34.667
> 
> 标签：eclipse, eclipse-plugin

我对 eclipse 插件开发很陌生，坦率地说，我对 eclipse 本身很陌生。我试图找到一种方法来访问用户当前正在处理哪些文件的列表，甚至可能更具体地说，这些文件的哪些部分（哪个类、方法、代码块等）。

我在想我想让插件获取有关当前在选项卡中打开哪些文件的信息，然后从那里开始，但我什至不知道如何做到这一点。我一直在 help.eclipse.org 上搜索 eclipse 文档，但我仍然没有找到任何对我想做的事情有用的东西。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:11:22.860

您应该能够从工作台走到工作台页面 ( [IWorkbenchPage](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IWorkbenchPage.html) )，这是一个 findEditors 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:17:22.030

试试下面的代码：

```
IWorkbenchPage[] pages = PlatformUI.getWorkbench()
    .getActiveWorkbenchWindow().getPages();

for (IWorkbenchPage page : pages) {
    IEditorReference[] references = page.getEditorReferences();

    for (IEditorReference reference : references) {
        IEditorInput input = reference.getEditorInput();
    }
} 
```

# android - 模拟器不显示在 ddms 的设备视图中

> ID：13199412
> 
> 赞同：1
> 
> 时间：2012-11-02T16:34:08.357
> 
> 标签：android, eclipse, android-emulator, ddms

当我尝试使用我设置的配置之一（例如 Android233）进行调试时，模拟器实际上从未启动。我只是在我的任务栏中看到一个绿色的小图标，上面写着“正在启动 Android233”，但它永远不会启动。我让它在那里坐了几个小时，它从不做任何事情。我不知道这是否相关，但我的模拟器没有显示在 DDMS 透视图的设备视图中。我有一个物理的 Android 设备，它显示在设备视图中。我的问题是，发生了什么，我该如何解决？

感谢您花时间阅读我的问题:)

我以为我已经解决了问题，但它又停止了工作。这里有更多信息：当我运行调试配置时，在我的 Ecplipse 窗口的右下角显示：“正在启动 MyDebugConfig (100%)”，然后旁边有一个绿色图标。
我查看了任务管理器，模拟器不在里面。我查看了 DDMS，但没有列出我的 AVD，LogCat 或 Thread 或其他任何内容中都没有任何内容。我设置了调试配置以提示我选择设备，但它从不这样做。它只是加载我的 AVD，即使我连接了手机（在 DDMS 中可见）。我好难过。自从我开始使用 Eclipse 以来，我就遇到了这个问题，我不知道该怎么办。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:33:22.383

```
Go to DDMS Perspective =>Click View menu=>reset adb 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-31T04:17:46.300

> 如果您的 genymotion 虚拟设备在 android 设备监视器中看不到，那么试试这个。1.启动android studio 2.启动Android Device Monitor 3.最后启动genymotion虚拟设备，它会出现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:35:58.123

模拟器在运行之前不会出现在 DDMS 部分。

模拟器不会午餐可能是因为您配置错误，目前模拟器的午餐对话框不支持错误消息，但是您可以在尝试通过 Eclipse 为模拟器提供午餐时获取午餐堆栈跟踪。

断开您的物理设备，运行您的项目并选择模拟器。您应该会在 DDMS 控制台上看到一条错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:28:57.190

如果您在 Windows 中尝试运行（启动模拟器后）

```
adb.exe kill-server
adb.exe start-server 
```

并等待重新启动你的 adb

# python - 为程序的重要部分延迟Python中的键盘中断

> ID：13199413
> 
> 赞同：3
> 
> 时间：2012-11-02T16:34:13.817
> 
> 标签：python, keyboardinterrupt

对于程序的重要部分（在我的示例中为一个循环）延迟键盘中断的方法是什么。

我想下载（或保存）很多文件，如果时间太长，我想在下载最近的文件后完成程序。

我需要像[在 Python 中捕获键盘中断的答案中那样使用信号模块而不使用 try-except](https://stackoverflow.com/a/4205386/813946)吗？我可以使用信号处理程序将全局变量设置为 True 并在它为 True 时中断循环吗？

原来的循环是：

```
for file_ in files_to_download:
    urllib.urlretrieve("".join(baseurl, file_), os.path.join(".", file_)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:45:10.293

像下面这样的东西可能会起作用：

```
# at module level (not inside class or function)
finish = False
def signal_handler(signal, frame):
    global finish
    finish = True

signal.signal(signal.SIGINT, signal_handler)

# wherever you have your file downloading code (same module)
for file_ in files_to_download:
    if finish:
        break
    urllib.urlretrieve("".join(baseurl, file_), os.path.join(".", file_)) 
```

# javascript - 没有在添加到 DOM 的新元素上触发主干事件

> ID：13199414
> 
> 赞同：4
> 
> 时间：2012-11-02T16:34:14.557
> 
> 标签：javascript, backbone.js, handlebars.js

我正在使用车把和 Backbone 的组合。我有一个“容器”视图，它有一个数组来保存子视图。每当我添加新视图时，都不会绑定单击事件。

我的帖子视图：

```
Post.View = Backbone.View.extend({
    CommentViews: {},
    events: {
        "click .likePost": "likePost",
        "click .dislikePost": "dislikePost",
        "click .addComment button": "addComment"
    },
    render: function() {
        this.model.set("likeCount", this.model.get("likes").length);
        this.model.set("dislikeCount", this.model.get("dislikes").length);
        this.$('.like-count').html(this.model.get("likeCount") + " likes");
        this.$('.dislike-count').html(this.model.get("dislikeCount") + " dislikes");

        return this;
    }, ... 
```

我在“容器”视图中的回调代码创建了一个新的主干视图，将其附加到车把模板并在页面上显示：

```
success: _.bind(function(data,status,xhr) {
                        $(this.el).find("#appendedInputButton").val('');
                        var newPost = new Post.Model(data);
                        var newPostView = new Post.View({model: newPost, el: "#wall-post-" + newPost.id});
                        var source = $("#post-template").html();
                        var template = Handlebars.compile(source);

                        var html = template(newPost.toJSON());
                        this.$('#posts').append(html);
                        newPostView.render();
                        this.PostViews[newPost.id] = newPostView;
                    }, this), ... 
```

不知道发生了什么，但是最初运行这种代码是为了设置页面（因为 html 是在服务器端呈现的，所以没有把手）并且所有事件都可以正常工作。如果我重新加载页面，我也可以喜欢/不喜欢帖子。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:56:07.227

我没有看到你附加`newPostView.render().el`到 dom 。或者我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:15:21.657

假设“#post-template”包含“likePost”按钮。newPostView 永远不会添加到 DOM 中。

将 el 添加到新的 Post.View 使主干搜索 DOM（并且该元素尚不存在） 4 行后将 HTML 字符串添加到 DOM（假设 this.el 已经在 DOM 中）

如果您在 append(html) 之后创建 Post.View ，则可以找到该元素并且将触发事件。
但是自然的 Backbone 方式是在 Post.View 渲染函数中渲染 HTML 字符串，将结果附加到它的 el 并将该 el 附加到 #posts 元素。

```
success: function (data) {
  var view = new Post.View({model: new Post.Model(data)});
  this.$('#posts').append(view.render().el);
  this.PostViews[data.id] = view;
} 
```

# python - Python 3 - 类的函数数据成员

> ID：13199416
> 
> 赞同：0
> 
> 时间：2012-11-02T16:34:18.587
> 
> 标签：python, python-3.x

我有一个类应该调用 subprocess.call 来运行脚本作为其工作的一部分。

我已经在一个模块中定义了这个类，并且在模块的顶部我已经从子进程中导入了调用函数。

我不确定是否应该只在类的函数之一中使用 call() ，或者是否应该将其设为数据成员，然后通过 self.call 函数对象调用它。

我更喜欢后者，但我不知道该怎么做。理想情况下，我不希望在顶部有子流程并且有类似的东西：

```
class Base:
    def __init__():
        self.call = subprocess.call 
```

但以上不起作用。你会怎么做呢？我对 Python 3 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:20:47.170

你的意思是你想要：

```
import subprocess

class Base:
    def __init__(self):  #don't forget `self`!!!
        self.call = subprocess.call

instance = Base()
print (instance.call(['echo','foo'])) 
```

* * *

虽然我真的更喜欢：

```
import subprocess

class Base:
    call = staticmethod(subprocess.call)
    def __init__(self):
        self.call(["echo","bar"])

instance = Base()
print (instance.call(['echo','foo'])) 
```

* * *

最后，如果您不需要将`call`类作为 API 的一部分，我认为最好只`subprocess.call`在您的方法中使用。

# sql - 如何在 SQL Server 的一行中返回多个具有相同 ID 号的文本字段？

> ID：13199422
> 
> 赞同：2
> 
> 时间：2012-11-02T16:34:47.010
> 
> 标签：sql, sql-server, pivot

我有表：

```
 ID   Note
1   1    aaa
2   1    bbb
3   1    ccc
4   2    ddd
5   2    eee
6   2    fff 
```

我需要将其返回为：

```
 ID   Note1   Note2   Note3
1  1    aaa     bbb     ccc
2  2    ddd     eee     fff 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:38:42.157

您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数进行此类查询。如果您有已知数量的列，则可以对这些值进行硬编码：

```
select *
from
(
  select id, note,
    'Note' + 
       cast(row_number() over(partition by id order by id) as varchar(10)) col
  from yourtable
) x
pivot
(
  max(note)
  for  col in ([Note1], [Note2], [Note3])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5969b/4)

如果您想要将未知数量的`notes`列转换为列，则可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' 
                      + QUOTENAME('Note' + 
                       cast(row_number() over(partition by id order by id) as varchar(10))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id,' + @cols + ' from 
             (
               select id, note,
                ''Note'' + 
                   cast(row_number() over(partition by id order by id) as varchar(10)) col
              from yourtable
            ) x
            pivot 
            (
                max(note)
                for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/caa7c/2)

两者都会产生相同的结果。

```
| ID | NOTE1 | NOTE2 | NOTE3 |
------------------------------
|  1 |   aaa |   bbb |   ccc |
|  2 |   ddd |   eee |   fff | 
```

或者，如果您不想使用该`PIVOT`函数，则可以使用带有`CASE`语句的聚合函数：

```
select id,
  max(case when rn = 1 then note else '' end) Note1,
  max(case when rn = 2 then note else '' end) Note2,
  max(case when rn = 3 then note else '' end) Note3
from
(
  select id, note,
    row_number() over(partition by id order by id) rn
  from yourtable
) src
group by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/caa7c/3)

# java - 扩展 JFrame（空窗口错误）

> ID：13199424
> 
> 赞同：3
> 
> 时间：2012-11-02T16:34:50.860
> 
> 标签：java, swing, graphics, jframe, paintcomponent

我正在做一个简而言之执行以下操作的项目：

1.  从文件中读取整数
2.  将它们存储在一个数组中
3.  创建带有平均线的数字条形图
4.  高于平均值的数字上升，低于平均值的数字下降（两者也是不同的颜色）

编译正确，弹出JFrame窗口，但没有数据打印出来。这只是一个空窗。

这是我的代码：

```
package basicgraphicstester;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import javax.swing.*;

public class BasicGraphicsTester extends JFrame {
    private Image fImageBuffer;
    private Insets fInsets;
    private Graphics g;
    private static final int WIDTH = 800, HEIGHT = 600;
    private static final Color OVER_AVERAGE = Color.blue, 
        UNDER_AVERAGE = Color.red;
    int[] data;

public BasicGraphicsTester() throws FileNotFoundException
{   ReadInputData();
    addWindowListener(new WindowCloser());
    setVisible(true);
    fInsets = getInsets();
    setSize(WIDTH + fInsets.left + fInsets.right, HEIGHT + fInsets.top +fInsets.bottom);
    setTitle("Bar Graph");
    setResizable(false);
    if (((fImageBuffer = createImage(WIDTH, HEIGHT)) != null) &&
        ((g = fImageBuffer.getGraphics()) != null)) Run();
    else System.exit(1);
}

class WindowCloser extends WindowAdapter
{   public void WindowClosing(WindowEvent e )
    {   System.exit(0); }   
}

private void Run()
{   DrawAverageLine();
    DrawBars();

}

private void DrawBars() 
{   
    double arrayAverage = arrayAverage(data);
    int average = averageLine(data);
    int max = getMaxValue(data);
    int min = getMinValue(data);
    int barWidth = 57;
    double barHeight;

    for (int i = 0; i < data.length; i++) {
    barHeight = (600 * (max - data[i]))/(max - min);
    if (data[i] > average) {
        g.setColor(OVER_AVERAGE);
        g.fillRect((int)barWidth * i, (int)barHeight, (int)barWidth, 
            (average - (int)barHeight));
    }
    else if (barHeight == average) {
        g.setColor(Color.green);
        g.fillRect((int)barWidth * i, average, (int)barWidth, 0);
    }
    else {
        g.setColor(UNDER_AVERAGE);
        g.fillRect((int)barWidth * i, average, (int)barWidth, 
            ((int)barHeight - average));
    repaint();
    }

    } //for loop
} //DrawBar

private void DrawAverageLine() 
{   
    int average = averageLine(data);
    g.drawLine(0, average, 800, average);
}

public static int getMaxValue(int[] data) {  
    int maxValue = data[0];  
    for (int i=1;i < data.length;i++) {  
        if (data[i] > maxValue)  
            maxValue = data[i];  
    }  
    return maxValue;  
   }

public static int getMinValue(int[] data) {
    int minValue = data[0];
    for (int i = 1; i < data.length; i++) {
        if (data[i] < minValue) 
           minValue = data[i];
    }
    return minValue;
}

public static double arrayAverage(int[] data) {
    double result = 0.0;
    for (int i = 0; i < data.length; i++) {
        result = result + data[i];
    }
    result = result/data.length;
    return result;
    }

    public static int averageLine (int[] data) {
    int max = getMaxValue(data);
    int min = getMinValue(data);
    return (HEIGHT * max - (int)arrayAverage(data)) / (max - min);
    }

    public void paint( Graphics g)
    {   if (fImageBuffer != null )
        g.drawImage(fImageBuffer, fInsets.left, fInsets.top, null);

    }

    public void ReadInputData() throws FileNotFoundException {
        try {Scanner readFile = new Scanner(new File("BarChart.data"));
            data = new int [13];
            for (int i = 0; i < data.length; i++)
                data[i] = readFile.nextInt();

        } //try

        catch (FileNotFoundException e) {
            System.out.println(e);
        }

    } // ReadInputData

public static void main(String[] args) throws FileNotFoundException {

    new BasicGraphicsTester();
}

} 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:43:33.243

A`JFrame`是一个空帧。您需要`JPanel`在框架内放置一个，并覆盖后者的`paintComponent()`方法以便在屏幕上呈现您的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:44:08.220

这不是您使用 Swing 进行图形或绘图的方式，我很想看看您阅读过的教程建议您在执行操作时获取 Graphics 对象。相反，您应该`paintComponent(...)`使用 JVM 作为参数提供的 Graphics 实例来绘制扩展 JComponent 的类的方法，例如 JPanel，然后将此组件添加到您的 JFrame。您将需要阅读作为标准 Swing 教程一部分的[Swing 教程中的绘画。](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:00:16.260

如果您想直接绘制到 JFrame 中，您仍然必须覆盖 ContentPane 的绘制，而不是 JFrame 的绘制方法 AFAIK。是的，更好的方法是实现您自己的组件（例如通过扩展 JPanel）并将其放置在 JFrame 中（记住它必须放置在 ContentPane 中）。

检查 JFrame javadocs 关于 ContentPane。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:21:48.877

我最近使用 BarGraph 组件在 JavaFX 中写了一些类似的东西。如果有帮助，我会发布源代码，但也许您需要使用 swing，您的项目的重点是制作自己的条形图。查看我的[javafx 条形图](http://mathteamhosting.com/teachers/javaFX/ProbabilityGame.html)

# sql - 选择查询的多个条件

> ID：13199425
> 
> 赞同：1
> 
> 时间：2012-11-02T16:34:51.873
> 
> 标签：sql, sql-server-2008

我有一个 select 语句，我希望根据表中的其他值计算立方体积。但是，我想检查 pr.Length_mm 或 pr.Width_mm 或 pr.Height_mm 之前是否为 NULL。我查看了 CASE 语句，但它似乎一次只评估一列。

```
SELECT 
      sa.OrderName,
      sa.OrderType,
      pr.Volume_UOM
 ,pr.Length_mm*pr.Width_mm*pr.Height_mm AS Volume_Cubic
 ,pr.Length_mm*pr.Width_mm AS Volume_Floor
 ,pr.Length_mm
 ,pr.Height_mm
 ,pr.Width_mm
FROM CostToServe_MCB.staging.Sale sa
LEFT JOIN staging.Product pr
ON sa.ID = pr.ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:36:11.223

```
SELECT pr.Volume_UOM
 ,pr.Length_mm*pr.Width_mm*pr.Height_mm AS Volume_Cubic
 ,pr.Length_mm*pr.Width_mm AS Volume_Floor
 ,pr.Length_mm
 ,pr.Height_mm
 ,pr.Width_mm
FROM CostToServe_MCB.staging.Sale sa
LEFT JOIN staging.Product pr
ON sa.ID = pr.ID
and pr.Length_mm is not null
and pr.Width_mm is not null
and pr.Height_mm is not null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:36:29.053

```
SELECT pr.Volume_UOM
 ,pr.Length_mm*pr.Width_mm*pr.Height_mm AS Volume_Cubic
 ,pr.Length_mm*pr.Width_mm AS Volume_Floor
 ,pr.Length_mm
 ,pr.Height_mm
 ,pr.Width_mm
FROM CostToServe_MCB.staging.Sale sa
    LEFT JOIN staging.Product pr ON sa.ID = pr.ID
where pr.Length_mm is not null and pr.Width_mm is not null and pr.Height_mm is not null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:37:40.737

```
where pr.Length_mm is not null 
  and pr.Width_mm is not null 
  and pr.Height_mm is not NULL 
```

# php - 如何在此 PHP 代码中模仿 C++ 样式重载

> ID：13199430
> 
> 赞同：0
> 
> 时间：2012-11-02T16:34:59.140
> 
> 标签：php, oop, polymorphism, overloading

我在 PHP 中有一个静态函数：

```
public static function func( $foo, $bar ) {

} 
```

其中`$bar`是一个整数。我想实现一个类似`func`但`$bar`字符串在哪里。在 C++ 中，我会使用重载，但 PHP 文档显示重载与 C++ 不同。还有其他方法可以实现我想要的吗？

我想到的一个替代方案是一些多态性，但它似乎有点矫枉过正？：

使用已定义（没有实现）创建一个接口，`func`并以两种不同的方式实现它。所以：

```
interface Something {
   public static function func( $foo, $bar );
}

class Something1 implements Something {
   public static function func( $foo, $bar ) {
      // some implementation
   }
}

class Something2 implements Something {
   public static function func( $foo, $bar ) {
      // some other implementation
   }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:04:33.963

C++ 或任何其他静态类型语言意义上的重载在 php 中没有意义，因为您不需要进行类型提示。这是弱类型语言的本质，因此在 php 中具有此功能不会有任何好处。您可以将任何类型的任何变量传递给您的函数。在对象的情况下，您具有多态性，而不必使用继承/接口来实现多态行为。这就是所谓的鸭式打字。

如果您需要对 string/int 进行不同的实现，只需检查类型并在同一函数中提供实现即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:39:57.323

创建一个函数，并根据该参数的类型，执行不同的操作或调用实际函数 func_int 和 funct_string。您实际上是在自己进行调度。

为了检查类型，有[gettype](http://php.net/manual/en/function.gettype.php)和`is_..`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:41:52.963

这样的事情可能会有所帮助，您可以确定 $bar 的类型，然后调用相应的函数。

```
public static function func( $foo, $bar ) {
   if (is_int($bar)) {
       self::funcBarInteger($foo, $bar);
   } else {
       self::funcBarString($foo, $bar);
   }
}

public static function funcBarInteger( $foo, $bar ) {

}

public static function funcBarString( $foo, $bar ) {

} 
```

# c# - Excel 加载项未使用服务参考配置信息加载 app.config

> ID：13199432
> 
> 赞同：1
> 
> 时间：2012-11-02T16:35:03.900
> 
> 标签：c#, web-services, excel-dna

我编写了一个带有服务引用的应用程序，用于对特定 URL 进行 Web 服务调用，并且效果很好。我想将此代码移动到 Excel 加载项中，但我遇到了这个问题：

> 未处理的异常消息：在 ServiceModel 客户端配置部分中找不到名称为“ConnectivityHttpsSoap12Endpoint”和合同“Connectivity.ConnectivityPortType”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

问题是我的 app.config（带有服务引用信息）没有被加载，因为 Excel 正在调用我的类库，调用应用程序的 app.config 需要添加服务引用。但这可以用 Excel 完成吗？更好的是，有没有办法从代码中加载我的 app.config？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:57:17.620

您需要使用`ConfigurationManager`. 您可以在调用程序集路径中找到您的 app.config 文件（通常），因此您可以编写如下方法：

```
public static Configuration LoadLocalConfigurationFile(string fileName)
{
    // fileName is the configuration file you want to open
    var configMap = new ExeConfigurationFileMap 
    { 
        ExeConfigFilename = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, fileName)
    };

    return ConfigurationManager.OpenMappedExeConfiguration(
        configMap, ConfigurationUserLevel.None);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T01:52:34.270

我自己最近也遇到了同样的问题，发现最好的解决方案包含在：

[在运行时更改默认 app.config](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime)

将您的配置文件指向：

```
AppDomain.CurrentDomain.BaseDirectory + "AssemblyName.dll.config" 
```

其中 AssemblyName 是您的插件程序集的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T10:59:43.593

正如@hexboy 在他的评论中指出的那样，答案是 ExcelDNA 要求配置文件与“xll”文件同名，但扩展名为“.config”。然后 ExcelDNA 将自动加载配置，无需进一步的代码。

另请注意，ExcelDNA 在构建时会生成各种不同的文件。例如`addin.xll`, `addin-packed.xll`, `addin64.xll`,`addin64-packed.xll`项目程序集被命名的地方`addin`。

为了获取配置文件，它需要与用于加载项的文件名匹配。例如`addin-packed.xll.config`，如果`addin-packed.xll`用作注册的 Excel 加载项。

# .htaccess - 将子文件夹 index.php 重定向到子文件夹根目录

> ID：13199435
> 
> 赞同：2
> 
> 时间：2012-11-02T16:35:08.013
> 
> 标签：.htaccess, mod-rewrite, redirect, subdomain, subdirectory

我有以下网址，我想使用根目录中的 .htaccess 文件和 Mod Rewrite 进行重定向。我在根目录中搜索并找到了索引文件的好例子，但在子文件夹中没有。这就是我所拥有和需要的。预先感谢您的帮助。

/folder1/index.php /folder1/index.php/ 到 [http://www.example.com/folder1/](http://www.example.com/folder1/)

/folder2/index.php /folder2/index.php/ 到 [http://www.example.com/folder2/](http://www.example.com/folder2/)

我被要求只提供 2 个超链接，因此我删除了上面示例中的部分链接。我很欣赏较短的方式，因为我有很多文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:56:56.527

在你的 .htaccess 文件中试试这个。

```
RewriteEngine On

Rewrite  ^/folder1/index.php$ /folder1/ [L]
<Directory folder1>
   DirectoryIndex index.php
</Directory> 
```

当然索引可以是任何你想要的，比如newindex.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-30T17:40:19.623

要将 /folder/index.php 重定向到 /folder ，您可以使用：

```
RewriteEngine on

RewriteRule ^([^/]+)/index\.php$ /$1/ [NC,L,R] 
```

这将重定向：

*   /anyfolder/index.php

至

*   /任何文件夹/

# asp-classic - 设置 teamcity 以从 TFS 中提取 .asp/html 文件

> ID：13199437
> 
> 赞同：2
> 
> 时间：2012-11-02T16:35:21.567
> 
> 标签：asp-classic, build, teamcity

目前，我们有几个 .net 项目的构建配置，使用 Team Foundation 作为版本控制。尝试在 TFS 下为经典的 asp 站点创建构建配置（没有需要编译的文件或 .dll）。不确定如何执行创建构建配置的步骤（常规设置、版本控制设置、构建步骤等）。

使用 TeamCity 专业版 7.0.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-31T10:05:40.380

这是我正在使用的示例：

常规设置：工件路径需要映射到您的 vcs 中的文件夹。例如

```
%Sourcedirectory%/** 
```

在 VCS 设置中，您应该指定要获取的分支，例如`+:master`

在结帐规则中，您可以限制获取的内容

```
+:Mycheckoutpath 
```

使用命令行构建步骤复制文件

```
(robocopy %SourceDirectory% %DestinationDirectory% /MIR /NP /NDL)  ^& IF %%ERRORLEVEL%% LEQ 4 exit /B 0 
```

“%”中的变量被定义为参数。使用`^& IF %%ERRORLEVEL%% LEQ 4 exit /B 0`确保捕获返回码 2 被接受（这是文件覆盖）

# javascript - 在另一个框架中显示 div

> ID：13199438
> 
> 赞同：0
> 
> 时间：2012-11-02T16:35:32.490
> 
> 标签：javascript, css, html, frames

我有一个包含框架集的索引文件：

```
<frameset border="1" frameborder="0" framespacing="0" rows="7%,93%">
  <frame src="index_top.htm" scrolling="no" marginwidth="0"
  marginheight="0" noresize name="top" target="_self">
    <frame name="main" src="index_main.html"
    scrolling="auto" marginwidth="0" marginheight="0">
  <noframes> 
```

该`index_top`文件如下所示（仅相关部分）：

```
<table width="100%" border="0" align="left" cellpadding="3" cellspacing="3" class="menyrad">
  <tr valign="middle" align="center">
    <td width="10%" id="homenav"><a href="framsida_test.html" onClick="changeClass(1)">Furniture home</a></td>
    <td width="10%" colspan="6">Currently browsing: <i id="mainlink"><span id="header">Select page</span><div id="linkdiv"><p><a href="coffee.html" id="link1" onClick="changeHeader(2)">Coffee tables</a></p><p>
<a href="side.html" id="link2" onClick="changeHeader(3)">Side tables</a></p><p><a href="stand.html" id="link3" onClick="changeHeader(4)">Stand tables</a></p><p>
<a href="dinner.html" id="link4" onClick="changeHeader(5)">Dinner tables</a></p><p><a href="sp.html" id="link5" onClick="changeHeader(6)">Stools/Pedestals</a></p></div></i></td>
    <td width="4%" id="galleriesnav"><a href="galleries.html" onClick="changeClass(2)">Galleries</a></td>
    <td width="4%" id="pressnav"><a href="press.html" onClick="changeClass(3)">Press</a></td>
    <td width="4%" id="factsnav"><a href="facts.html" onClick="changeClass(4)">Facts</a></td>
    <td width="4%" id="contactnav"><a href="contact.php" onClick="changeClass(5)">Contact</a></td>
    <td width="10%"><a href="http://www.carlson.se" target="_new">About artist Carlson</a></td>
  </tr>    
 </table> 
```

相关的CSS `index_top`：

```
#linkdiv
{
    position:absolute;
    visibility:hidden;
    left:502px;
    width:100px;
    height:130px;
    background-color:#FFF;
    border-style:solid;
    border-color:black;
    border-width:2px;
    font-style:normal;

}

#header
{
    display:inline-block;
    text-align:center;
    width:100px;
}

#link1, #link2, #link3, #link4, #link5, #link6
{
    color:#000;
    text-decoration:none;
    width:100%;
    display:block;
    outline:0;
}

#link1:hover, #link2:hover, #link3:hover, #link4:hover, #link5:hover, #link6:hover
{
    width:100%;
    color:#FFF;
    font-weight:bold;
}

#mainlink:hover #linkdiv
{
    visibility:visible;
} 
```

Aaaa 和 JavaScript：

```
function changeClass(Index)
{
    var ids = new Array("null","homenav","galleriesnav","pressnav","factsnav","contactnav");
    var color = new Array("null","#c9a900","#4814a9","#71a28a","#ac27a9","#998f86");
    var i=1;
    var length = ids.length;
    while (i<length)
    {
        document.getElementById(ids[i]).style.backgroundColor = '#FFF';
        document.getElementById(ids[i]).className = "blacklink";
        document.getElementById(ids[Index]).style.backgroundColor =color[Index];
        document.getElementById(ids[Index]).className = "whitelink";
        i++;
    }

}

function changeHeader(HeadIndex)
{
    var headers = new Array("null","Select page","Coffee tables","Side tables","Stand tables","Dinner tables","Stools","Pedestals");
    var colors = new Array("null","#f32837","#0085cf","#00aa86","#c99900","c42695","#617f90");
    document.getElementById("header").innerHTML = headers[HeadIndex];
    if (HeadIndex > 1)
    {
        document.getElementById("header").style.fontWeight = "bold";
        document.getElementById("header").style.color = "#FFF";
        document.getElementById("header").style.backgroundColor = colors[HeadIndex];
        document.getElementById("header").style.fontStyle = "normal";
    }

} 
```

所以，我在这里的问题（对不起大量代码）是，当您尝试将鼠标悬停在“选择页面”文本上时，隐藏`div`的内容正在显示......但在主框架下。因此，不可能按下链接。如何显示`div`OVER 主框架以使其可点击？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:57:31.450

在框架外的 index.html 中包含您的显示/隐藏 div。然后使用 css 定位和 z-index 强制它出现在框架上方。

# swing - Scala Swing 中的听众和反应

> ID：13199439
> 
> 赞同：5
> 
> 时间：2012-11-02T16:35:35.843
> 
> 标签：swing, scala, button, listener, textfield

我在 Eclipse 中进行了相当多的搜索和一些试验和错误，但在使用 Swing 在 Scala 中编写 GUI 时，我对听众和反应的理解似乎存在差距。

每个侦听器是否都有一个反应块，或者我是否在所有可能生成事件的组件上注册侦听器并在带有案例语句的大型反应块中对每个组件做出反应？

听众和反应块到底属于哪里。

这是我的 GUI 代码的缩写版本：

```
import scala.swing._
import scala.swing.event.ButtonClicked
import scala.swing.event.KeyTyped
import scala.swing.event.KeyPressed

object HumanGUI extends SimpleGUIApplication {

 val basicPane = new java.awt.Dimension(800, 200)
 val botPane = new java.awt.Dimension(400, 200)
 val felt = new java.awt.Color(35, 125, 35)

 def top = new MainFrame {

    title = "Blackjack GUI"

    val ConnectionPanel = new BoxPanel(Orientation.Vertical) {
      background = felt
      preferredSize = new java.awt.Dimension(155, 90)
      minimumSize = preferredSize
      maximumSize = preferredSize

      val ipAddressLabel = new Label("House IP:")
      ipAddressLabel.foreground = java.awt.Color.WHITE
      ipAddressLabel.horizontalTextPosition = scala.swing.Alignment.Left

      val portLabel = new Label("House port:")
      portLabel.foreground = java.awt.Color.WHITE
      portLabel.horizontalTextPosition = scala.swing.Alignment.Left

      val ipAddressTextField = new TextField
      val portTextField = new TextField

      contents += ipAddressLabel
      contents += ipAddressTextField
      contents += portLabel
      contents += portTextField
    }

    val DetailPanel = new BoxPanel(Orientation.Vertical) {
      background = felt
      preferredSize = new java.awt.Dimension(100, 160)
      minimumSize = preferredSize
      maximumSize = preferredSize

      val nameLabel = new Label("Your name:")
      nameLabel.foreground = java.awt.Color.WHITE
      nameLabel.horizontalTextPosition = scala.swing.Alignment.Left

      val bankrollLabel = new Label("Bankroll:")
      bankrollLabel.foreground = java.awt.Color.WHITE
      bankrollLabel.horizontalTextPosition = scala.swing.Alignment.Left

      val betLabel = new Label("Bet:")
      betLabel.foreground = java.awt.Color.WHITE
      betLabel.horizontalTextPosition = scala.swing.Alignment.Left

      val nameTextField = new TextField
      val bankrollTextField = new TextField
      val betTextField = new TextField

      val goButton = new Button("Go!")

      contents += nameLabel
      contents += nameTextField
      contents += bankrollLabel
      contents += bankrollTextField
      contents += betLabel
      contents += betTextField
      contents += goButton
    }

    val PlayPanel = new BoxPanel(Orientation.Vertical) {
      background = felt
      val hitButton = new Button("Hit")
      val stayButton = new Button("Stay")
      val doubleButton = new Button("Double")
      val quitButton = new Button("Quit")

      contents += hitButton
      contents += stayButton
      contents += doubleButton
      contents += quitButton
    }

    val playerPanel = new BoxPanel(Orientation.Horizontal) {
      background = felt
      border = new javax.swing.border.LineBorder(java.awt.Color.WHITE)
      preferredSize = basicPane
      minimumSize = basicPane
      maximumSize = basicPane
      opaque = true

      contents += ConnectionPanel
      contents += DetailPanel
      contents += PlayPanel
    }

    contents = new BoxPanel(Orientation.Vertical) {
      contents += playerPanel
    }
  }
} 
```

所以问题是我应该把我的听众和反应块放在哪里？
我想对 PlayPanel 中的按钮以及 ConnectionPanel 和 DetailPanel 中的文本字段做出反应。
我是将听众和反应块放置在尽可能靠近我感兴趣的元素的位置，还是在 MainFrame 部分的末尾放置一大块听众和反应？
这还重要吗？

***编辑***
我已经取得了重大进展，并且有很多我需要工作的东西，以及对我以前没有得到的概念的更好理解。

这段摘自 Odersky 的“Scala 编程”对我帮助最大。具体来说，此页面中的示例：

[http://www.artima.com/pins1ed/gui-programming.html](http://www.artima.com/pins1ed/gui-programming.html)

代码来自文本的第一版，所以我质疑Scala 2.9中是否有更好的方法，但它很简洁，总结了我的误解。

从这个简单的华氏到摄氏度转换器的示例中，我了解到侦听器和反应块属于 MainFrame 的内容块之后。

所以我最终得到：

```
object HumanGUI extends SimpleSwingGUIApplication {
  def top = new MainFrame {
    title = "My Blackjack GUI"

    //The fields I want to work with are instantiated as object
    object ipAddressTextField extends TextField { columns = 15 }
    object portNumberTextField extends TextField {columns = 5 }

    //other panels, objects, etc would go here
    val OtherPanel = new BoxPanel(Orientation.Horizontal) {
       label = "Other Panel"
    }

    //and here we have the contents += block for the mainframe, other panels, etc from 
    //above would be added to the main frame here
    contents = new BoxPanel(Orientation.Vertical) {
      contents += ipAddressTextField
      contents += portNumberTextField
    }

    //here's the listen to, listening on the object created above, and it's enclosed in 
    //in backticks, a good explanation of that is found in the link below
    listenTo(`ipAddressTextField`)
    reactions += {
      case EditDone('ipAddressTextField`) =>
        //do something!
    }
  } 
```

[需要澄清 Scala 文字标识符（反引号）](https://stackoverflow.com/questions/6576594/need-clarification-on-scala-literal-identifiers-backticks)

所以看来我的问题的答案是 listenTo 和反应块属于 MainFrame 块，但应该出现在它的内容 += { //contents } 块之后。

eclipse 中的额外试验和错误表明，虽然这个解决方案对我有用，但显然还有很多我不明白的地方。例如，如果我尝试在上述代码的
val OtherPanel = new BoxPanel(Orientation.Horizo​​ntal) { }
部分中监听 KeyPress 事件并对其做出反应，我无法让监听器工作，但我能够得到一个按钮注册并像这样工作：

```
val OtherPanel = new BoxPanel(Orientation.Horizontal) {
  val betLabel = new Label("Bet:")
  val betTextField = new TextField
  val goButton = new Button("Go!")

  listenTo(goButton)
  reactions += {
    case ButtonClicked(b) =>
      betTextField.text = "Go!"
  }

  contents += betLabel
  contents += betTextField
  contents += goButton
} 
```

为什么这行得通，但我尝试按照以下方式做一些事情

```
val OtherPanel = new BoxPanel(Orientation.Horizontal) {
  val betLabel = new Label("Bet:")
  val betTextField = new TextField
  val goButton = new Button("Go!")

listenTo(betTextField)
reactions += {
  case KeyTyped(betTextField, Enter, _, _) => {
    println("Caught enter")
  }

  contents += betLabel
  contents += betTextField
  contents += goButton
} 
```

没有工作仍然让我感到困惑。我假设它应该可以工作，而我只是做错了。也许将这种方法与案例 EditDone 而不是案例 KeyTyped( *,* , *,* ) 融合会奏效，但我现在有点筋疲力尽，无法跟进。

我还没有接受答案，因为我希望看到这个的人可以澄清我仍然不明白的观点。如果这种情况没有发生并且几天内问题仍未得到解答，我可能会接受@som-snytt 的回答，因为他的代码非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:46:40.373

Swing 具有教育意义，而 Scala-Swing 具有教育意义。特别是如果课程是“摇摆的历史：兴衰”。

我的第一个 Scala 程序也使用了 Swing。我忘记了细节，但我会分享我在源代码中看到的内容。

显然，我有一个名为 LightBox 的主要 UI 组件来处理一些 UI 事件，还有一个协调器组件 LightBoxMediator 进行协调。

有趣的部分是，使用蛋糕模式进行组合，并将业务逻辑（或游戏逻辑）交互移动到一个组件中，该组件为 UI 进行“中介”。LightBox 也发布事件。

因此，您的问题的答案是：利用发布者框架，但要区分 UI 事件和应用程序事件。（这个小游戏也有基于演员的控制器。）

也许这足以说明关注点的分离：

```
/**
 * Draws the House of Mirrors.
 * The LightBox is just a list of rays (line segments) and gates (various objects).
 * The UI emits requests to move and rotate gates.
 */
class LightBox extends Panel {

  this.peer.addComponentListener(
    new ComponentAdapter {
      override def componentResized(e: ComponentEvent) {
        if (e.getID == ComponentEvent.COMPONENT_RESIZED && e.getComponent == LightBox.this.peer) {
          calculateScale()
        }
      }
    }
  )

  listenTo(mouse.clicks, mouse.moves, mouse.wheel, keys)

  reactions += {
    case KeyPressed(_, Key.N, _, _) => highlightNextMoveableGate()
    case KeyPressed(_, Key.P, _, _) => highlightPreviousMoveableGate()
    case e: MousePressed => startDrag(e)
    case e: MouseDragged => doDrag(e)
    case e: MouseReleased => endDrag(e)
    case e: MouseWheelMoved => wheeling(e)
    case _ => null // println ("Unreacted event")
  } 
```

和调解员

```
trait ViewComponents {
  this: ControllerComponents with ModelComponents =>

  val lightBoxMediator: LightBoxMediator
  val statusBarMediator: StatusBarMediator
  val statusIconMediator: StatusIconMediator
  val applicationMediator: ApplicationMediator

  /**
   * Handles update notifications from the application
   * and user input from the LightBox.
   */
  class LightBoxMediator(val ui: LightBox) extends Reactor with Observing {

    /** Attempt to track our selection across updates: the point is where the gate should end up. */
    private var selectionContinuity: (Option[Gate], Option[Point]) = (None, None)

    listenTo(ui, ui.keys, ui.mouse.clicks)

    reactions += {
      case KeyPressed(_, Key.Q, _, _) => sys.exit()
      case KeyPressed(_, Key.Space, _, _) => rotateSelectedGate()
      case KeyPressed(_, Key.Enter, _, _) => rotateOtherwiseSelectedGate()
      case KeyPressed(_, Key.Up, _, _) => moveUp()
      case KeyPressed(_, Key.Down, _, _) => moveDown()
      case KeyPressed(_, Key.Left, _, _) => moveLeft()
      case KeyPressed(_, Key.Right, _, _) => moveRight()
      case KeyPressed(_, Key.PageUp, _, _) => previousLevel()
      case KeyPressed(_, Key.PageDown, _, _) => nextLevel()
      case DragEvent(from, to) => handleDrag(from, to)
      case ClickEvent(where, button) => handleClick(where, button)
      //case x => println("Unreacted event " + x)
    }

    observe(controller.modelEvents) { e => e match {
        case LevelLoaded(v) => onLevelLoaded(v)
        case TraceResult(s) => onTrace(s)
        case unknown => println("Lightbox mediator ignored: "+ unknown)
      }
      true
    } 
```

刚刚注意到其他问题。巧合的是，我正在清理旧代码，实际上是一个从 sfgate.com 抓取图像的小应用程序（当然，当他们更改站点时它停止工作；但通常你现在可以右键单击保存），我碰巧请注意以下关于重新订阅的评论。我隐约记得 UIElement 是一个 LazyPublisher 的那一点，因为我记得那一记耳光。但如果我没有写下那条微薄的评论，那这些信息就会在古代历史中丢失。

我认为有人想要支持 scala-swing 并且可能会处理头部拍打。

```
package com.maqicode.sfg.jfc

import java.awt.Color
import java.awt.Color.{WHITE => White, RED => Red}
import java.net.{URI, URISyntaxException}
import javax.swing._

import swing.TextField
import swing.event.{EditDone, MouseEntered, ValueChanged}

import com.maqicode.sfg.BadGateURLException
import com.maqicode.sfg.GateUrlTranslator.translate

abstract class URIField extends TextField {

  reactions += {
    case e: EditDone => editDone(e)
    case other: ValueChanged => editing(other)
    case m: MouseEntered => onMouseEntered()
    case _ => null
  }
  // necessary to resubscribe this so that onFirstSubscribe registers ActionListener
  listenTo(this, mouse.moves)

  def onMouseEntered() {
    val t: Option[String] = ClipboardInput.contents
    if (t.isDefined && t.get != this.text) {
      this.text = t.get
      submitURL(t.get)
    }
  }

  def editing(e: ValueChanged) {
    clearError()
  }

  def editDone(e: EditDone) {
    submitURL(this.text)
  }

  def submitURL(s: String) {
    val u = s.trim
    if (!u.isEmpty)
      try {
        submitURI(translate(new URI(u)))
        clearError()
      } catch {
        case t: BadGateURLException => flagError()
        case t: URISyntaxException => flagError()
      }
  }

  def flagError() {
    colorCode(Red)
  }

  def clearError() {
    colorCode(White)
  }

  private def colorCode(c: Color) {
    if (this.background != c) this.background = c
  }

  def submitURI(uri: URI): Unit
} 
```

# jquery - 顺序显示子菜单项

> ID：13199440
> 
> 赞同：2
> 
> 时间：2012-11-02T16:35:35.977
> 
> 标签：jquery, drop-down-menu, menuitem, submenu

我正在创建一个导航栏并尝试添加此效果：当您将鼠标悬停在主菜单项上时，其下的每个子菜单项都会稍有延迟。就像一个接一个。

我已经做了一些，但它非常有问题。有时延迟时间太长，有时第二个子项出现在第一个之前！最糟糕的是，当您将鼠标从主要项目上移开时，它下面的列表就会消失！总之它不是很顺利。这是我现在拥有的代码。

**HTML**

```
<div id="navbar">
    <ul id="main-menu">
        <li><a href="#">Home</a></li>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Members</a>
            <ul>
                <li><a href="#">Sub item 1</a></li>
                <li><a href="#">Sub item 2</a></li>
            </ul>
        </li>
        <li><a href="#">Events</a>
            <ul>
                <li><a href="#">Sub item 3</a></li>
                <li><a href="#">Sub item 4</a></li>
            </ul>
        </li>
        <li><a href="#">Publications</a>
            <ul>
                <li><a href="#">Sub item 5</a></li>
                <li><a href="#">Sub item 6</a></li>
            </ul>
        </li>
        <li><a href="#">Contact Us</a></li>
    </ul>
</div>​ 
```

**CSS**

```
#navbar { width:550px; height:30px; position:relative; float:right; right:-7px; top:30px; }

#main-menu { width:100%; float:right; list-style:none; }

#main-menu li { float:left; }

#main-menu li a { display:block; text-decoration:none; color:#000; background-color:#FC0; padding:8px; margin-right:10px; }

#main-menu li ul { display:none; z-index:999; }

#main-menu li:hover ul { display:block; position:absolute; }

#main-menu li li { display:block; float:none; } 
```

**jQuery**

```
$(document).ready(function(e) {

    $('#main-menu li a').hover(function()
    {
        $(this).animate({
            backgroundColor : '#C60'
        },200);

        $('#main-menu ul li').each(function(e) {
            $(this).delay(e * 200).hide().fadeIn(200);                                     
        });

    }, function(){
        $(this).animate({
            backgroundColor : '#FC0'
        },200);
    });

});​ 
```

请在此处查看[此](http://jsfiddle.net/isuru_nan/Hjxp5/1/)小提琴。

我怎样才能让它变得流畅、实用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:27:31.037

我会使用 CSS 过渡来淡入菜单项（并设置背景颜色）。您需要做的就是在第一次加载时使用 jQuery 计算每个子 li 的转换延迟。例如：

```
$('#main-menu li ul li').each(function() {
    var delay = $(this).index() * 200 + 'ms';

    $(this).css({
        '-webkit-transition-delay': delay,
        '-moz-transition-delay': delay,
        '-o-transition-delay': delay,
        'transition-delay': delay
    });                  
}); 
```

然后在元素上设置适当的过渡。这是一个有效的 jsFiddle：http: [//jsfiddle.net/Hjxp5/8/](http://jsfiddle.net/Hjxp5/8/)

# jquery - jQuery点击功能，等待它完成再开始？

> ID：13199445
> 
> 赞同：4
> 
> 时间：2012-11-02T16:35:57.883
> 
> 标签：jquery

在我双击/高音/等单击 .next 按钮运行脚本的那一刻，我需要它一个接一个地排队吗？我怎样才能做到这一点，以便在重新开始之前完成该功能？

HTML

```
<ul id="one" class="first selected">
   <li class="pic_one"></li>
   <li class="pic_two"></li>
   <li class="pic_three"></li>                       
</ul>
<ul id="two">
   <li class="pic_one"></li>
   <li class="pic_two"></li>
   <li class="pic_three"></li>                        
</ul>
<ul id="three" class="last">
   <li class="pic_one"></li>
   <li class="pic_two"></li>
   <li class="pic_three"></li>                        
</ul> 
```

jQuery

```
$('.slider .next').click(function(){
   if($('.slider ul.selected').hasClass('last')){
      // leave blank
   } else {
      $('.slider ul.selected').hide('slide', { direction: "left" }, 1000);  
      $('.slider ul.selected').removeClass('selected');
      $('.slider ul').parent().next('ul').show('slide', { direction: "right" }, 1000).addClass('selected'); 
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:48:11.857

类似于 Rory 的答案，但使用 :animated 伪选择器。这可以防止在动画元素时处理单击事件。

```
$('.slider .next').click(function(){
   if($('.slider ul.selected').is(':animated')) return;

   if($('.slider ul.selected').hasClass('last')){
      // leave blank
   } else {
      $('.slider ul.selected').hide('slide', { direction: "left" }, 1000);  
      $('.slider ul.selected').removeClass('selected');
      $('.slider ul').parent().next('ul').show('slide', { direction: "right" }, 1000).addClass('selected'); 
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:52:33.737

如果我正确理解了您的问题...您只是想防止动画在多次单击时堆叠。`.stop()`在调用下一个动画之前使用。

例子：

```
$('.slider .next').click(function(){
   if($('.slider ul.selected').hasClass('last')){
      // leave blank
   } else {
      $('.slider ul.selected').stop().hide('slide', { direction: "left" }, 1000);  
      $('.slider ul.selected').removeClass('selected');
      $('.slider ul').parent().next('ul').stop().show('slide', { direction: "right" }, 1000).addClass('selected'); 
   }
}); 
```

# jquery - 使用 Yii 格式化带有千位分隔符的 html 输入 - jquery

> ID：13199450
> 
> 赞同：0
> 
> 时间：2012-11-02T16:36:15.837
> 
> 标签：jquery, html, input, yii, format

所以我在 Yii 的模型中有这些规则：

```
array('svalue','numerical'), 
```

由于这些是数字（稍后它们将用于计算），我想将其保存为数字。

客户虽然要求使用逗号“，”分隔千位（1,200 = 千两百）来格式化数字。我在项目上使用的前任

```
$.fn.digits = function(){
    return this.each(function(){
        $(this).keyup(function(){
            $(this).val( $(this).val().replace(/,/g,"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") );
        });
    })
} 
```

我添加了 keydown 功能，这样您就不能输入除数字之外的任何其他字符。

不幸的是，现在 jquery.digits() 函数正确地将任何数字格式化为数千 - 但 yii 显然会生成一些代码，然后在表单验证时它说“svalue must be a number”。

我怎样才能同时拥有这两个功能，获得客户想要的格式化字符串，并在 Yii 后端进行数字检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:13:50.793

在验证模型之前，只需将其转换为数字。所以你应该在你的创建和更新操作中有这样的东西：

```
$model->attributes=$_POST['Model'];
$model->number = floatval($model->number); //or intval if it is an integer.
$model->save(); //or $model->validate(); 
```

然后在显示数字时添加逗号。

或者，您可以创建自己的验证函数，允许使用数字、逗号和小数。并使用它而不是内置`numeric`验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:58:54.413

`str_replace`在保存或验证模型之前使用：

在模型中[`beforeValidate()`](http://www.yiiframework.com/doc/api/1.1/CModel#beforeValidate-detail "http://www.yiiframework.com/doc/api/1.1/CModel#beforeValidate-detail")：

```
protected function beforeValidate() {
    if(parent::beforeValidate) {
        $this->svalue = str_replace(',', '', $this->svalue);
        return true;
    }
    return false;
} 
```

或者在控制器的保存和更新操作中：

```
$model->attributes = $_POST['Modelname'];
$model->svalue = str_replace(',', '', $model->svalue); 
```

* * *

但是最好的方法是在客户端（实际上是*查看*文件）本身，在表单提交之前将值更改回数字，并且每当显示表单时，添加逗号。

显示表单时，为已存储的值添加逗号（更新场景或部分验证场景）：

```
$("#field").val( $("#field").val().replace(/,/g,"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
```

对于新输入的值，您已经拥有添加逗号的功能。

然后在提交表单之前，将值改回不带逗号的值：

```
$("#form-selector").submit(function(){
    $("#field").val( $("#field").val().replace(/,/g,"") );
    return true; // let the form submit
}); 
```

由于这纯粹是一个演示更改，我认为操作应该在客户端。

# arrays - 来自查找命令长度的bash数组

> ID：13199451
> 
> 赞同：5
> 
> 时间：2012-11-02T16:36:18.800
> 
> 标签：arrays, shell, size

我有以下代码：

```
filelist="$(find $name -type f | sort)";
echo "$filelist";
echo "${#filelist[@]}" 
```

我的数组包含许多元素，但最后一个命令说我的数组只包含一个元素。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T16:39:36.630

您需要使用括号让 bash 将其识别为数组。

```
filelist=($(find $name -type f | sort))
echo ${#filelist[@]} 
```

# php - 在 PHP 类的函数之间共享变量

> ID：13199453
> 
> 赞同：0
> 
> 时间：2012-11-02T16:36:33.460
> 
> 标签：php

我有遵循这种结构的代码：

```
class someClass
{
    private static $pay = 0;

    //something like this...
    public static function run()
    {
        if ($_SESSION['title']== "whatever" and $_SESSION['rank'] == "1")
        {
            self::$pay = 50000;
        }
    }

    public static function benefits()
    {
        self::$pay = 50000 * 1.30;
        benefits = self:$pay;
        echo benefits;
    }
} 
```

然后我尝试像这样调用福利......

```
someClass::benefits(); 
```

但它总是设置为零。当 if 语句中的条件满足时，它永远不会改变。

我在这里做的事情显然是错误的吗？我没有收到任何错误。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:38:34.883

我真的不认为您想`echo`从该类函数中获取值。那我强烈推荐`return`ing。然后如果你立即回显它们，很好，但你不应该从函数中回显。如果没有看到它是如何使用的，那将是我的第一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:39:38.720

在福利函数中，如果您打算将其用作局部变量，则福利应该是 $benefits。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:47:08.743

试试下面的代码：

```
<?php
class someClass
{
    private static $pay = 0;

    //something like this...
    public static function run()
    {
        if ($_SESSION['title']== "whatever" and $_SESSION['rank'] == "1")
        {
            self::$pay = 50000;
        }
    }

    public static function benefits()
    {
        self::$pay = 50000 * 1.30;
        $benefits = self::$pay;
        return $benefits;
    }
}

echo someClass::benefits();
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:38:19.970

您正在使用`benefits`它，就好像它是恒定的（在 php 中不允许分配）-您可能是指`$benefits`. 将您的代码更改为：

```
 self::$pay = 50000 * 1.30;
    $benefits = self::$pay;
    echo $benefits; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T16:42:51.683

```
public static function benefits()
{
    self::$pay = 50000 * 1.30;
    echo self::$pay;
} 
```

应该是你要找的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T16:43:39.123

你必须改变

```
 benefits = self:$pay; 
```

至

```
 benefits = self::$pay; 
```

# php - 使用 PHP 正则表达式从 MySQL 查询中剥离/删除所有值？

> ID：13199470
> 
> 赞同：3
> 
> 时间：2012-11-02T16:37:43.310
> 
> 标签：php, mysql, regex, strip

如何使用 PHP Regex 从 MySQL 查询中剥离/删除所有值？

例子：

原文：`SELECT id, abc FROM mytable WHERE id IN (12, 15)`
条纹：`SELECT id, abc FROM mytable WHERE id IN ()`

原来的：

```
SELECT ut.id, IF(stagiaire_devis.id IS NOT NULL, CONCAT(ut.prenom, ' (my lovely)', ut.prenom) AS value FROM quality AS uq, avocate, utility AS ut LEFT JOIN stagiaire_devis ON (stagiaire_devis.id_devis='1293049' AND stagiaire_devis.id_utilisateur=ut.id) WHERE uq.id_utilisateur = ut.id AND avocate.id_utilisateur = ut.id AND avocate.deleted = 0 AND avocate.id_avocat_liste_cabinet = 7 AND uq.id_liste_qualite IN (5,2,9) AND uq.actif = 2 ORDER BY ut.prenom 
```

有条纹的：

```
SELECT ut.id, IF(stagiaire_devis.id IS NOT NULL, CONCAT(ut.prenom, '', ut.prenom) AS value FROM quality AS uq, avocate, utility AS ut LEFT JOIN stagiaire_devis ON (stagiaire_devis.id_devis='' AND stagiaire_devis.id_utilisateur=ut.id) WHERE uq.id_utilisateur = ut.id AND avocate.id_utilisateur = ut.id AND avocate.deleted = AND avocate.id_avocat_liste_cabinet = AND uq.id_liste_qualite IN () AND uq.actif = ORDER BY ut.prenom 
```

我找不到正确的正则表达式:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:41:07.417

您不能使用任何正则表达式来执行此操作，因为 SQL 不是[常规语言](http://en.wikipedia.org/wiki/Regular_language)。

要执行此任务，您需要使用[SQL 解析器](https://stackoverflow.com/search?q=sql%20parser)。

* * *

编辑关于您的评论：

好的，您需要为查询建立一种“指纹”，以便当查询仅在常量值上有所不同时，您可以将查询分组在一起。

[pt-query-digest](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)工具可以做到这一点。它适用于慢查询日志或一般日志，但不适用于错误日志。但它可能并不难使用`awk`或将您的错误日志转换为 pt-query-digest 可以读取的格式。

# algorithm - 向堆添加和删除值的高效算法

> ID：13199472
> 
> 赞同：-1
> 
> 时间：2012-11-02T16:37:48.503
> 
> 标签：algorithm, heap, complexity-theory

如果我想在最大堆中添加和删除值，我会首先将值添加到堆的末尾，然后根据需要向上渗透。然后我会通过保存根节点来删除该值，然后在最大堆的末尾取值，将其移动到顶部，然后根据需要向下渗透，最后返回从前面保存的值。

这涉及大量的比较和值交换。是否有一种算法具有类似的复杂度类但对于首先添加然后删除最大堆中的值更有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:48:22.283

添加到二进制堆需要 log(N) 比较。移除一个项目，假设你知道项目在哪里，需要 log(N) 比较。从堆中删除的低效部分是*找到*要删除的项目。这需要 O(N) 时间。

顺便说一句，您可以通过获取堆中的最后一项，将其放在要删除的项的位置，然后根据需要向上或向下渗透来提高删除性能。有关示例，请参见任何算法文本。

如果你想要一个更高效的数据结构，你需要一个二进制堆以外的东西。

# java - DigitalPersona Java SDK - 比较功能集和模板

> ID：13199487
> 
> 赞同：0
> 
> 时间：2012-11-02T16:38:37.230
> 
> 标签：java, fingerprint

我正在使用 digitalpersona one touch for windows java edition，我使用小程序捕获了指纹模板，小程序序列化模板然后将其从字节数组转换为十六进制字符串以将其显示在隐藏的文本框中并发送到服务器端并存储在mysql。我的代码可以检索模板，并将其转换回数组，但我不知道如何反序列化并再次创建模板：

```
 Connection con = null;  
try {
    Class.forName("com.mysql.jdbc.Driver");
     con = DriverManager.getConnection("jdbc:mysql://localhost:3306/biodb", "root", "1234");
    PreparedStatement st;
    st = con.prepareStatement("select template from login where username = ? ");
    st.setString(1, username);

    ResultSet result = st.executeQuery();

    if (result.next()) { //.next() returns true if there is a next row returned by the query.

        String dbTemplate = result.getString("template");
          byte[] data = new byte[1];
            data = hexStringToByteArray(dbTemplate);
           DPFPTemplate t = DPFPGlobal.getTemplateFactory().createTemplate();
            t.deserialize(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:10:41.483

您必须创建一个匹配器来比较 featureSet 和 tmeplate，如下所示：

```
DPFPVerification matcher = DPFPGlobal.getVerificationFactory().createVerification();
DPFPTemplate template = DPFPGlobal.getTemplateFactory().createTemplate();
template.deserialize(byteArray);
DPFPVerificationResult result = matcher.verify(featureSet, template); 
```

# php - 每个 cookie 或每个会话显示随机图像和链接？

> ID：13199488
> 
> 赞同：0
> 
> 时间：2012-11-02T16:38:37.800
> 
> 标签：php, image

我正在尝试一种方法，每次有新的 cookie 集或每次用户登录和注销时，我都可以从文件夹中的大约 100 张图像中显示 5 张图像。我已经尝试过使用 javascript 根据星期几显示不同的图像，但是我真正想要的是一次显示 5 张图像的方法，附带的链接每次用户登录和注销时都会改变？有人可以指出我的写作方向吗，我是 php 新手，所以即使是最小的代码示例也会有所帮助，谢谢。

这是我的 javascript 代码，它显示基于当天的图像，我不知道这是否有帮助？

```
<script type="text/javascript" language="JavaScript">
var now = new Date ();
var day = now.getDay();
//the week begins on SUNDAY
if(day == 0) document.write("<p><a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad0.png' alt='sunday' width='180' height='180' border='0'></a></p><p><a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad0.png' alt='sunday' width='180' height='180' border='0'></a></p>");
if(day == 1) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad1.png' alt='monday' width='180' height='180' border='0'></a>");
if(day == 2) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad2.png' alt='tuesday' width='180' height='180' border='0'></a>");
if(day == 3) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad3.png' alt='wednesday' width='180' height='180' border='0'></a>");
if(day == 4) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad4.png' alt='thursday' width='180' height='180' border='0'></a>");
if(day == 5) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad5.png' alt='friday' width='180' height='180' border='0'></a>");
if(day == 6) document.write("<a href='YOUR-LINK-HERE'><img src='../PTB1/data/adverts/ad6.png' alt='saturday' width='180' height='180' border='0'></a>");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:44:13.710

如果要显示一组已知图像中的 5 张随机图像，这是最好的方法

```
$imagepool=array('path1.jpg','path2.jpg', ..... ,'path100.jpg');
for($i=0;$i<5;$i++){
  $randid=floor(rand(0,100));
  echo '<a href="#"><img src="'.$imagepool[$randid].'"></a>';
} 
```

或者，如果您在所有这些图像上都有该命名方案并且它们是有序的，那么您不必定义图像列表：

```
for($i=0;$i<5;$i++){
  $randid=floor(rand(0,100));
  echo '<a href="#"><img src="/path/to/image_'.$randid.'.jpg"></a>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:59:19.570

```
<script type="text/javascript" language="JavaScript">
var now = new Date ();
var day = now.getDay();
var images = new Array(7);
var weekday=new Array(7);
images[0] = '../PTB1/data/adverts/ad0.png';
images[1] = '../PTB1/data/adverts/ad1.png';
images[2] = '../PTB1/data/adverts/ad2.png';
images[3] = '../PTB1/data/adverts/ad3.png';
images[4] = '../PTB1/data/adverts/ad4.png';
images[5] = '../PTB1/data/adverts/ad5.png';
images[6] = '../PTB1/data/adverts/ad6.png';
weekday[0]="Sunday";
weekday[1]="Monday";
weekday[2]="Tuesday";
weekday[3]="Wednesday";
weekday[4]="Thursday";
weekday[5]="Friday";
weekday[6]="Saturday";
document.write("<p><a href='YOUR-LINK-HERE'><img src='"+images[day]+"' alt='"+weekday[day]+"' width='180' height='180' border='0'></a></p>");
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:59:33.827

[我认为您也可以使用date()](http://php.net/manual/en/function.date.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)在 PHP 中完成五个链接/图像：

```
<?php
$today = strtotime("today");
$today = date('w',$today);
if ($today==0) echo '<a...><img.../></a>';
if ($today==1) echo '<a...><img.../></a>';
//etc... 
```

如果您希望它是随机的，我相信您可以在登录时在 PHP 中设置一个[$_SESSION](http://www.php.net/manual/en/function.session-start.php)变量，该变量将保存五个图像作为变量。如果他们注销并再次登录，变量会发生变化，您将拥有五个新图像/链接（无论您要查找什么）。

这是你可以做的。创建一个 php 变量文件和一个用于处理登录的 php 文件：

```
<?php
    //variables page
    $your_link_array = array("GOOGLE" => "http://www.google.com","Stackoverflow" => "http://www.stackoverflow.com", "Youtube" => "http://www.youtube.com"); //three as an example, but you should make a lot if you want to pull five each time.
    ?>

    <?php 
    //log in page

    if($login=='success'){ //check username/password etc.
      session_start(); //log in successful
      $_SESSION['links'] = array_rand($your_link_array, 5); //pull 5 random variables from your array of links
    }
    ?>

    <?php
    //any other page that has session_start() at the beginning:
    session_start()
    foreach($_SESSION['links'] as $k => $v){ // show the five random links
      echo '<a href="'.$k.'" />'.$v.'</a>';
    } 
    ?> 
```

其他资源：[array_rand](http://php.net/manual/en/function.array-rand.php)，[foreach](http://php.net/manual/en/control-structures.foreach.php)

# .net - 访问不同程序集的资源

> ID：13199498
> 
> 赞同：1
> 
> 时间：2012-11-02T16:39:23.253
> 
> 标签：.net, wpf, .net-assembly

我的程序具有以下结构，其中框代表程序集，箭头代表引用：

![装配结构](../Images/3356766dbe6c37e52e78649f6708b97a.png)

该`WpfElements`程序集在其 Resources.xaml 中包含一个资源字典，其中包含一些样式：

```
<ResourceDictionary x:Key="DialogDockStyle">
    ...
</ResourceDictionary> 
```

该`WpfControls`程序集包含一个窗口，它引用这些样式：

```
<StackPanel ... Resources="{StaticResource DialogDockStyle}"> 
```

`Server`和`Client`程序集是实例化此窗口并显示它的可执行文件。

这对`Server`. 显示窗口并可以使用。但是，当从 运行相同的代码时`Client`，实例化窗口会发生错误：

> 找不到名为“DialogDockStyle”的资源。

从一个程序集而不是从另一个程序集工作有点奇怪。有什么我可以监督的以使其在两个程序集中都能正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:46:28.303

我错过了`App.xaml`像这样指定资源：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/WpfElements;component/Resources.xaml"/>
            ...
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

# vba - 使用原始文件名下载文件

> ID：13199499
> 
> 赞同：1
> 
> 时间：2012-11-02T16:39:25.537
> 
> 标签：vba, excel, winhttprequest

使用 vba 和 excel，我希望从我不知道原始文件名的 url 下载文件。使用 URLDownloadToFile 或与 WinHttpRequest 一样的其他方法，希望您为正在下载的文件命名。我想用原始文件名保存，就像导航到 Internet Explorer 上的 url 一样。

我的网址示例： [https ://mysite.com/PDF/CreatePDFforProcess.aspx?ID=6370947](https://mysite.com/PDF/CreatePDFforProcess.aspx?ID=6370947)

在 Internet Explorer 上，这将打开一个另存为窗口，并带有默认文件名建议。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:16:08.360

您可以从响应 HTTP 标头中获取文件类型和文件名（有时）

例如，我通过名为的 XMLHttpRequest 对象获取文件`xhr`：

```
debug.print xhr.getResponseHeader("Content-Type")
>application/pdf
debug.print xhr.getResponseHeader("Content-Disposition")
>attachment; filename="test.pdf" 
```

你不应该期望`Content-Disposition`总是被填充。由于您上传了输入文件，因此通过输入文件名称的某些变体来命名响应文件可能更有意义。

# iphone - UIImagePickerController 与自定义 OverlayView 在 iPod iOS5、iPhone4S iOS5 上崩溃

> ID：13199501
> 
> 赞同：0
> 
> 时间：2012-11-02T16:39:33.663
> 
> 标签：iphone, objective-c, ios

我正在使用以下编码拍摄视频，我遇到了一个奇怪的问题。下面的代码在 iPad iOS6、iPad iOS5、iPhone iOS6 设备上运行良好，但在 iPod iOS5、iPhone4S iOS5 上崩溃。

```
UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
                cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

                // Hides the controls for moving & scaling pictures, or for
                // trimming movies. To instead show the controls, use YES.
                cameraUI.allowsEditing = YES;
                cameraUI.delegate = self.objVideoAnalysis;
                cameraUI.showsCameraControls = NO;
                cameraUI.navigationBarHidden = YES;
                cameraUI.toolbarHidden = YES;

                // Displays a control that allows the user to choose movie capture
                cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];
                cameraUI.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;
                //cameraUI.videoQuality = UIImagePickerControllerQualityTypeHigh;

                //set Overlay View for recording
                VideoRecorderOverlayView *objOverlay = [[VideoRecorderOverlayView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
                objOverlay.objVideoRecorder = cameraUI;
                cameraUI.cameraOverlayView = objOverlay;
                [objOverlay release];

                [self presentModalViewController:cameraUI animated: YES]; 
```

在此先感谢，Ganesh。

# ajax - 如何从 AjaxRequest wicket 6 获取额外参数

> ID：13199505
> 
> 赞同：5
> 
> 时间：2012-11-02T16:39:40.887
> 
> 标签：ajax, wicket, wicket-1.6

嗨，所有检票口专业人士，

我想获得我在 AbstractDefaultAjaxBehaviour 的响应（AjaxRequestTarget 目标）方法中添加到 AjaxRequest 的额外参数。

我自己构建了 Wicket.Ajax.get(...) 调用，我可以管理 AbstractDefaultAjaxBehaviour 的 response(AjaxRequestTarget target) 方法被调用，但是我了解如何获取我在我的 js 中添加的额外参数称呼。

所以这里是我正在做的代码：

调用 onSelect 的 js：

```
Wicket.ajax.get({'u':'callbackUrl','c':'componetId', 'ep':{'objectId':'OBJECT_ID'}}); 
```

AbstractDefaultAjaxBehaviour 的 java 片段：

```
onSelectBehavior = new AbstractDefaultAjaxBehavior(){
        @Override
        protected void respond(AjaxRequestTarget target) {
            //here I want to get the OBJECT_ID I added in the Wicket.Ajax.get call above
        }
}; 
```

respond() 方法按预期调用，但我不知道如何获取 OBJECT_ID。实际上，我根本不确定是否以正确的方式将额外参数添加到 wicket.ajax.get 调用中。

在 Wicket 1.4 中，我添加了额外的参数作为 url 查询字符串，例如`ajaxCallUrl...?objectId=OBJECT_ID`，在 response() 中，我从 RequestCycle 中取回了它们`RequestCycle().get().getRequest().getParameter('objectId')`

如果有人可以给我一个提示，我将不胜感激:) 在此先感谢，Ronny

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:12:56.387

你的方法是正确的。你应该能够得到这样的参数：

```
@Override
protected void respond(AjaxRequestTarget target)
{
    getRequest().getRequestParameters().getParameterValue("objectId");
} 
```

请参阅我对[这个问题](https://stackoverflow.com/questions/13187319/wicket-6-2-abstractdefaultajaxbehavior-getcallbackurl-no-longer-resolves-js-vari)的回答，以直接从 Wicket 传递参数，而无需自己构建 ajax 调用。

# php - jQuery-文件-上传

> ID：13199508
> 
> 赞同：0
> 
> 时间：2012-11-02T16:40:02.467
> 
> 标签：php, jquery, file-upload

不确定你们是否可以帮助这与 jQuery-File-Upload 代码有关。我正在尝试传递一个值来为我的上传创建一个文件夹名称。基本上，在包含中执行查询并将数值返回给变量 $leaseId_file 。- $leaseId_file 变量成为文件夹名称。这部分工作正常。创建文件夹并将文件保存到目录中。但是，当我刷新页面时，没有列出上传的文件。以下是我在文件 php/.index.php 中使用的代码 - 任何帮助都会很棒。 - 谢谢。

```
 error_reporting(E_ALL | E_STRICT);

            include_once('../../../_includes/get_leaseId_files.php'); // All this does is returns a value for $leaseId_file. This is the value I want for the directory.

            require('upload.class.php'); 

            class CustomUploadHandler extends UploadHandler {
                protected function get_user_id() {
                global $leaseId_file;

                 return $leaseId_file;

                }
            }

            $upload_handler = new CustomUploadHandler(array(
                'user_dirs' => true
            )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:11:24.347

由于您使用的是 jQuery，我建议您首先查看一下可供您立即使用的各种文件上传插件。如果您尝试推出自己的解决方案，我保证您会遇到很多这样的问题。不过我想，既然您使用 jQuery 已经让您的生活更轻松，为什么不将相同的逻辑应用于您的文件上传脚本呢？

如果您不相信，我建议您检查一下（排名不分先后）：

*   [jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)
*   [上传](http://www.uploadify.com/)
*   [Plupload](http://www.plupload.com/) - 不是专门的 jQuery，但支持 HTML5 和许多后备
*   [不是插件，而是很好的教程](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

# java - Android：我应该避免 Commonsware 的 WakefulIntentservice 中的自写方法吗？

> ID：13199511
> 
> 赞同：0
> 
> 时间：2012-11-02T16:40:06.273
> 
> 标签：java, android, wakelock, commonsware-cwac

在我的应用程序中，我有 CommosWare 的`WakefulIntentservice`. 从`doWakefulWork`方法上我称之为几个自写的方法。例如：

```
@Override
protected void doWakefulWork(Intent arg0) {
    exampleMethod();
}

private void exampleMethod() {
    //Stuff
} 
```

`WakeLock`它使我的代码保持清晰，但是当我调用自写方法时是否有可能丢失？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:11:01.800

调用一个方法并不意味着你离开`doWakefulWork`它就结束了。这更像是将方法的代码行复制到调用方法。

所以这里

```
protected void doWakefulWork(Intent arg0) {
    exampleMethod();

    exampleMethod2();
}

private void exampleMethod() {
    exampleMethod2();
    exampleMethod2();
}

private void exampleMethod2() {
    print("Hello");
} 
```

和这里做的完全一样

```
protected void doWakefulWork(Intent arg0) {
    { // exampleMethod()
        { // exampleMethod2()
            print("Hello");
        }
        { // exampleMethod2()
            print("Hello");
        }
    }

    { // exampleMethod2()
        print("Hello");
    }
} 
```

或没有所有的大括号

```
protected void doWakefulWork(Intent arg0) {
    print("Hello");
    print("Hello");
    print("Hello");
} 
```

因此，`doWakefulWork`在调用方法时您永远不会离开，`WakeLock`因此无法离开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:43:46.567

只要“自写方法”不分叉线程或以其他方式异步执行某些操作，您就安全了。

# c# - 使用 wpf 以编程方式“缓慢”绘制线条

> ID：13199514
> 
> 赞同：1
> 
> 时间：2012-11-02T16:40:21.643
> 
> 标签：c#, wpf, drawing

我有多个点，我想用 WPF 绘制连接这些点的线，但我想看到它们绘制得很慢，我需要以编程方式进行，我该怎么做？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:11:17.423

你可以尝试这样的事情：

```
<Grid>
    <Grid.Triggers>
        <EventTrigger RoutedEvent="MouseDown">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard TargetName="MyLine">
                        <DoubleAnimation Storyboard.TargetProperty="X2" To="100" Duration="0:0:5"/>
                        <DoubleAnimation Storyboard.TargetProperty="Y2" To="100" Duration="0:0:5"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Grid.Triggers>
        <Line X1="10" Y1="10" X2="20" Y2="20" Stroke="Black" Name="MyLine"/>
</Grid> 
```

当你点击这条线时，你会看到它在增长。您可以将此故事板附加到您想要的任何事件或代码，我只是使用鼠标按下来进行演示。

如果要绘制多条线，可以执行以下操作：

```
<Grid>
    <Grid.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="Line1" Storyboard.TargetProperty="X2" To="100" Duration="0:0:5"/>
                        <DoubleAnimation Storyboard.TargetName="Line1" Storyboard.TargetProperty="Y2" To="100" Duration="0:0:5"/>
                        <DoubleAnimation Storyboard.TargetName="Line2" Storyboard.TargetProperty="X2" To="200" Duration="0:0:5" BeginTime="0:0:5"/>
                        <DoubleAnimation Storyboard.TargetName="Line2" Storyboard.TargetProperty="Y2" To="0" Duration="0:0:5" BeginTime="0:0:5"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Grid.Triggers>
        <Line X1="10" Y1="10" X2="10" Y2="10" Stroke="Black" Name="Line1"/>
    <Line X1="100" Y1="100" X2="100" Y2="100" Stroke="Black" Name="Line2"/>
</Grid> 
```

当然，如果您不能在 XAML 中提前声明这些情节提要，则很有可能即时构建这些情节提要。

# templates - 模板内的 XSL 循环

> ID：13199515
> 
> 赞同：4
> 
> 时间：2012-11-02T16:40:28.683
> 
> 标签：templates, xslt, loops, creation

我正在尝试在模板内创建一个循环。我找到了 2 种方法，但它们都不起作用：

方法一：

```
<xsl:template name="recurse_till_ten">
    <xsl:param name="num">1</xsl:param> <!-- param has initial value of
1 -->
    <xsl:if test="not($num = 10)">
        ...do something
        <xsl:call-template name="recurse_till_ten">
            <xsl:with-param name="num">
                <xsl:value-of select="$num + 1">
            </xsl:with-param>
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

方法二：

```
<xsl:variable name="count" select="'5'"/> 
<xsl:for-eachselect="(//*)[position()&lt;=$count]"> 
 <!-- Repeated content Here --> 
 <!-- use position() to get loop index --> 
 <xsl:value-of select="position()"/>.<br/> 
</xsl:for-each> 
```

方法1给出了以下错误：

元素模板只允许作为样式表的子元素

方法 2 没有显示任何内容，因为我使用另一个 position() 来显示一些输出：

```
<td>
        <xsl:if test='buildid = /cdash/etests/etest/buildid'>
                            <xsl:variable name='index' 
                                          select='2*count(preceding-sibling::build[buildid = /cdash/etests/etest/buildid])+position()' />
                            <xsl:value-of select="/cdash/etests/etest[position()=$index]/value" />
        </xsl:if>
                        </td> 
```

如何创建一个应该在两次之间调用代码的循环？

原始 XSL：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version='1.0'>

<xsl:include href="header.xsl"/>
<xsl:include href="footer.xsl"/>

<xsl:include href="local/header.xsl"/>
<xsl:include href="local/footer.xsl"/>

<xsl:output method="xml" indent="yes"  doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
   doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" />
<xsl:template match="/">
<html>
<head>
  <title><xsl:value-of select="cdash/title"/></title>
  <meta name="robots" content="noindex,nofollow" />
  <link rel="StyleSheet" type="text/css">
    <xsl:attribute name="href">
      <xsl:value-of select="cdash/cssfile"/>
    </xsl:attribute>
  </link>
  <xsl:call-template name="headscripts"/>
   <!-- Include JavaScript -->
  <script src="javascript/cdashTestGraph.js" type="text/javascript" charset="utf-8"></script>

</head>
<body bgcolor="#ffffff">

<xsl:choose>
<xsl:when test="/cdash/uselocaldirectory=1">
  <xsl:call-template name="header_local"/>
</xsl:when>
<xsl:otherwise>
  <xsl:call-template name="header"/>
</xsl:otherwise>
</xsl:choose>

<br/>
<h3>Testing summary for
<u><xsl:value-of select="cdash/testName"/></u>
 performed between <xsl:value-of select="cdash/builds/teststarttime"/> and <xsl:value-of select="cdash/builds/testendtime"/>
</h3>

<!-- Failure Graph -->
<a>
<xsl:attribute name="href">javascript:showtestfailuregraph_click('<xsl:value-of select="/cdash/dashboard/projectid"/>','<xsl:value-of select="/cdash/testName"/>','<xsl:value-of select="/cdash/builds/currentstarttime"/>')</xsl:attribute>
Show Test Failure Trend
</a>
<div id="testfailuregraphoptions"></div>
<div id="testfailuregraph"></div>
<center>
<div id="testfailuregrapholder"></div>
</center>
<br/>
<!-- Test Summary table count(preceding-sibling::etests[columnname]) + 1 count(/cdash/etests/columnname) + 1  /cdash/etests/columnname[position()=$index] -->
<table id="testSummaryTable" cellspacing="0" cellpadding="3" class="tabb">
<thead>
  <tr class="table-heading1">
    <th id="sort_0">Site</th>
    <th id="sort_1">Build Name</th>
    <th id="sort_2">Build Stamp</th>
    <th id="sort_3">Status</th>
    <th id="sort_4">Time (s)</th>
    <th id="sort_5">Build Revision</th>
    <xsl:for-each select='/cdash/etests/columnname'>
        <xsl:variable name='index_col' select='count(preceding-sibling::columnname) + 1'/>
        <th><xsl:attribute name="id">
            <xsl:value-of select="$index_col" />
        </xsl:attribute>
        <xsl:value-of select="/cdash/etests/columnname[position()=$index_col]" /></th>
    </xsl:for-each>

  </tr>
</thead>

<xsl:for-each select="cdash/builds/build">
  <tr>
    <td>
      <xsl:value-of select="site"/>
    </td>

    <td><a>
      <xsl:attribute name="href">
        <xsl:value-of select="buildLink"/>
      </xsl:attribute>
      <xsl:value-of select="buildName"/>
    </a></td>
    <td>
      <xsl:value-of select="buildStamp"/>
    </td>
    <td>
      <xsl:attribute name="class">
        <xsl:value-of select="statusclass"/>
      </xsl:attribute>
      <a>
      <xsl:attribute name="href">
        <xsl:value-of select="testLink"/>
      </xsl:attribute>
      <xsl:value-of select="status"/>
      </a>
    </td>
    <td>
      <xsl:value-of select="time"/>
    </td>
    <td>
      <a><xsl:attribute name="href"><xsl:value-of select="update/revisionurl"/></xsl:attribute>
         <xsl:value-of select="update/revision"/>
      </a>
    </td> 
    <!-- NEW ADDITIONNN !!!!!!!!!!! -->

        <td>
        <xsl:if test='buildid = /cdash/etests/etest/buildid'>
                            <xsl:variable name='index' 
                                          select='2*count(preceding-sibling::build[buildid = /cdash/etests/etest/buildid])+1' />
                            <xsl:value-of select="/cdash/etests/etest[position()=$index]/value" />
        </xsl:if>
                        </td>

        <td>
        <xsl:if test='buildid = /cdash/etests/etest/buildid'>
                            <xsl:variable name='index' 
                                          select='2*count(preceding-sibling::build[buildid = /cdash/etests/etest/buildid])+2' />
                            <xsl:value-of select="/cdash/etests/etest[position()=$index]/value" />
        </xsl:if>
                        </td>

    <!-- NEW ADDITIONNN !!!!!!!!!!! -->
  </tr>
</xsl:for-each>
</table>
<br/>

<!-- FOOTER -->
<br/>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

原始 XML：

```
<?xml version="1.0" encoding="utf-8"?><cdash><title>Title</title><cssfile>cdash.css</cssfile><version>2.1.0</version><dashboard>
  <nextdate>2012-09-18</nextdate>
  </menu><etests>
<columnname>LoadTime</columnname>
<etest>
<name>LoadTime</name><buildid>19390</buildid><value>1777</value>
</etest>
<columnname>Median</columnname>
<etest>
<name>Median</name><buildid>19390</buildid><value>1508</value>
</etest>
<etest>
<name>LoadTime</name><buildid>19389</buildid><value>676</value>
</etest>
<etest>
<name>Median</name><buildid>19389</buildid><value>868</value>
</etest>
</etests>
<builds>
<projectid>1</projectid><currentstarttime>1347825600</currentstarttime><teststarttime>2012-09-16T22:00:00</teststarttime><testendtime>2012-09-17T22:00:00</testendtime>
<build>
<buildName>Linux</buildName><buildStamp>20120916-2100-Nightly</buildStamp><time>174.86</time><buildid>19390</buildid><buildLink>viewTest.php?buildid=19390</buildLink><testLink>testDetails.php?test=289784&amp;build=19390</testLink><status>Passed</status><statusclass>normal</statusclass></build>
<build>
<buildName>Linux</buildName><buildStamp>20120916-2100-Nightly</buildStamp><time>174.86</time><buildid>19389</buildid><buildLink>viewTest.php?buildid=19389</buildLink><testLink>testDetails.php?test=289784&amp;build=19389</testLink><status>Passed</status><statusclass>normal</statusclass></build>
</builds>
<generationtime>0.201</generationtime></cdash></xml> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:22:59.883

我不确定您在方法 2 过程中要做什么，所以我将专注于第一个。

您需要将代码更新为这样的内容

```
<xsl:template name="recurse_till_ten">
    <xsl:param name="num" />
    <xsl:if test="not($num = 10)">
        ...do something
        <xsl:call-template name="recurse_till_ten">
            <xsl:with-param name="num" select="$num + 1" />
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

我所做的唯一重要更改是没有在循环中设置变量。通过将其设置在循环中，您将始终设置`num = 1`为无限循环。

因此，您可以通过这样做在模板中的其他位置调用它。

```
<xsl:call-template name="recurse_till_ten">
    <xsl:with-param name="num" select="number('1')" />
</xsl:call-template> 
```

这应该允许您循环直到变量达到 10。

# erlang - 重新启动erlang进程并保留状态

> ID：13199528
> 
> 赞同：9
> 
> 时间：2012-11-02T16:41:23.183
> 
> 标签：erlang

我有一个启动多个子进程的主管进程。目前，当孩子去世时，我会使用新的 Pid 生成一个新进程。这意味着我丢失了刚刚死亡的子进程的状态信息。我希望我的客户始终使用相同的标识符与子进程进行通信。尽管子进程可能会死亡并被主管重新启动。

我正在考虑使用唯一名称注册子进程并将子状态存储在 ets 表中。问题是 - 在 Erlang 中解决此类问题的推荐方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T18:36:42.827

将进程状态存储在 ets 表中有助于在崩溃之间保持状态，我通常使用全局注册表来为进程提供持久名称。（玩家 200 将注册为 {player, 200}。）我不建议使用本地注册表，因为它要求您使用原子，如果您有很多子进程，您可以通过动态创建它们（如 player_200、player_201 等）

但是，在 ets 表中存储子状态有其自身的风险和问题。如果一个孩子在发生错误和保存到 ets 表之间崩溃，你应该没问题。但是，如果您处理的数据导致孩子保存垃圾状态，然后在处理下一条消息时崩溃怎么办？您将重新启动该过程，从 ets 表中加载错误状态，然后再次崩溃您的下一条消息。当然有办法解决这个问题，但你应该意识到这是一种可能性并解决它。

虽然 Erlang 隐藏了将 ets 表分配给所有进程的问题，但这样做的代价是 CPU 和潜在的争用。如果您要对 ets 表进行大量更改，那么您将在性能上为此付出代价。

如果您的孩子正在崩溃，您不应该为他们寻找一种方法来消除错误条件吗？我通常会将进程崩溃视为我需要解决根本原因和修复的问题。?

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T10:53:52.070

使用 ETS 表可能是保持状态的方法。[Vinoski 的文章](http://steve.vinoski.net/blog/2011/03/23/dont-lose-your-ets-tables/)讨论了如何在保留 ETS 表数据的同时重新启动崩溃的进程。

正如@user30997 指出的那样，表中的数据实际上可能是进程崩溃的原因，所以在重新启动时，您可能想要验证表（或设置进程重启次数的限制......）

对于将进程与 id 相关联，您应该查看[gproc](https://github.com/uwiger/gproc)，它对此非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-31T16:04:23.413

使用事件源，持久化所有事件，并重放以重建状态。如果您需要快速回放，请制作快照。下面的例子： [https ://github.com/bryanhunter/cqrs-with-erlang/tree/ndc-oslo](https://github.com/bryanhunter/cqrs-with-erlang/tree/ndc-oslo)

事实上，如果基于这个例子构建一个完整的框架就好了。

# android - 基于 ActionBarSherlock 选项卡的应用程序在较旧的 Android 设备上崩溃

> ID：13199530
> 
> 赞同：0
> 
> 时间：2012-11-02T16:41:25.513
> 
> 标签：android, actionbarsherlock

在阅读了很多关于它的内容后，我决定使用 ActionBarSherlock 来提供现代外观，同时支持旧的 Android 版本。

我使用 Eclipse 项目向导创建了一个基于 Android 选项卡的应用程序，并将其修改为使用 ActionBarSherlock。主要活动的结果是这样的：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {

    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set up the action bar.
        final ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayHomeAsUpEnabled(false);

        // For each of the sections in the app, add a tab to the action bar.
        actionBar.addTab(actionBar.newTab().setText(R.string.title_tab_1).setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText(R.string.title_tab_2).setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText(R.string.title_tab_3).setTabListener(this));
    }
    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }    
} 
```

清单文件如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.comp.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="android.app.TabActivity" />
        </activity>
    </application>
</manifest> 
```

当我在 Android 4.0.4 设备上运行它时，它运行良好，但在 Android 2.3.3 设备上运行它时，它在“setContentView”行中崩溃。任何想法为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:51:12.717

如果你想使用 ActionBar Sherlock，你必须使用 This Theme 来代替： `Theme.Sherlock.Light`

# javascript - 在 jqGrid 中，如何获取另一个元素所在的行？

> ID：13199532
> 
> 赞同：0
> 
> 时间：2012-11-02T16:41:37.027
> 
> 标签：javascript, jquery, ajax, jqgrid

我有一个`jqGrid`名为“Actions”的列。在这一列中，每一行都有许多按钮，这些按钮应该对该行中的数据执行各种功能。

不幸的是，我发现唯一与我想要做的远程匹配的网格参数是`selrow`. 这将获取*选定*的行。但是，如果用户单击其中一个操作按钮，这并不一定意味着该行被“选中”（即，用户之前已单击它）。

有没有办法让我得到用户按下的按钮的行？或者一开始就在里面有按钮没有意义`jqGrid`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:14:23.317

例如，如果您要使用`onCellSelect`来检测单击了哪个按钮，您将直接获得`rowid`被单击的按钮的 。[答案](https://stackoverflow.com/a/5305904/315935)将为您提供有关实施的更多详细信息。

如果您希望实现自定义`click`事件处理程序，您可以找到最接近的`<tr>`元素。它`id`是单击按钮的rowid。所以你可以使用类似`$(e.target).closest("tr.jqgrow").attr("id")`where `e`is the event is `click`handler 之类的东西。

# c# - 与客户端端点对话的工作流服务自定义跟踪参与者？

> ID：13199533
> 
> 赞同：1
> 
> 时间：2012-11-02T16:41:38.680
> 
> 标签：c#, wpf, workflow-foundation-4, workflowservice

我正处于工作流服务和 WPF 的调查阶段。

到目前为止，让状态机 WF 服务托管在 IIS 中并且一个或多个 WPF 客户端与 WF 服务通信听起来是合理的选择。

但是，尽管阅读和研究了几天，但我不清楚从 WPF 应用程序跟踪状态之间转移的最佳策略是什么。

跟踪参与者的样本很多，但大多数都基于一个流程场景。

所以我正在考虑如下结构。

1.  任何客户端调用以注册其客户端终结点的服务器端 WCF 操作
2.  一个自定义跟踪参与者，它遍历所有已注册的客户端端点并在其 Track() 方法中发送 TrackingRecord。

这种方法的优点是它允许实时更新状态而无需像 ETW 这样的额外层。另一个优点是它允许将逻辑（或者可能是模型层）与表示层分离。

任何人都可以就上述结构分享意见吗？我也欢迎任何关于实现目标的建议。

* * *

[编辑]为了使我上面的想法更加详细和清晰，下面的步骤将是一个典型的用法。

1)（WPF 客户端）包含并打开一个 WCF 端点以接收 TrackRecords。

2)（WF 服务）打开一个 WCF 操作（或带有接收消息的简单 WF 实例），将客户端地址注册到内部存储。

3) (WF 服务) 创建并添加一个自定义跟踪参与者，它将 TrackingRecord 发送到注册客户端的端点。

4）（客户端）连接到上述服务并分发步骤 1 中提到的客户端端点，从而接收 TrackingRecords。

* * *

[编辑 2]

简单地说我的目标，我想知道

1) 通过 TrackingParticipant 在 WF 服务 (IIS) + WPF 或任何类型的客户端应用程序上跟踪 StateMachine 状态的最有效方式。

2）如果我的建议可以改进

同时，我已经实现了这一点并且到目前为止效果很好。我还在客户端添加了 MvvM Light 框架的消息传递功能，以便将接收到的消息轻松传播到模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:27:22.250

有一个现有的机制可以包含您建议的许多功能（如果我正确理解您的需求）。如果您需要利用 WCF 服务以双向方式进行通信（即，将数据推送到连接的客户端），我建议您利用`PollingDuplex`Binding。

我`PollingDuplex`过去曾使用各种 Silverlight 客户端来交换数据，并且我读过类似[这样](http://petermcg.wordpress.com/category/pollingduplex/)的文章，描述了在 WPF 空间中产生相同行为的步骤。

这种方法将自动化您显然正在考虑手动执行的大部分端点注册和跟踪逻辑。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:04:09.487

您可以看看 SignalR，而不是试图强迫 WCF 成为一个发布/订阅平台，这不是它的强项。我的博客上有一个示例，其中包含视觉跟踪示例，其中跟踪参与者从跟踪应用程序中分离出来，因此并非全部在一个过程中。该博客还具有指向其他两个博客的链接，其中完成了类似的事情，但都使用了更适合此类事件的消息传递架构。

[http://panmanphil.wordpress.com/2012/11/05/slides-and-sample-from-the-chippewa-valley-code-camp/](http://panmanphil.wordpress.com/2012/11/05/slides-and-sample-from-the-chippewa-valley-code-camp/)

# javascript - 自定义“Facebook 分享”内容

> ID：13199534
> 
> 赞同：0
> 
> 时间：2012-11-02T16:41:39.930
> 
> 标签：javascript, jquery, facebook, api, facebook-sharer

我正在编辑这个问题，以便它比我最初写的更有意义。

我正在实现下面的代码，以便在我的网站上添加一个 Facebook“分享”按钮。我的问题是该脚本直接在脚本中调用“链接”、“图片”、“名称”、“标题”和“描述”的实际值。

如何更改此代码，以便它自动从我的网站中提取此信息。例如，我需要它从当前提取 URL 并将其分配给“链接”。另一个例子：我不想提供图片的 URL，而是想将代码指向某个类。

```
<script> 
  FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

这是来自[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:16:29.063

`window.location.pathname`只会返回 URL 的路径部分，您还需要添加您的域。`window.location.href`将返回这个。很容易改变你的代码来做到这一点：

```
<script> 
  FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: window.location.href,
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

# python - Python正则表达式替换前导和尾随引号

> ID：13199538
> 
> 赞同：0
> 
> 时间：2012-11-02T16:42:01.440
> 
> 标签：python, regex

如何使用 python 正则表达式将前导和尾随的任意引号字符串分别替换为任意字符串？

**示例输入字符串**

```
This is a "quote" and here's another "quote" 
```

或者

```
This is a &ldquo;quote&rdquo" and here's another &ldquo;quote&rdquo; 
```

**示例输出字符串**

```
This is a &ldquo;quote&rdquo; and here's another &ldquo;quote&rdquo; 
```

或者

```
This is a <span>"quote"</span> and here's another <span>"quote"</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:45:06.547

这是处理任意引号对并将它们转换为“文本”的答案的变体，即输出 2——所有这些都只需一次调用`re.sub`：

```
quotes = [('"', '"'), ("&ldquot;", "&rdquot;")]
left = '|'.join(re.escape(t[0]) for t in quotes)
right = '|'.join(re.escape(t[1]) for t in quotes)
regex = r'((%s)(.*?)(%s))' % (left, right)
outstr = re.sub(regex, r'<span>"\3"</span>', instr) 
```

测试输入字符串：

```
>>> replace = lambda x: re.sub(regex, r'<span>"\3"</span>', x)
>>> replace('''This is a "quote" and here's another "quote"''')
'This is a <span>"quote"</span> and here\'s another <span>"quote"</span>'
>>> replace('''This is a &ldquot;quote&rdquot; and here's another &ldquot;quote&rdquot;''')
'This is a <span>"quote"</span> and here\'s another <span>"quote"</span>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:42:01.440

我写了以下非正则表达式解决方案，但可能有更好的方法？

```
def replace_quotes(value, leadqt='"', tailqt='"', leadrep='<span>', tailrep='</span>', inc=True):
    while leadqt in value:
        value = value.replace(leadqt, leadrep, 1).replace(tailqt,tailrep,1)
    if inc:
        value = value.replace(leadrep, '%s%s' % (leadrep, leadqt)).replace(tailrep, '%s%s' % (tailqt, tailrep))
    return value 
```

测试它...

```
>>> MYSTR = "This is a \"quote\" and here's another \"quote\""
>>> replace_quotes(MYSTR)
u'This is a <span>"quote"</span> and here\'s another <span>"quote"</span>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:47:34.140

这不适用于嵌套引号，但是：

```
s = 'This is a "quote" and here\'s another "quote"'
re.sub(r'"(.*?)"', r'<span>\1</span>', s)
# "This is a <span>quote</span> and here's another <span>quote</span>" 
```

然后像这样包装：

```
def rep_quote(s, begin, end):
    return re.sub(r'"(.*?)"', r'{}\1{}'.format(re.escape(begin), re.escape(end)), s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:47:47.473

像这样的东西：

```
>>> st='''This is a "quote" and here's another "quote"'''
>>> words=re.findall(r'"\w+"',st)
>>> for x in set(words):
...     st=st.replace(x,'<span>'+x+'</span>')
... 

>>> print st
This is a <span>"quote"</span> and here's another <span>"quote"</span> 
```

# java - Cascade.ALL，但只是在删除时清除引用？

> ID：13199541
> 
> 赞同：1
> 
> 时间：2012-11-02T16:42:18.517
> 
> 标签：java, hibernate, jakarta-ee, cascade

我的一个实体中有一个 @ManyToOne 条目。如果我删除周围的实体，我会得到一个`deleted object would be re-saved by cascade (remove deleted object from associations)`

但我需要那里的级联选项，所以：我怎样才能级联删除*旁边*的任何东西，分别只是*清除*引用而不是级联删除？

# c++ - new 的内存是否必须来自 operator new？

> ID：13199551
> 
> 赞同：5
> 
> 时间：2012-11-02T16:42:55.263
> 
> 标签：c++, c++11

在考虑类似的事情时

```
auto x = new T; 
```

标准是否强制要求内存*必须*来自`operator new`特定类别或全局？即，由于缺乏特定于类的实现，没有办法`operator new`从全局以外的任何地方获取内存`operator new`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:56:13.487

我认为你有错误的方式。

表达式`new T`总是包含两个步骤：

1.  `operator new`寻找合适的。如果类`T`中存在一个，则采用那个，否则采用全局的。全局的总是存在的，因为这是标准规定的（所以你永远不能“定义”它（因为它已经定义了），但你可以*替换*它）。

    你可以说总是无条件地`::new T`选择全局。`operator new`

2.  一旦分配函数被调用并成功，对象就会在该内存中构造。

如果你说`new (a, b, c) T`，那么同样会发生，只是在第 1 步中，我们现在正在寻找`operator new`具有适当签名的重载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:50:45.960

不保证是`::operator new`，因为内存可以来自特定于类的内存`operator new`，但如果不存在此类特定于类的版本，则将使用全局版本。该标准的相关部分是`[expr.new]/8`：

> new-expression 通过调用分配函数来获取对象的存储空间。...分配函数的名称是 operator new ...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T16:57:39.383

> 标准是否强制要求内存*必须*来自 operator new-class-specific 或 global？

是的，它确实。

`§5.3.4 [expr.new]`：

> p8 *new-expression*通过调用*分配函数*(3.7.4.1) 为对象获取存储空间。[...] 如果分配的类型是非数组类型，**分配函数的名称是`operator new`**[...]。
> 
> p9 如果*new-expression*以一元运算符开头`::`，则在全局范围内查找分配函数的名称。否则，如果分配的类型是类类型`T`或其数组，则在`T`. 如果此查找找不到名称，或者分配的类型不是类类型，则在全局范围内查找分配函数的名称。

# javascript - 填充数组时javascript失败

> ID：13199554
> 
> 赞同：1
> 
> 时间：2012-11-02T16:43:06.693
> 
> 标签：javascript, arrays

当我运行以下 javascript 时，如果`input_array[input_array.length] = id;`没有注释掉它会失败。谁能看到是什么原因造成的？

```
function cat_images_low_lag () {
    var input_array = new array ();

    cat_images = $(".category-description").next().find("img");
    cat_images.each(function () { 
        url = $(this).parent().attr("href");
        id = url.split("id=");
        id = id[1];

        input_array[input_array.length] = id;
    });
    alert ("trst");
    alert(input_array.join("\n"));
} 
```

干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:44:37.867

首先，替换：

```
var input_array = new array (); 
```

和：

```
var input_array = new Array(); 
```

并使用它来插入：

```
input_array.push(id); 
```

或者直接添加：

```
input_array[input_array.length] = id; 
```

其他初始化数组的方法：

```
var input_array = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:01:37.540

其他人注意到大写问题，但由于您使用的是 jQuery，构建 Array 的更好方法如下：

```
function cat_images_low_lag () {
    var input_array = $(".category-description + * img").map(function () { 
        return this.parentNode.href.split("id=")[1];
    }).toArray();

    alert ("trst");
    alert(input_array.join("\n"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:45:02.017

您对数组的初始化不正确

```
var input_array = new array (); 
```

你应该使用速记

```
var input_array = []; 
```

或者

```
var input_array = new Array(); 
```

此外，为了避免 cat_images 成为全局范围内的变量，您可能需要考虑像这样在本地范围内限定它

```
var cat_images = $(".category-description").next().find("img"); 
```

# java - 如何将 JUnit4 的测试通过/失败结果记录到文件中？

> ID：13199559
> 
> 赞同：2
> 
> 时间：2012-11-02T16:43:29.553
> 
> 标签：java, junit, junit4

当一个给定的 JUnit4 测试运行时，我希望它生成一个包含所有测试结果的日志文件。我不想通过 CI/ant/maven 调用它。**我希望它可以在任何时候从任何地方调用 JUnit 测试时运行。**如果那是不可能的，那么我想编写我自己的运行程序，它有问题地调用我的 AllTestSuites 类并自己记录所有结果。

这将是我的测试课程之一：

```
public class SimpleTestSuite extends TestCase{

    @Test
    public void simpleTestPass() {
        assertTrue(true);
    }

    @Test
    public void simpleTestFail() {
        assertTrue(false);
    }

    @Test
    public void simpleTestException() {
        throw new RuntimeException();
    }

} 
```

我将它包含在一个 TestSuite 中，其中包含我要运行的所有测试套件：

```
@RunWith(Suite.class)
@Suite.SuiteClasses({SimpleTestSuite.class, ExampleSuite.class,})
public final class AllTestSuites {} 
```

我想调用 AllTestSuites 并让它生成一个日志文件，如下所示。请记住，我更喜欢捕获 JUnit4 框架的结果总线上的内容，而不是重新发明/创建新的测试运行器。

```
simpleTestPass - pass - 1/1 assertions passed
simpleTestFail - fail - 0/1 assertions passed
simpleTestException - exception - stacktrace as follows... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:53:20.027

在您的测试类和基础测试类中添加记录器并定义`TestWatchMan`如下：

```
Logger logger = LoggerFactory.getLogger(TestCase.class);
@Rule public MethodRule watchman = new TestWatchman() {
   public void starting(FrameworkMethod method) {
      logger.info("Test {} is running.", method.getName());
   }
   public void succeeded(FrameworkMethod method) {
   logger.info("Test {} succesfully run.", method.getName());
   }
   public void failed(Throwable e, FrameworkMethod method) {
        logger.error("Test {} failed with {} reason.", 
                                                method.getName(), e.getMessage());
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:22:35.213

您可以使用 JUnit [TestWatcher](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestWatcher.html)。

TestWatcher 定义了以下方法：

*   成功（）
*   失败的（）
*   开始（）
*   完成的（）

您可以实现它以获取事件通知并将它们写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:12:33.120

JUnit 会将这些结果输出到标准 System.out。也许您可以将该输出重定向到一个文件。

```
@BeforeClass 
void redirectOut(){
    System.setOut(new PrintStream(new OutputStream() {
        @Override
        public void write(int arg0) throws IOException {
        // TODO Auto-generated method stub

        }
    }));
} 
```

# java - 用于以 XML/JSON 和 API 表示图形/网络数据的标准规范格式以进行遍历

> ID：13199560
> 
> 赞同：2
> 
> 时间：2012-11-02T16:43:32.450
> 
> 标签：java, xml, json, graph

是否有任何标准的规范格式用于以 XML/JSON 和 API 表示图形/网络数据（例如您的 facebook 或linkedin 网络）来访问它们？在我们当前的系统中，图在我们基于 Java 的环境中表示为地图的 Java MAP。我们系统的不同之处在于我们需要支持多种图表类型（与 facebook 图表不同，其中图表类型只是一个朋友）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:53:03.117

Graphviz 既不是 XML 也不是 JSON，但它是一种带有渲染器 (API) 的开放格式，适用于许多平台

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:09:00.843

XML 或 JSON 可用于表示引用其他对象的对象，并且该引用可被视为图形中的一条边。但是将您的图表解析为 xml 可能效率低下。有专门为此类数据设计的数据库。看看[neo4J](http://neo4j.org/)

然后，图形的内部表示将被委托给数据库，人们多年来一直在研究这个，所以我希望表示是高效的和高性能的。数据库提供了一些导出到 xml 的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-18T14:35:40.133

检查[NetJSON](http://netjson.org/)，特别是[NetworkGraph JSON 对象](http://netjson.org/rfc.html#rfc.section.4)及其[JSON-Schema](http://netjson.org/rfc.html#NetworkGraph-schema)。

还有一个名为[netjsongraph.js](https://github.com/interop-dev/netjsongraph.js)的 javascript 可视化器实现。

# javascript - Backbonejs 应用程序在导航到 `#users` 时自动加载页面`?state=#users`

> ID：13199562
> 
> 赞同：1
> 
> 时间：2012-11-02T16:43:36.457
> 
> 标签：javascript, backbone.js, twitter-bootstrap, coffeescript

在我的*backbonejs*`example.com/?stat=#users`应用程序中，当我导航到时，应用程序会自动重新加载页面`router.navigate('users')`？

当我点击后退按钮时，它会加载 url `example.com/#users`，因此它可以正确访问所需的页面，然后加载`example.com/?stat=#users`。

我遇到了什么问题，我尝试更改`trigger`选项但无法修复？而且我无法找到更多关于它是什么的信息`?state=#...`（我可以做出假设，但简明的文档会非常有帮助）？

一个精简的路线文件：

```
class window.AppRouter extends Backbone.Router
  routes:
    "": "list"
    "users": "list"
    "user/:id": "userDetails"

  list: -> 
    @before()

  before: (callback) ->
    if @users?
      callback() if callback?
    else
      @users = new Users
      @users.fetch(
        success: ->
          $('#sidebar').html(new UsersView({model: app.users}).render().el)
          callback() if callback)

  userDetails: (id) -> 
    @before ->
      user = app.users.get( id)
      if user?
        console.log('inside if')
        app.showView( '#content', new UserView( {model: user}))

  showView: (selector, view) ->
    @currentView.close() if @currentView?
    $(selector).html(view.render().el)
    @currentView = view
    return view 
```

我的精简视图文件：

```
class window.UsersView extends Backbone.View
  tagName:'ul'
  className: 'nav nav-pills nav-stacked'
  initialize: ->
    @userViews = new Array
    @model.bind("reset", @render, this)
    @model.bind("add", (user) =>
      @$el.append( new UserInListView({model: user}).render().el))

  render: (event) ->
    _.each(
      @model.models
      (user) =>
        userView = new UserInListView( {model: user})
        @userViews.push( userView)
        @$el.append( userView.render().el)
      this)
    return this

class window.UserInListView extends Backbone.View
  tagName:"li"

  initialize: ->
    @template = _.template(tpl.get('user_in_list'))
    @model.bind("change", @render, this)
    @model.bind("destroy", @close, this)

  render: (event) ->
    @$el.html( @template( @model.toJSON()))
    return this

  events:
    "click a": "select"

  select: ->
    $("#sidebar>ul>li.active").removeClass("active")
    @$el.addClass( 'active')
    app.navigate("user/#{@model.id}", true)

class window.UserView extends Backbone.View
  initialize: ->
    templateName = 'user_edit'
    @template = _.template(tpl.get(templateName))
    @model.bind("change", @render, this)

  events:
    "click .cancel": "cancel"

  cancel: ->
    @remove()
    app.navigate('users', false) 
```

我只是不确定是什么原因造成的，是绑定吗？它是推特引导程序吗？这是我设置路由器的方式吗？为什么当我直接访问 url 时我没有遇到问题，但是当我的路由器将我导航到那里时我会遇到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:25:09.627

问题必须在or标记上包含一个`name`属性[我相信其他人]，通过在标记中包含该属性，该属性包含在 get 请求中，因此当调用 Navigation 时，它会访问所需的页面，然后执行请求无论参数是什么。`<input>``<select>``GET``name`

在我的例子中，我在一个选择器中留下了`name='state'`一个（我在访问一个用户之后意识到，这个用户实际上已经`state`设置了他们的状态，即他们所在的状态，并且 url 是`example.com/?state=IL#users`并且这个“状态”与正在访问的主干页面的状态无关）。

# sql-server-2012 - 使用 Entity Framework 5.0 Designer 中的 FileTable？

> ID：13199563
> 
> 赞同：3
> 
> 时间：2012-11-02T16:43:36.847
> 
> 标签：sql-server-2012, entity-framework-5

我想使用 FileTable 来存储一堆数据，以及迁移大量基于文件的现有数据。

我知道如果我创建它，我可以访问表中的文件流属性 - 它只是 varbinary(MAX) 所以 Entity Framework 5.0 设计器对这些表没有问题。但我似乎无法在我的 edmx 设计器中显示 SQL 2012 FileTable。

我得到的错误是这样的：

> 由于以下异常，无法生成模型：'表'EpicDB.dbo.DataFileTable'被关系引用，但找不到。

DataFileTable 是我的 FileTable 的名称。

在 SQL Management Studio 设计器中，我注意到 FileTable 在 path_locator 和 parent_path_locator 之间有一个奇怪的自引用。也许这会产生一些痛苦？

有谁知道我该怎么做？

# c# - asp.net 中的数据绑定范围

> ID：13199565
> 
> 赞同：0
> 
> 时间：2012-11-02T16:43:41.160
> 
> 标签：c#, asp.net, data-binding, scope

这可能是我可以测试自己的事情之一，但我想从比我更了解数据绑定的人那里获得更具包容性的答案。我自己更像是一个模型密集型 MVC 人，所以我对 asp.net 数据绑定的整个概念有点新。

所以这就是我所理解的：您将控件或整个页面绑定到数据源，然后您可以使用`DataBinder`该类来帮助在运行时解析数据。

我不太明白的是范围。例如，我最近继承的遗留应用程序有很多这样的行：

```
DataBinder.Eval(Container.DataItem, "saved_offer_id"); 
```

但我对 asp.net 如何知道在哪里寻找`saved_offer_id`密钥感到困惑。例如，假设我们有两个中继器，如下所示：

```
<asp:Repeater id="repeater1">
     <span>My offer ID is <# DataBinder.Eval(Container.DataItem, "saved_offer_id") %></span>
</asp:Repeater>

<asp:Repeater id="repeater2">
     <span>My offer ID is <# DataBinder.Eval(Container.DataItem, "saved_offer_id") %></span>
</asp:Repeater> 
```

假设每个中继器都有自己的数据源。如何`DataBinder`知道要查看哪个数据源？是否存在这两个转发器可能显示不同的报价 ID 值的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:01:08.100

DataBinder 使用与其父对象关联的 DataSource。

嵌套阅读器可以读取其父阅读器的当前记录的值。

# vim - 在 gvim 中自定义选项卡工具提示以显示缓冲区列表

> ID：13199566
> 
> 赞同：2
> 
> 时间：2012-11-02T16:43:42.947
> 
> 标签：vim, macvim

当前运行：

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Sep  1 2012 18:08:47)
MacOS X (unix) version
Included patches: 1-646
Compiled by Bjorn Winckler <bjorn.winckler@gmail.com> 
```

我的 .gvimrc 中有以下代码，它应该将所有缓冲区的列表显示为工具提示。但是，它仅显示在当前选项卡（拆分窗口）中可见打开的缓冲区列表。该`:buffers`命令正确列出了所有缓冲区。

我是否误解了这段代码的用途（我是 Vim 脚本的新手；这段代码是从开源配置中借来的）？

```
"show tooltips on tabs
  set guitabtooltip=%{GuiTabToolTip()}

" set up tab tooltips with every buffer name
function! GuiTabToolTip()
  let tip = ''
  let bufnrlist = tabpagebuflist(v:lnum)

  for bufnr in bufnrlist
    " separate buffer entries
    if tip!=''
      let tip .= ' | '
    endif

    " Add name of buffer
    let name=bufname(bufnr)
    if name == ''
      " give a name to no name documents
      if getbufvar(bufnr,'&buftype')=='quickfix'
        let name = '[Quickfix List]'
      else
        let name = '[No Name]'
      endif
    endif
    let tip.=name

    " add modified/modifiable flags
    if getbufvar(bufnr, "&modified")
      let tip .= ' [+]'
    endif
    if getbufvar(bufnr, "&modifiable")==0
      let tip .= ' [-]'
    endif
  endfor

  return tip
endfunction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:06:11.640

缓冲区的来源是`tabpagebuflist()`，正如`:help tabpagebuflist()`解释的那样，它是与当前标签页中的每个窗口相关联的缓冲区编号列表。

要获取所有缓冲区的列表，您必须使用类似

```
filter(range(1, bufnr('$')), 'buflisted(v:val)') 
```

# c# - Windows azure 应用程序开发步骤失败

> ID：13199568
> 
> 赞同：0
> 
> 时间：2012-11-02T16:43:46.477
> 
> 标签：c#, .net, visual-studio-2010, azure

这是我第一次尝试在我的 Visual Studio 2010 上开发 Windows azure 应用程序。到目前为止我所做的是：

*   打开新项目 > C# > 云。
*   下载了 SDK。
*   使用仅显示我的姓名和年龄的代码添加新类。
*   尝试在本地运行此代码并失败！

    ![](../Images/591807fab20a8acec285b466c242ac1c.png)

我的问题是：

*   我可以在本地运行应用程序吗？如果是的话怎么办？
*   如何部署应用程序？（我已经有一个帐户）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:21:23.830

好吧，我看到你的问题不是你的 windows azure sdk，问题是你正在创建一个 WorkerRole 项目，它是一个类库类型并且不会给你输出，因为你需要创建一个 WebRole 项目。

这里我给你这个教程，它会告诉你如何创建你的第一个 WebRole 项目。

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=801](http://www.dotnetcurry.com/ShowArticle.aspx?ID=801)

这个将向您展示如何在云上部署

[http://www.developerfusion.com/article/125435/deploying-an-azure-application](http://www.developerfusion.com/article/125435/deploying-an-azure-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:29:08.127

您要构建什么类型的应用程序？您的错误是因为您正在尝试运行一个不是可执行文件的类库。

Azure 中托管的应用程序主要有两种类型：

1.  网站 - 这些只是托管在 Azure 上的标准 ASP.NET WebForms 或 MVC 项目。这些是最容易上手的，并且在最新的 Azure 版本中，不需要什么特别的。只需创建一个 Web 项目，然后将 git 部署到您的[Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)

2.  Worker 角色 - Worker 角色通常用于执行计算、发送电子邮件、分发工作等后台任务。这些可以有效地被认为是永无止境的控制台应用程序。

例如：

```
while(true)
{
    // do work here
    Thread.Sleep(5000);
} 
```

开发 Azure 应用程序时，您需要创建网站（WebForms、MVC、WebAPI）、WCF 服务或控制台应用程序以作为后台工作程序运行。在本地构建应用程序后，您可以添加一个 Azure Cloud 项目，该项目将处理实际部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:48:18.653

是的，您可以在本地运行您的应用程序：在解决方案资源管理器中选择 Azure 应用程序项目，右键单击，“设置为启动项目”并运行

要发布：转到[https://manage.windowsazure.com/](https://manage.windowsazure.com/)。创建一个新的 Web 角色并下载发布设置。

# java - Java 发送 html 多部分电子邮件和 MS Outlook

> ID：13199569
> 
> 赞同：0
> 
> 时间：2012-11-02T16:43:49.817
> 
> 标签：java, email

当应用程序发送 html 多部分电子邮件时，outlook 无法正确呈现。我们正在使用 spring **org.springframework.mail.javamail.MimeMessagePreparator** 和**org.springframework.mail.javamail.JavaMailSenderImpl**

它将电子邮件呈现为文本，看起来像这样......

```
MIME-Version: 1.0
Content-Type: multipart/mixed; 
                boundary="----=_Part_87_599524958.1351800925134"

------=_Part_87_599524958.1351800925134
Content-Type: multipart/related; 
                boundary="----=_Part_88_222697382.1351800925134"

------=_Part_88_222697382.1351800925134
Content-Type: multipart/alternative; 
                boundary="----=_Part_89_1958386200.1351800925181"

------=_Part_89_1958386200.1351800925181
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

...
... <<< some text here >>>
...

------=_Part_89_1958386200.1351800925181
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

...
... << here it prints html text >>
...
... 
```

# vb.net - 带有 TabControl 的脏表单

> ID：13199572
> 
> 赞同：0
> 
> 时间：2012-11-02T16:44:04.350
> 
> 标签：vb.net

嗨，我有一个带有 TabControl 的表单，每个 tabPage 中有 3 个标签页和控件（文本框和组合框）。
我有一个事件用于 tabPages (controlValueChanged) 中控件的所有更改，还有一个事件用于 tabControl.SelectedIndexChanged。
所以如果表单是脏的，我想启用我的按钮（btnOK）。

```
Private Sub controlValueChanged(sender As System.Object, e As System.EventArgs)
     If bLoading=False 'bLoading is a boolean that is true after I create and populate the controls
        Dirty = True 'Dirty is a boolean property
     End If
End Sub 
```

因此，当我在其中一个控件中更改某些内容时，会触发事件并启用 btnOK。
问题是我第一次更改（访问）到 tabPage 控件是 TabPage 触发 controlValueChanged 事件，导致我的按钮启用，即使我没有更改控件中的任何内容。
如果我第二次访问 TabPage，则不会触发该事件。
我知道这是正常的，但我如何才能克服这个问题并让我的 Dirty =true 只有当控件因为某些东西发生变化而不是当 tabPage 发生变化时才被触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:34:25.377

创建一个新的布尔变量怎么样 - **DoNotMakeDirty**，比如说，然后你可以在`TabControl1_SelectedIndexChanged`sub 中设置`DoNotMakeDirty = True`然后在你的`controlValueChanged`sub 中放置一个 if 语句。

# javascript - window.location.href 仅在 ie 中清除 Cashe 时才有效

> ID：13199576
> 
> 赞同：0
> 
> 时间：2012-11-02T16:44:16.957
> 
> 标签：javascript, html

这里有点奇怪。我有一些 javascript 对表单进行一些验证，如果验证通过，我使用 window.location.href 将用户发送到新页面。

这适用于除 Internet Explorer 之外的所有浏览器。奇怪的是，在 IE 中它不起作用。清除现金，即使用户从未访问过此站点，再试一次，它会很好用！

有任何想法吗？我已经在 10 多台计算机上对此进行了测试，发现这是正确的原因和治疗方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:47:58.207

尝试

```
location.reload(true); 
```

在该页面的顶部..

您可以尝试使用`self.location="yourPage.html";`或重定向`top.location="yourPage.html";`。

但是，在您的浏览器中禁用了 Javascript 的用户会发生什么......？

恕我直言，您应该通过服务器端脚本进行验证并仅使用它进行重定向..

# matlab - 让 matlab 以给定的概率接受状态变化

> ID：13199577
> 
> 赞同：1
> 
> 时间：2012-11-02T16:44:18.940
> 
> 标签：matlab, state, probability

我有一个状态 S 需要以接受概率 Pa 更改为状态 S'。我已经计算了接受概率，并且我有两个状态（每个列向量 3 个数字）。我想告诉matlab以概率Pa接受从S到S'的变化。

注意：这将在一个循环内，并且对于每次迭代计算 Pa 并且 S 以概率 Pa 更改为 S'。

帮助表示赞赏

编辑：这是我到目前为止所拥有的。有一个包含所有 35 种可能状态的矩阵（池）。S'在这里是Sn。

```
S = [5;5;5];
indexn = randi(35);
Sn = Pool(:,indexn); 
```

费用在这里计算

```
PA = exp(-deltacost/k*T); 
```

下一步是以概率 PA 将 S 更改为 Sn。我可能想多了，但我不知道如何改变它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:50:11.000

这应该可以解决问题

```
if Pa<rand()
    do the change
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:10:45.383

以特定概率执行特定动作的常用方法如下：

1.  计算应该完成动作的概率（`PA`在你的情况下）。
2.  [从均匀概率分布](http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29)中画出一个值，我们称之为`R`。
3.  检查是否`R`小于`PA`。这将是真实的，概率恰好等于`PA`。在这种情况下执行操作。

最后提示：从均匀分布中抽取样本的 Matlab 函数是`rand`.

# php - 如何删除 foreach 循环中的数组元素？

> ID：13199578
> 
> 赞同：0
> 
> 时间：2012-11-02T16:44:18.130
> 
> 标签：php, arrays

我有一个 foreach 循环，我想完全删除满足条件的数组元素，并更改键以保持顺序 1、2、3、4。

我有：

```
$thearray = array(20,1,15,12,3,6,93);
foreach($thearray as $key => $value){
    if($value < 10){
        unset($thearray[$key]);
    }
}
print_r($thearray); 
```

但这会使密钥保持原样。我想让它们成为1,2,3,4，如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:48:30.387

重置数组索引[`array_values()`](http://php.net/array_values)：

```
$thearray = array_values( $thearray);
print_r($thearray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:46:22.203

你可以`array_filter`用`remove the array elements that satisfy the criteria`

```
 $thisarray = array_filter($thearray,function($v){ return $v > 10 ;}); 
```

然后根据`array_values`需要使用更改键保持 0, 1,2,3,4 ....

```
 $thisarray = array_values($thisarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:47:57.313

建立一个新数组，然后将其分配给您的原始数组：

```
$thearray=array(20,1,15,12,3,6,93);
$newarray=array();
foreach($thearray as $key=>$value){
  if($value>=10){
    $newarray[]=$value
  }
}
$thearray=$newarray;
print_r($thearray); 
```

# javascript - iOS webview 卡在滚动状态并且 JavaScript 没有响应

> ID：13199587
> 
> 赞同：1
> 
> 时间：2012-11-02T16:45:15.117
> 
> 标签：javascript, ios, uiwebview, scrollbar

我发现我在使用 iOS 网络视图时遇到了问题。我有一个比我的 ipod4 屏幕长的 webview，所以我可以上下滚动。如果我在屏幕上快速拖动并点击几秒钟，我将进入右侧滚动条永久停留在屏幕上的状态。一旦发生这种情况，如果我向任何方向拖动屏幕，页面将不再有任何动力，我将无法再轻弹页面。即，一旦我将手指从屏幕上移开，它就会保持在完全相同的位置。

我还发现，当它处于这种状态时，我可以将页面拖离屏幕更远（到通常会弹回的位置），并且不再弹回。我包含的屏幕截图是我的白页被拖动后的图像，滚动条卡在屏幕上。

摆脱这种锁定滚动条状态的唯一方法是用两根手指在网页上放大。

我有一个按钮，在这种状态下也不会执行它的 javascript 功能。

不幸的是，我无法始终如一地重现这种状态，因此快速连续点击和拖动是我拥有的最佳重现。

![身份验证对话框的屏幕截图](../Images/12a507d94195912ee7c2caa6583d04f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T14:07:33.647

我认为您的 webview 不应该在可滚动区域内，因为网站本身也需要滚动。我建议您使用自动布局将 webview 附加到它所包含的容器的大小，并让它确定是否以及如何滚动自身。

webview 实际上是应用程序中的应用程序，应该与应用程序的其余部分有所不同。

# objective-c - 将参数传递给方法：是否应该保留参数？

> ID：13199588
> 
> 赞同：1
> 
> 时间：2012-11-02T16:45:16.500
> 
> 标签：objective-c, ios, xcode, memory-management

如果我有这样的自定义方法：

```
- (void)myMethod:(id)myArgument 
{
      //do something with myArgument
} 
```

如果我不拥有它，myArgument 是否保证会坚持执行该方法？

**编辑** 让我进一步详细说明。假设我在某处称其为：

```
[self myMethod:_myIvar]; 
```

然后在其他地方，当 myMethod 正在执行时，有人称之为：

```
[_myIvar release]; 
```

这会影响 myMethod 中的参数吗？

**结束编辑**

查看文档/示例代码，我很少在自定义方法的顶部看到 [myArgument retain] 或 [myArgument copy]。那么有没有必要？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:53:01.557

如果`myArgument`在 的开头是一个有效对象`myMethod`，并且在方法期间您没有做任何事情导致它被释放或以其他方式收集，那么是的，`myArgument`在方法结束时仍然是一个有效对象。

**编辑**以回应问题的编辑：让我们谈谈在这种情况下的对象所有权。当你`myArgument`作为参数传递给你的函数时，你 - 在上下文中`myMethod`- 不要通过`retain`ing 或`copy`ing 来声明对对象的兴趣。在这种情况下，对象的唯一所有者存在于外部`myMethod`。

如果 的最后一个所有者`myArgument`决定它已经完成`myArgument`并`release`s 它，那么它完全有可能`myArgument`消失 - 不再有对该对象的强引用可以保留它。它*可能*是有效的，具体取决于线程问题、涉及的自动释放池以及许多其他问题，但这是一个危险的游戏。如果甚至有可能发生这种情况，您应该按照[Memory Management Policy](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)的建议明确声明对`myArgument`within的兴趣。`myMethod`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:13:45.043

如果另一个线程甚至可能导致 myArgument 引用的对象被释放，那么 myArgument 随时可能成为指向垃圾内存的指针，您将崩溃。

这与不在**-myMethod**中保留它无关。在保留方法调用期间，您很可能会崩溃。相反，您的应用程序中有一个损坏的、不可行的线程模型/架构，您必须修复它。

这就是为什么线程很难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T17:07:28.197

不，不能保证。您应该在完成时调用`retain`您希望保留的任何内容`release`。否则另一个线程并同时释放它。

在为游戏编写 A* 算法时，我曾有过这样的经历。

# c# - 如果“使用”中有异常会自动关闭吗

> ID：13199589
> 
> 赞同：5
> 
> 时间：2012-11-02T16:45:18.230
> 
> 标签：c#, vb.net

因为我在这里使用“使用”，如果在 TRY 中的任何地方出现异常，FtpWebRequest、FtpWebRespons 和 responseStream 会自动关闭吗？

```
Try
 Dim request As FtpWebRequest = CType(WebRequest.Create(""), FtpWebRequest)
        request.Method = WebRequestMethods.Ftp.ListDirectoryDetails

        request.Credentials = New NetworkCredential("", "")
        Using response As FtpWebResponse = CType(request.GetResponse(), FtpWebResponse)

            Using responseStream As Stream = response.GetResponseStream()
                Using reader As New StreamReader(responseStream)

                    TextBox1.Text = reader.ReadToEnd
                    TextBox1.Text += vbNewLine 
                    TextBox1.Text += vbNewLine
                    ' Use the + for appending (set the textbox to multiline)

                End Using

            End Using

        End Using    

Catch ex As Exception
     MessageBox.Show(ex.Message.ToString())
End Try 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T16:47:21.387

是的，这三个都将关闭。

该`Using`语句最终`Dipose`在实现的类上调用方法`IDisposable`（这发生在`Finally`编译器生成的部分中）。在这种情况下，这些类将在`Dispose`被调用时关闭。

很少有例外 - 如果进程退出（例如通过调用语句`Environment.Exit`体`Using`），那么`Finally`块和处置将不会发生。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T16:49:11.827

Yes they will be disposed of except for when there is a Stack Overflow. From the [documentation](http://msdn.microsoft.com/en-us/library/htd05whh%28v=vs.80%29.aspx):

> A Using block behaves like a Try...Finally construction in which the Try block uses the resources and the Finally block disposes of them. Because of this, the Using block guarantees disposal of the resources, no matter how you exit the block. This is true even in the case of an unhandled exception, except for a StackOverflowException.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T16:47:02.663

它们将“自动”被处理掉；如果处置关闭了可以打开的东西，那么是的。

# c++ - 使用 GCC 时如何使用 __align__ 中的大小进行缓存对齐？

> ID：13199593
> 
> 赞同：5
> 
> 时间：2012-11-02T16:45:45.443
> 
> 标签：c++, c, gcc, g++, memory-alignment

我有两个结构。

```
t_struct_inner {
  int a;
  ... // a lot more members
}

t_struct_outer {
  t_struct_inner[1000] inners;
  t_struct_outer* next;
} 
```

`t_struct_outer`我在我的代码中malloc 。我想`t_struct_inner`缓存对齐。我的解决方案是使用

```
 __attribute__((aligned(
       ((sizeof(t_struct_inner)/CACHE_LINE_SIZE)+1) * CACHE_LINE_SIZE
))) 
```

但显然我不能这样做，因为我不能`sizeof`在这里使用。我不想硬编码`aligned`. 有什么想法可以实现上述目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:54:08.487

这不应该解决问题吗？

```
struct __attribute__((aligned(CACHE_LINE_SIZE))) t_struct_inner {
  int a;
  ... // more members.
}; 
```

编辑：假设您的缓存线长 128 字节，并且 t_struct_inner 的成员的总大小为 259 字节。由于 128 字节的对齐，以下数组：

```
t_struct_inner my_array[2]; 
```

是 (3*128)*2 字节长。属性（对齐）强制数组的每个元素对齐到 128 字节边界。

# jsf-2 - Primefaces widgetVar 干扰 ui:repeat 或 ui:datatable

> ID：13199595
> 
> 赞同：3
> 
> 时间：2012-11-02T16:45:59.957
> 
> 标签：jsf-2, primefaces

我有 a`<ui:repeat>`迭代 a并使用 a中当前 String 的值`List<String>`创建a 。 但是当我添加到我的属性时，值总是来自上次迭代的字符串。 `<p:commandButton>``<p:lightBox>`
`widgetVar``<p:lightBox>``<p:commandButton>`

有人可以解释发生了什么并且（根据我的需要`widgetVar`）可能会指出一个解决方案吗？

这是我的html：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head />
<h:body>
    <ui:repeat var="thing" value="#{bugBean.things}">
        <p:lightBox widgetVar="whatever">
            <h:outputLink>
                <h:outputText value="#{thing}" />
            </h:outputLink>
            <f:facet name="inline">
                <h:form>
                        <p:commandButton action="#{bugBean.writeThing(thing)}"
                            value="#{thing}" />
                </h:form>
            </f:facet>
        </p:lightBox>
    </ui:repeat>
</h:body>
</html> 
```

这是支持 bean：

```
package huhu.main.managebean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

@Named
@SessionScoped
public class BugBean implements Serializable {

   private static final long serialVersionUID = 1L;
   List<String> things = new ArrayList<String>();

   public BugBean(){
      things.add("First");
      things.add("Second");
      things.add("Third");
   }

   public void writeThing(String thing){
      System.out.println(thing);
   }

   public List<String> getThings() {
      return things;
   }

   public void setThings(List<String> things) {
      this.things = things;
   }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T17:29:02.917

`widgetVar`基本上生成一个窗口范围的 JavaScript 变量。你现在在 JavaScript 上下文中有效地做的是：

```
window['whatever'] = new Widget(lightboxElement1);
window['whatever'] = new Widget(lightboxElement2);
window['whatever'] = new Widget(lightboxElement3);
// ... 
```

这样`whatever`JS 中的变量只会引用最后一个。

您基本上应该给它们一个唯一的名称，例如通过添加迭代索引：

```
<ui:repeat var="thing" value="#{bugBean.things}" varStatus="iteration">
    <p:lightBox widgetVar="whatever#{iteration.index}"> 
```

这样它就变得有效：

```
window['whatever0'] = new Widget(lightboxElement1);
window['whatever1'] = new Widget(lightboxElement2);
window['whatever2'] = new Widget(lightboxElement3);
// ... 
```

这样，您可以通过`whatever0`、`whatever1`、`whatever2`等来引用各个灯箱。

* * *

**与具体问题无关**：使用单个灯箱并在每次点击时更新其内容不是更容易吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T09:13:13.150

最近我在升级到 primefaces 4.0 -> 5.1 时遇到了类似的问题

我不得不使用语法：

```
PF('whatever0') 
```

由于 primefaces 命名 widgetvar 的方式发生了变化。

# mysql - GROUP BY 还 SELECT 非常量列

> ID：13199601
> 
> 赞同：1
> 
> 时间：2012-11-02T16:46:10.363
> 
> 标签：mysql, sql, select, group-by, greatest-n-per-group

我的数据库中有 2 个表：

```
log_visitors:
--------------------
id | host_id

log_access:
--------------------
visitor | document | timestamp 
```

`log_access.visitor`链接到`log_visitors.id`

目前，我正在使用这个查询：

```
SELECT
    log_visitors.host_id
    , MIM(log_access.timestamp) AS min_timestamp
FROM
    log_access
    INNER JOIN log_visitors
        ON (log_access.visitor = log_visitors.id)
GROUP BY log_visitors.host_id; 
```

获取数据库中`MIN(timestamp)`的每个`host_id`。

这是我的问题：

我还需要`document`使用该时间戳进行访问...我不能简单地添加`log_access.document`到 SELECT 列表中，因为它不是恒定的，而且我没有按文档分组...有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:53:07.907

您没有指定您的 DBMS，但这是 ANSI SQL（适用于大多数现代 DBMS）

```
select *
from (
  SELECT log_visitors.host_id,
         log_visitors.document,
         log_access.timestamp
         min(log_access.timestamp) OVER (partition by log_visitors.host_id) AS min_timestamp
  FROM log_access
    JOIN log_visitors ON (log_access.visitor = log_visitors.id)
) t
where t.timestamp = t.min_timestamp
ORDER BY host_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:53:59.727

像下面这样的东西应该给你你想要的：

```
SELECT      lv.host_id,
            mv.MinTime,
            la.document

FROM        log_visitors AS lv
INNER JOIN     
            (SELECT visitor, 
                    MIN(timestamp) AS MinTime 
             FROM log_access 
             GROUP BY visitor) AS mv ON lv.id = mv.visitor
INNER JOIN  log_access AS la ON lv.id = la.visitor AND mv.MinTime = la.timestamp 
```

我们所做的是获取所有访问者的列表和表中的最小时间戳，加入该列表，然后重新加入时间戳上的日志访问以选择特定文档。

这使用 ANSI SQL-92，因此应该适用于广泛的数据库系统，包括那些不支持窗口函数的数据库系统。

[这是通过Sql Fiddle](http://sqlfiddle.com/#!2/f791d/8)进行的查询示例

# jquery - 我的 jquery 菜单不想正常工作

> ID：13199602
> 
> 赞同：2
> 
> 时间：2012-11-02T16:46:10.297
> 
> 标签：jquery, menu, tabs

我正在为学校制作一个标签菜单。但我正在为我的 Jquery 苦苦挣扎。我对菜单的想法是打开一个选项卡并让文本块推出工作正常但是当我想打开另一个选项卡时它会在我按下它后立即恢复。因为 tab1 是唯一有效的，我只是不知道如何修复它。如果有人可以提供帮助，我将不胜感激。问题出在这个 J-query 块中。

我的 jsfiddle：http: [//jsfiddle.net/6dwvs/embedded/result/](http://jsfiddle.net/6dwvs/embedded/result/)

```
$('#tab4, #tab3, #tab2,').click(function() {
    $('#tab4, #tab3, #tab2, #tab1').animate({
        height: '100px',
     }, 0, function() {
        // Animation complete.

    });
    $('#textblok1,#textblok2,#textblok3,#textblok4').animate({
        height: '0px',
    }, 0, function() {
        // Animation complete.
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:23:07.730

首先，这是在脚本的末尾，因此说完之后，文本块关闭了。

```
$('#textblok1,#textblok2,#textblok3,#textblok4').animate({
    height: '0px',
}, 0, function() {
    // Animation complete.
}); 
```

点击tab1时没有发生的原因是因为上面的动画没有绑定到tab1

```
$('#tab4, #tab3, #tab2, *MISSING TAB1* ').click(function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:41:38.130

这是你需要的吗？

演示在这里：http: [//jsfiddle.net/6dwvs/19/](http://jsfiddle.net/6dwvs/19/)

我将点击绑定到类而不是 ID。看看它对你是否有意义。

JS

```
$(document).ready(function() {
    $('.tabs').each(function(index) {
        $(this).click(function(event){
            $('.tabs').css('height','100px');
            $('.blocks').css('height','0px');
            $(this).animate({height: '110px'}, 200);
            $('.blocks').eq(index).animate({height: '500px'}, 2500);
        });
    });
});​ 
```

编辑：稍微修改了JS+解释如下：

选项卡和块的数量相同。所以我将第一个标签绑定到第一个块`.eq(index)`。对于特定的选项卡索引，相同的索引是动画的。

如果 index = 0，`.eq(index)`则针对所选元素列表中的**第一个元素，对于 index = 1，****第二个**元素等等...

# regex - HTML简单非空白模式

> ID：13199606
> 
> 赞同：31
> 
> 时间：2012-11-02T16:46:23.233
> 
> 标签：regex, html

我有一个简单的表单，我希望提交按钮不适用于我在模式中给出的条件，但如果我将其留空，则提交工作。如果它是空白的，我怎样才能让图案不接受它？

```
<form action="test.php" method="POST">
Enter user name: 
<input type="text" name="username" pattern="[A-Za-z0-9]{1,20}">
<input type="submit" value="submit">
</form> 
```

我认为 {1,20} 是足够的，但似乎不是。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-02T16:49:52.680

HTML 具有`required`完成此任务的属性。如果您将任何输入设置为必需，如果这些字段为空，现代浏览器将不允许您提交表单。

```
<input type="text" name="username" required="required" pattern="[A-Za-z0-9]{1,20}"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-13T21:00:58.823

为防止在加载时显示错误，您不能使用 HTML5 required 属性。您可以使用 JavaScript。例如：

```
if ( $('#form-password').val() === "" ) 
{
    e.preventDefault();
} 
```

使用 HTML 模式匹配至少一个：

```
<input type="text" name="username" pattern=".{1,}"> 
```

# node.js - 任何已知的支持在代理后运行的 Twitter REST 和 Stream API NodeJS 模块？

> ID：13199607
> 
> 赞同：0
> 
> 时间：2012-11-02T16:46:24.403
> 
> 标签：node.js, twitter

我已经尝试了一些已知的模块（twitter、tuiter），它们似乎不支持应用程序在代理后面运行的情况。有没有支持的模块？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T10:34:03.357

我终于通过代理链运行节点二进制文件解决了这个问题。有许多代理链分叉，这个对我有用：

[https://github.com/rofl0r/proxychains-ng](https://github.com/rofl0r/proxychains-ng)

# php - 每次用户连接数据库时，我都需要创建一个连接，这是真的吗？

> ID：13199608
> 
> 赞同：0
> 
> 时间：2012-11-02T16:46:25.913
> 
> 标签：php, mysql, database-connection

我看到很多关于连接数据库的教程都是打开一个连接，然后做一些事情，最后关闭连接。我想知道这对于现实生活中的例子是否正确？我知道它可以在我打开时完成工作，并且每次都关闭连接。但它会有一些性能问题吗？此外，我可以重复使用打开的连接吗？或者这是不可避免地保持打开和关闭数据库？谢谢。

*我正在使用 php + mysql，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:51:41.430

`mysql_pconnect`如果你想要一个持久连接，你可以使用：

[http://php.net/manual/en/function.mysql-pconnect.php](http://php.net/manual/en/function.mysql-pconnect.php)

不过，根据我的经验，我不喜欢这样。如果您在同一台主机上运行数据库和网络服务器，那么建立连接的时间非常短。我以最低的成本为每个访问者初始化一个连接。

如果 mysql 数据库相对于您的网站是远程的，您可能需要考虑这一点。建立连接需要多次往返。因此，如果您将 WEBSERVER ping 到 MYSQLSERVER，它是 100 毫秒。这将需要多次才能获得连接。在这种情况下，可能值得使用持久连接。

# php - 将数组值添加到 where 子句

> ID：13199609
> 
> 赞同：0
> 
> 时间：2012-11-02T16:46:32.400
> 
> 标签：php, mysql

使用此代码.. 我需要将 $code 变量添加到 sql 查询的 where 子句中。

```
if ( isset( $_POST['code_search_submitted'])) {

        if ( isset( $_POST['searchCode']) && !empty( $_POST['searchText'])) {           

    $searchCode = $_POST['searchCode']; 
        $searchText = $_POST['searchText'];     

        echo $searchCode;
        echo '<br />';
        echo $searchText;
        //if (is_numeric( $searchText ) && (strlen($searchText) == 4)) {    

        $numbers = explode(",", $searchText);
        foreach($numbers as $number) {
            $numbers =  trim($number);

            if (ctype_digit($numbers) && (strlen($numbers) == 4)) { 

                $code = $numbers ;

            } else {

                echo 'Can not cantain string and more than 4 digists number';
            }

        }
}
} 
```

这是我的查询...

```
SELECT 
    tcs.tutor_id AS tid, 
    t.qualification,
    GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, 
    timg.image_name AS img, 
    city_name AS city,
    d.district_name AS district
FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    INNER JOIN address ON address.address_id = t.address_id
    INNER JOIN city ON city.city_id = address.city_id
    INNER JOIN district AS d ON d.district_id = city.district_id
    LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE t.tutor_code = ------------
GROUP BY tcs.tutor_id; 
```

$code 变量有更多的成员代码，例如 2434,2345,5345,2354 等...谁能告诉我如何在 where 子句中使用它？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:33:53.310

```
Updated code for query:

$query="SELECT 
    tcs.tutor_id AS tid, 
    t.qualification,
    GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, 
    timg.image_name AS img, 
    city_name AS city,
    d.district_name AS district
FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    INNER JOIN address ON address.address_id = t.address_id
    INNER JOIN city ON city.city_id = address.city_id
    INNER JOIN district AS d ON d.district_id = city.district_id
    LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE 1=1";
if($code!="")
{
$query.=" && ( $code ) ";
}
$query.="GROUP BY tcs.tutor_id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:39:19.210

您可以使用`array_map`来转换/处理每个值，然后将它们组合回来并使用`in`子句：

```
$numbers = explode(",", $searchText);
$parsed = array_map(function ($a) {
   if (ctype_digit($a) && (strlen($a) == 4)) { 
        return "'$a'" ;
    } else {
        echo 'Can not cantain string and more than 4 digists number';
    }
},
$numbers);

$numbers = '(' . preg_replace('/\,+/', ',',implode(',', $parsed)) . ')'; 
```

接着

```
SELECT 
    tcs.tutor_id AS tid, 
    t.qualification,
    GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, 
    timg.image_name AS img, 
    city_name AS city,
    d.district_name AS district
FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    INNER JOIN address ON address.address_id = t.address_id
    INNER JOIN city ON city.city_id = address.city_id
    INNER JOIN district AS d ON d.district_id = city.district_id
    LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE t.tutor_code IN $numbers
GROUP BY tcs.tutor_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:08:38.070

```
if ( isset( $_POST['code_search_submitted'])) {

        if ( isset( $_POST['searchCode']) && !empty( $_POST['searchText'])) {           

    $searchCode = $_POST['searchCode']; 
        $searchText = $_POST['searchText'];     

        echo $searchCode;
        echo '<br />';
        echo $searchText;
        //if (is_numeric( $searchText ) && (strlen($searchText) == 4)) {    

        $numbers = explode(",", $searchText);

        $countmax=count($numbers)-1;

        foreach($numbers as $key=>$number) {
            $numbers =  trim($number);

            if (ctype_digit($numbers) && (strlen($numbers) == 4)) { 
                if($key==$countmax)
                {
                $code .= "t.tutor_code='".$number."'" ;
                }
                else
                {
                $code .= "t.tutor_code='".$number."' || " ;
                }

            } else {

                echo 'Can not cantain string and more than 4 digists number';
            }

        }
}
}

/////////////////////////////////////
//Query Updated
/////////////////////////////////

SELECT 
    tcs.tutor_id AS tid, 
    t.qualification,
    GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option, 
    timg.image_name AS img, 
    city_name AS city,
    d.district_name AS district
FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    INNER JOIN address ON address.address_id = t.address_id
    INNER JOIN city ON city.city_id = address.city_id
    INNER JOIN district AS d ON d.district_id = city.district_id
    LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE 1=1 && ( $code ) 
GROUP BY tcs.tutor_id; 
```

# ruby-on-rails - 将来自不同模型的两个或多个对象与 mongoid 匹配

> ID：13199613
> 
> 赞同：0
> 
> 时间：2012-11-02T16:46:37.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我有2个模型：

```
class User
 include Mongoid::Document
 field :email, :type => String, :null => false, :default => ""
 .
 .
end

class Admin
 include Mongoid::Document
 field :email, :type => String, :null => false, :default => ""
 .
 .
end 
```

我希望通过 mongoid 查询找到所有用户在模型中都有相同的电子邮件`Admin`，例如：

```
User.where(:email => {exist_admin_class?}) 
```

这个有可能？或者我已经在两个模型之间建立了一个`has_one User`和`belongs_to Admin`

做这个的最好方式是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:12:02.840

事实上，MongoDB 不支持跨集合查询。但这不是必需的，尤其是在这个要求中。我建议为此使用继承：

[mongoid 方法](http://two.mongoid.org/docs/documents/inheritance.html)

原因：仅仅因为管理员是一种特殊的用户。

# c - C代码打开网络浏览器

> ID：13199615
> 
> 赞同：-3
> 
> 时间：2012-11-02T16:46:55.883
> 
> 标签：c, browser

如果有的话，有哪些可能的方法可以在其他人的计算机上执行 Web 浏览器？我有一台服务器，现在当我使用 Process.Start 时。当有人从另一台计算机执行该代码时，浏览器将仅显示在服务器上。

有哪些方法可以在他们的计算机中打开浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:17:51.860

实际上，您是在询问如何远程执行代码。这是通过使用某种形式的[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)来完成的。RPC 框架有很多，因此无法给出明确的答案。选择一个适合您情况的 RPC 框架，然后您可以针对该特定框架提出更具体的问题。

另一方面，如果您询问如何在刚刚访问您的 Web 服务器的客户端上执行代码，那么不，这是不可能的。而且是故意的。想象一下，如果随机网站能够在您的计算机上运行程序，会带来哪些安全隐患。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:23:21.870

让您的游戏客户端打开浏览器。从听起来的方式来看，服务器永远不应该真正意识到这一点。

# html - iPhone 3G 和 Xperia X8 的响应式网站/媒体查询问题

> ID：13199617
> 
> 赞同：1
> 
> 时间：2012-11-02T16:46:57.153
> 
> 标签：html, css, responsive-design, media-queries

我目前对针对智能手机的媒体查询感到恼火。这是我第一次使用媒体查询。

我已经做了一个网站的平板版本（768px）和一个手机版本（320px）。

![平板版，火狐截图](../Images/ed813e1315dda1a6ed5cecb3f1f80d65.png)

## ![手机版，火狐截图](../Images/86cf08a94ca72a2fe92c4b82d237c247.png)

请注意，这些屏幕截图实际上是 Firefox 屏幕截图。如您所见，当我在 Firefox、IE、Webkit 上调整窗口大小时，这些显示效果很好。

但是，我的 iPhone 3G 和 Xperia X8 上的显示错误。

以下是结果（左 iPhone，右 Xperia）：

## ![在此处输入图像描述](../Images/81148466688ea1b194971c6d77e65a31.png)

据我所知，这两款手机的分辨率都是 480*320 像素。那么，为什么会有这样的结果呢？

在 iPhone 屏幕上，标题上的浅棕色矩形应该是 300px 宽度。为什么这么小？

为什么 Xperia 上会加载平板电脑版本？

我在我的 CSS 上使用这些媒体查询：

/* 平板电脑 ------------ */

```
@media  (min-width: 768px) and (max-width:1023px) 
```

/* 电话 */

```
@media (min-device-width: 320px) and (max-device-width:767px),
        (min-width: 320px) and (max-width:767px) 
```

我希望你能帮助我，因为太多天我一直在这个问题上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:27:27.143

您是否设置了正确的视口？喜欢：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=2.0" /> 
```

把它放在你的头标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T04:31:40.103

使用适当的媒体查询来确保智能手机和跨平台的完美呈现和响应能力。这是您可以了解如何以正确方式使用媒体查询的链接。[CSS技巧](https://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# wordpress - 在 Wordpress 中为自定义帖子类型设置正文 ID

> ID：13199618
> 
> 赞同：0
> 
> 时间：2012-11-02T16:46:58.643
> 
> 标签：wordpress, custom-post-type

我已经开发了一个函数`functions.php`来根据页面模板或父页面模板（如果它是子页面）将特定 id 添加到正文标记。

```
function get_body_id() {

    global $post;
    $parents = get_post_ancestors( $post->ID );
    $parent_id = ($parents) ? $parents[count($parents)-1]: $post->ID;

    $temp = get_page_template_slug($parent_id);
    $path = pathinfo($temp);
    $temp = $path['filename'];

    switch ( $temp ):
        case 'page-recipe-landing':
            $id = 'bg-green';
            break;

        case 'page-home':
        default:
            $id = 'bg-pink';
            break;
    endswitch;

    echo "id='".$id."'";
} 
```

这适用于页面及其子项，但对于我的自定义帖子类型事件/新闻和食谱，这显然不会为`get_post_ancestors( $post->ID )`.

有没有办法改变我的功能以迎合这些自定义帖子类型或将自定义帖子类型分配给特定的“页面”？

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:25:25.207

```
<?php
    if(empty($parents)) {
        $loop = new WP_Query(array('post_type' => 'NAME_OF_TYPE', 'post_status' => 'publish'));
        while($loop->have_posts()): $loop->the_post();
            the_ID();
        endwhile;
    }
?> 
```

This code should at least output the ID of each post with a custom type of `NAME_OF_TYPE`. If you wanted to store those in an array and work with them from there, the premise would be pretty much the same. I haven't tested the code, but it should work with custom post types.

# browser - 在 webbrowser 文件下载对话框中自动选择保存选项

> ID：13199624
> 
> 赞同：1
> 
> 时间：2012-11-02T16:47:07.787
> 
> 标签：browser

我有 ac# 桌面应用程序，它通过 Web 浏览器控件连接到站点。问题是我需要导航到特定部分并下载从回发生成的 excel 文件。我想自动执行此过程或绕过文件下载对话框并将文件直接保存到本地驱动器。问题链接不是标准的网址。该站点使用回发脚本来获取所需的文件，然后显示文件下载对话框。例如，当您单击按钮 (javascript: postback) 时，文件下载对话框会自动加载。

如前所述，我想绕过保存选项并将文件自动存储在预定义的位置。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:55:26.077

我发现 AutoIt [http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)对于这类任务非常有用。如果你想将它与你的 C# 应用程序集成，那么你可以通过系统调用来调用你的 AutoIt 脚本。困难在于找到并跟踪页面上的链接，这取决于页面的布局方式。

# objective-c - INAppStoreWindow 工具栏

> ID：13199627
> 
> 赞同：1
> 
> 时间：2012-11-02T16:47:11.863
> 
> 标签：objective-c, xcode, macos, cocoa

我想知道如何使用[INAppStoreWindow](https://github.com/indragiek/INAppStoreWindow "GitHub 上的 INAppStoreWindow")在标题栏中添加工具栏。我成功地在我的应用程序中添加了 InAppStoreWindow，但我正在考虑如何使用 INAppStoreWindow 在我的标题栏中心添加像“AppStore.app”这样的工具栏。

Internet 上的任何地方和 stackoverflow 都没有关于此 INAppStoreWindow 方法中的此工具栏的类似主题。我希望有人能告诉我这是否可能以及如何，因为我找不到任何例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:43:48.697

如果您创建一个 NSView ，其中包含您希望在窗口标题栏上显示的内容，并且在您的窗口和该视图中都有 IBOutlets，则可以在 2 行代码中完成。

*（在这种情况下，视图是`titleView`，窗口是`theWindow`）*

```
//Make the titlebar view the same size
[self.titleView setFrameSize:self.theWindow.titleBarView.frame.size];

//Add the view to the window's "titleBarView"
[self.theWindow.titleBarView addSubview:self.titleView]; 
```

# c++ - CreateProcessWithLogonW : 无法启动进程

> ID：13199628
> 
> 赞同：0
> 
> 时间：2012-11-02T16:47:16.630
> 
> 标签：c++, windows, winapi, windows-7, windows-services

嗨，我对编程完全陌生。请有人帮助我。

我正在尝试从服务开始一个进程。我需要通过提示用户输入管理员凭据来启动新进程。

我试图使用`CreateProcessWithLogonW()`.

我是否使用了正确的功能。我试图将输入用户名、密码、域作为 localhost。我为需要启动的 .exe 文件提供了完整的路径。

这是一段代码。

```
CreateProcessWithLogonW(L"Administrator",
                        L"localhost",
                        L"password",
                        0,
                        NULL,
                        L"c:\myupdates\myapp.exe",
                        NORMAL_PRIORITY_CLASS | CREATE_CONSOLE,
                        NULL,
                        NULL,
                        &si,
                        &pi);

Si.cb = sizeof(si);
Si.lpDesktop = L"winsta0\\default"; 
```

但这个过程从未开始。你们能告诉我我做错了什么吗？我需要做些什么来提示用户输入管理员的凭据而不是对其进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:50:39.283

一个问题是将字符串文字作为命令行参数传递，因为该参数必须是可修改的。从[`CreateProcessWithLogon()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682431%28v=vs.85%29.aspx)相对于命令行参数：

> 该函数可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突。

您还需要转义反斜杠。改成：

```
WCHAR cmdLine[] = L"c:\\myupdates\\myapp.exe"; /* 'cmdLine' is a
                                                  copy of the string
                                                  literal. */ 
```

并通过`cmdLine`。

在任何 WINAPI 功能失败检查后[`GetLastError()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679360%28v=vs.85%29.aspx)，它会通知您失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:52:06.207

您可能还想正确转义程序字符串：

```
L"c:\myupdates\myapp.exe" 
```

至少应该是：

```
L"c:\\myupdates\\myapp.exe" 
```

坦率地说，这段代码有很多问题，从不正确的 SI 设置到传递给 API 本身的参数。我建议你阅读更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:06:39.580

CreateProcess* 函数都不会做任何提示。它们是低级 API，对 GUI 一无所知。

如果要提示用户，请使用`ShellExecuteEx`with`runas`命令。Windows 将首先询问提升权限，然后提示输入凭据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-28T12:47:15.417

也许现在帮助你已经太晚了。但它可能对其他人有帮助。如果您使用该`CreateProcessWithLogonW`功能并且正在使用`Default`桌面，请保留`lpDesktop`为 NULL。

如果`lpDesktop`不是 Null，则必须在桌面和 winstation中输入用户的 sid（使用`LookupAccountNamean`）作为 a`ACE``DACL`

因此，您必须执行以下步骤才能`ACE`为桌面添加一个：

1.  获取桌面句柄`OpenDesktop`，使用正确的 dwDesiredAccess
2.  获取`Security Descriptor`with`GetSecurityInfo`和`DACL_SECURITY_INFORMATION`as securityinfo
3.  从`DACL`你的`Security Descriptor`
4.  `AddAccessAllowedAce`使用用户 sid 的 sid添加
5.  将修改设置`DACL`为您的桌面句柄

`winsta0`现在为winstation重复这些步骤

纪录片中愤怒先生的[评论](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)帮我解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T21:13:14.877

访问冲突归结为 lpCommandLine 参数。这意味着可编辑内存，LPWSTR 和 API 函数确实修改了缓冲区。但是你传递了一个指向不可修改内存的指针。

但还有一个更根本的问题。您说您想提示来自服务的凭据。服务不应显示 UI，在现代版本的 Windows 中，服务根本无法显示 UI。你的设计有缺陷，你需要重新考虑。

# android - 添加子视图后调整相对布局大小

> ID：13199632
> 
> 赞同：2
> 
> 时间：2012-11-02T16:47:39.597
> 
> 标签：android, view, android-relativelayout

我有一个扩展RelativeLayout 的自定义视图。在使用 xml 布局对其进行膨胀后，我想向其添加另一个视图。我想在现有视图上方添加视图。这似乎可行，但 RelativeLayout 不会自行调整大小。看起来较旧的内容被覆盖，或者可能向下滚动，它们不可见。

我创建了我的自定义RelativeLayout：

公共类BottomBarEdit扩展RelativeLayout {

```
private Context context;

public BottomBarEdit(Context context, AttributeSet attrs, int defStyle) {

    super(context, attrs, defStyle);
    this.context = context;

    View.inflate(context, R.layout.lay_bottom_bar_edit, this); 
```

我尝试使用以下方法动态添加视图：

```
// create layout parameters
    RelativeLayout.LayoutParams lparams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.FILL_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    lparams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    lparams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lparams.addRule(RelativeLayout.ABOVE, R.id.bottom_bar_buttons);
    // RelativeLayout editMain = (RelativeLayout)
    // findViewById(R.id.bottom_bar_edit);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View noteBar = inflater.inflate(R.layout.lay_bottom_bar_notes, null);

    this.addView(noteBar, lparams); 
```

知道出了什么问题吗？谢谢！

# php - 嵌套三元运算符输出奇怪的结果

> ID：13199637
> 
> 赞同：1
> 
> 时间：2012-11-02T16:47:52.510
> 
> 标签：php, operator-keyword, ternary

这将输出“选项 1”。我不知道它有什么问题。

```
$result = (0 == 0) ? 'Option 0' : (1==2) ? 'Option 1' : 'Option 2'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:05:46.490

您在此处遇到[*运算符优先级*](http://php.net/language.operators.precedence)和[*三元运算符*](http://php.net/language.operators.comparison#language.operators.comparison.ternary)的问题。您在括号中的位置会明显看出您缺乏理解。我们来复习：

```
$result = (0 == 0) ? 'Option 0' : (1 == 2) ? 'Option 1' : 'Option 2';
          ^      ^                ^     ^ 
```

我并不是说这很容易，但正如这段代码已经显示的那样，您在这里放置了*多余*的圆括号。它们只是不需要，这通常表明自己的代码不确定。正确的变体是：

```
$result = 0 == 0 ? 'Option 0' : 1 == 2 ? 'Option 1' : 'Option 2'; 
```

现在，这已经表明您不确定括号的放置位置。了解这一点，也包含了您的问题的解决方案。只需先进行第一次检查，然后进行第二次检查，就可以将您的弱点变成力量-但这一次实际使用了括号：

```
$result = 0 == 0 ? 'Option 0' : (1 == 2 ? 'Option 1' : 'Option 2');
                                ^                                ^ 
```

这将为您提供预期的结果，即现在按预期的括号控制优先级。

* * *

*提示：*您可以在编写此类语句时使用缩进使[*决策树更加可见：*](http://en.wikipedia.org/wiki/Decision_tree)

```
$result = 
    0 == 0 ? 'Option 0' 
           : (1 == 2 ? 'Option 1' 
                     : 'Option 2')
; 
```

（或类似的）只是为了使这乍一看更具可读性。正如它所表明的，这*是*一个复杂的决定。与复杂的事物一样，为它们编写代码的错误更频繁地发生。这是正常的。使用缩进保持代码可读性会有所帮助。另一种方法是降低复杂性。

```
$decide  = 2:
$results = array(
    0 => 'Option 0', 
    1 => 'Option 1',
);
$result  = isset($results[$decide]) ? $results[$decide] : 'Default Option'; 
```

这里只需要一个决定，所以它不那么复杂。如果您有超过三种可能性，则此示例更有意义，但即使对于三种可能性，这已经是一种改进，因为前面可以看到存在默认情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:49:11.153

尝试添加第二组分组括号：

```
$result = (0 == 0) ? 'Option 0' : ((1==2) ? 'Option 1' : 'Option 2'); 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:49:21.093

您必须将第二条路径用引号括起来：

```
 $result = (0 == 0)?'Option 0':((1==2)?'Option 1':'Option 2'); 
```

顺便说一句：由于这种意外行为，不建议使用嵌套/堆叠三元。请参阅 php 文档[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

> 注意：建议您避免“堆叠”三元表达式。在单个语句中使用多个三元运算符时 PHP 的行为并不明显：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T16:50:18.827

试试这个：

```
$result = (0 == 0)? 'Option 0':((1==2) ? 'Option 1' : 'Option 2'); 
```

输出：

`Option 0`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T16:53:36.850

这与它是右关联的（现在找不到源）有关 - 首先评估右侧。因此，首先评估这部分：

```
? 'Option 1' : 'Option 2'; 
```

# winforms - 如何将 db 字段组合绑定到单个属性（C#、WinForms、LINQ to SQL）？

> ID：13199643
> 
> 赞同：2
> 
> 时间：2012-11-02T16:48:10.013
> 
> 标签：winforms, linq-to-sql, data-binding

我想使用 Linq to SQL（在 C#/WinForms 项目中）将单个控件属性（TextBox.Text）绑定到数据库字段的组合。

例如：

1）我有一个表 Customer，其中包含 CustomerName、CustomerCity 和 IsBigCustomer 列（布尔值）

2) 在 WinForm 上，我有一个 TextBox "cInfo" 和一个 ListBox "cList"

3) 我已将“cList”绑定到 CustomerName 列（当我更改 cList 中的项目时，我需要 cInfo.Text 中显示的相应客户数据）

4）我想将“cInfo”TextBox.Text 属性绑定到数据库列的组合 - 例如我想显示：

a) "!"+CustomerName+": "+CustomerCity (如果客户的 IsBigCustomer=true)

b) CustomerName+": "+CustomerCity (如果客户的 IsBigClient=false)

当用户更改 cInfo.Text 我需要对其进行验证并将更改发送回数据库（如果验证成功）

```
Sample data:
{IBM, New York, true} => cInfo.Text should be "!IBM: New York"
(SmallCustomer, Paris, false) => cInfo.Text should be "SmallCustomer: Paris" 
```

我怎样才能完成这项任务？

（问题不在于这种方法的有用性，而是要了解是否可以将多个数据库字段绑定到一个属性以及如何做到这一点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:03:42.500

如何验证数据。如果您将它放在文本字段中，他们可以输入任何内容，如果有人输入“Some！Big：Company：Bad：！Data”怎么样？这对您有什么作用......

我只能建议在你的表格上，你有类似..

```
Checkbox for "Big Client"
Textbox for the Name
Textbox for the City 
```

然后，将数据推送回服务器也容易得多。

# perl - Perl：如何漂亮地打印时差（持续时间）

> ID：13199646
> 
> 赞同：4
> 
> 时间：2012-11-02T16:48:19.677
> 
> 标签：perl, datetime, duration, datediff

如何在 perl 中漂亮地打印持续时间？

到目前为止我唯一能想到的是

```
my $interval = 1351521657387 - 1351515910623; # milliseconds
my $duration = DateTime::Duration->new(
    seconds => POSIX::floor($interval/1000) ,
    nanoseconds  => 1000000 * ($interval % 1000),
);
my $df = DateTime::Format::Duration->new(
    pattern => '%Y years, %m months, %e days, ' .
               '%H hours, %M minutes, %S seconds, %N nanoseconds',
    normalize => 1,
);
print $df->format_duration($duration); 
```

这导致

```
0 years, 00 months, 0 days, 01 hours, 35 minutes, 46 seconds, 764000000 nanoseconds 
```

这对我没有好处，原因如下：

1.  我不想看到“ *0* *years* ”（空间浪费）&c，我不想从（如果我下次确实需要几年怎么办？）*`pattern`*
**   我事先知道我的精度只有毫秒，我不想在纳秒部分看到 6 个零。*   我更关心漂亮/紧凑/人类可读性，而不是精度/机器可读性。即，我想看到类似“ *1.2 年*”或“ *3.22 个月*”或“ *7.88 天*”或“ *5.7 小时*”或“ *75.5 分钟*”（或“ *1.26 小时*”，无论你觉得更好）或“ *24.7 秒*”之类的东西或“ *133.7 毫秒*” &c（类似于**R**打印[difftime 的方式](http://stat.ethz.ch/R-manual/R-devel/library/base/html/difftime.html)）*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:58:12.563

您可以根据某些值是否为“真”来动态构建模式。

```
...
push @pattern, '%Y years' if $duration->year;
push @pattern, '%m months' if $duration->month;
...
my $df = DateTime::Format::Duration->new(
    pattern => join(', ', @pattern),
    normalize => 1,
);
print $df->format_duration($duration); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T15:12:39.723

这是我最终使用的：

```
sub difftime2string ($) {
  my ($x) = @_;
  ($x < 0) and return "-" . difftime2string(-$x);
  ($x < 1) and return sprintf("%.2fms",$x*1000);
  ($x < 100) and return sprintf("%.2fsec",$x);
  ($x < 6000) and return sprintf("%.2fmin",$x/60);
  ($x < 108000) and return sprintf("%.2fhrs",$x/3600);
  ($x < 400*24*3600) and return sprintf("%.2fdays",$x/(24*3600));
  return sprintf("%.2f years",$x/(365.25*24*3600));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T15:34:15.633

> 我想看到“1.2 年”或“3.22 个月”或“7.88 天”之类的内容

您可以使用[Time::Seconds](http://perldoc.perl.org/Time/Seconds.html)中的常量：

```
use Time::Seconds;
use feature qw(say);
...

$time_seconds = $interval / 1000;
if ( $time_seconds > ONE_YEAR ) {
    printf "The interval is %.2f years\n", $time_seconds / ONE_YEAR;
}
else {
if ( $time_seconds > ONE_DAY ) {
    printf "The interval is %.2f days\n", $time_seconds / ONE_DAY;
}
else { 
if ( $time_seconds > ONE_HOUR ) {
    printf "The interval is %.2f hours\n", $time_seconds / ONE_HOUR;
}
else {
    say "The interval is $time_seconds seconds";
} 
```

也可以使用[开关](http://perldoc.perl.org/perlsyn.html)，但仍标记为*实验性*；

```
use feature qw(switch say);
use Time::Seconds;

...
my $time_seconds = $interval / 1000;

for ( $time_seconds ) {
    when ( $time_seconds > ONE_YEAR ) {
        printf "The interval is %.2f years\n", $time_seconds / ONE_YEAR;
    }
    when ( $time_seconds > ONE_DAY ) {
        printf "The interval is %.2f days\n", $time_seconds / ONE_DAY;
    }
    when ( $time_seconds > ONE_HOUR ) {
        printf "The interval is %.2f hours\n", $time_seconds / ONE_HOUR;
    }
    default { say "The interval is $time_seconds seconds"; }
} 
```

甚至可能有一种方法可以将所有内容组合成一个数组，以便拥有一个*Time*语句。（未经测试，但你明白了）：

```
 my @times = (
    [ INTERVAL => ONE_YEAR, VALUE => "years" ],
    [ INTERVAL => ONE_DAY,  VALUE => "days"  ],
    [ INTERVAL => ONE_HOUR, VALUE => "hours" ],
);

for my $interval ( @times ) {
    if ( $time_seconds > $interval->{INTERVAL} ) {
       printf "The interval is %.2f %s\n"
          , $time_seconds / $interval->{INTERVAL}, $interval->{VALUE};
    }
} 
```

对此并不太疯狂。你最好简单地制作一个`pretty_time`子程序来*隐藏*代码。

```
say pretty_time( $interval ); 
```*

# internet-explorer-9 - 如何在 IE9 中将 UL LI 列表居中？

> ID：13199651
> 
> 赞同：2
> 
> 时间：2012-11-02T16:48:40.343
> 
> 标签：internet-explorer-9, html-lists, alignment, text-alignment

看一眼：

[http://liveharleystreet.phil-taylor.com/](http://liveharleystreet.phil-taylor.com/)

特别是首先出现在页脚中的菜单。在所有其他浏览器中，此菜单居中，但在 IE9 中，它位于左侧。

如何更改我的 CSS 以使其在 IE9 中居中显示？

谢谢

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:35:41.397

我在选择器中用IE9的开发者工具编辑了custom.css文件

```
.footer .moduletablemenu ul li 
```

**将显示更改为内联并删除浮动属性**；在 IE9 中将页脚居中。似乎您在加载样式时遇到问题，具体取决于浏览器。

# algorithm - 在动态有向图中找到最小循环路径

> ID：13199653
> 
> 赞同：6
> 
> 时间：2012-11-02T16:48:52.453
> 
> 标签：algorithm, graph-algorithm

我最近在今年早些时候 Spotify 的黑客挑战中遇到了[这个（编辑：问题 A）](http://www.scribd.com/doc/109453858/2-Spotify-Codequest-2012)有趣的问题，其中涉及确定火车卡车交叉点的切换以将火车路由回其起点。火车必须朝着它离开的方向到达，并且火车永远不能在轨道上倒车。

据我了解，该问题可以建模为无向（？）图，我们必须从某个顶点找到最短的循环，或者检测不存在这样的循环。然而，有趣的是，对于顶点 v，与 v 相邻的顶点依赖于到 v 的路径，因此从某种意义上说，该图可以被认为是有向的，尽管这个方向是依赖于路径的。

我的第一个想法是将每个节点建模为 3 个单独的顶点 A、B 和 C，其中 A <-> B 和 A <-> C，然后使用广度优先搜索构建搜索树，直到找到原始顶点，但这因上面的警告而变得复杂，即给定顶点的邻接取决于我们访问的前一个顶点。这意味着在我们的 BFS 树中，节点可以有多个父节点。

显然，一个简单的 BFS 搜索不足以解决这个问题。我知道存在一些算法来检测图中的循环。一种方法可能是检测所有循环，然后对于每个循环，检测路径是否有效。（即不反转方向）

还有其他人对解决此问题的方法有任何见解吗？

**更新：** 我遵循@Karussell 在评论中建议的方法。

[这是我在 github 上的解决方案。](https://github.com/astahlman/spotify-railway-problem#spotify-railway-problem)

诀窍是使用基于边缘的图而不是传统的基于顶点的图来模拟情况。比赛中提供的输入文件已经根据边方便地指定了，因此该文件可以很容易地用于构建基于边的图。

该程序使用两个重要的类：Road 和 Solver。Road 有两个整数字段，j1 和 j2。j1 代表源交汇点，j2 代表目标交汇点。每条道路都是单向的，这意味着您只能从 j1 行驶到 j2。每条道路还包括相邻道路的链接列表和父道路。Road 类还包括静态方法，用于在输入文件中使用的字符串和表示每个交叉点处的 A、B 和 C 点的整数索引之间进行转换。

对于输入文件中的每个条目，我们将两条 Roads 添加到 HashMap 中，两个路口之间的每个方向对应一个 Road。我们现在有一个在交叉点之间运行的所有道路的列表。我们只需要通过 A、B 和 C 开关将路口的道路连接在一起。如果一条道路在 Junction.A 结束，我们查找从 Junction.B 和 Junction.C 开始的道路并将这些道路添加为邻接。buildGraph() 函数返回目标交汇点 (j2) 为“1A”== 索引 0 的道路。

至此，我们的图就构建好了。为了找到最短路径，我只是使用 BFS 来遍历图形。我们不标记根，并从排队根的邻接开始。如果我们找到一条目标路口为“1A”（索引 0）的道路，那么我们就找到了通过起点的最短循环。一旦我们使用每个 Road 的 parent 属性重建路径，就可以根据问题的需要适当地设置开关。

感谢 Karussell 提出这种方法。如果您想以简短解释的形式将您的评论放在答案中，我会接受。也感谢@Origin。我必须承认我没有完全按照你的回答逻辑，但这当然不是说它不正确。如果有人使用您的解决方案解决了这个问题，我会非常有兴趣看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:38:35.283

一种可能的方法：首先构建某种图来建模所有连接（图 G）。然后构造另一个图，我们将在其中找到循环（图 H）。对于 G 中的每个节点 A，我们将向图 H 添加一个节点。每个 A 节点也有 2 条出边（到图 G 中的 B 和 C 节点）。在 H 中，这些边将到达 G 中将遇到的下一个 A 节点。例如，与 ID 为 3 的交换机的 A 节点相对应的 H 中的 A 节点将具有到节点 9 和节点 6 的出边。 H. 每条边的权重是该路线上经过的开关数量（包括起始开关）。

这将产生一个图，我们可以在其中生长一个前向最短路径树。如果我们再次到达起点，那么循环就完成了。

关键是一个switch只有在A->方向遍历时才是一个决策点。没有必要对向后方向建模，因为这只会使搜索复杂化。

**编辑：更多说明**

问题包括确定从 A 到 A 的最短路径（再次）。最短的定义在这里是通过的开关数量。这将用于基于 Dijkstra 的搜索算法。我们基本上将在图 H 上进行 Dijkstra，其中边的成本等于该边中开关的数量。

在 H 图中，每个开关都有一个节点。每个节点将有 2 条出边，对应于可以采用的 2 条路径（B 和 C 方向）。H 中的边将对应于原始图中 2 个 A 节点之间的完整路径。对于问题描述中的示例，我们得到以下信息：

开关1对应的节点：

*   1 到节点 2 的出链路，权重 2，对应离开交换机 1 时走 C 方向。权重为 2，因为我们通过交换机 1，如果从 A1->C1->C3->A3->A2 走，则通过交换机 3
*   1出链路到节点3，权重2，对应走B方向

开关2对应的节点：

*   1出链路到节点6，权重2，对应走B方向
*   没有第二个链接，因为 C 方向是死胡同

开关3对应的节点：

*   1出链路到节点6，权重2，对应走C方向
*   1 到节点 9 的出链路，权重 3，对应取 B 方向并经过开关 3、7 和 8

等等每个开关。这会产生一个包含 10 个节点的图，每个节点最多有 2 个有向边。

现在我们可以开始构建我们的 Dijkstra 树了。我们从节点 1 开始，有 2 个可能的方向，B 和 C。我们将它们放在优先队列中。然后队列包含[节点2，权重2]和[节点3，权重2]，因为我们可以在经过2个交换机后到达交换机2的A入口，在经过2个交换机后到达交换机3的A入口。然后我们通过从队列中获取最低权重的条目来继续搜索：

*   [节点2，权重2]：只取B方向，所以把[节点6，权重4]放到队列中
*   [节点 3，权重 2]：要走 2 个方向，因此将 [节点 6，权重 4] 和 [节点 9，权重 5] 添加到队列中。
*   [节点 6，权重 4]：可能有 2 个方向，将 [节点 4，权重 5] 和 [节点 8，权重 8] 添加到队列中]
*   [节点9，权重5]：只有C方向，添加[节点10，权重6]
*   [节点4，权重5]：添加[节点5，权重7]为C方向和[节点1，权重9]为B方向]
*   [节点10，权重6]：C方向添加[节点1，权重8]，B方向添加[节点1，权重10]
*   [节点5，权重7]：添加[节点1，权重11]和[节点8，权重10]
*   [节点 8，权重 8]：添加 [节点 7，权重 9]
*   [节点 1，权重 8]：我们找到了回去的路，所以我们可以停下来

（错误是可能的，我只是手工做的）

然后该算法在一个周期的最终长度为 8 处停止。确定遵循的路径只是在解决节点并解包路径时维护节点的父指针的问题。

我们可以使用 Dijkstra，因为 H 中的每个节点对应于沿正确方向遍历原始节点（G 中）。然后可以以 Dijkstra 方式解决 H 中的每个节点，因此算法的复杂性仅限于 Dijkstra（它可以处理 100k 开关数量的上限）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:28:29.860

正如我的评论所建议的那样：我认为您可以通过[基于边缘的图](http://algo2.iti.kit.edu/documents/routeplanning/volker_sa.pdf)或通过或多或少是基于“增强”节点的图[的改进来解决这个问题。](http://algo2.iti.kit.edu/1862.php)

细节：

*   您的情况类似于道路网络中的转弯限制。如果您为每条（定向！）街道创建一个节点并根据允许的转弯连接这些节点，则可以对这些进行建模。
*   So, do not only store the position of your current position but also the direction and possible further 'situations'. To make it possible that even the same position with a 180° turn is different to your current state.

Instead of modeling your 'state' (which is directed!) into the graph you could also assign possible outcomes to every junction - now the algorithm needs to be more clever and needs to decide per junction what to do depending on your earlier state (including direction). I think, this is the main idea of the 'enhanced' node based graph which should be less memory intensive (not that important in your case).

# winforms - 在 Infragistics UltraGrid 中为选定行上的错误单元格设置背景

> ID：13199654
> 
> 赞同：3
> 
> 时间：2012-11-02T16:48:54.207
> 
> 标签：winforms, infragistics, ultrawingrid

我正在使用 Infragistic 的 UltraGrid 控件在 WinForms 中工作。我想这样做，以便我激活的行显示使用与行的其余部分不同的背景颜色存在错误的单元格。

目前，如果未激活该行，我会看到带有红色背景的错误单元格，以及带有白色背景的已验证单元格。但是，当我选择该行并将其激活时，我无法再看到哪些单元格有错误，因为整行的背景设置为黄色。

我想看到的是，如果该行被激活，所有有效单元格都是黄色的，所有无效单元格都是红色的。如果没有无效单元格，则所有单元格均为黄色。

目前，如果发现该行有错误，我将停用该行。只要用户不再单击该行，这就会起作用，这是一个非常蹩脚的假设。我查看了 DisplayLayout.Override，它允许我在网格、带区、行、列和单元格级别覆盖，但是当我在单元格级别覆盖时，似乎行级别的设置仍然优先。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:25:38.350

Infragistics 支持建议利用单元本身的 ActiveAppearance 和 ActiveAppearanceEnabled 属性，但是，我坚持使用未实现这些属性的早期版本的 Infragistics。

最后，我必须使用 IUIElementDrawFilter 类为单元格实现自定义绘制过滤器。可以在[http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.v12.1~Infragistics.Win.IUIElementDrawFilter.html](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.v12.1~Infragistics.Win.IUIElementDrawFilter.html)找到实现 IUIElementDrawFilter 的示例。

# facebook - 基于会话 ID 识别/管理用户（会话 ID 到用户 ID 到用户数据之间的映射）

> ID：13199656
> 
> 赞同：1
> 
> 时间：2012-11-02T16:49:07.943
> 
> 标签：facebook, session, cookies, oauth, session-cookies

我编写了一个通过 Facebook 连接 (o-Auth) 对用户进行身份验证的网络应用程序。用户通过身份验证后，我有一个 facebook 令牌。使用这个令牌，我向 Facebook 发送请求以获取其基本用户信息。此时我有了用户唯一的 Facebook id，我知道它是谁。

1.  我应该如何在用户、令牌和数据库中的数据之间建立联系？现在我的架构非常简单：facebook_id 是主键，还有一些其他列包含令牌和用户数据。这是正确的方法吗？

2.  在什么时候我需要在用户请求上设置一个唯一的 SESSION_ID (cookie)？认证后呢？我对这部分（以及一般的会话管理）感到困惑。当我在会话上设置属性时，浏览器是否会记住它并在每个请求中将其发送到我的服务器？跨所有页面？

3.  最重要的问题是，我如何在 SESSION ID 和用户之间进行映射？一旦我在他的请求上设置了会话 ID，我需要在每个请求中弄清楚它是谁。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:14:06.553

1.  没关系，您真正想要做的就是能够将特定 Facebook 用户 ID 与您的网络应用程序创建的或在您的网络应用程序中创建的数据匹配，这些数据不是来自 Graph API 。
2.  在您完成登录流程的那一刻（当您收到访问令牌时）。当您设置会话时，浏览器会记住其中的键值对，直到会话被清除。因此，您希望您的代码能够将使用浏览器的人与数据库中的特定用户关联起来（如果他们没有会话，则不关联）。因此，无论您使用什么会话值，您还需要将其与用户 ID 一起存储在数据库中。
3.  往上看。

老实说，最简单的方法就是使用 Facebook Javascript SDK。这将通过 cookie 自动处理所有访问令牌检索和用户持久性，而无需您为其编写代码。最终，这意味着您需要做的就是将 Facebook 用户 ID 与应用程序生成的内容一起存储在数据库中，而无需担心存储访问令牌或会话变量。这里有一个简单的分步指南： [https](https://developers.facebook.com/docs/howtos/login/getting-started/)
://developers.facebook.com/docs/howtos/login/getting-started/ （在第 5 步中，您将收到用户 ID，您可以进行 AJAX 调用服务器端代码从这里存储到你的数据库中）

# python - Python Profiling - 我的代码之外的汇总函数调用

> ID：13199657
> 
> 赞同：1
> 
> 时间：2012-11-02T16:49:08.380
> 
> 标签：python, performance, profiling, profile, cprofile

我正在尝试分析我们的 django 单元测试（如果测试更快，我们会更频繁地运行它们）。我已经通过 python 的内置 cProfile 分析器运行它，生成了一个 pstats 文件。

但是信噪比很差。列出的功能太多。当我进行一个数据库查询时，会调用很多很多 django 内部函数。这使得很难看到发生了什么。

无论如何我可以“汇总”某个目录之外的所有函数调用吗？

例如，如果我在我的目录之外调用一个 python 函数，然后它调用 5 个其他函数（都在我的目录之外），那么它应该把所有这些都汇总起来，所以看起来只有一个函数调用，它应该显示累积整个事情的时间。

显然，如果您想分析（例如）Django，这很糟糕，但我不想这样做。

我查看了 pstats.Stats 对象，但看不到修改此数据的明显方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:54:06.657

我对 python 的经验很少，但在性能调优方面有很多经验，所以这里有一种可能性：

1.  与其将分析作为单元测试的一部分运行，不如只进行总体执行时间测量。如果这些变化不大，你就可以了。

2.  当您确实检测到更改时，或者如果您只想让事情运行得更快，请使用[*此方法*](https://stackoverflow.com/a/4299378/23771)。正如您所说，它具有更高的“信噪比”。

不同之处在于您不希望分析器能够找出您需要查看的内容。它更像是调试器中的断点，断点不是发生在您选择的位置，而是很有可能发生在不必要的缓慢时。如果在两次或更多情况下，您看到它在做一些可能会被更好的东西取代的事情，平均而言，它会得到回报，并且修复它会使其他问题更容易通过相同的方法找到。

# objective-c - NSString 无法释放

> ID：13199663
> 
> 赞同：0
> 
> 时间：2012-11-02T16:49:21.017
> 
> 标签：objective-c, nsstring

考虑以下方法和调用者代码块。该方法分析 a`NSString` 并提取`"http://"`它通过引用传递的字符串作为自动释放对象。

在没有发布的情况`g_scan_result`下，该程序按预期工作。但是根据非弧规则，`g_scan_result`应该释放，因为已经针对它调用了保留。

我的问题是：

1.  为什么`g_scan_result`不能释放？
2.  `g_scan_result`下面发布的编码中的处理方式有什么问题吗？
3.  `g_scan_result`只要程序运行正确且 XCode Memory Leak 工具不显示泄漏， 不释放是否安全？
4.  我应该检查哪些 XCode 配置文件工具以及在哪个字幕下检查？

希望有知识的人可以帮忙。

```
- (long) analyse_scan_result :(NSString *)scan_result  target_url :(NSString **)targ_url {

    NSLog (@" RES analyse string : %@", scan_result);

    NSRange range = [scan_result rangeOfString:@"http://"
                                       options:NSCaseInsensitiveSearch];

    if (range.location == NSNotFound) {
        *targ_url = @"";
        NSLog(@"fnd string not found");
        return 0;
    }

    NSString *sub_string = [scan_result substringFromIndex : range.location];
    range = [sub_string rangeOfString : @" "];

    if (range.location != NSNotFound) {
        sub_string = [sub_string substringToIndex : range.location];
    }

    NSLog(@" fnd sub_string = %@", sub_string);
    *targ_url = sub_string;

    return [*targ_url length];
} 
```

* * *

以下是调用者代码块，还请注意 g_scan_result 已被声明并初始化（在另一个源文件中）为：

```
NSString *g_scan_result = nil; 
```

如果您有建议或在此处（或以上）发布的代码中发现可能的错误，请发送评论或回答。Xcode 内存工具似乎没有显示任何内存泄漏。但这可能是因为我不知道在哪里寻找记忆工具的新手。

```
{
    long url_leng = [self analyse_scan_result:result target_url:&targ_url];

    NSLog(@" TAR target_url = %@", targ_url);

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Scanned Result"
                                                    message:result
                                                   delegate:g_alert_view_delegate
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];

    if (url_leng) {

        // ****** The 3 commented off statements
        // ****** cannot be added without causing
        // ****** a crash after a few scan result
        // ****** cycles.

        // ****** NSString *t_url;

        if      (g_system_status.language_code == 0)
            [alert addButtonWithTitle : @"Open"];
        else if (g_system_status.language_code == 1)
            [alert addButtonWithTitle : @"Abrir"];
        else
            [alert addButtonWithTitle : @"Open"];
        // ****** t_url = g_scan_result;
        g_scan_result = [targ_url retain];
        // ****** [t_url release];
    }

    targ_url = nil;
    [alert show];
    [alert release];

    [NSTimer scheduledTimerWithTimeInterval:5.0
                                     target:self
                                   selector:@selector(activate_qr_scanner:)
                                   userInfo:nil
                                    repeats:NO
     ];

    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:23:58.067

我想谜团已经解开了。感谢所有愿意对此进行调查的人。原因是在添加 UIAlertView 之前，已完成编码（在另一个源文件上）以将原始输出字符串分配给 g_scan_result 并将其直接显示在当前视图上。因此，当 g_scan_result 发布时，它正在释放由一些过时代码分配的错误 NSString。

总之，错误的 NSString 被释放，这是问题的根源。

解决方案只是删除一个过时的语句。旧实现中的语句保留在那里，因为我认为它不会造成任何伤害（甚至可能有助于使变量不断填充）。但事实证明这是一个非常愚蠢的错误。唯一的借口就是最近睡得很少。能够找到借口确实是有目的的。只是希望它不必经常这样做......

# graph - 无法在 gephi 上加载 45000 个节点的网络图

> ID：13199664
> 
> 赞同：1
> 
> 时间：2012-11-02T16:49:22.637
> 
> 标签：graph, gephi

我正在尝试在 45000 个节点的 gephi 上加载网络图。应用程序停止并要求我以 .gephi 格式保存当前文件。但是当我尝试加载文件时，它给了我一个 xml 解析错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:38:58.757

我已经毫无问题地完成了更大的图表。允许更多内存给 gephi，如[https://gephi.org/users/install/中所述](https://gephi.org/users/install/)

# c# - 我可以使用 JQuery 多页/相同文件 data-role=page 运行单独的 asp.net c# 页面加载事件吗？

> ID：13199667
> 
> 赞同：0
> 
> 时间：2012-11-02T16:49:32.460
> 
> 标签：c#, jquery

所以，

我在我的移动网站中使用 ac# 代码隐藏。

我需要根据使用 Jquery Mobile属性`Page_Loads`显示的页面运行不同的内容。`data-role="page"`

例如：我有

```
<div data-role="page" id="page1">
  <div data-role="content">Content</div>
</div>
<div data-role="page" id="page2">
  <div data-role="content">Content</div>
</div> 
```

根据加载的“页面”（div），我如何`Page_Load`在后面运行代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:59:26.760

这是不可能的。`Page_Load`在解释任何 javascript 之前很久就在服务器上运行。

# migration - 将现有的 VS 2010 Web 项目迁移到 VS 2012

> ID：13199668
> 
> 赞同：1
> 
> 时间：2012-11-02T16:49:34.567
> 
> 标签：migration, visual-studio-2012

我有一个现有的 Visual Studio 2010 Web 项目，我想迁移到 Visual Studio 2012。有人可以建议如何操作的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:54:24.493

只需使用 VS2012 打开您的解决方案，它就兼容：http: [//msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)

# jquery - jQuery div 显示错误

> ID：13199669
> 
> 赞同：-5
> 
> 时间：2012-11-02T16:49:35.647
> 
> 标签：jquery

请看看这个[小提琴](http://jsfiddle.net/rJq8b/)

它不应该工作吗？难道我做错了什么？

```
<a href="#" id="#dwkere">link</a>
<div id="form-holder">text</div> 
```

```
#form-holder {
    display: none;
    background: #000000;
    opacity: 0.9;
    position: fixed;
    top: 0;
    left: 0;
    min-width: 100%;
    min-height: 100%;
    z-index: 991;
} 
```

```
$(document).ready(function () {
    $("#dwkere").click(function(){
        $("#form-holder").css("filter", "alpha(opacity=40)");
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:55:29.553

有一堆问题，

1.  `#`在链接标签 id 内移除
2.  缺少`});`准备好的文件
3.  jQuery 不包含在 jsfiddle 中
4.  更改`.css('opacity', 0.4)`为 jQuery 在浏览器中处理它
5.  修改了 div 的 CSS，因为它是绝对定位的，并且显示在链接标记上方，因此无法单击。

**演示：http:** [//jsfiddle.net/rJq8b/8/](http://jsfiddle.net/rJq8b/8/)

如果您希望在应用不透明度之前隐藏元素，请使用下面的演示。

**演示： http:** [//jsfiddle.net/rJq8b/18/](http://jsfiddle.net/rJq8b/18/) [如[Travis J](https://stackoverflow.com/questions/13199669/jquery-div-display-error/13199772#comment17970352_13199772)所述]

**HTML：**

```
<a href="#" id="dwkere">link</a>
<div id="form-holder">text</div> 
```

**CSS：**

`#form-holder {background:#fff;opacity:0.9;position:fixed;top:20;left:20;min-width:100%;min-height:100%;z-index:991;}`

**JS：**

```
$(document).ready(function() {
    $("#dwkere").click(function() {       
        $("#form-holder").css('opacity', 0.4);
    });
}); 
```

# google-apps-script - 从服务器处理程序使用缓存

> ID：13199673
> 
> 赞同：1
> 
> 时间：2012-11-02T16:49:53.553
> 
> 标签：google-apps-script, google-sheets

我正在尝试将电子表格上 Google App Script 表单中的一些用户输入保存到私人缓存中。

这是一个测试脚本：

```
var cache = CacheService.getPrivateCache();

function onLoad() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet(),
      entries = [{
        name : "Show form",
        functionName : "showForm"
      }];
  sheet.addMenu("Test Menu", entries);
}

function showForm() {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet(),
      app = UiApp.createApplication(),
      setButton = app.createButton("Set"),
      setHandler = app.createServerClickHandler('setTest');

  setButton.addClickHandler(setHandler);
  app.add(setButton);
  spreadsheet.show(app);
}

function setTest(event) {
  cache.put("test", "test", 7200);

  Browser.msgBox("Test was set: " + cache.get("test") + ". Use the getTest cell formula to test the cache.");
}

function getTest() {
  var result = cache.get("test");

  return result;
} 
```

单击菜单按钮后，将出现一个表单并在服务器处理程序中设置缓存值。然后我尝试在单元格中使用 =getTest() 从缓存中获取值。我希望缓存返回值“test”，但它似乎返回 null。

我在这里开始这个问题： [http ://code.google.com/p/google-apps-script-issues/issues/detail?id=2039](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2039)

我还发现了另一个类似的： [http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1804](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1804)

尝试将表单上的一些用户输入保存到缓存中，以便以后能够从另一个函数访问它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:39:33.440

自定义功能的范围有限，因此只能访问少数选择的服务。[你在这里](https://developers.google.com/apps-script/execution_custom_functions)阅读更多关于它们的限制。

使用 Cache 它有点棘手 - 缓存是每个“脚本范围”。因此，当首先从服务器处理程序脚本范围访问缓存时，它作为具有更多权限的 UiApp 运行，这与自定义函数运行的脚本范围不同。因此，缓存不在这两个范围之间共享。

您可以从其他自定义函数访问您在自定义函数中设置的缓存项，但此缓存不能跨越这些边界。

理论上，您可以将其存储在 ScripProperties 中，但这可能非常笨拙，并且会滥用这些功能，并且在所有用户之间共享。

```
ScriptProperties.setProperty("test", "test") 
```

和

```
var result = ScriptProperties.getProperty("test"); 
```

如果您可以更深入地解释您的用例，也许我们可以提供一些替代解决方案。

# function - Shell 脚本：函数

> ID：13199674
> 
> 赞同：0
> 
> 时间：2012-11-02T16:49:56.537
> 
> 标签：function, shell

我无法让我的功能做我想做的事。当我调用我的函数 get_from_A_to_F 时，我给它一个参数 $remainder。我希望我的函数将高于 9 的数字替换为特定字母。如果参数等于 10，则应将其更改为“A”。但是它仍然保留为 10。我在这里做错了什么？

```
#!/bin/sh

get_from_A_to_F() 
{
    case $1 in
        10) $1="A"
        ;;
        11) $1="B"
        ;;
        12) $1="C"
        ;;
        13) $1="D"
        ;;
        14) $1="E"
        ;;
        15) $1="F"     
        ;; 
        [0-9]) $1=$1
        ;;  
    esac
    echo $1
}

read number
string=""
index=`expr index $number "."`
if [ $index -eq 0 ]
then
    integer=$number
    fraction=0
else
    integer=`expr substr $number 1 $(expr $index - 1)`
    fraction=`expr "$number - $integer" | bc`
fi
result=$integer
while [ $result -ne 0 ] 
do
    remainder=`expr $result % 16`
    get_from_A_to_F $remainder
    result=`expr $result / 16`
    string=$remainder$string
done 
```

当前输出（如果读取的数字是 634）：

```
634
test: 43: 10=A: not found
10
test: 43: 7=7: not found
7
test: 43: 2=2: not found
2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:38:32.097

要分配给 $1，您可以：`set -- value`

`get_from_A_to_F`不是转换为十六进制的好函数名称。尝试这个：

```
to_hex() { printf "%X\n" "$1"; }

read number

regex1='^[+-]?[0-9]+(\.[0-9]*)?$'
regex2='^[+-]?[0-9]*\.[0-9]+$'
if ! [[ $number =~ $regex1 || $number =~ $regex2 ]]; then
    echo "doesn't look like a number: $number"
else
    integer=${number%.*}
    fraction=${number#*.}
    (( integer == fraction )) && fraction=0   # no decimal point
    hex=$(to_hex $integer)
    # you don't use $fraction anywhere?
fi 
```

# android - 我可以访问保存供 Google 地图离线使用的地图吗

> ID：13199676
> 
> 赞同：0
> 
> 时间：2012-11-02T16:50:07.877
> 
> 标签：android, google-maps, offline

[http://howto.cnet.com/8301-11310_39-57462845-285/save-maps-for-offline-use-in-google-maps-for-android/](http://howto.cnet.com/8301-11310_39-57462845-285/save-maps-for-offline-use-in-google-maps-for-android/)

好的，在 android 上，新的谷歌地图可以允许用户保存地图以供离线使用。我的问题是我的应用程序使用谷歌地图，当我处于离线模式时，我可以从我的应用程序访问这些保存的地图吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:54:07.387

我真的不舒尔，但据我了解，One 通过 Android-Maps-Api 使用 GoogleMaps。因此，如果您要显示之前存储的区域，maps-api 应该提供存储的地图图块，而不是从互联网下载它们。您可以对此进行测试，如果您在您的位置周围存储一个区域，禁用手机上的所有 Internet 访问权限，并在您的应用程序内部进行测试（如果显示存储的区域）。

编辑：

对不起，我自己测试它没有结果。如果这能奏效，那就太好了，太容易了，也许谷歌有一天会将此功能添加到他们的 API 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:34:16.173

> 好的，在 android 上，新的谷歌地图可以允许用户保存地图以供离线使用。

Android 版Google 地图*应用程序*提供离线缓存。

> 我的问题是我的应用程序使用谷歌地图，当我处于离线模式时，我可以从我的应用程序访问这些保存的地图吗？

适用于 Android 的 Google Maps SDK 插件不提供离线缓存，至少目前不提供。

# ruby-on-rails - 续集——如何构造这个查询？

> ID：13199680
> 
> 赞同：1
> 
> 时间：2012-11-02T16:50:22.713
> 
> 标签：ruby-on-rails, ruby, sequel

我有一个表，它通过外键与表`users`具有一对多的关系。也就是说，每个用户可以进行多次购买（或者可能没有，在这种情况下，他将在 user_purchases 表中没有条目）。`user_purchases``user_id`

`user_purchases`这里只有一个感兴趣的领域，即`purchase_date`.

我正在尝试编写一个 Sequel ORM 语句，该语句将返回具有以下列的数据集：

*   用户身份
*   用户第二次购买的日期（如果存在）

因此，未进行至少 2 次购买的用户将不会出现在此数据集中。编写此 Sequel 声明的最佳方式是什么？

**请注意，我正在寻找一个数据集，其中包含 >= 2 次购买的所有返回用户**

谢谢！

## 为清晰而编辑

这是我为获取用户及其第一次购买日期而写的类似声明（而不是第二次购买日期，我在当前帖子中寻求帮助）：

```
 DB[:users].join(:user_purchases, :user_id => :id)
              .select{[:user_id, min(:purchase_date)]}
              .group(:user_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:26:18.323

你似乎并不担心日期，只是计数所以

```
DB[:user_purchases].group_and_count(:user_id).having(:count > 1).all 
```

将返回一个 user_ids 列表和计数（购买次数）> = 2。类似的东西

```
[{:count=>2, :user_id=>1}, {:count=>7, :user_id=>2}, {:count=>2, :user_id=>3}, ...] 
```

如果您想获得用户，使用 Sequel 最简单的方法可能是仅提取 user_ids 列表并将其反馈到另一个查询中：

```
DB[:users].where(:id => DB[:user_purchases].group_and_count(:user_id).
    having(:count > 1).all.map{|row| row[:user_id]}).all 
```

* * *

**编辑：**

我觉得应该有一种更简洁的方式，然后我看到了这个答案（来自续集作者 Jeremy Evans）对另一个问题的使用`select_group`和`select_more`：[https ://stackoverflow.com/a/10886982/131226](https://stackoverflow.com/a/10886982/131226)

这应该在没有子选择的情况下完成：

```
DB[:users].
  left_join(:user_purchases, :user_id=>:id).
  select_group(:id).
  select_more{count(:purchase_date).as(:purchase_count)}.
  having(:purchase_count > 1) 
```

它生成这个 SQL

```
SELECT `id`, count(`purchase_date`) AS 'purchase_count' 
FROM `users` LEFT JOIN `user_purchases` 
ON (`user_purchases`.`user_id` = `users`.`id`) 
GROUP BY `id` HAVING (`purchase_count` > 1)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:16:19.577

通常，这可能是您需要的 SQL 查询：

```
SELECT u.id, up1.purchase_date FROM users u
LEFT JOIN user_purchases up1 ON u.id = up1.user_id
LEFT JOIN user_purchases up2 ON u.id = up2.user_id AND up2.purchase_date < up1.purchase_date
GROUP BY u.id, up1.purchase_date
HAVING COUNT(up2.purchase_date) = 1; 
```

如果您没有得到更好的答案，请尝试将其转换为续集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:20:43.653

如果您在查询中执行 an ，则用户第二次购买的日期将是检索到的第二行`order_by(:purchase_date)`。

要访问它，请执行 a`limit(2)`将查询限制为两个结果，然后取`[-1]`(or `last`) 一个。因此，如果您不使用模型并且仅使用数据集，并且知道`user_id`您感兴趣的内容，那么您的（未经测试的）查询将是：

```
DB[:user_purchases].where(:user_id => user_id).order_by(:user_purchases__purchase_date).limit(2)[-1] 
```

以下是 Sequel 控制台的一些输出：

```
DB[:user_purchases].where(:user_id => 1).order_by(:purchase_date).limit(2).sql
=> "SELECT * FROM user_purchases WHERE (user_id = 1) ORDER BY purchase_date LIMIT 2" 
```

添加适当的`select`子句：

```
.select(:user_id, :purchase_date) 
```

你应该完成：

```
DB[:user_purchases].select(:user_id, :purchase_date).where(:user_id => 1).order_by(:purchase_date).limit(2).sql
=> "SELECT user_id, purchase_date FROM user_purchases WHERE (user_id = 1) ORDER BY purchase_date LIMIT 2" 
```

# haskell - 如何构建用于从 Haskell 中的记录中查找字段的 DSL

> ID：13199681
> 
> 赞同：7
> 
> 时间：2012-11-02T16:50:22.587
> 
> 标签：haskell, dsl

**TL;DR：**我需要帮助来弄清楚如何生成代码，该代码将返回来自不同记录的各个字段的少数数据类型（可能只是 Double 和 Bool）中的一种。

**长格式：**假设以下数据类型

```
data Circle = Circle { radius :: Integer, origin :: Point }
data Square = Square { side  :: Integer } 
```

和一些样板代码

```
circle = Circle 3 (Point 0 0)
square = Square 5 
```

我正在构建一个小型 DSL，并希望用户编写如下内容

```
circle.origin
square.side 
```

它会生成类似于

```
origin . circle
side . square 
```

例如，在解析这个时，我会使用字符串“circle”和“origin”。我现在需要将它们转换为函数调用。我显然可以有这样的东西：

```
data Expr a = IntegerE (a -> Integer)
            | PointE (a -> Point)

lookupF2I "side"   = Just $ IntegerE side
lookupF2I "radius" = Just $ IntegerE radius
lookupF2I _        = Nothing

lookupF2P "origin" = Just $ PointE origin
lookupF2P _ = Nothing 
```

每个返回的数据类型都有一个查找函数。从 DSL 的角度来看，每种数据类型拥有一个函数是实用的，因为它只会真正处理 2 或 3 种数据类型。然而，这似乎不是一种特别有效的做事方式。有没有更好的方法（肯定）这样做？如果没有，有没有一种方法可以从我希望能够从中查找字段的各种记录中生成各种查找函数的代码？

其次，仍然存在解析`"circle"`或`"square"`需要调用适当的`circle`或`square`函数的问题。如果我要使用类型类来实现它，我可以执行以下操作：

```
instance Lookup Circle where
    lookupF2I "radius" = Just $ IntegerE radius
    lookupF2I _        = Nothing
    lookupF2P "origin" = Just $ PointE origin
    lookupF2P _        = Nothing 
```

但是这让我不得不弄清楚在查找函数上强制执行哪种类型，*更*糟糕的是必须为我想要使用它的每个（许多）记录手动编写实例。

`Circle`注意：和`Square`可以使用单个 ADT 表示这一事实对我的问题是偶然的，因为这是一个人为的例子。实际的代码将包含各种非常不同的记录，它们唯一的共同点是具有相同类型的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T14:28:49.553

我尝试使用 Template Haskell 来提供一种很好且类型安全的方法来解决这个问题。为此，我从给定的字符串构造了表达式。

我想 Lens 包可以做到这一点，但它可能是一个更简单、更灵活的解决方案。

它可以这样使用：

```
import THRecSyntax
circleOrigin = compDSL "circle.origin.x" 
```

并且是这样定义的：

```
{-# LANGUAGE TemplateHaskell #-}
import Language.Haskell.TH

compDSL :: String -> Q Exp
compDSL s = return 
            $ foldr1 AppE 
            $ map (VarE . mkName) 
            (reverse $ splitEvery '.' s) 
```

所以结果表达式将是：`x (origin circle)`

注意：`splitEvery`是将列表拆分为取出给定元素的子列表的函数。示例实现：

```
splitEvery :: Eq a => a -> [a] -> [[a]]
splitEvery elem s = splitter (s,[])
  where splitter (rest, res) = case elemIndex elem rest of
            Just dotInd -> let (fst,rest') = splitAt dotInd rest
                            in splitter (tail rest', fst : res)
            Nothing -> reverse (rest : res) 
```

这是使用给定语法创建嵌入式 DSL 的重量级但类型安全的方法。

# sql-server-2008 - 将文件保存到 SQL Server 数据库

> ID：13199683
> 
> 赞同：0
> 
> 时间：2012-11-02T16:50:29.620
> 
> 标签：sql-server-2008

我有带有这些字段的表“tblTransDocs”（DocId（pk），TransId（pk），rev，......并且对于这个表的每一行我可以有文件。现在我的问题是我必须用这些制作另一个表字段（fileId（int），文件名（varchar），内容类型（varchar），数据（var二进制）并将Fileid作为外键添加到“tblTransDocs”，或者我可以将列添加到“tblTransDocs”以将文件保存到数据库比如（文件名（varchar），内容类型（varchar），数据（var binary）。

哪种方式是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:32:58.730

如果要将文件存储在表中，可以添加**图像**字段来存储 blob 数据。是的，您可以将其添加到现有表中；您不需要创建第二个表，这取决于您的设计。如前所述，FILESTREAM 也是一个选项。

# python - Python-需要将字符附加到文本文件中每一行的开头和结尾

> ID：13199685
> 
> 赞同：0
> 
> 时间：2012-11-02T16:50:38.673
> 
> 标签：python

我应该先声明我是一个完整的 Python 新手。

我正在尝试创建一个脚本，该脚本将遍历目录及其子目录以查找文本文件。当它遇到一个文本文件时，它将解析该文件并将其转换为 NITF XML 并上传到 FTP 目录。

在这一点上，我仍在努力将文本文件读入变量，以便可以将它们插入 XML 文档的正确位置。文本文件的示例如下。

```
Headline
Subhead
By A person
Paragraph text. 
```

这是我到目前为止的代码：

```
with open("path/to/textFile.txt") as f:
    #content = f.readlines()
    head,sub,auth = [f.readline().strip() for i in range(3)]
    data=f.read()
pth = os.getcwd()

print head,sub,auth,data,pth 
```

我的问题是：如何遍历文本文件（数据）的正文并将每一行包装在 HTML P 标记中？例如;

`<P>line of text in file </P> <P>Next line in text file</p>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:57:00.923

就像是

```
output_format = '<p>{}</p>\n'.format
with open('input') as fin, open('output', 'w') as fout:
    fout.writelines( output_format(line.strip()) for line in fin ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:53:37.393

```
with open('infile') as fin, open('outfile',w) as fout:
    for line in fin:
        fout.write('<P>{0}</P>\n'.format(line[:-1])  #slice off the newline.  Same as `line.rstrip('\n')`.

#Only do this once you're sure the script works :)
shutil.move('outfile','infile')  #Need to replace the input file with the output file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:53:41.387

这假设您要将新内容写回原始文件：

```
with open('path/to/textFile.txt') as f:
    content = f.readlines()

with open('path/to/textFile.txt', 'w') as f:
    for line in content:
        f.write('<p>' + line.strip() + '</p>\n') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:00:09.260

在这里使用`data=f.readlines()`，

然后遍历数据并尝试这样的事情：

```
for line in data:
   line="<p>"+line.strip()+"</p>"
   #write line+'\n' to a file or do something else 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T21:50:02.373

您可以使用该`fileinput`模块就地修改一个或多个文件，如果需要，还可以创建可选的备份文件（有关详细信息，请参阅其[文档](http://docs.python.org/2/library/fileinput.html#fileinput.FileInput)）。这是用于处理一个文件的。

```
import fileinput

for line in fileinput.input('testinput.txt', inplace=1):
    print '<P>'+line[:-1]+'<\P>' 
```

该`'testinput.txt'`参数也可以是两个或多个文件名的序列，而不仅仅是一个文件名，这可能很有用，特别是如果您`os.walk()`用于生成目录中的文件列表及其要处理的子目录（因为您可能应该是正在做）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T20:10:39.817

附加

和 <\p> 为每一行

前任：

```
 data_new=[]
     data=f.readlines()
     for lines in data:
          data_new.append("<p>%s</p>\n" % data.strip().strip("\n")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T16:55:04.537

在你的情况下，你可能应该更换

```
data=f.read() 
```

和：

```
data = '\n'.join("<p>%s</p>" % l.strip() for l in f) 
```

# android - USB BulkTransfer 读取数据可用

> ID：13199686
> 
> 赞同：0
> 
> 时间：2012-11-02T16:50:43.727
> 
> 标签：android, usb

是否可以使用 Android USB 主机 API（controlTransfer、bulkTransfer）找出 FIFO 缓冲区中有多少字节可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:10:48.410

前 2 个字节为状态寄存器保留。之后的一切都是用户数据。

# c - `sscanf(s, "%d %n", &i, &n)` 中的 n 代表什么？

> ID：13199693
> 
> 赞同：7
> 
> 时间：2012-11-02T16:51:24.587
> 
> 标签：c

手册页指出的签名`sscanf`是

```
sscanf(const char *restrict s, const char *restrict format, ...); 
```

我[在 SO 上看到了一个答案，](https://stackoverflow.com/a/456314/641514)其中一个函数`sscanf`用于检查输入是否为整数。

```
bool is_int(char const* s) {
    int n;
    int i;
    return sscanf(s, "%d %n", &i, &n) == 1 && !s[n];
} 
```

看`!s[n]`它似乎建议我们检查是否`sscanf`扫描字符序列直到终止字符`\0`。所以我假设代表函数结束时`n`sscanf 将在字符串中的索引。`s`

**但是变量`i`呢？这是什么意思？**

**编辑：**

更明确地说：我看到`sscanf`想要一个类型的指针`char *`作为第一个参数的签名。格式说明符作为 seconf 参数，因此它知道如何解析字符序列以及与转换说明符一样多的变量作为下一个参数。我现在明白这`i`是为了保存解析的整数。

由于格式说明符只有一个，我尝试推导出`n`.

我上面的假设是否`n`正确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T17:57:41.813

看起来操作员已经有了答案，但是由于我费心自己查找并运行代码...

来自“C The Pocket Reference”（Herbert Shildt 的第二版）scanf() 部分：

> %n 接收一个整数值，等于到目前为止读取的字符数

对于返回值：

> scanf() 函数返回的数字等于成功赋值的字段数

sscanf() 函数的工作原理相同，它只是从提供的缓冲区参数（在本例中为 s ）获取输入。"== 1" 测试确保只解析了一个整数，!s[n] 确保输入缓冲区在解析完整数后很好地终止和/或字符串中实际上只有一个整数。

运行这段代码，像 "32" 这样的 s 值给出了一个 "true" 值（我们没有将 bool 定义为我们系统上的类型）但是 s as "3 2" 给出一个 "false" 值，因为 s[n]在这种情况下是“2”，n 的值为 2（在这种情况下，“3”被解析以创建 int）。如果 s 为“3”，则此函数仍将返回 true，因为所有空格都已输入，并且 n 的值为 3。

另一个示例输入“3m”给出了您所期望的“假”值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T17:13:54.277

`sscanf()`来自的手册页的逐字记录：

> 转换
> 
> [...]
> 
> n
> 
> 没有任何期望；相反，到目前为止从输入消耗的字符数通过 next 指针存储，该指针必须是指向 int 的指针。这不是转换，尽管可以使用 * 赋值抑制字符来抑制它。C 标准说：“执行 %n 指令不会增加执行完成时返回的赋值计数”，但勘误表似乎与此相矛盾。可能最好不要对 %n 转换对返回值的影响做出任何假设。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T03:54:10.150

我想指出原始代码有问题：

```
bool is_int(char const* s) {
    int n;
    int i;
    return sscanf(s, "%d %n", &i, &n) == 1 && !s[n];
} 
```

我会解释为什么。我将解释 sscanf 格式字符串。

首先，越野车：

给定输入“1”，即整数 1，sscanf 会将 1 存储到 i 中。那么，由于后面没有空格，sscanf就不会碰n了。并且 n 未初始化。因为 sscanf 将 i 设置为 1，所以 sscanf 返回的值将是 1，表示扫描了 1 个字段。由于 sscanf 返回 1，因此表达式的部分

```
sscanf(s, "%d %n", &i, &n) == 1 
```

将是真的。因此 && 表达式的另一部分将执行。并且 s[n] 将访问内存中的某个随机位置，因为 n 未初始化。

解释格式：

```
"%d %n" 
```

尝试扫描可能是十进制数或整数或科学计数法数字的数字。该数字是一个整数，它后面必须至少有一个空格。空白可以是空格、\n、\t 和某些其他不可打印的字符。只有当它后面跟着空格时，它才会将 n 设置为扫描到该点的字符数，包括空格。

此代码可能是预期的：

```
 static bool is_int(char const* s) 
    {
        int i;
        int fld;
        return (fld = sscanf(s, "%i", &i)) == 1;
    }

    int main(int argc, char * argv[])
    {
        bool ans = false;

        ans = is_int("1");
        ans = is_int("m");

        return 0;
    } 
```

此代码基于，如果 s 是整数，则 sscanf 将扫描它，而 fld 将恰好是一个。如果 s 不是整数，则 fld 将为零或 -1。如果有其他东西，比如一个词，则为零；如果只有一个空字符串，则为 -1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:53:37.063

那里的变量`i`意味着直到它读取一个整数值。

你想问什么？不是太清楚！代码将（尝试）将字符串中的整数读入“i”

# javascript - 使用断言在 node.js 中进行防御性编程

> ID：13199697
> 
> 赞同：15
> 
> 时间：2012-11-02T16:51:45.953
> 
> 标签：javascript, node.js, coding-style

考虑到有时节点中的错误消息特别无用，我喜欢在我的函数中自由地使用断言，以便尽快捕获编程错误，并且我可以获得通常可以查明问题的消息。

```
function doSomething(arg1, arg2){
  assert(!arg1, "arg1 is undefined");
  assert(!arg2, "arg2 is undefined");
  assert(!arg1.expectedFn, "arg1 does not have expectedFn");

  arg1.expectedFn(function(blah){
    ...
  }
} 
```

在 node/javascript 程序中这是一件特别糟糕的事情吗？这对性能有影响吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:13:34.783

（这更像是一种观点，而不是事实帖子，所以看它的价值）

断言肯定对性能没有任何好处，但适度使用我怀疑它们是否会产生足够严重的影响。也就是说，一般来说，只要有可能，良好的测试覆盖率就比断言更可取。此外，您编写的断言不应与运行时自然抛出的错误相比是多余的，除非它们特别不透明。

让我们考虑一个修改（并且有些人为的）版本的 doSomething -

```
function doSomething(arg1, arg2){
  var res = arg1.expectedFn(function(blah){
    ...
  }
  return res + arg2;
} 
```

我认为检查 arg1 是否存在或它包含一个函数名 expectedFn 是没有意义的。如果其中任何一个都未定义，javascript 运行时将抛出一个相当容易理解的 TypeError ，它会准确说明发生了什么；断言是多余的。

但是，您可能会发现需要在此处测试 arg2。假设它是未定义的，并且 res 是一个字符串或数字 - 然后您最终会在字符串中附加“未定义”，或者返回 NaN。两者都是相当微妙的错误，可以在没有任何人注意到的情况下存在很长时间 - 如果您希望它早点而不是晚点失败以进行调试，那么您可能需要添加一些断言以确保它是正确的类型。

一般来说，如果你关心严谨性，我相信在编写综合测试时会更好地使用精力：编写完全覆盖调用 doSomething 的情况的测试可能会导致比断言更好、更健壮的开发过程. 在少数情况下断言是合适的，但它们仅限于格式错误的结果可以存在很长时间而没有任何直接错误但仍会导致不良副作用的情况。

# visual-studio - 在 UIRef 更改后，WiX 安装程序中的主要升级无法正常工作

> ID：13199699
> 
> 赞同：0
> 
> 时间：2012-11-02T16:51:53.897
> 
> 标签：visual-studio, installation, wix

我在我的部署版本之间更改了 UIRef 标记。

从 1.0 版： `<UIRef ID="WixUI_FeatureTree" />`
到 2.0 版： `<UIRef ID="WixUI_Advanced" />`

蜡 3.6 版

现在，当我运行 2.0 版安装程序时，它不会检测到以前的版本，因此它不会在升级过程中卸载它，而是在现有版本旁边安装一个新版本。

中间版本升级正常（1.0->1.1->1.2）。

**2.0 的主要变化是：**

1.  主要功能下的新子功能
2.  将 UIRef 从 WixUI_FeatureTree 更改为 WixUI_Advanced 以允许部署从“AllUsers”和“Single User”中进行选择

**删除现有产品定义为：**

```
<InstallExecuteSequence>      
     <RemoveExistingProducts After='InstallInitialize' />

      <Custom Action=...
    ... 
```

**我的产品定义为：**

```
#UpgradeCode# is consistent between versions
#ProductId# is changed between versions

<Product Id="#ProductId"
  UpgradeCode="#UpgradeCode#"
  Name="!(loc.ApplicationName)"
  Language="1033"
  Codepage="1252"
  Version="2.0.0"
  Manufacturer="!(loc.Manufacturer)">    
     <Package 
          Id="*"
          InstallerVersion="300" 
          InstallPrivileges="elevated"      
          Languages="1033"
          Compressed="yes"
          InstallScope="perMachine"
          Manufacturer="!(loc.Manufacturer)"
          SummaryCodepage="1252"
          Platform="x86"      
          Description="!(loc.ApplicationName)"/>
           <Upgrade Id="#UpgradeCode#">
           <UpgradeVersion OnlyDetect="no" Property="PREVIOUSFOUND"
                           Minimum="1.0.0" IncludeMinimum="yes"
                           Maximum="2.0.0" IncludeMaximum="no"/>
           </Upgrade> 
```

我想知道是否可以采取措施强制安装程序检查升级并删除在我的更改后不再处理的先前版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:39:10.290

在构建日志中，我注意到：

> MSI (c) (6C:C4) [12:04:44:624]：FindRelatedProducts：当前安装是按用户进行的。产品“{PRODUCT-GUID}”的相关安装是每台机器的。跳过... 操作于 12:04:44 结束：FindRelatedProducts。返回值 1。

我已经删除：

```
 <Product ... InstallScope="perMachine" ... /> 
```

升级版本时。

我没有意识到升级匹配包括`InstallScope`产品的属性。

我仍然可以使用 为每个用户安装`<UIRef Id="WixUI_Advanced" />`，所以这个属性似乎不会影响`PerMachine`or的选择`PerUser`，所以我把它放回去了。升级现在又可以工作了。

# eclipse-rcp - 使用 tycho 物化产品会导致 .eclipseproduct 文件丢失

> ID：13199702
> 
> 赞同：3
> 
> 时间：2012-11-02T16:52:02.883
> 
> 标签：eclipse-rcp, p2, tycho

我是一名 Eclipse RCP 开发人员，正在使用[tycho-p2-director-plugin](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/editors/product_editor/configuration.htm)构建应用程序。

好消息是程序集生成并可以成功运行。坏消息是我期望生成的工件之一（`.eclipseproduct`文件）没有生成。

我试图弄清楚这个文件是怎么回事——不仅它不通过 Tycho 生成，而且当我使用 Eclipse 产品导出向导时它也不生成。 [根据我在这里找到的文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/editors/product_editor/configuration.htm)，我希望它会是。

在这一点上，我基本上想知道两件事，因为我找不到任何关于该`.eclipseproduct`文件应该来自哪里/应该在什么时候生成的好的文档。

如果它是在 tycho maven 生命周期中生成的，那么我希望在我的目标文件夹下找到该文件 - 但事实并非如此。我还没有找到一种方法让 tycho 静态包含配置文件（除了 config.ini），否则我会使用该方法将静态 .eclipseproduct 文件附加到我的安装目录的根目录。

如果这是应该由安装程序生成的东西，那么使用 p2 的机制是什么，以便您可以完成此操作？我已经考虑在我的主 P2 IU 中包含 .eclipseproduct 文件，但我不清楚该文件是否会实际复制到根目录以及如何完成。

如您所知，关于如何将这个文件包含在我的构建中，我还没有找到太多的方向。任何指向正确方向的指针都会有所帮助。如有必要，我还可以包含我的产品配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:49:51.987

这应该是一个评论，因为它只是部分答案，但它太长了。

这似乎`.eclipseproduct`是在构建时生成的文件，而不是由 p2 在配置时创建的：

为了找到这一点，我使用 p2 director 配置了 Eclipse 4.2 的副本（对于说明，我使用了[此页面的安装完整产品部分](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)，将存储库更新到[4.2 站点](http://download.eclipse.org/eclipse/updates/4.2/)而不是使用 3.6 站点，并从使用 Windows 路径更改为更适合我的mac）。

我在文件列表中注意到该`.eclipseproduct`文件似乎是一个解压缩的工件，而不是一个生成的工件，因为时间戳不同：

```
$ ls -lA
total 304
-rw-r--r--    1 myself  group      60 Sep 14 18:13 .eclipseproduct
drwxr-xr-x    3 myself  group     102 Nov  2 14:49 Eclipse.app
-rw-r--r--    1 myself  group  112366 Nov  2 14:49 artifacts.xml
... 
```

这让我浏览了`./p2`目录中的各种缓存，我发现有一个可安装单元`org.eclipse.platform_root`，它是一个包含许可和文件的 zip`.eclipseproduct`文件......

```
:p2 $ zipinfo org.eclipse.equinox.p2.core/cache/binary/org.eclipse.platform_root_*
Archive:  org.eclipse.equinox.p2.core/cache/binary/org.eclipse.platform_root_4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO   38125   5
-rw----     2.0 fat        0 bl defN 14-Sep-12 18:13 readme/
-rw----     2.0 fat   104173 bl defN 14-Sep-12 18:13 readme/readme_eclipse.html
-rw----     2.0 fat     9051 bl defN 14-Sep-12 18:13 notice.html
-rw----     2.0 fat       60 bl defN 14-Sep-12 18:13 .eclipseproduct
-rw----     2.0 fat    16536 bl defN 14-Sep-12 18:13 epl-v10.html
5 files, 129820 bytes uncompressed, 37501 bytes compressed:  71.1% 
```

我在文件中找到的 content.xml 文件中找到了 P2 IU 信息`org.eclipse.equinox.p2.repository/cache/content*.jar`：

```
...
<unit id='org.eclipse.platform_root' version='4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO'>
  <provides size='1'>
    <provided namespace='org.eclipse.equinox.p2.iu' name='org.eclipse.platform_root' version='4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO'/>
  </provides>
  <artifacts size='1'>
    <artifact classifier='binary' id='org.eclipse.platform_root' version='4.2.1.v20120814-120134-9JF7BHVGFyMveli1uX6aTH0q-eAap6PAgOP5mO'/>
  </artifacts>
  <touchpoint id='org.eclipse.equinox.p2.native' version='1.0.0'/>
  <touchpointData size='1'>
    <instructions size='2'>
      <instruction key='install'>
        unzip(source:@artifact, target:${installFolder});
      </instruction>
      <instruction key='uninstall'>
        cleanupzip(source:@artifact, target:${installFolder});
      </instruction>
    </instructions>
  </touchpointData>
</unit>
... 
```

简而言之：当安装这个 IU 时（根据 要求`org.eclipse.platform.feature.group`），p2 只需将工件解压缩`.eclipseproduct`到安装文件夹。无需转换。因此它必须在安装时间之前生成。

编辑：我也在[E​​clipse Git Repositories](http://git.eclipse.org/c/platform/eclipse.platform.releng.git/tree/features/org.eclipse.platform-feature/rootfiles/.eclipseproduct)中找到了它，但还没有弄清楚这是否是变成上述 IU 的那个......

# python - 是否应该在 Python 中为专家系统使用知识引擎？

> ID：13199703
> 
> 赞同：5
> 
> 时间：2012-11-02T16:52:03.990
> 
> 标签：python, code-reuse, expert-system, pyke

我需要用 Python 编写一个专家系统（这是我第一次这样做）。我必须实现一个依赖于渐进式用户输入的大流程图，即用户在流程图的许多点提供输入。在 python 中，我见过像 PyKE 这样的用于知识库和推理规则的系统；但是，我不明白这样的系统（类似 Prolog）是否会帮助我处理许多 GUI 窗口向用户提出许多问题的过程，或者最好手动编程。

我应该使用像 PyKE 这样的系统吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:12:36.367

如果用户通过流程图的路径纯粹基于用户输入，那么我建议在纯 python 中进行，除非您有时间和兴趣了解生产/基于规则的系统如何工作。PyKE 可以满足您的需求，但由于您是 python 新手，因此您将有效地同时学习两种语言：python 和 PyKE 声明性语言。

如果您的系统有许多其他状态变量和依赖项可能不仅仅基于用户的输入，那么您可能想要使用 PyKE 或[PyCLIPS 之](http://pyclips.sourceforge.net/)类的东西，它是[CLIPS](http://clipsrules.sourceforge.net/)专家系统 shell 的 python 包装器。

# ruby-on-rails - act_as_taggable_on 和 rails 自动完成 gem - 显示标签计数

> ID：13199708
> 
> 赞同：1
> 
> 时间：2012-11-02T16:52:12.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-autocomplete, acts-as-taggable-on

我正在使用acts_as_taggable_on gem 和 rails jquery autocomplete gem

我知道如何通过 gem 获取标签计数

我知道，为了显示除了自动完成的返回搜索结果之外的其他内容，我需要做这样的事情

```
autocomplete :tag, :name, :class_name => 'ActsAsTaggableOn::Tag', :full => true 
```

并添加另外 2 个键，它们是

```
:extra_data , :display_value 
```

额外数据将在搜索中检索更多数据（不确定此处是否需要） display_value 将从模型中调用一个方法，该方法使用自动完成进行搜索。

**问题：**

我不知道将 display_value 的方法放在哪里，应该类似于

```
def tags_with_counts
 "#{tag.name} x #{tag.count}
end 
```

因为我没有标签模型文件可以放入（因为acts_as_taggable_on 不会生成这样的文件。

但即使我确实有这样的文件，从之前的实验中，该方法也只能使用通过自动完成搜索检索到的数据，而且我没有包含标签计数的列。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:58:25.747

通过做解决了它

> ```
> class Tag < ActsAsTaggableOn::Tag
> 
>   def tagcount
>        num = ActsAsTaggableOn::Tagging.where(:tag_id => self.id).count
>        "#{Tag.find(self.id).name} x #{num}"
>   end
> 
> end 
> ```

并将“标签”类发送到 rails-autocomplete 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:41:54.153

假设您`acts_as_taggable`在其中一个模型中包含该指令，您实际上是在将其开放给属于作为可标记的模块的一系列方法和关系。话虽如此，如果您想添加一个在您的 act-as-taggable-on 模块范围内的方法，那么您只需在同一个模型中定义它。

例如：

```
class Upload < ActiveRecord::Base

  acts_as_taggable

  def tags_with_counts
   "#{tag.name} x #{tag.count}"
  end

end 
```

仅供参考，您的 tags_with_counts 方法缺少结束双引号。

# java - 从时间选择器获取时间值 - android

> ID：13199714
> 
> 赞同：0
> 
> 时间：2012-11-02T16:52:38.017
> 
> 标签：java, android, sqlite, android-widget

网上似乎有很多不同的信息，关于如何准确地利用用户在时间选择器上输入的时间并用它做一些事情。我想占用用户输入时间，将其保存到变量并写入 SQLite 数据库。我不知道如何将 TimePicker 值转换为可以传递给 SQL 数据库的变量，该数据库将存储在时间戳字段中。如果这不一定是最好的方法，我愿意接受其他建议。谢谢！

到目前为止，这是我的代码：

XML:

```
<RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp" >

    <TimePicker android:id="@+id/tpTimeStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp" />

    <Button android:id="@+id/btnUpdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Update" />

</RelativeLayout> 
```

爪哇：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TimePicker;
import android.widget.Button;
import android.text.format.Time;
import android.view.View;

public class AddModule extends Activity {

    TimePicker tp1;
    Button bUpdate;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.add_module);
        bUpdate = (Button) findViewById(R.id.btnUpdate);

        bUpdate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        tp1 = (TimePicker)findViewById(R.id.tpTimeStart);
        Time timestart = tp1.getCurrentHour(), tp1.getCurrentMinute();
        }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:32:59.800

有很多方法可以做到这一点，但这一切都取决于还要使用它 SQLite 似乎使用 HH:MM:SS.SSS

您可以一起使用 GregorianCalendar 和 SimpleDateFormat ，或者您应该以艰难的方式来手动制作字符串。

# php - 更新特定的会话变量

> ID：13199715
> 
> 赞同：0
> 
> 时间：2012-11-02T16:52:40.327
> 
> 标签：php, arrays, session, variables

我正在使用此代码输出所有注册的会话变量 -

```
 echo "<pre>";
 print_r($_SESSION);
 echo "</pre>";
 exit(); 
```

这就是我得到的

```
Array
 (
[language] => english
[navigation] => navigationHistory Object
    (
        [path] => Array
            (
                [0] => Array
                    (
                        [get] => Array
                            (
                            )

                        [post] => Array
                            (
                            )

                    )

                [1] => Array
                    (

                        [get] => Array
                            (
                            )

                        [post] => Array
                            (

                                [number] => XXXXXXXXXXXX
                                [x] => 62

                            )
                )

            )

        )
 ) 
```

我想将 [1] 数组中的**数字**变量从 XXXXXXXX... 更新为 555555。我试过了

```
$_SESSION['number'] = "55555555555555"; 
```

但这只是最终**在数组外部创建了一个名为 number**的新会话变量，其值为 555.. 并且没有更新正确的变量。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:54:06.033

它是一个嵌套数组/对象，因此您必须向下遍历到要设置的数组变量：

```
$_SESSION['navigation']->path[1]['post']['number'] = "55555555555555"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:55:34.717

尝试这个：

```
$_SESSION['navigation']->path[1]['post']['number']=123; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:08:20.220

我自己经常对此感到困惑，我需要一点时间才能弄清楚这些非常长的家伙。您自己弄清楚这些东西的一个非常简单的方法是执行以下操作：在您的代码末尾，您有一个 print_r：

```
print_r($_SESSION); 
```

猜测层次结构中的下一层是什么：

```
print_r($_SESSION['navigation']) 
```

运行它，如果出现错误，请尝试其他方法。如果可行，您应该会看到那个人的照片，并且您正在“接近”您的价值。一旦看起来不错，就添加另一个属性：

```
print_r($_SESSION['navigation']->path); 
```

那样有用吗？好的，继续。一直这样做，直到你得到你想要的。

# ruby-on-rails - 从手动拉服务器到 Capistrano

> ID：13199716
> 
> 赞同：1
> 
> 时间：2012-11-02T16:52:42.657
> 
> 标签：ruby-on-rails, capistrano

我一直通过 SSH 通过手动登录和运行`git pull origin master`、运行迁移和预编译资产来部署我的应用程序。

现在我开始对 Capistrano 更感兴趣，所以我试了一下，我设置了一个配方，存储库指向 github`deploy_to`和`/home/myusername/apps/greatapp`

服务器上的当前应用程序也已经与 Git 连接，所以我不知道为什么我必须再次在配方中指定 github url，但我运行`cap deploy`它是成功的。

更改不适用，所以出于好奇，我浏览到服务器上的 app 文件夹，发现 Capistrano 创建了文件夹`shared`：`releases`和`current`. 后者包含应用程序，所以现在我有 2 个副本，一个在`/home/myusername/apps/greatapp`，另一个在`/home/myusername/apps/greatapp/current`.

1.  这是应该的吗？我必须将用户上传的内容迁移到`current`旧应用程序并销毁？

2.  Capistrano 是否在我的本地主机上拉取 repo，然后通过 SSH 上传或`pull`在服务器上运行？换句话说，有人可以概述部署的工作原理吗？

3.  Capistrano 运行`precompile:assets`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:00:27.633

/releases/ 用于以前的版本，以防你想做 cap:rollback。/current/ 正如您正确指出的那样，适用于您的应用程序的当前版本。/shared/ 用于您希望在部署之间保留的文件和文件夹，它们通常会符号链接到您的 /current/ 文件夹作为配方的一部分。

Capistrano 在 shell 中连接到您的服务器，然后在服务器上执行 git 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:22:49.157

1.  Capistrano 应该自动将任何内容`public/system`（存储的用户上传文件的 rails 约定）放入共享目录，并设置必要的符号链接。
2.  如果您输入 github url，它实际上是从您的 github 存储库中获取的。阅读[https://help.github.com/articles/deploying-with-capistrano](https://help.github.com/articles/deploying-with-capistrano)了解更多信息。
3.  默认情况下确实如此。

# spring - 以编程方式更改属性值

> ID：13199722
> 
> 赞同：0
> 
> 时间：2012-11-02T16:53:16.700
> 
> 标签：spring, spring-mvc

```
 <beans:bean id="loginUrlAuthenticationEntryPoint"
            class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <beans:property name="loginFormUrl" value="/session-timeout-1.do" />
 </beans:bean/> 
```

对于不同类型的用户，我有 2 个不同的会话超时页面。用户登录后，检查用户类型后，可能需要将属性值从“/session-timeout-1.do”更改为“/session-timeout-2.do”。

我想知道是否有可以在运行时更改属性值的 API？

或者是否可以在配置文件中有一个变量，例如

```
<beans:property name="loginFormUrl" value="${time-out-url}"> 
```

在哪里可以以编程方式设置变量“time-out-url”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:14:06.673

您可以子类化`LoginUrlAuthenticationEntryPoint`该类并提供您自己的逻辑。

在此处查看类源：http: [//git.springsource.org/spring-security/rwinchs-spring-security/blobs/2d271666a406a4409def9afcd73ea340c40a7a88/web/src/main/java/org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint。爪哇](http://git.springsource.org/spring-security/rwinchs-spring-security/blobs/2d271666a406a4409def9afcd73ea340c40a7a88/web/src/main/java/org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint.java)

具体方法：

```
determineUrlToUseForThisRequest 
```

其中“允许子类修改应该适用于给定请求的登录表单 URL”。

# jquery - Zebra Datepicker 和 Spry 验证 - Datepicker 图标位置未在表单提交时更新

> ID：13199724
> 
> 赞同：2
> 
> 时间：2012-11-02T16:53:19.813
> 
> 标签：jquery, datepicker

所以，我正在使用来自 Stefan Gabos 的 Zebra DatePicker 插件，它是一个很棒的插件，我发现它与 Spry Validation 不兼容 - 我知道，Spry Validation 有它的问题，但是，我就是这样用来让它工作。

所以，发生的事情是，当表单提交时，验证在没有任何值的情况下执行，由于错误消息，它会使表单崩溃。没问题。问题在于 DatePicker 图标未根据父元素或文本字段更新其位置。该插件的作者建议调用 datepicker.update() ，它在实施时不会产生任何结果。

这是我的js代码：

```
$(document).ready(function() {
$('input.datepicker').Zebra_DatePicker({
    format: 'M d, Y',                                      
    direction: true,
    disabled_dates: ['* * * 0,3,6']

});

    }); 
```

这是html：

```
<input name="specific_date" type="text" class="datepicker" /> 
```

任何帮助将不胜感激 - 我确信这是一个简单的解决方案，但对于我的生活，我可以找到任何有用或有帮助的东西。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T13:47:58.943

另一种解决方案是隐藏图标：

```
$(document).ready(function() {
 $('#datepicker').Zebra_DatePicker({"show_icon" : false});
}); 
```

然后，您可以使用 CSS 来恢复它（即重新实现图标而不使用 Zebra Datepicker），这样就完全不需要更新它的位置了。

```
#datepicker{ 
 background-image: url('zebra_datepicker/calendar.png'); 
 background-position:98% 50%; 
 background-repeat:no-repeat; 
 cursor: pointer; 
} 
```

对我来说，这似乎首先是更简单的设计（我不知道为什么 Zebra Datepicker 图标通常通过 JavaScript 定位的设计原理）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T12:19:06.067

Zebra Datepicker 文档中描述的**[更新方法](http://stefangabos.ro/jquery/zebra-datepicker/)**似乎是正确的起点。你试过什么了？您应该将其绑定到要触发图标重新定位的任何事件。例如，这将在调整浏览器窗口大小时更新图标位置：

```
$(window).resize(function () {
  var datepicker = $('#datepicker').data('Zebra_DatePicker');
  datepicker.update();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T16:04:07.350

我发现 zebra datepicker 有一个很棒的用户界面，但是我在输入框中的日历图标定位方面遇到了问题，尤其是在调整页面大小时。这是我的解决方案

**html:**

```
<div class='dob'>Date of Birth:</div><input type='text' id='hdob' value='' /><span class="dicon"></span> 
```

**javascript/jquery：**

```
$('#hdob').Zebra_DatePicker({"show_icon":false}); //plus any other parameters you need
$('.dicon').on('click', function(){$(this).prev().trigger('click'); }); 
```

**CSS：**

```
.dicon{
background: url(/img/cal.png) no-repeat;
    background-size: cover;
    cursor: pointer;
    display: inline-block;
    float: left;
    margin-left: -2.8vmin;
    margin-top: 1vmin;
    min-height: 2.2vmin;
    min-width: 2.2vmin;
}
.dob {
display:inline-block;
 margin-right:0.6%
 min-height:2.6vmin;
 overflow: hidden;
 text-align:right;
 text-overflow: ellipsis;
 white-space: nowrap;
} 
```

cal.png 图像为 32x32 像素，输入文本可根据需要调整大小

# asp.net - 使用父网站登录子网站：最佳实践？

> ID：13199726
> 
> 赞同：2
> 
> 时间：2012-11-02T16:53:19.820
> 
> 标签：asp.net, html, login, webforms

我们已经有一个登录的主站点。我们想使用主站点登录从主站点打开一个子站点。

在网络世界中，以非常安全的方式传递登录详细信息的最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:13:41.043

我不知道这是否是最佳实践，但当我不得不为两个内部网站做类似的事情时，我只是通过访问令牌来做。

因此，用户将单击主站点上的链接，该链接将在表中创建一个数据库记录，其中至少包含他们的用户名、到期日期和 GUID。

然后我们使用类似的东西将它们重定向到子站点`http://childsite.aspx?token=GUID`

子站点查找 GUID（如果查询字符串存在），验证它是否有效/未过期，如果有效，则设置该用户名的授权并从数据库中删除记录。

除了 GUID 之外，什么都不会传递。用过一次就没用了，只能由已经认证的用户创建。

如果站点访问公共数据库，则此方法有效。我假设他们这样做了，因为您的问题暗示主站点的登录凭据在子站点上也是有效的。

# cocoa - 来自 auval 工具的内存泄漏错误消息

> ID：13199727
> 
> 赞同：0
> 
> 时间：2012-11-02T16:53:28.440
> 
> 标签：cocoa, osx-lion, audiounit

我正在验证 auval 中的音频单元（苹果的 audiounitvalidationtool），它返回：

```
--------------------------------------------------
AU VALIDATION SUCCEEDED.
-------------------------------------------------- 
```

但我得到了泄漏，我不明白如何解决这个问题。谁能如此友好地向我解释什么可能导致这样的输出以及修复的样子？

> 验证自定义 UI objc [27641]：__NSCFString 类的对象 0x7ffc12937aa0 自动释放，没有适当的池 - 只是泄漏 - 中断 objc_autoreleaseNoPool() 以调试 Cocoa 视图可用：1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:33:27.417

我怀疑您没有为您的 AU 正确设置自动释放池。有关更多信息，请查看这些 SO 问题：

*   [NSCFString 自动释放，没有适当的池 - 只是泄漏？](https://stackoverflow.com/questions/5696472/nscfstring-autoreleased-with-no-pool-in-place-just-leaking)
*   [“NSCFString 类的对象 0x84be00 自动释放，没有适当的池 - 只是泄漏” - 但在应用程序的第一行！](https://stackoverflow.com/questions/5373112/object-0x84be00-of-class-nscfstring-autoreleased-with-no-pool-in-place-just-l)
*   [带有 _NSAutoreleaseNoPool 错误的 NSThread](https://stackoverflow.com/questions/249022/nsthread-with-nsautoreleasenopool-error)
*   [performSelectorInBackground 给出“autoreleased with no pool in place”错误](https://stackoverflow.com/questions/8631585/performselectorinbackground-gives-autoreleased-with-no-pool-in-place-error)

# c# - 如何在 C# 中解决这个时隙问题

> ID：13199729
> 
> 赞同：6
> 
> 时间：2012-11-02T16:53:32.330
> 
> 标签：c#, asp.net

我正在尝试解决这个业务问题：

*   用户每 5 分钟尝试登录 10 次
*   如果用户尝试超过 10 次，我会显示“您需要等待登录”消息
*   一旦 5 分钟过去了，我需要重置尝试次数并让用户再尝试 10 次。

我想在不使用 a 的情况下执行此操作，`Timer`并且我将大部分信息存储在`Session`

```
public class LoginExp
{
  public DateTime FirstAttempt;
  public int NumOfAttempts;
} 
```

我将`FirstAttempt`日期时间存储在页面加载上。

在登录按钮上单击：

*   我增加`NumOfAttempts`
*   我需要检查 NumOfAttempts***在***同一 5 分钟时间段内是否 < 10。我可以得到和之间经过的分钟数，`FirstAttempt`然后`DateTime.Now`做一个 5 的 mod，但这不会告诉我这是在哪个时间段（换句话说，用户可能在第 2 分钟尝试了 3 次然后回来在第 7 分钟再次尝试。这`mod`会给我相同的价值。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:55:40.460

请不要使用计时器。为这些数据与用户数据腾出空间，以便持久化，存储某种形式的凭据。只需保留上次登录尝试时间和尝试次数 - 如果时间大于*n*，则下一次尝试将清除先前的计数并从 0 开始，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:02:35.620

您可以存储尝试时间戳列表并使用它来确定用户是否被锁定。这不是完整的代码，但这是基本思想：

```
// Store a list of attempts
var attempts = new List<DateTime>();

// Determine if 10 or more attempts have been made in the last 5 minutes
bool lockout = attempts.Where(a => (DateTime.Now - a).TotalMinutes <= 5).Count() >= 10;

// Register an attempt
attempts.Add(DateTime.Now);

// Remove attempts older than 5 minutes
attempts.Where(a => (DateTime.Now - a).TotalMinutes > 5).ToList()
    .ForEach(a => attempts.Remove(a)); 
```

您还可以将尝试存储在数据库中，这将为您提供用于安全目的的记录。同样的方法也适用——计算不到 5 分钟的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:16:51.040

答案取决于您如何解释需求​​。也就是说，5 分钟的时间框架是一个滑动尺度吗？

该要求的严格应用将要求您为登录尝试创建一个数据库表，其中每条记录都包括用户记录的密钥和登录尝试的时间戳。然后对于每次尝试，执行一个查询，如

```
delete from login_attempts where user=[user] and attempt_time<[now - 5 minutes]
select count(*) from login_attempts where user=[user] 
```

（括号中的值被替换为合适的值，无论您使用准备好的语句还是其他）

然后，如果返回的计数 > 10，则阻止该尝试。

（我建议每次都删除旧的尝试以保持表格清洁。当然，可以使用其他方法。）

如果不需要那么严格地应用要求并且您不想创建新表，则可以通过例如将上次尝试时间和计数添加到用户记录来简化它。然后在每次尝试时（这里是伪代码......）：

```
read last_attempt and attempt_count
if last_attempt < now - 5 minutes then
  attempt_count=0
endif
if attempt_count>10 then
  display error
else if attempt_fails then
  last_attempt=now
  attempt_count=attempt_count+1
endif 
```

这并不严格满足规定的要求：如果用户每 4 分钟尝试一次，那么 40 分钟后我们会说他有 10 次错误尝试，而实际上除了其中一次之外，所有尝试都超过 5 分钟。但它会比创建一个新表更简单，并且会实现我认为的目标，阻止某人通过暴力破解密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:12:29.233

要实现滑动 5 分钟窗口，您需要知道每次尝试的时间，而不仅仅是第一次或最后一次。

每次登录尝试都存储在数据库中。正如评论中提到的，仅使用会话缓存很容易绕过。

```
username     | time
mr.mindor    | 00:00:00
mr.mindor    | 00:01:00 
```

等等，然后对于每次登录尝试检查是否有 10 次或更少的尝试...

```
Select count(*) 
from LOGIN_ATTEMPTS 
  where username = @current_user 
  AND time > DATEADD(m,-5,GetDate()) 
```

您可以出于安全/审计目的无限期保留 LOGIN_ATTEMPTS，也可以定期清除它，或者在成功登录的情况下。

**仅存储第一次或最后一次和计数的问题。**
如果没有每次，您将无法确定尝试的分布。

**基于首次尝试的解决方案：**

仅使用第一次尝试时间和计数，您可以在接下来的 5 分钟内阻止超过 10 次尝试，但在任何给定的 5 分钟间隔内不能阻止超过 10 次尝试。
示例：您可以在 0:00 获得 1 个，在 4:59 获得 9 个，并在 5:01 允许 10 个在几秒钟内获得 19 个。

```
attempt_time | record
0:00         | {0:00, 1}
4:59         | {0:00, 2}
4:59         | {0:00, 3}
4:59         | {0:00, 4}
4:59         | {0:00, 5}
4:59         | {0:00, 6}
4:59         | {0:00, 7}
4:59         | {0:00, 8}
4:59         | {0:00, 9}
4:59         | {0:00, 10}  
5:01         | {5:00, 1}  // 10 since 4:59
5:02         | {5:00, 2}  // 11 since 4:59 
```

**基于最后一次尝试的解决方案：**
只保存最后一次尝试时间和一个计数，您可以在任何 5 分钟间隔内防止超过 10 次尝试，但实际上限制性更大。它会阻止超过 10 次尝试，每次尝试都在前一次尝试的 5 分钟内。
示例：如果每 4 分钟尝试一次，您的计数器将永远不会重置。

```
attempt_time | record
0:00         | {0:00, 1}
4:00         | {4:00, 2}  // 2 in last 5 minutes
8:00         | {8:00, 3}  // 2 in last 5 minutes
...
40:00        | {40:00,11} // blocked but only 2 in last 5 minutes. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T17:13:30.033

计时器在这里很丑。只需保留某种尝试表即可。存储 UserId、尝试时间和成功/失败标志。

从那里逻辑是不言自明的。

# php - 注册用户脚本不验证密码

> ID：13199743
> 
> 赞同：0
> 
> 时间：2012-11-02T16:53:58.393
> 
> 标签：php, mysql

好的，我的用户注册脚本有一点问题，由于某种原因，它没有检查表单字段 pass1 和 pass2 是否相同，尽管它在代码中，有什么想法吗？我将把注册码完整地放在下面供您查看。我对 PHP 很陌生，所以任何建议都将不胜感激，感谢您的帮助。:-)

注册脚本。

```
<?php
ob_start(); // Start output buffering

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

session_start();
//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: ../index.php');

    die();
}

?>
<?php require_once('../Connections/PropSuite.php'); ?>

<?php

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$colname_user = "-1";
if (isset($_SESSION['username'])) {
  $colname_user = $_SESSION['username'];
}
mysql_select_db($database_Takeaway, $Takeaway);
$query_user = sprintf("SELECT type FROM admin_users WHERE username = %s", GetSQLValueString($colname_user, "text"));
$user = mysql_query($query_user, $Takeaway) or die(mysql_error());
$row_user = mysql_fetch_assoc($user);
$totalRows_user = mysql_num_rows($user);

  // Username available.

//form begins
 $user_type = $row_user['type'];

    if ($user_type === 'admin-full') 
    {
//retrieve our data from POST
$name = $_POST['name'];
$username = $_POST['username'];
$email = $_POST['email'];
$pass1 = $_POST['pass1'];
$pass2 = $_POST['pass2'];
if($pass1 != $pass2)
    header('Location: register-admin.php?pw=notmatched');
if(strlen($username) > 30)
    header('Location: register-admin.php?username=toolong');
if(strlen($name) > 40)
    header('Location: register-admin.php?name=toolong');

$hash = hash('sha256', $pass1);

//creates a 3 character sequence
function createSalt()
{
    $string = md5(uniqid(rand(), true));
    return substr($string, 0, 3);
}
$salt = createSalt();
$hash = hash('sha256', $salt . $hash);

mysql_select_db($database_Takeaway, $Takeaway);
//sanitize username
$username = mysql_real_escape_string($username);

$q = "SELECT id, username FROM admin_users WHERE username = '$username'";
$results = @mysql_query($q);
if(mysql_num_rows($results) > 0)
{
  // Username exists.
 header('Location: register-admin.php?username-taken');
}
else
{

$query = "INSERT INTO admin_users ( type, email, name, username, password, salt )
        VALUES ( 'admin-full', '$email', '$name', '$username' , '$hash' , '$salt' );";
mysql_query($query);
mysql_close();
header('Location: ../main?NewUserAdded');
}

mysql_free_result($user);
    } 
    else {
?>
You are not authorised to do that!
<?php } ?> 
```

更新

表格代码是

```
<form name="register" action="register-admin1.php" method="post">
     <?php if (isset($_REQUEST["username-taken"])) { ?>
        <p style="color: #F00">Username already exists! please try again</p>
        <?php } ?>
        <?php if (isset($_REQUEST["pw=notmatched"])) { ?>
        <p style="color: #F00">Username already exists! please try again</p>
        <?php } ?>
     <p>Register New Admin User<br />
       (Note! Admin users are top level and will have access to everything!)
       <br />
     </p>
       <p>Name:
         <input name="name" type="text" id="name" maxlength="30" />
       </p>
       <p>Email:
         <input name="email" type="text" id="email" maxlength="30" />
       </p>
       <p>Username:
         <input type="text" name="username" maxlength="30" />
       </p>
       <p>
         Password:
           <input type="password" name="pass1" />
       </p>
       <p>Password Again:
         <input type="password" name="pass2" />
     </p>
       <p>
         <input type="submit" value="Register" />
       </p>
     </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:57:23.027

放一个`die();`之后，`header('Location: register-admin.php?pw=notmatched');`因为脚本将继续执行，并设置您拥有的任何其他标头。

像这样：

```
if($pass1 != $pass2) {
    header('Location: register-admin.php?pw=notmatched');
    die();
}
if(strlen($username) > 30) {
    header('Location: register-admin.php?username=toolong');
    die();
}
if(strlen($name) > 40) {
    header('Location: register-admin.php?name=toolong');
    die();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:00:53.553

您似乎期望用户名值在您查询数据库以获取有关用户的信息时处于会话状态。如果您只是将其发布为表单，我不明白用户名在会话中的情况。你的条件

```
if ($user_type === 'admin-full') 
```

似乎它永远不会评估为 true，因为您尚未将用户名从 post 数组中拉出并对其进行评估。

请注意，您还应该使用`mysqli`or`PDO`代替`mysql_*`函数，因为这些在 PHP 中已被弃用。

# ruby - Ruby 应用程序部署符号链接目标位置？

> ID：13199745
> 
> 赞同：1
> 
> 时间：2012-11-02T16:54:02.210
> 
> 标签：ruby, deployment, capistrano, symlink

我正在尝试在 Site5 共享主机上使用 Capistrano 部署一个非常简单的 ruby​​（不是 rails）应用程序，到目前为止，我的 cap deploy:setup 和 cap deploy 命令已经成功，所以一切都部署在 public_html 屏幕后面（我假设） - 所以现在我需要一个指向相关文件夹的符号链接。我知道这是已部署的 rails 应用程序的公用文件夹，但部署的 ruby​​ 应用程序的目标是什么？

非常感谢，贝基

# django - django ORM 在使用分页器时返回 SQL 语法异常

> ID：13199749
> 
> 赞同：0
> 
> 时间：2012-11-02T16:54:14.413
> 
> 标签：django, django-orm

这是一个非常奇怪的问题，我一直在研究一个使用 extra 的复杂查询，它运行良好。当我正常使用查询集时，它可以工作，我可以列出模板中的对象一切都可以。

但是，当我应用分页器时，它给了我一个错误。经过几个小时的调试，我尝试为我的查询添加一个打印语句，令人惊讶的是它起作用了。下面是我的代码

```
 queryset=get_model('vehicle', 'car').objects.my_cars(language=request.LANGUAGE_CODE, user=request.user)
    paginator = Paginator(
        queryset,
        10
    )

    page = request.GET.get('page')
    try:
        print getattr(queryset, 'query')
        cars = paginator.page(page)
    except PageNotAnInteger:
        cars = paginator.page(1)
    except EmptyPage:
        cars = paginator.page(paginator.num_pages)

    return render_to_response(
        'accounts/profile/my_vehicle.html',
            {
                'my_cars' : cars.object_list,
            },
        RequestContext(request)
    ) 
```

在我删除语句 print queryset.query 的那一刻，它给出了一个 mysql 语法错误。如果我保留它，它会通过。有没有人经历过这样的事情？

编辑：

错误如下

```
DatabaseError at /en/account/profile/my-vehicles/

(1054, "Unknown column 'vehicle_modellookup.id' in 'where clause'") 
```

# oracle - 从原始数字转换为 IPV4 或 IPV6

> ID：13199751
> 
> 赞同：0
> 
> 时间：2012-11-02T16:54:22.330
> 
> 标签：oracle, plsql

将原始数字转换为 IPV4 或 IPV6 的 Oracle 函数的任何来源？

```
CREATE or replace FUNCTION inttoip(ip_address IN INTEGER) RETURN VARCHAR2 IS
v8 varchar2(8);
ip_str varchar2(16) default null;
BEGIN
if ip_address is not null then
-- 1\. convert the integer into hexadecimal representation
v8 := LPAD(TO_CHAR(ip_address, 'FMXXXXXXXX'),8,'0');
-- 2\. convert each XX portion back into decimal
ip_str := to_number(substr(v8,1,2),'XX')
|| '.' || to_number(substr(v8,3,2),'XX')
|| '.' || to_number(substr(v8,5,2),'XX')
|| '.' || to_number(substr(v8,7,2),'XX');
end if;
return ip_str;
END inttoip; 
```

# javascript - TypeScript 可以与 PhoneGap（或类似的）一起使用吗？

> ID：13199755
> 
> 赞同：14
> 
> 时间：2012-11-02T16:54:26.653
> 
> 标签：javascript, html, cordova, typescript

所以我刚刚了解了 TypeScript - 哇！我很高兴我终于可以加入 HTML5 派对了。我的面向对象大脑与 JavaScript 不兼容......

然而，我立即想知道 TypeScript 是否真的可以帮助像我这样的人。当然，我可以使用带有接口和类的漂亮 C# 样式语法编写与 JavaScript 兼容的软件，但它实际上可以用于浏览器应用程序以外的任何东西吗？

我要问的是，可以使用 TypeScript 生成的 JavaScript 库来创建跨平台移动应用程序，比如使用 PhoneGap（或类似框架）吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T16:56:27.213

当然。

Typescript 生成 100% 普通的 Javascript；你可以在任何地方使用它的输出。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-17T08:40:38.310

您可以从这里获取 PhoneGap 的类型定义文件：

[https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)

或在这里：

[https://github.com/intellifactory/TypedPhoneGap](https://github.com/intellifactory/TypedPhoneGap)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T22:28:13.663

目前对于PhoneGap 绑定的DefiniteTyped 是一个好的开始。我刚刚开始了一个项目来进一步提高绑定的质量（最终可能会合并到DefinitelyTyped中）：

1.  [https://bitbucket.org/IntelliFactory/typedphonegap](https://bitbucket.org/IntelliFactory/typedphonegap)
2.  [https://github.com/intellifactory/TypedPhoneGap](https://github.com/intellifactory/TypedPhoneGap)

# python - 尝试在 Python 中非常具体地对列表进行排序

> ID：13199759
> 
> 赞同：0
> 
> 时间：2012-11-02T16:54:53.193
> 
> 标签：python, list, sorting

我有一个列表，它本身包含 52 个单独的列表。在这些列表中是一个字母和一个数字。我需要对这个列表进行数字排序，以便数字最大的列表位于列表的开头，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:58:14.357

假设整数是内部列表中的第二个元素：

```
sorted(your_list, key=lambda x: x[1], reverse=True) 
```

这将返回原始列表的排序版本，如果您想就地执行，可以使用以下命令：

```
your_list.sort(key=lambda x: x[1], reverse=True) 
```

请注意`reverse=True`，您可以使用 use代替 pass `lambda x: -x[1]`，但我个人认为使用`reverse`参数更清楚一点。

[`key=operator.itemgetter(1)`](http://docs.python.org/2/library/operator.html#operator.itemgetter)如果您不想使用，也可以使用`lambda`.

# android - 使用 Jsoup 取消引用 URI 时应用程序崩溃

> ID：13199767
> 
> 赞同：0
> 
> 时间：2012-11-02T16:55:11.473
> 
> 标签：android, crash, jsoup

经过多次尝试，我决定再次问这个问题。在[我的最后一个问题](https://stackoverflow.com/questions/13196126/reading-data-from-a-website-with-http-get-and-regular-expression)中，有人说我应该看看 Jsoup。我写了一些代码，但它不会工作。这是一个安卓应用程序。但它完全崩溃了。带有错误消息：

> 不幸的是，（appname）已停止

查看[完整的错误消息](http://pastebin.com/uMN2xa8w)

我从 <div> 中提取文本的代码：

```
 public void ButtonClick(View view) throws IOException {
    Document doc = dereference("here is my url");
    String text = extractContent(doc);
    updateUI(text);
}

private Document dereference(String uri) {
    Connection connection = Jsoup.connect(uri);
    return connection.get();
}

private String extractContent(Document doc) {
    Elements divs = doc.select("div.onlinestatus");
    return divs.text();
}

private void updateUI(String text) {
    TextView tv = (TextView)findViewById(R.id.textView1);
    tv.setText(text);
} 
```

来自网址的输入：

```
<html><!-- [...] --><body>
    <div class='onlinestatus'>Server ist online! <br /></div>
</body></html> 
```

有人能发现错误吗？

**编辑：**当我在一个单独的线程中执行所有这些操作时，我得到一个不同的错误。错误日志和代码可以在[这里](http://pastebin.com/PbTvMHsW)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:13:14.973

**毕竟这不是一个 Jsoup 问题。**

如果您从错误日志（第一行）中查找错误

> NetworkOnMainThreadException

谷歌搜索“ [android NetworkOnMainThreadException ”](https://www.google.com/search?q=android%20NetworkOnMainThreadException)[从android开发者参考](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)中得到一个页面，其中指出

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

这将解释您之前尝试将代码移动到单独的线程中，这似乎会产生不同的结果。
查看 android 开发者参考中建议的[页面](http://developer.android.com/guide/practices/responsiveness.html)，关于响应性设计。**那应该会给你一个答案。**

下一件可能失败的事情是，您需要在创建 UI 的线程中进行所有 UI 更改。[你在这里](http://pastebin.com/PbTvMHsW)得到的 CalledFromWrongThreadException告诉你到底出了什么问题。查找该错误将引导您找到与[此类](https://stackoverflow.com/questions/5928755/called-from-wrong-thread-exception/5928808#5928808)似的问题+答案。

如果您对此有疑问，我建议您提出一个新问题，如果 StackOverflow 尚未涵盖您的问题（但我相信它是！）

# c# - 如何将 System.Collections.Generic 3.5 添加到 Asp.net 2.0？

> ID：13199775
> 
> 赞同：0
> 
> 时间：2012-11-02T16:55:33.407
> 
> 标签：c#, .net

我正在向现有的 Asp.net 2.0 应用程序添加功能。我想使用一些 .net 3.5 功能，所以我将一些 .net 3.5 程序集添加到我的 Web 配置中。我添加了 System.Core 和 System.Xml.Linq。

我想使用 IEnumerable 3.5 版，我需要将什么库添加到 Web 配置中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:38:00.490

您可以像这样添加参考程序集：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <compilation>
            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            </assemblies>
        </compilation>
    </system.web>
    <system.codedom>
        <compilers>
            <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider,System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="WarnAsError" value="false"/>
            </compiler>
        </compilers>
    </system.codedom>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:22:25.870

因为，在您的评论中，您提到您正在尝试使用 SequenceEqual，所以您的问题是使用`System.Linq.Eumerable`该类之一。此类将大部分（如果不是全部）Linq to Objects 定义为`IEnumerable`and`IEnumerable<T>`类型的大量扩展方法。

该类在 System.Core.dll 程序集中定义（参见[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)以供参考）。

您说您已经添加了 System.Core 引用，所以我想您可能没有`using System.Linq;`在文件顶部添加。

此外，扩展方法在 2.0 版中还没有添加到 C# 中，因此如果您使用的是 2.0 编译器，则必须将该方法作为静态方法调用。代替

```
sequenceA.SequenceEqual(sequenceB) 
```

你必须使用

```
Enumerable.SequenceEqual(sequenceA, sequenceB) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:25:54.570

您需要在运行的机器上安装 .net 3.5 SP1，至少需要使用 Visual Studio 2008，并且需要进入项目属性并将目标框架设置为 3.5。

如果您仍在使用 Visual Studio 2005，可能有一些技巧可以从 .net 3.5 调用编译器，但它并不是很漂亮，也没有得到很好的支持。

`using System.Linq;`此外，如果您使用内联脚本块，请确保您的 .cs 文件中有一条语句，或者 .aspx 文件中有一条等效语句。`SequenceEquals`是IEnumerable 类的[扩展方法。](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

# c - 如何在机器级别或内存级别在编译器中实现变量范围

> ID：13199778
> 
> 赞同：8
> 
> 时间：2012-11-02T16:55:52.880
> 
> 标签：c, scope

编译器如何实现变量的范围？我的意思是，当我们说静态变量时，范围仅限于在定义静态变量的同一文件中定义的块或函数？这是如何在机器级别或内存级别实现的？

这个限制实际上是如何实现的？

在程序运行时如何解决这个范围？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T17:03:58.150

在机器级别根本无法实现。编译器在实际生成机器代码之前检查范围。C 的规则是由编译器实现的，而不是由机器实现的。编译器必须检查这些规则，机器不会也不能。

关于编译器如何检查的一个非常简单的解释：

每当引入范围时，编译器都会给它一个名称并将其放入一个结构（树）中，这样可以轻松确定该范围相对于其他范围的位置，并将其标记为当前范围。声明变量时，将其分配给当前范围。访问变量时，会在当前范围内查找。如果未找到，则查找树以查找当前树之上的范围。这一直持续到我们到达最高范围。如果仍然没有找到变量，那么我们就有了范围冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:59:09.370

在编译器内部，定义了它的实现。例如，如果我正在编写编译器，我会使用树来定义“范围”，它肯定是二叉树中的符号表。

有些人会使用任意深度的哈希表。它的所有实现都定义了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:13:08.150

我不是 100% 确定我理解你在问什么，但如果你的意思是“静态变量和函数如何存储在最终程序中”，那是实现定义的。

也就是说，存储此类变量和函数的常用方法与任何其他全局符号（以及一些非全局符号）位于相同的位置——不同之处在于这些不是“导出”的，因此在任何外部都不可见代码试图链接到我们的软件。

换句话说，一个包含以下内容的程序：

```
int var;
static int svar;
int func() { static int func_static; ... }
static int sfunc() { ... } 
```

...在内存中可能有以下布局（假设我们的数据从 开始，`0xF000`函数在`0xFF00`）：

```
0xF000: var
0xF004: svar
0xF008: func.func_static
...
0xFF00: func's data
0xFF40: sfunc's data /* assuming we needed 0x40 bytes for `func`! */ 
```

但是，导出列表将仅包含非静态符号，也就是导出的符号：

```
var   v 0xF000
func  f 0xFF00 
```

再次——注意，虽然静态数据仍被写入文件（它必须存储在某个地方！），但它不会被导出；通俗地说，我们的程序不会告诉任何人它包含`svar`,`sfunc`和类似的。

`nm`在 Unices 中，您可以使用该工具列出库或程序导出的符号： [http](http://unixhelp.ed.ac.uk/CGI/man-cgi?nm) ://unixhelp.ed.ac.uk/CGI/man-cgi?nm ；确实存在适用于 Windows 的类似工具（GnuWin32 可能有类似的东西）。

在实践中，可执行代码通常与数据分开存储（例如，这样可以防止写入），并且它们都可以重新排序以最大限度地减少内存使用和缓存未命中，但想法保持不变。

当然，可以应用优化——例如，可以在每次调用中内联静态函数，这意味着根本不会为函数本身生成任何代码，因此它不会在任何地方单独存在。

# iphone - 在标签栏控制器中制作几乎相似的标签的最佳方法

> ID：13199779
> 
> 赞同：0
> 
> 时间：2012-11-02T16:55:54.797
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

我有一个选项卡栏作为根视图控制器，每个选项卡都是一个导航控制器，以详细视图控制器为根。

我需要几个具有几乎相同逻辑但属性值不同的选项卡。我认为最好的方法是使用相同的 vc 并在 init 方法中设置属性。就像是：

```
[[MyViewController alloc] initWithStyle:MyCustomStyle] 
```

但我看不到在哪里调用这个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:14:50.473

我假设您正在使用 nib 或情节提要创建 UI。如果是这样，是的，`UIViewController`不支持对 s 或子类进行自定义初始化——为您调用指定的初始化程序。

可能的解决方法：

*   以编程方式创建您的`UITabBarController`：通过这种方式，您可以以任何您喜欢的方式实例化您的 VC

*   在`MyViewController`实例化时找出它实际上是哪个实例并相应地设置自己——例如，通过查看其包含的视图控制器并使用它（例如找出它是什么选项卡索引）

第一个选项是更好的选项，因为它更干净，并且不需要`MyViewController`知道它在 a`UITabBarController`或类似中的潜在位置（这非常hacky）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:16:49.110

如果您依赖 NIB 来实例化和初始化您的导航控制器，您可以使用多种技巧来告诉每个控制器它是什么。

最简单的方法是在NIB中tse Tag，并在**initWithNibName:bundle:**、**initWithCoder:**或 **viewDidLoad中处理不同的值**

# php - 如果数据库显示某个值，则在 Yii CGridView 中装饰行或字段

> ID：13199781
> 
> 赞同：0
> 
> 时间：2012-11-02T16:56:05.670
> 
> 标签：php, yii

我在尝试让 CSS 使用 Yii 的 CGridView 或 TbGridView（它扩展了 CGridView）来装饰网格视图中的适当字段时遇到问题。

上次我发布这个问题（当时几个星期都没有回答）时，我被否决了，并且帖子也被关闭了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:56:05.670

```
$columns[]=array(
/* 'class'=>'CDataColumn', */ /* it's the default */
'header'=>'Challenge',
'type'=>'raw',
'value'=>'($data->player->underChallenge!=1)
    ? CHtml::link("ChalengePlayer", array("player/view", "id"=>$data->player->id))
    : "Under Challenge"',
); 
```

[Yii论坛链接](http://www.yiiframework.com/forum/index.php/topic/17485-cgridview-conditional-clinkcolumns/)

# search - 在 ElasticSearch 中实现位置搜索

> ID：13199789
> 
> 赞同：0
> 
> 时间：2012-11-02T16:56:32.603
> 
> 标签：search, elasticsearch

我对在 ElasticSearch 中返回错误结果的位置查询有疑问。

在我们的系统中，一个商业搜索引擎，每次搜索都需要两个输入：一个位置和一个查询字符串，例如

```
q=sushi
location=Greenwich Village, New York, New York 
```

我希望搜索首先显示格林威治村的寿司，然后显示格林威治村外的寿司，但绝不会显示非寿司结果。

问题是，由于`location`查询，格林威治村的任何事物都得到了匹配——律师、医生等等。我想对 ElasticSearch 说以下内容：

如果 q 匹配，则 location 不必（返回格林威治村外的寿司是可以的），但如果位置匹配，除非 q 也匹配，否则不要返回它（返回格林威治村的非寿司企业是不行的） .

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:05:31.227

听起来您想搜索“寿司”（您不想要非寿司结果），但按位置对结果进行排序（您首先想要格林威治村的结果）。

如果您将位置存储为地理点，您可以简单地使用距离对结果进行[排序](http://www.elasticsearch.org/guide/reference/api/search/sort.html)。

如果位置只是一个字段，并且您只能知道业务是在位置内部还是外部，则可以使用[自定义过滤器分数](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)查询来提高所需位置的结果的相关性。该`query`部分应包含对“sushi”的搜索，并且该`filters`部分应包含对位置的搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:16:58.203

我合并了这篇文章和[这里](https://stackoverflow.com/questions/13053295/elasticsearch-use-distance-from-point-to-affect-query-relevance)的信息，以提出以下解决方案。

1.  用中心点索引每个“地方”（社区、城市等），并索引每个企业的坐标。

2.  索引附加到包含它们的企业的地点 ID。

3.  使用子搜索将输入到位置栏中的文本转换为地点记录。

4.  使用 CustomScoreQuery 通过以下公式修改每个结果的分数，该公式是通过反复试验得出的：
    new_score = old_score / (1 + distance_between_place_centerpoint_and_result)^3

5.  还针对 place_ids 字段查询由 3 产生的地点 ID，作为“应该”布尔查询。这对实际落在指定位置范围内的所有内容提供了一个平坦的提升。

这种策略的一个副作用是，该地点中心点附近的企业被认为更相关——在我看来，这是否正确是有争议的。但除此之外，它工作得很好。

感谢 imitov 的洞察力，帮助我想出了这个解决方案。

# c# - 从 LINQ 到文本框的多个字段

> ID：13199791
> 
> 赞同：0
> 
> 时间：2012-11-02T16:56:42.073
> 
> 标签：c#, winforms, linq

如何将值从选定字段 (LINQ) 传递到 winforms 中的文本框？

如果是单个字段，我只是这样做

```
 var result = from row in dtValueBranch.AsEnumerable()
                         where row.Field<int>("branchID") == idBranch
                         select row.Field<string>("branchName");

        StringBuilder sb = new StringBuilder();

        foreach (string s in result)
        {
            sb.Append(s + Environment.NewLine);
        }

        tbBranch.Text = sb.ToString(); 
```

所以这是许多领域的代码 LINQ

```
 var result = from row in dtValueBranch.AsEnumerable()
                 where row.Field<int>("branchID") == idBranch
                 select new
                 {
                      BranchName = row["branchName"].ToString(),
                      branchTel = row["branchTel1"].ToString(),
                      // And many more fields

                 }; 
```

如何将每个字段实现到每个文本框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:10:07.130

请记住，您的结果查询可能有多行，您的问题似乎集中在如何访问一行的字段上。你可以这样做：

```
var row = result.First();  // select first row of results

textbox1.Value = row.BranchName;
textbox2.Value = row.branchTel;
// etc.. 
```

查询中的`select new`语法在结果枚举中创建了一个匿名类型。您不能按名称引用该类型，但如果您使用`var`声明样式并让编译器进行类型推断，则可以创建局部变量（如行）。

如果您想将所有行中一个字段的所有值塞进一个文本框（如在您的第一个代码示例中），您可以执行以下操作：

```
 StringBuilder sbBranch = new StringBuilder();
    StringBuilder sbBranchTel = new StringBuilder();
    // etc

    foreach (var row in result)
    {
        sbBranch.Append(row.BranchName);
        sbBranch.Append(Environment.NewLine);
        sbBranchTel.Append(row.branchTel);
        sbBranchTel.Append(Environment.NewLine);
        // etc
    }

    tbBranch.Text = sbBranch.ToString();
    tbBranchTel.Text = sbBranchTel.ToString();
    // etc 
```

However, if you're wanting to display multiple rows of multiple fields of data, you might want to look at using a data grid control instead of a herd of textboxes. You'll save yourself a lot of effort, and your users will probably thank you too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:03:08.867

你可以这样做：

```
var rows = dtValueBranch.AsEnumerable()
                        .Where(row => row.Field<int>("branchID") == idBranch);

textBox1.Value = string.Join(Environment.NewLine, 
                           rows.Select(row => row.Field<string>("branchName"));

textBox2.Value = string.Join(Environment.NewLine, 
                           rows.Select(row => row.Field<string>("branchTel1")); 
```

# tabs - 在 Facebook 页面上移动照片选项卡

> ID：13199796
> 
> 赞同：0
> 
> 时间：2012-11-02T16:57:09.717
> 
> 标签：tabs, facebook-page

我是 Facebook 页面的管理员，并且发现工具栏的照片选项卡部分不在我想要的位置。我想移动它，以便用户在单击选项卡右侧的向下箭头时看到它。移动“喜欢”选项卡非常简单，但由于某种原因，“照片”选项卡没有该选项。有没有办法通过某种类型的 GUI 或我可能对 Facebook 页面进行的编码来移动“照片”选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:04:04.187

不，这是不可能的，照片选项卡不可调整。

# c# - 合并列表数组数据并发送到 jqplot

> ID：13199802
> 
> 赞同：0
> 
> 时间：2012-11-02T16:57:41.893
> 
> 标签：c#, json, arraylist, jqplot

我目前有两个列表数组，我想将它们组合成一个列表数组（然后将通过 js 发送客户端以与 jqplot 一起使用）。

首先是两个列表数组 - 一些测试数据稍后将被数据库中的某些东西替换

```
List<int> xValues = new List<int>() { 4, 7, 11, 12, 20, 22, 28, 27, 20 };
List<int> yValues = new List<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9 }; 
```

现在，我最初想做的是将数据转换为类似于“[[4,1]，[7,2]，[11,3]，[12,4]，[20,5] ..... [20,9]]"

然后将该数据客户端发送到 jqplot。

我今天早些时候尝试了一种方法，该方法涉及使用 stringbuilder 组合数据，将其保存为变量并使用 response.write 将其注入客户端，但是我觉得这不是正确的方法。

如果有人可以提供帮助，那就太好了。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:01:33.403

如果要生成列表列表（即`List<List<int>>`），我认为最简单的方法是利用该`IEnumerable.Zip()`方法将两个列表拼接成一个列表列表。

# serial-port - Arduino系列：倒7E1。可能的？

> ID：13199805
> 
> 赞同：3
> 
> 时间：2012-11-02T16:57:59.230
> 
> 标签：serial-port, arduino, sdi, sdi-12

我正在尝试与[SDI-12](http://en.wikipedia.org/wiki/SDI-12)设备进行串行通信，它需要以 1200 波特反转的*七个数据位、偶校验和一个停止位*(7E1) 串行。

从数据表：

> `SDI-12`通信以每秒 1200 位的速度发送字符。每个字符有 1 个起始位、7 个数据位（LSB 在前）、1 个偶校验位和 1 个停止位（低电平有效或反转逻辑电平）：
> 
> `All SDI-12`命令和响应在数据线上必须遵循以下格式。命令和响应都以地址开头，并以回车换行组合终止。

Serial 或 SoftwareSerial 库可以做到这一点吗？我试图避免使用额外的硬件（除了到 3.3 V 的电平转换器），但如果这是唯一的方法，我会这样做。

我已经看到 SoftwareSerial 可以做反转，而 Serial 可以做 7E1，但我找不到两者是否都可以。

我可以使用[Arduino Mega](http://arduino.cc/en/Main/ArduinoBoardMega) (R2) 和[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno) (R3)。

这是我要与之通信的设备：http: [//www.decagon.com/products/sensors/soil-moisture-sensors/gs3-soil-moisture-temperature-and-ec/](http://www.decagon.com/products/sensors/soil-moisture-sensors/gs3-soil-moisture-temperature-and-ec/)在这里，[http://www .decagon.com/assets/Uploads/GS3-Integrators-Guide.pdf](http://www.decagon.com/assets/Uploads/GS3-Integrators-Guide.pdf)是解释协议的文件。第 6 页讨论了它对 SDI 的实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:03:27.740

我对 Arduino 不熟悉，但是 SDI-12 物理层与标准 TTL 电平相反——可能有两个原因：

1.  由于空闲电压为 0V，这会导致较低的待机功耗（由于典型 SDI-12 传感器中的标称下拉电阻。
2.  它有助于使用标准 RS-232 串行端口进行简单的总线“嗅探”。

没有对 5V IO 引脚进行位敲击 - 是的，如果使用标准微控制器 UART，您将需要一个外部逆变器（或 2 个）和一个三态缓冲器。可能需要电平转换，具体取决于您的硬件。

点赞维基百科条目——SDI-12 使用完全标准的 UART 位时序（非常像 RS-232），只是不同的信号电平（0 - 5V）；见第 2 点。但是，有特定的中断序列和严格的时序要求，这使得固件开发更加困难。

如果您认真对待 SDI-12 固件开发，您可能需要[购买 SDI-12 验证器](http://www.sdi-12-verifier.com/)。[对规范](http://www.sdi-12.org/specification.php)进行彻底的研究是必不可少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T19:47:49.313

有点晚了……但迟到总比没有好

实际上，我刚刚为此编写了一个库（实际上包括传感器……所以它应该与包含的示例完全一致）

[https://github.com/joranbeasley/SDISerial（Arduino](https://github.com/joranbeasley/SDISerial)库）

```
#include <SDISerial.h> //https://github.com/joranbeasley/SDISerial (Arduino Library)
#include <string.h>
#define DATA_PIN 2
SDISerial connection(DATA_PIN);
char output_buffer[125]; // just for uart prints
char tmp_buffer[4];
char sensor_info[]
//initialize variables
void setup(){
      connection.begin();
      Serial.begin(9600);//so we can print to standard uart
      //small delay to let the sensor do its startup stuff
      delay(3000);//3 seconds should be more than enough
      char* sensor_info = connection.sdi_query("0I!",1000); // get sensor info for address 0
}

//main loop
void loop(){
    //print to uart
    Serial.println("Begin Command: ?M!");

    //send measurement query (M) to the first device on our bus
    char* resp = connection.service_request("0M!","0D0!");//Get Measurement from address 0

    sprintf(output_buffer,"RECV: %s",resp?resp:"No Response Recieved!!");
    Serial.println(output_buffer);
    delay(10000);//sleep for 10 seconds before the next read
} 
```

# vb.net - 检测来自调制解调器的响应？

> ID：13199807
> 
> 赞同：-1
> 
> 时间：2012-11-02T16:58:08.857
> 
> 标签：vb.net, sms, modem

我正在使用 Teltonika G10 GSM 调制解调器并编写了一个基本程序来发送 SMS。我在每个 AT 命令之间设置了一个 1.5 秒的计时器，以允许调制解调器模拟等待调制解调器发出的“OK”。这暂时有效，但我宁愿使用分支语句等待实际响应，例如“OK”或“ERROR”，而不是使用计时器。

```
 SerialPort1.Write("AT+CMGD=1,4" & vbCrLf)
        Thread.Sleep(1250)
        SerialPort1.Write("AT+CMGF=1" & vbCrLf)
        Thread.Sleep(1250)
        SerialPort1.Write("AT+CMGS=" & Chr(34) & "3475558223" & Chr(34) & vbCrLf)
        Thread.Sleep(1250)
        SerialPort1.Write(":|" & Chr(26)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:43:50.800

我是使用 AT 命令编程的新手，并且花了很多时间使用 Putty 来了解它。Hans Passant 建议使用 .ReadLine() 并且效果很好。

下面是一个运行良好的代码示例。它基本上向调制解调器提交命令，并且只有在调制解调器以“OK”响应时才会继续。

```
 If modem.IsOpen() Then
        modem.Write("AT+CMGD=" & Chr(34) & "ALL" & Chr(34) & vbCrLf)   'deletes last received message
        'Sets Modem to Text
        While (modem.ReadLine().ToString <> "OK")
            modem.Write("AT+CMGF=1" & vbCrLf)
        End While
        While (modem.ReadLine().ToString <> "OK")
            modem.Write("AT+CSMP=17,167,0,0" & vbCrLf)
        End While

        While (modem.ReadLine().ToString <> "OK")
            modem.Write("AT+CNMI=1,1,0,0,0" & vbCrLf)
        End While
    End If 
```

# internet-explorer-9 - 如何使 IE 9 标准模式成为默认模式？

> ID：13199810
> 
> 赞同：1
> 
> 时间：2012-11-02T16:58:10.300
> 
> 标签：internet-explorer-9, compatibility

我有一个网站，当兼容模式关闭时（兼容符号为灰色），在 IE9 中运行良好。打开兼容模式（蓝色）时，jQuery 根本不起作用。我在网站上添加了以下标签，告诉浏览器不应该使用兼容模式。

```
 <meta http-equiv="X-UA-Compatible" content="IE=Edge" > 
```

我有这样的文档类型：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

尽管如此，浏览器似乎并没有默认为标准模式，用户必须手动确保它们不处于兼容模式。

我可以禁用 IE 9 兼容模式吗？我是否已完成禁用 IE 9 兼容模式所需的操作？用户能否始终覆盖 IE 9 标准模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:11:34.190

尝试使用此 DOCTYPE 声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

如发现： [https ://stackoverflow.com/a/6049675/796404](https://stackoverflow.com/a/6049675/796404)

另一个答案是使用新的 HTML5 DOCTYPE：

```
<!DOCTYPE html> 
```

如所述：http: [//msdn.microsoft.com/en-us/library/gg699338 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg699338(v=vs.85).aspx)

我希望这有帮助！

# drupal - 更改首页后的Drupal 7首页URL

> ID：13199814
> 
> 赞同：1
> 
> 时间：2012-11-02T16:58:16.877
> 
> 标签：drupal, drupal-7

我曾经`Configuration|Site Information|Default Front Page`指定`node/55`为我的首页。

如何创建链接到原始首页的菜单，即带有文章列表的菜单？

如果我链接到`<front>`它去`node/55`。

PS：我已经能够通过启用`frontpage`视图来模拟这一点，但是，如果可能的话，只链接到原始首页 URL 会更有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:04:11.587

据我所知，原始主页等于`/node`（对于干净的 URL）或`?q=node`. 链接到其中任何一个，你应该没问题。

# cakephp - 按变量过滤所选列表

> ID：13199816
> 
> 赞同：0
> 
> 时间：2012-11-02T16:58:27.043
> 
> 标签：cakephp, cakephp-2.0

我在 cakePHP 2 上。我有一个问题，我需要你的帮助。这是我的控制器的一些代码（来自 StudentsController.php），特别是“编辑”功能：

```
$students = $this -> Student -> find('list', array(
    'order' => 'Student.name ASC'
));
$this -> set('students', $students); 
```

如何按当前学生的班级过滤列表，以便列表包含具有相同学生班级的所有学生？

我需要一些这样的代码

```
$students = $this -> Student -> find('list', array(
    'conditions' => array('Student.class_id' => CURRENT-STUDENT'S-CLASS),
    'order' => 'Student.name ASC'
));
$this -> set('students', $students); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:25:34.927

所以根据你的编辑功能，你的发现应该是这样的。

```
$students = $this -> Student -> find('list', array(
'conditions' => array('Student.class_id' => $this->request->data['Student']['class_id']),
'order' => 'Student.name ASC' 
```

));

# android - “错误：意外错误”在使用 Android 注释的 maven 构建期间

> ID：13199817
> 
> 赞同：0
> 
> 时间：2012-11-02T16:58:34.097
> 
> 标签：android, maven, android-annotations

我在使用 maven 使用 android annotations (v.2.6) 构建项目时遇到问题，使用 eclipse 一切正常。以下是一些项目和错误详细信息：

从 pom 构建配置片段：

```
<plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.2</version>
                <inherited>true</inherited>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5</version>
                <inherited>true</inherited>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
                <extensions>true</extensions>
            </plugin> 
```

`mvn clean install`这是在父项目上执行后的输出：

```
[INFO] --- maven-compiler-plugin:2.5:compile (default-compile) @ native-container framework ---
[INFO] Compiling 102 source files to   /Users/vitaliyzasadnyy/Development/repository/androidcontainer/native-container-   android/native-container-framework/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] error: Unexpected error. Please report an issue on AndroidAnnotations, with the following content: java.lang.NullPointerException
[ERROR]     at com.googlecode.androidannotations.internal.codemodel.JCodeModel.ref(JCodeModel.java:372)
at com.googlecode.androidannotations.processing.EBeansHolder.refClass(EBeansHolder.java:160)
at com.googlecode.androidannotations.processing.EBeansHolder$Classes.<init>(EBeansHolder.java:50)
at com.googlecode.androidannotations.processing.EBeansHolder.<init>(EBeansHolder.java:136)
at com.googlecode.androidannotations.processing.ModelProcessor.process(ModelProcessor.java:40)
at com.googlecode.androidannotations.AndroidAnnotationProcessor.processAnnotations(AndroidAnnotationProcessor.java:472)
at com.googlecode.androidannotations.AndroidAnnotationProcessor.processThrowing(AndroidAnnotationProcessor.java:343)
at com.googlecode.androidannotations.AndroidAnnotationProcessor.process(AndroidAnnotationProcessor.java:318)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:627)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:556)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:701)
at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:987)
at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:727)
at com.sun.tools.javac.main.Main.compile(Main.java:353)
at com.sun.tools.javac.main.Main.compile(Main.java:279)
at com.sun.tools.javac.main.Main.compile(Main.java:270)
at com.sun.tools.javac.Main.compile(Main.java:87)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess0(JavacCompiler.java:559)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess(JavacCompiler.java:534)
at org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:168)
at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:678)
at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) /Users/vitaliyzasadnyy/Development/repository/androidcontainer/native-container-android/native-container-framework/src/main/java/com/nravo/framework/activity/MainScreenActivity.java:[44,-1] Unexpected error. Please report an issue on AndroidAnnotations, with the following content: java.lang.NullPointerException
at com.googlecode.androidannotations.internal.codemodel.JCodeModel.ref(JCodeModel.java:372)
at com.googlecode.androidannotations.processing.EBeansHolder.refClass(EBeansHolder.java:160) 
```

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:53:06.357

[正如我在您创建](https://github.com/excilys/androidannotations/issues/374)的问题中提到的，这是 Maven / CodeModel 错误，其中`Thread.currentThread().getContextClassLoader()`返回 null 的原因我不知道。我即将发布AndroidAnnotations 2.7，这个问题应该不会再出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:19:43.810

在 Piwai 的建议下，我通过迁移到 android 注释的快照构建解决了这个问题。为了切换到快照，将 pom.xml 中的当前 AA 依赖项替换为：

```
<dependency>
    <groupId>com.googlecode.androidannotations</groupId>
    <artifactId>androidannotations</artifactId>
    <version>2.7-SNAPSHOT</version>
</dependency>

<dependency>
    <groupId>com.googlecode.androidannotations</groupId>
    <artifactId>androidannotations-api</artifactId>
    <version>2.7-SNAPSHOT</version>
</dependency> 
```

您还需要添加快照存储库：

```
<repositories>
    <repository>
        <id>snapshots-repository</id>
        <name>Sonatype oss snapshot repo</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots</url>
    </repository>
</repositories> 
```

**注意：**来自 AA v.2.7 发行说明：

> API jar 现在是一个单独的工件，androidannotations-api。我们不再使用 api 分类器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T17:28:44.000

我遇到了这个。一种解决方案是将其添加到 pom.xml

```
 <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>annotations</artifactId>
        <version>4.1.1.4</version>
    </dependency> 
```

# jquery - 无法从 javascript 重定向

> ID：13199823
> 
> 赞同：0
> 
> 时间：2012-11-02T16:59:09.270
> 
> 标签：jquery, redirect, navigation

我在网站中有 page1.aspx 和 page2.aspx

我需要导航为：第1页->第2页（单击返回按钮，返回第1页）->第1页

我正在使用 jQuery 代码进行导航：

```
 var pagename= "page2.aspx";
   jQ(location).attr('href', pagename); 
```

我尝试在 page2 中使用相同的代码导航回第 1 页：

```
var path2 = "page1.aspx";
        jq(location).attr('href', path2); 
```

还尝试了下面的代码和其他类似的代码。

```
document.location.pathname = '../Pages/page1.aspx'; 
```

但它所做的只是将我导航到目录列表，其中显示了 pages 文件夹下的所有页面名称。代码有什么问题吗？我也尝试按级别进行操作，即 ../pages/page1.aspx 。

更新：

我在点击我调用代码时使用以下控件：

```
 <a href="" class="hyperlink" id="goback">Go back</a> 
```

好吧，显然问题在于 html 控件。当我尝试使用按钮时，它重定向得很好。如果我不想要按钮，是否有任何指针可以修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:01:37.497

我从来没有试过

```
document.location.pathname 
```

我总是用

```
window.location.href = 'mypageurlhere' 
```

用javascript重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:01:51.670

如果我理解正确，您希望将用户重定向到不同的页面？如果是这样，试试这个：

```
window.location.assign('page2.aspx'); 
```

# language-agnostic - 什么是不健全的演员阵容？

> ID：13199824
> 
> 赞同：4
> 
> 时间：2012-11-02T16:59:15.107
> 
> 标签：language-agnostic, terminology

我在[几个](http://okmij.org/ftp/Haskell/types.html) [地方](https://stackoverflow.com/questions/3915272/are-the-languages-with-a-sound-type-system-a-sub-set-of-strongly-typed-languages)看到过这个词。什么是不健全的演员阵容？这与[合理论证](http://en.wikipedia.org/wiki/Soundness)的概念有何关系？这是一个标准术语吗？

以下是使用该术语的一些引用：

*   [泛型 java 类型推断是不合理的](http://www.seas.upenn.edu/~sweirich/types/archive/1999-2003/msg00849.html)
*   [这种不健全的演员阵容确实会导致 Segmentation fault](http://okmij.org/ftp/Haskell/types.html#unsound-typeable)。
*   [如果您强制转换为类型参数，我们会产生一个 unsound-cast-warning。](http://jira.codehaus.org/browse/XTENLANG-2732)
*   [编译器对不健全的强制转换发出警告](http://jira.codehaus.org/browse/XTENLANG-2549)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:00:36.750

编程语言类型系统的健全性属性通常被解释为：

> 类型良好的程序永远不会出错。

“出错”的确切含义取决于上下文，但通常范围从“相当于引发未捕获的异常”到“相当于段错误”。

不健全的强制转换是破坏健全性属性的强制强制转换（显式类型转换），或者如果使用不当可能会破坏健全性属性。

# php - 有什么方法可以使站点中的所有 PHP 路径都与 root 相关？

> ID：13199827
> 
> 赞同：0
> 
> 时间：2012-11-02T16:59:29.443
> 
> 标签：php, path, root

每当我想在 PHP 中包含一个文档，或执行任何其他需要描述路径的 PHP 操作时，我都需要编写类似`../../../../../document.html`. 这可行，但很乏味，而且在某些情况下，路径错误，导致代码出现在页面上，并进行调试。
显然，这可以通过使用`$SERVER_['DOCUMENT_ROOT']`命令绕过，但这也需要有时无法管理的代码量（同样，当存在很多很多路径时）。
有什么方法可以简单地将站点范围内的所有 PHP 路径定义为文档根相关，如 HTML 中（`/document.html`是根相对）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:01:55.807

我在另一个问题中对此有**详细的回答：**

[在php中找到一个4个目录的文件](https://stackoverflow.com/questions/12999809/finding-a-file-in-php-that-is-4-directories-up/13000215#13000215)

它解释了 PHP 中相对文件路径的注意事项。使用`magic constants and server variables`那里提到的克服相对路径问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:08:05.860

是的。大多数有经验的开发人员倾向于在配置文件中为对应用程序重要的各种路径定义常量。因此，如果您想将网络服务器文档根定义为应用程序根，并且可能在您放置应用程序包含（类等）的网络服务器目录之外有另一个路径，则可能是这样的；不想在网络中公开目录。

```
define('WEB_ROOT', $_SERVER['DOCUMENT_ROOT']);
define('INCLUDE_DIR', '/path/to/directory/'); 
```

然后，您可以在应用程序中引用这些常量。

我当然建议不要使用相对路径，因为它们在重构代码或将代码从一台服务器移动到另一台服务器时会出现问题。如果您需要相对类型的路径（例如，为了应用程序的可移植性），您可能会更好地使用 PHP 魔术常量，如`__FILE__`和`__DIR__`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:03:28.817

我曾经这样做并且有这些问题。然后我将我的网站切换`mod_rewrite`为用于网址。然后，我将所有 php 页面都放在同一个目录中，这样我就不必在目录结构上进行 4 次令人困惑的查找来查找根目录。你可以在你的服务器上有一个 php 文件：

```
/var/www/index.php 
```

并且，在您的 .htaccess 文件中使用 mod_rewrite，您可以将该映射映射到：

```
http://domain.com/really/long/path/structure/page.html 
```

当我移至该结构时，它确实在 php 方面帮助了我，特别是关于导航到不同的目录。

# sql-server-2008 - 将包含英文和日文文本的列使用什么排序规则？

> ID：13199828
> 
> 赞同：2
> 
> 时间：2012-11-02T16:59:31.737
> 
> 标签：sql-server-2008

我正在使用 Sql Server 2008，我们的要求之一是提供多语言支持。主要语言是英语、德语、法语和日语。

我有一张表，其 COLLATION 为 Latin1_General_CI_AS。将存储文本数据的列具有此 COLLATION 'Japanese_CI_AS'

当我在 SQL Server Management Studio (SSMS) 中运行以下 SQL 时

```
DECLARE @translation nvarchar(max)
SET @translation = 'クッキー(Cookie)を許可してください'

PRINT @translation

UPDATE [ResourceTranslations]
SET Translation = @translation  
WHERE Id = 4 
```

插入的值是'??????(Cookie)?????????'，也是打印出来的值。

SSMS 是否有可能遇到日文字符问题？似乎打印语句告诉我该值正在更改为 '????(Cookie)?????????' 在它被插入表格之前。

感激地接受任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:01:11.267

您缺少将`N`字符串文字视为所需的前缀，`nvarchar`而不是`varchar`字符串文字在数据库的默认排序规则中被强制转换为`varchar`首先在此过程中丢失这些日文字符。

以下应该按预期工作。

```
DECLARE @translation nvarchar(max)
SET @translation = N'クッキー(Cookie)を許可してください'

PRINT @translation

UPDATE [ResourceTranslations]
SET Translation = @translation  
WHERE Id = 4 
```

# spring - 如何在存储库层处理 Spring 数据异常

> ID：13199834
> 
> 赞同：2
> 
> 时间：2012-11-02T17:00:12.390
> 
> 标签：spring, exception-handling

我正在使用 Spring 编写一个 REST 应用程序。它分为3层，控制器，服务和存储库。

存储库层使用 Spring 数据和 MongoDb。来自 MongoDb 的异常被转换为 Spring Data 异常。

使用 @ExceptionHandler 注释我试图在存储库层中捕获这些异常。这没有用。使用@ExceptionHandler 捕获异常的唯一方法是将代码放在控制器层中。

有没有办法让我在不使用 try/catch 块的情况下捕获和处理存储库层中的异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:01:57.640

可以使用 Spring AOP 并为您的所有 DAO 方法创建一个 @Around 建议来完成，如下所示。

但是我仍然想了解您打算在 catch 块中做什么。您是否计划使用不同的逻辑来处理不同类型的数据访问异常？如果您没有任何特定的逻辑，那么让异常传播到控制器层是有意义的。

**第一个选项**

这是一个示例 -

```
 @Aspect
public class DaoExceptionHandlerAdvice {
    @Around("execution( * com.xyz.daos.*.*(..))")
    public Object invokeService(ProceedingJoinPoint pjp) throws Throwable{
        MethodSignature methodSignature = (MethodSignature)pjp.getSignature();
        Object returnValue = null;
        try {
            returnValue = pjp.proceed();
        } 
        catch(Exception e){
            // handle the exception 
        }
        finally{
        }
        return returnValue;
    }
} 
```

在您的应用程序上下文文件中添加以下代码段

```
<aop:aspectj-autoproxy />    
<bean id="daoExceptionHandler" class="com.xyz.advice.DaoExceptionHandlerAdvice"  ></bean> 
```

查看以下链接了解详细信息 - [Spring AOP](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)

**第二种选择**

我没有尝试过，但使用异常翻译器可能会更容易。您可能可以扩展 HibernateExceptionTranslator 并在其中拥有自己的逻辑。

点击此链接了解详情 - [异常翻译](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-exception-translation)

# objective-c - 在应用程序中计算和节省用户使用时间的最佳方法

> ID：13199837
> 
> 赞同：0
> 
> 时间：2012-11-02T17:00:15.387
> 
> 标签：objective-c, ios, nstimer, nstimeinterval

在我的应用程序中计算用户使用时间的最佳方法是什么。保存在里面好吗`NSUserDefaults`？我应该以哪种格式保存它？

我想知道用户是否可以说玩了应用程序 3-4 次，每次他玩了 2 个小时，所以我希望每次的时间都加到以前的时间上，所以现在我会有 6 个小时。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:23:25.567

我确实建议使用 NSUserDefaults。

在 didFinishLaunching 中将当前日期存储在您的应用程序委托的 ivar 中：

在您的 AppDelegate.h 中：

```
NSDate *startTime; 
```

在你的 .m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  startTime=[NSDate date]; //stores the current time in startTime
} 
```

现在每次用户暂停/关闭应用程序时，计算 startTime 和当前时间之间的差异，并将其添加到 NSUserDefaults 中的值：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
  double diff=[startTime timeIntervalSinceNow]*(-1); //timeIntervalSinceNow is negative because startTime is earlier than now
  NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
  [defaults setDouble:[defaults doubleForKey:@"Time"]+diff forKey:@"openedTime"]
} 
```

并将当前日期再次存储在 didBecomeActive 中：

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
startTime=[NSDate date];
} 
```

然后你可以得到使用时间到现在使用

```
double usedTime=([startTime timeIntervalSinceNow]*(-1))+[[defaults doubleForKey:@"Time"] doubleForKey:@"Time"]; 
```

如果您只想获取自用户上次启动应用程序以来的打开时间，请在 didFinishLaunching 中重置 openTime

```
[defaults setDouble:0.0f forKey:@"openedTime"] 
```

希望这可以帮助。

# visual-studio - 创建链接文件的独立版本

> ID：13199838
> 
> 赞同：0
> 
> 时间：2012-11-02T17:00:26.327
> 
> 标签：visual-studio

在 VS 中，我有一个配置文件，我已使用“添加为链接”将其添加到多个项目中。

现在我想取消其中一个文件的链接并创建一个可独立编辑的文件。

我可以从项目中删除并创建一个具有相同内容的新文件，但如果我想为多个项目执行此操作，那将很痛苦。

有更快的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:10:46.863

一个想法。

更改配置文件，以便有一个部分映射到项目名称。如果该部分不存在使用程序集名称？，使用“默认”当前一个未命名的。

# ios - 使用 IB 从 View Controller 的视图中加载带有 XIB 的自定义 UIView

> ID：13199839
> 
> 赞同：7
> 
> 时间：2012-11-02T17:00:26.210
> 
> 标签：ios, uiview, xib, nib, initwithcoder

我有一个使用 Interface Builder 构建的自定义`UIView`( )。`MyCustomUIView`我想把这个自定义视图放在`MyViewController`的视图中，它也是使用 IB 设计的。我在XIB 中放置了`UIView`一个子视图，`MyViewController`并将它的类设置为`MyCustomUIView`. 问题是，当我运行代码时，只出现一个空白视图。（当我在代码中实例化`MyCustomUIView`时，它显示得很好。）

我只是`initWithFrame:`通过以下方式覆盖该方法`MyCustomUIView.m`：

```
- (id)initWithFrame:(CGRect)frame
{
    [[NSBundle mainBundle] loadNibNamed:@"MyCustomUIView" owner:self options:nil];
    self = self.view;
    return self;
} 
```

我应该怎么做才能使视图正确加载？应该怎么`initWithCoder:`看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:44:50.773

你是对的。IB 使用 initWithCoder。initWithCoder 看起来应该与您的其他 init 方法非常相似：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        // CUSTOM INITIALIZATION HERE
    }
    return self;
} 
```

一旦你在 IB 中分配了你的类，你就不需要从包中实例化它，除非我误解了你的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:11:32.420

不要在 IB 中视图控制器的视图部分放置任何东西。相反，将 IB 中视图控制器的 nib 名称设置为包含视图的 nib 的名称。在包含视图的 nib 中，将文件的所有者设置为视图控制器类并将其`view`属性连接到视图。

结果将是，当视图控制器被实例化时，如果它是从 nib 实例化的（你还没有证明这是真正会发生的事情，但我们只是说它是），它将找到 nib 并从中加载视图它。

基本上规则是视图控制器的来源没有区别，它会以相同的顺序通过相同的步骤查找其视图，正如我在书中解释的那样：

[http://www.aeth.com/iOSBook/ch19.html#_view_controller_and_view_creation](http://www.apeth.com/iOSBook/ch19.html#_view_controller_and_view_creation)

在这个网络广播中：

[http://www.youtube.com/watch?v=zIufcKpDIRo](http://www.youtube.com/watch?v=zIufcKpDIRo)

# batch-file - 批量地形预处理 - ArcGIS 10 和 ArcHydro Tools 2.0

> ID：13199846
> 
> 赞同：1
> 
> 时间：2012-11-02T17:00:57.300
> 
> 标签：batch-file, preprocessor, arcgis, terrain

我正在尝试对来自 NHD 的一些数据运行 Batch Terrain Preprocessing 工具。我想知道这个工具是否存在于 Archydro 2.0 中。我查看了帮助，它说它是一个工具，但是我无法在任何地方找到它！有人知道吗？我一直在尝试单独执行相同的步骤，但 arcgis 一直冻结。Batch Terrain Preprocessing 工具到底在哪里，不，它不在我的工具栏中，我已经看过了。这是与 archydro 工具 2.0 不同的下载吗？

我很感激我能收到的任何建议。我已经阅读了手册，但在任何地方都找不到有关它的信息。

# java - 放置相同方法的成功和失败测试用例

> ID：13199848
> 
> 赞同：2
> 
> 时间：2012-11-02T17:00:58.510
> 
> 标签：java, unit-testing, testing, junit

假设我有一个名为的方法`foo`，对于某些输入值集，预计会成功完成并返回结果，而对于其他一些值集，预计会抛出某个异常。此方法需要先进行一些设置，然后才能对其进行测试。

鉴于这些条件，将成功和失败测试集中在一个测试中是否更好，或者我应该在单独的测试方法中维护这些案例？

换句话说，以下两种方法中哪一种更可取？

**方法一：**

```
@Test
public void testFoo() {
  setUpThings();
  // testing success case
  assertEquals(foo(s), y);
  // testing failure case
  try {
    foo(f);
    fail("Expected an exception.")
  } catch (FooException ex) {
  }
} 
```

**方法二：**

```
@Test
public void testFooSuccess() {
  setUpThings();
  assertEquals(foo(s), y);
}

@Test
public void testFooFailure() {
  setUpThings();
  try {
    foo(f);
    fail("Expected an exception.")
  } catch (FooException ex) {
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:03:56.623

最好采用方法#2。

为什么：

好吧，当断言失败时，不会评估该方法的其余部分……因此，通过将测试放在 2 个单独的方法中，您可以确保至少执行两个测试……失败与否。

单元测试不仅应该关注一个特定的单元，还应该关注该单元的一个特定行为。一次测试多种行为只会使水变得浑浊。花时间将每个行为分成自己的单元测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:11:44.930

**方法 3**（2 的扩展）

```
@Before
public void setUpThings() {
  ...
}

@Test
public void testFooSuccess() {
  assertEquals(foo(s), y);
}

@Test(expected=FooException.class)
public void testFooFailure() {
  foo(f);
} 
```

我很高兴有一次只练习一个条件的集中测试，因此失败的测试只能意味着一件事（方法 2）。如果它们都使用相同的设置，您可以将其移至通用设置方法 ( `@Before`)。如果没有，也许最好考虑将相关的案例分成不同的类，这样你不仅有更专注的案例（方法），还有更专注的固定装置（类）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T17:02:41.807

我喜欢方法#2。单独测试更好。

我不喜欢你做测试 2 的方式。这就是我要做的：

```
@Test(expected = FooException.class)
public void testFooFailure() {
  setUpThings();
  foo(f);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T17:06:34.073

对我来说，方法 2 更可取。因为您首先测试快乐路径然后失败条件。如果有人需要测试快乐的场景，只有你会拥有它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T17:06:44.330

将测试用例分开更好有两个原因：

1.  你的测试用例应该是原子的
2.  如果第一个断言条件失败，它将不会评估第二个。

# html - 页眉全宽与背景颜色...但在页眉元素之间有透明部分

> ID：13199851
> 
> 赞同：0
> 
> 时间：2012-11-02T17:01:08.920
> 
> 标签：html, css

我得到了一个设计，它需要一个页面的标题，使其具有全宽的彩色背景，但在标题中的 和 nav 选项`body`之间具有透明边框。`h1`

我在[这里为它做了一个 jsfiddle](http://jsfiddle.net/mfPFT/4/)。如果您想象标题左侧和右侧的空格与标题中间的绿色相同，但您仍然可以在导航选项之间看到下面的页面，那么这就是我想要实现的目标。

这是一种不寻常的风格，我以前从未遇到过，这就是我挣扎的原因。

我可以在页面加载时使用 JS 来解决这个问题，但如果可能的话，我想要一个纯 CSS 解决方案。如果有人有任何想法，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:04:40.937

您可以使用 CSS 边框图像属性。

像这样的东西，但只是为了正确的边框，你可以使用透明的 png 文件：

```
.menu li{
-moz-border-image:url(border.png) 30 30 round; /* Firefox */
-webkit-border-image:url(border.png) 30 30 round; /* Safari */
-o-border-image:url(border.png) 30 30 round; /* Opera */
border-image:url(border.png) 30 30 round;
} 
```

显然在IE中不起作用..

这是 w3schools 页面的链接：http: [//www.w3schools.com/cssref/css3_pr_border-image.asp](http://www.w3schools.com/cssref/css3_pr_border-image.asp)

# ios - 从多个地方更新一个 sqlite 文件

> ID：13199854
> 
> 赞同：0
> 
> 时间：2012-11-02T17:01:23.553
> 
> 标签：ios, sqlite, dropbox

我正在为 ios 创建一个应用程序，其数据存储在 sqlite db 中。

我使用 firefox sqlite 插件创建了数据库，并使用相同的插件填充字段，数据库有一个大约 1500 行和近 10 列的表，其中必须填充文本。因为它被证明很乏味，我从顶部更新字段，从底部更新我的朋友..

我们尝试使用在 Dropbox 中共享的相同文件，但是当我们都同时更新表时，它不能正常工作..

我们可以创建两个文件吗？然后合并？

如何合并这两个 sqlite 文件？

我尝试将文件附加到firefox插件中，似乎我们可以将表从附加数据库复制到主数据库。但是在复制时要求我们创建新表..

我们不能将数据插入到现有表的特定字段范围中吗？

任何帮助表示赞赏，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:18:00.103

填写两个*不同*数据库中的数据，`one.db`然后`two.db`.

然后，完成后，打开第一个，并[附加](http://www.sqlite.org/lang_attach.html)另一个：

```
ATTACH 'two.db' AS two; 
```

然后将所有记录复制到第一个DB中的对应表中：

```
INSERT INTO mytable SELECT * FROM two.mytable; 
```

# php - 在 SQL 语句中使用 PHP 变量

> ID：13199855
> 
> 赞同：0
> 
> 时间：2012-11-02T17:01:24.110
> 
> 标签：php, sql

我对 PHP 和 SQL 很陌生...我无法识别我的 SQL 代码中使用的变量？

这是完整的代码，我正在尝试用从 html 页面回答的问题的答案填充数据库表

请问有什么帮助吗？

```
<?php

$odbc = mysql_connect ('localhost', 'root', '') or die ("Could not connect to database");
mysql_select_db('Questionaire', $odbc) or die ("can not find database");

$sql;
$quantity = 1;

$id = 222;
$r = 1;
$course = '555';

for ($i = 1; $i < $quantity; $i++)
{   
$answer = $_POST['q'.$r];

if ($answer == 'a')
{
    $sql = "INSERT INTO `questionaire`.`tanswer` (`User`, `QuestionID`, `Answer1`, `Answer2`, `Answer3`, `Answer4`, `Answer5`, `AnswerFreeText`) VALUES (".$id.", ".$i.",       '1', '0', '0',  '0', '0', '')";                         
}

if ($answer == 'b')
{
    $sql = 'INSERT INTO `questionaire`.`tanswer` (`User`, `QuestionID`, `Answer1`, `Answer2`, `Answer3`, `Answer4`, `Answer5`, `AnswerFreeText`) VALUES ('.$id.', '.$i.',               "0", "1", "0",  "0", "0", "")'; 
    echo'<h2> hello </h2>'; 
    $result = mysql_query($sql,$odbc) or die ("can not run query");                 
}

if ($answer == 'c')
{
    $sql = "INSERT INTO `questionaire`.`tanswer` (`User`, `QuestionID`, `Answer1`, `Answer2`, `Answer3`, `Answer4`, `Answer5`, `AnswerFreeText`) VALUES (".$id.", ".$i.",       '0', '0', '1',  '0', '0', '')";     echo $sql;                  
}

if ($answer == 'd')
{
    $sql = "INSERT INTO `questionaire`.`tanswer` (`User`, `QuestionID`, `Answer1`, `Answer2`, `Answer3`, `Answer4`, `Answer5`, `AnswerFreeText`) VALUES (".$id.", ".$i.", '0', '0', '0', '1', '0', '');";                           
}

$r++;

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:08:03.653

如果您是 PHP 和 MySQL 新手，最好尽早学习最佳实践，并养成使用查询参数的习惯。`.`这比用于将 PHP 变量连接到 SQL中要容易得多。

```
<?php
$pdo = new PDO(...connection parameters...);

$sql = "INSERT INTO `questionaire`.`tanswer` 
    (`User`, `QuestionID`, `Answer1`, `Answer2`, `Answer3`, `Answer4`, `Answer5`, `AnswerFreeText`) 
    VALUES (?, ?, ?, ?, ?, ?, ?, ?)";

$stmt = $pdo->prepare($sql) 
    or die(print_r($pdo->errorInfo, true));

$values = array($id, $i, 1, 0, 0, 0, 0, '');

$stmt->execute($values) 
    or die(print_r($stmt->errorInfo, true)); 
```

它更容易编码，*并且*避免了[SQL 注入](http://www.slideshare.net/billkarwin/sql-injection-myths-and-fallacies)漏洞的风险。

您可以使用查询参数代替 SQL 表达式中的单个文字值。因此，您不能将参数用于表名、列名、值列表或其他语法。仅在您将在 SQL 中编写单个字符串或单个数字的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:07:08.163

您应该将所有变量放在单引号中（尝试生成类似：“（'1'，'John'，'Canada'等......）。为此，您应该使用类似：

```
"... VALUES ('$id', '$i', '0', etc...)" 
```

小费：

双引号表示首先解析文本，这使得可以将变量直接集成到其中。

假设 i = 1。这会产生：

```
 "i is: $i" == "i is: 1"; 
```

但是，如果您希望获得使用过的直接文本而不先对其进行解析，则可以使用单引号 (')：

```
 'i is: $i' == 'i is: $i' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:17:01.653

这里有一些对你来说更简单的东西：

```
 $query = sprintf("INSERT INTO table " .
               " (id, col1, col2,col3) " .
               " VALUES (NULL, '%s', '%s', '%s');",
               mysql_real_escape_string($val1),
               mysql_real_escape_string($val2),
               mysql_real_escape_string($val3)); 
```

# svn - AnhkSVN 查找自日期以来更改的文件

> ID：13199863
> 
> 赞同：1
> 
> 时间：2012-11-02T17:01:41.353
> 
> 标签：svn, ankhsvn

在 AnkhSVN 中，有人知道如何获取自某个日期以来更改的文件列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:21:46.283

抱歉，AFAIK AnkhSVN 只是用于与 Subversion 交互的 VS 插件。如果你想以更自由的方式与 repo 交互，你必须使用独立的 subversion 客户端。在 CLI 情况下，您可以使用`svn log`-r 选项并将修订范围定义为 "{DATE}":"HEAD" 或 "{DATE}":"{DATE}" （并注意 1-revision-shift）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:36:31.243

使用 AnkhSVN，您可以获得所需的内容。在解决方案资源管理器中，右键单击解决方案文件并选择“查看解决方案历史记录”。历史记录查看器将显示所有已加载的修订。单击与您感兴趣的日期相对应的修订，更改文件的列表将显示在历史查看器的“更改路径”区域中。

# ubuntu - 如何使代理对应用程序透明（Ubuntu）？

> ID：13199867
> 
> 赞同：1
> 
> 时间：2012-11-02T17:02:17.820
> 
> 标签：ubuntu, proxy

我在代理后面有一个 Ubuntu 服务器，并且有几个应用程序因此无法工作（例如，在 NodeJS 上运行的应用程序）。是否有驱动程序/应用程序使此代理对他们透明？谢谢

# c++ - 如何链接（或解决）两个定义相同符号的第三方静态库？

> ID：13199870
> 
> 赞同：27
> 
> 时间：2012-11-02T17:02:27.187
> 
> 标签：c++, c, linker, openssl, static-libraries

我不可能是唯一一个遇到这种情况的人。

我有一个 C++ 应用程序需要与一个第三方和 SDK 中设置的另一个静态库链接。SDK 出于某种令人沮丧的原因，将同一个第三方库的一个子集重新编译到他们自己的（重命名的）库中，尽管符号本身的名称相同，并且它们没有封装在命名空间中。我的应用程序本身依赖于相同的第三方库。

我已经考虑了一些选择，但也许我遗漏了一些东西，希望新的外观能帮助我。也许我很接近，有人会知道其中一个的下一步。我将列举到目前为止我尝试过的方法以及每个解决方案的缺点：

1.  与两者联系。我收到大约 2500 行符号重新定义/大小更改警告和错误。这是我第一次发现它们定义了相同的符号。我正在尝试使用 g++ 重新编译 OpenSSL 并将其放入命名空间中...请参阅下面的编辑...

2.  仅与 SDK 链接。我得到了我自己的代码所依赖的未定义符号 - 这是我发现他们对第三方库的重新编译是一个子集，或者至少配置为禁用了一个模块。

3.  仅与第三方库链接。我有几个由 SDK 报告的未定义符号 - 其中一个实际上是第三方库中头文件中的#define，因此第三方库中的所有引用都解析为定义，但外部引用没有。我把它移到了 c 文件中，它解决了这个问题，但是我仍然有两个我在任何地方都找不到的未解决的函数。这是迄今为止我得到的最接近的。

4.  从一个库中删除冲突的符号并在两者中进行链接。到目前为止，这还没有奏效。这可能是 SDK 中静态链接的 lib 与我尝试使用的第三方 lib 的版本之间的版本问题，但看起来某些函数在符号之间移动，因此通过删除符号，我无意中删除了我在其他地方需要的功能。SDK 中符号中的函数与第三方库中符号中的函数之间似乎没有完美的映射。在无需手动调整地址的情况下剥离功能是否合理？

我一直在检查库中的符号：

```
nm -C --defined-only lib<name>.a 
```

并使用以下方法提取整个对象：

```
ar -x lib<name>.a <objname>.o 
```

希望这也能帮助那些不得不与相互冲突的第三方库链接的其他人。具体而言，第三方库是[OpenSSL](http://www.openssl.org/)，SDK 是[Opsec](http://www.opsec.com/cp_products/opsec_sdk.html) - libcpopenssl.a 是 Opsec 中的违规库。

**编辑 - 一个较晚的可能解决方法可能是使用 g++ 重新编译 OpenSSL 并将整个内容放在命名空间中，然后链接两个库。我现在正在尝试...更多...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:14:41.867

Google 搜索表明 SSL_get_peer_dh 和 DH_dup 确实是从 libcpopenssl.a 中添加的，并且它们也不存在于我的 OpenSSL 副本中。所以你真的必须链接那个库。在二进制级别将两个库混合在一起（上面的方法 4）不太可能工作——OpenSSL 对其 ABI 非常挑剔（它们通常将 .so 文件版本化为次要编号) 所以你必须非常幸运地拥有一个与他们的 .a 文件兼容的 .so 。

我的建议是方法 4 的变体，但在源代码级别：您将在 Opsec libcpopenssl.a 中有链接，因为它是 OpenSSL 的修改版本，其中包含额外的符号（可能还有其他修改），并获取您的额外功能需要从 OpenSSL 源中获取并使用 libcpopenssl.a 重新编译这些对象，以便它们可以使用 Opsec 版本中的函数。如果您只使用一些未由 libcpopenssl.a 导出的 OpenSSL 函数，这是非常可行的。

诚然，这仍然是一种繁琐的方法，但它是获得符号兼容性的有保证的方法，当然前提是 Opsec SDK 没有对 OpenSSL 进行语义更改，这会破坏您在项目中引入的其他 OpenSSL 功能。

（我是 StackOverflow 的新手，所以我不知道这个建议是否可以作为一个正确的答案，但无论如何我没有发表评论的声誉点。如果它不合适，我会删除它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:21:04.043

如果您非常好奇，在最新版本的 OpenSSL 中修改了 249 个文件以使其能够编译。到目前为止，最常见的问题是大量的 C 样式指针强制转换，尤其是 void*。现在我在梦中看到了“reinterpret_cast”。

但这并没有单独解决它 - 它仍然需要完全放入名称空间中，这意味着再次修改所有文件以及我自己对它的内部引用。我想我现在要传递这个。

感谢大家的帮助。

# google-earth-plugin - 在谷歌地球 API 中克隆 3D 模型

> ID：13199878
> 
> 赞同：1
> 
> 时间：2012-11-02T17:02:55.573
> 
> 标签：google-earth-plugin, geo, collada, 3d-model

我想用 API 和谷歌插件在谷歌地球环境中表示 3D 模型。

我有代码：

```
 var ge;
  google.load("earth", "1");

  function init() {
     google.earth.createInstance('map3d', initCB, failureCB);
  }

  function initCB(instance) {

     ge = instance;
     ge.getWindow().setVisibility(true);
     ge.getNavigationControl().setVisibility(ge.VISIBILITY_HIDE);

     // Placemark
    var placemark = ge.createPlacemark('Modello1');
    placemark.setName('model');

    var place2 = ge.createPlacemark('Modello2');
    place2.setName('modello2');

    // Placemark/Model (geometry)
    var model = ge.createModel('Mod1');
    placemark.setGeometry(model);

    var modello2 = ge.createModel('Mod2');
    place2.setGeometry(modello2);

    // Placemark/Model/Link
    var link = ge.createLink('File1');
    link.setHref("http://myhost.org/table2/models/table2.dae");
    model.setLink(link);

    var link2 = ge.createLink('File2');
    link2.setHref("http://myhost.org/tavolo/models/table2.dae");
    modello2.setLink(link2);

    // get center look at location
    var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

    // Placemark/Model/Location
    var loc = ge.createLocation('');
    loc.setLatitude(40.01000594412381);
    loc.setLongitude(-105.2727379358738);
    model.setLocation(loc);

    //slightly varying coordinates...
    var loc2 = ge.createLocation('');
    loc2.setLatitude(40.01000594412389);
    loc2.setLongitude(-105.2727379358731);
    modello2.setLocation(loc2);

    // add the model placemark to Earth
    ge.getFeatures().appendChild(placemark);
    ge.getFeatures().appendChild(place2);

    // zoom into the model

    lookAt.setLatitude(40.01000594412381);
    lookAt.setLongitude(-105.2727379358738);

    lookAt.setRange(300);
    lookAt.setTilt(80);
    ge.getView().setAbstractView(lookAt);

}  

function failureCB(errorCode) {
}

google.setOnLoadCallback(init); 
```

当我加载不同的 collada (.dae) 文件时，不会出现任何问题......但它不会加载相同的表 2 次！为什么？！？

我也尝试过分离实例和文件......但问题仍然存在。我的环境中只有一张桌子。

有没有办法将单个模型克隆成 N 个模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:36:59.197

您是否尝试过注入 kml 以使用 parse kml 显示模型。

还可以尝试使用 getKml 获取 kml 并查看它是否在独立的 kml 文件中正确呈现

# java - xml配置文件中的spring表达式

> ID：13199879
> 
> 赞同：6
> 
> 时间：2012-11-02T17:02:55.480
> 
> 标签：java, spring, spring-el

为不同的用户设置不同的属性集是很有用的。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:property-placeholder
        location="classpath:/path/to/package/default.properties,
        classpath:/path/to/package/#{ systemProperties['user.name'] }.properties"/>

</beans> 
```

执行应用程序时，spring 无法识别表达式。上下文没有开始，spring 说：`class path resource [path/to/package/#{ systemProperties['user.name'] }.properties] cannot be opened`

当我用导致有效资源的字符串手动替换表达式时，行为符合预期。[手册说明](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#expressions-beandef)它应该可以工作。

spring-context 和 spring-core (3.1.2-RELEASE) 在类路径中。

*   spring怎么不接环境变量呢？
*   我对解决相同功能问题的替代解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:18:52.980

那里不允许使用 SpEL 表达式；你可以间接地做你想做的事，虽然......

```
<context:property-placeholder properties-ref="props"/>

<util:properties id="props" location="classpath:#{systemProperties['foo']}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:55:10.943

这是问题的完整答案。将用户属性覆盖在默认属性之上。我对已接受答案的编辑被拒绝了。

```
<context:property-placeholder properties-ref="springContextCongifurationProperties"
                              location="classpath:/path/to/package/default.properties"
                              local-override="true"/>

<util:properties id="springContextCongifurationProperties"
                 location="classpath:/path/to/package/#{ systemProperties['user.name'] }.properties"/> 
```

# html - 带有自定义菜单的 Google Chome 不记录点击？

> ID：13199881
> 
> 赞同：1
> 
> 时间：2012-11-02T17:03:11.240
> 
> 标签：html, css, google-chrome, drop-down-menu

我有一个使用标准 LI 和 UL 构建的自定义菜单。它有一层子菜单。当我在 Google Chrome 中单击这些子菜单时，不会触发 click 事件。这适用于 IE，但不适用于 Chrome。

这个问题最近出现了，我很确定不久前一切都很好。

这是HTML：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<style type="text/css">
        #navMenu {
    width: 900px;
    position: absolute;
}
#navMenu ul {
    padding: 0;
    margin: 0 9px;
}
#navMenu li {
    margin: 3px 2px 0;
    float: left;
    list-style-type: none;
}
#navMenu li a {
    display: block;
    color: #000;
    border: 1px solid #000;
    background: #E1DFD0 top left repeat-x;
    height: 15px;
    line-height: 1.154em;
    text-decoration: none;
    font: normal normal bold 0.985em/normal arial, sans-serif;
    float: left;
    padding: 0px 6px 3px;
}
#navMenu li a {
    float: none;
}
#navMenu li a:hover, #navMenu li a.on{
    color: #FFF;
    background: #740404 top left repeat-x;
}

/*Sub-Menus*/
#navMenu li ul{
    margin: 0 0 0 -2px;    
    padding: 0;
    display: none;
    visibility:hidden;

    position: absolute;
}

#navMenu li:hover ul{
    display:block;
    visibility:visible;
    width: 10em;
}

#navMenu li li{
    display: list-item;
    clear: both;
    list-style: none;
    margin: 0;
}

#navMenu li li a{
    text-decoration: none;
    width: 150px;
}

#navMenu li li a:hover{
    color:#fff; 
}
</style>
</head>
<body>

<div class="position:relative; top:0">
    <div id="navMenu">
        <ul>
            <li>
                <a href="#" >Menu 1</a>
            </li>
            <li>
                <a href="#">Menu 2</a>
                <ul>
                    <li>
                        <a href="#">Menu 2.1</a>
                    </li>
                    <li>
                        <a href="#">Menu 2.2</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">Menu 3</a>
                <ul>
                    <li>
                        <a href="#">Menu 3.1</a>
                    </li>
                    <li>
                        <a href="#">Menu 3.2</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">Menu 4</a>
                <ul>
                    <li>
                        <a href="#">Menu 4.1</a>
                    </li>
                    <li>
                        <a href="#">Menu 4.2</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<script type="text/javascript">
$('#navMenu li>a').click(function() {
   console.log("clicked a link");
});
</script>

</body>
</html> 
```

这里也有一个小提琴[。](http://jsfiddle.net/dslack/yLhxW/)

我无法解释这一点，任何帮助将不胜感激！

谢谢

# android - 在 WebView 或 VideoView 中嵌入 iframe

> ID：13199882
> 
> 赞同：0
> 
> 时间：2012-11-02T17:03:18.327
> 
> 标签：android, html, flash, iframe

我想将以下 iframe 嵌入到 webview （或者如果可能的话，videoview。）

```
<iframe SRC='http://desistreams.tv/embed/discovery_science.php' width='600' height='470' marginwidth=0 marginheight=0 hspace=0 vspace=0 frameborder=0 scrolling='no'></iframe> 
```

出现的问题是视频无法启动。（我只看到一个带有广告的灰色区域。我之前读过几篇关于 iframe 和嵌入堆栈溢出的文章，但其中大多数是关于在他们的应用程序中嵌入 youtube 视频的。我想知道是否可以使用 videoview 来显示 iframe（或它的 src）或者我是否可以使用 webview 来完成。

```
wv.getSettings().setJavaScriptEnabled(true);
wv.getSettings().setBuiltInZoomControls(true);
if (Build.VERSION.SDK_INT < 8) {
    wv.getSettings().setPluginsEnabled(true);
} else {
    wv.getSettings().setPluginState(PluginState.ON);
} 
```

我正在使用 loadhtml 来加载 iframe，甚至没有显示直接链接，但它可以在我的浏览器中使用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T17:23:22.187

新设备不再支持 Flash，因此将它们嵌入网页是一种不好的做法。

我建议您使用视频的 Uri/URL 发送一个 Intent，这将在另一个应用程序上播放视频，请注意后退按钮将使用户返回您的应用程序。

```
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(Uri.parse(videoPath), "video/mp4");
startActivity(intent); 
```

# iphone - iPad 应用程序缺少图标

> ID：13199887
> 
> 赞同：0
> 
> 时间：2012-11-02T17:03:40.300
> 
> 标签：iphone, xcode, ipad

我以编程方式创建了一个图像视图并在其中填充了一个 png 文件。当我在模拟器中运行应用程序或在 Ipad 上调试它时，一切都很好。我存档了应用程序并作为 Ad-Hoc 部署 ipa 分发。我将 ipa 文件安装到 iPad，imageview 消失了。谁能帮帮我？png 文件没有问题，因为将其用作背景图片没有问题。

源代码如下

```
UIImageView *uiImageView = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 20, 20)];
UIImage *image = [UIImage imageNamed:@"first.png"];
uiImageView.image = image; 
```

也这样做了

```
UIImage *img = [UIImage imageNamed:@"first.png"];    
UIImageView * uiImageView = [[UIImageView alloc] initWithImage:img];
uiImageView.bounds = CGRectMake(20, 20, 20, 20);
CGRect frameimage = uiImageView.frame;
frameimage.origin.x = ..;
frameimage.origin.y = ..;
uiImageView.frame = frameimage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:06:26.670

仔细检查图像文件名的大小写。通常，您会发现模拟器对文件名不区分大小写（取决于您的 Mac OS X 磁盘的格式化方式），而模拟器*则*区分大小写。

因此，例如，如果您有一个名为的图像`Cat.png`，并且您尝试使用资源名称加载它`cat.png`，它可能在模拟器中工作，但在实际设备上无法工作。

这可能不是您的确切问题，但值得检查。

# php - 如何使用 PHP 和 Zend DB 调用带有数字列表的 Oracle 存储函数/过程

> ID：13199890
> 
> 赞同：0
> 
> 时间：2012-11-02T17:03:53.340
> 
> 标签：php, oracle, stored-procedures, zend-db, oracle-call-interface

这个简短的描述显示了如何：

1.  用 PHP Zend DB 连接 Oracle 数据库
2.  使用 Zend DB 调用存储过程/存储函数
3.  将**实数数组或整数集合作为输入参数**传递给存储过程/函数（我不会传入逗号分隔值的字符串）
4.  获取**存储函数的结果**

（注：我使用了 Oracle 11.x、PHP 5.x 和 Zend Framework 1.x）

我们走吧。

创建一个 Oracle 列表类型：

```
CREATE OR REPLACE TYPE NUMBER_LIST_TYPE IS TABLE OF NUMBER; 
```

创建存储函数：

```
CREATE FUNCTION MY_STORED_FUNCTION(id_list in NUMBER_LIST_TYPE) RETURN NUMBER AS 
    lv_list_size number;
BEGIN
    select count(*) into lv_list_size from table(id_list);
    RETURN lv_list_size; 
END MY_STORED_FUNCTION; 
```

创建一个 PHP 文件：

```
<?php
require_once 'Zend/Db.php';
require_once 'DataSource.php';

$db_config['host'] = 'khazgoroth'; 
$db_config['port'] = 1521; 
$db_config['username'] = 'thrall'; 
$db_config['password'] = 'chuchu'; 
$db_config['dbname'] = 'orgrimmar'; // see TNSNAMES.ORA

$db = Zend_Db::factory('Oracle', $db_config);

$conn = $db->getConnection();  

$sql = 'BEGIN :r := MY_STORED_FUNCTION(:pmids); END;';

// Create an OCI-Collection object of NUMBER_LIST_TYPE
$ids = oci_new_collection($conn, 'NUMBER_LIST_TYPE');

$id_array = array(1, 12, 67);

// Append all IDs to the collection;
foreach ($id_array as $id) {
    $ids->append($id);
}

// create a statement and bind the parameters 
$stmt = new Zend_Db_Statement_Oracle($db, $sql);
$stmt->bindParam(':pmids', $ids, SQLT_NTY);
$stmt->bindParam(':r', $result, SQLT_INT); // this is the result of the Stored Function

$stmt->execute();

print "Result: $result";
?> 
```

希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:07:02.137

恐怕 Zend_Db 做不到，但你可以通过 bindArray 方法增强 Zend_Db 的实现。

在纯 PHP 中，您可以使用[http://php.net/manual/en/function.oci-bind-array-by-name.php](http://php.net/manual/en/function.oci-bind-array-by-name.php)它真的很棒，您只需将 php 数组直接绑定到 pl/sql 过程。

# xml - XML 的 Protobuf 序列化

> ID：13199891
> 
> 赞同：1
> 
> 时间：2012-11-02T17:03:54.410
> 
> 标签：xml, base64, protocol-buffers

作为 POC，我正在研究在我的 XML Web 服务中从 Protobuf 序列化的假定速度和低内存（网络）占用空间中受益的可能性。

因此，不要产生如下消息：

```
<message>
  <author>Bob</author>
  <text>Hello John!</text>
  <date>1351875211751</date>
</message> 
```

我会生产类似的东西

```
<message>Cg5IZWxsbyBVbmtub3duIRIEQmlsbBiGteSPrCc=</message> 
```

使用我的 Protobuf 消息的 base64 编码。现在，base64 层的引入不会破坏使用 Protobuf 的整个目的（速度和带宽节省）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:09:38.160

> 现在，base64 层的引入不会破坏使用 Protobuf 的整个目的（速度和带宽节省）吗？

这取决于数据。如果您有少量具有短名称的字段并且每个值有很多数据，那么是的，它会更大。

如果您有*大量具有**短*值的字段，那么 XML 标记的大小将压倒数据。例如：

```
<message>
  <verylongname1>x</verylongname1>
  <verylongname2>y</verylongname2>
  <verylongname3>z</verylongname3>
</message> 
```

在 protobuf 格式中，每个字段只需几个字节，而由于在 XML 中有两次名称，每个字段的开销会很大。即使将数据大小乘以用于 base64 编码的常数 4/3，你仍然会更好。

当然，这是假设没有压缩。如果你压缩 XML，很多缺点就会消失——而我不希望 base64 protobuf 也能压缩得差不多。请注意，我们不知道您是否使用压缩。

您还应该考虑 XML 的诊断吸引力 - 无需通过 base64 解码器和 protobuf 打印机运行数据。

底线：这取决于您的数据以及您正在使用它做什么。当然，除了 XML 和 protobuf 之外，还有其他序列化方案。考虑json，例如...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T13:20:23.253

感谢您的评论和回答。

我意识到在我的二进制序列化消息上保留 XML 信封实际上是没有意义的，除了保留我熟悉的技术堆栈。在这种情况下，它只是迫使我将优化的二进制流转换为 base64（或其他文本）字符串。

如果我想测试或使用Protobuf，我最好单独测试它，而不是将它包装到另一层xml和base64中。我不需要公开 XML Web 服务，而是需要公开内容类型的服务，例如“application/octet-stream”或“application/x-google-protobuf”

# c# - 多次使用时，正则表达式匹配 css 类名

> ID：13199897
> 
> 赞同：1
> 
> 时间：2012-11-02T17:04:03.920
> 
> 标签：c#, regex

我正在尝试制作一个正则表达式来查找具有特定类的任何元素。

例如

```
<span class = "float"> 
```

为此我想出了这个：

```
\s*class\s*=\s*('|")\s*float\s*('|")\s* 
```

但是当然你可以声明多个 CSS

```
<span class = "float align cssnames"> 
```

我不确定您如何将其他所有内容设为可选。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:14:25.427

也许`\s*class\s*=\s*('|")[\w\s]*\bfloat\b[\w\s]*('|")\s*`？

`float`在引号之间，它在两边寻找*单词边界，可能被更多的单词字符和/或空格（即其他 CSS 类）包围。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:21:13.377

`Regex rgx = new Regex("\"float.*\"");`

将匹配“在此处浮动*任何内容，但以结束引号结尾*”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:04:44.580

此代码将查找 class=" 和 " 作为不匹配的锚。然后它将获取找到的每个属性值，并将它们中的每一个放入名为 Assignements 的命名捕获组中。

然后 linq 将仅提取那些名为 capture(s) 的名称，然后从捕获的组中查找单个“Float”项目并返回 true 或 false。

```
string data = @"<span class = ""float align cssnames"">";

string pattern = @"(?:class\s*=\s*\x22)((?<Assignments>[^\s\x22]+)(?:\s?))+(?:\x22)";

var containsFloat =
   Regex.Matches(data, pattern, RegexOptions.Multiline)
      .OfType<Match>()
      .Select(mt => mt.Groups["Assignments"].Captures
                                             .OfType<Capture>()
                                             .Select(c => c.Value))
      .SelectMany(assignments => assignments) // is an IEnumerable<string> = { "float", "align", "cssnames" } at this point
      .Any(assignment => assignment == "float"); // True! 
```

# xpath - 我正在使用 docx4j 读取 .docx 文件，我需要获取文档的段落并替换字符串

> ID：13199900
> 
> 赞同：2
> 
> 时间：2012-11-02T17:04:13.753
> 
> 标签：xpath, jaxb, ms-word, docx4j

我正在使用 docx4j 来读取和解析 .docx 文件，但是当我遍历段落时，它不是一次性读取所有段落。下面是我正在使用的代码示例。

```
private void replaceAcrAndDef(String acrName, String acrParensName, String oldDef, String newDef){
    String XPATH_TO_SELECT_TEXT_NODES = "//w:t";
    List<Object> paragraphs = template.getMainDocumentPart().getJAXBNodesViaXPath(XPATH_TO_SELECT_TEXT_NODES, true);
    for (Object obj : paragraphs){
        Text text = (Text) ((JAXBElement)obj).getValue();
        String textValue = text.getValue();
        System.out.println(textValue);
 } 
```

在上面的 for 循环的一次通过中，这将读作第一段 -

“团队通过对任务、测试、行政和一般服务网络和系统有直接的 MDA 经验，对要求有深刻的理解。重新建立一个对任务、流程和优先事项有深入了解的低风险、反应迅速的团队的好处。我们的综合利用"

但它缺少该段落的最后部分。这将在连续传球中出现。我在这里做错了什么。

该段的全部内容是：

团队通过对任务、测试、行政和一般服务网络和系统有直接的 MDA 经验，对要求有深刻的理解。这样做的好处是风险低、反应迅速的团队，对使命、流程和优先事项有明确的了解。我们使用基于集成信息技术的基于角色的管理 (RBA) 方法与相关承包商、现有流程和我们的补充流程协同工作。

我不知道是否有办法获取整个段落，但如果有的话会很好，因为我需要逐段进行字符串替换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T21:50:05.323

我将我的评论扩展到一个答案：

我猜，该段落包含多个文本元素（w:t）。您能否提供有关此问题的示例文档？在段落元素上使用 TextUtils.extractText 提取文本怎么样？

尝试 P.toString()。那里引用了 TextUtils，您也可以尝试使用 StringWriter。

* * *

使用[P.toString()](http://www.docx4java.org/docx4j/javadoc-2.6.0/org/docx4j/wml/P.html#toString())：

```
// Request paragraphs
final String XPATH_TO_SELECT_TEXT_NODES = "//w:p";
final List<Object> jaxbNodes = wordMLPackage.getMainDocumentPart().getJAXBNodesViaXPath(XPATH_TO_SELECT_TEXT_NODES, true);

for (Object jaxbNode : jaxbNodes){
    final String paragraphString = jaxbNode.toString();
    System.out.println(paragraphString);
} 
```

* * *

使用[TextUtils.extractText(...)](http://www.docx4java.org/docx4j/javadoc-2.6.0/org/docx4j/TextUtils.html#extractText%28java.lang.Object,%20java.io.Writer%29)和[StringWriter](http://docs.oracle.com/javase/7/docs/api/java/io/StringWriter.html)：

```
for (Object jaxbNode : jaxbNodes){
    final StringWriter stringWriter = new StringWriter();
    TextUtils.extractText(jaxbNode, stringWriter);
    final String paragraphString = stringWriter.toString();
    System.out.println(paragraphString);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T10:37:10.513

我正在使用这些方法使用 docx4j 执行搜索和替换（灵感来自[http://www.smartjava.org/content/create-complex-word-docx-documents-programatically-docx4j](http://www.smartjava.org/content/create-complex-word-docx-documents-programatically-docx4j)）：

```
public static List<Object> getAllElementFromObject(Object obj, Class<?> toSearch) {
    List<Object> result = new ArrayList<Object>();
    if (obj instanceof JAXBElement) obj = ((JAXBElement<?>) obj).getValue();

    if (obj.getClass().equals(toSearch))
        result.add(obj);
    else if (obj instanceof ContentAccessor) {
        List<?> children = ((ContentAccessor) obj).getContent();
        for (Object child : children) {
            result.addAll(getAllElementFromObject(child, toSearch));
        }
    }
    return result;
}

public static void findAndReplace(WordprocessingMLPackage doc, String toFind, String replacer){
    List<Object> paragraphs = getAllElementFromObject(doc.getMainDocumentPart(), P.class);
    for(Object par : paragraphs){
        P p = (P) par;
        List<Object> texts = getAllElementFromObject(p, Text.class);
        for(Object text : texts){
            Text t = (Text)text;
            if(t.getValue().contains(toFind)){
                t.setValue(t.getValue().replace(toFind, replacer));
            }
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:10:46.760

Sun/Oracle JAXB 中的 XPath 内容包含许多已知缺陷，这使得它在实践中的用处不如其承诺。

我不使用它。相反，我使用类似的东西：

```
 static class PFinder extends CallbackImpl {

            List<P> paragraphList = new ArrayList<P>();  

            @Override
            public List<Object> apply(Object o) {

                    if (o instanceof P ) {
                          paragraphList .add((P)o);
                    }                      
                    return null;
            }
    }

            PFinder PFinder = new PFinder();
            new TraversalUtil(paragraphs, PFinder);

            for ( P p : pFinder.paragraphList ) { ... 
```

你可以做类似的事情，寻找 w:t

或者，如果你真的想继续使用 XPath，你现在可以试试[MOXy](http://www.docx4java.org/forums/docx-java-f6/moxy-t1242.html)

更一般地说，我建议您考虑使用**内容控制数据绑定**，而不是您的字符串替换方法。在 docx4j 中，内容控制数据绑定提供了一系列优势，包括：

*   重复材料（例如表格的行）
*   有条件地包含/排除内容
*   包含图像（base64 编码）
*   XHTML 内容的导入

# objective-c - AFJSONRequestOperation 结果中的键周围缺少引号？

> ID：13199902
> 
> 赞同：2
> 
> 时间：2012-11-02T17:04:16.597
> 
> 标签：objective-c, json, ios5, afnetworking

整天被这个困扰，并寻求帮助尽快解决这个问题。任何帮助都会很棒。谢谢 ：-）

**缺少的引号**

从网上得到了这个 AFJSONRequestOperation 请求，除了一个关键的错误之外，它工作得很好：一些键缺少那里的引号值 = 不能使用它们！显然，AFNetworking 背景中正在进行一些解析，因为这些值按字母顺序返回 + 某些值上的一些 qoutes 的“修剪”。但我只想要“原样”的网络数据......

**格式应该是这样的；** theKey = "theValue";

**但有时它看起来像这样；** 键=值；// 注意值周围缺少的引号

**网络输出 json：**

我还检查了来自服务器的 json 格式是否正确，输出如下所示；

```
{"results":[{"ID":"3","Row_state":"Visible","CustName":"Customer Name","CustReferens":"Customer Referens","CustReferensMobil":"123456mob","CustNotes":"Customer Notes","Tel":"123456tel","Fax":"123456fax","Web":"www.example.se","Mail":"info@example.se","Street":"The road 5","Zip":"11122","City":"Stockholm","Products":"","Images":"","Logo":"myLogo.jpg","Text":"A lot of text goese here...","Seller":"","Favorite":"YES"}, 
```

**在应用程序中，我得到了这个结果；**

```
results =     (
            {
        City = Stockholm;          // Note the missing quotes around the value
        CustName = "Customer Name";
        CustNotes = "Customer Notes";
        CustReferens = "Customer Referens";
        CustReferensMobil = 123456mob;     // Note the missing quotes around the value
        Favorite = YES;             // Note the missing quotes around the value
        Fax = 123456fax;          // Note the missing quotes around the value
        ID = 3;             // Note the missing quotes around the value
        Images = "";
        Logo = "myLogo.jpg";
        Mail = "info@example.se";
        Products = "";
        "Row_state" = Visible;      // Now key got quotes + Note the missing quotes around the value
        Seller = "";
        Street = "The road 5";
        Tel = 123456tel;         // Note the missing quotes around the value
        Text = "A lot of text goese here...";
        Web = "www.example.se";
        Zip = 11122;       // Note the missing quotes around the value
    }, 
```

**而不是这个预期的结果**（所有带有引号的键值）；

```
results =     (
            {
        City = "Stockholm";
        CustName = "Customer Name";
        CustNotes = "Customer Notes";
        CustReferens = "Customer Referens";
        CustReferensMobil = "123456mob";
        Favorite = "YES";
        Fax = "123456fax";
        ID = "3";
        Images = "";
        Logo = "myLogo.jpg";
        Mail = "info@example.se";
        Products = "";
        "Row_state" = Visible;
        Seller = "";
        Street = "The road 5";
        Tel = "123456tel";
        Text = "A lot of text goese here...";
        Web = "www.example.se";
        Zip = "11122";
    }, 
```

**我的代码；**

```
NSURL *myUrl = [NSURL URLWithString:@"http://example.se/api.lasso"];
NSURLRequest *request = [NSURLRequest requestWithURL:myUrl];
AFJSONRequestOperation *operation;
operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
success:^(NSURLRequest *req, NSHTTPURLResponse *responce, id jsonObject) {
                                            NSLog(@"JSON Responce ÅF: %@",jsonObject);
                                            // Add result (an array from JSON) to NSMutableArray
                                            _restFeed = [jsonObject objectForKey:@"results"];
                                            NSLog(@"RestA-OListTVC > ViewDidload > AFN ÅF: _restFeed count = %i",[_restFeed count]);
                                            // Reload table with new data
                                            [self.tableView reloadData];
                                            }
failure:^(NSURLRequest *req, NSHTTPURLResponse *responce, NSError *error, id jsonObject) {
            NSLog(@"Recieved an HTTP %d", responce.statusCode);
            NSLog(@"The error was: %@",error);
            }];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:26:19.500

所有 JSON 键都有引号 - 这是规范的一部分。但是，当变成 NSDictionary 时，它们的键会丢失引号而变成`NSString`对象。

JSON `{"a": 1}`=> 目标-C`@{@"a" : @(1)}`

`NSLog`将去掉不包含空​​格的字符串周围的引号。不要使用输出`NSLog`作为你得到的内容的文字表示。只需按预期使用值，`valueForKeyPath:`它应该一切正常。

# android - Android 主屏幕小部件：RemoteViews setRemoteAdapter(...) 方法不适用于 API 11+

> ID：13199904
> 
> 赞同：9
> 
> 时间：2012-11-02T17:04:25.233
> 
> 标签：android, android-widget

所以 onUpdate 方法调用

`remoteViews.setRemoteAdapter(id, R.id.listview, intent)`

为了将适配器应用于小部件中的列表视图。

小部件的标题中有一个按钮，可以更改列表视图显示的数据集（假设电子邮件小部件的收件箱、发件箱、已加星标等）。当我单击该按钮时，它会将用户带到一个活动，允许他们选择要显示的数据集。进行选择后，将运行以下代码：

```
Intent intent = new Intent(this, WidgetReceiver.class);
intent.setAction("android.appwidget.action.APPWIDGET_UPDATE");
intent.putExtra("notify", true);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, new int[] {R.xml.widget_provider});
sendBroadcast(intent); 
```

这成功地调用了小部件的 AppWidgetProvider 类中的 onUpdate 方法。但是，如果我要在不同类型的数据集之间切换，在 2-3 次偏好更改之后，该`setRemoteAdapter`方法就会停止运行。我已经广泛记录了该过程，并且该方法应该调用一个服务，该服务又加载`RemoteViewsService.RemoteViewsFactory`该类以填充小部件及其适配器，但不会执行任何这些操作。在您更改首选项的前几次，它按预期工作。但之后就退出了。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T22:32:19.500

奇怪，但找到了解决方案。Android 似乎正在缓存您在 onUpdate 方法中使用的意图。如果您重新发送似乎具有相同意图的内容，它将不会按您预期的那样执行。

解决方案：有一个静态迭代整数，您将其作为参数包含在意图附加内容中。它为我解决了这个问题。

```
Intent intent = new Intent(context, WidgetService.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, currentWidgetId);
intent.putExtra("random", randomNumber);
randomNumber++;
intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME))); 
```

哦，安卓...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:34:30.277

我前段时间遇到过这个问题。这种随机数的方法也帮助了我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T11:01:40.587

不幸的是，建议的方法对我不起作用。有效的是打电话 `appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds, R.id.list_view);`

我的`AppWidgetProvider`类中有一个静态方法，每当我想更新小部件数据时都会调用它。我在该方法中调用了这个 notifyAppWidgetViewDataChanged 并且一切正常。现在小部件正确更新列表数据。

# vim - 启动时以正常模式执行命令

> ID：13199907
> 
> 赞同：0
> 
> 时间：2012-11-02T17:05:01.180
> 
> 标签：vim

我需要在启动时执行这些命令：

```
Ctrl+w J
Ctrl+w k
Ctrl+w l
Ctrl+w L 
```

在 vim 中以特殊方式放置窗口。我应该在 .vimrc 中添加什么？我试过这个：

```
execute "normal \<C-W> J"
execute "normal \<C-W> k"
execute "normal \<C-W> l"
execute "normal \<C-W> L" 
```

但它不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:27:10.337

您在右尖括号和字母之间放置的空格意味着您告诉 Vim 执行`Ctrl`+`W` `spacebar`然后是一些不是窗口命令的普通模式命令。删除空格，你会很好。

Ctrl-W 命令也可以命名`:wincmd`，因此您也可以像这样替换所有执行/正常的恶作剧：

```
wincmd J
wincmd k
wincmd l
wincmd L 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:04:22.933

我怀疑您想组织一个默认工作区。如果我是对的，您需要阅读`:help :mksession`.

在创建任何窗口之前都会读取您`~/.vimrc`的内容，因此将与窗口相关的命令放入其中并没有多大意义。

# javascript - 禁用 CSS click 事件（点击一个元素），保持该元素的 CSS hover 事件

> ID：13199910
> 
> 赞同：4
> 
> 时间：2012-11-02T17:05:31.330
> 
> 标签：javascript, html, css

我有一个嵌入在页面中的 youtube iframe，透明 div 正好放在它上面。

我在 div 中有链接，我使用 CSS :hover 使其仅在鼠标悬停在视频上时可见。

是否可以允许用户在不关闭 div 上的悬停效果的情况下单击 div 播放视频？我不能使 div 更小。

我正在寻找类似于`pointer-events:none`但保持 div 元素的悬停事件的东西。也许有一个javascript解决方案？

**代码演示：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Video test</title>
<style>
#storymenu{position:absolute; width:515px; height:386px;}
#storymenu a{display:none; margin-left:10px; margin-top:20px; padding:5px; background:#FFF;}
#storymenu:hover a{display:inline-block}
</style>
</head>

<body>
<div id="storymenu">
<a href="#" onclick="alert('next');return(false);"><span>Next Story</span> &gt;</a>
<a href="#" onclick="alert('prev');return(false);">&lt; <span>Prev Story</span></a>
</div>
<iframe width="515" height="386" src="http://www.youtube-nocookie.com/embed/5It4y8834Zd" frameborder="0" allowfullscreen></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:38:42.490

干得好...

这是一个[**工作小提琴**](http://jsfiddle.net/LGNCV/)

**CSS**

```
#video {
width:500px;
height:200px;
background-color:#333333;
display:block;
position:absolute;
left:0px; top:0px;
z-index:1;
}

#video a {
color:#ffffff;
}

#overlay{
display:none;
position:absolute;
left:30px; top:50px;
z-index:5;
}

#overlay a {
color:orange;
} 
```

**HTML**

```
<div id='holder'>
<div id='video'><a href=''>Link</a></div>
<div id='overlay'><a href=''>Overlay Link</a></div>
</div> 
```

**jQuery**

```
$('#holder').on('mouseenter', function(){
$('#overlay').fadeIn(250);
});

$('#holder').on('mouseleave', function(){
$('#overlay').fadeOut(250);
}); 
```

# windows - 通过 HTTP 代理测试 FTP 连接

> ID：13199911
> 
> 赞同：2
> 
> 时间：2012-11-02T17:05:32.187
> 
> 标签：windows, http, testing, ftp, http-proxy

我想允许我的应用程序通过 HTTP 代理连接到远程 FTP 服务器。我的主要问题是如何为此设置测试环境。这是用 C++ 编写的仅限 Windows 的应用程序。您能否推荐任何在 Windows 上易于安装和配置且可用于测试的 HTTP 代理实现？

# timer - 计时器和延迟如何在低级别工作

> ID：13199912
> 
> 赞同：6
> 
> 时间：2012-11-02T17:05:37.483
> 
> 标签：timer, delay, theory, timing, low-level

关于这个问题，我真的找不到任何有趣的东西，但我一直想知道很长一段时间以来，任何编程语言中的计时器和延迟是如何在低级别工作的。

据我了解，CPU 尽可能快地在其所有内核中连续执行指令（取决于其时钟速度），并且只要有任何要执行的指令（有一个正在运行的、活动的线）。

我觉得没有一种直接的方法可以在涉及实时的情况下操纵这个流程。然后我想知道动画之类的东西是如何工作的，在很多很多情况下都会遇到：

*   在 Windows 7 操作系统中，当您将鼠标移到开始菜单按钮上时，它会逐渐变亮；
*   在flash中，有一个时间轴，flash文档中的所有对象都根据FPS设置和时间轴进行动画处理；
*   jQuery支持各种动画；
*   代码执行延迟...

电脑（主板）有物理定时器吗？就像 CPU 有寄存器来执行其操作并在计算之间保存数据一样？我在互联网上没有找到任何关于此的内容。操作系统是否有一些非常复杂的编程，为与时间相关的所有事情提供最低级别的 API？

我真的很好奇答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:15:40.137

大多数（也许是所有）CPU 由主板上的时钟驱动，该时钟每隔一段时间就会“滴答”（产生信号）。这就是处理器上的兆赫 (MHZ) 或千兆赫 (GHz) 额定值告诉您的，这个时钟的运行速度。当您读到处理器可以安全地超频到更高的 GHz 设置时，这就是“超频”的意思。您上面描述的大部分内容都是由该时钟生成的“滴答声”触发的。这决定了 CPU 尝试执行下一条指令的频率，实际上它执行所有操作的频率......

不要将此时钟与[实时](http://www.webopedia.com/TERM/R/real_time_clock.html)时钟混淆，后者会跟踪现在的时间。所有对“系统时间”或“服务器时间”的引用都使用实时时钟，它是主板上的一个独立硬件，即使在计算机关闭时也能跟踪时间。

这两个“时钟”相互独立，用于两个完全不同的目的。一个驱动所有 CPU 处理。如果一个指定的进程（例如，将两个整数相乘）将花费 127 个 cpu 周期，那么它将花费多少实时时间完全取决于 cpu 时钟设置为多少千兆赫......如果它设置为 3.0 Ghz，那么这意味着 CPU 每秒可以执行 30 亿个处理器周期，因此需要 127 个周期的事情将需要 127/30 亿秒。如果您在主板上放置不同的时钟 cpu，那么相同的乘法将花费更多（或更少）时间。这一切都与实时时钟没有任何关系，它只是跟踪现在是什么时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-08T21:32:27.867

我不能保证这绝对是它的工作原理，但如果我要设计它，这就是我要开始的地方。

首先，您需要某种已知的时钟。这可以是运行 CPU 的同一个硬件时钟，也可以是独立的晶体时钟。

接下来，您需要一个基本计数器。这只是一个[加法器](https://en.wikipedia.org/wiki/Adder_(electronics))，它在每个刻度上加 1。如果你想改变你的计时器的规模，你可以自由地应用一个乘数。计数器可能会以给定的速率溢出，或者更有可能的是，它可以在您的计时器关闭时重置。

然后你需要一个寄存器来存储定时器的值。这是程序员将输入他们想要观察的值的地方。由于您已经足够低，只关心异步逻辑，因此您现在可以不断地将计数器中的每个位与寄存器中的相应位进行比较。您可以使用[相等比较器](https://www.101computing.net/equality-comparators-using-logic-gates/)来做到这一点。

当它们匹配时，比较器将发送一个可以触发中断的高信号（基本上是一个非常低级的挂钩或回调函数，将立即运行——因此得名“中断”）。

如果您在拥有操作系统的规模上工作，它可以创建自己的一组计时器。操作系统已经在使用这样的计时器来设置调度程序用来在同一内核上的线程之间分配时间的“量子”。它甚至可能有自己的纯软件实现，它可以提供给客户端软件。操作系统可以将硬件计时器设置为 1us（例如），并允许客户端在该频率的倍数上注册回调，以便在其下一个量程上运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T17:10:12.513

操作系统支持“睡眠”调用的某些变体，它将执行让给系统上运行的其他进程。如果所有进程都处于休眠状态，那么内核会告诉处理器休眠一段时间——现代处理器有一条用于该目的的指令。

# ruby - Ruby：从接受参数的方法中产生？

> ID：13199914
> 
> 赞同：2
> 
> 时间：2012-11-02T17:05:47.473
> 
> 标签：ruby, block, tree-traversal

我用 ruby​​ 编写了一个非常简单的递归树遍历方法。我想产生这种遍历的结果，以便我可以轻松地遍历树的节点。

```
def bottom_up_traversal (node)
    if(node.has_leaf_children?)
        node.children.each{|i| yield i} 
    else
        node.children.each{|i| bottom_up_traversal(i)}
        yield node
    end

end 
```

当我尝试调用它时，例如：

```
 bottom_up_traversal(@root){|this_node| puts this_node } 
```

我得到一个“错误数量的参数（0 代表 1）”。我知道这可能只是我用语法做的一些愚蠢的事情，但我找不到任何（甚至是基本的）这样做的例子......这让我相信我误解了我应该如何使用代码 - bocks（这对我来说无疑是新事物）

那么，您能否告诉我应该如何调用此方法，或者我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:24:31.527

在您调用的方法中，当您`bottom_up_traversal(i)`第一次调用它时，您没有传递原始块。未经测试，但我认为你想要更像这样的东西：

```
def bottom_up_traversal (node, &block)
    if(node.has_leaf_children?)
        node.children.each{|i| yield i} 
    else
        node.children.each{|i| bottom_up_traversal(i, &block)}
    end
end
###
bottom_up_traversal(@root){|this_node| puts this_node } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:47:12.093

最后，这不是原始方法调用，而是方法递归调用自身的方式才是问题所在，这并不是因为我没有真正理解代码块的工作原理。

菲利普用额外的“让步自我”电话回答完美。

非常感谢你！

```
def bottom_up_traversal (node, &block)
    if(node.has_leaf_children?)
        node.children.each{|i| yield i} 
        yield node
    else    
        node.children.each{|i| bottom_up_traversal(i, &block)}
        yield node
    end
end 
```

叫喜欢

```
bottom_up_traversal(@root){|this_node| puts this_node } 
```

以完美的顺序遍历它们。

# java - 尝试从 com.android.internal.widget 实现名为 MultiWaveView 的小部件

> ID：13199915
> 
> 赞同：1
> 
> 时间：2012-11-02T17:06:06.290
> 
> 标签：java

我正在尝试从 com.android.internal.widget 实现名为 MultiWaveView 的小部件也许有人已经尝试实现这个？

我在这堂课上的问题

```
class StateListState extends DrawableContainerState
{
    int[][] mStateSets;
    // Heare error (The constructor DrawableContainer.DrawableContainerState(StateListDrawable.StateListState, StateListDrawable, Resources) is undefined)
    StateListState(StateListState orig, StateListDrawable owner, Resources res)
    {
        super(orig, owner, res );

        if (orig != null) {
            mStateSets = orig.mStateSets;
        } else {
            mStateSets = new int[getChildren().length][];
        }
    }
} 
```

# ruby - 来自 Sketchup Ruby API 的清晰检查

> ID：13199920
> 
> 赞同：1
> 
> 时间：2012-11-02T17:06:20.750
> 
> 标签：ruby, sketchup

我在 Sketchup 插件中创建的一些对象包含嵌套数组属性。在调用 object.inspect 时，它们很难在 Sketchup 的 Ruby 控制台中读取。

是否可以在 Sketchup 插件中使用[Awesome Print ？](https://github.com/michaeldv/awesome_print)我不相信 Sketchup Ruby 控制台支持语法高亮 - 我可以破解`ap`写入真正的控制台吗？或者将输出写入`ap`文件？

我正在使用 Wine 运行 Sketchup - 所以出于所有实际目的......我在 Windows 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:12:24.313

我在 Sketchup 论坛上问过。我从 Aerilius那里得到了一个[绝妙的答案。](https://productforums.google.com/forum/#!msg/sketchup/lSlzh7Fez34/mrfa2MrvgBkJ)

> 您可以通过调用您自己的“log”方法或重定向 $stdout（但它不会获取所有消息并且 $stderr 为空）来获取文本文件的输出。
> 
> 众所周知，SketchUp 中的 Ruby 控制台对开发人员来说不是很舒服（而且速度很慢，而且您无法清除它）。有几个项目可以改进它：
> 
> *   [WebConsole](http://sketchuptips.blogspot.com.br/2007/08/plugin-webconsolerb.html) (Jim Foltz)
> *   [Ruby 控制台 Pro](http://sketchucation.com/forums/viewtopic.php?t=28323) (Martin Rhinehart)
> *   [Ruby 代码编辑器](http://forums.sketchucation.com/viewtopic.php?t=26368)(Alex Schreyer)
> *   [Ruby 控制台+](http://sketchucation.com/forums/viewtopic.php?t=46399) (Aerilius)
> 
> 在 Trimble 下，似乎对开发者社区进行了大量投资，SketchUp 团队最近在 github 上以开源形式发布了他们的内部开发工具。我最近将语法高亮合并到其中：[sketchup-developer-tools](http://github.com/SketchUp/sketchup-developer-tools)
> 
> 它还没有 Ruby Console+ 那么多的功能，但它可以输出到文件。
> 
> 如果您想在输入被评估后实现 Awesome Print，那将是非常酷的。

# php - 电子通讯电子邮件应用程序不发送电子邮件

> ID：13199922
> 
> 赞同：0
> 
> 时间：2012-11-02T17:06:24.103
> 
> 标签：php, email, smtp

因此，当我使用内部 php 应用程序发送电子邮件爆炸时，我的函数会被调用，该应用程序是由多年未在这里工作的程序员为我们的一个客户开发的。

它说“X电子邮件发送成功！”，但我从来没有收到它们。：/

也许我需要更具体地记录错误，因为我找不到导致它的原因。

有人有什么建议吗？

```
function SendBroadCastEmail() {

ini_set("SMTP", "206.196.112.2" ); 
ini_set('sendmail_from', 'theagencykc@gmail.com'); 

$clsPortfolio = new Portfolio();
if ($_REQUEST["frmBroadcastGroup"] == "All") {
    $strWhere = "";
}elseif ($_REQUEST["frmBroadcastGroup"] == "Active") {
    $strWhere = " WHERE p.Active = 1 ";
}elseif ($_REQUEST["frmBroadcastGroup"] == "Custom") {
    $selectEmails = array_unique($_REQUEST['frmBroadcastRecipentList']);
    $strWhere = " WHERE ";
    foreach ($selectEmails as $intRecipent) {
        $strWhere .= " OR Portfolio_ID = '$intRecipent' ";
    }
    $strWhere = str_replace(" WHERE  OR", " WHERE ", $strWhere);
}
$clsPortfolio->GetList($strWhere);
if ($rsRecipients = mysql_fetch_array($clsPortfolio->rsResult)) {
    do {
        if (trim($rsRecipients["Email"]) == "") {
            $aryNoEmail[] = array("Name" => stripslashes($rsRecipients["Name"]), "Portfolio_ID" => $rsRecipients["Portfolio_ID"]) ;
        }else{
            $aryRecipents[] = $rsRecipients["Email"];
        }
    } while($rsRecipients = mysql_fetch_array($clsPortfolio->rsResult));
}

$strHeaders  = "MIME-Version: 1.0\r\n";
$strHeaders .= "Content-type: text/html; charset=iso-8859-1\r\n";
$strHeaders .= "From: theagencykc@gmail.com\r\n";
foreach ($aryRecipents as $strRecipient) {
    mail(stripslashes($strRecipient), stripslashes($_REQUEST["frmBroadcastSubject"]),stripslashes( $_REQUEST["frmBroadcastBody"]), $strHeaders);
    if (mail(stripslashes($strRecipient), stripslashes($_REQUEST["frmBroadcastSubject"]),stripslashes( $_REQUEST["frmBroadcastBody"]), $strHeaders)) {
       echo("<p>Message successfully sent, buddy!</p>");
    } else {
       echo("<p>Message delivery failed... buddy</p>");
    }
}
$strBroadcastResults = "<b>" . count($aryRecipents) . " Emails Sent Successfully<br>";
if (count($aryNoEmail) > 0) {
    $strBroadcastResults .= "<u>The following models had no email on file:</u><br>";
    foreach ($aryNoEmail as $aryIndividual) {
        $strBroadcastResults .= "<a href=\"/docs/edit_portfolio.php?model_id=$aryIndividual[Portfolio_ID]\" target=\"_blank\">$aryIndividual[Name]</a>&nbsp;,";
    }
}
return $strBroadcastResults;
} 
```

# java - Java面试后的反思：继承与多态

> ID：13199923
> 
> 赞同：1
> 
> 时间：2012-11-02T17:06:24.697
> 
> 标签：java, inheritance, polymorphism

以下代码：

```
class Base{}

class Agg extends Base{

   public String getFields(){
    String name="Agg";
    return name;
   }
}

public class Avf{
   public static void main(String args[]){
   Base a=new Agg();
   //please take a look here
   System.out.println(((Agg)a).getFields());  // why a needs cast to Agg? 

  }
} 
```

我的问题是：为什么我们不能替换 `((Agg)a).getFields()` 为`a.getFields()`？为什么我们需要 type cast on `a`？我提到它`getFields()`没有在 class 中定义`Base`，因此 class`Agg`没有从它的基类扩展这个方法。但是，如果我 `getFields()`在 class中定义了方法`Base`，例如：

```
class Base{
    public String getFields(){
        String name="This is from base getFields()";
        return name;
    }
} 
```

一切都会好起来的。那么 **((Agg)a).getFields() 等价于 a.getFields()**

在代码中

```
Base a=new Agg(); 
```

这条线是否意味着`a`有引用`Agg()`并且可以直接调用class的方法`Agg`。但是，如果我不在`getFields()`类中定义方法，为什么会有区别`Base`？谁能给我解释一下？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T17:07:43.247

> `System.out.println(((Agg)a).getFields()); // why a needs cast to Agg?`

因为`Base`没有一个名为`getFields`.

宣言

```
Base a; 
```

...告诉编译器你在使用`a`. 然后分配给它并不重要，您必须分配的`new Agg();`接口*仍然*`a`是`Base`. 并且由于`Base`没有`getFields`，尝试使用`getFields`是编译错误。

> `Base a=new Agg();`
> 
> 这条线是否意味着`a`有引用`Agg()`并且可以直接调用class的方法`Agg`。

这意味着`a` *包含*对对象的引用`Agg`，但该对象的接口由`Base`, not定义`Agg`，因此`Agg`如果它们不是由`Base`( 没有强制转换，并且强制转换是危险的，应该是尽可能避免）。

如果您的代码需要访问由 定义的方法或字段`Agg`，则应该声明变量（或参数，在我的示例中）`Agg a`，而不是`Base a`.

这是关于 OOP 的基本内容，尤其是 Java 中的 OOP 实现：对象的*接口*和对象的*实现*之间存在很大差异。在您的示例中，您知道`Base a`它确实是一个`Agg`，但请考虑一下：

```
void foo(Base a) {
    // Use `a` here...
}

// A long time later in a class far, far away...
xyz.foo(new Agg()); 
```

很明显，编译器不应该允许您使用`a`未定义的方法或字段`Base`。您的代码中的情况相同，只是不太明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:12:25.460

> 我的问题是：为什么我们不能将 ((Agg)a).getFields() 替换为 a.getFields()？为什么我们需要在 a 上进行类型转换？

听起来你真的理解这一点 - 编译器不会在( )`getFields`的编译时类型上找到方法，因此它会引发编译时错误。`a``Base`

这似乎是这个问题的*真正*胆量：

```
 Base a=new Agg(); 
```

> 这行是否意味着 a 具有 Agg() 的引用，并且 a 可以直接调用类 Agg 的方法。但是，如果我没有在 Base 类中定义方法 getFields()，为什么会有区别？谁能给我解释一下？

这意味着编译器将只允许您访问 的成员`Base`，因为这就是它*知道*可用的全部内容。如果有多个同名方法，则*重载*决议也适用于编译时类型。

但是，在执行时，您实际上是在类型对象上调用方法`Agg`- 因此，如果`Agg` *覆盖*在 中声明的方法，则将使用`Base`该实现。`Agg`

基本上，您需要区分基于表达式的编译时类型在编译时做出的决策与基于对象的执行时类型在执行时（由 JVM）做出的决策值是指。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:25:05.470

An **instance** of a **Class** has access to its methods (defined in the class definition) and methods of its superclass (ex. Object class). Therefore instance of **Class Base** with reference variable "a", can not access method getFields(). It's neither defined in its class structure **or** its super class. When you [typecast](http://www.javabeginner.com/learn-java/java-object-typecasting) like below:

```
((Agg)a) 
```

You are basically changing changing the type from (Base) to type (Agg). Agg which is a subclass of Base, defines method getFields().

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T17:16:53.867

该行`Base a=new Agg();`表示
1 - 局部变量`a`属于类型 Base
2 - 有一个 Agg 类型的新对象
3 -`a`该对象的变量引用
对象和变量具有不同（但兼容）的类型。由于变量 a 具有 Base 类型，因此没有 a.getFields()
但是由于变量引用了 Agg 类的对象，因此您可以将其强制转换为 Agg 并访问 getFields
变量是（某种程度上类似于近似的）指向一个对象，而不是一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T17:17:20.207

因为 type`Agg`是更具体的`Base`. `a`您的声明中的类型是`Base`. 声明左侧的内容代表对象的类型。实际上`a`包含了 method `getFields()`，但是因为它是向上转型的，所以 method 被隐藏在了 type 中`Base`。我向您推荐[HeadFirstJava](http://www.amazon.de/Head-First-Java-Mike-Loukides/dp/0596009208)书。它可以帮助您清除这些概念。

# macos - Mac：如何设置进程优先级

> ID：13199928
> 
> 赞同：3
> 
> 时间：2012-11-02T17:06:38.393
> 
> 标签：macos, process

我正在编写一个音乐播放器，并且让播放音乐的过程以更高的优先级运行以避免underuns是有意义的。

简单地使用`nice(-5)`没有用 - 我得到`[Errno 1] Operation not permitted`看起来我需要超级用户权限的错误。

但我真的需要它们吗？

iTunes 或其他播放器是如何做到的？他们不问我的管理员密码，所以他们不使用超级用户权限。

* * *

**编辑：**我发现[这](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/scheduler/scheduler.html)描述了它如何在 OSX 中为线程工作。这主要回答了我的问题 - 但并不完全，因为我认为我的整个过程都需要它。

# php - imap_open返回的imap资源可以序列化吗

> ID：13199933
> 
> 赞同：0
> 
> 时间：2012-11-02T17:06:52.223
> 
> 标签：php, serialization, imap

imap_open 返回的 imap 资源可以序列化吗？

反序列化时出现错误“期望参数 1 是资源，给定整数”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:16:08.107

不，根据[文档](http://php.net/serialize)：“serialize() 处理所有类型，除了资源类型。”

想想看。serialize 只能处理 PHP 进程中物理存储的内容。当连接关闭时，所有服务器端状态、登录数据等都会丢失。即使客户端数据被序列化，服务器也会忘记存在的连接，并且在取消序列化时，客户端会说“嘿，伙计，还记得我吗？” 服务器将变为“否”。

# javascript - 命名点击事件绑定javascript

> ID：13199936
> 
> 赞同：1
> 
> 时间：2012-11-02T17:07:07.910
> 
> 标签：javascript, events

如果没有 jQuery（或任何库），我如何“命名”一个事件，以便以后可以分离该事件。例如，我在一个元素上有 3 个点击事件**：**

```
target1.addEventListener(click, callback1, false);
target1.addEventListener(click, callback2, false);
target1.addEventListener(click, callback3, false); 
```

我想取消绑定只是回调2。我**不**关心后备。我知道这很容易，但我在 jQuery 之外找不到任何材料（也许我使用了错误的措辞，idk）**。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:12:54.273

您需要保存事件侦听器，然后将它们用于： `element.removeEventListener(type, listener, useCapture)`

```
var div = document.getElementById('div');
var listener = function (event) {
  /* do something here */
};
div.addEventListener('click', listener, false);
div.removeEventListener('click', listener, false); 
```

你为什么不使用jQuery呢？

下面的链接是文档+代码示例： [https ://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)

# c++ - 实现类型转换

> ID：13199938
> 
> 赞同：0
> 
> 时间：2012-11-02T17:07:10.133
> 
> 标签：c++

所以我很难弄清楚我应该在哪里为我的代码实现类型转换。我理解类型转换的目的，但我只是不明白（或过度思考）它应该在我的给定情况下到底去哪里。

所以我有一个功能。它将接受输入并以十六进制形式打印出来。

```
void PrintHex(int InNum)
{
cout << hex << setiosflags (ios_base::showbase) << InNum;
}; 
```

问题是，它不会像预期的那样接收 int ，而是从我的类的成员函数中接收到浮点数。

```
float Sphere::CalcCircumference()
{
return (Pi * (Radius*2));
}; 
```

我需要将 float 类型转换为 int 以避免精度损失。但究竟我在哪里做呢？我觉得我可能需要在确定圆周的成员函数中执行此操作，以静态形式返回结果。但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:28:19.470

您的问题令人困惑：您提到您不想失去精度，但是将浮点数转换为 int 会导致精度损失。例如，

```
float i = 1.3;
int j = (int)i; // j get the value 1 
```

我猜您想将 float 变量的内容打印为 int，这样您就不会失去任何精度。如果是这样的话，方法如下：

```
float i = 1.3;
int j = *((int*)&i); // j get the int representation value of i 
```

我希望您了解浮点类型的舍入错误。在计算机中，没有这样的东西可以精确地表示，例如 0.2。所以浮点总是有一些小错误。但这超出了此功能的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:16:43.650

您不需要类型转换。只需调用您的函数：

```
PrintHex(sphere.CalcCircumference()); 
```

编译器将以与类型转换完全相同的方式将 float 转换为 int。

# jquery - 如何在页面离开时禁用调用焦点事件

> ID：13199940
> 
> 赞同：2
> 
> 时间：2012-11-02T17:07:27.680
> 
> 标签：jquery, focus

我有这个代码：

```
$('#search_user').keyup(function() {
    alert('hello keyup');
}).focus(function() {
    alert('hello focus');
}).blur(function() {
    alert('hello blur');
}); 
```

`#search_user`是`id`一个`input`领域的。

我关注输入，然后（不模糊）关注浏览器中的地址栏，然后单击 Enter。如果我这样做，我可以看到“警报焦点”。我该如何禁用它？我只想在我集中输入时发出警报，而不是在我用输入刷新页面时发出警报。

浏览器：FF 16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:26:27.230

I think you're looking for [the `focusin` event](http://api.jquery.com/focusin/). `focus` fires when losing focus as well as gaining focus.

# python - Gevent 与 Stream Server 的数据库连接池

> ID：13199949
> 
> 赞同：4
> 
> 时间：2012-11-02T17:08:02.593
> 
> 标签：python, postgresql, connection, pool, gevent

我正在使用 Python Gevent 的流服务器与另一台发送并发 TCP/IP 请求（平均 60 个请求/秒）的机器（远程）进行通信。这种通信的本质主要是 IO 绑定（短文本，然后是音频流）。我打算使用 Postgresql 来存储每次通信的结果（例如：从远程服务器接收到的文件名）。

我认为为Streamserver中产生的每个greenlet调用一个新的数据库连接是个坏主意（池大小90所以最大90请求/秒，这是我期望的最大值和平均60请求/秒）。是否有可能有可以排队的数据库连接池，并且在开始运行处理程序函数时每个greenlet都从池中获取数据库连接？有没有适用于生产系统的教程？你会怎么建议？我在 Ubuntu 10.04 64 位上使用 gevent 0.13.8 和 postgres 9.1 和 Python 2.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:47:14.040

应用程序内池的替代方法是使用[`PgBouncer`](http://wiki.postgresql.org/wiki/PgBouncer). 您仍然有 TCP 连接的开销和一些设置，但比创建一个全新的 PostgreSQL 会话要少得多*。*

与应用内池不同，PgBouncer 可以透明地引入现有系统，作为 PostgreSQL 和池之间的中介。只需将 PostgreSQl 移动到端口 5433 并让 PgBouncer 监听端口 5432。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:41:50.850

Gevent 在示例中包含一个 postgres 数据库池：

[https://github.com/gevent/gevent/blob/master/examples/psycopg2_pool.py](https://github.com/gevent/gevent/blob/master/examples/psycopg2_pool.py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T18:35:44.030

我实际上在这里回答了一个类似的答案：
[Python Postgres psycopg2 ThreadedConnectionPool 用尽了](https://stackoverflow.com/questions/48532301/python-postgres-psycopg2-threadedconnectionpool-exhausted/49366850?noredirect=1#comment85739742_49366850)

基本上我正在使用 gevent 设置一个异步连接池，通过 postgres 启动一个 Threadpool 连接，并将“绿色”连接状态添加到 postgres。

因此，基本上这会创建一个您指定的预设连接池（例如 100 个），然后使用该池对查询进行排队，因为一个查询返回一个新的查询被处理。我喜欢这种方法比普通的 postgres 池更好，因为请求的异步性质，以及在 Web 框架内实现的容易性。

# ffmpeg - 如何减小 mp4 文件中 moov atom 的大小

> ID：13199952
> 
> 赞同：2
> 
> 时间：2012-11-02T17:08:13.297
> 
> 标签：ffmpeg, streaming, mp4, x264

对于快速流式传输，我想知道如何减小 moov atom 的大小（有时 2-6 MB）。ffmpeg 或 x264 中是否有任何设置？我知道需要减少关键帧的频率，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:11:42.277

*   如果您创建“基线配置文件”流，ffmpeg 不会将 CTTS atom 放入 moov，尽管大小的减少不会显着。

*   “mov”文件还支持称为“cmov”的东西，它可以将moov atom的大小减少50%，但ffmpeg不支持这个（http://wiki.multimedia.cx/index.php?title=MOV#Decompressing_Compressed_moov_Atoms_With_zlib）你需要使用quicktime pro，而且播放器对cmov的支持也很严格。

# javascript - 在函数中使用变量

> ID：13199954
> 
> 赞同：0
> 
> 时间：2012-11-02T17:08:23.010
> 
> 标签：javascript, jquery

我正在学习 javascript，我使用 jquery 框架进行一些学习...请有人向我解释如何使用此示例来提醒 byebye 而不是 hello

更好的问题是如何在函数更改中更改 var msg

```
var msg = 'hello';
function change() {
msg = 'byebye';
}
alert(msg);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:09:42.667

好吧，如果`change()`在 之前被调用`alert()`，它会做你所期望的。

试试这个：

```
var msg = 'hello';

function change() {
  msg = 'byebye';
}

change();
alert(msg);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:11:06.800

你可以这样做：

```
var msg = 'hello';

function change() {
    msg = 'byebye';
    return msg;
}

alert(change());​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:09:58.257

```
var msg = 'hello';
function change() {
msg = 'byebye';
}
change();
alert(msg);​ 
```

您应该首先调用更改功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:10:26.477

这`msg`是在窗口对象的范围内..

你也没有调用这个`change()`函数

所以它正确打印`"hello"`

在警报之前调用该函数，您将看到您的预期..

```
change();
alert(msg);​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/NTSAq/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T17:11:01.700

从某种意义上说，你做对了。你首先设置的是一个全局变量

```
var msg = 'hello'; 
```

然后，您定义了一个具有该变量范围的函数

```
function change(){
 msg = 'byebye';
} 
```

然后你测试了：

```
alert(msg); 
```

但是，您从未做过的是调用您的函数。当您定义一个函数时，您需要调用它以使其代码运行，如下所示：

```
change();
alert(msg); 
```

* * *

**一些功能提示**

*使用闭包*

如果您想查看这种情况的最佳实践，我建议不要使用全局命名空间。你可以用所谓的闭包来做到这一点。它基本上将函数的本地范围包装在您的代码周围。此范围内的子函数共享范围。

```
(function(){
 var msg = 'hello';
 function change(){
  msg = 'byebye';
 }
 change();
 alert(msg);
})();//Wrapping the function in () and then using () on it will cause it to run the code without being called 
```

这不仅会单独保留全局命名空间，还将允许分配给闭包内部变量的内存——我们包装代码的函数——被更快地收集，因为一旦闭包的代码完成执行，它们就超出了范围。

请注意，`function change`在闭包中声明后，它将无法在全局范围内访问。如果您希望它在全球范围内可用，那么以这种方式执行它就没有多大意义。

*允许函数通过参数将更改传递给它*

函数区域内部`()`是可以传入参数的地方。在 javascript 中，它们的类型是动态的。使用`function change(newMessage)`意味着您可以`newMessage`在函数内部使用变量。它是隐式本地范围的。通过像这样传入新消息，这将允许各种不同的消息`change('byebye');`：

```
(function(){
 var msg = 'hello';
 function change(newMessage){
  msg = newMessage;
 }
 change('byebye');
 alert(msg);
})(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T17:11:13.643

用于`change()`调用函数：

```
change(); 
```

这会改变变量的值。现在您可以提醒新值：

```
alert( msg ); // "byebye" 
```

# css - 媒体查询在 ie8 中停止工作

> ID：13199955
> 
> 赞同：1
> 
> 时间：2012-11-02T17:08:25.543
> 
> 标签：css, internet-explorer-8, twitter-bootstrap, media-queries

我们仍然从 ie8 获得大量流量，但我们决心走响应式路线。过去，我们已经让媒体查询在 ie8 中工作，但使用我们最新的模板并没有成功。

我们在 html head 标签中的 CSS/viewport 设置：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" media="screen" href="/request/css/bootstrap.css">
<link rel="stylesheet" media="screen" href="/request/css/bootstrap-responsive.css">
<link rel="stylesheet" media="screen" href="/request/css/styles.css">

<script src="http://www.oursite.com/js/modernizr.custom.2.6.2.js"></script>
<!--[if (lt IE 9) & (!IEMobile)]>
      <script src="http://www.oursite.com/js/respond.min.js"></script>
<![endif]--> 
```

我们的媒体查询语法（使用引导程序）：

```
@media (max-width: 767px) { } 
```

我发誓这在过去有效，但现在没有。我们尝试了各种其他带有modernizr 自定义的polyfill，尝试了html5 shiv 来代替modernizr，尝试调整元视口设置，并尝试了不同的媒体查询语法（@media screen...）。我已经三重检查了 html 并验证了它。我们正在使用引导程序中的 row-fluid - 但它应该正确设置。我的想法不多了。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T10:09:18.687

我在新闻网站上使用了引导程序，但它在 IE8 上不起作用，我使用 css3-mediaqueries.js javascript 但仍然无法正常工作。如果您希望媒体查询与此 javascript 文件一起使用，请将屏幕添加到 css 中的媒体查询行

这是一个例子：

```
<script type="text/javascript" src="css3-mediaqueries.js"></script>

<style>
     @media screen and (max-width:900px) {}
     @media screen and (min-width:900px) and (max-width:1200px) {}
     @media screen and (min-width:1200px) {}
</style> 
```

# html - 如何在 iframe src 中不显示正确的 url

> ID：13199957
> 
> 赞同：0
> 
> 时间：2012-11-02T17:08:26.910
> 
> 标签：html

我有以下代码。当我查看源代码时，它会在 src 中显示我的 url。我不希望它显示。在 src 中不显示实际 url 但仍在 iframe 中显示正确内容的任何技巧

```
 <ice:panelGroup id="Success">
                 <iframe src="#{reqStatus.pdfURL}" width="820" height="400" ></iframe> 
            </ice:panelGroup> 
```

当我查看源代码时，我可以看到这个我想“隐藏”它，如果你愿意的话。如果显示，那么任何人都可以猜出一个数字，如 1235.pdf、1236.pdf 等。

```
<iframe height="400" src="http://myserver.com/MyApp/pdf/1234.pdf" width="820"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:12:03.837

您可以通过 javascript 设置 src 属性，而不是在 HTML 中设置它。

请参阅： [使用 jquery 更改 iframe 源](https://stackoverflow.com/questions/2930315/changing-iframe-source-with-jquery)

# html - 离线时ApplicationCache和错误

> ID：13199960
> 
> 赞同：2
> 
> 时间：2012-11-02T17:08:39.447
> 
> 标签：html, application-cache

我有一个运行良好的 HTML5 离线应用程序，缓存验证，并且它通常工作，直到我真正强制设备（或计算机）离线。

我有一个附加的处理程序，`window.applicationCache.onerror`因此我可以处理并提示可能发生的任何随机错误：

```
window.applicationCache.onerror = function (e) {
    console.log(JSON.stringify(e));
    model.errorInfo(JSON.stringify(e));
    model.cacheError(true);
}; 
```

然而，这个错误处理程序也会在设备离线时触发，这会抛出错误对话框，而实际上它不应该。

这吐出的 JSON 如下：

```
{"cancelBubble":false,"returnValue":true,
 "srcElement":{"onobsolete":null,"status":1},"defaultPrevented":false,
 "timeStamp":1351875347729,"cancelable":false,"bubbles":false,
 "eventPhase":2,"currentTarget":{"onobsolete":null,"status":1},
 "target":{"onobsolete":null,"status":1},"type":"error"} 
```

对于我可以寻找什么来处理这种特殊情况，我在这里看不到任何明显的东西。我应该忽略基于此处某些内容的错误，还是完全做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:15:21.903

> ...这个错误处理程序也会在设备离线时触发，这会抛出错误对话框，而实际上它不应该。

这实际上是[适合这种情况的事件](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#event-appcache-error)，因为`applicationCache`无法获取清单并因此对可能更新的清单进行操作。为这种情况举办另一场活动会很好，但现在还没有。

如果您想向用户显示有关缓存状态的有用信息：`applicationCache.status`每次触发事件时检查以查看更新先前缓存的应用程序 ( ) 或初始缓存 ( )`error`是否存在错误。`applicationCache.status===1``applicationCache.status===0`

# listview - 如何使运行时 ListView 具有绑定？wpf

> ID：13199964
> 
> 赞同：1
> 
> 时间：2012-11-02T17:08:55.897
> 
> 标签：listview, binding, datatemplate, gridviewcolumn, frameworkelementfactory

例如，我无法从此代码中获得结果！请帮助我，tnx。:)

```
 GridViewColumn gvc6 = new GridViewColumn();
        gvc6.DisplayMemberBinding = new Binding("sum");

        FrameworkElementFactory txt = new FrameworkElementFactory(typeof(TextBox));
        txt.SetBinding(TextBox.TextProperty, new Binding()); // sets binding

        gvc6.CellTemplate = new DataTemplate(typeof(string));
        gvc6.CellTemplate.VisualTree = txt; 
```

# android - 如何将位图解码为特定的文件大小？

> ID：13199965
> 
> 赞同：0
> 
> 时间：2012-11-02T17:08:57.833
> 
> 标签：android, bitmap, out-of-memory, decode, bitmapfactory

我目前正在缩小位图以避免 OutOfMemoryException。有没有办法指定要解码的文件大小？所以无论输入图像是什么文件大小，它都会被缩小到指定的文件大小。

我正在使用来自[http://androidbysravan.wordpress.com/category/outofmemory-exception-when-decoding-with-bitmapfactory/](http://androidbysravan.wordpress.com/category/outofmemory-exception-when-decoding-with-bitmapfactory/)的以下代码，直到找到指定输出文件大小的方法。

```
Bitmap bm = null; 
BitmapFactory.Options options = new BitmapFactory.Options(); 
options.inSampleSize = 10; 
AssetFileDescriptor fileDescriptor =null; 
try { 
    fileDescriptor = _context.getContentResolver().openAssetFileDescriptor(selectedImage,"r"); 
} catch (FileNotFoundException e) { 
    e.printStackTrace(); 
} 
finally{ 
    try { 
        bm = BitmapFactory.decodeFileDescriptor(fileDescriptor.getFileDescriptor(), null, options); 
        fileDescriptor.close(); 
    } catch (IOException e) { 
        e.printStackTrace(); 
    } 
} 
return bm; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:29:57.610

您解码的图像将采用压缩格式，例如 PNG、JPEG 等。因此，当您解码它们时，您所做的就是将它们以 android 可以理解的格式解压缩到内存中。尽管您无法控制解码图像的大小，但是您可以控制某些属性，这些属性允许您使用`BitmapFactory.Options`该类有效地解码图像。

这是关于如何正确使用此类来有效加载图像的优秀官方指南：

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# jquery - 如何在 .addClass 之后运行函数？

> ID：13199967
> 
> 赞同：1
> 
> 时间：2012-11-02T17:09:10.950
> 
> 标签：jquery, addclass, removeclass

`<li>`我有一个 jQuery 插件，可以向元素添加和删除一个类。我可以在添加`<li>`类后向运行函数的元素添加侦听器吗？

这是示例：

```
<ul>
   <li>item 1</li>
   <li>item 2</li>
   <li class="actual">item 3</li>
   <li>item 4</li>
   <li>item 5</li>
</ul> 
```

该类`actual`由插件移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:26:46.620

您正在使用的插件会触发您可以挂钩的事件。见[http://fredhq.com/projects/roundabout#events](http://fredhq.com/projects/roundabout#events)

```
$('ul').on('reposition', function(){
 // do what you want with $('li.actual')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:14:28.623

不是开箱即用的，但您可以使用此插件来挂钩 jquery 操作：

[https://github.com/aheckmann/jquery.hook](https://github.com/aheckmann/jquery.hook)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:24:03.323

[您还可以在使用.on()](http://api.jquery.com/on/)事件通过 .addClass() 添加类后添加监听器/事件。例如：

```
$('li:first').addClass('selected');

$('ul').on('click', '.selected', function(e) {
    alert($(this).text());
}); 
```

您也可以修改示例。

**[在http://jsfiddle.net/aQsMm/](http://jsfiddle.net/aQsMm/)尝试演示**

# java - Restlet + Jackson - 在哪里注册模块

> ID：13199969
> 
> 赞同：4
> 
> 时间：2012-11-02T17:09:15.833
> 
> 标签：java, jackson, restlet

我一直在使用 Restlet GA 的 3 月 2.2 快照，并使用 Jackson 来处理 JSON 转换。一切都运行良好，基本上是无形的。特别是，我什至不需要实例化 objectMapper。我也一直在使用 Joda DateTime，这也很好。

本周，我升级到最新的 2.2 Snapshot，它使用 Jackson 2.0.4（而不是 1.9）。在该版本的 Jackson 中，对 Joda DateTime 的支持已移至模块（在核心 Jackson 库之外）。

现在，当我运行测试代码时，出现以下错误：

```
WARNING: Unable to convert a [application/json,UTF-8] representation into an object of class com.fourspires.api.dto.CommitmentDTO
com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field "year" (class org.joda.time.DateTime), not marked as ignorable (2 known properties: , "chronology", "millis"])
 at [Source: org.restlet.engine.io.UnclosableInputStream@dcc5312; line: 1, column: 701] (through reference chain: com.fourspires.api.dto.CommitmentDTO["completeBy"]->org.joda.time.DateTime["year"]) 
```

当我尝试执行 Post() 时，这会导致 415 错误。

杰克逊人的回答是，我必须注册处理转换的 JodaModule，如下所示：

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.registerModule(new JodaModule()); 
```

这看起来很简单，但我不知道把这段代码放在哪里。我的测试代码正在调用：

```
commitmentsResource = 
  rootClient.getChild(SOME_PATH, CommitmentsResource.class);  
commitmentsClient = ((ClientProxy) commitmentsResource).getClientResource();
commitmentsClient.post() 
```

在服务器端，我有一个界面：

```
public interface CommitmentsResource {
  @Get Representation represent();
  @Post("json") Representation postJson(CommitmentDTO commitment);  
  @Post("form") Representation postForm(Form commitmentForm);  
} 
```

然后我有 CommitmentServerResource

```
@Override
public final Representation postJson(final CommitmentDTO commitmentDTO) {...}

@Override
public final Representation postForm(final Form form) {...} 
```

所以我看不到在哪里插入 objectMapper 以便可以调用 Post()。这就像我想设置全局/默认对象映射器，但我不知道在哪里可以找到它（或者它是否存在）。

我尝试将两行 objectMapper 代码添加到我的 createInboundRoot 中，但这似乎没有什么不同。

非常感谢您的任何建议，因为我似乎完全被困在这里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:05:16.667

我刚刚尝试了 Restlet 2.2 的最后一个快照（10 月发布，基于 jackson 2.1.0），它对我有用。

# ios - 捆绑的文件（在引用的文件夹中）未更新

> ID：13199970
> 
> 赞同：1
> 
> 时间：2012-11-02T17:09:17.440
> 
> 标签：ios

我将一些 JSON 配置文件与我的应用程序捆绑在一起。

它们通过 Xcode 使用文件夹引用（显示为蓝色文件夹图标）包含在内。

果然，这些文件夹中的文件可以在捆绑包下的应用程序中找到。修改文件（即更改 JSON 内容）也可以。

但是，我已经添加/删除了这些文件夹中的一些文件，但我仍然看到旧文件，而不是我的测试设备上的新文件。

我已经尝试删除应用程序并重新启动设备，但是当我在设备上再次运行应用程序时，我仍然只能看到旧的捆绑文件。

模拟器被说服通过模拟器重置查看新文件集 - 对于真实设备来说不是一个好的选择。这在开发中已经够痛苦了，但对于已发布的应用程序来说不是一个选择。

我很高兴知道为什么会发生这种情况，以及如何克服这个问题，以便最新的文件夹内容与设备同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:23:56.050

从使用“文件夹引用”构建的应用程序中可靠地删除过时文件的唯一方法是进行干净构建（不仅删除并完全重新构建应用程序，而且完全清除“派生数据”文件夹） .

AFAIK，Xcode 中没有内置规则来从使用文件夹引用构建的目标中删除已删除的文件。当我使用的项目将其所有图像（或某些资源）放入单个文件夹中时，我经常看到这种情况，然后后续构建保留旧文件（及其旧文件名）仍然存在，即使它们不在原始文件中源代码文件夹。

这似乎是某人编写 Xcode 插件或某些工具来验证构建的应用程序/目标的内容以确保其中的文件一对一匹配的机会。

# javascript - 格式化JavaScript代码时如何防止eclipse删除换行符？

> ID：13199972
> 
> 赞同：1
> 
> 时间：2012-11-02T17:09:26.020
> 
> 标签：javascript, eclipse

我有这个代码：

```
section.append('<div class="thumbnail">' 
    + '<img src="public/images/thumb100x200.png">' 
         + '<span class="title">' + i + '</span>' 
    + '</div>'); 
```

当我在 Eclipse 中格式化此代码时，它会删除换行符，结果如下所示：

```
section.append('<div class="thumbnail">' + '<img src="public/images/thumb100x200.png">' + '<span class="title">' + i + '</span>' + '</div>'); 
```

加入这样的字符串时，如何使 eclipse 不删除换行符？

我已经在*Window->Preferences->Javascript->Editor*下寻找了一个设置，但找不到任何可以解决这个问题的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T01:59:04.860

这似乎适用于 4.4.0

项目 > 属性 > Java 编辑器 > 保存操作 > 配置工作区 > 格式化程序 > 编辑 > 换行 > “从不加入已经换行的行”。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-11-02T17:15:07.723

如果你去 Window->Preferences->Javascript->Editor 你会发现所有的自动格式化规则。除此之外，祝你好运！

# ubuntu-12.04 - 期望脚本的速度

> ID：13199977
> 
> 赞同：1
> 
> 时间：2012-11-02T17:09:42.590
> 
> 标签：ubuntu-12.04, expect, ssh-keys

我有以下期望脚本来自动化 Ubuntu 上的 SSH 密钥生成。该脚本按预期运行，并生成密钥对，但需要 50-60 秒才能完成。这比我在空盒子上所期望的要多得多。

```
#!/usr/bin/expect --
eval spawn /usr/bin/ssh-keygen -t rsa

expect -re {Enter file in which to save the key (/root/.ssh/id_rsa): }
send -- "\r"

expect -re {Overwrite (y/n)? }
send -- "y\r"

expect -re {Enter passphrase (empty for no passphrase): }
send -- "\r"

expect -re {Enter same passphrase again:" }
send -- "\r"

puts "\nEnded expect script." 
```

任何提示或提示要改变什么？

编辑：根据 Niall Byrne 的回答，我找到了以下期望脚本，该脚本快速且可处理首次密钥生成以及密钥重新生成（覆盖）。

```
#!/usr/bin/expect -f
set timeout -1
spawn /usr/bin/ssh-keygen -t rsa
expect {
  "Enter file in which to save the key" {send -- "\r" ; exp_continue}
  "Overwrite" {send -- "y\r" ; exp_continue}
  "Enter passphrase (empty for no passphrase):" {send -- "\r" ; exp_continue}
  "Enter same passphrase again:" { send -- "\r" ; exp_continue}
  eof
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:06:18.170

我认为您延迟的主要原因是您的提示与 Expect 不完全正确。

```
expect -re {Overwrite (y/n)? }
send -- "y\r" 
```

您在此处指定正则表达式语法 (-re) 您期望模式中的许多字符都是保留的正则表达式字符，即。? ( ) 。

这行的真正效果是它会寻找匹配这行的正则表达式 10 秒，然后放弃并继续发送 y。您基本上只是在发送“y”之前创建了 10 秒的延迟。代码中的其他行具有类似的特征。

考虑将此行修改为：

```
expect {Overwrite (y/n)?} 
```

或者

```
expect -re {Overwrite.*} 
```

（这是对熵的关注之外的问题，但这个预期问题是您看到的大部分延迟的原因。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:13:04.477

您可能正在处理缺乏熵的问题。生成密钥时，密钥生成器利用系统熵/随机数池（通常为 /dev/random）。如果盒子几乎没有负载，随机数池将阻塞，直到可以收集到足够的环境随机信息（网络流量、磁盘、键盘、鼠标和其他 I/O 设备的时序）。

# ios - iOS 本地通知，更改关闭按钮文本

> ID：13199978
> 
> 赞同：0
> 
> 时间：2012-11-02T17:09:45.523
> 
> 标签：ios

我正在使用 phonegap 生成本地通知。我想更改关闭按钮的文本。

那么，是否可以更改通知消息的关闭按钮中的文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:03:16.970

无法更改通知按钮中的文本。所有用户的所有通知都相同。

[正如您在 UILocalNotification http://developer.apple.com/library/ios/documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)中的文档中所见

# redundancy - 纠错码

> ID：13199985
> 
> 赞同：4
> 
> 时间：2012-11-02T17:10:25.170
> 
> 标签：redundancy, error-correction, error-detection, reed-solomon

对于允许银行/电汇的支付系统，我需要可靠地将支付与它们所针对的相应用户帐户相关联。为此，用户应在与他的帐户关联的转账中包含一个参考号。

我想用内置冗余（额外符号）生成这个数字，这样我就可以检测和纠正最多 N 个以下（可能是常见的）错误：

*   序列中的符号不​​正确（错字）
*   两个符号的交换（我猜这与两个不正确的符号相同）
*   序列中缺少符号
*   序列中的**额外**符号

我搜索了一下，似乎 Reed Solomon 或 BCH 是常用的代码。我唯一找不到的是它们是否支持最后一种情况，即额外的符号。

另外，我希望代码有一个故障模式，它说：“这太糟糕了，我无法修复它”，而不是给我一个随机的“更正”结果。我想我可以简单地通过生成稀疏的参考号来做到这一点，并希望它不太可能意外地碰到一个有效的参考号，但我宁愿有这样的东西：“我最多可以纠正 5 个错误，但如果它是超过3个，我放弃。”

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:54:49.467

我还没有花太多时间进一步研究这个问题，但我想我已经想出了一个初步的方法来解决这个问题，我现在将继续研究：

我将使用 32 个字符的字母创建帐户参考号。我将把这个字母分成两组，每组 16 个字符，优化这些组以最小化随机拼写错误产生另一组字母的机会。例如，只需将键盘一分为二，使用带有角 [1]、[4]、[v]、[z] 的框中的字母作为一组，将其他字母作为另一组。

然后，我将使用 [14, 8, 7] [16] Reed-Solomon 代码对 32 位帐号进行编码，我首先将其拆分为 8 个 4 位字符。

生成的消息，我将通过从第一个半字母表中选择第 1 个、第 3 个、第 5 个……字符以及从第 2 个半字母表中选择其他字符来转换为参考号。这样，如果我检测到任何交换的、额外的或丢失的字符，我就可以“重新同步”参考号。

重新同步后，RS 代码应该允许我更正多达 3 个其他拼写错误，如果有人犯了更多错误，他们应该遇到付款问题...... :)

我很想听听任何人对这种方法的任何评论。

# php - 为给定字符串生成正则表达式并编辑距离

> ID：13199987
> 
> 赞同：6
> 
> 时间：2012-11-02T17:10:26.817
> 
> 标签：php, mysql, regex, edit-distance

我有一个问题，我想匹配数据库中与给定字符串具有一定编辑距离的所有字符串。

我的想法是生成一个正则表达式，该表达式将匹配所有具有与 string 编辑距离`d`的字符串`s`。

因此，例如，我想为以下形式生成正则`r`表达式：`d = 1`等等。但我不确定这是否非常有效，或者是否已经有一些很好的算法来解决这个问题？我想考虑在编辑距离中甚至字符交换。所以也应该是一部分。我想在 PHP 中实现它，然后进行 SQL 查询：.`s = 'abc'``r = 'abc|.abc|.bc|a.c|ab.|abc.'``'acb'``r``SELECT * FROM table WHERE name RLIKE TheRegularExpression`

这是一个很好的方法吗？或者你会推荐什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:38:29.460

您可以在 Mysql中存储[Levenshtein 函数。](http://www.artfulsoftware.com/infotree/queries.php#552)之后，您可以像这样简单地进行搜索：

```
mysql_qery("SELECT `term` FROM `words` WHERE levenshtein('$word', `term`) BETWEEN 0 AND '$d'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:37:05.560

您需要[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)的实现（或非常类似的东西）。这是一个用于 MySQL的[函数定义。](http://www.artfulsoftware.com/infotree/queries.php#552)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:38:53.670

最好的办法可能是为所有可能性建立一个迭代过程。换句话说，是这样的：

```
function findall($startString) {
    // create an array of all strings that are distance one away
    // each element would be $returnArray["abc"] = "abc";
}

$d = 2; // distance
$myArray[$startString] = $startString;

for($i = 0; $i < $d; $i++) {
    $newCombos = array_merge(array(), $myArray);
    foreach($myArray as $element) {
        $newCombos = array_merge($newCombos, findall($element));
    }
    $myArray = array_merge(array(), $newCombos);
}

$myRegex = implode("|", $myArray); 
```

# android - jQuery移动按钮按下事件处理缓慢

> ID：13199989
> 
> 赞同：3
> 
> 时间：2012-11-02T17:10:44.103
> 
> 标签：android, ios, cordova, jquery-mobile

似乎每当我按下移动设备上的输入按钮或锚按钮时，处理 onclick 或按下事件需要一两秒钟。有没有办法加快这个速度？

我在 Android 设备上使用 Phonegap + jQuery Mobile，在 iOS 上似乎快一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T17:32:05.937

来自[http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html](http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html)

> **$.mobile.buttonMarkup.hoverDelay**
> 
> 如果您发现按钮向下/悬停状态（列表、按钮、链接等）感觉迟缓，则可能使用 $.mobile.buttonMarkup.hoverDelay 设置。它将减少触摸事件和相关类的应用之间的时间，但也会导致即使在用户滚动时（例如，在长链接列表上），应用相同类的机会也更高。

例如：

```
$( document ).bind( "mobileinit", function() {
    $.mobile.buttonMarkup.hoverDelay = 500
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:21:36.013

使用[快速按钮](https://developers.google.com/mobile/articles/fast_buttons)将消除 300 毫秒的延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:20:30.560

touchend 事件非常活泼。

```
$(someElement).bind('touchend',function(){
  //other code
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-23T20:00:23.640

*   jQuery mobile 有点错误和缓慢。
*   您需要自己控制某些行为的快速按钮。
*   Fastclick 搞砸了我的代码。

*   **Tappy**是重编码页面的解决方案。它轻巧且可操作：

    [android webview中的onClick事件太慢了](https://stackoverflow.com/questions/4931102/onclick-event-in-android-webview-too-slow/24902600#24902600)

# c# - 连接字符串时使用 char[] 和 StringBuilder 和 string 没有区别

> ID：13199993
> 
> 赞同：3
> 
> 时间：2012-11-02T17:10:57.410
> 
> 标签：c#

据说在串联方面`char[]`表现更好`StringBuilder`并且`StringBuilder`表现更好`string`。

`StringBuilder`在我的测试中，使用和`string`循环内部没有显着差异。实际上`char[]`是最慢的。

我正在针对具有 44 列和 130,000 行的同一个表进行测试，查询是 select * from test

有人可以帮我看看我是否做错了什么？

以下是代码

```
//fetchByString(rd, fldCnt, delimiter, sw);            // duration: 3 seconds

//fetchByBuilder(rd, fldCnt, delimiter, sw, rsize);    // duration: 3 seconds

//fetchByCharArray(rd, fldCnt, delimiter, sw, rsize);  // duration: 7 seconds

private void fetchByString(OracleDataReader pReader, int pFldCnt, string pDelimiter, StreamWriter pWriter)
{
  while (pReader.Read())
  {
    string[] s = new string[pFldCnt];
    for (Int32 j = 0; j < pFldCnt; j++)
    {
      if (pReader.IsDBNull(j))
      {
        s[j] = "";
      }
      else
      {
        s[j] = pReader.GetValue(j).ToString();          // correct value
      }
    }
    pWriter.WriteLine(string.Join(pDelimiter, s));      
  }
}
private void fetchByBuilder(OracleDataReader pReader, int pFldCnt, string pDelimiter, StreamWriter pWriter, int pRowSzie)
{
  StringBuilder sb = new StringBuilder(pRowSzie);
  while (pReader.Read())
  {
    for (Int32 j = 0; j < pFldCnt; j++)
    {
      if (pReader.IsDBNull(j))
      {
        //sb.Append("");
        sb.Append(pDelimiter);
      }
      else
      {
        sb.Append(pReader.GetValue(j).ToString());          // correct value
        sb.Append(pDelimiter);
      }
    }
    pWriter.WriteLine(sb.ToString());
    sb.Clear();
  }
}
private void fetchByCharArray(OracleDataReader pReader, int pFldCnt, string pDelimiter, StreamWriter pWriter, int pRowSzie)
{
  char[] rowArray;
  int sofar; 
  while (pReader.Read())
  {
    rowArray = new char[pRowSzie];
    sofar = 0;
    for (Int32 j = 0; j < pFldCnt; j++)
    {
      if (pReader.IsDBNull(j))
      {
        pDelimiter.CopyTo(0, rowArray, sofar, pDelimiter.Length);
        sofar += pDelimiter.Length;
      }
      else
      {
        pReader.GetValue(j).ToString().CopyTo(0, rowArray, sofar, pReader.GetValue(j).ToString().Length);
        sofar += pReader.GetValue(j).ToString().Length;
        pDelimiter.CopyTo(0, rowArray, sofar, pDelimiter.Length);
        sofar += pDelimiter.Length;
      }
    }
    string a = new string(rowArray).TrimEnd('\0');
    pWriter.WriteLine(a);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:33:58.980

StringBuilder 比 string concat 更受欢迎，因为 string concat 经常必须使用每个 + 运算符分配数据的临时中间副本，这会快速消耗大量内存并且需要多次复制数据。StringBuilder.Append() 在内部进行了优化，以避免多次复制或分配子段。所有工作都发生在 StringBuilder.ToString 中，当输出字符串的最终大小已知并且可以在一次调用中分配时。

您的测试用例没有使用字符串连接。您将一堆字符串片段分配到一个字符串数组中，然后调用 String.Join。这基本上就是 StringBuilder 在内部所做的。即使您消除了可能主导基准测试时间的数据 I/O 开销，我仍希望 String.Join() 和 StringBuilder.ToString() 产生类似的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:24:37.757

I'm not familiar with this claim, but there seems to be WAY more conversions going on in the `char[]` the way you've written it.

`pReader.GetValue().ToString()`, besides putting the value in a format that's not what you're working in (`string` instead of `char[]`), is happening 3 times in the `char[]` assignment as opposed to just 1 in the others. You should probably find some way to cast your 'true value' directly to a `char[]` to be valid. Otherwise from a benchmarking perspective you could theoretically be pulling down performance by introducing slowness from something else. I'm not asserting that's what's happening, but procedurally it's considered important. Even if you can't do that, I think you still might realize a small performance boost if you put in `var stringRep = pReader.GetValue().ToString()` and used `stringRep` instead of the associated GetValue/ToString call.

Incidentally, I'm not sure how you're timing this, but if you're not using the [Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx) class you might look into it, just to be sure your timing is appropriate as well. It's basically made with this sort of benchmarking in mind. This would also allow you to actually isolate what you're trying to benchmark (the concatenation operations) without getting all that mess from the oracle reader in there as well.

# javascript - 这是不显眼的 javascript 的缺点之一吗？

> ID：13199997
> 
> 赞同：4
> 
> 时间：2012-11-02T17:11:07.160
> 
> 标签：javascript, jquery, unobtrusive-javascript

将内联javascripts 添加到html 标记（例如onclick、onsubmit...等）被认为是不好的做法。

```
<form id="form1" onsubmit="return validate();">
...
</form>
<a id="link1" href="http://www.google.com/" onclick="return popup();">Link1</a> 
```

但是如果我们像下面那样做，是否有可能因为用户在调用 dom 就绪函数之前与页面交互而没有调用`validate`or函数？`popup`

```
<form id="form1">
...
</form>
<a id="link1" href="http://www.google.com/">Link1</a>
<script type="text/javascript">
$(document).ready(
    function(){
        $('#form1').submit(
            //validate
            function(){...}
        );
        $('#link1').click(
            //popup
            function(){...}
        );
    }
);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:14:15.133

如果您的方法位于外部文件中，则无论您如何附加该方法，都可以在加载脚本之前访问该表单。这是为了更容易维护和关注点分离的一个小折衷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:14:17.470

您始终可以将它们创建为禁用，然后`ready`仅在绑定事件后使用事件使它们启用。

请注意，`onxxx`如果您尝试遍历其中的 DOM，HTML 中的