# StackOverflow 问答 15194000-15194999

# opengl - 为什么OpenGL最初被设计成状态机？

> ID：15194002
> 
> 赞同：12
> 
> 时间：2013-03-04T03:14:28.423
> 
> 标签：opengl, directx

在我的 OpenGL 体验中，我经常忘记设置一些状态。所以我认为状态机在今天可能不是一个好的设计。但现在它必须兼容。而且我也知道DirectX在早期也是一个状态机。我想知道为什么 OpenGL 和 DirectX 最初被设计为状态机？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-04T06:19:22.087

当人们提到“状态机”时，不清楚人们的意思是什么，因为他们从不解释相反的意思。因此，我将在 OpenGL“状态机”与当前 D3D“不是状态机”方面进行一般性和具体性的讨论。

OpenGL 和 Direct3D 都使用全局状态。每个渲染命令都需要你设置一堆状态。

为了在这两个 API 中呈现，您必须设置一堆全局状态。您必须设置要使用的着色器。您必须设置要使用这些制服的当前参数。如果您使用纹理，则需要设置它们。您需要设置当前视口参数。等等。

*这种*“状态机”的原因很简单：硬件通常是这样工作的。

每个状态位代表 GPU 中的一些寄存器。这些寄存器*是 state*。需要加载着色器才能进行渲染。您需要设置视口寄存器。您需要设置正在使用的纹理寻址寄存器。等等。因此，API 是状态机，因为*GPU*是状态机。

您*可以想象*这将通过渲染命令来完成。但只要看看你需要通过多少物体。你必须传递一堆着色器、一堆纹理、你的顶点数据、你的帧缓冲区、你的视口设置、你的混合设置等等。

因此，API 让你做 GPU 所做的事情。你事先设置了所有这些东西。

另外，这使 API*更快*。为什么？因为现在 API 知道您正在使用什么状态。如果你想用不同的纹理渲染一个网格的不同部分，你可以保持帧缓冲区、视口、顶点数据等都相同。您在它们之间唯一改变的是您使用的纹理。

如果您使用带有数十个参数的某种巨型 Draw 调用，那么现在 API 必须查看每个参数以查看它是否与您上次的 draw 调用相同。如果不是，它必须更新 GPU 寄存器。

现在，至于OpenGL和D3D之间的区别。在这种情况下，所讨论的区别在于它们如何对待对象。

D3D 是基于对象的，因为修改对象的函数将对象作为参数。此外，大多数 D3D 对象是*不可变*的；创建它们后，您将无法更改它们的大部分设置。一旦你创建了一个特定大小、格式等的纹理，它就完成了。在不删除对象并创建新对象的情况下，您无法使用不同的大小/格式/等重新分配它。

OpenGL 是基于状态的。这意味着修改对象（大部分）的 OpenGL 函数不会将它们操作的对象作为参数。

这与其说是一种“设计”，不如说是 OpenGL 对向后兼容性的严格遵守。OpenGL 中的对象只是全局状态的片段；这就是它们的定义方式。为什么？

因为最初，在 OpenGL 1.0 中，*没有对象*（除了显示列表）。是的，甚至没有*纹理对象*。当他们认为这很愚蠢并且他们需要对象时，他们决定以向后兼容的方式实现它们。每个人都已经在使用在全局状态下运行的函数。所以他们只是说通过绑定一个对象，你覆盖了全局状态。那些曾经改变全局状态的函数现在改变了对象的状态。

通过这种方式，他们可以在 API 中引入对象，而无需引入一堆仅适用于对象的新函数。因此，以前工作的代码只需进行非常小的调整就可以与对象一起工作，而不是强制对代码进行非平凡的重写。这也意味着，如果他们需要引入戳纹理的新功能，他们可以使用*和*不使用对象。因此，它是向后和向前兼容的。

[大多数OpenGL对象都是这样工作的](http://www.opengl.org/wiki/OpenGL_Object)：如果你想改变它们，你必须绑定它们，然后修改“全局”状态。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T04:57:49.587

来自[http://www.cs.tufts.edu/research/graphics/resources/OpenGL/OpenGL.htm](http://www.cs.tufts.edu/research/graphics/resources/OpenGL/OpenGL.htm)：

> OpenGL 像状态机一样运行的原因是为了避免在每个函数调用上传递许多参数。
> 
> ### 最小的论证段落
> 
> 应用程序和 OpenGL 之间的通信最终必须通过工作站数据总线到达图形硬件。数据总线通常比工作站 CPU 和图形硬件慢得多，因此通常是高速图形的瓶颈。为了保持尽可能高的速度，OpenGL 在其函数调用中传递尽可能少的参数，这可以通过查看 OpenGL 文档看出。所有调用都假定许多内部变量先前已设置为您想要的值。

# service - 如何在 Solaris 上通过“svcs serviceName”的返回值获取服务的状态？

> ID：15194007
> 
> 赞同：0
> 
> 时间：2013-03-04T03:14:52.527
> 
> 标签：service, solaris

```
root@test:~# svcs serviceName
STATE          STIME    FMRI
disabled       21:29:14 svc:/application/serviceName:default
root@test:~#  echo $?
0 
```

我想通过命令行的返回值来获取 serviceName 的状态。但是 svcs 会返回 0 服务是启动还是关闭。我怎么才能得到它？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:04:51.580

命令返回值用于报告命令是否成功运行。此外，服务的状态多于“up”或“down”。

不过，您可以使用此 shell（ksh 和 bash）功能实现您想要的

```
function svc_up
{
    [[ "$(svcs -Ho state $1)" == online ]]
} 
```

# python - 更优雅/pythonic的方式来附加到数组，或者创建它

> ID：15194008
> 
> 赞同：1
> 
> 时间：2013-03-04T03:14:55.287
> 
> 标签：python, arrays

出于某种原因，考虑到我在 Python 中不断找到的所有语法糖，以下代码对我来说有点麻烦，所以我想问问是否有更好的方法：

```
pictures = list_of_random_pictures()
invalid_pictures = {}
for picture in pictures:
    if picture_invalid(picture):
        if not invalid_pictures.get(picture.album.id):
            invalid_pictures[picture.album.id] = []
        invalid_pictures[picture.album.id].append(picture) 
```

所以只是为了澄清，我想知道是否有一种更易读的方式来处理上面的最后 3 行。当我重复`invalid_pictures[picture.album.id]`3 次时，如果它完全可以避免的话，它似乎是不必要的。

**编辑**：刚刚意识到我上面的代码会发生 KeyError，所以我已经对其进行了更改以处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:20:51.420

事实上，标准库中有一个对象可以准确处理这种情况：[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)

它将为缺失键生成默认值的类型或函数作为其参数。

```
from collections import defaultdict

invalid_pictures = defaultdict(list)
for picture in pictures:
    if picture_invalid(picture):
        invalid_pictures[picture.album.id].append(picture) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T03:48:58.500

尽管我确实发现 Joel 的答案是通常的解决方案，但有一个经常被忽视的功能有时是可取的。当不是特别需要默认值时使用`dict.setdefault()`，当插入默认值时是一个异常（并且`collections.defaultdict`是次优的。您的代码，适合使用`setdefault()`将是

```
pictures = list_of_random_pictures()
invalid_pictures = {}
for picture in pictures:
    if picture_invalid(picture):
        invalid_pictures.setdefault(picture.album.id, []).append(picture) 
```

虽然这有创建大量（可能未使用的）列表的缺点，但在将默认设置为列表的特殊情况下，通常最好使用 a `defaultdict`，然后将其复制到常规 dict 以去除默认值价值。这并不特别适用于不可变类型，例如`int`or `str`。

例如，[pep-333](http://www.python.org/dev/peps/pep-0333/)要求`environ`变量是常规`dict`的，而不是 的子类或实例`collections.Mapping`，而是真实的、普通的 ol' dict。另一种情况是当您没有通过迭代器并应用于平面映射时；但是每个键都需要特殊处理，例如将默认值应用于配置时。

# javascript - 如何使用 javascript 更改 css img 元素

> ID：15194009
> 
> 赞同：1
> 
> 时间：2013-03-04T03:14:55.663
> 
> 标签：javascript, css, html, setattribute

我想使用 javascript 更改 CSS，以便我可以动态调整网页上单个图像的高度。这样做是为了无论屏幕尺寸如何，图像都能很好地适合可视屏幕。

我的 CSS

```
.wrapper img {
height: 630px;
} 
```

我的分区

```
<div class="wrapper" id="imageDiv"></div> 
```

我应该使用什么 javascript 代码将 CSS 高度更改为 200px。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:18:43.820

如果目标是根据视口高度等自动调整，为什么不直接以百分比设置高度：

```
.wrapper img {
    height: 100%;
} 
```

反正：

```
document.getElementById('imageDiv').style.height = '200px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:19:53.577

尝试这个 ：

```
document.getElementById("imageDiv").style.height="200px"; 
```

（这只会改变那个元素。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:20:49.360

使用 JQuery，你可以把你想要的方法放在里面：

```
$('img.wrapper').css('height','200px'); 
```

# python - Python 无法导入名称

> ID：15194010
> 
> 赞同：10
> 
> 时间：2013-03-04T03:14:59.867
> 
> 标签：python

我大半夜都在努力解决导入错误。

这是一个常见问题，但之前没有一个问题能完全回答我的问题。

我正在使用 PyDev（一个 Eclipse 插件）和库 Kivy（一个 Python 库）

我有一个像这样设置的文件结构：

```
<code>
    __init__.py
    main.py
    engine.py
    main_menu_widget.py 
```

“代码”保存在 Eclipse 文件夹“MyProject”中，但它不是一个包，所以我没有包含它。

文件如下所示：

主文件

```
# main.py
from code.engine import Engine

class MotionApp(App):
    # Ommited 
```

引擎.py

```
# engine.py
from code.main_menu_widget import MainMenuWidget

class Engine():
    # Ommited 
```

main_menu_widget.py

```
# main_menu_widget.py
from code.engine import Engine

class MainMenuWidget(Screen):
    pass 
```

我收到的详细错误是：

```
 Traceback (most recent call last):
   File "C:\MyProject\code\main.py", line 8, in <module>
     from code.engine import Engine
   File "C:\MyProject\code\engine.py", line 6, in <module>
     from code.main_menu_widget import MainMenuWidget
   File "C:\MyProject\code\main_menu_widget.py", line 3, in <module>
     from code.engine import Engine 
```

知道我在这里做错了什么吗？我刚刚重命名了我的整个文件夹结构，因为我把这个模块结构搞砸了，但我认为我已经接近它应该看起来的样子......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-02T09:42:15.340

似乎有一个循环导入。从`engine.py`你进口`main_menu_widget`，而从`main_menu_widget`你进口`engine`。

这显然是 python 不允许的循环导入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T03:17:25.673

它在同一个文件夹中，使用相对包名称（无论如何这样做是一个好习惯）：

```
from .engine import Engine 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T09:20:31.197

您的代码目录*是*一个包。确保它上面的目录，即`C:\MyProject`根据您的错误消息判断，在您的 PYTHONPATH 中。

通过选择您的项目并单击鼠标右键打开上下文菜单，然后选择*Properties*。选择*PyDev - PYTHONPATH*并从那里选择*源文件夹*选项卡。检查上述目录是否存在；如果不是按*Add source folder*，请从对话框中选择它并按*OK*。

# jquery - 基本 jquery 下拉菜单，阻止它不断打开/关闭

> ID：15194011
> 
> 赞同：1
> 
> 时间：2013-03-04T03:15:04.897
> 
> 标签：jquery, html, menu

```
<div id="mNavigator" style="position:absolute;top:0px;right:30px;color:#888;font-family:helvetica;font-weight:400,font-size:11px;letter-spacing:0;opacity:0.6;cursor:pointer;padding:18px;z-index:9999;background:red;">
You are browsing <span style="color:#fff">MYNAME</span>
</div>

<div id="dropDown" style="display:none;padding:8px;background:#1b1b1b;position:absolute;top:40px;right:40px;z-index:9999;">
<div style="width:319px;padding:8px 10px 8px 10px;background:#000;font-size:9px;font-family:helvetica,arial;color:#666;">MY HEADER</div>
</div>

$('#mNavigator').mouseover(function(){
    $(this).css('opacity','1');
    $('#dropDown').show('fast', function() {
     // Animation complete.
    });
}).mouseout(function(){
    $(this).css('opacity','0.6');
    $('#dropDown').hide('fast', function() {
     // Animation complete.
    });
}); 
```

我创建了一个基本的下拉菜单，我有两个问题希望专家能帮助解决

1）当您尝试将鼠标移到实际菜单项（显示 MY HEADER 的部分）上时，如何阻止菜单关闭 2）如果您在红色区域周围移动鼠标，菜单会很快保持循环，从而导致用户体验差，有什么办法吗？

为了方便起见，我在 jsfiddle 中包含了我的示例：http: [//jsfiddle.net/ECreX/1/](http://jsfiddle.net/ECreX/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:31:16.667

您可以将 HTML 包装在 DIV 元素中`<div id="mNav"></div>`

`**[LIVE DEMO](http://jsfiddle.net/ECreX/9/)**`

并使用：

```
$('#mNav').on('mouseenter mouseleave', function( e ) {
    var mEnt = e.type=='mouseenter',
        opacity  = mEnt ? 1 : 0.6 ,
        showHide = mEnt ? 'show' : 'hide' ;
    $('#mNavigator').stop().fadeTo(300, opacity);
    $('#dropDown').stop()[showHide](400);
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T03:21:33.880

如果将子菜单作为主菜单 div 的子菜单，并使用 .mousenter() 和 .mouseleave() 而不是 .mouseover() 和 .mouseout()，它可以解决问题。或者，您可以使用 .hover()，它是 .mouseenter() 和 .mouseleave() 的快捷方式。另请注意，通过嵌套子菜单 div，当鼠标悬停在子菜单上时，主菜单保持活动状态。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ECreX/7/)**

**HTML**

```
<div id="mNavigator" style="position:absolute;top:0px;right:30px;color:#888;font-family:helvetica;font-weight:400,font-size:11px;letter-spacing:0;opacity:0.6;cursor:pointer;padding:18px;z-index:9999;background:red;">You are browsing <span style="color:#fff">MYNAME</span>
    <div id="dropDown"
    style="display:none;padding:8px;background:#1b1b1b;position:absolute;top:40px;right:40px;z-index:9999;">
        <div style="width:319px;padding:8px 10px 8px 10px;background:#000;font-size:9px;font-family:helvetica,arial;color:#666;">MY HEADER</div>
    </div>
</div> 
```

**jQuery**

```
$('#mNavigator').mouseenter(function () {
    $(this).css('opacity', '1');
    $('#dropDown').show('fast', function () {
        // Animation complete.
    });
}).mouseleave(function () {
    $(this).css('opacity', '0.6');
    $('#dropDown').hide('fast', function () {
        // Animation complete.
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:19:39.007

在第 3 行添加一个`.stop()`取消动画排队，只要菜单有焦点就让菜单保持打开状态：

```
$('#mNavigator, #dropDown').mouseover(function(){
    $(this).css('opacity','1');
    $('#dropDown').stop().show('fast', function() {
     // Animation complete.
    });
}).mouseout(function(){
    $('#mNavigator').css('opacity','0.6');
    $('#dropDown').hide('fast', function() {
     // Animation complete.
    });
}); 
```

**小提琴：http:** [//jsfiddle.net/samliew/ECreX/5/](http://jsfiddle.net/samliew/ECreX/5/)

# c# - 如何将此 JSON 反序列化为 C# 对象？

> ID：15194017
> 
> 赞同：1
> 
> 时间：2013-03-04T03:16:04.973
> 
> 标签：c#, javascript, json, asp.net-mvc-4

我试图弄清楚如何创建一个可以反序列化这个 json 的 C# 类。有人可以指出我正确的方向吗？

这是我的json

```
{
"0": {
    "heading": "Home",
    "link": "#",
    "dropdown": {}
},
"1": {
    "heading": "About",
    "link": "#",
    "dropdown": {
        "0": {
            "name": "Programs",
            "value": "programs"
        },
        "1": {
            "name": "Sample Page",
            "value": "test"
        },
        "2": {
            "name": "Donations",
            "value": "donations"
        }
    }
},
"2": {
    "heading": "Products",
    "link": "#",
    "dropdown": {}
},
"3": {
    "heading": "Contact Us",
    "link": "#",
    "dropdown": {
        "0": {
            "name": "Programs",
            "value": "programs"
        },
        "1": {
            "name": "Donations",
            "value": "donations"
        }
    }
} 
```

}

我试过以下，没有运气

```
public class Menu
{
    public MenuItem MenuItems { get; set; }
}

public class MenuItem
{
    public string Heading { get; set; }
    public string Link { get; set; }
    public DropDownMenu DropDownMenu { get; set; }
}

public class DropDownMenu
{
    public string Name { get; set; }
    public string Value { get; set; }   
} 
```

在我的控制器中，我使用以下内容尝试将 json 反序列化到我的对象中。

```
 [HttpPost]
 public ActionResult AddMenu(string menuType, string menu, string menuTitle)
 {
     var serializer = new JavaScriptSerializer();
     var newMenu = serializer.Deserialize<Menu>(menu);
  } 
```

注意：菜单变量包含 JSON 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:49:23.850

您当前的 JSON 中有 4 个菜单项...我猜可能会更改为 5 或 6，对吗？...如果是这样...您的 JSON 不正确，您应该使用数组。

就像是：

```
[
{
    "heading": "Home",
    "link": "#",
    "dropdown": []
},
{
    "heading": "About",
    "link": "#",
    "dropdown": [
        {
            "name": "Programs",
            "value": "programs"
        },
        {
            "name": "Sample Page",
            "value": "test"
        },
        {
            "name": "Donations",
            "value": "donations"
        }
    ]
},
{
    "heading": "Products",
    "link": "#",
    "dropdown": []
},
{
    "heading": "Contact Us",
    "link": "#",
    "dropdown": [
        {
            "name": "Programs",
            "value": "programs"
        },
        {
            "name": "Donations",
            "value": "donations"
        }
    ]
}
] 
```

然后定义你的类：

```
public class MenuItem
{
    public string heading
    {
        get;
        set;
    }

    public string link
    {
        get;
        set;
    }

    public DropDownMenu[] dropdown
    {
        get;
        set;
    }
}

public class DropDownMenu
{
    public string Name
    {
        get;
        set;
    }
    public string Value
    {
        get;
        set;
    }
} 
```

然后您可以将您的 JSON 反序列化为“菜单项数组”...例如：

```
var ser = new JavaScriptSerializer();
var newMenu = ser.Deserialize<MenuItem[]>(json); 
```

希望有帮助，

丹尼尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:41:59.010

来自[ScottGu 的博客](http://weblogs.asp.net/scottgu/archive/2010/07/27/introducing-asp-net-mvc-3-preview-1.aspx)：

> ASP.NET MVC 3 包括内置的 JSON 绑定支持，使操作方法能够接收 JSON 编码的数据并将其模型绑定到操作方法参数。

`string`您可以尝试将请求直接绑定到您的对象（**json模型绑定**），而不是接收参数：

```
[HttpPost]
 public ActionResult AddMenu(string menuType, Menu menu, string menuTitle)
 {
   // use menu here, no need to deserialize anything else
  } 
```

另外，确保客户端发送请求的内容类型为 json，例如：

```
contentType: 'application/json; charset=utf-8', 
```

[参见 Phil Haack 的示例](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx)

[这里](http://lozanotek.com/blog/archive/2010/04/16/posting_json_data_to_mvc_controllers.aspx)和[这里](http://theshravan.net/json-binding-support-in-asp-net-mvc-3/)还有两个。

# ruby-on-rails - Stripe Payments 的自定义描述

> ID：15194018
> 
> 赞同：0
> 
> 时间：2013-03-04T03:16:22.543
> 
> 标签：ruby-on-rails, customization, stripe-payments

我在弄清楚如何将信息与 Stripe 交易一起发送以填充每次购买的“描述”字段时遇到了一些麻烦。基本上，我希望这包括付款表格所在的购买页面中的信息。我在每个购买页面上都有一个值，显示用户贡献的学校 (<%= @pin.school %>)。我希望能够将相同的值提取到每个付款描述中，以便我知道用户贡献了哪所学校。我觉得我自己和我的应用程序对在我的表单页面和实际处理表单提交并将它们发送到 Stripe 的费用控制器之间使用哪些方法来实现这一点感到困惑。

“收费”控制器：

```
class ChargesController < ApplicationController

  def new
  end

  def create
    Stripe.api_key = "sk_test_ESb8aYrhEOcrNXr3940KehVM"
    # Amount in cents
    @amount = 500
    @school = @pin.school

    charge = Stripe::Charge.create(
      :amount => @amount, 
      :currency => "usd",
      :card => params[:stripeToken],
      :description => @school
    )
  end
end 
```

支付页面：

```
<head>
    <script type="text/javascript" src="https://js.stripe.com/v1/"></script>
    <script type="text/javascript">
    // this identifies your website in the createToken call below
    Stripe.setPublishableKey('pk_test_j8hulWlnmbug4H14Q0emQixf');

    function stripeResponseHandler(status, response) {
      if (response.error) {
        // Show the errors on the form
        $('.payment-errors').text(response.error.message);
        $('.submit-button').prop('disabled', false);
      } else {
        var $form = $('#payment-form');
        // token contains id, last4, and card type
        var token = response.id;
        var email = $("#email").val();
        // Insert the token into the form so it gets submitted to the server
        $form.append($('<input type="hidden" name="stripeToken" />').val(token));
        // and submit
        $form.get(0).submit();
      }
    }

    $(function() {
      $('#payment-form').submit(function(event) {
        // Disable the submit button to prevent repeated clicks
        $('.submit-button').prop('disabled', true);
        var email = $("#email").val();

        Stripe.createToken({
          name: $('.card-name').val(),
          number: $('.card-number').val(),
          cvc: $('.card-cvc').val(),
          exp_month: $('.card-expiry-month').val(),
          exp_year: $('.card-expiry-year').val()
        }, stripeResponseHandler);

        // Prevent the form from submitting with the default action
        return false;
      });
    });
  </script>
</head>
<div class="row">
    <div class="span10 offset1">
        <div class="well">
            Level 1
            <div class="row">
            <div class="span4">
                <p>
                Level 2
                </p>
                <p>
                <%= image_tag @pin.image %>
                </p>
                <p>
                <% if current_user == @pin.user %>
                <%= link_to 'Edit', edit_pin_path(@pin) %> |
                <% end %>
                <%= link_to 'Back', pins_path %>
                </p>
                </div>
            <div class="span4">Level 3
                <h1>
                    <%= @pin.user.name %>
                </h1>
                <p>
                    <b>School:</b>
                    <%= @pin.school %>
                </p>
                <p>
                    <b>My Story:</b>
                    <%= @pin.description %>
                </p>

                <p>
                    <b>Starting Balance:</b>
                    <%= @pin.loan_orig %>
                </p>
                <p>
                    <b>Current Balance:</b>
                    <%= @pin.loan_cur %>
                </p>
                <p>
                    <b>Progress:</b>
                </p>
                <div class="progress progress-success progress-striped">
                  <div class="bar" style="width: 40%"></div>
                </div>
                <p>
                    <b>Share this profile:</b>
                    <%= request.url %>
                </p>

        <!--Start Stripe Form -->
            </div>
            <div class="row">       
            <div class="span10 offset1">
                    <span class="payment-errors"></span>
                        <form action="/charges" method="POST" id="payment-form"class="form-stacked">

                            <p class="form-label">Email Address:</p>
                                     <input class="text" id="email" spellcheck="false"></input>

                        <div class="form-row" "pull-left">
                            <label>
                              <span>Name</span>
                              <input type="text" size="20" autocomplete="off" class="card-name"/>
                            </label>
                          </div>
                          <div class="form-row" "pull-left">
                            <label>
                              <span>Card Number</span>
                              <input type="text" size="20" autocomplete="off" class="card-number"/>
                            </label>
                          </div>

                          <div class="form-row" "pull-left">
                            <label>
                              <span>Security Code (CVC)</span>
                              <input type="text" size="4" autocomplete="off" class="card-cvc"/>
                            </label>
                          </div>
                        <div class="form-row" "pull-right">
                            <label>Expiry Date</label>
                              <select class="card-expiry-month">
                                <option selected="selected" value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                            <div class="form-row" "pull-right">
                            <select class="card-expiry-year">
                                <option selected="selected" value="2013">2013</option>
                                <option value="2014">2014</option>
                                <option value="2015">2015</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                                <option value="2028">2028</option>
                                <option value="2029">2029</option>
                                <option value="2030">2030</option>
                                <option value="2031">2031</option>
                                <option value="2032">2032</option>
                                <option value="2033">2033</option>
                                <option value="2034">2034</option>
                                <option value="2035">2035</option>
                                <option value="2036">2036</option>
                                <option value="2037">2037</option>
                                <option value="2038">2038</option>
                                </select>
                          </div> 
          <button type="submit" class="btn btn-success">Submit Payment</button>
                        </form>
                <!--End Stripe Form -->
                </div>
            </div>
        </div>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T11:44:00.967

您需要更新到版本 2

```
<script type="text/javascript" src="https://js.stripe.com/v2/"></script> 
```

# java - 将 Matlab 图像发送到 Android 平板电脑

> ID：15194019
> 
> 赞同：4
> 
> 时间：2013-03-04T03:16:23.503
> 
> 标签：java, android, matlab, bluetooth, javax.imageio

我开发了一个 Android 应用程序，它通过蓝牙 SPP 与运行 Matlab 的笔记本电脑连接。我能够轻松地来回发送字符串，现在我有兴趣从 Matlab 发送图像以显示在平板电脑上（48x64 灰度就足够了）。我不确定如何打包图像并将其发送到 Matlab 串行端口。我猜你不能只使用 fprintf 或 fwrite。

这就是我认为Android端可能的样子

```
public void drawImage(byte[] buffer){
    ImageView camView = (ImageView)findViewById(R.id.camView);
    Bitmap myBitmap = BitmapFactory.decodeByteArray(buffer, 0, buffer.length);  
    Log.d(TAG,"decoded image");
    if(myBitmap != null){
    camView.setImageBitmap(myBitmap);
    Log.d(TAG,"Trying to display...");
    }
    else{
        Log.d(TAG, "Bitmap = null");
    }
}// end drawImage 
```

任何关于 Andriod 或 Matlab 方面的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:52:07.833

你只是想从 Matlab 接收串行数据吗？为什么不将其视为任何其他串行数据。

我会首先通过 Android 控制台应用程序进行调试，以确保它完全在传输，并确保数据以您希望它传输的方式传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:44:45.680

所以我让它工作了。基本上问题是我没有发送正确压缩的图像（.jpg 或 .png）。我发现，如果您有一个 Matlab 图像，无论压缩如何，Matlab 都将其简单地表示为像素值矩阵，您需要创建一个 java BufferedImage 以便正确构造字节数组，以便您可以在 Android 端对其进行解码。

Matlab 方面

```
import java.awt.*;
import java.io.*;
import java.util.*;
import javax.imageio.*;
serCam = InitUSBcamera;  % initialize USB camera as a serial port
type = java.lang.String('jpg'); % translating matlab to java 
outputStream = ByteArrayOutputStream; % create java output stream
im = getsnapshot(serCam);  % get an image from the camera
im2 = imresize(im, [96,128],'nearest');  % reduce the size 
im3 = im2java2d(im2); % create java Buffered Image
ImageIO.write(im3, type, outputStream);
bytes = outputStream.toByteArray();
fwrite(serTablet, bytes, 'int8') % send the image // changed to async 
```

# java - void归并排序方法java

> ID：15194021
> 
> 赞同：1
> 
> 时间：2013-03-04T03:16:44.743
> 
> 标签：java, sorting, merge, mergesort

所以，我的计算机科学老师告诉我这里的所有方法都无效，除了 copyPartArray。我不知道该怎么做，当我尝试时，排序就失败了。

```
public static ArrayList<String> mergeSortHelper(ArrayList<String> a) {
    int mid = a.size() / 2 - 1;
    if (a.size() <= 1)
        return a;
    return merge(mergeSortHelper(copyPartArray(a, 0, mid)),
            mergeSortHelper(copyPartArray(a, mid + 1, a.size() - 1)));
}

public static void mergeSort(ArrayList<String> a) {
    ArrayList<String> x = mergeSortHelper(a);
    for (int i = 0; i < a.size(); i++) {
        a.set(i, x.get(i));
    }
}   
    public static ArrayList<String> merge(ArrayList<String> a,
        ArrayList<String> b) {
    ArrayList<String> x = new ArrayList<String>(a.size() + b.size());
    int aCount = 0;
    int bCount = 0;
    for (int i = 0; i < a.size() + b.size(); i++) {
        if (aCount > a.size() - 1) {
            for (int j = bCount; j < b.size(); j++) {
                x.add(b.get(j));
            }
            break;
        }
        if (bCount > b.size() - 1) {
            for (int j = aCount; j < a.size(); j++) {
                x.add(a.get(j));
            }
            break;
        }
        if ((a.get(aCount)).compareTo(b.get(bCount)) < 0) {
            x.add(a.get(aCount));
            aCount++;
        } else {
            x.add(b.get(bCount));
            bCount++;
        }
    }
    return x;
}

    public static ArrayList<String> copyPartArray(ArrayList<String> a, int s,
        int e) {
    ArrayList<String> x = new ArrayList<String>();
    for (int i = s; i <= e; i++) {
        x.add(a.get(i));
    }
    return x; 
```

我试图将我的 mergeSort 更改为：

```
 public static void mergeSort(ArrayList<String> a) {
    int mid = a.size() / 2 - 1;
    if (a.size() <= 1)
        return;
    mergeSort(copyPartArray(a, 0, mid));
    mergeSort(copyPartArray(a, mid + 1, a.size() - 1));
    merge(a, copyPartArray(a, 0, mid),
            copyPartArray(a, mid + 1, a.size() - 1));
} 
```

并一起摆脱 mergeSortHelper 。

我现在有：

```
 public static void mergeSort(ArrayList<String> a, int start, int end) {
    int mid = (start + end) / 2;
    if (a.size() <= 1)
        return;
    mergeSort(a, start, mid);
    mergeSort(a, mid + 1, end); 
```

我将如何将我的合并方法纳入其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:20:08.710

`copyPartArray`将制作数组的副本，所以这不好，您的讲师希望您通过引用传递数组，然后还传递开始/结束（或开始/长度）整数。尝试做这样的事情：

```
public static void mergeSort(ArrayList<String> a, int start, int length) {
    // refer to 'the array' as a[start] to a[start + length]
} 
```

`a`将通过引用传递，这意味着您不需要返回值。

所以我会改变你的方法，把所有的`start`都`length`去掉`copyPartArray`，你可以在一个数组上就地合并。

[我在关于 Quicksort 的博客文章](http://www.growingwiththeweb.com/2012/12/algorithm-quicksort.html)中使用了这种方法。

# python - 如何插入缺失的行并在多个文件之间进行数学运算？

> ID：15194023
> 
> 赞同：0
> 
> 时间：2013-03-04T03:17:01.370
> 
> 标签：python, unix, text

我有两个文件，每个文件包含两列。第一列是一个整数。第二列是线性坐标。并非每个坐标都被表示，我想插入所有缺少的坐标。以下是我的一个数据文件中的示例：

```
 3 0
  1 10
  1 100
  2 1000
  1 1000002
  1 1000005
  1 1000006 
```

对于此示例，坐标 1-9、11-99 等缺失但需要插入，并且需要指定零 (0) 计数。

```
 3 0
  0 1
  0 2
  0 3
  0 4
  0 5
  0 6
  0 7
  0 8
  0 9
  1 10
  ........ 
```

有了完整的行集，我需要将 add (1) 添加到每个计数（第一列）。最后，我想在两个文件中第一列的对应行之间做一个简单的计算（比率）。该比率应该是实数。

如果可能的话，我希望能够在 Unix 上做到这一点，但对 python 脚本也有点熟悉。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:31:01.740

这应该适用于 Python 2.3 及更高版本。

我假设您的文件是空格分隔的。

如果您想要超过 1000006 的值，则需要更改`desired_range`.

```
import csv

desired_range = 1000007
reader = csv.reader(open('fill_range_data.txt'), delimiter=' ')

data_map = dict()
for row in reader:
    frequency = int(row[0])
    value = int(row[1])

    data_map[value] = frequency

for i in range(desired_range):
    if i in data_map:
        print data_map[i], i
    else:
        print 0, i 
```

# css - 固定列，在导航栏下 - css

> ID：15194027
> 
> 赞同：0
> 
> 时间：2013-03-04T03:17:31.617
> 
> 标签：css, scroll, multiple-columns, navbar

Behance 在页面的右侧有一列，一旦你滚动到某个点，它就会变成固定的。

即转到此页面然后向下滚动以查看示例 [http://www.behance.net/gallery/minke/7133409](http://www.behance.net/gallery/minke/7133409)

有谁知道他们是怎么做到的？是 CSS 和 AJAX 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:31:56.387

可以用jquery的方式来完成。[在某个点](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)检查此停止固定位置滚动？.

或者您可以使用 jquery 插件[jQuery-Stickem](https://github.com/davist11/jQuery-Stickem)。

# android - 复制google plus浮动工具栏菜单

> ID：15194031
> 
> 赞同：1
> 
> 时间：2013-03-04T03:18:09.893
> 
> 标签：android, android-actionbar, android-menu

我正在尝试模拟 android google plus 应用程序使用的“工具栏”类型的浮动菜单。向上滚动页面时会出现菜单，向下滚动时会很好地隐藏。

我猜这是带有某种动画的线性布局。那是对的吗？关于如何重现的任何想法？

![谷歌加菜单](../Images/5063693bf842101603b09b09e204f81b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:31:05.163

您应该在[此处](https://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks)查看 Roman Nurik 的滚动技巧示例。它显示了如何像您提到的那样快速返回视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:53:19.397

实现此效果的一种方法是在要向下/向上滑动的对象上调用 animate().translationY(value)。

# c# - 按 Enter 键会将 ListBox 中的选定项添加到 RichTextBox

> ID：15194032
> 
> 赞同：0
> 
> 时间：2013-03-04T03:18:19.520
> 
> 标签：c#, icsharpcode

与此主题相关： [在 RichTextBox 中键入单词时会出现隐藏的列表框](https://stackoverflow.com/questions/15170903/hidden-listbox-will-appear-while-typing-words-in-richtextbox)

我正在使用代码编辑器，我只想知道如何使用 enterkey 将列表框中的项目添加到文本框中。

更多继承人我的字符串：

```
public String[] ab = { "abstract" };
public String[] am = { "AmbientProperties", "AmbientValueAttribute" }; 
```

样本：

在richtextbox (rtb) 中，我输入Ab，然后hiddenlistbox 将使用以下代码出现“抽象”文本（已经这样做了）：

```
if (token == "letterA" || token.StartsWith("Ab") || token.StartsWith("ab"))
{
    int length = line.Length - (index - start);
    string commentText = rtb.Text.Substring(index, length);
    rtb.SelectionStart = index;
    rtb.SelectionLength = length;
    lb.Visible = true;

    KeyWord keywordsHint = new KeyWord();

    foreach (string str in keywordsHint.ab)
    {
        lb.Items.Add(str);
    }
    break;
} 
```

然后在我按下回车键之后，我想将列表框中的摘要添加到richtextbox。

> RichTextBox 声明为 rtb 和 ListBox 声明为 lb

我应该怎么办？谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T13:41:19.720

某些控件在按键按下事件中被按下时无法识别某些按键。例如，ListBox 无法识别按下的键是否为 Enter 键。

请参阅以下链接中的备注部分 - [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.110).aspx)

您的问题的解决方案之一可以是 [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown(v=vs.110).aspx)

为您的列表框实现 PreviewKeyDown 事件，以便列表框识别您的操作。

这是示例代码片段 -

```
 private void listBox1_KeyDown(object sender, KeyEventArgs e)
    {

        if (e.KeyCode == Keys.Enter)
        {
            //Do your task here :)
        }
    }

    private void listBox1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Enter:
                e.IsInputKey = true;
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:27:33.363

您不能直接在列表框中输入文本，因此我使用 textBox 创建了一个示例：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 13)
    {
        this.richTextBox1.AppendText((sender as TextBox).Text);
        e.Handled = true;
    }
} 
```

如果您的意思是组合框，您可以轻松调整它，替换上面的行：

```
private void comboBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 13)
    {
        this.richTextBox1.AppendText((sender as ComboBox).Text);
        e.Handled = true;
    }
} 
```

将选定的列表框条目复制到 rtf 框：

```
private void listBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 13)
    {
        foreach (string s in listBox1.SelectedItems)
        {
            this.richTextBox1.AppendText(s + Environment.NewLine);
        }

        e.Handled = true;
    }
} 
```

# python - 计算100个n维点的欧几里得范数？

> ID：15194039
> 
> 赞同：4
> 
> 时间：2013-03-04T03:18:46.207
> 
> 标签：python, numpy, scipy

我在 python 中有一个包含 100 个值的列表，其中列表中的每个值对应一个 n 维列表。

例如

```
x=[[1 2],[2 3]] is a 2d list 
```

我想计算所有这些点的欧几里得范数。有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T00:53:27.710

如果我正确解释了这个问题，那么您有一个包含 100 个 n 维向量的列表，并且您想要一个它们的（欧几里得）范数列表。

我认为在这里使用 numpy 是最简单的（也是最快的！），

```
import numpy as np
a = np.array(x)
np.sqrt((a*a).sum(axis=1)) 
```

如果向量不具有相等的维度，或者如果您想避免使用 numpy，那么也许，

```
[sum([i*i for i in vec])**0.5 for vec in x] 
```

或者，

```
import math
[math.sqrt(sum([i*i for i in vec])) for vec in x] 
```

* * *

**编辑**：不完全确定您要的是什么。因此，或者：看起来您有一个列表，其中的每个元素都是一个 n 维向量，并且您想要每个连续对之间的欧几里得距离。使用 numpy（假设 n 是固定的），

```
x = [ [1,2,3], [4,5,6], [8,9,10], [13,14,15] ] # 3D example.
import numpy as np
a = np.array(x)
sqrDiff = (a[:-1] - a[1:])**2
np.sqrt(sqrDiff.sum(axis=1)) 
```

最后一行返回的地方，

```
array([ 5.19615242, 6.92820323, 8.66025404]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:36:37.683

我在 scipy 上找到了这个，这很有效。 [scipy](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html#scipy.spatial.distance.pdist)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:43:31.627

试试这个代码：

```
from math import sqrt
valueList = [[[1,2], [2,3]], [[2,2], [3,3]]]

def distance(valueList):
  resultList = []
  for (point1, point2) in valueList:
    resultList.append(sqrt(sum(map(lambda (x1, x2): (x1 - x2) * (x1 - x2), zip(point1, point2)))))

  return resultList

print distance(valueList) 
```

输出为 [1.4142135623730951, 1.4142135623730951]

这是 valuelist 包含 2 个值，但 100 个值没有问题..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T04:36:31.647

您可以这样做来计算每一行的欧几里得范数：

```
>>> a = np.arange(200.).reshape((100,2))
>>> a
array([[   0.,    1.],
       [   2.,    3.],
       [   4.,    5.],
       [   6.,    7.],
       [   8.,    9.],
       [  10.,   11.],
       ...
>>> np.sum(a**2,axis=-1) ** .5
array([   1\.        ,    3.60555128,    6.40312424,    9.21954446,
         12.04159458,   14.86606875,   17.69180601,   20.51828453,
         23.34523506,   26.17250466,   29\.        ,   31.82766093,
         34.6554469 ,   37.48332963,   40.31128874,   43.13930922,
         45.96737974,   48.7954916 ,   51.623638  ,   54.45181356,
         ... 
```

# magento - Magento 移动主题 - 如何创建“完整的网站链接”

> ID：15194043
> 
> 赞同：0
> 
> 时间：2013-03-04T03:19:22.297
> 
> 标签：magento, mobile, hyperlink, web, themes

我使用magento的移动主题现在我想创建一个链接来查看完整站点（如果用户选择他们被带到站点的桌面版本）链接以查看完整站点，这使用户可以在移动设备上查看桌面站点. 一旦用户选择了此选项，他们将无法返回移动站点。[http://m.asos.com](http://m.asos.com)中的链接 当我点击查看完整站点时：asos.com/?stop_mobi=yes&r=2 这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:14:00.907

您可以使用以下 .htaccess 设置在移动用户的 magento 完整站点视图和移动站点视图之间切换（使用相同的基本 URL）。

请注意，这些设置在您的本地 WAMP 服务器中不起作用。（在 WAMP 中，我们不能根据条件为环境变量赋值）

测试版本 = 企业版 1.12.0.2

移动商店代码 = 移动

主站点商店代码 = 默认

当输入 www.mysite.com 时，所有移动用户将直接访问移动站点。

要将用户重定向到完整站点，您必须使用 www.mysite.com?___store=default

同样，要再次切换回移动站点，您必须提供 www.mysite.com?___store=mobile

请注意，我们不能依赖“___store”参数，因为它会随着一些 url 丢失。

另请注意，我们不能使用 cookie 名称存储，因为当您返回默认视图时，magento 会删除名为“store”的 cookie。

```
SetEnv MAGE_RUN_TYPE store

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{QUERY_STRING} !___store=default  [NC]
RewriteCond %{HTTP_COOKIE} !track=default [NC]
RewriteRule ^ - [E=MAGE_RUN_CODE:mobile]

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{QUERY_STRING} ___store=default  [NC]    
RewriteRule ^ - [E=MAGE_RUN_CODE:default,CO=track:default:%{HTTP_HOST}]

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{QUERY_STRING} !___store=mobile  [NC]
RewriteCond %{HTTP_COOKIE} track=default [NC]
RewriteRule ^ - [E=MAGE_RUN_CODE:default]

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{QUERY_STRING} ___store=mobile  [NC]    
RewriteRule ^ - [E=MAGE_RUN_CODE:mobile,CO=track:mobile:%{HTTP_HOST}] 
```

# php - mysqli_real_escape_string() 返回空字符串

> ID：15194051
> 
> 赞同：6
> 
> 时间：2013-03-04T03:20:30.740
> 
> 标签：php, mysql

我在电子邮件地址上使用 mysqli_real_escape_string() ，它返回一个空字符串。它使用任何电子邮件地址执行此操作。

```
<?php
//from previous page - submitted by user.
$_POST['email']="aehmlo@aehmlo.com";
$_POST['password']='mypass1234';

//Link, I can verify it works.
$mysql_info=array(
     "url"=>"url",
     "username"=>"username",
     "password"=>"password",
     "database"=>"database"
);
$link=mysqli_connect($mysql_info['url'],$mysql_info['username'],$mysql_info['password'],$mysql_info['database']);

//Now I attempt to sanitize the user input.
$email=mysqli_real_escape_string($link,$_POST['email']);
$password=sha1(mysqli_real_escape_string($link,$_POST['password']));
var_dump($email);
var_dump($password);?> 
```

我的表的排序规则是“latin1_swedish_ci”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T03:24:49.517

如果您的连接为空 ( `$link`)，它将返回一个空字符串。我对此进行了测试，效果很好。我建议您在连接中添加错误处理并启用错误报告。

```
<?php
$link = mysqli_connect("localhost", "root", "root", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$_POST['email'] = "aehmlo@aehmlo.com";

$email = mysqli_real_escape_string($link, $_POST['email']);

var_dump($email);

mysqli_close($link);
?> 
```

**结果**

```
字符串（17）“aehmlo@aehmlo.com”
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-25T20:30:32.767

我遇到了这个问题，发现我的字符集设置为拉丁文。通过放置解决

```
$con->set_charset("utf8"); 
```

在 real_escape_string 之前。将是程序风格的 mysqli_set_charset。

# objective-c - 从其超级视图中删除视图得到一个错误的访问错误 XCODE

> ID：15194052
> 
> 赞同：0
> 
> 时间：2013-03-04T03:20:33.517
> 
> 标签：objective-c, uiview

自从故事板发布以来，我已经很久没有使用 addSubview 和 removeFromSuperview 了。显然我已经忘记了如何使用它们。

所以在我的 UIViewControllerA 我有一个按钮的代码：

```
- (IBAction)buttonClickHandler:(id)sender {

    dyf_FacebookViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Facebook"];
    [self.view addSubview:controller.view];

} 
```

它加载由 UIViewControllerB 处理的 UIView。现在这个视图可以被许多不同的 ViewControllers 调用为子视图，这就是为什么我让它从父视图中删除。

所以在 UIViewControllerB 我有这个代码：

```
- (IBAction)close:(id)sender {

     [self.view removeFromSuperview];
} 
```

不幸的是，这会返回错误的访问错误。请帮忙！

谢谢

*   迈克尔

编辑：

添加的子视图（子视图的视图控制器）将控制删除自身，因为它控制子视图上的按钮。所以我无权访问 ViewControllerA 中的原始 controller.view 变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:30:35.230

您必须保留对 dyf_FacebookViewController 对象的引用，因此您可以执行以下操作：

```
- (IBAction)close:(id)sender {
    [controller.view removeFromSuperview];
} 
```

您现在正在做的是从其超级视图中删除您的主视图，这可能会产生严重的后果，给您带来不好的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:23:53.573

如果要删除添加的视图，请保留视图控制器的副本...

```
// in this VC.m
@interface
@property (nonatomic, strong) dyf_FacebookViewController *dyfController;
@end

- (IBAction)buttonClickHandler:(id)sender {

    self.dyfController = [self.storyboard instantiateViewControllerWithIdentifier:@"Facebook"];
    [self.view addSubview:self.dyfController.view];
} 
```

稍后，要关闭视图...

```
[self.dyfController.view removeFromSuperview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:33:46.447

```
if ([controller.view superView]) {
    [controller.view removeFromSuperview];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T04:20:05.197

试试这个

```
- (IBAction)close:(id)sender {
for (UIView *subView in self.view.subviews) {
    [subView removeFromSuperview];
}
} 
```

# google-apps-marketplace - 在 Marketplace 进行计费的步骤

> ID：15194053
> 
> 赞同：0
> 
> 时间：2013-03-04T03:20:40.110
> 
> 标签：google-apps-marketplace

我计划在 Google Apps Marketplace 上列出 Gmail 上下文小工具。一年多前，我创建了供应商资料和列表（所以我熟悉这些步骤），但我从未将小工具商业化。现在我已准备好设置要出售的小工具，但我想知道是否已实施计费。正如我在 Marketplace 计费[文档](https://developers.google.com/google-apps/marketplace/#bill)中所读到的，Google 没有为此提供任何解决方案，但建议我自己实施或使用第三方计费产品。

所以我的问题是： - 为您的商家信息创建计费解决方案的基本步骤是什么？- 有没有办法保持“手动”付款，从这个意义上说，我在收到付款时为客户手动启用产品安装（使用令牌等）？- 我需要为此估计多长时间？

真的很感谢一个答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:23:32.807

您需要使用许可 api

[https://developers.google.com/google-apps/marketplace/licensing](https://developers.google.com/google-apps/marketplace/licensing)

# python - 引发 HTTPError(req.get_full_url(), 代码, msg, hdrs, fp)

> ID：15194056
> 
> 赞同：1
> 
> 时间：2013-03-04T03:20:57.177
> 
> 标签：python

尝试使用漂亮的汤解析链接时出现以下错误，看起来身份验证失败....如何验证链接？

```
from bs4 import BeautifulSoup
import argparse
import urllib
import urllib2
import getpass
import re

def update (searchurl):
    page = urllib2.urlopen(searchurl)
    soup = BeautifulSoup(page)
    #print(soup.textarea.string)
    print(soup.get_text())

def main ():
    #For logging
    print "test"
    parser = argparse.ArgumentParser(description='This is the update.py script created by test')
    parser.add_argument('-u','--url',action='store',dest='url',default=None,help='<Required> url link',required=True)
    results = parser.parse_args()# collect cmd line args
    url = results.url
    #print url
    update(url)
if __name__ == '__main__':
    main() 
```

以下是尝试打开链接时的错误

```
 Traceback (most recent call last):
      File "announce_update2.py", line 24, in <module>
        main()
      File "announce_update2.py", line 22, in main
        update(url)
      File "announce_update2.py", line 9, in update
        page = urllib2.urlopen(searchurl)
      File "C:\Python27\lib\urllib2.py", line 126, in urlopen
        return _opener.open(url, data, timeout)
      File "C:\Python27\lib\urllib2.py", line 406, in open
        response = meth(req, response)
      File "C:\Python27\lib\urllib2.py", line 519, in http_response
        'http', request, response, code, msg, hdrs)
      File "C:\Python27\lib\urllib2.py", line 438, in error
        result = self._call_chain(*args)
      File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
        result = func(*args)
      File "C:\Python27\lib\urllib2.py", line 625, in http_error_302
        return self.parent.open(new, timeout=req.timeout)
      File "C:\Python27\lib\urllib2.py", line 406, in open
        response = meth(req, response)
      File "C:\Python27\lib\urllib2.py", line 519, in http_response
        'http', request, response, code, msg, hdrs)
      File "C:\Python27\lib\urllib2.py", line 444, in error
        return self._call_chain(*args)
      File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
        result = func(*args)
      File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
        raise HTTPError(req.get_full_url(), code, msg, hdrs, fp) 
```

# ios - 如何在ios中遍历Web服务器中的文件夹层次结构

> ID：15194059
> 
> 赞同：0
> 
> 时间：2013-03-04T03:21:25.727
> 
> 标签：ios, xcode, nsdictionary

我是ios编程的新手。我的网络服务器中有一些文件和文件夹。我需要遍历 Web 服务器中的所有文件夹和子文件夹并将其存储在 NSDictionary 中。我找到[了这个](https://stackoverflow.com/questions/9735622/file-tree-structure-into-nsdictionary/)从本地文件系统获取文件夹结构的链接。我的网络服务器需要类似的东西。感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:42:28.750

我认为您应该先浏览服务器上的目录。

Python：[https ://stackoverflow.com/a/5421671/889538](https://stackoverflow.com/a/5421671/889538)

PHP：[https ://stackoverflow.com/a/10750406/889538](https://stackoverflow.com/a/10750406/889538)

或者其他一些语言。

然后您的 iOS 应用程序可以从您的服务器请求目标文件夹层次结构，可能是 JSON 格式。

现在，[将 JSON 数据转换为 NSDictionary 格式](https://stackoverflow.com/questions/8606444/how-do-i-convert-a-json-string-to-a-dictionary-in-ios5)。

# python - 在python中对多个字典进行排序和分组

> ID：15194061
> 
> 赞同：0
> 
> 时间：2013-03-04T03:21:34.433
> 
> 标签：python, list, dictionary, group-by, grouping

我有未知数量的字典，每个字典都由特定代码标识。

所有值都是动态创建的，因此分组依据的代码是未知的。
我希望有人能够帮助我确定对字典进行分组的最佳方法，以便我可以遍历每个字典以生成表格。字典中实际上有大约 7 个条目。

每个字典都是表中的一行。

例子：

```
results = ['GROUP1':{'name':'Sam', 'code':'CDZ', 'cat_name':'category1',   'cat_code':'GROUP1'}, 'GROUP1':{'name':'James', 'code':'CDF', 'cat_name':'category1',   'cat_code':'GROUP1'}, 'GROUP2':{'name':'Ellie', 'code':'CDT', 'cat_name':'category2',   'cat_code':'GROUP2'}] 
```

我希望能够将这些字典格式化为一个表格，以生成以下内容：

**GROUP1 - 类别 1
代码 | 名称**
CDZ | 山姆
CDF | 詹姆士

**GROUP2 - 类别 2
代码 | 名称**
CDT | 艾莉

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:44:57.203

如果`results`是这样的字典列表

```
>>> results = [
...     {'name': 'Sam', 'code': 'CDZ', 'cat_name': 'category1', 'cat_code': 'GROUP1'},
...     {'name': 'James', 'code': 'CDF', 'cat_name': 'category1', 'cat_code': 'GROUP1'},
...     {'name': 'Ellie', 'code': 'CDT', 'cat_name': 'category2', 'cat_code': 'GROUP2'}] 
>>> from collections import defaultdict
>>> D = defaultdict(list)
>>> for item in results:
...  D[item['cat_code'], item['cat_name']].append((item['code'], item['name']))
... 
>>> import pprint
>>> pprint.pprint(dict(D))
{('GROUP1', 'category1'): [('CDZ', 'Sam'), ('CDF', 'James')],
 ('GROUP2', 'category2'): [('CDT', 'Ellie')]} 
```

您可以遍历 D.items() 并做任何您喜欢的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:26:56.903

您的前两个问题是您的示例输入不是有效的 Python（dict 文字语法是 {}，而不是 []），并且您不能在一个 dict 中有两个相同的键。在您解决这些问题之前，我们无能为力。我不确定您要如何解决重复键问题-也许您实际上想要一个字典数组而不是字典字典？

# javascript - javascript google script 2d数组：组合类似的值

> ID：15194063
> 
> 赞同：0
> 
> 时间：2013-03-04T03:21:54.830
> 
> 标签：javascript, google-apps-script, google-sheets

在谷歌电子表格中，我使用 javascript 创建了一个嵌套的二维数组。

“小时”表是员工为不同类别添加不同小时的地方。有一个带有 submit() 函数触发器的图像。“批准”表格从“小时”表格中接收一些数据，经理可以在这些表格中批准。

这是脚本：

```
function cleanArray(actual){
  var newArray = new Array();
  for(var i = 0; i<actual.length; i++){
    if(actual[i] != "") {
      newArray.push(actual[i]);
    };
  };
  return newArray;
}

function addArray(array){
  var sum = 0;
  for(var i=0; i<array.length; i++) {
    sum += Number(array[i]);
  };
  return sum;
}

function createArray(cats, hours) {
  var newArray = new Array();
  for (i in hours) {
    if(hours[i] != "" ) {
      if(cats[i] == '') { cats[i] = "Unclaimed" };
      newArray[i] = new Array(cats[i], hours[i]);
    };
  };
  return newArray;
}

function submit() {
  var sheet = SpreadsheetApp.getActive().getSheetByName('Hours');
  var employee = sheet.getRange('B1').getValue();
  var startDate = sheet.getRange('C2').getValue();

  var mondayHours = sheet.getRange('B4:B9').getValues();
  var mondayCats = sheet.getRange('D4:D9').getValues();
  var mondayArray = createArray(mondayCats, mondayHours);
  var mondayTtl = addArray(mondayHours);

  var tuesdayHours = sheet.getRange('B11:B16').getValues();
  var tuesdayCats = sheet.getRange('D11:D16').getValues();
  var tuesdayArray = createArray(tuesdayCats, tuesdayHours);
  var tuesdayTtl = addArray(tuesdayHours);

  var wednesdayHours = sheet.getRange('B18:B23').getValues();
  var wednesdayCats = sheet.getRange('D18:D23').getValues();
  var wednesdayArray = createArray(wednesdayCats, wednesdayHours);
  var wednesdayTtl = addArray(wednesdayHours);

  var thursdayHours = sheet.getRange('B25:B30').getValues();
  var thursdayCats = sheet.getRange('D25:D30').getValues();
  var thursdayArray = createArray(thursdayCats, thursdayHours);
  var thursdayTtl = addArray(thursdayHours);

  var fridayHours = sheet.getRange('B32:B37').getValues();
  var fridayCats = sheet.getRange('D32:D37').getValues();
  var fridayArray = createArray(fridayCats, fridayHours);
  var fridayTtl = addArray(fridayHours);

  var saturdayHours = sheet.getRange('B39:B44').getValues();
  var saturdayCats = sheet.getRange('D39:D44').getValues();
  var saturdayArray = createArray(saturdayCats, saturdayHours);
  var saturdayTtl = addArray(saturdayHours);

  var sundayHours = sheet.getRange('B46:B51').getValues();
  var sundayCats = sheet.getRange('D46:D61').getValues();
  var sundayArray = createArray(sundayCats, sundayHours);
  var sundayTtl = addArray(sundayHours);

  var weekArray = new Array();
  for (i in mondayArray){
    weekArray.push(mondayArray[i]);
  };
  for (i in tuesdayArray){
    weekArray.push(tuesdayArray[i]);
  };
  for (i in wednesdayArray){
    weekArray.push(wednesdayArray[i]);
  };
  for (i in thursdayArray){
    weekArray.push(thursdayArray[i]);
  };
  for (i in fridayArray){
    weekArray.push(fridayArray[i]);
  };
  for (i in saturdayArray){
    weekArray.push(saturdayArray[i]);
  };
  for (i in sundayArray){
    weekArray.push(sundayArray[i]);
  };

  var weekHours = new Array(mondayTtl, tuesdayTtl, wednesdayTtl, thursdayTtl, fridayTtl, saturdayTtl, sundayTtl);
  var weekHoursTtl = addArray(weekHours); //CAPTURE

  var sortWeekArray = ArrayLib.sort(weekArray, 0, true)

  var approve = SpreadsheetApp.getActive().getSheetByName('Approve');
  approve.getRange('D1').setValue(sortWeekArray);
  } 
```

现在它只是将二维数组转储到“批准”表的 D1 中。

示例输出：

```
ESL               | 2
-------------------------
Parent Engagement | 8
-------------------------
School Liaison    | 2.75
-------------------------
School Liaison    | 6.25
-------------------------
School Liaison    | 7.25
-------------------------
Tutoring          | 3.25
-------------------------
Tutoring          | 4
-------------------------
Tutoring          | 4.5
-------------------------
Unclaimed         | 2.5
-------------------------
Volunteer Svcs    | 2 
```

我想组合 col1 中的类似项目并将 col2 中的类似值相加，我想在输出结果之前在 javascript 中执行此操作。

因此，示例输出将变为：

```
ESL               | 2
-------------------------
Parent Engagement | 8
-------------------------
School Liaison    | 16.25
-------------------------
Tutoring          | 11.75
-------------------------
Unclaimed         | 2.5
-------------------------
Volunteer Svcs    | 2 
```

有任何想法吗？我已经在使用[2D Arrays Library](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library)并且这些功能似乎都不符合要求。

weekArray 看起来像：`{ "category", val ; "category", val ; ... }`

此外，欢迎任何关于[干燥](http://ardalis.com/files/media/image/WindowsLiveWriter/DRYDontRepeatYourselfMotivator_BA85/dontrepeatyourself_motivator_2.jpg)代码的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:16:58.207

所以，从来没有找到一个 JS 解决方案，我似乎难倒了 SO 社区的至少 21 名成员，但我最终做了以下事情：

1.  收集小时数和类别数组，如上面的`var weekArray = new Array();`循环和后续循环所示（产生上面的第一个表）
2.  将它们转储到单独工作表上的两列中：`lkup.getRange('D2').setValue(weekArray);`
3.  在每个类别的单独工作表上使用 SUMIF 函数`=SUMIF($D$2:$D$43,"Volunteer Svcs",$E$2:$E$43)`
4.  用 JS 收集新的 SUMIF 数组：`var categoriesArray = lkup.getRange('F2:K3').getValues();`

并从那里继续。

我仍然必须相信那里有更好的方法（以及一些 DRYer JS 可以做到这一点），但我没有找到它，你也没有发布它。您可以随时发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T02:54:08.753

我相信有更好的方法，但这有效。我用您的示例数据对其进行了测试。

```
function getData(){
  var sheet = SpreadsheetApp.getActiveSheet();
  var lr=sheet.getLastRow();
  var data = sheet.getRange(2,1,lr-1,2).getValues();
  var data=data.sort();
  data.push(["",""]);
  sumValues(data,lr)
  } 

function sumValues(data,lr){  
 var newData = new Array();
 for(var i=1;i<lr;i++){
 if(data[i-1][0] == data[i][0]){  
 data[i][1]=parseFloat(data[i][1])+parseFloat(data[i-1][1]); 
 newData.push([data[i][0],data[i][1]]);
 i=i+1.
 }
else if(data[i-1][0] !== data[i][0]){  
newData.push([data[i-1][0],data[i-1][1]])};
 }
newData.push(["",""]);  
dupcheck(newData);
}

function dupcheck(data){
var dup=0;
var lr=data.length;
var l=data.length-1;
for(var i=0;i<l;i++){
if(data[i+1][0] == data[i][0]){
var dup =dup+ 1};
}
if(dup>0){
sumValues(data,lr)
}
else{   
var sheet = SpreadsheetApp.getActiveSheet();
var lr = sheet.getLastRow();
sheet.getRange(2, 1, lr,data[0].length).clear({contentsOnly:true});
sheet.getRange(2, 1, data.length,data[0].length).setValues(data);
}} 
```

# jquery - Fancybox 调整大小以适应内容，没有标题

> ID：15194066
> 
> 赞同：4
> 
> 时间：2013-03-04T03:22:11.157
> 
> 标签：jquery, fancybox, facebook-like, facebook-comments

我在我的网站上使用 Fancybox 来显示照片。加载照片后，我在标题区域动态添加（通过 JavaScript）社交按钮和 Facebook 评论。我遇到的问题是，如果我让它正常调整大小，它也会调整大小以尝试适应屏幕上的标题内容（由于评论，这可能会变得相当长）。

我的问题是：是否可以调整fancybox 的大小以适应屏幕上的照片，但允许标题区域溢出屏幕？

我通过将 minHeight 设置为 683 在一定程度上解决了这个问题，这可以防止它使照片变得超级小，并将评论也安装到屏幕上。这里的问题是它在 1080p 屏幕上看起来不错，但任何较小的东西都意味着照片太大并且也会从屏幕上流出。

如果我解释得不好，请在我的网站上查看：[http ://www.thejoecole.com/gallery/Places/Garden_of_the_Gods-1/photo-8#8](http://www.thejoecole.com/gallery/Places/Garden_of_the_Gods-1/photo-8#8)

现在，调整内容的大小以适应一些评论，但受到 minHeight 的限制。我想要的是照片更大，占据屏幕的大部分，下面只有一点标题区域，然后用户可以向下滚动查看评论等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:01:02.513

你可能想试试这个：

使用 JS 计算窗口的宽度和高度，并动态设置图像的尺寸，使用回调[`beforeShow`和`onUpdate`](http://fancyapps.com/fancybox/#docs)：

```
beforeShow: function() {
    $('.fancybox-image')
        .width($(window).width())
        .height($(window).height());
},
onUpdate: function() {
    $('.fancybox-image')
        .width($(window).width())
        .height($(window).height());
}, 
```

您可能还想看看这些类似的问题：

*   [Fancybox 高度调整动态内容的大小](https://stackoverflow.com/questions/7371073/fancybox-height-resize-dynamic-content)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:54:44.460

I checked your site, which btw is pretty nice, to check the sizing problem. I noticed some things so, here are my suggestions and explanation.

The fancybox behaves like a container div so it adjusts to the children divs contents. `fancybox-skin` has two immediate children divs `fancybox-outer` and `fancybox-title fancybox-title-inside-wrap`

```
<div class="fancybox-skin" style="padding: 0px; width: auto; height: auto;">
    <div class="fancybox-outer">
        <div class="fancybox-inner" style="overflow: visible; width: 493px; height: 323px;">
            <img class="fancybox-image" src="/photos/Places/Garden of the Gods/IMG_0345.jpg" alt="">
        </div>
        <a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a><a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>
    </div>
    <div class="fancybox-title fancybox-title-inside-wrap" style="height: auto;">
    ...
    </div>
</div> 
```

The `fancybox-title fancybox-title-inside-wrap` has `height: auto;` set. So it keeps adjusting to comments given inside it, by increasing its height, which causes problems to your image height. To fix this set its style as `height: 200px;`. Try to put `!important` if it does not work. Since all this is dynamic, check css and javascript both.

**Update**

As per your comment, height is set to auto every time you call fancybox.update(). So you need to modify your fancybox options, to prevent auto resizing. Here is what you can do :

```
$("a.yourlink").fancybox({
    'width'             :   500,
    'height'            :   200,
    'autoScale'         :   false,         //if using older fancybox
    'autoSize'          :   false,         //if using newer fancybox
    'autoDimensions'    :   false,
}); 
```

You should look into the options given [here](http://fancyapps.com/fancybox/#docs) for fancybox 2.0+ .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T03:36:21.903

您可以使用填充和/或边距选项在花式框顶部设置空间，使照片在屏幕上看起来更居中。

> padding - fancyBox 内围绕内容的空间。可以设置为数组 - [上、右、下、左]
> 
> margin - 视口和 fancyBox 之间的最小空间。可以设置为数组 - [上、右、下、左]

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T21:35:00.483

我想出了一个适合我的解决方案。

这在很大程度上基于此处发布的所有答案，所以谢谢你。如果可能的话，我会给你们一个赏金。

我做的是这个。

在 CSS 中设置`.fancybox-title{height:0px !important;}`，并在下面直接添加一个额外的样式（稍后使用）：`.fancybox-title-autoheight{height:auto !important;}`

接下来，在fancybox jquery 调用中， set`autoResize: false`和`min-Height: $(window).height()-100`<-- 100 只是我想要的边距，以便用户注意到图像下方还有更多内容。

最后，在 afterShow 函数中，设置`$(".fancybox-title").addClass("fancybox-title-autoheight");`

这会在最初打开时正确调整照片的大小，并允许在下面显示我想要的评论。唯一剩下的问题是调整窗口大小时。我尝试删除 autoheight 类，调用 update，然后再次添加 CSS 属性，但它似乎不起作用。目前，这对我来说是一个可以接受的解决方案。

查看结果（可能需要清除缓存，我最近一直在处理）：[http ://www.thejoecole.com/gallery/Places/Garden_of_the_Gods-1/photo-8#8](http://www.thejoecole.com/gallery/Places/Garden_of_the_Gods-1/photo-8#8)

感谢所有参与的人！如果有一些方法可以将多个答案标记为正确，请告诉我，我会这样做，以便我编译的原始想法能够得到认可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T10:35:08.230

if you fancybox is already open and want to resize then below code will helps you.

```
$.ajax({
            url: 'YOUR URL',
            data:'DATA WANT TO TRANSFER',
            type: 'post'
            dataType: "text",
            success:function(result){                       
                //PLAY WITH RESULT SET

                $.fancybox.toggle();

            },
            error:function(request,error){
                alert("Error occured : "+error);

            }
        }); 
```

Reference from : [Resize Fancybox](http://www.jaiswar-vipin-r.com/resize-fancybox/)

# objective-c - NSString 在 Objective-C 中保留计数

> ID：15194067
> 
> 赞同：-1
> 
> 时间：2013-03-04T03:22:21.487
> 
> 标签：objective-c, nsstring, retaincount

```
NSString* nsString=[[NSString alloc]initWithString:@"nsString"];
NSLog(@"nsString RetainCount:%li",[nsString retainCount]); 
```

相应的结果是：

```
 2013-03-04 11:18:03.291 ARC[655:303] nsString RetainCount:-1 
```

另外：如果使用 init 一个 NSMutableString 实例；它返回 1；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:05:33.697

[http://whentouseretaincount.com](http://whentouseretaincount.com)

`NSStrings`在编译时生成的不可变是单例。因此，他们根本不`retain/release`跳舞。

`NSString`检测何时使用此类初始化并直接返回字符串。您会发现该`alloc`代码中返回的对象与调用返回的对象不同`init...`。

# c++ - 'shared_data *shm' 错误中的 'operator*' 不匹配

> ID：15194070
> 
> 赞同：0
> 
> 时间：2013-03-04T03:22:41.857
> 
> 标签：c++

该程序假设在子进程和父进程之间创建共享内存，其中子进程将一定长度的斐波那契序列（参数）保存到其中，父进程将其吐出。它还假设附加和分离共享内存。除了我收到此错误之外，一切似乎都可以正常工作：

```
proj2.cpp:40: error: no match for 'operator*' in 'shared_data *shm' error 
```

有什么帮助吗？下面的代码。

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/shm.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <iostream>

#define MAX_SEQUENCE 10

struct shared_data{
    long fib_sequence[MAX_SEQUENCE];
    int sequence_size;
} shared_data;

using namespace std;

char * shm;

int Fibonacci(int n){
    int first = 0, second = 1, temp = 0;
    shared_data.fib_sequence[0] = first;
    shared_data.fib_sequence[1] = second;
    for(int i = 2; i<=n; i++){
            temp = first + second;
            shared_data.fib_sequence[i] = temp;
            first = second;
            second = temp;
    }
    return 0;
}

int main(int argc, char *argv[])
{
    pid_t pid;
    int seg_id;
    const int shd = 4096;
    seg_id = shmget(IPC_PRIVATE, shd, S_IRUSR | S_IWUSR);
    shared_data *shm = shmat(seg_id, NULL, 0); 
    int number = atoi(argv[1]);    
    if(number < 0 || number > 10){
        cout << "Invalid number. Please enter a number greater than 0 \n";
        return(1);
    }
    shared_data.sequence_size = number;
    pid = fork();
    if(pid == 0)
        Fibonacci(number);
    else{
        waitpid(pid,0,0);
        for (int i = 0; i <= shared_data.sequence_size; i++)
            cout << shared_data.fib_sequence[i];
        cout << "\n";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:29:06.063

您定义了一个结构`shared_data`，同时创建了一个`shared_data`名为 ....的类型对象`shared_data`。

然后你创建一个`char*`名为`shm`.

因此，在 中`shared_data *shm = shmat(seg_id, NULL, 0);`，`*`被解释为二元`*`运算符，试图将您的对象`shared_data`与您的 char 指针“相乘” `shm`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:29:56.703

这一行：

```
shared_data *shm = shmat(seg_id, NULL, 0); 
```

具有以下属性：

1.  `shared_data`是一个对象，而不是一个类型。
2.  `shm`也是之前声明的对象。
3.  您正在尝试将这两个变量相乘，然后分配给结果。

你可能想要这样的东西：

```
struct shared_data *shm = shmat(seg_id, NULL, 0); 
```

或者你可能想`typedef`在你的结构声明中使用 a `shared_data`。

# ios - 如何减少在MKMapView中显示蓝色圆圈和点的时间

> ID：15194071
> 
> 赞同：0
> 
> 时间：2013-03-04T03:22:42.627
> 
> 标签：ios, location, mkmapview

我使用 MKMapView 显示我当前的位置，我发现当我什么都不做时，我需要大约 15 秒以上才能看到蓝色圆圈并指向地图视图，但是如果我在地图视图之后移动地图开始定位，蓝色圆圈和点会立即显示（现在不需要5秒），它们之间有什么区别？我可以缩短在编码中显示蓝色圆圈的时间吗？多谢

我创建地图

```
self.runMapView = [[[MKMapView alloc] initWithFrame:self.bounds] autorelease];
        self.runMapView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
        self.runMapView.showsUserLocation = YES;
        runMapView.delegate = self; 
```

接着 ：

```
- (void)mapView:(MKMapView *)mapView_ didUpdateUserLocation:(MKUserLocation *)userLocation
{
    if (loc2 == nil)//loc 2 is the ivar i used to track my first location
    {
        if (CLLocationCoordinate2DIsValid(userLocation.location.coordinate))
        {
            self.loc2 = userLocation.location;

            MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.location.coordinate, 2000, 2000);
            [runMapView setRegion:region];
        }
    }

} 
```

我在地图上添加了一些折线视图，当我在开始时将地图视图添加到视图 ctrl 的视图时，地图视图的 alpha 设置为 0（因为我有一个按钮来决定显示或隐藏地图视图），我没有知道后面的地图更新位置是否会导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-28T19:19:30.693

为位置管理器创建一个变量，您需要在地图视图初始化下方更新位置，如下所示：

```
self.runMapView = [[[MKMapView alloc] initWithFrame:self.bounds] autorelease];
    self.runMapView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    self.runMapView.showsUserLocation = YES;
    self.runMapView.delegate = self;
    [self.locationManager startUpdatingLocation]; 
```

# javascript - 在 Google 地图上禁用巴士站

> ID：15194072
> 
> 赞同：5
> 
> 时间：2013-03-04T03:22:55.897
> 
> 标签：javascript, asp.net, google-maps-api-2

我正在使用谷歌地图开发一个 ASP.Net 项目。我的团队决定使用 Google Maps API v2。

问题是，我必须用我的巴士站图标替换地图上的所有巴士站图标。为此，我必须隐藏/禁用它们（或至少是公共交通工具），但我不知道该怎么做。我搜索了很多次，但我没有找到解决方案。

我可以使用什么命令来隐藏这些巴士站图标？

*注意：*我的团队将 Google Map v2 替换为 Google Map v3。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-30T04:49:40.690

知道了！

```
 var styles = [
    {
        "featureType": "transit.station.bus",
        "stylers": [{ "visibility": "off" }]
    }
    ];

    map.setOptions({ styles: styles }); 
```

谷歌地图控件有一个很棒的 api ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:26:40.450

无法使用 Google Maps API v2 完成。可以通过使用 Google Maps API v3 并将地图样式化为不显示它们来完成。正如 Duncan_m 所指出的，“ [Google Maps JavaScript API 第 2 版已于 2010 年 5 月 19 日正式弃用。V2 API 将继续工作到 2013 年 5 月 19 日。](https://developers.google.com/maps/documentation/javascript/v2/reference) ”，强烈反对该 API 的新开发。

# c - 接受调用期间的 IPPROTO_RM 阻塞

> ID：15194073
> 
> 赞同：9
> 
> 时间：2013-03-04T03:23:30.170
> 
> 标签：c, multicast, winsock2, reliable-multicast

这个问题类似于[https://stackoverflow.com/questions/11650328/using-reliable-multicast-pragmatic-general-multicast-not-returning-from-accept](https://stackoverflow.com/questions/11650328/using-reliable-multicast-pragmatic-general-multicast-not-returning-from-accept)，但我的代码与其略有不同，因此可能会导致在不同的答案中。

我正在尝试获得可靠的多播服务器/客户端概念证明设置。

解决方案本身是一个服务器/客户端连接。客户端通过 TCP/IP 连接到服务器。然后服务器打开一个可靠的多播套接字供客户端监听。客户端通过 TCP 发送消息，服务器通过`IPPROTO_RM`. 最终目标是让许多客户端连接到服务器，都接收*每个*回显的消息。

示例代码基于此[页面](http://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancedmulticast9d.html)。

我已经类似地设置了我的 RM 插座（见下面的清单）。TCP 套接字工作正常。问题出在 RM 插座上。服务器打开多播套接字，然后`binds`正确`connects`地打开多播地址。但是，客户端`listens`正确，但调用会`accept`永远阻塞。

客户端和服务器进程都在同一台主机上运行。

我已经检查过，并且主机（Server 2008）上安装了多播支持。

* * *

**更新**：我注意到，如果我先从发送方的套接字向套接字发送一些数据，有时接受会返回。这并不理想，也不可靠。

**更新**：标志指向开关。似乎一个小枢纽不会削减它。我们发生了一起搞笑的事件，导致整栋楼的通讯丢失。

* * *

## 清单

### 服务器创建并连接多播发送者

```
short
   Port = 0;
const char
   *Address = "234.5.6.7";

SOCKET
   RMSocket;

SOCKADDR_IN 
   LocalAddr, 
   SessionAddr;

RMSocket = socket(AF_INET, SOCK_RDM, IPPROTO_RM);

if (RMSocket == INVALID_SOCKET)
   {
   return Failed;
   }

LocalAddr.sin_family = AF_INET;
LocalAddr.sin_port = htons(0);
LocalAddr.sin_addr.s_addr = htonl(INADDR_ANY);

if ( bind( RMSocket, (SOCKADDR*)&LocalAddr, sizeof(LocalAddr)) == SOCKET_ERROR )
   {
   return Failed;
   }

SessionAddr.sin_family = AF_INET;
SessionAddr.sin_port = htons( Port );
SessionAddr.sin_addr.s_addr = inet_addr( Address );

if ( connect( RMSocket, (SOCKADDR*)&SessionAddr, sizeof(SessionAddr)) == SOCKET_ERROR )
   {
   return Failed;
   }

return Success; 
```

### 客户端创建并接受多播阅读器

```
short
   Port = 0;
const char
   *Address = "234.5.6.7";

SOCKADDR_IN 
   LocalAddr;
SOCKET
   RMListener,
   RMSocket;

RMListener = socket( AF_INET, SOCK_RDM, IPPROTO_RM );

if ( RMListener == INVALID_SOCKET ) 
   {
   return Failed;
   }

LocalAddr.sin_family = AF_INET;
LocalAddr.sin_port = htons( Port );
LocalAddr.sin_addr.s_addr = inet_addr( Address );

if ( bind( RMListener, (SOCKADDR*)&LocalAddr, sizeof(LocalAddr) ) )
   {
   return Failed;
   }

if ( listen( RMListener, SOMAXCONN ) )
   {
   return Failed;
   }

// BLOCKS HERE
RMSocket = accept( RMListener, NULL, NULL);

if ( RMSocket == INVALID_SOCKET )
   {
   return Failed;
   }

return Success; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:14:35.467

您是否安装了 MSMQ（微软消息队列）？IPPROTO_RM 需要在基于 Ms 的计算机上工作。此外，它仅适用于 Windows 版本 >= Xp||2003

编辑：我看到你已经检查过了。

# python - 如何在python中通过用户输入打开文件

> ID：15194074
> 
> 赞同：0
> 
> 时间：2013-03-04T03:23:45.780
> 
> 标签：python

我正在（尝试）编写一个工具，该工具将根据用户输入打开文件。我想最终将脚本的结果写入文件并将其存储到与输入文件相同的目录中。

我目前有这个

```
from Bio import SeqIO
import os, glob

var = raw_input("what is the path to the file (you can drag and drop):")
fname=var.rsplit("/")[-1]
fpath = "/".join(var.rsplit("/")[:-1])

os.chdir(fpath)
#print os.getcwd()

#print fname
#for files in glob.glob("*"):
#    print files

with open(fname, "rU") as f:
    for line in f:
        print line 
```

我不明白为什么我无法打开文件。“os.getcwd”和“glob.glob”部分都表明我已成功移至用户目录。此外，该文件位于正确的文件夹中。但是，我无法打开文件...任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:04:18.110

试试这个打开文件并获取文件的路径：

```
import os

def file_data_and_path(filename):
    if os.path.isfile(filename):
        path = os.path.dirname(filename)
        with open(filename,"rU") as f:
            lines = f.readlines()
        return lines,path
    else:
        print "Invalid File Path, File Doesn't exist"
        return None,None

msg = 'Absolute Path to file: '
f_name = raw_input(msg).strip()

lines,path = file_data_and_path(f_name)
if lines != None and path != None:
    for line in lines:
        print lines
    print 'Path:',path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:04:56.740

嗯，假设您需要验证，这可能会对您有所帮助:)

```
def open_files(**kwargs):
    arc = kwargs.get('file')
    if os.path.isfile(arc):
        arc_f = open(arc, 'r')
        lines = arc_f.readlines()
        for line in lines:
            print line.strip()

if __name__ == "__main__":
    p = raw_input("what is the path to the file (you can drag and drop):")
    open_files(file=p) 
```

# wordpress - 无法从仪表板将新主题上传到 wordpress

> ID：15194077
> 
> 赞同：0
> 
> 时间：2013-03-04T03:24:05.177
> 
> 标签：wordpress

我第一次将 wp 安装到服务器上。基本主题有效，我可以更改设置，但我购买了一个新的 wordpress 主题并试图从仪表板上传它：

![上传主题](../Images/886c45d34fba7a4400ec82dfeb0033ae.png)

但它每次都给我一个错误：

![错误](../Images/f9c127c2b54922a6ae2aae775bfac1b6.png)

这些是我在网上找到但没有用的建议： 所以我尝试将所有文​​件夹的权限更改为 755。然后我将文件 update.php 的权限也更改为 755，但我仍然得到同样的错误。我还尝试编辑文件夹“AALimo”（包含 wp 目录的文件夹）的 .htaccess，但这也不起作用。我不确定我是否正确编辑了 .htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:35:33.903

我只是使用 ftp 手动将主题上传到主题目录中，而不是使用仪表板中的主题上传器，这很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T06:12:23.793

我是用 C-Panel 做的。我必须在公共 html 的 WordPress 主题文件夹中上传 zip 文件。解压缩 zip 文件，您可以轻松安装它。

# vb.net - Mvc3 HtmlHelper方法生成格式化的复选框表

> ID：15194084
> 
> 赞同：5
> 
> 时间：2013-03-04T03:26:00.013
> 
> 标签：vb.net, asp.net-mvc-3, razor

这是 vb.net 中的一个 mvc3 Razor 项目。我需要创建一个动态表，它 1) 可以包含 1 列到 3 列和 1 到多行...表中的项目是复选框。我在下面的类中已经有工作的辅助方法但是下面的方法在返回时被抬高，因为它只是返回字符串以及 Ntd 函数的实际字符串，这只是为了了解此时应该发生的事情......我迷失了生成这些复选框可以绑定，因此控制器发布方法将保存...如果我只是转储页面上的所有复选框，它们都会正确保存和更新。布局只是眼睛疼。。

这是当前视图

```
@ModelType xxxxxx.CourseModel

@Code
    ViewData("Title") = "Edit Courses"
End Code

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"  type="text/javascript"></script>

@Using Html.BeginForm(Nothing, Nothing, FormMethod.Post, New With {.enctype = "multipart/form-data"})
    @Html.ValidationSummary(True)

    @<fieldset>
        <legend>Edit Courses</legend>
        @Html.HiddenFor(Function(model) model.cId)
        <table style="float: left">
            <tr>
                <th>Certification Bodies</th>
            </tr>
            <tr>
                @For _i As Integer = 0 To Model.Bodies.Count - 1
                    Dim i = _i
                    @<td>
                        @Html.CheckBoxFor(Function(model) model.Bodies(i).certSelected)
                        @Html.DisplayFor(Function(f) f.Bodies(i).certName)
                        @Html.HiddenFor(Function(model) model.Bodies(i).certBodyId)
                    </td>
                Next
            </tr>
            <tr>
                <th><input type="submit" value="Save" /></th>
            </tr>
        </table>
    </fieldset>
end using 
```

这是辅助方法

```
<Extension()> _
Public Function CreateCheckBoxTable(ByVal helper As HtmlHelper, ByVal d As List(Of CertBodyVM)) As MvcHtmlString
    Dim htmlDisplayer As String = Table()
    Dim counter As Integer = 0
    For Each item In d
        If counter = 0 Then
            htmlDisplayer = htmlDisplayer + NRow()
        End If
        counter += 1
        If Not counter >= 3 Then
            htmlDisplayer = htmlDisplayer + Ntd("@Html.CheckBoxFor(Function(model) model.Bodies(i).certSelected)@Html.DisplayFor(Function(f) f.Bodies(i).certName)@Html.HiddenFor(Function(model) model.Bodies(i).certBodyId)")
        Else
            counter = 0
            htmlDisplayer = htmlDisplayer + CRow()
        End If
    Next
    htmlDisplayer = htmlDisplayer + CTable()
    Dim x As MvcHtmlString = MvcHtmlString.Create(htmlDisplayer)
    Return x
End Function

Public Function Table() As String
    Return String.Format("<table>")
End Function
Public Function CTable() As String
    Return String.Format("</table>")
End Function
Public Function NRow() As String
    Return String.Format("<tr>")
End Function

Public Function TdEnd() As String
    Return String.Format("</td>")
End Function

Public Function CRow() As String
    Return String.Format("</tr>")
End Function

Public Function Ntd(ByVal text As String) As String
    Return String.Format("<td>{0}</td>", text)
End Function 
```

要调用辅助方法，我只是计划将 for each 循环及其内容替换为

```
 @Html.CreateCheckBoxTable(Model.Bodies) 
```

此方法正在生成具有正确行和列的适当表，但我迷失在 checkboxfor..

以下是正在生成的当前输出..

```
<tr><td><table><tr><td>@Html.CheckBoxFor(Function(model) model.Bodies(i).certSelected)@Html.DisplayFor(Function(f) f.Bodies(i).certName)@Html.HiddenFor(Function(model) model.Bodies(i).certBodyId)</td></table></td></tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:43:24.737

您的代码将无法正常工作。您将不得不在帮助程序中重新组合 lambda 表达式。另外，我建议您让这个`CreateCheckBoxTable`帮助程序采用 lambda 表达式，而不仅仅是 CertBodyVM 列表，以便您可能要在此表中使用的 CheckBox（或任何其他输入元素）将具有正确的名称：

```
Public Module MyModule
    Private indexerMethod As MethodInfo = GetType(IList(Of CertBodyVM)).GetMethod("get_Item")
    Private certSelectedProperty As PropertyInfo = GetType(CertBodyVM).GetProperty("CertSelected")
    Private certNameProperty As PropertyInfo = GetType(CertBodyVM).GetProperty("CertName")
    Private certBodyIdProperty As PropertyInfo = GetType(CertBodyVM).GetProperty("CertBodyId")

    <Extension()> _
    Public Function CreateCheckBoxTable(Of TModel)(ByVal helper As HtmlHelper(Of TModel), ByVal ex As Expression(Of Func(Of TModel, IList(Of CertBodyVM)))) As IHtmlString
        Dim table = New TagBuilder("table")
        Dim metadata = ModelMetadata.FromLambdaExpression(ex, helper.ViewData)
        Dim bodies = CType(metadata.Model, List(Of CertBodyVM))
        Dim tableBody = New StringBuilder()
        For i = 0 To bodies.Count - 1
            Dim ex1 = MakePropertyExpression(Of TModel, Boolean)(ex, certSelectedProperty, i)
            Dim ex2 = MakePropertyExpression(Of TModel, String)(ex, certNameProperty, i)
            Dim ex3 = MakePropertyExpression(Of TModel, Integer)(ex, certBodyIdProperty, i)

            Dim tr = New TagBuilder("tr")
            Dim td = New TagBuilder("td")
            td.InnerHtml = String.Concat(
                helper.CheckBoxFor(ex1),
                helper.DisplayFor(ex2),
                helper.HiddenFor(ex3)
            )

            tr.InnerHtml = td.ToString()
            tableBody.Append(tr.ToString())
        Next
        table.InnerHtml = tableBody.ToString()

        Return New HtmlString(table.ToString())
    End Function

    Private Function MakePropertyExpression(Of TModel, TProperty)(ByRef ex As Expression(Of Func(Of TModel, IList(Of CertBodyVM))), ByRef pi As PropertyInfo, ByVal i As Integer) As Expression(Of Func(Of TModel, TProperty))
        Return Expression.Lambda(Of Func(Of TModel, TProperty))(
            Expression.Property(
                Expression.Call(ex.Body, indexerMethod, Expression.Constant(i)),
                pi
            ),
            ex.Parameters()
        )
    End Function
End Module 
```

然后你可以像这样使用它：

```
@ModelType xxxxxx.CourseModel
...
@Html.CreateCheckBoxTable(Function(x) x.Bodies) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:02:51.090

试试这条线

```
htmlDisplayer = htmlDisplayer + Ntd(helper.CheckBoxFor(Function(model) model.Bodies(i).certSelected)helper.DisplayFor(Function(f) f.Bodies(i).certName)helper.HiddenFor(Function(model) model.Bodies(i).certBodyId)) 
```

# android - 以编程方式在水平滚动视图内的图像顶部显示标题

> ID：15194086
> 
> 赞同：0
> 
> 时间：2013-03-04T03:26:15.723
> 
> 标签：android, android-layout

我正在尝试以编程方式将文本视图添加到水平滚动视图内的图像视图。但是，这似乎不起作用。不滚动的相对布局中的示例图像： ![屏幕截图 1](../Images/da4a30a23dda5ff437ef27a860d6c90d.png)

这是水平滚动的示例图像： ![捕获 2](../Images/d736e849a386f39aa39c05e73aebae91.png) 这是我的 xml 布局：

```
 <HorizontalScrollView android:id="@+id/home_horizontal_scroll"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/middle_menu_title" >    

            <LinearLayout android:id="@+id/home_linear_layout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >
                </LinearLayout> 
        </HorizontalScrollView> 
```

在我的测试代码中：

```
 LinearLayout layout = (LinearLayout)findViewById(R.id.home_linear_layout);
    for(int i = 0 ; i < 10; i++){
        ImageView myView = new ImageView(this);
        myView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        myView.setAdjustViewBounds(true);
        myView.setScaleType(ScaleType.FIT_XY);
        myView.setPadding(0, 2, 2, 0);
        myView.setImageResource(R.drawable.render);
        layout.addView(myView);

        TextView text = new TextView(this);

        text.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 50));
        text.setBackgroundColor(Color.parseColor("#4000"));
        text.setTextColor(Color.WHITE);
        text.setGravity(Gravity.CENTER);
        text.setText("Header Title");

        layout.addView(text); 
```

我也尝试在水平滚动视图中使用相对布局，但没有成功。在像下面这样的简单相对布局中，我可以显示标题和图像，但在水平滚动视图中时不能

```
 <RelativeLayout android:id="@+id/top_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/menu_title"
        android:background="@drawable/background_gradient">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginTop="2dip"

            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:adjustViewBounds="true"
            android:scaleType="fitXY"
            android:src="@drawable/render" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:background="#4000"
        android:gravity="center"
        android:text="Image Title"
        android:textColor="#FFFFFF" />
    </RelativeLayout> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:29:12.057

您的布局有问题：

您对 LinearLayout 父视图说根据其子视图获取宽度：

使用 `android:layout_width="wrap_content"`

然后你说孩子们根据父母采取宽度：

使用`LayoutParams.MATCH_PARENT`

您必须了解它无法给出可预测的结果，因为它们都相互依赖。

我认为，如果您将孩子的宽度设置为 LayoutParams.WRAP_CONTENT 它将解决问题：

```
 ImageView myView = new ImageView(this);
    myView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
    myView.setAdjustViewBounds(true);
    myView.setScaleType(ScaleType.FIT_XY);
    myView.setPadding(0, 2, 2, 0);
    myView.setImageResource(R.drawable.render);
    layout.addView(myView);

    TextView text = new TextView(this);

    text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 50));
    text.setBackgroundColor(Color.parseColor("#4000"));
    text.setTextColor(Color.WHITE);
    text.setGravity(Gravity.CENTER);
    text.setText("Header Title");

    layout.addView(text); 
```

编辑：从问题中看到编辑，LinearLayout 不能是好的答案，因为它不允许孩子重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:27:00.220

您可以使用 compoud drawables 轻松地将图像添加到**TextView**而无需将其放入新的父布局中：

```
myTextView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.left, 0, 0, 0); 
```

放置 0 以删除可绘制对象，您可以在任何一侧（左、上、右、下）放置可绘制对象，请参阅[此处](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)的文档，它可能会对您有所帮助。可绘制的大小必须符合您的需求，因为它使用（如它所说的）可绘制的内在边界。

**如果您的LinearLayout**中除了图像和文本之外没有任何其他视图，建议使用复合可绘制对象进行优化。

编辑：看到问题中的编辑：如果您需要重叠图像和文本，复合绘图不能成为答案。

# python - Python - 失去焦点后控制鼠标输入

> ID：15194087
> 
> 赞同：2
> 
> 时间：2013-03-04T03:26:19.870
> 
> 标签：python, background, terminal, minimized

我有一个 python 代码，它使用显示器上的摄像头和红外笔来移动鼠标。

但是，当我单击终端窗口以外的其他内容时，计算机不再控制终端窗口，因此鼠标在移动 IR 笔时不再移动。

我正在寻找可以解决我的问题的代码。

# shell - 如何将命令写入shell脚本？

> ID：15194088
> 
> 赞同：0
> 
> 时间：2013-03-04T03:26:46.980
> 
> 标签：shell, command-line

我想编写一个 shell 脚本来执行诸如“export JAVA_HOME=.....”之类的命令我该如何编写脚本？

我尝试：

```
#!/bin/sh
echo "test"

export PATH=$JAVA_HOME/bin:$PATH
export AWS_AUTO_SCALING_HOME=/usr/local/CLI
export PATH=$PATH:$AWS_AUTO_SCALING_HOME/bin
export AWS_CREDENTIAL_FILE=/usr/local/CLI/credential-file-path.template 
```

但是命令没有被执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:29:45.933

> 但是命令没有被执行。

它们被执行，但在一个子外壳中。父 shell 不继承这些值。

它不是执行脚本，`source`而是：

```
source /path/to/myscript.sh 
```

或者

```
. /path/to/myscript.sh 
```

**进一步阅读：** [执行 bash 脚本和采购 bash 脚本有什么区别？](https://superuser.com/q/176783/37904)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T03:30:50.067

你是如何执行你的脚本的？如果您使用：

```
$ script.sh 
```

环境是在脚本执行期间设置的，但父 shell 完全不受此影响（Unix 不是 DOS！）。

要将命令的结果输入您的 shell，请使用：

```
$ . script.sh 
```

或者在 Bash 中你可以使用：

```
$ source script.sh 
```

（这是`.`(dot) 命令的同义词，该命令自 Bourne shell 以来一直存在于 shell 中。该`source`命令首先在 C shell 中，然后添加到 Bash。）

这些将脚本读入当前进程。任何环境变量设置都会影响当前进程。例如，您的个人资料可以有效地阅读`. $HOME/.profile`。

请注意，在 $PATH 上的目录中搜索 dotted 命令的文件，但该文件只需要可读，而不是可执行文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T03:30:32.163

您是否尝试过设置执行文件的权限？

chmod +x 文件名

# java - 扫描仪帮助 - 使用 2 种扫描仪方法和单个 getter 方法

> ID：15194092
> 
> 赞同：0
> 
> 时间：2013-03-04T03:27:05.750
> 
> 标签：java, java.util.scanner

我对学习 CS1 的 Java 比较陌生。我们已经使用`Scanner`s 几个星期了，在典型情况下我对它们非常满意。我遇到了一个我无法弄清楚的地方，也无法通过研究获得答案。

我有一个正在为课堂构建的薪资计划。我们将使用给定的三个类变量：

*   `employeeLastName`,
*   `hoursWorkded`,
*   `payRate`.

我制作了 3 个单独的 setter 方法以及一个设置所有这三种方法的 setter（使用带有所有四种方法的扫描仪）。

我使用扫描仪获取它自己的设置器没有问题`employeeLastName`，但是当我使用获取三个的方法时，它不是扫描名称，而是打印提示并跳到`hoursWorked`输入。我认为我在那里输入的内容没有任何错误。

在这一点上，我最大的问题是，是否甚至可以使用两种不同的扫描器/帮助器方法来执行设置器，或者`nextLine()`当与其他扫描器实用程序结合使用时，它的行为是否很有趣。以下是与此相关的重要代码摘录。如果还需要什么，请告诉我。提前感谢您的帮助！

```
 private double requestDoubleFromUser( Scanner sc , String prompt )
{

    double userInput;

    System.out.print( prompt );
    userInput = sc.nextDouble();

    return userInput;

}

private String requestNameFromUser( Scanner sc , String prompt )
{

    String nameInput;

    System.out.print( prompt );
    nameInput = sc.nextLine();

    return nameInput;

        /***** Test of Employee 2 *****/

    displayEmployeeData( "\n Default Pay Period Info for Employee 2", employeePayRoll2 );
    System.out.println( "\n Please complete the employee's information to receive a period summary. " );
    employeePayRoll2.setPayRoll( requestNameFromUser( sc, "\n Employee Name: " ) ,
                                 requestDoubleFromUser( sc, "\n  Hours Worked: " ) ,
                                 requestDoubleFromUser( sc, "   Rate of Pay: " ) );
    displayEmployeeData( "\n Pay Period Data for Employee 2", employeePayRoll2 ); 
```

那是行不通的部分。以下是二传手：

```
 public void setEmployeeLastName( String employeeLastName )
{
    this.employeeLastName = employeeLastName;
}

public void setHoursWorked( double hoursWorked )
{
    this.hoursWorked = hoursWorked;
}

public void setPayRate( double payRate )
{
    this.payRate = payRate;
}

public void setPay( double hoursWorked , double payRate )
{
    this.hoursWorked = hoursWorked;
    this.payRate = payRate;
}

public void setPayRoll( String employeeLastName , double hoursWorked , double payRate )
{
    this.employeeLastName = employeeLastName;
    this.hoursWorked = hoursWorked;
    this.payRate = payRate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:45:30.703

您不需要创建方法来询问用户输入。只需使用一个扫描仪对象创建一个主类（保持简单）并像这样收集所有数据：

```
Scanner sc = new Scanner(System.in);
double hoursWorked, payRate;
String empLastName;

System.out.println(prompt); //enter name
empLastName = sc.nextLine();

System.out.println(prompt); //enter hrs worked
hoursWorked = sc.nextDouble();

System.out.println(prompt();//enter payRate
payRate = sc.nextDouble(); 
```

然后，一旦你有了所有的数据，把它传递给你的设置器：

```
 employeePayRoll2.setPayRoll(empLastName, hoursWorked, payRate); 
```

# jquery - JQuery SlideToggle 背景悬停

> ID：15194097
> 
> 赞同：0
> 
> 时间：2013-03-04T03:27:43.460
> 
> 标签：jquery, hover, slidetoggle

好吧，伙计们，我一直在尝试让每个文本框的背景滑到后面，以便在悬停时用 #0F3 的颜色填充整个框。每个人的分隔线之间的意义，但没有运气。你能帮我吗？

[http://jsfiddle.net/jfarr07/hWPAV/3/](http://jsfiddle.net/jfarr07/hWPAV/3/)

HTML

```
<div id="navigation">
<div class="panel"></div>
    <ul id="nav">
        <li class="nav"><a href="#">HOME</a></li>
        <li class="nav"><a href="#">OUR STORY</a></li>
        <li class="nav"><a href="#">GALLERY</a></li>
        <li class="nav"><a href="#">GIFT REGISTRY</a></li>
    </ul>
</div> 
```

CSS

```
body, html {
padding:0;
margin:0;
background-repeat:none;
background-image:url(../../Portfolio/images/lyricblast.png);

}
a:link {
text-decoration:none;
color:#000;
font-family:open-sans, HelveticaNeue, Helvetica Neue Condensed Bold, Helvetica Neue, serif;
}
a:visited {
color:#000;
}
a:hover {
color:#FFF;
}
#navigation {
width:auto;
height:30px;
background:rgba(0, 0, 0, .35);
padding-top:10px;
}
ul#nav {
display:inline;
}
li.nav {
display:inline-block;
margin: 0px 0px 0px 30px;
padding:0px 0px 0px 30px;
position:relative;
}
li~li { 
border-left: 1px solid #000000;

}
.panel {
background:#0F3;
background-size:100%;
height:40px;
display:none;

} 
```

jQuery

```
<script>
$(document).ready(function() {
$("li.nav").hover(
function() {
    $(this).find(".panel").slideToggle("fast");
},
function() {
    $(this).find(".panel").slideToggle("fast");
}
);
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:51:53.197

这里有几件事需要纠正：

你的 JS 代码是

```
<script>
    $(document).ready(function() {
        $("li.nav").hover(function() {
            $(this).find(".panel").slideToggle("fast");
        },function() {
            $(this).find(".panel").slideToggle("fast");
        });
    });
</script> 
```

这里`hover`事件被绑定到元素`li.nav`。`find`inside li.nav 不返回任何元素，因为里面没有名为 class 的`panel`元素`li.nav`。下面是修改后的代码：

```
<script>
    $(document).ready(function() {
        $("li.nav").hover(function() {
            $("#navigation").find(".panel").stop().slideToggle("fast");
        }, function() {
            $("#navigation").find(".panel").stop().slideToggle("fast");
        });
    });
</script> 
```

我还修改了样式`.panel`并使其成为绝对。

```
.panel {
    position:absolute;
    background:#0F3;
    background-size:100%;
    height:40px;
    display:none;
    width:100%;
    top:0;
} 
```

这是[小提琴](http://jsfiddle.net/NesaG/6/)

# ruby-on-rails-3 - 在 Rails 配置上设计 Backbone Heroku 和 require.js

> ID：15194099
> 
> 赞同：3
> 
> 时间：2013-03-04T03:28:01.927
> 
> 标签：ruby-on-rails-3, backbone.js, heroku, devise, requirejs

好的，所以我知道我正在和这里的大男孩和女孩一起玩弄一个应用程序的前端和后端 MVC（即使 bbone 不完全是 MVC），但这是我曾经工作过的第一个真正强大的应用程序，并且不幸的是，在学术领域，没有支持，尤其是更前沿的支持，所以我提前表示感谢。

尝试使用 Rails (3.2.2) 应用程序部署到 Heroku 时出现一些错误，并且资产管道一直在引起问题。由于我在前端使用 BBone，并且 [single]page[app] 需要知道加载时图像和声音的路径，因此我不得不使用[这个 gist](https://gist.github.com/patrickberkeley/3879730)将图像路径附加到 App.assets 以传递给`application.js`用于启动在前端构建的应用程序的 require.js 文件。

问题似乎是 Devise 想要:`config.assets.initialize_on_precompile = false`而 require 想要:`config.assets.initialize_on_precompile = true`和 Heroku 想要在 production.rb 文件中是: `config.assets.compile = true`。

我得到的错误是在 gist 文件`assets.js.erb`中调用数据库以获取`Song`模型中的所有歌曲，倒数第二行

```
App = {};
App.assets = {
  // Returns an object containing all of asset pipeline's image paths.
  //
  // Sample:
  //
  // {
  //   avatars/missing_avatar.png: "/assets/avatars/missing_avatar.png"
  //   chosen-sprite.png: "/assets/chosen-sprite.png"
  //   circle_green.png: "/assets/circle_green.png"
  //   circle_orange.png: "/assets/circle_orange.png"
  //   circle_red.png: "/assets/circle_red.png"
  //   circle_yellow.png: "/assets/circle_yellow.png"
  //   document.png: "/assets/document.png"
  // }
  //

  // This hash is because Rails' Asset Pipeline bundles the routes to files
  // per user session, then hands that to the user's session browser, for security.
  // So we create in Ruby (erb = embedded ruby) a hash of the images to be accessed
  // in the JS.
  images: {
    <% AssetsUtil.images.each do |img| %>
      "<%= img %>" : "<%= asset_path(img) %>",
    <% end %>
  },

  // Return a formatted URL for an asset.
  //
  // Sample:
  //
  // "/assets/document/png."
  //
  path: function(name) {
    // If the file is in our images object, pull the path from there.
    if (this.images && this.images[name]) {
      return this.images[name];
    }

    // Otherwise, create a generic asset path.
    return '/assets/' + name;
  }
};

// Currently this is ALL the songs in the DB, not just the current_user 's songs 
App.songs = {
  songs: <%= Song.all.to_json.html_safe %>
}; 
```

`rake assets:precompile`在部署到 Heroku 之前尝试按照建议执行的完整跟踪错误是：

```
** Invoke assets:precompile (first_time)
** Invoke requirejs:precompile:external (first_time)
** Invoke requirejs:test_node (first_time)
** Execute requirejs:test_node
** Execute requirejs:precompile:external
/Users/me/.rvm/rubies/ruby-1.9.3-p362/bin/ruby /Users/me/.rvm/gems/ruby-1.9.3-p362/bin/rake requirejs:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke requirejs:precompile:all (first_time)
** Invoke requirejs:precompile:prepare_source (first_time)
** Invoke requirejs:setup (first_time)
** Invoke assets:environment (first_time)
** Invoke requirejs:precompile:disable_js_compressor (first_time)
** Execute requirejs:precompile:disable_js_compressor
** Execute assets:environment
** Execute requirejs:setup
** Invoke requirejs:clean (first_time)
** Invoke requirejs:setup 
** Execute requirejs:clean
** Execute requirejs:precompile:prepare_source
rake aborted!
uninitialized constant Song
  (in /Users/me/dev/SoundOfFractions/app/assets/javascripts/assets.js.erb)
/Users/me/dev/SoundOfFractions/app/assets/javascripts/assets.js.erb:48:in `block in singletonclass'
/Users/me/dev/SoundOfFractions/app/assets/javascripts/assets.js.erb:65530:in `instance_eval'
/Users/me/dev/SoundOfFractions/app/assets/javascripts/assets.js.erb:65530:in `singletonclass'
/Users/me/dev/SoundOfFractions/app/assets/javascripts/assets.js.erb:65528:in `__tilt_70168709646800'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.4/lib/tilt/template.rb:144:in `call'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.4/lib/tilt/template.rb:144:in `evaluate'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.4/lib/tilt/template.rb:77:in `render'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:12:in `initialize'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:16:in `initialize'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/requirejs-rails-0.9.1/lib/tasks/requirejs-rails_tasks.rake:94:in `block (4 levels) in <top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/requirejs-rails-0.9.1/lib/tasks/requirejs-rails_tasks.rake:92:in `block (3 levels) in <top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `<main>'
Tasks: TOP => requirejs:precompile:all => requirejs:precompile:prepare_source
rake aborted!
Command failed with status (1): [/Users/me/.rvm/rubies/ruby-1.9.3-p362...]
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.2/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/requirejs-rails-0.9.1/lib/tasks/requirejs-rails_tasks.rake:85:in `block (3 levels) in <top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/me/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `<main>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile => requirejs:precompile:external 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'railroady'
  gem 'sqlite3'
  # For linux support
  gem 'therubyracer'
end

group :production do
  gem 'pg'
  gem 'thin'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'uglifier', '>= 1.0.3'
end

# gem "better_errors", ">= 0.2.0", :group => :development
# gem "binding_of_caller", ">= 0.6.8", :group => :development

gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'

gem 'jquery-rails'
gem 'rails-backbone'
gem "bootstrap-sass", "~> 2.3.0.0"
gem 'requirejs-rails'
gem 'ejs'
gem 'devise'

gem "better_errors", ">= 0.2.0", :group => :development
gem "binding_of_caller", ">= 0.6.8", :group => :development
gem 'color_routes'
gem 'gon' 
```

那么我应该从哪里开始配置以完成部署？

[潜在信息：如果您在此处](http://railscasts.com/episodes/66-custom-rake-tasks)观看如何从 Railscasts 制作自定义 rake 任务，运行自定义 rake 任务时会发生相同的错误，Ryan 解释说该任务无法访问数据库，因为自定义任务需要一个`=> :environment dependency`(~4:15在电影中）访问 User 类。由于预编译无法访问歌曲模型，我怎么能提供相同或相似的依赖`application.js file`？

其他信息：

据我了解，资产管道的工作方式是针对每个会话，它捆绑路径（因此，当您键入类似的内容时`<%= link_to 'Sign in', new_user_path %>`，rails 会在资产管道中定义这些路径，并将其提供给用户。由于 Backbone 是客户端渲染，它在从 rails 服务器传递页面后，需要知道图像和声音的路径，而我发现的唯一方法是上面列出的要点，它将“资产”捆绑到 JS，类似的方法为`gem 'gon'`页面提供全局变量。我当然是在新的领域，并对重组持开放态度，但它在`dev`模式下工作，所以我也在试图弄清楚`production`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:06:51.697

在 heroku 资产预编译期间，Rails 环境对您不可用。因为它们被制作一次并且不再刷新，所以告诉下一次部署。话虽如此。您应该将与动态数据库相关的调用移动到您的视图中，并通过 API 调用或通过在 json 中的 dom 中编写脚本标记来“引导”数据来呈现数据。我通常有 window.NAME_OF_APPLICATION.collections.SONGS 所以它们在全球范围内可供我使用。

例子。

```
:javascript
  window.lineItems = {lineItems: #{ @order.line_items.order("position").to_json( :include => :department).html_safe}, order: #{@order.to_json} } 
```

当 Backbone 上线时，它会调用这些项目。并为他们初始化一个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T05:24:22.273

@burningpony 上面接受的答案并不完全正确。

如果您使用 labs 插件，Rails环境在 heroku 资产预编译期间**可用：**

[https://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

# qt - 创建要在非 Qt 应用程序中使用的 Qt 库

> ID：15194100
> 
> 赞同：0
> 
> 时间：2013-03-04T03:28:08.827
> 
> 标签：qt

我按照这里的说明创建了一个 Qt 静态库：http: [//qt-project.org/wiki/How_to_create_a_library_with_Qt_and_use_it_in_an_application](http://qt-project.org/wiki/How_to_create_a_library_with_Qt_and_use_it_in_an_application)

然后我尝试将库与我自己的（非 Qt）应用程序链接，并且 GCC 抱怨未定义的引用。使用 Linux 实用程序检查库内容，`nm`我发现我打算调用的函数在其前后添加了神秘字母。

更仔细地阅读指令链接中的指令，它表明我需要使用导入定义，以便可以调用正确的 Qt 宏来导入函数（我假设重命名函数以匹配库中的命名方案）。但我真的不想在我的主应用程序中引入 Qt 依赖项。

我真正想做的是用 Qt 构建一个 UI 前端库，我的主应用程序将简单地链接到它而没有任何 Qt 依赖项。这可能吗？还是我无意中使用了 Qt？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:10:08.490

听起来您正在遇到 C++ 命名空间重整。尝试在您的库导出周围添加一个“extern "C" {}' 块。

QLibrary::resolve 函数的主要目的是提供一个抽象层，因此您不必担心解析符号的 win32 命令或 linux 命令。不必使用用 Qt 创建的库。

# parsing - 最左推导是什么意思？

> ID：15194103
> 
> 赞同：8
> 
> 时间：2013-03-04T03:28:34.503
> 
> 标签：parsing, language-agnostic, compiler-construction

请帮助我理解 中`Left Most Derivation`的第二个`L`是什么意思`LL Parser`。

用一个最简单的例子来解释。

我看到下图解释了*最左推导*，但我不明白：

![在此处输入图像描述](../Images/73c501e06af7954f819a991b32946460.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T03:41:21.013

语法规则以非终结符号和终结符号显示在左侧。非终结符号应该是大写字母，其他一切通常都是终结符号。在示例中，N 和 D 是非终结符，0-9 是终结符。最左推导总是使最左边的非终结符通过语法规则。尝试格式化下面的示例。

```
N
=> N D   --Replaces the first/left most/only (which is "N") with the N => N D rule
=> N D D --Replaces the first/left most nonterminal (which is "N") with the N => N D rule
=> D D D --Replaces the first nonterminal (which is "N") with the N => D rule
=> 1 D D --Replaces the first nonterminal ("D") with the D => 1 rule(our first terminal character!)
=> 1 2 D --Replaces the first nonterminal ("D") with the D => 2 rule
=> 1 2 3 --Replaces the first nonterminal ("D") with the D => 3 rule
-- Only terminal characters remain, derivation/reduction is complete. 
```

# c++ - 在不使用 SetCurrentDirectory 的情况下使用 zlib 解压缩

> ID：15194107
> 
> 赞同：0
> 
> 时间：2013-03-04T03:29:24.663
> 
> 标签：c++, zip

我正在使用[zlib](http://www.zlib.net/)解压缩 zip 文件的列表。这是简单的方法。但是`SetCurrentDirectory`函数调用会影响我的其他线程。有没有办法使用zlib解压缩到特定目录。

```
SetCurrentDirectory("c:\\docs\\stuff");
HZIP hz = OpenZip("c:\\stuff.zip",0);
ZIPENTRY ze; GetZipItem(hz,-1,&ze); int numitems=ze.index;
for (int i=0; i<numitems; i++)
{ GetZipItem(hz,i,&ze);
   UnzipItem(hz,i,ze.name);
 }
 CloseZip(hz); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:34:42.523

您所拥有的是一个包装器，可以轻松使用 zlib 库。您已将问题标记为 C++，您正在使用 C++ 的包装器，同时您正在使用利用此包装器的全局帮助器 API。

我建议您直接使用 TUnzip 包装器（以如何`UnzipItemInternal`实现为例）。TUnzip 类有一个很好的方法允许设置基本目录`ZRESULT TUnzip::SetUnzipBaseDir(const TCHAR *dir)`。调用它来设置目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:13:11.243

找到了解决方案。

```
void unZipPackage(std::wstring zip_file,std::wstring dest_dir){ 

    HZIP hz = OpenZip(zip_file.c_str(),0);  
    ZIPENTRY ze; GetZipItem(hz,-1,&ze); int numitems=ze.index;
    for (int i=0; i<numitems; i++)
    { 
        GetZipItem(hz,i,&ze);               
        wchar_t dest[MAX_PATH];
        swprintf(dest,MAX_PATH,L"%s\\%s",dest_dir.c_str(),ze.name);     
        UnzipItem(hz,i,dest);       
    }   
    CloseZip(hz);
} 
```

# authentication - Selenium 驱动程序不记得用户身份验证

> ID：15194108
> 
> 赞同：1
> 
> 时间：2013-03-04T03:29:40.460
> 
> 标签：authentication, selenium, selenium-webdriver

我正在测试的应用程序需要使用用户的 Google 帐户登录。每次我登录时，它都会显示/要求我选择“允许访问”按钮，就好像它不记得我已经将它添加到我的 Google 帐户的授权访问列表中一样。这在我手动测试时不会发生，只有在我运行 Selenium 时才会发生。有没有人遇到过这样的问题或知道解决方案？提前致谢。

```
WebDriver driver = selenium_driver.get(); // using chrome driver 
baseUrl = defaults.getProperty("base_url"); // this is set to my localhost 
helper.ConnectToURL(baseUrl); 
```

当这种情况开始发生时，我一直在使用 Selenium 2.28.0——从那时起，我已经更新到 2.31.0，但它表现出相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:37:05.690

**免责声明：** 根据 ChromeDriver wiki，这目前是不可能的。它在“已知问题”部分“无法指定自定义配置文件”中说明。（[https://code.google.com/p/selenium/wiki/ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)）

在修复它的某个时候，我建议创建或使用默认的 chrome 配置文件，该配置文件具有您的授权访问集，您的测试在启动时使用该配置文件。

根据 ChromeDriver wiki：“默认情况下，ChromeDriver 将为每个会话创建一个新的临时配置文件”。

查看这篇文章以获取有关功能的更多详细信息：[http ://code.google.com/p/chromedriver/wiki/CapabilitiesAndSwitches](http://code.google.com/p/chromedriver/wiki/CapabilitiesAndSwitches)

我在 .NET 和 Windows 中工作；我的设置看起来像这样：

```
ChromeOptions chromeOptions = new ChromeOptions();
chromeOptions.AddArgument("start-maximized");
chromeOptions.AddArgument("user-data-dir=C:\\Users\\username\\AppData\\Local\\Google\\Chrome\\User Data\\Default");
capabilities = DesiredCapabilities.Chrome();
capabilities.SetCapability(ChromeOptions.Capability, chromeOptions);
ChromeDriver chromeDriver= new ChromeDriver(this.Environment.ChromeDriverLocation, chromeOptions); 
```

如果您不限于使用 Chrome 进行测试，您可以使用 Firefox 创建和使用自定义配置文件。

# javascript - Javascript数组+索引

> ID：15194117
> 
> 赞同：1
> 
> 时间：2013-03-04T03:30:30.867
> 
> 标签：javascript, getelementbyid

我仍然需要这方面的帮助，并编辑了 jsfiddle 帖子以显示我的问题。[http://jsfiddle.net/7ztEf/6/](http://jsfiddle.net/7ztEf/6/)

我想将数字返回到关联的索引值 [0] =0 [1]=1，因为您可以看到索引字符串返回所有数字。再次感谢保罗

我有一个将值返回到 DIV ID 的数字生成器脚本。我需要以某种方式连接到这一点，以启用基于数值的替换颜色，即`> 1 && <= 20 = red`等。

```
function myNumbers(numbers, type) {
    for (var x in numbers) {
       document.getElementById(type + x).innerHTML = numbers[x];
    } 
} 
```

这个脚本用一个随机数填充每个名为`num0`...的 DIV。`num3`

我已经设法查询了的第一个值，`numbers[x]`但需要设置一个索引顺序来循环其余部分，或者其他什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:36:31.103

使用`Array.forEach`.

```
numbers.forEach(function (number, index) {...}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:53:59.073

不要`for..in`用于数组。它们旨在用于对象，因此`for..in`在数组上使用将返回`length`元素之类的东西。

要么使用提到的 ethagnawl 的 forEach，要么使用传统的`for`循环：

```
for (var x=0; x < numbers.length; x++) {
   document.getElementById(type + x).innerHTML = numbers[x];
} 
```

# ios - 如何使用 UIWebView Delegate 的 shouldStartLoadWithRequest 方法

> ID：15194126
> 
> 赞同：4
> 
> 时间：2013-03-04T03:31:08.853
> 
> 标签：ios, objective-c, uiwebview, uiwebviewdelegate

我需要从 UIWebView 中显示的 URL 中删除超链接，并且我已经查看了这个问题：[Removing hyper links from a URL shown in UIWebView](https://stackoverflow.com/questions/7787840/removing-hyper-links-from-a-url-shown-in-uiwebview)。

我知道我需要使用这种方法：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

但我似乎仍然有一些问题。

首先，我如何只避免某些链接（例如：www.google.com）。

接下来，如何避免 UIWebView 中的所有链接？

我的代码如下所示：

```
[webUI loadHTMLString:[strDescription stringByDecodingHTMLEntities] baseURL:nil];
webUI.dataDetectorTypes = UIDataDetectorTypeNone;

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"finish loading");

    [webUI stringByEvaluatingJavaScriptFromString:@"document.styleSheets[0].addRule(\".active\", \"pointer-events: none;\");document.styleSheets[0].addRule(\".active\", \"cursor: default;\")"];

}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
       return YES;
} 
```

需要一些指导。谢谢..

HTML 字符串如下所示：

```
> <div style="font-family: Helvetica"><div style="color: #FFFFFF;"><div
> style="font-family: Helvetica;"><p><span style="font-size:
> 24px;"><strong>Optimal Performance Always</strong></span><span
> style="font-size: 18px;"><br /></span></p><p><span style="font-size:
> 18px;">The standard servicing package<a
> href="http://www.google.com">www.google.com</a></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:51:01.057

如果您想在第一页加载后禁用所有链接，您可以添加一个属性来存储页面是否已加载，并在 webView:shouldStartLoadWithRequest 上使用其值：

```
@property(nonatomic) BOOL pageLoaded; // initially NO

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"finish loading");

    [webUI stringByEvaluatingJavaScriptFromString:@"document.styleSheets[0].addRule(\".active\", \"pointer-events: none;\");document.styleSheets[0].addRule(\".active\", \"cursor: default;\")"];

    // after all your stuff
    self.pageLoaded = YES;
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   return ! self.pageLoaded;
} 
```

请注意，这不会隐藏链接，它只会使 webview 不加载它们。

此外，您可以检查 webView:shouldStartLoadWithRequest:navigationType: 上的 request.URL 以仅加载某些页面。另一种方法是检查 navigationType 值：

```
enum {
   UIWebViewNavigationTypeLinkClicked,
   UIWebViewNavigationTypeFormSubmitted,
   UIWebViewNavigationTypeBackForward,
   UIWebViewNavigationTypeReload,
   UIWebViewNavigationTypeFormResubmitted,
   UIWebViewNavigationTypeOther
}; 
```

# ios - 建立连接之前自动匹配的 playerID 存储在哪里？

> ID：15194132
> 
> 赞同：1
> 
> 时间：2013-03-04T03:31:47.663
> 
> 标签：ios, game-center, gkmatchmaker

我已经实现了一个自定义媒人作为 GKMatchmakerViewController 的直接替代品，仅在 iOS6+ 中运行时显示。它运行良好，但 GKMatchmakerViewController 中有一部分用户界面我似乎无法弄清楚。

当启动 2 人 (request.minPlayers = 2, request.maxPlayers = 2) 自动匹配时，GKMatchmakerViewController 能够使用在玩家**更改为连接状态之前**找到的玩家的显示名称和照片更新其 UI .

我使用以下代码启动自动匹配。建立连接，游戏开始，一切都很好。

```
[[GKMatchmaker sharedMatchmaker] findMatchForRequest:matchRequest withCompletionHandler:^(GKMatch *match, NSError *error) {
    if (error != nil) {
        // ...the error handling code...
    } else if (match != nil) {
        NSLog(@"An auto-match has been found: %@", match);

        if (match.expectedPlayerCount == 0) {
            [[GKMatchmaker sharedMatchmaker] finishMatchmakingForMatch:match];
        } else {
            NSLog(@"player IDs: %@", match.playerIDs);
        }
    }
}]; 
```

但是，在他们通过以下方式更改为 GKPlayerStateConnected 之前，我无法获取 playerID：

```
- (void)match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state; 
```

找到匹配后，该玩家处于 GKPlayerStateUnknown 中。但是，代码中的匹配 NSLog() 显示了 playerID（它绝对不是 localPlayer 的 ID；真实数字已被编辑）：

```
An auto-match has been found: <GKMatch 0x210b2c90 expected count: 1 seqnum: 0
    G:1234567890:unknown
reinvitedPlayers:(
)> 
```

匹配的 playerIDs 数组（第二个 NSLog()）在匹配创建后立即为空，这是有道理的，因为尚未正式建立连接：

```
player IDs: (
) 
```

我终于回答了问题（感谢您的耐心等待）：

1a) 处于未知状态的玩家的ID是从哪里来的？

1b）它显然在比赛中，但它到底存储在哪里？我看到的唯一与 playerID 相关的是空数组。

2) 是否有其他（合法）方式来获取该 playerID？即在它们变为连接状态之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:22:09.560

好的，回答我自己的问题。可以这样做：

```
NSLog(@"An auto-match has been found: %@", match);

NSString * matchDescription = [match description];
NSLog(@"%@", matchDescription);   // displays the same thing as NSLog(@"%@", match)

NSRange gRange = [matchDescription rangeOfString:@"G:"];
if (gRange.location != NSNotFound) {
    NSRange endSearchRange;
    endSearchRange.location = gRange.location + 2;  // skip the G:
    endSearchRange.length = matchDescription.length - endSearchRange.location;
    NSRange endRange = [matchDescription rangeOfString:@":" options:NSLiteralSearch range:endSearchRange];

    if (endRange.location != NSNotFound) {
        NSUInteger idSpan = endRange.location - gRange.location;
        gRange.length = idSpan;
        NSString * opponentPlayerID = [matchDescription substringWithRange:gRange];
        NSLog(@"%@", opponentPlayerID);    // G:1234567890

        // update the UI with the opponent's info
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:18:35.270

您`playerID`在`findMatchForRequest`完成处理程序中有：

```
[[GKMatchmaker sharedMatchmaker] findMatchForRequest:matchRequest withCompletionHandler:^(GKMatch *match, NSError *error) {
  // -- removed error checking code for short --
  puts( "PLAYER ID's:" ) ;
  for( NSString* ns in match )
      puts( [ ns UTF8String ] ) ; // FORMAT: G:37145177499\. DO NOT FUDGE WITH THE STRING.

    [GKPlayer loadPlayersForIdentifiers:theMatch.playerIDs withCompletionHandler:^( NSArray *players, NSError *nsError ) {
      puts( "The REMOTE player aliases are:" ) ;
      if( !nsError )
        for( GKPlayer* p in players )
          puts( [p.alias UTF8String ] ) ;
   } ] ;
}]; 
```

然后，您可以从[GKPlayer loadPlayersForIdentifiers:withCompletionHandler 中检索播放器的别名等：](http://developer.apple.com/library/mac/#documentation/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html#//apple_ref/occ/clm/GKPlayer/loadPlayersForIdentifiers%3awithCompletionHandler%3a)

# jquery - 使用 jQuery 更改 div 的可见性

> ID：15194135
> 
> 赞同：1
> 
> 时间：2013-03-04T03:32:11.493
> 
> 标签：jquery, css

我想使用链接来切换 div 元素的可见性。该链接`abstractShow`最初具有类，因此我尝试使用以下代码进行切换。但是，它仅适用于第一次点击（通过显示 div），并且`abstractHide`在后续点击中永远不会触发 click 事件。

```
 $("a.abstractShow").click(function(){
      $(this).html('Hide')
      $(this).addClass("abstractHide");
      $(this).removeClass("abstractShow");
      $(this).next("div.abstract").show("fast");
  });
  $("a.abstractHide").click(function(){
      $(this).html('Show')
      $(this).addClass("abstractShow");
      $(this).removeClass("abstractHide");
      $(this).next("div.abstract").hide("fast");
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:34:31.233

用这个，

```
$("a.abstractHide").on('click', function(){
      $(this).text('Show')
      $(this).addClass("abstractShow");
      $(this).removeClass("abstractHide");
      $(this).next("div.abstract").hide("fast");
});
$("a.abstractHide").on('click', function(){
      $(this).text('Show')
      $(this).addClass("abstractShow");
      $(this).removeClass("abstractHide");
      $(this).next("div.abstract").hide("fast");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:39:33.340

使用事件处理程序绑定事件时，您使用选择器，例如`$("a.abstractHide")`. 这会在当前 HTML 中查找在***绑定时***匹配该选择器的任何元素。因此，稍后更改类时，事件不会神奇地绑定到该元素，因为当您最初绑定事件时它没有该类。

使用 on() 的事件委托是一种选择，另一种是仅使用`toggle()`;

```
$("a.abstractShow").on('click', function(){
    var state = $(this).hasClass('active');
    $(this).html(state ? 'Hide' : 'Show')
           .toggleClass('active')
           .next("div.abstract").toggle(state);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:38:46.887

这就是你所需要的： `**[LIVE DEMO](http://jsbin.com/ayubib/4/edit)**`

```
$("a.abstractShow").click(function( e ){
    e.preventDefault();
    $(this).text( $(this).text()=='Show'?'Hide':'Show' )
           .next(".abstract").toggle(400);
}); 
```

# android - 有什么方法可以提高使用 Handler 和 Runnable 的性能吗？

> ID：15194136
> 
> 赞同：0
> 
> 时间：2013-03-04T03:32:32.820
> 
> 标签：android, performance

我正在使用 Handler 和 Runnable 来重复歌曲的一段，但它似乎耗尽了手机的电池，因为它每毫秒检查一次。这是我的代码：

每当用户开始循环时，我都会执行以下操作：

```
anotherHandler.post(mPlayLoopTask); 
```

anotherHandler 是在顶部声明的全局变量”

```
 private Handler anotherHandler = new Handler(); 
```

这是我的Runnable：

```
 private Runnable mPlayLoopTask = new Runnable() {

        public void run() 
           {

                if( mp != null)
                {
                    if( isLoopOn && start_position != -1 && end_position != -1 )
                    {
                        long currentPosition = mp.getCurrentPosition();

                        if( currentPosition >=end_position )
                        {
                            mp.seekTo(start_position);
                        }
                    }

                    anotherHandler.post(this);
                }
           }
        }; 
```

有什么方法可以提高性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:41:55.263

在您的代码中，您的 Handler 队列中始终至少有一个 Runnable。这确实是一个问题，因为线程将不断地执行待处理的消息，而不仅仅是一帧一次。

带有睡眠/等待的 Android AsyncTask 可能更适合您的情况。

如果需要，您可以在此处查看文档和示例：[https ://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:50:32.153

另外，如果我是你，我会尝试[AudioTrack课程。](http://developer.android.com/reference/android/media/AudioTrack.html)

```
setLoopPoints(int startInFrames, int endInFrames, int loopCount) 
```

设置循环点和循环计数。

```
setPlaybackHeadPosition(int positionInFrames) 
```

设置播放头位置。

```
setPlaybackPositionUpdateListener(AudioTrack.OnPlaybackPositionUpdateListener listener) 
```

当到达先前设置的标记或每次定期播放头位置更新时，设置 AudioTrack 通知的侦听器。

```
setPlaybackPositionUpdateListener(AudioTrack.OnPlaybackPositionUpdateListener listener, Handler handler) 
```

当到达先前设置的标记或每次定期播放头位置更新时，设置 AudioTrack 通知的侦听器。

# c# - 如何设置自定义 Jquery 自动完成响应消息

> ID：15194138
> 
> 赞同：0
> 
> 时间：2013-03-04T03:33:06.633
> 
> 标签：c#, jquery, asp.net, .net, ajax

我正在使用 Jquery 自动完成文本框，因为我正在输入一个以 z 开头的名称或数据库中不可用的名称，当时我需要在自动完成中显示一条自定义消息，提及“未找到数据”

我想出了一个解决方案，如果下面提到的解决方案不正确或任何其他替代方法来实现它，请纠正我。

提前致谢。

自动完成文本框.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="AutoCompleteTextBox.aspx.cs" Inherits="Ajax_Using_Jquery.AutoCompleteTextBox" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Ajax Auto Complete Using Jquery</title>
    <script type="text/javascript" src="JQuery/jquery-1.9.0.mini.js"></script>
    <script type="text/javascript" src="JQuery/jquery-ui.min.js" ></script>
    <%--<link type="text/css" href="StyleSheet/jquery-ui.css" rel="Stylesheet" />--%>
     <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

      <%--<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script> --%> 
    <script type="text/javascript">

     $(document).ready(function () {

         $(".autosuggest").autocomplete({
             source: function (request, response) {
                 $.ajax({
                     type: "POST",
                     contentType: "application/json; charset=utf-8",
                     url: "AutoCompleteFetchService.asmx/getUserNames",
                     data: "{'TextBoxVal':'" + document.getElementById('txtName1').value + "'}",
                     dataType: "json",
                     success: function (data) {
                         response(data.d);
                         if (data.d == "" || data.d == null || typeof (data.d) == 'undefined') {

                             response(["no search found"]);
                         }
                     },
                     error: function (XMLHttpRequest, textStatus, errorThrown) {
                         alert("error " + XMLHttpRequest);
                         alert("error " + textStatus);
                         alert("error " + errorThrown);
                     }
                 });
             }
         });
     });
    </script>
  <%--  <link href="StyleSheet/jquery-ui.css" type="text/css" rel="Stylesheet" />--%>
</head>
<body>
    <form id="form1" runat="server">
    <table>
    <tr>
    <td>
    <div>
    User Name : &nbsp;&nbsp;

        <input type="text" id="txtName1" class="autosuggest"  />
    </div>
    </td>
    </tr>
    </table>
    </form>
</body>
</html> 
```

AutoCompleteFetchService.asmx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;
using System.Configuration;

namespace Ajax_Using_Jquery
{
    /// <summary>
    /// Summary description for AutoCompleteFetchService
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService()]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class AutoCompleteFetchService : System.Web.Services.WebService
    {

        [WebMethod]
        public List<string> getUserNames(string TextBoxVal)
        {
            string strCon;
            List<string> objList = new List<string>();
            strCon = ConfigurationManager.ConnectionStrings["EmpNameFetch"].ConnectionString;
            SqlConnection con = new SqlConnection(strCon);
            SqlCommand cmd = new SqlCommand(@"select EmpName from newTb2 where EmpName like '%" + TextBoxVal + "%'", con);
            con.Open();
            SqlDataReader objReader = cmd.ExecuteReader();

            while (objReader.Read())
            {
                objList.Add(objReader["EmpName"].ToString());
            }

            con.Close();
            return objList;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:40:49.723

如果未找到结果，则以下打印“0 个结果”，如果找到结果，则向用户打印一条有用的消息，内容为“单击或向上/向下箭头”

> 消息：{noResults：'0 结果'，结果：function() {return '单击或箭头 U/D'；} }

# c# - 根据不同的元素 id 设置工具提示

> ID：15194140
> 
> 赞同：0
> 
> 时间：2013-03-04T03:33:15.357
> 
> 标签：c#, javascript, jquery, asp.net

我正在尝试获得不同的 elemenet id 并为每个人设置工具提示，但我无法做到

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript">
var data = {
    name: "enter your name",
    family: "enter your family",
    testfamily: "enter your family",
    uc1_txtname: "enter your name for Control 1 (User Control1)",
    uc2_txtname: "enter your name for Control 2 (User Control2)"
}
function tooltipshow() {

//trying to get different element id and set tooltip, the below code is just a sample
document.getElementbyID(dynamicID).Title = "DynamicTooltip based on element ID";

    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:36:23.140

```
function tooltipshow(ID, tooltip) {
    document.getElementById(ID).setAttribute('title', tooltip);
}

for (item in data) {
    if (data.hasOwnProperty(item)) {
        tooltipshow(item, data[item]);
    }
} 
```

# mysql - MySql 重写子查询加入

> ID：15194141
> 
> 赞同：0
> 
> 时间：2013-03-04T03:33:31.490
> 
> 标签：mysql, sql, query-optimization

我对这个查询有疑问：

```
SELECT Group_concat(DISTINCT titlegredcd) 
       targetGroup, 
       tblevent.id, 
       generalsubcategorynm, 
       generalcategorynm, 
       coursename, 
       (SELECT Count(*) 
        FROM   tblinternalstudent, 
               tblstaff 
        WHERE  eventid = tblevent.id 
               AND tblinternalstudent.staffnoic = tblstaff.staffnoic) Total, 
       Date_format(startdate, '%d %b') 
       startdateDisplay, 
       Date_format(enddate, '%d %b') 
       enddateDisplay, 
       class, 
       organizer, 
       subcategorymainorder, 
       subcategorysuborder, 
       tblrefgeneralsubcategory.generalcategorycd, 
       tblrefgeneralsubcategory.generalsubcategorycd 
FROM   tblevent, 
       tblcourse, 
       tblrefgeneralsubcategory, 
       tblrefgeneralcategory, 
       tblinternalstudent a, 
       tblstaff b 
WHERE  tblrefgeneralsubcategory.generalcategorycd IN 
       ( 'G0001', 'G0002', 'G0003' ) 
       AND tblcourse.generalcategorycd = 
           tblrefgeneralsubcategory.generalcategorycd 
       AND tblcourse.generalsubcategorycd = 
           tblrefgeneralsubcategory.generalsubcategorycd 
       AND tblevent.courseid = tblcourse.courseid 
       AND tblrefgeneralsubcategory.generalcategorycd = 
           tblrefgeneralcategory.generalcategorycd 
       AND a.eventid = tblevent.id 
       AND a.staffnoic = b.staffnoic 
       AND startdate >= '2012-01-01' 
       AND enddate <= '2012-12-31' 
GROUP  BY tblevent.id, 
          generalsubcategorynm, 
          generalcategorynm, 
          coursename, 
          total, 
          startdatedisplay, 
          enddatedisplay, 
          class, 
          organizer, 
          subcategorymainorder, 
          subcategorysuborder, 
          tblrefgeneralsubcategory.generalcategorycd, 
          tblrefgeneralsubcategory.generalsubcategorycd 
ORDER  BY tblrefgeneralsubcategory.generalsubcategorycd, 
          coursename 
```

处理大约需要 30 分钟，我怀疑问题来自子选择。

我尝试使用加入重写：

```
SELECT e.id, 
       e.courseid, 
       internalstaff.targetgroup, 
       internalstaff.total, 
       Date_format(startdate, '%d %b') AS startdateDisplay, 
       Date_format(enddate, '%d %b')   AS enddateDisplay, 
       class, 
       organizer, 
       coursename, 
       gs.generalcategorycd, 
       gs.generalsubcategorycd, 
       gs.generalsubcategorynm, 
       gs.subcategorymainorder, 
       gs.subcategorysuborder, 
       generalcategorynm 
FROM   tblcourse c, 
       tblrefgeneralsubcategory gs, 
       tblrefgeneralcategory g, 
       tblevent e 
       JOIN (SELECT i.eventid, 
                    Count(*)                           AS Total, 
                    Group_concat(DISTINCT titlegredcd) AS TargetGroup 
             FROM   tblinternalstudent i, 
                    tblstaff s 
             WHERE  i.staffnoic = s.staffnoic 
             GROUP  BY i.eventid) AS internalstaff 
         ON internalstaff.eventid = e.id 
WHERE  e.courseid = c.courseid 
       AND gs.generalcategorycd = g.generalcategorycd 
       AND gs.generalcategorycd IN ( 'G0001', 'G0002', 'G0003' ) 
       AND c.generalcategorycd = gs.generalcategorycd 
       AND c.generalsubcategorycd = gs.generalsubcategorycd 
       AND startdate >= '2012-01-01' 
       AND enddate <= '2012-12-31' 
GROUP  BY e.id, 
          generalsubcategorynm, 
          generalcategorynm, 
          startdatedisplay, 
          enddatedisplay, 
          class, 
          organizer, 
          subcategorymainorder, 
          subcategorysuborder, 
          generalcategorycd, 
          generalsubcategorycd 
ORDER  BY generalsubcategorycd, 
          coursename 
```

它加载速度更快，并返回正确数量的记录作为原始查询（1802）。但是，当我在 internalstaff 表中添加 BranchCd（和 branchcd = 'some branch code'）时，它将返回更少的记录数（519）。

但是在原始查询中，如果（和 branchcd = 'some branch code'）被添加到子选择中，它会返回正确数量的记录。

任何人都可以就如何重写加入提出建议，使其像子选择一样工作？

谢谢你。

编辑：抱歉忘了包括表格：

```
tblinternalstudent (**staffnoic**, eventid)
tblstaff (**staffnoic** titlegredcd, branchcd, unitcd)
tblevent (**id**, courseid, startdate, enddate, class, organizer)
tblcourse (**courseid**, coursename)
tblrefgeneralcategory (**generalcategorycd**, generalcategorynm)
tblrefgeneralsubcategory (**generalsubcategorycd, generalsubcategorynm, generalcategorycd,subcategorymainorder, subcategorysuborder) 
```

原始查询的解释：

```
*************************** 1\. row ***************************
       id: 1
       select_type: PRIMARY
       table: a
       type: ALL
       possible_keys: NULL
       key: NULL
       key_len: NULL
       ref: NULL
       rows: 38760
       Extra: Using temporary; Using filesort
*************************** 2\. row ***************************
       id: 1
       select_type: PRIMARY
       table: b
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 44
       ref: edu_db.a.StaffNoIC
       rows: 1
       Extra: Using where
*************************** 3\. row ***************************
       id: 1
       select_type: PRIMARY
       table: tblEvent
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 32
       ref: edu_db.a.EventId
       rows: 1
       Extra: Using where
*************************** 4\. row ***************************
       id: 1
       select_type: PRIMARY
       table: tblcourse
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 30
       ref: edu_db.tblEvent.courseid
       rows: 1
       Extra: Using where
*************************** 5\. row ***************************
       id: 1
       select_type: PRIMARY
       table: tblRefGeneralSubCategory
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 34
       ref: edu_db.tblcourse.GeneralSubCategoryCd,edu_db.tblcourse.GeneralCategoryCd
       rows: 1
       Extra:
*************************** 6\. row ***************************
       id: 1
       select_type: PRIMARY
       table: tblRefGeneralCategory
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 17
       ref: edu_db.tblcourse.GeneralCategoryCd
       rows: 1
       Extra:
*************************** 7\. row ***************************
       id: 2
       select_type: DEPENDENT SUBQUERY
       table: tblinternalstudent
       type: ALL
       possible_keys: NULL
       key: NULL
       key_len: NULL
       ref: NULL
       rows: 38760
       Extra: Using where
*************************** 8\. row ***************************
       id: 2
       select_type: DEPENDENT SUBQUERY
       table: tblStaff
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 44
       ref: edu_db.tblinternalstudent.StaffNoIC
       rows: 1
       Extra: Using where; Using index 
```

第二个查询的解释：

```
*************************** 1\. row ***************************
       id: 1
       select_type: PRIMARY
       table: <derived2>
       type: ALL
       possible_keys: NULL
       key: NULL
       key_len: NULL
       ref: NULL
       rows: 8849
      Extra: Using temporary; Using filesort
*************************** 2\. row ***************************
       id: 1
       select_type: PRIMARY
       table: e
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 32
       ref: internalstaff.eventid
       rows: 1
      Extra: Using where
*************************** 3\. row ***************************
       id: 1
       select_type: PRIMARY
       table: c
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 30
       ref: edu_db.e.courseid
       rows: 1
       Extra: Using where
*************************** 4\. row ***************************
       id: 1
       select_type: PRIMARY
       table: gs
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 34
       ref: edu_db.c.GeneralSubCategoryCd,edu_db.c.GeneralCategor
       rows: 1
       Extra:
*************************** 5\. row ***************************
       id: 1
       select_type: PRIMARY
       table: g
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 17
       ref: edu_db.gs.GeneralCategoryCd
       rows: 1
       Extra: Using where
*************************** 6\. row ***************************
       id: 2
       select_type: DERIVED
       table: i
       type: ALL
       possible_keys: NULL
       key: NULL
       key_len: NULL
       ref: NULL
       rows: 38760
       Extra: Using filesort
*************************** 7\. row ***************************
       id: 2
       select_type: DERIVED
       table: s
       type: eq_ref
       possible_keys: PRIMARY
       key: PRIMARY
       key_len: 44
       ref: edu_db.i.StaffNoIC
       rows: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:30:05.803

尝试此查询也可能存在一些关系问题，因为您没有在这里明确告知。

```
SELECT
  te.id,
  Date_format(startdate, '%d %b') AS startdateDisplay,
  Date_format(enddate, '%d %b') AS enddateDisplay,
  te.class,
  te.organizer,
  tgs.generalcategorycd,
  tgs.generalsubcategorycd,
  tgs.generalsubcategorynm,
  tgs.subcategorymainorder,
  tgs.subcategorysuborder,
  trc.generalcategorynm,
  count(tic.*)             AS `Total`,
  GROUP_CONCAT(DISTINCT tic. titlegredcd) AS TargetGroup
FROM tblevent AS te
  LEFT JOIN tblinternalstudent AS tis
    ON tis.eventid = te.id
  LEFT JOIN tblstaff AS ts
    ON ts.staffnoic = tis.staffnoic
  LEFT JOIN tblcourse AS tc
    ON tc.courseid = te.courseid
  LEFT JOIN tblrefgeneralsubcategory AS tgs
    ON tgs.generalcategorycd = tc.generalcategorycd
  LEFT JOIN tblrefgeneralcategory AS trc
    ON trc.generalcategorycd = tgs.generalcategorycd
WHERE te.startdate >= '2012-01-01'
    AND te.enddate <= '2012-12-31'
    AND trc.generalcategorycd IN('G0001', 'G0002', 'G0003')
GROUP BY te.id, tgs.generalsubcategorynm, trc.generalcategorynm, te.startdatedisplay, te.enddatedisplay te.class, te.organizer, tgs.subcategorymainorder, tgs.subcategorysuborder, trc.generalcategorycd, tgs.generalsubcategorycd
ORDER BY tgs.generalsubcategorycd, tc.coursename 
```

# parsing - 左分解和左递归之间的区别

> ID：15194142
> 
> 赞同：42
> 
> 时间：2013-03-04T03:33:35.077
> 
> 标签：parsing, language-agnostic, compiler-construction, topdown

`Left Factoring`和 和有什么不一样`Left Recursion`？我知道这`Left factoring`是一种自上而下的预测解析技术。但是当我听到这两个术语时，我会感到困惑。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-09-09T17:32:17.233

左因子分解是删除出现在相同非终结符的两个产生式中的常见左因子。这样做是为了避免解析器进行回溯。假设解析器具有前瞻功能，请考虑以下示例：

```
A -> qB | qC 
```

其中`A`，`B`和`C`是非终结符，并且`q`是一个句子。

在这种情况下，解析器将困惑于选择两个产生式中的哪一个，并且可能不得不回溯。左因式分解后，语法转换为：

```
A -> qD
D -> B | C 
```

在这种情况下，具有前瞻功能的解析器将始终选择正确的产品。

左递归是当非终结符的产生中最左边的非终结符是非终结符本身（直接左递归）或通过其他一些非终结符定义，再次重写为非终结符（间接左递归）。

考虑这些例子：

```
(1) A -> Aq (direct)

(2) A -> Bq
    B -> Ar (indirect) 
```

如果解析器执行自顶向下解析，则必须删除左递归。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-06-20T20:39:20.870

**左因子分解**是一种语法转换技术。它包括“分解”两个或多个产品共有的前缀。

例如，从：

> A → α β | α γ

至：

> A → α A'
> 
> A' → β | γ

* * *

**左递归**是语法具有的一种属性，只要您可以从给定变量（非终结符）派生出以相同变量开头的 rhs，在一个或多个步骤中。

例如：

> A → A α

或者

> A → B α
> 
> B → A γ

有一种称为*消除左递归*的语法转换技术，它提供了一种方法，可以在给定左递归语法的情况下生成另一种等效且非左递归的语法。

* * *

两个术语之间的关系/混淆可能源于这样一个事实，即两种转换技术可能需要应用于语法，然后才能为其推导自上而下的预测解析器。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-04T06:44:31.227

这是我看到使用的两个术语的方式：

1.  左递归：当一个或多个产品可以从它们自身到达且中间没有代币消耗时。
2.  左因式分解：一个转换过程，将语法从左递归形式转变为等价的非左递归形式。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-26T07:23:17.910

左因素：

让给定的语法：A-->ab1 | ab2 | ab3

1）我们可以看到，对于每一个产生式，都有一个共同的前缀&如果我们在这里选择任何一个产生式，并不能确定我们不需要回溯。
2) 它是非确定性的，因为我们不能选择任何产生式，并且可以确保我们将通过制作正确的解析树来达到我们想要的字符串。但是如果我们以一种确定性的方式重写语法，并且让我们足够灵活，可以将其转换为任何可能无需回溯的字符串，它将是：

A --> aA', A' --> b1 | b2| b3

现在，如果我们被要求为字符串 ab2 制作解析树，现在我们不需要回溯。因为当我们得到 A' 时我们总是可以选择正确的产生式，因此我们将生成正确的解析树。

左递归：

一个--> Aa | b 这里很明显，如果我们选择第一个产生式，A 的左孩子将永远是 A，这是左递归。因为，A 一遍又一遍地调用自己。从这个语法生成的字符串是：ba* 因为这不能在语法中......我们通过编写来消除左递归：

A --> bA' A' --> E | aA' 现在我们将没有左递归，而且我们可以生成 ba* 。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-22T21:37:00.160

**左递归：** 一个文法是左递归的，如果它有一个非终结符 A 使得有一个推导**A -> Aα | β**其中 α 和 β 是不以 A 开头的终端和非终端序列。

在设计自顶向下解析器时，如果语法中存在左递归，则解析器陷入无限循环，这是因为 A 试图匹配 A 本身，这是不可能的。我们可以通过重写有问题的产生式来消除上述左递归。作为-

**A -> βA'**

**A' -> αA' | ε**

**左**因子分解：需要左因子分解来消除语法的不确定性。假设一个语法，**S -> abS | 锑**

在这里，S 在产生式规则中推导出相同的终端 a（S 的两个替代选择），它遵循非确定性。我们可以重写产生式以将 S 的决定推迟为-

**S -> aS'**

**S' -> bS | 锑**

因此，S' 可以替换为 bS 或 Sb

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-23T09:52:03.440

这是区分这两个术语的简单方法：

*   左递归：当产品的最左边元素是生产元素本身（非终端元素）时。

例如**A -> Aα / Aβ**

*   左因子分解：当一个产生式的最左边的元素（终端元素）在同一个产生式中重复时。

例如**A -> αB / αC**

**此外，** 如果语法是左递归的，它可能会导致无限循环，因此我们需要*消除左递归*。

如果语法是左因子，它会使解析器感到困惑，因此我们也需要*删除左因子*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T18:09:26.417

左递归：= 当左手非终端与右手非终端相同时。示例：A->A&|B 其中 & 是 alpha。我们可以像这样重写这个产生式来删除左递归。

A->BA' A'->&A'|€</p>

左因子意味着产品不应该是不确定的。. 示例：A->&A|&B|&C

# php - wordpress插件编辑php

> ID：15194151
> 
> 赞同：0
> 
> 时间：2013-03-04T03:34:36.430
> 
> 标签：php, wordpress, plugins

我对插件的编辑很差，我对它的经验很少，但是我根据反复试验做了一些调整。

我有一个 foo 每个循环，我想`div`用一个类把整个东西包起来`projects`

```
 foreach ($this->catlist->get_categories_posts() as $single) :
        $this->lcp_output .= $this->lcp_build_post($single);
        $this->lcp_output .= $this->get_category_link('div class="column-2"');
        $this->lcp_output .= $this->get_date($single);
        $this->lcp_output .= $this->get_thumbnail($single);
    endforeach; 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:10:47.380

```
$this->lcp_output .= '<div class="projects">';

foreach ($this->catlist->get_categories_posts() as $single) :
    $this->lcp_output .= $this->lcp_build_post($single);
    $this->lcp_output .= $this->get_category_link('div class="column-2"');
    $this->lcp_output .= $this->get_date($single);
    $this->lcp_output .= $this->get_thumbnail($single);
endforeach;

$this->lcp_output .= '</div>'; 
```

# asp.net-mvc - 路由问题：找到与请求匹配的多个操作

> ID：15194152
> 
> 赞同：1
> 
> 时间：2013-03-04T03:34:42.063
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, routes

我的路线：

```
 routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: null,
                constraints: new { id = @"^\d+$" }
            );

            routes.MapHttpRoute(
                name: "ApiControllerActionRoute",
                routeTemplate: "api/{controller}/{action}/{id}",
                defaults: new { id = RouteParameter.Optional }
                ); 
```

我的方法：

```
// GET api/Set/All
        [ActionName("All")]
        public IEnumerable<Set> GetSets()
        {
            var sets = _repository.GetAllSets();
            return sets;
        }

        // GET api/Set/TopLevelSets
        [ActionName("TopLevelSets")]
        public IEnumerable<Set> GetTopLevelSets()
        {
            var sets = _repository.GetTopLevelSets();
            return sets.ToList();
        }

        // GET api/Set/Breadcrumbs/1
        [ActionName("Breadcrumbs")]
        public IEnumerable<Set> GetBreadCrumbs(int id)
        {
            var sets = _repository.GetBreadcrumbs(id);
            return sets.ToList();
        }

        // GET api/Set/5
        public Set GetSet(int id)
        {
            Set set = _repository.GetSet(id);
            if (set == null)
            {
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
            }

            return set;
        }

        // PUT api/Set/5
        public HttpResponseMessage PutSet(Set set)
        {
            if (!ModelState.IsValid)
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }

            _repository.UpdateSet(set);

            return Request.CreateResponse(HttpStatusCode.OK);
        }

        // POST api/Set
        public HttpResponseMessage PostSet(Set set)
        {
            if (ModelState.IsValid)
            {
                _repository.AddSet(set);
                HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, set);
                return response;
            }
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }

        // DELETE api/Set/5
        public HttpResponseMessage DeleteSet(int id)
        {         
            _repository.DeleteSet(id);
            return Request.CreateResponse(HttpStatusCode.OK, id);
        } 
```

此时我正在尝试使用 localhost/api/set/1 - getSet 方法。一切似乎都与路线一致，但由于某种原因它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:45:43.790

您的默认路由未设置默认操作，因此当您使用“获取”操作时，路由引擎无法决定您是否需要 GetTopLevelSets 或 GetSet。添加默认值将解决此问题：

```
 routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { action = "GetSet" },
                constraints: new { id = @"^\d+$" }
            ); 
```

将它默认为您`GetSet`的控制器中的操作，使用：`api/set (controller)/1 (id)`路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:39:12.543

您是否缺少查询的 api 部分？本地主机/ **api** /set/1

# html - 右对齐 div 与左对齐 div 内联？

> ID：15194153
> 
> 赞同：0
> 
> 时间：2013-03-04T03:34:58.813
> 
> 标签：html, css, layout

当我尝试右对齐 div 内的文本链接时遇到困难。我不确定我做错了什么。但这是应该右对齐的 div 代码：

```
 <div class="menu">
     <a href="http://google.com" class="button">Home</a>
     <a href="http://google.com" class="button">Sign In</a>
     <a href="http://google.com" class="button">Join The Crowd!</a>
 </div> 
```

所有代码都在这里：http: [//jsfiddle.net/GSfmf/1](http://jsfiddle.net/GSfmf/1)

我希望按钮仍然垂直居中在 header_div 中，但向右对齐。我所做的任何事情都不会动它。

谢谢，抱歉对css很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:21:19.553

从标题 div 中取出显示表。您将其显示为表格是否有原因？

[取出显示标题时工作正常](http://jsfiddle.net/GSfmf/3/ "现在工作")

```
div.header_div{
    background-color: #ffffff;
    padding: 15px 50px 15px 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:45:09.493

在 css 样式表中只需添加以下代码...认为它可以工作 .menu{ float:right;}

# python - 从文本文件中读取等级数

> ID：15194154
> 
> 赞同：0
> 
> 时间：2013-03-04T03:35:01.063
> 
> 标签：python, file

我正在尝试编写一个程序，该程序从 .txt 文件中获取成绩列表，计算该成绩的出现次数，并告诉有多少学生获得了该成绩。

列表的格式是每行一个等级，因此 6`A`的将返回 6 个学生得到`A`。

我设法让代码工作，但它运行了很多检查，我觉得有办法减少它，但我不确定如何。

我认为这可能与列表或字典有关。

```
def distribution(filename):
    'string ==> int & string, prints out how many students got a letter grade'
    infile = open(filename,'r')
    grades = infile.read()
    aCount = grades.count('A\n')
    aMinusCount = grades.count('A-\n')
    bCount = grades.count('B\n')
    bMinusCount = grades.count('B-\n')
    cCount = grades.count('C\n')
    cMinusCount = grades.count('C-\n')
    dCount = grades.count('D\n')
    dMinusCount = grades.count('D-\n')
    fCount = grades.count('F')
    print(aCount, 'students got A')
    print(aMinusCount, 'students got A-')
    print(bCount, 'students got B')
    print(bMinusCount, 'students got B-')
    print(cCount, 'students got C')
    print(cMinusCount, 'students got C-')
    if dCount == 0:
        pass
    else:
        print(dCount, 'students got D')
    if dMinusCount == 0:
        pass
    else:
        print(dMinusCount, 'students got D-')
    print(fCount, 'students got F') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:36:48.777

这可以很容易地用一个`collections.Counter`对象来完成：

```
import collections
infile = open(filename,'r')
grades = [g.strip() for g in infile.readlines()]
grade_counter = collections.Counter(grades)
for g, n in sorted(grade_counter.items()):
    print n, "students got", g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:45:21.830

使用[字典理解](http://docs.python.org/2/tutorial/datastructures.html?highlight=dictionary%20comprehension#dictionaries)：

```
def distribution(filename):
    'string ==> int & string, prints out how many students got a letter grade'
    infile = open(filename,'r')
    grades = infile.read().split('\n')
    # this creates a list of the grades, without the new-line character
    infile.close()
    possible_grades = ('A', 'A-', 'B', 'B-', 'C', 'C-', 'D', 'D-', 'F')
    gradesDict = {i:grades.count(i) for i in possible_grades}
    for x in gradesDict.keys():
        print(x + ':', gradesDict[x]) 
```

# php - 如何使用 PHP 从图像目录生成缩略图？

> ID：15194157
> 
> 赞同：1
> 
> 时间：2013-03-04T03:35:14.630
> 
> 标签：php, html

我有完整的高质量图像，并且直接在我的网站上。使用 PHP 我想从这个目录生成缩略图到另一个名为“thumbs”的目录。

我设法找到了一个代码来制作特定图像的缩略图，但是当我尝试为整个文件夹执行此操作时，它不起作用。

[然后我从这里](http://davidwalsh.name/generate-photo-gallery "这里")找到了另一个代码，这似乎是我正在寻找的（只有第一部分）。不幸的是，我不知道在哪里将源和目标插入到代码中。

```
 /* function:  generates thumbnail */
function make_thumb($src,$dest,$desired_width) {
  /* read the source image */
  $source_image = imagecreatefromjpeg($src);
  $width = imagesx($source_image);
  $height = imagesy($source_image);
  /* find the "desired height" of this thumbnail, relative to the desired width  */
  $desired_height = floor($height*($desired_width/$width));
  /* create a new, "virtual" image */
  $virtual_image = imagecreatetruecolor($desired_width,$desired_height);
  /* copy source image at a resized size */
  imagecopyresized($virtual_image,$source_image,0,0,0,0,$desired_width,$desired_height,$width,$height);
  /* create the physical thumbnail image to its destination */
  imagejpeg($virtual_image,$dest);
}

/* function:  returns files from dir */
function get_files($images_dir,$exts = array('jpg')) {
  $files = array();
  if($handle = opendir($images_dir)) {
    while(false !== ($file = readdir($handle))) {
      $extension = strtolower(get_file_extension($file));
      if($extension && in_array($extension,$exts)) {
        $files[] = $file;
      }
    }
    closedir($handle);
  }
  return $files;
}

/* function:  returns a file's extension */
function get_file_extension($file_name) {
  return substr(strrchr($file_name,'.'),1);
} 
```

请问我在哪里输入文件夹的来源和目的地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:54:04.787

输入目录将`$images_dir`位于`get_files`.

您需要遍历此方法的结果并调用`make_thumb`where`$dest`将是该特定文件的最终名称。

像这样的东西（还没有测试过）：

```
//Set up variables we need
$image_directory = "/some/directory/with/images/";
$thumbs_directory = "/some/directory/for/thumbs/";
$desired_width = 100;

//Get the name of files in $image_directory
foreach(get_files($image_directory) as $image){
    //Call make thumb with the given image location and put it into the thumbs directory.
    make_thumb($image_directory . $image, $thumbs_directory . $image, $desired_width)
} 
```

# r - ggplot：两组均值的线图

> ID：15194158
> 
> 赞同：2
> 
> 时间：2013-03-04T03:35:26.677
> 
> 标签：r, ggplot2, mean, line-plot

我已经在堆栈中搜索并搜索了我的问题的答案；[这](https://stackoverflow.com/questions/13406654/ggplot2-how-to-plot-mean-lines-for-x-y-colour-group-facets-drug-cannot-ma)解决了我的问题，但我未能成功修改代码以修复我的图表。

我有数据，以长格式重新整形，如下所示：

```
ID          Var1      GenePosition   ContinuousOutcomeVar
1           control      X20068492 0.092813611
2           control      X20068492 0.001746708
3           case         X20068492 0.069251157
4           case         X20068492 0.003639304 
```

每个位置`ID`都有一个值`ContinuousOutcomeVar`，有 86 个位置和 10 个 ID。我想绘制一个折线图，其中 x 轴上的位置和 y 轴上的连续结果变量。我想要两组：病例组和对照组，所以每个位置应该有两个点：一个是病例的平均值，一个是对照的平均值。然后我想要一条连接机箱的线和一条连接控件的线。我知道这很容易，但我是 R 新手——我已经工作了 8 个小时，但我不能完全正确。以下是我所拥有的；我真的很感激一些见解。如果这存在于堆栈中的某个地方，我真的很抱歉......老实说，我仔细查看并尝试修改很多代码，但仍然没有正确。

我的代码：此代码在每个位置绘制所有 ID 的所有值，并将它们连接到两组。它在每个位置的所有 10 个值的平均值处给了我一个黑点（我认为）：

```
lineplot <- ggplot(data=seq.long, aes(x=Position, y=PMethyl, 
    group=CACO, colour=CACO)) +
    stat_summary (fun.y=mean, geom="point", aes(group=1), color="black") +      
    geom_line() + geom_point() 
```

我不能让 R 不绘制所有 10 个点；每个位置只有两个平均值（每个病例/对照组一个），病例和控制值分别通过 x 轴上的一条线连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:53:02.777

首先，调整您的原始样本数据以包含多个唯一的`GenePosition`.

```
dput(seq.long)
structure(list(ID = 1:8, Var1 = structure(c(2L, 2L, 1L, 1L, 2L, 
2L, 1L, 1L), .Label = c("case", "control"), class = "factor"), 
    GenePosition = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L
    ), .Label = c("X20068492", "X20068493"), class = "factor"), 
    ContinuousOutcomeVar = c(0.092813611, 0.001746708, 0.069251157, 
    0.003639304, 0.112813611, 0.002746708, 0.089251157, 0.004639304
    )), .Names = c("ID", "Var1", "GenePosition", "ContinuousOutcomeVar"
), class = "data.frame", row.names = c(NA, -8L)) 
```

如果您只想为每个组合表示一个值，`GenePosition`那么`Var1`在绘图之前计算平均值会更容易。这可以通过`ddply()`library中的函数来实现`plyr`。

```
library(plyr)    
seq.long.sum<-ddply(seq.long,.(Var1,GenePosition),
       summarize, value = mean(ContinuousOutcomeVar))
seq.long.sum
     Var1 GenePosition      value
1    case    X20068492 0.03644523
2    case    X20068493 0.04694523
3 control    X20068492 0.04728016
4 control    X20068493 0.05778016 
```

现在有了这个新的数据框，你只需要给出`x`和`y`值。`Var1`应该使用`colour=`并`group=`确保每个组有不同的颜色并且线是连接的。

```
ggplot(seq.long.sum,aes(x=GenePosition,y=value,colour=Var1,group=Var1))+
   geom_point()+geom_line() 
```

![在此处输入图像描述](../Images/40988146b38286641424dc5d532eeeaa.png)

# java - android中的java.text.parseexception无法解析的日期

> ID：15194160
> 
> 赞同：0
> 
> 时间：2013-03-04T03:35:50.030
> 
> 标签：java, android

```
String dt=mDateButton.getText().toString();
String tm =mTimeButton.getText().toString();
  try { 
    String format ="dd-MM-yyyy hh:mm a";

    DateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy", Locale.ENGLISH);

    String v_date_str = dt + " " + tm;
    //  String setDate =sdf.format(dt + " " + tm);
    Date v_date = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy", Locale.ENGLISH).parse(v_date_str );

    DateFormat formatter = null;
    formatter = new SimpleDateFormat("dd-MMM-yyyy");

    Log.d("sset: ", ""+formatter.format(v_date));
  } catch (ParseException e) {
    e.printStackTrace();
  } 
```

注意：其中 dt = 2013-03-02 和 tm = 21:54 。但我在第 9 行遇到错误。我不知道是什么原因。请帮助我摆脱这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:39:59.597

问题是您的`DateFormat`模式不匹配。

由于`v_date_str`is `2013-03-02 21:54`，您可以使用以下方式匹配其格式：

```
new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.ENGLISH) 
```

# ios - 任何超过 255 秒的任务都会导致 GCD 崩溃

> ID：15194163
> 
> 赞同：1
> 
> 时间：2013-03-04T03:36:13.773
> 
> 标签：ios, objective-c, grand-central-dispatch, nsoperationqueue

以下代码在 iOS 模拟器中产生崩溃。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dispatch_async(dispatch_get_main_queue(), ^{
        NSDate *sleepStart = [NSDate date];
        while ([sleepStart timeIntervalSinceNow] > -300) {

        }
    });    
} 
```

**更新：即使在后台线程上也会出现此问题**。

下面的代码也有问题：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSDate *sleepStart = [NSDate date];
        while ([sleepStart timeIntervalSinceNow] > -300) {

        }
    });    
} 
```

就这样。将其粘贴到任何视图控制器中，在模拟器中运行该应用程序正好 4 分 15 秒，它就会崩溃。

崩溃是我以前从未见过的类型。它是“EXC_??? (11)”。奇怪的是，您可以在崩溃后按下继续按钮，它会像往常一样继续。

为什么会崩溃？如何在不导致此行为的情况下将长任务提交到队列？

以下是我迄今为止尝试过的一些事情，但对这个谜团没有任何启示：

*   创建我**自己的调度队列**（包括后台线程）
*   使用 NSBlockOperation 而不是 GCD（仍然崩溃）
*   插入睡眠。短暂的睡眠（不到 5 秒左右）似乎在睡眠时延迟了崩溃。更长的睡眠似乎有更多的作用。所以如果你睡一次五秒钟，它会在 4m 20s 而不是 4m 15s 时崩溃。如果你睡一次 60 秒，大约需要十分钟的时间来崩溃，但它最终会发生。这个线索似乎很重要，但我不知道它可能意味着什么。

**更新#1**

该问题仅在 LLDB 下重现，而不在 GDB 下重现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:44:35.773

您不能在主线程上执行冗长的操作。您应该将块分派到另一个线程，然后在块分派结束时返回主线程（如果需要）。

使用`dispatch_async(dispatch_get_main_queue(),^{});`会导致您的操作在不久的将来在主线程上执行（阻塞）。

主线程受定时器保护；如果你停止响应事件，iOS 会杀死它。这是故意的：不要在主线程上做繁重的工作！

iOS 的容忍度通常*远少于*四分钟，但如果你在调试，它会变得更长。模拟器有自己的规则。

启动时，只需几秒钟。但是你不应该在主线程上做任何事情超过一瞬间，然后才能响应直接的用户操作（例如用户点击某物）。在主线程上工作会导致 iOS 用户界面变得反应迟钝、生涩而不是玻璃般光滑。

如果您的应用程序停止响应 OSX 上的主线程上的事件，它就会成为沙滩球。您的应用程序停止响应 iOS 上主线程上的事件，iOS 看门狗将其取出并射击。

来自[技术说明 TN2151](https://developer.apple.com/library/ios/#technotes/tn2151/_index.html)：

> 异常代码 0x8badf00d 表示应用程序已被 iOS 终止，因为发生了看门狗超时。应用程序启动、终止或响应系统事件的时间过长。造成这种情况的一个常见原因是在主线程上进行同步网络。线程 0 上的任何操作：都需要移至后台线程，或以不同方式处理，以免阻塞主线程。

一般来说，模式是：

```
- (IBAction)tappedWhatever:(id)sender {
    // visually start operation
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
        // do work here, off main thread
        // (you can't update the UI here)
        dispatch_async(dispatch_get_main_queue(),^{
            // show progress in UI
        });
        // more heavy lifting
        dispatch_async(dispatch_get_main_queue(),^{
            // update UI to show operation complete and move to next step
        });
    });
}; 
```

（我本可以发誓在 Apple 的文档中对此有更好的描述，但我现在找不到。有人吗？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T03:50:37.497

来自[Apple 工程师](https://devforums.apple.com/message/790874#790874)：

> 您看到的“崩溃”并不是真正的崩溃，它是应用程序在持续一段时间内使用过多 CPU 时间时的日志。它存在的理由是告诉你不要那样做，以及 CPU 时间用在了哪里。在生产中，日志只是简单地记录下来，您的过程应该继续。但如果你能避免这些类型的日志，那就更好了。

然后：

> 您应该提交错误报告。lldb 应该足够聪明，可以默认忽略该陷阱。

# mysql - 挣扎于 MySQL 查询

> ID：15194173
> 
> 赞同：0
> 
> 时间：2013-03-04T03:36:53.090
> 
> 标签：mysql, foreign-keys

我有以下模型：

![在此处输入图像描述](../Images/6bae37f487a6627953d228e987efde4f.png)

我已经有一段时间了，但仍然不知道如何正确解决它。已经考虑加入两个别名子查询，加入两个视图，并尝试了一个庞大而丑陋的一体式查询，但都没有奏效。

我的问题很简单：

如何选择 deivce_names.name 并将它们与型号和制造商匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:41:18.847

```
SELECT
    name, manufacturer, model
FROM
    device_names
    JOIN devices ON (device_names.id = name_id)
    JOIN devices_generic ON (generic_device_id = devices_generic.id)
    JOIN device_manufacturers ON (manufacturer_id = device_manufacturers.id)
    JOIN device_models ON (model_id = device_models.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:43:42.150

```
select
    device_names.name as device_name,
    device_manufacturers.name as device_manufacturer_name,
    device_models.name as device_model_name
from deivce_names
join device on device.name_id = deivce_names.id
join devices_generic on devices_generic.id = devices.generic_device_id
join device_manufacturers on devices_generic.manufacturer_id = device_manufacturers.id
join device_models on device_models.id = devices_generic.model_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:50:53.987

`SELECT dm1.manufacturer, dm2.model from device_manufacturers as dm1 join devices_generic as dg on dg.manufacturer_id = dm1.id join device_models as dm2 on dm2.id = dg.model_id join devices as d2 on d2.generic_device_id = dg.id join device_names as dn on dn.id = d2.name_id where name = 'foo'`

将来，您可能只想简单地将数据放入[小提琴](http://sqlfiddle.com)中并在那里使用它。

# css - 在 Joomla 中设置背景图像

> ID：15194179
> 
> 赞同：0
> 
> 时间：2013-03-04T03:37:57.670
> 
> 标签：css, image, templates, joomla, background

我试图在标题位置的joomla模板中设置背景图像，我修改了文件template.css并显示了背景图像但不正确，我只能看到新背景左侧和右侧的a部分图像和其余部分被隐藏（白色背景覆盖它），我不知道我做错了什么：

这是模板 URL 链接：http: [//vitadorotest.hhc-netzwerk.de/](http://vitadorotest.hhc-netzwerk.de/)

这是我的 CSS 编码部分：

```
body.font-size-is-default {
    font-size: 13px;
    line-height:19px;
    color:#8f8f8f;
    font-family:Arial, Helvetica, sans-serif;
    background:url(../images/background.jpg) 50% 0 no-repeat #fff !important;
    height: 95px;
    margin: 0 auto;
    width: 1087px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:49:56.350

这是真正的问题， `white_tail.gif`是一个用while背景覆盖定义的id的while图像。

```
#rt-top, 
#rt-header, 
#rt-menu, 
#rt-showcase, 
#rt-feature, 
#rt-utility, 
#rt-breadcrumbs,   
#rt-maintop, 
#rt-main, 
#rt-mainbottom{
   background:url(../images/white_tail.gif) 50% 0 repeat-y;
} 
```

就像评论一样

`/*background:url(../images/white_tail.gif) 50% 0 repeat-y;*/`
看看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T13:16:38.990

[我在http://colorta.com](http://colorta.com)及其工作的文章主页上使用添加的标签添加了一些背景。

```
<div style="background-image: url(images/banners/myimage.jpg); "> 
```

# javascript - 为什么这个javascript值在它声明的范围内为空，但不在更窄的范围内

> ID：15194180
> 
> 赞同：0
> 
> 时间：2013-03-04T03:38:07.333
> 
> 标签：javascript, scope

假设我有以下代码使用`canvasResize`插件调整图像大小，然后返回处理后的 Blob 数据。

如果我将`alert`变量`f`放在现在的位置，`f`则不会为空。但是，如果我尝试`f`在函数末尾返回变量之前立即检查变量，那么它将为空。

```
function resizeFile(file){
    var f=null;
    $.canvasResize(file,
        {
            width: 400,
            height: 0,
            crop: false,
            quality: 100,
            callback: function (data)
                {
                    // Add file data
                    f = $.canvasResize('dataURLtoBlob', data)
                    if(f!=null){
                                alert(f)
                            }
                            else{
                                alert("file blob is null")
                            }
                    $('body').css("background", "url("+data+")")
                }
        });

        return f;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:44:54.787

在您的代码中，变量在调整大小完成后执行`f`的函数中初始化。`callback`

所以，`return f`首先被调用，然后是`callback`函数，所以它将是`null`.

# java - 使用 google-api-java-oauth 的 oauth1 示例

> ID：15194182
> 
> 赞同：9
> 
> 时间：2013-03-04T03:38:17.943
> 
> 标签：java, api, oauth

我一直在寻找使用 google oauth java 包进行身份验证的示例： [https ://code.google.com/p/google-oauth-java-client/](https://code.google.com/p/google-oauth-java-client/)

我已经设法使用这个包找到了 oauth2 身份验证的示例，但我找不到 oauth1 的任何示例。该文档提供了“典型应用程序流程”的简要概述，但它忽略了所有细节。

有人对我在哪里可以找到使用 thing 包的 oauth1 身份验证示例有任何建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-16T20:23:51.820

基于来自[Google 的 OAuth 1.0 指南](https://developers.google.com/api-client-library/java/google-oauth-java-client/oauth1)和[RFC 5849的](https://www.rfc-editor.org/rfc/rfc5849)[google-oauth-java-client JavaDoc](https://developers.google.com/api-client-library/java/google-oauth-java-client/reference/1.20.0/com/google/api/client/auth/oauth/package-summary) ，示例应如下所示：

```
 OAuthHmacSigner signer = new OAuthHmacSigner();
    // Get Temporary Token
    OAuthGetTemporaryToken getTemporaryToken = new OAuthGetTemporaryToken(TOKEN_SERVER_URL);
    signer.clientSharedSecret = OAuth2ClientCredentials.CONSUMER_SECRET;
    getTemporaryToken.signer = signer;
    getTemporaryToken.consumerKey = OAuth2ClientCredentials.CONSUMER_KEY;
    getTemporaryToken.transport = new NetHttpTransport();
    OAuthCredentialsResponse temporaryTokenResponse = getTemporaryToken.execute();

    // Build Authenticate URL
    OAuthAuthorizeTemporaryTokenUrl accessTempToken = new OAuthAuthorizeTemporaryTokenUrl(AUTHENTICATE_URL);
    accessTempToken.temporaryToken = temporaryTokenResponse.token;
    String authUrl = accessTempToken.build();

    // Redirect to Authenticate URL in order to get Verifier Code
    System.out.println(authUrl);

    // Get Access Token using Temporary token and Verifier Code
    OAuthGetAccessToken getAccessToken = new OAuthGetAccessToken(ACCESS_TOKEN_URL);
    getAccessToken.signer = signer;
    getAccessToken.temporaryToken=temporaryTokenResponse.token;
    getAccessToken.transport = new NetHttpTransport();
    getAccessToken.verifier= "VERIFIER_CODE";
    getAccessToken.consumerKey = OAuth2ClientCredentials.CONSUMER_KEY;
    OAuthCredentialsResponse accessTokenResponse = getAccessToken.execute();

    // Build OAuthParameters in order to use them while accessing the resource
    OAuthParameters oauthParameters = new OAuthParameters();
    signer.tokenSharedSecret = accessTokenResponse.tokenSecret;
    oauthParameters.signer = signer;
    oauthParameters.consumerKey = OAuth2ClientCredentials.CONSUMER_KEY;
    oauthParameters.token = accessTokenResponse.token;
    oauthParameters.verifier = "VERIFIER_CODE";

    // Use OAuthParameters to access the desired Resource URL
    HttpRequestFactory requestFactory = new NetHttpTransport().createRequestFactory(oauthParameters);
    GenericUrl genericUrl = new GenericUrl("RESOURCE_URL");
    HttpResponse response = requestFactory.buildGetRequest(genericUrl).execute();
    System.out.println(response.parseAsString()); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-06T12:57:33.760

上面的例子非常有用。

关于将此库与非标准 oAuth 1.0 实现一起使用的说明。我使用的是[Goodreads oAuth API](https://www.goodreads.com/api/documentation)，它似乎是[oAuth 圣经](http://oauthbible.com/#oauth-10a-three-legged)所说的“失败的 OAuth 1.0a 3-Legged 实现”，这意味着它在将授权用户重定向回您的回调后不会发回验证码网址。在这种情况下，您需要删除上面提到 VERIFIER_CODE 的所有行并添加：

```
signer.tokenSharedSecret = temporaryTokenResponse.tokenSecret; 
```

行前：

```
OAuthCredentialsResponse accessTokenResponse = getAccessToken.execute(); 
```

我花了一段时间才弄清楚，所以希望能帮助别人。

# android - Android Youtube API 错误 YouTubePlayerView

> ID：15194184
> 
> 赞同：15
> 
> 时间：2013-03-04T03:38:43.473
> 
> 标签：android, youtube-api

我正在尝试使用 Youtube API 在 android 应用程序中嵌入 youtube 视频。我导入了 jar，将其添加到我的构建路径中，并将 YouTubePlayerView 添加到我的主视图中。在 onCreate 中，我的密钥有以下代码，其中 xxxx 是：

```
YoutubePlayerView ytpv = (YouTubePlayerView) findViewById(R.id.youtubeplayer);
ytpv.initialize("xxxx", this); 
```

当我运行应用程序时，出现异常：

```
java.lang.SecurityException: Not allowed to bind to service Intent { act=com.google.android.youtube.api.service.START } 
```

当我尝试运行 api 附带的同一个应用程序时，它似乎工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-26T10:01:42.990

我想你忘了添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-03T07:07:30.627

这是因为您没有为您的 Android 应用授予互联网使用权限，因为您使用的是 YouTube 播放器，您需要互联网连接。

为此，您需要在 manifest.xml 中输入一行：

```
uses-permission android:name="android.permission.INTERNET" 
```

在将标签粘贴到清单文件之前不要忘记使用标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:16:34.540

您好，检查您的 Android 清单文件是否已两次声明 Activity（或）检查您的服务元素和正确声明了 android 权限。如果错误未清除，请发布您的 java 和 Manifest 文件。

检查以下**[帖子](https://stackoverflow.com/questions/7602490/java-lang-securityexception-not-allowed-to-start-service-intent)**以供参考

# php - 使用魔法场时如何检查数组是否存在

> ID：15194189
> 
> 赞同：1
> 
> 时间：2013-03-04T03:39:34.440
> 
> 标签：php, arrays, wordpress

我尝试使用以下代码检查数组是否存在，问题是当其中没有图像`getFieldOrder('image_gal')`时会返回此错误。

错误输出

```
Warning: array_reverse() [function.array-reverse]: The argument should be an array in /home/sritamac/public_html/wp-content/plugins/magic-fields/get-custom.php on line 306

Warning: sort() expects parameter 1 to be array, null given in /home/sritamac/public_html/wp-content/plugins/magic-fields/get-custom.php on line 307 
```

数组代码：

```
<?php
//var
$images = getFieldOrder('image_gal');

if (is_array($images)) {

    foreach ($images as $image) {

        if (get('image_gal', 1, $image) == TRUE) { //check if image_gallery_image has image 
?> 

    <div id="wrap">
        <ul id="mycarousel" class="jcarousel-skin-tango">
            <?php
            $images = getFieldOrder('image_gal');
            foreach ($images as $image) { //loop image 
            ?>
            <li>
                <a class="group3"  href="<?php echo get('image_gal', 1, $image);?>">
                    <img src="<?php echo get('image_gal', 1, $image);?>" width="150" height="150" alt="" />
                </a>
            </li>  
            <?php
            }
            ?>  
        </ul>
    </div>
<?php
            break;
        }
    }
}
?> 
```

我使用这个主题[http://www.s5themes.com/theme/webfolio/](http://www.s5themes.com/theme/webfolio/)和 wordpress 版本是 3.2.1。

魔法场插件[http://magicfields.org/](http://magicfields.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:47:06.980

这个问题是因为，`array_reverse()`并且`sort()`您正在传递一个非数组的变量。

解决方案 ：

1.  检查你的参数，在执行这些函数之前，只有当参数是数组时才执行这些函数。你可以使用`is_array` 函数。

    ```
    if(is_array($array)){
        sort($array);
    } 
    ```

2.  检查您的参数，如果它为空或非数组，则使其成为数组。在将其传递给函数之前。

    ```
    if(!is_array($array) || $array = "" || $array = NULL){
        $array = array();
    }
    sort($array); 
    ```

我向您推荐第二种解决方案，因为即使数组为空，它也不会影响其他功能。

# php - 插件在 CodeIgniter 中不起作用

> ID：15194193
> 
> 赞同：3
> 
> 时间：2013-03-04T03:39:48.960
> 
> 标签：php, javascript, jquery, codeigniter, jquery-plugins

我是使用 CodeIgniter 的新手，我想使用一个插件或至少一个有效的 JQuery 代码。我从[这里](http://jsfiddle.net/doktormolle/4c5tt/)复制了这个插件。我使用这些步骤嵌入了 JQuery 插件

*   我复制了插件代码并将其保存为 marquee.js 并将其放在我的 bootstrap/js/ 目录中。
*   在我的页面上调用插件，例如`<script src="<?php echo base_url(); ?>bootstrap/js/marquee.js"></script>`
*   最后在我的页面上调用它

    `$(document).ready( function() {`
    `$('.slide').marquee({delay:3000});`
    `});`

但是插件不工作，出现错误提示`Uncaught TypeError: Object [object Object] has no method 'marquee'`。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-04T03:52:41.653

检查 jquery 是否正确加载

```
<script src="<?php echo base_url(); ?>bootstrap/js/jquery.js"></script> 
```

检查选框是否正确加载

```
<script src="<?php echo base_url(); ?>bootstrap/js/marquee.js"></script> 
```

`.slide`检查 div ( )的类名

```
$(document).ready( function() {
$('.slide').marquee({delay:3000});
}); 
```

# git - git read-tree 后文件丢失

> ID：15194196
> 
> 赞同：4
> 
> 时间：2013-03-04T03:39:55.283
> 
> 标签：git

我在本地 repo (branch `develop`) 中运行了以下命令集，以尝试`assets/App`在我的项目中 git 一个子目录 () 以链接到远程 repo 的`App`目录，这样当他们更新代码时，我可以获取这些更新而无需复制/从克隆粘贴：

```
git remote add durandal git://github.com/BlueSpire/Durandal.git
git fetch durandal    #now I have a remote branch with all of Durandal
git checkout -b durandal durandal/master    #now I have a local branch with the contents of durandal/master and have switched to it
git config core.sparsecheckout true    #trying some sparse-checkout stuff, not really understanding what I'm doing
echo App/ > .git/info/sparse-checkout
git checkout develop     #back in my develop branch
git read-tree --prefix=assets/App/ -u durandal     #all hell breaks loose 
```

此时，我的所有文件都已从分支中删除，`develop`除了`assets/App/`（以及位于 中的那些文件`.gitignore`）现在具有从`durandal branch`App 文件夹复制的内容。我立马跑`git reset --hard`了也没用。我尝试用 sha 重置。没有。我尝试从我的 Dropbox 遥控器中拉出，该遥控器应该已经备份了所有内容。同样的交易。我厌倦了切换到 master 并且所有文件也从那里消失了，我完全不明白。我看不到如何恢复。

我知道我不应该在没有真正了解我在做什么的情况下这样做，但是有人可以帮助我将我的回购恢复到我实验之前的位置吗？其次，我做了什么导致这种情况，我如何才能完成我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:25:28.660

从基础开始（除了模糊地知道它存在之外，我从未看过稀疏结帐）我会尝试

```
rm .git/index
rm .git/info/sparse-checkout
git config core.sparsecheckout false
git checkout develop@{yesterday}      # `man gitrevisions` docs the @{} syntax 
```

但希望真正去过你所在的地方的人可以确定这是否可行。

# javascript - Background.js 不工作 Chrome 扩展

> ID：15194198
> 
> 赞同：10
> 
> 时间：2013-03-04T03:40:11.933
> 
> 标签：javascript, google-chrome, google-chrome-extension

我是 chrome 扩展的新手，似乎无法弄清楚背景概念是如何工作的。我正在构建一个计数器扩展，即使用户关闭扩展（但不是浏览器），它也会继续计数，并且想做一个简单的测试，看看我是否能弄清楚如何使用背景文件。下面是我尝试创建一个功能，该功能在用户每次单击选项卡（在我的扩展程序之外）时激活，并且当他们单击 5 个选项卡时，会触发警报。我无法弄清楚为什么这不起作用。

背景.js：

```
var counter = 0;
chrome.browserAction.onClicked.addListener(function(tab){
  counter++;
  if (counter == 5) {
    alert("Hi");
  }
}); 
```

清单.json：

```
 {
  "name": "Hello World!",
  "description": "My first packaged app.",
  "version": "0.1",
  "permissions": ["tabs", "http://*/*"],
  "manifest_version":2,
  "content_scripts": [ {
    "js": [ "jquery-1.9.1.js", "myscript.js" ],
    "matches": [ "http://*/*", "https://*/*"]
  }],
  "background": {
    "scripts": [
       "background.js"
    ]
  },
  "browser_action": {
    "default_title": "10,000 Hours",
    "default_icon": "icon16.png",
    "default_popup": "index.html"
  },
  "icons": {
    "16": "icon16.png",
    "48": "icon48.png",
    "128": "icon128.png"
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T05:53:26.720

它使用以下代码为我工作。

### 清单.json

```
{
    "name": "Popping Alert",
    "description": "http://stackoverflow.com/questions/15194198/background-js-not-working-chrome-extension",
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "version": "1",
    "manifest_version": 2,
    "browser_action": {
        "default_title": "Click Me"
    }
} 
```

### 背景.js

```
var counter = 0;
chrome.browserAction.onClicked.addListener(function (tab) {
    counter++;
    if (counter == 5) {
        alert("Hey !!! You have clicked five times");
    }
}); 
```

如果这不起作用，您能否分享您的相关代码或清楚地说明您的问题？

# javascript - 如何进行更多操作 标签？

> ID：15194201
> 
> 赞同：1
> 
> 时间：2013-03-04T03:40:27.440
> 
> 标签：javascript, html, output

我已经为输出标签编码，但我无法获得代码的实际输出。

代码如下

```
<html>
<head>
</head>
<body>
<script>
function myscript()
{
    z.value=parseInt(a.value)+parseInt(b.value);
    c.value=parseInt(a.value)-parseInt(b.value);
    d.value=parseInt(a.value)*parseInt(b.value);
    e.value=parseInt(a.value)/parseInt(b.value);

}
</script>
<form oninput="myScript()">
<input type="range" id="a">
<input type="range" id="b">
<input type="submit"><br/>

Addition<output name="z" for="a b"></output><br/>
Substraction<output name="c" for="a b"></output><br/>
Multiplication<output name="d" for="a b"></output><br/>
Division<output name="e" for="a b"></output>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:45:57.220

你有各种各样的问题。我不认为你想使用`oninput`, 和 Using`z.value`等可能行不通，但也很不稳定。尝试类似：

```
document.querySelector('form').addEventListener('submit', function (e) {
    e.preventDefault();

    var a = +document.getElementById('a').value,
        b = +document.getElementById('b').value;

    document.querySelector('[name="z"]').textContent = a + b;
    //etc.
}); 
```

[http://jsfiddle.net/ExplosionPIlls/S5XN6/](http://jsfiddle.net/ExplosionPIlls/S5XN6/)

# verilog - Basys2 上的七段复用

> ID：15194206
> 
> 赞同：2
> 
> 时间：2013-03-04T03:41:08.223
> 
> 标签：verilog, fpga, hdl, synthesis, multiplexing

这是我的第一篇文章，所以我希望我做得正确。我试图在 BASYS2 板上的四位七段显示器上输出“4 3 2 1”。我已检查以确保 0 启用信号并且我已正确映射端口。我相信错误在我的多路复用逻辑中，因为我只能显示一个数字。我是 Verilog 的新手（我习惯于 C），如果有任何建议，我将不胜感激。谢谢

```
`timescale 1ns / 1ps

module main (clock, AN0, AN1, AN2, AN3, CA, CB, CC, CD, CE, CF, CG, CDP);

//USED FOR SEVEN SEG
input clock;

output AN0, AN1, AN2, AN3, CA, CB, CC, CD, CE, CF, CG, CDP;

reg [7:0] cathodedata; //cathode data
reg [3:0] anodedata; //anode data
reg [2:0] digit = 1;
reg [6:0] data;
reg setdp;
reg [19:0] counter = 0;

assign CA = cathodedata [7];
assign CB = cathodedata [6];
assign CC = cathodedata [5];
assign CD = cathodedata [4];
assign CE = cathodedata [3];
assign CF = cathodedata [2];
assign CG = cathodedata [1];
assign CDP = cathodedata [0];
assign AN3 = anodedata [3];
assign AN2 = anodedata [2];
assign AN1 = anodedata [1];
assign AN0 = anodedata [0];
//USED FOR SEVEN SEG

    //Multiplexing
    //Board Clock: 50MHz
    //p = t*f
    //t = 16ms
    //p = 16ms * 50*10^6 = 800,000 cycles
    //200,000 cycles for each digit
    //Refreshed every 16ms (~60Hz)

always@(negedge clock)
begin
    if (digit == 1)
        begin
            if (counter == 200_000)
                begin
                    digit = 2;
                end
            else
                begin
                counter = counter + 1;
                data = 4;
                end
        end
    else if (digit == 2)
        begin
            if (counter == 400_000)
                begin
                    digit = 3;
                end
            else
                begin
                    counter = counter + 1;
                    data = 3;
                end
        end
    else if (digit == 3)
        begin
            if (counter == 600_000)
                begin
                    digit = 4;
                end
            else
                begin
                    counter = counter + 1;
                    data = 2;
                end
        end
    else if (digit == 4)
        begin
            if (counter == 800_000)
                begin
                    digit = 1;
                    counter = 0;
                end 
            else
                begin
                    counter = counter + 1;
                    data = 1;
                end
        end 
end

always @ (*)
begin

    case (data)
        6'd0: cathodedata = 8'b00000011; //0
        6'd1: cathodedata = 8'b10011111; //1
        6'd2: cathodedata = 8'b00100101; //2
        6'd3: cathodedata = 8'b00001101; //3
        6'd4: cathodedata = 8'b10011001; //4
        6'd5: cathodedata = 8'b01001001; //5
        6'd6: cathodedata = 8'b01000001; //6
        6'd7: cathodedata = 8'b00011111; //7
        6'd8: cathodedata = 8'b00000001; //8
        6'd9: cathodedata = 8'b00001001; //9
        6'd10: cathodedata = 8'b00010001; //A
        6'd11: cathodedata = 8'b11000001; //B
        6'd12: cathodedata = 8'b01100011; //C
        6'd13: cathodedata = 8'b10000101; //D
        6'd14: cathodedata = 8'b00100001; //E
        6'd15: cathodedata = 8'b01110001; //F
        default: cathodedata = 8'b11111111; //default all off
    endcase

    if (setdp == 1) //decimal point
        cathodedata = cathodedata & 8'hFE;

    case(digit)
        0: anodedata = 4'b1111; //all OFF
        4: anodedata = 4'b1110; //AN0
        3: anodedata = 4'b1101; //AN1
        2: anodedata = 4'b1011; //AN2
        1: anodedata = 4'b0111; //AN3
        default:
        anodedata = 4'b1111; //all OFF
    endcase

end 
endmodule 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T06:37:12.677

这是我的一个宠物项目的修改版本。它应该完全按照您的意愿进行：显示`4 3 2 1`在 4dig7seg 显示屏上。我在 Amani GTX CPLD 上对其进行了测试，它应该可以干净地传输到您的电路板上。

我喜欢将项目分成单独的模块以保持井井有条。顶层模块将板载时钟作为输入，将 14 个信号输出到四位七段串行显示器。 **确保正确分配引脚。**

```
module SevenSeg(clk, odig, onum, col, ap); 

input clk;         // 50 MHz oscillator 
output [3:0] odig; // selected digit output
output [7:0] onum; // selected display output
output col = 1;    // turns the colon off 
output ap  = 1;    // turns the apostrophe off 

wire clock;        // divided oscillator to slow the display output 

parameter a   = 8'b11111110; // low means on, high means off  
parameter b   = 8'b11111101; // these are just parameters  
parameter c   = 8'b11111011; // defining each of the 
parameter d   = 8'b11110111; // seven segments 
parameter e   = 8'b11101111; // making life easier
parameter f   = 8'b11011111; 
parameter g   = 8'b10111111; 
parameter dp  = 8'b01111111; 

parameter off = 8'b11111111; 

parameter one    =  b & c;             // parameters for outputs
parameter two    =  a & b & d & e & g; 
parameter three  =  a & b & c & d & g; 
parameter four   =  b & c & f & g; 

    wire [7:0] port1 = one;   // This is set up so these can change dynamically...
    wire [7:0] port2 = two;   // ... if so desired.     
    wire [7:0] port3 = three;
    wire [7:0] port4 = four;

slowclk m1(clk, clock);   // divides clk by 500, for 50 MHz in, 100 kHz out 

digitize m2(clock, port1, port2, port3, port4, odig, onum); // rotates the digit outputs 

endmodule 
```

* * *

接下来我有一个简单的时钟分频器。可以修改*case count = 500*以将时钟划分为您喜欢的任何频率。输出在大约 120 Hz 到大约 2 MHz 的范围内应该看起来不错。

```
module slowclk(clk, clock); 

input clk; 
output reg clock; 
integer count; 

always @(posedge clk) 
case(count)      
500: begin clock <= clock + 1; count <= 0; end   // Change 500 to any divisor you like
default:  count <= count + 1;   
endcase 
endmodule 
```

* * *

然后我们必须旋转数字。请注意，如果您“同时”更换阳极和阴极，则会有少量泄漏电流进入相邻段，从而导致“重影”效应。

```
module digitize(clock, num1, num2, num3, num4, odig, onum); 

input wire clock; 
input [7:0] num1; // rightmost digit 
input [7:0] num2; 
input [7:0] num3; 
input [7:0] num4; // leftmost digit 

output reg [3:0] odig; 
output reg [7:0] onum; 

parameter [7:0] off = 8'b11111111; 

reg [3:0] dstate; 

always @(posedge clock) 
case(dstate) 
0:begin   odig   <= 4'b0001; dstate <=  1; end 
1:begin   onum   <= num1;    dstate <=  2; end 
2:begin   onum   <= off;     dstate <=  3; end  // off states prevent 'ghosting' 
3:begin   odig   <= 4'b0010; dstate <=  4; end  // when changing output digit 
4:begin   onum   <= num2;    dstate <=  5; end 
5:begin   onum   <= off;     dstate <=  6; end 
6:begin   odig   <= 4'b0100; dstate <=  7; end 
7:begin   onum   <= num3;    dstate <=  8; end 
8:begin   onum   <= off;     dstate <=  9; end 
9:begin   odig   <= 4'b1000; dstate <= 10; end 
10:begin  onum   <= num4;    dstate <= 11; end 
11:begin  onum   <= off;     dstate <=  0; end 
default:  dstate <= 0; 
endcase 
endmodule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:44:42.230

我也在使用 basys2 并寻找 7 段驱动程序。Nathan G 的代码对我不起作用（也许使用系统 verilog？），但我发现了这篇文章：[http://simplefpga.blogspot.co.uk/2012/12/scrolling-or-moving-text-using-7。 html?showComment=1362783256904#c5783969326158067433](http://simplefpga.blogspot.co.uk/2012/12/scrolling-or-moving-text-using-7.html?showComment=1362783256904#c5783969326158067433)我为了自己的目的而蚕食它。修改后的代码如下。它应该采用（尽管我还没有完全检查解码）四个十六进制值并将它们显示在 7-seg 上。在我的例子中，我的董事会现在说“FAAF”（因为让这个工作很顺利）

来自digilent网站的ucf文件：

```
# Pin assignment for DispCtl
# Connected to Basys2 onBoard 7seg display
NET "seg<0>" LOC = "L14"; # Bank = 1, Signal name = CA
NET "seg<1>" LOC = "H12"; # Bank = 1, Signal name = CB
NET "seg<2>" LOC = "N14"; # Bank = 1, Signal name = CC
NET "seg<3>" LOC = "N11"; # Bank = 2, Signal name = CD
NET "seg<4>" LOC = "P12"; # Bank = 2, Signal name = CE
NET "seg<5>" LOC = "L13"; # Bank = 1, Signal name = CF
NET "seg<6>" LOC = "M12"; # Bank = 1, Signal name = CG

NET "dp" LOC = "N13"; # Bank = 1, Signal name = DP

NET "an<3>" LOC = "K14"; # Bank = 1, Signal name = AN3
NET "an<2>" LOC = "M13"; # Bank = 1, Signal name = AN2
NET "an<1>" LOC = "J12"; # Bank = 1, Signal name = AN1
NET "an<0>" LOC = "F12"; # Bank = 1, Signal name = AN0 
```

顶级模块有这个：

```
module top_level(     

//clock input
input CLK,

output [7:0] seg,
output dp,
output [3:0] an

);    

scrolling_name scrolling_name(
.clock(CLK),
.reset(RESET),
.a(seg[0]),
.b(seg[1]),
.c(seg[2]),
.d(seg[3]),
.e(seg[4]),
.f(seg[5]),
.g(seg[6]),
.dp(dp),
.an(an),
//.XPosition(XPosition),
//.YPosition(YPosition)
.XPosition(8'hFA),
.YPosition(8'hAF)
);

endmodule 
```

我从链接中的那个人那里得到并编辑的文件是：

```
`timescale 1ns / 1ps

module scrolling_name(
input clock,
input reset,
output a,
output b,
output c,
output d,
output e,
output f,
output g,
output dp,
output [3:0] an,
input [7:0] XPosition,
input [7:0] YPosition
);

reg [28:0] ticker; //to hold a count of 50M
wire click;
reg [3:0] fourth, third, second, first; // registers to hold the LED values

always @ (posedge clock or posedge reset) //always block for the ticker
begin
if(reset)
ticker <= 0;
else if(ticker == 50000000) //reset after 1 second
ticker <= 0;
else
ticker <= ticker + 1;
end

reg [3:0] clickcount; //register to hold the count upto 9\. That is why a 4 bit     register is used. 3 bit would not have been enough.

assign click = ((ticker == 50000000)?1'b1:1'b0); //click every second

always @ (posedge click or posedge reset)
begin
 if(reset)
  clickcount <= 0;
 else if(clickcount == 8)
   clickcount <= 0;
  else
  clickcount <= clickcount + 1;

end

always@(posedge clock)
begin
fourth = XPosition[7:4]; 
third = XPosition[3:0]; 

second = YPosition[7:4]; 
first = YPosition[3:0]; 
end

//see my other post on explanation of LED multiplexing.

localparam N = 18;

reg [N-1:0]count;

always @ (posedge clock or posedge reset)
 begin
  if (reset)
   count <= 0;
  else
   count <= count + 1;
 end

reg [6:0]sseg;
reg [3:0]an_temp;

always @ (*)
 begin
  case(count[N-1:N-2])

   2'b00 :
    begin
     sseg = first;
     an_temp = 4'b1110;
    end

   2'b01:
    begin
     sseg = second;
     an_temp = 4'b1101;
    end

   2'b10:
    begin
     sseg = third;
     an_temp = 4'b1011;
    end

   2'b11:
    begin
     sseg = fourth;
     an_temp = 4'b0111;
    end
  endcase
 end
assign an = an_temp;

reg [6:0] sseg_temp;

always @ (*)
 begin
  case(sseg)
   0 : sseg_temp = 7'b1000000; //to display 0
   1 : sseg_temp = 7'b1001111; //to display 1
   2 : sseg_temp = 7'b0100100; //to display 2
   3 : sseg_temp = 7'b0110000; //to display 3
   4 : sseg_temp = 7'b0011001; //to display 4
   5 : sseg_temp = 7'b0010010; //to display 5
   6 : sseg_temp = 7'b0000011; //to display 6
   7 : sseg_temp = 7'b1111000; //to display 7
   8 : sseg_temp = 7'b0000000; //to display 8
   9 : sseg_temp = 7'b0011000; //to display 9
   10 : sseg_temp = 7'b0001000; //to display A
   11 : sseg_temp = 7'b0000011; //to display B
   12 : sseg_temp = 7'b1000110; //to display C
   13 : sseg_temp = 7'b0100001; //to display D
   14 : sseg_temp = 7'b0000110; //to display E
   15 : sseg_temp = 7'b0001110; //to display F

default : sseg_temp = 7'b1111111; //blank
endcase
end

assign {g, f, e, d, c, b, a} = sseg_temp;
assign dp = 1'b1;

endmodule 
```

请原谅可怕的格式/缩进 - 他的组合，我的组合，并添加四个空格以使堆栈溢出以将其识别为代码。不幸的是，我没有时间让事情变得漂亮。如果您愿意，我可以将所有这些捆绑在一起并将其放在保管箱中。

弥敦道

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T09:57:39.050

最后你有：

```
always @(*) begin
...
  if (setdp == 1) //decimal point
    cathodedata = cathodedata & 8'hFE; 
```

`always @*`意味着一个组合块，它不是打破循环等的触发器。您的模拟器可能没有捕捉到这一点，但我希望它在综合中存在真正的问题。

基本上你有阴极数据驱动自己。

我会用类似的东西代替它：

```
always @(*) begin
...
  if (setdp == 1) //decimal point
    cathodedata_mask = cathodedata & 8'hFE;
  else 
    cathodedata_mask = cathodedata; 
```

# http - RESTful 服务必须始终基于 HTTP 吗？

> ID：15194207
> 
> 赞同：10
> 
> 时间：2013-03-04T03:41:18.720
> 
> 标签：http, rest

许多网站（例如[twitter](https://dev.twitter.com/docs/api/1.1)、[stackexchange](https://api.stackexchange.com/docs)）提供基于 HTTP 协议的 RESTful OPEN API。我可以设计基于其他协议（例如原始 TCP）的 RESTful 服务吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T03:49:18.547

简短的回答是 RESTful 服务*通常*确实隐含 HTTP，但这并不是绝对必要的。 [维基百科条目](http://en.wikipedia.org/wiki/Representational_state_transfer#Outside_the_Web)包括关于网络之外的实现的部分，尽管它非常简短并且实际上只讨论了通用管理信息协议 (CMIP)。

实际上，对于大多数开发人员来说，RESTful 服务通过 HTTP 运行。

您当然可以从 Web 上的 RESTful 协议中获得灵感，并在原始 TCP 上构建您自己的类似协议，但您可能会发现自己使用 HTTP 语言来实现它。到那时，您可能想问自己为什么不首先使用 HTTP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T07:11:40.217

如果您查看[Roy Fielding 的博士论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)，您会看到第 5 章定义了 REST，而第 6 章将其应用于 HTTP。

“具象状态转移”确实是相当抽象的。您没有理由不能将它应用到您自己的*adhoc*协议中。目的是使其成为*无状态*的，拥有*安全*的读取方法（可缓存），如果可能的话，还有*幂等*的写入方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:50:37.553

如果您坚持架构的真正租户，其中每个操作都对历史操作一无所知，您可能会鼓起一些不同的东西。目前，简单的 Put、get、post 和 delete 操作非常适合基于 http 的服务调用。

# javascript - 仅在单击的 DIV 中应用 .toggle() 方法

> ID：15194216
> 
> 赞同：0
> 
> 时间：2013-03-04T03:42:21.297
> 
> 标签：javascript, jquery

我是 JQuery 的新手，我想知道如何仅在单击的 DIV 中应用 .toggle() 方法，而不是在页面的所有 DIV 中应用。

谁能帮我？

**PS：我需要在 JQuery 1.4 版中实现**

这是我的代码：

```
<html>
<head>

<link rel="stylesheet" type="text/css" href="card.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
            $(function() {
                $('#toggle2').live("click", function() {
                    $('.toggle2').toggle();
                    return false;
                });
            });
</script>

</head>
<body>

<div class="card">
    <a href="#" id="toggle2">Switch Text Toggle</a><br />
    <p class="toggle2">FRONT 1</p>
    <p class="toggle2" style="display:none;">BACK 1</p>
</div>

<div class="card">
    <a href="#" id="toggle2">Switch Text Toggle</a><br />
    <p class="toggle2">FRONT 2</p>
    <p class="toggle2" style="display:none;">BACK 2</p>
</div>

</body> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:43:33.543

```
$(function() {
    $('#toggle2').live("click", function() {
        $(this).parent().find('.toggle2').toggle();
        return false;
    });
}); 
```

ID 是唯一的，这可能仅适用于 的第一次出现`#toggle`，因此您还需要在那里使用类。

[**小提琴**](http://jsfiddle.net/adeneo/j5nMY/)

# java - 绘图问题 - 从其他形状绘制复合形状

> ID：15194218
> 
> 赞同：1
> 
> 时间：2013-03-04T03:42:36.400
> 
> 标签：java, drawing

所以我有一个大学作业。这个概念是我们要完成一些类层次结构的东西。基本上它是允许我们绘制不同形状的东西。

我可以成功绘制每个形状；我需要它在哪里以及我需要它有多大，就像需要一样......我遇到麻烦的部分是这个复合层次结构。

基本上我们应该有一个新的类，我们应该有一个新的类`Compound.java`，我们应该有三个其他类，`House`,`tree`和`earth`; 每个都应该采用我们创建的形状对象（矩形、正方形、直线、椭圆形和圆形）并绘制所需的图片，如类名所示。

我遇到问题的地方是家庭课程；例如：我可以让它绘制一个矩形，但是当我试图让它绘制第二个矩形之后，它基本上忘记了第一个，只绘制了第二个！

我们没有对 Graphics 的东西进行任何练习，所以我不知道任何方法或任何我可以调用来绘制然后在`House`构造函数中继续的东西。

我理解为什么它会覆盖第一个矩形，当`House`调用构造函数时，它会遍历构造函数中的所有内容，然后返回`Compound.java`并使用方法绘制它`draw(Graphics g)`....

但我不知道如何解决它！任何帮助将不胜感激......明天到期。

这是所有代码：

**形状.java：**

```
import java.awt.*;

public abstract class Shape {
    int initX, initY;
    Color fillColour;

    public Shape() {
        initX = 0;
        initY = 0;
    }

    public Shape(int x, int y) {
        initX = x;
        initY = y;
    }

    public void setInitX (int x) {
        initX = x;
    }

    public void setInitY (int y) {
        initY = y;
    }

    public abstract void draw(Graphics g);
    public abstract double Area();
    public abstract double Perimeter();

    public void Move(int deltaX, int deltaY){
        //future work
    }

} 
```

**ClosedShape.java：**

```
import java.awt.Graphics;

public abstract class ClosedShape extends Shape {
    boolean polygon;
    int numPoints;
    int[] xVertices;
    int[] yVertices;
    int x,y,width, height;

    public ClosedShape(boolean isPolygon, int numPoints) {
        super(0,0);
        this.polygon = isPolygon;
        this.numPoints = numPoints;
    }

    public ClosedShape(boolean isPolygon, int numPoints, int[] x, int[] y) {
        super(x[0],y[0]);
        this.polygon = isPolygon;
        if (isPolygon) {
            this.numPoints = numPoints;
            xVertices = new int[numPoints]; // error check?  if x.length == numPoints
            for (int i = 0; i < x.length; i++) { // make copy of array: why?
                xVertices[i] = x[i];
            }
            yVertices = new int[numPoints]; // error check?  if y.length == numPoints
            for (int i = 0; i < y.length; i++) { // make copy of array
                    yVertices[i] = y[i];
            }
        }
        else { // its an oval - define bounding box
            this.numPoints = 4;
            this.x = x[0];
            this.y = y[0];
            width = x[1];
            height = y[1];
        }
    }

    public void setXYCoords(int[] x, int[] y){
        this.xVertices = x;
        this.yVertices = y;
    }

    // Gives access to the width attribute
    public void setWidth(int width){
        this.width = width;
    }

    // Gives access to the height attribute
    public void setHeight(int height) {
        this.height = height;
    }

    public void draw(Graphics g) {
        if (polygon) {
            g.drawPolygon(xVertices, yVertices, numPoints);
        }
        else {
            g.drawOval(x, y, width, height);
        }

    }

    public abstract double Area();
    public abstract double Perimeter();

} 
```

**矩形.java：**

```
public class Rectangle extends ClosedShape
{

    public Rectangle(int x, int y, int width, int height)
    {
        super(true, 4);

        setWidth(width);
        setHeight(height);

        int [] arrayX = new int[4];
        arrayX[0] = x;
        arrayX[1] = (x+width);
        arrayX[2] = (x+width);
        arrayX[3] = x;

        int [] arrayY = new int[4];
        arrayY[0] = y;
        arrayY[1] = y;
        arrayY[2] = y+height;
        arrayY[3] = y+height;

        setXYCoords(arrayX, arrayY);

    }

    public double Area()
    {
       return 0;
    }

    public double Perimeter()
    {
        return 0;
    }

} 
```

**复合.java：**

```
import java.awt.*;
import java.awt.Graphics;

public class Compound
{
    boolean polygon;
    int[] xVertices;
    int[] yVertices;
    int initX, initY;
    Color fillColour;

    public void setXYCoords(int[] x, int[] y)
    {
        this.xVertices = x;
        this.yVertices = y;
    }

    public void draw(Graphics g)
    {
        if (polygon) {
            g.drawPolygon(xVertices, yVertices, 4);
        }
        else {
            g.drawOval(1, 1, 1, 1);
        }

    }

} 
```

**房子.java：**

```
import java.awt.*;
import java.awt.Graphics;

public class House extends Compound
{

    public House(int x, int y, int width, int height)
    {

        int [] arrayX = new int[4];
        arrayX[0] = x;
        arrayX[1] = (x+width);
        arrayX[2] = (x+width);
        arrayX[3] = x;

        int [] arrayY = new int[4];
        arrayY[0] = y;
        arrayY[1] = y;
        arrayY[2] = y+height;
        arrayY[3] = y+height;

        setXYCoords(arrayX, arrayY);
        this.polygon = true;

        Rectangle house = new Rectangle(x, y, width, height);

        int [] arrayXTwo = new int[4];
        arrayXTwo[0] = x+(width/4);
        arrayXTwo[1] = x+(2*(width/4));
        arrayXTwo[2] = x+(2*(width/4));
        arrayXTwo[3] = x+(width/4);

        int [] arrayYTwo = new int[4];
        arrayYTwo[0] = y+(height/4);
        arrayYTwo[1] = y+(height/4);
        arrayYTwo[2] = y+height;
        arrayYTwo[3] = y+height;

        setXYCoords(arrayXTwo, arrayYTwo);
        this.polygon = true;

        Rectangle door = new Rectangle(x, y, width, height);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:47:11.887

从您的示例代码中，无法将任何形状“添加”到`Compound`类中。根据您的描述，`Compound`应该是形状的“容器”。更多类似...

```
public class Compound
{
    private List<Shape> shapes;

    public Compound() {
        shapes = new ArrayList<Shape>(25);
    }

    public void addShape(Shape shape) {
        shapes.add(shape);
    }

    public Iterable<Shape> getShapes() {
        return shape;
    }

    public void draw(Graphics g) {
        for (Shape shape : shapes) {
            shape.draw(g);
        }
    }
} 
```

现在您需要决定，在哪里最好将`Color`与`Shape`应该为形状本身定义的相关联？这意味着您不能重复使用该形状。还是跟`Compound`形状？

# java - HTTP 状态 404 - / - 请求的资源 [ServletName] 不可用

> ID：15194219
> 
> 赞同：0
> 
> 时间：2013-03-04T03:42:41.037
> 
> 标签：java, jakarta-ee, servlets

**在过去的几个月里，我一直在试图弄清楚是如何`servlet mapping`工作的（无济于事）。**我不知道我大脑的哪个部分无法处理这个概念，但我似乎无法弄清楚。

我已经问了 4-5 个类似的问题，但所有的回答都没有定论……而且我无法删除这些帖子。

我知道有几十个，也许是几百个重复，但我已经浏览了至少 30 个，但仍然无法掌握 servlet 映射的基本概念。**我的目录结构太不同了。**

**免责声明：**我违背自己的意愿使用了 10 年前的软件。主题应该仍然（有点）相关。我最近从 Java SE7 转换到了一个更旧的版本。

*   J2SE 1.4.2
*   Sun 应用服务器 PE 8
*   Sun 部署工具
*   EJB 2.1

* * *

**错误：**

> ## HTTP 状态 404 - /send_message
> 
> **类型**状态报告
> 
> **消息**/send_message
> 
> **描述**请求的资源 (/send_message) 不可用。
> 
> ## **Sun-Java 系统/应用程序服务器**

* * *

**应用结构：**

> ```
> ├───SendMail_app
>     │   index.jsp
>     │   SendMailApp.ear
>     │
>     └───sendmail
>             SendMail.class
>             SendMail.java
>             SendMailBean.class
>             SendMailBean.java
>             SendMailHome.class
>             SendMailHome.java
>             SendMailServlet.class
>             SendMailServlet.java 
> ```

**注意：**我的讲师指出，旧版本的 Java 不需要`META-INF`，或者`WEB-INF`明确地在目录结构中。这不是我不幸的决定。据说这是2005年的常态。

* * *

**应用程序.xml**

```
<?xml version='1.0' encoding='UTF-8'?> 
```

    http://java.sun.com/xml/ns/j2ee/application_1_4.xsd">应用描述SendMailApp ejb-jar-ic.jar war-ic.war sendmail                       

**web.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>WebApp</display-name>
    <servlet>
        <display-name>SendMailServlet</display-name>
        <servlet-name>SendMailServlet</servlet-name>
        <servlet-class>sendmail.SendMailServlet</servlet-class>
    </servlet>
    <servlet>
        <display-name>index</display-name>
        <servlet-name>index</servlet-name>
        <jsp-file>/index.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>SendMailServlet</servlet-name>
        <url-pattern>/send_message</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>index</servlet-name>
        <url-pattern>/index</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

**sun-web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 8.1 Servlet 2.4//EN" "http://www.sun.com/software/appserver/dtds/sun-web-app_2_4-1.dtd">
<sun-web-app>
    <context-root>sendmail</context-root>
    <session-config>
        <session-manager persistence-type="memory">
            <manager-properties/>
            <store-properties/>
        </session-manager>
        <session-properties/>
            <cookie-properties/>
        </session-config>
        <cache enabled="true" max-entries="4096" timeout-in-seconds="30">
            <default-helper/>
        </cache>
        <class-loader delegate="true"/>
        <jsp-config/>
        <parameter-encoding default-charset="UTF8"/>
</sun-web-app> 
```

* * *

**EAR 文件：C:\ejb_apps\SendMail_app\SendMailApp.ear EAR 显示名称：SendMailApp

> ```
> ├───META-INF
>     │   application.xml
>     │   sun-application.xml
>     |   sun-j2ee-ri.project
>     │
>     └───ejb-jar-ic.jar
>     |___war-ic.war 
> ```

* * *

**war-ic.war** WAR 显示名称：WebApp 上下文根目录：sendmail

> ```
> ├───WEB-INF
> |    │   classes
> |    │      |____sendmail
> |    |----lib
> |    |----tags
> |    |----wsdl
> |    │----sun-j2ee-ri.project
> |    |----sun-web.xml
> |    |----web.xml
> |
> |____index.jsp 
> ```

* * *

**ejb-jar-ic.jar** JAR 显示名称：SendMailJAR

> ```
> ├───META-INF
> |    |----wsdl
> |    |----ejb-jar.xml
> |    |----sun-ejb-jar.xml
> |    │----sun-j2ee-ri.project
> |
> |____sendmail
>        |----SendMail.class
>        |----SendMailBean.class
>        |----SendMailHome.class 
> ```

* * *

**索引.jsp**

```
<%@ page import="sendmail.*" %>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Hermod</title>
        <link rel="stylesheet" href="master.css"/>
    </head>

    <body>
        <section id="sendmail_form">
            <form method="post" action="/sendmail/send_message">
                <label>From</label><input type="email" name="from" size="32" maxlength="256"/><br>
                <label>To</label><input type="email" name="from" size="32" maxlength="256"/><br>
                <label>CC</label><input type="email" name="cc" size="32"/><br>
                <label>BCC</label><input type="email" name="bcc" size="32"/><br>
                <label>Subject</label><input type="text" name="subject" size="32" maxlength="256"/><br>
                <label>Body</label><input type="text" name="body" size="32"/><br>

                <button id="submit" type="submit">Submit</button>
                <button id="clear" type="reset">Clear</button>
            </form> 
        </section>

        <section id="sendmail_result">
            <!--${requestScope.message_status}-->
        </section>
    </body>
</html> 
```

* * *

**SendMailServlet.java**

```
package sendmail;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.naming.InitialContext;
import javax.naming.Context;
import javax.naming.NamingException;
import javax.rmi.PortableRemoteObject;
import javax.ejb.CreateException;
import java.io.IOException;

 public class SendMailServlet extends HttpServlet {
    private ServletContext context = null;

    public SendMailServlet(){
        super();
    }

    public void init(ServletConfig config) throws ServletException {
        context = config.getServletContext();
    }

    public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException {

        try {
            Context initial = new InitialContext();
            Object objref = initial.lookup("java:comp/env/ejb/SendMail");
            SendMailHome home = (SendMailHome)PortableRemoteObject.narrow(objref, SendMailHome.class);
            SendMail sendmail = home.create();

            String status = sendmail.send(request);

            request.setAttribute("message_status", "status");
            RequestDispatcher RD = context.getRequestDispatcher("/index");
            RD.forward(request, response);

        } catch (ServletException SE){
            //TODO: log exception
        } catch (IOException IOE){
            //TODO: log exception
        } catch (CreateException CE){
            //TODO: log exception
        } catch (NamingException NE){
            //TODO: log exception
        } finally {
            super.destroy();
        }
    }
} 
```

当然，代码中充满了新奇的错误，但从语义上讲，我正在尝试做的事情就在那里。这是错误的，但如果你抽象地思考它，它并没有那么糟糕。

**发生了什么：**

*   我尝试了几十个不正确的 servlet 映射来尝试`SendMailServlet.java`调用`index.jsp`
*   他们是可怕的，可悲的不正确。

* * *

`localhost:8080/sendmail`

*   JSP 正确加载
*   提交时（转发给`/send_message`（即`sendmail.SendMailServlet`））：

* * *

> ## HTTP 状态 404 - /send_message
> 
> **类型**状态报告
> 
> **消息**/send_message
> 
> **描述**请求的资源 (/send_message) 不可用。
> 
> ## **Sun-Java 系统/应用程序服务器**

我不确定如何列举 2 个月的失败，但我尝试了大约 40-50 种不同的 servlet 映射。

**作为一名程序员，我在哪里失败了？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:01:25.767

据我所知，您的 web.xml 是正确的。你可能看错地方了。

将所有这些捕获更改为单个捕获不太专业的异常（异常 e）并使用 throw new RuntimeException(e) 重新抛出异常；尽量不要忽略异常。如果您没有任何事情要做救援，那么只需将其包装在 RuntimeException 中并再次抛出它。

IPlanet 是一场噩梦，当您尝试查找此 EJB 时可能会遇到错误，但由于您忽略了异常，因此到目前为止您还没有看到它。JNDI 查找始终是愚蠢错误的奇怪来源。

并且请不要调用 destroy ，因为它不是必需的，因为 Servlet 实例是为了被重用。destroy 是由容器调用的，而不是用户调用的。它只是在那里，如果您有某种资源需要在服务器想要处理您的 Servlet 时正确处理，您可以在服务器中覆盖它。但它不适合你。甚至覆盖它也很少需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:11:30.857

在您的`web.xml`我没有找到任何映射，`send_mail`并且只有一个 servlet 配置可用于 URL 模式`/send_message`，因此请验证您的配置。

另外我认为在你的*jsp*中你应该替换：

```
action="${pageContext.request.contextPath}/send_mail" 
```

和：

```
action="/send_mail" 
```

即删除上下文路径：`/send_mail`，否则将转换`localhost:8080/sendmail/send_mail`为请求URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:19:01.887

找到了罪魁祸首。您正在尝试转发到`/index`您应该`index.jsp`在您的 servlet 中转发到的时间`doPost`

```
//wrong line
//RequestDispatcher RD = context.getRequestDispatcher("/index");
//solved!
RequestDispatcher RD = context.getRequestDispatcher("index.jsp"); 
```

此外，请遵循 Marcos Eliziário Santos 关于`super.destroy()`使用的建议，只需将其从您的代码中删除即可。

# java - java - 为什么像Java中的Boolean这样的包装类是不可变的？

> ID：15194226
> 
> 赞同：6
> 
> 时间：2013-03-04T03:43:21.683
> 
> 标签：java, immutability

我看不出布尔包装类成为不可变的原因。

为什么 Boolean Wrapper 没有像 Commons lang 中的 MutableBoolean 那样实现，实际上可以重置。

有没有人对此有任何想法/理解？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T03:45:27.393

因为`2`是 2。不会是`3`明天。

不可变总是首选作为默认值，*尤其是*在多线程情况下，它使代码更易于阅读和维护。一个很好的例子：Java `Date`API，它充满了设计缺陷。如果`Date`是不可变的，API 将会非常精简。我会知道`Date`操作会创建新的日期，并且永远不必寻找修改它们的 API。

阅读*Concurrency in Practice*以了解不可变类型的真正重要性。

但还要注意，如果由于某种原因你想要可变类型，使用`AtomicInteger` `AtomicBoolean`等。为什么`Atomic`？因为通过引入可变性，您引入了对线程安全的需求。如果您的类型保持不可变，您将不需要它，因此在使用可变类型时，您还必须为考虑线程安全和使用`concurrent`包中的类型付出代价。欢迎来到并发编程的美妙世界。

另外，对于`Boolean`- 我挑战你说出一个你可能想要执行的操作，它关心 Boolean 是否是可变的。设置为真？使用`myBool = true`. 那是重新分配，而不是突变。否定？ `myBool = !myBool`. 同样的规则。请注意，不变性是一个*特性*，而不是一个约束，所以如果你*能*提供它，你应该 - 在这些情况下，你当然可以。

请注意，这也适用于其他类型。整数最微妙的事情是`count++`，但这只是`count = count + 1`，除非您关心以原子方式获取值......在这种情况下使用 mutable `AtomicInteger`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T03:46:16.863

Java 中的包装类是不可变的，因此运行时只能有两个布尔对象——一个代表真，一个代表假——每个变量都是对这两个对象之一的引用。而且由于它们永远无法更改，因此您知道它们永远不会从您的身下被拉出来。这不仅可以节省内存，还可以让你的代码更容易推理——因为你知道的包装类永远不会改变它们的值，它们不会突然跳转到一个新值，因为它们是意外的在其他地方引用相同的值。

同样，Integer 具有所有带符号字节值的缓存 - -128 到 127 - 因此运行时不必具有这些常见 Integer 值的额外实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T17:41:37.583

Patashu 是最接近的。Java 中许多愚蠢的设计选择是因为它们实现 VM 的方式受到限制。我认为最初他们试图为 C 或 C++ 制作一个 VM，但它太难了（不可能？）所以制作了另一种类似的语言。写一个，到处跑！任何像其他家伙喷出的计算机科学理由都是事后的文件夹。如您所知，Java 和 C# 正在演变为与 C 一样强大。当然，它们更简洁。应该适用于十年后设计的语言！简单的技巧是创建一个“持有人”类。或者现在使用闭包！也许 Java 正在演变成 JavaScript。哈哈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T12:37:11.187

布尔值或任何其他包装类在 java 中是不可变的。由于包装类用作存储简单数据的变量，因此它们应该是安全的，并且必须保持数据完整性以避免不一致或不需要的结果。此外，不变性通过避免重复对象来节省大量内存。更多内容可以在文章[Why Strings & Wrapper classes are designed immutable in java? 中找到。](http://www.explain-java.com/2013/03/06/is-string-mutable-in-java-why-wrapper-classes-immutable-in-java/ "为什么 Strings 和 Wrapper 类在 java 中是不可变的？")

# java - 将反序列化的对象与其原始对象合并

> ID：15194233
> 
> 赞同：0
> 
> 时间：2013-03-04T03:43:49.877
> 
> 标签：java, serialization, transient

我正在使用 UDP 套接字为 Java 中的游戏实现客户端服务器协议。我将用户输入从客户端发送到服务器，服务器处理输入并更新包含玩家和其他游戏对象的关卡对象。我正在序列化关卡对象（它还包含临时属性以减小大小）并将其发送到客户端。我想将从服务器接收到的 Level 对象与客户端上的对象合并，因为从服务器接收到的对象的瞬态属性将具有空值。除了手动重建完整且最新的级别对象之外，还有什么好方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:03:46.067

假设您的对象是“标准”java bean，其属性具有 getter 和 setter，Spring 在其[BeanUtils 类](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/BeanUtils.html)中有几个实用方法可以提供帮助。这两种方法都命名为`copyProperties`，并且都用于将属性从一个对象复制到另一个对象。[其中一种方法](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object,%20java.lang.Class%29)允许您指定属性的白名单，[另](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object,%20java.lang.String%5B%5D%29)一种方法允许您指定黑名单。使用这些方法，您可以定义应该或不应该复制到从服务器接收到的 Level 的接口或属性列表，然后为您完成复制 - 类似于：

```
interface LevelPropertiesToMerge {
    void setPropertyOne(String something);
    void setPropertyTwo(int somethingElse);
}

// serialization code on client
Level fromServer = ...;
Level fromClient = ...;
BeanUtils.copyProperties(fromClient, fromServer, LevelPropertiesToMerge.class); 
```

或者：

```
// serialization code on client
Level fromServer = ...;
Level fromClient = ...;
BeanUtils.copyProperties(fromClient, fromServer,
    new String[] {"propertyOneToIgnore", "propertyTwoToIgnore"}); 
```

# codeigniter - allowed_uri_chars 代码点火器

> ID：15194235
> 
> 赞同：0
> 
> 时间：2013-03-04T03:44:00.263
> 
> 标签：codeigniter, codeigniter-url

如何使符号@可以在uri中使用。当我尝试在 url 中发送电子邮件地址时，此消息来了

```
An Error Was Encountered

The URI you submitted has disallowed characters. 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:49:52.037

允许的 uri 字符定义在`config.php`

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-@'; 
```

# node.js - Express 无法 PUT/DELETE 方法。出了什么问题？

> ID：15194237
> 
> 赞同：18
> 
> 时间：2013-03-04T03:44:03.213
> 
> 标签：node.js, mongodb, rest, express, mongoose

好的，所以我在这里设置了一个简单的 node.js / express.js / mongodb 应用程序，我的配置如下。

```
var express = require('express'),
    mongoose = require('mongoose');
    http = require('http');

var app = express();

    app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');

    //middleware stack
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + "/public"));
});

mongoose.connect("mongodb://localhost/hello"); 
```

问题出在我尝试发出 PUT 或 DELETE 请求时。我的表格就是这么简单

```
<form method="POST" action="/users/#{user.name}">
    <input type="hidden" name="_method" value="PUT"/>
</form> 
```

现在我的路由器使用 express .put() 方法捕获路由

```
app.put('/users/:name', function(req, res) {

    var b = req.body;

    Users.update(
        { name: req.user.name },
        { name: b.name, age: b.age, email: b.email },
        function(err) {
            res.redirect('/users/'+b.name);
        });
}) 
```

当我提出请求时，我只会收到“Cannot PUT”或“Cannot DELETE”错误。

我试图通过 chomes RESTful 客户端发出相同的请求，结果相同。

我读过一个话题，女巫和我有同样的问题，尽管按照评论回答并没有解决我的问题。

我研究了 [expressjs 对方法删除和放置方法的支持的问题，而没有方法覆盖](https://stackoverflow.com/questions/9859287/expressjs-support-for-method-delete-and-put-without-the-methodoverride)

[大多数 Web 浏览器中是否提供 PUT、DELETE、HEAD 等方法？](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)

和其他几个人一起。我还多次引用了 express.js 和 mongo 文档。我只是想不出可能出了什么问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T04:05:51.853

**更新**

正如 Jonathan Lonowski 指出的`PUT`也可以使用，所以你可以忽略我的旧答案。获取`Cannot PUT`或`Cannot POST`错误，意味着您的回调未成功执行。我的猜测是`Users.update`失败了，这就是它不能 POST 或 PUT 的原因。你能检查一下吗。

**旧答案**

尝试更改此行

```
app.put('/users/:name', function(req, res) { 
```

到

```
app.post('/users/:name', function(req, res) { 
```

因为您正在尝试提交表单

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T04:06:22.820

您是否在视图或文件`<form>`中列出？`static``__dirname + "/public"`

在静态文件中，'s`#{user.name}`可能不会被替换，并且将被视为[URL Fragment](http://en.wikipedia.org/wiki/Fragment_identifier)。`user``name`

将`<form>`实际提交给`/users/`而不是`/users/:name`因为那是`path`：

```
console.log(url.parse('/users/#{user.name}'));

{ hash: '#{user.name}',
  pathname: '/users/',
  path: '/users/',
  href: '/users/#{user.name}' } 
```

如果不是，`<form>`则应该从视图生成，因为`action`需要动态和数据驱动。使用 Jade 并假设`user`是 的成员`locals`，那将是：

```
form(method='POST', action='/users/' + user.name)
  input(type='hidden', name='_method', value='PUT') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:27:12.023

除非有奇怪的魔法在起作用，否则您的表单会发出 POST 请求，而不是 PUT。如果你想 PUT，我建议使用[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)带有`type: 'PUT'`参数的函数，比如[这个答案](https://stackoverflow.com/questions/2153917/how-to-send-a-put-delete-request-in-jquery#answer-2153931)，来自表单处理程序，请参阅[`jQuery.submit`](http://api.jquery.com/submit/)。不要忘记`return false`使表单不会提交两次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-22T21:13:58.407

如果您的 using 方法覆盖，请确保在使用路由之前已声明它。这就是我遇到的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-21T16:08:40.223

**app.post("/movies/:id")**是一种解决方案。如果您仍想使用**app.put("/movies/:id")** ，请尝试以下操作：

1.  从 npm 安装方法 ovveride。
2.  在你的 app.js 文件中需要它。
3.  打开要调用 PUT 请求的表单
4.  确保您的表单具有以下属性：

    **action="/movies/<%= movies._id %>?_method=PUT " method="POST" >**

这两个解决方案对我有用。如果您遵循 REST，则使用方法 ovveride else app.post() 也可以解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-20T16:07:24.183

更改`res.redirect('path')`为`res.redirect(303, 'path')`

**在`Put`and`Delete`中，如果要重定向到`get`地址，则应将 303 作为第一个参数传递。**（[来源](https://stackoverflow.com/a/33215327/4718434)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-31T08:01:01.963

**一种解决方案是在你的app.js**文件中使用**cors**中间件来处理你的**PUT、PATCH 和 DELETE**请求，如下所示：

 **首先通过 npm安装**cors包：**

`npm i cors`

然后将以下代码添加到您的 app.js：

```
const cors = require('cors')

app.use(cors()) 
```**

# c++ - 了解不同指针类型的理由

> ID：15194240
> 
> 赞同：2
> 
> 时间：2013-03-04T03:44:53.337
> 
> 标签：c++, windows, visual-c++, porting

作为为指针和非指针数据类型创建单独模型的明智决定，Microsoft 提出了一组数据类型，强烈建议使用它们而不是像`int`, `__int64`, `long`（`signed`和`unsigned`版本）这样的 POD。

Microsoft 遵循的当前模型`IL32P64`迫使所有 C 类型的指针转​​换为易受指针截断的整数类型。这迫使他们想出 _PTR 类型。对于每个有效的整数类型（有符号无符号）`long`或非`int`POD 类型`DWORD`，他们提出了等效的符号`DWORD_PTR`, `INT_PTR`。

如果我们解析 typedef 链，所有这些类型都归结为以下定义

```
#if defined(_WIN64)
 typedef unsigned __int64 ULONG_PTR;
#else
 typedef unsigned long ULONG_PTR;
#endif

#if defined(_WIN64)
 typedef unsigned __int64 LONG_PTR;
#else
 typedef unsigned long LONG_PTR;
#endif 
```

我想知道的是，为每个整数类型和非 POD 等价物创建不同类型定义的原因，而不是创建一个供所有人使用的单一类型（比如一个`INT_PTR`and `UINT_PTR`）

**那我为什么想知道？**

如果您一直在 MS 平台，很少会遇到 MS 提出的问题。如果您的代码是多平台的，就会出现问题。您必须为 *nix 定义等效类型以使您的代码可移植。

我打算只创建两个指针类型`XI64_PTR`，并且`XU64_PTR`具有等效的定义并使用它，而不管以前的类型是什么。

# java - 返回什么；（没有价值）是什么意思？

> ID：15194243
> 
> 赞同：10
> 
> 时间：2013-03-04T03:45:02.250
> 
> 标签：java, return

我提取了某人的 APK（Android 应用程序）来查看 Java 源代码，并看到了很多`return;`代码，甚至在`void`方法上也是如此。

例如：

```
public void doSomething(){
do{
    return; //This line makes the code below unreachable and can't compile in Eclipse
    switch(num){
        ...
        default:
            return;
    }
}while(...)
...
} 
```

为什么应用程序在我的手机上运行良好？

我想`return;`这就像打破方法的捷径。是对的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T03:52:19.503

如果该方法返回 void 则`return;`只是在该语句处退出该方法，而不运行以下语句。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T03:48:41.420

对，那是正确的。[查看http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)的底部：

> 退货声明
> 
> 最后一个分支语句是返回语句。return 语句从当前方法中退出，控制流返回到调用方法的地方。return 语句有两种形式：一种返回值，另一种不返回。要返回一个值，只需将值（或计算该值的表达式）放在 return 关键字之后。
> 
> 返回++计数；返回值的数据类型必须与方法声明的返回值的类型相匹配。当一个方法被声明为 void 时，使用不返回值的 return 形式。
> 
> 返回;

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T04:01:41.717

回答你的第一个问题：我假设这段代码是反编译的。请注意，反编译器不是二进制 dex 代码与用于生成这些二进制文件的任何 Java 代码的一对一转换器。他们经常在解析不同的控制结构（如循环和开关）时遇到问题。此外，二进制文件可能会被混淆，这意味着在编译后二进制文件被修改为完全可操作，但更难反编译和逆向工程（基本上是为了防止你在这里尝试做的事情:)）。他们可以添加死代码，例如不应该存在的 return 语句、mangle 循环和 if 语句来混淆反编译的代码等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-10T17:04:03.770

return 关键字基本上用在 void 方法中，它有助于打破条件语句以脱离方法。

# facebook - facebook 预览对话框（用于权限）与实际访问请求对话框不匹配

> ID：15194251
> 
> 赞同：0
> 
> 时间：2013-03-04T03:45:35.277
> 
> 标签：facebook, dotnetopenauth

我编写了一个使用 facebook 登录的网络应用程序/网站。我已经设置它，所以它请求“用户和朋友权限”=“电子邮件”。但是，当我使用试用帐户登录时，系统不会要求我授予访问电子邮件的权限（因此未提供信息）。

我需要访问用户的电子邮件地址，因为我也在我的数据库中验证了他们。

我正在使用 VS2012 和内置的 openid/oath 功能。

-马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:05:55.527

看起来 VS2012 中的 facebook 客户端不支持这一点。我将不得不编写我自己的客户端。

见：[http ://forums.asp.net/t/1847724.aspx/1](http://forums.asp.net/t/1847724.aspx/1)

# java - 未被识别为字段

> ID：15194253
> 
> 赞同：2
> 
> 时间：2013-03-04T03:46:00.497
> 
> 标签：java, android, xml

好了朋友们。因此，当我的源代码立即出现错误时，我尝试将图像上传到我的 drawable-hdpi 文件。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    counter = 0;
    add = (Button) findViewById(R.id.bAdd);
    sub = (Button) findViewById(R.id.bSub);
    display = (TextView) findViewById(R.id.tvDisplay);
    add.setOnClickListener(new View.OnClickListener() { 
```

它不会突然识别我的 activity_main 以及我在其中的所有 id。这是我的 activity_main.xml 的样子。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".StartingPoint" >

<TextView
    android:text="Your total is "
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:gravity="center"
    android:id="@+id/tvDisplay"
    android:textSize="45sp" />

<Button
    android:id="@+id/bAdd"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/bSub"
    android:layout_below="@+id/bSub"
    android:layout_marginTop="47dp"
    android:text="Subtraction" />

<Button
    android:id="@+id/bSub"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvDisplay"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="61dp"
    android:text="Addition" /> 
```

有什么想法吗？

# android - 符号 # 不显示在 Android 的通话屏幕上

> ID：15194256
> 
> 赞同：2
> 
> 时间：2013-03-04T03:46:32.107
> 
> 标签：android, call

我创建了一个应用程序来呼叫号码`*123456789#`，但是当应用程序呼叫这个号码时，Android 只是呼叫`*123456789`（没有`#`）。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:58:38.913

您只需对电话号码进行编码。

```
String phonenumber = "*123456789#"; 
encodedPhonenumber = URLEncoder.encode(phonenumber, "UTF-8");
startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + encodedPhonenumber))); 
```

# android - android：如何在简单的问答游戏中显示随机按钮？

> ID：15194258
> 
> 赞同：1
> 
> 时间：2013-03-04T03:47:13.297
> 
> 标签：android, random

我正在学习如何做一个简单的问答游戏。在游戏中，点击后会生成一个随机数，使一个新问题出现（有一个开关，每个案例与一个不同的问题相关联）。每个问题只有一个正确答案，并且在单击任何按钮后会显示下一个问题（无论该人是否单击了正确的按钮）。但我也试图让按钮以随机方式出现......我试过这个：

```
 final Random rng = new Random();
    final List<Integer> generated = new ArrayList<Integer>();

        while(true){

            if(generated.size()!=3) {

                Integer nxt = rng.nextInt(3) + 1;

                if (!generated.contains(nxt))
                {
                    generated.add(nxt);

                    textView1 = (TextView) findViewById(R.id.textView1);
                    switch (nxt) {
                    case 1: 
                        textView1.setText("Question 1");

                        btn1.setText("Right answer");
                        btn2.setText("Wrong 1");
                        btn3.setText("Wrong 2");
                        btn4.setText("Wrong 3");

                        break;
                    case 2: 
                        textView1.setText("Question 2");

                        btn1.setText("Right answer");
                        btn2.setText("Wrong 1");
                        btn3.setText("Wrong 2");
                        btn4.setText("Wrong 3");

                        break;
                    case 3: 
                        textView1.setText("Question 3");

                        btn1.setText("Right answer");
                        btn2.setText("Wrong 1");
                        btn3.setText("Wrong 2");
                        btn4.setText("Wrong 3");

                        break;
                }

                break;
            }
        }

    } 
```

我将此代码放在 onCreate 中（当用户输入此活动问题时已经出现问题）和按钮 1 的 onClick 中（单击按钮时出现另一个问题。）所有 4 个答案的顺序（4 个按钮) 应该是随机的。做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:56:38.290

您可能想要创建一个包含问题、答案和任何其他所需数据的“QuestionInfo”类。然后，您可以创建“QuestionInfo”对象的集合（数组或列表），这将使选择随机问题和填充 UI 变得非常容易。不需要巨大的 switch 语句。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-09T04:20:25.163

创建一个数组将有助于随机化您的问题。

# ruby-on-rails - 如何增加rails gem中的字段？

> ID：15194261
> 
> 赞同：0
> 
> 时间：2013-03-04T03:47:38.623
> 
> 标签：ruby-on-rails, notifications, gem, rails-postgresql

我收到此错误：

```
 SQL (31.1ms)  INSERT INTO "read_marks" ("readable_id", "readable_type", "timestamp", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["readable_id", nil], ["readable_type", "PublicActivity::ORM::ActiveRecord::Activity"], ["timestamp", Mon, 04 Mar 2013 03:29:52 UTC +00:00], ["user_id", 2]]
PG::Error: ERROR:  value too long for type character varying(20) 
```

因为“可读类型”只包含 20 个字符，而我正在传递“PublicActivity::ORM::ActiveRecord::Activity”。

[这与将 gem unread 与 public_activity 使用](https://stackoverflow.com/questions/9535093/using-gem-unread-with-public-activity)相同的问题（显然解决了问题但没有说明如何（参见他的底部更新））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:52:20.867

为什么不进行迁移并更改`readable_type`为更长的类型？像这样的东西：

```
change_column :read_marks, :readable_type, "varchar(255)" 
```

或者如果你想走更长的时间：

```
change_column :read_marks, :readable_type, :text 
```

由于您使用的是 PostgreSQL，因此使用“无限”长度类型（例如`:text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:52:08.020

从您添加的链接：

```
UPDATE

AH! It was the readable_type field having a limit of only 20 that was truncating my class name. Now it works after I increased the size. 
```

在数据库上，将“可读类型”列的大小增加到大于 20

# meteor - 流星：更新集合后没有页面更新

> ID：15194266
> 
> 赞同：3
> 
> 时间：2013-03-04T03:48:12.323
> 
> 标签：meteor, publish-subscribe

我已经成功发布和订阅了两个合集。在客户端，我将 subscribe 方法放入一个自动运行函数中，每次我更改一些会话变量时，我的集合都会更新。我的数据模型如下所示：

```
Topics: {
    _id: ObjectID,
    comments: [
        commentId1,
        commentId2,
        etc...
    ]
}

Comments: {
    _id: ObjectID,
} 
```

当我创建新评论时，我在集合中插入评论并使用数组上的a`Comments`更新`Topics`集合。`$push`在此之后，我预计，meteor 会重新呈现我的页面，但只有当我更改主题会话变量并将其更改回来或手动重新加载页面时才会发生这种情况......只有这样，meteor 才会更新订阅。为什么会这样？我想我错过了一些东西......但文档没有给我任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:28:18.177

我想，原因是您在客户端执行数据库插入，但不知道为什么它不再呈现页面。

您可以这样做的另一种方法是，在服务器端使用`Meteor.call()`as 执行插入：

```
if (Meteor.isClient){
  ....
  ....
  Meteor.call('addComment', 'your_new_comment'); 
  ....
} 
```

在服务器端：

```
if(Meteor.isServer){

  Meteor.Methods({
   'addComment' : function(data){
     //your insertion code here.
     Comments.insert(data);
   }
  });
} 
```

你也可以这样做`Topics`。这将更新服务器端的相关数据，并且由于您已经拥有`published-subscribed`这些数据，即使会话变量没有更改，它也会自动发布到客户端。

# objective-c - 将 float 转换为 int 时，为什么数字 > -1 和 < -0.5 变为 -1，而数字 >= -0.5 和 < 0 变为 0？

> ID：15194267
> 
> 赞同：0
> 
> 时间：2013-03-04T03:48:24.837
> 
> 标签：objective-c, casting, floating-point, truncate, floating-accuracy

我一直认为当浮点数被截断为整数时，它总是成为小于浮点数的最大数字。但是，当浮点数介于 -0.5 和 0 之间时，它会转换为 0 而不是 -1！为什么是这样？这是特定于语言的吗？我在 objC 中看到了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:51:30.150

好吧，简短的回答是您的理解实际上是正确的：

0 是大于 -1 的数字。

更长或更详细的答案取决于如何将浮点数转换为整数。如果您想要“0.5”的浮点数使用“-1”而不是“0”，您可能需要编写自己的实现，将负数从浮点数中去除，将其向上或向下舍入为整数，然后相加（或相乘） a -1，准确地说）负号回到它上面。

这是我为演示实现差异而编写的一些代码：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // insert code here...
        NSLog(@"Hello, World!");
        float floatNumber = -1.0f;
        for(NSInteger index = 0; index < 20; index++)
        {
            NSLog( @"floatNumber is %4.2f and integer is %d %d", floatNumber, (int) floatNumber, (int)roundf(floatNumber));
            floatNumber+=0.1f;
        }
    }
    return 0;
} 
```

在 Xcode 下，结果如下：

```
floatNumber is -1.00 and integer is -1 -1
floatNumber is -0.90 and integer is 0 -1
floatNumber is -0.80 and integer is 0 -1
floatNumber is -0.70 and integer is 0 -1
floatNumber is -0.60 and integer is 0 -1
floatNumber is -0.50 and integer is 0 0
floatNumber is -0.40 and integer is 0 0
floatNumber is -0.30 and integer is 0 0
floatNumber is -0.20 and integer is 0 0
floatNumber is -0.10 and integer is 0 0
floatNumber is 0.00 and integer is 0 0
floatNumber is 0.10 and integer is 0 0
floatNumber is 0.20 and integer is 0 0
floatNumber is 0.30 and integer is 0 0
floatNumber is 0.40 and integer is 0 0
floatNumber is 0.50 and integer is 0 1
floatNumber is 0.60 and integer is 0 1
floatNumber is 0.70 and integer is 0 1
floatNumber is 0.80 and integer is 0 1
floatNumber is 0.90 and integer is 0 1 
```

# c++ - C头文件和源文件

> ID：15194268
> 
> 赞同：1
> 
> 时间：2013-03-04T03:48:29.123
> 
> 标签：c++

我是一名学生程序员，通过“Accelerated C++”一书学习我的第一语言。我正处于作者解释包含函数的头文件和源文件的地步。在本书提供解释的练习中，作者有包含函数定义的头文件，但由于源文件也有函数定义，这似乎是多余的。在这种情况下，在编写 C++ 时，头文件的意义何在？

示例：头文件。

```
#ifndef MEDIAN_H
#define MEDIAN_H

#include <vector>
double median(std::vector<double>);

#endif // MEDIAN_H 
```

然后包含确定成绩中位数的函数的源文件：

```
// source file for the `median' function
#include <algorithm>    // to get the declaration of `sort'
#include <stdexcept>    // to get the declaration of `domain_error'
#include <vector>       // to get the declaration of `vector'

using std::domain_error;   using std::sort;   using std::vector;

#include "median.h"

// compute the median of a `vector<double>'
// note that calling this function copies the entire argument `vector'
double median(vector<double> vec)
{
#ifdef _MSC_VER
    typedef std::vector<double>::size_type vec_sz;
#else
    typedef vector<double>::size_type vec_sz;
#endif

    vec_sz size = vec.size();
    if (size == 0)
        throw domain_error("median of an empty vector");

    sort(vec.begin(), vec.end());

    vec_sz mid = size/2;

    return size % 2 == 0 ? (vec[mid] + vec[mid-1]) / 2 : vec[mid];
} 
```

中位数.h 被复制到中位数函数源文件中，即使源已经有定义`vector<double> vec` 本书解释它是无害的，实际上是一个好主意。但我只是想更好地了解这种冗余的原因。任何解释都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:52:07.947

头文件的目的是包含在实际实现相关功能的文件之外的文件中。本质上，您需要告诉 C++ 编译器存在哪些函数，以及它们的外观以便调用它们。

例如，假设我有一个函数 doStuff.cpp：

```
#include "median.h"

std::vector<double> my_vector;
double my_median;

void do_stuff(){
    my_median=median(my_vector);
} 
```

C++ 编译器需要知道该函数`median()`具有您的特定参数和返回值，而不是其他人的`median()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:52:17.680

是的，这是多余的，但标准做法。C/C++ 编译器需要在使用函数之前进行声明。在某些情况下，这意味着您在实现之前绝对必须有一个声明，例如，如果您有相互递归的函数。如果您在一个项目中有多个文件，那么您还需要包含您在另一个文件中使用的函数的声明——最简单的方法是将它们分开。

也就是说，为了在库中的可重用性，声明/实现也是分开的。想象一下，您编写了一个非常大的有用函数库，而其他人想要使用它们。他们需要向编译器提供他们将使用的函数的声明，因此他们使用您的 .h 文件。

# ruby-on-rails - Rails 缓存键生成为 ActiveRecord::Relation

> ID：15194270
> 
> 赞同：4
> 
> 时间：2013-03-04T03:48:58.140
> 
> 标签：ruby-on-rails, caching, memcached, dalli

我正在尝试生成一个片段缓存（使用 Dalli/Memcached 存储）但是密钥是使用“#”作为密钥的一部分生成的，所以 Rails 似乎没有识别出缓存值并且正在命中数据库。

我在视图中的缓存键如下所示：

```
cache([@jobs, "index"]) do 
```

控制器具有：

```
@jobs = @current_tenant.active_jobs 
```

使用像这样的实际 Active Record 查询：

```
def active_jobs
   self.jobs.where("published = ? and expiration_date >= ?", true, Date.today).order("(featured and created_at > now() - interval '" + self.pinned_time_limit.to_s + " days') desc nulls last, created_at desc")
end 
```

查看 rails 服务器，我看到缓存已读取，但 SQL 查询仍在运行：

```
Cache read: views/#<ActiveRecord::Relation:0x007fbabef9cd58>/1-index 
Read fragment views/#<ActiveRecord::Relation:0x007fbabef9cd58>/1-index (1.0ms)
(0.6ms) SELECT COUNT(*) FROM "jobs" WHERE "jobs"."tenant_id" = 1 AND (published = 't' and expiration_date >= '2013-03-03')
  Job Load (1.2ms)  SELECT "jobs".* FROM "jobs" WHERE "jobs"."tenant_id" = 1 AND (published = 't' and expiration_date >= '2013-03-03') ORDER BY (featured and created_at > now() - interval '7 days') desc nulls last, created_at desc 
```

关于我可能做错了什么的任何想法？我确定它必须使用密钥生成和 ActiveRecord::Relation，但我不确定如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T12:24:41.130

**背景：**

问题是每次运行代码时关系的字符串表示形式都不同：

```
 |This changes| 
views/#<ActiveRecord::Relation:0x007fbabef9cd58>/... 
```

所以你每次都会得到一个不同的缓存键。

除此之外，*不可能*完全摆脱数据库查询。（你[自己的答案](https://stackoverflow.com/a/15232586/23368)是最好的）

**解决方案：**

生成一个有效的密钥，而不是这个

```
cache([@jobs, "index"]) 
```

做这个：

```
cache([@jobs.to_a, "index"]) 
```

这将查询数据库并构建模型数组，从中`cache_key`检索 。

PS：我可以发誓使用以前版本的 Rails 中的关系......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-22T11:08:01.087

大约一年来，我们一直在做您在生产中提到的事情。几个月前我把它提取到了一个宝石中：

[https://github.com/cmer/scope_cache_key](https://github.com/cmer/scope_cache_key)

基本上，它允许您使用范围作为缓存键的一部分。这样做有显着的性能优势，因为您现在可以在单个缓存元素中缓存包含多条记录的页面，而不是循环范围内的每个元素并单独检索缓存。我觉得将此与标准的“俄罗斯娃娃缓存”原则相结合是最佳的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:54:59.383

我遇到过类似的问题，我无法成功地将关系传递给缓存函数，而您的 @jobs 变量是一个关系。

我编写了一个缓存键的解决方案来处理这个问题以及我遇到的其他一些问题。它基本上涉及通过遍历关系来生成缓存键。

完整的文章在我的网站上。

[http://mark.stratmann.me/content_items/rails-caching-strategy-using-key-based-approach](http://mark.stratmann.me/content_items/rails-caching-strategy-using-key-based-approach)

总之，我向 ActiveRecord::Base 添加了一个 get_cache_keys 函数

```
module CacheKeys
  extend ActiveSupport::Concern
  # Instance Methods
    def get_cache_key(prefix=nil)
      cache_key = []
      cache_key << prefix if prefix
      cache_key << self
      self.class.get_cache_key_children.each do |child|
        if child.macro == :has_many
          self.send(child.name).all.each do |child_record|
            cache_key << child_record.get_cache_key
          end
        end
        if child.macro == :belongs_to
          cache_key << self.send(child.name).get_cache_key
        end
      end
      return cache_key.flatten
    end

  # Class Methods
  module ClassMethods
    def cache_key_children(*args)
      @v_cache_key_children = []
      # validate the children
      args.each do |child|
        #is it an association
        association = reflect_on_association(child)
        if association == nil
          raise "#{child} is not an association!"
        end
        @v_cache_key_children << association
      end
    end

    def get_cache_key_children
      return @v_cache_key_children ||= []
    end

  end
end

# include the extension
ActiveRecord::Base.send(:include, CacheKeys) 
```

我现在可以通过执行创建缓存片段

```
cache(@model.get_cache_key(['textlabel'])) do 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-13T20:49:38.620

我做过类似 Hopsoft 的东西，但它使用[Rails Guide](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching "导轨指南")中的方法作为模板。我使用 MD5 摘要来区分关系（因此`User.active.cache_key`可以`User.deactivated.cache_key`与`updated_at`

```
require "digest/md5"

module RelationCacheKey
  def cache_key
    model_identifier = name.underscore.pluralize
    relation_identifier = Digest::MD5.hexdigest(to_sql.downcase)
    max_updated_at = maximum(:updated_at).try(:utc).try(:to_s, :number)

    "#{model_identifier}/#{relation_identifier}-#{count}-#{max_updated_at}"
  end
end

ActiveRecord::Relation.send :include, RelationCacheKey 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T19:36:05.617

虽然我将@mark-stratmann 的响应标记为正确，但实际上我通过简化实现解决了这个问题。我在我的模型关系声明中添加了 touch: true ：

```
belongs_to :tenant, touch: true 
```

然后根据租户设置缓存键（也需要查询参数）：

```
<% cache([@current_tenant, params[:query], "#{@current_tenant.id}-index"]) do %> 
```

这样，如果添加了新作业，它也会触及租户缓存。不确定这是否是最好的路线，但它有效并且看起来很简单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-19T17:33:27.240

我使用这段代码：

```
class ActiveRecord::Base
  def self.cache_key
    pluck("concat_ws('/', '#{table_name}', group_concat(#{table_name}.id), date_format(max(#{table_name}.updated_at), '%Y%m%d%H%i%s'))").first
  end

  def self.updated_at
    maximum(:updated_at)
  end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-10T01:16:06.697

也许这可以帮助你 [https://github.com/casiodk/class_cacher](https://github.com/casiodk/class_cacher)，它从模型本身生成一个 cache_key ，但也许你可以使用代码库中的一些原则

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-08T16:25:49.693

作为一个起点，你可以尝试这样的事情：

```
def self.cache_key
  ["#{model_name.cache_key}-all",
   "#{count}-#{updated_at.utc.to_s(cache_timestamp_format) rescue 'empty'}"
  ] * '/'
end

def self.updated_at
  maximum :updated_at
end 
```

我有一个规范化的数据库，其中多个模型与相同的其他模型相关，考虑客户、位置等，所有这些都通过 street_id 具有地址。

使用此解决方案，您可以根据范围生成 cache_keys，例如

```
cache [@client, @client.locations] do
  # ...
end

cache [@client, @client.locations.active, 'active'] do
  # ...
end 
```

我可以简单地`self.updated`从上面修改以包含关联的对象（因为`has_many`不支持“触摸”，所以如果我更新了街道，否则缓存不会看到它）：

```
belongs_to :street

def cache_key
  [street.cache_key, super] * '/'
end

# ...

def self.updated_at
  [maximum(:updated_at),
   joins(:street).maximum('streets.updated_at')
  ].max
end 
```

只要您不“取消删除”记录并在 belongs_to 中使用 touch，您应该可以假设由 count 和 max updated_at 组成的缓存键就足够了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-12-10T22:18:25.917

我在 ActiveRecord::Relation 上使用一个简单的补丁来为关系生成缓存键。

```
require "digest/md5"

module RelationCacheKey
  def cache_key
    Digest::MD5.hexdigest to_sql.downcase
  end
end

ActiveRecord::Relation.send :include, RelationCacheKey 
```

# c++ - C++，为大数据传递最佳参数和返回类型

> ID：15194283
> 
> 赞同：0
> 
> 时间：2013-03-04T03:49:59.250
> 
> 标签：c++

我有许多发送者和接收者函数，它们按层次结构相互传递数据：

```
class singleton
{
 TYPE3 var; //data populated from a hierarchy
 void Receive(TYPE3 a){ var = a;}
}

class C
{
  void Receiver_from_B(TYPE2 a);
  TYPE3 intermediate_value;
  make_TYPE3(&intermediate_value){....;}//pseudo
  TYPE3 Sender(){ return intermediate_value; }  //finally sends it to a noncopyable class object
};

class B
{
  void Receiver_from_A(TYPE1 a);
  TYPE2 intermediate_value;
  make_TYPE2(&intermediate_value){....;}//pseudo
  TYPE2 Sender_to_A(){ return intermediate_value; } 
};

class A
{
  TYPE_I a;
  TYPE_II b;
  void Receiver_from_down_the-tree(TYPE_I a_){ a = a_};
  void Receiver_from_down_the-tree_(TYPE_II b_){ b = b_};
  TYPE1 intermediate_value;
  void make_TYPE1(&intermediate_value, a , b) {.....;}//pseudo
  TYPE1 Sender_to_B(){ return intermediate_value;} 
}; 
```

从这种树中积累的数据量相对较大，我想跳过将数据从发送方复制到接收方。

我想我需要参数类型和返回值的`const`组合`reference`。如果您能建议我最好的参数和返回值类型，我将不胜感激。

希望我很好地解释了这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:49:44.077

将对象传递给方法/函数以避免大量复制的标准方法是使用对 const 的引用：

```
void my_method(const BigObject & big)
{
  // do something with big
} 
```

`&`使其成为参考并避免对象的深层复制。受让人没有进一步的`const`修改。

在 C++ 中有许多其他方法可以避免复制，例如移动构造函数模式、传递指针（我建议将它们包装在 std::shared_ptr 中）...。这取决于您的设计。

# css - CSS pseudo class for leaving hover

> ID：15194293
> 
> 赞同：6
> 
> 时间：2013-03-04T03:51:53.740
> 
> 标签：css, hover, css-selectors, css-transitions, pseudo-class

I have a nice little hover effect on my website that quickly transitions in as the user hovers over a link. But when the user leaves hovering over the box, the shadow (and other traits) go away immediately, instead of fading back out. Is there a way I can get the properties to fade both in AND out, maybe using some sort of :un-hover type pseudo class? Thanks! And here is the CSS block if it helps:

```
a.squares:hover, a.squares:active {
    color: black;
    background-color: #E8E8E8;
    box-shadow: 0 0 12px black;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -webkit-transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
    -moz-transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
    transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T03:57:11.353

Put the transitions on `a.squares` not `a.squares:hover`

```
a.squares {
    -webkit-transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
    -moz-transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
    transition: color 0.1s ease-in-out, background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
}
a.squares:hover, a.squares:active {
    color: black;
    background-color: #E8E8E8;
    box-shadow: 0 0 12px black;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
} 
```

I went through this exact thing when I was just leaving about transitions :)

# actionscript-3 - ActionScript3 如何使用字典中的键完全删除值

> ID：15194300
> 
> 赞同：1
> 
> 时间：2013-03-04T03:52:28.580
> 
> 标签：actionscript-3, dictionary

的行为`Dictionary`让我感到困惑：我有一个`Dictionary`，填充如下：

```
var playerControllers:Dictionary = new Dictionary();

playerControllers[id] = new PlayerController(); 
```

然后，我正在删除我的一个控制器：

```
delete playerControllers[id];   //I also tried playerControllers[id] = null; 
```

然后：

```
for each (var playerController:PlayerController in playerControllers)
{
//"deleted" PlayerController exists! 
} 
```

如何使用字典中的键删除值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:18:33.497

这可能会有所帮助。

`var playerControllers:Dictionary = new Dictionary(true);`//弱引用

如果您使用`Object as key`.we 应该使用`weak reference`可能会在这种情况下帮助您。

即使您仍然从内存中删除 playerControllers[id]，因为字典类仍然在字典中保存该 playerControllers[id] 引用。

为了更好地理解[http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/associative-arrays.html#articlecontentAdobe_numberedheader_2](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/associative-arrays.html#articlecontentAdobe_numberedheader_2)

# javascript - 点击后lightbox2不显示图像

> ID：15194301
> 
> 赞同：3
> 
> 时间：2013-03-04T03:52:32.183
> 
> 标签：javascript, jquery, lightbox2

我不知道我做错了什么，但我试图在一个简单的画廊上使用 lightbox2。我已经将页面剥离，试图弄清楚为什么灯箱只给我覆盖而不显示图像。这是页面[http://hearttoheartnc.com/store.html](http://hearttoheartnc.com/store.html)

非常感谢任何帮助，因为我已经用谷歌搜索了这个问题并且找不到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:04:36.143

问题是您在 store.html 文件中使用的是最新版本的 jquery，请尝试以下操作：

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

而不是这个：

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

# c# - 懒加载动态代理 POCOs n+1 select

> ID：15194303
> 
> 赞同：1
> 
> 时间：2013-03-04T03:52:43.117
> 
> 标签：c#, entity-framework, entity-framework-5

考虑以下实体模型和功能：

```
public class Order
{
  public int OrderId {get; set;}
  public int StatusId {get; set;}

  public virtual Status OrderStatus {get; set;}
}

public class Status
{
  public int StatusId {get; set;}
  public String Name { get; set;}
}

public void ShowOrders()
{
  //load all status entities.
  //Will EF check for these in object cache first when I access order.Status for
  //the first time?
  //Or perhaps even auto include them in materialised orders?
  context.Status.Load(); 

  //enumerate orders without explicit status include
  foreach(Order o in context.Orders.ToList())
  {
    //Get Status navigation property for each order
    //Will database be hit?
    Console.WriteLine("Order: {0:N}, Status: {1}", o.OrderId, o.OrderStatus.Name);
  }
} 
```

我知道我可以明确地做到：

```
context.Orders.Include(o=>o.OrderStatus).ToList(); 
```

在查询订单时包括状态以防止 n+1 选择。而且我知道，如果我访问已检查的`Order.OrderStatus`导航属性`DbReferenceEntry.IsLoaded`并在数据库被命中之前检索缓存的状态对象（如果可能）。

我想知道的是，如果引用实体已经在对象缓存中，那么当父实体实现（即使没有被调用）时是否填充`DbReferenceEntry.IsLoaded`？`DbReferenceEntry.CurrentValue``.Include()`

所以在上面的这个例子中，当`Order.OrderStatus` **第一次**访问时，即使所有状态都在对象缓存中，因为`Status.Load()`枚举订单之前的调用，数据库查询是否会被执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:40:52.763

我没有测试以下语句（通过观察何时以及哪些 SQL 查询在分析器中实际运行），它们只是猜测：

> 由于枚举订单之前的 Status.Load() 调用，即使所有状态都在对象缓存中，是否会执行数据库查询？

如果**未**执行数据库查询，我很确定原因*不是专门***调用**的。这只是执行时数据库表的快照。在您枚举订单时，EF 无法确定表在此期间没有更改并且已插入其他行。因此，为了避免错误的数据表示，EF*必须*运行一个新查询——除非 EF 有其他方法来识别是否需要查询。 *`context.Status.Load()``Status``context.Status.Load()``Status``Status`*

 **还有其他方法，在这种情况下，因为`Order`实体只有对 的*引用*，`Status`而不是`Status`集合。当`Order`s 被加载时 - 通过枚举`context.Orders.ToList()`- EF 将始终将外键加载到`OrderStatus`，无论您是否使用`Include`。`Status`如果您没有`StatusId`在模型中将 FK 暴露为属性，甚至会出现这种情况。在物化 an 的那一刻`Order`，关系修复将运行并检查`Status`其主键与加载的 FK 具有相同值的实体是否`Order`已存在于对象上下文中。如果是，该`Order.OrderStatus`属性将立即设置为该`Status`实体 - 我猜，EF 会将导航属性标记为`IsLoaded`. 对于引用，只能有一个匹配的实体，如果该实体已附加到上下文并分配给导航属性，则运行查询是没有意义的。

所以，我想说：如果正确的`Status`对象附加到上下文，则不会运行任何查询。不管是通过运行`context.Status.Load()`还是只加载这个特定`Status`的，运行任何其他会加载这个的查询，`Status`或者通过手动将 附加`Status`到上下文 ( `context.Status.Attach(...)`) 都没有关系。

`Order.OrderStatus`如果是一个*集合*，我认为这种行为必须改变。现在加载an`Order`时，没有 FK 到`Status`. 相反，`Status`他们有一个 FK 到`Order`. 如果您`Status`首先加载实体 - 通过`context.Status.Load`或任何其他查询 - Order-FK 将与`Status`对象一起加载。如果您稍后加载`Order`关系修复将再次运行，这次相反：EF 会查看`Status`上下文中是否有任何对象具有 FK 引用已加载的`Order`. 如果是，它将添加`Status`到`Order.OrderStatus`集合中。但是这一次 - 很大的猜测 - 它不能将导航属性（`Order.OrderStatus`集合）标记为，`IsLoaded`因为它不能确定真的**所有** `Status``Order`之前已加载此对象或同时尚未将新`Status`对象`Order`添加到数据库中。

所以，我想，如果你访问`Order.OrderStatus`集合，延迟加载将运行以确保潜在的“其余`Status`对象”也`Order`被加载。然后它将集合标记为`IsLoaded`. 它可能不需要向`Status`集合添加任何其他内容，但至少需要查询以检查集合是否完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:18:56.680

每当访问导航属性时，EF 将首先检查对象缓存，因此如果已加载所有状态实体，则访问 Order.OrderStatus 不应发出数据库查询。如果引用已经在对象缓存中，则将在实现期间填充 DbReferenceEntry。

如果您担心发出的查询数量，请考虑关闭延迟加载，以便在发出自动查询的情况下，您将获得空值。

有关更多性能指导，请参阅本文：http: [//msdn.microsoft.com/en-us/data/hh949853.aspx](http://msdn.microsoft.com/en-us/data/hh949853.aspx)**

# asp.net - 无法从超过 1 行中读取数据

> ID：15194309
> 
> 赞同：0
> 
> 时间：2013-03-04T03:53:27.827
> 
> 标签：asp.net

我从表中读取数据时遇到问题。这是我的编码示例

```
Dim SqlQry As String = "SELECT Distinct(RechargeAmt) from KioskItem where TelcoID='" & TelcoID & "'"
        Dim SqlCmd As New SqlCommand(SqlQry, Conn)
        Dim dr As SqlDataReader = SqlCmd.ExecuteReader
        dr.Read()
        If dr.HasRows Then
            While dr.Read()
                Dim SqlQry As String = "SELECT Distinct(RechargeAmt) from KioskItem where TelcoID='" & TelcoID & "'"
        Dim SqlCmd As New SqlCommand(SqlQry, Conn)
        Dim dr As SqlDataReader = SqlCmd.ExecuteReader
        dr.Read()
        If dr.HasRows Then
            While dr.Read()
                RechargeAmt = dr(0)
                a = a & RechargeAmt & ";"
            End While
        End If
        If a = 0 Then
            Return RechargeAmt
        Else
            Return a
        End If 
```

我的问题是如果数据超过一行，将数据保存到字符串中没有问题，但是当我表中的数据只有一行时，它无法读取数据。我试试这个

```
If dr.HasRows Then
            RechargeAmt = dr(0)
            While dr.Read()
                a = a & RechargeAmt & ";"
            End While
        End If
        If a = 0 Then
            Return RechargeAmt
        Else
            Return a
        End If 
```

但它仍然无法从表中读取数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:11:06.023

那是因为你总是错过第一行。

看这里

```
 dr.Read()               //Gets the first row
    If dr.HasRows Then
        While dr.Read()  //Gets the second row onwards 
```

你总是跳过第一行。

不需要初始读取。你可以直接从

```
 While dr.Read() 
```

只有当有行时，控制才会进入循环内部。

# c# - EmguCv.CV.CvInvoke 引发的 EmguCv TypeInitializationException

> ID：15194310
> 
> 赞同：1
> 
> 时间：2013-03-04T03:53:34.680
> 
> 标签：c#, exception, opencv, kinect, emgucv

让我首先说我确实遵循了许多教程，例如位于 EmguCv 主站点上的教程，但是却抛出了 TypeInitializationException。

现在，仔细听，因为这是非常奇怪的部分。我首先要说我的问题有三个“级别”，但是，所有“级别”中的代码都是完全相同的，甚至没有丝毫变化。这自然会表明我有参考或链接问题，但我再次尝试按照不同的教程进行多次尝试，但无济于事。

级别 1（此级别产生 TypeInitializationException）
我创建一个新项目，正确引用所有内容等，然后在这个新项目中编写我的代码。在调试时，我抛出异常并且我的程序退出。这是问题图片的链接：http: [//prntscr.com/uychc](http://prntscr.com/uychc)

级别 2（此级别运行完全正常，没有抛出异常）
在此级别中，我几乎找到了 EmguCv 的示例项目之一（在本例中为 VideoSurveilance），然后删除默认代码并将我的所有代码复制并粘贴到那里。在添加了一些我需要的参考资料后，该程序运行良好。我不能发布超过 3 个链接，但您必须相信我视频图片显示正确。

第 3 级（此级别不会引发异常，但会警告我“第一次机会”出现）
在此级别中，我将整个 2 级项目复制并粘贴到不同的目录中。找到并重新链接丢失的文件/引用后，我可以运行程序，但图片不显示，并且在 Emgu.CV.dll 警告中出现“类型为“System.TypeInitializationException”的第一次机会异常[。http：/ /prntscr.com/uycmn](http://prntscr.com/uycmn)

我目前运行 Windows 7 x64（是的，我将构建选项更改为 x64 和 x64 .dll），并且正在运行 EmguCv 2.4.9 和 2.4.2（两者都经过测试）以及 Visual Studios 2010 和 2012（两者都经过测试）。

这是它可能值得的代码：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    //using System.Threading.Tasks;
    using System.Windows.Forms;

    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;

    using Microsoft.Kinect;
    using Emgu.CV;
    using Emgu.CV.CvEnum;
    using Emgu.CV.Structure;
    using Emgu.CV.UI;
    using System.IO;

    namespace VideoSurveilance
    {
       public partial class VideoSurveilance : Form
       {
            KinectSensor sensor;
            WriteableBitmap depthBitmap;
            WriteableBitmap colorBitmap;
            DepthImagePixel[] depthPixels;
            byte[] colorPixels;

            int blobCount = 0;

          public VideoSurveilance()
          {
             InitializeComponent();

          }

          private void VideoSurveilance_Load(object sender, System.EventArgs e)
          {
              foreach (var potentialSensor in KinectSensor.KinectSensors)
              {
                  if (potentialSensor.Status == KinectStatus.Connected)
                  {
                      this.sensor = potentialSensor;
                      break;
                  }
              }

              if (null != this.sensor)
              {

                  this.sensor.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);
                  this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
                  this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];
                  this.depthPixels = new DepthImagePixel[this.sensor.DepthStream.FramePixelDataLength];
                  this.colorBitmap = new WriteableBitmap(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);
                  this.depthBitmap = new WriteableBitmap(this.sensor.DepthStream.FrameWidth, this.sensor.DepthStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

                  WriteableBitmap bitmap;
                  bitmap = new WriteableBitmap(this.sensor.DepthStream.FrameWidth, this.sensor.DepthStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

                  byte[] retVal = new byte[bitmap.PixelWidth * bitmap.PixelHeight * 4];
                  bitmap.CopyPixels(new Int32Rect(0, 0, bitmap.PixelWidth, bitmap.PixelHeight), retVal, bitmap.PixelWidth * 4, 0);

                  Bitmap b = new Bitmap(bitmap.PixelWidth, bitmap.PixelHeight);
                  int k = 0;
                  byte red, green, blue, alpha;
                  for (int i = 0; i < bitmap.PixelWidth; i++)
                  {
                      for (int j = 0; j < bitmap.PixelHeight && k < retVal.Length; j++)
                      {
                          alpha = retVal[k++];
                          blue = retVal[k++];
                          green = retVal[k++];
                          red = retVal[k++];

                          System.Drawing.Color c = new System.Drawing.Color();
                          c = System.Drawing.Color.FromArgb(alpha, red, green, blue);

                          b.SetPixel(i, j, c);
                      }
                  }

                  Image<Bgr, Byte> temp = new Image<Bgr, byte>(b);

                  this.ibOriginal.Image = temp;

                  this.sensor.AllFramesReady += this.sensor_AllFramesReady;

                  try
                  {
                      this.sensor.Start();
                  }
                  catch (IOException)
                  {
                      this.sensor = null;
                  }
              }
          }

          private void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
          {
              blobCount = 0;
              BitmapSource depthBmp = null;
              Image<Bgr, Byte> openCVImg;
              using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
              {
                  using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
                  {
                      if (depthFrame != null)
                      {

                          blobCount = 0;
                          if (colorFrame != null)
                          {
                              byte[] pixels = new byte[colorFrame.PixelDataLength];
                              colorFrame.CopyPixelDataTo(pixels);

                              int stride = colorFrame.Width * 4;
                              BitmapSource color = BitmapImage.Create(colorFrame.Width, colorFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels, stride);
                              openCVImg = new Image<Bgr, byte>(color.ToBitmap());
                          }
                          else
                          {
                              return;
                          }

                          Image<Gray, byte> gray_image;

                          using (MemStorage stor = new MemStorage())
                          {
                              gray_image = openCVImg.InRange(new Bgr(0, 0, 150), new Bgr(200, 200, 255));

                              gray_image = gray_image.SmoothGaussian(9);

                              CircleF[] circles = gray_image.HoughCircles(new Gray(100),
                                                                          new Gray(50),
                                                                          2,
                                                                          gray_image.Height / 4,
                                                                          10,
                                                                          400)[0];

                              foreach (CircleF circle in circles)
                              {
                                  CvInvoke.cvCircle(openCVImg,
                                                    new System.Drawing.Point(Convert.ToInt32(circle.Center.X), Convert.ToInt32(circle.Center.Y)),
                                                    3,
                                                    new MCvScalar(0, 255, 0),
                                                    -1,
                                                    LINE_TYPE.CV_AA,
                                                    0);

                                  openCVImg.Draw(circle,
                                                 new Bgr(System.Drawing.Color.Red),
                                                 3);
                              }
                          }
                          ibOriginal.Image = openCVImg;
                          ibProcessed.Image = gray_image;

                      }
                  }

              }
          }

       }
    }

using System;
using System.Globalization;
using System.IO;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using Microsoft.Kinect;
using System.ComponentModel;
using System.Runtime.InteropServices;
using Emgu.CV;

namespace VideoSurveilance
{
    public static class Helper
    {

        private const int MaxDepthDistance = 4000;
        private const int MinDepthDistance = 850;
        private const int MaxDepthDistanceOffset = 3150;

        public static BitmapSource SliceDepthImage(this DepthImageFrame image, int min = 20, int max = 1000)
        {
            int width = image.Width;
            int height = image.Height;

            //var depthFrame = image.Image.Bits;
            short[] rawDepthData = new short[image.PixelDataLength];
            image.CopyPixelDataTo(rawDepthData);

            var pixels = new byte[height * width * 4];

            const int BlueIndex = 0;
            const int GreenIndex = 1;
            const int RedIndex = 2;

            for (int depthIndex = 0, colorIndex = 0;
                depthIndex < rawDepthData.Length && colorIndex < pixels.Length;
                depthIndex++, colorIndex += 4)
            {

                // Calculate the distance represented by the two depth bytes
                int depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

                // Map the distance to an intesity that can be represented in RGB
                var intensity = CalculateIntensityFromDistance(depth);

                if (depth > min && depth < max)
                {
                    // Apply the intensity to the color channels
                    pixels[colorIndex + BlueIndex] = intensity; //blue
                    pixels[colorIndex + GreenIndex] = intensity; //green
                    pixels[colorIndex + RedIndex] = intensity; //red                    
                }
            }

            return BitmapSource.Create(width, height, 96, 96, PixelFormats.Bgr32, null, pixels, width * 4);
        }

        public static byte CalculateIntensityFromDistance(int distance)
        {
            // This will map a distance value to a 0 - 255 range
            // for the purposes of applying the resulting value
            // to RGB pixels.
            int newMax = distance - MinDepthDistance;
            if (newMax > 0)
                return (byte)(255 - (255 * newMax
                / (MaxDepthDistanceOffset)));
            else
                return (byte)255;
        }

        public static System.Drawing.Bitmap ToBitmap(this BitmapSource bitmapsource)
        {
            System.Drawing.Bitmap bitmap;
            using (var outStream = new MemoryStream())
            {
                // from System.Media.BitmapImage to System.Drawing.Bitmap
                BitmapEncoder enc = new BmpBitmapEncoder();
                enc.Frames.Add(BitmapFrame.Create(bitmapsource));
                enc.Save(outStream);
                bitmap = new System.Drawing.Bitmap(outStream);
                return bitmap;
            }
        }

        [DllImport("gdi32")]
        private static extern int DeleteObject(IntPtr o);

        /// <summary>
        /// Convert an IImage to a WPF BitmapSource. The result can be used in the Set Property of Image.Source
        /// </summary>
        /// <param name="image">The Emgu CV Image</param>
        /// <returns>The equivalent BitmapSource</returns>
        public static BitmapSource ToBitmapSource(IImage image)
        {
            using (System.Drawing.Bitmap source = image.Bitmap)
            {
                IntPtr ptr = source.GetHbitmap(); //obtain the Hbitmap

                BitmapSource bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                    ptr,
                    IntPtr.Zero,
                    Int32Rect.Empty,
                    System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());

                DeleteObject(ptr); //release the HBitmap
                return bs;
            }
        }

    }
} 
```

我真诚地感谢任何试图帮助我的人，并希望任何有类似问题的人都能从这个长长的问题中受益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-05T18:21:04.240

找到“蛮力”解决方案：

您必须手动将“cvextern.dll”文件放入您的构建目录（x64、调试、发布或其他*）*。

这可以完成工作。我不敢相信我花了一整天的时间来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T14:05:47.050

正如奥利弗所说，您的问题与这个问题非常相似：[EmguCV TypeInitializationException](https://stackoverflow.com/questions/11369684/emgucv-typeinitializationexception) 异常是由于无法访问某些 dll 作为 opencv_highgui220.dll 而引发的。在 CvInvoke 中你会找到 DLLImports，也许你应该插入一个断点并观察它会出现什么。

我想你已经从 emgu 网站上读过[这个](http://www.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp)

# mysql - 使用来自另一个表的列和新值的“插入”语法

> ID：15194312
> 
> 赞同：2
> 
> 时间：2013-03-04T03:53:37.983
> 
> 标签：mysql

我有一张`student`桌子和一张`takes`桌子。该`takes`表是学生已经学习或正在学习的课程，并包含以下列：

```
ID, course_id, sec_id, semester, year, grade 
```

我想使用`ID`from`student`但对于其他 5 列使用：

```
(CS-001, 1, Fall, 2009, NULL) 
```

我知道如何使用`insert into takes select, from, where`，也知道如何使用，`insert into takes values()`但我还没有看到任何混合来自另一个表的数据和我输入的新数据的东西。我们正在做的实验室应该全部在 MySQL 查询中完成，使用 phpMyAdmin。

我不善于解释事情，所以如果这没有意义，我很抱歉。感谢您的帮助。

这是我想要的那种查询：

```
insert into takes(ID, course_id, sec_id, semester, year, grade)
values(*IDs from student table*, CS-001, 1, Fall, 2009, NULL); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T04:29:23.113

像这样的东西应该用你的`takes`表中的数据填充你的`student`表，以及你想要的其余列的静态值：

```
INSERT INTO takes (ID, course_id, sec_id, semester, year, grade)
SELECT      ID, 'CS-001', 1, 'Fall', 2009, NULL
FROM        student
WHERE       dept_name = 'Comp. Sci.'; 
```

看看[这个问题](https://stackoverflow.com/q/25969/1563422)以获得更多帮助。

# html - “transform3d”不适用于位置：固定的孩子

> ID：15194313
> 
> 赞同：151
> 
> 时间：2013-03-04T03:53:47.030
> 
> 标签：html, css, css-position, css-transforms

我有一种情况，在正常的 CSS 情况下，一个固定的 div 将准确定位在它指定的位置（`top:0px`, `left:0px`）。

如果我有一个具有 translate3d 转换的父级，这似乎不受尊重。我没有看到什么吗？我尝试过其他 webkit-transform 样式和转换源选项，但没有运气。

我附上了一个带有示例的[JSFiddle](http://jsfiddle.net/GMX5H/1/)，我希望黄色框位于页面的顶角而不是容器元素的内部。

您可以在下面找到小提琴的简化版本：

```
#outer {
    position:relative; 
    -webkit-transform:translate3d(0px, 20px , 0px); 
    height: 300px; 
    border: 1px solid #5511FF; 
    padding: 10px;
    background: rgba(100,180,250, .8); 
    width: 80%;
}
#middle{
    position:relative; 
    border: 1px dotted #445511; 
    height: 300px; 
    padding: 5px;
    background: rgba(250,10,255, .6);
}
#inner {
    position: fixed; 
    top: 0px;
    box-shadow: 3px 3px 3px #333; 
    height: 20px; 
    left: 0px;
    background: rgba(200,180,80, .8); 
    margin: 5px; 
    padding: 5px;
}
```

```
<div id="container">
    Blue: Outer, <br>
    Purple: Middle<br>
    Yellow: Inner<br>
    <div id="outer"> 
        <div id="middle">
            <div id="inner">
                Inner block
            </div>
        </div>
    </div>
</div>
```

如何使 translate3d 与固定位置的孩子一起工作？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-03-06T19:31:47.480

这是因为根据[W3C 规范](http://www.w3.org/TR/css3-2d-transforms/#transform-rendering)`transform`创建了一个新的局部坐标系：

> 在 HTML 命名空间中，除了`none`转换之外的任何值都会导致创建堆栈上下文和包含块。该对象充当固定定位后代的包含块。

这意味着固定定位固定在转换后的元素上，而不是视口上。

目前没有我知道的解决方法。

它也记录在 Eric Meyer 的文章：[Un-fixing Fixed Elements with CSS Transforms](http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/)中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-31T18:59:07.850

正如 Bradoergo 建议的那样，只需获取窗口`scrollTop`并将其添加到绝对位置顶部，如：

```
function fix_scroll() {
  var s = $(window).scrollTop();
  var fixedTitle = $('#fixedContainer');
  fixedTitle.css('position','absolute');
  fixedTitle.css('top',s + 'px');
}fix_scroll();

$(window).on('scroll',fix_scroll); 
```

无论如何，这对我有用。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-07T15:48:07.073

当页面中的项目使用转换时，我的固定顶部导航闪烁，以下应用于我的顶部导航解决了跳跃/闪烁问题：

```
#fixedTopNav {
    position: fixed;
    top: 0;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
} 
```

[感谢这个答案](https://stackoverflow.com/questions/11258877/fixed-element-disappears-in-chrome)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-14T18:45:53.807

在 Firefox 和 Safari 中，您可以使用`position: sticky;`代替，`position: fixed;`但它在其他浏览器中不起作用。为此，您需要 javascript。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-07T23:32:08.113

在我看来，解决这个问题的最佳方法是应用相同的翻译，但将需要修复的子元素从其父（已翻译）元素中分离出来；然后将翻译应用于`position: fixed`包装器内的 div 。

结果看起来像这样（在你的情况下）：

```
<div style='position:relative; border: 1px solid #5511FF; 
            -webkit-transform:translate3d(0px, 20px , 0px); 
            height: 100px; width: 200px;'> 

</div>
<div style='position: fixed; top: 0px; 
            box-shadow: 3px 3px 3px #333; 
            height: 20px; left: 0px;'>
    <div style='-webkit-transform:translate3d(0px, 20px, 0px);'>
        Inner block
    </div>
</div> 
```

JSFiddle：[https ://jsfiddle.net/hju4nws1/](https://jsfiddle.net/hju4nws1/)

虽然这对于某些用例可能并不理想，但通常如果您正在修复一个 div，您可能不太关心它的父元素/它在 DOM 中的继承树中的位置，并且似乎解决了大部分令人头疼的问题- 同时仍然允许两者`translate`并`position: fixed`生活在（相对）和谐中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T12:29:52.647

我遇到了同样的问题。唯一的区别是我的“位置：固定”元素的“顶部”和“左侧”样式属性是从 JS 设置的。所以我能够应用修复：

```
var oRect = oElement.getBoundingClientRect(); 
```

oRect 对象将包含*真实的*（相对于视口）顶部和左侧坐标。所以你可以调整你的实际 oElement.style.top 和 oElement.style.left 属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-22T21:19:25.100

我有一个使用 -webkit-transform: translate3d 的画布侧边栏。这使我无法在页面上放置固定页脚。我通过在侧边栏初始化时添加到标签中的 html 页面上的一个类解决了这个问题，然后编写一个 css :not 限定符来声明“-webkit-transform: none;” 当 html 标记上不存在该类时，将其添加到 html 标记。希望这可以帮助解决同样问题的人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-06T13:59:02.770

尝试对子元素应用相反的变换：

```
<div style='position:relative; border: 1px solid #5511FF; 
            -webkit-transform:translate3d(0px, 20px , 0px); 
            height: 100px; width: 200px;'> 
    <div style='position: fixed; top: 0px; 
                -webkit-transform:translate3d(-100%, 0px , 0px); 
                box-shadow: 3px 3px 3px #333; 
                height: 20px; left: 0px;'>
        Inner block
    </div>
</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-30T19:08:19.557

在元素转换时添加一个动态类。`$('#elementId').addClass('transformed')`. 然后继续在css中声明，

```
.translat3d(@x, @y, @z) { 
     -webkit-transform: translate3d(@X, @y, @z); 
             transform: translate3d(@x, @y, @z);
      //All other subsidaries as -moz-transform, -o-transform and -ms-transform 
} 
```

然后

```
#elementId { 
      -webkit-transform: none; 
              transform: none;
} 
```

然后

```
.transformed {
    #elementId { 
        .translate3d(0px, 20px, 0px);
    }
} 
```

现在，当在子元素上`position: fixed`提供 a`top`和属性值时，它可以正常工作并保持固定，直到父元素转换​​。`z-index`当转换被恢复时，子元素会再次以固定方式弹出。如果您实际上使用的是在单击时切换打开和关闭的导航侧边栏，并且您有一个标签集，当您向下滚动页面时应该保持粘性，这应该可以缓解这种情况。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-09-03T04:07:37.920

解决此问题的一种方法是将相同的变换应用于固定元素：

```
<br>
<div style='position:relative; border: 1px solid #5511FF; 
            -webkit-transform:translate3d(0px, 20px , 0px); 
            height: 100px; width: 200px;'> 
    <div style='position: fixed; top: 0px; 
                -webkit-transform:translate3d(0px, 20px , 0px); 
                box-shadow: 3px 3px 3px #333; 
                height: 20px; left: 0px;'>
        Inner block
    </div>
</div> 
```

# asp.net-mvc - Kendo UI 级联 DropdownList 是如何工作的？

> ID：15194319
> 
> 赞同：1
> 
> 时间：2013-03-04T03:56:01.460
> 
> 标签：asp.net-mvc, kendo-ui, cascadingdropdown

任何人都可以向我解释此代码的结构吗？

例如`.Name("products")`名称`DropDownList`，我想知道那些是什么（你怎么称呼它（`Name`，，`OptionLabel`等）），因为它真的让我感到困惑。我被困在创建级联`DropDownList`.

```
@(Html.Kendo().DropDownList()
      .Name("products")
      .OptionLabel("Select product...")
      .DataTextField("ProductName")
      .DataValueField("ProductID")
      .DataSource(source => {
          source.Read(read =>
          {
              read.Action("Type", "ComboBox")
                  .Data("filterProducts");
          })
          .ServerFiltering(true);
      })
      .Enable(false)
      .AutoBind(false)
      .CascadeFrom("categories")
)
<script>
    function filterProducts() {
        return {
            categories: $("#categories").val()
        };
    }
</script> 
```

```
<p>
<label for="orders">Orders:</label>
@(Html.Kendo().DropDownList()
      .Name("orders")
      .OptionLabel("Select order...")
      .DataTextField("ShipCity")
      .DataValueField("OrderID")
      .DataSource(source => {
          source.Read(read =>
          {
              read.Action("SubType", "ComboBox")
                  .Data("filterOrders");
          })
          .ServerFiltering(true);
      })
      .Enable(false)
      .AutoBind(false)
      .CascadeFrom("products")
)
<script>
    function filterOrders() {
        return {
            products: $("#filterOrders").val()
        };
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T02:35:54.247

`.Name("orders")`：这是分配给下拉 html 元素的唯一名称。

`.OptionLabel("Select order...")`：这是未选择任何选项时下拉菜单应显示的内容。

`.DataTextField("ShipCity")`：这是填充应在下拉列表中显示的下拉选项的数据源的属性。

`.DataValueField("OrderID")`：这是绑定数据源的属性，它填充下拉选项，应用作绑定到视图底层模型的值。

`read.Action("SubType", "ComboBox")`：这定义了应该调用的 Action 和 Controller 来检索将填充下拉选项的集合

`.Data("filterOrders")`：这是用于为上述`read.Action`方法分配参数

`.ServerFiltering(true)`：

`.Enable(false)`：是否启用下拉菜单。

`.AutoBind(false)`：下拉菜单是否应立即绑定到其下拉数据源（或等待下拉菜单的级联被分配一个值）

`.CascadeFrom("products")`: 要级联的另一个 DropDownList。如果`AutoBind`为 false，则只有在用户为另一个下拉列表分配了值后，此下拉列表才会绑定到其选项数据源。

# c# - 不使用 Array.Sort 进行排序

> ID：15194327
> 
> 赞同：-3
> 
> 时间：2013-03-04T03:57:14.837
> 
> 标签：c#

我几乎不明白如何使用 if 语句和“for 循环”。另外现在我必须这样做

> 将数组中的整数元素从最低（元素 0）到最高（元素 4）排序。不要使用预先存在的 Array.Sort 方法；自己编码。

这是一个家庭作业问题，我什至不知道从哪里开始。有人可以帮我完成这个吗？

```
class Program
{
    static void Main(string[] args)
    {
        int i;
        double power = 0, sum = 0;
        int[] mArray = new int[5];

        Console.WriteLine("Please Enter Number Between 10 and 50 \nMake sure all of your Number entered correctly \notherwise you will need to enter everything again ");

        for (i = 0; i < mArray.Length; i++)
        {
            Console.WriteLine("Please enter your Number.");
            mArray[i] = Convert.ToInt32(Console.ReadLine());

            if (mArray[i] >= 50 || mArray[i] <= 10)
            {
                i--;
                Console.WriteLine("Please enter numbers only between 10 and 50.");

            }

        }

        for (i = 0; i < mArray.Length; i++)
        {
            sum = sum + (mArray[i]);
        }

        double mean = sum / mArray.Length;

        for (i = 0; i < mArray.Length; i++)
        {
            power += Math.Pow((mArray[i] - mean), 2);
        }

        double rMean = power / (mArray.Length - 1);

        Console.WriteLine("Mean {0}", mean);
        Console.WriteLine("Variance {0}", rMean);

        Console.WriteLine("Here is sorted numbers");

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:03:05.127

您可以尝试许多排序算法，例如[插入排序、](http://www.sorting-algorithms.com/insertion-sort) [选择排序](http://www.sorting-algorithms.com/selection-sort)、 [冒泡排序](http://www.sorting-algorithms.com/bubble-sort)、 [壳排序](http://www.sorting-algorithms.com/shell-sort)、 [合并排序](http://www.sorting-algorithms.com/merge-sort)、 [堆排序](http://www.sorting-algorithms.com/heap-sort)、 [快速排序](http://www.sorting-algorithms.com/quick-sort)等等。

# jquery - 使用代理时jQuery不显示事件命名空间

> ID：15194329
> 
> 赞同：0
> 
> 时间：2013-03-04T03:57:36.170
> 
> 标签：jquery, proxy, namespaces

在我的脚本中，我想要两种类型的点击功能，取决于点击的内容，我想在一个函数中完成。我决定用命名空间来做，但是控制台给了我未定义的；

这是代码：

```
$target1.on("click.Bst", $.proxy(self.selectNav, self));            

$target2.on("click.Bst.Type2", $.proxy(self.selectNav, self)); 
```

我的函数 selectNav() 在单击时执行，但是当我尝试获取 event.namespace （事件作为 s 函数参数传递）时，我得到了未定义。

```
selectNav: function(event){
 //other code runs  
 console.log(event.namespace);  //console log "undefined"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T11:33:17.207

`event.namespace`仅在通过`.trigger`（例如`$target1.trigger('click.Bst')`）触发事件时定义，而不是通过本机 DOM 事件。它与 . 无关`.proxy`。

我不得不承认[文档](http://api.jquery.com/event.namespace/)可能对此更清楚。

# macos - 文件夹中的新终端不使用默认设置

> ID：15194330
> 
> 赞同：2
> 
> 时间：2013-03-04T03:57:45.650
> 
> 标签：macos, terminal

我有 Mac OS X 山狮。我使用终端进行编程以运行我的编译器。我还打开了取景器窗口以便快速访问。我启用了“文件夹中的新终端”服务，因此当我右键单击目录并选择此选项时，它会打开一个新的终端窗口。问题是它没有使用我的默认设置打开窗口（我将终端默认设置为 Pro 设置）。有没有办法改变它，所以它使用我的默认终端设置？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-05T22:50:51.393

要更改新窗口/选项卡的默认设置：

首选项 > 设置 > [在左侧的配置文件侧栏中选择您想要的配置文件] > [单击侧边栏底部的“默认”按钮]

[这个超级用户帖子](https://superuser.com/questions/170273/make-pro-style-terminal-default-when-opening-new-tab-window)也解释了这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:22:24.977

事实证明，*默认*设置与终端首选项中的*启动*设置不同。我将两者都更改为 Pro，现在可以正常工作了！

# javascript - 使用 jQuery 链接到预定义的函数

> ID：15194333
> 
> 赞同：1
> 
> 时间：2013-03-04T03:57:51.730
> 
> 标签：javascript, javascript-events, jquery

我一直在尝试将最后一段代码链接起来以使其正常工作。

它调用了已预设的 2 个函数

```
slideToImage(newIndex);
setCaption(); 
```

我希望在图像滑动后设置标题

这对我来说一直是一个令人困惑的话题，因为我尝试了不同的调用方式，例如

```
callbacks = $.Callbacks();

callbacks.add(slideToImage(newIndex));
callbacks.add(setCaption());
callbacks.fire(); 
```

但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:03:31.247

对于“setCaption”，很简单：

```
callbacks.add(setCaption); 
```

对于“slideToImage”，由于需要传递参数，所以涉及的内容稍微多一些：

```
callbacks.add(function() { slideToImage(newIndex); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:17:53.673

`slideToImage`必须包含一些随时间发生的动画逻辑。所以`slideToImage`会开始动画过程，然后在动画完成之前返回，这会导致`setCaption`提前调用。

您应该作为回调`setCaption`传入，并在动画完成后调用它。`slideToImage`

```
function slideToImage(newIndex, callback) {
    // I assume you're using jQuery for animation
    targetElement.animate({left: 100}, 200, function() {
        // once animation has finished we call the callback function
        callback();
    });
}

slideToImage(newIndex, function() {
    setCaption();
}); 
```

# css - 对 DIV 中心的响应绝对位置

> ID：15194335
> 
> 赞同：0
> 
> 时间：2013-03-04T03:58:04.243
> 
> 标签：css

如何使蓝色框始终显示在红色框的中间。当我调整窗口大小时，蓝色框的位置错误。在线示例：http: [//jsfiddle.net/NVjPF/](http://jsfiddle.net/NVjPF/) 。谢谢

```
<div id="box1">
    <div id="box2"></div>
</div>

#box1{
display: block;
background:red;
background-size: 100%;
position: relative;
padding-bottom: 60%;
}

#box2{
    display:block;
    background:blue;
    position:absolute;
    height:70px;
    width:70px;
    right:50%;
    top:50%;
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T04:32:23.717

正如其他人所说，您需要添加

```
margin:-35px -35px 0 0; 
```

使框正确居中。屏幕大小无关紧要，它永远不会真正居中到盒子的中间。这样做的原因是因为浏览器占据了框的右上角，并将其放在框的中间。所以在某种意义上，盒子是居中的。如果您将框设置为`left:50%;`而不是`right:50%;`，则框将以左上角为中心。所以要解决这个问题，你需要一半的宽度和高度，因为这将等于盒子的中心。

此外，考虑到盒子脱离红色盒子，我添加`overflow:auto;`了在需要时创建滚动条。如果您不想要滚动条，则可以将其更改为`overflow:hidden`. 如果您不想要任何突出，任何一个都可以工作。

[http://jsfiddle.net/burn123/NVjPF/3/](http://jsfiddle.net/burn123/NVjPF/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:00:58.757

您可以使用负边距来解释差异。在这种情况下，您可以添加：

```
margin-right: -35px;
margin-top: -35px; 
```

`35px`源于内部元素大小的一半。有关现场演示，请参见[http://jsfiddle.net/NVjPF/1/](http://jsfiddle.net/NVjPF/1/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T04:01:52.240

尝试这个。基本上，您将盒子移动到父对象内部的一半，然后使用等于盒子宽度和高度一半的负边距将其带回死点。

```
#box2 {
display:block;
background:blue;
position:absolute;
height:70px;
width:70px;
right:50%;
top:50%;
margin:-35px -35px 0 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-29T10:26:07.207

试试看，对我来说效果很好：

```
#box2 {transform: translate(-50%, 0%);} 
```

# jms - 从 MDB 中获取队列名称

> ID：15194336
> 
> 赞同：0
> 
> 时间：2013-03-04T03:58:07.160
> 
> 标签：jms, websphere

我有 2 个 Websphere 应用程序服务器（WAS）应用程序，一个发送消息，另一个读取和处理它。我需要在阅读应用程序中知道队列名称以进行下游处理。我正在尝试使用以下代码获取队列名称（在阅读应用程序中）。但是我得到 NullPointerException 因为`getJMSDestination`正在返回`null`。

```
Queue queue = (Queue)message.getJMSDestination();
logger.info("Queue ID: "+queue.getQueueName()); 
```

请注意，队列名称是通过发送应用程序中的目标对象设置的。我在发送应用程序中是否缺少任何其他参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:11:01.560

消息应该将目的地存储在其`JMSDestination`属性中，您可以尝试获取它而不是使用`getJMSDestination()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:13:48.200

我将 Spring 与 ActiveMQ 一起使用，这似乎对我有用：

```
 public void processMessage( Message msg )
    {
       // Get the queue name from the supplied Message.
       String sourceQueueName = "UNKNOWN";
       try
       {
           ActiveMQDestination sourceQueue = (ActiveMQDestination) msg.getJMSDestination();
           sourceQueueName = sourceQueue.getPhysicalName();
       }
       catch ( JMSException e )
       {
           LOGGER.error( "Cannot get JMSDestination from Message: " + msg, e );
       }
       .... 
```

WAS 是否有一个可以强制转换的 Queue 对象，该对象公开了类似的方法？

# php - 重新声明 file_get_html() 的方法？

> ID：15194337
> 
> 赞同：0
> 
> 时间：2013-03-04T03:58:16.183
> 
> 标签：php

我正在使用 html 解析器来抓取 html，然后对其进行格式化，以便可以将其插入数据库。

```
require_once('simple_html_dom.php');

$url = "http://www.site.com/url/params/"
$html = file_get_html($url);

//  The team links are stored in the div.thumbHolder
foreach($html->find('.logoWall li') as $e)
{
    ob_start();
    sportPics($e, $league);
} 
```

sportsPics() 函数是这样的：

```
function sportsPic()
{
    require('simple_html_dom.php');

    foreach($e->find('a') as $a)
    {
//               Execute code                       
    }
} 
```

我得到一个错误阅读：

```
Fatal error: Cannot redeclare file_get_html() 
```

我认为将 require() 更改为 require_once() ，反之亦然。但是，它没有。我还认为缓冲区可能会起作用，但我不太了解它们是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:00:54.457

不要再这样做了——

```
 require('simple_html_dom.php'); 
```

在`sportsPic()`功能上。

**更新**- 您的函数定义`function sportsPic()`不带任何参数。但是看看这条线——

```
sportPics($e, $league); 
```

重新定义你的函数来接受参数。

您正在传递参数，但该函数无法访问它们，因为它不接受任何参数。因此，你`$e`是一个非对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:04:28.797

把这个侧面的sportsPic（）函数

```
 require('simple_html_dom.php'); 
```

你在一个循环中一次又一次地调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:06:37.673

```
foreach($html->find('.logoWall li') as $e){
    foreach($e->find('a') as $a){
        // Execute code
    }
} 
```

# c++ - 3D 应用程序中基于 WebKit 的 UI

> ID：15194341
> 
> 赞同：0
> 
> 时间：2013-03-04T03:58:51.123
> 
> 标签：c++, webkit

我想在 C++ 中使用 WebKit 在 Windows 上创建 3D 游戏 UI。这样设计者就能使用 HTML 和 JavaScript。（我将使用[http://sourceforge.net/projects/wke](http://sourceforge.net/projects/wke)或我的代码）

我的问题是：我需要从 UI 调用 C++ 中的函数，比如说当 UI 中的某个按钮单击时，这将触发 C++ 中的代码。

这可以通过实现中间 Javascript 文件来实现吗？如果是，怎么做？

如果没有，是否需要修改 WebKit 源代码？（捕捉基于网络的事件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:23:01.573

[wke](http://sourceforge.net/projects/wke/)有自己的 C/C++ 边界，所以你只需要学习它！

# mongodb - 如何关闭mongodb中的副本集？

> ID：15194342
> 
> 赞同：12
> 
> 时间：2013-03-04T03:59:10.473
> 
> 标签：mongodb, mongodb-replica-set

我使用ubuntu。

我启动三个mongod副本集如下：

```
$ mongod --replSet setname --logpath "1.log" --dbpath /data/rs1 --port 27017 --smallfiles --fork
$ mongod --replSet setname --logpath "2.log" --dbpath /data/rs2 --port 27018 --smallfiles --fork
$ mongod --replSet setname --logpath "3.log" --dbpath /data/rs3 --port 27019 --smallfiles --fork 
```

我怎样才能关闭它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T08:07:15.590

从 Unix shell 运行以下命令：

```
mongo --port 27017 --eval 'db.adminCommand("shutdown")'
mongo --port 27018 --eval 'db.adminCommand("shutdown")'
mongo --port 27019 --eval 'db.adminCommand("shutdown")' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-02T05:53:29.830

我不认为接受的答案是正确的。经过一番谷歌搜索，我在 mongodb-user 组中发现[这](https://groups.google.com/forum/#!topic/mongodb-user/eYP8HQKPzfk)是最好的答案。

> 要关闭：
> -`db.runCommand({ replSetFreeze: numOfSeconds })`在辅助节点上运行以防止升级到主节点
> -`rs.stepDown(seconds)`在主节点上运行；在下台之前，它将检查以确保至少有一个辅助节点足够赶上 oplog。选择一个合理的长等待时间。
> - 一旦一切都是次要的，`db.shutdownServer()`一切都
> 
> 要启动：
> -`rs.freeze(seconds)`在两个辅助节点上运行较长的超时时间（例如，1-2 分钟）
> - 启动主
> 节点 - 使用 stepDown 修复以防辅助节点以某种方式变为主节点

仅仅关闭是不够的，您必须防止辅助节点升级为主节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-16T13:34:21.937

1) 在辅助服务器上登录 mongo shell

2）使用以下命令停止辅助服务器：

```
use admin
db.shutdownServer() 
```

2] 转到辅助服务器上的 Linux shell- 并键入以下命令：

```
sudo service mongod stop 
```

欲了解更多信息，请查看以下链接：

[http://www.tutespace.com/2016/03/stopping-and-starting-mongodb.html](http://www.tutespace.com/2016/03/stopping-and-starting-mongodb.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T06:33:58.370

使用`ps -ef | grep mongod`，获取端口号为 27017-27019 的 mongod 的 pid，并使用该 pid 终止进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T07:43:28.997

```
mongod --port 27017 --shutdown 
mongod --port 27018 --shutdown
mongod --port 27019 --shutdown 
```

顺便说一句，如果将来有可能使用分片，最好避免使用 27018 和 27019 端口。这些是分片集群某些组件的默认端口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-15T15:00:07.900

在 Windows 上的 MongoDB 3.2 中，我使用以下序列：

```
mongo mongodb://localhost:27019/admin --eval "db.shutdownServer({timeoutSecs: 10})"
mongo mongodb://localhost:27018/admin --eval "db.shutdownServer({timeoutSecs: 10})"
mongo mongodb://localhost:27017/admin --eval "db.shutdownServer({timeoutSecs: 10})" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-19T21:21:44.487

首先关闭辅助服务器以防止回滚。

```
mongo admin --port <port> --eval "<db.auth if needed>;db.shutdownServer()" 
```

来源：mongodb大学课程

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-04T12:48:43.290

这是一个老问题，但我仍然认为我应该回答这个问题。

在 unix shell 中运行以下命令

`ps -ef | grep mongo`

这将为您提供与端口`27017`和. 您可以使用 pid 杀死副本集的所有成员`27018``27019`

# xcode4.5 - Objective-c 是否要求您为 UIPickerViews 的每个实例都有不同的类

> ID：15194343
> 
> 赞同：1
> 
> 时间：2013-03-04T03:59:19.087
> 
> 标签：xcode4.5, objective-c-2.0, uipickerviewcontroller

![我的应用程序中三个从 SearchViewController 类运行的搜索页面之一](../Images/4eeb2370ced0e89c22ebb3257f844117.png)

我有三个不同的搜索页面都在我的搜索视图控制器上运行。每个都有不同的搜索方法，但屏幕基本相同。选择器中的选择将填充文本字段，而 lat 和 long 是设备的，它会不断更新并显示在这些字段中。我的问题是，为了充分添加正确的数据并遵守 UIPickerViewDelegate，我是否需要再添加三个类来运行这些选择器视图，或者是否允许在 SearchViewController 类中进行工作以定义 PickerView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:41:19.567

让 SearchViewController 成为每个单独的 UIPickverView 的代表是允许的（并且可能更可取）。请记住`<UIPickerViewDelegate>`在 SearchViewController 的界面上包含注释（如`@interface SearchViewController : UIViewController <UIPickerViewDelegate>`），如果您缺少任何必需的方法，编译器会提醒您；但是从 6.1 开始，UIPickerViewDelegate 协议中没有必需的方法。

请注意，UIPickerViewDelegate 协议中的每个方法都将 UIPickerView 作为其第一个参数。检查该参数以查看它是否等于您的三个单独的 UIPickerViews 中的每一个（它当然应该等于其中一个！）并根据需要为每个视图修改委托方法的行为。你最终会得到这样的代码：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    if (pickerView == self.myFirstPickerView) {
        return self.myFirstSearchMethodResultTitles[row];
    } else if (pickerView == self.mySecondPickerView) {
        return self.mySecondSearchMethodResultTitles[row];
    } else if (pickerView == self.myThirdPickerView) {
        return self.myThirdSearchMethodResultTitles[row];
    } else {
        NSAssert(NO, @"Should not have reached this point!");
        return nil;
    }
} 
```

# mysql - 了解 SQL 自联接

> ID：15194344
> 
> 赞同：0
> 
> 时间：2013-03-04T03:59:32.190
> 
> 标签：mysql, join, self-join

我正在尝试了解 SQL 自联接。我有下表“人员”，其中包含员工的名字、姓氏、地址和城市（来源 W3Schools）：

```
mysql> select * from persons;
+------+-----------+-----------+--------------+-----------+
| P_id | LastName  | FirstName | Address      | City      |
+------+-----------+-----------+--------------+-----------+
|    1 | Hansen    | Ola       | Timoteivn 10 | Sandnes   | 
|    2 | Svendson  | Tove      | Borgvn 23    | Sandnes   |
|    3 | Pettersen | Kari      | Storgt 20    | Stavanger |
+------+-----------+-----------+--------------+-----------+ 
```

我现在想返回与“Hansen Ola”具有相同城市的员工姓名。所以我写了一个自加入，它工作正常：

```
mysql> select p1.Lastname, p1.firstname from persons p1, persons p2 where p1.city =    p2.city and p2.lastname = 'Hansen';
+----------+-----------+
| Lastname | firstname |
+----------+-----------+
| Hansen   | Ola       |
| Svendson | Tove      |
+----------+-----------+ 
```

但是，如果我将别名 p2 更改为 p1 即 p2.lastname = 'Hansen' 到 p1.lastname = 'Hansen'，那么我不会得到两个员工的姓名。

```
mysql> select p1.Lastname, p1.firstname from persons p1, persons p2 where p1.city = p2.city and p1.lastname = 'Hansen';
+----------+-----------+
| Lastname | firstname |
+----------+-----------+
| Hansen   | Ola       |
| Hansen   | Ola       |
+----------+-----------+ 
```

有人可以帮我理解为什么将别名从 p2 更改为 p1 会改变结果吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:17:55.170

让我突出显示您的查询，希望它会更有意义：

```
select p1.lastname, ...
from persons p1, persons p2
where ... and p1.lastname = 'Hansen' 
```

因此，您将结果限制为仅返回第一个表 p1 中的记录。同时，您将第一个表限制为只有 lastname = 'Hansen' 的表。如果您描绘不受限制的结果集，它可能更有意义（我删除了该`WHERE`子句的模棱两可部分以显示完整的产品）：

```
select p1.Lastname as p1_lastname, p2.lastname as p2_lastname
from persons p1, persons p2
where p1.city = p2.city

P1_LASTNAME     P2_LASTNAME
Hansen  Hansen
Svendson    Hansen
Hansen  Svendson
Svendson    Svendson
Pettersen   Pettersen 
```

如果您采用上述结果集并添加条件`p1.lastname = "Hansen"`，那么您只会从中得到 'Hansen' 也就不足为奇了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:09:58.917

这个查询有点奇怪，我不确定它在现实中的依据是什么。本质上，它将一个表与自己的城市列匹配，然后指定`lastname`其中一个表的，这限制了结果。如果您这样做`SELECT *`而不是只选择有限的行，您可以看到该表正在与其自身交叉连接，并且它正在返回由`city`and`lastname`要求过滤的行的叉积。实际结果是：

```
p1.firstname, p1.lastname, p2.firstname, p2.lastname
Hansen        Ola          Hansen        Ola
Hansen        Ola          Svendson      Toda 
```

由于条件颠倒，这在原始查询中被颠倒了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:07:21.590

您的查询仅返回那些包含“汉森”​​的行。它没有跟随自我加入。

# python - 使用 Scrapy 抓取 MITOPENCOURSEWARE 网站的教学大纲

> ID：15194347
> 
> 赞同：0
> 
> 时间：2013-03-04T04:00:08.850
> 
> 标签：python, regex, scrapy

我的蜘蛛抓取 MITOPENCOURSEWARE 网站的教学大纲不起作用。有人可以帮我弄清楚它有什么问题吗？.* 代表所有课程。这是正确的吗？

```
 1 from scrapy.contrib.spiders import CrawlSpider, Rule
  2 from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
  3 from scrapy.selector import HtmlXPathSelector
  4 from opensyllabi.items import OpensyllabiItem
  5 
  6 class MITSpider(CrawlSpider):
  7     name = 'mit'
  8     allowed_domains = ['ocw.mit.edu']
  9     start_urls = ['http://ocw.mit.edu/courses']
 10     rules = [Rule(SgmlLinkExtractor(allow=['/.*/.*/syllabus']), 'parse_syllabus')]
 11 
 12     def parse_syllabus(self, response):
 13         x = HtmlXPathSelector(response)
 14 
 15         syllabus = OpensyllabiItem()
 16         syllabus['url'] = response.url
 17         syllabus['body'] = x.select("//div[@id='course_inner_section']").extract()
 18         return syllabus 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:55:57.700

尝试：

```
rules = [
    Rule(SgmlLinkExtractor(allow=r'/[^/]+/[^/]+/syllabus'), 'parse_syllabus'),
    Rule(SgmlLinkExtractor()),
] 
```

获取第一页上的所有链接，然后注意，这是很多链接。

# ios - 如何在 SplitViewController 上显示 LoginViewController？

> ID：15194348
> 
> 赞同：2
> 
> 时间：2013-03-04T04:00:09.873
> 
> 标签：ios, objective-c, xcode, model-view-controller, uisplitviewcontroller

我正在开发具有 CustomTabBar（3 个选项卡）、导航栏和 SplitView 控制器的 iPad 应用程序。

应用程序屏幕如下：

1-登录屏幕（通过 SplitView 呈现）>> 忘记密码（按登录导航）

2-如果在登录导航上推送忘记密码，它将被弹出，然后登录将在成功登录时被取消。

3- 成功登录后，会显示 SplitView。

我如何在 AppDelegate 中编码：

> self.detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil] autorelease]; UINavigationController *detailNavigationController = [[[UINavigationController alloc] initWithRootViewController:self.detailViewController] autorelease];

```
customTabBarCont = [[CustomTabBarController alloc] init];
self.splitViewController = [[[UISplitViewController alloc] init] autorelease];
self.splitViewController.delegate = self.detailViewController;
NSArray *viewControllers = [[[NSArray alloc] initWithObjects:customTabBarCont,detailNavigationController, nil] autorelease];
self.splitViewController.viewControllers = viewControllers;
self.detailViewController.splitViewController = self.splitViewController;
self.window.rootViewController = self.splitViewController;
[self.window makeKeyAndVisible];

loginVC =  [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];
UINavigationController *loginNavigationController = [[[UINavigationController alloc] initWithRootViewController:loginVC] autorelease];
[self.splitViewController presentViewController:loginNavigationController animated:NO completion:nil]; 
```

我有 SettingViewController，我在其中提供了注销功能。

当用户从 Portrait 注销并在 LandscapeView 中登录时，它会产生问题

我如何为 SignOut 编码

```
 self.loginVC =  [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];

if ([app_delegate.detailViewController.masterPopoverController isPopoverVisible]) {
                [app_delegate.detailViewController.masterPopoverController dismissPopoverAnimated:NO];
            }
      UINavigationController *loginNavigationController = [[[UINavigationController alloc] initWithRootViewController:self.loginVC] autorelease]; 
```

![纵向注销后的横向模式](../Images/6d4bf26fb7422dee9165fb166067687a.png)

当我们再次旋转时，一切顺利。但是如何解决这个问题。或者我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:46:18.137

您只需在 DetailViewController.m 中添加一种方法

```
- (BOOL)splitViewController:(UISplitViewController*)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {
return NO;
} 
```

运行你的项目，看看会发生什么。Surly这将解决您的问题

# java - 简单数组：检查值是否匹配

> ID：15194350
> 
> 赞同：2
> 
> 时间：2013-03-04T04:00:24.883
> 
> 标签：java, arrays

我只是想查看输入的值是否与数组中已经存在的值匹配，以及它是否返回“有效”。我意识到这很简单，但我无法让它工作：

```
 public static void main(String[] args) {

        Scanner keyboard = new Scanner(System.in);
        String[] accountNums = { "5658845", "8080152", "1005231", "4520125", "4562555",
                                 "6545231", "7895122", "5552012", "3852085", "8777541", 
                                 "5050552", "7576651", "8451277", "7881200", "1302850", 
                                 "1250255", "4581002" };

        String newAccount;
        String test = "Invalid";

        newAccount = keyboard.next();

        for (int i = 0; i < accountNums.length; i++)
        {        
            if(newAccount == accountNums[i])
            {
                test = "Valid";
            }
        }

        System.out.println(test);
    }
} 
```

感谢您的任何帮助（和耐心）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T04:02:24.067

使用等于方法。[在这里](https://stackoverflow.com/questions/1643067/whats-the-difference-between-equals-and)查看为什么。

```
if (newAccount.equals(accountNums[i])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T04:06:25.757

Jayamohan 的回答是正确且有效的，但我建议使用整数而不是字符串。这是一种更有效的方法，因为 CPU 处理数字（整数）比处理字符串要容易得多。

在这种情况下必须做的是将 s 更改为s 而不是`newAccount`s并从初始化中删除所有引号。您可以调用而不是调用，它返回一个整数。if 语句就可以了。`accountNums``int``String``accountNums``keyboard.next()``keyboard.nextInt()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:46:41.703

你为什么使用数组？

```
List<String> accountNums = Arrays.asList( "5658845", "8080152", "1005231", "4520125", "4562555",
     "6545231", "7895122", "5552012", "3852085", "8777541", 
     "5050552", "7576651", "8451277", "7881200", "1302850", 
     "1250255", "4581002" );

String test = "Invalid"; 
```

然后你只需要这个（没有循环）：

```
if (accountNums.contains(newAccount)) {
    test = "Valid";
} 
```

此外，它更易于阅读和理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-13T00:08:06.153

你不能用 == 比较字符串你必须使用 .equals()

# php - 是否可以从 PHP 网页上的 DLL 调用方法？

> ID：15194351
> 
> 赞同：1
> 
> 时间：2013-03-04T04:00:33.040
> 
> 标签：php, mysql, dll

我和一个朋友正在开发一个 C# windows 应用程序。他负责设计应用程序，而我负责 API。

我创建了一个 DLL，应用程序将使用它来处理大多数 MySQL 查询。我还在制作一个与应用程序一起使用的网站，并希望在服务器上制作一个较小版本的应用程序（我应该添加它是 Linux）并让它在网页上运行。

所以我想知道是否有一种方法可以在 PHP 页面中从我的 DLL 调用方法，或者我是否最好使用 PHP 脚本或类似的东西查询数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:03:46.130

您不能在 Linux 服务器上使用 Windows DLL。也许有一些方法可以用 Wine 破解一些东西......我不确定，但这无疑比它的价值更麻烦。

您可以在 PHP 中使用 COM DLL 和 .NET 程序集。请参阅文档： http: [//php.net/manual/en/book.com.php](http://php.net/manual/en/book.com.php)

如果您所做的只是进行 MySQL 查询，那么使用 PDO 或 MySQLi 肯定会更好。这将大大简化事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:04:10.777

我建议让 DLL（我假设它是一个托管程序集）公开 REST 或 SOAP Web 服务并通过 PHP 使用这些服务。

# debugging - 无效空指针异常

> ID：15194354
> 
> 赞同：0
> 
> 时间：2013-03-04T04:01:03.697
> 
> 标签：debugging

我在这段代码中遇到错误：

```
#include <stdio.h>
#include <cv.h>
#include <highgui.h>

using namespace std;

 int main( int argc, char** argv )

 {
 //load color img specified by first argument
 //IplImage *img = cvLoadImage( argv[1]);
  IplImage *img = cvLoadImage(argv[1], CV_LOAD_IMAGE_COLOR );

 IplImage *red = cvCreateImage(cvSize(img->width, img->height ),img->depth,img->nChannels);

 IplImage *green = cvCreateImage(cvSize(img->width, img->height ),img-  >depth,img>nChannels);

 IplImage *blue = cvCreateImage(cvSize(img->width, img->height ),img->depth,img->nChannels);

// setup the pointer to access img data 
uchar *pImg   = ( uchar* )img->imageData;

// setup pointer to write data 
uchar *pRed   = ( uchar* )red->imageData;
uchar *pGreen = ( uchar* )green->imageData;
uchar *pBlue  = ( uchar* )blue->imageData;    

int i, j, rED, gREEN, bLUE, byte;
  for( i = 0 ; i < img->height ; i++ ) 
{

  for( j = 0 ; j < img->width ; j++ ) 
{
 rED = pImg[i*img->widthStep + j*img->nChannels + 2];

 gREEN = pImg[i*img->widthStep + j*img->nChannels + 1];
 bLUE = pImg[i*img->widthStep + j*img->nChannels + 0];
 // RED

 pRed[i*img->widthStep + j*img->nChannels + 2] = rED;
 // GREEN
 pGreen[i*img->widthStep + j*img->nChannels + 1] = gREEN;

 // BLUE
 pBlue[i*img->widthStep + j*img->nChannels + 0] = bLUE;
 }
}
// save images

cvSaveImage( argv[2], red );
cvSaveImage( argv[3], green );
cvSaveImage( argv[4], blue );

return 0;
} 
```

错误是调试断言失败。表达式：无效的空指针

这是一段有断点的代码。

```
#ifdef _DEBUG
 _CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const wchar_t *message,
const wchar_t *file, unsigned int line)

   {    // report error and die
    if(::_CrtDbgReportW(_CRT_ASSERT, file, line, NULL, message)==1)
    {
        ::_CrtDbgBreak();
    }
} 
```

黄色箭头指向 ::_CrtDbgBreak()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:04:21.150

也许不是该片段中唯一的问题，但这一行有一个错字：

`IplImage *green = cvCreateImage(cvSize(img->width, img->height ),img->depth,img>nChannels);`

你过去了`img>nChannels`，不是`img->nChannels`

# python - Django admin - 显示其值的外键（不是内联）

> ID：15194356
> 
> 赞同：0
> 
> 时间：2013-03-04T04:01:28.343
> 
> 标签：python, django, django-models, django-admin

本周早些时候，我问了这个关于在你的子类中在你的主模型中使用外键的问题：[Django Form With Foreign Key](https://stackoverflow.com/questions/15145774/django-form-with-foreign-key)

我使用给出的答案来制作模型和子模型（最后的代码）。我的问题是，我知道外键的管理内联，但我不能使用它，因为主模型具有子类的外键，而不是相反。我希望我的主类中的外键显示在管理员中。

抱歉，这听起来令人困惑，这是我的模型：

**子类 1 预观察**

```
class PreObservation( models.Model ):                                
    pre_observation = models.CharField(                              
                        max_length=255,                          
                        choices=OBS_STANDARD_TYPES,              
                        verbose_name="Pre-Observation Standard"  
                    )                                            
    obs__meter_reading = models.FloatField( blank=True, null=True )  
    obs_if_other = models.FloatField( blank=True, null=True ) 
```

**子类 2 FieldObservation**

```
class FieldObservation( models.Model ):                                                          
      site_id = models.CharField( max_length=255, choices=STATION_CHOICES )                        
      site_name = models.CharField( max_length=255 )                                               
      stage_reading = models.FloatField( )                                                         
      specific_conductance = models.FloatField( )                                                  
      water_temp = models.FloatField( ) 
```

**主课记录**

```
class Record( models.Model ):                                                                    
      observers = models.CharField( max_length=255, verbose_name="Name of Observer(s)")            

      pre_observation_standard_1 = models.ForeignKey(                                              
                                 PreObservation,                                              
                                 related_name="pre_observation_1"                             
                             )                                                                
      pre_observation_standard_2 = models.ForeignKey(                                              
                                 PreObservation,                                              
                                 related_name="pre_observation_2",                            
                                 blank=True, null=True                                        
                             )                                                                

      field_observation_1 = models.ForeignKey(                                                     
                         FieldObservation,                                                    
                         related_name="field_observation_1"                                   
                       )                                                                      
      field_observation_2 = models.ForeignKey(                                                     
                         FieldObservation,                                                    
                         related_name="field_observation_2",                                  
                         blank=True, null=True                                                
                       )                                                                      

      cloud_coverage = models.CharField( max_length=255, choices=CLOUD_COVERAGE )                  
      rain_past_three_days = models.BooleanField( verbose_name="Rain in Past 3 Days" )             
      snow = models.BooleanField( )                                                                
      snow_melt = models.FloatField( )                                                             
      temperature = models.CharField( max_length=255, choices=TEMPERATURE )                        
      wind = models.CharField( max_length=255, choices=WIND )                                      
      field_notes = models.TextField( )                                                            
      teachers_comments = models.TextField( )                                                      

      user = models.ForeignKey( User )                                                             
      group_name = models.CharField( max_length=255, blank=True ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:46:48.780

您可以使用

```
 class RecordAdmin(admin.ModelAdmin):
  list_display = ('pre_observation__pre_observation_standard_1', 
                'pre_observation__pre_observation_standard_2', )

  admin.site.register(Record, RecordAdmin) 
```

# nhibernate - 如何在 NHibernate 中与 null 建立一对一的关系？

> ID：15194359
> 
> 赞同：4
> 
> 时间：2013-03-04T04:02:22.063
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, nhibernate-criteria

我有两个具有一对一关系的 NHibernate 实体。让我们称他们为狗和主人。

```
public class Dog 
{
    public virtual int Id { get;set; }
    public virtual Owner Owner { get; set; }
}

public class Owner 
{
    public virtual int Id { get; set; }
    public virtual Dog Dog { get; set; }
} 
```

Dog 可能有一个或零个所有者。Fluent/NHibernate 映射如下：

```
public class DogMap : ClassMap<Dog> 
{
    public DogMap() 
    {
        Table("Dogs");

        Id(x => x.Id);

        HasOne( x=> x.Owner)
            .Fetch.Join()
            .Not.LazyLoad();
    }
}

public class OwnerMap : ClassMap<Owner> 
{
    public OwnerMap() 
    {
        Table("Owners");

        // Owners share the same primary-key as dogs
        Id(x => x.Id).GeneratedBy.Foreign("Dog"); 

        References( x => x.Dog)
            .Unique()
            .Not.LazyLoad();
   }
} 
```

现在我只想选择*没有 Owner 的 Dogs*。

我假设查询是：

```
Owner owner = null;
var ownerlessDogs = session
    .QueryOver<Dog>()
    .Left.JoinAlias(x => x.Owner, () => owner)
    // Restrict on alias
    .WhereRestrictionOn(() => owner).IsNull
    .List(); 
```

但正如您可能已经猜到的那样，这是行不通的。它抛出'对象引用未设置为...'。

如果我尝试，

```
var ownerlessDogs = session
    .QueryOver<Dog>()
    .Left.JoinAlias(x => x.Owner, () => owner)
    // Restrict on property of root object
    .WhereRestrictionOn(x => x.Owner).IsNull
    .List(); 
```

它生成基本上生成

```
SELECT {{relevant columns}}
FROM Dogs dogs
LEFT OUTER JOIN OWNERS owners
WHERE dogs.Id IS NULL 
```

几乎是对的，但它是过滤狗的主键，而不是狗的外键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T06:40:50.917

[在 Hibernate 论坛上一篇旧帖子的](https://forum.hibernate.org/viewtopic.php?p=2398120)帮助下，我找到了一个解决方案：

```
public class DogMap : ClassMap<Dog> {

    public DogMap() {
        Table("Dogs");
        Id(x => x.Id);

        HasOne( x=> x.Owner)
          .Fetch.Join();
    }
}

public class OwnerMap : ClassMap<Owner> {

   public OwnerMap() {

   Table("Owners");

   //owners share the same primary-key as dogs
   Id(x => x.Id).GeneratedBy.Foreign("Dog"); 

   //both sides should be mapped as HasOne
   HasOne( x => x.Dog)
     .Constrained()
     .Fetch.Join();
   }
} 
```

工作查询是

```
var ownerlessDogs = session
  .QueryOver<Dog>()
  .Left.JoinAlias(x => x.Owner, () => owner)
  //this is the trick, restrict on Id
  .WhereRestrictionOn( x => x.Owner.Id ).IsNull
  .List(); 
```

# javascript - 将删除的文件附加到

> ID：15194365
> 
> 赞同：8
> 
> 时间：2013-03-04T04:03:09.877
> 
> 标签：javascript, html, file-upload, filereader

我不确定这是否可能，我正在使用 jQuery 编写自己的文件上传插件，效果很好，但我想做的是通过允许用户从桌面删除文件来增强用户体验进入一个 div 并将该文件附加到我的输入

我有拖放工作，与上传相同，但目前拖放与多个上传是分开的。

所以在我的 html5 drop 函数中，我想做这样的事情：

```
<div id="dropZone"></div>
<!--Drop area is seperate from the fileUpload below-->
<form enctype="multipart/form-data">
    <input class="clear" name="nonImagefilesToUpload[]"  id="nonImagefilesToUpload" type="file" multiple/>
</form>

this.drop = function(e){
    e.stopPropagation();
    e.preventDefault();
    files = e.dataTransfer.files ; 
    for (var i = 0, file; file = files[i]; i++) {

        //pseudo code
        if ( !file.type.match(settings.imageTypeMatch )) {
            //not an image so I want to append it to my files array
            $('#nonImagefilesToUpload').append( file[i] );
            //hoping this will also trigger my input change

        }else{
            var reader = new FileReader();
            reader.onload = (function(aFile) {
            return function(evt) {
                if (evt.target.readyState == FileReader.DONE) 
                {
                    //code to handle my images
                    //which are uploaded seperate via xhr
                }   
            })(file);//done reading the file

            //read the file
            reader.readAsDataURL(file);
        }
    }

    return false;
}; 
```

如果有人可以提供帮助，将不胜感激，由于证券原因，这可能是不可能的，但我想我会问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T04:20:08.767

你是对的。您不能更改`file`输入字段的值。

* * *

*编辑：*

从 2017 年开始，您可以将拖放的文件设置为文件输入。请参阅[在页面上放置文件时如何设置文件输入值？](https://stackoverflow.com/a/47522812/584192)

# objective-c - 使用 RCocoa 在 R 中加载 Objective-C 库

> ID：15194366
> 
> 赞同：3
> 
> 时间：2013-03-04T04:03:17.633
> 
> 标签：objective-c, r

`Cocoa`我在[http://www.rforge.net/Cocoa/](http://www.rforge.net/Cocoa/)找到了 R 包，我想用它来调用我定制的 Objective-c 类。

我试图加载一个包含一个简单自定义类（`DOHello`如下所示）的 dylib，然后调用：

```
hc <- .MClass("DOHello")
h <- .M(hc, "alloc")
h <- .M(h, "init")
.M(h, "hello") 
```

前三行代码没问题，但是当我调用 时`.M(h, "hello")`，整个 RStudio 会话崩溃。我也试过直接把源码`DOHello`加到`Cocoa`包里，结果是一样的。

班级`DOHello`：

```
@interface DOHello : NSObject 

- (void)hello;

@end

@implementation DOHello 

- (void)hello {
    printf("Hey, there");
}

@end 
```

崩溃报告：

```
Process:         rsession [8215]
Path:            /Applications/RStudio.app/Contents/MacOS/rsession
Identifier:      rsession
Version:         ???
Code Type:       X86-64 (Native)
Parent Process:  RStudio [1931]
User ID:         502

Date/Time:       2013-03-04 11:47:44.858 +0800
OS Version:      Mac OS X 10.8.2 (12C54)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.CoreFoundation        0x00007fff867d301d __NSI0 + 621
1   com.apple.CoreFoundation        0x00007fff867d2aee -[NSInvocation getArgument:atIndex:] + 302
2   Cocoa.so                        0x000000010c4fef4f ObjCsendMsg + 1135
3   libR.dylib                      0x0000000109ffee37 do_External + 327 (dotcode.c:540)
4   libR.dylib                      0x000000010a02e448 Rf_eval + 1672 (eval.c:494)
5   libR.dylib                      0x000000010a02fedd do_begin + 141 (eval.c:1415)
6   libR.dylib                      0x000000010a02e29c Rf_eval + 1244 (eval.c:468)
7   libR.dylib                      0x000000010a0333b1 Rf_applyClosure + 849 (eval.c:861)
8   libR.dylib                      0x000000010a02e1b2 Rf_eval + 1010 (eval.c:512)
9   libR.dylib                      0x000000010a0669e2 Rf_ReplIteration + 514 (main.c:256)
10  libR.dylib                      0x000000010a066cd1 R_ReplConsole + 161 (main.c:306)
11  libR.dylib                      0x000000010a0671ea run_Rmainloop + 90 (main.c:988)
12  rsession                        0x0000000109786b1b r::session::runEmbeddedR(core::FilePath const&, core::FilePath const&, bool, bool, SA_TYPE, r::session::Callbacks const&, r::session::InternalCallbacks*) + 427
13  rsession                        0x0000000109769b29 r::session::run(r::session::ROptions const&, r::session::RCallbacks const&) + 3193
14  rsession                        0x0000000109386f35 main + 14517
15  rsession                        0x000000010936e154 start + 52 
```

崩溃报告不完整，我只是复制了我认为有用的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:22:05.087

这是一个错误`Cocoa`，它试图从 void 方法检索结果 - 现在已修复。请使用 stats-rosuda-devel 邮件列表或通过电子邮件向作者发送问题和错误报告。

# regex - 如何将那些未引用的字符转换为大写？

> ID：15194379
> 
> 赞同：0
> 
> 时间：2013-03-04T04:04:43.927
> 
> 标签：regex, perl, shell

要格式化数千个 SQL 查询，我需要将所有不在引号对中的字符转换为大写。

例如：

```
select * from region where regionkey = 'America' 
```

转换为

```
SELECT * FROM REGION WHERE REGIONKEY = 'America' 
```

使用 perl，我可以通过以下方式将引用的字符转换为大写：

```
perl -p -e 's/('.+?')/\U\1/g' 
```

并得到：

```
select * from region where regionkey = 'AMERICA' 
```

问题是如何“反转”捕获结果，例如，前进到不在引号中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:17:33.257

```
s/([^']*)('[^']*'|\z)/\U$1\E$2/g 
```

所以

```
perl -pe's/([^'\'']*)('\''[^'\'']*'\''|\z)/\U$1\E$2/g' 
```

ysth 建议采用混合引用的方法：

```
perl -pe"s/([^']*)('[^']*'|\z)/"'\U$1\E$2/g' 
```

如果引号中可以有反斜杠转义，请更改

```
'[^']*' 
```

至

```
'(?:[^'\\]+|\\.)*' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:49:35.363

将字符串拆分为带引号的子字符串并每隔一个块大写。像这样

```
my $str = "select * from region where regionkey = 'America'";

my $uc;
$str = join '', map { ($uc = !$uc) ? uc : $_ } split /('[^']*')/, $str;
print $str; 
```

**输出**

```
SELECT * FROM REGION WHERE REGIONKEY = 'America' 
```

# java - Java checkstyle - 构造函数定义顺序错误

> ID：15194381
> 
> 赞同：13
> 
> 时间：2013-03-04T04:04:57.943
> 
> 标签：java, checkstyle

我有一个看起来像这样的类：

```
public final class OrderedSetList<T extends Comparable<? super T>> implements OrderedSet<T> {

    // Constructor definition in wrong order checkstyle error next line
    public OrderedSetList() {      
        // Initializations
    }
} 
```

谁能告诉我为什么我的构造函数**中出现“构造函数定义错误”**错误？

这是一项任务，我们有自己的 checkstyle 配置，不允许任何 checkstyle 错误。

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-04T04:13:20.700

[checkstyle 规则](http://checkstyle.sourceforge.net/config_coding.html#DeclarationOrder)确保您遵循声明顺序的代码约定：

> 类或接口声明的部分应按以下顺序出现：
> **类（静态）变量**。首先是公共类变量，然后是受保护的，然后是包级别（无访问修饰符），然后是私有的。
> **实例变量**。首先是公共类变量，然后是受保护的，然后是包级别（无访问修饰符），然后是私有的。
> **构造**
> **方法**

它希望构造函数成为第一个方法。

# javascript - 尝试使用 google maps api，需要使用鼠标点击坐标更新文本字段

> ID：15194383
> 
> 赞同：-3
> 
> 时间：2013-03-04T04:05:24.870
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

在我的网页上，我正在尝试按照标题所述进行操作，但是我尝试了许多在网上找到的不同示例。我正在使用来自 hpneo/github 的 gmap，这似乎不想工作。任何信息都会非常感谢。

```
<script>
$(document).ready(function(){

 var map = new GMaps({
    div: '#gmap',
   lat: 56.744901,
   lng: -111.473049,
    zoom: 16,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
    },
    panControl : false,
  });

If I delete this block for the addlistener, my map loads just fine, if it's hear my map doesn't show at all

 google.maps.event.addListener(map, 'click', function() {
  var lati = event.latLng.lat();
  var longi = event.latLng.lng();
  map.addMarker({
    lat: lati,
    lng: longi,
    title: 'Test'
  });
  $('#inputLatitude').val(lati);
  $('#inputLongitude').val(longi);
 }

GMaps.geolocate({
  success: function(position) {
    map.setCenter(position.coords.latitude, position.coords.longitude);
  },
  error: function(error) {
    alert('Geolocation failed: '+error.message);
  },
  not_supported: function() {
    alert("Your browser does not support geolocation");
  }
});

$(window).resize(function () {
   var h = $(window).height(),
   offsetTop = 150; // Calculate the top offset

   $('#gmap').css('height', (h - offsetTop));
   }).resize();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:48:02.803

您的“地图”变量不是 google.maps.Map 对象。试试这个（取自[示例](http://hpneo.github.com/gmaps/examples.html)）：

```
var map = new GMaps({
   div: '#gmap',
  lat: 56.744901,
  lng: -111.473049,
   zoom: 16,
   zoomControl : true,
   zoomControlOpt: {
       style : 'SMALL',
       position: 'TOP_LEFT'
   },
   panControl : false,
   click: function(event) {
    var lati = event.latLng.lat();
    var longi = event.latLng.lng();
    map.addMarker({
      lat: lati,
      lng: longi,
      title: 'Test'
    });
    $('#inputLatitude').val(lati);
    $('#inputLongitude').val(longi);
   }
 }); 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_gmaps_latlng.html)

# java - Java - 调用 Arrays.copyOfRange 时出现“找不到符号”错误

> ID：15194391
> 
> 赞同：1
> 
> 时间：2013-03-04T04:06:39.623
> 
> 标签：java, arrays

```
import java.util.*;
public class DriverExam
{
    private String[] answers = {"B", "D", "A", "A", "C", "A", "B", "A", "C", "D", "B", "C", "D", "A", "D", "C", "C", "B", "D", "A"};
    private String[] input_validation = {"A", "B", "C", "D"};
    private String[] student_answers = new String[20];
    private int[] missed = new int[20];
    private int[] copy_missed;
    private boolean pass=true;
    private int number_missed = 0;
    Scanner kb = new Scanner(System.in);
    String input;

    private String input()
    {
        input = kb.nextLine();
        while(!(input.equalsIgnoreCase("A")||input.equalsIgnoreCase("B")||input.equalsIgnoreCase("C")||input.equalsIgnoreCase("D")))
        {
            System.out.print("Please enter either A, B, C or D: ");
            input = kb.nextLine();
        }
        return input;
    }

    public boolean passed(String[] student_answers)
    {
        int v=0;

        for(int i=0; i<answers.length; i++)
        {
            if(!(answers[i].equalsIgnoreCase(student_answers[i])))
            {
                number_missed++;
                missed[v]=i;
                v++;

            }

        }
        if(number_missed>5)
        {
            pass=false;
        }
        return pass;
    }

    public String[] setStudentAnswers()
    {
        int question = 1;
        for(int i=0; i<student_answers.length; i++)
        {
            System.out.print("Enter the answer for question "+ question + ": ");
            student_answers[i]=input();
            question++;
        }

        return student_answers;
    }

    public int totalCorrect()
    {
        int correct = 20 - number_missed;
        return correct;
    }

    public int totalIncorrect()
    {
        return number_missed;
    }

    public int[] questionsMissed()
    {
        int[] copy_missed = Arrays.copyOfRange(missed, 0, number_missed);   
        return copy_missed;
    }

} 
```

更具体地说，在方法`questionsMissed()`中，`cannot find symbol`当涉及到`Arrays.copyOfRange`.

我检查了语法，我似乎是正确`missed`的`int[]`，`0`是`int`，`number_missed`也是一个 int。

我很困惑为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:53:20.397

在 JDK 1.5+ 你应该使用

```
System.arraycopy() 
```

代替

```
Arrays.copyOfRange() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:43:25.860

jGRASP 主页指出最新版本只需要 JDK 1.5 即可运行，而[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28int%5B%5D,%20int,%20int%29)直到 JDK 1.6 才添加。[见证1.5 中的 Arrays 文档中](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)缺少任何此类方法。我对 jGRASP 一无所知，但我猜你只是在后台运行旧的 JDK，因为该错误非常肯定是因为该方法不可用。

# math - 以编程方式查找梯形包含的点的坐标

> ID：15194392
> 
> 赞同：0
> 
> 时间：2013-03-04T04:06:44.313
> 
> 标签：math, language-agnostic

如果我有一个由四个点定义的梯形 (x1, y1), (x2, y2), (x3, y3), (x4, y4) *(选为 (255, 0), (255, 235), (200, 35) 和 (200, 235) 以作为示例）*，我将它任意划分为**n**除以**m**部分，如下所示（请原谅粗图）：

![飞机](../Images/a1e0bcf2b81ead4cd9a32f662b562d9c.png)

我怎样才能找到（x，y）的坐标？

我试过用线条的斜率来玩弄，但我的数学技能太生疏了，无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:51:15.610

对于根据您的示例的特定情况，它非常简单。

首先，x 位置很容易。由于垂直线总是平行于 y 轴，因此 x 只是 x 宽度除以部分数：

```
x = x1+((x2-x1)/a*xa) 
```

在哪里：

*   x = 结果坐标
*   x1,x2 = 梯形的边
*   a = 部分数
*   xa = x 截面坐标

注意：我选择`a`避免与斜率符号混淆：`m`。

对于 y，它有点复杂。我们首先需要找到位于梯形顶线和底线的坐标。为此，我们使用标准线方程：

```
y = mx+c 
```

找到 m 很简单。这只是 Dy/Dx：

```
m = (y2-y1)/(x2-x1) 
```

为了得到 c，我们只需将 x、y 和 m 代入公式：

```
c = y-mx 
```

一旦我们得到它，将前面找到的 x 的值代入公式以获得 y 坐标。这样做两次以获得顶部和底部线上的点：

```
 1            A              2
    x------------x--------------x
    |            |              |
    |            xC             |
    |            |              |
    x------------x--------------x
    3            B              4 
```

一起（伪代码）：

```
coordinateFromSection (x1 y1 x2 y2 x3 y3 x4 y4 gridX gridY sectionX sectionY) {

    xC = x1+((x2-x1)/gridX*sectionX)

    // top line:
    m = (y2-y1)/(x2-x1)
    c = y1-(m*x1)
    yA = m*xC + c

    // bottom line:
    m = (y4-y3)/(x4-x3)
    c = y3-(m*x3)
    yB = m*xC + c

    // Find yC by dividing line AB by gridY
    yC = yA+((yB-yA)/gridY*sectionY)

    return (xC yC)
} 
```

上面的所有计算都假设 (0,0) 是屏幕的左上角。

# c++ - C++ 错误：“字符串”未命名类型

> ID：15194395
> 
> 赞同：4
> 
> 时间：2013-03-04T04:06:51.667
> 
> 标签：c++, string, compiler-errors

当我编译以下文件时，出现错误：

```
ECArgs.h:36:3: error: ‘string’ does not name a type 
```

ECArgs.h:36：ECString 值（字符 c）；

有人可以给我任何错误提示吗？

ECArgs.h

```
#include <list>
#include "ECString.h"

class ECArgs
{
 public:
  ECArgs(int argc, char *argv[]);
  int nargs() { return nargs_; }
  bool isset(char c);
  ECString value(char c);
  ECString arg(int n) { return argList[n]; }
 private:
  int nargs_;
  int nopts_;
  ECString argList[32];
  list<ECString> optList;
}; 
```

ECString.h

```
#define ECS gnu

#if ECS == gnu
#include <cstring>
#define ECString string
using namespace std;
#else
#include <bstring.h>
#define ECString string
#endif 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-01T19:26:19.037

我遇到了类似的错误。这是因为我遗漏了`using namespace std;`

或者，必须使用`std::string`所有出现的`string`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T04:11:14.633

您需要添加：

```
#include <string> 
```

[cstring](http://www.cplusplus.com/reference/cstring/)包括操作 C 风格字符串的函数。此版本有效：

```
#include <list>
#include <string>

#if ECS == gnu
#include <cstring>
#define ECString string
using namespace std;
#else
#include <bstring.h>
#define ECString string
#endif

class ECArgs
{
 public:
  ECArgs(int argc, char *argv[]);
  int nargs() { return nargs_; }
  bool isset(char c);
  ECString value(char c);
  ECString arg(int n) { return argList[n]; }
 private:
  int nargs_;
  int nopts_;
  ECString argList[32];
  list<ECString> optList;
};

int main()
{

} 
```

# php - 调用从另一个 php 文件生成的变量，没有包含或要求

> ID：15194396
> 
> 赞同：0
> 
> 时间：2013-03-04T04:07:03.693
> 
> 标签：php, wordpress

我是 php 和 Wordpress 的新手，刚开始自己​​学习 php。我阅读了很多答案，但无法解决我的问题，所以我决定在这里发布。

我有 2 个 WP 页面模板，页面 A 和 B，A.php 是 B.php 的父级。我在 B.php 中有一个**复选框**来确定这是否是最新页面。

```
if( get_field('this_months_issue') )
{
    echo "<span class=\"issue-status\">/&nbsp;This Month's Issue</span>";
    $latest = "is-latest";  
}
else
{
    echo "<span class=\"issue-status\">/&nbsp;Previous Issue</span>";
} 
```

当复选框被选中时，我希望页面 A 登陆最新的页面 B。（请注意，页面 B 可用于页面 A 下的许多其他子页面）

我可以在页面 A 中放入什么，以便它可以重定向到选中复选框的页面？

对不起我的英语不好，我希望你能理解我的问题。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:53:14.473

你可以把你的变量放在一个会话中。所以请`session_start();`在页面顶部调用

```
 //set
        $_SESSION['varname'] = "something";
        // retrieve
        $somevar = $_SESSION['varname'];
        echo $somevar;//will echo "something"; 
```

因此，只要该会话处于活动状态，您就可以在任何您想要的地方调用它。

# django - Django 页面不保存

> ID：15194401
> 
> 赞同：2
> 
> 时间：2013-03-04T04:07:39.383
> 
> 标签：django

我正在使用来自 showmedo 的教程“在 20 分钟内创建一个 wiki”来开发一个类似于 wikipedia 的简单应用程序。

该应用程序的工作原理是您创建一个页面，例如狗，如果它不存在，那么您添加有关狗的所有信息，它会显示狗和狗的详细信息。![在此处输入图像描述](../Images/7cdcc115baaf6a6d010ac58c8e11a57e.png)

当我尝试编辑同一页面时。该页面没有在主页上更新，也没有在我的管理页面上更新。 ![在此处输入图像描述](../Images/9eddabeff7dd5891d4681b57a6b1ad65.png)

我认为问题出在我的 save_page 函数和 edit_page 函数上。因此，当我创建一个页面时，它可以工作，但是当我尝试检索该页面并保存它时。它不保存。

唯一有效的方法是由管理员编辑页面。

我认为问题出在这里

```
def save_page(request, page_name):
    content = request.POST.get('content', 'this is the default')
    try:
        page = Page.objects.get(pk=page_name)
        page.content = content 
```

这是网站 [http://tafe.pythonanywhere.com/wikicamp/Dogs/](http://tafe.pythonanywhere.com/wikicamp/Dogs/)

我的观点.py

```
from wiki.models import Page
from django.shortcuts import render_to_response 
from django.http import HttpResponseRedirect
from django.template import RequestContext
def view_page(request,page_name):
    try:
        page = Page.objects.get(pk=page_name)
    except Page.DoesNotExist:
        return render_to_response("create.html",{"page_name":page_name})
    content = page.content
    return render_to_response("view.html",{"page_name":page_name , "content":content}, context_instance=RequestContext(request))
def edit_page(request,page_name):
    try:
        page = Page.objects.get(pk=page_name)
        content = page.content
    except Page.DoesNotExist:
        content = ""
    return render_to_response("edit.html",{"page_name":page_name, "content":content}, context_instance=RequestContext(request))
def save_page(request, page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk=page_name)
         page.content = content
     except Page.DoesNotExist:
         page = Page(name=page_name, content=content)
         page.save()
    return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

我的 create.html

```
 <html>
    <head>
        <title>{{page.name}} - Create </title>
    </head>
    <body>
        <h1>{{page_name}} </h1>
        This page does not exist. <a href="{% url wiki:edit page_name %}">Create?     </a>
 </body>
 </html> 
```

我的edit.html

```
 <html>
    <head>
        <title>{{page_name - Editing</title>
    </head>
    <body>
        <h1>Editing {{page_name}} </h1>
        <form method = "post" action="{% url wiki:save page_name %}"> {% csrf_token %}
                <textarea name="content" rows="20" cols="60">     {{content}}
      </textarea><br/>      
            <input type="submit" value="Save Page"/>
            </form>
        </body>
      </html> 
```

我的视图.html

```
<html>
    <head>
    <title>{{page_name}}</title>
        </head>
    <body>
        <h1>{{page_name}} </h1>
        {{content}}
        <hr/>
        <a href="{% url wiki:edit page_name %}">Edit this page ?</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:20:56.407

您没有将页面保存在 save_page 中，只有当它不存在时。尝试类似：

```
def save_page(request, page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk=page_name)
         page.content = content
         page.save()
     except Page.DoesNotExist:
         page = Page(name=page_name, content=content)
         page.save()
    return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

这是一个快速的丑陋修复，我建议查看基于[表单](https://docs.djangoproject.com/en/dev/topics/forms/)和[类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:21:09.300

```
 try:
     page = Page.objects.get(pk=page_name)
     page.content = content
 except Page.DoesNotExist:
     page = Page(name=page_name, content=content)
     page.save() 
```

我在这里看到两个问题。首先，您试图通过`page_name`作为主键来检索页面，当您应该搜索`name`属性时，其次在您成功获取页面并更新其内容后，您忘记保存它。

由于这是一种常见模式，因此 django 中有一个快捷方式[`get_or_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.get_or_create)，它的工作方式如下：

```
 page, created = Page.objects.get_or_create(name=page_name)
 if created:
    # new page was created
 else:
    # existing page was retrieved 
```

在您的场景中，您只想在任一场景中获取和更新内容。所以我们不需要使用`created`变量：

```
 page, created = Page.objects.get_or_create(name=page_name)
 page.content = content
 page.save() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:23:06.143

我注意到两件事：

```
 try:
     page = Page.objects.get(pk=page_name)
     page.content = content
 except Page.DoesNotExist:
     page = Page(name=page_name, content=content)
     page.save() 
```

1）在`try`您正在查询的块中，`pk`并且在`except`您正在设置`name`.

2）您没有保存在`try`块中。

试试这个：

```
 try:
     page = Page.objects.get(name=page_name)
 except Page.DoesNotExist:
     page = Page(name=page_name)
 page.content = content
 page.save() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T04:35:28.043

你忘了放 save()

```
def save_page(request, page_name):
    content = request.POST.get('content', 'this is the default')
    try:
       page = Page.objects.get(pk=page_name)
       page.content = content
       page.save()
    except Page.DoesNotExist:
       page = Page(name=page_name, content=content)
       page.save()
    return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

# html - 在 windows phone 8 中使用 tel: 标记通过电话分机发起呼叫

> ID：15194404
> 
> 赞同：1
> 
> 时间：2013-03-04T04:08:03.233
> 
> 标签：html, windows-phone-8, tel

我有一个非常简单的页面，其中有一个电话号码链接，可以点击拨打电话。

```
<a href="tel:5555555,555">555-5555 ext. 555</a> 
```

这目前适用于我尝试过的 IOS 设备和一些后来型号的 android 手机。然而，带有 IE10 的 Windows phone 8 似乎并不像它。有没有人遇到过这个问题？在 WP8 中执行此操作的最佳方法是什么？非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T09:07:14.063

我在这个网站上试过：http: [//www.paulund.co.uk/add-telephone-number-links-with-html5](http://www.paulund.co.uk/add-telephone-number-links-with-html5)在我的 Lumia 920 上，它可以工作。

# c - 何时为具有选择性重复 ARQ 的滑动窗口重新发送丢失的 ACK

> ID：15194405
> 
> 赞同：1
> 
> 时间：2013-03-04T04:08:04.527
> 
> 标签：c, networking, sliding-window

正如您可能知道的那样，我对带有选择性重复 ARQ 实现的滑动窗口有点困惑。如果接收方发送一个数据包的 ACK，但 ACK 丢失了，那么发送方会做什么？发送者是否继续直到没有ACK的数据文件成为窗口底部然后处理它？还是发送方等到收到 ACK 后再继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:04:03.810

服务器将继续发送数据包，直到它的窗口填满。接收方将始终发送它收到的数据的累积 ACK。这只是意味着当接收者发送一个 ack 时，它总是发送它没有收到的最低序列号。因此，如果数据包 1 的 ack 丢失，服务器仍将发送数据包 2，客户端将 ack 数据包 2 表明它已准备好接收数据包 3，并且服务器将在收到此 ack 后使用此信息更新其窗口。

# macos - 模拟 MouseEvent 无法正常工作 OSX

> ID：15194409
> 
> 赞同：6
> 
> 时间：2013-03-04T04:08:55.053
> 
> 标签：macos, cocoa, mouseevent, mouseover, simulation

早在 2010 年，[皮埃尔](https://stackoverflow.com/users/267075/pierre)问[了这个](https://stackoverflow.com/questions/2340438/simulate-mouse-on-mac)问题（他接受的答案对我不起作用）。

我遇到了同样的问题：我能够从我的 Cocoa 应用程序以编程方式成功地将鼠标移动（和关闭！？！）屏幕，但是将鼠标带到我的扩展坞的位置并没有显示它（还有一些其他应用程序没有注册鼠标移动事件，例如移除鼠标的游戏）

因此，我使用的方法是：

```
void PostMouseEvent(CGMouseButton button, CGEventType type, const CGPoint point)
{
  CGEventRef theEvent = CGEventCreateMouseEvent(NULL, type, point, button);
  CGEventSetType(theEvent, type);
  CGEventPost(kCGSessionEventTap, theEvent);
  CFRelease(theEvent);
} 
```

然后当我想移动鼠标时，我运行：

```
PostMouseEvent(0, kCGEventMouseMoved, mouseLocation); 
```

请注意，此代码确实会为链接等内容生成鼠标悬停事件。

现在是 2013 年，是否有可能解决此问题？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:06:10.033

我会扭曲光标并生成鼠标移动事件。例如，我从经验中知道，虽然光标本身不会生成事件，但它会修改随后的鼠标移动事件以将移动的距离包含在其鼠标增量中。我不知道您的合成移动事件是否会单独包含正确的增量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:12:00.740

好的，很明显，MacOSX 需要鼠标恰好位于屏幕边缘才能显示 Dock！因为我将 Dock 放在屏幕左侧（由于许多程序将重要按钮保留在其窗口底部），所以我所要做的就是说

```
if (mouseLocation.x < 0)
{
    mouseLocation.x = 0;
} 
```

它奏效了！

我也在使用 KenThomases 的想法来扭曲光标。

（这个答案被标记为正确，因为它允许我显示扩展坞 - 但是仍然有一些应用程序没有响应鼠标输入）

# visual-c++ - 获取图像的像素值

> ID：15194412
> 
> 赞同：0
> 
> 时间：2013-03-04T04:09:11.760
> 
> 标签：visual-c++, opencv, pixel

下面是提供 2 个图像的宽度、高度和 BGR 值的代码。但问题是在我关闭第一张图像之前我看不到第二张图像。要进行哪些修改以便我可以一次看到两个图像并获得所有像素值。

```
1 . #include <cv.h>
#include<iostream>
#include <cxcore.h>
#include <highgui.h>

using namespace std;

int main(int argc, char** argv[])
{
    int  width,height;
     int i=0,j=0,k=3,l=3;

        IplImage *img1 = cvLoadImage("E:/images.jpg");
        cvNamedWindow("Image1:",1);
        cvShowImage("Image1:",img1);
        cout << "Width:" <<  img1->width << endl;
        cout << "Height:" <<  img1->height << endl;
        CvScalar s;
        s=cvGet2D(img1,i,j); // get the (i,j) pixel value
        printf("B=%f, G=%f, R=%f\n",s.val[0],s.val[1],s.val[2]);
        cvWaitKey();
        cvDestroyWindow("Image1:");

        IplImage *img2 = cvLoadImage("C:/Users/Public/Pictures/Sample Pictures/Tulips.jpg");
        cvNamedWindow("Image2:",2);
        cvShowImage("Image2:",img2);
        cout << "Width:" <<  img2->width << endl;
        cout << "Height:" <<  img2->height << endl;

        s=cvGet2D(img2,k,l); // get the (k,l) pixel value
        printf("B1=%f, G1=%f, R1=%f\n",s.val[0],s.val[1],s.val[2]);
        cvWaitKey();
        cvDestroyWindow("Image2:");

        cvReleaseImage(&img1);
        cvReleaseImage(&img2);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:10:48.467

问题在于`cvWaitKey()` 尝试：

```
 IplImage *img1 = cvLoadImage("E:/images.jpg");
    cvNamedWindow("Image1:",1);
    cvShowImage("Image1:",img1);
    cout << "Width:" <<  img1->width << endl;
    cout << "Height:" <<  img1->height << endl;
    CvScalar s;
    s=cvGet2D(img1,i,j); // get the (i,j) pixel value
    printf("B=%f, G=%f, R=%f\n",s.val[0],s.val[1],s.val[2]);

    IplImage *img2 = cvLoadImage("C:/Users/Public/Pictures/Sample Pictures/Tulips.jpg");
    cvNamedWindow("Image2:",2);
    cvShowImage("Image2:",img2);
    cout << "Width:" <<  img2->width << endl;
    cout << "Height:" <<  img2->height << endl;

    s=cvGet2D(img2,k,l); // get the (k,l) pixel value
    printf("B1=%f, G1=%f, R1=%f\n",s.val[0],s.val[1],s.val[2]);

    cvWaitKey();
    cvDestroyWindow("Image1:");
    cvDestroyWindow("Image2:");
    cvReleaseImage(&img1);
    cvReleaseImage(&img2); 
```

# node.js - 使用 mongodb，如何根据其属性之一从数组中删除对象？

> ID：15194413
> 
> 赞同：0
> 
> 时间：2013-03-04T04:09:12.187
> 
> 标签：node.js, mongodb

我有一个包含对象数组的 mongodb 集合，我想根据它们的属性删除一个或多个数组对象。

我收藏的示例文档：

```
nickname: "Bob",
isLibrarian: false,
region: "South America",
favoriteBooks: [
    {
        title: "Treasure Island",
        author: "Robert Louis Stevenson"
    },
    {
        title: "The Great Gatsby",
        author: "F. Scott Fitzgerald"
    },
    {
        title: "Kidnapped",
        author: "Robert Louis Stevenson"
    }
] 
```

在此示例中，如何从我的集合中的每个文档中删除 favoriteBook 数组中其作者与“罗伯特·路易斯·史蒂文森”匹配的所有对象？

所以之后这个用户文档将是

```
nickname: "Bob",
isLibrarian: false,
region: "South America",
favoriteBooks: [
    {
        title: "The Great Gatsby",
        author: "F. Scott Fitzgerald"
    }
] 
```

史蒂文森的书籍和收藏中的其他文件同样会被删减。

提前感谢您的任何见解！我喜欢 MongoDB，但我想知道我是否在这里咬得比我能咀嚼的更多……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:56:31.453

以下 mongodb 行将帮助您删除与特定作者匹配的书籍

```
db.collection.update(
   {},
   {$pull:{favoriteBooks:{author:"Robert Louis Stevenson"}}},
   {multi:true}
); 
```

# oracle - Oracle 11g 中的数据透视表

> ID：15194414
> 
> 赞同：0
> 
> 时间：2013-03-04T04:09:13.350
> 
> 标签：oracle, oracle11g

你能帮我弄清楚数据透视表吗？这是第一个表：

```
Date        1     2     3     4     5
-----------------------------------------
20130101   0.12  0.13  0.43  0.32  0.22
20130102   0.22  0.31  0.13  0.31  0.29
20130103   0.32  0.12  0.33  0.12  0.34 
```

我希望这张桌子是这样的：

```
Date      Number  Values
---------------------------
20130101     1     0.12
20130101     2     0.13
20130101     3     0.43
20130101     4     0.32
20130102     5     0.22
20130102     1     0.22
20130102     2     0.31
20130102     3     0.13
20130102     4     0.31
20130102     5     0.29
20130103     1     0.32
20130103     2     0.12
20130103     3     0.33
20130103     4     0.12
20130103     5     0.34 
```

我尝试使用“解码”来查找特定查询，但它对我不起作用。

这是我尝试过的网站： [在 Oracle 中使用数据透视表的建议](https://stackoverflow.com/questions/365238/advice-using-pivot-table-in-oracle)。

你能帮我解决这个问题吗？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:10:52.883

你不需要一个[`PIVOT`，而是一个`UNPIVOT`](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)

```
SELECT *
FROM table1
unpivot
(
  "Values" FOR "Number" IN ("1","2","3","4","5")
 ); 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/fcfe6/1)

# c - 这两个代码片段的区别

> ID：15194419
> 
> 赞同：0
> 
> 时间：2013-03-04T04:10:11.490
> 
> 标签：c

这里有两段代码，一段是宏，一段是函数。他们似乎做同样的事情，但在运行它们之后，它们似乎表现出不同的行为，我不知道为什么。有人可以帮我吗？谢谢！

```
#define ROL(a, offset) ((((Lane)a) << ((offset) % LANE_BIT_SIZE)) ^ (((Lane)a) >> (LANE_BIT_SIZE-((offset) % LANE_BIT_SIZE))))

Lane rotateLeft(Lane lane, int rotateCount)
{
    return ((Lane)lane << (rotateCount % LANE_BIT_SIZE)) ^ ((Lane)lane >> (LANE_BIT_SIZE - (rotateCount % LANE_BIT_SIZE))) ;
} 
```

注意：Lane 类型只是一个无符号整数，LANE_BIT_SIZE 是一个数字，以位数表示 Lane 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:22:04.413

将使用宏想象为将宏的主体替换为您正在使用它的位置。

例如，假设您要定义一个宏：`#define quadruple(a) ((a) * (a) * (a) * (a))`

...然后您将像这样使用该宏：

```
int main(void) {
    int x = 1;
    printf("%d\n", quadruple(x++));
} 
```

你希望在这里发生什么？将宏替换到代码中会导致：

```
int main(void) {
    int x = 1;
    printf("%d\n", ((x++) * (x++) * (x++) * (x++)));
} 
```

事实证明，这段代码使用了未定义的行为，因为它在同一个表达式中多次修改 x。那可不好！你认为这可以解释你的行为差异吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:30:31.413

一个是宏，一个是函数，简单的理解在调用方式上有所不同。

由于函数 CONTEXT SWITCHING 将在那里，您的代码流将更改为调用函数并最终返​​回，因此与 MACRO 相比，执行延迟非常小。

除此之外不应该有任何其他区别。

请尝试将函数声明为内联函数，然后两者应该相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T06:45:41.503

Lane 可以提升为具有更多位的类型，例如当它是`unsigned char`or`unsigned short`时，或者当它用于具有混合类型的更大赋值时。然后该`<<`操作会将较高位移动到较大类型的附加位中。

通过函数调用，这些位将被切断，因为它返回一个 Lane，而宏为您提供提升类型的完整结果，包括附加位 - 除了宏的其他问题，如参数的多次评估。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-04T04:29:58.550

> 这里有两段代码，一段是宏，一段是函数。他们似乎做同样的事情，但在运行它们之后，它们似乎表现出不同的行为，我不知道为什么。

不，他们正在做同样的事情。

```
ROL(a, offset);                          //does a*(2^offset)
rotateLeft(Lane lane, int rotateCount);  //does lane*(2^rotateCount) 
```

唯一的区别是 ROL 是通过宏实现的，而 rotateLeft() 是一个函数。

宏和函数的区别

*   宏在编译器的预处理阶段执行，而函数在运行时被调用时执行。
*   结果，宏比函数执行得更快，但是当多次调用时，宏文本会冗余地替换相同的代码，并且它们最终会比使用函数的实现消耗更多的“代码”内存。
*   与函数不同，宏中没有类型强制。

# ajax - 在 codeigniter 中使用 ajax 进行页面导航

> ID：15194422
> 
> 赞同：0
> 
> 时间：2013-03-04T04:10:27.833
> 
> 标签：ajax, codeigniter, jquery

在 codeigniter 中，我反复使用控制器来加载页面的所有模板......我将页面分为页眉、顶部导航、左侧导航以及内容和页脚。

这是我目前所做的

```
public function get_started() {
    if (test_login()) {
        $this->load->view('includes/header');
        $this->load->view('includes/topnav');
        $this->load->view('includes/leftbar');
        $this->load->view('login_nav/get_started');
        $this->load->view('includes/footer');
    } else {
        $this->load->view('errors/needlogin');      
    }
} 
```

codeigniter 中是否有任何 jquery-ajax 助手或插件可以让我保持页眉页脚和顶部导航静态，并允许我使用 ajax 加载特定视图。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:09:36.527

您可以使用构造函数来设置静态标头：

```
//in your controller

public $data;

function __construct()
{
    $this->data['header'] = 'static_header';
    $this->data['static_footer'] = 'static_footer';
}

function get_started(){
    if (test_login()) {
        $this->data['subview'] = 'login_nav/get_started';
    } else {
        $this->data['subview'] = 'errors/needlogin';
    }
        $this->load->view('template',$this->data);
}

function get_page(){
   $view = $this->load->view('your_dynamic_view','',TRUE);
   print json_encode(array('success' => TRUE, 'view' => $view);
}

// in your template.php
<div id="header"><?php echo $this->load->view('header');?></div>
<div id="subview"><?php echo $this->load->view('subview');?></div>
<div id="footer"><?php echo $this->load->view('footer');?></div>

// in your script - used to load dynamic view on you subview div
<script type="text/javascript">
    $.get('controller/get_page',{},function(data){
        if(data.success){
            $('#subview').html(data.view);
        }
    },'json')
</script> 
```

如果我的代码有问题，请给我发消息快乐编码--->：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T03:16:54.403

[PinoyPal](https://stackoverflow.com/a/15196317/8026137)的回答在理论上是正确的，但在实践中它对我不起作用，因为它缺少一个主要细节：一条路线。

看看他们脚本的这一部分：

```
// in your script - used to load dynamic view on you subview div
<script type="text/javascript">
    $.get('controller/get_page',{},function(data){
        if(data.success){
            $('#subview').html(data.view);
        }
    },'json')
</script> 
```

这里应该有一个实际 GET 请求的 url代替**“controller/get_page” 。**这是它通常应该看起来的样子：

```
$("a.your_navigation_element_class").on('click',function(e){
    e.preventDefault(); //this is to prevent browser from actually following the link
    var url = $(this).attr("href");
    $.get(url, {}, function(data){
        if (data.success){
            $('#subview').html(data.view);
        }
    },'json')
}); 
```

现在有一个问题：这个 GET 请求会在哪里结束？在默认的控制器路由中，没错。这就是为什么你需要 1) 修改你的请求 url 和 2) 设置一个路由，以便这个请求将被传递给一个 ajax 服务控制器。或者只是将一个 ajax 服务功能添加到您的默认控制器并将 ajax 请求重新路由到它。

## 以下是它应该如何包装

在 ...\application\controller\Pages.php 中：

```
class Pages extends CI_Controller {
    ...
    public function serve_ajax ($page) {
        $view = $this->load->view($page, '', TRUE);
        print json_encode( array('success' => TRUE, 'view' => $view);
    }
    ...
} 
```

在 ...\application\config\routes.php 中：

```
...
$route['ajax/(:any)'] = 'pages/serve_ajax/$1'; 
```

在您的页面上：

```
...
<body>
    ...
    <div id="page"></div>
    ...
    <script>
        $("a.navigation").on('click',function(e){
            e.preventDefault();
            var url = $(this).attr("href");
            $.get("/ajax" + url, {}, function(data){
            //The trailing slash before "ajax" places it directly above
            //the site root, like this: http://yourdomain.com/ajax/url
                if (data.success){
                    $('#page').html(data.view);
                }
            },'json')
        });
    </script>
</body> 
```

你都准备好了。

# google-chrome - 如何在 Chrome 中播放 AAC+ 流？

> ID：15194423
> 
> 赞同：4
> 
> 时间：2013-03-04T04:10:28.560
> 
> 标签：google-chrome, mediaelement.js, aac

我在（优秀的）mediaplayer.js 中尝试了几种类型和设置的组合，但无法让 BBC Radio 3 在 Chrome 中播放。流 URL 在[这里](http://bbcmedia.ic.llnwd.net/stream/bbcmedia_intl_lc_radio3_p?s=1362261751&e=1362276151&h=47e8b2755e05d1a5ceeb665f116984de)，从中获取的播放列表在[这里](http://www.bbc.co.uk/radio/listen/live/r3_aaclca.pls)。

标签是：

```
<audio src="http://bbcmedia.ic.llnwd.net/stream/bbcmedia_intl_lc_radio3_p?s=1362261751&amp;e=1362276151&amp;h=47e8b2755e05d1a5ceeb665f116984de" type="audio/mp4" id="player"></audio> 
```

查看 Chrome 的检查器，我看到网络正在调用流，但它只是无限期地加载，没有音频启动。

其他流工作正常（[demo](http://classicalrad.io/kdfc)），但这个特定的流是有问题的，我认为它与 AAC+ 格式有关。

编辑：实例化代码在[这里](https://github.com/clipperhouse/classicalrad.io/blob/master/public/javascripts/player.js)，认为它比粘贴整个内容更清晰。

编辑 2：它适用于 Safari (Mac)！我认为这与 Quicktime 有关。这就是为什么我认为 AAC+ 是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:56:51.193

请参阅[https://groups.google.com/forum/m/#!msg/jplayer/9Ks2Crfjwrg/jDCDBgv3qr0J](https://groups.google.com/forum/m/#!msg/jplayer/9Ks2Crfjwrg/jDCDBgv3qr0J)。似乎 AAC+ 支持有点奇怪。AAC+ 似乎也可以放在各种容器中。像 m4a 和 FLV。另请参阅 stackoverflow.com/questions/4018596/aac-streaming-from-shoutcast-in-flash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:44:05.377

首先，您使用哪个操作系统、哪个 Chrome 版本进行了测试？

AAC+ 受软件专利保护，因此如果您的操作系统在 Chrome 所依赖的 ffmpeg 库中禁用了它（在 Chrome 不捆绑自己的 ffmpeg 的操作系统上），它将不可用。如果您正在运行诸如 debian 或 ubuntu 之类的东西，则可能出于法律原因默认禁用它。在 Windows 上，Chrome 可能已经从捆绑的 ffmpeg 本身中删除了支持以避免责任问题。

或者，由于 AAC+ 支持 DRM，因此可能是 BBC 以 Chrome 不支持的方式加密或阻止流的问题。

如果我是对的，那么可能没有好的解决方案，因为您可以在您的机器上修复它（使用自定义 Chrome/FFMpeg 构建），但不能在真正重要的最终用户方面修复它。Flash 支持 AAC，因此您可以使用此处描述的[编解码器回退技术回](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video)退到 Flash 播放器，但您可能会遇到此处[描述的跨域/许可问题](https://stackoverflow.com/questions/4109419/flash-audio-player-for-m4a-aac-audio-file-embedded-in-html)。

[MDN 编解码器页面](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats?redirectlocale=en-US&redirectslug=Media_formats_supported_by_the_audio_and_video_elements)声称 Chrome 3.0（但不是 Chromium）支持 MP4 容器中的 AAC，但它没有说明这种支持是否扩展到 AAC+（除非这就是他们所说的“仅主要”的意思）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T23:05:45.607

html 音频播放器在 chrome 浏览器中播放 aac+ 文件。

```
<audio id="audio1" controls autoplay>
   <source src="test.aac"></source>
</audio> 
```

如果它来自 SHOUTCAST v2，它会播放 aac+ 流。（有时 crossdomain.xml 必须存在于shoutcast 文件夹中才能进行试听）

# php - 不同的数组包含第一个数组的元素

> ID：15194427
> 
> 赞同：0
> 
> 时间：2013-03-04T04:10:56.100
> 
> 标签：php, arrays

### 背景

我有两个名为`$attributes`and的数组`$graphs`。属性保存数据如下：

`$attributes = array('lat', 'long', '');`

鉴于，`$graphs`包含这样的子数组：

```
$graphs = array(
    'bar_chart'  => array('gender', `lat`, `long`),
    'pie_chart'  => array('gender', 'location', 'pos_sentiment', 'neg_sentiment'),
    'line_chart' => array('pos_sentiment', 'neg_sentiment')
); 
```

### 问题

我的`$attributes`数组是从我的数据库中的数据生成的，如果其中一个元素为空，则不返回包含其他属性的图形，这是我想要的。

### 我的问题

我想知道第一个数组 ( `attributes`) 是否在第二个数组 ( ) 中有任何元素`graphs`。我不希望考虑空字符串。

### 更新

意识到[array_filter](http://php.net/manual/en/function.array-filter.php)函数删除了空字符串后，我将它应用到我自己的代码上面并得到了我想要的结果。

代码是：

```
 foreach ($graphs as $key => $array)
    {
        if (count(array_intersect(array_filter($attributes), $array)) == count(array_filter($attributes)))
        {
            $solved[] = $key;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:24:39.010

人们：

```
Array
  (
   [0] => 3
   [1] => 20
  ) 
```

通缉犯：

```
Array
(
[0] => 2
[1] => 4
[2] => 8
[3] => 11
[4] => 12
[5] => 13
[6] => 14
[7] => 15
[8] => 16
[9] => 17
[10] => 18
[11] => 19
[12] => 20
) 
```

您可以使用`array_intersect().`

```
$result = !empty(array_intersect($people, $criminals)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:32:35.863

尝试这个 ：

```
$attributes = array('lat', 'long', '');

$graphs = array(
    'bar_chart'  => array('gender', 'lat', 'long'),
    'pie_chart'  => array('gender', 'location', 'pos_sentiment', 'neg_sentiment'),
    'line_chart' => array('pos_sentiment', 'neg_sentiment')
);

$res  = array();
foreach($graphs as $key=>$val){
    $res[$key]   = array_intersect($attributes, $val);
}

echo "<pre>";
print_r($res); 
```

输出 ：

氩

```
ray
(
    [bar_chart] => Array
        (
            [0] => lat
            [1] => long
        )

    [pie_chart] => Array
        (
        )

    [line_chart] => Array
        (
        )

) 
```

这`$res`是一个数组，其中包含`$grahp`带有键的属性，如果不存在，它将为空。

# android - 仅发现供应商特定的蓝牙设备

> ID：15194429
> 
> 赞同：4
> 
> 时间：2013-03-04T04:11:10.673
> 
> 标签：android, bluetooth

需要发现或搜索`Bluetooth`某些“供应商特定”设备的设备。

“供应商特定”意味着所有设备的“MAC”地址中都有相似的起始位

例如，我只想搜索 MAC 地址以`12:34:56:`

它应该只搜索特定系列的`MAC`地址并列出它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:42:36.183

Perform a full discovery, then filter using [`BluetoothDevice.getAddress()`](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#getAddress%28%29)

```
// Define Vendor ID Prefix
public static final String VENDOR_ID = "12:34:56:"

// First, do a full discovery...
BluetoothAdapter.getDefaultAdapter().startDiscovery()

//...

// Then, for each device returned from discovery...

if ( device.getAddress().startsWith(VENDOR_ID) ) {
  // Do Something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:56:28.833

我的解释将基于 Android SDK 中的 BluetoothChat 示例，希望这没问题，否则我需要写更多。如果你还没有看过 BluetoothChat 的例子，那就去看看吧，它真的很棒！

如果您想使用不知道完整地址的设备，则必须进行完整的发现`BluetoothAdapter.startDiscovery()`并在收到的地址中搜索您想要的地址。

如果您知道要连接的设备的完整地址，则可以使用以下命令直接连接到该设备`BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address)`

# java - Android用手指拖动imageview表现奇怪

> ID：15194431
> 
> 赞同：1
> 
> 时间：2013-03-04T04:11:13.013
> 
> 标签：java, android, imageview, drag, move

我正在为我的应用程序实现 imageview 拖动功能。我已经尝试过使用下面的代码，但它的行为很奇怪。当我尝试拖动图像时，它会改变位置，并且在移动过程中它会像缩放图像一样显示。我想用手指顺利移动图像。

请帮我解决这个问题

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        final int X = (int) event.getRawX();
        final int Y = (int) event.getRawY();
        MarginLayoutParams marginParams = new MarginLayoutParams(mImagePreView.getLayoutParams());

        switch (event.getAction()) {

        case MotionEvent.ACTION_DOWN:
            _xDelta = X - marginParams.leftMargin;
            _yDelta = Y - marginParams.topMargin;
            break;
        case MotionEvent.ACTION_MOVE:
            marginParams.leftMargin = X-_xDelta;
            marginParams.topMargin = Y - _yDelta;
            marginParams.rightMargin = -250;
            marginParams.bottomMargin = -250;

            FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(marginParams);
            mImagePreView.setLayoutParams(layoutParams);

            break;
        default:
            break;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:42:12.390

```
RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mImagePreView.getLayoutParams();
layoutParams.leftMargin += offsetX;
layoutParams.topMargin += offsetY; 
```

并且有错误：

```
 _xDelta = X - marginParams.leftMargin;
    _yDelta = Y - marginParams.topMargin; 
```

X - 绝对坐标中的事件，marginParams.leftMargin - 坐标相对于父布局

# ruby - 为什么找不到库：没有要加载的文件

> ID：15194433
> 
> 赞同：2
> 
> 时间：2013-03-04T04:11:23.213
> 
> 标签：ruby, require

卡住了，找不到原因，应该很简单，

这是错误消息：

> require': 没有要加载的文件 -- ./ip (LoadError)

它是由这行代码生成的：

```
require './ip' 
```

由于 require 'socket' 有效，我找到了两个库：

> /usr/lib/ruby/gems/1.8/gems/ruby-ip-0.9.1/lib/ip.rb
> /usr/lib/ruby/gems/1.8/gems/ruby-ip-0.9.1/lib/ip /socket.rb

`require 'ip'` 也 试过了`require '../ip'`

还是一样的错误

* * *

背景资料：

我安装了 ruby​​-ip 以便可以调用如下方法： `ip = IP.new do ...`

> gem安装了ruby-ip

我可以看到图书馆（我相信这是我需要使用的 ip.rb；

> 密码
> /usr/lib/ruby/gems/1.8/gems/ruby-ip-0.9.1/lib
> ls
> ip ip.rb

## 环境信息

```
ruby -v
ruby 1.8.7 (2012-10-12 patchlevel 371) [i386-linux] 
```

* * *

宝石清单

```
*** LOCAL GEMS ***

builder (3.2.0)
eventmachine (1.0.1, 0.12.10)
pg (0.14.1, 0.13.2)
ruby-ip (0.9.1)
rubygems-update (2.0.0)
sqlite3 (1.3.3) 
```

* * *

哪个红宝石

## /usr/bin/红宝石

哪个宝石

## /usr/bin/gem

宝石环境

```
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.0
  - RUBY VERSION: 1.8.7 (2012-10-12 patchlevel 371) [i386-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.8
     - /home/pilar/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:07:22.180

你是否也包括需要'rubygems'？如果您使用的是 rvm，则它是必需的。

例子：

```
[fotanus@thing ~]$ gem install ip
Fetching: ip-0.3.0.gem (100%)
Successfully installed ip-0.3.0
1 gem installed
Installing ri documentation for ip-0.3.0...
Installing RDoc documentation for ip-0.3.0...
[fotanus@thing ~]$ irb
1.8.7 :001 > require 'ip'
LoadError: no such file to load -- ip
    from (irb):1:in `require'
    from (irb):1
1.8.7 :002 > require 'rubygems'
 => true 
1.8.7 :003 > require 'ip'
 => true 
1.8.7 :004 > 
```

# r - 除了“sentiment”之外，还有其他包可以在 R 中进行情绪分析吗？

> ID：15194436
> 
> 赞同：9
> 
> 时间：2013-03-04T04:11:30.297
> 
> 标签：r, sentiment-analysis

R 中的“情感”包已从 Cran 存储库中删除。还有哪些可以进行情绪分析的软件包？

例如，我如何使用其他包重写它？

```
 library(sentiment)
# CLASSIFY EMOTIONS
classify_emotion(some_txt,algorithm="bayes",verbose=TRUE)
# classify polarity
class_pol = classify_polarity(some_txt, algorithm="bayes") 
```

这里的文档定义为：

```
# DEFINE text
some_txt<- c("I am very happy at stack overflow , excited, and optimistic.",
                "I am very scared from OP question, annoyed, and irritated.") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T07:45:06.437

我找不到`sentiment`包。这是基于`tm.plugin.sentiment`包的。你可以在[这里](https://r-forge.r-project.org/scm/?group_id=1048)找到它。

首先，我创建我的语料库：

```
some_txt<- c("I am very happy at stack overflow , excited, and optimistic.",
+              "I am very scared from OP question, annoyed, and irritated.")
 text.corpus <- Corpus(VectorSource(some_txt)) 
```

然后，我在语料库上应用分数

```
> text.corpus <- score(text.corpus) 
```

结果存储在 meta 中：

```
> meta(text.corpus)
  MetaID polarity subjectivity pos_refs_per_ref neg_refs_per_ref senti_diffs_per_ref
1      0        0    0.2857143        0.1428571        0.1428571           0.0000000
2      0       -1    0.1428571        0.0000000        0.1428571          -0.1428571 
```

代码后面的`score`函数（默认行为），将使用这些 tm 函数对语料库进行预处理：

*   降低
*   删除标点符号
*   removeNumbers = TRUE,
*   removeWords = list(stopwords("english")),
*   条空白
*   干文件
*   minWordLength = 3,

然后，应用评分函数：

*   极性
*   主观性
*   pos_refs_per_ref
*   neg_refs_per_ref
*   senti_diffs_per_ref

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T23:25:22.003

有一个新的 R 包，称为**Sentiment140**，不需要额外的组件安装或语言模型训练。

*   **便于使用**
*   **使用 Twitter 文本**

很酷的东西 ！

[http://github.com/okugami79/sentiment140](http://github.com/okugami79/sentiment140)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-29T20:01:57.437

这就是我在 R 版本 3.0.2 中安装 'sentiment' 0.2 所做的

我从存储库[http://cran.r-project.org/src/contrib/Archive/sentiment/下载了“sentiment_0.2.tar.gz”](http://cran.r-project.org/src/contrib/Archive/sentiment/)

然后我把'sentiment_0.2.tar.gz'放在主目录--> C：

然后我使用命令从本地 zip 安装包：

```
install.packages("C:/sentiment_0.2.tar.gz", repos = NULL, type="source") 
```

这就是我所拥有的：

```
Warning in install.packages :
  package ‘C:/sentiment_0.2.tar.gz’ is not available (for R version 3.0.2)

Installing package into ‘C:/Users/y65liu/Documents/R/win-library/3.0’
(as ‘lib’ is unspecified)

** installing source package 'sentiment' ...

** package 'sentiment' successfully unpacked and MD5 sums checked

** R

** data

** preparing package for lazy loading

** help

** installing help indices

** building package indices

** testing if installed package can be loaded

** DONE (sentiment) ?

When I call the library, the library is regularly loaded with its related packages ('tm', 'Rstem')

You may found documentation on using the sentiment package here:

https://sites.google.com/site/miningtwitter/questions/sentiment/sentiment 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T13:29:01.663

To install sentiment analysis package use this [http://cran.r-project.org/web/packages/sentiment/index.html](http://cran.r-project.org/web/packages/sentiment/index.html) since the packages are quite old already and R cran removed them from their site.

the packages that are required before installing are tm , Rstem , twitteR,ggplot2,plyr,RColorBrewer and wordcloud it may provide some errors but I worked for me so far :P

# javascript - 在 GPS 和标记之间设置地图边界

> ID：15194438
> 
> 赞同：0
> 
> 时间：2013-03-04T04:11:38.410
> 
> 标签：javascript, google-maps

我不明白如何设置地图边界。我查看了其他几个相关问题，但我无法让它们正常工作。

这就是我正在尝试的：http: [//jsfiddle.net/ZFyDY/](http://jsfiddle.net/ZFyDY/)

在每个标记之后，我调整地图的边界，如下所示：

```
var bounds = new google.maps.LatLngBounds();
bounds.extend(gps_coords); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:36:26.937

不要每次都创建一个新的空边界对象（对于每个标记），在开始时创建一个，将所有点添加到它，然后使用它来缩放和居中地图。

**代码片段：**

```
function map_init() {
  var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  var bounds = new google.maps.LatLngBounds();
  // Add GPS location
  /*
  var sensor_image = new google.maps.MarkerImage("#{asset_path "
    sensor.png "}",
    new google.maps.Size(38, 38),
    new google.maps.Point(0, 0),
    new google.maps.Point(19, 19));
    */

  if (navigator.geolocation) {
    browserSupportFlag = true;
    navigator.geolocation.getCurrentPosition(function(position) {
      var gps_coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

      new google.maps.Marker({
        position: gps_coords,
        map: map,
        // icon: sensor_image
      });

      var bounds = new google.maps.LatLngBounds();
      bounds.extend(gps_coords);

    }, function() {
      // Handle no geolocation support
    })
  }

  //Add Store location
  geocoder = new google.maps.Geocoder();

  geocoder.geocode({
    'address': "New York, NY"
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var store_coords = results[0].geometry.location;

      new google.maps.Marker({
        position: store_coords,
        animation: google.maps.Animation.DROP,
        map: map
      });

      bounds.extend(store_coords);
      map.fitBounds(bounds);

    }
  });
  geocoder.geocode({
    'address': "Boston, MA"
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var store_coords = results[0].geometry.location;

      new google.maps.Marker({
        position: store_coords,
        animation: google.maps.Animation.DROP,
        map: map
      });

      bounds.extend(store_coords);
      map.fitBounds(bounds);

    }
  });
  //Configure map
  //bounds.extend(gps_coords);

  //bounds.extend(store_coords);

  map.fitBounds(bounds);
}
google.maps.event.addDomListener(window,'load', map_init)
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map_canvas"></div>
```

# php - Wordpress：一列中的最新帖子，两列中的其他帖子

> ID：15194440
> 
> 赞同：1
> 
> 时间：2013-03-04T04:11:53.573
> 
> 标签：php, wordpress

我的客户希望将她的主页更改为与此站点相似：[http](http://www.eatliverun.com/) ://www.eatliverun.com/ 其中最新的帖子在一个专栏中全部位于顶部，而其他帖子在两个专栏摘录中。

她希望只显示一个最近的帖子，其余的以两列格式显示。我只是不确定如何正确地做到这一点。

她的网站位于[http://pamelatable.com/](http://pamelastable.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:39:11.037

将计数器集成到循环中可以轻松帮助您实现此布局。尝试如下操作*（注意：“六列”类代表您在 12 列网格中的 2 列布局）*：

```
<?php $count = 1; ?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <?php if ($count == 1) { ?>
            <article>
                    <div>
                        <h2><a href="<?php the_permalink(); >"><?php the_title(); ?></a></h2>
                        <?php the_excerpt(); ?>
                    </div>
            </article>
            <?php $count++; ?>
            <?php } else { ?>
            <?php if($count % 2 == 0) { ?>  
            <div>
                <? } ?>
                <div class="six columns">
                    <article>
                        <div>
                            <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                            <?php the_excerpt(); ?>
                        </div>
                    </article>
                </div>
                <?php if($count % 2 == 1) { ?>
            </div>
            <? } ?>
            <?php $count++; ?>
        <? } ?>
    <?php endwhile; else: ?>
        <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
    <?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:28:39.683

只需在循环中添加一个计数器，并为第一次迭代设置不同的 html 样式。

```
<?php $i = 0; while ( have_posts() ) : the_post(); //inside loop ?>
    <?php if ($i++ == 0) : ?>
        <div>First Post</div>
    <?php else: ?>
        <div>Other Posts</div>
    <?php endif; ?>
<?php endwhile; ?> 
```

在您的 index.php 或其他模板文件中^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:29:59.193

只需使用计数器查看您所在的帖子编号。

```
<?php
if (have_posts()) {
    $i = 0;
    while (have_posts()) {
        the_post();

        if (++$i == 1) {
            echo '<div class="entry-large">';
        } else {
            echo '<div class="entry-small">';
        }
        the_content();
        echo '</div>'
    }
} 
```

# jquery - 在 JQuery 中使用数组 - 添加、删除、重复条目

> ID：15194441
> 
> 赞同：0
> 
> 时间：2013-03-04T04:12:09.353
> 
> 标签：jquery, html, arrays, unique, add

我试图在单击时将 div id 添加到 jquery 数组中。在应用“选定”css 类的 div 上也有一个切换。I only want to add id's to the div when the selected css class is active on the div. 除此之外，我在数组中遇到重复问题。我以为我正确使用了独特的功能，但我想不是。

这是我正在使用的 HTML：

```
<div class="content">
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="acne" style="top:10px;left:265px"><div class="inner_circle" id="acne">ACNE/</br>BLEMISHES</div></div></a>
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="dry_skin" style="top:255px;left:10px"><div class="inner_circle" id="dry_skin">DRY SKIN</div></div></a>
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="oily_skin" style="top:90px;left:100px"><div class="inner_circle" id="oily_skin">OILY SKIN/LARGE PORES</div></div></a>
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="aging" style="top:90px;left:430px"><div class="inner_circle" id="aging">WRINKLES/</br>AGING</div></div></a>
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="irritation" style="top:255px;left:510px"><div class="inner_circle" id="irritation">SENSATIVE SKIN/IRRITATION</div></div></a>
            <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="dark_spots" style="top:430px;left:100px"><div class="inner_circle" id="dark_spots">DARK SPOTS</div></div></a>
        </div> 
```

这是jQuery：

```
var skinCare=[];
$('.skinCare').click(function(){
    //var index = "Skin Care";
    if($('div.skinCare').css('background-color') == 'rgb(255, 0, 0)'){
        skinCare.push(event.target.id);

    }
    var skinCare1 = $.unique(skinCare);
    alert(skinCare1);

}); 
```

它将其输出到警报中：

```
acne, aging, acne, acne, irritation 
```

如果选择了某些东西，我需要它向数组添加一个 id，如果它被取消选择，我需要它从数组中删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:32:10.733

`$.unique`有据可查，仅适用于 DOM 元素：

摘自文档：

> 描述：对 DOM 元素数组进行排序，删除重复项。请注意，这只适用于 DOM 元素的数组，而不适用于字符串或数字。

API 参考：[http ://api.jquery.com/jQuery.unique/](http://api.jquery.com/jQuery.unique/)

改为`$.inArray()`检查值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:29:00.107

尝试这个：

```
var skinCare=[];
$('.skinCare').on("click", function(){
    //var index = "Skin Care";
    var id = $(this).attr('id')
    if ($.inArray(id, skinCare) == -1)
        skinCare.push(id);
    else
        skinCare.splice( $.inArray(id, skinCare), 1 );

    alert(skinCare);
}); 
```

如果 div 的 id 不存在，它将把它推到数组上，如果存在则将其删除。我认为也可以在切换事件上完成。

# xsl-fo - 如何使用 fo 块对齐 xsl 中的内容

> ID：15194445
> 
> 赞同：1
> 
> 时间：2013-03-04T04:12:56.600
> 
> 标签：xsl-fo

我对 xsl 编码很陌生。我想要以下格式的输出。a,b,c 应在同一行对齐，仅内容应在同一行。如何使用 fo 块获得这个。请帮忙。

```
a. För att undvika missbruk av Kontot ska Kortmedlemmen
   signera Kortet omedelbart vid mottagandet
b. För att undvika missbruk av Kontot ska Kortmedlemmen
   signera Kortet omedelbart vid mottagandet
c. För att undvika missbruk av Kontot ska Kortmedlemmen
   signera Kortet omedelbart vid mottagandet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:50:14.203

如果您希望内容对齐，您只需要三个单独`fo:block`的 s，因为它们是像 html div 这样的块元素。但最终您可能希望列表更灵活，并会使用`fo:list-block`.

我创建了一个简单的 fo 来展示两种方法：三个 fo 块与 fo:list-block。如果您有 xsl 驱动程序，则 fo:list-block 非常有用。

由于您是 xsl-fo 的新手，因此每当您对某个元素有疑问时，请查看 [1]。严重地。示例：下面我使用临时距离开始之间的距离，这很神奇，直到您发现它在 [2] 中描述。

```
<?xml version="1.0" encoding="UTF-8"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="Times Roman" font-size="10pt">

<fo:layout-master-set>
    <fo:simple-page-master margin-right="0.5in" margin-left="0.5in" margin-bottom="1in" margin-top="1in" 
        page-width="8.5in" page-height="11in" master-name="main">
      <fo:region-body margin-top="1cm"/>
      <fo:region-before extent="1cm"/>
      <fo:region-after extent="1.5cm"/>
    </fo:simple-page-master>
</fo:layout-master-set>

<fo:page-sequence master-reference="main">

  <fo:flow flow-name="xsl-region-body">

    <fo:block>a. För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>
    <fo:block>b. För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>
    <fo:block>c. För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>

    <fo:list-block start-indent="0.5cm" space-before="0.2cm" provisional-distance-between-starts="0.7cm">
      <fo:list-item margin-top="0.1cm">
        <fo:list-item-label end-indent="label-end()">
          <fo:block>a.</fo:block>
        </fo:list-item-label>
        <fo:list-item-body start-indent="body-start()">
          <fo:block>För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>
        </fo:list-item-body>
      </fo:list-item>

      <fo:list-item margin-top="0.1cm">
        <fo:list-item-label end-indent="label-end()">
          <fo:block>b.</fo:block>
        </fo:list-item-label>
        <fo:list-item-body start-indent="body-start()">
          <fo:block>För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>
        </fo:list-item-body>
      </fo:list-item>

      <fo:list-item margin-top="0.1cm">
        <fo:list-item-label end-indent="label-end()">
          <fo:block>c.</fo:block>
        </fo:list-item-label>
        <fo:list-item-body start-indent="body-start()">
          <fo:block>För att undvika missbruk av Kontot ska Kortmedlemmen signera Kortet omedelbart vid mottagandet</fo:block>
        </fo:list-item-body>
      </fo:list-item>

    </fo:list-block>
  </fo:flow>
</fo:page-sequence>

</fo:root> 
```

[1] [http://www.w3.org/TR/xsl/](http://www.w3.org/TR/xsl/) [2] [http://www.w3.org/TR/xsl/#provisional-distance-between-starts](http://www.w3.org/TR/xsl/#provisional-distance-between-starts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:47:25.823

使用列表块：-

示例：- [http://www.renderx.com/tutorial.html#Lists](http://www.renderx.com/tutorial.html#Lists)

# css - 隐藏不在其自己标签中的文本，但不在同一父标签中的图像

> ID：15194447
> 
> 赞同：0
> 
> 时间：2013-03-04T04:13:12.603
> 
> 标签：css, hide

我有以下 HTML：

```
<span class="wrapper">
  <img src="..." />
  Some text!
</span> 
```

当文本没有自己的标签时，如何隐藏文本而不是图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:28:59.247

相对位置，也许：

```
<span class="wrapper">
    <img src="http://www.placehold.it/100" />
  Some text!
</span>

.wrapper {
    position: relative;
    left: -9999px;
}

.wrapper img {
    position: relative;
    left: 9999px;
} 
```

[演示](http://jsfiddle.net/7qzva/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:17:57.803

CSS 能做的只有这么多。

```
.wrapper {
  color: transparent;
} 
```

我想如果你真的想的话，你可以弄乱字体大小和系列，但这只是一团糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:24:37.297

尝试用来`text-indent`隐藏文字

```
 .wrapper {
      text-indent:-5000px;
    } 
```

或`span`文字并具有独特的`class`和`display:none`

html

```
<span class="wrapper">
  <img src="..." />
  <span>Some text!</span>
</span> 
```

css

```
.wrapper span {
display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T04:56:35.930

从语义上讲，您的代码不正确。您正在内联元素（跨度）内插入一个内联块元素（内联行为作为一个块）。您可以使用以下标记并使其变得容易：

```
<p>
  <img src=""/>
  <span></span>
</p> 
```

然后轻松隐藏跨度。:)

# javascript - 来自字符串函数的图像

> ID：15194449
> 
> 赞同：1
> 
> 时间：2013-03-04T04:13:13.797
> 
> 标签：javascript, arrays, string

我正在尝试制作一个魔术八球模拟，但它对我不起作用。Chrome 中的检查器元素没有显示任何错误，所以我很困惑为什么它不起作用。任何建议将不胜感激。

```
<!DOCTYPE html>
<html lang="en">
<head>

    <title>Project 4: Consistent</title>
    <!-- This part is the function to create my magic eight ball that will randomly give a result, but for certain questions,
    it will provide the same answer always to fool their minds. -->

    <script>

        var answerMap = {}

        var images = ['eightBallYes.png', 'eightBallNo.png', 'eightBallMillionYears.png', 'eightBallAskLater.png', 'eightBallReally.png'];

        //I actually had a little bit of difficulty with this part of the project. 
         //The answer.search method you showed us in class for some reason is not working for me.
        //I worked with the GTF on this part 

        function eightBall() {
            var answer = document.getElementById("answerBox").value;
            answer = answer.toLowerCase();

            if (answer.search(/[r]/) > 0 ) {
                var yes = '../Images/eightBallYes.png' 
                return yes;
            }

            if (answer.search(/[m]/) > 0 ) {
                var no = '../Images/eightBallNo.png' 
                return no;
            }

        }

        window.onload = alert('Welcome to my Project 4')

    </script>
</head>

<body>
<body style="background:#EEEE17">
    <!-- This part of the page will simulate a magic eight ball that will provide at least 4 answers.
    When certain questions are asked, it will return the same answers. This is honestly a pretty cool project to work on. -->

    <div style="text-align:center">
        <h1>Project 4: Booyah!</h1>
        <img src="../images/eightBallTemplate.png" >
        <h2>Magic 8-Ball Game</h2>

        <input type="text" id="answerBox" value="Please ask a question">
        <input type="button" value="Submit for Magical Results" onclick='eightBall()'/>

        <div id="myOutput"></div>

        <hr>

        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/mac.html">Old MacDonald In-Class Activity</a>
        <br>
        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/paramString.html">Parameter In-Class Activity</a>
        <br>
        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/isPrimeLight-jQuery.html">jQuery In-Class Activity</a>
        <br>
        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/string.html">String In-Class Activity</a>

        <footer>

            <p>
                &copy; Copyright  by Alan Sylvestre
            </p>
        </footer>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:20:32.280

您没有对函数的返回值做任何事情。

您可能希望将其分配给`<img>`标签的`src`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:21:52.493

我看到的问题是，`eightBall`当单击按钮并选择正确的值时，您正在调用该函数，但您没有对它做任何事情，例如在`myOutput`div 中附加一个节点。

您还有两个身体标签。

# jquery - 使用 JQuery 显示隐藏的 div 时出现图形 Google Maps 错误

> ID：15194454
> 
> 赞同：-2
> 
> 时间：2013-03-04T04:13:57.290
> 
> 标签：jquery, google-maps, html, show, hidden

我正在使用 JQuery 显示一个包含 Google 地图的隐藏 div。

这是JQuery：

```
$(function(){
$('#searchBox').on('keydown', function(event) {
    if (event.keyCode == 13) {
        if ($(this).val() == "london" || "LONDON") 
            $('#border').slideDown('fast')
        else 
            $('#border').slideUp('fast');
    }
});
}); 
```

这是我的 HTML：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
<div id = "border">
<div id = "map_canvas">
<div id="searchContainer">
<input id="searchBox" type="text" size="50"  placeholder="SEARCH"> 
```

这是我输入“伦敦”时的结果：
![结果](../Images/91cc50c27cd424d4e25c140b15f240e6.png)

地图的内容只显示在左上角，但地图显然在那里。

我正在使用此代码将搜索框与地图链接，但它并不完美：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

ps 由于某种原因，返回键不适用于搜索框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:44:39.120

当我们开发一个具有谷歌地图功能的网站时，我也经历过类似的事情。添加此行以查看问题是否消失：

```
//Test for hidden div map
google.maps.event.trigger([your_map_variable], 'resize'); 
```

在隐藏 div 中处理 Google 地图时，这是一个相当普遍的问题。

# data-structures - 通知的数据库表结构，如社交网站的表

> ID：15194457
> 
> 赞同：1
> 
> 时间：2013-03-04T04:15:03.453
> 
> 标签：data-structures, database-design, notifications

我正在开发像 Facebook 这样的社交网站。我很困惑如何为通知表创建结构。它应该为每个用户分开还是一个巨大的用于频繁添加和删除的所有记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T09:38:21.337

我和你有同样的问题，在研究给出的表结构在哪里时发现了这个[（找到了这个） ：](https://stackoverflow.com/questions/1443960/how-to-implement-the-activity-stream-in-a-social-network)

```
id             
user_id       (int)
activity_type (tinyint)
source_id     (int)  
parent_id     (int)
parent_type   (tinyint)
time          (datetime but a smaller type like int would be better) 
```

在哪里：

**activity_type**告诉我活动的类型，**source_id**告诉我活动相关的记录。因此，如果活动类型意味着“添加收藏”，那么我知道**source_id**是指收藏记录的 ID。

**parent_id/parent_type**对我的应用程序很有用——它们告诉我活动与什么相关。如果一本书被收藏，那么 parent_id/parent_type 会告诉我该活动与具有给定主键 (id) 的书 (类型) 相关

**我在(user_id, time)**上建立索引并查询 user_id IN (...friends...) AND **time** > some-cutoff-point 的活动。放弃 id 并选择不同的聚集索引可能是个好主意——我还没有尝试过。

非常基本的东西，但它很有效，很简单，并且随着您的需求变化很容易使用。此外，如果您不使用 MySQL，您可能会在索引方面做得更好。

它还建议在那里使用[Redis](http://code.google.com/p/redis/)来更快地访问最近的活动。混合使用 Redis，它可能会像这样工作：

*   创建您的 MySQL 活动记录
*   对于创建活动的用户的每个朋友，将 ID 推送到他们在 Redis 中的活动列表中。
*   将每个列表修剪到最后 X 项

Redis 速度很快，并提供了一种通过一个连接来传输命令的方法——因此将一个活动推送给 1000 个朋友需要几毫秒。

有关我所说的更详细的解释，请参阅 Redis 的 Twitter 示例：[http ://code.google.com/p/redis/wiki/TwitterAlikeExample](http://code.google.com/p/redis/wiki/TwitterAlikeExample)

我希望这也可以帮助你

# mobile - 用于手机的 Tinyscrollbar

> ID：15194460
> 
> 赞同：2
> 
> 时间：2013-03-04T04:15:14.457
> 
> 标签：mobile, tinyscrollbar

根据[Tinyscroll 的网站](http://www.baijs.nl/tinyscrollbar/)，移动滚动应该可以工作。在您看到的选项下：

> `invertscroll: false`-- 启用移动反转样式滚动。

有没有人真的让这个工作？帮助将不胜感激。谢谢。

我的代码是标准 HTML 设置，我的选项配置为：

```
$.tiny.scrollbar = {
        options: {
                axis       : 'y'    // vertical or horizontal scrollbar? ( x || y ).
            ,   wheel      : 40     // how many pixels must the mouswheel scroll at a time.
            ,   scroll     : true   // enable or disable the mousewheel.
            ,   lockscroll : true   // return scrollwheel to browser if there is no more content.
            ,   size       : 'auto' // set the size of the scrollbar to auto or a fixed number.
            ,   sizethumb  : 'auto' // set the size of the thumb to auto or a fixed number.
                                             ,   invertscroll  : true // enable scrolling for mobiles

        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T18:28:34.350

它是 scrollInvert 而不是 Invertscroll。如果你不相信我打开 jquery.tinyscrollbar.js ，它将在第二个函数中。

# android - 如何获取listview android中存在的所有切换按钮的状态

> ID：15194461
> 
> 赞同：2
> 
> 时间：2013-03-04T04:15:34.393
> 
> 标签：android, listview, togglebutton

如何获取列表视图android中存在的所有切换按钮的状态

```
public View getView(int position, View convertView, ViewGroup parent) 
    {
        pos = position;

        ApplicationInfo entry = ai.get(position);
        String str = insatllApps.get(position);
        System.out.println("Position============"+(insatllApps.get(position)));
        //Log.d("Check>>:","size>>"+insatllApps.size());
        convertView = mInflater.inflate(R.layout.list__button, null);
        t1=(TextView)convertView.findViewById(R.id.textView1);
        iv=(ImageView)convertView.findViewById(R.id.imageView1);
        tb1=(ToggleButton)convertView.findViewById(R.id.togal);
        tb1.setOnClickListener(this);
        tb1.setTag(pos);
        tb1.setTag(R.id.togal, str);

        iv.setImageDrawable(entry.loadIcon(mPackManager));

        t1.setText(str);

        return convertView;
    }

    @Override
    public void onClick(View v) {

        switch (v.getId()) 
        {
        case R.id.togal:

            String str = ""+v.getTag(R.id.togal);
            boolean status;

            Log.d("samit", "str>>>>"+str);

            //Integer in =  Integer.getInteger(str);
            //Log.d("samit", "in>>>>"+in);
            //int i =in.intValue();
            //Toast.makeText(context, "samit id>>"+v.getTag(), Toast.LENGTH_LONG).show();
            Toast.makeText(context, "samit id>>"+str, Toast.LENGTH_LONG).show();
            //Log.d("samit", "id>>>>"+i);

            break;
        }
    } 
```

在这里，我想获取列表视图中存在的所有切换按钮的状态

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:22:01.560

> 通过使用 ArrayAdapter 而不是 baseAdapter 可以解决滚动问题。接下来在 onStop() 中将值保存在 sharedpreference 中，然后 onStart() 从 sharedpreference 中检索值

```
public class PlanetArrayAdapter extends ArrayAdapter<Planet> {  

private LayoutInflater inflater;  

public PlanetArrayAdapter( Context context, List<Planet> planetList ) {  
super( context, R.layout.checklist, R.id.textView1, planetList );  
// Cache the LayoutInflate to avoid asking for a new one each time.  
inflater = LayoutInflater.from(context) ;  
}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
// Planet to display  
Planet planet = (Planet) this.getItem( position );   

// The child views in each row.  
ToggleButton checkBox ;   
TextView textView ;   

// Create a new row view  
if ( convertView == null ) {  
  convertView = inflater.inflate(R.layout.checklist, null);  

  // Find the child views.  
  textView = (TextView) convertView.findViewById( R.id.textView1 );  
  checkBox = (ToggleButton) convertView.findViewById( R.id.checkBox1 );  

  // Optimization: Tag the row with it's child views, so we don't have to   
  // call findViewById() later when we reuse the row.  
  convertView.setTag( new PlanetViewHolder(textView,checkBox) );  

  // If CheckBox is toggled, update the planet it is tagged with.  
  checkBox.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ToggleButton cb = (ToggleButton) v ;
        Planet planet = (Planet) cb.getTag();  
        planet.setChecked( cb.isChecked() ); 
    }
});

}  
// Reuse existing row view  
else {  
  // Because we use a ViewHolder, we avoid having to call findViewById().  
  PlanetViewHolder viewHolder = (PlanetViewHolder) convertView.getTag();  
  checkBox = viewHolder.getCheckBox() ;  
  textView = viewHolder.getTextView() ;  
}  

// Tag the CheckBox with the Planet it is displaying, so that we can  
// access the planet in onClick() when the CheckBox is toggled.  
checkBox.setTag( planet );   

// Display planet data  
checkBox.setChecked( planet.isChecked() );  
textView.setText( planet.getName() );        

return convertView;  
}  

 } 
```

> //我的活动类是....

```
public class MainActivity extends Activity {

private ListView mainListView;
//private Planet[] planets;
ArrayList<Planet> planets=new ArrayList<Planet>();
private ArrayAdapter<Planet> listAdapter;

/** Called when the activity is first created. */
@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Find the ListView resource.
    mainListView = (ListView) findViewById(R.id.listView1);

    // When item is tapped, toggle checked properties of CheckBox and
    // Planet.

    mainListView
            .setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View item,
                        int position, long id) {
                    Planet planet = listAdapter.getItem(position);
                    planet.toggleChecked();
                    PlanetViewHolder viewHolder = (PlanetViewHolder) item
                            .getTag();
                    viewHolder.getCheckBox().setChecked(planet.isChecked());
                }
            });

    // Create and populate planets.
    //planets = (ArrayList<Planet>) getLastNonConfigurationInstance();

    planets.add(new Planet("1", false));
    planets.add(new Planet("2", false));
    planets.add(new Planet("3", false));
    planets.add(new Planet("4", false));
    planets.add(new Planet("5", false));
    planets.add(new Planet("6", false));
    planets.add(new Planet("7", false));
    planets.add(new Planet("8", false));
    planets.add(new Planet("9", false));
    planets.add(new Planet("10", false));
    planets.add(new Planet("11", false));
    planets.add(new Planet("12", false));
    planets.add(new Planet("13", false));
    planets.add(new Planet("14", false));

    // Set our custom array adapter as the ListView's adapter.
    listAdapter = new PlanetArrayAdapter(this, planets);
    mainListView.setAdapter(listAdapter);
}

public Object onRetainNonConfigurationInstance() {
    return planets;
}
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    for(int i=0;i<planets.size();i++){
        Planet planet = listAdapter.getItem(i);
        planet.toggleChecked();
        System.out.println("position is checked"+i+"="+planet.isChecked());

         SharedPreferences sp=getSharedPreferences("MY_DATA",MODE_PRIVATE);   
         SharedPreferences.Editor et=sp.edit();
         et.putString(""+i, ""+planet.isChecked());
         et.commit();
    }
}
@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    SharedPreferences pf=getSharedPreferences("MY_DATA", MODE_PRIVATE);
    for(int i=0;i<planets.size();i++){
        Log.v("===i===",""+pf.getString(""+i,""));
        if(pf.getString(""+i,"").equals("false")){
        planets.set(i, new Planet(""+i, true));
        }
        else{

        }
    }

 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:21:48.530

如果您想要为支持数组中的每个项目切换，这将不起作用。listView 只保留 N 行，其中 N 是适合屏幕的任何内容。上面或下面的行实际上并不存在，因此您无法查询切换的值。相反，您需要做的是保存一个数组，该数组包含切换应该是的值，并在该位置可见时设置这些值。

例如，我看到您有一个 ApplicationInfo 数组和一个您为该职位获得的字符串数组。相反，您应该有 1 个 ListItems 类数组，其中包含每行的 ApplicationInfo、名称和切换值。当调用 getView 时，您将这些值填充到行视图中。当有人切换开关时，您应该有一个 onClickListener，它将新值保存回 ListItems 数组。

# c - 用 C 语言制作 GUI 模拟器

> ID：15194463
> 
> 赞同：0
> 
> 时间：2013-03-04T04:15:54.277
> 
> 标签：c, user-interface, graphics, simulator

你好 StackOverflow 社区，

我正在用 C 语言编写一个微型鼠标模拟器。我想要一些东西来形象化迷宫的解决方式——http: [//www.youtube.com/watch?v=N9TkDgJNJso](http://www.youtube.com/watch?v=N9TkDgJNJso)

我一直在研究一种方法来实现这一点，但我还没有找到任何有足够的文档来实现我的目标。

我不想使用 ASCII 符号来实现它，对我来说它看起来不专业。

我可以在 C 中使用任何好的 GUI 界面来帮助我完成此任务吗？如果是这样，我将如何使用它？我不介意用另一种语言（如 Java 或 Python）编写代码来实现我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:22:34.180

SDL 是 C 语言的候选者之一，以进行 GUI 模拟。[Lazyfoo](http://lazyfoo.net/)是我为初学者找到的最好的网站之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T02:36:00.487

我看到了你想做的视频。看完视频后，我觉得你不需要这个模拟器程序的 GUI 库。

这是您可以使用的库列表。

1\. [OpenGL](https://stackoverflow.com/tags/opengl/info)这是一个 3D 图形 API，也可以用于 2D，并且可以与 c/c++ 一起使用

2\. [SDL](https://stackoverflow.com/tags/sdl/info)这个库对于初学者来说很容易理解。对于您的程序，这个库更好，可以与 c/c++ 一起使用。

3\. [winBGIm](http://winbgim.codecutter.org/)这和你找到的 graphics.h 一样，可以在 c/c++ 中使用，但它只适用于 windows。

如果您正在寻找 GUI 库，那么这里有一个简短的列表。

1\. [GTK](https://stackoverflow.com/tags/gtk/info)这是用c 编写的，是一个流行的c 图形用户界面库。您可以找到一个名为 [glade](http://glade.gnome.org/)的 gtk 表单 GUI 编辑器，它可以快速轻松地开发用户界面。

2\. [WxWidgets](https://stackoverflow.com/tags/wxwidgets/info)这是用c++编写的，所以你必须使用c++而不是c。

3\. [FLTK](https://stackoverflow.com/tags/fltk/info)

除了这些之外，您还可以在 google 中找到更多的库。你说

> 我不介意用另一种语言（如 Java 或 Python）编写代码来实现我的目标。

然后对于java，你可以使用[swing](https://stackoverflow.com/tags/swing/info)，如果你是windows开发人员，那么在visual c++中使用windows form应用程序；那么您的程序的开发将非常容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:55:55.760

[SDL](http://www.libsdl.org/)具有很强的可移植性。它是用 C 语言编写的，并且有很多文档和[教程](http://www.sdltutorials.com/)。

# r - R 中的并行化：%dopar% 与 %do%。为什么使用单核可以获得更好的性能？

> ID：15194465
> 
> 赞同：6
> 
> 时间：2013-03-04T04:16:22.380
> 
> 标签：r, foreach, parallel-processing

使用 doMC 和 foreach 在其内核之间分配进程时，我的计算机出现了一种奇怪的行为。有人知道为什么使用单核我的性能比使用 2 核更好吗？如您所见，处理相同的代码而不注册任何内核（据说只使用 1 个内核）会产生更高的时间效率处理。虽然 %do% 似乎比 %dopar% 执行得更好，但注册 4 个内核中的 2 个会导致更耗时。

```
require(foreach)
require(doMC)
# 1-core
> system.time(m <- foreach(i=1:100) %dopar% 
+ matrix(rnorm(1000*1000), ncol=5000) )
   user  system elapsed 
  9.285   1.895  11.083 
> system.time(m <- foreach(i=1:100) %do% 
+ matrix(rnorm(1000*1000), ncol=5000) )
   user  system elapsed 
  9.139   1.879  10.979 

# 2-core
> registerDoMC(cores=2)
> system.time(m <- foreach(i=1:100) %dopar% 
+ matrix(rnorm(1000*1000), ncol=5000) )
   user  system elapsed 
  3.322   3.737 132.027
> system.time(m <- foreach(i=1:100) %do% 
+ matrix(rnorm(1000*1000), ncol=5000) )
   user  system elapsed 
  9.744   2.054  11.740 
```

在少数试验中使用 4 个核心会产生非常不同的结果：

```
> registerDoMC(cores=4)
> system.time(m <- foreach(i=1:100) %dopar% 
{ matrix(rnorm(1000*1000), ncol=5000) } )
   user  system elapsed 
 11.522   4.082  24.444 
> system.time(m <- foreach(i=1:100) %dopar% 
{ matrix(rnorm(1000*1000), ncol=5000) } )
   user  system elapsed 
 21.388   6.299  25.437 
> system.time(m <- foreach(i=1:100) %dopar% 
{ matrix(rnorm(1000*1000), ncol=5000) } )
   user  system elapsed 
 17.439   5.250   9.300 
> system.time(m <- foreach(i=1:100) %dopar% 
{ matrix(rnorm(1000*1000), ncol=5000) } )
   user  system elapsed 
 17.480   5.264   9.170 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T04:52:08.687

结果的组合占用了所有的处理时间。`cores=2`如果没有返回结果，这些是我的机器上的场景时间。它本质上是相同的代码，只有创建的矩阵被丢弃而不是被返回：

```
> system.time(m <- foreach(i=1:100) %do% 
+ { matrix(rnorm(1000*1000), ncol=5000); NULL } )
   user  system elapsed 
 13.793   0.376  14.197 
> system.time(m <- foreach(i=1:100) %dopar% 
+ { matrix(rnorm(1000*1000), ncol=5000); NULL } )
   user  system elapsed 
  8.057   5.236   9.970 
```

仍然不是最优的，但至少并行版本现在更快了。

这来自以下文档`doMC`：

> 该包使用包的多核功能为 /函数`doMC`提供并行后端 。`foreach``%dopar%``parallel`

现在，`parallel`使用一种`fork`机制来生成 R 进程的相同副本。从单独的流程收集结果是一项昂贵的任务，这就是您在时间测量中看到的。

# python - 如何在python中生成特定范围内的n维随机变量

> ID：15194468
> 
> 赞同：6
> 
> 时间：2013-03-04T04:16:37.927
> 
> 标签：python, numpy, scipy

我想`[-10,10]`在python中生成各种维度范围内的统一随机变量。2,3,4,5....维数。

我尝试了 random.uniform(-10,10)，但这只是一维的。我不知道如何为 n 维做这件事。我的意思是二维，

```
[[1 2], [3 4]...] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T04:22:24.677

由于`numpy`已标记，您可以使用以下中的随机函数`numpy.random`：

```
>>> import numpy as np
>>> np.random.uniform(-10,10)
7.435802529756465
>>> np.random.uniform(-10,10,size=(2,3))
array([[-0.40137954, -1.01510912, -0.41982265],
       [-8.12662965,  6.25365713, -8.093228  ]])
>>> np.random.uniform(-10,10,size=(1,5,1))
array([[[-3.31802611],
        [ 4.60814984],
        [ 1.82297046],
        [-0.47581074],
        [-8.1432223 ]]]) 
```

并修改`size`参数以满足您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:20:19.640

采用`random.uniform`

```
import random

random_variable_in_range_of_minus_ten_and_plus_ten = random.uniform(-10, 10) 
```

请注意，它介于（按设计） [-10, 10) 而不是 [-10, 10]

现在对于n维，我真的不明白你的意思，但假设它是一个有n个数字的向量，你可以：

```
def n_dimensional_random_variables(n, lbound=-10, rbound=10):
  return [random.uniform(lbound, rbound) for i in xrange(n)] 
```

# java - 多边形的参数化构造函数

> ID：15194469
> 
> 赞同：0
> 
> 时间：2013-03-04T04:16:43.127
> 
> 标签：java, arrays, polymorphism, polygon, abstraction

我正在使用 ArrayLists、抽象和多态性为学校创建一个破砖游戏。我创建了一个包含 draw 方法的抽象类 DrawableBrick。我已经成功地创建了填充我的 ArrayList 的其他子类，并且游戏运行良好，但我需要创建一个名为 ShavedBrick 的新子类，它是一个可以轻松添加到我的 ArrayList 的多边形。

对于如何为此类创建参数化构造函数并将类数据设置为用户传入的参数，我有点困惑。这是我到目前为止所拥有的。它必须是一个八角形。

```
import java.awt.*;
import java.util.*;

public class ShavedBrick extends DrawableBrick {

    //data
    private int [] xArray = new int [8];
    private int [] yArray = new int [8];
    private int numberOfSides;
    //private Color color;

    //constructor
        public ShavedBrick(int[] x {}, int [] y {}, int numberOfPoints)
        {
            Random ranGen = new Random();
            xArray[0] = x;
            yArray[0] = y;
            this.numberOfSides = numberOfPoints; 
            //this.width = width;
            //this.height = height;
            this.color = new Color(0,(ranGen.nextInt(156)+100),0);

        }

    //draw - tells the ShavedBrick to draw itself, using the Graphics object received
        public void draw(Graphics g)
        {
            Color prevColor = g.getColor(); //save previous color associated with g
            g.setColor(this.color);
            g.fillPolygon(xArray, yArray, numberOfSides);
            g.setColor(prevColor);                  //restore previous color
         } 
```

这是在 ArrayList 中创建对象的示例

```
//some constants created in the main data
private final int WALLWIDTH = 5;    //Walls' width
private final int BRICKSTARTX = WALLWIDTH;
private final int BRICKSTARTY = 100 + WALLWIDTH;
private final int BRICKWIDTH = 150;
private final int BRICKHEIGHT = 75;

//Fill the ArrayList with random DrawableBricks

    for (int i = 0; i<10; i++){
        Random random = new Random();
        int randomBrick = random.nextInt(3);
        if (randomBrick == 0){
            myBricks.add(i, new RedBrick((BRICKSTARTX + i*BRICKWIDTH),(BRICKSTARTY + BRICKHEIGHT),BRICKWIDTH,BRICKHEIGHT));
            myBricks.add(i, new RedBrick((BRICKSTARTX + i*BRICKWIDTH),((BRICKSTARTY+75) + BRICKHEIGHT),BRICKWIDTH,BRICKHEIGHT));
        }
        else if (randomBrick == 1) {
            myBricks.add(i, new BlueBrick((BRICKSTARTX + i*BRICKWIDTH),(BRICKSTARTY + BRICKHEIGHT),BRICKWIDTH, BRICKHEIGHT));
            myBricks.add(i, new BlueBrick((BRICKSTARTX + i*BRICKWIDTH),((BRICKSTARTY+75) + BRICKHEIGHT),BRICKWIDTH,BRICKHEIGHT));
        }
        //else if (randomBrick == 3){
            //myBricks.add(new ShavedBrick(0,0,2,6));
        //}
        else if (randomBrick == 2){
            for (int i = 0; i<8; i++){
                xValues[] array = new xArray[8];
                myBricks.add(new ShavedBrick(int [i] x {BRICKSTARTX,});
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:26:30.870

我会建议这样的事情......

```
public ShavedBrick(int[] x, int[] y, int numberOfPoints)
        {
            Random ranGen = new Random();
            for(int i = 0; i < 8; i ++) {
                 xArray[i] = x[i];
                 yArray[i] = y[i];
            }
            this.numberOfSides = numberOfPoints;
            this.color = new Color(0,(ranGen.nextInt(156)+100),0);

        } 
```

基本上，`{` `}`从构造函数签名中删除大括号 ()。并使用 for 循环将输入数组中的 8 个元素中的每一个添加到类的私有数组中。您可以将类的私有数组直接指向输入数组，但我个人会避免这种情况，只需将值复制到新创建的数组对。

您也可以使用`Array.copyOf(int[], int)`http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf(int[], int) 。

在您的客户端代码中，只需运行一个循环来计算您的坐标，然后像这样将这些坐标传递给构造函数......

```
int[] xArray = new int[8];
int[] yArray = new int[8];
for (int i = 0; i < 8; i ++) {
   xArray[i] = //some value for the x co-ordinate of the ith point
   yArray[i] = //some value for the y co-ordinate of the ith point
}
ShavedBrick b = new ShavedBrick(xArray, yArray, 8);
myBricks.add(b); //finally add the new shaved brick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:27:42.650

您可以直接分配参数数组，如下所示：

```
public ShavedBrick(int[] xArray, int[] yArray, int numberOfPoints)
    this.xArray = xArray;
    this.yArray = yArray;
    //... 
```

`int[] x {}`实际上创建了一个新的空数组，这当然不是有效的参数声明。参数声明应如下所示`int[] xArray`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:29:50.473

我不确定你的问题是什么，但如果你有一个八边形，那么你不需要`numberOfPoints`参数：

```
public ShavedBrick(int[] x, int [] y)
    {
        Random ranGen = new Random();
        this.numberOfSides = 8; //it's always 8
        xArray = Arrays.copyOf(x,numberOfSides); //note, this method will pad array with zeros if x.length is less than 8
        yArray = Arrays.copyOf(y,numberOfSides);
        this.color = new Color(0,(ranGen.nextInt(156)+100),0);
    } 
```

# java - 为什么这个 FileOutputStream 会给出 NullPointerException？

> ID：15194471
> 
> 赞同：1
> 
> 时间：2013-03-04T04:17:11.237
> 
> 标签：java, android, fileoutputstream

因此，当我尝试写入文件时，我正在运行一个创建 NullPointerException 的应用程序。

当用户按下新的设置按钮时，我的第一个活动（见下文）调用 NewSet 活动。当我尝试在 NewSet 活动中写入输入时，它会引发 NullPointerException。打印出 fileOut 显示它的值为 null，这是不应该的。fileOut 是全局声明的，但在 onCreate 中初始化。两个类如下。（...表示由于不相关而省略的代码。）

```
public class MainActivity extends Activity {
    static ArrayList sets;
    FileOutputStream fileOut;
    BufferedReader read;
    String line;
    ArrayAdapter<String> adapter;
    ListView listView;
    Intent newSetIntent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_main);
        newSetIntent=new Intent(this,NewSet.class);

        listView=(ListView)findViewById(R.id.setList);
        sets=new ArrayList();
        try {
            read=new BufferedReader(new BufferedReader(new InputStreamReader(openFileInput("SETS.txt"))));
            fileOut=openFileOutput("SETS.txt",Context.MODE_APPEND);
        } catch (FileNotFoundException e) {
            System.out.println("File not found");
            try {

                fileOut.write("".getBytes());
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("IOE");
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        getSets();
        toList();
        super.onCreate(savedInstanceState);
    }

    ...

    public void newSet(String newSetName){
        System.out.println(newSetName);
        sets.add(newSetName);

        try {
            fileOut=openFileOutput("SETS.txt",Context.MODE_APPEND);
            fileOut.write(newSetName.getBytes());
            fileOut.write("\n".getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (NullPointerException NPE){
            System.out.println(fileOut);
            NPE.printStackTrace();
        }

    }
}

public class NewSet extends Activity {

    EditText input;
    String setName;
    MainActivity main;
    ...
    public void submit(View view){
        setName=input.getText().toString();
        System.out.println("CREATING SET:"+setName);
        main.newSet(setName);
        finish();

    }

} 
```

完整的堆栈跟踪

```
03-03 23:08:42.183: W/System.err(8435): java.lang.NullPointerException
03-03 23:08:42.183: W/System.err(8435):     at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:173)
03-03 23:08:42.183: W/System.err(8435):     at com.ollien.flashcards.MainActivity.newSet(MainActivity.java:112)
03-03 23:08:42.183: W/System.err(8435):     at com.ollien.flashcards.NewSet.submit(NewSet.java:35)
03-03 23:08:42.193: W/System.err(8435):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 23:08:42.193: W/System.err(8435):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 23:08:42.193: W/System.err(8435):     at android.view.View$1.onClick(View.java:3594)
03-03 23:08:42.193: W/System.err(8435):     at android.view.View.performClick(View.java:4204)
03-03 23:08:42.193: W/System.err(8435):     at android.view.View$PerformClick.run(View.java:17355)
03-03 23:08:42.193: W/System.err(8435):     at android.os.Handler.handleCallback(Handler.java:725)
03-03 23:08:42.203: W/System.err(8435):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-03 23:08:42.203: W/System.err(8435):     at android.os.Looper.loop(Looper.java:137)
03-03 23:08:42.203: W/System.err(8435):     at android.app.ActivityThread.main(ActivityThread.java:5226)
03-03 23:08:42.203: W/System.err(8435):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 23:08:42.203: W/System.err(8435):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 23:08:42.203: W/System.err(8435):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-03 23:08:42.203: W/System.err(8435):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-03 23:08:42.203: W/System.err(8435):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:45:58.737

`android.content.ContextWrapper`课堂上抛出异常。方法是：

```
public FileOutputStream openFileOutput(String name, int mode) throws FileNotFoundException
{
    return mBase.openFileOutput(name, mode); // Line number 173
} 
```

在这里，我看到可能导致 NullPointerException 的唯一可能性是`mBase`类型的数据成员`Context`是 NULL。

你能检查`Context`数据成员是否为非空。

# sql-server - ASP.net MVC 调用选择自定义列的存储过程

> ID：15194474
> 
> 赞同：0
> 
> 时间：2013-03-04T04:17:52.820
> 
> 标签：sql-server, asp.net-mvc-3

我正在使用 sql server 使用 Asp.net mvc razar 开发一个应用程序，我有一个包含名为`Fname, Mname, lname, dob`. 我创建了一个存储过程，它返回`FullName, Age`类似的数据

```
Select Fname + Mname + LName As FullName, spFunctionReturnAge(dob) As Age
From Customer 
```

我为此存储过程导入并创建了一个函数，但是当我在 edmx 设计视图中导入存储过程时，没有具有 FullName 和年龄列的实体或模块。

如何添加一个模块或从这个存储过程返回所有行？

*我的存储过程有一些返回行的计算，所以我不能直接使用视图，只能通过使用存储过程来完成*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:30:15.333

您将需要创建一个自定义实体类并将其映射到设计器中的 select 方法到一个函数。如果您愿意，您还可以在设计器中映射插入更新和删除功能，但过程略有不同。

选择方法见： [http ://www.robbagby.com/entity-framework/entity-framework-modeling-select-stored-procedures/](http://www.robbagby.com/entity-framework/entity-framework-modeling-select-stored-procedures/)

对于其他所有内容（插入更新和删除），请参阅[http://msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:22:41.697

除非出于某种原因需要传入参数，否则请尝试使用视图而不是存储过程。

```
CREATE VIEW vwCustomer AS
SELECT Fname + Mname + LName As FullName, spFunctionReturnAge(dob) As Age 
FROM Customer 
```

大多数（如果不是所有）从 SQL Server 引用表的程序都会将视图识别为表，但是存储过程的处理方式不同。

# java - Java - 设置外观时，MenuBar 在 JFrame 之上移动

> ID：15194475
> 
> 赞同：1
> 
> 时间：2013-03-04T04:17:52.847
> 
> 标签：java, swing, look-and-feel, menubar

当我设置外观和感觉时，我的 AWT MenuBar 显示在 JFrame 顶部，而在我使用 Nimbus 或 Synth 时不会发生这种情况。

我不能使用 JMenuBar 的原因是我正在制作的应用程序是 MMORPG RuneScape 的加载程序，它是一个 AWT 小程序，因为 AWT 优先于摆动 MenuBar 下拉菜单被小程序隐藏。

我除了这是因为我正在混合 AWT 和 Swing 组件，但我没有看到任何其他选择。

这里有几张图片可以帮助进一步解释我的问题

菜单栏：[https ://dl.dropbox.com/u/64681860/Code%20Images/MenuBar.PNG](https://dl.dropbox.com/u/64681860/Code%20Images/MenuBar.PNG)

JMenuBar：[https ://dl.dropbox.com/u/64681860/Code%20Images/JMenuBar.PNG](https://dl.dropbox.com/u/64681860/Code%20Images/JMenuBar.PNG)

我使用的外观和感觉是 Substance - BusinessBlackSteel，但是这些问题也会出现在其他 L&F 上，例如 Metal

我希望有人可以解决其中一个问题（框架顶部的菜单栏，隐藏在小程序下的 JMenu）

先感谢您。

# sql - 编写sql查找聚合

> ID：15194480
> 
> 赞同：0
> 
> 时间：2013-03-04T04:18:00.350
> 
> 标签：sql, database, aggregation

我有这些关系

```
Entry
-----
id
creationdate
grade

Subject
------
id
name 
```

并加入表

```
Entry_Subjects
------------
entry_id
subject_id 
```

我需要创建 sql 以查找在特定创建日期属于特定主题（例如“java”）的条目的平均成绩

我尝试了以下

假设主题“java”的 id 为 2

```
SELECT creationdate,
    avg(grade) 
FROM (SELECT * 
     FROM Entry 
     WHERE id IN
         (SELECT id 
          FROM Entry_Subjects 
          WHERE subject_id =2
         )
     )
GROUP BY creationdate; 
```

我得到错误

```
subquery in FROM must have an alias 
```

我试图纠正这个但不能

有人可以告诉我为什么会发生这个错误..我的数据库知识不是那么好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:30:30.723

可能需要 JOIN 而不是嵌套的 SELECT。

```
SELECT
    creationdate,
    AVG(grade)
FROM Entry e
INNER JOIN Entry_Subjects f
    ON e.id = f.entry_id
INNER JOIN Subject s
    ON f.subject_id = s.id
WHERE s.name = 'java' --this is where you replace 'java' with a variable to search by name
GROUP BY creationdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:20:18.847

也可以使用分析函数来完成

```
select a.creationdate,avg(a.grade) over (partition by a.creationdate order by a.creationdate) as avg_grade
from entry a,subject b,entry_subjects c
where a.id=c.entry_id and b.id=c.subject_id
and upper(b.name)='JAVA'; 
```

# ruby-on-rails - Bundle Install 无法从 https://rubygems.org/ 获取规范

> ID：15194481
> 
> 赞同：51
> 
> 时间：2013-03-04T04:18:12.930
> 
> 标签：ruby-on-rails, ruby, gem, bundler, railstutorial.org

我正在尝试遵循 Hartl Rails 教程，但在使用 bundler gem 时遇到了问题。

使用命令“捆绑安装”或“捆绑更新”时，我得到以下输出：

> [从https://rubygems.org/](https://rubygems.org/)获取源索引
> 
> 无法从[https://rubygems.org/获取规格](https://rubygems.org/)

我已经搜索过这个输出，但没有在网上找到很多相关的问题。

也许我有另一个打断捆绑器的宝石？在这一点上，我对 Rails 几乎没有经验。

```
 source 'https://rubygems.org'

gem 'rails', '3.2.12'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'

  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2' 
```

**我的解决方案是两个部分：**我将 https 更改为 http，这暂时解决了问题。第二个问题是我认为我安装的 ruby​​ 2.0.0 很糟糕，即使我使用的是全新安装的 ruby​​ 1.9.3。所以我重新安装了 ruby​​ 2.0.0，我可以将 bundle install 与 https 一起使用。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2018-11-12T05:18:50.093

以防万一以上都不能满足下一个无畏的探险家，我想我会放弃这里，在我花了 4 个小时做搜索的变种之后，我终于发现 IPV6 是罪魁祸首，在找到[这个之后help.rubygems.org 上的特定线程](http://help.rubygems.org/discussions/problems/31074-timeout-error)。解决方案？这（Fedora，Linux）：

```
sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1
sudo sysctl -w net.ipv6.conf.default.disable_ipv6=1 
```

设置一个 shell 脚本来打开和关闭 IPV6，这样我就可以在没有它的情况下运行命令，现在一切都运行良好。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-06-25T14:04:31.437

我遇到过同样的问题。我发现的唯一可行的解​​决方案是在 Gemfile 中强制使用 http 而不是 https：

```
source 'http://rubygems.org' 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-17T04:35:39.840

如果在 Windows 中，您可以尝试以下操作：

```
set HTTP_PROXY= <your proxy address without http://>

set HTTPS_PROXY=%HTTP_PROXY% 
```

例如：

```
HTTP_PROXY=mycompany.myproxy.com:8080

HTTPS_PROXY=%HTTP_PROXY% 
```

为我工作

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-07-08T11:43:49.213

这也可能是暂时的网络问题。尝试使用命令重新启动网络服务

```
service network restart 
```

如果它的 *nix 机器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-15T22:44:38.130

`ruby-2.0.0-p247`我在 OS X 10.8.5 上使用时遇到了同样的问题。

确保第一行在`Gemfile`使用`https://`

```
source 'https://rubygems.org' 
```

我重新安装了那个版本的 ruby​​。

```
rvm reinstall ruby-2.0.0 
```

Ruby 已升级`ruby-2.0.0-p598`（版本取决于最新补丁）。

`bundle`然后尽管重新安装了所有宝石，但仍可以正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-11T11:06:49.397

导致此类问题的另一个原因是您是否位于代理服务器后面。我在这里描述了解决方案，也许它对其他人有用。:)

如果您不知道您的代理的登录/密码，并且遇到此问题，您可以首先检查您是否需要（重新）安装任何东西，通过命令：

```
C:\...> bundle check
Resolving dependencies...
The Gemfile's dependencies are satisfied 
```

[如果您得到上述其他响应，您可以在此处 (rubygems.org)](http://rubygems.org)找到正确版本的正确 gem ，然后通过命令安装它（从下载 gem 的目录）：

```
gem install <gem-name> --locally 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-23T05:59:17.987

我在 Cloud 9 中工作时遇到了这个问题。在尝试了几次“捆绑安装”并向 c9 支持发送电子邮件（没有回复）之后，我能够通过终止所有进程并硬重启 IDE 来使其正常工作。

通过直接单击右侧顶部显示 CPU、内存、磁盘的小条形图来执行此操作。然后单击进程列表，将它们全部选中，然后强制终止。然后退出进程列表。再次单击条形图，这次单击“重新启动”。

在此之后，我能够毫无问题地运行捆绑软件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-15T06:42:11.923

我的只是一个简单的网络问题，只需重启电脑/路由器

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-02-05T14:50:01.100

使用 http 或 https 都不起作用。

在我禁用 IP v6 后，它工作了

[https://support.purevpn.com/how-to-disable-ipv6-linuxubuntu](https://support.purevpn.com/how-to-disable-ipv6-linuxubuntu)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-29T18:49:15.840

用于`wget`查看是否可以访问域

```
wget http://rubygems.org/latest_specs.4.8.gz 
```

如果失败，请尝试以下操作。

编辑您的`/etc/resolv.conf`文件并在顶部附近添加这些行以使用 Google 的名称服务器

```
nameserver 8.8.8.8
nameserver 8.8.4.4 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-12T06:32:23.517

为代理添加变量工作正常。

此外，如果您像我一样使用 Bitnami redmine，您可以将其添加到 setenv.bat 中，然后当您使用 Bitnami Redmine 快捷方式启动命令行时，它将自动添加到您的环境中。您可以在 Bitnami 安装文件夹下找到它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-23T08:10:56.197

有时它是由于您使用的代理而发生的。我试图通过使用没有代理的连接来解决这个问题，并且一切正常。
然后尝试：

```
bundle update 
```

然后去

```
bundle install 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-23T00:41:10.577

对我来说，重新启动计算机有效。我已经重新安装了 ruby​​，更新了 bundler，删除了 's' https:// 但它们都不起作用！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-05T00:23:53.813

如果您使用的是 Cloud9，只需重新启动（命令 R）并重试

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-06-26T03:35:18.950

运行后将源表单 https 更改为 http

`sudo bundle update` `sudo bundle install`

# xml - 高级 Vimeo API 和 XML 输出

> ID：15194490
> 
> 赞同：0
> 
> 时间：2013-03-04T04:19:46.580
> 
> 标签：xml, api, vimeo

我正在尝试将 XML 输出到 FORM 文本区域，但由于某种原因内容不显示。

```
http://pastebin.com/4DHNAw9W 
```

顶部包含的文件 - vimeo.php。

```
https://github.com/vimeo/vimeo-php-lib/blob/master/vimeo.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:25:20.127

默认的 vimeo php 库假定您不关心响应类型是什么。它会自动使用 PHP 格式，并在最后对数据进行反序列化。

所以当你打电话

```
$videos = $vimeo->call('vimeo.videos.getAll', array('full_response' => '1','summary_response' => '1')); 
```

$videos 变量已经是一个可以使用的对象。

如果您更改格式，库仍然会尝试反序列化数据，并且在任何非 php 格式上都会失败。

如果你想使用 XML，你需要从库中删除[unserialize](https://github.com/vimeo/vimeo-php-lib/blob/master/vimeo.php#L234)函数并在下面发出请求（格式 => xml）

```
$videos = $vimeo->call('vimeo.videos.getAll', array('format' => 'xml', 'full_response' => '1','summary_response' => '1')); 
```

# javascript - 三个 innerHTML 实例都在工作，第四个不工作

> ID：15194491
> 
> 赞同：0
> 
> 时间：2013-03-04T04:19:53.370
> 
> 标签：javascript, innerhtml

我对编程完全陌生，所以请耐心等待。我最近才完成了一大块 Codecademy，并且读了几本书，所以我绝对是个菜鸟。我已经设置了一个函数，它通过 Google Maps API 遍历 Google Places 库调用的结果，并将返回对象的属性写入我的 HTML 中的元素。我使用前三个 innerHTML 实例成功地做到了这一点（使用了 stackoverflow 社区的一些帮助，谢谢大家！）。我在第四个实例中遇到了一个巨大的问题。

我调用了谷歌地图提供的距离矩阵服务，经过几个小时的修补，我终于让它工作了，因为 console.log 命令似乎正在返回我想要的东西。但是 foodDistance[0].innerHTML = distance 不起作用！它让我发疯。这是我的代码，所以你知道我在说什么，以防不清楚：

```
function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < 10; i++) {
        var place = results[i];
        createMarker(place);
        var foodName = foodArray[i].getElementsByClassName("listing_name");
        var foodRating = foodArray[i].getElementsByClassName("listing_rating");
        var foodAddress = foodArray[i].getElementsByClassName("listing_address");
        var foodDistance = foodArray[i].getElementsByClassName("listing_dist");
        foodName[0].innerHTML = place.name;
        foodRating[0].innerHTML = place.rating;
        foodAddress[0].innerHTML = place.vicinity;
        distanceService.getDistanceMatrix({
            origins: [houston],
            destinations: [place.geometry.location],
            travelMode: google.maps.TravelMode.DRIVING,
            avoidHighways: false,
            avoidTolls: false,
            unitSystem: google.maps.UnitSystem.IMPERIAL
          }, distanceCallback);
        function distanceCallback(response, status) {
          if (status == google.maps.DistanceMatrixStatus.OK) {
              var origins = response.originAddresses;
              for (var x = 0; x < origins.length; x++) {
                var results = response.rows[x].elements;
                for (var j = 0; j < results.length; j++) {
                  var element = results[j];
                  var distance = element.distance.text;
                  foodDistance[0].innerHTML = distance;
                  console.log(distance);
                }
              }
            }
          };
        };
      }
    } 
```

这是带有填充内容的 HTML。Listing_name、listing_rating 和 listing_address 都按预期填充：

```
 <div class="hyperlocal_listing_snippet" id="fd1">
  <div class="listing_name">Stephen's bombass burritos</div>
  <div class="listing_dist">0.2 Miles</div>
  <div class="listing_address">blah blah blah</div>
  <div class="listing_rating">3.2</div>
</div> 
```

提前感谢您的反馈。让我发疯的是前三个工作完美，但第四个不合作。我要么正在寻找新的眼睛来帮助我找出我愚蠢的菜鸟错误，要么我正在寻找解释为什么这不起作用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:55:57.933

您正在遭受循环中的异步函数的经典问题。

尝试在该`for(...) {`行之后添加：

```
(function(i) { 
```

而这在相应的之前`}`：

```
})(i); 
```

这将“锚定”您的问题的价值`i`并解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:43:35.963

您的功能`distanceCallback`是异步功能。当调用此回调函数时`distanceCallback`包含`foodDistance[0]`无效或不同的值，因为您正在父函数`foodDistance`的`for`循环中更新变量

# python - 如何通过python中的中断创建事件系统

> ID：15194494
> 
> 赞同：1
> 
> 时间：2013-03-04T04:20:12.633
> 
> 标签：python, events, signals

由于我对 Python GUI 的了解为零，因此
我需要一些帮助，以建立一种机制，
通过 HTML、CSS 或 Ajax（node.js、Apache 或 nginx 服务器）向 Python 程序发出请求以执行某些功能。

例如，
我有一个 python 运行一个`while True:`循环，但在给定的时刻想要执行一个中断信号并发送数据来执行一种事件系统的函数。

首先，我将一个事件绑定到程序：

```
#program.bind(EVENT_NAME, EVENT_HANDLER)
program.bind(miaowcat, miaowfunc) 
```

程序运行，任何时候执行中断，执行函数`miaowfunct`并将事件的数据传递给`*args`

```
def miaowfunct(*args): 
```

这是一个原型。因此，`args`可以使用数字信号或其他元素。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:28:40.520

这类问题正是[消息系统](http://en.wikipedia.org/wiki/Message_passing)旨在解决的问题。

您编写了一些需要在触发器处执行的代码（这称为*消费者*）。

您需要执行该函数的代码（称为*生产者*）创建一条消息并将其发送给代理。

代理接收您的消息并将其放入队列中。

*消费者*正在这个队列上监听消息，当它看到一个消息时，它会“唤醒”，运行自己，然后重新进入睡眠状态。

对于 Python，通常使用以下内容：

*   消息代理 = [RabbitMQ](http://rabbitmq.com)
*   任务队列 = [Celery](http://celeryproject.org)

# c# - ServiceStack - 将 HttpStatus 返回到 Android 设备

> ID：15194499
> 
> 赞同：2
> 
> 时间：2013-03-04T04:20:34.783
> 
> 标签：c#, android, rest, servicestack

我一直在使用 ServiceStack 创建一个 Android 设备可以与之通信的 REST 服务 - 到目前为止一切顺利，我可以将 DTO 发布到 REST 服务并成功保存......我遇到的麻烦是发回一个返回状态以通知 android 应用程序发生了什么！

```
ResponseEntity <HttpStatus> responseEntity = restTemplate
                    .exchange (requestUrl,
                               HttpMethod.POST,
                               requestEntity,
                               HttpStatus.class);
/* Never gets to this bit, always throws a runtime exception */
Log.i (TAG, "responseEntity.getStatusCode () --> '" + responseEntity.getStatusCode () + "'");
return responseEntity.getStatusCode (); 
```

我的其余服务的 C# 代码是......

```
public object Post(RegisteredDeviceDto registeredDeviceDto)
{
    Debug.WriteLine("RegisteredDeviceRestService::POST::RegisteredDeviceDto (RegisteredDeviceAdd)");
    if (registeredDeviceDto != null)
    {
        Debug.WriteLine("DeviceToAdd:" + registeredDeviceDto.ToString());
        RegisteredDeviceDomainObject registeredDeviceToAdd =
        _DtoToDomainObject.registeredDeviceDtoToDomainObject(registeredDeviceDto);

        _RegisteredDeviceDao.saveDomainObject(registeredDeviceToAdd);
        return new HttpResult(new object (), "JSON", HttpStatusCode.OK);
    }
} 
```

即使只使用简单的“返回 HttpStatus.OK”，我的 android 应用程序中仍然会出现运行时异常，但所有内容都会发送到服务器并保存得很好......有点难倒我在响应代码方面遇到的问题：磷

一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:03:42.737

我对 Android 或 Spring 不熟悉，但我猜您的 ServiceStack 响应如何被转换/反序列化为 Android/Spring 存在问题`ResponseEntity <HttpStatus>`。HttpStatus 看起来像一个 ENUM，如果我理解这里的文档 - [http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/http/ResponseEntity.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/http/ResponseEntity.html-) -它看起来像你试图将响应正文转换为 HttpStatus ENUM。也许试试`ResponseEntity<String>`？

# ios - 适用于 uitableview 单元格的 iOS UIViewAnimation

> ID：15194503
> 
> 赞同：1
> 
> 时间：2013-03-04T04:21:20.947
> 
> 标签：ios, animation, uitableview, tableview, uiviewanimation

目前我有一个表格视图，如果选择了一个单元格，则使用动画 UITableTableViewRowAnimationFade 在所选索引路径处重新加载一个单元格。我不太喜欢它，因为它波涛汹涌，不光滑。我对 UIView 动画一点也不熟悉，我希望了解更多关于它们的信息。我如何使这个操作变得更平滑和更好看？谢谢。

代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (selectedCellIndexPath == indexPath.row) {

        selectedCellIndexPath = -1;
        [callsTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        return;
    }

    if (selectedCellIndexPath >= 0)
    {
        NSIndexPath *previousPath = [NSIndexPath indexPathForRow:selectedCellIndexPath inSection:0];
        selectedCellIndexPath = indexPath.row;
        [callsTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:previousPath] withRowAnimation:UITableViewRowAnimationFade];
    }

    selectedCellIndexPath = indexPath.row;

    [callsTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

# c# - 数据表循环性能

> ID：15194504
> 
> 赞同：2
> 
> 时间：2013-03-04T04:21:31.383
> 
> 标签：c#, mysql, .net, for-loop

我对 C# 中的循环数据表有疑问

我有一个 DataTable 有大约 20.000 行和 60 列

我想编写一个 SQL 查询将 DataTable 中的所有数据插入数据库

我正在使用我的 Sql

这是我的 SQL 语法：

```
"Insert into a values (...), (...), (...), ..." 
```

“（...）”是一行中的所有数据

这是 C# 代码：

```
DataTable myDataTable; // myDataTable has 20.000 rows and 60 columns
string mySql = "insert into a values "
for(int iRow = 0; iRow < myDataTable.Rows.Count; iRow++)
{
     mySql += "(";
     for(int iColumn = 0; iColumn < myDataTable.Columns.Count; iColumn++)
     {
          string value = myDataTable.Rows[iRow][iColumn].ToString()
          string parameter = "@" + iRows.ToString() + iColumns.ToString();
          // here is some code for add "parameter" and "value" to MySqlCommand
          mySql += ","
     }

     // remove "," at the end of string mySql
     mySql  = mySql.SubString(0, mySql.Length - 1);

     mySql += "),"
}
// remove "," at the end of string mySql
// after that, I will execute mySql command to insert data into database here 
```

当我运行该代码时，需要很长时间才能完成

我尝试从“string”更改为“StringBuilder”，但它只是快了一点。

如何让代码运行得更快？

感谢大家的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:27:38.363

我在评论中询问了一些时间信息，但后来我注意到了这行代码：

```
mySql  = mySql.SubString(0, mySql.Length - 1); 
```

我建议将其从循环中删除，并使用更智能的代码仅在需要时附加逗号。

例如，在内循环中，`mySql`在每个参数之前而不是之后将逗号添加到变量中，除了 where `iColumn == 0`。这将阻止每次在字符串末尾出现不必要的逗号。

# c++ - 如何匹配 C++ 正则表达式中的 \0 字符？

> ID：15194513
> 
> 赞同：2
> 
> 时间：2013-03-04T04:22:40.293
> 
> 标签：c++, regex

我需要将文本“\0”与匹配“a”或“b”的正则表达式匹配。（C++ 中字符常量的正则表达式）。我尝试了一堆不同的正则表达式，但还没有一个成功的。我最近的尝试：

```
^['].|\\0['] 
```

我尝试过的大多数其他事情都给出了段错误，所以这确实是我得到的最接近的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:16:48.150

这与我测试过的（'a'，'b'，'\0'）非常有效。

如果你没有，`std::regex`或者`boost::regex`我猜你能从中得到什么，那就是我使用的正则表达式是`('.'|'\\0')`.

```
#include <boost/regex.hpp>
#include <string>
#include <iostream>
#include <vector>

int main() {
    std::vector<std::string> strings;
    strings.push_back(R"('a')");
    strings.push_back(R"('b')");
    strings.push_back(R"('\0')");
    boost::regex rgx(R"(('.'|'\\0'))");
    boost::smatch match;
    for(auto& i : strings) {
        if(boost::regex_match(i,match, rgx)) {
            boost::ssub_match submatch = match[1];
            std::cout << submatch.str() << '\n';
        }
    }
} 
```

[例子](http://liveworkspace.org/code/4uto2i%242)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:14:44.633

有效的正则表达式（在这种情况下，使用 C 标头）是：

```
^('(.|([\\]0))') 
```

感谢@WhozCraig 的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:45:53.783

没有什么神奇的`'\0'`；它只是一个字符，就像任何其他字符一样，在正则表达式中使用它不需要（几乎）任何特殊操作。您可能遇到的唯一问题是，如果您在传递给将其视为字符串结尾的函数的字符文字中间使用它。为避免这种情况，请将其强制为`std::string`：

```
const char s[] = "a\0b";
std::string not_my_str(s); // not_my_str holds "a"
std::string str(s, 3);     // str holds "a\0b" 
```

一旦构建了字符串对象，嵌入的对象`'\0'`就不会得到特殊处理。当然，除非您使用特殊处理的功能复制内容。

# ruby-on-rails - 远程上传和存储图像？

> ID：15194515
> 
> 赞同：1
> 
> 时间：2013-03-04T04:22:53.113
> 
> 标签：ruby-on-rails, ruby, file-upload, image-uploading, imgur

我正在构建一个 Rails 应用程序，用户可能希望偶尔上传图像。有没有办法让用户将图像无缝上传到远程主机，如 imgur，并将图像的 URL 存储在我的数据库中，以便在需要时显示它们？

我想给人的印象是他们将图像直接上传到数据库，而实际上将它们卸载到 imgur。是否有一个宝石可以做到这一点，或者有没有人有一个很好的方法来实现这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:52:20.967

不确定 imgur，但如果你想要的只是将图像存储在远程服务器上，我认为 s3 + 回形针可能是一个不错的选择。

aws SDK：[http ://aws.amazon.com/articles/8621639827664165](http://aws.amazon.com/articles/8621639827664165)

回形针：[https ://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:55:18.800

使用“gem 'carrierwave'”和“gem 'fog'”上传到 Google Cloud Storage 或 Amazon S3 可能是您的最佳选择。

[http://railscasts.com/episodes/383-uploading-to-amazon-s3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

# android - 活动 onResume()

> ID：15194520
> 
> 赞同：3
> 
> 时间：2013-03-04T04:23:14.440
> 
> 标签：android, android-lifecycle

我正在编写一个**购物车应用程序**，我**允许用户在其中选择要购买的物品并将他们需要的物品添加到购物车**中，为此我给出了两个不同的选项卡，

*第一个标签*，浏览产品

*第二个选项卡*，浏览购物车中的项目 [用户添加]

在这里，我面临一个小问题。每当我*更改商品数量*时，我都*不会在购物车中更新数量*，而是**会更改总价**。

 *所以，告诉我我需要在代码中添加什么来更改数量，**如何在选项卡之间移动时更新数量**

我在 ViewCartActivity.java 下的 onResume() 中编写了以下代码：

```
@Override
protected void onResume() 
{
    super.onResume();
    if (Constants.mItem_Detail.size() == 0) 
    {
        return;
    }

    Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(SingleTrackActivity.KEY_TOTAL));
    for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
    {   
    mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(SingleTrackActivity.KEY_TOTAL));
    }
    mGrandTotal = String.valueOf(mGTotal);
    mTxtViewGrandTotal.setText(mGrandTotal);
    myTextVeiwGrandTotal.setText(mGrandTotal);
    mTxtViewGrandTotal.setText(new DecimalFormat("##.##").format(mGTotal));
    mTotal = String.valueOf(Constants.mItem_Detail.size());
    mItems.setText(mTotal);
} 
```

请看下面的屏幕截图，我已经将一个项目的数量从 1 更新到 10，因此我的总金额发生了变化，但数量没有任何变化，只有 1，每当我在标签之间移动时，我都面临这个问题：

![在此处输入图像描述](../Images/e3bea355d1670398c2ba1b9303610c6b.png)

使用 Products.java 类中的以下代码更新项目的数量：

```
 for (int i = 0; i < Constants.mItem_Detail.size(); i++) {
                                            if (Constants.mItem_Detail.get(i).get(TAG_NAME)
                                                    .equals(song_name)) {
                                                Constants.mItem_Detail.remove(i);
                                                break;} 
```

**笔记：**

如果我不会从产品选项卡移动到购物车选项卡，我可以查看项目数量的变化，但是一旦我从产品选项卡移动到购物车选项卡，我就不会看到项目数量的变化......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:46:47.243

我猜你是在正确的道路上，耐心检查，将物品添加到购物车然后更新购物车物品，等待几秒钟，我希望它会更新你的购物车......

您的代码对我来说看起来不错：

```
 for (int i = 0; i < Constants.mItem_Detail.size(); i++) {
        if (Constants.mItem_Detail.get(i).get(TAG_NAME)
        .equals(song_name)) {
        Constants.mItem_Detail.remove(i);
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:50:56.913

我假设您已将选项卡实现为片段。
如果这是真的，那么您需要将 onResume() 方法从 Activity 移动到 Fragment。

片段生命周期的参考链接：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)*

# android - How do I round a button programmatically in Android?

> ID：15194522
> 
> 赞同：2
> 
> 时间：2013-03-04T04:23:20.543
> 
> 标签：android

I have a `Button` which populates a `GridView` using a custom adapter's call to `getView()`. As such, there is no .xml file for the `Button`.

Is there a way to programmatically round the `Button`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T04:27:47.463

Use a nine patch, here is an example one:

![enter image description here](../Images/ea976210d26986b363500bd21f2093a5.png)

save this in your `/res/drawable-mdpi/` directory with the filename `btn_round.9.png`

then in your java code do this:

```
mBtn.setBackgroundResource(R.drawable.btn_round); 
```

because it is 9 patch wit will stretch to fit whatever content you are putting inside the button. Search for "android draw9patch" to learn more about how to create the 9 patch files.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:45:07.107

Below given method returns rounded bitmap of image.Apply it to button image and check if this can help

```
public Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) {
    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap
            .getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
    final RectF rectF = new RectF(rect);
    final float roundPx = pixels;

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);

    return output;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:27:17.557

Use an XML drawable background with corners and use setBackground. See [How to make the corners of a button round?](https://stackoverflow.com/questions/6054562/how-to-make-the-corners-of-a-button-round)

You can use this even though the button itself isn't defined in xml, you're just declaring the background as an xml file.

# c# - 如何将时间和 olson 时区转换为另一个 olson 时区的时间？

> ID：15194524
> 
> 赞同：2
> 
> 时间：2013-03-04T04:23:35.470
> 
> 标签：c#, datetime, nodatime

我有一个输入：

1.  时间（上午 8:00）
2.  奥尔森时区（美国/纽约）

我需要将时间转换为另一个奥尔森时区（美国/洛杉矶）

.net 或 nodatime 中进行该转换的最佳方式是什么。我基本上是在 C# 中寻找这种方法的等价物：

```
 var timeInDestinationTimeZone = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(CurrentSlot.Date, TimeZoneInfo.Local.Id,
                                                                            room.Location.TimeZone.TimeZoneName); 
```

但是上面的这个 .Net 方法只适用于 Windows 时区名称（而且我有 Olson 名称）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:59:33.693

观察：

```
var tzdb = DateTimeZoneProviders.Tzdb;

var zone1 = tzdb["America/New_York"];
var ldt1 = new LocalDateTime(2013, 3, 4, 8, 0); // March 4th, 2013 - 8:00 AM
var zdt1 = zone1.AtLeniently(ldt1);

var zone2 = tzdb["America/Los_Angeles"];
var zdt2 = zdt1.ToInstant().InZone(zone2);
var ldt2 = zdt2.LocalDateTime; 
```

注意调用`AtLeniently`- 那是因为您没有足够的信息来绝对确定您正在谈论的时间。例如，如果您在 DST 回退过渡当天谈论凌晨 1:30，您将不知道您是在谈论过渡之前还是之后。 *会做出你的意思之后*`AtLeniently`的假设。如果您不想要这种行为，则必须提供一个偏移量，以便您知道您所谈论的当地时间。

 *实际*转换*是通过`ToInstant`获取您正在谈论的 UTC 时刻完成的，然后`InZone`将其应用于目标区域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T04:35:40.180

马特（非常好）答案第二部分的替代方案：

```
// All of this part as before...
var tzdb = DateTimeZoneProviders.Tzdb;    
var zone1 = tzdb["America/New_York"];
var ldt1 = new LocalDateTime(2013, 3, 4, 8, 0); // March 4th, 2013 - 8:00 AM
var zdt1 = zone1.AtLeniently(ldt1);

var zone2 = tzdb["America/Los_Angeles"];

// This is just slightly simpler - using WithZone, which automatically retains
// the calendar of the existing ZonedDateTime, and avoids having to convert
// to Instant manually
var zdt2 = zdt1.WithZone(zone2);
var ldt2 = zdt2.LocalDateTime; 
```*

# uitabbarcontroller - 如何向 UITabBarController 添加导航栏？

> ID：15194526
> 
> 赞同：0
> 
> 时间：2013-03-04T04:23:54.020
> 
> 标签：uitabbarcontroller, uinavigationbar

我试图在我的 tabbarcontroller 中的所有视图控制器中添加一个导航栏。我是否将导航栏添加到各个视图控制器...

或者

还有其他方法吗？

# regex - 正则表达式以多种编码解析邮件主题

> ID：15194527
> 
> 赞同：-1
> 
> 时间：2013-03-04T04:24:18.353
> 
> 标签：regex, parsing, email

那里！

我想匹配一个邮件主题中的所有内联编码并在 utf8 中构建主题字符串。

一些例子：

```
[Listname | Topic123] =?utf-8?Q?encodedtext?=
=?iso-8859-1?q?this=20is=20some=20text?=
Klartext-Betreff
[Listname | Topic123] =?utf-8?Q?encodedtext?= =?iso-8859-1?q?this=20is=20some=20text?=
=?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=
    =?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?= 
```

我还收到了一封带有两种不同编码的邮件（最后一行中的示例）。

在电子邮件中，也可以将主题拆分为多行，其中每一行（第一行除外）以至少一个空格开头

所以我正在寻找一个正则表达式，它解析：

部分+

其中 Part 是以下之一：

*   带空格的文本
*   =?charset?encoding?encoded-text?=

我认为它会变成这样：

```
ENC = (=\?)([A-Za-z0-9-]*)(\?)([A-Za-z0-9-]*)(?)([Any Character])(\?=)
Part = any character that doesnt match to ENC or ENC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:48:58.173

```
function decode ($string, $source_enc, $dest_enc)
{
    $parts = preg_split (
        '/=\?([^?]+)\?([^?]+)\?([^?]+)\?=/', 
        $string, 
        -1, PREG_SPLIT_DELIM_CAPTURE);

    $result = "";

    for ($i = 0; $i < count ($parts); $i++)
    {
        $part = $parts [$i];

        if ($i % 4 == 0)
            $result .= iconv ($source_enc, $dest_enc, $part);
        else
        {
            $charset = $parts [$i++];
            $encoding = $parts [$i++];
            $text = $parts [$i];

            if ($encoding == 'Q' || $encoding == 'q')
                $text = quoted_printable_decode ($text);
            else if ($encoding == 'B' || $encoding == 'b')
                $text = base64_decode ($text);

            $result .= iconv ($charset, $dest_enc, $text);
        }
    }

    return $result;
}

echo (decode ("=?utf-8?Q?encodedtext?= =?iso-8859-1?q?this=20is=20some=20text?=
=?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=
    =?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?=", 
    "ISO-8859-1", "ISO-8859-1")); 
```

我的输出是：

```
encodedtext this is some text If you can read this yo u understand the example. 
```

# json - express.js 中的 JSON 序列化算法

> ID：15194530
> 
> 赞同：0
> 
> 时间：2013-03-04T04:24:41.773
> 
> 标签：json, node.js, express

我很好奇 express 用来将对象序列化为 JSON 的算法是什么，以及是否有办法修改它。

我注意到它只序列化对象自己的属性，这使得发送从其他对象继承的对象变得困难。它还省略了值为 的任何属性`undefined`。我知道从功能上讲，省略它们与包含它们相同并且可以节省带宽，但是包含它们会使 JSON 更容易被阅读它试图弄清楚如何使用 API 的人发现。

无论如何，这是一个关于 express 如何做事情的问题，而不是关于我的代码应该做什么的问题:=)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T04:32:37.830

序列化不是`express`这样，它使用标准的序列化方法[stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。您可以使用参数对事物的序列化方式进行一定程度的修改`replacer`，但无法强制它显示`undefined`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:30:58.367

> 它还省略了值未定义的任何属性。

没有值未定义的属性。如果你读取了一个不存在的属性，就会返​​回 undefined，不是因为它的值等于 undefined，而是因为没有这样的属性，所以没有返回值。

未定义的属性集是（无穷大 - 定义的值）。

```
var o = {};
o.x  // undefined 
```

如果 express 使用下面的算法来查找属性，它永远不会找到 x。

```
for (var key in o) {
    if (o.hasOwnProperty(key)) {
        console.log(o[key]);
    }
} 
```

# function - Fortran：从另一个模块中的过程调用模块中的函数

> ID：15194534
> 
> 赞同：1
> 
> 时间：2013-03-04T04:25:56.220
> 
> 标签：function, module, fortran, encapsulation, subroutine

我承认标题可能有点晦涩难懂，所以让我举个例子说明我想做什么和不做什么。我有一个主程序，它调用一个模块中的子程序：

```
Program Test_program

Use module_A
Implicit none
Integer :: i
i = 1
call subroutine_A(i)

End program Test_program 
```

这个 subroutine_A 在模块 A 中，然后调用模块 B 中的函数 B：

```
module module_A

use module_B
implicit none
contains

subroutine subroutine_A(i)
implicit none
integer, intent(in) :: i
double precision :: j
j = function_B(i)
end subroutine subroutine_A

end module module_A 
```

最后，module_B 看起来像这样：

```
module module_B
Implicit none
Contains

double precision function function_B(i)
implicit none
integer,intent(in) :: i
function_B = 5.d0*i
end function function_B

end module module_B 
```

程序和模块在不同的文件中。不幸的是，这不会编译，因为我收到一条错误消息：

错误 Subroutine_A：对子程序 function_B 的引用不在 CALL 语句中。

程序似乎认为 function_B 是一个子程序，所以我不知道该怎么做。顺便说一句，我正在尝试按照我被告知的那样使用模块对我的子例程和函数进行适当的封装，但是如果这不是正确的方式，我愿意接受建议（我被告知不要使用接口，而是使用模块，因此这个测试）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:19:24.797

抱歉，我实际上“解开了”这个谜团：我没有使用名称 function_B，而是使用名称 Compute_Error。当我将该函数名称更改为其他名称时，上述方法有效。似乎我链接到某个地方的某个库有一个子程序 compute_error，尽管错误消息没有告诉我是哪一个，或者这是否是肯定的问题。无论如何，再次抱歉，但我想我可以发布该帖子，因为它有助于了解如何链接模块和过程（我在互联网上没有找到很多该特定示例的示例）。当然这种使用模块和程序的方式不是正确的方式，欢迎补充一些有用的知识。

# c# - 无法处理包含命名空间的 XML 文件

> ID：15194537
> 
> 赞同：1
> 
> 时间：2013-03-04T04:26:30.897
> 
> 标签：c#, linq-to-xml

我有一个 xml 文件，其结构如下（部分）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <TestRun id="ee3838c9-a7e2-4ddf-acb1-58589e39422d"  xmlns="http://microsoft.com/schemas/VisualStudio/TeamTest/2010">
      <TestSettings name="LocalSettings" id="e445106a-c672-4959-94d3-ec8cef9ac7e4">
        <Results>
<UnitTestResult executionId="0e790a10-105f-44b1-a8f7-f72709651c17" testId="ae349466-4276-cfa9-908c-026a8589473b" testName="ValidateEmailAddressAndCompanyCode7" computerName="ACCUREVDEV" duration="00:00:41.4297842" startTime="2013-02-27T23:18:52.0238567-08:00" endTime="2013-02-27T23:19:34.0057439-08:00" testType="13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b" outcome="Passed" testListId="8c84fa94-04c1-424b-9868-57a2d4851a1d" relativeResultsDirectory="0e790a10-105f-44b1-a8f7-f72709651c17">
</UnitTestResult>
<UnitTestResult executionId="e9e7679d-fc39-43b7-a096-819f054a3795" testId="1a808be5-21a5-37c4-5892-2969707ae42f" testName="AccountExtensionSubscriptionWithOneMachineAndThreeSubscriptionsTest_withExpiredMachines" computerName="ACCUREVDEV" duration="00:00:56.1243356" startTime="2013-02-27T23:19:34.0174655-08:00" endTime="2013-02-27T23:20:30.8418287-08:00" testType="13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b" outcome="Passed" testListId="8c84fa94-04c1-424b-9868-57a2d4851a1d" relativeResultsDirectory="e9e7679d-fc39-43b7-a096-819f054a3795">
</UnitTestResult>    .............................
............................... 
```

可以看出，涉及一个命名空间

```
xmlns="http://microsoft.com/schemas/VisualStudio/TeamTest/2010" 
```

现在如果我这样做

```
string source = @"D:\23_18_43.trx";
XDocument xDoc = XDocument.Load(source);           
var xxxx = (from data in xDoc.Descendants("Results")
            select data).Descendants("UnitTestResult").ToList(); 
```

没有价值。

然而，如果我省略命名空间并进行处理，它就可以工作。

如果不从源文件中明确删除命名空间，我该如何继续？可以以编程方式完成吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:35:23.787

要在 XML 中查找具有默认命名空间的节点，您仍需要使用命名空间搜索该节点。

例如。

```
XNamespace defaultNs = "http://microsoft.com/schemas/VisualStudio/TeamTest/2010"; 
```

然后在您的“查询”中；

```
var xxxx = (from data in xDoc.Descendants(defaultNs + "Results")
            select data).Descendants(defaultNs +"UnitTestResult").ToList(); 
```

# c# - 在同一解决方案中使用 VB.NET 和 C#

> ID：15194542
> 
> 赞同：1
> 
> 时间：2013-03-04T04:27:02.180
> 
> 标签：c#, .net, vb.net, c#-4.0, interop

我的组织以前用 VB.NET 编写过软件。我们决定对其进行一些增强，并想知道我们是否可以用 C# 编写新的增强功能？VB.NET 项目可以与 C# 项目并存吗？

性能呢？

还有其他问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T04:31:15.477

VB.NET 项目可以与用 C# 编写的项目完美交互，因为它们都编译为 MSIL。不应该有任何性能影响。

您必须处理的主要问题是，如果它包含多种语言，您的解决方案将会变得更加复杂。另外，开发人员需要同时了解 VB.NET 和 C#，通常*C# 开发人员在被迫使用 VB.NET 工作时会变得脾气暴躁*；）

另一方面，C# 开发人员远多于 VB.NET 开发人员。

# c# - 使用线程的 FIFO 进程调度

> ID：15194543
> 
> 赞同：1
> 
> 时间：2013-03-04T04:27:07.377
> 
> 标签：c#, multithreading

我正在尝试使用线程创建先进先出进程调度。在每个线程完成后，我希望它暂停它或将其移动到等待队列，等待 10 到 20 之间的随机滴答数，然后让它跳回。我希望整个模拟运行到 250 个滴答声然后终止但我在第一个“线程正在运行或终止：它无法重新启动”之后收到此错误。真的不知道从这里去哪里，有什么想法吗？我的代码如下。

```
public class Alpha
{
    int counter = 0;
    private int sleepTime;
    private static Random rand = new Random();

    public Alpha()
    {
        sleepTime = rand.Next(10001);
    }

    public void Process1()
    {
            Console.WriteLine(string.Format(
                "Process 1 RUNNING (run#: {0})", counter));
            Console.WriteLine();

            Thread current = Thread.CurrentThread;
            Console.WriteLine("{0} going to sleep", current.Name, sleepTime);
            Console.WriteLine();
            Thread.Sleep(sleepTime);
            Console.WriteLine("{0} done sleeping", current.Name);
            Console.WriteLine();    
    }

    public void Process2()
    {
            Console.WriteLine();
            Console.WriteLine(string.Format(
                "Process 2 RUNNING (run#: {0})", counter));
            Console.WriteLine();

            Thread current = Thread.CurrentThread;
            Console.WriteLine("{0} going to sleep", current.Name, sleepTime);
            Console.WriteLine();
            Thread.Sleep(sleepTime);
            Console.WriteLine("{0} done sleeping", current.Name);
            Console.WriteLine();
    }

    public void Process3()
    {
          Console.WriteLine(string.Format(
              "Process 3 RUNNING (run#: {0})",counter));
          Console.WriteLine();

          Thread current = Thread.CurrentThread;
          Console.WriteLine("{0} going to sleep", current.Name, sleepTime);
          Console.WriteLine();
          Thread.Sleep(sleepTime);
          Console.WriteLine("{0} done sleeping", current.Name);
    }

    public void Process4()
    {
          Console.WriteLine(string.Format(
              "Process 4 RUNNING (run#: {0})", x));
          Console.WriteLine();

          Thread current = Thread.CurrentThread;
          Console.WriteLine("{0} going to sleep", current.Name, sleepTime);
          Console.WriteLine();
          Thread.Sleep(sleepTime);
          Console.WriteLine();
          Console.WriteLine("{0} done sleeping", current.Name);
          Console.WriteLine();  
    }
};

public class StepOne
{
    public static void Main()
    {
        Alpha oAlpha = new Alpha();

        Thread bThread = new Thread(new ThreadStart(oAlpha.Process1));
        bThread.Name = "Process 1";
        Thread cThread = new Thread(new ThreadStart(oAlpha.Process2));
        cThread.Name = "Process 2";
        Thread dThread = new Thread(new ThreadStart(oAlpha.Process3));
        dThread.Name = "Process 3";
        Thread eThread = new Thread(new ThreadStart(oAlpha.Process4));
        eThread.Name = "Process 4";

        for (int a = 0; a <= 250; a++)
        {
            bThread.Start();
            while (!bThread.IsAlive) ;
            bThread.Join();
            Console.WriteLine();

            cThread.Start();
            while (!cThread.IsAlive) ;
            cThread.Join();
            Console.WriteLine();

            dThread.Start();
            while (!dThread.IsAlive) ;
            dThread.Join();
            Console.WriteLine();

            eThread.Start();
            while (!eThread.IsAlive) ;
            eThread.Join();
            Console.WriteLine();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:36:55.840

当线程 proc 完成时，它终止线程。您必须在线程方法中放置一个循环以使其保持活动状态-您将让它阻塞在同步原语上，例如事件，然后当您希望该线程恢复工作时从其他地方发出该事件的信号。然后线程可以从队列中获取其工作项。这基本上是内置线程池所做的，只是以比我们其他人希望实现的更好的方式。有什么理由不能只使用内置线程池？

# python - 将值附加到列表中的每个子列表

> ID：15194551
> 
> 赞同：2
> 
> 时间：2013-03-04T04:27:50.120
> 
> 标签：python

我有一个列表列表，我想将一个常量值附加到完整列表的每个子列表中，例如：

```
_lst = [[1, 2], [3, 4], [5, 6]] 
```

我想附加`7`到每个子列表中，这样`_lst`就变成了：

```
[[1, 2, 7], [3, 4, 7], [5, 6, 7]] 
```

有没有完成工作的好方法（例如使用`zip`）？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T04:32:18.377

```
for l in _lst:
    l.append(7) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T04:30:16.090

```
_lst = [ele + [7] for ele in _lst] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:31:06.443

```
>>> tmp = [ i.append(7) for i in _lst ]
>>> print _lst
[[1, 2, 7], [3, 4, 7], [5, 6, 7]] 
```

# c# - 如何使自定义 PrincipalPermissionAttribute 处理用户或角色更改

> ID：15194553
> 
> 赞同：2
> 
> 时间：2013-03-04T04:27:53.190
> 
> 标签：c#, .net, security, attributes

我编写了一个自定义的 PrincipalPermissionAttribute，它使用 AuthenticationService 而不是 Thread.CurrentPrincipal，就像 PrincipalPermissionAttribute 一样。

它按我喜欢的方式工作，但是如果用户注销并重新登录，或者如果用户的角色发生变化，则永远不会再次调用属性代码。我怀疑我没有通知它需要重新检查权限的属性？CreatePermission 方法上设置的断点只命中一次。

属性代码是否只评估一次？该属性当前正在为单击我的视图代码隐藏的按钮装饰一个事件处理程序。

如果我将方法改回使用 PrincipalPermissionAttribute，那么它会按我预期的那样工作，作为没有正确角色的用户注销并重新登录会引发我期望的 SecurityException。我是否错过了覆盖属性？

```
[Serializable]
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = true, Inherited = false)]
public sealed class RolePermissionAttribute : CodeAccessSecurityAttribute
{
    private readonly PrincipalPermission _revoke = new PrincipalPermission(PermissionState.None);
    private readonly PrincipalPermission _allow = new PrincipalPermission(PermissionState.Unrestricted);
    private IList<string> _roles;

    private readonly IAuthenticationService _authorisationService;

    public RolePermissionAttribute(SecurityAction action)
        : this(action, ServiceLocator.Current.GetInstance<IAuthenticationService>())
    {
    }

    public RolePermissionAttribute(SecurityAction action, IAuthenticationService authorisationService)
        : base(action)
    {
        _authorisationService = authorisationService;
    }

    public string Roles { get; set; }

    public bool Authenticated { get; set; }

    public override IPermission CreatePermission()
    {
        _roles = (this.Roles ?? string.Empty).Split(',', ';')
                                .Select(s => s.Trim())
                                .Where(s => s.Length > 0)
                                .Distinct()
                                .ToList();

        bool result = false;

        if (_authorisationService != null)
        {
            var principal = _authorisationService.ClientSecurityPrincipal;
            if (principal == null)
            {
                throw new SecurityException("Access Denied. You are not logged in");
            }

            // If Authenticated is enforced then revoke if user is not authenticated
            if (Authenticated && !_authorisationService.IsAuthenticated)
            {
                throw new SecurityException("Access Denied. You are not authenticated");
            }

            // Allow if the principal is in any of the roles
            result = _roles.Any(principal.IsInRole);
            if (!result)
            {
                throw new SecurityException("Access Denied. You are not in an allowed Role");
            }
        }

        return result ? _allow : _revoke;
    }
} 
```

}

这是具有属性的方法

```
[RolePermission(SecurityAction.Demand, Authenticated = true, Roles = "Admin")]
private void barButtonItemConfig_ItemClick(object sender, ItemClickEventArgs e)
{
   // Do stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:34:25.373

好的，我已经弄清楚它是如何工作的。CreatePermission 实际上只调用一次。返回的 IPermission 是检查用户是否处于所需角色的类。

因为我正在为用户 A 返回一个不受限制的允许，所以用户 B 无论其角色如何都获得了相同的访问权限。

我需要创建自己的实现 IPermission 的类并将我的逻辑移动到 Demand 方法中。或者（更简单的选项）将我的服务中的 Principal 分配给 Thread.CurrentPrincipal 并使用开箱即用的 PrincipalPermissionAttribute。

# php - 在 php 代码中使用 javascript 引号

> ID：15194555
> 
> 赞同：1
> 
> 时间：2013-03-04T04:28:03.833
> 
> 标签：php, javascript, confirmation

我在 php 代码中使用 javasript 时遇到了一些麻烦，我对使用双引号和单引号感到困惑。

```
echo '<a href="shop.php?buy=1" onclick="return confirm("Are you sure you want to delete?")">Delete</a>'; 
```

或者如何在 php 中执行上述代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:30:30.187

您需要使用`htmlspecialchars`（对于 HTML）转义引号：

```
echo '<a href="..." onclick="return confirm('
   .htmlspecialchars('"Are you sure"') . '">Delete</a>'; 
```

（或者你可以写`&quot`;）

...但不要那样做。使用JS事件注册：

```
document.getElementById('a-id').addEventListener('click', function (e) {
    if (!confirm("Are you sure...")) {
        e.preventDefault();
    }
}); 
```

在 JS 文件中执行此操作。它要求`<a>`有一个 ID（您也可以使用许多其他选择器，但 ID 是最简单的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:31:52.410

使用此代码

```
echo '<a href="shop.php?buy=1" onclick="return confirm(\'Are you sure you want to delete?\')">Delete</a>'; 
```

你必须逃避引号。

[http://viper-7.com/F6uI0L](http://viper-7.com/F6uI0L)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T04:39:12.267

改变如下

```
echo "<a href=\"shop.php?buy=1\" onclick=\"return confirm('Are you sure you want to delete?')\">Delete</a>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T04:41:37.893

为什么不将 HTML 放在 PHP 标记之外？例如你可以这样做：

```
...
?>

<a href="shop.php?buy=1" onclick="return confirm('Are you sure you want to delete?')">Delete</a>

<?php
... 
```

回显 HTML 的另一种方法是：

```
echo <<<HTML
<a href="shop.php?buy=1" onclick="return confirm('Are you sure you want to delete?')">Delete</a>
HTML 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T04:31:21.707

`confirm("Are you sure you want to delete?")">`您需要转义双引号的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T05:51:32.430

您需要使用 php echo 调用 javascript 函数

```
echo '<a href="..." onclick="fun()">href_link</a>'; 
```

...但是你必须使用 JS 函数

```
<html><head><script type="text/javascript">
function fun()
{
 if(confirm('are you sure')) return TRUE;
 else return FALSE;
}
</script>
</head>
<body></body>
</html> 
```

# sql - 按日期时间列分组并保持平均值

> ID：15194560
> 
> 赞同：1
> 
> 时间：2013-03-04T04:28:43.837
> 
> 标签：sql, sql-server-2008

我是 SQL 新手，在这里遇到问题。我想我了解我可能需要做的事情，但不了解它的语法。基本上我每小时有大量的计数，我需要将所有这些每小时计数并将它们连接在一起以按天而不是按小时显示，然后取整天计数的平均值。我还需要弄清楚这些日子中的哪一天是工作日并排除周末......我认为我做得正确，但我可能错了。如果有更有效的方法，请告诉我！

```
 SELECT DatePart(WEEKDAY, [EVENT_TIME]) as DayoftheWeek
,[EVENT_TIME]
,[COUNT]
,[CLASS_SCHEME_ID]
,[CLASS_NUM]
,[ERROR_CODE]
,[REC_ENTRY_TIME]
FROM [SAMPLE_DATA].[dbo].[651511]
WHERE [EVENT_TIME] >= '2009-01-01' AND DatePart(WEEKDAY, [EVENT_TIME]) >=2 AND DatePart(WEEKDAY, [EVENT_TIME]) <= 6
GROUP BY ,[EVENT_TIME]
,[COUNT]
,[CLASS_SCHEME_ID]
,[CLASS_NUM]
,[ERROR_CODE]
,[REC_ENTRY_TIME]
GO 
```

我一直在阅读关于我可能需要做的事情……也许是关于选角的事情？我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:31:35.400

不确定您是否想要比 Day （即类）更低的粒度，但如果不是，我认为这应该可以帮助您。如果您希望结果的粒度更细，请将这些字段添加到您的选择和分组依据。

这还将考虑@@DateFirst 的任何非默认设置

```
SELECT
    DatePart(Weekday, event_time) as DayName,
    avg(count) as DayAvg
FROM
    sample_date.dbo.651511
WHERE 
    event_time >= '2009-01-01' and
    (DATEPART(dw, date_created) + @@DATEFIRST) % 7) NOT IN (0, 1)
Group by
    DatePart(Weekday, event_time) 
```

# javascript - 将 4 个项目作为参数传入不起作用

> ID：15194563
> 
> 赞同：0
> 
> 时间：2013-03-04T04:28:50.817
> 
> 标签：javascript, function

所以我要创建一个函数`makeFunction (width, height, symbol, zigZag )`，其中`width`是字符宽度，重复`height`次数`symbol`用作字符，并且`zigZag`是一个布尔值，用于确定模式是以“zig”还是“zag”开头。

输出应如下所示`true`：

```
makeFunction( 4, 2, "#", true );
#
##
####
###
##
#
#
##
###
####
###
##
# 
```

和`false`：

```
makeFunction( 4, 2, "#", false );
####
###
##
#
#
##
###
####
###
##
# 
```

每当我尝试运行脚本时，它都会说`undefined`并且不确定缺少什么。这是我的代码[http://jsfiddle.net/u6mjm/5/](http://jsfiddle.net/u6mjm/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:50:17.887

你有很多很多问题。我已经把它们都修好了。

```
var width = customJS.get("width"); 
```

应该

```
var width = customJS.get("width").value; 
```

我还根据应该如何使用它们来转换为数字和布尔值。

您在循环`allLines` *内部*`height`重新创建，但它应该在外部。

您没有正确传递或使用`zigZag`.

[http://jsfiddle.net/ExplosionPIlls/u6mjm/6/](http://jsfiddle.net/ExplosionPIlls/u6mjm/6/)

# android - Android 会压缩原始 XML 资源吗？

> ID：15194564
> 
> 赞同：5
> 
> 时间：2013-03-04T04:28:51.737
> 
> 标签：android

Android 是否压缩原始 XML 资源，即`res/xml`目录下的那些？

我有一些资源`assets`并计划将它们移动到`res/xml`（以便我可以将它们本地化）但我不确定它们是否会被压缩。

我知道我可以通过解压缩一些 apk 来检查这一点，但也许有人已经知道了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:51:17.827

请看一下Brian Hardy 的[这篇](http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/)博文。所有“可压缩文件”都被压缩，甚至是 xml 文件。xml 文件被 aapt 压缩成二进制格式。如果您不想压缩文件，可以将它们保存为博文中的一种文件类型。此外，您可以将数据打包成 .zip 文件（android 不会尝试对其进行压缩），然后在阅读时自行解压缩。

# mongodb - MongoDB聚合，我如何得到一个字段的总和？

> ID：15194568
> 
> 赞同：1
> 
> 时间：2013-03-04T04:29:15.527
> 
> 标签：mongodb

MongoDB的聚合似乎相当复杂，如果有人能给我一个好的、简单的例子让我牢牢掌握基础知识，我将不胜感激。

考虑一个包含包含文件名和文件大小的文档的集合。

如何获得所有文件大小的总和？

此外，如何获得仅以字母“a”开头的文件的总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:28:15.997

[这是使用异步 Java 驱动](http://www.allanbank.com/mongodb-async-driver/)程序的两个查询的示例程序：

```
package example;

import static com.allanbank.mongodb.builder.AggregationGroupField.set;
import static com.allanbank.mongodb.builder.AggregationGroupId.constantId;
import static com.allanbank.mongodb.builder.QueryBuilder.where;

import java.util.regex.Pattern;

import com.allanbank.mongodb.MongoClient;
import com.allanbank.mongodb.MongoCollection;
import com.allanbank.mongodb.MongoFactory;
import com.allanbank.mongodb.bson.Document;
import com.allanbank.mongodb.bson.builder.BuilderFactory;
import com.allanbank.mongodb.bson.builder.DocumentBuilder;
import com.allanbank.mongodb.bson.element.ArrayElement;
import com.allanbank.mongodb.builder.Aggregate;

public class FileSizeAggregation {
    public static void main(String[] args) {

        MongoClient client = MongoFactory
                .createClient("mongodb://localhost:27017");
        MongoCollection collection = client.getDatabase("test").getCollection(
                "test");
        collection.delete(BuilderFactory.start()); // Clear the collection.

        // Create some documents.
        DocumentBuilder doc = BuilderFactory.start();
        for (char first = 'a'; first <= 'z'; ++first) {
            for (char second = 'a'; second <= 'z'; ++second) {
                doc.reset();

                doc.add("name", new String(new char[] { first, second }));
                doc.add("size", 10);

                collection.insert(doc);
            }
        }

        // Count all file "sizes".
        Aggregate.Builder builder = new Aggregate.Builder();
        builder.group(constantId("sum"), 
                      set("total").sum("size"), 
                      set("count").count());

        System.out.println(new ArrayElement("pipeline", builder.build()
                .getPipeline()));

        Iterable<Document> docs = collection.aggregate(builder.build());
        for (Document d : docs) {
            System.out.println(d);
        }

        // Count all file sizes that start with "a"
        builder.reset();
        builder.match(where("name").matches(Pattern.compile("^a")));
        builder.group(constantId("sum"), 
                      set("total").sum("size"), 
                      set("count").count());

        System.out.println(new ArrayElement("pipeline", builder.build()
                .getPipeline()));

        docs = collection.aggregate(builder.build());
        for (Document d : docs) {
            System.out.println(d);
        }
    }

} 
```

我让程序转储出聚合管道，这样你就可以看到它在 shell 中的样子。让我们看看输出。

```
pipeline : [
  {
    '$group' : {
      '_id' : 'sum',
      total : { '$sum' : '$size' },
      count : { '$sum' : 1 }
    }
  }
] 
```

这是第一个查询的管道，对文件的大小求和。我们使用“$group”运算符作为管道中的唯一阶段。我们分配一个常量 id ('_id' : 'sum') 以将所有文档分组到一个结果文档中。然后总行和计数行对每个文档中的大小字段求和并返回文档计数。此聚合的结果如下所示：

```
{
  '_id' : 'sum',
  total : 6760,
  count : 676
} 
```

676 个文件（26 * 26），因为每个文件是“10”，所以总数是 6760。看起来不错。下一个聚合！

这次我们只想总结文件名以字母“a”开头的文档。

```
pipeline : [
  {
    '$match' : {
      name : { '$regex' : { $regex : '^a' } }
    }
  }, 
  {
    '$group' : {
      '_id' : 'sum',
      total : { '$sum' : '$size' },
      count : { '$sum' : 1 }
    }
  }
] 
```

唯一真正的变化是我们在 $group 之前在管道中添加了一个步骤来过滤或 $match 文档的子集。在这种情况下，正则表达式 '^a' 符合要求。（双 $regex 文档是驱动程序编码 JSON 方式的副作用。第一个 $regex 是“匹配”运算符，第二个表示 MongoDB 扩展以表示正则表达式。）

```
{
  '_id' : 'sum',
  total : 260,
  count : 26
} 
```

结果看起来不错。26 份文件，总共 260 份。

HTH，罗布。

# html - CSS 圣杯 - 2 个固定/1 个流体柱的问题

> ID：15194588
> 
> 赞同：5
> 
> 时间：2013-03-04T04:31:46.893
> 
> 标签：html, css

好的，所以我一直在努力为我的网站实现“圣杯”式布局，到目前为止它已经非常接近了，但我注意到我想要修复两件事。

目标是一个“粘性”页脚，页面长度随浏览器窗口高度、页眉和 3 列扩展。左右2个固定柱，中间1个流体柱。

我现在遇到的问题是，我的中心“流体”列似乎不像我预期的那样表现。基本上我希望固定列始终完全显示，中心列填充剩余的水平空间。但是中心栏占用了很多空间，所以我必须滚动才能查看右栏（见下图）。此外，“文本对齐：中心”代码似乎没有在中心列的可视区域内居中文本。任何帮助表示赞赏！

图片：http: [//i.imgur.com/FPuSiIu.png](http://i.imgur.com/FPuSiIu.png)

html:

```
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="test.css" />
    </head>
    <body>
        <div id="header">
            <p>Header</p>
        </div>
        <div id="container">
            <div id="center">
                <p>Content</p>
            </div>
            <div id="left">
                <p>Content</p>
            </div>
            <div id="right">
                <p>Content</p>
            </div>
        </div>
        <div id="footer">
            <p>Footer</p>
        </div>

    </body>
</html> 
```

CSS：

```
* {
    margin: 0;
}

#container {
    width:100%;
}

#header {
    text-align: center;
    background: #5D7B93;
    height: 95px;
    padding: 5px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 15;
}
#center{
    text-align: center;
    margin-top: 105px;
    background: red;
    position: relative;
    float: left;
    width: 100%;
    height: 100%;
}
#left {

    height: 100%;   
    width: 150px;
    text-align:center;
    background:#EAEAEA;
    margin-top: 105px;
    margin-left: -100%;
    overflow: scroll;
    position: relative;
    float: left;
}

#right {
    position: relative;
    height: 100%;
    width: 150px;
    margin-right: -100%;
    margin-top: 105px;
    background: blue;
    text-align: center;
    float: left;
}
#footer {
    text-align:center;
    background: #5D7B93;
    height:25px;
    padding:5px;
    position: fixed;
    bottom: 0;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T05:30:11.360

没必要`float`。只是`position: absolute`侧边栏，并在两侧给中心 div 固定边距。

[JSFiddle](http://jsfiddle.net/JvaCp/1/)

**CSS**

```
#container{
    position: relative;
}

#left, #right {
    width: 200px;
    height: 100%;
    position: absolute;
    top: 0;
}

#left {
    left: 0;
}

#right {
    right: 0;
}

#center {
    margin: 0 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T18:53:04.883

我已经在我的布局上完成了这个，它对我来说很好用

```
body,
html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

#container{
  display: inline-flex;
  width: 100%;
  height: 100%;
  background: lightblue;
}

#left {
  width: 240px!important;
  min-width: 240px!important;
  background: red;
  height: 100%;
}

#right {
  width: 400px!important;
  min-width: 400px!important;
  background: red;
  height: 100%;
}

#center {
  background: blue;
  width: 100%;
  min-width: 600px;
  height: 100%;
} 
```

# java - 通过 Java Regex 验证输入值。我需要接受从 0.01 到 1 的值

> ID：15194590
> 
> 赞同：0
> 
> 时间：2013-03-04T04:32:04.540
> 
> 标签：java, regex

我正在努力解决正则表达式问题。要求是，我需要将所有值从 0.01 到 1 。我正在使用正则表达式 ^[0]+(\0-9]{1,10})?$|^[1] 。这不包括从 0 到 1 的值。但要求是接受范围从 0.01 到 1 的值，但 0.0 和 0.00 除外。我不确定如何为此使用正则表达式 我无法访问 java 代码来验证输入。它只能通过 Regex 来控制。需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:44:40.163

这个正则表达式似乎是你想要的

"0\.[1-9]?|0\.[0-9][1-9]|1"

# excel - 如果字符串不匹配，如何比较列中的字符串然后复制数据

> ID：15194591
> 
> 赞同：0
> 
> 时间：2013-03-04T04:32:04.677
> 
> 标签：excel, vba

我想将数据插入到 Excel 工作簿 1 并将其复制到工作簿 2。我需要确保新插入的数据不会在两个工作簿中重复。我使用C列中的文章编号（类型字符串）来检查数据是否已经在两个工作簿中，如果数据已经存在，用户需要重新输入。

我不知道如何使用哪个字符串函数来搜索字符串。这是我的一些代码（此代码仅用于在 workbook1 中输入新数据然后复制到 workbook2）。我用于检查的字符串在列 C(textbox1)

```
Workbooks("workbook1.xlsm").Activate
With Worksheets("sheet1")
    '~insert data
    .Range("B" & (i + CountProd)) = ComboBox1.Text
    .Range("C" & (i + CountProd)) = TextBox1.Text
    .Range("D" & (i + CountProd)) = TextBox2.Text
    .Range("E" & (i + CountProd)) = TextBox3.Text
    .Range("F" & (i + CountProd)) = TextBox4.Text
    .Range("G" & (i + CountProd)) = TextBox5.Text
    .Range("H" & (i + CountProd)) = ComboBox2.Text
    .Range("I" & (i + CountProd)) = TextBox6.Text
    .Range("J" & (i + CountProd)) = TextBox7.Text
    .Range("K" & (i + CountProd)) = TextBox8.Text

End With

Workbooks("workbook2.xlsm").Activate

RowNo = Workbooks(prod & " Input.xlsm").Worksheets("Input").Cells(31, 3).Value
RowNo = RowNo + 32

Set sh1 = Workbooks("workbook2.xlsm").Worksheets("sheet1")
Set sh2 = Workbooks("workbook1.xlsm").Worksheets("sheet1")

sh1.Range(sh1.Cells(RowNo, 2), sh1.Cells(RowNo, 11)).Value = sh2.Range(sh2.Cells((i + CountProd), 2), sh2.Cells((i + CountProd), 11)).Value
'        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:54:08.080

我想您需要的是一个函数，告诉您某个值是否存在于某个范围内。这是一段通用代码，可用于检查 [Arg] 是否包含在范围 [SRng] 的 [SCol] 列中的任何位置

```
Function Exist(Arg As String, SRng As Range, SCol As Long) As Boolean
Dim Idx As Long

    Idx = 1
    Exist = False

    Do While SRng(Idx, SCol) <> ""
        If SRng(Idx, SCol) = Arg Then
            Exist = True
            Exit Do
        End If
        Idx = Idx + 1
    Loop

End Function 
```

使用此功能，您可以在任何地方检查是否存在货号……例如：

```
Sub Test()
' properly Dim your variables and objects
Dim Rng1 As Range, Rng2 As Range

    ' set ranges first - you don't need to "activate" sheets unless you
    ' want the display to hop around
    ' avoid hardcoding as much as possible
    Set Rng1 = Workbooks("workbook1.xlsm").Worksheets("sheet1").[A1]
    Set Rng2 = Workbooks("workbook2.xlsm").Worksheets("sheet1").[A1]

    ' then start logic
    If Exist(TextBox1.Text, Rng1, 3) Then
        ' ANr exists somewhere in book1/sheet1/[C..C]
    Else
        ' ANr does not exist in book1/sheet1/[C..C]
    End If

    If Exist(TextBox1.Text, Rng2, 2) Then
        ' ANr exists somewhere in book2/sheet1/[B..B]
    Else
        ' ANr does not exist in book2/sheet1/[B..B]
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:16:14.730

要检查 textbox1 中的字符串是否已存在于 C 列中，您可以使用“查找”功能：

```
on error resume next
lRow = range("C:C").find(textbox1.text,...).row

if err.number = 0 then    'string found
   msgbox "Duplicate value. Try again."
   exit sub
end if

on error goto 0 
```

# java - 如何更改 datatimepicker 结果的格式？

> ID：15194593
> 
> 赞同：2
> 
> 时间：2013-03-04T04:32:10.670
> 
> 标签：java, jsp, struts2, datetimepicker

**我需要让用户从日历中选择一个日期，然后在控制台上显示选择的日期。**

使用以下代码我可以显示一个日期时间选择器并接收选定的日期。当变量的类型是 String 时，它显示以下输出

```
2013-03-27T00:00:00+11:00 
```

当变量类型为 Date 时，它​​显示以下输出

```
null 
```

我怎样才能收到 yyyy-mm-dd 或 dd-mm-yyyy 的结果？所以应该是 2013-03-27 或 27-03-2013 我对使用 subStr 不感兴趣还有其他方法吗？

JSP

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="/struts-tags" prefix="s"%> 
<%@taglib uri="/struts-dojo-tags" prefix="sx" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <sx:head/>
        <title>JSP Page</title>
    </head>

....
<sx:datetimepicker name="Sdate"
                              label="MyDate"
                              displayFormat="dd-MMM-yyyy"
                              value="todayDate"/>
..... 
```

班级

```
public class Datepicker{
      private String sdate;
     ... getter and setter go here ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:46:07.280

这是错字问题

你的 JSP 包含`sx:datetimepicker name="Sdate"`这个应该是`sx:datetimepicker name="sdate"`

但财产在`private String sdate;`

您可以像这样在控制器中使用数据类型是日期`private Date sdate;`

编辑：

```
 String str = "2013-03-27T00:00:00+11:00";
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy");
        try {
            SimpleDateFormat parseFormatter = new SimpleDateFormat("yyyy-MM-dd");
            //SimpleDateFormat dt = new SimpleDateFormat("yyyyy-mm-dd hh:mm:ss+hh:mm"); 
            Date date = parseFormatter.parse(str);

            String formattedDate = formatter.format(date);
            System.out.println(formattedDate);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# c# - 将两个列表合二为一

> ID：15194594
> 
> 赞同：0
> 
> 时间：2013-03-04T04:32:11.717
> 
> 标签：c#, asp.net-mvc

嗨，我有两个包含属性的类，并且我有一个包含两个类的列表作为其属性的类。我应该返回一个列表，其中包含按 created_date 排序的两个类的对象。any1 有帮助吗？我已经粘贴了下面的 3 个类：

这是第一堂课：-

```
public partial class TouchPointModel : BaseModel
{
    public List<EntityModel> Entities { get; set; }
    public UserModel User { get; set; }
    public int TouchPointId { get; set; }
    public string Description { get; set; }
    public int EntityId { get; set; }
    public DateTime Created_date{ get;set; }
} 
```

这是第二类：-

```
public partial class SurveyModel : BaseModel
{
    public int Id { get; set; }
    public int SelectedEntityId { get; set; }
    public int SelectedEntityType { get; set; }
    public int ParentEntityId { get; set; }
    public bool IsMyProjects { get; set; }
    public DateTime Created_date{ get;set; }
} 
```

&这是普通类

```
public partial class RecentInteractionsModel
{
    public int ContactId { get; set; }
    public List<TouchPointModel> TouchPoints { get; set; }
    public List<SurveyModel> Surveys { get; set; }
    public int EntityId { get; set; }
    public int EntityTypeId { get; set; }
    public int SelectedParentId { get; set; }
} 
```

对于 UI，我应该根据创建日期显示最新的接触点或调查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:57:36.693

听起来你需要`Interface`介于两者之间`Classes`

```
public interface IMyInterface
{
   DateTime Created_date{ get;set; }

   // add any other common properties between the 2 models

}

public partial class TouchPointModel : BaseModel, IMyInterface
{
   .......

   public DateTime Created_date{ get;set; }
}

public partial class SurveyModel : IMyInterface
{
   .......

   public DateTime Created_date{ get;set; }
} 
```

然后你可以创建一个列表`IMyInterface`

```
List<IMyInterface> allItems = TouchPoints.Cast<IMyInterface>()
                       .Union(Surveys.Cast<IMyInterface>())
                       .OrderBy(x => x.Created_date).ToList(); 
```

# php - php activerecord ORDER BY 导致查询失败

> ID：15194601
> 
> 赞同：1
> 
> 时间：2013-03-04T04:32:45.583
> 
> 标签：php, mysql, codeigniter

我有一个使用 php 活动记录的 codeigniter 项目。当我运行此查询时，有 3 个表（用户、打孔和作业）

```
$records = Punches::find_by_sql("Select * from jobs,users,punches where jobs.job_id = $job_id AND punches.job_id = $job_id AND punches.id= users.id AND NOT ISNULL(end_time) ORDER BY last_name,id "); 
```

查询失败。如果我接受订单，它就可以了。请注意，我已经使用了我能想到的所有 ORDER BY 变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:36:47.360

由于您要连接多个表，因此当列不唯一时，您需要指定要使用的表列。在您的情况下，您需要指定 id 列来自哪个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:39:09.970

在`id`你的`order by id`, 因为`users`和`punches`表也有 id

```
$records = Punches::find_by_sql("... ORDER BY last_name, TABLENAME.id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:51:24.967

感谢建议我在 phpmyadmin 中运行它的人……这有助于快速发现错误。我需要 tablename.id

# android - Android - 有符号十进制不允许负输入键

> ID：15194604
> 
> 赞同：1
> 
> 时间：2013-03-04T04:32:58.030
> 
> 标签：android, keyboard, decimal, signed

```
android:inputType="numberDecimal|numberSigned" 
```

没有正常工作，弹出的键盘不允许负号。

所以我尝试从一个类似的问题中使用这个类：

[Android InputType 布局参数 - 如何允许负小数？](https://stackoverflow.com/questions/5061261/android-inputtype-layout-parameter-how-to-allow-negative-decimals/5208823#5208823)

但它再次给出了相同的键盘，没有负号。

我正在尝试为 android 2.3.x 编译

# asp.net - 从 ASP.NET Web 窗体 .NET 3.5 迁移到 MVC 4.0

> ID：15194606
> 
> 赞同：0
> 
> 时间：2013-03-04T04:33:07.530
> 
> 标签：asp.net, asp.net-mvc, migration, asp.net-membership, membership

我计划将我的旧项目从 asp.net webform 3.5 转换和迁移到 mvc 4.0。我想知道是否可以不对我的新项目（mvc 4.0）中现有的自定义成员资格（来自 net 3.5）进行任何更改？欢迎任何建议。

# asp.net-mvc-4 - MVC-4 路由错误

> ID：15194607
> 
> 赞同：0
> 
> 时间：2013-03-04T04:33:08.660
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我的路线如下：

```
routes.MapRoute(
            name: "SettingsRoute",
            url: "Settings/",
            defaults: new { controller = "Settings", action = "Index" }
            ); 
```

但它不起作用。当我在“设置/”之后添加任何字母时，它可以工作。

举个例子：

```
routes.MapRoute(
            name: "SettingsRoute",
            url: "Settings/x", // or "Settings/q" or "Settings/z"
            defaults: new { controller = "Settings", action = "Index" }
            ); 
```

这是工作。

我做错了什么？

谢谢。

# c# - 在 NUnit 测试中获取上下文

> ID：15194609
> 
> 赞同：1
> 
> 时间：2013-03-04T04:34:09.373
> 
> 标签：c#, wcf, testing, nunit, moq

我有一个正在单元测试的 WCF 服务。我需要保存 OperationContext 以在我的测试中使用它。上下文未保存，因此无法在我的测试中使用它回发。我可以保存当前上下文以在测试中使用它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:58:43.467

您通常不能模拟 OperationContext（除非您包装它）。但是看看这个，如果它对你有帮助的话。

[http://blog.gfader.com/2010/08/how-to-unit-test-wcf-service.html](http://blog.gfader.com/2010/08/how-to-unit-test-wcf-service.html)

一些替代方案是：

1）另一种方法是简单地重构你的代码。将服务中的所有业务逻辑移到单独的可测试业务类中，让服务只参与集成测试。服务更像是基础设施，并不是所有东西都需要单元测试。集成/端到端/行为测试也是测试和有效的方法。

2）使用更强大的测试框架。检查能够拦截呼叫并重定向它们的[Moles 框架。](http://msdn.microsoft.com/en-us/library/ff798506.aspx)这可以“模拟”密封类和静态方法/属性。使用 Moles，您可以将对 OperationContext 的调用重定向到您自己的方法。

# css - 是否存在影响视口的“@media”样式？

> ID：15194610
> 
> 赞同：0
> 
> 时间：2013-03-04T04:34:09.397
> 
> 标签：css, dynamic, cross-browser, media-queries, viewport

我有一个网站，当屏幕超过 1400 像素时；网站不再扩展。但是，我也有一个浮动元素。导航栏向左浮动并随页面缩小。但是，如果屏幕尺寸变大，我不希望它设置样式。

如果有人以高于 1400 像素的屏幕分辨率查看我的页面，它会工作并且不会移动。但是，如果有人查看网站并缩小视口大小而不是屏幕大小，它会停留在左侧并扭曲。

***如果屏幕尺寸或视口尺寸达到最大尺寸 1400 像素，我希望 div 显示：无；***

我需要兼容现代浏览器和移动设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:38:26.720

你可以试试这个...

```
 @media screen and (max-width: 1400px){
      div {
            display:none;
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:43:38.847

```
@media (min-width: 1400px) {
    body {
        background:red !important;
    }
} 
```

为我工作:)

编辑：抱歉错过了关于缩放页面的部分。我不确定视口应该这样工作吗？

# macos - 无法在 Applescript 中操作剪贴板中的文本

> ID：15194612
> 
> 赞同：0
> 
> 时间：2013-03-04T04:34:35.960
> 
> 标签：macos, macros, applescript

我被迫使用一个需要大量数据输入简单网络表单的软件，所以我设计了一个 AppleScript 以将文本文件作为输入，然后将内容键入 Safari，以便文本文件中的选项卡用于前进到 Web 表单中的下一个字段。我正在做一些字符串替换，因此我可以将文本文件中的换行符视为制表符，以提高文本文件的可读性。

我想通过从剪贴板击键来简化这一点，这可行，但字符串替换并没有按照应有的方式进行，我无法确定原因。在这一点上，我的解决方法是在复制之前用制表符手动查找/替换换行符，但这基本上与保存文件并将脚本指向它一样慢。

```
tell application "Safari"
    activate
end tell

set sourceString to (the clipboard) as text

set ASTID to AppleScript's text item delimiters
set AppleScript's text item delimiters to "\n"
set the lineList to every text item of sourceString
set AppleScript's text item delimiters to "\t"
set keystrokeString to the lineList as string
set AppleScript's text item delimiters to ASTID

tell application "System Events"
    keystroke keystrokeString as text
end tell 
```

`\t``\n`如果你把它放到 AppleScript Editor 中，它会编译成不可见的。当我使用以下文件从文件中读取时，字符串编辑（中间）部分的工作方式与宣传的一样：

```
set theFile to (choose file with prompt "Select a file to read:" of type {"txt"})
open for access theFile
set fileContents to (read theFile)
close access theFile 
```

当我从剪贴板获取文本时，为什么字符串替换可能不起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:50:52.410

设置分隔符时使用 ASCII 字符函数应该可以工作。换行符是 ASCII 字符 10。所以 ie：`set AppleScript's text item delimiters to ASCII character 10` 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:16:57.480

在页面上的表单中切换通常很容易出错。您应该通过 id 识别每个表单并使用 javascript 填充表单。

```
tell application "Safari"
    set URL of document 1 to "http://www.google.com/"
    delay 3
    do JavaScript "document.getElementById('gbqfq').value = 'My Text'" in document 1
end tell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:30:18.097

似乎换行符在将文本复制到剪贴板时被转换为回车，并且`\n`不会匹配它们。

`\r`但是，将它们都编译为不可见的字符，这有点烦人。

经过一些测试，看起来当您将文本文件保存到磁盘然后使用 AppleScript 读取它时，您必须将文件中使用的行结尾 LF 或 CR 与`\n`or匹配`\r`。**但是，在阅读复制到剪贴板的文本时，您必须始终匹配`\r`.**

## 编辑：

其中许多字符都有 AppleScript 关键字。`tab`, `linefeed`, 和`return`都可以按原样使用。我的脚本现在看起来像这样：

```
set backspace to ASCII character 8

get the clipboard
set keystrokeString to (replacement of return by tab for the result)
set keystrokeString to (replacement of linefeed by tab for the result)
set keystrokeString to (replacement of tab by tab & backspace for the result)

tell application "System Events"
    keystroke keystrokeString as text
end tell

on replacement of oldDelim by newDelim for sourceString
    set oldTIDs to text item delimiters of AppleScript
    set text item delimiters of AppleScript to oldDelim
    set strtoks to text items of sourceString
    set text item delimiters of AppleScript to newDelim
    set joinedString to strtoks as string
    set text item delimiters of AppleScript to oldTIDs
    joinedString
end replacement 
```

它现在还包括在每个制表符后击中的退格字符，因此如果文本未输入到已填充的字段中，则会在前进到后将其删除。

# directx - 使用 Direct3D 9 进行 2D 编程 - 测试图像失真

> ID：15194617
> 
> 赞同：1
> 
> 时间：2013-03-04T04:34:58.807
> 
> 标签：directx, direct3d9

我正在尝试使用带有 DirectX 9 的 2D sprites 构建一个简单的 2D 游戏，但在让图像清晰显示时遇到了问题。我想加载 bmp 图像并将它们按原样显示在屏幕上（无插值、无放大、无过滤或抗锯齿等）。

我确定我遗漏了一些东西，但是当我尝试将 100x100 bmp 渲染到屏幕上时，它看起来不连贯且失真，就像像素艺术图像在略微缩小时通常看起来一样。我希望 bmp 看起来与在 MS Paint 中加载时完全一样。

有谁知道为什么会这样？我的代码如下所示：

初始化代码：

```
g_DxCom = Direct3DCreate9( D3D_SDK_VERSION );
if ( g_DxCom == NULL )
{
    return false;
}

D3DDISPLAYMODE d3dDisplayMode;

if ( FAILED( g_DxCom->GetAdapterDisplayMode( D3DADAPTER_DEFAULT, &d3dDisplayMode ) ) )
{
    return false;
}

D3DPRESENT_PARAMETERS d3dPresentParameters;
::ZeroMemory( &d3dPresentParameters, sizeof(D3DPRESENT_PARAMETERS) );
d3dPresentParameters.Windowed = FALSE;
d3dPresentParameters.SwapEffect = D3DSWAPEFFECT_DISCARD;
d3dPresentParameters.BackBufferFormat = d3dDisplayMode.Format;  // D3DFMT_X8R8G8B8
d3dPresentParameters.BackBufferWidth = d3dDisplayMode.Width;
d3dPresentParameters.BackBufferHeight = d3dDisplayMode.Height;
d3dPresentParameters.PresentationInterval = D3DPRESENT_INTERVAL_ONE;

if ( FAILED( g_DxCom->CreateDevice( D3DADAPTER_DEFAULT,
                                    D3DDEVTYPE_HAL,
                                    this->hWnd,
                                    D3DCREATE_HARDWARE_VERTEXPROCESSING,
                                    &d3dPresentParameters,
                                    &pd3dDevice ) ) )
{
    if ( FAILED( g_DxCom->CreateDevice( D3DADAPTER_DEFAULT,
                                        D3DDEVTYPE_HAL,
                                        this->hWnd,
                                        D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                                        &d3dPresentParameters,
                                        &pd3dDevice ) ) )
    {
        return false;
    }
}

texture = NULL;
bg_texture = NULL; 
```

渲染代码：

```
LPDIRECT3DDEVICE9   g_dxDevice;

float float1 = 99.5f;    // I'd like to render my 100x100 sprite from screen coordinates 100, 100 to 200, 200
float float2 = 198.5f;

CUSTOMVERTEX OurVertices[] =
{
    { float1, float2, 1.0f, 1.0f, 0.0f, 1.0f },
    { float1, float1, 1.0f, 1.0f, 0.0f, 0.0f },
    { float2, float1, 1.0f, 1.0f, 1.0f, 0.0f },
    { float1, float2, 1.0f, 1.0f, 0.0f, 1.0f },
    { float2, float1, 1.0f, 1.0f, 1.0f, 0.0f },
    { float2, float2, 1.0f, 1.0f, 1.0f, 1.0f }
};

LPDIRECT3DVERTEXBUFFER9 v_buffer;

g_dxDevice->CreateVertexBuffer( 6 * sizeof(CUSTOMVERTEX),
                                0,
                                CUSTOMFVF,
                                D3DPOOL_MANAGED,
                                &v_buffer,
                                NULL );

VOID* pVoid;

// Lock the vertex buffer into memory
v_buffer->Lock( 0, 0, &pVoid, 0 );

// Copy our vertex buffer to memory
::memcpy( pVoid, OurVertices, sizeof(OurVertices) );

// Unlock buffer
v_buffer->Unlock();

LPDIRECT3DTEXTURE9 g_texture;
HRESULT hError;

DWORD dwTextureFilter = D3DTEXF_NONE;

g_dxDevice->SetSamplerState( 0, D3DSAMP_MINFILTER, dwTextureFilter );
g_dxDevice->SetSamplerState( 0, D3DSAMP_MAGFILTER, dwTextureFilter );
g_dxDevice->SetSamplerState( 0, D3DSAMP_MIPFILTER, dwTextureFilter );

g_dxDevice->SetTextureStageState(0,D3DTSS_COLOROP,D3DTOP_SELECTARG1);
g_dxDevice->SetTextureStageState(0,D3DTSS_COLORARG1,D3DTA_TEXTURE);
g_dxDevice->SetTextureStageState(0,D3DTSS_COLORARG2,D3DTA_DIFFUSE);

hError = D3DXCreateTextureFromFile( g_dxDevice, L"Test.bmp", &g_texture );   // 100x100 sprite

g_dxDevice->SetTexture( 0, g_texture );

g_dxDevice->Clear( 0,
                   NULL,
                   D3DCLEAR_TARGET,
                   D3DCOLOR_XRGB( 0, 40, 100 ),
                   1.0f,
                   0 );

g_dxDevice->BeginScene();

// Do rendering on the back buffer here
g_dxDevice->SetFVF( CUSTOMFVF );
g_dxDevice->SetStreamSource( 0, v_buffer, 0, sizeof(CUSTOMVERTEX) );
g_dxDevice->DrawPrimitive( D3DPT_TRIANGLELIST, 0, 6 );

g_dxDevice->EndScene();

g_dxDevice->Present( NULL, NULL, NULL, NULL );

g_texture->Release();
v_buffer->Release(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:48:44.720

好的，所以我终于想通了，我应该知道是这样的。看起来 DirectX9 仅适用于大小为 2 的倍数的纹理。如果我更改纹理以使精灵方​​块为 128 x 128（只是添加一些透明度）并运行应用程序并适当更改 float2，则不会出现失真渲染的图像。

欢呼...

# android - Android“指定的孩子已经有一个父母。” 对于片段 onCreateView()？

> ID：15194618
> 
> 赞同：1
> 
> 时间：2013-03-04T04:35:01.750
> 
> 标签：android, compiler-errors, android-listfragment

我使用兼容性包在我的 Android 应用程序中使用 SherlockFragments。收到此错误`fragments`。`FATAL EXCEPTION: main java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.`我将这些片段作为选项卡添加到 actionbar sherlock 中。当我第一次切换标签时成功运行应用程序后，它工作正常，第二次它在 onCreateView() 中给出上述错误。

这是 onCreate() 中的代码

```
private static final String AD_UNIT_STANDARD_BANNER = "/6253334/dfp_example_ad/banner";
private DfpAdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    adView = new DfpAdView(getActivity(), AdSize.BANNER, AD_UNIT_STANDARD_BANNER);  
    adView.setAdListener(this);
} 
```

这是我在片段 onCreateView() 中使用的代码。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
    View view = inflater.inflate(R.layout.fragment_chats, container, false);         
    listview = (ListView) view.findViewById(android.R.id.list); 
    RelativeLayout layout = (RelativeLayout) view.findViewById(R.id.chats_inner_layout);

    adView.setId(111);
    adView.loadAd(new AdRequest());        
    RelativeLayout.LayoutParams add_lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    add_lp.addRule(RelativeLayout.BELOW, adView.getId());   
    listview.setLayoutParams(add_lp);

    //**** this is the line causing for error****/////
    layout.addView(adView);         
    return view;         
} 
```

这是上述片段的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/chats_main_layout"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@color/app_lite_theme"
   android:orientation="vertical" >

   <RelativeLayout
      android:id="@+id/chats_inner_layout"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:orientation="vertical" >

      <ListView
          android:id="@android:id/list"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_marginLeft="8dp"
          android:layout_marginRight="8dp"
          android:scrollbars="none" />

   </RelativeLayout>
</RelativeLayout> 
```

我用于片段的相同代码可以正常工作而没有任何问题。我只面临片段的问题。这里有什么问题 ？有人告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:13:41.743

我认为这部分有问题

```
 listview.setLayoutParams(add_lp); 
```

它应该是

```
 addView.setLayoutParams(add_lp); 
```

# asp.net - 如何显示数据库中的图像？

> ID：15194628
> 
> 赞同：1
> 
> 时间：2013-03-04T04:36:14.457
> 
> 标签：asp.net

我也知道这个（某种）问题已经被问过并回答了很多次。我自己曾经问过这个问题。但我还没有成功。如何在特定员工 ID 的图像控件中显示图像...这是我的代码：

`bind() GridView1.Visible = "True"

```
 Dim strQuery As String = "SELECT Image FROM EmployeeTable WHERE EmployeeID =@EmployeeID"
    Dim cmd As SqlCommand = New SqlCommand(strQuery)
    cmd.Parameters.Add("@EmployeeID", SqlDbType.Int).Value() = Convert.ToInt32(Request.QueryString("ImageID"))
    Dim dt As DataTable = GetData(cmd)
    If dt IsNot Nothing Then
        **Dim bytes() As Byte = CType(dt.Rows(1)("Image"), Byte())**
        Response.Buffer = True
        Response.Charset = ""
        Response.Cache.SetCacheability(HttpCacheability.NoCache)
        Response.ContentType = dt.Rows(0)("ContentType").ToString()
        Response.AddHeader("content-disposition", "attachment;filename=" + dt.Rows(1)("Name").ToString())
        Response.BinaryWrite(bytes)
        Response.Flush()
        Response.End()
    End If` 
```

在粗体行出现错误。“位置 1 没有行”...实际上我想获取（显示）特定员工 ID 的图像。它与行位置有何关系？我不知道我为什么要写那行代码。无论如何，我知道有些人可以帮助我，所以我提前感谢他们......

好的，这是我将图像添加到数据库的代码。这工作正常。

```
 Dim imageData As Byte() = New Byte(FileUpload1.FileContent.Length) {}
    FileUpload1.FileContent.Read(imageData, 0, Convert.ToInt32(FileUpload1.FileContent.Length))

    Dim con As New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("ConnectionString").ToString)
    con.Open()
    If EmployeeIDTextBox.Text = "" Then
        MsgBox("Please Enter EmployeeID to Add Photo")
    Else
        Dim com As New SqlCommand("UPDATE EmployeeTable SET IMAGE = @IM where EmployeeID='" & EmployeeIDTextBox.Text & "'", con)
        Dim filePath As String = Server.MapPath(FileUpload1.FileName)
        'Dim imageData As Byte() = File.ReadAllBytes(filePath)
        com.Parameters.AddWithValue("@IM", imageData)
        com.ExecuteNonQuery()
        MsgBox("File Saved Successfully!")
    End If
End Sub 
```

现在这是我在图像控件中检索和显示相同图像的代码......

```
 bind()
    GridView1.Visible = "True"
    'If Request.QueryString("ImageID") IsNot Nothing Then
    Dim strQuery As String = "SELECT Image FROM EmployeeTable WHERE EmployeeID =@EmployeeID"
    Dim cmd As SqlCommand = New SqlCommand(strQuery)
    cmd.Parameters.Add("@EmployeeID", SqlDbType.Int).Value() = Convert.ToInt32(Request.QueryString("Image"))
    Dim dt As DataTable = GetData(cmd)
    If dt IsNot Nothing Then
        Dim bytes() As Byte = CType(dt.Rows(0)("Image"), Byte())
        Response.Buffer = True
        Response.Charset = ""
        Response.Cache.SetCacheability(HttpCacheability.NoCache)
        Response.ContentType = dt.Rows(0)("ContentType").ToString()
        Response.AddHeader("content-disposition", "attachment;filename=" + dt.Rows(1)("Name").ToString())
        Response.BinaryWrite(bytes)
        Response.Flush()
        Response.End()
    End IF 
```

这不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:46:09.090

你可以使用 Http Handler 并使用下面的代码`ProcessRequest()`

```
int Id = Convert.ToInt32(Request.QueryString["ImgId"]);
using (var conn = new SqlConnection(connectionString))
using (var command = new SqlCommand(
"SELECT ImageFile FROM ImageTable WHERE ImageId = @ImgId", conn))
{
    command.Parameters.Add("@ImgId", SqlDbType.Int).Value = Id ;
conn.Open();
Response.ContentType = "image/gif"; //u can set it per ur requirement
Response.BinaryWrite((byte[]) command.ExecuteScalar());
} 
```

然后在您的页面中使用图像：

```
 <asp:Image id="Img_Db" runat="server" ImageUrl="Image.ashx?ImgId=1"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:39:59.427

数组索引从 0 开始

利用

```
Dim bytes() As Byte = CType(dt.Rows(0)("Image"), Byte()) 
```

你怎么不知道你为什么写这个？

您拥有的代码将提示用户将图像文件保存在他的电脑上。
它不会在图像控件中显示图像。

# python - Python：从正则表达式中排除空格

> ID：15194629
> 
> 赞同：1
> 
> 时间：2013-03-04T04:36:17.373
> 
> 标签：python, regex, string, space

如何从正则表达式中排除空格，但不会忽略特殊字符。我当前的代码是：-

```
pattern=re.compile("[^\w]")
var = pattern.sub('', var) 
```

我知道 \w 将删除所有空白字符，但如何仅排除空格？

例子：

```
var = "hi this is test!@#$%%^^" 
```

正则表达式后，它将变为：

```
var = "hi this is test" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T04:44:53.460

```
[^a-zA-Z\d\s] 
```

这会删除所有内容，留下字母、数字和空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:37:27.620

为什么不只是`re.compile('\s')`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:32:44.353

如果我的理解正确，您希望删除所有字符，而不是单词字符或分隔它们的空格。如果这是正确的，那么似乎以下方法可以解决问题：

```
var = "hi this is test!@#$%%^^"
pattern=re.compile("[^\w ]")
var = pattern.sub('', var) 
```

这里唯一的变化是我在`^\w`方括号内添加了一个空格。当我运行它时，我得到以下结果：

```
>>> print var
hi this is test 
```

# python - Python - 进行字符串比较的函数

> ID：15194642
> 
> 赞同：-1
> 
> 时间：2013-03-04T04:38:10.613
> 
> 标签：python, string-comparison

```
def name(x):
    return x==('Jenson'or'Amra'or'McCay'or'Spinner'or'Jones')
print(name('Jenson'))
print(name('McCay')) 
```

这是问题：

> “编写一个函数，输入一个人的名字（例如，“smith”、“jones”等）。这个函数应该检查这个名字是否是板上的五个人名之一。五个名称是：“Jenson”、“Amra”、“McCay”、“Spinner”和“Jones”。如果输入到函数中的名称是这五个名称之一，则该函数应返回布尔值 True，如果它不是，函数应该返回 False。（记住输入类型、描述和测试用例的注释）测试函数以确保它工作。

如果我在做简森，它会起作用，但如果我输入任何其他名字，它就会出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T04:39:00.880

像这样试试

```
def name(x):
    return x in ('Jenson', 'Amra' ,'McCay', 'Spinner','Jones') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T04:43:22.633

“长”路怎么样：

```
def check_name(x):
   names_to_check = ('Jenson','Amra','McCay','Spinner','Jones')
   for i in names_to_check:
       if i == x:
          return True
   return False 
```

这是您的代码中发生的事情：

`x = 'Jenson'`, 因为这是你传入的。

这一行`x == ('Jenson' or 'Amra' or 'McCay' or 'Jones')`实际上是一个布尔运算，它*的结果*总是`Jenson`.

布尔运算检查*真值*，Python 中的非空字符串总是`True`. 所以实际上`('Jenson' or 'Amra' or 'McCay' or 'Jones')`说的是：

*“要么`Jenson`或`Amra`要么`McCay`或`Jones`其中任何一个是`True`，将值设置为那个”。*

由于`Jenson`是第一项，并且它的`True`（即，它不是一个空字符串），整个表达式等于`Jenson`（这就是为什么它只在你传入时才有效`Jenson`）。

一个简单的例子：

```
>>> ('a' or 'b' or 'c')
'a'
>>> ('b' or 'a' or 'c')
'b'
>>> ('' or '' or 'a')
'a'
>>> (0 or 0 or 1)
1
>>> (False or False or True)
True 
```

最后三个说明了相同的比较。我正在检查两个空字符串和`'a'`. 由于 Python 中存在一个空字符串`False`，因此“True”的唯一内容是`'a'`，这是返回的内容，就像我在与 进行比较`0`一样`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T04:49:25.407

我想正在发生的事情是`('Jenson'or'Amra'or'McCay'or'Spinner'or'Jones')`首先被评估，然后被评估为`'Jenson'`. 之前计算`x`的那个甚至被考虑在内，因为它在括号中。然后`x`检查是否相等`Jenson`。您需要使用更高级的语法，例如`x in...`Adem 的答案，或者使用`return x == 'Jenson' or x == 'Amra' or x == 'McCay'...`以便每个比较一个接一个地运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T04:48:35.150

语法 x==('Jenson' or 'Amra' or 'McCay' or 'Spinner'or'Jones') 是错误的。应该像 Adem 说的那样。或者可能

```
def name(x):
    return x=='Jenson' or x== 'Amra' or x  == 'McCay' or x == 'Spinner' or x == 'Jones' 
```

# .net - 如何刷新 .NET SerialPort？

> ID：15194645
> 
> 赞同：0
> 
> 时间：2013-03-04T04:38:33.123
> 
> 标签：.net, vb.net, serial-port, flush

我正在创建的 VB.NET 程序中使用基于 .NET SerialPort 类的对象。执行以下操作时遇到问题：

1.  向串口发送数据
2.  关闭端口
3.  关闭应用程序
4.  重新打开端口

发生的情况是，即使我关闭了端口和应用程序，剩余的数据也会被发送出去。DiscardOutBuffer() 方法似乎也没有帮助。

使用后冲洗缓冲区的最佳方法是什么，以便在端口关闭后没有任何东西留在里面？

# java - Programming a MMO server for cross platform mobile clients

> ID：15194655
> 
> 赞同：0
> 
> 时间：2013-03-04T04:39:40.923
> 
> 标签：java, ios, client, cross-platform

I'm working on a small MMO project that run on android, iOS, j2me, window phone. I already built a java server and a working android project. now i'm facing problems with the other platforms. Some of my common libraries (include by both client and server) written on java (1.6) cannot run on j2me ( maybe iOS and window phone neither).

Server <--->handled by common libraries<-----packet--->handled by common libraries---> client

So, how can I make the server working with all platform??

I'm just a junior programmer :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:43:11.457

You can do the server return common formats responses, such as JSON and XML. Then each client can parse it and use it. Or you can communicate via sockets, but you won't be able to reuse much code, especially since iOS development uses Obj-C, Windows Phone uses C# and Android uses Java (which may be different from Java ME).

# javascript - 属性值无效 error

> ID：15194660
> 
> 赞同：0
> 
> 时间：2013-03-04T04:40:30.800
> 
> 标签：javascript, geolocation

我的代码收到此错误。我不确定我为什么会得到它，尽管我在地理定位方面没有太多经验。我认为问题可能在于获得 lat 和 lng 的位置，但我不确定它是什么。如果有人对我如何修改我的代码/想法以解释为什么这不起作用有任何建议，我们将不胜感激。

```
function callGeo() {
console.log("you called findLocation");
if(navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(getLocation, locationError);
  }
else { console.log("no geolocation support");
        return;
         }
}

function getLocation(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    if (!map) {
       showMap(latitude, longitude);
       }
    addMarker(latitude, longitude);
}

function showMap(lat, long) {
   var googleLatLong = new google.maps.LatLng(lat, long);
   var mapOptions = {
       zoom: 12,
       center: googleLatLong,
       mapTypeId: google.maps.MapTypeId.ROADMAP
       };
   var mapDiv = document.getElementById("map");
   map = new google.maps.Map(mapDiv, mapOptions);
   map.panTo(googleLatLong);
   }

function addMarker(lat, long) {
   var googleLatLong = new google.maps.LatLng(lat, long);
   var markerOptions = {
     position: googleLatLong,
     map: map,
     title: "Where I'm thinking today"
     }
     var marker = new google.maps.Marker(markerOptions);
   }

function locationError(error) {
    var errorTypes = {
        0: "Unknown error",
        1: "Permission denied by user",
        2: "Position not available",
        3: "Request timed out"
    };
    var errorMessage = errorTypes[error.code];
    if (error.code == 0 || error.code == 2) {
        errorMessage += " " + error.message;
    }
    console.log(errorMessage);
    alert(errorMessage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:53:53.687

对不起，我刚刚想通了。我正在检查 if (!map)。我将其更改为 if(map) 并且现在可以使用。

# c++ - Mac OS X 的文件系统观察器

> ID：15194662
> 
> 赞同：1
> 
> 时间：2013-03-04T04:40:32.363
> 
> 标签：c++, qt, filesystemwatcher, kqueue

目前，我们使用QFileSystemWatcher，属于Qt。由于 Mac OS X 的支持有限，它只能通知我们两个事件：目录更改或文件更改。

但是，后一个事件（文件更改）在其大小稍大并且写入磁盘需要稍长的时间时会多次触发。

我们的解决方法是设置一个计时器以在 1 秒内检查文件。如果在计时器到期之前有更多关于文件的信号出现，我们将重置计时器。

当文件写入磁盘（完成写入）时，有没有办法获得通知？没有必要限制 Qt，任何库都可以。

* * *

我们知道 kqueue 监控方法，但是这太低级了，我们不想对每个文件都这样做，因为我们正在监控文件系统的很大一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:40:26.297

我在一个项目中遇到了同样的问题，最后我决定实现一个原生观察者。这很容易：

在.h中：

```
class OSXWatcher : public Watcher
{
public:

    OSXWatcher(const QString& strDirectory);
    virtual ~OSXWatcher();

    virtual bool Start();
    virtual bool Stop();

private:

    /**
     * Callback function of the OS X FSEvent API.
     */
    static void fileSystemEventCallback(ConstFSEventStreamRef streamRef, void *clientCallBackInfo, size_t numEvents, void *eventPaths, const FSEventStreamEventFlags eventFlags[], const FSEventStreamEventId eventIds[]);

    FSEventStreamRef stream;
}; 
```

.cpp：

```
bool OSXWatcher::Start()
{
    CFStringRef pathToWatchCF = CFStringCreateWithCString(NULL, this->dirToWatch.toUtf8().constData(), kCFStringEncodingUTF8);
    CFArrayRef pathsToWatch = CFArrayCreate(NULL, (const void **)&pathToWatchCF, 1, NULL);

    FSEventStreamContext context;
    context.version = 0;
    context.info = this;
    context.retain = NULL;
    context.release = NULL;
    context.copyDescription = NULL;

    stream = FSEventStreamCreate(NULL, &OSXWatcher::fileSystemEventCallback, &context, pathsToWatch, kFSEventStreamEventIdSinceNow, 3.0, kFSEventStreamCreateFlagFileEvents);
    FSEventStreamScheduleWithRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
    FSEventStreamStart(stream);

    CFRelease(pathToWatchCF);

    // Read the folder content to protect any unprotected or pending file
    ReadFolderContent();
}

bool OSXWatcher::Stop()
{
    FSEventStreamStop(stream);
    FSEventStreamInvalidate(stream);
    FSEventStreamRelease(stream);
}

void OSXWatcher::fileSystemEventCallback(ConstFSEventStreamRef /*streamRef*/, void *clientCallBackInfo, size_t numEvents, void *eventPaths, const FSEventStreamEventFlags eventFlags[], const FSEventStreamEventId eventIds[])
{
    char **paths = (char **)eventPaths;

    for (size_t i=0; i<numEvents; i++) {
        // When a file is created we receive first a kFSEventStreamEventFlagItemCreated and second a (kFSEventStreamEventFlagItemCreated & kFSEventStreamEventFlagItemModified)
        // when the file is finally copied. Catch this second event.
        if (eventFlags[i] & kFSEventStreamEventFlagItemCreated
                && eventFlags[i] & kFSEventStreamEventFlagItemModified
                && !(eventFlags[i] & kFSEventStreamEventFlagItemIsDir)
                && !(eventFlags[i] & kFSEventStreamEventFlagItemIsSymlink)
                && !(eventFlags[i] & kFSEventStreamEventFlagItemFinderInfoMod)) {

            OSXWatcher *watcher = (OSXWatcher *)clientCallBackInfo;
            if (watcher->FileValidator(paths[i]))
                emit watcher->yourSignalHere();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:35:52.320

我有同样的问题，但文件夹。当您将许多文件复制到文件夹时，会发出太多信号，但我只需要一个。所以我有以下解决方案：

```
void folderChanged(const QString& folder)
{
    m_pTimerForChanges->start();
} 
```

`folderChanged`是`directoryChanged()`信号槽。并且计时器有另一个超时连接，因此当时间到时，应该进行处理。定时器有 1s 的间隔。它背后的想法是，文件夹的更新频率不应超过我所拥有的间隔，如果它发送信号的频率比我需要的频率高，那么我不需要立即处理它们。相反，每次发出信号时我都会重新启动计时器，并且所有这些我只有一个处理更改。我认为您可以应用相同的方法。

另一种可能对您有用的方法是在您的处理中检查文件修改日期，如果它的当前修改日期在您上次修改日期的某个 epsilon（小间隔）内，那么您有重复信号并且不应该对其做出反应。存储此修改日期并继续。

# php - 加密和解密md5

> ID：15194663
> 
> 赞同：70
> 
> 时间：2013-03-04T04:40:37.587
> 
> 标签：php, security, hash, passwords, md5

我正在使用代码`$enrypt=md5($pass)`并插入`$encrypt`数据库。我想找到一种方法来解密它们。我尝试使用解密软件，但它说哈希应该正好是 16 个字节。有什么方法可以解密或使其成为 16 字节 md5 哈希？

我的哈希看起来像这样：`c4ca4238a0b923820dcc`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-04T05:02:22.677

如前所述，如果不尝试诸如暴力破解之类的资源密集型、不实用且不道德的事情，就无法解密 MD5。

但是，您可以使用这样的东西来安全地加密/解密密码/等：

```
$input = "SmackFactory";

$encrypted = encryptIt( $input );
$decrypted = decryptIt( $encrypted );

echo $encrypted . '<br />' . $decrypted;

function encryptIt( $q ) {
    $cryptKey  = 'qJB0rGtIn5UB1xG03efyCp';
    $qEncoded      = base64_encode( mcrypt_encrypt( MCRYPT_RIJNDAEL_256, md5( $cryptKey ), $q, MCRYPT_MODE_CBC, md5( md5( $cryptKey ) ) ) );
    return( $qEncoded );
}

function decryptIt( $q ) {
    $cryptKey  = 'qJB0rGtIn5UB1xG03efyCp';
    $qDecoded      = rtrim( mcrypt_decrypt( MCRYPT_RIJNDAEL_256, md5( $cryptKey ), base64_decode( $q ), MCRYPT_MODE_CBC, md5( md5( $cryptKey ) ) ), "\0");
    return( $qDecoded );
} 
```

使用带盐的加密方法会更安全，但这将是一个很好的下一步，仅使用 MD5 哈希。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-04T04:43:04.740

没有办法解密 MD5。嗯，有，但没有*合理*的方法来做到这一点。这就是重点。

要检查是否有人输入了正确的密码，您需要对用户输入的任何内容进行 MD5，并查看它是否与您在数据库中的内容匹配。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-27T15:19:44.617

```
/* you  can match the exact string with table value*/

if(md5("string to match") == $res["hashstring"])
 echo "login correct"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-30T10:22:00.200

这个问题用 PHP 标记。但是现在很多人都在使用 Laravel 框架。将来可能会对某人有所帮助。这就是我回答 Laravel 的原因。使用内部函数更容易加密和解密。

```
$string = 'c4ca4238a0b923820dcc';
$encrypted = \Illuminate\Support\Facades\Crypt::encrypt($string);
$decrypted_string = \Illuminate\Support\Facades\Crypt::decrypt($encrypted);

var_dump($string);
var_dump($encrypted);
var_dump($decrypted_string); 
```

> 注意：请务必在 config/app.php 文件的 key 选项中设置 16、24 或 32 个字符的随机字符串。否则，加密值将不安全。

但是您不应该使用加密和解密进行身份验证。相反，您应该使用哈希生成和检查。

# 要将密码存储在数据库中，请对密码进行哈希处理，然后保存。

```
$password = Input::get('password_from_user'); 
$hashed = Hash::make($password); // save $hashed value 
```

# 要验证密码，请从数据库中获取存储的帐户密码

```
// $user is database object
// $inputs is Input from user
if( \Illuminate\Support\Facades\Hash::check( $inputs['password'], $user['password']) == false) {
  // Password is not matching 
} else {
  // Password is matching 
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-03T07:32:10.900

无法解密**`MD5`**创建的哈希。您需要所有信息来解密**`MD5`**在加密期间使用的值。

您可以使用**`AES`**算法来加密和解密

[JavaScript AES 加密和解密（高级加密标准）](https://stackoverflow.com/questions/51531021/javascript-aes-encryption-and-decryption-advanced-encryption-standard/51531022#51531022)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-04T04:54:52.063

散列不能被解密[检查这个](http://en.wikipedia.org/wiki/Hash_function)。

如果要加密-解密，请使用数据库的双向加密功能，例如 - AES_ENCRYPT（在 MySQL 中）。

但我会建议使用 CRYPT_BLOWFISH 算法来存储密码。阅读这个 - [http://php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)和[http://us2.php.net/manual/en/function.password-hash.php](http://us2.php.net/manual/en/function.password-hash.php)

对于河豚的`crypt()`功能 -

```
crypt('String', '$2a$07$twentytwocharactersalt$'); 
```

* * *

`password_hash`将在 PHP 5.5 中引入。

```
$options = [
    'cost' => 7,
    'salt' => 'BCryptRequires22Chrcts',
];
password_hash("rasmuslerdorf", PASSWORD_BCRYPT, $options); 
```

存储密码后，您可以通过再次对其进行哈希处理并将其与存储的值进行比较来检查用户是否输入了正确的密码。

# javascript - 使用 AngularJS 在 Rails 4 中显示数据库条目

> ID：15194671
> 
> 赞同：1
> 
> 时间：2013-03-04T04:41:36.273
> 
> 标签：javascript, ruby-on-rails, angularjs, coffeescript, ruby-on-rails-4

我想显示我的数据库条目。Angular 重复列表项但不显示任何值。条目数据库有一个标题列。

看法：

```
<div ng-controller="EntryCtrl">
  <h2>Angular Display</h2>
  <ul>
    <li ng-repeat="entry in entries">
        {{entry.title}}
    </li>
  </ul>
</div> 
```

咖啡脚本：

```
app = angular.module("Resume", ["ngResource"])

app.factory "Entry", ["$resource", ($resource) ->
  $resource("/entries/:id", {id: "@id"}, {update: {method: "GET"}})
]

@EntryCtrl = ["$scope", "Entry", ($scope, Entry) ->
  $scope.entries = Entry.get()
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:45:57.723

$resource.get 用于获取单个对象实例：

```
$scope.entry = Entry.get({id:123}, callback); 
```

并且 $resource.query 用于检索集合：

```
$scope.entries = Entry.query(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T11:56:40.723

要修复，我必须添加：

```
 respond_to :json, :html 
```

和：

```
 respond_with Entry.all 
```

...到控制器。

# c# - 在后台获取应用程序通知

> ID：15194673
> 
> 赞同：0
> 
> 时间：2013-03-04T04:41:38.167
> 
> 标签：c#, windows-8, background, windows-runtime

有没有办法知道我的应用程序是否被放入后台，但实际上并没有被暂停？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:32:46.360

每当用户将您的应用程序发送到后台时，它就会被暂停。确切地说，Windows[应该等待几秒钟](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#App_suspend)，看看用户是否会在将应用程序发送到`Suspended`状态之前立即切换回来。在此切换发生之前，`Suspending`会引发事件以使应用程序有机会在 5 秒的时间段内保存其状态。

从此时起，应用程序既可以在用户切换回应用程序时重新激活，也可以在 Windows 决定需要更多资源时终止。在任何一种情况下，应用程序都不会收到任何额外的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:15:51.047

看看[VisibilityChanged](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#App_visibility)但请注意警告

> 可见性事件不与恢复或激活事件一起序列化。不要假设这些事件以特定的顺序出现。

# canvas - 获取两点之间的交点

> ID：15194682
> 
> 赞同：0
> 
> 时间：2013-03-04T04:43:16.063
> 
> 标签：canvas, html5-canvas

我在画布中有两个点，如图 1 和 2 所示。我需要获取图像中作为第三点给出的交点。

我怎么能明白这一点。

![在此处输入图像描述](../Images/d0139dac9504927471db1541ff60be53.png)

# c# - 在 Winform 中打印数学方程 | 报告

> ID：15194686
> 
> 赞同：2
> 
> 时间：2013-03-04T04:43:31.227
> 
> 标签：c#, winforms, report

我想在我的 winform 应用程序的报表中显示数学公式。我知道 RDLC，但在测试期间我发现我无法正确显示它（根据理解，如果我遗漏了什么，请告诉我）。我还尝试将 RDLC 中的占位符属性设置为 HTML - 将 html 标签解释为样式，但徒劳无功。

例如。在显示 xa [x^a] 时，我得到的是显示 xa [并排显示]

我怎样才能在 RDLC 报告中显示这种数学公式。或者任何人都可以建议我可以实现这一目标的任何好的报告服务。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:14:30.167

我使用[Roger's Online Equation Editor](http://rogercortesi.com/eqn/index.php)。

PNG，颜色，透明背景和抗锯齿都包括在内。

并将[数学方程式转换为 C#](http://www.codeproject.com/Articles/30615/Converting-math-equations-to-C)用于内联代码数学方程式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:59:37.330

我认为最简单/最好/可靠的解决方案是将数学公式保存到图像中并将图像包含在报告中：

[生成数学方程图像文件的在线工具](https://stackoverflow.com/questions/115459/online-tool-for-generating-mathematical-equation-image-files)

这是[如何在 RDLC 报告上显示图像](https://stackoverflow.com/questions/570747/how-to-show-images-on-an-rdlc-report)

# android - 应用程序从 SQL 数据库读取信息：必需/可选的类和方法？

> ID：15194687
> 
> 赞同：1
> 
> 时间：2013-03-04T04:43:37.903
> 
> 标签：android, sql, cursor, adapter, helper

我正在开发一个应用程序，其目的是显示一个列表视图，其内容取决于用户单击的按钮，其数据来自 sql 数据库。这意味着我的数据库将仅使用“可读”属性，无需更改数据库中的信息。所以，为了学习如何去做，我正在阅读和做很多教程，我对应用程序设计中真正需要什么以及什么是可选的感到有点迷茫。
这就是为什么。我了解到要这样做，我的应用程序将需要：
- 一个 ----Helper 类（扩展 SQLiteOpenHelper）
- 一个 ----Adapter 类（为数据库定义我的方法和查询）
- 一个 ----表类（我的数据库的每个表一个类）
-我的 MainActivity（在我的情况下，扩展 ListActivities）

然后，我发现这样做我还需要：
- CursorLoader
- ContentProvider
- fillData()

每次我尝试学习更多时，我会发现越来越多的类或方法可以使用，似乎无穷无尽，我不知道我是否真的需要为我的应用程序设置这么多类。
如果有人可以告诉我拥有那么多东西是否正确，请提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:23:13.353

首先，您需要对您将要使用数据库做什么以及**如何**操作有一个高层次的概述。而且，您发现的几乎是正确的。

android中任何数据库应用程序的基本步骤是：

1.  您将需要`Helper`类，您可以使用该类`create or upgrade`与`tables`.

2.  准备好数据库后，就需要包含需要保存在数据库中的数据的类。

3.  最后，将有一个类会触发查询并从数据库中检索数据。

4.  到这里，所有后端功能都完成了。现在您需要显示从 db.xml 检索到的数据。为此，您使用另一个类（在您的类中，一个 extends `ListActivity`）。

不要被类的数量所淹没，所有的功能都保存在单独的类中，以避免混乱的代码。但基本步骤保持不变！

```
 And then, i found out that to do so I also need :
    - CursorLoader
    - ContentProvider
    - fillData() 
```

是的，您可以使用这些不同的东西来执行所需的功能，例如`ContentProvider`，如果您想与其他应用程序共享数据，则可以使用这些东西。所以只要弄清楚你是否想这样做，然后继续前进。否则基本步骤就足够了。

希望这可以帮助！

您可以参考一个非常好的教程：**[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)**

# r - 如何在 R 中读取带有括号的列名的文件？

> ID：15194689
> 
> 赞同：1
> 
> 时间：2013-03-04T04:43:45.400
> 
> 标签：r, file, brackets

我有一个输入文件。

猫文件

```
 IstCol (ABC) IInd COl (DEF) 
      34           45 
      32           45

      > input<-read.table("file",sep="\t",header=TRUE)
      > input
      IstCol..ABC..IInd.COl..DEF.
      1            34           45 
      2             32           45 
```

但它不识别括号。需要做出哪些改变来识别它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-01T10:31:43.210

`read.table`默认情况下检查列名是否是有效的变量名，如果它们是唯一的，您可以通过设置将其关闭`check.names = F`：

```
input <- read.table("file", sep="\t", header=T, check.names=F) 
```

如果您想使用`$`运算符来调用变量，则列名很重要。手册中的描述：

```
check.names: logical.  If 'TRUE' then the names of the variables in the
          data frame are checked to ensure that they are syntactically
          valid variable names.  If necessary they are adjusted (by
          'make.names') so that they are, and also to ensure that there
          are no duplicates. 
```

# android - 如何在 Android 中向系统/应用程序写入权限

> ID：15194690
> 
> 赞同：5
> 
> 时间：2013-03-04T04:43:51.507
> 
> 标签：android

如何写入`permission`文件`system/app`夹我已经植根我的android设备我想下载应用程序并安装在`system/app`文件夹中

```
Process p = Runtime.getRuntime().exec( "su" ); 
```

我试过这个命令它询问用户`permission`然后它抛出异常 `system/app`是只读文件系统

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-25T15:14:35.660

首先使用

```
adb shell 
```

然后使用以下命令将系统文件夹重新挂载为可写

```
$ su
# mount -o remount,rw -t yaffs2 /dev/block/mtdblock3 /system 
```

然后将系统文件夹的权限更改为读取，写入和执行使用

```
# chmod 777 /system/app 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T04:51:12.223

只需输入您的 android 设备终端

```
 su 
```

接着

```
 chmod 777 system/app 
```

***su*** - 授予您超级用户权限

和 ***chmod 777*** 文件，更改文件的读、写和执行权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:25:29.863

`adb remount`在终端中尝试。如果您想从设备外壳执行此操作，请参阅[this question](https://stackoverflow.com/questions/10294808/android-mount-the-filesystem-with-write-permission) on how to remount the file system with write permission。

# internet-explorer - VBSCript 从 google.com 页面检索链接

> ID：15194691
> 
> 赞同：0
> 
> 时间：2013-03-04T04:43:56.553
> 
> 标签：internet-explorer, object, vbscript

我正在做的是这样的：

1.  加载 www.google.com
2.  在输入框中输入内容以搜索 Google.com
3.  然后在文本文件中检索 google 提供的链接。

我尝试了下面的脚本，但它没有返回 Google 提供的“链接”：

```
Set ie = CreateObject("InternetExplorer.Application")
ie.Visible = TRUE
ie.Navigate("https://www.google.co.in/#hl=en&output=search&sclient=psy-  ab&q=my+sa+fria&oq=my+sa+fria&gs_l=hp.3...136.425.0.1178.5.4.0.0.0.2.318.916.0j2j1j1.4.0.les%3B..0.0...1c.1.5.psy-ab.ILEhJPZdulQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.bmk&fp=aceecfc5e1faf854&biw=1366&bih=487")
Do until ie.ReadyState = 4
WScript.Sleep 50
Loop

set urls = ie.document.all.tags("a")
 For x = 0 to (urls.length)-1
 wscript.echo urls(x).innerHTML & " : " & urls(x).href
Next
wscript.echo "Number of URLs:", urls.length, vbNewline 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:18:53.773

搜索结果位于`<h3>`标签中，因此您可以使用此信息将它们与页面上的其他链接区分开来。尝试这个：

```
searchUrl   = "http://www.google.co.in/search?q="
searchTerms = Array("my", "sa", "fria")

Set ie = CreateObject("InternetExplorer.Application")
ie.Visible = True
ie.Navigate searchUrl & Join(searchTerms, "+")

Do Until ie.ReadyState = 4
  WScript.Sleep 50
Loop

Set results = ie.document.all.tags("h3")
For Each anchor In results.children.tags("a")
  WScript.Echo anchor.href
Next
WScript.Echo "Number of results:", results.Length, vbNewline 
```

# box-api - 尝试禁用帐户时出错 - BOX Api v2

> ID：15194694
> 
> 赞同：1
> 
> 时间：2013-03-04T04:44:16.390
> 
> 标签：box-api

我正在尝试使用 BOX 2.0 API 禁用用户帐户。但是，我收到 400 状态代码错误。为了排除故障，我尝试更新用户属性，但再次收到 400 状态代码错误。我什至在使用文档中的示例更新用户信息时收到错误（当然是我自己的参数）。

我正在使用 Powershell 3.0。我想也许我的语法有问题，但在 Chrome 中使用 Postman 时收到了完全相同的错误。任何指导将不胜感激！

**我的代码：**

```
Invoke-RestMethod -Uri https://api.box.com/2.0/users/USER_ID \
    -method PUT \
    -Headers @{"Authorization"="Bearer ACCESS_TOKEN"} \
    -Body @{"status"="inactive"} 
```

**错误：**

> {"type":"error","status":400,"code":"bad_request","help_url":"http://developers.box.com/docs/#errors","message":"Bad请求","re​​quest_id":"1028858396513419e934e95"}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:59:41.367

您是该帐户的管理员吗？如果您是管理员，您是否尝试将另一个管理员用户设置为非活动状态？您不仅需要成为管理员，还需要拥有高于您尝试设置为非活动用户的权限。

# javascript - 为什么 jQuery 不会在 Facebook 中加载？

> ID：15194699
> 
> 赞同：16
> 
> 时间：2013-03-04T04:44:43.130
> 
> 标签：javascript, jquery, facebook, google-chrome-extension, google-chrome-devtools

**情况**：我正在编写一个适用于任何页面的 chrome 扩展。

**问题问题**：我无法将 jQuery 加载到 Facebook 中，我想了解发生了什么。

**假设**：Facebook 拥有一些超先进的技术，可以以某种方式检测两者：

1.  *当 jQuery 在表面上分离*的 JSVM 执行上下文中通过 chrome 扩展加载时，Facebook megamind 不知何故知道这个表面上*分离*的JSVM 执行上下文，并阻止它。
2.  ~~jQuery 是通过 script.src 加载并阻止它~~ （当我使用通过 HTTPS 提供服务的 Google CDN 而不是方法 2 不起作用*但不足以回答*的 jQuery 时）。

***数据***

**我怎么知道 jQuery 没有加载？**

一世`⌘</kbd>`⌥</kbd>`j` to bring up the console in Chrome. When I do :``

```
 > jQuery
    >> ReferenceError : jQuery is not defined.
    > $('body')
    >> Error : Tried to get element "body" but it is not present on the page. 
```

**如何尝试在 facebook 中加载 jQuery？**

**方法1（需要但失败）**：

通过 manifest.json 文件中的以下代码：

```
"content_scripts"         :   [
                                  {
                                    "matches"   : ["<all_urls>"],
                                    "js"        : [ 
                                                    "javascript/jq/jquery-1.9.1.min.js",                                            
                                                    "javascript/jq/non-standard.js"
                                                  ],
                                    "all_frames": true // (or false, same failure)
                                  } 
                              ] 
```

**方法2（有效，但不足）**：

通过此 SO 答案中描述的方法（将[jQuery 加载到控制台](https://stackoverflow.com/a/7474386/907415)中），修改为允许正确的协议：

```
 var jq = document.createElement('script');
    jq.src = "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";
    document.getElementsByTagName('head')[0].appendChild(jq);
    jQuery.noConflict(); 
```

***概括***

假设 1 似乎不太可能，因为覆盖 Web 浏览器的单独执行上下文将是一个重大的安全漏洞（破坏该沙箱），并且不太可能受到制裁。因此，我可能是偏执狂并忽略了显而易见的事情，希望你们中的一个人会看到。

***附录（其他相关代码）***

所有*non-standard.js*：

```
 $.fn.in_groups_of = function( countPerGroup ) {
        var groups = [], offset = 0, $group;
        while ( ($group = this.slice( offset, (countPerGroup + offset) )).length ) {
            groups.push( $group );
            offset += countPerGroup;
        }
        return groups;
    }; 
```

更多*manifest.json*：

```
"manifest_version"        :   2,
"permissions"             :   [
                                  "http://*/",
                                  "https://*/",
                                  "tabs",
                                  "storage",
                                  "unlimitedStorage"
                              ], 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-04T09:11:33.873

> Chrome 控制台似乎无法访问内容脚本的执行上下文。

错了，确实如此。你需要看看正确的地方：

![如何访问 Chromne 扩展的执行环境的动画](../Images/2cc681be1f3135db75fb9511a15a7fb3.png)

之前的截屏显示，Chrome开发者工具的Console选项卡底部有两个下拉框，可用于更改开发者工具控制台的执行环境。
左侧可用于更改框架上下文（顶部框架，所以 iframe，...），右侧可用于更改脚本上下文（页面，内容脚本，...）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T05:15:48.103

***答案***

看来我的“实验方法”有缺陷。关于 Chrome 控制台无所不知的假设是不正确的。Chrome 控制台似乎无法访问内容脚本的执行上下文。因此，尽管控制台报告 jQuery 无权访问该页面，但它实际上是从内容脚本的执行上下文中获得的。

这已通过向 manifest.json 添加内容脚本 test.js 来验证：

```
"content_scripts"         :   [
                                  {
                                    "matches"   : ["<all_urls>"],
                                    "js"        : [
                                                    "javascript/jq/jquery-1.9.1.min.js",
                                                    "javascript/jq/non-standard.js",
                                                    "javascript/test.js" // <-- add
                                                  ], 
```

test.js 的内容是：

```
 var jtest = $('body');
    alert(jtest);
    alert(jtest.text()); 
```

现在无论我导航到什么页面，两个警报框都会按预期弹出。

有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-21T03:15:20.260

您现在可能知道所有这些，但我认为仍然有人发现这些有用。

在 Chrome 扩展程序中，

你有一些“脚本世界”：

*   原始页面脚本：页面本身的脚本。
*   内容脚本：您编写这些脚本，它们在页面上运行
*   弹出脚本：如果您有弹出页面，它们会在弹出窗口上运行。
*   后台脚本：在全局后台页面上运行。

谷歌在文档方面做得很好，所以关于所有这些脚本的大量文档[https://developer.chrome.com/extensions](https://developer.chrome.com/extensions)。

但是在您的情况下，请注意：页面脚本和内容脚本存在于不同的世界中，它们确实共享 DOM 和一些 Chrome 原生对象，但它们不共享它们创建的变量（或对象）。

对于这种情况，如果您的内容脚本中有 jQuery，那么您将准备好在您的内容脚本中使用 $ 和 jQuery。您可以使用它来查询 DOM（尽管某些 jQuery 事件可能无法按预期工作）。但是在页面上，你不会有 $ 和 jQuery，（你可能有 $，但它不是 jQuery ^^）。

你上面的方法2，它实际上将jQuery注入页面，jQuery将成为页面脚本。而且您不能在内容脚本中使用 $ 或 jQuery。

如果您同时使用这两种方法，您可以在页面脚本中使用 jQuery 1，在内容脚本中使用 jQuery 2，它们是 2 个不同的 jQuery 实例。这可能会引起混乱，但我总是这样做。

# visual-studio - Visual Studio 2012 和 Web Essentials 2012 在构建时崩溃

> ID：15194705
> 
> 赞同：5
> 
> 时间：2013-03-04T04:45:36.560
> 
> 标签：visual-studio, web-essentials

我已经安装了 Web Essentials 2.5.1 和 typescript 0.8.3；但是，现在 Visual Studio 2012 Ultimate 在构建时会立即崩溃。如果我卸载 Web Essentials，崩溃就会停止。有没有人有任何补救崩溃的建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T23:09:13.060

这可能是我们刚刚在拉入 Wordpress/PHP 项目时遇到的错误。如果**.css**和**.less**文件都*包含在 project*中，则构建将崩溃。如果发生这种情况

1.  右键单击**.css**文件并*从项目中排除*
2.  从资源管理器中删除**.css**文件
3.  保存项目
4.  双击**.less**文件以在编辑器中打开
5.  更改一些内容并**保存***.less*文件。
***   保存项目**

 **此时将生成**.css**文件和**.min.css**文件并将其作为依赖文件添加到项目中，就像它们在普通项目中一样。

如果您正在查看项目的**.csproj**文件，它看起来像这样：

```
<ItemGroup>
    <Content Include="test.less" />
    <Content Include="test.css" />
</ItemGroup> 
```

对此：

```
<ItemGroup>
    <Content Include="test.less" />
    <Content Include="test.css">
        <DependentUpon>test.less</DependentUpon>
    </Content>
    <Content Include="test.min.css">
        <DependentUpon>test.less</DependentUpon>
    </Content>
</ItemGroup> 
```**

# cordova - 通过 photoswipe carousel 打开页面后返回按钮问题

> ID：15194712
> 
> 赞同：1
> 
> 时间：2013-03-04T04:46:16.487
> 
> 标签：cordova, jquery-mobile, photoswipe

我有一个类似的问题

[http://forum.jquery.com/topic/jqm-1-0a3-dialog-url-state-appears-in-history](http://forum.jquery.com/topic/jqm-1-0a3-dialog-url-state-appears-in-history)

我正在使用photoswipe + jquerymobile + phonegap，问题是当画廊加载时，如果我转到另一个页面并单击后退按钮，我点击任何图像，现在从这里进入轮播模式，这发生在网址的末尾浏览器地址栏

# &ui-state=对话框

但它不会回到轮播模式。所以当我再次单击返回按钮时，它会将我带到画廊页面，跳过轮播模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:59:06.160

您需要做两件事：1）从 body 标签中删除 ps-active 类 2）找到所有 photoswipe 实例并取消设置它们

以下代码对我有用：

```
 $(document).bind('pagebeforechange', function(e) {
 if ($('.ps-carousel').length) {
  $('body').removeClass('ps-active');
  $('div.gallery-page').each(function(){
    var photoSwipe = window.Code.PhotoSwipe;
    var photoSwipeInstance = photoSwipe.getInstance($(this).attr('id'));
    if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
        photoSwipe.unsetActivateInstance(photoSwipeInstance);
     }
   });
 }
  }); 
```

请查看此**[链接](https://github.com/codecomputerlove/PhotoSwipe/issues/375)**以获取更多信息。

# html - 这是占位符链接吗？

> ID：15194714
> 
> 赞同：4
> 
> 时间：2013-03-04T04:46:25.017
> 
> 标签：html, css

在[这个页面上](http://playground.deaxon.com/css/slideshow/)，标记中的引用是如何`<img>`完成的？样式表有`[src]`选择器，但我迷路了（或者愚蠢地不知情）。

CSS 如何让 HTML 知道图像在哪里？

```
<!doctype html>
<title>Slideshow</title>
<link href=s.css rel=stylesheet>
<ul>
  <li><img src=1>
  <li><img src=2>
  <li><img src=3>
  <li><img src=4>
</ul> 
```

```
@-webkit-keyframes f {
       0% { opacity:0; }
      12% { opacity:1; -webkit-transform:scale(1.03) }
      25% { opacity:1; -webkit-transform:scale(1.06) }
      37% { opacity:0; -webkit-transform:scale(1.30) }
     100% { opacity:0; } }

@-moz-keyframes f {
       0% { opacity:0; }
      12% { opacity:1; -moz-transform:scale(1.03) }
      25% { opacity:1; -moz-transform:scale(1.06) }
      37% { opacity:0; -moz-transform:scale(1.30) }
     100% { opacity:0; } }

     body { background:#f0f0eb }
ul, [src] { position:absolute }
       ul { overflow:hidden;
            top:50%;
            left:50%;
            width:650px;
            height:300px;
            margin:-200px 0 0 -340px;
            padding:0;
            list-style:none;
            border:15px solid #fff;
            -webkit-box-shadow:0 1px 2px rgba(0,0,0,.2);
            box-shadow:0 1px 2px rgba(0,0,0,.2) }

    [src] { opacity:0;
            -webkit-animation:f 12s linear infinite; -moz-animation:f 12s linear infinite }
[src="2"] { -webkit-animation-delay:3s; -moz-animation-delay:3s }
[src="3"] { -webkit-animation-delay:6s; -moz-animation-delay:6s }
[src="4"] { -webkit-animation-delay:9s; -moz-animation-delay:9s } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:51:05.980

真的很简单 - 它们实际上是有效的 URL，例如

```
<img src=4> 
```

是一个相对链接，指向：

```
http://playground.deaxon.com/css/slideshow/4 
```

或者：

![一种](../Images/07591a17aa23edf280d2f3a8b445a48f.png)

HTML 可能形成的“共同风格”是：

```
<ul>
  <li><img src="1"></li>
  <li><img src="2"></li>
  <li><img src="3"></li>
  <li><img src="4"></li>
</ul> 
```

不是：

```
<ul>
  <li><img src=1>
  <li><img src=2>
  <li><img src=3>
  <li><img src=4>
</ul> 
```

我认为是没有`"`标记让你感到困惑。

虽然，正如[@Wesley](https://stackoverflow.com/users/398242/wesley-murch)指出的那样，这也是完全有效的 HTML（除了缺少的`alt`标签）。

# ant - 在 ant 脚本中使用 if 语句时出现异常

> ID：15194715
> 
> 赞同：0
> 
> 时间：2013-03-04T04:46:30.400
> 
> 标签：ant, ant-contrib

我正在尝试将属性变量的值与字符串进行比较，如下所示

```
<if>
    <equals "${mat.projectName}"="seal">
<then> 
```

完成后，我收到以下消息。

> 元素类型 "equals" 必须后跟属性规范、">" 或 "/>"

我正在使用 Eclipse 框架来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:26:24.127

首先阅读手册：

[http://ant.apache.org/manual/Tasks/conditions.html](http://ant.apache.org/manual/Tasks/conditions.html)

显然，从我们知道的手册中`equals`：

> arg1 要测试的第一个值 arg2 要测试的第二个值

所以应该是

```
<if>
    <equals arg1="${mat.projectName}" arg2="seal" />
<then>
    ... 
```

我建议您先阅读有关 XML 的指南，然后再阅读 Ant 的手册。

* * *

**更新：**

`<if>`任务不是由 Ant 提供的；它由 Ant-Contrib 提供。所以你需要`<taskdef>`.

例如，我将 ant-contrib.jar 放在我项目的 lib 目录 (${basedir}/lib) 中，所以我可以编写以下内容：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
    <classpath>
        <pathelement location="lib/ant-contrib.jar"/>
    </classpath>
</taskdef> 
```

更多信息，您可以查看`taskdef`的手册页，以及 Ant-contrib 的网页：

[http://ant.apache.org/manual/Tasks/taskdef.html](http://ant.apache.org/manual/Tasks/taskdef.html)

[http://ant-contrib.sourceforge.net/](http://ant-contrib.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:58:17.677

正是你的错误消息所说的......

> 元素类型 "equals" 必须后跟属性规范、">" 或 "/>"

你要这个：

```
<if>
    <equals arg1="${mat.projectName}" arg2="seal"/>
    <then>
        <yadda, yadda, yadda/>
    </then>
</if> 
```

这是 XML，因此您需要带值的参数。查看此页面上的[等于](http://ant.apache.org/manual/Tasks/conditions.html)条件。它需要两个参数。

注意`<if>`. 条件以 . 结尾`/>`。是的`<then>`子实体，`<if>`if*子句*是子句的子实体`<then>`。请注意，您基本上缩进了两次。

如果你正在做一个不等于条件，它看起来像这样：

```
<if>
    <not>
        <equals arg1="${mat.projectName}" arg2="seal"/>
    </not>
    <then>
        <yadda, yadda, yadda/>
    </then>
</if> 
```

# java - JSF：

> ID：15194717
> 
> 赞同：1
> 
> 时间：2013-03-04T04:46:35.987
> 
> 标签：java, xhtml, ehcache, jsf-1.2

我有一个 bean，并且有缓存和从中获取价值的方法。

```
public List<SelectItem> getSelectItemList(String key){
 return cache.get(key).getValue();
} 
```

我可以知道如何在 JSF 中获取此列表吗？

我努力了..

```
 <f:selectItems value="#{Bean.getSelectItemList(abc)}" /> 
```

但它不起作用，因为它期待一个属性。

注意：我使用 JSF 1.2 ，EHCache

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:52:55.500

JSF 代码：

```
 <t:selectOneMenu id="testId" value="#{testBean.selectedItem}" >
      <f:selectItems value="#{testBean.selectItemList}" />
 </t:selectOneMenu> 
```

管理 Bean 代码：

```
 private String selectedItem;    
    private List selectItemList;
public List<SelectItem> getselectItemList() {
        if(null == selectItemList || selectItemList.isEmpty()){
            selectUserList = new ArrayList<SelectItem>();
            selectItemList.add(new SelectItem(this.selectedItem, cache.get(this.selectedItem).getValue()));
        }
        return selectItemList;
    } 
```

# xml - 如何使用 XSLT 合并两个 xml 文件

> ID：15194718
> 
> 赞同：9
> 
> 时间：2013-03-04T04:46:36.797
> 
> 标签：xml, xslt

我有两个需要使用 XSLT 合并为一个的 xml 文件。

第一个 XML 是（原始的）：

```
<feed>
  <author> 
    <firstName>f</firstName>
    <lastName>l</lastName>
  </author>
  <date>2011-01-02 </date>
  <entry>
    <id>1</id>
    <Name>aaa</Name>
    <Content>XXX</Content>     
  </entry>
  <entry>
    <id>2</id>
    <Name>bbb</Name>
    <Content>YYY</Content>   
  </entry>
</feed> 
```

第二个 XML（更新数据）是这样的：

```
 <feed>
      <author> 
       <firstName>f</firstName>
       <lastName>l</lastName>
      </author>
      <date>2012-05-02 </date>
      <entry>
        <id>2</id>
        <Name>newName</Name>
        <Content>newContent</Content>     
      </entry>
      <entry>
        <id>3</id>
        <Name>ccc</Name>
        <Content>ZZZ</Content>   
      </entry>
  </feed> 
```

所需的合并结果 - 使用第二个 XML 更新第一个：

```
 <feed>
      <author> 
       <firstName>f</firstName>
       <lastName>l</lastName>
      </author>
      <date>2012-05-02 </date>
      <entry>
        <id>1</id>
        <Name>aaa</Name>
        <Content>XXX</Content>     
      </entry>     
      <entry>
        <id>2</id>
        <Name>newName</Name>
        <Content>newContent</Content>     
      </entry>
      <entry>
        <id>3</id>
        <Name>ccc</Name>
        <Content>ZZZ</Content>   
      </entry>
   </feed> 
```

我搜索了stackoverflow，但仍然找不到答案。感谢帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T07:20:33.177

与我为您上一个问题提供的答案几乎相同，已修改以匹配您的新 XML 格式：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="fileName" select="'updates.xml'" />
  <xsl:param name="updates" select="document($fileName)" />

  <xsl:variable name="updateItems" select="$updates/feed/entry" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="feed">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()[not(self::entry)] | 
                                   entry[not(id = $updateItems/id)]" />
      <xsl:apply-templates select="$updateItems" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在第一个示例 XML 上运行时，将第二个保存为“updates.xml”，这将产生：

```
<feed>
  <author>
    <firstName>f</firstName>
    <lastName>l</lastName>
  </author>
  <date>2011-01-02 </date>
  <entry>
    <id>1</id>
    <Name>aaa</Name>
    <Content>XXX</Content>
  </entry>
  <entry>
    <id>2</id>
    <Name>newName</Name>
    <Content>newContent</Content>
  </entry>
  <entry>
    <id>3</id>
    <Name>ccc</Name>
    <Content>ZZZ</Content>
  </entry>
</feed> 
```

# scala - 如何将 scala.xml.Attribute 的序列转换为 scala.xml.MetaData？

> ID：15194719
> 
> 赞同：0
> 
> 时间：2013-03-04T04:46:38.860
> 
> 标签：scala, scala-xml

这里没有太多要补充的。当然，我可以用命令式编码风格以某种方式完成它，但我很好奇如何很好地解决这个问题。

```
def this( arguments: Seq[(String, String)], merges: Seq[(String, String)]) = this
{
    val metadata: Seq[Attribute] = ( arguments ++ merges ).groupBy( _._1 ).map
    {
        case (key, value) => Attribute( None, key, Text( value.map( _._2 ).mkString( " " ) ), Null )
    }

    var result: MetaData = Null

    for( m <- metadata ) result = result.append( m )

    result
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:37:43.040

这个怎么样？

```
metadata.fold(Null)((soFar, attr) => soFar append attr) 
```

因此，如果您愿意，可以完全取消中间变量。在全：

```
def foo(arguments: Seq[(String, String)], merges: Seq[(String, String)]) =
  (arguments ++ merges).groupBy(_._1).map {
    case (key, value) => Attribute(None, key, Text(value.map(_._2).mkString(" ")), Null)
  }.fold(Null)((soFar, attr) => soFar append attr) 
```

# cordova - 安全套接层 SDK

> ID：15194721
> 
> 赞同：0
> 
> 时间：2013-03-04T04:46:51.540
> 
> 标签：cordova, ssl, sdk, ssl-certificate

是否有任何 SDK 可用于开发使用 HTML/CSS/Javascript开发的**SECURE SOCKET LAYER移动应用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:39:47.737

SSL 在服务器上而不是在客户端上启用。SSL 所做的是加密客户端和服务器之间的流量。默认情况下，所有具有现代浏览器或 webkits 的客户端都兼容 SSL。要启用 SSL，您需要从 Godaddy、Verisign 等证书颁发机构购买 SSL 证书并安装在您的服务器上。证书是进行公钥加密的私钥对。这是一个解释 SSL 的好视频。[http://www.youtube.com/watch?v=iQsKdtjwtYI](http://www.youtube.com/watch?v=iQsKdtjwtYI)。所以底线是您不必担心客户端的 SSL。使用 SSL 启动并运行服务或 php 链接后，只需在客户端使用 https 访问 url。**这与通过http**访问它没有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:21:31.910

SSL 将由您的 WebKit 和操作系统处理。它的传输层安全性和您在应用层使用 HTML/CSS 和 Javascript 开发的应用程序。因此，如果您有一项使用 SSL 保护的服务，例如[https://mydomain.com/myservice](https://mydomain.com/myservice)，您可以使用 https 很好地访问此服务，并且传输层将自动安全。

# database - Redis DB，是否可以为某些数据库启用快照但不能为其他数据库启用快照？

> ID：15194727
> 
> 赞同：0
> 
> 时间：2013-03-04T04:47:12.370
> 
> 标签：database, serialization, redis, persistence

在 REDIS DB 上执行 CRUD 操作时，必须指定在对键/值进行操作时应用的数据库。我想知道是否可能对某个指定数据库的键/值进行快照（持久化）而不是为其他数据库？

我喜欢使用一个数据库来管理序列化设置，但使用另一个数据库来存储集合数据，这些数据也可以从 R 内部访问，但应该严格在内存中且非持久化。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:55:49.663

**TL：博士；**您不能为一个数据库启用快照，而不能为其他数据库启用快照。

在这种情况下（处理多个工作流时）最好的办法是使用自己的配置生成 2 个 redis 服务器。

然后，您将能够设置**一个没有持久性的 Redis 服务器**（严格在内存中）（`save ""`）和**另一个具有细粒度持久性**的 Redis 服务器，具体取决于您的写入使用情况。

请参阅[Redis-conf](https://raw.github.com/antirez/redis/2.6/redis.conf)：

```
################################ SNAPSHOTTING  #################################
#
# Save the DB on disk:
#
#   save <seconds> <changes>
#
#   Will save the DB if both the given number of seconds and the given
#   number of write operations against the DB occurred.
#
#   In the example below the behaviour will be to save:
#   after 900 sec (15 min) if at least 1 key changed
#   after 300 sec (5 min) if at least 10 keys changed
#   after 60 sec if at least 10000 keys changed
#
#   Note: you can disable saving at all commenting all the "save" lines.
#
#   It is also possible to remove all the previously configured save
#   points by adding a save directive with a single empty string argument
#   like in the following example:
#
#   save "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:54:16.837

不，当redis持久化到磁盘时，它会将整个数据集持久化到磁盘。此外，不推荐使用多数据库配置，因此我建议不要依赖它。

# tridion - Tridion 2011 SP1 中 Item.ItemPropertyFileNameSubFolder 属性的替代方案

> ID：15194729
> 
> 赞同：0
> 
> 时间：2013-03-04T04:47:42.163
> 
> 标签：tridion, tridion-2011

在我们的 TBB 实现之一中，我们正在使用 Item 的 ItemPropertyFileNameSubFolder 属性。我们正在将我们的应用程序从 5.3 sp1 迁移到 Tridion 2011 Sp1，并且最新版本中不存在 ItemPropertyFileNameSubFolder 属性。我们使用的代码片段如下

```
 // Handle subfolder (todo: fix this, ItemPropertyFileNameSubFolder does not exist!!
 string subFolder = GetPropertyValue(item, Item.ItemPropertyFileNameSubFolder);
 if (subFolder != "") {
     if (subFolder.StartsWith("/")) {
         // Strip of leading /
         subFolder = subFolder.Substring(1);
     }
     if (!subFolder.EndsWith(PathSeparator)) {
         // Ensure there is always a separator at the end
         subFolder += PathSeparator;
     }
     fileName = subFolder + fileName;
 } 
```

这基本上从属性中检索子文件夹路径，并在文件名前加上值。您能否为我提供任何替代方案或解决方法。

谢谢拉金德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:33:34.157

这个属性一开始是可选的，甚至可能没有设置，这可能不会发生，否则你会在那里遇到异常。

您不妨将其省略，或者（另外）`Item.ItemPropertyFileNamePrefix`在尚未使用此前缀时使用。

# android - 我怎样才能让身体移动到我触摸的位置？

> ID：15194733
> 
> 赞同：2
> 
> 时间：2013-03-04T04:48:21.157
> 
> 标签：android, box2d, andengine

嗨，我正在尝试制作一个空气曲棍球类型的游戏，但我在实现桨运动组件时遇到了麻烦。如何使用 setLinearVelocity 使用 andengine 的 box2d 扩展将身体（桨）移动到我的触摸位置？当我尝试这样做时，球会以看似随机的路径移动。

这是我尝试过的。

```
@Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent p) {

            if(p.isActionDown()){
                moveAir(p.getY(),p.getX());
            }else if(p.isActionMove()){
                moveAir(p.getY(),p.getX());
            }else if(p.isActionUp()){
                myPad.setLinearVelocity(0, 0);
            }

        return false;
    }

    private void moveAir(float y, float x) {
        x=x/32;
        y=y/32;

        if(myPad.getLocalCenter().x>x){
            myPad.setLinearVelocity(myPad.getLinearVelocity().x-10, myPad.getLinearVelocity().y);
        }else if(myPad.getLocalCenter().x<x){
            myPad.setLinearVelocity( myPad.getLinearVelocity().x+10,  myPad.getLinearVelocity().y);
        }else{
            myPad.setLinearVelocity(0, myPad.getLinearVelocity().y);
        }

        if(myPad.getLocalCenter().y>y){
            myPad.setLinearVelocity(myPad.getLinearVelocity().x,myPad.getLinearVelocity().y-10);
        }else if(myPad.getLocalCenter().y<y){
            myPad.setLinearVelocity( myPad.getLinearVelocity().x,myPad.getLinearVelocity().y+10  );
        }else{
            myPad.setLinearVelocity(myPad.getLinearVelocity().x, 0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:33:56.290

Box2D 有一种特殊类型的关节来实现这种类型的交互。您想在触摸的对象上使用“鼠标关节”。

在andengine 论坛上已经有一个不错的mousejoint 教程： [http ://www.andengine.org/forums/tutorials/tut-box2d-mousejoint-drag-and-drop-t1156.html](http://www.andengine.org/forums/tutorials/tut-box2d-mousejoint-drag-and-drop-t1156.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:36:11.923

感谢您的建议，但我发现`setLinearVelocity`使用比鼠标关节更简单：

```
float linearVelocityX = (TouchX - myBody.getPosition().x);
float linearVelocityY = (TouchY - myBody.getPosition().y);
Vector2 linearVelocity = new Vector2(linearVelocityX, linearVelocityY);
myPad.setLinearVelocity(linearVelocity); 
```

# iphone - 带有opengles trows错误的opencv框架？

> ID：15194741
> 
> 赞同：0
> 
> 时间：2013-03-04T04:49:07.850
> 
> 标签：iphone, ios, objective-c, opencv, opengl-es

[我尝试从此链接](http://d1xzuxjlafny7l.cloudfront.net/downloads/HelloOpenGL2.zip)运行一个基本的 opengl 程序。我可以成功运行它。现在我需要在其中添加一些opencv的功能。所以我从[这个链接](https://github.com/aptogo/FaceTracker)添加了 opencv 框架。

添加框架后，我将文件更改为 .mm 并且编译良好。当我添加“cv::Mat 变量”时，问题就来了。我收到以下错误。这会是什么原因？

以下是添加“cv::Mat 变量”时出现的错误。

```
 Undefined symbols for architecture i386:
  "_gzclose", referenced from:
      _cvReleaseFileStorage in OpenCV(persistence.o)
      _cvOpenFileStorage in OpenCV(persistence.o)
  "_gzeof", referenced from:
      icvEof(CvFileStorage*)      in OpenCV(persistence.o)
  "_gzgets", referenced from:
      icvGets(CvFileStorage*, char*, int)in OpenCV(persistence.o)
  "_gzopen", referenced from:
      _cvOpenFileStorage in OpenCV(persistence.o)
  "_gzputs", referenced from:
      icvPuts(CvFileStorage*, char const*)in OpenCV(persistence.o)
  "_gzrewind", referenced from:
      _cvOpenFileStorage in OpenCV(persistence.o)
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:08:48.093

这解决了我的问题。添加添加opencv库文件

AVFoundation.framework
ImageIO.framework
libz.dylib

应该添加。这个链接清楚地解释了这一点。[http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

# assembly - 汇编语言奇怪的错误

> ID：15194743
> 
> 赞同：0
> 
> 时间：2013-03-04T04:49:10.767
> 
> 标签：assembly, mips

我是汇编语言的新手，我遇到了一个奇怪的错误。该程序应该显示用户输入的整数的 4 个最低有效位。它适用于大于 8 的数字，但对于小于或等于 8 的数字，它会输出应该在的数字。对于 8，它输出 8000 而不是 1000，对于 5，它输出 0401。我不明白为什么，谁能帮忙？

```
 .data
inPrompt:   .asciiz "Enter an integer: "
outLab:     .asciiz "Least significant 4 bits of int entered are "
############################ code segment ################################
        .text
        .globl main
main:
        li $v0, 4
        la $a0, inPrompt        
        syscall                   # print input prompt

        li $v0, 5
        syscall                   # read input integer

        move $t0, $v0

        li $v0, 4
        la $a0, outLab        
        syscall

        li $v0, 1

        andi $a0, $t0, 8               
                syscall

        andi $a0, $t0, 4             
                syscall

        andi $a0, $t0, 2             
                syscall

        andi $a0, $t0, 1        
                syscall
          ##########################################################

                li $v0, 10               # exit
                syscall 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:14:01.760

问题是您正在有效地计算和打印*数字的加法分解*（以 2 的幂为因子）而不是其位。

简单地说，例如对于“第 4 位”
  `andi $a0, $t0, 4`
，将导致存储在寄存器中`A0`......
- ..`4`如果寄存器中的值`T0`具有 4 的附加因子（例如 4、5、6、7、12、13 等.)
和
- ... 如果 in 的值`T0`不具有 4 的附加因子（例如 0、1、2、3、8、9、10 等），则值为 0。

这解释了为什么`5`你得到 `0401` since`5 is 4 + 1`或更准确地说，`5 is 0 * 8 + 4 + 0 * 2 + 1`

您需要做的是*以下*两件事之一：

*   测试`andi`运算结果的结果是否为非零，在这种情况下，在调用 syscall 或之前将 1 加载到 $a0 中
    或
*   [bitwise] 将运算结果移动`andi`相应的位数（测试“8 bit”时移动3次，测试“4 bit”时移动2次，测试“2 bit”时移动一次）

第一个建议将导致类似于以下内容，以代替“andi + syscall”组：

```
 andi $a0, $t0, 4
            blez $a0, outBit4  # bit is zero output integer value 0
            li $a0, 1          # bit is one  ouptut integer value 1 (repl 4 by 1)
  outBit4:  syscall 
```

**编辑**：
**将程序保持在 16 LoC 以下...** （顺便说一句，此要求和其他提示表明`homework`，因此我将提供一般想法而不是给出代码）
有几种方法可以缩短代码，但 16 LoC考虑到设置使用了 9 行，要求有点困难：提示用户输入，获取输入并保存它，并输出答案的开始......

最常见的方法是使用一个（或多个嵌套的）循环。在这种情况下，一个循环就足够了，基本上您需要重复 4 次几乎相同的事情，因此以添加一些 LoC 来管理循环本身（即增加参数和检测循环结束条件）为代价，您可以编写以参数化方式处理单个工作单元的片段，并在循环中包含此逻辑。

一个稍微相关的方法是使用子例程，其中重复的逻辑写在一个子例程中，然后可以多次调用，传递不同的参数来实现参数化的行为。

我提到了上面的内容，因为它们在汇编语言中非常常用，并且确实在大型编程中使用。然而，以目前的“基于andi”的逻辑，恐怕这两种方法都不会将事情带入16 LoC 以下。您可能需要使用循环结构*和*位移逻辑。

# facebook - 尽管尺寸正确，但在 Facebook 上发布的缩略图未显示。

> ID：15194744
> 
> 赞同：0
> 
> 时间：2013-03-04T04:49:12.353
> 
> 标签：facebook, wordpress, thumbnails, facebook-opengraph

你好亲爱的堆栈溢出社区。我很想解决这个问题，真的希望你们中的任何人都可以帮助我。

我的 Header.php 上有这段代码，告诉 facebook 在分享我的链接时显示我的特色图片缩略图。我还设置了所有打开的图形标签。

```
<?php
global $wp_query;
$thePostID = $wp_query->post->ID;
if( has_post_thumbnail( $thePostID )){
    $thumb_id = get_post_thumbnail_id( $thePostID );
    $image = wp_get_attachment_image_src( $thumb_id );
    echo '<meta property="og:image" content="'.$image[0].'" />';
} ?> 
```

我已经在我的浏览器中确认代码正确呈现并且它指向适当的缩略图文件。该文件是 300x300，所以它应该是正确的。

好吧，它不是！

当我通过 facebook 调试器传递我的 url 时，它显示了两个致命错误。一，它甚至不显示正确的图像！我通过调试器放置的每个链接都显示相同的特色图像。为什么忽略每个帖子的特色图片？

它还说我的图片不符合他们的最小尺寸要求（200x200）

图片是300x300！！！为什么这么说！？

如果有人想通过调试器传递它，我的网站是 www.estamosobservando.com。

如果你能帮助我赢得这场与 Opengraph、Facebook 和世界的战斗，我将永远感激你！

B.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:46:02.357

试试 Facebook 开发者调试器。它对我有用 - [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:28:52.023

好的，我解决了这个问题......也许这会帮助其他用户遇到同样的问题......尽管在源代码中呈现正确的图像，但它在每个链接中使用相同的缩略图的原因是因为

`<meta property="og:url" content="`线。

我在那里输入了网站的 URL，当然，规范的 URL 支配了它们，调试器去那里获取特色图像。我用

`<?php echo get_permalink(); ?>`

并且做到了。感谢您的帮助，我希望这个问题可以帮助其他人解决类似的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T07:11:30.000

[http://estamosobservando.com/](http://estamosobservando.com/)的 HTML在其标题中有两个 og:image 标记：`<meta property="og:image" content="http://estamosobservando.com/wp-content/uploads/2011/06/servicios-publicos-bogota-concept-art-150x150.jpg" />`和`<meta property="og:image" content="http://estamosobservando.com/wp-content/themes/servicios/images/ogtag-2013.jpg" />`.

因为您网站上的所有页面都使用相同的 og:url 标签，所以用户在您网站上共享的任何页面都将共享主页。虽然 Facebook 通常在发布时为用户提供图像之间的选择，但在 URL 被共享几次后，Facebook 会“冻结”一些元数据。这可能就是为什么只出现通用图像的原因。

如果您希望用户能够共享单个帖子，您应该修改较低的 OpenGraph 标签以表示[单个文章](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#article)而不是整个[电影网站](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#movie)。

# jquery - 使用 Jquery 按分辨率更改宽度和高度

> ID：15194750
> 
> 赞同：0
> 
> 时间：2013-03-04T04:49:59.900
> 
> 标签：jquery, image, responsive-design

我在这里发布了一个新问题，我得到了当我的屏幕分辨率低于 980 像素时如何删除图像宽度和高度的答案。

我得到了这个代码：

```
<img width="477" height="299" src="/uploads/2012/01/415.jpg" class="attachment-portfolio2 wp-post-image"/> 

var images;

$(function() {  
    images = $('img.wp-post-image');
    removeSize();
});

$(window).resize(removeResize);

function removeSize()
{
    if($(window).width() < 980 && images.length > 0)
    {
        images.removeAttr('width').removeAttr('height');
    }
} 
```

现在，我想将其更改为“更改宽度 jquery comand”，我尝试了：

```
 var images;

    $(function() {  
        images = $('img.wp-post-image');
        removeSize();
    });

    $(window).resize(removeResize);

    function removeSize()
    {
      if ( $(window).width() < 960) {
    $('img.wp-post-image').animate({width:'400px'});
    $('img.wp-post-image').animate({height:'300px'});
}
else {
    $('img.wp-post-image').animate({width:'400px'});
    $('img.wp-post-image').animate({height:'300px'});
}
    } 
```

但是不工作，有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:54:40.837

如果将其简化为常规函数，您将得到：

```
$(function () {
    var images = $('img.wp-post-image');
    $(window).on('resize', function() {
        if ($(window).width() < 960) {
            $('img.wp-post-image').animate({ width: '400px' });
            $('img.wp-post-image').animate({ height: '300px' });
        } else {
            $('img.wp-post-image').animate({ width: '400px' });
            $('img.wp-post-image').animate({ height: '300px' });
        }
    });
}); 
```

这会很好用，除了 if / else 似乎静音的事实，因为无论如何它都会做同样的事情，并且您同时为相同的元素设置两次动画？您是否尝试链接动画，如果是，请使用回调功能：

```
$('img.wp-post-image').animate({ width: '400px' }, 500, function() {
      $(this).animate({ height: '300px' }, 500);
}); 
```

# java - 如何使用intent调用android中下一个activity的方法

> ID：15194751
> 
> 赞同：0
> 
> 时间：2013-03-04T04:50:01.660
> 
> 标签：java, android, search, android-intent, filter

我现在正在做的是-> 我在一个活动中从 web 服务获取数据并在列表视图中显示整个数据。我在呈现的列表视图本身上添加了一个搜索功能。

我的要求是 --> 我应该在第一个活动中有一个搜索按钮。当它被点击时，应该在第二个活动中显示相关结果，这样做`putExtras`在意图中添加了这样`intent.putExtra("search", searchBox);`的第二个活动搜索功能关键字。但仍然没有得到搜索到的输出。

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

StrictMode.ThreadPolicy policy = new      StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 

final EditText searchBox=(EditText) findViewById(R.id.search);
final ListView  list=(ListView)findViewById(android.R.id.list);

//get the LayoutInflater for inflating the customomView
 //this will be used in the custom adapter
 inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String,  String>>();
    // Creating JSON Parser instance
            final JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
                 posts = json.getJSONArray(KEY_POSTS);

    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);
                // to remove all <P> </p> and <br /> and replace with ""
                 content = content.replace("<br />", "");
                 content = content.replace("<p>", "");
                 content = content.replace("</p>", "");

                //authornumber is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                String url = null;
                String slug = null;
                try {
                JSONArray atta = c.getJSONArray("attachments");
                for(int j = 0; j < atta.length(); j++){
                    JSONObject d = atta.getJSONObject(j);

                    slug = d.getString(KEY_SLUG);

                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                    url = thumbnail.getString(KEY_URL);

                }
                } catch (Exception e) {
                    e.printStackTrace();

                }

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);
        map.put(KEY_SLUG, slug);
        map.put(KEY_URL, url);
   //                System.out.println("the map is title "+map.get("title"));
     //title2.add(map.get("title"));
        // adding HashList to ArrayList
        songsList.add(map);
            }   

            }catch (JSONException e) {
                e.printStackTrace();

                }

          //searchResults=OriginalValues initially
            searchResults=new ArrayList<HashMap<String, String>>(songsList);

     // Getting adapter by passing json data ArrayList
        adapter=new LazyAdapter(this, songsList);   

         list.setAdapter(adapter);

         searchBox.addTextChangedListener(new TextWatcher() {

             public void onTextChanged(CharSequence s, int start, int before, int count) {
               //get the text in the EditText
                searchString=searchBox.getText().toString();
                textLength=searchString.length();
               searchResults.clear();

               for(int i=0;i<songsList.size();i++)
               {
               playerName=songsList.get(i).get("title").toString();
              System.out.println("player name "+playerName);
              if(textLength<=playerName.length()){
              //compare the String in EditText with Names in the    ArrayList
                         if(searchString.equalsIgnoreCase(playerName.substring(0,textLength))){
                searchResults.add(songsList.get(i));
                System.out.println("the array list is "+songsList.get(i));
                adapter=new LazyAdapter(Home.this, searchResults);   

                 list.setAdapter(adapter);
                }

                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:55:40.913

意图是针对活动而不是其中的方法，因此您不能使用它来调用任何特定方法，但是您可以使用附加功能来确定您想要做什么\

就像当你从 Intent 获得额外的东西之后，你可以，

```
 if extras has "search" value 
 then do something about it 
```

# c# - 获取列表

> ID：15194755
> 
> 赞同：2
> 
> 时间：2013-03-04T04:50:14.100
> 
> 标签：c#, linq, linq-to-xml

我正在使用 linq 代码解析 XML 文件。这是我的代码。我想要绑定详细信息和图像是列表。

```
XmlSerializer serializer = new XmlSerializer(typeof(Notchs));
XDocument xmlDoc = XDocument.Parse(dataInXmlFile);
Notchs notchs = (Notchs)serializer.Deserialize(xmlDoc.CreateReader());

var query = from l in xmlDoc.Descendants("Person")
            select new Notch
            {
                name = (string)l.Attribute("name").Value,
                Titles = l.Element("Details").Elements("detail")
                           .Select(s => s.Attribute("games").ToString())
                           .ToList(),

                Image = l.Element("Details").Elements("detail").Elements("event_image").Elements("image")
                         .Select(x => x.Attribute("url").ToString()).ToList()
            };

foreach (var result in query)
{
    Console.WriteLine(result.name);
    foreach (var detail in result.Titles)
    {
        Console.WriteLine(detail);
    }
}
NotchsList.ItemsSource = query.ToList(); 
```

这是我正在使用 XML 文件，我想用图像获取名称和游戏

```
<?xml version="1.0" encoding="utf-8"?>
<root>
 <Peoples>
  <Person name="Raja">
   <Details>
    <detail games="Cricket">
      <event_image>
        <image  url="http://Cricket.jpeg"/>
      <event_image>
    </detail>
    <detail games="Foot Ball">
     <event_image>
       <image  url="http://FootBall.jpeg"/>
     <event_image>
    </detail>
    <detail games="Volley Ball">
     <event_image>
      <image  url="http://.Volley.jpeg3"/>
     <event_image>
    </detail>
   </Details>
  </Person>
  <Person name="Rama">
    <Details>
     <detail games="Chess">
      <event_image>
        <image  url="http://Chess.jpeg"/1>
      <event_image>
     </detail>
     <detail games="Table Tennis">
      <event_image>
       <image  url="http://TTennis.jpeg"/>
      <event_image>
     </detail>
     <detail games="Carrom">
      <event_image>
       <image  url="http://Carrom.jpeg"/>
      <event_image>
     </detail>
   </Details>
  </Person>
 </Peoples>
</root> 
```

我的代码喜欢

```
public class Notch
{
    [XmlAttribute("name")]
    public string name { get; set; }

    [XmlAttribute("games")]
    public List<string> Titles { get; set; }

    [XmlAttribute("url")]
    public List<string> Image { get; set; }
}

[XmlRoot("root")]
public class Notchs
{
    [XmlArray("Peoples")]
    [XmlArrayItem("Person")]
    [XmlArrayItem("Details")]
    public ObservableCollection<Notch> Collection { get; set; }
} 
```

我的 xml 文件

```
 <ListBox x:Name="NotchsList" 
        SelectionChanged="NotchsList_SelectionChanged"   Margin="0,-5.25,22,0"  Grid.Row="1" HorizontalAlignment="Right" Width="768" Grid.Column="1" Grid.RowSpan="3" d:LayoutOverrides="VerticalMargin">
        <ListBox.ItemTemplate>
            <DataTemplate>

                    <StackPanel Margin="0,0,0,0" Orientation="Vertical" Grid.ColumnSpan="2"
                        Grid.Column="0"
                        Height="160"
                        VerticalAlignment="Top">
                        <StackPanel Background="#eb2427" Orientation="Vertical">
                            <TextBlock Grid.Row="1"  FontFamily="Calibri" FontSize="34" FontWeight="Bold"  FontStyle="Normal" Margin="10,0,0,0"
                                Text="{Binding name}"
                                   />               
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                             <TextBlock Grid.Row="1" FontFamily="Calibri" FontSize="32" Foreground="#a7a9ac"
                                Text="{Binding games}" ScrollViewer.HorizontalScrollBarVisibility="Visible"/>     

                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Image Grid.Row="1"  Source="{Binding Image}" VerticalAlignment="top" />
                        </StackPanel>           
                </StackPanel>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我得到了像

拉贾

```
 System.collection.generic.list'1[System.String]

  System.collection.generic.list'1[System.String] 
```

拉玛

```
 System.collection.generic.list'1[System.String]

  System.collection.generic.list'1[System.String] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:55:37.023

你需要改变

```
s.Attribute("games").ToString()
x.Attribute("url").ToString() 
```

到：

```
s.Attribute("games").Value.ToString()
x.Attribute("url").Value.ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:02:40.700

修复 XML 标记结尾后 - 关闭所有 event_image 标记并删除“1”（如果国际象棋图像如下所示）并删除代码的第 1 行和第 3 行，以及最后一行 - 未使用的序列化程序和对其的调用。我得到以下输出：

```
Raja
games="Cricket"
games="Foot Ball"
games="Volley Ball"
Rama
games="Chess"
games="Table Tennis"
games="Carrom" 
```

--

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <Peoples>
    <Person name="Raja">
      <Details>
        <detail games="Cricket">
          <event_image>
            <image  url="http://Cricket.jpeg"/>
          </event_image>
        </detail>
        <detail games="Foot Ball">
          <event_image>
            <image  url="http://FootBall.jpeg"/>
          </event_image>
        </detail>
        <detail games="Volley Ball">
          <event_image>
            <image  url="http://.Volley.jpeg3"/>
          </event_image>
        </detail>
      </Details>
    </Person>
    <Person name="Rama">
      <Details>
        <detail games="Chess">
          <event_image>
            <image  url="http://Chess.jpeg"/>
          </event_image>
        </detail>
        <detail games="Table Tennis">
          <event_image>
            <image  url="http://TTennis.jpeg"/>
          </event_image>
        </detail>
        <detail games="Carrom">
          <event_image>
            <image  url="http://Carrom.jpeg"/>
          </event_image>
        </detail>
      </Details>
    </Person>
  </Peoples>
</root> 
```

这是使用复制粘贴的代码生成的，但我**删除**了以下行：

```
XmlSerializer serializer = new XmlSerializer(typeof(Notchs)); //first line
Notchs notchs = (Notchs)serializer.Deserialize(xmlDoc.CreateReader()); //third line
NotchsList.ItemsSource = query.ToList(); //last line in your code snippet 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:30:54.837

正如其他人已经提到的那样，您的 XML 有一些拼写错误。修复该问题并删除未使用的查询后，`XmlSerializer`您的查询会生成有效的`IEnumerable<Notch>`. 一切都按预期工作。

但我强烈怀疑您是否希望在`Titles`列表中包含完整的属性。其实你想拥有他们的价值观。所以你必须写`Attribute(...).Value`并省略`ToString()`：

```
var query = from l in xmlDoc.Descendants("Person")
            select new Notch
            {
                name = (string)l.Attribute("name").Value,
                Titles = l.Element("Details").Elements("detail")
                          .Select(s => s.Attribute("games").Value)
                          .ToList(),

                Image = l.Element("Details").Elements("detail")
                         .Elements("event_image").Elements("image")
                         .Select(x => x.Attribute("url").Value).ToList()
            };

foreach (var result in query)
{
    Console.WriteLine(result.name);
    foreach (var detail in result.Titles.Zip(result.Image, (st, si) => string.Format("{0} {1}", st, si)))
    {
        Console.WriteLine(detail);
    }
} 
```

请注意，我使用[`Zip`](http://msdn.microsoft.com/library/dd267698.aspx)扩展方法来组合相关标题和图像 url。但这只是为了更好的输出。数据已经正确。这是输出：

```
Raja
Cricket http://Cricket.jpeg
Foot Ball http://FootBall.jpeg
Volley Ball http://.Volley.jpeg3
Rama
Chess http://Chess.jpeg
Table Tennis http://TTennis.jpeg
Carrom http://Carrom.jpeg 
```

但是，您的数据不会显示在您的列表框中。您绑定到`games`而不是`Titles`使用`TextBlock`来显示一个列表，该列表产生您提到的输出。它也应该是一个`ListBox`. 这是一个“稍微”简化但有效的版本：

```
<ListBox x:Name="NotchsList">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Vertical">
        <TextBlock Text="{Binding name}" />
        <StackPanel Orientation="Horizontal">
          <ListBox ItemsSource="{Binding Titles}" Width="200" />
          <ListBox ItemsSource="{Binding Image}" Width="200" />
        </StackPanel>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

这就是它的外观：

![输出.png](../Images/0d35cdc6dedbe9d406f8682782bb4d9d.png)

# asp.net - 如何仅使用一个站点地图创建多个不同的布局？

> ID：15194757
> 
> 赞同：2
> 
> 时间：2013-03-04T04:50:26.377
> 
> 标签：asp.net, mvcsitemapprovider

假设我的页面上有 3 个区域有链接

*   标题
*   菜单
*   页脚

每个都有不同的链接，但有些链接重叠：

![概述](../Images/de599e61bf8f856ba2ee960a45b320c7.png)

我正在使用 MVCSiteMapProvider 来完成此操作。我有一个站点地图：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
    xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
    enableLocalization="false">

    <mvcSiteMapNode title="Home" controller="Home" action="Index">

        <mvcSiteMapNode title="Link 1" controller="" action="" visibility="Header, Footer" />
        <mvcSiteMapNode title="Link 2" controller="" action="" visibility="Menu" />
        <mvcSiteMapNode title="Link 3" controller="" action="" visibility="Header, Menu" />
        <mvcSiteMapNode title="Link 4" controller="" action="" visibility="Menu, Footer, Header" />

    </mvcSiteMapNode>

</mvcSiteMap> 
```

我认为也许可见性是做到这一点的方法，但它并没有按照我想要的方式工作。

```
Public Class MenuVisibilityProvider
    Implements ISiteMapNodeVisibilityProvider

    Public Function IsVisible(ByVal node As SiteMapNode, ByVal context As HttpContext, ByVal sourceMetadata As IDictionary(Of String, Object)) As Boolean Implements ISiteMapNodeVisibilityProvider.IsVisible
        Dim visibility As String = node("visibility")

        If visibility IsNot Nothing Then Return True

        Select Case visibility
            Case "Menu"
            Case "Header"
            Case "Footer"
                Return True
        End Select

        Return False
    End Function
End Class 
```

我最终得到了每个区域的所有链接。

*编辑澄清：*

这是一个类似的问题，但也没有答案： [https ://stackoverflow.com/questions/12845929/how-to-show-partial-site-map-including-current-node-with-mvcsitemapprovider](https://stackoverflow.com/questions/12845929/how-to-show-partial-site-map-including-current-node-with-mvcsitemapprovider)

也类似，但我不想制作多个 SiteMap：[Using Multiple MvcSiteMaps](https://stackoverflow.com/questions/9436454/using-multiple-mvcsitemaps)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:18:19.107

在这里。我只使用一个站点地图就完成了这项工作。

去做这个：

1.  我为每个站点地图元素添加了可见性标签，例如：

    ```
    <mvcSiteMapNode title="Login" controller="Members" action="Login" visibility="SideMenu Footer" /> 
    ```

    在这个例子`"SideMenu Footer"`中是我的标签。稍后我将使用它`String.Contains()`来确定可见性。

2.  `Web.config`我在不同的地方添加了多个不同的站点地图提供者`siteMapNodeVisibilityProvider`：

    ```
    <siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
        <providers>
            <clear />
            <add name="MvcSiteMapProvider" type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" excludeAssembliesForScan="" attributesToIgnore="visibility" nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider" />
            <add name="NavSiteMapProvider"  ... siteMapNodeVisibilityProvider="RootNamespace.Namespace.NavVisibilityProvider, RootNamespace" ... />
            <add name="FooterSiteMapProvider"  ... siteMapNodeVisibilityProvider="RootNamespace.Namespace.FooterVisibilityProvider, RootNamespace" ... />
        </providers>
    </siteMap> 
    ```

3.  我创建了一个名为`CustomVisibilityProvider`. 在里面我为每个提供者创建了一个类（页脚、导航、菜单等）

```
 ' Note: VB.NET :P
    Public Class MenuVisibilityProvider
        Implements ISiteMapNodeVisibilityProvider

        Public Function IsVisible(ByVal node As SiteMapNode, ByVal context As HttpContext, ByVal sourceMetadata As IDictionary(Of String, Object)) As Boolean Implements ISiteMapNodeVisibilityProvider.IsVisible

            Dim visibility As String = node("visibility")

            If visibility Is Nothing Then Return False

            If visibility.Contains("Menu") Then Return True

            Return False
        End Function

    End Class

    Public Class NavVisibilityProvider
        Implements ISiteMapNodeVisibilityProvider

        ...
            If visibility.Contains("Nav") Then Return True
        ...
    End Class 
```

1.  当您在视图文件中时：

    ```
    @Html.MvcSiteMap("FooterSiteMapProvider").Menu 
    ```

注意：您也可以给 Menu() 一个自定义视图，以便导航、页脚、菜单等以不同的方式呈现链接（有些可能是`<ul></ul>`格式，而另一些可能是`<a>`标签）。

# sql-server - CRM 2011 Silverlight 存储过程

> ID：15194759
> 
> 赞同：3
> 
> 时间：2013-03-04T04:50:34.897
> 
> 标签：sql-server, silverlight, stored-procedures, dynamics-crm-2011

有什么方法可以调用`Stored Procedure`存储在`SQL Server`of中的那个`CRM 2011`？

我想制作一个将被使用的`Silverlight`应用程序，它将`CRM 2011`需要使用的数据`Stored Procedure`（这是因为查询的复杂性 - 动态 sql、临时表等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:03:28.973

我认为您应该将 WCF 服务与 ado.net 一起使用。

以下链接可以帮助您。

[http://www.codeproject.com/Articles/37393/4-Simple-Steps-to-Consume-WCF-Service-using-Silver](http://www.codeproject.com/Articles/37393/4-Simple-Steps-to-Consume-WCF-Service-using-Silver)

# google-analytics - 如何在 Google Analytics 上获得付费流量的结果

> ID：15194760
> 
> 赞同：1
> 
> 时间：2013-03-04T04:50:49.070
> 
> 标签：google-analytics, google-analytics-api

我在谷歌分析方面遇到了一些麻烦。我一直在寻找有关如何构建查询以`Paid`在流量源->搜索->付费下返回流量结果的线索，但无济于事。显然可以作为 Organic 的过滤器，`ga:medium==organic`并且根据文档`ga:medium`仅接受`ppc`,或. 任何人都知道如何获得交通的结果？提前致谢。`organic``referral``(not set)``Paid`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:21:14.870

不知道API，但是在界面中付费流量的媒介是“cpc”，所以“ga:medium==cpc”应该值得一试（实际上我通过Google App脚本查询GA时使用这个，所以我很有信心它会起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T15:23:58.873

根据谷歌的官方文档（[https://developers.google.com/analytics/devguides/reporting/core/v3/common-queries](https://developers.google.com/analytics/devguides/reporting/core/v3/common-queries)），全部付费流量如下：

```
filters=ga:medium==cpa,ga:medium==cpc,ga:medium==cpm,ga:medium==cpp,ga:medium==cpv,ga:medium==ppc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T01:13:40.163

根据[Google 的“默认渠道分组”定义](https://support.google.com/analytics/answer/3297892?hl=en)（在“付费搜索”下），您应该应用以下过滤器：

```
filters=ga:medium=~^(cpc|ppc|paidsearch)$;ga:adDistributionNetwork!=Content 
```

# javascript - 带有滚动条的固定位置的书签插件

> ID：15194763
> 
> 赞同：3
> 
> 时间：2013-03-04T04:50:58.497
> 
> 标签：javascript, jquery, html, css

这是我的代码

[http://jsfiddle.net/qhoc/KUYeJ/3/](http://jsfiddle.net/qhoc/KUYeJ/3/)

这是我正在尝试做的（要求）：

*   `.left`已知固定宽度为`100px`
*   `.right`一定是`position:fixed`因为无论内容如何，​​我都希望它保持静止`left`。它将使用 Wookmark [http://www.wookmark.com/jquery-plugin拥有一堆 Pinterest 风格的图像](http://www.wookmark.com/jquery-plugin)
*   `.right`需要使用一些滚动条插件独立滚动。**我在下面尝试了所有方法，但没有任何效果：没有滚动条**。

[http://www.baijs.nl/tinyscrollbar/](http://www.baijs.nl/tinyscrollbar/)

[https://github.com/jamesflorentino/nanoScrollerJS](https://github.com/jamesflorentino/nanoScrollerJS)

[https://github.com/rochal/jQuery-slimScroll](https://github.com/rochal/jQuery-slimScroll)

我在想这是因为使用`position:fixed`它没有溢出滚动。但我试图在 css 中调整它，它仍然不显示滚动。

我被困在这一点上，想知道如何解决这个问题。以下条件**可面议**。

*   如果我必须在 中设置动态宽度`.right`，那没关系。我想我可以使用 jQuery 来检测窗口大小的变化。因为现在，它正在一路扩张`right:0`
*   如果两者`.left`都`.right`必须使用**人工滚动条**，那也没关系。尽管理想情况下`.left`它具有浏览器默认滚动条（就像今天的 Facebook：想象它`.left`是 Facebook 提要和`.right`聊天面板）
*   如果我需要添加更多的父元素，我也可以。

真的很感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T07:30:39.587

我最终使用了**slimScroll**，但诀窍是更改 html 结构和应用插件的位置。

这是结构：

```
.scrollable
  .photo-thumbs
    %ul
      %li 
```

以下是如何应用插件：

```
$('.scrollable').slimScroll();
$('.photo-thumbs ul li').wookmark(); 
```

# mvvm-light - Messenger 类 - AppBar 按钮我们可以更新屏幕吗

> ID：15194767
> 
> 赞同：0
> 
> 时间：2013-03-04T04:51:13.907
> 
> 标签：mvvm-light

我的 AppBar 上有一个“同步所有”按钮。这会为每个提供者调用一个 Web 服务，并更新他们已缓存的数据。更新后，我需要更新屏幕上选定的提供程序数据，那么我该如何使用 mvvm-light 来执行此操作。

1）当我尝试通过单击按钮访问数据时，我不确定如何访问当前加载的视图模型，以便刷新它们后面的数据。有没有办法从点击事件访问视图模型并刷新底层数据。

2）我想知道信使类的用途是什么，如果是这样，当用户单击“全部同步”按钮时，我可以查看任何好的示例来使用此功能。

3）如果信使类不是这样做的方法并且没有办法访问当前的视图模型，我还有什么其他选择。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:13:50.747

你有两种方法可以做到这一点：

1.  使用信使
2.  使用标准事件

无论您的设计如何，选项 1 都可以正常工作，如下所示：

1.  用户单击您的 AppBar 按钮，该按钮调用命令
2.  该命令调用一个服务，该服务在内部调用您的 Web 服务（好方法），或者该命令只调用您的 Web 服务（不太好的方法）。我期待这个方法是一个异步方法。
3.  一旦你得到你的新数据，你调用 Messenger.Default.Send() 向所有正在监听的视图模型广播他们应该刷新他们的数据。

**代码：**

视图模型：

```
public class ViewModel
{
    public ViewModel()
    {
        Messenger.Default.Register<DataRefreshEvent>(this,ReceiveDataRefreshEvent);
    }

    private void ReceiveDataRefreshEvent(DataRefreshEvent obj)
    {
        //do what you need to do
    }
} 
```

服务：

```
public class Service
{
    public async void RefreshData()
    {
        await _webService.RefreshDataAsync();
        Messenger.Default.Send(new ReceiveDataRefreshEvent());
    }

} 
```

选项 2 与选项 1 类似，只是它希望您有一个中央数据服务来包装您的 web 服务。该服务将被注入到您的所有视图模型中。

1.  用户单击您的 AppBar 按钮，该按钮调用命令
2.  该命令调用一个服务，该服务在内部调用您的 Web 服务（好方法），或者该命令只调用您的 Web 服务（不太好的方法）。我期待这个方法是一个异步方法。
3.  该服务引发一个标准事件，让订阅的视图模型知道他们需要刷新他们的数据。所以基本上与选项 1 相同，只是每个视图模型都是活动的，订阅服务上的事件而不是消息传递事件。

代码：

视图模型：

```
public class ViewModel
{
    public ViewModel(IService service)
    {
        service.DataChanged+=ReceiveDataRefreshedEvent;
    }

    private void ReceiveDataRefreshEvent(sender obj,EventArgs args)
    {
        //do what you need to do
    }
} 
```

服务：

```
public class Service:IService
{
    public event EventHandler ReceiveDataRefreshedEvent;
    public async void RefreshData()
    {
        await _webService.RefreshDataAsync();
        if(ReceiveDataRefreshedEvent!=null)
            ReceiveDataRefreshedEvent(this,EventArgs.Empty);
    }

} 
```

选项 1 很好，因为您不必将对服务的引用移交给 ViewModel。它很好地解耦。

如果您不确定消息传递使用选项 2。

# php - 顺便说一句，我使用 ajax怎么不能填充 textarea

> ID：15194772
> 
> 赞同：2
> 
> 时间：2013-03-04T04:51:41.877
> 
> 标签：php, jquery, ajax

这是我使用的ajax，

```
$.ajax({
type: "POST",
url: "../../Ajax/<?php echo $exercise_num ?>",
data: "user_input=" + user_input,
success: function(resp){
//output
 $("#message").text(resp);
}
});
} 
```

当我尝试`$("#message").text(resp)`填充

```
public function pb3()
{
$num1 = 10;
$num2 = 7;
echo "$num1 + $num2 = "; echo $num1 + $num2;echo "<br>hi";
} 
```

我的html代码： `Message: <font id="message"></font>`

输出： `Message: 10 + 7 = 17<br> hi;`

或者有什么方法可以在字体的文本区域中使用 br 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:53:56.070

您不能在 textarea 中包含 html。它不会被正确解释，它应该被转义以防止注入。您想使用换行符：

```
echo "\n\nhi"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:59:39.753

尝试这个 ：

`$("#message").text(resp.replace("<br>", "\n"));`

参考：[http ://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T05:00:01.783

您可以替换`<br>`为`\n`，主要是您不能将 html 标签放在 textarea 值上

```
$.ajax({
type: "POST",
url: "../../Ajax/<?php echo $exercise_num ?>",
data: "user_input=" + user_input,
success: function(resp){
//output
    $("#message").text(resp.split("<br>").join("\n"));
}
});
} 
```

# soundcloud - Soundcloud API SC.stream（曲目未加载）

> ID：15194776
> 
> 赞同：4
> 
> 时间：2013-03-04T04:51:54.240
> 
> 标签：soundcloud

我正在从 soundcloud API 流式传输音乐，有时当我调用 SC.stream 时，曲目不会流式传输，并且出现错误：

“获取[http://api.soundcloud.com/tracks/80608808/stream?client_id=78bfc6a742a617082972ddc5ef20df2a](http://api.soundcloud.com/tracks/80608808/stream?client_id=78bfc6a742a617082972ddc5ef20df2a) 404（未找到）”

GET 请求适用于某些轨道，而不适用于其他轨道。我无法弄清楚 SC API 为何或是否存在问题。

他是我在 plnkr 上的问题的复制品：

[http://plnkr.co/edit/TMVWGg](http://plnkr.co/edit/TMVWGg)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T13:17:20.363

这是因为某些 soundcloud 音轨无法通过 api 流式传输。您可以通过属性“streamable”检查每个轨道。

# md5 - MD5 与 GPG 签名

> ID：15194779
> 
> 赞同：4
> 
> 时间：2013-03-04T04:52:18.423
> 
> 标签：md5, gnupg

根据[apache](http://www.apache.org/dev/release-signing.html)之类的网站，使用 GPG 签署文件（生成校验和）比普通的旧 MD5 更安全。我不明白为什么大多数人改用 MD5。有人能用简单的技术英语解释真正的区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T06:27:14.227

任何有权访问文件的人都可以生成 MD5 校验和。闯入站点或执行中间人攻击的攻击者可以轻松更改 MD5 校验和，使其与受损文件匹配。

另一方面，GPG 签名（理论上）只能由相应私钥的所有者生成。如果签名者在您的信任网络中，则签名会验证文件内容的完整性*并*证明密钥所有者为文件内容提供担保。

此外，MD5 在过去几年中开始显示出一些弱点；GPG 倾向于使用更新的算法。

可能 MD5 校验和仍然常用，因为它们更容易。（SHA-1 比 MD5 好，而且越来越普遍。）

更新（4 年后）：MD5 现在应该被认为是不安全的，并且已经证明了具有相同 SHA-1 校验和的不同文件。有更好的校验和算法，但我不会推荐一个特定的；我怀疑这个答案在他们被打破后仍然会在这里。

# javascript - return false 在 javascript 验证中不起作用

> ID：15194782
> 
> 赞同：0
> 
> 时间：2013-03-04T04:52:29.967
> 
> 标签：javascript

```
function confirmValidation() {
    var confirmPass = document.getElementById('newpassword').value;
    var newpass = document.getElementById('newpassword2').value;
    var passLength = confirmPass.length;
    if ((confirmPass == newpass) && (confirmPass != "" && newpass != "") && (passLength > 8)) {
        alert("ok");
        return true;
    } else {
        alert("no");
        confirmPass.focus();
        return false;
    }
} 
```

并输入：

```
<input name="register" type="submit" class="alert_button" onclick="return confirmValidation()" value="OK" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:59:07.560

要使该`return`方法起作用，您需要为标签本身指定`onSubmit`属性/侦听器。`form`像这样：

```
<form method="post" onsubmit="return confirmValidation();">
    <!-- OTHER form fields -->
</form> 
```

来自[w3c](http://www.w3.org/TR/html4/interact/scripts.html)文档：

> 该`onsubmit`事件在提交表单时发生。它仅适用于 FORM 元素。

* * *

# 编辑

[添加了jsfiddle 链接](http://jsfiddle.net/JMx2e/)。

你必须稍微改变你的 JavaScript，这样它`.focus()`可能会触发。

```
function confirmValidation() {
    var confirmPass = document.getElementById('newpassword');
    var newpass = document.getElementById('newpassword2');
    var passLength = confirmPass.value.length;
    if ((confirmPass.value == newpass.value) && (confirmPass.value != "" && newpass.value != "") && (passLength > 8)) {
        alert("ok");
        return true;
    } else {
        alert("no");
        confirmPass.focus();
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:57:40.067

将您的验证移至表单。

```
document.getElementById('my_form').addEventListener('submit', confirmValidation, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:47:30.273

您应该在标签中使用 onsubmit() 事件。现在，当您提交表单时，它将调用编写在 onsubmit() 事件上的函数。只有在 Onsubmit() 的情况下，它会检查返回值是否为真，然后继续进行，否则不会。

```
<form method="post" onsubmit="return confirmValidation();">

</form> 
```

# jquery - jqGrid数据不显示数据在MVC4与json

> ID：15194783
> 
> 赞同：0
> 
> 时间：2013-03-04T04:52:34.187
> 
> 标签：jquery, jqgrid

我是 jqGrid 的新手。我试图创建一个简单的示例，其中控制器返回一个包含模型数组数据的 json 对象。网页显示带有列名的网格。数据本身不会出现。

谢谢你的帮助。我从三天开始就一直在尝试。

**这是我的控制器**

```
List<ClientInvoice> clientInvoices = new List<ClientInvoice>
            {
                new ClientInvoice { Id=1, Name = "test", Note = "note", Amount = 300.00f, Tax = 10.00f, Total = 2111.00f},
                new ClientInvoice { Id=2, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=3, Name = "test3", Note = "note3", Amount = 300.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=4, Name = "test", Note = "note", Amount = 300.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=5, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=6, Name = "test3", Note = "note3", Amount = 300.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=7, Name = "test", Note = "note", Amount = 300.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=8, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 21.00f, Total = 320.00f},
                new ClientInvoice { Id=9, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=11, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=12, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=13, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=14, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=15, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=16, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=17, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=18, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=19, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=21, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=22, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=23, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=24, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=25, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=26, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},
                new ClientInvoice { Id=27, Name = "test", Note = "note", Amount = 200.00f, Tax = 10.00f, Total = 210.00f},
                new ClientInvoice { Id=28, Name = "test2", Note = "note2", Amount = 300.00f, Tax = 20.00f, Total = 320.00f},
                new ClientInvoice { Id=29, Name = "test3", Note = "note3", Amount = 400.00f, Tax = 30.00f, Total = 430.00f},

            };

        System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();

            //use Serialize method to convert patient list to json string

            string clientInvoiceJson = serializer.Serialize(clientInvoices);
            ViewBag.ClientInvoicesJson = clientInvoiceJson; 
```

**视图看起来像这样**

```
<input type="hidden" id="clientInvoices" value="@ViewBag.ClientInvoicesJson" />
<table id="list47"></table>
<div id="plist47"></div>

<script type="text/javascript">

    var mydata1 = $("#clientInvoices").attr("value");
    var mydata = mydata1;
    jQuery("#list47").jqGrid({
        data: mydata,
        datatype: 'json',
        height: 150,
        rowNum: 10,
        rowList: [10, 20, 30],
        colNames: ['Inv No', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
        colModel: [
            { name: 'Id', index: 'Id', width: 60 },
            { name: 'Name', index: 'Name', width: 100 },
            { name: 'Amount', index: 'Amount', width: 80 },
            { name: 'Tax', index: 'Tax', width: 80 },
            { name: 'Total', index: 'Total', width: 80 },
            { name: 'Note', index: 'Note', width: 150 }
        ],
        pager: "#plist47",
        viewrecords: true,
        caption: "Manipulating Array Data"
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:05:03.000

我认为您缺少 jsonReader 将此添加到您的网格选项

```
 jsonReader: {
                    repeatitems: false,
                    id: "Id"

                }, 
```

为什么要在单独的函数中调用服务器方法并将响应分配给变量 var mydata = mydata1;

而不是在网格选项中使用 url 来调用服务器方法

```
url:'your_url_which_invoke_server_method', 
```

# iphone - 重置定时器问题 IOS

> ID：15194785
> 
> 赞同：0
> 
> 时间：2013-03-04T04:53:01.817
> 
> 标签：iphone, ios, timer, nstimer

我正在研究一个`buzzer app for IOS`. 当您 时`click the buzzer`，它会发出嗡嗡声、`30 seconds`弹出并倒计时，直到`after 1`嗡嗡声消失。如果在 的过程中`30-second countdown`，有人想要重置蜂鸣器（这样计时器就会响起并消失），他们只需点击`buzzer again`。

我有三个问题：
**1.如何在 UILabel 不可见的情况下启动应用程序，然后在第一次单击时显示？**
**2\. 30秒倒计时时点击蜂鸣器如何复位？**
**3\. 重置蜂鸣器是否可以解决多次点击时定时器非常快的问题？**

视图控制.h

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController {

    IBOutlet UILabel *seconds;
    NSTimer *timer;
    int MainInt;
    SystemSoundID buzzer;

}

- (IBAction)start:(id)sender;
- (void)countdown;

@end 
```

ViewController.m #import "ViewController.h"

```
@interface ViewController ()

@end

@implementation ViewController

-(IBAction)start:(id)sender {
   seconds.hidden = NO;
   MainInt = 30;
   timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countdown) userInfo:nil repeats:YES];
AudioServicesPlaySystemSound(buzzer);

}

-(void)countdown {
    MainInt -= 1;
    seconds.text = [NSString stringWithFormat:@"%i", MainInt];
    if (MainInt < 1) {
        [timer invalidate];
        timer = nil;
        seconds.hidden = YES;
        AudioServicesPlaySystemSound(buzzer);
        }

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSURL *buttonURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Buzz" ofType:@"wav"]];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)buttonURL, &buzzer);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:59:41.167

1）在启动时隐藏标签

```
- (void)viewDidLoad
{

   [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //hide the label initially
    [seconds setHidden:YES];

    /// other code 
```

然后调用`[seconds setHidden:NO];`start 方法

2) 复位蜂鸣器

```
-(IBAction)start:(id)sender {
   seconds.hidden = NO;
   MainInt = 30;

   if(timer != nil)
   {
      //timer exist..stop previous timer first.
     [timer invalidate];
   }

   timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countdown) userInfo:nil repeats:YES];
AudioServicesPlaySystemSound(buzzer);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:15:29.087

1) 对于延迟可见的标签，用 初始化标签（在代码中或在 IB 中）`seconds.alpha = 0.0`。然后让它可见...

```
NSTimeInterval delayUntilLabelIsVisible = 3.0;  // 3 seconds
[UIView animateWithDuration:0.3
                      delay:delayUntilLabelIsVisible
                    options:UIViewAnimationCurveEaseIn
                 animations:^{seconds.alpha = 1.0;}
                 completion:^(BOOL finished) {}]; 
```

2,3）你的第二个和第三个问题可以用start方法中的一行代码来解决...

```
-(IBAction)start:(id)sender {

   seconds.hidden = NO;
   MainInt = 30;

   // cancel the old timer before creating a new one
   // (otherwise many timers will run at once, calling the buzzer method too often)
   [timer invalidate];

   timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countdown) userInfo:nil repeats:YES];
    AudioServicesPlaySystemSound(buzzer);
} 
```

# jquery - Jquery：不支持 drop 事件？

> ID：15194786
> 
> 赞同：1
> 
> 时间：2013-03-04T04:53:04.893
> 
> 标签：jquery, drag-and-drop

我想为事件添加一个事件处理程序`drop`，我的第一次尝试是使用 jquery 1.9.1

```
var dropIt = function (e) {
    console.log(e);
    console.log(e.dataTransfer);
    e.stopPropagation();  
    e.preventDefault(); 
}

     $('#drop-area').on('drop',dropIt); 
```

但是当我使用原点时，这无法打印`e.dataTransfer`：

```
$('#drop-area')[0].addEventListener('drop', dropIt, false); 
```

它可以工作吗？

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:03:29.403

jQuery 不会自动规范化`dataTransfer`属性，您必须手动进行。例如

```
jQuery.event.props.push("dataTransfer"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:00:34.433

尝试

```
$(document).on('drop','#drop-area',dropIt); 
```

**或者**

```
<!DOCTYPE HTML>
<html>
    <head>
        <style type="text/css">
            #div1 {width:350px;height:70px;padding:10px;border:1px solid #aaaaaa;}
        </style>
        <script type="text/javascript">
            function allowDrop(ev)
            {
                ev.preventDefault();
            }

            function drag(ev)
            {
                ev.dataTransfer.setData("Text",ev.target.id);
            }

            function drop(ev)
            {
                ev.preventDefault();
                var data=ev.dataTransfer.getData("Text");
                ev.target.appendChild(document.getElementById(data));
            }
        </script>
    </head>
    <body>
        <p>Drag the W3Schools image into the rectangle:</p>
        <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <br />
        <img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">
    </body>
</html> 
```

# r - 编写 Rd 文档时如何保留一行中的初始空白？

> ID：15194789
> 
> 赞同：6
> 
> 时间：2013-03-04T04:53:28.617
> 
> 标签：r, literate-programming, roxygen2, rd

在尝试为自己找到关于[这个问题](https://stackoverflow.com/questions/15187446/is-there-a-global-flag-that-can-be-set-to-provide-code-alongside-roxygen-documen)的解决方案的同时，我发现自己陷入了尝试编写有效的 Rd 标记的过程中。我想要的是添加一个名为的部分并将`Raw Function Code`函数的代码放在它下面。通过编写脚本来修改 Rd 文件以包含

```
\section{Raw Function Code}{\code{
# some piece of R script will eventally provide this part of the text
}} 
```

但是，即使我在 .Rd 文件中手动正确分隔文本（使用空格或制表符），每行的初始空白似乎也会被剥离，留下一个不受欢迎的功能。我注意到，如果我在空白之前提供一个起始字符，则会保留空白。但是，我不想提供起始字符，因为我希望人们能够直接从生成的 PDF 中复制和粘贴。

我已经查看了[parseRd](http://developer.r-project.org/parseRd.pdf)，并且我知道有三种类型的文本 LaTeX-like、R-like 和 verbatim。我试图将我的函数代码放在 \code 和 \verb 中，但似乎都没有产生预期的结果。我能做些什么来保持我最初的空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:51:26.270

宏包含 LaTeX 类型的`\section`文本，但是当你想编写代码时，你可以使用`\synopsis`宏，即

```
\synopsis
# some piece of R script will eventally provide this part of the text
} 
```

但是，这有一个问题；你不能给这个部分命名，它会自动命名为另一个使用部分。同样的事情可以通过使用`\examples`宏来实现，但是现在该部分的名称是示例，这可能更加可疑（更不用说您可能已经有了示例部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:13:28.920

如果不修改 Rd 代码的用法或示例部分，这是不可能的。有关可用的解决方法，请参阅 Hemmo 的答案。它以逐字模式生成文本，这是次优的，但总比没有好。

（这个答案设置为社区 Wiki，以防这种情况发生变化。这个结果是 R-2.15.1 的最新结果）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T12:03:40.253

如果您想要一种超级 hacky 的方式来做到这一点，您可以使用`\Sexpr`零宽度字符并在它们之间添加空格：

```
#' first line \cr
#'\Sexpr{"\u200B"} \Sexpr{"\u200B"} \Sexpr{"\u200B"} \Sexpr{"\u200B"} indented line 
```

然而，一个警告 - 你的包会构建得很好，但 R CMD CHECK 会抛出一个合适的。

# mongodb - 在 cloundfoundry 隧道 Mongo 数据库中抛出 502 Bad Gateway 错误

> ID：15194794
> 
> 赞同：0
> 
> 时间：2013-03-04T04:54:08.450
> 
> 标签：mongodb, grails, cloud-foundry, tunnel

我使用 grails cloudfoundry 插件和隧道连接到远程 Mongo DB 服务。连接很好，因为我可以第一次搜索，但几秒钟后，终端开始打印 502 Bad Gateway 错误，我无法执行任何 mongo db 命令。

| 运行 cf-tunnel-disconnect 关闭当前隧道 |

```
Error Exception in thread "ThreadPoolTaskExecutor-3"
    | Error org.cloudfoundry.caldecott.TunnelException: Error while reading from tunnel
    | Error     at org.cloudfoundry.caldecott.client.TunnelHandler$Reader.run(TunnelHandler.java:172)
    | Error     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    | Error     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    | Error     at java.lang.Thread.run(Thread.java:680)
    | Error Caused by: org.springframework.web.client.HttpServerErrorException: **502 Bad Gateway
    | Error**   at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:92)
    | Error     at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:494)
    | Error     at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:451)
    | Error     at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:409)
    | Error     at org.cloudfoundry.caldecott.client.HttpTunnel.receiveDataBuffered(HttpTunnel.java:150)
    | Error     at org.cloudfoundry.caldecott.client.HttpTunnel.receiveBytes(HttpTunnel.java:140)
    | Error     at org.cloudfoundry.caldecott.client.HttpTunnel.read(HttpTunnel.java:83)
    | Error     at org.cloudfoundry.caldecott.client.TunnelHandler$Reader.run(TunnelHandler.java:148)
    | Error     ... 3 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:59:31.920

这看起来像是在 cloudfoundry-caldecott-lib 的后续版本中修复的错误处理问题。最新的是 0.1.3，可从 Spring Source 里程碑 repo ( [http://repo.springsource.org/libs-milestone/org/cloudfoundry/cloudfoundry-caldecott-lib/](http://repo.springsource.org/libs-milestone/org/cloudfoundry/cloudfoundry-caldecott-lib/) ) 获得。

我不确定 Grails 插件使用什么版本，但如果它是旧版本，那就可以解释为什么你会看到这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:58:08.307

感谢@trisberg 的解释和@scott 的发现，现在我可以使用 VMC 隧道连接到我的远程数据库。问题解决了。

# sql - 如果列值与前一行不同，则选择行

> ID：15194795
> 
> 赞同：1
> 
> 时间：2013-03-04T04:54:10.953
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一张如下表

```
No. FName Age  Tag
1    abc   22    c
2    xyz   60    c
3    pqr   62    i
4    abc   22    i
5    abc   32    i 
```

我希望结果返回为

```
No. FName Age  Tag
1    abc   22    c
2    xyz   60    c
3    pqr   62    i
5    abc   32    i 
```

要求是，如果列`Name` **AND**列的`Age`值与 , 的行相同，则不应**选择**`tag=c and tag=i`该行。行号 1 和行号。4 具有相同的值，但第 4 行的标签 = i。所以上面的第 4 行必须省略。我怎样才能做到这一点 ？`tag=i` **`(Name,age)=(abc,22)`
`(abc,22,i)`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T05:01:10.997

```
WITH records
AS
(
    SELECT  No, FName, Age, Tag,
            ROW_NUMBER() OVER (PARTITION BY FName, Age
                                ORDER BY Tag ASC) rn
    FROM    tableName
    WHERE   TAG IN ('c','i')
)
SELECT  No, FName, Age, Tag
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/f5a7b/2)

如果您有其他特殊值`TAG`，

```
WITH records
AS
(
    SELECT  No, FName, Age, Tag,
            ROW_NUMBER() OVER (PARTITION BY FName, Age
                                ORDER BY CASE WHEN TAG = 'c' THEN 0 ELSE 1 END ASC) rn
    FROM    tableName
    WHERE   TAG IN ('c','i')
)
SELECT  No, FName, Age, Tag
FROM    records
WHERE   rn = 1
ORDER   BY No 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/f5a7b/3)

**更新 1**

```
SELECT Fname, Age, MIN(tag) Tag
FROM   TableName
WHERE  TAG IN ('c','i')
GROUP  BY Fname, Age 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/f5a7b/12)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T05:25:20.270

我认为您可以简单地忽略所有带有`tag`= 'i' 的行，如果已经存在相同的行`age`，`name`并且`tag`= 'c' ：

```
select * from TableName t1
where not exists 
          (select 1 
           from TableName 
           where FNAme = t1.FNAme and Age = t1.Age and t1.Tag = 'i' and tag = 'c') 
```**

# iphone - 如何在 iphone 的滚动视图中将中间按钮比其他按钮高 5px

> ID：15194796
> 
> 赞同：2
> 
> 时间：2013-03-04T04:54:11.007
> 
> 标签：iphone, ios, objective-c, uiscrollview

![我希望中间按钮比其他按钮高 5 px](../Images/c2073a81b3c45404442c69df751d27bd.png)

就像假设当我滚动图库时，中间的按钮将比另一个按钮向上移动 5px 所以无论中间出现什么按钮，它都会比其他按钮向上移动一点点。所以请帮助我

```
 scrlview=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 350, 320, 130)];
        [scrlview setContentSize:CGSizeMake(600, 0)];
        scrlview.delegate=self;

            scrlview.backgroundColor=[UIColor blueColor];
            scrlview.scrollsToTop=NO;
            [self.view addSubview:scrlview];

            btn1=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn1.frame=CGRectMake(10, 10, 55, 50);
            [btn1 setTitle:@"Btn1" forState:UIControlStateNormal];
            [scrlview addSubview:btn1];

            btn2=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn2.frame=CGRectMake(70, 10, 55, 50);
            [btn2 setTitle:@"Btn2" forState:UIControlStateNormal];
            [scrlview addSubview:btn2];

            btn3=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn3.frame=CGRectMake(130, 10, 55, 50);
            [btn3 setTitle:@"Btn3" forState:UIControlStateNormal];
            [scrlview addSubview:btn3];

            btn4=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn4.frame=CGRectMake(190, 10, 55, 50);
            [btn4 setTitle:@"Btn4" forState:UIControlStateNormal];
            [scrlview addSubview:btn4];

            btn5=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn5.frame=CGRectMake(250, 10, 55, 50);
            [btn5 setTitle:@"Btn5" forState:UIControlStateNormal];
            [scrlview addSubview:btn5];

            btn6=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn6.frame=CGRectMake(310, 10, 55, 50);
            [btn6 setTitle:@"Btn6" forState:UIControlStateNormal];
            [scrlview addSubview:btn6];

            btn7=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn7.frame=CGRectMake(370, 10, 55, 50);
            [btn7 setTitle:@"Btn7" forState:UIControlStateNormal];
            [scrlview addSubview:btn7];

            btn8=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn8.frame=CGRectMake(430, 10, 55, 50);
            [btn8 setTitle:@"Btn8" forState:UIControlStateNormal];
            [scrlview addSubview:btn8];

            btn9=[UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn9.frame=CGRectMake(490,10, 55, 50);
            [btn9 setTitle:@"Btn9" forState:UIControlStateNormal];
            [scrlview addSubview:btn9]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:10:02.107

我已经尝试过你的要求。我假设按钮之间的偏移量和它们的宽度是相同的。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.delegate = self;
    [self addButtonsToScrollView];
}

- (void)addButtonsToScrollView
{
    NSInteger numberOfButtons = 15;
    //NSInteger visibleButtons = 5;

    //CGFloat totalWidth = self.scrollView.frame.size.width;
    CGFloat offset = 5.0f;
    CGFloat buttonWidth = 54.0f;//(totalWidth - ((visibleButtons+1)*offset))/visibleButtons;
    CGFloat buttonHeight = 44.0f;

    CGPoint origin = CGPointMake(offset, 10.0f);

    for (int idx = 1; idx<=numberOfButtons; idx++) {

        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        CGRect buttonFrame = CGRectZero;
        buttonFrame.origin = origin;
        buttonFrame.size = CGSizeMake(buttonWidth, buttonHeight);
        button.frame = buttonFrame;

        NSString *titleString = [NSString stringWithFormat:@"Title%d",idx+1];
        [button setTitle:titleString forState:UIControlStateNormal];
        button.tag = idx;

        [self.scrollView addSubview:button];

        origin.x+=buttonWidth+offset;
    }

    [self.scrollView setContentSize:CGSizeMake(origin.x, 200.0f)];
}
- (void)adjustCenterButton
{
    //content point is set in such a way that there would be exaclty 5 button visible all the time
    CGPoint contentOffset = self.scrollView.contentOffset;

    NSUInteger units = floorf(contentOffset.x/59.0f); //buttowidth+offset
    contentOffset.x = units*59.0f;
    [self.scrollView setContentOffset:contentOffset animated:YES];

    NSArray *subViews = [self.scrollView subviews];

    //Finds the tag of button which would be the center button
    //since the visible buttons are 5, 3 is added, 
    NSInteger selecteButtonIndex = floorf(contentOffset.x/(59.0f))+3;

    for (UIView *button in subViews)
    {
        //Just a bypass to remove the scroll indicator
        if (button.tag!=0)
        {
            CGRect frame = button.frame;
            frame.origin.y = (button.tag == selecteButtonIndex)?5.0f:10.0f;
            button.frame = frame;
        }
    }

    CGSize contentSize = self.scrollView.contentSize;
    contentSize.height = 200.0f;//self.scrollView.frame.size.width;
    self.scrollView.contentSize = contentSize;
}

#pragma mark - UIScrollViewDelegate

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    /*The update is only called when the scrollView is not decelerating.
    The method is an required if the user is scrolling very slowly,
    the other scrollViewDidEndDecelerating: will not be invoked*/
    if(!decelerate)
    {
        [self adjustCenterButton];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self adjustCenterButton];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T05:00:24.533

您可以使用循环，例如 for 循环或 while 循环。让我给你一些想法。

**在这里，我用示例代码更新了答案，更清楚**

```
NSArray *yourArray = [[NSArray alloc] initWithObjects:@"btn1",@"btn2",@"btn3",@"btn4",@"btn5",@"btn6",@"btn7", nil];

int xPos = 10;
for (int i = 0 ; i < yourArray.count; i ++) {

    int yPos = 30;
    if (i == (yourArray.count /2)) {
        yPos = 25;
    }

    UIButton *button =[UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame=CGRectMake(xPos, yPos, 55, 50);
    button.tag = i;
    [button setTitle:[yourArray objectAtIndex:i] forState:UIControlStateNormal];
    [scrollView addSubview:button];
    xPos+=55;
}

[scrollView setContentSize:CGSizeMake(xPos+10, 55)];

// To get Center Button

UIButton *centerButton = (UIButton *)[scrlview viewWithTag:(yourArray.count /2)]; 
```

可能这会对你有所帮助。一切顺利 ！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T05:41:51.050

Try this,

```
for(UIButton *subview in yourScrollView.subviews)
{
    CGRect subviewRect = [yourScrollView convertRect:subview.frame fromView:subview];

    if(CGRectContainsPoint(subviewRect,middlePointOfScrollView))
    {
        // change y position of button
        break;
    }
} 
```

# gwt - 排序图标需要在 DataGrid 中右对齐

> ID：15194797
> 
> 赞同：1
> 
> 时间：2013-03-04T04:54:38.147
> 
> 标签：gwt

[我在Datagrid](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwDataGrid)中使用排序。排序图标默认显示在左对齐。我需要在右边显示它。如何将其设置为右对齐？“否”列见下图。

![在此处输入图像描述](../Images/2f92b68d049ce94ae2c3dee1c7ef62e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:51:11.690

要显示排序图标左对齐，应用以下样式。有用。

```
.cellTableStyle th > div:first-child {
    margin-right: 15px;
}
.cellTableStyle th div div:first-child {
    left: 50%;
    margin-left: 100%;
} 
```

# c++ - cuda 上的向量步加法较慢

> ID：15194798
> 
> 赞同：4
> 
> 时间：2013-03-04T04:54:38.740
> 
> 标签：c++, cuda, parallel-processing, gpu, gpgpu

我正在尝试在 CUDA C++ 代码上运行向量步长加法函数，但对于大小为 5,000,000 的大型浮点数组，它的运行速度也比我的 CPU 版本慢。以下是我正在谈论的相关 CUDA 和 cpu 代码：

```
#define THREADS_PER_BLOCK 1024
typedef float real;
__global__ void vectorStepAddKernel2(real*x, real*y, real*z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{
    int i = blockDim.x * blockIdx.x + threadIdx.x;
    if (i < size)
    {
        x[i*xstep] = alpha* y[i*ystep] + beta*z[i*zstep];
    }
}

cudaError_t vectorStepAdd2(real *x, real*y, real* z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{

    cudaError_t cudaStatus;
    int threadsPerBlock = THREADS_PER_BLOCK;
    int blocksPerGrid = (size + threadsPerBlock -1)/threadsPerBlock;
    vectorStepAddKernel2<<<blocksPerGrid, threadsPerBlock>>>(x, y, z, alpha, beta, size, xstep, ystep, zstep);

    // cudaDeviceSynchronize waits for the kernel to finish, and returns
    // any errors encountered during the launch.
    cudaStatus = cudaDeviceSynchronize();
    if (cudaStatus != cudaSuccess) {
        fprintf(stderr, "cudaDeviceSynchronize returned error code %d after launching vectorStepAddKernel!\n", cudaStatus);
        exit(1);
    }

    return cudaStatus;
}

//CPU function:

void vectorStepAdd3(real *x, real*y, real* z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{
    for(int i=0;i<size;i++)
    {
        x[i*xstep] = alpha* y[i*ystep] + beta*z[i*zstep];
    }
} 
```

当 3 个数组中的每一个的大小为 5,000,000 且 size=50,000（即，以这种逐步方式将 50,000 个元素相加）时，调用 vectorStepAdd2 会导致计算速度比 vectorStepAdd3 慢。

关于我可以做些什么来加速 GPU 代码的任何想法？我的设备是 Tesla M2090 GPU

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:13:48.440

回答您的问题“关于我可以做些什么来加速 GPU 代码的任何想法？”

首先，让我先声明一下，所提议的操作`X = alpha * Y + beta * Z`对于所需的每字节数据传输没有大量的计算强度。结果，我无法在这个特定代码上击败 CPU 时间。但是，涵盖 2 个想法以加快此代码的速度可能是有益的：

1.  使用[页面锁定](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g15a3871f15f8c38f5b7190946845758c)内存进行数据传输操作。这使 GPU 版本的数据传输时间减少了约 2 倍，而这在 GPU 版本的整体执行时间中占主导地位。

2.  使用@njuffa[在这里](https://stackoverflow.com/questions/13535182/copying-data-to-cufftcomplex-data-struct/13536437#13536437)提出的[cudaMemcpy2D](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g17f3a55e8c9aef5f90b67cdf22851375)跨步复制技术。结果是 2 倍：我们可以将数据传输量减少到仅计算所需的量，*然后*我们可以按照评论中的建议重新编写内核以连续操作数据（再次由 njuffa 提供） . 这使数据传输时间进一步提高了 3 倍，内核计算时间提高了约 10 倍。

 *此代码提供了这些操作的示例：

```
#include <stdio.h>
#include <stdlib.h>

#define THREADS_PER_BLOCK 1024
#define DSIZE 5000000
#define WSIZE 50000
#define XSTEP 47
#define YSTEP 43
#define ZSTEP 41
#define TOL 0.00001f

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

typedef float real;

__global__ void vectorStepAddKernel2(real *x, real *y, real *z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{
    int i = blockDim.x * blockIdx.x + threadIdx.x;
    if (i < size)
    {
        x[i*xstep] = alpha* y[i*ystep] + beta*z[i*zstep];
    }
}

__global__ void vectorStepAddKernel2i(real *x, real *y, real *z, real alpha, real beta, int size)
{
    int i = blockDim.x * blockIdx.x + threadIdx.x;
    if (i < size)
    {
        x[i] = alpha* y[i] + beta*z[i];
    }
}

void vectorStepAdd2(real *x, real *y, real *z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{

    int threadsPerBlock = THREADS_PER_BLOCK;
    int blocksPerGrid = (size + threadsPerBlock -1)/threadsPerBlock;
    vectorStepAddKernel2<<<blocksPerGrid, threadsPerBlock>>>(x, y, z, alpha, beta, size, xstep, ystep, zstep);
    cudaDeviceSynchronize();
    cudaCheckErrors("kernel2 fail");
}

void vectorStepAdd2i(real *x, real *y, real *z, real alpha, real beta, int size)
{

    int threadsPerBlock = THREADS_PER_BLOCK;
    int blocksPerGrid = (size + threadsPerBlock -1)/threadsPerBlock;
    vectorStepAddKernel2i<<<blocksPerGrid, threadsPerBlock>>>(x, y, z, alpha, beta, size);
    cudaDeviceSynchronize();
    cudaCheckErrors("kernel3 fail");
}

//CPU function:

void vectorStepAdd3(real *x, real*y, real* z, real alpha, real beta, int size, int xstep, int ystep, int zstep)
{
    for(int i=0;i<size;i++)
    {
        x[i*xstep] = alpha* y[i*ystep] + beta*z[i*zstep];
    }
}

int main() {

  real *h_x, *h_y, *h_z, *c_x, *h_x1;
  real *d_x, *d_y, *d_z, *d_x1, *d_y1, *d_z1;

  int dsize = DSIZE;
  int wsize = WSIZE;
  int xstep = XSTEP;
  int ystep = YSTEP;
  int zstep = ZSTEP;
  real alpha = 0.5f;
  real beta = 0.5f;
  float et;

/*
  h_x = (real *)malloc(dsize*sizeof(real));
  if (h_x == 0){printf("malloc1 fail\n"); return 1;}
  h_y = (real *)malloc(dsize*sizeof(real));
  if (h_y == 0){printf("malloc2 fail\n"); return 1;}
  h_z = (real *)malloc(dsize*sizeof(real));
  if (h_z == 0){printf("malloc3 fail\n"); return 1;}
  c_x = (real *)malloc(dsize*sizeof(real));
  if (c_x == 0){printf("malloc4 fail\n"); return 1;}
  h_x1 = (real *)malloc(dsize*sizeof(real));
  if (h_x1 == 0){printf("malloc1 fail\n"); return 1;}
*/

  cudaHostAlloc((void **)&h_x, dsize*sizeof(real), cudaHostAllocDefault);
  cudaCheckErrors("cuda Host Alloc 1 fail");
  cudaHostAlloc((void **)&h_y, dsize*sizeof(real), cudaHostAllocDefault);
  cudaCheckErrors("cuda Host Alloc 2 fail");
  cudaHostAlloc((void **)&h_z, dsize*sizeof(real), cudaHostAllocDefault);
  cudaCheckErrors("cuda Host Alloc 3 fail");
  cudaHostAlloc((void **)&c_x, dsize*sizeof(real), cudaHostAllocDefault);
  cudaCheckErrors("cuda Host Alloc 4 fail");
  cudaHostAlloc((void **)&h_x1, dsize*sizeof(real), cudaHostAllocDefault);
  cudaCheckErrors("cuda Host Alloc 5 fail");

  cudaMalloc((void **)&d_x, dsize*sizeof(real));
  cudaCheckErrors("cuda malloc1 fail");
  cudaMalloc((void **)&d_y, dsize*sizeof(real));
  cudaCheckErrors("cuda malloc2 fail");
  cudaMalloc((void **)&d_z, dsize*sizeof(real));
  cudaCheckErrors("cuda malloc3 fail");
  cudaMalloc((void **)&d_x1, wsize*sizeof(real));
  cudaCheckErrors("cuda malloc4 fail");
  cudaMalloc((void **)&d_y1, wsize*sizeof(real));
  cudaCheckErrors("cuda malloc5 fail");
  cudaMalloc((void **)&d_z1, wsize*sizeof(real));
  cudaCheckErrors("cuda malloc6 fail");

  for (int i=0; i< dsize; i++){
    h_x[i] = 0.0f;
    h_x1[i] = 0.0f;
    c_x[i] = 0.0f;
    h_y[i] = (real)(rand()/(real)RAND_MAX);
    h_z[i] = (real)(rand()/(real)RAND_MAX);
    }

  cudaEvent_t t_start, t_stop, k_start, k_stop;
  cudaEventCreate(&t_start);
  cudaEventCreate(&t_stop);
  cudaEventCreate(&k_start);
  cudaEventCreate(&k_stop);
  cudaCheckErrors("event fail");

  // first test original GPU version

  cudaEventRecord(t_start);
  cudaMemcpy(d_x, h_x, dsize * sizeof(real), cudaMemcpyHostToDevice);
  cudaCheckErrors("cuda memcpy 1 fail");
  cudaMemcpy(d_y, h_y, dsize * sizeof(real), cudaMemcpyHostToDevice);
  cudaCheckErrors("cuda memcpy 2 fail");
  cudaMemcpy(d_z, h_z, dsize * sizeof(real), cudaMemcpyHostToDevice);
  cudaCheckErrors("cuda memcpy 3 fail");

  cudaEventRecord(k_start);
  vectorStepAdd2(d_x, d_y, d_z, alpha, beta, wsize, xstep, ystep, zstep);
  cudaEventRecord(k_stop);

  cudaMemcpy(h_x, d_x, dsize * sizeof(real), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cuda memcpy 4 fail");
  cudaEventRecord(t_stop);
  cudaEventSynchronize(t_stop);
  cudaEventElapsedTime(&et, t_start, t_stop);
  printf("GPU original version total elapsed time is: %f ms.\n", et);
  cudaEventElapsedTime(&et, k_start, k_stop);
  printf("GPU original kernel elapsed time is: %f ms.\n", et);

  //now test CPU version

  cudaEventRecord(t_start);
  vectorStepAdd3(c_x, h_y, h_z, alpha, beta, wsize, xstep, ystep, zstep);
  cudaEventRecord(t_stop);
  cudaEventSynchronize(t_stop);
  cudaEventElapsedTime(&et, t_start, t_stop);
  printf("CPU version total elapsed time is: %f ms.\n", et);
  for (int i = 0; i< dsize; i++)
    if (fabsf((float)(h_x[i]-c_x[i])) > TOL) {
      printf("cpu/gpu results mismatch at i = %d, cpu = %f, gpu = %f\n", i, c_x[i], h_x[i]);
      return 1;
      }

  // now test improved GPU version

  cudaEventRecord(t_start);
//  cudaMemcpy2D(d_x1, sizeof(real),  h_x, xstep * sizeof(real), sizeof(real), wsize, cudaMemcpyHostToDevice);
//  cudaCheckErrors("cuda memcpy 5 fail");
  cudaMemcpy2D(d_y1, sizeof(real),  h_y, ystep * sizeof(real), sizeof(real), wsize, cudaMemcpyHostToDevice);
  cudaCheckErrors("cuda memcpy 6 fail");
  cudaMemcpy2D(d_z1, sizeof(real),  h_z, zstep * sizeof(real), sizeof(real), wsize, cudaMemcpyHostToDevice);
  cudaCheckErrors("cuda memcpy 7 fail");

  cudaEventRecord(k_start);
  vectorStepAdd2i(d_x1, d_y1, d_z1, alpha, beta, wsize);
  cudaEventRecord(k_stop);

  cudaMemcpy2D(h_x1, xstep*sizeof(real), d_x1, sizeof(real), sizeof(real), wsize, cudaMemcpyDeviceToHost);
  cudaCheckErrors("cuda memcpy 8 fail");
  cudaEventRecord(t_stop);
  cudaEventSynchronize(t_stop);
  cudaEventElapsedTime(&et, t_start, t_stop);
  printf("GPU improved version total elapsed time is: %f ms.\n", et);
  cudaEventElapsedTime(&et, k_start, k_stop);
  printf("GPU improved kernel elapsed time is: %f ms.\n", et);

  for (int i = 0; i< dsize; i++)
    if (fabsf((float)(h_x[i]-h_x1[i])) > TOL) {
      printf("gpu/gpu improved results mismatch at i = %d, gpu = %f, gpu imp = %f\n", i, h_x[i], h_x1[i]);
      return 1;
      }

  printf("Results:i   CPU     GPU     GPUi \n");
  for (int i = 0; i< 20*xstep; i+=xstep)
    printf("    %d         %f      %f     %f    %f    %f\n",i, c_x[i], h_x[i], h_x1[i]);

  return 0;
} 
```

如前所述，我仍然无法超越 CPU 时间，我将此归因于我自己缺乏编码技能，或者此操作基本上没有足够的计算复杂性在 GPU 上引起兴趣。不过这里有一些示例结果：

```
GPU original version total elapsed time is: 13.352256 ms.
GPU original kernel elapsed time is: 0.195808 ms.
CPU version total elapsed time is: 2.599584 ms.
GPU improved version total elapsed time is: 4.228288 ms.
GPU improved kernel elapsed time is: 0.027392 ms.
Results:i   CPU     GPU     GPUi
    0         0.617285      0.617285     0.617285
    47         0.554522      0.554522     0.554522
    94         0.104245      0.104245     0.104245
.... 
```

我们可以看到改进后的内核与原始内核相比整体减少了大约 3 倍，这几乎都是由于数据复制时间的减少。数据复制时间的减少是由于使用改进的 2D memcpy，我们只需要复制我们实际使用的数据。（如果没有页面锁定的内存，这些数据传输时间大约会增加一倍）。我们还可以看到，内核计算时间比原始内核的 CPU 计算快约 10 倍，比改进内核的 CPU 计算快约 100 倍。然而，考虑到数据传输时间，我们无法克服 CPU 速度。

最后一条评论是 cudaMemcpy2D 操作的“成本”仍然很高。向量大小减少 100 倍，我们只看到复制时间减少了 3 倍。因此，跨步访问仍然是使用 GPU 的一种相对昂贵的方式。如果我们只是传输 50,000 个连续元素的向量，我们预计复制时间几乎线性减少 100 倍（与 5000000 个元素的原始复制向量相比）。这意味着复制的时间将少于 1 毫秒，并且我们的 GPU 版本将比 CPU 更快，至少在这种幼稚的单线程 CPU 代码中是这样。*

# java - Eclipse Java 启动错误：选择不包含主要类型

> ID：15194804
> 
> 赞同：0
> 
> 时间：2013-03-04T04:55:33.507
> 
> 标签：java, main

这是我的第一个 java 程序，我尝试在 Eclipse 和 Netbeans 中启动它。我收到启动错误：“选择不包含主要类型。” 我的主要功能的代码如下。完整代码可从[http://www.fractalwebdesigns.com/classes.java下载](http://www.fractalwebdesigns.com/classes.java)

```
 class test {
      public static void main(String[] args) {

    //Checking Account Test 
    CheckingAccount checking1 = new CheckingAccount(); 
        CheckingAccount checking2 = new CheckingAccount();
         CheckingAccount checking3 = new CheckingAccount();
        CheckingAccount checking4 = new CheckingAccount();

    checking1.open(1234);                   //Open a checking account with an account number 1234
    checking2.open(1235);                   //Open a checking account with an account number 1235
    checking3.open(1236);                   //Open a checking account with an account number 1236
    checking4.open(1237);                   //Open a checking account with an account number 1237
    checking1.credit(3000);                 //Credit 3000 to the account 1234
    checking2.credit(200);                  //Credit 200 to the account 1235
    checking3.credit(5000);                 //Credit 5000 to the account 1236
    checking4.credit(2000);                 //Credit 2000 to the account 1237
    checking1.debit(500);                   //Debit 500 from the account 1234
    checking3.debit(300);                   //Debit 300 from the account 1236
    checking4.debit(2500);                  //Debit 2500 from the account 1237
    checking1.readBalance();                //Read the balance of the account 1234
    checking2.readBalance();                //Read the balance of the account 1235
    checking1.readLastDepositAmount();      //Read last deposit amount of the account 1234
    checking4.readLastDepositAmount();      //Read last deposit amount of the account 1237

    //Saving Account Test
    SavingsAccount savings1= new SavingsAccount();
    SavingsAccount savings2= new SavingsAccount();
    SavingsAccount savings3= new SavingsAccount();
    SavingsAccount savings4= new SavingsAccount();

    savings1.open(5431);                    //Open a savings account with an account number 5431
    savings2.open(5432);                    //Open a savings account with an account number 5432
    savings3.open(5433);                    //Open a savings account with an account number 5433
    savings4.open(5434);                    //Open a savings account with an account number 5434
    savings1.credit(2000);                  //Credit 2000 to the account 5431
    savings2.credit(4000);                  //Credit 4000 to the account 5432
    savings3.credit(1000);                  //Credit 1000 to the account 5433 
    savings4.credit(5000);                  //Credit 5000 to the account 5434
    savings3.debit(2000);                   //Debit 2000 from the account 5433
    savings2.credit(1000);                  //Credit 1000 to the account 5432
    savings2.debit(2000);                   //Debit 2000 from the account 5432
    savings2.debit(500);                    //Debit 500 from the account 5432
    savings2.debit(300);                    //Debit 300 from the account 5432
    savings2.debit(600);                    //Debit 600 from the account 5432
    savings2.debit(100);                    //Debit 100 from the account 5432
    savings2.readBalance();                 //Read the balance of account 5432
    savings1.addInterest(.1);               //Add interest to the account 5431 with the interest rate 10%
    savings2.addInterest(.1);               //Add interest to the account 5432 with the interest rate 10%
    savings3.addInterest(.1);               //Add interest to the account 5433 with the interest rate 10%
    savings2.readCumulativeInterest();      //Read the cumulative interest of the account 5432
    savings2.readBalance();                 //Read the balance of account 5432\. 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:03:17.913

它在什么样的项目中？它应该是一个 Java 项目。源文件也应该在项目的 Java 构建路径中的源文件夹中。我还建议不要使用“默认”包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T11:56:30.543

切换工作区可能会导致此问题。尝试更改您的工作区，然后导入您创建的项目。这对我有用。希望这可以帮助

# c++ - 创建哈希表

> ID：15194807
> 
> 赞同：1
> 
> 时间：2013-03-04T04:56:03.153
> 
> 标签：c++, hashtable

我是一名 C++ 学生，我只是想学习如何创建哈希表。我有哈希编码部分，但我不知道如何将表格实现到编码部分。如果有人可以给我帮助，那就太好了。谢谢

```
Movies::Movies(string fn){loadMovies(fn);}

int Movies::getMovieCount() const {return movieCnt;}

 int hashcode(string title)
{
    int hash = 0; 
int factor = 0 ; 
for (int i = 0; i<title.length(); i++)
    hash = factor* title.at(i);
return hash;
}

const Movie * Movies::getMovie(string mc, int& mn) const {
if(mc.length()==0)
    return NULL; // not found
else {
    string mcP = myToLower(mc);
    int ndx=0;
    for(;ndx<movieCnt &&
        (myToLower(movies[ndx].getTitle()).find(mcP)==
        string::npos);ndx++);
    mn = ndx<movieCnt?ndx+1:0;
    return ndx<movieCnt?&movies[ndx]:NULL;
}
 }

Movies::~Movies() {
delete[] movies;
movies = NULL;
} 

void Movies::loadMovies(string fn) {
ifstream iS(fn);
string s;
getline(iS, s); // skip heading
getline(iS, s);
movieCnt=0;
movies = new Movie[MAX_MOVIES];
while(!iS.eof()) {
    movies[movieCnt++] = Movie(s);
    getline(iS, s);
}
iS.close();
reSize();
}

void Movies::reSize() {
Movie * m = movies;
movies = new Movie[movieCnt];
for(int i=0;i<movieCnt;i++)
    movies[i] = m[i];
} 
```

# extjs - 将组件绘制到容器中

> ID：15194814
> 
> 赞同：1
> 
> 时间：2013-03-04T04:56:35.907
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我试图在点击事件时将组件绘制到容器上，它似乎确实在绘制，除了它在容器上不可见。这是进一步澄清的代码。

```
Ext.define("TapCheck.view.NewTap",{
  extend: 'Ext.Container',
  fullscreen: true,
  id: 'tappy',
    initialize: function() {
      this.callParent(arguments);
      var padElement = Ext.get('tappy');
      padElement.on(['tap'],
      'onTouchPadEvent', this);
  },
  config: {
      flex: 1,
      margin: 10,
      layout: {
          type: 'vbox',
          pack: 'center',
          align: 'stretch'
      },
      items: [
          {
              html: 'Touch here!'
          }
      ]
      },
          onTouchPadEvent: function(e, target, options, eventController) {
                         var component = new Ext.draw.Component({
                                items: [{
                                  type: 'ellipse',
                                  cx: 100,
                                  cy: 100,
                                  rx: 40,
                                  ry: 25,
                                  fillStyle: 'blue'
                                }]
                              });
      console.log('X: ' + e.getPageX() + ' Y: ' + e.getPageY());
     Ext.getCmp('tappy').add([component]);
  }
}); 
```

请让我知道我错在哪里或者甚至可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:01:28.490

我已经更新了你的一些代码。最大的变化是：

*   删除了`id`配置。不要经常使用它，尤其是在定义组件时。
*   在`initialize`&`onTouchPadEvent`函数中，只需使用 . 引用组件即可`this`。
*   创建具有该`Ext.create`功能的组件。

尝试这个：

```
Ext.define("TapCheck.view.NewTap",{
    extend: 'Ext.Container',
    fullscreen: true,
    initialize: function() {
        var me = this;
        me.callParent(arguments);
        me.on('tap', me.onTouchPadEvent, this);
    },
    config: {
        flex: 1,
        margin: 10,
        layout: {
            type: 'vbox',
            pack: 'center',
            align: 'stretch'
        },
        items: [{
            html: 'Touch here!'
        }]
    },
    onTouchPadEvent: function(e, target, options, eventController) {
        var component = Ext.create('Ext.draw.Component',{
            items: [{
                type: 'ellipse',
                cx: 100,
                cy: 100,
                rx: 40,
                ry: 25,
                fillStyle: 'blue'
            }]
        });
        console.log('X: ' + e.getPageX() + ' Y: ' + e.getPageY());
        this.add(component);
    }
}); 
```

# html - 在 2 个不同的列中水平对齐 div

> ID：15194815
> 
> 赞同：1
> 
> 时间：2013-03-04T04:56:51.757
> 
> 标签：html, css, layout

我已经使用 2 列页眉和页脚的基本布局设置了我的网站。在我的大多数页面上，这是因为左列未连接到右列。然而，在一页上，我在左栏中有一张图片，右栏中有相关的描述。这两个元素的高度都会有所不同，但宽度不会有所不同。现在，我通过在图片之间放置一个 div 来实现它，并设置高度以补偿右侧的差异。在我测试它的浏览器中看起来不错，但是当我使用 ie、chrome、opera 和 firefox 进行最终查看时，我发现每一个都以不同的方式渲染空间。左栏高度不一致，导致图片与右侧描述不一致。我想通过我的网站保持 2 列布局一致。[这是](http://www.craig-smith.comlu.com)该页面的链接，我启动它是因为我还没有真正期望太多流量。感谢您的任何建议！

克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:31:09.427

不同的浏览器以不同的方式呈现事物（例如默认的行高、页边距和标题的字体大小等）。为了让所有东西都达到一个共同的价值，你应该使用`reset.css`. 在我的项目中最受欢迎和我通常使用的是这个： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)。从我在您的网站上看到的内容来看，您没有使用`reset.css`. 您需要获取该文件的副本（来自附加链接），将其命名为 reset.css 并在实际`style.css`文件之前将其导入 - 在您的情况下，您必须在此规则之前导入它：`@import url("site_css/craig-smith.css");`

**注意：**导入重置后，您可能需要调整一些原始的`craig-smith.css`，但最终渲染在所有浏览器中看起来都相似/一致。

# android - 两个角度同时变化加速度计android

> ID：15194816
> 
> 赞同：2
> 
> 时间：2013-03-04T04:57:01.750
> 
> 标签：android, accelerometer

我编写了一个代码来单独使用加速度计来获取设备的方向。但是两个角度同时变化。我的意思是平移，倾斜或倾斜滚动或滚动平移，其中任何两个角度几乎相同地变化每个方向。为什么会这样？

```
 public void onSensorChanged(SensorEvent event) {

         switch (event.sensor.getType()) {
         case Sensor.TYPE_ACCELEROMETER:
             System.arraycopy(event.values, 0, mGravs, 0, 3);
         break;
              default:
                         return;
         }
         X=mGravs[0];
         Y=mGravs[1];
         Z=mGravs[2];
      if(i==1){
          R=Math.sqrt(X*X+Y*Y+Z*Z);
          pan1=Math.round((180/Math.PI)*Math.acos(X/R)) ;
          tilt1=Math.round((180/Math.PI)*Math.acos(Y/R)) ;
          roll1=Math.round((180/Math.PI)*Math.acos(Z/R));
          i=0;
      }

      else{

        R=Math.sqrt(X*X+Y*Y+Z*Z);
          pan=Math.round((180/Math.PI)*Math.acos(X/R))-pan1;
          tilt=Math.round((180/Math.PI)*Math.acos(Y/R))-tilt1;
          roll=Math.round((180/Math.PI)*Math.acos(Z/R))-roll1;
          text.setText("Angle X" +pan+"\nAngle Y" +tilt+"\nAngle Z" +roll);
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:11:52.060

TYPE_ACCELEROMETER 返回测量设备加速度的值。您无法单独从 TYPE_ACCELEROMETER 获得方向。您必须将其与 TYPE_MAGNETIC_FIELD 结合，使用这些结果来获取旋转矩阵，然后调用 getOrientation 来获取设备方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:36:41.947

使用加速度计，您只能确定设备相对于重力矢量的方向（指向下方）。所以在 (i==1) 部分，你用重力矢量计算角度。

Why do you subtract two of angles in the 'else' part? This will give you some kind of orientation change. If you want to determine orientation **change**, you better use the gyroscopes (if available).

# mysql - 出现错误：2013：打开 MAMP 时失去与 MySQL 的连接？

> ID：15194825
> 
> 赞同：-1
> 
> 时间：2013-03-04T04:58:02.117
> 
> 标签：mysql, phpmyadmin, mamp

我刚启动 MAMP，它显示：

> /Applications/MAMP/Library/bin/mysqlcheck：**出现错误：2013：**在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：尝试连接时为 0

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:08:14.347

正如在 ServerFault 上的[回复](https://serverfault.com/q/29597)中所引用的：

> 这可能非常糟糕，2013 意味着服务于 mysqldump 进程的线程已经死亡。这可能是因为服务器上的 InnoDB 引擎在为您的数据库读取数据库文件时检测到错误。由于 mysqldump 必须读取所有数据库的所有页面才能进行备份，因此很可能会触发应用程序在日常活动中可能避免的任何潜在损坏。
> 
> 如果你运行你的 mysql 命令并且它报告你的连接 id 是一个低数字，那么你的服务器可能已经重新启动了。您应该立即检查您的 mysqld.log 以找出原因。

# security - 保护哈希码？

> ID：15194826
> 
> 赞同：1
> 
> 时间：2013-03-04T04:58:05.030
> 
> 标签：security, hash, shared-hosting, vps, salt

我敢肯定，所有这一切都有一些基本的东西可以简化我所缺少的整个概念，但是这里有：

好的，为了安全起见，您对密码进行了加盐和哈希处理，但是执行此操作的代码呢？

如果您在主机或 vps 上，“某人”不能获取您在那里编译的源代码 b/c 吗？或者，如果他们可以访问您的数据库，他们是否不能访问执行加密/解密的程序并暴力破解它，直到他们获得算法？

我知道没有什么是 100% 安全的，但是在这种情况下如何提高安全性呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:03:25.000

在您的数据被泄露的情况下，加盐将在一定程度上保护数据免受字典或彩虹表攻击。蛮力并非不可能，但会很慢，并且需要为每个密码哈希再次执行。如果不加盐，蛮力攻击变得更容易实现。

与某些人所说的相反，盐没有以任何特殊方式受到保护（也不需要），而是以纯文本形式附加到散列中。但是，对于每个散列，它*确实*需要是唯一的，否则它对于这种用途变得毫无意义。这与用于所有哈希并且*必须*受到保护的辣椒形成对比。由于这种区别，盐腌通常是首选，除非保证辣椒的获取受到限制（这不是一件容易的事）。

如果您想提高安全性，请不要使用共享主机。并且不允许直接访问数据库。并且不要让未经预先筛选的任何人访问您的系统。在实际意义上，这些并不总是可行的选择。所以只需使用盐并忍受它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:02:19.807

您的源代码中没有关于哈希算法的任何“隐藏”内容。事实上，您应该使用经过验证的、众所周知的强哈希实现，而不是自己实现算法。

盐是需要保护的部分。该盐不是您代码的一部分（或不应该是），而是应该存储在某种文件存储/数据库中（取决于您的应用程序），并且应该基于每个用户应用（用户 Joe 应该有与用户 Fred 不同的密码盐）。

可以肯定的是，保护每个用户密码使用的盐是至关重要的。这就是适当的文件系统/数据库权限发挥作用的地方。

另一方面，您的*代码*也应该受到任何未经授权的用户的保护，但不是为了保护盐（至少不是直接......如果有人可以访问盐，或者只是用他们自己的代码*替换*您的代码，完全绕过身份验证检查）。

# sql-server-2005 - 如何在 exec('') 中编写此查询？

> ID：15194831
> 
> 赞同：0
> 
> 时间：2013-03-04T04:58:31.337
> 
> 标签：sql-server-2005

在这里，我试图创建一个动态查询，但它给出了错误：

```
CREATE PROCEDURE SP_GetProductsbySales12
@top int,
@all bit,
@orderby nvarchar(20),
@orderdir nvarchar(30) 
as
begin

declare @sql nvarchar(2000)

set @sql = ('SELECT a.skucode,a.productCode,a.productName,a.totalOrder FROM 
    ( select top ')+cast(@top as nvarchar(50))+('  tblProducts.skuCode,tblProducts.productCode, tblProducts.productName, COUNT(tblOrders_Products.delivered) as totalOrder
 FROM         tblOrders_Products INNER JOIN 
                       tblProducts ON tblOrders_Products.productID = tblProducts.productID
 WHERE tblProducts.productName is not null
 GROUP BY tblOrders_Products.delivered, tblOrders_Products.productID, tblProducts.skuCode, tblProducts.productName,tblProducts.productCode
 ORDER BY totalOrder desc,tblProducts.skuCode  ) a
 ORDER BY case when  @orderdir = ''a'' and @orderby=''skucode'' then a.skuCode  end  , 
           case when  @orderdir = ''d'' and @orderby=''skucode'' then a.skuCode  end desc,

           case when  @orderdir = ''a'' and @orderby=''qty'' then a.totalOrder end,
          case when  @orderdir = ''a'' and @orderby=''qty'' then a.skuCode  end,
           case when  @orderdir = ''d'' and @orderby=''qty'' then a.totalOrder end desc,
          case when  @orderdir = ''d'' and @orderby=''qty'' then a.skuCode  end desc')
exec (@sql)

end
GO 
```

我收到的错误是

> 服务器：消息 137，级别 15，状态 2，第 8 行 必须声明变量“@orderdir”。

为什么即使声明了@orderdir，我也会得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:18:24.580

用于`sp_executesql`传入你的变量。

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

```
exec sp_executesql @sql,
                   N'@orderdir nvarchar(30)',
                   @orderdir=@orderdir 
```

# ios - 无法从 AppDelegate 调用锁定屏幕视图控制器

> ID：15194832
> 
> 赞同：1
> 
> 时间：2013-03-04T04:58:38.653
> 
> 标签：ios, xcode, locking, lockscreen, appdelegate

我已经实现了`KKLockscreen`视图控制器，并且在应用内设置控制器中运行良好。能够设置密码并更改它们。

我在从 appdelegate 调用他的锁屏视图时遇到问题。我添加了委托 .h 文件并在 .m 文件中导入了视图控制器。仍然没有调用锁屏。有什么帮助吗？

下面是我的代码。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if ([[KKPasscodeLock sharedLock] isPasscodeRequired]) {
        KKPasscodeViewController *vc = [[KKPasscodeViewController alloc] initWithNibName:nil bundle:nil];
        vc.mode = KKPasscodeModeEnter;
        vc.delegate = self;

        dispatch_async(dispatch_get_main_queue(),^ {
            UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];

            if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
                nav.modalPresentationStyle = UIModalPresentationFormSheet;
                nav.navigationBar.barStyle = UIBarStyleBlack;
                nav.navigationBar.opaque = NO;
            } else {
                nav.navigationBar.tintColor = _navigationController.navigationBar.tintColor;
                nav.navigationBar.translucent = _navigationController.navigationBar.translucent;
                nav.navigationBar.opaque = _navigationController.navigationBar.opaque;
                nav.navigationBar.barStyle = _navigationController.navigationBar.barStyle;
            }

            [_navigationController presentModalViewController:nav animated:NO];
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:02:35.297

我已经用我的代码检查了它，它正在工作，是的，但是你没有在这一行中给出笔尖名称，我给出的可能是它没有显示你的视图的原因。KKPasscodeViewController *vc = [[KKPasscodeViewController alloc] initWithNibName:nil bundle:nil]

```
-(void)applicationDidBecomeActive:(UIApplication *)application {
RootViewController *vc = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];

dispatch_async(dispatch_get_main_queue(),^ {
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        nav.modalPresentationStyle = UIModalPresentationFormSheet;
        nav.navigationBar.barStyle = UIBarStyleBlack;
        nav.navigationBar.opaque = NO;
    } else {
        nav.navigationBar.tintColor = navigationController.navigationBar.tintColor;
        nav.navigationBar.translucent = navigationController.navigationBar.translucent;
        nav.navigationBar.opaque = navigationController.navigationBar.opaque;
        nav.navigationBar.barStyle = navigationController.navigationBar.barStyle;
    }

    [navigationController presentModalViewController:nav animated:NO];
}); 
```

}

# certificate - P12创建实例

> ID：15194834
> 
> 赞同：1
> 
> 时间：2013-03-04T04:58:45.250
> 
> 标签：certificate, ssl-certificate

第一次发帖，长期观看。我的家庭作业有问题。我查看了 web 和 stackoverflow，但还没有找出为什么我的代码行不起作用。这是我尝试过的。

```
C:\Openssl\bin\openssl.exe pkcs12 -export -in C:\Users\jokesrfunny\Desktop\jokescert.pem -inkey   
C:\Users\jokesrfunny\Desktop\jokeskey.pem -out c:\tools\daacert.p12 -name jokesrfunny 
```

这会带来错误`unable to lead certificates`并且`unable to write 'random state'`

除此之外，我还参考了这些网站寻求帮助，但仍然无法找出发生了什么。

# android - 过滤自定义适配器 IndexOutOfBoundsException

> ID：15194835
> 
> 赞同：8
> 
> 时间：2013-03-04T04:59:05.017
> 
> 标签：android, filter, custom-adapter

我是安卓新手。

我的自定义适配器在过滤时导致异常。

这是我的代码。私有类 DeptAdapter 扩展 ArrayAdapter 实现 Filterable {

```
 private ArrayList<Dept> items;
    private ArrayList<Dept> mOriginalValues;

    public DeptAdapter(Context context, int textViewResourceId, ArrayList<Dept> items) {
            super(context, textViewResourceId, items);
            this.items = items;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.item_listview_2line, null);
        }
        Dept d = items.get(position);
        if (d != null) {
                TextView tt = (TextView) v.findViewById(R.id.toptext);
                TextView bt = (TextView) v.findViewById(R.id.bottomtext);
                if (tt != null){
                    tt.setText(d.dept_nm);                            
                }
                if(bt != null){
                    bt.setText(d.dept_cd);
                }
        }
        return v;
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,FilterResults results) {

                items = (ArrayList<Dept>) results.values; // has the filtered values
                if (results.count > 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }

            }
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
                ArrayList<Dept> FilteredArrList = new ArrayList<Dept>();

                if (mOriginalValues == null) {
                    mOriginalValues = new ArrayList<Dept>(items); // saves the original data in mOriginalValues
                }

                if (constraint == null || constraint.length() == 0) {

                    // set the Original result to return  
                    results.count = mOriginalValues.size();
                    results.values = mOriginalValues;
                } else {
                    constraint = constraint.toString().toLowerCase();
                    for (int i = 0; i < mOriginalValues.size(); i++) {
                        Dept d = mOriginalValues.get(i);
                        if (d.dept_cd.toLowerCase().startsWith(constraint.toString()) || d.dept_nm.toLowerCase().startsWith(constraint.toString())) {
                            FilteredArrList.add(d);
                        }
                    }
                    // set the Filtered result to return
                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }
                return results;
            }
        };
        return filter;
    }
}

class Dept
{
    String dept_cd; 
    String dept_nm; 
    public Dept(String dept_cd, String dept_nm)
    {
        this.dept_cd = dept_cd;
        this.dept_nm = dept_nm;
    }
    public String toString()
    {
        return this.dept_nm+ "(" + this.dept_cd +")" ;
    }
} 
```

任何人都可以帮助我......我不明白为什么调用 getView() 方法比 items.size() 更多

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T05:02:27.943

请记住，这`getView()`将查询 拥有的项目的大小，`superclass`现在，这是您在调用超类构造函数时*最初*传递给它的大小，

```
super(context, textViewResourceId, items); 
```

因此，超类不知道您在过滤时更改了大小。这意味着`getCount()`将返回数组的原始大小，这可以理解为大于过滤后的数组。

这意味着您应该覆盖该`getCount()`方法，以确保您返回的是实际有效大小：

```
@Override
public int getCount()
{
   return items.size();
} 
```

如果要使用它们，还应该覆盖与 List 操作（例如获取）相关的其他方法。例如：

```
@Override
public Dept getItem (int pos){
     return items.get(pos);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T04:27:31.863

您需要添加此方法以获得更好的性能：

```
 @Override
        public int getCount() {
            return items.size();
        }

        @Override
        public Object getItem(int position) {
            return this.items.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:05:41.703

你缺少`getCount()`方法，看看这个[演示](https://stackoverflow.com/questions/14118309/how-to-use-search-functionality-in-custom-list-view-in-android/14119383#14119383)

我希望它会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T05:16:17.983

```
 private ArrayList<Dept> items;
    private ArrayList<Dept> mOriginalValues;

    public DeptAdapter(Context context, int textViewResourceId, ArrayList<Dept> items) {
            super(context, textViewResourceId, items);
            this.items = items;
            this.mOriginalValues=items;  //add this line in your code
    } 
```

# mobile - 为 IOS 安装 Salesforec Mobile sdk 时出错

> ID：15194838
> 
> 赞同：0
> 
> 时间：2013-03-04T04:59:19.307
> 
> 标签：mobile, sdk

大家好，

我想在我的 mac 机器上安装 salesforce mobile sdk。我从下面给出的链接中找到了安装它的方法。
[https://github.com/forcedotcom/SalesforceMobileSDK-iOS](https://github.com/forcedotcom/SalesforceMobileSDK-iOS) 但是在通过 ./install.sh 安装时出现错误，如下所示

> ```
> [exec] Undefined symbols for architecture i386:
> [exec]   "_ABAddressBookCreateWithOptions", referenced from:
> [exec]       anon in SalesforceHybridSDK(SalesforceHybridSDK)
> [exec]       anon in SalesforceHybridSDK(SalesforceHybridSDK)
> [exec]       anon in SalesforceHybridSDK(SalesforceHybridSDK)
> [exec]       anon in SalesforceHybridSDK(SalesforceHybridSDK)
> [exec]   "_ABAddressBookRequestAccessWithCompletion", referenced from:
> [exec]       anon in SalesforceHybridSDK(SalesforceHybridSDK)
> [exec] ld: symbol(s) not found for architecture i386
> [exec] clang: error: linker command failed with exit code 1 (use -v to see invocation)
> [exec] 
> [exec] 
> [exec] ** BUILD FAILED **
> [exec] 
> [exec] 
> [exec] The following build commands failed:
> [exec]    Ld sfdc_build/artifacts/Simulator/Applications/VFConnector.app/VFConnector >normal i386
> [exec] (1 failure) 
> ```
> 
> 构建失败 /Users/qbadmin/SalesforceMobileSDK-iOS/hybrid/SampleApps/VFConnector/sfdc_build /build.xml:34：执行此行时发生以下错误：/Users/qbadmin/SalesforceMobileSDK-iOS/hybrid/SampleApps/VFConnector/sfdc_build >>/build.xml:41：执行此行时出现以下错误：/Users/qbadmin/SalesforceMobileSDK-iOS/shared/build.xml:125：exec 返回：65

我该怎么做才能解决这个问题。如果有人可以，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:21:53.087

这是因为 IOS 和 Xcode 的早期版本。当我更新两者时，它解决了我的问题。

谢谢。

# c - C中指向结构的指针数组

> ID：15194840
> 
> 赞同：1
> 
> 时间：2013-03-04T04:59:28.437
> 
> 标签：c, struct

我的 c 代码中有一个大约 300Bytes (5xint + 256chars) 的结构，我希望有一个好的数组机制来处理这个结构的所有“对象”。我想要一个全局指针数组，以便首先数组中的所有索引都指向NULL，但是当我需要它时初始化每个索引（malloc）并在我完成它时删除它（免费）。

```
typedef struct myfiles mf;
mf* myArr[1000]; 
```

那是我要找的吗？与数组混合的指针经常让我感到困惑。如果是这样，只是为了澄清，

```
mf myArr[1000]; 
```

已经在堆栈上分配了 1000 个结构，我的第一个建议只分配 1000 个指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:01:51.297

你是对的。前者分配 1000 个指针，没有一个被初始化，后者初始化 1000 个对象，每个对象约 300 字节。

初始化为空： `foo_t* foo[1000] = {NULL};`

但这仍然很愚蠢。为什么不只是`mf* myArr = NULL`？现在您有一个指向未初始化内存的指针，而不是 1000 个指向已初始化内存的指针和一个要跟踪的指针。你宁愿做

`myArraySingle = malloc(sizeof(mf)*1000);`或者

```
for(int i = 0; i < 1000; i++) {
    myArray[i] = malloc(1000);
} 
```

并通过`myArraySingle[300]`*(myArray[300])` 访问？无论如何，我的观点是除了语法之外，不要创建这种不必要的间接。单个指针可以指向包含对象序列的连续内存块，就像数组一样，这就是为什么指针支持数组样式语法以及数组索引从 0 开始的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:08:15.913

你似乎理解正确。

更准确地说，我相信`mf* myArr[1000] = { 0 };`会更好地满足您的要求，因为您希望保证所有元素都将初始化为空指针。如果没有初始化，则不存在该保证。

C 中没有“全局”。您指的是在文件范围内声明的具有静态存储持续时间的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T05:03:10.100

```
typedef struct myfiles mf;
mf* myArr[1000]; 
```

这就是你要找的。这将为结构 mf 分配 1000 个指针的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T06:42:58.463

```
typedef struct myfiles mf;
mf* myArr[1000]; 
```

是的，它将初始化 1000 个指针，您必须在使用前使用 malloc/calloc 为每个指针分配内存。

# sharepoint-2010 - 如何修复 SharePoint 2010 Foundation 中缺少的 Web 部件

> ID：15194848
> 
> 赞同：2
> 
> 时间：2013-03-04T05:00:05.573
> 
> 标签：sharepoint-2010

我有 4 个丢失的 Web 部件，它们所依赖的页面也消失了。我根本不知道 Web 部件的名称是什么。当我对有问题的内容数据库运行以下 SQL 时，我得到了发布在它下面的结果。

如何更正此问题，以便清除“缺少服务器站点依赖项”错误？我可以在这里使用 GUID 在 Visual Studio 中简单地创建一个 Web 部件吗？那我该怎么做？

```
SELECT webparts.[tp_PageUrlID]
      ,webparts.[tp_PartOrder]
      ,webparts.[tp_ZoneID]
      ,webparts.[tp_WebPartTypeId]
      ,webparts.[tp_Deleted]
  FROM [WSS4_Content].[dbo].[AllWebParts] webparts
  WHERE tp_webparttypeid IN(
'639c4301-2fcb-608f-5597-949e44006d31',
'662be8e0-b184-94ee-ceed-b6df64945830',
'1b79f424-22bb-02a2-084b-ba39707b607b',
'8719c933-c096-a802-0236-d6a641b78489')

RESULTS
755F835F-0DA7-4B63-8946-174BFC1F1CC3    1 Header    8719C933-C096-A802-0236-D6A641B78489    1
E8634AD5-664C-4D65-B502-91826CA5B729    0 Main  662BE8E0-B184-94EE-CEED-B6DF64945830    1
82EA9D30-5318-44EA-9AEB-E19704FB92E8    1 Main  1B79F424-22BB-02A2-084B-BA39707B607B    0
82EA9D30-5318-44EA-9AEB-E19704FB92E8    0 Main  639C4301-2FCB-608F-5597-949E44006D31    0 
```

我刚刚意识到我应该将它发布到我刚刚发布的 SharePoint Stack Exchange 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:53:33.583

我的结论是从内容数据库中删除记录，因为无法重新创建丢失的 Web 部件。我什至联系了无法帮助我的微软。

# java - 在类中强制使用唯一 id

> ID：15194851
> 
> 赞同：3
> 
> 时间：2013-03-04T05:00:14.547
> 
> 标签：java, uniqueidentifier

只是为了思考练习，如何为给定类的每个实例强制执行属性的唯一性？

这里的唯一性可以定义为在单个 JVM 上和单个用户会话中。

这是 Java 级别的，与数据库无关，主要目的是验证是否发生了冲突。

第一个明显的步骤是在类级别拥有一个静态属性。

*   随着实例数量的增加，拥有 ArrayList 或其他容器似乎不切实际。
*   在类级别增加数字计数器似乎是一种最简单的方法，但 id 必须始终遵循 last-used-id。
*   强制使用哈希或非数字 id 可能会有问题。
*   并发性可能值得关注。如果两个实例有可能同时获得一个 id，那么应该防止这种情况发生。

这个问题应该如何解决？可能已经存在哪些解决方案/方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:16:43.583

如果您关心性能，这里是唯一 id 生成的线程安全、快速（无锁）和无冲突版本

```
 public class Test {
        private static AtomicInteger lastId = new AtomicInteger();
        private int id;

        public Test() {
            id = lastId.incrementAndGet();
        }
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T05:25:40.317

只需使用`UUID`Java [http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)中的类。在检查的类中创建一个 UUID 类型的字段，并在构造函数中初始化该字段。

```
public class Test  {
   public UUID id;
   public Test() {
      id = UUID.randomUUID();
   }
} 
```

当需要检测冲突时，只需像这样比较对象的 UUID 的字符串表示...

```
Test testObject1 = new Test();
Test testObject2 = new Test();
boolean collision = testObject1.id.toString().equals(testObject2.id.toString()); 
```

或者更简单地使用类`compareTo()`中的方法`UUID`......

`boolean collision = testObject2.id.compareTo(testObject1.id) == 0 ? true : false;`

0 表示`id`s 相同。+1 和 -1 当它们不相等时。

优点：普遍独特（可以是基于时间的，随机的），因此应该处理线程问题（有人应该确认这一点......这是基于我所知道的最好的）。更多信息[在这里](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)和[这里](http://www.ietf.org/rfc/rfc4122.txt)。

要使其成为线程安全的，请参阅 SO [is java.util.UUID thread safe？](https://stackoverflow.com/questions/7212635/is-java-util-uuid-thread-safe)

缺点：将需要更改所检查类的结构，即`id`必须在类本身的源中添加该字段。这可能方便也可能不方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T12:47:28.537

UUID 是一个很好的解决方案，但是后端使用 UUID.randomUUID() 方法：

```
synchronized public void SecureRandom.nextBytes(byte[] bytes) 
```

所以这很慢：线程在每个 id 生成操作中锁定一个监视器对象。

AtomicInteger 更好，因为它在 CAS 操作中循环。但同样，对于每个 id 生成操作，都必须进行同步操作。

在下面的解决方案中，只有质数生成是同步的。同步在 volatile int 上，因此速度快且线程安全。有一组素数，在一次迭代中会生成许多 id。

# 固定数量的线程

**编辑：固定线程数的解决方案**

我你知道有多少线程将使用 ID 生成，然后你可以生成带有值的 ID

```
Id = I mod X + n*X 
```

其中 X 是线程数，I 是线程数，N 是一个局部变量，每次 Id 生成都会递增。这个解决方案的代码确实很简单，但它必须与hole program基础设施集成。

# 从素数生成的 ID

这个想法是生成 ids 作为素数的因子 id = p_1^f1 * p_2^f2 * p_2^f3 * ... * p_n^fn

我们在每个线程中使用不同的素数来在每个线程中生成不同的 id 集。

假设我们使用素数 (2,3,5)，序列将是：

```
2, 2^2, 2^3, 2^4, 2^5,..., 2^64 
```

然后，当我们看到将产生溢出时，我们将因子滚动到下一个素数：

```
3, 2*3 , 2^2*3, 2^3*3, 2^4*3, 2^5*3,..., 2^62*3 
```

接下来

```
3^2, 2*3^2 , 2^2*3^2, ..... 
```

# 一代类

**编辑：必须在 AtomicInteger 上完成引物订单生成才能正确**

IdFactorialGenerator 类的每个实例都会生成不同的 id 集。

要让线程保存 Id 的生成，只需使用 ThreadLocal 来设置每个线程的实例。同步仅在质数生成期间实现。

```
package eu.pmsoft.sam.idgenerator;

public class IdFactorialGenerator {
    private static AtomicInteger nextPrimeNumber = 0;

    private int usedSlots;
    private int[] primes = new int[64];
    private int[] factors = new int[64];
    private long id;
    public IdFactorialGenerator(){
        usedSlots = 1;
        primes[0] = Sieve$.MODULE$.primeNumber(nextPrimeNumber.getAndAdd(1));
        factors[0] = 1;
        id = 1;
    }

    public long nextId(){
        for (int factorToUpdate = 0; factorToUpdate < 64; factorToUpdate++) {
            if(factorToUpdate == usedSlots) {
                factors[factorToUpdate] = 1;
                primes[factorToUpdate] = Sieve$.MODULE$.primeNumber(nextPrimeNumber.getAndAdd(1));
                usedSlots++;
            }
            int primeToExtend = primes[factorToUpdate];
            if( primeToExtend < Long.MAX_VALUE / id) {
                // id * primeToExtend < Long.MAX_VALUE
                factors[factorToUpdate] = factors[factorToUpdate]*primeToExtend;
                id = id*primeToExtend;
                return id;
            } else {
                factors[factorToUpdate] = 1;
                id = 1;
                for (int i = 0; i < usedSlots; i++) {
                    id = id*factors[i];
                }
            }
        }
        throw new IllegalStateException("I can not generate more ids");
    }
} 
```

为了获得质数，我使用问题 7 中提供的 scala 实现：http: [//pavelfatin.com/scala-for-project-euler/](http://pavelfatin.com/scala-for-project-euler/)

```
object Sieve {

  def primeNumber(position: Int): Int = ps(position)

  private lazy val ps: Stream[Int] = 2 #:: Stream.from(3).filter(i =>
    ps.takeWhile(j => j * j <= i).forall(i % _ > 0))
} 
```

# ruby-on-rails - Sunspot 未能索引整数 belongs_to id 字段

> ID：15194852
> 
> 赞同：0
> 
> 时间：2013-03-04T05:00:16.320
> 
> 标签：ruby-on-rails, ruby, sunspot, sunspot-rails

在[sunspot sunspot.github.com](http://sunspot.github.com)的示例中，`belongs_to :blog`关联在`searchable`带有`integer :blog_id`. 稍后，可以使用`with(:blog_id, 1)`.

如果已经这样做了，除了关联是针对 a`retailer`并且索引是 on `retailer_id`。然而，在搜索时，我使用`with(:retailer_id, 4)`. 如果不使用此条件，则返回的所有结果都有一个`retailer_id = 4`.

我已经重新索引了很多次。我已经尝试过 sunspot_rails 1.3.3 和 2.0.0。

所有其他`text`字段似乎都可以正常索引。

Rails 日志中显示的查询（转到 solr）似乎包含正确的字段。

还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:57:02.580

在尝试`Sunspot.index(Item.first)`并看到xml确实包含retailer_id之后。我检查了 rake 任务完成的导入日志。

事实证明，我遇到的问题是因为 DataMapper 在`DataMapper.finalize`调用 after 之前不会创建关联属性。这永远不会作为包含的 sunspot_rails tasks.rb 的一部分发生，用于重新索引。

对我来说，快速的解决方案是简单地复制 rake 任务，并在需要所有模型后添加对 finalize 的调用。

# jquery - 从选项卡链接触发颜色框

> ID：15194859
> 
> 赞同：1
> 
> 时间：2013-03-04T05:00:52.567
> 
> 标签：jquery, colorbox

我有我的 index.html，它使用 ajax 在 div 中加载内容，如下所示：

```
$('.item-101 a').click(function(e) {
    var url = $(this).attr('href') + '#maincontent';
    $('#maincontent-loader').html('loading...').load(url);
    e.preventDefault();
    $(this).parent().addClass('active');
    $('.item-104, .item-109').addClass('hidden')
  }); 
```

在加载的内容上，我使用了一个简单的 jquery 选项卡，如下所示：

```
 $('#info div:not(:first)').hide();

  $('#info-nav li').click(function(event) {
    event.preventDefault();
    $('#info div').hide();
    $('#info-nav .current').removeClass("current");
    $(this).addClass('current');

    var clicked = $(this).find('a:first').attr('href');
    $('#info ' + clicked).fadeIn('fast');
  }).eq(0).addClass('current'); 
```

所有这些都是从我页面标题中调用的 script.js 加载的。在其中一个选项卡内容上，我有一系列缩略图，它们在彩盒幻灯片中加载了它们的全尺寸计数器部件。到目前为止，一切正常。但是当我单击名为“图像”的标签时，我触发了彩盒幻灯片。但我无法让它工作。我尝试按照 colorbox 网站上的建议使用以下内容：[http](http://www.jacklmoore.com/colorbox/faq#faq-click) ://www.jacklmoore.com/colorbox/faq#faq-click使用以下内容：

```
var $gallery = $("a[rel=gallery]").colorbox();
$("a#openGallery").click(function(e){
    e.preventDefault();
    $gallery.eq(0).click();
}); 
```

有谁知道可以做些什么来克服这个问题？我的理解是它不起作用，因为选项卡标题已经附加或绑定到选项卡脚本。我对 jquery 还是有点陌生​​，我已经阅读了很多书并得到了一本书，但似乎超出了我的能力范围。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:02:35.480

替换`.click`为`.on`。

**例子**

```
$('.item-101 a').on('click',function(e) { 
```

# java - 可以直接实例化hibernate session Factory，但不能通过spring实现

> ID：15194860
> 
> 赞同：2
> 
> 时间：2013-03-04T05:01:00.310
> 
> 标签：java, spring, hibernate

我已经开始通过一项作业学习休眠和弹簧，在该作业中我试图通过弹簧使用会话工厂实例。我理解了休眠部分，但不能继续春天。我尝试了许多教程和示例，但无法让我的 spring 工作。虽然当我直接实例化它时它可以工作。这是我的项目的问题相关详细信息...

**applicationContext.xml**（在 WEB-INF 内）

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<context:annotation-config />
<context:component-scan
    base-package="com.nagarro.training.assignment6.dao.entity.Student" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="configLocation" value="classpath:hibernate.cfg.xml"></property>
    <property name="hibernateProperties">
        <value>
            hibernate.dialect=org.hibernate.dialect.HSQLDialect
        </value>
    </property>
</bean>
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean>
<tx:annotation-driven />

<bean id="studentDAO"
    class="com.nagarro.training.assignment6.dao.impl.StudentDAOImplementation">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

</beans> 
```

**编辑：包括建议的更改** **StudentDAOImplementaion.java**（正在使用的文件）

```
public class StudentDAOImplementation implements StudentDAO {

    /**
     * single instance of hibernate session
     */
    @Autowired
    private SessionFactory sessionFactory;

    // HibernateUtil.getSessionFactory().openSession()

    /**
     * @param sessionFactory
     */
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    /**
     * @return the sessionFactory
     */
    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    private Session getSession() {
        return this.sessionFactory.getCurrentSession();
    }
        /**
     * @return list of all the students
     */
    public List<Student> getStudentList() {

        System.out.println(this.getSession().getStatistics());

        return (List<Student>) this.getSEssion.createQuery("from Student")
                .list();
    }

} 
```

这是我在 lib 文件夹中的 jar 文件的片段： ![在此处输入图像描述](../Images/bc67ce8c895bb0f1b822b51b6e754d39.png)

我认为我不需要包含休眠文件和 bean，因为它在没有弹簧的情况下工作正常。它是我无法工作的春天。我已经尝试了许多不同的网络实现，但我就是无法让它工作。它只是在 StudentDAOImplementation 中的 ** System.out.println(sessionFactory.getStatistics());** 行上说空指针异常。

调用 StudentDAO 的测试类

```
public class Test {

public static void main(String[] args) {
    StudentDAOImplementation sd = new StudentDAOImplementation();

    List<Student> list = sd.getStudentList();

    for(Student s : list) {
        System.out.println(s.getName());
    }
} 
```

}

**堆栈跟踪**

```
Exception in thread "main" java.lang.NullPointerException
    at StudentDAOImplementation.getStudentList(StudentDAOImplementation.java:116)
    at Test.main(Test.java:13) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:19:33.657

你的`sessionFactory`变量被误导了，因为类型实际上是`Session`. `Session`!= `SessionFactory`。您正在使用 NPE，`sessionFactory.getStatistics()`因为 Spring 无法将 Session 自动装配到这样的 DAO 中。如果您在 NPE 之前没有看到错误，那么您实际上并没有使用 Spring 实例化 DAO，否则您会收到关于无法找到 Session 类型的依赖项的错误。使用基于 Hibernate 的 DAO 的适当方法是将其注入 a`SessionFactory`并`getCurrentSession()`在需要`Session`. 有关此方法和设置适当事务管理的详细信息，请参阅[“基于普通 Hibernate 3 API 实现 DAO”和以下内容。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-hibernate-straight)

**更新：**再看一眼，我看到你的组件扫描包设置为`com.nagarro.training.assignment6.dao.entity.Student`，它看起来完全像一个类，而不是一个包。它甚至与您真正想要进行组件扫描的任何东西都不接近。也许你不明白组件扫描是干什么用的。它包含在参考指南中的[“基于注释的容器配置”中。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-annotation-config)

**更新 2：**关于您的“测试”代码：您根本没有使用 Spring，因此您不妨删除 XML 并省去麻烦。另一方面，如果您想实际使用 Spring，则需要基于所述 XML 文件在 main 方法中创建一个上下文，例如：

```
ApplicationContext context = new FileSystemXmlApplicationContext(locationOfXmlFile); 
```

然后，如果你想要一个 Spring 管理的 DAO，你不能只用`new`. 春天不是魔法。它不会因为您将它加载到同一个 JVM 中的某个位置而从您手中夺走控制权。* 您必须向 Spring 询问*它*创建的 DAO，例如：

```
StudentDAO dao = context.getBean(StudentDAO.class); 
```

请注意，我使用了接口类型，而不是具体类型。出于多种原因，这始终是一种可取的做法。

这（不是从 Spring 开始）是您的第一个问题。一旦你这样做了，你的配置就会遇到其他问题。如果您需要帮助解决其中一个问题，您应该发布一个新问题。

*除非您[使用 AspectJ weaving 来注入任意对象](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:50:49.043

您在 DAO 类中注入 a`Session`而不是`SessionFactory`with 。`@Autowired private Session sessionFactory;`它需要`SessionFactory`像这样 `@Autowired SessionFactory sessionFactory;`

然后像这样使用它来做一个DAO操作，比如save

```
Session session = sessionFactory.getCurrentSession()
session.persist(entity); 
```

**编辑**

你的测试用例应该是这样的

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:<path_to_your_appcontext.xml>" })
public class StudentDAOTest {

@Autowired
private StudentDAO studentDAO

@Test
public void test() {
      List<Student> list = studentDAO.getStudentList();
      assertNotNull(list)
}
} 
```

# parsing - NASM 解析要显示的 Ascii 字符

> ID：15194863
> 
> 赞同：3
> 
> 时间：2013-03-04T05:01:17.290
> 
> 标签：parsing, ascii, nasm

基本上我想做的（这是为了分配）是让用户输入一个字符，然后显示它是大写/小写字母、0-9 十进制、可打印符号还是控制键。

不幸的是，虽然文档给了我一个关于摆弄控制逻辑（if/else、循环等）的想法，但实际上知道让 NASM 做我想做的事情的命令令人沮丧，因为幻灯片和课堂笔记，和文件并不完全具有建设性。

我相信控制键是从 DEC 0 到 32 的 esc、null、tab 等。

在下面的代码中，我接受来自用户的输入，但我认为它不接受控制键，我该如何摆弄它呢？

```
segment .data

    msg3 dw '10h'
segment .bss
;
aChar resb 2 ; reserve 10 bytes for aChar

segment .text
    global _start
_start:

    ; ### Code for simple Input ###
    mov eax, 3 ; select kernal call #3
    mov ebx, 0 ; default input device
    mov ecx, aChar ; pointer to aChar'
    int 0x80 ; invoke kernal call to read   

    ; ### Code to spit the input to the screen ###
    mov eax, 4 ; select kernal call #4
    mov ebx, 1      ; default output device
    mov ecx, aChar ; pointer to ID
    int 0x80 ; write id read

    ; termination code
exit: mov ax, 1 ; select system call #1 system exit
    mov bx, 0 ; 0 means normal
    int 0x80 ; invoke kernal call 
```

所以我在想什么，假设我能够接受 ascii 中的控制键。是不是一旦用户输入了一个字符，我将它转换为十六进制或十进制，以更容易者为准，然后运行 ​​if else case 如果它在某些值之间是一个 X，然后显示 X，如果它在两个不同的值之间是一个 Y等等。

因为小于 33 的东西显然是我认为的控制键，（DEL 是控制键吗？它的 DEC 127），但小于 48 的东西我认为是一个符号，但它也必须大于 32，或者我只是隐式假设如果它大于 32，但小于 48，假设符号？烦人的一切似乎都存在于 ASCII 图表的不同部分。

这是将 ASCII 转换为 HEX 的代码，我认为十进制可能更容易使用，但我不知道如何 a) 找出即使我在某处的注册表中有 ascii 字符的二进制值和 b) 转换它是十进制的，所以既然我有这个代码还不如使用它？

```
;Hex equivalent of characters              HEX2CHAR.ASM
;
;        Objective: To print the hex equivalent of
;                   ASCII character code. Demonstrates
;                   the use of xlat instruction.
;            Input: Requests a character from the user.
;           Output: Prints the ASCII code of the
;                   input character in hex.
%include "io.mac"

.DATA
char_prompt    db  "Please input a character: ",0
out_msg1       db  "The ASCII code of '",0
out_msg2       db  "' in hex is ",0
query_msg      db  "Do you want to quit (Y/N): ",0
; translation table: 4-bit binary to hex
hex_table      db  "0123456789ABCDEF"    

.CODE
     .STARTUP
read_char:
     PutStr  char_prompt  ; request a char. input
     GetCh   AL           ; read input character

     PutStr  out_msg1
     PutCh   AL
     PutStr  out_msg2
     mov     AH,AL        ; save input character in AH
     mov     EBX,hex_table; EBX = translation table
     shr     AL,4         ; move upper 4 bits to lower half
     xlatb                ; replace AL with hex digit
     PutCh   AL           ; write the first hex digit
     mov     AL,AH        ; restore input character to AL
     and     AL,0FH       ; mask off upper 4 bits
     xlatb
     PutCh   AL           ; write the second hex digit
     nwln
     PutStr  query_msg    ; query user whether to terminate
     GetCh   AL           ; read response

     cmp     AL,'Y'       ; if response is not 'Y'
     jne     read_char    ; read another character
done:                        ; otherwise, terminate program
     .EXIT 
```

来自“Linux 汇编编程指南”。

我的问题是，如果代码将其转换为十六进制，它实际上是否在内存中以十六进制的形式存在？或者它只是显示为十六进制的 ascii 字符表示？如果是这样，那显然对我没有帮助。

所以我的问题是有序的：

1.如何接受用户输入的控制键。2\. 我如何解析 ascii 以便我在内存中的某个地方有一个寄存器，我认为这是一种奇特的方式来表示“变量”我输入的 ASCII 字符的 HEX 值？然后我可以摆弄并评估以显示我需要显示的内容？

编辑：我想我找到了解决方案，问题是它不起作用，我不知道为什么：

```
decimal: 
    mov ebx, 30h    ; smallest decimal ASCII 
    mov edx, key
    cmp edx, ebx
    jl  uppercase
    mov ebx, 39h    ; test against 9
    cmp edx, ebx
    jg  exit
    mov eax, 4
    mov ebx, 1
    mov ecx, decimalKey
    mov edx, decimalLen
    int 0x80 
```

无论我输入什么，它每次都会跳到“退出”评估为“大于”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:33:37.770

终于想通了。

```
;
; This is assignment 2, it takes key strokes from the user
; and displays whether it is a control key, upper case,
; lower case, a printable symbol, or a decimal.
; By Blayne Elison Bradley, 9688994
; March 4th 2013

segment .data
    msg db 'Enter a character: ', 0xA ; text message
    len equ $-msg                                                           ; length of msg
    msg2 db 'Your character is: ' ; text message
    len2 equ $-msg2   

    controlKey: db "Control Key", 10
    controlLen: equ $-controlKey

    control2Key: db "ControlKey2", 10
    control2Len: equ $-control2Key

    printableKey: db "Printable", 10
    printableLen: equ $-printableKey

    printable2Key: db "Printable-2", 10
    printable2Len: equ $-printable2Key

    printable3Key: db "Printable-3", 10
    printable3Len: equ $-printable3Key

    printable4Key: db "Printable-4", 10
    printable4Len: equ $-printable4Key

    decimalKey: db "Decimal", 10
    decimalLen: equ $-decimalKey

    upperKey: db "Upper Case", 10
    upperLen: equ $-upperKey

    lowerKey: db "Lower Case", 10
    lowerLen: equ $-lowerKey

    smallerKey: db "Smaller", 10
    smallerLen: equ $-smallerKey

    biggerKey: db "Bigger", 10
    biggerLen: equ $-biggerKey

segment .bss
;
aChar resb 8 ; reserve 8 bytes for aChar
; I changed the above to 8 and that seems to work with the code below, 
; I don't know if its crucial to its execution. 

segment .text
        global _start
_start:

    ; ### Code for Outputting a simple Message ###
    mov eax, 4 ; select kernal call #4
    mov ebx, 1 ; default output device
    mov ecx, msg ; second argument; pointer to message
    mov edx, len ; third argument: length
    int 0x80 ; invoke kernal call to write

    mov eax, 3 ; select kernal call #3
    mov ebx, 0 ; default input device
    mov ecx, aChar ; pointer to aChar'
    int 0x80 ; invoke kernal call to read

control: ; is it a control key?
    mov al,  [aChar] ; 
    cmp al, 1Fh
    jg  printable

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, controlKey
    mov edx, controlLen
    int 0x80
    jmp exit ; because duh

decimal:    
    mov al,  [aChar] ; 
    cmp al, '9'
    jg  printable2

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, decimalKey
    mov edx, decimalLen
    int 0x80    
    jmp exit

printable:
    mov al,  [aChar] ; 
    cmp al, '/'
    jg  decimal

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, controlKey
    mov edx, controlLen
    int 0x80
    jmp exit ; because duh

printable2:
    mov al,  [aChar] ; 
    cmp al, '@'
    jg  uppercase

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, printable2Key
    mov edx, printable2Len
    int 0x80
    jmp exit ; because duh

uppercase:  
    mov al,  [aChar] ; 
    cmp al, 'Z'
    jg printable3

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, upperKey
    mov edx, upperLen
    int 0x80
    jmp exit ; because duh

printable3:
    mov al,  [aChar] ; 
    cmp al, '`'
    jg  lowercase

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, printable3Key
    mov edx, printable3Len
    int 0x80
    jmp exit ; because duh

lowercase:
    mov al,  [aChar] ; 
    cmp al, 7Ah
    jg  printable4

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, lowerKey
    mov edx, lowerLen
    int 0x80
    jmp exit ; because duh

printable4:
    mov al,  [aChar] ; 
    cmp al, '~'
    jg  control2

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, printable4Key
    mov edx, printable4Len
    int 0x80
    jmp exit ; because duh

control2: ; is it a control key?
    mov al,  [aChar] ; 
    cmp al, 7Fh
    jg  exit ; beyond range

    ; Output
    mov eax, 4
    mov ebx, 1
    mov ecx, control2Key
    mov edx, control2Len
    int 0x80
    jmp exit ; because duh

exit:
    mov eax, 1
    xor ebx, ebx
    int 0x80 
```

# c# - 如何动态创建泛型类型以传递给泛型方法？

> ID：15194868
> 
> 赞同：0
> 
> 时间：2013-03-04T05:01:36.157
> 
> 标签：c#, generics, types

我已经梳理了关于这个问题的现有问题/答案，但没有一个以我理解的方式准确地说明我在寻找什么。这是我的片段：

```
Type t = **?**

_SecondRole.ProvisionRelationship<t>(_FirstRole); 
```

我相信我应该在这里使用反射，尽管我不完全理解如何。我如何定义“t”以便这个工作？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:07:45.037

如果`_FirstRole`是 unknown 的一个实例`t`，例如来自：

```
object _FirstRole = Activator.CreateInstance(t); 
```

那么你可以`dynamic`在这里利用：

```
dynamic _FirstRole = Activator.CreateInstance(t); // or whatever
_SecondRole.ProvisionRelationship(_FirstRole); 
```

第二行现在是一个`dynamic`语句，在运行时部分评估（但有一些巧妙的缓存使用） - 这意味着它可以从取消引用的对象的*实际类型*`_FirstRole`执行泛型类型推断。

* * *

如果*不是*这种情况，那么调用它的唯一方法是通过`GetMethod`and `MakeGenericMethod`- 这是笨拙且效率不高的。在那种情况下，我强烈建议重构`_SecondRole.ProvisionRelationship`以接受`Type`参数，而不仅仅是泛型；您当然仍然可以提供通用版本以避免影响现有代码：

```
void ProvisionRelationship(Type type, SomeType role) {...}
void ProvisionRelationship<T>(SomeType role) {
    ProvisionRelationship(typeof(T), role);
} 
```

并调用为：

```
_SecondRole.ProvisionRelationship(t, _FirstRole); 
```

# html - 是否有一种解决方法可以在 Chrome + Safari 的标签中加载的 SVG 中获得适当的字体支持？

> ID：15194870
> 
> 赞同：0
> 
> 时间：2013-03-04T05:01:38.230
> 
> 标签：html, google-chrome, svg, webkit, cross-browser

我正在使用带有我的 SVG 标记的数据 URI 并将其粘贴在标记的`src`属性中`<img>`。在 FireFox 中运行良好，但在 Chrome/Safari 中我失去了字体支持。

见这里：http: [//jsfiddle.net/3vhR7/](http://jsfiddle.net/3vhR7/)

有没有一种解决方法，我仍然可以使用`<img>`而不是`<embed>`or `<object>`？

编辑：我将此提交给[caniuse.com](http://caniuse.com)，他们[确认这是一个错误](http://caniuse.com/#feat=svg-img)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T17:24:22.890

为什么不能使用对象标签？这很容易而且超级有趣。

```
<object type="image/svg+xml" data="chart.svg">
    <img src="fallback.png" alt="No SVG Support"/>     
</object> 
```

耶！（Monty Python 版本）

# java - 使用 For 循环使两个不同字符的三角形适合矩形时遇到麻烦？

> ID：15194872
> 
> 赞同：4
> 
> 时间：2013-03-04T05:01:40.227
> 
> 标签：java, loops, printing, for-loop, nested

输入示例：

```
3

4 
```

输出示例（假设空格 = 新行。）

```
QQQH
QQHH
QHHH

QQQQH
QQQHH
QQHHH
QHHHH 
```

到目前为止，尝试打印的代码片段是（假设所有变量都是预定义的）：

```
public int getSize()
{
    for (int i = size; i > 0; i--){
        for (int j = 1; j < size; j++){
            out.print("Q");
            out.print("H");
        }
        out.println("");
    }
    return 0;
} 
```

它只是打印：（假设空格=新行。）

```
QHQHQHQHQH
QHQHQHQHQH
QHQHQHQHQH
QHQHQHQHQH
QHQHQHQHQH 
```

对于 5 的输入。我不太确定如何让它只打印其各自整数值的次数。有人可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:18:37.480

您可以将内部循环中断两个，如下所示：

```
 for (int i = size; i > 0; i--) {
        for (int j = 0; j < i; j++) {
            out.print("Q");
        }
        for (int j = i; j < size + 1; j++) {
            out.print("H");
        }
        out.println();
    } 
```

输出：

```
QQQH
QQHH
QHHH

QQQQH
QQQHH
QQHHH
QHHHH 
```

或者如果你不想打破循环，你可以使用三元运算符：

```
for (int i = size; i > 0; i--) {
    for (int j = 0; j < size + 1; j++) {
        out.print(j < i ? 'Q' : 'H');
    }
    out.println();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:22:05.047

试试这个代码块：

```
int j=0;
for (int i = size; i > 0; i--)
{
    j=0;
    while(j < i) 
    {
        out.print("Q");
        j++;    
    }
    j=i;
    while(j < size+ 1) 
    {
        out.print("H");
        j++;
    }
    out.println();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T05:24:00.313

尝试这个

```
for (int i = 0; i < size; i++) {
 for (int j = 1; j <= size-i; j++) {
   System.out.print("Q");
 }
 for (int k = 0; k <= i; k++) { 
   System.out.print("H");
 }
 System.out.println("");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T05:24:17.047

**使用样本输入进行测试。工作正常**

```
public int getSize() {
    for (int i = 1; i < size+1; i++) {
        for (int j = 0; j < size+1; j++) {
            int Qtimes = size-i;
            if(j <= Qtimes) {
                System.out.print("Q");
            } else{
                System.out.print("H");
            }
        }
        System.out.println("");
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T05:20:01.277

如果输入为 4，则此方法有效 - 例如 - 将其更改为任何数字

```
public int getSize()
{
    int cnt = 0;
    int i,j,k = 0;

    for ( i = 4; i > 0; i--){

        for ( j = 0; j < i; j++){

        System.out.print("Q");

        }
        cnt ++;
        for( k = 0 ; k <cnt ; k++) {
            System.out.print("H");
        }

        System.out.println("");

    }

    return 0;
} 
```

输出是

```
QQQQH
QQQHH
QQHHH
QHHHH 
```

# java - 抄袭检测器

> ID：15194877
> 
> 赞同：-1
> 
> 时间：2013-03-04T05:02:26.840
> 
> 标签：java

我尝试编写的程序有问题。基本上它从两个文件中读取，将它们转换为数组，然后比较相似之处。到目前为止它一直有效，但是当第一个 .txt 文件读取 "abcdefghijaaaaa a" 并且第二个 .txt 文件读取 "abcdefghi k" 时，输入文件名后出现以下错误：

```
java.lang.ArrayIndexOutOfBoundsException: 10
    at PlagiarismDetector.compareStrings(PlagiarismDetector.java:77)
    at PlagiarismDetector.main(PlagiarismDetector.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

我的代码如下。感谢任何可以提供帮助的人=）

```
 import java.util.Scanner;
    import java.io.*;

    public class PlagiarismDetector
    {
        public static void main(String[] args) {
     Scanner reader = new Scanner(System.in);
     System.out.println("What file is the first file?");
     String fileOne = reader.next();

     String stringOne = readStringFromFile(fileOne);

     System.out.println("What file is the second file?");
     String fileTwo = reader.next();
     String stringTwo = readStringFromFile(fileTwo);

     if (stringOne == null || stringTwo == null)
     {
         return;
     }

     System.out.println("Comparing the 2 files......");
     System.out.println("The result of the 2 files is ....");

     if (compareStrings(stringOne, stringTwo))
     {
      System.out.println("Plagiarism detected. Cheaters!!!!");
     }
     else
     {
           System.out.println("No plagiarism detected");
           }
        }

        public static String readStringFromFile(String filename)
        {enter code here
     String builder = "";
     try
     {
         Scanner fileReader = new Scanner(new File(filename));
         while (fileReader.hasNextLine())
         {
      builder = builder + fileReader.nextLine() + "\n";
         }

         return builder;
     }
     catch (Exception e)
     {
         System.out.println("An error occurred while trying to open the file " + filename + ". Is the file located inside the same folder as the .class file and with the identical name?");
         return null;
     }
        }

         public static boolean compareStrings (String a, String b)
     {
       boolean checkForPlagiarism = true;
       String[] piecesA = a.split("\\s");
       String[] piecesB = b.split("\\s");

       int count1 = 0;
       int count2 = 0;
       for (int counter = 0; counter <= piecesA.length - 1; counter++)
        {
          for(int counter2 = 0; counter<= piecesB.length - 1; counter++)
          {
              if(piecesA[counter].equals(piecesB[counter2]))
              {
              count1++;
              }
          }
        }
       for (int counter = 0; counter <= piecesB.length - 1; counter++)
        {
          for(int counter2 = 0; counter <= piecesA.length - 1; counter++)
          {
              if(piecesA[counter].equals(piecesB[counter]))
              {
              count2++;
              }
          }
        }

       if((count1/(int)piecesA.length)*100 >= 90 && (count2/(int)piecesB.length)*100 >= 90)
       {
         checkForPlagiarism = false;
       }    
        return checkForPlagiarism;
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:10:02.763

```
 if(piecesA[counter].equals(piecesB[counter])) 
```

应该

```
 if(piecesA[counter2].equals(piecesB[counter])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:06:15.483

这看起来很可疑：

```
for (int counter = 0; counter <= piecesB.length - 1; counter++)
{
   for(int counter2 = 0; counter <= piecesA.length - 1; counter++)
   {
      if(piecesA[counter].equals(piecesB[counter]))
      {
          count2++;
      }
   }
} 
```

受错误数组长度限制的计数器

你可能想要这样做：

```
for (int counter = 0; counter <= piecesA.length - 1; counter++)
{
   for(int counter2 = 0; counter2 <= piecesB.length - 1; counter2++)
   {
      if(piecesA[counter].equals(piecesB[counter2]))
      {
          count2++;
      }
   }
} 
```

此外，约定是编写这样的循环：

```
 for(int counter2 = 0; counter2 < piecesB.length; counter2++) 
```

# android - XML文件是否自动解析并自动膨胀？

> ID：15194881
> 
> 赞同：0
> 
> 时间：2013-03-04T05:02:51.863
> 
> 标签：android

这是真的吗：当您创建活动时，必须解析和扩展视图 XML 文件。这是自动发生的，所以在幕后发生了一些你不能直接控制的事情。

回答于（[https://stackoverflow.com/a/5652780/2125918](https://stackoverflow.com/a/5652780/2125918)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:06:33.160

当您调用`setContentView`并将其传递给您的*资源标识符*时，`layout_file.xml`它将被解析并为您生成控件/视图。

您没有控制权是不正确的，如果您愿意，您可以手动执行此过程（即以编程方式从 XML 生成视图），但这不是常见的情况。

您可以通过在其中定义核心视图来组合这两个世界，`layout_file.xml`然后在需要时以编程方式生成动态视图。

# android - android中的AlertDailogBox，保存文件

> ID：15194886
> 
> 赞同：0
> 
> 时间：2013-03-04T05:03:22.410
> 
> 标签：android, file, android-alertdialog

在我单击按钮的应用程序中，我显示警报对话框以获取文件名。并从用户那里获取文件名。并保存它。但正在发生的事情是，在单击按钮警报 dailog 框后进入屏幕前面，在此之前它尝试保存文件。但它试图在用户输入文件名之前保存文件，这就是为什么文件名在保存文件中为空的原因。如何调用使用警报框，以便我可以从用户那里获取名称，然后使用该名称保存文件。请帮助我。

```
 public void savebitmap(Bitmap bitmap)
{
    str++;
    AlertDialog.Builder alert = new AlertDialog.Builder(Work.this);
    alert.setMessage("File name :");
    input = new EditText(Work.this);
    input.setLayoutParams(new LayoutParams(100,50));
    alert.setView(input);
    alert.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            NameValue = input.getText().toString();
            System.out.println("   file name.---"+NameValue);
        }

    });
    alert.show();
    System.out.println("file is..."+NameValue);

    try
    {
        System.out.println("in bitmap save...");
        File fn=new File("/sdcard/"+" filename4"+".png");
        FileOutputStream out=new FileOutputStream(fn);
        System.out.println(",,,,,,,,,,,,,,,"+out);
        Toast.makeText(getApplicationContext(), "In Save",Toast.LENGTH_SHORT).show();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 90,out);
        out.flush();
        out.close();    
        Toast.makeText(getApplicationContext(), "File is Saved in   "+fn, Toast.LENGTH_SHORT).show();
    }
    catch(Exception e){
        e.printStackTrace();        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:07:21.367

您需要先输入，然后当用户按 OK 时，您需要创建文件。所以你需要在 side 中编写代码`onClick`。

试试这个，

```
public void savebitmap(Bitmap bitmap)
{
    str++;
    AlertDialog.Builder alert = new AlertDialog.Builder(Work.this);
    alert.setMessage("File name :");
    input = new EditText(Work.this);
    input.setLayoutParams(new LayoutParams(100,50));
    alert.setView(input);
    alert.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            NameValue = input.getText().toString();
            System.out.println("   file name.---"+NameValue);
            try
            {
                System.out.println("in bitmap save...");
                File fn=new File("/sdcard/"+" filename4"+".png");
                FileOutputStream out=new FileOutputStream(fn);
                System.out.println(",,,,,,,,,,,,,,,"+out);
                Toast.makeText(getApplicationContext(), "In Save",Toast.LENGTH_SHORT).show();
                bitmap.compress(Bitmap.CompressFormat.JPEG, 90,out);
                out.flush();
                out.close();   

            }
            catch(Exception e){
                e.printStackTrace();        
            }
        }

    });
    alert.show();
    System.out.println("file is..."+NameValue);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:08:08.003

您将在 Button 的 onClick 事件中移动所有文件保存代码或将所有代码包装在一个方法中，然后在 Button 单击时调用它：

```
public void savebitmap(Bitmap bitmap){
      //....your code here
        alert.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    NameValue = input.getText().toString();
                    System.out.println("   file name.---"+NameValue);

                    // put your code here to save file on Ok button click
                   saveFileOnSdCard(NameValue);
                }

            });
            alert.show();
    }

    private void saveFileOnSdCard(String str_filename){
      // move yor file saving code here..
    } 
```

# android - Facebook api 在 openActiveSession 期间挂在“正在打开”

> ID：15194887
> 
> 赞同：3
> 
> 时间：2013-03-04T05:03:22.627
> 
> 标签：android, facebook

我第一次可以正常登录。我有一个选项，用户可以在 android 应用程序中禁用 facebook。选择此选项后，Facebook 状态变为关闭。当我再次使用该选项时，重新登录 API 在回调函数中的 OPENING 处挂起。

根据我发现第一个调用使用的示例

```
session.openForRead(new Session.OpenRequest(activity).setCallback(statusCallback)); 
```

和第二种用途

```
Session.openActiveSession(activity, true, statusCallback); 
```

回调函数如下所示：

```
private static class SessionStatusCallback implements Session.StatusCallback {
    // callback when session changes state
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {
            // make request to the /me API
            Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                // callback after Graph API response with user object
                @Override
                public void onCompleted(GraphUser user, Response response) {
                    if (user != null) {
                        GlobalVars.setUser(user.getName());
                        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(GlobalVars.getContext());
                        Editor editor = prefs.edit();
                        editor.putBoolean("facebook", true);
                        editor.commit();
                        System.out.println("facebook logged in");
                    }
                }
            });
        }
        System.out.println("facebook session state callback " + session.getState().toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T04:11:15.917

我不确定我们是否有确切的问题，但我的 facebook 会话状态在`Session.openActiveSession(activity, true, statusCallback);`. 我已经覆盖了`onActivityResult()`我的片段内部。我为解决这个问题所做的就是在我的 Activity 上覆盖该方法。

相关答案：[https ://stackoverflow.com/a/13888652/782870](https://stackoverflow.com/a/13888652/782870)

# doctrine-orm - Doctrine Query Builder, CASE WHEN in ORDER BY

> ID：15194888
> 
> 赞同：4
> 
> 时间：2013-03-04T05:03:24.427
> 
> 标签：doctrine-orm, doctrine-query

我正在尝试在 Native SQL 中像这样使用 ORDER BY 进行查询

```
ORDER BY CASE `promotion` WHEN 0 THEN `net_price`
   ELSE `promotion_price`
  END DESC, `net_price` DESC 
```

像这样的东西

```
$qb->orderBy('CASE `products.promotion` WHEN 0 THEN `products.net_price`
   ELSE `products.promotion_price`
  END', 'DESC');
$qb->orderBy('products.net_price', 'DESC'); 
```

不起作用，我收到意外情况的错误。

所以我尝试了这个：

```
$qb->addSelect('CASE products.promotion WHEN 0 THEN products.net_price ELSE products.promotion_price END price');
$qb->orderBy('products.price', 'DESC'); 
```

这次我明白了

```
'promotion WHEN': Error: Invalid PathExpression. Must be a StateFieldPathExpression. 
```

在这两种情况下，我都试图把它放在括号中，因为我发现很少有帖子说它有帮助，不幸的是，它只是在第一种情况下将错误消息更改为意外

```
Error: Expected Doctrine\ORM\Query\Lexer::T_FROM, got ')' 
```

第二个。

问题是：是否可以使用学说查询生成器在 ORDER BY 中使用条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:20:05.803

该`CASE`构造是特定于供应商的，默认情况下不是 Doctrine 2 的一部分。但是，您可以查看[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)。您可以将[IfElse](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/IfElse.php)函数用于您的用例。

# javascript - 如何为three.js 编写单元测试？

> ID：15194893
> 
> 赞同：7
> 
> 时间：2013-03-04T05:03:48.603
> 
> 标签：javascript, unit-testing, three.js, webgl

本质上，我要问的是，有没有办法为我的 JavaScript 文件编写单元测试，以用于 three.js 库？

我有一个 3D 查看器，里面装有摄像头、渲染器、加载器等……我该如何为这样的东西编写测试？有什么我可以阅读的吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-05T15:13:57.177

我找到了一种以无头方式对 webgl/threejs 进行单元测试的方法。这不需要任何图像比较等。

[https://github.com/AmitTeli/webgl-three-test](https://github.com/AmitTeli/webgl-three-test)

采取的方法：

1.  **将场景**、**渲染器**和**相机**等所有**全局变量**移动到*index.html*
********   在加载页面时初始化它们。例如，在这个 reactjs 示例中，它们在根组件的*componentDidMount()中初始化。*其他函数可以使用此上下文。（您可以通过运行来检查**`yarn start`**）*   在进行单元测试时，在*setupTest.js*中初始化它们。我们将需要无头 webgl 的额外开发依赖项 - **gl**和**canvas***   现在有了这个设置，我们可以在*App.test.js*中运行测试（你可以通过运行来检查**`yarn test`**）*******

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T13:32:27.527

您可以测试预期状态的属性，也可以使用 chromium 等无头浏览器来呈现预期和实际图像。如果你搜索 testing WebGL，你会发现后者的例子*****

# php - 使用 Silex 进行灵活的动态路由

> ID：15194894
> 
> 赞同：4
> 
> 时间：2013-03-04T05:03:49.087
> 
> 标签：php, symfony, routing, silex

获取请求是否可以有未知数量的参数？

例如，这可行，但并不理想。

```
$app->get('/print/{template}/{arg1}/{arg2}', function ($template, $arg1, $arg2) use ($app)     {
  $str = $template . " " . $arg1 . " " . $arg2;
  return $str;
})
->value('template', FALSE)
->value('arg1', FALSE)
->value('arg2', FALSE); 
```

我想要的是为模板变量之后输入的任何内容返回的参数数组。我看不到需要超过 4 或 5 个参数，但我希望从一开始就尽可能灵活。

理想情况下，我想做这样的事情，

```
$app->get('/pdf/{template}/{args[]}', function ($template, $args) use ($app) {
  $str = $template;;
  foreach($args as $arg)
    $str .= " " . $arg;

  return $str;
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T02:16:08.393

如果你真的想要，你可以通过放宽对变量的要求来轻松解决这个限制。您可以[通过使用`assert`](http://silex.sensiolabs.org/doc/usage.html#requirements)来做到这一点：

```
$app->get('/pdf/{template}/{args}', function ($template, $args) {
    ...
})
->assert('args', '.*')
->convert('args', function ($args) {
    return explode('/', $args);
}); 
```

通过使`$args`正则表达式更加宽松，它将匹配字符串的其余部分，即使它包含斜杠。然后，参数转换器将匹配的字符串拆分为段。

一般来说，我同意@Sgoettschkes 的建议，为此使用查询字符串参数。如果您需要具有灵活段的高度动态路由，那么在大多数情况下您都做错了。查询字符串通常更适合这些参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T12:24:18.190

据我所知，路由组件不支持开箱即用。

我稍微研究了一下代码，得出的结论是添加这样的路线会很困难。路由的工作方式是在匹配完成之前注册每个路由，因此路由必须存在。这意味着不能有“通配符路线”。

我不知道您是否考虑到了这一点，但是您始终可以通过“真实”获取参数传递尽可能多的信息：

`/print/template?optional1=arg&optional2=arg`

这将解决您的问题，并且无需任何修改即可工作。

您可以处理此问题的另一种方法是注册一个 before 事件，自己查看请求并修改它。例如，您可以用 / 分割整个 url，查看模式是否与您预期的格式匹配，然后将所有可选参数放入一个参数中，并在其间使用特殊字符分隔符。我不建议这样做，但这是可能的。

另一种处理方法是注册您自己的 ControllerCollection，获取实际请求并注册与实际请求匹配的路由，以防有可选参数。我猜这会更干净一些。

解决这个问题的一种方法可能是前端。如果您的请求总是将附加参数放入最后一个参数中，中间有一个特殊字符，您可以读取最后一个参数，将其拆分并使用：

`/print/template/arg:arg`

你可能会是这样的：

```
$app->get('/print/{template}/{args}', function ($template, $args) use ($app)     {
  $args = explode(':', $args);
  $str = $template . " " . $args[0] . " " . $args[1];
  return $str;
})
->value('template', FALSE)
->value('args', FALSE); 
```

我会选择想法 1 或 4，主要是因为随着时间的推移，2 和 3 会变得非常混乱，而且看起来不是很干净。

# android - Android - 在主屏幕上创建小部件

> ID：15194896
> 
> 赞同：0
> 
> 时间：2013-03-04T05:03:58.647
> 
> 标签：android, android-layout, widget, android-imageview

我想从 url 加载图像，以及图像下方显示的文本。像这样，

![小部件示例](../Images/29d55ca7f56c1b194ca48d166bfb044b.png)

1.  ImageView 和 TextView 上的对齐，这是我的代码，但没有显示所需的布局

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00FFFF"
        android:padding="0.1dp">

    <TextView android:text="@string/widgetUrl"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
    android:layout_gravity="center_vertical"
    android:textColor="#000000">
    </TextView>
    <TextView android:text="@string/widgetTitle"
    android:id="@+id/widgetTitle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
    android:layout_gravity="center_vertical"
            android:layout_alignParentBottom="true"  
            android:layout_centerHorizontal="true"
    android:textColor="#ffffff">
    </TextView>
    <ImageView android:id="@+id/widgetBackground"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:src="@drawable/ic_launcher"
    android:layout_gravity="center_vertical">
    </ImageView>

    </LinearLayout> 
    ```

2.  如何从 web 加载图像并在 java 代码中的布局上显示？以下是我的小部件提供程序代码：

    ```
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    Log.i(WIDGETTAG, "onUpdate");

    final int N = appWidgetIds.length;

    // Perform this loop procedure for each App Widget that belongs to this provider
    for (int i=0; i<N; i++) {
        int appWidgetId = appWidgetIds[i];

        Log.i(WIDGETTAG, "updating widget[id] " + appWidgetId);

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

        /* View setup */
        views.setInt(R.id.widgetTitle, "setBackgroundColor", Color.argb(150, 0, 0, 0));

        Intent intent = new Intent(context, ChopInkService.class);
        intent.setAction(ChopInkService.UPDATE_IMAGE);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, 0);

        views.setOnClickPendingIntent(R.id.widgetBackground, pendingIntent);
        Log.i(WIDGETTAG, "pending intent set");

        // Tell the AppWidgetManager to perform an update on the current App Widget
        appWidgetManager.updateAppWidget(appWidgetId, views);
    } 
    ```

3.  **Service**和**AppWidgetProvider**的工作是什么？

    *   从 url 加载图像是**service**还是**AppWidgetProvider**的工作？
    *   视图设置应该投入**服务**还是**AppWidgetProvider**？
4.  当用户点击小部件时，如何将用户重定向到播放商店？

先谢谢了。我是新手，如果我问了一个愚蠢的问题，请道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:42:32.000

**Available Widget views & Layout**

A **widget** is restricted in the View classes it can use. As layouts you can use the **FrameLayout, LinearLayout** and **RelativeLayout** classes. As views you can use AnalogClock, Button, Chromometer, ImageButton, ImageView, ProgressBar and TextView.

As of Android 3.0 more views are available: **GridView, ListView, StackView, ViewFlipper and AdapterViewFlipper.** This adapter Views require that you define a collection view widget which is described later in this tutorial.

The only interaction that is possible on the Views of a Widget is via on OnClickListener. This OnClickListener can be registered on a widget and is triggered by the user.

**AppWidgetProvider**

Your **BroadcastReceiver** typically extends the **AppWidgetProvider** class.

The AppWidgetProvider class implements the **onReceive()** method, extracts the required information and calls the following widget lifecycle methods.

As you can add several instances of a widget to the homescreen you have lifecycle methods which are called only for the first instance added / removed to the homescreen and others which are called for every instance of your widget.

**Lifecycle of Widget**

**onEnabled()** -Called the first time an instance of your widget is added to the homescreen

**onDisabled()** -Called once the last instance of your widget is removed from the homescreen.

**onUpdate()** -Called for every update of the widget. Contains the ids of appWidgetIds for which an update is needed. Note that this may be all of the AppWidget instances for this provider, or just a subset of them, as stated in the methods JavaDoc. For example if more than one widget is added to the homescreen, only the last one changes (until reinstall).

**onDeleted()** -Widget instance is removed from the homescreen

All long running operations in these methods should be performed in a service, as the execution time for a broadcast receiver is limited. Using asynchronous processing in the onReceive() method does not help as the system can kill the broadcast process after his onReceive() method.

For more details about widget check [How to create widget in Android?](http://www.vogella.com/articles/AndroidWidgets/article.html)

[Tutorial1](http://kasperholtze.com/android/how-to-make-a-simple-android-widget/)
[Tutorial2](http://code.google.com/p/android-sky/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:17:38.523

嗨，您可以查看本**[教程](https://code.google.com/p/url-image-widget/)**以从 URL (Http) 加载图像。

试试下面的代码：

URL 图像小部件提供程序类

```
public class URLImageAppWidgetProvider extends AppWidgetProvider {
    public static String TAG = "URLImageWidget";

    public static class Size_1_1 extends URLImageAppWidgetProvider {}
    public static class Size_1_2 extends URLImageAppWidgetProvider {}
    public static class Size_1_4 extends URLImageAppWidgetProvider {}
    public static class Size_2_2 extends URLImageAppWidgetProvider {}

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                    int[] appWidgetIds) {
            super.onUpdate(context, appWidgetManager, appWidgetIds);

            SharedPreferences urls = context.getSharedPreferences("urls.conf", Context.MODE_PRIVATE);
            for (int id : appWidgetIds) {
                    String url = urls.getString("url_" + id, "");
                    update(context, appWidgetManager, id, url);
            }       

    }

@Override
public void onDeleted(Context context, int[] appWidgetIds) {
    super.onDeleted(context, appWidgetIds);

    SharedPreferences urls = context.getSharedPreferences("urls.conf", Context.MODE_PRIVATE);
    SharedPreferences.Editor urls_editor = urls.edit();
            for (int id : appWidgetIds) {
                    urls_editor.remove("url_" + id);
            }

            urls_editor.commit();

}

    public static void update(final Context context, final AppWidgetManager appWidgetManager, final int id, final String url) {
            new Thread() {
                    public void run() {
                            Bitmap img = getBitmapFromUrl(url);
                            if (img != null) {
                                    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.main);
                                    views.setImageViewBitmap(R.id.img, img);
                                    appWidgetManager.updateAppWidget(id, views);    
                            }
                    }
            }.start();
    }

private static Bitmap getBitmapFromUrl(final String url) {
    try {
            return BitmapFactory.decodeStream(((java.io.InputStream)new java.net.URL(url).getContent()));
    } catch (Exception e) {
            return null;
    }

   }
 } 
```

这是 URL 图像小部件配置类

```
 public class URLImageAppWidgetConfiguration extends Activity {
    private int id;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.configuration);
        setResult(RESULT_CANCELED);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {
            id = extras.getInt(
                    AppWidgetManager.EXTRA_APPWIDGET_ID, 
                    AppWidgetManager.INVALID_APPWIDGET_ID);
        }

        if (id == AppWidgetManager.INVALID_APPWIDGET_ID) {
        finish();
    }

    }

    public void addWidget(View v) {
            SharedPreferences urls = getSharedPreferences("urls.conf", Context.MODE_PRIVATE);
            SharedPreferences.Editor urls_editor = urls.edit();

            String url = ((TextView) findViewById(R.id.url)).getText().toString();
            if (!url.startsWith("http://")) url = "http://" + url;
            urls_editor.putString("url_" + id, url);
            urls_editor.commit();

            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
            URLImageAppWidgetProvider.update(this, appWidgetManager, id, url);

    setResult(RESULT_OK, 
                      new Intent().putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, id)
    );
    finish();
    }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:18:02.487

看到这个。

[如何在单个应用程序中使用应用程序小部件创建 android 应用程序](https://stackoverflow.com/questions/15038385/how-to-create-android-app-with-app-widget-in-single-application)

如果您发现任何问题，这对您很有帮助，请告诉我。

# c# - 将参数从文本文件传递到控制台应用程序？

> ID：15194897
> 
> 赞同：1
> 
> 时间：2013-03-04T05:04:00.507
> 
> 标签：c#, .net

从文件传递控制台输入。

我在这里使用控制台传递了两个文件路径，但我不希望用户打开控制台应用程序并复制粘贴路径，而不是我想要一个配置文件，我可以在其中设置我在下面输入的路径。

如何从文本文件传递参数并只执行控制台应用程序？

```
 Console.Write("Enter Error File Path: ");
        string errorfilepath = Console.ReadLine();
        string[] ErrorFile = System.IO.File.ReadAllLines(errorfilepath);

        Console.Write("Enter Archive File Path: ");
        string archivefilepath = Console.ReadLine();
        string[] ArchiveFile = System.IO.File.ReadAllLines(archivefilepath);

        Furthur processing which is working fine.. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T05:09:54.313

对于你想要完成的事情，你有很多很多的选择。

我建议[在 Visual Studio 中提供您的应用程序设置](http://msdn.microsoft.com/en-us/library/wabtadw6.aspx)。这将在 App.config 中创建适当的条目，您可以在其中输入所需的两个文件路径。

然后，在您的程序中，您可以使用以下代码读取配置的路径：

```
string errorfilepath = Properties.Settings.Default.ErrorFilePath; 
```

如果用户想要更改您提供的默认值，他们可以编辑 App.config（实际上将命名为 YourAppName.exe.config）。

app.config 文件将包含如下所示的行：

```
<applicationSettings>
    <MyProgram.Properties.Settings>
      <setting name="ErrorFilePath" serializeAs="String">
        <value>C:\Temp\MyErrorFile.txt</value>
      </setting>
    </MyProgram.Properties.Settings>
</applicationSettings> 
```

*注意：您必须添加对 System.Configuration 的引用才能执行此操作。*

# iphone - iOS：在我的代码中硬编码 AES 密钥是否安全？

> ID：15194898
> 
> 赞同：8
> 
> 时间：2013-03-04T05:04:28.413
> 
> 标签：iphone, ios, encryption, aes

我有一个项目需要用 AES 加密一些数据。但是，我在我的项目中硬编码 AES 密钥，如下所示：

```
NSString *passwd = @"someStringAsKey";
NSData *encryptedData = [Encrypter encrypteData:unencryptedData]; 
```

如果有人想破解我的二进制文件以找到我硬编码的 AES 密钥，这容易吗？如果是，那么存储 AES 密钥的更好方法是什么？

**编辑：** 密钥用于加密和解密一大块数据，应用程序从服务器下载数据，然后应用程序对其进行加密并将加密数据保存在磁盘上。此密钥在每个设备上使用，这意味着每个设备都可以拥有自己的密钥，只要每次应用程序运行时，它都知道如何生成密钥。

**EDIT2：** 数据下载过程受到这种方式的保护：客户端每次登录时都会生成一个随机的私钥/公钥对。它将公钥发送到服务器，服务器使用公钥加密AES密钥，然后将加密的AES密钥发送给客户端。客户端解密 AES 密钥并将其放入内存。然后客户端和服务器传输由该 AES 密钥加密的数据。

我的目标是保护磁盘上的数据不被黑客解密。我假设黑客能得到的是我在磁盘上的二进制图像和数据。黑客也可以在他自己的设备上运行我的应用程序并分析内存。

我不需要保护这种攻击：黑客太聪明了，他编写了一个在越狱设备上运行的病毒，该病毒可以分析我的应用程序的运行内存以搜索内存中的某些密钥。所以我们不必担心网络传输的安全性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T05:36:41.007

是的，它很可能很容易找到。事实上，不可能以完全安全的方式在本地存储密钥。您希望做的最好的事情就是混淆并使其不值得潜在攻击者的努力。例如，将密码存储在包含一堆垃圾字母的文件中，然后在内存中挑选出正确的密码。说密码是“密码”：

efgwhi **p** buobgweu **a** egiwhip **s** iph **s** hipwgie **w** hp **o** neifgwnp **r** ipndpa **d**（我没有做任何广泛的研究，但我认为*Blowfish*在内存缓冲区上使用了类似的技术）

您可以将这样的大字符串存储为您想要的任何编码（一个晦涩的编码会更好），然后选择您想要的位。我能看到的唯一问题是您必须将它存储在内存中，如果它在内存中，那么据我所知，一个有决心的人可以通过 GDB 或 LLDB 获取它。为了让这更烦人，请避免将密码存储在内存中`NSString`（尽量使用`NSData`）。不过，它必须非常值得。最后，不幸的是，您的数据在 iOS 设备上永远不会安全。

最好的情况是该文件位于服务器上。您下载文件，对它施展魔法，将密码存储在钥匙串中，然后删除文件。从那时起，只需使用钥匙串值。

请注意，我不是安全专家，这只是我想到的第一个想法。

**编辑**我在假设您有预加密数据的情况下工作。如果您的应用程序正在加密来自服务器的数据，那么是什么阻止攻击者简单地从服务器下载数据？好吧，假设您为此设置了一些系统，则可以像其他一些答案所说的那样生成一个密钥，然后将其以混淆的形式存储在钥匙串中。这样即使攻击者得到它，他们也不会知道如何处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T05:37:11.387

作为字符串卡在那里，并且没有任何其他保护，在二进制文件中找到密钥将是*微不足道的。*某人所需要的只是一个符号调试器，和/或大致了解密钥应该是什么样子的一个体面的想法（它应该有多大，以及有效值的范围）。

iOS 显然内置了一些安全功能，您可以将敏感数据存储在恶意应用程序无法触及的范围内。问题是，其中很大一部分似乎假设设备正在按预期运行。在越狱设备上运行的代码可能仍然可以获取大部分（如果不是全部）数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T05:42:36.857

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

This method is called only once when launching the application So create your random key:

```
-(NSString) generateKey{
       char data[NUMBER_OF_CHARS];
        for (int x=0;x<NUMBER_OF_CHARS;data[x++] = (char)('A' + (arc4random_uniform(26))));
        return [[NSString alloc] initWithBytes:data length:NUMBER_OF_CHARS encoding:NSUTF8StringEncoding];
} 
```

# php - 如何将输入值转换为会话变量？

> ID：15194899
> 
> 赞同：-3
> 
> 时间：2013-03-04T05:04:34.903
> 
> 标签：php

我只想知道如何将输入值（例如电子邮件）转换为会话

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:07:27.653

```
session_start(); // at the beginning of your code.
$_SESSION['email'] = $email; // if the variable already initiated.

$_SESSION['email'] = $_POST['email']; // coming from HTML FORM with method = POST
$_SESSION['email'] = $_GET['email']; // coming from HTML FORM with method = GET 
```

然后，转到另一个 php 文件并执行此操作

```
session_start();
$email = $_SESSION['email']; 
```

如果您需要随时销毁会话。你需要取消设置会话

```
unset($_SESSION['email']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T05:06:26.530

```
session_start();

$_SESSION['email'] = $_POST['email']; 
```

**或者**

```
$_SESSION['email'] = $_GET['email']; 
```

**或者**

```
$_SESSION['email'] = $_REQUEST['email']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T05:15:20.667

看起来你需要给自己买一本好的 php 书，并阅读大量内容。

只是为了让您朝着正确的方向前进，首先，输入将在 $_GET 或 $_POST 超全局变量中可用，请参阅：

*   [http://www.php.net/manual/en/reserved.variables.get.php](http://www.php.net/manual/en/reserved.variables.get.php)
*   [http://www.php.net/manual/en/reserved.variables.post.php](http://www.php.net/manual/en/reserved.variables.post.php)

其次，确保您需要写入会话或从会话读取的每个页面都有 session_start() 调用： http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

最后，会话变量可通过 $_SESSION 超全局变量获得：[http](http://www.php.net/manual/en/reserved.variables.session.php) ://www.php.net/manual/en/reserved.variables.session.php 。

因此，此时，您可以将输入写入会话，如下所示：

```
session_start();
$_SESSION['email'] = $_GET['email']; // assuming your email came in a GET request 
```

在另一个页面中，您可以像这样读取会话变量：

```
session_start();
$local_variable_email = $_SESSION['email']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T05:15:02.347

**您的输入类型：**

```
<input type="text" name="email" /> 
```

*然后*

```
session_start();
$_SESSION['email'] = $emailvariable;  
$emailvariable = $_POST['email'];

  //email is the name you assigned in your input type. 
  //emailvariable is any variable you want to assign. 
```

*在你的不同页面*

```
session_start();
$emailvariable = $_SESSION['email'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T06:15:48.530

```
 session_start();  
if(isset($_POST['email']){
  $_SESSION['email'] = $_POST['email'];
}

OR
if(isset($_GET['email']){
  $_SESSION['email'] = $_GET['email'];
}
OR

if(isset($_REQUEST['email']){
  $_SESSION['email'] = $_REQUEST['email'];
} 
```

# javascript - 当焦点不在 div 编辑器中时，将文本插入编辑器

> ID：15194901
> 
> 赞同：0
> 
> 时间：2013-03-04T05:04:48.950
> 
> 标签：javascript

我想在编辑器中插入一些文本。但焦点不在编辑器内部（div contenteditable="true"）。如何在显示光标之前插入文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:37:28.097

这对我有用，在这种情况下，编辑器是`div`您正在使用的 html 元素。

```
editor.innerHTML = 'my new content' 
```

# html - XPath：在具有特定子项的 trs 之间选择 trs

> ID：15194907
> 
> 赞同：0
> 
> 时间：2013-03-04T05:05:17.180
> 
> 标签：html, xpath

我不明白。

我有一个网页是这样的：

```
<table>
  <tr>
    <td attr="somevalue"></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td attr="somevalue"></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td attr="somevalue"></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
</table> 
```

所以，我需要选择 tr 之间的所有 tr 与子 td 和 attr (td[@*])，或者在这样的 tr 之后，如果它是最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:47:48.667

也许只是得到所有没有attr“somevalue”的td？

```
"//td[not(@attr='somevalue')]" 
```

# jquery - PhoneGap，Jquery List 单击时我需要运行一些javascript

> ID：15194908
> 
> 赞同：0
> 
> 时间：2013-03-04T05:05:21.333
> 
> 标签：jquery, listview, cordova, onclick

我有一个 phonegap 应用程序设置，它有几个“页面”元素。我想做的是当用户单击 ListView 中的链接以将内容加载到我的一个名为“fullview”的“页面”中时

目前我正在从 JSON 请求构建列表视图，然后更新“a href”标签

```
 $.each(json.posts, function(i,item){
        $('#news_link').attr("href",item.link)
    }); 
```

最好的方法是什么？为了更新 a href 标记，我想调用一些 JS，然后将链接的内容加载到名为“fullview”的内部页面中

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:08:34.813

您可以使用 jquery 在单击功能上调用脚本，

```
$(function(){
      $('#yourelement').click(function (){
                // your code goes here
      })
}) 
```

# php - 将过期时间插入数据库并在另一页上倒计时

> ID：15194909
> 
> 赞同：0
> 
> 时间：2013-03-04T05:05:21.360
> 
> 标签：php, mysql, datetime

我正在尝试创建一个我知道何时创建帖子的东西，然后在我的数据库中插入一个未来 4 小时的时间......

然后我有另一个页面列出了所有帖子并显示了到期日期的倒计时......

我使用当前时间（），然后将其与数据库中帖子的到期时间进行比较，以得出倒计时中剩余的小时、分钟和秒数。但是我遇到了麻烦……我打开电脑查看倒计时，然后在我朋友的电脑上看到一个完全不同的数字。

服务器时间有什么不同吗？或者是什么？

基本上这就是我的数据库中的内容

帖子标题->“我的帖子标题”时间到期-> 13:50:02

然后我有我的 display_post.php：

```
while ($allQuestions = mysql_fetch_array($r)){
   $now = new DateTime(date("G:i:s",time()));
   $exp = new DateTime($allQuestions['time_expires']);
   $diff = $now->diff($exp);
   printf('%d hours, %d minutes, %d seconds', $diff->h, $diff->i, $diff->s);
} 
```

我不知道这是如何完成的......我也可能在插入新帖子时遇到麻烦，这里的代码是：

```
$time_created = date("h:i:s",time());
$time_expires = date("h:i:s",time()+(4*3600));
$query = "INSERT into questions (time_created, time_expires)VALUES('".$time_created."', '".$time_expires."')";
mysql_query($query) or die(mysql_error()); 
```

那么我将如何制作它以便用户可以插入一个新帖子，然后他/她（以及不同时区的其他人）去页面看看还有多少时间直到它过期（创建后 4 小时）？

处于不同时区也会影响倒计时中显示的这个数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:11:31.140

差异是由于在大多数情况下看到的时区。请在设置时区校正后尝试并执行以下操作：

```
$timezone = "Asia/Calcutta";
if(function_exists('date_default_timezone_set'))
   date_default_timezone_set($timezone); 
```

我正在使用上面的代码。要了解您的时区，请访问[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

还发现您没有在代码中添加秒数：

```
$time_expires = date("h:i:s",time() + 60*60*4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T05:12:34.317

您的代码将当前时间增加 4 秒

```
$time_expires = date("h:i:s",time()+4); 
```

如果您需要增加 4 小时，那么您的代码必须是这样的：

```
$time_expires = date("h:i:s",time()+14400); 
```

另外，您需要设置时区，您不会收到 php 警告吗？

```
date_default_timezone_set("UTC"); // is referring to the GMT timing 
```

因此，根据 UTC 进行所有计算，一切都应该没问题。

**编辑：使用 MYSQL 使您的 php 代码简单。**

而不是使用这个：

```
$time_created = date("h:i:s",time());
$time_expires = date("h:i:s",time()+(4*3600));
$query = "INSERT into questions (time_created, time_expires)VALUES('".$time_created."', '".$time_expires."')";
mysql_query($query) or die(mysql_error()); 
```

用这个：

```
$query = "INSERT into questions (time_created, time_expires) 
    VALUES(CURTIME(),CURRENT_TIMESTAMP + INTERVAL '4' HOUR)"

mysql_query($query) or die(mysql_error()); 
```

* * *

另一件事是您与数据库的连接

> mysql_connect 这个扩展自 PHP 5.5.0 起已弃用，并将在未来被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。

如果您需要了解有关 PDO 的更多信息，请单击[此处](http://www.php.net/manual/en/pdo.construct.php)

# ruby-on-rails - 我们可以从 Rails Observer 的这段代码中知道什么？

> ID：15194910
> 
> 赞同：1
> 
> 时间：2013-03-04T05:05:34.200
> 
> 标签：ruby-on-rails, observers

我是 Rails 新手，正在阅读一些 Rails 代码：[https ://github.com/discourse/discourse/blob/master/app/models/user_action_observer.rb#L1](https://github.com/discourse/discourse/blob/master/app/models/user_action_observer.rb#L1)

```
class UserActionObserver < ActiveRecord::Observer
  observe :post_action, :topic, :post, :notification, :topic_user

  def after_save(model)
    puts 'do something'
  end
end 
```

我们可以从这段代码中知道什么？例如

1.  因为它的名字是`UserActionObserver`，所以它是模型的观察者`UserAction`？
2.  它观察到：`:post_action, :topic, :post, :notification, :topic_user`，这些字段是什么意思？将被创建或只是对其他模型的某些字段的一些引用？
3.  `after_save`什么时候调用该方法，`model`参数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:09:54.437

观察者类名称可以是任何名称。真正重要的是这条线

```
observe :post_action, :topic, :post, :notification, :topic_user 
```

它观察在 PostAction、Topic、Post、Notification 和 TopicUser 下创建的对象

在`after_save`创建和更新记录后调用。传递的参数是所涉及的实际对象，因此它可以是 5 个观察模型中的任何一个的实例。`model`用作参数名称有点误导，因此您应该将其更改为类似`record`

更新：来自 api

默认情况下，观察者将映射到与其共享名称的类。所以 CommentObserver 将被绑定到观察 Comment，ProductManagerObserver 到 ProductManager，等等。如果你想以不同于你感兴趣的类的方式命名你的观察者，你可以使用 Observer.observe 类方法，该方法采用具体类 (Product) 或该类的符号 (:product)

# .htaccess - PHP - Htaccess - 比较两个 URL 1 屏蔽，禁用一个

> ID：15194913
> 
> 赞同：1
> 
> 时间：2013-03-04T05:05:47.963
> 
> 标签：.htaccess, url, parameters, seo, mask

我一直在搜索所有问题并浏览，但没有找到任何解决方案。希望这里的任何人都可以回答我的问题。

我们知道我们屏蔽 URL 的方式，我使用这个：RewriteRule ^([^/]+).htm$ index.php?m=$1 [L]

这将意味着： **www.url.com/home.html** => **www.url.com/index.php?m=home**

我的问题是 SEO，www.url.com/index.php?m=home 已被缓存到谷歌，但我希望 seo 友好的链接而不是带有参数的链接被缓存到谷歌。

不，我的问题是“是否可以**禁用***www.url.com/index.php?m=home*的链接，所以当客户端在地址栏中输入它时，它不会显示任何内容或跳转到主页，而链接*www.url.com/home.html*还显示主页吗？”

任何帮助将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:18:18.713

处理它的最佳方法是在`htaccess`当前规则之前捕获查询字符串，并将其更改为新的 URI：

```
RewriteCond %{QUERY_STRING} ^m=([a-z0-9]+)$
RewriteRule ^(.*)$ %1.html? [R=301,L] 
```

这将抓取传递给 的任何内容`m`，并将其重定向到`.html`等效项。

# ios - iphone SDK中的排序数组

> ID：15194914
> 
> 赞同：-1
> 
> 时间：2013-03-04T05:05:51.547
> 
> 标签：ios, objective-c, cocoa-touch, sorting

在我的应用程序中，我有两个数组名称`listofevents`& `arr_Distance`。

**事件列表如下所示：**

```
(
    {
        Latitude = "34.1356031";
        Longitude = "-118.0312634";
        VenueName = "Fantasia Billiard";
    }, {
        Latitude = "34.1356031";
        Longitude = "-118.0312634";
        VenueName = "Dave & Busters";
    }
) 
```

**arr_distance 看起来像**

`( 54985.5455,54985.5455 )`

我已经根据 JSON 响应中给出的纬度和经度计算了距离。在这里，我想按距离递增的顺序显示列表，所以我按照以下代码对两个数组进行了排序

**用于排序**

```
NSDictionary *dict = [NSDictionary dictionaryWithObjects:listOfEvents forKeys:arr_distance];
sortedArray = [arr_distance sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}];
sortedValues = [NSMutableArray array];

for (NSString *key in sortedArray) {
    [sortedValues addObject:[dict valueForKey:key]];
} 
```

**问题**

但我的问题是，当两个距离相同且场地名称不同时，它**只会显示第一个场地名称两次。**

我没有找到我的问题。帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:15:40.480

您将距离用作键，但每个键都必须是唯一的。由于您具有相同的距离，因此后面的对象到键将覆盖第一个对象。

我认为最好的解决方案是创建一个自定义类，它包含每个条目，您还可以添加一个属性`distance`并按其排序。

```
@interface Entry : NSObject
@property (strong) NSString *longitude
@property (strong) NSString *latitude
@property (strong) NSString *name
@property double distance;
@end 
```

做

```
NSMutableArray *listOfEntries = [NSMutableArray array];
[listofevents enumerateObjectsUsingBlock:^(NSDictionary *dict, NSUInteger idx, BOOL *stop) {
    Entry *entry = [[Entry alloc] init];
    entry.latitude = [dict objectForKey:@"Latitude"];
    entry.longitude = [dict objectForKey:@"Longitude"];
    entry.name = [dict objectForKey:@"VenueName"];
    entry.distance = DistanceBetweenPoints(currentLocation, CGPointMake(entry.latitude,entry.longitude));
    [listOfEntries addObject:entry];
}];

[listOfEntries sortUsingComparator:
      ^NSComparisonResult(Entry *obj1, Entry *obj2){
            return obj1.distance > obj2.distance;
    }
]; 
```

* * *

另一种选择是将名称作为字典中的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:37:43.570

你可以试试下面的代码。我稍微修改了我之前的解决方案以避免使用字典。较早的字典建议纯粹基于密钥将是唯一的假设，而现在看来并非如此。所以你可以试试这个：

```
NSArray *a = @[@"353.90", @"354.68", @"354.68", @"1.18"];
NSArray *b = @[@{ @"Contestant1":@"Jon jones1",
    @"Contestant2":@"Anderson silva1"},
      @{ @"Contestant1":@"Jon jones2",
         @"Contestant2":@"Anderson silva2"},
      @{ @"Contestant1":@"Jon jones3",
         @"Contestant2":@"Anderson silva3"},
      @{ @"Contestant1":@"Jon jones4",
         @"Contestant2":@"Anderson silva4"}];

NSArray *sortedArray = [a sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}];

NSArray *sortedValues = [b sortedArrayUsingComparator:^(id firstObject, id secondObject) {

    id obj1 = [a objectAtIndex:[b indexOfObject:firstObject]];
    id obj2 = [a objectAtIndex:[b indexOfObject:secondObject]];

    return [((NSString *)obj1) compare:((NSString *)obj2) options:NSNumericSearch];
}];

NSLog(@"%@",sortedArray);
NSLog(@"%@",sortedValues); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:14:52.910

问题很简单。在字典中，每个键都应该是唯一的。在你的情况下，它不是。

你的钥匙：**54985.5455 和 54985.5455**，都是一样的。这就是问题发生的原因。改变其中一个，它会像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T07:27:11.467

您可以根据您的结果进行搜索。我从苹果中发现了以下内容

```
-(NSArray*)SortingArray:(NSMutableArray*)unSortedArray
{
    static NSStringCompareOptions compareOption=NSCaseInsensitiveSearch |NSNumericSearch|NSWidthInsensitiveSearch|NSForcedOrderingSearch;
    NSLocale *locale=[NSLocale currentLocale];
    NSComparator comparatorBlock=^(id  string1, id  string2)
    {
        NSRange string1Range=NSMakeRange(0,[string1 length]);
        return        [string1 compare:string2 options:compareOption range:string1Range locale:locale];
    };
    NSArray *sortedArray=[unSortedArray sortedArrayUsingComparator:comparatorBlock ];
    return sortedArray;
} 
```

您可以使用字符串比较选项。我发现有更多限制搜索的选项

```
NSCaseInsensitiveSearch = 1,
NSLiteralSearch = 2,        /* Exact character-by-character equivalence */
NSBackwardsSearch = 4,      /* Search from end of source string */
NSAnchoredSearch = 8,       /* Search is limited to start (or end, if NSBackwardsSearch) of source string */
NSNumericSearch = 64,       /* Added in 10.2; Numbers within strings are compared using numeric value, that is, Foo2.txt < Foo7.txt < Foo25.txt; only applies to compare methods, not find */
NSDiacriticInsensitiveSearch  /* If specified, ignores diacritics (o-umlaut == o) */
NSWidthInsensitiveSearch  /* If specified, ignores width differences ('a' == UFF41) */
NSForcedOrderingSearch  /* If specified, comparisons are forced to return either NSOrderedAscending or NSOrderedDescending if the strings are equivalent but not strictly equal, for stability when sorting (e.g. "aaa" > "AAA" with NSCaseInsensitiveSearch specified) */
NSRegularExpressionSearch    /* Applies to rangeOfString:..., stringByReplacingOccurrencesOfString:..., and replaceOccurrencesOfString:... methods only; the search string is treated as an ICU-compatible regular expression; if set, no other options can apply except NSCaseInsensitiveSearch and NSAnchoredSearch */ 
```

# css - css 导航子菜单列表样式类型：没有不起作用

> ID：15194915
> 
> 赞同：4
> 
> 时间：2013-03-04T05:06:07.993
> 
> 标签：css, navigation

我正在使用导航栏

list-style-type: none for ul li ul li

不管用。

这是我的CSS代码：

```
nav{
height: 32px;
line-height: 32px;
background: #3B5998;
padding: 0 20px 0 300px;
}

nav a{
list-style-type: none !important;
}

nav h1{
position: absolute;
text-indent:-9999px;
}

nav ul, nav ul li{
margin-left: 20px;
margin-right: 20px;
padding: 0;
}

nav ul li{
float: left;
display: block;
position: relative;
left: 0px;
}

nav ul li a:link, a:visited{
font-size: 13px;
font-style:normal;
font-weight:300;
line-height:18px;
letter-spacing:0px;
color: #CCCCCC;
text-decoration: none;
background-position:0 13px;
}

nav ul li a:hover{
color:#FFFFFF;
background-image:url(../images/link_bg.png);
background-repeat:repeat-x;
background-position:0 13px;
}

nav ul li ul{
position: absolute;
width: 160px;
left: -20px;
background: #FFF;
padding: 0px;
border: solid 1px #2E4B88;
border-top: none;
line-height: 26px;
z-index: 1000;
list-style-type: none;
}

nav ul li ul li{
float: none;
display: block;
margin: 0px;
padding: 0px;
}

nav ul li ul li a:link, nav ul li ul li a:visited{
color: #444;
font-size: 11px;
font-weight: bold;
text-decoration: none;
padding: 0px;
clear: both;
border-bottom: solid 1px #DEDEDE;
}

nav ul li ul li a:hover{
color: #3B5998;
} 
```

和html代码：

```
<nav>
  <ul>
    <li><a href="./introduction/">Introduction</a>
      <ul class="submenu">
        <li><a href="./introduction/ykrf/">YKRF Leadership Forum</a></li>
        <li><a href="./introduction/yonsei/">Yonsei University</a></li>
        <li><a href="./introduction/keio/">Keio University</a></li>
        <li><a href="./introduction/rikkyo/">Rikkyo University</a></li>
        <li><a href="./introduction/fudan/">Fudan University</a></li>
      </ul>
    </li>
    <li><a href="./forums/">Past Forums</a>
      <ul>
        <li><a href="./forumbefore2008/">Before 2008</a></li>
        <li><a href="./forum2008/">2008 Shanghai</a></li>
        <li><a href="./forum2009/">2009 Seoul</a></li>
        <li><a href="./forum2010/">2010 Tokyo</a></li>
        <li><a href="./forum2011/">2011 Fudan</a></li>
        <li><a href="./forum2012/">2012 Seoul</a></li>
      </ul>
    </li>
       </ul>
 </nav> 
```

因此，在 ul with class 子菜单中，所有 li 的前面都有 1.。即使我为 ul li ul li 设置了 list-style-type: none。

我应该在哪里设置 css 属性以删除 1\. ？

该网站位于[http://wafflemaker.kr/ykrf/](http://wafflemaker.kr/ykrf/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:13:39.353

您有以下影响整个 CSS 的 CSS。

```
li li:before {
    content: counter(item, decimal) ". ";
    counter-increment: item;
} 
```

在`forum2011.css (line 20)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:13:56.660

在您的链接站点中，列表样式确实设置为无，并且没有被覆盖。出现`1.`在每个项目之前的 实际来自`content`form2011.css 文件第 20-24 行的 CSS 中的一个属性。为了覆盖它，只需添加以下规则：

```
nav ul li ul li { content: ''; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:25:19.837

```
li li:before {
    content: counter(item, decimal) ". ";
    counter-increment: item;
} 
```

这会将数字添加到您的菜单中

尝试从 forum2011.css 的第 20 行删除或注释该代码。它会起作用的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T05:26:29.770

定义你的**无****`submenu li:before`** `content:"" ;`

 **AS LIKE THIS在你的**样式表中****定义**这个`css`

 **```
.submenu li:before {
content: "";
} 
```

## -----------------

第二个选项是这个

在`css`你的`stylesheet`

**像这样**

```
nav li:before {
content: "";
} 
```****

# asp.net - 单击用户控件中的按钮打开弹出窗口

> ID：15194924
> 
> 赞同：0
> 
> 时间：2013-03-04T05:06:50.970
> 
> 标签：asp.net, popup

我试图通过单击用户控件内部的按钮打开一个窗口，但是当我单击该按钮时该窗口没有打开，该按钮只是消失并且页面挂起。任何人都可以帮助我吗？

我的代码是这样的

```
 <asp:TableCell>
           <asp:ButtonID="btnSearch"Text="Search"OnClientClick="open();"runat="server"/>
    </asp:TableCell>

  <script type = "text/javascript>
     function open() {
    window.open("OnPopUp.aspx");
    return true;
     }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:17:27.113

使用此代码

```
 <asp:TableCell>
       <asp:Button ID="btnSearch" Text="Search" OnClientClick="openwd();" runat="server"/>
  </asp:TableCell>

 <script type = "text/javascript>
   function openwd() {
   window.open("OnPopUp.aspx");
   return false;
   }
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:03:57.083

asp.net 中的用户控件具有扩展名**.ascx**。在你打电话的例子`OnPopUp.aspx`中，它应该是`OnPopUp.ascx`

# .htaccess - .htaccess 更改共享主机

> ID：15194925
> 
> 赞同：2
> 
> 时间：2013-03-04T05:06:58.290
> 
> 标签：.htaccess, opencart

我已将 Godaddy 与基本 (/.) 共享托管作为我的 opencart 商店站点

现在我在共享主机中创建了一个文件夹域并在其中创建了其他网站，例如 /domains/otherwebsitefolder/

当我允许在 .htaccess 中访问基本的主目录（/....）时，.htaccess 将应用于子文件夹域，因此其他站点受到干扰....如何更改 .htaccess 以便它不影响子域文件夹！

我使用带有 htaccess 的 opencart 5.3.2 如下

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess.

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.(tpl|ini|log)">
 Order deny,allow
 Deny from all
</FilesMatch>

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

### Additional Settings that may need to be enabled for some servers 
### Uncomment the commands by removing the # sign in front of it.
### If you get an "Internal Server Error 500" after enabling any of the following settings, restore the # as this means your host doesn't allow that.

# 1\. If your cart only allows you to add one item at a time, it is possible register_globals is on. This may work to disable it:
# php_flag register_globals off

# 2\. If your cart has magic quotes enabled, This may work to disable it:
# php_flag magic_quotes_gpc Off

# 3\. Set max upload file size. Most hosts will limit this and not allow it to be overridden but you can try
# php_value upload_max_filesize 999M

# 4\. set max post size. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value post_max_size 999M

# 5\. set max time script can take. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_execution_time 200

# 6\. set max time for input to be recieved. Uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_input_time 200 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T12:11:06.700

如果要排除用于重写规则的文件夹，请使用此

```
RewriteRule members/ - [L] 
```

正如我在[PHP 中解释的那样：从 URL 重写规则中排除 URL 路径](https://stackoverflow.com/questions/13595160/php-excluding-url-path-from-url-rewrite-rules/13595599#13595599)

您也可能需要将 basedir 更改为

```
RewriteBase /foldername/ 
```

# android - Div 呈现为空

> ID：15194932
> 
> 赞同：2
> 
> 时间：2013-03-04T05:07:55.593
> 
> 标签：android, css

我有一个看起来像这样的页面：

```
<html>
    <body>
        <div id="outer">
            <div id="inner">
                <img width="300" height="250" src="someimage.jpg"/>
            </div>
        </div>
    </body>
</html> 
```

CSS样式是这样的：

```
*{
    margin:0px;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -webkit-user-select: none;
    -webkit-touch-callout: none;
}

body {
    width:100%;
    height:100%;
    background:red;
    overflow:hidden;
}

#outer {
  position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  display:-webkit-box;
  -webkit-box-orient:horizontal;
  -webkit-box-pack:center;
  -webkit-box-align:center;
  overflow:hidden;
  border: 1px solid blue;
} 
```

我得到了很多奇怪的行为：

1.  在 WebView 中初始加载网页时，我看到的只是一条蓝线。`inner`就像div中没有​​图像一样。
2.  在第一次刷新时，WebView 会慢慢扩大到 100% 的高度。它慢慢地显露出来`someimage.jpg`。这就像`outer`div 的动画，因为它慢慢意识到它需要占据整个屏幕。
3.  在所有后续刷新中，不会发生展开动画。一切看起来都很好。

网页的前两次加载中发生了什么？

另一个奇怪的事情是，如果我没有那个蓝色边框，#2 和#3 就不会发生。也就是说，我只被一条蓝线困住，这实际上是折叠的蓝色边框`div`。我不明白为什么我需要边框来`inner`显示 div 的内容。

请注意，我对所有负载都使用相同的 WebView。也就是说，它只是在调用`WebView#loadUrl`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:52:52.253

我想知道为什么它会以这种方式“扩展”：我没有添加带有任何布局参数的 WebView！看来我所有的问题都源于这个小细节。

# wordpress - CKEditor 4 + Wordpress：如何在按钮工具栏中添加“阅读更多”按钮？

> ID：15194935
> 
> 赞同：3
> 
> 时间：2013-03-04T05:08:08.557
> 
> 标签：wordpress, ckeditor, toolbar

我使用 CKEditor 作为我的 WordPress 编辑器。

我自定义了 CKEditor 基本工具栏如下：

> config.toolbar_WordpressBasic = [ ['最大化'，'样式'，'格式']，['粗体'，'斜体'，'Strike'，'RemoveFormat']，['下标'，'上标'，'TextColor'， 'FontSize'], ['JustifyCenter', 'JustifyRight', 'Blockquote'], ['NumberedList','BulletedList', 'Outdent','Indent'], ['Undo','Redo'], ['SpecialChar ', '表格', '来源' ] ];

如何添加按钮以插入 Wordpress 的“阅读更多”标签？我知道 CKEditor 4 已经有这个功能，因为如果我切换“WordPress 完整工具栏”它已经有这样一个按钮。

# javascript - Phonegap 应用程序文本和布局太小

> ID：15194940
> 
> 赞同：51
> 
> 时间：2013-03-04T05:09:52.900
> 
> 标签：javascript, html, css, jquery-mobile, cordova

我最近使用 html、css、javascript 构建了一个 android 应用程序，并通过 phonegap 运行它们来创建实际的应用程序。我在一部手机中遇到的问题之一是文字看起来太小了。还有一些图像也有点小。我添加了一个视口元标记，但它似乎也不起作用。以下是元标记：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" />` 
```

这是它的样子
![这发生在特定手机中（三星 Galaxy）](../Images/530125de49ab16fe603a6eae2d24f9d4.png)

这是它应该看起来的样子：
![这就是它在 htc wildfire 中的样子](../Images/ab2bb542b16ce9f51417c6e3a9982d3a.png)

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-21T10:49:50.840

我有同样的问题并解决了它改变视口。我还认为问题是phonegap，但实际上是用于测试的设备具有不同的dpi。

我的解决方案是将视口上的 target-densitydpi 更改为：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=0" /> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-24T14:24:42.577

我遇到了类似的问题，做了一些我认为值得分享的研究：

*   如前所述，将视口设置`target-densitydpi`为`medium-dpi`(=160dpi)。这将虚拟化`px`单元，例如`1px`在 html/css 中，然后对应于 320dpi 设备上的 2 个物理像素。请注意，图像也被缩放（和模糊）。

    ```
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=medium-dpi" /> 
    ```

*   CSS：使用媒体查询来实现条件样式。根据宽度、高度、纵横比或方向适应不同的屏幕尺寸是直截了当的。可以处理不同的像素密度`device-pixel-ratio`（感谢 Marc Edwards 提供的示例：[https](https://gist.github.com/marcedwards/3446599) ://gist.github.com/marcedwards/3446599 ）。

    ```
    @media screen and (-webkit-min-device-pixel-ratio: 1.5),
           screen and (-o-min-device-pixel-ratio: 15/10)
    {
      body { background-image: ... } /* provide high-res image */
    } 
    ```

    媒体功能`resolution`比 干净`device-pixel-ratio`，但它缺乏移动浏览器支持。

*   Javascript：基于`window.devicePixelRatio`和调整按钮大小、图像`window.screen.width`等`window.screen.height`。每个 Javascript 的布局被认为是不好的做法。由于在事件之后开始执行，因此在加载过程中也可能会导致闪烁`pageload`。

*   `-webkit-image-set`和 image`src-set`可以很容易地为视网膜显示器提供高分辨率图像，请参阅[http://www.html5rocks.com/en/mobile/high-dpi/#toc-bff](http://www.html5rocks.com/en/mobile/high-dpi/#toc-bff)。浏览器支持有限。

    ```
     background-image: -webkit-image-set(
       url(icon1x.jpg) 1x,
       url(icon2x.jpg) 2x
     ); 
    ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-30T10:10:26.483

似乎`target-densitydpi`完全删除会带来最好的结果。

`<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />`

在大多数情况下，这应该足以控制您的应用程序的外观。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-19T17:52:02.690

target-densitydpi=medium-dpi 为我们工作。

场景 当ee 从PhoneGap 2.2 升级到3.3 时遇到这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T12:51:16.197

**更新答案：**适用于**Android**

问题是在 Android 设备上有这个**Accessibilly**设置，您可以尝试更改字体大小（*在 android 设置上**搜索**字体大小***）并再次运行您的应用程序。

**因此，您在应用程序上的字体将根据您的设置进行更改**

[![可访问字体大小](../Images/32d6264a0446cd3796d0afca87938010.png)](https://i.stack.imgur.com/7H3rb.png)

* * *

## 所以这是科尔多瓦的解决方案

**使用：** 禁用**PreferredTextZoom**[的移动可访问性](https://github.com/phonegap/phonegap-mobile-accessibility)

 **在您的 Cordova 项目上安装**移动辅助功能**

```
$ cordova plugin add https://github.com/phonegap/phonegap-mobile-accessibility.git 
```

**JS部分**是这样的：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
   if (window.MobileAccessibility) {
      window.MobileAccessibility.usePreferredTextZoom(false);
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-19T06:59:42.730

对于 Windows Phone (WP8)，我找到了以下解决方案： [https ://github.com/phonegap/phonegap-app-developer/issues/92](https://github.com/phonegap/phonegap-app-developer/issues/92)

1.  添加到 CSS：@-ms-viewport{ 宽度：设备宽度；}
2.  添加到html： `<meta name="viewport" content="width=device-width, initial-scale=1" />`
3.  添加到补丁 IE 10：

    (function() { if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile/10.0/)) { var msViewportStyle = document.createElement("style"); msViewportStyle. appendChild( document.createTextNode("@-ms-viewport{width:auto!important}") ); document.getElementsByTagName("head")[0].appendChild(msViewportStyle); } })();

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-10-03T15:41:10.847

在此处添加此解决方案

对我来说，有些文本渲染得非常大，其他的大小正确。问题在于在 css 中使用 rem 值作为字体大小。出于某种原因，字体大小是基本值（在正文中定义）的元素被渲染得比它们应该的大得多。

解决方法是在整个站点的包装元素中重新分配 rem 字体大小的全局值。

（我的 .font-size(1.4) 只是混合渲染：font-size: 1.4rem; ）

所以这

```
html {
  font-size: 62.5%;
}

body {
  .font-size(1.4);
}

h1 {
  .font-size(2.6);
} 
```

可以用这个修复

```
html {
  font-size: 62.5%;
}

body {
  .font-size(1.4);
}

.wrapper {
  .font-size(1.4);
}

h1 {
  .font-size(2.6);
} 
```**

# javascript - Netbeans 新语言支持插件的更好教程？

> ID：15194945
> 
> 赞同：0
> 
> 时间：2013-03-04T05:10:25.557
> 
> 标签：javascript, plugins, netbeans, module, programming-languages

我正在使用一种新的基于 javascript 的服务器端语言。它所做的事情与 PHP 所做的完全相似——但使用 javascript 语法来处理服务器响应和处理逻辑。Netbeans 是我最喜欢的编辑器，我需要为 Netbeans 开发一个新的编辑器插件，为该语言提供语法着色和代码辅助支持。假设它的行为类似于 netbeans PHP 编辑器；只是用 javascript 代码支持替换 PHP 代码支持。（它应该也支持 HTML 语法，就像 PHP 编辑器一样）。

如果您能提供更好的关于在 Netbeans 上开发新语言支持插件的教程，我将不胜感激。我通过谷歌搜索发现的内容并不能很好地描述我寻找的内容。如果有办法，现有的 netbeans Javascript 支持和 html 支持可以像 PHP 编辑器那样合并在一起，那会容易得多。例如：

```
<%
var myPerson={"name":"test name","age":25};

function savePerson(person){
.... ${any logic}
}
savePerson(myPerson);
%>

<div><span>......</span></div> 
```

如果有办法指示现有的 Netbeans HTML 编辑器将 '<%' 识别为 '<script> 和 '%>' 为 </script>，我的要求可能会得到满足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T12:06:42.377

[这篇文章](https://blogs.oracle.com/geertjan/entry/embedding_javascript_editor_in_java)描述了做一些你想做的事情（虽然 JavaScript 嵌入在 Java 中，而不是 HTML）。同样的方法应该适用于您的情况。

# javascript - 带有变量和 html 代码的数组的 Javascript 输出

> ID：15194946
> 
> 赞同：0
> 
> 时间：2013-03-04T05:10:28.263
> 
> 标签：javascript, html, arrays, variables, output

首先感谢您的帮助和支持！

我的问题是如何正确输出带有变量的 html 代码。我正在使用 jquery 和 jquery.mobile。

我从用“，”分隔的数据库的 php 结果中获取并拆分为 javascript 数组（有效），但我无法将这些结果正确输出到动态工作列表中......它们必须在带有链接和 jquery 外观的列表...但它只是向我显示了一个包含没有链接和没有 jquery 的图像的列表，它也不会停止加载。我的互联网研究没有给我需要的帮助，我不知道如何解决这个问题。（因为我想用PhoneGap，所以这部分不能用php）

这是我的代码片段（只是重要的事情）：

```
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet"  href="css/jquery.mobile-1.2.0.css" />

    <script src="js/jquery.js"></script>

    <script src="js/jquery.mobile-1.2.0.js"></script>

</head>
<body>

                <div id="result">
            <script>
$(document).ready(function(){
    $.post("Test.php",
    {
      q:"Value2ask",
    },
    function(data){

var share=data.split(",");

            if (share.length>=1){
            for(var i = 0; i < share.length; i++)
             {

            var dynlist = dynlist + ('<li><form id="'+share[i]+'" method="POST" action="Next.php" data-ajax="false">'+
            '<input id="id" name="id" value="'+share[i]+'" type="hidden"/> </form>'+
            '<img src="images/pic.png" class="img'+share[i]+'" align="LEFT" width="38" height="38" />'+
            '<a onclick="document.getElementById('+share[i]+').submit();" data-transition="slide" data-ajax="false">&nbsp; '+share[i]+'</a></li>');

            } 
            return document.innerHTML(dynlist);
            } else { 
            var dynlist =   ('<li> <a data-rel="back" data-role="button" data-icon="back" data-ajax="false">No results, click to get back </a></li>');
            return document.innerHTML(dynlist);
            }

    });
});  
</script></div></body></html> 
```

我还尝试使用 document.write（与 innerHTML 相同的结果）和其他一些版本，如 document.write 每一行......没有积极的结果......请帮助:) 谢谢！

编辑：我得到了我想要的正确代码，但它没有显示我想要的结果......（例如，链接不起作用，列表中没有 jQuery......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:17:24.860

您有`var dynlist`成功响应的 for 循环。

纠正那个

```
var dynlist;

for(conditions)
{
    dynlist += "code";
} 
```

而不是返回 return document.innerHTML(dynlist); 您可以使用`.html()`,`.text()`或jQuery 方法将您的 dynlist 添加到 html DOM `.attr()`。`.append()`

**例子**

```
$(documet).append(dynlist);
$('div#result').append(dynlist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:32:48.733

好的，只是缺少一个列表视图刷新来获取 jquery 移动样式......并且缺少 ' 用于 getElementbyID 部分。谢谢您的帮助

# ruby - 如何确保在 Ruby 中关闭数据库连接？

> ID：15194948
> 
> 赞同：1
> 
> 时间：2013-03-04T05:10:39.447
> 
> 标签：ruby, exception, resource-management

我正在学习红宝石。我正在尝试使用`mysql`gem 连接到 MySQL db。我关心的一个问题是连接关闭。

我应该如何确保在异常抛出等意外情况下关闭连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:12:47.943

你的意思是，像这样的东西？

```
begin
  db = open_mysql_connection
  # do stuff
ensure
  # this block is always executed, even if exception is raised
  db.close
end 
```

# cakephp - 简单搜索的语法错误或访问冲突

> ID：15194951
> 
> 赞同：0
> 
> 时间：2013-03-04T05:11:04.613
> 
> 标签：cakephp

我尝试进行搜索，但最终出现错误：

在我的控制器中，我写道：

```
public function search() {
  $this->set('results',$this->History->search($this->data['History']['searchtext']));
} 
```

在我看来，我写道：

//#查看/历史/searchall.ctp

```
<?php

    echo $this->Form->create("History",array('action' => 'search'));
    echo $this->Form->input("searchtext", array('label' => 'Search for'));
    echo $this->Form->end("Search");
?> 
```

它返回

```
"Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'search' at line 1" in my search.ctp 
```

在我的历史模型中，我写道：

```
<?php
  class History extends AppModel{
  var $name='History';
  var $actsAs=array('Searchable');
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:34:11.333

试试 cakeDC 搜索插件。它非常易于处理且非常灵活。你只需要安装它。配置非常简单。 [https://github.com/CakeDC/search](https://github.com/CakeDC/search)

# clojure - 内置函数来构造一个给定对序列的映射

> ID：15194954
> 
> 赞同：0
> 
> 时间：2013-03-04T05:11:17.640
> 
> 标签：clojure

当`seq`在地图上被调用时，你会得到一个配对列表 -

```
(seq {:a 4 :b 5}) 
;; => ([:a 4] [:b 5]) 
```

但是当`apply hashmap`在列表上调用时，它不会返回哈希图，而是使用第一对作为第二对的键

是否有一个内置函数在给定一对序列时返回地图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:28:43.610

您可以使用`into`：

```
(into {} (seq {:a 4 :b 5}))
;; => {:a 4 :b 5} 
```

# asp.net - Is it possible to call client from codebase (server) without using another hub client?

> ID：15194960
> 
> 赞同：1
> 
> 时间：2013-03-04T05:12:12.040
> 
> 标签：asp.net, signalr, signalr-hub

Here is simple SignalR app example: [https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

I've got this class

```
 public class Chat : Hub 
  {
       public void Send(string message)
      {
          // Call the addMessage method on all clients            
          Clients.All.addMessage(message);
      }
  } 
```

But I don't create an object anywhere by myself so I don't know how to call `Send` from server side?

There is a way by using

`HubConnection("http://localhost/mysite")` -> `chat.Invoke("Send", line).Wait();`

But it's looking for me a bit overhead. My main task it to provide an event coming from server to client side so is it possible to make it without using `Microsoft.AspNet.SignalR.Client` and `HubConnection` ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:53:25.233

You don't necessarily need to call your Hub Send method from outside of the hub itself. Instead do this:

```
GlobalHost.ConnectionManager.GetHubContext<Chat>().Clients.All.addMessage(message) 
```

# google-chrome - webkit 是什么意思？它使 chrome webkit 浏览器成为什么？

> ID：15194966
> 
> 赞同：0
> 
> 时间：2013-03-04T05:13:28.060
> 
> 标签：google-chrome, safari, webkit, mobile-webkit

任何人都可以帮助我了解 webkit。

webkit 是什么意思？

是什么让 chrome 或 safari 成为 webkit 浏览器？

与 Mozilla 有什么区别？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:20:08.447

Paul Irish 最近写了一篇关于这个的好文章：http: [//paulirish.com/2013/webkit-for-developers/](http://paulirish.com/2013/webkit-for-developers/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:15:20.833

[Webkit](http://en.wikipedia.org/wiki/WebKit)是那些浏览器使用的**渲染引擎。**相比之下，Firefox 的叫 Gecko，IE 的叫 Trident。

每个渲染引擎项目都是为了实现相同的目标而进行的完全独立的工作：获取您收到的 HTML 和 CSS，对其进行解释和~~绘制，~~调用特定操作系统的 API，要求他们将其绘制到屏幕上。

在日常 Web 开发工作中的重要性的一个例子是 CSS 前缀（即`-webkit-border-radius`vs. `-moz-border-radius`）。因此，如果某些东西在 Safari 上运行，它更有可能直接在 Chrome 上运行而不是在 Firefox 上运行——但这只是一个家族相似之处，最终你仍然需要测试每个 webkit 浏览器产品和版本仍然使用不同版本的 WebKit。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T05:18:55.437

Webkit 是一个浏览器引擎——被 Safari、Chrome 使用，而且很可能 Opera 也将开始使用它。它有助于在用户端呈现网页。

# mysql - SQL排序月份升序和月份降序？

> ID：15194968
> 
> 赞同：1
> 
> 时间：2013-03-04T05:13:41.090
> 
> 标签：mysql, sql, date

如果我有这样的表是否有可能：

```
CREATE TABLE `Fun` (
  `Date` DATETIME NOT NULL PRIMARY KEY
); 
```

执行 SQL 查询，结果按如下方式排序：

```
2013-03-01
2013-03-03
2013-03-04
2013-02-11
2013-02-28
2013-01-21
2012-12-10
2012-12-25
2010-07-08 
```

请注意，在上面的列表中，月份和年份是按降序排列的，但每个月内的天数是按升序排列的？

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T05:19:46.393

利用`YEAR`,`MONTH`功能。

```
SELECT  *
FROM    Fun
ORDER   BY YEAR(date) DESC, MONTH(date) DESC,
        DATE ASC 
```

# sql - 在 Ruby on rails 中连接 Sql 服务器

> ID：15194977
> 
> 赞同：5
> 
> 时间：2013-03-04T05:14:34.300
> 
> 标签：sql, ruby-on-rails, ruby, sql-server

我是新手`ruby on rails`。我想知道如何连接`Sql server`到 rails 应用程序。

我正在 Windows 环境中使用 RoR。`SQL Server`是否有任何链接可以在 ROR 中建立连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:19:50.210

我还没有在 Windows 上做过，但如果它类似于在 mac 上连接到 postgresql，你必须：

1.  让 sql-server 在本地运行（[http://msdn.microsoft.com/en-us/library/ms143219.aspx](http://msdn.microsoft.com/en-us/library/ms143219.aspx)？）
2.  向您的 gemfile 添加一个 gem，允许 Rails 与 sql-server 对话，可能是这样的： [https](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter) ://github.com/rails-sqlserver/activerecord-sqlserver-adapter | `gem 'activerecord-sqlserver-adapter', '~> 3.1.0'`
3.  为 sql server 更新你的 database.yml 文件，例如：[Setting up Rails to work with sqlserver](https://stackoverflow.com/questions/130547/setting-up-rails-to-work-with-sqlserver)（另外它也是答案）
4.  然后你只需创建数据库并迁移它。在mac上是这样的`rake db:create && rake db:migrate`

# javascript - onsubmit 用于邮政编码文本输入。XMLhttprequest：输入zip，返回城市

> ID：15194978
> 
> 赞同：0
> 
> 时间：2013-03-04T05:14:36.327
> 
> 标签：javascript, json, input, xmlhttprequest, onsubmit

我正在尝试创建一个小程序，其中涉及输入邮政编码并使用[http://www.zippopotam.us/](http://www.zippopotam.us/)获取相关城市。最终，我将解析城市数据并将其存储为程序开发的变量。也许对更具体的区域使用 long/lat。

1.  使用下面的代码时，输​​入初始邮政编码后，它按计划工作，我看到一个带有预期 JSON 结果的警报。在初始 zip 输入后，一旦更改了 zip 并再次提交，它就不起作用了。更新后的 zip 会反映在 URL 中，但会从文本输入字段中消失，并且不会执行**city**功能。它需要第二次提交才能工作。为什么会发生这种情况，我该如何解决？

2.  www.zippopotam.us/ 是解决这个问题的好方法还是有更好的选择？

.

```
<div id="location">
<form onsubmit="city()">
<input type="text" name="loc" id="loc" />
</form> 
</div>

function city(){
var zip = $('#loc').val();
var client = new XMLHttpRequest();
client.open("GET", "http://api.zippopotam.us/us/"+zip, true);
client.onreadystatechange = function() {
if(client.readyState == 4) {
    alert(client.responseText);
};
};

client.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:45:13.483

您正在执行跨域安全策略，这意味着来自您的域的文件不允许从另一个域加载数据。

通常，您会向您的 OWN 服务器发出请求，该服务器将查询 zippopotam.us，并将数据返回给您。从客户端的角度来看，它使数据看起来像是来自您的服务器，因此允许调用。

或者，对于仅限客户端的解决方案，请检查[http://www.zippopotam.us/](http://www.zippopotam.us/)是否支持 jsonp：[http](http://en.wikipedia.org/wiki/JSONP) ://en.wikipedia.org/wiki/JSONP 。还有其他方法（例如，查看您的提供程序是否有一些允许来源标头）。

阅读本文了解更多信息：[https ://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

# javascript - 将此 JavaScript 转换为处理多首歌曲？

> ID：15194983
> 
> 赞同：1
> 
> 时间：2013-03-04T05:14:52.677
> 
> 标签：javascript, html, html5-audio

我创建了这个小音频播放器，它播放随机的前奏、歌曲的中间部分，然后是随机的结尾。现在它被硬编码为一首歌曲。每首歌有 3 个前奏、一个中段和 3 个结尾。我希望能够有一个随机选择的歌曲列表（比如从数组中随机选择），因此脚本将选择一首歌曲并相应地更改脚本（前奏和结尾以及中段）。我考虑了不同的方法来做到这一点，但我不希望脚本中的每首歌都有大量的数组。我将如何设计这样的系统？[www.saradio.tk/dev.html](http://www.saradio.tk/dev.html)上的演示（音频计时仅在 Chrome-ACTIVE-TAB AFAIK 中正常工作）

代码：

```
<body onload="checkdif(), loadintro(), loadoutro()">
<audio id="intro" src="" controls preload autoplay></audio>
<audio id="mid" src="radio/Barracuda-mid.ogg" controls preload></audio>
<audio id="outro" src="" controls preload></audio>
<br>
<br>
<button onclick="resetradio()">RESET</button>   <span id="timeleft"> n/a </span>

<script>
    var intros = [
        "radio/Barracuda-intro1.ogg",
        "radio/Barracuda-intro2.ogg",
        "radio/Barracuda-intro3.ogg"];

    var outros = [
        "radio/Barracuda-outro1.ogg",
        "radio/Barracuda-outro2.ogg",
        "radio/Barracuda-outro3.ogg"];

    function loadintro() {
        document.getElementById("intro").src = intros[Math.floor(Math.random() * intros.length)];
        document.getElementById("intro").load();
        document.getElementById("intro").play();
    }

    function loadoutro() {
        document.getElementById("outro").src = outros[Math.floor(Math.random() * outros.length)];
        document.getElementById("outro").load();
    }

    x = document.getElementById('intro');
    y = document.getElementById('mid');
    done = false;
    done2 = false;

    function checkdif() {
        if (done) return;
        setTimeout('checkdif()', 5);
        document.getElementById('timeleft').innerHTML = x.duration - x.currentTime;
        if (x.duration - x.currentTime <= 0.09) {
            document.getElementById('mid').play();
            done = true;
            checkdif2();
        }
    }

    function checkdif2() {
        if (done2) return;
        setTimeout('checkdif2()', 5);
        document.getElementById('timeleft').innerHTML = y.duration - y.currentTime;
        if (y.duration - y.currentTime <= 0.09) {
            document.getElementById('outro').play();
            done2 = true;
        }
    }

    function resetradio() {
        done = false;
        done2 = false;
        document.getElementById('mid').pause();
        document.getElementById('mid').currentTime = 0;
        loadintro();
        loadoutro();
        checkdif();
    }

    document.getElementById("outro").addEventListener('ended', resetradio, false)
</script>
</body> 
```

PS：我也考虑过设计系统，以便它从列表中删除刚刚播放的歌曲，因此它永远不会播放同一首歌曲，直到它循环通过所有其他可能。所以它会从一系列歌曲中挑选，当它挑选时让我们说“歌曲 x”，它将从数组中删除“歌曲 x”，以进行下一次随机挑选。只是一个想法...

# 更新：这是我对该系统的最终实现：http: [//saradio.tk/new.html](http://saradio.tk/new.html)

**如果您查看源代码并观察控制台，您会看到它从阵列中随机抽取一首歌曲，然后从阵列中删除该歌曲。这样，在播放完所有歌曲之前，它不会重复歌曲。一旦循环到达最后一首歌曲，数组就会恢复到原始状态。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:33:08.913

即使你说你不想拥有大量的数组，只要每首歌都有一个前奏列表和一个后奏列表，你就必须以某种方式“了解”它们。你基本上有2个选择：

1.  建立一个命名约定系统，其中所有的 outros 和 intros 都有相似的文件名和一些后缀
2.  明确指定所有介绍

对于 1\. ，您的数据结构可能如下所示：

```
var intro_suffix = '-intro';
var outro_suffix = '-outro';
var extension = '.ogg';
var songs = [
    {
           base_name: "radio/Barracuda"
        ,  num_intro: 3
        , num_outros: 3
    },
    {
           base_name: "radio/SomeOtherSong"
        ,  num_intro: 3
        , num_outros: 3
    },
]; 
```

一旦你选择了一首歌曲，你就可以得到前奏、主歌和结尾的文件名。例如：

```
var song = songs[0];
var intro_url = song.name
    + intro_suffix
    + (1 + Math.floor(Math.random() * song.num_intros))
    + extension;
var song_url = song.name + extension;
var outro_url = song.name
    + outro_suffix
    + (1 + Math.floor(Math.random() * song.num_outros))
    + extension; 
```

对于 2，您的数据结构必须是明确的：

```
var songs = [
    {
             url: "radio/Barracuda.ogg"
        , intros: ["radio/Barracuda-intro1.ogg", "radio/Barracuda-intro2.ogg", "radio/Barracuda-intro3.ogg"]
        , outros: ["radio/Barracuda-outtro1.ogg", "radio/Barracuda-outro2.ogg", "radio/Barracuda-outro3.ogg"]
    },
    {
             url: "radio/SomeOtherSong.ogg"
        , intros: ["radio/foo.ogg", "radio/bar.ogg", "radio/baz.ogg"]
        , outros: ["radio/meh.ogg", "radio/fuuuuu.ogg", "radio/yo.ogg"]
    },
]; 
```

然后您将变量导出为：

```
var song = songs[0];
var intro_url = song.intros[Math.floor(Math.random() * song.intros.length)];
var song_url = song.url;
var outro_url = song.outros[Math.floor(Math.random() * song.outros.length)]; 
```

2\. 的一个“优势”是您可以随意命名您的文件

# javascript - Safari 扩展：将窗口对象从注入脚本传递到全局页面

> ID：15194987
> 
> 赞同：1
> 
> 时间：2013-03-04T05:15:05.660
> 
> 标签：javascript, safari, safari-extension

有没有办法将窗口对象从注入脚本传递到 global.html 页面，

我试图将窗口作为对象的一部分从“加载”侦听器函数传递给全局页面，它在尝试发送消息时会引发类型错误。

这是代码。

```
window.addEventListener("load", onDocLoad);

function onDocLoad()
{
    var msg = new Object();

    msg.url = window.location.href; // this all works 
    .....
    msg.win = window; // With this it throws type error on line safari.self.tab.dispatchMessage("XXX",msg);
    safari.self.tab.dispatchMessage("XXX",msg);  
} 
```

消息调度工作和其他数据可以传递而不会出现窗口对象的错误期望。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:30:25.633

您不能像文档中所说的那样传递 HTMLWindow 之类的对象：

> 消息数据不限于单一数据类型；它可以是布尔值、数字、字符串、数组、RegExp 对象或任何符合 W3C 标准的任何东西，用于安全传递结构化克隆数据。在命令不需要数据的情况下，它也可以为空、未定义或留空。

# java - 如何在 JFrame 中放置一个表格和 3 个按钮

> ID：15194991
> 
> 赞同：1
> 
> 时间：2013-03-04T05:15:22.237
> 
> 标签：java, swing, jpanel, layout-manager

嗨朋友我想在一帧中布局 4 个实体

1.  一个 JTable
2.  3 个按钮

为此，我创建了一个 JFrame 并将 2 个 JPanel 放入该 JFrame 中。一个 JPanel 包含一个包含 JTable 的 scrollablePanel。另一个 JPanel 包含 3 个 JButton。

我希望输出如下所示：

![在此处输入图像描述](../Images/4c01e6c62c12dd1e0c4de4b7d6d0a148.png)

但是我的表不再可见，只有按钮可见。以下是我的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class displayGui extends JFrame{
    private JPanel topPanel;
    private JPanel btnPanel;
    private JScrollPane scrollPane;

    public displayGui(JTable tbl){
        setTitle("Company Record Application");
        setSize(300,200);
        setBackground(Color.gray);

        topPanel = new JPanel();
        btnPanel = new JPanel();

        topPanel.setLayout(new BorderLayout());
        getContentPane().add(topPanel);
        getContentPane().add(btnPanel);
        scrollPane = new JScrollPane(tbl);
        topPanel.add(scrollPane,BorderLayout.CENTER);
        JButton addButton = new JButton("ADD");
        JButton delButton = new JButton("DELETE");
        JButton saveButton = new JButton("SAVE");

        btnPanel.add(addButton);
        btnPanel.add(delButton);

    }
} 
```

我的主要方法中的代码：

```
displayGui dg = new displayGui(table);
dg.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:19:33.517

您需要为框架上的每个面板指定一个位置...

代替...

```
getContentPane().add(topPanel);
getContentPane().add(btnPanel); 
```

尝试...

```
getContentPane().add(topPanel, BorderLayout.CENTER);
getContentPane().add(btnPanel, BorderLayout.SOUTH); 
```

**边注**

s add 方法会自动将对它的`JFrame`调用重定向到 s `contentPane`，因此，从技术上讲，您只需要...

```
add(topPanel, BorderLayout.CENTER);
add(btnPanel, BorderLayout.SOUTH); 
```

**更新**

我还应该指出 a 的默认布局管理器`JFrame`是`BorderLayout`. 您可以通过简单地调用来更改它`JFrame#setLayout`，但您所追求的结果最好与`BorderLayout`...FYI会面

# authentication - 使用 MoinMoin 的 Ldap (AD) 身份验证不起作用

> ID：15194993
> 
> 赞同：0
> 
> 时间：2013-03-04T05:15:32.180
> 
> 标签：authentication, ldap, openldap, moinmoin

我正在尝试将 MoinMoin 与我的 AD 服务器连接，但它不起作用。我的意思是，我尝试使用我的域帐户登录，我没有收到任何错误（如果我尝试使用以前创建的超级用户帐户登录，我会收到用户名或密码错误的错误），但我还没有登录。如果我遵循[MoinMoin/auth/ldap_login.py](http://hg.moinmo.in/moin/1.9/file/aff01569df82/MoinMoin/auth/ldap_login.py)中的代码，我就有了正确的凭据。我是否以正确的方式进行设置？我在 FreeBSD 9.1 上使用 MoinMoin 1.9.6 和 python 2.7，而没有安装 MoinMoin（即我只从存档中提取文件并运行 wikiserver.py）。

在这里，我向您展示我的 wikiconfig_local.py：

```
from wikiconfig import LocalConfig
from MoinMoin.auth.ldap_login import LDAPAuth

class Config(LocalConfig):
    superuser=[u"IshayahuLastov",]
    page_front_page=u"MyWiki"
    ldap_authenticator1 = LDAPAuth(
        server_uri='ldap://192.168.1.9',
        bind_dn='Ishayahu@meoc.mjcc.local',
        bind_pw = 'mypassword',
        base_dn='dc=meoc,dc=mjcc,dc=local',
        scope=2, # scope of the search we do (2 == ldap.SCOPE_SUBTREE)
        referrals=0, # LDAP REFERRALS (0 needed for AD)
        search_filter='(sAMAccountName=%(username)s)'
        givenname_attribute=None,
        surname_attribute=None,
        aliasname_attribute=None, 
        email_attribute=None, 
        email_callback=None, 
        coding='utf-8',
        timeout=10, 
        start_tls=0, 
        tls_cacertdir='',
        tls_cacertfile='',
        tls_certfile='',
        tls_keyfile='',
        tls_require_cert=0, 
        bind_once=False,
        )
    auth = [ldap_authenticator1, ] 
    cookie_lifetime = 1 # 1 hour after last access ldap login is required again
    user_autocreate = True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T13:38:14.817

如果您使用 AD，请使用 '(uid=%(username)s)' 而不是 search_filter='(sAMAccountName=%(username)s)' 并告诉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:43:11.080

您提供给 LDAPAuth() 的值可能有问题。

要对此进行调试，启用 MoinMoin.auth 的调试日志记录会很有帮助（请参阅 moin 下载存档中包含的日志记录配置示例）。

您也可以尝试使用具有类似参数的 ldapsearch 命令行工具，以检查如何使其正常工作。

# java - 如何处理 PK 溢出？

> ID：15194996
> 
> 赞同：1
> 
> 时间：2013-03-04T05:15:49.073
> 
> 标签：java, mysql, sql, overflow, primary-key

应该怎么做才能适应 PK 可能溢出的情况？

这不太可能，但仍有可能。我看到一个时事通讯选择退出表单不起作用，因为它可能有很多请求。

应用端可以做什么？在 MySQL 上可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T06:06:28.207

> 应该怎么做才能适应 PK 可能溢出的情况？

简单的解决方案是设计模式，使 PK 的类型足够大，以至于在任何可能的用例中都不会发生溢出。

如果该假设失败，那么您就有问题了。我能想到一些可能的选择。

*   将PK类型更改为“更大”的类型，修改应用程序并迁移数据。

*   编写应用程序来“压缩”密钥空间；即对于每个活动密钥，更新所有使用该密钥的记录，用新密钥替换它......从空间的开头开始。

*   包装密钥空间，并使用更复杂的生成器来获取下一个密钥，以检查每个候选密钥是否尚未使用。

* * *

请注意，这种东西通常不会设计到系统中，尤其是因为它难以预测和测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T06:28:14.927

我曾处理过一个 32 位 INT 溢出的案例。这是因为应用程序不小心为每个成功的行插入跳过了 1000 个值。在这种情况下，应用程序达到了最高的有符号 INT 值，他们不能再对该表进行任何插入。我被要求帮助他们重组表以使用 BIGINT 主键。

但当然，在这样做*之前*，我们也必须更改引用表的所有外键以使用 BIGINT。因为我们不希望在主表中插入一个新的 PK 值，该值无法被其他表中的 FK 引用。

用完 BIGINT 中的值范围应该比我们的生命还要长——除非您每次插入新行时跳过十亿个值！

我编写了一个名为[pk-full-ratio](https://github.com/billkarwin/bk-tools/blob/master/pk-full-ratio.sql)的脚本，它将检查给定数据库中的每个 AUTO_INCREMENT PRIMARY KEY，并计算它与溢出的接近程度（百分比）。

# autohotkey - 在 LButton 之后延迟 RButton

> ID：15194998
> 
> 赞同：0
> 
> 时间：2013-03-04T05:15:57.450
> 
> 标签：autohotkey

我运行一个应用程序，该应用程序在 LButton 之后太快删除了一个 RButton。解决方案可能是运行类似

```
~LButton::                    ; pass through, set A_PriorHotkey
return

#If A_PriorHotkey = LButton && A_TimeSincePriorHotkey < minDelay
RButton:: 
```

但是我在编写最后一行和以下行时没有运气，因此如果#IF 为假或延迟约100ms，则发送正常的MButton down 和RButton up 如果#IF 为true，则发送RButton down 和RButton up .

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:06:39.327

这是一个应该可以工作的解决方案，我对其进行了一些测试，它应该 100% 的时间都可以工作。如果您使用它，请不要只是复制和粘贴，而是要尝试了解代码的作用。

基本上我们所做的是左键单击我们计时直到达到某个时间（在这种情况下为 1000 毫秒 -> IGNORE_TIME），同时我们忽略右键单击，当时间到时右键单击再次处于活动状态。

```
global IGNORE_TIME := 1000  ; ignore for 1000 miliseconds, change only this if you wan't different times
global starttime := 0

~LButton::
    SetTimer, DelayRButton_r ,Off
    starttime := 25
    SetTimer, DelayRButton_r ,25
    tooltip,leftbutton    ; debug
return

RButton::
    if(starttime > 0)    ; if the left button was pressed IGNORE_TIME ago or less ignore right click
        return
    Send, {RButton}    ; else send right click
    tooltip,rightbutton    ; debug
return

DelayRButton_r:    ; this function runs every 25 ms until it reaches IGNORE_TIME then if sets starttime to 0 and rightclick works again
    starttime += 25
    if( starttime > IGNORE_TIME)
    {
        SetTimer,DelayRButton_r, Off
        starttime := 0
    }
return 
```

另请记住，此代码可以轻松编辑为仅适用于特定应用程序/窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:28:02.290

根据您的描述，我假设您无法更改发送应用程序（即不是 AutoHotKey 脚本，但可能是编译后的 ahk.exe）

一旦您能够使用以下命令触发 AutoHotKey：

```
RButton::
    SoundBeep, 500,500
Return 
```

你可以试试这段代码：

```
SetTitleMatchMode = 2

#IfWinActive, Name of your Application
    $RButton::
       if (A_PriorHotkey = "LButton" AND A_TimeSincePriorHotkey < 400)
          Sleep, 1000
       Click, Right
    Return
#IfWinActive 
```

您可以通过右键单击 AutoHotKey 图标，然后启动 Windows Spy 找到（发送或接收应用程序，取决于当时哪个应用程序处于活动状态）的名称。激活 Windows Spy 后，单击应用程序并查看应用程序的标题（或 ahk_class）。

警告我没有测试过这段代码！

# java - Eclipse Juno 报告 Play 语法问题

> ID：15194999
> 
> 赞同：1
> 
> 时间：2013-03-04T05:16:03.103
> 
> 标签：java, eclipse, playframework, playframework-2.0

已在 Eclipse Juno 中安装了 Scala 插件 < [http://download.scala-ide.org/nightly-scala-ide-juno-210x >。](http://download.scala-ide.org/nightly-scala-ide-juno-210x)

我正在使用以下版本：

play 2.1.0 java version "1.6.0_41" Scala code runner version 2.10.0 -- 版权所有 2002-2012, LAMP/EPFL 我能够使用 Eclipse 编写 Scala 程序，还创建了一个基于 Java 的 Play 项目，我将其导入 Eclipse通过运行 play eclipse。

我能够看到示例代码在 Chrome 中正确运行，但在播放代码方面有奇怪的错误。

例如

```
public class Application extends Controller {  

   public static Result index() {
       return ok(index.render("Your new application is ready."));
   } 
} 
```

Eclipse 问题的视图指出索引下方有一条红色卷线：

“无法解析索引”

附件是一个截图，给出了这些类型的问题的例子......

有没有办法让 Eclipse 识别这些错误？

![在 Eclipse 中播放语法问题](../Images/6c1684bebb6fd6f21a8bfb234e732a00.png)

**（您可以在浏览器的新选项卡中打开此图像，以便以更大的分辨率查看它）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T21:54:28.173

我刚刚在全新安装 Play（2015 年 1 月 17 日下载的所有内容的最新版本）时遇到了这个问题。

我心想——天哪，我们又来了——一个很棒的框架，但你必须投入 4 小时的大脑麻木研究，才能让第一行代码正确编译。

事实证明，`~compile`在窗口中运行命令`activator`并更改`Application.java`并保存它就可以了。单独对文件的更改没有做到这一点，也没有运行`update`，`activator`也没有重新启动或重新加载eclipse。

感谢您提出这个问题，因为这是谷歌搜索时出现的问题，`return ok(index.render("Your new application is ready."));`看起来我现在会在短时间内提高工作效率，而不是浪费时间与搜索之神......

我也会给回答者（阿尔班）一颗星，但遗憾的是我还不允许...

您会认为在 2 年内，像这样的简单问题早就解决了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T11:47:00.660

而不是使用；

```
activator eclipse 
```

利用;

```
activator "eclipse with-source=true" 
```

这需要一点时间，但完成后，它不会显示相关错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:07:49.393

您必须从 Play 运行编译！安慰。

要逐步进行（*即*每次更改源代码时），您可以运行：

```
play ~compile 
```

我还将 Eclipse 配置为自动刷新资源：Window > Preferences > General > Workspace > Refresh using native hooks or polling。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:13:58.523

不确定这是否是问题，但 Play 可以为各种 ide 设置项目。[尝试运行 eclipsify](http://www.playframework.com/documentation/2.0.2/IDE)，尽管众所周知 eclipse 会保留脏缓存，因此这可能是问题之一。如果这不起作用，可以尝试使用 with-source=true 选项运行它。