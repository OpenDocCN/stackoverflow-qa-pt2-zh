# StackOverflow 问答 15188000-15188999

# python - matplotlib阶跃函数中的线型

> ID：15188005
> 
> 赞同：24
> 
> 时间：2013-03-03T16:48:07.197
> 
> 标签：python, matplotlib, linestyle

是否可以将 matplotlib 步进函数中的线型设置为虚线、点线等？

我试过了：

```
step(x, linestyle='--'), 
step(x, '--') 
```

但这并没有帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-03T21:34:01.467

从 mpl 1.3.0 开始，这是在上游修复的

* * *

你必须得有点侧身，`step`似乎忽略了`linestyle`。如果您查看`step`下面的内容，它只是情节的薄包装。

你可以通过直接交谈来做你想做的事`plot`：

```
import matplotlib.pyplot as plt

plt.plot(range(5), range(5), linestyle='--', drawstyle='steps')
plt.plot(range(5), range(5)[::-1], linestyle=':', drawstyle='steps')
plt.xlim([-1, 5])
plt.ylim([-1, 5]) 
```

![例子](../Images/574e64898303bb4f18e533b20bcffe4f.png)

`['steps', 'steps-pre', 'steps-mid', 'steps-post']`是有效值`drawstyle`并控制绘制步骤的位置。

[从这个问题产生的拉](https://github.com/matplotlib/matplotlib/pull/1802)取请求，我个人认为这是一个错误。[编辑：这已被拉入 master 并应显示在 v1.3.0 中]。

# php - Kostache - before() 方法

> ID：15188008
> 
> 赞同：0
> 
> 时间：2013-03-03T16:48:22.383
> 
> 标签：php, kohana, kostache

那么，kostache 模块中是否有类似 before() 方法的东西？例如，如果我在视图文件中有几行 PHP，我想在视图类中单独执行它们，而不在模板本身中回显任何内容。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:11:22.570

您可以将此类代码放在 View 类的构造函数中。当视图被实例化时，代码将运行。

这是来自工作应用程序的（稍作修改）示例。此示例说明了一个 ViewModel，它允许您更改哪个 mustache 文件用作站点的主要布局。在构造函数中，它选择一个默认布局，如果需要，您可以覆盖它。

**控制器**：

```
class Controller_Pages extends Controller
{
    public function action_show()
    {
        $current_page = Model_Page::factory($this->request->param('name'));

        if ($current_page == NULL) {
            throw new HTTP_Exception_404('Page not found: :page',
                array(':page' => $this->request->param('name')));
        }

        $view = new View_Page;
        $view->page_content = $current_page->Content;
        $view->title = $current_page->Title;

        if (isset($current_page->Layout) && $current_page->Layout !== 'default') {
            $view->setLayout($current_page->Layout);
        }

        $this->response->body($view->render());
    }
} 
```

**视图模型**：

```
class View_Page
{
    public $title;

    public $page_content;

    public static $default_layout = 'mytemplate';
    private $_layout;

    public function __construct()
    {
        $this->_layout = self::$default_layout;
    }

    public function setLayout($layout)
    {
        $this->_layout = $layout;
    }

    public function render($template = null)
    {
        if ($this->_layout != null)
        {
            $renderer = Kostache_Layout::factory($this->_layout);
            $this->template_init();
        }
        else
        {
            $renderer = Kostache::factory();
        }

        return $renderer->render($this, $template);
    }
} 
```

# ajax - 为什么jqgrid 无法从joomla 获取json 数据？

> ID：15188014
> 
> 赞同：0
> 
> 时间：2013-03-03T16:48:47.117
> 
> 标签：ajax, json, joomla, jqgrid

我编写了在 joomla（2.5.9 版）中使用 jqgrid（4.4.4 版）的代码。这是我的代码，我发现 jqgrid 无法显示来自 joomla json_encode 的数据。但是在 joomla 中没有是可以的。如果 jqgrid url:testjson.php 没问题。

```
<?php
  header('Cache-Control: no-cache, must-revalidate');
  header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
  header("Content-Type: application/json;charset=utf-8");
 header('Content-Disposition,attachment;filename=”json.json”');
  $response=new stdClass();
  $response->page = 1; 
  $response->total = 1; 
  $response->records = 1; 
  $response->rows[0]['id']='1';
   $response->rows[0]['cell']=array("1","vlan");
  echo json_encode($response);
? 
```

我得到 json:{"page":1,"total":1,"records":1,"rows":[{"id":"1","cell":["1","vlan"] }]}，并且 jqgrid 工作正常。

当jqgrid url:index.php?option=com_sysconfig&view=vlan&task=ajaxvlane.getvlanlist&format=raw

在子控制器中，在函数 getvlanlist 中，这段代码很糟糕：

```
<?php
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header("Content-Type: application/json;charset=utf-8");
header('Content-Disposition,attachment;filename=”json.json”');
$response=new stdClass();
$response->page = 1; 
$response->total = 1; 
$response->records = 1; 
$response->rows[0]['id']='1';
$response->rows[0]['cell']=array("1","vlan");
echo json_encode($response);
JFactory::getApplication()->close();
?> 
```

通过萤火虫我可以看到 json:{"page":1,"total":1,"records":1,"rows":[{"id":"1","cell":["1", "vlan"]}]} 与 testjson.php 结果相同。

但 jqgrid 不能显示任何数据。

什么错误导致问题？谢谢。

顺便说一句，如果我使用 joomla 创建 xml 数据，jqgrid 工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:33:31.947

我得到了答案：因为代码编辑器是 UTF8 BOM 字符集。如果不使用 BOM uft-8，那么它工作正常。

# ios - 为什么显示图像需要 5.5 秒（在 UIImageVIew 中）？

> ID：15188016
> 
> 赞同：0
> 
> 时间：2013-03-03T16:48:48.637
> 
> 标签：ios, ios6, uiimageview

我正在通过相机使用 AVFoundation 捕获图像，然后通过 segue 将其显示到另一个具有`UIImageView`. `viewWillAppear`图像大小为 1936 x 2592，调用后屏幕更新图像需要 5.5 秒。

这是正常的，并且仅仅是由于图像的大小吗？这是在运行 iOS6 的 iPhone4 上。这种延迟是不可接受的，所以我必须找到一个解决方案，可能首先尝试缩小图像，但我想在跳过箍之前我会问。

**更新**

将图像尺寸缩小到 484 x 648 需要更长的时间：5.6 秒。评论中有我正在使用的捕获代码的请求。它在这篇文章的底部。另外，我只捕获一张图像然后显示它。

// 控制台输出：

> 有形象
> 
> 2013-03-03 11:37:16.741 RPFaceCamera[4867:907] viewWillAppear - 耗时：0.000215>
> 
> 2013-03-03 11:37:22.249 RPFaceCamera [4867:907] viewDidAppear - 所用时间：5.507458>

* * *

//代码

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (self.faceImage != nil){
        start = [NSDate date];
        printf("have image     \n");
        self.faceImageView.image = self.faceImage;
        NSLog(@"viewWillAppear - time taken: %f", -[start timeIntervalSinceNow]);
    }

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"viewDidAppear - time taken: %f", -[start timeIntervalSinceNow]);
} 
```

* * *

//捕获代码 - （我想我是从 Apple 的 AVDemo 中抄来的）。Objective-C 的格式在可读性方面还有很多不足之处。

```
- (void)captureImage
{
    AVCaptureConnection *connection;
    connection = [stillImageOutput connectionWithMediaType:AVMediaTypeVideo];

    [stillImageOutput setOutputSettings:[NSDictionary
                                         dictionaryWithObject:[NSNumber numberWithInt:kCMPixelFormat_32BGRA]
                                         forKey:(id)kCVPixelBufferPixelFormatTypeKey]];

    [stillImageOutput captureStillImageAsynchronouslyFromConnection:connection
          completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {
              if(error)
                  NSLog(@"captureImage failed");
              else{

                  CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(imageDataSampleBuffer);
                  CFDictionaryRef attachments = CMCopyDictionaryOfAttachments(kCFAllocatorDefault,
                                                                              imageDataSampleBuffer,
                                                                              kCMAttachmentMode_ShouldPropagate);

                  CIImage *ciImage =
                  [[CIImage alloc] initWithCVPixelBuffer:pixelBuffer
                                                options:(__bridge NSDictionary *)attachments];

                  NSNumber *orientation = (__bridge NSNumber *)(CMGetAttachment(imageDataSampleBuffer,
                                                      kCGImagePropertyOrientation, NULL));

                  printf("original orientation     %d\n", [orientation intValue]);

                  self.faceImage = [UIImage imageWithCIImage:ciImage scale:1.0f orientation:[orientation intValue]];
                  printf("self.faceImage     %d\n", self.faceImage.imageOrientation);
                  printf("self.faceImage    width: %f height: %f\n",  self.faceImage.size.width, self.faceImage.size.height);

                  __weak __typeof__(self) weakSelf = self;
                  [weakSelf performSelectorOnMainThread:@selector(showFaceView) withObject:nil waitUntilDone:NO];
              }                                                      
          }
     ];
} 
```

* * *

// 捕获完成时在主线程调用的方法 - (void)showFaceView { NSLog(@"showfaceView");

```
 [self destroyAVCapture];
    [self.delegate dismissCameraWithImage:self.faceImage];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:13:36.377

我猜想在图像编辑器中物理上缩小图像会导致更短的加载时间。

现在，根据您的评论，您正在设置比例`[UIImage imageWithCIImage:ciImage scale:4.0f orientation:[orientation intValue]`

这实际上不会使图像文件更小，因此不会使加载时间更短。查看[此](https://stackoverflow.com/questions/487316/reduce-uiimage-size-to-a-manageable-size-reduce-bytes)Stackoverflow 帖子中的答案，了解有关`UIImage`使用`NSData`. [这篇](https://stackoverflow.com/questions/4712329/how-to-resize-the-image-programatically-in-objective-c-in-iphone)文章讨论了以编程方式调整`UIImage`. 也许他们会工作得更好。

# php - 使用 Perl 访问 PHP 数组

> ID：15188018
> 
> 赞同：0
> 
> 时间：2013-03-03T16:48:55.837
> 
> 标签：php, perl

我主要是一名 PHP 开发人员，对 Perl 的经验有限。

我的任务是用 Perl 编写一个队列脚本来检查数据库，这一切都很好。

我遇到的问题是在 Perl 脚本中我需要包含数据库主机名和密码。

现在我对它们进行了硬编码，效果很好，但是我的 PHP 应用程序使用了一个全局 PHP 数组，它保存了数据库主机名和密码。我希望能够在我的 Perl 脚本中使用这个 PHP 数组。

这是我的 PHP 数组

```
<?php
return array(
    'database' => array(
        'master' => array(
            'hostname' => 'fd35:4776:6804:2:a::1',
            'password' => 'password'
        ),
        'slave' => array(
            'hostname' => 'fd35:4776:6804:2:2::2',
            'password' => 'password',
            'profile'  => true
        )
    )
); 
```

我试过用谷歌搜索并在网上阅读了许多随机帖子，但我还没有想出一个解决方案。

有没有人有任何我可以尝试的想法？如果我缺少任何其他输入，请告诉我，我可以提供。

**编辑**

希望我措辞正确。我将如何包含这个 PHP 数组文件以便我可以使用 Perl 操作它？

也欢迎替代解决方案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T16:59:41.833

您已经发现了代码导致错误配置文件的众多原因之一。您应该将信息移动到一个实际的配置文件，并从该 .php 文件和 Perl 访问该文件。

JSON 会在这里制作一个不错的文件格式。

```
{
   "database": {
      "master": {
        "hostname": "fd35:4776:6804:2:a::1",
        "password": "password"
      },
      "slave": {
        "hostname": "fd35:4776:6804:2:2::2",
        "password": "password",
        "profile":  true
      }
   }
} 
```

Perl 代码将是

```
use JSON::XS qw( decode_json );
open (my $fh, '<:raw', $config_path)
   or die("Can't open config file $config_path: $!\n");
my $file; { local $/; $file = <$fh>; }
my $config = decode_json($file); 
```

在 PHP 方面，只需将您在帖子中显示的文件的内容替换为读取配置文件的代码即可。我不知道PHP，但它应该很简单。快速搜索显示它可能是

```
return json_decode(file_get_contents($config_path)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:28:30.193

提供一个简短的 PHP 程序将数组转储到 JSON 格式的文件中会很简单。然后可以使用该[`JSON`](https://metacpan.org/module/JSON)模块从 Perl 读取该文件。

这就是所有必要的。

```
<?php
  $array = include 'array.php';
  $fh = fopen('array.json', 'w');
  fwrite($fh, json_encode($array));
  fclose($fh);
?> 
```

然后可以在 Perl 程序中读取生成的 JSON 文件，如下所示：

```
use strict;
use warnings;

use JSON 'from_json';

my $data = do {
  open my $fh, '<', 'array.json' or die $!;
  local $/;
  from_json(<$fh>);
};

use Data::Dump;
dd $data; 
```

**输出**

```
{
  database => {
    master => { hostname => "fd35:4776:6804:2:a::1", password => "password" },
    slave  => {
                hostname => "fd35:4776:6804:2:2::2",
                password => "password",
                profile  => bless(do{\(my $o = 1)}, "JSON::XS::Boolean"),
              },
  },
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:08:09.897

有[`PHP::Include`](https://metacpan.org/module/PHP%3a%3aInclude)，它使用源过滤器让您在 Perl 代码中使用 PHP 块来声明变量。它还具有`read_file()`将此类过滤器应用于单个 PHP 文件的功能。

但似乎期望您的 PHP 有赋值（例如`$config = array('database' => array(...`）并将它们更改为 Perl 变量声明。

在玩了几分钟后，我无法让它对使用`return`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T22:41:59.190

如果你想要一个更“原生 Perl”的解决方案，你几乎可以*搜索并将所有“array(”及其匹配的“)”替换为“{”和“}”。这将为您提供一个称为“散列哈希”的 perl 数据结构（注意：与 PHP 不同，Perl 将具有整数索引的数组称为数组（并使用 @sigil 表示包含它们的变量），但指的是类似数组的东西将字符串索引作为“哈希”（并使用 % sigil 表示包含它们的变量）。您可能想要阅读的 Perl 关键字/概念是：

Perl 数据结构： http: [//perldoc.perl.org/perldsc.html](http://perldoc.perl.org/perldsc.html)

特别是哈希部分：[http://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES](http://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES)

如果您不明白 $hashref = \%hash 和 %hash{key} 和 $hashref->{key} 在 Perl 中的含义，您可以阅读[http://perldoc.perl.org/perlref.html](http://perldoc.perl.org/perlref.html)

示例代码（注意 getConfig 子例程与您的 PHP 代码有多么相似）：

```
#!/usr/bin/perl
use strict;
use warnings;

my $config=getConfig();

print "Database master host = " . $config->{database}{master}{hostname};
print "\n";

print "Database master password = " . $config->{database}{master}{password};
print "\n";

print "Database slave profile = " . $config->{database}{slave}{profile};
print "\n";

sub getConfig{
  return {
    'database' => {
        'master' => {
            'hostname' => 'fd35:4776:6804:2:a::1',
            'password' => 'password'
        },
        'slave' => {
            'hostname' => 'fd35:4776:6804:2:2::2',
            'password' => 'password',
            'profile'  => 'true'
        }
    }
  };
} 
```

*   我说“差不多”，因为您的示例数据对 slave->profile 值使用了裸词 'true' - 这是 Perl 中的语法错误 - 您可以将其更改为裸 1，或将值引用为“true”让它工作。在 Perl 中，数字零、字符串“0”或空/空字符串“”在布尔上下文中都计算为“假”，其他任何东西都计算为“真”。如果您选择自动化 PHP 到 Perl 的翻译，请注意，可能有其他 PHP 主义可能会像这样让您失望。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T18:27:24.420

这里有很多很好的信息，它帮助我想出了一个可行的解决方案。

这是我正在使用的 perl 脚本：

```
#!/usr/bin/perl

use PHP::Include;

include_php_vars( 'config.local.php' );

my $test = \%config;

print $test->{'database'}->{'master'}->{'hostname'}; 
```

我还取了 PHP 数组并对其进行了更改，以便它不再`return array()`而是`$config = array()`然后`return $config;`

这对我有用。谢谢！

# android - 从共享首选项打开/关闭 Toast？

> ID：15188025
> 
> 赞同：6
> 
> 时间：2013-03-03T16:50:19.033
> 
> 标签：android, sharedpreferences, toast

有没有办法使用共享首选项中的复选框全局打开和关闭 toast 通知？

```
PreferenceManager.setDefaultValues(this, R.xml.preferences, false);
        boolean showToast = myPrefs.getBoolean("showToast",
                true); 
```

我在想也许可以上课：

```
boolean showToast(){
 //code
} 
```

但是想一想，SO 可能有一个全球性的解决方案？

我应该使用不同类型的通知系统吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:40:16.487

您可以考虑扩展 Toast 以创建您的自定义类，该类足够聪明，可以在显示 toast 之前读取用户偏好。

然后重构您的代码以将 Toast 替换为 SmartToast。

`SmartToast.makeText(this, "message", Toast.LENGTH_SHORT).show();`

所以实现 SmartToast.makeText() 以返回 SmartToast 的实例并覆盖 show() 如下：

```
@Override
public void show() {
    if (PreferenceManager.getDefaultSharedPreferences(context).getBoolean("showToast", true)) {
        super.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:38:49.520

使用 onSharedPreferenceChangeListener。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:57:55.657

您只能像您这样做的方式那样为您的应用程序禁用或启用 toast 通知……但不能对所有应用程序全局启用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T16:55:38.730

为什么不将复选框值放在共享首选项中，然后使用 is 作为标志，例如 If(flag) { show toast}，这不一样吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T17:03:32.517

您可以尝试使用一个元素创建一个枚举 -

```
public enum YourSingleton {
INSTANCE;    // element in this enum

public static void makeToast(Context context, String msg) {
    Toast toast = Toast.makeText(context, msg, Toast.LENGTH_LONG);
    toast.show();
} 
```

} 然后调用 -

```
 YourSingleton .makeToast(this, "Toast Message"); 
```

当您想要打开或关闭时 - 您可以简单地在**makeToast()**方法中执行此操作。

# ruby-on-rails - Devise::RegistrationsController#create 中的 ArgumentError 没有应用程序跟踪或参数

> ID：15188026
> 
> 赞同：0
> 
> 时间：2013-03-03T16:50:29.497
> 
> 标签：ruby-on-rails, devise

我觉得这很奇怪，所以我希望有人能帮助我。我正在使用设计，并且我的用户模型定义如下：

```
class User < ActiveRecord::Base
    devise :database_authenticatable,
        :registerable,
        :token_authenticatable,
        :recoverable,
        :rememberable,
        :trackable,
        :validatable

        # Setup accessible (or protected) attributes for your model
        attr_accessible :email, :password, :password_confirmation
        attr_accessible :authentication_token
    en 
```

当我尝试注册新用户时，出现以下错误：

`ArgumentError`

这不是很有帮助，因为它不提供任何其他信息。

以下是参数：

```
{"utf8"=>"✓",
"authenticity_token"=>"9VwmXYwBHEvdDxuPmyHu6tjcKeM6QoBtz6Y4ipBTtjQ=",
"user"=>{"email"=>"jeremy@[redacted].ca",
"password"=>"[FILTERED]",
"password_confirmation"=>"[FILTERED]"},
"commit"=>"Sign up"} 
```

下面是堆栈跟踪，希望其他人能理解它。

```
bcrypt-ruby (3.0.1) lib/bcrypt.rb:160:in `create'
devise (2.2.3) lib/devise/models/database_authenticatable.rb:110:in `password_digest'
devise (2.2.3) lib/devise/models/database_authenticatable.rb:37:in `password='
activerecord (3.2.12) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.12) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.12) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.12) lib/active_record/base.rb:497:in `initialize'
devise (2.2.3) lib/devise/models/registerable.rb:20:in `new'
devise (2.2.3) lib/devise/models/registerable.rb:20:in `new_with_session'
devise (2.2.3) app/controllers/devise/registrations_controller.rb:87:in `build_resource'
devise (2.2.3) app/controllers/devise/registrations_controller.rb:13:in `create'
actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.12) lib/active_support/callbacks.rb:436:in `_run__2695083164076933069__process_action__522201399773442049__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/mapper.rb:42:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__1001537658589897327__call__4072859572188315975__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.12) lib/rails/engine.rb:479:in `call'
railties (3.2.12) lib/rails/application.rb:223:in `call'
railties (3.2.12) lib/rails/railtie/configurable.rb:30:in `method_missing' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:11:28.057

问题是`config.stretches`in的值`config/initializers/devise.rb`太高（不能高于 31）。将其更改为较低的值，事情将再次起作用。

那么我是怎么想出来的呢？就是这样：

从堆栈跟踪中，您可以看到`ArgumentError`在 bcrypt-ruby 中抛出的函数是：

```
def create(secret, options = { :cost => BCrypt::Engine::DEFAULT_COST })
    raise ArgumentError if options[:cost] > 31
    Password.new(BCrypt::Engine.hash_secret(secret, BCrypt::Engine.generate_salt(options[:cost]), options[:cost]))
end 
```

好的，所以问题是 Devise 发送的成本高于 31（这是允许的最大值）。让我们看看 Devise 调用（再次来自堆栈跟踪）：

```
def password_digest(password)
    ::BCrypt::Password.create("#{password}#{self.class.pepper}", :cost => self.class.stretches).to_s
end 
```

这就是我们发现问题的方式。:)

# java - 在 Eclipse 中编译 Python 文件返回的剖析日志

> ID：15188029
> 
> 赞同：0
> 
> 时间：2013-03-03T16:50:46.287
> 
> 标签：java, python, eclipse, string

我已经能够从一个java程序编译一个python程序。我正在捕获在 python 程序中发现的错误并将其打印在控制台中。我没有一口气得到 .py 文件中的所有错误。**我必须更正上一个错误并再次运行它以获取下一个错误。**以下是我在控制台中获得的示例： ![在此处输入图像描述](../Images/5bc311967f1462c93ab446dc52a695dd.png)

我只需要捕获行号和语法错误，例如：品脱。

这是我的程序示例，其中 log 是字符串，其中包含有关找到的错误的详细信息：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Python_Compiler {
    public static void main(String args[]){

        String ret = compile();
        System.out.println(ret);

    }
        public static String compile()
        {
            String log="";
            String myDirectory = "C:\\";
             try {
                 String s= null;
               //change this string to your compilers location
                 Process p = Runtime.getRuntime().exec("cmd /C python Hello.py", null, new java.io.File(myDirectory));

             BufferedReader stdError = new BufferedReader(new 
                  InputStreamReader(p.getErrorStream()));
             boolean error=false; 

             log+="";
             while ((s = stdError.readLine()) != null) {
                 log+=s;
                 error=true;
                 log+="\n";

             }if(error==false) log+="Compilation Successful !!!";

         } catch (IOException e) {
             e.printStackTrace();
         }
             return log;
        }

      public int runProgram() 
        {
            int ret = -1;
           try
             {            
                 Runtime rt = Runtime.getRuntime();
                 Process proc = rt.exec("cmd.exe /c start a.exe");
                 proc.waitFor();
                 ret = proc.exitValue();
             } catch (Throwable t)
               {
                 t.printStackTrace();
                 return ret;
               }
           return ret;                      
        }} 
```

**任何人都可以帮助仅提取行号和语法错误并将其存储在数组中吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:04:15.233

因此，您要捕获 3 的行号和 prit 的错误。

# c# - 入门 C# websocket 应用程序

> ID：15188031
> 
> 赞同：1
> 
> 时间：2013-03-03T16:51:26.513
> 
> 标签：c#, websocket, .net-4.5

我需要为基于 javascript 的 crm 应用程序启动 websocket 服务器。我研究了这个示例：[创建“Hello World”WebSocket 示例](https://stackoverflow.com/questions/10200910/create-hello-wold-websocket-example) 但我无法建立连接。程序抛出异常

```
var key = headerResponse.Replace("ey:", "`")
                              .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                              .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                              .Trim(); 
```

从客户端发送的帧如下所示：

> GET / HTTP/1.1 主机：localhost:9801 连接：keep-alive 缓存控制：max-age=0 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 用户-Agent：Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22 Accept-Encoding: gzip,deflate,sdch Accept-Language: pl-PL,pl;q =0.8,en-US;q=0.6,en;q=0.4 接受字符集：ISO-8859-2 ,utf-8;q=0.7,*;q=0.3

任何浏览器都缺少框架的关键部分。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T14:33:46.717

你这样做的方式在例外方面似乎有点不靠谱。尝试通过验证您收到的值来防止这种情况。我不能说你的问题到底在哪里，但这应该可以解决你的问题

> 指数数组的边界之外

```
 string key = "";
    if (string.IsNullOrEmpty(headerResponse)) 
    {
        //No header response... handle it ;)
    }
    var replacedString = headerResponse.Replace("ey:", "`");
    string[] splitted = replacedString.Split('`');
    if (splitted.Length > 1)
    {
        string replaced2 = splitted[1].Replace("\r", "");
        string[] splitted2 = replaced2.Split('\n');
        if (splitted2.Length > 0)
        {
            key = splitted2[0].Trim();
        }
        else 
        {
            // '\n' not found
        }
    }
    else 
    {
        // '`' not found
    }

    if (string.IsNullOrEmpty(key))
    {
        //do error correction
    }
    else 
    {
        //everything is fine
    } 
```

# php - 我想在本地网络上共享开发中的 Wordpress 站点。最简单的方法是什么？

> ID：15188032
> 
> 赞同：1
> 
> 时间：2013-03-03T16:51:33.290
> 
> 标签：php, wordpress, xampp

我刚买了一台新电脑，运行 Win7/64。我目前的项目都在我的 Macbook 上。当然，我可以将项目转移过来，但我喜欢便携性，所以我理想的场景是我的工作在计算机之间同步。对于大多数类型的文件使用 LAN 文件共享，这很简单，但是当涉及到我的 Wordpress 网站时，我遇到了一些问题。这是我到目前为止所尝试的：

1.  共享我的 htdocs 文件夹，然后在浏览器中通过`http://my.ip.address:portnumber/directory`. 除了一个关键问题 - `<?php bloginfo('template_url`); ?> 认为该站点的根目录`localhost`不是`my.ip.address`，这会破坏我所有的根链接，例如样式表。

2.  `MAMP/htdocs`在我的 PC 文件夹中创建我的 Macbook 共享文件夹的快捷方式`XAMPP/htdocs`。实际上不确定是否可以通过浏览器访问快捷方式文件，我尝试了几种不同的 /s 组合，但都不起作用。无论如何，这确实是一个远射。

我知道我需要在 PHP 到达我的计算机后以某种方式生成它，但我真的不知道我将如何去做。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:54:20.400

将以下内容添加到您的 wp-config.php 文件中，它将解决您在 #1 中的问题

```
define('WP_SITEURL', 'http://' . $_SERVER['HTTP_HOST']);
define('WP_HOME', 'http://' . $_SERVER['HTTP_HOST']); 
```

# php - 人类可读的文件大小

> ID：15188033
> 
> 赞同：38
> 
> 时间：2013-03-03T16:51:34.583
> 
> 标签：php, filesize

```
function humanFileSize($size)
{
    if ($size >= 1073741824) {
      $fileSize = round($size / 1024 / 1024 / 1024,1) . 'GB';
    } elseif ($size >= 1048576) {
        $fileSize = round($size / 1024 / 1024,1) . 'MB';
    } elseif($size >= 1024) {
        $fileSize = round($size / 1024,1) . 'KB';
    } else {
        $fileSize = $size . ' bytes';
    }
    return $fileSize;
} 
```

...效果很好，除了：我无法手动选择需要显示的格式，比如我只想以 MB 显示文件大小。目前如果它在 GB 范围内，它只会以 GB 显示。

另外，如何将小数限制为2？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-03T16:56:10.673

尝试这样的事情：

```
function humanFileSize($size,$unit="") {
  if( (!$unit && $size >= 1<<30) || $unit == "GB")
    return number_format($size/(1<<30),2)."GB";
  if( (!$unit && $size >= 1<<20) || $unit == "MB")
    return number_format($size/(1<<20),2)."MB";
  if( (!$unit && $size >= 1<<10) || $unit == "KB")
    return number_format($size/(1<<10),2)."KB";
  return number_format($size)." bytes";
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-05-27T11:58:45.923

[Jeffrey Sambells](http://jeffreysambells.com/2012/10/25/human-readable-filesize-php)有一个很好的例子：

```
function human_filesize($bytes, $dec = 2) 
{
    $size   = array('B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');
    $factor = floor((strlen($bytes) - 1) / 3);

    return sprintf("%.{$dec}f", $bytes / pow(1024, $factor)) . @$size[$factor];
}

print human_filesize(filesize('example.zip')); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-01-20T14:35:09.553

我正在使用这种方法：

```
function byteConvert($bytes)
{
    if ($bytes == 0)
        return "0.00 B";

    $s = array('B', 'KB', 'MB', 'GB', 'TB', 'PB');
    $e = floor(log($bytes, 1024));

    return round($bytes/pow(1024, $e), 2).$s[$e];
} 
```

在 o(1) 中效果很好。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-31T13:48:24.570

我使用（1024 = 1KB）并支持从 KB 到 YB 的一个非常短的 3 行方法如下：

```
<?php 

/**
 * Converts a long string of bytes into a readable format e.g KB, MB, GB, TB, YB
 * 
 * @param {Int} num The number of bytes.
 */
function readableBytes($bytes) {
    $i = floor(log($bytes) / log(1024));

    $sizes = array('B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');

    return sprintf('%.02F', $bytes / pow(1024, $i)) * 1 . ' ' . $sizes[$i];
}

// "1000 B"
echo readableBytes(1000);

// "9.42 MB"
echo readableBytes(9874321);

// "9.31 GB"
// The number of bytes as a string is accepted as well
echo readableBytes("10000000000");

// "648.37 TB"
echo readableBytes(712893712304234);

// "5.52 PB"
echo readableBytes(6212893712323224); 
```

[有关这些方法的更多信息，请参阅本文](https://ourcodeworld.com/articles/read/718/converting-bytes-to-human-readable-values-kb-mb-gb-tb-pb-eb-zb-yb-with-php)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-29T12:42:15.470

为了扩展 Vaidas 的答案，您应该按照以下方式来考虑新的 IEC 标准：

```
function human_readable_bytes($bytes, $decimals = 2, $system = 'binary')
{
    $mod = ($system === 'binary') ? 1024 : 1000;

    $units = array(
        'binary' => array(
            'B',
            'KiB',
            'MiB',
            'GiB',
            'TiB',
            'PiB',
            'EiB',
            'ZiB',
            'YiB',
        ),
        'metric' => array(
            'B',
            'kB',
            'MB',
            'GB',
            'TB',
            'PB',
            'EB',
            'ZB',
            'YB',
        ),
    );

    $factor = floor((strlen($bytes) - 1) / 3);

    return sprintf("%.{$decimals}f%s", $bytes / pow($mod, $factor), $units[$system][$factor]);
} 
```

从技术上讲，根据存储设备的规范等，您应该默认使用公制系统（这就是为什么 Google 转换器将 kB -> MB 显示为 mod 1000 而不是 1024）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-10T21:51:31.787

这是我用于显示人类可读文件大小的自定义函数：

```
function getHumanReadableSize($bytes) {
  if ($bytes > 0) {
    $base = floor(log($bytes) / log(1024));
    $units = array("B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"); //units of measurement
    return number_format(($bytes / pow(1024, floor($base))), 3) . " $units[$base]";
  } else return "0 bytes";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-03T17:06:12.383

你可以修改你的函数来满足你需要强制一个单位（如果给定）和调整精度。

```
function humanFileSize($size, $precision = 1, $show = "")
{
    $b = $size;
    $kb = round($size / 1024, $precision);
    $mb = round($kb / 1024, $precision);
    $gb = round($mb / 1024, $precision);

    if($kb == 0 || $show == "B") {
        return $b . " bytes";
    } else if($mb == 0 || $show == "KB") {
        return $kb . "KB";
    } else if($gb == 0 || $show == "MB") {
        return $mb . "MB";
    } else {
        return $gb . "GB";
    }
}

//Test with different values
echo humanFileSize(1038) . "<br />";    
echo humanFileSize(103053, 0) . "<br />";
echo humanFileSize(103053) . "<br />";
echo humanFileSize(1030544553) . "<br />";
echo humanFileSize(1030534053405, 2, "GB") . "<br />";  ; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-19T08:15:51.950

```
function getHumanReadableSize($size, $unit = null, $decemals = 2) {
    $byteUnits = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
    if (!is_null($unit) && !in_array($unit, $byteUnits)) {
        $unit = null;
    }
    $extent = 1;
    foreach ($byteUnits as $rank) {
        if ((is_null($unit) && ($size < $extent <<= 10)) || ($rank == $unit)) {
            break;
        }
    }
    return number_format($size / ($extent >> 10), $decemals) . $rank;
} 
```

如果 php 版本低于 5.4 使用 `$byteUnits = array('B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-18T07:25:42.787

我想要一个像 Windows 一样返回文件大小的函数，但令人惊讶的是我根本找不到。更糟糕的是，这里和其他地方的一些被破坏，因为他们假设 1KB = 1000B。

所以我编码了一个！加上两个辅助函数。他们来了：

```
// Returns a size in a human-readable form from a byte count.
function humanSize($bytes)
{
    if ($bytes < 1024) return "$bytes Bytes";

    $units = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

    foreach ($units as $i => $unit)
    {
        // The reason for this threshold is to avoid e.g., "1000 KB",
        // instead jumping from e.g., "999 KB" to "0.97 MB".
        $multiplier = pow(1024, $i + 1);
        $threshold = $multiplier * 1000;

        if ($bytes < $threshold)
        {
            $size = formatToMinimumDigits($bytes / $multiplier, false);
            return "$size $unit";
        }
    }
}

// Efficiently calculates how many digits the integer portion of a number has.
function digits($number)
{
    // Yes, I could convert to string and count the characters,
    // but this is faster and cooler.
    $log = log10($number);
    if ($log < 0) return 1;
    return floor($log) + 1;
}

// Formats a number to a minimum amount of digits.
// In other words, makes sure that a number has at least $digits on it, even if
// that means introducing redundant decimal zeroes at the end, or rounding the
// ones present exceeding the $digits count when combined with the integers.
// For example:
//     formatToMinimumDigits(10)           // 10.0
//     formatToMinimumDigits(1.1)          // 1.10
//     formatToMinimumDigits(12.34)        // 12.3
//     formatToMinimumDigits(1.234)        // 1.23
//     formatToMinimumDigits(1.203)        // 1.20
//     formatToMinimumDigits(123.4)        // 123
//     formatToMinimumDigits(100)          // 100
//     formatToMinimumDigits(1000)         // 1000
//     formatToMinimumDigits(1)            // 1.00
//     formatToMinimumDigits(1.002)        // 1.00
//     formatToMinimumDigits(1.005)        // 1.01
//     formatToMinimumDigits(1.005, false) // 1.00
// This is primarily useful for generating human-friendly numbers.
function formatToMinimumDigits($value, $round = true, $digits = 3)
{
    $integers = floor($value);

    $decimalsNeeded = $digits - digits($integers);

    if ($decimalsNeeded < 1)
    {
        return $integers;
    }
    else
    {
        if ($round)
        {
            // This relies on implicit type casting of float to string.
            $parts = explode('.', round($value, $decimalsNeeded));
            // We re-declare the integers because they may change
            // after we round the number.
            $integers = $parts[0];
        }
        else
        {
            // Again, implicit type cast to string.
            $parts = explode('.', $value);
        }

        // And because of the implicit type cast, we must guard against
        // 1.00 becoming 1, thus not exploding the second half of it.
        $decimals = isset($parts[1]) ? $parts[1] : '0';
        $joined = "$integers.$decimals".str_repeat('0', $digits);
        return substr($joined, 0, $digits + 1);
    }
} 
```

用法很简单`humanSize(123456789)`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-18T06:21:40.937

```
function bytesToHuman($bytes)
{
    $units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB'];
    for ($i = 0; $bytes > 1024; $i++) $bytes /= 1024;
    return round($bytes, 2) . ' ' . $units[$i];
} 
```

信用：[https ://laracasts.com/discuss/channels/laravel/human-readable-file-size-and-time?page=1#reply=115796](https://laracasts.com/discuss/channels/laravel/human-readable-file-size-and-time?page=1#reply=115796)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-08T11:16:47.167

我就是这样用的，干净又简单。也可以这样使用：

```
public function getHumanReadableFilesize(int $bytes, int $dec = 2): string
{
    $size   = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
    $factor = floor((strlen($bytes) - 1) / 3);

    return sprintf("%.{$dec}f %s", ($bytes / (1024 ** $factor)), $size[$factor]);
} 
```

感谢@Márton Tamás 提出添加点赞评论的建议。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-05-22T06:28:46.900

这是一个管理到 Yottabyte 的工作函数：

```
function DisplayFileSize($size, $unit = false, $precision = 2){

$b = $size;
$kb = round($size / 1024, $precision);
$mb = round($kb / 1024, $precision);
$gb = round($mb / 1024, $precision);
$tb = round($gb / 1024, $precision);
$pb = round($tb / 1024, $precision);
$eb = round($pb / 1024, $precision);
$zb = round($eb / 1024, $precision);
$yb = round($zb / 1024, $precision);

if((!$unit && floor($kb) == 0) || $unit == "b") {
    return array("value" => FormatNumber($b), "unit" => "bytes");
} else if((!$unit && floor($mb) == 0) || $unit == "kb") {
    return array("value" => FormatNumber($kb, 2), "unit" => "Kb");
} else if((!$unit && floor($gb) == 0) || $unit == "mb") {
    return array("value" => FormatNumber($mb, 2), "unit" => "Mb");
 } else if((!$unit && floor($tb) == 0) || $unit == "gb") {
     return array("value" => FormatNumber($gb, 2), "unit" => "Gb");
 } else if((!$unit && floor($pb) == 0) || $unit == "tb") {
     return array("value" => FormatNumber($tb, 2), "unit" => "Tb");
 } else if((!$unit && floor($eb) == 0) || $unit == "pb") {
    return array("value" => FormatNumber($pb, 2), "unit" => "Pb");
 } else if((!$unit && floor($zb) == 0) || $unit == "eb") {
     return array("value" => FormatNumber($eb, 2), "unit" => "Eb");
 } else if((!$unit && floor($yb) == 0) || $unit == "zb") {
     return array("value" => FormatNumber($zb, 2), "unit" => "Zb");
} else {
    return array("value" => FormatNumber($yb, 2), "unit" => "Yb");
} 
```

}

# excel - 在 Excel 中的图表中显示多个结果？

> ID：15188034
> 
> 赞同：0
> 
> 时间：2013-03-03T16:51:36.240
> 
> 标签：excel, graph, bar-chart, fibonacci

嘿，我需要在 excel 中的图表中显示以下结果，以便所有结果都在一个图表中？

```
Results     Addition    ArrayLookup Function Call   Fibonacci
Opt1        462         1259        891             14
Opt2        511         1191        865             13 
```

我似乎无法在excel中找到一种方法来做到这一点。我想要 x 轴上的 opt1、opt2 等，然后是 y 轴上的时钟周期，以及所有 4 个不同颜色的测试程序。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:42:28.947

您要查找的图表类型是“聚集条形/柱形”。就您的表格而言，它希望按列分组，因为只需选择您的数组并单击图表类型不会吐出您想要的图表。在 Office for Mac 上，有一个“切换绘图”按钮，它将告诉 excel 对行进行分组。如果你找不到它，只需转置数组并制作一个聚集的条形图/柱形图就可以了。

# matlab - 在加权图中显示路径

> ID：15188035
> 
> 赞同：0
> 
> 时间：2013-03-03T16:51:40.260
> 
> 标签：matlab

我有一个加权图。我为图中的每个节点分配了三个键。我想要一个代码，给定图中的两个唯一节点，如果存在公共键，它将显示连接两个节点的所有路径。节点也可以以多跳方式连接。

```
keypool = randint(n,n,[1,10]) %key pool generation
for l = 1:n
for k = 1:3
    nodekey(l,k) = keypool(l,k);%Selects key from key pool
end;
end;
for i=1:n
fprintf('%s %d \t =  %d  %d  %d \n','key_node',i,nodekey(i,:));
end 
```

这是我为生成所有节点的随机密钥而编写的代码。只有当有一个公共密钥时，我才知道如何找到两个节点之间的路径。输入节点数：5

```
keypool =

 5     3     1     7     7
 3     7     8     4     3
 9     3    10     7    10
 2     5     2     7     8
 7    10     7     3     5

key_node 1   =  5  3  1 
key_node 2   =  3  7  8 
key_node 3   =  9  3  10 
key_node 4   =  2  5  2 
key_node 5   =  7  10  7 
```

n 的值是用户输入的节点数。上面的代码将为五个节点生成这样的随机密钥。如果我想找到 node1 和 node5 之间的路径，假设可能的路径是：1->2->3->5、1->5、1->2->5。应该打印仅具有公共密钥的路径。即 1->2->3->5, 1->2->5。

```
wt=zeros(n,n);
while(1)
    i=input('enter the starting node:(0 to quit):');
    if (i==0)    
        break;
    end
    j=input('enter the destination node:');
    wt(i,j)=input('Enter the cost: '); 
end
disp('Adjacency Matrix');
for i=1:n
fprintf('           %d',i);
end
for i=1:n
fprintf('\n%d          ',i);
for j=1:n
    fprintf('%d          ',wt(i,j));
end
end
Adjacency Matrix
       1           2           3           4           5
1          0          1          1          0          0          
2          0          0          0          0          0          
3          1          0          0          1          0          
4          0          0          1          0          0          
5          0          0          0          0          0 
```

这意味着节点 (1,2) (1,3) (3,4) (4,3) 已连接。

用户在图中输入连接性。密钥池中的数字是随机生成的。分配给 node1 的键是 5,3,1 和 node5 7,10,7。这两个节点没有公共密钥。因此不应打印此路径。如果源 (node1) 存在公共密钥，则应将路由遍历到目标 (node 5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:51:33.113

您可以将问题分解为两个步骤：

1.  确定哪些节点已连接*并*共享相同的密钥。此信息将存储在一个矩阵中（我们用 表示`M`），我将其称为*修改后的邻接矩阵*。

2.  根据修改后的邻接矩阵查找从一个节点到另一个节点的所有可能路径。

第一部分可以这样解决：

```
%// Obtain matrix 'sh' where each element at position (i, j) indicates if
%// node i and node j share a key
pairs = nchoosek(1:n, 2);                %// All possible pairs of nodes
sh = zeros(n);
for k = 1:size(pairs, 1)
    node1 = pairs(k, 1);
    node2 = pairs(k, 2);
    sh(node1, node2) = any(ismember(nodekey(node1, :), nodekey(node2, :)));
    sh(node2, node1) = sh(node1, node2); %// Matrix must be symmetrical
end

%// Obtain the modified adjacency matrix
M = sh & (wt > 0); 
```

我会把第二部分留给你。使用给定的（修改的）邻接矩阵找到从节点 A 到节点 B 的所有可能路径`M`是一个众所周知的问题。这是它的一种可能实现的[链接。](http://www.mathworks.com/matlabcentral/fileexchange/27438-find-all-the-possible-paths-between-a-start-and-an-end-node-of-a-graph)

希望这可以帮助！

**PS：**您可以通过编写
来简化生成：`nodekey`

```
nodekey = keypool(:, 1:3); 
```

MATLAB 的向量化操作确实可以帮助使代码更加高效和优雅！

# java - Java-单击按钮时执行 bat 文件，在关闭 Java 窗口之前

> ID：15188037
> 
> 赞同：0
> 
> 时间：2013-03-03T16:52:05.067
> 
> 标签：java, batch-file

我有一个按钮，我想要的是单击按钮执行一个bat文件背景，它将在文件夹中生成一个文件，并且Java窗口仍然存在。

但在我的代码中，我需要关闭 Java 窗口才能执行 bat 文件。

你能帮忙检查一下我需要改变的地方吗？

我不需要看蝙蝠屏幕。谢谢！

```
final JButton importMap = new JButton("Import");

    importMap.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent arg1) {

            //String osm = osmFile_path.replaceAll("\\","\\\\");
            System.out.println("You are going to import:"+osmFile_path);
            //Runtime.getRuntime().exec()
            try {
                FileWriter fw2 = new FileWriter("C:\\SUMO\\bin\\OSMTEST.bat");
                fw2.write("@echo off");
                fw2.write("\r\n");
                fw2.write("cmd");
                fw2.write("\r\n");
                fw2.write("set default_dir=C:\\SUMO\\bin");
                fw2.write("\r\n");
                fw2.write("start /b C:\\SUMO\\bin\\netconvert --osm-files="+osmFile_path+" --output-file="+osmnet_file);
                fw2.close();
                Runtime.getRuntime().exec("cmd.exe /C start /b C:\\SUMO\\bin\\OSMTEST.bat");
            } catch(IOException e) {
                e.printStackTrace();
            }
        }
    });

    content.add(importMap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:03:07.493

您不应该在`start`参数中使用`Runtime.getRuntime.exec()`参数。它会导致打开一个新窗口以执行指定的命令。

这应该工作

`Runtime.getRuntime().exec("cmd.exe /C C:\\SUMO\\bin\\OSMTEST.bat");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:19:03.817

您确实应该使用以下代码：

```
 try {
    FileWriter fw2 = new FileWriter("C:\\SUMO\\bin\\OSMTEST.bat");
    fw2.write("@echo off");
    fw2.write("\r\n");
    //fw2.write("cmd");//No need to specify this line
    fw2.write("\r\n");
    fw2.write("set default_dir=C:\\SUMO\\bin");
    fw2.write("\r\n");
    fw2.write("start /b C:\\SUMO\\bin\\netconvert --osm-files="+osmFile_path+" --output-file="+osmnet_file);
    fw2.write("\r\n");
    fw2.write("Exit");//To close bat file
    fw2.write("\r\n");
    fw2.close();
    Process process = Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + "C:\\SUMO\\bin\\OSMTEST.bat");//use the protoclhandler
    process.waitFor();//Waits the process to terminate
    if (process.exitValue() == 0)
    {
        System.out.println("Process Executed Successfully");
    }
} catch(Exception e) {//Process.waitFor() can throw InterruptedException
e.printStackTrace();
} 
```

# jquery - 简单的 jQueryUI 对话框导致 1.9 出现错误

> ID：15188039
> 
> 赞同：0
> 
> 时间：2013-03-03T16:52:19.403
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我以前使用过以下脚本，并且效果很好。我现在收到以下错误：

```
Error: cannot call methods on dialog prior to initialization; attempted to call method 'close'.
jquery-latest.js (line 507) 
```

如果升级到 jQueryUI 1.10.1，它不再导致错误。通常，我会放手，升级，而不用担心。这个问题是它在过去有效，那么为什么现在不让我发疯呢？我一定在做一些与以前不同的傻事，但我看不到。

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Dialog</title>
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
        <link type="text/css" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" rel="stylesheet" />
        <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js" type="text/javascript"></script> 
        <script>
            $(function() {
                $("#open").click(function(){$("#dialog").dialog('open');return false;});
                $( "#dialog" ).dialog({
                    modal: true,
                    autoOpen    : false,
                    buttons: {
                        Ok: function() {
                            $( this ).dialog( "close" );
                        }
                    }
                });
            });
        </script>
    </head>
    <body>
        <button id="open">Click</button>
        <div id="dialog" title="What ever"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T20:03:48.403

我有一个类似的问题，我通过在对话框声明之外定义我的按钮数组来解决。

```
var buttonArray = {};
buttonArray["Ok"]=function() { $( this ).dialog( "close" );} 
```

您的选择将变为：

```
     模态：真，
     自动打开：假，
     按钮：按钮数组

```

# c# - 如何从不返回视图的不同项目中调用控制器操作

> ID：15188040
> 
> 赞同：1
> 
> 时间：2013-03-03T16:52:27.610
> 
> 标签：c#, asp.net-mvc-3

我有 2 个项目 MVCMembership 和使用会员资格的主 Web 项目，我需要从我的主 Web 项目的控制器中的会员项目中的控制器中获取一些日期。这就是我尝试的：这是来自我的会员控制器

```
public ViewResult Index(int? index)
    {
        if (Roles.IsUserInRole("Group Admin"))
        {
            string[] roles = Roles.GetRolesForUser();

            var GroupUsers = RedirectToAction("UsersInGroup", "Account", new { Area = "" }); 
```

这是我的网络项目控制器中的操作：

```
public MembershipUserCollection UsersInGroup()
    {
        var groupResultSet = db.aspnet_UsersInGroups.Where(u => u.UserID == (Guid)Membership.GetUser().ProviderUserKey);
        var group = groupResultSet.Single().aspnet_Group;
        return group.Users;
    } 
```

所以这不起作用，因为 RedirectToAction 返回 RedirectToRouteResult。有没有办法做到这一点？

更清楚地说，假设您在一个类中有 2 个简单的方法

```
public somthing Method1()
{
    //doing something
    //call some other method
    var parm = Method2();
    //doing something whit parm
    return somethingelse;
}

public something Method2()
{
    //doing something
    return parm;
} 
```

现在把它放在上下文中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:15:34.690

有两种方法可以执行此操作。

**坏处**：控制器中的操作只是方法，因此您可以直接调用它们，您需要创建控制器的实例，然后调用您的方法：

```
public ViewResult Index(int? index)
{
    if (Roles.IsUserInRole("Group Admin"))
    {
        string[] roles = Roles.GetRolesForUser();
        var accountController = new AccountController()
        var GroupUsers = accountController.UsersInGroup(); 
```

**优点**：阅读有关将 IOC 容器连接到 MVC 应用程序中的内容，从控制器中删除所需的方法并将其放入服务中，然后将服务注入到控制器中。

```
 public YourController:Controller
 {
     private IMembershipService  _membership 
     public YourController(IMembershipService membership)
     {
         _membership = membership;
     } 

     public ViewResult Index(int? index)
     {
       if (Roles.IsUserInRole("Group Admin"))
       {
           string[] roles = Roles.GetRolesForUser();

           var GroupUsers = _membership.UsersInGroup(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:00:55.280

如果您可以从其他项目调用控制器，则可以使用 Response.Redirect(

```
public EmptyResult Home()
  {
     Response.Redirect("http://YourDoimein.com/Controller/Action");
  } 
```

# eclipse - hadoop 2中的hadoop jar文件在哪里？

> ID：15188042
> 
> 赞同：24
> 
> 时间：2013-03-03T16:52:41.793
> 
> 标签：eclipse, hadoop, jar

我正在尝试使用 Hadoop 实现一个示例字数统计程序。我已经下载并安装了`Hadoop 2.0.0`. 我想使用 Eclipse 来做这个示例程序，因为我认为稍后在我的实际项目中我必须只使用 Eclipse。

我无法找到与 Hadoop 相关的 jar 文件`hadoop-core.jar`和其他所需的 jar 文件。我搜索了 2.0 hadoop 的所有文件夹，但找不到这些文件。这些相同的文件在 Hadoop 1.0 版本中可用，但在 2.0 版本中不可用。我想知道我在哪里可以得到这些文件？

我无法找到有关 2.0 版本的太多信息。

请帮忙

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-04T12:54:50.853

实际上，我一开始也遇到了类似的问题。显然，版本 2 没有`hadoop-core.jar`。您必须下载 Hadoop [Common](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common)和[MapReduce Client Core](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-mapreduce-client-core) jar 并同时使用它们。我相信它会解决你的问题。希望这可以帮助！

**编辑：**我刚刚更新了链接，以便人们可以从存储库中选择适当的版本，因为我们现在已经超越了初始版本 2。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-24T13:14:59.213

在下面列出的文件夹中包含 JAR 对我有用：

```
share\hadoop\common       
share\hadoop\common\lib   
share\hadoop\mapreduce    
share\hadoop\mapreduce\lib
share\hadoop\yarn         
share\hadoop\yarn\lib 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-04T00:11:07.097

hadoop-core-${HADOOP_VERSION}.jar 在

```
${HADOOP_HOME}/share/hadoop/common 
```

目录，而不是 ${HADOOP_HOME} 目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-18T05:14:29.773

这适用于我在 Hadoop 2.6.0 上的 Mac 上：

```
hadoop/2.6.0/libexec/share/hadoop/common/hadoop-common-2.6.0.jar 
```

或者直接在hadoop目录下搜索“.jar”，就可以看到所有的.jar文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-16T17:51:10.927

`hadoop-core-{version}.jar``hadoop-common-{version}.jar`从 Hadoop 2+开始

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-13T18:21:37.077

我们可以从[https://mvnrepository.com](https://mvnrepository.com)网站获取 jar 文件。

示例 - [https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.2.1](https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.2.1)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-20T06:27:26.070

在 hadoop 2.7.2 上，我必须将其设置为与 HADOOP_COMMON_HOME 相同。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-18T14:39:22.767

在下面的位置，您可以找到由您安装的发行版命名的文件夹，里面有一个 jar 文件夹。/opt/cloudera/parcels/[cloudera 发行版]/jars/

示例：/opt/cloudera/parcels/CDH-5.4.10/jars

# ios - 横向时的 UIPageControl 和 UIScrollView

> ID：15188043
> 
> 赞同：0
> 
> 时间：2013-03-03T16:52:42.027
> 
> 标签：ios, uiview, uiscrollview, screen-orientation, uipagecontrol

我遇到了 UIPageControl 和 UIScrollView 的问题。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    imageArray = [[NSArray alloc] initWithObjects:@"image1.jpg", @"image2.jpg", @"image3.jpg", nil];

    for (int i = 0; i < [imageArray count]; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
        imageView.image = [UIImage imageNamed:[imageArray objectAtIndex:i]];
        [self.scrollView addSubview:imageView];
    }
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [imageArray count], scrollView.frame.size.height);

    scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    pageControl.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
}

#pragma mark - UIScrollView Delegate

- (void)scrollViewDidScroll:(UIScrollView *)sender
{
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
} 
```

当我将方向更改为横向时会出现问题。image1.jpg 与 image2.jpg 共享视图，这不是我想要的。

但是，如果我将方向改回纵向，则视图效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:18:51.837

问题是页面大小已经改变（即滚动视图的宽度），但图像的宽度没有改变。

一种解决方案是，当您旋转时，您重新计算 UIImageViews 的大小并计算滚动视图的 contentSize。也就是说，将 for 循环和对 scrollView.contentSize 的赋值从**viewDidLoad**移到私有方法中，比如 sizeImagesAndSetContentSize。**从willAnimateRotationToInterfaceOrientation:duration**调用它：类似于以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    imageArray = [[NSArray alloc] initWithObjects:@"image1.jpg", @"image2.jpg", @"image3.jpg", nil];

    [self sizeImagesAndSetContentSize];

    scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    pageControl.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
}

- (void) sizeImagesAndSetContentSize {
       for (int i = 0; i < [imageArray count]; i++) {
            CGRect frame;
            frame.origin.x = self.scrollView.frame.size.width * i;
            frame.origin.y = 0;
            frame.size = self.scrollView.frame.size;

            UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
            imageView.image = [UIImage imageNamed:[imageArray objectAtIndex:i]];
            [self.scrollView addSubview:imageView];
        }
        scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [imageArray count], scrollView.frame.size.height);
}
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    [self sizeImagesAndSetContentSize];

} 
```

顺便说一句，**viewDidLoad**不是进行几何计算的地方——就像涉及到 scrollView 框架的事情一样，因为那时还没有设置几何。在**viewDidLoad**中，事物的大小是它们在故事板（或笔尖）中的大小，并且尚未根据实际设备和实际方向进行调整。如果到目前为止它对您有用，那是因为您从故事板布局的方向开始。可能是这样做的最佳位置，因此调用**sizeImagesAndSetContentSize**是在方法**viewDidLayoutSubviews**中。事实上，如果你把调用移到那里，你就不需要在旋转时显式调用它，因为当旋转发生时，视图会布置子视图和**viewDidLayoutSubviews**将被自动调用。所以我建议：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    imageArray = [[NSArray alloc] initWithObjects:@"image1.jpg", @"image2.jpg", @"image3.jpg", nil];

    scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
    pageControl.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
}

- (void) sizeImagesAndSetContentSize {
       for (int i = 0; i < [imageArray count]; i++) {
            CGRect frame;
            frame.origin.x = self.scrollView.frame.size.width * i;
            frame.origin.y = 0;
            frame.size = self.scrollView.frame.size;

            UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
            imageView.image = [UIImage imageNamed:[imageArray objectAtIndex:i]];
            [self.scrollView addSubview:imageView];
        }
        scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [imageArray count], scrollView.frame.size.height);
}

- (void)viewDidLayoutSubviews {
    [self sizeImagesAndSetContentSize];
} 
```

附录：
在图像中添加文字：

要在图像顶部添加文本——您可以在滚动视图的“顶部”添加文本元素，如标签。考虑以下应用程序的屏幕截图。在顶级 Cloud Slide Show View 中有一个全屏滚动视图，在相同的层次结构级别但在子视图列表的更下方（因此在滚动视图的“顶部”）是描述标签，3 个按钮，和一个 UIPageControl。标签设置为通过支柱和弹簧（在 iOS 5 上运行）在旋转时调整大小，因此您不必弄乱它。

![文本叠加的故事板结构](../Images/595096dd398af1fa719bd55eceeea65a.png)

此应用程序更改描述标签以匹配当前显示在滚动视图页面中的图像——因此它必须检测页面更改。此应用程序在滚动视图委托协议方法**scrollViewDidEndDecelerating:**中执行此操作：它决定滚动停止时屏幕上显示的图像并填写正确的描述。

另一种方法是在每个 UIImage 上放置一个标签，但这很混乱，这就是我的应用程序不这样做的原因。您可能希望视图同时包含 UIImage 和标签，以便重新定位标签是有意义的。可能在代码中创建它......对我来说，太麻烦了。

顺便说一句，我应该说在滚动视图中使用页面模式可能不再是执行此操作的“最佳实践”方式。我正在将我的应用程序转换为使用 UIPageViewController 来简化应用程序。例如，您不必执行 resize-on-rotate 的操作，因为 UIPageViewControl 的各个子 VC 可以自动调整自己的大小。

# objective-c - NSString 与 NSMutablestring 之间的区别的实际示例是什么？

> ID：15188044
> 
> 赞同：0
> 
> 时间：2013-03-03T16:52:48.280
> 
> 标签：objective-c, nsstring, nsmutablestring

我一直在寻找这里的问题，在我测试自己的一些代码以测试差异时，找不到简单的例子来指出我的区别。

据我了解，在诸如“NSString”之类的“不可变”字符串中，我无法执行任何“NSString”方法来修改字符串，例如：

```
NSString *s = @"cat";

    s = [NSString stringWithString:@"blamp"];

    NSLog(@"%@", s); 
```

但它确实有效..

请尝试给我和其他新手一个非常简单的例子，说明什么不起作用以及为什么。tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:56:39.137

该声明 ：

```
s = [NSString stringWithString:@"blamp"]; 
```

实际上为字符串“blamp”创建了一个新的内存位置，并且旧地址`s`被这个新地址替换。

你会感觉到同样`s`的更新！！！实际上，指针现在指向其他一些内存地址。

* * *

字符串操作意味着更改相同的字符串：就好像你尝试

```
NSString *s = @"cat";
[s appendString:@"s"];//tries to append to the same. this will through error.
//the above works with NSMutableString. 
```

# function - 函数返回不返回值给main

> ID：15188045
> 
> 赞同：0
> 
> 时间：2013-03-03T16:53:10.087
> 
> 标签：function, visual-c++, return, return-value

所以，这是我在 C++ 中摆弄函数的第一个任务——我认为我理解这是因为它们与 C# 中的方法非常相似。但是，尽管我的 main 调用我的函数很好，并且函数运行并返回到 main - 它不会发回它在返回时调用的变量信息。我不确定我做错了什么 - 它似乎设置得当（IE - 就像我书中的示例代码一样）这是主要代码......

```
#include <iostream>
#include <cmath>
#include <string>

using namespace std;

int main()

{

    double retrieveSales=0, sales1=0, sales2=0, sales3=0, sales4=0;
    string division, division2, division3, division4;
    double getSales(string);

    cout<<"Enter division.\n";
    cin>>division;

    getSales(division);
    retrieveSales=sales1;

    cout<<"Enter second division.\n";
    cin>>division2;

    getSales(division2);
    retrieveSales=sales2;
    cout<<"Print Sales"<<sales2;

    cout<<"Enter third division.\n";
    cin>>division3;

    getSales(division3);
    retrieveSales=sales3;
    cout<<"Print Sales"<<sales3;

    cout<<"Enter fourth division.\n";
    cin>>division4;

    getSales(division4);
    retrieveSales=sales4;
    cout<<"Print Sales"<<sales4;

    system("pause");
    return 0;
    } 
```

这是它调用的函数的代码

```
#include <iostream>
#include <cmath>
#include <string>

using namespace std;

double getSales(string division)
{
    double retrieveSales;

    cout<<"What are the sales for "<<division<<endl;
    cin>>retrieveSales;
    while(retrieveSales<0.0)
    {
        cout<<"Please enter a valid sales amount no less than $0.00.\n";
        cin>>retrieveSales;
    }
    system("pause");
    return retrieveSales;
} 
```

如何让我的函数将retrieveSales 的值返回到主要的retrieveSales？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:55:17.437

在这一行：

```
getSales(division); 
```

您正在丢弃返回值，您需要将其分配给一个变量：

```
sales1 = getSales(division); 
```

# algorithm - 顺序搜索的时间复杂度

> ID：15188046
> 
> 赞同：1
> 
> 时间：2013-03-03T16:53:14.953
> 
> 标签：algorithm, recursion, time-complexity

我试图找到具有以下等式的选择排序的时间复杂度
`T(n)=T(n-1)+O(n)`

首先，我认为它的 T(n)=T(n-1)+n .. n 更容易..
想通 了`T(n-1) = T(n-2) + (n-1)` ， `T(n-2) = T(n-3) + (n-2)`

这使得`T(n) = (T(n-3) + (n-2)) + (n-1) + n`它的`T(n) = T(n-3) + 3n - 3`..

K 而不是 (3) ..`T(n) = T(n-k) + kn - k`

并且因为 nk >= 0 .. = =>`n-k = 0`回到`n=k`

方程它的..`T(n) = T(0)// which is C + n*n - n`

这使它成为`C + n^2 -n`..所以它的 O(n^2).. 是我所做的 ryt??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:30:39.597

是的，您的解决方案是正确的。您正在将 O(n) 与 O(n-1)、O(n-2) ... 结合起来，然后得出 O(n^2)。你可以申请`O(n) + O(n-1) = O(n)`，但只能是有限的。在一个系列中它是不同的。

```
T(n) = (0 to n)Σ O(n - i) 
```

忽略 O() 中的 i，你的结果是 O(n^2)

您给出的递归关系`T(n)=T(n-1)+O(n)`对于选择排序是正确的，它的总体时间复杂度为 O(n^2)。检查此[链接](http://www.cs.duke.edu/~ola/ap/recurrence.html)以验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:31:55.330

```
In selection sort: 
```

在迭代 i 中，我们找到最小剩余条目的索引 min。然后交换 a[i] 和 a[min]。

因此选择排序使用

`(n-1)+(n-2)+....+2+1+0 = (n-1)*(n-2)/2 = O(n*n) compares`

`and exactly n exchanges(swappings).`

**从上面**

从上面给出的递归关系

```
=> T(n) = T(n-1)+ O(n)
=> T(n) = T(n-1)+ cn, where c is some positive constant
=> T(n) = cn + T(n-2) + c(n-1)
=> T(n) = cn + c(n-1) +T(n-3)+ c(n-2) 
```

这样继续下去，我们终于得到了

```
=> T(n) = cn + c(n-1) + c(n-2) + ...... c (total no of n terms)
=> T(n) = c(n*(n-1)/2)
=> T(n) = O(n*n) 
```

**编辑**

将 theta(n) 替换为 cn 总是更好，其中 c 是某个常数。有助于更轻松地可视化方程式。

# c++ - C++ 中的 rand() 和 srand()

> ID：15188049
> 
> 赞同：8
> 
> 时间：2013-03-03T16:53:39.047
> 
> 标签：c++, random

## C++中产生随机数的基础是什么？

> 这背后有什么逻辑或原则吗？
> 
> 生成的数字是完全随机的吗？

假设我正在运行这个程序：

```
#include <iostream.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    /*
    Declare variable to hold seconds on clock.
    */
    time_t seconds;
    /*
    Get value from system clock and
    place in seconds variable.
    */
    time(&seconds);
    /*
    Convert seconds to a unsigned
    integer.
    */
    srand((unsigned int) seconds);
    /*
    Output random values.
    */
    cout<< rand() << endl;
    cout<< rand() << endl;
    cout<< rand() << endl;
    return 0;
} 
```

它显示了什么：http: [//img14.imageshack.us/img14/1538/98271820.png](http://img14.imageshack.us/img14/1538/98271820.png)

它显示 205 两次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:32:28.373

这个问题基本上在评论和另一个答案中得到了回答，但我会把它收集在一个地方。

C++`rand()`函数产生的不是真正随机的数字序列，而是伪随机序列。这意味着它基本上是一个预定义的“*随机*”数字序列，但固定在某个地方（实际上，它比这更复杂，但这是为了更好地理解而进行的简化）。把它想象成一长串整数。

每次调用`rand()`函数都会提取当前数字并将指向“当前“随机”数字”的指针移动到下一个。

`srand()`函数所做的基本上是将指针设置为列表中的某个位置。如果您不在`srand()`每次启动时调用该函数，或者使用固定参数（种子）调用它，那么每次程序启动时您将拥有相同的数字序列。

当您从几秒钟开始设置种子时，如果您在那一秒内启动程序两次，您的种子将是相同的 - 因此会产生相同的结果。

试试下面的代码：

```
#include <windows.h>
// << other code >>
for (int i=0; i<50; i++) {
    time(&seconds);
    srand(seconds);
    cout<< seconds<<" "<<rand()<<endl;
    Sleep(100);
} 
```

您会注意到，每个“秒”值对应于`rand()`函数的某个固定“第一”值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:18:09.477

从第二个问题开始：

> 生成的数字是完全随机的吗？

不，这在计算机中不太可能发生。它们是“伪随机”数字，它是一些数字序列，随着时间的推移以类似随机的方式变化。但是如果你从同一个“种子”开始，你每次都会得到相同的序列。这种可预测性有时非常有用，因为它允许多次重复相同的实验并获得相同的结果——改变种子，将允许类似的运行产生不同的结果。

该函数`srand`设置种子。有些系统确实有一个名为 的函数`randomize`，但它不是标准的一部分。如果它确实存在，它将种子设置为代码未知的东西 - 例如以毫秒为单位的当前时间。

> 这背后有什么逻辑或原则吗？

是的。有几种方法可以生成伪随机数。简单的可以使用常规`int`或`long`类型用一两行 C 代码编写，只包括取“当前值”+某个常数，乘以某个大数并取模另一个大数。

更复杂的涉及数十行相当复杂的大量数学 - 例如，Mersenne Twister 是最近的一项工作，如果你稍微搜索一下，它可以作为源代码获得。

# windows - Windows 中的 Nutch：无法设置路径的权限

> ID：15188050
> 
> 赞同：8
> 
> 时间：2013-03-03T16:53:40.767
> 
> 标签：windows, solr, hadoop, cygwin, nutch

我正在尝试在 Windows 机器上使用带有 Nutch 的 Solr，但出现以下错误：

```
Exception in thread "main" java.io.IOException: Failed to set permissions of path: c:\temp\mapred\staging\admin-1654213299\.staging to 0700 
```

从我了解到的很多线程中，nutch 似乎使用的 hadoop 具有一些`chmod`可以在 Unix 机器上工作的魔法，但在 Windows 上却不行。

这个问题已经存在一年多了。我找到了一个线程，其中显示了代码行并提出了修复建议。我真的只有他们一个有这个问题吗？所有其他人是否都在创建自定义构建以便在 Windows 上运行 nutch？或者是否有一些选项可以禁用 hadoop 的东西或其他解决方案？也许另一个爬虫而不是 nutch？

这是我正在做的事情的堆栈跟踪：

```
 admin@WIN-G1BPD00JH42 /cygdrive/c/solr/apache-nutch-1.6
    $ bin/nutch crawl urls -dir crawl -depth 3 -topN 5 -solr http://localhost:8080/solr-4.1.0
    cygpath: can't convert empty path
    crawl started in: crawl
    rootUrlDir = urls
    threads = 10
    depth = 3
    solrUrl=http://localhost:8080/solr-4.1.0
    topN = 5
    Injector: starting at 2013-03-03 17:43:15
    Injector: crawlDb: crawl/crawldb
    Injector: urlDir: urls
    Injector: Converting injected urls to crawl db entries.
    Exception in thread "main" java.io.IOException: Failed to set permissions of path:         c:\temp\mapred\staging\admin-1654213299\.staging to 0700
        at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:689)
        at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:662)
        at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
        at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
        at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
        at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:116)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Unknown Source)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
        at org.apache.nutch.crawl.Injector.inject(Injector.java:281)
        at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T20:49:41.130

我花了一段时间才让它工作，但这是适用于 nutch 1.7 的解决方案。

1.  从 maven 存储库下载[Hadoop Core 0.20.2](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/0.20.2)
2.  替换`$NUTCH_HOME/lib/hadoop-core-1.2.0.jar`为下载的文件，将其重命名为相同的名称。

应该是这样的。

**解释**

此问题是由 hadoop 引起的，因为它假定您在 unix 上运行并遵守文件权限规则。这个问题实际上在 2011 年得到了解决，但 nutch 没有更新他们使用的 hadoop 版本。相关修复在[这里](https://issues.apache.org/jira/browse/HADOOP-7126)和[这里](https://issues.apache.org/jira/browse/HDFS-1084)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T20:50:47.927

我们也在使用 Nutch，但它不支持在 Windows 上运行，在 Cygwin 上，我们的 1.4 版本也有类似的问题，比如 mapreduce。

我们通过在 Ubuntu 上使用 vm（虚拟机）以及 Windows 和 Linux 之间的共享目录来解决它，因此我们可以在 Windows 上开发和构建，并在 Linux 上运行 Nutch（爬行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:59:38.403

我在 Windows 上运行 Nutch，没有自定义构建。虽然我已经很久没有使用它了。但是我花了一段时间才明白的一件事是，您需要以 Windows 管理员身份运行 cygwin 才能获得必要的权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T15:19:50.703

我建议采用不同的方法。检查[此链接](https://github.com/congainc/patch-hadoop_7682-1.0.x-win)。它解释了如何在 Windows 上吞下错误，并且不需要您降级 Hadoop 或重建 Nutch。我在 Nutch 2.1 上进行了测试，但它也适用于其他版本。我还制作[了一个简单的 .bat 来启动爬虫和索引器](https://github.com/veggen/nutch-windows-script)，但它适用于 Nutch 2.x，可能不适用于 Nutch 1.x。

为了后代，该方法需要：

1.  进行自定义`LocalFileSystem`实现：

    ```
    public class WinLocalFileSystem extends LocalFileSystem {

        public WinLocalFileSystem() {
            super();
            System.err.println("Patch for HADOOP-7682: "+
                "Instantiating workaround file system");
        }

        /**
         * Delegates to <code>super.mkdirs(Path)</code> and separately calls
         * <code>this.setPermssion(Path,FsPermission)</code>
         */
        @Override
        public boolean mkdirs(Path path, FsPermission permission)
                throws IOException {
            boolean result=super.mkdirs(path);
            this.setPermission(path,permission);
            return result;
        }

        /**
         * Ignores IOException when attempting to set the permission     
         */
        @Override
        public void setPermission(Path path, FsPermission permission)
                throws IOException {
            try {
                super.setPermission(path,permission);
            }
            catch (IOException e) {
                System.err.println("Patch for HADOOP-7682: "+
                    "Ignoring IOException setting persmission for path \""+path+
                    "\": "+e.getMessage());
            }
        }
    } 
    ```

2.  编译它并将 JAR 放在`${HADOOP_HOME}/lib`

3.  然后通过修改注册它`${HADOOP_HOME}/conf/core-site.xml`：

    fs.file.impl com.conga.services.hadoop.patch.HADOOP_7682.WinLocalFileSystem 为 Windows 上的 HADOOP-7682 问题启用补丁

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T13:49:58.573

您必须更改项目依赖项 hadoop-core 和 hadoop-tools。我正在使用 0.20.2 版本并且工作正常。

# javascript - 处理多个 JSON 对象

> ID：15188051
> 
> 赞同：0
> 
> 时间：2013-03-03T16:53:43.177
> 
> 标签：javascript, json, performance, jquery

如果我有这样的函数，我会传入一个movieid变量。

```
function getFilmDetails(movieid) {
    var filmDetails = 0;

    $.ajax({

        dataType: "json",
        type: 'get',
        mimeType: "textPlain",
        url: 'http://api.themoviedb.org/3/movie/' + movieid,
        async: false,
        success: function(result){

             if(result.popularity > 10000) {
                 result.popularity = 10000;
            } 
            if(result.popularity < 0.1) {
                 result.popularity = 0.1;
            } 

            filmDetails = result;
        }
    });

    return filmDetails;
} 
```

我通过这个函数调用了 100 多部电影的细节，你可以想象，通过这种方式加载页面需要很长时间。我需要轻松访问每部电影的 JSON 中的值。例如：

```
alert(getFilmDetails(12345).description);
alert(getFilmDetails(65432).popularity);
alert(getFilmDetails(12345).tagline); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:06:25.947

```
 // receive a callback------------v
function getFilmDetails(movieid, callback) {
    var filmDetails = 0;
    $.ajax({
        dataType: "json",
        type: 'get',
        mimeType: "textPlain",
        url: 'http://api.themoviedb.org/3/movie/' + movieid,
//        async: false,  // YUCK! Commented out

        success: function(result){

            if(result.popularity > 10000) {
                 result.popularity = 10000;
            } 
            if(result.popularity < 0.1) {
                 result.popularity = 0.1;
            } 
            callback(result) // invoke your callback
    });
    return filmDetails;
} 
```

* * *

```
 // make a callback
function workWithData(data) {
    alert(data.description);
}

  // pass the callback
getFilmDetails(12345, workWithData); 
```

# c++ - RH Linux Mutex锁调试

> ID：15188052
> 
> 赞同：0
> 
> 时间：2013-03-03T16:53:43.647
> 
> 标签：c++, linux, multithreading, mutex

如果有人对 C++ 有经验，我将不胜感激，多线程代码可以阐明互斥锁问题。它在 Red hat Linux 5.4 上运行。我们正在调试我没有编写的遗留代码。假设每秒执行非常高的调用，响应时间为 3-5 毫秒。我们在主应用程序中运行了大约 400 个线程。

我不喜欢这个应用程序的一件事是在任何地方都使用智能指针（只要 SPtr 超出范围，就会调用互斥锁）。写这篇文章的人似乎对 SPtrs 上瘾了。许多函数都将 SPtr 作为参数。

应用程序可以正常运行几个小时，然后我们在锁定时突然得到互斥体 EINVAL（返回代码 22）。我见过核心转储，它显示了不同的堆栈跟踪，没有一个地方导致它。

你会推荐什么工具来调试这个？这可能是由于内存或堆栈损坏（意味着与互斥锁无关的事情）而发生的吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:02:15.877

`EINVAL`on a `pthread_mutex_lock`call 意味着锁没有被正确初始化。这也可能意味着锁已被`pthread_mutex_destroy`. 如果您有内存或堆栈损坏，则可能发生任何一种情况——如果您用随机垃圾覆盖了互斥对象，或者您在调用其析构函数后尝试使用带有互斥对象的对象。

如果你在 gdb 中打印一个互斥对象，你会看到如下内容：

```
$5 = {
  __data = {
    __lock = 0, 
    __count = 0, 
    __owner = 0, 
    __nusers = 0, 
    __kind = -1, 
    __spins = 0, 
    __list = {
      __prev = 0x0, 
      __next = 0x0
    }
  }, 
  __size = '\000' <repeats 16 times>"\377, \377\377\377", '\000' <repeats 19 times>, 
  __align = 0
} 
```

在这种情况下，`kind`-1 字段表示互斥体已被破坏。0、1 或 2 的种类字段表示有效的互斥锁。其他字段都应该包含小整数或有效的指针。如果你看到随机的垃圾，这意味着互斥锁可能被某些东西破坏了。

# java - Java - 使用 jTable 的字符串标记器读取数据

> ID：15188056
> 
> 赞同：-1
> 
> 时间：2013-03-03T16:53:53.850
> 
> 标签：java, swing, jtable, stringtokenizer, tablemodel

我有一个名为 Items.dat 的文件，如下所示：

**项目**
1 子项目 A

子项B

子项C

**项目2**

子项E

子项R

子项T

等等...

使用字符串标记器，我如何将这些数据输入到 jTable 中，所以**第 1**项和**第 2 项**是标题，以及相应的“子项”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:07:44.683

以下是您可能如何进行的概述：

*   由于您是新手，请放弃您[之前的问题](https://stackoverflow.com/q/15187675/230513)中暗示的 NetBeans GUI 编辑器，但继续使用 NetBeans IDE。

*   研究[*I/O 流*](http://docs.oracle.com/javase/tutorial/essential/io/streams.html)教程示例。

*   学习[*如何使用表格：创建表格模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。

*   按照这个[例子](https://stackoverflow.com/a/9134371/230513)，编写一个方法来读取你的数据文件并用找到的值填充你`TableModel`的`String`值，例如

    ```
    List<String> columnNames = new ArrayList<String>();
    List<List<String>> rowData = new ArrayList<List<String>>(); 
    ```

# php - 为什么在 PHP 中将函数存储为变量

> ID：15188058
> 
> 赞同：16
> 
> 时间：2013-03-03T16:54:09.863
> 
> 标签：php

我在 php 文档中看到了这种做法：

```
$foo = function() {
    echo 'foo';
}

$foo(); 
```

你为什么要这样做，而不仅仅是：

```
function foo()
{
    echo 'foo';
}

foo(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T16:58:46.237

它们在几个方面很有用。我个人使用它们是因为它们比实际功能更容易控制。

而且，匿名函数也可以这样做：

```
$someVar = "Hello, world!";
$show = function() use ($someVar) {
    echo $someVar;
}
$show(); 
```

匿名函数可以从外部范围“导入”变量。最好的部分是在循环中使用它是安全的（与 JavaScript 不同），因为它需要一个变量的副本来与函数一起使用，除非你明确告诉它通过引用传递`use (&$someVar)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T17:10:58.967

它还经常用于将[回调](http://php.net/manual/en/language.types.callable.php)传递给诸如`array_map`和许多其他函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T01:12:05.567

它在某些特定情况下非常有用。例如

```
Server::create('/')
    ->addGetRoute('test', function(){
        return 'Yay!';
}) 
```

上面的代码片段是基于 REST 的应用程序中的简单路由示例。

# iphone - 根据触摸点改变像素颜色

> ID：15188059
> 
> 赞同：1
> 
> 时间：2013-03-03T16:54:12.833
> 
> 标签：iphone, objective-c, image-processing, core-graphics, quartz-core

我想更改用户触摸图像的颜色。我有一些代码来获取下面的图像数据

```
NSString * path = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"jpg"];
UIImage * img = [[UIImage alloc]initWithContentsOfFile:path];
CGImageRef image = [img CGImage];
CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(image));
const unsigned char * buffer =  CFDataGetBytePtr(data); 
```

我知道我可以轻松获得接触点，但我的问题如下

1.  正如我们在视网膜显示 1 点 = 2 像素中所知道的那样，我是否知道需要为单个触摸点更改 2 像素的颜色？如果我在任何地方错了，请纠正我？
2.  如何从图像数据中获取这两个像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:52:51.727

向呈现图像的 UIImageView 添加手势识别器。当该识别器被触发时，您关心的位置将是......

```
// self.imageView is where you attached the recognizer.  This == gestureRecognizer.view
CGPoint imageLocation = [gestureRecognizer locationInView:self.imageView]; 
```

可以通过确定图像的比例因子来独立将此位置解析为像素定位设备。

要获取图像位置，请将该比例因子应用于手势位置...

```
CGPoint pixel = CGPointMake(imageLocation.x*image.scale, imageLocation.y*image.scale) 
```

这应该是访问图像的正确坐标。剩下的步骤是获取像素数据。 [这篇文章](https://stackoverflow.com/questions/3773245/simple-way-to-read-pixel-color-values-from-an-png-image-on-the-iphone)提供了一种看起来合理的方法来做到这一点。（也没有亲自尝试过）。

# android - 如何知道另一个应用程序是否以编程方式设置了 largeHeap？

> ID：15188067
> 
> 赞同：1
> 
> 时间：2013-03-03T16:54:47.593
> 
> 标签：android

我发现一些游戏应用程序使用的内存大于默认限制（Nexus 7 中为 64MB）。

为了实现这一点，我假设他们设置了`android:largeHeap="true"`

在我的代码中，我想检查一个应用程序是否设置了这个标志。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:58:14.673

检查[带有](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#FLAG_LARGE_HEAP)`ApplicationInfo`的对象。您可以从（例如，[通过](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29)）获取这些对象。[`FLAG_LARGE_HEAP`](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#FLAG_LARGE_HEAP)`PackageManager`[`getApplicationInfo()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29)

# java - Java 数据库 - 每条记录都有一个文件

> ID：15188068
> 
> 赞同：2
> 
> 时间：2013-03-03T16:54:48.230
> 
> 标签：java, database

想象一个数据库，其中有一个包含多个列的主表——主要是简单类型（文本/字符串、int 等）。表中有一个文本 blob 列。

我正在寻找一个数据库，它将表存储在一个文件中，然后将每个 blob 存储在硬盘驱动器上自己的文件中。我们正在数据库中寻找大约 100,000 条记录。

数据库需要可嵌入并在 Java 6 上运行。

在线搜索让我想到了 Derby 之类的东西，并自己管理 blob 文件的存储（对路径的引用）。我希望有更好的解决方案。

# xml - 只需使用 xslt 显示此 xml 中的几个属性

> ID：15188069
> 
> 赞同：0
> 
> 时间：2013-03-03T16:54:58.933
> 
> 标签：xml, xslt

Asalmualikum，兄弟们，我需要使用 xslt 显示来自 web 服务的 xml，而且我只需要使用 xslt 文件显示来自 xml 的一些属性。这是我的示例 xml

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="XSLTFile.xsl"?>
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
     <ns1:OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05" xmlns:ns1="http://www.opentravel.org/OTA/2003/05">
      <ns1:Success />
       <ns1:PricedItineraries>
        <ns1:PricedItinerary CompositeFlightNumber="AI" CountCompositeFlightNumber="1" FareType="Non-Refundable" InboundSegmentReference="1" MatrixFare="true" Mode="" OriginDestinationRPH="BLRHYDAI517AI20130321" OutboundSegmentReference="1" Priority="1" RecommendationRPH="1" Refundable="true" ReturnOnly="false" SequenceNumber="1.0" SupplierCode="1AWS">
           <ns1:AirItinerary SupplierSystem="Amadeus">
             <ns1:OriginDestinationOptions>
               <ns1:OriginDestinationOption Duration="01:05:00" FlightID="BLRHYDAI517AI2013-03-21" MajorityCarrier="AI" ReturnOnly="false" SupplierCode="1AWS" SupplierSystem="Amadeus" UniqueIdentifier="1.0">
                 <ns1:FlightSegment ArrivalDateTime="2013-03-21T09:20:00" CabinCode="Y" DeliveryMethod="Courier" DepartureDateTime="2013-03-21T08:15:00" Duration="01:05:00" FlightNumber="517" LTD="1AWS" LineNumber="Y" NumberInParty="BLRHYD" RPH="1" ResBookDesigCode="E" TicketType="Physical" ValidConnectionInd="1AWS">
                  <ns1:DepartureAirport AirPortName="Bengaluru" CityName="Bangalore" LocationCode="BLR" />
                  <ns1:ArrivalAirport AirPortName="Shamshabad Rajiv Gandhi" CityName="Hyderabad" LocationCode="HYD" />
                  <ns1:OperatingAirline Code="AI" />
                  <ns1:BookingClassAvail FareType="RP" ResBookDesigCode="E" ResBookDesigQuantity="5" Status="5" WebFareName="EAP30" />
                  <ns1:Equipment AirEquipType="319" />
                  <ns1:MarketingAirline Code="AI" MatrixCode="AI" Name="Air India" YTAirlineCode="AI" />
                  <ns1:ValidatingCarrier Code="AI" />
                </ns1:FlightSegment>
                 <ns1:FormData>
                  <ns1:FBC Destination="HYD" FlightNumber="517" LineNumber="Y" Origin="BLR" SeatToSell="5" WebFareName="EAP30" />
                  <ns1:FareDifference>
                    <ns1:TotalFare ADT="1" BaseFare="670-ADT 670" CHD="0" Cabin="Economy" HostName="railserver" INF="0" Rbd="RP - E -" Tax="TTL-2355">3032</ns1:TotalFare>
                  </ns1:FareDifference>
                  <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-03 18:43:00" TicketType="Physical" />
                   <ns1:AgentMarkup>
                     <ns1:Airlines>
                       <ns1:Airline>
                        <ns1:Code>6E</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>2700.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>9H</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>M</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>6.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>0.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>9W</ns1:Code>
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>1100.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>AI</ns1:Code>
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>1100.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>DN</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>M</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>6.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>3250.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>G8</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>2700.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>I7</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>M</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>6.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>0.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>IC</ns1:Code>
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>1100.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>IT</ns1:Code>
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>1100.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>S2</ns1:Code>
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>1100.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Airline>
                        <ns1:Code>SG</ns1:Code>
                        <ns1:GDS>0</ns1:GDS>
                        <ns1:WholeSalerFees>0.0000</ns1:WholeSalerFees>
                        <ns1:WholeSalerFeesType>F</ns1:WholeSalerFeesType>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>BF</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                        <ns1:Type>P</ns1:Type>
                        <ns1:DiscountPLB>0.0000</ns1:DiscountPLB>
                        <ns1:DiscountPLBType>F</ns1:DiscountPLBType>
                        <ns1:DiscountPLBOn />
                        <ns1:Surcharge>2000.0000</ns1:Surcharge>
                      </ns1:Airline>
                       <ns1:Others>
                        <ns1:Code />
                        <ns1:GDS>1</ns1:GDS>
                        <ns1:WholeSalerFees>0</ns1:WholeSalerFees>
                        <ns1:CommissionType>C</ns1:CommissionType>
                        <ns1:ApplyOn>B</ns1:ApplyOn>
                        <ns1:Amount>0.0000</ns1:Amount>
                      </ns1:Others>
                    </ns1:Airlines>
                  </ns1:AgentMarkup>
                </ns1:FormData>
                <ns1:FormData />
              </ns1:OriginDestinationOption>
            </ns1:OriginDestinationOptions>
          </ns1:AirItinerary>
           <ns1:AirItineraryPricingInfo UniqueIdentifier="1.0">
             <ns1:ItinTotalFare NegotiatedFare="No">
              <ns1:BaseFare Amount="670" CurrencyCode="INR" />
               <ns1:Taxes>
                <ns1:Tax Amount="2355" CurrencyCode="INR" TaxCode="TTL" />
              </ns1:Taxes>
              <ns1:TotalFare Amount="3032" CurrencyCode="INR" />
               <ns1:Fees>
                <ns1:Fee Amount="0" />
                <ns1:Fee Amount="0" FeeCode="YatraLCCSurcharge" />
              </ns1:Fees>
              <ns1:ServiceTax Amount="7" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.01" />
               <ns1:Markups>
                <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 wholesalerfees for client 1152" MarkupCode="DisplayMarkup" MarkupType="W" Type="C" />
                <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0% on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0% on fuel surcharge 0 -for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="P" />
              </ns1:Markups>
            </ns1:ItinTotalFare>
             <ns1:PTC_FareBreakdowns>
               <ns1:PTC_FareBreakdown>
                <ns1:PassengerTypeQuantity Code="ADT" Quantity="1.0" />
                 <ns1:FareBasisCodes>
                  <ns1:FareBasisCode FareType="" SegmentRPH="">EAP30</ns1:FareBasisCode>
                </ns1:FareBasisCodes>
                 <ns1:PassengerFare>
                  <ns1:BaseFare Amount="670" CurrencyCode="INR" />
                   <ns1:Taxes>
                    <ns1:Tax Amount="2355" CurrencyCode="INR" TaxCode="TTL" />
                  </ns1:Taxes>
                  <ns1:TotalFare Amount="3032" CurrencyCode="INR" />
                  <ns1:ServiceTax Amount="7" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.01" />
                   <ns1:Markups>
                    <ns1:Markup Amount="0.0000" CurrencyCode="INR" Description="0.0 wholesalerfees for client 1152" MarkupCode="DisplayMarkup" MarkupType="W" Type="C" />
                    <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 % on base fare for client - 1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                    <ns1:Markup Amount="0" Description="0.0% on fule surcharge 0.0for client1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="C" />
                    <ns1:Markup Amount="0" CurrencyCode="INR" Description="0.0 on base fare for client1152" MarkupCode="DisplayMarkup" MarkupType="M" Type="P" />
                  </ns1:Markups>
                </ns1:PassengerFare>
              </ns1:PTC_FareBreakdown>
            </ns1:PTC_FareBreakdowns>
             <ns1:FareInfos>
               <ns1:FareInfo>
                <ns1:FareReference>EAP30</ns1:FareReference>
                <ns1:FilingAirline Code="ZZ" />
                <ns1:DepartureAirport LocationCode="BLR" />
                <ns1:ArrivalAirport LocationCode="HYD" />
              </ns1:FareInfo>
            </ns1:FareInfos>
          </ns1:AirItineraryPricingInfo>
          <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-03 18:43:00" TicketType="Physical" />
          <ns1:Notes>PENALTY APPLIES</ns1:Notes>
          <ns1:Notes>LAST TKT DTE21OCT12 - SEE ADV PURCHASE</ns1:Notes>
        </ns1:PricedItinerary>
      </ns1:PricedItineraries >
    </ns1:OTA_AirLowFareSearchRS>
  </soapenv:Body >
</soapenv:Envelope > 
```

这是将xml文件显示为html的xslt

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns1="http://www.opentravel.org/OTA/2003/05"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="ns1:OTA_AirLowFareSearchRS">
    <table>
      <!--<tr>
        <th>
          Airline
        </th>
        <th>
          Departure
        </th>
        <th>

          Arrival
        </th>
        <th>
          Duration
        </th>
        <th>

          Fare Type
        </th>
        <th>
          Per Adult Fare
        </th>

      </tr>-->
      <xsl:for-each select ="ns1:OTA_AirLowFareSearchRS/ns1:PricedItineraries/ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:MarketingAirline">

        <tr>
          <td>
            <xsl:value-of select="Name"/>

          </td>

        </tr>

      </xsl:for-each>
    </table>
  </xsl:template>

</xsl:stylesheet> 
```

我只显示一个用于测试目的的属性，你能告诉我如何显示它吗？当我在浏览器中运行 xml 文件时，它什么也没显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:50:49.293

您的 xsl 创建了一个空表，因为 for-each XPath 是错误的。将其更改为

```
<xsl:for-each select="ns1:PricedItineraries/ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:MarketingAirline">
   ...
   <xsl:value-of select="@Name" />
   ...
</xsl:for-each> 
```

原因：

该模板将匹配“ns1:OTA_AirLowFareSearchRS”；该节点的有效子节点是“ns1:Success”和“ns1:PricedItineraries”，**而不是**OTA_AirLowFareSearchRS。此外，您可以通过在 xsl:value-of 中使用 @Name 来访问属性名称。

## **更好的解决方案：**

在 'ns1:OTA_AirLowFareSearchRS' 的匹配中创建表然后调用应用模板；然后使用 for-each 中的表达式进行另一个模板匹配。处理器将为您完成工作，并且很容易扩展功能。

```
<xsl:template match="ns1:OTA_AirLowFareSearchRS">
  <table>
    <xsl:apply-templates />
  </table>
</xsl:template>

<xsl:template match="ns1:PricedItineraries/ns1:PricedItinerary/ns1:AirItinerary/ns1:OriginDestinationOptions/ns1:OriginDestinationOption/ns1:FlightSegment/ns1:MarketingAirline">
  <tr><td>
    <xsl:value-of select="@Name"/>
  </td></tr>
</xsl:template>

<!-- other templates for other table rows -->
<xsl:template match="..."> 
```

# ajax - 如果在第一次条件失败后提交，为什么 if 语句中的 ajax 表单会提交两次？

> ID：15188074
> 
> 赞同：1
> 
> 时间：2013-03-03T16:55:26.463
> 
> 标签：ajax, forms, ajax-forms

考虑下面的代码。如果`myField1`不等于`myField2`，则出现警报。当我在弹出的警报中单击“确定”时，我的表单仍然存在，所有字段仍填充有我之前输入的数据。但是，当我修改字段以便`myField1`DOES equal `myField2`，然后提交表单时，它实际上是提交了两次！为什么是这样？

```
$(document).ready(function(){
$("#myForm").submit(function() {
    var myField1 = $('#myID1).val();
    var myField2 = $('#myID2).val();
    if(myField1 == myField2)
    {
        $.ajax({
            type: "POST",
            url: 'myFile.php',
            dataType: 'html',
            data: {myData:myField1,
                   myData2:myField2},
            success: function(data){
                alert(data);
            }
        });
        return false;
    }
    else
    {
        alert('These two fields are not equal!)
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:57:42.977

好的，所以我在另一个问题上找到了这个，它解决了这个问题：

```
$('#myForm').unbind('submit').bind('submit',function() {
    // do stuff here...
}); 
```

通过解除绑定事件，然后重新绑定它，表单不再提交两次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T17:12:37.713

您的提交事件将触发表单的提交操作，除非您阻止它这样做。运行 AJAX 调用并不能阻止这种情况的发生。你需要自己阻止它。

你需要：

```
$("#myForm").submit(function(event) {
    event.preventDefault()
... 
```

# c# - 具有空值处理的字符串相等

> ID：15188079
> 
> 赞同：36
> 
> 时间：2013-03-03T16:55:59.197
> 
> 标签：c#, .net, string, null, equality

我会经常使用这段代码来比较一个字符串：

```
if(!string.IsNullOrEmpty(str1) && str1.Equals(str2)){
    //they are equal, do my thing
} 
```

这首先处理空情况等。

是否有一种更简洁的方法来进行字符串比较，也许使用单个方法调用来处理可能的空值？我只是想知道如果测试值为空，则字符串不相等。

（我有dejavu，我之前可能已经问过这个问题，如果是这样，我很抱歉）

* * *

更新：在我的情况下， str2 是一个已知的好字符串进行比较，所以我不需要检查它是否为空。*str1 是可能为空的“未知”字符串，所以在 str1为*空的情况下，我想说“str1 不等于 str2” ...

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-03T16:57:07.823

与 Java 不同，C# 字符串会覆盖`==`运算符：

```
if (str1 == str2) 
```

如果您想要不区分大小写的比较：

```
if (string.Equals(str1, str2, StringComparison.OrdinalIgnoreCase)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-03T16:57:17.307

如果您*不想*将两个`null`字符串视为彼此相等，那么您的代码是最佳的。

另一方面，如果您想将`null`值视为彼此相等，则可以使用

```
object.Equals(str1, str2) 
```

对于也处理`null`值的更“对称”方法。

这不是对字符串相等性进行对称检查的唯一方法，它将`null`字符串视为相等：您还可以使用`string.Equals(str1, str2)`or 甚至`str1 == str2`，它重定向到`string.Equals`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-06-26T08:25:44.727

我知道这已经有几年的历史了，我认为 dasblinkenlight 的解决方案在功能上非常适合您的要求。但是出于可读性的原因，我确实更喜欢这段代码：

```
String.Equals(str1, str2) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-03T17:03:03.093

没有内置的方法可以做到这一点，但您可以创建一个扩展方法来封装它。

```
public static StringExtensions
{
    public static Boolean IsNotNullAndEquals(this string str1, string str2)
    {
        return !string.IsNullOrEmpty(str1) && str1.Equals(str2)
    }
} 
```

然后像这样使用它：

```
str1.IsNotNullAndEquals(str2); 
```

命名将是您在这里 IMO 中最难的事情......因为您需要传达您只是空检查`str1`。当用作扩展方法时，它读起来相当不错，但如果用作常规静态，那么它也不能传达这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T16:58:27.763

您可以使用此代码

```
object.Equals(str1, str2) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-10T15:04:20.773

我知道这是之前的答案，并且有很好的答案，尽管根据 Microsoft 文档（[https://docs.microsoft.com/en-us/dotnet/api/system.string.equals?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.string.equals?view=net-5.0)）你可以使用以下方法检查这两种情况：

```
if(string.Equals(str1,str2)){
    //they are equal with null handling
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-16T18:57:47.627

这将做到：

```
string.IsNullOrWhiteSpace(str1) ? string.IsNullOrWhiteSpace(str2) : str1.Equals(str2, StringComparison.OrdinalIgnoreCase); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-13T04:17:17.720

在最近的 C# 版本中，我们现在也有空合并选项。这不是一个精确的解决方案，但出于某些目的可能是一个更清洁的解决方案。出于比较目的，在它实际上为空的情况下，将 str1“升级”为空字符串需要一些自由。

```
if((str1??"").Equals(str2))
{
    //they are equal, do things here
} 
```

# csv - 从powershell中的csv文件中删除最后一列

> ID：15188085
> 
> 赞同：0
> 
> 时间：2013-03-03T16:56:49.170
> 
> 标签：csv, powershell-2.0

我是PowerShell的新手。目前我们需要一个 poweshell 脚本来比较两个大的（100000 行和 n 列（n > 300，列标题也是每个星期三对应的日期）。n 的值每周在文件中不断增加。我们需要比较文件（本周和上周），并且需要确保两个文件之间的唯一区别是最后一列。

我浏览了一些论坛和博客，但由于我的无知，我只能做很少的事情。

如果有办法从 powershell 中的 csv 文件中删除最后一列，我们可以使用下面的脚本在从本周文件中删除最后一列后比较前一周的文件和本周的文件。

如果有人可以用您来之不易的知识在这里帮助我，那将非常有帮助

* * *

```
[System.Collections.ArrayList]$file1Array = Get-Content "C:\Risk Management\ref_previous.csv"|Sort-Object
[System.Collections.ArrayList]$file2Array = Get-Content "C:\Risk Management\ref_current.csv"|Sort-Object
$matchingEntries = @()

foreach ($entry in $file1Array) {
    if ($file2Array.Contains($entry)) {
        $matchingEntries += $entry
        } 
    }
foreach ($entry in $matchingEntries){
    $file1Array.Remove($entry)
    $file2Array.Remove($entry)
    } 
```

* * *

干杯，阿尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:27:01.640

根据 alroc 给出的答案，您应该能够在 CSV 文件的第一行使用拆分操作来获取最后一列名称，然后在 -ExcludeProperty 参数上使用该操作。

但是，对此的比较对象命令对我不起作用，但它确实将正确的数据拉回每个变量中。

```
$CurrentFile = "C:\Temp\Current.csv"
$PreviousFile = "C:\Temp\Previous.csv"

$CurrentHeaders = gc $CurrentFile | Select -First 1
$CurrentHeadersSplit = $CurrentHeaders.Split(",")
$LastColumn = $CurrentHeadersSplit[-1] -Replace '"'

$Current = Import-Csv $CurrentFile | Select -Property * -ExcludeProperty $LastColumn | Sort-Object
$Previous = Import-Csv $PreviousFile | Sort-Object
Compare-Object $Current $Previous 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:32:46.147

假设您要排除的列名是`LastCol`（调整为您的实际列名）：

```
$previous = Import-csv "C:\Risk Management\ref_previous.csv" | Select-Object -Property * -ExcludeProperty LastCol | Sort-Object;
$current = Import-csv "C:\Risk Management\ref_current.csv" | Sort-Object;
Compare-Object $previous $current; 
```

这将从每个输入文件中删除最后一列，并指示剩余内容是否不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:02:15.517

import-csv 和 export-csv 都提供了排除列的机会。

import-csv 具有 -header 选项，您只需命名传入的标题并排除最后一列标题。如果有 10 列，则仅命名 9。最后一列将被排除。

对于 export-csv，请选择您要写出的列 ( |select col1,col2,col3|export-csv... )，不要选择您要排除的列。

# java - 创建一个动态数组，然后选择最大值

> ID：15188092
> 
> 赞同：-6
> 
> 时间：2013-03-03T16:57:46.123
> 
> 标签：java, android

我做了一些谷歌搜索，并没有完全找到我要找的东西。我有一个应用程序，用户在其中输入值，当按下计算时，它将生成 64 个值。我的问题是两部分。

1.  如何捕获这些结果并创建一个临时数组
2.  如何从数组中选择最大值并将其分配给 double 以在应用程序的最终方程式中使用。

预先感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:55:31.913

您应该使用数组列表。它的优点是可排序。默认情况下，数值从低到高排序。因此，只需使用列表的最后一个元素进行计算。但是如何将 64 个预先计算的值放入这个数组列表中取决于您。我建议在每次计算后立即缓冲它。

```
import java.util.*;
public class Test { 
public static void main(String[] args) {
    ArrayList<Double> list = new ArrayList<Double>();
    for (int i = 0; i < 64; ++i) {
                    //i assume that you use doubles
        list.add(new Double(Math.random()*100));
    }
    Collections.sort(list);
    System.out.println("highest value: " + list.get(63));
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:37:34.950

好吧，首先你需要创建一个数组并用结果填充它：

`Double[] results = new Double[64];// (64 is the length of the array, the number of results)`

我不知道您如何获得结果，但我认为您将每个结果存储在一个临时变量（double_result）中：

```
for(int i = 0; i < 64; i++){
    results[i] = double_result;
} 
```

要选择最大的值：

```
// Create a var with contains the biggest value
double max_value = 0;
// Compare all the values in the array with max_value, if its bigger store the new max value in max_malue
for(int i = 0; i < results.length; i++){
    if(results[i] > max_value){
        max_value = results[i];
    }
}
// Now in *max_value* you got the biggest value of the 64 results 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:43:58.760

你在聊天中写道：

> 这里有3个方程。我需要将 Oytput_0、Output_1、Output_2 添加到数组中，然后获取最高值并将其分配给双精度值，以便我可以在等式中使用它。
> 
> ```
>  Output_0 = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_0 * Cvalue_0) - (Avalue_0 * Avalue_0) );
>     Output_1 = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_1 * Cvalue_1) - (Avalue_1 * Avalue_1) );
>     Output_2 = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_2 * Cvalue_2) - (Avalue_2 * Avalue_2) ); 
> ```

好的，试试这样的：

```
Double[] outputs = new Double[3];
outputs[0] = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_0 * Cvalue_0) - (Avalue_0 * Avalue_0) );
outputs[1] = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_1 * Cvalue_1) - (Avalue_1 * Avalue_1) );
outputs[2] = temp1 + (temp2 / 2) - Math.sqrt( (Cvalue_2 * Cvalue_2) - (Avalue_2 * Avalue_2) );

Arrays.sort(outputs);
// Now outputs[2] will have the highest value. Use it however you please. 
```

* * *

请注意，我希望这三个方程不是*64 个*几乎相同的手写方程中的三个。因为如果您将`cValue_x`s 存储在一个数组中而将`aValue_x`s 存储在另一个数组中，那么您可以简单地遍历*一个*方程：

```
int count = Math.min(cValues.length, aValues.length);
for(int i = 0; i < count; i++) 
    outputs[i] = temp1 + (temp2 / 2) - Math.sqrt( (cValues[i] * cValues[i]) - (aValues[i] * aValues[i]) ); 
```

# jquery - 如何使用 jQuery AJAX 为标签设置标题？

> ID：15188094
> 
> 赞同：0
> 
> 时间：2013-03-03T16:58:03.530
> 
> 标签：jquery, ajax, asp.net-mvc, json

我想在鼠标输入时看到标签的标题，我想用 ajax 方法获取标题文本。我的 HTML 代码如下所示：

```
<div id="class">
     <label id="cost">@Html.DisplayFor(modelItem => item.PriceId)</label>
</div> 
```

这是我的jQuery代码：

```
$("#cost").live("mouseenter", function () {
    $.getJSON('/Price/AjaxGetByPriceId', { id: $(this).val() }, function (data) {
        for (i = 0; i <= data.length; i++) {
            $(this).attr("title", data[i].Url);
        }
    });
}); 
```

这是我的价格控制器中的代码：

```
[HttpGet]
public ActionResult AjaxGetByPriceId(int id)
{
    var price = priceApp.GetByPriceId(id);

    return Json(price, JsonRequestBehavior.AllowGet);
} 
```

但是进入鼠标后并没有发送请求。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:00:57.267

`Html.DisplayFor()`生成文本，而不是输入字段。因此，您不应该使用该`$(this).val()`方法，`$(this).html()`而是使用该方法。此外，由于您的控制器需要一个整数参数，请绝对确保此文本实际上代表一个整数，否则您的控制器操作将不会被命中，并且您将收到一条错误消息，指出该值无法解析为数字。此外，在您的 AJAX 成功回调`this`中，不再引用在 mouseenter 回调中使用的元素。如果你想使用它，你应该在闭包中捕获它：

```
$("#cost").live("mouseenter", function () {
    var $label = $(this);
    var id = $label.html();
    alert(id); // this should be a number

    $.getJSON('/Price/AjaxGetByPriceId', { id: id }, function (data) {
        for (i = 0; i <= data.length; i++) {
            $lavel.attr("title", data[i].Url);
        }
    });
}); 
```

我还建议您将 .live 函数（在 jQuery 1.9 中完全弃用甚至删除）替换为该`.on()`函数。除此之外，我还建议您使用 url 助手来为您的控制器操作生成 url，而不是像您那样对其进行硬编码。

还有另一句话：您显示的 div 看起来像是在 foreach 循环中（我可以通过`modelItem => item.PriceId`您使用的 lambda 来判断，我假设`item`是您当前的循环项）。但这里的问题是，您的 DOM 中不能有多个具有相同`id`. 因此，您显示的是无效标记。您可以改用`class`选择器：

```
<div>
     <label class="cost" data-url="@Url.Action("AjaxGetByPriceId, Price")">
         @Html.DisplayFor(modelItem => item.PriceId)
     </label>
</div> 
```

进而：

```
$(document).on('mouseenter', '.cost', function () {
    var $label = $(this);
    var id = $label.html();
    var url = $label.data('url');
    $.getJSON(url, { id: id }, function (data) {
        for (i = 0; i <= data.length; i++) {
            $label.attr('title', data[i].Url);
        }
    });
}); 
```

另外我不太确定你为什么在 AJAX 回调中循环：

```
for (i = 0; i <= data.length; i++) {
    $label.attr('title', data[i].Url);
} 
```

您的控制器操作不应该返回具有指定 id 的相应标签的标题吗？那会更正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:05:30.667

我不确定，但在选项`this`中使用它之前保存上下文可能是值得的。可能不再指代该元素。`$(this).val()``getJSON``this`

在你`$(this).val()`做你的`getJSON`.

# scope - $http 调用后的 Angularjs 范围变量未在视图中更新

> ID：15188096
> 
> 赞同：2
> 
> 时间：2013-03-03T16:58:06.733
> 
> 标签：scope, angularjs, digest

我在服务中有这个：

```
UpdateQuestionsSmsStatus: function (smsProfileId, active) {
    //TODO: ajax get data
    var promise = this.UpdateQuestionsSmsStatusInternal(smsProfileId, active).then(function (response) {
        // The return value gets picked up by the then in the controller.
        return response;
    });
    // Return the promise to the controller
    return promise;
},

UpdateQuestionsSmsStatusInternal: function (smsProfileId, active) {

    return $http({ method: 'GET',
        url: '../QuestionManagement/UpdateQuestionsSmsStatus?smsProfileId=' + smsProfileId + '&active=' + active
    }).
      success(function (data, status, headers, config) {
          // this callback will be called asynchronously
          // when the response is available
          response = data;
      }).
      error(function (data, status, headers, config) {
          // called asynchronously if an error occurs
          // or server returns response with an error status.
          if (window.console && console.log) {
              console.log("Could not obtain questions received. Error:" + data + "Status:" + status + "Headers:" + headers + "Config:" + config);
          }
      });
}, 
```

这在我的控制器中：

```
$scope.updateQuestionsSmsStatus = function () {
    questionSelectionService.UpdateQuestionsSmsStatus($scope.smsProfile.Id, !$scope.smsProfile.Active).then(function (output) {
        $scope.smsProfile.Active = (output.data.result == "success") ? output.data.active : !output.data.active;
    });

}; 
```

从视图中称为 onclick。这在视图中：

```
{{smsProfile.Active}} 
```

视图中的值永远不会更新。调试器没有显示任何错误，也没有出现错误。

有没有人有任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:41:47.440

函数中的成功回调`UpdateQuestionsSmsStatusInternal`需要返回一个值：

```
return $http({ method: 'GET',
        url: '../QuestionManagement/UpdateQuestionsSmsStatus?smsProfileId=' + smsProfileId + '&active=' + active
    }).
      success(function (data, status, headers, config) {
          return data;
      })
      ... 
```

并且，为了适应这种情况，你的控制器的`updateQuestionsSmsStatus`函数应该调整回调：

```
$scope.updateQuestionsSmsStatus = function () {
  questionSelectionService.UpdateQuestionsSmsStatus($scope.smsProfile.Id, !$scope.smsProfile.Active).then(function (data) {
      $scope.smsProfile.Active = (data.result == "success") ? data.active : !data.active;
    }
   );
 }; 
```

# c++ - 如何使用同一个类的成员函数删除当前类实例

> ID：15188097
> 
> 赞同：1
> 
> 时间：2013-03-03T16:58:07.233
> 
> 标签：c++, class, instance

在下面的代码中，我将构造函数和析构函数设为私有，并创建了自己的实例化和删除函数。但是当我调用该`Delete()`函数时，`delete this`它里面的语句似乎删除了对象但没有通知编译器，所以它认为对象仍然存在。我认为将指针设置为 null 或零是个好主意，所以我`this = 0`在 delete 语句之前放了一个，但它根本不起作用。`Delete()`为了完全删除对象及其指针，我应该在函数中放入什么？

```
class MyClass
{
private:
  MyClass() {}
 ~MyClass() {}
public:
  static MyClass *Instantiate()
  {
    MyClass *inst = new MyClass;
    return inst;
  }
  void Delete()
  {
    delete this;
  }
};

int main()
{
  MyClass *inst1 = MyClass::Instantiate();
  inst1->Delete();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:04:15.347

尽管您没有明确表达，但我相信您想知道为什么`inst1`在`NULL`调用`Delete()`. 如果是这样，请考虑：

随着`inst1->Delete();`您成功删除`inst1`指向的对象。但是，指针`inst1`保持不变。它只指向内存中不再是`MyClass`.

此外，成员函数 call 也极为罕见`delete this`，尽管从语法和语义上讲，您的示例没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:04:05.907

你不可以做这个。指向对象的指针需要在外部进行管理，因为对象本身无法访问它们（`this`是本地的、自引用的指针，除此之外不代表任何其他内容。）

如果您想自动跟踪指针，您将使用智能指针类（[http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)）。但是，由于您将 dtor 设为私有，因此您将失去该能力。当然，您仍然可以编写自己的智能指针类。

# jsf - 如何在列表中存储无限数据？

> ID：15188101
> 
> 赞同：0
> 
> 时间：2013-03-03T16:58:18.177
> 
> 标签：jsf, arraylist, rerender

我想制作一个表单，用户可以在其中输入无限数据，并在 arraylist 的帮助下将其存储在 bean 中。 [一只忙碌的猫 http://img832.imageshack.us/img832/917/offerride.png](http://img832.imageshack.us/img832/917/offerride.png) 如图所示，当用户单击单击按钮时，其附近文本框的内容必须存储在 arraylist 中，并且必须重新渲染并再次变成空白。我尝试使用此代码。

```
<td>
 <h:inputText label="Source" id="offerridepickuppts" value="#{OfferRideBacking.pickUpAdd}"/>
 <h:commandButton value="Click" action="index">
  <f:actionListener rendered="offerridepickuppoints,some" />
 </h:commandButton>
</td> 
```

pickAdd 是另一个字符串变量，其中的按钮将被单击，它的 setter 方法将在 arraylist 中添加内容。但似乎它没有被存储到列表中。那么如何在不使用 ajax 和所有这些东西的情况下实现这一点。谢谢

# java - 如何将此字符串转换为 SimpleDateFormat“dd-MM-yyyy”？

> ID：15188103
> 
> 赞同：-1
> 
> 时间：2013-03-03T16:58:29.387
> 
> 标签：java, jcalendar

```
SimpleDateFormat parser = new SimpleDateFormat("EEEE, MM dd, yyyy");
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
Date date;
date = parser.parse(date1);
output = formatter.format(date); 
```

日期 1 是“2013 年 3 月 3 日，星期日”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:11:50.660

我认为这是你需要的：

```
SimpleDateFormat parser = new SimpleDateFormat("EEE, MMM dd, yyyy"); 
```

`EEE`是星期几，`MMM`长格式的月份。

您应该查看[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html).

# ocr - 字符识别（OCR算法）

> ID：15188104
> 
> 赞同：37
> 
> 时间：2013-03-03T16:58:30.633
> 
> 标签：ocr

我正在开发一个项目，我必须开发 OCR 算法（我必须从图像中读取文本，然后将其转换为不同的语言）。所以我的第一个任务是从图像中获取文本。

完成第一个任务的步骤。

1.  从给定源加载任何图像格式（bmp、jpg、png）。然后将图像转换为灰度并使用阈值进行二值化（Otsu 算法）。//完成（如何从输出图像中去除噪声？？？）

结果

![输入图像](../Images/11d0093f4585e93b33d32974f26faab2.png)

![输出图像](../Images/d8b1253c6fd08fc83ed1a5a7d10eff0f.png)

2.  检测图像特征，如分辨率和反转。这样我们就可以最终将其转换为拉直的图像以进行进一步处理。（完成了图像的旋转代码，但无法检测到我们必须旋转图像的图像角度，因此仍在进行角度检测部分）

3.  线路检测和删除。这一步是为了改进页面布局分析，达到更好的下划线文本识别质量，检测表格等所需要的。（决定完成该部分在End）

4.  页面布局分析。在这一步中，我试图识别图像中存在的文本区域。因此，只有该部分用于识别，而该区域的其余部分被排除在外。

5.  检测文本行和单词。在这里，我们还需要注意不同的字体大小和单词之间的小间距。

6.  字符的识别。这是OCR的主要算法；每个字符的图像都必须转换为适当的字符代码。有时该算法会为不确定的图像生成几个字符代码。例如，识别“I”字符的图像可以产生“I”、“|” “1”、“l”代码和最终字符代码将在稍后选择。

7.  将结果保存为选定的输出格式，例如可搜索的 PDF、DOC、RTF、TXT。保存原始页面布局很重要：列、字体、颜色、图片、背景等。

所以我在第 6 部分需要帮助。我已经完成了行检测部分（从包含 n 行的段落中获取 n 个图像），但在下一部分获取单词和字符识别时卡住了。如果您知道与 OCR 和字符识别部分相关的良好链接，请发布这里。

对于字符识别，我正在考虑使用 asprise（Java 库）[http://asprise.com/product/ocr/index.php?lang=java](http://asprise.com/product/ocr/index.php?lang=java)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-14T02:58:33.870

要检测**旋转角度**，请使用[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)。

对于**降噪**，将没有相邻像素（北、东、南或西）的任何像素替换为相同颜色（相似颜色，使用容差阈值），用相邻像素的平均值。

搜索用于**布局检测**的垂直空白间隙。沿垂直间隙切片。对于每个切片，现在搜索水平间隙并切片。如果切片具有相同（相似）的高度，则您处于线级。否则重复垂直/水平切片，直到只剩下线条。最后一步是垂直切片，为您提供单个字符（或在某些情况下为连字）。长而窄或短而宽的切片是线条。

将字符切片与字符库进行比较。如果性能不是主要关注点，请尝试在不同的字体库中查找字符，直到您可以识别所使用的字体。然后坚持使用该字体进行**字符识别**。

在原始图像中，将每个字符替换为背景颜色，这是通过为字符的每个像素插入不属于字符的像素来确定的。如果有的话，这会给你**背景图像**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-15T15:35:01.373

你应该使用自适应阈值而不是 Otsu 方法。我认为这会有所帮助[http://www.csse.uwa.edu.au/~shafait/papers/Shafait-efficient-binarization-SPIE08.pdf](http://www.csse.uwa.edu.au/~shafait/papers/Shafait-efficient-binarization-SPIE08.pdf) 这种方法会自动删除噪音。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-14T03:05:44.390

您可能想查看[Tesseract](https://github.com/tesseract-ocr)的字符识别部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-18T12:50:07.377

您可以使用 potrace 来减少噪音它将给定的图像（bmp）矢量化并将其转换为 svg、pdf 和一些其他格式

[http://potrace.sourceforge.net/potrace.html](http://potrace.sourceforge.net/potrace.html)

# breeze - 即使我们在客户端导入元数据，Breeze 也会请求从服务器获取元数据

> ID：15188107
> 
> 赞同：0
> 
> 时间：2013-03-03T16:58:45.103
> 
> 标签：breeze

我们正在通过 metadataStore 设置微风元数据，我们已经使用这种方法几个月了。但是前几天我们意识到，即使我们使用 metadataStore 来设置元数据，微风也会向服务器发出请求以获取元数据——它并没有在几个版本之前发出这个请求（我不确定是哪个版本，但我可以追溯） . 我编写了一个 T4 模板来生成稍微修改过的元数据，但微风不使用它，总是从服务器加载元数据并覆盖我的。

这里我们如何设置我们的元数据；

```
var core = breeze.core,
    entityModel = breeze.entityModel,
    serviceName = 'api/Service',
    metadataStore = new entityModel.MetadataStore();

metadataStore.importMetadata($.toJSON(metadata));

var createManager = function () {
    return new entityModel.EntityManager({
        serviceName: serviceName,
        metadataStore: metadataStore
    });
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:41:23.233

您需要创建一个将“hasServerMetadata”设置为 false 的 DataService：

```
 var dataService = new DataService({
         serviceName: serviceName,
         hasServerMetadata: false
     });

     return new EntityManager({
         dataService: dataService,
         metadataStore: metadataStore
     }); 
```

希望这可以帮助。

# ruby - 循环遍历带有部分的文本文件

> ID：15188108
> 
> 赞同：0
> 
> 时间：2013-03-03T16:58:45.313
> 
> 标签：ruby, loops, text, each

我有一个大约 11000 行的文件。它是这样构建的：

```
some info 1
some cool info 1
some other info 1
foo bar 1

some info 2
some cool info 2
some other info 2
foo bar 2 
```

我想设置一个循环来完成这个，并且喜欢：

```
data1 = line1
data2 = line2
data3 = line3
data4 = line4
# do stuff with the data 1,2,3,4
data1 = line7
data2 = line8
data3 = line9
data4 = line10
# do stuff with the data 1,2,3,4 
```

并对文本文件中的所有内容执行此操作。有人有什么想法吗？手动执行十行很好，但是当它大约 11000 行时，我宁愿让它自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:06:56.877

在您的对象上使用[each_slice将完美地完成这项工作。](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)`File`虽然这并没有考虑空行，但是在另一个答案中有一个很好的技巧来处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:09:32.457

```
File.open('/tmp/lines', 'r').each_slice(6) do |group|
  # remove newlines
  group.map! {|item| item.chomp }

  data1, data2, data3, data4 = group

  # do something with the variables...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:12:08.467

```
input = <<-EOF
some info 1
some cool info 1
some other info 1
foo bar 1

some info 2
some cool info 2
some other info 2
foo bar 2
EOF

input.lines.reject(&:empty?).each_slice(4) do |data|
  puts data[0]
  puts data[1]
  puts data[2]
  puts data[3]
  puts '-----'
end 
```

输出：

```
some info 1
some cool info 1
some other info 1
foo bar 1
-----
some info 2
some cool info 2
some other info 2
foo bar 2
----- 
```

# mysql - 通过全文搜索连接两个表

> ID：15188112
> 
> 赞同：1
> 
> 时间：2013-03-03T16:59:29.293
> 
> 标签：mysql, full-text-search, left-join, inner-join

该数据库仅用于合并两个表，其中一个包含位置，另一个包含纬度和经度值。我想要做的是按位置连接这两个表，以便将纬度和经度值添加到表 1 中。

表格1：

```
Title:                Location:                          Latitude:       Longitude
pizza shop            london, chelsea, el13 4hr          Null            Null
Phone Shop            Manchester - Derby                 Null            Null
Computer Repair       Birmingham (b70)                   Null            Null

Table 2:

Location             Latitude:          Longitude:
London               53.6658            0.25533
birmingham           54.3665            0.89336
manchester           66.3368            0.25836 
```

表 1 的位置列在某些情况下可以包含使用逗号破折号或多个位置的数据，因此我选择使用全文来匹配第一次匹配的内容并在那里显示经度和纬度值。

表 1 的最终结果应为：

```
Title:                Location:                          Latitude:       Longitude
pizza shop            London                             53.6658         0.25533
Phone Shop            manchester                         66.3368         0.25836
Computer Repair       birmingham                         54.3665         0.89336 
```

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:50:43.717

你可能会找这个

```
 select t1.Title , SUBSTRING_INDEX(t1.Location, ' ', 1)as Location , t2.Latitude  , t2.Longitude 
   from Table1 t1
  inner join
  Table2 t2
   on  SUBSTRING_INDEX(t1.Location, ' ', 1) = t2.Location 
```

输出：

```
TITLE               LOCATION       LATITUDE     LONGITUDE
pizza shop          london         53.6658      0.25533
Computer Repair     Birmingham     54.3665      0.89336
Phone Shop          Manchester     66.3368      0.25836 
```

[**在这里演示 SQLFIDDLE**](http://www.sqlfiddle.com/#!2/fd585/3)

with`UPDATE`语句应该是这样的

```
 update Table1 t1
        inner join Table2 t2
        on  SUBSTRING_INDEX(t1.Location, ' ', 1) = t2.Location 
    SET t1.Latitude = t2.Latitude ,
        t1.Longitude = t2.Longitude 
```

[**演示 SQLFIDDLE**](http://www.sqlfiddle.com/#!2/cb126/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:29:19.610

```
select t1.title, t2.location, t2.latitude, t2.longitude
from table1 t1, table2 t2
where t1.location ilike concat('%', t2.location, '%'); 
```

# c - 多个execlp不起作用

> ID：15188115
> 
> 赞同：0
> 
> 时间：2013-03-03T16:59:40.767
> 
> 标签：c, exec

我需要一些帮助。运行程序后，我需要执行所有三个 execlp() 但发生的情况是只有 case 0 被执行。我将 pid 更改为 1 并且 case1 被执行，依此类推。尝试将其放入 for 循环但不起作用。我更改了 break 以继续但仍然相同 - 只执行一个进程。有什么建议么？

主要的（）{

```
pid_t pid;
pid= fork();
int i;

if(pid==0){

    for (i=0; i<3; i++){
        switch (i){
            case 0:
            execlp("/bin/cat", "cat", "wctrial.txt", NULL);
            break;

            case 1:     
            execlp("/bin/mkdir", "mkdir", "mydirectory", NULL);
            break;

            case 2:
            execlp("/bin/wc", "wctrial.txt", NULL);
            break;
        }
    }

}else{
    wait(NULL);
    printf("Child process completed!");
    exit(0);
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:01:53.190

根据[`man execlp`](http://linux.die.net/man/3/execlp)：

> 该 `exec()`函数系列用新的过程映像**替换**当前的过程映像。

（重点是我的）

因此，一旦调用成功`execlp`，该进程就不会重新执行旧代码。

```
case 0:
    execlp("/bin/cat", "cat", "wctrial.txt", NULL);
    /* shouldn't go here */
    break; 
```

如果要执行这三个程序，可以创建三个进程。例如（循环展开）：

```
pid_t son;

son = fork();

if (son == -1) /* report */
else if (son == 0) execlp("/bin/cat", "cat", "wctrial.txt", NULL);
else wait(NULL);

son = fork();

if (son == -1) /* report */
else if (son == 0)  execlp("/bin/mkdir", "mkdir", "mydirectory", NULL);
else wait(NULL);

/* ... */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:08:52.353

另见基里连科的回答。解决方案是使用`system(..)`而不是`execlp(..)`.

手册页[在这里](http://linux.die.net/man/3/system)。

# android - 如何将登录表单放置在布局的中心

> ID：15188120
> 
> 赞同：4
> 
> 时间：2013-03-03T17:00:04.063
> 
> 标签：android, android-layout, layout

我正在尝试创建以下布局：

```
|-----------------------------------------------------------|
|                                                           |
|                                                           |
|                                                           |
|                                                           |
|                 L-Email     [___________]-R               |
|                 L-Password  [___________]-R               |
|                                   (Login)-R               |
|                                                           |
|                                                           |
|                                                           |
|-----------------------------------------------------------| 
```

所以我正在尝试创建一个线性布局，每封电子邮件、密码和登录行都是一个线性布局。但我想要的是将整个东西放在中心（垂直和水平）并将电子邮件和密码标签与屏幕的“L-”部分对齐（“L-”只是表示我想要对齐到那里）虽然我想将两个文本框和登录按钮与“-R”符号对齐（所以我实际上不需要L-和-R符号，这些只是表示此模型中的对齐位置）

这是一个更具体的模型：

![样机示例](../Images/9740299d74f54f6c9eaa4b3dad3ba125.png)

所以我想将整个东西对齐到中心并将文本标签对齐到左边的绿线，而其他的对齐到右边的绿线。

目前我更喜欢在 Eclipse 中使用图形编辑器，但欢迎提出任何建议。

到目前为止，我已经尝试过这个，但已经卡住了：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/sahbg"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:id="@+id/EditText01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

</LinearLayout> 
```

它看起来像这样：

![布局结果](../Images/041ac0c5573acd4fe83a0467c0758213.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:18:46.850

使用您现有的代码：

1.  改变外部LinearLayout的高度和宽度：

    ```
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    ```

    （而且您可能需要更改`gravity="center"`为`layout_gravity="center"`，老实说，我现在不记得哪个是哪个。）

2.  将“密码”LinearLayout 的宽度切换为`match_parent`“用户名”和“密码”行的宽度相同。

3.  删除包含 Button 的 LinearLayout，因为它不是必需的，并添加：

    ```
    android:layout_gravity="right" 
    ```

    到 Button 以将其移至右侧。您也可以在 EditTexts 上使用它并给它们一个特定的宽度以强制它们具有相同的大小。

# java - 无法通过用户输入使用数组排序找到符号

> ID：15188126
> 
> 赞同：-3
> 
> 时间：2013-03-03T17:00:47.603
> 
> 标签：java, arrays, compiler-errors

初学者 - 这是通过了应得的作业。我想消除重复的数字并给出要使用的特定 public static int[] xxx(int[] list) 。当我在 textpad 中编译时，以下代码给出错误找不到符号编号 [i] 并且 ^ 位于 [i].symbol vaiable i（无法复制错误消息）

```
import java.util.Scanner;
import java.util.Arrays;

public class Duplicate{

public static int[] Duplicate(int[] list){

int[] numbers = new int[10];

Scanner input = new Scanner(System.in);
System.out.print("Enter 10 numbers: ");
numbers[i] = input.nextInt();

for(int i = 0; i < numbers.length; i++)
Arrays.sort(numbers);

for(int i = 0; i < numbers.length; i++)
System.out.println(numbers[i]);

}//end eliminate
}//end Duplicate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:03:38.450

看起来你已经用循环头和循环体切换了这条线：

```
numbers[i] = input.nextInt();
for(int i = 0; i < numbers.length; i++) 
```

应该

```
for(int i = 0; i < numbers.length; i++) {
    numbers[i] = input.nextInt();
} 
```

目前，您的代码`i`在声明之前使用，并排序十次；这两件事都没有意义。

早期学习的一个非常好的习惯是在所有控制语句的主体周围放置花括号，即使主体是单行也是如此。这将通过视觉上将控制结构与它们控制的代码配对来帮助您避免类似的简单错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:04:20.987

您需要在使用变量之前声明它们。

```
numbers[i] = input.nextInt(); 
```

在您代码的上述行中， i 尚未初始化，因此您收到此错误。

# asp.net-mvc-4 - 如何在使用 MVC4 作为前端的洋葱架构中使用动态模块加载

> ID：15188128
> 
> 赞同：0
> 
> 时间：2013-03-03T17:00:53.127
> 
> 标签：asp.net-mvc-4, ninject, onion-architecture

我正试图围绕[Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)中的依赖注入，我发现[这个解决方案](http://onionarch.codeplex.com/)在洋葱周围使用依赖解析层。但是发生的事情太多了，我完全迷失了。

所以我设置了一个项目来尝试一下。我喜欢从简单开始，因此（MVC）控制器方法上的简单日志条目将是一个好的开始。我想使用[动态模块加载](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)( `kernel.Load("*.dll");`)，因为它是 Ninject wiki 推荐的。

我的解决方案如下所示：（目前）

```
Solution
- Core.Services
- Infrastructure.Logging
- DependencyResolution
- UI.MVC (default internet template) 
```

我想遵循[此处](http://eohmicrosoft.blogspot.dk/2012/08/laying-it-out-onion-architecture.html)概述的依赖关系解决指南。

![在此处输入图像描述](../Images/8985318de1c88a815a2c31d45ea6219f.png)

**记录器**

```
namespace Core.Services
{
    public interface ILogger
    {
        void Log(string message);
    }
} 
```

**日志实现**

```
namespace Infrastructure.Logging
{
    public class DebugLogger : ILogger
    {
        public void Log(string message)
        {
            Debug.WriteLine(message);
        }
    }
} 
```

**依赖解析**

```
namespace DependencyResolution
{
    public class TestModule : NinjectModule
    {
        public override void Load()
        {
            Bind<ILogger>().To<DebugLogger>();
        }
    }
} 
```

## 我想要完成的

**用户界面**

```
namespace UI.MVC.Controllers
{
    public class HomeController : Controller
    {
        private readonly ILogger _logger;

        public HomeController(ILogger logger)
        {
            _logger = logger;
        }

        public ActionResult Index()
        {
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            _logger.Log("It works!");

            return View();
        }
    }
} 
```

我需要以`kernel.Load("*.dll");`某种方式运行，我需要设置我的 MVC 以使用 DI。我现在才确定如何，因为 UI 无法知道 Dependency Resolution 层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:14:57.963

您的 DI 容器应该在某处组成。这个地方叫做`composition root`最外层。在您的情况下，这将是 ASP.NET MVC 应用程序。所以说它不应该知道 DI 根本没有意义。Ninject.MVC3 包附带了一个自定义依赖解析器实现，它被插入到应用程序中，您将在控制器中获得自动 DI。

# php - 从 PHP 脚本中删除 apache2 访问日志

> ID：15188132
> 
> 赞同：1
> 
> 时间：2013-03-03T17:01:13.893
> 
> 标签：php, apache, apache2

我让我的 apache2 生成一个 access.log 文件，该文件由 root:root 拥有（如果需要/可能，我可以更改它）。

我可以使用 apache2 访问该文件，如`file_get_contents('../access.log');`

在某些情况下，使用 CRON，我需要重置此文件的内容，即擦除它并开始仅收集新数据。

但是，当我删除文件时，apache 不会再次创建它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:05:40.187

如果脚本具有删除文件的权限，您还应该能够对其进行写入：

`file_put_contents($filename, "");`将用空字符串覆盖文件而不删除它。可能有一种“正确”的方法可以让 apache 重新创建日志文件，但这应该是一种功能性的解决方法。

# f# - FSharp 中的条件包含

> ID：15188134
> 
> 赞同：1
> 
> 时间：2013-03-03T17:01:28.587
> 
> 标签：f#

我想将一堆 fs 文件转换为 fsx 文件。

每个 fs 文件引用类中的每一个都定义在 base.fs 中，因此不是在项目中编译并依赖编译器解析，而是基于文件。

这意味着如果我让所有这些文件都包含 base.fsx，并且一个文件引用另一个文件，那么 base.fsx 将被包含两次。

有谁知道如何使用 fsx 文件进行条件包含？

预[处理器文档](http://msdn.microsoft.com/en-us/library/dd233195.aspx)状态

> F# 中没有#define 预处理器指令。您必须使用编译器选项或项目设置来定义 #if 指令使用的符号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T18:18:44.653

如果您从单个`fsx`脚本加载所有文件，那么您可以按正确的顺序从项目中加载各个文件，并且各个库文件不需要`base.fs`直接加载 - 代码将被定义，因为它已被加载前。

例如，如果您有`base.fs`：

```
module Base   
let test() = 10 
```

你有`more.fs`which 不*加载*但`base.fs`使用那里定义的函数：

```
module More   
let more () =
  Base.test() + 1 
```

然后您可以在 F# 交互中加载所有文件（例如，在 中`script.fsx`），它会正常工作：

```
#load "base.fs"
#load "more.fs"

More.more() 
```

唯一的缺点是你在编辑时不会得到 IntelliSense `more.fs`（因为编辑器不知道`base.fs`）。要解决此问题，最好将文件保存在 Visual Studio 的项目中。但是您仍然可以在 F# 交互中加载它们以进行实验和测试。

# d3.js - Geojson 与 d3 的基本帮助

> ID：15188138
> 
> 赞同：0
> 
> 时间：2013-03-03T17:01:42.193
> 
> 标签：d3.js, geojson

我是 d3 和 geojson 的新手。我阅读了 d3 的文章。我几乎都明白了。现在我开始使用 geojson 和 d3 创建加拿大地图。

我正在阅读文章

[http://bost.ocks.org/mike/map/](http://bost.ocks.org/mike/map/)

我安装了GDAL。然后我尝试安装文章中提到的 Node.js。

自动cmd打开了。

> npm install -g topojson （我给出了这个命令） npm 应该在 node repl 之外运行，在你的普通 shell 中。

（按 Control-D 退出。）

> install -g topojson （我给出了这个命令）...

我不知道，如何进一步进行。从文章中，我也无法获得应该下载哪些文件。我什至不知道，我应该使用什么东西。我只想用 d3 和 geojson 创建一张加拿大地图。这是我所知道的一切。我是全新的。请帮帮我。我知道，这是非常愚蠢的事情。

我需要对环境变量进行任何更改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:21:27.150

您不需要为基本地图安装任何东西。看看[这个例子](http://bl.ocks.org/biovisualize/2322933)。您需要做的就是为 Canda 加载 GeoJSON，而不是为 UK 加载 GeoJSON。如果您没有合适的 GeoJSON 文件，只需 google 即可。

# java - 字节流问题

> ID：15188139
> 
> 赞同：0
> 
> 时间：2013-03-03T17:01:48.837
> 
> 标签：java

我很难理解这段代码是如何工作的。它使用字节流：

```
in = new FileInputStream("xanadu.txt");
out = new FileOutputStream("x.txt");
int c;

while((c = in.read()) != -1) {
    out.write(c);   
} 
```

我不明白的是`while`循环。输入流是否像数组一样工作，其中索引正在递增，并且该索引被传递到输出流？

如果有人可以解释，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:05:07.487

[`read()`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#read%28%29)从流中读取单个字节。该字节作为`int`值返回（0-255，因为 Java 中没有无符号字节）。如果您`-1`从流中接收，则表示流的结尾`EOS`（使用 时是文件的结尾[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html)）。

* * *

关于while循环：

```
while((c = in.read()) != -1) 
```

`in.read()`首先执行，将值分配给`c`，然后将布尔比较`c != -1`评估为 while-loop 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:09:22.147

我猜 in.read() 就像一个 for 循环。它返回文件中的下一个字节，并将*其*迭代器加一。在带有文本“Hello World”的文件中，in.read() 最初会产生“H”。in.read() 然后会产生'e'，依此类推，直到文件结束。

在文件末尾， in.read() 无法读取更多字节。该函数旨在通过返回 -1 优雅地退出此状态。当然，字节不能有 -1 的值；因此，无论何时您从该方法中获得 -1 值，您都可以确定它位于文件末尾。

while ((cin=in.read())!=-1){} 做了两件事。首先，它设置 c 等于 in.read(); 然后，它检查它是否等于-1。如果不是，则它进入循环体。括号中的事物（即使它们不一定是算术）总是在括号外的事物之前评估。

# wpf - 如何终止 WPF 中的分派线程

> ID：15188141
> 
> 赞同：1
> 
> 时间：2013-03-03T17:01:53.673
> 
> 标签：wpf, multithreading, dispatcher

我有一个简单且非常文字的 WPF，其中当我单击开始时，它将开始工作，如果单击停止，它将停止。启动工作/后台线程的代码是：

```
--- variables ---
Thread[] thd;
bflag = false;

--- Start background worker when Start button is clicked ---
private void btnStart_Click(object sender, RoutedEventArgs e)
{
   Thread startFileCopy = new Thread(() => startFC());
   startFileCopy.Start();  
}

--- StartFC code ---
private void startFC()
{
   bflag = true;
   thd = new Thread[3];
   for(int i=0; i<3; i++)
   {
      thd[i] = new Thread(copynow);
      thd[i].Start();
   }
}

--- copynow code ---
private void copynow()
{
   while(bflag)
   {
      if (filecount == 0)
        bflag = false;
      else
      {
         // --- copy file ---
         Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background,
               new Action(() => copyFile(<filename to be copied>)));
         // --- update progressbar ---
         Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background,
               new Action(() => updateProgressbar(++1)));
      }
   }
} 
```

现在要停止这种情况，在我的取消按钮上，我调度了另一个以发送为优先级的线程，将 bflag 设置为 false。但是，根据我的 UI 上的响应，进度条仍在更新，文件复制仍在继续。我的停止按钮的代码：

```
--- Stop when stop button is clicked ---
private void btnStop_Click(object sender, RoutedEventArgs e)
{
   Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Send, 
              new Action(() => stopThreads()));
}

--- stopThreads code ---
private void stopThreads()
{
   bflag = false;
   if (thd != null)
     for (int i = 0; i < THREAD_COUNT; i++)
       if (thd[i].IsAlive)
          thd[i].Join(3000);
} 
```

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:07:45.047

您的线程方法的问题在于它通过以下方式反复启动该`copyFile`方法的异步执行`BeginInvoke`：

```
// --- copy file ---
Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background,
    new Action(() => copyFile(<filename to be copied>))); 
```

这会创建许多在 Dispatcher 队列中排队等待执行的操作。即使你的线程停止了，仍然有很多这些排队的操作，这让你认为线程仍在运行。

您需要以实际在线程方法中执行复制操作的方式更改代码：

```
private void copynow()
{
    while (bflag && filecount > 0)
    {
        copyFile(<filename to be copied>);

        // update progressbar by synchronous Invoke instead of BeginInvoke
        Application.Current.Dispatcher.Invoke(
            new Action(() => updateProgressbar(++1)));
    }
} 
```

# algorithm - 证明n个正整数可以在Nlogk时间内排序

> ID：15188143
> 
> 赞同：1
> 
> 时间：2013-03-03T17:02:02.807
> 
> 标签：algorithm

证明 1 到 k 范围内的 n 个正整数可以在 O(n log k) 时间内排序。

我只能使用 Mergesort，因为我知道如何使用堆。这不是硬件问题，它来自 Skiena 的书。

我看到如果我有 K = 3，那么我可以通过 3 个步骤合并列表；但这足以回答或“展示”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:25:57.793

[这里](http://discuss.joelonsoftware.com/default.asp?interview.11.439577.9)有一些有效排序的想法。正如用户 templatetypedef 所说，[基数排序](http://en.wikipedia.org/wiki/Radix_sort)可能是您正在寻找的。

希望能帮助到你

# wpf - WPF：如何在 Excel 复制模式下绘制矩形？

> ID：15188144
> 
> 赞同：1
> 
> 时间：2013-03-03T17:02:02.817
> 
> 标签：wpf, excel

在 Excel 中，当您按 Ctrl+C 时，当前单元格被一个矩形包围，虚线似乎在周围运行。关于如何在 WPF 中制作它的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:09:22.713

您正在寻找的通常称为*“行军蚂蚁边界”*。WPF 已经有一些实现。

这是来自[Patric Johansson 的博客](http://patricjsson.wordpress.com/2011/07/08/marching-ants-border-for-wpf/)和[来自 codeproject 的另一个](http://www.codeproject.com/Articles/27816/Marching-Ants-Selection)

添加了来自 CodeProject 的主要代码以供将来参考：

```
<Window.Resources>
    <Storyboard x:Key="MarchingAnts">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" 
                           Storyboard.TargetName="rectangle" 
                           Storyboard.TargetProperty="(Shape.StrokeDashOffset)" 
                           RepeatBehavior="Forever">
            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
            <SplineDoubleKeyFrame KeyTime="00:00:00.5000000"
                           Value="10"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource MarchingAnts}"/>
    </EventTrigger>
</Window.Triggers>

<Grid x:Name="LayoutRoot">
    <Canvas x:Name="canvas" Background="#FF262626">
        <Rectangle Fill="#14FFFFFF" StrokeDashArray="5" 
            Stroke="#FFFFFFFF" 
            x:Name="rectangle" Width="50" Height="50" 
            StrokeDashOffset="0" StrokeThickness="1" 
            RadiusX="0" RadiusY="0"
            Canvas.Left="0" Canvas.Top="0"/>
        <TextBlock Width="Auto" Height="Auto" 
            FontFamily="Century Gothic" 
            FontSize="48" Foreground="#FF5B5B5B" 
            Text="MARCHING ANTS" TextWrapping="Wrap" 
            Canvas.Top="182" Canvas.Left="79"/>
    </Canvas>
</Grid> 
```

# javascript - jQuery 未绑定到新创建的元素

> ID：15188145
> 
> 赞同：0
> 
> 时间：2013-03-03T17:02:06.203
> 
> 标签：javascript, jquery, html, binding

这就是我所拥有的：

```
<script language="javascript">
$('#click').one('click', function () {
   var html = '<input type="text" class="input-mini" id="new-input" />';
   $(this).parent().append(html);
});
$('#new-input').on('keyup', function (e) {
   alert('A key was pressed');
   if (e.keyCode == 13) {
      alert('Enter key pressed');
   }
});
</script> 
```

在[其他 SO 答案](https://stackoverflow.com/questions/203198/event-binding-on-dynamically-created-elements)的建议下，我发现我应该使用`on()`绑定动态创建的元素。我想要发生的是在用户按下`<input>`with ID内的 Enter 键后发生 AJAX 调用`new-input`。但是，当任何键被按下时，什么都不会发生。

`keyup`为了将方法绑定到新附加的`<input>`元素，我需要做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:03:56.687

### 阅读[文档](http://api.jquery.com/on)

`.on()`并不总是绑定动态创建的元素；只有当你传递一个选择器来监听以下内容时，它才会这样做：

```
$('some container').on('click', '.new-input', function() { ... }); 
```

此外，ID 必须是唯一的；你应该使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:16:22.060

jsfiddle 链接：http: [//jsfiddle.net/qTd9c/](http://jsfiddle.net/qTd9c/)

```
$('#click').one('click', function () {
    var html = '<input type="text" class="input-mini" id="new-input" />';
    $(this).parent().append(html);

    $('#new-input').on('keyup', function (e) {
        alert('A key was pressed');
        if (e.keyCode == 13) {
            alert('Enter key pressed');
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:11:16.270

在创建 keyup 绑定时，dom 上不会有匹配的元素 - 尝试在第一个回调中移动第二个绑定：

```
<script language="javascript">
    $('#click').one('click', function () {
       var html = $('<input type="text" class="input-mini" />');

       html.on('keyup', function (e) {
           alert('A key was pressed');
           if (e.keyCode == 13) {
               alert('Enter key pressed');
           }
        });

       $(this).parent().append(html);
    });
</script> 
```

# redis - Redis 中的嵌套多批回复

> ID：15188146
> 
> 赞同：1
> 
> 时间：2013-03-03T17:02:06.563
> 
> 标签：redis

在[redis 协议规范](http://redis.io/topics/protocol)中，在“多批回复部分”下：

> 多批量回复用于返回一组其他回复。多批量回复的每个元素都可以是任何类型，包括嵌套的多批量回复。

但是，我想不出让 Redis 返回此类输出的方法。谁能提供一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:48:30.053

只有某些命令（尤其是返回值列表的命令）返回多批回复，您可以尝试使用[`LRANGE`](http://redis.io/commands/lrange)example，但您可以查看[命令参考](http://redis.io/commands)以获取更多详细信息。

通常多批量回复只有 1 级深度，但一些 Redis 命令可以返回嵌套的多批量回复（最多 2 级），特别是[`EXEC`](http://redis.io/commands/exec)（取决于在事务上下文中执行的命令）和两者[`EVAL`](http://redis.io/commands/eval)/ [`EVALSHA`](http://redis.io/commands/evalsha)（取决于返回的值通过 Lua 脚本）。

这是一个使用示例`EXEC`：

```
redis 127.0.0.1:6379> MULTI
OK
redis 127.0.0.1:6379> LPUSH metavars foo foobar hoge
QUEUED
redis 127.0.0.1:6379> LRANGE metavars 0 -1
QUEUED
redis 127.0.0.1:6379> EXEC
1) (integer) 4
2) 1) "hoge"
   2) "foobar"
   3) "foo"
   4) "metavars" 
```

多批量回复的第二个元素`EXEC`是多批量 itef。

**PS**：我在评论中添加了关于使用 Lua 脚本时多批回复的实际最大嵌套级别的说明。tl; dr：基本上没有限制。

# python - python对dicts数组进行排序？

> ID：15188148
> 
> 赞同：3
> 
> 时间：2013-03-03T17:02:12.867
> 
> 标签：python

与以下

**代码**

```
arr = [{"name":"joe", "hotdogs":5},{"name":"april", "hotdogs":5},{"name":"ryan", "hot dogs":8}] 
```

如何在python中对数组的元素进行排序，例如字典按名称排序？

```
arr = [{"name":"april", "hotdogs":5},{"name":"joe", "hotdogs":5},{"name":"ryan", "hotdogs":8}] 
```

如何应用一些函数对数组中的字典进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:04:17.183

像这样：

```
arr.sort(key=operator.itemgetter('name')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:39:02.023

看看下面的网页： [http ://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:29:24.073

怎么样

```
>>> import collections
>>> collections.OrderedDict(april=5, joe=5, ryan=8)
OrderedDict([('april', 5), ('joe', 5), ('ryan', 8)] 
```

* * *

或根据帝斯曼的评论

```
>>> collections.OrderedDict([('april', 5), ('joe', 5), ('ryan', 8)])
OrderedDict([('april', 5), ('joe', 5), ('ryan', 8)]) 
```

# c++ - C++ 向下转型

> ID：15188149
> 
> 赞同：0
> 
> 时间：2013-03-03T17:02:24.630
> 
> 标签：c++, interface, casting, member

这个问题是[我在此处发布的后续内容](https://stackoverflow.com/questions/15186114/referencing-to-a-pointer-member-in-a-different-class)

Synth 实现了 Generator 和 Track 有一个生成器成员（其中有一个 Synth）。我想做的是：

```
Track track = Track();
cout << track.generator.varA << endl; 
```

但这不起作用，所以我猜我必须先以某种方式将生成器转换为 Synth，然后才能访问任何合成器方法或成员，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:04:20.453

当您确定您拥有的基指针确实是派生类型时，要向下转换为派生类型，请执行以下操作：

`static_cast<Derived*>(myBasePointer)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:06:07.410

首先，`generator`是一个指针，因此您不能使用`.`运算符来访问指向对象的成员，就像您在此处所做的那样：

```
track.generator.varA // ERROR! 
```

其次，既然你想要一个指向*派生类*的指针并且你有一个指向基类的指针，你应该使用`dynamic_cast<>`来获取一个（除非你确定指向的对象是派生类的一个实例，在这种情况下你可以使用`static_cast<>`):

```
Synth* p = dynamic_cast<Synth*>(track.generator);
if (p != nullptr)
{
    cout << p->varA << endl;
} 
```

# visual-studio - 安装 Internet Explorer 10 后，如何在 Visual Studio 2012 中调试 Silverlight 5 应用程序？

> ID：15188151
> 
> 赞同：12
> 
> 时间：2013-03-03T17:02:42.173
> 
> 标签：visual-studio, silverlight, visual-studio-2012, silverlight-5.0, internet-explorer-10

更新到 Internet Explorer 10 后，我无法再在 Visual Studio 中调试我的 Silverlight 应用程序。我没有对我的系统进行其他更改，并且在更新到 IE10 之前，它在 Internet Explorer 9 上运行良好。当我在 Visual Studio 中按 F5 时，IE10 启动，Silverlight 应用程序在浏览器中运行，但在 Silverlight 代码中未命中断点。如果我按 shift+F5（停止调试），浏览器保持打开状态（这用于关闭它）。或者，如果我在调试时关闭浏览器，它不会停止在 Visual Studio 中进行调试（以前总是这样做）。我正在运行Win7 64。

在 Visual Studio 2010 和 Silverlight 4 中也重现了此问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T13:25:46.080

我在使用 Visual Studio 2012 和 Silverlight 5 时遇到了同样的问题。我得到的症状包括以下内容。

1.  当我在 Visual Studio 中以调试模式启动应用程序时，将打开多个浏览器实例。
2.  我有时会在浏览器中收到错误消息，提示无法加载应用程序。
3.  Visual Studio 将自动与浏览器分离并退出调试模式。
4.  关闭 Silverlight 调试器（请参阅 Web 项目属性对话框中的 Web 选项卡）似乎减少了其他问题。然而，这确实意味着我无法调试 Silverlight 代码。

为了解决这些问题，我在解决方案资源管理器中右键单击一个 aspx 文件并选择“浏览方式...”以打开以下对话框。

![使用对话框浏览](../Images/0d395a9d9a02b3a97b46deb2b00baed4.png)

请注意，“Internet Explorer”有两个条目。

我删除了两者（我暂时将 Firefox 设置为默认设置），取消了对话框，然后重新打开它。此时，“Internet Explorer”的新条目已自动添加回。我将此设置为默认值，然后没有其他问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T21:20:33.350

我对 VS2012 也有同样的想法。看起来 Visual Studio 对使用哪个 IE 感到困惑——不知何故，在系统中我有两个 IE 实例作为目标浏览器（在名为“Browse With..”的 VS2012 窗口中）我从 VS 目标中删除了所有 IE并重新启动VS。然后只出现一个IE实例，调试器正常附加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T15:42:13.483

同时在两个 IE10 实例中打开基于 Silverlight 的应用程序后，我遇到了类似的问题。我无法调试。之后，我在 Chrome 和 IE10 之间切换以尝试解决问题。我可以在 Chrome 中调试，但不能在 IE10 中调试。但是为了调试目的，Chrome 运行起来很麻烦。

最终，我不得不在三个地方删除所有与 VS 构建相关的临时文件：

```
C:\Users\brchase\AppData\Local
C:\Windows\Microsoft.NET\Framework\v4.0.30319
C:\Windows\Microsoft.NET\Framework64\v4.0.30319 
```

同样，我必须彻底清理项目并关闭 IISExpress。

另外，我做了一个`Tools /Delete Browsing History in IE10`.

以上工作，我可以在 IE10 中再次调试——即使有多个实例正在运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T13:59:08.087

尝试了所有这些建议。

最后不得不删除并重新安装 VS 2012（这不再是直截了当的，因为在 2013 年 10 月之后，一些证书已经过期）。耶微软！

所以在重新安装后，我仍然必须进入“浏览到”并将其从 IE 切换到另一个选项，然后再回到 IE，它现在神奇地工作了..

我认为这是因为 Internet Explorer 更新了自身并让 VS 感到困惑..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T01:56:20.343

使用 Winserver 2008R2、VS2012 或 VS2010。最新版本的 FireFox 不会遇到 SilverLight 断点。[http://timheuer.com/blog/archive/2010/08/16/enable-silverlight-debugging-in-firefox-visual-studio.aspx](http://timheuer.com/blog/archive/2010/08/16/enable-silverlight-debugging-in-firefox-visual-studio.aspx)的Tim Heurs 解决方案不适用，因为所需的行不在 FireFox 配置中. 我的解决方法是回到 IE9（我的 IE10 坏了，所以我不能肯定 IE10 不起作用）

# c++ - 复制和交换习语效率低下？

> ID：15188156
> 
> 赞同：10
> 
> 时间：2013-03-03T17:03:06.377
> 
> 标签：c++, performance, vector, c++11, copy-and-swap

我正在测试一些代码，其中类中有一个`std::vector`数据成员。该类既可*复制又可**移动*，并且按照`operator=`此处所述[使用](https://stackoverflow.com/a/3279550/1629821)复制**和交换习语**实现。

如果有两个`vector`s，说`v1`大容量和`v2`小容量，`v2`复制到`v1`( `v1 = v2`)，赋值后*保留**in中的大容量；`v1`*这是有道理的，因为下一次`v1.push_back()`调用不必强制进行新的重新分配（换句话说：释放已经可用的内存，然后重新分配它以增加向量并没有多大意义）。

但是，如果对具有as 数据成员的*类*`vector`进行相同的分配，则行为会有所不同，并且分配后*不会*保留更大的容量。

如果*不*使用 copy-and-swap 习语，而 copy`operator=`和 move`operator=`是*分开*实现的，那么行为就如预期的那样（与普通的 non-member 一样`vector`）。

这是为什么？我们是否应该不遵循复制和交换习惯，而是分别实现`operator=(const X& other)`（*复制* `op=`）和`operator=(X&& other)`（*移动* `op=`）以获得最佳性能？

**这是使用复制和交换习语**的可重现测试的输出（请注意，在这种情况下，后 `x1 = x2`,`x1.GetV().capacity()`是 1,000，而不是 1,000,000）：

> ```
> C:\TEMP\CppTests>cl /EHsc /W4 /nologo /DTEST_COPY_AND_SWAP test.cpp
> test.cpp
> 
> C:\TEMP\CppTests>test.exe
> v1.capacity() = 1000000
> v2.capacity() = 1000
> 
> After copy v1 = v2:
> v1.capacity() = 1000000
> v2.capacity() = 1000
> 
> [Copy-and-swap]
> 
> x1.GetV().capacity() = 1000000
> x2.GetV().capacity() = 1000
> 
> After x1 = x2:
> x1.GetV().capacity() = 1000
> x2.GetV().capacity() = 1000 
> ```

这是**没有复制和交换习语**的输出（请注意在这种情况下如何`x1.GetV().capacity() = 1000000`，正如预期的那样）：

> ```
> C:\TEMP\CppTests>cl /EHsc /W4 /nologo test.cpp
> test.cpp
> 
> C:\TEMP\CppTests>test.exe
> v1.capacity() = 1000000
> v2.capacity() = 1000
> 
> After copy v1 = v2:
> v1.capacity() = 1000000
> v2.capacity() = 1000
> 
> [Copy-op= and move-op=]
> 
> x1.GetV().capacity() = 1000000
> x2.GetV().capacity() = 1000
> 
> After x1 = x2:
> x1.GetV().capacity() = 1000000
> x2.GetV().capacity() = 1000 
> ```

可编译的示例代码如下（用VS2010 SP1/VC10测试）：

```
#include <algorithm>
#include <iostream>
#include <vector>
using namespace std;

class X
{
public:
    X()
    {
    }

    explicit X(const size_t initialCapacity)
    {
        m_v.reserve(initialCapacity);
    }

    X(const X& other)
        : m_v(other.m_v)
    {
    }

    X(X&& other)
        : m_v(move(other.m_v))
    {
    }

    void SetV(const vector<double>& v)
    {
        m_v = v;
    }

    const vector<double>& GetV() const
    {
        return m_v;
    }

#ifdef TEST_COPY_AND_SWAP     
    //
    // Implement a unified op= with copy-and-swap idiom.
    //

    X& operator=(X other)
    {
        swap(*this, other);       
        return *this;
    }

    friend void swap(X& lhs, X& rhs)
    {
        using std::swap;

        swap(lhs.m_v, rhs.m_v);
    }    
#else    
    //
    // Implement copy op= and move op= separately.
    //

    X& operator=(const X& other)
    {
        if (this != &other)
        {
            m_v = other.m_v;
        }
        return *this;
    }

    X& operator=(X&& other)
    {
        if (this != &other)
        {
            m_v = move(other.m_v);
        }
        return *this;
    }    
#endif

private:
    vector<double> m_v;
};    

// Test vector assignment from a small vector to a vector with big capacity.
void Test1()
{
    vector<double> v1;
    v1.reserve(1000*1000);

    vector<double> v2(1000);

    cout << "v1.capacity() = " << v1.capacity() << '\n';
    cout << "v2.capacity() = " << v2.capacity() << '\n';

    v1 = v2;
    cout << "\nAfter copy v1 = v2:\n";    
    cout << "v1.capacity() = " << v1.capacity() << '\n';
    cout << "v2.capacity() = " << v2.capacity() << '\n';
}    

// Similar to Test1, but now vector is a data member inside a class.
void Test2()
{
#ifdef TEST_COPY_AND_SWAP 
    cout << "[Copy-and-swap]\n\n";
#else
    cout << "[Copy-op= and move-op=]\n\n";
#endif

    X x1(1000*1000);

    vector<double> v2(1000);
    X x2;
    x2.SetV(v2);

    cout << "x1.GetV().capacity() = " << x1.GetV().capacity() << '\n';
    cout << "x2.GetV().capacity() = " << x2.GetV().capacity() << '\n';

    x1 = x2;
    cout << "\nAfter x1 = x2:\n";
    cout << "x1.GetV().capacity() = " << x1.GetV().capacity() << '\n';
    cout << "x2.GetV().capacity() = " << x2.GetV().capacity() << '\n';
}

int main()
{
    Test1();       
    cout << '\n';    
    Test2();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T17:18:03.107

使用 a 进行复制和交换`std::vector`确实会导致性能损失。这里的主要问题是复制 a`std::vector`涉及*两个*不同的阶段：

1.  分配新的内存段
2.  把东西复制进去。

复制和交换可以消除#2，但*不能*消除#1。考虑在 swap() 调用之前但在输入分配操作之后您会观察到什么。你有三个向量——一个即将被覆盖，一个是副本，一个是原始参数。

这清楚地表明，如果即将被覆盖的向量有足够的容量或过剩的容量，那么中间向量的创建就会浪费，而源的额外容量也会有所损失。其他容器也可以这样做。

复制和交换是一个很好的基准，尤其是在异常安全方面，但它*并不是*全球性能最高的解决方案。如果您在一个狭窄的领域，那么其他更专业的实现可能会更有效 - 但请注意，该领域的异常安全性并非易事，如果不进行复制和交换，有时甚至是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T17:19:18.900

在这种`X`情况下，您正在*交换*向量，而不是使用`vector::operator=()`. 分配保留容量。`swap`交换容量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T22:07:53.347

> 如果有两个向量，比如容量大的v1和容量小的v2，将v2复制到v1（v1=v2），赋值后保留v1中的大容量；这是有道理的，

对我来说不是。

分配后，我希望分配给向量具有与分配向量相同的值和状态。我为什么要招致并不得不拖累过剩的产能。

通过对标准的快速浏览，我不确定该标准是否保证容量在从较小向量的分配中保持不变。（它将在调用 时保留`vector::assign(...)`，因此这可能是意图。）

如果我关心内存效率，`vector::shrink_to_fit()`在很多情况下我必须在分配后调用，如果分配不适合我。

复制和交换具有收缩以适应语义。实际上，它是标准容器收缩以适应的常用 C++98 习语。

> 因为下一个 v1.push_back() 调用不必强制进行新的重新分配（换句话说：释放已经可用的内存，然后重新分配它以增加向量并没有多大意义）。

没错，但这取决于您的使用模式。如果您分配向量然后继续添加它们，则保留任何预先存在的容量是有意义的。如果在构建其内容后分配向量，您可能不想保留分配的过多容量。

> 但是，如果对以向量作为数据成员的类进行相同的分配，则行为会有所不同，并且分配后不会保留更大的容量。

是的，如果您确实在该课程中进行复制和交换。这样做也将复制和交换包含的向量，如上所述，这是一种实现缩小以适应的方法。

> 如果不使用 copy-and-swap 习语，而 copy operator= 和 move operator= 分别实现，则行为符合预期（与普通非成员向量一样）。

如上所述：这种行为是否符合预期是有争议的。

但是，如果它符合您的使用模式，即如果您想在从另一个可能小于先前值的向量分配后继续增长一个向量，那么您确实可以通过使用不会减少现有过剩的东西来获得一些效率容量（例如`vector::assign`）。

> 这是为什么？我们是否应该不遵循复制和交换习惯，而是分别实现 operator=(const X& other) (copy op=) 和 operator=(X&& other) (move op=) 以获得最佳性能？

如前所述，如果它符合您的使用模式并且该分配和附加序列的性能至关重要，那么您确实可以考虑不使用交换和复制进行分配。交换和复制的主要目的是实现最小化（避免重复代码）和强大的异常安全性。

如果您选择不同的实现以获得最佳性能，您将不得不自己处理异常安全，并且您将付出代码复杂性的代价。

# java - 不同的输出文件

> ID：15188163
> 
> 赞同：1
> 
> 时间：2013-03-03T17:03:55.807
> 
> 标签：java, hadoop

我希望 hadoop （ 0.22.0 ）将内容写到不同的文件中，例如 part-r-00000
part-r-00001
part-r-00002
part-r-00003
每个 reduce-job 一个不同的文件。我知道我可以使用 MultipleOutputs-Class，但这让我只能更改“部分”短语，但这不是我想要的。我希望能够说出哪个减速器使用哪个输出文件以及它最后得到的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:07:17.570

当然你有控制权。作业完成时（例如，在 job.waitForCompletion(true) 之后）。您知道输出路径和使用的减速器数量。只需重命名文件，就是这样......要运行更多的reducer，您应该使用一个分区器类。

# python - 编写一个递归函数，它接受 和 整数，如果它的所有数字都是素数，则返回“True”

> ID：15188165
> 
> 赞同：-2
> 
> 时间：2013-03-03T17:04:05.060
> 
> 标签：python, recursion

我必须编写一个 Python 递归函数，它接受一个整数作为参数，`True`如果它的所有数字都是素数，则返回。例如

```
 allPrime(976)
      False
    allPrime(357)
      True 
```

这是我到目前为止所做的

```
def allPrime(n):
    h=str(n)
    for i in range(len(h)):
        if h[i] == isPrime(h):
            return True
        else:
            return False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:28:47.630

为此，您只需提取最后一个数字，检查它是否是素数并继续其余的。

编写递归基本上由一个平凡的案例和一个递归组成，您将问题分解成一个较小的问题，直到您遇到一个平凡的案例。

因此，您需要做的是，找到不需要进一步递归的琐碎案例，然后考虑如何实现这一目标：

```
#separate the number (123) into a last Digit (3) and the rest (12)
lastDigit = n % 10
rest = int(n / 10) 
```

如果我们有一个非素数，我们可以返回 False 并且不会进一步进入递归：

```
if not isPrime(lastDigit):
    return False 
```

琐碎的部分只是一个数字，因此非琐碎的部分是这样的，我们进入递归：

```
if n > 10:
    return allPrime(rest) 
```

所以我们有这样的情况，我们因为非素数而停止，我们有非平凡的情况，平凡的情况也不会递归，因为我们已经有了非素数的情况，我们只需要：

```
return True 
```

**总结一下：**

```
def isPrime(n):
    if n < 2: return False
    if n == 2: return True
    if n & 1 == 0: return False
    for x in range(3, int(n ** 0.5)+1, 2):
        if n % x == 0:
            return False
    return True

def allPrime(n):

    lastDigit = n % 10
    rest = int(n / 10)
    if not isPrime(lastDigit):
        return False
    if n > 10:
        return allPrime(rest)

    return True

print(allPrime(9777))
print(allPrime(773)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:25:24.403

```
def allPrime(n):
    if n==0:
        return(True)
    elif (n%10) in [2,3,5,7]:
        return(allPrime(n//10))
    else:
        return(False) 
```

# android - 将网页读取为字符串但发生错误

> ID：15188173
> 
> 赞同：-2
> 
> 时间：2013-03-03T17:04:20.500
> 
> 标签：android, android-webview, android-service, android-xml, android-internet

尝试将网页作为字符串读取，这是我的代码：

```
 public class ReadWebPage extends Activity {
private EditText url_text;
private TextView textView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    url_text = (EditText) findViewById(R.id.address);
    textView = (TextView) findViewById(R.id.tv);
}
public void myButtonClickHandler(View view) {
    switch (view.getId()) {
    case R.id.ReadWebPage:
        try {
            if (!url_text.getText().toString().trim().equalsIgnoreCase("")) {
                textView.setText("");
                HttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet(url_text.getText().toString());
                // Get the response
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                String response_str = client.execute(request,
                        responseHandler);
                textView.setText(response_str);
            } else {
                Toast.makeText(getApplicationContext(),
                        "URL String empty.", Toast.LENGTH_LONG).show();
            }
        } catch (Exception e) {
            System.out.println("Some error occured.");
            textView.setText(e.getMessage());
        }
        break;
    }
}
    } 
```

如上所述，我使用该代码显示我的代码并尝试将某些网页读取为字符串，但它显示该错误。

```
 03-03 22:37:45.088: I/System.out(1233): Some error occured.
   03-03 22:37:45.088: W/System.err(1233): android.os.NetworkOnMainThreadException
  03-03 22:37:45.138: W/System.err(1233):   at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)    org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
 -03 22:37:45.148: W/System.err(1233):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
  03-03 22:37:45.158: W/System.err(1233):   at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:19:02.963

Android 告诉你你不应该在 UI 线程上进行网络操作。它不希望您阻塞线程，这是有充分理由的。

尝试改用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。将您的 HTTP 请求代码放入`doInBackground()`方法中并更新方法`TextView`中的`onPostExecute()`。您不能从该`doInBackground()`方法访问 UI 线程。

这是一个非常基本的示例：

```
class MyAsyncTask extends AsyncTask<String, String, String> 
{
    private TextView textView;

    public MyAsyncTask(TextView textView)
    {
        this.textView = textView;
    }

    protected Long doInBackground(String... params) 
    {
        String url = params[0];
        // your HTTP request code goes here
        return response;
    }

    protected void onPostExecute(String result) 
    {
        textView.setText(result);
    }
} 
```

像这样使用类：

```
new MyAsyncTask(myTextView).execute(myUrl); 
```

# image - 向图像添加颜色图例

> ID：15188176
> 
> 赞同：17
> 
> 时间：2013-03-03T17:04:43.357
> 
> 标签：image, r, legend

我有一个矩阵，我使用`image(matrix)`. 是否可以像在绘图中添加图例一样为我的图像添加颜色图例？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-01-12T20:02:41.673

或者可以像这样提供图例：

```
 legend(grconvertX(0.5, "device"), grconvertY(1, "device"), 
     c("0",".5","1"), fill = colMap[c(1, 10, 20)], xpd = NA) 
```

其中 grconvertX() 和 grconvertY() 和 xpd 确保图例位于绘图区域之外。一个合理的例子是：

```
 nsamples <- 20
    mat <- rnorm(nsamples, .5, .15)
    dim(mat) <- c(4, 5)
    colMap <- colorRampPalette(c("red","white","blue" ))(nsamples)
    image(1:4, 1:5, mat, col = colMap, ylab="", xlab="")
    legend(grconvertX(0.5, "device"), grconvertY(1, "device"),
    c("0",".5","1"), fill = colMap[c(1, 10, 20)], xpd = NA) 
```

ps：我知道这是一个旧请求并且已解决。但是，我一直在寻找类似的答案，但找不到。由于我费心解决这个问题，我想也许其他人也可以从中受益。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-03T17:51:42.280

`image`在 R 中是一个相当基本的绘图功能。您可能想查看`filled.contour`是否需要一个自动为图例分配空间的函数。或者试试这个：

```
 library(lattice)
 levelplot(matrix) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-27T13:02:20.910

从包里`fields`，你可以试试`image.plot`。此功能基于常规`image`，但提供了图形图例。

```
library(fields)
x = 1:10
y = 1:15
z = outer( x,y,"+") 
image.plot(x, y, z) 
```

# bash - 在 awk 命令输出之前回显

> ID：15188177
> 
> 赞同：1
> 
> 时间：2013-03-03T17:04:45.827
> 
> 标签：bash, shell, awk, terminal, sh

我需要知道如何在`awk`命令的每个输出之前添加这一行。我还需要添加用户在其主目录中使用了多少磁盘空间。我不知道如何将它们结合起来。

这就是我列出用户及其主目录的方式。

```
awk -F":" '{print $6}' /etc/passwd | sort | grep /home 
```

输出是：

```
/home/testuser
/home/anonsec 
```

我想要的输出是：

```
Home Directory: /home/testuser
Disk Space Used (KB): 23342 KB

Home Directory: /home/anonsec
Disk Space Used (KB): 23342 KB 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:33:18.323

```
$ du -s /home/* | awk '{print "Home Directory:",$2,"\nDisk Space Used",$1"\n"}'

Home Directory: /home/luser 
Disk Space Used 42222768 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:20:58.273

这对我有用：

```
for i in `awk -F":" '{print $6}' /etc/passwd | sort | grep /home`;  do
        echo "Home Directory:" $i
        echo "Disk Space Used (KB):" `du -s $i |cut -f1`
        echo ""
done 
```

如果您有一些`/etc/passwd`您不感兴趣的东西，您可能想要或需要对其进行一些改进。

# sql - SSRS 多行数据

> ID：15188180
> 
> 赞同：1
> 
> 时间：2013-03-03T17:04:59.870
> 
> 标签：sql, sql-server-2008

我的 SQL Server 2008 报告在一个表中返回了多行。一个简单的 select 语句返回两列，一列是记录号，另一列是扇区。扇区列可以包含 6 个不同值中的任何一个。

编辑：`NULL`扇区列中允许使用值。

我希望这些数据在我的表中的一行中。

假设记录 1 具有扇区 A、扇区 C 和扇区 E，记录 2 具有扇区 B 和扇区 C，而记录 3 没有扇区。

我在三行数据之后。我还需要它以两种方式显示。一种是让所有扇区出现在同一个单元格中，用逗号分隔。另一个是每个类别的单独单元格

```
Record number  | Sector
1              | A, C, E
2              | B, C
3              | 
```

或者

```
Record Number | Sector A | Sector B | Sector C | Sector D | Sector E
1             |  A       |          | C        |          | E
2             |          | B        | C        |          | 
3             |          |          |          |          | 
```

目前我的报告给了我 6 行。

```
Record Number | Sector
1             | A
1             | C
1             | E
2             | B
2             | C
3             | 
```

有没有办法解决这个问题？

我正在使用查询设计器而不是编写 SQL 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:56:06.247

为了使用逗号分隔的`sector`值列表获得您想要的第一个结果，您需要使用`FOR XML PATH`and `STUFF`。代码将是：

```
select t1.recordnumber,
  STUFF((SELECT ', ' + t2.sector
         from yourtable t2
         where t1.recordnumber = t2.recordnumber
          FOR XML PATH (''))
          , 1, 1, '')  AS Sector
from yourtable t1
group by t1.recordnumber 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/01192/2)。结果是：

```
| RECORDNUMBER |   SECTOR |
---------------------------
|            1 |  A, C, E |
|            2 |     B, C |
|            3 |   (null) | 
```

然后要`recordNumber`在一行中获得结果，您可以使用该`PIVOT`函数：

```
select *
from
(
  select recordNumber, sector
  from yourtable
) src
pivot
(
  max(sector)
  for sector in (A, B, C, D, E)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c340d/14)。这个查询的结果是：

```
| RECORDNUMBER |      A |      B |      C |      D |      E |
-------------------------------------------------------------
|            1 |      A | (null) |      C | (null) |      E |
|            2 | (null) |      B |      C | (null) | (null) |
|            3 | (null) | (null) | (null) | (null) | (null) | 
```

# objective-c - 使用类方法的 Objective-C 最佳实践

> ID：15188185
> 
> 赞同：2
> 
> 时间：2013-03-03T17:05:25.463
> 
> 标签：objective-c, instance, class-method

我习惯了函数式编程。现在为 iOS 写作，我发现自己经常使用类方法 (+)，而不是创建实例 (从 -)。

通常我使用类方法来处理小的、重复的任务——比如发送异步请求、更新数据库、存储/检索首选项等。

这是正确的做法，还是我应该尝试更多地改变我的想法并开始使用实例？甚至可以避免一起使用类方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:11:33.210

我最好的建议是看看 Foundation 和 Cocoa 是如何做的，并且做类似的事情。在 Objective-C 中有一个用于类方法的地方。

类方法的一些示例包括

```
[UIView animateWithDuration:0.3 animations:^{
    // Animation here...
}]; 
```

和

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *date, NSError *error) {
                           // Handle response here ...
                       }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:08:44.653

Objective C 支持第三种替代方案，用于封装不需要隐式访问实例变量的功能——它使用“普通”C 函数。与类函数不同，“普通”C 函数不使用虚拟调度，这在各种紧密循环中可能很重要。

请注意，类方法提供了比`static`Java、C++ 和 C# 方法更多的功能：它们支持覆盖，让基类中的类方法在派生类中使用更具体的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:07:52.997

当您不需要类的任何实例时使用类方法，并且您的目的只能通过类似的方法调用来实现`[[NSUserDefaults standardUserDefaults] synchronize];`

* * *

在 MRC

该`alloc/init`组合为您提供了拥有参考。这意味着您`release`以后必须这样做。classMethod 返回一个非拥有引用。你可能不会释放它。

IE，

```
Person *firstPerson=[Person personWithName:@"AnoopVaidya" address:@"India"]; 
```

在 ARC 中，对于上述情况没有这样的区别。

# java - 通过java在访问表中插入记录

> ID：15188189
> 
> 赞同：-2
> 
> 时间：2013-03-03T17:05:50.383
> 
> 标签：java, sql, ms-access

我想在 java 的 ms 访问表中插入一条记录。我的问题是我必须插入的字段数量少于可用字段的总数。换句话说，我的表中有 10 列，我只想为 8 列提供值。它不能通过简单的 INSERT 语句工作。所以，我不知道该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:09:32.220

`SQL`允许您指定要提供数据的列：

```
INSERT INTO MyTable (Column1, Column2, Column3) VALUES ('Some', 'Value', 101); 
```

未提及的列可以采用默认值，也可以允许采用`NULL`值。

# validation - 如何删除对 dojox.form.PasswordValidator 的验证焦点

> ID：15188192
> 
> 赞同：1
> 
> 时间：2013-03-03T17:06:01.690
> 
> 标签：validation, dojo, passwords, focus

我不知道如何解释这个......在这个示例代码中，[这里](http://dojotoolkit.org/reference-guide/1.6/dojox/form/PasswordValidator.html)是一个密码验证，它具有新的和验证输入框。所以您输入新密码，现在您正在确​​认密码。现在您想在不填写确认框的情况下更改新密码，但您不能，因为浏览器会自动聚焦确认框，直到它与您可能忘记的密码匹配。

长话短说，如何在不刷新页面或将其替换为 2 个验证文本框的情况下移除 dojo 密码验证器中验证的自动焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:40:06.217

这是一个 Dojo 错误，显然已在 Dojo 1.7.2 中修复：http: [//bugs.dojotoolkit.org/ticket/15504](http://bugs.dojotoolkit.org/ticket/15504)

# java - Mainactivity.java 中的错误

> ID：15188196
> 
> 赞同：0
> 
> 时间：2013-03-03T17:06:25.857
> 
> 标签：java, android, eclipse, error-handling

我有以下代码，但我找不到摆脱这些错误的方法：

> View 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数 (MainActivity)

这适用于第 17、18、19、20、21、22、23、24、25 行，其中包含：

```
findViewById(R.id.imageButton9).setOnClickListener(this); 
```

在第 31 行（创建新类的行），我得到：

> 嵌套类型 MainActivity 无法隐藏封闭类型

这是我正在使用的代码：

```
package com.example.rome;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.EditText;
import android.widget.Button;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    findViewById(R.id.imageButton1).setOnClickListener(this);
    findViewById(R.id.imageButton2).setOnClickListener(this);
    findViewById(R.id.imageButton3).setOnClickListener(this);
    findViewById(R.id.imageButton4).setOnClickListener(this);
    findViewById(R.id.imageButton5).setOnClickListener(this);
    findViewById(R.id.imageButton6).setOnClickListener(this);
    findViewById(R.id.imageButton7).setOnClickListener(this);
    findViewById(R.id.imageButton8).setOnClickListener(this);
    findViewById(R.id.imageButton9).setOnClickListener(this);

}

class MainActivity extends Activity implements View.OnClickListener {

    @Override
    public void onClick(View v){
      switch(v.getId()){
        case R.id.R.id.imagebutton1:
          startActivity(new Intent(telefoonnummers.class));
          break;
        case R.id.R.id.imagebutton2:
          startActivity(new Intent(telefoonnummers.class));
          break;
        //-- more cases --
        case R.id.R.id.imagebutton9:
              startActivity(new Intent(telefoonnummers.class));
              break;
      }
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:07:38.867

删除错误的类定义：

```
class MainActivity extends Activity implements View.OnClickListener { 
```

并添加`implements View.OnClickListener`到真正的类定义中：

```
public class MainActivity extends Activity  implements View.OnClickListener {
//      Add this to the "real" MainActivity ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

花点时间确保您已正确闭合每个大括号 ( `{}`)。

# macos - Qt Creator 和 Mac Finder 使用 git 存储库非常慢

> ID：15188198
> 
> 赞同：0
> 
> 时间：2013-03-03T17:06:38.073
> 
> 标签：macos, git, qt

我在使用 git + Qt-Creator + OS X 时遇到了一个非常大的问题。我们最近从我们的 SVN 存储库转移到了 git。问题是，新的 git repo 的 Qt Creator 真的很慢。特别是当我打开源文件或头文件时。这使得整个 repo 无法使用，因为我必须等待大约 10-15 秒才能在编辑器中打开文件。此外，源文件所在的文件夹在查找器中也很慢......

使用 SVN 我没有这些问题。

信息： - 我使用的是配备 128GB SSD 的 Macbook Air 2011。- 我们使用 Qt 5.0.1 和 Qt Creator 版本 2.6.2 - 我们使用 Bitbucket 作为 git 存储库的托管平台

感谢您的建议

# html - 我怎么知道制作视网膜图像的尺寸？

> ID：15188204
> 
> 赞同：4
> 
> 时间：2013-03-03T17:07:07.103
> 
> 标签：html, css, retina-display, image-scaling

我试图了解如何计算为“视网膜”质量屏幕制作图像的大小。我知道一般答案只是“x2”，但从未解释过为什么会这样。

例如，让我们以 MacBook Air 与新的 MacBook Pro Retina 对比。

**解析度**

MacBook Air - 1440 x 900

MacBook Pro - 2560 x 1600（这不仅仅是“x2”，它是 x1.77 更大）

**生产者价格指数**

MacBook Air - 128

MacBook Pro - 227（这不仅仅是“x2”，它是 x1.77 更大）。

有人可以回答，将事物设为“x2”仅仅是一般规则，还是这实际上是所需的尺寸？

我真的很喜欢这个解释，而不仅仅是一个简单的是/否。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:17:16.693

“×2”只是一个粗略的指导。

在“普通”计算机显示器 (96 dpi) 上，200x200 像素的图片在屏幕上的宽度约为 2 英寸，而在 Macbook Pro 上则略低于 1 英寸。因此，为了获得相同的物理宽度，就像素而言，它必须大约是原来的 2 倍。

# c# - 为什么在没有选择父节点的情况下检测不到我的子节点？

> ID：15188205
> 
> 赞同：1
> 
> 时间：2013-03-03T17:07:10.277
> 
> 标签：c#, winforms, recursion, treeview, treenode

我的表单中有一个启用了复选框的树列表。我需要将选中的任何内容添加到列表中，以便我可以写出该列表。如果我检查任何父节点（或最高级别节点），它包括它们。如果我选择任何父节点，它也会选择其子节点（这是有意的），并显示这些节点。但是如果我只检查任何子节点，它不会将它们添加到我的列表中。

```
//check to see if there are any nodes checked
            bool nodeHasCheck = false;
            foreach (TreeNode n in nodes)
            {
                if (n.Checked)
                {
                    nodeHasCheck = true;
                    break;
                }

                GetExtendedFeatures(n.Nodes);
            }

            //only return stuff if something's checked
            if (nodeHasCheck == true)
            {

                foreach (TreeNode n in nodes)
                {
                    if (n.Checked)
                    {
                        //n.BackColor = Color.Black;
                        nodeList.Add(n.Text);
                    }

                    GetExtendedFeatures(n.Nodes);
                } 
```

似乎如果我选择 2 个父节点，则发生的递归（认为这是正确的术语）导致它找到第一个选中的节点，然后重新开始，并在第二个选中节点之前再次添加相同的选中节点节点集。

我提供了我的节点测试，希望它足以确定为什么它没有检测到在没有选择父节点的情况下选择的子节点。

更新 - 3/18/13 我的按钮点击代码：

```
private void btnGenerate_Click(object sender, EventArgs e)
        {
            ScanNodes(treeView1.Nodes[0]);                
        }
private void ScanNodes(TreeNode parent)
        {
            foreach (TreeNode node in parent.Nodes)
            {
                if (node.Checked)
                {
                    nodeList.Add(node.Text.ToString());
                }
                if (node.Nodes.Count > 0)
                {
                    ScanNodes(node);
                }
            }

                var message = string.Join(Environment.NewLine, nodeList);
                message = message.Replace(Environment.NewLine, ", ");

                MessageBox.Show(message);
                nodeList.Clear();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:37:01.423

要获取 TreeView 中所有选定节点的列表，您可以使用以下命令：

假设列表名为`nodeList`：

```
 //We First declare a recursive method to loop through all nodes, 
//we need to pass a root node to start 
    private void ScanNodes(TreeNode parent)
            {
                foreach (TreeNode node in parent.Nodes)
                {
                    if (node.Checked)
                    {
                        nodeList.Add(node.Text);
                    }
                    if (node.Nodes.Count > 0)
                    {
                        ScanNodes(node);
                    }
                }
            } 
```

有了这个设置，您只需要调用 ScanNodes 方法并传递 TreeView 的根节点：

```
ScanNodes(treeView1.Nodes[0]); 
```

问候，

# eclipse - Spring MVC - 使用 Spring STS 的 GWT 集成

> ID：15188206
> 
> 赞同：2
> 
> 时间：2013-03-03T17:07:12.960
> 
> 标签：eclipse, gwt, spring-mvc, tomcat7

我有一个使用 spring STS 的基于 spring mvc 的应用程序。

我想将它与 GWT 集成，这样我就可以构建漂亮的 UI。

我看到了[这个](http://technophiliac.wordpress.com/2008/08/24/giving-gwt-a-spring-in-its-step/)。

从[这个](https://stackoverflow.com/questions/5040644/experiences-with-integrating-spring-3-mvc-with-gwt)线程

但是他们没有使用spring sts，而且帖子已经有将近5年的历史了。

我的问题是：

1.  我应该留在我的 spring mvc 项目中，还是应该打开一个 GWT 项目？

2.  如果我可以继续使用我的 spring mvc 项目，我需要执行哪些步骤来执行我的 GWT 客户端和我的 spring 服务层之间的连接？

任何代码示例或教程都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T03:17:00.453

您可以使用 Spring MVC REST 和 GWT JavaScriptObjects 将 GWT 与 Spring MVC 集成。

看看下面的 GitHub[代码](https://github.com/doanduyhai/StockWatcherJSON)。

有关使用 JavaScriptObject 的更“复杂”的示例，请查看[此处](http://bluediamondsfx.wordpress.com/2010/06/12/nesting-javascriptobjects-in-javascript-overlay-types-in-gwt/)。

# facebook - 提要中的 Facebook 链接

> ID：15188217
> 
> 赞同：0
> 
> 时间：2013-03-03T17:08:08.203
> 
> 标签：facebook

只是想知道，当我尝试在我的提要中手动添加链接时，它看起来像这样。

![在此处输入图像描述](../Images/8ef92f4c64da7b5cf07cd421d08bd139.png)

和

![在此处输入图像描述](../Images/d1d7ee52151efd2bbec2c97bab5a802d.png)

它显示了网站的徽标、标题、标题和描述

但是当我进入其他网站时，它显示了这一点，

![在此处输入图像描述](../Images/c1d0a0e68a103bbbf213b5a49626623d.png)

所以想知道，有什么要求或它是如何显示的？徽标是如何出现的以及如何输出网站的标题、说明和描述？

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:14:57.270

这是通过需要在元素中设置的元标记来完成的`<head>`。Facebook 有很好的文档和示例，[看看这个](http://developers.facebook.com/docs/opengraphprotocol)。

# c++ - cppcheck 的规则集

> ID：15188219
> 
> 赞同：34
> 
> 时间：2013-03-03T17:08:14.480
> 
> 标签：c++, testing, static-code-analysis, cppcheck, safety-critical

cppcheck 允许您创建自己的规则文件，但我不知道 cppcheck 的功能暴露了多少。

是否有人在开发一套可以强制执行[JSF](http://www.stroustrup.com/JSF-AV-rules.pdf)或[MISRA](http://www.misra-cpp.com/)规则的设备？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-23T18:56:47.763

您将无法将所有 MISRA/JSF 规则和指令实现为 cppcheck 规则，主要是限制某些 C 语言功能和结构或与样式相关的简单规则（想到的一些：之前/之后的空格 ./ ->，单行上的参数#，使用联合来提供访问内存的不同方法，在 char 之前存在无符号/有符号等）。

用户[Ira Baxter在对涉及 cppcheck 的另一个问题的](https://stackoverflow.com/users/120163/ira-baxter)[评论](https://stackoverflow.com/questions/11966613/why-does-cppcheck-not-find-this-obvious-array-out-of-bounds-error#comment15968165_11976058)中几乎将其钉牢：并非所有事物都可以表示/简化为模式。依赖于**自定义规则**的模式使得难以处理和检测更高级别的问题，例如与**类型相关的问题** *（例如类型上的 sizeof()；您必须解析和收集用作类型表示的标记（typedef、枚举））*，**继承** *（例如类，包括派生类，用作虚拟和非虚拟）*和**范围**。那些需要硬编码到 cppcheck 中（你总是可以 fork cppcheck ...）

无论如何，您是否接触过 MISRA（或 JSF）规则？这是项目的要求吗？如果没有，您可以获取一份 MISRA 指南（您已经拥有 JSF 指南）并检查您可以使用 PCRE 模式实现的指南。如果这是一个要求，我建议您“投资”一个商业产品，它会检查 MISRA/JSF 指南并使用这两种工具。

最后一点：您不需要所有的 MISRA/JSF 规则，并且许多工具会忽略其中的一小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T18:12:26.460

据我所知，翻阅文档，它看起来很暴露。[http://cppcheck.sourceforge.net/manual.pdf](http://cppcheck.sourceforge.net/manual.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-01T06:12:19.560

Cppcheck 支持 MISRA。以下是有关受支持规则的概述：[受支持的 MISRA 规则](http://cppcheck.sourceforge.net/misra.php "支持的规则")

# android - Android：AnimateDrawable 无法解析为类型？

> ID：15188221
> 
> 赞同：1
> 
> 时间：2013-03-03T17:08:23.170
> 
> 标签：android, animation

所以我基本上是从这个项目中复制代码来玩它：[http ://code.google.com/p/android-30days-apps/source/browse/trunk/08day/src/com/bakhtiyor/android /snowfall/SnowFall.java?r=27](http://code.google.com/p/android-30days-apps/source/browse/trunk/08day/src/com/bakhtiyor/android/snowfall/SnowFall.java?r=27)

但我遇到了一个问题。就行 drawables.add(new AnimateDrawable(snow_flake, animation)); 我收到 AnimateDrawable 无法解析为类型的错误消息。我环顾四周，在原始的 Android 函数中，drawable 和动画作为构造函数之一传递。对于某种配置，我是否缺少某些东西？

这是我正在使用的所有代码（我使用的是cherry_blossom而不是雪花，但这是唯一的主要区别）

```
private class CherryBlossomView extends View
{
    private int cherry_blossom_count = 15;
    private final List<Drawable> drawables = new ArrayList<Drawable>();
    private int [][] coords;
    private final Drawable cherry_blossom;

    public CherryBlossomView(Context context)
    {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        cherry_blossom = context.getResources().getDrawable(R.drawable.blossom_petal);
        cherry_blossom.setBounds(0, 0, cherry_blossom.getIntrinsicWidth(), cherry_blossom.getIntrinsicHeight());
    }

    @Override
    protected void onSizeChanged(int width, int height, int oldw, int oldh)
    {
        super.onSizeChanged(width, height, oldw, oldh);
        Random random = new Random();
        Interpolator interpolator = new LinearInterpolator();

        cherry_blossom_count = Math.max(width, height) / 20;
        coords = new int[cherry_blossom_count][];
        drawables.clear();
        for(int i = 0; i < cherry_blossom_count; i++)
        {
            Animation animation = new TranslateAnimation(0, height / 10 - random.nextInt(height/5), 0, height+30);
            animation.setDuration(10 * height + random.nextInt(5 * height));
            animation.setRepeatCount(-1);
            animation.initialize(10, 10, 10, 10);
            animation.setInterpolator(interpolator);

            coords[i] = new int[]
            {
                random.nextInt(width-30), -30   
            };
            drawables.add(new AnimateDrawable(cherry_blossom, animation));
            animation.setStartOffset(random.nextInt(20 * height));
            animation.startNow();
        }
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        for(int i = 0; i < cherry_blossom_count; i++)
        {
            Drawable drawable = drawables.get(i);
            canvas.save();
            canvas.translate(coords[i][0], coords[i][1]);
            drawable.draw(canvas);
            canvas.restore();
        }
        invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:11:18.267

如果您单击[链接到的代码上方的包，](http://code.google.com/p/android-30days-apps/source/browse/trunk/08day/src/com/bakhtiyor/android/snowfall/?r=27) ![在此处输入图像描述](../Images/8476b0abf4f3ba76d6258bea0c18b560.png)

您会看到它显示了更多文件。 ![在此处输入图像描述](../Images/762eb4c8614f384e12e9a58d7939f9c8.png)

动画绘制：

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.bakhtiyor.android.snowfall;

import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.animation.Transformation;

public class AnimateDrawable extends ProxyDrawable {

    private Animation mAnimation;
    private Transformation mTransformation = new Transformation();

    public AnimateDrawable(Drawable target) {
        super(target);
    }

    public AnimateDrawable(Drawable target, Animation animation) {
        super(target);
        mAnimation = animation;
    }

    public Animation getAnimation() {
        return mAnimation;
    }

    public void setAnimation(Animation anim) {
        mAnimation = anim;
    }

    public boolean hasStarted() {
        return mAnimation != null && mAnimation.hasStarted();
    }

    public boolean hasEnded() {
        return mAnimation == null || mAnimation.hasEnded();
    }

    @Override
    public void draw(Canvas canvas) {
        Drawable dr = getProxy();
        if (dr != null) {
            int sc = canvas.save();
            Animation anim = mAnimation;
            if (anim != null) {
                anim.getTransformation(
                                    AnimationUtils.currentAnimationTimeMillis(),
                                    mTransformation);
                canvas.concat(mTransformation.getMatrix());
            }
            dr.draw(canvas);
            canvas.restoreToCount(sc);
        }
    }
} 
```

# c# - 无法将类型 'System.Linq.IQueryable<> 隐式转换为 。存在显式转换（您是否缺少演员表？）

> ID：15188222
> 
> 赞同：0
> 
> 时间：2013-03-03T17:08:28.677
> 
> 标签：c#, .net, asp.net-mvc-3, linq

我有以下代码：

```
private GolfManagementEntities db = new GolfManagementEntities();

    public class ThanhToan
    {
        public ThanhToan()
        { }
        public Double Total { get; set; }
        public DateTime date { get; set; }
    }

    public List<ThanhToan> listInvoice(DateTime tuNgay, DateTime denNgay)
    {

       List<ThanhToan> invoice= from i in db.Invoices 
                                where i.Date >= tuNgay && i.Date <= denNgay 
                                group i by i.Date into In 
                                select new ThanhToan { 
                                    date= Convert.ToDateTime(In.Key) , 
                                    Total = Convert.ToDouble(In.Sum(s => s.ExtendedCost))
                               };

       return invoice;

} 
```

我得到了这个错误：

**无法将类型 'System.Linq.IQueryable<> 隐式转换为 。存在显式转换（您是否缺少演员表？）**

请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:11:55.130

您的查询返回`IQueryable<THanhToan>`，但您试图返回一个`List<ThanhToan>`. 没有可用的隐式转换（根据错误消息），但您可以使用[`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)扩展方法创建一个列表：

```
public List<ThanhToan> ListInvoices(DateTime tuNgay, DateTime denNgay)
{

    var query = from i in db.Invoices 
                where i.Date >= tuNgay && i.Date <= denNgay
                group i by i.Date into g
                select new ThanhToan {
                    date = Convert.ToDateTime(g.Key), 
                    Total = Convert.ToDouble(g.Sum(s => s.ExtendedCost))
                };
    return query.ToList();
} 
```

*（我已更改您的方法名称以遵循 .NET 命名约定，并且在返回多*张发票方面更有意义，而不仅仅是一张。还要注意如何将查询分散到多行使其*更*易于阅读。）

# vba - 根据另一个组合框的选择更新组合框

> ID：15188223
> 
> 赞同：0
> 
> 时间：2013-03-03T17:08:28.723
> 
> 标签：vba, outlook

在用于应用程序的 VB 中，我有以下代码：

```
Private Sub cc_Change()

End Sub

Private Sub UserForm_Initialize()
    cc.AddItem "op1"
    cc.AddItem "op2"
    cc.AddItem "op3"
    cc.AddItem "op4"

End Sub 
```

以上工作。

我想进一步开发这个，所以当你点击“op1”你会得到相关的选项，这是我到目前为止的代码；

```
Private Sub combo2_Change()
    If cc = "op1" Then
    Me.combo2.RowSourceType = "Value List"
    Me.combo2.RowSource = "a; b; c"
    Else
    Me.combo2.RowSourceType = "Value List"
    Me.combo2.RowSource = "default"
    End If
End Sub 
```

我只列出了“op1”，因为它可以转让。请你帮帮我，当我选择“op1”时，我没有得到值“a”“b”或“c”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:29:47.950

如果我理解正确，您需要为更改其更改事件中的第一个组合框 (cc) 的事件编写代码。尝试执行以下操作：

```
Private Sub cc_Change()
    If cc = "op1" Then
        Me.combo2.RowSourceType = "Value List"
        Me.combo2.RowSource = "a; b; c"
    Else
        Me.combo2.RowSourceType = "Value List"
        Me.combo2.RowSource = "default"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:00:11.813

在`cc_Change()` 使用这个的私有子中：

```
If cc = "op1" Then
        combo2.AddItem "a"
Else
        combo2.AddItem "default"
End If 
```

# c++ - 稀疏的 AABB 树是用指针制作的吗？

> ID：15188227
> 
> 赞同：2
> 
> 时间：2013-03-03T17:08:51.900
> 
> 标签：c++, game-physics, aabb, octree

我正在使用轴对齐边界框的八叉树来分割场景中我进行物理模拟的空间。问题是，场景非常大（空间），我需要检测远距离大物体的碰撞以及近距离的小物体。问题是，场景中只有少数几个，但相距几公里，所以这意味着很多空白空间。所以基本上我浪费了 2 GB 的 RAM 来存储边界框对于空扇区。我只想为实际包含某些东西的扇区分配内存（让它们成为指向 AABB 的指针），但这意味着每帧有数千个分配来重新创建八叉树。如果我使用一个池为了应对分配的放缓，这仍然意味着我为我的应用程序分配了 2 gigs 的 RAM。还有其他方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:19:34.227

查看松散八叉树（用于处理许多对象）或更具适应性的系统，例如围绕每个对象构建的 AABB 树，而不是针对整个空间的一个。您可以使用整体 AABB（根）执行一般距离/碰撞，并使用每个对象下的树获得更精细的碰撞（如果您需要如此精细的分辨率，最终还可以进行射线三角形相交测试）。AABB-trees 的唯一缺点是，如果对象旋转，您需要重建树（您可以自适应地缩放和平移 AABB-tree）。

# mysql - 三表 INNER JOIN 和 WHERE 子句

> ID：15188234
> 
> 赞同：4
> 
> 时间：2013-03-03T17:09:18.780
> 
> 标签：mysql, sql, database, tsql

我有四个表 1\. tbl_threads 2\. tbl_comments 3\. tbl_votes 4\. tbl_users

假设当前登录的user_id =3 thread_id = 10

现在我必须检索以下数据

```
All the fields from tbl_comments where tbl_comments.thread_id =10
All the fields from tbl_users based on the common key tbl_users.user_id = tbl_comments.user_id
All the fields from tbl_votes Where user_id =3 And tbl_votes.comment_id =tbl_comments.comment_id 
```

如何通过一个查询执行所有这些功能？

我尝试了以下查询，但它给了我错误的结果

```
SELECT tbl_comments.*
     , tbl_users.*
     , tbl_votes.* 
FROM tbl_comments 
INNER JOIN tbl_users 
on tbl_comments.user_id = tbl_users.user_id 
WHERE thread_id= 10
INNER JOIN tbl_votes 
on tbl_votes.comment_id = tbl_comments.comment_id 
WHERE tbl_votes.user_id= 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:40:01.473

假设列`thread_id`在`tbl_comments`表中，将第一个更改`where`为`and`：

```
SELECT tbl_comments.*
     , tbl_users.*
     , tbl_votes.* 
FROM tbl_comments 
INNER JOIN tbl_users 
on tbl_comments.user_id = tbl_users.user_id 
and  tbl_comments.thread_id= 10
INNER JOIN tbl_votes 
on tbl_votes.comment_id = tbl_comments.comment_id 
WHERE tbl_votes.user_id= 3 
```

尽管您的问题提到了一个名为 的表`tbl_threads`，但您在示例中没有显示对它的任何引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T12:04:48.083

```
SELECT O.OrderNumber, CONVERT(date,O.OrderDate) AS Date, 
       P.ProductName, I.Quantity, I.UnitPrice 
  FROM [Order] O 
  JOIN OrderItem I ON O.Id = I.OrderId 
  JOIN Product P ON P.Id = I.ProductId
ORDER BY O.OrderNumber 
```

# java - 关于在java中绘制多边形

> ID：15188238
> 
> 赞同：9
> 
> 时间：2013-03-03T17:09:24.860
> 
> 标签：java, swing, polygon, java-2d, paintcomponent

您好，我正在努力提高自己对 java2D 的了解，首先我正在处理绘制多边形。但是，我看不到框架上的多边形。我阅读了一些教程和示例，但正如我所说，我遇到了问题。这是绘制多边形的示例代码；

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Polygon;

import javax.swing.JFrame;

public class jRisk extends JFrame {

    private JFrame mainMap;
    private Polygon poly;

    public jRisk(){

        initComponents();

    }

    private void initComponents(){

        mainMap = new JFrame();
        mainMap.setSize(800, 600);
        mainMap.setResizable(false);

        mainMap.setVisible(true);
        mainMap.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        int xPoly[] = {150,250,325,375,450,275,100};
        int yPoly[] = {150,100,125,225,250,375,300};

        poly = new Polygon(xPoly, yPoly, xPoly.length);

    }

    protected void paintComponent(Graphics g){

        super.paintComponents(g);

        g.setColor(Color.BLUE);
        g.drawPolygon(poly);

    }   

    /**
     * @param args
     */
    public static void main(String[] args) {

        new jRisk();

    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T17:20:09.193

`JFrame`没有[`paintComponent(Graphics g)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法。添加[`@Override`注释](https://stackoverflow.com/questions/94361/when-do-you-use-javas-override-annotation-and-why)，您将收到编译时错误。

1）使用`JPanel`和覆盖`paintComponent`（你会比添加`JPanel`到`JFrame`viad `JFrame#add(..)`）

2) 覆盖`getPreferredSize()`以返回`Dimension`适合您在 Graphics 对象上的绘图的正确 s，否则它们不会被视为`JPanel`没有组件的大小为 0,0

3）不要调用`setSize`......`JFrame`而是使用正确的`LayoutManager`和/或覆盖`getPrefferedSize()`并`pack()`在`JFrame`添加所有组件之后但在将其设置为可见之前调用

4) 阅读有关[事件调度​​线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)[的 Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

5）手表类命名方案应以大写字母开头，之后的每个新单词的第一个字母都应大写

6）你`extend JFrame`也有一个变量`JFrame`？拿走`extend JFrame`并保留`JFrame`变量，因为我们不想要 2 s，除非添加功能，否则`JFrame`扩展它不是好习惯`JFrame`

这是您的代码进行了上述修复（请原谅图片质量，但必须调整大小，否则将变为 800x600）：

![在此处输入图像描述](../Images/4d352d63eb76565aa9ab3a2436a3366c.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Polygon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JRisk {

    private JFrame mainMap;
    private Polygon poly;

    public JRisk() {

        initComponents();

    }

    private void initComponents() {

        mainMap = new JFrame();
        mainMap.setResizable(false);

        mainMap.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        int xPoly[] = {150, 250, 325, 375, 450, 275, 100};
        int yPoly[] = {150, 100, 125, 225, 250, 375, 300};

        poly = new Polygon(xPoly, yPoly, xPoly.length);
        JPanel p = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.BLUE);
                g.drawPolygon(poly);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(800, 600);
            }
        };
        mainMap.add(p);
        mainMap.pack();
        mainMap.setVisible(true);

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JRisk();
            }
        });
    }
} 
```

根据您的评论：

> 我正在准备一张包含许多多边形的地图，昨天我在 JFrame 上使用了 JPanel，我试图用 MouseListener 检查鼠标是否在多边形内。后来我看到 mouseListener 给出了错误的响应（就像鼠标不在多边形内但它的行为就像它在多边形内一样）。所以我删除了JPanel然后它起作用了

这是更新的代码`MouseAdapter`并被覆盖`mouseClicked`以检查单击是否在多边形内。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Polygon;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JRisk {

    private JFrame mainMap;
    private Polygon poly;

    public JRisk() {
        initComponents();
    }

    private void initComponents() {

        mainMap = new JFrame();
        mainMap.setResizable(false);

        mainMap.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        int xPoly[] = {150, 250, 325, 375, 450, 275, 100};
        int yPoly[] = {150, 100, 125, 225, 250, 375, 300};

        poly = new Polygon(xPoly, yPoly, xPoly.length);

        JPanel p = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.BLUE);
                g.drawPolygon(poly);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(800, 600);
            }
        };

        MouseAdapter ma = new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);

                if (poly.contains(me.getPoint())) {
                    System.out.println("Clicked polygon");
                }

            }
        };
        p.addMouseListener(ma);//add listener to panel
        mainMap.add(p);

        mainMap.pack();
        mainMap.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JRisk();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T17:12:08.180

`JFrame`不扩展`JComponent`所以不覆盖`paintComponent`。您可以通过添加`@Override`注释来检查这一点。

要将这个功能提取`paintComponent`到扩展的新类中`JComponent`。不要忘记调用`super.paintComponent(g)`而不是`super.paintComponents(g)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:13:51.747

代替

```
protected void paintComponent(Graphics g){

    super.paintComponents(g);

    g.setColor(Color.BLUE);
    g.drawPolygon(poly);

} 
```

和

```
protected void paint(Graphics g){

    super.paint(g);

    g.setColor(Color.BLUE);
    g.drawPolygon(poly);

} 
```

# delphi - 如何在表单显示中强制执行代码

> ID：15188239
> 
> 赞同：0
> 
> 时间：2013-03-03T17:09:29.627
> 
> 标签：delphi, messages

我在一个单元中有以下代码，我将其作为我的使用列表中的最后一个单元

```
{ TFormHelper }
procedure TForm.WMMoving(var aMessage: TWMMoving);
var
  rec: ^TRect;
  wrk: TRect;
begin
  wrk := GetWorkArea;
  rec := Pointer(aMessage.DragRect);
  if rec^.Left < wrk.Left then
    begin
      rec^.Right := rec^.Right - (rec^.Left - wrk.Left);
      rec^.Left := wrk.Left;
    end
  else if rec^.Right > wrk.Right then
    begin
      rec^.Left := rec^.Left - (rec^.Right - wrk.Right);
      rec^.Right := wrk.Right;
    end;
  if rec^.Top < wrk.Top then
    begin
      rec^.Bottom := rec^.Bottom - (rec^.Top - wrk.Top);
      rec^.Top := wrk.Top;
    end
  else if rec^.Bottom > wrk.Bottom then
    begin
      rec^.Top := rec^.Top - (rec^.Bottom - wrk.Bottom);
      rec^.Bottom := wrk.Bottom;
    end;
end; 
```

它应该检查表单是否在我的主表单的工作窗口内，如果没有，则应该将表单移动到有效位置。

在我想检查的表格中

```
SendMessage(Handle, WM_MOVING, 0, 0); 
```

在 FormShow 事件中，但它没有效果。我知道该功能有效，因为如果我尝试用鼠标拖动表单，它会立即移动到有效位置。

所以我的问题是：如何在显示表单时强制代码运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:23:51.083

要在显示表单时运行代码，请将代码放入`OnShow`事件处理程序中。

* * *

不过，这不是你的问题。你的问题是你的代码没有*效果*。该`wm_Moving`消息通常*在用户移动窗口时*发送，例如在拖动操作期间。操作系统不断发送消息以询问允许它去哪里的表单，包括窗口将移动到的暂定窗口坐标。窗口通过调整建议的窗口边界来响应消息，然后操作系统将窗口移动到这些新坐标或更改拖动矩形（取决于是否设置了“全窗口拖动”选项）。

不过，仅仅发送一条单独的`wm_Moving`消息并不能做到这一点。您本质上是在询问表单它想去哪里，但由于您在这种情况下扮演操作系统的角色，您仍然需要对获得的结果*采取行动*并实际移动窗口。`wm_Moving`消息是通知，而不是命令；它本身没有固有的副作用。

# git - msys git 编译错误

> ID：15188244
> 
> 赞同：1
> 
> 时间：2013-03-03T17:10:27.423
> 
> 标签：git, windows-7-x64, msys

我试图在 msys 下编译 git。但是编译会抛出错误，说它无法找到 zlib.h。问题是 zlib.h 实际上在`msys\include`目录中。搜索错误，每个人都说是缺少zlib库。但由于 msys\include 目录已经包含`zlib.h`，我想知道可能是什么问题！

`Making GIT_VERSION = 1.7.11 * new build flags or prefix CC credential-store.o In file included from credential-store.c:1:0: cache.h:19:18: fatal error: zlib.h: No such file or directory compilation terminated. make: *** [credential-store.o] Error 1 failure at line 262`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-12T15:15:26.583

它是不显眼的压缩库存档 (zlib) 的依赖项，尝试安装 zlib 将解决此问题。

```
sudo wget zlib.net/zlib-1.2.11.tar.gz 
```

解压缩，编译并安装它，对我很有用。

# python - 使用 python 和 wkhtmltopdf HTML 到 PDF

> ID：15188245
> 
> 赞同：2
> 
> 时间：2013-03-03T17:10:42.063
> 
> 标签：python, django, wkhtmltopdf, python-bindings

我刚刚找到[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)，一个使用 webkit 的惊人的 html 转换器。我已经在我的开发机器上尝试过它，它很简单而且效果很好。

*这如何最好地与基于 django 的站点集成？*

我找到了[python bindings](https://github.com/mreiferson/py-wkhtmltox)，但他们假定对如何安装我没有的东西有一定程度的理解。例如

```
you need libwkhtmltox.* somewhere in your LD path (/usr/local/lib)
you need the directory src/include/wkhtmltox from wkhtmltopdf
    somewhere on your include path (/usr/local/include) 
```

*   安装这些 python 绑定后，我该如何使用它们？我可以拨打哪些电话？

*   生成的 pdf 是否必须保存到 hd 或者我可以用什么东西把它从视图中流出来？

例如：

```
response['Content-Disposition'] = 'attachment; filename='+letter_name
response['Content-Type'] = 'Content-type: application/octet-stream'
response['Content-Length'] = bytes
return response 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:28:55.777

为此，我会推荐[django-wkhtmltopdf](https://github.com/incuna/django-wkhtmltopdf)。他们的[使用文档](https://github.com/incuna/django-wkhtmltopdf/blob/master/docs/usage.rst)提供了一些关于如何集成的示例：

```
from django.conf.urls.defaults import *
from wkhtmltopdf.views import PDFTemplateView

urlpatterns = patterns('',
    # ...
    url(r'^pdf/$', PDFTemplateView.as_view(template_name='my_template.html',
                                           filename='my_pdf.pdf'), name='pdf'),
    # ...
) 
```

# ruby-on-rails - Globalize.with_locale 和 I18n.with_locale 有什么区别？

> ID：15188258
> 
> 赞同：3
> 
> 时间：2013-03-03T17:11:33.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, globalize3

我发现这两种方法都有效，但我不想要奇怪的惊喜：它们之间有什么区别？我可以毫无问题地使用一种或另一种吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:18:16.107

两种方法都有效地做同样的事情：

1.  记录当前的语言环境是什么
2.  将语言环境设置为指定的语言环境
3.  运行提供的代码块
4.  将语言环境设置回记录的语言环境

I18n 将从其语言环境文件中获取翻译，而 globalize 将从其数据库存储中获取翻译。

# wordpress - Wordpress 和 CakePHP 之间的单点登录 (SSO)

> ID：15188261
> 
> 赞同：10
> 
> 时间：2013-03-03T17:11:52.557
> 
> 标签：wordpress, cakephp, cookies, authorization, single-sign-on

我有一个现有的 Wordpress 网站。计划是使用 cakePHP 框架重建站点。由于时间限制，我想一次更换一个 Wordpress 网站的各个部分。这意味着两个应用程序将在一段时间内并排运行。我需要使用 Wordpress 提供的授权来控制对 cakePHP 应用程序的访问。我不确定执行此操作的最佳方法。我见过很多类似的问题，但我还没有找到明确的解决方案。

我正在考虑两种方法：

**计划A：**

*   配置 Cake 以查找 Wordpress 的授权 cookie。
*   配置 Cake 以查看 Wordpress 的数据库。
*   借用一些 Wordpress 的授权逻辑来教 Cake 的 Auth 组件如何对 WP 用户进行身份验证。

**B计划：**

*   在我的 Wordpress 网站上设置授权 API。
*   在 cake 中设置单独的 auth 组件。
*   当用户点击蛋糕应用程序中的受保护页面然后手动登录用户时，ping WP 端点。（这将创建第二组身份验证 cookie）

这些听起来像是正确的方法吗？有一个更好的方法吗？

有用的参考资料：[关于 Cake 会话处理的文章](http://bakery.cakephp.org/articles/admad/2009/09/02/how-to-bend-cakephp-s-session-handling-to-your-needs)，[Cake Auth 组件文档](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)，[Cake Auth 教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)，[WP 授权的简要概述](http://smallbusiness.chron.com/wordpress-authentication-work-59664.html)，[更深入地了解 wordpress 授权](http://codeseekah.com/2012/04/09/why-wordpress-authentication-unique-keys-and-salts-are-important/)

**更新** 我们已经开始着手解决这个问题，看起来它会起作用，但是涉及密码散列的一个非常棘手的方面需要[它自己的问题](https://stackoverflow.com/questions/15774265/password-hashing-for-sso-between-wordpress-and-cakephp)。如果你正在关注这个线程，你可能想看看。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T07:29:26.047

我曾经有过类似的情况：几个月前的[跨框架身份验证zend + codeigniter ......](https://stackoverflow.com/questions/11839812/cross-framework-authentication-zend-codeigniter)

无论如何，这是我更喜欢的：

*   在我的 Wordpress 网站上设置授权 API。
*   在 cake 中设置单独的 auth 组件。
*   当用户点击蛋糕应用程序中的受保护页面然后手动登录用户时，ping WP 端点。（这将创建第二组身份验证 cookie）

在这里，我建议做一个可行的小改动。

确保您拥有 SSO 的令牌系统。如，当人在 Wordpress 上登录时，设置另一个 cookie，该 cookie 将具有令牌：令牌将是用户名 + 密码（散列）+ 密钥，这在 Wordpress 和 CakePHP 之间是相同的。在任一站点上，查找 cookie 并手动登录用户或仅执行数据库查找。散列对于那个 cookie 很重要！但是，如果站点使用不同的域，您可能需要重新制定策略：

我曾经有不同的域。在登录或未经授权的页面，我会 ping 另一个网站并打开他们的登录框。在另一个网站上，如果用户登录，他们会得到登录后页面，如果请求 URI 发送了一个令牌，我们执行正常操作并将授权的令牌返回到这个（当前）域。

**简单来说：**

站点 A = WordPress & 站点 B = CakePHP

站点 B 访问需要授权的页面，然后 ping 站点 A 进行登录（当您使用 Facebook 登录排序时会发生这种情况），这将通过令牌（私钥）和 REQUEST_URI 请求，这将是 SSO 的一部分站点A上的验证表，如果人已经登录，那么站点A将返回（通过POST）一个令牌，该令牌将进一步通过站点B的（私钥）解密并登录用户。 B和A的私钥将是相同的。

希望这是可以理解的。

问题？:)

**在评论中回答您的问题：**

理想情况下，为什么我们使用 SSO？我们使用它是因为有很多限制。例如：您有一个数据库，比如说...一百万行包含一千多个表，您需要在您的大型应用程序上添加一个模块...所以，相反，您将使用另一个数据库... SSO 将返回用户信息，可以进一步复制。例如，当您单击“使用 Facebook 登录”时，它会返回请求的信息，例如电子邮件地址、用户名甚至个人资料图片。可以进一步添加到我们的数据库中...强烈建议保留不同的数据库:)

对于您的第二个和第三个问题：**两个站点是否应该引用数据库中的相同用户表？**除非您使用相同的数据，否则建议使用不同的数据库。或者说改变软件平台。

**我应该将特定于站点的用户行复制到每个应用程序的单独用户表中吗？**是的，这应该自动发生。一旦您在主站点上注册，什么都不会发生，一旦您已经登录然后转到站点 B，事情应该会发生......一旦登录，用户信息总是可以被请求:) 这样，新站点将处于活动状态用户！2只鸟？

不要让自己复杂化（打扰）什么是有效的，而是专注于如何在短期内实现什么。SSO - 登录 - 受限页面 - 寻找登录 - 登录 - 如果已经登录 - 获取用户信息 - 如果用户信息存在 - 通过辅助站点登录或设置新的用户信息。完毕！

我们开发人员喜欢流程图！我们不是吗？我刚刚创建了一个：

![自定义单点登录实施流程图](../Images/5588862745f6b153e325d1f93d0d09ee.png)

进一步的答案：

**“获取用户信息”阶段是否意味着我们从登录的站点获取用户信息，并在另一个站点中自动创建一个新用户（行）？**

理想情况下，您会在用户“允许”使用他们的信息之前征得用户的许可，但这会改变您的隐私政策。

**换句话说，一个站点处理所有注册/用户创建，而另一个站点只是等待该用户出现并触发自动创建。或者当用户在一个站点上注册时，两个数据库都插入了一个用户行？**

***一个站点处理所有注册/用户创建，而另一个站点只是等待该用户出现并触发自动创建。***你可以两者兼得。在您的网站上注册，也是基于触发器的自动创建。取决于你的策略。***或者当用户在一个站点上注册时，两个数据库都插入了一个用户行？***那将是一种可怕的做法！它将扼杀 SSO 的动机。SSO 的动机是创建一个可供用户使用的身份验证系列，这样他们就不必时不时地注册不同的网站。一次仅更新一个数据库，并在需要时更新其他数据库:)

问题？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:16:49.870

我做过一次。我没有任何片段和/或任何引用。但认为它可能会有所帮助。

1.  将 WP 和 CakePHP 都配置为使用相同的会话，您可以通过会话 ID 和会话名称来执行此操作，

2.  当用户注册您的网站时，请同时使用 WP 和 CakePHP 进行注册，

3.  选择一个从前端处理登录视图的框架。我选择了 CakePHP，因为我更精通它，一旦登录成功，在其他框架的数据库中找到相同的用户并使用他们的身份验证系统对用户进行身份验证。

希望这可以帮助 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:26:10.953

建议：

1.  如果您正在构建一个封闭系统，这意味着您必须登录才能访问站点中的任何有用信息，那么您可以使用[CAS](http://www.jasig.org/cas)。我知道它主要被大学使用，但对于封闭系统它是有效的。

（如果您需要处理匿名用户，以下建议可能会有所帮助）

1.  保持简单，类似于您计划的 A 部分，有一个 cookie（cake 和 wordpress 都可见），它简单地说明用户是否登录。cookie 应该由 cake 和 WP 创建/检查。Cake 不需要看 WP 的 DB。cookie 可以包含有关如何映射每个系统中的用户的信息。
2.  有一个中央登录屏幕，这类似于 CAS 所做的。但请建立你自己的。CAS 不处理匿名用户。我目前正在为工作创建一个中央登录屏幕。这很简单。中央登录屏幕将处理所有身份验证并创建对 WP 和 cake 可见的 cookie。这意味着 WP 和 cake 的登录链接会将用户重定向到公共页面。该链接需要提供一个回调 URL，以便在用户成功验证后，将他重定向回原始服务。您将需要决定一个用于用户身份验证的中央数据库。

cookie 方法有以下好处：

*   这是一个轻量级的解决方案，可以用开/关开关包裹。在 WP 中，只需使用 wp_options 值包装 cookie 逻辑。
*   您可以使用 WP 和 cake 的认证系统。无需使用 API 和/或会话。无需通过查看彼此的数据库来耦合应用程序。
*   您可以保持角色和权限原生，这意味着 WP 将使用它自己的角色和权限系统，您的蛋糕应用程序将使用它的系统。
*   向您的平台添加新的“服务”就像“创建/检查 cookie”一样简单，然后使用系统开箱即用的身份验证系统来登录用户。
*   单点登录就像创建 cookie 一样简单。单点注销将删除 cookie。

如果您有兴趣，我绝对可以详细介绍每个建议。

# c++ - Armadillo C++ 和 BLAS 和 ATLAS 在 mingw32 下找不到 lapack blas

> ID：15188263
> 
> 赞同：0
> 
> 时间：2013-03-03T17:12:03.683
> 
> 标签：c++, lapack, blas, mingw32, armadillo

全部，

概括 ...

我正在尝试编译 arma.sourceforge.net/docs.html#example_prog 的 example.cpp

我尝试用 lapack 和 blas 编译和链接犰狳。我总是收到同样的错误。这条消息被退回

```
ld.exe: cannot find -llapack
ld.exe: cannot find -lblas 
```

我验证了我下面的所有路径都是正确的并运行了以下。

```
g++ example.cpp -o example -O1  -I..\..\lapackblas_headers\lapack -I..\..\lapackblas_headers\blas  -I..\include 
```

-L....\lapackblas_MD_debug -llapack -lblas

这条消息被退回

```
ld.exe: cannot find -llapack
ld.exe: cannot find -lblas 
```

从

```
f:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../../mingw32/bin/ld.exe: cannot find -llapack
f:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../../mingw32/bin/ld.exe: cannot find -lblas 
```

collect2: ld 返回 1 个退出状态

安德烈·米库莱克 Andre_Mikulec@Hotmail.com

详情如下...

我下载了 LAPACK 和 BLAS 的预编译版本，下载自... [http://www.fi.muni.cz/~xsvobod2/misc/lapack/](http://www.fi.muni.cz/~xsvobod2/misc/lapack/)

我正在按照此处的说明进行操作

```
https://sourceforge.net/projects/arma/files/latest/download
http://sourceforge.net/projects/arma/files/armadillo-3.800.0.tar.gz
file:///M:/YDrive/All_Economics/eclipse_workspace/armadillo-3.800.0/README.txt 
```

从

arma.sourceforge.net/download.html#windows

我有 lapack 和 blas 库

```
ls -alrt ../../lapackblas-MD-debug

-rw-r--r--  1 Administrator Administrators   27092 Oct  5  2009 blas_win32_MDd.lib
-rwxr-xr-x  1 Administrator Administrators  280576 Oct  5  2009 blas_win32_MDd.dll
-rw-r--r--  1 Administrator Administrators  254886 Oct  5  2009 lapack_win32_MDd.lib
-rwxr-xr-x  1 Administrator Administrators 3774464 Oct  5  2009 lapack_win32_MDd.dll
drwxr-xr-x  2 Administrator Administrators       0 Mar  3 08:02 .
drwxr-xr-x 10 Administrator Administrators       0 Mar  3 08:06 ..

ls -alrt ../../lapackblas_headers/blas

MANYFILES.h

ls -alrt ../../lapackblas_headers/lapack

MANYFILES.h

ls -alrt ../include 
```

许多文件.h

我尝试用 lapack 和 blas 编译和链接犰狳。我总是收到同样的错误。

```
M:
cd \YDrive\All_Economics\eclipse_workspace\armadillo-3.800.0\examples

M:\YDrive\All_Economics\eclipse_workspace\armadillo-3.800.0\examples> 
```

我尝试了相对路径

```
g++ example.cpp -o example -O1  -I..\..\lapackblas_headers\lapack -I..\..\lapackblas_headers\blas  -I..\include 

-L..\..\lapackblas_MD_debug -llapack -lblas 
```

我尝试了绝对路径

```
g++ example.cpp -o example -O1  -IM:\YDrive\All_Economics\eclipse_workspace\lapackblas_headers\lapack  

-IM:\YDrive\All_Economics\eclipse_workspace\lapackblas_headers\blas  

-IM:\YDrive\All_Economics\eclipse_workspace\armadillo-3.800.0\include 

-LM:\YDrive\All_Economics\eclipse_workspace\lapackblas_MD_debug -llapack -lblas 
```

在所有情况下，返回的信息都在这里

```
ld.exe: cannot find -llapack
ld.exe: cannot find -lblas

f:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../../mingw32/bin/ld.exe: cannot find -llapack
f:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../../mingw32/bin/ld.exe: cannot find -lblas
collect2: ld returned 1 exit status 
```

有任何想法吗？

谢谢你。安德烈·米库莱克 Andre_Mikulec@Hotmail.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:15:44.120

我找到了部分解决方案。

```
g++ -o example example.cpp ..\..\lapackblas_MD_debug\blas_win32_MDd.dll ..\..\lapackblas_MD_debug\lapack_win32_MDd.dll -O1  -I..\..\lapackblas_headers\lapack -I..\..\lapackblas_headers\blas  -I..\include 
```

这个页面解释了它。 [http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs](http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs)

基本上，我需要在主程序之后的命令行中直接指定 DLL 文件

此外，要完成解决方案，我必须从英特尔 Fortran 编译器（或 30 天 eval ）安装（尚未）依赖的 DLL。

这个页面（我是否获得了 DLL）解释了它（在细则中）。

```
LAPACK & BLAS precompiled binaries for Win32 platform
http://www.fi.muni.cz/~xsvobod2/misc/lapack/ 
```

# java - 为什么我在 Java 中收到 EOF 异常？

> ID：15188275
> 
> 赞同：0
> 
> 时间：2013-03-03T17:12:47.403
> 
> 标签：java

我编写了以下方法来读取文件，搜索某个字符“$”，并返回一个布尔值，指示它是否存在。出于某种原因，我在第 224 行不断收到 EOFException，它只是说“s = raf.readUTF”。我所做的只是读取记录并将它们添加到数组列表中。这是代码：

```
 public boolean buildComparisonArray(String passedPath) throws FileNotFoundException, IOException{
    ArrayList<String> comparisonArray = new ArrayList<String>();
    boolean unwantPresent = false;
    File file = new File(passedPath);
    RandomAccessFile raf = new RandomAccessFile(file, "r");
    raf.seek(0);
    long num = 0;
    long fileSize = 0;
    int record = 0;
    fileSize = raf.length();
        record = 160;
        num = fileSize/record;
        String s = "", s2 = "", s3="",s4="",s5="",s6="",s7="",s8="";
    long currentPositionOfFilePointer;
    for(int i=0; i<num; i++){
            currentPositionOfFilePointer = raf.getFilePointer();
            System.out.println("Current: "+currentPositionOfFilePointer);
            s = raf.readUTF();
            comparisonArray.add(s);
            System.out.println("Found in file: "+s);
            for(int j=0; j<20-s.length();j++){
                raf.readByte();
            }
            s2 = raf.readUTF();
            comparisonArray.add(s2);
             System.out.println("Found in file: "+s2);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            } 
            s3 = raf.readUTF();
            comparisonArray.add(s3);
             System.out.println("Found in file: "+s3);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }
            s4 = raf.readUTF();
            comparisonArray.add(s4);
            System.out.println("Found in file: "+s4);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }
            s5 = raf.readUTF();
            comparisonArray.add(s5);
            System.out.println("Found in file: "+s5);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }
            s6 = raf.readUTF();
            comparisonArray.add(s6);
            System.out.println("Found in file: "+s6);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }
            s7 = raf.readUTF();
            comparisonArray.add(s7);
            System.out.println("Found in file: "+s7);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }

            s8 = raf.readUTF();
            comparisonArray.add(s8);
            System.out.println("Found in file: "+s8);
            for(int j=0; j<20-s2.length();j++){
               raf.readByte();
            }
        }
    raf.close();
    for(String j: comparisonArray){
        if(j.contains("$")){
            unwantPresent = true;
        }else if(!j.contains("$")){
            unwantPresent = false;
        }
    }
    return unwantPresent;
} 
```

我要做的就是通过一行的随机访问文件读取并检查是否存在“$”符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:29:15.213

在您阅读 s2 后，您忘记在您的 for 指令中将 s2 更改为 s3，将 s2 更改为 s4 等等

```
s2 = raf.readUTF();
comparisonArray.add(s2);
 System.out.println("Found in file: "+s2);
for(int j=0; j<20-s2.length();j++){
   raf.readByte();
} 
s3 = raf.readUTF();
comparisonArray.add(s3);
 System.out.println("Found in file: "+s3);
for(int j=0; j<20-s2.length();j++){
   raf.readByte();
} 
```

# php - 排序和拆分多维数组

> ID：15188278
> 
> 赞同：2
> 
> 时间：2013-03-03T17:13:02.460
> 
> 标签：php, arrays, multidimensional-array

所以我有一个多维数组的形式（实际数组可以长得多 500+ 成员）

```
$marr = array( array("s_id" => 1, 1.25 , 15),
               array("s_id" => 2, 0.75 , 25),
               array("s_id" => 1, 1.15 , 7) 
             ); 
```

我正在尝试将其分解为由成员数组的 s_id 值分组/索引的数组

```
$sarr        = array(
                    1 => array(
                                 array("s_id" => 1, 1.25 , 15),
                                 array("s_id" => 1, 1.15 , 7) 
                                 ),
                    2 => array(
                                 array("s_id" => 2, 0.75 , 25)
                                 )
                    ); 
```

php中是否有内置函数来执行此操作或一些最佳实践方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:26:41.900

没有内置函数可以提供此结果。相反，您需要遍历数组，并检查与`s_id`值匹配的键是否已经存在。如果它没有在该键处创建新数组。

```
$marr = array( array("s_id" => 1, 1.25 , 15),
               array("s_id" => 2, 0.75 , 25),
               array("s_id" => 1, 1.15 , 7) 
             ); 

// Holds the whole output
$output = array();

// Looping over the original array
foreach ($marr as $subarr) {
  // Check if the output array already has the s_id as a key
  if (!isset($output[$subarr['s_id']])) {
    // Initialize it
    $output[$subarr['s_id']] = array();
  }
  // Then append the current sub-array to the s_id array key
  $output[$subarr['s_id']][] = $subarr;
}
// Then call ksort() on the output array
// to sort the s_id keys in ascending order
ksort($output); 
```

[http://codepad.viper-7.com/SSBrAl](http://codepad.viper-7.com/SSBrAl)

### 印刷：

```
Array
(
    [1] => Array
        (
            [0] => Array
                (
                    [s_id] => 1
                    [0] => 1.25
                    [1] => 15
                )

            [1] => Array
                (
                    [s_id] => 1
                    [0] => 1.15
                    [1] => 7
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [s_id] => 2
                    [0] => 0.75
                    [1] => 25
                )

        )

) 
```

# verilog - 带分频器的计数器不递增

> ID：15188279
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:13:22.423
> 
> 标签：verilog, flip-flop

以下代码是为异步计数器编写的。程序编译得很好，但计数器值在`1`. 我究竟做错了什么？

这是代码：

```
//TOP

module CounterWithDivider(clk,reset,temp,q);

input clk,reset;
output [3:0]q;
output reg [3:0]temp;

reg [3:0]clkDivider;

TFF a(clkDivider,clk,reset,q[0]);
TFF b(clkDivider,q[0],reset,q[1]);
TFF c(clkDivider,q[1],reset,q[2]);
TFF d(clkDivider,q[2],reset,q[3]);

always @(posedge clk or negedge reset)
begin

if(~reset || clkDivider==12)
  clkDivider<=0;

else

if(clk)
begin

 clkDivider<=clkDivider+1;
 temp<=clkDivider;

end

end

endmodule 
```

// T触发器

```
module TFF(clkDivider,clk,reset,q);

input clk,reset;
input [3:0]clkDivider;
output reg q;

always @(posedge clk or negedge reset)
begin

if(~reset)
  q<=0;

else

if(clkDivider==11)
  q<=1;

end

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:37:37.730

T-FlipFlop 或切换触发器应在启用时切换其输出，您只需：

```
if(clkDivider==11)
  q<=1; 
```

替换 `q<=1`为`q<=~q`使其在启用时切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:49:25.633

正如您所提到的，这是一个异步计数器。您的 Verilog 模拟没有达到您想要的效果的原因是该`TFF`实例`b`正在尝试`clkDivider`使用不同的时钟信号对其数据输入 ( ) 进行采样。 `clkDivider`由 signal 计时`clk`，但您尝试使用不同的时钟信号 ( `q[0]`) 对其进行采样。

您需要找到一种方法将 clkDivider 信号同步到其他 3 个时钟域中的每一个，或者使用完全同步的设计。

# windows-8 - Windows8 像在天气应用程序中一样滚动

> ID：15188290
> 
> 赞同：2
> 
> 时间：2013-03-03T17:14:08.657
> 
> 标签：windows-8, windows-store-apps, winrt-xaml

我的布局如下所述：

```
<ScrollViewer>
  <StackPanel Orientation="Horizontal">
     <!-- ... -->
     <ScrollViewer>
        <ItemsControl.ItemsPanel>
             <ItemsPanelTemplate>
                   <StackPanel ScrollViewer.VerticalScrollBarVisibility="Visible"  Orientation="Vertical" />
             </ItemsPanelTemplate>
         </ItemsControl.ItemsPanel> 
     </ScrollViewer>

      <!-- ... -->
  </StackPanel>
</ScrollViewer> 
```

我想实现天气应用程序中存在的效果。

在我的应用程序中，当您使用鼠标滚轮水平滚动时，当指针越过 ItemsControl 时，它会立即开始垂直滚动，而在天气应用程序中有流畅的水平滚动效果，并且当有一段时间悬停该垂直集合时开始垂直滚动。

这种行为是默认实现的吗？

席蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:00:55.183

通常，指导原则是在水平滚动中继器中引入垂直滚动是一个坏主意。我认为您不应该将 Weather（或任何标准的 Windows 8 应用程序）视为模仿的模型。他们中的大多数人以最糟糕的方式违反了指导方针。

天气应用程序会根据当前鼠标位置、网格运动和焦点控制来完成您的要求。这是一种复杂的说法，一些开发人员想出了一个解决方案来帮助他们的 UI 尽可能地让用户感到困惑。

请不要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:51:05.780

我认为他们为了达到这种效果所做的是：

如果鼠标在垂直列表上停留一段时间，它们会停用水平滚动并激活垂直滚动。一旦鼠标移出列表，它们就会切换回来（停用垂直滚动并激活水平滚动）。

我还没有测试过它是否有效，但我认为它应该。

# css - Chrome，从右到左的问题

> ID：15188291
> 
> 赞同：3
> 
> 时间：2013-03-03T17:14:16.560
> 
> 标签：css, google-chrome, right-to-left

我在尝试在 chrome 中设置菜单样式时遇到了一些问题。菜单在 ltr 模式下看起来不错，但在从右到左模式下，它会在 Chrome 中中断。

我在这里有一个小提琴：http: [//jsfiddle.net/YKger/](http://jsfiddle.net/YKger/)

在firefox中，ltr中的菜单是“一-二-三”，rtl中是“三-二-一”。它镀铬总是呈现为“一二三”。

知道为什么会发生这种情况，或者我如何在没有第一个“li”跨越整个菜单的情况下设置它的样式？

谢谢，

另外，这里的代码：

```
<!doctype html>
<head>

<style>
.navigation { float:right; }

ul#main-menu {
list-style-type: none;
direction:rtl;
}

li {
border: 2px solid black;
padding: 5px 10px;
position: relative;
}

ul#main-menu span#tail1 {
position:absolute;
bottom:-21px;
left:10px;
width:0;height:0;
border-color:#000000 transparent transparent transparent;
border-style:solid;
border-width:10px;
}

ul#main-menu span#tail2 {
position:absolute;
bottom:-18px;
left:10px;
width:0;height:0;
border-style:solid;
border-width:10px;
}

ul.inline li {
display:inline;
}
</style>

</head>

<body>
<nav class="navigation">
<ul id="main-menu" class="links inline clearfix main-menu">
<li class="menu-1501 first"><a href="/fa/blogs" title="">One</a><span id='tail1'>    </span>
<span id='tail2'></span></li>
<li class="menu-1014"><a href="/fa/node/2" title="">Two</a><span id='tail1'></span><span id='tail2'></span></li>
<li class="menu-1759 active-trail last active"><a href="/fa/projects" class="active-trail active">Three</a><span id='tail1'></span><span id='tail2'></span></li>
</ul>
</nav>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T18:01:41.870

我认为这是最简单的方法 - 你应该做你的两个：

```
ul, li 
{
direction:rtl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:25:54.900

尝试这个：

```
.navigation { float:right; }

ul#main-menu {
list-style-type: none;
direction:rtl;
}

li {
border: 2px solid black;
padding: 5px 10px;
position: relative;
}

ul#main-menu span#tail1 {
position:absolute;
bottom:-21px;
left:10px;
width:0;height:0;
border-color:#000000 transparent transparent transparent;
border-style:solid;
border-width:10px;
}

ul#main-menu span#tail2 {
position:absolute;
bottom:-18px;
left:10px;
width:0;height:0;
border-style:solid;
border-width:10px;
}

ul.inline li {
display:inline-block;
} 
```

# python - Python 使用“numpy.ndarray”创建字典

> ID：15188292
> 
> 赞同：1
> 
> 时间：2013-03-03T17:14:25.143
> 
> 标签：python, arrays, dictionary, numpy, runtime-error

我有一个空的“numpy.ndarray”

```
import numpy as np
my_grid =  np.zeros((5, 5))

parse = "max","min","avg" 
```

我希望创建一个字典，其中 parse 的每个元素都是“键”

从集合导入 defaultdict

```
GridMetric = dict()
for arg in parse:
    GridMetric[arg].append(my_grid) 
```

但我得到这个错误

```
 Traceback (most recent call last):
  File "<editor selection>", line 3, in <module>
KeyError: 'max' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:40:31.597

如果您想要的是一个字典，其键是称为 parse 的列表的不同元素，并且其值都是相同的数组，那么对您的代码进行以下更改应该可以工作：

```
import numpy as np
my_grid =  np.zeros((5, 5))

parse = ["max","min","avg"]

d = {}
for arg in parse:
    d[arg] = my_grid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-17T13:25:52.690

试试这个：

```
import numpy as np

my_grid =  np.zeros((5, 5))

parse = ["max","min","avg"]

for arg in parse:
    dict(parse=my_grid)

print(d) 
```

# php - javascript在php中不起作用

> ID：15188293
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:14:31.920
> 
> 标签：php, javascript, javascript-events

在提交我的表单时，它不会验证。我使用提交进行表单提交，我必须重定向我的页面。通过使用 onclick 事件，它应该被验证..

```
<td id="main">
  <h2>Add Info </h2>
  <form action="create_info.php" name="f1" method="post">
    <p>Info Title:
      <input type="text" name="menu" value="" id="menu" />
    </p>
    <p>Position:
      <select name="position">
        <?php
        $info_set = get_all_info();
        $info_count = mysql_num_rows($info_set);
        for($count=1; $count <=$info_count+1; $count++){
        echo " <option value=\"{$count}\">{$count}</option>";
        }
        ?>
      </select>
    </p>
    <p>Visible:
      <input type="radio" name="visible" value="0" />NO
      <input type="radio" name="visible" value="1" />YES
    </p>
    <input type="submit" value="Add" onclick="validateForm()"/>
  </form>
  <br>
  <a href="content.php">Cancel</a>
</td>
</tr>
</table>
</div>
<script language="text/java script">
  function validateForm()
  {
    if(f1.menu.value== "")
    {
      alert("name must be filled out");
      return false;
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:19:25.837

它没有验证，因为您没有阻止提交事件。你应该把你的验证放在 onsubmit 事件中，当你点击提交按钮时它会被触发。

jsFiddle 中的工作代码：http: [//jsfiddle.net/FHZKr/](http://jsfiddle.net/FHZKr/)

```
<form action="create_info.php" name="f1" method="post" onsubmit="return validateForm();">
    <p>Info Title:
    <input type="text" name="menu" value="" id="menu" />
    </p>
    <p>Position:
        <select name="position">
         <?php
         $info_set = get_all_info();
         $info_count = mysql_num_rows($info_set);
         for($count=1; $count <=$info_count+1; $count++){
         echo " <option value=\"{$count}\">{$count}</option>";
         }
         ?>
        </select>
    </p>
    <p>Visible:
     <input type="radio" name="visible" value="0" />NO 
     <input type="radio" name="visible" value="1" />YES
    </p>
    <input type="submit" value="Add" />
</form> 
```

JavaScript

```
<script type="text/javascript">

function validateForm()
{
  if(f1.menu.value== "")
  {
      alert("name must be filled out");
      return false;
  }
  return true;
}
</script> 
```

# jquery - 使用 MVC3 Razor 在 Jquery 中应用图像扩展验证

> ID：15188297
> 
> 赞同：0
> 
> 时间：2013-03-03T17:15:03.693
> 
> 标签：jquery, asp.net-mvc-3, validation

我正在尝试使用 ASp.NET MVC 3 和 Jquery 发布图像。我在视图中有以下代码

```
form action="/profile/upload" method="post" enctype="multipart/form-data">

    <label for="photo">Photo:</label>
    <input name="photo" id="photo" type="file">

    <input value="Upload" type="submit">
</form> 
```

并在控制器中

```
public ActionResult Upload(HttpPostedFileBase photo)
{
    string path = @"D:\Temp\";

    if(photo != null)
        photo.SaveAs(path + photo.FileName);

    return RedirectToAction("Index");
} 
```

我想要的是我只想通过文件上传上传 jpg 或 png 文件。我想在 JQuery 中进行验证。

请任何人都可以建议一个简单的方法以及如何在提交被触发之前检查验证..

```
<form action="/profile/upload" method="post" enctype="multipart/form-data">

    <label for="photo">Photo:</label>
    <input name="photo" id="photo" type="file">

    <input value="Upload" type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:17:58.010

如果您使用的是支持 HTML 5 的现代网络浏览器，您可以像这样限制文件类型：

```
<input name="photo" id="photo" type="file" accept="image/jpg, image/png" /> 
```

作为替代方案，您可以使用 jquery.validate 插件在提交表单时检查所选文件的文件扩展名并相应地显示验证错误。会有2种情况：

1.  您正在使用内置 ASP.NET MVC 3 的 jquery 不显眼验证。在这种情况下，您将必须编写一个自定义适配器，如我在[`this post`](https://stackoverflow.com/a/4784986/29407).
2.  您直接使用 jquery.validate 插件并自己编写规则。在这种情况下，定义[`custom rule`](https://stackoverflow.com/a/241202/29407).

# php - 从动态下拉列表将变量传递给 PHP

> ID：15188298
> 
> 赞同：0
> 
> 时间：2013-03-03T17:15:04.130
> 
> 标签：php, mysql, ajax

我在将从动态下拉列表中选择的变量传递给 PHP 文件时遇到问题。我希望 PHP 选择 db 表中与变量匹配的所有行。这是到目前为止的代码：

选择.php

* * *

```
<html>
<head>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   <script type="text/javascript">
    $(document).ready(function(){
        $("select#type").attr("disabled","disabled");
        $("select#category").change(function(){
        $("select#type").attr("disabled","disabled");
        $("select#type").html("<option>wait...</option>");            var id = $("select#category option:selected").attr('value');
        $.post("select_type.php", {id:id}, function(data){
            $("select#type").removeAttr("disabled");
            $("select#type").html(data);
        });
    });
    $("form#select_form").submit(function(){
        var cat = $("select#category option:selected").attr('value');
        var type = $("select#type option:selected").attr('value');

        if(cat>0 && type>0)
        {
            var result = $("select#type option:selected").html();
            $("#result").html('your choice: '+result);

            $.ajax({
            type: 'POST',
            url: 'display.php',
            data: {'result': myval},
            });

        }
        else
        {
            $("#result").html("you must choose two options!");
        }
        return false;
    });
});
</script>
</head>
<body>
    <?php include "select.class.php"; ?>
    <form id="select_form">
        Choose a category:<br />
        <select id="category">
            <?php echo $opt->ShowCategory(); ?>
        </select>
    <br /><br />
    Choose a type:<br />
    <select id="type">
         <option value="0">choose...</option>
    </select>
    <br /><br />
    <input type="submit" value="confirm" />
    </form>
    <div id="result"></div>
    <?php include "display.php"; ?>

    <div id="result2"></div>         
</body>
</html> 
```

这是我希望将变量传递给的 display.php。该文件将从数据库中选择标准，然后在 select.php 中打印结果。

```
<?php

class DisplayResults
{
protected $conn;

    public function __construct()
    {
        $this->DbConnect();
    }

    protected function DbConnect()
    {
        include "db_config.php";
        $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
        mysql_select_db($db,$this->conn) OR die("can not select the database $db");
        return TRUE;
    }

    public function ShowResults()

    {

        $myval = $_POST['result'];
        $sql = "SELECT * FROM specialities WHERE 'myval'=sp_name";
        $res = mysql_query($sql,$this->conn);
           echo "<table border='1'>";
           echo "<tr><th>id</th><th>Code</th></tr>";
        while($row = mysql_fetch_array($res))
        {

            while($row = mysql_fetch_array($result)){
            echo "<tr><td>";
            echo $row['sp_name'];
            echo "</td><td>";
            echo $row['sp_code'];
            echo "</td></tr>";
        }
            echo "</table>";
        //} 
        }
        return $category;
    }

}

$res = new DisplayResults();
?> 
```

我真的很感激任何帮助。如果我可以提供更多详细信息，请告诉我。

db图链接：http: [//imgur.com/YZ0SuVw](http://imgur.com/YZ0SuVw)

第一个下拉列表来自专业表，第二个来自专业表。我想做的是显示工作表中与下拉框中选择的专业匹配的所有行。这将需要将下拉列表中的变量（结果）的结果转换为作业表中的 spec_code。不确定如何执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:35:01.660

好吧，不可能正确回答您的问题，因为我们不知道您的 SQL 查询中要使用的是类别字段还是类型字段。

下面是一些概念代码，它应该为您指明正确的方向。

## 但首先，一些评论..

**HTML/JS**

1.  当您在提交时检查`cat`and`type`变量是否“大于 0”时，您应该首先将值解析为整数，因为默认情况下 post 值作为文本发送。
2.  您的`myval`价值无法破译，请说明您的意图。
3.  为了进一步参考，您重复的 jQuery 查询 like`$("select#type")`可以存储在变量 like 中`var $type = $("select#type")`，然后被引用 like `$type.attr('disabled', 'disabled')`。我不是 100% 确定 jQuery 如何缓存结果，但理论上它应该需要更少的 jQuery 处理，它也减少了[重复代码](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

**PHP**

1.  检查是否使用`isset()`或`!empty()`在使用这些值之前设置了超变量索引，否则将显示警告（或通知，无法调用）。所以而不是`$myvar = $_POST['myfield']`做`$myvar = isset( $_POST['myfield'] ) ? $_POST['myfield'] : "";`
2.  **确保在使用 SQL 查询之前对值进行转义或强制转换/清理。**对于 MySQL 库，您将使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)函数。
3.  **mysql**库已被弃用并且容易被黑客攻击。强烈建议使用较新的**mysqli库。**
4.  同样，不知道该`sp_name`列是用于类别还是类型字段。我已经包括了两者。
5.  尽管将值放在您的 where 表达式（列名之前）中很奇怪，但它违反了正常做法，不推荐使用。而不是`'myval'=sp_name`做`sp_name='myval'`。
6.  修复了你的循环`showResults()`。
7.  `showResults()`您从未在*display.php*中调用过该方法。另请注意，它返回一个值，因此我们还必须将其打印到屏幕上。

## HTML/JS

```
<html>
<head>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   <script type="text/javascript">
    $(document).ready(function(){
        $("select#type").attr("disabled","disabled");
        $("select#category").change(function(){
        $("select#type").attr("disabled","disabled");
        $("select#type").html("<option>wait...</option>");            var id = $("select#category option:selected").attr('value');
        $.post("select_type.php", {id:id}, function(data){
            $("select#type").removeAttr("disabled");
            $("select#type").html(data);
        });
    });
    $("form#select_form").submit(function(){
        // Fetch values and parse them to integers
        var cat = parseInt( $("#category").val(), 10 );
        var type = parseInt( $("#type").val(), 10 );

        if(cat>0 && type>0)
        {
            $("#result").html('your choice: '+type);

                        // Prepare data
                        var data = {
                            category: cat,
                            type: type
                        }

            $.ajax({
                            type: 'POST',
                            url: 'display.php',
                            data: data
            });

        }
        else
        {
            $("#result").html("you must choose two options!");
        }
        return false;
    });
});
</script>
</head>
<body>
    <?php include "select.class.php"; ?>
    <form id="select_form" action="">
        Choose a category:<br />
        <select id="category">
            <?php echo $opt->ShowCategory(); ?>
        </select>
    <br /><br />
    Choose a type:<br />
    <select id="type">
         <option value="0">choose...</option>
    </select>
    <br /><br />
    <input type="submit" value="confirm" />
    </form>
    <div id="result"></div>
    <?php include "display.php"; ?>

    <div id="result2"></div>         
</body>
</html> 
```

## 显示.php

```
<?php

class DisplayResults
{
protected $conn;

    public function __construct()
    {
        $this->DbConnect();
    }

    protected function DbConnect()
    {
        include "db_config.php";
        $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
        mysql_select_db($db,$this->conn) OR die("can not select the database $db");
        return TRUE;
    }

    public function ShowResults()

    {   
        // Fetch values from POST and escape/cast the values to prevent SQL injection
        $category = (int) ( isset( $_POST['category'] ) ? $_POST['category'] : 0 );
        $type = (int) ( isset( $_POST['type'] ) ? $_POST['type'] : 0 );

        // Use the values in your SQL query 
        // 
        // PLEASE CHANGE THE COLUMN NAMES TO MATCH YOUR SOLUTION
        //==================
        $sql = "SELECT * FROM specialities WHERE category='". $category ."' and type='". $type ."' ";

        $res = mysql_query($sql,$this->conn);
           echo "<table border='1'>";
           echo "<tr><th>id</th><th>Code</th></tr>";
        while($row = mysql_fetch_array($res))
        {
            echo "<tr><td>";
            echo $row['sp_name'];
            echo "</td><td>";
            echo $row['sp_code'];
            echo "</td></tr>";
        //} 
        }
                echo "</table>";
        return $category;
    }

}

$res = new DisplayResults();

// Get and print results
echo $res->showResults();
?> 
```

# mysql - INFORMATION_SCHEMA.COLUMNS ：并且必须是主键：Mysql 查询

> ID：15188299
> 
> 赞同：3
> 
> 时间：2013-03-03T17:15:04.563
> 
> 标签：mysql

我添加了一个关于 COLUMN_NAME 搜索的大部分已解决问题的问题，但尚未收到任何反馈。

如何进行如下查询：

> 我想查看列名称为“Type_ID”并且 **必须是该表的主键**的所有表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:17:52.340

```
SELECT table_schema, table_name
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
WHERE (table_schema, column_name, constraint_name) 
    = ('mydatabase', 'Type_ID', 'PRIMARY'); 
```

# javascript - 禁用没有jQuery的textarea？

> ID：15188300
> 
> 赞同：0
> 
> 时间：2013-03-03T17:15:09.890
> 
> 标签：javascript, jquery

我如何在不使用 jQuery 的情况下禁用文本区域？

目前正在使用以下内容：

```
$("#textareaId").attr("disabled", "disabled"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:15:45.640

简单地做

```
document.getElementById("textareaId").disabled=true; 
```

[示范](http://jsbin.com/owinew/1/edit)

jQuery 是一个 JavaScript 库，您使用它所做的一切都可以在 JavaScript 中完成，即使它通常更冗长或意味着更加注意浏览器的差异。见[http://vanilla-js.com/](http://vanilla-js.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:19:13.890

试试下面

```
document.getElementById("mytxt").disabled=true; 
```

[链接到这里](http://jsfiddle.net/ntz2y/)小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:32:31.123

尝试使用 setAttribute 方法并检查输出中的任何差异。

```
document.getElementById("textareaId").setAttribute('disabled', true); 
```

# java - 在云上部署 netbeans Web 应用程序

> ID：15188301
> 
> 赞同：1
> 
> 时间：2013-03-03T17:15:21.083
> 
> 标签：java, netbeans, cloud

我在 NetBeans 中创建了一个 java web 应用程序。我正在寻找一个云服务提供商来部署它。我检查的大多数云平台都没有任何 netbeans 插件，就像它们为 eclipse 做的那样。

我尝试使用适用于 netbeans 6.9 的 Google App Engine，但这对我不起作用。我还设法在 jelastic 上部署了我的应用程序，但我正在寻找其他选项。我可以使用其他云服务提供商吗？

我正在使用 glassfish 作为我的应用程序的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:45:46.167

在 Jelastic 上部署您的应用程序时，您是否遇到过任何困难？你为什么要寻找其他选择？NetBeans 的插件仍在开发中，很快将在 Jelastic 中得到支持。所以，请继续关注更新。

# c++ - C++ Primer第五版书（if语句）这不正确吗？

> ID：15188304
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:16:00.760
> 
> 标签：c++

```
#include <iostream>

int main()
{
    int currVal = 0, val = 0;

    if (std::cin >> currVal) {
        int cnt = 1; 

        while (std::cin >> val) { 
            if (val == currVal)
                ++cnt; 
            else 
            {
                std::cout << currVal << " occurs " << cnt << " times" << std::endl;
                currVal = val; 
                cnt = 1; 
            }
        } 

        std::cout << currVal << " occurs " << cnt << " times" << std::endl;
    } 

    return 0;
} 
```

如果我们给这个程序以下输入：

> 42 42 42 42 42 55 55 62 100 100 100

那么输出应该是

> 42 发生 5 次
> 
> 55 出现 2 次
> 
> 62 发生 1 次
> 
> 100 出现 3 次

所有这些代码都应该正常工作。很抱歉给您带来不便。（脑子放个屁）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:23:01.047

这[似乎按预期工作](http://ideone.com/oDmDvM)。

在语句或循环`std::cin >> whatever`的条件下这样做是有充分理由的。提取运算符返回您正在操作的流。所以表达式的值就是它本身。`if``while``>>``std::cin >> whatever``std::cin`

为了检查流是否处于有效状态`std::cin`，可以将流（例如 ）转换为。`bool`考虑：

```
if (std::cin >> whatever) 
```

这可以理解为将用户输入到变量中`whatever`，然后检查输入是否有效。如果没有，该`if`块将不会执行。

相似地：

```
while (std::cin >> whatever) 
```

这将循环，每次都从用户那里获取输入，直到用户输入无效的内容。

什么是无效输入？好吧，如果`whatever`在上面的示例中是一个`int`，并且用户输入了 text `blah`，这将失败，因为它不是一个有效的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:57:54.470

您提供的代码按预期工作。

该表达式`stream >> variable`产生对 的引用`stream`，并且作为一个`if`条件，然后将其转换为`bool` *就好像*您已经编写了`!(stream >> variable).fail()`.

然而，虽然代码在技术上有效，但它有很多冗余

因此，除非作者的目的是说明技术上不好的代码（也许讨论它的所有问题），否则它在教学上是不好的。

这是一个冗余更少的替代公式：

```
#include <iostream>
using namespace std;

int main()
{
    int current_value = 0;
    int run_length = 0;

    for( bool at_end = false; !at_end; )
    {
        int value;
        at_end = (cin >> value).fail();

        if( run_length > 0 && (at_end || value != current_value) )
        {
            cout << current_value << " occurs " << run_length << " times" << endl;
            run_length = 0;
        }

        if( !at_end )
        {
            if( run_length == 0 )
            {
                current_value = value;
            }
            ++run_length;
        }
    }
} 
```

测试：

```
[D:\开发\测试]
> *g++ foo.cpp*

[D:\开发\测试]
>*回声 42 42 42 42 42 55 55 62 100 100 100 | 一种*
42 发生 5 次
55 出现 2 次
62 发生 1 次
100 出现 3 次

[D:\开发\测试]
> _

```

# mongodb - MongoDB 一直运行备用查询计划

> ID：15188305
> 
> 赞同：2
> 
> 时间：2013-03-03T17:16:05.700
> 
> 标签：mongodb, indexing

MongoDB 文档[说](http://docs.mongodb.org/manual/core/indexes/)：

> ...查询优化器通过偶尔运行备用查询计划并通过为每种查询类型选择具有最佳响应时间的计划来凭经验选择索引...

我在使用 MongoDB 2.0.2 时遇到的问题是，Mongo 似乎一直在为某些查询运行备用查询计划。

这不仅使整个过程非常缓慢（explain({verbose:true}) 在 'allPlans' 数组中显示了 10-15 个额外的测试），Mongo 也没有选择最佳索引。使用我为该查询创建的索引提供提示命令会产生更快的结果。

这是一个例子：

```
> db.posts.find({"project.id" : 2, "project.sections" : 1, "reading" : {"$in" : [0,1]}, "publicate" : 1}).sort({"date":-1}).explain()

"cursor" : "BtreeCursor project.id_1_reading_1_publicate_1_public_1_last_comment_time_1 multi",
"nscanned" : 13347,
"nscannedObjects" : 13346,
"n" : 7619,
"millis" : 2371,
"nYields" : 7,
"nChunkSkips" : 0,
"isMultiKey" : false,
"indexOnly" : false, 
```

使用 verbose:true 的相同查询在 'allPlans' 数组中显示这些索引：

```
"BtreeCursor reading_1_publicate_1_last_comment_time_1 multi",
"BtreeCursor date_-1_community_id_1",
"BtreeCursor project.id_1_reading_1_publicate_1_public_1_last_comment_time_1 multi",
"BtreeCursor project.id_1_reading_1_publicate_1_last_comment_time_1 multi",
"BtreeCursor project.id_1_project.sections_1_reading_1_publicate_1_public_1_date_-1 multi",
"BtreeCursor timeline_main_liked_all",
"BtreeCursor timeline_main_liked_user",
"BtreeCursor timeline_main_commented_all",
"BtreeCursor timeline_main_commented_user",
"BtreeCursor project.id_1_reading_1_publicate_1_public_1_project.sections_1 multi",
"BtreeCursor publicate_1_public_1_date_-1_reading_1_type_1 multi",
"BtreeCursor publicate_1_timeline_visibility_all_1_short.formatted_1_short.show_1_short.commercial_1_date_-1",
"BtreeCursor publicate_1_timeline_visibility_user_1_short.formatted_1_short.show_1_short.commercial_1_date_-1",
"BasicCursor", 
```

1.  如何让 Mongo 一直停止运行这些索引检查？
2.  如何让 Mongo 使用并坚持实际的最佳索引？

# java - 大小为 n 的 TreeMap 和 HashMap 中 get() 方法的运行时性能如何

> ID：15188307
> 
> 赞同：3
> 
> 时间：2013-03-03T17:16:21.610
> 
> 标签：java, map, hashmap, big-o, treemap

最近一个面试问题让我感到不确定。

对于 TreeMap 和 HashMap 中的 get() 方法，它的性能如何？

a) 平均：常数（与 n 无关） 最差：常数（与 n 无关）

b) 平均：常数（与 n 无关） 最差：与 log(n) 成正比

c) 平均：常数（与 n 无关） 最差：与 (n) 成正比

d) 平均：与 log(n) 成比例 最差：与 (n) 成比例

哪个是对的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T17:20:34.890

[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)

> 此实现为基本操作（get 和 put）提供恒定时间性能，假设哈希函数将元素正确地分散在桶中。

但是请注意，修改*负载因子*（默认值 = `0.75`）可能会对`HashMap`.

> 作为一般规则，默认负载因子 (.75) 在时间和空间成本之间提供了良好的折衷。较高的值会减少空间开销，但会增加查找成本（反映在 HashMap 类的大多数操作中，包括 get 和 put）。

可以通过使用重载构造函数之一来强制执行不同的*负载因子值。*

[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)

> 此实现为 containsKey、get、put 和 remove 操作提供有保证的 log(n) 时间成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:27:26.670

答案是d

树图实现了一个红黑树，因此平均情况是 o(log n)

Hashmap 在最坏的情况下取 o(n)

# java - 在另一个类中引用类时出错

> ID：15188315
> 
> 赞同：0
> 
> 时间：2013-03-03T17:17:01.553
> 
> 标签：java, list

在我的 CD 类和 TrackList 类中，我有一个名为 tracklist 的对象，它作为错误出现。我不知道我需要添加或删除什么来修复它。这是我的CD课：

```
public class CD {
    public String artist;
    public String title;
    public trackist myTracklist;

    public CD(String artist, String title){
        artist = artist;
        title = title;
        myTracklist = new tracklist(100);
    }

    public static void main(String[] args) {
        String mainArtist;
        String mainTitle;
        CD myCD = new CD("RisingNation", "Natioins");
        mainArtist = myCD.getArtist();
        System.out.println(mainArtist);
        mainTitle = myCD.getTitle();
        System.out.println(mainTitle);
        myCD.display();
    }

    public String getArtist(){
        String person;
        person = artist;
        return person;
    }
} 
```

这也是我的曲目列表课程，

```
public class TrackList {
    int length;
    int numUsed;
    String[] storage;

    public tracklist(int size){// this shows up underlined in red
        length = size;
        numUsed = 0;
        storage = new String[length];
    }

    public int count(){
        return numUsed;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:38:48.713

发生错误是因为编译器不知道是否`tracklist`应该是方法，因为没有返回类型，或者构造函数，因为它与类名不匹配。但在我看来，它应该是一个构造函数。

所以将代码更改为：

```
public TrackList(int size) 
```

您还应该更改 CD 类构造函数，例如：

```
public CD(String artist, String title){
    this.artist = artist;
    this.title = title;
    myTracklist = new tracklist(100);
} 
```

由于构造函数参数与类全局变量同名，所以需要用`this.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:58:35.550

那条线应该是构造函数吧？

构造函数名称应与类名称相同。大小写敏感。这意味着，如果您的班级是

```
 public class TrackList {} 
```

所以构造函数必须是

```
 public TrackList () {} 
```

# wso2 - 如何获取 WSO2 Registry 资源的符号链接信息？

> ID：15188317
> 
> 赞同：0
> 
> 时间：2013-03-03T17:17:07.587
> 
> 标签：wso2

我在 WSO2 文档中的任何地方都没有找到有关此的信息。

我有一个[`Resource`](http://wso2.org/project/registry/4.5.0/docs/apidocs/kernel/org/wso2/carbon/registry/core/Resource.html)从对 的调用中获得的对象`UserRegistry.get(path)`，并且该资源的媒体类型（从中获得`resource.getMediaType()`的设置为[`RegistryConstants.LINK_MEDIA_TYPE`](http://wso2.org/project/registry/4.5.0/docs/apidocs/kernel/org/wso2/carbon/registry/core/RegistryConstants.html#LINK_MEDIA_TYPE)，表示它表示指向注册表中另一个资源的符号链接。

我想知道这个符号链接指向的资源的原始媒体类型是什么。WSO2 GREG 管理界面显然能够做到这一点——单击`Info`资源上的按钮会显示我正在寻找的媒体类型——但似乎没有提供此信息的 API 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:22:00.890

发现如果 a`resource.getMediaType()`返回`RegistryConstants.LINK_MEDIA_TYPE`则意味着这是一个断开的链接，其目标（它指向的资源）已被删除。

此外，发现 G-Reg 中的所有符号链接信息都存储在以下注册表位置： `/_system/local/repository/components/org.wso2.carbon.registry/mount`

该位置中的每个条目都代表一个符号链接，有关符号链接的详细信息可以从与上述位置中的条目关联的属性中获得。这些属性包括：

*   `author`- 创建符号链接的用户
*   `path`- 符号链接的位置
*   `target`- 符号链接的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:21:41.590

目前，您必须使用属性来获取这些属性。

registry.get("符号链接的路径").getProperties()

1) **registry.actualpath**：返回目标路径

2）**registry.targetpoint**：返回目标路径

3) **registry.link** : 返回真/假，检查给定路径是否为符号链接。

4) **registry.author**：资源的所有者。

当用户删除目标资源时，治理注册表会自动删除符号链接。因此不存在断开的链接。

# jquery - 从 500px RSS Feed 中提取图像并在 jQuery 滑块中显示

> ID：15188324
> 
> 赞同：1
> 
> 时间：2013-03-03T17:17:59.663
> 
> 标签：jquery, ajax, image, rss

我正在尝试从我的 500px 帐户中获取图像并将它们显示在我的 jQuery 滑块内的投资组合中。

我对 jQuery 滑块部分没有任何问题，但我以前从未使用过 RSS Feed，我不确定这是否需要 PHP 来提取数据并为前端准备好格式，或者是否可以简单地通过 jQuery 完成。

关于如何开始这样的事情的任何想法？

**编辑/更新**

我在看的时候没有看到那个帖子，但是通读了它，我知道它是如何有用的，但是它让我遇到了另一个问题。

```
$(document).ready(function(){
        $.ajax({
          type: "GET",
          url: "http://500px.com/daimz/rss.xml",
          dataType: "xml",
          success: parseXml
        });

        // function that parses XML
        function parseXml(xml){

            // find node with name "catalogueResult" and run function for each
            $(xml).find("item").each(function(){

            // variables
            var title = $(this).find("title").text();
            var link = $(this).find("link").text();
            var imgSrc = $(this).find("imageUrl").text();
            var pubDate = $(this).find("pubDate").text();
            var description = $(this).find("h2").text();

            var photoItem= '<img src="'+imgSrc+'" width="275" alt="'+title+'"/>';

            $(".feed").append(photoItem);

        }); 
    } 
```

});

现在这给了我这个错误：

```
XMLHttpRequest cannot load http://500px.com/daimz/rss.xml. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:24:03.173

由于 RSS 提要*应该*是有效的 XML，因此您可以使用 jQuery ajax 请求拉取提要，然后将返回的字符串输入到 jQuery 对象中（通过 parseXML()）。然后，您可以像访问任何 DOM 节点一样访问该新对象中的各个节点。你根本不需要 PHP。

*   [http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)
*   [http://think2loud.com/224-reading-xml-with-jquery/](http://think2loud.com/224-reading-xml-with-jquery/)

# plc - 如果布尔变量已更改，如何获得通知？

> ID：15188327
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:18:05.917
> 
> 标签：plc

在 PLC 语句编程语言中，如果布尔变量已从 false 更改为 true 或反之，我通常使用 F_TRIG 或 R_TRIG 来获取通知，但是如果我想在变量已更改时获取通知（对于 false/true 到真假）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:46:59.233

从您的问题中不太清楚您的要求是什么，但是您是否要检查多个布尔值的变化，然后将检查彼此并行。如果要检查多位变量（例如 int）的变化，可以使用存储变量进行检查。PLC 中的代码将取决于您使用的品牌，但 stl 应该看起来像这样，假设变量 X 和 X_Stored 已声明。

```
if X<>X_Stored
{
   X_Stored:=X;
   ...
}; 
```

将 ... 替换为您需要的任何代码。

说明您使用的 PLC 将使这个问题更容易回答。

# string - 获取applescript中字符串中字符后的文本

> ID：15188330
> 
> 赞同：1
> 
> 时间：2013-03-03T17:18:16.883
> 
> 标签：string, macos, text, applescript, character

我有一些文件有一些文本、50 个换行符（不要问），然后还有一些文本。我怎样才能得到换行符之后的文本？Shell 脚本很好。任何答案都将不胜感激，因为我已经坚持了一段时间。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:34:14.337

```
set input to read POSIX file "/tmp/test" as «class utf8»
set d to ""
repeat 50 times
    set d to d & linefeed
end repeat
set text item delimiters to d
text item 2 of input 
```

# sql - SimpleMembership 无法删除约束

> ID：15188332
> 
> 赞同：0
> 
> 时间：2013-03-03T17:18:28.133
> 
> 标签：sql, model-view-controller, simplemembership

**执行时：**

```
ALTER TABLE [dbo].[webpages_UsersInRoles] DROP CONSTRAINT [FK_dbo.webpages_UsersInRoles_dbo.webpages_Membership_UserId] 
```

**我收到一个错误：**

```
'FK_dbo.webpages_UsersInRoles_dbo.webpages_Membership_UserId' is not a constraint.
Could not drop constraint. See previous errors. 
```

**这是我的`webpages_UsersInRoles`桌子：**

```
CREATE TABLE [dbo].[webpages_UsersInRoles] (
    [UserId] INT NOT NULL,
    [RoleId] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC, [RoleId] ASC),
    CONSTRAINT [fk_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]),
    CONSTRAINT [fk_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId])
); 
```

我试着按照这个[答案](https://stackoverflow.com/questions/13012612/webpages-usersinroles-missing)做，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T07:10:37.157

你可以试试这个：

```
[Authorize(Roles = "Admin")]
[HttpPost]
public ActionResult DeleteUser(int id)
{
    var tmpuser = "";
    var ctx = new UsersContext();
    using (ctx)
    {
        var firstOrDefault   = ctx.UserProfiles.FirstOrDefault(us => us.UserId==id);
        if (firstOrDefault != null)
            tmpuser = firstOrDefault.UserName;
    }

    string[] allRoles = Roles.GetRolesForUser(tmpuser);
    Roles.RemoveUserFromRoles(tmpuser,allRoles);

    //Roles.RemoveUserFromRole(tmpuser, "RoleName");

    ((SimpleMembershipProvider)Membership.Provider).DeleteAccount(tmpuser);
    Membership.Provider.DeleteUser(tmpuser, true);
    Membership.DeleteUser(tmpuser, true);

    ctx = new UsersContext();

    return View(ctx.UserProfiles.OrderBy(user => user.UserName).ToList());
} 
```

# jquery - 找出值是否在数组中，然后在 jquery 中删除具有匹配值的 div

> ID：15188333
> 
> 赞同：0
> 
> 时间：2013-03-03T17:18:32.303
> 
> 标签：jquery, arrays

我搜索了很长时间，我一般不擅长数组和函数。

假设我有一个数组：

```
var arr = ["simple", "classic", "pro", "amat"]; 
```

我想要做的是使用 jQuery 删除数组中具有匹配 ID 的 div。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:20:18.130

```
var idSelector = '#' + arr.join(', #'); // "#simple, #classic, #pro, #amat"
$(idSelector).remove(); 
```

文件：

*   [`Array.join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)
*   [ID选择器](http://api.jquery.com/id-selector/)
*   [多重选择器](http://api.jquery.com/multiple-selector/)
*   [`.remove()`](http://api.jquery.com/remove)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:20:40.403

这很简单。

```
$(arr).each(function(){
    $("#" + this).remove();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:24:32.303

`**[DEMO](http://jsbin.com/ufuzox/1/edit)**`

```
$.each(arr, function(){
  $('#'+this).remove();
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

> $.each() 函数与 $(selector).each() 不同，后者用于以独占方式遍历 jQuery 对象。$.each() 函数可用于迭代任何集合，无论是对象还是数组。在数组的情况下，回调每次都会传递一个数组索引和一个对应的数组值。（该值也可以通过 this 关键字访问，但 JavaScript 将始终将 this 值包装为一个对象，即使它是一个简单的字符串或数字值。）该方法返回其第一个参数，即被迭代的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T17:26:40.580

示例[http://fiddle.jshell.net/3c2RP/1/](http://fiddle.jshell.net/3c2RP/1/)

html:

```
<div id="simple">simple</div>
<div id="classic">classic</div>
<div id="pro">pro</div>
<div id="amat">amat</div>
<div id="strange">strange</div> 
```

js：

```
$(function(){
    var arr = ["simple", "classic", "pro", "amat"];
    $.each(arr,function(){
        $("#"+this).remove();
    });
}); 
```

# java - 使用 BufferedReader 读取资源

> ID：15188335
> 
> 赞同：16
> 
> 时间：2013-03-03T17:18:44.017
> 
> 标签：java, jar, resources, bufferedreader

我正在尝试读取将包含在 .JAR 中的资源，但我得到了以下内容的 nullPointer：

```
bReader = new BufferedReader(new InputStreamReader(
                  this.getClass().getResourceAsStream("resources/" + fileName))); 
```

但是，使用文件可以正常工作..

```
bReader = new BufferedReader(new FileReader(new File("resources/" + fileName))); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-03T17:21:39.657

假设您的 IDE/Maven/ANT/Gradle/build 过程将在根目录的 jar 中包含“资源”的内容，请尝试在“/”中找到它。

```
bReader = new BufferedReader(new InputStreamReader(
                           this.getClass().getResourceAsStream("/" + fileName))); 
```

**更新：**

确保将“资源”文件夹配置为资源文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-24T18:41:37.980

这是一个 Spring 框架项目吗？尝试：

```
BufferedReader bufferedReader = new BufferedReader(
          new InputStreamReader(new ClassPathResource("XML_Request.xml").getInputStream())); 
```

要加载的资源位于 src/main/resources 目录中：

[![要加载的资源位于 src/main/resources 目录中](../Images/3454f511ef219c15c905a85ff9bf7333.png)](https://i.stack.imgur.com/CR7Wq.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T03:48:46.290

将“资源”文件夹设置为资源文件夹。试试这个代码：

```
bReader = new BufferedReader(new
         InputStreamReader(getClass().getClassLoader().getResourceAsStream(fileName))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-17T12:51:45.367

与 不同`getClassLoader().getResourceAsStream(filename)`，您使用的版本使用`getClass().getResourceAsStream(filename)`相对于类位置的路径，而不是类路径根。您需要使用绝对路径`getClass().getResourceAsStream("/" + filename)`或使用`ClassLoader`版本。

此外，确保“资源”在您的类路径中（如果您使用 Maven，它应该是相对于您的 pom.xml 的“src/main/resources”）。如果是这样，您实际上不需要在文件名中包含“资源”，因为那是类路径根目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-12T15:11:17.443

这是因为阅读器类和要读取的文件位于不同的包中。当`this.getClass().getRasourceAsStream("resource/file_name")`被调用时，它将搜索当前阅读器类所在的包目录中的资源目录，如果找到，它将搜索“file_name”文件。因此，如果您的文件不存在，它将返回 null。

在这种情况下，您需要相应地从当前文件阅读器类目录返回，然后您必须提供文件的路径。要从我们应该使用的目录返回`../`

例如，如果 Reader 类包 :`package com.abc.util;` 文件存在于 :`com.abc.template;` 那么你应该调用`getResourceAsStream()`如下方法。

```
bReader = new BufferedReader(new InputStreamReader(
                  this.getClass().getResourceAsStream("../template/" + fileName))); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-04T04:57:13.850

`this.getClass().getResourceAsStream("resources/" + fileName)`从类路径`new File("resources/" + fileName)`加载文件作为从您的工作目录（eclipse 中的项目根目录）加载文件。要使前者工作，您需要将包含`resources`dir 的 jar 添加到您的类路径中。

# javascript - Ember.js 应用程序不呈现？

> ID：15188336
> 
> 赞同：0
> 
> 时间：2013-03-03T17:18:44.483
> 
> 标签：javascript, html, ember.js

我刚开始使用 Ember.js，我正在尝试使用它来呈现一个相当简单的模态应用程序。

代码在这里[https://gist.github.com/jhogendorn/5076997](https://gist.github.com/jhogendorn/5076997)

我发现没有错误，但是它没有呈现应用程序。我做错了什么？我正在使用 EmberJS 1.0.0-rc1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:35:55.963

如果您使用的是 ember rc1，您的代码将无法工作，因为您正在尝试使用旧的路由器 API。看看 Ember 的指南。[http://emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/) API 现在看起来很不一样了。我想它不起作用，因为您正在用您的子类覆盖默认路由器，它不使用新的 API。您还可以查看本教程：[http](http://twbrandt.github.com/2013/02/11/Ember-Quick_Start_Guide/) ://twbrandt.github.com/2013/02/11/Ember-Quick_Start_Guide/ 它显示了一个非常基本的示例，我经常看到它被推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:06:17.953

它不呈现的原因是由于 $(document).ready(function() {...}); 你有。Ember 需要在文档加载之前启动。将您的 ember 应用程序从 $(document).ready 函数中取出，它应该会呈现。

除此之外，如前所述，如果您使用 rc1 ，则应该使用[新的路由器 API 。](http://emberjs.com/guides/routing/)

# android - GoogleAccountCredential 是否提供刷新令牌？

> ID：15188338
> 
> 赞同：6
> 
> 时间：2013-03-03T17:18:46.257
> 
> 标签：android, oauth-2.0, credentials, google-drive-api

我打算编写一个 Android 应用程序来从 Google Drive 中获取文件。

如果存储空间很大，下载文件肯定需要几个小时。在这种情况下，我需要刷新令牌来完成该过程。据我所知，`GoogleAccountCredential`没有提供任何获取刷新令牌的方法。

我想将令牌和刷新令牌发送到网络服务，以便它代表我的应用程序下载文件并将其存储在服务器中。

有没有办法从中获取刷新令牌`GoogleAccountCredential`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:10:47.610

我不知道 android 但在 java 中如果你想获得刷新令牌，你必须请求 GoogleAuthorizationaflow 的离线访问类型..

像
flow =new GoogleAuthorizationCodeFlow.Builder(httpTransport, jsonFactory, clientSecrets, SCOPES) .setAccessType("offline").setApprovalPrompt("force").build();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T09:11:40.820

是的，它确实。您需要请求服务器端范围来获取刷新令牌：

```
String MY_SCOPE = ""; // put your score here, e.g. "https://www.googleapis.com/auth/gmail.readonly"
String CLIENT_ID = "1234567890-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com";
String SERVER_SCOPE = "oauth2:server:client_id:" + CLIENT_ID + ":api_scope:" + MY_SCOPE;

GoogleAccountCredential cred = new GoogleAccountCredential(context, SERVER_SCOPE).setSelectedAccountName("hello@gmail.com");
cred.getToken(); 
```

# content-management-system - 如何使用面板在虚拟主机服务器上安装 Umbraco 扩展？

> ID：15188341
> 
> 赞同：2
> 
> 时间：2013-03-03T17:18:51.310
> 
> 标签：content-management-system, umbraco, add-on

我已经在 Umbraco 4.11 中成功创建了 CMS 并将其托管在网络托管服务器上。Web 托管 (arvixe) 面板具有具有 Umbraco 4.9 的 Web 应用程序库。所以我需要请求安装 4.11 版本。

现在，在他们安装它之后，我再次卡住了，因为无法将 uComponents 安装到 Umbraco。我使用 webMatrix 在本地服务器上安装了 uComponenets，但在虚拟主机面板上却完全不同。

在虚拟主机服务器上制作 Umbraco App 时，有没有人遇到过同样的问题？

如果是，请帮助我完成这些步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:14:42.417

您需要登录并转到开发人员区域，您将在其中找到可以安装 ucomponents 的 Packages 部分。

# c# - 缓存集合的方法

> ID：15188349
> 
> 赞同：1
> 
> 时间：2013-03-03T17:19:27.247
> 
> 标签：c#, silverlight

我的数据库中有表，例如：`Countries`、、、、等等。 所有这些表都有两列：和。在我的应用程序中，用户正在搜索数据。对于一次搜索，它必须获得. 我正在使用实体从表中检索数据。`Cities``Districts``BloodTypes``EyeColors`
`ID``VALUE``VALUE``ID`

我想在应用程序启动时查询一次数据库。我不想将数据存储在客户端机器中。这种情况的最佳方法是什么？我已经阅读了有关独立存储的信息，也阅读了有关[this](http://www.microsoft.com/en-us/download/details.aspx?id=7319)的信息。有什么关于*实体缓存*的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:14:30.593

一个非常快速的解决方案是在查询对象上执行 .ToArray linq 扩展方法。然后执行查询并将结果对象放入一个新数组中。该数组现在在内存中，您可以将其用作缓存

# xcode - 将数组转换为 JSON 文件

> ID：15188357
> 
> 赞同：0
> 
> 时间：2013-03-03T17:20:42.223
> 
> 标签：xcode, arrays, json

我使用 JSONKit 将 .json 文件中的数据转换为 NSMutableArray。如何将 Array 转换回 JSON 数据并将其写入文件？可以使用其他一些套件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:24:08.460

您可以`SBJsonWriter`为此使用类：

```
SBJsonWriter *writer = [SBJsonWriter new];
NSString *jsonString = [writer stringWithObject:yourArray]; 
```

[您可以从Converting NSArray -> JSON -> NSData -> PHP server ->JSON 表示](https://stackoverflow.com/questions/10290767/converting-nsarray-json-nsdata-php-server-json-representation)中找到一些帮助

[SBJsonWriter 嵌套 NSDictionary](https://stackoverflow.com/questions/11765037/sbjsonwriter-nested-nsdictionary/12383548#12383548)

# drools - Drools 时间规则

> ID：15188358
> 
> 赞同：0
> 
> 时间：2013-03-03T17:20:45.450
> 
> 标签：drools, complex-event-processing, drools-fusion

我是 Drools 的新手。如果进程运行时间超过一段时间，我正在尝试生成通知 - 比如说 5 分钟。

为了实现上述目的，我在 DRL 文件中编写了以下代码。但这似乎不起作用。

## .drl 文件

```
declare Message
  @role(event) 
end 

rule "RULE 3" 
 when
   $message: Message(msgtext == "1st message") over window:time( 5m ) from entry-point entryone
 then
    System.out.println("RULE 3 (after 5 min of message event started): " +     $message.getMsgtext());
 end 
```

在上面的`.drl`文件中，我有一个名为`Message`声明的事件。该规则正在检查是否`msgtext`存在`1st message`并且它正在运行 5 分钟 - 如果是这种情况，我必须生成一个通知。在这个例子中，我只是打印结果。

提前致谢。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:39:17.377

要检查的东西很少，

*   将您的入口点名称放在引号中
*   它是否在没有时间限制的情况下工作（即只有消息：Message(msgtext == "1st message")
*   请注意，这是检查是否在过去 5 分钟内添加了消息“第一条消息”
*   确保您处于直播模式

-hth

# .net - 默认 XML 命名空间是否需要前缀？

> ID：15188359
> 
> 赞同：1
> 
> 时间：2013-03-03T17:20:57.900
> 
> 标签：.net, xml, powershell, namespaces

**背景**：我想开发一个 PowerShell 脚本来操作 *.regsvr 文件的内容。这是一个 XML 文件，用于使用 SQL Server Management Studio 导出/导入已注册的 SQL 服务器。这是一篇关于使用 SQL 查询创建文件的[博客文章。](http://sqlbg.wordpress.com/2010/11/02/sql-server-centralized-managementregistering-multiple-instances-at-once/)我想做的不仅仅是创建一个文件，我还想操作现有的导出文件。

**问题**：我遇到的问题是我无法弄清楚如何使用默认名称空间读取 XmlDocument。

我无法按预期工作的命名空间示例：

```
$xmlstring = @'
<?xml version="1.0"?>
<model xmlns="http://schemas.serviceml.org/smlif/2007/02">
  <identity/>
</model>
'@

$doc = new-object System.Xml.XmlDocument
$doc.LoadXml($xmlstring)

$nsmgr = new-object System.Xml.XmlNamespaceManager($doc.NameTable)
$nsmgr.AddNamespace([String]::Empty, "http://schemas.serviceml.org/smlif/2007/02")
$nsmgr.PushScope()

$xpath = "/model"
$doc.SelectNodes($xpath, $nsmgr).count 
```

输出为 0，但预期为 1。

这有效：

```
$xmlstring = @'
<?xml version="1.0"?>
<model xmlns="http://schemas.serviceml.org/smlif/2007/02">
  <identity />
</model>
'@

$doc = new-object System.Xml.XmlDocument
$doc.LoadXml($xmlstring)

$nsmgr = new-object System.Xml.XmlNamespaceManager($doc.NameTable)
$nsmgr.AddNamespace("x", "http://schemas.serviceml.org/smlif/2007/02")
$nsmgr.PushScope()

$xpath = "/x:model"
$doc.SelectNodes($xpath, $nsmgr).count 
```

并给我一个输出 1。如何指定默认命名空间并避免在 xpath 查询中使用前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:57:24.877

即使以 URL 形式指定，XML 命名空间也不必存在。它们主要只是唯一的名称。您已经找到了访问默认命名空间中元素的正确方法——您必须指定一个前缀。我使用“dns”作为前缀来表示默认命名空间。

# quickbooks - BillQuery 用于在 Intuit 中获取未授权错误的账单

> ID：15188364
> 
> 赞同：1
> 
> 时间：2013-03-03T17:21:16.207
> 
> 标签：quickbooks, intuit-partner-platform, intuit

尝试在 Intuit 中使用过滤器时出现“未经授权”错误：

> 异常详细信息：Intuit.Ipp.E​​xception.InvalidTokenException：未经授权

下面的代码用于设置服务上下文：

```
string AppToken = ConfigurationManager.AppSettings["applicationToken"].ToString(CultureInfo.InvariantCulture);
String realmId = HttpContext.Current.Session["realm"].ToString();
String accessToken = HttpContext.Current.Session["accessToken"].ToString();
String accessTokenSecret = HttpContext.Current.Session["accessTokenSecret"].ToString();
String consumerKey = ConfigurationManager.AppSettings["consumerKey"].ToString(CultureInfo.InvariantCulture);
String consumerSecret = ConfigurationManager.AppSettings["consumerSecret"].ToString(CultureInfo.InvariantCulture);
IntuitServicesType intuitServiceType = (IntuitServicesType)HttpContext.Current.Session["intuitServiceType"];

OAuthRequestValidator oauthValidator = new OAuthRequestValidator(accessToken, accessTokenSecret, consumerKey, consumerSecret);
context1 = new ServiceContext(oauthValidator, AppToken, realmId, IntuitServicesType.QBO); 
```

查询最后修改的账单如下：

```
List<Bill> CustomerBills = billQry.ExecuteQuery<Bill>(context1).ToList<Bill>(); 
```

请告诉我，我传递的参数值不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:47:42.650

以下代码 .NET DevKit 代码发送格式错误的请求正文并导致 OAuth 签名错误。这是 DevKit 中的一个错误。

```
BillQuery billQry = new BillQuery();
billQry.LastUpdatedTime = DateTime.Now.AddDays(-20);
billQry.SpecifyOperatorOption(FilterProperty.LastUpdatedTime, FilterOperatorType.AFTER);
billQry.LastUpdatedTime = DateTime.Now; 
billQry.SpecifyOperatorOption(FilterProperty.LastUpdatedTime, FilterOperatorType.BEFORE); 
billQry.PageNumber = 1;
billQry.ResultsPerPage = 15;
billQry.SpecifySortOption(SortProperty.LastUpdatedTime, SortOrderOption.HighToLow);
List<Intuit.Ipp.Data.Qbo.Bill>CustomerBills =billQry.ExecuteQuery<Intuit.Ipp.Data.Qbo.Bill>(context).ToList(); 
```

解决方法是修改下面的示例代码以发出请求并将响应反序列化为 Bill 对象。

[Pastebin 上的示例代码](http://pastebin.com/raw.php?i=LvGY3vAS)

# c# - 删除子抛出异常

> ID：15188369
> 
> 赞同：0
> 
> 时间：2013-03-03T17:21:36.337
> 
> 标签：c#, xpath, html-agility-pack

这段代码给我一个奇怪的异常。`Node "<span class="OrganisationOut"></span>" was not found in the collection`但是当我检查 span 的 outerHTML 时，它的`<span class="OrganisationOut">National Cheng Kung University</span>`. 为什么它试图删除不同的跨度？

```
doc = web.Load(urlTeams);

foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//tr[contains(@id,'Cell')]"))
{
    HtmlNode span = node.SelectSingleNode(".//span");
    lbResults2.Items.Add(span.InnerText);
    lbResults.Items.Add(node.RemoveChild(span).InnerText.Trim());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:30:08.883

由于您在当前节点下递归地获取所有跨度（这就是`//`XPATH 中的意思），您可能会得到一个`span`不是 的孩子`node`，而是一个孙子。

在这种情况下，`node.RemoveChild(span)`如您所见，调用将失败。你想要做的是`span.ParentNode.RemoveChild(span)`.

# javascript - HTML 联系表单无法配置

> ID：15188370
> 
> 赞同：0
> 
> 时间：2013-03-03T17:21:37.410
> 
> 标签：javascript, html

我使用模板来开发网站。里面有一个联系表格，我无法使用。我尝试使用从互联网上找到的来源将其设置为将电子邮件发送到我想要的地址，但无济于事。

这是联系表格页面的来源。

```
<form id="ContactForm">
    <div>
        <div class="wrapper"> <span>Your Name:</span>
            <input type="text" class="input" />
        </div>
        <div class="wrapper"> <span>Your E-mail:</span>
            <input type="text" class="input" />
        </div>
        <div class="textarea_box"> <span>Your Message:</span>
            <textarea name="textarea" cols="1" rows="1"></textarea>
        </div> 
        <a href="#" class="button1" 
            onClick="document.getElementById('ContactForm').submit()">Send</a>
        <a href="#" class="button1" 
            onClick="document.getElementById('ContactForm').reset()">Clear</a>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:38:00.413

php 需要每个表单元素的名称才能正确传递变量，因此您需要在每个输入中放置一个名称标签，例如

```
 <input type="text" name="name" id="id" /> 
```

其次，您需要定义表单操作，如果您要将参数发送到另一个 php 文件，那么您需要将 php 文件源如下：

```
<form  id="ContactForm" method="post" action="path/to/php"> 
```

如果您将参数发送到同一页面，您可以将 pat/to/php 替换为`<?php $_SERVER["PHP_SELF"] ?>`或简单地输入页面名称。

# opencv - 在opencv中使用直方图降噪

> ID：15188373
> 
> 赞同：1
> 
> 时间：2013-03-03T17:22:17.873
> 
> 标签：opencv

我想为 RGB 图像实现一个简单的噪声校正方案。图像在随机位置包含一些垃圾像素。所以，我正在考虑这样做：

1.  分割图像。
2.  计算每个段的直方图。
3.  分析直方图并转储一段直方图分布中可忽略的像素。

我正在使用openCV。我已经实现了第 1 步和第 2 步，但我无法找出每个直方图箱中的像素数。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:48:33.153

为了分析直方图，您必须对其进行一些假设。一个很好的假设是直方图将被粗略地建模为噪声 + 高斯钟形曲线。

看一下这个。

```
http://en.wikipedia.org/wiki/Root-finding_algorithm 
```

找到直方图的导数函数的根将为您提供峰值的位置。然后，您可以找到每个峰的边界，可能通过找到二阶导数函数的根。

在确定直方图峰值的位置和跨度后，您可以将像素分类为信号像素或噪声像素。

# wpf - WPF 键绑定不起作用

> ID：15188375
> 
> 赞同：2
> 
> 时间：2013-03-03T17:22:21.380
> 
> 标签：wpf, vb.net, xaml, key-bindings

已经阅读了十几个关于这个主题的 SO 问题和文章。似乎没有任何效果。这是我的简单系统。一个主要`Window`的，其中有一个`Frame`托管`Page`对象。我的一个`Page`对象中有以下内容：

```
<Page.Resources>
    <RoutedUICommand x:Key="PreviousRecordCommand" Text="Previous Record" />
    <RoutedUICommand x:Key="NextRecordCommand" Text="Previous Record" />

    <CollectionViewSource x:Key="cvsAllOrders" Source="{Binding AllSalesOrders}" />
</Page.Resources>

<Page.CommandBindings>
    <CommandBinding Command="{StaticResource PreviousRecordCommand}" Executed="PreviousRecordCommand_Executed" CanExecute="PreviousRecordCommandBinding_CanExecute" />
    <CommandBinding Command="{StaticResource NextRecordCommand}" Executed="NextRecordCommand_Executed" CanExecute="NextRecordCommandBinding_CanExecute" />
</Page.CommandBindings>

<Page.InputBindings>
    <KeyBinding Command="{StaticResource PreviousRecordCommand}" Gesture="CTRL+LEFT" />
    <KeyBinding Command="{StaticResource NextRecordCommand}" Gesture="CTRL+RIGHT" />
</Page.InputBindings> 
```

代码隐藏有：

```
Private Sub PreviousRecordCommand_Executed(sender As System.Object, e As System.Windows.Input.ExecutedRoutedEventArgs)
    Dim CurView = DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View
    CurView.MoveCurrentToPrevious()
    If CurView.IsCurrentBeforeFirst Then CurView.MoveCurrentToFirst()
End Sub

Private Sub NextRecordCommand_Executed(sender As System.Object, e As System.Windows.Input.ExecutedRoutedEventArgs)
    Dim CurView = DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View
    CurView.MoveCurrentToNext()
    If CurView.IsCurrentAfterLast Then CurView.MoveCurrentToLast()
End Sub

Private Sub PreviousRecordCommandBinding_CanExecute(sender As System.Object, e As System.Windows.Input.CanExecuteRoutedEventArgs)
    Dim MyView = DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View
    e.CanExecute = (MyView IsNot Nothing) AndAlso (DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View.CurrentPosition > 0)
End Sub

Private Sub NextRecordCommandBinding_CanExecute(sender As System.Object, e As System.Windows.Input.CanExecuteRoutedEventArgs)
    Dim MyView = DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View
    e.CanExecute = (MyView IsNot Nothing) AndAlso (DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View.CurrentPosition < DirectCast(Me.Resources("cvsAllOrders"), CollectionViewSource).View.Cast(Of SalesOrderEntryModel.SalesOrder).Count() - 1)
End Sub 
```

我不能让它工作。我也尝试在我的代码隐藏中声明命令。没有任何区别。作为参考，我有几十个文本框和其他控件`Page`，需要这些键在当前焦点所在的任何地方工作。

任何帮助将不胜感激。

# css - 简单的 CSS 问题

> ID：15188376
> 
> 赞同：0
> 
> 时间：2013-03-03T17:22:22.030
> 
> 标签：css, button, width

我在页面中放置了一个 div，或者在页面中放置了任何内容，它会自动将其宽度扩展到末尾，就像我将宽度设置为 100% 一样。显然我需要为这个东西设置一个宽度值（比如 100px），但我只是希望它与内容一样宽，而不是固定的。文本越长，内容应该越宽。我该如何处理？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:37:31.673

默认情况下，宽度`auto`告诉块元素扩展到父元素的整个宽度。您希望或者`display: table`让它`display: inline-block`缩小到其内容的宽度。

您可以`display: table`在此处查看实际操作：

[http://codepen.io/cimmanon/pen/FvGxl](http://codepen.io/cimmanon/pen/FvGxl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:24:12.533

你需要设置：

```
width: auto;
display: inline-block; 
```

# jquery - jquery 自动完成 --- 如果 json 为空？

> ID：15188377
> 
> 赞同：0
> 
> 时间：2013-03-03T17:22:28.520
> 
> 标签：jquery, autocomplete

我有以下 Jquery AutoComplete 文本框的代码

```
$(".autosuggest").autocomplete({
    source: function (request, response) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "AutoCompleteFetchService.asmx/getUserNames",
            data: "{'TextBoxVal':'" + document.getElementById('txtName1').value + "'}",
            dataType: "json",
            success: function (data1) {
                response(data1.d);
            }, 
```

我得到正确的建议。`" No search found"`如果没有返回数据，我正在尝试显示。如果 JSON 为空，则执行以下循环

```
if(typeof (data1.d) == 'undefined')
{
} 
```

但是我如何返回或更改以在建议中显示“未找到数据”？

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:55:36.350

您可以使用`jQuery.isEmptyObject()`检查 json 是否为空，然后返回“未找到数据”

# embedded - 多核模拟器/模拟器建议

> ID：15188378
> 
> 赞同：2
> 
> 时间：2013-03-03T17:22:29.743
> 
> 标签：embedded, arm, multiprocessing, embedded-linux, multicore

只是想知道是否有任何好的模拟器/模拟器可以用来在标准台式电脑（英特尔酷睿 i3、4 GB RAM 等）上模拟多核系统

需要试验：

*   实现 2x2-4x4 基于片上网络的多核系统（例如，内核可以是低端 ARM 内核；同质）
*   性能是一个问题（所以我认为 Qemu 是行不通的）
*   需要在上述内核之上运行 uCLinux/FreeRTOS（或一些占用空间小的操作系统）（使用共享内存/分布式内存/MPI 机制进行实验）
*   看了OVPSim，好像很有意思，有什么缺点吗？
*   模拟器应该很快！因为我将修改内核以执行一些算法。所以当然不是周期准确，但也许指令准确。

最后，一旦模拟完成，我将在 FPGA 上进行测试。

欢迎任何想法！

# android - 如何在android主类的子类中创建警报对话框？

> ID：15188382
> 
> 赞同：1
> 
> 时间：2013-03-03T17:23:19.127
> 
> 标签：android, android-alertdialog

我有一个扩展 MapActivity 的主类，我将在子类中创建警报对话框，但我遇到了 Context 参数错误。这是我的java代码：

公共类主要扩展 MapActivity {

```
private MapView mapView;
private MapController mapController;
private GeoPoint geopoint;

public class MapOverlay extends Overlay {

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapv){

        if(event.getAction()==1){
            GeoPoint p = mapv.getProjection().fromPixels(
                    (int) event.getX(), 
                    (int) event.getY());
            Toast.makeText(getBaseContext(), "Location: " + 
                    p.getLatitudeE6()/1E6 + "," +
                    p.getLongitudeE6()/1E6, Toast.LENGTH_LONG).show();
            AlertDialog ad = new AlertDialog.Builder(this).create();    
            ad.setCancelable(false); // This blocks the 'BACK' button  
            ad.setMessage("Hello World");  
            ad.setButton("OK", new DialogInterface.OnClickListener() {  
                @Override  
                public void onClick(DialogInterface dialog, int which) {  
                    dialog.dismiss();                      
                }  
            });  
            ad.show(); 
        }
        return false;
    }

} 
```

}

错误是：

> 构造函数 AlertDialog.Builder(main.MapOverlay) 未定义！

我将其更改为`getBaseContext()`，但遇到强制关闭错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:37:28.197

您可以`MapView`使用继承的 [`getContext()`](https://developer.android.com/reference/android/view/View.html#getContext%28%29)方法从引用中获取对有效上下文的引用。相关的行将是：

```
AlertDialog ad = new AlertDialog.Builder(mapv.getContext()).create(); 
```

# config - Gnat Ada 编译器安装时出错

> ID：15188384
> 
> 赞同：1
> 
> 时间：2013-03-03T17:23:22.873
> 
> 标签：config, ada, gnat, gnat-gps

我正在尝试为 Ada 编程安装 GNAT 编译器，但是当我启动它时出现以下错误：“无法创建配置目录 C:/users/@#$%@#%#@/.gps/ 正在退出... ”。

有人知道解决方案吗？我尝试了各种各样的东西，没有任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:47:11.357

我在 Windows XP 上安装了 Cygwin，带有来自 GNAT GPL 2012 的 GPS。

如果我第一次`%HOME%`设置`C:\cygwin\users\%USERNAME%`并启动 GPS，GPS 会说它创建了配置目录`C:\cygwin\users\simon\.gps`。如果我不设置`%HOME%`，GPS 会创建配置目录`C:\Documents and Settings\Simon`，看起来是`%HOMEPATH%`. 请注意，GPS 不知道 Cygwin，它是一个 Windows 应用程序并使用您的 Windows 环境变量。

我想知道您是否`%HOME%`（或者可能`%HOMEPATH%`？）设置为不存在的目录？GPS 似乎无法创建中间目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T23:04:20.617

我不是 Ada 奇才，但我记得我也尝试用 Cygwin 安装 Gnat GPS，但遇到了各种各样的问题。最大的问题之一是 64/32 位不兼容，因为 Windows 上的 Gnat 仅在 32 位版本中可用，而 Cygwin 可能在您机器上的 64 位版本中

最后我的解决方案是完全删除 Cygwin 并安装 Ada 使用的系统 Mingw32。

# sql - 你能解释一下为什么这个 INSERT 语句只有在 SELECT 语句失败时才会运行吗？(rails first_or_create)

> ID：15188385
> 
> 赞同：1
> 
> 时间：2013-03-03T17:23:26.343
> 
> 标签：sql, ruby-on-rails, ruby

我正在查看 Rails 指南，并遇到[了关于活动记录的 first_or_create 方法的部分](http://guides.rubyonrails.org/active_record_querying.html#first_or_create)。它指出以下代码：

```
Client.where(:first_name => 'Andy').first_or_create(:locked => false)
# => #<Client id: 1, first_name: "Andy", orders_count: 0, locked: false, created_at: "2011-08-30 06:09:27", updated_at: "2011-08-30 06:09:27"> 
```

将产生以下 SQL：

```
SELECT * FROM clients WHERE (clients.first_name = 'Andy') LIMIT 1
BEGIN
INSERT INTO clients (created_at, first_name, locked, orders_count, updated_at) VALUES ('2011-08-30 05:22:57', 'Andy', 0, NULL, '2011-08-30 05:22:57')
COMMIT 
```

我了解 first_or_create 使用时的作用，我的问题。. .

**从 SQL 语句的角度来看。为什么只有在 SELECT 语句失败时才运行 Insert 语句？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:52:42.557

这就是方法的重点。`first_or_create`将获取第一条记录，如果没有与查询匹配的记录，则创建一条记录。您可以从源代码中看到：

> ```
> # File activerecord/lib/active_record/relation.rb, line 117
> def first_or_create(attributes = nil, options = {}, &block)
>   first || create(attributes, options, &block)
> end 
> ```

该`SELECT`语句查找所有符合该`WHERE`子句的记录，并且仅限于 1 条记录，因此`first`.

如果第一个记录不存在，则创建它，因此是`INSERT`语句和`_or_create`方法名称的一部分。

* * *

对于 SQL 语句本身，简单地调用它确实每次都会创建一条新记录。我认为相反，文档显示了所有可以生成的 SQL，首先要了解的是

`SELECT * FROM clients WHERE (clients.first_name = 'Andy') LIMIT 1`

被查询，如果没有返回，则插入

```
BEGIN
INSERT INTO clients (created_at, first_name, locked, orders_count, updated_at) VALUES ('2011-08-30 05:22:57', 'Andy', 0, NULL, '2011-08-30 05:22:57')
COMMIT 
```

# c - 这个 C 矩阵代码有什么作用？

> ID：15188395
> 
> 赞同：3
> 
> 时间：2013-03-03T17:24:11.630
> 
> 标签：c, matrix

```
int matrix[50][100], a, b, c; 
matrix[a][b] = c; 
```

我真的不明白这段 C 代码做了什么，我需要这样做，这样我才能将它“翻译”成汇编程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:29:24.820

```
int matrix[50][100], a, b, c; 
matrix[a][b] = c; 
```

它创建了 50 个 100 的数组`int`。然后它用 value 初始化第th 数组的`b`第 th 整数。但是你应该初始化,和。否则，由于它们具有自动存储期限，它们的值将是未定义的。`a``c``a``b``c`

```
int matrix[50][100];
int a = 2;
int b = 3;
int c = 4;
matrix[a][b] = c; 
```

这就是我的`gcc`（4.4.4）如何将代码转换为程序集（AT&T 语法）：

```
movl    $2, -4(%ebp)                # a = 2
movl    $3, -8(%ebp)                # b = 3
movl    $4, -12(%ebp)               # c = 4
movl    -4(%ebp), %edx              # %edx = a = 2
movl    -8(%ebp), %eax              # %eax = b = 3
imull   $100, %edx, %edx            # %edx = 100 * a = 100 * 2 = 200
addl    %eax, %edx                  # %edx = %edx + b = 200 + 3 = 203
                                    # Formula: %edx = 100 * a + b
movl    -12(%ebp), %eax             # %eax = c = 4
movl    %eax, -20012(%ebp,%edx,4)   # Access to 203-th element (each of these
                                    # are 4 bytes, ie. sizeof(int) on my 
                                    # computer) and put %eax = 4 in it. 
```

在 C 中，数组确实以[行优先顺序](http://en.wikipedia.org/wiki/Row-major_order)存储。也就是说，在编写`matrix[a][b]`源代码时，您将访问：

```
offset = row*NUMCOLS + column = a*100 + b 
```

这就是汇编代码显示的内容。

# c++ - 如何正确删除 ncurses 中的菜单？

> ID：15188401
> 
> 赞同：2
> 
> 时间：2013-03-03T17:24:45.000
> 
> 标签：c++, menu, window, ncurses

我需要知道从屏幕上删除菜单的正确方法是什么。该菜单发布在我专门为其创建的窗口中，请参见代码：

```
void makeMenu() {
  MENU *menu;
  WINDOW *win;
  ITEM **items;
  int choicesC = 4;

  items = (ITEM**) calloc(choicesC, sizeof (ITEM*));
  for (int i = 0; i < choicesC; i++) {
      items[i] = new_item(choices[i], choices[i]);
  }

  menu = new_menu(items);

  win = newwin(10, 40, 4, 4);
  keypad(win, true);

  set_menu_win(menu, win);
  set_menu_sub(menu, derwin(win, 6, 38, 3, 1));

  set_menu_mark(menu, "*  ");

  box(win, 0, 0);

  post_menu(menu);
  wrefresh(win);

  int c;
  bool continueB=true;
  while ((c = wgetch(win)) != KEY_F(1)  && continueB) {
      switch (c) {
          case KEY_DOWN:
              menu_driver(menu, REQ_DOWN_ITEM);
              break;
          case KEY_UP:
              menu_driver(menu, REQ_UP_ITEM);
              break;

          case 10:
              if (current_item(menu)->index== 3) continueB=false;
              break;
      }
      wrefresh(win);
  }

  unpost_menu(menu);
  for (int i=0; i<choicesC; i++){
      free_item(items[i]);
  }
  free_menu(menu);

  /* I can't figure out which commands to 
     call to instantly delete and redraw the menu
  wclear(win);
  wrefresh(win);
  delwin(win);
  clear();
  refresh();
  */
} 
```

如果我`makemenu()`以这种方式调用然后销毁它，则菜单会在下一次 getch() 调用时消失（例如），我希望它在我销毁它时消失。我应该使用哪些命令？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:57:27.490

好吧，我想通了，我认为这是正确的解决方案。问题是`unpost_menu(*MENU)`只会破坏该菜单的*子窗口*，因此您必须自己删除框架窗口。清理过程如下所示：

```
(...)
unpost_menu(menu);
for (int i=0; i<choicesC; i++){
    free_item(items[i]);
}
free_menu(menu);
wborder(win, ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '); // Erase frame around the window
wrefresh(win); // Refresh it (to leave it blank)
delwin(win); // and delete 
```

之后就没有必要了`refresh()`，除非菜单后面当然有东西。在这种情况下，您需要注意重新粉刷它。

# java - 数据库和服务器 UML

> ID：15188404
> 
> 赞同：1
> 
> 时间：2013-03-03T17:24:55.693
> 
> 标签：java, database, client-server, uml, sequence-diagram

我正在设计一个简单的客户端-服务器系统（JAVA），它在服务器上存储一些信息，我目前正在创建序列图。我的问题是：

在 UML 中，“数据库”对象是否应该被视为与“服务器”对象分开的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:16:34.967

这实际上取决于您想向正在阅读图表的人显示多少信息。

对于经理，您可以显示客户端在服务器中存储信息的图表，而将所有其他细节留在外面。

对于架构师，您可能希望表明信息已被某种应用程序接受，然后将信息存储在数据库中。

对于程序员，您可以展示实现每个步骤的特定类。

所有决定权都在你手里。

# php - 如何在 CakePHP 中格式化这个 JSON 的输出？

> ID：15188407
> 
> 赞同：1
> 
> 时间：2013-03-03T17:25:11.360
> 
> 标签：php, json, cakephp

我正在使用 CakePHP 将 JSONS 发送到我的 Android 应用程序。我目前在我的模型中有这个功能，它可以让我在某个地方的某个半径内获得最近的位置：

```
public function getNearest($lat = 54.980503, $lng = -1.614349, $radius = 25, $max = 30)
{
    $query = "SELECT *, 
             ( 3959 * acos( cos( radians('$lat') ) * cos(radians(`lat`)) 
             * cos(radians(`long`) - radians('$lng') ) 
             + sin( radians('$lat') ) * sin( radians(`lat`) ) ) ) 
             AS distance FROM locations HAVING distance < '$radius' ORDER BY distance LIMIT 0 , {$max}";
    return $this->query($query);        
} 
```

这是我的控制器：

```
class LocationsController extends AppController
{
    public $helpers = array('Html', 'Form');
    public $components = array('RequestHandler');
    public $viewClass = 'Json'; 
    function index()
    {
        $locations = $this->Location->getNearest(); 
        $this->set(compact('locations'));
        $this->set('_serialize', array('locations'));
    }
} 
```

这是它以正常数组格式给我的输出：

```
array(2) 
{ 
    [0]=> array(2) 
    { 
        ["locations"]=> array(9) 
        { 
            ["id"]=> string(1) "1" 
            ["name"]=> string(20) "Newcastle University" 
            ["terrain"]=> string(1) "5" 
            ["difficulty"]=> string(1) "2"
            ["ratings"]=> string(1) "4" 
            ["uid"]=> string(1) "2" 
            ["long"]=> string(8) "-1.61624" 
            ["comid"]=> NULL 
            ["lat"]=> string(7) "54.9787" 
        } 
    [0]=> array(1) 
    { 
        ["distance"]=> string(19) "0.14548355269404845" 
    } 
 } 
 [1]=> array(2) 
 { 
    ["locations"]=> array(9) 
    {
        ["id"]=> string(1) "2" 
        ["name"]=> string(10) "Vale House" 
        ["terrain"]=> string(1) "4" 
        ["difficulty"]=> string(1) "3" 
        ["ratings"]=> string(1) "4"
        ["uid"]=> string(1) "2" 
        ["long"]=> string(8) "-1.58939" 
        ["comid"]=> NULL 
        ["lat"]=> string(7) "54.9849" 
    } 
    [0]=> array(1) 
    { 
        ["distance"]=> string(18) "1.0352356381517442" } 
    }
} 
```

如果我在 CakePHP 中打开 JSONView 类，我会得到：

```
{
   "locations":[
      {
         "locations":{
            "id":"1",
            "name":"Newcastle University",
            "terrain":"5",
            "difficulty":"2",
            "ratings":"4",
            "uid":"2",
            "long":"-1.61624",
            "comid":null,
            "lat":"54.9787"
         },
         "0":{
            "distance":"0.14548355269404845"
         }
      },
      {
         "locations":{
            "id":"2",
            "name":"Vale House",
            "terrain":"4",
            "difficulty":"3",
            "ratings":"4",
            "uid":"2",
            "long":"-1.58939",
            "comid":null,
            "lat":"54.9849"
         },
         "0":{
            "distance":"1.0352356381517442"
         }
      }
   ]
} 
```

如您所见，其中有很多不必要的字符串，例如，为什么有 3 个位置？为什么距离是分开的？

如果输出可以遵循以下原则，那就太好了：

```
{
    "locations":
    [{
            "id":"1",
            "name":"Newcastle University",
            "terrain":"5",
            "difficulty":"2",
            "ratings":"4",
            "uid":"2",
            "long":"-1.61624",
            "comid":null,   
            "lat":"54.9787"
            "distance":"0.14548355269404845"
    },
    {
            "id":"2",
            "name":"Vale House",
            "terrain":"4",
            "difficulty":"3",
            "ratings":"4",
            "uid":"2",
            "long":"-1.58939",
            "comid":null,
            "lat":"54.9849"
            "distance":"1.0352356381517442"
    }

   ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:49:34.070

正如@j0k 提到的，`*`在 SQL 语句中使用是“从数据库表中选择所有列”。因为“距离”是一个计算字段，它*不是*特定表的“部分”，因此不以“位置”为前缀。CakePHP 会将这些字段包含在结果集中的一个单独的“键”中。但是，重写该结果数组的结构应该不难。

**为什么有3个位置？** 因为您要求数据库在查询中返回*“25 半径内最多 30 个位置”* *（尽管我在您的示例中只看到*两个）*

**note** 您正在使用自定义查询，但不要转义/清理您的值。当使用自定义查询时，CakePHP 不会为您执行此操作，允许 SQL 注入。请小心处理！请注意，CakePHP*确实*支持准备好的语句（[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#prepared-statements](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#prepared-statements)）

最好的选择是将您的查询重写为标准的 CakePHP `find()`。您可能需要创建一些 virtualFields 才能工作；[http://book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

我现在不在电脑旁，但是如果您需要其他示例，我也许可以写一些东西

# android - Android的ListView中单行中的多个数据对象？

> ID：15188409
> 
> 赞同：0
> 
> 时间：2013-03-03T17:25:23.077
> 
> 标签：android, listview

示例数据集：“A”、“B”、“C”、“D”

我想显示 ListView 像： `"A"  | "B" | "C"`

我不想在多列中显示“A”的详细信息。我想每行显示 3 个项目，而不是 1 个。我不想使用 GridView。

目前我已经成功地做到了这一点。

我用：

```
public int getCount() {
    if(dataSource!=null){
        return (int) Math.ceil((double)dataSource.size()/3.0f);
    }
    return 0;
} 
```

在 getView 部分，我使用 position*3 来获取接下来 3 个项目的第一个位置，并相应地创建视图 (i+1,i+2)。它完美地工作。除了，只绘制了部分列表。滚动条是正确的，它表明我可以滚动更多，但是在绘制列表的一半之前，突然它没有绘制下半部分并且滚动条只是触及底部。

所以，我除以 3 正在毁掉一些东西。如果我不将计数除以 3，所有项目都会被绘制，但滚动条显示的实际高度是实际高度的 3 倍（因为我在 1 行中绘制 3 个项目而不是3 行。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:47:56.707

问题是在 getView() 函数中没有正确应用总行数。现在它起作用了。感谢@scompt.com

# eclipse - 在服务器选项卡中找不到探索选项 (Eclipse Juno SR2)

> ID：15188411
> 
> 赞同：0
> 
> 时间：2013-03-03T17:25:24.810
> 
> 标签：eclipse, eclipse-juno

我下载了新的 Eclipse Juno SR2。在“服务器”选项卡中创建服务器后，我找不到“探索”选项（当您单击服务器名称并使用鼠标右键时）。顺便说一下，它是一个 JBoss 7.1 服务器。有人知道“探索”选项是否已被删除，还是有其他方法可以访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:16:36.050

我找不到探索，但我可以使用“显示”>“文件浏览器”来实现相同的目的。

# apache - 拆分 apache2 日志并移动它们

> ID：15188417
> 
> 赞同：1
> 
> 时间：2013-03-03T17:25:50.143
> 
> 标签：apache

我有一个虚拟主机，它创建以下 access.log：

```
 CustomLog /home/rimmer/dev/fdom/logs/access.log fdom 
```

但是，我想做的是让它将日志拆分为 5 分钟增量并将每个旧日志移动到`/home/rimmer/dev/fdom/logs/complete/access.log-identifier_to_avoid_duplicity`

我怎样才能做到这一点？我想我需要使用`rotatelogs`，但我不确定如何使用。

**编辑：**为了澄清，我希望日志是这样的：

```
/logs/complete/access.log-17:00-17:05
/logs/complete/access.log-17:05-17:10
/logs/complete/access.log-17:10-17:15 
```

虽然正在记录的当前日志，因为 5 分钟的增量尚未结束，但将是正常日志：

```
/logs/access.log 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:16:44.927

您应该尝试使用[cronolog](http://cronolog.org/features.html)。它是一个外部工具。在 debian 安装中，它可以通过简单的 apt-get 获得。

你最终会得到类似的东西（管道 | 非常重要）：

```
CustomLog "|/usr/sbin/cronolog --period='5 minutes' /home/rimmer/dev/fdom/logs/complete/%Y/%m/%d/access.log-%H-%M.log" 
```

# javascript - 默认音频播放器不会更新？

> ID：15188420
> 
> 赞同：0
> 
> 时间：2013-03-03T17:26:13.807
> 
> 标签：javascript, html

所以我的音频播放器进度条保持在 0，如果我使用 javascript 来操作歌曲，歌曲的长度也会显示在 0:00。我怎样才能使进度条自行更新，并正确显示播放歌曲的长度。

```
<!doctype HTML>
<html>
<head>
<meta charset="windows-1250">
<title>Aljaževa stran</title>
<link rel="stylesheet" href="css/stil.css">
<script>
    var audioElement = document.createElement('audio');
    function init(){
        audioElement.setAttribute('src', 'Rhythm_is_a_dancer.ogg');
    }
</script>
</head>
<body onload="init()">
    <audio controls="controls"></audio>
</body>
</html> 
```

歌曲唱到一半 -> ![](../Images/34e6a78c44653e995302fa666ab2f847.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:31:35.837

给`audio`标签一个 id 并执行以下操作：

```
var audioElement = document.getElementById('audio'); 
```

而不是这个：

```
var audioElement = document.createElement('audio'); 
```

您无需创建新元素，而是需要针对标记中已有的元素。

# shell - shell 如何识别其工作之一的 SIGINT

> ID：15188421
> 
> 赞同：1
> 
> 时间：2013-03-03T17:26:38.730
> 
> 标签：shell, signals

如果我们从 shell 启动一个前台进程，并使用 ctrl-c 向它传递一个它不处理并因此退出的 SIGINT，那么 shell 如何知道该进程是否被 SIGINT 杀死。我的假设是该进程不会通过调用 exit 进入僵尸状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:50:03.160

shell 使用来自`wait(2)`家庭的函数来等待孩子被杀死/终止，并检索杀死它的信号（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:46:56.850

不处理信号的应用程序实际上会执行默认处理程序（在 的情况下会杀死应用程序`SIGINT`）。将信号传递给应用程序并调用处理程序（无论是默认的还是由应用程序设置的）由操作系统处理，因此操作系统可以注意到哪个信号杀死了应用程序，例如相应地设置退出代码。shell 只显示退出代码，但它是设置它的操作系统。

# regex - nginx server_name 指令中使用的正则表达式

> ID：15188424
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:26:50.987
> 
> 标签：regex, nginx

我可以得到一些帮助来解释 nginx 中使用的正则表达式吗`server_name`？该指令是：

```
server_name (?<account>.+)\.mydomain\.com$ 
```

我不明白第一个的意思`?`。另外，我如何扩展它以匹配`*.mydomain.com`除了`web3.mydomain.com`. IE

```
this.mydomain.com 
```

应该匹配，但是：

```
web3.mydomain.com 
```

不应该匹配。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:47:25.607

`?<account>`只是[命名捕获组](http://perldoc.perl.org/perlretut.html#Named-backreferences)的一种方式。因此，在内部 ngix 可能会`.+`使用名称“account”而不是“capture group #1”来引用。

> 另外，我如何扩展它以匹配 *.mydomain.com 除了 web3.mydomain.com

您可以使用[否定的前瞻断言](http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind)：

```
server_name (?!web3\.)(?<account>.+)\.mydomain\.com$ 
```

该`(?!web3\.)`部分检查字符串是否以 if 开头，`web3.`如果是，则整个表达式不匹配。

但是前瞻不是很有效。也许您只是将 ngix 配置为首先查找匹配项，`web3.mydomain.com`如果不匹配，请尝试更通用的表达式？

# c - 将变量传递给数组维度错误

> ID：15188426
> 
> 赞同：1
> 
> 时间：2013-03-03T17:26:55.917
> 
> 标签：c

我在我的程序中使用了`lenA`和类型。当我将此变量传递给 or时，显示此错误： `lenB``int``consensus_a[]``consensus_b[]`

```
expression must have a constant value. 
```

我如何将这些变量（`lenA`或`lenB`）传递给 char`consensus_a[]`或`consensus_b[]`.

我的程序的一小部分：

```
 int lenA=10, lenB=15;
    char consensus_a[lenA],consensus_b[lenB]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:35:29.893

您可能正在运行不符合 C99 的编译器（可能是因为它比 C99 更旧）（如前所述，代码应该使用符合 C99 的编译器进行编译）。

使用这些编译器，对于表单中的数组

```
char a[x]; 
```

`x`需要保持不变。

**你可以使用`const`：**

```
const int lenA=10, lenB=15;
char consensus_a[lenA],consensus_b[lenB]; 
```

**或者`enum`：**

```
enum
{
  lenA = 10,
  lenB = 15
};
char consensus_a[lenA], consensus_b[lenB]; 
```

**或者`#define`：**

```
#define lenA 10
#define lenB 15
char consensus_a[lenA], consensus_b[lenB]; 
```

**或者`malloc`（如果您不希望它们保持不变）：**

```
char *consensus_a = malloc(lenA),
     *consensus_b = malloc(lenB); 
```

从技术上讲，它将是：

```
char *consensus_a = malloc(lenA*sizeof(char)),
     *consensus_b = malloc(lenB*sizeof(char)); 
```

but`sizeof(char)`是 1，因此不需要包含该术语。

**使用时`malloc`，请记住`free`在使用后也将它们：**

```
free(consensus_a);
free(consensus_b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:31:15.067

你的编译器抱怨你试图声明一个可变长度的数组。对于不符合 C99 标准或更高版本的编译器，这是不可能的。使用常量值而不是`lenA`/ `lenB`。

# django - 如何使用基于类的视图渲染多个对象

> ID：15188427
> 
> 赞同：0
> 
> 时间：2013-03-03T17:27:04.917
> 
> 标签：django, django-class-based-views

我尝试使用基于类的视图渲染多个对象，但出现错误。

这是我的代码：

```
class AssociatedList(WizardRequiredMixin, TemplateView):
    template_name = "profile/associated_accounts.html"

    def get_context_data(self, **kwargs):
        context = super(AssociatedList, self).get_context_data(**context)
        all_envelopes = Envelope.objects.filter(
            user=request.user).exclude_unallocate()
        free_limit = account_limit(request, 15, all_envelopes)
        facebook = FacebookProfile.user_profiles(request.user)
        google = GoogleProfile.user_profiles(request.user)
        twitter = TwitterProfile.user_profiles(request.user)

        context.update = ({
            'facebook': facebook,
            'google': google,
            'twitter': twitter,
            'free_limit': free_limit,
        })
        return context 
```

**错误：**

```
 local variable 'context' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:33:27.217

我总是`get_context_data`通过在函数开头调用`super`然后附加上下文来覆盖 -

```
def get_context_data(self, *args, **kwargs):
    context = super(AssociatedList, self).get_context_data(*args, **kwargs)
    all_envelopes = Envelope.objects.filter(
        user=self.request.user).exclude_unallocate()
    free_limit = account_limit(self.request, 15, all_envelopes),
    facebook = FacebookProfile.user_profiles(self.request.user),
    google = GoogleProfile.user_profiles(self.request.user),
    twitter = TwitterProfile.user_profiles(self.request.user),

    context.update({
        'facebook': facebook,
        'google': google,
        'twitter': twitter,
        'free_limit': free_limit,
    })
    return context 
```

这是[此处](https://docs.djangoproject.com/en/1.5/topics/class-based-views/generic-display/#adding-extra-context)文档中使用的模式。

更新

您刚刚添加的错误表明您的课程有错误。听起来您需要定义`queryset`属性或`model`属性。

您继承的`ListView`类要求您定义 View 返回的模型（即`YourModel.objects.all()`）。或者要返回的特定查询集（例如`YourModel.objects.filter(your_field=some_variable)`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:39:48.403

`model`因为这是一个 ListView，所以您需要用 a或告诉它您要列出的内容`queryset`。在这种情况下，您不想使用 ListView，因为您正在覆盖`get_context_data`，因此您可能应该使用 TemplateView 或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:46:39.570

尝试这样的事情：

```
class AssociatedList(WizardRequiredMixin, ListView):
    template_name = "profile/associated_accounts.html"
    model = Envelope 

    def get_queryset(self):
        return Envelope.objects.filter(user=self.request.user).exclude_unallocate()

    def get_context_data(self, **kwargs):
        context = super(AssociatedList, self).get_context_data(**kwargs)
        context.update({
            'facebook': FacebookProfile.user_profiles(self.request.user),
            'google': GoogleProfile.user_profiles(self.request.user),
            'twitter': TwitterProfile.user_profiles(self.request.user),
            'free_limit': account_limit(self.request, 15, context['envelope_list']),
        })
        return context 
```

您不需要具有查询集的模型，但定义它是一种好习惯。在模板中使用 object_list 或信封列表而不是 all_envelopes，你应该很高兴。

PS [http://ccbv.co.uk/](http://ccbv.co.uk/)关于 CBV 的良好知识来源。

# objective-c - 动画不规则大小的图像

> ID：15188431
> 
> 赞同：0
> 
> 时间：2013-03-03T17:27:25.877
> 
> 标签：objective-c, ios5, core-animation

动画不规则形状的图像

有没有办法将锚点设置为我正在制作动画的一组图像的中心？

图像的高度或宽度不同，因此当它们制作动画时，由于帧没有正确排列，动画会很跳跃。如果他们被锚定在中心，他们会排队。那可能吗？

我厌倦了使用 setAnchorPoint 属性，但我的动画从未出现。如果我用那个。

帧的宽度和高度是最大动画帧的最大尺寸。在注释掉的代码中，锚点是框架宽度和高度的一半。

```
CGRect frameABDG = CGRectMake(8, 78, 58, 113);
myAni = [[UIImageView alloc] initWithFrame:frameABDG];
    //[myAni.layer setAnchorPoint:CGPointMake(29, 56.5)];
    myAni.animationImages = [NSArray arrayWithObjects:
                               [UIImage imageNamed:@"frame_1.png"],
                               [UIImage imageNamed:@"frame_2.png"],
                               [UIImage imageNamed:@"frame_3.png"],
                               [UIImage imageNamed:@"frame_4.png"], nil];
    myAni.animationDuration = 1.0;
    myAni.animationRepeatCount = 0;
    [myAni startAnimating];
    [self.view addSubview:myAni]; 
```

# git - Git PowerShell Cmdlet 将 git 信息作为对象返回

> ID：15188433
> 
> 赞同：13
> 
> 时间：2013-03-03T17:27:29.767
> 
> 标签：git, powershell

是否有任何用于与 Git 交互的 PowerShell Cmdlet？特别是'git log'。所有这些正则表达式解析都被包子麻木了。也许随着微软最近对 Git 的兴趣，有人正在使用 libgit2sharp 来解决这个问题？我知道 posh-git，但我认为它没有添加任何 cmdlet 来将 git 信息作为对象返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:43:01.860

`Pit`( [https://github.com/manojlds/pit](https://github.com/manojlds/pit)`git status` ) 对and有一些基本的支持`git log`。分别使用`Get-GitStatus`和`Get-GitLog`cmdlet。它非常简单，处于非常早期的阶段，所以会喜欢一些建议。

# webgl - WebGL texture2DLod 替代方案？

> ID：15188434
> 
> 赞同：0
> 
> 时间：2013-03-03T17:27:33.263
> 
> 标签：webgl, textures, fragment-shader

我正在片段着色器上编写纹理图集，我真的需要使用 texture2DLod 才能在不同的 mip 级别正确渲染纹理。我刚刚发现WebGL 只支持顶点着色器上的texture2DLod。我有什么方法可以访问片段着色器上的 texture2DLod 吗？也许我可以使用一个自定义函数来做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:13:24.483

只需使用 texture2D 并将第三个参数设置为您要使用的 lod：

```
gl_FragColor = texture2D(map, uv, lod) 
```

# php - 如何使用 php 和 mySQL 每周回显一次随机数据库字段？

> ID：15188435
> 
> 赞同：0
> 
> 时间：2013-03-03T17:27:44.667
> 
> 标签：php, mysql

可悲的是，谷歌并没有太多帮助。我在下面有一些伪代码，可以让您了解我想要实现的目标：

```
if ($time == one week) {
  $result = mysql_query("SELECT * FROM table RANDOMLY,$connection");
  echo $result[0];
} 
```

我知道我应该使用 mysqli，但我正在增强现有（老化）系统。我将来会使用 mysqli，所以如果你能给我使用 mysql 的解决方案，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:31:05.423

我不认为它可以用一个单一的声明来完成。

我最好的猜测是使用[`mysql_list_tables`](http://php.net/manual/en/function.mysql-list-tables.php)，从该列表中选择一个随机条目并从那里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:31:43.280

可能会生成一个介于 1 和 的值之间的随机数`SELECT Count(ID) from table`。然后你有了你想要输出的值的索引，你可以简单地为它运行一个 SELECT 语句；并输出！:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T17:38:37.917

```
if ($time == one week) {
        $result = mysql_query("SELECT * FROM table RANDOMLY,$connection");
            echo $result[0];
} 
```

尝试这个：

```
$weekNumber = date("W");

$result = mysqli_query("SELECT * FROM table RANDOMLY WHERE weeknumber = '\"$weekNumber\"', $connection");

echo $result[0];
} 
```

当然，您需要`weeknumber`提前在表中设置一个名为 1 到 52 的列。

正如其他人指出的那样，您不应该使用 mysql_* 任何东西。我将其更改为 mysqli_query。

# android - Android 应用程序 - 与 PC 应用程序的通信

> ID：15188436
> 
> 赞同：2
> 
> 时间：2013-03-03T17:27:53.943
> 
> 标签：android, communication

我有以下情况：

在 PC 上，我将运行一个程序：java 或 .net，尚未决定。当 PC 上发生某个事件时，我想通知 android 设备。

我想要一个尽可能独立和可靠的解决方案。

我认为在 PC/Android 上打开服务器是不可能的，因为用户可能在路由器后面或在 GSM 互联网上（据我所知，它无法打开端口作为服务器）

我现在的解决方案是在互联网上安装一个 Web 服务器并让它处理这项工作，但我不想使用它，因为检查之间的延迟应该在 5 秒左右，我预计会有大约 2 -3k 用户同时，这可能会知道一个普通的网络服务器。

那么，有什么想法可以进行这种交流吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:45:02.057

您可以考虑选择蓝牙客户端服务器应用程序，因为 PC 和 Android 设备通常具有蓝牙。您将在 PC 上运行 Java 服务器，在设备上运行 Android 客户端。查看这篇文章：[通过蓝牙将文本从 Java 服务器发送到 Android 客户端](https://stackoverflow.com/questions/10929767/send-text-through-bluetooth-from-java-server-to-android-client)

您可以通过使用 REST API 和 JSON 创建故障转移机制来处理蓝牙不可用的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:51:46.483

如果您已经是 Web 开发人员，我认为创建一个基于 HTTP 的轻量级 REST 或 JSON 服务将是一个很好的解决方案。您已经说过您不想这样做，这留下了滚动您自己的客户端/服务器设置的选项。

在 Android 方面，一种方法是使用 TCP 套接字。您可以在此处了解有关它们的更多信息：http: [//developer.android.com/reference/java/net/Socket.html](http://developer.android.com/reference/java/net/Socket.html)

# javascript - 如何使用 JavaScript 按字段的值对对象数组进行排序？

> ID：15188439
> 
> 赞同：1
> 
> 时间：2013-03-03T17:27:59.767
> 
> 标签：javascript, sorting

鉴于以下情况：

```
var array = [{"name":"zoe", "hotdogs":5},{"name":"april", "hotdogs":5},{"name":"ryan", "hot dogs":8}] 
```

如何使用 JavaScript 按名称对数组元素进行排序？

```
var array = [{"name":"april", "hotdogs":5},{"name":"ryan", "hotdogs":8},{"name":"zoe", "hotdogs":5}] 
```

有没有办法应用一些函数来对对象进行排序？是否有有助于提高性能的辅助库？

我尝试了以下方法：

```
array.sort(function(a, b) {
    return a.name > b.name
}); 
```

但是当我尝试将其打印出来时，它似乎对结果数组没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:36:35.347

使用`.localeCompare()`.

```
array.sort(function(a, b) {
    return a.name.localeCompare(b.name)
}); 
```

*   [MDN`.localeCompare()`文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:31:46.947

该函数应该返回整数，就像 C strcmp 一样，所以这样做：

```
if a.name > b.name {
  return 1;
} else if ( a.name == b.name) {
  return 0;
}
return -1 
```

# php - 我正在尝试使用 PHP 向 Javascript（谷歌地图）添加标记，但它没有按照我的方式工作

> ID：15188440
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:28:00.160
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我正在尝试使用 PHP 添加使用 GET 的自定义标记。我可以很好地进入 if 语句并加载地图，但这不会添加标记，我不熟悉 Javascript 我只是使用文档来做我需要做的事情。

它里面`autolocategmap.js`只包含 Javascript 来初始化地图并使用地理定位来查找用户，它工作得很好，唯一的问题是标记没有出现在加载或刷新或任何东西上，我什至不确定我是否可以附加这个额外的只需包含一点脚本`<script>custom marker</script>`，任何信息都会非常感谢。

```
 <?php
    /* Include header and config and set variable*/
    require_once('config.inc.php');
    require_once($rootdir . $dirsubfolder . 'navbar.php');
    $route = $_GET['route'];
?>

<?php
/* User wants to retrieve their route */
if ((isset($route)) && (strcmp($route, "sunauto") == 0)) { 
?>
<script src="js/autolocategmap.js"></script>
<script>
    addMarker('56.742111','-111.481753','Stop 3', 'Arrives at: 6:00am');
</script>
<?php
}
?> 
```

自动定位地图.js：

```
 /**
  * Basic Map
  */

$(document).ready(function(){

 var map = new GMaps({
    div: '#gmap',
   lat: 56.744901,
   lng: -111.473049,
    zoom: 16,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
    },
    panControl : false,
  });

    GMaps.geolocate({
  success: function(position) {
    map.setCenter(position.coords.latitude, position.coords.longitude);
  },
  error: function(error) {
    alert('Geolocation failed: '+error.message);
  },
  not_supported: function() {
    alert("Your browser does not support geolocation");
  }
});

$(window).resize(function () {
   var h = $(window).height(),
   offsetTop = 150; // Calculate the top offset

   $('#gmap').css('height', (h - offsetTop));
   }).resize();
});

function addMarker(lat,lng,title,window){
   map.addMarker({
         lat: lat,
         lng: lng,
         title: title,
         infoWindow: window

      });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:14:40.657

```
function show_map() {
    var myOptions = {
        zoom: 10,
        center: new google.maps.LatLng(51.477118, -0.000732),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);
    var checkCoords = new Array();
    checkCoords[0] = addMarker(51.477118, -0.000732, 'Royal Observatory, Greenwich, London', map);
    checkCoords[1] = addMarker(38.92126, -77.066442, 'US Naval Observatory, Washington, DC', map);
    checkCoords[2] = addMarker(48.853499, 2.348090, 'Notre Dame Cathedral, Paris', map);
}

function addMarker(lat, lng, title, map) {
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(lat, lng),
        title: title
    });
    marker.setMap(map);
    return (lat + ',' + lng);
}

show_map(); 
```

好的，将它用于您的 js 文件。它是直接的 javascript，没有 jQuery，但它可以满足您的需求。然后，您可以随心所欲地玩它。

至于多个标记。有很多方法可以通过从任何来源加载来处理它们。

也许一个不错的选择是让 php 创建一个 javascript 可以读取然后循环的 json 提要。

# python - 分离的 SQLalchemy 会话不能延迟加载 backref 对象

> ID：15188444
> 
> 赞同：2
> 
> 时间：2013-03-03T17:28:34.410
> 
> 标签：python, memcached, sqlalchemy, flask-sqlalchemy

我正在尝试在 sqlalchemy 和我的 postgres DB 之间添加一个 pylibmc memcached 层。[这篇文章](http://www.braindonor.net/projects/sqlalchemy-and-memcached/151/comment-page-1/#comment-3336)谈到了如何做到这一点。但我也想要反向引用（用于从一到多的关系），所以我修改了该帖子的 user_classes.py 来测试它。

我让 UserStatus 从 database.MemcachedORMObject 继承，并在 UserTable.mapper 中添加了一个 backref。但是我在尝试访问反向引用时收到“DetachedInstanceError：父实例未绑定到会话；属性‘用户’的延迟加载操作无法继续”。我正在使用 Flask-SQLAlchemy==0.16、SQLAlchemy==0.8.0b2 和 pylibmc==1.2.3。

```
class UserStatus(database.MemcachedORMObject):                                                      
    def __init__(self, name):                                                                      
        self.name = name                                                                            

UserStatusTable = Table('user_status', METADATA, \                                                  
    Column('user_status_id', Integer, primary_key=True),                                            
    Column('name', String)                                                                            )                                                                                                  
UserStatusTable.mapper = mapper(UserStatus, UserStatusTable)                                        
UserStatusTable.mapper.compile()                                                                    

class User(database.MemcachedORMObject):                                                            
    def __init__(self, name, email, password, user_status_id):                                      
        self.name = name                                                                            
        self.email = email                                                                          
        self.password = password                                                                    
        self.user_status_id = user_status_id                                                        

UserTable = Table('user', METADATA, \                                                              
    Column('user_id', Integer, primary_key=True),                                                  
    Column('name', String),
    Column('email', String),                                                                        
    Column('password', String),                                                                    
    Column('user_status_id', Integer),                                                              
    ForeignKeyConstraint(['user_status_id'], ['user_status.user_status_id'])                          )                                                                                                  
UserTable.mapper = mapper(User, UserTable,
  properties = { 'user_status': relation(UserStatus, backref='user', lazy=False)})                
UserTable.mapper.compile() 
```

尝试访问 backref 时出错：

```
In [14]: from user_classes import *                                    In [15]: ust = UserStatus.fetch_by_field(UserStatus.user_status_id, 1) Memcached Getting: user_classes.UserStatus:(1)   In [16]: ust.user
--------------------------------------------------------------------------- DetachedInstanceError                     Traceback (most recent call last) <ipython-input-16-38fd625abed9> in <module>()
----> 1 ust.user /home/david/sqlalchemy-memcached/env/lib/python2.7/site-packages/sqlalchemy/orm/attribut es.pyc in __get__(self, instance, owner)
    249             return dict_[self.key]
    250         else:
--> 251             return self.impl.get(instance_state(instance), dict_)
    252
    253   /home/david/sqlalchemy-memcached/env/lib/python2.7/site-packages/sqlalchemy/orm/attribut es.pyc in get(self, state, dict_, passive)
    543                     value = callable_(passive)
    544                 elif self.callable_:
--> 545                     value = self.callable_(state, passive)
    546                 else:
    547                     value = ATTR_EMPTY   /home/david/sqlalchemy-memcached/env/lib/python2.7/site-packages/sqlalchemy/orm/strategi es.pyc in _load_for_state(self, state, passive)    495                 "Parent instance %s is not bound to a Session; "
    496                 "lazy load operation of attribute '%s' cannot proceed" %--> 497                 (orm_util.state_str(state), self.key)
    498             )
    499   DetachedInstanceError: Parent instance <UserStatus at 0x21e9dd0> is not bound to a Sessi on; lazy load operation of attribute 'user' cannot proceed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T16:24:51.050

这是 SQLAlchemy 中的一个错误。我在错误跟踪器上报告了它：[http ://www.sqlalchemy.org/trac/ticket/2743](http://www.sqlalchemy.org/trac/ticket/2743)

您始终可以遍历默认关系方向。因此，在您的情况下，一种解决方法是更改​​关系的方向（因此您可以从用户状态访问用户，但不能反过来）。

一般的解决方法（如果您稍后需要遍历两个方向）是修补`__dict__`定义 backref 的对象中的属性。对于错误跟踪器上的测试用例，这将是：

```
for p in parents:
    for c in p.children:
        getattr(c, '__dict__')['parent'] = p
print parents[0].children[0].parent 
```

# python - 无法使时区日期时间对象打印正确的时间

> ID：15188445
> 
> 赞同：0
> 
> 时间：2013-03-03T17:28:37.440
> 
> 标签：python, django, timezone

我真的很难用时区来理解这一点。我有一个日历应用程序，其模型如下：

```
class Events(models.Model):
    dtstart = models.DateTimeField('Start')
    ...

    def __unicode__(self):
        aware = self.dtstart.replace(tzinfo=timezone.get_current_timezone())
        #dt = defaultfilters.date(aware, 'Y-m-d H')
        dt = aware.strftime('%Y-%m-%d %H:%M')
        return dt 
```

并且 settings.py 包含以下内容：

```
TIME_ZONE = 'Europe/Stockholm'
USE_TZ = True 
```

如果我使用 Django 管理界面添加明天大约 19:00 开始的事件，sqlite-db 将包含以下内容：

```
$ sqlite3 ~/django_test.db "SELECT dtstart from events_events"
2013-03-04 18:00:00 
```

这对我来说似乎是一个 UTC 时间戳（我怀疑这是正确的）。当我渲染 html 时，使用`{{event.dtstart|date:"H.i"}}`. 它应该显示 19:00。但问题是`__unicode__`Event 类的 - 方法返回`2013-03-04 18:00`. 如您所见，我有尝试解决此问题，但我被卡住了。我的问题在哪里，如何让这个`__unicode__`方法返回`2013-03-04 19:00`。我认为现在在瑞典这里是夏令时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:31:43.967

不要`.replace(tzinfo=tz)`用于设置时区，`tz.localize()`而是使用：

```
aware = timezone.get_current_timezone().localize(self.dtstart) 
```

请参阅[`pytz`文档](http://pytz.sourceforge.net/)：

> 第一种是使用pytz库提供的localize()方法。这用于本地化一个简单的日期时间（没有时区信息的日期时间）：
> 
> ```
> >>> loc_dt = eastern.localize(datetime(2002, 10, 27, 6, 0, 0))
> >>> print(loc_dt.strftime(fmt))
> 2002-10-27 06:00:00 EST-0500 
> ```

但是，如果您的日期时间是 UTC 时间，则应改用 UTC 时区，然后以不同的时区表示时间以进行显示：

```
from pytz import UTC

aware = UTC.localize(timezone.get_current_timezone())
dt = aware.astimezone(timezone.get_current_timezone()).strftime('%Y-%m-%d %H:%M') 
```

# iphone - CSS / iPod touch：如果我添加另一行文本，字体会变得更大

> ID：15188447
> 
> 赞同：1
> 
> 时间：2013-03-03T17:28:45.943
> 
> 标签：iphone, css

我有一个网页，我现在正在制作 ipod touch。网页容器是 480 像素宽（450+30 填充），然后它有两个 div，每个 div 有一行文本。

当我只有一个 div 文本时，文本会出现在一行上，就像在我的电脑上一样。但是，当我添加第二个 div 时，iPod touch 决定让文本变得更大（对于两个 div），以便文本进入下一行。

无论我添加多少个 div，如何确保文本保持相同（更小）的大小？我希望它和我的电脑上的一样。用户必须能够缩放。

CSS：

```
body{
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size:15px;
    margin:0px;
 }

.container{
    padding:15px 15px 1px 15px;
    width:450px;
    background:white;
    overflow:hidden;
}

.quote{
    padding-bottom:3px; 
    font-style:italic; 
    text-align:center; 
    width:450px; 
    overflow:hidden; 
  } 
```

html:

```
<meta id="meta" name="viewport" content="width=device-width; initial-scale=1.0" />

<body >
    <div class= "container">
        <div class = "quote">"I want to be on one line and so does the other line. Even if two."</div>
        <div class = "quote">"I want to be on one line and so does the other line. Even if two."</div>
     </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:55:06.770

我将以下内容添加到类容器中，现在它可以工作了。有什么理由不这样做吗？我没有将它添加到正文中，因为我真的不知道它可能会产生什么其他影响。

```
-webkit-text-size-adjust: 100%; 
```

# java - IoC 和依赖注入

> ID：15188452
> 
> 赞同：0
> 
> 时间：2013-03-03T17:29:02.467
> 
> 标签：java, jakarta-ee, dependency-injection, inversion-of-control

以下代码有什么问题？

```
public class DeDoper {
    public boolean wackapediaOkToday() {
        DnsResolver resolver =  ResolverFactory.getInstance().makeResolver();
        return resolver.getIpAddressFor("wackapedia.org").equals("123.456.78.9");
    }
} 
```

为什么首选这个版本？

```
public class DeDoper {
    @InjectService
    private DnsResolver resolver;

    public boolean wackapediaOkToday() {
        return resolver.getIpAddressFor("wackapedia.org").equals("123.456.78.9");
    }
} 
```

我可以轻松地模拟 ResolverFactory.makeResolver() 这与设置解析器是最新的示例相同。

这就是ProQuest.biz的[这篇文章中所说的：](http://ioc.proquest.biz/)

> WackapediaOkToday 的 [第一个] 版本非常笼统地说，是“注入”了一个 DnsResolver（尽管公认它不太像打针，而更像是向服务员索要支票）。但它确实解决了测试问题，以及“一路乌龟”的问题。
> 
> 链接到工厂 但是在这个 [第一个版本] 方法中，我们实际上是“链接”到工厂类。（更糟糕的是，如果我们的工厂创建的对象依次具有依赖关系，我们可能必须在工厂内部引入新工厂。）我们还没有完全“反转”我们的控制，我们仍然从内部调用（控制）工厂我们的班级。
> 
> 所需要的是一种完全摆脱我们类中的控制的方法，并让他们告诉他们正在得到什么（对于他们的依赖项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:29:00.377

假设您有一个可以有多种实现的服务，例如“FileLocator”。这有一个 FilesystemFileLocator，它将文件根目录的路径作为参数，还有一个 S3FileLocator，它将您的 S3 凭据作为参数。前者需要你编写一个服务定位器来确定你想要哪个版本，然后返回它。反过来，该代码必须获取您的数据，构建适当类型的文件定位器等。您正在做 IOC 容器应该为您做的事情。最重要的是，您已经注入了对该特定创建方法的依赖。

在第二个版本中，您已经（通过注释或 XML）定义了您想要的文件定位器类型。IOC 容器为您实例化和管理它。您必须维护的代码更少。如果要引入第三种类型的 FileLocator，工作量也会减少。或者也许你重构你的代码，使文件定位器是单例的，或者如果它们是单例的，它们现在是新定位器的工厂，或者你可能想要合并定位器实例。在所有这些情况下，如果您使用 IOC 容器，破损将更少。

# symfony - 上次更新后升级 Symfony2 和 SonataAdminBundle（2013 年 3 月 1 日）

> ID：15188459
> 
> 赞同：3
> 
> 时间：2013-03-03T17:29:54.760
> 
> 标签：symfony, composer-php, sonata-admin

上次更新 SonataAdminBundle（2013 年 3 月 1 日）后，我无法使用 composer 更新组件

作曲家.json

```
...
"require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.1.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev",

...

        "sonata-project/admin-bundle": "dev-master",
        "sonata-project/intl-bundle": "dev-master",
        "sonata-project/doctrine-orm-admin-bundle": "dev-master",
        "sonata-project/cache-bundle": "dev-master"
    },
... 
```

php composer.phar 更新 symfony/symfony

```
 Problem 1
    - Installation request for sonata-project/admin-bundle dev-master -> satisfiable by sonata-project/admin-bundle dev-master.
    - Can only install one of: sonata-project/admin-bundle dev-master, sonata-project/admin-bundle 2.1.x-dev.
    - Installation request for sonata-project/admin-bundle == 2.1.9999999.9999999-dev -> satisfiable by sonata-project/admin-bundle 2.1.x-dev. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:03:16.933

您已将`sonata-project`包的版本设置为`dev-master`. *master*分支与 symfony 的稳定版本同步。由于 Symfony2.2 于 3 月 1 日发布，您需要更新这些版本以不需要 Symfony2.2，或者将您的项目更新到 symfony2.2（应该不会那么困难）。

## 解决方案 1：更新`sonata-project`版本

改变这个：

```
 "sonata-project/admin-bundle": "dev-master",
    "sonata-project/intl-bundle": "dev-master",
    "sonata-project/doctrine-orm-admin-bundle": "dev-master",
    "sonata-project/cache-bundle": "dev-master" 
```

到

```
 "sonata-project/admin-bundle": "2.1.x",
    "sonata-project/intl-bundle": "dev-master",
    "sonata-project/doctrine-orm-admin-bundle": "2.1.x",
    "sonata-project/cache-bundle": "dev-master" 
```

## 解决方案 2：将 Symfony2.1 更新到 2.2

阅读有关如何将项目从 Symfony2.1 更新到 2.2[的新闻文章。](http://symfony.com/blog/symfony-2-2-0#upgrading)基本上，这意味着`composer.json`根据[主 repo 上的更改](https://github.com/symfony/symfony-standard/compare/2.1...2.2#diff-12)更新文件，运行`php composer.phar update`和读取`UPGRADE-2.2.md`已更改的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T11:40:32.083

尝试：

```
"sonata-project/admin-bundle": "2.1.*",
"sonata-project/doctrine-orm-admin-bundle": "2.1.*@dev",
"sonata-project/intl-bundle": "2.1.*",
"sonata-project/cache-bundle": "2.1.*" 
```

这对我有用。

# c# - C# Socket 编程：服务器不接受客户端连接

> ID：15188460
> 
> 赞同：0
> 
> 时间：2013-03-03T17:29:59.093
> 
> 标签：c#, sockets, client-server

我是 C# 中套接字编程的新手。疯狂地在网上搜索我的问题的解决方案，但没有找到任何可以解决它的东西。所以这是我的问题：

我正在尝试编写一个客户端-服务器应用程序。目前，服务器也将在我的本地机器上运行。应用程序将数据的字节流从客户端传输到服务器。**问题是服务器没有检测到客户端的连接请求，而客户端能够连接并传输字节流**。

这是服务器代码：

```
String strHostName = Dns.GetHostName();
Console.WriteLine(strHostName);
IPAddress ip = IPAddress.Parse("127.0.0.1");
ipEnd = new IPEndPoint(ip, port);
soc = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
soc.Bind(ipEnd);

Console.WriteLine("Web Server Running... Press ^C to Stop...");

Thread th = new Thread(new ThreadStart(StartListen));
th.Start(); 
```

StartListen 线程如下：

```
public void StartListen()
{
    try
    {
        while (true)
        {
            string message;
            Byte[] bSend = new Byte[1024];
            soc.Listen(100);

            if (soc.Connected)
            {
                Console.WriteLine("\nClient Connected!!\n==================\n CLient IP {0}\n", soc.RemoteEndPoint);
                Byte[] bReceive = new Byte[1024 * 5000];
                int i = soc.Receive(bReceive); 
```

客户端代码如下：

```
hostIPAddress = IPAddress.Parse("127.0.0.1");
ipEnd = new IPEndPoint(hostIPAddress,port);
Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);

Console.WriteLine("Connecting to Server...");
clientSocket.Connect(ipEnd);
Console.WriteLine("Sending File...");
clientSocket.Send(clientData);
Console.WriteLine("Disconnecting...");
clientSocket.Close();
Console.WriteLine("File Transferred..."); 
```

现在发生的是服务器启动，当我运行客户端时，它连接、发送和关闭。但是服务器控制台上什么也没有发生，它没有检测到任何连接：**if (soc.Connected) 仍然是 false**。

我通过netstat检查了服务器是否在监听127.0.0.1:5050，它确实在监听。想不通问题所在。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:41:50.657

在服务器端使用[Socket.Accept 方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.accept.aspx)来接受传入的连接。`Socket`该方法为新创建的连接返回一个： `Send()`and`Receive()`方法可用于此套接字。

例如，接受后可以创建单独的线程来处理客户端连接（即客户端会话）。

```
private void ClientSession(Socket clientSocket)
{
    // Handle client session:
    // Send/Receive the data.
}

public void Listen()
{
    Socket serverSocket = ...;

    while (true)
    {
        Console.WriteLine("Waiting for a connection...");
        var clientSocket = serverSocket.Accept();

        Console.WriteLine("Client has been accepted!");
        var thread = new Thread(() => ClientSession(clientSocket))
            {
                IsBackground = true
            };
        thread.Start();
    }
} 
```

# powerbuilder - DataWindow 选择组行

> ID：15188461
> 
> 赞同：0
> 
> 时间：2013-03-03T17:30:01.187
> 
> 标签：powerbuilder, datawindow

我有几个外观不同的数据窗口。一个简单的只有一个细节带并显示信息。我可以在该数据窗口中选择行，以标记该行。我得到了另一个 DW，它有一个包含所有列的 groupband，由于某种原因，我无法选择其中的行。

我还注意到，例如在 itemfocuschanged(...) 中，对于具有 group band 的 DW，dwobject 参数为 null。我该如何解决这个问题，所以也可以在我的其他 DW 中选择行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:34:44.123

所有非常好的易于使用的功能都取决于您使用细节带。

否则，您需要解析 GetBandAtPointer 函数的返回值。这将允许您获取通知您的组行的第一个详细信息行。

这是我的一些代码的示例：

```
// Get Info from Header
band = dw_unbillables.GetBandAtPointer()

// Get the first row referred to by the header
li_cur_row = Integer(Mid(band,Pos(band, "~t")+1)) 
```

来自帮助：返回值

返回一个字符串，该字符串命名指针所在的波段，后跟一个制表符和与该波段关联的行号（请参阅用法中的表格）。如果发生错误，则返回空字符串 (" ")。如果 dwcontrol 为 null，则该方法返回 null。

搜索 GetBandAtPointer 的帮助以获取完整的详细信息。

# tinymce - TinyMCE - 代码语法高亮选项

> ID：15188462
> 
> 赞同：0
> 
> 时间：2013-03-03T17:30:08.500
> 
> 标签：tinymce, syntax-highlighting, wysiwyg

我更喜欢使用`TinyMCE`，并且我正在使用`tinymce`编辑器记录我的大量 Web 脚本。

据我了解，有一些样式表和 javascript 可以帮助美化我们选择的代码片段，所以我愿意听取其他人使用的内容。

到目前为止，我一直在研究[Alex Gorbatchev](http://alexgorbatchev.com/SyntaxHighlighter/manual/installation.html)`css`的and `js`（ 他有不同的代码“刷子”来专注于每种编码语言，这可能是也可能不是主流）

我很好奇其他人的习惯`syntax-highlighting`

# android - 无法关闭 ProgressDialog（使用 BroadcastReceiver）

> ID：15188464
> 
> 赞同：3
> 
> 时间：2013-03-03T17:30:18.663
> 
> 标签：android, broadcastreceiver, progressdialog, dismiss

我的问题是：我希望我的应用程序在没有互联网连接时阻止按钮或整个活动，并在互联网连接恢复时取消阻止它们。我正在使用 BroadcastReceiver 在主要活动中检查互联网，它运行良好：

```
public class MainActivity extends BroadCast {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.registerReceiver(this.mConnReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
}

// code
} 
```

为了阻止 MainActivity，我使用了 ProgressDialog，方法 setCancelable 设置为 false。广播活动：

```
public class BroadCast extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public BroadcastReceiver mConnReceiver = new BroadcastReceiver()
    {
        public void onReceive(Context context, Intent intent)
        {
            @SuppressWarnings("deprecation")
            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

            if(currentNetworkInfo.isConnected()) {
                BlockActivity(true);
            }
            else {
                BlockActivity(false); 
            }
        }
    };

    public void BlockActivity(Boolean connected)
    {
        final ProgressDialog pausingDialog = ProgressDialog.show(this, "", "Application waiting for internet connection...");

        if (!connected)
        {
            Toast.makeText(getApplicationContext(), "Disconnected", Toast.LENGTH_LONG).show();
            pausingDialog.show();
            pausingDialog.setCancelable(false);
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
            pausingDialog.setCancelable(true);
            pausingDialog.dismiss();        
        }
    }
} 
```

Toast 信息效果很好，但问题在于 ProgressDialog。当互联网连接消失时它会显示，但当互联网连接恢复时它不想消失。如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:35:07.040

保持对对话框的全局引用，这样您就不会继续重新创建它。您还应该尽可能使用原始类型（`boolean`而不是`Boolean`）并遵守 Java 命名约定（camelCase）。

```
ProgressDialog pausingDialog;
public void blockActivity(boolean connected)
    {
        if (pausingDialog == null){
            pausingDialog = new ProgressDialog (this);
            pausingDialog.setMessage ("Application waiting for internet connection...");
        }

        if (!connected)
        {
            Toast.makeText(getApplicationContext(), "Disconnected", Toast.LENGTH_LONG).show();
            pausingDialog.show();
            pausingDialog.setCancelable(false);
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
            pausingDialog.setCancelable(true);
            pausingDialog.dismiss();        
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-14T09:53:23.803

**Kotlin 中的简单代码**

```
var pausingDialog:SweetAlertDialog?=null
fun blockActivity(connected: Boolean,context: Context) {
    if (pausingDialog == null) {
        pausingDialog =SweetAlertDialog(context, SweetAlertDialog.ERROR_TYPE)
        pausingDialog!!.titleText = "Application waiting for internet connection..."
        pausingDialog!!.setCancelable(false)
        pausingDialog!!.setConfirmClickListener{
            var MyReceiver: BroadcastReceiver?= null;
            MyReceiver = com.example.myrecharge.Helper.MyReceiver()
            context.registerReceiver(MyReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))
        }
    }
    if (!connected) {
        Toast.makeText(
            context,
            "Disconnected",
            Toast.LENGTH_LONG
        ).show()
        pausingDialog!!.show()
        Log.d("@@", "onReceive: 1")

    } else {
        Toast.makeText(
            context,
            "Connected",
            Toast.LENGTH_LONG
        ).show()
        pausingDialog!!.dismiss()
    }
} 
```

# ruby-on-rails - 如何让 Sidekiq 在 Heroku 上工作？

> ID：15188465
> 
> 赞同：8
> 
> 时间：2013-03-03T17:30:25.643
> 
> 标签：ruby-on-rails, heroku

这是我第一次尝试让 Redis 在 Heroku 上工作。

我添加了一个工人测功机（就在今天，所以还没有付款），添加了 RedisToGo Nano 插件，在我的本地机器上测试了后台作业，并将应用程序推送到 heroku。

```
heroku ps 
```

给

```
=== web: `bundle exec rails server -p $PORT`
web.1: up 2013/03/03 18:26:09 (~ 37m ago)

=== worker: `bundle exec rake jobs:work`
worker.1: crashed 2013/03/03 19:02:15 (~ 1m ago) 
```

Sidekiq Web Interface 表示一项作业已入队，但零处理或失败。

我猜这是因为我的工人测功机崩溃了。

有没有我不知道的菜鸟错误？

（例如，我需要运行一些命令来开始监听后台作业等）

`heroku logs --tail`没有显示任何错误，所以我不明白为什么我的工人 dyno 追逐。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T18:08:18.747

我做了一些研究并像这样修复它：

在应用程序的根目录下，我创建了一个名为“Procfile”的文件，其中包含以下内容：

```
web: bundle exec rails server -p $PORT
worker: bundle exec sidekiq -c 5 -v 
```

[从这里](https://stackoverflow.com/questions/13770713/starting-sidekiq-on-heroku)得到这个想法。

之后它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T11:53:28.033

还要确保设置 REDIS_PROVIDER：

```
heroku config:set REDIS_PROVIDER=REDISTOGO_URL 
```

Sidekiq 的 GitHub 页面也有说明。点击[这里](https://github.com/mperham/sidekiq/wiki/Deployment)

# google-app-engine - Google App Engine：使用 objectify 从 Keys 获取大量对象的最快方法

> ID：15188473
> 
> 赞同：1
> 
> 时间：2013-03-03T17:31:10.817
> 
> 标签：google-app-engine, objectify

我有一个大的（大约 20000 个）对象，我想根据 AlertSubscription 中包含的用户 ID 进行检索。在 GAE 上这需要 20 多秒，我想知道是否有可能更快？我已经使用标准查询在 5 秒内检索了 20000 个 AlertSubscriptions 对象，所以我认为 DeviceInfo 对象需要 20 多秒是很奇怪的。

我目前的逻辑如下：

1.  获取警报订阅列表
2.  获取与订阅相关的所有 DeviceInfo
3.  为每个操作系统启动一项任务（Android、iOS、WP7/8）

因此，我需要一次性使用所有设备，因此使用光标不会有太大帮助。有没有办法为对象的 Key 添加索引以使其更快？我在 datastore-index.xml 文件中没有设置索引。

```
 List<com.googlecode.objectify.Key<DeviceInfo>> dKeys= new ArrayList<com.googlecode.objectify.Key<DeviceInfo>>(); 
    for (AlertSubscription s: filteredSubscriptions.values()) 
    {
        dKeys.add(new com.googlecode.objectify.Key<DeviceInfo>(DeviceInfo.class,s.user));

    }
    log.info("Getting keys " + filteredSubscriptions.size());
    Map<com.googlecode.objectify.Key<DeviceInfo>, DeviceInfo> fetched = ofy.get(dKeys);
    log.info("Got keys, looping now");
...
   @PersistenceCapable(identityType = IdentityType.APPLICATION)
   public class DeviceInfo {
      @PrimaryKey
      @Persistent
      @Indexed
      private Key key; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:12:46.427

这为我解决了它：

```
ObjectifyOpts opts = new ObjectifyOpts();
opts.setConsistency(Consistency.EVENTUAL);
Objectify ofy = ObjectifyService.begin(opts); 
```

[https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/1dIi-JOK_k4](https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/1dIi-JOK_k4)

# java - 在另一个类中调用 public static void main 的内容

> ID：15188479
> 
> 赞同：4
> 
> 时间：2013-03-03T17:31:35.723
> 
> 标签：java

我有 Embed.java 和 watermarkdemo.java 类

Embed.java 的 main 方法中有几行代码。我想在用户点击插入按钮时在actionPerformed()方法中调用Embed.java的main方法。请有人可以给我如何做到这一点的大纲吗？

我希望我的问题很清楚，并且很容易理解我实际上在说什么。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:34:21.077

```
public void actionPerformed(ActionEvent e) {
    ...
    Embed.main(null);  // or a String[] containing args you want to pass
    ...
} 
```

像馅饼一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:34:50.810

这称为“调用静态方法”

```
onemethod() {
  AnotherClass.anotherMethod(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:39:05.933

```
Embed.main(); 
```

如果你让你的 main 方法实现可变参数，那么你需要传入任何东西。如果它实现了一个 during 数组，你必须传入一个空数组。

就个人而言，虽然我会考虑将您需要的代码重构为一个单独的方法。总的来说，您可能拥有您可能不想再次运行的所有设置

# c# - 扩展方法的使用

> ID：15188481
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:31:36.690
> 
> 标签：c#, .net

我使用 C# 扩展方法已经有一段时间了，我发现它们非常方便。但是我不确定使用它们的最理想情况是什么，我觉得有时我滥用它们。你什么时候推荐使用扩展方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:45:15.100

IMO 当它真的是一个**扩展**（而不是核心/关键操作），或者它是一个捷径时。

**一个扩展的例子：**

通常在沙盒应用程序中（当然它也可以在真实应用程序中使用）是`IEnumerable`通过一种`Print`方法进行扩展的。

print 方法**不应该存在**（也就是说：它不应该是`IEnumerable`类的一部分），但它有助于并使语法更容易和更清晰。此外，您可能不希望将库作为该类的一部分提供。

**快捷方式示例：**

我发现自己经常创建的另一件事是带有容器的对象的辅助扩展。而不是调用`Items.Add`和类似的，我只是做一个`AddItem`扩展方法。

* * *

需要考虑的是，它只是语法糖，也就是说，它是为你——开发者准备的。因此，对于 .NET 类型等，当您认为这是一个好主意并且会使事情变得更清洁时，请使用它。

当谈到“这个方法应该是扩展还是成员？” 请参阅此答案中的第一句话，并[在此处](https://stackoverflow.com/questions/787324/when-do-you-use-extension-methods-ext-methods-vs-inheritance)和[此处](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/04/26/c-extension-methods---to-extend-or-not-to-extend.aspx)查看更多信息。

# javascript - 韩语（和日语）语言的 jQuery load() 编码

> ID：15188492
> 
> 赞同：2
> 
> 时间：2013-03-03T17:32:28.130
> 
> 标签：javascript, jquery, character-encoding, translation, cjk

我最近遇到了一个问题，我真的会使用社区的一些帮助。我正在尝试使用 jQuery load() 加载 HTML 文件。

索引文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Question</title>
    <meta http-equiv="Content-Type" Content="text/html; charset=euc-kr" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function restart(){
            $("#wrap").load('new-content.html').hide().fadeIn('slow');  
        }
    </script>
</head>
<body>

    <div id="wrap">
        <div id="content">Text before restart: 남성</div>
    </div>

    <br />

    <a href="javascript:void(0)" onclick="restart()">Restart</a>

</body>
</html> 
```

新的 HTML 文件包括一些简单的 HTML 内容和对 .js 文件的调用（用于某些动画）。新的内容文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Question</title>
    <meta http-equiv="Content-Type" Content="text/html; charset=euc-kr" />
    <script src="main.js" language="javascript" type="text/javascript" />
</head>
<body>

    <div id="contentInner">Text after restart: 여성</div>

</body>
</html> 
```

正如您所看到的，我已经包含了正确的编码字符集（对于两个文件），并且我已经仔细检查过，我可以确认用于这部分代码的每个文件都被编码为“韩语”（在 Dreamweaver 等不同的应用程序中进行了检查） ，记事本++，崇高文本2）。

然而，一旦我加载内容，字符编码不正确；出现问号而不是字符。

当然，我在发布之前进行了一些搜索，发现了一些关于此的有用主题，称为 PHP 标头解决方案，但这不是一个选项，因为它只需要使用 HTML/JS/CSS。

当我使用日语时也会发生同样的行为。当然，在其他基于拉丁语的语言中，一切都运行良好。

任何形式的输入/建议/帮助将不胜感激。

谢谢！

# regex - sed 中的反向引用返回错误值

> ID：15188495
> 
> 赞同：8
> 
> 时间：2013-03-03T17:32:35.803
> 
> 标签：regex, macos, sed

我正在尝试使用 sed 替换表达式。正则表达式在 vim 中有效，但在 sed 中无效。我用斜杠替换数字前的最后一个破折号，所以

```
/www/file-name-1 
```

应该返回

```
/www/file-name/1 
```

我正在使用以下命令，但它一直输出 /www/file-name/0

```
sed 's/-[0-9]/\/\0/g' input.txt 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T17:49:05.357

您必须将数据括在括号之间以便稍后引用它，并`sed`从 1 开始计数。要恢复所有匹配的字符而不需要括号，使用`&`符号。

```
sed 's/-\([0-9]\)/\/\1/g' input.txt 
```

这会产生：

```
/www/file-name/1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T17:58:04.273

您需要先使用括号进行捕获，然后才能反向引用*（以 a 开头`\1`）*。尝试`sed -r 's|(.*)-|\1/|'`：

```
$ sed -r 's|(.*)-|\1/|' <<< "/www/file-name-1" 
/www/file-name/1 
```

您可以使用任何分隔符，`sed`因此`/`当替换包含`/`. 该`-r`选项适用于扩展正则表达式，因此不需要转义括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:39:02.797

OS X 下的 sed 似乎从 1 开始计算反向引用。尝试`\1`而不是`\0`

# c# - 场景居中问题

> ID：15188499
> 
> 赞同：1
> 
> 时间：2013-03-03T17:32:58.707
> 
> 标签：c#, wpf, opengl

我必须用 openGL 显示 stl 模型。（SharpGL。）我想设置初始视图，使模型位于屏幕的中心并大致填满它。我已经计算了模型的边界立方体并将视图设置为：（sceneBox 是一个 Rect3D - 它存储左后下角的位置和大小）

```
// Calculate viewport properties
double left = sceneBox.X;
double right = sceneBox.X + sceneBox.SizeX;
double bottom = sceneBox.Y;
double top = sceneBox.Y + sceneBox.SizeY;

double zNear = 1.0;
double zFar = zNear + 3 * sceneBox.SizeZ;

double aspect = (double)this.ViewportSize.Width / (double)this.ViewportSize.Height;

if ( aspect < 1.0 ) { 
    bottom /= aspect;
    top /= aspect;
} else {
    left *= aspect;
    right *= aspect;
}

//  Create a perspective transformation.
gl.Frustum(
    left / ZoomFactor, 
    right / ZoomFactor,
    bottom / ZoomFactor, 
    top / ZoomFactor,
    zNear, 
    zFar);

//  Use the 'look at' helper function to position and aim the camera.
gl.LookAt(
    0, 0, 2 * sceneBox.SizeZ,           
    sceneBox.X + 0.5 * sceneBox.SizeX, sceneBox.Y + 0.5 * sceneBox.SizeY, sceneBox.Z - 0.5 * sceneBox.SizeZ,    
    0, 1, 0); 
```

这适用于我的小型手工测试模型：（它的盒子大小为 2*2*2 单位）

![视野好](../Images/016495f7bef42aaf59de67ff12e391c7.png)

这正是我想要的。（黄线表示边界框）

但是，当我加载一个大约 60*60*60 单位大的 stl 模型时，我得到了这个：

![不好的看法](../Images/c214f40de9f55981203892e01dfb3981.png)

它非常小而且太高了。

我应该改变什么才能让它工作？

这是完整的东西：[https ://dl.dropbox.com/u/17798054/program.zip](https://dl.dropbox.com/u/17798054/program.zip)

您也可以在 zip 中找到此型号。引用的代码在`KRGRAAT.SZE.Control.Engine.GLEngine.UpdateView()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:12:36.673

显然问题是您在 lookAt 函数中使用的参数。如果您已经计算了边界立方体，您需要做的就是将其放置在距相机的距离（eyeZ）处

**sizeX/tan(角度透视)**

其中 sizeX 是构建立方体的 Quad 的宽度，angleOfPerspective 是 GlPerspective 的第一个参数当然有 centerX == posX == centerX 的前四边形和 centerY == posY == centerY 的前四边形和截头体是不必要的

查看参考[http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml](http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:46:40.117

所以，为了澄清 Arek 的回答，我是这样解决的：

```
// Calculate viewport properties
double zNear = 1.0;
double zFar = zNear + 10 * sceneBox.SizeZ; // had to increase zFar

double aspect = (double)this.ViewportSize.Width / (double)this.ViewportSize.Height;

double angleOfPerspective = 60.0;
double centerX = sceneBox.X + 0.5 * sceneBox.SizeX;
double centerY = sceneBox.Y + 0.5 * sceneBox.SizeY;
double centerZ = sceneBox.Z + 0.5 * sceneBox.SizeZ;

//  Create a perspective transformation.
gl.Perspective( // swapped frustum for perspective
    angleOfPerspective / ZoomFactor, // moved zooming here
    aspect,
    zNear,
    zFar);

//  Use the 'look at' helper function to position and aim the camera.
gl.LookAt(
    centerX, centerY, sceneBox.SizeX / Math.Tan(angleOfPerspective), // changed eye position
    centerX, centerY, -centerZ,
    0, 1, 0); 
```

# c# - 使用 List 从 listBox 获取值

> ID：15188500
> 
> 赞同：0
> 
> 时间：2013-03-03T17:33:05.030
> 
> 标签：c#, winforms, list, listbox

我正在使用 a`ListBox`并且数据是一个类：

```
private class Duration
{
    public int Value { get; set; }
    public string Label { get; set; }
} 
```

我以这种方式绑定类：

```
var durations = new List<Duration>() 
  {
    new Duration() { Value = 5, Label = "5 minutes" }, 
    new Duration() { Value = 10, Label = "10 minutes" }, 
    new Duration() { Value = 15, Label = "15 minutes" }, 
    new Duration() { Value = 30, Label = "30 minutes" }, 
    new Duration() { Value = 45, Label = "45 minutes" }, 
    new Duration() { Value = 60, Label = "1 hour" }, 
    new Duration() { Value = 90, Label = "1 hour and half" } 
  };
this.listTime.DataSource = durations;
this.listTime.DisplayMember = "Label";
this.listTime.ValueMember = "Value"; 
```

一切正常，标签显示。当我去读取所选值时，我无法恢复所选项目的值。

我期待能够做到这一点：

```
int value = listTime.SelectedItems[0].Value; 
```

或者至少是这样的：

```
Duration value = listTime.SelectedItems[0]; 
```

但这给了我错误，我做错了什么？获取所选项目价值的正确方法是`ListBox`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:41:56.367

```
if (listTime.SelectedIndex != -1)
{
    var item = listTime.SelectedItem as Duration;
    //or as suggested by 'Stu'
    var item = (Duration)listTime.SelectedItem;
    MessageBox.Show(item.Value.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:37:05.143

如果您使用 Listbox，则此代码可以：

```
listTime.Items[0].Value 
```

# php - 字符串组合出数组

> ID：15188504
> 
> 赞同：3
> 
> 时间：2013-03-03T17:33:24.237
> 
> 标签：php, arrays, compare

我有一个二维数组，它返回我这个值：

```
Array ( 
   [0] => Array ( 
          [0] => wallet,pen 
          [1] => perfume,pen 
   ) 
   [1] => Array ( 
          [0] => perfume, charger 
          [1] => pen,book 
   ). 
```

出于这个原因，我想知道是否有可能创建一个函数以这种方式组合数组，并创建一个新的：

if 例如`[0] => Array ( [0] => wallet,pen [1] => perfume,pen )`then 应该等于， `[0] => Array ( [0] => wallet,pen, perfume )`因为有一个常用词 else 什么也不做。

并且在此之后将每个单词作为字符串检索以进行进一步的操作。

* * *

我怎样才能使这样一个数组的值唯一。`Array ( [0] => Array ( [0] => wallet [1] => pen [2] => perfume [3] => pen) )`因为有两次笔我希望它以这种方式被删除`( [0] => Array ( [0] => wallet [1] => pen [2] => perfume) )`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T13:00:50.500

这只是映射数组和组合内部数组的问题：

```
$x = [['wallet,pen', 'perfume,pen'], ['perfume,charger', 'pen,book']];

$r = array_map(function($item) {
    return array_unique(call_user_func_array('array_merge', array_map(function($subitem) {
        return explode(',', $subitem);
    }, $item)));
}, $x); 
```

[**演示**](http://codepad.viper-7.com/4RY4lv)

这首先根据逗号拆分所有字符串。然后将它们与 合并在一起，`array_merge()`并使用 删除重复项`array_unique()`。

另见：[`call_user_func_array()`](http://php.net/call_user_func_array),[`array_map()`](http://php.net/array_map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:51:22.570

尝试这个 ：

```
$array = Array (Array ( "wallet,pen", "perfume,pen" ), Array ( "perfume, charger", "pen,book" ));
$res   = array();
foreach($array as $key=>$val){
   $temp  = array();
   foreach($val as $k=>$v){
     foreach(explode(",",$v) as $vl){
        $temp[]  = $vl;
     }
   }
   if(count(array_unique($temp)) < count($temp)){
     $res[$key] = implode(",",array_unique($temp));
   }
   else{
     $res[$key] = $val;
   }
}

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [0] => wallet,pen,perfume
    [1] => Array
        (
            [0] => perfume, charger
            [1] => pen,book
        )

) 
```

# ios - drawRect 和 AFNetworking

> ID：15188505
> 
> 赞同：0
> 
> 时间：2013-03-03T17:33:24.957
> 
> 标签：ios, afnetworking, drawrect

我正在使用以下代码

```
 self.imageView = [[UIImageView alloc] init];
  [self.imageView setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"profile-image-placeholder"]];
    [self setNeedsLayout];
    [self setNeedsDisplay]; 
```

但在drawRect中只能看到使用以下占位符的图像

```
[self.imageView.image drawAtPoint:CGPointMake(15.0f, 5.0f)]; 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:13:54.383

我想你需要做的就是这个。如果单元被重复使用，AFNetworking 将取消图像操作，因此您无需担心这种边缘情况。

```
[self.imageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]] placeholderImage:[UIImage imageNamed:@"profile-image-placeholder"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
      self.imageview.image=image;
      [self setNeedsLayout];
      [self setNeedsDisplay];

    } failure:nil]; 
```

# javascript - 为什么没有触发超链接上的点击事件？

> ID：15188508
> 
> 赞同：1
> 
> 时间：2013-03-03T17:33:48.610
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

为什么没有触发超链接上的点击事件？

```
@Html.ActionLink(
    "Show the privacy policy", 
    "PrivacyPolicy", 
    null, 
    new { id = "privacyLink" })

<div id="privacy"></div> 

<script> 
    $(document).ready(function () {

        // $('div').addClass('fooh');
        $('div#myDiv').click(function () {
            alert('div was clicked');
        });
        $('a#privacyLink').click(function () {
            alert('a');
        });
    });
</script> 
```

`myDiv`click 事件按预期触发，但'`privacyLink`事件未触发，即未显示警报。

**生成的 HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Home Page</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
    <script src="/Scripts/AjaxDemo.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]

            </div>
            <nav>
                <ul id="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </nav>
        </header>
        <section id="main">
            <h2>Welcome to ASP.NET MVC!</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>
<div id="myDiv">
<p>
Me Gusta
</p>
</div>

<a href="/Home/PrivacyPolicy" id="privacyLink">Show the privacy policy</a>

<div id="privacy"></div> 

<script>

    $(document).ready(function () {

        // $('div').addClass('fooh');
        $('div#myDiv').click(function () {

            alert('div was clicked');
        });

        $('a#privacyLink').click(function (e) {
            e.preventDefault();
            alert('a');
            $(location).src = $(this).attr('href');
        });

    });

</script>
        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:39:36.967

除了您应该从锚点的点击回调中返回 false 以防止浏览器重定向之外，我没有发现任何问题：

```
$('a#privacyLink').click(function () {
    alert('a');
    return false;
}); 
```

还要确保`id="privacyLink"`在 DOM 中的任何位置都没有其他元素，因为 id 必须是唯一的。

还要检查浏览器中的 js 控制台，以确保没有一些 javascript 错误阻止 .click 处理程序正确附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:39:46.307

使用这个：由于你的锚没有形成，你的绑定不起作用。使用[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
 $("a#privacyLink").on("click", function(event){
     alert('a');
  }); 
```

这是模拟您的条件的jsfiddle（HTML元素的动态生成）

```
 http://jsfiddle.net/nhNpw/6/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:43:01.817

尝试使用事件`preventDefault()`方法。

```
$('a#privacyLink').click(function (e) {
  e.preventDefault();
  alert('a');
  $(location).attr('href', $(this).attr('href'));
}); 
```

# php - 检测 PHP 中的字符串字符集（UTF-8 或 Windows-1256）

> ID：15188509
> 
> 赞同：4
> 
> 时间：2013-03-03T17:34:03.237
> 
> 标签：php, encoding, character-encoding, iconv

我正在处理基于“[简单 HTML DOM](http://simplehtmldom.sourceforge.net/) ”的脚本，我想在获取 URL 的内部文本后检测字符串的字符集，以使用`iconv()`.
我已经尝试了很多东西，但没有一个可以与`Windows-1256`.
我试过的： -

`mb_detect_encoding($content)`检测`Windows-1256`为`UTF-8`
`mb_detect_encoding($content, "windows-1256")`给出错误`Illegal argument`

```
function is_utf8($string) {   
  return preg_match('%^(?:  
  [\x09\x0A\x0D\x20-\x7E] # ASCII  
  | [\xC2-\xDF][\x80-\xBF] # non-overlong 2-byte  
  | \xE0[\xA0-\xBF][\x80-\xBF] # excluding overlongs  
  | [\xE1-\xEC\xEE\xEF][\x80-\xBF]{2} # straight 3-byte  
  | \xED[\x80-\x9F][\x80-\xBF] # excluding surrogates  
  | \xF0[\x90-\xBF][\x80-\xBF]{2} # planes 1-3  
  | [\xF1-\xF3][\x80-\xBF]{3} # planes 4-15  
  | \xF4[\x80-\x8F][\x80-\xBF]{2} # plane 16  
  )*$%xs', $string);
} 
```

如果不是 UTF-8，则此函数返回“0”，但当字符串为 UTF-8 时，它返回“找不到页面”。我不知道为什么！
我的代码是：

```
$html = file_get_html($url);
foreach($html->find('div[id=content]') as $element) {
  $content = $element->innertext;
  #Detect charset encoding of $content
} 
```

我正在使用的 URL：
UTF-8： http: [//www.masrawy.com/news/Egypt/Politics/2013/March/3/5541050.aspx](http://www.masrawy.com/news/Egypt/Politics/2013/March/3/5541050.aspx)
Windws-1256：[http ://www.youm7.com/ /News.asp?NewsID=965545](http://www.youm7.com//News.asp?NewsID=965545)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T20:59:32.050

您是否尝试过使用

```
function is_utf8($string) {
  return (mb_detect_encoding($string, 'UTF-8', true) == 'UTF-8');
} 
```

这适用于您指定的 URL。

另外，在测试几个不同的选项时，我的 masrawy.com 网站经常无法加载（也许是为什么您可能会看到“找不到页面”）...

奇怪的是，像你一样尝试使用正则表达式导致 PHP 在我的 Windows 安装中完全自杀，从而导致 Apache 崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T19:57:24.677

这是根据马克答案和我之前使用的功能的整个功能

```
function utf8($utf8){   
if(mb_detect_encoding($string,'UTF-8',true) =='UTF-8'); 
return $utf8; else 
$utf8=iconv("windows-1256","utf-8",$utf8);
return $utf8;
  } 
```

要使用它，只需调用该函数，它将返回正确的值。

```
utf8($text) 
```

# c++ - 错误 c6277 在 C++ 中重载 &&

> ID：15188513
> 
> 赞同：0
> 
> 时间：2013-03-03T17:34:20.547
> 
> 标签：c++, overloading, operator-keyword

在我的课堂上，我有成员函数：

```
const bool operator&&(const KinematicVariable &right) const { 
        return this->isUsed() && right.isUsed(); 
}
inline const bool isUsed() const { return this->_used; } 
```

然后我尝试

```
if (k1 && k2 && k3) 
```

但我明白了

```
error: C2677: binary '&&' : no global operator found which takes type 
'KinematicVariable' (or there is no acceptable conversion) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T17:36:53.460

首先，`k1 && k2`将被评估为一个布尔值，然后你将拥有`that_bool && k3`，你不提供`operator&&`for 的重载（[也不应该！](https://stackoverflow.com/q/5133114/150634)）。看来您真正想做的根本不是超载任何东西：

```
if (k1.isUsed() && k2.isUsed() && k3.isUsed()) 
```

或者，您*可以*提供显式转换`bool`为以下成员`KinematicVariable`：

```
explicit operator bool() const { return isUsed(); } 
```

要在 C++03 中执行此操作，请使用[safe-bool idiom](http://www.artima.com/cppsource/safebool.html)。

# objective-c - 透明的 NSWindow，但不是子视图？

> ID：15188524
> 
> 赞同：0
> 
> 时间：2013-03-03T17:35:03.403
> 
> 标签：objective-c, xcode, cocoa, nswindow

是否有可能有一个透明的 NSWindow，但不是因为它的子视图（NSTextField 和 NSButton）。现在文本也在下面显示，我希望它是 0% 透明的。

这是我在 NSWindow 初始化中所做的：

```
[self setAlphaValue:0.9];
[self setOpaque:NO];
[self setBackgroundColor:[NSColor clearColor]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:47:43.837

您需要在每个文本字段和按钮后面放置一个具有默认窗口颜色的深色背景图像。

为此，您可以对所有必需的对象进行子类化并添加上述内容。

# c# - ToolStripMenuItem 清除方法 - 它还会删除子项吗？

> ID：15188530
> 
> 赞同：0
> 
> 时间：2013-03-03T17:35:27.667
> 
> 标签：c#, winforms, .net-3.5, toolstripdropdown, toolstripmenu

也会`myStrip.DropDownItems.Clear()`删除子项吗？

```
mystrip
   - Item1
        - SubItem1
             - AnotherSubItem1
   - Item2 
```

后`Clear()`法

会不会只是：

```
mystrip 
```

或者

```
mystrip
   - NOTHING HERE
        - SubItem1
              - AnotherSubItem1 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:09:53.913

这些对象不会被销毁或处置，但您不能再通过 DropDrownItems 列表访问它们。因此，如果您在其他任何地方都没有引用这些项目，垃圾收集会处理它

# python - 如何反转正则表达式替换？

> ID：15188534
> 
> 赞同：1
> 
> 时间：2013-03-03T17:35:37.553
> 
> 标签：python, regex

回到这个例子，

[在 Python 中使用正则表达式处理类似字符以打印不同内容时遇到问题](https://stackoverflow.com/questions/15177532/having-trouble-dealing-with-similar-characters-to-print-different-things-using-r)

我想知道如何反转我所做的正则表达式替换并打印出原始文本？

也就是说，所以如果我有

```
text = "This is my first regex python example yahooa yahoouuee bbbiirdd" 
```

作为我的原始文本，那么它的输出将是：

```
re.sub text = "tookhookisook isook mookyook fookirooksooktook pookyooktookhookonook..." 
```

然后我希望将该输出转换回原始文本。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:39:31.973

Python 字符串是不可变的。您没有*更改*原始字符串，只是创建了一个新字符串。只需保留对原始内容的引用即可。

**编辑**
通过不可变，我的意思是它们的实际值在创建后被冻结。

```
>>> s = "abc"
>>> s[0]
'a'
>>> s[1] = 'd'

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    s[1] = 'd'
TypeError: 'str' object does not support item assignment
>>> 
```

在上面的示例中，我可以让变量`s`引用另一个对象，但我分配给它的字符串是常量。所以当你这样做时`s.replace()`，结果是一个*新*的字符串，而原来的字符串是不变的。

```
>>> s.replace ('a', 'd')
'dbc'
>>> s
'abc'
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:34:41.847

似乎这有效：

```
import re 

tu = ('This is my first regex python example '
      'yahooa yahoouuee bbbiirdd',

      'bbbiirdd',

      'fookirooksooktook',

      'crrsciencezxxxxxscienceokjjsciencq')

reg   = re.compile(r'([bcdfghj-np-tv-z])(\1?)')
dereg = re.compile('science([^aeiou])|([^aeiou])ook')

def Frepl(ma):
    g1,g2 = ma.groups()
    if g2:  return 'science' + g2
    else:   return g1 + 'ook'

def Fderepl(ma):
    g = ma.group(2)
    if g:  return g
    else:  return 2*ma.group(1)

for strt in tu:
    resu =   reg.sub(Frepl  , strt)
    bakk = dereg.sub(Fderepl, resu)
    print ('----------------------------------\n'
           'strt = %s\n'    'resu == %s\n'
           'bakk == %s\n'   'bakk == start : %s'
           % (strt, resu, bakk, bakk==strt)) 
```

### 编辑

首先，我更新了上面的代码：我消除了`re.I`标志。它正在捕获像“dD”这样的部分作为重复的字母。所以它被转换为“scienceD”，然后又变成了“DD”

其次，我用字典扩展了代码。
不是用字母+'ook'替换一个字母，而是根据字母替换。
例如，我选择将 'b' 替换为 'BAR'，将 'c' 替换为 'CORE'.... 我将字典的值大写，以便更好地查看结果。它实际上可能是其他任何东西。
这些程序会处理这种情况。我在字典里只放了'T'，'Y'，'X'，它只是为了作文。

```
import re 

d = {'b':'BAR','c':'CORE','d':'DEAD','f':'FAN',
     'g':'GO','h':'HHH','j':'JIU','k':'KOAN',
     'l':'LOW','m':'MY','n':'NERD','p':'PI',
     'q':'QIM','r':'ROAR','s':'SING','t':'TIP',
     'v':'VIEW','w':'WAVE','x':'XOR',
     'y':'YEAR','z':'ZOO',
     'T':'tears','Y':'yearling','X':'xylophone'}

ded = dict((v,k) for k,v in d.iteritems())
print ded

tu = ('This is my first regex python example '
       'Yahooa yahoouuee bbbiirdd',

      'bbbiirdd',

      'fookirooksooktook',

      'crrsciencezxxxxxXscienceokjjsciencq')

reg   = re.compile(r'([bcdfghj-np-tv-zBCDFGHJ-NP-TV-Z])(\1?)')

othergr = '|'.join(ded.keys())
dereg = re.compile('science([^aeiouAEIOU])|(%s)' % othergr)

def Frepl(ma, d=d):
    g1,g2 = ma.groups()
    if g2:  return 'science' + g2
    else:   return d[g1]

def Fderepl(ma,ded=ded):
    g = ma.group(2)
    if g:  return ded[g]
    else:  return 2*ma.group(1)

for strt in tu:
    resu =   reg.sub(Frepl  , strt)
    bakk = dereg.sub(Fderepl, resu)
    print ('----------------------------------\n'
           'strt = %s\n'    'resu == %s\n'
           'bakk == %s\n'   'bakk == start : %s'
           % (strt, resu, bakk, bakk==strt)) 
```

结果

```
----------------------------------
strt = This is my first regex python example Yahooa yahoouuee bbbiirdd
resu == tearsHHHiSING iSING MYYEAR FANiROARSINGTIP ROAReGOeXOR PIYEARTIPHHHoNERD eXORaMYPILOWe yearlingaHHHooa YEARaHHHoouuee sciencebBARiiROARscienced
bakk == This is my first regex python example Yahooa yahoouuee bbbiirdd
bakk == start : True
----------------------------------
strt = bbbiirdd
resu == sciencebBARiiROARscienced
bakk == bbbiirdd
bakk == start : True
----------------------------------
strt = fookirooksooktook
resu == FANooKOANiROARooKOANSINGooKOANTIPooKOAN
bakk == fookirooksooktook
bakk == start : True
----------------------------------
strt = crrsciencezxxxxxXscienceokjjsciencq
resu == COREsciencerSINGCOREieNERDCOREeZOOsciencexsciencexXORxylophoneSINGCOREieNERDCOREeoKOANsciencejSINGCOREieNERDCOREQIM
bakk == crrsciencezxxxxxXscienceokjjsciencq
bakk == start : True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:47:57.230

您不能在 Python 或任何其他正则表达式实现中向后“转换”正则表达式替换。

那只是因为替换是返回一个新字符串的单向街道，并且没有神奇的反转功能

这是使用 string.replace() 的插图：

```
original_string = 'abc'
newstring = original_string.replace('a','b')
'bbc' 
```

将 newstring 转换为 'abc' 不仅仅是用 'b' 代替 'a'。您不能从任何给定的正则表达式中创建“反向”正则表达式。如果我们在本例中将“b”替换为“a”，则字符串将是“aac”——而不是 bbc。

正则表达式函数的工作方式与 string.replace 相同——它们返回一个新字符串。他们不会返回一个知道每个正则表达式替换的确切状态的对象。

您有两种选择可以做任何您想做的事情：

1-创建一个表示字符串并跟踪（无限？）数量的正则表达式操作的自定义类，允许您在每个状态之间创建差异。

2-做其他人所做的事情，以及这里许多人的建议：您只需将原始字符串（或它的副本）放在一边。

（这是为了简化@StoryTeller 的答案）

# android - 通过预定警报从主游戏循环调用方法的好方法是什么？

> ID：15188537
> 
> 赞同：1
> 
> 时间：2013-03-03T17:35:55.250
> 
> 标签：android, android-service, libgdx, android-alarms

我正在将 libgdx 用于游戏，我希望能够让游戏调用一个`update()`现在设置为每 15 分钟调用一次的方法。但是，这当然只在游戏本身打开时才有效，并且我希望它在设备开启时能够正常工作。

到目前为止，我知道如何创建 BroadcastReceiver 并使用 AlarmManager 每 15 分钟调用一次，并且我知道如何设置它以在启动时添加我的警报。我唯一要弄清楚的是如何以精确的 15 分钟间隔（即 9:30、9:45 等）进行安排

这是 AndroidApplication 的来源： [https ://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidApplication.java](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidApplication.java)

用于启动它的代码是这样的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
    cfg.useGL20 = true;
    cfg.useAccelerometer = false;
    cfg.useCompass = false;

    initialize(new MainClass(), cfg);
} 
```

环顾四周，找不到任何实际引用的方式，`MainClass()`而无需调用`onCreate()`. 我假设做这样的事情的最佳方法有一个单独的意图，即`update()`方法的副本并调用对相同数据的访问，但是我不知道如何在 libgdx 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T20:38:33.300

我认为你试图让你的游戏类做得太多，更不用说当你“警报”触发并且游戏没有运行时这会遇到问题，所以没有任何东西可以接收到 update() 的调用。如果您真正需要的是一种在正在运行的游戏循环之外为您的游戏定期更新一些数据的方法，我会这样处理它：

1.  像你一样创建你的 AlarmManager，但不要尝试进入你现有的游戏类并调用更新，只需将更新存储到 SharedStorage 位置。[{Android 文档}](http://developer.android.com/guide/topics/data/data-storage.html)

2.  在定义 StoredDataReader 的核心项目中创建一个新接口。

3.  在您的 android 项目中创建一个名为 AndroidStoredDataReader 的新类，该类实现 StoredDataReader，并且知道如何从存储的更新位置读取。

4.  重载 MainClass() 构造函数以接收“StoredDataReader”实例。

5.  在您的 onCreate() 方法中，然后构建您的 AndroidStoredDataReader 类，然后将其传递给您的新 MainClass() 调用。

6.  在游戏的更新/渲染循环中，您将向 StoredDataReader 询问所需的数据。

如果您将应用程序移植到 GWT 或桌面，这也将允许您采用相同的方法，您可以在其中为每个平台实现 StoredDataReader。（GWTStoredData 读取器可能从浏览器 localStorage 读取，桌面版本可能从本地文件读取，等等）

# asp.net - 使用 ReturnUrl 清楚地了解

> ID：15188539
> 
> 赞同：0
> 
> 时间：2013-03-03T17:35:56.540
> 
> 标签：asp.net, forms-authentication, returnurl

我的菜单中有三个链接

**1.登录**

**2.创建账户**

**3.默认页面**

几个小时后它工作得很好（当我点击创建新帐户时，它会将我带到同一页面，如果我点击登录，它会将我带到登录页面）。但是现在，当我单击创建帐户并立即单击登录链接时，它会向我显示返回 URL，如下所示：

**`http://localhost:16491/Website1/Login.aspx?ReturnUrl=%2fWebsite1%2fCreateUser.aspx`**

为什么会这样？谁能告诉我原因或我需要更改的内容，以便它应该指向相同的 URL

从整个互联网上，他们说我需要检查用户是否经过身份验证并重定向到特定页面而不是**`DestinationPageURL`**

这就是我所做的，它正在重定向到预期的默认页面。但我想知道为什么附加了 Returnurl 以及如何删除它。

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
  If HttpContext.Current.User.Identity.IsAuthenticated Then
      loggeddetails.Text = "Welcome"
      FormsAuthentication.SetAuthCookie(Login1.UserName, True)
      Response.Redirect("Default.aspx")
  Else
      loggeddetails.Text = "Welcome Guest,"
  End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:17:17.823

我已经花了几个小时来理解这一点，最终开始使用这个解决方案，因为我**`login control`**被迫重定向到**`destination page Url`**如下所示：

```
Protected Sub Login1_LoggedIn(sender As Object, e As EventArgs) Handles Login1.LoggedIn
    Response.Redirect(Login1.DestinationPageUrl)
End Sub 
```

# javascript - 指令回调和范围

> ID：15188544
> 
> 赞同：8
> 
> 时间：2013-03-03T17:36:32.017
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

我正试图围绕 angularjs 中的范围进行思考，特别是在使用指令的模块上调用回调时。我找到了 3 种不同的方法来完成同一件事，并且我试图了解每种方法的优缺点。

[鉴于此 plnkr](http://plnkr.co/edit/fJmK4q9LNjT1lWptY92l?p=preview)

什么时候适合直接在父对象上使用、或调用函数`&`？`=`

我更喜欢使用 '=' 符号绑定，因为指令和托管指令的模块中所需的代码更少，但[根据文档](http://docs.angularjs.org/guide/directive)（了解 Transclusion 和 Scopes），似乎使用 绑定到回调`&`是首选方法， 为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T17:55:56.470

好问题。应该首先从尝试分离您的关注点的角度做出这些决定。所以我们必须消除在父作用域上调用方法——指令必须对父作用域了解太多。

接下来，我们看看目的。根据定义，回调是方法。`&`在父作用域的上下文中计算表达式，而双向绑定只是一个变量名。`&`功能*更*强大，并为您的指令的用户提供了更大的灵活性。当然，他们可以这样做，就像在你的例子中一样：

```
<my-dir cb="callMe()"></my-dir> 
```

但他们也可以这样做：

```
<my-dir cb="myVar = false"></my-dir> 
```

我们不必传入变量的名称——它是*任何*AngularJS[表达式](http://docs.angularjs.org/guide/expression)。因此，组件的用户可以自由地以适合他们的任何方式对您的事件做出反应。惊人的！

而且，该指令可以对状态变化做出反应。例如，您可以检查一个条件：

```
<my-dir cb="myVar"></my-dir> 
```

并且`myVar`可以评估任何值，并且您的指令可以在任何时候意识到这种变化并做出相应的反应。您不是共享一个*变量*，而是共享一个*表达式*。在这种情况下，双向绑定可以工作，但如果指令不（也许不应该）更改该变量，为什么我们需要双向绑定？

但同样，它不必是一个变量。计算结果为真或假的表达式怎么样？

```
<my-dir cb="myVar == myOtherVar"></my-dir> 
```

我们的指令不必关心父作用域是*如何得到一个值的——只关心这个值最终**是*什么。

因此，我们可以将它用于父作用域以对指令做出反应，或者让指令对父作用域做出反应——所有这些都具有灵活的表达式。整洁的。

所以，`=`是为了确保数据绑定；它确保使用指令的范围和指令本身在某个变量上保持同步。`&`允许在父范围的上下文中评估表达式，并允许指令或父范围对潜在的复杂状态更改做出反应。

# c# - c# 引用列表

> ID：15188546
> 
> 赞同：0
> 
> 时间：2013-03-03T17:36:40.683
> 
> 标签：c#, list

我想知道：如何将新成员添加到列表中，这样当我更改变量的值时也会更改列表。

例如：

```
int a=4;

list<int> l=new list<int>();

l.Add(a);

a=5;

foreach(var v in l)
  Console.WriteLine("a="+v); 
```

输出：a=4

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:38:18.063

如果您希望发生这种情况，您需要使用*引用类型。*

对于值类型，例如`int`，您将获得列表中变量的*副本*，而不是引用的副本。

请参阅MSDN 上的[值类型和引用类型](http://msdn.microsoft.com/en-us/library/t63sy5hs.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:38:52.123

这不适用于值类型变量列表，每次更改值类型变量时，都会在堆栈中获得一个新的变量值副本。所以一个解决方案是使用某种引用类型包装器。

```
class NumericWrapper
{
    public int Value { get; set; }
}

var items = new List<NumericWrapper>();
var item = new NumericWrapper { Value = 10 };
items.Add(item);

// should be 11 after this line of code
item.Value++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:41:16.173

您可以构建一个包装容器，然后根据需要更新包装器的值。例如，如下所示：

```
 //item class
 public class Item<T>
    {
      T Value {get;set;}
    }

    //usage example
    private List<String> items = new List<string>();

    public void AddItem( Item<string> item)
    {
        items.Add(item);
    }

    public void SetItem(Item<T> item,string value)
    {
      item.Value=value;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T17:54:46.887

您必须将 int 包装在引用类型中。

尝试这个：

```
internal class Program
    {
        private static void Main(string[] args)
        {
            IntWrapper a = 4;

            var list = new List<IntWrapper>();

            list.Add(a);

            a.Value = 5;
            //a = 5; //Dont do this. This will assign a new reference to a. Hence changes will not reflect inside list.

            foreach (var v in list)
                Console.WriteLine("a=" + v);
        }
    }

    public class IntWrapper
    {
        public int Value;

        public IntWrapper()
        {

        }

        public IntWrapper(int value)
        {
            Value = value;
        }

        // User-defined conversion from IntWrapper to int
        public static implicit operator int(IntWrapper d)
        {
            return d.Value;
        }
        //  User-defined conversion from int to IntWrapper
        public static implicit operator IntWrapper(int d)
        {
            return new IntWrapper(d);
        }

        public override string ToString()
        {
            return Value.ToString();
        }
    } 
```

# java - 从数组中删除但保持顺序？

> ID：15188547
> 
> 赞同：1
> 
> 时间：2013-03-03T17:36:42.133
> 
> 标签：java

好的，所以我试图从我的数组中删除一个对象，每个对象都有一个用户 ID，所以数组中的 0 索引将保存一个 ID 为 1 的对象。例如，当我删除 id 为 2 的对象时，我想删除数组中的 1 索引并重做模型并显示它。所以我希望模型显示 1:blah 然后 3:Blah 等等，忽略已删除的

```
 private void DeleteButtonActionPerformed(java.awt.event.ActionEvent evt) {

// arrays index not working when deleted
int reply = JOptionPane.showConfirmDialog(null, "Are you sure?","Delete Patient: " +     
NameTextField.getText(), JOptionPane.YES_NO_OPTION);
    if (reply == JOptionPane.YES_OPTION) {

        int Num = Integer.parseInt(IDTextField.getText());
        int Num1 = Num--;

        for(Patient s: PatientList)
        {

            if(Num == s.getAccountNumber())
            {
                PatientList.remove(Num1);
                break;

            }
        }

        DefaultListModel PatientListModel = new DefaultListModel(); 

    for(Patient s: PatientList)
    {

   PatientListModel.addElement(s.getAccountNumber() + "-" + s.getName());  
 }
   PatientJList.setModel(PatientListModel); 

   //delete procedures for that id

      JOptionPane.showMessageDialog(null, "Patient: " + NameTextField.getText() + "     

 Deleted!");
      NameTextField.setText("");
    AgeTextField.setText("");
    AddressTextField.setText("");
    SexGroup.clearSelection();
    PhoneTextField.setText("");
    IDTextField.setText("");
     PatientJList.clearSelection();

    }
    else {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:40:37.233

`id`我相信您应该在对象本身中维护此属性，而不是使用数组索引作为对象。就像是：

```
public class Patient {

    private int id;

    // getter and setter for id

    // rest of the class

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:43:09.143

`Object`您正在谈论的，在其中再维护一个名为`index`. 将此对象添加到数组时，将 设置为`Object.index`数组的索引。

现在对数组做任何你想做的事情。但是在显示数组的时候。这样做

`Object.index Object`

# ruby-on-rails - 用 application.html 包装 - rails

> ID：15188551
> 
> 赞同：0
> 
> 时间：2013-03-03T17:36:57.043
> 
> 标签：ruby-on-rails, wrapper

我对 Rails 非常陌生，并且正在努力定制一个项目。我生成了一个新的脚手架，称为它`New_Scaffold`。显示 New_Scaffold 的 index.html.erb 时，不显示 application.html.erb 的包装器（`yield`调用该方法的位置）。

我以为它在rails中是自动的，不是吗？如何显示 application.html.erb 来包装 New_Scaffold 的 index.html ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:39:26.963

application.html.erb 文件可以在视图/布局下找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:52:24.127

该`scaffold`命令会自动为您生成模型和控制器的一堆东西。

如果您想尝试 Rails，请尝试创建一个新项目，如下所示：

```
rails new blog

cd blog

rails generate scaffold Post title body:text

rake db:migrate

rails server 
```

这将创建一个具有一个模型的基本项目，该模型`Post`将具有一个带有视图的通用设置和一个响应所有 RESTful 操作的控制器。

# java - 如何按等级对文件进行排序？

> ID：15188562
> 
> 赞同：-3
> 
> 时间：2013-03-03T17:38:00.070
> 
> 标签：java, arrays, file, sorting

这是一个按 ID 对文件进行排序的完整程序。但是，我想按等级对其进行排序。我修改了好几次，但它似乎不起作用。有人可以指导我在哪里将 ID 更改为评分。另外，您认为此代码可以简化还是有任何其他代码比此代码更简单。

抱歉缩进不好，这个源代码也可以在[这里](http://www.roseindia.net/tutorial/java/io/sortFileData.html)找到。

学生.txt 文件：

```
4 A 87 A
5 B 99 A+
1 C 75 A
2 D 55 C
3 E 68 B 
```

资源：

```
import java.io.*;
import java.util.*;

    class ShowData implements Comparable {
    int id;
    String name;
    int marks;
    String grade;

    public void setId(int id) {
            this.id = id;
    }

    public int getId() {
            return id;
    }

    public void setName(String name) {
            this.name = name;
    }

    public String getName() {
            return name;
    }

    public void setMarks(int marks) {
            this.marks = marks;
    }

    public int getMarks() {
            return marks;
    }

    public void setGrade(String grade) {
            this.grade = grade;
    }

    public String getGrade() {
            return grade;
    }

    public int compareTo(Object Student) throws ClassCastException {
            if (!(Student instanceof ShowData))
                    throw new ClassCastException("Error");
            int ide = ((ShowData) Student).getId();
            return this.id - ide;
    }
    }

public class SortFile {
    SortFile() {
    int j = 0;
    ShowData data[] = new ShowData[5];
    try {
    FileInputStream fstream = new FileInputStream("C:/student.txt");
    // Use DataInputStream to read binary NOT text.
    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
    String strLine;
    ArrayList list = new ArrayList();
    while ((strLine = br.readLine()) != null) {
    list.add(strLine);
    }

Iterator itr;
    for (itr = list.iterator(); itr.hasNext();) {
    String str = itr.next().toString();
    String[] splitSt = str.split(" ");
    String id = "", name = "", marks = "", grade = "";
    for (int i = 0; i < splitSt.length; i++) {
    id = splitSt[0];
    name = splitSt[1];
    marks = splitSt[2];
    grade = splitSt[3];
    }
    data[j] = new ShowData();
    data[j].setId(Integer.parseInt(id));
    data[j].setName(name);
    data[j].setMarks(Integer.parseInt(marks));
    data[j].setGrade(grade);
    j++;
    }

Arrays.sort(data);
    File file = new File("C:/new.txt");
    FileWriter fw = new FileWriter(file, true);
    BufferedWriter out = new BufferedWriter(fw);
    System.out.println("********Sorted by id********");
    String strVal = "";
    for (int i = 0; i < 5; i++) {
    ShowData show = data[i];
    int no = show.getId();
    String name = show.getName();
    int marks = show.getMarks();
    String grade = show.getGrade();
    System.out.println(no + " " + name + " " + marks + " " + grade);
    String d = no + " " + name + " " + marks + " " + grade;
    ArrayList al = new ArrayList();
    al.add(d + "\n");
    Iterator itr1 = al.iterator();
    while (itr1.hasNext()) {
    out.write(itr1.next().toString());
    out.newLine();
    }
    }
    out.close();
    } catch (Exception e) {
    }
    }
public static void main(String[] args) {
            SortFile data = new SortFile();
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:47:37.213

compareTo() 方法当前正在比较 ID，而不是成绩。尝试比较分数。

# python - Django - 如何在 Django 错误页面中获取 DatabaseError“当前事务中止”的调试信息？

> ID：15188564
> 
> 赞同：5
> 
> 时间：2013-03-03T17:38:03.813
> 
> 标签：python, django, debugging, django-models, django-postgresql

在我的 Django 项目上开发时，我收到一个 DatabaseError，上面写着：

> 当前事务被中止，命令被忽略直到事务块结束

我知道发生这种情况是因为有一个没有回滚的错误 PostgreSQL 事务，并且这个错误事务中的错误可以在 PostgreSQL 错误日志中找到。但是，我认为如果在 Django 错误页面上显示此错误会更方便。然后就可以直接看到问题所在了。

那么，是否有可能在 Django 错误页面上获取这些 PostgreSQL 错误？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T13:11:13.747

如果您想深入了解异常的详细信息，那么您可以编写一个自定义[中间件类](https://docs.djangoproject.com/en/dev/topics/http/middleware/)`django.db.DatabaseError`来包装视图处理并在开发服务器控制台的调试会话中捕获未处理的异常并检查异常：

```
from django.db import DatabaseError

class DatabaseErrorMiddleware(object):
    def process_view(self, request, view, args, kwargs):
       try:
           view(request, *args, **kwargs)   
       except DatabaseError as err:
           import pdb; pdb.set_trace()
           # You can now fully inspect the `e` exception object and it's context 
```

这些异常是良性的，通常在线程的请求-响应流过早结束时发生，通常在开发过程中，如果您的客户端在应用程序返回响应之前中止连接，尽管这可能不是全部。

# c++ - 如何在 C++ 中查看一个数组是否有连续的数字？

> ID：15188566
> 
> 赞同：2
> 
> 时间：2013-03-03T17:38:29.957
> 
> 标签：c++, arrays, function, n-queens

这基本上是 8 个皇后问题，但是在一维数组中用蛮力解决它。假设我有一个大小为 8 的数组（名为 b），其元素范围为 0 到 7。

我用 8 个 for 循环初始化数组中的每个索引，如下所示：

```
int b[8]={0};

int count = 0;

for(b[0] = 0; b[0]<8; b[0]++){ 
for(b[1] = 0; b[1]<8; b[1]++){ 
for(b[2] = 0; b[2]<8; b[2]++){ 
for(b[3] = 0; b[3]<8; b[3]++){ 
for(b[4] = 0; b[4]<8; b[4]++){ 
for(b[5] = 0; b[5]<8; b[5]++){
for(b[6] = 0; b[6]<8; b[6]++){
for(b[7] = 0; b[7]<8; b[7]++){
                if(check(b)) 
                {
                count++;
                print(b, count);
                }
            }}
        }}
    }}
}} 
```

这个程序应该做的是检查数字 0 到 7 的每个组合，并仅在某些条件下返回 true。应该有 92 个解决方案，如果这听起来很熟悉，应该是 - 这是使用蛮力的 8 个皇后问题。从这里，这就是我所理解的条件：

我希望能够检查一个数组是否有连续的数字串；如：

[0|5|7|1|2|3|6|4]

这里，元素b[3]、b[4]和b[5]是连续的。我不想这样，我想返回false，因为有一串连续的数字（基本上是皇后在进攻）

我也不想要一个包含一串向后连续数字的数组，如下所示：

[0|5|7|3|2|1|6|4]

最后，我不希望索引中有两个或更多数字，如果我们只是更改它们之间的数字，它们会使它们看起来是连续的：

[0|2|4|6|1|3|5|7]

以上是不可接受的，因为 b[0] 和 b[7] 是它们“连续索引”中的数字（因为至少有 2 个皇后在互相攻击）。

[6|1|3|0|4|7|5|2]

以上也是不可接受的，因为 b[1] 和 b[4] 也在连续索引中。

同样，当交换值时，数组

[7|2|4|6|1|3|5|0]

[6|4|3|0​​|1|7|5|2]

也是不能接受的。我也不能有 2 个或更多相同的数字。

我遇到的问题是创建检查功能。我被告知我需要使用 1 个 for 循环和 1 个 if-then 语句。检查功能可以按原样获取整个数组吗？如果是这样，如何查看数组中最右边的元素，并检查它是否有连续的索引（皇后正在攻击它）？我试过这个：

```
bool ok(int board[8]){

    for(int c = 7; c >= 0; c--){ //row check
        for (int j=0; j<c; j++){
            if (board[c]==board[j]){
                return false;
            }
        }

        for(int i = 1; i <= c; i++){
            // diagonal check from top left to bottom right
            if  ((board[c]-i >= 0) && (board[c-i] == board[c]-i))
                {return false;}
            if ((board[c]+i <= 7) && (board[c+i] == board[c]+i))
                {return false;}
            // diagonal check from bottom left to top right
            if ((board[c]-i >= 0) && (board[c-i] == board[c]+i))
                {return false;}
            if ((board[c]+i <= 7) && (board[c+i] == board[c]-i))
                {return false;}

        }

    }

    return true;
} 
```

但这不仅行不通（我得到了 300 多个解决方案），它也没有我听说的那么小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:51:06.363

我认为检查对角线中的碰撞有一个小问题：每条路都有 15 条对角线（包括角落里非常短的方形对角线），而您的代码只检查了其中的 7 条，因为`board[c]+i <= 7`和`board[c]-i >= 0`条件。

Here is how you can simplify the checks and make them faster with the use of three boolean arrays: you've got 8 rows, 15 ascending diagonals, and 15 descending diagonals:

```
bool row[8];
bool ascending[15];
bool descending[15]; 
```

Initially, there are no queens in any of these rows/diagonals. As you go through the elements of `board`, do this:

```
for (int i = 0 ; i != 8 ; i++) {
    // Check and mark the row
    if (row[board[i]]) return false;
    row[board[i]] = true;
    // Check and mark the ascending diagonal
    int ascIdx = board[i]+i;
    if (ascending[ascIdx]) return false;
    ascending[ascIdx] = true;
    int descIdx = 7+board[i]-i;
    if (descending[descIdx]) return false;
    descending[descIdx] = true;
}
return true; 
```

# php - PHP电子邮件联系表，主题下拉框不起作用

> ID：15188582
> 
> 赞同：0
> 
> 时间：2013-03-03T17:39:47.333
> 
> 标签：php

我有一个将用户输入值邮寄到电子邮件地址的联系表格。它工作得很好，它发送了除主题之外的所有信息，我已将其作为一个带有几个选项的下拉框呈现。我希望将所选选项设置为电子邮件主题。

```
<select name="subject">
  <option value="1" selected>1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select>

<?php
  $email      = $_POST['email'];
  $message    = $_POST['message'];
  $name       = $_POST['name'];
  $subject    = $_POST['subject'];
  $phone      = $_POST['phone'];
  $to         = 'emailaddress.co.uk';
  $from       = $email;
  $header     = "From:" . $from;
  $msgsubject = "$subject message from $name";
  $commessage = "Name: $name

  Email: $email

  Phone Number: $phone

  Subject: $subject

  Message: $message";

  mail($to, $msgsubject, $commessage, $header);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:40:57.180

```
<select name="subject]"> 
```

`subject]`? 真的吗？

（提示：不！）

# c# - 使用节点多次查询mongodb

> ID：15188584
> 
> 赞同：1
> 
> 时间：2013-03-03T17:39:49.230
> 
> 标签：c#, node.js, mongodb

我似乎找不到我的问题的正确答案，我已经查看了整个 stackoverflow。考虑一个 C# 中的示例代码，我试图将其移植到 nodejs + mongobd。

```
var messageList = new List<MessageHelper>();

foreach( MessageActivation messageToAsk in messagesToAsk )
{
    var message     = from m in dbContext.Messages where m.Id == messageToAsk.MessageId select m;
    var jokeMessage = from m in dbContext.Messages where m.Id == messageToAsk.JokeMessageId select m;
    var user        = from u in dbContext.Users where u.Id == messageToAsk.SourceUserId select u;

    var messageHelper = new MessageHelper();
        messageHelper.AskingUserId = user.ToList()[0].Id;
        messageHelper.Message = message.ToList()[0];

    messageList.Add( messageHelper );
}

return messageList; 
```

以节点的方式做到这一点的最佳方法是什么？只是一个侧节点，dbContext 将查询数据库。关键是收集所有需要的信息，将其打包，然后再发送。

谢谢

编辑：

这是我尝试过的

```
// collect needed info to make next queries in db
var messageIdList = new Array();
var jokeMessageIdList = new Array();
var sourceUserIdList  = new Array();
for( var i=0; i < messagesToAsk.length; i++ )
{
    messageIdList.push( messagesToAsk[i].MessageId      );
    jokeMessageIdList.push( jokeMessageId[i].JokeMessageId  );
    sourceUserIdList .push( jokeMessageId[i].SourceUserId   );
}

// make requests to have all the data in place
var messages = App.DataModels.Messages.find( {} );
    messages.where( 'MessageId' ).in( messageIdList );
    messages.exec( function ( err, foundMessages ) 
    {
        var jokeMessages = App.DataModels.Messages.find( {} );
            jokeMessages.where( 'JokeMessageId' ).in( jokeMessageIdList );
            jokeMessages.exec( function ( err, foundJokeMessages ) 
            {
                var users = App.DataModels.Messages.find( {} );
                    users.where( 'SourceUserId' ).in( sourceUserIdList );
                    users.exec( function ( err, foundUsers ) 
                    {
                        var messageList = new Array(); // new List<MessageHelper>();

                        for( var i=0; i < messagesToAsk.length; i++ )
                        {
                            var message     = null;
                            var jokeMessage = null;
                            var user        = null;

                            // get the data
                            for( var j = 0; j < messages.length; j++ )
                            {
                                if( messages[j].MessageId === messagesToAsk[i].MessageId )
                                {
                                    message = messages[j];
                                    break;
                                }
                            }
                            for( var k = 0; k < jokeMessages.length; k++ )
                            {
                                if( jokeMessages[k].JokeMessageId === messagesToAsk[k].JokeMessageId )
                                {
                                    jokeMessage = jokeMessage[k];
                                    break;
                                }
                            }
                            for( var l = 0; l < users.length; l++ )
                            {
                                if ( users[l].SourceUserId === messagesToAsk[l].SourceUserId )
                                {
                                    user = users[l];
                                    break;
                                }
                            }

                            var messageHelper = 
                            {
                                "AskingUserId"  : user.Id,
                                "AskingUserPic" : user.HelperPhoto,
                                "Message"       : message,
                                "JokeMessage"   : message.Type === "1" ? jokeMessage.Content
                            };

                            messageList.Add( messageHelper );
                        }

                        responseDelegate( response, messageList );
                    });
            });
    }); 
```

我在这里为其他正在转变的人发布它。这个想法似乎是您需要在开始迭代和组装任何最终结果以发送之前收集和过滤所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:05:17.663

在将 C#/Linq DB 查询类比为 NodeJS/Mongo 的背景下回答我的问题。一种“思维”方式的映射。这主要是为了理解这种转变。正如@WiredPrairie 对问题的评论中所建议的那样，正确的实现是使用像 Promise/Deffered 这样的模式（库）。

```
// collect needed info to make next queries in db
var messageIdList = new Array();
var jokeMessageIdList = new Array();
var sourceUserIdList  = new Array();
for( var i=0; i < messagesToAsk.length; i++ )
{
    messageIdList.push( messagesToAsk[i].MessageId      );
    jokeMessageIdList.push( jokeMessageId[i].JokeMessageId  );
    sourceUserIdList .push( jokeMessageId[i].SourceUserId   );
}

// make requests to have all the data in place
var messages = App.DataModels.Messages.find( {} );
    messages.where( 'MessageId' ).in( messageIdList );
    messages.exec( function ( err, foundMessages ) 
    {
        var jokeMessages = App.DataModels.Messages.find( {} );
            jokeMessages.where( 'JokeMessageId' ).in( jokeMessageIdList );
            jokeMessages.exec( function ( err, foundJokeMessages ) 
            {
                var users = App.DataModels.Messages.find( {} );
                    users.where( 'SourceUserId' ).in( sourceUserIdList );
                    users.exec( function ( err, foundUsers ) 
                    {
                        var messageList = new Array(); // new List<MessageHelper>();

                        for( var i=0; i < messagesToAsk.length; i++ )
                        {
                            var message     = null;
                            var jokeMessage = null;
                            var user        = null;

                            // get the data
                            for( var j = 0; j < messages.length; j++ )
                            {
                                if( messages[j].MessageId === messagesToAsk[i].MessageId )
                                {
                                    message = messages[j];
                                    break;
                                }
                            }
                            for( var k = 0; k < jokeMessages.length; k++ )
                            {
                                if( jokeMessages[k].JokeMessageId === messagesToAsk[k].JokeMessageId )
                                {
                                    jokeMessage = jokeMessage[k];
                                    break;
                                }
                            }
                            for( var l = 0; l < users.length; l++ )
                            {
                                if ( users[l].SourceUserId === messagesToAsk[l].SourceUserId )
                                {
                                    user = users[l];
                                    break;
                                }
                            }

                            var messageHelper = 
                            {
                                "AskingUserId"  : user.Id,
                                "AskingUserPic" : user.HelperPhoto,
                                "Message"       : message,
                                "JokeMessage"   : message.Type === "1" ? jokeMessage.Content
                            };

                            messageList.Add( messageHelper );
                        }

                        responseDelegate( response, messageList );
                    });
            });
    }); 
```

# php - 无法解析价值巨大的 JSON

> ID：15188586
> 
> 赞同：1
> 
> 时间：2013-03-03T17:39:52.433
> 
> 标签：php, json

在我的 JSON 中，我有 4 个根值。其中3个解析得很好。第 4 个 dict 甚至不在结果中。在这个字典中有一个 UTF-8 字符串，键为“base64”，长度为 50915 个符号。

这只发生在服务器（PHP 5.3.*）上，在我的本地（PHP 5.4.4）上一切正常。这到底是怎么回事？一个对象的大小是否有限制？

# 代码

```
$json   = new Services_JSON(SERVICES_JSON_LOOSE_TYPE);
$result = $json->decode($var); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:59:16.270

我认为你应该[`json_decode`](http://php.net/function.json-decode.php)改用。

据我所知，处理 JSON 的 PEAR 库是建立的，因为在 PHP 5.1 之前没有适当的方法来处理 JSON。我认为你可以把这个库放在一边，改用`json_*`函数。

# asp.net - 链接 btn 重定向持有会话变量

> ID：15188589
> 
> 赞同：0
> 
> 时间：2013-03-03T17:40:23.843
> 
> 标签：asp.net, linq, linkbutton

我想使用一个链接按钮来运行一个函数'LoadCheckListRecordEntry'，它设置一个会话并重定向用户......但是页面似乎正在加载会话设置？

虽然 html 正在运行代码 b4，但实际上设置了“DiaryEntId”，因此它在 LINQ 中返回 null ...我该如何解决这个问题？

# c# - GridView 和 SqlDataSource

> ID：15188592
> 
> 赞同：0
> 
> 时间：2013-03-03T17:40:39.370
> 
> 标签：c#, .net, database

我试图创建自己的命令来提取数据。首先我从工具箱 SqlDataSource 中制作 .aspx ：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        onselecting="SqlDataSource2_Selecting"></asp:SqlDataSource> 
```

然后添加 GridView：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        onselecting="SqlDataSource1_Selecting"></asp:SqlDataSource> 
```

现在我想编写自己的查询，所以我双击“SqlDataSource”>进入.aspx.cs：

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)    
{
    SqlDataSource1.SelectCommand = "SELECT name, num  FROM Table WHERE T_Name=@MyString";
} 
```

哪里有问题 ？当我运行这个应用程序不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:45:58.730

你没有设置参数`SqlDataSource1`。
我不能连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:48:12.777

有几个问题。第一个是您使用了参数化查询，但尚未定义您的参数是什么。第二个是您只是为您的 SqlDataSource1 分配了一个 SQL 查询，但您没有说与此有关。

```
protected void Page_Load(object sender, EventArgs e)
{
    System.Data.Sql.SqlConnection conn= new System.Data.Sql.SqlConnection(/*your connection string comes here*/);

    string query= "SELECT name, num  FROM Table WHERE T_Name=@MyString";

    System.Data.DataTable dt = new System.Data.DataTable();
    System.Data.Sql.SqlCommand cmd = new System.Data.Sql.SqlCommand(query, conn);

    System.Data.Sql.SqlDataAdapter da1 = new System.Data.Sql.SqlDataAdapter(cmd );
    da1.SelectCommand.Parameters.AddWithValue("@MyString", your_string);

    da1.Fill(dt);

        if (dt.Rows.Count > 0)
        {
            GridView1.DataSource = dt;
            GridView1.DataBind();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:48:17.223

您应该使用 select 命令添加选择参数

```
protected void SqlDataSource1_Selecting（对象发送者，SqlDataSourceSelectingEventArgs e）
        {
            SqlDataSource1.SelectCommand = "SELECT name, num FROM Table WHERE T_Name=@MyString";
SelectParameters["MyString"].DefaultValue = "你的参数在这里";

        }

```

# java - 如何将整数变量传递给另一个类

> ID：15188594
> 
> 赞同：0
> 
> 时间：2013-03-03T17:40:44.247
> 
> 标签：java, android, variables

我有一堂公共 int Result 的课；在游戏后期，我使用该变量来存储用户获得的点数。现在，我有另一个名为 Result 的活动/类，并且我在该活动中有一个 textView，我需要使用 Result 变量将 sexText 转换为该 textView。我创建了我的游戏类的一个实例，并在 Result 类中将其命名为 g，然后我做了这样的事情：

```
score = (TextView) findViewById(R.id.tvResult);
        score.setText("Game over!\nYour score is:\n" + k.Result); 
```

但我总是得到 0。我认为这是因为我得到了变量的默认值，而不是真正的变量。游戏结束后如何将添加到变量的最终值传递给我？

我也在游戏活动中尝试了这个，将变量作为意图传递：

```
Intent i = new Intent(Quiz.this, Result.class);
            i.putExtra("newResultVariable", Result);
            startActivity(i); 
```

也得0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:42:49.910

> 将变量作为意图传递。

要使用任何语言进行编程，您应该遵循语言的命名约定。

在 Quiz.java 中

```
Intent intent = new Intent(context,Result.class);
intent.putExtra("newResultVariable", result);
startActivity(intent); 
```

在 Result.java 中获取值。

```
public void onCreate(Bundle bundle) {
    ....
    int score = 0;
    TextView scoreTextView = (TextView) findViewById(R.id.tvResult);

    Bundle extras = getIntent().getExtras(); 
    if(extras !=null) {
       score = extras.getInt("newResultVariable", 0);
    }

     scoreTextView.setText("Game over!\nYour score is:\n" + score); 
     ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:45:55.900

首先，您给出的变量名不好，因为它没有遵循 CamelCase

所以它应该是结果而不是结果。现在尝试如下：

在测验活动中

```
Intent intent = new Intent(getApplicationContext(),Result.class);
intent.putExtra("result_variable", result);
startActivity(intent); 
```

结果活动

```
getIntent().getIntExtra("result_variable", 0); 
```

# android - 在 ViewPager 中使用 android:onlick

> ID：15188600
> 
> 赞同：0
> 
> 时间：2013-03-03T17:41:45.280
> 
> 标签：android, android-viewpager

我已经实现了一个 ViewPager，其中包含 3 个片段和每个片段中的许多复选框。在我正在使用的 xml 布局中

> android:onclick="onCheckboxClicked"

在每个片段中，我实现了一种检查复选框状态的方法：

```
public void onCheckboxClicked(View view) {

    boolean checked = ((CheckBox) view).isChecked();

    switch(view.getId()) {
        case R.id.cb_one:
            if (checked) 
                 Toast.makeText(getActivity(), "cb_one checked", Toast.LENGTH_SHORT).show();
            else
                 Toast.makeText(getActivity(), "cb_one unchecked", Toast.LENGTH_SHORT).show();
            break;
        case R.id.cb_two:
            // ... 
    }
} 
```

好吧，这实际上不起作用，因为每次我选择一个复选框时应用程序都会崩溃。

> E/AndroidRuntime(29283): java.lang.IllegalStateException: 无法在活动类**com.testApp.SomeFragmentActivity**中找到方法 onCheckboxClicked(View)用于视图类 android.widget.CheckBox 上的 onClick 处理程序，ID 为“cb_one”

我找不到合适的解决方案来让它运行。

有什么建议么？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:56:06.487

不支持您尝试执行的操作。查看[此答案](https://stackoverflow.com/questions/6091194/how-to-handle-button-clicks-using-the-xml-onclick-within-fragments)以了解一些解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:46:45.430

你说你把它放在片段中，但是你提供的异常文本说它正在一个名为 com.testApp.SomeFragmentActivity的*活动中寻找它。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T06:01:40.983

最好使用**setOnCheckedChangeListener** 而不是**onClickListener**来处理复选框

*这是示例代码*

```
public class MyFragment extends Fragment implements CompoundButton.OnCheckedChangeListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState){
            CheckBox checkboxFirst = rootView.findViewById(R.id.checkbox_first);
            checkboxFirst.setOnCheckedChangeListener(ViewpagerFragmentFirst.this);

    }

    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
        case R.id.checkbox_first: {
            if (isChecked) {
                // Do something
                Log.i(TAG, "onCheckedChanged: Checked");
            } else {
                // Do something
                Log.i(TAG, "onCheckedChanged: Unchecked");
            }
            break;
        }
    } 
} 
```

# php - 为什么php的一行代码中会有多个对象运算符？

> ID：15188601
> 
> 赞同：3
> 
> 时间：2013-03-03T17:41:50.097
> 
> 标签：php, object, operators, kohana

我很想了解运算符语法。我知道它被称为对象运算符，我可以看到它是如何使用的（[在 PHP 中我们在哪里使用对象运算符“->”？](https://stackoverflow.com/questions/3037526/where-we-use-object-operator-in-php)）。

我试图了解当它们像在这个片段中那样串在一起时的目的是什么（例如“switch（$this->request->param（'id'））：

这是来自使用 Kohana 的网站的一段代码：

```
public function action_list()
{
    $connections = ORM::factory('Connection')
        ->with('property')
        ->with('inviter');
    switch ($this->request->param('id')) {
    // more code...
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:43:52.727

它被称为“方法链”。它允许您应用不止一种方法，从而在一次调用中做不止一件事。它是嵌套函数的 OOP 等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:45:59.260

它通常被称为链接。当一个方法返回一个对象时，您可以在该返回的对象上调用另一个方法。考虑这样的事情：

```
class A {
    public $numbers = 0;
    public function addNumber($num) {
        $this->numbers += $num;
        return $this;
    }

}

$a = new A();
$a->addNumber(1)->addNumber(2); 
```

`addNumber`正在返回自身的一个实例，因此您可以重复调用 addNumber。

一个方法通常会返回另一个对象的实例，但同样的原则也适用。

# ember-data - 一次调用 deleteRecord() 太频繁或太快？

> ID：15188603
> 
> 赞同：2
> 
> 时间：2013-03-03T17:41:55.937
> 
> 标签：ember-data

我想删除模型“文章”的所有记录（大约五条）。我正在这样做：

```
CMS.ArticlesController = Em.ArrayController.extend
    deleteAll: ->
        @get("content").forEach (article) ->
            article.deleteRecord() 
```

但是，在执行时，它在三篇文章之后说：

```
Uncaught TypeError: Cannot call method 'deleteRecord' of undefined 
```

它在使用一点延迟时有效：

```
CMS.ArticlesController = Em.ArrayController.extend
    deleteAll: ->
        @get("content").forEach (article) ->
            setTimeout( (->
                article.deleteRecord()
            ), 500) 
```

这是为什么？

（我将 Ember.js-rc.1 和 Ember Data rev 11 与*@rpflorence*`ember-localstorage-adapter`一起使用，但我认为这无关紧要，因为我还没有打电话……） *`commit()`* 

 *### 更新 1

刚刚发现它也适用于`Ember.run.once`...

### 更新 2

我打开了一个 GitHub 问题：[https ://github.com/emberjs/data/issues/772](https://github.com/emberjs/data/issues/772)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:13:37.683

[正如GitHub 上](https://github.com/emberjs/data/issues/772)所讨论的，`forEach()`-loop 会中断，因为它会在删除项目时破坏索引。

解决方案：

使用 toArray() 将其“复制”到另一个数组中：

```
@get("content").toArray().forEach(article) -> 
    article.deleteRecord() 
```

如果有类似的函数，更好的方法`forEachInReverse`是向后循环，因此即使删除了项目，丢失的索引也不会损害循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T06:25:45.463

我仍然对上述答案有疑问。相反，我使用了反向 for 循环：

```
for(var i = items.length - 1; i >= 0; i--) {
   items.objectAt(i).destroyRecord(); // or deleteRecord()
} 
```

这会破坏每个项目而不会破坏索引。*

# scala - Scala，Casbah - 如何将 List 转换为 MongoDBList？

> ID：15188605
> 
> 赞同：5
> 
> 时间：2013-03-03T17:41:57.997
> 
> 标签：scala, casbah

有没有一种简单的方法可以将 List 转换为 MongoDBList（或 BasicDBList）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:42:13.033

```
scala>  val list = List("foo", "bar")
list: List[java.lang.String] = List(foo, bar)

scala>  val dbList = MongoDBList(list:_*)
dbList: com.mongodb.casbah.commons.MongoDBList = [ "foo" , "bar"] 
```

提示：总是首先阅读源代码。它可以为您的问题提供许多答案，顺便说一句，它将很有用。第一次可能很难，但后来变得越来越自然。

# jquery - jQuery [对象对象] 错误

> ID：15188606
> 
> 赞同：0
> 
> 时间：2013-03-03T17:41:59.210
> 
> 标签：jquery

```
$('td').click(function () {
    var total = $('<div id="total"></div>')
    var price = +($(this).text())
    var old = +($('#total').text())
    var newPrice = (old + price)
    $('<div class="notice"></div>')
        .append('<div class="skin"></div>')
        .append($('<div class="content"></div>').text('Total price:' + " " + $('#total').text(newPrice)))
        .hide()
        .appendTo('#panel_two')
        .fadeIn(1000);
    $('#panel_two').fadeIn().appendTo('#windowContainer');
} 
```

我在尝试显示我的 newPrice (Total price:) 有什么想法吗？

但是，这很好用：

```
$(document).ready(function(){
   $('td').click(function(){
    var Price = +($(this).text());
    var Old = +($('#Total').text());
    var New = (Old + Price);
    $('#Total').text(New);
   })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:04:00.920

```
$('<div class="content"></div>')
   .text('Total price:' + " " + $('#total').text(newPrice) ) 
```

基本上意味着“查找`#total`，将其文本设置为 的值`newPrice`，将 with 的返回值连接`.text(...)`起来`"Total price: "`，并将其设置为新元素的文本”。

现在， 的返回值`$('#total').text(newPrice)`是`$('#total')`，不是`newPrice`。也就是说，没有任何东西值得转换为字符串进行连接。

也许这就是你想要的？：

```
$('#total').text(newPrice);
$('<div class="content"></div>').text('Total price:' + " " + newPrice)
//... 
```

# java - oracle db id 列自动生成 JPA JSF

> ID：15188608
> 
> 赞同：1
> 
> 时间：2013-03-03T17:42:02.800
> 
> 标签：java, jpa, oracle10g

当我使用 JPA 时，我的 oracle 数据库表有一个基本问题。

我的问题是，我通过在数据库中添加一个 ID 列来创建表。当我回到我的 JPA 项目时，当我尝试创建新条目时，它不会为新条目创建 ID。它总是说：尝试回滚事务时发生错误。

我搜索一下这个问题。它基本上不会自动生成 ID 值。这是我的 JPA 控制器类：

```
@Entity
@Table(name = "PROJECTS", catalog = "", schema = "PROJETAKIP")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Projects.findAll", query = "SELECT p FROM Projects p"),
    @NamedQuery(name = "Projects.findById", query = "SELECT p FROM Projects p WHERE p.id = :id"),
    @NamedQuery(name = "Projects.findByProject", query = "SELECT p FROM Projects p WHERE p.project = :project")})
public class Projects implements Serializable {
    private static final long serialVersionUID = 1L;
    // @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
    @Id
    @Basic(optional = false)
    @Column(name = "ID", nullable = false, precision = 0, scale = -127)
    @GeneratedValue(strategy= GenerationType.SEQUENCE)
    private BigDecimal id;
    @Column(name = "PROJECT", length = 255)
    private String project;

    public Projects() {
    }

    public Projects(BigDecimal id) {
        this.id = id;
    }

    public BigDecimal getId() {
        return id;
    }

    public void setId(BigDecimal id) {
        this.id = id;
    }

    public String getProject() {
        return project;
    }

    public void setProject(String project) {
        this.project = project;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Projects)) {
            return false;
        }
        Projects other = (Projects) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.ibb.souce.Projects[ id=" + id + " ]";
    }

} 
```

这是我的 JSFClass：

```
@ManagedBean(name = "projectsController")
@SessionScoped
public class ProjectsController implements Serializable {

    @Resource
    private UserTransaction utx = null;
    @PersistenceUnit(unitName = "DenemelerPU")
    private EntityManagerFactory emf = null;
    private Projects current;
    private DataModel items = null;
    private ProjectsJpaController jpaController = null;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ProjectsController() {
    }

    public Projects getSelected() {
        if (current == null) {
            current = new Projects();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ProjectsJpaController getJpaController() {
        if (jpaController == null) {
            jpaController = new ProjectsJpaController(utx, emf);
        }
        return jpaController;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {
                @Override
                public int getItemsCount() {
                    return getJpaController().getProjectsCount();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getJpaController().findProjectsEntities(getPageSize(), getPageFirstItem()));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (Projects) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new Projects();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getJpaController().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProjectsCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (Projects) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getJpaController().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProjectsUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (Projects) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getJpaController().destroy(current.getId());
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProjectsDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getJpaController().getProjectsCount();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getJpaController().findProjectsEntities(1, selectedItemIndex).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(getJpaController().findProjectsEntities(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(getJpaController().findProjectsEntities(), true);
    }

    @FacesConverter(forClass = Projects.class)
    public static class ProjectsControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ProjectsController controller = (ProjectsController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "projectsController");
            return controller.getJpaController().findProjects(getKey(value));
        }

        java.math.BigDecimal getKey(String value) {
            java.math.BigDecimal key;
            key = new java.math.BigDecimal(value);
            return key;
        }

        String getStringKey(java.math.BigDecimal value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Projects) {
                Projects o = (Projects) object;
                return getStringKey(o.getId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + Projects.class.getName());
            }
        }
    }
} 
```

当我手动分配 ID 时，它可以完美运行。但我想要的是，它必须自动生成价值。如何克服这一点？

我的触发器：`DELIMITER @@ CREATE OR REPLACE TRIGGER PROJETAKIP.PROJECTS_TRIGGER BEFORE INSERT ON PROJECTS REFERENCING NEW AS NEW FOR EACH ROW BEGIN SELECT PROJECTS_SEQUENCE.nextval INTO :NEW.ID FROM dual;END; @@ DELIMITER ;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:29:13.407

[序列策略](http://www.objectdb.com/java/jpa/entity/generated#The_Sequence_Strategy_)

这就是你应该如何使用序列生成器：

```
@GeneratedValue(strategy= GenerationType.SEQUENCE, generator="seq") 
```

在课堂上：（例如，在 之后`@Entity`）

```
@SequenceGenerator(name="seq", sequenceName="PROJECTS_SEQUENCE", initialValue=1) 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T18:42:57.990

在保存对象时，我遇到了同样的错误。我的原因是因为将 3 位数的 MIN 范围添加到 id 值。默认情况下，自动生成的 id 将从 1、2、3 开始......我做了：

```
@Id @GeneratedValue
    @Basic(optional = false)
    @Size(min = 1, max = 64, message = "ID must be between 1 and 64 characters")
    private String id; 
```

所以 - 在你的情况下 - 小心你的 id 注释 - 尝试在没有比例、最小值和最大值的情况下启动 - 查看结果。例如，尝试：

```
 @Id
    @Basic(optional = false)
    @Column(name = "ID")
    @GeneratedValue(strategy= GenerationType.AUTO)
    private BigDecimal id; 
```

# java - Hibernate 共享实体竞争条件

> ID：15188610
> 
> 赞同：0
> 
> 时间：2013-03-03T17:42:17.420
> 
> 标签：java, hibernate

我有一个问题，如果两个不同的网络用户在同一个实体上工作，会发生什么。例如，共享实体有四个字段：

```
class HibernateSharedEntity
{
int id;
int a;
int b;
int c;
int d;
} 
```

现在，两个用户同时打开了一笔交易。其中一个正在更新该实体，第二个用户正在阅读该实体。以下步骤将更好地解释它：

时间 1：Hibernate 实体存储在数据库中，具有值：a=b=c=d=0 和 id=1。
时间 2：用户 1 打开一个新事务。
时间 3：User1 读取 HibernateSharedEntity，其中 id=1
时间 4：User1 正在修改所有字段：例如 a=2、b=3、c=4、d=5。
时间 5：User1 正在提交事务。
时间 6：Hibernate 正在更新 a=2
时间 7：Hibernate 正在更新 b=3
时间 8：现在 User2 打开一个新事务并读取这个共享实体。问：他捡到了什么？他是否获取了一个半更新的实体，例如： a=2 , b=3, c=0, d=0 ？
时间 9：Hibernate 正在更新 c=4
时间 10：Hibernate 正在更新 d=5

我想避免半更新的实例。这是我的应用程序中的一个关键点。如果第二个用户想要检索这个共享实体，我希望第二个用户只能在两种状态下读取这个共享实体，a=b=c=d=0 状态（提交之前）或 a=2,b= 3,c=4,d=5 状态（提交后）。我知道休眠可以进行一次插入来更新所有这些值，但在我的应用程序中它似乎更复杂，因为这个共享实体与其他共享实体有关系，也可以由 User1 更新。所以从现在开始，hibernate 不能进行一次插入来更新这两个共享实体。因此，当 User1 在一个事务中更新更多共享实体时，是否有可能 User2 可以在“未同步状态”中读取这些实体，我的意思是当一个实体更新但另一个实体尚未更新时？

我认为它可能很复杂，所以我将尝试更多地解释它：在我的应用程序中，共享实体必须同步。例如，有两个共享实体，例如：
entity1 = {a=1,b=2,c=3,d=4}
entity2 = {a=5,b=6,c=7,d=8}

现在 User1 想要将这些实体更新为这种状态：
entity1 = {a=0,b=0,c=0,d=0}
entity2 = {a=0,b=0,c=0,d=0 }

. 当 User1 进行更新事务时，User2 想要获取这些共享实例并且我想避免，User2 正在读取这些处于这种状态的实体：
entity1 = {a=0,b=0,c=0,d=0}
entity2 = {a=5,b=6,c=7,d=8}
如您所见，entity1 已更新，但 entity2 未更新。是我申请中的一个临界点，不可能出现这种情况。我怎样才能避免这种情况？hibernate 会解决这个问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:49:59.690

你的第一个场景是不可能的。Hibernate 在事务提交之前而不是之后将更改写入数据库。用户 2 将读取已提交到数据库的内容，因为它在提交第一个事务后读取实体。如果用户 2 在第一个事务提交之前从数据库中读取，它将读取第一个事务开始之前的状态（只要数据库隔离级别是默认的 READ_COMMITTED）。

Hibernate 应用程序与其他数据库应用程序没有什么不同：事务的 ACIDity 由数据库处理，而不是由 Hibernate 处理。实体，顺便说一句，不共享。每个 Hibernate 会话都有自己的给定实体的副本，其中包含在事务中从数据库中读取的数据。

了解什么是数据库事务和 ACID。无论您是否使用 Hibernate，都不会改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:50:58.990

事务是 DB（和休眠）中的原子操作。数据库引擎保证用户不会得到半更新的实体（如果您配置了事务管理权限；））。

如果您的应用程序依赖于数据完整性，您还应该实现某种实体锁定。对于大多数用例而言，乐观锁定就足够了。（如果不熟悉，请尝试在谷歌上搜索该术语）。

# php - 在 ZF2 中直接将 PhpRenderer 与子视图一起使用

> ID：15188614
> 
> 赞同：2
> 
> 时间：2013-03-03T17:42:53.813
> 
> 标签：php, zend-framework2, zend-view

在 Zend Framework 2 中发送电子邮件时，我想使用视图脚本模板，这样我就可以为各种电子邮件模板利用布局。这个想法是我有一个布局，它具有共享标记并在某处回显内容。布局通常是如何工作的。为此，我尝试将子视图模型添加到我的布局视图模型并使用`PhpRenderer`.

```
public function someMethod() {
    $child = new ViewModel();
    $child->setTemplate('test-template');

    $layout = new ViewModel();
    $layout->setTemplate('email-layout');
    $layout->addChild($child, 'content');

    $phpRenderer = new \Zend\View\Renderer\PhpRenderer();
    $phpRenderer->setCanRenderTrees(true);

    $resolver = new \Zend\View\Resolver\TemplateMapResolver();
    $resolver->setMap($this->serviceLocator->get('ViewTemplateMapResolver'));

    $phpRenderer->setResolver($resolver);
    $output = $phpRenderer->render($layout);
} 
```

布局视图脚本：

```
Hello from the e-mail layout script!

<?php echo $this->content; ?> 
```

发生的情况是只有布局的内容存储在布局视图脚本中`$output`和内部。`$this->content``NULL`

我想要做的是将 HTML 存储在一个字符串中，以便我可以通过电子邮件发送它。我实例化了一个子视图模型，它表示我想在布局中呈现的视图脚本。然后我实例化布局视图模型并添加子视图模型。然后我创建了一个 PhpRenderer 并向其中添加一个`TemplateMapResolver`，这样它将使用模板映射来解析模板。最后，我调用了`render`以`PhpRenderer`a`ViewModel`作为其第一个参数的方法。我已将这两个模板添加到我的`template_map`配置中，并且模板映射设置正确，名称和路径正确。

[问题是我在它的渲染方法](https://github.com/zendframework/zf2/blob/master/library/Zend/View/Renderer/PhpRenderer.php#L405)中看不到任何子视图的处理。这让我想，如果我`PhpRenderer`错误地使用了这个类，也许这就是它不起作用的原因。我已经检查了[嵌套视图模型的文档](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#nesting-view-models)，并且我正在做同样的事情，除了不从控制器操作返回视图模型。如果我`$layout`从控制器操作返回，它可以工作。

如果我查看`Zend\View\View`'s [render](https://github.com/zendframework/zf2/blob/master/library/Zend/View/View.php#L168)方法，我可以看到它呈现子视图。好像我不能使用`PhpRenderer`我想要的东西。但是我可以用`Zend\View\View`这个吗？该`render`方法不返回任何内容，但会触发一些事件。我对事件管理器还不太熟悉，所以我不确定如果使用这种方法，我如何/是否可以捕获输出。听[响应事件](https://github.com/zendframework/zf2/blob/master/library/Zend/View/ViewEvent.php#L26)是否明智？我必须检查我猜是哪个视图呈现（或者在完成我的工作后分离我的听众）。我不知道这样有没有好处。

任何想法都非常受欢迎。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T03:10:15.860

`$this->content`为空，因为 PhpRenderer 只渲染自身级别，不包括子视图模型。

实际上 ZF2 MVC 渲染使用 Zend\View\View->render() 而不是 Zend\View\Renderer\PhpRenderer->render()，所以你需要像 Zend\View\View 一样渲染树模板：

```
foreach ($layout as $child) {
    if ($child->terminate()) {
        continue;
    }
    $child->setOption('has_parent', true);
    $result  = $view->render($child);
    $child->setOption('has_parent', null);
    $capture = $child->captureTo();
    if (!empty($capture)) {
        if ($child->isAppend()) {
            $oldResult=$model->{$capture};
            $layout->setVariable($capture, $oldResult . $result);
        } else {
            $layout->setVariable($capture, $result);
        }
    }
}

$output = $view->render($layout); 
```

查看 ZF2 源代码以了解更多信息：

[https://github.com/zendframework/zf2/blob/master/library/Zend/View/View.php#L222](https://github.com/zendframework/zf2/blob/master/library/Zend/View/View.php#L222)

# php - 记住简单表单上的最后一个选项

> ID：15188618
> 
> 赞同：0
> 
> 时间：2013-03-03T17:43:19.647
> 
> 标签：php, html

有没有可能当

*   我从列表中选择了一些东西
*   然后我点击 Go

浏览器会记住我从列表中的最后一个选择

```
<form action="<?php echo $_SERVER ['PHP_SELF']; ?>" method="get" name="search_frm" id="serch_frm">
  <input name="serchStr" type="text" />
  <select name="list">
    <option value="">select</option>
    <option value="client">table client</option> 
    <option value="user">table user</option> 
  </select>
  <input name="submit" type="submit" value="go" />
</form> 
```

例如，

*   如果我从列表用户表中选择
*   然后点击Go

他会留在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:49:47.173

您可以稍后在不同的脚本上使用会话来访问一些数据：

```
 session_start();

    $_SESSION = $POST['list']; 
```

现在，只要浏览器仍处于打开状态，列表中的选定项目就会保留在那里。

如果要从会话中删除该项目，请使用：

```
 unset( $_SESSION['list'] ); 
```

并记住每次使用会话时都必须在文件顶部使用（始终）：

```
 session_start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:49:07.103

为了选择“棒”，您需要将单词`selected`放在`<option>`标签内的值之前。为此，您需要使用`foreach`循环动态生成选项。在循环内部，您将查看`$_REQUEST`并且`if`它与循环中正在迭代的值相匹配 you `echo selected`。

我已经这样做了十几次或更多次，并且效果很好。

```
<?php
  $options = array("select", "client", "user");
?> 
```

然后在页面中：

```
<form action="<?php echo $_SERVER ['PHP_SELF']; ?>" method="get" name="search_frm" id="serch_frm">
  <input name="serchStr" type="text" />
  <select name="list">
  <?php foreach ($options as $option): ?>
    <option <?php if ($_GET['list'] == $option) { echo "selected"; } ?> value="<?php echo $option; ?>"><?php echo $option;?></option>
  <?php endforeach ?>
  </select>
  <input name="submit" type="submit" value="go" />
</form> 
```

# ember.js - Ember.js/Handlebars 模板中没有显示

> ID：15188619
> 
> 赞同：0
> 
> 时间：2013-03-03T17:43:22.990
> 
> 标签：ember.js

在 Ember.js/ember-data 应用程序中，我有这条路线：

```
 this.resource 'event', path: '/events/:event_id' 
```

访问 URL 时，数据是通过对我的 API 的 Ajax 调用加载的。但是在我的模板中，我无法打印任何数据。

例如，我的模板中有这个：

```
<h1>{{title}}</h1> 
```

然而`title`，不显示不为空的属性。我错过了什么或发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:19:26.187

我是个白痴。这是因为我使用的是带下划线的属性名称而不是 camelCased 名称。对不起...

# ruby-on-rails - Ruby/RVM 安装问题

> ID：15188620
> 
> 赞同：1
> 
> 时间：2013-03-03T17:43:40.473
> 
> 标签：ruby-on-rails, ruby, rvm

在尝试更新我的 openSSL 时，我已经卸载了 rvm。现在我已经重新安装了 rvm，当我运行时`rvm -v`我是最新的：

```
rvm 1.18.15 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

但是当我跑步时，`ruby -v`我得到以下信息

```
/Users/marty/.rvm/bin/ruby: line 6: /Users/marty/.rvm/bin/ruby: Argument list too long
/Users/marty/.rvm/bin/ruby: line 6: /Users/marty/.rvm/bin/ruby: Undefined error: 0 
```

我缺少什么来安装红宝石？

我跑了`rvm reinstall 1.9.2 --with-openssl-dir=/usr/local`

并得到以下信息：

```
/Users/marty/.rvm/src/ruby-1.9.2-p320 has already been removed.
/Users/marty/.rvm/rubies/ruby-1.9.2-p320 has already been removed.
The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:18:44.977

试试这个答案 Running RVM requirements, Skipping brew update - 这不是同一个问题，但解决方案+解释是一样的。

# java - 识别字符串“#”的正则表达式

> ID：15188621
> 
> 赞同：0
> 
> 时间：2013-03-03T17:43:44.570
> 
> 标签：java, regex

我有一个java问题。当遇到一个或多个“#”实例时，我不知道如何编写正则表达式以将某些内容打印到文件中。“”时不能打印， “#”`string equals`时必须打印。`string equals`这是我的代码：

```
int num = 1;
StringBuffer noletterbuf = new StringBuffer(nospaces);
noletterbuf.deleteCharAt(0);
String noletter = noletterbuf.toString();
//if(num == noletter.split("[^#]").length){//applies # to C# and C
if(num == noletter.split("[#*]").length){//applies # to C
double yacc = octave*-50;
p6.println("sb.append(\"/Times-Roman findfont 70 scalefont setfont 1 -1 scale newpath  \"); sb.append(" + xaccplace + " + \" \" +" + yacc + " + \" moveto \"); sb.append(\"( # ) show 1 -1 scale \");");
} 
```

提前致谢！比约恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:48:29.060

为什么要使用正则表达式`.split()`，因为您只是丢弃了结果数组？

您可以`#`使用以下命令检查字符串是否包含：

```
if (noletter.indexOf('#') >= 0) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:22:59.827

使用正则表达式检查的一种简单方法是：

```
if (str.matches(".*#.*")) // true if there's a # in str 
```

我不明白“无空格”的相关性，或者你为什么使用 StringBuffer，或者为什么你删除了第一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:50:56.353

你的代码：

```
noletter.split("[#*]") 
```

这将在 each`#`和 each处拆分`*`，因为星号在括号内。

# objective-c - 可以同时保留和自动释放吗？

> ID：15188622
> 
> 赞同：0
> 
> 时间：2013-03-03T17:43:46.090
> 
> 标签：objective-c, memory-management

我有以下代码：

```
@interface MyClass : NSObject
{
    NSMutableArray *items;
}
@end

@implementation MyClass

-(Item *)getItem
{
    if(items.count < 1)
    {
        [self buildItemsArray];
    }
    Item *item =  [[[items objectAtIndex:0]retain]autorelease];
    [items removeObjectAtIndex:0];
    return item;
}

-(void)buildItemsArray
{
    // ...
    [items addItem:someNewItem];
    [items addItem:someOtherNewItem];
}
@end 
```

我有一个返回项目的函数。如果项目下降到 0，则项目数组在 buildItemsArray 中再次构建。我的游戏逻辑要求当我返回一个项目时，我需要将它从数组中移除。因此，我使用了一个保留来确保该项目在返回行之前有效（因为唯一的其他已知保留发生在将该项目添加到项目数组时发生），并使用一个自动释放来确保它稍后被清理。我检查了这段代码既没有崩溃也没有泄漏。我怀疑是否：

a) 没关系 - 我问的原因是我主要看到了使用 alloc/init/autorelease 的代码，而没有遇到使用 retain/autorelease 的这种情况 b) 是否有一些理由改为使用 alloc/init/autorelease：

```
Item *item =  [[Item alloc]initWithItem:[items objectAtIndex:0]autorelease]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:44:56.333

This is generally ok:

```
Item *item = [[[items objectAtIndex:0] retain] autorelease];
[items removeObjectAtIndex:0];
return item; 
```

Though this would make the intent clearer (returning an autoreleased object):

```
Item *item = [[items objectAtIndex:0] retain];
[items removeObject:item];
return [item autorelease]; 
```

No reason to alloc/init. That just adds unnecessary overhead.

Like I said in my comment, if this is a (relatively) new project, you really really really should be using ARC and not worry about these things anymore.

# parsing - 为什么这个表达式没有被正确解析？

> ID：15188625
> 
> 赞同：2
> 
> 时间：2013-03-03T17:43:56.683
> 
> 标签：parsing, scripting, programming-languages, antlr, grammar

*[注意：这是此处发布](https://stackoverflow.com/questions/15148369/ebnf-grammar-to-antlr3)的主题的延续。*

我正在为[Jass 脚本语言开发一个解析器](http://en.wikipedia.org/wiki/JASS) *（[这里有一个很好的 API 参考](http://jass.sourceforge.net/doc/api/index.shtml)）*，以便我可以将它用作另一种语言的解释器。使用 ANTLR4 + ANTLRWorks 2，我运行[了这个复杂的脚本](https://docs.google.com/file/d/0B8701ZFTpbjmQWhxLVljTksyWU0/edit?usp=sharing)来测试词法分析器/解析器的强度，并且几乎通过了所有测试。***它失败的部分在***“elseif”语句中，其中包含一个表达式：

*   一个外括号...
*   一个数组元素...
*   布尔/二进制运算，*AND* ...
*   一元常量整数

...像这样：（

`elseif(si__DroneSystem___data_V[this]!=-1)then` *脚本的第 53 行）*。

我对语法所做的任何更改都无法让[ANTLR](http://www.antlr.org)将此输入识别为正确的表达式。到目前为止，以下语法是我设法编写的：

```
grammar Jass;

//----------------------------------------------------------------------
// Global Declarations
//----------------------------------------------------------------------
program                 : file+
                        ;
file                    : declaration* function
                        ;
declaration             : globals | typedef | native_func
                        ;
typedef                 : KEYWORD_TYPE identifier KEYWORD_EXTENDS (TYPE_HANDLE | identifier) 
                        ;
globals                 : KEYWORD_GLOBALS global_var_list KEYWORD_ENDGLOBALS
                        ;
global_var_list         : var_declaration*
                        ;
native_func             : KEYWORD_CONSTANT? KEYWORD_NATIVE func_declaration
                        ;
func_declaration        : identifier KEYWORD_TAKES (KEYWORD_NOTHING | parameter_list) KEYWORD_RETURNS (KEYWORD_NOTHING | type)
                        ;
parameter_list          : type identifier (',' type identifier)*
                        ;
function                : KEYWORD_CONSTANT? KEYWORD_FUNCTION func_declaration local_var_list statement_list KEYWORD_ENDFUNCTION
                        ;

//----------------------------------------------------------------------
// Local Declarations
//----------------------------------------------------------------------
local_var_list          : (KEYWORD_LOCAL? var_declaration)*
                        ;
var_declaration         : KEYWORD_CONSTANT type identifier '=' expression
                        | type identifier ('=' expression)? | type TYPE_ARRAY identifier
                        ;

//----------------------------------------------------------------------
// Statements
//----------------------------------------------------------------------
statement_list          : statement*
                        ;
statement               : set | call | if_statement | loop | exitwhen | return_statement | debug
                        ;
set                     : KEYWORD_SET identifier '=' expression | KEYWORD_SET identifier OPENBRACKET expression CLOSEBRACKET '=' expression
                        ;
call                    : KEYWORD_CALL identifier OPENPARENTHESIS args? CLOSEPARENTHESIS
                        ;
args                    : expression (COMMA expression)*
                        ;
if_statement            : KEYWORD_IF expression KEYWORD_THEN statement_list else_clause? KEYWORD_ENDIF
                        ;
else_clause             : KEYWORD_ELSEIF ((OPENPARENTHESIS expression CLOSEPARENTHESIS) | expression) KEYWORD_THEN statement_list
                        | KEYWORD_ELSE ((OPENPARENTHESIS statement_list CLOSEPARENTHESIS) | statement_list) else_clause?
                        ;
loop                    : KEYWORD_LOOP statement_list KEYWORD_ENDLOOP
                        ;
                        // must appear in a loop
exitwhen                : KEYWORD_EXITWHEN expression
                        ;
return_statement        : KEYWORD_RETURN expression?
                        ;
debug                   : KEYWORD_DEBUG (set | call | if_statement | loop)
                        ;

//----------------------------------------------------------------------
// Expressions
//----------------------------------------------------------------------
expression              : parenthesis
                        | func_call
                        | array_ref
                        | (boolean_expression | binary_operation)
                        | unary_operation
                        | function_reference
                        | const_statement
                        | identifier
                        ;
binary_operation        : terminal (('+'|'-'|'*'|'/'|'>'|'<'|'=='|'!='|'>='|'<=') terminal)
                        ;
unary_operation         : ('+'|'-'|'not') terminal
                        ;
boolean_expression      : ('and'|'not')? terminal (('=='|'!=') terminal) ('and'|'or')?
                        ;
terminal                : factor*/(factor)
                        ;
factor                  : identifier
                        | const_statement
                        | parenthesis
                        | brackets
                        ;
parenthesis             : OPENPARENTHESIS expression CLOSEPARENTHESIS
                        ;
brackets                : OPENBRACKET expression CLOSEBRACKET
                        ;
                        // expression must be integer or real when used with unary '+'
func_call               : identifier OPENPARENTHESIS args? CLOSEPARENTHESIS
                        ;
array_ref               : identifier OPENBRACKET expression CLOSEBRACKET
                        ;
function_reference      : KEYWORD_FUNCTION identifier
                        ;
const_statement         : INTEGER_CONST | REAL_CONST | BOOL_CONST | STRING_CONST | ASSIGNMENT_TYPE_NULL
                        ;
FOURCC                  : QUOTATION_SINGLE . . . . QUOTATION_SINGLE
                        ;
INTEGER_CONST           : DECIMAL | OCTAL | HEXIDECIMAL | FOURCC
                        ;
DECIMAL                 : (DIGIT)+ | (DIGIT+) '.' (DIGIT+)?
                        ;
OCTAL                   : '0'..'7'+
                        ;
HEXIDECIMAL             : '$'(DIGIT|'a'..'f'|'A'..'F')+ | '0'('x'|'X')(DIGIT|'a'..'f'|'A'..'F')+
                        ;
REAL_CONST              : (DIGIT)+'.'(DIGIT)* | '.'(DIGIT)+
                        ;
BOOL_CONST              : ASSIGNMENT_TYPE_TRUE | ASSIGNMENT_TYPE_FALSE
                        ;
                        // any double-quotes in the string must be escaped with \
STRING_CONST            : QUOTATION_DOUBLE .*? QUOTATION_DOUBLE
                        ;

//----------------------------------------------------------------------
// Base
//----------------------------------------------------------------------
type                    : nativetype | commontype
                        ;
identifier              : ID
                        ;

//////////////////////////////////////////////////////////////////////////////////////////////
// TYPES
//////////////////////////////////////////////////////////////////////////////////////////////
TYPE_BOOLEAN            : 'boolean'
                        ;
TYPE_CODE               : 'code'
                        ;
TYPE_HANDLE             : 'handle'
                        ;
TYPE_INTEGER            : 'integer'
                        ;
TYPE_REAL               : 'real'
                        ;
TYPE_STRING             : 'string'
                        ;
TYPE_ARRAY              : 'array'
                        ;
nativetype              : TYPE_BOOLEAN
                        | TYPE_CODE
                        | TYPE_HANDLE
                        | TYPE_INTEGER
                        | TYPE_REAL
                        | TYPE_STRING
                        | TYPE_ARRAY
                        ;
TYPE_ABILITY            : 'ability'
                        ;
TYPE_AGENT              : 'agent'
                        ;
TYPE_AIDIFFICULTY       : 'aidifficulty'
                        ;
TYPE_ALLIANCETYPE       : 'alliancetype'
                        ;
TYPE_ATTACKTYPE         : 'attacktype'
                        ;
TYPE_BLENDMODE          : 'blendmode'
                        ;
TYPE_BOOLEXPR           : 'boolexpr'
                        ;
TYPE_BUFF               : 'buff'
                        ;
TYPE_BUTTON             : 'button'
                        ;
TYPE_CAMERAFIELD        : 'camerafield'
                        ;
TYPE_CAMERASETUP        : 'camerasetup'
                        ;
TYPE_CONDITIONFUNC      : 'conditionfunc'
                        ;
TYPE_DAMAGETYPE         : 'damagetype'
                        ;
TYPE_DEFEATCONDITION    : 'defeatcondition'
                        ;
TYPE_DESTRUCTABLE       : 'destructable'
                        ;
TYPE_DIALOG             : 'dialog'
                        ;
TYPE_DIALOGEVENT        : 'dialogevent'
                        ;
TYPE_EFFECT             : 'effect'
                        ;
TYPE_EVENTID            : 'eventid'
                        ;
TYPE_FGAMESTATE         : 'fgamestate'
                        ;
TYPE_FILTERFUNC         : 'filterfunc'
                        ;
TYPE_FOGMODIFIER        : 'fogmodifier'
                        ;
TYPE_FOGSTATE           : 'fogstate'
                        ;
TYPE_FORCE              : 'force'
                        ;
TYPE_GAMECACHE          : 'gamecache'
                        ;
TYPE_GAMEDIFFICULTY     : 'gamedifficulty'
                        ;
TYPE_GAMEEVENT          : 'gameevent'
                        ;
TYPE_GAMESPEED          : 'gamespeed'
                        ;
TYPE_GAMESTATE          : 'gamestate'
                        ;
TYPE_GAMETYPE           : 'gametype'
                        ;
TYPE_GROUP              : 'group'
                        ;
TYPE_HASHTABLE          : 'hashtable'
                        ;
TYPE_IGAMESTATE         : 'igamestate'
                        ;
TYPE_IMAGE              : 'image'
                        ;
TYPE_ITEM               : 'item'
                        ;
TYPE_ITEMPOOL           : 'itempool'
                        ;
TYPE_ITEMTYPE           : 'itemtype'
                        ;
TYPE_LEADERBOARD        : 'leaderboard'
                        ;
TYPE_LIGHTNING          : 'lightning'
                        ;
TYPE_LIMITOP            : 'limitop'
                        ;
TYPE_LOCATION           : 'location'
                        ;
TYPE_MAPCONTROL         : 'mapcontrol'
                        ;
TYPE_MAPDENSITY         : 'mapdensity'
                        ;
TYPE_MAPFLAG            : 'mapflag'
                        ;
TYPE_MAPSETTING         : 'mapsettings'
                        ;
TYPE_MAPVISIBILITY      : 'mapvisibility'
                        ;
TYPE_MULTIBOARD         : 'multiboard'
                        ;
TYPE_MULTIBOARDITEM     : 'multiboarditem'
                        ;
TYPE_PATHINGTYPE        : 'pathingtype'
                        ;
TYPE_PLACEMENT          : 'placement'
                        ;
TYPE_PLAYER             : 'player'
                        ;
TYPE_PLAYERCOLOR        : 'playercolor'
                        ;
TYPE_PLAYEREVENT        : 'playerevent'
                        ;
TYPE_PLAYERGAMERESULT   : 'playergameresult'
                        ;
TYPE_PLAYERSCORE        : 'playerscore'
                        ;
TYPE_PLAYERSLOTSTATE    : 'playerslotstate'
                        ;
TYPE_PLAYERSTATE        : 'playerstate'
                        ;
TYPE_PLAYERUNITEVENT    : 'playerunitevent'
                        ;
TYPE_QUEST              : 'quest'
                        ;
TYPE_QUESTITEM          : 'questitem'
                        ;
TYPE_RACE               : 'race'
                        ;
TYPE_RACEPREFERENCE     : 'racepreference'
                        ;
TYPE_RARITYCONTROL      : 'raritycontrol'
                        ;
TYPE_RECT               : 'rect'
                        ;
TYPE_REGION             : 'region'
                        ;
TYPE_SOUND              : 'sound'
                        ;
TYPE_SOUNDTYPE          : 'soundtype'
                        ;
TYPE_STARTLOCPRIO       : 'startlocprio'
                        ;
TYPE_TERRAINDEFORMATION : 'terraindeformation'
                        ;
TYPE_TEXMAPFLAGS        : 'texmapflags'
                        ;
TYPE_TEXTTAG            : 'texttag'
                        ;
TYPE_TIMER              : 'timer'
                        ;
TYPE_TIMERDIALOG        : 'timerdialog'
                        ;
TYPE_TRACKABLE          : 'trackable'
                        ;
TYPE_TRIGGER            : 'trigger'
                        ;
TYPE_TRIGGERACTION      : 'triggeraction'
                        ;
TYPE_TRIGGERCONDITION   : 'triggercondition'
                        ;
TYPE_UBERSPLAT          : 'ubersplat'
                        ;
TYPE_UNIT               : 'unit'
                        ;
TYPE_UNITEVENT          : 'unitevent'
                        ;
TYPE_UNITPOOL           : 'unitpool'
                        ;
TYPE_UNITSTATE          : 'unitstate'
                        ;
TYPE_UNITTYPE           : 'unittype'
                        ;
TYPE_VERSION            : 'version'
                        ;
TYPE_VOLUMEGROUP        : 'volumegroup'
                        ;
TYPE_WEAPONTYPE         : 'weapontype'
                        ;
TYPE_WEATHEREFFECT      : 'weathereffect'
                        ;
TYPE_WIDGET             : 'widget'
                        ;
TYPE_WIDGETEVENT        : 'widgetevent'
                        ;
commontype              : TYPE_ABILITY
                        | TYPE_AGENT
                        | TYPE_AIDIFFICULTY
                        | TYPE_ALLIANCETYPE
                        | TYPE_ATTACKTYPE
                        | TYPE_BLENDMODE
                        | TYPE_BOOLEXPR
                        | TYPE_BUFF
                        | TYPE_BUTTON
                        | TYPE_CAMERAFIELD
                        | TYPE_CAMERASETUP
                        | TYPE_CONDITIONFUNC
                        | TYPE_DAMAGETYPE
                        | TYPE_DEFEATCONDITION
                        | TYPE_DESTRUCTABLE
                        | TYPE_DIALOG
                        | TYPE_DIALOGEVENT
                        | TYPE_EFFECT
                        | TYPE_EVENTID
                        | TYPE_FGAMESTATE
                        | TYPE_FILTERFUNC
                        | TYPE_FOGMODIFIER
                        | TYPE_FOGSTATE
                        | TYPE_FORCE
                        | TYPE_GAMECACHE
                        | TYPE_GAMEDIFFICULTY
                        | TYPE_GAMEEVENT
                        | TYPE_GAMESPEED
                        | TYPE_GAMESTATE
                        | TYPE_GAMETYPE
                        | TYPE_GROUP
                        | TYPE_HASHTABLE
                        | TYPE_IGAMESTATE
                        | TYPE_IMAGE
                        | TYPE_ITEM
                        | TYPE_ITEMPOOL
                        | TYPE_ITEMTYPE
                        | TYPE_LEADERBOARD
                        | TYPE_LIGHTNING
                        | TYPE_LIMITOP
                        | TYPE_LOCATION
                        | TYPE_MAPCONTROL
                        | TYPE_MAPDENSITY
                        | TYPE_MAPFLAG
                        | TYPE_MAPSETTING
                        | TYPE_MAPVISIBILITY
                        | TYPE_MULTIBOARD
                        | TYPE_MULTIBOARDITEM
                        | TYPE_PATHINGTYPE
                        | TYPE_PLACEMENT
                        | TYPE_PLAYER
                        | TYPE_PLAYERCOLOR
                        | TYPE_PLAYEREVENT
                        | TYPE_PLAYERGAMERESULT
                        | TYPE_PLAYERSCORE
                        | TYPE_PLAYERSLOTSTATE
                        | TYPE_PLAYERSTATE
                        | TYPE_PLAYERUNITEVENT
                        | TYPE_QUEST
                        | TYPE_QUESTITEM
                        | TYPE_RACE
                        | TYPE_RACEPREFERENCE
                        | TYPE_RARITYCONTROL
                        | TYPE_RECT
                        | TYPE_REGION
                        | TYPE_SOUND
                        | TYPE_SOUNDTYPE
                        | TYPE_STARTLOCPRIO
                        | TYPE_TERRAINDEFORMATION
                        | TYPE_TEXMAPFLAGS
                        | TYPE_TEXTTAG
                        | TYPE_TIMER
                        | TYPE_TIMERDIALOG
                        | TYPE_TRACKABLE
                        | TYPE_TRIGGER
                        | TYPE_TRIGGERACTION
                        | TYPE_TRIGGERCONDITION
                        | TYPE_UBERSPLAT
                        | TYPE_UNIT
                        | TYPE_UNITEVENT
                        | TYPE_UNITPOOL
                        | TYPE_UNITSTATE
                        | TYPE_UNITTYPE
                        | TYPE_VERSION
                        | TYPE_VOLUMEGROUP
                        | TYPE_WEAPONTYPE
                        | TYPE_WEATHEREFFECT
                        | TYPE_WIDGET
                        | TYPE_WIDGETEVENT
                        ;
//////////////////////////////////////////////////////////////////////////////////////////////

ASSIGNMENT_TYPE_NULL    : 'null'
                        ;
ASSIGNMENT_TYPE_INTEGER : DIGIT
                        ;
ASSIGNMENT_TYPE_REAL    : REAL_CONST
                        ;
ASSIGNMENT_TYPE_TRUE    : 'true'
                        ;
ASSIGNMENT_TYPE_FALSE   : 'false'
                        ;
KEYWORD_DEBUG           : 'debug'
                        ;
KEYWORD_EXTENDS         : 'extends'
                        ;
KEYWORD_NATIVE          : 'native'
                        ;
KEYWORD_FUNCTION        : 'function'
                        ;
KEYWORD_ENDFUNCTION     : 'endfunction'
                        ;
KEYWORD_TAKES           : 'takes'
                        ;
KEYWORD_NOTHING         : 'nothing'
                        ;
KEYWORD_RETURNS         : 'returns'
                        ;
KEYWORD_CALL            : 'call'
                        ;
KEYWORD_RETURN          : 'return'
                        ;
KEYWORD_GLOBALS         : 'globals'
                        ;
KEYWORD_ENDGLOBALS      : 'endglobals'
                        ;
KEYWORD_LOCAL           : 'local'
                        ;
KEYWORD_CONSTANT        : 'constant'
                        ;
KEYWORD_SET             : 'set'
                        ;
KEYWORD_IF              : 'if'
                        ;
KEYWORD_THEN            : 'then'
                        ;
KEYWORD_ELSEIF          : 'elseif'
                        ;
KEYWORD_ELSE            : 'else'
                        ;
KEYWORD_ENDIF           : 'endif'
                        ;
KEYWORD_LOOP            : 'loop'
                        ;
KEYWORD_EXITWHEN        : 'exitwhen'
                        ;
KEYWORD_ENDLOOP         : 'endloop'
                        ;
KEYWORD_TYPE            : 'type'
                        ;
ID                      : (LETTER)((LETTER|DIGIT|'_'+)*)?
                        ;
fragment
LETTER                  : '\u0024' // $
                        | '\u0041'..'\u005a' // A-Z
                        | '\u005f' // _
                        | '\u0061'..'\u007a' // a-z
                        | '\u00c0'..'\u00d6' // Latin Capital Letter A with grave - Latin Capital letter O with diaeresis
                        | '\u00d8'..'\u00f6' // Latin Capital letter O with stroke - Latin Small Letter O with diaeresis
                        | '\u00f8'..'\u00ff' // Latin Small Letter O with stroke - Latin Small Letter Y with diaeresis
                        | '\u0100'..'\u1fff' // Latin Capital Letter A with macron - Latin Small Letter O with stroke and acute
                        | '\u3040'..'\u318f' // Hiragana
                        | '\u3300'..'\u337f' // CJK compatibility
                        | '\u3400'..'\u3d2d' // CJK compatibility
                        | '\u4e00'..'\u9fff' // CJK compatibility
                        | '\uf900'..'\ufaff' // CJK compatibility
                        ;

fragment
DIGIT                   : '0'..'9'/*'\u0030'..'\u0039' // 0-9
                        | '\u0660'..'\u0669' // Arabic-Indic Digit 0-9
                        | '\u06f0'..'\u06f9' // Extended Arabic-Indic Digit 0-9
                        | '\u0966'..'\u096f' // Devanagari 0-9
                        | '\u09e6'..'\u09ef' // Bengali 0-9
                        | '\u0a66'..'\u0a6f' // Gurmukhi 0-9
                        | '\u0ae6'..'\u0aef' // Gujarati 0-9
                        | '\u0b66'..'\u0b6f' // Oriya 0-9
                        | '\u0be7'..'\u0bef' // Tami 0-9
                        | '\u0c66'..'\u0c6f' // Telugu 0-9
                        | '\u0ce6'..'\u0cef' // Kannada 0-9
                        | '\u0d66'..'\u0d6f' // Malayala 0-9
                        | '\u0e50'..'\u0e59' // Thai 0-9
                        | '\u0ed0'..'\u0ed9' // Lao 0-9
                        | '\u1040'..'\u1049' // Myanmar 0-9?*/
                        ;
OPENPARENTHESIS         : '('
                        ;
CLOSEPARENTHESIS        : ')'
                        ;
OPENBRACKET             : '['
                        ;
CLOSEBRACKET            : ']'
                        ;
QUOTATION_DOUBLE        : '"'
                        ;
QUOTATION_SINGLE        : '\''
                        ;
COMMA                   : ','
                        ;
WS                      : (' ' | '\t' | '\n'+)+ {skip();}
                        ;
LINE_COMMENT            : '//' ~[\r\n]* -> channel(HIDDEN)
                        ; 
```

并且来自[ANTLRWorks](http://tunnelvisionlabs.com/products/demo/antlrworks) ...
[这个文件](https://docs.google.com/file/d/0B8701ZFTpbjmQU1WUnZpRzh5Umc/edit?usp=sharing)是使用 TestRig 的输出日志（从第一个错误开始），这里是第一个错误发生的生成解析树的图像：

![](../Images/36a276c3da0fbac3d683a267ed643a53.png) *[点击这里放大](https://i.imgur.com/H2IKbxC.png)*

***致任何***可以帮助我解决此问题的人：如果您被标记为该问题的答案，我将很乐意为您的答案以及您接下来的 3 个问题投票。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:15:48.437

查看`if`语句的 BNF 规则时：

```
ifthenelse
         ::= 'if' expr 'then' newline statement_list else_clause? 'endif'
else_clause
         ::= 'else' newline statement_list
           | 'elseif' expr 'then' newline statement_list else_clause? 
```

你的翻译：

```
if_statement            : KEYWORD_IF expression KEYWORD_THEN statement_list else_clause? KEYWORD_ENDIF
                        ;
else_clause             : KEYWORD_ELSEIF ((OPENPARENTHESIS expression CLOSEPARENTHESIS) | expression) KEYWORD_THEN statement_list
                        | KEYWORD_ELSE ((OPENPARENTHESIS statement_list CLOSEPARENTHESIS) | statement_list) else_clause?
                        ; 
```

不正确（您有一个可选`else_clause`选项`KEYWORD_ELSE`）。

它应该是：

```
if_statement            : KEYWORD_IF expression KEYWORD_THEN statement_list else_clause? KEYWORD_ENDIF
                        ;
else_clause             : KEYWORD_ELSE statement_list
                        | KEYWORD_ELSEIF expression KEYWORD_THEN statement_list else_clause?
                        ; 
```

而不是你不需要，`((OPENPARENTHESIS expression CLOSEPARENTHESIS) | expression)`因为 a`expression`已经匹配`'(' expression ')'`。

但上述观察结果不是您的问题的原因。真正的问题是您的语法不考虑一元表达式。`-1`它与表达式中的不匹配`si__DroneSystem___data_V[this]!=-1`。

`expression`将您的规则更改为：

```
expression              : OPENPARENTHESIS expression CLOSEPARENTHESIS
                        | OPENBRACKET expression CLOSEBRACKET
                        | func_call
                        | array_ref
                        | function_reference
                        | const_statement
                        | identifier
                        | '+' expression
                        | '-' expression
                        | 'not' expression
                        | expression ('*'|'/') expression
                        | expression ('+'|'-') expression
                        | expression ('>'|'<'|'=='|'!='|'>='|'<=') expression
                        | expression ('and'|'or') expression
                        | identifier
                        ; 
```

现在像这样输入：

```
if this==null then
  return
elseif(si__DroneSystem___data_V[this]!=-1)then
  return
endif 
```

将被解析如下：

![在此处输入图像描述](../Images/1ca38c44e6c40c1169b98a2ee5787e57.png)

# java - Matrix.solve() 使用 RationalFunction 与使用 Rational 给出不同的答案

> ID：15188628
> 
> 赞同：1
> 
> 时间：2013-03-03T17:44:01.063
> 
> 标签：java, linear-algebra, jscience

我正在使用*Jscience*线性代数模块来解决有理数的线性系统。这可以按预期工作并给出正确的结果：

```
public static void main(String[] args) {
    DenseMatrix<Rational> m = DenseMatrix.valueOf(
        DenseVector.valueOf(r(1, 1), r(-1, 1), r(0, 1), r(0, 1), r(1, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(1, 1), r(-1, 1), r(0, 1), r(2, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(-1, 1), r(1, 1)),
        DenseVector.valueOf(r(1, 1), r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(1, 1), r(0, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(-1, 1), r(1, 1), r(0, 1), r(0, 1), r(0, 1)));

    DenseVector<Rational> v = DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(1, 1), r(1, 2));

    Vector<Rational> sol = m.solve(v);

    System.out.println(sol);
}

private static Rational r(int n, int d) {
    return Rational.valueOf(n, d);
} 
```

`{0/1, 1/6, 2/3, 1/1, 1/6, 1/6}`代码将在执行时打印。

我的意图是解决这个系统中的一个组件的许多不同值`v`，所以我将代码转换为使用`RationalFunction<Rational>`而不是`Rational`. 在第一步中，我还没有引入 a `Variable`，every`RationalFunction<Rational>`是一个常数。我的理解是，这应该给出与以前相同的结果：

```
public static void main(String[] args) {
    DenseMatrix<RationalFunction<Rational>> m = DenseMatrix.valueOf(
        DenseVector.valueOf(r(1, 1), r(-1, 1), r(0, 1), r(0, 1), r(1, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(1, 1), r(-1, 1), r(0, 1), r(2, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(-1, 1), r(1, 1)),
        DenseVector.valueOf(r(1, 1), r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(1, 1), r(0, 1), r(0, 1)),
        DenseVector.valueOf(r(0, 1), r(-1, 1), r(1, 1), r(0, 1), r(0, 1), r(0, 1)));

    DenseVector<RationalFunction<Rational>> v = DenseVector.valueOf(r(0, 1), r(0, 1), r(0, 1), r(0, 1), r(1, 1), r(1, 2));

    Vector<RationalFunction<Rational>> sol = m.solve(v);

    System.out.println(sol);
}

private static RationalFunction<Rational> r(int n, int d) {
    return RationalFunction.valueOf(Polynomial.valueOf(Rational.valueOf(n, d), Term.ONE), Polynomial.valueOf(Rational.ONE, Term.ONE));
} 
```

但这在执行时会打印以下内容，即`0/0`对于每个组件：

```
{([0/1])/([0/1]), ([0/1])/([0/1]), ([0/1])/([0/1]), ([0/1])/([0/1]), ([0/1])/([0/1]), ([0/1])/([0/1])} 
```

`Matrix.solve()`真的支持使用吗`RationalFunction`？当我使用一对一矩阵对其进行测试时，它确实有效。

我接下来应该去哪里解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T10:07:16.320

在[有理函数](http://en.wikipedia.org/wiki/Rational_function)中，分量多项式的系数可以取自任何[域](http://en.wikipedia.org/wiki/Field_%28mathematics%29)，包括有理数。A`RationalFunction<Rational>`反映了这种用法，但从`solve()`不评估每个矩阵条目定义的函数。

一种方法是构造一个新矩阵，其中每个条目都设置为`r.evaluate()`. 实际上，您可以将第二个示例中的问题转换为可以解决的问题，如第一个示例中所示。

# wordpress - Wordpress 动态设计幻灯片

> ID：15188630
> 
> 赞同：0
> 
> 时间：2013-03-03T17:44:12.110
> 
> 标签：wordpress, slideshow

我需要一个 wordpress 插件，它可以让客户在主页上为幻灯片添加图像，但是很容易集成到我的设计中。（我的设计只有三个div，所以需要循环遍历三个div）

我对 Wordpress 幻灯片插件没有太多经验，所以我希望这里有人知道一个适合我需要的插件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:26:14.590

您可以使用[http://wordpress.org/extend/plugins/smooth-slider/](http://wordpress.org/extend/plugins/smooth-slider/) 它是一个非常易于使用的滑块

# c# - 代码分析规则 CA1062 行为

> ID：15188631
> 
> 赞同：11
> 
> 时间：2013-03-03T17:44:15.227
> 
> 标签：c#, .net, visual-studio-2012, code-analysis, fxcop

我有以下字符串的扩展方法：

```
public static bool IsNullOrEmpty(this string target)
{
    return string.IsNullOrEmpty(target);
} 
```

...在代码中我使用它如下：

```
public static string DoSomethingOnString(this string target)
{
    if (target.IsNullOrEmpty())
        return target;

    target = target.Trim();  //This line causes CA1062 violation

    return target;
} 
```

现在，如果我对此进行代码分析，就会违反规则[CA1062](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA1062%29;k%28TargetFrameworkMoniker-.NETPortable,Version=v4.0%29;k%28DevLang-csharp%29&rd=true)。但是，如果我将代码更改为：

```
public static string DoSomethingOnString(this string target)
{
    if (string.IsNullOrEmpty(target))  //CHANGED LINE
        return target;

    target = target.Trim();  //This line DOES NOT cause CA1062 violation anymore

    return target;
} 
```

……然后就好了。

为什么它认为我没有在第一个示例中检查 null 条件？它是否只检查 string.IsNullOrEmpty 或 string.IsNullOrWhiteSpace？有没有办法让 CA 识别我的扩展方法，或者我需要禁止这条规则？

**更新：** 如果您有同样的问题，您可以对我在 MS Connect 上提交的反馈项目进行投票： [代码分析规则 CA1062 引发误报](https://connect.microsoft.com/VisualStudio/feedback/details/780543/code-analysis-rule-ca1062-raises-false-alarm)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T17:47:58.270

> 为什么它认为我没有在第一个示例中检查 null 条件？

很简单，如果您的`IsNullOrEmpty`扩展方法与`string.IsNullOrEmpty`. 它没有意识到如果`target`为空，`IsNullOrEmpty`将返回`true`并且您的方法将退出。基本上我怀疑它具有内置知识`string.IsNullOrEmpty`。[Code Contracts](http://research.microsoft.com/contracts)在这里更有可能取得成功，因为与 Code Contracts 的深层推理相比，我认为 FxCop 只对您的代码执行的操作进行相对较浅的检查。你可以装饰你的`IsNullOrEmpty`方法[`ValidatedNotNullAttribute`](http://esmithy.net/2011/03/15/suppressing-ca1062/)来通知 FxCop 发生了什么。

```
public static bool IsNullOrEmpty([ValidatedNotNullAttribute] this string target)
{
    return string.IsNullOrEmpty(target);
}
//The naming is important to inform FxCop
sealed class ValidatedNotNullAttribute : Attribute { } 
```

这只是代码分析有时过于急于批评的一个例子。这是我在使用过的几乎所有代码分析工具中都看到的。您的选择通常是：

*   更改您的代码以绕过代码分析工具，即使它之前没问题
*   在手动检查每个规则后，抑制特定站点的规则
*   如果它们经常给出误报，则禁止整个规则
*   完全放弃代码分析工具

当然，您还应该记录错误或功能请求...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T10:17:13.397

看起来他们终于在 roslyn 分析器中解决了这个问题。

此处的错误报告： [https ://github.com/dotnet/roslyn-analyzers/issues/2369](https://github.com/dotnet/roslyn-analyzers/issues/2369)

# breeze - 获取一条数据库记录，显示，更新，然后保存回数据库

> ID：15188634
> 
> 赞同：1
> 
> 时间：2013-03-03T17:44:37.060
> 
> 标签：breeze

解决了！这是一个淘汰赛问题（错误绑定）。但也许有人喜欢争论或评论一般的代码（数据服务、视图模型等）。

我尝试构建一个 Breeze 示例，在其中获得一个数据库记录（使用**fetchEntityByKey**），显示它以进行更新，然后使用保存按钮将更改写回数据库。我不知道如何让它工作。

我试图拥有一个**数据服务**（'class'）和一个**viewmodel**（'class'），将带有 Knockout 的 viewmodel 绑定到视图。

如果有人可以提供样本或提供一些提示，我将不胜感激。

谢谢，哈利

```
 var dataservice = (function () {
     var serviceName = "/api/amms/";
     breeze.NamingConvention.camelCase.setAsDefault();
     var entityManager = new breeze.EntityManager(serviceName);

     var dataservice = {
         serviceName: serviceName,
         entityManager: entityManager,
         init: init,
         saveChanges: saveChanges,
         getLocation: getLocation
     };

     return dataservice;

     function init() {
         return getMetadataStore();
     }

     function getMetadataStore() {
         return entityManager.fetchMetadata()
             .then(function (result) { return dataservice; })
             .fail(function () { window.alert("fetchMetadata:fail"); })
             .fin(function () { });
     }

     function saveChanges() {
         return entityManager.saveChanges()
             .then(function (result) { return result; })
             .fail(function () { window.alert("fetchEntityByKey:fail"); })
             .fin(function () { });
     }

     function getLocation() {
         return entityManager.fetchEntityByKey("LgtLocation", 1001, false)
             .then(function (result) { return result.entity; })
             .fail(function () { window.alert("fetchEntityByKey:fail"); })
             .fin(function () { });
     }
 })();

 var viewmodel = (function () {
     var viewmodel = {
         location: null,
         error: ko.observable(""),
         init: init,
         saveChanges: null
     };

     return viewmodel;

     function init() {
         return dataservice.init().then(function () {
             viewmodel.saveChanges = dataservice.saveChanges;
             return getLocation();
         })
     }

     function getLocation() {
         return dataservice.getLocation().then(function (result) {
             return viewmodel.location = result;
         })
     }
 })();

 viewmodel.init().then(function () {
     ko.applyBindings(viewmodel);
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:15:57.377

很高兴你解决了。不禁注意到您添加了大量的无操作回调。我想不出这样做的理由。您还明确要求提供元数据。但是您的调用`fetchEntityByKey`会为您隐式执行此操作，因为**正如您调用的那样**，它总是会转到服务器。

此外，最好在数据服务内的失败回调中重新抛出错误，以便调用者（例如，ViewModel）可以添加自己的失败处理程序。如果不重新抛出，调用者的失败回调将听不到它（Q Promise 机制就像第一个失败处理程序“解决”了问题一样）。

因此，您的数据服务可以简化为：

```
var数据服务=（函数（）{
     微风.NamingConvention.camelCase.setAsDefault();
     var serviceName = "/api/amms/";
     var entityManager = 新微风.EntityManager(serviceName);

     变量数据服务 = {
         serviceName: serviceName, // 你为什么要导出这个？
         实体管理器：实体管理器，
         保存更改：保存更改，
         获取位置：获取位置
     };

     返回数据服务；

     函数 saveChanges() {
         返回 entityManager.saveChanges()
             .失败（函数（）{
                 window.alert("保存更改失败：" + error.message);
                 抛出错误；// 重新抛出，以便调用者可以听到
             })
     }

     函数获取位置（）{
         return entityManager.fetchEntityByKey("LgtLocation", 1001, false)
             .then(function (result) { return result.entity; })
             .失败（函数（）{
                 window.alert("fetchEntityByKey 失败：" + error.message);
                 抛出错误；// 重新抛出，以便调用者可以听到
             })
     }
 })();

```

我不想对此做太多。也许你给了我们更实质性的东西的精简版。但是，如果您（或读者）认为这些方法总是必要的，我想明确指出它们不是。

# apache - 301 重定向 category/category/index.php 到 category/category.html

> ID：15188635
> 
> 赞同：0
> 
> 时间：2013-03-03T17:44:48.620
> 
> 标签：apache, .htaccess, mod-rewrite, http-status-code-301

我把头撞在键盘上，无法弄清楚这一点，也无法在谷歌上得到答案。

我有一堆旧网址，我想 301 重定向。例如 parent/child* */index.php* * 必须成为 parent* */child.html* *

这是我写的：

```
RewriteCond %{REQUEST_URI} /index.php$
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)/index.php$ $1.html? [L,R=301] 
```

没有向 index.php 发送请求，所以我将第二个条件设为空。如果我在[这个重写规则测试器](http://martinmelin.se/rewrite-rule-tester/)上测试它会失败，除非我手动填写 request_URI 值（参见上面的链接）

对于这方面的任何帮助，我将不胜感激。如果我不能解决它，我将不得不手动完成`Redirect 301 oldurl newurl`，这将需要很长时间！

# delphi - OnKeyDown 不适用于从主窗体调用的对话框（也使用 OnKeyDown）

> ID：15188636
> 
> 赞同：2
> 
> 时间：2013-03-03T17:44:53.673
> 
> 标签：delphi, delphi-2010

德尔福 2010

我在主窗体上使用 OnFormKeyDown 事件，并且基本上在 Dialog 上使用相同的事件

//主窗体

```
procedure TfrmMain.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
   case Key of
      VK_DOWN: btnLast.OnClick(Self);
      VK_Up:  btnFirst.OnClick(Self);
      VK_Left:  btnPrev.OnClick(Self);
      VK_Right:  btnNext.OnClick(Self);
    end;
end;

procedure TfrmMain.mniShowOwnedClick(Sender: TObject);
var
 I: Integer;
begin
 frmMain.KeyPreview:= False;
 frmOwned.KeyPreview:= True;
 frmOwned.Owned2.Clear;
 for I := 0 to Tags.Count - 1 do
  if Owned.IndexOf(Tags.Names[I]) <> -1 then
     frmOwned.Owned2.Add(Tags[I]);
 if frmOwned.ShowModal = mrOK then
 begin
  frmMain.KeyPreview:= True;
  frmOwned.KeyPreview:= False;
 end;
end; 
```

//对话

```
procedure TfrmOwned.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
   case Key of
      VK_DOWN: btnLast.OnClick(Self);
      VK_Up:  btnFirst.OnClick(Self);
      VK_Left:  btnPrev.OnClick(Self);
      VK_Right:  btnNext.OnClick(Self);
    end;
end; 
```

表单的 OnKeyDown 工作正常，但我似乎无法让对话框工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:15:41.820

问题是这些键被用作对话导航键。因此，他们从未参加过`OnKeyDown`活动。

老实说，我很难理解他们为什么要为您的主表单`OnKeyDown`事件开火。我无法在我的测试环境中做到这一点。那是因为我在表单中添加了一个按钮。这足以意味着箭头键被视为导航键。尝试使用单个表单创建一个应用程序并添加一些按钮。然后运行应用程序并使用箭头键在按钮之间移动焦点。当我说箭头键被视为导航键时，这就是我的意思。

我希望您的两个表单之间的区别在于主表单没有可以通过箭头键导航的内容，但模态表单可以。

现在，您可以停止将箭头键视为导航键。像这样：

```
type
  TMyForm = class(TForm)
  ....
  protected
    procedure CMDialogKey(var Message: TCMDialogKey); message CM_DIALOGKEY;
  ....
  end;
....
procedure TMyForm.CMDialogKey(var Message: TCMDialogKey);
begin
  case Message.CharCode of
  VK_LEFT, VK_RIGHT, VK_UP, VK_DOWN:
    Message.Result := 0;
  else
    inherited;
  end;
end; 
```

但是，在我看来，更好的解决方案是停止尝试使用`OnKeyDown`事件来实现快捷方式。这似乎是错误的解决方案。正确的解决方案是使用动作。创建一个动作列表。为第一个、最后一个、上一个和下一个动作添加动作。给他们适当的`ShortCut`属性。将这些操作分配给您的按钮。工作完成了。

这样做的好处之一是您可以停止尝试伪造按钮单击事件。就其价值而言，打电话`OnClick`是错误的做法。`Click`如果您真的需要这样做，请调用按钮的方法。但是，使用一个动作，一切都会得到解决。

另一个好处是您将不再需要与`KeyPreview`. 简单地说，如果你想实现捷径，使用`TAction.ShortCut`.

# python - 构造函数中相同类型的不同对象的变量都引用同一个对象

> ID：15188637
> 
> 赞同：0
> 
> 时间：2013-03-03T17:44:59.330
> 
> 标签：python, list, object, constructor, instantiation

这是我第一次在这里发帖，而且我是 Python 新手，所以如果我有什么问题，请耐心等待！我已经看到了与此类似的问题，但看不到明确的解决方案。这必须有一个简单的解决方案，但它让我整天感到沮丧。

我正在尝试在“Board”类的构造函数中创建“Slot”类的多个对象。制作每个对象后，我将其附加到列表中。最后，我将遍历列表中的每个对象并调用“getHandles”方法，该方法应该输出它们独特的结果。而是显示最后一个槽对象的结果。

板类构造函数：

```
class Board:
slots = []

def __init__(self):
    slot1 = Slot(1); self.slots.append(slot1);
    slot2 = Slot(2); self.slots.append(slot2);
    slot3 = Slot(3); self.slots.append(slot3);
    slot4 = Slot(4); self.slots.append(slot4);
    slot5 = Slot(5); self.slots.append(slot5);
    slot6 = Slot(6); self.slots.append(slot6);
    slot7 = Slot(7); self.slots.append(slot7);
    slot8 = Slot(8); self.slots.append(slot8);
    slot9 = Slot(9); self.slots.append(slot9);

    print("\nprinting slot objects in list 'slot'\n");
    counter = 0;
    while counter < len(self.slots):
        print("slot number :"+str(self.slots[counter].getPosition()));
        print("slot value :"+str(self.slots[counter].getHandles()));
        counter +=1; 
```

插槽类构造函数：

```
 #Slot class constructor
def __init__(self,n):
    self.setPosition(n);
    positions = coords.getLargeGridPosition(n);
    self.U[2] = positions[1]; self.D[2] = positions[2];
    self.L[2] = positions[3]; self.R[2] = positions[4];

    print("made slot object : "+str(self.getPosition()));
    print("handle values: ");
    self.getHandles();
    print(" - ");

def getHandles(self):
    print(" U:"+str(self.U)+" D:"+str(self.D)+" L:"+str(self.L)+" R:"+str(self.R)); 
```

这就是我制作“Board”对象时得到的结果：

第一部分输出（制作插槽并在 Board 构造函数中附加）：

```
>>> b = Board()
made slot object : 1
handle values: 
U:[1, 2, 2] D:[2, 1, 20] L:[3, 4, 10] R:[4, 3, 12]
- 
made slot object : 2
handle values: 
U:[1, 2, 5] D:[2, 1, 23] L:[3, 4, 13] R:[4, 3, 15]
- 
made slot object : 3
handle values: 
U:[1, 2, 8] D:[2, 1, 26] L:[3, 4, 16] R:[4, 3, 18]
- 
made slot object : 4
handle values: 
U:[1, 2, 29] D:[2, 1, 47] L:[3, 4, 37] R:[4, 3, 39]
- 
```

对于所有九个对象，依此类推。第二部分输出（为列表中的每个对象调用 getHandle 方法）：

```
printing slot objects in list 'slot'

slot number :1
U:[1, 2, 62] D:[2, 1, 80] L:[3, 4, 70] R:[4, 3, 72]
slot value :None
slot number :2
U:[1, 2, 62] D:[2, 1, 80] L:[3, 4, 70] R:[4, 3, 72]
slot value :None
slot number :3
U:[1, 2, 62] D:[2, 1, 80] L:[3, 4, 70] R:[4, 3, 72]
slot value :None
slot number :4
U:[1, 2, 62] D:[2, 1, 80] L:[3, 4, 70] R:[4, 3, 72]
slot value :None
slot number :5
U:[1, 2, 62] D:[2, 1, 80] L:[3, 4, 70] R:[4, 3, 72] 
```

对附加到列表的所有 9 个对象依此类推。如何使变量 slot1/slot2 引用单个对象？

我尝试将板对象传递给插槽构造函数，并使插槽构造函数将“自我”传递回板对象。仍然会为所有人输出单个对象的结果。我会很感激任何帮助。谢谢你。

[编辑] 文件的完整代码：希望缩进正确

```
import coords;

#store  hanndle position values

class Slot: #slot class<------------------------------------------------

    U = [1,2,"gridPosition"] #1 up
    D = [2,1,"gridPosition"] #2 down
    L = [3,4,"gridPosition"] #3 left
    R = [4,3,"gridPosition"] #4 right
    handles = [U,D,L,R] #handles 0/1/2/3

    tileValue = 0; #value 0 - 8
    tilePosition = 0; #slot 1 - 9
    overallStrain = 0; # |0-->+

    #Slot class constructor
    def __init__(self,n):
        self.setPosition(n);
        positions = coords.getLargeGridPosition(n);
        self.U[2] = positions[1]; self.D[2] = positions[2];
        self.L[2] = positions[3]; self.R[2] = positions[4];

        print("made slot object : "+str(self.getPosition()));
        print("handle values: ");
        self.getHandles();
        print(" - ");

    def getHandles(self):
        print(" U:"+str(self.U)+" D:"+str(self.D)+" L:"+str(self.L)+" R:"+str(self.R));

    #set/get position of slot(1-9)
    def setPosition(self,position):
        self.tilePosition = position;
    def getPosition(self):
        return self.tilePosition;

    #set/get tile value
    def setTileValue(self,value):
        self.TileValue = value;
    def getTileValue(self):
        return self.TileValue;

    #get handle(n) position value
    def getHandle(self,number):
        return self.handles[number]

    #get overall strain of tile
    def getTotalStrain(self):
        return self.totalStrain;
    #calculate total strain from strains of handles
    #def calculateOverallStrain(self):#<---------------
        #for handle in handles:
            #if

    #get linked tile,

class Board: #Boardclass<------------------------------------------------
    slots = []

    def __init__(self):
        slot1 = Slot(1); self.slots.append(slot1);
        slot2 = Slot(2); self.slots.append(slot2);
        slot3 = Slot(3); self.slots.append(slot3);
        slot4 = Slot(4); self.slots.append(slot4);
        slot5 = Slot(5); self.slots.append(slot5);
        slot6 = Slot(6); self.slots.append(slot6);
        slot7 = Slot(7); self.slots.append(slot7);
        slot8 = Slot(8); self.slots.append(slot8);
        slot9 = Slot(9); self.slots.append(slot9);

        print("\nprinting slot objects in list 'slot'\n");
        counter = 0;
        while counter < len(self.slots):
            print("slot number :"+str(self.slots[counter].getPosition()));
            print("slot value :"+str(self.slots[counter].getHandles()));
            counter +=1;

    #set tiles
    def setTiles(self,state):
        counter = 0;
        for slot in self.slots:
            slot.setTileValue(state[counter]);
            counter +=1;

    def getStrain(self,slot):
        tileValue = self.slots[slot].getTileValue();
        print("tile value:"+str(tileValue));
        print("handles:");
        self.slots[slot].getHandles();

        if tileValue != 0:
            linkedTiles = coords.getLinked(tileValue);
            print(str(linkedTiles));

            counter = 0;
            for l in linkedTiles:#for each linked tile
                if l != 0: #if not empty link

                    linkedTileSlot = [];#slot linked tile is set in

                    for slot in self.slots:
                        linkedTileValue = slot.getTileValue();
                        print(str(linkedTileValue));
                        if l == linkedTileValue:#found slot with linked tile
                            print("yes");
                            linkedTileSlot = slot; break;

                    ownHandle = slot.getHandle(counter);
                    print("own handle : "+str(ownHandle));
                    linkingHandle = linkedTileSlot.getHandle(ownHandle[1]-1);
                    print("linking handle : "+str(linkingHandle));
                    positions = [ownHandle[2],linkingHandle[2]]
                    print(str(positions));

                counter += 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:24:04.570

正如 Pavel 在评论中所说，在类级别定义的任何内容都是类变量，在所有实例之间共享。`__init__`您需要通过将它们分配给其中来定义这些变量`self`：

```
class Slot: #slot class<------------------------------------------------
  def __init__(self,n):    
    self.U = [1,2,"gridPosition"] #1 up
    self.D = [2,1,"gridPosition"] #2 down
    self.L = [3,4,"gridPosition"] #3 left
    self.R = [4,3,"gridPosition"] #4 right
    self.handles = [U,D,L,R] #handles 0/1/2/3

    self.tileValue = 0; #value 0 - 8
    self.tilePosition = 0; #slot 1 - 9
    self.overallStrain = 0; # |0-->+ 
```

您还应该知道，这里有很多非常单一的 Python 示例。例如，整个 Board init 应该是：

```
def __init__(self):
    self.slots = [Slot(i+1) for i in range(10)]

    print("\nprinting slot objects in list 'slot'\n");
    for slot in self.slots:
        print("slot number :%s" % slot.getPosition());
        print("slot value :%d" slot.getHandles()); 
```

此外，除非有很好的理由，否则不鼓励定义 getter 和 setter，因为您只是在访问变量，所以这里没有充分的理由。你应该分配到返回`self.position`等等。

# php - PHP Facebook API 使用用户凭据绕过登录提示

> ID：15188640
> 
> 赞同：0
> 
> 时间：2013-03-03T17:45:14.437
> 
> 标签：php, arrays, facebook, facebook-php-sdk

我正在使用[facebook api](https://github.com/facebook/facebook-php-sdk)发布数据。目前，用户每次想从我的应用程序中发布时都必须登录。我想知道是否有任何方法可以从 facebook 检索某种令牌（并将其保存到数据库）以连接用户并绕过用户登录。这是我到目前为止的代码：

```
$fbPermissions = 'publish_stream,manage_pages';
$config=array(
    'appId'=>self::FB_APPID,
    'secret'=>self::FB_SECRET
);
$this->_facebook = new Facebook($config);
$fbUser=$this->_facebook->getUser(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:06:40.850

您可能想看看[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:25:00.223

关于主要功能：

```
$bpath=realpath(dirname(__FILE__));
require_once $bpath.'/vendors/facebook-php-sdk-master/src/facebook.php';
$fbPermissions = 'publish_stream,manage_pages';
$config=array(
    'appId'=>'appid',
    'secret'=>'secret'
);
$facebook = new Facebook($config);
$access_token='someaccesstoken';
$facebook->setAccessToken($access_token);
$params=array('message' => 'testing facebook SDK');
$facebook->api('/me/feed','post',$params); 
```

关于登录功能：

```
$bpath=realpath(dirname(__FILE__));
require_once $bpath.'/vendors/facebook-php-sdk-master/src/facebook.php';
$fbPermissions = 'publish_stream,manage_pages';
$config=array(
    'appId'=>'appid',
    'secret'=>'secret'
);
$facebook = new Facebook($config);
$fbUser=$facebook->getUser();
$accesstoken=$facebook->getAccessToken(); 
```

# oracle - 使用 Oracle 视图进行批量更新

> ID：15188644
> 
> 赞同：0
> 
> 时间：2013-03-03T17:45:44.030
> 
> 标签：oracle, view, prepared-statement, batch-updates

我有一个复杂的 Oracle 视图，执行大约需要 2 - 3 秒。

我正在尝试将 Oracle 视图中的值插入到表中。

我正在使用 JdbcTemplate BatchUpdate() 将多个值插入表中。

在 BatchUpdate() 中，PreparedStatement 用于设置值。

使用 Oracle 视图会导致任何性能问题吗？

通过使用 PreparedStatement，可以预编译 SQL 语句。但是在 VIEW 的情况下，每次触发插入查询时都会执行视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:53:11.270

视图只是 SQL 语句。它们并不比底层 SQL 查询慢或快。

然而，当使用构建在其他复杂视图之上的复杂视图（多表连接和聚合）时，优化器可能会感到困惑并试图超越自己，从而导致非常糟糕的执行计划。如果您没有约束和参照完整性，问题往往会变得更糟。

最后一点是，如果您只是将数据从数据库中提取出来并重新填充，那么在数据库中执行整个操作可能会获得更好的性能。例如，假设您从数据库中提取“订单行”，然后使用“订单总数量”更新“订单标题”。在这种情况下，您可能应该执行以下操作：

```
merge
 into order_header h
using (select order_id, sum(order_qty) as order_total_qty
         from order_line
        group by order_id
       ) l
   on (h.order_id = l.order_id)
when matched then
   update
      set h.order_total_qty = l.order_total_qty; 
```

# android - MyFirstApp 上的 ClassCastException

> ID：15188645
> 
> 赞同：0
> 
> 时间：2013-03-03T17:45:46.903
> 
> 标签：android

这是我第一次阅读有关如何使用以下 URL 在 Android 上创建应用程序的教程：[MyFirstApp](http://developer.android.com/training/basics/firstapp/starting-activity.html)

当我运行它时，我通过 LogCat 在堆栈跟踪中得到了一个 ClassCastException，如下所示：

```
03-02 13:18:49.365: E/AndroidRuntime(1996): FATAL EXCEPTION: main 
03-02 13:18:49.365: E/AndroidRuntime(1996): java.lang.IllegalStateException: Could not execute method of the activity 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.view.View$1.onClick(View.java:3044) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.view.View.performClick(View.java:3511) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.view.View$PerformClick.run(View.java:14105) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.os.Handler.handleCallback(Handler.java:605) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.os.Handler.dispatchMessage(Handler.java:92) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.os.Looper.loop(Looper.java:137) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.app.ActivityThread.main(ActivityThread.java:4424) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at java.lang.reflect.Method.invokeNative(Native Method) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at java.lang.reflect.Method.invoke(Method.java:511) 
03-02 13:18:49.365: E/AndroidRuntime(1996):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-02 13:18:49.365: E/AndroidRuntime(1996):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-02 13:18:49.365: E/AndroidRuntime(1996):     at dalvik.system.NativeStart.main(Native Method)
03-02 13:18:49.365: E/AndroidRuntime(1996): Caused by: java.lang.reflect.InvocationTargetException
03-02 13:18:49.365: E/AndroidRuntime(1996):     at java.lang.reflect.Method.invokeNative(Native Method)
03-02 13:18:49.365: E/AndroidRuntime(1996):     at java.lang.reflect.Method.invoke(Method.java:511)
03-02 13:18:49.365: E/AndroidRuntime(1996):     at android.view.View$1.onClick(View.java:3039)
03-02 13:18:49.365: E/AndroidRuntime(1996):     ... 11 more
03-02 13:18:49.365: E/AndroidRuntime(1996): Caused by: java.lang.ClassCastException: com.android.internal.view.menu.ActionMenuItemView cannot be cast to android.widget.TextView
03-02 13:18:49.365: E/AndroidRuntime(1996):     at com.example.myfirstapp.MainActivity.sendMessage(MainActivity.java:34)
03-02 13:18:49.365: E/AndroidRuntime(1996):     ... 14 more 
```

这是引用 MainActivity 类中的 sendMessage(View view) 方法。最初它看起来像这样：

```
public void sendMessage(View view)
{
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

但是，这导致了相同的 ClassCastException 问题。在我的研究中，我偶然发现了这篇文章： [http ://code.google.com/p/android/issues/detail?id=32941](http://code.google.com/p/android/issues/detail?id=32941)

这表明我应该用 TextView 对象更改 EditText 对象。我这样做了。所以现在我的方法看起来像这样：

```
public void sendMessage(View view)
{
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    //EditText editText = (EditText) findViewById(R.id.edit_message);
    TextView tView = (TextView)findViewById(R.id.edit_message);
    String message = tView.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

那编译得很好。但我仍然得到与堆栈跟踪日志中所述相同的 ClassCastException 。我不知道如何解决这个问题。请指教。

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:53:51.910

在你的`res/layout/activity_main.xml`（它是默认布局文件，它可以在你的项目中以不同的方式命名），什么是类型`edit_message`？

在你的演员阵容中应该是同一个`(TextView)findViewById(R.id.edit_message);`。

# ruby - 遍历固定数组

> ID：15188655
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:46:47.783
> 
> 标签：ruby, arrays, loops, bits

我有一个`array1`初始化为 19 位长的`0`数组 ( ) 和另一个`clave`64 位长的数组 ( )。我想迭代超过`array1`64 次，同时`clave`也被检查。我这样做了：

```
def fase2
    j=0
    for i in 0..63
        @array1[j]=@array1[18].to_i^@array1[17].to_i^@array1[16].to_i^@array1[13].to_i^@clave[i].to_i
    j=j+1
    if j>19  
        j=0  
    end  
    end
    print @array1
    gets
end 
```

有没有更清洁的方法来做到这一点......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:22:44.723

我能想到一些改进。

1.  将所有变量名命名为更有意义的名称。里面有什么`@array1`？整数？考虑调用它`@ints`。将数组称为复数名称很好。如果可能的话，`j`也是如此。`i`

2.  使用`(0..63).each do |i|`而不是`for i in 0..63`. 更像红宝石

3.  在运算符之间使用间距，尤其是等于。`j = 0`不是`j=0`

4.  小条件可以放在一行：`j = 0 if j > 19`

5.  为什么是神奇的数字？为什么 18、17、16 和 13 很特别？将它们放在一个适当命名的数组中开始，然后像这样使用 Array#reduce

    ```
    special_indeces = [18, 17, 16, 13]

    ... and then in loop ...

    xor = special_indeces.reduce do |val, index|
      val ^ @array1[index].to_i
    end 
    ```

6.  最后是什么`gets`？那有什么意义呢？

祝你好运，该代码需要*认真*工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:30:17.530

这是未经测试的，但它更像是我编写内部循环的方式：

```
def fase2
  @clave.each do |clave|
    (0..19).each do |j|
      @array1[j] = @array1[18].to_i ^ @array1[17].to_i ^ @array1[16].to_i ^ @array1[13].to_i ^ clave.to_i
    end
  end
  print @array1
  gets
end 
```

# android - 如何从图标操作栏实现下拉

> ID：15188657
> 
> 赞同：0
> 
> 时间：2013-03-03T17:46:57.887
> 
> 标签：android, drop-down-menu, android-actionbar, actionbarsherlock

我可以在操作栏上获得下拉菜单，但是当我单击图标时，我不知道如何做同样的事情。

![在此处输入图像描述](../Images/f8f8052193a51471a9d916896fd9cc7e.png)

默认情况下，我如何获得下拉菜单，但我希望通过单击图标获得相同的下拉菜单。即，如果我单击左侧的 android 图标，我希望 dropdwon 出现。

有什么办法吗？...

这是我的代码。

```
package com.example.actionbarsample;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.ActionBar;
import android.app.ActionBar.OnNavigationListener;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.SpinnerAdapter;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.TextView;

public class MainActivity extends Activity {

      String []data1={"Brainbitz:java","Brainbitz:Android","Brainbitz:Embedded Systems","Brainbitz:PHP"};
      String []data2={"6month Course","3month Course","3month Course","3month Course"};
      Integer[] images={R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher};

      /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        MyAdapter mSpinnerAdapter = new MyAdapter(this, R.layout.spinner, data1);

       actionBar.setListNavigationCallbacks(mSpinnerAdapter, nav);

      //  Spinner mySpinner = (Spinner)findViewById(R.id.spinner1);
       // mySpinner.setAdapter(new MyAdapter(this, R.layout.spinner, data1));
    }

    OnNavigationListener nav = new OnNavigationListener() {

    @Override
    public boolean onNavigationItemSelected(int arg0, long arg1) {
        // TODO Auto-generated method stub
        return false;
    }
};

    public class MyAdapter extends ArrayAdapter<String>
    {

            public MyAdapter(Context context, int textViewResourceId,
                        String[] objects) {
                  super(context, textViewResourceId, objects);
                  // TODO Auto-generated constructor stub
            }
            @Override
        public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.spinner, parent, false);
            TextView label=(TextView)row.findViewById(R.id.textView1);
            label.setText(data1[position]);

            TextView sub=(TextView)row.findViewById(R.id.textView2);
            sub.setText(data2[position]);

            ImageView icon=(ImageView)row.findViewById(R.id.imageView1);
            icon.setImageResource(images[position]);

            return row;
            }

   }

    } 
```

# python - 在谷歌应用引擎中包含 pygame

> ID：15188658
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:47:02.127
> 
> 标签：python, google-app-engine, import, pygame, importerror

我正在尝试在我的 Google App Engine 应用程序中包含一个[PyGame库：](http://www.pygame.org/)

```
> import pygame 
```

但我有一个导入错误：

```
> from pygame.base import *
ImportError: No module named base 
```

我该如何导入它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:50:51.127

你不能。GAE 有一组非常严格的库可供您使用。这是一个列表：

[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T16:03:27.620

澄清一下：Joe 的链接是 Google*已经*安装并可供您使用的 3rd 方库的列表，但这可能不是 pygame 不适合您的原因。例如，我在我的大多数 App Engine 项目中使用 SendGrid 和 Flask，尽管它们不在该列表中，但它们工作得非常好（我只需将它们手动包含在我添加的每个项目中）

至于pygame：

依赖 ctags 或挂钩到其他 C 库的库与 GAE 的工作方式不兼容。pygame 的某些部分很可能依赖于第三方库（可能是加载可能使用 C 库进行播放的声音文件的模块）。这将阻止 pygame 正确导入。

（更新：另一篇关于用户在 Mac 上运行 pygame 时遇到问题的帖子显示 pycame 需要一个名为 pyobjc 的库，根据我上面的注释，它很可能与 GAE 的工作方式不兼容）

我自己遇到了一个沉重的与数学相关的 python 包，我只需要其中的一小部分。它依赖于一个 C 库来保持重变量类型的精度。我最终使用大量的 int() 和 float() 调用在纯 Python 中重写了一小部分，并且效果很好。

# java - 函数是否仅在非面向对象语言中？

> ID：15188659
> 
> 赞同：5
> 
> 时间：2013-03-03T17:47:10.617
> 
> 标签：java, oop, function, methods

我被要求回答这个问题：

> 如果我想告诉用户有关某个实例变量或方法的详细信息，我应该将 /** 和 */ 的 Javadoc 特定注释符号放在哪里？

我回答说：

> 在函数声明之上。

答案被拒绝了，原因如下：

> 函数是非面向对象的语言。方法是正确的名称。

这是真的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T18:04:01.820

> 函数是否仅在非面向对象语言中存在？

不，有些面向对象的语言具有功能。例如，C# 是一种面向对象的语言，但它具有*匿名函数*。

> 什么是命名过程，它们是通常在 Java 或 C# 等面向对象语言中调用的类型的成员？

通常它们被正确地称为*方法*，尽管这因语言而异。在 Java 或 C# 中，我会说“方法”。

例如，在 Visual Basic 中，*函数*和*子例程*之间的区别是基于它们是否返回值，而不是基于它们是否与类型容器相关联。

JavaScript 是一种面向对象的语言，它使用原型继承而不是类继承，通常将上述所有内容称为“函数”。

> 人们在随便谈论 Java 或 C# 时是否经常将方法称为函数？

是的。如果我在写文档、书籍或学术文章，那么我会小心区分。尽管每个熟悉计算机编程艺术的人都会将“功能”和“方法”理解为粗略的同义词，但用普通话来说。我不会拒绝你的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:02:02.987

任何将其限制为特定语言的答案本质上都是有缺陷的。此外，您还必须有效地处理静态方法和子例程。

计算机科学始于术语“**子程序**”。可以任意执行以执行常见操作的可重复代码的小部分。在早期的编程语言（如 BASIC）中可以找到示例。

**函数**是子程序的演变。它们接受参数，可能会也可能不会返回值。他们从数学中获取一些概念——输入，翻译成给定的输出。

对于对象，我们需要能够对对象调用操作，我们这样做是为了公开**方法**。像函数一样，它们接受参数并且可能返回值，也可能不返回值。

**静态方法**旨在作用于类的所有可能对象。

问题是，纯粹的面向对象编程没有为函数（或实际上是子例程）的定义留下任何空间。发展为面向对象的语言通常保留函数的语法来实现方法。

在***Java***中，我们求助于使用“实用程序”类来提供函数作为`public static`方法。JavaScript 中的`Math`类是另一个例子。

在***PHP***中，我们容忍使用这个词`function`来定义方法。

在***C++***中，我们看到了函数和方法，两者都没有界限。事实上，C++ 没有引用方法，将它们称为*成员函数*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:49:42.353

# 函数不绑定到类。

函数类似于`doStuff();`.

方法类似于`someThing.doStuff();`or `SomeClass.doStuff();`。

在 Java 中，没有函数这样的东西。它们都是方法。IE

```
 class Test {

        public static void doSomething() {...}
        public void otherThing() {...}

        public static void main(String[] args) {
            doSomething(); **//implied Test.doSomething();**
        }

        public Test() {
            otherThing(); **//implied this.otherThing();**
        }
    } 
```

# android - 如何在多密度屏幕中使用drawLine方法绘制线条

> ID：15188661
> 
> 赞同：0
> 
> 时间：2013-03-03T17:47:22.380
> 
> 标签：android, android-canvas

我已经阅读了很多关于我的问题的帖子，但我还没有找到解决方案。我要疯了！

我在主类中使用以下代码来获取屏幕上的脉冲：

```
public boolean onTouchEvent(MotionEvent event) {
        x = (int) event.getX();
        y = (int) event.getY();
        case MotionEvent.ACTION_MOVE:
            view.draw(canvas);
            view.invalidate();
        break;
} 
```

观点是： `DrawView view;`

而 DrawView 是一个内部类：

```
public class DrawView extends LinearLayout 
```

在 DrawView 类中，我有以下两种方法来画线：

```
public void draw(Canvas canvas) {
    }

@Override
public void dispatchDraw(Canvas canvas) {
    super.dispatchDraw(canvas);
            canvas.drawLine((int) 0,(int) 0,(int) x,(int) y, paint);
    } 
```

我的问题是如何在不同屏幕密度的屏幕上正确绘制线条。我试过：

```
float d = this.getResources().getDisplayMetrics().scaledDensity; 
```

但我仍然无法正确绘制线条。

感谢您的关注！

# xtext - 带页面的 Xtext 编辑器

> ID：15188666
> 
> 赞同：1
> 
> 时间：2013-03-03T17:47:37.247
> 
> 标签：xtext

我想编辑 XtextEditor，使其包含多个页面。

我试图创建一个扩展 MultiPageEditorPart 并实现 IResourceChangeListener 的类，并在其中创建 XtextEditor 作为第一页。

但是当我运行它时，setDocumentProvider（documentProvider.get（））上有空指针异常。我不知道它应该在哪里初始化。

所以我的问题是我是否应该继续这条解决方案？（如果是这样如何解决我的问题）或者最好的解决方案是什么？

# css - 我可以根据孩子的数量来设置元素的样式吗

> ID：15188667
> 
> 赞同：-2
> 
> 时间：2013-03-03T17:47:43.410
> 
> 标签：css, css-selectors

这个问题类似于[Can CSS detection the number of children have?](https://stackoverflow.com/questions/8720931/can-css-detect-the-number-of-children-an-element-has)

但是，我需要设置容器样式，而不是设置孩子样式：HTML：

```
<ul>
</ul> 
```

CSS：

```
.selector:before {
    content: "Empty list";
    color: red;
} 
```

对于空元素的情况，我可以使用：empty 伪类，但是如果我想要具有 N 个子元素的特殊样式怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:30:16.677

目前无法使用 CSS 通过其子级选择父级。

# c# - 如何在不离开单元格或按 Enter 的情况下更新 DataGridViewComboBoxCell 值？C＃

> ID：15188671
> 
> 赞同：0
> 
> 时间：2013-03-03T17:47:49.720
> 
> 标签：c#, datagridview, combobox

基本上问题是我有一个`comboBox`内部`DataGrid`，当我更改内部的信息时，`comboBox`我必须单击其他单元格来运行事件，当我更改`comboBox`.

```
public void DataGridView_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
   //My Code Here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:42:46.127

我认为 cellvaluechanged 事件仅在您选择另一个单元格时触发。您是否尝试在组合框上使用 selectedindexchanged ？

# python - 没有 django 的问题 - 无法收集

> ID：15188672
> 
> 赞同：0
> 
> 时间：2013-03-03T17:47:50.710
> 
> 标签：python, django, less

我在用着

[https://github.com/andreyfedoseev/django-less](https://github.com/andreyfedoseev/django-less)

因为我想在我的项目中使用更少。我在 django 设置中的 STATICFILES_FINDERS 中添加了“less.finders.LessFinder”，但是当我尝试运行 ./manage.py collectstatic 时出现此错误

```
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
    collected = self.collect()
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 103, in collect
    for finder in finders.get_finders():
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/contrib/staticfiles/finders.py", line 252, in get_finders
    yield get_finder(finder_path)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/utils/functional.py", line 27, in wrapper
    result = func(*args)
  File "/Users/jean-lucmartin/lolsales/venv/lib/python2.7/site-packages/django/contrib/staticfiles/finders.py", line 265, in _get_finder
    (module, e))
django.core.exceptions.ImproperlyConfigured: Error importing module less.finders: "No module named finders" 
```

所以很明显没有'finders'模块..但是为什么！？！？！？

# php - 每个目录存储 4000 个图像文件

> ID：15188678
> 
> 赞同：0
> 
> 时间：2013-03-03T17:48:10.187
> 
> 标签：php, file-upload

所以我想在一个目录中存储大约 4k 图像，如下所示：`uploads/uniqid()./file.jpg`和`uploads/uniqid()./thumb/file.jpg`

现在，问题是我想做的方式，我不认为是最好的方式。

我想要一个表，其中存储有少于 4k 图像的活动目录名称。

因此，当用户上传图像时，我将进入该目录计算文件，如果小于 4k，我将上传图像，如果目录中有 4000 张图像，我将使用创建一个新目录名称`uniqid()`并将新目录中的文件，我还将使用新的活动目录名称更新表。

我认为这个解决方案还可以，除了每次用户上传图像时我都必须计算文件，你们觉得呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:13:30.380

对文件进行计数的另一种方法是将计数器（即：自动增量）字段添加到表中，并在用户上传文件时在表中插入一行。然后，您可以使用 mysql_insert_id() 来获取刚刚插入的行的 id。

然后只需添加以下内容即可查看是否需要创建新目录：

```
if((mysql_insert_id() % 4000) === 0) {
   //create new dir name
   //insert new dir name into table as active dirname
   //add image to new folder
}
else {
   //add image to active directory
} 
```

# asp.net-mvc-4 - 两个成员表：aspnet_Membership 和 pages_Membership

> ID：15188679
> 
> 赞同：1
> 
> 时间：2013-03-03T17:48:12.517
> 
> 标签：asp.net-mvc-4, asp.net-membership

我正在开发我的第一个 ASP.Net MVC 4 应用程序。我选择了 Internet 应用程序选项，并从一个包含 4 个表 (webpages_*) 的 LocaDB 实例开始。

我正在添加日志记录和错误处理，并且我想添加 ASP.Net 健康监控。为此，我必须运行 aspnet_regsql，现在我拥有所有 aspnet_* 表以及 pages_*。

运行状况监控实际上需要哪些表？我需要所有这些吗？例如，我可以摆脱 aspnet_Membership。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T17:31:18.120

我有 Membership Provider 和 SimpleMembership Provider 的表格。选择一个提供者而不是另一个允许我删除相应的表。

# c - 在 C 中打印数字行

> ID：15188681
> 
> 赞同：1
> 
> 时间：2013-03-03T17:48:14.627
> 
> 标签：c, numbers, lines

我尝试读取一个文件，然后用它们打印数字行。但我不知道如何同时打印 lorem ipsum。因为我不太了解 C 中的打印函数。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
main(){

int c;
int b=1;
//int a[5000]; Shall I use this or any ideas without them?

FILE *xfile;
xfile = fopen("loremipsum.txt", "r"); 

while((c=getc(xfile)) != EOF){
if(c == '\n'){
printf("%d\n", b); /*STUCK IN THERE... HOW TO PRINT LOREM IPSUM WITH NUMBER LINES?*/
//putchar(a);   
b++;
}
}

} 
```

我的 lorem ipsum：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit。
Donec vitae quam non risus consectetur aliquet sed rhoncus purus。
Fusce vitae lorem a dui elementum condimentum id id odio。
Quisque eu felis eu diam facilisis mollis sat amet id augue。

Duis lacinia velit et lorem ullamcorper iaculis。
Duis malesuada lacus quis quam congue nec euismod ante condimentum。
Donec dignissim augue vitae nulla dapibus vehicula。

```

我想要的是：

```
1\. Lorem ipsum dolor sit amet，consectetur adipiscing elit。
2\. Donec vitae quam non risus consectetur aliquet sed rhoncus purus。
3\. Fusce vitae lorem a dui elementum condimentum id id odio。
4\. Quisque eu felis eu diam facilisis mollis sat amet id augue。

5\. Duis lacinia velit et lorem ullamcorper iaculis。
6\. Duis malesuada lacus quis quam congue nec euismod ante condimentum。
7\. Donec dignissim augue vitae nulla dapibus vehicula。

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:53:22.037

不如使用`fgets`来获取整行而不是一次读取一个字符呢？

```
char input[256];
int line = 1;

while (fgets(input, sizeof(input), xfile) != NULL)
{
    printf("%2d. %s", line++, input);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T17:54:14.127

您有很好的方法，尽管将最后一个字符保留在变量中可能很有用。

```
int c;
int b = 1;
int prec = '\n';

while ((c = getc (xfile)) != EOF) {
        if (prec == '\n')
                printf ("%d. ", b++);

        putchar (c);
        prec = c;
} 
```

# sql - 关于sql子查询

> ID：15188687
> 
> 赞同：0
> 
> 时间：2013-03-03T17:48:40.623
> 
> 标签：sql, oracle

当我们想从一个表中选择一个员工的薪水大于许多（比如说 12 个）员工的薪水时该怎么办。我知道我们必须使用子查询，但将其写为：-

```
Select ename,salary 
from emp 
where salary>( select salary
            from emp
           where ename='A'||ename='B'.....) 
```

它可以这样写，但它不是一个好方法。请为此提出一些有用的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:09:41.320

```
Select ename,salary 
from emp 
where salary > (
    select salary 
    from 
        (
        select 
           salary, 
           rownum as rn
        from emp
        order by salary
        )
    where rn = 12
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:17:40.177

如果您知道 12 名员工，我认为您想将查询编写为：

```
Select ename,salary 
from emp 
where salary> (select max(salary)
               from emp
               where ename in ('A', 'B', . . . )
              ) 
```

`IN`比一堆`or`语句方便多了。并且，子查询需要返回一个值，即最高工资。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:52:49.500

这不是您可以使用的确切代码，但它应该对您有所帮助。

您可以使用 RANK() 函数。

[oracle-base.com 上](http://www.oracle-base.com/articles/misc/rank-dense-rank-first-last-analytic-functions.php#rank)的文章示例：

```
SELECT empno,
       deptno,
       sal,
       RANK() OVER (PARTITION BY deptno ORDER BY sal) "rank"
FROM   emp;

     EMPNO     DEPTNO        SAL       rank
---------- ---------- ---------- ----------
      7934         10       1300          1
      7782         10       2450          2
      7839         10       5000          3
      7369         20        800          1
      7876         20       1100          2
      7566         20       2975          3
      7788         20       3000          4
      7902         20       3000          4
      7900         30        950          1
      7654         30       1250          2
      7521         30       1250          2
      7844         30       1500          4
      7499         30       1600          5
      7698         30       2850          6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:29:50.400

我可以看到您的要求有两种不同的解释。

*1\. 哪些员工比其他（随机）12 名员工赚得更多*

和

*2\. 哪些员工收入超过 12 名特定员工*

这个查询解决了第一个要求，尽管它在更大的数据集上会变得非常慢。

```
select *
  from emp a
 where 12 = (select count(*) 
               from emp b 
              where b.salary < a.salary); 
```

这个查询解决了第二个需求

```
select * 
  from emp
 where salary > all(select salary 
                      from emp 
                     where emp_id in(1,2,3,4,5)
                   ) 
```

# c# - 首先通过代码进行多 1 对 1 关联的问题？

> ID：15188690
> 
> 赞同：2
> 
> 时间：2013-03-03T17:49:03.527
> 
> 标签：c#, sql, code-first

我正在使用 Code First 方法来创建数据库。在这里，我试图通过使用`Shared primary key`方法来实现 1 对 1 的关系：

```
public partial class AccountHolder
{
    public int AccountHolderId { get; set; }

    public virtual PersonalDetail Detail { get; set; }
}

//Added later 
public partial class Nominee
{
    public int NomineeId { get; set; }

    public virtual PersonalDetail Detail { get; set; }
}

public partial class PersonalDetail
{
    public int PersonalDetailId { get; set; }

    ... 
} 
```

我流利的 ​​Api 代码：

```
 modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Detail)
                                            .WithRequired()
                                            .WillCascadeOnDelete();
        //Added later
        modelBuilder.Entity<Nominee>().HasOptional(p => p.Detail)
                                      .WithRequired()
                                      .WillCascadeOnDelete(); 
```

最初我只有 2 个表`AccountHolder`，`PersonalDetails`并且共享主键方法在它上面运行良好。但是现在当我添加与`Nominee`1 对 1 关系的表时，就会出现问题`PersonalDetails`。添加新表后`Nominee`，当我运行*代码第一次迁移的**Update-Database 命令*时，出现异常：

 *> 操作失败，因为表“PersonalDetails”上已存在名为“IX_PersonalDetailId”的索引或统计信息

谁能告诉我这是什么问题，我该如何解决这个问题？

**编辑 ：**

我在这里分享我对这个问题的研究，*如果我错了，请纠正我*。可能会发生此异常，因为在共享主键方法中，依赖表的 PK 也是主表的 FK。因此，在这种情况下，有 2 个主表 ie`AccountHolder`和`Nominee`1 个从属表 ie `PersonalDetail`。因此，当实体框架尝试创建 2 个同名的 FK 时，就会出现上述异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:21:21.240

我想扩展我的评论。

> 即使您解决了命名问题，也不能让一列成为两个表的外键。

假设您的 AccountHolder 表有以下记录

```
Id
----
1
2
3 
```

您的 Nominee 表有以下记录

```
Id
----
3
4
5 
```

假设您想将一条记录插入到 PersonalDetail 中`DetailId = 3`。这是否与 Nominee 3 或 AccountHolder 3 匹配？

此外，如果您尝试使用 插入 PersonalDetail `DetailId = 2`，您将收到 FK 违规，因为没有 Nominee 2。如果您想插入`DetailId = 4`，同样适用，没有 AccountHolder 4，因此您将收到 FK 违规。*

# php - PHP更改XML文件中的xmlns

> ID：15188700
> 
> 赞同：0
> 
> 时间：2013-03-03T17:49:59.473
> 
> 标签：php, xml, xml-namespaces

我有以下结构的xml：

```
<?xml version="1.0"?>
<ONIXMessage xmlns="http://test.com/test">
 ...data...
</ONIXMessage> 
```

我需要用我自己的值更改 xmlns 属性。我该怎么做？最好使用 DOMDocument 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:30:13.820

> 我需要用我自己的值更改 xmlns 属性。我该怎么做？最好有`DOMDocument`课。

这在设计上是不可能的。每个`DOMDocument`都有一个根/文档元素。

在您的示例 XML 中，根元素是：

```
{http://test.com/test}ONIXMessage 
```

我将元素名称写为*扩展名称*，约定将名称空间 URI 放在尖括号中。

*以显示其完整扩展名称*的形式编写元素名称也表明您不仅希望在此处更改属性的值，而且还希望更改特定元素的命名空间 URI。所以你想改变元素名称。如果子元素在同一个命名空间中，它可能还包含它包含的任何子元素名称。

由于该[`xmlns`属性](http://www.w3.org/TR/2009/REC-xml-names-20091208/#dt-defaultNS)仅反映元素本身的命名空间 URI，因此您无法更改它。一旦设置好`DOMDocument`，就无法更改。

您可以替换整个元素，但子元素的命名空间也不会更改。这是一个与您类似的 XML 示例，只有 textnode 子级（没有命名空间）：

```
$xml = <<<EOD
<?xml version="1.0"?>
<ONIXMessage xmlns="uri:old">
 ...data...
</ONIXMessage>
EOD;

$doc = new DOMDocument();
$doc->loadXML($xml);
$newNode = $doc->createElementNS('uri:new', $doc->documentElement->tagName);
$oldNode = $doc->replaceChild($newNode, $doc->documentElement);

foreach(iterator_to_array($oldNode->childNodes, true) as $child) {
    $doc->documentElement->appendChild($child);
} 
```

生成的 XML 输出为：

```
<?xml version="1.0"?>
<ONIXMessage xmlns="uri:new">
 ...data...
</ONIXMessage> 
```

现在将输入 XML 更改为包含子项的内容

```
<?xml version="1.0"?>
<ONIXMessage xmlns="uri:old">
   <data>
     ...data...
   </data>
</ONIXMessage> 
```

然后将创建以下输出，注意现在再次弹出的旧命名空间 URI：

```
<?xml version="1.0"?>
<ONIXMessage xmlns="uri:new">
   <default:data xmlns:default="uri:old">
     ...data...
   </default:data>
</ONIXMessage> 
```

如您所见`DOMDocument`，它不提供开箱即用替换现有元素的命名空间 URI 的功能。但是希望到目前为止，通过此答案中提供的信息，可以更清楚地说明为什么如果该属性值已经存在，则无法更改该属性值。

[基于 libxml 的 PHP 扩展中基于 expat 的解析器](http://www.php.net/book.xml)确实允许“更改”现有属性值，无论它是否是`xmlns*`属性 - 因为它只是解析数据，您可以使用它动态处理它。

一个工作示例是：

```
$xml = <<<EOD
<?xml version="1.0" encoding="utf-8"?>
<ONIXMessage xmlns="uri:old">
  <data>
    ...data...
  </data>
</ONIXMessage>
EOD;

$uriReplace = [
    'uri:old' => 'uri:new',
];

$parser = xml_parser_create('UTF-8');
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
xml_set_default_handler($parser, function ($parser, $data) {
    echo $data;
});
xml_set_element_handler($parser, function ($parser, $name, $attribs) use ($xml, $uriReplace) {
    $selfClosing = '/>' === substr($xml, xml_get_current_byte_index($parser), 2);
    echo '<', $name;
    foreach ($attribs as $name => $value) {
        if (substr($name, 0, 5) === 'xmlns' && isset($uriReplace[$value])) {
            $value = $uriReplace[$value];
        }
        printf(' %s="%s"', $name, htmlspecialchars($value, ENT_COMPAT | ENT_XML1));
    }
    echo $selfClosing ? '/>' : '>';
}, function ($parser, $name) use ($xml) {
    $selfClosing = '/>' === substr($xml, xml_get_current_byte_index($parser) - 2, 2);
    if ($selfClosing) return;
    echo '</', $name, '>';
});

xml_parse($parser, $xml, true);
xml_parser_free($parser); 
```

然后输出透明地将命名空间 URI 从更改`uri:old`为`uri:new`：

```
<ONIXMessage xmlns="uri:new">
   <data>
     ...data...
   </data>
</ONIXMessage> 
```

如本例所示，您在 XML 中使用的每个 XML 特性都需要由解析器处理。例如，缺少 XML 声明。但是，可以通过实现缺少的处理程序类回溯（例如[，对于 CDATA 节](http://php.net/xml_set_character_data_handler)）或通过输出缺少的输出（例如，对于“缺少的”XML 声明）来添加这些。我希望这会有所帮助，并向您展示如何更改这些不打算更改的值的替代方法。

# javascript - 表单提交错误

> ID：15188706
> 
> 赞同：0
> 
> 时间：2013-03-03T17:50:30.580
> 
> 标签：javascript, html, forms, post, reload

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link href="login-box.css" rel="stylesheet" type="text/css" />
</head>
<body>

        <center>
            <table>
                <tr>
                    <td height="50px"></td>
                </tr>
            </table>
            <fieldset id="searchFS" class="legend" style="display: block">
                <legend>Search for Contact:</legend>
                <table>
                    <tr>
                        <td width="55%"></td>
                        <td><input id="contactName" name="contactName" type="text"
                            width="20px" value=""></input></td>
                        <td><input type="submit" name="Submit" value="Search"
                            class="button" onclick="getcontact()" />
                        </td>

                    </tr>
                </table>
            </fieldset>
        </center>

    <p id="para"></p>

</body>

<script>

function getcontact(){

    document.getElementById('para').innerHTML ="<table><tr><td>kkkkkkk</td></tr></table>";

}

</script>

</html> 
```

当我按下按钮时，元素的值出现而不是在页面重新加载时消失！谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:30:41.283

更改`"getContact()"`为`"getContact(); return false"`阻止表单提交。

一个更理想的解决方案是绑定到点击事件：

```
document.querySelector('[name="Submit"]').addEventListener('click', function (e){
    //prevent default behavior -- stop form from submitting
    e.preventDefault();

 document.getElementById('para').innerHTML ="<table><tr><td>k</td></tr></table>";
}); 
```

# java - 如何从不包含 void main 的 Java 中的另一个类中获取值？

> ID：15188711
> 
> 赞同：-4
> 
> 时间：2013-03-03T17:50:43.960
> 
> 标签：java, swing

我有以下三个课程：

-OnePa (它包含 public static void main()) -New -Choose 在同一个包下。

我想 **从 Choose.java中获取声明并存储在 New.java 中的“字符串名称”的值**

```
 package com.ash;

  import javax.swing.JFrame;

   public class New1 extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 4648531955064052430L;
private JPanel contentPane;
private JTextField textField;
private JTextField textField_1;
private JTextField textField_3;
private JFormattedTextField textField_2;
private JComboBox comboBox;
String FNm;
String LNm;

Connection con;
Choose CT11=new Choose();

//Mask-Formatter is created
protected MaskFormatter createFormatter(String s){
    MaskFormatter formatter=null;
    try{
        formatter=new MaskFormatter(s);
    }catch(java.text.ParseException exc){
        System.err.println("formatter is bad:"+exc.getMessage());
        System.exit(-1);
    }
    return formatter;
}

public New1() {
    setTitle("New ");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 585, 415);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JLabel lblNewLabel = new JLabel("First Name");
    lblNewLabel.setFont(new Font("Times New Roman", Font.BOLD, 13));
    lblNewLabel.setBounds(40, 62, 91, 28);
    contentPane.add(lblNewLabel);

    JLabel lblLastName = new JLabel("Last Name");
    lblLastName.setFont(new Font("Times New Roman", Font.BOLD, 13));
    lblLastName.setBounds(40, 101, 91, 28);
    contentPane.add(lblLastName);

    textField = new JTextField();
    textField.setBounds(150, 66, 146, 20);
    contentPane.add(textField);
    textField.setColumns(10);

    textField_1 = new JTextField();
    textField_1.setColumns(10);
    textField_1.setBounds(150, 105, 146, 20);
    contentPane.add(textField_1);

    JButton btnNewButton = new JButton("Next >>");
    btnNewButton.setBounds(150, 289, 89, 23);
    contentPane.add(btnNewButton);

    ImageIcon home = new ImageIcon("D:\\Source AP\\home.jpg");
    JButton HomeButton = new JButton(home);
    HomeButton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent arg0) {

            textField.setText(null);
            textField_1.setText(null);
            textField_2.setText(null);
            textField_3.setText(null);

            dispose();

        }
    });
    HomeButton.setBounds(26, 289, 45, 38);
    contentPane.add(HomeButton);

    btnNewButton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {

            //Storing Values in String
            GetValues();

            label.setVisible(false);
            label_1.setVisible(false);
            label_2.setVisible(false);
            label_3.setVisible(false);
            lblNewLabel_1.setVisible(false);

            if((FNm.length()==0 || FNm.trim().length()==0)||

                          (LNm.length()==0 || LNm.trim().length()==0)))
            {
                System.out.println("It is blank or contains white
                                   spaces");

            }
            else{

            System.out.println("Success");

                //Connection

                try {
                con=DbConnPa.getConObj();
            } catch (ClassNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try {
                DbConnPa.Reg1(con, FNm, LNm, Age, RefDoc, Sex);
            } catch (SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            CT11.setVisible(true);

            //hides the current JFrame
            dispose();
            }

        }
    });

}
public void GetValues(){
    FNm=textField.getText();
    LNm=textField_1.getText();

}

     } 
```

选择.java：

```
package com.ash;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JCheckBox;
import javax.swing.JButton;

import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.Font;
import javax.swing.JLabel;

public class Choose extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1946720589313613447L;
private JPanel contentPane;

int i=0;

/**
 * Launch the application.
 */

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Choose frame = new Choose();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */

public Choose() {
    setTitle("Choose ");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 910, 516);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JButton btnNewButton = new JButton("Next >>");
    btnNewButton.setBounds(39, 396, 89, 23);
    contentPane.add(btnNewButton);

    JCheckBox checkBox = new JCheckBox("Hello");
    checkBox.setFont(new Font("Times New Roman", Font.PLAIN, 13));
    checkBox.setBounds(39, 120, 132, 23);
    contentPane.add(checkBox);

    JLabel lblFirstName = new JLabel("First Name :");
    lblFirstName.setFont(new Font("Times New Roman", Font.BOLD, 13));
    lblFirstName.setBounds(39, 11, 82, 16);
    contentPane.add(lblFirstName);

    JLabel lblLastName = new JLabel("Last Name :");
    lblLastName.setFont(new Font("Times New Roman", Font.BOLD, 13));
    lblLastName.setBounds(39, 34, 82, 16);
    contentPane.add(lblLastName);

    JLabel Ctname = new JLabel();
    Ctname.setBounds(131, 12, 132, 16);
    contentPane.add(Ctname);

    JLabel Ctlst = new JLabel();
    Ctlst.setBounds(131, 35, 132, 16);
    contentPane.add(Ctlst);
    contentPane.add(Ctref);
    btnNewButton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent arg0) {
            //if Chk1 is selected it will return TRUE else FALES.
            Boolean afb=checkBox.isSelected();

            if(afb== true)
                {
                System.out.println("Is selected");
                }
        }
    });
}
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:54:58.390

很可能来自`Choose.java`.

`main()`就像 java 中的任何其他方法一样，除了一件事 - 在运行时，jvm 使用它来查找应用程序的入口点。

因此，如果您知道如何从 访问该字段`main()`，则*很可能*使用与任何其他方法相同的方法访问该变量，前提是该字段本身或其任何访问器都是[可访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:26:21.030

`Choose.java`在called中创建一个方法`public void setName(String name)`，然后在 New.java 中调用时`GetValues()`将变量 FNm 传递给`Choose.java`如下`CT11.setName(FNm)`：现在您已将名称传递给选择类，您可以将其存储在全局变量中并随心所欲地使用它。

# jquery - jQuery AJAX 只运行一次

> ID：15188714
> 
> 赞同：0
> 
> 时间：2013-03-03T17:50:52.610
> 
> 标签：jquery, ajax

我最近开始使用 jQuery 并且遇到了一些小问题，当我的 ajax 函数只运行一次时，代码如下：

```
$('input').live('click', function(event){
     var conf = confirm("Are you sure you want to delete this user?");
     if(conf == true)
     {
         var list = document.getElementById("Users");
         document.getElementById("msg").innerHTML = "Deleting...";  

         $.ajax({
               type: "GET",
               url: "Pages/Functionality/delete-user.php",
               data: "userid=" + list.options[list.selectedIndex].value + "&id=" + getURLParameter('id'),
               success: function(m){
                   document.getElementById("userList").innerHTML = m                       
               },
               error: function (xhr, status, error) {
               if (xhr.status > 0) alert('Error Occured!\n\nError: ' + error + '\n' + 'Status: ' + status);
           }
         }); 
     }
}); 
```

当它第二次运行到 ajax 部分并停止时，我已经尝试过`.on`，但第二次它根本没有运行，我已经尝试过`.delegate`，与使用时发生同样的事情，`.live`但它运行了多次。

我再次到处寻找解决方案，所以我决定尝试在线获得一些帮助。

干杯，

罗素

编辑：我也尝试将缓存设置为 false，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:53:25.100

最后尝试从您的处理程序返回 false 以防止默认操作：

```
$(document).on('click', 'input', function(event) {
    ...
    return false;
}); 
```

# c# - 如何使用 Int 和 Timespan 对“阶段”建模 - 自定义枚举？

> ID：15188721
> 
> 赞同：0
> 
> 时间：2013-03-03T17:51:20.767
> 
> 标签：c#

我有一个名为“Creature”的课程，它处于几个阶段之一。只有七个阶段，但每个阶段都有不同的时间跨度，将在整个应用程序中使用。我想做类似以下的事情：

```
enum Stage
    {
    One,
    Two,
    Three,
    Four,
    Five
    }; 
```

但随后也以某种方式将时间跨度附加到每一个上，这样

```
Stage.One.Time 
```

返回类似“一小时”的内容。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:55:26.137

不幸的是，C# 中的枚举非常有限。不过，您有几个选择：

*   创建可以添加您想要的任何逻辑的扩展方法。然后你可以写：

    ```
    Stage.One.ToTimeSpan() 
    ```

    （`ToTimeSpan`扩展方法在哪里，可能使用 a`Dictionary<Stage, TimeSpan>`或 switch 语句）

*   编写一个“智能”枚举，它实际上只是一个具有一组有限值的类型：

    ```
    public sealed class Stage
    {
        public static readonly Stage One = new Stage(TimeSpan.FromHours(1));
        public static readonly Stage Two = new Stage(TimeSpan.FromHours(5));
        // ...

        private readonly TimeSpan time;
        public TimeSpan Time { get { return time; } }

        private Stage(TimeSpan time)
        {
            this.time = time;
        }
    } 
    ```

    这样做的缺点是您现在无法打开阶段:(

# javascript - 使用 .getJSON for google maps api 制作自定义航点

> ID：15188722
> 
> 赞同：0
> 
> 时间：2013-03-03T17:51:21.790
> 
> 标签：javascript, jquery, google-maps-api-3

我正在尝试根据从 .getJSON 检索到的数据动态更改用于计算谷歌地图路线的功能。我尝试在 .done 函数下包含大部分函数 calcRoute()，但我在 javascript 控制台中的属性航点中收到错误。我不知道该怎么做，因为当我不包含 .done 下的大部分函数时，数组仍然是空白的（使用 .getJSON 进行异步调用。这里是给你一个更好的主意的代码：

```
 function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var waypts = [];
        var data = $.getJSON("/westcoast_map.php", {
            westcoast_id: $('.opener').data('westcoast_id')
        }, function(json) {
            return json[1];
        });

        data.done(function(theData) {
            waypts = theData[1];
            console.log(waypts); //this spits out the array in the proper format, i.e. {location:city, state, stopover:true},...etc...

            var request = {
                origin: start,
                destination: end,
                waypoints: waypts,
                optimizeWaypoints: true,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
            };

            directionsService.route(request, function(response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                    var route = response.routes[0];
                    var summaryPanel = document.getElementById('directions_panel');
                    summaryPanel.innerHTML = '';
                    // For each route, display summary information.
                    for (var i = 0; i < route.legs.length; i++) {
                        var routeSegment = i + 1;
                        summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment + '</b><br>';
                        summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
                        summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
                        summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
                    }
                }
            });

        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:07:31.063

我仍然不确定你的问题是什么，因为你展示的代码至少应该从逻辑部分工作。但是有些部分不清楚您要达到什么目标：

```
 var data = $.getJSON("/westcoast_map.php", {
        westcoast_id: $('.opener').data('westcoast_id')
    }, function(json) {
        return json[1];
    }); 
```

如果您期望这里`data` 会变成`json[1]`，那么您的假设是错误的。 `$.getJSON`总是返回**jQuery XHR**。稍后浏览器接收到数据时会调用回调函数。

这里有一个小例子来理解 async 是如何工作的：回调函数 1 和 2 在客户端收到请求的响应时被调用，但不是在原始脚本完全执行`doSomethingElse()`之前调用，所以总是在回调函数 1 和 2 之前调用被执行。回调函数 1 和 2 的执行顺序取决于哪个响应先到达。

```
var test = [];
preparesSomeStuff();

$.getJSON("someurl1",{},function() {
   //Callback Function 1

});

doSomething();

$.getJSON("someurl2",{},function() {
   //Callback Function 2
});

doSomethingElse();
//<<END OF SCRIPT>> 
```

如果您不想将整个代码包含在回调函数中（例如因为可读性），您可以通过以下方式进行操作：

```
function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var waypts = [];
    $.getJSON("/westcoast_map.php", {
        westcoast_id: $('.opener').data('westcoast_id')
    }, function(theData) {
        calcualteRoute(theData[1], start, end);
    });

    //if you place code here it will be executed before displayResult will be called because getJSON is async
}

function calcualteRoute(waypts, start, end) {
    console.log(waypts); //this spits out the array in the proper format, i.e. {location:city, state, stopover:true},...etc...

    var request = {
        origin: start,
        destination: end,
        waypoints: waypts,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            displayResult(response,status);
        }
    });

    //if you place some code here it will be executed BEFORE displayResult will be called, because 
    //directionsService.route is async

}

function displayResult(response, status) {
    directionsDisplay.setDirections(response);
    var route = response.routes[0];
    var summaryPanel = document.getElementById('directions_panel');
    summaryPanel.innerHTML = '';
    // For each route, display summary information.
    for (var i = 0; i < route.legs.length; i++) {
        var routeSegment = i + 1;
        summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment + '</b><br>';
        summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
        summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
        summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
    }
} 
```

# icons - wxWidgets 标题栏图标

> ID：15188724
> 
> 赞同：2
> 
> 时间：2013-03-03T17:51:29.223
> 
> 标签：icons, wxwidgets

我想更改显示在框架左上角的默认图标。我尝试了很多方法——xpm、ico、bmp，按照这里`SetIcon(wxIcon(wxT("icon.xpm")));`的建议使用[。](http://zetcode.com/gui/wxwidgets/firstprograms/)
我尝试了不同的图标尺寸，16x16、24x24 和 32x32。
我还尝试`MYICON1 ICON "Logo.ico"`在 resource.rc 文件、`#define MYICON1 101`resource.h 文件和`SetIcon(wxIcon(MYICON1));`框架构造函数中添加。

顺便说一句，我在 Visual Studio 2010 上使用 wxwidgets 2.8

编辑：

> 我还尝试`MYICON1 ICON "Logo.ico"`在 resource.rc 文件、`#define MYICON1 101`resource.h 文件和`SetIcon(wxIcon(MYICON1));`框架构造函数中添加..

使用这种方法，我在 wxIcon(int) 构造函数中出现错误。

> 1>xsframe.cpp(17): 错误 C2248: 'wxString::wxString' : 无法访问在类 'wxString' 中声明的私有成员
> 1> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\wx /string.h(682) : 见 'wxString::wxString' 的声明
> 1> C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\wx/string.h(659) : 见 ' 的声明wxString'

PS，xsframe 是我的主框架。我想改变谁的图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-06T02:58:47.363

SetIcon(wxICON(MYICON1));

在文件 gdicmn.h 中，第 166 行

```
/* Useful macro for creating icons portably, for example:

    wxIcon *icon = new wxICON(sample);

  expands into:

    wxIcon *icon = new wxIcon("sample");      // On Windows
    wxIcon *icon = new wxIcon(sample_xpm);    // On wxGTK/Linux
 */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:46:27.233

我从[这里](https://groups.google.com/forum/?fromgroups=#!searchin/wx-users/app$20icon/wx-users/WAjn22X9Dvo/ZEFXMNckrawJ)引用 Vaclav 的回答：

> 您可以使用 wxFrame::SetIcon 设置主框架的图标。可以通过向 .rc 文件添加新的图标资源来更改应用程序图标：
> 
> ```
> appicon ICON "myapp.ico"
> #include "wx/msw/wx.rc" 
> ```
> 
> 请注意，此图标必须是 .rc 文件中的第一个图标，并且当您按字母顺序对图标进行排序时*，它必须是第一个。*这是因为 MS 开发人员无法确定如何确定应用程序的图标：它是 Windows 9x 下 .rc 文件中的第一个图标，而 NT 下按字母顺序排列的第一个图标（反之亦然）。

大多数人通常会错过这一点。希望能解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:43:52.097

你在resource.rc文件中写了： MYICON1 ICON "Logo.ico" 和 SetIcon(wxIcon(MYICON1)); 到框架构造函数

这就是我使用的方法。

您需要做一个额外的步骤。在 resource.h 文件中你需要定义 MYICON1 像这样的东西：

```
#define MYICON1  101 
```

您必须确保图标文件包含所有必需的分辨率 - 我始终确保它具有 16by16、32by32 和 256by256 越多越好！

如果应用程序图标是资源文件中的第一个图标，这是一个好主意。

我建议升级到 wxWidgets v2.9.4 - 很多事情开始变得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T21:58:52.183

使用图标的字符串名称，而不是数字标识符。查看任何 wxWidgets 示例作为示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T02:07:13.593

一个快速而肮脏、不可移植、仅适用于 Windows 的解决方案（在 Windows 7、wxWidgets 3.0.4、vc110 中为我工作）：

```
#ifdef __WXMSW__
#include "wx/msw/private.h" //for wxGetInstance()
#endif
...

//in Frame's constructor:
HWND hWnd = this->GetHandle();
HINSTANCE hInstance = wxGetInstance();

HICON hIcon = ExtractIcon(hInstance, L"someicon.ico", 0);
SetClassLongPtr(hWnd, GCLP_HICONSM, (LONG_PTR)hIcon); 
```

对在窗户上做其他一些技巧有用吗？

# symfony-1.4 - 蛞蝓与路线部分“新”等混淆

> ID：15188729
> 
> 赞同：0
> 
> 时间：2013-03-03T17:51:50.830
> 
> 标签：symfony-1.4, url-routing, doctrine-1.2, slug

我有一个 sfDoctrineRouteCollection：

```
foo:
  class:  sfDoctrineRouteCollection
  options:
    model: Foo
    columns: slug
    action: [list, show, new, create, edit, update, delete] 
```

如果现在有人创建了一个新实体，其 slug 导致例如“new”，那么路由引擎会混淆`/foo/new`用于创建新实体和`/foo/new`显示带有 slug“new”的实体的两条路线。

这个问题的干净优雅的解决方案是什么？

当然，我可以提供明确的路由定义，但这会使 sfDoctrineRouteCollection 有点过时。“show”操作的单独路由定义已经解决了这个问题，例如，通过添加像“/foo/:slug/show”这样的前缀。我还可以提供一个自定义的 slugify 方法来拦截像“新”这样的 slug 等。

你知道任何干净优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:07:18.033

您可以使用[`segment_names`](http://www.symfonyreference.com/routing-yml#segment-names-366)选项更改`new`为其他内容，也可以使用更明确的内容，例如`id`或`id-slug`禁用[`with_show`](http://www.symfonyreference.com/routing-yml#with-show-365)并添加显示[对象操作](http://www.symfonyreference.com/routing-yml#object-actions-380)

`object_actions: { show: [get, head] }`

# r - 在 R 中，有没有办法在同一台机器上 R 的不同进程之间共享一个变量？

> ID：15188730
> 
> 赞同：3
> 
> 时间：2013-03-03T17:51:52.070
> 
> 标签：r, parallel-processing, shared-memory

我的问题是我有一个大模型，加载到内存很慢。为了在许多样本上测试它，我需要运行一些 C 程序来生成模型的输入特征，然后运行 ​​R 脚本来预测。每次加载模型都需要花费太多时间。

所以我想知道

1）如果有某种方法可以将模型（R中的变量）保存在内存中。

或者

2）我可以将R的分离过程作为专用服务器运行，那么R的所有预测过程都可以在同一台机器上访问服务器中的变量。

在所有预测期间，模型永远不会改变。它是一个存储在 .rdata 文件中的 randomForest 模型，该文件大约有 500MB。加载此模型很慢。

我知道我可以使用并行 R（snow、doPar 等）来并行执行预测，但是，这不是我想要的，因为它需要我更改我使用的数据流。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:12:54.500

如果您每次都重新生成模型，您可以将模型保存为 RData 文件，然后在不同的机器上共享它。虽然从磁盘加载到内存可能仍然需要一些时间，但它会节省重新生成的时间。

```
 save(myModel, file="path/to/file.Rda")

   # then
   load(file="path/to/file.Rda") 
```

**根据@VictorK 的建议进行编辑：** 正如 Victor 指出的那样，由于您只保存一个对象，`saveRDS`因此可能是更好的选择。

```
 saveRDS(myModel, file="path/to/file.Rds")

  myModel <- readRDS(file="path/to/file.Rds") 
```

# sql - 从 db2 绘制模式图表的工具

> ID：15188731
> 
> 赞同：0
> 
> 时间：2013-03-03T17:52:03.180
> 
> 标签：sql, charts, db2, uml

您是否知道给定数据库的任何`db2`工具或命令会返回包含所有表、字段和（可能）关系的图表？如果 DB2 不提供类似的东西，您是否知道其他东西，可能是免费/开源的，这不是 Visual Paradigm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:27:41.713

SchemaSpy与 DB2 配合得很好[。](http://schemaspy.sourceforge.net/)我过去用过它，他的输出是[这样](http://schemaspy.sourceforge.net/sample/relationships.html)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:07:21.007

您可以尝试 db2look，这是一个包含的工具，但它只是一个重新生成所有 DDL 的命令行。

此外，您可以使用 IBM Data Studio，这是一个基于 Eclipse 的工具，允许您管理 db2 数据库。同理，可以对实体关系图进行逆向工程。

这两个工具都是免费的，并且是 DB2 的一部分。

# android - Android EditText：单击返回按钮时关闭键盘

> ID：15188732
> 
> 赞同：0
> 
> 时间：2013-03-03T17:52:03.823
> 
> 标签：android, android-edittext

我设法阻止我的编辑文本在输入视图时显示键盘。现在它只在我点击它时显示，这要归功于我的清单中的这一行（在专用于相应活动的块中）：

```
android:windowSoftInputMode="stateHidden" 
```

现在我遇到了以下问题，当我单击返回按钮时，它不会隐藏键盘。我该怎么办 ？谢谢。

**编辑**：最后我通过添加`android:imeOptions="actionDone"`我的 xml 布局来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:55:30.283

yoi 可以`hideSoftInputFromWindow(....)`通过提供edittext 窗口并强制隐藏键盘来使用。

请参阅[此](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)链接。它将对您有所帮助。

# java - Spring with Maven：Maven 找不到我的资源

> ID：15188734
> 
> 赞同：0
> 
> 时间：2013-03-03T17:52:11.970
> 
> 标签：java, spring, maven

我在这里很新，我不想问，但似乎我别无选择。

我正在编写自动化测试，前段时间我发现了 Spring 和依赖注入及其所有优点。然后我在测试中将它用作我的主要数据提供者（尽管我的一位同事不同意这种用法，但我不明白为什么），如下所示：

`/src/test/java/automation/data`清单：

```
@ContextConfiguration("classpath:/spring/surveyFlows.xml")
public class SurveyDataProvider
{

    @Autowired
    private List<Survey> allSurveys;

    public List<Survey> getAllSurveys()
    {
        return allSurveys;
    }
    public SurveyDataProvider()
    {
        TestContextManager testContextManager = new TestContextManager(getClass());
        try
        {
            testContextManager.prepareTestInstance(this);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

当然我有我的 XML 里面 `/src/test/resources/spring/`。

有趣的是，如果我用 IntelliJ 运行它，它可以正常工作，但`maven`拒绝运行，给我那个该死的错误：

> 引起：org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [spring/surveyFlows.xml]; 嵌套异常是 java.io.FileNotFoundException: 类路径资源 [spring/surveyFlows.xml] 无法打开，因为它不存在

我已经浏览了所有互联网几个小时，尝试了各种事情：

*   将资源转移到`/src/main`
*   将资源目录放在`pom.xml`

... 没有骰子。

所以我有点卡在这里，我正在认真考虑使用硬编码参数恢复到旧的 Java 风格。

如果有人有线索...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:03:16.200

这对我们有用。如果您找到替代方法，请告诉我。

```
<build>
    <!--Your other configuration -->

    <testResources>
        <!-- Not sure if including resource from main is needed -->
        <testResource>
            <directory>${project.basedir}/src/main/resources</directory>
        </testResource>

        <testResource>
            <directory>${project.basedir}/src/test/resources</directory>
        </testResource>
    </testResources>
</build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:08:25.177

我使用弹簧测试类和junit。确保在 pom.xml 中放入正确的依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.2.1.RELEASE</version>
</dependency> 
```

我用以下方式注释测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:test-context.xml") 
```

而我的 test-context.xml 位于：src/test/resources/test-context.xml

而已！有了这个配置就可以了！

# php - 使用 PHP 将网页内容保存在同一个 URL 上

> ID：15188735
> 
> 赞同：-1
> 
> 时间：2013-03-03T17:52:18.870
> 
> 标签：php

我需要使用 PHP 来保存在 iFrame 中生成内容的网页，就像这样..

我有一个 .PHP 文件，里面有一个 iFrame（它在其中打开一个生成动态内容的 URL）。

我希望 PHP 文件将生成的内容（或整个源）保存到服务器。

我尝试了@file_get_contents，但是我如何指定同一个 .php 文件的 URL，因为它在 iFrame 中..？

另外，如何使用 PHP 将整个 HTTP 标头输出到文件中？

我知道它有点不清楚，但请多多包涵！

我试过这段代码，但它不起作用。

代码

```
<html>
<body>
<?php

function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
$contents = @file_get_contents($pageURL);
$fp = fopen("file.txt", "a");
fputs($fp, "
$contents
");
fclose($fp);
?>
<iframe src="LINK TO WEBPAGE HERE" />
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:34:01.240

首先永远不要使用`file_get_contents()`wih URLS，因为它在大多数（配置良好的）服务器上被禁用。你可以使用一个很棒的图书馆`cURL`

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

```
<?php

$ch = curl_init("http://HREF of iframe here");
$fp = fopen("some filename name here", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
?> 
```

它将完整的页面存储到提供的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:58:01.137

您必须将 javascript 中 iframe 的 url 发送回服务器

```
var url = document.getElementById("iframe_id").contentWindow.location.href; 
```

然后您可以使用 jquery 例如将其发送回服务器

```
$.get('mywebpage.php?url='+url); 
```

最后在 file_get_contents($_GET['url']) 服务器端使用这个 url。

# java - 一个简单的客户端/服务器聊天程序

> ID：15188741
> 
> 赞同：2
> 
> 时间：2013-03-03T17:52:39.197
> 
> 标签：java, netbeans

我正在尝试使用java创建一个简单的聊天程序，其中包含表单、客户端表单和服务器表单，客户端表单包含一个TextField和一个按钮（发送按钮），服务器表单包含一个TextArea。

当我单击发送按钮时，它应该将 TextField 中写入的文本发送到服务器表单中的 TextArea。

第一次它可以工作，但是当我第二次单击该按钮时它将无法工作。

这是我在服务器表单中使用的代码：

```
public class Server extends javax.swing.JFrame implements Runnable {

    private Thread th;

    public Server() {
        initComponents();
        th = new Thread(this);
        th.start();
    }

    // The main method was here

    @Override
    public void run() {

        // Etablir la connexion
        try {
            ServerSocket ecoute;
            ecoute = new ServerSocket(1111);
            Socket service = null;
            System.out.println("Serveur en attente d'un client !");
            while (true) {

                service = ecoute.accept();
                System.out.println("Client connécté !");
                DataInputStream is = new DataInputStream(service.getInputStream());
                jTextArea1.setText("Client dit : "+ is.readUTF().toUpperCase());
                service.close();
            }
        } catch (IOException e) {
            e.printStackTrace();

        }
    }
} 
```

这是客户端表单的代码：

```
 public class Client extends javax.swing.JFrame {

    DataOutputStream os;

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            os.writeUTF(jTextField1.getText());
        } catch (IOException ex) {
            Logger.getLogger(Client.class.getName()).log(Level.SEVERE,null, ex);
        }
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                Client c = new Client();
                c.setVisible(true);

                try {
                    Socket s = new Socket("localhost", 1111);
                    c.os = new DataOutputStream(s.getOutputStream());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:08:57.690

在您`while(true)`的代码部分中`Server`- 您在阅读一次后关闭套接字，而在客户端您不会重新打开 a `Socket`（和新的`InputStream`）。我的建议是，您的`while(true)`部分中有另一个循环，它将继续读取并显示新数据，直到达到 EOF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:05:38.753

您的问题出在服务器的代码中：要从服务器端的各个客户端接收各种消息，对于每个接受，即每个客户端，您必须创建一个线程来处理其请求，因为您使用的是 TCP 连接。（ - 您每次接受只处理一个请求，然后关闭连接）。

我清理了与您的代码的套接字无关的部分（即与客户端中的 GUI 相关的一些不完整部分），因此我提供了一个适用于许多同时客户端连接的不同版本，您可以看到所有到达的消息服务器，而不仅仅是第一条消息。

**服务器的代码：**

```
import java.io.*;
import java.net.*;

public class Server {

    public static void run() {
        try
        {
            ServerSocket ecoute;
            ecoute = new ServerSocket(1111);
            Socket service = null;
            System.out.println("serveur en attente d'un client!");
            while(true)
            {
                service = ecoute.accept();
                System.out.println("client connécté!");
//              ##call a new thread
                WorkerThread wt = new WorkerThread(service);
                wt.start();
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
    }

    public static void main(String args[]) {
        run();
    }
}

class WorkerThread extends Thread {
    Socket service;
    WorkerThread(Socket service) {
        this.service = service;
    }

    public void run() {
    boolean flag=true;    //you can change this flag's condition, to test if the client disconects
    try
    {
        while (flag){
            DataInputStream is = new DataInputStream(service.getInputStream());
            System.out.println("client dit: " + is.readUTF().toUpperCase());
        }
        service.close();
    }
    catch(IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

**客户代码：**

```
import java.io.*;
import java.io.*;
import java.net.*;
import java.util.logging.*;

public class Client {

DataOutputStream os;

public static void main(String args[]) {
java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
               Client c = new Client();
        try {
            Socket s = new Socket("localhost", 1111);
            c.os = new DataOutputStream(s.getOutputStream());
            while (true){
                String str = Input.read_string();
                c.os.writeUTF(str);
            }
        } catch ( IOException e) {
            // TODO auto-generated catch block
            e.printStackTrace();
        }
            }
        });
    }
}

public class Input{
    public static String read_string(){
        String read="";
        try{
            read = new BufferedReader(new InputStreamReader(System.in), 1).readLine();
        }catch (IOException ex){
            System.out.println("error reading from the input stream!");
        }
        return read;
    }
} 
```

之后，您可能知道，您需要将所有到达服务器的消息发送给聊天室中的所有客户端。

# python - 用小数替换浮点数会导致错误

> ID：15188744
> 
> 赞同：1
> 
> 时间：2013-03-03T17:53:02.543
> 
> 标签：python, numpy, decimal, floating, floating-point-conversion

该程序解释了描述连续反应中试剂浓度的方程 A->B->C->...

[http://en.wikipedia.org/wiki/Rate_equation#Consecutive_reactions](http://en.wikipedia.org/wiki/Rate_equation#Consecutive_reactions)

该算法是我自己设计的，可以完全忽略求解微分方程以获得浓度函数的需要。它利用了仔细检查这些方程时出现的模式。

有效的代码使用浮点数，但它们处于劣势。当任意两个给定 n 值的速率常数 k_n 的值相似时，浮点数的不精确性就会出现，结果会淹没在误差放大的海洋中：

![图形](../Images/69e4ff02ceb4c5b372ce40e1a90d2398.png)

我认为将 float() 替换为 decimal() 应该可以解决此问题，但令我沮丧的是，这些更改导致了意外错误：

用小数（）代替float（）后：

```
Traceback (most recent call last):
  File "conreact9.py", line 280, in <module>
    exec(comm)
  File "<string>", line 1, in <module>
  File "conreact9.py", line 256, in graphit
    p += plt.plot(t,eval(c_(i)),label= "c_" + str(i) + "(t)")
  File "<string>", line 1, in <module>
  File "C:\Python27\lib\decimal.py", line 658, in __new__
    raise TypeError("Cannot convert %r to Decimal" % value)
TypeError: Cannot convert array([0, -0.1, -0.2, -0.3, -0.4, -0.5, -0.6, -0.7, -0
.8, -0.9, -1.0, -1.1,
       -1.2, -1.3, -1.4, -1.5, -1.6, -1.7, -1.8, -1.9, -2.0, -2.1, -2.2,
       -2.3, -2.4, -2.5, -2.6, -2.7, -2.8, -2.9, -3.0, -3.1, -3.2, -3.3,
       -3.4, -3.5, -3.6, -3.7, -3.8, -3.9, -4.0, -4.1, -4.2, -4.3, -4.4,
       -4.5, -4.6, -4.7, -4.8, -4.9], dtype=object) to Decimal 
```

当我将 NumPy exp() 替换为十进制等效项时出现此错误：

```
Traceback (most recent call last):
  File "conreact10.py", line 280, in <module>
    exec(comm)
  File "<string>", line 1, in <module>
  File "conreact10.py", line 256, in graphit
    p += plt.plot(t,eval(c_(i)),label= "c_" + str(i) + "(t)")
  File "<string>", line 1, in <module>
AttributeError: exp 
```

在十进制模块上使用谷歌或官方文档没有找到任何东西。

以下是未修改的代码供参考：

[http://pastebin.com/mfuwVq7B](http://pastebin.com/mfuwVq7B)

这是我修改它的尝试：

[http://pastebin.com/xde4gvHu](http://pastebin.com/xde4gvHu)

这也可能是我看不到的非常基本的东西。我是化学学院的学生，在编程方面我是新手（没有以前的背景）。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:28:52.287

问题是 with 的`numpy.exp()`替换`Decimal.decimal.exp()`。

[前者接受一个数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.exp.html)并返回一个数组，其中*e*已被提升到每个元素的幂：

```
>>> x = np.linspace(-2*np.pi, 2*np.pi, 100)
>>> xx = x + 1j * x[:, np.newaxis] # a + ib over complex plane
>>> out = np.exp(xx) 
```

[后者适用于单个数字](http://docs.python.org/2/library/decimal.html#decimal.Decimal.exp)：

```
>>> decimal.Decimal(1).exp()
Decimal('2.718281828459045235360287471') 
```

（示例取自上面链接的页面）。

# version-control - 将搁置的 CLN 中的更改合并到打开的文件中

> ID：15188746
> 
> 赞同：4
> 
> 时间：2013-03-03T17:53:05.017
> 
> 标签：version-control, perforce

我有一个搁置的 CLN，里面有 2 个文件。我的工作区中还打开了一个默认 CLN，其中包含 2 个文件。两个 CLN 之间有一个共同的文件。我正在尝试取消搁置我搁置的 CLN 更改，并希望 perforce 能够对公共文件中的更改执行合并。但它只是说文件已经打开并且不能取消搁置。我正在使用的命令是：

p4 取消搁置 -s cln -c cln

有没有办法将我搁置的更改合并到我已经打开的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:47:25.327

在 2011.1 版中添加了取消搁置到打开的文件（并解决更改）的功能。你能升级你的服务器吗？

# c++ - C++ 连续序列概念

> ID：15188747
> 
> 赞同：8
> 
> 时间：2013-03-03T17:53:21.380
> 
> 标签：c++, c++11, containers, std, language-lawyer

C++ 标准库提供了多种“概念”，用于指定容器对象的接口。例如，`std::vector`实现`Container`、`Sequence`、`RandomAccessContainer`和`ReversibleContainer`概念。

是否有一个在 C++03 或 C++11 中指定的概念，它描述了一个`Sequence`保证元素之间连续内存的概念，以便：

`static_cast<void*>(&some_sequence[N]) == static_cast<void*>(&some_sequence[0] + N)>`

这将是一个有用的概念，因为它告诉您是否可以将 Container 与任何需要连续内存缓冲区的函数一起使用，例如`std::istream::read`.

我知道，在实践中，只有`std::vector`（并且我认为仅`std::string`在 C++11 中）实际上保证了一个底层的连续缓冲区——但这种保证是唯一的，`std::vector`还是有一个定义的“概念”来指示`Sequence`提供连续内存的泛型类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-16T09:41:44.333

“连续容器”在 C++17 中指定。从[$23.2.1/13 一般容器要求 [container.requirements.general]](http://eel.is/c++draft/containers#container.requirements.general-13)：

> 连续容器是支持随机访问迭代器 ([random.access.iterators]) 并且其成员类型 iterator 和 const_iterator 是连续迭代器 ([iterator.requirements.general]) 的容器。

关于“连续迭代器”，[24.2.1/5 美元一般来说 [iterator.requirements.general]](http://eel.is/c++draft/iterator.requirements.general#5)：

> 进一步满足以下要求的迭代器，即对于整数值 n 和可解引用的迭代器值 a 和 (a + n)，*(a + n) 等价于 *(addressof(*a) + n)，称为连续迭代器。

[std::vector](http://eel.is/c++draft/vector.overview#2)（除了`std::vector<bool>`）、[std::array](http://eel.is/c++draft/array.overview#1)和[std::basic_string](http://eel.is/c++draft/basic.string#3)是连续容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-16T06:18:59.573

我发现自己必须多次识别满足此功能的类型。我不知道发明这样一个特殊的“概念”是否优雅（想象它是一个涉及记忆的概念，这不是很抽象），但我同意这样的东西会很有用。

同时为了实用并将*这个概念/要求转化为纯语法要求*，让我们倒退。如果我们将自己限制在标准中，那么保证（或几乎保证）连续性的类是什么？按相关性排序：

```
std::vector<T>
T[N] // !!
std::array<T, N>
std::string
std::initializer_list<T>
std::valarray<T> 
```

在所有这些中，`std::vector`, `std::array`,`std::string`有一个名为 的成员函数`.data()`。所以，如果这对你来说足够了，可以依靠成员的存在`.data() -> T*`来指示连续的内存。

你有两个选择：

1)如果类型不连续，请*努力*使用成员函数引发语法错误。（例如，`.data()`如果您替换为 ，则不难）`t[0]``*t.data()`

2) 在 . 上使用某种 SFINAE `.data()`。

```
template<class ContiguousSequence, typename = decltype(std::declval<ContigiousSequence>().data())>
void fun(ContiguousSequence&& s){...} // this function will only work with contiguous data 
```

此外，C++17 将[`std::data`](http://en.cppreference.com/w/cpp/iterator/data)其推广到所有类型，`.data()`并额外重载了`T[N]`and `std::initializer_list<T>`。所以，你可以用`....data()`上面的`std::data(...)`代替。

> 结论，我认为这是一个很好的约定，如果一个类型有一个`data`函数（或`.data()`在 C++11 中）返回一个指向值类型的指针，那么元素是连续的。

（好吧，那怎么`std::valarray<T>`办？它不起作用，除非你超载`std::data(std::valarray<T>&)`。但是谁使用`std::valarray`呢？我认为这是 C++ 的一个相当废弃的角落）

最后，请注意，例如，显然`std::map`和不太明显`std::deque`没有`.data()`（或`std::data(...)`）功能。`boost::multi_array<..., N>`有一个`.data()`成员并返回一个指向数组元素的指针，不清楚这是否是您想要的意义上的连续序列（因为顺序不明显），但在某种意义上它也是一个连续的内存分配。

**编辑：** 目前有两个提案解决了这个问题（但在迭代器级别）[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3884.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3884.pdf) [http:// www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4284.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4284.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:59:15.603

从 C++03 开始​​，仅`std::vector`保证 (23.2.4.1)：

> 向量的元素是连续存储的，这意味着如果 v 是一个向量，其中 T 是除 bool 之外的某种类型，那么对于所有 0 <= n < v，它都遵循恒等式 &v[n] == &v[0] + n 。尺寸（）​​。

C++11 添加了 std::array，它是固定大小数组的包装器，并且也具有相同的属性。我认为没有办法知道任何容器是否具有这样的属性。

# ios - iOS：如何保存首选的 EKCalendar？

> ID：15188751
> 
> 赞同：1
> 
> 时间：2013-03-03T17:53:32.797
> 
> 标签：ios, calendar, eventkit

我正在构建一个小型日历应用程序，用户可以在其中选择应输入事件的日历。因此，用户从设置模式中的选择器视图中选择他们选择的日历，然后当他们输入新事件时，我应该能够获取该日历对象以某种方式创建事件。我尝试通过将对象放入 NSDictionary 中将对象写入 plist，但我认为它无法存储该类型的对象。我可以保存日历的名称和日历类型并以某种方式获取带有这两个参数的 EKCalendar 对象吗？最好不必手动遍历它们。

另外，我如何以编程方式创建新的日历事件？我有关于每个事件的以下信息；开始时间是现在，从起点开始的分钟值的结束时间，如果它是一整天，日历（如果我可以让最高位工作）和事件名称。

在此先感谢克里斯托弗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:06:02.463

我建议你先阅读[EventKit 编程指南](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009765)。它解释了如何创建和保存新事件。

如果您想保存有关所选日历的信息并稍后从该信息中检索日历，您可以将`calendarIdentifier`属性`EKCalendar`与`-calendarWithIdentifier:`方法结合使用`EKEventStore`：

```
// Save the identifier
NSString *identifier = [aCalendar calendarIdentifier];
...

// Retrieve the calendar later
NSString *identifier = ...;
EKCalendar *aCalendar = [eventStore calendarWithIdentifier:identifier]; 
```

[EKCalendar 类参考](http://developer.apple.com/library/ios/#documentation/DataManagement/Reference/EKCalendarClassRef/Reference/Reference.html)
[EKEventStore 类参考](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/EKEventStore)

# android - 如何将参数传递给 AndroidTestCase？

> ID：15188756
> 
> 赞同：10
> 
> 时间：2013-03-03T17:54:00.483
> 
> 标签：android, instrumentation

我已经实现了一个 Instrumentation 和一个 AndroidTestCase。

对于我的测试，我需要连接到外部 WIFI 设备。我希望测试人员能够指定一个 SSID 供测试使用。

给出命令行（adb shell am instrument ...）来运行测试不是问题，但我怎样才能将SSID添加到命令行并在代码中提取呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-09-12T18:46:06.217

要扩展[selalerer](https://stackoverflow.com/users/481528/selalerer)的[答案](https://stackoverflow.com/a/15198415/196486)，可以使用通过 Gradle 指定的参数启动检测测试：

```
./gradlew -Pandroid.testInstrumentationRunnerArguments.exampleArgument=hello connectedAndroidTest 
```

您可以使用以下方法检索检测参数：

```
InstrumentationRegistry.getArguments().getString("exampleArgument") // returns "hello" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-04T09:36:50.760

找到了解决方案。

我让我的测试运行程序继承自 InstrumentationTestRunner 并在 onCreate() 中获取额外的数据：

```
public class MyTestRunner extends InstrumentationTestRunner {

    public static String BAR;

    public void onCreate(Bundle arguments) {

        if (null != arguments) {    
            BAR = (String) arguments.get("foo"));
        }    
        super.onCreate(arguments);
    }
} 
```

我添加到 Android.mk：

```
LOCAL_JAVA_LIBRARIES := android.test.runner 
```

并到 AndroidManifest.xml：

```
<instrumentation 
    android:name="com.example.MyTestRunner"
    android:targetPackage="com.example" /> 
```

使用以下命令行运行它：

```
adb shell am instrument -w -e foo the_value_of_bar com.example/com.example.MyTestRunner 
```

我能够从命令行获取 'foo' 参数并在我的 AndroidTestCase 中使用 BAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:53:13.890

这听起来像*参数化 JUnit 测试用例*。

查看[这里](http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/)的简短教程- 请注意，您将需要使用 JUnit4，我不确定 Android 的测试框架是否已为此做好准备。

也就是说，JUnit4 向后兼容 JUnit3，因此理论上可以在 android 测试用例运行器下使用 JUnit4 注释，并带有一些构建路径错误。

# winforms - 如何在 VS2012 中创建 C++/CLI Winforms 应用程序？

> ID：15188757
> 
> 赞同：3
> 
> 时间：2013-03-03T17:54:09.410
> 
> 标签：winforms, visual-studio-2012, user-interface, c++-cli

我刚刚为桌面安装了 Visual Studio 2012 express。我看不到任何用 C++ 创建 GUI 应用程序的地方！Visual C++ 2010 中曾经存在的“Windows 窗体应用程序”在哪里？这些拖放控件在哪里？我安装了这个，因为我有详细信息告诉它支持 GUI 智能感知（[Visual C++：无法从另一个类调用方法](https://stackoverflow.com/questions/15177179/visual-c-unable-to-invoke-method-from-another-class)）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T20:21:50.627

他们希望您停止创建 C++/CLI Winforms 应用程序，这是一个不明显的暗示。然而，管道仍然存在，至少对于 VS2012 和 VS2013。未来可能不会出现这种情况。

您可以通过以下步骤将 CLR 控制台应用程序转换为 Winforms 应用程序：

*   从文件 + 新建 + 项目、CLR 节点、CLR 控制台应用程序开始
*   项目 + 添加新项目、UI 节点、Windows 窗体
*   项目 + 属性、链接器、系统、子系统 = Windows
*   项目 + 属性、链接器、高级、入口点 = 主

将预先生成的 .cpp 文件更改为如下所示：

```
#include "stdafx.h"
#include "MyForm.h"

namespace ConsoleApplication45 {    // Change this!!
    using namespace System;
    using namespace System::Windows::Forms;

    [STAThread]
    int main(array<System::String ^> ^args)
    {
        Application::EnableVisualStyles();
        Application::SetCompatibleTextRenderingDefault(false); 
        Application::Run(gcnew MyForm());
        return 0;
    }
} 
```

请注意，您需要将命名空间名称更改为您的项目名称。按 F5 进行测试。一切检查完毕后，您可以照常设计表单。

* * *

注意，Visual Studio 2015 在 CRT 中有一个讨厌的静态初始化顺序错误，如果项目包含任何本机 C++ 代码，它可能会导致应用程序在启动时立即崩溃并出现 AVE。作为一个未修复的错误，删除这些项目模板有些不可避免的危险。 [一种可能的解决方法](https://stackoverflow.com/q/41485935/17034)是更改​​入口点（第 4 个项目符号）。

对于以 x86 为目标的项目，复制粘贴此字符串：

```
?mainCRTStartupStrArray@@$$FYMHP$01AP$AAVString@System@@@Z 
```

对于以 x64 为目标的项目，复制粘贴：

```
?mainCRTStartupStrArray@@$$FYMHP$01EAPE$AAVString@System@@@Z 
```

* * *

在 VS2017 附近的某个地方，设计人员无法打开带有神秘错误消息的新表单。解决方法是先构建项目，使用 Build > Build。

# c++ - cmake 与 libboost_python-py32.so 链接而不是 libboost_python.so

> ID：15188760
> 
> 赞同：9
> 
> 时间：2013-03-03T17:54:12.140
> 
> 标签：c++, python, boost, cmake

我正在尝试为我编写的库构建 python 绑定，但我在让 cmake 理解它应该使用用于 python 3 的 boost-python 库时遇到了一些麻烦。

这是我的 cmake 文件：

```
cmake_minimum_required(VERSION 2.8)

FIND_PACKAGE(Boost COMPONENTS
                system
                thread
                python REQUIRED)
find_package(PythonLibs REQUIRED)

INCLUDE_DIRECTORIES(${PYTHON_LIBRARIES})
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})

ADD_LIBRARY(
  pschulze SHARED
  src/candidate_relation.cpp
  src/schulze.cpp
  src/calculate.cpp
  src/candidate.cpp
  src/ranking.cpp
  src/userinput.cpp
  python.cpp)

TARGET_LINK_LIBRARIES(pschulze ${Boost_LIBRARIES} ${PYTHON_LIBRARIES})

ADD_EXECUTABLE(
  schulze
  src/candidate_relation.cpp
  src/schulze.cpp
  src/calculate.cpp
  src/candidate.cpp
  src/ranking.cpp
  src/userinput.cpp
  src/json-spirit/json_spirit_reader.cpp
  src/json-spirit/json_spirit_value.cpp
  main.cpp)

TARGET_LINK_LIBRARIES(schulze ${Boost_LIBRARIES} ${PYTHON_LIBRARIES})

ADD_DEFINITIONS(-std=gnu++0x -Os)

add_subdirectory (tests)

set(CMAKE_BUILD_TYPE Debug) 
```

这是我得到的链接器错误：

```
Linking CXX executable schulze
CMakeFiles/schulze.dir/src/schulze.cpp.o: In function `arg_to_python':
/usr/include/boost/python/converter/builtin_converters.hpp:122: undefined reference to `PyInt_FromLong'
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/libboost_python.so: undefined reference to `PyString_Size' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:56:05.937

这可能会奏效：

```
set(Python_ADDITIONAL_VERSIONS 3.2)

find_package(Boost COMPONENTS system thread python-py32 REQUIRED) 
```

# sql - Rails SQL 查询如果为空

> ID：15188761
> 
> 赞同：2
> 
> 时间：2013-03-03T17:54:13.863
> 
> 标签：sql, ruby-on-rails

我正在尝试通过传入一个值来使用 lambda 函数来做一个 rails 范围：

```
"scope :for_rank, lambda {|rank| where('min_rank <= ? AND max_rank >= ?', rank, rank)}" 
```

但是，max_rank 可能为空。在这种情况下，我希望查询只执行 min_rank <= ? 部分。我怎样才能做到这一点？

例子：

```
"a.min_rank = 10"
"a.max_rank = 20"
"b.min_rank = 15"
"b.max_rank = nil" 
```

我希望 for_rank(15) 的搜索应该返回 a 和 b。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:05:26.007

试试这个：

```
 scope :for_rank, lambda {|rank| where('(min_rank <= ? AND max_rank IS NOT NULL AND max_rank >= ?) OR (min_rank <= ? AND max_rank IS NULL)', rank, rank, rank)} 
```

# ruby - Mongoid where 子句 ruby 哈希

> ID：15188765
> 
> 赞同：0
> 
> 时间：2013-03-03T17:54:36.310
> 
> 标签：ruby, hash, mongoid

假设我有一个 mongoid 文档，其中包含一个`:pairs`哈希类型的字段。当我不想像这样查询哈希时：

```
Doc.where(:pairs=>{"field1"=>1}) 
```

我得到了结果，因为我有一个成对的值为 1 的字段。我也有超过`1`. 当我执行以下操作时，`nil`返回：

```
Doc.where(:pairs=>{"field1"=>{"$gt"=>0}}) 
```

这似乎不起作用，而且我确实有一对 key`field1`和 values 大于`0`. 谁能向我提供有关为什么这不起作用的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:13:40.740

试试看：`Dco.where(:pairs.gt => 0)`
有关更多详细信息 mongoid 查询，请参阅以下链接。
[http://mongoid.org/en/mongoid/docs/querying.html](http://mongoid.org/en/mongoid/docs/querying.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-11T08:14:57.023

```
Doc.where('pairs.field1' => {"$gt"=>1}) 
```

# jsf - 为什么我的表单会在新标签页中打开？

> ID：15188766
> 
> 赞同：0
> 
> 时间：2013-03-03T17:54:37.377
> 
> 标签：jsf

这是我的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Guess Number</title>
    </h:head>
    <h:body>

        The number I guessed is: #{guessNumber.generatedNumber}
        <br />        
        <strong>Please guess the number I generated which is between 0 and 10!</strong>
        <h:form target="index">          
            <h:commandButton type="submit" value="Guess The Number!"></h:commandButton>
        </h:form>

    </h:body>
</html> 
```

所以在输出中我看到了类似的东西：

> 我猜的数字是：6 请猜我生成的数字在0到10之间！

以及此文本下方的按钮。当我单击按钮时，页面会在新选项卡中打开。但为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:04:27.340

这是[`target`](http://www.w3schools.com/tags/att_form_target.asp)由于`<h:form>`. 请注意，这是为纯 HTML 定义的，而不是 JSF 式的特殊行为。

要解决这个*问题*，只需`target`从`<h:form>`.

# java - 如何使 Android 应用程序多线程

> ID：15188768
> 
> 赞同：-4
> 
> 时间：2013-03-03T17:54:53.787
> 
> 标签：java, android, multithreading

我创建了一个应用程序，该应用程序直到最近才运行良好……但现在它崩溃并显示“跳过 63 帧！应用程序可能在其主线程上做太多工作”的错误。

根据我收集到的信息，我需要在应用程序中实现多线程，但我很好奇最简单、最快和最有效的方法！

（我在下面包含了我的源代码）

* * *

## 应用活动.java

```
package com.mkyong.android;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.content.Intent;

public class AppActivity extends Activity {

final Context context = this;
private Button button;
@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.main);

button = (Button) findViewById(R.id.button1);

// add button listener
button.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View arg0) {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
        context);

    // set title
    alertDialogBuilder.setTitle("Settings Menu");

    // set dialog message
    alertDialogBuilder
        .setMessage("Link or Delete?")
        .setCancelable(false)
        .setPositiveButton("Link",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        //start new activity

        Intent intentApp2Activity = new Intent(AppActivity.this, App2Activity.class);
        startActivity(intentApp2Activity);

        // if this button is clicked, close
        // current activity
        AppActivity.this.finish();
    }
  })
        .setNegativeButton("Delete",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    }
});
}} 
```

* * *

## App2Activity.java

```
package com.mkyong.android;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class App2Activity extends Activity {

Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
}

} 
```

* * *

## 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1" android:layout_width="fill_parent"     android:layout_height="fill_parent">
<TextView android:textAppearance="?android:textAppearanceLarge" android:id="@+id/textView1"     android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="NFC Linking     Manager" />
<Button android:id="@+id/button1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Linksys Router (Home)" android:onClick="onPopupBtClick" />
<Button android:id="@+id/Button2" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Netgear Router (Office)" />
<Button android:id="@+id/Button3" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Cisco Router (Office)" />
</LinearLayout> 
```

* * *

## main2.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:orientation="vertical" android:id="@+id/linearLayout1"     android:layout_width="fill_parent" android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android">
<TextView android:textAppearance="?android:textAppearanceLarge" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="User Settings:" />
<TextView android:textAppearance="?android:textAppearanceLarge" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Data Limit" />
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/textView4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<SeekBar android:id="@+id/seekBar1" android:layout_width="fill_parent" android:layout_height="wrap_content" />
<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content">
    <TextView android:gravity="left" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="10MB" android:layout_weight="1.0" />
    <TextView android:gravity="right" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Unlimited Data" android:layout_weight="1.0" />
</LinearLayout>
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Bandwidth Limit" />
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/textView4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<SeekBar android:id="@+id/seekBar1" android:layout_width="fill_parent" android:layout_height="wrap_content" />
<LinearLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content">
    <TextView android:gravity="left" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="10kbs" android:layout_weight="1.0" />
    <TextView android:gravity="right" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Unlimited Bandwidth" android:layout_weight="1.0" />
</LinearLayout>
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" />
<TextView android:textAppearance="?android:textAppearanceMedium" android:id="@+id/TextView02" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="WiFi Time Limit" />
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<TimePicker android:id="@+id/timePicker1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="50.0dip" android:layout_weight="1.0" />
<TextView android:textAppearance="?android:textAppearanceSmall" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" />
<EditText android:id="@+id/editText1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:hint="Blocked Sites - [ex: www.xxx.com]" android:ems="10" />
</LinearLayout> 
```

* * *

## AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mkyong.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="11" />

<application
    android:label="@string/app_name" >
    <activity android:name=".App2Activity" >
    </activity>
    <activity
        android:name=".AppActivity"
        android:label="@string/app_name" >
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:55:51.937

多线程不是您插入的简单工具。您只是要求我们架构/设计您的应用程序。从阅读*Java：实践中的并发开始。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:10:52.857

Android 为可以在线程中运行的简单任务提供 AsyncTask 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:30:06.433

简单的穿线方法如下：

```
new Thread(new Runnable() {
@Override
public void run() {
     //Dosomething here
}).start(); 
```

然而，这是非常基本的，让你无法控制你的线程

# php - 从不同的“同一类的方法”调用递归的“类的方法”

> ID：15188771
> 
> 赞同：3
> 
> 时间：2013-03-03T17:55:02.233
> 
> 标签：php, class, function, methods

我[之前问过这个问题](https://stackoverflow.com/questions/15188518/recursive-function-in-a-php-class)，有人放了一个链接来解释**什么是递归函数**。*他/她*投了反对票，等等，就像在**真正的递归函数**中一样，所有其他人也都投了我的票。

现在我**再次问**，我应该如何从不同*的“同一类的方法*”中调用递归*的“类*的方法” ？在第一个“递归方法”的定义中进行递归时，我应该使用还是只使用*`$this->method()``method()`*

 *谢谢 ;) *（我称它为类的方法，以避免那些因为说“功能”而被否定杀死的人）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T18:00:33.497

您以与调用任何其他方法相同的方式递归调用方法——只是您在其内部调用该方法。

例如，查看以下内容：

```
class A
{

  public function b($i = 0)
  {

    echo ++$i;

    if ($i < 10)
    {
      $this->b($i);
    }

  }

}

$a = new A;

$a->b(); 
```

这将打印出数字 1 到 10，然后停止。

如果你想变得聪明，而不是使用`$this->b($i);`你可以使用`$this->{__FUNCTION__}($i);`. 然后，如果您希望在某个时候重命名该方法（或将方法内容复制到其他地方），您将不必搜索和重命名每个递归调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:01:19.307

```
function methodOne(someInteger){    
    return methodTwo(someInteger);    
}

function methodTwo(someInteger){    
    if(someInteger == 0){
        return 1;
    }
    else{
    return someInteger*methodTwo(someInteger-1);
    }
} 
```

这回答了你的问题了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-07T07:45:40.267

我的答案肯定会迟到两年！我只希望这对其他人有用。这是我的解决方案：

```
 class Factorial 
   {
   protected $number;

   public function __construct($number)
   {
       $this->number = $number;
   }

   public function getFactorial()
   {
       if ($this->number < 2) {
         return 1;
       }

    else {
        return $this->number * ($this->getFactorial($this->number -=1));
    }
 }

}

$factorial = new Factorial(4);
echo $factorial->getfactorial(); 
```

您可以将逻辑包装在 try catch 块中，以确保输入的数字确实是整数。*

# javascript - 显示/隐藏 Div，divers DIV's

> ID：15188775
> 
> 赞同：0
> 
> 时间：2013-03-03T17:55:27.723
> 
> 标签：javascript, html, hide, show

我是这个网站的新手。

Javascript并不多，但我找到了一个显示和隐藏div的代码。

这就是我现在所拥有的，当单击 Details1 时也显示 Details2

jsfiddle.net/qU3TG/3/

我如何才能使效果仅对当前项目产生影响？

例如：如果我有选项 Details 1 Details 2, 3 ..... Details DetailsN，单击 Details # 仅显示所属的 div。

效果显示/隐藏，适用于所有人，而不仅仅是一个。我想帮助我处理此代码或希望我可以推荐其他代码

我几乎有一天的时间试图解决这个问题，但我无法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:17:31.080

根据您的 jsFiddle，我已重命名隐藏块内的链接：

```
<a href="#" class="hide">hide</a> 
```

然后更新了jQuery代码：

[jsFiddle](http://jsfiddle.net/earthdesigner/qU3TG/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:33:01.957

使用它作为你的`jQuery`一部分：

```
$('.slidingDiv .hide').click(function(){
    $(this).parent().slideToggle();
}); 
```

这将导致`div`包含隐藏锚的父级切换。我希望这是你需要的

# jquery - 当 .click 插入时 .hover 不再起作用

> ID：15188779
> 
> 赞同：0
> 
> 时间：2013-03-03T17:55:32.143
> 
> 标签：jquery, html, css, click, hover

首先，请看一下我的 jQuery。

```
$(document).ready(function(){
    $(".pic").find('img').hover(
    function(){ // hover in
        $(this).animate({width: "450", height: "300"}, 200);
    }, 
    function(){ // hover out
        $(this).animate({width: "150", height: "100"}, 1000); 
    });

    $(".zoom").click(function(){     // click for the lightbox
        var go = $(this).find('img').attr("src");   // get clicked link href
        $("#box").html('<img src="'+go+'"/>');  // place href as img src value

        $('#backdrop, #box').animate({opacity: ".6"}, 500, 'linear');
        $('#box').find('img').animate({opacity:
        $('#box').animate({opacity: '1'}, 300, 'linear');
        $('#backdrop, #box').css('display', 'block');
    });

    $("#backdrop").click(function(){     // close the lightbox
        $("#backdrop, #box").animate({opacity: "0"}, 500, "linear", function(){
            $("#backdrop, #box").hide();
        });
    });
}); 
```

所以这就是我所做的，`.hover`当下面没有`.click`写函数时，我的函数工作正常，但是当我把`.click`函数放在下面时，它变得无功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:01:08.483

您的代码中存在语法错误：

```
$('#box').find('img').animate({opacity: 
```

这可能会阻止您的代码表单工作。当我注释掉这一行时（并组成一些与您的选择器一起使用的 HTML，然后悬停和单击事件起作用，它们是独立的事件，因此您可以将它们绑定到同一个元素。）

JavaScript 在执行之前会在脚本标记或 .js 文件中一次全部评估，因此即使您的悬停脚本更正了单击脚本中的语法错误，也会阻止执行其余的 JavaScript。如果这两个代码块位于单独的脚本元素（或单独的 .js 文件）中，则悬停将起作用，而单击将失败。这当然不是解决方案，您需要修复未关闭的对象文字。在 Firefox 中安装 Firebug 或在 IE 中启用开发人员工具以查看此错误。如果没有这样的工具，可能很难调试。

# zend-framework - Zend_Form 显示来自 DB 表行的表单

> ID：15188785
> 
> 赞同：0
> 
> 时间：2013-03-03T17:56:04.877
> 
> 标签：zend-framework, zend-form, zend-db

我想根据数据库表记录构建一个动态表格。

这是一个房间预订模块。

酒店有几种房型和描述。预订酒店时，用户应该看到如下表格：

```
 -- firstname [text-input]
   -- lastname  [text-input]
   -- check-in  [text-input and datepicker]
   -- check-out [text-input and datepicker]
   -- Room1 Title:Room Description  [Text-input form for number of rooms]
   -- Room2 Title:Room Description  [Text-input form for number of rooms]
   -- Room3 Title:Room Description  [Text-input form for number of rooms]
   -- Room4 Title:Room Description  [Text-input form for number of rooms] 
```

我在一张桌子上有这个房间记录。如何使用 ZEND_FORM 构建它？我认为它应该类似于房间对象的 foreach

我还想添加自动计算。每个房间都有每晚的特定价格。我想总结房间数量并乘以夜数。

那么如何使用 Zend_Form 来完成呢？我应该添加一些助手吗？新类型的文本元素？

如果是，请提供一些资源来指导和使用示例。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:04:07.220

我有类似的东西，但有复选框，这是一种改编，我希望它有所帮助。

```
class Form_Booking extends Zend_Form {
   function init() 
   {
       $this->addElement('text', 'first_name', array (
           'label' => 'First name',
           'required' => true 
       ));

       // ... all the other fields

       $count = 1000; // I used this value because I had a strange bug
       //$rooms = array() the entries from your table
       foreach ($rooms as $one) 
       {    
           $this->addElement('checkbox', "$count", array (
              'label'          => $one['room_title'],
              'description'    => $one['room_description'], 
              'belongsTo'      => 'rooms',
       ));
           $count++;
      }
   }
} 
```

# windows - Windows 启动服务返回 ERROR_SERVICE_DISABLED

> ID：15188787
> 
> 赞同：2
> 
> 时间：2013-03-03T17:56:09.660
> 
> 标签：windows, visual-c++, service

我已经成功创建了一个服务：

```
hService = CreateService(hSCManager,lpServiceName,lpDisplayName,
                         SERVICE_ALL_ACCESS,    
                         SERVICE_KERNEL_DRIVER, 
                         dwStartType,  
                         SERVICE_ERROR_NORMAL,  
                         lpFilePath,              
                         NULL,                  
                         NULL,                  
                         NULL,                 
                         NULL,                  
                         NULL); 
```

但是当我尝试启动服务时：

```
hService = OpenService(hSCManager, lpServiceName, SERVICE_ALL_ACCESS);

if (StartService(hService,0,NULL)== NULL){
        DWORD error = GetLastError();
} 
```

误差等于`ERROR_SERVICE_DISABLED`。如何启用服务？这在 Windows API 文档中并不是很明显。

# java - 无法使用paintComponent更新JPanel的背景来设置其背景

> ID：15188788
> 
> 赞同：1
> 
> 时间：2013-03-03T17:56:21.870
> 
> 标签：java, swing, jpanel, background-image, paintcomponent

我正在制作一个应用程序，您可以在其中将背景更改为任何图片或保留默认图片。它由一个`ImagePanel`覆盖其paintComponent 的类组成，以将图像图标设置为其背景。

*   我想要做的是从`GUISettings`类中让用户从带有过滤器的 FileChooser 中选择一个图像，然后将 file.getPath() 字符串传递给`ImagePanel`类并重新验证该 gui，但没有改变背景，甚至没有我`ImagePanel`在控制台上显示的调试打印。

以下是代码（简化）：

`ImagePanel`班级：

```
public class ImagePanel extends JPanel{

private String defaultbg = "Icons/background.jpg";
private String path = "";
private BufferedImage img;
private GridBagConstraints gbc = new GridBagConstraints();
public ImageIcon bgicon;
private Image bg;
public static boolean defaultbgset = true;

public ImagePanel(){

    if(defaultbgset){

        path = defaultbg;
        System.out.println("path in default = " + path);
    } else {

        if(GUISettings.getPath() != null){

            path = GUISettings.getPath();
            System.out.println("path in userBG = " + path);
        }
    }

    bgicon = new ImageIcon(getClass().getResource(path));

    bg = (new ImageIcon(bgicon.getImage().getScaledInstance(1024, 800, java.awt.Image.SCALE_SMOOTH))).getImage();
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(bg, 0, 0, getWidth(), getHeight(), this);
}

public ImageIcon getDrawBoardBackground(){

    return bgicon;
}

public void setPath(String p){

    this.path = p;
}

public void resetPath(){

    this.path = defaultbg;
}

} 
```

现在`GUISettings`上课：

```
public class GUISettings extends JPanel implements ActionListener{

private TitledBorder title = BorderFactory.createTitledBorder("User Interface Settings");
private JLabel lbackground, userbg;
private JTextField bgpath;
private GridBagConstraints gbc = new GridBagConstraints();
public static JRadioButton default_bg, user_bg;
private JButton browse;
public static File file;
private JLabel userfile = new JLabel("Not chosen.");

public static String userBgPath = null; 

public GUISettings(){

    //this.setLayout(new GridBagLayout());
    Dimension size = getPreferredSize();
    size.setSize(200,150); //w, h
    this.setPreferredSize(size);
    this.setBorder(title);

    JPanel toppane = new JPanel();
    toppane.setLayout(new GridBagLayout());

            (..)

                browse = new JButton("Choose file");
                browse.setActionCommand("browse");
                browse.addActionListener(this);
                gbc.gridx = 1;
                gbc.gridy = 2;
                gbc.insets = new Insets(0,0,0,0);
                toppane.add(browse,gbc);

                gbc.gridx = 2;
                gbc.gridy = 2;
                gbc.insets = new Insets(0,5,0,0);
                toppane.add(userfile,gbc);

        add(toppane, BorderLayout.NORTH);

        JPanel midpane = new JPanel();
        midpane.setLayout(new GridBagLayout());
        add(midpane, BorderLayout.CENTER);

            (..)
}

@Override
public void actionPerformed(ActionEvent e) {

    if("browse".equalsIgnoreCase(e.getActionCommand())){

        final JFileChooser fc = new JFileChooser();
        fc.setFileFilter(new ExtensionFileFilter());
        int returnVal = fc.showOpenDialog(fc);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            file = fc.getSelectedFile();
            //This is where a real application would open the file.
            userfile.setText(file.getName());
            userBgPath = file.getPath();

            // THIS IS WHERE I UPDATE PATH etc.
            MainFrame.bg.setPath(userBgPath);
            MainFrame.bg.defaultbgset = false; // set to user
            MainFrame.bg.repaint();
            MainFrame.bg.revalidate();
            user_bg.setSelected(true);
            System.out.println("File: " + file.getName() + ".");    
        } else {

            MainFrame.bg.defaultbgset = true;
            MainFrame.bg.resetPath();
            MainFrame.bg.repaint();
            MainFrame.bg.revalidate();
            default_bg.setSelected(true);
        }
    } // end of if

}

public static String getPath(){

    return userBgPath;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:08:01.660

```
@Override
public void paintComponent(Graphics g) {
    g.drawImage(bg, 0, 0, getWidth(), getHeight(), this);
} 
```

这应该写成：

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(bg, 0, 0, getWidth(), getHeight(), this);
} 
```

并且每当您以任何方式更改 ImagePanel 的图像时，都必须调用对象`repaint()`的方法`ImagePanel`（例如 imagepanel）.. 使用 `imagePanel.repaint()`.

**更新**
在我看来，您应该在`ImagePanel`类中有一个方法，您可以在其中设置图像并在那里重新绘制`JPanel`自身，例如：

```
public void setImage(Image bg)
{
  this.bg = bg;
  repaint();
} 
```

这将使您免于在使用它的地方显式调用对象的`repaint()`方法。`ImagePanel`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:17:03.260

> 然后将 file.getPath() 字符串传递给 ImagePanel 类

通过路径不会做任何事情。当路径改变时，您实际上需要读取图像。因此，在您的设置路径方法中，我猜您需要添加如下代码：

```
bgicon = new ImageIcon(getClass().getResource(path));
bg = (new ImageIcon(bgicon.getImage().getScaledInstance(1024, 800, java.awt.Image.SCALE_SMOOTH))).getImage();
repaint(); 
```

该类应该负责重新绘制自己。

# javascript - 即使在javascript中鼠标悬停也不会输出

> ID：15188790
> 
> 赞同：1
> 
> 时间：2013-03-03T17:56:44.250
> 
> 标签：javascript, events, mouseover

哦，我的新网站的初始屏幕我希望有一个鼠标悬停事件，每次移动鼠标时都会改变我的徽标颜色。下面我列出了到目前为止的代码，但我无法让它显示我的图像。

```
var images = new Array()
images[0] = 'img/CMbl.png'
images[1] = 'img/CMo.png'
images[2] = 'img/CMg.png'
images[3] = 'img/CMp.png'
images[4] = 'img/CMblu.png'

var p = images.length;

logo = document.getElementById( 'logo' ),
console = document.getElementById( 'console' );

logo.addEventListener('mousemove', changeImage);

function changeImage() {

var rand = Math.round(Math.random()*(p-1));

var image = p[ rand ];

if ( image == logo.src ) {

    changeImage();
    return false;
}

logo.src = console.innerText = image;
    function showImage(){
        document.write('<img src="+image[rand]">');
    }
} 
```

我在html中的输出应该是（在类'logo'内）

```
<script language="javascript">
showImage()
</script> 
```

我不明白为什么它不起作用。我正在使用类似的代码在刷新时更改图像，它仍然使用 math.random() 和一个数组来调用图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:02:50.227

这应该是这样的：

```
document.write('<img src="' + image[rand] + '">'); 
```

（据我所见，您的脚本充满了错误。我会为您快速编写一个有效的示例。）

这是一个工作示例（我认为这就是您想要的）[Jsfiddle 示例](http://jsfiddle.net/zachrip/z3fUQ/2) 如您所见，它的效果很糟糕，我不建议使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:49:01.473

我制作了一个 JSfiddle，它清理了一些代码，并使用了 jQuery。

[http://jsfiddle.net/jackcannon/2EXs5/](http://jsfiddle.net/jackcannon/2EXs5/)

```
var images = [
        'http://colorvisiontesting.com/plate%20with%205.jpg',
        'http://regentsparkcollege.org.uk/wp-content/uploads/2012/09/test.jpg',
        'http://nyquil.org/uploads/IndianHeadTestPattern16x9.png',
        'http://25.media.tumblr.com/tumblr_m9p3n1vJmZ1rexr16o1_400.jpg',
        'http://www.themoralofthestoryis.com/wp-content/uploads/2013/01/test.gif'
    ];

$('#logo').mouseover( changeImage );

function changeImage() {
    var rand = Math.floor(Math.random() * images.length);
    var image = images[ rand ];
    if ( image == $('#logo').attr('src') ) {
        changeImage();
        return false;
    }

    $('#logo').attr('src', image);
}; 
```

# c#-4.0 - 什么左移和右移运算符以及它们是如何工作的

> ID：15188794
> 
> 赞同：0
> 
> 时间：2013-03-03T17:57:20.787
> 
> 标签：c#-4.0

//((大家好！我是C#初学者，谁能告诉我左右移位运算符的功能及其工作方式。我在某处读过，但很困惑。谢谢))

```
using System;
class clc
{
    public static void Main() // the Main method
    {
        int x = 7, y = 2, z, r;
        z = x << y ; //left shift operator
        r = x >> y; // right shift operator
        Console.WriteLine("\n z={3}\tr={4} ",z,r);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:20:51.060

要了解移位操作，您必须了解二进制数。

让我们以左移为例：

```
z = 7 << 2; 
```

32位整数**7**是二进制的**0000 0000 0000 0000 0000 0000 0000 0111**。您必须从右侧开始将位移动到左侧。从任一端移出的位将被丢弃。

将其移动 1 将导致**0000 0000 0000 0000 0000 0000 0000 1110**

再将其移动 1 次将得到**0000 0000 0000 0000 0000 0000 0001 1100**，即整数表示中的 28。

阅读这篇优秀的维基百科文章[二进制数](http://en.wikipedia.org/wiki/Arithmetic_shift)

# php - PHP方法返回这个，对性能有影响吗？

> ID：15188795
> 
> 赞同：3
> 
> 时间：2013-03-03T17:57:25.250
> 
> 标签：php

通过确保我所有的二传手都返回，它如何影响性能`$this`？允许类似于 jQuery 编码标准的链调用。

例如：

```
public function setEnabled(){
    $_enabled = true;
    return $this;
} 
```

我发现this other [question](https://stackoverflow.com/questions/6138758/return-this-design-pattern-or-anti-pattern)没有提到性能方面，surley有一个负面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:03:27.927

没有显着的性能影响。不克隆对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:03:13.790

对象通过引用传递，除非您专门克隆它们（无论如何在 php 5 中）。我认为这样做不会对性能产生任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:03:50.340

不，另一个问题回答了所有问题，在您的代码示例中，您的函数将始终为真，如果您愿意，可以是链式的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:07:46.810

PHP`return null;`和`return;`which 完全不返回任何东西是一样的。无论哪种方式，都会返回一些东西，它也可能是对自身的对象引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T18:08:42.050

大多数代码的每一行都会带来性能损失。但这不是写那行代码的重点吗

您的问题非常模糊，取决于几个因素。返回的大小对象、接收方式以及在`$this`返回之前进行的计算。

通常返回 $this 没有问题，但这完全是判断的问题。如果 $this 包含一个巨大的数据数组，您可以认为它将比您的示例使用更多的内存和处理时间。

# c# - 如何使用 c#.NEt 在 windows phone 中读取 rss feed 数据？

> ID：15188803
> 
> 赞同：0
> 
> 时间：2013-03-03T17:58:23.243
> 
> 标签：c#, windows-phone-7, rss

我有以下 rss 提要，它包含有关其他 rss 提要的信息，最终它会有数据。当用户选择任何 rss 提要（我想按他们的名字显示根 rss 提要的子 rss 提要）时，将显示有关所选 rss 提要的信息。

[http://www.espncricinfo.com/ci/content/rss/feeds_rss_cricket.html](http://www.espncricinfo.com/ci/content/rss/feeds_rss_cricket.html)

```
 public static void Read(string url)
    {
        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += webClient_DownloadStringCompleted;
        webClient.DownloadStringAsync(new Uri( url));            
    }

 static void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        XDocument document = XDocument.Parse(e.Result);

        //return (from descendant in document.Descendants("item")
        //        select new RssNews()
        //        {
        //            Description = descendant.Element("description").Value,
        //            Title = descendant.Element("title").Value,
        //            PublicationDate = descendant.Element("pubDate").Value
        //        }).ToList();
    } 
```

我尝试了下面的代码，但它显示了一个异常。知道如何解决这个问题吗？

System.ni.dll 中出现“System.Reflection.TargetInvocationException”类型的异常，但未在用户代码中处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:06:26.363

您的代码（包括 xml 解析）工作正常，但您的 url 指向*一个 html 页面，其中包含 rss feed 的 url*，而不是 rss feed。

试试，例如，这个网址。[http://www.espncricinfo.com/rss/content/story/feeds/1.xml](http://www.espncricinfo.com/rss/content/story/feeds/1.xml)取自该页面。

# java - java二叉搜索树删除两个孩子

> ID：15188804
> 
> 赞同：0
> 
> 时间：2013-03-03T17:58:23.563
> 
> 标签：java, binary-search-tree

我为这两种情况编写了代码，你必须找到继任者然后将其向上移动。它似乎有效，但是当我打印出这棵树时，它会产生两个孩子。例如我的树是

```
 /
       18
      /  \
     17  19 
```

这只是我正在处理的树的一部分，当我尝试删除 18 时，它会删除它，但是当我打印出树时，打印输出是 17 17 19 19。下面是我的代码：

```
System.out.println("what is t " + T.getData()); 
System.out.println("what is t's right " + T.getRight().getData());
System.out.println("what is t's left " + T.getLeft().getData());
sucessor = findSucessor(T);
System.out.println("2 what is sucessor " + sucessor.getData());

T.getRight().setLeft(sucessor.getRight());
sucessor.setLeft(T.getLeft());
T.setData(sucessor.getData()); 
```

只要它不为空，我的继任者就会向右一并一直向左，所以在这种情况下，继任者是 19。

我认为它只是让我感到困惑的指针，我没有切断链接，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T20:40:22.263

你应该这样做：

```
successor.getParent().replace(successor, successor.getRight());
successor.setLeft(T.getLeft());
successor.setRight(T.getRight();
T.getParent().replace(T, successor); 
```

# c - KLEE WARNINGS 并且没有生成输入

> ID：15188806
> 
> 赞同：3
> 
> 时间：2013-03-03T17:58:32.077
> 
> 标签：c, llvm, llvm-gcc, klee

我是 KLEE 的新手。

我已经安装了 klee，正确地按照说明进行操作。

如果我从教程运行程序：

```
int get_sign(int x) {
if (x == 0)
   return 0;
if (x < 0)
   return -1;
else 
   return 1;
}

int main() {
  int a;
  klee_make_symbolic(&a, sizeof(a), "a");
  return get_sign(a);
} 
```

我得到了预期的结果：

```
KLEE: output directory = "klee-out-0"

KLEE: done: total instructions = 51
KLEE: done: completed paths = 3
KLEE: done: generated tests = 3 
```

但是如果我想执行我的程序，我会得到：

```
 urmas-PBL21 src # llvm-gcc -emit-llvm -c -g  tcas/versions/v1/tcas.c
 urmas-PBL21 src # klee  --libc=klee tcas.o
 KLEE: output directory = "klee-out-16"
 KLEE: WARNING: undefined reference to function: __errno_location
 KLEE: WARNING: undefined reference to function: fprintf
 KLEE: WARNING: undefined reference to variable: stdout

 KLEE: done: total instructions = 11
 KLEE: done: completed paths = 1
 KLEE: done: generated tests = 1 
```

并且没有生成输入。

似乎当前的 klee 安装不支持 C 函数，但我按照教程中的方式安装：http: [//klee.llvm.org/GetStarted.html#build](http://klee.llvm.org/GetStarted.html#build)

使用 uclibc 和 POSIX 环境模型，它也应该能够处理函数。

有人可以帮我吗？

* * *

如果我在 klee 执行期间不使用 --libc=klee 我得到

```
urmas-PBL21 src # klee   tcas.o
KLEE: output directory = "klee-out-19"
KLEE: WARNING: undefined reference to function: atoi
KLEE: WARNING: undefined reference to function: fprintf
KLEE: WARNING: undefined reference to variable: stdout

KLEE: done: total instructions = 11
KLEE: done: completed paths = 1
KLEE: done: generated tests = 1 
```

同样的错误，其他警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-30T19:48:27.017

看来 KLEE 版本的 uclibc 还不够用。如果您使用 klee 运行，`klee --libc=uclibc`则不会收到该警告。

# android - 如何解决android中的NetworkOnMainThreadException错误？

> ID：15188810
> 
> 赞同：1
> 
> 时间：2013-03-03T17:58:36.537
> 
> 标签：android, smtp, jakarta-mail

我曾经`javamail`在android中发送电子邮件。但它会抛出异常**NetworkOnMainThreadException**。如何解决这个异常？

**主要活动**

```
package com.aaa;
import android.os.Bundle;
import android.os.NetworkOnMainThreadException;
import android.app.Activity;
import android.util.Log; 
import android.view.Menu;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity  {
private Mail m;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    m = new Mail("mail@gmail.com", "pwd");
}
 public void sendEmail(View view){
        String[] toArr = {"samp@gmail.com"};
        m.setTo(toArr);
        m.setFrom("mail613@gmail.com");
        m.setSubject("subject"); 
        m.setBody("your message goes here"); 

        try { 
            //m.addAttachment("/sdcard/myPicture.jpg");
            if(m.send()) { 
                // success
                Toast.makeText(MainActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
            } else { 
                // failure
                Toast.makeText(MainActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
            } 
        } catch(Exception e) { 
            // some other problem
            //Toast.makeText(MainActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show(e);
            Toast.makeText(MainActivity.this, ""+e+"", Toast.LENGTH_LONG).show(); 
            Log.e("SendMail",e.getMessage(),e);
        } 

    }

 } 
```

**邮件.java**

```
package com.aaa;

import java.util.Date; 
import java.util.Properties; 
import javax.activation.CommandMap; 
import javax.activation.DataHandler; 
import javax.activation.DataSource; 
import javax.activation.FileDataSource; 
import javax.activation.MailcapCommandMap; 
import javax.mail.BodyPart; 
import javax.mail.Multipart; 
import javax.mail.PasswordAuthentication; 
import javax.mail.Session; 
import javax.mail.Transport; 
import javax.mail.internet.InternetAddress; 
import javax.mail.internet.MimeBodyPart; 
import javax.mail.internet.MimeMessage; 
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator { 
private String _user; 
private String _pass; 

private String[] _to; 
private String _from; 

private String _port; 
private String _sport; 

private String _host; 

private String _subject; 
private String _body; 

private boolean _auth; 

private boolean _debuggable; 

private Multipart _multipart; 

public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
} 

public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
} 

public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
        Session session = Session.getInstance(props, this); 

        MimeMessage msg = new MimeMessage(session); 

        msg.setFrom(new InternetAddress(_from)); 

        InternetAddress[] addressTo = new InternetAddress[_to.length]; 
        for (int i = 0; i < _to.length; i++) { 
            addressTo[i] = new InternetAddress(_to[i]); 
        } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

        msg.setSubject(_subject); 
        msg.setSentDate(new Date()); 

        // setup message body 
        BodyPart messageBodyPart = new MimeBodyPart(); 
        messageBodyPart.setText(_body); 
        _multipart.addBodyPart(messageBodyPart); 

        // Put parts in message 
        msg.setContent(_multipart); 

        // send email 
        Transport.send(msg); 

        return true; 
    } else { 
        return false; 
    } 
} 

public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
} 

@Override 
public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
} 

private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
        props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
        props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
} 

// the getters and setters 
public String getBody() { 
    return _body; 
} 

public void setBody(String _body) { 
    this._body = _body; 
} 

public void setTo(String[] toArr) {
    this._to = toArr;
}

public void setFrom(String string) {
    this._from = string;
}

public void setSubject(String string) {
    this._subject = string;
}

// more of the getters and setters ….. 
    } ` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T18:06:30.553

您需要使用[**AsyncTask**](http://developer.android.com/reference/android/os/AsyncTask.html)来执行所有网络操作。

您的网络操作可能需要很长时间，如果在主 UI 线程上完成，UI 会变得无响应。如果您的 UI 长时间冻结，该应用程序可能会被操作系统杀死。

因此，Android 4+ 强制使用后台线程来执行网络操作。

将代码放入内部进行网络活动**`doInBacground()`**，所有 AsyncTask 使用**`execute()`**.

这是您的 AsyncTask 的样子：

```
private class SendMail extends AsyncTask<String, Integer, Void> {
     protected void doInBackground() {
        sendEmail();
 }

 protected void onProgressUpdate() {
    //called when the background task makes any progress
 }

  protected void onPreExecute() {
     //called before doInBackground() is started
 }
 protected void onPostExecute() {
     //called after doInBackground() has finished 
 }
  } 
```

你可以在任何地方使用**`new SendMail().execute("");`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:03:22.883

您正在尝试访问您的 UI 线程上的网络。这很糟糕，因为它会冻结 UI，直到网络响应返回。您应该在单独的线程上进行此网络访问。

有很多选择，但最简单的选择是：

*   将 msg in 转换`MimeMessage msg = new MimeMessage(session);`为`final`.
*   包装`Transport.send(msg);`为 `new Thread(new Runnable() { @Override public void run() { Transport.send(msg); } }).start();`

您同样可以使用 an `AsyncTask`which 将允许您在 in 之后更新 UI （或者您可以通过在 UI 线程上创建 a 并对其进行ing 来`onPostExecute`获得此行为。`Handler``post()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:01:01.920

不要在主线程上执行网络任务。使用 AsyncTask

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T18:01:38.917

如果你会按照 Raghav 在评论中所说的那样搜索它，你可以找到这个问题。但只是一些基本的解释，如果你在应用程序中执行任何与网络（互联网）相关的任务，那么更喜欢在任何其他线程中而不是在 Main UIThread 中执行。所以你可以去`Asynctask`or `Service`。如果任务很瘦，那么服务会更好，否则你可以去 Asyntask.HTH :)

# java - 如何在字符串正则表达式中添加字符“-”和“`”？

> ID：15188818
> 
> 赞同：0
> 
> 时间：2013-03-03T17:59:05.627
> 
> 标签：java, regex

我正在使用下一个来源：

```
Matcher mather = Pattern.compile("(\\p{Alnum}*" + subtext + "\\p{Alnum}*)").matcher(ssb.toString()); 
```

但是如果 string =`"fefrefewre-rfrefrf"`或 "feferefewre`rfrefrf" 我的数学 = **"feferefewre"**

我需要mather =`"fefrefewre-rfrefrf"`或“fefferefewre`rfrefrf”

如何在字符串正则表达式中添加字符“-”和“`”？

潜台词 = `"fefref"`- 例如

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:07:16.457

除了“\p{alpha}”之外，您似乎只想匹配“-”和“`”符号。

我认为这是最直接的解决方案：

```
Matcher mather = Pattern.compile("((\\p{Alnum}|[\\-`])*" + subtext + "(\\p{Alnum}|[\\-`])*)").matcher(ssb.toString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T18:20:20.593

与其使用您似乎不太了解的 POSIX 字符类，不如将您想要允许的字符添加到`[]`字符类中

```
Matcher mather = Pattern.compile("[a-zA-Z0-9`-]*" + subtext + "[a-zA-Z0-9`-]*").matcher(ssb.toString()); 
```

必须在`-`字符类中转义，除非它位于字符类的开头或结尾。

# android - 无法构建签名的应用程序，只有未签名的作品，无法转换为 dalvik 格式

> ID：15188822
> 
> 赞同：0
> 
> 时间：2013-03-03T17:59:22.437
> 
> 标签：android, actionbarsherlock, viewpagerindicator

请在删除或投票之前阅读所有内容，谢谢:)

我有一个应用程序使用：

```
1-ActionBarSherlock
2-ViewPaerIndicator
3-PullToRefresh 
```

当我尝试构建它的签名版本时，失败并显示“无法转换为 dalvik 格式”

问题是我没有错误，也没有 lint 警告

任何人都可以帮助如何调试它或如何解决这个问题，

我在这里关注了很多答案，但没有任何帮助，

我知道的上述依赖项中唯一的共同点；是支持库，我确保它在 ViewPagerIndicator 和 ABS 中的版本相同，我试图将它从 2 个依赖项中的任何一个中删除，但构建失败，即使对于未签名的版本也是如此。

**更新：**

更新我找到了解决方案，我删除了**支持库。v13**并在所有情况下都用**V4**替换它并且它有效。

虽然我找到了一些说不要同时使用 v13 和 v4 的答案，但这不是我的情况，我只使用 v.13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:16:38.227

更新我找到了解决方案，我删除了支持库。V13 并在所有情况下都用 V4 替换它并且它工作。

# api - 我的应用程序专有的类别、列表或场地组

> ID：15188826
> 
> 赞同：0
> 
> 时间：2013-03-03T17:59:43.927
> 
> 标签：api, foursquare

我想开发一个网络应用程序并在其中使用foursquare API，我需要添加场所并按位置、喜欢、签到等过滤它们。有没有办法为应用程序，并直接向其中之一进行查询。？我正在考虑将 ID 场地保存在我的数据库中，但由于我想按喜欢、签到和其他人的数量进行过滤，这只会帮助我从场地中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:44:56.810

Foursquare 场地数据库供所有人使用，因此当您对其进行更改（添加场地等）时，整个 Foursquare 社区（应用程序用户、开发人员等）都会看到它们。类别由 Foursquare 自己策划，并且无法通过 API 添加它们。

您可以在此处采用两种方法，具体取决于您的应用程序的需求。您可以在每次需要时从 Foursquare 检索场地数据，然后在拥有这些场地后，执行您想要的过滤。由于您还提到了创建自己的类别，因此您还可以将场地 ID 与本地的自定义类别相关联。

# google-maps-api-3 - Google Maps Dom Listener 对事件没有反应

> ID：15188827
> 
> 赞同：0
> 
> 时间：2013-03-03T18:00:09.823
> 
> 标签：google-maps-api-3, event-listener

我有一个非常简单的谷歌地图设置。我想使用地图外的链接与地图进行交互，所以我正在使用`google.maps.event.addDomListener()`，但我的事件没有被检测到。任何人都可以帮忙吗？Jsfiddle在这里：http: [//jsfiddle.net/kqUwE/4/](http://jsfiddle.net/kqUwE/4/)

```
function initialize() {
var myLatlng = new google.maps.LatLng(51.507, -0.1275);
var myOptions = {
  zoom: 10,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

google.maps.event.addDomListener(document.getElementById("click_me", 'click', function () {
    alert(document.getElementById("click_me"));
}));

}

window.onload = function() {
    initialize();

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:36:48.670

解决它：错位的括号，应该是这样的：

```
google.maps.event.addDomListener(document.getElementById("click_me"), 'click', function () {
    alert(document.getElementById("click_me"));
}); 
```

# python - 使用 Python ElementTree 在 XML 中查找和编辑子元素

> ID：15188828
> 
> 赞同：3
> 
> 时间：2013-03-03T18:00:10.773
> 
> 标签：python, xml, xml-parsing, elementtree

因为我正在处理的 XML 文件具有不一致的子元素，所以我在查找和编辑特定子元素时遇到了一些困难，该子元素直到文件的下方才出现在一系列元素中。我正在使用 Python 2.7.1 中包含的 Python 的 ElementTree。

这是我正在处理的 XML 文件类型的示例：

```
<?xml vin="1.0" encoding="UTF-8" standalone="yes"?>

<whatever id='Subaru' YouCanDriveMyCar='Wednesday' transmission='stick'>
        <model id='Ford' year='1972'>A</model>
        <model id='Chevrolet' vin="1234567890" stereo='Alpine' airconditioning='notworking'>Volt</model>
        <model id='Dodge' vin="3456789012" airconditioning='working'>Durango</model>
        <model id='Mercedes' vin="4567890123" airconditioning='none'>S150</model>
        <model id='BMW'>M350</model>
        <model id='Volkswagen' vin="5678901234" stereo='Sony'>Beetle</model>
        <model id='Honda' vin="6789012345" airconditioning="blowsicecubes">Accord</model>
</whatever> 
```

在此示例中，我想找到模型 id='Volkswagen' 并将 stereo='Sony' 更改为 'Blaupunkt'。

如果我使用 ElementTree 搜索属性“立体声”，则会出错，因为“立体声”不包含在文件顶部的元素中。

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:04:31.447

使用简单的 XPath 表达式来查找正确的模型：

```
volkswagen = tree.find('.//model[@id="Volkswagen"]') 
```

然后简单地调整`stereo`属性：

```
volkswagen.set('stereo', 'Blaupunkt') 
```

您还可以搜索`model`具有`stereo`属性的元素：

```
models_with_stereos = tree.findall('.//model[@stereo]') 
```

然后进一步过滤这些元素。

如果您切换到使用[`lxml`](http://lxml.de/)（ElementTree API 的替代实现），您仍然可以使用更复杂的 XPath 表达式，包括仅匹配具有和属性的`model`元素。`id="Volkswagen"``stereo`

# c# - 如何使用 GUID 在 ASP.NET C# 中验证用户电子邮件

> ID：15188829
> 
> 赞同：1
> 
> 时间：2013-03-03T18:00:11.820
> 
> 标签：c#, asp.net, visual-studio-2010, guid, email-verification

我目前正在开展一个项目，人们可以在该项目中注册并登录到他们自己的内容页面。我使用了自定义注册方法（不是默认创建用户向导）。我能够将电子邮件发送到注册人的电子邮件。但是，我现在想添加一个指向该电子邮件的链接，人们必须单击它才能验证他们的个人资料。我听说您可以使用 GUID 和令牌来执行此操作，但我不知道如何继续执行此操作，因此我需要帮助。我将我的用户详细信息存储在

`> tblUsers with fields ID, Name, Password, Details, Photo as well as a **Verify**`我认为可以用作验证的字段？现在它是空的，没有被使用。

我使用 Microsoft Visual Studio 环境提供的默认登录控件创建了我的登录控件。

如果有人可以帮助我并指导我完成这件事，我将不胜感激，经过 2 天的不断研究和尝试，我被困在这一部分而无法进一步取得进展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:33:06.017

那么更好的选择是对 UserID 进行加密。因为这不仅可以节省数据库中额外列的添加，还可以轻松处理。现在的问题是你将如何做到这一点。

试试这个.. 做一个简单的加密逻辑（你可以谷歌这个和几行代码）

创建该超链接时，附加该加密的 UserId 。当用户单击时，将其发送到服务器，解密并使用用户 ID 进行验证。这将帮助您根据用户 ID 管理用户，我希望这在您的情况下是独一无二的。

Guid 只是另一种选择，为什么不使用您已经唯一的用户 ID :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:34:35.503

我认为您可以在用户注册时生成 guid 并存储在用户表中。您也可以在要添加到电子邮件的链接的查询中发送它。用户单击链接后，您可能会要求用户登录，并且您将验证查询中的 guid 是否与您存储在用户表中的相同。如果有，您可以将用户的状态更改为“已验证”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:37:49.540

您的问题需要很多步骤，但至少要让您开始。

1.  用户将注册
2.  您需要查询电子邮件地址不存在。
3.  如果它不存在，您需要将该信息存储到您的数据库中。
4.  使用您必须存储信息的逻辑，您需要执行以下操作：

    `Guid userGuid = Guid.NewGuid();`

    `string body = "To confirm 'http://www.somesite.com/verify/aspx?userGuid=" + userGuid + "Verify your account";`

    `string GuidToTest = Request["userGuid"];`

类似的东西应该适应，你必须创建一个结构和路径来处理你的域逻辑和数据访问的所有这些。

希望这会有所帮助。

# java - Quercus 未在嵌入式 Jetty 6 中运行

> ID：15188830
> 
> 赞同：0
> 
> 时间：2013-03-03T18:00:19.793
> 
> 标签：java, jetty, quercus

在过去的几个月里，我一直在尝试将 Jetty 和 Quercus 嵌入到我的应用程序中，但我还没有成功。我正在使用 Jetty 版本 6.1.26 和 Quercus 4.0.25。

我已将以下 jar 与我的应用程序打包在一起：jetty-6.1.26.jar、jetty-util-6.1.26.jar 和 servlet-api-2.5-20081211.jar，它们是我从 jetty/lib 目录复制的。

这是我在自己的线程上运行的代码：

```
public void run(){
    try{
        server = new Server(Plugin.port);

        WebAppContext wac = new WebAppContext();
        wac.setWar(Plugin.resourceBase);
        wac.setDescriptor(Plugin.resourceBase + "WEB-INF/web.xml");
        wac.setContextPath("/");
        wac.setParentLoaderPriority(true);
        server.setHandler(wac);

        server.setStopAtShutdown(true);

        server.start();

        Plugin.instance.getLogger().log(Level.INFO, "Started web server at port " + Plugin.port);
    }catch(Exception e){
        Plugin.instance.getLogger().log(Level.SEVERE, "Cannot start web server at port " + Plugin.port + "!");
        Plugin.instance.getLogger().log(Level.SEVERE, e.getMessage());
    }
} 
```

在资源基础目录中，我有一个 WEB-INF 文件夹，其中包含一个 web.xml 文件以及 Quercus 的 WEB-INF/lib 和 /licenses。lib 文件夹中的 jar 包是 cdi-16.jar、javaee-16.jar、javamail-141.jar 和resin.jar。

web.xml 在其 Web 应用程序标签下具有以下内容：

```
<servlet>
<servlet-name>Quercus Servlet</servlet-name>
<servlet-class>com.caucho.quercus.servlet.QuercusServlet</servlet-class>
<init-param>
  <param-name>license-directory</param-name>
  <param-value>WEB-INF/licenses</param-value>
</init-param>
</servlet>

<servlet-mapping>
<servlet-name>Quercus Servlet</servlet-name>
  <url-pattern>*.php</url-pattern>
</servlet-mapping>

<welcome-file-list>
  <welcome-file>index.php</welcome-file>
</welcome-file-list> 
```

当我启动程序时，我在控制台中收到此消息：

10:31:46 [严重] 2013-03-03 10:31:46.570:INFO:/:Unavailable javax.servlet.UnavailableException: Servlet 类 com.caucho.quercus.servlet.QuercusServlet 不是 javax.servlet.Servlet

然后我可以访问 Jetty 服务器上的 HTML 文件，但是当我尝试访问 PHP 文件时，我收到一条消息说

```
javax.servlet.UnavailableException: Servlet class com.caucho.quercus.servlet.QuercusServlet is not a javax.servlet.Servlet
at org.mortbay.jetty.servlet.ServletHolder.checkServletType(ServletHolder.java:362)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:243)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:736)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at me.jsn_man.WebServer.WebServer.run(WebServer.java:52) 
```

如果有人可以提供帮助，将不胜感激。

此外，如果您对我应该使用的 Jetty 和 Quercus 版本有什么建议，那也会很有帮助。我只使用 Jetty 6，因为这是拥有最多嵌入文档的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:14:22.637

尝试从 Quercus 战争中删除 javaee-16.jar。我将从未来的 Quercus 发行版中删除它。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:18:52.570

最近我也做了同样的事情。

*   码头 6.1.26
*   栎树从这里[http://caucho.com/download/quercus-4.0.25.war](http://caucho.com/download/quercus-4.0.25.war)

然后我将战争解压到当前工作目录中的文件夹*quercus中，无需任何修改。*

在嵌入式 Jetty 中设置如下：

```
 WebAppContext webapp = new WebAppContext();
    webapp.setContextPath("/");
    webapp.setWar("./quercus");

    server.setHandler(webapp); 
```

# android - Android只有在可用内存低于阈值时才开始杀死应用程序？

> ID：15188833
> 
> 赞同：1
> 
> 时间：2013-03-03T18:00:39.770
> 
> 标签：android

众所周知，当内存变低时，Android 可能会开始杀死一些后台应用程序以释放内存。例如 Nexus 7，这个低内存阈值为 64MB。

然而，我观察到，即使可用内存（例如 150MB）足以启动一个新应用程序（例如 30MB 的 AngryBirds），Android 仍然可能会杀死一些后台应用程序。这可能吗？

如果是这样，那么还会调用 Android“杀手”的其他“条件”是什么？

# xcode - Iplimage 或 Mat 上的 cvinvert 失败

> ID：15188837
> 
> 赞同：1
> 
> 时间：2013-03-03T18:01:03.480
> 
> 标签：xcode, opencv

我需要使用 CvInvert，但我有这个问题：

> OpenCV 错误：在 cvInvert、文件 /opt/local/var/macports/ 中断言失败 (src.type() == dst.type() && src.rows == dst.cols && src.cols == dst.rows) build/_opt_mports_dports_graphics_opencv/opencv/work/OpenCV-2.4.3/modules/core/src/lapack.cpp，第 1738 行 libc++abi.dylib：终止调用抛出异常

这是代码：

```
#include <iostream>
#include <opencv/cv.h>
#include <stdio.h>

#include <opencv2/highgui/highgui_c.h>
#include <opencv2/imgproc/imgproc_c.h>
#include <opencv2/core/core_c.h>
#include <opencv2/opencv.hpp>

using namespace cv;
using namespace std;

int main(int argc, const char * argv[])
{
    CvCapture* capture=cvCreateCameraCapture(0);
    IplImage* originalImg;
    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 640);
    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, 480);
    cvNamedWindow("Imagen");

    while (true) {
        originalImg=cvQueryFrame(capture);
        cvFlip(originalImg,originalImg,3);
        IplImage* Gray=cvCreateImage(cvGetSize(originalImg), IPL_DEPTH_8U, 1);
        cvCvtColor(originalImg, Gray, CV_RGB2GRAY);

        CvMat* Mat_tipo=cvCreateMat(originalImg->height, originalImg->width, CV_32F);
        CvMat* Mat_img=cvGetMat(Gray,Mat_tipo);

        CvMat* Matinvenrt=cvCreateMat(Mat_img->rows, Mat_img->cols, CV_32F);
        cvInvert(Mat_img, Matinvenrt,CV_LU);

        cvShowImage("Imagen", Mat_img);
//        imshow("imagen", img);
        cvReleaseMat(&Mat_img);

        int  id=cvWaitKey(27);
        if (id==27) break;       
    }

} 
```

发生了什么？？，Cvinvert 有错误吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:13:26.643

```
Assertion failed (src.type() == dst.type() 
```

从您的代码中可以清楚地看到，Mat 类型对于`Mat_img`和`Matinvert`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:02:28.313

Are you sure you are inverting a square matrix? I had a similar error and was because I was trying to invert a M-N matrix.

# facebook - 我可以使用 UIActivityViewController 在 Facebook 上分享吗？

> ID：15188840
> 
> 赞同：7
> 
> 时间：2013-03-03T18:01:16.943
> 
> 标签：facebook, ios6, uiactivityviewcontroller

我正在尝试使用 UIActivityViewController 在 facebook 上分享。当我使用

```
UIImage* image = [UIImage imageNamed:@"image1.png"];
NSArray* dataToShare = @[@"test",image];
UIActivityViewController* activityViewController =
[[UIActivityViewController alloc] initWithActivityItems:dataToShare
                                  applicationActivities:nil];
activityViewController.excludedActivityTypes = @[UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll]; 
```

尽管我没有排除“UIActivityTypePostToFacebook”，但我看不到“在 Facebook 上分享”图标。facebook 没有预定义的 UIActivity 吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T20:37:59.970

您必须登录您的 iphone 设置：设置 -> facebook

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:05:46.950

试试这个：如果你只想分享 facebook 图标：

```
-(IBAction)shareButtonPressed:(id)sender { NSLog(@"shareButton pressed");

NSString *texttoshare = _txt;
UIImage *imagetoshare = _img;
NSArray *activityItems = @[texttoshare, imagetoshare];    
UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint, UIActivityTypePostToTwitter, UIActivityTypePostToWeibo];
[self presentViewController:activityVC animated:TRUE completion:nil];
} 
```

//在排除的活动类型列表中插入您要排除的任何其他类型的活动类型

# ios - Segue 的动画效果不如预期

> ID：15188845
> 
> 赞同：0
> 
> 时间：2013-03-03T18:01:52.510
> 
> 标签：ios, xcode4.5

自从我将 Xcode 更新到 4.5 后，我在使用 segue 时遇到了很多问题。有时，我会添加一些 Xcode 未检测到的 segue，如果它们设置正确。但是现在，我遇到了两个 segue 的问题，它们被设置为模态，带有交叉溶解动画。但他们使用默认动画制作动画。我已经删除，再次添加，清除缓存，但他们仍然在做默认动画。令人沮丧...

非常感谢

# php - PHPUnit Eclipse 配置：未找到测试

> ID：15188848
> 
> 赞同：2
> 
> 时间：2013-03-03T18:02:09.860
> 
> 标签：php, eclipse, phpunit, xdebug

在尝试使用 PHPUnit 作为单元测试库来设置 Eclipse 时，我一直在尝试运行一个简单的测试用例。作为参考，我按照[本](http://blog.chrisrogers.me.uk/eclipse-phpunit-xdebug-makegood-and-ubuntu-php-unit-testing/)教程使用 PHPUnit/Xdebug/Makegood 设置 Eclipse，与给出的指南的唯一偏差是为 PHPUnit/Makegood 设置以下配置文件：

```
config.xml:
    <phpunit backupGlobals="true"
         backupStaticAttributes="false"
         cacheTokens="false"
         colors="false"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         forceCoversAnnotation="false"
         mapTestClassNameToCoveredClassName="false"
         printerClass="PHPUnit_TextUI_ResultPrinter"
         processIsolation="false"
         stopOnError="false"
         stopOnFailure="false"
         stopOnIncomplete="false"
         stopOnSkipped="false"
         testSuiteLoaderClass="PHPUnit_Runner_StandardTestSuiteLoader"
         strict="false"
         verbose="false">
    <testsuites>
        <testsuite name="My Test Suite">
            <directory suffix=".php">/path/to/application/tests/</directory>
        </testsuite>
     </testsuites>
</phpunit> 
```

现在，问题的根源在于我似乎无法使用 Makegood 从 Eclipse 运行 PHPUnit 测试。我编写的唯一测试（位于名称“test.php”下的“/path/to/application/tests/”文件夹中）如下所示（直接取自[PHPUnit 手册](http://www.phpunit.de/manual/3.8/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.test-dependencies)）：

```
<?php
class StackTest extends PHPUnit_Framework_TestCase
{
    public function testPushAndPop()
    {
        $stack = array();
        $this->assertEquals(0, count($stack));

        array_push($stack, 'foo');
        $this->assertEquals('foo', $stack[count($stack)-1]);
        $this->assertEquals(1, count($stack));

        $this->assertEquals('foo', array_pop($stack));
        $this->assertEquals(0, count($stack));
    }
}
?> 
```

为了运行测试，我右键单击“tests”文件夹并在 Eclipse 中点击“Run All Tests”，它会打印到控制台：

> 塞巴斯蒂安伯格曼的 PHPUnit 3.7.15。
> 
> 从 /path/to/application/config.xml 读取配置
> 
> 时间：0 秒，内存：5.00Mb
> 
> 未执行任何测试！

现在，当我尝试使用“path/to/application/tests/”目录中的命令“phpunit test.php”从命令行运行这些测试时，我得到以下控制台输出：

> 塞巴斯蒂安伯格曼的 PHPUnit 3.7.15。
> 
> .
> 
> 时间：0秒，内存：3.25Mb
> 
> 好的（1 个测试，5 个断言）

很明显，我没有正确地告诉 Makegood 在哪里可以找到测试文件/如何运行测试，但我似乎无法确定如何解决这个问题。毫无疑问，对于所有 PHPUnit 组件如何在 Eclipse 中组合在一起，我的心智模型很糟糕，因此任何有助于我理解架构的帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:58:38.513

“运行所有测试”无法按照您尝试使用的方式工作。“运行所有测试”运行您选择作为“测试文件夹”之一的测试（见下文）

![在此处输入图像描述](../Images/3fe66bf20154e33c53e802603aeb7297.png)

我实际上将我的测试文件夹更改为这个

![在此处输入图像描述](../Images/46390b45787a7e72885e1b8024ec355a.png)

它只在 RuleData 文件夹中运行测试。您可以单击任何您喜欢的地方，“运行所有测试”将以这种方式运行。如果您只想运行文件夹中的测试，只需选择“运行测试”

这也是我的 phpunit xml 配置，它位于测试目录中。

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit
         backupStaticAttributes="false"
         backupGlobals="false"
         bootstrap="./../application/third_party/CIUnit/bootstrap_phpunit.php"
         cacheTokens="false"
         colors="false"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         forceCoversAnnotation="false"
         mapTestClassNameToCoveredClassName="false"
         printerClass="PHPUnit_TextUI_ResultPrinter"

         processIsolation="false"
         stopOnError="false"
         stopOnFailure="false"
         stopOnIncomplete="false"
         stopOnSkipped="false"
         testSuiteLoaderClass="PHPUnit_Runner_StandardTestSuiteLoader"

         strict="false"
         verbose="true"

         >
    <php>
        <ini name="memory_limit" value="2047M" />
    </php>

    <testsuites>
        <testsuite name="AllTests">
            <directory>.</directory>
        </testsuite>
    </testsuites>

    <filter>
      <blacklist>
        <directory suffix=".php">./../../</directory>
        <file></file>
        <exclude>
          <file></file>
        </exclude>
      </blacklist>
      <whitelist processUncoveredFilesFromWhitelist="true">
          <directory suffix=".php">./../application/models</directory>
          <directory suffix=".php">./../application/controllers</directory>
          <directory suffix=".php">./../application/libraries</directory>
          <directory suffix=".php">./../application/helpers</directory>
        <file></file>
        <exclude>
          <directory suffix="index.php">./../application</directory>
          <file></file>
        </exclude>
      </whitelist>
    </filter>
</phpunit> 
```

# ruby-on-rails - 如何在rails中使用带有link_to的引导模式？

> ID：15188850
> 
> 赞同：16
> 
> 时间：2013-03-03T18:02:25.070
> 
> 标签：ruby-on-rails, twitter-bootstrap

我早些时候曾问过这个问题，但不幸的是我仍然被困住了。我有一个这样的link_to

```
<%= link_to "Click Here", page_path,, :id => 'login', "data-toggle" => "modal" %> 
```

在 page.html.erb （点击链接时我想以模式加载的页面），我有

```
<div class="modal" id="loginModal">
    Test Content
</div> 
```

在资产/page.js.coffee

```
$('#loginModal').modal(options) 
```

但是，链接没有以模式打开任何帮助？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T18:04:19.920

添加`data-target`

```
<%= link_to "Click Here", page_path, :id => 'login', "data-toggle" => "modal", 'data-target' => '#loginModal' %> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-21T20:23:59.223

`data`在 Rails 中添加属性有一种更漂亮的方法。你可以做这样的事情来获得相同的结果。

```
<%= link_to 'Click Here', "#", data: {toggle: "modal", target: "#modal"} %> 
```

# c# - 重定位 ASP.NET MVC4 视图目录

> ID：15188851
> 
> 赞同：1
> 
> 时间：2013-03-03T18:02:32.617
> 
> 标签：c#, asp.net, asp.net-mvc-4

在我的项目中，我想将 Models/Views/Controllers 文件夹重新组合到一个`MVC/`文件夹中，以清理项目的根目录。

我学习了如何更改引擎中的查找路径以使其在运行时工作，但是当我右键单击控制器的方法 > 添加视图时，它会继续在`Views/<ControllerName>/`.

所以我想知道是否有替代方法，`Areas`因为我只需要：

```
MVC/
    Controllers/
    Models/
    Views/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:43:32.057

你应该在 mvc.net 中修改脚手架你可以看到[这个](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)帖子或者在 google 中简单搜索

# ios - 将粘贴文本复制到 iOS 模拟器中

> ID：15188852
> 
> 赞同：131
> 
> 时间：2013-03-03T18:02:43.517
> 
> 标签：ios, clipboard

这必须记录在某处，但我找不到。

在我使用 iPad 模拟器的应用程序中，有一个文本字段，我希望用户在其中粘贴文本。在现实世界中，用户会将 Safari 地址中的文本复制到文本字段中。但我试图在 ios ipad 模拟器中做到这一点，但只有部分结果。

重新运行应用程序后，我可以立即使用 Mac 的`Edit|Paste Text`菜单或使用 Shift-Command-V 将文本粘贴到文本字段中（但不能只使用`Edit|Paste`，但没关系）。对 Shift 的需求很烦人，但我可以忍受。

但是，如果我尝试在 Mac 上复制另一个 URL，然后再复制一次，`Edit|Paste Text`甚至`Paste`在模拟器上使用气泡，我得到的不是新文本，而是原始文本。

这很常见吗？这是模拟器的一个功能，它没有实时连接到主机上的剪贴板吗？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2018-09-20T14:23:20.943

我发现即使勾选了“*编辑”>“自动同步粘贴板*”，该功能也不起作用。

但是，只需取消勾选然后重新勾选此选项即可修复该功能！

希望它适用于某人。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2013-03-03T22:34:37.693

小心避免将 mac 的剪贴板与模拟器的剪贴板混为一谈。它们是不相同的。

模拟器正在模拟一个 iOS 设备，它有自己的 iOS 剪贴板，在该设备（模拟器）上运行的应用程序通过 iOS 小狗全选/复制/粘贴 UI 项使用。

与此完全不同：您的 Mac 拥有自己的剪贴板和内容。Mac 上运行的 Simulator 程序提供了 Edit > Paste Text 菜单项。*该程序通过访问您的mac*剪贴板来实现该菜单项，**并将文本输入到模拟器**中，就像用户使用键盘一样。iOS 剪贴板既不受模拟器应用程序的编辑菜单功能的访问也不受其影响。

**更新：**从 Xcode 6 开始，您需要`Edit > Paste`在 iOS 模拟器中选择菜单项（这会在 Mac 剪贴板和 iOS 剪贴板之间传输数据），然后点击模拟器中的字段并点击“粘贴”气泡。

在您的问题中，您没有指定要从哪个“Safari”复制 URL。它可以是*mac* safari 应用程序或*模拟器的*safari 应用程序。从 mac safari 程序复制到 mac 剪贴板，从 safari 应用程序复制到模拟器内的 iOS 剪贴板。

我认为您的问题来自混淆两者，认为所有内容都在一个剪贴板中共享。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-08-14T17:49:34.790

在mac上复制文本，然后在模拟器中点击文本字段并按

换档命令 V

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-05-27T07:45:02.070

请单击模拟器编辑选项中的“自动同步粘贴板”选项。

[![在此处输入图像描述](../Images/579a09aa7ab7dd21c251f0cbd2acfcee.png)](https://i.stack.imgur.com/aG8XB.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-11-09T05:43:25.383

**Xcode 10.0+**：

关闭自动粘贴板同步然后重新打开解决了该问题。

**您可能必须多次这样做。**有时由于某种原因需要一段时间才能触发它。

（编辑 -> 自动粘贴板同步）

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-07-29T14:16:03.123

对我有用的是这个。

1) 从 Mac 复制文本

2）在模拟器中进行编辑->粘贴或命令V（我认为这会将文本从mac剪贴板复制到iOS模拟器剪贴板）。

3）在模拟器中突出显示文本字段，然后执行命令+ Shift + V。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-08-08T15:31:12.940

类似的事情发生在我身上，我发现了一个奇怪的解决方法，它可能会帮助其他可能遇到同样问题的人。尝试以下步骤：

1.  禁用然后重新启用该`Automatically Sync Pasteboard`选项，它`Edit`位于模拟器的菜单下
2.  从 Mac 复制所需的文本
3.  将文本再次粘贴到 Mac 上的 Atom 等文本编辑器甚至浏览器地址栏上
4.  选择所有文本`Cmd+A`，然后剪切/复制`Cmd+X`/`Cmd+C`
5.  您现在应该可以将文本粘贴到模拟器上

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-11-07T08:16:56.333

我更新到 os x 10.13.6 和 xcode 10.1 并且在`edit`

![](../Images/1c92bb8d74d40561a1e7c25822b2a8dd.png)

单击`get pasteboard`然后您将能够通过模拟器中的粘贴工具提示进行粘贴

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-11-01T09:52:08.097

在新的模拟器中，我没有“粘贴”选项，并且同步不适用于模拟器。看来，在模拟器中，您必须在同步实际工作之前将某些内容复制到内部剪贴板。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-05-17T06:49:56.343

这些解决方案都不适合我。我正在使用模拟器 11.4。在尝试了每一个之后，我意识到我需要做的就是使用 Command + C 在我的 Mac 上复制一些内容，然后在模拟器文本字段中，只需按住鼠标单击一两秒钟，然后粘贴菜单自动弹出，效果很好。

[![在此处输入图像描述](../Images/d3b269f7e541fc85af8f939a17cdd104.png)](https://i.stack.imgur.com/SmQJp.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-24T15:58:41.670

有时在 iOS 模拟器中输入长 URL 非常困难。应该有一些方法可以将 URL 从 Max OS 复制到 iOS 文本字段。以下是您的操作方法：

*   从 Mac 复制一些文本
*   打开模拟器并单击要粘贴文本的文本字段
*   现在在模拟器菜单中单击`Edit`->`Paste Text`

就是这样。您来自 Mac OS 复制缓冲区的文本现在应该出现在 iOS 模拟器的文本字段中。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-27T07:57:14.870

三个步骤：（关键是确保**“粘贴”帮助菜单在您使用“⌘ + V”时保持可见**。）

1.  确保在模拟器中选择了要过去的点，并且带有**“粘贴”的 editMenu 是 show**。
2.  在 mac 上使用键盘，“ **⌘ + V** ”，将文本粘贴到模拟器剪贴板中。
3.  **单击上面显示的editMenu上**的“粘贴” ，将文本粘贴到模拟器文本字段中。****

 **[![在此处输入图像描述](../Images/af3201ec6e6e30a408b2d2bf187862c6.png)](https://i.stack.imgur.com/DMuxp.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-07-20T11:33:49.293

上述解决方案对我没有任何帮助。我正在使用`M1 Apple`. 有效的是这个线程[https://github.com/flutter/flutter/issues/74970](https://github.com/flutter/flutter/issues/74970)

简而言之，如果您是使用`iOS 14.0`构建应用程序，您将遇到上述问题。

为了解决它，我所做的是通过转到 Preferences -> Components -> iOS 13.7 -> 在 xCode中**安装，然后在 xCode 中重建应用程序。`iOS 13.7`**

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-09T08:33:40.307

只需禁用然后`Automatically Sync Pasteboard`从`Edit`菜单中重新启用该选项，即可解决我的问题。

[![自动同步粘贴板](../Images/3c308e75b8bc30ed19cf86c00d28d1c0.png)](https://i.stack.imgur.com/6zJCF.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-12T11:22:43.443

在 M1 Macs 和 14 以上的模拟器上尝试了很多但没有任何效果后，我采取了不同的方法来解决问题。

**用于在模拟器中键入文本的 Apple 脚本。**

```
tell application "System Events"
set texttosay to "Sample Text"
display dialog "Text to type:" default answer "white: "
set texttosay to the text returned of the result
repeat
    delay 2
    repeat 1 times
        keystroke texttosay
        delay 1
        keystroke return
    end repeat
    exit repeat
end repeat
end tell 
```

脚步：

1.  在苹果脚本中运行上述脚本并将文本粘贴到您要在模拟器中输入的对话框中。
2.  单击输入框以填充值。

希望对您的问题有所帮助。

谢谢

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-21T12:10:18.750

有时您只需要在模拟器菜单中选择硬件 -> 重置内容和设置。然后一切都会自动运行，就像在 MacOS 中与其他应用程序一起工作一样简单透明

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-02-27T18:07:42.457

这对我有用。在 Safari 版本 8.0.3 和 IOs 模拟器版本 8.1 上

1.  从 Safari 复制文本 - 突出显示文本然后 cmd-v 或编辑>复制。
2.  在 Ios Simulator 中单击编辑>粘贴。
3.  在 TextField 或 TextView 上单击鼠标右键，然后选择粘贴。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-11-04T15:44:45.720

这就是我发现的。

1.  从 mac 复制文本。
2.  在模拟器中打开 safari 并通过单击突出显示地址栏。
3.  按 Cmd + V
4.  在地址栏上单击一次。
5.  将出现粘贴下拉菜单。
6.  点击粘贴。

Shift + Cmd + V 也很好用。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-03-16T07:54:47.887

⌘ + V ：iOS模拟器在前面时，将OS X剪贴板的内容复制到iOS，但不粘贴。同样，这适用于文本和图像。
因此，您需要执行以下操作：
1.将文本复制到 macOS 中除 iOS 模拟器之外的任何位置。
2.在iOS模拟器中，点击⌘+V，将文本从macOS剪贴板复制到iOS模拟器的剪贴板。
3.在iOS模拟器，TextField或TextView点击->编辑->粘贴。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-07-20T11:19:58.393

这里没有一个解决方案对我有用。我正在使用*M1 Mac*，这个线程中的解决方案对我有用：[https ://github.com/flutter/flutter/issues/74970](https://github.com/flutter/flutter/issues/74970)

简而言之，如果您使用`iOS 14.0`构建应用程序，您将遇到这些问题。

为了解决这个问题，我`iOS 13.7`在 Xcode 中安装了

> 首选项 -> 组件 -> iOS 13.7

然后在 Xcode 中重建应用程序。

希望它对您有所帮助，并且您不会浪费 45 分钟的搜索时间。**

# jsf-2 - Primefaces 数据表中的动态列

> ID：15188853
> 
> 赞同：0
> 
> 时间：2013-03-03T18:02:47.727
> 
> 标签：jsf-2, primefaces

我想使用反映用户选择的 Primefaces 创建一个动态数据表。用户可以选择两个单选按钮之一，然后数据表将显示给用户。

两个单选按钮之间的唯一区别是选择第二个，数据表将包含一个附加列。

是否可以使用 Primefaces 和 JSF 创建这样的数据表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:22:46.873

最简单的解决方案是根据选择的单选按钮设置列的渲染属性。

```
...
<h:column rendered="#{myBean.radioValue}">
... 
```

单选按钮 1 ->`myBean.radioValue=false`
单选按钮 2 ->`myBean.radioValue=true`

# c++ - 来自 C++ 源代码的统计信息

> ID：15188856
> 
> 赞同：4
> 
> 时间：2013-03-03T18:02:57.723
> 
> 标签：c++, statistics, development-environment, code-analysis

您是否知道任何类型的工具，可能用于 Linux 和开源，可用于从 C/C++ 源代码文件中提取统计信息。

除了行数之外，我还会对以下内容感兴趣：

*   注释行数
*   使用的类数
*   声明数

等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T18:05:04.257

我使用[CLOC](http://cloc.sourceforge.net/) ( [http://cloc.sourceforge.net/](http://cloc.sourceforge.net/) ) 来计算代码行数、空白行和注释。但是 CLOC 不解释代码，因此不能计算类、声明等。

也许应该提到，大多数人认为这种统计数据毫无意义......

# .net - 将托管 C++ 添加到 C# GUI

> ID：15188858
> 
> 赞同：2
> 
> 时间：2013-03-03T18:03:11.433
> 
> 标签：.net, visual-c++, visual-studio-2012, c++-cli, managed

新的 Visual Studio 2012 已将 Windows 窗体应用程序 (WFA) 作为模板删除。MS 指出，这样做的原因是 VC++ 不是制作 GUI 的最佳方式。因此，为了获得最大的性能和可移植性，我想使用 C++ 进行数字运算，使用 C# 进行 GUI。

由于我是从零开始，我认为没有理由不使用 C++/CLI 进行 C++ 开发——因此所有 C++ 都将在托管 C++ 中。我知道我可以使用 C++ DLL，但我不愿意。

我可以将 C++/CLI 项目添加到还包含 C# WFA 项目的解决方案中。我可以运行 C++/CLI 项目以使所有 C++ 正常工作。但我对让 C# 项目访问 C++/CLI 类的最佳方式感到困惑。当我向 C# 项目“添加引用”时，它允许我添加 C++/CLI 项目作为引用。但是如何将 C++ 中定义的类添加到 C# 代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:20:25.163

我相信您需要专门制作一个托管班；IE

```
ref class Foo
{
    String ^managedString; 
}; 
```

并且公共变量也必须是托管类型；

[看](http://en.wikipedia.org/wiki/C++/CLI)

如果您将 c++/cli 类库作为引用添加到您的 c# 项目中，您将能够在命名空间中看到该类并像使用任何其他类一样使用它们。

# menu - 挂钩活动轨迹路径视图 Drupal7

> ID：15188862
> 
> 赞同：1
> 
> 时间：2013-03-03T18:03:26.280
> 
> 标签：menu, drupal-7, hook

我正在尝试制作一个自定义模块来设置菜单的活动路径路径。

我创建了一个视图页面。活动线索必须是节点或分类术语。当我打开视图创建的页面时，活动轨迹未激活。

我在下面写了脚本，但它不起作用，有人可以帮忙吗？？？

```
function mymodule_views_default_views(&$view, &$display_id, &$args){
  if( $view->name = 'productdetail';)
    {menu_tree_set_path('menu-categorie', 'node/39');
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T20:31:21.187

脚本是错误的词，我使用了视图并添加了上面提到的字段。很抱歉对于这个误会。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T21:33:00.567

我很高兴，我找到了自己问题的答案。我喜欢分享这个答案，并希望这虽然可以帮助其他人......

答案在这里：在视图中，我添加了一个带有 term-id / node ID 的字段，虽然它用于我的菜单并隐藏输出并重写输出我将以下代码粘贴到文本字段中以进行重写。field_categorie-tid 是菜单 menu_tree_set_path('menu-categorie', 'taxonomy/term/[field_categorie-tid]'); 中的参考术语。尽管使用 node/[nid] 代替分类术语，但您可以

我在头部添加了一个带有 php 和 token 的全局字段并放置了这个脚本：

就这样。模板中没有钩子或自定义脚本

我希望这对其他人有帮助。

# java - 将侦听器添加到 DefaultTableModel

> ID：15188865
> 
> 赞同：1
> 
> 时间：2013-03-03T18:03:27.973
> 
> 标签：java, swing, swingworker, defaulttablemodel, listselectionlistener

我使用 SwingWorker 根据数据库中的更改来更改 DefaultTableModel。我的问题是：在 doInBackground() 中将 ListSelectionListener 和 TableModelListener 添加到 DefaultTableModel 是否安全，或者是否必须在 done() 中添加它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:05:54.070

任何以任何方式修改任何 GUI 组件的操作*都应*在 EDT 上执行。您应该在`done`.

# stack - 布局。尾随页脚

> ID：15188868
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:03:59.383
> 
> 标签：stack, footer

需要在浏览器底部附加页脚。当您滚动页面时，页脚不会移动。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:52:00.827

```
#footer{
    position: absolute;
    height: 60px; //or other fixed
    bottom: 0;
    left: 0;
    right: 0;
} 
```

这种样式应该包含您所有的页脚内容。无论您向下滚动多少，这都会使其粘在页面底部。

要制作相同的东西或放在一边，您还应该使用absolute。

# sql-server - 如何将新的更新触发器应用于所有行

> ID：15188872
> 
> 赞同：0
> 
> 时间：2013-03-03T18:04:16.747
> 
> 标签：sql-server

我创建了一个简单的触发器：

```
ALTER TRIGGER [dbo].[idlist_update] ON [dbo].[Store] 
    FOR INSERT, UPDATE 
AS 
BEGIN
    DECLARE @brand varchar(50);
    DECLARE @model varchar(50);
    DECLARE @category varchar(100);
    DECLARE @part varchar(100);

    DECLARE @count int;

    SELECT @count = COUNT(*) FROM inserted;

    SELECT @brand=Brand, @model=Model, @category=AClass, @part=Descript FROM inserted;
    EXECUTE GenerateId_Part @brand, @model, @category, @part;
END 
```

使用由我们的用户修改的行（他们使用特殊应用程序），它可以正常工作，但我需要将它应用于表中的所有行（超过 200.000+）。我试过了：

```
UPDATE Store SET lastupd={fn NOW()}; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:10:11.053

我相信你想要的语法是：

```
UPDATE dbo.Store SET lastupd = CURRENT_TIMESTAMP; 
```

但是，如果每次插入或更新单行时都更新整个表，这对我来说似乎很浪费。为什么不将这个事实存储一次，在其他地方，而不是冗余存储 200,000 次？它似乎是商店本身的财产，而不是其中的产品。

另请注意，您的触发器无法正确处理多行操作。您不能执行此“从变量分配`inserted`”技巧，因为如果单个语句插入两行，则只会影响任意一行。*与某些平台不同，在 SQL Server 中，触发器按语句*触发，而不是*按行*触发。如果您显示存储过程的作用，我们可以帮助解决此`GenerateId_Part`问题。

# javascript - 带对话框的默认输入文本

> ID：15188874
> 
> 赞同：1
> 
> 时间：2013-03-03T18:04:23.543
> 
> 标签：javascript, jquery

我实现了一个小 jQuery 来在输入元素中显示默认消息。然后我将输入元素放在一个 jQueryUI 对话框中。它工作正常，除非您在输入中输入一些文本，然后关闭对话框，然后打开对话框，这会错误地在输入元素中显示最近输入的文本。如何修改它以便每次打开对话框时都会重新出现原始文本？请参阅[http://jsfiddle.net/Mxf7s/](http://jsfiddle.net/Mxf7s/)以获取实时示例和以下脚本。谢谢

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Dialog</title>
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

        <script>
            $(function() {
                $("#openDialog").click(function(){$("#myDialog").dialog('open');return false;});
                $( "#myDialog" ).dialog({
                    modal: true,
                    autoOpen    : false,
                    open        : function() {
                        $('#myInput').blur(); //Required if this input is the first one on the dialog since it will automatically be focused on
                        //$('#myInput').val('New Default value1').blur();
                    },
                    close        : function() {
                        //$('#myInput').val('New Default value2');
                    },
                    buttons: {Ok: function() {$( this ).dialog( "close" );}}
                });
                $('.default-value').each(function() {
                    var $t=$(this), default_value = this.value;
                    $t.css('color', '#929292');
                    $t.focus(function() {
                        if(this.value == default_value) {
                            this.value = '';
                            $t.css('color', 'black');
                        }
                    });
                    $t.blur(function() {
                        if($.trim(this.value) == '') {
                            $t.css('color', '#929292');
                            this.value = default_value;
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <button id="openDialog">Click</button>
        <div id="myDialog" title="My Dialog">
            <input type="text" value="Original Default value" class="default-value" name="myInput" id="myInput" />
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:08:32.753

您只需在触发输入的处理程序之前清空该值`blur`：

```
open: function () {
    $('#myInput').val('').blur();
} 
```

[**小提琴**](http://jsfiddle.net/Mxf7s/1/)

否则，呼叫`.blur()`并没有真正的帮助，因为`$.trim(this.value) == ''`这将是错误的。

为了使您的代码可重用于具有多个输入的多个对话框，您可以使用类+上下文选择器而不是 ID 选择器：

```
$('.default-value', this).val('').blur(); 
```

[**更新的小提琴**](http://jsfiddle.net/Mxf7s/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:23:40.370

您已经通过测试回答了您的问题，并且每次重置消息时我都没有看到任何问题：

```
close : function() {
                        $('#myInput').val('New Default value');
                        }, 
```

# oracle - 在另一个模式上创建表

> ID：15188878
> 
> 赞同：5
> 
> 时间：2013-03-03T18:04:33.707
> 
> 标签：oracle, oracle11g

情况是 user1 给 user2 权限：

```
GRANT CREATE ANY TABLE, SELECT ANY TABLE TO user2; 
```

登录user2后，我正在尝试创建表：

```
CREATE TABLE user1.test(id NUMBER PRIMARY KEY); 
```

结果是`ORA-01031 - insufficient privileges` 我可以在自己的架构上创建表并从其他架构中选择表。我认为这`CREATE ANY TABLE`可以解决问题，但它看起来是另一种方式。啊，两个用户都有无限的表空间。我还应该保证什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T18:28:01.583

也许您还需要授予`CREATE ANY INDEX`？添加主键时，您正在创建索引。您可以通过省略 PK 约束来快速测试这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:51:42.240

“创建任何表”的权限太强大了，不能授予非 DBA 的权限。更好的方法是在目标模式中创建一个“创建表”过程，该过程接受所需 DDL 的净化组件，并将执行权限授予所需用户。

一个合适的界面应该是......

```
create procedure
  create_table(
    table_name varchar2,
    columns    varchar2,
    etc        varchar2) 
```

……这样你就可以……

```
begin
  user1.create_table(
    table_name => 'TEST',
    columns    => 'id NUMBER PRIMARY KEY',
    etc        => '');
end; 
```

...并让程序为您构建并执行 DDL。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-09-04T13:20:59.087

user GRANT CREATE ANY INDEX TO SCHEMA_NAME

# jquery - 如何不在 html 内容中预加载图像

> ID：15188883
> 
> 赞同：0
> 
> 时间：2013-03-03T18:04:49.593
> 
> 标签：jquery, html, css

通过使用[jQuery ui 选项](http://jqueryui.com/tabs/#default)卡，我有 3 个选项卡，一开始只能查看一个选项卡。这就是为什么我认为大多数访问者不会打扰并打开其他两个标签。所以我的问题是，如何防止浏览器仅加载图像？并且仅在单击其特定选项卡时才加载它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:06:53.430

jQuery UI 允许你为你的标签使用 URL，它们的内容只会在点击时被加载。查看[文档](http://jqueryui.com/tabs/#ajax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:32:01.927

你有两个选择来实现你的目标。

1.  在您的选项卡中设置 url 并将内容放到其他页面。然后，当用户单击选项卡时，jQuery UI 将通过 ajax 加载内容。请参阅[jQuery UI ajax 文档](http://jqueryui.com/tabs/#ajax)。
2.  您可以使用一些技巧来加载图像。诀窍是在面板处于活动状态时设置图像 src。一开始，将src作为presrc属性，当标签页激活时，复制presrc并将其设置为src。

jsFiddle 上的代码示例：http: [//jsfiddle.net/4WYCC/1/](http://jsfiddle.net/4WYCC/1/)

HTML

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Tab 1</a></li>
        <li><a href="#tabs-2">Tab 2</a></li>
    </ul>
    <div id="tabs-1">
        <p>Test tab</p>
    </div>
    <div id="tabs-2">
        <img presrc="https://www.google.com.hk/logos/2013/miriam_makebas_81st_birthday-1417005-hp.jpg" />
    </div>
</div> 
```

JavaScript

```
$(function() {
  $( "#tabs" ).tabs({
      beforeActivate: function( event, ui ) {
          $("img",ui.newPanel).each(function(){
              if(!this.src)
              {
                  this.src = $(this).attr("presrc");
              }
          });
      }
  });
}); 
```

虽然第二选择的诀窍是工作，但我会建议使用第一选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:40:43.923

这个答案提供了@user1737909 解决方案的替代方案。正如所提到的，只有在按下选项卡时才能创建和检索包含选项卡内容的新 HTML 页面。创建新页面的替代方法如下：

与 tab2 关联的 HTML：

```
 <div id="tabs-2">
     <img id="img2" src="" alt="image description" />
  </div> 
```

jQuery：

```
$('#tabs').bind('tabsselect', function (event, ui) {
  switch (ui.index) { //index=1 is tab-2
    case 1:
       $("#img2").attr("src","link2image2");
    case 2:
       $("#img3").attr("src","link2image3");
  ...
  }

}); 
```

高温高压

# java - 如何在 Java 中打印出我的 Hashmap

> ID：15188884
> 
> 赞同：0
> 
> 时间：2013-03-03T18:04:56.783
> 
> 标签：java, map, hashmap

好的，所以我有一个 Stock 类的哈希图，它基本上包含用户可以输入的来自 yahoo 的不同股票的数据。每次他们输入新股票时，我都会将该 Stock 类添加到 hashmap 中，但我不知道如何打印出整个 hashmap 并显示到目前为止输入的所有内容

```
public class AS4stocks {
    static Map<String, Stock> mappin = new HashMap<String, Stock>();

    public static void main(String[] args) throws IOException {

        int menuchoice;

        do {
            Scanner in1 = new Scanner(System.in);
            System.out
                    .println("What would you like to do \n1) Print table\n2) Add a stock\n3) Do something else");
            menuchoice = in1.nextInt();
            switch (menuchoice) {

            case 1:
                System.out.println(mappin);
                break;

            case 2:
                System.out.print("Enter the stock's ticker symbol\n");
                String ticker = in1.next();
                addstock(ticker);
                break;

            case 3:
                break;

            }
        } while (menuchoice != 0);

    }

    private static void Printtable(Map<String, Stock> mappin) {
            fo  

        }

    private static void addstock(String ticker) throws IOException {
        URL url = new URL("http://download.finance.yahoo.com/d/quotes.csv?s="
                + ticker + "&f=snd1ohgpvwm3m4&e=.csv");
        URLConnection con = url.openConnection();
        InputStream is = con.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(is));

        String line = null;

        Object[] otable = new String[11];

        int counter = 0;

        while ((line = br.readLine()) != null) {
            String str = line;
            StringTokenizer st = new StringTokenizer(str, ",\"");
            while (st.hasMoreTokens()) {
                String adder = st.nextToken();
                otable[counter] = adder;
                if (counter == 0) {
                    System.out.println("-------------------" + adder
                            + "-------------------");
                    System.out.print("Ticker: ");
                }
                if (counter == 2) {
                    System.out.print("Company: ");
                }
                if (counter == 3) {
                    System.out.print("Open: ");
                }
                if (counter == 4) {
                    System.out.print("High: ");
                }
                if (counter == 5) {
                    System.out.print("Low: ");
                }
                if (counter == 6) {
                    System.out.print("Close: ");
                }
                if (counter == 7) {
                    System.out.print("Volume: ");
                }
                if (counter == 8) {
                    System.out.print("52 Week Range: ");
                }
                if (counter == 9) {
                    System.out.print("50 Day Average: ");
                }
                if (counter == 10) {
                    System.out.print("200 Day Average: ");
                }
                System.out.println(adder);
                counter++;
            }

            Stock snew = new Stock(otable);
            mappin.put(ticker, snew);

        }
        System.out.println();
    }

    static class Stock {
        String compname;
        String ticker;
        String date;
        String open;
        String high;
        String low;
        String close;
        String volume;
        String range;
        String average50;
        String average200;

        public Stock(Object otable[]) {
            compname = (String) otable[0];
            ticker = (String) otable[1];
            date = (String) otable[2];
            open = (String) otable[0];
            high = (String) otable[1];
            low = (String) otable[2];
            close = (String) otable[3];
            volume = (String) otable[4];
            range = (String) otable[5];
            average50 = (String) otable[6];
            average200 = (String) otable[7];

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:10:02.610

您需要遍历地图并为每个条目打印您想要的内容。遍历这些值的最简单方法是：

```
for (Stock stock : mappin.values()) {
    System.out.println(stock.toString());
} 
```

这当然假设您的 Stock 类对 toString() 具有有意义的输出

# c# - 我想回复我的回帖网址

> ID：15188887
> 
> 赞同：0
> 
> 时间：2013-03-03T18:05:11.413
> 
> 标签：c#, asp.net, postback, postbackurl

我有一个 GPT 网站。当用户在我的优惠墙上完成优惠时，该网站会向我的网站发送回发请求，以便我可以向我的用户提供信用。信用后，我必须用“1”回复他们。我在我的活动中写了 Response.write("1") 。一切都很好，剧本也很好。积分也很重要。但他们没有得到我的回复并再次向我发送请求。请帮助我如何使用 ASP.Net 向该回发 URL 发送回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:07:58.377

您可以使用`HttpClient`、`WebClient`或`HttpWebRequest`类来发送 HTTP 请求，按照方便的降序排列。

# image - 如何在浏览器窗口调整大小时动态调整图像大小，包括水平和垂直

> ID：15188889
> 
> 赞同：0
> 
> 时间：2013-03-03T18:05:21.563
> 
> 标签：image, resize

我可以垂直或水平调整大小，但不是两者都可以

[http://www.cloimages.com/](http://www.clorimages.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:54:05.640

只需将百分比提供给图像，例如

```
<img style="width:95%;height:85%" src="image_source" /> 
```

检查以下[小提琴](http://jsfiddle.net/L86F5/)

# c++ - 为什么没有指针/引用就不能工作多态？

> ID：15188894
> 
> 赞同：74
> 
> 时间：2013-03-03T18:06:18.853
> 
> 标签：c++, pointers, polymorphism, virtual

我确实在 SO 上发现了一些标题相似的问题——但是当我阅读答案时，他们关注的是问题的不同部分，这些部分非常具体（例如 STL/容器）。

有人可以告诉我为什么必须使用指针/引用来实现多态性吗？我可以理解指针可能会有所帮助-但肯定引用仅区分按值传递和按引用传递？

当然，只要您在堆上分配内存-以便您可以进行动态绑定，那么这就足够了-显然不是。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-03T18:10:04.450

“当然，只要您在堆上分配内存” - 分配内存的位置与它无关。这都是关于语义的。举个例子：

```
Derived d;
Base* b = &d; 
```

`d`在堆栈上（自动内存），但多态性仍然适用于`b`.

如果您没有基类指针或对派生类的引用，则多态性不起作用，因为您不再拥有派生类。拿

```
Base c = Derived(); 
```

由于**切片**，`c`对象不是 a `Derived`，而是 a 。所以，从技术上讲，多态性仍然有效，只是你不再有对象可谈。`Base`**`Derived`**

 **现在拿

```
Base* c = new Derived(); 
```

`c`只是指向内存中的某个地方，你并不关心它实际上是 a`Base`还是 a `Derived`，但是对方法的调用`virtual`将被动态解析。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-03-03T20:34:59.680

在 C++ 中，对象始终具有在编译时已知的固定类型和大小，并且（如果可以并且确实获取了其地址）在其生命周期内始终存在于固定地址。这些是从 C 继承的特性，有助于使这两种语言都适用于低级系统编程。（不过，所有这些都受制于 as-if, 规则：只要可以证明它对保证的符合标准的程序的任何行为没有可检测到的影响，符合标准的编译器就可以自由地对代码做任何事情。按标准。）

C++ 中的`virtual`函数被定义为（或多或少地，不需要极端的语言律师）基于对象的运行时类型执行；`virtual`当直接在对象上调用时，这将始终是对象的编译时类型，因此以这种方式调用函数时没有多态性。

请注意，这不一定是这种情况：具有`virtual`函数的对象类型通常在 C++ 中实现，每个对象都有一个指向函数表的指针，该`virtual`函数表对每种类型都是唯一的。如果有这种倾向，C++ 的一些假设变体的编译器可以实现对对象`Base b; b = Derived()`的赋值（例如`virtual``Base``Derived`大小相同。在两者大小不同的情况下，编译器甚至可以插入将程序暂停任意时间的代码，以便重新排列程序中的内存并以可能的方式更新对该内存的所有可能引用证明对程序的语义没有可检测到的影响，如果找不到这样的重新排列，则终止程序：但是，这将非常低效，并且不能保证永远停止，显然不是赋值运算符想要的特性有。

因此，代替上述内容，C++ 中的多态性是通过允许对对象的引用和指针来引用和指向其声明的编译时类型及其任何子类型的对象来实现的。当`virtual`通过引用或指针调用函数时，编译器无法证明所引用或指向的对象是具有该`virtual`函数的特定已知实现的运行时类型，编译器插入查找正确的代码`virtual`调用运行时的函数。它也不必是这样：引用和指针可以被定义为非多态的（不允许它们引用或指向其声明类型的子类型）并迫使程序员想出实现多态的替代方法. 后者显然是可能的，因为它一直都是用 C 语言完成的，但在那时完全没有理由拥有一门新语言。

总之，C++ 的语义被设计为允许面向对象多态性的高级抽象和封装，同时仍然保留使其适用于低水平发展。您可以轻松设计一种具有其他语义的语言，但它不会是 C++，并且会有不同的优点和缺点。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-21T15:19:03.453

我发现理解这样分配时调用了复制构造函数真的很有帮助：

```
class Base { };    
class Derived : public Base { };

Derived x; /* Derived type object created */ 
Base y = x; /* Copy is made (using Base's copy constructor), so y really is of type Base. Copy can cause "slicing" btw. */ 
```

由于 y 是 Base 类的实际对象，而不是原来的对象，因此在 this 上调用的函数是 Base 的函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-21T20:06:26.170

考虑小端架构：值首先存储低位字节。因此，对于任何给定的无符号整数，值 0-255 都存储在值的第一个字节中。访问任何值的低 8 位只需要一个指向其地址的指针。

所以我们可以`uint8`作为一个类来实现。我们知道一个实例`uint8`是……一个字节。如果我们从它派生并产生`uint16`,`uint32`等，则出于抽象目的，*接口*保持不变，但最重要的变化是对象的具体实例的大小。

当然，如果我们实现`uint8`和`char`，大小可能相同，同样`sint8`。

但是，`operator=`of`uint8`并且`uint16`将要移动不同数量的数据。

为了创建多态函数，我们必须能够：

a/ 通过将数据复制到正确大小和布局的新位置来按值接收参数， b/ 获取指向对象位置的指针， c/ 获取对对象实例的引用，

我们可以使用模板来实现a，因此多态*可以*在没有指针和引用的情况下工作，但是如果我们不计算模板，那么让我们考虑如果我们实现`uint128`并将它传递给期望的函数会发生`uint8`什么？答案：复制 8 位而不是 128 位。

那么，如果我们让我们的多态函数接受`uint128`并传递给它一个`uint8`. 如果`uint8`不幸地找到了我们正在复制的内容，我们的函数将尝试复制 128 个字节，其中 127 个字节在我们可访问的内存之外 -> 崩溃。

考虑以下：

```
class A { int x; };
A fn(A a)
{
    return a;
}

class B : public A {
    uint64_t a, b, c;
    B(int x_, uint64_t a_, uint64_t b_, uint64_t c_)
    : A(x_), a(a_), b(b_), c(c_) {}
};

B b1 { 10, 1, 2, 3 };
B b2 = fn(b1);
// b2.x == 10, but a, b and c? 
```

在`fn`编译的时候，对`B`. 然而，`B`是从`A`多态性派生而来的，应该允许我们可以`fn`用 a调用`B`。但是，它返回的*对象*应该是一个`A`包含单个 int 的对象。

如果我们将一个实例传递`B`给这个函数，我们得到的应该只是`{ int x; }`没有 a、b、c 的 a。

这就是“切片”。

即使使用指针和引用，我们也不会免费避免这种情况。考虑：

```
std::vector<A*> vec; 
```

这个向量的元素可以是指向`A`或派生自 的指针`A`。该语言通常通过使用“vtable”来解决这个问题，这是对对象实例的一个小补充，它标识类型并为虚函数提供函数指针。你可以把它想象成这样：

```
template<class T>
struct PolymorphicObject {
    T::vtable* __vtptr;
    T __instance;
}; 
```

不是每个对象都有自己独特的 vtable，而是类拥有它们，并且对象实例仅指向相关的 vtable。

现在的问题不是切片而是类型正确性：

```
struct A { virtual const char* fn() { return "A"; } };
struct B : public A { virtual const char* fn() { return "B"; } };

#include <iostream>
#include <cstring>

int main()
{
    A* a = new A();
    B* b = new B();
    memcpy(a, b, sizeof(A));
    std::cout << "sizeof A = " << sizeof(A)
        << " a->fn(): " << a->fn() << '\n';
} 
```

[http://ideone.com/G62Cn0](http://ideone.com/G62Cn0)

```
sizeof A = 4 a->fn(): B 
```

我们应该做的是使用`a->operator=(b)`

[http://ideone.com/Vym3Lp](http://ideone.com/Vym3Lp)

但同样，这是将 A 复制到 A ，因此会发生切片：

```
struct A { int i; A(int i_) : i(i_) {} virtual const char* fn() { return "A"; } };
struct B : public A {
    int j;
    B(int i_) : A(i_), j(i_ + 10) {}
    virtual const char* fn() { return "B"; }
};

#include <iostream>
#include <cstring>

int main()
{
    A* a = new A(1);
    B* b = new B(2);
    *a = *b; // aka a->operator=(static_cast<A*>(*b));
    std::cout << "sizeof A = " << sizeof(A)
        << ", a->i = " << a->i << ", a->fn(): " << a->fn() << '\n';
} 
```

[http://ideone.com/DHGwun](http://ideone.com/DHGwun)

（`i`被复制，但 B`j`丢失）

这里的结论是指针/引用是必需的，因为原始实例携带了复制可能与之交互的*成员信息。*

而且，这种多态性在 C++ 中并没有得到完美的解决，人们必须认识到他们有义务提供/阻止可能产生切片的动作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-03T18:28:29.257

您需要指针或引用，因为对于您感兴趣的多态性 (*)，您需要动态类型与静态类型不同，换句话说，对象的真实类型与声明的类型不同。在 C++ 中，这只发生在指针或引用中。

* * *

(*) 泛型，模板提供的多态类型，不需要指针或引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T18:09:35.060

当一个对象按值传递时，它通常被放入堆栈。将某些东西放入堆栈需要知道它有多大。使用多态性时，您知道传入的对象实现了一组特定的功能，但您通常不知道对象的大小（您也不应该，必然，这是好处的一部分）。因此，您不能将其放入堆栈中。但是，您总是知道指针的大小。

现在，并不是所有的东西都在堆栈上，还有其他情有可原的情况。在虚方法的情况下，指向对象的指针也是指向对象的 vtable(s) 的指针，它指示方法的位置。这允许编译器查找和调用函数，而不管它正在使用什么对象。

另一个原因是对象通常是在调用库之外实现的，并且分配有完全不同（并且可能不兼容）的内存管理器。它还可能包含无法复制的成员，或者如果他们被不同的经理复制会导致问题。复制和各种其他并发症可能会产生副作用。

结果是指针是您真正正确理解的对象的唯一信息，并提供了足够的信息来确定您需要的其他位在哪里。**

# java - @RolesAllowed 无法用 Jersey 解决

> ID：15188895
> 
> 赞同：1
> 
> 时间：2013-03-03T18:06:26.047
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在使用 JAX-RS 使用球衣实现。我正在尝试使用 Tomcat 6 使用 BASIC 身份验证来验证我的服务。

这是代码：

```
@Path("/authenticate")
@RolesAllowed({"Admin","Guest"})
public class BasicAuthenticationSecurity {

@GET
@Path("/wbiPing")
@Produces(MediaType.TEXT_PLAIN) 
@RolesAllowed("Admin")
public Response wbiPing(){

System.out.println("Pinged!!!");
return Response.ok("Pinged!!!").build();
}

} 
```

当我尝试使用 注释我的方法`@RolesAllows`时，出现编译错误：

`@RolesAllows cannot be resolved to a type`

请让我知道如何解决这个问题？为此需要任何特定的罐子/ API？

**编辑：**

**web.xml**

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>
            com.security;
            com.exception
        </param-value>
    </init-param>       
    <init-param>
        <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
        <param-value>com.sun.jersey.api.container.filter.RolesAllowedResourceFilterFactory</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<security-constraint>      
  <web-resource-collection>
      <web-resource-name>BasicDemo</web-resource-name>          
      <url-pattern>/*</url-pattern>
      <http-method>GET</http-method>
  </web-resource-collection>
  <auth-constraint>
      <role-name>Admin</role-name>
  </auth-constraint>
</security-constraint>
  <login-config>
  <auth-method>BASIC</auth-method>
  <!-- The realm name is typically displayed by the browser in the login dialog box. -->
  <realm-name>Login</realm-name>      
  </login-config> 
```

请让我知道这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-16T23:54:08.027

[在这篇](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.nd.multiplatform.doc%2Fae%2Ftwbs_jaxrs_impl_securejaxrs_webcont.html)IBM 文章中的一行让我大开眼界之前，我为一个类似的问题苦苦挣扎了好几个小时。令人惊讶的是，没有一本书或用户指南提到这个关键事实，没有它，身份验证就无法成功。

当使用基于注解的安全性时，**web.xml 不是可选的**；恰恰相反，`<security-constraint>`元素必须存在；Web 容器在 JAX-RS 之前检查安全性，如果没有`<security-constraint>`，则未设置正确的安全上下文。因此，当 JAX-RS 调用 时`isUserInRole(role)`，它总是返回 false。

此外，必须存在`<security-role>`web.xml 中的元素或注释。`@DeclareRoles`

最后，如果使用 Jersey，`RolesAllowedDynamicFeature`需要在 Application 类中注册以启用基于注释的安全性。

HTH 其他与可怜的文档作斗争或缺乏文档的人，就在那里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T23:56:55.783

您的代码中有导入吗？

```
import javax.annotation.security.RolesAllowed; 
```

还要确保`annotations-api.jar`在您的类路径中。jar 可以在 Tomcat 安装 lib 文件夹中找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-27T15:03:51.890

终于成功了！

以下是使其在 Tomcat 和 Jersey 中工作的步骤。

假设我们在 TOMCAT_HOME/conf/tomcat-users.xml 中有以下内容，我们在其中定义了 2 个角色 - 编辑器和成员。

我们还定义了三个用户——gavin、julie 和 admin。

```
<?xml version="1.0" encoding="UTF-8"?>
  <role rolename="editor"/>
  <role rolename="member"/>

  <user username="admin" password="qwerty" roles="editor,member"/>
  <user username="gavin" password="qwerty" roles="editor"/>
  <user username="julie" password="qwerty" roles="member"/>
</tomcat-users> 
```

## 步骤 1\. 确保在 web.xml 中使用 Servlet 3.0 规范

安全注释不适用于 Servlet 2.5 及更低版本。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

</web-app> 
```

## 步骤 2\. 创建您的应用程序类以启用安全注释

**注意：下面的代码特定于泽西岛。**

```
package ph.activelearning.rest.security;

import org.glassfish.jersey.server.ResourceConfig;
import org.glassfish.jersey.server.filter.RolesAllowedDynamicFeature;

public class MyApplication extends ResourceConfig {
    public MyApplication() {
        super(TestResource.class);
        register(RolesAllowedDynamicFeature.class);
    }
} 
```

## 步骤 3\. 在 web.xml 中指定您的应用程序类

确保您在步骤 2 中创建的 Application 类被 Jersey 识别。

```
<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>jersey.config.server.provider.packages</param-name>
        <param-value>ph.activelearning.rest.security</param-value>
    </init-param>

    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>ph.activelearning.rest.security.MyApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

## 步骤 4\. 在 web.xml 中创建安全约束

具有讽刺意味的是，即使我们想使用安全注解，我们仍然需要在 web.xml 中定义一个安全约束。

在下面的示例中，我们尝试保护对 /test/* 的访问。不要指定任何 HTTP 方法，这一点很重要。（例如。`<http-method>GET</http-method>`）这意味着您拒绝访问所有 HTTP 方法。

`<auth-constraint>`尽管如此，您仍需要通过元素定义所有可以访问 URL 的角色，而不管方法如何。

```
<web-app …&gt;
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>test</web-resource-name>
            <url-pattern>/test/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>editor</role-name>
            <role-name>member</role-name>
        </auth-constraint>
    </security-constraint>
</web-app> 
```

## 步骤 5\. 在 web.xml 中指定身份验证方法

下面的示例说明了 BASIC 身份验证。

```
<web-app …&gt;
    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>test</realm-name>
    </login-config>
</web-app> 
```

## 步骤 6.定义安全角色

安全角色应该对应于在 tomcat-users.xml 中定义的相同角色。在此示例中，我们定义角色编辑器和成员。

**注意：**这一步似乎是可选的，因为即使没有它，身份验证/授权仍然有效。

```
<web-app ...>
    <security-role>
         <description>This is editor</description>
         <role-name>editor</role-name>
    </security-role>

     <security-role>
         <description>This is member</description>
         <role-name>member</role-name>
    </security-role>
</web-app> 
```

## 步骤 7\. 注释您的资源

```
package ph.activelearning.rest.security;

import javax.annotation.security.PermitAll;
import javax.annotation.security.RolesAllowed;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.SecurityContext;

@Path("test")
@PermitAll
public class TestResource {

    @GET
    @Path("editor")
    @Produces(MediaType.TEXT_PLAIN)
    @RolesAllowed("editor")
    public String editorOnly() {
        return "Got to editor path!";
    }

    @GET
    @Path("member")
    @Produces(MediaType.TEXT_PLAIN)
    @RolesAllowed("member")
    public String memberOnly() {
        return "Got to member path!";
    }

    @GET 
    @Path("open")
    @Produces(MediaType.TEXT_PLAIN)
    public String open(@Context SecurityContext context) {
        return "Open to all! - " + context.getUserPrincipal().getName();
    }
} 
```

就是这样。这是完整的 web.xml，供您享受编程乐趣。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>jersey.config.server.provider.packages</param-name>
            <param-value>ph.activelearning.rest.security</param-value>
        </init-param>

        <!-- Define the Application class where we enable security annotations -->
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
            <param-value>ph.activelearning.rest.security.MyApplication</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <!-- Required even though we use annotations -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>test</web-resource-name>
            <url-pattern>/test/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>editor</role-name>
            <role-name>member</role-name>
        </auth-constraint>
    </security-constraint>

    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>test</realm-name>
    </login-config>

    <!-- Optional: Define security roles that are defined in your app server -->
    <!--  
    <security-role>
        <description>This is editor</description>
        <role-name>editor</role-name>
    </security-role>

    <security-role>
        <description>This is member</description>
        <role-name>member</role-name>
    </security-role>
    -->

</web-app> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T00:28:31.980

我不知道任何声明@RolesAllows 的java 库。[Java6 EE API 文档](http://docs.oracle.com/javaee/6/api/index.html?javax/annotation/security/package-summary.html)仅声明了 5 个用于安全使用的注释。

```
@DeclareRoles
@DenyAll
@PermitAll
@RolesAllowed
@RunAs 
```

如果您试图覆盖类角色，您不能`@RolesAllowed`像您所做的那样简单地放入您的方法，我相信这会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T18:38:51.607

我认为您应该添加 jsr250-api-1.0.jar。如果您使用 Maven，您可以添加以下内容：

```
 <dependency>
        <!-- Annotations for role management -->
        <groupId>javax.annotation</groupId>
        <artifactId>jsr250-api</artifactId>
        <version>1.0</version>
    </dependency> 
```

# perl - 我应该使用 sed、awk、perl 来更改跨越多行的文本并仅选择所需的信息吗？

> ID：15188904
> 
> 赞同：-4
> 
> 时间：2013-03-03T18:07:02.587
> 
> 标签：perl, sed, awk

我正在为一个类项目工作，我们在其中获取一个文件，其中包含描述类的行，如下所示

> CSC 1010 - 计算机和应用
> 程序计算机和应用程序。先决条件：高中代数II。计算机的历史，>硬件组件，操作系统，应用软件，数据通信。
> 3.000 学分

并将其变成

> CSC1010,计算机和应用程序,3

我用了：

```
sed -n 's/^CSC /CSC/p' courses.txt > practice.txt 
```

输出：

> CSC1010-计算机和应用
> CSC1310-介绍编程非MAJ
> CSC2010-计算机科学
> 介绍CSC2310-计算机编程
> CSC2320的PRIN-网站开发基金
> CSC2510基础CSCI SCI
> CSCSCIC3010理论基础 - 计算
> CSC3210 -CSC3210-计算机
> CSC3210 -CSC3210- - 系统级编程
> CSC3330 - C++ 编程
> CSC3410 - 数据结构 - CTW
> CSC4110 - 嵌入式系统
> CSC4120 - 机器人简介

我也用过：

```
sed '/\.000 Course hours//p' courses.txt > courses10.txt 
```

输出：

> 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4

我的问题是尝试选择 sed、awk 还是 perl 是否会更好。所以，到目前为止，我已经使用 sed 来消除不由课程名称或学时数组成的行。正如你在上面看到的。我希望使用正则表达式对文件进行排序并获取以“CSC”开头或包含“.000 Course hours”的每一行。我想在获得该输出后，我可以使用 sed 中的命令从以 CSC 开头的行的末尾删除新行，并用逗号替换它。之后，我将用逗号替换反斜杠。但是，要做到这一点，我认为我需要使用扩展表达式，因此 sed 可能会出局。我正在考虑使用的正则表达式是`(^CSC |[0-9]\.000)`. 那么，我应该在 sed、awk 或 perl 中执行此操作吗？如果你可以请包括你的推理，为什么使用你建议的任何方法会更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:52:31.773

在 Perl 中：

```
while (<>) {
  chomp;
  print if s/^CSC\s+/CSC/ and s/\s+-\s+/,/;
  printf ",%.0f\n", $1 if /^([\d.]+)\s+Credit hours/;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:20:13.770

我会选择`awk`因为你想匹配和重新格式化线条，并且`awk`非常适合：

```
/CSC/ {                 # Lines that match CSC
    split($0,a,"- ")    # Split the line around the hyphen and following space
    gsub(/ /,"",a[1])   # Remove the spaces from the first part of the split
    printf a[1]","a[2]  # Print the line in required format
}
/Credit hours/ {        # Lines that match Credit hours
    printf ",%i\n",$1   # Print the integer value of credit hours  
} 
```

演示：

```
awk '/CSC/{split($0,a,"- ");gsub(/ /,"",a[1]);printf a[1]","a[2]}/Credit hours/{printf ",%i\n",$1}' file
CSC1010,COMPUTERS & APPLICATIONS,3 
```

我更喜欢`awk`，`Perl`这对此没有优势（或劣势）。使用`sed`将是一个正则表达式黑客，所以我会远离`sed`解决方案。

# javascript - 如何测试浏览器是否支持剪贴板数据

> ID：15188909
> 
> 赞同：0
> 
> 时间：2013-03-03T18:07:17.873
> 
> 标签：javascript, javascript-events

如果浏览器具有`clipboardData`粘贴事件的属性，是否可以测试（在页面加载时）？（目前只有 Chrome 有它。）

我尝试`.trigger()`使用 jQuery 粘贴事件，但它不起作用。（在'ed 事件中没有`.originalEvent`属性）`.trigger()`

我想在页面加载和用户粘贴之前对此进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:18:34.407

只需检查它是否是窗口属性

```
if (window.clipboardData) {
    // do stuff
} 
```

或者如果它附加到事件

```
function eventHandler(e) {
    if (e.clipboardData) {
        // do event stuff
    }
} 
```

# ios - 可选择的 UILabel 内容

> ID：15188911
> 
> 赞同：5
> 
> 时间：2013-03-03T18:07:32.040
> 
> 标签：ios, uilabel

我在 iOS 标签对象中有一个 URL 地址列表。用户似乎无法从列表中选择和复制项目并将其粘贴到 iOS 设备上的 Safari 浏览器中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T18:12:36.347

中没有这个功能`UILabel`。

您需要使用`UITextField`或`UITextView`。也不要忘记改变它的外观和使用

```
[... setEditable:NO]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-05T12:40:25.413

实际上可以使用 UILabel，只是您必须进行一些子类化。

最终结果：当您的用户长按标签时，他或她将看到一个复制气球。

[![在 iOS 上长按标签后显示复制气球的图片](../Images/ba1dd603088a443e9fde663b13e74159.png)](https://i.stack.imgur.com/vatcO.png)

以下是允许制作标签可复制的步骤（我记得）：

1.  子类 UILabel
2.  设置 userInteractionEnabled = YES
3.  覆盖 canBecomeFirstResponder 并返回 true
4.  添加一个 UILongPressGestureRecognizer
5.  成为第一响应者并呈现 UIMenuController

斯威夫特 3：

```
let menu = UIMenuController.shared
if !menu.isMenuVisible {
    self.becomeFirstResponder()
    menu.setTargetRect(self.bounds, in: self)
    menu.setMenuVisible(true, animated: true)
} 
```

6.  覆盖 canPerformAction 以允许复制

斯威夫特 3：

```
override func canPerformAction(_ action: Selector, withSender sender: Any?) -> Bool {
        return action == #selector(UIResponderStandardEditActions.copy(_:))
} 
```

7.  覆盖复制方法，UIPasteboard 文本 & 隐藏 UIMenuController

斯威夫特 3：

```
 let menu = UIMenuController.shared          
        let labelText = self.text ?? self.attributedText?.string
        if let uLabelText = labelText {
            let clipBoard = UIPasteboard.general
            clipBoard.string = uText
        }

        menu.setMenuVisible(false, animated: true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-01T11:21:24.000

这是 JoriDor 解决方案的 swift 5 版本；

```
class CopyableLabel: UILabel {

    override init(frame: CGRect) {
        super.init(frame: frame)
        sharedInit()
    }

    required init(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)!
        sharedInit()
    }

    func sharedInit() {
        isUserInteractionEnabled = true
        addGestureRecognizer(UILongPressGestureRecognizer(target: self, action: #selector(showMenu(sender:))))
    }

    @objc
    func showMenu(sender: AnyObject?) {
        becomeFirstResponder()
        let menu = UIMenuController.shared
        if !menu.isMenuVisible {
            menu.setTargetRect(bounds, in: self)
            menu.setMenuVisible(true, animated: true)
        }
    }

    override var canBecomeFirstResponder: Bool {
        return true
    }

    override func canPerformAction(_ action: Selector, withSender sender: Any?) -> Bool {
        if action == #selector(UIResponderStandardEditActions.copy(_:)) {
            return true
        }
        return false
    }

    override func copy(_ sender: Any?) {
        let board = UIPasteboard.general
        board.string = text
        let menu = UIMenuController.shared
        menu.setMenuVisible(false, animated: true)
    }

} 
```

# c++ - OpenCV中的嘈杂色调

> ID：15188918
> 
> 赞同：5
> 
> 时间：2013-03-03T18:07:53.820
> 
> 标签：c++, visual-studio-2008, opencv

这个问题是关于 VS2008 express 中带有 c++ 的 opencv。

我正在做非常简单的事情。试图从相机图像中获取皮肤值。

正如您在屏幕截图中看到的，相机图像看起来相当不错。我将其转换为 HSV 并将 Hue 通道从中分离出来，以便稍后阈值皮肤值。但是 Hue 通道似乎过于嘈杂和颗粒感。HSV 图像窗口也显示信息的退化。为什么会这样？以及如何解决。如果我们不能通过某种平滑来消除噪音？代码如下：

```
#include <opencv2/opencv.hpp>
int main(){
    cv::VideoCapture cap(0); // open the default camera   
    cv::Mat hsv, bgr, skin;//make image & skin container
    cap >> bgr; 
    //cvNamedWindow("Image");
    //cvNamedWindow("Skin");    
    //cvNamedWindow("Hue");
    cv::cvtColor(bgr, hsv, CV_BGR2HSV);
    std::vector<cv::Mat> channels;
    cv::split(hsv, channels);
    cv::Mat hue;
    hue = channels[0];  
    cv::imshow("Image", bgr);cvMoveWindow("Image",0,0);
    cv::imshow("HSV", hsv);cvMoveWindow("HSV",660,0);
    cv::imshow("Hue", hue);cvMoveWindow("Hue",0,460);   

    cvWaitKey(0);//wait for key press   
    return 0;   
} 
```

![在此处输入图像描述](../Images/7f9b1aaebac377d8d22f4bfbc8a38001.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T18:42:22.540

> 色调通道似乎过于嘈杂和颗粒感。为什么会这样？

在我们看到的现实世界的颜色中，由*“色调”*表示的信息**部分**会有所不同。红色完全由色调来描述。黑色根本没有色调信息。

 *但是，当您在 HSV 中表示颜色时，**色调始终是颜色信息的三分之一**。

因此，当颜色接近任何灰色阴影时，色调分量将被人为地夸大。这就是你看到的颗粒感。越接近灰色，必须放大的色调越多，包括捕获色调的误差。

> HSV 图像窗口也显示信息的退化。为什么会这样？

转换中会有舍入误差，但可能没有你想象的那么多。尝试将您的 HSV 图像转换回 BGR，以查看实际发生了多少退化。

> 以及如何解决。

实际上，您有两种选择。

使用更高质量的相机，或不使用 HSV 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T10:38:47.800

如果您查看 OpenCV 文档中[`cvtColor`](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)带有参数的函数的公式，`CV_BGR2HSV`您将拥有

![在此处输入图像描述](../Images/c694c87b853aa7c18240d040ef480b69.png)

![在此处输入图像描述](../Images/64e2f8fdba05721b66e9102dbb90a405.png)

![在此处输入图像描述](../Images/83fab721b5d5c4b8fb3462ddb66cfe5a.png)

现在，当你有一个灰色阴影时，即当 R 等于 B 并且 R 等于 G 时，H 公式中的分数总是未定义的，因为它是零除以零。在我看来，文档没有描述在这种情况下会发生什么。*

# delphi - 增加 INI 文件的节号

> ID：15188921
> 
> 赞同：2
> 
> 时间：2013-03-03T18:08:00.913
> 
> 标签：delphi, ini

我有一个 INI 文件，其中存储了一些用于设置的整数。部分名称存储如下：

```
[ColorScheme_2]
name=Dark Purple Gradient
BackgroundColor=224
BackgroundBottom=2
BackgroundTop=25
...

[ColorScheme_3]
name=Retro
BackgroundColor=5
BackgroundBottom=21
BackgroundTop=8
... 
```

我需要找出一种方法来创建新的部分，从最高的部分编号增加配色方案编号 +1。我有一个组合框，列出了当前的颜色方案名称，因此当用户保存到 INI 文件时，现有方案将被覆盖。如何检查 ComboBox 文本以查看它是否是现有部分，如果不是，则创建一个具有递增名称的新部分？（即来自上面的示例代码，`ColorScheme_2`并且`ColorScheme_3`已经存在，因此下一部分要创建`ColorScheme_4`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T18:17:10.367

您可以通过 using 方法读取所有部分[`ReadSections`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.IniFiles.TCustomIniFile.ReadSections)，然后迭代返回的字符串列表并解析其中的每个项目以存储找到的最高索引值：

```
uses
  IniFiles;

function GetMaxSectionIndex(const AFileName: string): Integer;
var
  S: string;
  I: Integer;
  Index: Integer;
  IniFile: TIniFile;
  Sections: TStringList;
const
  ColorScheme = 'ColorScheme_';
begin
  Result := 0;
  IniFile := TIniFile.Create(AFileName);
  try
    Sections := TStringList.Create;
    try
      IniFile.ReadSections(Sections);
      for I := 0 to Sections.Count - 1 do
      begin
        S := Sections[I];
        if Pos(ColorScheme, S) = 1 then
        begin
          Delete(S, 1, Length(ColorScheme));
          if TryStrToInt(S, Index) then
            if Index > Result then
              Result := Index;
        end;
      end;
    finally
      Sections.Free;
    end;
  finally
    IniFile.Free;
  end;
end; 
```

以及用法：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(IntToStr(GetMaxSectionIndex('d:\Config.ini')));
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T20:07:42.110

**如何检查 ComboBox 文本以查看它是否是现有部分，如果不是，则创建一个具有递增名称的新部分？**

像这样：

```
const
  cPrefix = 'ColorScheme_';
var
  Ini: TIniFile;
  Sections: TStringList;
  SectionName: String;
  I, Number, MaxNumber: Integer;
begin
  Ini := TIniFile.Create('myfile.ini')
  try
    SectionName := ComboBox1.Text;
    Sections := TStringList.Create;
    try
      Ini.ReadSections(Sections);
      Sections.CaseSensitive := False;
      if Sections.IndexOf(SectionName) = -1 then
      begin
        MaxNumber := 0;
        for I := 0 to Sections.Count-1 do
        begin
          if StartsText(cPrefix, Sections[I]) then
          begin
            if TryStrToInt(Copy(Sections[I], Length(cPrefix)+1, MaxInt), Number) then
            begin
              if Number > MaxNumber then
                MaxNumber := Number;
            end;
          end;
        end;
        SectionName := Format('%s%d', [cPrefix, MaxNumber+1]);
      end;
    finally
      Sections.Free;
    end;
    // use SectionName as needed...
  finally
    Ini.Free;
  end;
end; 
```

# django - 无法在扩展的 Django 注册模块上保存额外的字段

> ID：15188927
> 
> 赞同：0
> 
> 时间：2013-03-03T18:08:35.893
> 
> 标签：django, django-registration

我一直在关注[Dmitry](http://dmitko.ru/django-registration-form-custom-field/)教程，以使用附加字段扩展 django-registration 插件注册。现在可以注册用户，但不保存附加字段。我不断收到错误。

> Django 版本：1.4.2
> 异常类型：InternalError 异常值：当前事务被中止，命令被忽略，直到事务块结束异常
> 位置：/root/env27/lib/python2.7/site-packages/django/db/models/sql /compiler.py 在 execute_sql 中，第 910 行

还查看 postgresql 日志，当我执行注册函数时，我看到以下条目。

> ```
> required" value="serkan" name="name" />', NULL, NULL, NULL, NULL, NULL, NULL, NULL, E'') RETURNING "dirapp_userprofile"."id" 2013-03-03 
> ```
> 
> 12:28:45 EST 错误：当前事务被中止，命令被忽略，直到事务块结束 2013-03-03 12:28:45 EST 声明：显示 default_transaction_isolation 2013-03-03 12:29:59 EST 错误：重复键值违反了唯一约束“dirapp_userprofile_user_id_key” 2013-03-03 12:29:59 EST 声明：插入到“dirapp_userprofile”（“user_id”、“name”、“email”、“phone”、“point”、“address”、 “城市”，“州”，“邮政编码”，“描述”）值（48，E'serkan'，NULL，NULL，NULL，NULL，NULL，NULL，NULL，E''）返回“dirapp_userprofile”。“id " 2013-03-03 12:29:59 EST 错误：当前事务被中止，命令被忽略，直到事务块结束 2013-03-03 12:29:59 EST 声明：显示 default_transaction_isolation ransaction_isolation 2013-03-03 12:29:59 EST 错误：重复键值违反唯一约束“dirapp_userprofile_user_id_key”ransaction_isolation 2013-03- 03 12:29:59 EST 错误：重复键值违反了唯一约束“dirapp_userprofile_user_id_key” 2013-03-03 12:36:59 EST 错误：重复键值违反了唯一约束“dirapp_userprofile_user_id_key” 2013-03-03 12:36:59 EST 语句：插入“dirapp_userprofile”（“user_id”、“name”、“email”、“phone”、“point”、“address”、“city”、“state”、“zipcode”、“description”）值（49，E'serkan'，NULL，NULL，NULL，NULL，NULL，NULL，NULL，E''）返回“dirapp_userprofile”。“id”2013-03-03 12:36:59 EST 错误：当前事务被中止，命令被忽略直到事务结束块 2013-03-03 12:36:59 EST STATEMENT：显示 default_transaction_isolation 2013-03-03 13:02:10 EST 错误：重复键值违反唯一约束“dirapp_userprofile_user_id_key” 2013-03-03 13:02:10 EST STATEMENT : INSERT INTO "dirapp_userprofile" ("user_id", "name", "email", "phone", "point", "address", "city", "state", "zipcode", "description") VALUES (50 , E'serkan', NULL, NULL, NULL, NULL, NULL, NULL, NULL, E'') 返回 "dirapp_userprofile"."id"2013-03-03 13:02:10 EST 错误：当前事务被中止，命令被忽略，直到事务块结束 2013-03-03 13:02:10 EST 声明：显示 default_transaction_isolation 2013-03-03 13:54:51 EST 错误：重复键值违反唯一约束“dirapp_userprofile_user_id_key” 2013-03-03 13:54:51 EST 声明：插入“dirapp_userprofile”（“user_id”、“name”、“email”、“phone”、“point” , "address", "city", "state", "zipcode", "description") VALUES (51, E'serkan', NULL, NULL, NULL, NULL, NULL, NULL, NULL, E'') RETURNING " dirapp_userprofile"."id" 2013-03-03 13:54:51 EST 错误：当前事务已中止，直到事务块结束 2013-03-03 13:54:51 EST STATEMENT: SHOW default_transaction_isolation

无法弄清楚可能是什么问题，希望有人能发现我正确的方向。

**模型.py**

> 类用户配置文件（模型。模型）：
> 
> ```
> user = models.ForeignKey(User, unique=True)
> name = models.CharField(max_length=60, blank=True, null=True)
> email = models.CharField(max_length=50,blank=True, null=True)
> phone = models.CharField(max_length=20, blank=True,null=True) 
> point = models.PointField(srid=settings.SRID, blank=True, null=True)
> address = models.CharField(max_length=60, blank=True, null=True)
> city = models.CharField(max_length=60, blank=True, null=True)
> state = models.CharField(max_length=60, blank=True, null=True)
> zipcode = models.CharField(max_length=5,blank=True, null=True)
> description = models.TextField()
> 
> def __unicode__(self):
>     return unicode(self.user) 
> ```
> 
> #检查供应商框是否被选中 @property def is_vendor(self): try: self.vendor return True except Vendor.DoesNotExist: return False
> 
> 类 UserProfileForm(ModelForm): 类 Meta: 模型 = UserProfile exclude = ["user","point"]

**网址.py**

```
from djangoratings.views import AddRatingFromModel
from registration.views import register, activate
import dirapp.regbackend
from django.views.generic.simple import direct_to_template
from dirapp.forms import UserRegistrationFormz
from registration.views import register
#import registration.backends.default.urls as regUrls
import registration.backends.default.urls as regUrls

listing_list = {"queryset":Listing.objects.all()}

urlpatterns = patterns('', 
    url(r'^$',index,name='index'),
    url(r'^accounts/register/$', register, { 'backend': 'registration.backends.default.DefaultBackend','form_class':UserRegistrationFormz}, name='registration_register'),  
    url(r'^accounts/', include(regUrls)), 
    url(r'^profile/$', user_profile, name='user-profile-view'), 
```

**regbackend.py**

```
 from dirapp.forms import UserRegistrationFormz
    from dirapp.models import UserProfile
    from django import forms

    def user_created(sender, user, request, **kwargs):
        form = UserRegistrationFormz(request.POST)
        data = UserProfile(user=user)
        data.name = form.data['name']
        data.save()

    from registration.signals import user_registered
    user_registered.connect(user_created) 
```

**表格.py**

```
from django.contrib.gis import forms
from django.contrib.auth.models import User
from django.db.models import Q
from dirapp.models import UserProfile
from django import forms
from registration.forms import RegistrationForm, RegistrationFormTermsOfService
from django.forms import ModelForm
from django.utils.translation import ugettext_lazy as _
from registration.models import RegistrationProfile
from forms import *
from django import forms

#class ProfileForm(forms.Form):
#    name = forms.CharField()

#    def save(self,user):
#        try:
#            data = user.get_profile()
#        except:
#            data = UserProfile(user=user)
#        data.name = self.cleaned["name"]
#        data.save()

attrs_dict = {'class':'required'}

class UserRegistrationFormz(RegistrationForm):
    name = forms.CharField(widget=forms.TextInput(attrs=attrs_dict)) 
```

**追溯**

```
Environment:

Request Method: POST
Request URL: http://localhost:8000/accounts/register/

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.humanize',
 'django.contrib.gis',
 'django.contrib.staticfiles',
 'south',
 'dirapp',
 'registration',
 'django_extensions',
 'sorl.thumbnail',
 'debug_toolbar',
 'taggit',
 'djangoratings')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/root/env27/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/root/posguide/../posguide/registration/views.py" in register
  187\.             new_user = backend.register(request, **form.cleaned_data)
File "/root/posguide/registration/backends/default/__init__.py" in register
  82\.                                      request=request)
File "/root/env27/lib/python2.7/site-packages/django/dispatch/dispatcher.py" in send
  172\.             response = receiver(signal=self, sender=sender, **named)
File "/root/posguide/../posguide/dirapp/regbackend.py" in user_created
  9\.     data.save()
File "/root/env27/lib/python2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/root/env27/lib/python2.7/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/root/env27/lib/python2.7/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/root/env27/lib/python2.7/site-packages/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/root/env27/lib/python2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  910\.             cursor.execute(sql, params)

Exception Type: InternalError at /accounts/register/
Exception Value: current transaction is aborted, commands ignored until end of transaction block 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:00:24.893

事实证明解决起来很简单。对 regbackendpy 中的查询稍作修改即可使其正常工作。

```
from dirapp.forms import UserRegistrationFormz
    from dirapp.models import UserProfile
    from django import forms

    def user_created(sender, user, request, **kwargs):
        form = UserRegistrationFormz(request.POST)
        **data = UserProfile.objects.get(user=user.id)**
        data.name = form.data['name']
        data.save()

    from registration.signals import user_registered
    user_registered.connect(user_created) 
```

# ruby-on-rails - Rails 为具有多对多关系的模型创建表单

> ID：15188936
> 
> 赞同：5
> 
> 时间：2013-03-03T18:09:19.450
> 
> 标签：ruby-on-rails, join, model, many-to-many

我有两个模型，`Recipe`和`Tag`，有`has_and_belongs_to_many`关系。对于这种关系，我有一个简单的连接表，`RecipesTags`.

食谱：

```
has_and_belongs_to_many :tags 
```

标签：

```
has_and_belongs_to_many :recipes 
```

现在，在创建新食谱后，用户可以以复选框的形式填写食谱所属的类别，例如“肉”、“鱼”等。这些类别实际上只是数据库中的标签。

**问题：食谱没有保存任何标签。**

配方`new`和`create`控制器方法：

```
 def new
    @recipe = Recipe.new
    @ingredients = Ingredient.all
    @tags = Tag.all

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @recipe }
    end
  end

  # POST /recipes
  # POST /recipes.json
  def create
    @recipe = Recipe.new(params[:recipe])
    if (params[:tags])
      @recipe.tags << params[:tags]
    end

    respond_to do |format|
      if @recipe.save
        format.html { redirect_to @recipe, notice: 'Recipe was successfully created.' }
        format.json { render json: @recipe, status: :created, location: @recipe }
      else
        format.html { render action: "new" }
        format.json { render json: @recipe.errors, status: :unprocessable_entity }
      end
    end
  end 
```

风景：

```
<%= form_for(@recipe, :html => {:multipart => true}) do |f| %>
  <% if @recipe.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@recipe.errors.count, "error") %> prohibited this recipe from being saved:</h2>

# [ fields that get's saved for the recipe and works fine ]

<% @tags.each do |t| %>
      <%= f.label t.name  %>
      <%= f.check_box :tags, t.name  %>
      <br />
    <% end %>

<%= f.submit 'Submit recipe', :class => 'btn btn-primary' %>

<% end %> 
```

目前，我收到一条错误消息：“Meat”的未定义方法“合并”：字符串

“肉”是标签名称。

那么，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:39:21.490

我认为问题是这条线`@recipe.tags << params[:tags]`。您调用的关联方法`<<`需要一个对象（在这种情况下需要一个标记对象），但在这种情况下，您似乎可能正在向它传递一个字符串。

有关更多信息，此链接可能会有所帮助[http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference)，尤其是它所指的地方`collection<<(object, …)`。

* * *

在您的控制器中，您需要执行类似`@recipe.tags << tag`where tag 是特定标记对象的操作。

所以，试试这个：

*在您的控制器中*

```
params[:tags].each do |k,v|
   @recipe.tags << Tag.find(k)
end 
```

*在你看来*

```
<% @tags.each do |t| %>
  <%= f.label t.name  %>
  <%= f.check_box "tags[#{t.id}]"  %>
  <br />
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:20:26.593

试试这个：

```
 def create
    @recipe = Recipe.new(params[:recipe])
    params[:tags].each do |tag|
      @recipe.tags << Tag.find_by_name(tag)
    end

    respond_to do |format|
      if @recipe.save
        format.html { redirect_to @recipe, notice: 'Recipe was successfully created.' }
        format.json { render json: @recipe, status: :created, location: @recipe }
      else
        format.html { render action: "new" }
        format.json { render json: @recipe.errors, status: :unprocessable_entity }
      end
    end
  end 
```

鉴于：

```
<% @tags.each do |t| %>
  <%= label_tag t.name  %>
  <%= check_box_tag "tags[#{t.name}]", t.name  %>
  <br />
<% end %> 
```

# c++ - 使用 clr 和 std::thread

> ID：15188937
> 
> 赞同：0
> 
> 时间：2013-03-03T18:09:24.433
> 
> 标签：c++, .net, stdthread

我正在为桌面创建一个 UI 抽象层。现在我正在实现 .NET 框架的功能。烦人的事情是，如果我让用户在 Visual Studio 中创建 CLR Windows 窗体应用程序，他们将无法使用所有标准库`std::thread`，如果我让他们创建另一种类型的应用程序，控制台就会出现。

有没有办法将**clr**与`std::thread`CLR 控制台或 CLR 空项目一起使用，或者更好的是，有没有办法阻止控制台启动（或从屏幕和任务栏隐藏它）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-06T11:56:37.487

可能是一个老问题，但我之前研究过同样的问题。由于 CLR 不允许您`std::thead`在编译时包含，您可以尝试仅在链接时使用它。通常，您可以通过在标题中声明该类并将它们仅包含在您的 cpp 文件中来解决此问题。但是，您**可以**在头文件中转发声明自己的类，但**不能**为命名空间 std 中的类。根据 C++11 标准，17.6.4.2.1：

> 如果 C++ 程序将声明或定义添加到命名空间 std 或命名空间 std 内的命名空间，则 C++ 程序的行为是未定义的，除非另有说明。

此问题的解决方法是创建一个继承自`std::thread`您**可以**转发声明的线程类。此类的头文件如下所示：

```
#pragma once
#include <thread>
namespace Threading
{
    class Thread : std::thread
    {
    public:
        template<class _Fn, class... _Args> Thread(_Fn fn, _Args... args) : std::thread(fn, std::forward<_Args>(args)...)
        {

        }
    private:

    };
} 
```

在你想使用线程的头文件中，你可以像这样向前声明它：

```
#pragma once

// Forward declare the thread class 
namespace Threading { class Thread; }
class ExampleClass
{
    public:
        ExampleClass();
        void ThreadMethod();
    private:
        Threading::Thread * _thread;
}; 
```

在您的源文件中，您可以使用 theading 类，如：

```
#include "ExampleClass.h"
#include "Thread.h"

ExampleClass::ExampleClass() :
{
    _thread = new Threading::Thread(&ExampleClass::ThreadMethod, this);
}

void ExampleClass::ThreadMethod()
{
} 
```

希望它可以帮助任何人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T13:18:23.200

这是一个老问题，但如果有人遇到同样的问题：`boost::thread`是“负担得起”且实用的替代品（前提是您可以在项目中使用 boost）。奇怪的是，它绕过了不兼容。

# javascript - 没有jQuery的onKeyUp？

> ID：15188938
> 
> 赞同：5
> 
> 时间：2013-03-03T18:09:24.747
> 
> 标签：javascript, jquery

我试图在不使用 jQuery 的情况下按下 enter 时捕获 onKeyUp。

我目前的代码是：

```
$('#chatboxtextarea').on('keyup', function (e) {
        var msg = document.getElementById('chatboxtextarea').value;
        if (msg.replace(/\r/g, '\\\\r').replace(/\n/g, '') != "" && e.keyCode == 13) {
            var textarea = document.getElementById('chatboxtextarea');
            textarea.value = '';

            .....code to send.....

        } else if (msg.replace(/\r/g, '\\\\r').replace(/\n/g, '') == '') {
            var textarea = document.getElementById('chatboxtextarea');
            textarea.value = '';
        }
    }); 
```

这怎么能用普通的 JavaScript 来代替呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:17:28.257

简单地：

```
document.getElementById('chatboxtextarea').onkeyup = function (e) {
    e = e || window.event;
    var textarea = this;
    var msg = textarea.value;
    if (msg.replace(/\r/g, '\\\\r').replace(/\n/g, '') != "" && e.keyCode == 13) {
        textarea.value = '';

        .....code to send.....

    } else if (msg.replace(/\r/g, '\\\\r').replace(/\n/g, '') == '') {
        textarea.value = '';
    }
}; 
```

**编辑：**

或者，您可以调用以下内容来添加事件；传递元素对象，事件类型（不带'on'），要调用的函数以及是否使用捕获，只是为了利用不同的浏览器方法：

```
function addEvent(elm, evType, fn, useCapture) {
  if (elm.addEventListener) {
    elm.addEventListener(evType, fn, useCapture);
  }
  else if (elm.attachEvent) {
    elm.attachEvent('on' + evType, fn);
  }
  else {
    elm['on' + evType] = fn;
  }
}; 
```

IE：

```
addEvent(document.getElementById('chatboxtextarea'), 'keyup', 
  function(e) {
    e = e || window.event;
    ...
  }, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:27:33.570

jQuery 在内部做了很多复杂的代码，这些代码很难简单地模仿。如果您只想将相同的事件绑定到相关 ID，那还不错。

用于选择元素：

```
document.getElementById('chatboxtextarea')
document.querySelector('#chatboxtextarea')
document.querySelectorAll('#chatboxtextarea')[0] 
```

附加事件：

```
.addEventListener('keyup', function (e) { 
```

对于 IE8-，您必须使用`.attachEvent`，但它不是一个精确的模拟。对于古代浏览器，使用`.onkeyup`属性。

# c# - 表格位置在屏幕右下角

> ID：15188939
> 
> 赞同：11
> 
> 时间：2013-03-03T18:09:28.727
> 
> 标签：c#, winforms, forms, position

我正在使用 c# WinForm 开发一个 sman 通知应用程序。我想把主窗体放在屏幕工作区的右下角。在多个屏幕的情况下，有一种方法可以找到最右边的屏幕来放置应用程序，或者至少记住最后使用的屏幕并将表单放在右下角？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-03T18:33:31.770

我目前没有要检查的多个显示器，但它应该类似于

```
 public partial class LowerRightForm : Form
    {
        public LowerRightForm()
        {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e)
        {
            PlaceLowerRight();
            base.OnLoad(e);
        }

        private void PlaceLowerRight()
        {
            //Determine "rightmost" screen
            Screen rightmost = Screen.AllScreens[0];
            foreach (Screen screen in Screen.AllScreens)
            {
                if (screen.WorkingArea.Right > rightmost.WorkingArea.Right)
                    rightmost = screen;
            }

            this.Left = rightmost.WorkingArea.Right - this.Width;
            this.Top = rightmost.WorkingArea.Bottom - this.Height;
        }
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-03T18:24:24.707

覆盖表单`Onload`并设置新位置：

```
protected override void OnLoad(EventArgs e)
{
    var screen = Screen.FromPoint(this.Location);
    this.Location = new Point(screen.WorkingArea.Right - this.Width, screen.WorkingArea.Bottom - this.Height);
    base.OnLoad(e);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-09T14:31:09.667

```
//Get screen resolution
Rectangle res = Screen.PrimaryScreen.Bounds; 

// Calculate location (etc. 1366 Width - form size...)
this.Location = new Point(res.Width - Size.Width, res.Height - Size.Height); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-30T02:39:37.557

以下代码应该可以工作:)

```
var rec = Screen.PrimaryScreen.WorkingArea;
int margain = 10;

this.Location = new Point(rec.Width - (this.Width + margain), rec.Height - (this.Height + margain)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-01T16:39:54.837

```
 int x = Screen.PrimaryScreen.WorkingArea.Right - this.Width;
    int y = Screen.PrimaryScreen.WorkingArea.Bottom - this.Height;

    // Add this for the real edge of the screen:
    x = 0; // for Left Border or Get the screen Dimension to set it on the Right

    this.Location = new Point(x, y); 
```

# vb.net - 检测用户是否对 FontDialog 对象进行了更改

> ID：15188940
> 
> 赞同：2
> 
> 时间：2013-03-03T18:09:30.757
> 
> 标签：vb.net, dialog

我有一个`FontDialog`盒子叫`aFontDialog`.

我可以检测到对此对话框所做的更改吗？

最初我的对象使用此代码创建对话框`aFontDialog.ShowDialog`，然后用户进行更改，然后如果用户对他们的更改感到满意，那么应用程序将收到`Windows.Forms.DialogResult.OK`：

![在此处输入图像描述](../Images/a183f2f07fee85e4be61df65b0292d5a.png)

是否可以检测到用户对此对话框所做的任何更改？我是否需要在之前记录对话框不同方面的状态，然后比较它们之后的状态 - 或者此对话框中是否有一些属性或方法可以帮助我找到任何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:57:50.783

这里最重要的问题是——*为什么你需要知道这些变化*。请看，字体通常不是事务对象，因此您通常不需要避免过多的网络流量或最小化数据库往返次数。

我只想看看用户是否按下了确定。如果是，请设置新字体，无论它与您当前的字体有多么相似。这只是一行代码 - 就像将这种新字体分配给旧字体一样简单：

```
Me.Font = MyFontDialog.Font 'Me could be any control in this case 
```

此外，如果字体不同，我认为这是您唯一的方法。这意味着您不能例如 set `Font.Bold = True`，因为它是只读的。而且它也不会花费很多处理时间，所以优化它没有意义。

如果你真的想要，你可以在检查 OK`FontDialog.Font`后检查`DialogResult`，并与你在那里传递的内容进行比较，尽管我不知道这在哪里会有用。

# ios - 使用 UIImageView 的长和全屏动画

> ID：15188942
> 
> 赞同：0
> 
> 时间：2013-03-03T18:09:32.780
> 
> 标签：ios, animation, uiimageview, png

我刚刚意识到将 60 个 960x640 PNG 文件塞进 UIImageView 是一个可怕的错误。

也就是说，我仍然需要展示这个动画，因为它应该有一个透明的背景，我不能去 MPMoviePlayer 或类似的东西（或者我可以吗？）。此外，即使我可以分离动画的不同元素（我不能不去找给我的人），但它们中的大多数仍然很大。

我完全失去了想法。你有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:43:57.447

听起来您可能更适合播放视频，但我不确定透明背景。使用单独的 png，您必须将每个 png 加载到内存中，即 (640 * 960) 像素 * 24 位/像素 * 60 张图像 = 大量内存。

也就是说，您需要多快播放动画？除了使用 UIImageView 动画，您可以使用计时器并手动管理将图像加载和卸载到内存中，一次只保留大约一两个。

# python - python 列表插入

> ID：15188944
> 
> 赞同：0
> 
> 时间：2013-03-03T18:09:35.533
> 
> 标签：python, arrays, tuples

假设您有一个元组列表，例如：

```
list1 = [(0, 0, 0), (1, 0, 0), (2, 0, 0), (3, 0, 0)] 
```

并且您想将元组 (0, 1, 0) 添加到它应该按顺序排列的列表中：

```
list1 = [(0, 0, 0), (0,1,0), (1, 0, 0), (2, 0, 0), (3, 0, 0)] 
```

并说您还想将元组 (0,1,1) 添加到它应该按顺序排列的列表中：

```
list1 = [(0, 0, 0), (0,1,0), (0,1,1), (1, 0, 0), (2, 0, 0), (3, 0, 0)] 
```

并说您还想将元组 (3,1,0) 添加到它应该按顺序排列的列表中：

```
list1 = [(0, 0, 0), (0,1,0), (0,1,1), (1, 0, 0), (2, 0, 0), (3, 0, 0), (3, 1, 0)] 
```

我想尝试提出一个函数，该函数根据元组中的值（def（value1，value2，value3）：...）采用三个参数，并使用它可以找到索引值并将元组插入以正确的顺序列出。发现它非常困难和帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:44:51.660

`list1`如果已排序，则插入单个元组：

```
import bisect

bisect.insort(list1, (0, 1, 0)) 
```

合并两个排序列表：

```
import heapq

tuples = [(0,1,0), (0,1,1), (3,1,1)]
list1 = list(heapq.merge(list1, tuples)) 
```

或者对于小列表 ( `len(L) < 1000000`)：

```
list1.extend(tuples)
list1.sort() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:25:51.143

为了简单起见，只需附加新值并对列表进行排序：

```
a = [(0, 0, 0), (1, 0, 0), (2, 0, 0), (3, 0, 0)]

def add_to_list(item1, item2, item3, the_list):
    the_list.append((item1, item2, item3))
    return sorted(the_list)    

print(add_to_list(0, 1, 0, a)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:24:35.187

```
>>> def fun(value1, value2, value3):
        tup = (value1, value2, value3)
        list1.append(tup)
        list1.sort()
        return(list1)

>>> list1 = [(0, 0, 0), (0,1,0), (1, 0, 0), (2, 0, 0), (3, 0, 0)] 
>>> fun(0,1,1)
[(0, 0, 0), (0, 1, 0), (0, 1, 1), (1, 0, 0), (2, 0, 0), (3, 0, 0)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:35:05.233

不带写功能：

```
a = [(0, 0, 0), (1, 0, 0), (2, 0, 0), (3, 0, 0)]
a = sorted(a+[(0,1,1)]) 
```

使用函数（t 是元组）：

```
f = lambda a,t: sorted(a+[t])
a = f(a, (1, 1, 0)) 
```

# python - Python，从列表 A 中删除列表 B 以生成列表 C？

> ID：15188948
> 
> 赞同：4
> 
> 时间：2013-03-03T18:10:00.673
> 
> 标签：python

如何将列表中的列表从列表中删除到新列表中？那么从 a 中减去 b 以产生一个新列表 c？

```
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9,]

b = [3, 4, 5, 6]

c = []? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T18:11:54.617

将列表转换为集合并获取集合差异。

```
c = list(set(a).difference(set(b)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T18:16:44.937

要保持排序并通过使用集合成员资格获得加速：

```
bs = set(b)
c = [x for x in a if x not in bs] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-03T18:12:40.380

或使用列表推导：

```
c = [x for x in a if x not in b] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T18:16:04.310

根据你正在做的事情，首先你可能会更好地使用集合：

```
>>> a = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, }
>>> b = {3, 4, 5, 6}
>>> a
set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> b
set([3, 4, 5, 6])
>>> a.difference(b)
set([0, 1, 2, 7, 8, 9]) 
```

`collections.Counter`如果您想计算多次重复，这是另一种有用的标准类型：

```
>>> from collections import Counter as C
>>> a = C([1,1,1,2,2,3,4])
>>> b = C([1,4,5])
>>> a - b
Counter({1: 2, 2: 2, 3: 1}) 
```

# objective-c - 固定长度的 NSString

> ID：15188954
> 
> 赞同：0
> 
> 时间：2013-03-03T18:10:19.597
> 
> 标签：objective-c, cocoa, nsstring, objective-c-category

我想要一个 nsstring 对象，它只能在其中存储指定长度的字符。

如果超过它应该从左边截断。例如，如果我将长度设置为 5，并且输入值作为 Ileana，那么它应该存储leana。

我尝试在 nsstring 上创建一个类别，但我没有想法：

```
-(void)setMaximumLength:(NSInteger)length;{
    if ([self length]>length) {
        NSLog(@"exxed");
    }

} 
```

请建议我该怎么办？我有一个想法，我需要观察字符串的大小，但是如何在一个类别中执行，以及将调用哪个通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:21:59.760

这听起来有点像格式化显示或处理用户输入或类似的东西，而不是你想对字符串施加的实际约束。在这种情况下，一个 NSFormatter 类或一些特定控制器属性设置器中的一些代码将是一个好主意。

但是如果你真的希望它出现在字符串本身上，你要么需要提供一个像`stringByTruncatingToLength:`NSString 这样的方法，要么你需要在任何地方切换到使用 NSMutableString，因为 NSStrings 根本无法修改，因此一个`setMaximumLength:`方法将毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T19:16:27.787

截断机制可以这样实现：（对于自定义类的 NSString 属性）

```
-(void)setName:(NSString*)newName
{
  if([newName length]> maxLength)
{
   newName = [newName substringWithRange:NSMakeRange([newName length] - maxLength, maxLength];
}
   _name = newName;
} 
```

# sorting - 基数排序：基数排序中的“组”是什么意思？

> ID：15188955
> 
> 赞同：0
> 
> 时间：2013-03-03T18:10:19.690
> 
> 标签：sorting, radix

我为我的cs类分配了排序算法。我需要将基数排序的伪代码转换为 c++。这是我的伪代码：

```
radixSort( int theArray[], in n:integer, in d:integer)
// sort n d-digit integers in the array theArray
    for (j=d down to 1) {
         Initialize 10 groups to empty
         Initialize a counter for each group to 0
         for (i=0 through n-1) {
              k = jth digit of theArray[i]
              Place theArray[i] at the end of group k
              Increase kth counter by 1
         }
         Replace the items in theArray with all the items in 
         group 0, followed by all the items in group 1, and so on.
    } 
```

问题是，我真的不明白“组”是什么意思。我首先尝试使用数组，但当然，它会覆盖数字。如何根据最后一位数字对数字进行分组？我不要求任何代码。我只需要了解。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T01:31:08.837

取每个数字，除以 10 的 x 次方，x 是循环的每次迭代，然后将该数字除以 10。

```
(num/10**x) % 10 
```

这将在第一次通过时为您提供最低有效数字，然后按从右到左的顺序移动到每个数字。迭代次数应等于最大数的长度。

# licensing - D语言有任何“专有”包袱吗？

> ID：15188957
> 
> 赞同：5
> 
> 时间：2013-03-03T18:10:35.150
> 
> 标签：licensing, d, gnu

我正在查看 D 的许可，发现前端是开源的，但后端不是；什么是后端？

GNU 为什么要制作 gdc？跟执照有关系吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T18:37:43.680

有不同的编译器具有不同的目标。前端分析源代码，而后端进行实际编译。由于前端是开源的，它可以用于多个编译器。

**DMD**是 D 的闭源默认实现。它功能齐全，但可能不是最好的编译器性能。

**GDC**使用成熟的[GNU 编译器集合](https://en.wikipedia.org/wiki/GNU_Compiler_Collection)作为后端。相同的后端广泛用于 C 或 C++ 编译并能够进行高级优化。

**LDC以**[LLVM](https://en.wikipedia.org/wiki/LLVM)平台为目标。这允许一些有趣的东西，如高速编译、可移植字节码和 jitting。

由于前端在所有编译器之间共享，一个源文件将在每个编译器上以相同的方式解析。将此与 C 或 C++ 方言进行比较。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T00:19:46.523

DMD 只是 D 编译器的参考实现，就像 Glassfish 是企业 Java 应用服务器的参考实现一样。DMD 的后端源于 DigitalMars C/C++ 编译器。有道理，因为最初的 D 创建者是 DigitalMars C/C++ 编译器的作者，对吧？Walter 无法合法地完全开源后端，因为它的一部分是在赛门铁克手中制作的......

其次，GNU*没有*制作 GDC——它是由少数爱好者制作的，希望很快会被合并到 GCC 树中。GDC 就是 GPL，就这么简单。

还提到了 LDC - 它使用 LLVM 作为后端。

真正重要的是 D 前端是开源的。DMD 的后端不是无关紧要的，因为有很多选择。无论如何，GCC 和 LLVM 后端都优于 DMD 后端。

如果你喜欢编译器/解释器设计，我建议你看看 SDC、MCI 和 DIL 项目。[我认为您在http://wiki.dlang.org](http://wiki.dlang.org)上有更多关于它们的信息。

# ios - (WeeLoader) 'UITapGestureRecognizer' 未在此范围内声明

> ID：15188958
> 
> 赞同：0
> 
> 时间：2013-03-03T18:10:38.973
> 
> 标签：ios, objective-c, uitapgesturerecognizer, theos

我知道当错误是“'blah' is not declared in this scope”意味着没有正确创建对象时，但是当我为 iOS 制作通知中心小部件时，使用 WeeLoader 模板和 THEOS 进行编译，我收到此错误：未在此范围内声明“UITapGestureRecognizer”。

这是我的 .mm 文件：

```
- (void)loadFullView {
     UITapGestureRecognizer *Tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];

     UIImage *bg = [[UIImage imageWithContentsOfFile:@"/System/Library/WeeAppPlugins/WeeAppTest.bundle/WeeAppBackground.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:71];
     UIImageView *bgView = [[UIImageView alloc] initWithImage:bg];
     bgView.frame = CGRectMake(0, 0, 316, 71);     
     bgView.userInteractionEnabled = YES;

     [bgView addGestureRecognizer:Tap];

     [_view addSubview:bgView];
     [bgView release];
     [Tap release];

      UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 316, 71)];
      lbl.backgroundColor = [UIColor clearColor];
      lbl.textColor = [UIColor whiteColor];
      lbl.text = @"Hello world";
      lbl.textAlignment = UITextAlignmentCenter;
      [_view addSubview:lbl];
      [lbl release];
}

-(void) handleTapGesture:(UIGestureRecognizer *) sender {

} 
```

我究竟做错了什么？我很确定我正确地声明了所有内容，顺便说一句，代码确实可以在没有 UITapGestureRecognizer 的情况下工作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:45:56.610

我认为这里发生了一些事情。

我认为您可能会遇到超出范围的错误，因为手势识别器应该在`viewDidLoad`or`init`方法中声明。

另外，在`UITapGestureRecognizer *Tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];`你调用你的方法`handleSingleTap:`

因此你的方法应该是`-(void) handleSingleTap:(UITapGestureRecognizer *) sender`

# unit-testing - CMake 的 C 单元测试框架

> ID：15188959
> 
> 赞同：0
> 
> 时间：2013-03-03T18:10:39.467
> 
> 标签：unit-testing, cmake

我正在使用 CMake 开始一个 C 项目，并且我想使用 TDD。所以我需要一个可以与 CMake 集成的高效单元测试框架。

我正在寻找一个 UTF 可以：

1.  与 CMake 轻松集成
2.  给我代码覆盖率
3.  获得（如果可能的话）BSD 许可

我尝试过 Kuya 匹配**3。**但没有给出 CC，然后检查匹配**2。**但我没有找到任何可以轻松与 CMake 集成的 UTF。

“*与 CMake 轻松集成*”是指可以由`$ make tests`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:13:00.443

CTest 呢？CTest 允许您将测试集成到 CMakeLists.txt 中。有关更详尽的解释，请参阅[http://cmake.org/Wiki/CMake/Testing_With_CTest](http://cmake.org/Wiki/CMake/Testing_With_CTest)。对于您的要求：

1.  再简单不过了。
2.  这取决于您如何设计测试 - ctest 只运行它们
3.  与 cmake 相同的许可证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:03:59.413

[http://code.google.com/p/googletest/](http://code.google.com/p/googletest/)是 C++。

它与 CMake 很好地集成在一起，我想即使您的测试文件是纯 C 语言，使用一点 C++ 进行测试也不应该是一个大问题。

# plone - 我如何向内容对象询问状态？

> ID：15188960
> 
> 赞同：4
> 
> 时间：2013-03-03T18:10:44.007
> 
> 标签：plone

在[本教程](http://plone.org/products/dexterity/documentation/manual/developer-manual/reference/manipulating-content-objects)的最后列出了几个对象属性。但是我需要访问状态（已发布，私有，...）。我也使用搜索该属性，`dir()`但我没有看到名为 as`state`或类似名称的属性。即，我需要这样的东西：

```
>>> app.Plone.foo.bar.state
"published" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T19:30:33.647

或者为了让您的代码更具可读性并且不必记住奇怪的方法名称，您可以使用[plone.api](http://ploneapi.readthedocs.org/en/latest/content.html#get-workflow-state)来执行此操作：

```
from plone import api
api.content.get_state(obj=your_object) 
```

当然，您需要先添加`plone.api`到您的鸡蛋中，然后重新运行构建。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T18:33:22.203

您始终可以使用[plone_workflow](http://developer.plone.org/content/workflow.html)来确定当前状态：

```
workflowTool = getToolByName(self.portal, "portal_workflow")
status = workflowTool.getStatusOf("plone_workflow", object)
# where "object" is your content object
print (status) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T23:23:03.287

不幸的是，没有“状态”属性。相反，请`review_state`使用工作流工具进行检查，例如：

```
>>> app.Plone.portal_workflow.getInfoFor(app.Plone.foo.bar, "review_state") 
```

# spring - Spring循环依赖使用setter

> ID：15188961
> 
> 赞同：10
> 
> 时间：2013-03-03T18:10:46.307
> 
> 标签：spring, circular-dependency

我已经阅读过，以避免循环依赖，我可以`@Autowired`在设置器而不是构造器上使用。

如果是这样，为什么会失败？

```
@Component
private static class A {
    @Autowired
    public A(B b) {
    }
}

@Component
private static class B {
    private A a;

    public B() {
    }

    @Autowired
    public void setA(A a) {
        this.a = a;
    }
} 
```

如果我以`A`类似的方式定义类`B`，一切都很好，但是上面的应该已经可以工作了，那为什么不行呢？我处于无法摆脱`A`类构造函数中的依赖关系的情况。在这种情况下我能做什么？

编辑：我正在使用 Spring 3.2.1.RELEASE

EDIT2：我的例外：

```
Exception in thread "main" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dependencyTest.A' defined in file [/home/adam/workspaces/testproject/target/classes/mypackage/test/DependencyTest$A.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [mypackage.test.DependencyTest$B]: : Error creating bean with name 'dependencyTest.B': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void mypackage.test.DependencyTest$B.setA(mypackage.test.DependencyTest$A); nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dependencyTest.A': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dependencyTest.B': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void mypackage.test.DependencyTest$B.setA(mypackage.test.DependencyTest$A); nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dependencyTest.A': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1049)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:953)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:84)
    at mypackage.test.DependencyTest.main(DependencyTest.java:10)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dependencyTest.B': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void mypackage.test.DependencyTest$B.setA(mypackage.test.DependencyTest$A); nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dependencyTest.A': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:891)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:834)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)
    ... 14 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void mypackage.test.DependencyTest$B.setA(mypackage.test.DependencyTest$A); nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dependencyTest.A': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:601)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    ... 26 more
Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dependencyTest.A': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:327)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:217)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:891)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:834)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:558)
    ... 28 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T05:10:39.800

我认为 Spring 还不够聪明，无法意识到必须以特定顺序加载这种关系，以避免看起来像无法解析的循环引用。它通常通过在构造它们之后但在完全填充它们之前缓存单例实例来处理循环引用，以便它可以在需要的地方注入实例，即使它还没有填充，因为它知道它将在稍后完成设置。

发生的事情是它首先尝试创建 A，但它甚至无法在没有 B 的情况下构造一个，因此它无法缓存 A 实例。然后它尝试创建一个 B 并看到它需要一个 A，但它知道它正在创建 A 的过程中但没有用于依赖项的缓存实例，所以它失败了。您需要强制它首先使用类似 a 的东西创建 B 实例`@DependsOn("dependencyTest.B")`。然后可以进行单例缓存，因为可以在不需要 A 的情况下构造 B，因此在创建 A 时将可以使用未填充的 B 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T05:22:09.283

bean 首先被实例化，然后相互注入。这就是你面临这种情况的原因。当`A`被实例化时，它需要`B`.

使用 setter 而不是构造函数可以解决这个问题，因为实例化阶段是在不添加依赖项的情况下完成的。

# r - ggplot2：一个图例，具有从公共变量派生的两个视觉属性

> ID：15188964
> 
> 赞同：9
> 
> 时间：2013-03-03T18:11:02.000
> 
> 标签：r, ggplot2, legend

如何获得一个同时捕获颜色和大小的图例？

我的印象是，如果使用通用变量，则默认使用通用图例，但以下示例显示我遗漏了一些东西。

```
library(ggplot2)

input <- as.data.frame(matrix(runif(60),nrow=20,ncol=3))
colnames(input) <- c("A","B","C")

p <- ggplot(input,aes(A,B,size=C,color=C)) + geom_point() 
```

![在此处输入图像描述](../Images/f524d9311d64b10a5c7eb7f807e56788.png)

感谢 Arun 的评论提示了此编辑。因此，如果一个人只使用尺寸（而忘记了颜色），则会得到一个描绘三种尺寸的图例，但图中描绘了更多尺寸。

![在此处输入图像描述](../Images/22a3368f8956c850ecb5ac90ed1191d7.png)

所以我会追求类似的行为——一个显示公共变量的一些值并描述相应大小和颜色的图例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T19:22:17.617

颜色条无法合并，但普通图例可以，

```
p + guides(colour = guide_legend()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T21:02:50.710

我需要使标签的大小和颜色相同，并确保它使用与指南线相结合的相同信息。

```
p+geom_jitter(data=df, aes(x=x, y=y, color=value, size = value)) 
+scale_size_continuous(name = "Legend Name", breaks= c(.25, .50,.75), labels=c(".25",".50",".75"))+scale_colour_gradient(name = "Legend Name", breaks= c(.25, .50,.75), labels=c(".25", ".50",".75"))+ 
guides(colour = guide_legend()) 
```

# android - LinearLayout ImageView 调整所有图像宽度以适应

> ID：15188966
> 
> 赞同：7
> 
> 时间：2013-03-03T18:11:21.843
> 
> 标签：android, imageview, width, android-linearlayout

我有一个包含 3 个图像视图的水平线性布局。每个图像视图都包含相同的图像，即 200x200 像素。这是我的布局xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/image200" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/image200" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/image200" />

    </LinearLayout>

</RelativeLayout> 
```

这是它的样子：

![线性布局测试截图](../Images/6fb21c85a49afdb520190511836cde5a.png)

注意我假设从左边数第三个图像的大小是如何调整的，因为没有足够的空间来包含 3x 200 像素宽的图像。

我宁愿发生的事情不是只缩小最后一个图像，而是均匀调整所有三个图像的大小，以便它们都适合整个屏幕。如何设置布局以均匀地适合所有三个图像？

谢谢

更新 - 更改我的设置后，这里是这样的：

![更新](../Images/cf509eafaf94c95ca1b9bb48d2354cfc.png)

请注意，图像视图周围的*边框仍然是 200 像素高。*为什么会这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T18:14:10.123

为图像视图设置宽度和高度，`match_parent`为所有图像视图设置 layout_weight=1。同时设置属性`android:scaleType="fitXY"`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-21T09:00:51.270

这对我来说非常有效：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:adjustViewBounds="true"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <ImageView
        android:adjustViewBounds="true"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

    <ImageView
        android:adjustViewBounds="true"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"/>

</LinearLayout> 
```

布局宽度设置为 0dp 时，布局宽度就是图片。此处 LinearLayout 的布局宽度与父级匹配。所以它将占据整个宽度，并且根据图像的布局宽度，它们以重量的比例占据空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T18:14:01.963

使您的三个图像的宽度为 0dp

并将它们添加为 1 的 layout_weight

;)

```
<ImageView
            android:id="@+id/imageView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image200" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-07T02:53:55.550

@JanTacci 关于您的后续问题“但是，请注意，即使图像已缩小，实际布局高度仍为 200 像素。为什么会这样？”

我刚刚遇到了同样的问题，并通过将此属性添加到每个 ImageView 来修复它：

```
android:adjustViewBounds="true" 
```

# ruby-on-rails - railsinstaller for windows 7 with ruby > 1.9.3

> ID：15188968
> 
> 赞同：0
> 
> 时间：2013-03-03T18:11:25.227
> 
> 标签：ruby-on-rails, ruby, windows-7

是否可以在 ruby​​ 版本高于 1.9.3 的 Windows 7（64 位）上安装 rails？ [Rails 安装程序](http://railsinstaller.org/)似乎有点过时，它带有 ruby​​ 1.9.3-p125。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T15:08:56.200

2.2.2 版最近发布，补丁级别更高，为 1.9.3。[此外，您可以从Github](https://github.com/railsinstaller/railsinstaller-windows/releases/tag/3.0.0-alpha.2)获取带有 Ruby 2.0.0 的 RailsInstaller 3.0.0 的预发布版本。

埃文

# python - 如何安装以 .py 文件形式提供的 Python 模块？

> ID：15188969
> 
> 赞同：4
> 
> 时间：2013-03-03T18:11:27.857
> 
> 标签：python

我确实意识到这是一个愚蠢的问题，但我已经尝试了一个小时，但我无法做到正确。

因此，我有一个 Python 脚本，我想对其进行一些修改并作为 Python 初学者来玩。然而，在脚本的最开始，有这样的：

```
from priodict import priority_dict 
```

现在，我有一个`priodict.py`随脚本一起命名的文件。但是我如何使它对脚本可用，以便可以像这样包含它？

Python手册有关于安装模块的页面和页面，但它们似乎都指的是要放置在某些目录等中的“包”。当我只有.py文件时该怎么办？

我知道对此可能有一个平庸的一句话回应，但我很沮丧，而且我的时间很短，所以我决定采取简单的方法并询问堆栈溢出。

看来，如果我没有 priodict.py 文件，我会收到此错误：

```
Traceback (most recent call last):
  File "C:\Python27\scripts\dijksta.py", line 192, in <module>
    main()
  File "C:\Python27\scripts\dijksta.py", line 185, in main
    D, _ = dijkstra(G, 1, v)
  File "C:\Python27\scripts\dijksta.py", line 139, in dijkstra
    Q = priority_dict() # est.dist. of non-final vert.
NameError: global name 'priority_dict' is not defined 
```

如果我将文件放在与我的脚本相同的目录中，我会收到此错误：

```
Traceback (most recent call last):
  File "C:\Python27\scripts\dijksta.py", line 2, in <module>
    from priodict import priority_dict
ImportError: cannot import name priority_dict 
```

这些是有问题的文件：

[https://github.com/kqdtran/ADA1/tree/master/dijkstra](https://github.com/kqdtran/ADA1/tree/master/dijkstra)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:56:25.973

将文件放在同一目录中，这将使您开始。看来你已经想通了。如果您只有一个 .py 文件，那么这就是您通常期望做的事情。

如果您无法从模块中导入名称，通常意味着该名称在该模块中不存在。尝试：

```
import priodict
print dir(priodict) 
```

`priority_dict`上市了吗？如果没有，是否有类似名称的属性可能是您正在寻找的？可能只是给您的说明拼写错误，例如不需要 _。

如果它在导入行失败，则可能是模块代码本身存在错误，必须首先更正。你会得到一个错误，告诉你它大致在哪里。

# ruby-on-rails - 将 Devise Gem 与抛出 ActionController::RoutingError 的命名空间一起使用

> ID：15188971
> 
> 赞同：0
> 
> 时间：2013-03-03T18:11:42.293
> 
> 标签：ruby-on-rails, devise, namespaces, ruby-on-rails-3.2

好的，我已经看到了很多关于如何在您的应用程序中使用命名空间时让 Devise 工作的不同答案，但没有一个对我有用。

我将我的应用分成三个命名空间

Home（公共登录页面） Account（用户登录的个人资料/帐户） Admin（尚未编写的管理后台）

我还将所有部分拆分到`base`每个命名空间中的一个文件夹中。所以我的每个控制器都继承自`BaseController`which 继承自`ApplicationController`：

```
 module Account
      class UsersController < BaseController
      end
   end 
```

我`sessions_controller.rb`在帐户和家庭中创建了一个从设计会话控制器继承的帐户，如下所示：

```
module Account
  class SessionsController < BaseController < Devise::SessionsController
  end
end 
```

目标是在 Home 命名空间中有一个登录/注册表单，让用户登录到帐户命名空间中的用户控制器。

现在，当我单击以下生成的链接时：

`<%= link_to "register", new_user_registration_path %>`

我越来越

```
ActionController::RoutingError at /users/sign_up
uninitialized constant Account::RegistrationsController 
```

我的 routes.rb 文件如下所示：

```
 scope :module => "account" do  
        devise_for :users, :controllers => { :sessions => "account/sessions" }
        resource :users
      end

      scope :module => "home" do
        resources :home, :about, :jobs, :terms, :privacy, :android_availability, :about, :contact
      end

      get "home/index"
      root :to => 'home::home#index'
end 
```

主控制器使用主布局，帐户控制器使用应用程序布局。我`layout "home"`在 home 控制器中指定，但我没有`layout "application"`在帐户控制器中指定，因为 application 是 rails 查找的默认布局。

好的。我想我已经覆盖了我所有的基础。知道我在这里做错了什么吗？

谢谢！

编辑：

好的，我已经以与上述文件`registrations_controller.rb`相同的方式将`sessions_controller.rb`文件添加到帐户命名空间。

我还更新了`routes.rb`文件：

```
scope :module => "account" do  
    devise_for :users, :controllers => { 
      :sessions => "account/sessions",
      :registrations => "account/registrations" }
    resource :users
  end 
```

现在我遇到了一个我不明白的新错误。这里是：

```
NoMethodError at /users/sign_up
undefined method `action' for Account::RegistrationsController:Class 
```

它说未定义的方法“动作”在`(gem) actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb`其中没有任何意义。

具体来说就是说问题出在这里：

```
def dispatch(controller, action, env)
  controller.action(action).call(env)
end 
```

编辑2：

这是我的代码`registrations_controller.rb`

```
module Account
  class RegistrationsController < BaseController < Devise::RegistrationsController
  end
end 
```

编辑 3：

```
module Account
  class BaseController < ApplicationController
  end
end 
```

好的，上面是我的`base_controller.rb`，它只是继承自`ApplicationController`. 所有其他控制器都继承自`BaseController`. 因为我已将我的应用程序拆分为三个命名空间，所以 base_controller 用于告诉命名空间中的其他控制器，这些部分`base`位于其命名空间内命名的文件夹中。如[本 RailsCast所示](http://railscasts.com/episodes/269-template-inheritance?view=asciicast)

如果我不包含，我会收到一个丢失的部分错误，`BaseController`因为设计控制器找不到部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:01:53.440

阅读你的错误！:-)

对于初学者来说，看起来你需要定义一个`Account::RegistrationsController`，就像你做你的`Account::SessionsController`.

# python - Python 错误：X() 正好采用 1 个参数（给定 8 个）

> ID：15188972
> 
> 赞同：11
> 
> 时间：2013-03-03T18:11:53.357
> 
> 标签：python

我正在尝试构建一个匿名 FTP 扫描程序，但我在调用函数 X 时遇到错误，我将 X 定义为仅接收 1 个参数，即 IP 地址，如果我不使用循环并发送相同的代码，则相同的代码有效IP 一个一个。

错误是： X() 正好采用 1 个参数（给定 8 个）

```
from ftplib import FTP
import ipcalc
from threading import Thread

def X (ip):
    try:
        ftp = FTP(ip)
        x = ftp.login()
        if 'ogged' in  str(x):
            print '[+] Bingo ! we got a Anonymous FTP server IP: ' +ip
    except:
        return

def main ():
    global ip
    for ip in ipcalc.Network('10.0.2.0/24'):
        ip = str(ip)
        t =  Thread (target = X, args = ip)
        t.start()
main () 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-03T18:16:36.810

构造`Thread`对象时，`args`应该是一系列参数，但您传入的是字符串。这会导致 Python 遍历字符串并将每个字符视为参数。

您可以使用包含一个元素的元组：

```
t =  Thread (target = X, args = (ip,)) 
```

或列表：

```
t =  Thread (target = X, args = [ip]) 
```

# django - 模板中的 Django - 重组后的列表总数

> ID：15188975
> 
> 赞同：1
> 
> 时间：2013-03-03T18:12:11.467
> 
> 标签：django, templates

我在模板中使用 Django 根据类别字段重新组合多维列表。对于每个类别，我还需要来自同一列表的整数字段的总和。我已经阅读了许多关于此的问题，似乎我必须在模板呈现之前在视图中执行此操作。但是，这意味着我必须分别定义每个类别的总数，而我希望重组可以为我省去这个麻烦。有没有其他替代方法或其他更好的方法来做到这一点？

```
{% regroup shops|dictsort:"category" by category as category_list %}
{% for clist in category_list %}
# here should come the total per category
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:33:07.757

您可以在模型中创建函数，然后在模板中调用它。

```
Category(models.Model)
    ........

    def total(self):
        qs = Category.objects.filter(id=self).aggregate(Sum('amount'))
        sum = qs['amount__sum']
        if not sum:
            sum = 0.00
        return sum

{% regroup shops|dictsort:"category" by category as category_list %}
{% for clist in category_list %}
    {{clist}} - {{clist.total}}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:47:36.010

我想这会回答你的问题，[我如何在 django 模板中实现运行总计？](https://stackoverflow.com/questions/3921252/how-can-i-implement-a-running-total-in-django-template). 标题有点混乱，但我认为你可以在那里得到一些东西。

# android - 播放完声音后如何释放 MediaPlayer？

> ID：15188982
> 
> 赞同：6
> 
> 时间：2013-03-03T18:13:21.167
> 
> 标签：android, media-player, android-mediaplayer

我有一个类似应用程序的音板。即使用户单击另一个声音，我也不希望声音停止。但是，过了一会儿，就像 30 次点击（声音播放器）一样，它停止了。我认为它内存不足或 Android 不允许它创建超过 30 个实例。

我怎样才能更好地实现这一点，以便在声音完成后，媒体播放器实例被销毁？

```
import java.io.IOException;

public class AudioRecordTest {
    private static final String LOG_TAG = "AudioRecordTest";
    private static String mFileName = null;
    private MediaRecorder mRecorder = null;
    private MediaPlayer mPlayer = null;

    public void startPlaying(int fileName) {
        mPlayer = new MediaPlayer();
        try {
            mPlayer.setDataSource(mFileName + fileName + ".3gp");
            mPlayer.prepare();
            mPlayer.start();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void stopPlaying() {
        try {
            if (mPlayer != null) {
                mPlayer.release();
                mPlayer = null;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public MediaPlayer getPlayer() { 
        return mPlayer;
    }

    public void startRecording(int fileName) {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setOutputFile(mFileName + fileName + ".3gp");
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

        try {
            mRecorder.prepare();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
            e.printStackTrace();
        }

        try {
            mRecorder.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void stopRecording() {
        try {
            if (mRecorder != null) {
                mRecorder.stop();
                mRecorder.release();
                mRecorder = null;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public AudioRecordTest() {
        mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
        mFileName += "/aaa";

    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T18:26:36.040

尝试这个

```
 voicePlayer.getMediaPlayer().setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mediaPlayer) {
            mediaPlayer.stop();
            if (mediaPlayer != null) {
                mediaPlayer.killMediaPlayer();
            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:14:51.857

您可以使用`release(`) 的媒体播放器

```
if(!mediaPlayerObject.isPlaying()) 
   mediaPlayerObject.release(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-11T11:25:59.417

尝试这个：

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {
                mp.release();
            }
        }); 
```

或者：

```
mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {
                mediaPlayer.release();
                mediaPlayer = null;
            }
        }); 
```

# eclipse - 升级到 CDT 8.1.2 会导致 #include 上的语义错误

> ID：15188984
> 
> 赞同：1
> 
> 时间：2013-03-03T18:13:24.530
> 
> 标签：eclipse, android-ndk, eclipse-cdt

我尝试升级到 CDT 8.1.2 并且在语法检查预处理器之类的东西上遇到语义错误`#include <jni.h>`，`#include <string.h>`但程序仍然可以正常编译。我尝试取消选中`[ ] Allow heuristic resolution of include`. 路径似乎仍然正确。

谢天谢地，我在升级之前备份了我的 Eclipse 目录和项目。

不管发生什么，新版本的 CDT 似乎改变了工作空间，因此通过将 eclipse 恢复到以前的版本，受影响的工作空间仍然有效。我发现修复它的唯一方法是恢复 eclipse 和工作区。

我有一些工作要完成，但今晚晚些时候，我希望尝试逐步升级并尝试确定导致问题的组件。

还有人看到这个吗？找到解决方案了吗？

# php - php 文件中的硬编码凭据可防止加载静态文件

> ID：15188991
> 
> 赞同：0
> 
> 时间：2013-03-03T18:13:49.437
> 
> 标签：php

为了从头开始学习无框架的 php，我编写了一个 admin.php 文件，其中包含以下代码：

```
<?php

$not_auth_msg = "<h1>Not Authorized</h1>";
if($_GET['username'] == "admin") {
    $pass = md5($_GET['password']);
    if($pass != "21232f297a57a5a743894a0e4a801fc3") {
        exit($not_auth_msg);
    }
} else {
    exit($not_auth_msg);
}

?>

<!doctype html>
<html>
<head>
  <!-- link to bootstrap -->
  <!-- jquery script -->
  <!-- etc -->
</head>
..
..
..
</html> 
```

授权工作正常，但是 php 5.4 的内置服务器会为每个静态文件（引导程序、jquery 等）回复“PHP 通知：未定义索引：用户名...”，更糟糕的是 - 静态文件不加载！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:20:59.627

用

```
if(isset($_GET['username']) && $_GET['username'] == "admin") {
...

} 
```

这将解决你的问题。当您未提供`username`该密钥时`$_GET`，如果您的`php.ini`文件必须是错误通知，`ALL`则将显示/呈现通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:21:35.943

该通知是在您尝试访问数组中不存在的元素时引起的。在您的情况下， $_GET 超全局实际上没有“用户名”元素（意思是，您没有通过 url 传递用户名）。

在实际检查元素内容之前，您可以更改代码以测试元素是否存在：

```
if(array_key_exists('username',$_GET) && $_GET['username'] == "admin") {
  ...
} 
```

这是有效的，因为 PHP 使用快捷布尔评估 - 这意味着如果左半部分结果是，则不会评估该表达式的右侧`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:23:05.113

看到这条线

```
if($_GET['username'] == "admin") 
```

每当您有空/没有值时，`$_GET['username']`您都会收到此错误..您需要调整代码以便也处理这种情况，例如

```
if(!isset($_GET['username'])){

your code....to handle this index error
}else{

normal cose
} 
```

# php - Php：将平面数组转换为树状结构

> ID：15188993
> 
> 赞同：0
> 
> 时间：2013-03-03T18:13:58.680
> 
> 标签：php, xml, arrays, sorting

我需要数组转换方面的帮助。我有一个看起来像这样的平面数组：

```
Array
(
[0] =>  av_one_third
[1] =>  av_icon_box
[2] =>  /av_icon_box
[3] =>  av_button
[4] =>  av_icon_box
[5] =>  /av_icon_box
[6] =>  /av_one_third

) 
```

该数组的值实际上是来自类似 xml 的结构的标记。我现在需要的是将此数组转换为类似于以下结构的嵌套数组：

```
[0] => Array
    (
        [tag] => av_one_third
        [content] => Array
            (
                [1] => Array
                    (
                        [tag] => av_icon_box
                        [content] => Array
                            (
                            )

                    )

                [2] => Array
                    (
                        [tag] => av_button
                        [content] => Array
                            (
                            )

                    )  

                [3] => Array
                    (
                        [tag] => av_icon_box
                        [content] => Array
                            (
                            )

                    )

            )

    )
etc 
```

是否有捷径可寻？我的第一个想法是将数组转换为 xml 字符串并使用 phps 本机 XML 函数之一，但问题是自闭标签没有这样标记。在上面的例子中，av_button 标签没有结束标签，我尝试了 xml 解析函数。

一些附加要求： - 元素可以包含任意数量的子元素 - 最终数组必须保持正确的顺序

是否有任何智能数组排序功能可以轻松解决这个问题？将不胜感激任何提示！

最好的祝福 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:27:12.063

您的数组具有编码层次结构的典型平面结构。但前提是你修复了那里的错误。

然后它基本上可以像下面的 PHP 代码列表一样工作，包括告诉数据中错误在哪里的异常，以便您可以修复数据（您可以在此网站上找到类似的示例，例如查看[*如何转换系列中的链接问题将父子关系转化为层次树？*](https://stackoverflow.com/q/2915748/367456)）：

1.  初始化树数组中的根条目。在那里你可以添加孩子。

    ```
    $tree     = ['children' => []]; 
    ```

2.  创建一个指向树的指针数组，它的第一个元素（级别 0）指向树的根元素：

    ```
    $pointers = [&$tree]; 
    ```

3.  现在遍历数据中的每一行：

    ```
    foreach ($data as $index => $line) { 
    ```

4.  决定线路是否关闭并存储该决定结果：

    ```
    $close = '/' === $line[0]; 
    ```

5.  存储当前的指针计数：

    ```
    $count = count($pointers); 
    ```

6.  如果该行没有关闭，请打开一个新元素并继续：

    ```
    $pointers[$count]                   = ['tag' => $line, 'children' => []];
    $pointers[$count - 1]['children'][] = & $pointers[$count];
    continue; 
    ```

7.  如果该行确实关闭，请验证标记名是否匹配，如果匹配，则删除最后创建的指针：

    ```
    if ($count === 1) {
        throw new RuntimeException('Can not close on lowest level.');
    }

    $name = $pointers[$count - 1]['tag'];

    if ($name !== substr($line, 1)) {
        throw new RuntimeException(
            "Invalid closing element <$line> (line #$index) in <$name>"
        );
    }

    array_pop($pointers); 
    ```

8.  在按照概述的方式处理所有行之后，可以删除所有指针：

    ```
    unset($pointers); 
    ```

9.  结果是可以在根节点的第一个子节点中找到的数组。它可以分配给一个变量，然后可以删除不需要的引用：

    ```
    $result = &$tree['children'][0];
    unset($tree);
    print_r($result); 
    ```

如果数据正确，则示例性输出：

```
Array
(
    [tag] => av_one_third
    [children] => Array
        (
            [0] => Array
                (
                    [tag] => av_icon_box
                    [children] => Array
                        (
                        )
                )
            [1] => Array
                (
                    [tag] => av_button
                    [children] => Array
                        (
                        )
                )
            [2] => Array
                (
                    [tag] => av_icon_box
                    [children] => Array
                        (
                        )
                )
        )
) 
```

# gnuplot - gnuplot 将终端重置为默认输出

> ID：15188997
> 
> 赞同：5
> 
> 时间：2013-03-03T18:14:13.237
> 
> 标签：gnuplot

在 gnuplot 中，使用命令

```
set term pdf
set out 'filename.pdf'
plot sin(x) 
```

允许我将图像写入 pdf。这样做之后，我如何重置输出，以便`plot sin(x)`使用内置的 gnuplot 显示创建图像（因为它一开始就没有使用`set out`过）。

现在我只能通过重新启动 gnuplot 来实现这一点。该`reset`命令似乎没有帮助。谢谢大家！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T03:33:36.397

除了其他答案之外，您还可以执行以下操作：

```
set term pop
set output   #reset standard output stream 
```

通常，您可以使用以下方式保存当前正在使用的终端设置：

```
set term ... #what you want to save
set term push
set term ... #temporary terminal
set term pop #restore the terminal settings that you "pushed" 
```

但是，如中所述`help set terminal`：

> 该命令在恢复时`set term push`记住当前终端，包括其设置。`set term pop`这等效于`save term` and `load term`，但不访问文件系统。因此，它们可以用于实现终端打印后的平台独立恢复，例如。**gnuplot 启动后， `startup`会自动推送默认终端或来自文件的终端。**因此，可移植脚本可以依赖`set term pop`于在给定平台上恢复默认终端，除非已明确推送另一个终端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:48:53.767

假设您安装了 X11 版本的 gnuplot。将终端设置回 x11 并重置输出

```
set term x11
set out 
```