# StackOverflow 问答 13754000-13754999

# python - 使用 pyparsing 从具有特殊字符的字符串中解析列表

> ID：13754007
> 
> 赞同：4
> 
> 时间：2012-12-06T22:45:56.413
> 
> 标签：python, pyparsing

我想从可能包含特殊字符（例如 \ \n \r \n \t ）的字符串字段中解析一个列表，并展开多行。目前，我必须先解析字符串，清理它，然后在那个干净的字符串上应用列表语法。它工作正常，但只是想知道是否有更好的方法。

这就是我目前拥有的

```
str_ = QuotedString('"',escChar='\\',multiline=True)  #grammar for str
str_.setParseAction(lambda pr: pr[0].replace('\\n',' ')\
                        .replace('\\r', ' ')\
                        .replace('\r', ' ')\
                        .replace('\t', ' '))

list_G = delimitedList(Word(printables))('mlist') #grammar for list

def pa(st,locn,pr): return list_G.parseString(pr.mystr)
mylist = Group(str_('mystr').addParseAction(pa)) #read in the str then re-parse
G = Keyword("LIST") + mylist('thelist') + ';'    #grammar for the whole thing
s = 'LIST "one,two,three" ;' 
```

编辑：而不是 list_G 中的 Word(printables)，改为

```
var_grammar = Word(alphas+"_", alphanums + "_") #"_a,a2b_,.."
num_grammar = Regex(r"[+-]?\d+(:?\.\d*)?(:?[eE][+-]?\d+)?")('num')
list_G = delimitedList(var_grammar|num_grammar)('mlist') #grammar for list
G = Keyword("LIST") + '"' + mylist('thelist') + '"' + ';' 
```

迫使我进行上面替换的清理的原因`"\\n", "\\r" with ' '` 是因为我从一个字面上包含字符的文件中读取了字符串，`\n, \r`而这些字符不能被 var_name 或 num 解析（它们不可打印）

这是文件中（原始）字符串的示例：

```
LIST "one,two,
 three,
 \nfour,\rfive"; 
```

你对此有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:44:32.917

正如您在此处显示的那样，Pyparsing 非常容忍空白字符，所以我很惊讶这是一个问题。

*您确实遇到*的一个问题是您的定义`list_G`：

```
list_G = delimitedList(Word(printables))('mlist') #grammar for list 
```

我明白你在这里想要做什么，但你的列表元素表达式有一个关键问题。`delimitedList(expr)`是一个方便的快捷方式`expr + ZeroOrMore(Suppress(',') + expr)`，但您使用的列表元素表达式`expr`是`Word(printables)`，任何非空白字符的词组。不幸的是，这包括“，”，您的列表分隔符。当您将字符串 "one,two,three" 传递给此表达式时，`Word(printables)`将在查找分隔符之前解析整个内容：

```
>>> list_G = delimitedList(Word(printables))
>>> print (list_G.parseString("one,two,three"))
['one,two,three'] 
```

你需要一种方式来表达“我希望我的话是所有可打印的不是逗号的东西”。在旧版本的 pyparsing 中，您必须自己执行以下操作：

```
word_of_everything_except_a_comma = Word(''.join(c for c in printables if c != ',')) 
```

在 1.5.6 版本中，我`excludeChars`在 Word 中添加了一个参数来简化这一点。现在你可以写：

```
word_of_everything_except_a_comma = Word(printables, excludeChars=',') 
```

使用这样的词，您将得到一个正确的 3 元素列表：

```
>>> list_G = delimitedList(Word(printables, excludeChars=','))
>>> print (list_G.parseString("one,two,three"))
['one', 'two', 'three'] 
```

这可能是您一直在努力解决的问题，因为 pyparsing 会隐式跳过您要删除的空白字符：

```
>>> s = "one,  two\t\t,\n\n\t\t\t  three"
>>> print (s)
one,  two               ,

                          three
>>> print (list_G.parseString(s))
['one', 'two', 'three'] 
```

# variables - 我应该在 AfterClass (Java JUnit 4) 中取消静态变量吗？

> ID：13754008
> 
> 赞同：3
> 
> 时间：2012-12-06T22:45:58.343
> 
> 标签：variables, static, junit, null

我在`@BeforeClass`. 我应该将它们设置为 null in`@AfterClass`吗？这些是非 IO 相关对象。

例子：

```
public class ClassTest{
   private static String staticText;   
   @BeforeClass
   public static void setUp(){
      staticText="long text";
   }
//test methods

//Is this necessary
@AfterClass
public static void tearDown(){
   staticText=null;
   }    
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T23:12:51.347

**简短的回答：**

对于静态成员：对于 JUnit3 和 JUnit4，静态成员永远不符合垃圾回收条件，除非您显式取消它们的引用（例如在`@AfterClass`方法中）。

对于非静态成员：如果您使用的是 JUnit3，那么最好在您的`@After`方法中取消非静态成员变量。如果您将 JUnit4 与默认测试运行程序一起使用，那么这种做法是不必要的。

**长答案：**

*JUnit 为该类中存在的每个*测试方法创建一个单独的测试类实例。`tearDown()`JUnit3 会保留对所有这些实例的引用，直到测试套件完成执行，因此最好在您的方法中清理这些引用。（当然，由于静态变量的一个实例存在于它所属的类的所有实例中，这对于非静态变量更为重要。）

JUnit4 仍然具有为每个测试方法创建单独的测试类实例的行为，但只要您使用默认的测试运行器，那么它只保留对当前执行测试的测试类实例的引用属于。因此，即使您没有在方法中显式取消它们，*非静态*`tearDown()`成员变量也会被清除。

但是请注意，如果您使用自定义 JUnit4 测试运行器（通过`@RunWith`注释），则无法保证它将保留对测试类实例的引用多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:17:56.583

静态变量一直存在，直到 JVM 终止。如果有理由让它成为静态的（它被多个测试使用并且初始化成本很高）那么随意这样做，当你完成它们时清理它们。

对于非静态的，正如其他人所说，JUnit 将自行清理这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:18:45.490

好的测试不必自己清理。他们应该只准备数据。其他测试不应该依赖于这些数据。实际上，有时您需要关闭数据库连接或清理其他一些长期资源。然而，一些纯粹主义者会说在这种情况下它不再是单元测试。如果您使用设计不佳的遗留代码，有时您必须清理您使用的框架的一些静态变量（例如 spring SecurityContext）。通常可以重构这样的代码以避免这样的清理

# google-apps-script - Apps Script .getActivePage() 仅返回“主页”页面

> ID：13754013
> 
> 赞同：3
> 
> 时间：2012-12-06T22:46:22.727
> 
> 标签：google-apps-script

是否还有其他人对 SiteApps.getActivePage() 有问题？对我来说，它只返回主页，而不是活动页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:59:21.920

当您将已发布的小工具嵌入 Google 协作平台页面时，getActivePage 就会起作用。返回嵌入GAS Gadget的页面，否则返回null

这是一个示例代码，非常适合我在 Google 协作平台应用脚本小工具中使用。

```
function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.createLabel('Page name: '+SitesApp.getActivePage().getName()));
  app.add(app.createLabel('Url: '+SitesApp.getActivePage().getUrl()));
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:56:11.400

当直接将小工具嵌入网站页面时，这似乎可以按预期工作；但是，在复制页面时，它似乎失败了——也许这适合您的情况？

从其他页面复制的页面存在未决的应用程序脚本[问题 (572) ，其中提到：](https://code.google.com/p/google-apps-script-issues/issues/detail?can=2&q=&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&groupby=&sort=&id=572)

> 在小工具内部调用的 getActivePage() 返回站点的主页

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T05:56:49.287

每当您在页面上设置 HtmlContent() 时，就会出现问题，原始嵌入 HTML 代码被修改并且应用程序停止正常运行。然后，每当您 getActiveSite() 它时，它都会返回该站点的主页...

这真的很烦人，我对谷歌需要多长时间来解决这个问题感到非常失望......

# c# - Python 序列化 c# 反序列化

> ID：13754018
> 
> 赞同：3
> 
> 时间：2012-12-06T22:46:45.577
> 
> 标签：c#, python, serialization, marshalling

我有 python 服务器，它使用[`marshal`模块](http://docs.python.org/2/library/marshal.html)序列化一些字典。并将序列化消息发送到 c# 客户端套接字。我如何在客户端 (c#) 端反序列化此消息。由于执行速度的问题，我无法使用 IronPython。

或者您是否知道在 Python 和 c# 之间序列化/反序列化“消息”的其他方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:51:47.030

JSON呢？你可以为 C# 编写，甚至可能找到一个 de-Python-pickle-er，但是像 dict 这样的东西很容易用 JSON 表示，这是一个众所周知的、明确定义的标准，用于可靠、快速的序列化/反序列化库几乎存在于所有语言中。当然还有 XML，但 JSON 通常更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:50:59.500

`marshal`通常是特定于 Python 的。如果您想要跨语言支持，那么您应该使用[`json`](http://docs.python.org/2/library/json.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:28:19.650

[YAML](http://en.wikipedia.org/wiki/Yaml)支持以[多种语言](http://www.yaml.org/)提供，并支持多种数据类型[JSON](http://en.wikipedia.org/wiki/JavaScript_Object_Notation)语法是 YAML 1.2 版的子集，也享有广泛的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:59:42.757

作为 的替代方案`marshal`，“协议缓冲区”在 python 和 c# 中都有很好的支持。Google 提供了 python 实现，并且有多个 c# 实现。协议缓冲区提供出色的版本控制支持、丰富多样的跨平台实现和非常高效的序列化，非常适合快速二进制套接字使用。

# video - 水印视频源直播

> ID：13754019
> 
> 赞同：1
> 
> 时间：2012-12-06T22:46:56.083
> 
> 标签：video, live, watermark, directshow.net, ffdshow

我想为从例如网络摄像头拍摄的视频添加水印。

在正常设置中，您会看到这个流网络摄像头 -> 捕获软件

我想以编程方式做的是网络摄像头->水印->捕获软件

如何做到这一点？有没有这方面的框架？一个要求是不要捕获然后存储到磁盘，因为这是用于实时流。

另外，是否需要另一个假相机设备才能从处理后的水印输出信号中提取信号？

# jquery - jquery传递函数参数

> ID：13754022
> 
> 赞同：0
> 
> 时间：2012-12-06T22:47:30.973
> 
> 标签：jquery, function

我将以下内容用于 DOM 元素的双击/单击。

```
$(selector).doubletap(
     /** doubletap-dblclick callback */
     function(event){          
          var $this = $(event.currentTarget);
     },

     /** touch-click callback (touch) */
     function(event){
         doSingleClick(this)
     },
     /** doubletap-dblclick delay (default is 500 ms) */
     400
); 
```

我从上面调用的另一个函数：

```
 function doSingleClick(but) {
      var $but = $(but);

      if($but.closest("#domElementId").length < 1)
          return;

      //"I have more code here to handle the if statement"
 } 
```

doSingleClick 函数永远不会超过返回 b/c 的值，但永远不会正确定义。我的假设是我没有正确传递参数。我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:37:53.523

看起来你从这里提取了这段代码：

[http://appcropolis.com/implementing-doubletap-on-iphones-and-ipads/](http://appcropolis.com/implementing-doubletap-on-iphones-and-ipads/)

查看代码，您提供给 .doubletap() 的函数是在来自浏览器的事件回调上调用的，而没有 jQuery 选择器的好处。“这个”在：

```
 function(event){
     doSingleClick(this)
 }, 
```

可能是 Window 上下文，而不是您期望的元素。修复它的最简单方法是使用当前元素作为输入：

```
 function(event){
     doSingleClick(event.currentTarget)
 }, 
```

这就是双击/单击功能已经在使用 $this = $(event.currentTarget)

希望有帮助。

# javascript - Firefox 3.0.12 中的 Raphael JS 问题

> ID：13754025
> 
> 赞同：1
> 
> 时间：2012-12-06T22:47:45.197
> 
> 标签：javascript, raphael, firefox-3

我一直在使用 Raphael SVG/VML 库，网站声明它支持 Firefox 3.0+。

然而，我在使用最新版本的 Raphael 和 jQuery 1.8.3 时遇到了问题。

例如，我能够创建一张纸`var paper = Raphael('divID',500,500);`并在这张纸上创建形状`var rect1 = paper.rect(0,0,100,100);`

当我尝试获取此矩形的边界框时，就会出现问题。在控制台中我得到一个**this.join is not a function**

我在创建路径时也遇到了同样的问题。

从我所见，这似乎是 getBBox 函数或 pathToString 函数的问题。有没有人遇到过这个问题，有没有人知道我可以改变什么来解决这个问题？

编辑：我特别询问 3.0.12 的原因是我的客户别无选择，只能在该浏览器上运行，不幸的是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:33:50.550

问题出`clone`在 Raphael 库中的函数内部。此函数在旧版本的 Firefox 中无法正确克隆函数。一种解决方案是修改代码以返回函数而不克隆它们（就像使用简单的 JavaScript 类型一样）

因此，Raphael`clone`函数的最终代码将如下所示：

```
function clone(obj) {
    if (Object(obj) !== obj || typeof obj === 'function') {
        return obj;
    }
    var res = new obj.constructor;
    for (var key in obj) if (obj[has](key)) {
        res[key] = clone(obj[key]);
    }
    return res;
} 
```

我希望这不会破坏任何东西。

# middleman - 中间人 :relative_assets 与 :directory_indexes 的兼容性

> ID：13754037
> 
> 赞同：1
> 
> 时间：2012-12-06T22:48:53.720
> 
> 标签：middleman

我对 Middleman 3.0 有一些让我感到困惑的问题。我正在使用 and 构建我的网站`activate :relative_assets`，`activate :directory_indexes`构建器没有意识到该文件嵌套了一层，并为图像、javascript 文件、样式表等输出错误的相对路径。我感到困惑的是，这个问题显然是固定在这里：[https](https://github.com/middleman/middleman/issues/361) ://github.com/middleman/middleman/issues/361 。我使用命令安装了 Middleman，而且`gem install middleman`我刚刚运行了`gem update`，所以我认为我会拥有最新版本。有人知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:20:16.570

如果您激活 :directory_indexes 您需要让您的网站[在网络服务器下运行](http://middlemanapp.com/pretty-urls/)。

可能最简单的方法是使用（Apache）虚拟主机。

如果你使用 Apache，你也可以使用 mod rewrite 来重写 url accoding，但这可能有点困难。

您也可以使用`base`带有适当 href 的 -tag（如`http://localhost/yoursubfolder`），尽管在您的开发环境和例如您的实时服务器之间保持同步可能有点麻烦。

# objective-c - 将类 y 中类 x 的编程实例链接到类 x 的视图控制器

> ID：13754042
> 
> 赞同：0
> 
> 时间：2012-12-06T22:49:08.117
> 
> 标签：objective-c, ios

我有类`Compose`和`Haiku`，每个都连接到 IB 中的视图控制器。 `Haiku`被实例`Compose`化为`ghhaiku`。 `Haiku`有一个数组 ,`self.arrayOfHaiku`有 117 个成员。但在 中`Compose`，`self.ghhaiku.arrayOfHaiku`没有成员。

我认为问题在于我没有将`Haiku`具有 117 个成员数组的实例与`Haiku`created in的实例链接起来`Compose`。但是我该怎么做呢？

（我当然可能完全错了，问题可能出在别的地方，但这似乎很直观。）

有什么想法吗？

**编辑：**

`Haiku.m`包含以下代码：

```
-(void)viewDidLoad
{

[super viewDidLoad];

    [self.arrayOfHaiku addObjectsFromArray:userH];

    NSLog(@"%d",self.arrayOfHaiku.count); //This logs 117.

    [self goToNextHaiku];
} 
```

`Compose.h`包含该行`@property (strong, nonatomic) Haiku *ghhaiku;`

`Compose.m`包含以下代码：

```
@synthesize ghhaiku;

- (void)viewDidLoad
{
    [super viewDidLoad];
    //Lots of other code
    NSLog(@"%d",self.ghhaiku.arrayOfHaiku.count); //this logs 0.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:29:12.540

好的，你永远不会初始化 ghaiku，只是定义它。另外为什么haiku有一个viewDidLoad方法？基本上你需要做类似的事情：

```
 self.ghhaiku = [[Haiku alloc] initWithData:SOME_ARRAY]; 
```

在您的 Compose.m 中

仅供参考，如果`Haiku`只是一个模型类，则不应将其用作视图/视图控制器。就像一个 NSObject。然后做：

```
-(id)initWithData:(NSArray*)data{
self = [super init];
if(self){
    self.arrayOfHaiku = data;
}
return self;
} 
```

只要记住在你的`Haiku.h`

```
-(id)initWithData:(NSArray*)data; 
```

* * *

**首先阅读这篇** 文章好吧，我最初误解了你在做什么，但我认为你仍然应该制作一个`Haikus`单例类（我会更新上面的代码以反映稍后当我有更多时间时 - 或者你可以谷歌）然后只需调用`[Haikus sharedInstance].arrayOfHaikus`每个你的视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:36:19.333

你可以试试这个......

```
 //haiku.h

    //haiku.m
    -(NSArray *)initHaikuMembers
    {
        return([[NSArray alloc] initWithObjects.....]);
    }

    //compose.h

    //compose.m
    haiku *ghaiku = [[haiku alloc] init];
    NSArray *myHaikuArray = [ghaiku initHaikuMembers]; 
```

这样，您可以在 Compose 中多次实例化 Haiku 类，并在需要时随意初始化它们。如果您需要操作 myHaikuArray 中的数据，您可以让 Haiku 类完成所有工作。

# jquery - 使用 Jquery 过滤 Json 对象

> ID：13754044
> 
> 赞同：0
> 
> 时间：2012-12-06T22:49:12.333
> 
> 标签：jquery, json, .net-2.0

我正在研究 Asp.NET (2.0)。我有一个这样的json响应。

```
{
  "0": {
    "EMPLOYEE_CODE": "049",
    "EMPLOYEE_NAME": "Craig J Miller",
    "EMPLOYEE_CITY": "Tustin",
    "EMPLOYEE_STATE": "CA"
  },
  "1": {
    "EMPLOYEE_CODE": "050",
    "EMPLOYEE_NAME": "Stephen B",
    "EMPLOYEE_CITY": "FOLSOM",
    "EMPLOYEE_STATE": "CA"
  },
  "2": {
    "EMPLOYEE_CODE": "051",
    "EMPLOYEE_NAME": "Mithali Raj",
    "EMPLOYEE_CITY": "Glendale",
    "EMPLOYEE_STATE": "AZ"
  },
  "3": {
    "EMPLOYEE_CODE": "052",
    "EMPLOYEE_NAME": "Gordon Green",
    "EMPLOYEE_CITY": "Pheonix",
    "EMPLOYEE_STATE": "AZ"
  }
} 
```

现在我想过滤上面的 json 响应`EMPLOYEE_STATE`作为搜索条件。

我是 JSON 和 jQuery 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:47:20.917

你可以试试这个

```
function filter_by_employee_state(query, obj)
{
    var new_obj={}, total=0, query=query.toLowerCase();
    for(var i in obj)
    {
        var emp_st=obj[i].EMPLOYEE_STATE.toLowerCase();
        if(emp_st==query) { new_obj[i]=obj[i]; total++; }
    }
    if(total>0) return new_obj;
    return false;
}

// Filter the data object
var filtered_data=filter_by_employee_state('ca', data); 
```

[**一个例子在这里**](http://jsfiddle.net/DADPT/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:56:27.957

当归结为浏览器时，如果您使用 Jquery 的 get 或相关方法，它只会变成一个 json 对象。

如果您已经知道并且只想过滤数组，请查看： http: [//linqjs.codeplex.com](http://linqjs.codeplex.com)

尽管根据您的情况，在服务器上过滤它可能更可取。

# ios - 可能非常基础——如何组织静态应用数据

> ID：13754047
> 
> 赞同：0
> 
> 时间：2012-12-06T22:49:21.037
> 
> 标签：ios, text, plist

掌握 iOS 以便重新创建我为 android 编写的应用程序。基本上，用户从一个表格中选择一个文档标题列表，这会导致一个新屏幕将文档本身显示为滚动视图中的文本。这些是静态的，因此可以与应用程序捆绑在一起。在 android 版本中，我使用名为titles[] 和contents[] 的字符串数组保存在'values' 文件夹中的.xml 文件中，并在运行时使用getResources() 读取。当用户选择项目 n 时，它移动到下一个屏幕并在一对 textView 中显示标题[n] 和内容[n]。当时，将 20 或 30 个长文本文件读入一个字符串数组只是为了显示其中一个似乎效率低下，但它确实有效。问题是如何在 iOS 中最好地做到这一点。plist 文件似乎最接近以前的方法，但这并不 t 真的适合几千个字符的字符串。做这个的最好方式是什么？内容的标题列表和单独的文本文件？我错过了什么明显的东西？在此先感谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:17:44.790

除非我错过了，否则我看不到您的数据源是什么。无论如何，Apple 有一个您尝试镜像的数据模型的体面示例[TopSongs](http://developer.apple.com/library/ios/#samplecode/TopSongs/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008925-Intro-DontLinkElementID_2)，它提供了一种体面的方法来深入研究数据类型以获得更精细的数据。

您的部分问题似乎涉及在应用程序中静态存储数据。有许多不同的方法可以做到这一点，从转储 XML 文件到将其全部存储在 SQLLite db 中。就我个人而言，我认为我会使用这两种方法的混合，以及引用单个文件的数据库。希望有帮助。

# c# - Google Adwords API 调用通过 C# 下载数据

> ID：13754048
> 
> 赞同：0
> 
> 时间：2012-12-06T22:49:30.460
> 
> 标签：c#, google-ads-api

我正在开发一些 C# 项目以对**Adwords**进行 API 调用以下载数据。

我已经通过以下方式获得了访问令牌：

```
WebRequest webRequest = HttpWebRequest.Create("https://www.google.com/accounts/ClientLogin");
        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";

        string postParams =

            "accountType=" + HttpUtility.UrlEncode("GOOGLE") +
            "&Email=" + HttpUtility.UrlEncode("xxxx@xxxx.com") +
            "&Passwd=" + HttpUtility.UrlEncode("xxxx") +
            "&service=" + HttpUtility.UrlEncode("adwords") +
            "&source=" + HttpUtility.UrlEncode(string.Format("{0}-{1}-{2}", "sample1",
                "sample2", "1"));

        byte[] postBytes = Encoding.UTF8.GetBytes(postParams);
        webRequest.ContentLength = postBytes.Length;

        using (Stream strmReq = webRequest.GetRequestStream())
        {
            strmReq.Write(postBytes, 0, postBytes.Length);
        }

        string retVal = "";
        try
        {
            WebResponse response = webRequest.GetResponse();

            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            {
                string sResponse = reader.ReadToEnd();
                string[] splits = sResponse.Split('\n');
                foreach (string split in splits)
                {
                    string[] subsplits = split.Split('=');
                    if (subsplits.Length >= 2 && subsplits[0] == "Auth")
                    {
                        retVal = subsplits[1];
                    }
                }
            }
        }
        catch (WebException ex)
        {
            throw new ApplicationException("Could not generate auth token.", ex);
        } 
```

如果有人可以让我知道进行 API 调用以下载数据的下一步是什么，我将不胜感激。[https://developers.google.com/adwords/api/docs/guides/reporting](https://developers.google.com/adwords/api/docs/guides/reporting)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:39:41.693

除了@Jon 提到的关于使用客户端库的内容之外，您还应该查看下载的示例目录，特别是[报告示例](https://code.google.com/p/google-api-adwords-dotnet/source/browse/trunk/examples/adwords/csharp/v201209/Reporting/DownloadCriteriaReport.cs)，以及[报告定义的 XML 模式，以](https://adwords.google.com/api/adwords/reportdownload/v201209/reportDefinition.xsd)根据您的特定要求修改示例。

# javascript - 日历功能不会触发

> ID：13754049
> 
> 赞同：0
> 
> 时间：2012-12-06T22:49:40.683
> 
> 标签：javascript, html, css, triggers, calendar

我正在尝试使用 JavaScript 在图像上触发日历弹出窗口，但由于某种原因，它无法正常工作。有什么建议吗？

这是我的代码：

```
<input size="12" id="f_date1" class="fields"/>&nbsp;<a href="#" class="f_btn1" title="Select your date and time."><img src="Icons/calendar.png" alt="Calendar" width="16" height="16" border="0" /></a></td>

    <script type="text/javascript">//<![CDATA[
      Calendar.setup({
        inputField : "f_date1",
        trigger    : "f_btn1",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });
    //]]></script> 
```

CSS 和 JS 包含在标题中。

* * *

**更新**

我这样做了

```
<script type="text/javascript">//<![CDATA[
      Calendar.setup({
        inputField : "f_date10",
        trigger    : "f_btn10",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });

      Calendar.setup({
        inputField : "f_date11",
        trigger    : "f_btn11",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });

      Calendar.setup({
        inputField : "f_date12",
        trigger    : "f_btn12",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });

      Calendar.setup({
        inputField : "f_date13",
        trigger    : "f_btn13",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });

      Calendar.setup({
        inputField : "f_date14",
        trigger    : "f_btn14",
        onSelect   : function() { this.hide() },
        showTime   : 12,
        dateFormat : "%Y-%m-%d %I:%M %p"
      });

<script> 
```

但没有骰子。即使添加了 CSS 和 JS，它仍然拒绝触发......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:00:32.940

我猜这是[jsCalendar 插件](http://www.dynarch.com/projects/calendar/doc/)。
您的触发器：“ *f_btn1* ”应该是一个**id**属性，而不是锚 HTML 标记中的**类**。
像这样：

```
<a href="#" id="f_btn1" title="Select your date and time."> 
```

而不是这个：

```
<a href="#" class="f_btn1" title="Select your date and time."> 
```

此外，您不需要将*img*包装在*锚*标记中。在日历文档中，您阅读了有关“触发器”参数的信息：

```
trigger — an ID of a <button> element (in fact any element type) that should trigger the popup calendar (the calendar hooks on the “onclick” event). 
```

# android - 旋转设备时，Android WebView 不会改变方向

> ID：13754052
> 
> 赞同：1
> 
> 时间：2012-12-06T22:49:47.050
> 
> 标签：android, webview, orientation, local, assets

我想在旋转设备时启用方向。通常这会自动发生，但在这个本地来源的 web 视图中，它不会发生。它以纵向加载，但我希望它根据设备的倾斜方式改变方向。

我在 /assets 文件夹 adjectives.html

```
// In Activity

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    WebView wv = new WebView(this);
    setContentView(wv);
    wv.getSettings().setBuiltInZoomControls(true);
    wv.loadUrl("file:///android_asset/adjectives.html");

}

// In manifest
    <activity android:name=".WebViewActivity"
              android:configChanges="orientation|keyboardHidden">    
    </activity> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:57:38.797

如果您使用`android:configChanges`，则不会自动为您处理特定更改，您必须自己处理它们。

为此，您必须覆盖`onConfigurationChanged(Configuration newConfig)`并检查`newConfig`新`Configuration`的内容。如果更改与方向有关，则需要设置新的内容视图。

`orientation`最简单的方法是从中删除`android:configChanges`（除非您有特殊原因不这样做）并将您的布局 XML 文件放入`WebView`布局 XML 文件中，并将其用于`onCreate(...)`. 这将允许默认“自动”处理方向变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:46:52.153

您是否检查了设备上是否启用了旋转？

# android - Opengl es 2.0 自定义着色器低 fps (android)

> ID：13754055
> 
> 赞同：3
> 
> 时间：2012-12-06T22:49:58.943
> 
> 标签：android, performance, opengl-es-2.0, glsl, fragment-shader

我正在制作一个简单的应用程序/壁纸，它为背景图像添加了简单的水波纹效果。

我正在 HTC Desire (Android 2.2) 上进行测试。

我已经找到了关于如何完成并为 android [Adrian Boeing 实现它的解释：博客](http://adrianboeing.blogspot.com/2011/02/ripple-effect-in-webgl.html)。

现在的问题是性能非常低。如果我有静止图像（使用普通着色器），则 fps 约为 40-50fps。如果我添加计算 sinc 函数的部分，然后使用新计算的纹理 fps 值下降到 20fps。

问题是我想添加的不仅仅是 1 个涟漪，而且 fps 会按涟漪数下降 /2（ti 2 涟漪 = 10fps，3 涟漪 5 fps 等......）。

我是否糟糕地实现了这个着色器并且它有一些空间进行彻底优化，或者这样的效果是否以其他方式完成？

效果类似于 Android 上名为 Water 的默认动态壁纸（秋叶翻滚到下面荡漾的池塘）。

这是我的着色器的代码：

```
 private final String fragmentShaderCode = 
        "precision mediump float;" + 
        "uniform sampler2D uTexture;"+ 
        "varying vec2 vTexCoordinate;"+ 
        "uniform float mTime;"+ //time variable 
        "uniform float offX;"+//center of wave 
        "uniform float offY;"+//center of wave 
        "uniform float size;"+//size of wave (so you can make it smaller over time) 
        "void main() {" + 
        "        vec2 off2 = vec2(offX,offY);"+ 
        "        vec2 cPos = -1.0 + 2.0 * vTexCoordinate.xy;" + //bring coordinate to middle of screen 
        "        vec2 ofvec = cPos+off2;"+ //doda offset 
        "        float r = length(ofvec);"+ //length of vector 
        "        cPos = vTexCoordinate + (size)/(r*2.0)*sin(r*100.0-mTime); "+ //sinc function for wave simulation 
        "        gl_FragColor = texture2D(uTexture,cPos);" + //draw texture 
        "}"; 
```

注意：我添加此代码是为了便于阅读。使用多个触摸事件的代码，只对offX，offY使用vector，并在for循环中执行下面的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:48:34.213

片段着色器中的大量繁重计算严重影响性能。移动 OpenGL ES 设备优化的常见做法是将繁重的计算转移到顶点着色器。

In this case you will need to reconsider logic of shaders and modify geometry too. I propose to make a mesh with good enough tessellation to simulate water waves, and alter vertex positions to make ripple effect.

Alternatively, you can leave all logic within fragment shader but alter computation of UV offset using external baked texture with offset data. This way you will have the same quality of effect but with significantly improved performance. You have to store in separate texture baked data for UV deltas for given distances and read ready pre-computed value from this texture. All mobile devices GPUs has at least 2 texture samplers so additional `texture2D()` call is almost free.

To have an idea how it works, please read this article [http://prideout.net/blog/?p=56](http://prideout.net/blog/?p=56) It is about path deform, but you should take a look at the method of sampling certain pre-calculated data from texture.

# c# - DataGridView 与组合框列显示 System.Data.DataRowView 而不是 DisplayMember

> ID：13754057
> 
> 赞同：-1
> 
> 时间：2012-12-06T22:50:02.507
> 
> 标签：c#, c#-4.0, datagridview, datagridviewcombobox

我正在使用 C# 4.0 WinForms。我有一个 DataGridView，它的所有列都在设计器中设置。“房间”列是 DataGridViewComboBoxColumn 列。

所有单元格都显示正确的信息，包括房间列。但是，当我单击 Room 的 DropDown 时，列表中的项目会显示一定数量的行，这些行显示 System.Data.DataRowView 而不是 DisplayMember 属性的实际值。

我的代码如下所示：

```
DataTable dttRooms = GetDataTable();  //Returns rows with RoomID (GUID) and RoomType (string) columns
List<RoomType> roomType = new List<RoomType> { }; 
foreach (DataRow dr in dttRooms.Rows)
{
    roomType.Insert(roomType.Count, new RoomType { RoomID = Convert.ToString(dr["RoomID"]), RoomName = Convert.ToString(dr["RoomType"]) });
}

DataGridViewComboBoxColumn dgvc;
dgvc = (DataGridViewComboBoxColumn)dgvItems.Columns["Room"];
dgvc.HeaderText = "Room";
dgvc.DataPropertyName = "RoomID";
dgvc.DisplayMember = "RoomName";
dgvc.ValueMember = "RoomID";
dgvc.DataSource = roomType;

dgvItems.DataSource = dtForGridView; //dtForGridView contains a RoomID column with the GUID of the corresponding room. 
```

我已经定义了一个 RoomType 类，如下所示：

```
public class RoomType
{
    public string RoomID { get; set; }
    public string RoomName { get; set; }
} 
```

如果我更改数据库中某个项目的房间，它会按预期正确显示在 GridView 组合框列上。

我已经设置了列的 DisplayMember 和 ValueMember。但是当我下拉下拉菜单来更改值时，行数是正确的，但它们似乎忽略了它们的 DisplayMember 属性。我已经尝试了很长一段时间来弄清楚我做错了什么。我花了好几个小时在 SO 上查看所有类似的问题，并尝试了几乎所有的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:33:54.107

我将 Class 的名称和 RoomName 属性更改为 RoomType：

```
public class _RoomType
{
    public string RoomID { get; set; }
    public string RoomType { get; set; }
} 
```

我更改了我的代码，以便名称都匹配：

```
DataTable dttRooms = lda.RoomDetailsGet(SeriesID, JobID);
List<_RoomType> roomType = new List<_RoomType> { };
foreach (DataRow dr in dttRooms.Rows)
{
    roomType.Insert(roomType.Count, new _RoomType { RoomID = Convert.ToString(dr["RoomID"]), RoomType = Convert.ToString(dr["RoomType"]) });
}

DataGridViewComboBoxColumn dgvc;
dgvc = (DataGridViewComboBoxColumn)dgvItems.Columns["Room"];
dgvc.HeaderText = "Room";
dgvc.DataPropertyName = "RoomID";
dgvc.ValueMember = "RoomID";
dgvc.DisplayMember = "RoomType";
dgvc.DataSource = roomType;

dgvItems.DataSource = dtForGridView; 
```

突然，它按预期工作。我仍然很想知道为什么，但至少我的问题已经解决了。

# ruby-on-rails - 如何在一个表单中创建多个记录？

> ID：13754060
> 
> 赞同：1
> 
> 时间：2012-12-06T22:50:12.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有`Vendor`和`Product`模型。一个`vendor has_many products`，和一个`product belongs_to vendor`。

创建a`vendor`后，我想`products`在一个表单中添加多个。

我怎么做？

我查看了嵌套模型表单的 Railscast，但这并不是我想要做的。首先，他`_form`在模型的局部范围内工作`Survey`——我不一定想在这里做。

我要做的就是在`Product#new`视图上，它允许用户同时输入 1 个或多个 1 个产品。

是的，这些产品将属于供应商 - 但我不希望用户必须向`edit`供应商添加多个产品。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:55:17.940

看看茧 - [https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)

它允许您为您的产品添加和删除嵌套字段集

# javascript - 带有月份的 Javascript switch 语句

> ID：13754065
> 
> 赞同：0
> 
> 时间：2012-12-06T22:50:30.647
> 
> 标签：javascript

我有一个任务，用户在提示框中输入一个数字，然后月份就出来了。到目前为止，这是代码：

```
<script type="text/javascript">
var a = prompt("enter a month number please.");

var b = "";

    switch(a){
        case 1: b = "January";
            break;
        case 2: b = "February";
            break;
        case 3: b = "March";
            break;
        case 4: b = "April";
            break;
        case 5: b = "May";
            break;
        case 6: b = "June"; 
            break;
        case 7: b = "July";
            break;
        case 8: b = "August";
            break;
        case 9: b = "September";
            break;
        case 10: b = "October";
            break;
        case 11: b = "November";
            break;
        case 12: b = "December";
            break;
        }

if((a==12) || (a==1) || (a==2)){

    document.write(" It is " + a + ", which is in winter.")
}

if((a==3) || (a==4) || (a==5)){

    document.write(" It is " + a + ", which is in spring.")
}

if((a==6) || (a==7) || (a==8)){

    document.write(" It is " + a + ", which is in summer.")
}

if((a==9) || (a==10) || (a==11)){

    document.write(" It is " + a + ", which is in fall.")
}

</script> 
```

我的月不是输出。相反，数字是我的输出。似乎我的 switch 语句被忽略了，只做 if 语句。我迷失在我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T22:52:14.790

您正在使用包含数字的变量而不是包含字符串的变量。`b`在输出中使用：

```
document.write(" It is " + b + ", which is in winter."); 
```

* * *

您还可以将代码编写为：

```
var a = parseInt(prompt("enter a month number please."), 10);
var month = [
  "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"
];
var b = month[a - 1];
var season;
switch (a) {
  case 12:
  case 1:
  case 2: season = "winter"; break;
  case 3:
  case 4:
  case 5: season = "spring"; break;
  case 6:
  case 7:
  case 8: season = "summer"; break;
  case 9:
  case 10:
  case 11: season = "fall"; break;
}
document.write(" It is " + b + ", which is in " + season + "."); 
```

演示：http: [//jsfiddle.net/Guffa/ZuXmP/](http://jsfiddle.net/Guffa/ZuXmP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T22:52:15.877

`b`包含月份字符串而不是`a`例如

```
document.write(" It is " + b + ", which is in fall.") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:17:43.850

数学也很酷：

```
var a = prompt("enter a month number please.");
var months = [
  "December", "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November"
];
var seasons = ["winter", "spring", "summer", "fall"];
if (a == 12) a = 0;

document.write(" It is " + months[a] + ", which is in " + seasons[Math.floor(a/3)] + ".");​ 
```

或者你可以写：

```
var a = prompt("enter a month number please.") % 12; // december is now 0, each other month remains the same.
var months = [
  "December", "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November"
];
var seasons = ["winter", "spring", "summer", "fall"];

document.write(" It is " + months[a] + ", which is in " + seasons[Math.floor(a/3)] + ".");​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:52:59.763

> `document.write(" It is " + a + ", which is in winter.")`

您在 document.write 中使用了“a”而不是“b”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T22:59:09.840

效率更高：

```
months = [["January",0],["February",0],["March",1]]; // Too tired to finish this array.
season = ["winter","spring","summer","fall"];

var a = prompt("Enter a month number please.");

if(!a.isNaN)
{
document.write(" It is " + months[a][0]  + ", which is in "+season[months[a][1]] +".")
} 
```

莱昂

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T23:57:59.190

我尝试评论 Guffa 的答案，但由于我的排名较低，我不能。user1725798 试试这个。Prompt 返回一个字符串，您最初是在与一个数字进行比较。您需要解析字符串。

```
var a = parseInt(prompt("enter a month number please."));

if (!a) {
   return;
}

var month = [
  "January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"
];
var b = month[a - 1];
var season;
switch (a) {
    case 12:
    case 1:
    case 2: season = "winter"; break;
    case 3:
    case 4:
    case 5: season = "spring"; break;
    case 6:
    case 7:
    case 8: season = "summer"; break;
    case 9:
    case 10:
    case 11: season = "fall"; break;
}
document.write(" It is " + b + ", which is in " + season + "."); 
```

# google-apps-script - 有错误的下拉列表

> ID：13754069
> 
> 赞同：0
> 
> 时间：2012-12-06T22:50:47.543
> 
> 标签：google-apps-script

我有这个 UiApp，它在下拉列表中为用户提供两个不同的选项。当用户选择其中一个时，用户有两个选项，另一个 uiapp 会出现并显示一些信息，并且它有一个返回原始菜单的按钮。我遇到的问题是，当我做出选择时，我收到一个错误，上面写着“遇到错误：发生了意外错误。” 当我单击选项 1 和 2 上的返回按钮时也会发生同样的情况。这是 GAS 的错误，还是不应该存在的代码？

谢谢！

```
 function Menu(e) {
  var app = UiApp.createApplication().setTitle(" Title"); 
  var dropDownList = app.createListBox().setName('list').setId('list');
  var infoLabel = app.createLabel('Scroll around to select the service     desired').setId('infoLabel');
//addItems  
  dropDownList.addItem("Options");
  dropDownList.addItem("Option1");
  dropDownList.addItem("Option2");

  var handler = app.createServerClickHandler('changeMe');
  handler.addCallbackElement(dropDownList);  
  dropDownList.addChangeHandler(handler);
  app.add(dropDownList);
  app.add(infoLabel);
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.show(app);
  return app;
  }

  function changeMe(e) {
      if(e.parameter.list === 'Option1'){
        var app1 = UiApp.createApplication();
        var html1 = app1.add(app1.createHTML("<p><i>Hello you have selected Option  1</i>    </p>")).setHeight(800).setWidth(600);
        var button1 = app1.createButton('Go back').setId("button1");
        app1.add(button1);
        var handler2 = app1.createServerHandler('Menu');
        button1.addClickHandler(handler2); 
        var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
        spreadsheet.show(app1);
        return app1;
        }

  else if (e.parameter.list === 'Option2'){;
     var app2 = UiApp.createApplication();
     var html2 = app2.add(app2.createHTML("Hello You have selected Option2"));
     var button2 = app2.createButton('Go back').setId("button");
     app2.add(button2);
     var handler2 = app2.createServerHandler('Menu');
     button2.addClickHandler(handler2);                                                                  
     var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
     spreadsheet.show(app2);
     return app2;
     }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:37:17.170

尝试删除 3 个“return app”行。这似乎对我有用。show 方法会自动将其放在电子表格中。

# javascript - 修改底层 form.reset() 值

> ID：13754071
> 
> 赞同：7
> 
> 时间：2012-12-06T22:50:49.680
> 
> 标签：javascript, jquery, html, forms, reset

我正在使用`$('form-selector').get(0).reset()`将表单值重置为其原始页面加载状态。

编辑后，表单将通过提交`$.ajax()`，我将在我们的服务器上拥有新的“默认”值。表单元素仍会存在于 dom 中，用户可以再次提交更新。我想要“默认”（重置值）来反映我们服务器上的内容（忽略任何其他外部更新）。**是否可以更新** `form.reset()` **将每个表单元素更改为不刷新页面的基础值？**

跨浏览器支持会很好，但由于这是一个内部应用程序，只有谷歌浏览器就足够了。

# HTML

```
<form>
    <input type="text" value="foo" name="bar" />
    <input type="submit" value="Submit" />
    <Input type="reset" value="Reset" />
</form> 
```

# JAVASCRIPT

```
$(function(){
    $('form').submit(function() {
        // Omitting code that sends form values to the server

        // TODO: update underlying form.reset()
        // values to what's currently in each
        // form element.

        return false;
    });
}); 
```

## 更新

确认！我没有提到我正在寻找可以处理所有表单元素类型的东西。即`input[type=text], input[type=radio], input[type=checkbox], select, textarea`。

如果它也可以处理 HTML5 表单元素，那将是特别棒的......即`input[type=date], input[type=number], input[email], input[url], input[type=range], input[type=color]`，等等。

对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T23:05:08.160

如果您直接更改表单元素的属性，而不是使用该`.val()`方法，则新值将反映在表单重置上。您需要将文本字段与单选按钮、复选框等区别对待。

```
 $('input').attr('value', function() { return this.value });
    $('textarea').prop('innerHTML', function() { return this.value });                                              
    $(':checked').attr('checked', 'checked');                                              
    $(':selected').attr('selected', 'selected');
    $(':not(:checked)').removeAttr('checked');
    $(':not(:selected)').removeAttr('selected'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T23:09:57.853

像这样的东西：

```
$("#foo").prop("defaultValue", "bar"); 
```

正如 David Budiac 在他的评论中提到的，这不适用于选择元素。选择元素有一个名为[defaultSelected](http://msdn.microsoft.com/en-us/library/ie/ms533716%28v=vs.85%29.aspx)的单独属性。

[有关 defaultValue 属性的更多信息](http://msdn.microsoft.com/en-us/library/ie/ms533718%28v=vs.85%29.aspx)

我意识到这些链接指向 Microsoft 的网站，但它们似乎在几乎所有主流浏览器中都有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T23:05:52.543

Javascript 不知道重置值是什么，因此您必须在页面加载时定义它们或使用重置值创建隐藏字段。然后当你调用重置时，设置它们。

假设您在表单中的每个字段都有隐藏字段，例如文本框（您可以对下拉菜单和单选/选择执行类似的操作）

如果您有 2 个文本字段（txtfield1 和 txtfield2），您也将拥有它们的隐藏字段（分别称为 txtfield1-hdn 和 txtfield2-hdn）。

```
$('form-selector').get(0).reset(function() {
  $('form-selector').find('input').each(function(){
    $(this).val($($(this).attr('id') + '-hdn').val());
  });
}); 
```

如果您在文本字段 html 中有默认值，那么您可以这样做：

```
<input id="Text1" type="text" value="myValue" />

$('form-selector').get(0).reset(function() {
  $('form-selector').find('input').each(function(){
    $(this).val($(this).attr('value'));
  });
}); 
```

# php - jQuery：绑定到与特定变量匹配的请求

> ID：13754074
> 
> 赞同：0
> 
> 时间：2012-12-06T22:51:09.260
> 
> 标签：php, jquery, get, httpwebrequest

我正在尝试从正在发出的请求中访问一些数据：`?sm-xml-search=1`

我真的不知道“挂钩”或“绑定”这个请求的最佳方式......因为我似乎无法绑定到实际的点击事件。我试图绑定到一个事件只是没有响应。所以这就是为什么我需要响应实际的 HTTP 请求。

每次请求时如何提取此信息？

* * *

有没有办法从通话中提取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:13:55.333

您实际上可以使用

```
var pathname = window.location.pathname; 
```

之后，您可以使用正则表达式来获取您想要的值：

```
var match = /.*sm-xml-search=(.*)$/.exec(pathname);
var urlParam = match[1]; 
```

如果您的参数是最后一个，则正则表达式将返回匹配项。如果不是，您应该使用分隔符（如`&`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:21:28.967

`jQuery('div.result').live("click", function(event) {`

这完美无缺。

# sql-server - 通过 isql 实用程序从 linux 客户端登录 sql server（windows 身份验证帐户）

> ID：13754075
> 
> 赞同：1
> 
> 时间：2012-12-06T22:51:11.067
> 
> 标签：sql-server, linux, login, windows-authentication, unixodbc

我正在尝试从 Redhat 机器连接到在 Windows 上运行的 SQL Server。我可以通过“SQL Server”帐户登录服务器，但不能通过“Windows 身份验证”帐户登录。我尝试了各种技巧 - 但没有一个奏效：

```
# isql FBI_MS CORP\\Kapilv kapil
# isql FBI_MS 192.168.14.158\\CORP\\Kapilv kapil
# isql FBI_MS 'CORP\Kapilv' kapil 
```

我也用谷歌搜索并遇到了：[https ://askubuntu.com/questions/167491/connecting-ms-sql-using-freetds-and-unixodbc-isql-no-default-driver-specified](https://askubuntu.com/questions/167491/connecting-ms-sql-using-freetds-and-unixodbc-isql-no-default-driver-specified)

我有 unixODBC 驱动程序，但没有 freetds。我应该仍然能够在没有 freetds 的情况下连接。还是无法仅使用 unixODBC 驱动程序连接？

- 我按照 Benny Hill 的建议安装了 freetds 并遵循了配置 - 我仍然无法让它工作。

odbc.ini：

```
[FBI_MSW]
Description = FBI MS SQL Server database using freetds
Driver = freetds
Database = FBI
ServerName = 192.168.14.158
TDS_Version = 8.0 
```

odbcinst.ini (RedHat 安装 freetds 不自带`Set Up`文件

```
[freetds]
Description = MS SQL database access with Free TDS
Driver = /usr/local/freetds/lib/libtdsodbc.so
Setup =
TraceFile = /tmp/freetds.log
FileUsage = 1
UsageCount = 1 
```

现在，当我尝试连接时 - 我收到以下错误消息：

```
[root@localhost sqlncli-11.0.1790.0]# isql -v FBI_MSW CORP\\Kapilv kapil
[S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source
[01000][unixODBC][FreeTDS][SQL Server]Unknown host machine name.
[ISQL]ERROR: Could not SQLConnect 
```

我什至无法`SQL Server`通过 freetds 连接到帐户（如果没有 freetds 我可以） - 关于`Windows Authentication`帐户我能说什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:04:36.693

您收到的错误信息是什么？

最好确定一下，如果您可以访问 MS SQL 服务器，请尝试：（`telnet 192.168.14.158 1433`或它正在运行的端口）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:11:29.280

您将需要安装 FreeTDS。

查看[这个问题](https://stackoverflow.com/questions/13066716/freetds-not-using-its-config/13069820#13069820)和我在那里提交的答案以查看配置示例。

# c# - 线程并发数据库查询是否安全？

> ID：13754077
> 
> 赞同：4
> 
> 时间：2012-12-06T22:51:21.067
> 
> 标签：c#, sqlite, concurrency, thread-safety

我正在努力改进我为工作编写的这个程序。最初我很着急，他们不关心性能或其他任何事情。因此，我做出了一个可怕的决定：查询整个数据库（一个 SQLite 数据库），然后将结果存储在列表中以供我的函数使用。但是，我现在正在考虑让我的每个函数都线程化，并且让函数只查询它需要的数据库部分。有大约 25 个函数。我的问题是，这样做安全吗？另外，是否有可能有那么多并发连接？我只会从数据库中提取信息，从不插入或更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:42:15.053

SQLite 没有写并发，但它支持任意多个同时读的连接。只要确保每个线程都有自己的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:11:32.117

25 个同时连接不是一个聪明的主意。这是一个巨大的数字。

我通常为这个问题创建一个多层设计。我通过一种具有内部缓存的 ObjectFactory 类将所有请求发送到数据库。ObjectFactory 会将请求转发到 ConnectionPoolHandler 并将结果存储在其缓存中。此连接池处理程序使用 X 个同时连接，但将它们分派给多个线程。

但是，在应用此设计之前必须做一些说明。你首先要问自己以下两个问题：

*   您的应用程序是唯一可以访问此数据库的应用程序吗？
*   您的应用程序是唯一修改此数据库中数据的应用程序吗？

如果第一个问题是否定的，那么您可能会遇到锁定问题。如果您的第二个问题的回答是否定的，那么应用缓存将非常困难。您甚至可能不希望全部实现任何缓存。

如果您经常根据唯一引用（例如主键）请求对象，缓存尤其有趣。在这种情况下，您可以将最常用的对象存储在 Map 中。一个流行的缓存集合是“LRUMap”（“最近最少使用”地图）。这个集合的好处是它会自动将最常用的对象排列到顶部。同时，它具有最大尺寸，并自动从地图中删除很少使用的项目。

缓存的第二个优点是每个对象只存在一次。例如：

1.  从数据库中获取一个员工。
2.  ObjectFactory 将结果集转换为实际的对象实例
3.  ObjectFactory 立即将其存储在缓存中。
4.  稍后，使用 SQL "... where name like "John%" 语句获取了一堆员工。
5.  在将结果集转换为对象之前，ObjectFactory 首先检查这些记录的 ID 是否可能已经存储在缓存中。
6.  找到了匹配！啊哈，这个对象不需要重新创建。

将某个对象仅在内存中保存一次有几个优点。

最后但并非最不重要的一点是，在 Java 中有类似“弱引用”的东西。这些是实际上可以被垃圾收集器清理的引用。我不确定它是否存在于 C# 中以及它是如何被调用的。通过实现这一点，您甚至不必关心缓存对象的最大数量，您的垃圾收集器会处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:23:26.893

我向我描述的方式^([*])是让每个并发线程打开自己的数据库连接，因为每个连接一次只能处理一个查询或修改。然后，具有连接的线程组可以轻松地执行并发读取。如果您遇到许多并发写入导致过度阻塞或无法获取锁的严重问题，那么您将超过 SQLite 为您做的事情（并且应该考虑像 PostgreSQL 这样的基于服务器的数据库） .

请注意，如果这样更方便，您也可以让主线程打开工作线程的连接，但建议（为了您的理智，如果没有别的！）只实际*使用*来自一个线程的每个连接。

* * *

^([* 对于 SQLite 的正常构建。当然，可以在构建时将其关闭。])

# php - PHP - 如何找到要取消设置的自动增量数组 id

> ID：13754090
> 
> 赞同：0
> 
> 时间：2012-12-06T22:52:21.927
> 
> 标签：php, arrays, session, increment, unset

我正在使用表单在 Session 中创建多个数组。每次提交表单时，都会生成一个包含每个新数组的新 $_SESSION['item'][]。代码：

```
$newitem = array (
    'id' => $row_getshoppingcart['id'] ,
    'icon' => $row_getimages['icon'],
    'title' => $row_getimages['title'],
    'medium' => $row_getshoppingcart['medium'],
    'size' => $row_getshoppingcart['size'],
    'price' => $row_getshoppingcart['price'],
    'shipping' => $row_getshoppingcart['shipping']);

$_SESSION['item'][] = $newitem; 
```

根据用户提交表单的次数，可以有任意数量的项目数组。任何想法如何获取在会话变量中代替 [] 的数组键的值？我正在尝试创建从购物车中删除的选项，但无法弄清楚如何在会话中引用该特定数组以取消设置它。

我目前正在显示这些项目：

```
<?php foreach ( $_SESSION['item'] AS $item )
echo $item['title'];
echo $item['icon']; 
```

等等...

提前感谢您的宝贵时间。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:59:38.170

只需在你的 foreach 中指定一个索引名称

```
foreach ($_SESSION['item'] as $idx => $item) {
    var_dump($item);
    var_dump($_SESSION['item'][$idx]);
} 
```

var_dumps 将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:04:04.180

`foreach($_SESSION['item'] as $key => $value)`将使您能够将键和值分开，当然，还可以访问当前键所具有的值。

用一个例子来扩展它，考虑下面的代码：

```
<?php
$exArray = array("foo"=>"bar", "foo2"=>"bar2);

foreach($exArray as $arrKey => $arrValue):
    echo "The key ".$arrKey." has the value of ".$arrValue."<br />\n";
endforeach;
?> 
```

将输出：

`The key foo has the value of bar.`

`The key foo2 has the value of bar2.`

但是，以同样的方式，如果已知 $arrValue 变量包含一个数组，它将保留它的内容。要遍历第二个数组，您需要遍历另一个 foreach 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:00:43.880

```
$var = array_keys($arr);
$count = count($var);
$lastKey = $var[$count - 1]; 
```

那对你有用吗？

# css - Firefox 17 滚动错误

> ID：13754091
> 
> 赞同：4
> 
> 时间：2012-12-06T22:52:24.470
> 
> 标签：css, firefox, iframe

我有一个带有溢出的 div 以允许日历滚动。但在 FF 17 中，如果向上滚动，似乎会出现渲染问题。页面顶部只是在内部重复（附图片）。它会在几秒钟后自行纠正。

网络上的一些板建议在 about:config (gfx.direct2d.force-enabled layers.acceleration.force-enabled webgl.force-enabled) 中将其打开，这确实解决了问题，但并不是一个真正可行的选择对于使用网络应用程序的客户。

这个问题在这里[iframe 不会在 Firefox 17 中滚动](https://stackoverflow.com/questions/13687843/iframe-wont-scroll-in-firefox-17)似乎根本不滚动有问题，如此接近但不完全。

![看图片](../Images/1e59835fce6f8fb9d5bfb7883fe4cefa.png)

有没有其他人遇到过这个问题或对如何解决它有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:49:08.967

这可能是您的视频卡和 Firefox 的硬件加速设置的问题。我会去**工具 - > 选项**然后在**高级**面板，**常规**选项卡下，寻找这个区域：

![在此处输入图像描述](../Images/4c3bc2fdeef97b5e13db1fb5705e6515.png)

尝试打开或关闭它们，看看是否有帮助。

干杯!

# c - C函数返回错误值

> ID：13754093
> 
> 赞同：1
> 
> 时间：2012-12-06T22:52:34.517
> 
> 标签：c, return-value

```
float a, b;
float sa() { return a;};
int main() {
  a = 10;
  b = sa();
  printf("%f", b);
  return 0;
} 
```

这是我的代码的简化版本。我相信程序应该打印 10，但它给了我非常小的数字，比如 -65550，并不总是相同但非常相似。

我使用调试器在变量`a`返回之前检查了变量的值，它是 10，所以函数返回 10，但 b 设置为 -65550 之类的值。我不明白为什么会这样。

我会很感激一些情报。

提前致谢。

这是完整的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <time.h>

int dimensiuni, nrBitiSolutie, bitiPeDimensiune, gasitInbunatatire, nrRulari;
float limInf, limSup, precizie, valoareFunctie, minim, minimNou, T;
char solutie[100000];
float solutieReala[100];

void generateRandomSolution();
void bitesToFloat();
void rastrigin();
void rosenbrock();
float nextFirstFit();
float nextBestFit();

void main() {
    int k;
    T = 10;
    gasitInbunatatire = 1;
    srand ( time(NULL) );
    printf("Introduceti numarul de dimensiuni: ");
    scanf("%d", &dimensiuni);
    printf("Introduceti limita inferioara si cea superioara: ");
    scanf("%f%f", &limInf, &limSup);
    printf("Introduceti precizia: ");
    scanf("%f", &precizie);

    //calculam numarul de biti necesari ca sa reprezentam solutia
    nrBitiSolutie = dimensiuni * ceil(log(limSup-limInf * pow(10, precizie)))/log(2.0);
    bitiPeDimensiune = nrBitiSolutie/dimensiuni;

    //generam o solutie random
    generateRandomSolution();
    bitesToFloat();
    rastrigin();
    minim = valoareFunctie;

    printf("Pornim de la %f\n", minim);

    while( (nrRulari < 10000) && (T > 0.001)) {
        minimNou = sa(); //error occurs here. sa() returns about 200 but minimNou is set to -65550
        if (minimNou < minim) {
            printf("Minim nou: %f\n", minimNou);
            minim = minimNou;
            T *= 0.995;
        }
        nrRulari++;
    }
    printf("Minimul aproximat: %f\n", minim);
    system("pause");
}

void generateRandomSolution() {
    int l;
    for (l = 0; l < nrBitiSolutie; l++) solutie[l] = rand()%2;
}

void bitesToFloat() {
    int i, parcurse = 1, gasite = 0;
    int variabila = 0;
    float nr;
    for (i = 0; i < nrBitiSolutie; i++) {
        variabila = variabila<<1 | (int)solutie[i];
        if(parcurse == bitiPeDimensiune) {
            nr = (float)variabila / (float)pow(2, bitiPeDimensiune);
            nr *= limSup-limInf;
            nr += limInf;
            nr *= pow(10, precizie);
            nr = (int)nr;
            nr /= pow(10, precizie);
            parcurse = 0;
            solutieReala[gasite++] = nr;
            variabila = 0;
        }
        parcurse++;
    }
}

void rastrigin() {
    int i;
    valoareFunctie = 10 * dimensiuni;
    for (i = 0; i < dimensiuni; i++) {
        valoareFunctie += pow((float)solutieReala[i], 2) - 10 * (float)cos(2 * 3.14 * (float)solutieReala[i]);
    }
}

void rosenbrock() {
    int i;
    valoareFunctie = 0;
    for (i = 0; i < dimensiuni - 1; i++) {
        valoareFunctie += 100 * pow((solutieReala[i+1] - pow(solutieReala[i], 2)), 2) + pow((1-solutieReala[i]), 2);
    }
}

float sa() {
    int j;
    for (j = 0; j < nrBitiSolutie; j++) {
        solutie[j] = solutie[j] == 0 ? 1 : 0;
        bitesToFloat();
        rastrigin();
        if (valoareFunctie < minim) return valoareFunctie;
        else if ( (rand()/INT_MAX) < exp((minim - valoareFunctie)/T) )  
            return valoareFunctie;
        else solutie[j] = solutie[j] == 0 ? 1 : 0;
    }
    return minim;
} 
```

`error occurs here`我已经用注释标记了错误发生的位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:04:46.193

您错误地简化了代码。在您的简化中，您`sa()`在调用它之前定义了它。但是在您的完整程序中，您`sa()`在定义它之前调用它。在没有声明的情况下，假定函数返回`int`。由于您的函数实际上返回 a `float`，因此结果未定义。（在这种情况下，您将从浮点堆栈顶部读取一个垃圾值，然后浮点堆栈将下溢，事情从那里走下坡路。）

# c++ - 使用单色 QImage

> ID：13754099
> 
> 赞同：1
> 
> 时间：2012-12-06T22:53:08.440
> 
> 标签：c++, qt, opencv

我正在尝试从 QPixmap 中提取位掩码并将其传递给 OpenCV。我的位掩码是通过“绘画”操作创建的。

到目前为止，我的过程是：

1.  创建一个并`QPixmap,` `QPixmap::fill(QColor(0,0,0,0))`使用一个`QPainter``QPainter::setPen(QColor(255,0,0,255))``QPainter::drawPoint(mouse_event->pos()`

2.  当准备好提取位掩码`QPixmap::toImage()`时`QImage::createAlphaMask()`，它被记录为返回`QImage::Format_MonoLSB`

不过，我现在正式陷入困境。我在破译文档时遇到了麻烦：

> 存储在 QImage 中的每个像素都由一个整数表示。整数的大小因格式而异。QImage 支持由 Format 枚举描述的几种图像格式。
> 
> 单色图像使用 1 位索引存储到最多具有两种颜色的颜色表中。有两种不同类型的单色图像：大端（MSB 优先）或小端（LSB 优先）位顺序。
> 
> ...
> 
> createAlphaMask() 函数从该图像中的 alpha 缓冲区构建并返回一个 1-bpp 掩码...

还：

> QImage::Format_MonoLSB --- 2 --- 图像以每像素 1 位存储。字节首先与较低有效位 (LSB) 一起打包。

谁能帮我澄清如何将其转移到 cv::Mat 中。

另外，我是否应该读到这个，每个像素将是一个`unsigned char`或我们将存储 8 个像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:26:33.660

我已经成功地将单色 QImage 传输到 cv::Mat。我希望以下代码对其他人有帮助：

**重要编辑：**此代码存在重大错误。 **`bytesPerLine`在某些机器上是字节对齐和字对齐的。因此 width() 应该与 cur_byte 一起使用**

```
QImage mask; //Input from wherever
cv::Mat workspace;
if(!mask.isNull() && mask.depth() == 1)
{
    if(mask.width() != workspace.cols || mask.height() != workspace.rows)
        workspace.create(mask.height(), mask.width(), CV_8UC1);

    for(int i = 0; i < mask.height(); ++i)
    {
        unsigned char * cur_row = mask.scanLine(i);
        //for(int cur_byte = 0, j = 0; cur_byte < mask.bytesPerLine(); ++cur_byte) wrong
        for(int cur_byte = 0, j = 0; j < mask.width(); ++cur_byte)
        {
            unsigned char pixels = cur_row[cur_byte];
            for(int cur_bit = 0; cur_bit < 8; ++cur_bit, ++j)
            {
                if(pixels & 0x01) //Least Significant Bit
                    workspace.at<unsigned char>(i, j) = 0xff;
                else
                    workspace.at<unsigned char>(i, j) = 0x00;
                 pixels = pixels >> 1; //Least Significant Bit
            }
        }
     }
 } 
```

# python - 在这种情况下如何使用 MongoEngine 级联删除？

> ID：13754100
> 
> 赞同：0
> 
> 时间：2012-12-06T22:53:15.133
> 
> 标签：python, mongodb, mongoengine

我有这个简单的模型：

```
from mongoengine import *
from datetime import datetime

class Person(Document):
    firstname = StringField(required=True)

    @property
    def comments(self):
        return Comment.objects(author=self).all()

class Comment(Document):
    text = StringField(required=True)
    timestamp = DateTimeField(required=True, default=datetime.now())
    author = ReferenceField('Person', required=True, reverse_delete_rule=CASCADE)

class Program(Document):
    title = StringField(required=True)
    comments = ListField(ReferenceField('Comment'))

class Episode(Document):
    title = StringField(required=True)
    comments = ListField(ReferenceField('Comment')) 
```

如您所见，节目和剧集都可以有评论。最初，我试图嵌入评论，但我似乎遇到了一堵砖墙。所以我正在尝试将 Comments 作为 Document 类。我的问题是，我如何对其建模，以便：

1.  当一个人被删除时，他们的所有评论也会被删除
2.  当评论被删除（直接或间接）时，它会从其父级中删除
3.  当节目或剧集被删除时，评论对象也会被删除

我习惯于在 MongoDB（和 SQLa，就此而言）手动完成所有这些工作，但我是 MongoEngine 的新手，我有点挣扎。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:52:41.263

如果不编写应用程序代码来处理逻辑，并非所有这些都是可能的。我会编写信号来处理一些边缘情况。

The main issue you have is global updates / removes aren't handled - so you'd have to ensure that the api you write in the api is used, to ensure a clean database state.

# node.js - 在远程 URL 上重用 Supertest 测试

> ID：13754105
> 
> 赞同：22
> 
> 时间：2012-12-06T22:53:35.153
> 
> 标签：node.js, mocha.js, supertest

我在开发过程中使用[MochaJS](http://visionmedia.github.com/mocha/)和[SuperTest](https://github.com/visionmedia/supertest)来测试我的 API，我非常喜欢它。

但是，我还想在将代码推送到生产环境之前，将这些相同的测试用于远程测试我的登台服务器。

## 有没有办法通过远程 URL 或代理向远程 URL 提供请求？

这是我使用的测试示例

```
 request(app)
        .get('/api/photo/' + photo._id)
        .set(apiKeyName, apiKey)
        .end(function(err, res) {
            if (err) throw err;
            if (res.body._id !== photo._id) throw Error('No _id found');
            done();
        }); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-07T09:09:03.120

我不确定你是否可以使用超测来做到这一点。你绝对可以用[superagent](https://github.com/visionmedia/superagent)做到这一点。Supertest 建立在 superagent 之上。一个例子是：

```
var request = require('superagent');
var should = require('should');

var agent = request.agent();
var host = 'http://www.yourdomain.com'

describe('GET /', function() {
  it('should render the index page', function(done) {
    agent
      .get(host + '/')
      .end(function(err, res) {
        should.not.exist(err);
        res.should.have.status(200);
        done();
      })
  })
}) 
```

所以你不能直接使用你现有的测试。但它们非常相似。如果你添加

```
var app = require('../app.js'); 
```

在测试的顶部，您可以通过更改`host`变量轻松地在测试本地应用程序和远程服务器上的部署之间切换

```
var host = 'http://localhost:3000'; 
```

编辑：

[刚刚在docs#example](https://github.com/visionmedia/supertest#example)中找到了 supertest 的示例

```
request = request.bind(request, 'http://localhost:5555');  // add your url here

request.get('/').expect(200, function(err){
  console.log(err);
});

request.get('/').expect('heya', function(err){
  console.log(err);
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-11-13T03:31:16.903

您已经提到它，因为您的目标是远程 URL，只需将应用程序替换为您的远程服务器 URL

```
request('http://yourserverhere.com')
.get('/api/photo/' + photo._id)
.set(apiKeyName, apiKey)
.end(function(err, res) {
    if (err) throw err;
    if (res.body._id !== photo._id) throw Error('No _id found');
    done();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-14T13:39:31.433

其他答案对我不起作用。

他们使用`.end(function(err, res) {`这对于任何异步 http 调用都是一个问题，需要`.then`改用：

示例工作代码如下：

> 文件：\test\rest.test.js

```
let request = require("supertest");
var assert = require("assert");

describe("Run tests", () => {
  request = request("http://localhost:3001");        // line must be here, change URL to yours

  it("get", async () => {

    request
      .get("/")                                      // update path to yours
      .expect(200)
      .then((response) => {                          // must be .then, not .end
        assert(response.body.data !== undefined);
      })
      .catch((err) => {
        assert(err === undefined);
      });

  });

}); 
```

> 文件：\package.json

```
"devDependencies": {
  "supertest": "^6.1.3",
  "mocha": "^8.3.0",
},
"scripts": {
  "test": "mocha"
} 
```

> 安装并运行

```
npm i
npm test 
```

# c - C - 按字符数组字段对结构数组进行排序

> ID：13754107
> 
> 赞同：0
> 
> 时间：2012-12-06T22:53:42.100
> 
> 标签：c, arrays, struct, char, qsort

我目前正在研究使用 qsort 函数按结构中的特定字段对结构数组进行排序，但我可以使用一个起点。

这是我当前的结构数组：

```
/* database struct */
typedef struct node {
    char       name[MAX];
    char       lname[MAX];
    char       address[MAX];
    char       number[MAX];
}record_type;

/* global variables */
record_type record[100]; 
```

我希望能够按字母顺序（AZ）的“名称”字段对其进行排序。每个 char 数组中的所有条目都是小写的。我很难找到有关如何在线或在我拥有的 C 书中执行此操作的信息。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:59:35.253

根据 qsort 的签名。

```
void qsort ( void * base, size_t num, size_t size,
             int ( * compar ) ( const void *, const void * ) ); 
```

定义比较函数。

```
int compare_record_type(const void* a, const void* b) {
    return strncmp(((*record_type)a)->name, ((*record_type)b)->name, MAX)
} 
```

并像这样调用 qsort 。

```
qsort(record, 100, sizeof(record_type), compare_record_type) 
```

更多信息请访问[cplusplus.com](http://www.cplusplus.com/reference/cstdlib/qsort/)

# objective-c - 在 Objective-C 中维护代表不变量

> ID：13754110
> 
> 赞同：5
> 
> 时间：2012-12-06T22:53:45.157
> 
> 标签：objective-c, oop, error-handling, setter, invariants

我是 Objective-C 的新手，并试图弄清楚维护类的 rep 不变量的最佳方法是什么，因为异常并不是真正执行它们的适当方式。出现这种情况的一个很好的例子是在 Kochan 的*Objective-C 编程中*`Fraction`作为示例的类中，它具有这个 setter 方法：

 *```
-(void) setDenominator: (int) d {
    self.denominator = d;
} 
```

所以说你的代表不变要求的一部分`self.denominator != 0`。例如，在 Java 中，强制执行该不变量的最直接方法是抛出一个`IllegalArgumentException`if 0 被传递，但在 Objective-C 中这没有意义。另一种方法是添加一个`NSError**`指针参数来报告问题，但这似乎既是矫枉过正，又不适合抽象的性质——与数据库连接不同，我们不期望零分母分数在正常使用中出现。那么这里最干净的解决方案是什么？返回一个整数错误代码？还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:16:59.110

看看[这个答案](https://stackoverflow.com/a/4649224/846273)

> 在 Cocoa 和 iOS 程序员中，异常用于指示不可恢复的程序员错误。当框架抛出异常时，它表明框架检测到一个错误状态，该状态既不可恢复，而且内部状态现在未定义。

在这种情况下，这显然是一个非法的不可恢复状态，会导致除以零，因此提出例外是完全合法的

具体来说，您可以`NSInvalidArgumentException`按照其他人的建议提出 a 。

如果您想更深入地了解该主题，您应该查看[错误处理编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806-CH201-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:02:48.040

你可以使用[`NSAssert()`](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/Reference/reference.html#//apple_ref/doc/uid/20000055-SW14)：

```
- (void)setDenominator:(int)d
{
    NSAssert(d != 0, @"denominator cannot be 0");
    self.denominator = d;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:05:57.770

我不明白为什么你认为例外在这里是不合适的。除非有任何额外的限制，否则我只会提出 NSInvalidArgumentException。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T23:06:13.233

您可以引发`NSInvalidArgumentException`异常和/或放置一个`NSAssert`，后者将导致程序以调试模式退出，这很好，因此如果您滥用 api，您可以在开发中捕获它。

`[[NSException exceptionWithName:NSInvalidArgumentException reason:reason userInfo:nil] raise];`*

# java - 以月、周或天为单位查找年龄

> ID：13754115
> 
> 赞同：0
> 
> 时间：2012-12-06T22:54:22.437
> 
> 标签：java

我有一个小的java代码可以找到一个人的日期。它看起来像这样：

```
 Calendar now = Calendar.getInstance();
  Calendar dob = Calendar.getInstance();

  dob.setTime(birthDay); /*assume this is not null */

  int age = now.get(Calendar.YEAR) - dob.get(Calendar.YEAR);

  if (now.get(Calendar.DAY_OF_YEAR) < dob.get(Calendar.DAY_OF_YEAR)) 
  {
    age--;
  } 
```

现在，我想说如果这个人不到 1 岁，请找出这个人是多少个月。如果这个人不到 1 个月大，请找出这个人有多少周。如果这个人不到 1 周大，找出这个人有多少天。

伪代码：

```
if (age < 1)
{
    ///?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:00:23.537

`getTimeInMillis()`以毫秒为单位为您提供时间。使用该值，您可以简单地计算。一秒有多少毫秒，一分钟有多少毫秒，一个小时，一天，一个月等等。

以秒为单位的时间：var a = 毫秒 / 1000。以分钟为单位的时间：a / 60 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:26:23.050

就像是：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class TimeDiff {

    public static void main(String[] args) throws ParseException {
        Date now = new Date();
        System.out.println(now);
        Date birthDate = new SimpleDateFormat("dd-MM-yyyy").parse("7-12-1983");
        System.out.println(birthDate);

        Date age = new Date(now.getTime() - birthDate.getTime());
        Calendar instance = Calendar.getInstance();
        instance.setTime(age);
        instance.add(Calendar.YEAR, -1970);
        SimpleDateFormat sdf = new SimpleDateFormat("d-W-MM-yyyy");
        System.out.println(sdf.format(instance.getTime()));
    }

} 
```

# python - ubuntu下安装pycairo

> ID：13754118
> 
> 赞同：3
> 
> 时间：2012-12-06T22:54:35.923
> 
> 标签：python, cairo, pycairo

出于某种原因，我无法让 python 找到 cairo。

当我做 ./waf 配置时，我得到了

```
Setting top to                           : /home/user/pycairo/py2cairo-1.10.0
Setting out to                           : /home/user/pycairo/py2cairo-1.10.0/build_directory
./configure()
Checking for 'gcc' (c compiler)          : ok
Checking for program python              : /usr/bin/python
Checking for python version              : (2, 7, 2, 'final', 0)
Checking for library python2.7           : yes
Checking for program python2.7-config    : /usr/bin/python2.7-config
Checking for header Python.h             : yes
Checking for program pkg-config          : /usr/bin/pkg-config
Checking for 'cairo' >= 1.10.0           : yes
Configuration:
PREFIX                                   : /usr/local
LIBDIR                                   : /usr/local/lib 
```

所以接下来我运行了./waf install。

试过了

```
import cairo
ImportError: No module named cairo 
```

现在我很困惑下一步该做什么。我检查了 /usr/local/lib/python2.7/site-packages 它在那里，但那是那里唯一的包。我还注意到“dist-packages”，我认为这是它应该去的地方？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T23:12:32.610

使用完全支持*Ubuntu的**打包*版本有什么问题？

 *> [http://packages.ubuntu.com/python-cairo](http://packages.ubuntu.com/python-cairo)
> 
> Cairo 矢量图形库的 Python 绑定
> 
> [http://packages.ubuntu.com/python-gi-cairo](http://packages.ubuntu.com/python-gi-cairo)
> 
> GObject 库的 Python Cairo 绑定

使用 Cairo 的“最新”方式应该是通过 gobject introspection（第二个包）：

```
from gi.repository import cairo 
```

它主要使用来自 GI 存储库的自动生成的 API，该 API 在各种编程语言中都是一致的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-14T10:41:52.183

我喜欢推荐它的基于 cffi 的版本，它看起来更常见，至少可以从 apt-get（或 apt）安装在 Ubuntu 17.10 上

```
sudo apt-get install python-cairocffi python3-cairocffi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-15T06:23:28.253

在 Ubuntu 14.04 中，我这样做了：

```
cd /home/username/Programming/Repositories/
sudo git clone git://git.cairographics.org/git/pycairo
sudo apt-get install libcairo2-dev libjpeg-dev  libgif-dev
cd pycairo
sudo python3 setup.py install 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-15T20:44:11.433

查看此链接，所有说明都[在此处](https://github.com/atizo/pycairo/blob/5ad4300e71fe977ad5ca3d911e05b340b108de6e/INSTALL)给出。

```
git clone https://github.com/atizo/pycairo/
cd pycairo 
run python setup.py install 
```

在此之后，您将能够在 python 中导入 cairo

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-13T23:08:58.930

转到此[网址](https://weasyprint.readthedocs.io/en/stable/install.html#windows)了解更多信息或：

**Debian / Ubuntu**

```
sudo apt-get install build-essential python3-dev python3-pip python3-setuptools python3-wheel python3-cffi libcairo2 libpango-1.0-0 libpangocairo-1.0-0 libgdk-pixbuf2.0-0 libffi-dev shared-mime-info 
```

**苹果系统**

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

**视窗**

尊敬的 Windows 用户，请仔细按照以下[步骤操作。](https://weasyprint.readthedocs.io/en/stable/install.html#windows)*

# emacs - 删除带有特定单词的行

> ID：13754129
> 
> 赞同：2
> 
> 时间：2012-12-06T22:56:09.827
> 
> 标签：emacs

我有一个包含多行的文本文件，例如：

```
amanda: foo
robert: bla
amanda: bar
peter: da 
```

我想删除所有带有`amanda`. 我`ctrl-s`单独使用和杀死每一行。是否可以一次删除所有行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T23:10:41.457

`M-x delete-matching-lines`. 可以使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:11:11.627

一种方法是与空字符串`query-replace-regexp`的正则表达式一起使用。`^.*amanda.*$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-07T14:49:23.330

尽管[@Marcos 的答案](https://stackoverflow.com/a/13754309/596361)是惯用的（您应该使用它），但让我们探索其他变体。假设您有一个文本缓冲区，并且您想删除其中包含的一行`li`：

```
Vladimir
Ilich
Ulyanov 
```

请记住，这`^`匹配`$`正则表达式中的行首和行尾。`$`不会触及行后的换行符，因此根据[@ataylor的回答](https://stackoverflow.com/a/13754316/596361)`^.*li.*$`，用正则表达式替换会产生一个空行：

```
Vladimir

Ulyanov 
```

`^`由于某种原因，在正则表达式之前和之后是不可能匹配`$`的，因此`\s-^.*li.*$`也`^.*li.*$\s-`不会起作用。请注意，`\s-`匹配任何空白字符（即空格、制表符、换行符和回车符），因此直观上正则表达式也应该删除换行符，因为换行符是 . 之前`^`或之后唯一可能的空白字符`$`。要完全匹配换行符，您应该逐字输入，`C-q C-j`默认情况下。Emacs 经常将换行符用单独的字体颜色表示为`^J`，它不是 and 的序列`^`，`J`而是单个字符，请注意。

因此，要删除包含 的行，您可以在 string 上`li`运行命令，其中是换行符：`query-replace-regexp``^.*li.*^J``^J`

```
Vladimir
Ulyanov 
```

# php - JPGraph PieGraph SetMargin 不起作用

> ID：13754130
> 
> 赞同：1
> 
> 时间：2012-12-06T22:56:13.740
> 
> 标签：php, jpgraph

我正在尝试使用 JPGraph 制作一个非常简单的饼图，但 SetMargin 对 PieGraph 根本不起作用。我什至尝试过使用 JPGraph 网站上的示例，并且更改示例中的边距并没有做任何事情。

这是我正在使用的非常简单的示例

```
$graph = new PieGraph(300,400);
$p1 = new PiePlot(array(20,50,75,50));
$graph->Add($p1);
$graph->SetMargin(10,10,1,100);
$graph->Stroke(); 
```

无论我将边距设置为什么，都没有任何变化。我已经阅读了条形图或折线图，您可能需要禁用主题，但甚至添加

```
$graph->graph_theme = null; 
```

什么也没做。

有谁能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T19:41:45.693

我使用了以下内容：

```
$pieplot->SetSize(0.3); 
```

也许，它不适用于 3d 饼图。我在常规饼图中设置了大小，然后更改了图形的类型。

此外，您可以更改中心位置：

```
$pieplot->SetCenter(0.5, 0.4); 
```

# ruby - activerecord 添加 NULL 作为 'id' 字段？

> ID：13754132
> 
> 赞同：0
> 
> 时间：2012-12-06T22:56:19.667
> 
> 标签：ruby, activerecord, sinatra

我正在通过以下方式创建用户：

```
user = User.create attrs 
```

基本上，它通过添加一个值为 NULL 的“id”字段搞砸了，我猜它的值为 0。所以在第一个用户之后，我收到一个错误，即 id 必须是唯一的。我可以确认 attrs 哈希不包含“id”字段。

这是生成的 SQL：

```
INSERT INTO `users` (`birthday`, `created_at`, `device_token`, `device_type`, `email`, `fb_id`, `first_name`, `gender`, `last_name`, `location`, `rstatus`, `updated_at`) VALUES ('1992-02-28 00:00:00', '2012-12-06 17:43:43', NULL, 'x86_64', 'adfas023@gmail.com', '12593646569', 'Test', 'male', 'Once', Test, 'Single', '2012-12-06 17:43:43') 
```

这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:05:31.670

您的`id`列应该是自动递增的，并且您的迁移通常会确保这样做。如果您不能/不使用迁移，请手动修复它。

# c - C结构类型定义中无用的变量名

> ID：13754135
> 
> 赞同：0
> 
> 时间：2012-12-06T22:56:22.497
> 
> 标签：c, struct, linked-list

我正在用 C 实现一个链表。这是我制作的一个结构，它表示链表：

```
typedef struct llist {
  struct lnode* head; /* Head pointer either points to a node with data or NULL */
  struct lnode* tail; /* Tail pointer either points to a node with data or NULL */
  unsigned int size; /* Size of the linked list */
} list; 
```

“llist”不是基本上没用吗。当客户使用这个库并创建一个新的链表时，他将有以下声明：

```
list myList; 
```

所以在左大括号之前输入 llist 实际上是没有用的，对吧？下面的代码基本上做同样的工作：

```
typedef struct {
  struct lnode* head; /* Head pointer either points to a node with data or NULL */
  struct lnode* tail; /* Tail pointer either points to a node with data or NULL */
  unsigned int size; /* Size of the linked list */
} list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:06:31.013

如果要在声明中引用它，则需要为结构命名。

```
typedef struct snode {
    struct snode* next;
    struct snode* prev;
    int id;
} node; 
```

但是，如果您不引用其中的结构，则无需为其命名。

* * *

**编辑**

请注意，`typedef`is 和`struct`are C 中的两个不同语句。

`struct`用于创建*复杂*类型：

```
struct snode {
    struct snode* next;
    struct snode* prev;
    int id;
}; 
```

读起来像是*创建一个名为的结构，该结构`snode`存储对自身 ( `next`and `prev`) 和 an `int`( `id`)*的两个引用。

并且`typedef`用于制作类型*别名*：

```
typedef struct snode node; 
```

读起来像是为*被调用**的类型别名`struct snode``node`*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:01:33.973

*在那种*特殊情况下它是没有用的，但是，如果你想在结构本身*内*有一个指向该结构的指针，那就需要它了。

这是因为结构在左大括号处是已知的，而 typedef 直到最后的分号才知道（简单，但在这里已经足够好了）。

所以你需要它来做类似的事情：

```
typedef struct sNode {  // structure can be used now
    int payload;
    struct sNode *next; // cannot use typedef yet
} tNode;                // typedef can be used now 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T22:59:11.933

是的，你是对的。除了 typedef 之外，显式命名结构只是一个习惯或约定问题。

请注意，无论哪种方式都几乎没有成本，因为`llist`它不是变量并且不占用内存。`i`这就像命名变量或- 编译形式之间的区别`index`一样，但一个可能比另一个更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T23:35:25.917

您可以扭转这一点：不是结构标签，而是整个 typedef 是多余的。

```
struct snode {
    struct snode* next;
    struct snode* prev;
    int id;
    }; 
```

现在您可以声明一个指针：

```
struct snode *ptr; 
```

您甚至可以声明它们的数组：

```
struct snode mynodes[10]; 
```

您必须输入 struct 关键字，但这不会伤害编译器或人类读者（看看那个语法突出显示！）。

*您甚至可以使用不完整的类型*声明一个指向未知类型的指针（在编译时）：

```
struct xnode *xptr=NULL; 
```

当您想为某个库创建 API 时，这将派上用场，而调用者不知道该库的实际实现：

```
 struct gizmo *open_gizmo(char *path, int flags);
 int fiddle_with_gizmo(struct gizmo *ptr, int opcode, ...); 
```

等等。typedef 将强制头文件将其所有内部内容“广播”给调用者，即使这不是必需的。

# .htaccess - 如果文件不存在，RewriteRule 不起作用

> ID：13754139
> 
> 赞同：1
> 
> 时间：2012-12-06T22:56:35.023
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 文件中有一个 RewriteRule，真的很简单， `RewriteRule ^(.*)/styles/thumb-75/(.*) $1/styles/thumb-150/$2` 但是如果“thumb-150”文件存在，它只会重定向用户。但我想始终将用户重定向到那里，因为文件将根据请求创建。是否可以为规则设置任何选项，以便它不检查目标文件是否存在？

# java - GWT - MVP 事件总线。创建多个处理程序

> ID：13754142
> 
> 赞同：3
> 
> 时间：2012-12-06T22:56:39.810
> 
> 标签：java, gwt, mvp, event-bus

我正在使用我继承的大型应用程序，并且遇到了一些最佳实践问题。

每次用户导航到我们的客户编辑页面时，都会创建一个新的演示者，并设置一个视图。有一个用于客户编辑的主演示者和一个主视图。主视图中也有由主演示者的子演示者使用的子视图。在子演示者中，我在事件总线上注册事件处理程序。

我遇到的问题是，当第二次导航到联系人编辑器时，会再次创建演示者，并再次注册这些事件。现在，当一个事件发生时，它会被处理两次，每个演示者实例一次。

演示者不受变量的约束，但子视图由主视图引用。难道是视图中的这个引用阻止了事件处理程序被删除？我的印象是，如果该对象被垃圾收集，事件处理程序将被删除。如果不是这种情况，我是否应该从事件总线中注销这些事件处理程序？

更新：演示者没有被垃圾收集。如果我可以修改代码以在不再需要这些演示者时删除对这些演示者的所有引用，它们是否会被收集，因此事件处理程序是否会被删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:28:07.947

这`ResettableEventBus`是专门为此设计的 - 不是给 Presenter 一个全局事件总线，而是将该事件总线包装在 Resettable 版本中。然后，当该演示者关闭时，给它事件总线的人将重置它，从而清除它可能添加的所有处理程序。

这就是如何管理 GWT 的 Activity/Place 框架中的活动以防止它们泄漏。

另一种选择 - 给每个 Presenter 一个类似 'stop()' 或 'release()' 的方法，表明它是最重要的，它应该在自己之后清理 - 取消正在进行的 RPC 调用，删除对话框，取消事件处理程序。和上面一样，Activity api 有一个方法来指示它即将停止，并且它已经停止并且应该清理。

提供这两者可以很容易地避免在全局事件总线上出错，并且仍然为更细粒度的问题（长时间运行的 RPC 调用）提供了一个挂钩，但问题可以通过任何一种解决方案来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:49:23.493

事件处理程序是独立的对象实例，它们针对 EventBus 内的某种集合进行设置和存储。您的演示者只是创建它们并将它们传递给 EventBus，因此在演示者的生命周期之外仍然会引用处理程序（这就是它们继续运行的原因）。演示者可能没有被垃圾收集，因为处理程序可能仍然引用它们或它们的字段。

每次创建新的演示者时都会再次添加处理程序，因此解决方案是在实例化新的演示者之前清除现有的处理程序，或者跟踪它们而不是在已经添加新的处理程序时添加.

我采取的方法是重用屏幕级别的 View/Presenter 实例并在重新进入时重置它们的状态。这也有助于提高性能。演示者还跟踪他们添加到 EventBus 的所有处理程序的 HandlerRegistration 实例。

我不知道 Colin 提到的 ResettableEventBus，但这听起来也是一个很好的解决方案。

# c# - 与 RichTextBox 一起使用时，ApplyPropertyValue() 是怎么回事

> ID：13754145
> 
> 赞同：2
> 
> 时间：2012-12-06T22:56:58.173
> 
> 标签：c#, wpf, .net-4.0

显然，当我`ApplyPropertyValue()`在 a 上使用该功能时`RichTextBox`，会`Selection.Select`停止正常工作。我有一个 RichTextBox 填充了一些文本。

```
string selectText(int index, int length)
        {
            TextRange textRange = new TextRange(TB.Document.ContentStart, TB.Document.ContentEnd);
            if (textRange.Text.Length >= (index + length))
            {
                TextPointer start = textRange.Start.GetPositionAtOffset(index, LogicalDirection.Forward);
                TextPointer end = textRange.Start.GetPositionAtOffset(index + length, LogicalDirection.Backward);
                TB.Selection.Select(start, end);
                return TB.Selection.Text;
            }
            return null;
        }
display.Text = selectText(6, 8);
// display contains the string "arranged"
TB.Selection.ApplyPropertyValue(RichTextBox.ForegroundProperty, "Red");
// display now contains the string "arrang" (should be "arranged")
display.Text = selectText(6, 8); 
```

`display`是一个 TextBlock，用于显示用于调试目的的变量值，`TB`是一个 RichTextBox。

`selectText(i,length)`如果在没有 ApplyPropertyValue() 的情况下使用，函数可以正常工作，并且始终返回`TB`.

上述代码执行后，`display`包含“arrang”而不是“arranged”。此外，如果我删除 ApplyPropertyValue() 语句，`display`将按预期包含“排列”。

ApplyPropertyValue() 怎么了？我在这里错过了什么吗？

# spring-security - 在 SpringData 存储库上使用 @PreAuthorize

> ID：13754147
> 
> 赞同：0
> 
> 时间：2012-12-06T22:57:12.313
> 
> 标签：spring-security, spring-data, spring-data-jpa

我正在尝试通过在我的存储库接口上使用 @PreAuthorize 注释来保护 Spring-Data 存储库（因为大多数方法都是继承的），以便所有方法都得到保护。结果是我的接口中包含的任何自定义方法都没有通过 Spring-Data 接口继承的所有方法获得安全性。在扩展超级接口的简单组件接口上应用相同的东西将正常工作。我不确定这是 Spring-Security 还是 Spring-Data 问题。我会很感激一些帮助解决这个问题。[可以在http://forum.springsource.org/showthread.php?133083-Using-PreAuthorize-on-SpringData-repositories](http://forum.springsource.org/showthread.php?133083-Using-PreAuthorize-on-SpringData-repositories)下载工作服务设置和非工作 Spring-Data 存储库的单元测试示例. 失败的 testSuperRepositoryWithUser 应该得到一个 AccessDeniedException，但 @PreAuthorize 注释不适用于 JpaRepository 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:56:04.907

默认情况下，spring 使用 JDK 代理包装 bean。在这种情况下，注释仅适用于接口方法。所以你需要一些更强大的代理（CGlib 或 AspectJ）。我不确定它是否会“按原样”解决您的问题。你可以试试 CGlib：

```
<security:global-method-security ... proxy-target-class="true" /> 
```

对于 AspectJ：

```
<security:global-method-security ... mode="aspectj" /> 
```

在这两种情况下，您都需要额外的库和额外的配置。有关更多详细信息，请参阅[AOP 代理](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-proxying)。

从架构的角度来看，安全注释的最佳位置是在您的服务方法上。考虑以下情况：您有 ServiceA.methodA() 和 ServiceB.methodB()。他们使用 RepositoryC.methodC()。您的客户希望 methodA() 和 methodB() 具有不同的安全权限。如果您的安全层应用于存储库，那将是不可能的。因此，只需将您的安全注释应用于服务，就完全没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T12:54:13.447

您可以通过将其应用于接口而不是方法来对接口的`@PreAuthorize`所有方法应用或类似的注释。`Repository`

```
@PreAuthorize("hasRole('ROLE_SUPERUSER')")
public interface PersonnelRepository extends PagingAndSortingRepository<Person, Long>{} 
```

您还可以在其他人继承的基础存储库上提供注释，以保护继承的存储库的方法。

```
@NoRepositoryBean
@RepositoryRestResource()
@PreAuthorize("hasAuthority('ROLE_USER')") 
public interface BaseRepository<T, ID extends Serializable> 
    extends PagingAndSortingRepository<T, ID>{} 
```

现在这个存储库在它的所有方法上也将具有相同的安全性。

```
public interface FooRepo extends BaseRepository <Foo, Long> {} 
```

# iphone - iPhone UIWebView loadHtmlString 未添加到历史记录

> ID：13754153
> 
> 赞同：9
> 
> 时间：2012-12-06T22:57:43.427
> 
> 标签：iphone, ios, uiwebview, back

我`UIWebview`使用 loadHtmlString 加载本地 html 文件。加载的页面具有指向其他本地 html 文件的链接以及使用 Internet 的真实链接。

我添加了一个后退按钮：

> if ([self.webView canGoBack]) [self.webView goBack];

这可以正常工作，只是它无法识别使用 loadHtmlString 加载的原始页面。

例如，如果我导航：
local -> local -> web
local X local <- web （第一个返回有效，下一个什么也不做。）

如何让 webview 识别原始页面，以便后退按钮也适用于它？我可以以某种方式将其添加到 webview 的历史记录中吗？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-29T22:51:32.120

我有同样的问题。我尝试管理历史记录，但很容易出错。现在我发现了一个更好的解决方案。

您要做的只是在调用 loadHTMLString/loadData 之前将 loadRequest 添加到 about:blank 并将其作为占位符。然后你就完全不用监控历史了。webview.canGoBack 和 canGoForward 将正常工作。当然，您将需要一个 hack 来处理返回占位符 about:blank。您可以在 webViewDidFinishLoad 中执行此操作。这是代码亮点：

在调用 loadHTMLString 时的函数中：

```
[weakSelf.fbWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]]];
[weakSelf.fbWebView loadHTMLString:stringResponse baseURL:url]; 
```

处理 goBack 的代码：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
  if ([webView.request.URL.absoluteString isEqualToString:@"about:blank"]
      && ![webView canGoBack] && [webView canGoForward]) {
    [weakSelf.fbWebView loadHTMLString:stringResponse baseURL:url];
  }
} 
```

我认为也可以扩展这个解决方案来处理那些不是第一次加载的 loadHTMLString。只需让 Stack 记录所有字符串响应并在每个 loadHTMLString 上插入 about:blank 即可。并在每次返回 about:blank 时弹出堆栈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-24T01:40:43.670

正如[Cloud Xu](https://stackoverflow.com/a/28226182/2529869)所说，您只需要预加载虚拟 html，如下所示：

```
 webView.load(URLRequest(url: URL(string: "about:blank")!))
    webView.loadHTMLString("<html><body><b>Your page data</b></body></html>", baseURL: nil) 
```

只是它，没有别的！斯威夫特3

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T19:39:57.503

这是我最终使用的解决方法：

我为 WebView 创建了一个委托，它跟踪用户是否在第一页上（使用 加载`loadHtmlString`）。

当按下后退按钮时，WebView 无法再返回，并且用户不在第一页上，则再次加载第一页（使用`loadHtmlString`）。以下是相关代码：

```
if ([self.webView canGoBack])
    [self.webView goBack];
else
{
    WebViewDelegate * customDel = (WebViewDelegate *) self.webView.delegate;
    if (customDel.onFirstPage == NO)
    {
        // Load original local page.
        [self.webView loadHTMLString:self.htmlStr baseURL:[[NSBundle mainBundle] bundleURL]];

        customDel.onFirstPage = YES;
    }
} 
```

我暂时不会选择这个答案，以防出现更优雅的解决方案。

希望这可以帮助某人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T10:53:41.160

您还可以仅加载带有要显示的 HTML 内容的[数据 URL ，避免先进行空加载，然后单独加载内容。](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs)

格式为：`data:text/html,[HTML string]`

附言。HTML 字符串必须经过百分比编码（URL 编码）。

```
func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {
    let htmlString = """
<html>
    <body>
        hello world
    </body>
</html>
"""
    if let url = URL(string: "data:text/html," + (htmlString.addingPercentEncoding(withAllowedCharacters: []) ?? "")) {
        webView.load(.init(url: url))
    }
} 
```

# computer-vision - 使用积分图像计算像素值区域时的边缘情况

> ID：13754156
> 
> 赞同：1
> 
> 时间：2012-12-06T22:58:14.647
> 
> 标签：computer-vision, face-detection

我正在尝试实现 Viola Jones 人脸检测算法。

我以为我理解了整个特征概念以及如何使用积分图像计算像素值的面积。但是，我实现它的方式是抛出异常。我意识到这是因为当要计算的区域的高度或宽度为 1 时存在边缘情况。

![使用积分图像计算面积](../Images/b494b438ba83a35514b25366ba79587d.png)

使用积分图像时描述的方法导致区域的值 = C - (B + D) + A。

但是，如果假设高度为 1 像素，则 B = C 且 A = D。等式不成立，等于零。

如果宽度或高度为 1，如何计算面积？我制作了一个图表，显示高度为 1 所涉及的问题

：![区域问题示意图](../Images/66d24a5db51978e54a3dd6979fb7778b.png)

我考虑只是忽略 D 和 C，只做 B - A，虽然它适用于 box1 和 box2，但它不适用于 box 3 和 4。这可能是巧合，它适用于 box1 和 box 2，因为如果我想要第三行的 2 个中间值的区域，仅此而已（整数值 6 和 9），差异是 3，而不是 2。

任何帮助将不胜感激

# windows-8 - Windows 应用商店应用程序 UI - 无响应

> ID：13754163
> 
> 赞同：0
> 
> 时间：2012-12-06T22:59:07.773
> 
> 标签：windows-8

我正在努力设计一个在执行长时间运行的任务时保持响应的 UI。

为此，我在 VS2012 中创建了一个简单的应用程序，并在其中添加了以下类：

```
using System.Threading.Tasks;

namespace TaskTest
{
    class Class1
    {
        public async Task<int> Async()
        {
            //simulate a long running process
            for (long x = 0; x < long.MaxValue; x++) { }
            return 1;
        }
    }
} 
```

然后我修改了主页的 LoadState() 方法：

```
protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    await DoLongRunningProcess();
}

private async Task DoLongRunningProcess()
{
    var id = 0;
    id = await new Class1().Async();
    await new MessageDialog(id + "").ShowAsync();
} 
```

我希望页面在该过程执行时保持响应。但是，当我运行此代码时，页面需要很长时间才能加载。我究竟做错了什么？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:17:20.247

`async`不是魔术；它只是让您能够编写异步代码。特别是，`async` [不在后台线程*上*执行代码](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx#5)。您可以使用它`Task.Run`来执行此操作。

您可能会发现我的[`async`/ `await`intro](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)或[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh191443.aspx)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:23:40.800

那很有帮助。我做了以下更改，得到了我想要的结果：

```
class Class1
{
    public int Launch()
    {
        //throw new Exception("Class1 exception");
        for (var i = 0; i < int.MaxValue / 2; i++) ;
        return 1;
    }
} 
```

...

```
protected async override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    var task = DoLongRunningProcess();
    await task;
    await new MessageDialog(task.Result + "").ShowAsync();
}

private Task<int> DoLongRunningProcess()
{
    return Task.Run<int>(() => new Class1().Launch());
} 
```

页面继续加载，并在短暂的暂停后显示消息对话框。但是，现在我需要知道如何捕获异常。如果我取消注释方法 Launch() 中的 //throw new Exception ... 行，则会将其报告为未处理的异常。我想在主 UI 线程（即在方法 LoadState 的主体）中捕获此异常，但我似乎无法管理它。

# memory - jpeg无损转换 - 内存消耗？

> ID：13754168
> 
> 赞同：3
> 
> 时间：2012-12-06T22:59:32.057
> 
> 标签：memory, jpeg, codec, imaging, libjpeg-turbo

我刚刚从[http://jpegclub.org/jpegtran/下载了最新的 win32](http://jpegclub.org/jpegtran/) **jpegtran.exe**并观察到以下内容：

我准备了一个 14500 x 10000 像素的 24 BPP jpeg 测试图像。

*   文件系统中的压缩大小约为**7.5 MB**。
*   解压缩到内存（使用一些图像查看器）膨胀到**450 MB**左右。

在无损旋转（180）期间监控 jpegtran.exe 命令行工具的内存消耗，我可以看到该进程消耗高达**900 MB**内存！

我会假设这种*jpeg 无损转换*不需要将图像文件解码到内存中，而是只需对编码文件本身执行一些数学转换 - 保持内存占用非常低。

那么以下哪项是正确的？

*   这个特定工具的实现中的一些错误
*   我错过了一些配置开关
*   我的一些误解（即jpeg无损转换也需要将图像解码到内存中？）
*   “数学运算”比“将图像解码到内存”消耗更多的内存

**编辑：**

根据 JasonD 的回答，原因似乎是后者。所以我会扩展我的问题：

是否有任何实现可以**在小块**中执行这些操作（以避免高内存使用）？或者它总是需要整体完成并且没有办法解决它？

**PS：**
我不打算实现自己的编解码器/算法。相反，我问是否有任何满足我的要求的实现。或者至少理论上可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:17:01.833

我不知道有问题的库，但是为了对 jpeg 图像执行无损旋转，您至少必须解压缩 DCT 系数才能旋转它们，然后重新压缩。

完全扩展的 DCT 系数将与原始图像数据大小相同或更大，因为它们具有更多的信息位。

它是无损的，因为 jpeg 中的损失是由 DCT 系数的量化引起的。只要您不解码/重新编码/重新量化这些，就不会产生任何损失。

但这将是内存密集型的。

jpeg 压缩的工作原理大致如下：

*   将图像转换为 YCbCr 颜色空间。
*   可选地对某些通道进行下采样（颜色误差比亮度误差更不易察觉，因此通常对色度通道进行 2 倍下采样）。这显然是有损的，但非常可预测/稳定。
*   通过离散余弦变换 (DCT) 变换图像的 8x8 块，将图像移动到频率空间中。DCT 系数也在 8x8 块中，并且使用比 8 位图像数据更多的位进行存储。
*   通过可变数量量化 DCT 系数（这是大多数软件包中的质量设置）。目的是产生尽可能多的小系数，尤其是零系数。这是 jpeg 压缩的主要“有损”方面。
*   曲折穿过 2D 数据，将其转换为大致按频率顺序排列的 1D 系数流。高频更有可能被归零，因此理想情况下，许多数据包将以可以截断的零流结束。
*   使用霍夫曼编码压缩（无损）（现在非常可压缩）数据。

因此，“无损”转换将希望尽可能避免这样做——尤其是 DCT 量化之外的任何事情，但这并不能避免扩展数据。

# c++ - C++ 和 FF SS 运算符中的配对数据类型

> ID：13754173
> 
> 赞同：1
> 
> 时间：2012-12-06T22:59:45.253
> 
> 标签：c++

我是 C++ 新手，想知道这个声明是什么意思：

```
typedef pair<double,double> pairD;
pair<pairD, long> unknown; 
```

未知是什么？

更具体地说，这些运营商做了什么：

```
unknown.FF.FF;
unknown.FF.SS; 
```

您能否提供一个示例，说明可以在这种未知数据结构中初始化或填充哪些数据？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:04:07.190

`unknown`是一个`pair<pair<double, double>, long>`。

但是，无法确定地猜测什么`FF`和`SS`意味着什么。显而易见的解释是关于`FirstFirst`and `SecondSecond`——但那些不符合它们的使用方式（虽然 FirstFirst 有点道理，但 SecondSecond 确实没有，因为 unknown.second 是 a `long`，而不是一对）。

排除了这一点后，剩下的就是它们只代表`first`and `second`，所以`unknown.FF.SS`等价于`unknown.first.second`和`unknown.FF.FF`等价于`unknown.first.first`。

至于如何将数据放入`unknown`这样的文件中，一种可能性是：

```
unknown x = std::make_pair(std::make_pair(1.0, 2.0), 3L); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:08:02.073

在 C++ 中，`std::pair<F, S>`有两个成员：

```
F first;
S second; 
```

因此：

```
typedef pair<double,double> pairD;
pair<pairD, long> unknown; 
```

扩展到`pair<pair<double, double>, long>`. 鉴于：

```
unknown = std::make_pair(std::make_pair(1.2, 2.4), 3); 
```

然后：

```
std::cout << unknown.first.first << std::endl;
std::cout << unknown.first.second << std::endl;
std::cout << unknown.second << std::endl; 
```

印刷：

```
1.2
2.4
3 
```

# java - Javafx 2 维 TabPane

> ID：13754176
> 
> 赞同：1
> 
> 时间：2012-12-06T23:00:00.010
> 
> 标签：java, javafx, tabpanel

是否可以在 Javafx 中制作二维 TabPane（您知道 1 行标签看起来在另一行标签后面的位置吗？）

如果是这样怎么办？我一直在环顾四周，但我能找到的关于 TabPanes 的所有信息都与 Css 相关（样式）

**Updat - 在 swing 中制作的标签的图片**

![tabPane 的摆动方式](../Images/fe8844795008acbca57c8fd15da56118.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:57:43.780

我也在寻找解决方案。

我的第一个想法是，我正在使用带有 vbox 的 fxml 文件。vbox 包含 TabPane 的两个实例。

我的控制器有一个标签计数器“索引”。当我添加一个选项卡时，我会增加
选项卡计数器。前 5 个选项卡将添加到第一个 tabPane 中，然后选项卡将添加到下面的第二个 tabPane 中。

这听起来像是一种解决方法，但可能是一种解决方案。

```
 if (index <= 5){
        tabPane.getTabs().add(new Tab("tab number: " + index.toString()));
    }
    else {
        tabPane2.getTabs().add(new Tab("tab number: " + index.toString()));
    }

    index++; 
```

# php - 按字段分组表格并显示其他字段

> ID：13754177
> 
> 赞同：0
> 
> 时间：2012-12-06T23:00:00.590
> 
> 标签：php, sql

我有以下 sql 表结构（表名'my_table'）：

```
**ID - USER_ID - FIELD_ID - VALUE**

1 - 1 - 1 - letter a

2 - 1 - 2 - letter b

3 - 1 - 3 - letter c

4 - 2 - 1 - letter a

5 - 2 - 2 - letter b 
```

然后，我想在 html 表中显示结果，如下所示：

```
**USER_ID - FIELD_ID1->value - FIELD_ID2->value - FIELD_ID3->value**

1 - letter a - letter b - letter c

2 - letter a - letter b 
```

有接盘侠吗？？谢谢 ：）

编辑：

这是一个小提琴： [http ://sqlfiddle.com/#!2/bd980/5](http://sqlfiddle.com/#!2/bd980/5)

这是我试图显示结果的底部表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:04:07.877

试试[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
Select user_id, group_concat(value,' - ') from t
Group By user_id 
```

[**演示**](http://sqlfiddle.com/#!2/4e991/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:05:14.867

您可以使用手动枢轴执行此操作：

```
select user_id,
       max(case when key = 1 then value end) as Key1,
       max(case when key = 2 then value end) as Key2,
       max(case when key = 3 then value end) as Key3
from t
group by user_id 
```

这应该适用于任何数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:40:51.327

这应该有效：

```
SELECT t.user_id,
       MAX(IF(t.field_id = 1, t.value, NULL)) AS key1,
       MAX(IF(t.field_id = 2, t.value, NULL)) AS key2,
       MAX(IF(t.field_id = 3, t.value, NULL)) AS key3
FROM my_table t
GROUP BY t.user_id 
```

# makefile - makefile：搜索子目录中的文件

> ID：13754178
> 
> 赞同：2
> 
> 时间：2012-12-06T23:00:02.510
> 
> 标签：makefile

所以我有一个 GCC 命令，我想使用一个简单的 makefile。以前从未使用过makefile，在参考教程后仍然遇到问题。

所以终端上的命令是

```
link4@link4-VirtualBox:~/link4/G2/G2 module/src$ gcc -I.src/L4COMM -I.src/L4SERIAL -I.src/L4SYSTEM -I.src/main.c -I.src/L4COMM/l4comm.c -I.src/L4SERIAL/l4serial.c ./src/bypass.c ./src/input.c 
```

这工作正常，但是当我创建一个 makefile 时，我无法让它搜索分别位于 src/L4COMM 和 src/L4SERIAL 中的文件“l4comm.c 和 l4serial.c”。

这是我的makefile的样子：

```
CC =gcc
INCLUDE = -I/src/L4COMM \
          -I/src/L4SERIAL
VPATH = -I/src/L4COMM \
        -I/src/L4SERIAL

cfiles := $(patsubst %.c, %.o, $(wildcard *.c))
hfiles := $(patsubst %.h, %.o, $(wildcard *.h))

g2make: $(cfiles)
        $(CC) $(INCLUDE) -o main.c l4comm.c l4serial.c bypass.c input.c 
```

1.  希望makefile在子目录中查找文件
2.  正如我使用“cfiles/hfiles”检查更改一样，我想使用通配符来检查子目录中的文件。

帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T01:04:54.093

你可以使用这个 g2make：

```
 $(CC) $(INCLUDE) -o .src/main.c ./src/L4COMM/l4comm.c ./src/L4SERIAL/l4serial.c ./src/bypass.c ./src/input.c 
```

# c++ - 自定义下载管理器 IWebbrowser2

> ID：13754185
> 
> 赞同：0
> 
> 时间：2012-12-06T23:00:33.663
> 
> 标签：c++, com, wxwidgets, iwebbrowser2

抱歉，如果我的问题以前在这里得到了回答，但是我已经在互联网上搜索了几天，包括 SO，但没有解决方案。

基本上我想为 IE 浏览器控件（不是 IDE 本身）实现下载管理器。我在 MSDN 上阅读了很多内容，其中包括显示如何创建它的[链接。](http://msdn.microsoft.com/en-us/library/aa753618%28v=vs.85%29.aspx)这个例子的问题（以及我在这种情况下的问题）是我在哪里注册/应用 IServiceProvider 到我的网络浏览器。文章没有说。但是搜索我发现[了这个问题](http://www.archivum.info/microsoft.public.vc.atl/2006-02/00064/Re-How-To-Implement-IServiceProvider-and-IDownloadManager.html)，它说我引用

> 使用 CAxWindow::QueryHost 获取 IObjectWithSite 指针。调用 SetSite 传递您的 IServiceProvider 实现。

不幸的是，当我使用 wxWidgets 时，我不使用或不了解 ATL。那么我在哪里可以在 wxWebview 或“香草”MS COM 中获得它？

这是我到目前为止所拥有的

```
HRESULT wxDownloadMgr::Download(IMoniker *pmk, IBindCtx *pbc,DWORD dwBindVerb,  
                  LONG grfBINDF,BINDINFO *pBindInfo, LPCOLESTR pszHeaders,LPCOLESTR pszRedir,UINT uiCP )
{
    // Get URL
    LPOLESTR urlToFile;
    HRESULT result = pmk->GetDisplayName( pbc, NULL, &urlToFile ); 
    //OLECHAR is simply a wchar_t and an LPOLESTR is a wide character string (e.g. wchar_t*). 
    wxString url(urlToFile);
    wxWebViewEvent event(wxEVT_COMMAND_WEB_VIEW_DOWNLOAD_BEGINS,GetId(), url, ""); 
    event.SetEventObject(this);//WHICH OBJECT TO SET HERE????????
    HandleWindowEvent(event);

    ::MessageBox(NULL,"Download","Download Manager",MB_OK);
    return S_OK;
} 

STDMETHODIMP wxServiceProvider::QueryService(REFGUID guidService,
                                            REFIID riid,
                                            void **ppv)
{
    HRESULT hr = E_NOINTERFACE;

    if (guidService == SID_SDownloadManager && riid == IID_IDownloadManager)
    {
        // Create new DownloadMgr object using ATL.
        CComObject<wxDownloadMgr>* pDownloadMgr;
        hr = CComObject<wxDownloadMgr>::CreateInstance(&pDownloadMgr);

        // Query the new CDownloadMgr object for IDownloadManager interface.
        hr = pDownloadMgr->QueryInterface(IID_IDownloadManager, ppv);
    }

    return hr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:28:22.023

您可以覆盖 wxActiveXContainer::QueryClientSiteInterface 以将您自己的接口实现（如 IServiceProvider 或 IDocHostUIHandler）添加到客户端站点。[在wxIEContainer](http://trac.wxwidgets.org/ticket/13784#comment:1)类中可以找到一个示例。

# php - 无法在wordpress中发表评论

> ID：13754192
> 
> 赞同：0
> 
> 时间：2012-12-06T23:00:54.270
> 
> 标签：php, wordpress, content-management-system

我们已经复制了我们的一个网站，这是复制品： [http ://test.blog.aias.com.au/](http://test.blog.aias.com.au/)

无法让评论在网站前端为匿名或管理员用户工作。我的意思是，如果我是管理员，我只能通过管理界面发表评论（在评论部分写评论），而不是在网站的前端。

最奇怪的是评论在原始站点上运行良好，但在重复站点上却不行。

在“讨论”设置中，“用户必须注册并登录才能发表评论”已关闭，但这仍然无法解释为什么即使管理员用户也无法通过网站前端的“添加评论”链接发表评论.

我怎样才能让评论适用于重复的网站？部署到重复网站后，是否有任何后端配置文件需要更改？

谢谢，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:13:30.597

我建议在 wp-admin 中使用这个[插件](http://wordpress.org/extend/plugins/search-and-replace/)一次，在工具中你会看到“搜索和替换”在旧 url(original) 中键入并替换为新 url..click go 它将替换你的每一行具有新值的数据库。我已经完成了许多从开发到生产的 wordpress 网站。

# ruby-on-rails - Rails：根据请求格式路由到不同的控制器

> ID：13754195
> 
> 赞同：1
> 
> 时间：2012-12-06T23:01:21.303
> 
> 标签：ruby-on-rails, url-routing

我正在编写一个应用程序，我希望所有对 HTML 的请求都由同一个控制器操作处理。我还有一些其他特定于 JSON 的路由。这是我的路线的样子：

```
Blog::Application.routes.draw do
  constraints format: :json do
    resources :posts
  end

  match "(*path)" => "web#index"
end 
```

问题在于，`constraints`它被解释为“此路由仅适用于指定格式”，而不是“如果请求不是指定格式，则跳过此路由并尝试下一个路由”。

换句话说，在浏览器中导航到*/posts*会给我一个*406 Not Acceptable*因为 URL 被限制为 JSON 格式。相反，如果请求是针对 HTML 的，我希望它通过*web#index*，如果请求是针对 JSON，则点击资源丰富的路由。如何做到这一点？

（使用 Rails 3.2.9。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T13:37:58.347

我考虑过这个问题，得出了一些结论。

*   您可能不希望所有路由都返回单页应用程序 HTML，因为理想情况下您希望从某些路径返回 HTTP 404 状态代码。
*   您的 HTTP 路由将不同于您的 JSON 路由
*   您绝对应该将不同的格式路由到不同的控制器
*   在 Rails 路由器中定义所有 HTML 路由可能是有利的，这样您就可以使用它来生成 javascript 路由器。至少有一颗宝石可以做到这一点
*   Rails 没有这个功能，这个 gem [https://github.com/svenfuchs/routing-filter](https://github.com/svenfuchs/routing-filter)看起来并不像正确的工具。这是我的尝试：[Rails routing-filter 将所有 html 请求路由到一个操作](https://stackoverflow.com/questions/16261154/rails-routing-filter-route-all-html-requests-to-one-action)
*   必须在模块 Api 下命名 JSON API 以避免路由冲突并不是一件坏事。
*   不要在您的单页应用程序上显示 Google 可见的内容，否则您将因重复内容而被禁止。

我采取了一种稍微不同的方法，它并没有真正回答这个问题，但我认为它有几个优点：

这是我的 config/routes.rb

```
FooApp::Application.routes.draw do

  # Route all resources to your frontend controller. If you put this
  # in a namespace, it will expect to find another frontend controller
  # defined in that namespace, particularly useful if, for instance,
  # that namespace is called Admin and you want a separate single page
  # app for an admin interface. Also, you set a convention on the names
  # of your HTML controllers. Use Rails's action_missing method to
  # delegate all possible actions on your frontend controllers.

  def html_resources(name, options, &block)
    resources(name, options.merge(:controller => "frontend"), &block)
  end

  # JSON API
  namespace :api do
    resources :things, :except => [:edit, :new]
  end

  # HTML
  html_resources :things, :only => [:edit, :new, :index, :show] do
    get :other_action
  end
end

class FrontendController < ApplicationController
  def action_missing(*args, &block)
    render :index
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:37:31.120

首先，我认为同一动作的不同控制器不是“Rails 方式”。可能您可以使用中间件中的低级自定义请求处理程序来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-25T05:17:04.860

您可以在约束中使用格式，例如

```
match '*path', constraints: { path: /foo.*/, format: 'html'}, to: 'home#index', via: [:get] 
```

# android - 按钮上的 Alpha 动画错误

> ID：13754196
> 
> 赞同：0
> 
> 时间：2012-12-06T23:01:27.407
> 
> 标签：android, animation, button, touch, alpha

我有淡入按钮（从 0 到 1 的 alpha）和淡出按钮（从 1 到 0 的 alpha）的动画。这部分工作正常。按钮 A 触发按钮 B 的淡入。按钮 B 触发其自身的淡出。

按钮 B 完全覆盖了按钮 A。这个想法是按钮 B 包含一个像信息弹出窗口一样使用的图像。按钮 A 被触摸，按钮 B 淡入顶部。当按钮 B 被触摸时，它会再次淡出。

最初，按钮 B 的可见性设置为 INVISIBLE，当动画淡入完成时，它设置为 VISIBLE。单击按钮 B 时，它会淡出，然后我将可见性设置为不可见。

问题是按钮 B 淡出后，并且设置为 INVISIBLE，它仍然是可点击的，即使它不可见，并且按钮 A 没有接收到触摸。

我已经尝试从父级中删除按钮 B 并在动画完成后重新添加它，这允许触摸到达按钮 A，但只有一次。之后按钮 B 不再可触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:22:14.980

不要将按钮设置为不可见，而是使用：

```
buttonB.setVisibility(View.GONE); 
```

此外还可以设置：

```
buttonB.setClickable(false); 
```

问候。

# java - Java文件处理写入文件而不是“覆盖”

> ID：13754198
> 
> 赞同：0
> 
> 时间：2012-12-06T23:01:35.707
> 
> 标签：java, file-handling

我`File Handling`在 Java 做基础。我想要的是，一旦我运行我的代码并`.txt`在指定位置创建文件并在那里写入一些文本，现在下次我写东西时它不应该 `OVERWRITE`它，但应该在它之前开始..例如我第一次写“Hello java”，下次我运行程序并尝试编写“Java is good”文件应该有类似“Hello java”“java is good”的内容，现在我正在这样做

```
 BufferedWriter bf = new BufferedWriter( new FileWriter("c:\\test.txt"));
    bf.write("Hello Java");
    bf.close();// and so on . 
```

现在当我下次运行并输入时

```
 BufferedWriter bf = new BufferedWriter( new FileWriter("c:\\test.txt"));
    bf.write("Java is good ");
    bf.close();// and so on . 
```

它不应该被覆盖，所以请指导 mt 。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:06:02.607

只需将值为“true”的布尔参数添加到 FileWriter 构造函数。

[FileWriter#FileWriter（文件，布尔值）](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)

# linux - Gradle 1.3：build.gradle 不构建类

> ID：13754199
> 
> 赞同：5
> 
> 时间：2012-12-06T23:01:37.253
> 
> 标签：linux, eclipse, build-automation, gradle

这里有一个新问题：我有一个 build.gradle 文件，`apply plugin: java`其中包含一个 java 项目/包。当我从命令行运行时`gradle build`，我得到：

```
:compileJava UP-TO-DATE
:processResources UP-TO-DATE 
:classes UP-TO-DATE
:jar UP-TO-DATE
:assemble UP-TO-DATE
:compileTestJava UP-TO-DATE
:processTestResources UP-TO-DATE
:testClasses UP-TO-DATE
:test UP-TO-DATE
:check UP-TO-DATE
:build UP-TO-DATE

BUILD SUCCESSFUL

Total time: 4.312 secs 
```

但是当我检查构建文件夹时，没有类。我究竟做错了什么 ？

我在文件夹下有：lib、reports、test-results & tmp，但没有类。src 代码是一个带有主方法的类，其中“Hello world”打印到控制台...

我的树看起来像这样：

```
.
├── build
│   ├── libs
│   │   └── gradle-sandbox.jar
│   ├── reports
│   │   └── tests
│   │       ├── base-style.css
│   │       ├── css3-pie-1.0beta3.htc
│   │       ├── index.html
│   │       ├── report.js
│   │       └── style.css
│   ├── test-results
│   └── tmp
│       └── jar
│           └── MANIFEST.MF
├── build.gradle
└── src
└── org
    └── gradle
        └── example
            └── simple
                ├── HelloWorld.java
                └── package-info.java 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T23:45:59.957

没有更多信息，很难说。也许您将源文件放入错误的目录（默认为`src/main/java`）。或者内部缓存损坏（不应该发生，但尝试删除`.gradle`目录）。

当你这样做时，你会得到类文件`gradle clean build`吗？请注意，每当您在 Gradle 版本之间切换时，都需要进行干净的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T04:41:00.030

我有一个类似的问题，我的所有类都在**src/main/java**中，但没有一个类出现在 jar 中。

问题是我使用的是 Groovy。将其调整为**src/main/groovy**解决了该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-07T16:57:27.070

我有类似的问题，我已经遵循上述层次结构，但也将 build.gradle 放在 srcm/main/java/{{my project}} 中。将 build.gradle 移动到项目的根目录对我有用。

让我知道它是否适用于其他人。

# javascript - CKEditor：工具栏未出现

> ID：13754200
> 
> 赞同：1
> 
> 时间：2012-12-06T23:01:38.103
> 
> 标签：javascript, ckeditor

我创建了一个名为 timestamp 的插件。plugin.js 的代码是这样的：

```
CKEDITOR.plugins.add( 'timestamp',
{
    init: function( editor )
    {
        editor.addCommand( 'insertTimestamp',
            {
                exec : function( editor )
                {    
                    var timestamp = new Date();
                    editor.insertHtml( timestamp.toString() );
                }
            });
        editor.ui.addButton( 'Timestamp',
        {
            label: 'Insert Timestamp',
            command: 'insertTimestamp',
            icon: this.path + '/icons/timestamp.png'
        } );
    }
} ); 
```

图标在`/_source/plugins/timestamp/icons`

但是当我尝试在中添加插件时`./samples/fullpage.html`，甚至工具栏都没有出现代码：

```
<script>
            CKEDITOR.replace( 'editor1', {
                fullPage: true,
                extraPlugins: 'wysiwygarea,timestamp',
            toolbar :
            [
                [ 'Bold', 'Italic', '-', 'NumberedList' ],
                [ 'Timestamp' ]
            ]
            });

</script> 
```

如果我尝试在 config.js 中添加此插件，则会出现工具栏但没有时间戳（我的自定义插件）

代码：

```
config.extraPlugins ='timestamp'; 
```

请让我知道出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:02:45.527

只需删除`extraPlugin: 'wysiwygarea'`或`extraPlugins : 'docprops'`在 full.html 中不需要。希望它会起作用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:33:52.353

在您添加插件后，您的工具栏停止出现，很可能是因为您在该插件中遇到了一些 JS 错误，这会破坏一切。检查您的控制台并在此处粘贴信息（或尝试自行解决问题:)）。

# java - 将 int 添加到数组中

> ID：13754202
> 
> 赞同：0
> 
> 时间：2012-12-06T23:01:57.843
> 
> 标签：java, arrays, int, add

从文件中读取和解析元素后，我很难将元素放入数组中。这个想法是我读入的文本文件有一个问题，然后下一行是一个数字，表示哪个答案是正确的。我将字符串解析为一个 int，但我无法将解析后的 int 添加到我的 answers 数组中。所以我的问题是如何将我的 int 添加到我的数组答案中？这是我的代码

```
//here is how I define my arrays
 List<String> questions = new ArrayList<String>();
 List<String> other = new ArrayList<String>();
 int[] answers = new int[questions.size()];

while (fScan.hasNextLine()) 
    {

        String line = fScan.nextLine();

    if (line.contains("?")) 
    {
        questions.add(line);
        String correctAnswer = fScan.nextLine();
        int rightAnswer = Integer.parseInt(correctAnswer);
        //here's where things go wrong

        answers.add(rightAnswer);

    } 
    else 
    {
        other.add(line);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:07:46.413

您应该为您的`answers`. 然后你可以像这样添加元素，否则`.add`函数会给你一个错误。

或者，您可以这样做`answers[i] = rightAnswer`，`i`您可以添加作为计数器的问题数量在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:13:13.740

将答案定义为

```
ArrayList<Integer> answers=new ArrayList<>(); 
```

此外，最好考虑一下`NumberFormatException`- 如果字符串不包含可解析的整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:04:18.670

试试看

```
 //here's where things go wrong
   answers[questions.size() - 1] = Integer.parseInt(correctAnswer); 
```

或者只使用 ArrayList

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T03:18:32.100

有几种方法可以做到这一点。这是一个：在你的代替
使用。在这种情况下，您不必费心将字符串转换为整数，因为 ArrayList 接受对象。相反，您可以使用附加。但是，如果您想将值作为字符串获取，您可以使用.`ArrayList answers = new ArrayList();``answers`
`answers.add(correctAnswer)``answers.get(yourIndex).toString`

# java - 程序输出到 Java 中的文件（并再次读取）

> ID：13754203
> 
> 赞同：0
> 
> 时间：2012-12-06T23:02:10.340
> 
> 标签：java, file, input, main, output

我在一个 IO 类中有一个大的 main 方法，它从我的程序中的四个不同类创建对象（它们在某种程度上都相互使用）。

我的主要方法使用扫描仪从控制台窗口获取所有信息，并使用此信息通过使用 switch/case 语句构造的菜单系统调用其他类中的构造函数和方法。

由于这是我的第一个完整的 Java 程序，我一直专注于通过控制台使 main 方法工作，而没有正确考虑文件输入和输出。

我现在看不到一个简单的方法来完成这项工作。理想情况下，我需要某种方式在将 main 方法运行到文件时将我输入到控制台的所有内容写入文件，格式可以再次读取并通过 main 方法输入回来？

我没有发布 main 方法，因为它有 250 多行，但如果需要，我会发布它的任何相关部分。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:08:47.770

这是一个基本的设计问题。您需要将获取内容与处理内容分开，可能分为两类。

完成此操作后，您可以轻松地从控制台或文件（或测试代码）输入处理代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:15:10.267

您可以使用属性文件来存储或提取某些值。查看例如官方[java教程](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

这是您可以重复使用以读取属性的一部分：

```
FileInputStream propFile =
            new FileInputStream( "myProperties.txt");
        Properties p =
            new Properties(System.getProperties());
        p.load(propFile); 
```

# c# - 从一个整数中获取一对整数

> ID：13754204
> 
> 赞同：-2
> 
> 时间：2012-12-06T23:02:14.053
> 
> 标签：c#, .net, algorithm, math

> **可能重复：**
> [从整数中获取第七位](https://stackoverflow.com/questions/13752726/get-the-seventh-digit-from-an-integer)

我有一个整数，我想要一个数字。

```
var myDigit = 2345346792; 
```

我需要 myDigit 中的第 5 个和第 6 个数字，即 34。

在不使用任何子字符串的情况下获得它们的数学方法是什么？

我上一个帖子的附加问题： [从整数中获取第七位数字](https://stackoverflow.com/questions/13752726/get-the-seventh-digit-from-an-integer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:05:58.783

重复您之前的解决方案，使用`100`而不是`10`模数并调整除法。

# tomcat - 仅使用上下文描述符将 WAR 部署到 tomcat

> ID：13754206
> 
> 赞同：1
> 
> 时间：2012-12-06T23:02:23.313
> 
> 标签：tomcat, deployment, war

我需要将 WAR 格式的 Web 应用程序部署到远程 tomcat6 服务器。问题是我不想以简单的方式做到这一点，这意味着不仅仅是将 WAR 文件复制/粘贴到`/webapps`. 所以第二种选择是创建一个唯一的“上下文描述符”并将其指向 WAR 文件。（希望我能做到这一点）

所以我有几个问题：

1.  WAR 文件是否允许位于文件系统中的任何位置？意思是我可以将WAR文件复制到远程文件系统中的任何位置，除了`/webapps`tomcat6安装的任何其他文件夹吗？

2.  有没有简单的方法来测试部署是否成功？不使用任何浏览器或任何东西，因为我只通过 SSH 和终端访问远程服务器。（我在想ping？）

3.  `startup.sh/shutdown.sh`不存在正常吗？我不是服务器管理员，也不知道tomcat6是怎么安装的。但我确信在我的本地 tomcat 安装中，这些文件已经存在`/bin`并且可以使用了。我的意思是您仍然可以启动/重新启动/停止 tomcat 等，但不能使用这些 -standard?- 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:21:24.770

1.  为什么不想将 .war 文件放到`webapps`文件夹中？
2.  是的，检查登录`$CATALINA_HOME/logs/catalina.out`
3.  不，这不正常。它们是标准安装的一部分。

# python - 如何提高循环效率？

> ID：13754209
> 
> 赞同：1
> 
> 时间：2012-12-06T23:02:35.970
> 
> 标签：python

我有以下代码，它将输入字符串转换为莫尔斯电码。我的代码遍历字符串中的每个字母，然后遍历字母表中的每个字符。这是非常低效的，因为如果我从一个非常大的文件而不是一个小的字母字符串中读取会怎样。有什么方法可以改进我的代码，也许使用模块 re，将我的字符串与莫尔斯电码字符匹配？

```
morse_alphabet = ".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --.."
ALPHABET = "abcdefghijklmnopqrstuvwxyz"
morse_letters = morse_alphabet.split(" ")
result = []
count_character = 0

def t(code):

    for character in code:
        count_letter = 0

        for letter in ALPHABET:
            lower_character = code[count_character].lower()
            lower_letter = letter.lower()

            if lower_character == lower_letter:

                result.append(morse_letters[count_letter])

            count_letter += 1

        count_character += 1

    return result 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T23:09:18.257

您可以[`string.ascii_lowercase`](http://docs.python.org/2/library/string.html#string.ascii_lowercase)与 with 一起使用`zip()`来制作字典：

```
import string
morse_alphabet = ".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --.."
morse_letters = dict(zip(string.ascii_lowercase, morse_alphabet.split()))

def t(code):
    return filter(None, (morse_letters.get(c.lower()) for c in code)) 
```

该`t`函数简化为一个`filter()`和一个生成器表达式，循环遍历输入代码中的每个字符。

字典现在`morse_letters`可以非常快速地查找代码，`filter()`删除`None`任何不是字母的结果。

结果：

```
>>> t('S.O.S.')
['...', '---', '...']
>>> t('Stack Overflow')
['...', '-', '.-', '-.-.', '-.-', '---', '...-', '.', '.-.', '..-.', '.-..', '---', '.--'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:05:29.050

使用[字典](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)。为每个字母分配一个字典键，然后让它具有相应的摩尔斯电码作为其值。

示例 - 为每个字母分配莫尔斯电码：

```
morse = {}
morse["a"] = ".-"
morse["b"] = "-..."
#... 
```

回想一下字母的摩尔斯电码：

```
morse_for_a = morse["a"] 
```

字典查找的时间不受字典长度/大小的影响 - 它是 O(1)。看到[这个答案](https://stackoverflow.com/a/513906/920200)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:05:42.933

我要做的是使用字母作为键和等效的莫尔斯电码作为值创建一个字典。然后您可以简单地遍历您正在转换的字符串并立即分配正确的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T23:15:30.983

您可以使用字典，如下所示：

```
morse_alphabet = ".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --.."
ALPHABET = "abcdefghijklmnopqrstuvwxyz"
morse_letters = morse_alphabet.split(' ')
char_to_morse = dict(zip(ALPHABET, morse_letters))

def t(code):
    result = []
    for char in code:
        result.append(char_to_morse[char.lower()])
    return result

print t('abc') 
```

基本上，只要在两件事之间存在一对一的映射（在这种情况下，字母字符到摩尔斯电码），您就会使用字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T23:07:32.883

您可以使用`dict`带有默认值的 a - 所以如果一个字符存在，则返回它 - 否则它返回原始字符......

```
morse_alphabet = ".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --.."
ALPHABET = "abcdefghijklmnopqrstuvwxyz"

lookup = dict(zip(ALPHABET, morse_alphabet.split()))
>>> from pprint import pprint
>>> pprint(lookup)
{'a': '.-',
 'b': '-...',
 'c': '-.-.',
 'd': '-..',
 'e': '.',
 'f': '..-.',
 'g': '--.',
 'h': '....',
 'i': '..',
 'j': '.---',
 'k': '-.-',
 'l': '.-..',
 'm': '--',
 'n': '-.',
 'o': '---',
 'p': '.--.',
 'q': '--.-',
 'r': '.-.',
 's': '...',
 't': '-',
 'u': '..-',
 'v': '...-',
 'w': '.--',
 'x': '-..-',
 'y': '-.--',
 'z': '--..'}

s = 'sos'
print ''.join(lookup.get(ch, ch) for ch in s)
'...---...' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T23:09:23.307

尽可能少地“手工”。在 dict 中查找代码比“手动”使用 for 循环要快得多。此外，您正在为 alfabet 字母调用 lower()，即使您知道它们已经是小写字母。确保在整个字符串上调用一次，这很好。没有充分理由，为每个字母调用一次速度很慢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T23:13:49.613

这是一种使用ascii代码的方法：

```
morse_alphabet = ".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --..".split(" ")
CHAR_OFFSET = 97 # ord(a) = 97, i.e. a is 97 in ascii

def string_to_morse_code(string):
  morse_code = []
  for char in string.lower():
    try:
      morse_code.append( morse_alphabet[ ord(char) - CHAR_OFFSET] )
    except IndexError:
      continue # ignore any chars we don't understand

  return ' '.join(morse_code)

print string_to_morse_code("Help!!!") 
```

这将返回：

```
.... . .-.. .--. 
```

# c++ - 如何从字符串中获取单词

> ID：13754212
> 
> 赞同：1
> 
> 时间：2012-12-06T23:02:50.670
> 
> 标签：c++, c

我有 fe “我是一名护士。” 我如何或使用哪个函数将单词从字母数字 1 到空格或字母数字 11？

那么我应该得到“正在工作”吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T23:06:55.507

要从流中读取单词，请在字符串上使用 operator>>

```
std::stringstream  stream("I am working as a nurse.");
std::string  word;

stream >> word;  // word now holds 'I'
stream >> word;  // word now holds 'am'
stream >> word;  // word now holds 'working'
// .. etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:09:12.633

尚不完全清楚您想要什么，但从您的示例看来，您似乎想要从字符 1 开始并在 11 位之后的字符处结束的子字符串（总共 12 个字符）。这意味着你想要`string::substr`：

```
std::string str("I am working as a nurse");
std::string sub = str.substr(1,12); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:11:42.753

```
char[] source = "I am working as a nurse."
char[11] dest;
strncpy(dest, &source[1], 10) 
```

# java - 如何使用 FXMLLoader.load() - JavaFX 2

> ID：13754214
> 
> 赞同：10
> 
> 时间：2012-12-06T23:03:12.697
> 
> 标签：java, javafx-2, fxml, scenebuilder

我正在使用[JavaFX Scene Builder 构建](http://www.oracle.com/technetwork/java/javafx/tools/index.html)[JavaFX](http://docs.oracle.com/javafx/index.html)应用程序。该界面是在 Scene Builder 中创建的，并创建了一个[FXML](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)文件 (main.fxml)。

要在我的应用程序中使用该接口，我必须使用[FXMLLoader](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html)加载 FXML 文件，但存在一个问题，因为 load() 方法返回一个对象，并且要构建一个场景，我需要一个 Parent 类的实例。

下面是我的 MainClass 的一部分。编译器给出错误，因为页面不是 Parent 类型：

```
Object page = FXMLLoader.load(MainWindowController.class.getResource("main.fxml"));
Scene scene = new Scene(page);
primaryStage.setScene(scene);
primaryStage.show(); 
```

我该怎么做才能使这个编译和运行正确？

这是 FXML 文件 (main.fxml)：

```
<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <VBox prefHeight="400.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <children>
        <MenuBar minHeight="21.0" prefHeight="21.0" prefWidth="600.0">
          <menus>
            <Menu mnemonicParsing="false" text="File">
              <items>
                <MenuItem mnemonicParsing="false" text="Close" />
              </items>
            </Menu>
            <Menu mnemonicParsing="false" text="Edit">
              <items>
                <MenuItem mnemonicParsing="false" text="Delete" />
              </items>
            </Menu>
            <Menu mnemonicParsing="false" text="Help">
              <items>
                <MenuItem mnemonicParsing="false" text="About" />
              </items>
            </Menu>
          </menus>
        </MenuBar>
        <ToolBar minHeight="24.0">
          <items>
            <Button fx:id="btFormat" mnemonicParsing="false" text="FORMAT" />
            <Button fx:id="btUnformat" mnemonicParsing="false" text="Unformat" />
            <Button fx:id="btAutoIndent" mnemonicParsing="false" text="Auto-indent" />
            <CheckBox fx:id="cbShowLineNumber" mnemonicParsing="false" text="Show line number" />
          </items>
        </ToolBar>
        <SplitPane dividerPositions="0.5" focusTraversable="true" orientation="VERTICAL" prefHeight="348.0" prefWidth="600.0">
          <items>
            <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="100.0" prefWidth="160.0">
              <children>
                <VBox prefHeight="170.0" prefWidth="598.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
                  <children>
                    <Label text="INPUT - Paste your code here" />
                    <TextArea fx:id="taInput" prefWidth="200.0" wrapText="true" />
                  </children>
                </VBox>
              </children>
            </AnchorPane>
            <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="100.0" prefWidth="160.0">
              <children>
                <VBox prefHeight="170.0" prefWidth="598.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
                  <children>
                    <Label text="OUTPUT - The formatted code" />
                    <TextArea fx:id="taOutput" prefWidth="200.0" wrapText="true" />
                  </children>
                </VBox>
              </children>
            </AnchorPane>
          </items>
        </SplitPane>
      </children>
    </VBox>
  </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T08:44:00.560

由于有多种实体可以通过 FXML 加载，您需要自己声明预期的类型。

```
Parent page = FXMLLoader.<Parent>load(MainWindowController.class.getResource("main.fxml").toExternalForm()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-24T08:59:03.267

试试这个

```
Parent root= FXMLLoader.load(getClass().getResource("mention the path to your fxml file"); 
```

希望这会有所帮助

# c# - 在运行时加载模块化 ASP.NET 组件

> ID：13754218
> 
> 赞同：1
> 
> 时间：2012-12-06T23:03:54.630
> 
> 标签：c#, asp.net

我正在构建一个 ASP.NET 网站，它将充当“框架”并显示有关在 Web 服务器上运行的某些服务的信息。站点需要做的一件事是为服务加载的某些模块提供自定义配置页面。这些模块都将实现一个通用 API，所以不用担心——我关心的是如何获得配置页面，这些页面对每个模块都是唯一的，由一个通用前端提供服务？

页面需要验证用户输入，处理按钮点击等。所以它并不像在每个模块上都有一个方法那么简单：

`public string getHTMLConfigPage()`

这仅在模块的配置页面不需要用户输入时才有效。在这种情况下，所有模块都需要某种形式的配置，至少需要一个指示“打开/关闭”的复选框

这是理想的用例：

1.  在运行时，IIS 进程与后端服务对话并计算出有 N 个模块正在运行
2.  服务器将这 N # 个模块的链接添加到下拉菜单中
3.  当用户单击某个模块的菜单项时，将显示该模块的配置页面
4.  用户可以根据自己的意愿配置模块，单个模块控制整个序列

我们已经在 C# winforms 中成功实现了这一点。我们这样做的方式是让每个模块实现一个方法`public void showConfigDialog(IWin32Window parent);`。这适用于常规桌面应用程序——但显然不能帮助我对 Web 服务器做任何事情。

到目前为止，我唯一想到的是让每个模块也安装一些东西到 IIS Web 服务器上，然后只做一个`iFrame`主“框架”页面可以在框架中显示模块页面的地方（或弹出窗口)，但这似乎很混乱，因为模块开发人员必须包含某种设置脚本才能将东西放入 IIS 空间......

那么 - 有没有更好的方法来做到这一点，或者 iFrame 方法是唯一的方法？

**系统详情：**

*   ASP.NET 4.0
*   C# .NET 4.0
*   IIS 7.5（服务器 2008 R2）

**编辑：附加细节**

我还考虑过让模块将一个特殊的 ASP.NET DLL 放在 ASP.NET 将在运行时探测的目录中。但问题的根源仍然存在——模块提供的 DLL 如何集成到主要的网页集中？主要的网页集有一个`Site.Master`页面，提供一些必需的项目（CSS、菜单栏、一些 jQuery 插件等）。来自模块的 DLL 可能需要此信息以及主网页用来与我们编写的底层 Windows 服务对话的命名管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:13:41.613

听起来您需要一个用于 ASP.NET 的插件框架。您可以通过使用 MEF（托管扩展框架）来实现这一点，它允许您将复杂的页面和配置放入插件并在运行时加载它；或者我相信。

首先在这里查看 Code Project 文章[，](http://msdn.microsoft.com/en-us/library/dd460648.aspx)[这里](http://www.codeproject.com/Articles/167321/MEF-with-ASP-NET-Hello-World)可能还有 MSDN 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:55:23.583

您描述的大部分内容都在 Orchard CMS 中实现。[http://orchardproject.net](http://orchardproject.net)。您可能会考虑将他们的代码作为如何完成此动态模块加载的示例，或者如果可能的话只是切换到 Orchard 作为您的应用程序的框架。它被称为 CMS，但实际上它是一个很好的框架，可以在其上构建 .NET 应用程序。

他们使用 Autofac 进行依赖注入，模块可以通过实现接口来注入自己的 Routes、Content、Pages 等。Orchard 的核心框架会扫描这些模块以查找实现特定接口的类，然后调用这些接口上的方法以从模块中提取特定内容。您可以从命令行或 Web 界面启用/禁用模块。

例如，我可以创建一个模块，然后在其中我将有一个类实现一个名为的接口，该接口`INavigationProvider`具有 Orchard 用于获取管理仪表板的菜单项的方法。然后我可以`IRouteProvider`在另一个类中实现接口，它告诉 Orchard 我的应用程序的所有路由（前端和管理仪表板）。您还可以对视图/控制器/路由使用 MVC 约定。支持 Razor 和 WebForms 视图引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:22:59.957

如果您有明确定义的不同场景，我认为处理来自其他类中的页面或来自另一个嵌入项目或库的数据不是问题。例如，要填充 DropDownList 中的数据，您可以执行以下操作：

```
Partial Class Default
  Inherits System.Web.UI.Page

  Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
      If Not Page.IsPostBack Then
          Dim itemList As List(Of ListItem) = ClassForTheMagic.GetItemsForComboBox(txtBox1.Text, checkBox2.check, ...)
          For Each item As ListItem In itemList
              DropDownList1.Items.Add(item)
          Next
      End If
  End Sub 
```

结束类

然后，您可以在其他文件中：

```
Public Class ClassForTheMagic

  Public Shared Function GetItemsForComboBox(ByVal txtBox1 As String, ByVal checkBox2 As Boolean, ...) As List(of ListItem)
      Dim itemList As New List(Of ListItem)
      itemList.Add(New ListItem(txtBox1, "..."))
      itemList.Add(New ListItem(checkBox2, "..."))
      ...
      Return itemList
  End Function

End Class 
```

ps：对不起vb代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T21:10:17.423

我会建议：

*   具有相互结构访问的基线插件结构模型，因此插件主机将能够实例化/初始化各个插件，并将其自身（或模型类的选择）作为参考传递。
*   HTTP 模块，用于迭代加载的插件并推送上下文页面，以便它们可以由管道模型中的插件处理。这样，您甚至可以选择在特定时刻触发的特定事件 - 例如，在用户键入电子邮件后触发对 Gravatar 图标/OpenID 身份验证的搜索，并将收集到的数据发布到插件主机提供的模型类上.

# php - 有效地删除数组php中的项目

> ID：13754219
> 
> 赞同：0
> 
> 时间：2012-12-06T23:03:56.087
> 
> 标签：php, arrays

我正在这样做：

```
 $attributes = array("a", "b", "c", "d","e","f", "g","h" ,"i","j","k","l");
    foreach($all as $p) {
     foreach($attributes as $key => $a) {
      if (!$p->getAttribute($a)) {
        unset($attributes[$key]);
      }
     }
    } 
```

但是未设置似乎会缩小`$attributes`循环中的数组，然后取消设置想要的值。

编辑：这不是发生的事情。真正的问题是，由于这些是嵌套循环，如果`!$p->getAttribute($a)`返回 false，我不应该已经在数组中取消设置它，因为第一个循环`foreach($all as $p)`可能会为 $p 提供一个返回 true 的属性，因此需要保留。

我需要它，这样如果`!$p->getAttribute($a)`我想从 $attributes 中删除相应的 $a。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:24:44.810

这就是我最终所做的：

```
$all_attributes = array("a", "b", "c", "d","e","f", "g","h" ,"i","j","k","l");
$attributes = array();
foreach($allpkg as $p) {
  foreach($all_attributes as $key=> $a) {
    if ($p->getAttribute($a) && (!in_array($a, $attributes))) {
      array_push($attributes,$a);
    }                           
  }
} 
```

编辑：由于我在问题本身中的编辑，解决方案已被编辑......（aaawww，抱歉混淆）。也许不是最优雅的，当然也不是最有效的（复制所有需要的元素......）。但我对正在发生的事情有明确的控制，并且它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:11:12.000

如果你必须多次这样做，我建议你从 $p 类中的方法返回属性数组并使用

```
array_diff($attributes, $p->getAttributes()); 
```

# c++ - ctypes/C++ 段错误访问成员变量

> ID：13754220
> 
> 赞同：3
> 
> 时间：2012-12-06T23:03:56.820
> 
> 标签：c++, python, ctypes

我对 python ctypes 模块并不陌生，但这是我第一次尝试在一个代码中结合 C++、C 和 Python。在将 ctypes 与 Python 和 C++ 一起使用时，我的问题似乎与[Seg 错误](https://stackoverflow.com/questions/12142766/seg-fault-when-using-ctypes-with-python-and-c?lq=1)非常相似，但是我似乎无法以相同的方式解决问题。

我有一个简单的 C++ 文件，名为`Header.cpp`：

```
#include <iostream>

class Foo{
   public:
      int nbits;
      Foo(int nb){nbits = nb;}
      void bar(){ std::cout << nbits << std::endl; }
};

extern "C" {
   Foo *Foo_new(int nbits){ return new Foo(nbits); }
   void Foo_bar(Foo *foo){ foo->bar(); }
} 
```

我使用以下方法编译到共享库：

```
g++ -c Header.cpp -fPIC -o Header.o
g++ -shared -fPIC -o libHeader.so  Header.o 
```

和一个简单的 Python 包装器，称为`test.py`：

```
import ctypes as C
lib = C.CDLL('./libHeader.so')

class Foo(object):
    def __init__(self,nbits):
        self.nbits = C.c_int(nbits)
        self.obj = lib.Foo_new(self.nbits)

    def bar(self):
        lib.Foo_bar(self.obj)

def main():
    f = Foo(32)
    f.bar()

if __name__ == "__main__":
    main() 
```

我希望当我调用 test.py 时，我应该将数字 32 打印到屏幕上。但是，我得到的只是一个分段错误。如果我更改构造函数以返回堆栈上的类实例（即没有`new`调用），然后传递对象，程序将按预期执行。此外，如果我更改类中的`bar`方法以`Foo`使其不使用该`nbits`成员，则程序不会出现段错误。

我对 C++ 的了解有限，但是我可以在 C 和 C++ 中按预期实现这个函数，但在 Python 中却不行，这有点令人困惑。任何帮助将不胜感激。

**更新**：感谢以下评论之一，问题已解决。在这种情况下，需要为 C 函数显式声明 restype 和 argtypes。即以下被添加到python代码中：

```
lib.Foo_new.restype  = C.c_void_p
lib.Foo_new.argtypes = [C.c_int32]
lib.Foo_bar.restype  = None
lib.Foo_bar.argtypes = [C.c_void_p] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:21:30.783

我会尝试以下方法：

```
extern "C"
{
    Foo *Foo_new(int nbits)
    {
        Foo *foo = new Foo(nbits);
        printf("Foo_new(%d) => foo=%p\n", nbits, foo);
        return foo;
    }
    void Foo_bar(Foo *foo)
    {
        printf("Foo_bar => foo=%p\n", foo);
        foo->bar();
    }
 } 
```

看看值是否`foo`匹配。

此外，您可能希望查看 Boost.Python 以简化创建 C++ 对象的 Python 绑定。

# actionscript-3 - 通过父应用程序在模块之间传递自定义事件

> ID：13754227
> 
> 赞同：0
> 
> 时间：2012-12-06T23:04:16.103
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3, flex4.5

我创建了一个自定义事件，我想用它在两个模块之间传递一个字符串。事件如下所示：

```
package com.mypackage.events
{
import flash.events.Event;

public class ThumbDeleteEvent extends Event
{
    public static const THUMBS_DELETED:String = "thumbsDeleted";

    public var files:String;

    public function ThumbDeleteEvent(type:String, files:String)
    {
    super(type);
    this.files = files;
    }

    // Override the inherited clone() method.
    override public function clone():Event {
    return new ThumbDeleteEvent(type, files);
    }

}
} 
```

在一个模块中，我像这样发送事件：

```
parentApplication.dispatchEvent(new ThumbDeleteEvent("parentApplication.thumbsDeleted", files)); 
```

在另一个模块中，我像这样监听事件：

```
public function init():void {
    parentApplication.addEventListener("parentApplication.thumbsDeleted", onThumbsDelete);
    } 
```

如果我使用 ThumbsDeleteEvent 作为传入侦听器函数的类型，如下所示：

```
public function onThumbsDelete(evt:ThumbDeleteEvent):void{
 trace("thumb delete event for thumbs: "+evt.files);
} 
```

我收到以下错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert  com.mypackage.events::ThumbDeleteEvent@26748a31 to com.mypackage.events.ThumbDeleteEvent. 
```

如果我只是使用 Event 作为传入侦听器函数的类型，如下所示：

```
public function onThumbsDelete(evt:ThumbDeleteEvent):void{
if(evt is ThumbDeleteEvent){
    trace("thumb delete event for thumbs: "+(evt as ThumbDeleteEvent).files);
}else{
    var type:XML = describeType(evt);
    trace(type.toXMLString());
}
} 
```

它工作但不认为它是 ThumbDeleteEvent 类型类（它命中 else 语句）描述类型的 xml 输出说它的类型是：

```
type name="com.mypackage.events::ThumbDeleteEvent" 
```

这里发生了什么？如果我在调试器中放置断点，它会说事件是 ThumbDeleteEvent，我可以看到 files 参数及其正确的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:23:27.677

这里的问题是，一个 swf 有他们对该类的定义，而另一个 swf 有自己的版本，该类完全相同。当尝试在它们之间进行转换时，flash 会进行字节码检查以查看定义是否相同，如果您曾经在文件中更改了某些内容而没有使用完全相同的信息更新两者，您将遇到此问题。即编译两个swf文件，然后在as文件中换一个空格，只编译一个swf文件。

呃，它又回到了我身边，所有这些问题都与不同模块之间的共享代码有关。我总是不停地解决这些错误，直到我让它工作，并且永远无法真正记住它是什么，因为它可能是很多问题。

*   确保两个已编译的 swf 文件都具有文件的最新版本。
*   确保两个 swf 文件与代码文件具有相同的链接嵌套。

如果这不起作用[无法真正记住，因为这个问题有点像解决一次并复制到其他每个项目]。

*   查看将事物添加到 ApplicationDomain 的顺序，并通过在 Flash 库中导入的内容确保没有其他内容具有自己的过期版本
*   将共享代码移动到使用“动态绑定”链接的单独代码库中
*   尝试共享界面
*   更改资产加载到 ApplicationDomain 的方式

* * *

希望有人对这个问题有更多的了解，并且可以准确地说明要使用哪些步骤，但这至少是一个起点......我可能有更多的时间来研究这个问题，并在今天晚些时候的某个时候写一篇关于它的帖子。

* * *

编辑：从另一个 SO-thread[自定义 AS3 类未更新](https://stackoverflow.com/questions/13352176/custom-as3-class-not-updating)

这是一个古老的问题，最终归结为验证错误。当您在一个或多个应用程序、模块、swf 等中嵌入“A 类”时，就会发生这种情况。最终，当“A 类”更改时，必须重新编译使用“A 类”的每个输出 swf。否则，您最终会遇到 1 个模块具有较新实现而其他模块没有的情况。当应用程序域遇到同名/包的类时，应用程序域被定义为“第一个获胜”，这使这个问题变得更加复杂——这意味着如果首先引用旧的，那么稍后加载的新的将被忽略。

更持久的解决方案是对 RSL 使用类提升，最终允许 RSL 控制实际的“A 类”引用，其中它还实现所有模块使用的“IClassAImpl”接口。这允许编译器将引用与它知道的签名交叉链接，而无需实际嵌入实际的类本身。

# jquery - 使用 jQuery 计算所选选项的数量

> ID：13754228
> 
> 赞同：0
> 
> 时间：2012-12-06T23:04:18.210
> 
> 标签：jquery

我的 DOM 中有超过 53 个类似`select`的部分，我需要计算用户选择了多少特定选项。

我的 DOM 的一个例子是这样的：

```
<select name="attendance" class="dd" id="20130101">
  <option>p</option>
  <option>a</option>
  <option>s</option>
</select>
<select name="attendance" class="dd" id="20130102">
  <option>p</option>
  <option>a</option>
  <option>s</option>
</select>
... x 51 more times! 
```

例如，我想做的是返回用户选择“a”的选项的数量（计数）。我试过`$('.dd option:selected').length`但是它返回所有选择部分的总数（53）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:07:28.813

[http://jsfiddle.net/dkK5x/](http://jsfiddle.net/dkK5x/)

```
$(".dd option:selected[value=a]").length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:08:13.833

您可以只组合选择器，在这种情况下`:contains`：

```
$(".dd option:contains(a):selected").length; 
```

但是，这取决于没有选项完全被另一个选项包含，例如：

```
<option>a</option>
<option>aa</option> 
```

您也可以设置`value`选项的选项，甚至可以使用 jQuery：

```
$("option").val(function () {
   return $(this).text();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:12:10.470

我会在你的选择中加入价值属性

```
<select name="attendance" class="dd" id="20130101">
  <option value="p">p</option>
  <option value="a">a</option>
  <option value="s">s</option>
</select> 
```

通过这个，选择器通过使用属性选择器相当容易：

```
$('select option[value="a"]:selected').length; 
```

我创建了一个小小提琴在实际使用中向您展示：http: [//jsfiddle.net/mx5Yd/1/](http://jsfiddle.net/mx5Yd/1/)

单击“count”时，带有“a”值的选定选项的数量会记录到控制台

# css - 导航进入页脚

> ID：13754229
> 
> 赞同：0
> 
> 时间：2012-12-06T23:04:21.230
> 
> 标签：css

[在我的页面上](http://www.inside-guides.co.uk/brentwood/computer-services/computer-repairs/pc-recovery-brentwood-501.html)，左导航进入页脚，我不知道为什么。

如果有人可以看看使用和检查器，那就太好了，因为有很多 CSS 和 html。但是如果你需要它，请告诉我，我会贴上去。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:08:46.283

`id="footer-wrapper"`带有负数的元素`margin-top`。

放`#footer-wrapper { margin-top:0; }`

# google-apps-script - 如何从多组单选按钮的网格中获取值？

> ID：13754230
> 
> 赞同：0
> 
> 时间：2012-12-06T23:04:30.390
> 
> 标签：google-apps-script

我的代码很长，但我认为我的问题很简单：如何构建一个谷歌 GUI 来显示多组单选按钮的网格。本质上，我想构建类似的东西：

简·史密斯：问题 1：radio1、radio2、radio3、radio4 问题 2：radio1、radio2、radio3、radio4

John Doe：问题 1：radio1、radio2、radio3、radio4 问题 2：radio1、radio2、radio3、radio4

等等等等……

我编写了整个代码来动态创建页面和所有嵌套的 for 循环，以便在用户提交后将每组单选按钮读回数组中的逻辑，然后能够解析并使用它。

但是我如何获得单选按钮本身的变量？

[这里](https://stackoverflow.com/questions/11444798/how-to-know-which-radio-button-is-selected)的解决方案似乎过于复杂，因为我认为需要将大约 10 行代码注入到我的 3 层深 for 循环的每一层中才能使其工作。除非我想错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:08:24.347

RadioButtons[必须具有相同的名称](https://developers.google.com/apps-script/class_radiobutton)（属于同一组）才能按预期工作（异或），因此为每个按钮分配一个客户端处理程序以将值设置为隐藏小部件（或文本框）的解决方案是， AFAIK，如果您不使用表单，这是唯一可行的解​​决方案。代码并不复杂，在您的情况下，每个问题都是相同的，因此您可以轻松地在代码中实现它。

# c# - Winforms WebBrowser 嵌入 Youtube 视频

> ID：13754235
> 
> 赞同：1
> 
> 时间：2012-12-06T23:04:53.810
> 
> 标签：c#, winforms, youtube, embed, webbrowser-control

到目前为止，我已经能够在我的 winforms 中嵌入和显示一个 Youtube 视频就好了..但是我有一个视频列表，我希望能够将当前 URL 更改为一个新 URL，但由于某种原因它不工作..

```
WebBrowser wbYoutube = new WebBrowser();
wbYoutube.Url = new Uri("http://www.youtube.com/embed/" + datagridview1[0, e.RowIndex].Value.ToString() + "?autoplay=1");
panel1.Controls.Add(wbYoutube); 
```

现在第一次可以正常工作，但是当我单击列表中的下一个视频时，它不会刷新该 WebBrowser 或面板。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:28:50.823

您每次都在添加一个新的网络浏览器。可能，新添加的网络浏览器在您看不到的面板上。

你不应该每次都添加一个新的。

做这样的事情，首先删除现有的网络浏览器，假设该 panel1 中没有其他浏览器：

```
 foreach (Control c in panel1.Controls)
{
    if (c is WebBrowser)
    {
        panel1.Controls.Remove(c);
    }
}

WebBrowser wbYoutube = new WebBrowser();
wbYoutube.Url = new Uri("http://www.youtube.com/embed/" + datagridview1[0, e.RowIndex].Value.ToString() + "?autoplay=1");
panel1.Controls.Add(wbYoutube); 
```

# ruby-on-rails - 测试时未找到 Rails 自定义路由，但适用于 curl

> ID：13754237
> 
> 赞同：0
> 
> 时间：2012-12-06T23:05:05.070
> 
> 标签：ruby-on-rails, unit-testing, rails-routing, testunit

在 config/routes.rb 中：

```
match 'app_config/:version' => "application#appconfig" 
```

测试/功能/application_controller_test.rb：

```
require 'test_helper'
class ApplicationControllerTest < ActionController::TestCase
  test "app config" do
    get "/app_config/v2"
    assert_response :success
  end
end 
```

`rake test`：

```
 1) Error:
test_app_config(ApplicationControllerTest):
ActionController::RoutingError: No route matches {:controller=>"application", :action=>"/app_config/v2"} 
```

但`$ curl localhost:3000/app_config/v2`有效，并返回我期望的响应，并按`rake routes`预期显示路线。知道发生了什么，或者如何进一步调查？这基本上是项目中唯一的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:35:57.453

该`get`方法不采取路线。它需要一个动作名称和一个参数的哈希值。

如果你想测试这个动作，你的测试应该是这样的：

```
test "for success" do
  get :appconfig, :version => "v2"
  assert_response :success
end 
```

如果您想测试路由[，文档中有一个教程](http://guides.rubyonrails.org/testing.html#testing-routes)。

```
test "should route to appconfig" do
  assert_routing '/app_config/v2', { :controller => "application", :action => "appconfig", :version => "v2" }
end 
```

# android - Android：简单的布局问题

> ID：13754239
> 
> 赞同：2
> 
> 时间：2012-12-06T23:05:08.080
> 
> 标签：android, layout

这可能是一个简单的布局问题，但我能够得到我想要的。

我有一个 LinearLayout（水平的），我想在里面显示 2 个布局，一个在左侧，一个在右侧（它们本身有叠加层、按钮等......）。如果空间允许，我希望右边的总是完全显示，而左边的只有在右边完全显示后才显示。

**更新**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="20dp" >

    <RelativeLayout
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:singleLine="true" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000111" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_centerVertical="true" />
    </RelativeLayout>
</LinearLayout> 
```

使用此代码，仅显示左侧。如果我将第一个 RelativeLayout 的权重更改为 1，那么两者都占据屏幕的 50%，这是我所期望的。

我想取的是权利，如果需要 100%，如果需要少于 100%，剩下的就用于左边的。请问我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:13:23.740

从右侧移除权重，并将左侧的宽度设置为 0，将权重设置为 1：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="20dp" >

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <!-- ..... -->

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <!-- ...... -->

    </RelativeLayout>
</LinearLayout> 
```

# java - 使用 hadoop 运行 jar 示例文件

> ID：13754242
> 
> 赞同：1
> 
> 时间：2012-12-06T23:05:16.617
> 
> 标签：java, linux, hadoop, bigdata

请对我放轻松。我刚刚同时启动了linux和hadoop。我对 linux 的经验几乎为零，并且是 hadoop 的完整初学者。

`hadoop-1.1.1-bin.tar.gz`我从这里下载了文件：

[http://www.motorlogy.com/apache/hadoop/common/hadoop-1.1.1/](http://www.motorlogy.com/apache/hadoop/common/hadoop-1.1.1/)

我能够打开它。

我正在遵循一个告诉我运行的教程：

```
bin/hadoop jar hadoop-*-examples.jar 
```

我收到此错误：

```
agordon@Ubuntu32:/hadoop/hadoop-1.1.1$ bin/hadoop jar hadoop-*-examples-1.0.3.jar
Exception in thread "main" java.io.IOException: Error opening job jar: hadoop-*-examples-1.0.3.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:90)
Caused by: java.io.FileNotFoundException: hadoop-*-examples-1.0.3.jar (No such file or directory)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:214)
    at java.util.zip.ZipFile.<init>(ZipFile.java:144)
    at java.util.jar.JarFile.<init>(JarFile.java:152)
    at java.util.jar.JarFile.<init>(JarFile.java:89)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:88) 
```

我究竟做错了什么？谢谢你的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:56:08.727

代替 hadoop-*-examples.jar 使用 jar 文件的全名。

# php - php sql查询更改url，但不更改数据

> ID：13754243
> 
> 赞同：3
> 
> 时间：2012-12-06T23:05:16.100
> 
> 标签：php, sql, max

我正在尝试为我的数据库制作一个“下一个按钮”，这样我就可以一次查看一张图像。但是，我现在拥有它的方式仅更改了 url，实际上并没有更改图像[，请在此处查看。](http://goawaymom.com/images.php?imagecount=84)无论 url 是什么，它都会坚持其上具有最高 id (87) 的图像。我该如何解决？

这就是我的数据库的外观

![在此处输入图像描述](../Images/e61a5f73c69ca0a49964482ef0a18ce6.png)

```
<?php 
require("includes/conn.php");

if (isset($_GET["imagecount"]))
$next = (int)$_GET["imagecount"]; //int is for sql injection 
else
    $next = 0;

$result = mysql_query("select * from people order by id desc limit $next, 1") or die(mysql_error());

?>

        <?php

            $result = mysql_query("select * from people order by id desc limit 0, 1 ") or die ("haznot DB: " . mysql_error());

            while ($row = mysql_fetch_assoc($result))
            {

                echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" /><br />";
            }

        ?>

<a href="images.php?imagecount=<?php echo $next+1; ?>">Next</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:11:08.647

你想要`WHERE id = $next`在你的查询中。不是你所拥有的。

为什么你有两个mysql查询......

```
"Select * FROM people WHERE `id` = $next" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:24:34.717

您应该选择`WHERE id=$next`. 您的图像似乎少于 87 张，因此限制子句不会像您预期的那样运行。

# security - SQL Server 登录在不应该成功的情况下成功

> ID：13754245
> 
> 赞同：1
> 
> 时间：2012-12-06T23:05:18.253
> 
> 标签：security, login, sql-server-2008-r2

今天早些时候，我将 DEV 环境中的数据库恢复到了 TEST 环境中。恢复后，我从数据库中删除了所有登录名（NT 和 SQL）。令我沮丧的是，DEV 环境中的数据库中的一个用户能够进入 TEST 数据库。我已经通过查看他的屏幕确认他的连接和使用 Profiler 并查看他的登录来确认这一点。

他无法访问预期的 TEST 上的任何其他数据库。

虽然没关系，DEV 是 2008R2，TEST 是 2012。

有没有人见过这样的东西？有没有可能我看不到的东西“带着备份过来”并且仍然存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:12:54.757

*数据库用户*和服务器*登录*之间存在区别。恢复数据库应该不会影响个人用于连接到服务器的登录名（用户名和密码）......

如果您仅从您恢复的数据库中删除了用户，则由于授予其登录名（例如 sysadmin）的访问权限，个人可能仍具有数据库权限。

检查服务器级别而不是数据库级别存在哪些登录。还要注意`BUILTIN\Administrator`服务器级别的角色，这可能会授予个人访问权限，因为他是 Windows 服务器级别的管理员。

# winapi - Windows SDK 和 MSDN 文档之间的 SAL 注释差异

> ID：13754254
> 
> 赞同：0
> 
> 时间：2012-12-06T23:06:03.417
> 
> 标签：winapi

有人可以在 UnmapDebugInformation 中解释这种 SAL 注释差异吗？

在 MSDN 库[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681405%28v=vs.85%29.aspx)中，DebugInfo 参数被注释为被**传入**：

```
BOOL WINAPI UnmapDebugInformation(
    _In_ PIMAGE_DEBUG_INFORMATION DebugInfo
); 
```

然而，在 DbgHelp.h 中，参数被注释为被传递**出去**：

```
BOOL IMAGEAPI UnmapDebugInformation(
    _Out_writes_(_Inexpressible_(unknown)) PIMAGE_DEBUG_INFORMATION DebugInfo
); 
```

为什么这个参数会像`_Out_`在 SDK 中那样被注释？

（我知道这是一个已弃用的功能；我有兴趣了解 SDK 中使用的 SAL 注释。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:24:00.663

SAL 注释与 MSDN 文档和 SDK 更新分开发展。MSDN 文章往往过时，这很可能曾经像`_In_`在 SDK 中一样被注释过。我得到的最旧的是 SDK v6.0，它使用`__out_xcount(unknown)`.

我认为传递的结构很可能会被函数更新，考虑到它包含一个列表，所以你看到的只是一个更好的版本。只有代码分析器才真正重要。

# java - 使用正则表达式匹配字符串中的多个 URL

> ID：13754255
> 
> 赞同：0
> 
> 时间：2012-12-06T23:06:08.643
> 
> 标签：java, regex

我正在尝试使用此处的正则表达式匹配字符串中的 URL：[Regular expression to match URLs in Java](https://stackoverflow.com/questions/163360/regular-expresion-to-match-urls-in-java)

它适用于一个 URL，但是当我在字符串中有两个 URL 时，它只匹配后者。

这是代码：

```
Pattern pat = Pattern.compile(".*((https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|])", Pattern.DOTALL);
Matcher matcher = pat.matcher("asdasd http://www.asd.as/asd/123 or http://qwe.qw/qwe");
// now matcher.groupCount() == 2, not 4 
```

编辑：我尝试过的东西：

```
// .* removed, now doesn't match anything // Another edit: actually works, see below
Pattern pat = Pattern.compile("((https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|])", Pattern.DOTALL);

// .* made lazy, still only matches one
Pattern pat = Pattern.compile(".*?((https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|])", Pattern.DOTALL); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:08:01.253

就是因为`.*`贪。它会尽可能多地消耗（整个字符串）然后回溯。即它将一次丢弃一个字符，直到剩余的字符可以组成一个 URL。因此，第一个 URL 将已匹配，但未捕获。不幸的是，比赛不能重叠。修复应该很简单。删除`.*`图案开头的 。然后您还可以从您的模式中删除外括号 - 无需再捕获任何内容，因为整个匹配将是您正在寻找的 URL。

```
Pattern pat = Pattern.compile("(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]", Pattern.DOTALL);
Matcher matcher = pat.matcher("asdasd http://www.asd.as/asd/123 or http://qwe.qw/qwe");
while (matcher.find()) {
  System.out.println(matcher.group());
} 
```

顺便说一句，`matcher.groupCount()`它不会告诉您任何事情，因为它会为您提供模式中的组数，而不是目标字符串中的捕获数。这就是为什么你的第二种方法（使用`.*?`）没有帮助。您仍然有两个捕获组。在调用`find`或任何事情之前，`matcher`不知道总共会找到多少捕获。

# php - 通过 AJAX POST 传递信息

> ID：13754262
> 
> 赞同：-2
> 
> 时间：2012-12-06T23:06:32.603
> 
> 标签：php, ajax, forms, post

我正在做这样的事情，我通过使用 AJAX 的帖子将变量传递给 php 脚本。它实际上正在进入我的 php 并运行我的 echo，但是当我打印 $_POST 数组时它没有打印任何内容。

```
function ajaxFunction(data){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}

ajaxRequest.open("POST", "process.php", true);
ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
ajaxRequest.setRequestHeader("Content-length", data.length);
ajaxRequest.setRequestHeader("Connection", "close");
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        //var data = array();
        //data = document.forms["order_form3"].getElementsByTagName("input");
    }
}

ajaxRequest.send(data); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:11:23.673

我建议使用像 firebug 这样的插件，甚至是 Chrome 或 Firefox 的内置功能，以查看在您的 post 请求中发送了哪些内容以及收到了哪些内容。ajax 响应不会打印在屏幕上的某个位置，因为您可能从“正常”http POST 请求到 php 页面知道它。它将作为 ajaxRequest 对象的一部分返回，您可以从那里获取它以使用 Javascript 来“打印”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:27:35.423

似乎您需要对参数进行编码，调用您的函数确实会提交您的数据，但是它们未绑定到另一端的变量。我并不惊讶 PHP 会丢弃您的数据。

见这里：[AJAX XMLHttpRequest POST](https://stackoverflow.com/questions/4276226/ajax-xmlhttprequest-post)

# java - 如何确保在退出 Java 应用程序之前运行一段代码

> ID：13754263
> 
> 赞同：6
> 
> 时间：2012-12-06T23:06:37.553
> 
> 标签：java, shutdown-hook

我正在使用许可的 API，它具有从具有有限数量许可证的许可证服务器获取/释放许可证对象的方法。在我的应用程序开始时，我调用该方法来获取许可证，但我想确保即使我的程序突然终止/崩溃（异常、SIGTERM 等）也能释放它。关闭挂钩是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T23:19:05.630

@thedan 关于硬 JVM 崩溃是正确的。如果 JVM 严重崩溃或收到 SIGKILL，它在退出之前将没有机会运行任何东西。在这种情况下，您无法在 Java 中解决此问题。（但其他语言的情况也一样......）

但是，如果 JVM 有序关闭以响应所有非 dameon 线程结束、调用 System.exit()、获取 SIGINT 等，那么 JVM 将尝试运行关闭挂钩。[在问答](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/hook-design.html)页面和[javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)中有更多关于 Java 的关闭挂钩机制的信息。

该`finally`方法也是一种选择，但仅在相关线程在 JVM 退出之前终止时才有效。如果`System.exit()`被调用或 JVM 被信号终止，则不会发生这种情况。关闭挂钩适用于更多情况。

（在我看来，`finally`实际上是在单个线程而不是整个应用程序上执行清理。但是，如果您的应用程序仅包含一个线程......或者它有一个负责有序关闭的主线程......那么`finally`可以达到应用程序清理的目的。）

* * *

真正的解决方案是配置许可 API，以便许可管理器可以检测到使用许可的应用程序实例何时消失而无需释放它。这是否可能取决于许可证管理器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:09:34.900

如果程序因 JVM 崩溃而终止，则您不能依赖任何被调用的内容。

如果程序因不涉及 JVM 的异常而终止，您应该能够将所有内容包装在 try/catch/finally 块中。finally 块中的任何代码都将保证在您的代码退出之前运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T23:14:24.143

对于例外情况，您可以将 的主体包裹`main`在`try/catch/block`. 为了处理`SIGTERM`信号，您可以[添加一个关闭挂钩](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。但是，不能保证关闭挂钩会被触发，例如`SIGKILL`.

来自[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)：

> *在极少数情况下，虚拟机可能会中止*，即停止运行而没有完全关闭。当虚拟机在外部终止时会发生这种情况，例如`SIGKILL`Unix 上的信号或`TerminateProcess`Microsoft Windows 上的调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。**如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T23:17:46.580

您可以通过从不调用 Sytem.exit() 来实现这一点。在 main() 中，您创建了“最后一道防线”

```
 try {
    startApp();
 } catch (Exception ex) {
      // do some logging
 } finally {
    releaseLicense();
 } 
```

# ruby - 如何在视图中显示关联值？

> ID：13754267
> 
> 赞同：1
> 
> 时间：2012-12-06T23:06:49.483
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有一个公司课程：

```
class Company < ActiveRecord::Base
    validates :name, :presence => true
    has_many :employees
end 
```

以及员工只能与一家公司关联的员工类：

```
class Employee < ActiveRecord::Base
    validates :lastName, :presence => true
    belongs_to :company
    validates :company, :presence => true
end 
```

当我列出员工时，

```
<% @employees.each do |employee| %>
  <tr>
    <td><%= employee.firstName %></td>      <- works
    <td><%= employee.lastName %></td>       <- works
    <td><%= employee.company.name  %></td>  <- Get an 'undefined method `name' for nil:NilClass' error
  </tr>
<% end %> 
```

我认为员工公司已被急切地加载，因此我可以直接在对象中访问关联，还是我的语法错误？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:20:44.740

我可以想到两种情况：

1.  `company_id = NULL`.

2.  `company_id = ID`但是这个id的公司已经不存在了。

无论如何，在控制台中检查有问题的对象是微不足道的：`Employee.reject(&:company)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:25:34.470

由于员工属于公司，您应该从公司本身加载员工。就像是：

```
class EmployeeController < ApplicationController

  def index
    @employees = @company.employees
    ...
  end
  ...
end 
```

# .htaccess - htaccess 重写 40 4 错误

> ID：13754271
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:07:15.103
> 
> 标签：.htaccess, mod-rewrite

我有一个旧的 wordpress 博客，我需要将所有帖子重定向到新系统，但 url 略有不同，帖子的日期被删除。例如，旧的 url 是这样的：

```
http://www.myolddomain.com/2012/11/30/the-title-of-my-post/ 
```

但是新的网址是这样的：

```
http://www.mynewdomain.com/blog/2012/11/the-title-of-my-post 
```

我很难让它正确重写。我不断收到消息说找不到 url (404) 但在旧服务器上。所以它不是重定向。这是我当前的 htaccess 条目：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^/([0-9]+)$/([0-9]+)$/([0-9]+)$/([0-9]+)$ http://www.mynewdomain.com/blog/$1/$2/$4[R=301,L] 
```

我很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:10:04.930

尝试：

```
RewriteRule ^([0-9]+)/([0-9]+)/([0-9]+)/([a-z0-9\-]+)/$ http://www.mynewdomain.com/blog/$1/$2/$4 [R=301,L] 
```

`$`符号（即）`end`应仅附加在末尾（如有必要！）。

[在这里](http://htaccess.madewithlove.be)测试，它的工作原理。

# ios - 身份验证登录问题 RESTful iOS

> ID：13754274
> 
> 赞同：3
> 
> 时间：2012-12-06T23:07:21.437
> 
> 标签：ios, rest, ios5, authentication, afnetworking

嘿伙计们，我的应用程序登录凭据的身份验证有问题。我目前有一个从我的本地主机运行的 Rails Web 服务，它具有一个主登录屏幕，供管理员用户使用密码凭据来显示功能。

问题是我正在创建一个与我的 rails 应用程序一起运行的 RESTful iOS 应用程序，它只接受这些 JSON 请求并绕过它们。

我想要的只是为我创建一种无需使用 auth_token 即可输入管理员和密码的方法？这似乎是唯一的方法，首先在钥匙串中简单地验证管理员用户。我使用框架 AFNetowrking 进行身份验证。SSKeychain 是帐户的包装器，而 SVProgressHUD 是轻量级的 hud

.我还在 i 终端中记录了 JSON 和 XML 请求，但由于无法连接到服务器并出现此错误而失败

```
error Domain=NSURLErrorDomain Code=-1004 "Could not connect to the server." UserInfo=0x7556d50 {NSErrorFailingURLStringKey=http://localhost:3000.json/, NSErrorFailingURLKey=http://localhost:3000.json/, NSLocalizedDescription=Could not connect to the server., NSUnderlyingError=0xeb805c0 "Could not connect to the server."} 
```

这就是我为 authClient 存储凭据的方式，所有想要做的就是指定用于登录 Web 服务客户端的相同信息。

用户名：admin 和密码：taliesin

但不确定如何做到这一点？

这些就是我对 AuthAPIClient、CredentialsStore 和 LoginViewController 的要求

**如果有人知道更简单的方法，请更新**，请告诉我，将不胜感激。

**AuthAPIClient.m**

```
#import "AuthAPIClient.h"
#import "CredentialStore.h"

#define BASE_URL @"http://admin:taliesin@localhost:3000"

@implementation AuthAPIClient

+ (id)sharedClient {

static AuthAPIClient *__instance;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    NSURL *baseUrl = [NSURL URLWithString:BASE_URL];
    __instance = [[AuthAPIClient alloc] initWithBaseURL:baseUrl];
});
return __instance;
}

- (id)initWithBaseURL:(NSURL *)url {
self = [super initWithBaseURL:url];
if (self) {
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setAuthTokenHeader];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(tokenChanged:)
                                                 name:@"token-changed"
                                               object:nil];
}
return self;
}

- (void)setAuthTokenHeader {
CredentialStore *store = [[CredentialStore alloc] init];
NSString *authToken = [store authToken];
[self setDefaultHeader:@"auth_token" value:authToken];
}

- (void)tokenChanged:(NSNotification *)notification {
[self setAuthTokenHeader];
}

@end 
```

**CredentialStore.m**

```
#import "CredentialStore.h"
#import "SSKeychain.h"

#define SERVICE_NAME @"http://admin:taliesin@localhost:3000"
#define AUTH_TOKEN_KEY @"auth_token"

  @implementation CredentialStore

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
NSString *user = [NSString stringWithFormat:@"%c%s%@", 'a', "a", @"a"];
NSString *password = [NSString stringWithFormat:@"%c%s%@", 'a', "a", @"a"];

NSURLCredential *credential = [NSURLCredential credentialWithUser:user
                                                         password:password
                                                              persistence:NSURLCredentialPersistenceForSession];
[[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];

}

- (BOOL)isLoggedIn {
return [self authToken] != nil;
}

   - (void)clearSavedCredentials {
[self setAuthToken:nil];
}

    - (NSString *)authToken {
    return [self secureValueForKey:AUTH_TOKEN_KEY];
    }

    - (void)setAuthToken:(NSString *)authToken {
[self setSecureValue:authToken forKey:AUTH_TOKEN_KEY];
[[NSNotificationCenter defaultCenter] postNotificationName:@"token-changed" object:self];
}

    - (void)setSecureValue:(NSString *)value forKey:(NSString *)key {
    if (value) {
    [SSKeychain setPassword:@"taliesin"
                 forService:SERVICE_NAME
                    account:key];
    } else {
    [SSKeychain deletePasswordForService:SERVICE_NAME account:key];
    }
   }

    - (NSString *)secureValueForKey:(NSString *)key {
return [SSKeychain passwordForService:SERVICE_NAME account:key];
  }

@end 
```

**登录视图API.m**

```
#import "LoginViewController.h"
#import "AuthAPIClient.h"
#import "CredentialStore.h"
#import "SVProgressHUD.h"

@interface UIViewController ()
@property (nonatomic, strong) IBOutlet UITextField *userTextField;
@property (nonatomic, strong) IBOutlet UITextField *passwordTextField;
@property (nonatomic, strong) CredentialStore *credentialStore;
@end

@implementation LoginViewController

+ (void)presentModallyFromViewController:(UIViewController *)viewController {
LoginViewController *loginViewController = [[LoginViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc]
                                         initWithRootViewController:loginViewController];
[viewController presentViewController:navController
                             animated:YES
                           completion:nil];
}
- (void)viewDidLoad {
[super viewDidLoad];

self.credentialStore = [[CredentialStore alloc] init];

self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel
                       target:self
                                                                                            action:@selector(cancel:)];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Login"
                                                                             style:UIBarButtonItemStyleDone
target:self
                                                                                action:@selector(login:)];

[self.userTextField becomeFirstResponder];
}

- (void)login:(id)sender {
[SVProgressHUD show];

id params = @{
@"admin": self.userTextField.text,
@"taliesin": self.passwordTextField.text
};

[[AuthAPIClient sharedClient] postPath:@"/auth/login.json"
                            parameters:params
                               success:^(AFHTTPRequestOperation *operation, id responseObject) {

                                   NSString *authToken = [responseObject       objectForKey:@"auth_token"];
                                   [self.credentialStore setAuthToken:authToken];

                                   [SVProgressHUD dismiss];

                                   [self dismissViewControllerAnimated:YES completion:nil];

                               } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                   if (operation.response.statusCode == 500) {
                                       [SVProgressHUD showErrorWithStatus:@"Something went  wrong!"];
                                   } else {
                                       NSData *jsonData = [operation.responseString dataUsingEncoding:NSUTF8StringEncoding];
                                       NSDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData
                                                                                            options:0
                                                                                                 error:nil];
                                       NSString *errorMessage = [json objectForKey:@"error"];
                                       [SVProgressHUD showErrorWithStatus:errorMessage];
                                   }
                               }];

}

- (void)cancel:(id)sender {
[self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

任何帮助或更多问题，请让我知道干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:56:09.270

**端点寻址**

我不知道如何处理远程地址，但我认为您在致电联系您的网络服务`AFNetworking`时犯了一个简单的错误。问题是这是一个操作系统，它有自己的. 因此，当您认为您正在调用远程 Web 服务时，您实际上是在要求在自身内部查找该服务。因此，无论您是在本地运行 Rails Web 服务还是在实际的远程服务器上运行，都要找出运行该服务的服务器的 IP 地址，并将其用作端点而不是.`localhost``iOS``iOS``localhost``iOS``localhost`

因此，更新指向您的服务的所有内容以使用 IP。不要将其更改为`127.0.0.1`，那将具有相同的效果。

例如：

```
#define BASE_URL @"http://admin:taliesin@192.168.0.1:3000" 
```

* * *

**验证：** `iOS`

假设你的 web-service 支持，即你已经配置了基本的 http 认证；那么身份验证不`iOS`应该是一个大问题。

如果您要使用`RESTKit`，它会很简单：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];
objectManager.client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
objectManager.client.username = username;
objectManager.client.password = password; 
```

我使用 Apple`KeychainItemWrapper`在 iOS 上存储/检索凭据。

```
//Store Account on Keychain (disk) for persistence.
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
KeychainItemWrapper *accountItem = appDelegate.accountItem;
[accountItem setObject:password forKey:(__bridge id)kSecValueData];
[accountItem setObject:username forKey:(__bridge id)kSecAttrAccount];   
username = password = nil; //keep account information only in the keychain. 
```

我不知道您的代码是否正确，但处理起来应该不会那么复杂`basic http auth`。也许`AFNetworking`不像抽象它那样抽象`RESTKit`？或者也许你没有使用正确的方法`AFNetworking`来做`basic http auth`？基本身份验证不需要访问令牌，因此我建议您在实现它之前阅读更多有关基本身份验证的信息。

* * *

**验证：** `Rails`

至于在 上实现认证`Rails`，也不应该太复杂。您需要做的就是配置您的控制器以向传入的请求提出身份验证质询`basic http auth`。一种方法是使用`before_filter: authenticate`. 这是一个[例子](https://stackoverflow.com/questions/2399467/rails-accessing-the-username-password-used-for-http-basic-auth)。

我认为 Railscasts 非常棒，他们碰巧有一个关于[基本 http auth](http://railscasts.com/episodes/82-http-basic-authentication)的教程和一个专门针对[rails 3.1 的教程。身份验证](http://railscasts.com/episodes/270-authentication-in-rails-3-1)。

干杯。

# mysql - 有没有办法让 MySQL 更详细地解释语法错误？

> ID：13754281
> 
> 赞同：16
> 
> 时间：2012-12-06T23:07:57.097
> 
> 标签：mysql, database

MySQL 仅在遇到语法或语法错误时给出无用的错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在附近使用的正确语法......

有什么方法可以让 MySQL 详细解释语法错误（例如期望右括号、非法表达式等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:27:22.587

答案是不。文档中列出了所有服务器错误消息及其代码。

[服务器错误代码和消息](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html)。

来自文档 -*对于错误检查，请使用错误代码，而不是错误消息。错误消息不会经常更改，但有可能。*

关于语法错误：如果没有更具体的错误代码，则会得到 Error: 1149 - *You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法...*

* * *

作为解决方法：您可以在 dbForge Studio for MySQL 中查看所有语法错误。创建新的 SQL 文档并编写一些代码，或者只是打开 SQL 文件，自动 SQL 语法检查将突出显示代码中的错误。

[自动 SQL 语法检查](https://www.devart.com/dbforge/mysql/studio/sqlmanagement.html#syntax_check)功能。

此功能在专业版和企业版中可用，但您可以在试用版上试用。

# ms-access - 如何根据每个列的条件获取表中不同列的总和

> ID：13754284
> 
> 赞同：0
> 
> 时间：2012-12-06T23:08:10.547
> 
> 标签：ms-access

我有一个有 30 个不同字段的表。只有当它们具有特定值时，我才想要所有列的总和。当字段中的值不满足特定条件时，我不希望将字段的值考虑为求和。比如我有5个字段id，Score1，Score2，Score3，Score4。只有当它们没有值 -8 或 -9 时，我才想要所有这些不同字段的总和。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:25:57.180

在“真正的”SQL 中，您将使用 CASE 语句，但在 Access 中似乎不支持该语句（通过 VBA 除外）。尝试使用类似的东西：

```
iif(score1 <> -8 and score1 <> -9, score1, 0) + iif(score2 <> -8 and score2 <> -9, score2, 0) + .... 
```

看看这个关于 iif 的详细信息[http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:38:15.930

在 SQL 中，您可以使用这样的查询，

SELECT c_id,ch_id, (IIF(Response4 <> -8 AND Response4 <> -8, Response4 , 0)) + (IIF(Response3 <> -8 AND Response3 <> -8, Response3 , 0)) AS Score from Teacher_Questionnaire ;

在 VBA 中，您可以使用以下相同的内容：

Dim db As Database Dim rs As Recordset Dim sSQL As String Dim sSQL1 As String

```
sSQL = " SELECT  SUM ( " & _ 
```

"(IIF(Teacher_Questionnaire.Response4 <> -8 AND Teacher_Questionnaire.Response4 <> -8, Teacher_Questionnaire.Response4 , 0)) + " & _ "(IIF(Teacher_Questionnaire.Response3 <> -8 AND Teacher_Questionnaire.Response3 <> -8 , Teacher_Questionnaire.Response3 , 0)) ) AS 分数" & _ "来自 Teacher_Questionnaire where ch_id = 99"

```
Set db = CurrentDb
Set rs = db.OpenRecordset(sSQL)

If rs.RecordCount > 0 Then
    Me.TxtLevel1 = rs!Score
Else
    Me.TxtLevel1 = "N/A"
End If

Set rs = Nothing
Set db = Nothing 
```

结束子

# servicestack - ServiceStack Razor cshtml 页面未在开发机器上提供

> ID：13754286
> 
> 赞同：3
> 
> 时间：2012-12-06T23:08:16.637
> 
> 标签：servicestack, iis-express

在处理 ServiceStack Razor 项目时，我看到不一致的结果。问题是某些项目开始无法在我的开发环境（Win 8，VS 2012）中提供 cshtml 页面。在调试主页（default.cshtml）中使用 IIS Express 返回：

```
Forbidden

Request.HttpMethod: GET
Request.PathInfo:
Request.QueryString: 
Request.RawUrl: /default.cshtml
App.IsIntegratedPipeline: True
App.WebHostPhysicalPath: C:\Users\jim\Documents\Visual Studio > 2012\Projects\Test.Web\Test.Web
App.WebHostRootFileNames: [about.cshtml,apphost.cs,default.cshtml,global.asax,global.asax.cs,packages.config,pricing.cshtml,privacy.cshtml,reconcilable.web.csproj,test.web.csproj.user,terms.cshtml,web.config,web.debug.config,web.release.config,bin,obj,properties,public,services,views]
App.DefaultRootFileName: default.cshtml 
```

如果我在不同的 URL 上请求页面，我会看到以下内容：

```
Handler for Request not found: 

Request.ApplicationPath: /
Request.CurrentExecutionFilePath: /terms
Request.FilePath: /terms
Request.HttpMethod: GET
Request.MapPath('~'): C:\Users\jim\Documents\Visual Studio 2012\Projects\Test.Web\Test.Web\
Request.Path: /terms
Request.PathInfo: 
Request.ResolvedPathInfo: /terms
Request.PhysicalPath: C:\Users\jim\Documents\Visual Studio 2012\Projects\Test.Web\Test.Web\terms
Request.PhysicalApplicationPath: C:\Users\jim\Documents\Visual Studio 2012\Projects\Test.Web\Test.Web\
Request.QueryString: 
Request.RawUrl: /terms
Request.Url.AbsoluteUri: http://localhost:51000/terms
Request.Url.AbsolutePath: /terms
Request.Url.Fragment: 
Request.Url.Host: localhost
Request.Url.LocalPath: /terms
Request.Url.Port: 51000
Request.Url.Query: 
Request.Url.Scheme: http
Request.Url.Segments: System.String[]
App.IsIntegratedPipeline: True
App.WebHostPhysicalPath: C:\Users\jim\Documents\Visual Studio 2012\Projects\Test.Web\Reconcilable.Web
App.WebHostRootFileNames: [about.cshtml,apphost.cs,default.cshtml,global.asax,global.asax.cs,packages.config,test.web.csproj,test.web.csproj.user,terms.cshtml,web.config,web.debug.config,web.release.config,bin,obj,properties,public,services,views]
App.DefaultRootFileName: default.cshtml
App.DefaultHandler: default.cshtml
App.DebugLastHandlerArgs: GET|/terms|C:\Users\jim\Documents\Visual Studio 2012\Projects\Test.Web\Test.Web\terms 
```

我可以创建一个干净的新项目来正确地提供页面，但是一个具有相同 web.config、AppHost、Global.asax 文件的旧项目会失败。代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
      <buildProviders>
        <add extension=".cshtml" type="ServiceStack.Razor.CSharpRazorBuildProvider, ServiceStack.Razor" />
      </buildProviders>
    </compilation>
  </system.web>
  <!-- Required for IIS 7.0 -->
  <system.webServer>
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
  <appSettings>
    <add key="webPages:Enabled" value="false" />
  </appSettings>
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
     <pages pageBaseType="ServiceStack.Razor.ViewPage">
      <namespaces>
        <add namespace="ServiceStack.Html" />
        <add namespace="ServiceStack.Razor" />
        <add namespace="ServiceStack.Text" />
        <add namespace="ServiceStack.OrmLite" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
</configuration>

public class Global : HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        new AppHost().Init();
    }

}

public class AppHost : AppHostBase
{
    public AppHost() : base("test", typeof(AppHost).Assembly) { }

    public override void Configure(Funq.Container container)
    {
        Plugins.Add(new RazorFormat());
    }
} 
```

将项目部署到服务器时，我没有看到同样的问题。有没有人能给我一些可能导致这种情况的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:22:32.797

回答我自己的问题：

我认为这个问题是我的开发机器特有的。当我在家用 PC 上调试站点时，没有问题。我的结论是我的开发机器的配置导致了这个问题。我想我需要查看机器而不是代码来尝试解决这个问题。

# objective-c - OS X NSDatePicker - 如何将日历设置为今天

> ID：13754288
> 
> 赞同：0
> 
> 时间：2012-12-06T23:08:30.703
> 
> 标签：objective-c, macos, cocoa, datepicker

我有一个“今天”按钮可以将 datePicker 重置为今天的日期。这适用于当月，但不适用于其他月份。

方法是：

```
- (IBAction)setToday:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
    [datePicker setDateValue:[NSDate date]];
    [datePicker setNeedsDisplay: YES];
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:21:05.227

我假设您的日期选择器是一个属性，在这种情况下您应该使用 self 关键字。

```
self.datePicker.date = [NSDate date]; 
```

# jquery - 如何使用 JQuery 1.8.3 形成一个选择器，以选择下面代码中的复选框？

> ID：13754308
> 
> 赞同：0
> 
> 时间：2012-12-06T23:10:36.370
> 
> 标签：jquery, html, jquery-selectors, internet-explorer-8

```
<table id="area-work-time" class="table" data-user-message="work time">
<tbody>
  <tr class="work-time-block">
    <td class="days">
      <label class="checbox_label">            
      <span class="checkbox" style="background-position: 0px -68px;"></span>
      <input type="checkbox" class="styled" data-content-key="Check Monday" data-original-value="False">
      <span class="work-time-text">Monday</span>
      </label>
    </td>
  </tr> 
</tbody>
</table> 
```

我有以下适用于 Chrome 和 Firefox 的代码，但该解决方案在 IE8 中使用以下内容失败：

```
$.each($('.work-time-block'), function () {
    alert("inside work-time-block");
    $('input:checkbox').change(function () {
        alert("inside change event");
    });
}); 
```

*这是整个代码块*

这建议的替代语法`$('input[type="checkbox"]' ...`等也不起作用，我看到了`inside work-time-block`7 次，每个`<tr>`都有一个`work-time-block`类；我从来没有看到`inside change event`警告框，它每次在 Chrome 和 Firefox 上都会弹出。

除了 IE 8 偶尔会抱怨脚本运行缓慢之外，我没有收到任何错误。

我没有写这个，我继承了它，我知道这不是正确的方法，但我已经尝试了一个多小时来找出正确的语法，将它应用于`checkbox`IE 8 中的 a 但没有成功，所以我呼吁 stackoverflow 集体寻求解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:19:28.997

在 IE8 浏览器模式和 IE8 文档模式下运行的 IE10 测试：

```
$('input:checkbox').change(function() {
    if ($(this).is(':checked')) {
        alert('checked');
    } else {
        alert('unchecked');
    }
});​ 
```

[http://jsfiddle.net/33uEP/1/](http://jsfiddle.net/33uEP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:16:02.290

这应该有效：

```
$("input[type='checkbox']").on("change",function(){window.alert("checked");}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:50:35.487

如果表格数据是由 JS 添加的，那么您可能需要添加一个 on() 处理程序，例如：

```
$('#area-work-time').on('change','input[type="checkbox"]',function(){
    alert("inside change event");
}); 
```

这使得事件触发动态创建的元素。

# c - 如何在不使用函数指针的 typedef 的情况下声明函数指针数组？

> ID：13754311
> 
> 赞同：6
> 
> 时间：2012-12-06T23:10:56.020
> 
> 标签：c

我正在向一位正在学习的同事演示如何使用函数指针以及他如何拥有它们的数组。我记下以下代码，以便他可以进行索引调度：

```
typedef void (*VoidFunction)();
VoidFunction functions[]  =
    {editProgramName,
     editProgramLength,
     editProgramCycles,
     editProgramNumberOfSets,
     editProgramEditSets,
     editProgramSave,
     editProgramCancel};
// now dispatch                    
functions[scroll.arrayFocusIndex](); 
```

然后他问……“没有 typedef 怎么办？” 在尝试了各种似乎可行的事情后，我发现，我没有任何线索可做。我发现的所有谷歌点击似乎总是使用 typedef。有没有办法在没有函数指针的 typedef 的情况下内联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:21:20.720

```
void (*functions[])() =
    {editProgramName,
     editProgramLength,
     editProgramCycles,
     editProgramNumberOfSets,
     editProgramEditSets,
     editProgramSave,
     editProgramCancel};
// now dispatch
functions[scroll.arrayFocusIndex](); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T23:17:11.010

这对我有用：

```
void a()
{
}

void b()
{
}

void (*functions[2])();

int main()
{
    functions[0] = a;
    functions[1] = b;
    return 0;
} 
```

# java - 使用 InputStream 的 Java 库的非阻塞 IO

> ID：13754313
> 
> 赞同：3
> 
> 时间：2012-12-06T23:11:07.120
> 
> 标签：java, scala, playframework-2.0, akka, nonblocking

我正在阅读非阻塞 I/O，因为我正在使用 Akka 和 Play，如果在这种情况下可以避免的话，阻塞是一个坏主意，但我不能让它与我的用例：

1.  通过网络获取文件（这里存在使用 nio 的替代方案，但现在我使用的是 URL.openStream）
2.  使用 BouncyCastle 解密文件（PGP）（这里我仅限于 InputStream）
3.  使用标准 Java GZIP 解压文件（仅限 InputStream）
4.  读取文件中的每一行，这是一个基于位置的平面文件，并转换为案例类（这里我对读取方法没有限制，现在是 scalax.io.Resource）
5.  坚持使用 Slick/JDBC（不确定 JDBC 是否阻塞）

它现在基本上一直在使用 InputStreams。但是，为了学习和提高我的理解，我正在研究是否可以使用非阻塞 IO 来做到这一点。

我基本上想通过管道流式传输文件，在管道中应用上面的每个步骤，最后在不阻塞的情况下持久化数据。

如果需要代码，我可以轻松提供，但我正在寻找一般级别的解决方案：当我依赖使用 java.io 的库时该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:07:40.137

我希望这对您的一些观点有所帮助：

1/2/3/4) Akka 可以很好地与使用`java.io.InputStream`和`java.io.OutputStream`. 请参阅此页面，特别是此部分：[http ://doc.akka.io/docs/akka/snapshot/scala/io.html](http://doc.akka.io/docs/akka/snapshot/scala/io.html)

> 可以通过 asOutputStream 方法将 ByteStringBuilder 包装在 java.io.OutputStream 中。同样，我们可以通过 asInputStream 将 ByteIterator 包装在 java.io.InputStream 中。使用这些，akka.io 应用程序可以集成基于 java.io 流的遗留代码。

1）你说通过网络获取文件。我猜是通过HTTP？您可以查看异步 HTTP 库。那里有许多相当成熟的异步 HTTP 库。我喜欢在 scala 中使用[Spray Client](http://spray.io/documentation/spray-client/)，因为它建立在 akka 之上，因此在 akka 环境中运行良好。它支持 GZIP，但不支持 PGP。

4）另一种选择：文件是否足够小以存储在内存中？如果是这样，您不必担心异步，因为您不会执行任何 IO。在等待 IO 时您不会阻塞，而是会不断地使用 CPU，因为内存很快。

5) JDBC 阻塞。您以 SQL 查询作为参数调用方法，返回类型是包含数据的结果集。该方法必须在执行 IO 时阻塞才能返回此数据。

有一些[Java 异步数据库驱动程序](http://code.google.com/p/adbcj/)，但我看到的所有驱动程序似乎都没有维护，所以我没有使用它们。

不要害怕。阅读 akka 文档的这一部分，了解如何在 akka 环境中处理阻塞库：http: [//doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Blocking_Needs_Careful_Management](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html#Blocking_Needs_Careful_Management)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:15:59.453

> 使用 BouncyCastle 解密文件（PGP）（这里我仅限于 InputStream）

由于您在此步骤中仅限于 InputStream，因此您已经回答了自己的问题。您可以使用 NIO 完成涉及网络的部分，但您的步骤 (2) 需要一个 InputStream。您可以使用 NIO 将文件从网络假脱机到磁盘，然后从那时起使用流来解压缩和解密 ( `CipherInputStream`) ...在理论上仍然是阻塞的，但在实践中是连续的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T03:58:41.703

我知道这并不完全是非阻塞 IO，但我认为你应该看看用在 Playframework 意义上的非阻塞的 map 组合 Futures（或 Promsies）。

```
def getFile(location: String): File = { //blocking code} 

def decrypt(file: File): File = ..

def unzip(file: File): PromiseFile = ..

def store(file: File): String = ..

def result(status: String): SimpleResult[Json] = ..

AsyncResult{ 
  Promise.pure(getFile("someloc")) map decrypt map unzip map store map result 
} 
```

# php - 通过匹配子字符串将字符串拆分为嵌套数组

> ID：13754314
> 
> 赞同：0
> 
> 时间：2012-12-06T23:11:07.493
> 
> 标签：php, arrays, string

我需要将一个字符串拆分成一个类似[这样](http://pastebin.com/g8CL5Xb2)的嵌套数组。[实际数据](http://pastebin.com/BLPVfvBj)的一小部分

*   没有固定的大小，代码可以是`aaa100`和`bbbbbbbb100`
*   没有固定的字符可以拆分

一个类似的问题是将[文件路径转换为数组](https://stackoverflow.com/questions/4079397/how-would-i-split-multiple-strings-into-a-deep-nested-array)，但我没有任何`/`想要拆分的东西。

### 用例：

几千种产品的产品进口。每个产品代码由以下内容组成：

```
xxx product type
yyy size
zzz colour 
```

所以你有类似`xxxx`,`xxxxyy`或`xxxxzz`的代码`xxxxyyzz`。

```
AAA100B // product type AAA with size 100 and colour blue
AAA200B // product type AAA with size 200 and colour blue
AAA100G // product type AAA with size 100 and colour green
BBB100B // product type BBB with size 100 and colour blue 
```

有些没有颜色，有些没有大小。有些可能没有“匹配”，只是一个单独的代码。

### 编辑

最后一个字符（或两个）通常是一种颜色。颜色可以是以下任何一种。（除了字符串的结尾，颜色代码永远不会出现在任何地方）

```
BK, GY
B, G, O, P, R, S 
```

数字被假定为大小，如果数字是`00-00`它的长度/宽度的形式，否则它是一个单一的大小`00`

### 编辑

问题的粗略开始，几乎在那里（扩展和合并是框架的一部分，所以只是在那里破解它们）[http://codepad.viper-7.com/Wp19g2](http://codepad.viper-7.com/Wp19g2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:38:03.147

嗯，我想最明显（但效率低下）的方法是获取您的代码字符串，遍历字母直到您达到一个数字（将所有字母记录为您的产品类型），当您达到数字记录时那个值和它后面的每个数字，直到你再次到达一个字母，然后开始记录颜色。当然，这假设颜色和产品类型不包括数字！

```
$product_size = ""; $product_type = ""; $product_color = "";
for ($i = 0; $i < strlen ( $code ); $i++ ) {
     if ( !is_numeric ( $code [ $i ] ) ) { 
          if ( $product_size == "" ) $product_type .= $code [ $i ];
          else $product_color .= $code [ $i ]
     } else $product_size .= $code [ $i ];
} 
```

不过，有一个分离器是一个很好的设计选择。我的解决方案的一个问题是，如果没有产品尺寸，那么它永远不会记录颜色。

# python - 无法在 Mac 上安装 Python 包（gcc-4.0 错误）

> ID：13754323
> 
> 赞同：0
> 
> 时间：2012-12-06T23:12:05.840
> 
> 标签：python, macos, gcc, compiler-construction, terminal

> **可能重复：**
> [如何在 Mac OS X 10.8 / Xcode 4.4 上使用/安装 gcc](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)

由于以下错误，我无法使用`easy_insall`or安装任何 Python 包。`pip`我到处寻找，看到了这个错误的几种变体，但还没有找到易于理解/遵循的解决方案。任何帮助深表感谢！

我在 Mac OS 10.8.1 上运行

Python 版本 2.7.3

Xcode 4.5.2 版（安装了命令行工具）

...如果您需要更多信息来找出问题所在，请询问！

```
$ easy_install pil
Searching for pil
Reading http://pypi.python.org/simple/pil/
Reading http://www.pythonware.com/products/pil
Reading http://effbot.org/zone/pil-changes-115.htm
Reading http://effbot.org/downloads/#Imaging
Best match: PIL 1.1.7
Downloading http://effbot.org/media/downloads/PIL-1.1.7.tar.gz
Processing PIL-1.1.7.tar.gz
Writing /var/folders/9q/bvqtzkbx1hg1934b36zgk0y40000gn/T/easy_install-wfZs_Y/PIL-1.1.7/setup.cfg
Running PIL-1.1.7/setup.py -q bdist_egg --dist-dir /var/folders/9q/bvqtzkbx1hg1934b36zgk0y40000gn/T/easy_install-wfZs_Y/PIL-1.1.7/egg-dist-tmp-DXWOmC
WARNING: '' not a valid package name; please use only.-separated package names in setup.py
--- using frameworks at /System/Library/Frameworks
unable to execute gcc-4.0: No such file or directory
error: Setup script exited with error: command 'gcc-4.0' failed with exit status 1 
```

不确定这是否有帮助，但是当我运行时`sudo port select --list gcc`，我得到以下信息：

```
Available versions for gcc:
    llvm-gcc42
    mp-gcc45
    none (active) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:50:55.267

这只是一个猜测，基于您必须安装 MacPorts（或者`sudo port select --list gcc`只会给您一个`port: command not found`错误）的事实，但我怀疑您已经安装了 MacPorts Python 2.7.3，并且您正在尝试为此安装 PIL .

如果你想将包添加到 MacPorts Python 安装中，你应该首先检查是否有它的端口，如果有，使用它：

```
port search pil 
```

在这种情况下，您会发现有一个`py27-pil`. 安装那个。

同时，当这不适用时，您几乎应该总是使用`pip`代替`easy_install`（有一些例外，特别是`readline`），并且您需要确保您的路径设置正确，以便您运行您认为的路径，或者您最终可能会使用 Apple python 运行为 MacPorts python 设置的脚本。

但是，我还怀疑您为早期版本的 OS X 安装了过期的 MacPorts 安装，并且在升级到 Mountain Lion 时没有遵循升级说明。如果这是真的，唯一合适的解决方法是获取已安装端口的列表`sudo rm -rf /opt/local`，运行最新的 MacPorts 安装程序，然后运行`sudo port install`所有以前安装的端口。

最重要的是，上次我使用 MacPorts Python（这是很久以前的事了，所以它可能不是最新信息），它没有安装东西`/Library`（IIRC，它设置`/opt/local/Library`为一个额外的库目录），这意味着您实际上至少安装了*三个*Python 2.7：Apple 的（in`/System/Library`和`/usr`）、MacPorts（in `/opt/local`）和其他一些版本（in`/Library`和可能），当您打算使用第三个时`/usr/local`，您正在使用第二个。`easy_install`

如果你不知道如何处理这种多份相同的疯狂，而且你没有非常非常好的理由邀请它，正确的答案是不要安装这些其他 Python（并卸载您已有的任何 Python）。你真的需要 MacPorts python 吗？你可以只使用内置的 Python 吗？如果不是，为什么不呢？你至少可以使用 python.org Python 吗？

如果您不想解决任何基本问题，并且您真的想将东西安装到 MacPorts Python 中，并且希望您拥有 gcc-4.0，那么您也许可以安装 macports`gcc4.0`端口，尽管您可能必须骗人相信那`macports-gcc-4.0`是真的`gcc-4.0`。（可能有一种方法可以用 MacPorts 正确地做到这一点；如果没有，符号链接可能会起作用。）但这可能是个坏主意，如果你回来时说“这似乎有效，但后来我在重建东西的 348 分钟内遇到了另一个错误”，没有人能帮助你。

# razor - 当前页面是特定节点 ID 的后代吗？

> ID：13754328
> 
> 赞同：2
> 
> 时间：2012-12-06T23:12:23.500
> 
> 标签：razor, umbraco

如何在 Umbraco 中使用剃刀模板检查当前页面是否是特定节点的后代？我将使用案例陈述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:19:39.533

不确定这些方法是否仍然适用于最新版本的 Umbraco，但适用于 4.7.1 并且`DynamicNode`曾经有这些方法：

```
@Model.AncestorOrSelf(string nodeTypeAlias)
@Model.AncestorOrSelf(int level)
@Model.AncestorOrSelf(Func<DynamicNode, bool> func) 
```

以及那些辅助功能：

```
@Model.IsDescendant(DynamicNode[,valueIfTrue][,valueIfFalse])
@Model.IsDescendantOrSelf(DynamicNode[,valueIfTrue][,valueIfFalse]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:14:28.817

如果您使用来自[http://ucomponents.codeplex.com/](http://ucomponents.codeplex.com/)的 uComponents / uQuery，您可以执行以下操作：

```
var isChildOf = uQuery.GetCurrentNode().GetAncestorNodes().Where(n => n.NodeTypeAlias == "MyHomePage").First() != null; 
```

（注意：我没有尝试过这段代码，但在生产中有类似的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:10:32.273

一种快速而肮脏的方法是检查节点 Path 属性（我认为@Model.Path 应该得到它）。这应该包含从节点返回到站点根目录的路径的逗号分隔字符串或数字数组（不确定哪个在我的头上）。您可以在该属性中检查您的父节点。这将节省使用 LINQ 或 uQuery 进行更昂贵的节点查找。

# wcf - 在 .NET 中使用 WCF REST 服务？

> ID：13754333
> 
> 赞同：0
> 
> 时间：2012-12-06T23:12:50.547
> 
> 标签：wcf, rest, soap, sharepoint-2010, wcf-binding

我在 Sharepoint 2010 Web 应用程序中托管了这个 WCF 服务。WCF 是使用以下工厂创建的：

```
Factory="Microsoft.SharePoint.Client.Services.MultipleBaseAddressWebServiceHostFactory, Microsoft.SharePoint.Client.ServerRuntime, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" 
```

如您所见，这是创建一个 REST 类型的服务。因为我们需要通过 jQuery 在客户端使用它。

现在我们还需要从 .NET 项目 (WinForms) 中访问它。我尝试在 VS 中添加服务引用，但没有找到任何东西。我想那是因为它不是 SOAP 服务，对吧？

那么如何在不破坏现有 jQuery 支持的情况下在 C# .NET 项目中使用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:47:24.383

是的，[添加服务引用不适用于 WCF REST 服务](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)。你有几个选择：

1.  向您的服务添加另一个端点，一个基于 SOAP 的端点，以便您能够在客户端上使用 Add Service Reference。我不确切知道它的`MultipleBaseAddressWebServiceHostFactory`作用，但您可以查看它如何创建其端点并在另一个工厂中重新创建它 - 然后添加额外的 SOAP 端点
2.  另一种选择是在服务实现和 .NET 客户端之间共享接口定义（服务合同加上任何现有的数据合同）。拥有该接口后，您可以使用`WebChannelFactory<T>`来创建 REST 服务的代理（就像您为 SOAP 服务创建的代理一样）。

# angularjs - browser() 对象在 angluarJS 中定义在哪里？

> ID：13754336
> 
> 赞同：3
> 
> 时间：2012-12-06T23:13:05.483
> 
> 标签：angularjs, karma-runner

在 Angular-phonecat 教程之后，scenario.js 中的第 7 步使用了 browser() 和 binding() 对象，但是当我尝试使用它们来测试我的应用程序时，运行 testacular 会说：

```
ReferenceError: browser is not defined
        at null.<anonymous> 
```

Intellij Ideal 还说：未解析的函数或方法 browser()。我在这里想念什么？

这里是教程中的代码片段：'use strict'；

/* [http://docs.angularjs.org/guide/dev_guide.e2e-testing](http://docs.angularjs.org/guide/dev_guide.e2e-testing) */

```
describe('PhoneCat App', function() {

  it('should redirect index.html to index.html#/phones', function() {
    browser().navigateTo('../../app/index.html');
    expect(browser().location().url()).toBe('/phones');
  });

  describe('Phone list view', function() {

    beforeEach(function() {
      browser().navigateTo('../../app/index.html#/phones'); //<---  browser() object is not defined !!! 
    });

    it('should filter the phone list as user types into the search box', function() {
      expect(repeater('.phones li').count()).toBe(20);

      input('query').enter('nexus');
      expect(repeater('.phones li').count()).toBe(1);

      input('query').enter('motorola');
      expect(repeater('.phones li').count()).toBe(8);
    });

    it('should be possible to control phone order via the drop down select box', function() {
      input('query').enter('tablet'); //let's narrow the dataset to make the test assertions shorter

      expect(repeater('.phones li', 'Phone List').column('phone.name')).
          toEqual(["Motorola XOOM\u2122 with Wi-Fi",
                   "MOTOROLA XOOM\u2122"]);

      select('orderProp').option('Alphabetical');

      expect(repeater('.phones li', 'Phone List').column('phone.name')).
          toEqual(["MOTOROLA XOOM\u2122",
                   "Motorola XOOM\u2122 with Wi-Fi"]);
    });

    it('should render phone specific links', function() {
      input('query').enter('nexus');
      element('.phones li a').click();
      expect(browser().location().url()).toBe('/phones/nexus-s');
    });
  });

  describe('Phone detail view', function() {

    beforeEach(function() {
      browser().navigateTo('../../app/index.html#/phones/nexus-s');
    });

    it('should display placeholder page with phoneId', function() {
      expect(binding('phoneId')).toBe('nexus-s');
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:25:03.283

它在 angular-scenario.js 中定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T04:59:52.850

//规格文件

```
'use strict';
describe('demoApp', function() {
it('should redirect node_list.html to node_list.html#/menu', function() {
browser().navigateTo('/node_list.html');
expect(browser().location().url()).toBe('/menu');
  });

describe('menu_view', function() {
beforeEach(function() {
  browser().navigateTo('/node_list.html#/menu'); 
});
});
});

Error:
Chrome 39.0.2171 (Linux) demoApp should redirect node_list.html to node_list.html#/menu FAILED
ReferenceError: browser is not defined at Object.<anonymous> (/test/viewpage.js:5:5) 
```

# php - PHP - 为电子邮件闭环验证创建随机哈希字符串

> ID：13754342
> 
> 赞同：2
> 
> 时间：2012-12-06T23:13:22.473
> 
> 标签：php, linux, encryption, random

我目前正在开展一个需要闭环电子邮件验证的项目。作为该过程的一部分，我需要生成一个随机哈希字符串，该字符串可以附加到发送给用户的链接中。当他们单击链接时，他们将被定向到我的网站，此时应用程序将确认哈希并完成注册过程。对于我一直在使用的所有哈希：

```
hash('sha256', $string); 
```

但是对于这个过程，我需要`$string`用一个随机值来播种。我有 Zend Framework 可用，并希望做这样的事情：

```
$crypt = new Zend_Filter_Encrypt_Mcrypt(array());

$hash = hash('sha256', $crypt->getVector()); 
```

我的问题是，这是生成随机哈希码的可行算法吗？

这是`Zend_Filter_Encrypt_Mcrypt::setVector()`方法（生成通过返回的值`getVector()`：

```
public function setVector($vector = null)
{
    $cipher = $this->_openCipher();
    $size   = mcrypt_enc_get_iv_size($cipher);
    if (empty($vector)) {
        $this->_srand();
        if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN' && version_compare(PHP_VERSION, '5.3.0', '<')) {
            $method = MCRYPT_RAND;
        } else {
            if (file_exists('/dev/urandom') || (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN')) {
                $method = MCRYPT_DEV_URANDOM;
            } elseif (file_exists('/dev/random')) {
                $method = MCRYPT_DEV_RANDOM;
            } else {
                $method = MCRYPT_RAND;
            }
        }
        $vector = mcrypt_create_iv($size, $method);
    } else if (strlen($vector) != $size) {
        require_once 'Zend/Filter/Exception.php';
        throw new Zend_Filter_Exception('The given vector has a wrong size for the set algorithm');
    }

    $this->_encryption['vector'] = $vector;
    $this->_closeCipher($cipher);

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:24:08.477

我对 ZF 不是很熟悉，但是其中包含这个词`Encrypt`的东西听起来像是错误的方法。

~~`->getVector()`听起来类似于初始化向量在对称加密中的作用；问题是这样的向量不需要是密码安全的，只是随机的。例如，它很可能只是实现为`uniqid(mt_rand())`或什么。~~

`->getVector()`用于`mcrypt`首先初始化加密密码以了解 IV 应该有多大；这通常是 8 个字节，但在很大程度上取决于所用密码的块大小。问题是，**你没有加密任何东西**；你只想要一个随机序列。

获得随机序列的更好方法是使用`openssl_random_pseudo_bytes()`8 个字节的大小。

在没有它的情况下，您还可以从熵文件中读取，例如`/dev/random`或`/dev/urandom`。之后，您可以运行它`binh2hex()`以生成十六进制字符串。

像这样的东西非常初级，但应该适用于 Linux'y 系统：

```
$rnd = bin2hex(file_get_contents('/dev/urandom', false, null, 0, 8)); 
```

作为 Windows 的后备方案，您仍然可以使用以下内容：

```
$rnd = hash('sha256', uniqid(mt_rand(), true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:42:36.620

您可能想查看具有相当全面的随机生成功能套件的ircmaxell 的[CryptLib 。](https://github.com/ircmaxell/PHP-CryptLib)如果您使用中等强度的随机字符串生成器，如下所示：

```
$generator = ( new CryptLib\Random\Factory() )->getMediumStrengthGenerator();
$string = $generator->generateString(LENGTH); 
```

该库将使用多个加密安全源并通过混合器运行它们以生成字符串。如果您只想要一个简单的解决方案并且不想使用 openssl 重新编译 PHP，那么值得一试。

请参阅有关安全字符串生成的[自述文件。](https://github.com/ircmaxell/PHP-CryptLib/blob/master/README.markdown#secure-random-numberstring-generation)

# jquery - Rails 编辑表单和 jQuery UI 日期选择器

> ID：13754345
> 
> 赞同：1
> 
> 时间：2012-12-06T23:13:34.170
> 
> 标签：jquery, ruby-on-rails, forms, datepicker

我正在使用 Simple Form gem 来处理我的表单。我有一些日期选择输入，我正在使用 jquery ui 中的 datepicker。这些在添加新记录时工作正常，但是当我尝试通过“编辑”操作更新记录时，日期选择器不会更新输入。当我单击时，日历会弹出，但是当我选择一个日期时，什么也没有发生。有没有人遇到过这个问题？

**我的观点：**

```
 <%= simple_form_for(@task, :remote => true) do |f| %>
  <%= f.association :user, :collection => User.where(:company_id => current_user.company_id), :prompt => "Unassigned", :label_method => :first_name, :value_method => :id, :label => false %>
  <%= f.input :date_due, :as => :string, :label => false, :input_html => { :value => @task.date_due.strftime("%B %d, %Y") } %>
<% end %>

<script>
  $(function(){
    //DATEPICKER FOR NEW TASKS
    $('input#task_date_due').datepicker({
      dateFormat: "MM d, yy",
      minDate: 0,
      maxDate: "<%= @task.phase.date_due.strftime("%B %d, %Y") %>"
    });
  });
</script> 
```

# c++ - Windows 上 Eclipse 上的 OpenCV

> ID：13754348
> 
> 赞同：4
> 
> 时间：2012-12-06T23:14:03.887
> 
> 标签：c++, opencv

我正在尝试在 Windows 上安装 opencv，这是我的步骤：

*   从网站下载 opencv 2.4.3
*   运行exe，解压文件夹到同一个路径
*   打开 Eclipse（之前设置和配置了 MinGW）
*   创建新项目 XYZ
*   添加了新文件夹“src”
*   添加了新类“main.cpp”
*   添加了以下代码：

    散列包含 <cv.h>
    散列包含 <highgui.h>

    ```
    using namespace cv;
    int main(int argc, char** argv) {

    Mat image;
    image = imread(argv[1], 1);

    if (argc != 2 || !image.data) {
        printf("No image data \n");
        return -1;
    }

    namedWindow("Display Image", CV_WINDOW_AUTOSIZE);
    imshow("Display Image", image);

    waitKey(0);

    return 0;
    } 
    ```

*   添加了两条路径

    *   "E:\Sources\opencv\build\include"
    *   "E:\Sources\opencv\build\include\opencv"
*   得到编译错误`"Symbol 'cv' could not be resolved"`

如有遗漏请指教

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T01:39:08.487

你需要最新的稳定版本的 openCV 2.4.3 。

日蚀朱诺！（面向 C/C++ 开发人员的 Eclipse IDE）和 MinGW - Windows 的极简 GNU

我们将忽略 x86/64 选择，因为我们将使用 32 编译器/和 32 openCV 构建，即使系统是 64 的！

第 1 步：下载并安装

蚀

从存档下载 Eclipse 并解压缩。（我假设您的计算机上已经有 JRE，如果没有的话！下载并安装它）。

明威

下载 MinGW 。安装程序将引导您完成整个过程！您可能必须将 bin 目录添加到路径中！（默认路径：C/MinGW/bin）

开放式CV

从链接下载 openCV exe，解压文件（在本教程的 C:/ 目录中）。确保您具有以下文件结构。

不要忘记添加 bin 目录 => 路径！

正如我之前提到的！即使我有 64 位操作系统，我也会使用 x86 构建，以避免编译器问题并使本教程对 x86 操作系统用户开放！

第 2 步：创建和配置

*   打开 Eclipse IDE！
*   创建一个新的 C++ 项目：文件 > 新建 > C++ 项目
*   选择一个 Hello Word 项目以获得一个预先结构化的项目！不要忘记选择 MinGW 工具链

单击完成，让我们开始工作吧！

现在您有了第一个 Hello word 项目！将 Soure 文件 .cpp 中的代码替换为以下代码

///////////////代码///////////

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
using namespace cv;
using namespace std;
int main(int argc, char** argv)
{
  Mat im = imread(argc == 2 ? argv[1] : "lenna.png", 1);
  if (im.empty())
  {
    cout << "Cannot open image!" << endl;
    return -1;
  }
  imshow("image", im);
  waitKey(0);
  return 0;
} 
```

///////////////代码///////////

显然代码上有多个错误，是的！我们必须链接图书馆！

现在转到属性 >> C/C++ 构建 >> 工具设置选项卡上的设置 >> GCC C++ 编译器 >> 包含并包含 opencv 路径！[opencvDir\build\include]

现在滚动到 MinGW C++ Linker >> Libraries 并添加库搜索路径 [opencvDIR\build\x86\mingw\lib]

在图书馆部分！我们为项目添加了尽可能多的库！在这里我添加了 4 个库只是为了教程的缘故，即使我们的测试代码只需要 highgui 的库就可以工作！库名称可以在 [opencvDIR\build\x86\mingw\lib] 示例中找到！对于 libopencv_video243.dll.a 在链接器中添加 opencv_video243 ！

点击确定！

现在我们可以构建我们的第一个项目了！您认为您必须将图片添加到项目中，如源代码“lenna.png”中所暗示的那样使用 lenna 祝您好运

构建并运行项目！如果你看到美丽的女士 :) 恭喜 :)

看看这里的快照！ [opencveclipse-on-windows](http://share-thevision.blogspot.com/2013/02/opencveclipse-on-windows.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T11:15:01.583

cv.h 用于旧的 C API。要使用 Cpp API，请尝试以下操作：

```
#include <opencv2/opencv.hpp> 
```

# google-chrome - Chrome 和 FireFox 中的负边距无法正确缩放

> ID：13754351
> 
> 赞同：1
> 
> 时间：2012-12-06T23:14:08.653
> 
> 标签：google-chrome, zooming, margin

当 Chrome 21 发布时，我有一个树查看器在 8 月停止正常工作。缩小（90% 或更低）时，布局会变得混乱。我认为这与左边距有关：-1px; 没有正确缩放。

我创建了一个错误[https://code.google.com/p/chromium/issues/detail?id=142178&thanks=142178&ts=1344723455](https://code.google.com/p/chromium/issues/detail?id=142178&thanks=142178&ts=1344723455)但没有回应。

该问题不会在 Safari、IE 和 chrome 20 中出现，并且直到最近才出现在 FireFox 中。

有什么建议么？

[http://jsfiddle.net/reueljw/yWgLU/3/](http://jsfiddle.net/reueljw/yWgLU/3/)

在 Chrome 或 FireFox 中重现缩小。

```
<style type="text/css">
    .tree                                     { float:left; display:block; position:relative; }
    .viewer                                   { margin-left:auto; margin-right:auto; font-size:0.6em; }
    .node-top                                 { position:relative; min-width:30px; margin-left:auto; margin-right:auto; }
    .node-left                                { position:relative; min-width:30px; }
    .node-right                               { position:relative; min-width:30px; }
    .node-data                                { max-width:60px; margin-left:auto; margin-right:auto;text-align:center; clear:both; overflow:hidden; height:15px; }        
    .starter                                  { width:49.9999%; min-height:10px; position:relative; float:left; }
    .ender                                    { margin-left: -1px; width: 49.9999%; min-height:10px; position:relative; float:left; }
    .tail                                     { border-right: 1px solid #ACE; width: 49.9999%; min-height:10px; position:relative; float:left;}
    .tailend                                  { margin-left: -1px; width: 49.9999%; min-height:10px; position:relative; float:left;}
    .node-left .ender                         { border-left: 1px solid #ACE; border-top: 1px solid #ACE;}
    .node-right .starter                      { border-right: 1px solid #ACE; border-top: 1px solid #ACE;}
    .child .tail                              { border: none }   
</style>
<div id="template-area" class="viewer" style="width: 70px; padding-top: 30px;">
    <div id="1" class="tree " style="width: 70px;">                 
        <div class="node-top">
            <div class="starter"></div>                     
            <div class="ender"></div>                     
            <div class="node-data node node-open">                
                <p class="node-text">1</p>                     
            </div>                     
            <div class="tail"></div>                     
            <div class="tailend"></div>                 
        </div>             
        <div id="2" class="tree  child " style="width: 35px;">                 
            <div class="node-left">                     
                <div class="starter">
                </div>                     
                <div class="ender"></div>                     
                <div class="node-data node node-open">        
                    <p class="node-text">2</p>   
                </div>                     
                <div class="tail"></div>                     
                <div class="tailend"></div>                 
            </div>             
        </div>
        <div id="3" class="tree  child " style="width: 35px;">
            <div class="node-right">
                <div class="starter"></div>                     
                <div class="ender"></div>                     
                <div class="node-data node node-open">         
                    <p class="node-text">3</p>  
                </div>                     
                <div class="tail"></div>                     
                <div class="tailend"></div>                 
            </div>             
        </div></div></div>
</div> 
```

# memory - file.read() 在 64 位 python 上返回超过 2 GB 时出错

> ID：13754352
> 
> 赞同：3
> 
> 时间：2012-12-06T23:14:11.263
> 
> 标签：memory, python-2.7, large-files

我有几个大约 50 GB 的文本文件，我需要解析它们以获取特定内容。我的文件内容被组织在 4 行块中。为了执行此分析，我使用 file.read(chunk_size) 读取文件的子部分并分成 4 个块，然后分析它们。

因为我经常运行这个脚本，所以我一直在优化并尝试改变块大小。我在具有 16 GB RAM 的计算机上在 OSX Lion 上运行 64 位 2.7.1 python，我注意到当我加载 >= 2^31 的块时，而不是预期的文本，我得到了大量的 /x00 重复。就我的测试一直显示到（包括 2^32）而言，这种情况仍在继续，之后我再次收到文本。但是，它似乎只返回与添加到 4 GB 以上缓冲区的字节数一样多的字符。

我的测试代码：

```
for i in range((2**31)-3, (2**31)+3)+range((2**32)-3, (2**32)+10):
    with open('mybigtextfile.txt', 'rU') as inf:
        print '%s\t%r'%(i, inf.read(i)[0:10]) 
```

我的输出：

```
2147483645  '@HWI-ST550'
2147483646  '@HWI-ST550'
2147483647  '@HWI-ST550'
2147483648  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
2147483649  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
2147483650  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967293  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967294  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967295  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967296  '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967297  '@\x00\x00\x00\x00\x00\x00\x00\x00\x00'
4294967298  '@H\x00\x00\x00\x00\x00\x00\x00\x00'
4294967299  '@HW\x00\x00\x00\x00\x00\x00\x00'
4294967300  '@HWI\x00\x00\x00\x00\x00\x00'
4294967301  '@HWI-\x00\x00\x00\x00\x00'
4294967302  '@HWI-S\x00\x00\x00\x00'
4294967303  '@HWI-ST\x00\x00\x00'
4294967304  '@HWI-ST5\x00\x00'
4294967305  '@HWI-ST55\x00' 
```

到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:41:27.600

是的，根据 cpython 源代码中的注释，这是已知问题。您可以在 Modules/_io/fileio.c 中查看它。并且该代码仅在 Microsoft Windows 64 位上添加了解决方法。

# ruby-on-rails - 在 Facebook 上分享时图片不显示

> ID：13754353
> 
> 赞同：0
> 
> 时间：2012-12-06T23:14:20.377
> 
> 标签：ruby-on-rails, facebook

我有一个小型 Rails 应用程序，我偶尔会在 Facebook 上分享它。尽管首页上有图像，但如果我分享此内容，则不会显示缩略图。我需要做些什么来确保 Facebook 可以获取图片，或者是否有任何理由无法从我的页面中获取某些内容？ [链接到我的网站](http://www.pastonpaper.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:01:07.623

`og:image`您正在定义 -根据[FB 调试器](https://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.pastonpaper.com%2F)- [http://pastonpaper.com/logo.jpg](http://pastonpaper.com/logo.jpg)是 404ing。一旦你修复了这个和任何其他错误，你应该很高兴。

# c# - asp.net中css的使用

> ID：13754355
> 
> 赞同：0
> 
> 时间：2012-12-06T23:14:21.547
> 
> 标签：c#, asp.net, css, visual-studio-2010

我怀疑在 asp.net 中我将 CssClass 类属性用于 Web 服务器控件。我正在 style.css 中编写所有 css 代码，这些代码将位于我项目的 style 文件夹中

```
 <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox> 
```

以上是文本框的示例。

现在的问题是我是否需要使用链接标签来说明我的 css 文件位于我项目的样式文件夹中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:35:05.403

`link`是的，您必须通过添加标记来链接样式表文件 (.css) 。

您也可以简单地将 css 文件拖到标记下的 .aspx 代码的 html 部分中`head`，这也将起作用 - 这将为您创建链接。

![见下图](../Images/b9cb7154c1f20d8d4439735ac1b06790.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:16:27.020

当然，您需要像在常规 html 中那样链接到您的 css 文件：

```
<link rel="stylesheet" type="text/css" href="style/mystyle.css"> 
```

在编写`.aspx`文件时，只需想像您正在编写一个能够通过 ASP.NET 视图引擎（这是附加`asp`标记发挥作用的地方）预处理页面的 HTML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:20:53.710

不，该标签仅用于在您的 CSS 文件中应用一个类。只需确保将 CSS 文件与页面链接，如下所示：

```
<head>
<link rel="stylesheet" type="text/css" href="path_to_your.css">
</head> 
```

# windows - 如何将时间附加到此命令提示符日期命令

> ID：13754359
> 
> 赞同：0
> 
> 时间：2012-12-06T23:14:37.013
> 
> 标签：windows, command-line

我正在尝试使用命令提示符运行 .bat 文件以将时间添加到日期。

目前，我有这个代码

```
MOVE...\folder\^"Mytest %DATE:/=-%.csv^" 
```

这产生

```
..\folder\Mytest Thu 12-06-2012.csv 
```

我想得到

```
..\folder\Mytest Thu 12-06-2012 21:45.csv 
```

尝试了各种各样的事情，但惨遭失败。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:21:22.293

这将起作用：

```
 %date:/=-% %time:~0,5%.csv 
```

使用`%time%`当前时间；的`:~`意思是“一个子字符串”，并且`0,5`说“从第一个字符（索引0）开始并持续5个字符”，所以整个事情的意思是“给我输出的前5个字符`time`”。

在命令提示符下使用它：

```
C:\>echo %date:/=-% %time:~0,5% 
```

输出

```
Thu 12-06-2012 18:19 
```

但是，您使用的格式会导致排序问题。我的建议是删除星期几部分，并将日期输出更改为`CCYY-MM-DD`，这在您尝试查找特定日期时会更有用。你可以使用这个：

```
echo %date:~10,4%-%date:~4,2%-%date:~7,2% %time:~0,5% 
```

哪个输出

```
2012-12-06 18:33 
```

# java - java +simple Webserver +htmlform 编码

> ID：13754363
> 
> 赞同：0
> 
> 时间：2012-12-06T23:14:59.840
> 
> 标签：java, character-encoding, forms

作为一项任务，我让我用 Java 实现了一个简单的网络服务器。

我的问题是：有一个看起来像这样的 html 表单：

```
<form method="POST" action="dummy" accept-charset="UTF-8">
<input name="in1" type="text"/>
<input type="submit" value="GO"/>
</form> 
```

我输入 >dc=mydomain.com<（没有 ><），按 GO。

网络服务器从套接字读取帖子，但参数突然变为“dc%3Dmydomain.com”

附言。我正在运行 java 1.7.0-b147, 64bit

我怎样才能避免 html 形式的转义字符，如“=”和“，”到 %3D 和 %2C？或者让java从文本框中重建原始字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:29:22.877

在 Web 服务器代码中，您需要对其使用 java.net.URLDecoder.decode。表单的默认编码类型是 urlencoded。

高温高压

# java - 在范围内搜索类的方法调用和字段引用

> ID：13754365
> 
> 赞同：0
> 
> 时间：2012-12-06T23:15:10.000
> 
> 标签：java, eclipse, search, static-analysis

给定以下示例：

```
public class Foo {
    public void myMethod(Bar arg) {
        SomeOtherClass.baz(arg);
        ....
    }
} 
```

我想有一种方法可以在传递给的所有方法`Bar.*`的范围内执行搜索。换句话说，对于所有以 开头的代码路径，调用方法或引用字段的代码中的所有位置在哪里？`Foo.myMethod()``arg``arg``Foo.myMethod()`

注意：我更喜欢在 Eclipse 中执行此操作，但也愿意使用其他工具（在 Linux 下会很棒——如果需要，可以使用 windows）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:53:02.953

看看一个（？）伟大的 IDE：**IDEA IntelliJ**（12 刚刚发布:)）及其著名的**结构搜索**： http: [//www.jetbrains.com/idea/documentation/ssr.html](http://www.jetbrains.com/idea/documentation/ssr.html)

# ios - 是否可以在 iOS 上使用 Google Translate api？

> ID：13754368
> 
> 赞同：6
> 
> 时间：2012-12-06T23:15:32.013
> 
> 标签：ios, iphone, google-translate

如何在 iOS 6.0 中使用谷歌翻译 API？我曾尝试使用谷歌搜索文档并尝试对其进行研究，但由于谷歌使 api 不再免费，因此我找不到任何更新的内容。

我唯一能找到的是这个，但它并没有太大帮助，因为我需要使用我拥有的 api 密钥，但我不知道如何使用。

[http://www.raywenderlich.com/1448/how-to-translate-text-with-google-translate-and-json-on-the-iphone](http://www.raywenderlich.com/1448/how-to-translate-text-with-google-translate-and-json-on-the-iphone)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:22:12.293

这似乎是最新的：[https ://developers.google.com/translate/v2/getting_started](https://developers.google.com/translate/v2/getting_started)

（完全元：糟糕！您的答案无法提交，因为：正文必须至少为 30 个字符；您输入了 23 个字符）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T18:35:29.800

是的。获得 Google 密钥后，只需将其插入[FGTranslator 即可](https://github.com/gpolak/FGTranslator)。请注意，生成“服务器”密钥，因为 Google Translate API 当前不支持 iOS 密钥。

在那之后，这只是对 translate 函数的单行调用。

```
FGTranslator *translator = [[FGTranslator alloc] initWithGoogleAPIKey:@"your_google_key"];

[translator translateText:@"Bonjour!" 
               completion:^(NSError *error, NSString *translated, NSString *sourceLanguage)
{
    NSLog(@"translated from %@: %@", sourceLanguage, translated);
}]; 
```

# c - 当我尝试在其他线程中调用 GtkWidget 对象时，GTK 应用程序崩溃

> ID：13754369
> 
> 赞同：1
> 
> 时间：2012-12-06T23:15:41.327
> 
> 标签：c, multithreading, gtk

我有一个非常简单的应用程序，带有文本输入和按钮。

当用户按下按钮时，应用程序从 URL 下载文件（在其他线程中），成功时会打开所有完成的对话框消息。在下载期间我激活微调器（如忙）

![在此处输入图像描述](../Images/9f09b4509c4598f75726cf71f2a8da2d.png)

由于我不知道连接下载文件需要多长时间，我为此使用了单独的线程。但是在“对话框显示”上，我的应用程序失败了，并且出现了以下错误：

```
(enter_license.exe:210232): Gdk-WARNING **: gdkdrawable-win32.c:1873: GetDC failed: Invalid window handle.

(enter_license.exe:210232): Gdk-WARNING **: gdkgc-win32.c:968: GetCurrentObject failed: The handle is invalid.

(enter_license.exe:210232): Gdk-WARNING **: gdkgc-win32.c:970: RestoreDC failed: The handle is invalid.

(enter_license.exe:210232): Gdk-CRITICAL **: _gdk_win32_drawable_release_dc: assertion `impl->hdc_count > 0' failed

(enter_license.exe:210232): Gdk-WARNING **: gdkwindow-win32.c:2216: SetWindowLongPtr failed: Invalid window handle. 
```

当我尝试从单独的线程调用 GTK 对象时，听起来好像有问题。也许不知何故我需要调用句柄（回调）在主线程中实现“show_dialog”？

编译：

```
 gcc -IC:/MinGW/include -o enter_license enter_license.c  `pkg-config --libs --cflags gtk+-2.0 gthread-2.0`` 
```

流程：main -> 调用“do_something” -> 创建线程并调用“argument_thread” ->

这是一段代码：

```
typedef struct _Data
{
 GtkWidget *win; 
 } Data; 
```

**主要的**

```
int main(int argc, char **argv)
{
 GtkWidget *window;

 gtk_init(&argc, &argv);
 window = do_something(NULL, argv);
 g_signal_connect(window, "destroy", G_CALLBACK(gtk_main_quit), NULL);
 gtk_main();    

return 0;
} 
```

**做点什么**

```
GtkWidget * do_something(GtkWidget *do_widget, char **argv){
  ....
 GtkWidget *window;

if (!window){
window = gtk_dialog_new_with_buttons ("GtkSpinner",
                                      GTK_WINDOW (do_widget),
                                      0,
                                      GTK_STOCK_CLOSE,
                                      GTK_RESPONSE_NONE,
                                      NULL);
gtk_window_set_resizable (GTK_WINDOW (window), FALSE);

g_signal_connect (window, "response", G_CALLBACK (gtk_widget_destroy), NULL);
g_signal_connect (window, "destroy",  G_CALLBACK (gtk_widget_destroyed), &window);

 ....

if (!gtk_widget_get_visible (window)){
 gtk_widget_show_all (window);
}
else{
 gtk_widget_destroy (window);
}

    // define thread
    GThread*  thread;
    GError*   err;  
    Data data;

data.win = window;

     thread = g_thread_create((GThreadFunc)argument_thread,&data,FALSE, &err);
 return window;
} 
```

**显示对话框**

```
gboolean show_dialog( GtkWidget* mw)
{
 GtkWidget *dialog;

  printf("BOO: \n");

  // here all works fine
  sleep(3000);
  gtk_widget_show(spinner_sensitive);
  gtk_spinner_start (GTK_SPINNER (spinner_sensitive));
  sleep(3000);
  gtk_spinner_stop (GTK_SPINNER (spinner_sensitive));
  sleep(3000);
  gtk_widget_hide(spinner_sensitive);

  printf("BOO\n");
  // here dialog is shown for 1-10 milisec and get error.

     dialog = gtk_message_dialog_new (GTK_WINDOW(mw),
                     GTK_DIALOG_DESTROY_WITH_PARENT,
                     GTK_MESSAGE_INFO,
                     GTK_BUTTONS_CLOSE,
                     "Downloaded successfully");

             g_signal_connect_swapped (G_OBJECT (dialog), "response",
                     G_CALLBACK (gtk_widget_destroy),
                     G_OBJECT (dialog));
             gtk_widget_show(dialog);
printf("BOO\n");

} 
```

**参数线程**

```
void *argument_thread( gpointer ptr ) {
  Data *data = (Data*)ptr;
gdk_threads_enter();
 show_dialog (data->win);
 gdk_threads_leave();
  return( NULL );
} 
```

请帮我，

任何和所有的建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:32:13.787

GTK 不是线程安全的，因此任何与 GUI 交互的东西都必须在主线程上运行。

下载完成时使用该`g_idle_add`函数通知您的主线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:59:12.713

根据@VincentPovirk 的说法，仅针对寻求答案的人，这是一个有效的实现：

进入我们调用`g_idle_add`和调用的线程，该线程`callback_func`将在第二个线程之外实现（又名在主线程中）：

```
gboolean show_dialog( GtkWidget* mw)
{
sleep(3000);
gtk_widget_show(spinner_sensitive);
gtk_spinner_start (GTK_SPINNER (spinner_sensitive));
sleep(3000);
gtk_spinner_stop (GTK_SPINNER (spinner_sensitive));
gtk_widget_hide(spinner_sensitive);

g_idle_add(callback_func, NULL);  
}

gint callback_func(void *unused)
{
  GtkWidget *dialog;
  dialog = gtk_message_dialog_new (GTK_WINDOW(window),
                     GTK_DIALOG_DESTROY_WITH_PARENT,
                     GTK_MESSAGE_INFO,
                     GTK_BUTTONS_CLOSE,
                     "Succeeded.");

             g_signal_connect_swapped (G_OBJECT (dialog), "response",
                     G_CALLBACK (gtk_widget_destroy),
                     G_OBJECT (dialog));
             gtk_widget_show(dialog);
return FALSE;

} 
```

# sql - SQL 查询：一对多关系是否包含元素 X

> ID：13754371
> 
> 赞同：0
> 
> 时间：2012-12-06T23:15:49.470
> 
> 标签：sql

我正在构建一个报告数据库，部分要求是创建多个布尔列以展平 1:M 关系。这是一个例子：

表 1 是**学习表**，具有唯一 ID。

表 2 是**语言表**，与表 1 具有 1:many 的关系。

```
Study Table
Id    Name
1     Study1
2     Study2
3     Study3

LanguageTable
StudyId    Language
1          English
1          French
1          Chinese
2          French
3          Chinese 
```

我想在我的报告表中有几列，例如**Is In English**或**Is in European Language**即

```
Study Language Report
StudyId      IsInEnglish        IsInEuropeanLanguage
1            true               true                   
2            false              true
3            false              false 
```

给定表 1 和表 2，我将如何构建 SQL 查询来生成此表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:18:28.000

```
 select s.StudyId,
          max(case when Language='English' then 1 else 0 end) IsInEnglish,
          max(case when Language in ('English','French') then 1 else 0 end) IsInEuropeanLanguage
     from study s
left join languages l on s.studyid = l.studyid
 group by s.studyid 
```

# php - jQuery灯箱表单未提交数据

> ID：13754379
> 
> 赞同：1
> 
> 时间：2012-12-06T23:16:32.793
> 
> 标签：php, jquery, forms, submit, lightbox

我到处看了看，似乎人们只想在提交表单后打开一个灯箱。但是，我想从灯箱提交表单。在我将表单放入灯箱之前，我的所有代码都有效，所以我想知道这是否可能。

表单提交代码（PHP）：

```
if(isset($_POST['updatemain'])) {
$company = $_POST['conameu'];
$vault = $_POST['vnameu'];
$q = "UPDATE siteinformation SET SiteName = :company, VaultName = :vault";
$query = $db->prepare($q);
$results = $query->execute(array(
    ":company"  => $company,
    ":vault"    => $vault 

));
header('Location: vault.php'); 
```

}

灯箱代码中的表格：

```
<div class="backdrop"></div>
<div class="box"><div class="close"><img src="images/close.png" /></div>
<fieldset>
<legend>Pick a Section to Work on</legend>
<div id="prompt">Select a Section:</div>
<div id="answer">
<select id="sectionchange">
<option value="main">Main Titles</option>
<option value="organ">Emergency Organizations</option>
<option value="number">Common Numbers</option>
<option value="website">Common Websites</option>
<option value="quicklink">Quick Links</option>
</select>
</div>
</fieldset>
<div id="mainsection">
<form id="updatemain" action="" method="post">
<fieldset>
<legend><strong>Main Title Information</strong></legend>
<div id="prompt">Client Company Name:</div><div id="answer"><input type="text" name="conameu"     id="conameu" /></div>
<div id="prompt">Web Tool Name:</div><div id="answer"><input type="text" name="vnameu" id="vnameu" /></div>
<div id="prompt"><input type="submit" id="updatemain" value="Update Information" /></div>
</fieldset>
</form>
</div>
</div>
</div> 
```

就像我说的那样，这很好，直到它在灯箱中，所以我在这一点上有点难过。

有任何想法吗？

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:54:05.307

更新以反映“名称”必须出现在提交按钮中才能正常工作，即使出于某种原因它之前不需要。再次感谢@andbeyond

```
<div class="backdrop"></div>
<div class="box"><div class="close"><img src="images/close.png" /></div>
<fieldset>
<legend>Pick a Section to Work on</legend>
<div id="prompt">Select a Section:</div>
<div id="answer">
<select id="sectionchange">
<option value="main">Main Titles</option>
<option value="organ">Emergency Organizations</option>
<option value="number">Common Numbers</option>
<option value="website">Common Websites</option>
<option value="quicklink">Quick Links</option>
</select>
</div>
</fieldset>
<div id="mainsection">
<form id="updatemain" action="" method="post">
<fieldset>
<legend><strong>Main Title Information</strong></legend>
<div id="prompt">Client Company Name:</div><div id="answer"><input type="text"     name="conameu"     id="conameu" /></div>
<div id="prompt">Web Tool Name:</div><div id="answer"><input type="text" name="vnameu" id="vnameu" /></div>
<div id="prompt"><input type="submit" id="updatemain" name="updatemain" value="Update Information" /></div>
</fieldset>
</form>
</div>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:51:04.210

根据评论部分：

`name`将具有值的属性添加`updatemain`到您的提交按钮。

Without this, PHP will not have a POST value `$_POST['updatemain']` set, so the first if statement will always be false.

# python - Problems extending twisted.web's static.File class

> ID：13754384
> 
> 赞同：1
> 
> 时间：2012-12-06T23:16:48.487
> 
> 标签：python, twisted, twisted.web

I'm trying to add transcoding support to some server I'm writing, I need to get in between the request being received and being carried out.

Currently I've got:

```
class TransCodingFile(static.File):
def render(self,request):
    static.File.render(self,request) 
```

but when I try to request a file I get a:

"Failure: exceptions.RuntimeError: Producer was not unregistered for xxx.mp4" error

The new class works as static.File if I remove the render() method.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:28:30.610

Well that was stupid.

```
class TransCodingFile(static.File):
    def render(self,request):
        return static.File.render(self,request) 
```

works fine. I wish the error message was more helpful.

# php - 如何在没有回车的情况下在 PHP 中回显？

> ID：13754391
> 
> 赞同：6
> 
> 时间：2012-12-06T23:17:24.163
> 
> 标签：php, echo, carriage-return

每当我在 PHP 中回显时，我都会得到两个额外的回车符。例如：

```
<?php
  echo 'abc';
?> 
```

产生 abc[cr][cr]. 如果我将脚本复制到不同的服务器，我什至会得到 [cr]abc[cr][cr]。

如何强制 PHP 只回显我的字符串 'abc' 而不是回车符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T23:19:17.280

`echo``\n`在 PHP中不附加 a 。

不过，您可能希望放弃收盘`?>`，然后保证不会有任何尾随输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T23:18:53.537

删除后面的两个回车`?>`（或删除`?>`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:34:01.013

`echo`默认情况下没有回车。

意外的空白或行主要是由脚本使用引起的。如果您的进程将在一行上，那么也请在脚本端使用一行。至于这个例子；`

作为提示，在不同的主题上，即使是更方便的事情，您也可以通过使用[条件语句](http://php.net/manual/en/language.operators.comparison.php)`if`的简单/语句来做到这一点`else`

考虑以下示例： `<?php echo ($foo == "bar") ? "Foo was bar." : "Foo wasn't bar."; ?>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T23:34:27.620

PHP 脚本原生地放置在 HTML 文件中，因此对空格敏感。这意味着您的标签周围的任何空白区域都将在屏幕上可见。正如你所希望的那样，它可能是段落的中间！

正如其他答案所暗示的那样，要么清除标签周围的新行返回，要么您可以通过欺骗 PHP 解释器来欺骗删除结束换行符 - 通过留下最后的“？>”标签。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T02:45:41.563

我必须得出结论，服务器设置会导致 PHP 在所有输出之前和之后使用任意数量的回车符。当然，这是我正在使用的网络主机的配置文件中的错误。不应该是这样的。

# multithreading - 一个套接字连接多个命名空间

> ID：13754398
> 
> 赞同：1
> 
> 时间：2012-12-06T23:17:50.877
> 
> 标签：multithreading, node.js, namespaces, socket.io

我有一个应用程序使用多个命名空间来区分不同类型的客户端，所以从一开始我就以这种方式将它们分开（我使用集群并产生 4 个进程）

```
//server code
io.of("/TYPE_ONE").on("connection", function(socket){
    console.log("Client connected to TYPE_ONE with id:\t"+socket.id+"\t"+process.env.NODE_WORKER_ID);
});

io.of("/TYPE_TWO").on("connection", function(socket){
    console.log("Client connected to TYPE_TWO with id:\t"+socket.id+"\t"+process.env.NODE_WORKER_ID);
});

//client code

//for type one
socket = io.connect("http://mydomain.com/TYPE_ONE", socketOptions);

//different files always, only one type sent to each client

//for type two
socket = io.connect("http://mydomain.com/TYPE_TWO", socketOptions); 
```

突然，在查看控制台后，当单个客户端连接时，我得到以下输出：

```
Client connected to TYPE_ONE with id:    1234      3
 .
 .
 .
Client connected to TYPE_TWO with it:    1234      3 
(same id and workerId as previous connection) 
```

我确定只有一个连接到服务器，t

我想知道这可能是什么原因造成的？因为我查看了我的代码，并将方法简化为我刚刚展示的存根，但似乎无法找到问题所在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:48:09.077

您的代码中没有错误：您只有一个连接，因此套接字使用一个 socket.id 连接到命名空间。我不知道如何建立很多连接，也许你应该尝试两个连接端口，或者多次连接/监听服务器。

为了解决您的问题，我会使用一个连接，但请考虑如何构建您的网站。例如，使用房间并在会话中存储新用户 ID，以确定将用户放置在哪个房间或命名空间中。

“多个命名空间和多个房间可以共享相同的（WebSocket）连接” [socket.io 房间或命名空间？](https://stackoverflow.com/questions/10930286/socket-io-rooms-or-namespacing)

如果您想区分客户端，您可以将主题放在一个命名空间中的另一个房间中，并让他们的 socket.id 检查它们是什么房间（或使用 socket.id 名称（`.joind(socket.id)`） 加入房间[。https://github.com/LearnBoost /socket.io/wiki/房间](https://github.com/LearnBoost/socket.io/wiki/Rooms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:41:56.733

事实证明，在我的代码中的某个时刻，我有 a`io.of("/TYPE_ONE").socket(socket.id).emit(message);` 和 that`socket`属于 namespace `TYPE_TWO`，所以似乎每当您从他未连接的命名空间向套接字发送消息时，这会自动将其连接到说命名空间。不过很奇怪。

# java - SSL 握手后连接被拒绝

> ID：13754404
> 
> 赞同：1
> 
> 时间：2012-12-06T23:18:53.363
> 
> 标签：java, ssl, jax-ws, client-certificates

我正在尝试连接到需要客户端证书的 WCF 服务器。我已将客户端证书导入到本地的 JKS 文件中，并使用 -Djavax.net.ssl*** 选项向 JAXWS 客户端提供了证书位置。SSL 调试在最终获得连接被拒绝异常之前会打印以下信息。显然握手似乎成功但随后调用了 closeInternal(true) 然后异常。非常感谢任何线索/想法。提前致谢。

```
... no IV used for this cipher
main, WRITE: TLSv1 Change Cipher Spec, length = 17
*** Finished
verify_data:  { 68, 26, 22, 198, 55, 196, 10, 167, 6, 30, 206, 143 }
***
main, WRITE: TLSv1 Handshake, length = 32
main, READ: TLSv1 Change Cipher Spec, length = 17
main, READ: TLSv1 Handshake, length = 32
*** Finished
verify_data:  { 233, 31, 138, 146, 138, 210, 137, 249, 81, 126, 169, 166 }
***
%% Cached client session: [Session-3, SSL_RSA_WITH_RC4_128_MD5]
main, READ: TLSv1 Application Data, length = 469
main, called close()
main, called closeInternal(true)
main, SEND TLSv1 ALERT:  warning, description = close_notify
main, WRITE: TLSv1 Alert, length = 18
Exception in thread "main" com.sun.xml.internal.ws.wsdl.parser.InaccessibleWSDLException: 2 counts of InaccessibleWSDLException.

java.net.ConnectException: Connection refused: connect
java.net.ConnectException: Connection refused: connect

    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(RuntimeWSDLParser.java:161)
    at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:133)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:254)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:217)
    at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:165)
    at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:93)
    at javax.xml.ws.Service.<init>(Service.java:56)
    at com.acs.echo.gen.EchoService.<init>(EchoService.java:46)
    at com.acs.echo.client.EchoClient.invokeWebService(EchoClient.java:43)
    at com.acs.echo.client.EchoClient.main(EchoClient.java:17) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:12:04.147

SSL 握手和与服务器的 TCP 连接成功，但检索 WSDL 失败。它似乎来自给您“连接被拒绝”的非 SSL 主机，这意味着在 WSDL RL 中指定的端口上没有监听任何内容，或者可能是中间防火墙否决了连接尝试。

# matlab - matlab用自定义颜色绘制矩阵

> ID：13754410
> 
> 赞同：4
> 
> 时间：2012-12-06T23:19:20.140
> 
> 标签：matlab

有没有办法在绘制矩阵时指定线条的颜色。

例如：

```
// here is my matrix A
A = [13, 3, 4;19, 0, 1;18, 0, 2;19, 0, 1;19, 0, 1]; 
// when I am plotting it I am not in control of what color each line will be
plot(A) 
```

使用

```
plot(A, 'r') 
```

只是将所有东西都涂成红色（这是预期的）当尝试类似的东西时

```
plot(A, ['r', 'g','b']) 
```

或者

```
plot(A, 'rgb') 
```

不起作用（这不足为奇）

那么有没有办法为每一行指定颜色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T00:02:14.510

之后您可以更改颜色：

```
A = [13 3 4;
     19 0 1;
     18 0 2;
     19 0 1;
     19 0 1];

p=plot(A);

clrs = jet(numel(p)); % just a Nx3 array of RGB values
for ii=1:numel(p)
    set(p(ii),'color',clrs(ii,:));
end 
```

例子：

```
A=sin(repmat(linspace(0,2*pi,200),20,1)'*diag(linspace(1,2,20)));
% same thing as above 
```

![在此处输入图像描述](../Images/aa1c927d4cdba3eea0afff2b0f0e67eb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:30:52.253

该`plot`函数没有提供一种像您的示例那样简洁的方法。相反，您可以尝试：

```
plot(A(:, 1), 'r', A(:, 2), 'g', A(:, 3), 'b'); 
```

# html - ios上的css固定定位

> ID：13754417
> 
> 赞同：0
> 
> 时间：2012-12-06T23:19:38.187
> 
> 标签：html, ios, css

我正在开发一个带有底部菜单的网站，该底部菜单是通过在 css 中使用固定定位放置的。该菜单工作正常，并且在多个浏览器上保持在底部。但是，当我在 iPad 上访问该网站时，它起初看起来不错，但是当我在网站内切换页面然后按返回按钮时，底部菜单卡在屏幕中间。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:20:33.447

我以前也遇到过同样的问题。

我设法通过在页面加载时滚动 1 个像素来解决这个问题。

```
window.onload = window.onpageshow = function () { OnPageload(); };
function OnPageload() {
    window.scrollTo(window.pageXOffset + 1, window.pageYOffset + 1);
} 
```

# asp.net-mvc - 一起使用 ASP.NET MVC 和 EXT JS

> ID：13754419
> 
> 赞同：2
> 
> 时间：2012-12-06T23:20:01.730
> 
> 标签：asp.net-mvc, extjs

我想在我的下一个项目中使用 Ext js 和 ASP.NET MVC。

我想知道一起使用这两个框架的最佳方式是什么。到目前为止，我使用 ASP.NET MVC 做了一些项目，其中每个操作方法都返回一个视图并重新加载页面。Ext js mvc 应用程序使用单页方法。

由于我对 ext js 很陌生，所以我想知道是否有人可以分享一些使用这两个框架构建现实世界应用程序的经验。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T03:01:44.417

你可以使用你认为更适合你的 extjs。您可以将其组件用作简单的小部件或创建完整的 javascript (extjs) 客户端。然而，真正的需求是什么？单页客户端还是传统客户端？

在我们当前的项目中，我们开始使用带有 extjs 小部件的 ASP.Net MVC 框架，有一段时间没问题，但是客户想要越来越复杂的 UI 和更好的用户体验（除其他外），然后我们更改了应用程序，我们离开了MVC 模型和控制器（视图被删除），我们用 extjs 4.1 创建了一个完整的 javascript 客户端。

之后我们意识到我们使用的是一个 ASP M_C 框架（没有视图），这是一派胡言，所以我们把 ASP MVC 项目拿走了，用 WCF Rest 服务代替它（它也可以用 ASP.Net Web 来完成） api)。

我们为我们的决定和由此产生的设计感到自豪。如果可以，如果你知道 extjs（学习它是相当困难的）和 javascript，如果你支持你的决定，那么将你的应用程序分成两部分：

一个服务器端服务/api 和一个完整的 javascript 应用程序。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:09:59.290

我不确定我是否同意@lontivero 的回答，我目前正在使用 ASP.NET MVC 作为后端和 ExtJS 作为前端的项目。

正如所指出的那样，您确实从 ASP.NET MVC 堆栈中松开了 V，您最终需要在客户端的 ExtJS 模型中复制 C# 视图模型，但我发现使用 MVC 作为后端（实际上作为基于休息的 Json 端点集合）绝对没问题。

您可以利用 MVC 中的模型绑定、模型验证，同时利用 Ext.js 中的完整客户端 js 应用程序。

我很好奇你在使用这个结构时没有理解的点（我不是说它是完美的，但它似乎确实有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:48:00.430

我们在之前的项目中使用[了 Ext.NET](http://www.ext.net)（版本 0.x-1.x）。即使经过全面努力将我们的项目升级到（现在的）版本，我们也不得不放弃 Ext.Net 2.x。如果它适合你，它可以提供帮助。

Ext.Net 的主要问题是（几个）与 ASP.NET 的不兼容以及缺乏信任。他们过去常常保持自己的日程安排，过去两年左右的时间远非如此。他们落后于 ExtJS。

# linux - linux PHP 服务器是否支持 Node.js？

> ID：13754420
> 
> 赞同：-3
> 
> 时间：2012-12-06T23:20:02.153
> 
> 标签：linux, node.js

> **可能重复：**
> [如何在我的专用服务器上安装 Node Js](https://stackoverflow.com/questions/7049789/how-do-i-install-node-js-on-my-dedicated-server)

最近我在 GoDaddy 上购买了一台 linux 服务器。我想用 Node.js 对我的网站进行编程。

是否可以在我的服务器上使用 Node.JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:24:14.857

如果你有一个云实例，那么是的，你可以做任何事情。如果您只有标准的廉价托管，那么我对此表示怀疑。您很可能需要对机器的 root 访问权限才能安装依赖项。

我猜（不要问我如何）你有后者。你为什么不问GoDaddy？

# javascript - 正在发生动作的多个事件

> ID：13754421
> 
> 赞同：0
> 
> 时间：2012-12-06T23:20:06.577
> 
> 标签：javascript, jquery

当您有以下代码时，如何确定正在发生的操作或事件

```
$('#mydiv').on('click mousedown mousemove', function(event) { //<--multiple event
    if (action is mousedown) {

    }
    else if(action is mousemove){

    }
    else{
        //mouse click
    }
}); 
```

欢迎使用 jsFiddle 示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:21:36.653

`event.type`将事件类型作为字符串获取：

```
$('#mydiv').on('click mousedown mousemove', function(event) {
    switch(event.type) {
        case 'click':
                //do something on click
            break;
        case 'mousedown':
                //do something on mousedown
            break;
        case 'mousemove':
                //do something on mousemove 
            break;

       .....etc.
    }

}); 
```

你也可以这样做：

```
$('#mydiv').on(
   click: function() {
        //do something on click
   },
   mousedown: function() {
       //do something on mousedown
   },
   mousemove: function() {
      //do something on mousemove
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:22:02.670

您可以访问它与哪个事件：

```
event.type 
```

你的代码可以写成：

```
$('#mydiv').on('click mousedown mousemove', function(event) {
    if (event.type == 'mousedown') {

    }
    else if (event.type == 'mousemove'){

    }
    else{
        //mouse click
    }
}); 
```

参考：[event.type](http://api.jquery.com/event.type/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:23:44.090

你可以捕捉到`event.type:`

```
$('#mydiv').on('click mousedown mousemove', function(event) { //<--multiple event
    console.log(event.type);
});​ 
```

[http://jsfiddle.net/ra9r5/](http://jsfiddle.net/ra9r5/)

# string - CUDA：字符串比较

> ID：13754423
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:20:14.360
> 
> 标签：string, cuda, comparison

我写了一个关于字符串比较的简单代码。代码如下所示。这很简单。只需比较字符串a和字符串b，如果对应的元素相同，则将5赋给新的矩阵s；如果对应的元素不同，则将-3赋给新的矩阵s。不存在编译错误。但结果不是我所期望的。请给我一些有用的建议。谢谢！

```
#include <stdio.h>
#include <iostream>
#include <stdlib.h>
#include <time.h>
#include <string.h>
#include "book.h"
#define M 6
#define BLOCK_SIZE 30 // maximum 1024 threads per block
#define GRID_SIZE 30 // 900 blocks per grid
#define P (900 * 900)

void Init();

char *gpu_a;
char *gpu_b;
float *gpu_s;
float *cpu_s;

char cpu_a[6] = {'A', 'T', 'G', 'C', 'G', 'T'};
char cpu_b[6] = {'G', 'T', 'G', 'A', 'T', 'G'};

void cpu_Allocate1dArray()
{
   //cpu_a = (char*) malloc( M * sizeof( char) );
   //cpu_b = (char*) malloc( M * sizeof(char) );
   cpu_s = (float*) malloc( M * sizeof( float) );
}

void gpu_Allocate1dArray()
{
    cudaMalloc( (void**)&gpu_a, M * sizeof(char) );
    cudaMalloc( (void**)&gpu_b, M * sizeof(char) );
cudaMalloc( (void**)&gpu_s, M * sizeof(float));
}

__global__ void mykernel( char *gpu_a, char *gpu_b, float *gpu_s)
{
    int i , j , tid;
    i = threadIdx.x + blockIdx.x * blockDim.x;
j = threadIdx.y + blockIdx.y * blockDim.y;
    tid = i + j * blockDim.x * gridDim.x;
    if ( tid  < P)
{
       if( gpu_a[i] == gpu_b[j])
        {
      gpu_s[tid] = 5;
    }
       else
    gpu_s[tid] = -3;
    }         
}

int main()
{
   int q;
   cpu_Allocate1dArray();
   gpu_Allocate1dArray();

   Init();

   dim3 gridDim;
   dim3 blockDim;

   blockDim.x = blockDim.y = BLOCK_SIZE;
   gridDim.x = gridDim.y = GRID_SIZE;

   cudaMemcpy( gpu_a, cpu_a, sizeof(char) * M, cudaMemcpyHostToDevice);
   cudaMemcpy( gpu_b, cpu_b, sizeof(char) * M, cudaMemcpyHostToDevice);
   mykernel<<<gridDim, blockDim>>>(gpu_a, gpu_b, gpu_s);
   cudaMemcpy( cpu_s, gpu_s, sizeof(float)* M, cudaMemcpyDeviceToHost);

   for (q = 0; q < M; q++)
       printf("%f ", cpu_s[q]);

   printf("\n");    

    //Free device memory

    free(cpu_s);

    cudaFree(gpu_s);

    cudaFree(gpu_a);
    cudaFree(gpu_b); 

    return 0;

}        

void Init()
{
   int i;
   for (i = 0; i < M; i++)

   cpu_s[i] = 0;
} 
```

结果是： [Smith@server]$ ./test88.exe 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:33:11.383

您的代码试图超出数组长度 - gpu_s 长度为 6 * sizeof(float) 而 tid 最高可达 900*900。

将 P 设置为 6 打印输出：-3.000000 -3.000000 5.000000 -3.000000 5.000000 -3.000000

[注意 - 您可以通过使用cuda-memcheck](http://docs.nvidia.com/cuda/cuda-memcheck/index.html)运行应用程序来轻松检测此类问题。

# c# - gmail 对通过 ASP.NET C# Web 应用程序发送事务性电子邮件的适用性

> ID：13754429
> 
> 赞同：2
> 
> 时间：2012-12-06T23:21:14.023
> 
> 标签：c#, asp.net, email, gmail, transactional

我不确定将其放在哪个 StackExchange 站点下，但由于它（某种）与编程相关，因此我将其发布在这里。

我正在开发一个 Web 应用程序，它每周最多发送大约 700 封电子邮件（这很可能集中在一周内连续几天左右）。当我制作这个应用程序的原型时，我使用我的 gmail 帐户发送这些，但是，由于必须发送电子邮件，我想知道是否有人可以就 gmail 是否能够处理这个问题提供建议（来自技术观点及其服务条款），如果没有，是否有任何关于可以处理此问题的电子邮件服务的建议（最好是免费的替代方案！）。

提前致谢

# php - 如何定向或组合 php 上传和调整大小脚本？

> ID：13754438
> 
> 赞同：0
> 
> 时间：2012-12-06T23:21:48.367
> 
> 标签：php, image-resizing, image-uploading, autoresize

尝试使用以下脚本通过表单上传、调整大小和保存多个图像。它不工作......甚至没有剥离到一个输入和 foreach 删除。我尝试组合上传和调整大小脚本，然后将表单操作重定向到组合脚本。不能让它工作。现在尝试使用 move_uploaded_file 将上传的文件从 upload.php 移动到 SimpleImage.php 但它似乎也不起作用。没有任何错误只是空白页。我稍后会添加更好的验证，只是试图让它现在工作。抱歉，代码这么多，只是想把所有的代码都放在这里供您参考。

我的问题：如何让 upload.php 将图像发送到调整大小脚本，反之亦然？关于它为什么不工作或显示错误的任何想法？

我是 php 新手，但我下定决心要解决这个问题！我会接受你可以对我提出的任何建议和/或侮辱！我向两者学习！：） 提前致谢！！！

表格：

```
<?php
   if( isset($_POST['submit']) ) {

      include('SimpleImage.php');
      $image = new SimpleImage();
      $image->load($_FILES['uploaded_image']['tmp_name']);
      $image->resizeToWidth(500);
      $image->save("uploads/uploadedfiles/".$pictures);
   } else {

?>

<form action="/upload.php" method="post" enctype="multipart/form-data"></br>

<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br /> 
<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br /> 
<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br /> 
<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br /> 
<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br /> 
<input type="file" name="uploaded_image[]" accept="image/gif, image/jpeg, image/png" /> <br />    <br />  
<input type="hidden" name="MAX_FILE_SIZE" value="48000000" /> *Images must be no more than     5MB.<br /> .jpg, .gif &amp; .png files accepted only.<br /><br />
<input type="submit" value="Upload"> </p> </form> 
```

上传.php：

```
<?php

header("Location:confirmationpage.php");

foreach ($_FILES["pictures"]["error"] as $key => $error) {
  if (($_FILES["pictures"]["type"] == "image/gif")
  || ($_FILES["pictures"]["type"] == "image/jpeg")
  || ($_FILES["pictures"]["type"] == "image/png" )
  && ($_FILES["pictures"]["size"] < 50000))
   {
       move_uploaded_file(
         $_FILES["pictures"]["tmp_name"][$key],     "/SimpleImage.php" . $_FILES["pictures"]["name"][$key]); 
   }
}
 ?> 
```

调整大小脚本（SimpleImage.php）：

```
<?php
if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
* File: SimpleImage.php
* Author: Simon Jarvis
* Copyright: 2006 Simon Jarvis
* Date: 08/11/06
* Link: http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details:
* http://www.gnu.org/licenses/gpl.html
*
*/

class SimpleImage {

   var $image;
   var $image_type;

   function load($uploaded_image) {

  $image_info = getimagesize($uploaded_image);
  $this->image_type = $image_info[2];
  if( $this->image_type == IMAGETYPE_JPEG ) {

     $this->image = imagecreatefromjpeg($uploaded_image);
  } elseif( $this->image_type == IMAGETYPE_GIF ) {

     $this->image = imagecreatefromgif($uploaded_image);
  } elseif( $this->image_type == IMAGETYPE_PNG ) {

     $this->image = imagecreatefrompng($uploaded_image);
  }
   }
   function save($uploaded_image, $image_type=IMAGETYPE_JPEG, $compression=75,     $permissions=null) {

  if( $image_type == IMAGETYPE_JPEG ) {
     imagejpeg($this->image,$uploaded_image,$compression);
  } elseif( $image_type == IMAGETYPE_GIF ) {

     imagegif($this->image,$uploaded_image);
  } elseif( $image_type == IMAGETYPE_PNG ) {

     imagepng($this->image,$uploaded_image);
  }
  if( $permissions != null) {

     chmod($uploaded_image,$permissions);
  }
   }
   function output($image_type=IMAGETYPE_JPEG) {

  if( $image_type == IMAGETYPE_JPEG ) {
     imagejpeg($this->image);
  } elseif( $image_type == IMAGETYPE_GIF ) {

     imagegif($this->image);
  } elseif( $image_type == IMAGETYPE_PNG ) {

     imagepng($this->image);
  }
   }
   function getWidth() {

  return imagesx($this->image);
   }
   function getHeight() {

  return imagesy($this->image);
   }
   function resizeToHeight($height) {

  $ratio = $height / $this->getHeight();
  $width = $this->getWidth() * $ratio;
  $this->resize($width,$height);
   }

   function resizeToWidth($width) {
  $ratio = $width / $this->getWidth();
  $height = $this->getheight() * $ratio;
  $this->resize($width,$height);
   }

   function scale($scale) {
  $width = $this->getWidth() * $scale/100;
  $height = $this->getheight() * $scale/100;
  $this->resize($width,$height);
   }

   function resize($width,$height) {
  $new_image = imagecreatetruecolor($width, $height);
  imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this-        >getWidth(), $this->getHeight()); 
  $this->image = $new_image;
   }      

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:50:18.533

好的，所以我们都是新的，新事物总是存在的。第一件事是将图像移动到 php 文件中的尝试......当你的脚本被调用时，它会被解析、编译和执行（基本上，但通常），所以这个将图像移动到脚本中到目前为止还行不通我认为。您需要编写一个脚本来实例化 simpleImage 类的实例并调用该类的方法（现在是对象），并将上传的图像作为参数传递给您要使用的方法。

实例化简单的图像...

```
 $imgWrk = new simpleImage; 
```

使用简单的图像...

```
 $imgWrk->load($var) 
```

所以这是第一点，您应该更加熟悉关于 simpleImage API（应用程序编程接口（在这种情况下接口就足够了））的细节。第二位是关于您将在其中实例化简单图像类的脚本。您需要将上传的文件移动到一个目录（假设您想要存储图像，无论您是否编辑它们），然后在这个脚本中您将编写类似 ownImageEdit.php（或其他任何内容）的标题，您将创建一个变量，其值将是此上传图像的句柄，并且将是您传递给 simpleImage 对象方法的变量。

现在我的回答有点笼统，因为对这个问题有价值的解决方案将涉及您最终必须做的代码重构，这涉及的内容比您意识到的要多，而且比这个问题的答案所允许的要多。

您需要了解 php 的 OOP，以及 php 脚本是如何执行的。学会爱上手册。

# c# - 为什么我的返回位图没有正确返回？

> ID：13754442
> 
> 赞同：0
> 
> 时间：2012-12-06T23:22:11.313
> 
> 标签：c#, image, bitmap

我正在将图像传递给这个方法并淡化它的右边缘，它正在工作，但突然不再起作用了。它正在返回我传递给它的位图，但不保留修改后的像素，它们会恢复原状。我哪里错了？

```
private Bitmap fadedEdge(Bitmap bmp)
{
    //img.Save("i.bmp");
    //Bitmap bmp = (Bitmap)img;
    int howfartofade = bmp.Width / 4;
    int i = 0;
    if (howfartofade > 255) i = howfartofade / 255;
    else i = 255 / howfartofade;
    if (i == 0) i = 1;
    int alp = 255;
    int counter = 0;
    for (int x = bmp.Width - howfartofade; x < bmp.Width; x++)
    {
        if (howfartofade > 255)
        {
            counter++;
            if (counter == i + 1)
            {
                alp -= 1;
                counter = 0;
            }
        }
        else
        {
            alp -= i;
        }
        for (int y = 0; y < bmp.Height; y++)
        {
            if (alp >= 0)
            {
                Color clr = bmp.GetPixel(x, y);
                clr = Color.FromArgb(alp, clr.R, clr.G, clr.B);
                bmp.SetPixel(x, y, clr);
            }
            else
            {
                Color clr = bmp.GetPixel(x, y);
                clr = Color.FromArgb(0, clr.R, clr.G, clr.B);
                bmp.SetPixel(x, y, clr);
            }
        }
    }
    return bmp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:55:59.343

我想到了。愚蠢的我。我将其更改为传入图像并返回图像，并从传入的图像创建一个新的位图。

```
private Image fadedEdge(Image input)
    {
        //img.Save("i.bmp");
        //Bitmap bmp = (Bitmap)img;
        Bitmap output = new Bitmap(input);
        int howfartofade = input.Width / 8;
        int i = 0;
        if (howfartofade > 255) i = howfartofade / 255;
        else i = (255 / howfartofade) + 1;
        if (i == 0) i = 1;
        int alp = 255;
        int counter = 0;
        for (int x = input.Width - howfartofade; x < input.Width; x++)
        {
            if (howfartofade > 255)
            {
                counter++;
                if (counter == i + 1)
                {
                    alp -= 1;
                    counter = 0;
                }
            }
            else
            {
                alp -= (i);
            }
            for (int y = 0; y < input.Height; y++)
            {
                if (alp >= 0)
                {
                    Color clr = output.GetPixel(x, y);
                    clr = Color.FromArgb(alp, clr.R, clr.G, clr.B);
                    output.SetPixel(x, y, clr);
                }
                else
                {
                    Color clr = output.GetPixel(x, y);
                    clr = Color.FromArgb(0, clr.R, clr.G, clr.B);
                    output.SetPixel(x, y, clr);
                }
            }
        }

        return output;
    } 
```

# c++ - While 循环循环的次数比我指定的次数多

> ID：13754443
> 
> 赞同：0
> 
> 时间：2012-12-06T23:22:13.827
> 
> 标签：c++, class, while-loop, queue, simulation

我正在制作一个时钟驱动的模拟程序，除其他问题外，我的主 while 循环`while(jobsCompleted < jobsToComplete)`的循环次数超过了预期/想要的次数。例如，如果我将 500 分配给`jobsToComplete`，程序结束时的输出将告诉我有 505 个作业已完成。我已经尝试调试这个问题至少一个小时，但无济于事。任何帮助表示赞赏。谢谢！

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <queue>
#include <fstream>
#include "job.cpp"

using namespace std;

int main()
{
  ofstream cpuSim;
  cpuSim.open("cpuSim.out.txt");

  int clock = 0, jobsCompleted = 0, jobsToComplete = 0, probUser = 0, probability, id = 0;
  jobType_t job_type;
  int inWQ, outWQ, inCPUQ, outCPUQ, required, given, jobTypeInt, timeSpentInCPUqueue = 0, timeSpentInWaitQueue = 0, CPUidle = 0;
  queue<job> CPUqueue, waitQueue;

  int numIO = 0, numCPU = 0;

  srand(time(NULL));

  cout << "Enter how many jobs need to be completed: ";
  cin >> jobsToComplete;
  cout << endl <<  "Enter the probability that a new job is created: ";
  cin >> probUser;
  cout << endl;

  while(jobsCompleted < jobsToComplete)
    {
      clock++;
      probability = rand() % 100 + 1;

      if(probability > probUser)
    {
      for(int i=0; i<jobsToComplete; i++)
        {
          id = rand() % 1000 + 1;
          jobTypeInt = rand() % 100 + 1;
          if(jobTypeInt >= 50)
        job_type = IO_bound;
          else
              job_type = CPU_bound;
      required = rand() % 10;
          job *newJob = new job(id, job_type, inWQ, outWQ, inCPUQ, outCPUQ, required, given);
          waitQueue.push(*newJob);
        }

      while((CPUqueue.size() <= 10) && waitQueue.empty() == false)
        {
          waitQueue.front();
          job temp = waitQueue.back();
          waitQueue.pop();
          temp.setTimeExitedWQueue(clock);
          temp.setTimeEnteredCPUQueue(clock);     
          CPUqueue.push(temp);
        }

      double oneSecond = 1.0, timeSpent = 0;

      while((oneSecond > 0.0) && (!CPUqueue.empty()))
        {
          job top = CPUqueue.front();
          CPUqueue.pop();
          if(top.getJobType() == IO_bound)
        {        
          top.setTimeGiven(top.getTimeGiven() + .1);
          timeSpent = .1;
          numIO++;
        }
          else
        {
          top.setTimeGiven(top.getTimeGiven() + .2);
          timeSpent = .2;
          numCPU++;
        }

          if(top.getTimeRequired() <= top.getTimeGiven())
        {
          top.setTimeExitedCPUQueue(clock);
          jobsCompleted++;

          timeSpentInWaitQueue += (top.getTimeExitedWQueue() - top.getTimeEnteredWQueue());
          timeSpentInCPUqueue += (top.getTimeExitedCPUQueue() - top.getTimeEnteredCPUQueue());
        }
          else
        CPUqueue.push(top);
          oneSecond -= timeSpent;

          if((clock%60 == 0) && (clock > 600)) //every 60 seconds after the first 10 minutes
        {
              cout << "After the first 10 minutes:" << endl;
      cout << "Time: " << clock << endl;
          cout << "Number of jobs in the wait queue: " << waitQueue.size() << endl;

          cout << "Number of jobs in the CPU queue: " << CPUqueue.size() << endl;
                  job temp1 = waitQueue.front();
          job temp2 = CPUqueue.front();
          cout << "Job number of front wait job: " << temp1.getID() << endl;
          cout << "Job number of front CPU job: " << temp2.getID() << endl;
        }
          else
        {
          cout << "Job Number: " << jobsCompleted << endl;
          cout << "Job ID: " << top.getID() << endl;
          cout << "Job Type: " << top.getJobType() << endl;
          cout << "Time in CPU Queue: " << timeSpentInCPUqueue << endl;
          cout << "Time Entered CPU Queue: " << top.getTimeEnteredCPUQueue() << endl << endl;
        }
        }

      if((oneSecond > 0) && (CPUqueue.empty()))
        CPUidle += oneSecond;
    }
    }
  cout << "I/O_bound jobs: " << numIO << endl;
  cout << "CPU_bound jobs: " << numCPU << endl;
  cout << "*****JOBS COMPLETED: " << jobsCompleted << " *****" << endl << endl;

  return 0;
} 
```

作为一个不太相关的问题，我无法让我的枚举数据类型正确打印出来，我的 ID 也无法正确传递给`*newJob`...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:25:10.017

假设它已经循环了一段时间，现在`jobsCompleted`是 499（而你的`jobsToComplete`是 500）。好的，这是最后一个循环，对吧？是的！但是 的递增`jobsCompleted`发生在另一个嵌套`while`循环中。因此，如果该嵌套循环发生 6 次，`jobsCompleted`则为 505，然后外部 while 循环将结束，使您完成的作业总数为 505。

告诉你如何修复它需要理解你的代码的逻辑，但我想弄清楚的东西太多了。也许这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:26:39.120

通过查看代码，很明显会发生这种情况，因为您遇到如下情况

```
while (x < y) {
  ...
  while (condition) {
    ...
    if (condition) {
      ++x;
    }
  }
} 
```

这意味着对于每次外部迭代，可能会发生`x`多次递增，因此您输入最后一次迭代 ( `x == 499`)，然后在内部循环中将其递增 6 次。您应该调试该部分代码以了解它发生的原因，明确地您应该检查这两个条件：

```
while((oneSecond > 0.0) && (!CPUqueue.empty()))
if(top.getTimeRequired() <= top.getTimeGiven()) 
```

因为在最后一次迭代中，两者都为真至少 6 次。

# c++ - 在调试期间获取 C++ 运行时类型？

> ID：13754446
> 
> 赞同：2
> 
> 时间：2012-12-06T23:22:35.167
> 
> 标签：c++, visual-c++, visual-studio-2012

好奇是否有人对此有任何想法；在实现游戏对象树的游戏引擎上工作。各种特定的游戏对象都继承自该类型（BouncingBall、StatScreen 或其他）。

```
class GameObject {
    public:
    vector<Component *> Components;
    vector<GameObject *> Children;
    GameObject *Parent;
}; 
```

所以在运行时，游戏会有一个巨大的树，所有的类型都不同。不幸的是，Children 向量中的对象在调试器中都报告为“GameObject *”，这使得很难分辨出什么是什么。

我想出的最佳解决方案是将类型存储为构造时的成员变量：

```
class GameObject {
    public:
    // ...
    const char *Type;

    // Saves current class name as Type.
    template<class T>
    void StoreTypeName( T *thisPointer ) {
        this->Type = typeid( *thisPointer ).name();
    }
}; 
```

但是在每个对象构造函数中，我必须记住调用 StoreTypeName：

```
class FancyBlinkingObject : public GameObject {
    public:
    FancyBlinkingObject() {
        StoreTypeName( this );
    }
}; 
```

任何其他可能的技巧来自动执行此操作？在调试器端（Visual Studio 2012）还是在代码中？

我想到了某种中央动态演员测试功能：

```
if ( dynamic_cast<FancyBlinkingObject *>( basePointer ) ) {
    return "FancyBlinkingObject";
}
if ( dynamic_cast<UglyBlueObject *>( basePointer ) ) {
    return "UglyBlueObject";
} 
```

但是我想不出一种方法来做到这一点，而不必手动维护 if 的列表。如果可能的话，想要一些完全自动化的东西。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:30:59.540

根据 David Rodriguez 的评论 - 使 GameObject 具有多态性（在我的情况下，通过使析构函数虚拟化）在调试器中更改了其分类并向运行时类型信息显示 vptr，这起到了作用。

# haskell - Text.Parsec.Stream 是否有实例 Stream Handle IO Char？

> ID：13754447
> 
> 赞同：1
> 
> 时间：2012-12-06T23:22:37.813
> 
> 标签：haskell, handle, parsec

我正在解析一个相当大的文件，我想定期更新一个进度条以指示到目前为止我已经解析了多少。

我能想到的最直接的方法是`ParsecT`用作 monad 转换器，`IO`这样我就可以提升打印进度条更新，并使用 a`Handle`作为流提供程序，这样我就可以使用`hFileSize`and检查进度`hTell`。

所以这意味着我需要一个实例`Stream Handle IO Char`。滚动我自己的（使用）应该不难，`hGetChar`但我想我会看看是否已经存在一个，以处理任何不可预见的问题（比如我是否需要插入一些缓冲以提高速度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:46:18.543

一种技巧是提前检查文件的大小。然后，在您进行解析时，检查`SourcePos`parsec 提供的可用以查看您已经走了多远。这样做的缺点是，如果您想跟踪实际字节数（以便您可以使用文件系统对文件大小的了解来避免两次遍历文件），您将不得不使用[`tokenPrim`](http://hackage.haskell.org/packages/archive/parsec/latest/doc/html/Text-Parsec-Prim.html#v%3atokenPrim). 不过，解析器组合器不需要重新实现。

或者，您可以遍历文件两次并使用行数（在第一次遍历期间计算）来估计您已经走了多远。

# javascript - 使用 jquery 向 url src 添加额外的参数？

> ID：13754450
> 
> 赞同：0
> 
> 时间：2012-12-06T23:22:53.693
> 
> 标签：javascript, jquery

我想不出我怎么能做到这一点，请帮忙。我得到了一些 json 对象，其中一个值有 html 标签，一些图像，当然我无法获取图像，因为它们具有相对 url，并且它所在的站点位于子域中。有什么方法可以将[http://example.com/](http://example.com/)添加到已经存在的 images/image.png

谢谢

这是我的 json 回复：

```
description": "<img src=\"images/stories/Icons/Vacuum.png\" mce_src=\"images/stories/Icons/Vacuum.png\" border=\"0\" alt=\"Vacuum\" title=\"Vacuum\"> <img src=\"images/stories/Icons/Washing_Machine.png\" mce_src=\"images/stories/Icons/Washing_Machine.png\" border=\"0\" alt=\"Washing Machine\" title=\"Washing Machine\"></p>"

for(var i = 0; i < objJsonA.length; i++){
    var ap = objJsonA[i];
    var lot = ap.lot;
    $('.myclass').html(lot);
} 
```

这会返回 404 错误，我要获取的内容在 www.mysite.com 上，而我在 m.mysite.com 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:29:18.953

您可以使用`document.location`获取当前服务器。例如，在 Chrome 控制台中此服务器的 URL 上，我看到：

```
> document.location
Location
ancestorOrigins: DOMStringList
assign: function () { [native code] }
hash: ""
host: "stackoverflow.com"
hostname: "stackoverflow.com"
href: "http://stackoverflow.com/questions/13754450/adding-extra-parameters-to-url-src-with-jquery"
origin: "http://stackoverflow.com"
pathname: "/questions/13754450/adding-extra-parameters-to-url-src-with-jquery"
port: ""
protocol: "http:"
reload: function () { [native code] }
replace: function () { [native code] }
search: ""
toString: function toString() { [native code] }
valueOf: function valueOf() { [native code] }
__proto__: Location 
```

所以你可以使用：

```
var image = '/images/abc.jpg';
var url = document.location.origin + image;
// url is now 'http://stackoverflow.com/images/abc.jpg' 
```

[在 JavaScript/jQuery 中有很多用于处理 URL 的插件，使用其中的一个（例如搜索](https://www.google.com/search?q=javascript+url+plugin)）可能是有意义的。

# ios - 使用容器视图控制器访问导航栏

> ID：13754455
> 
> 赞同：3
> 
> 时间：2012-12-06T23:23:28.413
> 
> 标签：ios, uiviewcontroller

编写自己的容器时，关于 UINavigationController 和 UINavigatinBar 的两个问题。

1) 我用故事板创建了我的初始容器并将其嵌入到 UINavigationController 中。我发现我的 childViewControllers 访问 UINavigationBar 的唯一方法是在 childViewController 的 viewDidLoad 中执行类似的操作：

```
UIBarButtonItem *showDetailViewControllerBBI = [[UIBarButtonItem alloc] initWithTitle:@"Show Details" style:UIBarButtonItemStyleBordered target:self action:@selector(switchToCarouselLayout:)];
self.parentViewController.navigationItem.leftBarButtonItem = showDetailViewControllerBBI; 
```

这是获取 UINavigationBar 的正确方法吗？

2) 我想我可以在我最初的 ContainerViewController 上添加一个 UINavigationBar。我所做的是删除我的故事板中的 UINavigatinController 并将 UINavigatinBar 放在我的 containerViewController 的顶部。当我运行项目时，没有显示导航栏。那么如果我不能在我的初始容器视图控制器中拥有它而不嵌入到 UINavigationController 中，IB 中的 UINavigationBar 实际上会做什么？还是只是为了美观而只能与 UINavigationControllers 一起使用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:52:44.360

1) 是的，我认为这是从子视图控制器引用某些内容的好方法。另一种方法是在容器控制器本身中定义该条形按钮项，然后将目标设置为 self.childViewControllers.lastObject（假设只有一个）。

2）这应该工作。您是拖入导航栏，还是只是将顶部栏的模拟指标更改为导航栏？后者仅用于 IB 中的视觉布局，据我所知——它实际上并没有添加一个。

# ruby-on-rails - sunspot-solr：如何排除包含任何给定单词的搜索结果？

> ID：13754456
> 
> 赞同：3
> 
> 时间：2012-12-06T23:23:35.643
> 
> 标签：ruby-on-rails, ruby, solr, sunspot-solr, websolr

我有一个使用 solr 的 Ruby on Rails 应用程序。我为此使用太阳黑子宝石。我还将 websolr 用于生产环境。

我知道我们可以使用 sunspot solr 进行全文搜索。但我也希望能够排除任何具有给定单词的命中（以及最终结果）。

示例类：

```
class Article
    searchable do
        text :title
        text :content
    end
end 
```

现在，我想搜索其内容中包含**“Obama”的文章，但****也**想排除包含**“Lady Gaga”一词**的文章。我知道我可以对返回的结果数组应用拒绝块，但我想在 Solr 级别处理这种情况。

希望我清楚地说明了我的问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:52:13.813

来自[https://github.com/sunspot/sunspot/wiki/Fulltext-search](https://github.com/sunspot/sunspot/wiki/Fulltext-search)

> 解析正常布尔查询语法的一小部分：特别是，可以使用匹配良好的引号来划分短语，并且可以*使用 + 和 - 运算符分别要求或排除单词*

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:36:27.063

我会使用`adjust_solr_params`带有否定子句的 edismax 。

```
Article.search do
  fulltext params[:q]
  adjust_solr_params do |solr|
    solr['defType'] = 'edismax'
    solr['q'] += %( -"some phrase to exclude")
  end
end 
```

不是最明显的方法，当然没有记录，*我*也没有测试过，但它应该可以工作。希望未来版本的 Sunspot 能够更原生地支持 edismax。

# matlab - Matlab - 求解三阶微分方程

> ID：13754459
> 
> 赞同：6
> 
> 时间：2012-12-06T23:23:44.090
> 
> 标签：matlab, differential-equations, ode

```
y''' + 41y'' + 360y' + 900y = 600x' + 1200x;
y(0)= 2 ; y'(0)= 1 ; y''(0) = -0.05 
```

如何使用 ODE45 函数求解这个方程？

我试过这个：

```
==>
function dydt=f(t,y)

dydt = [y(2) ; y(3) ; -41*y(3)-360*y(2)- 900*y(1)]

==>
clear all;

timerange=[0 1.4]; %seconds
initialvalues=[2 1 -0.05];

[t,y]=ode45(@dydt, timerange, initialvalues)

plot(t,y(:,1)); 
```

但我需要将 X 部分放在等式中 - 我不知道如何......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:45:17.957

要使用 ODE45（或类似），您需要将三阶 ODE 转换为一阶 ODE 系统。

为此，让

```
y0 = y
y1 = y0'
y2 = y1'
y3 = y2' 
```

然后

```
y0' = y1
y1' = y2
y2' = y3 
```

和

```
y3' = y''' = -41*y2-360y1-900y0+600dx+1200x 
```

您现在可以使用 ODE45 通过嵌套 x(t) 和 dx(t) 可用的函数来集成系统。

```
function test()

    % some random x function 
    x = @(t) exp(-t);
    dx = @(t) -exp(-t);

    % integrate numerically
    [T, Y] = ode45(@linearized, [0 1], [2 1 -0.05 0]);

    % plot the result
    plot(T, Y(:,1))

    % linearized ode
    function dy = linearized(t,y)
       dy = zeros(4,1);
       dy(1) = y(2);
       dy(2) = y(3);
       dy(3) = y(4);
       dy(4) = -41*y(3)-360*y(2)-900*y(1)+600*dx(t)+1200*x(t);
    end
end 
```

![阴谋](../Images/6d74cc0dd3e9029317773075ed9e5cee.png)

# java - @Override 方法 onApplicationEvent

> ID：13754461
> 
> 赞同：0
> 
> 时间：2012-12-06T23:23:54.013
> 
> 标签：java, spring

我有一个基本问题......无法找出它为什么不起作用......当我使用 @Override 注释时，下面的代码不起作用。请帮忙

```
public class QuartzJob
implements ApplicationListener<ContextRefreshedEvent>
{ 
@Override
public void onApplicationEvent(ContextRefreshedEvent event) {
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:30:25.530

我的猜测是，您正在为 Java 1.5 进行编译，并且只有从 Java 1.6 实现接口方法才有可能（并且风格很好）添加`@Override`.

# javascript - Kinetic JS - 缩放图像以适合画布？

> ID：13754465
> 
> 赞同：1
> 
> 时间：2012-12-06T23:24:24.827
> 
> 标签：javascript, kineticjs

我正在尝试缩小图像以适合画布。我知道通常的方法：

```
var width = img.width-(img.width-canvas.width);
var height = img.height-(img.height-canvas.height); 
```

但我希望使用 img.setScale() 来实现，基于 0（0%）和 1（100% 的大小）。我不确定如何在 KineticJS 中做到这一点。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:31:17.643

@philipp的回答做到了：

> scalefactor = desiredSize / size，宽度和高度

# android - 安装安卓应用程序时出错

> ID：13754466
> 
> 赞同：0
> 
> 时间：2012-12-06T23:24:31.830
> 
> 标签：android

我有一个用于外部 JAR 的 android 应用程序，当尝试部署到设备或模拟器时，我开始出现此错误。

```
[2012-12-07 00:06:17 - testsuite] Installation error: INSTALL_FAILED_DEXOPT
[2012-12-07 00:06:17 - testsuite] Please check logcat output for more details.
[2012-12-07 00:06:17 - testsuite] Launch canceled! 
```

和 logcat 输出

```
12-07 00:06:16.251: E/dalvikvm(404): Out-of-order method_idx: 0xffff then 0x1
12-07 00:06:16.251: E/dalvikvm(404): Trouble with item 3934 @ offset 0x6aead0
12-07 00:06:16.251: E/dalvikvm(404): Swap of section type 2006 failed
12-07 00:06:16.261: E/dalvikvm(404): ERROR: Byte swap + verify failed
12-07 00:06:16.281: E/dalvikvm(404): Optimization failed
12-07 00:06:16.301: W/installd(34): DexInv: --- END '/data/app/com.xxx.testsuite-1.apk'  --- status=0xff00, process failed
12-07 00:06:16.301: E/installd(34): dexopt failed on '/data/dalvik-  cache/data@app@com.xxx.testsuite-1.apk@classes.dex' res = 65280 
```

该错误似乎与外部 JAR 之一有关，如果我将此 JAR 移动到它可以工作的 eclipse 项目（但我不想这样做）

任何想法如何追查这个问题？

# facebook - Facebook Graph API 访问令牌

> ID：13754468
> 
> 赞同：1
> 
> 时间：2012-12-06T23:24:37.670
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我花了几个小时在这里阅读帖子，并关注 developer.facebook.com 的链接（其中许多已死）。

如何在我的外部网站上显示我最近的 FB 帖子？我可以通过每隔几个小时手动更新访问令牌来做到这一点。或者我可以要求我的网站访问者在访问我的网站时登录 facebook。显然，两者都不是理想的解决方案。

我能找到的最好的是 Facebook 的离线访问删除说明[https://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)。为了继续，我似乎需要一个 App ID。我做了很多假设，认为这是正确的方法。任何人都可以明确确认这项努力最终会奏效吗？还是我需要去别处看看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:34:08.837

1.  [https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)按照所有步骤操作。
2.  [https://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

对我来说，绊脚石是第一页为您提供了示例脚本（PHP 和 Javascript），而第二页是基本的 REST API。我使用 curl，并且可能会在我的访问令牌在 60 天后过期时创建一个 shell 脚本。比我更有信心的人可以用浏览器完成整个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:00:26.797

您为长期访问令牌扩展一个短期访问令牌。唯一需要登录的人是您要从中获取数据的用户。然后，您将`access_token`过期的数据保存到数据库中，并在其他人需要时检索。简短的步骤

*   使用 access_token 结构加载 SQL
*   为数据库创建配置文件
*   为数据库操作（例如连接和查询）创建辅助函数
*   为管理视图页面加载 Facebook SDK（这是您希望登录操作获取 access_token 的地方）
*   使用检索到的 access_token 更新数据库
*   使用前端从数据库中选择access_token

页面显示有一个[详细的练习，](http://philippeharewood.com/facebook/getting-your-facebook-page-on-your-website-with-access-tokens/)尽管修改它以获得长期访问令牌并不难

可以在[https://github.com/phwd/hellopageposts找到一个示例](https://github.com/phwd/hellopageposts)

资料来源： http: [//philippeharewood.com/facebook/getting-your-facebook-page-on-your-website-with-access-tokens/](http://philippeharewood.com/facebook/getting-your-facebook-page-on-your-website-with-access-tokens/)

# c++ - :bad_alloc 在构造函数中将向量引用传递给指向向量的指针

> ID：13754471
> 
> 赞同：0
> 
> 时间：2012-12-06T23:24:51.250
> 
> 标签：c++, pointers, reference, constructor

传递给的参数`class Rock`是`vector<vector<unsigned int> >`

`population`定义为：

```
const std::vector<std::vector<unsigned int> > * population; 
```

在构造函数中：

```
Rock::Rock ( const vector<vector<unsigned int> > & v):
population (&v)
{
cout << "constructor: population.size: " << population->size() << "    population[0].size: " << (*population)[0].size() <\
    < endl;
} 
```

打印出来：

```
constructor: population.size: 500    population[0].size: 4 
```

之后，在构造函数之后调用的下一个成员函数中：

```
population.size(): 500   population[0].size() 18446744073709533580 
```

我的想法是保留传递给`population`的地址的副本，并将其保留在整个类成员函数中。但它似乎失去了对其二阶元素的跟踪。`vector``Rock`

这有什么问题？我该如何纠正？我不想改变`population`变量的类型，否则后续代码也必须调整。

**编辑0：**构造函数的完整代码：

```
Rock::Rock ( const vector<vector<unsigned int> > & v, const map<unsigned int, AttType>& m, string f ) :
    // Default values for Rock parameters.                                                                                    
    population (&v),
    att_type ( m ),
    initial_pos (75000),
    population_size (500),
    sample_size (200),
    theta (0.2),
    nr_clusters (4),
    max_dif (500),
    label_as ("neighbors"),
    debug (false)
{
    resetBestPair();
    worst_pair.p1 = __INT_MAX__;
    worst_pair.p2 = __INT_MAX__;
    worst_pair.goodness = __DBL_MIN__;

    cfg_file = f;
    parseConfig ();
    cout << "constructor: population.size: " << population->size() << "    population[0].size: " << (*population)[0].size() <\
< endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:42:30.860

如果您知道`vector<vector<unsigned int> >`在 Rock 对象的生命周期内，传递给构造函数的对象仍然存在。我怀疑你传入的向量在 Rock 对象构建后的某个时候消失了。所以你的 Rock 对象有一个悬空指针，指向曾经是一个向量的东西，但现在完全不同了（那时内存可能已重新分配给其他东西）。现在程序正在将该位置的任何内容解释为向量，而您却在其中发现了垃圾。你也可能得到一个 SEGV，这一切都是不可预测的。第一个订单仍然报告相同数量的元素（500）的事实表明它的内存尚未重新分配，或者该重新分配数据的用户尚未覆盖向量的部分'

# java - 这个java类线程安全吗？并发读写

> ID：13754472
> 
> 赞同：1
> 
> 时间：2012-12-06T23:24:52.497
> 
> 标签：java, concurrency

下面的类线程安全吗？我担心并发读写初始化变量。如果它不是线程安全的，如何使它成为线程安全的？

1.  我知道将 methodA 转换为同步会有所帮助，但我不想这样做
2.  如何将 volatile 密钥添加到“初始化”变量？

```
public class A {

    private boolean initialized;

    public synchronized void init(String configFilePath) {
        if (initialized) {
            return;
        }

        initialized = true;
    }

    public void methodA() {
        if (!initialized) {
            throw new ConfigurationException()
        }
    }
} 
```

Update1：​​初始化的变量在init方法中只会被修改一次，其他方法只会准备好。如果是这种情况，将 volatile 添加到 initialized 将使其线程安全，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:27:47.720

不，它不是线程安全的。当被调用时，`init`例程可能处于设置中间。由于不同步，因此没有什么可以阻止执行和读入之间的竞争。事实上，写入甚至可能已经发生，只是还没有传播到调用的线程`initialized``methodA``methodA``initialized = true``if( !initialized)``methodA`

添加`volatile`to`initialized`将有助于解决价值传播问题，但不适用于第一个问题。

有关这方面的更多信息，我推荐 Brian Goetz 的文章[管理波动性](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:31:59.070

不，它不是线程安全的。你必须同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T02:20:06.513

@HotLicks 是 100% 正确的。任何有关并发的问题都需要提供上下文。原因如下：

让我们假设一个类已被编写为“安全”（暂时忽略 OPs 类）。如果您正在对实例变量进行同步并且该类的实例由许多线程共享，那么它将是线程安全的。但是，如果可以（由不同的线程）创建类的多个实例，并且它们可能会修改静态变量/状态，那么只有在静态（即类）变量上同步时它才会是线程安全的。

**总之：**

1.  如果在线程之间共享单个实例，则锁定实例变量
2.  如果线程正在创建“安全”类的实例并且静态状态可能被这些线程修改，则必须锁定静态（类）变量

# sql - 不明确的列查询

> ID：13754479
> 
> 赞同：0
> 
> 时间：2012-12-06T23:25:46.510
> 
> 标签：sql, oracle, plsql, multiple-columns, ambiguous

运行此查询时出现“不明确的列”错误，但我很难找到原因：

```
select bobooks.ID request,    
       bobooks.TITLE,    
       bobooks.AUTHOR,    
       bogenres.NAME genre,    
       bobooks.OWNER,    
       bostatus.NAME status,    
       bolanguages.LANGUAGE language,    
       bolanguages2.LANGUAGE secondary_language    
from BO_BOOKS bobooks    
inner join BO_GENRES bogenres
  on bobooks.genre = bogenres.id    
inner join BO_STATUS bostatus
  on bobooks.status = bostatus.id    
inner join BO_LANGUAGES bolanguages
  on bobooks.language = bolanguages.id    
left outer join BO_LANGUAGES bolanguages2
  on bobooks.secondary_language = bolanguages2.id    
where (replace(:P19_AUTHOR, ' ', '') = '' or
       bobooks.author like '%'||:P19_AUTHOR||'%') AND    
      (replace(:P19_TITLE, ' ', '') = '' or
       bobooks.title like '%'||:P19_TITLE||'%') AND    
      (:P14_LANGUAGE = 'all' or
       language = :P19_LANGUAGE or
       secondary_language = :P19_LANGUAGE) AND
      (:P19_GENRE = 'all' or
       genre = :P19_GENRE) AND
      (replace(:P19_OWNER, ' ', '') = ''  or
       bobooks.owner like '%'||:P19_OWNER||'%'); 
```

我搞砸了哪些列？

非常感谢您的参与！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:38:59.547

您不能在 WHERE 子句中的 SELECT 子句中引用列别名，至少不能在同一个查询中。您可以对其进行子查询，或者只使用原始列引用。

```
select     
 bobooks."ID" request,    
 bobooks."TITLE",    
 bobooks."AUTHOR",    
 bogenres."NAME" genre,    
 bobooks."OWNER",    
 bostatus."NAME" status,    
 bolanguages."LANGUAGE" language,    
 bolanguages2."LANGUAGE" secondary_language    
from BO_BOOKS bobooks    
inner join    
BO_GENRES bogenres on bobooks.genre = bogenres.id    
inner join     
BO_STATUS bostatus on bobooks.status = bostatus.id    
inner join     
BO_LANGUAGES bolanguages on bobooks.language = bolanguages.id    
left outer join    
BO_LANGUAGES bolanguages2 on bobooks.secondary_language = bolanguages2.id    
where     
(replace(:P19_AUTHOR, ' ', '') = '' 
or
bobooks.author like '%'||:P19_AUTHOR||'%')
AND    
(replace(:P19_TITLE, ' ', '') = '' 
or
bobooks.title like '%'||:P19_TITLE||'%')
AND    
(:P14_LANGUAGE = 'all' 
or
bolanguages."LANGUAGE" = :P19_LANGUAGE
or
bolanguages2."LANGUAGE" = :P19_LANGUAGE)
AND
(:P19_GENRE = 'all' 
or
bogenres."NAME" = :P19_GENRE)
AND
(replace(:P19_OWNER, ' ', '') = '' 
or
bobooks.owner like '%'||:P19_OWNER||'%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:39:43.413

在您的`WHERE`子句中，您需要引用表中的列而不是您在`SELECT`列表中分配的别名。因此，您不能引用别名`language`、`secondary_language`或`genre`。您需要参考实际表中的实际列。我敢打赌你想要类似的东西

```
or
bolanguages.LANGUAGE = :P19_LANGUAGE
or
bolanguages2.language = :P19_LANGUAGE)
AND
(:P19_GENRE = 'all' 
or
bogenres.NAME = :P19_GENRE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:45:01.387

如果不知道您的表结构，这个问题确实无法回答。列出了一些没有表别名的列（我看到`language`、`secondary_language`和`genre`），确保每列都有一个表别名，问题很可能会消失。

实际上，再看一遍，我 99% 确定它是`language`导致问题的原因：您的选择中有一个别名、BO_LANGUAGES 表的两个副本和一个 BO_BOOKS 表，它们都有一个具有该名称的字段。将其更改为WHERE 子句的语言部分（就我个人而言，`bolanguages.language`我也会更改）。`secondary_language``genre`

# java - javadocs中没有包名

> ID：13754481
> 
> 赞同：2
> 
> 时间：2012-12-06T23:25:55.227
> 
> 标签：java, javadoc

我的 javadocs 显示每个参数的完整包名称和方法的返回类型。例如：

```
compareResults(java.util.ArrayList<java.util.ArrayList<java.lang.Double>>) 
```

在 Java api 参考中，ArrayList 等没有以​​完整的包名开头，它只是 ArrayList。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:31:30.190

您正在寻找像这样工作的[-noqualifier 选项：](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#noqualifier)

```
-noqualifier java.*:com.sun.* 
```

# javascript - 如何通过 Javascript 通过 CSS 获取确切的 RGBa 值？

> ID：13754483
> 
> 赞同：10
> 
> 时间：2012-12-06T23:26:04.570
> 
> 标签：javascript, jquery, css, dom

在我尝试过的大多数浏览器中，`rgba()`一旦浏览器解析了 CSS，值似乎就会改变。

例如，以下 CSS：

```
background-color: rgba(255, 0, 0, 0.5); 
```

通过`jQuery.css('background-color')`或 native访问时给出以下 CSS 值`CSSStyleDeclaration.getPropertyValue('background-color')`：

```
rgba(255, 0, 0, 0.498039) 
```

这是一个带有更多示例[的小提琴。](http://jsfiddle.net/hgFEj/3)

Chrome 和 Safari 给出不同的结果。Firefox 似乎是唯一报告输入的确切值的浏览器。这是一个错误还是设计使然？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T00:16:45.067

Mark Hubbart 的评论是正确的。

32 位颜色分为四个 8 位分量，每个分量都在 0-255 范围内：*red*、*green*、*blue*和*alpha*。我们将*alpha*或透明度表示为分数或百分比，因为它可以帮助我们这些脑残的人更快地了解它的透明度。实际上，最好将其视为不透明（嗯，*不透明度*），因为 100% 透明是 0，而不是 1。

现在，鉴于 255 是*alpha*值的分母，因此无法准确表示 0.5。您看到的值 0.498039 来自最接近的分数 127/255（四舍五入到小数点后 6 位）。Safari 返回 0.496094，即 127/256 舍入到小数点后 6 位，对我来说似乎是一个错误，因为这意味着 257 个值。我也怀疑 Firefox 能否准确地报告 0.5，除非它只四舍五入到小数点后 2 位。

您可以通过创建一个 jQuery 插件在不同的浏览器中解决此问题，该插件在首次执行时检查以 50% alpha 返回的值，并相应地调整所有计算。

```
parseFloat(
   $('#divWith50PercentAlphaBackgroundStyle')
      .css('background-color')
      .split(',')[3],
   10
) 
```

然后，有了这个值，`switch`对不同浏览器返回的值执行一个操作，并正确转换为您期望的最接近的正确值。

# uitableview - viewForFooterInSection 陷入无限循环

> ID：13754489
> 
> 赞同：2
> 
> 时间：2012-12-06T23:26:48.093
> 
> 标签：uitableview, ios5, crash, ios6, infinite

为什么以下代码在 iOS 6 中运行良好。但在 iOS 5 中，它陷入了导致设备崩溃的无限循环。一旦执行了“self.footerView = ...”行，它就会再次调用 viewForFooterInSection。因此将其困在无限循环中。

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (!self.footerView)
        self.footerView = [[UIView alloc] initWithFrame:[tableView rectForFooterInSection:section]];

    return self.footerView;
} 
```

有一个更好的方法吗？为什么这适用于 iOS 6 而不是 5？

问候，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:58:17.277

很可能`rectForFooterInSection`正在调用委托方法`tableView:viewForFooterInSection:`以计算视图框架。

对我来说（并且预期）这进入无限循环似乎是合理的。

您基本上是在告诉`footerView`for 部分与of section`x`具有`UIView`相同的框架，您应该返回相同的框架。你能在这里看到递归问题吗？`footerView``x`

显然，iOS 6 中的一些实现更改阻止了无限循环（可能依赖于页脚框架的某些默认值），但上述委托方法的实现肯定是错误的。

您应该`footerView`独立定义并在委托方法中返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T07:02:14.507

我有这个问题。这种设置页脚的方法最适合我，因为我想定期刷新该页脚，并且很高兴拥有标签的句柄。如果你正在递归，只需返回 nil，Apple 将帮助你找出矩形（即使在 iOS 4.3 到 5.1 中也是如此）。

```
static BOOL alreadyCheckingFooter = false;
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (!self.footerView) {
        if (alreadyCheckingFooter)
            return nil;
        alreadyCheckingFooter = true;
        self.footerView = [[UIView alloc] initWithFrame:[tableView rectForFooterInSection:section]];
        alreadyCheckingFooter = false;
    }

    return self.footerView;
} 
```

# java - 用不同颜色的方块填充框架

> ID：13754504
> 
> 赞同：1
> 
> 时间：2012-12-06T23:28:20.740
> 
> 标签：java, jframe, drawing, java-2d

我在用不同颜色的 30px 正方形填充框架时遇到了这个奇怪的问题。这是我的尝试，但不起作用（也无法弄清楚如何设置正方形的大小）

```
import java.awt.Component;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.Random;

public class Pixl extends Component 
{
public void paint(Graphics g)
{
    Graphics2D g2d = (Graphics2D)g;
    g.setColor(Color.CYAN);

    int x = 25;
    int y = 32;
    g.drawLine(x,y,x,y);
}

public static void main(String[] args)
{

    int frameWidth = 300;
    int frameHeight = 300;

    javax.swing.JFrame frame = new javax.swing.JFrame();
    frame.setSize(frameWidth,frameHeight);
    frame.setVisible(true);
    frame.getContentPane().add(new DrawingComponent());
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:32:10.300

在您的代码中，您正在绘制一条在同一点开始和结束的线，这会产生一个设置为青色的像素。

要绘制一个 rect use [`fillRect`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#fillRect%28int,%20int,%20int,%20int%29)，如果您花时间阅读文档，这是不言自明的：

```
int size = 30;
g.fillRect(x, y, size, size); 
```

# performance - 为什么 FP 中的分支预测比 INT 更好

> ID：13754509
> 
> 赞同：1
> 
> 时间：2012-12-06T23:28:56.157
> 
> 标签：performance, optimization, pipeline, processor

我在很多地方读过并且在很多图表中看到**分支预测**对**浮点程序**比对**整数程序**更有效。为什么是这样？关于在哪里阅读它的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:08:10.890

应该有很多论文注意到这个事实。例如 [，动态分支预测器的方案和性能](http://bwrc.eecs.berkeley.edu/classes/cs252/Projects/Reports/terry_chen.pdf)第 13-14 页

> 如图 14 和图 15 所示，浮点程序的条件分支百分比低于整数程序，但采用的条件分支百分比较高。这是因为这些浮点程序具有许多长循环结构。

本文中还有一些关于 SpecInt 与 SpecFp 的统计数据——两组计算机基准程序——整数集和浮点集。有点过时，但仍然包含几个实际代码。

其他论文，例如[这篇](http://www.cs.ucsb.edu/~urs/oocsb/papers/TRCS97-10.pdf)论文说，OOP（通常被认为是整数任务）是间接分支：

> 间接分支在面向对象语言中更为频繁。这些语言促进了一种更加多态的编程风格，其中子例程调用的后期绑定是干净、模块化代码设计的主要工具。虚函数表是大多数 C++ 和 Java 编译器选择的实现，它为每个多态调用执行一个间接分支。这里研究的 C++ 程序**每 50 条指令**就执行一次**间接分支**；其他研究 [CGZ94] 也显示了类似的结果。Java 程序（所有非静态调用都是虚拟的）可能更频繁地使用间接调用。

 **我认为，浮点程序通常是面向数组的：在每个数组的元素上执行几个公共代码循环。计算代数在访问近元素时经常使用静态模式（例如，它只需要 [x-1][y] 和 [x-1][y-1] 来计算 [x][y]）。

整数程序是关于具有大量指针的复杂数据结构。每个指针遍历都有一些条件代码（检查 NULL；条件 jmp 到下一次迭代）；数据之间的依赖关系是复杂的或动态的。即使整数代码与巨大的 int 数组（例如图片）一起使用，也可能存在用于在下溢和上溢时饱和的条件代码。数组的排序也有很多分支。**

# matlab - 带有lowess曲线的Matlab散点图

> ID：13754516
> 
> 赞同：3
> 
> 时间：2012-12-06T23:29:27.940
> 
> 标签：matlab, latex, scatter-plot

我正在写一篇研究论文，并想从我的数据集中绘制类似的东西

![在此处输入图像描述](../Images/498f05a416479484806b4fc5ab3c4f5c.png)

基本上它是一个 Matlab 散点图，带有一条显示每个 bin 的平均值的 lowess 曲线

我已经在 Google 上搜索了 2 天，但找不到解决方案或一段示例代码来做到这一点

Stack Overflow 现在是我最后的手段了 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:34:41.210

这是我能想到的最简单的代码。这假设您有 x 和 y 向量中的数据。

```
%adjust bins accordingly, or add a line that calculates them based on range.
bins = -0.5:0.01:0.5;
nBins = length(bins);

for index = 1:(nBins-1)

  binVec = (x >= bins(index) & x < bins(index+1));
  lowess(index) = mean(y(binvec));

end
%note that bins are shifted by one half step.
plot(x,y,'.',bins+0.005,lowess,'--r'); 
```

可以将其矢量化，但不值得。至少我发现的方式会使它变得不可读并且稍微更有效率，如果有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T15:22:18.137

一个粗略的答案是，使用[http://www.mathworks.com/matlabcentral/fileexchange/13352](http://www.mathworks.com/matlabcentral/fileexchange/13352)做密度散点图，并`histc`在 matlab 中使用以适当的分辨率生成 lowess 曲线，并`hold plot`在您的密度图上使用画

# jsoup - 重用 Jsoup 连接

> ID：13754518
> 
> 赞同：5
> 
> 时间：2012-12-06T23:29:32.660
> 
> 标签：jsoup

我喜欢用 Jsoup 来解析 html，但是他们的连接有问题，我需要向同一个网站发送请求但查询参数不同，比如“id=XXX”，请求是这样的：

```
http://website/?id=XXX 
```

我不想为每个 id 创建一个新连接，而是为所有 id 请求保留一个连接，这是我的代码：

```
Connection conn = null;

..
if (_conn == null) {
 _conn = Jsoup.connect("http://website/";
}
doc = _conn.data("id", id).get()
.. 
```

但它似乎只在第一次工作，然后每次我的代码运行时重复相同的请求，在这种情况下，即使我在其他时间传递不同的 id，我也只能查询第一个 id。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:54:36.860

我已经设法通过更改每个请求来实现某种重用，`_conn.url();`所以在你的情况下，这就像

```
String siteUrl = "http://website/";
Connection _conn = Jsoup.connect(siteUrl);
int[] ids = {1,2,3};
for (int i : ids) {
    _conn.url(siteUrl + "?id=" + i);
    Document doc = _conn.get();
} 
```

在我看来，这比改变要优雅得多`_conn.request().data()`，但似乎这是唯一的方法。

希望能帮助到你。

# xcode - '在捆绑包 NSBundle 中找不到名为 'MainStoryBoard' 的故事板

> ID：13754526
> 
> 赞同：0
> 
> 时间：2012-12-06T23:30:26.240
> 
> 标签：xcode

我已经为我的问题查看了很多答案，我已经厌倦了他们，这是我的错误，这让我很恼火。

模拟器 = 5.0 和目标 = 5.0

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“在捆绑包 NSBundle 中找不到名为“MainStoryBoard”的故事板

不知道为什么上面有该文件的任何引用。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:29:49.953

听起来您在创建期间选中了“使用情节提要”选项来启动项目。

如果有“主情节提要”条目，请选择目标并检查“摘要”选项卡。如果，删除它并确保为“主界面”设置适当的 XIB。

# java - 编译列表时出错

> ID：13754527
> 
> 赞同：0
> 
> 时间：2012-12-06T23:30:27.683
> 
> 标签：java, arraylist

我正在尝试一些代码，但我无法编译它。有什么错误吗？我附上了下面的代码。

```
import java.util.*;
import java.io.*;
import javax.swing.*;
import java.awt.event.*;

public class Node
{
  private int nodeId;
  private List<Connection> outboundConnections = new ArrayList<>();

  public Node(int nodeId)
  {
    this.nodeId = nodeId;
  }

  public void addConnection(Connection connection)
  {
    this.outboundConnections.add(connection);
  }
} 
```

当我编译时，我得到了这种错误：

```
Node.java:9: error: cannot find symbol

  private List<Connection> outboundConnections = new ArrayList<>();

               ^
  symbol:   class Connection

  location: class Node

Node.java:16: error: cannot find symbol

  public void addConnection(Connection connection)
                            ^
  symbol:   class Connection

  location: class Node

Node.java:9: error: unexpected type

  private List<Connection> outboundConnections = new ArrayList<>();

                                                              ^
  required: class

  found:    <E>ArrayList<E>

  where E is a type-variable:

    E extends Object declared in class ArrayList

3 errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T23:31:49.697

```
private List<Connection> outboundConnections = new ArrayList<>(); 
```

仅在 Java 7+ 上有效。如果您运行 Java 6 或更早版本，则需要使用：

```
private List<Connection> outboundConnections = new ArrayList<Connection>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:34:38.273

显然你需要添加

```
import java.sql.Connection; 
```

# iphone - NSDateFormatter 给我一个 NULL 字符串

> ID：13754528
> 
> 赞同：-4
> 
> 时间：2012-12-06T23:30:40.727
> 
> 标签：iphone, objective-c, ios, ipad

我有以下字符串：

```
"2012-12-06 21:55:00" 
```

当我把它放进去时：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"]; 
```

它给了我空值。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:39:34.740

你需要：

```
[df setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

日期格式需要与字符串中日期的格式相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:40:16.840

您缺少对 的`stringFromDate:`方法的调用`NSDateFormatter`。

此外，您的自定义格式与您提供的示例字符串不兼容，因为它应该是`yyyy-MM-dd HH:mm:ss`

实现结果的正确方法是

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate * yourDate = [dateFormatter dateFromString:@"2012-12-06 21:55:00"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T05:16:32.200

使用此方法`NSDate`从`NSString`您所需格式的日期获取..

```
-(NSDate *)convertStringToDate:(NSString *) date {
        NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease]; 
        NSDate *nowDate = [[[NSDate alloc] init] autorelease];
        [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];// set format here which format in string date
        date = [date stringByReplacingOccurrencesOfString:@"+0000" withString:@""];
        nowDate = [formatter dateFromString:date];
        return nowDate;
} 
```

获取更多信息，然后查看我的博客[Paras Joshi 的博客](http://parasjoshi3.blogspot.in/2012/01/convertstringtodatedatetostring.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:05:23.800

我使用了以下代码。我试过了，它工作正常，你可以试试这个代码来找出当前时间与另一个时间之间的差异。

```
NSTimer*  updateTimerValue=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(DisplayTimer) userInfo:nil repeats:YES]; 

-(void)DisplayTimer
{  
    NSDateFormatter* dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss "];
    NSDate *now = [[NSDate alloc] init];

    NSString *dt=[dateFormatter stringFromDate:now];

    NSDate* firstDate = [dateFormatter dateFromString:dt];
    NSDate* secondDate = [dateFormatter dateFromString:[_deale_detail_deal_endate_ary objectAtIndex:0]];

    NSTimeInterval timeDifference = [secondDate timeIntervalSinceDate:firstDate];

    int a=timeDifference;

    int m,s,h,d;
    m=a/60;
    s=a%60;
    h=m/60;
    m=m%60;
    d=h/24;
    h=h%24;
    s--;
    if (s<0) {
        m--;
        s=59;
    }
    if (m<0) {
        h--;
        m=59;
    }
    if (h<0) {
        d--;
        h=24;
    }

    //NSLog(@"%dd %dh %dm %ds",d,h,m,s);
    _deal_time_display_lbl.text = [NSString stringWithFormat:@"%dd %dh %dm %ds",d,h,m,s];
} 
```

# sql-server - 在运行时创建多个datagridview控件时，如何隐藏列？

> ID：13754530
> 
> 赞同：1
> 
> 时间：2012-12-06T23:30:48.807
> 
> 标签：sql-server, vb.net, datagridview, tabcontrol, datagridviewcolumn

我在运行时生成的 datagridview 控件中隐藏列时遇到了一些麻烦。我在现有选项卡控件的运行时生成的选项卡页内生成该控件。我的代码如下：

```
Try
    Do
        If m_DataTable.Columns.Contains("Checkpoint " & intCheckPointNumber & " Time") Then
            Dim tabNewCheckpoint As New TabPage
            Dim dgvNewCheckpoint As New DataGridView

            tabNewCheckpoint.Name = "tabCheckpoint" & intCheckPointNumber
            tabNewCheckpoint.Text = "Checkpoint " & intCheckPointNumber
            tabctrlTimingTable.TabPages.Add(tabNewCheckpoint)

            dgvNewCheckpoint.Name = "dgvCheckpoint" & intCheckPointNumber
            dgvNewCheckpoint.DataSource = m_DataTable
            dgvNewCheckpoint.Size = dgvTimingP2P.Size
            tabNewCheckpoint.Controls.Add(dgvNewCheckpoint)

            Try
                strColumnName = "Checkpoint " & intCheckPointNumber
                For Each col As DataColumn In m_DataTable.Columns
                    MessageBox.Show(col.ColumnName)
                    If col.ColumnName.StartsWith("Checkpoint") Then
                        If Not col.ColumnName.StartsWith(strColumnName) Then
                            dgvNewCheckpoint.Columns(col.ColumnName).Visible = False
                        End If
                    End If
                Next
            Catch
                MessageBox.Show(ErrorToString)
            End Try
        Else
            Exit Do
        End If
        intCheckPointNumber += 1
    Loop
Catch ex As Exception
    'MessageBox.Show(ErrorToString)
End Try 
```

col.ColumnName 值确实直接对应于数据库中的列，但在此行上会立即生成错误：

```
dgvNewCheckpoint.Columns(col.ColumnName).Visible = False 
```

我不断收到的错误是：“对象引用未设置为对象的实例”

此代码适用于我在选项卡控件的另一个选项卡页内的 datagridview 控件，这些控件都是在设计时创建的。

在创建运行时生成的 datagridview 后立即隐藏列是否有问题？

我正在使用 VB2010。

我最初确实使用了以下代码：

```
For Each col As DataGridViewColumn In dgvNewCheckpoint.Columns
MessageBox.Show(col.Name)
    If col.Name.StartsWith("Checkpoint") Then
        If Not col.Name.StartsWith(strColumnName) Then
            col.Visible = False
        End If
    End If
Next 
```

我在这里遇到的问题是程序直接跳过了这个 For...Next 循环，因为它不能在 dgvNewCheckpoint datagridview 控件中看到 DataGridViewColumns。当我将其更改为引用数据库中的列时，我实际上得到了结果。我在这里错误地引用了列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:46:47.443

在绑定到数据表之前，应将 DGV 添加到控制列表中。因此，该行应按如下方式移动：

```
Dim tabNewCheckpoint As New TabPage
Dim dgvNewCheckpoint As New DataGridView

tabNewCheckpoint.Name = "tabCheckpoint" & intCheckPointNumber
tabNewCheckpoint.Text = "Checkpoint " & intCheckPointNumber
tabctrlTimingTable.TabPages.Add(tabNewCheckpoint)

tabNewCheckpoint.Controls.Add(dgvNewCheckpoint) 'This is the line to be moved

dgvNewCheckpoint.Name = "dgvCheckpoint" & intCheckPointNumber
dgvNewCheckpoint.DataSource = m_DataTable
dgvNewCheckpoint.Size = dgvTimingP2P.Size 
```

# javascript - 在 JavaScript 中使用 this.id？

> ID：13754532
> 
> 赞同：2
> 
> 时间：2012-12-06T23:30:58.043
> 
> 标签：javascript, jquery, this

我在 onclick 事件发生后传递了一个 DOM 对象，我需要知道我从 html 传递的元素的 id。我已经阅读了`this.id`JavaScript 中存在的内容，但我似乎无法正确使用它。

这是我在函数中的代码：

```
function clickFunction() {
    $(".tictactoe").on('click', function() {

        $(this).text("X");
        if (this.id == "upleft") {
            $('#upright').text("yes");
        }
    });
}

$(document).ready(function() {
    $('#playagain').hide();
    $('.tictactoe').on("click");

    clickFunction();

}); 
```

所以我想我的快速测试，如果成功的话，当我点击左边的位置时，会在右上角的 tic tac 网格中显示“yes”这个词。

也许我的比较有问题？

```
this.id == "upright" 
```

X 出现了，说明其余代码都可以工作，所以肯定是比较。让我知道你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:34:19.180

在点击处理程序中传递 clickFunction。然后删除函数中不必要的点击处理程序。

```
$(document).ready(function(){
    $('#playagain').hide();
    $('.tictactoe td').on("click", clickFunction);    //Added td click handler
});

function clickFunction()
{
    $(this).text("X");
    if(this.id == "upleft")
    {
        $('#upright').text("yes");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:41:26.427

如果您改用以下内容会发生什么：

```
$(this).attr('id') == "upright" 
```

# php - PHP - 仅在成功切换时运行代码

> ID：13754535
> 
> 赞同：1
> 
> 时间：2012-12-06T23:31:19.023
> 
> 标签：php, switch-statement

寻找更简单的方法来完成：

```
$switch_success = false;
switch ($var){
    case "a":
        // do some stuff
        $switch_success = true;
        break;
    case "b":
        // do some stuff
        $switch_success = true;
        break;
    case "c":
        // do some stuff
        $switch_success = true;
        break;
}
if ($switch_success){
    // switch was successful - run once only if switch finds a matching case
} 
```

可能是另一个 case 关键字，例如`default`仅 for `any`or `all`：

```
case "c":
    // do some stuff
    break;
all:
    // switch was successful - run once only if switch finds a matching case 
```

或者可能 ...

```
$switch_success = switch ($var){
    case "a":
    // do some stuff
    break;
    case "b":
    // do some stuff
    break;
    case "c":
    // do some stuff
    break;
}
if ($switch_success) //... 
```

只是尝试了无济于事，但只是想说明我的意图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:36:27.170

`$switch_success=1;`在顶部和`default: $switch_success=0;`开关末端尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T23:38:47.377

怎么样...之类的

```
$switch_success = true;
switch ($var)
{
    case "a":
        // do some stuff
        break;
    case "b":
        // do some stuff
        break;
    case "c":
        // do some stuff
        break;
    default:
        $switch_success = false;
}
if ($switch_success){
    // switch was successful - run once only if switch finds a matching case
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:37:49.107

默认情况下，该`case`子句已失效。

```
switch ($var){
    case "a":
    case "b":
    case "c":
        // do some stuff
        break;
    default
        // do nothing
        break;
} 
```

但是，如果您要为每个案例做一些事情，然后再为所有事情做一些事情，那么您的原始示例就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T23:38:28.420

如果我对您的理解正确，您希望 $success 在满足*任何*一种情况时为真，否则为假？如果是这样，设置 $success = true; 一开始，让你的“默认”案例为 $success = false; 然后你不必输入 $success = true; 一堆时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T23:40:21.047

也许这个？

```
$switch_success = true;
switch ($var){
    case "a":
        // do some stuff
        break;
    case "b":
        // do some stuff
        break;
    case "c":
        // do some stuff
        break;
    default:
        $switch_success = false;
        break;
}
if ($switch_success){
    // switch was successful - run once only if switch finds a matching case
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T23:36:47.857

我想不出更短的版本

```
if ($var == 'a' || $var == 'b' || $var == 'c') // do some stuff; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T23:37:06.173

我会`$switch_success`单独设置，例如：

```
$switch_success = in_array($var, array("a","b","c"));

switch ($var) {
    case "a":
        // do some stuff
        break;
    case "b":
        // do some stuff
        break;
    case "c":
        // do some stuff
        break;
}

if ($switch_success) {
    // switch was successful
} 
```

# html - 减少 Twitter Bootstrap 输入字段的高度？

> ID：13754536
> 
> 赞同：40
> 
> 时间：2012-12-06T23:31:27.403
> 
> 标签：html, css, twitter-bootstrap

在我的表单中，我想减少输入字段的高度。

我知道有一些输入小、输入中等的类可以控制输入字段的宽度，但是有什么类似的东西可以控制高度吗？

我找不到任何东西，如果没有，我该如何覆盖默认值？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-07T01:34:14.317

> 我找不到任何东西，如果没有，我该如何覆盖默认值？

Bootstrap 的输入字段高度是使用属性选择器定义的，例如`input[type="text"], input[type="password"]`

您可以使用相同选择器格式的样式覆盖它，或者使用类等。

```
.mystyle input[type="text"] {
   height: 14px;
   font-size: 10px;
   line-height: 14px;
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-05-30T15:59:15.077

根据 Bootstrap 文档：[Bootstrap CSS](http://getbootstrap.com/css/)，您应该使用`.input-sm`

如果您要编写自己的 CSS，您并没有真正利用 Bootstrap 的强大功能。

```
<input class="form-control input-sm" type="text" placeholder=".input-sm"> 
```

它只是改变了`height`@Neps 提到的属性

但是，我必须`.input-sm`在我自己的 CSS 中覆盖以正确调整大小。

我只是更喜欢尽可能使用 Bootstrap 类。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-13T20:08:45.983

是的，有控制高度的类。[您可以在此处](http://getbootstrap.com/css/#forms-control-sizes)阅读有关它们的信息。

```
input-lg
input-sm 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-27T17:30:44.590

我建议学习为您的引导文件使用 LESS 或 SASS 编译器，并与引导程序一起下载 LESS/SASS 文件。这不是很困难，并且确实是您“应该”自定义 Bootstrap 的方式。一两次调整可能有点笨拙，但对于整体配色方案或网格/输入控件间距和填充等问题，它确实要好得多，因为 LESS 变量是通用的，并且可能适用于你不会的东西不考虑覆盖。例如，您应该使用“form-control”类来装饰所有输入。“表单控制”和“输出”类在文件中定义：forms.less，字段的高度是基于许多变量检查出来的：

```
.form-control {
  display: block;
  width: 100%;
  height: @input-height-base; // Make inputs at least the height of their button counterpart (base line-height + padding + border)
  padding: @padding-base-vertical @padding-base-horizontal;
  font-size: @font-size-base;
  line-height: @line-height-base;
  color: @input-color;
  background-color: @input-bg;
  background-image: none; // Reset unusual Firefox-on-Android default style; see https://github.com/necolas/normalize.css/issues/214
  border: 1px solid @input-border;
  border-radius: @input-border-radius; // Note: This has no effect on <select>s in some browsers, due to the limited stylability of <select>s in CSS.
  .box-shadow(inset 0 1px 1px rgba(0,0,0,.075));

  ...more stuff I removed...
  } 
```

所有变量都定义在一个易于使用的文件中，并且在那里所做的更改会影响一切。这是一个示例：

```
//== Components
//
//## Define common padding and border radius sizes and more. Values based on 14px text and 1.428 line-height (~20px to start).

@padding-base-vertical:     6px;
@padding-base-horizontal:   12px;

@padding-large-vertical:    10px;
@padding-large-horizontal:  16px;

@padding-small-vertical:    5px;
@padding-small-horizontal:  10px;

@padding-xs-vertical:       1px;
@padding-xs-horizontal:     5px;

@line-height-large:         1.3333333; // extra decimals for Win 8.1 Chrome
@line-height-small:         1.5;

@border-radius-base:        4px;
@border-radius-large:       6px;
@border-radius-small:       3px;

//** Global color for active items (e.g., navs or dropdowns).
@component-active-color:    #fff;
//** Global background color for active items (e.g., navs or dropdowns).
@component-active-bg:       @brand-primary;

//** Width of the `border` for generating carets that indicate dropdowns.
@caret-width-base:          4px;
//** Carets increase slightly in size for larger components.
@caret-width-large:         5px; 
```

如果新版本的 BS 出现，您只需使用编译器将旧变量应用于新的 BS 文件。

链接： http: [//getbootstrap.com/customize/](http://getbootstrap.com/customize/)

[http://lesscss.org/](http://lesscss.org/)

Visual Studio 用户： [https ://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebCompiler](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebCompiler)

# linux - 如何使 wxpython 中的 wxsearchctrl 中的文本不灰显？

> ID：13754538
> 
> 赞同：1
> 
> 时间：2012-12-06T23:31:30.430
> 
> 标签：linux, text, wxpython

```
#! /usr/bin/python

#SearchCtrlProblem

import wx

class ControlPanel(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(200,200))
        self.panel = wx.Panel(self, -1)
        vbox = wx.BoxSizer(wx.VERTICAL)
        self.panel.SetSizer(vbox)
        self.DoLayout()
        self.Centre()
        self.Show(True)        

    def DoLayout(self):
       vbox = self.panel.GetSizer()

        self.tc = tc = wx.TextCtrl(self.panel, size = (140,-1), style=wx.TE_PROCESS_ENTER)
        vbox.Add(tc, 0, wx.ALL, 15)
        tc.Bind(wx.EVT_TEXT_ENTER, self.OnTextCtrl, id=tc.GetId())

        self.sc = sc = wx.SearchCtrl(self.panel, size = (140,-1), style=wx.TE_PROCESS_ENTER)
        sc.ShowSearchButton(True)
        sc.ShowCancelButton(True)
        vbox.Add(sc, 0, wx.ALL, 15)

        sc.Bind(wx.EVT_TEXT_ENTER, self.OnSearchCtrl, id=sc.GetId())

        self.bn = bn = wx.Button(self.panel, -1, 'Reset', (140,-1))
        vbox. Add(bn, 0, wx.ALL,15)
        bn.Bind(wx.EVT_BUTTON, self.OnReset, id = bn.GetId())

        vbox.Layout()
        self.Refresh()       

    def OnTextCtrl(self, evt):
        value = self.tc.GetValue()
        self.sc.SetValue(value)

    def OnSearchCtrl(self, evt):
        value = self.sc.GetValue()
        self.tc.SetValue(value) 

    def OnReset(self, evt):
        self.panel.DestroyChildren()
        self.DoLayout()

app = wx.App()
ControlPanel(None, -1, '')
app.MainLoop() 
```

我写了这个愚蠢的程序来演示这个问题。+ 当我运行程序时，如果我首先在搜索框中输入 sc 然后按回车，一切正常，sc 中有黑色文本。现在，我可以在文本框中输入 tc 然后按回车，sc 中的文本仍然是黑色的

*   但是，如果我首先在搜索框 sc 中输入然后按 enter，sc 中的文本将变为灰色。从那时起，如果我尝试输入 tc 然后按回车，sc 中的文本总是灰色的。

注意：在开始输入之前，您可以通过按“重置”按钮来重置布局。该问题发生在 Linux RedHat 4.5.1-3、Python 2.7 上。当我在 Mac OS X 10.8、Python 2.7.2 上尝试这个时，这个问题没有发生。

如何使 SearchCtrl 中的文本始终为黑色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:15:14.390

[这](http://trac.wxwidgets.org/ticket/12798)是`wxWidgets 2.8.12`. _

当文本匹配提示文本（控件为空时显示的灰色文本）时，控件只会在获得焦点时将文本颜色设置为黑色。

要在不升级到 never 版本的情况下解决此问题，您必须在更改其文本之前聚焦控件：

```
wnd = self.FindFocus()   # get currently focused window
self.sc.SetFocus()       # trigger the color update (if needed)
self.sc.SetValue(value)
if wnd: wnd.SetFocus()   # restore previous focus
else: self.SetFocus()    # set focus to frame if none was set 
```

要从 wxSearchCtrl 中删除文本并恢复灰色提示文本，只需简单调用即可`Clear()`（无论如何在 2.8.12 中）。

该错误已在最新的开发版本 ( `2.9.4`) 中修复。但是，清除文本不会恢复提示文本。

之后`OS X 10.3`，将使用本机搜索控件，它不会表现出这种行为。

# c# - 在 C# 中删除 cookie 问题

> ID：13754541
> 
> 赞同：7
> 
> 时间：2012-12-06T23:31:57.353
> 
> 标签：c#, asp.net, cookies

我正在尝试删除一个 cookie，但它并没有被删除。这是我尝试使用的代码。

```
if (Request.Cookies["dcart"] != null)
{
    Response.Write(Request.Cookies["dcart"].Expires);
    // Response 1/1/0001 12:00:00 AM

    Response.Write(Request.Cookies["dcart"].Value);
    // Response 229884

    HttpCookie myCookie = new HttpCookie("dcart");
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    myCookie.Value = "";
    Response.Cookies.Add(myCookie);
}

Response.Write(Request.Cookies["dcart"].Expires);
// Response 1/1/0001 12:00:00 AM
Response.Write(Request.Cookies["dcart"].Value);
// Response 229884 
```

当我再次检索 cookie 时，没有任何变化。我检查 w/ FireFox 和 Chrome 相同的行为。有趣的一点是，到期日期在浏览器上正确显示，但在代码上。

我尝试了以下并没有工作。

*   将到期日设置为（明天）并再次将其设置为昨天。
*   重启浏览器（发生不同的浏览器和人）
*   设置值
*   使用 HttpContext.Current.Request.Cookies["dcart"]....
*   Request.Cookies["dcart"].Expires = DateTime.Now.AddYears(-10);

PS。该代码不会直接在您的机器上运行，因为您没有 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T00:21:41.823

解决了

问题是路径。我请求的cookie位于“/store”路径下，而我将路径信息响应为“/”。

```
if (Request.Cookies["dcart"] != null)
{
   HttpCookie myCookie = new HttpCookie("dcart");
   myCookie.Expires = DateTime.Now.AddDays(-1d);
   myCookie.Path = "/store";
   Response.Cookies.Add(myCookie);
} 
```

当我添加路径信息时，它被删除了。

注意：我使用 Firebug 来跟踪 cookie 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:42:01.157

饼干比看起来更棘手。阅读此文章以获得有关如何使用 cookie 的清晰说明：

[关于 Cookie 的保养和处理](http://www.codeproject.com/Articles/3106/On-The-Care-and-Handling-of-Cookies)

要删除 cookie，根据链接文章，您只需将过期时间设置为过去的任何时间，但不要使用 DateTime.MinValue 因为某些浏览器无法正确处理该日期：

> 如果你想删除客户端机器上的 cookie，不要使用明显的 Response.Cookies.Remove("MyCookie") ，它只是告诉 cookie 不要覆盖客户端的 cookie（更详细的解释见下文），设置cookie 的 Expires 属性为当前时间之前的任何时间。这将告诉客户端用过期的 cookie 覆盖当前的 cookie，并且客户端永远不会将其发送回服务器。
> 
> 同样，诱惑是使用 DateTime.MinValue (01-Jan-0001 00:00:00) 删除 cookie；同样，这将是一个错误。这一次，Netscape 7 将按预期工作，但 Internet Explorer 6 认为这是一个例外情况。如果 Internet Explorer 收到一个它认为是“空白”到期日期的 cookie，它将保留该 cookie，直到浏览器关闭然后到期。
> 
> 使用 DateTime.Now.AddYears(-30) 的到期日期来删除 cookie 的最安全（也是最对称）的方法。

即正确的方法是

```
Request.Cookies["dcart"].Expires = DateTime.Now.AddYears(-30); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T22:14:43.580

此链接将为您提供一些答案：

[https://msdn.microsoft.com/en-us/library/ms178195.aspx](https://msdn.microsoft.com/en-us/library/ms178195.aspx)

就我而言，只是在本地主机中工作，但是，当我部署到服务器时，问题仍然存在......

在`HttpCookie`中，您可以尝试设置 Expire 参数`DateTime.Now.AddDays(-1d)`，（将 Expire date 设置为昨天）并设置属性`Secure = false`。

在此之后，为我工作。

# python - 原始图像 get_serving_url 通过 blob

> ID：13754544
> 
> 赞同：1
> 
> 时间：2012-12-06T23:32:09.133
> 
> 标签：python, google-app-engine, blob

无论如何可以使用 get_serving_url 获取原始图像（具有相同尺寸）？

如果未指定尺寸，它似乎仍然提供按比例缩小的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:48:47.330

当您使用 s=0 时，您会看到原始图像。

示例：[https ://lh6.ggpht.com/1HjICy6ju1e2GIg83L0qdliUBmPHUGKV8FP3QGK8Qf2pHVBfwkpO_V38ifAPm-9m20q_3ueZzdRCYQNyDE3pmA695iaLunjE=s0](https://lh6.ggpht.com/1HjICy6ju1e2GIg83L0qdliUBmPHUgKV8FP3QGK8Qf2pHVBfwkpO_V38ifAPm-9m20q_3ueZzdRCYQNyDE3pmA695iaLunjE=s0)

# ios - RestKit 和 AFNetworking 构建错误

> ID：13754547
> 
> 赞同：9
> 
> 时间：2012-12-06T23:32:24.840
> 
> 标签：ios, restkit, afnetworking

当我尝试将 RestKit api 导入项目时，出现以下错误：

```
 /Documents/Code/RestTest/RestKit/Code/Network/RKHTTPRequestOperation.h:21:9:
 'AFNetworking.h' file not found 
```

我已将 RestKit 作为 git 子模块安装，如何解决 RestKit 对 AFNetworking 的依赖？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-07T05:40:51.163

克隆后，只需在 RestKit 目录中执行：

```
git submodule update --init --recursive 
```

这将拉取 RestKit 需要的 AFNetworking 版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:00:06.223

如果你使用 CocoaPods 会自动完成所有这些。

从 RestKit 安装文档：

> ## 如果 CocoaPods 不可用，请安装：
> 
> > $ [sudo] gem install cocoapods
> > $ pod setup
> 
> 编辑您的 Podfile 并添加 RestKit：
> 
> > $ 编辑 Podfile
> > 平台 :ios, '5.0'
> > pod 'RestKit', :git => 'https://github.com/RestKit/RestKit.git', :branch => 'development'
> 
> ## 测试和搜索是可选组件
> 
> > pod 'RestKit/Testing', :git => 'https://github.com/RestKit/RestKit.git', :branch => '开发'
> > pod 'RestKit/Search', :git => 'https:// github.com/RestKit/RestKit.git', :branch => '开发'
> > 
> > ## 安装到您的项目中：
> > 
> > $吊舱安装
> 
> 请注意，如果您的安装失败，可能是因为您正在使用低于 CocoaPods 预期的 Git 版本进行安装。请通过执行 git --version 确保您正在运行 Git >= 1.8.0。您可以通过执行 pod install --verbose 来全面了解安装细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T20:48:38.810

这可能对某些人有所帮助。我完全跳过了专门针对避免 AFNetworking 错误的 RestKit wiki 中的这一部分：

[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule#updating-the-precompiled-header-file](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule#updating-the-precompiled-header-file)

我有一个`'AFNetworking.h' file not found`错误，这是因为我错过了 .pch 中的这些导入。

# java - 需要 Java Simple 的“Hello World”示例

> ID：13754550
> 
> 赞同：0
> 
> 时间：2012-12-06T23:32:35.763
> 
> 标签：java, xml

我正在努力理解 Java [Simple](http://simple.sourceforge.net/home.php)。它的某些东西看起来很酷，但我不知道如何使用它。

我找不到一个“Hello World”示例来演示这些零碎如何组合在一起。我正在寻找这样的东西；

**预期产出**

```
<durr/> 
```

**演示.java**

```
public class Demo {
    public static void main(String[] args) {
       String str = new Foo();
       System.out.println(str);
    }
} 
```

**Foo.java**

```
import org.simpleframework.xml.Root;

@Root
public class Foo{
    // Something
} 
```

**编译运行**

```
javac Demo.java Foo.java
java Demo 
```

**概括**

`<durr/>`可以使用 Simple输出的最简单的演示是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:40:48.473

直接引用[simple 的文档](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#start)：

> 要序列化上述对象的实例，需要 Persister。然后给持久化对象一个带注释的对象的实例和一个输出结果，在这个例子中是一个文件。持久器对象可以使用其他输出格式。

所以基本上，我会说你的 Demo 类可以用以下方式编写：

```
import java.io.File;
import org.simpleframework.xml.Serializer; 
import org.simpleframework.xml.core.Persister;

public static void main(String[] args) throws Exception {

   Foo foo = new Foo();
   Serializer serializer = new Persister(); 
   File result = new File("example.xml"); // XML OUTPUT WILL BE WRITTEN HERE
   serializer.write(foo, result);
} 
```

再一次，根据文档，我会说这将生成一个`<foo/>`tag ，因为它是你的类的名称，要将其更改为`<duur/>`输出，你必须在你的类的根标记中重新定义名称`Foo`，如下所示：

```
import org.simpleframework.xml.Root;

@Root(name="durr")
public class Foo{
 // Something
} 
```

# ruby - 如何从 ruby 中的数组中选择一个随机项（不是 rails）

> ID：13754552
> 
> 赞同：11
> 
> 时间：2012-12-06T23:32:46.920
> 
> 标签：ruby, arrays, random

我有一系列国家：

```
@countries = ["Canada", "Denmark", "Germany", "Isle of Man", "Namibia", "Qatar", "South Africa",  "United Kingdom","United States"] 
```

并且正在构建一些随机数据进行测试，如下所示：

```
@test = [{ :name   => "AAA -"+Faker::Name.name,  :country => @countries.???? ....}] 
```

如何从`@countries`哈希中获取随机值？

```
@countries.rand(mlen) 
```

不起作用并返回`NoMethodError: private method`rand' 要求 #`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-06T23:34:18.167

使用`Array#sample`：

```
@countries = ["Canada", "Denmark", "Germany", "Isle of Man", "Namibia", "Qatar", "South Africa",  "United Kingdom","United States"]

random_country = @countries.sample
# => "Canada"

random_country = @countries.sample
# => "United Kingdom" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T23:45:23.033

你也可以使用`random_country = @countries.shuffle.first`.

# asp.net - ASP.NET 4.0 Webforms - 异步更新 3 个面板

> ID：13754553
> 
> 赞同：0
> 
> 时间：2012-12-06T23:32:50.067
> 
> 标签：asp.net, asynchronous

也许我在想这个错误的方式，我知道页面呈现并发送到客户端（网络浏览器）。但我真的需要明白这一点。

**问题** 如何异步更新我的三个更新面板？为了模拟这一点，我创建了一个 for 循环，在找到正确的数字并触发事件后，每次添加一秒。所以我想做的是能够在网络浏览器中看到这些更新何时完成。时间跨度将是这样的：

**TIME**
0,0235（只是一个数字表明它确实发生得很快）
**页面上发生了什么？** 几乎立即将第一个标签更新为数字 7 **TIME**
0,0235 + 一秒 = 1,0235 **页面上会发生什么？** 几乎立即将第二个标签更新为数字 8 **TIME**
0,0235 + 一秒 = 2,0235 **页面上会发生什么？** 几乎立即第三个标签更新为数字 9

我曾经浏览过首先向您显示一些文本的页面，几秒钟后，它们会向您显示图表，该请求何时完成加载？所以一定有正确的方法吗？

这是我的代码，我没有发布我的 CounterEventArgs 类，它可以工作并且不会影响问题。

这是我的 index.aspx - 代码隐藏公共部分类 _Default ： System.Web.UI.Page { private testClass _testet;

```
protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager1.RegisterAsyncPostBackControl(Button1);  
}
void _testet_CounterFoundNumber(object sender, CounterEventArgs e)
{
    switch (e.labelnumber)
    {
        case 1:
            Label1.Text = e.positionen.ToString();            
            break;
        case 2:
            Label2.Text = e.positionen.ToString();        
            break;
        case 3:
            Label3.Text = e.positionen.ToString();        
            break;
    } 
}
protected void Button1_Click(object sender, EventArgs e)
{
    testClass testet = new testClass();
    _testet = testet;
    _testet.CounterFoundNumber += new testClass.CounterEventArgsHandler(_testet_CounterFoundNumber);
    _testet.count();
}
} 
```

和源

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" Async="true"%>

  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
<title></title>
</head>
<body>
  <form id="form1" runat="server">
  <div>  
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
</div>
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
</asp:ScriptManager>
<asp:UpdatePanel ID="updatepanel1" runat="server" UpdateMode="Always">
<ContentTemplate>
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</form>
</ContentTemplate>
</asp:UpdatePanel>

 <asp:UpdatePanel ID="updatepanel2" runat="server" UpdateMode="Always">
<ContentTemplate>
  <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
</form>
</ContentTemplate>
</asp:UpdatePanel>
 <asp:UpdatePanel ID="updatepanel3" runat="server" ChildrenAsTriggers="false" UpdateMode="Conditional">
<ContentTemplate> 
```

最后是我的测试课

```
public class testClass
{
public event CounterEventArgsHandler CounterFoundNumber; 
public delegate void CounterEventArgsHandler(object sender, CounterEventArgs e);
public int y = 1;

    protected virtual void OnCounterFoundNumber(CounterEventArgs e)
    {
        if (CounterFoundNumber != null)
        CounterFoundNumber.BeginInvoke(this, e, new AsyncCallback(this.ResultFoundNumber), null);
    }

    public void count()
    {          
        for (int i = 0; i < 10; i++)
        {
            if (i >= 7)
            {    
               OnCounterFoundNumber(new CounterEventArgs(i,y));
               y++;
               System.Threading.Thread.Sleep(1000);
            }              
        }
    }
    public void ResultFoundNumber(IAsyncResult ar)
    {
        CounterFoundNumber.EndInvoke(ar);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:13:20.800

[**尝试使用 Javascript setInterval method()**](http://www.w3schools.com/jsref/met_win_setinterval.asp)而不是在后面编写代码[](http://www.w3schools.com/jsref/met_win_setinterval.asp)

 **在 JavaScript 函数中**触发一些按钮单击事件**，该事件为您执行部分 postpack 并更新面板。

如果需要，可以通过设置 css 属性**disply:none使按钮不可见**

或者，如果您使用 HTML 5 ，请检查在 ASP.Net或***WebSockets实现中实现***[**COMET 。**](http://pokein.codeplex.com/)

 *希望这会对你有所帮助！***

# sql - 如何正确管理 SQL Server 中的集合

> ID：13754554
> 
> 赞同：2
> 
> 时间：2012-12-06T23:32:50.410
> 
> 标签：sql, locking, sql-server-2008-r2, transactionscope, transaction-isolation

假设房屋有居住者，并且任何房屋的两个居住者都不能具有相同的高度。

1.  随机选择房子
2.  获取房屋当前居住者的列表
3.  通过检查列表来决定保留、替换、驱逐或添加哪些
4.  确保新列表不包含任何相同高度的居住者。
5.  用新列表替换现有列表；根据需要删除、插入或更新。

听起来很简单，但是当您有 50 个线程都试图同时执行此操作时，它会变得复杂。我在选择（步骤 2）上使用了 UPDLOCK、ROWLOCK 来阻止对我可能想要更新的任何居住者的可能更新。但是，当没有当前居住者并添加了新居住者时，我偶尔会失败。失败始终是唯一的约束违规。这绝不应该发生（参见步骤 4），但它确实发生了。

步骤 2-5 正在使用 ReadCommitted 隔离级别在 TransactionScope 内执行。

是否有一个最佳实践模型来定义应该如何处理这样的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:21:47.463

我意识到这不是 SQL 或 TransactionScope 相关的问题。我正在协调数据项的集合，并且在发生这种情况时必须对集合的访问进行信号处理。就我而言，我只需要在进行协调的代码周围添加一个 lock(List) { 。}

继续进行类比，如果您要核对一份居住者名单，最好锁上门以防止居住者在您执行此操作时进出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T02:56:20.077

看看[SQL Server 中的事务隔离级别](http://msdn.microsoft.com/en-us/library/ms189122%28v=sql.105%29.aspx)。听起来您的问题很可能是您进行了幻读（即，有人将数据插入到您已经选择的范围中）。

在这种情况下具有高级别的并发性，我绝对建议您在隔离级别设置为 Serializable 的单个事务中运行所有关联的查询（即，SELECT 后跟适当的 INSERT/UPDATE/DELETE） . 这样，SQL Server 将确保事务在彼此完全隔离的情况下发生。

但是，在这种情况下，鉴于其高度并发性，最好的解决方案可能是在您的代码中实现某种锁定/同步，而不是仅仅依靠 SQL Server 为您完成。（虽然，我仍然建议使用 Serializable 隔离级别。）

例如，使用某种锁管理器为每个居住者和房屋生成一个锁定对象，这样您将始终为同一个居住者（或房屋）获得相同的对象，并让每个线程使用该对象进入关键部分（或类似的 C# 的[`Monitor.Enter`](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)） - 请注意避免死锁。这样，您可以保证在任何给定时间只有一个线程正在检查任何特定的房屋或任何特定的居住者，但仍然允许其他线程运行。

# git - git reset --hard 2ef82 不应该像以前一样获取我所有的文件吗？

> ID：13754555
> 
> 赞同：1
> 
> 时间：2012-12-06T23:32:53.660
> 
> 标签：git

不应该将已提交、暂存和工作区域中的所有文件都倒回到该提交吗？它不适合我。

我的意图是提交，玩弄我的 Rails 项目，然后回到那个提交，但它没有工作......

我的 git 日志：

```
Brians-MacBook-Air:social brianspinos777$ git log
commit f3671f19229482af889f561a44f9cf8708c6285b
Author: brian spinos <brianspinos777@hotmail.com>
Date:   Thu Dec 6 18:07:11 2012 -0500

    before dummie scaffold brian

commit 48c9df97919c7a67507197fea7d615c22d748f8d
Author: brian spinos <brianspinos777@hotmail.com>
Date:   Thu Dec 6 17:27:18 2012 -0500

    added a home page

commit bccb86c500b3519aeded25e42cf0359a17fa30e2
Author: brian spinos <brianspinos777@hotmail.com>
Date:   Thu Dec 6 17:08:37 2012 -0500

    commented the attr stuff in the model

commit e6c446fbf0e921691ea117b2054456aed2c9ea29
Author: brian spinos <brianspinos777@hotmail.com>
Date:   Thu Dec 6 15:57:13 2012 -0500

    migration success

commit de530a52e5191e288d185033d9df989112e4a2c4
Author: brian spinos <brianspinos777@hotmail.com>
Date:   Thu Dec 6 15:43:08 2012 -0500

    before rake db migrate
Brians-MacBook-Air:social brianspinos777$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:37:04.803

不，你想检查那个哈希

```
git checkout 2ef82 
```

# jaxb - jaxb with Jersey 在 OSGI java.lang.NullPointerException

> ID：13754557
> 
> 赞同：2
> 
> 时间：2012-12-06T23:33:04.683
> 
> 标签：jaxb, jersey, osgi, jax-rs, aem

我将 Jersey 和 JaxB 作为 cq5 osgi 包运行。Jersey 可以找到，但是当 Jaxb 尝试将 java 对象转换为 xml 时会出现问题。这是我的代码

泽西等级（可达）

```
@GET
    @Produces(MediaType.APPLICATION_XML)
    public EmailNotification getNotificationInXML() throws JAXBException {

        EmailNotification emailNotification = new EmailNotification();
        emailNotification.setBody("Hello Im the body, what is yours");
        emailNotification.setAuthor_name("my name");
        emailNotification.setEmail_notification(true);
        emailNotification.setParent_identifier("XXYZ");

        return emailNotification; 
```

* * *

电子邮件通知类

```
@XmlRootElement(name = "emailNotification")
public class EmailNotification { 
```

* * *

代码在“ `return emailNotification;`”上出现错误

* * *

```
/emailNotification HTTP/1.1] servletengine Servlet threw exception:  java.lang.NullPointerException
    at javax.xml.bind.ContextFinder.handleClassCastException(ContextFinder.java:95)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:231)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:215)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:414)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:618)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:565)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getStoredJAXBContext(AbstractJAXBProvider.java:194)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getJAXBContext(AbstractJAXBProvider.java:187)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getMarshaller(AbstractJAXBProvider.java:165)
    at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getMarshaller(AbstractJAXBProvider.java:144)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:151)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1448)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.apache.felix.http.base.internal.handler.ServletHandler.doHandle(ServletHandler.java:96)
    at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:79)
    at org.apache.felix.http.base.internal.dispatch.ServletPipeline.handle(ServletPipeline.java:42)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:49)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:117)
    at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:88)
    at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:76)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:47)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at com.adobe.granite.license.impl.LicenseCheckFilter.doFilter(LicenseCheckFilter.java:179)
    at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:88)
    at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:76)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:47)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.sling.security.impl.ReferrerFilter.doFilter(ReferrerFilter.java:238)
    at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:88)
    at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:76)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:47)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.wink.osgi.JaxRsFilter.doFilter(JaxRsFilter.java:80)
    at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:88)
    at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:76)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:47)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:75)
    at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:88)
    at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:76)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:47)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.felix.http.base.internal.dispatch.FilterPipeline.dispatch(FilterPipeline.java:48)
    at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:39)
    at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at com.day.j2ee.servletengine.ServletRuntimeEnvironment.service(ServletRuntimeEnvironment.java:250)
    at com.day.j2ee.servletengine.RequestDispatcherImpl.doFilter(RequestDispatcherImpl.java:321)
    at com.day.j2ee.servletengine.RequestDispatcherImpl.service(RequestDispatcherImpl.java:340)
    at com.day.j2ee.servletengine.RequestDispatcherImpl.service(RequestDispatcherImpl.java:383)
    at com.day.j2ee.servletengine.ServletHandlerImpl.process(ServletHandlerImpl.java:351)
    at com.day.j2ee.servletengine.HttpListener$Worker.run(HttpListener.java:625)
*** 
```

# java - java的finagle节俭生成器

> ID：13754559
> 
> 赞同：2
> 
> 时间：2012-12-06T23:33:10.633
> 
> 标签：java, generator, thrift, finagle

我见过两种工具来生成与 finagle 兼容的节俭。

1.  [thrift-0.5.0-finagle](https://github.com/mariusaeriksen/thrift-0.5.0-finagle)是不是太旧了？最新的是 thrift 0.9。我还能用吗？

2.  或者我应该使用[Scrooge](https://github.com/twitter/scrooge)吗？它在 Scala 上生成 Java 绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:22:50.657

如果你的项目是 Scala 或 Java，你应该使用 Scrooge。thrift-0.5.0-finagle 已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T08:50:41.410

你应该使用斯克罗吉。Scrooge 由 Twitter 开发。而 Finagle 也是由 Twitter 开发的。

提示：

scrooge maven 插件应该配置如下

```
<plugin>
    <groupId>com.twitter</groupId>
    <artifactId>scrooge-maven-plugin</artifactId>
    <version>${scrooge.version}</version>
    <configuration>
        <thriftSourceRoot>${basedir}/src/main/thrift</thriftSourceRoot>
        <includes>
            <set>SyncWrite.thrift</set>
        </includes>
        <outputDirectory>${basedir}/src/main/gen/</outputDirectory>
        <thriftNamespaceMappings>
            <thriftNamespaceMapping>
                <from>com.ganji.cdc.xapian.thrift.cpp</from>
                <to>com.ganji.cdc.xapian.thrift.cpp</to>
            </thriftNamespaceMapping>
        </thriftNamespaceMappings>
        <language>experimental-java</language>
        <thriftOpts>
            <thriftOpt>--finagle</thriftOpt>
        </thriftOpts>
        <buildExtractedThrift>false</buildExtractedThrift>
    </configuration>
    <executions>
        <execution>
            <id>thrift-sources</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>compile</goal>
            </goals>
        </execution>
        <execution>
            <id>thrift-test-sources</id>
            <phase>generate-test-sources</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

> 语言是`experimental-java`。如果你配置为 Scrooge 文件，使用`java`，`libthrift`库必须使用`0.5.0`.

有如下依赖库

```
<finagle.version>6.25.0</finagle.version>
<scrooge.version>3.18.1</scrooge.version>

<!-- Finagle Start -->
<dependency>
    <groupId>org.apache.thrift</groupId>
    <artifactId>libthrift</artifactId>
    <version>0.9.0</version>
</dependency>
<dependency>
    <groupId>com.twitter</groupId>
    <artifactId>scrooge-core_2.10</artifactId>
    <version>${scrooge.version}</version>
</dependency>
<dependency>
    <groupId>com.twitter</groupId>
    <artifactId>scrooge-runtime_2.10</artifactId>
    <version>${scrooge.version}</version>
</dependency>
<dependency>
    <groupId>com.twitter</groupId>
    <artifactId>util-core_2.10</artifactId>
    <version>6.24.0</version>
</dependency>
<dependency>
    <groupId>com.twitter</groupId>
    <artifactId>finagle-core_2.10</artifactId>
    <version>${finagle.version}</version>
</dependency>
<dependency>
    <groupId>com.twitter</groupId>
    <artifactId>finagle-thrift_2.10</artifactId>
    <version>${finagle.version}</version>
</dependency>
<!-- Finagle End --> 
```

就这些。

# scala - 由于“位置的无效内存访问”导致的 JVM 分段错误

> ID：13754562
> 
> 赞同：3
> 
> 时间：2012-12-06T23:33:13.877
> 
> 标签：scala, jvm, segmentation-fault, sbt, scalatest

我有一个用 Scala 2.9.2 编写的小项目，其中包含使用 ScalaTest 编写的单元测试。我使用 SBT 编译和运行我的测试。

在我的项目上运行`sbt test`会定期导致 JVM 段错误，但只需从 SBT 编译和运行我的项目就可以正常工作。这是确切的错误消息：

```
Invalid memory access of location 0x8 rip=0x10959f3c9
[1]    11925 segmentation fault  sbt 
```

我无法在任何地方找到核心转储，但如果可以获得它，我很乐意提供它。

运行`java -version`结果如下：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

但是我也安装了 Java 7（尽管我从来没有能够用它实际运行 Java 程序，afaik）。

另一个可能相关的问题：我的一些测试用例包含带有括号的标题，例如`(`和`)`。因此，SBT 或 ScalaTest（不确定）将在输出中间插入方括号。例如，一个名为的测试用例`(..)..(..)`可能突然看起来像`(..[)..](..)`.

非常感谢解决这些问题的任何帮助:-)

**编辑：**我安装了 Java 7 JDK，所以现在`java -version`显示正确的东西：

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

这也意味着我现在得到了更详细的段错误和核心转储：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x000000010a71a3e3, pid=16830, tid=19459
#
# JRE version: 7.0_07-b10
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode bsd-amd64 compressed oops)
# Problematic frame:
# V  [libjvm.dylib+0x3cd3e3] 
```

和[转储](https://gist.github.com/4240715)。

**编辑**：将 scalaVersion 更改为 2.9.1 一次出现以下错误，然后出现与上述相同的错误：

```
Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled
[thread 25091 also had an error] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:28:17.857

JVM segfaulting 通常表示系统内存不好，尤其是在没有被推到极限时。

整夜运行 memtestx86。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:07:49.440

我有一个非常相似的错误。许多争论和刺激发现它发生在一个使用 Array.ofDim 分配许多数组的循环周围。用 Array.fill 替换它似乎已经为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:02:35.973

我在为学习 scala [1](https://github.com/noelhollingsworth/project)构建的玩具项目中遇到了类似的问题。我发现似乎可以阻止 seg 错误的一个解决方案是将 build.sbt 中的 scala 版本更改为 2.9.1 版本。我不知道为什么这有帮助。

# asp.net - SQL 网络接口，错误：26 - 错误定位指定的服务器/实例

> ID：13754563
> 
> 赞同：46
> 
> 时间：2012-12-06T23:33:42.127
> 
> 标签：asp.net, sql-server-2008, asp.net-membership, membership-provider, roleprovider

好吧，我有一个大问题要解决好几天，但我做不到，所以我需要你的帮助。我在 asp.net 4.0 中有一个 Web 应用程序，我在其中实现了自定义成员资格和角色提供程序。当我打开应用程序主页时，它会连接到数据库并检索一些信息。还有一个登录表单，当我登录时，它通过数据库验证用户并将我重定向到保留页面，但出现此错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

**描述：**

> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详情：**

> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

**源错误：**

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

我尝试了很多东西，我在**stackoverflow**中找到了一些解决方案，但没有任何效果。这是我的连接字符串：

```
<connectionStrings>
  <clear/>
  <remove name="LocalSqlServer"/>
     <add name="LocalSqlServer" connectionString="Data Source=MSSQL2008-1;Initial Catalog=agency;
        Integrated Security=False;User ID=adis_agency;Password=niarda2012;Connect Timeout=180;Encrypt=False;
        Packet Size=4096" providerName="System.Data.SqlClient" />
     <add name="AgencyConn" connectionString="Data Source=MSSQL2008-1;Initial Catalog=agency;
        Integrated Security=False;User ID=adis_agency;Password=niarda2012;Connect Timeout=180;Encrypt=False;
        Packet Size=4096" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

以下也是成员资格和角色管理器 web.config 部分：

```
<membership defaultProvider="AuthProvider">
  <providers>
    <clear/>
      <add name="AuthProvider" type="AuthenticationProvider" applicationName="~/Reserved/" connectionStringName="AgencyConn"/>
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="MyRoleProvider">
  <providers>
    <clear/>
      <add name="MyRoleProvider" type="RoleAccessProvider" connectionStringName="AgencyConn"/>
  </providers>
</roleManager> 
```

请任何人都可以帮助找出问题所在？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-14T18:16:47.057

如果您从 Windows 机器 A 连接到 Windows 机器 B（安装了 SQL Server 的服务器），并且收到此错误，则需要执行以下操作：

在机器 B 上：

1.）打开名为“SQL Server Browser”的Windows服务并启动该服务

2.) 在 Windows 防火墙中，启用传入端口 UDP 1434（以防机器 A 上的 SQL Server Management Studio 正在连接或机器 A 上的程序正在连接）

3.) 在 Windows 防火墙中，启用传入端口 TCP 1433（以防有 telnet 连接）

4.) 在 SQL Server 配置管理器中，为端口 1433 启用 TCP/IP 协议

![在此处输入图像描述](../Images/d199489db2ab3a728bcc9c579bdabf0c.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-02T08:17:30.237

对我来说，问题是 DNS 记录是错误的......

以下内容非常有帮助，主要取自[这篇博](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)文。

此错误消息实际上非常具体，解决方案非常简单。

仅当您尝试连接到 SQL Server 命名实例时才会收到此错误消息。对于默认实例，您永远不会看到这一点，因为即使我们在此阶段失败（即错误定位服务器/指定的实例），我们仍将继续尝试使用默认值进行连接，例如默认 TCP 端口 1433、命名管道的默认管道名称。

每次客户端连接 SQL Server 命名实例时，我们都会向服务器机器的 UDP 端口 1434 发送一个 SSRP UDP 数据包。我们需要这一步来了解 SQL 实例的配置信息，例如启用的协议、TCP 端口、管道名称等。如果没有此信息，客户端将不知道如何连接，并且会失败并显示此错误消息。

总之，我们收到此错误消息的原因是客户端堆栈无法接收来自 SQL Browser 的 SSRP 响应 UDP 数据包。为了隔离确切的问题，请按照下列步骤操作：

1.  确保您的服务器名称正确，例如，名称没有拼写错误。

2.  确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。（请注意，某些应用程序会将 \ 转换为 ）。

3.  确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。

4.  确保 SQL Browser 服务正在服务器上运行。

5.  如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

在检查了步骤 1 到 4 之后，有一种极端情况可能仍然失败。它也可能发生在以下情况：

1.  您的服务器是集群或多宿主机器上的命名实例
2.  你的客户端是一台开启了防火墙的 Vista 机器。

一个可以证明有用的工具（它对我有用）是[PortQry](http://support.microsoft.com/kb/832919)。如果此命令返回信息并且它包含您的目标实例，那么您可以排除上述 4) 和 5) 的可能性，这意味着您确实运行了 SQL Browser 并且您的防火墙不会阻止 SQL Browser UDP 数据包。在这种情况下，您可以检查其他可能的问题，例如不正确的连接字符串。

最后一点，当您使用 SNAC 时，同一问题的错误消息是：[SQL Native Client]SQL 网络接口：错误定位服务器/实例指定 [xFFFFFFFF]。

微软最近发布了一个指导演练，可以作为一站式服务来解决 SQL Server 的大多数连接问题：[解决 SQL Server 的连接错误](https://support.microsoft.com/en-us/help/4009936/solving-connectivity-errors-to-sql-server)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-08-11T17:13:03.630

转到 window+R 并键入 services.msc 并按 Enter。

如果没有自动启动，则手动启动 SQL Server。

然后你尝试登录，它必须是有效的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-10T23:40:54.887

在我的 ASP.NET MVC 4 应用程序中，我遇到了同样的问题。

我解决它的方法是在`DatabaseContext`. 通过传递我想通过基本构造函数使用的连接字符串的名称。

```
public class DatabaseContext : DbContext
{ 
    public DatabaseContext()
        : base("DefaultConnection") // <-- this is what i added.
    {
    }

    public DbSet<SomeModel> SomeModels { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-06T23:38:03.467

答案在错误消息本身中：

```
Error Locating Server/Instance Specified 
```

基本上，您在连接字符串中使用了错误的服务器\实例，即这一点：

```
Data Source=MSSQL2008-1 
```

错误且未指向服务器，或者服务器名称未解析为 IP 地址。另外两个可能性：(1) 运行 SQL Server 的机器上的 SQL Browser 服务没有运行，或者 (2) SQL 机器上的 Windows 防火墙（或其他防火墙）拒绝传入连接。

最终，如果服务器名正确，那么它就会变成网络问题，您需要找出客户端无法连接到服务器的原因（这更有可能是基本网络问题而不是 SQL Server 配置问题） .

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-09-03T10:01:44.800

如果您使用的是 SQL Server 开发人员版，请将连接字符串中的“.\SQLEXPRESS”更改为您的计算机名称。

前：

> 数据源=.\SQLEXPRESS；初始目录=SchoolDB-EF6CodeFirst；集成安全=True；MultipleActiveResultSets=True

后：

> 数据源=DESKTOP-DKV41G2；初始目录=SchoolDB-EF6CodeFirst；集成安全=True；MultipleActiveResultSets=True

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-22T23:53:50.593

更改您的 .\SQLEXPRESS，并仅添加您的 SQL express 名称，它适用于我

```
 <add name="BlogDbContext" connectionString="data source=your name here; initial catalog=CodeFirstDemo; integrated security=True" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-24T23:32:52.877

在我的例子中，web.config 文件中的 connectionString 名称拼写错误。这是 Entity Framework 使用的数据库上下文的名称。我想这是当 EF 无法将 connectionString 名称与上下文匹配时出现的错误。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-15T06:24:50.180

我遇到了同样的错误，我启动了 SQL Server Express 服务并且它工作正常。希望这可以帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-10T15:21:27.710

我遇到了这个问题，并修复了它。问题似乎是这样的：

错误的：

```
<add key="aaa" value="server=[abc\SQL2K8];database=bbb;uid=ccc;password=ddd;" /> 
```

正确的

```
<add key="aaa" value="server=abc\SQL2K8;database=bbb;uid=ccc;password=ddd;" /> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-04T10:34:42.233

我们最近遇到了同样的问题。我们发现代码是在 machine.confg 文件中查找名为“LocalSqlServer”的连接字符串。我们添加了这条线，它工作正常。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-22T07:28:28.067

该问题是由 DNS 无法解析主机名引起的。尝试使用 IP 地址而不是“计算机名称”。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-06-04T19:35:02.570

就我而言，我搜索了服务。然后找到一个名为“SQL Server（SQLEXPRESS）的服务。然后右键单击它。选择属性。然后单击开始。就是这样。解决了这个问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-08-03T05:15:24.357

这不是一个大问题，只需更改您的**服务器名称** 即可查看服务器名称更改的位置：

[![在此处输入图像描述](../Images/407211ae0e950d5550d2fa46bf69ea2c.png)](https://i.stack.imgur.com/o5YCO.png)

如何查找服务器名称

1.  开跑
2.  写'cmd'
3.  在控制台窗口“主机名”中写入。

您的服务器名称将显示给您

谢谢你。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-24T10:24:05.217

结果发现机器上安装了 2 个版本的 SQL Server。
删除旧的解决了我这边的问题。

更多细节：
在启动期间，两个服务的服务都在尝试运行。
第一个加载的那个工作正常，阻止了第二个启动。
PS 停止第一台服务器的服务并手动启动第二台服务器并不能正常工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-07T06:33:08.420

同样的问题。就我而言，我解决了将项目设置为“启动项目”的问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-20T07:22:27.627

打开 SQL Server 配置管理器并在 SQL Server 服务下启用 SQL Server 状态，如果它通过右键单击停止并单击开始。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-29T14:11:39.583

有同样的问题然后我使用连接字符串没有`./`（比如`DESKTOP-E53DUML`而不是这个`./DESKTOP-E53DUML`）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-05T05:40:41.603

这个问题花了我大约一天的时间，在我的一个 ASP.NET MVC 项目上，幸运的是我在我的机器上而不是在生产环境中遇到了问题，所以比较 web.config 我看到并删除了错误消失了......一个真正的挑战连接 SQL Server 错误 26 到这个问题

# xaml - 在 Blend for Visual Studio 2012 中“创建数据绑定”时崩溃

> ID：13754565
> 
> 赞同：2
> 
> 时间：2012-12-06T23:33:54.347
> 
> 标签：xaml, data-binding, windows-8, windows-runtime, blend-2012

当我单击“创建数据绑定”时，Visual Studio 2012 的 Blend 总是冻结。我在 MacBook Pro 上使用 Windows 8 Professional 64 位。有没有人遇到与我相同的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T07:36:00.293

使用可视化设计器，Blend 或内置的 Visual Studio 有时会出现问题。在这里，我建议直接在设计器中创建绑定。它简单、快速，您可以完全控制它。

[数据绑定概述（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/library/windows/apps/hh758320.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T23:37:17.323

刚刚找到了解决办法。表达式混合冻结，因为“创建数据绑定”对话框显示在可见区域之外并阻止用户交互。这是解决方案： [http ://social.msdn.microsoft.com/Forums/en-US/blend/thread/6f251999-9549-41dc-86b1-25388b977b49/?prof=required](http://social.msdn.microsoft.com/Forums/en-US/blend/thread/6f251999-9549-41dc-86b1-25388b977b49/?prof=required)

# ruby-on-rails - Rspec 不会记住对 factorygirl 对象所做的间接更改

> ID：13754567
> 
> 赞同：0
> 
> 时间：2012-12-06T23:34:02.980
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个工厂女孩工厂，看起来像：

```
FactoryDefine do
  factory :capture do
    attribute1 nil
    factory :capture_with_images do
      after(:create) do
        FactoryGirl.create(:image, capture: image)
      end
    end
 end 
```

创建图像对象时，它会通过回调更新其父对象中的属性 1。这工作正常。

我的 rspec 看起来像这样

```
describe Capture do
  shared_examples "with images" do
    it "has attribute assigned" do
      expect(subject.attribute1).to be_present
    end
  end
  describe do
    subject { FactoryGirl.create(:capture_with_images) }
    include_examples "with images"
  end
end 
```

问题？在`expect(subject.attribute1).to be_present`主题处将属性 1 设置为 nil。使用调试器，我可以看到存储在测试数据库中的 Capture 设置了属性 1，但没有设置主题，因此我知道我的 Image 中的回调正在工作并将属性传播给父级。

似乎 rspec 在 after(:create) 回调之前记住了对象属性，并且无法更新。这是一个错误还是我以意想不到的方式使用它（或者只是做错了）？

谢谢收听

# django - 如何设置路径和目录以便 Zurb Foundation 与 Django 一起使用？

> ID：13754570
> 
> 赞同：1
> 
> 时间：2012-12-06T23:34:13.240
> 
> 标签：django, windows-7, sass, zurb-foundation

我按照这套很好的[说明在我的 Windows 7 系统上设置 Ruby、Compass 和 Sass](http://www.bigjason.com/blog/using-sass-django)，除了我还安装了 Foundation 3 并且没有使用 rvm。Compass 和 Sass 正在开发我设置的“zurbtest”Django 项目（在解决了一些 Compass 怪癖之后）。

但是，Sass 无法编译 app.scss。我收到消息：

```
Syntax error: File to import not found or unreadable: foundation/common/ratios.
              Load paths:
                c:/Users/me/PycharmProjects/zurbtest
                c:/Users/me/PycharmProjects/zurbtest/static
        on line 1 of static/zurbstyle/sass/_settings.scss
        from line 2 of static/zurbstyle/sass/app.scss 
```

看起来我需要指出 _ratios.scss 和其他 zurb 基础文件所在的路径。我可以看到它们在我的 Windows 系统上，位于：

c:/Ruby193/lib/ruby/gems/1.9.1/gems/zurb-foundation-3.2.3/scss/foundation/common

但是我需要在哪里指定该路径才能使其工作？

我看到这个问题之前已经在 Rails 的上下文中讨论过。我没有安装 Rails。这是一个 Django 项目。

那么我在哪里以及如何设置所需的路径以使其与 Django 项目一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:00:34.170

原来答案很简单：

不要使用以下命令：

```
sass --watch app.scss:app.css 
```

我花了几个小时试图让它工作，然后意识到所需要的只是：

```
compass watch 
```

我在 Windows 7 Ruby 命令 shell 中运行了“compass watch”，而在我的 Django 项目“zurbtest”特定的基础目录中，它是：

c:/Users/me/PycharmProjects/zurbtest/static/zurbstyle

“zurbstyle”是我使用 compass create 命令设置的 zurb 基础项目的名称。

请注意，默认情况下，生成的输出文件 app.css 会被放入：

c:/Users/me/PycharmProjects/zurbtest/static/zurbstyle/stylesheets

# ruby-on-rails - SSL 身份验证 Rails 应用程序

> ID：13754575
> 
> 赞同：1
> 
> 时间：2012-12-06T23:34:41.473
> 
> 标签：ruby-on-rails, ssl

我们正在尝试设置我们的 rails 应用程序以使用 SSL。我们让它在 Apache 服务器上的乘客上运行。我在环境/production.rb 中设置了 config.force_ssl = true。我现在收到以下错误：

```
An error occurred during a connection to blah.8081

SSL received a record that exceeded the maximum permissible length.

(Error code: ssl_error_rx_record_too_long) 
```

我被告知我们的服务器设置了证书。是否还需要其他步骤，例如服务器配置文件中的一些配置？我是在某个地方“注册”这个应用程序还是什么？我只是在学习ssl。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:11:32.820

我们需要在 httpd.conf（apache 配置）文件中设置正确的端口。我相信 SSL 默认为 443 或其他东西。这是我们工作的 .conf 文件的片段：

```
<VirtualHost *:8081>
  ServerName dev.mysite.com:8081
    SSLEngine on
    SSLVerifyClient none
    SSLCertificateFile /usr/local/psa/var/certificates/some_file
    SSLCACertificateFile /usr/local/psa/var/certificates/some_file_2
        DocumentRoot /var/www/vhosts/dev.mysite.com/webapps/
        RackBaseURI /testapp/current
        <Directory /var/www/vhosts/dev.mysite.com/webapps/testapp/current>
                AllowOverride all
                Allow from all
                Options -MultiViews
        </Directory>
</VirtualHost> 
```

# git - git clone over ssh 错误'致命：远程端意外挂断'

> ID：13754578
> 
> 赞同：3
> 
> 时间：2012-12-06T23:35:33.907
> 
> 标签：git, ssh

我对使用 git 还是很陌生，过去 2 天一直在努力让它工作，现在我觉得自己太愚蠢了，我还没有让它工作。

我看到很多帖子都在谈论类似的错误，但没有一个答案能解决我的问题。

我的情况是

1.  调用的项目 git`itko-ext.git`存储在服务器中，我可以通过 ssh 访问

2.  所以我在本地存储上创建了一个存储目录并使用`git init`

3.  要将其复制`itko-ext.git`到我的存储库中，我使用了`git clone ssh://username@host/home/shared/g_quoll/repos/itko-ext.git`

    *   这给了我一个错误`fatal: The remote end hung up unexpectedly`。
    *   我有权访问该资源。

我将不胜感激任何解决方案。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:47:45.627

尝试：

```
git clone username@host:/home/shared/g_quoll/repos/itko-ext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:25:59.700

您能否验证 A）您确实可以 ssh 进入服务器，并且 B）存储库正好位于指定的路径中？

您可以执行 ssh username@host ls /home/shared/g_quoll/repos/ 并查看那里是否有 itko-ext.git 目录。

# seo - SEO——有用的 URL 分隔符？

> ID：13754583
> 
> 赞同：0
> 
> 时间：2012-12-06T23:36:16.530
> 
> 标签：seo

我想弄清楚是否

1）在我的域中使用句点比不使用任何类型的分隔符要好。

2）在一个 URL 中使用太多的关键字是一件坏事（用户永远不必记住这个 url）

IE

如果我想主要为棒球琐事应用程序增强我的 SEO，但也想显示在本垒打和投手的结果中：

a) 棒球琐事.homerun.pitcher 或 b)ballball.trivia.home.run.pitcher 更好吗？

另外，如果我想增强我的 SEO：

a) 棒球琐事或棒球琐事.homerun.pitcher 会更好吗（最后多余的词会伤害我的 SEO 机会）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:47:44.327

期间（可能）不是最好的方式，我会推荐破折号（-）。句点用于表示文件扩展名，过去，Google 将其用作 SEO 指标（.html 排名更高）。虽然情况不再如此，但仍可能存在负惩罚（.pitcher，不是常见的文件类型）。谷歌很可能不再将其用作指标，但其他 SE 可能会，因此值得牢记。

您在 URL 中包含的关键字越多，每个关键字的权重就越小。出于这个原因，通常最好关注更精致的关键字。另请注意，Google 检查是否过度使用 SEO，实际上会惩罚使用不自然数量关键字的网站。我会建议：

```
http://example.org/baseball-trivia/home-run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T13:09:03.097

Google syas，“考虑在您的网址中使用标点符号。网址[http://www.example.com/green-dress.html](http://www.example.com/green-dress.html)对我们来说比[http://www.example.com/greendress.html](http://www.example.com/greendress.html)更有用。我们建议您在 URL 中使用连字符 (-) 而不是下划线 (_)。”

在[此网站管理员帮助页面中](https://support.google.com/webmasters/answer/76329)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:07:04.830

避免在 URL 中使用句号。阅读[Google 的 URL 结构指南](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329)指出，您应该在 URL 中使用连字符来分隔关键字。使用过多的关键字也会影响您页面的可信度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T04:09:04.803

破折号是用作分隔符的最佳方式，因为 Google 优先考虑这些类型的 URL。根据我的说法，句号不是最好的选择方式，因为它们表示文件扩展名。而在谷歌眼里，在网址中过度使用关键词会是一个不好的印象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-09T21:05:22.863

不要使用任何可能被误认为扩展指示符 (.) 的可疑分隔符。通常，连字符 (-) 被广泛用作分隔符。虽然没有现成的公式，但最好专注于单个 URL 中较少数量的关键字。而且，您必须决定相关性。

我的建议：

```
 http://example.com/baseball-trivia-home-run-pitcher 
```

来自谷歌的例子：

```
 https://productforums.google.com/forum/#!categories/analytics/discuss-tracking-and-implementation-issues 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T04:15:45.407

始终使用关键字的根。意思是尝试在url中使用单个单词并做站点导航结构。它有助于提高排名。

# android - 如何将使用 Google API 4.2 的现有 Android 项目转换为 Maven

> ID：13754585
> 
> 赞同：0
> 
> 时间：2012-12-06T23:36:20.723
> 
> 标签：android, eclipse, maven, intellij-idea

我正在尝试将 Maven 用于新项目，但这完全让我感到困惑。

在所有示例中，它们仅使用 Android 默认 API，但我需要 Google API，因为我的应用程序使用 Google Maps。如何使用 Google API？

这是在 Eclipse 上制作的现有 Android 项目（现在我正在尝试使用 IntelliJ IDEA），我想开始使用 Maven，那么如何将现有项目转换为 Maven？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:46:51.357

要将 Eclipse 项目转换为 Maven 项目，请在 Eclipse 中选择 Java 项目并弹出上下文菜单，然后选择“配置”>“转换为 Maven 项目”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:54:01.207

1.  maven-android-plugin 又名 android-maven-plugin 讨论了如何对你的 android 项目进行 maven 化。[http://code.google.com/p/maven-android-plugin/wiki/GettingStarted](http://code.google.com/p/maven-android-plugin/wiki/GettingStarted)
2.  您需要使用 maven-android-sdk-deployer 的附加组件，例如地图、usb、gcm。文档说明了在 pom.xml [https://github.com/mosabua/maven-android-sdk-deployer中使用的确切 xml](https://github.com/mosabua/maven-android-sdk-deployer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:44:35.870

对于有关 Google Api 的问题，只需将以下代码放在 AndroidManifest 文件的应用程序标记中

```
<uses-library android:name="com.google.android.maps" /> 
```

对于第二个问题，我建议您按照本教程 [http://steveliles.github.com/converting_eclipse_adt_android_projects_to_build_with_maven.html](http://steveliles.github.com/converting_eclipse_adt_android_projects_to_build_with_maven.html)首先在 eclipse 中进行转换， 然后您可以将 maven 项目导入 IntelliJ IDEA

# .net - 超网格过滤行选择

> ID：13754589
> 
> 赞同：1
> 
> 时间：2012-12-06T23:36:26.360
> 
> 标签：.net, infragistics

我正在使用 Infragistics Ultragrid 2008，我有一个按钮用于选中和取消选中网格中的选定列。

即使当我单击按钮时也激活了行过滤器，它也会检查隐藏行选择的列。

我只想为可见的行将选定列设置为 true。请帮我提供 vb.net 2008 的代码

这是我现在使用的代码

```
 Me.lbltotal.Text = "0.00"

    Dim i As Integer = 0

    Dim nDx As Boolean = False
    If Me.btnSelectAll.Text = "Select All" Then
        nDx = True
    Else
        nDx = False
    End If

    While i < Me.UninvoicedMemosDataGrid.Rows.Count

        Me.UninvoicedMemosDataGrid.Rows(i).Cells(9).Value = nDx
        Me.UninvoicedMemosDataGrid.PerformAction(Infragistics.Win.UltraWinGrid.UltraGridAction.ExitEditMode)
        Me.UninvoicedMemosDataGrid.Update()
        i += 1
    End While

    If Me.btnSelectAll.Text = "Select All" Then
        Me.btnSelectAll.Text = "Deselect All"
    Else
        Me.btnSelectAll.Text = "Select All"
    End If

    Dim r As Integer
    Dim sum As Single = 0.0
    For r = 0 To UninvoicedMemosDataGrid.Rows.Count - 1
       If UninvoicedMemosDataGrid.Rows(r).Cells(9).Value() = True Then sum += UninvoicedMemosDataGrid.Rows(r).Cells(8).Value()

        Me.lbltotal.Text = sum
    Next
    Dim n As Integer
    n = Me.lbltotal.Text
    lbltotal.Text = n.ToString("###,##0.00") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:53:11.167

如果您的意图是仅将计算应用于当前列过滤器未隐藏的行，那么您应该以这种方式更改循环

```
For each row in Me.UninvoicedMemosDataGrid.Rows.GetFilteredInNonGroupByRows()
    row.Cells(9).Value = nDx
Next
' Only one cell could be in edit mode, so this should go outside the loop '
row.PerformAction(Infragistics.Win.UltraWinGrid.UltraGridAction.ExitEditMode)
' same for data updating....'
Me.UninvoicedMemosDataGrid.Update() 
```

还有这个（根据您上面的代码，每一行都应该始终为真或假）

```
For each row in UninvoicedMemosDataGrid.Rows.GetFilteredInNonGroupByRows()
   If row.Cells(9).Value() = True Then 
       sum += row.Cells(8).Value
   End if
Next
Me.lbltotal.Text = sum 
```

但是，我不太确定您的意图。所以让我知道这是你要找的还是我误解了你的意图。

# mysql - Rails MySQL 查询：插值和？

> ID：13754592
> 
> 赞同：0
> 
> 时间：2012-12-06T23:36:37.373
> 
> 标签：mysql, ruby-on-rails, activerecord

我以为我在某处看到使用`?`转义查询来帮助防止 sql 注入攻击，但我找不到任何明确的答案。

以下 2 个查询（使用先前定义的变量）有什么区别`name`：

`People.where("name = ?", name)`

和

`People.where('name = "#{name}"')`

导轨 3.2.1

红宝石 1.9.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:19:42.180

[我在Active Record Query Interface Guide](http://guides.rubyonrails.org/active_record_querying.html#using-a-string-sql-fragment)上阅读了同样的内容。第 2.2 节说明了后一种方法（传递哈希）：

> > 将变量直接放入条件字符串将按原样将变量传递给数据库。这意味着它将是直接来自可能有恶意的用户的未转义变量。

这是[build_where API 的链接，在](http://apidock.com/rails/ActiveRecord/QueryMethods/build_where)[Where](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where)方法中调用。当哈希被传递到方法中时，它会直接传递到数据库。当您使用前一种语法（“name = ?”，opts）时，查询会在传递选项之前进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:02:34.680

```
 People.where("name = ?", name)

 This is secured. 

 People.where('name = "#{name}"')

 This is called sql injection and it's not secured. 
```

# mysql - MySQL UNION 查询，不同的 ID

> ID：13754595
> 
> 赞同：1
> 
> 时间：2012-12-06T23:36:40.870
> 
> 标签：mysql, distinct, union

我有两个包含（ID，值）的表。ID 可以在一个或两个表中找到。我需要一个包含所有唯一 ID 及其值的记录集；如果 ID 出现在两个表中，我需要表 2 中的值。

目前我有这个查询：

```
SELECT * FROM
(SELECT * FROM table2 UNION SELECT * FROM table1) as temp
GROUP BY id 
```

这似乎有效。然而 -

1.  如果 ID 在两个表中，这是否*保证*从 table2 返回值？

2.  如果没有，我该怎么做？

3.  无论如何，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:48:02.553

试试这个，

```
SELECT  a.*
FROM    
        (
            SELECT *, 1 AS TB FROM table1  -- assuming you have many columns
            UNION ALL
            SELECT *, 2 AS TB FROM table2
        ) a INNER JOIN
        (
            SELECT ID, MAX(TB) maxTB
            FROM 
            (
                SELECT ID, 1 AS TB FROM table1
                UNION ALL
                SELECT ID, 2 AS TB FROM table2
            ) s
            GROUP BY ID
        ) b ON  a.ID = b.ID AND 
                a.tb = b.maxTB 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/9b879/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:15:16.817

投入我的两分钱

```
SELECT ISNULL(TB2.Id, TB1.Id) As Id,
       ChooseValue(TB2.Id, TB2.Value, TB1.Values) As Value
FROM TABLE2 AS TB2
FULL OUTER JOIN TABLE1 AS TB1
ON TB2.Id = TB1.Id 
```

这避免了额外连接或额外运行表或 group by 子句的成本，这些成本可能很昂贵。

```
CREATE FUNCTION ChooseValue(DeciderValue IN VAR_TYPE, Table_2Value IN VARTYPE, Table_1Value  IN VARTYPE)
RETURNS VARTYPE
BEGIN
    DECLARE returnValue VARTYPE;
    IF DeciderValue IS NULL THEN
        returnValue = Table_2Value
    ELSE
        returnValue = Table_1Value
    END IF
RETURN returnValue
END 
```

# mysql - 显示之间的所有日期，即使没有结果

> ID：13754598
> 
> 赞同：14
> 
> 时间：2012-12-06T23:36:57.187
> 
> 标签：mysql, count, group-by

```
SELECT User_JoinDate, 
COUNT(User_ID) 
FROM Users WHERE `User_JoinDate` 
BETWEEN '2012-11-22' AND '2012-12-06' 
GROUP BY User_JoinDate 
ORDER BY User_JoinDate ASC" 
```

我正在生成要在折线图中显示的数据。不幸的是，我不知道如何让上述查询显示 0 表示没有用户可能已注册的日期。所以目前我的输出可能是这样的：

```
2012-11-22 - 2
2012-11-25 - 4

```

但我想要的是

```
2012-11-22 - 2
2012-11-23 - 0
2012-11-24 - 0
2012-11-25 - 4

```

我目前确实有一个工作版本，它将 MySQL 结果存储到一个数组中，然后 PHP 循环遍历并填充空白。这看起来很混乱，我希望通过 MySQL 有一个解决方案。我对该站点进行了很好的搜索，但很难理解其中的一些实现。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T23:48:32.370

您可以使用 MySQL 变量为您想要的所有日期构建一个自动结果集。

```
select
      AllDaysYouWant.MyJoinDate,
      count( U.User_ID ) as NumberJoined
   from
      ( select
              @curDate := Date_Add(@curDate, interval 1 day) as MyJoinDate
           from
              ( select @curDate := '2012-11-21' ) sqlvars,
              Users
           limit 18 ) AllDaysYouWant
      LEFT JOIN Users U
         on AllDaysYouWant.MyJoinDate = U.User_JoinDate
   group by
      AllDaysYouWant.MyJoinDate 
```

内部查询，我只是在没有键的情况下加入 users 表，所以它只是用来循环通过 X 条记录来表示你想要的天跨度......这可能是 30、100 等等......只是只要一个表（在这种情况下是用户），就有你期望的尽可能多的记录。

那么，只有天数的结果被加入到用户表中，但这一次，基于用户的 JOIN_DATE。简单的 COUNT() 应该可以得到你想要的。

“AllDaysYouWant”是分配给内部第一部分查询的别名

```
 ( select
          @curDate := Date_Add(@curDate, interval 1 day) as MyJoinDate
       from
          ( select @curDate := '2012-11-21' ) sqlvars,
          Users
       limit 18 ) AllDaysYouWant 
```

这基本上说明......从用户表（但可以是任何），给我 18 行数据（通过限制，但几乎可以是任意数量的记录，但你只需要从 11 月 22 日到 12 月 6 日，这只是14 天，但我做了 18 天，原则上它几乎可以是任何东西。在用户表上方是 (select @curDate := '2012-11-21') sqlvars。查询中的任何选择语句都用括号括起来作为表源必须有一个别名，因为它只是我将使用的一个变量，所以不要关心它的名字是什么。因此，此查询在 11 月 21 日开始变量，并且 Select @curDate := Date_Add... blah blah 声明取@curDate 的当前值，将其添加 1 天（现在变为 11 月 22 日）并将其存储在返回的行“MyJoinDate”中。所以现在，这个内部查询会创建您的日期表，其中包含从 11 月 22 日到 18 天的数据，并具有别名“AllDaysYouWant”供查询的其余部分参考。

我已将您可能遇到的查询调整为 alias.field 一切以进行澄清...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T12:53:05.123

它仅显示 66 条记录，我已超过 120 条限制

```
SELECT AllDaysYouWant.MyJoinDate, count( U.id ) AS NumberJoined FROM (SELECT @curDate := Date_Add( @curDate , INTERVAL 1 DAY ) AS MyJoinDate FROM (SELECT @curDate := '2013-08-03')sqlvars, ipro_user LIMIT 150)AllDaysYouWant LEFT JOIN ipro_user U ON AllDaysYouWant.MyJoinDate = date_format( `date` , '%Y-%m-%d' ) AND U.active=1 GROUP BY AllDaysYouWant.MyJoinDate 
```

查询没有错误，工作正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:50:25.237

您需要做什么
1\. 生成日期范围。
2.然后选择那些不存在于您上面的查询结果中的日期
3.并与上面的查询进行联合。

# php - 如何显示数据库中每列的前两条记录？

> ID：13754605
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:37:47.517
> 
> 标签：php, mysql, html-table

这是我正在使用的 PHP。

```
echo "<td class='leftalign'>";
echo "<tr id='centered' >" . $row['Fund_Yield'] . "</td></tr>";
echo "<tr id='centered' >" . $row['Fund_Benchmark_Yield'] . "</tr>";
echo "<tr id='centered' >" . $row['Class_Yield'] . "</tr>";
echo "<tr id='centered' >" . $row['Special_Class_Yield'] . "</tr>";
echo "<tr id='centered' >" . $row['Plus_minus_Benchmark'] . "</tr>";
echo "<tr id='centered' >" . $row['Plus_Minus_Class'] . "</tr>";
echo "<tr id='centered' >" . $row['Plus_Minus_Special_Class'] . "</tr>";
echo "<tr id='centered' >" . $row['Percentile_Class'] . "</tr>";
echo "<tr id='centered' >" . $row['Percentile_Special_Class'] . "</tr>";

echo"</td>"; 
```

每个标签包含 4 条记录，但我只想显示前两条或我指定的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:40:31.447

您将`LIMIT`在查询中使用[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

# jquery - 在浏览器中模拟窗口尺寸

> ID：13754607
> 
> 赞同：0
> 
> 时间：2012-12-06T23:37:49.397
> 
> 标签：jquery, twitter-bootstrap, responsive-design, browser-width

我正在开发一个 WYSIWYG 编辑器，用于构建响应式布局（通过 Bootstrap），作为一个副项目。我希望我可以构建它以使用缩放/滚动功能（类似于 PDF 查看器或 Photoshop），并允许用户设置/更改网站在其中呈现的“窗口”的尺寸。

为了确保 WYSIWYG 编辑器正确显示布局，我想把它放在一个 div 中，并将 div 的尺寸设置为我正在模拟的浏览器窗口的尺寸。这是否可以开箱即用，使用流式布局？否则，我可以编辑 JS 以查找目标 div 而不是窗口以检测尺寸，但我更喜欢前一种方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:13:11.630

您可以使用 css 绝对定位让 div 占据浏览器视口的定义部分，而不管其他 html 存在。这可以使用 px 从浏览器边缘的偏移量或百分比视图的百分比来完成。因此，鉴于您的示例，您可以定义一个“窗口”并继续在该窗口中进行布局。默认情况下，绝对定位元素的子元素不会继承绝对定位，因此子元素将像往常一样在 position: absolute 组件内布局。

```
#window {
  position:  absolute;
} 
```

作为一个具有绝对定位窗口的 Bootstrap 布局示例，其中包含可滚动的组件，请看：

[http://jsfiddle.net/timburgess/ZTt5M/](http://jsfiddle.net/timburgess/ZTt5M/)

[A List Apart 在http://www.alistapart.com/articles/css-positioning-101/](http://www.alistapart.com/articles/css-positioning-101/)上有一个很好的 css 定位概述

# jquery - jquery宽度多个ID不同的值

> ID：13754615
> 
> 赞同：1
> 
> 时间：2012-12-06T23:38:33.950
> 
> 标签：jquery, jquery-ui, width

多亏了我的一些帮助，我制作了这个 jquery 函数，它可以获取 DIV 中 IMG 的宽度总和。

现在我有一个新问题：多个不同宽度的 div.ID，我怎样才能使它的性能最高？

我的代码是这样的，对于 1 div：

```
$(window).load(function(){
var widthSum = 0;
$('#oneid.scroll-content-item img').each(function(){
widthSum += $(this).width() + 20;
});
$( ".scroll-content" ).css('width', widthSum); 
```

我应该使用不同的 ID 多次重复此代码吗？例如，如果我制作这样的多个选择器：

```
$('#oneid.scroll-content-item img, #twoid.scroll-content-item img').each(function(){ 
```

它会将它们一起计算，但我需要分开。

有任何想法吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:43:33.340

```
//this will go over any element with the class "scroll-content-item" seperately
$('.scroll-content-item').each(function(){
    var wrapper = $(this);
    var wrapperWidth = 0;

    //this will go over every img inside the seperate wrappers
    wrapper.find('img').each(function(){
        wrapperWidth += $(this).width() + 20;
    });

    wrapper.css('width', wrapperWidth);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:42:32.393

```
function getWidth(elem) {
    var widthSum = 0;
    $('img', elem).each(function(){
        widthSum += $(this).width() + 20;
    });
    return widthSum;
}

$(window).load(function(){
    $('.scroll-content').each(function() {
        $(this).css('width', getWidth(this));
    });
});
​ 
```

# telerik - 使用按需加载时在 RadComboBox 中设置初始值

> ID：13754616
> 
> 赞同：1
> 
> 时间：2012-12-06T23:38:39.717
> 
> 标签：telerik, radcombobox, telerik-combobox

我的组合是空的，直到我单击下拉列表（项目请求事件被触发）：那么在使用按需加载时在 RadComboBox 中设置初始项目（值和文本）的最佳策略是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:55:04.923

我认为您需要确保将 EnableLoadOnDemand 设置为“true”。如果它是假的（可能丢失了？）它看起来你的下拉是空的，直到你点击一个空的搜索框的底部。下面是一些可能有帮助的代码。

```
<telerik:RadComboBox ID="Category" runat="server" Width="175px" Height="150px"
    EmptyMessage="Select a Category" EnableLoadOnDemand="true" ShowMoreResultsBox="true"
    EnableVirtualScrolling="true" >
    <WebServiceSettings Method="GetCategory" Path="GetCategory.asmx" />
</telerik:RadComboBox> 
```

# html - font-face firefox 和 IE 的问题

> ID：13754617
> 
> 赞同：1
> 
> 时间：2012-12-06T23:38:39.543
> 
> 标签：html, css, web, font-face

在一个网站上我输入了“Helvetica”字体，在谷歌Chrome和Safari上使用字体功能没有问题，而当我在Firefox和IE中看到这个网站时我觉得有问题。浏览器加载字体，但我没有看到字符，而是看到了难以理解的破折号和行。在谷歌搜索我找到了这个解决方案；我已使用以下命令更改了 Aruba 的 .htaccess：

```
# BEGIN REQUIRED FOR webfonts

AddType font/ttf .ttf
AddType font/eot .eot
AddType font/otf .otf
AddType font/woff .woff

<FilesMatch "\.(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
</ IfModule>
</ FilesMatch>

# END REQUIRED FOR webfonts 
```

这在理论上必须解决我的问题，但这并没有发生。有没有人有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:40:38.780

MIME 类型中的前后不应该有空格`/`，并且`.`紧接在扩展之前，而不是在 MIME 类型之后。我也会把它们全部小写。

# php - 使用 preg_match 检查电子邮件域

> ID：13754621
> 
> 赞同：1
> 
> 时间：2012-12-06T23:39:21.077
> 
> 标签：php

如何修改下面的 preg_match 函数以允许所有以 harvard.edu 电子邮件地址结尾的电子邮件地址，而不是仅以 @college.harvard.edu 结尾的电子邮件地址？

```
if(!preg_match("/@college\.harvard\.edu$/", $_POST["username"]))
    {
        apologize("You must provide a Harvard email to register.");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T23:40:54.027

```
if(!preg_match("/@.*harvard\.edu$/", $_POST["username"]))
{
    apologize("You must provide a Harvard email address to register.");
} 
```

# php - 远程运行 PHP

> ID：13754628
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:40:12.277
> 
> 标签：php, javascript

我有一个 PHP 脚本，我想在用户站点上远程运行，它与我的帐户相关联。所以基本上它是软件即服务。用户将某些代码复制并粘贴到他们的站点，它将严格运行 php。我不确定如何做到这一点。

您是否能够远程运行 php，例如，如果我的网站是：

mydomain.com

并且用户域将是：

customerdomain.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:50:08.250

这是一个巧妙的小技巧，可能就是您正在寻找的。该文件将位于您的服务器上：

```
//yourfile.php
<?php

$output = "hello world";

header("content-type: application/x-javascript");
echo "document.write('$output');";

?> 
```

然后你的客户会在他们的网站上粘贴这段代码，它会输出“hello world”。

```
<script type="text/javascript" src="http://www.mydomain.com/yourfile.php"></script> 
```

我使用这个技巧让人们在他们的网站上加载小部件，而不必给他们我的 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:44:13.260

正如 dqhendricks 所建议的那样，将系统的功能保留在服务器上并使用类似 AJAX 的通信渠道通过 Javascript 向客户站点提供服务数据听起来要好得多。这条路线将使您能够在他们的网站上显示来自您系统的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:44:20.390

您不能在他们的网站上运行 php，但您可以在您的终端上设置一个 url，用户可以使用 cURL 查询（例如）向您发送他们的信息并接收您想要提供的任何信息。

# android - java.lang.NullPointerException 我不知道为什么

> ID：13754635
> 
> 赞同：1
> 
> 时间：2012-12-06T23:40:47.413
> 
> 标签：android

```
package com.nicotera.colton.londontransitguide;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class RoutesActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Spinner spinner = (Spinner) findViewById(R.id.route_name_spinner);

        // Create an ArrayAdapter using the string array and a default 
        // spinner layout
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.routes_array, android.R.layout.simple_spinner_item
        );

        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item
        );

        // Apply the adapter to the spinner
        spinner.setAdapter(adapter);

        // TODO Auto-generated method stub
    }
} 
```

结果是：

```
12-06 23:34:28.954: E/AndroidRuntime(765): Caused by: java.lang.NullPointerException
12-06 23:34:28.954: E/AndroidRuntime(765): at com.nicotera.colton.londontransitguide.RoutesActivity.onCreate(RoutesActivity.java:22) 
```

所以看来问题出在第 22 行，但我无法弄清楚到底出了什么问题？我是一个全新的开发人员，所以感谢所有的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T23:49:46.707

我猜第 22 行是：

```
spinner.setAdapter(adapter); 
```

这意味着微调器为空。因此，调用 findViewById() 将返回 null。检查你的布局，你有一个 ID 为 "R.id.route_name_spinner" 的微调器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:52:52.907

不确定解释。我的想法：

*   您没有制作 setContentView(R.layout.blablablabla)
*   所以 findViewById 返回 null
*   最后，您尝试访问为 null 的微调器的 setAdapter 方法。

哔叽

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:57:42.293

小改动：setContentView(main.xml);

# winforms - 使用 ilasm 的令牌 MZ 的语法错误

> ID：13754640
> 
> 赞同：1
> 
> 时间：2012-12-06T23:41:10.143
> 
> 标签：winforms, assembly, strongname, ilasm

我有一个我正在尝试使用的预构建 dll 程序集。它是一个 winforms 库，当我引用它时，我可以在设计器/代码中使用它而不会出错。当我运行它时，我得到：

> 程序集生成失败 - 引用的程序集“YARTE”没有强名称

我决定做 ildasm => ilasm 往返，但我一直收到这个错误

```
C:\...\bin>ilasm /dll /key=mykey.snk YARTE.dll

Microsoft (R) .NET Framework IL Assembler.  Version 4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.
Assembling 'YARTE.dll'  to DLL --> 'YARTE.dll'
Source file is ANSI

YARTE.dll(1) : error : syntax error at token 'MZ' in: ZÉ 
```

我在其他地方没有找到太多帮助，但我认为这不是一个罕见的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:45:10.957

你为什么要编译`yarte` *DLL*文件？`ilasm`应该采用 IL*源*文件。

`ildasm`如果您忽略:-)的输出，这并不是真正的往返

# angularjs - 如何设置使用ng-options创建的选择的初始值，其中Object作为angularjs中的值

> ID：13754642
> 
> 赞同：1
> 
> 时间：2012-12-06T23:41:31.177
> 
> 标签：angularjs

我有一个表格用于更新从宁静服务填充的记录。

其中一个字段使用选择作为查找值，我将其绑定到模型中的对象。

选择已正确创建，并且选择选项会对我的模型进行正确更改。

问题是当我最初加载页面时，选择是空白的。

有没有办法正确设置初始值，而无需爬取查找对象并匹配 id 以获得自动生成的索引位置？

或者更好的是，将值设置为对象而不是自动生成的索引。

```
<div ng-controller="MyCtrl">
    Id: <input ng-model="course.id" readonly><br>
    Cost: <input ng-model="course.cost" ng-required="true"><br>
    Title: <select ng-model="course.courseTitle" ng-options="title.name for title in courseTitles">
      </select> {{course.courseTitle.description}}<br>
    Length: <input ng-model="course.length" ng-required="true"><br>
    <br>
    Id: {{course.id}}<br>
    Cost: {{course.cost}}<br>
    Title: {{course.courseTitle.name}}<br>
    Length: {{course.length}}
</div>

function MyCtrl($scope) {
    $scope.course = {
        "id": "108",
        "cost": "155",
        "courseTitle": {
            "description": "Description of course 37.",
            "id": "37",
            "name": "Course 37 Name"
        },
        "length": "7"
    };

    $scope.courseTitles = [{
        "description": "Description of course 37.",
        "id": "37",
        "name": "Course 37 Name"},
    {
        "description": "Description of course 63.",
        "id": "67",
        "name": "Course 63 Name"},
    {
        "description": "Description of course 88.",
        "id": "88",
        "name": "Course 88 Name"}];

} 
```

我在这里创建了一个小提琴 - [http://jsfiddle.net/bcarter/Jxydp/](http://jsfiddle.net/bcarter/Jxydp/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-28T15:05:14.903

使用 ng-options 的“track by”子句

```
<select ng-model="course.courseTitle" 
        ng-options="title.name for title in courseTitles track by title.id">
</select> 
```

这将导致比较通过 title.id == other.id 而不是 title == other 进行检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:05:26.157

这是因为您在这里使用了两个不同的对象。你有

```
 {
        "description": "Description of course 37.",
        "id": "37",
        "name": "Course 37 Name"
    } 
```

定义了两次，创建了两个不同的引用。如果您使用相同的对象，它将按预期工作。请参阅[http://jsfiddle.net/Jxydp/14/](http://jsfiddle.net/Jxydp/14/)（可能有更好的方法，但它说明了我的观点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:29:33.457

这可能有点固执己见，但我认为更改数据结构会更好。只需为您的模型设置一个数组

```
$scope.courses = [{
    "cost": "155",
    "description": "Description of course 37.",
    "id": "37",
    "name": "Course 37 Name",
    "length": "8"
},{
    "cost": "156",
    "description": "Description of course 63.",
    "id": "67",
    "name": "Course 63 Name",
    "length": "9"        
},{
    "cost": "157",
    "description": "Description of course 88.",
    "id": "88",
    "name": "Course 88 Name",
    "length": "9"        
}]; 
```

然后在你的元素中改变`ngModel`和`ngOptions``select`

```
<select ng-model="course" ng-options="course.name for course in courses"> 
```

然后在您的控制器中告诉 Angular 将您的课程中的任何课程设置为初始课程

```
$scope.course = $scope.courses[0]; 
```

这样您就无需担心另一个对象并保持同步，让 Angular 为您完成。

JSfiddle 在这里[http://jsfiddle.net/jaimem/uuCfx/1/](http://jsfiddle.net/jaimem/uuCfx/1/)

# c# - 使用带有 MEF 的类型导出和导入委托

> ID：13754644
> 
> 赞同：0
> 
> 时间：2012-12-06T23:41:52.820
> 
> 标签：c#, delegates, mef

我们目前正在使用 MEF 按名称导入和导出代表。

```
public delegate IThing ThingGenerator();

[Export("ThingGenerator")]
public IThing MyThingGenerator() { ... }

[ImportMany("ThingGenerator")]
public IEnumerable<ThingGenerator> ThingGenerators { get; set; } 
```

为了可维护性，我们希望使用类型进行导入和导出。但是，我们似乎无法完成这项工作。

```
[Export(typeof(ThingGenerator))]
public IThing MyThingGenerator() { ... }

[ImportMany(typeof(ThingGenerator))]
public IEnumerable<ThingGenerator> ThingGenerators { get; set; } 
```

在某些形式中，我们会收到错误消息，指出导出的函数与委托类型不匹配。在其他情况下，类型似乎没有被导出。有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T01:45:31.370

您实际上可以按类型导入和导出，仅在您的情况下，您应该尝试导出和导入 typeof(IThing) 而不是 typeof(ThingGenerator)。

通常导出的部分会实现一些接口（可以是一个空接口，就像一个标签），所以你可以识别你正在导入的内容，但它也适用于类型。

这是一个很好的视频教程，可以帮助您开始使用 MEF（它在 SilverLight 中，但也适用于 WPF，也应该适用于 Winforms） [第 1](http://csharperimage.jeremylikness.com/2010/03/mvvm-with-mef-in-silverlight-video.html) [部分第 2 部分](http://csharperimage.jeremylikness.com/2010/03/mvvm-with-mef-in-silverlight-video_09.html)

检查第 2 部分，当他使用元数据创建自定义导出属性时，它可能特别有用。

希望这会有所帮助，问候

# php - 将字符串转换为数组列表

> ID：13754645
> 
> 赞同：-3
> 
> 时间：2012-12-06T23:41:59.987
> 
> 标签：php, arrays, magento, explode, fgetcsv

如何将 REQUEST 字符串转换为列表中的数组，如下所示？

```
$_REQUEST["InventoryData"] == sku=qty&234444=11&ShirtBig=111&ShirtSmall=101&empty=0

Array ( [0] => sku [1] => qty ) 
Array ( [0] => 234444 [1] => 11 ) 
Array ( [0] => ShirtBig [1] => 111 ) 
Array ( [0] => ShirtSmall [1] => 101 ) 
Array ( [0] => empty [1] => 0 ) 
```

这是“MASS UPDATE STOCK LEVELS IN MAGENTO – FAST”脚本的修改，用于使用客户端提交数据进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:57:09.923

```
$result = array();
parse_str($_REQUEST['InventoryData'], $data);
foreach ($data as $key => $value) {
    $result[] = array($key, $value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:49:53.460

您可以使用explode 函数按某个字符将字符串拆分为数组：http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

但是，您可能需要进行一些字符串操作才能将该字符串放入您发布的结构中。

# user-defined-functions - Hive：将逗号分隔的字符串转换为数组以用于表生成函数

> ID：13754648
> 
> 赞同：3
> 
> 时间：2012-12-06T23:42:13.257
> 
> 标签：user-defined-functions, hive, elastic-map-reduce

我正在使用 gzip 压缩的 JSON 编码文件在 Amazon 的 Elastic MapReduce 上创建 Hive 表。我正在使用这个 JSON SerDe：[http ://code.google.com/p/hive-json-serde/](http://code.google.com/p/hive-json-serde/)

未编码的文件如下所示：

```
{"id":"101", "items":"A:231,234,119,12"}

{"id":"102", "items":"B:13,89,121"} 
```

...

我想为具有表格生成功能的用户创建一个“项目”列的数组。我想要的数组是整数的“爆炸”CSV，忽略“：”和它之前的字母。我希望能够对项目整数（231,234 等）进行 GROUP BY 或将它们与其他表相结合。改变这个文件的格式会很困难，我所有的旧数据都以这种格式存储，所以我想在 Hive 中解决这个问题，而不改变如何存储我的数据。

我有办法做到这一点吗？

编辑：

谢谢@mark-grover，这行得通！

我做了这样的事情：

```
SELECT id, item FROM my_table LATERAL VIEW explode(split(substr(items, 3, length(items) - 2), ',')) t1 AS item 
```

要得到：

```
101 231

101 234

101 119

101  12

102  13

102  89

102 121 
```

在这样做的过程中，我发现我想做更多的事情。我还想选择每个项目在 CSV 中的位置。所以我希望输出看起来像：

```
101 231 0

101 234 1

101 119 2

101  12 3

102  13 1

102  89 2

102 121 3 
```

这里有什么想法吗？

再次编辑：

我为我的后续问题提出了一些类似的问题：

```
SELECT id, item, find_in_set(item, substr(items, 3, length(items) - 2)) AS position
FROM my_table LATERAL VIEW explode(split(substr(items, 3, length(items) - 2), ',')) t1 AS item 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:53:19.217

您可以使用[Hive UDF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions)来做到这一点。您可能希望使用拆分 UDF 以逗号拆分字符串以获取数组，然后使用[横向视图和分解 UDTF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+LateralView)来“分解”数组的内容。

回答你的第二个问题：这是我现在能想到的。可能有更好/更容易/更少hackier的方法来做到这一点。

创建一个 UDF，例如 split_extended，它将作为具有 2 个元素的结构返回，第一个是数组元素的实际内容，第二个是索引。当你分解这个时，分解列的类型将是一个结构。此结构的条目之一是数组中的实际元素，另一个是与该元素对应的索引。

如果您考虑一下，我们正在扩充拆分 UDF 以返回 2 条信息 - 元素和索引。这些是将此类信息作为单个对象返回的几种方法 - 结构是其中之一，数组是另一个（数组的第一个元素是数组中的实际元素，第二个元素是索引）。返回 2 条信息的另一种更巧妙的方法是将它们与您知道数据中不存在的东西（比如“：”）连接起来，这样您就可以让 UDF 返回“231:0”、“234:0” '、'119:2' 等，最后，您可以根据 ':' （使用拆分 UDF）将结果字符串拆分出来，而不是访问它们的成员，以获得所需的两部分。

要创建您自己的 UDF，您将能够利用[此处](https://github.com/apache/hive/blob/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFSplit.java)提供的大部分（如果不是全部）拆分 UDF 代码。

# php - php imagecreatefrom 结果为黑色

> ID：13754649
> 
> 赞同：0
> 
> 时间：2012-12-06T23:42:17.063
> 
> 标签：php, gd

这几天我一直在想办法解决这个问题。我需要上传一张图片，将其裁剪为正方形，调整为 300x300，然后调整为 150x150，上传到我的“uploads/products/$id/”文件夹，然后将文件路径推入 mysql 数据库。

但是，我不断输出黑色图像。这个脚本有什么问题？

```
$ext = explode('.', $_FILES['image1']['name']);
$extension = $ext[1];
$target_path = 'uploads/products/'.$id.'/';
$filename = 'featuredpic.'.$extension;

$featured100_full_path = $target_path.$filename;

if(!is_dir('../../../uploads/products/'.$id)){
    mkdir('../../../uploads/products/'.$id, 0777);
}

if(file_exists('../../../'.$featured100_full_path)) {
    chmod('../../../'.$featured100_full_path, 0755);
    unlink('../../../'.$featured100_full_path);
}

if(!move_uploaded_file($_FILES['image1']['tmp_name'], '../../../'.$featured100_full_path)){
    echo 'Error: Image Not Uploaded!';
}

if($extension=="jpg" || $extension=="jpeg" ){
$uploadedfile = $_FILES['image1']['tmp_name'];
$src = imagecreatefromjpeg($uploadedfile);
    }
else if($extension=="png"){
$uploadedfile = $_FILES['image1']['tmp_name'];
$src = imagecreatefrompng($uploadedfile);
} else {
$src = imagecreatefromgif($uploadedfile);}

list($width, $height) = getimagesize($filename);
$newwidth = 300;
$newheight = 300;
$featured300 = imagecreatetruecolor($newwidth, $newheight);

$newwidth1 = 150;
$newheight1 = 150;
$featuredthumb = imagecreatetruecolor($newwidth1, $newheight1);

imagecopyresampled($featured300,$src,0,0,0,0,$newwidth,$newheight,$width,$height);
imagecopyresampled($featuredthumb,$src,0,0,0,0,$newwidth1,$newheight1,$width,$height);

$filename_featured300 = 'uploads/products/'.$id.'/featured300.'.$extension;
$filename_featuredthumb = 'uploads/products/'.$id.'/featuredthumb.'.$extension;

imagejpeg($featured300, '../../../'.$filename_featured300,100);
imagejpeg($featuredthumb, '../../../'.$filename_featuredthumb,100);

imagedestroy($src);
imagedestroy($tmp);
imagedestroy($tmp1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:09:55.467

此功能可能是您的黑色图像的原因：http: [//php.net/manual/en/function.imagecreatetruecolor.php](http://php.net/manual/en/function.imagecreatetruecolor.php)

我会亲自逐步完成每个修改过程，以确保它的功能并做你期望的事情，我不得不承认很多这段代码是有风险的：

```
$ext = explode('.', $_FILES['image1']['name']);
$extension = $ext[1]; 
```

您对文件扩展名过于信任，这更安全： http: [//php.net/manual/en/function.finfo-file.php](http://php.net/manual/en/function.finfo-file.php)

但是，我知道这是一个额外的 PECL 扩展 - 所以请理解为什么您可能选择了爆炸点。如果不为文件上传、目录结构等编写包装器，就很难调试代码

提示：继续将图像移动到带有数字扩展名的临时目录，以便在转换链的每个阶段查看 - 它应该可以快速识别您的缺陷！希望这会有所帮助，对不起，我不能更有用。

# python - py2app opencv 部署

> ID：13754652
> 
> 赞同：1
> 
> 时间：2012-12-06T23:42:27.023
> 
> 标签：python, opencv, py2app

我在我的项目中使用opencv。项目取得成功并执行良好。但是当我尝试将我的应用程序重新定位到另一个文件夹时，我看到了错误：

```
 MacBook-Air-Voldemar:tmp voldemar$ ./Paranoid.app/Contents/MacOS/Paranoid 
Traceback (most recent call last):
  File "/private/tmp/Paranoid.app/Contents/Resources/__boot__.py", line 316, in <module>
    _run()
  File "/private/tmp/Paranoid.app/Contents/Resources/__boot__.py", line 311, in _run
    exec(compile(source, path, 'exec'), globals(), globals())
  File "/private/tmp/Paranoid.app/Contents/Resources/Paranoid.py", line 4, in <module>
    import cv
  File "cv.pyc", line 1, in <module>
ImportError: No module named cv2.cv 
```

我在项目文件夹中执行应用程序时没有这样的错误。我该如何解决这个问题？

# struct - HLSL Shader：调用函数改变返回值

> ID：13754657
> 
> 赞同：0
> 
> 时间：2012-12-06T23:42:37.620
> 
> 标签：struct, directx, shader, hlsl

我一直在研究一个着色器程序，而最奇怪的事情之一正在发生。我有一个名为 PositionLightPS 的方法，它本质上执行位置光（全向和聚光灯）的计算，并返回一个包含光强度和漫反射颜色的结构。

它曾经在该程序的先前版本中工作，但由于某种原因它停止工作......

让我解释一下为什么。但首先，这里是 PositionPS 方法的代码。我毫不怀疑这种方法的计算是正确的，但稍后会详细介绍。

```
struct LightFragment {
    float4 diffuse;
    float intensity;
};

LightFragment PositionLightPS(PositionLightVOut pin, float3 lightToPixelVec)
{
    LightFragment result;

    pin.normal = normalize(pin.normal);

    float4 diffuse = shaderTexture.Sample( textureSampler, pin.tex0 );
    float3 finalDiffuse = float3(0.0f, 0.0f, 0.0f);

    float d = length(lightToPixelVec);
    if( d > plRange )
    {
        result.diffuse = float4(finalDiffuse, 0);
        result.intensity = 0; 
        return result;
    }

    lightToPixelVec /= d; 

    result.intensity = dot(lightToPixelVec, pin.normal);

    if( result.intensity > 0.0f )
    {   
        finalDiffuse = result.intensity * diffuse.xyz;
        finalDiffuse.xyz *= clColour.xyz;
        finalDiffuse.xyz *= clColour.w;

        finalDiffuse /= plAttenuation[0] + (plAttenuation[1] * d) + (plAttenuation[2] * (d*d));
    }   

    result.diffuse = float4(finalDiffuse, diffuse.a) * diffuseColour;
    return result;
} 
```

这是全向光像素着色器。

```
float4 OmniLightDiffusePS(PositionLightVOut pin) : SV_TARGET0
{
    float3 lightToPixelVec = plPosition.xyz - pin.worldPos.xyz;
    return = PositionLightPS(pin, lightToPixelVec).diffuse;
} 
```

出于某种原因，这不起作用，尽管它已经存在了很长时间。但这不是我问题的重点。绝对奇怪的是，这两种方法会产生不同的结果。

```
float4 OmniLightDiffusePS(PositionLightVOut pin) : SV_TARGET0
{
    //return float4(1,1,1,1);
    float3 lightToPixelVec = plPosition.xyz - pin.worldPos.xyz;
    LightFragment fragment = PositionLightPS(pin, lightToPixelVec);
    return float4(1,1,1,1);
} 
```

**这将返回一个黑色像素**

```
float4 OmniLightDiffusePS(PositionLightVOut pin) : SV_TARGET0
{
    return float4(1,1,1,1);
    float3 lightToPixelVec = plPosition.xyz - pin.worldPos.xyz;
    LightFragment fragment = PositionLightPS(pin, lightToPixelVec);
    //return float4(1,1,1,1);
} 
```

**这将返回一个白色像素**

所以这意味着调用 PositionLightPS 方法会对返回的值产生影响……但是为什么呢？***为什么会呢？怎么了？是内存错误吗？***

（注：直接在OmniLightDiffuse方法中复制PositionLightPS方法代码即可解决问题，灯光显示正常。这说明PositionLightPS中的计算是正确的。那么问题来了，***使用LightFragment结构体对shader程序有影响吗不知何故***？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:40:33.213

我找到了问题的原因。我的电脑使用 CUDA 并在我不知情的情况下将自己锁定为使用集成图形芯片。强制 NVidia 卡解决了这个问题。

但是，我确实发现这篇非常有用的博客文章详细说明了我的问题所在。***当两个特定的编译器标志同时激活时，调用用户定义函数会导致编译器的内联删除它处理的像素***。我不知道集成图形芯片是否重现了这个确切的错误，但症状似乎完全对应（即调用返回值没有发生的函数将改变返回的内容）。

有关更多详细信息，请参阅 Nico Shertler 的博客文章链接：http: [//nicoschertler.wordpress.com/2012/01/02/hlsl-4-calls-to-user-defined-functions-will-crash /](http://nicoschertler.wordpress.com/2012/01/02/hlsl-4-calls-to-user-defined-functions-will-crash/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:06:46.983

通常，这是由于被零除错误造成的。ATI 和 NVIDIA 在处理这个 NaN 方面可能有所不同。检查输入向量的长度，或添加一些 epsilon。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-11T20:32:49.330

Bjorkes 的帖子给了我解决问题的线索。我的代码输入了一个自定义函数，该函数返回了一个白色像素（错误），并且调试器不允许我单步执行代码。罪魁祸首是下面一行。float4 p = texture.Sample(...) return (float4)(1 / px, 1 / py, 1 / pz, 1);

添加检查 0 已解决的问题。

# ruby-on-rails - Ruby 定义的问题？Rails 中的操作员

> ID：13754659
> 
> 赞同：1
> 
> 时间：2012-12-06T23:42:41.697
> 
> 标签：ruby-on-rails, ruby, operators, defined

我的 Writer 类上有一个使用定义的实例方法？运算符检查是否定义了posted_posts：

```
def performance_score
  logger.debug posted_posts
  logger.debug defined?(posted_posts)
  unless defined?(posted_posts)
    ...
  else
    ...
  end
end 
```

在我的控制器中，我有一个 writers 实例，定义如下：

```
@writers = Writer.select("writers.*, p.total_posts, p.posted_posts").joins(...) 
```

当我调用@writers.performance_score 时，从第一个logger.debug 行它说我有4 个posted_posts，但第二个打印出nil。此外，它进入了除非部分而不是其他部分。

为了测试这一点，我将posted_posts 存根为4。这从第一个logger.debug 行打印出4，第二个logger.debug 表示它被定义为一个方法。此外，它确实进入了 else。

你能帮我理解为什么这在我的 Rails 应用程序中失败了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:49:32.597

实际上很可能会失败，因为从您的 AREL`select`语句返回的关系使用`method_missing`魔法从调用中返回一个值。这与存在不是一回事`defined`。当您在测试对象上模拟/存根“方法”时，它可能会使用`define_method`正在创建已定义函数的函数。

这可能会做你想做的事。

```
if respond_to?(:posted_posts)
  ...
else
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:34:48.977

在你查询 AR 对象后不要使用相同的变量名，

`@results = @writers.select("writers.*, p.total_posts, p.posted_posts")`

然后调用`@results.performance_score`你的控制器

# java - 转换表单 2012,12,06,18,00,00 上的字符串以创建新的公历

> ID：13754661
> 
> 赞同：2
> 
> 时间：2012-12-06T23:42:52.790
> 
> 标签：java, android, xml, xml-parsing

您好我有以下 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<share>
    <item>
        <name>Ericsson B</name>
        <currentRate>80.69</currentRate>
        <changeToday>-0.51</changeToday>
        <changeTodayPercent>-0.52</changeTodayPercent>
            <timeUpdated>2012,12,06,18,00,00</timeUpdated>
     </item>
    </share> 
```

我可以读取每个变量并将它们放入一个数组列表中，**除了**“timeUpdated”变量，我无法将“2012,12,06,18,00,00”形式的字符串转换为如下所示的新公历

```
 GregorianCalendar updated = new GregorianCalendar(2012,12,06,16,30,55); 
```

所以我的问题是如何将“2012,12,06,16,30,55”形式的字符串转换为能够放入

GregorianCalendar updated = new GregorianCalendar("我转换的日历字符串");

如果你想知道这里是我的 xmlparser

```
public AllSharesOnStockMarket(){

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    for (int i = 0; i < nl.getLength(); i++) {
        Element e = (Element) nl.item(i);
        System.out.println(e);
        System.out.println("hejsan");
        System.out.println(parser.getValue(e, KEY_NAME));

        allShareHoldingsOnStockMarket.get(i).setName(parser.getValue(e, KEY_NAME));
        tempDouble = Double.parseDouble(parser.getValue(e, KEY_CURRENTRATE));
        allShareHoldingsOnStockMarket.get(i).setCurrentRate(tempDouble);
        tempDouble = Double.parseDouble(parser.getValue(e, KEY_CHANGETODAY));
        allShareHoldingsOnStockMarket.get(i).setCurrentRate(tempDouble);
        tempDouble = Double.parseDouble(parser.getValue(e, KEY_CHANGETODAYPERCENT));
        allShareHoldingsOnStockMarket.get(i).setChangeTodayPercent(tempDouble);

        String dateToConvert = parser.getValue(e, KEY_TIMEUPDATED);//Need to convert this into a date so I can put into 
        allShareHoldingsOnStockMarket.get(i).setTimeUpdated("My Converted Date String That is the converted dateToConvert String");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:49:10.217

试试看

```
 Date date = new SimpleDateFormat("yyyy,MM,dd,HH,mm,ss").parse("2012,12,06,18,00,00");
    GregorianCalendar gc = new GregorianCalendar();
    gc.setTime(date); 
```

# c# - C++ 模板和 C# 泛型

> ID：13754663
> 
> 赞同：0
> 
> 时间：2012-12-06T23:42:57.130
> 
> 标签：c#, c++, .net

有没有人尝试将 C# 泛型映射到 C++ 模板？我正在研究一种在 C# 中访问 64 位列表的“迂回”方式（通过在 C++ dll 中实现它），并且很好奇为 C++ 模板化函数提供 C# 泛型是否有什么特别之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:54:40.950

如果我正确理解了这个问题，是的，您可以在 C++/CLI 中将托管 ref 类定义为模板，然后从 c# 访问它们。访问它们的语法与泛型相同，但它们实际上是模板。

wikipedia 中描述了 c++/CLI 的模板语法： [http ://en.wikipedia.org/wiki/C%2B%2B/CLI#Template_syntax](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Template_syntax)

# resources - 访问 *.war 类路径资源

> ID：13754664
> 
> 赞同：0
> 
> 时间：2012-12-06T23:43:01.213
> 
> 标签：resources, java-ee-6, jboss7.x, java-7, vfs

我在使用`ClassLoader#getResources(-)`.

我想列出`WEB-INF/classes/*`一些 Web 应用程序 ( ) 的所有类路径资源 ( `*.war`)，所以我可以从以下内容开始：

```
ClassLoader cl = Thread.currentThread().getContextClassLoader();

Enumeration<URL> resources = cl.getResources("");

while (resources.hasMoreElements()) {
    Path path = Paths.get(resources.nextElement().toURI());
    InputStream is = Files.newInputStream(path);
} 
```

如果我在以分解模式部署应用程序的 JBoss AS 7.1 中使用此代码 - 它可以正常工作。
一旦您尝试不以爆炸模式部署它，而是以`*.war`存档的形式部署它，它就会开始抛出`NoSuchFileException`.

我认为这是因为未分解的存档使用虚拟文件系统，并且所有此类加载的资源都以``vfs:`;开头。就我而言，例如`vfs:///content/WEB-INF/classes/someResource/`。

因此 used`Path`等于`/content/WEB-INF/classes/someResource`并且它被视为不存在的路径（它以根节点，斜杠开头）并引发异常。

暂时忘记所有使用 HTTP、FTP 或其他方式加载资源的情况；我也对在类路径中扫描 jar 不感兴趣。我只想读取类路径根目录上的所有基于文件的资源。

问题是我需要输入每个资源并找出这是否是一个文件夹 - 如果是，请列出它的所有元素。这就是该`Path`元素在这里非常有用的原因。

问题是 -**您应该在 Web 应用程序中列出所有资源的正确方法是什么？**

似乎**带有 vfs: 前缀的资源是由一些特殊的 JBoss 类加载器加载的，对吧？**

因此，**我什至能够以可移植的方式访问资源（适用于 JBoss、Glassfish、TomEE 的代码......）？**

**编辑：**为您提供我需要上述内容的上下文：我想扫描`*.properties`类路径中的所有文件并能够使用 CDI 访问它们。它已被描述[here](http://piotrnowicki.com/2012/06/inject-java-properties-in-java-ee-using-cdi/)。

现在我正在从旧`File`对象切换到 NIO.2 路径、文件和基本上：输入流。
但是，这两种方法对 vfs:/ 资源都有相同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:58:32.620

下面的工作吗？

```
ClassLoader cl = Thread.currentThread().getContextClassLoader();

Enumeration<URL> resources = cl.getResources("");

while (resources.hasMoreElements()) {
    InputStream is = resources.nextElement().openStream();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-27T20:13:02.437

使用这个依赖

```
 <dependency>
        <groupId>org.jboss</groupId>
        <artifactId>jboss-vfs</artifactId>
        <version>3.2.15.Final</version>
    </dependency> 
```

导入类

```
import org.jboss.vfs.VFS;
import org.jboss.vfs.VirtualFile;
import org.jboss.vfs.VirtualFileFilter; 
```

列出WAR中所有类的方法

```
 public void scan(ClassLoader classLoader) throws IOException, URISyntaxException {
    String optionalMainPackage="";
    // Example optionalMainPackage="com.domolin.security"
    Enumeration resources = classLoader.getResources(optionalMainPackage);
    while (resources.hasMoreElements()) {
        URL resource = (URL) resources.nextElement();
        System.out.println("URL "+resource);
        VirtualFile vfDir = VFS.getChild(resource.toURI());
        List<VirtualFile> jsonVFs = vfDir.getChildrenRecursively(new VirtualFileFilter() {
            @Override
            public boolean accepts(VirtualFile file) {
                return (file.isDirectory() || file.getName().endsWith(".class"));
            }
        });
        for (int i = 0; i < jsonVFs.size(); i++) {
            VirtualFile vf = jsonVFs.get(i);
            File f = vf.getPhysicalFile();
            System.out.println("CLASS: "+f.getName());
        }
    }
} 
```

用法

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
scan(classLoader); 
```

# objective-c - UITableView 顶部和底部的圆形内阴影

> ID：13754665
> 
> 赞同：1
> 
> 时间：2012-12-06T23:43:07.353
> 
> 标签：objective-c, ios

这就是我想要实现的目标：

![在此处输入图像描述](../Images/f27e49d4e27fb0773a69f554277b7d84.png)

顶部和底部带有圆形内阴影的 UITableView

我目前不知道如何仅在顶部和底部创建这些阴影，然后如何使它们变圆。

或者创建两个具有径向渐变和透明背景的 UIView 可能会更容易。

**有没有人有过同样的事情的经验？**

# java - 如何从 java 代码将包含 ESC/POS 命令的 .text 文件发送到打印机

> ID：13754668
> 
> 赞同：4
> 
> 时间：2012-12-06T23:43:11.590
> 
> 标签：java, printing

到目前为止，我有以下代码：

```
 FileInputStream fin =new FileInputStream(filename);
 DocFlavor df = DocFlavor.INPUT_STREAM.AUTOSENSE;                    
 Doc d = new SimpleDoc(fin, df, null);   
 PrintService P = PrintServiceLookup.lookupDefaultPrintService();

  if (P != null) {              
     DocPrintJob job = P.createPrintJob();  
     job.print(d, null);  
            }
    fin.close; 
```

代码工作正常，但如果文件包含命令，打印机不会解释命令，它会继续打印文件的确切字符串内容。那么如何向爱普生收据打印机发送命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T01:39:15.800

正如已经发现的那样，命令可能必须直接发送而不是 ESC/POS 格式，但您需要将代码解释为 Java 代码中的十六进制并以我发布的方式发送到打印机，无论是来自文件还是字符串。作为示例，而不是通过以下方式初始化 Epson 收据打印机：

```
 PRINT #1, CHR$(&H1B);"@"; 
```

并在收据打印机中剪纸，代码可能是：

```
 PRINT #1, CHR$(&H1D);"V";CHR$(1); 
```

所以这就是它对我的工作方式。

```
 char[] initEP = new char[]{0x1b, '@'};
    char[] cutP = new char[]{0x1d,'V',1};
    String Ptxt=  new String(initEP)+ " text data \n \n \n"+ new String(cutP); 
```

代替

```
 Doc d = new SimpleDoc(new FileInputStream(filename), df, null); 
```

采用

```
 InputStream pis = new ByteArrayInputStream(Ptxt.getBytes());
    Doc d = new SimpleDoc(pis, df, null); 
```

然而，它可能是一种将代码作为命令格式发送的方法，但到目前为止还无法做到这一点。并且不确定它是否可以从java完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:04:42.853

最后一步是使用输入文件中的真实 ASCII 值插入打印机命令——例如，转义字符是 ASCII 值 0x1B。这可以通过使用允许插入任何 ASCII 值的编辑器来完成，例如十六进制编辑器或 Notepad++ 的字符面板（在“编辑”菜单下），或者通过在从文件读取数据后以编程方式修改发送到打印机的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T11:13:46.303

在运行 linux（Ubuntu 12）时，当打印机驱动程序为通用 + 文本时会出现此问题。选择通用 + 原始队列，使打印机的行为更像 ESC POS 设备。

# android - Android：使用填充或边距调整通过 toLeftOf/toRightOf 锚定的视图

> ID：13754673
> 
> 赞同：0
> 
> 时间：2012-12-06T23:43:38.147
> 
> 标签：android, android-layout

我有两个图像视图，我试图在相对布局的屏幕上定位。但是，其中一张图像的左边缘在一个部分中向左突出，而其余部分只是一条直线。我希望其他图像与直线的直线部分对齐，而不是突出的额外部分。

不，我不能编辑图像资源，我不会详细介绍所有细节，我只会说我需要所有的片段。

这是我正在尝试做的一个非常丑陋的图像：

![在此处输入图像描述](../Images/835a7b1c879aefebefd9c9dbed1fca64.png)

我尝试了以下方法：

```
 <ImageView
    android:id="@+id/block"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/interior"
    android:layout_toLeftOf="@+id/open_wall"
    android:layout_marginRight="-10dp"
    android:src="@drawable/block" /> 
```

但它也不起作用（尝试过 paddingRight）。我认为因为视图将自身锚定在 open_wall 图像的最左侧，所以如果你愿意，它不会让你越过那条分界线。

有没有人知道我可以做些什么来得到我想要的东西？

编辑：根据要求，我正在尝试使用的图像：

![红色的](../Images/c716c6b89128507421ed23cb98b8bc08.png)（我图中的红色）

![黑色的](../Images/6a1c4b3210cc3d9b0ee4b9fdb0ca134e.png)（我图中的黑色）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:22:52.837

干得好：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="51dip"
        android:src="@drawable/red" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:paddingLeft="28dip"
        android:src="@drawable/black" />
 </RelativeLayout> 
```

您唯一需要做的就是稍微调整一下这两个`dip`值，因为我没有与您一样分辨率的资源。

这是它的样子：

![在此处输入图像描述](../Images/9ae8a4522ca413ab7f3dd3c46cfc7a25.png)

# wcf - 使用 RealProxy 包装多个 WCF 连接

> ID：13754682
> 
> 赞同：2
> 
> 时间：2012-12-06T23:44:23.760
> 
> 标签：wcf, expression, realproxy

我正在开发一个项目，我们的服务器与多个暴露相同接口的服务器进行通信（如集群）。我们使用循环来选择将请求发送到哪个服务器。到目前为止，我们一直在使用 Expression 来调用我们的 ClusterManager，但这会导致一些丑陋的代码。它还使单元测试变得混乱，并且有点难以验证方法参数。它似乎也导致 Moq 出现一些随机异常问题（不是本文的主题）。

我目前调用服务器和单元测试，如[Moq Setup 后所述，用于带有操作或函数参数的接口](https://stackoverflow.com/questions/5109191/moq-setup-for-interface-with-action-function-argument)

言归正传：

我目前有以下方法：

```
public interface IServerAdapter 
{
    void CallServer(Expression<Action<IServerExposingToClient>> methodToCall, out bool serverCalled);
}

private void DoSomething()
{
    MainViewModel.ServerAdapter.CallServer(server => server.SaveServerSettings(ServerSettings));
} 
```

我想将其更改为以下内容：

```
public interface IServerAdapter 
{
    IServerExposingToClient ServerProxy { get; }
}

private void DoSomething()
{
    MainViewModel.ServerAdapter.ServerProxy.SaveServerSettings(ServerSettings);
} 
```

ServerProxy 是一个 RealProxy，我需要将此调用转换为 ClusterManager 以执行对服务器的实际调用。目前，ClusterManager 与 CallServer 具有相同的签名，这对于现有实现来说有点多余。对于Invoke(IMessage)中调用的翻译，我有两个想法。

**想法1** 将IMethodCallMessage 翻译成lamda 表达式（我还没弄明白怎么做）并将其传递给ClusterManager。除了我不知道如何创建表达式，然后再次处理返回值的问题。一些方法返回一个值，而另一些则没有，因此这涉及到保持 ClusterManager.CallServer 的多个重载。我还需要创建 IMessage 以从 Invoke 返回。

**思路2** 获取我目前用来调用服务器的WCF连接的TransparentProxy的RealProxy，直接用我有的消息调用Invoke。在我的试用中（使用集成测试），我似乎能够成功调用服务器，但是通过ReturnMessage查看，没有返回值，并且ServiceChannelProxy尝试获取消息数据时将Exception属性设置为ArithmetricException。这可能是因为我在测试中做错了什么，或者我不能在两个单独的代理上使用相同的 LogicalCallContext（或其他东西）。

有关如何处理此问题的任何指示？我更喜欢**Idea 2**，因为它看起来最简单，并且希望代码量最少。*在一个类中实现IServerExposingToClient*中的所有方法以调用正确的服务器并不是我想做的事情。

有关如何处理此问题的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:07:59.253

使用在[这里](http://reflector.webtropy.com/default.aspx/WCF/WCF/3@5@30729@1/untmp/Orcas/SP/ndp/cdf/src/WCF/ServiceModel/System/ServiceModel/Channels/ServiceChannelProxy@cs/1/ServiceChannelProxy@cs)找到的信息，我已经能够解决这个问题。在下面的代码中，proxy 是通向 WCF 服务的通道的 ICommunicationObject。似乎工作得很好。

```
public override IMessage Invoke(IMessage msg)
{
    var methodCall = (IMethodCallMessage)msg;
    var proxy = FindNextProxy();
    try
    {
        MethodBase methodBase = methodCall.MethodBase;
        object[] args = methodCall.Args;
        object returnValue = methodBase.Invoke(proxy, args);
        return CreateReturnMessage(returnValue, methodCall);
    }
    catch (TargetInvocationException ex)
    {
        return CreateReturnMessage(ex.InnerException, methodCall);
    }
} 
```

# php - PDO 从 MS SQL 数据库中获取截断的 XML

> ID：13754683
> 
> 赞同：0
> 
> 时间：2012-12-06T23:44:34.463
> 
> 标签：php, xml, sql-server-2008, pdo, simplexml

我正在尝试编写一个 PHP 脚本，该脚本将使用 PDO 检索存储在 MS SQL 数据库中的 XML 数据，然后使用 SimpleXML 解析 XML 数据。

问题是检索 XML 数据会导致以下错误消息：

> SQLSTATE[HY000]：一般错误：10007 Unicode 唯一排序规则中的 Unicode 数据或 ntext 数据无法发送到使用 DB-Library（例如 ISQL）或 ODBC 版本 3.7 或更早版本的客户端。[10007]（严重性 5）

我正在键入转换以检索 XML 数据，该数据作为文本存储在数据库中。我不一定*需要*将它作为真正的 XML 返回。将它作为字符串检索会很好，因为无论如何我都在使用 SimpleXML 来解析数据。

但是，如果我尝试将这些数据作为文本检索，而不进行类型转换，则 XML 字符串总是会被缩短。然后 SimpleXML 吐出一长串错误，例如：

> *标签ABC第**123*行中的数据过早结束
> 
>  *预期的“>”*

 *返回的 XML 的字符串长度最大为 4999。如果我将数据类型转换为 XML，然后转换为 VARCHAR，如下所示：

```
SELECT CONVERT(VARCHAR(MAX), CAST(XML_DATA AS xml)) 
```

然后，我可以从字符串中挤出更多字符 - 最大字符串长度为 5085。

铸造和转换只是一个疯狂的猜测。它已经证明的唯一一件事是我不知道这些最大长度来自哪里，或者它们的含义。

如何完整检索 XML 数据？是什么原因导致断线？PHP/PDO 还是 MS SQL 数据库？

有什么建议么？

**附加信息：** 数据库是只读的。服务器正在运行 PHP 版本 5.2.17。安装了以下 PDO 驱动程序：sqlite、sqlsrv、mssql、mysql、odbc；MSSQL DB-lib 的 PDO 驱动程序：MSSQL_70。XML 来自[亚马逊 MWS](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/amzn-envelope.xsd)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-26T22:25:40.980

对于每个偶然发现这个问题的人来说，我发现的解决方法非常简单。PHP.ini 默认将查询的文本字段截断为 4096 字节。

两种补救方法：

1.  在查询中更新您的文本限制

`mssql_query("SET TEXTSIZE 2147483647");`

2.  在 php.ini 中永久更新文本大小（最大大小如下所示）

`mssql.textlimit = 2147483647`

`mssql.textsize = 2147483647`

源[SQL Server PHP 和截断](https://www.addedbytes.com/blog/sql-server-php-truncating-text)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-23T20:50:15.627

[这里](https://stackoverflow.com/a/38064487/2096951)的答案帮助我使用 FreeTDS 解决方案解决了 unbuntu 16.4、php7.2、MSSQL 的相同问题

[https://stackoverflow.com/a/38064487/2096951](https://stackoverflow.com/a/38064487/2096951)*

# c# - 如何在 C# 中使用私钥？“找不到请求的对象。”

> ID：13754685
> 
> 赞同：3
> 
> 时间：2012-12-06T23:44:43.103
> 
> 标签：c#, encryption, x509certificate2

我正在尝试为 MasterCard Match 实施身份验证，作为他们以下文档的一部分，他们有一个示例私钥：

[https://developer.mastercard.com/portal/display/api/OAuth+Validation](https://developer.mastercard.com/portal/display/api/OAuth+Validation)

在该页面上，他们有两个版本的密钥，一个是 base64 编码文本，在页面上可见，另一个是可下载的 .p12 文件。

如何导入此密钥以用作 x509certificate2？

无论我尝试什么，我都会收到消息“找不到请求的对象。”。

我尝试使用 .net 源代码对其进行深入研究，但在导入的对象上遇到了死胡同

```
[SecurityCritical]
[MethodImpl(MethodImplOptions.InternalCall)]
internal static extern uint _QueryCertFileType(string fileName); 
```

我已经尝试了以下方法，但所有这些都失败了，并出现了相同的上述消息

```
new X509Certificate2(@"c:\test\mc-openapi-csr.pem")
new X509Certificate2(@"c:\test\mc-openapi-csr.pem", "mcapi")
new X509Certificate2(@"c:\test\mc-openapi-csr.pem", "mckp") 
```

所以我将文本块复制到“copied.txt”中，并尝试使用该文件，我也尝试读取字节，并手动传递它们，我也尝试使用

```
X509Certificate.CreateFromCertFile(fileName) 
```

两个文件。

有任何想法吗？证书不好吗？我使用了错误的课程吗？该错误消息是什么意思？

--Update-- 在 Bad Zombie 的建议下，我尝试了 BouncyCastle：

```
 var pem = new Org.BouncyCastle.OpenSsl.PemReader(File.OpenText(fileName));
    RsaPrivateCrtKeyParameters rsaParameters = (RsaPrivateCrtKeyParameters)pem.ReadObject();
    using (var rsa = new RSACryptoServiceProvider())
    {
        rsa.ImportParameters(new RSAParameters
            {
                DP = rsaParameters.DP.ToByteArray(),
                DQ = rsaParameters.DQ.ToByteArray(),
                Exponent = rsaParameters.Exponent.ToByteArray(),
                InverseQ = rsaParameters.QInv.ToByteArray(),
                Modulus = rsaParameters.Modulus.ToByteArray(),
                P = rsaParameters.P.ToByteArray(),
                Q = rsaParameters.Q.ToByteArray(),
            });
    } 
```

在“ImportParameters”调用中，我得到“错误数据”。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:58:10.563

我记不清了，但我相信 pem 文件不能使用。你需要像[充气城堡](http://www.bouncycastle.org/csharp/)这样的东西。

我不记得太多了，但它会加载 PEM 文件。偶尔它不会喜欢它，但它有点罕见。我不知道它是否可以使用，但我知道我成功地使用了私钥/公钥。我不知道如何将它转换为适用于 .NET ssl 库的东西。

但是，如果您使用的是 .net 实现而不是充气城堡，**我建议**您将其转换为与 .NET 实现更兼容的东西。我使用了 bouncycastle，它适用于我不需要与另一个库交互的项目。

```
using Org.BouncyCastle.Crypto.Parameters;
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Security;
using Org.BouncyCastle.OpenSsl;
using System.IO;
using System.Security.Cryptography;

//elsewhere

        using (var reader = File.OpenText(fileName))
        {
            var pemReader = new PemReader(reader);
            var bouncyRsaParameters = (RsaPrivateCrtKeyParameters)pemReader.ReadObject();
            var rsaParameters = DotNetUtilities.ToRSAParameters(bouncyRsaParameters);
            this.PrivateKey = new RSACryptoServiceProvider();
            this.PrivateKey.ImportParameters(rsaParameters);
        } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T23:48:33.593

您可以尝试使用**相对路径**而不是绝对路径吗？

只需将文件放在项目的根目录中并尝试仅使用文件名，而不使用路径。

# c# - 使用 .NET 框架读取串行端口的正确方法是什么？

> ID：13754694
> 
> 赞同：36
> 
> 时间：2012-12-06T23:45:44.867
> 
> 标签：c#, serial-port, .net-4.5

我在这里阅读了很多关于如何使用 .NET SerialPort 类从串行端口读取数据的问题，但没有一种推荐的方法对我来说完全有效。

这是我现在使用的代码：

```
SerialPort port = new SerialPort("COM1");
port.DataReceived += new SerialDataReceivedEventHandler(MyDataReceivedHandler); 
```

和事件处理程序：

```
void MyDataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
    int count = port.BytesToRead;
    byte[] ByteArray = new byte[count];
    port.Read(ByteArray, 0, count);
} 
```

但有时我仍然会丢失一些数据。我尝试了不同的方式来读取事件处理程序中的数据，但没有运气。

由于 .NET 4.5 为执行一些异步任务带来了新的可能性，例如似乎可以在 SerialPort 流上使用的[ReadAsync](http://msdn.microsoft.com/en-us/library/hh137813.aspx)方法，我很想知道处理这些情况的推荐方法是什么。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-07T00:27:48.080

您可以尝试这样的事情吗？例如，我认为您想要使用的是**port.ReadExisting()**方法

```
 using System;
 using System.IO.Ports;

 class SerialPortProgram 
 { 
  // Create the serial port with basic settings 
    private SerialPort port = new   SerialPort("COM1",
      9600, Parity.None, 8, StopBits.One); 
    [STAThread] 
    static void Main(string[] args) 
    { 
      // Instatiate this 
      SerialPortProgram(); 
    } 

    private static void SerialPortProgram() 
    { 
        Console.WriteLine("Incoming Data:");
         // Attach a method to be called when there
         // is data waiting in the port's buffer 
        port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived); 
        // Begin communications 
        port.Open(); 
        // Enter an application loop to keep this thread alive 
        Console.ReadLine();
     } 

    private void port_DataReceived(object sender, SerialDataReceivedEventArgs e) 
    { 
       // Show all the incoming data in the port's buffer
       Console.WriteLine(port.ReadExisting()); 
    } 
} 
```

还是你想根据你想做的事情来做，你可以试试这个

```
public class MySerialReader : IDisposable
{
  private SerialPort serialPort;
  private Queue<byte> recievedData = new Queue<byte>();

  public MySerialReader()
  {
    serialPort = new SerialPort();
    serialPort.Open();
    serialPort.DataReceived += serialPort_DataReceived;
  }

  void serialPort_DataReceived(object s, SerialDataReceivedEventArgs e)
  {
    byte[] data = new byte[serialPort.BytesToRead];
    serialPort.Read(data, 0, data.Length);
    data.ToList().ForEach(b => recievedData.Enqueue(b));
    processData();
  }

  void processData()
  {
    // Determine if we have a "packet" in the queue
    if (recievedData.Count > 50)
    {
        var packet = Enumerable.Range(0, 50).Select(i => recievedData.Dequeue());
    }
  }

  public void Dispose()
  {
        if (serialPort != null)
        {
            serialPort.Dispose();
        }
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-06T21:28:28.587

我使用了与@MethodMan 类似的代码，但我必须跟踪串口发送的数据并查找终止字符以了解串口何时完成发送数据。

```
private string buffer { get; set; }
private SerialPort _port { get; set; }

public Port() 
{
    _port = new SerialPort();
    _port.DataReceived += new SerialDataReceivedEventHandler(dataReceived);
    buffer = string.Empty;
}

private void dataReceived(object sender, SerialDataReceivedEventArgs e)
{    
    buffer += _port.ReadExisting();

    //test for termination character in buffer
    if (buffer.Contains("\r\n"))
    {
        //run code on data received from serial port
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-17T05:01:10.703

```
 using System;
    using System.IO.Ports;
    using System.Threading;

    namespace SerialReadTest
    {
        class SerialRead
        {
            static void Main(string[] args)
            {
        Console.WriteLine("Serial read init");
        SerialPort port = new SerialPort("COM6", 115200, Parity.None, 8, StopBits.One);
        port.Open();
        while(true){
          Console.WriteLine(port.ReadLine());
        }

    }
}
} 
```

# java - 在 WorldWind Java 中限制相机视图

> ID：13754695
> 
> 赞同：2
> 
> 时间：2012-12-06T23:45:45.387
> 
> 标签：java, camera, worldwind

我一直在搜索文档和示例，但没有看到任何好的演示向我展示我想做的事情：

如何将 World Wind Java 中的视图限制在特定区域？就像允许用户移动世界一样，但只能通过一个小区域。在我的情况下，删除移动相机并将视图设置到特定位置的功能会起作用，但这样做似乎浪费了 WWJ 令人难以置信的查看功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:35:09.230

实际上在 gov.nasa.worldwindx.examples 中有一个如何执行此操作的示例（我只是在查看演示）：ViewLimits。

可以将`WorldWindowGLCanvas`的视图投射到`OrbitView`. 然后可以这样应用限制：

```
OrbitView viewbounds = (OrbitView)wwd.getView();
if (viewbounds != null)
{
    OrbitViewLimits limits = viewbounds.getOrbitViewLimits();
    if (limits != null)
    {
        viewLimit = new Sector();// Fill with appropriate bounds
        limits.setCenterLocationLimits(viewLimit);
        limits.setPitchLimits(Angle.fromDegrees(0), Angle.fromDegrees(90));
        //^in degrees downward from looking directly at the earth
        limits.setHeadingLimits(Angle.ZERO, Angle.ZERO);// rotation cw or ccw
        limits.setZoomLimits(minZoom, maxZoom);// in meters
        BasicOrbitViewLimits.applyLimits(viewbounds, limits);
    }
} 
```

# php - 在带有子行的表中显示mysql结果？

> ID：13754701
> 
> 赞同：0
> 
> 时间：2012-12-06T23:46:35.140
> 
> 标签：php, html, mysql

我想我可能已经过头了。我拥有的是 mysql 中的两个表，它们有一个共同的字段。我想在一个表中显示一条记录，其中的行或列表由公共字段所共有的所有这些记录组成。

详细地说，我有一张带有图像的纱线表和一张带有图像的图案表。我想在一行中显示模式及其信息，然后在其下方显示与排序子行中的公共重量字段匹配的所有纱线图像。

我还通过复选框组选择图案的颜色和类别。

这是我的复选框组

```
<input type="checkbox" name="color[]" value="Black">Black
<input type="checkbox" name="color[]" value="Blue">Blue
<input type="checkbox" name="color[]" value="Brown">Brown
<input type="checkbox" name="color[]" value="Green">Green
<input type="checkbox" name="color[]" value="Grey">Grey
<input type="checkbox" name="color[]" value="Orange">Orange
<input type="checkbox" name="color[]" value="Pink">Pink
<input type="checkbox" name="color[]" value="Purple">Purple
<input type="checkbox" name="color[]" value="Red">Red
<input type="checkbox" name="color[]" value="Teal">Teal
<input type="checkbox" name="color[]" value="White">White
<input type="checkbox" name="color[]" value="Yellow">Yellow

<input type="checkbox" name="pattcat[]" value="Home Decor">Home Decor
<input type="checkbox" name="pattcat[]" value="Children">Children
<input type="checkbox" name="pattcat[]" value="Tops Women">Tops Women
<input type="checkbox" name="pattcat[]" value="Accessories">Accessories
<input type="checkbox" name="pattcat[]" value="Lace">Lace
<input type="checkbox" name="pattcat[]" value="Tops Men">Tops Men 
```

这是我迄今为止的结果查询和显示表。我将所有图像名称保存在 mysql 表中并链接到路径。

```
extract($_GET);

$query = "(SELECT tblPatterns.PatternName, tblPatterns.Needlesize, tblPatterns.FinishedSize, tblPatterns.YardageNeeded, tblPatterns.PatternImage, tblYarn.YarnImage FROM tblYarn, tblPatterns WHERE tblYarn.WeightCategory=tblPatterns.WeightCategory && Color IN ('" . implode("','",$color) . "') && Category IN ('" . implode("','",$pattcat) . "') ORDER BY `tblPatterns`.`PatternName` ASC)" ;
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

// Printing results in HTML
echo "<table border='1'>\n";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo "\t<tr>\n";
foreach ($line as $col_value) {
echo "\t\t<td>$col_value</td>\n";
 }
echo "<td><img src=./images/$col_value width='150' height='150' border='3' ></td>";

echo "\t</tr>\n";
}
echo "</table>\n"; 
```

我想我可能必须更改 foreach ($line as $col_value) 部分。有没有办法建立一个表并准确选择哪些数据去哪里以及是否重复？就像在图像中重复的纱线下的行及其相应的图案数据一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:27:59.260

我认为这就是你想要的：

```
$last_pattern = null;
while ($line = mysql_fetch_assoc($result, MYSQL_ASSOC)) {
  $col_count = count($line) - 1; // Subtract 1 because image isn't in a column
  if ($line['PatternName'] !== $last_pattern) {
    if ($last_pattern !== null) {
      echo "</td></tr>\n";
    }
    echo "<tr>\n  ";
    foreach ($line as $col_name => $col_value) {
      switch ($col_name) {
      case 'YarnImage':
        break;
      case 'PatternImage':
        echo "<td><image src='images/$col_value' /></td>";
        break;
      default:
        echo "<td>$col_value</td>";
      }
    }
    $last_pattern = $line['PatternName'];
    echo "</tr>\n  <tr><td colspan='$col_count'>\n";
  }
  $yarn_image = $line['YarnImage'];
  echo "    <img src='images/$yarn_image' width='150' height='150' border='3'/>\n";
}
if ($last_image !== null) {
  echo "</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:51:42.170

您需要使用 tblYarn 加入 tblPatterns :)

[http://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

此外，图像 TD 在 foreach 之外，因此它不会在 $col_value 之前循环。

# url - Drupal URL 别名 = 损坏的链接

> ID：13754711
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:47:32.737
> 
> 标签：url, drupal, url-rewriting

我目前正在运行 Drupal 7.16，每次在创建基本页面时尝试设置 URL 别名时，我都会得到一个断开的链接。该链接只是别名部分，因此是不正确的 URL。

例如

什么链接应该是这样的：www.example.com/alias_name

发生了什么：/alias_name

当我访问应该是正确的 URL 时，我会收到一个 404 页面。

我已经对此进行了一段时间的搜索，我发现的唯一结果是人们试图通过分类法生成别名，而我并不想这样做。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:32:03.987

如果您可以提供更多信息或屏幕截图，这可能会更有帮助，因为这有点模糊。

如果您在创建新页面时尝试创建别名，请尝试使用[Pathauto](http://drupal.org/project/pathauto)模块。

如果您尝试将别名添加到现有页面 example.com/admin/config/search/path/add，只需输入您现有的路径/节点 ID，然后输入您想要的别名。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:47:31.877

不要在您键入的别名的开头放置 /。

# javascript - 为什么谷歌网站管理员工具看不到我网站的静态版本，而是动态版本的模板？

> ID：13754712
> 
> 赞同：15
> 
> 时间：2012-12-06T23:47:33.353
> 
> 标签：javascript, search-engine, meteor, google-search-console

我已将可蜘蛛程序包添加[到](http://docs.meteor.com/#spiderable)我的 Meteor 应用程序中，并且在使用 url 发出请求时返回页面的 html 版本`?_escaped_fragment_=`，但我无法让 Google 抓取该站点。

## 细节

在[Google Webmaster Tools](https://www.google.com/webmasters/tools)中使用[Fetch as Google](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587)并请求根页面时，页面返回的是 javascript 版本；就像是：`"http://example.com/"`

```
HTTP/1.1 200 OK
content-type: text/html; charset=utf-8
date: Fri, 30 Nov 2012 05:39:36 GMT
connection: Keep-alive
transfer-encoding: chunked

<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/e83157bdc4ff057fa3a20b82af4c11b4ebe776e7.css">
    <script type="text/javascript">
      __meteor_runtime_config__ = {"ROOT_URL":"http://www.example.com","DEFAULT_DDP_ENDPOINT":"https://www-example-com-ddp.meteor.com/"};
    </script>
    <script type="text/javascript" src="/13cf3d21ce1c4a88407ca5f3c250f186ab1738f9.js"></script>
    <meta name="fragment" content="!">
    <title>example.com</title>
  </head>
<body>
</body>
</html> 
```

如果相反，我请求`http://example.com/?_escaped_fragment_=`返回 html 版本：

```
HTTP/1.1 200 OK
content-type: text/html; charset=UTF-8
date: Wed, 05 Dec 2012 02:44:09 GMT
connection: Keep-alive
transfer-encoding: chunked

<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/e83157bdc4ff057fa3a20b82af4c11b4ebe776e7.css">
    <title>example.com</title>
    <meta name="viewport" content="initial-scale=1.0">
  </head>
  <body>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/one">One</a></li>
      <li><a href="/two">Two</a></li>
    </ul>
  </body>
</html> 
```

## 问题

*   你如何告诉谷歌添加`?_escaped_fragment_=`到 url，以便它呈现 html 版本？

*   `?_escaped_fragment_=` 如果 url*没有*hashbangs ( *!#* )， Google 是否还会将 url 添加到 url 中？即`/home`，`/products/1`而不是`/!#home`，`/!#products/1`？

*   你如何让谷歌跟随链接的页面？并附加`?_escaped_fragment_=`? 页面的所有 js 版本都`<meta name="fragment" content="!">`在页眉中。我认为这就是所有需要的。

似乎最简单的解决方案是更新可蜘蛛包以将 html 版本返回给 Google Bot，而不是要求`?_escaped_fragment_=`，但如果这对其他人有用，我很好奇我做错了什么。

## 附加信息

> [Meteor 的可爬取程序包](http://docs.meteor.com/#spiderable)是一种临时解决方案，允许网络搜索引擎索引 Meteor 应用程序。

根据[消息来源](https://github.com/meteor/meteor/tree/master/packages/spiderable)，它做了一些事情：

1.  它将以下标签添加到`head`页面的 js 版本部分：

    `<head><meta name="fragment" content="!"></head>`

2.  使用[PhantomJS](http://phantomjs.org/)解析 javascript 应用程序并在满足以下任一条件时返回 html 版本：

    一种。请求用户代理是`"facebookexternalhit"`

    湾。请求的 url 包含字符串`?_escaped_fragment_=`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:07:40.897

我相信这是一个“谷歌网站管理员工具”错误。

谷歌似乎确实在抓取该网站——这些页面出现在谷歌搜索结果中。然而，谷歌网站管理员工具仍然将总索引页面列为 1。但是，Bing 仍然没有抓取该页面。

**编辑：** 它的谷歌网站管理员工具页面被列为

> **未选中：**由于与其他页面基本相似而未编入索引的页面，或者已被重定向到另一个 URL 的页面。[更多信息](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066)。

**EDIT2：**针对乔纳坦的问题：

### `?_escaped_fragment_=`如果 url 没有 hashbangs (!#)，Google 是否仍会将 url 添加到 url？

是的。我的应用程序没有在 url 中使用 hashbangs (!#)。并且 Google bot`?_escaped_fragment_=`在抓取时仍然会附加。以下是日志示例：

```
INFO HIT /url/2/01 66.249.72.42
INFO HIT /url/2/01?_escaped_fragment_= 66.249.72.142
INFO HIT /url/2/01 108.162.222.82
INFO HIT /url/2/01?_escaped_fragment_= 108.162.222.82
INFO HIT /url/2/05 108.162.222.82
INFO HIT /url/2/05?_escaped_fragment_= 108.162.222.214 
```

Google bot 似乎会尝试使用和不使用`?_escaped_fragment_=`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:37:19.270

任何没有以 开头的哈希片段的页面`#!`，例如主页，都需要这个：

```
 <meta name="fragment" content="!"> 
```

通知爬虫获取丑陋的 url（那个`with _escaped_fragment_=`）。显然它进入了该`<head>`部分。

更新：我注意到根据您问题末尾给出的插件描述，添加了上述元标记，您可以通过显示源代码来检查它是否包含在您的页面中。

通常，除了主页之外的所有其他页面都应该`www.yoursite.com/#!hashfragment`在漂亮的 URL 中包含类似的内容，其中`!`hash( `#`) 之后的内容作为爬虫的通知器，因此您不需要包含上面提到的元标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T07:26:27.593

我知道这个问题已经得到解答，但是对于从谷歌来这个问题的人来说。我想包括这个关于这个主题的截屏视频。

这帮助我理解了流星蜘蛛包。 [https://www.eventedmind.com/tracks/feed-archive/meteor-the-spiderable-package](https://www.eventedmind.com/tracks/feed-archive/meteor-the-spiderable-package)

# mysql - 时间段SQL查询

> ID：13754713
> 
> 赞同：1
> 
> 时间：2012-12-06T23:47:33.580
> 
> 标签：mysql, sql, aggregation

我有一张这样的桌子：

```
---------------------------------------------
|Id | Step                  | StartedAt     |
---------------------------------------------
| 1 | Download Data         | 10:20:00      |
| 2 | Data Quality Control  | 10:45:00      |
| 3 | Run Prediction        | 10:47:00      |
--------------------------------------------- 
```

什么是 SQL 查询，它告诉我每个步骤的时间，如下所示：“下载数据”需要 25 分钟，“数据质量控制”需要 2 分钟等等。

干杯。

**PS我的RDBMS是MySQL。**有没有办法在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:52:11.307

您应该使用[`datetime`or`timestamp`](http://dev.mysql.com/doc/refman/5.6/en/datetime.html)而不是`time`使这项工作跨越日期边界。看评论。

### 大多数 RDBMS 的标准 SQL

为此使用**窗口函数**。目前已在最著名的 RDBMS（MySQL 除外）中实现：

```
SELECT *
     ,lead("StartedAt") OVER (ORDER BY "StartedAt") - "StartedAt" AS duration
FROM  tbl; 
```

`lead()`根据子句中的顺序检索*下一行的值。*`ORDER BY`对于没有“下”行的最后一行，您得到`NULL`.

我引用了[PostgreSQL 关于窗口函数的手册](http://www.postgresql.org/docs/current/interactive/functions-window.html)，因为您没有命名您的 RDBMS。

### MySQL

在没有窗口函数的情况下，一种方法是使用相关子查询：

```
SELECT t1.*
     ,(SELECT t2."StartedAt"
       FROM tbl t2
       WHERE t2.id > t1.id
       ORDER BY t2."StartedAt"
       LIMIT 1) - "StartedAt" AS duration
FROM  tbl t1; 
```

或者这可能更快：

```
SELECT t1."Id", t1."Step", t1."StartedAt"
      ,TIMESTAMPDIFF(MINUTE, t1."StartedAt", min(t2."StartedAt")) AS minutes
FROM   tbl t1
LEFT   JOIN tbl t2 ON t2."Id" > t1."Id"
GROUP  BY t1."Id", t1."Step", t1."StartedAt"; 
```

[-> sqlfiddle 与两个查询。](http://sqlfiddle.com/#!2/99be1/12)

手册关于[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_timestampdiff)或[`TIMEPDIFF()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_timediff)

如果您的`Id`列将上升而没有间隙，这会更简单。但在现实生活中这种情况很少见。

# jquery - 单击某物后从搜索栏中删除文本

> ID：13754715
> 
> 赞同：1
> 
> 时间：2012-12-06T23:47:42.857
> 
> 标签：jquery, text, replace

虽然标题看起来简单明了，但我想做的却比看起来要多一点。

我拥有的是一个搜索框，用于在我的网站上搜索用户，向其发送消息。它返回一个用户列表，然后您单击要向其发送消息的用户。单击所述用户后，我将用户附加到一个`li`（顺便说一下，这是一个 contentEditable div），然后允许用户继续搜索其他用户。这一切都按我的意愿工作，我现在要做的是从搜索框中删除纯文本。

因此，如果有人键入“Rober”然后单击用户“Robert Smith”，它应该删除所有未包含在`li`元素中的纯文本。

我相信这会是这样说的：

```
$("div.search").clone().children().remove().end().text(); 
```

我在搜索时使用它来过滤`li`文本等。

在一个非工作示例中，我会说它应该是这样的：

```
var text = $("div.search").clone().children().remove().end().text();

$("div.search").find(text).notIn("li").remove(); 
```

**编辑**

与其搜索要删除的确切文本，不如仅重新删除所有未包含在`li`元素中的文本可能会更好、更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:51:43.340

```
$('div.search').find(':not(li):contains(' + text + ')').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:05:01.403

不知道这是否是您正在寻找的，但是：

```
var d = $('<div>');
$('div.search').children().appendTo(d);
$('div.search').html('').append(d.children()); 
```

这将保留所有 html 元素并删除不在节点内的所有其他文本。你可以过滤孩子只保留“li”

# ruby-on-rails - ActiveRecord 接受_nested_attributes 和回调

> ID：13754723
> 
> 赞同：0
> 
> 时间：2012-12-06T23:48:09.843
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

班级

```
class Post < ActiveRecord::Base
  accepts_nested_attributes_for :comments
  accepts_nested_attributes_for :authors
  has_many :comments
  has_many :authors
end

class Author < ActiveRecord::Base
  belongs_to :post
end

class Comment < ActiveRecord::Base
  attr_accessible :disabled
  belongs_to :post
  before_create :set_disabled

  def set_disabled
    if self.post.authors.first.name == "Foo"
      self.disabled == true
    end
  end
end 
```

创建具有嵌套属性的新帖子

```
params = {
  post: {
    title: "A New Post", 
    comments_attributes: [
      { body: "This is a great post" }
    ], 
    authors_attributes: [
      {name: "Foo"}
    ]
  }
}

a = Post.create(params) 
```

我们在回调中得到一个错误，因为即使它们在内存中`set_disabled`，注释也无法访问。`post.authors`

我们目前的解决方案是将它们从`ObjectSpace`. 必须有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:03:40.000

您的模型只需稍作改动。只需在关联后添加nested_attributes

```
class Post < ActiveRecord::Base
  has_many :comments
  has_many :authors
  accepts_nested_attributes_for :comments
  accepts_nested_attributes_for :authors

  attr_accessible :comments_attributes, :authors_attributes, :title .....

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:12:33.717

我不确定你是否会从另一边获得更好的运气*（我目前无法测试）*`Post` ，但是从本身尝试这个怎么样：

```
class Post < ActiveRecord::Base
  # your associations ...

  before_create do
    comments.each do |c|
      c.disabled = true
    end if authors.first.name == "Foo"
  end
end 
```

# python - 我可以在不安装 Python 的情况下为 RobotFramework 安装 Selenium2Library 吗？

> ID：13754725
> 
> 赞同：0
> 
> 时间：2012-12-06T23:48:11.160
> 
> 标签：python, jython, robotframework

如果我只有 Jython，我可以使用 Selenium2Library 吗？也就是说，我还没有安装 Python，并希望摆脱不需要它。我已经阅读了相互矛盾的信息，但是 jybot 不能使用 selenium2library，我需要 pybot 才能使用它。

如果 jybot 不能使用 selenium2Library，有没有办法让 jybot 以某种方式调用 pybot？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:45:09.600

因此，经过一些阅读和反复试验，只要您使用 jython 2.7+，就可以仅将 Selenium2Library 与 Jython 一起使用...... jython 2.5.x 与 Selenium2Library 不兼容。

因此，您可以完全不使用 Python：

1.  安装 jython 2.7+
2.  安装 ez_setup.py
3.  安装机器人框架
4.  安装 Selenium2Library。

# html - 如何使导航菜单出现在标题内？

> ID：13754731
> 
> 赞同：1
> 
> 时间：2012-12-06T23:48:33.743
> 
> 标签：html, css, menu, navigation

使用下面的代码，我可以形成一个标题和一个容器。在 Mac 上，导航菜单 (ul/li) 在标题中完整显示。我在 Mac 上，但是当我在 Windows 计算机上查看页面时，搜索框和 #other_navigation 出现在标题下方。

我不确定这里有什么问题？我很确定它与 #boxer 和 #other_navigation 菜单的 css 格式有关，但不确定是什么。

HTML：

```
 <div id="nav_holder">
 <img src="/logo.png" id="logo_holder" height="50">
 <div id="navigation">
 <ul>
 <li><a href="#">Home</a></li>
 <li><a href="#">Profile</a></li>
 <li><a href="#">Friends</a></li>
 <li><a href="#">Contacts</a></li>
 <li><form action="#" method="post"></li>
 <input id="boxer" type="text">
 </form>
 </ul>
 </div>
 <div id="other_navigation">
 <ul id="other_navi_holder">
 <li><a href="#">Settings</a></li>
 <li><a href="#">Logout</a></li>
 </ul></div>
 </div>
 <div id="centering">
 </div> 
```

CSS：

```
 body {
 margin: 0px;
 padding: 0px;
 }
 #logo_holder {
 margin-left: 80px;
 float:left;
 }
 #nav_holder {
 background-color: #888888;
 height: 40px;
 min-width: 100%;
 padding: 15px 0px;
 }
 #navigation {
 float:left;
 margin-left: 33px;
 }
 ul {
 margin: 0;
 padding: 0;
 list-style-type: none;
 line-height: 40px;
 }
 li {
 display:inline;
 padding: 30px;
 }
 #centering {
 background-color: #000000;
 margin-top: 30px;
 margin-left: auto;
 margin-right: auto;
 min-height: 500px;
 width: 700px;
 }
 #boxer {
 padding-left: 10px;
 margin-left: 513px;
 width: 200px;
 height:20px;
 position:absolute;
 margin-top: -30px;
 }
 #other_navigation {
 margin-left: 280px;
 float:left;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:43:23.047

```
#nav_holder {
position:absolute
top:0
background-color: #888888;
height: 40px;
min-width: 100%;
padding: 15px 0px;
}
#navigation {
position:absolute
top:0
#navigation {
float:left;
margin-left: 33px;
} 
```

确保添加

```
position:absolute
top:0 
```

对于这两者，尽管“top：0”可以是任何东西，但请确保它们相同。例如，如果您希望它居中，请将其设置为“top:30%”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:58:12.190

浏览器和操作系统之间奇怪的渲染不匹配可能是某处无效代码的标志。确实，您在`<div id="navigation>`. 将其更改为`<div id="navigation">`. 使用代码验证器 - [http://validator.w3.org/](http://validator.w3.org/)或[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/) - 是轻松识别这些问题的好方法。

# mysql - MySQL 全文或独特的 varchar 性能

> ID：13754734
> 
> 赞同：1
> 
> 时间：2012-12-06T23:48:52.660
> 
> 标签：mysql, performance, full-text-search, varchar

方法#1（全文）：

```
CREATE TABLE `addresses` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `mail` text NOT NULL,
  PRIMARY KEY  (`id`),
  FULLTEXT KEY `mail` (`mail`)
); 
```

通过搜索找出存在：

```
SELECT * FROM addresses WHERE MATCH(email) AGAINST('"name@example.com"' IN BOOLEAN MODE) 
```

或方法#2（唯一的varchar）：

```
CREATE TABLE `addresses` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `mail` varchar(100) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `mail` (`mail`)
); 
```

用插入找出存在：

```
INSERT INTO `addresses` (`id`, `mail`) VALUES (NULL ,  'name@example.com'); 
```

如果失败则存在：

```
#1062 - Duplicate entry 'name@example.com' for key 2 
```

哪种方法更适合找出数千行中存在的邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:52:39.300

方法 3（使用唯一的 varchar）更好：

```
SELECT * FROM addresses WHERE email = 'name@example.com' 
```

全文搜索完全匹配并不是一个好主意，并且使用插入来测试是否存在某些东西是错误的（尽管如果您打算无论如何都插入它是正确的）。

请注意，唯一约束可能不区分大小写，具体取决于编码。如果您使用 utf-8-bin 它将是碱基敏感的。

# content-management-system - Orchard CMS--无法查看自定义类型的字段

> ID：13754735
> 
> 赞同：1
> 
> 时间：2012-12-06T23:48:59.607
> 
> 标签：content-management-system, orchardcms

我正在学习 Orchard CMS 并尝试创建自定义类型。我遵循了各种教程，创建了模型类和 Migration.cs，并且能够看到我的部分显示在 Orchard 上列出的内容部分下。

![在此处输入图像描述](../Images/52485a279cc1d2e3e4bfbf16742617f0.png)

然后我添加了驱动程序、处理程序、视图和placement.info。但是，当我创建或查看包含我的零件的项目时，我无法看到我的新零件的字段——该项目在我的零件字段应该存在的地方是空的。

![在此处输入图像描述](../Images/75c5b21b2ec4ff2b3444ac35078359f9.png)

这是我的视图/零件/Event.cshtml：

```
@using Orchard.ContentManagement.ViewModels
@using Orchard.ContentManagement
@using Orchard.Core.Common.Models
<div class="event-container">
    <div class="event-text">
        <p>Event Name: @Model.EventName</p>
    </div>
    <div>
        <p>Event ID: @Model.EventID</p>
    </div>
    <div>
        <p>Description: @Model.Description</p>
    </div>
</div> 
```

这是我的视图/EditorTemplates/Event.cshtml：

```
@using System.Web.Mvc.Html
@using Orchard.Event.Models
@model Orchard.Event.Models.EventPart
<fieldset>
    <legend>@T("Event Fields")</legend>

    <div class="editor-field">
        @Html.LabelFor(x => x.EventName, T("Event Name"))
        @Html.EditorFor(x => x.EventName)
        @Html.ValidationMessageFor(x => x.EventName)
    </div>
    <div class="hint">@T("Enter the Event Name")</div>

    <div class="editor-field">
        @Html.LabelFor(x => x.EventID, T("Event ID"))
        @Html.EditorFor(x => x.EventID)
        @Html.ValidationMessageFor(x => x.EventID)
    </div>
    <div class="hint">@T("Enter the Event ID")</div>

     <div class="editor-field">
        @Html.LabelFor(x => x.Description, T("Description"))
        @Html.EditorFor(x => x.Description)
       @Html.ValidationMessageFor(x => x.Description)
    </div>
    <div class="hint">@T("Enter the Description")</div>

</fieldset> 
```

司机：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Drivers;
using Orchard.ContentManagement.Handlers;
using Orchard.Event.Models;

namespace Orchard.Event.Drivers
{
    public class EventPartDriver : ContentPartDriver<EventPart>
    {
        protected override string Prefix
        {
            get
            { return "Event"; }
        }

        protected override DriverResult Editor(EventPart part, dynamic shapeHelper)
        {
            return ContentShape("Parts_Event_Edit", () => shapeHelper
                .EditorTemplate(TemplateName: "Parts/Event", Model: part,     Prefix: Prefix));
    }

    protected override DriverResult Editor(EventPart part, IUpdateModel updater, dynamic shapeHelper)
    {
        updater.TryUpdateModel(part, Prefix, null, null);
        return Editor(part, shapeHelper);
    }

    protected override DriverResult Display(EventPart part, string displayType, dynamic shapeHelper)
    {
        return ContentShape("Parts_Event",
            () => shapeHelper.Parts_Event(
                EventName: part.EventName,
                EventID: part.EventID,
                Description: part.Description
                ));
    }
} 
```

}

安置信息：

```
<Placement>
<place Parts_Event="Content:10"/>
<place Parts_Event_Edit="Content:7.5"/>
</Placement> 
```

任何想法将不胜感激；我已经将这些与教程进行了比较，纸上的一切似乎都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:09:47.667

有两件事是错误的：

1.  您的编辑器视图应该在`Views/EditorTemplates/Parts`评论中建议的 Bertrand
2.  您尚未添加该部分的处理程序 - 在此处查看更多信息 - [http://docs.orchardproject.net/Documentation/Creating-a-module-with-a-simple-text-editor#AddingaHandler](http://docs.orchardproject.net/Documentation/Creating-a-module-with-a-simple-text-editor#AddingaHandler)

# jsp - 如何跳过在 JSP 中使用 display:table 标签创建的表中显示一行

> ID：13754737
> 
> 赞同：1
> 
> 时间：2012-12-06T23:49:12.680
> 
> 标签：jsp, struts2

我正在使用 strut2-JSP 生成报告。在该报告中，我试图跳过显示表中具有特定“groupName”的某些行，但在计算列中的总数时需要包含该行的信息或行。![我的报告大致如下表所示][1]

**组名 |Net Total**
Multi_species category | $300 多
物种类别 | 400 美元多
物种类别小计 | 700 美元

***但我必须显示如下：***

**组名 |Net Total**
Multi_species 类别小计 | 700 美元

例如：我试图摆脱具有组名“Multi_species category”但想保留计算总数的行（“Multi_species category subTotal”）的行。尝试在表内使用“如果”条件不起作用。请让我知道我做错了什么。这是生成此表的示例代码：

```
<display:table id="reportTable"
                   name="tableData"
                   requestURI=""
                   cellspacing="0px"
                   export="true"
                   class="displaytagTable">

        <display:setProperty name="decorator.media.pdf"
                             value="expenditures.decorator.ItextTotalSpeciesDecorator"/>

        <c:if test="${ !( groupName == \"Multi_species category\") }">

            <display:column title="Group Name" property="groupName" group="1"/>

            <display:column title="Net Total" property="total" class="alignRight"
                            decorator="expenditures.decorator.DollarDecorator"
                            total="true"/>

        </c:if>

</display:table> 
```

如果需要更多信息，请告诉我。提前致谢

**此外，我在该行遇到错误：**

```
<c:if test="${ !( groupName == \"Multi_species category\") }"> 
```

- 我应该如何在这里比较字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:20:03.667

我最终通过向该特定行中的每一列添加一个类并删除了列的父级来解决了这个问题。这是示例的链接：

[如何使用 JQuery 从表中删除一行](https://stackoverflow.com/questions/13807316/how-to-remove-a-row-from-a-table-using-jquery/13807571#13807571)

感谢您尝试帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:06:48.013

```
<s:if test="!groupName.equals('Multi_species category')">
   Expression True
</s:if>
<s:else>
   Expression False
</s:else> 
```

# bash - 用于读取 samba 配置的 Linux Bash 脚本

> ID：13754746
> 
> 赞同：0
> 
> 时间：2012-12-06T23:50:00.420
> 
> 标签：bash, samba

我正在尝试创建一个 bash 脚本，该脚本将读取 samba 配置，遍历不同的“部分”并在设置变量时采取行动

这是一个示例配置：

```
[global]
    workgroup = METRAN
    encrypt passwords = yes
    wins support = yes
    log level = 1 
    max log size = 1000
    read only = no
[homes] 
    browsable = no
    map archive = yes
[printers] 
    path = /var/tmp
    printable = yes
    min print space = 2000
[music]
    browsable = yes
    read only = yes
    path = /usr/local/samba/tmp
[pictures]
    browsable = yes
    read only = yes
    path = /usr/local/samba/tmp
    force user = www-data 
```

这是我想做的事情（我知道这种语法是一种真正的语言，但它应该给你一个想法：

```
#!/bin/sh
#
CONFIG='/etc/samba/smb.conf'
sections = magicto $CONFIG    #array of sections
foreach $sections as $sectionname       #loop through the sections
  if $sectionname != ("homes" or "global" or "printers")
    if $force_user is-set
       do something with $sectionname and with $force_user
    endif
    else
       do something with $sectionname
    endelse
  endif
endforeach 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:09:42.900

这将读取每个部分并获取键值对。

```
#!/bin/bash
CONFIG='/etc/samba/smb.conf'
for i in homes music; do
    echo "$i"
    sed -n '/\['$i'\]/,/\[/{/^\[.*$/!p}' $CONFIG | while read -r line; do
        printf "%-15s : %s\n" "${line%?=*}" "${line#*=?}"
    done
done 
```

**输出**

```
homes
browsable  : no
map archive : yes
music
browsable  : yes
read only  : yes
path       : /usr/local/samba/tmp 
```

**解释**

*   `sed -n '/\['$i'\]/,/\[/{/^\[.*$/!p}'`

    1)`/\['$i'\]/,/\[/`匹配`[]`直到下一个之间的部分名称`[`

    2)`{/^\[.*$/!p}`匹配行首，`^`后跟`[`零个或多个字符`.*`，直到行尾`$`，如果匹配不打印`!p`

*   `${line%?=*}`从末尾（右）修剪字符串，直到第一个`=`和任何字符`?`

*   `${line#*=?}`从开始（左）到第一个`=`和任何字符修剪字符串`?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:21:45.460

使用 Perl：

```
use strict;
use warnings;

sub read_conf {
  my $conf_filename = shift;
  my $section;
  my %config;
  open my $cfile, "<", $conf_filename or die ("open '$conf_filename': $!");
  while (<$cfile>) {
    chomp;
    if (/^\[([^]]+)]/) {
      $section = $1; 
    } else {
      my ($k, $v) = split (/\s*=\s*/);
      $k =~ s/^\s*//;
      $config{$section}{$k} = $v; 
    }   
  }
  close $cfile;
  return \%config;
}

sub main {
  my $conf_filename = '/etc/samba/smb.conf';
  my $conf = read_conf($conf_filename);
  foreach my $section (grep { !/homes/ and !/global/ and !/printers/} keys %$conf) {
    print "do something with: $section\n";
    foreach my $key (keys %{$conf->{$section}}) {
      my $val = $conf->{$section}{$key};
      print "$key is $val in $section\n";
    }   
  }
}

main; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:29:15.957

如果你熟悉 Perl，你可以看看 Config::Std

[http://metacpan.org/pod/Config::Std](http://metacpan.org/pod/Config::Std)

对这个问题的赞美：[如何在 Perl 中找到与正则表达式的所有匹配项？](https://stackoverflow.com/questions/1723440/how-can-i-find-all-matches-to-a-regular-expression-in-perl)

# php - 正则表达式匹配字符串的一部分

> ID：13754755
> 
> 赞同：0
> 
> 时间：2012-12-06T23:50:46.753
> 
> 标签：php, regex

从 curl 获取页面后，我试图将字符串的一部分匹配到变量中

字符串是

```
value="http://ca.isohunt.com/upload.php?mode=bt&id=880001&sid=3096d80a1c9d2962f8f35a837a3f23e0" 
```

我试图得到`&id=''`和`$sid=''`

我尝试使用 preg_match 使用这个正则表达式，但它没有用

```
/([^_]*?)&sid-.*?\$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:57:29.977

您不应该为此使用正则表达式。

如果您的输入字符串包含`value="`（以及`"`末尾的），则只需提取 URL。您可能可以使用以下方法最简单地执行此操作`substr`：

```
$url = substr($input, 7, -1); 
```

如果字符串比较多变，并且您只知道 URL 是引号内的内容，请使用：

```
preg_match('/".*"/', $input, $match);
$url = $match[0]; 
```

如果您`$input`只有 URL，您当然可以完全跳过此步骤。然后：

```
$query = parse_url($url, PHP_URL_QUERY);
$params = array();
parse_str($query, $params);

echo $params['mode'];  // bt
echo $params['id']; // 880001
echo $params['sid']; // 3096d80a1c9d2962f8f35a837a3f23e0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:56:26.900

采用`parse_url`

```
$url = 'http://username:password@hostname/path?arg=value#anchor';
$data = parse_url($url);
print_r(parse_url($url)); 
```

上面的示例将输出：

```
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```

然后：

```
 $queryFields = split('[&]', $data['query']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:15:49.923

`$`首先，除非您期望它出现在“值”字符串中，否则您不应该逃避它。

您的正则表达式可以是`/&?sid=([^&]+)/`and `/&?id=([^&]+)/`，前提是您不想对 url 本身进行任何检查。或结合：`/&?id=([^&]+).*&?sid=([^&]+)/`.

请记住，这些值将被导出到`$matches[1]`并且`$matches[2]`当你调用类似的东西时`preg_match('/&?id=([^&]+).*&?sid=([^&]+)/', $value, $matches);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T00:16:35.463

```
 if ($c=preg_match_all ("/.*?(id=)(\d+).*?(sid=)([a-zA-Z0-9_]{1,})/is", $txt, $matches))
  {
      $id=$matches[2][0];
      $sid=$matches[4][0];
      print "id = $id <br> sid = $sid\n";
  } 
```

这是可用于获取 2 个值的代码。这将为您提供 2 个参数的值。

# ios - fusioncharts ios onclick条形图应该带我到另一个窗口

> ID：13754760
> 
> 赞同：-1
> 
> 时间：2012-12-06T23:51:23.880
> 
> 标签：ios, graph, charts, ios6, fusioncharts

如何在 iOS 上使用融合图表实现这一点：点击（ONclick）栏应将我带到另一个窗口，其中包含有关那一年的信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:41:11.750

对列或条形数据定义使用链接属性。

例子：`<set value='100' label='label' link='n-drilldownpage.asp?Id=9' />`

# ruby-on-rails - 从 Rails 3.2 轮询外部应用程序

> ID：13754763
> 
> 赞同：2
> 
> 时间：2012-12-06T23:51:45.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, multithreading, long-polling, ruby-1.9.3

我发现很难从 Rails 3 中找到有关长轮询的信息。我们有一种情况，移动应用程序从 Rails JSON API 请求某些内容，而后者又从外部 API 请求某些内容。外部服务器保持状态在大约 30 秒后发生变化，Rails 服务器需要等待该变化并通知应用程序。在我看来，我们有两个选择：

1.  移动应用程序通过调用 /resource/status 之类的东西来轮询 Rails 服务器。当 Rails 服务器收到这个请求时，它会检查外部服务器上的状态，并将其返回给移动应用程序，由移动应用程序决定状态是否“准备就绪”

2.  移动应用程序向 Rails 服务器发送请求。Rails 服务器（以某种方式）轮询外部服务器，并且只要状态“准备就绪”，就会向移动应用程序发送推送

我理解 cronjobs 的任何时候 gem，但这更像是“每 X 秒执行一次，直到它准备好”之类的事情......并不真正适合 cronjob，因为轮询只在很短的时间内发生。我真正需要的是一个带有调用的循环`sleep`。这种方法必须为每个请求创建一个新线程，对吧？Rails 是否适合这些多线程需求？

网上有很多文章暗示 Rails 和多线程不混用，其中一些取决于你部署在什么服务器上，但我很难判断这些文章的有效性，特别是因为其中一些已经结束一岁。

所以我想底线是：我们应该选择选项#1，这似乎是最简单的选项吗？或者＃2，这更有意义，因为服务器正在完成所有工作，而移动应用程序只是等待推送？如果 #2，从 Rails 应用程序执行这种长轮询的最佳方法是什么？

# c# - 如何平滑索引中的数字列表？

> ID：13754769
> 
> 赞同：0
> 
> 时间：2012-12-06T23:52:16.960
> 
> 标签：c#, math, normalization

我在 C# 列表中有大约 1,000 个数字，它们代表一个索引，表示某事发生的可能性。我正在尝试生成一个图表，显示列表中项目之间的关系。在某些情况下，数据中存在“异常值”，这导致我的图表看起来非常混乱。因此，请考虑以下列表：

```
100
99
98
95
90
86
76
75
72
65
62
58
52
50
49
37
17
16
15
14
13
13
12
12
{ and then 800 more numbers between 1 and 12} 
```

如果我创建一个按比例缩放的列表，我最终会得到 10 个 50+ 的项目和 950 个小于 50 的项目。虽然事实上是正确的，但它让我的图表看起来非常糟糕。

有什么办法可以让这更有意义吗？IE 我可以以某种方式平滑数据，使异常值看起来不那么明显吗？

感谢您提供任何提示或指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:57:33.610

好吧，您可以应用一个窗口函数（Hamming/Hanning），它会对您的值进行加权平均并平滑它们。但是，我不确定您要代表什么，也许您可​​以删除异常值（值>平均值+ 2 * stddev）？

# jquery - 你如何改变这个div的宽度？

> ID：13754774
> 
> 赞同：0
> 
> 时间：2012-12-06T23:52:48.557
> 
> 标签：jquery, html

我希望 div 的宽度与当前的“iframe”相同，它使 div 的宽度更大！

提前致谢

```
<div id="box3" onmouseup="$('#box3').stop().animate({boxShadow: '10px 10px 15px', top: 0}, 'fast')" 
onmousedown="$('#box3').stop().animate({boxShadow: '3px 3px 3px', top: 3}, 'fast')" style="top: 0px;
box-shadow: 10px 10px 15px 0px rgb(102, 102, 102);">
<iframe width="700" height="525" id="SHADDOW" src="http://www.youtube.com/embed/LRo-L9zYf-M" frameborder="0" allowfullscreen="allowfullscreen"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:05:44.023

也许太明显了，但只要让它与 iframe 的宽度相同：

```
#box3 { width : 700px; } 
```

另一种可能的选择：

```
#box3 { float : left; } 
```

`float:left`可能会有您不想要的“副作用”，但您不必担心内容的宽度。

旁白：我强烈建议将您的脚本和 CSS*从*HTML 属性中移到外部 CSS 和 JavaScript 文件中。这样的代码很难维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:07:13.500

使用这个脚本：

```
<script>
$(function(){
$("#box3").css("width",$("#SHADDOW").css("width"));
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:07:15.387

```
<div id="box3" onmouseup="$('#box3').stop().animate({boxShadow: '10px 10px 15px', top: 0}, 'fast')" onmousedown="$('#box3').stop().animate({boxShadow: '3px 3px 3px', top: 3}, 'fast')" style="top: 0px;
width: 700px;
box-shadow: 10px 10px 15px 0px rgb(102, 102, 102);">
<iframe width="700" height="525" id="SHADDOW" src="http://www.youtube.com/embed/LRo-L9zYf-M" frameborder="0" allowfullscreen="allowfullscreen"></iframe>
</div> 
```

# linux - 通过 FTP 将文件添加到 git 存储库时，在脚本中使用 inotifywait 自动执行 git 提交

> ID：13754775
> 
> 赞同：0
> 
> 时间：2012-12-06T23:52:49.270
> 
> 标签：linux, git, web, workflow, inotify

我已经设置了一个类似于[http://joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)的 git 工作流。本质上，我有本地存储库，它们向裸露的远程存储库报告。然后，我可以通过 Web 访问我的部署目录，并将其设置为一个存储库，该存储库也向同一个裸存储库报告。

它使用 git hooks 设置，因此当本地开发人员将更改推送到远程存储库时，hook 进入 web 文件夹并从存储库中提取，因此它始终具有最新和最好的。一切都很好。

我的症结是我希望安抚那些不想让你使用 GIT 并且只想通过 FTP 将文件上传到 web 文件夹的人。我已经通过在 web 文件夹上设置一个 inotifywait 监视器来完成这个工作，以便每当文件被写入、修改、移动、删除、创建等时......我的 bash 脚本如下。

```
!/bin/sh
inotifywait @*.swp -rm -e modify,move,create,delete,delete_self,unmount /var/www/html/mysite | while read
do

now=$(date +"%m_%d_%Y:%T")
echo $now >> temp.txt

cd /var/www/html/mysite || exit
git add --all
git commit -m "ftp update $now" -a
done 
```

这实际上也有效，但我观察到的是，一旦我通过修改我的 web 文件夹中的文件触发 inotifywait，我就会陷入 while 循环。有人对此有任何想法吗？理想情况下会喜欢它做它的事情，而不是卡在 while 循环中不断运行不必要的 git 命令。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:07:58.313

[inotifywait](http://linux.die.net/man/1/inotifywait)的手册页建议您使用不同的循环样式：

```
while inotifywait -e modify /var/log/messages; do
    …
done 
```

你试过吗？

# c++ - 在 C++ 标准中，它在哪里指明了用它所代表的源代码替换类别描述的间距协议？

> ID：13754778
> 
> 赞同：10
> 
> 时间：2012-12-06T23:52:55.447
> 
> 标签：c++, c++11, standards

冒着提出一个被认为过于挑剔的问题的风险，我花了很长时间试图证明（作为在整个标准中在不同情况下发生的事情的一个例子）以下第`integer literal`2.14.2 节中的an 定义C++11 标准，特别是关于一个细节，即语法符号本身中空格的存在。

（请注意，这个例子 - 整数文字的定义 - 不是我的问题的重点。我的问题的重点是询问 C++ 标准*本身*使用的语法描述符号，特别是关于语法类别名称之间的空格. 我在这里给出的例子——整数文字的定义——是专门选择的，*只是*因为它作为一个简单明了的例子。）

（为简洁起见，来自 §2.14.2）：

```
integer-literal:
    decimal-literal integer-suffix_opt

decimal-literal:
    nonzero-digit
    decimal-literal digit 
```

（正如预期的那样，[0] 1 ... 9）`nonzero-digit`。`digit`（注：以上文字在标准中均为斜体。）

这一切对我来说都是有意义的，假设语法类别描述之间的空格*`decimal-literal`*被*`digit`*理解为不存在于实际源代码中，但仅存在于语法描述本身中，因为它出现在第 2.14.2 节中。

这个约定——在符号中的类别描述之间放置一个空格，可以理解该空格不会出现在源代码中——在规范的其他地方使用。这里的例子只是一个明确的例子，其中空间显然不应该出现在源代码中。（请参阅此问题的附录，了解标准中的反例，其中当这些类别描述被源代码中的实际标记替换时，类别描述之间*必须*存在或可选的空格或其他分隔符。）

同样，冒着吹毛求疵的风险，我无法在标准中的任何地方找到一个约定声明，即在解释本示例中的符号时，源代码中不存在空格。

该标准在第 1.6.1 节（及之后）中讨论了符号约定。我能找到的唯一相关文本是：

> 在本国际标准使用的句法符号中，句法类别用斜体表示，字面量和字符用等宽类型表示。替代品列在单独的行中，除非在少数情况下，一长串替代品用短语“一个”标记。</p>

我不会那么挑剔；然而，我发现标准中使用的符号有点棘手，所以我想清楚所有细节。我很感激任何愿意花时间让我了解这一点的人。

**附录** 针对声称类似于“*很明显不应在最终源代码中包含空格，因此标准没有必要明确说明这一点*”的评论：我在这个问题中选择了一个简单的例子，*很*明显的地方。标准中有很多情况下，如果没有 a*就不*明显了。语言的先验知识（在我看来），例如 §8.0.4 讨论“const”和“volatile”：

```
cv-qualifier-seq:
    cv-qualifier cv-qualifier-seq_opt 
```

...请注意此处的*相反假设（最终源代码中**需要*空格或另一个或多个分隔符），但这不可能从语法符号本身推断出来。

在某些情况下，空格是*可选*的，例如：

```
noptr-abstract-declarator:
    noptr-abstract-declarator_opt parameters-and-qualifiers 
```

（在这个例子中，为了说明一点，我不会给出节号或解释正在讨论的内容；我只会问从语法符号本身来看，在*这种*情况下，最终源代码中的空格是否很明显在标记之间是可选的。）

我怀疑这些评论——“很明显，所以它必须是这样”——是因为我选择的例子是如此明显。这正是我选择这个例子的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T00:08:20.003

§2.7.1

> 有五种标记：标识符、关键字、文字、运算符和其他分隔符。如下所述的空白、水平和垂直制表符、换行符、换页符和注释（统称为“空白”）将被忽略，**除非它们用于分隔标记**。

因此，如果文字是一个标记，并且空格用于分隔标记，则文字数字之间的空格将被解释​​为两个单独的标记，因此不能是同一文字的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T05:30:46.173

我有理由确定标准中没有对这一事实更直接的解释。

使用的符号与典型的 BNF 足够相似，以至于它们认为许多相同的一般约定是理所当然的，包括符号中的空格除了分隔 BNF 本身的标记之外没有任何意义——如果/当空格在除了分隔标记之外的源代码，它们将包含直接指定它的符号（例如，对于大多数预处理指令，`new-line`直接指定：

# ifdef*标识符换行组[选择]*

或者：

# 包含*<h-char-sequence> 换行符*

这*可能*要归咎于Algol 68 标准，该标准在精确指定语法方面做得太过分了，以至于如果没有数周的全日制学习¹ ，基本上任何人都无法阅读。从那时起，除了对语法描述语言的最粗略的解释之外，任何超过最粗略的解释都会导致拒绝，因为它太像 Algol 68 并且无疑会失败，因为它太正式并且没有人会阅读或理解它。

* * *

¹你问的怎么会这么糟糕？它基本上是这样的：他们从语法描述语言的正式英语描述开始。不过，这并不是用来定义 Algol 68 的——它被用来指定（更准确地说）*另一种*语法描述语言。*然后使用第二种*语法描述语言来指定 Algol 68 本身的语法。因此，您必须先学习两种不同的语法描述语言*，然后*才能开始阅读 Algol 68 语法本身。你可以毫无疑问地猜到，几乎没有人做过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T19:09:28.590

该标准实际上有两个独立的语法。

第 2 节和第 16 节中描述的预处理器语法定义了在翻译阶段 1-6 中如何将源字符序列转换为预处理标记和空白字符序列。在该语法的某些阶段和部分中，空格很重要。

不属于预处理标记的空白字符在翻译阶段 4 后不再重要。标准在翻译阶段 7 开始时明确规定要丢弃预处理标记之间的空白字符。

语言语法定义了一系列标记（从预处理标记转换而来）在翻译阶段 7 中如何在句法和语义上进行解释。该语法中没有空格之类的东西。（此时，`' '`is就像is 一样是*字符文字*`'c'`。）

在这两种语法中，标准中可见的语法组件之间的空格与源或执行空白字符无关，它只是为了使标准清晰易读。当预处理器语法依赖于空格时，它会用单词拼写出来，例如：

> *c字符*：
> 
> 源字符集的任何成员，除了单引号`'`、反斜杠`\`或换行符
> 
> *转义序列*
> 
> *通用字符名称*

和

> *控制线*：
> 
> ...
> 
> `# define` *identifier lparen identifier-list* [opt]`)` *替换列表换行符*
> 
> ...
> 
> *lparen*：
> 
> `(`前面没有空格的字符

*所以整数文字*的数字之间可能没有空格，因为预处理器语法不允许它。

这里的另一个重要规则来自 C++11 2.5p3：

> 如果输入流已被解析为预处理标记，直到给定字符：
> 
> *   如果下一个字符开始可能是原始字符串文字的前缀和初始双引号的字符序列，例如`R"`，则下一个预处理标记应为原始字符串文字。...
>     
>     
> *   否则，如果接下来的三个字符是`<::`且后续字符既不是`:`也`>`，则`<`本身被视为预处理器标记，而不是替代标记的第一个字符`<:`。
>     
>     
> *   否则，下一个预处理标记是可以构成预处理标记的最长字符序列，即使这会导致进一步的词法分析失败。

`const`所以和标记之间必须有空格，`volatile`否则，最长标记可能规则会将其转换为单个*标识符*token `constvolatile`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T06:28:45.610

正如你所说，标准说：

> 等宽类型的字面量和字符

因此，如果要在规则中包含文字空间，则必须以恒定宽度类型呈现。仔细检查标准会发现，您所指的生产空间比等宽类型要窄。（此外，您引用该标准的尝试是一种歪曲，因为它以恒定宽度类型呈现应该以斜体呈现的内容，随之而来的语义发生变化。）

* * *

好的，这就是“有抱负的语言律师”的答案；此外，它并没有真正起作用，因为它在所有形式的产品上都失败了：

```
One of:
0 1 2 3 4 5 6 7 8 9 
```

我认为，实际上，答案是空格不是形式语法的一部分，因为它仅用于分隔标记；此外，该语句对于语法本身大部分都是正确的，其标记由空格分隔，而该空格不是标记，除了语法中的缩进很重要，这与程序中的缩进不同。

* * *

**附录回答附录**

这实际上不是真的，`const`需要`volatile`用空格分隔。它们只需要是单独的令牌。例子：

```
#define A(x)x
A(const)A(volatile)A(int)A(x)A(;) 
```

同样，更严肃的是，第 2 章（特别提到了 2.2 和 2.5，但您必须阅读整个文本）描述了如何处理程序文本以生成令牌流。您声明必须忽略空格的所有规则都在语法的这一部分中，而您声明可能需要空格的所有规则都不在。

这实际上是两个独立的语法，但词汇语法必然是不完整的，因为您需要考虑预处理器的操作才能应用它。

我相信我所说的一切都可以从标准中收集到。以下是一些摘录：

> 2.2(3) 源文件被分解为预处理标记 (2.5) 和空白字符序列（包括注释）…… 将源文件的字符划分为预处理标记的过程取决于上下文。
> 
> …</p>
> 
> 2.2(7) 分隔标记的空白字符不再重要。每个预处理令牌都被转换为一个令牌。(2.7)。生成的标记在句法和语义上进行分析，并作为翻译单元进行翻译。

我认为所有这一切都清楚地表明有两种语法，一种是词法的——也就是说，它从一系列字素（字符）中产生一个词位（标记）——而另一种是句法的——也就是说，它产生一个来自一系列词位（令牌）的抽象语法树。在这两种情况下（有一个小例外，我将在一分钟内讨论）除了词汇语法允许的情况下阻止两个词位相互碰撞的东西之外，空格被认为是其他任何东西。（参见 2.5(3) 中的算法。）

`C++`在语法上并不漂亮，所以几乎总是有例外。其中之一，继承自`C`，是以下之间的区别：

```
#define A(X)(X) 
```

和

```
#define A (X)(X) 
```

预处理指令有自己的解析规则，这一规则以定义为代表：

> *lparen* :前面没有空格
>   的`(`字符

我想说，这是证明规则的例外 [注 1]。有必要说这`(`前面没有空格这一事实表明，`(`在句法规则中正常使用标记并没有说明它的 blancospatial 上下文。

因此，套用雷·卡明斯（不是有时声称的阿尔伯特·爱因斯坦）的话说，“时间和空白都是将一个标记与另一个标记分开的全部。” [笔记2]

* * *

[[注 1] 根据Cicero](http://en.wikipedia.org/wiki/Exception_that_proves_the_rule)的说法，我在此处使用该短语的原始法律意义。

[笔记2]：

> “时间，”乔治说，“为什么我可以给你一个时间的定义。它可以阻止一切同时发生。”
> 
> 一小群人传来一阵笑声。
> 
> “的确如此，”化学家同意道。“而且，先生们，这并不像听起来那么好笑。事实上，这确实不是一个糟糕的科学定义。时间和空间就是将一个事件与另一个事件分开的全部......</p>

——选自*《掌握时间的人*》，Ray Cummings 着，1929 年，Ace Books。[在 Google 图书中](http://books.google.com.pe/books?id=Imx5-W7OAbwC&lpg=PP1&pg=PA5#v=onepage&q&f=false)查看首页

# jquery - 将单个 json 文件分成两个模型和一个带有主干和 $.getJSON 的集合

> ID：13754787
> 
> 赞同：0
> 
> 时间：2012-12-06T23:54:05.247
> 
> 标签：jquery, json, backbone.js

我有一个名为 products 的 JSON 文件，需要拆分它。

这个文件的结构是这样的

我设想我需要一个集合（因为我不想在 json 文件中读取两次）和两个模型（productType 和 product）

```
productTypeList
   0
     id
     name
     productList
       0
         id
         name
       1
         id
         name
       2
         id
         name
       3
         id
         name
   1
     id
     name
     productList
   2
     id 
     name
     productList 
```

我正在考虑使用 getJson 命令来执行此操作。我确实尝试过在集合中使用主干 url 的想法，但这似乎更适合从静态 API 而不是静态 json 文件获取数据时，这些假设是否正确？

无论如何，如果我确实走上了拥有两个模型和一个集合的路线，当您在集合中定义一个方法时，这将如何工作？

我会假设有这样的模型

```
var ProductType=Backbone.Model.extend({
    defaults:{
        id:"",
        name:'',
        longName:''

    }
});

return ProductType

var Product=Backbone.Model.extend({

    defaults:{
        id:"",
        name:'',
        ordering:'',
        introSmall:'',
        introNormal:'',
        sellingPoints:'',
        interestRate:'',
        interestRateLabel:''
        productTypeID:''

    }
});

return Product; 
```

然后我不确定该集合将如何工作...我添加了一些评论/问题？

```
var Products=Backbone.Collection.extend({

      // Do i call both models here??
      model:ProductType,
      model:Product,

      fetch:function(){
        var self=this;
        var tmpItem;
        var tmpProduct

           var jqxhr = $.getJSON("data/product.json")
          .success(function(data, status, xhr) { 

            $.each(data.productTypeList, function(i,item){

              tmpItem=new ProductType({

        id:item.id,
            name:item.name,
            longName:item.longName,
            ordering:item.ordering
                });

                     $.each(data.productTypeList[i], function(a,itemProduct){

                     tmpProduct = new Product ({
                     id:itemProduct.id,
             name:itemProduct.name,
             ordering:itemProduct.ordering,
             introSmall:itemProduct.introSmall,
                         productTypeID:i
                     });

                    self.add(tmpProduct);

                     });

              self.add(tmpItem);

            });
            //dispatch customized event
            self.trigger("fetchCompleted:Products");

          })
          .error(function() { alert("error"); })
          .complete(function() {
                console.log("fetch complete + " + this);
          });

      } 
```

非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:14:02.193

在这种情况下，将问题分为两个步骤可能是有意义的：

1.  获取数据文件并将内容处理为“模型就绪”形式
2.  根据解析的数据实例化您的模型/集合。

一般的想法是让非主干类型的东西（即解析笨拙的数据格式）远离您的模型和集合，直到它们采用他们能够理解的格式。这使它们保持美观和整洁，并将代码的棘手部分隔离在自己的空间中。

所以，第一步，你应该能够在这些方面做一些事情：

```
var parseResponse = function (data) {

  var result = { types: [], models: [] };

  var type, 
      types = data.productTypeList,
      product,
      i = types.length;

  while (type = types[--i]) {
    result.types.push({ 
       id: type.id,
       name: type.name
       // etc.
    });
    while (product = type.productList.pop()) {
      product.productTypeId = type.id;
      result.models.push(product);
    }
  }
};

$.getJSON('...', parseResponse); 
```

在`parseResponse`方法结束时（您需要完成它的实现），`result`变量现在包含产品类型列表。最后一步是创建`productType`和`product`集合。假设您已经拥有`ProductCollection`和`ProductTypeCollection`集合具有适当的模型集，您可以`result`按照以下方式“Backbone-ify”您解析成的数据：

```
var products = new ProductCollection(result.models)
var productTypes = new ProductTypeCollection(result.modelTypes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T04:17:48.260

决定将其保留在这里..稍后将删除/编辑并保留答案，以便人们看到解决方案

所以我的项目正在使用 jqm、jquery、backbone 和 require

我已经设置了 jqm 以便它不做任何路由并让骨干网处理它

在我的路由器页面上

```
var AppRouter = Backbone.Router.extend({

routes: {
        '':    'showHome',         //home view
        'home': 'showHome',        //home view as well
        'products/productList' : 'showProducts',

        '*actions': 'defaultAction' 
    },

initialize:function () {
    // Handle back button throughout the application
    $('.back').live('click', function(event) {
        window.history.back();
        return false;
    });
    this.firstPage = true;
},

parseResponse : function(data) {

 result = { prodTypes: [], products: [] };
       var type;
   var types = data.data.productTypeList;
   var product;
   var i = types.length;

            while (type = types[--i]) {
            result.prodTypes.push({ 
               id: type.id,
               name: type.name,
               longName: type.longName

            });
            while (product = type.productList.pop()) {
              product.productTypeId = type.id,
              result.products.push(product);
            }
          }

    },

    defaultAction: function(actions){
        this.showHome();
    },

    showHome:function(actions){
        // will render home view and navigate to homeView
        var homeView=new HomeView();
        homeView.render(); 

        this.changePage(homeView, 'fade');
    },

    showProducts:function(){

        $.getJSON('data/product.json', this.parseResponse).success(function(data, status, xhr) { 

     var productList=new Products(result.prodTypes);
     var productListView=new ProductListView({collection:productList});

     productListView.bind('renderCompleted:Products',this.changePage,this);

     productListView.update();

       });   

    },

    changePage:function (view, transition) {
        //add the attribute 'data-role="page" ' for each view's div

        console.log("pagechanged");
        if (transition != "slidefade") {
         transition = "pop";                
        }

        view.$el.attr('data-role', 'page');   
        $('.ui-page').attr('data-role', 'page');

        //append to dom
        $('body').append(view.$el);  

        if(!this.init){   
            $.mobile.changePage($(view.el), {changeHash:false, transition: transition});

        }else{   
            this.init = false;
        }            
    }       

});

$(document).ready(function () {
console.log('App Loaded');
app = new AppRouter();
Backbone.history.start();
});

return AppRouter; 
```

我的收藏页面

```
 var Products=Backbone.Collection.extend({

      // Book is the model of the collection
      model:ProductType,

      //fetch data from books.json using Ajax 
      //and then dispatch customized event "fetchCompleted:Books"
      fetch:function(){
        var self=this;
        var tmpItem;
        var tmpProduct;
        //fetch the data using ajax

        $.each(result.prodTypes, function(i,prodType){

            tmpItem=new ProductType({id:prodType.id,    name:prodType.name, longName:prodType.longName});

            self.add(tmpItem);
        });

        self.trigger("fetchCompleted:Products");  
      }
});

return Products; 
```

我的查看页面

```
 var ProductListView = Backbone.View.extend({

template: _.template(productViewTemplate),

update:function(){
  //set callback of the event "fetchCompleted:Products" 
  this.collection.bind('fetchCompleted:Products',this.render,this);
  this.collection.fetch();
  console.log(this.collection);
},

render: function(){
  this.$el.empty();
  //compile template using the data fetched by collection
  this.$el.append(this.template({data:this.collection.toJSON()}));
  this.trigger("renderCompleted:Products",this);

  return this;
}
});

return ProductListView; 
```

问题是两件事..

首先，主要是当我点击进入第二页时，它不会去那里......但它不会引发错误。

数据正在进入页面，但什么也没发生？

视图的更新功能中的 console.log 确实执行了，所以我很困惑。

第二个和一个次要的 - 我想包括

```
$.getJSON('data/product.json', this.parseResponse).success(function(data, status, xhr) { 
```

在路由器上的 initalize 函数上，但如果我这样做并调用 result.prodTypes 或 this.result.prodTypes 它说它未定义为另一个函数的一部分，我可以弄清楚如何调用它 - 目前它在显示产品上操作，但这会导致问题，因为我需要在不同的地方使用产品：[]，并且不想调用 json 两次

谢谢

# excel - Excel宏将某些列从一个工作簿复制到另一个工作簿

> ID：13754791
> 
> 赞同：4
> 
> 时间：2012-12-06T23:54:39.567
> 
> 标签：excel, vba

这是我第一次尝试编写 VBA 代码。我在模仿我在[stackoverflow](https://stackoverflow.com/questions/6382526/copy-column-from-one-excel-sheet-to-another-excel-sheet)上找到的东西。

我想将某些列（A、B 和 E）从一个工作簿复制到另一个工作簿，并更改某些行的字体和颜色并编辑某些单元格中的文本（用单词“组”替换一个长短语）。

这是我复制的没有更改的代码：

```
Sub CopyColumnToWorkbook()
Dim sourceColumn As Range, targetColumn As Range

Set sourceColumn = Workbooks("Source").Worksheets("Sheet1").Columns("A")
Set targetColumn = Workbooks("Target").Worksheets("Sheet1").Columns("A")

sourceColumn.Copy Destination:=targetColumn
End Sub 
```

我得到一个运行时错误 9，下面的行被突出显示：

```
Set sourceColumn = Workbooks("Source").Worksheets("Sheet1").Columns("A") 
```

我在下面附上了源文件和目标文件，因为我希望它们在成功运行结束时看起来像。

[源文件](https://docs.google.com/open?id=0B4tcwo2ZvQCRWkxxOU5xOGNSY2s)

[目标文件](https://docs.google.com/open?id=0B4tcwo2ZvQCRV0l2SmxHZkh6NFU)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T00:26:21.463

您引用了一个不存在的工作表。通过使用其索引将其更改为引用工作簿中的第一张工作表。您也没有在文件中包含扩展名，因此它也会在工作簿对象上失败。

```
Sub CopyColumnToWorkbook()
Dim sourceColumn As Range, targetColumn As Range

Set sourceColumn = Workbooks("Source.xlsm").Worksheets(1).Columns("A")
Set targetColumn = Workbooks("Target.xlsm").Worksheets(1).Columns("A")

sourceColumn.Copy Destination:=targetColumn
End Sub 
```

# java - IllegalStateException：使用 POST 通过 HttpClient 使用 JSON 对象填充 ehCache

> ID：13754795
> 
> 赞同：1
> 
> 时间：2012-12-06T23:55:00.787
> 
> 标签：java, json, jersey, httpclient, ehcache

我正在使用 Java 6、Tomcat 7、Jersey、HttpClient 和 ehCache 服务器。

在 $CATALINA_HOME/ehcache/WEB-INF/classes/ehcache.xml 中注册了一个名为 ipad 的新缓存

```
<cache name="ipad"
           maxElementsInMemory="10000"
           eternal="true"
           overflowToDisk="false"
           memoryStoreEvictionPolicy="FIFO"
/> 
```

这是我的客户的样子：

```
import org.apache.http.impl.client.DefaultHttpClient;

public class EhCachePostClient {
    public static void main(String[] args) throws Exception {   
            String jsonString = "{\"qty\":100,\"name\":\"iPad 4\"}";

            // Post the same object to ehCache
            DefaultHttpClient ehCacheClient = new DefaultHttpClient();
            String ehCacheResponseString =
    EhCacheClientHelper.getEhCacheJsonResponseString(ehCacheClient, jsonString);
            System.out.println("\nFrom ehCache Server: " + ehCacheResponseString);
            ehCacheClient.getConnectionManager().shutdown();
    }
} 
```

这是 EhCacheClientHelper 类（大部分工作已完成）：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;

public class EhCacheClientHelper {

    private static final String EHCACHE_IPAD_URI 
                   = "http//localhost:8080/ehcache/rest/ipad";

    public static String getEhCacheJsonResponseString(
                DefaultHttpClient httpClient, String responseString) 
    throws Exception {
        HttpPost postRequest = new HttpPost(EHCACHE_MDS_URI);

        StringEntity input = new StringEntity(responseString);
        input.setContentType("application/json");
        postRequest.setEntity(input);

        HttpResponse response = httpClient.execute(postRequest);

        if (response.getStatusLine().getStatusCode() != 201) {
            throw new RuntimeException("Failed : HTTP error code : " 
                     + response.getStatusLine().getStatusCode());
        }

        BufferedReader br = new BufferedReader(
               new InputStreamReader((response.getEntity().getContent())));

        String output;
        StringBuilder ehCacheOutput = new StringBuilder();
        System.out.println("\nOutput from ehCache Server .... \n");
        while ((output = br.readLine()) != null) {
            ehCacheOutput.append(output);
        }
        return ehCacheOutput.toString();
    }
} 
```

这是我得到的例外：

```
Exception in thread "main" java.lang.IllegalStateException: Target host must not be null, or set in parameters.
    at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:784)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:414)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at com.myapp.client.EhCacheClientHelper.getEhCacheJsonResponseString(EhCacheClientHelper.java:22)
    at com.myapp.client.EhCachePostClient.main(EhCachePostClient.java:19) 
```

我究竟做错了什么？

我要做的就是在 ehCache 中创建一个示例缓存，向其中发布某种类型的 JSON 对象，然后使用 curl 命令检索它。

这是一件很难做到的事情吗？我缺少什么（在实施、配置等方面）？

感谢您抽出时间来阅读...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:35:41.743

你有：

> http//...

应该：

> http://...

你想念 ”：”

# javascript - 如何使Phonegap的（Cordova）文件API像普通浏览器中的文件API一样工作

> ID：13754797
> 
> 赞同：0
> 
> 时间：2012-12-06T23:55:02.040
> 
> 标签：javascript, android, cordova, fileapi

有没有办法让 Phonegap 的 File API 像浏览器中的相同 API 一样工作？我需要与浏览器中相同的行为：点击“打开文件”按钮->“选择文件”对话框->...->使用 FileReader 对象打开文件。

谢谢！！！

**更新：**我找到了一些解决方案。它打开文件对话框并返回 JS 文件对象的名称。但是，当我从 PhoneGap 将该 JS 文件对象传递给 FileReader 时 - 它没有打开（onload 侦听器永远不会触发）。我做错了什么？

这是我的Java：

```
package org.apache.cordova.example;

import android.os.Bundle;
import org.apache.cordova.api.CordovaInterface;
import android.content.Intent;
import android.net.Uri;
import android.webkit.ValueCallback;
import org.apache.cordova.CordovaChromeClient;
import org.apache.cordova.CordovaWebView;
import org.apache.cordova.DroidGap;

public class cordovaExample extends DroidGap
{
private ValueCallback<Uri> mUploadMessage;
private final static int FILECHOOSER_RESULTCODE = 1;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    this.appView.setWebChromeClient(new FileAttachmentChromeClient(this,     this.appView));
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == mUploadMessage) return;
        Uri result = intent == null || resultCode != RESULT_OK ? null : intent.getData();
        mUploadMessage.onReceiveValue(result);
        mUploadMessage = null;
    }
}

// openFileChooser is an overridable method in WebChromeClient which isn't
// included in the SDK's Android stub code
public class FileAttachmentChromeClient extends CordovaChromeClient {

    public FileAttachmentChromeClient(CordovaInterface ctx, CordovaWebView app) {
        super(ctx, app);

    }
    public void openFileChooser(ValueCallback<Uri> uploadMsg) {
        mUploadMessage = uploadMsg;
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType("*/*");
        cordovaExample.this.startActivityForResult(Intent.createChooser(i, "Choose type of attachment"), FILECHOOSER_RESULTCODE);
    }

}
} 
```

我用 JavaScript 做什么：

```
 var SelectedFile;
 var FReader; 

 document.getElementById('fileBox').addEventListener('change', fileChosen);     

 function fileChosen(evnt) {
SelectedFile = evnt.target.files[0];      
     FReader = new FileReader(); 
     FReader.readAsDataURL(SelectedFile);
     FReader.onload = function(loadevnt){   ....   }  //never happens
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:50:38.430

那么问题是大多数移动浏览器不支持文件对话框。IIRC iOS 6 是第一个支持此功能的移动浏览器。我确实在我的[Corinthian](https://github.com/macdonst/corinthian)项目中编写了一些代码，而不是在积极开发中，这些代码确实修补了这个功能。

首先，您需要编写一个 Android 插件来启动提供文件对话框的意图。我正在使用 OI 文件管理器。

```
package org.apache.cordova;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.LOG;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.HashMap;

/**
 * This class exposes methods in DroidGap that can be called from JavaScript.
 */
public class App extends CordovaPlugin {

    /**
     * Executes the request and returns PluginResult.
     *
     * @param action            The action to execute.
     * @param args              JSONArry of arguments for the plugin.
     * @param callbackContext   The callback context from which we were invoked.
     * @return                  A PluginResult object with a status and message.
     */
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        PluginResult.Status status = PluginResult.Status.OK;
        String result = "";

        try {
            if (action.equals("clearCache")) {
                this.clearCache();
            }
            else if (action.equals("show")) {
                // This gets called from JavaScript onCordovaReady to show the webview.
                // I recommend we change the name of the Message as spinner/stop is not
                // indicative of what this actually does (shows the webview).
                cordova.getActivity().runOnUiThread(new Runnable() {
                    public void run() {
                        webView.postMessage("spinner", "stop");
                    }
                });
            }
            else if (action.equals("loadUrl")) {
                this.loadUrl(args.getString(0), args.optJSONObject(1));
            }
            else if (action.equals("cancelLoadUrl")) {
                this.cancelLoadUrl();
            }
            else if (action.equals("clearHistory")) {
                this.clearHistory();
            }
            else if (action.equals("backHistory")) {
                this.backHistory();
            }
            else if (action.equals("overrideButton")) {
                this.overrideButton(args.getString(0), args.getBoolean(1));
            }
            else if (action.equals("overrideBackbutton")) {
                this.overrideBackbutton(args.getBoolean(0));
            }
            else if (action.equals("exitApp")) {
                this.exitApp();
            }
            callbackContext.sendPluginResult(new PluginResult(status, result));
            return true;
        } catch (JSONException e) {
            callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.JSON_EXCEPTION));
            return false;
        }
    }

    //--------------------------------------------------------------------------
    // LOCAL METHODS
    //--------------------------------------------------------------------------

    /**
     * Clear the resource cache.
     */
    public void clearCache() {
        this.webView.clearCache(true);
    }

    /**
     * Load the url into the webview.
     *
     * @param url
     * @param props         Properties that can be passed in to the DroidGap activity (i.e. loadingDialog, wait, ...)
     * @throws JSONException
     */
    public void loadUrl(String url, JSONObject props) throws JSONException {
        LOG.d("App", "App.loadUrl("+url+","+props+")");
        int wait = 0;
        boolean openExternal = false;
        boolean clearHistory = false;

        // If there are properties, then set them on the Activity
        HashMap<String, Object> params = new HashMap<String, Object>();
        if (props != null) {
            JSONArray keys = props.names();
            for (int i = 0; i < keys.length(); i++) {
                String key = keys.getString(i);
                if (key.equals("wait")) {
                    wait = props.getInt(key);
                }
                else if (key.equalsIgnoreCase("openexternal")) {
                    openExternal = props.getBoolean(key);
                }
                else if (key.equalsIgnoreCase("clearhistory")) {
                    clearHistory = props.getBoolean(key);
                }
                else {
                    Object value = props.get(key);
                    if (value == null) {

                    }
                    else if (value.getClass().equals(String.class)) {
                        params.put(key, (String)value);
                    }
                    else if (value.getClass().equals(Boolean.class)) {
                        params.put(key, (Boolean)value);
                    }
                    else if (value.getClass().equals(Integer.class)) {
                        params.put(key, (Integer)value);
                    }
                }
            }
        }

        // If wait property, then delay loading

        if (wait > 0) {
            try {
                synchronized(this) {
                    this.wait(wait);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        this.webView.showWebPage(url, openExternal, clearHistory, params);
    }

    /**
     * Cancel loadUrl before it has been loaded (Only works on a CordovaInterface class)
     */
    @Deprecated
    public void cancelLoadUrl() {
        this.cordova.cancelLoadUrl();
    }

    /**
     * Clear page history for the app.
     */
    public void clearHistory() {
        this.webView.clearHistory();
    }

    /**
     * Go to previous page displayed.
     * This is the same as pressing the backbutton on Android device.
     */
    public void backHistory() {
        cordova.getActivity().runOnUiThread(new Runnable() {
            public void run() {
                webView.backHistory();
            }
        });
    }

    /**
     * Override the default behavior of the Android back button.
     * If overridden, when the back button is pressed, the "backKeyDown" JavaScript event will be fired.
     *
     * @param override      T=override, F=cancel override
     */
    public void overrideBackbutton(boolean override) {
        LOG.i("App", "WARNING: Back Button Default Behaviour will be overridden.  The backbutton event will be fired!");
        webView.bindButton(override);
    }

    /**
     * Override the default behavior of the Android volume buttons.
     * If overridden, when the volume button is pressed, the "volume[up|down]button" JavaScript event will be fired.
     *
     * @param button        volumeup, volumedown
     * @param override      T=override, F=cancel override
     */
    public void overrideButton(String button, boolean override) {
        LOG.i("DroidGap", "WARNING: Volume Button Default Behaviour will be overridden.  The volume event will be fired!");
        webView.bindButton(button, override);
    }

    /**
     * Return whether the Android back button is overridden by the user.
     *
     * @return boolean
     */
    public boolean isBackbuttonOverridden() {
        return webView.isBackButtonBound();
    }

    /**
     * Exit the Android application.
     */
    public void exitApp() {
        this.webView.postMessage("exit", null);
    }

}

package com.simonmacdonald.corinthian;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;

public class FileDialog extends Plugin {
    private static final int PICK_FILE_RESULT_CODE = 8974;
    private static final int PICK_DIRECTORY_RESULT_CODE = 8975;
    private static final String LOG_TAG = "FileDialog";
    public String callbackId;

    /**
     * Executes the request and returns PluginResult.
     *
     * @param action        The action to execute.
     * @param args          JSONArry of arguments for the plugin.
     * @param callbackId    The callback id used when calling back into JavaScript.
     * @return              A PluginResult object with a status and message.
     */
    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        this.callbackId = callbackId;

        JSONObject options = args.optJSONObject(0);

        if (action.equals("pickFile")) {
            showDialog(options, PICK_FILE_RESULT_CODE);
        } else if (action.equals("pickFolder")) {
            showDialog(options, PICK_DIRECTORY_RESULT_CODE);
        }
        else {
            return new PluginResult(PluginResult.Status.INVALID_ACTION);
        }
        PluginResult r = new PluginResult(PluginResult.Status.NO_RESULT);
        r.setKeepCallback(true);
        return r;
    }

    private void showDialog(JSONObject options, int type) {
        Intent intent;
        if (type == PICK_FILE_RESULT_CODE) {
            intent = new Intent("org.openintents.action.PICK_FILE");
        } else {
            intent = new Intent("org.openintents.action.PICK_DIRECTORY");
        }
        if (options != null) {
            String title = options.optString("title");
            if (title != null) {
                intent.putExtra("org.openintents.extra.TITLE", title);
            }
            String button = options.optString("button");
            if (button != null) {
                intent.putExtra("org.openintents.extra.BUTTON_TEXT", button);
            }
        }
        //intent.setData(Uri.fromFile(new File("/")));
        try {
            this.cordova.startActivityForResult((Plugin)this,intent,PICK_FILE_RESULT_CODE);
        } catch (ActivityNotFoundException e) {
            showDownloadDialog();
        }
    }

    private void showDownloadDialog() {
        final Context context = this.cordova.getContext();
        Runnable runnable = new Runnable() {
            public void run() {

                AlertDialog.Builder dialog = new AlertDialog.Builder(context);
                dialog.setTitle("Install File Manager?");
                dialog.setMessage("This requires the free OI File Manager app. Would you like to install it now?");
                dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dlg, int i) {
                        dlg.dismiss();
                        Intent intent = new Intent(Intent.ACTION_VIEW,
                            Uri.parse("market://search?q=pname:org.openintents.filemanager")
                        );
                        try {
                            context.startActivity(intent);
                        } catch (ActivityNotFoundException e) {
//                          We don't have the market app installed, so download it directly.
                            Intent in = new Intent(Intent.ACTION_VIEW);
                            in.setData(Uri.parse("http://openintents.googlecode.com/files/FileManager-1.2.apk"));
                            context.startActivity(in);

                        }

                    }
                });
                dialog.setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dlg, int i) {
                        dlg.dismiss();
                    }
                });
                dialog.create();
                dialog.show();
            }
        };
        this.cordova.getActivity().runOnUiThread(runnable);
    }

    @Override
    public void onActivityResult(int reqCode, int resultCode, Intent data) {
      //super.onActivityResult(reqCode, resultCode, data);
      //Log.d(LOG_TAG, "Data is " + data.getData().toString());
      Log.d(LOG_TAG, "we are in on activity result");
      switch (reqCode) {
      case PICK_FILE_RESULT_CODE:
      case PICK_DIRECTORY_RESULT_CODE: {
          if (resultCode==Activity.RESULT_OK && data!=null && data.getData()!=null) {
              String filePath = "file://" + data.getData().getPath();
              Log.d(LOG_TAG, "The data is = " + filePath);
              Log.d(LOG_TAG, "Calling succes with callback id = " + this.callbackId);
              this.success(new PluginResult(PluginResult.Status.OK, filePath), this.callbackId);
          }
          break;
      }
  }
    }
} 
```

然后你需要编写你的 JavaScript 接口：

```
FileDialog: {
    pickFile: function(successCallback, errorCallback, options) {
        var win = typeof successCallback !== 'function' ? null : function(f) {
            window.resolveLocalFileSystemURI(f, function(fileEntry) {
                successCallback(fileEntry);
            }, fail);
        };
        cordova.exec(win, errorCallback, "FileDialog", "pickFile", [options]);
    },
    pickFolder: function(successCallback, errorCallback, options) {
        var win = typeof successCallback !== 'function' ? null : function(d) {
            window.resolveLocalFileSystemURI(d, function(dirEntry) {
                successCallback(dirEntry);
            }, fail);
        };
        cordova.exec(win, errorCallback, "FileDialog", "pickFolder", [options]);
    },
    patch: function() {
        var inputs = document.getElementsByTagName("input");
        for (var i=0; i < inputs.length; i++) {
           if (inputs[i].getAttribute('type') == 'file'){
               var me = inputs[i];
               inputs[i].addEventListener("click", function() {
                   corinthian.FileDialog.pickFile(function(fileEntry) {
                       me.value = fileEntry.fullPath;
                   });
               });
           }
        }
    }
} 
```

最后通过调用 FileDialog.patch() 进行猴子补丁；在 PhoneGap 中收到 deviceready 事件后。

希望这可以帮助...

# java - 从 List[(Char, Char)] 到 Object 的奇怪类型转换

> ID：13754800
> 
> 赞同：0
> 
> 时间：2012-12-06T23:55:14.003
> 
> 标签：java, scala, jvm, jvm-languages

我`count`在 Scala 2.9.2 中有一个递归函数，看起来像这样

```
def count(traces: Seq[(Char, Char)], acc: (TP, TN, FP, FN)): (TP, TN, FP, FN) = {
  val (tp, tn, fp, fn) = acc
  traces match {
    case Nil => acc
    case ('(', '(')::rest => count(rest, (tp + 1, tn, fp, fn))
    case (')', ')')::rest => count(rest, (tp + 1, tn, fp, fn))
    case ('(', ')')::rest => count(rest, (tp, tn + 1, fp, fn))
    // ... exhaustive set of cases ...
  }
} 
```

在输入`Seq(('(', '('))`时，函数会抛出以下内容`MatchError`：

```
scala.MatchError: Vector(((,()) (of class scala.collection.immutable.Vector) 
```

我通过使用 Scala 控制台中的代码对此进行了调查。

```
scala> val t = Seq(('a', 'b'), ('b', 'c'))
t: Seq[(Char, Char)] = List((a,b), (b,c))

scala> t match { case Nil => "h"; case ('a', 'b')::rest => rest }
res6: java.lang.Object = List((b,c))

scala> t1 match { case Nil => "h"; case ('a', 'b')::rest => rest }
scala.MatchError: List((b,c)) (of class scala.collection.immutable.$colon$colon) 
```

似乎匹配`('a', 'b')::rest`（第二行）没有返回正确类型的对象，因为`Seq[(Char, Char)]`突然`java.lang.Object`变成了 Scala 不知道如何匹配的类型。

什么解释了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:29:22.447

模式匹配的问题是您使用[仅为 List 类定义的](http://www.lunatech-research.com/archives/2011/11/25/scala-list-extractor-demystified)[提取器](http://www.scala-lang.org/node/112) ，但将它们传递给 Vector。

如果你真的需要匹配每一个可能的 Seq，你可能想要使用通用语法：

```
 foo match {
     case Seq('(' -> ')',rest@ _* ) => println("The tail is" + rest)
   } 
```

（不要与`->`箭头混淆，`1 -> 2`本质上与 相同`(1,2)`，但在这种特殊情况下更具可读性：您不会将通常的大括号与`'('`和`')'`类似`Seq(('(',')'), ... )`）

否则，只需将参数类型[严格](http://www.scala-lang.org/docu/files/collections-api/collections.immutable.png)限制为 List[(Char, Char)]。

# ffmpeg - 如何使用ffmpeg连接两个不同纵横比的视频？

> ID：13754802
> 
> 赞同：3
> 
> 时间：2012-12-06T23:55:34.980
> 
> 标签：ffmpeg

我有两个视频，一个 640x480 和一个 480x640，我想使用 ffmpeg 将它们连接在一起，但我希望生成的视频是 640x640，两个视频都带有信箱。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T04:56:22.430

[如何使用 ffmpeg ( 或 xuggle ) 使用实时流创建马赛克](https://stackoverflow.com/questions/12383753/how-to-create-mosaic-with-live-stream-with-ffmpeg-or-with-xuggle)

concat 见上文

然后阅读有关'pad'和'crop'的ffmpeg选项的文档，注意必须除以2或类似的值。

您应该能够做您想做的事，但您可能必须对 concat 和 padding/cropping 进行单独的实验，以使所有帧尺寸都正确。

# python - 写入 csv 文件

> ID：13754803
> 
> 赞同：0
> 
> 时间：2012-12-06T23:55:45.073
> 
> 标签：python, csv, file-io, dictionary

假设我有一本字典：

```
dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454': 'PN000333'}. 
```

我需要填写此示例 csv 文件：[https ://www.dropbox.com/s/c95mlitjrvyppef/sheet.csv](https://www.dropbox.com/s/c95mlitjrvyppef/sheet.csv)

**示例行**

```
HEADER,ID,ReferenceID,Value,Location X-Coordinate,Location Y-Coordinate,ROOM,ALT_SYMBOLS,Voltage,Thermal_Rating,Tolerance,PartNumber,MPN,Description,Part_Type,PCB Footprint,SPLIT_INST,SWAP_INFO,GROUP,Comments,Wattage,Tol,Population Notes,Gender,ICA_MFR_NAME,ICA_PARTNUM,Order#,CLASS,INSTALLED,TN,RATING,OriginalSymbolOrigin,Rated_Current,Manufacturer 2,Status,Need To Mirror/Rotate Pin Display Properties,TOLERANCE,LEVEL
,,R150,1,,,,,<null>,<null>,<null>,,,to be linked,Resistor,TODO,<null>,<null>,<null>,<null>,1/16W,?,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>
,,R4737,1,,,,,<null>,<null>,<null>,,,to be linked,Resistor,TODO,<null>,<null>,<null>,<null>,1/16W,?,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>
,,R4738,1,,,,,<null>,<null>,<null>,,,to be linked,Resistor,TODO,<null>,<null>,<null>,<null>,1/16W,?,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null> 
```

具体来说，我需要根据我创建的 dict 的键填写 PartNumber 列。所以我需要遍历列 ReferenceID 并将该值与我在 dict 中的键进行比较。如果有匹配项，我需要用该值（在字典中）填写相应的 PartNumber 单元格......

如果这一切都令人困惑，我很抱歉，我是 python 新手并且在使用 csv 模块时遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:33:15.813

为了让您开始 - 这是使用该`csv.DictReader`对象的东西，并循环遍历您的文件，一次一行，并且`your_dict`根据行的`ReferenceID`设置存在的内容`PartNumber`为该值，否则为空字符串。

[如果您将其与http://docs.python.org/2/library/stdtypes.html#typesmapping](http://docs.python.org/2/library/stdtypes.html#typesmapping)和[http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)上的文档结合使用- 您应该能够写出数据并更好地了解正在发生的事情。

```
import csv

your_dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454': 'PN000333'}
with open('your_csv_file.csv') as fin:
    csvin = csv.DictReader(fin)
    for row in csvin:
        row['PartNumber'] = your_dict.get(row['ReferenceID'], '')
        print row 
```

# java - 创建通用列表列表

> ID：13754804
> 
> 赞同：1
> 
> 时间：2012-12-06T23:55:48.380
> 
> 标签：java, generics, vector, project

如何创建通用列表列表？我有一个带有通用参数的 Boxcar 类和一个应该创建 Boxcar 列表的 Train 类。我们应该在一个单独的主类中指定 Boxcar 中的类型，因此在此之前，boxcar 必须保持通用。以下是我编写的代码。它可以编译，但在调用加载方法时在单独的驱动程序类中出现错误`The method load(capture#1-of ?) in the type Boxcar<capture#1-of ?> is not applicable for the arguments (Person)`

```
package proj5;

 import java.util.ArrayList;
 import java.util.List;

public class Train {

private List<Boxcar<?>> train;
private int maxSpeed;
private int minSpeed;
private String position;
private int numBoxcars;
private int maxNumBoxcars;
private int speed;
private String destination;
private boolean stopped = true;

public Train(int maxSpeed, int minSpeed, int maxNumBoxcars, String position){
    train = new ArrayList<Boxcar<?>>();
    this.maxSpeed = maxSpeed;
    this.minSpeed = minSpeed;
    this.maxNumBoxcars = maxNumBoxcars;
    this.position = position;
}

public int getMaxNumBoxcars(){
    return maxNumBoxcars;
}

public int getSpeed(){
    return speed;
}

public String getPosition(){
    return position;
}

public int getMaxSpeed(){
    return maxSpeed;
}

public int getNumBoxcars(){
    return numBoxcars;
}

public List<Boxcar<?>> getTrain(){
    return train;
}

public void depart(String destination){
    this.destination = destination;
    speed = minSpeed;
    stopped = false;
}

public void arrive(){
    stopped = true;
    position = destination;
}

public void addCar(Boxcar<?> boxcar, int i){
    if(stopped){
        boxcar.setMaxItems(i);
        train.add(boxcar);
    }
}

public void removeCar(int i){
    if(stopped){
        train.remove(i);
    }
} 
```

}

```
package proj5;

import java.util.ArrayList;
import java.util.List;
import java.util.Collections;

public class Boxcar<T extends Comparable<T>> {

private List<T> boxcar;
private int maxItems;

public Boxcar(){
    boxcar = new ArrayList<T>();
}

public void load(T thing){
    if(!boxcar.contains(thing) && boxcar.size() < maxItems){
        boxcar.add(thing);
        Collections.sort(boxcar);
    }else{

    }
}

public int getMaxItems(){
    return maxItems;
}

public void setMaxItems(int i){
    maxItems = i;
}

public void unload(T thing){
    boxcar.remove(thing);
}

public List<T> getBoxcar(){
    return boxcar;
} 
```

}

我希望这能更好地传达我想要完成的事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:01:07.420

BoxCar 是一个通用类：

```
class BoxCar<T>{

} 
```

具有 Boxcar 列表的火车类：

```
class Train {
List<BoxCar<PassTheTypeHere>> = new ArrayList<BoxCar<PassTheTypeHere>>();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:58:19.187

在创建通用列表时`T`，您需要提供一个类型。`?`例如，包含字符串的 Boxcar 列表如下所示：

```
List<Boxcar<String>> train = new ArrayList<Boxcar<String>>(); 
```

`?`是[通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)的示例，而 a`T`表示在 的源中引用的类型`List`。如果没有对泛型有更深入的了解，这一点可能很难理解，但为了完整起见，我想确保解决它。查看[此页面](http://docs.oracle.com/javase/tutorial/java/generics/types.html)以获取有关如何在代码中使用泛型的更多信息。

查看您修改后的问题，我将引导您查看这行代码：

```
public class Boxcar<T extends Comparable<T>> { 
```

然后在它下面这一行：

```
private List<T> boxcar; 
```

这意味着您传递给的任何类型都`new Boxcar<type>()`将被传递到内部列表（以及其他需要 type 对象的方法`T`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:06:49.107

根据您原始问题的措辞，听起来您想创建一个棚车列表。

以下是您需要做的所有事情。

```
private List<Boxcar> boxcarList = new ArrayList<Boxcar>(); 
```

# android - 安卓设备上的 RTSP 服务器的可能性？

> ID：13754806
> 
> 赞同：3
> 
> 时间：2012-12-06T23:56:03.417
> 
> 标签：android, android-videoview, rtsp, rtp

我已经看到很多使用 Android 的 VideoVIew API 将数据从外部服务器流式传输到设备的示例（VideoView 在内部使用 RTP 和 RTSP 堆栈来接收数据）。然而，很少有关于使用 Android 内部 RTSP 和 RTP 堆栈来实现服务器功能的可能性的讨论，即使 android 设备充当流服务器并流媒体输出。可能吗 ？我可以在 Android 原生代码中的什么地方开始挖掘来实现这样的功能？将不胜感激细节。

谢谢阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:45:13.647

有点晚了，但是：

您可以将 MediaRecorder 输出格式设置为“7”。这是定义在

`/framework/base/media/java/android/media/MediaRecorder.java`

检查以获取详细信息

作为：

```
/** @hide Stream over a socket, limited to a single stream */
 public static final int OUTPUT_FORMAT_RTP_AVP = 7; 
```

目的地可通过 setprop streaming.ip 和 setprop streaming.port 控制

然后 AV 数据将流式传输到给定的目标地址。

RTP 代码（本机）本身存在于

```
/frameworks/base/media/libstagefright/rtsp directory. 
```

快乐的代码挖掘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-02T15:21:05.523

还有可能使用 libstreaming 库（[https://github.com/fyhertz/libstreaming](https://github.com/fyhertz/libstreaming)）

Github 上的文档为您提供了如何设置服务器的示例，但基本上您需要将 net.majorkernelpanic.streaming.gl.SurfaceView 添加到您的 Layout

```
<net.majorkernelpanic.streaming.gl.SurfaceView
    android:id="@+id/surface"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

将此添加到您的清单中

```
<service android:name="net.majorkernelpanic.streaming.rtsp.RtspServer"/> 
```

包括 libstreaming 库。如果您使用的是较新版本的 Android Studio，则需要将 libstreaming 克隆为单独的项目并导入模块。之后，需要在 libstreaming 中的 build.gradle 上运行 build。然后你就可以使用这个库了。

最后一步是创建一个活动。最简单的可能看起来像这样：

```
public class RemoteStreamingActivity extends Activity {
    private SurfaceView mSurfaceView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_remote_streaming);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        handleGestures();
        mSurfaceView = (SurfaceView) findViewById(R.id.surface);

        SessionBuilder.getInstance()
            .setSurfaceView(mSurfaceView)
            .setPreviewOrientation(90)
            .setContext(getApplicationContext())
            .setAudioEncoder(SessionBuilder.AUDIO_NONE)
            .setVideoEncoder(SessionBuilder.VIDEO_H264);

        this.startService(new Intent(this,RtspServer.class));
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        this.stopService(new Intent(this, RtspServer.class));
    }
} 
```

如果您想测试 rstp 服务器是否正在运行，您可以尝试使用 VLC 并通过 URL 连接：rstp://{ipAddressOfYourDevice}:8086?h264=200-20-320-240

# jquery-mobile - JQueryMobile 听点击

> ID：13754818
> 
> 赞同：2
> 
> 时间：2012-12-06T23:57:45.590
> 
> 标签：jquery-mobile, jquery

我试图了解 jQueryMobile 导航中的页面事件，但我发现了一些非常奇怪的行为，因为一些事件处理程序被多次调用：

我有两个页面：home.html 和 disclaimer.html。两者都包含相同的标题：

```
<head>
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/events.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script>
</head> 
```

在 home.html 页面上有一个链接：

```
<section data-role="page" id="home">
    <a href="#" id="test">Test</a>
</section> 
```

在文件 events.js 中是以下代码：

```
var i = 0;

$(document).on('pageinit', 'section#home', function(event) {
    console.log(i++, 'pageinit');
    $('a#test').on('click', function() {
        console.log(i++, 'click pageinit');
    });
});

$(document).on('pagebeforeshow', 'section#home', function(event) {
    console.log(i++, 'pagebeforeshow');
    $('a#test').on('click', function() {
        console.log(i++, 'click pagebeforeshow');
    });
}); 
```

然后我执行以下步骤：

1.  导航到 home.html (http)
2.  点击链接
3.  转到 disclaimer.html (ajax)
4.  转到 home.html (ajax)
5.  点击链接

使用以下控制台输出：

```
0 "pageinit"             // step 1
1 "pagebeforeshow"
2 "click pageinit"       // step 2
3 "click pagebeforeshow"
4 "pagebeforeshow"       // step 4
5 "click pageinit"       // step 5
6 "click pagebeforeshow"
7 "click pagebeforeshow" 
```

有道理，对吧？**但现在奇怪的部分**。当我更改访问页面的顺序时：行为会发生变化。

1.  导航到 disclaimer.html (http)
2.  转到 home.html (ajax)
3.  点击链接
4.  转到 disclaimer.html (ajax)
5.  转到 home.html (ajax)
6.  点击链接

控制台输出：

```
0 "pageinit"             // step 2
1 "pagebeforeshow"
2 "click pageinit"       // step 3
3 "click pagebeforeshow"
4 "pageinit"             // step 5
5 "pagebeforeshow"
6 "click pageinit"       // step 6
7 "click pagebeforeshow" 
```

这很奇怪，因为我希望第 6 个和第 7 个结果被重复。

对不起，很长的问题。我希望有人能准确地向我解释发生了什么，如果这是预期的行为？

**tldr;** 你在哪里监听 jQueryMobile 中的（点击）事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:10:10.017

简而言之：在 jQueryMobile 中，你应该在里面监听（绑定）你的事件`pageinit`；这相当于（或多或少）jQuery 的`ready`事件。这是[jQueryMobile](http://jquerymobile.com/test/docs/api/events.html)的人推荐的。

`pageinit`一旦页面被加载和初始化（通过 AJAX 或 HTTP）触发，但`pagebeforeshow`如果页面已经在 DOM 中，可能会被触发多次，例如在关闭 jQueryMobile 对话框之后。每次再次显示页面时，您绑定的任何`pagebeforeshow`内容都会再次重新绑定。这就是为什么你有两次*点击 pagebeforeshow*。

## 编辑：你的测试的解释

我复制了您的 2 个 html 页面和 js 文件，并在两个测试中重复了所有步骤。

在您的第一次测试中，您有：

1.  **导航到 home.html (http)**：它绑定（通过委托文档）和触发器`pageinit`和`pagebeforeshow`（日志 0 和 1），因为您的页面已初始化并将显示。这还将其他两个函数绑定到链接（重要：在这种情况下不是委托，而是直接绑定！）。这是该测试中唯一一次加载和执行“events.js”。
2.  **单击链接**：这会按预期执行*click pageinit*和*click pagebeforeshow*（日志 2 和 3），因为步骤 1。
3.  **转到 disclaimer.html (ajax)**：这不显示任何日志。
4.  **转到 home.html (ajax)**：因为“home.html”仍在 DOM 中，这会触发`pagebeforeshow`，正如您在日志 (4) 中看到的那样。这也会执行链接中的绑定。注意：我怀疑在此步骤中“disclaimer.html”已从 DOM 中删除（在第二次测试中对此进行了更多介绍）。
5.  **单击链接**：显示树日志，前 2 个因为第 1 步，最后一个（重复）因为第 4 步。

在您的第二次测试中，您有：

1.  **导航到 disclaimer.html (http)**：它绑定`pageinit`和`pagebeforeshow`，但不显示日志，因为没有触发任何事件；这两个事件都被绑定到`document`（通过委托），所以如果特定页面还没有在 DOM 中并不重要。这是该测试中唯一一次加载和执行“events.js”。
2.  **转到 home.html (ajax)**：它触发`pageinit`并且`pagebeforeshow`您可以看到日志 0 和 1。当两个事件都被触发时，相应的点击事件被绑定到链接（直接绑定！）
3.  **单击链接**：此步骤按预期显示日志 2 和 3。
4.  **转到 disclaimer.html (ajax)**：日志中没有显示任何内容......但是：jQueryMobile 决定应该从 DOM 中删除“home.html”！这是因为一旦您导航到另一个页面，JQM 就会删除每个页面。请注意，“disclaimer.html”永远不会从 DOM 中删除，因为他是它的“所有者”。
5.  **转到 home.html (ajax)**：这一步触发`pageinit`和`pagebeforeshow`（因为这两个事件仍然绑定到文档对象），如您在日志 4 和 5 中所见。这将两个函数绑定到链接，就像在步骤 2 中一样，但是...（见下一步）
6.  **点击链接**：这里是你说*“我希望第 6 和第 7 个结果被重复”的*地方；好吧，它们没有被复制，因为整个页面（包含链接的 div）及其所有内容都已从 DOM 中删除，并且您*直接*绑定到链接的第一次点击事件（在步骤 2 中）都消失了！因此您只能看到由步骤 5 中的绑定引起的日志。

如果我（最终）理解了 JQM 事件的工作原理，则加载的第一个页面（通过完整的 HTTP 请求）将保留在 DOM 中，直到用户导航到外部页面或重新加载页面（通过 F5 或 CTRL+R）。任何其他页面（通过 AJAX 加载）都会添加到“主”DOM，然后在您导航到另一个页面时从其中卸载/删除。因此：如果您在`pageinit`（直接绑定或最多委托给其父 div[data-role:page]）中进行所有绑定，则无需担心重复的事件绑定。

PD：如果你注意到我的写作方式有些奇怪，可能是因为我不习惯用被动语态用英语说/写，有时我会混淆介词：P

# android - 4.2 中的 Android Wakelocks 用于闪烁屏幕

> ID：13754820
> 
> 赞同：2
> 
> 时间：2012-12-06T23:57:58.737
> 
> 标签：android, android-screen, android-wake-lock

在 4.2 之前的 android 版本中，我曾经有一些代码在通知进入应用程序时闪烁屏幕（如果用户希望它闪烁）。我用了：

```
PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(
                     PowerManager.SCREEN_DIM_WAKE_LOCK | 
                     PowerManager.ACQUIRE_CAUSES_WAKEUP, "example_tag"
                                         );
wl.acquire();

//this would switch the screen on
//then after a little while I'd call
wl.release(); 
```

因此，“获取”方法将打开屏幕（如果尚未打开），“释放”方法将直接将其关闭。

在 android 4.2 中，当您释放唤醒锁时似乎不会发生关闭，但只有在达到显示器的屏幕超时设置时才会发生关闭（默认似乎是 2 分钟）

释放唤醒锁时，有什么方法可以关闭它。我在 API 中看到了一些关于专门打开和关闭屏幕的内容，但我有点不确定是否使用，因为如果有人正在做某事，我不希望应用程序关闭屏幕，所以唤醒锁似乎运作良好。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T06:20:11.503

我发现它的唯一方法是将屏幕超时设置为很短的时间，但存储默认值并在完成后恢复它。这将在最短的时间内将其降低到大约 5-7 秒，并且您必须小心之后正确恢复设置，因为这确实是一个彻底的黑客攻击。

# ms-access - 达到某个阈值后，使用时间戳更新访问记录

> ID：13754821
> 
> 赞同：2
> 
> 时间：2012-12-06T23:57:58.300
> 
> 标签：ms-access

抱歉，我在访问方面有点新手，我似乎无法找到以下解决方案：

我有一个简单的访问数据库，用于监控在一项任务上花费的小时数。在此活动超过 7 小时时，我希望更新记录以表明这一事实，可能带有一个时间戳，指示超出该时间的月份和年份。

有关在任务上花费的小时数的信息将在一个月中的某一天手动输入，并且可以在多个月内收集 7 个以上的小时数。然而，有必要能够从数据中生成报告，其中显示有多少任务超过了 7 小时，以及这发生在哪个月。

如何设置自动规则/操作以更新 7 小时阈值的记录？（每条记录当前包含一个单独的字段，记录了运行总小时数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T18:29:16.587

如果您使用表单将新记录插入表中，有多种方法可以执行此操作。如果您对 VBA 有所了解，这也会有所帮助

如果您使用的是 MS Access 2013，您还可以使用数据宏（SQL Server 触发器的 MS Access 等效项）。

假设您使用的是较低版本的 Access 并假设您正在使用表单将数据插入/更新到表中，可以执行以下操作：

```
1\. Create a query that summarize all hours spent group by taskID (*SELECT TaskID, SUM(Task_Hours) AS TotalHours FROM Tasks GROUP BY TaskID*  let call this Query TasksTotals)
2\. Modify your Tasks table to Include Date/Time you can call it TaskDate) and another field called SeventhHourReached with a Boolean or a text value to be Yes or No
3\. Create another Query that filters all tasks that have already reached the 7th hours (SELECT TaskID FROM Tasks Where SevethHourdReached ="Yes" GROUP by TaskID) - Lets call this query Tasks7H 
```

现在你需要做一些 VAB

在您的表单的***当前事件过程中或******在更新后***的表单字段小时数 中，在 VBA 中使用以下事件过程

```
If DLookup("TotalHours", "TasksTotals", "TaskID = " & Me.TaskID &"") >= 7 Then
  If DLookup("TaskID", "Tasks7h", "TaskID = " Me.TaskID & "") <> Me.TaskID Then
  Me.SevethHoursReached = "Yes" ----- This is you used a text field
  End If
End if 
```

确保 SevethHourReached 字段显示在您的表单上，但已禁用或锁定或禁用并锁定。

对于您的报告，如果您刚刚使用函数 now() 作为 TaskDate 字段的默认值，您将获得到达第七个小时的日期和时间。您可以为您的报告查询过滤所有 sevethhourreached 为 yes 的记录。

# c - 客户端读取的字节数少于服务器在套接字上发送的字节数

> ID：13754825
> 
> 赞同：1
> 
> 时间：2012-12-06T23:58:45.467
> 
> 标签：c, sockets

我的服务器代码如下：

```
while(bytes_written < filesize){
                    //Send from send_ptr
                    bw = send(child_socket, send_ptr, newLength, 0);
                    printf("%d bytes written\n", (int)bw);
                    //Increment bytes written
                    bytes_written += bw;
                    //Move send pointer
                    send_ptr = send_ptr + bw;
} 
```

我的客户端代码如下：

```
while((num_bytes_recv = read(sd, jpgBufferPointer, BUFFER_LENGTH))>0){
        total_bytes_recv += num_bytes_recv;
        printf("Read %d bytes\n",num_bytes_recv);

        //Check for error
        if(jpgError == NULL)
            jpgError = strstr(jpgBufferPointer, "404 Not Found");

        if(jpgError != NULL){
            //Forwarding error response
            if(send(sd, jpgBuffer, num_bytes_recv, 0) == -1){
                error("Failed to send response message to client"); 
            }
        }   
        else{
            //Find content size
            contentSizeBuffer = strstr(jpgBufferPointer,"Content-Length");

            if(contentSizeBuffer != NULL){
                contentSizeBuffer=contentSizeBuffer+16;
                contentSize=atoi(contentSizeBuffer);                    
                jpgBuffer=(char*)realloc(jpgBuffer,(contentSize+FILE_NAME_LENGTH*2)*sizeof(char));
                jpgBufferPointer=jpgBuffer;
            }
            jpgBufferPointer+=num_bytes_recv;
        }
    } 
```

服务器说它已经发送了所有 43000 字节，但客户端说它只收到了 32768 字节。

感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:09:02.063

您在发送部分有一个错误，您应该更新 newLength，因为如果您还有 1 个字节要从文件发送，它将发送更多，超出存储您要发送的内容的内存区域。您应该以这种方式修复：

```
bw = send(child_socket, send_ptr, newLength<(filesize-bytes_written)?newLength:(filesize-bytes_written), 0); 
```

这样，最后一次发送将具有正确的大小。

此外，如果您不使用任何标志，请使用 write 而不是 send。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:02:41.570

您需要在读取端具有与写入端（bytes_written < filesize）类似的循环（即，虽然您可以读取更多字节，但您应该读取它们并附加它们）。

网络不保证一次 read() 调用将返回所有可用数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:21:46.207

编写客户端-服务器套接字编程的最佳方式是在数据之前有一个标头。标头应说明将要传输的数据量。

例如，要发送数据“Hello World”，则发送为“0011+HELLO WORLD”

这里的 11 代表发送者现在计划发送的数据的大小。读取前 4 个字节的接收者可以理解他应该准备好从发送者读取接下来的 11 个字节的数据。

因此阅读器将进行两次读取： hRead = 5 /* 使用 5 您是说它可以从数据中读取最多 9999 个字节。read(sd, buff, hRead); dRead = atoi(buff); readn(sd, buff , d 读);

例如：服务器

```
 size_t sendn(int fd, const void *vptr, size_t n) {
   size_t nleft;
   size_t nwritten;
   const char *ptr;

   ptr = vptr;
   nleft = n;
   while (nleft > 0) {
       if ((nwritten = send(fd, vptr, nleft, 0)) <= 0) {
          if (errno == EINTR)
               nwritten = 0;
          else {
              fprintf(stderr, "send failed  %d - %s\n", fd, strerror(errno));
              return (-1);
          }
        }
        nleft -= nwritten;
        ptr += nwritten;
   }
   return (n);
  } 
```

要发送消息：

```
 sprintf(buff, "%d + %d + %s\r\n", MSG_LOGIN, strlen("Hello World"), Hello World);
  sendn(sd, buff, strlen(buff)); 
```

客户：

```
 size_t readn(int fd, void *vptr, size_t n) {
  size_t nleft;
  size_t nread;
  char *ptr;

  ptr = vptr;
  nleft = n;
  while (nleft > 0) {
      if ((nread = recv(fd, ptr, nleft, 0)) < 0) {
          if (errno == EINTR)
              nread = 0;
          else {
              fprintf(stderr, "read failed %d - %s\n", fd, strerror(errno));
              return (-1);
          }
      } else if (nread == 0)
          break;

      nleft -= nread;
      ptr += nread;
  }
  return (n - nleft);
} 
```

# javascript - 将 JSON 字符串转换为日期

> ID：13754838
> 
> 赞同：3
> 
> 时间：2012-12-07T00:00:31.507
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [将 Unix 时间戳转换为 Javascript 中的时间](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

我正在尝试转换[此 api 返回](http://api.bukget.org/api2/bukkit/plugin/essentials)日期的字符串。格式为`1351993013`. 我尝试了以下 JS 行，但日期完全错误。

```
var jsonDate = plugin.versions[0].date;
var pluginDate = new Date(jsonDate); 
```

返回：

```
Fri Jan 16 1970 
```

这是我第一次尝试格式化 JSON 日期，所以有点混乱。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T00:02:21.007

那将是几秒钟，而javascript使用毫秒，这将是

```
1351993013​000 
```

这会给你 2012 年 11 月 4 日星期日。

换句话说：

```
var jsonDate = parseInt(plugin.versions[0].date, 10) * 1000; 
```

# c# - Entity Framework 5 和 TPT 设计问题

> ID：13754839
> 
> 赞同：2
> 
> 时间：2012-12-07T00:00:35.220
> 
> 标签：c#, entity-framework

我首先编写代码并使用 Table-per-type 设计。将第二个对象扩展到多个表时出现以下错误：

跨实体或关联共享的值在多个位置生成。检查映射是否不会将 EntityKey 拆分为多个存储生成的列。

我的数据库看起来像：

感谢您的投票，编辑添加我的图片： ![在此处输入图像描述](../Images/f5edab446cb2c5a34a5c5e043167c126.png)

该项目的 POCO 如下所示：

```
public abstract class Project {
    public int ProjectID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
    public virtual ICollection<LocationElement> LocationElements { get; set; }

    public abstract string getProjectIdentifier();

} 
```

对于位置元素：

```
public enum HowObtainedCodes {
    Provided = 1,
    Estimated = 2,
    Summarized = 3
}
public abstract class LocationElement {
    public int LocationElementID { get; set; }
    public int ProjectID { get; set; }
    public HowObtainedCodes HowObtainedCodeID { get; set; }
} 
```

还有一点：

```
[Table("ProvidedPoints")]
public class ProvidedPoint : LocationElement {
    public double Lat { get; set; }
    public double Long { get; set; }
    public string Description { get; set; }
} 
```

从项目（抽象）到科学许可证的链接工作正常，我的对象按预期加载/持续存在。此外，如果我使它不是抽象的，我可以添加 LocationElements 对象。一旦我扩展 LocationElements 并尝试保存一个 ProvidedPoint 对象，我就会收到上述消息。我的第一个想法是，ProvidedPoints 上的 LocationElementID 被设置为 Identity 列，但事实并非如此。

我的问题是：通过尝试以这种方式将两个 TPT 对象链接在一起，我是否做了一些意想不到的事情？我还缺少其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:00:17.100

正如上面@leppie 所指出的，我必须使用注释 [Table("LocationElements")] 来装饰 LocationElement 类，这立即解决了问题。我对 EF 的理解是，对于 TPT 设计的基表来说，这不是必需的，而且我还没有在 Project / ScientificLicence 对上完成它（也就是说，我只装饰了 ScientificLicence 对象）。

我假设这与我保存新项目对象时添加/持久化 LocationElements 的方式有关。如果有人有任何额外的见解，我很想知道更多。

希望这对其他人有帮助，非常感谢leppie！

# android - Java 程序在 Android 中不执行

> ID：13754840
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:00:36.047
> 
> 标签：android

我正在android中做一个天气项目。该信息来自给定的 URL，该 URL 是静态的并包含城市列表。例如：`HTTP://myexample/info/?cities`显示城市列表。`HTTP://myexample/info/?tokyo` 将显示：日本东京。

我已经完成了布局以写下要执行的城市名称：

```
xmlns:tools=["http://schemas.android.com/tools"]
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".Meteo" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingTop="40dp"
    android:weightSum="4">

    <LinearLayout 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="3">              

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/soleil" />
    </LinearLayout> 
            <LinearLayout 
            android:orientation="horizontal"
        android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:weightSum="4">

            <EditText
                android:id="@+id/editText1"
                android:layout_width="170dp"
                android:layout_height="wrap_content"
                android:ems="10" >
            <requestFocus />
            </EditText>
            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/button" />

</LinearLayout> 
```

但是 Java 程序不执行。仅执行布局：

```
public class Demo {

public static void main(String[] args) {

    // URL
    String url = "$HTTP://myexample/info/?cities$";

    // Weather information

    String weather = "Tokyo, Japan#15.5#Sun ##";

    // Get the city name
    String city = url.substring(url.indexOf("?") + 1).trim();

    System.out.println(city);
    // Check the weather of the city: 15.5#Sun
    // Remove city name
    // Remove last #

    if (weather.toLowerCase().contains(city.toLowerCase())) {

        // Get condition: 

        String condition = weather.substring(weather.indexOf("#") + 1,
                weather.length() - 2);
        System.out.println(condition);
        // Split with # sign and you have a list of conditions

        String[] information = condition.split("#");
        for (int i = 0; i < information.length; i++) {

            System.out.println(information[i]);
        }
    }
}
} 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:06:44.340

查找[活动](http://developer.android.com/reference/android/app/Activity.html)。在 Android 中，您必须创建一个扩展 Activity 的类。方法的等价物`main()`是`OnCreate()`方法。在这种方法中，您可以设置布局`setContentView(layout id)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:11:09.650

当然`main()`方法在android中是不支持的。

```
public static void main(String[] args) {

      // .... 

} 
```

改为使用`Activity`。

```
public class MyActivity extendsActivity
{

    @Override
    protected void onCreate(Bundle saveInstance)
    {
       // This method will be called first
       super.onCreate(saveInstance);
       // Your definition
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:11:08.437

您的主要问题是您试图将**Android**应用程序作为**Java**应用程序运行。

```
public static void main(String[] args) 
```

是**Java**应用程序的标准入口点。

在**Android**中，情况有些不同。

首先，类**Demo**必须扩展**Activity**：

```
public class Demo extends Activity 
```

其次，您必须实现特殊方法，这些方法在应用程序生命周期的特定时刻被调用，最重要的是：

```
public void onCreate(Bundle savedInstanceState) { }

protected void onPause()  { }

protected void onResume() { } 
```

[您应该在Android Developers Site](http://developer.android.com/index.html)查看相应的文档。

# c# - 在运行时从数据库表生成视图

> ID：13754841
> 
> 赞同：1
> 
> 时间：2012-12-07T00:00:45.730
> 
> 标签：c#, asp.net-mvc, runtime, multiviews

我有一个关于如何使用 MVC 框架生成多视图（视图控件）的技术问题，其中视图是动态生成的（从数据库获取详细信息）。

根据 asp.net，视图（控件）的生成将需要放置在页面的 PreInit 或 Load 事件中。需要一些关于如何继续的技术指导。

还是再次使用问题是如何做的好习惯。也欢迎任何其他替代解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:14:32.680

你可能应该尝试这样的事情：

[根据 XML 配置生成 ASP.NET MVC 视图控件](http://blogs.microsoft.co.il/blogs/gilf/archive/2012/04/23/generating-asp-net-mvc-view-controls-according-to-xml-configurations.aspx)

数据源是 XML，但这没关系；您应该能够将该技术应用于包含视图元数据的数据库表。

编辑器表单的“元视图”代码如下所示：

```
@model DynamicControlsCreation.ViewModels.DefaultControlsViewModel 
<p>
    @using (Html.BeginForm())
    {
        for (int i = 0; i < Model.Controls.Count; i++)
        {         
        <div>
            @Html.HiddenFor(x => x.Controls[i].Type)
            @Html.HiddenFor(x => x.Controls[i].Name)
            @Html.EditorFor(x => x.Controls[i])
        </div>       
        } 

        <input type="submit" value="Submit" /> 
    }
</p> 
```

请注意，当您以这种方式生成视图时，您不会获得太多“形状”；它主要用于配置表单之类的东西。尽管您可以将元数据放入数据库中，例如页面上控件的位置，但当您完成所有这些操作时，您最好还是制作常规视图。

# java - 登陆页面有效 - 链接页面无效 - HTTP 状态 500 - 绝对 uri：http://java.sun.com/jsp/jstl/core 无法在 web.xml 中解析

> ID：13754844
> 
> 赞同：1
> 
> 时间：2012-12-07T00:01:04.800
> 
> 标签：java, jstl, tomcat7

登陆页面有效 - 链接页面无效 - HTTP 状态 500 - 绝对 uri：http: [//java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core)无法在 web.xml 或随此应用程序部署的 jar 文件中解析

我对 java/tomcat 比较陌生，所以请温柔一点。

我正在将 Java Web 应用程序从 Tomcat 5.5 移动到 Tomcat 7.0.30。定义了 26 个容器。它们适用于 Tomcat 5.5 安装。我花了几个小时甚至几天的时间阅读和尝试各种事情。我已经阅读了[jstl wiki](https://stackoverflow.com/tags/jstl/info)，有趣的阅读但无济于事。

问题是当您登陆主机 URL 时，登陆页面正常。登陆页面使用 jstl 来解析图像。当脚本尝试 'window.location=""' 我得到 500 的 http 状态。

Tomcat 7 bin 库没有任何 JSTL 库。我依靠 WEB-INF 文件下的 lib 目录来包含 jstl 库文件。从我的角度来看，假设 server.xml 设置正确，我应该能够将 Tomcat 5.5 上的文件复制到 Tomcat 7.0 并且它应该运行。

catalina.out 文件在启动时似乎没有错误（除了我触摸其中一个链接页面时）。

我们确实有一个使用端口 443 定义的安全主机。我能够将应用程序复制到该目录下的目录并能够访问它。该网站的链接有效！

当我在做的时候。如果在“META-INF”中定义了一个上下文容器，并且在 server.xml 中定义了一个上下文容器，这需要先决条件吗？求知者想知道。

谢谢

更新：似乎如果我通过在 webapps 目录中放置一个war文件进行部署；让它创建目录并部署应用程序愚蠢的事情！

不幸的是，我需要将应用程序部署到 webapps 目录结构之外的位置。(/web/httpd/abc.com) 在 server.xml 文件中，我将主机定义为

```
<Host name="abc.com" appBase="/c:/web/httpd/abc.com"> 
```

更重要的是，我的“错误”存在于我在 Linux 机器上的 tomcat 测试台和我的 Windows PC 上。

# android - Android：蓝牙无法获取端口号

> ID：13754848
> 
> 赞同：8
> 
> 时间：2012-12-07T00:01:28.290
> 
> 标签：android, bluetooth

我在我的应用程序中使用蓝牙时遇到了问题。似乎在创建 28 `BluetoothSocket`/之后`BluetoothServerSockets`，所有端口都被占用了。套接字不需要同时打开，自从启用蓝牙以来，它只有 28 个套接字。

这可以使用[Android 示例](http://developer.android.com/tools/samples/index.html "安卓示例")中提供的 BluetoothChat 示例进行复制。只需打开和关闭应用程序 15 次（应用程序每次创建 2 个套接字）。第 15 次，它会崩溃，并且会继续崩溃，直到您禁用然后重新启用蓝牙：

```
12-06 18:43:58.177: E/BluetoothSocket(18530): bindListen, fail to get port number, exception: java.io.IOException: read failed, socket might closed, read ret: -1
12-06 18:43:58.193: E/BluetoothChatService(18530): Socket Type: Insecurelisten() failed
12-06 18:43:58.193: E/BluetoothChatService(18530): java.io.IOException: Error: -1
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.bluetooth.BluetoothAdapter.createNewRfcommSocketAndRecord(BluetoothAdapter.java:1035)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.bluetooth.BluetoothAdapter.listenUsingInsecureRfcommWithServiceRecord(BluetoothAdapter.java:982)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at com.example.android.BluetoothChat.BluetoothChatService$AcceptThread.<init>(BluetoothChatService.java:280)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at com.example.android.BluetoothChat.BluetoothChatService.start(BluetoothChatService.java:119)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at com.example.android.BluetoothChat.BluetoothChat.onResume(BluetoothChat.java:131)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.Activity.performResume(Activity.java:5182)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.os.Looper.loop(Looper.java:137)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at java.lang.reflect.Method.invokeNative(Native Method)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at java.lang.reflect.Method.invoke(Method.java:511)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-06 18:43:58.193: E/BluetoothChatService(18530):  at dalvik.system.NativeStart.main(Native Method) 
```

套接字关闭后有没有办法释放端口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T18:59:44.090

我可以在我在这里拥有的设备上验证此行为；尽管以相同方式崩溃所需的次数因设备而异（我认为运行 4.2 的 Galaxy Nexus 需要 20-25 次），因此可用端口句柄的数量似乎有所不同。我还可以提供有关问题不是示例应用程序（或您的应用程序）中的内存泄漏的信息，因为所有实例`BluetoothSocket`都已由 Dalvik 释放和关闭。此处列出的步骤仅在 上测试该问题`BluetoothServerSocket`，因此不清楚该问题是否与该问题特别相关，尽管这似乎不太可能。

至少在我的设备上，在切换蓝牙适配器的状态之前，您甚至无法再次启动应用程序，因此问题肯定出在堆栈上连接的底层管理中。

[我会在http://b.android.com](http://b.android.com)上提交一个带有重现步骤的错误，我很乐意支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T18:13:27.280

要重新连接，我在片段中的定​​时处理程序中使用：

```
BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(MainActivity.mac);
                    // Attempt to connect to the device
                    mChatService.connect(device, true); 
```

为了解决“重新连接超过 28 次时失败”的问题，我每次在失去连接时重新启动服务时都评论道：

```
//BluetoothChatService.this.start(); 
```

我还注释掉了套接字关闭的所有部分：

```
//socket.close();

//mmServerSocket.close();

//mmSocket.close();

//mSecureAcceptThread.cancel(); 
```

并为接受线程添加了一个不为空的检测，并连接了不失败的广告：

```
if(mAdapter != null) {
                        tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,
                                MY_UUID_SECURE);
                    }else{
                        mAdapter = BluetoothAdapter.getDefaultAdapter();
                        //mState = STATE_NONE;
                    } 
```

和

```
if(mmServerSocket != null) {
                        socket = mmServerSocket.accept();
                    } 
```

我仍然得到随机连接断开，但服务重新连接并且一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T22:49:48.147

最近，我不得不钻研为此想出一个解决方案。升级 Android 不是一种选择。

事实证明，如果不是在每次建立/断开连接时销毁和重新创建 mAcceptThread，而是保留原始实例并重新使用它。这可以最大限度地减少错误对您的应用程序的影响。

从 BluetoothChatService 文件中，在 connected() 函数中，不要取消 mAcceptThread：

```
public synchronized void connected(BluetoothSocket socket, BluetoothDevice device) {
...
...
...
// Cancel the accept thread because we only want to connect to one device 
//(Rather stay listening so comment out the cancel line!!) 
//If necessary, use some other state to prevent a second connection.
//DONT CANCEL: if (mAcceptThread != null) {mAcceptThread.cancel(); mAcceptThread = null;}
...
... 
```

在 AcceptThread 类中，修改 run() 函数中的循环：

```
 // Listen to the server socket if we're not connected
//OLD LOOP:            while (mState != STATE_CONNECTED)
//(Rather use STATE_NONE so the loop will only stop when the service does)
            while (mState != STATE_NONE) 
```

您的代码中可能还有其他事情要做以正确实现该想法。

# hibernate - hibernate：检索单个表上的某些字段，但在 where 子句中使用未选择的字段

> ID：13754849
> 
> 赞同：0
> 
> 时间：2012-12-07T00:01:39.137
> 
> 标签：hibernate

我正在寻找使用 spring/maven/hibernate 将我们的人员目录移动到 java 中。

我对特别是在声明我的类和映射时的休眠位有点困惑。

**情况：**

```
I got 10 fields in my table labelled column01 to column10.
I only want to retrieve columns 02, 07 to 10.
But my where clause would be using columns 01, 05 and 06. 
```

1.  当我创建我的类和休眠映射 XML 时，即使我不会使用所有列，声明所有字段是一种好习惯吗？我什至应该声明我只会使用 where 子句的字段吗？

2.  也可以在我的 createSQL 函数中使用数据库特定的函数和关键字（在我的情况下，它是 Oracle）吗？

我查看了 HQL 上的示例和 jboss.org 页面，但无法真正找到我想要的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:34:07.403

1.  如果要使用 HQL（Hibernate 查询语言），则必须在映射中定义 select 子句、where 子句、排序、分组中使用的所有字段。所以最好的答案是你的第一个问题。

2.  是的，你可以，Hibernate 非常了解使用方言的数据库，此外它还支持本机查询，甚至将 DML 查询映射到存储过程调用。只需阅读[文档](https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querysql.html)。

# php - HABTM 关系与 2 $belongsTo 关系与第三个模型的区别

> ID：13754851
> 
> 赞同：0
> 
> 时间：2012-12-07T00:01:51.163
> 
> 标签：php, cakephp, activerecord, cakephp-model

我正在创建一个项目管理系统，将项目分配给用户

`ProjectsUser`创建模型和定义 2`$belongsTo`关系以及`HABTM`在模型`Project`和模型中定义关系有什么区别`User`？但是，最正确的方法是什么？以及如何将数据保存在`projects_users`表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:36:33.037

根据我的经验，如果您只想从连接表（具有 2 个 ID 的表）中保存或删除行，那么使用通过 hasMany 和 belongsTo 关联关联的三个模型要简单得多。

您还可以直接从连接表中检索数据并更轻松地执行您想要的查询

这就是 CakePHP 文档中提到的 HABTM 和保存数据的说法：

> 但是，在大多数情况下，为连接表创建模型并设置 hasMany、belongsTo 关联（如上例所示）比使用 HABTM 关联更容易。

在这里您可以找到更多全文： [http ://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated](http://book.cakephp.org/2.0/en/models/saving-your-data.html#what-to-do-when-habtm-becomes-complicated)

我已将此方法用于“读取”表（带有 post_id 和 user_id）以及订阅和类似类型的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:37:42.557

第一种方式称为“hasAndBelongsToMany” [[详情请点击此处]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)。

第二个称为“hasMany through” [[详情请点击此处]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)。

与“hasMany through”相关的第二个链接包含有关何时以及为什么要使用它的详细信息和冗长的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:14:39.640

不确定 cakephp 的具体细节，但通常显式定义关系模型可以让您对其进行更多控制，例如，如果您想进行一些验证或在创建此关系时添加回调。

# jquery - Backbone.js 中的 PUT 和 POST 请求

> ID：13754852
> 
> 赞同：2
> 
> 时间：2012-12-07T00:01:53.173
> 
> 标签：jquery, backbone.js, backbone-model, backbone-forms

我还有另一个与 PUT 和 POST 请求有关的问题。所以，这里我有一个表单，其中包含以下字段：“名称”和“链接”。

在提交该表单时，我无法在执行 this.model.save(); 时将该表单发布到服务器；

另外，我如何理解模型何时调用 POST 以及何时调用 PUT 请求？由于我的 api 响应中没有任何“id”属性，所以我的模型也没有任何 id。

那么如何在单击“提交”按钮时将表单字段值作为 POST 请求传递？

另外，有没有一种方法可以调用请求：例如：如果我点击表单的“更新”按钮，我将从我的模型中调用一个函数

```
updateModel:function(options){
this.update("update","/messages",[options])
} 
```

或者可以像这样读取获取请求

```
getModel:function(options){
this.update("read","/messages",[options])
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:09:55.750

save 方法会根据 的返回值来决定是 POST 还是 PUT `isNew()`。此方法通常仅检查是否`id`已填充。您可以覆盖它以使用其他指标。

您将提交时的表单字段值直接传递到您的保存方法中。像这样的东西：

```
//In your view
events : {"submit" : "onSubmit"},
onSubmit : function(e) {
  e.preventDefault();
  this.model.save({name: this.$("#name").val()}, {
    success : function (newModel) { /* Do something here. */ }
  });
} 
```

另一种选择是使用类似的库`Backbone.Modelbinder`来为您处理 DOM 和模型之间的同步。

您不需要在模型上定义这些新方法。相反，您应该`url`在模型或相应的控制器上定义适当的方法。然后你可以使用正常的`fetch`和`save`方法来处理你的获取/更新。

# php - 将数据传递到网站和从网站传递

> ID：13754853
> 
> 赞同：0
> 
> 时间：2012-12-07T00:01:59.120
> 
> 标签：php, javascript, mysql

我正在做一个项目，并且在从 mysql 到网站以及从网站到 mysql 获取数据时遇到问题。

这是关于从 mysql 获取数据--> 旋转数据（选择一个更多的值）--> 在网站上显示这个--> 计算访问量，如果有人点击某个链接，将其作为 +1 跟踪到数据库。

为了更好的理解mysql设计：

```
Campaigns Table
-c_id               1             2
-name               Campaign 1    Campaign 2

Parameters Table
-p_id               1             2
-name               Title         Image
-c_id               1             1

Variations Table
-v_id               1             2           3          4
-variation          Welcome1       Welcome2   img1.jpg   img2.jpg
-p_id               1             1           2          2
-c_id               1             1           1          1 
```

因此，当调用 php/js 文件时，它应该返回所有参数（标题、图像）的 1 个变体（Welcome1 或 Welcome2 用于 id 1 的参数 Title 和 img1.jpg 或 img2.jpg 用于 id 2 的参数 Image）。该数据应通过 php echo 或 js 文档写入添加到网站。（php 回声 $parameter1; ）。

之后应该有 onclick on link/s 这样我就可以跟踪用户点击链接的组合。我在这里面临的问题是我不知道如何获取和传递网站上显示的哪些元素（哪些变体）以及如何传递。

这不会被放置在与网站相同的文件夹和域中。只有服务器是相同的。所以我认为访问数据库不会有问题。

我不要求任何东西的完整代码只是为了想法如何使其最简单且有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:45:28.333

该数据库看起来有点奇怪，但如果这适合您，那么它应该没问题。还有一些其他的东西丢失了，我不确定你想要完成什么。

但是，在将参数传递给 JS 或 PHP 时，还会传递变体的 ID，而不仅仅是值。当你传递参数时，通过 Title = Welcome1 TitleId = 1 Image = img1.jpg ImageId = 3

当您创建将带您到另一个页面的链接时，您应该创建它并传递给它 2 个参数 link?TitleId=1&ImageId=3

在获取访问者通过按 TitleId=1 和 ImageId=3 的链接到达那里的链接计数的页面中

# java - Oracle 驱动程序内存泄漏 - Tomcat

> ID：13754858
> 
> 赞同：6
> 
> 时间：2012-12-07T00:02:29.713
> 
> 标签：java, oracle, jakarta-ee, tomcat, jndi

我们使用的是 tomcat-7.0.33。使用 tomcat JNDI 数据源的 Spring 3.0.1 和 JPA。后端使用 ojdbc6.jar（最新）的 Oracle 10g。

当我们尝试取消部署应用程序时，一些 Oracle 类似乎正在泄漏。我在使用较旧的 ojdbc14.jar 驱动程序时看不到这一点，但我们不能使用它们，因为我们正在迁移到需要较新驱动程序的 Oracle 11g。我猜这是Oracle驱动程序中的错误？我能做些什么来清理这些资源吗？我试过关闭数据库连接池和其他东西无济于事......

不使用Tomcat的连接池会更好吗？我们宁愿让服务器连接到数据库，但如果有必要我们可以自己做......

服务器控制台显示：

> 17505 信息 org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - 关闭持久性单元“myManager”的 JPA EntityManagerFactory 17515 信息 org.apache.tiles.access.TilesAccess - 删除上下文的 TilesContext：org.springframework.web.servlet.view.tiles2。 SpringTilesApplicationContextFactory$SpringWildcardServletTilesApplicationContext 2012 年 12 月 6 日下午 6:41:29 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java .lang.ThreadLocal@1468544]）和 [java.lang.Class] 类型的值（值 [class oracle.sql.AnyDataFactory]），但在 Web 应用程序停止时无法将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:29 组织。apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@d73b31]），值类型为 [java .lang.Class]（值 [class oracle.sql.TypeDescriptorFactory]）但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:29 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang. ThreadLocal@13​​aae39]）和类型为 [java.lang.Class] 的值（值 [class oracle.sql.TypeDescriptorFactory]），但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:29 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks 严重：Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang. ThreadLocal@18443b1]) 和 [java.lang.Class] 类型的值（值 [class oracle.sql.AnyDataFactory]），但在 Web 应用程序停止时无法将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:34 org.apache.catalina.startup.HostConfig deleteRedeployResources 信息：取消部署上下文 [/myApp] Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@18443b1]），值类型为 [java.lang.Class]（值 [class oracle .sql.AnyDataFactory]) 但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:34 org.apache.catalina.startup.HostConfig deleteRedeployResources 信息：取消部署上下文 [/myApp] Web 应用程序 [/myApp] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@18443b1]），值类型为 [java.lang.Class]（值 [class oracle .sql.AnyDataFactory]) 但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 6 日下午 6:41:34 org.apache.catalina.startup.HostConfig deleteRedeployResources 信息：取消部署上下文 [/myApp]

我尝试添加一个 ContextListener 来手动关闭我们的 DBCP 连接，但这并没有帮助。

```
InitialContext initial = new InitialContext();

DataSource ds = (DataSource) initial.lookup("java:/comp/env/jdbc/myDS");

if (ds.getConnection() == null) {
    throw new RuntimeException("I failed to find the datasource");
}

LOG.debug("Found datasource.  Closing...");
BasicDataSource bds = (BasicDataSource) ds;

bds.close(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T20:44:46.583

找出问题所在... Toni 有一个很好的建议（但取消注册驱动程序意味着当应用程序重新加载时驱动程序不再可用！）。

在我们的例子中，我们不小心将 ojdbc6.jar 包含在我们的 Web 应用程序和 Tomcat/lib 目录中。这可能导致 Tomcat 使用我们的类加载器来创建对象。因此，当我们的应用程序被卸载时，Tomcat 的 DBCP 池仍然有我们应用程序中类的打开句柄。

从我们的 WEB-INF/lib 中删除 ojdbc6.jar 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:55:43.617

在侦听器中，您还必须取消注册 JDBC 驱动程序（即 ojdbc5.jar 或您正在使用的）。

有关代码片段，请参阅[此](https://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered)SO 问题。

# r - “足够好”的位置字段映射到 R 中的地理热图

> ID：13754859
> 
> 赞同：2
> 
> 时间：2012-12-07T00:02:35.377
> 
> 标签：r, maps, entity, resolver

我正在尝试在 R 中创建用户在世界各个地区的位置热图，但我正在使用的数据集包含一个自由文本位置字段供用户自行填写 - 因此地名的质量差异很大一点点。我可以忽略任何不会解析为已知位置的字符串（这里有足够的好数据供我获取样本），但我似乎无法找到一个容错的地名实体解析器用于R。

另一个问题是，其中一些是城市，其中一些是州，其中一些是国家——理想情况下，我想，我想制作两张地图，一张美国地图，其中所有城市都决心州，以及一张世界地图，其中第一张地图上的所有位置都解析为美国。有没有一种相当简单的方法来做到这一点？

谢谢！

# java - 使用 java 在 JavaScript 中创建文件

> ID：13754861
> 
> 赞同：1
> 
> 时间：2012-12-07T00:02:40.633
> 
> 标签：java, javascript, imacros

首先，我是 iMacros 脚本编写者。这是用于编写文件的 java 函数（不完全完成，但你会明白的）

```
 bufferedWriter = new BufferedWriter(new FileWriter(filename));

            //Start writing to the output stream
            bufferedWriter.write("Writing line one to file"); 
```

下面是 JavaScript 中用于执行与上述函数相同任务的 java 函数，我在 iMacros 中运行该 .js 文件。奇迹般有效。

```
//Function to write the file
function writeFile(filename, data)
{
   try
   { 

      //write the data

      out = new java.io.BufferedWriter(new java.io.FileWriter(filename, true));
      out.newLine();
      out.write(data);
      out.close();
      out=null;
   }
   catch(e)   //catch and report any errors
   {
      alert(""+e);
   }
} 
```

现在我需要一个 java 函数来在硬盘位置创建文件和文件夹，我找到了这个。

包 com.mkyong.file;

导入java.io.File；导入 java.io.IOException；

```
public class CreateFileExample 
{
    public static void main( String[] args )
    {   
        try {

          File file = new File("c:\\newfile.txt");

          if (file.createNewFile()){
            System.out.println("File is created!");
          }else{
            System.out.println("File already exists.");
          }

        } catch (IOException e) {
          e.printStackTrace();
    }
    }
} 
```

但现在我需要创建文件夹和空文件（具有不同的扩展名，如 .txt .csv 等）的 java 函数，并且该函数将在 JavaScript 中工作。

谁能从上面的两个例子中给我一些指导方针？如何用 Java 编写函数并在 JavaScript 中运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:37:59.517

我不会声称完全理解这个问题，但这是确保某个目录存在并在其中创建一个随机文件的方法：

```
// make the dir and ensure the entire path exists
File destinationDir = new File("c:\\whereever\you\want\that\file\to\land").mkdirs();
// make some file in that directory
File file = new File(destinationDir,"whateverfilename.whateverextension");
// continue with your code
if (file.createNewFile()){
    System.out.println("File is created!");
}else{
    System.out.println("File already exists.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:59:39.620

该函数用于 iMacros .js 文件中。它是在 JavaScript 中调用的 Java 方法。

```
createFile("C:\\testingfolder","test.csv");

function createFile(folder,file)
{

destinationDir = new java.io.File(folder).mkdirs();
file = new java.io.File(folder,file);
file.createNewFile();
} 
```

该函数创建文件夹并在其中创建一个文件。

# macos - javafx FileChooser Mac OS NSInternalInconsistencyException

> ID：13754862
> 
> 赞同：3
> 
> 时间：2012-12-07T00:02:48.963
> 
> 标签：macos, javafx, filechooser

我正在尝试使用 javafx FileChooser 打开一个 fileChooser 我正在通过控制器为 FXML 按钮分配一个侦听器，应用程序加载正常，但是当我单击该按钮时，文件选择器随即打开，随后立即崩溃。

这让我发疯，我认为这与从 java 中实现 xcode 接口有关，但是我完全迷失了这一点。

在使用 JavaFx 时是否已经遇到过这种情况？

**我的堆栈跟踪是：**

```
012-12-06 23:24:02.732 java[16800:707] Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
2012-12-06 23:24:02.733 java[16800:707] (
0   CoreFoundation                      0x00007fff8b8c20a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff858393f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8b8c1ee8 +[NSException raise:format:arguments:] + 104
3   Foundation                          0x00007fff89f926a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
4   AppKit                              0x00007fff85d5356c -[NSEvent _initWithCGSEvent:eventRef:] + 2782
5   AppKit                              0x00007fff85fd43ea +[NSEvent eventWithCGEvent:] + 243
6   libglass.dylib                      0x00000001630e300f listenTouchEvents + 31
7   CoreGraphics                        0x00007fff8be07115 processEventTapData + 150
8   CoreGraphics                        0x00007fff8be06f68 _CGYPostEventTapData + 189
9   CoreGraphics                        0x00007fff8be0c26a _XPostEventTapData + 107
10  CoreGraphics                        0x00007fff8be0c362 CGYEventTap_server + 106
11  CoreGraphics                        0x00007fff8be07056 eventTapMessageHandler + 30
12  CoreFoundation                      0x00007fff8b831410 __CFMachPortPerform + 288
13  CoreFoundation                      0x00007fff8b8312d9 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 41
14  CoreFoundation                      0x00007fff8b831019 __CFRunLoopDoSource1 + 153
15  CoreFoundation                      0x00007fff8b86419f __CFRunLoopRun + 1775
16  CoreFoundation                      0x00007fff8b8636b2 CFRunLoopRunSpecific + 290
17  HIToolbox                           0x00007fff882d40a4 RunCurrentEventLoopInMode + 209
18  HIToolbox                           0x00007fff882d3d84 ReceiveNextEventCommon + 166
19  HIToolbox                           0x00007fff882d3cd3 BlockUntilNextEventMatchingListInMode + 62
20  AppKit                              0x00007fff85c74613 _DPSNextEvent + 685
21  AppKit                              0x00007fff85c73ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
22  libglass.dylib                      0x00000001630ce8c3 +[GlassApplication enterNestedEventLoopWithEnv:] + 163
23  libglass.dylib                      0x00000001630d24d3 -[DialogDispatcher runModal] + 163
24  Foundation                          0x00007fff8a012220 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 212
25  Foundation                          0x00007fff8a0120c8 -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:] + 131
26  libglass.dylib                      0x00000001630d29c5 Java_com_sun_glass_ui_mac_MacCommonDialogs__1showFileOpenChooser + 981
27  ???                                 0x0000000101dc3f90 0x0 + 4326178704
)
2012-12-06 23:24:02.734 java[16800:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType' 
```

**首先抛出调用堆栈：**

```
(
0   CoreFoundation                      0x00007fff8b8c20a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff858393f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8b8c1ee8 +[NSException raise:format:arguments:] + 104
3   Foundation                          0x00007fff89f926a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
4   AppKit                              0x00007fff85d5356c -[NSEvent _initWithCGSEvent:eventRef:] + 2782
5   AppKit                              0x00007fff85fd43ea +[NSEvent eventWithCGEvent:] + 243
6   libglass.dylib                      0x00000001630e300f listenTouchEvents + 31
7   CoreGraphics                        0x00007fff8be07115 processEventTapData + 150
8   CoreGraphics                        0x00007fff8be06f68 _CGYPostEventTapData + 189
9   CoreGraphics                        0x00007fff8be0c26a _XPostEventTapData + 107
10  CoreGraphics                        0x00007fff8be0c362 CGYEventTap_server + 106
11  CoreGraphics                        0x00007fff8be07056 eventTapMessageHandler + 30
12  CoreFoundation                      0x00007fff8b831410 __CFMachPortPerform + 288
13  CoreFoundation                      0x00007fff8b8312d9 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 41
14  CoreFoundation                      0x00007fff8b831019 __CFRunLoopDoSource1 + 153
15  CoreFoundation                      0x00007fff8b86419f __CFRunLoopRun + 1775
16  CoreFoundation                      0x00007fff8b8636b2 CFRunLoopRunSpecific + 290
17  HIToolbox                           0x00007fff882d40a4 RunCurrentEventLoopInMode + 209
18  HIToolbox                           0x00007fff882d3d84 ReceiveNextEventCommon + 166
19  HIToolbox                           0x00007fff882d3cd3 BlockUntilNextEventMatchingListInMode + 62
20  AppKit                              0x00007fff85c74613 _DPSNextEvent + 685
21  AppKit                              0x00007fff85c73ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
22  libglass.dylib                      0x00000001630ce8c3 +[GlassApplication enterNestedEventLoopWithEnv:] + 163
23  libglass.dylib                      0x00000001630d24d3 -[DialogDispatcher runModal] + 163
24  Foundation                          0x00007fff8a012220 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 212
25  Foundation                          0x00007fff8a0120c8 -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:] + 131
26  libglass.dylib                      0x00000001630d29c5 Java_com_sun_glass_ui_mac_MacCommonDialogs__1showFileOpenChooser + 981
27  ???                                 0x0000000101dc3f90 0x0 + 4326178704
)
libc++abi.dylib: terminate called throwing an exception 
```

**控制器代码是：**

```
public class AppController implements Initializable {

@FXML
private TableView<Transactions> tableTranactions;
@FXML
private TableColumn<Transactions, Integer> accountID;
@FXML
private TableColumn<Transactions, String> colTranDate;
@FXML
private TableColumn<Transactions, String> colDescription;
@FXML
private TableColumn<Transactions, Double> colAmount;
@FXML
private TableColumn<Transactions, Integer> colCompany;
@FXML
private TableColumn<Transactions, String> colTransType;
@FXML
private Button btnClear;
@FXML
private Button btnFileChoose;
@FXML
private LineChart<String, Double> chartLineSpendingByMonth;
@FXML
private Pane paneGraph;
@FXML
private Pane paneGraphWeek;
@FXML
private Pane paneAddRecord;
@FXML
private PieChart pieSpendingCatalogue;
@FXML
private Label lblTransactions;
@FXML 
private TextField txtFilePath;

@Override
public void initialize(URL arg0, ResourceBundle arg1) {
    // TODO Auto-generated method stub
    System.out.println("starting application");
    showTransactions();
    btnFileChoose.setOnAction(new EventHandler<ActionEvent>() {
    /**
        WHAT IS CAUSING THIS CODE SEGMENT TO FAIL??? **/
    @Override
        public void handle(ActionEvent event) {
            FileChooser fileChooser = new FileChooser();
            fileChooser.setTitle("Select File");
            //Set extension filter
            FileChooser.ExtensionFilter extFilter =
                    new FileChooser.ExtensionFilter("CSV", ".csv");
            fileChooser.getExtensionFilters().add(extFilter);
            //Show open file dialog
            File file = fileChooser.showOpenDialog(null);
           if(file!=null)
               txtFilePath.setText(file.getPath());
        }
    });

}

@FXML
private void showTransactions()
{
    hideAll();
    tableTranactions.setVisible(true);
    btnClear.setVisible(true);

    accountID.setCellValueFactory(new PropertyValueFactory<Transactions, Integer>("accountid"));
    colTranDate.setCellValueFactory(new PropertyValueFactory<Transactions, String>("tranDate"));
    colDescription.setCellValueFactory(new PropertyValueFactory<Transactions, String>("descrip"));
    colAmount.setCellValueFactory(new PropertyValueFactory<Transactions, Double>("amount"));
    colCompany.setCellValueFactory(new PropertyValueFactory<Transactions, Integer>("comid"));
    colTransType.setCellValueFactory(new PropertyValueFactory<Transactions, String>("transType"));

    updateTransactionData();
}

public void hideAll()
{
    tableTranactions.setVisible(false);
    btnClear.setVisible(false);
    paneGraph.setVisible(false);
    paneGraphWeek.setVisible(false);
    paneAddRecord.setVisible(false);
}

public void clearTable()
{
    ObservableList<Transactions> data = tableTranactions.getItems();
    data.removeAll(data);

}
public void updateTransactionData()
{
    TransactionDAO trans = new TransactionDAO();
    ObservableList<Transactions> data = tableTranactions.getItems();
    data.addAll(trans.getAll());
}

public void showAddRecord()
{
    hideAll();

    paneAddRecord.setVisible(true);
}

public void showHistoric()
{
    hideAll();
    CatalogueSpendingDAO catalogue = new CatalogueSpendingDAO();

    ObservableList<PieChart.Data> data = pieSpendingCatalogue.getData();
    ObservableList<CatalogueSpending_total> values = catalogue.getTotal();
    data.removeAll(data);
    for(CatalogueSpending_total i : values)
        {
            data.add(new PieChart.Data(i.getDescription(), i.getTotal()));
        }
    // start adding line chart
    ObservableList<XYChart.Series<String, Double>> spendingByMonthData = chartLineSpendingByMonth.getData();
    Boolean add = false;

    if(spendingByMonthData.size() > 0)
        spendingByMonthData.removeAll(spendingByMonthData);

    XYChart.Series<String, Double> series =  (spendingByMonthData.size() > 0 ? spendingByMonthData.get(0): null);
    if(series == null)
    {
        series = new XYChart.Series<String, Double>();
        add = true;
    }
    SpendingByMonthDAO spendingByMonthDAO = new SpendingByMonthDAO();
    ObservableList<SpendingByMonth> spendingByMonthDatabase =  spendingByMonthDAO.getTotal();

    for(SpendingByMonth i : spendingByMonthDatabase)
    {
        series.getData().add(new XYChart.Data<String, Double>(i.getDate(), i.getTotal()));
    }
    spendingByMonthData.size();
    spendingByMonthData.add(0,series);
    pieSpendingCatalogue.animatedProperty();
    paneGraph.setVisible(true);
}

public void showWeeklyCharts()
{
    hideAll();
    //TODO populate the graphs here
    paneGraphWeek.setVisible(true);
}

} 
```

**系统信息**

*   java 版本：Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
*   操作系统：OS X 10.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:09:50.617

解决了：

运行时编译器是 hava Java 1.7.0 的旧版本

还找到了这个链接：

[https://forums.oracle.com/forums/thread.jspa?threadID=2444130](https://forums.oracle.com/forums/thread.jspa?threadID=2444130)

似乎一旦我通过[http://jdk7.java.net/download.html](http://jdk7.java.net/download.html)将 jdk 更新到 java 版本 7u10 Build b18 问题就消失了:-)

# sphinx - 将 xmlpipe2 与 Sphinx 一起使用

> ID：13754868
> 
> 赞同：0
> 
> 时间：2012-12-07T00:03:50.570
> 
> 标签：sphinx

我正在尝试将大量数据从 Mongo 直接加载到 Sphinx 中；目前我发现的最好的方法是使用 xmlpipe2。

但是，我想知道是否有办法只对数据集进行更新，因为对数十万条记录进行完整的重新索引可能需要一段时间并且对系统来说有点密集。

有一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:30:01.617

主加增量方案。当所有更新都转到单独的较小索引时，如下所述：

[http://sphinxsearch.com/docs/current.html#delta-updates](http://sphinxsearch.com/docs/current.html#delta-updates)

# python - 使用 Numpy/Scipy 和 PulseAudio 的音频数据 IO

> ID：13754874
> 
> 赞同：5
> 
> 时间：2012-12-07T00:04:26.607
> 
> 标签：python, audio, numpy, scipy, pulseaudio

我做了一些挖掘，大多数 PulseAudio 的 python 接口似乎都处理声音服务器控制，而不是音频数据。我想通过 PulseAudio 从 numpy 阵列中获取数据到扬声器，并以相同的方式从麦克风输入中获取声音到 numpy 阵列中。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T21:06:40.807

[python-pulseaudio](https://github.com/Valodim/python-pulseaudio)使用[ctypes](http://docs.python.org/2/library/ctypes.html)并且似乎拥有您需要的一切。您必须注意 numpy 数组的类型并使用它们的缓冲区接口，但这应该是可行的。

我认为使用 ALSA 作为 pulseaudio 之上的层可能会更开心；大多数应用程序似乎都以这种方式工作。[PyAlsaAudio](http://pyalsaaudio.sourceforge.net/pyalsaaudio.html)似乎有你需要的东西。

# google-app-engine - 延迟的 API 调用似乎不在普通的前端实例上运行

> ID：13754875
> 
> 赞同：2
> 
> 时间：2012-12-07T00:04:28.297
> 
> 标签：google-app-engine

使用延迟 API 时，延迟方法（在我的情况下从默认任务队列调用）是否在普通前端实例上运行？

我有一个延迟任务正在运行（肯定在运行，因为它经常记录）但是管理控制台中没有出现任何实例......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:33:16.830

通常它们在单独的实例上运行。但是，如果您当前的实例有/有能力为您的延迟任务提供服务，他们将运行您的任务。

您还可以配置：

```
deferred.defer(function, ...., _target='1.backend1') # run in a backend 
```

或配置为使用可用资源：

```
deferred.defer(function, ...., _headers = {'X-AppEngine-FailFast' : 'True'} ) 
```

当然，这一切都取决于您的应用程序有多忙，您的应用程序是如何配置的，您执行了多少任务，以及......

# android - 从 android.view.GLES20DisplayList 释放位图

> ID：13754876
> 
> 赞同：7
> 
> 时间：2012-12-07T00:04:27.763
> 
> 标签：android, memory-leaks, out-of-memory

有谁知道如何从 android.view.GLES20DisplayList 释放位图。为什么即使你手动清理 ImageView 也能让它们保持活力？或者也许有一种方法可以禁用 GLES20DisplayList，尝试在 AndroidManifest 中使用 android:hardwareAccelerated="false"，仍然没有运气。

看起来只在 4.2(1) 中受到影响

**更新：**看起来你不能在 4.2.1 上禁用硬件加速（错误？）

简单测试：

```
Android manifest:
application ... android:hardwareAccelerated="false"

System.out.println("isHardwareAccelerated: " + mListView.isHardwareAccelerated());
mListView.setLayerType(LAYER_TYPE_SOFTWARE, null);
System.out.println("isHardwareAccelerated: " + mListView.isHardwareAccelerated()); 
```

结果：

```
12-06 17:15:27.129: I/System.out(30752): isHardwareAccelerated: true
12-06 17:15:27.129: I/System.out(30752): isHardwareAccelerated: true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:45:42.437

这似乎是 4.2 中的内存泄漏。看起来这个修复程序是针对它的：[https ://android.googlesource.com/platform/frameworks/base/+/034de6b1ec561797a2422314e6ef03e3cd3e08e0](https://android.googlesource.com/platform/frameworks/base/+/034de6b1ec561797a2422314e6ef03e3cd3e08e0)

对于遇到此问题的活动，我在 4.2 的清单中禁用了硬件加速，这有助于 android.view.GLES20DisplayList 内存保持。

在活动清单中： `android:hardwareAccelerated="@bool/gpu_enabled"`

在 v17 的 values.xml 中：

```
<bool name="gpu_enabled">false</bool> 
```

在默认 values.xml 中，我将其设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T05:59:11.173

我最近对这个问题进行了深入的内存分析。正如 Yulia 上面指出的那样，禁用硬件加速通常可以解决问题。或者，您可以将 ImageView 的 Drawable 设置为 null，回收位图，或按照您的指示分离 ImageView。

但是，根据 API 版本，位图内存可能会或可能不会从 GLES20DisplayList 中释放。[我在我的博文——Android 位图内存分析](http://lab.tigerpenguin.com/2014/03/android-bitmap-memory-analysis-part-3.html)中深入讨论了这些不同的行为和可能的解决方案，但快速的解决方案是禁用硬件加速。

# php - 使用 Codeigniter 从结果集中获取值

> ID：13754877
> 
> 赞同：1
> 
> 时间：2012-12-07T00:04:29.927
> 
> 标签：php, mysql, codeigniter, activerecord

在我的模型中，我有这个片段

```
$this->db->select('*');
        $this->db->from('User');
        $this->db->where('email', $mail);
        $query = $this->db->get();

        return $query; 
```

据我所知，$query 是一个数组（一组结果），我想检索该数组中某个字段的特定值以将其返回或将其分配给另一个变量，问题是如何？

我想做这样的事情

```
$value = $query['first_field_of_resultset'];
return $value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:05:48.247

有[很多不同的方法可以得到结果](http://ellislab.com/codeigniter/user-guide/database/results.html)。这是一个：

```
$user = $query->row(); 
echo $user->first_field_of_resultset; 
```

如果您更喜欢数组：

```
$user = $query->row_array();
echo $user['first_field_of_resultset']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:18:03.797

如果你想要第一行，你可以这样做：

```
$row = $query->first_row(); 
```

但是如果您只需要一列，我不知道为什么要重新搜索所有字段：

```
$this->db->select('user.the_column_to_select'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T02:37:47.777

扩展约翰斯的答案，你需要保护自己，以防万一在你的模型方法中没有任何结果：

```
// make sure we have a result
if ( $query->num_rows() == 1 ) 
{  
// assign the result 
$user = $query->row();  
// pull out the field you want 
$value = $user->first_field_of_resultset;
// return it
return $value ; 
}
else { return FALSE; } 
```

然后在你的控制器中，说如果模型被称为 user_model

```
if(! $value = $this->user_model->getUser($email) )
{
 // boo hoo no results
} 
else
{
// success
} 
```

当然，这假设您已经通过 CI 表单验证运行 $email 以确保它是有效的电子邮件 - 在发送到您的数据库之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T00:17:45.530

$query 是一个对象。因此，为了将结果作为数组获得，您需要执行以下操作。

```
$result = $query->result_array();
return $result[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T00:13:54.147

你也可以试试这个：

```
$email = $this->db->select('email')->from('users')->where(array(
      'userID' => $userID))->limit(1)->get()->row('email');

// $email will either be the email address you're looking for or FALSE 
```

# jquery - 如何让 Jquery 只关注当前的 HTML“选择”并只删除当前的“选项”

> ID：13754878
> 
> 赞同：0
> 
> 时间：2012-12-07T00:04:30.833
> 
> 标签：jquery, html, select

我有这段代码，我让它删除了我的第一个“选项”，因为第一个选项说“请选择：”。无论如何，问题是，当我专注于我的第一个“选择”时，它会从每个选择中删除第一个“选项”。如何使其仅从当前关注的对象中删除？

```
$(document).ready(function(){

  $('select').live('focus',function() {
   $('.firstoption').remove();
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:05:46.467

```
$(document).ready(function(){

  $('select:first').on('focus',function() {
   $(this).children("option:first").remove();
  });

}); 
```

示例：http: [//jsfiddle.net/Ky6zq/2/](http://jsfiddle.net/Ky6zq/2/)

这将在每次选择获得焦点时执行，因此您每次都将继续删除元素。为防止出现此问题，请尝试：

```
$(document).ready(function(){

  $('select:first').one('focus',function() {
   $(this).children("option:first").remove();
  }); 
}); 
```

示例：http: [//jsfiddle.net/Ky6zq/1/](http://jsfiddle.net/Ky6zq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:10:06.317

```
$(document).ready(function(){
   $(document).on('focus', 'select', function() {
       $('.firstoption', this).remove();
   });
}); 
```

您应该使用 的委托版本`on()`，而不是`live()`已弃用的版本。

确保为第一个选项使用类，以免每次选择获得焦点时都删除选项。

# python - 将 raw_input 转换为 python 表达式

> ID：13754880
> 
> 赞同：1
> 
> 时间：2012-12-07T00:04:45.660
> 
> 标签：python, input, typeerror

首先，我正在使用线性编程包 PuLP

好的，所以我正在使用 shell 通过 shell 收集用户输入

```
x = raw_input('-->') 
```

现在用户将输入的信息是线性不等式形式（例如2*a + 3*b <= 4）。我已经编写了一个将用户定义的变量 a 和 b 存储到 LP 中的方法。

我现在无法通过以下方式获取输入并将其作为约束存储在 LP 中：

```
prob += x 
```

如果您对 python 文件中的信息进行硬编码，您只需添加：

```
prob += 2*a +3*b <= 4 
```

对于这个例子

我得到的错误信息是：

> 类型错误：+= 不支持的操作数类型：“int”和“str”

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:06:14.887

尝试做：

```
x = float(raw_input('-->')) 
```

我假设`prob`是一个整数。`raw_input`将变量作为字符串返回，因此您希望将其转换为整数/浮点数。您收到错误是因为您试图“添加”一个字符串和一个整数；要么添加两个整数，要么连接两个字符串，但它们不能相互连接。因此，由于 x 必须是整数（或浮点数），使用`float(obj)`or `int(obj)`--- 你不知道是`x`浮点数还是整数，所以只需使用`float`.

要解析给定的不等式，请执行以下操作：

```
#assuming no spaces in the inequality are included; if the input isn't in the correct form, the program will NOT work correctly
ineq = input("What is the inequality? Input in the form: ax+by<=c: ")
a, b, c, sign, index = 0, 0, 0, '', 0 #multiple assignment
while ineq[index] != 'x': #until it reaches x, it will keep going
   a += int(ineq[index])
   if ineq[index] == 'x':
      break
   index += 1  # index = index + 1

index += 2 #to go through the 'x' and '+'

while ineq[index] != 'y':
   b += int(ineq[index])
   if ineq[index] == 'y':
      break
   index += 1

index += 1 #to go through the 'y'

if ineq[index] == '<' and ineq[index + 1] == '=':
   sign = '<='
elif ineq[index] == '>' and ineq[iddex + 1] == '=':
   sign = '>='
elif ineq[index] == '>':
   sign = '>'
else:
   sign = '<'

if sign == '<=' or sign == '>=':
   index += 2 #to go through the '>' or '<' and the '='
else:
   index += 1 #to go through the '>' or '<'

c = int(ineq[index:])
#code to solve the inequality 
```

一种更简单、更快捷的方法是只提示用户输入“a”、“b”、“c”和“符号”的每个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T00:24:31.913

因此，您的用户输入与您的代码内 python 示例之间存在根本区别：

在此示例中，用户输入将是字符串文字`"2*a + 3*b <=4"` 您无法将字符串文字附加到`prob`，因为它需要一个约束或类似的对象——这就是您的错误的来源。

```
prob += x 
```

当您在 python 中评估相同的表达式时，您会注意到它缺少我在上面的语句周围有用地放置的引号。
这不是字符串文字，而是 python 表达式。纸浆的某些部分将其评估为约束对象，然后将该约束添加到问题中。

```
prob += 2*a +3*b <= 4 
```

现在，完全忽略任意代码执行的可能性，解决问题的最简单方法是将用户输入评估为 python 代码，然后让语言完成其余的工作：

```
exec("prob +="+x); 
```

需要注意的是，除非此脚本完全供您个人使用，否则这是一个**糟糕的主意**。

从一般编程的角度来看，正确的解决方案是从字符串构造一个 LPConstraint 对象，然后将新构造的对象添加到 prob.

在理想的世界中，您将有一个用于 LPConstraint 的构造函数，该构造函数接受一个字符串，或者在库中的某个地方为您执行此操作的辅助方法。

我已经完成了（诚然所有 5 分钟......）一些阅读文档，但找不到任何这样的方法。假设没有其他人运气好，那么您就只能自己解析字符串（以及随之而来的所有麻烦）并根据结果构建约束对象。

对于这样的问题，问题实际上是范围之一：

*   你在哪里安装这个脚本？
*   谁将使用它？
*   他们能造成什么潜在的损害？

如果您正在创建要在高中或大学的计算机实验室中运行的 python 脚本，看在**上帝的份上，请不要使用 exec。**

如果您出于自己的目的创建 Python 脚本以在您（也可能是您朋友的）机器上运行，那么编写解析器是公然浪费您的时间和精力——您不会执行恶意代码你自己的盒子。

# objective-c - 防止 bash 将标准输入转发到标准错误

> ID：13754884
> 
> 赞同：0
> 
> 时间：2012-12-07T00:05:02.533
> 
> 标签：objective-c, c, bash, shell, stream

我正在尝试使用 bash 的交互模式实现一个简单的终端 GUI。我成功调用了 bash，获取了它的**标准输出**并将所有内容打印到文本视图中。我将用户输入从文本视图转发到 bash 的**stdin**，以便能够运行命令。它工作得很好，除了我没有收到任何错误消息。

但是，当我继续将 bash 的**stderr**打印到我的文本视图时，我注意到了一些奇怪的事情。除了现在接收错误消息之外，bash 似乎将所有内容从**stdin**传递到**stderr**。因此，我输入的每个字符都会打印两次（通常一次是因为我输入了它，一次是因为我从**stderr**打印了所有内容）。

它似乎也通过**stderr** ( `bash-3.2$`) 打印提示。这是预期的行为吗？这能被压制吗？

我还尝试仅捕获使用输入（而不是让用户直接在文本视图中键入）并依靠 bash 来打印用户输入。这几乎可以正常工作，除了通过**stdout**和**stderr**的输出顺序是随机的：

如果我输入一个类似的命令`echo test`并按回车，有时我会得到这个：（
第二个`test`是输出，我没有输入`testtest`）

```
bash-3.2$ echo testtest
bash-3.2$ 
```

有时我会得到：

```
bash-3.2$ echo test
bash-3.2$ test 
```

我收到 final `\n`、 output 和 next的顺序`bash-3.2$`显然是混淆了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:49:15.827

无法以“正确”顺序读取 stdout 和 stderr，因为不同管道之间没有顺序概念。但是您可以确保将两者都发送到同一个管道（即同一个文件描述符），而不是让每个都发送到单独的管道。为此，请查看用于启动 bash 子进程的任何选项；或者可能启动一个命令行，例如`bash -c 'bash 2>&1'`.

# drupal - drupal 7：模块主题组合搜索“单页应用程序”+“响应式设计”

> ID：13754886
> 
> 赞同：-1
> 
> 时间：2012-12-07T00:05:23.080
> 
> 标签：drupal, drupal-modules, responsive-design, drupal-themes, single-page-application

我必须建立一个drupal 7网站

*   作为单页 Web 应用程序
*   与响应式网页设计。

哪种模块主题组合适合完成工作？

到目前为止我已经尝试过：

*   Single_Page_Website（模块）+ Omega（主题）| 不工作
*   Single_Page_Website (Module) + Responsive Bartik (Theme) | 不工作

Single_Page_Website 模块似乎只支持非响应式 Bartik 主题。我无法切换到 OnePage 发行版，以防您建议这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:49:44.573

您可以将[Quicktabs](http://drupal.org/project/quicktabs)与一些漂亮的样式结合使用，并可能与[Bootstrap](http://drupal.org/project/bootstrap)或 Zurb Foundations 结合使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-12T23:44:33.150

考虑模块[Single Page Site](https://www.drupal.org/project/single_page_site) - 不要与另一个模块 Single_Page_Website 混淆。它是响应式的，不依赖于主题。发布问题时，该模块不存在；最近才在 2014 年问世。

# javascript - 如何使用键盘输入暂停 html5 画布 javascript 动画

> ID：13754894
> 
> 赞同：0
> 
> 时间：2012-12-07T00:05:55.653
> 
> 标签：javascript, html5-canvas

我有一个名为 drawArc 的函数，它是动画的，但我需要能够通过键盘输入来暂停和取消暂停，虽然我知道怎么做，但是当我尝试这个时，什么也没发生。任何帮助，将不胜感激。谢谢。

```
if(window.addEventListener) 
{
window.addEventListener 
( 'load', onLoad, false);
window.addEventListener
('keydown',onKeyDown, false);
}

function onKeyDown(event) 
{ 
var keyCode = event.keyCode;
switch(keyCode) 
{ 
    case 80: //p
    togglePause();
    break; 
}
}

function togglePause() 
{
    if (!Paused) 
    {
        clearInterval(drawArc);
        Paused = true;
    } 
    else if (Paused) 
    {
        setInterval(drawArc, time);
        Paused = false;
    }
}

function onLoad() 
{ 
    var canvas; 
    var context;
    var angle = 0;
    var time= 20;
    var paused = true;

function initialise() 
{
    canvas = document.getElementById('canvas'); 

    if (!canvas) 
    { 
        alert('Error: I cannot find the canvas element!'); 
        return; 
    }

    if (!canvas.getContext) 
    { 
        alert('Error: no canvas.getContext!'); 
        return; 
    }

    context = canvas.getContext('2d'); 
    if (!context) 
    { 
        alert('Error: failed to getContext!'); 
        return; 
    }

return setInterval(drawArc, time)

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:30:17.410

试试这个：http: [//jsbin.com/udebiv/2/edit](http://jsbin.com/udebiv/2/edit)

```
var canvas
  , context
  , angle = 0
  , time= 20
  , paused = false
  , timer;

if (window.addEventListener) {
  window.addEventListener( 'load', initialise, false);
  window.addEventListener('keydown',onKeyDown, false);
}

function onKeyDown(event) { 
  var keyCode = event.keyCode;
  switch(keyCode){ 
    case 80: //p
      togglePause();
      break; 
  }
}

function togglePause() {
  if (!paused){
    clearInterval(timer);
    paused = true;
  } else {
    timer = setInterval(drawArc, time);
    paused = false;
  }
}

function initialise() {
  canvas = document.getElementById('canvas'); 

  if (!canvas){ 
    alert('Error: I cannot find the canvas element!'); 
    return; 
  }

  if (!canvas.getContext){ 
    alert('Error: no canvas.getContext!'); 
    return; 
  }

  context = canvas.getContext('2d'); 
  if (!context){ 
    alert('Error: failed to getContext!'); 
    return; 
  }

  timer = setInterval(drawArc, time)
}

function drawArc(){
  // do your drawing here
  // I'm just setting body text so you can see togglePause working
  document.body.innerHTML = Math.random();
} 
```

有一些语法问题导致您的代码甚至无法执行，以及变量范围的一些问题。

# java - 嵌入式 SQL Firebird 使用 Java SE 批量更新 OutOfMemoryError

> ID：13754898
> 
> 赞同：3
> 
> 时间：2012-12-07T00:06:41.487
> 
> 标签：java, profiling, firebird, out-of-memory

我在使用嵌入式 firebird 数据库引擎和 Java SE 时遇到了一个大问题。我目前正在开发一种过滤工具，供用户过滤数据。所以我做了两个过滤选项，用户可以选择一个或两个：

1.  从黑名单中过滤（黑名单由用户控制）。
2.  根据记录上传和过滤的每条记录的海量列表进行过滤。

用户上传的数据以纯文本逗号或令牌分隔，如下所示：

```
(SET OF COLUMNS)| RECORD TO FILTER |
0-MANY COLUMNS  |       ABC2       |
0-MANY COLUMNS  |       ABC5       | 
```

当我将它上传到数据库时，我为每个过滤器添加一个标志

```
(SET OF COLUMNS) | RECORD TO FILTER | FLAG FOR FIlTER A | FLAG FOR FILTER B  |
0-MANY COLUMNS   |       ABC2       |                   |                    |
0-MANY COLUMNS   |       ABC5       |                   |                    | 
```

因此，当涉及到第二个过滤器时，程序在第一次运行软件时有一个主空表，然后它用第一次上传的所有记录填充该表。在用户进行几次文本上传后，主表将具有如下表的唯一记录：

```
 Record |      Date criteria for filtering      |
 ABC1   | 08/11/2012:1,07/11/2012:3,06/11/2012:5|
 ABC2   | 05/11/2012:1,04/11/2012:0,03/11/2012:0|
 ABC3   | 12/11/2012:3,11/11/2012:0,10/11/2012:0|
 ABC4   | 12/11/2012:1,11/11/2012:0,10/11/2012:0|
 ABC5   | 12/11/2012:3,11/11/2012:0,10/11/2012:3|
 ABC9   | 11/11/2012:3,10/11/2012:1,09/11/2012:0| 
```

例如，在处理数据时，软件会同时更新主表和用户表：

```
(SET OF COLUMNS| RECORD TO FILTER | FLAG FOR FIlTER A | FLAG FOR FILTER B  |
0-MANY COLUMNS |       ABC4       |                   |                    | 
0-MANY COLUMNS |       ABC9       |                   |                    | 
```

所以主表会更新：

```
 Record |      Day criteria for filtering      |
 ABC1   | 08/11/2012:1,07/11/2012:3,06/11/2012:5|
 ABC2   | 05/11/2012:1,04/11/2012:0,03/11/2012:0|
 ABC3   | 12/11/2012:3,11/11/2012:0,10/11/2012:0|
 ABC4   | 12/11/2012:1,11/11/2012:0,10/11/2012:0| ->12/11/2012:2,11/11/2012:0,10/11/2012:0
 ABC5   | 12/11/2012:3,11/11/2012:0,10/11/2012:3|
 ABC9   | 11/11/2012:3,10/11/2012:1,09/11/2012:0| ->12/11/2012:1,11/11/2012:3,10/11/2012:1 
```

如果在过去三天内数据条件事件达到四个以上，用户表将标记过滤器 B。请注意，每个日期旁边都有一个整数。

```
(SET OF COLUMNS)| RECORD TO FILTER | FLAG FOR FIlTER A | FLAG FOR FILTER B  |
 0-MANY COLUMNS |       ABC4       |                   |                    | 
 0-MANY COLUMNS |       ABC9       |                   |          X         | 
```

两次更新都在一个事务中，问题是当用户上传超过 800,000 条记录时，我的程序在 while 循环中抛出以下异常。我使用 StringBuilder 解析和附加方法来获得可变天数字符串的最大性能。

java.lang.OutOfMemoryError：Java 堆空间

这是我的代码，我用了五天：

```
FactoriaDeDatos factoryInstace = FactoriaDeDatos.getInstance();
Connection cnx = factoryInstace.getConnection();
cnx.setAutoCommit(false);
PreparedStatement pstmt = null;
ResultSet rs=null;
pstmt = cnx.prepareStatement("SELECT CM.MAIL,CM.FECHAS FROM TCOMERCIALMAIL CM INNER JOIN TEMPMAIL TMP ON CM.MAIL=TMP."+colEmail);
rs=pstmt.executeQuery();
pstmtDet = cnx.prepareStatement("ALTER INDEX IDX_MAIL INACTIVE");
pstmtDet.executeUpdate();
pstmtDet = cnx.prepareStatement("SET STATISTICS INDEX IDX_FECHAS");
pstmtDet.executeUpdate();
pstmtDet = cnx.prepareStatement("ALTER INDEX IDX_FECHAS INACTIVE");
pstmtDet.executeUpdate();
pstmtDet = cnx.prepareStatement("SET STATISTICS INDEX IDX_FECHAS");
pstmtDet.executeUpdate();
sql_com_local_tranx=0;
int trxNum=0;
int ix=0;
int ixE1=0;
int ixAc=0;
StringBuilder sb;
StringTokenizer st;
String fechas;
int pos1,pos2,pos3,pos4,pos5,pos6,pos7,pos8,pos9;
StringBuilder s1,s2,sSQL,s4,s5,s6,s7,s8,s9,s10;
long startLoop = System.nanoTime();

long time2 ;
boolean ejecutoMax=false;
//int paginador_sql=1000;
//int trx_ejecutada=0;
sb=new StringBuilder();
s1=new StringBuilder();
s2=new StringBuilder();
sSQL=new StringBuilder();
s4=new StringBuilder();
s6=new StringBuilder();
s8=new StringBuilder();
s10=new StringBuilder();
while(rs.next()){
   //De aqui
   actConteoDia=0;
   sb.setLength(0);
   sb.append(rs.getString(2));
   pos1= sb.indexOf(":",0);  
   pos2= sb.indexOf(",",pos1+1);  
   pos3= sb.indexOf(":",pos2+1);  
   pos4= sb.indexOf(",",pos3+1);  
   pos5= sb.indexOf(":",pos4+1);
   pos6= sb.indexOf(",",pos5+1);
   pos7= sb.indexOf(":",pos6+1);
   pos8= sb.indexOf(",",pos7+1);
   pos9= sb.indexOf(":",pos8+1);
   s1.setLength(0);
   s1.append(sb.substring(0, pos1));
   s2.setLength(0);
   s2.append(sb.substring(pos1+1, pos2));
   s4.setLength(0);
   s4.append(sb.substring(pos3+1, pos4));
   s6.setLength(0);
   s6.append(sb.substring(pos5+1, pos6));
   s8.setLength(0);
   s8.append(sb.substring(pos7+1, pos8));
   s10.setLength(0);
   s10.append(sb.substring(pos9+1));
   actConteoDia=Integer.parseInt(s2.toString());
   actConteoDia++;
   sb.setLength(0);
   //sb.append(s1).a
   if(actConteoDia>MAXIMO_LIMITE_POR_SEMANA){
      actConteoDia=MAXIMO_LIMITE_POR_SEMANA+1;
   }
   sb.append(s1).append(":").append(actConteoDia).append(",").append(rs.getString(2).substring(pos2+1, rs.getString(2).length()));
   //For every date record it takes aprox 8.3 milisec by record

   sSQL.setLength(0);
   sSQL.append("UPDATE TCOMERCIALMAIL SET FECHAS='").append(sb.toString()).append("' WHERE MAIL='").append(rs.getString(1)).append("'");

   pstmtDet1.addBatch(sSQL.toString());
   //actConteoDia=0;
   //actConteoDia+=Integer.parseInt(s2.toString());
   actConteoDia+=Integer.parseInt(s4.toString());
   actConteoDia+=Integer.parseInt(s6.toString());
   actConteoDia+=Integer.parseInt(s8.toString());
   actConteoDia+=Integer.parseInt(s10.toString());
   if(actConteoDia>MAXIMO_LIMITE_POR_SEMANA){
      sSQL.setLength(0);
      sSQL.append("UPDATE TEMPMAIL SET DIASLIMITE='S' WHERE ").append(colEmail).append("='").append(rs.getString(1)).append("'");
      pstmtDet.addBatch(sSQL.toString());
   }

   sql_com_local_tranx++;

   if(sql_com_local_tranx%2000==0 || sql_com_local_tranx%7000==0  ){
      brDias.setString("PROCESANDO "+sql_com_local_tranx);
      pstmtDet1.executeBatch();
      pstmtDet.executeBatch();

   }
   if(sql_com_local_tranx%100000==0){
       System.gc();
       System.runFinalization();
   }
}

pstmtDet1.executeBatch();
pstmtDet.executeBatch();
cnx.commit(); 
```

我已经进行了遥测测试，所以我可以追踪问题所在。我认为这是个大问题，但我不知道问题究竟出在哪里。我正在添加一些遥测测试的图像，我需要正确解释它们。

gc 与 jvm 保持对象存活的时间成反比：

[http://imageshack.us/photo/my-images/849/66780403.png](http://imageshack.us/photo/my-images/849/66780403.png)

内存堆从 50 MB 变为 250 MB，使用的堆达到 250 MB，从而产生 outOfMemory 异常：

50 MB
[http://imageshack.us/photo/my-images/94/52169259.png](http://imageshack.us/photo/my-images/94/52169259.png)

达到 250 MB
[http://imageshack.us/photo/my-images/706/91313357.png](http://imageshack.us/photo/my-images/706/91313357.png)

内存
[不足 http://imageshack.us/photo/my-images/825/79083069.png](http://imageshack.us/photo/my-images/825/79083069.png)

LiveBytes 排序生成的最终对象堆栈：

[http://imageshack.us/photo/my-images/546/95529690.png](http://imageshack.us/photo/my-images/546/95529690.png)

任何帮助，建议，答案将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:19:16.647

问题是您正在使用`PreparedStatement`，就好像它是 a`Statement`一样，因为您正在调用`addBatch(string)`。这种方法的[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#addBatch%28java.lang.String%29)说：

> 注意：不能在 PreparedStatement 或 CallableStatement 上调用此方法。

此注释是在 JDBC 4.0 中添加的，在此之前它表示该方法是可选的。Jaybird 允许您调用此方法的事实`PreparedStatement`是一个错误：我在 Jaybird 跟踪器中创建了问题[JDBC-288 。](http://tracker.firebirdsql.org/browse/JDBC-288)

现在来看看原因`OutOfMemoryError`：当您在Jaybird`addBatch(String)`的实现上使用 ( ) 时，它会被添加到实现 ( ) 的内部列表中。如果是，当您调用 时，它将执行此列表中的所有语句，然后将其清除。然而， In被覆盖以使用批处理参数执行最初准备好的语句（在您的示例中，它不会做任何事情，因为您实际上从未添加 PreparedStatement 样式的批处理）。它**永远不会**执行您添加的语句，但它也**不会清除**其中的语句列表，这很可能是您的.`PreparedStatement``FBPreparedStatement``Statement``FBStatement``FBStatement``executeBatch()``FBPreparedStatement``executeBatch()`**`addBatch(String)`**`FBStatement``OutOfMemoryError`****

 ****基于此，解决方案应该是创建一个`Statement`using`cnx.createStatement`并使用它来执行您的查询，或者调查您是否可以从使用一个或多个`PreparedStatement`带有参数化查询的对象中受益。看起来您应该能够使用两个单独的 PreparedStatement，但我不是 100% 确定；额外的好处将是防止 SQL 注入和轻微的性能改进。

## 附录

[自 Jaybird 2.2.2 以来，](https://www.firebirdsql.org/file/documentation/drivers_documentation/java/2.2.15/release_notes.html#changes-and-fixes-in-jaybird-2.2.2)此问题已得到修复

*全面披露：我是 Jaybird / Firebird JDBC 驱动程序的开发人员。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:36:24.710

在遍历结果集时不要执行批处理语句。将要执行的 sql 存储在一个集合中，然后在处理完结果集后开始执行新的 sql。一切都必须发生在同一个事务中吗？****

# r - N 处平均精度的更快 R 实现

> ID：13754900
> 
> 赞同：2
> 
> 时间：2012-12-07T00:06:42.373
> 
> 标签：r, information-retrieval, average-precision

优秀的[Metrics](ftp://cran.r-project.org/pub/R/web/packages/Metrics/index.html)包提供了计算[平均精度](http://en.wikipedia.org/wiki/Information_retrieval#Average_precision)的函数： `apk`.

问题是，它基于`for`循环，而且速度很慢：

```
require('Metrics')
require('rbenchmark')
actual <- 1:20000
predicted <- c(1:20, 200:600, 900:1522, 14000:32955)
benchmark(replications=10,
          apk(5000, actual, predicted),
          columns= c("test", "replications", "elapsed", "relative"))

                          test replications elapsed relative
1 apk(5000, actual, predicted)           10   53.68        1 
```

我不知道如何向量化这个函数，但我想知道是否有更好的方法在 R 中实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T00:39:19.443

我不得不同意实现看起来很糟糕......试试这个：

```
apk2 <- function (k, actual, predicted)  {

    predicted <- head(predicted, k)

    is.new <- rep(FALSE, length(predicted))
    is.new[match(unique(predicted), predicted)] <- TRUE

    is.relevant <- predicted %in% actual & is.new

    score <- sum(cumsum(is.relevant) * is.relevant / seq_along(predicted)) /
             min(length(actual), k)
    score
}

benchmark(replications=10,
          apk(5000, actual, predicted),
          apk2(5000, actual, predicted),
          columns= c("test", "replications", "elapsed", "relative"))

#                            test replications elapsed relative
# 1  apk(5000, actual, predicted)           10  62.194 2961.619
# 2 apk2(5000, actual, predicted)           10   0.021    1.000

identical(apk(5000, actual, predicted),
          apk2(5000, actual, predicted))
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T04:04:33.520

```
I happen to have average precision code written using for loop. I think it is fast enough.

ap <- function(prediction) {
    #prediction is a two column matrix. The first one is the true label and the second one is the prediction value
    result = 0
    ranklist <- prediction[sort(prediction[,2],decreasing=TRUE, index.return=TRUE)$ix,]
    numpos <- length(which(ranklist[,1]==1))
    deltaRecall <- 1/numpos
    pcount <- 0

    for(i in 1:nrow(ranklist)) {
        if(ranklist[i,1] == 1) {
            pcount <- pcount + 1
            precision <- pcount/i
            result <- result + precision*deltaRecall
        }
    }
    return(result)
}

ap_at_N <- function(prediction, N=20) {
    #average precision at N
    result = 0
    ranklist <- prediction[sort(prediction[,2],decreasing=TRUE, index.return=TRUE)$ix,]
    numpos <- length(which(ranklist[,1]==1))
    numpos <- min(N, numpos)
    deltaRecall <- 1/numpos
    pcount <- 0

    for(i in 1:(min(nrow(ranklist),N))) {
        if(ranklist[i,1] == 1) {
            pcount <- pcount + 1
            precision <- pcount/i
            result <- result + precision*deltaRecall
        }
    }
    return(result)
} 
```

# blend - 在 Expression Blend Sketchflow 项目中，如何将每个屏幕缩放到浏览器分辨率？

> ID：13754901
> 
> 赞同：2
> 
> 时间：2012-12-07T00:06:42.357
> 
> 标签：blend, sketchflow

我一直在到处寻找解决方案，但没有成功。我有一个 Sketchflow 项目，我想在运行时将每个屏幕缩放到浏览器分辨率，就像缩放当前布局的每个元素以适应屏幕一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:40:05.690

你想让物体本身变大以填满屏幕还是分散开来？为了使对象变得更大，您可以将整个对象包装在 ViewBox 中。

# perl - 我可以通过perl控制进程优先级吗

> ID：13754904
> 
> 赞同：2
> 
> 时间：2012-12-07T00:06:54.353
> 
> 标签：perl

我想知道是否可以通过 perl 控制优先级。基本上，如果某个进程占用了 cpu，我希望我的 perl 脚本继续在我的盒子中运行。这个 perl 脚本要么降低优先级，要么如果进程占用过多的 CPU，perl 脚本也可以杀死它。我讨厌特定于操作系统，但我正在尝试为 Windows 系统设计它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:09:28.803

您可以使用[getpriority](http://p3rl.org/getpriority)和[setpriority](http://p3rl.org/setpriority)来处理 Perl 中的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:13:51.020

从[POSIX::nice()](http://perldoc.perl.org/POSIX.html)：

> 这类似于 C 函数 nice() ，用于更改当前进程的调度偏好。积极的论点意味着更多的礼貌过程，消极的价值观意味着更需要的过程。普通用户进程只能更有礼貌。失败时返回 undef。

# codeigniter - 对使用 angularJS 和 Codigniter 感到困惑

> ID：13754905
> 
> 赞同：0
> 
> 时间：2012-12-07T00:07:01.953
> 
> 标签：codeigniter, model-view-controller, angularjs

我是前端 MVC 的新手，我决定创建一个 SPApplication，然后我找到了这个 angularJS。当然，其他 MVC 也是如此，但我更喜欢 angularJS。

好的，我的问题在这里。在此之前，我通常将我的 MVC 文件存储在后端 MVC 文件夹中，如果它是 html 部分或页面，则它是 codeigniter 视图文件夹。

那么是时候将后端 MVC 移至前端了吗？

另一个问题，什么是 codeigniterRest？我需要它与 angularJS 一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:47:35.050

不，CodeIgniter 中的后端 MVC 和 Angularjs 中的前端 MVC 完全不同。

后端 MVC 将处理前端发送到应用程序的数据。

angularjs 中的前端 MVC 将从 CI 中的后端 MVC 接收响应（通常以 json 格式），并使用其视图和控制器处理该数据。

因此，您的单页应用程序将包含 CI + 1 视图页面的所有花里胡哨（或者如果您将该页面分成部分包含，则更多）将在其中存储 angularjs 应用程序。

# php - Facebook php sdk 3.2.1 + javascript登录无限循环

> ID：13754908
> 
> 赞同：0
> 
> 时间：2012-12-07T00:07:21.273
> 
> 标签：php, cookies, facebook-javascript-sdk, facebook-php-sdk, session-cookies

该问题似乎与许多其他 facebook 连接登录循环问题重复，但不是因为它指的是目前可用的最新 php sdk 版本（3.2.1）。所有较旧的问题都涉及其他版本，或者提供的解决方案不适合这种情况。

很快：使用 php sdk 3.2.1 进行会话管理和 javascript sdk 来获取弹出登录而不是页面重定向会在某些浏览器上生成无限循环。sdk 中提供的示例本身不适用于 Chrome。

这个问题在 facebook 开发网站上得到了更好的解释[（](https://developers.facebook.com/bugs/172040042942772)没有人解决它，也许他们只会在新版本中包含一个修复）。

它似乎与cookie管理有关。知道如何修补它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:53:25.683

可能与这个最近的错误有关：http: [//developers.facebook.com/bugs/238039849657148](http://developers.facebook.com/bugs/238039849657148)

尝试升级到最新版本的 PHP-SDK (3.2.2)。

# .htaccess - 使用模式匹配在 .htaccess 中重写条件

> ID：13754914
> 
> 赞同：1
> 
> 时间：2012-12-07T00:08:10.143
> 
> 标签：.htaccess, mod-rewrite

我正在尝试组合一个重写条件以匹配以 10 个字母数字字符结尾的 URL 的最后一部分，例如：

[http://www.someurl.com/EHN4K5LFWQ](http://www.someurl.com/EHN4K5LFWQ)

并将其路由到：

[http://www.someurl.com/index.php/EHN4K5LFWQ](http://www.someurl.com/index.php/EHN4K5LFWQ)

到目前为止，我已经整理了以下内容，但是在使用了有和没有重写规则的许多变体挣扎了几天之后，我似乎无法让它工作。

```
RewriteCond %{REQUEST_URI} ^dir1/dir2/([A-Z,0-9]{10})$ 
RewriteRule ^(.*)$  dir1/dir2/index.php/$1 [L] 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:15:16.193

如果 htaccess 文件在您的文档根目录中，您可以简单地使用以下规则：

```
RewriteRule ^dir1/dir2/([A-Z,0-9]{10})$ /dir1/dir2/index.php/$1 [L] 
```

如果 htaccess 文件位于**dir2**文件夹中，则可以使用此规则：

```
RewriteRule ^([A-Z,0-9]{10})$ index.php/$1 [L] 
```

# c# - 如何为正在更改的 ComboCoxColumn 单元格添加事件

> ID：13754915
> 
> 赞同：0
> 
> 时间：2012-12-07T00:08:11.283
> 
> 标签：c#, winforms, datagridview, event-handling, datagridviewcomboboxcell

我有一个`DataGridView`, 里面有几个`ComboBoxColumns`。有没有办法创建一个事件，这样每次`ComboBoxColumn`输入一个单元格并选择一个项目时，事件就会触发？到目前为止，我能弄清楚的是：

```
private void dataGridView1_CellEnter(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0)
    {
        MessageBox.Show("Amanda");
    }
} 
```

这没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:21:20.720

试试这个。

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            ComboBox nameComboBox = e.Control as ComboBox;
            if (dataGridView1.CurrentCell.ColumnIndex == 0)
            {
                if (nameComboBox != null)
                {
                    ((ComboBox)e.Control).DropDownStyle = ComboBoxStyle.DropDown;
                    ((ComboBox)e.Control).AutoCompleteSource = AutoCompleteSource.ListItems;
                    ((ComboBox)e.Control).AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Suggest;

                nameComboBox .SelectedIndexChanged -= (nameComboBox _SelectedIndexChanged);
                nameComboBox .SelectedIndexChanged += (nameComboBox _SelectedIndexChanged);

                }
            }
        }

    private void nameComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (dataGridView1.CurrentCell.ColumnIndex == 1)
        {
        var rowindex = dataGridView1.CurrentCell.RowIndex;

              if (dataGridView1[1, rowindex].EditedFormattedValue != null)
              {
                  Consol.WriteLine(dataGridView1[1, rowindex].EditedFormattedValue.ToString());
              }
              else
              {
                 //No value in cell
              }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:42:35.557

您可能正在寻找该`EditingControlShowing`事件。

有关类似问题，请参见此处： [Datagridview 上 ComboBoxColumn 中的“SelectedIndexChanged”事件](https://stackoverflow.com/questions/3405887/selectedindexchanged-event-in-comboboxcolumn-on-datagridview)

# php - PHP 论坛 - 已读/未读帖子

> ID：13754918
> 
> 赞同：0
> 
> 时间：2012-12-07T00:08:33.703
> 
> 标签：php, arrays, serialization, forum

经过深思熟虑，我想了一个办法来解决这个问题。

**Posts Table：**
`post_id` int，主键，自动递增
`post_content`文本
`has_read`文本

In`has_red`将是一个看起来像这样的序列化数组：

```
<?php

$has_read = array(
    '1' => 'true', // 1 = User ID
    '2' => 'false', // 2 = User Id
    '3' => 'false', // 3 = User Id
);

?> 
```

我想不出我会遇到什么问题，你们可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:11:35.300

可扩展性。想象一下像我的网站一样拥有 133,090 名用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:11:48.110

不要那样做。将序列化数组存储为文本几乎总是设计非常糟糕的标志。您不能（轻松地）对序列化数据编写查询。

相反，您应该制作另一个表格，将用户与他们阅读的帖子相关联。

# java - 如何将自定义数量值添加到 Floreant POS 中的按钮？

> ID：13754919
> 
> 赞同：1
> 
> 时间：2012-12-07T00:08:33.187
> 
> 标签：java, jbutton, dao

Floreant POS 使用自定义 UI 样式

```
public class POSButtonUI extends PlasticButtonUI {
private static final POSButtonUI INSTANCE = new POSButtonUI();

    public static ComponentUI createUI(JComponent b) {
        return INSTANCE;
    }

    public void update(Graphics g, JComponent c) {
        if (c.isOpaque()) {
            AbstractButton b = (AbstractButton) c;
            if (isToolBarButton(b)) {
                c.setOpaque(false);
            } else if (b.isContentAreaFilled()) {
                g.setColor(c.getBackground());
                g.fillRect(0, 0, c.getWidth(), c.getHeight());

                if (is3D(b)) {
                    Color color1 = c.getBackground();// UIManager.getColor("control");
                    Color color2 = color1.brighter();

                    int x = 0;
                    int y = 0;
                    int width = c.getWidth();
                    int height = c.getHeight();

                    GradientPaint gp = new GradientPaint(x, y, color2, width - 2, height - 2 , color1, true);
                    Graphics2D g2 = (Graphics2D) g;
                    g2.setPaint(gp);
                    g2.fillRect(x, y, width, height);
                }
            }
        }
        paint(g, c);
    }

} 
```

并且 PosButton 类扩展了 JButton：

```
public class PosButton extends JButton {
    public static Border border = new LineBorder(Color.BLACK, 1);
    static Insets margin = new Insets(1, 1, 1, 1);

    static POSButtonUI ui = new POSButtonUI();

    static {
        UIManager.put("PosButtonUI", "com.floreantpos.swing.POSButtonUI");
    }

    public PosButton() {
        this(null);
    }

    public PosButton(String text) {
        super(text);
        setFont(UIConfig.getButtonFont());

        setFocusPainted(false);
        setMargin(margin);
    }

    @Override
    public String getUIClassID() {
        return "PosButtonUI";
    }

} 
```

我不确定应该尝试向哪个类添加paintComponent 方法，以便在按钮的右上角添加数量通知以添加修饰符，而且我现在不太确定该去哪里。修改器面板内部还有一个私有类“ModifierButton”

```
 private class ModifierButton extends PosButton implements ActionListener {

        private MenuModifier menuModifier;

        public ModifierButton(MenuModifier modifier) {
            this.menuModifier = modifier;

            setText(modifier.getName());
            addActionListener(this);
        }

        void updateView(TicketItemModifier ticketItemModifier) {
            if (ticketItemModifier == null || ticketItemModifier.getModifierType() == TicketItemModifier.MODIFIER_NOT_INITIALIZED) {
                setBackground(null);
                //setIcon(null);
                return;
            }

            if (ticketItemModifier.getModifierType() == TicketItemModifier.NORMAL_MODIFIER) {
                //setIcon(normalIcon);
                setBackground(Color.GREEN.darker());
            } else if (ticketItemModifier.getModifierType() == TicketItemModifier.NO_MODIFIER) {
                //setIcon(noIcon);
                setBackground(Color.RED.darker());
            } else if (ticketItemModifier.getModifierType() == TicketItemModifier.EXTRA_MODIFIER) {
                //setIcon(extraIcon);
                setBackground(Color.ORANGE);
            }
        }

        public void actionPerformed(ActionEvent e) {

            TicketItemModifierGroup ticketItemModifierGroup = parentTicketItem.findTicketItemModifierGroup(menuModifier, true);
            int modifierCount = ticketItemModifierGroup.countItems(true);
            int maxModifier = ticketItemModifierGroup.getMaxQuantity();

            TicketItemModifier ticketItemModifier = ticketItemModifierGroup.findTicketItemModifier(menuModifier);
            TicketView ticketView = OrderView.getInstance().getTicketView();

            if (ticketItemModifier == null) {
                TicketItemModifier m = ticketItemModifierGroup.addTicketItemModifier(menuModifier, modifierCount >= maxModifier ? TicketItemModifier.EXTRA_MODIFIER : TicketItemModifier.NORMAL_MODIFIER);
                updateView(m);
                ticketView.updateAllView();

                ticketView.selectRow(m.getTableRowNum());
                return;
            }

            int modifierType = TicketItemModifier.MODIFIER_NOT_INITIALIZED;
            if (ticketItemModifier.getModifierType() != null) {
                modifierType = ticketItemModifier.getModifierType().intValue();
            }

            switch (modifierType) {
                case TicketItemModifier.MODIFIER_NOT_INITIALIZED:
                    ticketItemModifier.setModifierType(TicketItemModifier.NORMAL_MODIFIER);
                    updateVisualRepresentation();
                    ticketView.updateAllView();
                    ticketView.selectRow(ticketItemModifier.getTableRowNum());
                    break;

                case TicketItemModifier.NORMAL_MODIFIER:
                case TicketItemModifier.EXTRA_MODIFIER:
                    ticketItemModifier.setModifierType(TicketItemModifier.NO_MODIFIER);
                    updateVisualRepresentation();
                    ticketView.updateAllView();
                    ticketView.selectRow(ticketItemModifier.getTableRowNum());
                    break;

                case TicketItemModifier.NO_MODIFIER:
                    ticketItemModifier.setModifierType(TicketItemModifier.MODIFIER_NOT_INITIALIZED);
                    ticketItemModifierGroup.removeTicketItemModifier(ticketItemModifier);
                    updateView(ticketItemModifier);
                    updateVisualRepresentation();
                    ticketView.updateAllView();
                    ticketView.selectRow(ticketItemModifier.getTableRowNum() - 1);
                    break;
            }
        }
    } 
```

我想我的问题是我应该使用哪个按钮类来更新修改器中的项目数量。

# c# - .Net 列出每个项目

> ID：13754920
> 
> 赞同：2
> 
> 时间：2012-12-07T00:08:41.863
> 
> 标签：c#, .net, linq, list, foreach

我有 2 个对象：

```
public class ClassA
{
   public int Id
   public string name;

   public ClassB myObjectB;

}
public class ClassB
{
   public int Id
   public string name
} 
```

<ClassA> <ClassB> 有 2 个列表 List1 中的某些项目按 Id 与 List2 上的项目匹配...我想为每个项目设置 objectB ...

```
foreach(ClassA item in List1)
{
   ClassB obj = (from b in List2 where b.Id == item.Id select b).SingleOrDefault()
   if(obj != null)
   {
       item.myObjectB = obj; 
       ////////break;    <- ignore this
   }
} 
```

这个解决方案对我有用，但我只是想知道是否有更好的方法来做到这一点，而不是 Foreach

谢谢大家的帮助！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T00:14:31.210

我认为 a `foreach`，在这种情况下，实际上是合适的方法，因为你正在改变你的列表。但是，您可能会稍微简化代码：

```
foreach(ClassA item in List1)
{
    item.myObjectB = List2.FirstOrDefault(b => b.Id == item.Id);
} 
```

这将每次设置该项目，但`null`如果没有匹配项，它将被设置为。如果您已经有项目`myObjectB`并且将它们设置为 null 是不合适的，您可以使用：

```
foreach(ClassA item in List1)
{
    item.myObjectB = List2.FirstOrDefault(b => b.Id == item.Id) ?? item.myObjectB;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:19:24.087

扩展 Reed 的答案..您实际上可以在单行中执行此操作，因为列表具有 ForEach 方法。

```
List1.ForEach(item => item.myObjectB = List2.FirstOrDefault(b => b.Id == item.Id) ?? item.myObjectB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:22:37.300

```
List<ClassA> list1 = new List<ClassA>();
List<ClassB> list2 = new List<ClassB>();

list1.Add(new ClassA { Id = 2, name = "a2" });
list1.Add(new ClassA { Id = 3, name = "a3" });
list1.Add(new ClassA { Id = 4, name = "a4" });
list1.Add(new ClassA { Id = 5, name = "a5" });

list2.Add(new ClassB { Id = 1, name = "b1" });
list2.Add(new ClassB { Id = 2, name = "b2" });
list2.Add(new ClassB { Id = 4, name = "b4" });
list2.Add(new ClassB { Id = 5, name = "b5" });

// Goal is to set ClassA::myObjectB from List1 to 
// matching instance (if any) of ClassB from List2
var query = 
    from a in list1
    from b in list2
    where a.Id == b.Id
    select Tuple.Create(a, b);  
foreach (var element in query)
    element.Item1.myObjectB = element.Item2; 
```

**更新**：

或者，如果您真的不想要一个 for 循环，我刚刚意识到您可以使用赋值返回一个值的事实，同时在混淆代码竞赛中输入：)

```
(from a in list1
 from b in list2
 where a.Id == b.Id
 select a.myObjectB = b).ToList(); 
```

**更新2**：

我只是想到了另一种方法-根据您的情况，惰性机制可能对您有用吗？

```
public class ClassA
{
   public int Id
   public string name;

   private ClassB myObjectB;
   public ClassB MyObjectB { 
      get { return myObjectB ?? (myObjectB = list2.FirstOrDefault(x => this.Id == x.Id)); } 
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-07T00:06:00.597

类定义如下：

```
class ClassA {
   public int Id { get; private set; }
   public string name { get; private set; }

   public ClassB myObjectB { get; set; }

   public ClassA(int pId, string pName) {
      Id = pId;
      name = pName;
   }
}

class ClassB {
   public int Id { get; private set; }
   public string name { get; private set; }

   public ClassB(int pId, string pName) {
      Id = pId;
      name = pName;
   }
} 
```

您可以使用 LINQ`Join`方法执行以下操作：

```
var listA = new List<ClassA> {
   new ClassA(1, "OneA"),
   new ClassA(2, "TwoA"),
   new ClassA(3, "ThreeA")
};

var listB = new List<ClassB> {
   new ClassB(1, "OneB"),
   new ClassB(2, "TwoB"),
   new ClassB(4, "FourB")
};

listA
.Join(
   listB,
   itemA => itemA.Id,
   itemB => itemB.Id,
   (itemA, itemB) => new { ItemA = itemA, ItemB = itemB }
).ForEach(pair => pair.ItemA.myObjectB = pair.ItemB);

listA.ForEach(itemA => Console.WriteLine(
   "{0} maps to {1}",
   itemA == null
      ? "null"
      : itemA.name,
   (itemA == null || itemA.myObjectB == null)
      ? "null"
      : itemA.myObjectB.name
)); 
```

输出是：

```
OneA maps to OneB
TwoA maps to TwoB
ThreeA maps to null 
```

# jsp - 找不到 js 和 css 资源 - 得到 404

> ID：13754921
> 
> 赞同：0
> 
> 时间：2012-12-07T00:08:53.407
> 
> 标签：jsp, web-applications

我有一个非常简单的 webapp，无法通过`<script>`和`<link>`标签从服务器获取 .js 和 .css 文件。错误：`GET http://localhost:8080/resources/js/lib.js 404 (Not Found)`

这是我的 index.jsp：

```
<html>
    <head>
        <jsp:include page="/pages/general/scripts.jsp"/>
    </head>
    <body>
        ...
    </body>
</html> 
```

这是scripts.jsp：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="/resources/js/lib.js"></script>

<link rel="stylesheet" type="text/css" href="/resources/css/style.css"> 
```

我的文件：

![在此处输入图像描述](../Images/69f5976161ac84fdd514ad6774e253f5.png)

我在这里做错了什么？

编辑：顺便说一句，我检查过，我可以通过它们的 url 轻松访问文件。如果我访问 localhost:8080/myApp/resources/js/lib.js 然后我会看到文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:36:08.237

```
<script type="text/javascript" src="/resources/js/lib.js"></script> 
```

我怀疑路径不正确。尝试类似**src="./resources/js/lib.js"**

# wcf - 如何使用架构验证将错误消息返回到消息检查器中生成的 WCF 服务

> ID：13754924
> 
> 赞同：1
> 
> 时间：2012-12-07T00:09:12.207
> 
> 标签：wcf

```
void validateMessage(ref System.ServiceModel.Channels.Message message)
        {
            XmlDocument bodyDoc = new XmlDocument();
            var body = message.GetReaderAtBodyContents();
            bodyDoc.Load(body);

            XmlReaderSettings settings = new XmlReaderSettings();
            settings.Schemas = schemas;
            settings.ValidationType = ValidationType.Schema;
            settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

            XmlReader reader = XmlReader.Create(new XmlNodeReader(bodyDoc), settings);

            while (reader.Read()) ; // do nothing, just validate
            // Create new message 
            Message newMsg = Message.CreateMessage(message.Version, null,
                new XmlNodeReader(bodyDoc.DocumentElement));
            newMsg.Headers.CopyHeadersFrom(message);
            foreach (string propertyKey in message.Properties.Keys)
                newMsg.Properties.Add(propertyKey, message.Properties[propertyKey]);
            // Close the original message and return new message 
            message.Close();
            message = newMsg;
        }

        private static void ValidationCallBack(object sender, ValidationEventArgs e)
        {
            Console.WriteLine("Validation Error: {0}", e.Message);
            //throw new RequestValidationFault(e.Message);
            throw new FaultException<string>(e.Message);
        }

        object IDispatchMessageInspector.AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
        {

            try
            {
                validateMessage(ref request);
            }
            catch (FaultException e)
            {
                throw new FaultException<string>(e.Message);
            }
            return null;

        } 
```

上面的代码屏幕截图帮助我根据架构验证客户端请求的消息，并在发生某些不一致时抛出错误。但我不知道如何将错误消息传递回 WCFservice，因为我也想将错误消息返回给客户端。

我尝试将错误消息添加到请求消息并返回到 WCF 服务。但是我不知道如何将错误消息放在正文内容中的父元素中，这对我来说很容易在服务操作中得到它。提前致谢！

# c# - 尝试制作一个非常简单的语音识别windows窗体项目

> ID：13754926
> 
> 赞同：1
> 
> 时间：2012-12-07T00:09:25.840
> 
> 标签：c#, .net, winforms, speech-recognition

我遵循了一个非常基本的教程（忘记了链接），这一切看起来都很简单，但我似乎没有得到我想要的输出。这是我的主要表单类：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;

namespace OralNotes.Alpha
{
public partial class MainForm : Form
{
    private SpeechRecognitionEngine recognitionEngine;

    public MainForm()
    {
        InitializeComponent();

        recognitionEngine = new SpeechRecognitionEngine();
        recognitionEngine.SetInputToDefaultAudioDevice();
        recognitionEngine.SpeechRecognized += (s, args) =>
          {
              foreach (RecognizedWordUnit word in args.Result.Words)
              {
                  if (word.Confidence > 0.8f)
                      txtNotes.Text += word.Text + " ";

              }
              txtNotes.Text += Environment.NewLine;
          };
        recognitionEngine.LoadGrammar(new DictationGrammar());
    }

    private void btnStart_Click(object sender, EventArgs e)
    {
        recognitionEngine.RecognizeAsync();
    }

    private void btnStop_Click(object sender, EventArgs e)
    {
        recognitionEngine.RecognizeAsyncStop();
    }
}
} 
```

你可能不需要这个，但无论如何它是这样的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace OralNotes.Alpha
{
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    }
}
} 
```

我单击开始并交谈，但没有任何反应。

***更新********

好的，如果我调整这条线，这是可行的

```
if (word.Confidence > 0.8f) 
```

到一个较低的数字，我得到一两个词。不转录句子或任何东西，有没有办法让它有更好的识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:07:18.230

您使用的引擎似乎会在它听到的每个单词上返回一个置信度值。

我怀疑置信度值的范围是 0-1。这意味着如果您将值从 0.8 降低，您将使引擎对单词更宽容。也许是你麦克风的质量？

# assembly - 关于“Cortex-A8 勘误表”的 asm 对象的 NDK r8c 警告——我应该担心吗？

> ID：13754936
> 
> 赞同：2
> 
> 时间：2012-12-07T00:10:15.157
> 
> 标签：assembly, android-ndk, arm, x264, cortex-a8

**问题：**这个警告的含义是什么？如果没有现实生活中的后果，我可以忍受一段时间......但我担心如果我们的程序被加载到一个有故障的芯片上会发生什么。

**背景：**使用 NDK r8c，X264 编码器的链接会发出警告：

```
cannot scan executable section 1 of libx264.a(dct-a.o) for Cortex-A8 erratum because it has no mapping symbols 
```

*...对于 libx264 中的所有程序集文件都有相同的警告。*

libx264.a 本身是在同一台机器上使用从 NDK 获取的相同 4.6 工具链进行交叉编译的。

以下是轻松重现问题的说明（Ubuntu 或 MacOS）：

1.  [从ftp://ftp.videolan.org/pub/x264/snapshots/last_x264.tar.bz2](ftp://ftp.videolan.org/pub/x264/snapshots/last_x264.tar.bz2)下载 x264-snapshot-20121203-2245

2.  跑`./configure --enable-pic --enable-strip --enable-static --cross-prefix=~/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi- --sysroot=~/android-ndk-r8c/platforms/android-14/arch-arm --host=arm-linux`

3.  跑`~/android-ndk-r8c/prebuilt/linux-x86/bin/make`

它将构建静态库，然后在链接 x265 可执行文件时显示 Cortex-A8 警告。我不担心编译器警告，因为构建 libx264.a 是离线完成的，它不是我们官方日常构建的一部分。

我已将此报告为[http://code.google.com/p/android/issues/detail?id=40794](http://code.google.com/p/android/issues/detail?id=40794)。

我尝试按照[ARM.com 说明](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0064d/BABCGAAH.html)手动添加[映射符号](http://sourceware.org/binutils/docs/as/ARM-Mapping-Symbols.html)，但这没有效果。`dct-a.S`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:01:51.880

我从安德鲁那里得到了答案：[http ://code.google.com/p/android/issues/detail?id=40794#c4](http://code.google.com/p/android/issues/detail?id=40794#c4)

**tl;nr:** h264 makefile 强制剥离映射符号。*我已经仔细检查过：*这不是我`--enable-strip`的`./configure`原因。

最快的解决方法是运行

```
make STRIP= 
```

# visual-studio-2010 - MSBuild 默默地跳过一个项目（在我的 sln 中的许多项目中）

> ID：13754939
> 
> 赞同：7
> 
> 时间：2012-12-07T00:10:34.383
> 
> 标签：visual-studio-2010, visual-c++, msbuild

即将失去我的想法......通过 MSBuild 运行时构建的解决方案在默默地无法构建解决方案中的众多项目之一。

构建不会失败，它根本不会尝试构建它（通过日志文件 MSBuild 和 devenv 输出确定）。这是一个VS2010的解决方案文件。让我们将问题项目称为 Project X。我所知道的：

*   我有一个包含约 30 个项目的解决方案。
*   所有这些项目都设置为在 Release|Win32 下构建。我有双重和三重（和四重）检查这个。
*   如果我在 VS 中构建解决方案，每个项目都会正确构建，包括 Project X。
*   如果使用*与 MSBuild 用于启动 devenv 相同的命令*，Project X 将构建。
*   如果我启动 MSBuild 并将其传递给我的项目文件，则不会构建 Project X，也不会注意到已跳过，只是……根本不存在（在日志和输出目录中）。

我一次又一次地翻遍了项目文件。它真正做的就是像这样启动 devenv：

> "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Devenv.com" "MySolution.sln" /build "Release|Win32"

同样，如果我在提示项目 X 中使用*完全相同的命令，则会构建项目 X。*我在 MSBuild 中启用了诊断级别日志记录，但无济于事。我在这一点上不知所措，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:29:14.100

这可能是在黑暗中拍摄 - 但我之前遇到过这个问题并且发现卸载有问题的项目并将其重新加载到解决方案中可以解决问题。我从来没有确定它为什么会发生，也没有其他人向我解释过，但是这样做已经在不同的解决方案上为我解决了两到三遍这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T08:10:02.423

我已从`ProjectSection(ProjectDependencies) = postProject`sln`Project`文件中导致问题的原因中删除。这有帮助。

# javascript - 将函数绑定到对象中的另一个函数

> ID：13754942
> 
> 赞同：0
> 
> 时间：2012-12-07T00:10:51.477
> 
> 标签：javascript, oop, function

我尝试绑定一个函数，但我真的不知道它是如何工作的 例如

```
 q={};
   q.e=function(){return 1;}
   q.e.i=function(){alert(this);}
   q.e().i(); //Nothing happend I excepted that it will alert 1 
```

那么它是怎样工作的？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:12:57.500

函数也*继承*自Javascript 中的*Object*。因此，您可以将*属性*分配给*函数对象*，您只需调用

```
q.e.i = function() {}; 
```

但就是这样。如果要调用它，则需要相同的语义

```
q.e.i(); 
```

在您当前的代码段中，您尝试`.i()`在 的*返回值*上执行，该值`e()`恰好是 number `1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:16:39.997

由于 Number 对象没有方法，`q.e().i();` `q.e() == 1`因此调用时您应该会收到错误。`(1).i()``i`

很难提供帮助，因为代码没有任何意义。我只能说你的期望在我的脑海中没有意义:)

这是一些可以满足您期望的代码

```
var q = {};
q.e = function() { return 1; };

q.e.i = function() { alert(this); }

// Call q.e.i, specifying what to use as this
q.e.i.call(q.e()); 
```

诀窍在于，在 JS 中，`this`会根据您调用函数的方式而变化。

```
function a() {
  console.log(this);
}

var obj = {
   method: a
};

// Outputs the window object, calling a function without a `.` passes    
// The window object as `this`
a();
// Outputs the obj, when you say obj.method(), method is called with obj as `this`
obj.method();
// You can also force the this parameter (to the number 1 in this case)
// outputs 1
obj.method.call(1); 
```

# jquery - jquery.validate 从 JSOn 成功加载新页面

> ID：13754943
> 
> 赞同：1
> 
> 时间：2012-12-07T00:10:53.287
> 
> 标签：jquery

处理表单提交后调用的函数。我正在使用 JQuery 1.8 和 jquery.validate。

我有以下函数来检查和处理对服务器的调用并接收 JSON 成功回调：

```
<input type="submit" value="Continue" 
                      name="submit_first" onclick="verifyPge();" /> 
```

这是我需要添加加载页面的函数，它需要在同一个窗口中加载（JQuery 加载页面）这个函数使用 jquery.validate 运行 UI 检查，我需要向这个 verifyPge 添加一个新函数（ ); 函数，以便表单加载新页面。使用该方法或操作不是一个选项，并且正在对表单 ID 调用验证以使其保持独立。
// JavaScript 文档 $().ready(function() {

```
// validate signup form on keyup and submit
$("#yourInfo").validate({

    rules: {
        month: {
            required: true,
        },
        day: {
            required: true,
        },
        year: {
            required: true
        },

    },
    messages: {
        month: {
            required: "Please select the month you were born",
        },
        day: {
            required: "Please select the day you were born",
        },
        year: {
            required: "Please select the year you were born",
        },
        errorElement: "div"
    }
}); 
```

});

有任何想法吗？基本上，在完成 UI 验证并处理表单后，我想加载新页面，但使用 JQuery 页面加载并让 Jquery 通过 Ajax 切换页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:16:11.570

确保在您的服务器中返回 URL

```
// document DOM ready
$(function() {

// validate signup form on keyup and submit
$("#yourInfo").validate({
  submitHandler: function(form){
    // submit the form via ajax
    $.post(
      // your script
      'script.php',
      // your form in a serialized way your server can understand
      form.serializeArray()[0], 
      // success function
      function(url){
        window.location.assign(url); // load the new URL
      }
    );
    return false;
  },
  rules: {
    month: {
        required: true,
    },
    day: {
        required: true,
    },
    year: {
        required: true
    },
  },
  messages: {
    month: {
        required: "Please select the month you were born",
    },
    day: {
        required: "Please select the day you were born",
    },
    year: {
        required: "Please select the year you were born",
    },
    errorElement: "div"
  }
});

}); 
```

jQuery 验证插件已经处理了您的表单提交，无需`verifyPage()`在提交按钮中添加。使用`submitHandler`是表单验证后提交的正确方法。

# php - 检查值 50% 或更多是否与多维数组 (PHP) 中 haystack 中的针匹配

> ID：13754953
> 
> 赞同：0
> 
> 时间：2012-12-07T00:12:31.383
> 
> 标签：php, arrays, similarity

我想检查一个值在多维数组中是否与我放入的“针”有 50% 或更多相同。

我有一个函数可以检查多维数组中的值是否相同：

```
function in_array_r($needle, $haystack, $strict = true) {
    foreach ($haystack as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
            return true;
        }
    }

    return false;
    } 
```

但是，如果给定百分比的值相同，我想返回函数 true。我认为我需要整合以下内容：`similar_text($value1, $value2, $percent);`

```
if {$percent > 50) {
  // do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:19:15.250

我会尽可能避免递归函数

```
function in_array_r($needle, $haystack, $strict = true) {
    $eq = 0;
    $diff = 0;
    for($i=0,$n=count($haystack); $i<$n; $i++){
        for($j=0,$m=count($haystack[$i]); $j<$m; $j++){
            if (($strict && $haystack[$i][$j] === $needle) || $haystack[$i][$j] == $needle){
                $eq++;
            } else {
                $diff++;
            }
        }
    }
    return $eq/($eq+$diff);
} 
```

# java - Mac 上的 Java 菜单在更改焦点时显示为灰色

> ID：13754955
> 
> 赞同：3
> 
> 时间：2012-12-07T00:12:41.533
> 
> 标签：java, macos, swing, jmenu

我有一个带有 JMenuBar 的 JFrame，我正在 Mac 系统上开发和测试它。在这个 JFrame 上，我已将其中一个 JMenu 编程为禁用。但是，当我将焦点从我的 Java 应用程序转移到我计算机上的某个其他程序，然后又回到这个 JFrame 时，奇怪的事情正在发生。我观察到所有菜单都被禁用。我还观察到所有菜单都已启用。谁能告诉我这里发生了什么？

这是一段将重现错误的代码（至少在我的机器上是这样）：

```
public class MenuProblemExample {

    public static void main(String[] args) {
        System.setProperty("apple.laf.useScreenMenuBar", "true");
        JFrame frame = new JFrame();
        JMenuBar menuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        fileMenu.add(new JMenuItem("open"));
        menuBar.add(fileMenu);
        JMenu editMenu = new JMenu("Edit");
        editMenu.add(new JMenuItem("select all"));
        menuBar.add(fileMenu);
        menuBar.add(editMenu);
        frame.setJMenuBar(menuBar);
        fileMenu.setEnabled(false);
        frame.setVisible(true);        
    }
} 
```

当我运行它时，在将焦点切换到另一个窗口然后再返回的操作下，启用的属性不稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T03:36:38.043

Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

按照设计，使用屏幕菜单栏的 Mac 应用程序会在后台禁用菜单。当您的应用程序进入前台时，您的应用程序可以适当地启用菜单，例如使用[`WindowListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html).

附录：为了测试，这个修改后的示例添加了一个切换按钮，用于跟踪`File > Open`菜单项的状态。

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JToggleButton;

/**
 * @see http://stackoverflow.com/a/13756527/230513
 */
public class MenuProblemExample {

    public static void main(String[] args) {
        System.setProperty("apple.laf.useScreenMenuBar", "true");
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JMenuBar menuBar = new JMenuBar();
                JMenu fileMenu = new JMenu("File");
                final JMenuItem openItem = new JMenuItem("open");
                openItem.setEnabled(false);
                fileMenu.add(openItem);
                menuBar.add(fileMenu);
                JMenu editMenu = new JMenu("Edit");
                editMenu.add(new JMenuItem("select all"));
                menuBar.add(fileMenu);
                menuBar.add(editMenu);
                frame.setJMenuBar(menuBar);
                frame.add(new JToggleButton(new AbstractAction("Toggle") {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JToggleButton b = (JToggleButton) e.getSource();
                        openItem.setEnabled(b.isSelected());
                    }
                }));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# xhtml - 丰富的水平滚动：面板默认从右到左

> ID：13754956
> 
> 赞同：1
> 
> 时间：2012-12-07T00:12:56.190
> 
> 标签：xhtml, richfaces, scrollbar

我有一个丰富的面板，里面有一个 style="overflow:scroll" 标签。默认情况下，滚动条从左向右滑动。我不断通过单击按钮将新的数据表添加到数据网格中，并且我希望用户始终看到最新的数据表，并且由于我已将其设置为将每个数据表作为列添加到数据网格中，最新的将始终位于 dataGrid 的右侧。有没有办法可以默认滚动从右到左？或者也许从右到左创建列？

这是我的面板的代码：

```
<rich:panel id="PREV" rendered="#{yieldSearch.update}" style = "overflow: scroll">
            <rich:dataGrid id="PT" value="#{yieldSearch.storeYieldTest}"
                    var="_yield" columns="#{yieldSearch.columns}"> 
```

```
 </rich:dataGrid>
            </rich:panel> 
```

这是我的按钮：

```
<h:commandButton id="NXT" value="Add New Store" rendered="#{yieldSearch.update}" action="#     {yieldSearch.newStore()}" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:34:22.557

回答起来有点困难，因为您没有提供任何代码示例。
但是我认为你可以使用`javascript`它。我假设你的`panel`结构如下。

```
<rich:panel id="myPnl"........>
    <rich:dataGrid id="myGrid".............>
      .........
    </rich:dataGrid>
</rich:panel> 
```

我假设您`dataTables`通过`dataGrid`单击 a`<a4j:commandButton>`并调用`action`. 如果是这样，请在下面添加一个`oncomplete`事件。`<a4j:commandButton>`

```
<a4j:commandButton value="Add new data table" reRender="myPnl" oncomplete="#{rich:element('myPnl')}.scrollLeft += #{rich:element('myGrid')}.offsetWidth;"/> 
```

# xml - Vim 宏或插件按顺序重新编号 xml 元素？

> ID：13754958
> 
> 赞同：5
> 
> 时间：2012-12-07T00:13:18.330
> 
> 标签：xml, vim

我有多个需要每天编辑的 XML 文件。我无法控制读取这些文件的源，也无法控制 XML 的格式。

问题是每个元素在每个块中都需要自己的序号。有时每个块中可能有超过 200 个元素。当我需要在现有的长块中尽早插入命令时，我必须手动重新编号每个后续元素，这很乏味且容易出错。

此外，名称/值对与所需的顺序编号无关。下面的值“origcmd1”可能是“foobar98765”。它们只是为了说明我的问题。

例子：

从此开始：

```
<block1>
    <cmd1 name="origcmd1"></cmd1>
    <cmd2 name="origcmd2">someCmdsTakeParams,param2</cmd2>
    <cmd3 name="origcmd3"></cmd3>
</block1>

<block3>                             <c>no guarantee blocks are sequential #</c>
    <cmd1 name="cmd1"></cmd1>
    <cmd2 name="cmd2"></cmd2>
    <cmd3 name="cmd3"></cmd3>
</block3> 
```

如果我需要尽早添加命令，请在 origcmd1 和 origcmd2 之间说：

```
<block1>
    <cmd1 name="origcmd1"></cmd1>
    <cmd2 name="NEWcmd1"></cmd2>                    <c>cmd2 & cmd3 inserted</c>
    <cmd3 name="NEWcmd1"></cmd3>
    <cmd4 name="origcmd2">someCmdsTakeParams,param2</cmd4>
    <cmd5 name="origcmd3"></cmd5>
</block1>

<block3>                             <c>no guarantee blocks are sequential #</c>
    <cmd1 name="cmd1"></cmd1>
    <cmd2 name="cmd2"></cmd2>
    <cmd3 name="cmd3"></cmd3>
</block3> 
```

我现在必须检查并手动重新编号现在的 cmd4 和 cmd5。当有数百个命令时，这会变得非常令人沮丧。

迄今为止的解决方案包括尝试编写一个宏以从第一行重新编号，并假设它始终正确编号为 1。然后我将使用一系列删除/粘贴和 Ctrl-a 来增加每个进行中的行号。不幸的是，我永远无法让宏正常工作。

我还查看了 vim.org 上的 vim 插件，但没有发现任何我认为可以解决的问题。

Vim 对我来说是新的，但我喜欢它，这似乎是它非常适合解决的问题类型。任何关于我错过的快速技术或插件的想法都值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T05:40:57.253

以下似乎对我有用：

```
function! FixBlock()
  let g:pos_end = search("<\/bloc")
  call search("<block", "be")
  let s:i = 0
  while getpos(".")[1] < g:pos_end
    call search("cmd", "e")
    let s:i = s:i + 1
    exe 's/^\(.*\)\(<cmd[^ ]*\) \(.*\)/\1cmd' . s:i . ' \3/'
    "exe 's/^\(.*\)\(cmd.*\) \(.*\)/\1cmd' . s:i . ' \3/'
    exe 's?\(.*\)\(</cmd.*\)>\(.*\)?\1</cmd' . s:i . '>\3'
    normal j0
  endwhile
endfunction

map ,fb :call FixBlock() 
```

为了让它工作，你应该在你想要修复的块内。只需在普通模式下输入 ,fb 就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:51:07.997

如果 XML 的格式相当固定，您确实可以使用（有些复杂的）Vim 宏来操作内容，但要注意 XML 格式的细微变化（或注释掉的块）可能会造成严重破坏并破坏您的数据。由于 Vim 作为通用文本编辑器对 XML 结构没有真正的了解，因此很难使宏更加健壮。

*像XSLT*这样的 XML 处理器可能更适合这项工作。（虽然对我来说，在 XSLT 中编写转换比录制 Vim 宏更难！但如果你经常需要它，它可能是值得的投资。）你甚至可以在 Vim 中调用它：`:%!xsltproc ...`

示例 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[starts-with(name(),'cmd')]">
        <xsl:element name="cmd{position()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

# iphone - OnTap 上的列（条形图）将把它带到下一个屏幕 iOS

> ID：13754960
> 
> 赞同：0
> 
> 时间：2012-12-07T00:14:09.027
> 
> 标签：iphone, ios, ipad, graph, charts

我有一个简单的要求，即绘制带有 9 年 x 轴和 y 轴的条形图，年度费用为 200 美元，然后是 400 美元，然后是 600 美元，依此类推。年度/列上的 OnTap 会将其带到下一个屏幕，其中包含费用数据的所有详细信息.我已经尝试过所有图表，如 fusion、am、core plot，但我无法获得此功能并继续。如何获得此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:16:28.287

您可以使用[coreplot](http://code.google.com/p/core-plot/)来满足此要求。使用以下方法检测条形图上的点击。使用所有图表库，一切皆有可能。有关更多详细信息，请查看他们的[示例代码 CPTestApp](http://code.google.com/p/core-plot/source/browse/examples/CPTestApp/?r=edb524315bc6bf4d56d42646d1fd7dd1fe659ae4)。另[请检查此文档。](http://core-plot.googlecode.com/hg-history/7888d057a237931fad47e264000e059326e31aa9/documentation/html/MacOS/protocol_c_p_t_bar_plot_delegate-p.html). 这是[谷歌论坛中对此的讨论。](http://code.google.com/p/core-plot/issues/detail?id=168)

```
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index
{
    NSLog(@"barWasSelectedAtRecordIndex %d", index);
} 
```

# google-chrome-extension - 无法使用来自 devtools 扩展的 getBackgroundPage() api

> ID：13754961
> 
> 赞同：1
> 
> 时间：2012-12-07T00:14:15.017
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在尝试编写一个为 Chrome devtools 添加功能的扩展程序。

根据 devtools 文档，它说 devtools 中的页面支持非常有限的 api。任何不支持的 API 都可以通过后台页面访问，就像 contentscripts 一样。

这是相关的文档片段：

> tabId 属性提供您可以与 chrome.tabs.* API 调用一起使用的选项卡标识符。但是，请注意，出于安全考虑，chrome.tabs.* API 不会暴露给开发者工具扩展页面——您需要将标签 ID 传递到后台页面并从那里调用 chrome.tabs.* API 函数。

这是源网址：http: [//developer.chrome.com/extensions/devtools.inspectedWindow.html](http://developer.chrome.com/extensions/devtools.inspectedWindow.html)

但是，当我尝试这样做时，我在控制台中收到以下错误：

```
uncaught Error: "getBackgroundPage" can only be used in extension processes. See the content scripts documentation for more details. 
```

这是我的 devtools.js 脚本中的代码：

```
chrome.extension.getBackgroundPage().getLocation(); 
```

我究竟做错了什么？

**编辑**

我应该首先描述我的场景，并展示我是如何实现它的。

我想要做的是在与网页相关的 devtools 面板中显示额外的数据。为了获取该数据，我需要在与正在调试的页面相同的会话中发送一个 HTTP 请求，因为它需要身份验证。

用例：

用户浏览到特定的 URL。他已通过该站点的身份验证。然后他调用 devtools。devtools 面板打开，并显示一个新面板，其中包含与页面相关的额外数据。

执行：

1) DevTools 脚本找出被检查页面的 url。如果 url 与站点基本主机名匹配，则会打开一个面板。在面板创建的回调中，它向后台页面发送一条消息，要求它从同一站点上的调试端点下载 JSON 有效负载，然后将其发送到 devtools 扩展程序，然后显示它。

问题：

1）后台页面获取请求，下载URL。但是下载没有使用与用户相同的会话，因此下载请求失败。

2）从devtools窗口，我得到了被检查窗口的tabId。我将此 tabId 发送到后台页面，以便它可以从 url 中解析一些内容。但是， chrome.tabs.get(tabId) 不会返回选项卡。

总结一下，我需要

1）获取后台页面以在与正在调试的用户选项卡相同的会话中下载数据。2）我需要让后台页面能够访问用户的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:09:13.807

[开发者工具窗口中扩展页面可用的 API 包括上面列出的所有 devtools 模块和 chrome.extension API。其他扩展 API 不适用于开发者工具页面，但您可以通过向扩展的后台页面发送请求来调用它们，类似于在内容脚本中完成的方式。](http://developer.chrome.com/extensions/devtools.html#using)

我想文档有点模棱两可，通过[chrome.extension API](http://developer.chrome.com/extensions/devtools.html#using)他们是指[Supported API's for content scripts](http://developer.chrome.com/extensions/extension.html#content)。

因此，您可以使用[长寿命通信](http://developer.chrome.com/extensions/messaging.html#connect)在检查页面和背景页面之间进行通信

**示范：**

以下代码说明了`devtools page`需要一些信息的场景`background page`，它使用消息进行通信。

***清单.json***

确保权限在清单文件中都可用

```
{
"name":"Inspected Windows Demo",
"description":"This demonstrates Inspected window API",
"devtools_page":"devtools.html",
"manifest_version":2,
"version":"2",
"permissions":["experimental"],
"background":{
    "scripts" : ["background.js"]
}
} 
```

***开发工具.html***

一个简单的 HTML 文件

```
<html>
<head>
<script src="devtools.js"></script>
</head>
<body>
</body>
</html> 
```

***开发工具.js***

使用的[长寿命通信](http://developer.chrome.com/extensions/messaging.html#connect)API

```
var port = chrome.extension.connect({
        name: "Sample Communication"
});
    port.postMessage("Request Tab Data");
    port.onMessage.addListener(function (msg) {
        console.log("Tab Data recieved is  " + msg);
}); 
```

***背景.js***

[使用选项卡 API()](http://developer.chrome.com/extensions/tabs.html)响应[通信请求](http://developer.chrome.com/extensions/extension.html#event-onConnect)并传递琐碎信息

```
chrome.extension.onConnect.addListener(function (port) {
    port.onMessage.addListener(function (message) {
            chrome.tabs.query({
            "status": "complete",
            "currentWindow": true,
            "active": true
        }, function (tabs) {
            port.postMessage(tabs[0].id);
        });
        console.log("Message recived is  "+message);
    });
}); 
```

此处为琐碎的 devtools.js 收到的示例输出

![在此处输入图像描述](../Images/de84408e842325c2ee4265060a2d4a12.png)

如果您需要更多信息，请与我们联系

**编辑 1)**

**对于你的问题 1)**

您能否让您从浏览器扩展 HTML Page\Content Script 调用，以便共享相同的会话，我已经尝试了示例中的两种方式，并且它正在以我的形式工作，而不是后台页面中的代码 - 在内容中制作代码脚本或浏览器操作 HTML 页面。

如果您仍然面临问题，请告诉我。

**对于你的问题 2)**

以下代码始终获取当前用户正在浏览的窗口

***清单.json***

确保您在清单中具有选项卡权限。

```
{
"name":"Inspected Windows Demo",
"description":"This demonstrates Inspected window API",
"manifest_version":2,
"version":"2",
"permissions":["tabs"],
"background":{
    "scripts" : ["background.js"]
}
} 
```

***背景.js***

```
chrome.tabs.query({
    "status": "complete", //  Window load is completed
    "currentWindow": true, // It is in current window
    "active": true //Window user is browsing
}, function (tabs) {
    for (tab in tabs) { // It returns array so used a loop to iterate over items
        console.log(tabs[tab].id); // Catch tab id
    }
}); 
```

如果您仍然无法获取当前窗口的标签 ID，请告诉我。

# perl - perl 编译错误

> ID：13754962
> 
> 赞同：-2
> 
> 时间：2012-12-07T00:14:18.787
> 
> 标签：perl

以下代码错误：

```
 if (! defined $dchash{$location}) {
    die "Unrecognized realm: $location";
    }
 elsif ($dchash{$location}) ne $realm) {
    die "Incorrect realm for host in $location, expected $dchash{$location} got $realm";
    }

syntax error at ./test.pl line 73, near ") ne"
Execution of ./test.pl aborted due to compilation errors. 
```

验证 $realm 是否在哈希中的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T00:22:26.347

行中的第一个`)`字符`elsif`导致了问题。删除它应该消除该语法错误。

# java - 我如何（更）轻松地比较两组数字？

> ID：13754967
> 
> 赞同：1
> 
> 时间：2012-12-07T00:14:33.740
> 
> 标签：java, numbers, compare, set

我有一组三个数字，我想将一组数字与另一组数字进行比较。即，第一组中的每个数字都小于另一组中的至少一个数字。需要注意的是，第一组中的下一个数字必须小于第二组中的*不同*数字（即，{6,1,6} 对 {8,8,2} 有效，但 {6,2,6 } 反对 {8,8,2} 不会）。我有一个工作方法，但它是蛮力和丑陋的。

如果我们有 setA 和 setB，并且每个都有元素 a、b 和 c：

```
if(setB.a < setA.a)
    if(setB.b < setA.b)
        if(setB.c < setA.c)
            return true;
    else if(setB.b < setA.c)
        if(setB.c < setA.b
            return true; 
```

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:23:23.580

编辑：我刚刚意识到你说这些集合被硬编码为 3 个值。这是一种适用于任何大小集合的超级通用算法。

对于 3 值集合，您可以对集合元素进行相同的转储和排序，然后执行以下操作：

```
if(setB.a < setA.a)
    if(setB.b < setA.b)
        if(setB.c < setA.c)
            return true;
return false; 
```

==================================================== ====

通用算法：

这是我能立即想到的最有效的方法。

伪代码（比 java 更 Pythonic，抱歉——希望评论能解释）：

```
list l1 = set1.items() //get the items out
list l2 = set2.items()

l1 = sort(l1)
l2 = sort(l2) //sort the lists

int set2idx1 = l1[0].find_closest_greater_than_value(l2) //binary search or something
if set2idx1 exists:
    l2 = l2[set2idx1+1:] //in python this means l2 is reassigned to a subarray of l2 starting at set2idx1+1 going to the end of l2
else:
    return false

for(int i=1; i<l1.len; i++)
    int set2idxi = l1[i].find_closest_greater_than_value(l2) //binary search or something
    if set2idxi exists:
        l2 = l2[set2idxi+1:]
    else
        return false

return true 
```

如果有什么没有意义，请发表评论

编辑编辑：

对任何相关方的一般算法的解释：

1.  将集合元素转储到数组中
2.  对这些数组进行排序
3.  遍历第一个数组，查看第二个数组中是否有大于当前值的值。如果是这样，请获取该值的索引并删除之前和包括该索引的所有内容，并将第二个数组变量重新分配给剩余的内容。
4.  如果没有这样的值（或者因为它不存在或者你已经用完了要测试的值，则返回 false）。否则，最后返回true。

这里的想法是，由于数组已排序，您知道任何大于第二个数组中匹配元素的元素都将大于您在第一个数组中测试的元素。所以你可以去掉较低的值，因为你不想使用相同的值，你也可以去掉你找到的那个。如果您返回 false，您知道这是因为没有更大的值，或者是因为 array1 中的数字都大于 array2 中的数字，或者因为 array2 中没有足够的数字大于 array1 中的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:23:00.750

下面的伪代码呢？

```
Condition(A : Set, B : Set) : Bool =
    Let a := max(A), b := min(B) In
        // Namely, that each number in the first set is less than at least one number in the other set
        If a <= b Then
            // the next numbers in the first set must be less than a different number in the second set 
            Condition(without(A, a), without(B, b))
        Else
            False
        EndIf 
```

其中 without(A, a) 表示集合 A 减去集合 {a}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:59:04.933

似乎 a`List`会比 a 做得更好，`Set`因为您的示例包含重复元素。简单地：

1) 对两个列表进行排序。

2）从第二个列表中剪掉前几个元素，直到第一个和第二个列表的大小相等。

3）直接`list1[i]`比较`list2[i]`每个`i`。

代码：

```
import java.util.*;
class Main {
    public static void main (String[] args) {
        List<Integer> list1 = new ArrayList<Integer>();
        List<Integer> list2 = new ArrayList<Integer>();
        list1.add(3); list1.add(7); list1.add(7);
        list2.add(8); list2.add(8); list2.add(2); list2.add(1); list2.add(5);
        //algorithm:
        Collections.sort(list1);
        Collections.sort(list2);
        List<Integer> list3 = list2.subList(list2.size() - list1.size(), list2.size());
        System.out.println(list1.size() + " " + list3.size());
        boolean pass = true;
        for(int i = 0; pass && i < list1.size(); i++)
            if(list1.get(i) >= list3.get(i))
                pass = false;
        System.out.println(pass);
    }
} 
```

# c# - 使用 GridViewColumn 创建 ListView

> ID：13754971
> 
> 赞同：3
> 
> 时间：2012-12-07T00:14:52.567
> 
> 标签：c#, wpf, listview

我一直在与这个问题作斗争很长一段时间，我需要一些专家的帮助才能得到我想要的结果。这是通过将源绑定为 lstPerson 并将 DataMember 绑定到 Gender 和 Name 后我的带有 gridviewcolumn 的列表视图的结果。

人物类：

```
private int ID { get; set; }
private string Gender { get; set; }
private string FName { get; set; }

List<Person> lstPerson = GetPersonInformation();
//select Gender, FirstName From Person Order By Gender 
```

`ListView`结果：

```
John
Mike
Gabriel
Kevin
Peter
Stacy
Jen
Lily
Lisa
Vivian 
```

以上不是我想要展示的。如果我想要上述内容，那将很容易做到。下面的结果是我想要实现的......对于这个例子，最多 4 列和最多 3 行......每 3 行，创建一个 3 行的列，直到达到 4 列。

```
Male     Gabriel     Female     Lily
John     Kevin       Stacy      Lisa
Mike     Peter       Jen        Vivian 
```

有谁知道我如何通过 XAML 或后面的代码来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:23:02.867

你可以尝试玩`ItemsPanelTemplate`：

```
 <ListView>
     <ListView.ItemsPanel>
         <ItemsPanelTemplate>
             <WrapPanel Width="200" />
         </ItemsPanelTemplate>
     </ListView.ItemsPanel>
     <ListView.ItemTemplate>
         <DataTemplate>
             <TextBlock Margin="5 0" Text="{Binding FName}" />
         </DataTemplate>
     </ListView.ItemTemplate>
 </ListView> 
```

如果您需要 4 列，即使名称很长，您也可以`UniformGrid`使用`WrapPanel`：

```
<ItemsPanelTemplate>
     <UniformGrid Columns="4" />
</ItemsPanelTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:53:08.637

您需要正确排序的列表 - 仅此而已！

```
<ListBox x:Name="lbPeoples" ScrollViewer.VerticalalScrollBarVisibility="Disabled" ItemsSource="{Binding Path=Peoples}">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Vertical" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel> 
```

其中：ListBox 高度 = 3*Item_Height，ListBox 宽度 = 4*Item_Width

人民[0] = 男性，人民[6] = 女性

不是好方法 - 但很简单！

# mysql - 在 Wordpress 中与自定义数据库表交互

> ID：13754972
> 
> 赞同：0
> 
> 时间：2012-12-07T00:14:53.787
> 
> 标签：mysql, database, wordpress

我有一个自定义的 wordpress 表（my_table）。我正在插入，更新所有好东西。当我尝试使用

```
$wpdb->get_results("SELECT * FROM $wpdb->my_table",ARRAY_A); 
```

或者

```
$wpdb->get_results("SELECT * FROM my_table",ARRAY_A); 
```

我收到这个错误

```
WordPress database error: [Table 'mydatabase.my_table' doesn't exist]
SELECT * FROM my_table 
```

我也尝试将 my_table 添加到 wp-db.php 但我仍然收到此错误。

1.  是的，表在数据库中
2.  表中有数据

他们是我需要更改的配置选项还是我需要添加表名的其他地方？由于某种原因我找不到它。

**完全错误**

```
WordPress database error Table 'mydatabase.mytable' doesn't exist for query SELECT * FROM mytable made by do_action, call_user_func_array, promos 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:56:44.063

好吧，如果你仍然被卡住，这就是我会在你的情况下做的事情。创建一个新表，但这一次，通过从 WordPress 执行 SQL 命令，使用类似：

```
$wpdb->query('CREATE TABLE mynewtable (First_Name char(50), Last_Name char(50), ... etc.)'); 
```

立即检查您是否可以查询它。如果是这样，那么转到您的数据库并将所有数据转储`mytable`到这个新创建的表中。改用这个。

如果它是用户权限，因为创建前一个表的用户与授予 WordPress 访问权限的用户不同，那么您将是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:21:55.710

如果您的表`my_table`确实在`mydatabase`数据库中，并且如果`mydatabase`确实是 WordPress 的数据库，那么它没有理由不工作。如果`mydatabase`不是 WordPress 数据库或者`my_table`在另一个数据库中，那么它不起作用是正常的。

# android - Android HoneyComb - 请求已经关闭的光标

> ID：13754973
> 
> 赞同：1
> 
> 时间：2012-12-07T00:15:03.943
> 
> 标签：android, sqlite, sqliteopenhelper, android-cursor, android-cursorloader

我读了很多关于这个问题的问题，但我找不到解决问题的正确方向，也许是因为我是菜鸟，迫切希望找到正确的方法......

据我所知，“requering already closed cursor”问题发生在 HoneyComb 因为`startManagingCursor`已被弃用。并且由于 HoneyComb 我们应该使用可以使用的`CursorLoader`（`ContentProvider`我不使用也不想使用），并且发现有人编写了一个不使用的类`CursorLoader`（`ContentProvider`这里[）](https://stackoverflow.com/a/7422343/1365895)。

在我的应用程序中，我有一个 mySQLiteHelper 类，我有很多方法可以从中检索数据`SQLite`：

```
 public Cursor listaBeneficios(String id) {
    String where = "proposta=?";
    String[] whereArgs = {id};
    String[] campos = {"pessoa"};
    Cursor c = db.query(TABLE_BENEFICIOS, campos, where, whereArgs, null, null, null, null);
    if (c.moveToFirst()) {
        return c;
    } else {
        return null;
    }
} 
```

在我的 上`Activity`，我可以像这样读取数据：

```
 db = new repositorio(MainActivity.this);
    Cursor c = db.listaBeneficios(PROPOSTA);
    startManagingCursor(c);
    address.setText(c.getString(c.getColumnIndex("address")));
    db.close(); 
```

但我注意到，每次我点击后退按钮并返回 Activity A 时，它都会给出臭名昭著的“试图重新查询已经关闭的光标”。我已经尝试过 stopManagingCursor 和 close() 并且不使用 startManagingCursor。这让我发疯了。

是否有任何可用的简单使用示例`CursorLoaders`？如果我实施，我能否继续使用上面的方法（即上面的 listaBeneficios()）`CursorLoaders`？这[门课](https://stackoverflow.com/a/7422343/1365895)对我有帮助吗？我该如何实施？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:30:32.763

CursorLoader 不起作用，因为它需要内容 URI。但是，您始终可以使用[Loader](http://developer.android.com/reference/android/content/Loader.html)或[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)。这些类的[文档](http://developer.android.com/guide/components/loaders.html)包含如何使用它们的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T02:28:08.827

就我而言，我使用 managedQuery 从 ContentProvider 将光标返回到我的活动。我只是将调用更改为 getContentResolver().query 并解决了问题。

在 Eclipse 中执行 Control H 以换出您需要的所有更改。

# php - 使用 AJAX 加载 PHP 页面是一种好的做法吗？

> ID：13754974
> 
> 赞同：1
> 
> 时间：2012-12-07T00:15:13.723
> 
> 标签：php, ajax, jquery, seo

我有一个 PHP 网站，其中包含四个或五个其他 PHP 文件，我使用 jQuery AJAX 将它们加载到主 index.php 上。就 SEO 和网络爬虫而言，这是一种好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:19:36.553

本质上不，我建议您阅读此内容。底部还有一个工具可以帮助您查看谷歌蜘蛛看到的内容。

[https://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

# c - realloc() 下一个大小无效

> ID：13754985
> 
> 赞同：2
> 
> 时间：2012-12-07T00:16:15.497
> 
> 标签：c

知道为什么我会收到错误 realloc(): invalid next size 吗？

```
 while (loc) {
    char nextLine[MAX_PATH_LEN + 30];
    sprintf(nextLine, "<p>%s:%d</p>", loc->item.pathname,
    loc->item.offset);
    DPRINTF('h', ("Next line is: %s, length: %d\n", nextLine, strlen(nextLine))\
);

    DPRINTF('h', ("spaceUsedUp is %d\n", spaceUsedUp));
    while (spaceUsedUp + strlen(nextLine) > allocatedSize) {
      printf("Allocated size is now %d\n", allocatedSize);
      allocatedSize *= 2;
    }

    DPRINTF('h', ("Will realloc size %d\n", allocatedSize));
    char *tmp = (char *)realloc(result, allocatedSize);
    DPRINTF('h', ("Done with the realloc.\n"));
    fflush(stdout);
    if (tmp == NULL) {
      perror("realloc");
    }
    result = tmp;
    tmp = NULL;

    int theOne = (spaceUsedUp == 0) ? 0 : 1;
    memcpy(result+spaceUsedUp-theOne, nextLine, sizeof(nextLine));

    spaceUsedUp += strlen(nextLine) - theOne;
    loc = loc->nextLocation;
  } 
```

输出是：

```
Next line is: <p>/dirA/f3:6162</p>, length: 20
spaceUsedUp is 0
Will realloc size 100
Done with the realloc.
Next line is: <p>/dirA/f3:6038</p>, length: 20
spaceUsedUp is 19
Will realloc size 100
*** glibc detected *** ./proj3/disksearch: realloc(): invalid next size: 0x0000000001797fa0 *** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:22:20.797

这是因为你 memcpy sizeof(nextLine) 字节，破坏了你分配的内存。而不是 sizeof(nextLine) 你应该使用 strlen(nextLine) 并且事情应该没问题。

像这样的 Realloc 错误通常表明内存堆已损坏，这通常是由于越界写入或重用释放的指针而发生的。

Valgrind 是您解决此类问题的朋友。

# highcharts - 在 highstock 图表中设置绘图线的背景图像样式

> ID：13754992
> 
> 赞同：0
> 
> 时间：2012-12-07T00:16:41.190
> 
> 标签：highcharts

```
 plotLines: [{
                    value: 1.2873,
                    color: 'green',
                    label: {        
                        style: {
                             color:'red'
                             background-color:'#000',
                             background-image:'url(image.jpg)',
                        },
                    }
                }], 
```

这是应该的吗？此外，是否可以使用来自外部文件的图像（例如，gif）来设置 plotLine 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:59:48.647

不幸的是，不支持背景图片，但您可以在此处请求您的建议：http: [//highcharts.uservoice.com](http://highcharts.uservoice.com)

# node.js - 如何将 node.js 程序交付给客户端？

> ID：13754995
> 
> 赞同：1
> 
> 时间：2012-12-07T00:17:00.713
> 
> 标签：node.js

您刚刚完成了一个 node.js 站点。这是一个包含一些文件和一个`my_main_file.js`处理请求的文件夹。这个东西通过运行在你的机器上运行`node my_main_file.js`。但是，您如何将此解决方案交付给客户？您是否应该说“获取此文件夹，安装 node.js，运行该命令行，您的站点将在线”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:09:52.063

答案是肯定的。这比在其他平台上提供可服务站点要简单得多。几乎每个平台都有[nodejs 安装二进制文件](http://nodejs.org/download/)，然后它很简单：

```
$ node site/my_main_file 
```

或者也许还有一个安装依赖项的步骤。无论哪种方式，它都非常简单。

# php - 我在我的项目中创建了删除用户帐户按钮，但无法删除已删除用户留给其他用户的消息

> ID：13754996
> 
> 赞同：0
> 
> 时间：2012-12-07T00:17:09.893
> 
> 标签：php, codeigniter

当用户在他们的帐户中并单击“删除帐户”时，它应该删除该用户以及他们为用户留下的消息，并且也停止向其他用户显示为朋友。我有 2 个这样的工作，但如果其他用户登录，消息仍然会出现。我已经创建了一个函数，用户可以使用它来删除朋友的消息，我试图将它实现到一个新函数中，所以它将删除消息，但来自特定朋友。这是原始的 deleteMsg，它将删除所有字段（message_id、from、to、message），因此该消息将在消息数据库中被删除。此功能出现在我的消息模型中：

```
function deleteMsg($message_id)
 {

$this->db->where(array('message_id' => $message_id));
$this->db->delete('messages');

 } 
```

这是我正在尝试实现的功能，以便在调用删除帐户时，它将删除该已删除用户在其他用户主页上留下的所有消息。它也出现在我的模型中：

```
 function deleteAccountMsg($message_id, $from)
  {
$delAcctMsg = $this->db->select('*')->from('messages')->where('message_id', $message_id)->where('from', $from);
$delete = $this->db->delete('messages', $delAcctMsg);

    } 
```

最后，这是我的控制器中的 DeleteUserAccount 函数，它应该抓取与用户关联的所有内容并将其删除：

```
 function Deleteuseraccount()
 {
    parent::__construct();

    $this->load->model("membership");
    $this->load->model("friends");
    $this->load->model("messages");

    $username = $this->session->userdata('username');
    $this->membership->deleteUser($username);
    $this->friends->deleteMemberFriend($username, $friendname);
    $this->messages-> deleteAccountMsg($message_id, $from);// this is the function I'm calling that isn't deleting the associate messages from the deleted user
    $this->session->sess_destroy();
    redirect('start');
 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:02:23.073

您一次只删除（通过选择）一条消息。您需要删除消息 ID 限制

```
$delAcctMsg = $this->db->select('*')->from('messages')->where('from', $from);
$delete = $this->db->delete('messages', $delAcctMsg); 
```

* * *

几点注意事项

1）先写伪SQL

你可以通过在 PHP 中拼写出你想要做的事情

```
SELECT *
FROM messages
WHERE from=$from 
```

这将为您提供 SQL 模型所需的链。

2）为什么`SELECT *`只需要选择message_id？

`SELECT`3）当你可以删除时，为什么要这样做？节省网络流量、处理和 mySQL 调用。

```
$delete = $this->db->delete('messages')->where('from', $from); 
```

4）如果你想适应以前的功能，你可以分成几位。就像是

```
// (Untested - try it first on test data)
$this->db->where('from', $from);
if ($message_id) {
    $this->db->where('message_id', $message_id);
}
$this->db->delete('messages'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:53:20.243

$this->db->select('*')->from('messages')->where('from', $username)->or_where('to', $username);

这实际上解决了这个问题

# macos - 如何调试 Core Image 内核中的语法错误？

> ID：13754997
> 
> 赞同：2
> 
> 时间：2012-12-07T00:17:17.397
> 
> 标签：macos, quartz-graphics, core-image

在编写新的核心图像过滤器时，您需要使用核心图像内核语言编写内核，这是一种轻度变异的 OpenGL 着色器语言。你在运行时用类似这样的东西编译它们……</p>

```
NSString *myCode = ...
NSArray *kernels = [CIKernel kernelsWithString:myCode]; 
```

问题是任何语法错误，您只需返回 nil 而不是数组。记录在案的 API 并未提出获取诊断信息的机制。

如果您按照 Apple 文档中的建议在 Quartz Composer 中处理您的过滤器，您会注意到它可以为您提供语法错误信息。（这只适用于简单的过滤器。）

那么，如何获取错误内核源文件的诊断信息呢？

**更新：**根据具体情况，您可能会在控制台上看到格式化的行。如果您很幸运，那么您不必担心这一点，只需查找以下行：

```
8: error: in function kernel vec4 clipDetection (uniform in sampler, uniform in float)
8: error: unknown variable name: gratuitous 
```

当然，如果你还需要掌握信息……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:17:17.397

如果你在 CIKernel 类上使用自省，你会发现 kernelsWithString:messageLog: 方法。它没有公共接口，但不要让它阻止你……</p>

```
NSString *myCode = ...
NSMutableArray *messageLog = [NSMutableArray array];
NSArray *kernels = [[CIKernel class] performSelector:@selector(kernelsWithString:messageLog:) withObject:myCode withObject:messageLog];
if ( messageLog.count > 0) NSLog(@"Error: %@", messageLog.description); 
```

messageLog 参数想要成为一个可变数组。如果出现错误，它会放入一些字典。这些内容的文档在互联网上无处可见，但它们看起来像这样（在我将“无故错误”添加到内核源代码的情况下）......</p>

```
2012-12-06 17:56:53.077 MyProgram[14334:303] Error: (
        {
        CIKernelMessageDescription = "kernel vec4 clipDetection (uniform in sampler, uniform in float)";
        CIKernelMessageLineNumber = 8;
        CIKernelMessageType = CIKernelMessageTypeFunctionName;
    },
        {
        CIKernelMessageDescription = "unknown variable name: gratuitous";
        CIKernelMessageLineNumber = 8;
        CIKernelMessageType = CIKernelMessageTypeError;
    }
) 
```

与往常一样，请三思或更多地考虑将其留在运输代码中。它是无证的，Apple 可以随时对它做任何事情。你知道，他们甚至可能会记录下来。