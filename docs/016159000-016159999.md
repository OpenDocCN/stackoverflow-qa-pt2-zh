# StackOverflow 问答 16159000-16159999

# c# - 如何在asp C#中的同一程序中通过串口读取和发送数据

> ID：16159001
> 
> 赞同：2
> 
> 时间：2013-04-23T00:34:02.103
> 
> 标签：c#, serial-port, arduino

我已经将数据从 C# 发送到`Arduino`，并且工作完美；但是当我尝试通过 C# 从传感器接收数据时`event handler`，它必须保持端口打开以读取任何接收到的数据；所以我不能再通过串口发送数据了。

如何在 C# 和 Arduino 之间**同时发送和接收数据？**

这是我接收数据的代码：

```
public static SerialPort port=
    new SerialPort("COM5", 9600, Parity.None, 8, StopBits.One);

protected void DataReceived(object sender, SerialDataReceivedEventArgs e) {
    SerialPort sp=(SerialPort)sender;
    indata=sp.ReadExisting();
    Functions f=new Functions();

    if(indata!="") {
        if(indata.Equals("bed_light_on\r\n")) {
            f.update_flag("bed_light", 1);
        }
    }
}

protected void Page_Load(object sender, EventArgs e) {
    indata="";
    port.Close();
    port.DataReceived+=new SerialDataReceivedEventHandler(DataReceived);

    if(!port.IsOpen)
        port.Open();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:21:58.560

这是我写了 6 年的帮助类，可能会有所帮助。顺便说一句-您无法从 ASP 读取 COM 端口 :)

```
using System;
using System.Text;
using System.IO.Ports;

namespace MyNamespace
{
    public class COMSerialPort : IDisposable
    {
        private SerialPort FSerialPort;
        public Boolean Disposed { get; private set; }

        //---------------------------------------------------------------------
        public COMSerialPort(String portName, Int32 baudRate, Encoding encode)
        {
            FSerialPort = new SerialPort(portName, baudRate, Parity.None, 8, StopBits.One);

            FSerialPort.NewLine = "\r";
            FSerialPort.Encoding = encode;
            Disposed = false;
        }
        //---------------------------------------------------------------------
        public COMSerialPort(String portName, Int32 baudRate) : this( portName, baudRate, Encoding.ASCII )
        {
        }
        //---------------------------------------------------------------------
        ~COMSerialPort()
        {
            Dispose(false);
        }
        //---------------------------------------------------------------------
        protected void Dispose(Boolean bDisposing)
        {
            lock (this)
            {
                if (!Disposed)
                {
                    Disposed = true;
                    GC.SuppressFinalize(this);

                    if (bDisposing)
                    {
                        if (FSerialPort != null)
                        {
                            Close();

                            FSerialPort.Dispose();
                            FSerialPort = null;
                        }
                    }
                }
            }
        }
        //---------------------------------------------------------------------
        public void Dispose()
        {
            Dispose(true);
        }
        //---------------------------------------------------------------------
        public void Open()
        {
            if (!FSerialPort.IsOpen) FSerialPort.Open();
        }
        //---------------------------------------------------------------------
        public void Close()
        {
            if (FSerialPort.IsOpen) FSerialPort.Close();
        }
        //---------------------------------------------------------------------
        public void WriteLine(String data)
        {
            if (FSerialPort.IsOpen) FSerialPort.WriteLine(data);
        }
        //---------------------------------------------------------------------
        public void Write(String data)
        {
            if (FSerialPort.IsOpen) FSerialPort.Write(data);
        }
        //---------------------------------------------------------------------
        public void Write(Byte[] data)
        {
            if (FSerialPort.IsOpen) FSerialPort.Write(data, 0, data.Length);
        }
        //---------------------------------------------------------------------
        public String ReadLine()
        {
            String rValue;
            if (FSerialPort.IsOpen)
                rValue = FSerialPort.ReadLine();
            else
                rValue = null;

            return rValue;
        }
        //---------------------------------------------------------------------
        public String Read(Int32 count)
        {
            String rValue = null;
            if (FSerialPort.IsOpen)
            {
                Char[] buffer = new Char[count];
                FSerialPort.Read(buffer, 0, count);

                StringBuilder sb = new StringBuilder();
                sb.Append(buffer);

                rValue = sb.ToString();
            }

            return rValue;
        }
        //---------------------------------------------------------------------
        public Byte[] ReadBytes(Int32 count)
        {
            Byte[] rValue = null;
            if (FSerialPort.IsOpen)
            {
                rValue = new Byte[count];
                FSerialPort.Read(rValue, 0, count);
            }

            return rValue;
        }
        //---------------------------------------------------------------------
        public Char ReadChar()
        {
            return (Char)FSerialPort.ReadChar();
        }
        //---------------------------------------------------------------------
        public Int32 ReadByte()
        {
            return FSerialPort.ReadByte();
        }
        //---------------------------------------------------------------------
        public SerialPort NativeObject
        {
            get { return FSerialPort; }
        }
    }
} 
```

# facebook - facebook登录后Symfony 2.1自动登录

> ID：16159002
> 
> 赞同：2
> 
> 时间：2013-04-23T00:34:12.180
> 
> 标签：facebook, login, symfony-2.1, facebook-login, autologin

我正在创建一个 Intranet，因此所有用户都有自动为他们创建的帐户。然后他们会转到一个 URL 来创建他们的密码。所有这些都很好。我现在正试图让他们将他们的 Facebook 帐户“附加”到他们的用户帐户。这就是我的麻烦开始的地方......

在使用此方法登录 facebook 后，我已成功让用户正确进行身份验证`SecurityController`

```
public function loginCheckFacebookAction()
{

    $request = $this->getRequest();
    $session = $request->getSession();
    $response = new Response();

    $sessionUser = $this->getUser();

    $facebook = $this->get('facebook');

    $fbUser = $facebook->getUser(); // facebook id

    if ($fbUser) {
      try {

          $em = $this->getDoctrine()->getManager();
          $repo = $em->getRepository("IntranetBundle:User");
          $user = $repo->findUserByFBID($fbUser);

          if($user){

              $targetPath = $session->get("_target_path");

               $firewall = "secured_area";

               $roles = $user->getRoles();

               $rolesArray = array();

    foreach($roles as $role):
        $rolesArray[] = $role->getRole();
    endforeach;

               $token = new UsernamePasswordToken($user, $user->getPassword(), $firewall, $rolesArray);

               $event = new InteractiveLoginEvent($this->getRequest(), $token);
               $this->get("event_dispatcher")->dispatch("security.interactive_login", $event);

               $this->get('security.context')->setToken($token);

              /*
              If I uncomment out either of the following redirects
              the redirect happens but the user is not authenticated properly
              If I comment them out I'm just rendering my error template.  The user
              however, is authenticated properly.
              */  
              if(isset($targetPath)){
                  //return $this->redirect($targetPath);
              } else {
                  //return $this->redirect($this->generateUrl("ssla_intranet_homepage"));
              }

          }

      } catch (FacebookApiException $e) {

          $user = null;

      }

    // I just render this template to be able to view debug bar.  
    //User is authenticated properly.

    $pageParameters = $this->getPageParameters();
    $pageParameters["page"] = "error";
    $pageParameters["error"] = array();
    $pageParameters["error"]["message"] = "Something went wrong with authentication";

    return $this->render('IntranetBundle:Error:index.html.twig', $pageParameters);
} 
```

我是否需要为所有`interactive_login`事件注册一个侦听器，然后处理所有`post-login`重定向，而不是尝试在同一方法中重定向？

第一个使用 Symfony 的项目，这让我很生气。有什么想法吗？

顺便说一句，我查看了**FOSFacebookBundle**，但希望能够使用多种不同的方法进行身份验证，包括教义、gmail、facebook 和 twitter。

# php - 使用 HTML 创建时间表

> ID：16159003
> 
> 赞同：-1
> 
> 时间：2013-04-23T00:34:17.483
> 
> 标签：php, html-table

我想用 HTML 制作我每周工作日程的时间表。我已经有一个数据库，它可以按我应该在的地方按小时运行。

我将如何在 HTML 中制作这个？我可以在 html 中创建一个表格，但我将如何准确地绘制我想要的内容？

这是我正在尝试制作的模型： ![在此处输入图像描述](https://i.stack.imgur.com/fAD54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:52:38.413

很难提供有用/直接的答案，因为我们并不真正了解您的数据库方案。如果您想知道如何获取信息并将其迭代到表格中，这里有一个很好的（尽管过时且风格不佳）[教程](http://phpeasystep.com/mysql/6.html)。

为了快速复习它所说的内容，您要做的第一件事是连接到您的数据库。有一篇关于 Nettuts 的[好文章](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/?search_index=34)讨论了访问数据库的最佳实践，但是由于我们才刚刚开始，我们可以使用以下内容（我鼓励您重新访问代码并使用您在 Nettuts 学到的东西来使用 PDO 编写一些东西):

```
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB"); 
```

连接后，您需要做的就是 (1) 查询数据库（在这种情况下，我们正在查找表中的所有记录）：

```
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql); 
```

(2) 使用 while 循环遍历结果

```
<table>
<?php
// Start looping rows in mysql database.
while($rows=mysql_fetch_array($result)){
?>
<td><?php echo $rows['theNameOfYourRow']; ?></td>
<?php
}
?>
</table> 
```

再次，我强烈建议您查看一些关于 nettuts 的数据库最佳实践教程，[他们](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/?search_index=3)有很多[非常](http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql/?search_index=28)好的[在](http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/?search_index=12)[此处输入链接描述](http://net.tutsplus.com/tutorials/databases/sql-for-beginners/?search_index=20)。

# c# - 如何根据单选按钮的内容设置一些文本？

> ID：16159004
> 
> 赞同：1
> 
> 时间：2013-04-23T00:34:29.233
> 
> 标签：c#, wpf, listbox, radio-button

我有一个相当基本的 C#/WPF 问题。我有一个可以添加单选按钮的列表框。我将列表框选择模式设置为“单个”，因此我一次只能选择一个。我想要做的是根据选择的按钮设置一些基于单选按钮内容的文本。

我的代码片段如下所示：

```
private void Btn_Hello(object sender, RoutedEventArgs e)     
{          
    RadioButton rb = selection.SelectedItem as RadioButton;      
    Hello_box.Text = "hello" + rb.Content;  
} 
```

当我运行我的代码时，它`selection.selecteditem`是空的。我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:59:25.007

```
 private void Btn_Hello(object sender, RoutedEventArgs e)
  {
      RadioButton rb = selection.Items.OfType<RadioButton>().FirstOrDefault(o => o.IsChecked==true);
      if(rb!=null)
          Hello_box.Text = "hello" + rb.Content.ToString();
  } 
```

如果我正确理解了您的问题，我认为这应该会有所帮助。

# prolog - 序言中的列表列表？

> ID：16159010
> 
> 赞同：1
> 
> 时间：2013-04-23T00:34:57.310
> 
> 标签：prolog

我知道如何在序言中操作列表，但我在处理列表时遇到了麻烦，我正在准备考试，这是练习题之一。有人可以帮我解决它。到目前为止，我所做的所有尝试都是彻底的失败。

编写一个名为 max2D 的谓词，它将值列表的列表作为参数，并返回列表中所有值的最大值。

示例输出：57

```
?- max2D([[1,-7,3],[2,10],[19,3],[12]],M). 
M = 19 . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:00:12.983

让我们分两步来做。首先，让我们获取列表的最大值：

```
maxlist([X,Y|Z], Max) :- 
    X > Y -> maxlist([X|Z], Max)
           ; maxlist([Y|Z], Max).
maxlist([X], X). 
```

看起来不错：

```
?- maxlist([1,5,7,3,5], Max).
Max = 7\. 
```

让我们将`maplist/3`其应用于二维列表。每个最大值中的最大值将是总最大值：

```
max2D(List, Max) :- 
    maplist(maxlist, List, EachMax),
    max_list(EachMax, Max). 
```

这似乎有效：

```
?- max2D([[1,-7,3],[2,10],[19,3],[12]], X).
X = 19 ;
false. 
```

# javascript - 活动导航锚链接

> ID：16159014
> 
> 赞同：0
> 
> 时间：2013-04-23T00:35:32.047
> 
> 标签：javascript, jquery, html

我已经在这里和通过谷歌进行了搜索，我已经尝试了他们给我的所有代码，但没有一个成功。我完全不知道为什么它们不起作用。基本上，当您滚动页面并到达锚链接“关于”时，我希望突出显示“关于”，直到您到达“事件”等。

```
<div id="menu-wrapper">
    <div id="menu">
            <ul>
            <li class="logo"><a href="#home"><img src="/images/ccky_logo.png" height="60"/></a></li>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#events">Events</a></li>
            <li><a href="#team">Team</a></li>
            <li><a href="#location">Location</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </div>
    <!-- end #menu -->
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:55:09.740

可以使用 bootstrap 的 Scrollspy 来实现这个效果：http: [//twitter.github.io/bootstrap/javascript.html#scrollspy](http://twitter.github.io/bootstrap/javascript.html#scrollspy)

实现 JavaScript 插件后，只需使用`$('#menu').scrollspy()`.

在您的 HTML 中，只需添加引导程序指示您使用的数据参数即可。

# sql - 按多个条件分组

> ID：16159017
> 
> 赞同：1
> 
> 时间：2013-04-23T00:35:57.973
> 
> 标签：sql, postgresql, aggregate-functions

给定表格

```
| userid | active | anonymous |
|   1    |   t    |    f      |
|   2    |   f    |    f      |
|   3    |   f    |    t      | 
```

我需要得到：

*   用户数
*   'active' = true 的用户数
*   “活跃”的用户数 = false
*   “匿名”的用户数 = true
*   “匿名”的用户数 = false

与单个查询。

至于现在，我只提出了使用**union**的解决方案：

```
SELECT count(*) FROM mytable
UNION ALL
SELECT count(*) FROM mytable where active
UNION ALL
SELECT count(*) FROM mytable where anonymous 
```

所以我可以取第一个数字并通过简单的扣除找到非活跃和非匿名用户。

有什么方法可以摆脱联合并计算与这些简单条件匹配的记录数，并在**PostgreSQL 9中使用一些***神奇而高效*的查询？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:39:08.070

您可以使用带有 a 的聚合函数`CASE`在单独的列中获取结果：

```
select 
  count(*) TotalUsers,
  sum(case when active = 't' then 1 else 0 end) TotalActiveTrue,
  sum(case when active = 'f' then 1 else 0 end) TotalActiveFalse,
  sum(case when anonymous = 't' then 1 else 0 end) TotalAnonTrue,
  sum(case when anonymous = 'f' then 1 else 0 end) TotalAnonFalse
from mytable; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/3907b/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T01:59:16.193

假设您的列是`boolean NOT NULL`，这应该会快一点：

```
SELECT total_ct
      ,active_ct
      ,(total_ct - active_ct) AS not_active_ct
      ,anon_ct
      ,(total_ct - anon_ct) AS not_anon_ct
FROM  (
   SELECT count(*) AS total_ct
         ,count(active OR NULL) AS active_ct
         ,count(anonymous OR NULL) AS anon_ct
   FROM  tbl
   ) sub; 
```

查找此密切相关答案中使用的技术的详细说明：
[Compute percents from SUM() in the same SELECT sql query](https://stackoverflow.com/questions/15644713/compute-percents-from-sum-in-the-same-select-sql-query/15650897#15650897)

索引几乎没有任何用处，因为无论如何都必须读取整个表。如果您的行比示例中的大，覆盖索引可能会有所帮助。取决于您的实际表的具体情况。

-> [**SQLfiddle**](http://sqlfiddle.com/#!12/9e6be/1)与[@bluefeet 的版本比较，每个值都有`CASE`语句](https://stackoverflow.com/a/16159042/939860)。

SQL 服务器的人不习惯正确`boolean`类型的 Postgres，并且倾向于走很长的路。**

# delphi - 如何将整数存储在 TObject 属性中，然后将该值显示给用户？

> ID：16159019
> 
> 赞同：5
> 
> 时间：2013-04-23T00:36:23.067
> 
> 标签：delphi, delphi-7

当然，这段代码不会编译。首先，我需要将 TObject 值转换为 Integer。然后，将其作为字符串读取。我应该使用什么功能？

```
for i := 1 to 9 do begin
    cmbLanguage.Items.AddObject(Format('Item %d', [i]), TObject(i));
end;

cmbLanguage.ItemIndex := 2;

ShowMessage(cmbLanguage.Items.Objects[cmbLanguage.ItemIndex]); 
```

或者也许可以首先使用 String 而不是 Integer ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T00:53:22.733

```
cmbLanguage.Items.AddObject(Format('Item %d', [i]), TObject(i)); 
```

在这里，您要添加一个带有“对象”的项目，该“对象”实际上是一个`i`转换为`TObject`.

由于您实际上在对象字段中存储了一个 int，因此您可以将其转换回 Integer，然后将其转换为字符串：

```
ShowMessage(IntToStr(Integer(cmbLanguage.Items.Objects[cmbLanguage.ItemIndex]))); 
```

请注意，您并没有真正在此处*转换*任何内容，您只是假装您的整数是 TObject，因此编译器不会抱怨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:33:50.527

如果您知道您将在余生中使用 Delphi-7，请坚持使用 TObject(i) 演员表。否则开始使用适当的对象，这将在升级到 64 位时为您省去麻烦。

```
Unit uSimpleObjects;

Interface

type
   TIntObj = class
   private
      FI: Integer;
   public
      property I: Integer Read FI;
      constructor Create(IValue: Integer);
   end;

type
   TDateTimeObject = class(TObject)
   private
      FDT: TDateTime;
   public
      property DT: TDateTime Read FDT;
      constructor Create(DTValue: TDateTime);
   end;

Implementation

{ TIntObj }

constructor TIntObj.Create(IValue: Integer);
begin
   Inherited Create;
   FI := IValue;
end;

{ TDateTimeObject }

constructor TDateTimeObject.Create(DTValue: TDateTime);
begin
   Inherited Create;
   FDT := DTValue;
end;

end. 
```

用法：

```
var
  IO: TIntObj;
  SL: TStringList; 
```

贮存：

```
SL := TStringList.Create(true); // 'OwnsObjects' for recent Delphi versions
IO := TIntObj.Create(123);  
SL.AddObjects(IO); 
```

恢复：

```
IO := TIntObj(SL.Objects[4]);
ShowMessage('Integer value: '+ IntToStr(IO.I)); 
```

对于 Delphi-7

```
TIntObj := TStringList.Create; 
```

你必须自己释放对象：

```
for i := 0 to Sl.Count-1 do 
begin
  IO := TIntObj(SL.Objects[i]);
  IO.Free;
end;
SL.Free; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-29T13:49:46.317

如果使用**delphi xe 或更高版本**，我将使用基于 @Jerry 答案的通用类。

准备：

```
unit CoreClasses;

interface

type
  IPrimitiveBox<T> = interface

    procedure setValue(value : T);
    function getValue(): T;

  end;

  TPrimitiveBox<T> = class(TInterfacedObject, IPrimitiveBox<T>)

    private
      value : T;

    public
      constructor create(value : T);

      // IPrimtiveBox<T>
      procedure setValue(value : T);
      function getValue(): T;

  end;

implementation

{ TPrimitiveBox<T> }

constructor TPrimitiveBox<T>.create(value: T);
begin
  self.value := value;
end;

function TPrimitiveBox<T>.getValue: T;
begin
  Result := value;
end;

procedure TPrimitiveBox<T>.setValue(value: T);
begin
  self.value := value;
end; 
```

用法（基于@Jerry 示例）

```
var
  io: IPrimitive<Integer>;

sl := TStringList.create(true);
io := TPrimitive<Integer>.create(123);
sl.addObjects(io)

io := IPrimitive<Integer>(sl.objects[4]);
ShowMessage('Integer value: '+ IntToStr(io.getValue())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T00:50:46.493

您不能简单地将对象转换为字符串。这是您必须使用您选择的方法自己完成的事情，具体取决于其背后的原因。例如，您可以连接表示对象中数据的 XML 格式的字符串。但是，Delphi 绝对无法为您连接这些数据。

* * *

正如其他人指出的那样，您实际上是在尝试*将*a转换`TObject`为`Integer`. 这意味着如果您在`TObject`字段中存储了一个整数，那么您需要*将*其转换回来，例如`Integer(MyIntObject)`

# ruby-on-rails - Rails 服务对象与 lib 类

> ID：16159021
> 
> 赞同：40
> 
> 时间：2013-04-23T00:36:28.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3

*简短版本：我什么时候应该将某些东西放入 app/services 而不是 lib/.*

我最近一直在使用服务对象路线，但我意识到有时我无法真正决定天气我应该将某些内容提取到服务对象（我在 app/services 中）或我的 lib 文件夹中的类中。

我通常寻找的一件事是，如果类需要访问参数或其他特定于控制器的东西（即作为初始化程序中的参数），那么我倾向于将它放入服务中。

这里的约定是什么？证明（链接）会很好:)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-23T17:24:09.950

这就是我倾向于考虑代码的方式`lib/`：

*   它不耦合到我的应用程序的域模型。
*   它可以在其他项目中重复使用。
*   它有可能成为自己的宝石。因此，将其放入`lib/`是朝这个方向迈出的第一步。

服务：

*   他们往往对领域模型的内部运作有相当多的了解。
*   在我的应用程序中执行特定于业务领域的工作。
*   倾向于与特定模型耦合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T02:22:31.213

IMO，服务是您领域的抽象。Lib 的东西是为了方便类，其他与你的模型没有直接关系的东西。

# php - jQuery 加载事件

> ID：16159026
> 
> 赞同：0
> 
> 时间：2013-04-23T00:36:43.397
> 
> 标签：php, jquery, ajax

我有一个包含 PHP 动态内容的页面，我想使用 jQuery 的加载函数定期刷新包含动态内容的 div 容器，以便新内容显示在旧内容之上。

我使用 jQuery 函数如下：

```
setInterval(function() {                         
    $("#ContentWrapper").load("Livefeed.php #ContentWrapper");
}, 10000); 
```

每 10 秒刷新一次内容容器的包装器

我的问题是加载函数执行后。点击事件和悬停事件在页面上无法正常工作。最初它们根本没有触发，所以我在内容包装器中的所有单击和悬停事件上使用了 Jquery 实时功能，它解决了问题。

但是，当页面重新加载时，悬停也会重新加载，并且所有隐藏的 div 都通过 jQuery 的 .show 方法隐藏可见。有什么方法可以防止悬停重新加载，并且每次调用 .load 函数时可见的隐藏 div 保持可见。

我正在使用像这样的点击和悬停功能：

```
$('selector').live("click",function(){
}); 
```

和

```
$('selector').live("hover",function(){
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:25:05.003

现在不推荐使用 jQuery.live。所以不要使用它。从现在开始使用 jQuery.on。此外，正在取消 .hover 事件。您应该使用单独的 mouseenter 和 mouseleave 事件。

您可以通过将 .live 替换为以下内容来解决此问题：

```
/*
If click happens inside contentwrapper, check if click target was yourSelector, if true execute this function
*/
    $("#ContentWrapper").on("click", "#yourSelector", function(){
     //do whatever u wanna do on click
    }); 
```

要跟踪所有隐藏的 div 和所有那些不是你需要为每个 div 设置唯一的 id。在使用 .load() 重新加载之前，您循环遍历所有 div 并将它们的当前状态（隐藏或可见）以 [{ id : state },..] 格式保存在对象数组中。ajax 请求完成后，循环遍历 Object 数组`$.map`并为每个 div 设置状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T18:56:54.730

您可以使用 JQuery 委托，其主要目的是动态驱动内容：

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
 $("#Parent").delegate("selector","click", function() { }); 
```

# html - 如何激活文本块下方元素的 CSS 悬停状态（无 Javascript）？

> ID：16159027
> 
> 赞同：1
> 
> 时间：2013-04-23T00:36:48.427
> 
> 标签：html, css

我有一个元素网格，上面有一个 h1 文本标签。每个网格元素都有一个悬停动作，我想为文本下方的网格元素激活悬停动作。但是，我不能将网格元素的 z-index 设置得更高，因为这会使文本变得模糊。

html 的基本概念：（这里有一个非常有用的 JSFiddle 链接：http: [//jsfiddle.net/evd3v/](http://jsfiddle.net/evd3v/)）

```
<div id="background" class="header">
</div>
<div id="overlay">
    <table>...</table>  <!-- A grid that covers the background image -->
</div>
<h1 id="title" class="title">My Page Title</h1>
<h2 id="detail" class="title">Designed by Me</h2> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:49:37.703

您可以使用`h3`忽略鼠标（*指针*）事件

```
h3{ pointer-events:none; } 
```

但这仅适用于 FF/Chrome/Webkit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:43:39.470

将网格元素的背景设置为`background: transparent`，然后给它们一个更高的`z-index`?

# jquery - 页面加载后如何制作动画

> ID：16159031
> 
> 赞同：0
> 
> 时间：2013-04-23T00:37:08.933
> 
> 标签：jquery, css, animation

我想创建一个页面，在向下滚动页面时可以看到动画，而不是一次。

我已经创建了一个包含四个 css3 动画的页面。它现在在页面加载时立即制作动画。我希望它在向下滚动页面时动画。

我听说 jquery 可以做到，但我不能在那里实现。

我试过 jquery 但没有工作。请帮助。

这是我的错误代码：

```
<script type="text/javascript">

    $(window).load(function() {
        $("#one").delay(100).fadeInUp();
        $("#two").delay(300).fadeInDown();
        $("#three").delay(600).fadeInRight();
        $("#four").delay(700).fadeInLeft();
        $("body").delay(500).queue(function(next){$(this).addClass("fadeInUp");next();})
    }) 
```

div #one、#two、#three 和 #four 各有一个动画。一下子就动起来了。但我希望它在向下滚动时加载。就像： http: [//knockknockfactory.com](http://knockknockfactory.com) 。代码可在 Github 上找到。请看上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:56:50.497

**回答已编辑的问题**

这与以前的原理相同，只是在您向下滚动多个`px`而不是特定时触发`div`

**动画**

*   [Animate.css](http://daneden.me/animate/) -Wicked 很酷的即插即用 CSS 动画

**API 文档**

*   [。滚动（）](http://api.jquery.com/scroll/)
*   [.scrollTop()](http://api.jquery.com/scrollTop/)
*   [。淡入（）](http://api.jquery.com/fadeIn/)
*   [。消退（）](http://api.jquery.com/fadeOut/)

**[例子](http://jsfiddle.net/apaul34208/6Y9qX/4/)**

```
$(document).scroll(function () {

    var y = $(this).scrollTop();

    if (y > (200)) {
        $(".magic").fadeIn('fast').addClass("fadeInDown").removeClass("fadeOutUp");
    }
    if ((y < (200)) && $('.magic').hasClass('fadeInDown')) {
        $(".magic").addClass("fadeOutUp").removeClass("fadeInDown").fadeOut('slow');
    }
    //magic2  
    if (y > (300)) {
        $(".magic2").fadeIn('fast').addClass("fadeInRight").removeClass("fadeOutRight");
    }
    if ((y < (300)) && $('.magic2').hasClass('fadeInRight')) {
        $(".magic2").addClass("fadeOutRight").removeClass("fadeInRight").fadeOut('slow');
    }
    //magic3
    if (y > (400)) {
        $(".magic3").fadeIn('fast').addClass("fadeInLeft").removeClass("fadeOutLeft");
    }
    if ((y < (400)) && $('.magic3').hasClass('fadeInLeft')) {
        $(".magic3").addClass("fadeOutLeft").removeClass("fadeInLeft").fadeOut('slow');
    }
    //magic4
    if (y > (500)) {
        $(".magic4").fadeIn('fast').addClass("fadeInUp").removeClass("fadeOutDown");
    }
    if ((y < (500)) && $('.magic4').hasClass('fadeInUp')) {
        $(".magic4").addClass("fadeOutDown").removeClass("fadeInUp").fadeOut('slow');
    }
}); 
```

**回答原始问题**

页面加载动画完全可以仅在 css 中实现。只需设置一个关键帧动画并将其附加到一个元素上，当该元素加载时，动画就会完成它的工作。

由用户向下滚动到一个元素触发的动画需要一点 jquery。

```
$(document).scroll(function () {
var y = $(this).scrollTop();
var x = $("#myDiv").position();

if (y > (x.top - 28)) {
    $(".magic").addClass(
        "bounceInRight");
}
else {
    $(".magic").removeClass(
        "bounceInRight");
}
}); 
```

[**例子**](http://jsfiddle.net/apaul34208/vfQrD/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:44:17.420

从技术上讲，您只需要 javascript，执行以下操作：

```
window.onload = function(){
//put animation code here
} 
```

不过，动画本身可能需要 jQuery。据我所知，CSS3 在加载时不会做任何事情。

# ios - 用于指定函数块是异步还是同步的模式

> ID：16159037
> 
> 赞同：2
> 
> 时间：2013-04-23T00:38:04.093
> 
> 标签：ios, objective-c, multithreading, objective-c-blocks, grand-central-dispatch

是否有一种模式来指示函数的块被同步或异步调用，例如：

```
- (void)processImage:(UIImage *)image onComplete:(void (^)(NSError *__error))onComplete; 
```

是一个函数，它将同步处理图像，然后`onComplete(error)`在完成时调用，但是：

```
- (void)downloadResourceIDs:(NSArray *)imageIDs onComplete:(void (^)(NSError *__error))onComplete; 
```

是一个函数，它将异步下载数组中指定的资源，并`onComplete(error)`在下载完所有内容后调用，但是这不是很明显这是一个异步回调。例如，我可以使用`dispatch_semaphore`in`downloadResourceIDs:onComplete:`来防止回调发生，直到所有内容都下载完毕。

或者，所有函数都应该是同步的，即使函数本身包含异步元素（如异步下载内容）并人为强制同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:19:52.037

我建议完成块足以传达异步调用。

为了我的钱，第一个界面是非常错误的。同步调用不需要完成块，接口中也不应该有 on。

# java - 存储这些数据的可能方法是什么？

> ID：16159040
> 
> 赞同：-2
> 
> 时间：2013-04-23T00:38:57.193
> 
> 标签：java

好吧，我需要这些数据至少在两个类中使用：

```
 String navHome = "home";
    String navAbout = "about";
    String navUpload = "upload";
    String navUploadProc = "uploadProc";
    String navStartUpload = "startUpload";
    String navContact = "contact";
    String navSearch = "search";
    String navManual = "manual";
    String navBackToGmis = "backToGmis"; 
```

我想把它粘贴到其他类中，但它违反了编程原则，因为它重复了同样的事情。文本和 XML 文件不适合存储数据，继承不是一种选择，因为 Java 不支持多重继承......有什么想法吗？

是的，我知道这对你们大多数人来说听起来很迟钝，但我需要这方面的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:43:45.360

如果这些是常量，那么您可以在一个类（或接口）中声明它们并在另一个类（或接口）中使用它们：

**一个.java**：

```
public class A {
    public static final String navHome = "home";
    public static final String navAbout = "about";
    public static final String navUpload = "upload";
    public static final String navUploadProc = "uploadProc";
    public static final String navStartUpload = "startUpload";
    public static final String navContact = "contact";
    public static final String navSearch = "search";
    public static final String navManual = "manual";
    public static final String navBackToGmis = "backToGmis";

    . . .
} 
```

**B.java**：

```
import static A.*; // or list each String in a separate import

public class B {
    . . . // code can use nav* as if they were declared in class B
} 
```

# mobile - 通过 tel 链接拨打电话后，我可以返回移动网站吗？

> ID：16159045
> 
> 赞同：2
> 
> 时间：2013-04-23T00:39:42.807
> 
> 标签：mobile, tel

我有一个移动网站，用户可以通过电话链接给某人打电话。我正在寻找一种在通话结束后将它们带回移动站点的方法。我找到了适用于[原生 Android](https://stackoverflow.com/questions/1556987/how-to-make-a-phone-call-in-android-and-come-back-to-my-activity-when-the-call-i)和[原生 iOS](https://stackoverflow.com/questions/5028329/ios-4-2-return-to-app-after-phone-call?lq=1)的解决方案，但不适用于这个用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T14:41:06.827

这个问题的实际答案是否定的，[电话：URI](https://www.rfc-editor.org/rfc/rfc3966)不支持在通话结束后将访问者带回您的网站的任何方式。

# c - 文本到二进制数据库

> ID：16159047
> 
> 赞同：1
> 
> 时间：2013-04-23T00:40:05.533
> 
> 标签：c, text, file-io, binary

我需要帮助将文本文件转换为 C 的二进制文件。即使我已经写了一半，我也无法继续执行我的程序，因为我不知道是否正在打印任何值。转换需要人或动物的最大值、宽度、长度和字符串。基本上我正在编写的程序读取二进制数据库文件并返回所有满足搜索的值。谢谢您的帮助

```
#include <stdio.h>
#include <string.h>

typedef struct{
int max;
double length, width;
char people;
} max_t;

int 
main()
{
FILE *database;
int inp, out;

        database = fopen("database.txt", "r");
    fscanf(database, "Max : %d", &max);
    fscanf(database, "Width : %lf", &width);
    fscanf(database, "Length : %lf", &length);
    fscanf(database, "People : %s", &people);
    fwrite(&max, 1, sizeof(max), database);
    fwrite(&width, 1, sizeof(width), database);
    fwrite(&length, 1, sizeof(length), database);
    fwrite(&people, 1, sizeof(people), database);
        database = fopen("out.txt", "wb");

return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:18:22.240

你犯了一些愚蠢的错误。您没有在输出文件中写入任何内容，而是写入输入文件，以“只读”模式打开！

```
#include <stdio.h>
#include <string.h>

typedef struct s{
int max;
double length, width;
char people[10];
} max_t;

int main()
{
    FILE *database, *out;
    //int inp, out;
    max_t inp;
    database = fopen("database.txt", "r");
    out = fopen("out.txt", "wb");
    fscanf(database, "Max : %d", &inp.max);
    fscanf(database, "Width : %lf", &inp.width);
    fscanf(database, "Length : %lf", &inp.length);
    fscanf(database, "People : %s", inp.people);
    fwrite(&inp.max, 1, sizeof(inp.max), out);
    fwrite(&inp.width, 1, sizeof(inp.width), out);
    fwrite(&inp.length, 1, sizeof(inp.length), out);
    fwrite(inp.people, 1, sizeof(inp.people), out);    
    fclose(database);
    fclose(out);
    return(0);
} 
```

编辑：见 main() 和结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:58:46.237

如果您只需将数据以二进制格式放入文件中，然后再将其读取，您可以将原始字节转储到带有 in 的文件`fwrite`中`stdio.h`。

要读入该数据，您可以使用`fread`.

当您使用`frwite`将字节放入文件时，您只需要记住当您稍后读回它们时哪些字节代表什么。

示例 txt 文件：

```
width  : 2
height : 3

3 1
2 3
2 1 
```

您可以使用几个 fscanf 调用来读取 2 和 3：

```
// fp -- FILE * -- file pointer
fscanf( fp, "width  : %d", &width );
fscanf( fp, "height : %d", &height ); 
```

然后以二进制格式写入这些值，您可以执行以下操作：

```
frwite( &width,  1, sizeof( width  ), fp );
frwite( &height, 1, sizeof( height ), fp ); 
```

读取文件的其余部分并将其转换为二进制格式到另一个文件将是相同的过程。

# ios - 当我只允许保存当前登录的用户时，如何为用户创建反向关系？

> ID：16159050
> 
> 赞同：3
> 
> 时间：2013-04-23T00:40:22.783
> 
> 标签：ios, parse-platform

我的 User 类与 Convos 类具有多对多的关系。我想将`user`（`PFUser *`不是*当前登录的用户*）添加到`convo`对象，并且我想添加`convo`到`user`对象以实现逆关系。

```
PFRelation *relation = [self.convo relationforKey:@"users"];
[relation addObject:user];

[self.convo save];

PFRelation *inverseRelation = [user relationforKey:@"convos"];
[inverseRelation addObject:self.convo];
[user save]; 
```

问题是我不允许保存`user`，因为显然我只能保存当前登录的用户。这是错误：

> 除非已通过登录或注册进行身份验证，否则无法保存用户

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:40:58.147

我能想到的最简单的方法是拥有一个单独的 PFObject ，它拥有 Convos 关系。例如

```
PFUser["proxy"] -> PFObject["convos"] -> PFRelation 
```

您的代码将变为：

```
PFObject *relation = [self.convo relationforKey:@"users"];
[relation addObject:user];

PFObject *userProxy = [user objectForKey:@"proxy"];

// N.B. You need to make sure this object exists already, and create it if not
// N.B. Make sure you include this key when you query for the user, or you'll need to load the data here
if (userProxy == nil) NSAssert(nil, @"Need to create the users Proxy object");
if (userProxy.isDataAvailable == NO) NSAssert(nil, @"Need to include the Proxy object key in the user query");

PFRelation *inverseRelation = [userProxy relationforKey:@"convos"];
[inverseRelation addObject:self.convo];

[PFObject saveObjects:@[self.convo, userProxy]]; 
```

# c - 用于聊天窗口 irc 的 GTK 最好的小部件是什么？

> ID：16159052
> 
> 赞同：0
> 
> 时间：2013-04-23T00:41:20.447
> 
> 标签：c, widget, gtk, irc

我正在 GTK 中编写一个 irc 客户端，但我在问什么是聊天窗口的最佳小部件？我想使用 GtkList 但我不确定它是否是解决我问题的好小部件。感谢您的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:02:09.150

用户输入需要文本框。

有些人喜欢从房间缓冲区复制/粘贴。无论您为此使用哪种控件，请记住这一点。

我建议为昵称列表创建一个树视图。在第一级表示服务器，在第二级表示频道和私人消息，在第三级表示频道的昵称（当您扩展频道时）。

# performance - 对数组进行排序

> ID：16159053
> 
> 赞同：0
> 
> 时间：2013-04-23T00:41:29.523
> 
> 标签：performance

我想知道哪个**对元素数组**进行排序更好。

当我完成填充数组时，最好在最后对数组进行排序以获得良好的性能吗？或者每次我添加一个元素时最好对其进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:45:46.703

这取决于什么对你来说很重要。您是否需要能够非常快速地插入（很多条目但很少查询），或者您是否需要能够非常快速地查询并缓慢插入（很多查询但没有很多条目）？

这基本上是你要解决的问题。当您知道这一点时，您可以选择适当的排序算法并应用它。

编辑：这是假设任一选择实际上很重要。这在很大程度上取决于您的活动（插入与查询）以及您需要排序的数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:17:59.550

暂时忽略特定于应用程序的信息，考虑排序插入在最坏的情况下需要对每个元素进行 O(n) 操作。对于 n 个元素，这当然给了我们 O(n^2)。如果这听起来很熟悉，那是因为您正在做的是（正如另一位评论者指出的）插入排序。相反，对整个列表执行一次快速排序将花费更糟糕的情况，O(n log n) 时间。

那么，这是否意味着您一定要等到最后才能排序？不。要记住的重要一点是 O(n log n) 是我们在**一般**情况下可以做的最好的排序。您对数据的特定应用知识可以影响工作的最佳算法。例如，如果您知道您的数据已经几乎排序，那么插入排序将为您提供线性时间复杂度。

您的里程可能会有所不同，但我认为算法观点在检查“我应该什么时候排序？”的一般问题时很有用。

# java - Java：相等的数字不匹配

> ID：16159056
> 
> 赞同：-4
> 
> 时间：2013-04-23T00:41:57.880
> 
> 标签：java

我看到一个奇怪的问题。我有一个对象，它有几个实例变量，其中一个是数字的。这个对象是使用 ObjectInputStream 的 readObject() 从套接字中出来的，所以它应该已经被反序列化了。但是，当我使用 == 将它与另一个具有完全相同数字的对象进行比较时，它不匹配。注意：我不是在比较对象，而是使用 getter 比较整数实例变量。在比较之前打印语句，表明它们完全相同。

```
 System.out.println("New book id:"+newBook.getId());
for (Book p: listOfBooks) {
    System.out.println("CurrentBook's id:"+p.getId());
    if (newBook.getId() == p.getId()) {
        System.out.println("Matched CurrentBook's id:"+p.getId()) 
            }
    } 
```

谢谢 Ted Hopp，是的，我猜对于与 == 进行整数比较的行为是不一致的。我意识到这些字段是整数，而不是整数，并且它以前有效，所以很困惑为什么它不再有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:49:54.317

比较数字对象（`Integer`等）使用`==`会产生不一致的结果。`Integer`例如，会将 -128 到 +127 之间的所有值自动装箱为缓存值，但超出该范围的值可能会或可能不会被缓存，具体取决于实现。因此，

```
Integer.valueOf(-45) == Integer.valueOf(-45) 
```

会`true`，但是

```
Integer.valueOf(-145) == Integer.valueOf(-145) 
```

通常会`false`。

对于数字量，您应该在使用之前使用`.equals()`或提取原始值（`int`、`long`等）`==`

```
num1.intValue() == num2.intValue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:49:47.410

> 在比较之前打印语句，表明它们完全相同。

我认为亚历克斯·雷利姆是对的。Print 语句读取对象的 toString 方法。这就是为什么你看到的数字是一样的。如果您使用调试器，请检查对象的类型。

编辑（在粘贴 OP 的代码之后）：这可能是您的问题吗？ [在 Java 中使用 == 运算符比较包装器对象](https://stackoverflow.com/questions/10149959/using-operator-in-java-to-compare-wrapper-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:45:07.230

readObject() 返回一个对象，因此请务必将其转换为 int

[http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#readObject()](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#readObject())

# jquery - 来自codeigniter中控制器的Ajax请求

> ID：16159059
> 
> 赞同：0
> 
> 时间：2013-04-23T00:42:04.100
> 
> 标签：jquery, ajax, codeigniter, rest

我正在尝试使用 ajax 从服务器获取数据并将其存储在 cookie 中。下面的代码是在 coodeigniter 中构建的，并且来自控制器。

```
 $email = $this->input->post('username');
          $pword = $this->input->post('password');
          <script type="text/javascript">
           $.ajax({
            type: 'GET',
            url: "http://localhost/projects/comp6300Server/index.php/rest/resources/token/username/" + $email + "/password/" + $pword + "/institution/" + inst,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function ($token)
            {
              $this->load->helper('cookie');
              $cookie = = array(
                'name'   => $email,
                'value'  => $token.value()
              );
              $this->input->set_cookie($cookie);
            },
            error: function (xhr, ajaxOptions, thrownError)
            {
              alert(thrownError);
            }
           });
          </script> 
```

服务器的实际返回应该是一个如下所示的 xml 文件，我想将返回的数字存储为 cookie 的值。

```
 <xml>
  <item>209273</item>
 </xml> 
```

我认为我的问题是我不能将 jquery 代码直接放在 php 控制器中。但是，我不知道如何在没有 jquery 的情况下执行 ajax 请求。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:57:23.783

首先，您期待 JSON，您需要将其更改为 xml

```
 dataType: "xml" 
```

其次，您将 JavaScript 与 PHP 混合使用，您的方法不正确。

# node.js - 如何在 Backbone 和 Express 中保护 Restful 路由？

> ID：16159063
> 
> 赞同：1
> 
> 时间：2013-04-23T00:43:05.450
> 
> 标签：node.js, rest, backbone.js, express

如何在我的应用程序中保护我的快速“GET”路由，以便电子邮件和用户数据不会暴露给未经授权的客户。我想知道，我应该像使用密码一样散列所有字段吗？

我的 GET "/users" 路由像这样发送 JSON..

```
 {
 "name": "keven",
 "email": "keveng@gmail.com",
 "user": "keven",
 "password": "EEOnGFritH1631671dc8da7431399f824b3925a49e",
 "country": "America",
 "date": "April 20th 2013, 10:34:22 pm",
 "_id": "5173502e5g52676c1b000001"
  } 
```

在我的骨干网和节点/快递应用程序中，我的骨干网集合中有一个 url，如下所示..

```
Users = Backbone.Collection.extend({
model: User,
url: '/users',
}); 
```

而快递路线是这样的：

```
app.get('/users', function(req, res){
User.find({}, function (err, accounts) {
res.send(accounts);
});
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T02:07:01.130

虽然这并不理想，但如果用户和密码随每个请求一起发送，您只需要一些中间件来在您的 node.js 应用程序中执行身份验证和授权。

认证功能：

```
function authenticate(user, password, fn) {
  // Trivial, but not recommended
  User.findOne({user: user, password: password}, function (err, user) {
    if (err) {
      return fn(err);
    }
    if (!user) {
      return fn(new Error('no such user'));
    }

    return fn(null, user);
  });
} 
```

一个授权中间件功能，它依赖于身份验证：

```
function authorize(req, res, next) {
  authenticate(req.params.user, req.params.password, function(err, user) {
    if (err) {
      res.redirect('/login');
    }

    // Probably other logic her to determine now *what* they can do

    return next(null, user);
  });
} 
```

现在，由于您使用的是 Express，您可以在路由中使用授权中间件来限制访问：

```
app.get('/users', authorize, function(req, res){
  // Can only get here if allowed
  User.find({}, function (err, accounts) {
    res.send(accounts);
  });
}); 
```

但请注意，这将针对每个请求执行用户搜索——这是我说它不理想的原因之一。对于正确的系统安全设计，您应该考虑使用 http 基本身份验证和基于会话的 cookie 或 oauth。

以下是一些链接供您查看：

*   [骨干网的 HTTP 基本身份验证](https://github.com/fiznool/backbone.basicauth)
*   [Express 的 HTTP 基本身份验证](http://expressjs.com/api.html#basicAuth)
*   [快速身份验证示例](https://github.com/visionmedia/express/blob/master/examples/auth/app.js)

# iphone - 我的 iOS 应用程序破坏了我的 iPhone 录音功能，我应该担心吗？

> ID：16159072
> 
> 赞同：0
> 
> 时间：2013-04-23T00:44:09.957
> 
> 标签：iphone, ios, avaudioplayer, avaudiorecorder

我是 iOS 编程的新手，最近尝试了一些使用 AVAudioRecorder 和 AVAudioPlayer 的东西，并且遇到了一些奇怪的错误。

基本上发生的事情是我的应用程序出现故障，以至于破坏了我的 iPhone (iPhone 4) 的录音功能。而且我不仅仅是在谈论我的应用程序无法再录制，我尝试过的应用程序都没有，例如“Vocie-memo”和使用标准相机应用程序录制电影，无法录制音频（相机的视频工作正常）了。

该问题只能通过重新启动 iPhone 来解决。

由于我是新手，我对这些事情不太了解，如果它经常发生（一个应用程序出错导致其他应用程序出现问题），或者这是我应该向 Apple 报告的错误。

据我了解，“沙盒”确保即使您的应用程序出错，这也不会影响其他人，但我可能错了。所以我的问题是：这种情况经常发生吗？我应该报告吗？

（（对于那些感兴趣的人，请询问更多信息，但它基本上与向播放器发送 prepareToPlay 而是开始录制有关））

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:05:31.683

恭喜！您使在 iOS 设备上管理录制的进程崩溃了。您可能想在[Apple 古老的错误报告系统中](https://bugreport.apple.com/)详细说明发生的事情，但 Apple 可能不会让执行此操作的应用程序进入应用程序商店。

所以，总而言之：你真的不必担心。

# mongodb - 使用迭代器/指针横穿 mongoDB 索引的有效方法？

> ID：16159078
> 
> 赞同：0
> 
> 时间：2013-04-23T00:45:31.800
> 
> 标签：mongodb

我们正在开发一个使用 mongoDB 作为底层数据库的 C++ 应用程序开发工具。假设用户开发了一个患者集合，其中包含字段**_id** (OID) 和**患者# ，并且****患者**#具有唯一的升序索引。假设有 10 位患者，患者编号为 1、5、7、13、14、20、21、22、23、25。患者编号 20 显示为使用 limit(1) 获取。用户按下 PageDown 并显示患者# 21 -- 使用**$gt**和**患者#** = 20 很容易。

当用户按下 PageUp 时，应该显示第 14 号患者。**我的（希望是错误的）解决方案是在patient#**和**$lt**上创建并行降序索引。这意味着用户创建的每个集合都需要主键字段上的两个索引才能进行双向移动。这也适用于**name**等二级索引。

此外，用户按 F5，提示“要移动的记录数”，他们输入 3，应显示患者#23。或者他们输入-3，应该显示患者# 7。我的想法：首先使用覆盖查询并从索引中返回以下 3 个患者#s，然后获取第 3 个文档。当一个不太简单的应用程序有数十万个文档并且用户想要横切成千上万条记录时，这根本不理想。而且，再次，为了实现向后运动，我相信我需要第二个降序索引。

最后，我需要一种方法让用户导航到最后一个索引条目（患者 #25）。回到起点是微不足道的。再次，第二个索引？

**我的问题**：有没有办法使用（比如说）迭代器或指向当前索引元素的指针来横向升序索引，然后使用迭代器/指针算法来实现我想要的？即，+1 将为我提供“下一个”索引元素，我可以从中获取“下一个”文档；-1 “前一个”，+3 后第三个，-3 前第三个；索引大小到最后。或者是否有另一种没有太多开销的解决方案（多个索引、大型覆盖查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:47:33.137

实现您想要的方法是在相关字段上建立索引，然后在需要时进行简单查询以获取所需的记录。

重要的是不要过度思考问题。与其尝试分解查询优化器如何遍历索引并尝试以某种方式“减少”它所做的工作，不如使用完成工作所需的查询。

这意味着在您的情况下查询您需要的记录以及当用户想要跳转到查询该记录的特定记录时。如果有人正在查看记录 27 并且他们想转到下一个记录，您可以通过降序排序和 limit(1) 限定符查询大于 27 的最小记录。

我鼓励您重新审视您的选择，基本上拥有两个主键 - 而不是具有唯一索引的单独的 patientID 字段，您可以将 patientId 存储在 _id 字段中，并使用 _id 上已经存在的唯一索引，这是 MongoDB 在每个收藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T05:23:23.183

可以在这里找到关于我正在尝试做的更具体的描述：

[如何从复合索引中获取上一个 mongoDB 文档](https://stackoverflow.com/questions/16305397/how-to-get-the-previous-mongodb-document-from-a-compound-index)

答案是：当前版本无法做到。第二张 jira 票是未来可能的修复。

请参阅：[SERVER-9540](https://jira.mongodb.org/browse/SERVER-9540)

和

[SERVER-9547](https://jira.mongodb.org/browse/SERVER-9547)

# windows - Windows 上的多个 OpenGL 窗口，共享上下文

> ID：16159084
> 
> 赞同：1
> 
> 时间：2013-04-23T00:46:09.340
> 
> 标签：windows, opengl, multiple-monitors

我正在尝试在同一个程序上设置多个 OpenGL (3.3) 窗口。我创建了 2 个窗口，第二个具有第一个的共享上下文（使用 hglrc[i] = wglCreateContextAttribsARB(hdc[n_windows], hglrc[0], ctxattribs) 而第一个有 0 而不是 hglrc[ 0]），带有一个简单的循环，如：

```
for(unsigned i = 0; i < n_windows; ++i)
{
    wglMakeCurrent(hdc[i], hglrc[i]);
    glClearColor((float)rand() / RAND_MAX, (float)rand() / RAND_MAX, (float)rand() / RAND_MAX, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);
    SwapBuffers(hdc[i]);
} 
```

但是只有一个窗口呈现，当我将一个窗口移动到另一个屏幕时，没有呈现的窗口现在呈现，另一个停止呈现。

这是我第一次尝试在同一个应用程序上打开多个 OpenGL 窗口，共享上下文，所以我可能做错了什么。我的代码在一个窗口中完美运行，而我的老忠实 gDEBugger 没有显示任何错误。知道我可能做错了什么吗？

# vbscript - 从另一个 vbs 脚本运行 vbs 脚本并立即将输出重定向到文件

> ID：16159085
> 
> 赞同：0
> 
> 时间：2013-04-23T00:46:22.493
> 
> 标签：vbscript, output

从另一个 vbscript 运行 vbscript，是否可以立即将输出输出到如下文件：

```
 dim shell
  set shell=createobject("wscript.shell")
  strCMD =replace("'myvbs.vbs' '"&a_parameter&"' ","'","""")
  shell.Run strCMD >output.txt 
```

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:23:11.547

是的你可以。试试这个例子。

```
'script1.vbs -----------------
Dim oShell, strCMD
Set oShell = CreateObject("WScript.Shell")
strCMD = Replace("CMD /C CScript.exe 'script2.vbs' " & 3, "'", """")
oShell.Run strCMD & " //NoLogo >output.txt", 0, True

'script2.vbs -----------------
result = WScript.Arguments(0) ^ 2
WScript.StdOut.Write result 
```

也看看这个[答案](https://stackoverflow.com/a/15130070/1856504)。

# javascript - 动态添加的可拖动对象第一次不起作用

> ID：16159087
> 
> 赞同：0
> 
> 时间：2013-04-23T00:46:30.320
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, jquery-ui-draggable

我正在将可拖动功能添加到特定用户事件（保持事件）上的元素。拖动功能第一次不起作用。

```
 Hammer(element).on("hold",function(event){
        console.log("hold");
        $(element).draggable({
                helper: "clone",
                cursorAt: { left: 5, top: -5 },
                cursor: "move",
                stop: function() {
                        $(element).draggable("destroy");
                }
        });
    }); 
```

在上面的代码片段中，hold 事件触发了可拖动功能，但它仅在我释放 hold 并下次尝试时才有效。如何使拖动启动本身而不是下一次？

**编辑：**

[在jsbin](http://jsbin.com/ayoqus/8/edit)中添加了示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T18:13:07.910

这对我有用：

```
$('.pic').draggable({
    revert: 'invalid',
    start: function(event, ui) {

    },
    stop: function(event, ui) {
        $(this).removeClass('dragging');
    }
});

$('body').hammer().on('hold', '.container li', function() {
    $('.pic', this).addClass('dragging');
});

$('body').hammer().on('dragstart', '.container li .pic', function(e) {
    if (!$(this).hasClass('dragging')) {
        e.preventDefault();
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:23:08.373

如何在可拖动而不是保持锤子事件上使用延迟？

```
 $(element).draggable({
                helper: "clone",
                cursorAt: { left: 5, top: -5 },
                cursor: "move",
                stop: function() {
                        $(element).draggable("destroy");
                },
   start: function() {
     console.log("start");
   },
                delay:300
        }); 
```

# php - 我可以使用 $_SERVER 变量获取虚拟目录（如果有的话）吗？

> ID：16159090
> 
> 赞同：0
> 
> 时间：2013-04-23T00:47:05.280
> 
> 标签：php, html

我希望能够有一种方法来创建适用于开发*和*生产的动态 URL。现在我正在构建这样的 URL：

```
header("Location: http://".$_SERVER["HTTP_HOST"]."/contact.php?failed"); 
```

但问题是我目前在我的 WAMP 服务器上运行这样的网站：

```
http://localhost/vdname/contact.php 
```

因此该行代码不会在开发中生成正确的 URL - 它构建：

```
http://localhost/contact.php?failed 
```

相反，因此我得到了预期的`404`. 如何正确构建 URL，以便它们在开发*和*生产中都可以使用？

# 编辑

根据许多建议，最好利用文件`VirtualHost`中的条目来`httpd.conf`实现这一点，这样我就可以在本地使用普通域名。所以，我试图让它工作，但它并没有像我想要的那样工作，请考虑来自 conf 的这段代码：

```
#Listen 12.34.56.78:80
Listen 80

# Listen for virtual host requests on all IP addresses
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /www/example
    ServerName local.example.com
</VirtualHost> 
```

以及相关的`hosts`文件配置：

```
127.0.0.1       local.example.com 
```

但是当我导航到时，`http://local.example.com/contact.php`我得到了`403 Forbidden`，当我运行时，`nslookup local.example.com`我也没有得到`127.0.0.1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:58:30.257

对于我的东西，我使用`$_SERVER['SERVER_NAME']`而不是`$_SERVER['HTTP_HOST']`. 因为它`HTTP_HOST`是从 HTTP 请求标头中提取的，并且是客户端设置的。如果有人从 www.yoursite.com 和 yoursite.com 访问您的网站，您实际上可能会`HTTP_HOST`在同一会话中获得两个不同的结果。这会对 cookie 和重定向造成严重破坏，更不用说在 SEO 和流量模式方面对您的网站造成影响。

要留在同一个站点上，而不是`header()`使用异地 URL（包含 HTTP）填充 location 命令，您可以使用它来代替：

```
header("Location: /contact.php?failed"); 
```

同样在您的表格中，您可以使用它：

```
<form action="/gdform.php" method="post" style="float: left;"> 
```

通过使用这种类型的链接，浏览器将停留在同一个站点上而不执行查找 (DNS)，并且它将停留在同一个 SubDNS 中。

您需要确保`$_SERVER['SERVER_NAME']`在 Apache 中正确配置，假设您正在运行它。

# php - 递归地将元素添加到数组并返回新数组

> ID：16159091
> 
> 赞同：2
> 
> 时间：2013-04-23T00:47:05.837
> 
> 标签：php, recursion, php-5.3

假设我有一个这样的数组：

```
$my_array = array(1, 2, 3, 4, array(11, 12, 13, 14), 6, 7, 8, array(15, 16, 17, 18), 10); 
```

我想构建一个递归函数，它返回一个包含所有偶数的数组`my_array`。我试过类似的东西：

```
function get_even_numbers($my_array)
{
    $even_numbers = array();

    foreach($my_array as $my_arr)
    {
        if(is_array($my_arr)
        {
            get_even_numbers($my_arr);

            foreach($my_arr as $value)
            {
                if($value % 2 == 0)
                {
                    $even_numbers[] = $value;
                }
            }
        }
    }

    return even_numbers;
} 
```

但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T00:59:42.290

这很简单：

1.  检查你进入函数的输入是否是一个数组。
2.  如果是，则意味着您必须遍历数组的值，并调用您的函数（因此它是递归的）
3.  否则，只需检查传入的值是否为偶数，并将其添加到数组中即可返回。

在 PHP 中，它看起来像：

```
function recursive_even( $input) {
    $even = array();
    if( is_array( $input)) {
        foreach( $input as $el) {
            $even = array_merge( $even, recursive_even( $el));
        }
    }
    else if( $input % 2 === 0){
         $even[] = $input;
    }
    return $even;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T07:40:03.677

除非它是为了您自己的启迪而进行的思考练习，否则此任务不需要实现递归函数，可以通过使用更高阶的内置 PHP 函数[array_walk_recursive](http://php.net/manual/en/function.array-walk-recursive.php)来完成。

```
$res = array();
array_walk_recursive($my_array, function($a) use (&$res) { if ($a % 2 == 0) { $res[] = $a; } }); 
```

当然，这可以包装在一个函数中：

```
function get_even_numbers($my_array) {
  $res = array();
  array_walk_recursive($my_array, function($a) use (&$res) { if ($a % 2 == 0) { $res[] = $a; } });
  return $res;
} 
```

# redis - 仅当尚未设置时才设置原子

> ID：16159092
> 
> 赞同：7
> 
> 时间：2013-04-23T00:47:09.447
> 
> 标签：redis, node-redis

有没有办法只在 Redis 中尚未设置时才进行原子集？

具体来说，我正在创建一个像“myapp:user:user_email”这样的用户，如果“user_email”已经被占用，我希望 Redis 给我一个错误，而不是默默地替换旧值。像声明，而不是替换。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T03:33:48.433

见[SETNX](http://redis.io/commands/setnx)

> > 如果键不存在，则将键设置为保存字符串值。在这种情况下，它等于 SET。当 key 已经持有值时，不进行任何操作。SETNX 是“SET if Not e Xists”的缩写。

您可以检查返回值。如果为 0，则未设置密钥，这意味着它已经存在。

# ruby - Ruby数学计算器程序

> ID：16159093
> 
> 赞同：0
> 
> 时间：2013-04-23T00:47:26.960
> 
> 标签：ruby, user-input, gets

我写了一个程序。

```
print "Radius = "
radius = gets.chomp

print "Height = "
height = gets.chomp

ans = (2 * 3.14 * (radius * radius)) + (2 * 3.14 * radius * height) 
```

它行不通。这是终端中的输出（`"11"`并且`"10"`是我作为圆柱体的半径/高度输入的内容）：

```
Radius = 11
Height = 10
in `*': can't convert String into Integer (TypeError) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:08:14.533

`chomp`如果您使用 . 将输入字符串转换为整数，则无需这样做`to_i`。并且有一个常数`PI`。`Math`

```
print "Radius = "
radius = gets.to_i

print "Height = "
height = gets.to_i

ans = (2 * Math::PI * (radius * radius)) + (2 * Math::PI * radius * height)

puts "Answer: #{ans}" 
```

也被称为

```
ans = 2 * Math::PI * radius * (radius + height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:25:23.443

错误导致 as`radius`并被`height`视为`String`来自终端。往下看：

```
p "Radius = "
radius = gets.chomp
p radius.class
p "Height = "
height = gets.chomp
p radius.class
p ans = (2 * 3.14 * (radius * radius)) + (2 * 3.14 * radius * height) 
```

***输出：***

```
"Radius = "
11
String
"Height = "
12
String
 `*': can't convert String into Integer (TypeError) 
```

所以 2 个字符串不能相乘。要使其可行，请执行以下操作：

```
p "Radius = "
radius = gets.chomp.to_i #// or gets.to_i
p "Height = "
height = gets.chomp.to_i #// or gets.to_i
p ans = (2 * 3.14 * (radius * radius)) + (2 * 3.14 * radius * height) 
```

***输出：***

```
"Radius = "
12
"Height = "
11
1733.2800000000002 
```

# javascript - 如何在正文和页脚中使用此按钮？

> ID：16159094
> 
> 赞同：1
> 
> 时间：2013-04-23T00:47:55.317
> 
> 标签：javascript

我想在正文和页脚中都有按钮，但它似乎无法访问菜单，如果我也将菜单粘贴到页脚中，它不会让您单击页脚并立即关闭一个体内。

```
<!-- Connect Menu -->
<div id="menu">
  <nav>
    <a href = "mailto:adamshort1994@gmail.com" target = '_blank'>
      <img border = '0' src = 'images/emailicon.png'></a>
    <a href = "http://uk.linkedin.com/in/shortadam/" target = '_blank'>
      <img border = '0' src = 'images/linkedinicon.png'></a>
    <a href = "https://twitter.com/addrumm" target = '_blank'>
      <img border = '0' src = 'images/twittericon.png'></a>
  </nav>
</div> 
```

按钮的作用：

```
<a id="openMenu">CONNECT</a>
<script>
  $("#openMenu").click(function() {
      var menu = $("#menu");
      if ($(menu).is(":visible")) {
        $(menu).animate({width: 0}, 1000, function() {
          $(menu).hide();
        });
      } else {
        $(menu).show().animate({width: 100}, 1000);
      }
  });
</script> 
```

我将如何将按钮放在页脚中并使两个脚本一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T00:51:27.620

导致您的问题是因为您使用了多个`id`必须唯一的相同 s。将它们更改为使用类。

```
<a class='openMenu'>CONNECT</a>
...
<a class='openMenu'>CONNECT</a> 
```

**JS**

请参阅使用`.`字符的按钮。

```
$(document).ready(function () {
    $(".openMenu").click(function() {
        var menu = $("#menu");
        if ($(menu).is(":visible")) {
            $(menu).animate({width: 0}, 1000, function() {
                $(menu).hide();
            });
        } else {
            $(menu).show().animate({width: 100}, 1000);
        }
    });
}); 
```

* * *

查看您的来源后，问题正在发生，因为您多次设置事件。只需将上述 JavaScript 添加到您的代码中，而不是每个按钮一次，因为它将事件附加到两个按钮。我将它放在准备好的文档中，以确保在调用它时加载两个按钮。

两个按钮行为不同的原因是，当`$(".openMenu").click()`第一个按钮设置时，只有第一个按钮存在，第二个按钮两个按钮都存在。所以它调用显示然后立即隐藏第一个按钮的代码。

# android - GridLayout - 对齐元素

> ID：16159095
> 
> 赞同：1
> 
> 时间：2013-04-23T00:48:10.690
> 
> 标签：android, android-layout, android-gridlayout

我正在尝试减少 2 列之间的空间，尝试使用负边距，但没有奏效。有没有办法让图像中的两个元素更接近？

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:useDefaultMargins="true"
    android:alignmentMode="alignBounds"
    android:columnOrderPreserved="false"
    android:layout_gravity="center"
    android:orientation="horizontal"
    android:stretchMode="columnWidth"
    android:background="@color/orange"
    android:textSize="12sp"
    android:columnCount="8">
  <ImageButton
        android:id="@+id/settings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_columnSpan="1"
        android:layout_gravity="left"
        android:src="@drawable/settings" />
    <TextView
        android:id="@+id/currentCityName"
        android:layout_column="2"     
        android:textSize="22sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:text="City name"
        android:layout_columnSpan="4"
        android:layout_gravity="center_horizontal"

        />
  <ImageButton
        android:id="@+id/refresh"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="7"

        android:layout_columnSpan="1"
        android:layout_gravity="right"
        android:src="@drawable/reload" />
    <ImageView
        android:id="@+id/currentWeatherImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_columnSpan="8"
        android:layout_rowSpan="3"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/cloud" />
    <ImageView
        android:id="@+id/humidityIcon"
        android:layout_width="20dp"         
        android:paddingTop="10dp"
        android:paddingLeft="0dp"
        android:paddingRight="0dp"
        android:layout_marginRight="0dp"
        android:layout_gravity="left"
        android:background="#000000"
        android:src="@drawable/humidity" />
    <TextView
        android:id="@+id/humidity"       
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="13sp"
        android:paddingTop="10dp"
        android:paddingLeft="0dp"
        android:layout_marginLeft="0dp"
        android:layout_gravity="left"
        android:background="#FFFFFF"
        />
    <TextView
        android:id="@+id/temperature"
        android:layout_columnSpan="4"
        android:layout_rowSpan="2"
        android:textSize="49sp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="5dp"
        android:layout_gravity="center_horizontal"/>
    <ImageView
        android:id="@+id/windSpeedIcon"
        android:layout_width="30dp"
        android:layout_marginRight="1dp"
        android:paddingRight="1dp"
        android:layout_gravity="right"
        android:src="@drawable/wind" />

    <TextView
        android:id="@+id/windSpeed"
        android:textSize="12sp"

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        />
    <!-- android:layout_width="40dp" -->
    <TextView
        android:id="@+id/precipitationIcon"
        android:textSize="28sp"
        android:layout_width="40dp"
        />
    <TextView
        android:id="@+id/precipitation"
        android:layout_column="0"
        android:textSize="13sp"
        android:layout_width="40dp"
        />
    <TextView
        android:id="@+id/windDirection16Point"          
        android:textSize="13sp"
        android:layout_width="80dp"
        android:layout_columnSpan="2"
        />
    <TextView
    android:id="@+id/weatherDescription"
    android:layout_gravity="center_horizontal"
    android:layout_row="7"
    android:layout_columnSpan="8"/>

<TextView
    android:id="@+id/section_label"
    android:layout_margin="5dp" 
    android:layout_columnSpan="8" />    
<EditText
    android:minLines="4"
    android:maxLines="4"
    android:id="@+id/edit"
    android:layout_columnSpan="8"/> 
```

![输出图像](https://i.stack.imgur.com/fTczx.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T11:01:23.293

我建议使用RelativeLayout 来实现整个视图，这应该是整个视图的最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-01T09:16:27.490

你解决了错误的问题——你问的是如何减少网格布局中列之间的空间，但也许你一开始就不应该使用这样的布局！

您应该为您的特定布局使用的是**[相对定位](https://developer.android.com/reference/android/widget/RelativeLayout.html)和*复合可绘制***对象的组合（此处为`android:drawableStart`）。

[![使用下面提到的代码的结果](https://i.stack.imgur.com/i4Wp8.png)](https://i.stack.imgur.com/i4Wp8.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="80dp"
    android:background="#d89018"
    android:paddingBottom="4dp"
    android:paddingLeft="8dp"
    android:paddingRight="8dp"
    android:paddingTop="4dp"
    >

    <TextView
        android:id="@+id/temperature"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"
        android:text="25 ℃"
        android:textColor="#fff"
        android:textSize="49sp"
        />

    <TextView
        android:id="@+id/humidity"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentStart="true"
        android:drawableStart="@drawable/humidity"
        android:gravity="center_vertical"
        android:text="83 %"
        android:textColor="#fff"
        />

    <TextView
        android:id="@+id/windSpeed"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentEnd="true"
        android:drawableStart="@drawable/wind"
        android:gravity="center_vertical"
        android:text="19 km/h"
        android:textColor="#fff"
        />

    <TextView
        android:id="@+id/precipitation"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentStart="true"
        android:drawableStart="@drawable/precipitation"
        android:gravity="center_vertical"
        android:text="0.1 mm"
        android:textColor="#fff"
        />

    <TextView
        android:id="@+id/windDirection16Point"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignLeft="@id/windSpeed"
        android:layout_alignParentBottom="true"
        android:layout_alignParentEnd="true"
        android:drawableStart="@drawable/windDirection"
        android:gravity="center_vertical"
        android:text="NNW"
        android:textColor="#fff"
        />

</RelativeLayout> 
```

这种布局不仅更简单，而且您还可以让 Android 为您处理所有间距。**要更改复合可绘制对象和文本之间的间距，请`android:drawablePadding`**在上面的布局代码中使用；在 Java 代码中，应该是[`TextView.setCompoundDrawablePadding`](https://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablePadding(int)))。

* * *

> 用于示例的图标：[水](https://icons8.com/web-app/7646/water)、[风向袋](https://icons8.com/web-app/16977/windsock)、[雨天](https://icons8.com/web-app/33690/rainy-weather)和风[玫瑰](https://icons8.com/web-app/5666/wind-rose)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T00:59:54.883

我认为正在发生的事情是您的视图被拉伸，因为它们试图匹配其列中另一个视图的宽度。

尝试减少视图的 columnSpan 或将布局分成两个单独的 GridLayout。

或者，考虑完全使用不同的布局。我会在这里推荐RelativeLayout 而不是GridLayout，但我不知道这如何适合更大的窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T21:30:52.097

尝试这个：

![在此处输入图像描述](https://i.stack.imgur.com/CIQnI.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="100dp">

    <LinearLayout
      android:id="@+id/col1"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:layout_weight="2.4"
      >
        <LinearLayout
          android:id="@+id/col1_row1"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:gravity="center_vertical"
          >   
          <ImageView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/icon"/>
          <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="83%"/>
      </LinearLayout>         
        <LinearLayout
          android:id="@+id/col1_row2"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:gravity="center_vertical"
          >   
          <ImageView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/icon"/>
          <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="1.0mm"/>
      </LinearLayout>
    </LinearLayout>  

    <LinearLayout
      android:id="@+id/col2"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:layout_weight="2.0"
      android:gravity="center"
      >
      <TextView
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="25'"
          android:textSize="50dp"
          />      
    </LinearLayout>

    <LinearLayout
      android:id="@+id/col3"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:layout_weight="2.4"
      >
        <LinearLayout
          android:id="@+id/col3_row1"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:gravity="center_vertical"
          >   
          <ImageView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/icon"/>
          <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="19Km"/>
      </LinearLayout>         
        <LinearLayout
          android:id="@+id/col3_row2"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:gravity="center_vertical"
          >   
          <ImageView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/icon"/>
          <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="NNW"/>
      </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T07:02:11.100

我认为您应该将 usedefaultMargins 更改为 false 并为元素提供自己的边距。

```
android:useDefaultMargins="false"; 
```

# arrays - Wordpress 高级自定义字段数组到 HTML 中的列表

> ID：16159098
> 
> 赞同：0
> 
> 时间：2013-04-23T00:48:16.413
> 
> 标签：arrays, foreach, field

我正在使用 wordpress + 高级自定义字段

我有一个用于 1-10 项目的多选复选框。

我需要它，所以返回数组将以粗体显示项目列表并带有中断。

**自定义字段名称：** article-name

```
<?php foreach(the_field('article-name') as $article) {
echo '<strong>'.$article.'</strong><br />';
} ?> 
```

它显示数组，然后给我一个无效的参数警告。**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T05:21:06.550

您正在使用实际打印值的 the_field 函数。

改用 get_field 将每个值分配给变量`$article`，见下文：

```
<?php foreach(get_field('article-name') as $article) {
echo '<strong>'.$article.'</strong><br />';
} ?> 
```

# c# - 将 WPF 项目链接到 Windows Azure 数据库

> ID：16159099
> 
> 赞同：1
> 
> 时间：2013-04-23T00:48:35.710
> 
> 标签：c#, wpf, database, visual-studio, azure

我对 Windows Azure 比较陌生。到目前为止，我的 C# WPF 项目（Visual Studio 2012）一直在访问本地数据库。最近设置了一个 Windows Azure 帐户，我想将本地数据库迁移到 Azure。

我在 Azure 上创建了一个 SQL 数据库。

我正在添加 C# 代码，以便将数据从本地应用程序传递到云。为了测试此功能，我添加了一个随机用户，我想将其插入 Azure DB。

这是我到目前为止所拥有的：

在 App.config 中：

```
<connectionStrings>
   <add name="STAREntites"
        connectionString="Server=tcp:xxxxx.database.windows.net;
                     Database=xxxxx;
                     Uid=xxxxx.database.windows.net;
                     Pwd=xxxxx;
                     Encrypt=Yes;" />
</connectionStrings> 
```

我有一个“模型”文件夹，其中包含`PersonRepository.cs`：

```
public class PersonEntity : TableEntity
{
    public PersonEntity()
    {
    }
    public PersonEntity(int id, string name, double sal)
    {
        Id = id;
        Name = name;
        Salary = sal;
        PartitionKey = id.ToString();
        RowKey = name;
    }
    public int Id { get; set; }
    public string Name { get; set; }
    public double Salary { get; set; }
} 
```

}

在我的注册页面中，我还有以下代码可以将数据发送到 Azure DB：

```
private void RegisterUser()
    {
             string connStr = ConfigurationManager.ConnectionStrings["STAREntites"].ConnectionString;                           
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connStr);
            CloudTableClient client = storageAccount.CreateCloudTableClient();
            CloudTable table = client.GetTableReference("PersonTable");
            table.CreateIfNotExists();
            var emp = new PersonTable
            {
                FirstName = "Cor",
                LastName = "Mky",
                EmailAddress = "cm@email.com",
                Password = "password",
            };

            TableOperation insertOp = TableOperation.Insert(emp);
            table.Execute(insertOp);

    } 
```

目前，我可以通过服务器资源管理器看到从该`RegisterUser`方法添加的测试用户已插入到 Windows Azure 存储中的人员表中。但是，当我检查 Azure SQL DB 时，实体不存在。

任何人都可以帮助解释为什么实体没有被发送到 Azure 吗？

我检查了我的端口正在侦听并且 SQL 服务器正在运行。我在 Visual Studio 中没有收到任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:45:49.140

您似乎对存储类型感到困惑。`CloudStorageAccount`用于 Azure 存储：表、Blob 和队列，不适用于 Windows Azure SQL 数据库。

`CloudStorageAccount.Parse`如果您传递看起来像 SQL Server 连接字符串的东西，我不太确定如何不引发错误。

如果您想将 Entity Framework 与 Windows Azure SQL 数据库一起使用，只需使用常规`DbContext`代码并将 ADO.NET 连接字符串提供给 WASD，除了 Uid 应该是`Uid=uuuuu@xxxxx`.

如果您想使用表存储，那么您应该在表存储中查看使用[Zudio 之](https://zud.io/)类的插入实体。

[有关可用 Azure 存储选项的信息](http://www.windowsazure.com/en-us/home/features/data-management/)。

# grails - 在一个视图中更新多个实例

> ID：16159105
> 
> 赞同：1
> 
> 时间：2013-04-23T00:49:30.497
> 
> 标签：grails, grails-controller

我从 Grails 开始，我不知道我应该如何面对以下用例。

该应用程序是关于体育结果预测的，所以我在我的域“Match”和“Prediction”中有一个视图，用户可以在其中更新所有尚未播放的比赛的预测。

到目前为止，我已经在我的“PredictionController”中定义了一个方法，它搜索所有已经存在的必须玩的游戏的预测，并为任何日期比现在更高的新匹配生成新的预测实例。我已经为该方法创建了一个视图，并且我正确地获得了我应该完成或更新的所有预测，并且我在我的控制器中定义了另一种表单提交的方法（所以我试图在与“创建”和“更新”脚手架方法的工作方式相同）。

我的问题是，如何访问我的视图修改的所有预测？如何将所有预测发送到我的更新方法？它是否定义了一个包含所有集合的变量的隐藏字段？

这是我的 GSP 视图中的表格：

```
<g:form action="savePredicctions">
<fieldset>
<g:each in="${predictions}">
    <li>
    <div>
        ${it.match.homeTeam}
        <g:field name="${it.match}.homeGoals" type="number" value="${it.homeGoals}" />
    </div>
    -
    <div> 
        <g:field name="${it.match}.awayGoals" type="number" value="${it.awayGoals}" /> 
        ${it.match.awayTeam}
    </div>                  
    </li>
</g:each>
</fieldset>
<fieldset class="submit">
    <g:submitButton />
</fieldset>
</g:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:23:03.630

您可以使用[命令](http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects)对象来存储 Prediction 的实例。

```
@Validateable
class PredictionCommand {
  //data binding needs a non-null attribute, so we use ListUtils.lazyList
  List<Prediction> predictions = ListUtils.lazyList([], FactoryUtils.instantiateFactory(Prediction))

} 
```

在您看来，您需要控制列表的索引，并将 Prediction 的属性发送到控制器：

```
<g:each in="${predictions}" status="i">
  <g:textField name="predictions[$i].homeGoals" />
  <g:textField name="predictions[$i].awayGoals" />
</g:each> 
```

在您的控制器中，您可以使用`bindData()`绑定`params`到您的命令：

```
class CommandController {
  def save() {
    PredictionCommand command = new PredictionCommand()
    bindData(command, params)
    println command.predictions
  }
} 
```

# regex - 使用负正则表达式重写 nginx URL？

> ID：16159108
> 
> 赞同：13
> 
> 时间：2013-04-23T00:49:52.693
> 
> 标签：regex, nginx

我正在尝试将请求重定向到 nginx 中的 https，*除非*它的格式为 HOST/ANY_STRING_OF_CHARS/END_OF_URI，例如：

[http://host.org/about](http://host.org/about) # 不重定向

[http://host.org/users/sign_in](http://host.org/users/sign_in) # 重定向到[https://host.org/users/sign_in](https://host.org/users/sign_in)

这显然适用于 Apache，但我不明白爆炸是如何工作的（如果它不起作用，请忽略）：

```
RewriteRule !/([a-z]+)$ https://%{SERVER_NAME}%{REQUEST_URI} [L,R] 
```

如何在 nginx 重写规则中执行此操作？这不像我希望的那样工作：

```
rewrite !/([a-z]+)$ https://$server_name$request_uri redirect; 
```

这也不会进行重定向，以防我的逻辑倒退：

```
rewrite /([a-z]+)$ https://$server_name$request_uri redirect; 
```

请帮忙？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-23T01:19:20.487

向客户端发送永久重定向：

```
server {
  listen 80;
  rewrite ^(/users/\w+)$ https://$host$1 permanent;
  ...
} 
```

对于否定匹配，您可以使用：

```
if ($request_uri !~ "^/users/\w+$")
{
  return 301 https://$host$request_uri;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-26T15:08:44.397

```
set $test "0";
if ($request_uri ~ "condition") {
   set $test "1";
}
if ($test ~ "0") {
   return 301 redirect url;
} 
```

# google-chrome - 有没有一种简单的方法可以在 Chrome 网上商店中解压 Chrome 扩展程序？

> ID：16159113
> 
> 赞同：5
> 
> 时间：2013-04-23T00:50:56.343
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

有没有一种无需安装即可查看 chrome 扩展程序源代码的简单方法？

没有 crx 文件，只有通常的 webstore url，末尾带有一长串随机字符。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T09:29:18.413

安装[Chrome 扩展源查看器](https://chrome.google.com/webstore/detail/chrome-extension-source-v/jifpbeccnghkjeaalbbjmodiffmgedin)以在 Chrome 网上商店获得一个按钮。此按钮允许您以 zip 文件的形式下载扩展程序。
它还提供了一个内置的源代码查看器，因此您不必自己提取文件。

截屏： [![Chrome 网上商店：（以 zip 格式下载）（查看源代码）](https://i.stack.imgur.com/rB5M4.png)](https://chrome.google.com/webstore/detail/chrome-extension-source-v/jifpbeccnghkjeaalbbjmodiffmgedin)

免责声明：我写了扩展。
如果您想要一个生成 wget 命令的书签，请参阅[此答案](https://stackoverflow.com/a/14099762/938089?how-to-download-a-crx-file-from-the-chrome-web-store-for-a-given-id "CRX 文件本身可以直接从 ...")。

# css - CSS：悬停在“绝对”定位元素内

> ID：16159116
> 
> 赞同：5
> 
> 时间：2013-04-23T00:51:07.867
> 
> 标签：css

我有一个朋友 mrOverAbsolute，他想坐在另一个朋友 mrAbsolute 的上面。似乎谁都没有抱怨。我有另一个朋友，他回复了想要使用精灵的“mrHover”。mrHover 只有在大狗、mrHover 和 mrOverHover 不是那么绝对时才会高兴。

下面是剧情：

```
<style>
div#mrOverAbsolute
{
  z-index:1;
  /* ... and some other stuff */
}
div#mrAbsolute
{
  position:absolute;
  z-index:-1;
  /* ... and some other stuff */
}
a.mrHover
{
  background:url('mrImage') 0 0;
}
a.mrHover:hover
{
  background-position:0 25;
}
</style>

<div id="mrOverAbsolute"></div>
<div id="mrAbsolute">
  <table>
    <tr>
      <td><a href="" class="mrHover"></a></td>
    </tr>
  </table>
</div> 
```

好吧好吧-除了朋友-如果我删除“位置：绝对；”，精灵就可以了。否则，Chrome 会忽略我在 CSS 中声明了 ":hover" 的事实。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T01:00:29.760

绝对定位的元素没有问题`:hover`。

问题是当你设置它`#mrAbsolute`的时候你把元素放在后面，所以鼠标事件被.`#mrOverAbsolute``z-index:-1``#mrOverAbsolute`

# objective-c - 带有UIScrollView的自定义UIView子类，self.scrollview为（null）

> ID：16159117
> 
> 赞同：0
> 
> 时间：2013-04-23T00:51:08.133
> 
> 标签：objective-c, uiscrollview

好的，所以我有一个`UIView`名为 的自定义类`NumberTicker`，它创建了几个`UIScrollViews`并填充它们`UILabels`以便进行滚动`NumberTicker`。但是，我无法正确访问 的属性`scrollviews`，例如。

```
[self.scrollview setHidden:YES];
// or
[self.scrollview setContentOffset:offset]; 
```

上述内容，实际上任何设置或获取 属性的尝试`UIScrollView`都不起作用，除非在`scrollview`创建 时，然后将其添加为`subview`.

这是我的`NumberTicker.h`文件：

```
//  NumberTicker.h
#import <Foundation/Foundation.h>
#import "ProfileViewController.h"

@interface NumberTicker : UIScrollView <UIScrollViewDelegate>

@property (weak, nonatomic) IBOutlet UIScrollView *digitOne;
@property (weak, nonatomic) IBOutlet UIScrollView *digitTwo;
@property (weak, nonatomic) IBOutlet UIScrollView *digitThree;
@property (weak, nonatomic) IBOutlet UIScrollView *digitFour;
@property (weak, nonatomic) IBOutlet UIScrollView *digitFive;
@property (weak, nonatomic) IBOutlet UIScrollView *digitSix;
@property (weak, nonatomic) IBOutlet UIScrollView *digitSeven;
@property (weak, nonatomic) IBOutlet UIScrollView *digitEight;

- (id) initWithDigits:(int)digits andFrame:(CGRect)frame;
- (void) setNumberTickerTo:(int)number;

@end 
```

和 NumberTicker.m：

```
//  NumberTicker.m

#import "NumberTicker.h"

@implementation NumberTicker

- (id) initWithDigits:(int)digits andFrame:(CGRect)frame
{
    self = [super init];
    if (self) {
        // add digits
        [self setDigitEight:_digitEight];
        [self setDigitOne:_digitOne];
        if (digits > 6) {
            // make 8 digit ticker
            [self setFrame:frame];
            for (int i = 1; i <= digits; i++) {
                switch (i) {
                    case 1:
                        [self addSmallScrollView:_digitOne withXPos:(frame.size.width - (i*30))];
                        break;
                    case 2:
                        [self addSmallScrollView:_digitTwo withXPos:(frame.size.width - (i*30))];
                        break;
                    case 3:
                        [self addSmallScrollView:_digitThree withXPos:(frame.size.width - (i*30))];
                        break;
                    case 4:
                        [self addSmallScrollView:_digitFour withXPos:(frame.size.width - (i*30))];
                        break;
                    case 5:
                        [self addSmallScrollView:_digitFive withXPos:(frame.size.width - (i*30))];
                        break;
                    case 6:
                        [self addSmallScrollView:_digitSix withXPos:(frame.size.width - (i*30))];
                        break;
                    case 7:
                        [self addSmallScrollView:_digitSeven withXPos:(frame.size.width - (i*30))];
                        break;
                    case 8:
                        [self addSmallScrollView:_digitEight withXPos:(frame.size.width - (i*30))];
                        break;
                    default:
                        break;
                }
            }
        } else {
            // make 6 digit ticker
            [self setFrame:frame];

            for (int i = 1; i <= digits; i++) {
                switch (i) {
                    case 1:
                        [self addScrollView:_digitOne withXPos:(frame.size.width - (i*40))];
                        break;
                    case 2:
                        [self addScrollView:_digitTwo withXPos:(frame.size.width - (i*40))];
                        break;
                    case 3:
                        [self addScrollView:_digitThree withXPos:(frame.size.width - (i*40))];
                        break;
                    case 4:
                        [self addScrollView:_digitFour withXPos:(frame.size.width - (i*40))];
                        break;
                    case 5:
                        [self addScrollView:_digitFive withXPos:(frame.size.width - (i*40))];
                        break;
                    case 6:
                        [self addScrollView:_digitSix withXPos:(frame.size.width - (i*40))];
                        break;
                    default:
                        break;
                }
            }
        }
    }
    return self;
}

- (void) addScrollView:(UIScrollView *)scrollView withXPos:(int)xPos
{
    scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(xPos, 0, 40, 60)];
    scrollView.contentSize = CGSizeMake(40, 660);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.userInteractionEnabled = NO;

// All of these properties are set properly, however I can't access them again in another method or class, after the `scrollview` has been added as a `subview`

    for (int i = 0; i <= 10; i++) {
        // create and add labels to scrollview
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, i*60, 40, 60)];
        [label setFont:[UIFont fontWithName:@"Helvetica-Bold" size:70]];
        [label setTextAlignment:NSTextAlignmentCenter];
        if (i == 10) {
            [label setText:@"0"];
        } else {
            [label setText:[NSString stringWithFormat:@"%i", i]];
        }
        [scrollView addSubview:label];
    }
    [self addSubview:scrollView];
}

- (void) addSmallScrollView:(UIScrollView *)scrollView withXPos:(int)xPos
{
    scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(xPos, 0, 30, 50)];
    scrollView.contentSize = CGSizeMake(30, 550);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.userInteractionEnabled = NO;
    scrollView.delegate = self;

    for (int i = 0; i <= 10; i++) {
        // create and add labels to scrollview
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, i*50, 30, 50)];
        [label setFont:[UIFont fontWithName:@"Helvetica-Bold" size:50]];
        [label setTextAlignment:NSTextAlignmentCenter];
        if (i == 10) {
            [label setText:@"0"];
        } else {
            [label setText:[NSString stringWithFormat:@"%i", i]];
        }
        [scrollView addSubview:label];
    }
    [self addSubview:scrollView];
}

- (void) setNumberTickerTo:(int)number
{
    NSMutableArray *digitsArray = [[NSMutableArray alloc] init];
    while (number > 0) {
        [digitsArray addObject:[NSNumber numberWithInt:(number % 10)]];
        number = number / 10;
    }
    for (int i = 1; i <= [digitsArray count]; i++) {
        switch (i) {
            case 1:
                [self.digitOne setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES]; // this doesn't work
                NSLog(@"%@", self.digitOne);
                [digitsArray removeObjectAtIndex:0];
                break;
            case 2:
                [_digitTwo setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 3:
                [_digitThree setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 4:
                [_digitFour setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 5:
                [_digitFive setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 6:
                [_digitSix setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 7:
                [_digitSeven setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            case 8:
                [_digitEight setContentOffset:CGPointMake(0, [[digitsArray objectAtIndex:0] integerValue] * 60) animated:YES];
                [digitsArray removeObjectAtIndex:0];
                break;
            default:
                break;
        }
    }
}

@end 
```

`NumberTicker`然后我从我的方法调用`ViewController.m` `viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NumberTicker *numberTicker = [[NumberTicker alloc] initWithDigits:3 andFrame:CGRectMake(20, 20, 240, 60)];
    [self.view addSubview:numberTicker];
    [numberTicker setNumberTickerTo:345];
} 
```

视图和`NumberTicker`一样显示在屏幕上，`scrollviews`一切看起来都很好。但是，我不能隐藏`scrollviews`, 用于`setContentOffset`滚动它们、动画它们或任何东西。

我尝试过综合属性、设置代表、使用 IB 制作视图然后适当地连接插座（我已经删除了这个，因为我对这个特定类的 IB 不感兴趣，而且它在任何情况下都不起作用.

如果我尝试

```
NSLog(@"%@", self.digitOne); 
```

控制台将 self.digitOne 显示为 (null)。

我究竟做错了什么？我如何正确子类化`UIView`并以编程`UIScrollViews`方式在其中创建，以及稍后在其他方法中可编辑的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:51:54.063

你有没有合成你的scrollview，我认为你只能使用'self'。如果属性是合成的，则表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:02:14.483

您的`addSmallScrollView`方法只是将其参数*变量*重新分配给一个新的滚动视图，但它对作为其第一个参数传递的对象没有任何作用。例如，您实际上并没有分配任何东西`_digitOne`。

我建议您更改`addSmallScrollView`为类似的东西`createNewSmallScrollView`并让它或多或少地像现在一样工作，但*返回*在方法内部实例化的滚动视图。然后你可以像这样使用它：

```
_digitOne = [self createNewSmallScrollViewWithXPos:(frame.size.width - (i*30))] 
```

# binary-tree - 猜谜游戏二叉树Java

> ID：16159123
> 
> 赞同：1
> 
> 时间：2013-04-23T00:53:17.657
> 
> 标签：binary-tree

我正在用 java 编写一个程序，它基本上知道各种海洋动物，让用户想一种动物，然后问用户问题，直到它准备好进行猜测。我使用二叉树来做到这一点。这是我现在的代码：

```
import java.util.Scanner;
public class TwentyQuestions
{
   private static Scanner stdin = new Scanner(System.in);
   public static void main(String[ ] args)
   {
      BTNode<String> root;

      instruct( );
      root = beginningTree( );
      do
         play(root);
      while (query("Shall we play again?"));

      System.out.println("Thanks for teaching me a thing or two.");
      System.out.println ("Here is the tree:");
      root.print(1);
   }

   public static void instruct( )
   {
      System.out.println("Please think of an ocean animal.");
      System.out.println("I will ask some yes/no questions to try to figure out which animal you're thinking of.");
   }

   public static void play(BTNode<String> current)
   {
      while (!current.isLeaf( ))
      {
         if (query(current.getData( )))
            current = current.getLeft( );
         else
            current = current.getRight( );
      }

      System.out.print("My guess is " + current.getData( ) + ". ");
      if (!query("Am I right?"))
         learn(current);
      else
         System.out.println("I knew it all along!");
   }

   public static BTNode<String> beginningTree( )   
   {
      BTNode<String> root;
      BTNode<String> child;
      BTNode<String> child1;
      BTNode<String> child2;
      BTNode<String> child3;
      BTNode<String> child4;
      BTNode<String> child5;
      BTNode<String> child6;
      BTNode<String> child7;
      BTNode<String> child8;
      BTNode<String> child9;
      BTNode<String> child10;
      BTNode<String> child11;
      BTNode<String> child12;
      BTNode<String> child13;
      BTNode<String> child14;

      final String ROOT_QUESTION = "Is it a mammal?";
      final String LEFT_QUESTION = "Is it able to move on land?";
      final String LEFT_QUESTION2 = "Is it a solitary animal?";
      final String RIGHT_QUESTION2 = "Is it larger than a truck?";
      final String RIGHT_QUESTION3 = "Does it have tusks?";
      final String RIGHT_QUESTION = "Does it have any limbs/tentacles?";
      final String LEFT_QUESTION4 = "Does it have more than four limbs/tentacles?";
      final String LEFT_QUESTION5 = "Does it have an exoskeleton?";
      final String LEFT_QUESTION6 = "Does it have claws?";
      final String LEFT_QUESTION7 = "Does it have a long tail?";
      final String RIGHT_QUESTION7 = "Does it have 8 arms?";
      final String RIGHT_QUESTION5 = "Does it have a shell?";
      final String RIGHT_QUESTION4 = "Can it sting?";
      final String LEFT_QUESTION8 = "Is it long and snakelike?";
      final String RIGHT_QUESTION8 = "Is it generally smaller than a car?";
      final String ANIMAL1 = "Seal";
      final String ANIMAL2 = "Sea Lion";
      final String ANIMAL3 = "Walrus";
      final String ANIMAL4 = "Whale";
      final String ANIMAL5 = "Dolphin";
      final String ANIMAL6 = "Shrimp";
      final String ANIMAL7 = "Lobster";
      final String ANIMAL8 = "Crab";
      final String ANIMAL9 = "Jellyfish";
      final String ANIMAL10 = "Octopus";
      final String ANIMAL11 = "Squid";
      final String ANIMAL12 = "Turtle";
      final String ANIMAL13 = "Alligator";
      final String ANIMAL14 = "Eel";
      final String ANIMAL15 = "Stingray";
      final String ANIMAL16 = "Shark";
      final String ANIMAL17 = "Fish";

      // Create the root node with the question “Are you a mammal?”
      root = new BTNode<String>(ROOT_QUESTION, null, null);

      child = new BTNode<String>(LEFT_QUESTION, child2, child14);
      root.setLeft(child);

      child2 = new BTNode<String>(LEFT_QUESTION2,null,child3);
      child2.setLeft(new BTNode<String>(ANIMAL1, null, null));
      child.setLeft(child2);

      child14 = new BTNode<String>(RIGHT_QUESTION2,null,null);
      child14.setLeft(new BTNode<String>(ANIMAL4,null,null));
      child14.setRight(new BTNode<String>(ANIMAL5,null,null));
      child.setRight(child14);

      child3 = new BTNode<String>(RIGHT_QUESTION3, null, null);
      child3.setLeft(new BTNode<String>(ANIMAL3, null, null));
      child3.setRight(new BTNode<String>(ANIMAL2, null, null));
      child.setRight(child3);

      child1 = new BTNode<String>(RIGHT_QUESTION, child4, child8);
      root.setRight(child1);

      child4 = new BTNode<String>(LEFT_QUESTION4,child5,child10);
      child1.setLeft(child4);

      child5 = new BTNode<String>(LEFT_QUESTION5,child6,child8);
      child4.setLeft(child5);

      child6 = new BTNode<String>(LEFT_QUESTION6,child7, null);
      child6.setRight(new BTNode<String>(ANIMAL6,null,null));
      child5.setLeft(child6);

      child7 = new BTNode<String>(LEFT_QUESTION7, null, null);
      child7.setLeft(new BTNode<String>(ANIMAL7,null,null));
      child7.setRight(new BTNode<String>(ANIMAL8,null,null));
      child6.setLeft(child7);

      child8 = new BTNode<String>(RIGHT_QUESTION4,null,child9);
      child8.setLeft(new BTNode<String>(ANIMAL9,null,null));
      child5.setRight(child8);

      child9 = new BTNode<String>(RIGHT_QUESTION7,null,null);
      child9.setLeft(new BTNode<String>(ANIMAL10,null,null));
      child9.setRight(new BTNode<String>(ANIMAL11,null,null));
     child8.setRight(child9);

      child10 = new BTNode<String>(RIGHT_QUESTION5,null,null);
      child10.setLeft(new BTNode<String>(ANIMAL12,null,null));
      child10.setRight(new BTNode<String>(ANIMAL13,null,null));
      child4.setRight(child10);

      child11 = new BTNode<String>(RIGHT_QUESTION4,child12,child13);
      child1.setRight(child11);

      child12 = new BTNode<String>(LEFT_QUESTION8,null,null);
      child12.setLeft(new BTNode<String>(ANIMAL14,null,null));
      child12.setRight(new BTNode<String>(ANIMAL15,null,null));
     child11.setLeft(child12);

      child13 = new BTNode<String>(RIGHT_QUESTION8,null,null);
      child13.setLeft(new BTNode<String>(ANIMAL17,null,null));
      child13.setRight(new BTNode<String>(ANIMAL16,null,null));
      child11.setRight(child13);

      return root;
   }

   public static void learn(BTNode<String> current)

   {
      String guessAnimal;   // The animal that was just guessed
      String correctAnimal; // The animal that the user was thinking of
      String newQuestion;   // A question to distinguish the two animals

      // Set Strings for the guessed animal, correct animal and a new question.
      guessAnimal = current.getData( );
      System.out.println("I give up. What are you? ");
      correctAnimal = stdin.nextLine( );
      System.out.println("Please type a yes/no question that will distinguish a");
      System.out.println(correctAnimal + " from a " + guessAnimal + ".");
      newQuestion = stdin.nextLine( );

      // Put the new question in the current node, and add two new children.
      current.setData(newQuestion);
      System.out.println("As a " + correctAnimal + ", " + newQuestion);
      if (query("Please answer"))
      {
         current.setLeft(new BTNode<String>(correctAnimal, null, null));
         current.setRight(new BTNode<String>(guessAnimal, null, null));
      }
      else
      {
         current.setLeft(new BTNode<String>(guessAnimal, null, null));
         current.setRight(new BTNode<String>(correctAnimal, null, null));
      }         
   }

   public static boolean query(String prompt)
   {
      String answer;

      System.out.print(prompt + " [Y or N]: ");
      answer = stdin.nextLine( ).toUpperCase( );
      while (!answer.startsWith("Y") && !answer.startsWith("N"))
      {
    System.out.print("Invalid response. Please type Y or N: ");
    answer = stdin.nextLine( ).toUpperCase( );
      }

      return answer.startsWith("Y");
   }

} 
```

* * *

不断出现的错误是“变量子（+无论数字）可能尚未初始化。” 我该如何解决？

哦，这是 BTNode 的代码：

```
 public class BTNode<E>
    {
       private E data;
       private BTNode<E> left, right;   
       public BTNode(E initialData, BTNode<E> initialLeft, BTNode<E> initialRight)
       {
          data = initialData;
          left = initialLeft;
          right = initialRight;
       }       

       public E getData( )   
       {
          return data;
       }

   public BTNode<E> getLeft( )
   {
      return left;                                               
   } 

   public E getLeftmostData( )
   {
      if (left == null)
         return data;
      else
         return left.getLeftmostData( );
   }

   public BTNode<E> getRight( )
   {
      return right;                                               
   } 

   public E getRightmostData( )
   {
      if (left == null)
         return data;
      else
         return left.getRightmostData( );
   }

   public void inorderPrint( )
   {
      if (left != null)
         left.inorderPrint( );
      System.out.println(data);
      if (right != null)
         right.inorderPrint( );
   }  

   public boolean isLeaf( )
   {
      return (left == null) && (right == null);                                               
   } 

   public void preorderPrint( )
   {
      System.out.println(data);
      if (left != null)
         left.preorderPrint( );
      if (right != null)
         right.preorderPrint( );
   } 

   public void postorderPrint( )
   {
      if (left != null)
         left.postorderPrint( );
      if (right != null)
         right.postorderPrint( );
      System.out.println(data);
   }   

   public void print(int depth)
   {
      int i;

      // Print the indentation and the data from the current node:
      for (i = 1; i <= depth; i++)
         System.out.print("    ");
      System.out.println(data);

      if (left != null)
         left.print(depth+1);
      else if (right != null)
      {
         for (i = 1; i <= depth+1; i++)
            System.out.print("    ");
         System.out.println("--");
      }

      if (right != null)
         right.print(depth+1);
      else if (left != null)
      {
         for (i = 1; i <= depth+1; i++)
            System.out.print("    ");
         System.out.println("--");
      }
   }

   public BTNode<E> removeLeftmost( )
   {
      if (left == null)
         return right;
      else
      {
         left = left.removeLeftmost( );
         return this;
      }
   }

   public BTNode<E> removeRightmost( )
   {
      if (right == null)
         return left;
      else
      {
         right = right.removeRightmost( );
         return this;
      }
   }

   public void setData(E newData)   
   {
      data = newData;
   }                                                               

   public void setLeft(BTNode<E> newLeft)
   {                    
      left = newLeft;
   }

   public void setRight(BTNode<E> newRight)
   {                    
      right = newRight;
   }  

   public static <E> BTNode<E> treeCopy(BTNode<E> source)
   {
      BTNode<E> leftCopy, rightCopy;

      if (source == null)
         return null;
      else
      {
         leftCopy = treeCopy(source.left);
         rightCopy = treeCopy(source.right);
         return new BTNode<E>(source.data, leftCopy, rightCopy);
      }
   }

   public static <E> long treeSize(BTNode<E> root)
   {
      if (root == null)
         return 0;
      else
         return 1 + treeSize(root.left) + treeSize(root.right);
   }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:06:30.333

声明变量时，请确保在使用它们之前也对其进行初始化。也就是说，而不是写

```
BTNode<String> root;
BTNode<String> child;
BTNode<String> child1;
... 
```

写

```
BTNode<String> root = null;
BTNode<String> child = null;
... 
```

这是因为当您稍后继续编写语句时

```
child = new BTNode<String>(LEFT_QUESTION, child2, child14); 
```

child2 和 child14 将被初始化（而在您的情况下，它们仅被声明，未初始化）

# winapi - win32 - 如何在文本字符串周围绘制一个矩形？

> ID：16159127
> 
> 赞同：6
> 
> 时间：2013-04-23T00:53:35.327
> 
> 标签：winapi, gdi

我是 Win32 的新手，并试图在 C++ 中获取基于 GDI 的代码（出于技术原因不想使用 GDI+）

编辑：简化问题：

我需要在窗口中间绘制的文本周围绘制一个矩形。- 如何填充矩形坐标？- 任何人都可以帮助解决这条线 - Rectangle(x1,y1,x2,y2) 吗？- 如何计算这些 (x1,y1) & (x2,y2) 值？

谢谢..

```
 hdc = BeginPaint(hWnd, &ps);
    GetClientRect(hWnd, &rcClient);
    SelectObject(hdc, GetStockObject(DEFAULT_GUI_FONT));
    SetTextColor(hdc, RGB(255, 0, 0));

    DrawText(hdc, wstring(s.begin(),s.end()).c_str(), -1, &rectResult, DT_SINGLELINE | DT_CALCRECT);

    DrawText(hdc, wstring(s.begin(),s.end()).c_str(), -1, &rcClient, DT_SINGLELINE | DT_CENTER | DT_VCENTER);

    // Here I need help - How to I place the rectangle around the Text - which is drawn in the middle of the window?
    // It looks like need to use - rectResult.bottom/top/left/right - but don't know how.. 
    Rectangle(hdc, 0,0,100,100); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T03:53:53.893

您实际上不必自己将文本居中。如果您传递适当的标志，GDI 文本输出函数可以为您执行此操作。

例如，如果您调用[`DrawText`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498.aspx)并传递`DT_CENTER`标志，它将自动在指定矩形的中间（水平居中）绘制文本。

假设您只有一行文本（听起来像您这样做），您可以通过传递and标志让它自动*垂直*居中文本。`DT_SINGLELINE``DT_VCENTER`

因此，您真正需要做的就是编写代码将[窗口的客户区](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633503.aspx)分成 4 个相等的部分，然后将这些矩形传递给`DrawText`函数。这不是很困难。如果您无法在脑海中想象它，请将铅笔和纸放在上面。

```
void PaintWindow(HWND hWnd)
{
   // Set up the device context for drawing.
   PAINTSTRUCT ps;
   HDC hDC = BeginPaint(hWnd, &ps);
   HPEN hpenOld = static_cast<HPEN>(SelectObject(hDC, GetStockObject(DC_PEN)));
   HBRUSH hbrushOld = static_cast<HBRUSH>(SelectObject(hDC, GetStockObject(NULL_BRUSH)));

   // Calculate the dimensions of the 4 equal rectangles.
   RECT rcWindow;
   GetClientRect(hWnd, &rcWindow);

   RECT rc1, rc2, rc3, rc4;
   rc1 = rc2 = rc3 = rc4 = rcWindow;

   rc1.right  -= (rcWindow.right - rcWindow.left) / 2;
   rc1.bottom -= (rcWindow.bottom - rcWindow.top) / 2;

   rc2.left   = rc1.right;
   rc2.bottom = rc1.bottom;

   rc3.top   = rc1.bottom;
   rc3.right = rc1.right;

   rc4.top  = rc1.bottom;
   rc4.left = rc1.right;

   // Optionally, deflate each of the rectangles by an arbitrary amount so that
   // they don't butt up right next to each other and we can distinguish them.
   InflateRect(&rc1, -5, -5);
   InflateRect(&rc2, -5, -5);
   InflateRect(&rc3, -5, -5);
   InflateRect(&rc4, -5, -5);

   // Draw (differently-colored) borders around these rectangles.
   SetDCPenColor(hDC, RGB(255, 0, 0));    // red
   Rectangle(hDC, rc1.left, rc1.top, rc1.right, rc1.bottom);
   SetDCPenColor(hDC, RGB(0, 255, 0));    // green
   Rectangle(hDC, rc2.left, rc2.top, rc2.right, rc2.bottom);
   SetDCPenColor(hDC, RGB(0, 0, 255));    // blue
   Rectangle(hDC, rc3.left, rc3.top, rc3.right, rc3.bottom);
   SetDCPenColor(hDC, RGB(255, 128, 0));  // orange
   Rectangle(hDC, rc4.left, rc4.top, rc4.right, rc4.bottom);

   // Draw the text into the center of each of the rectangles.
   SetBkMode(hDC, TRANSPARENT);
   SetBkColor(hDC, RGB(0, 0, 0));   // black
   // TODO: Optionally, set a nicer font than the default.
   DrawText(hDC, TEXT("Hello World!"), -1, &rc1, DT_CENTER | DT_SINGLELINE | DT_VCENTER);
   DrawText(hDC, TEXT("Hello World!"), -1, &rc2, DT_CENTER | DT_SINGLELINE | DT_VCENTER);
   DrawText(hDC, TEXT("Hello World!"), -1, &rc3, DT_CENTER | DT_SINGLELINE | DT_VCENTER);
   DrawText(hDC, TEXT("Hello World!"), -1, &rc4, DT_CENTER | DT_SINGLELINE | DT_VCENTER);

   // Clean up after ourselves.
   SelectObject(hDC, hpenOld);
   SelectObject(hDC, hbrushOld);
   EndPaint(hWnd, &ps);
} 
```

 ![](https://i.stack.imgur.com/tlo7R.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:07:47.393

```
RECT rect={0,0,0,0};
const char *str="Test Text";
DrawText(hDC, str, strlen(str), &rect, DT_CALCRECT | DT_NOCLIP);
Rectangle(hDC,rect.left,rect.top,rect.right,rect.bottom);
DrawText(hDC, str, strlen(str), &rect, DT_CENTER | DT_VCENTER | DT_SINGLELINE|DT_NOCLIP); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T04:06:48.437

终于明白了 :) 非常感谢 Cody Gray 为我指出了正确的方向 :)

```
GetTextExtentPoint32(hDC, str, strlen(str), &sz2); 
rect2.top=rect2.bottom+sz2.cy;
rect2.right=rect2.top+sz2.cx;
Rectangle(hDC,rect2.left,rect2.top,rect2.right,rect2.bottom);
DrawText(hDC, str, -1, &rect2, DT_CENTER | DT_VCENTER | DT_SINGLELINE|DT_NOCLIP); 
```

# macos - 从 OSX 10.6 切换到 10.7 时出现 Scons 编译错误

> ID：16159130
> 
> 赞同：2
> 
> 时间：2013-04-23T00:54:01.740
> 
> 标签：macos, compiler-errors, osx-lion, osx-snow-leopard, scons

我正在从 Snow Leopard (10.6.8) MAC 迁移到 Lion MAC (10.7.5)。我没有更改代码或构建脚本中的任何内容，但是一旦我尝试在 OSX Lion 上使用 SCONS 构建我的项目，就会收到以下错误：

```
gcc -arch i386 -o build/osx/objs/installer/Controller.o -c -isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.5 -x objective-c++ -Oz -m32 -Wall -fno-common -fvisibility=hidden -fno-strict-aliasing -Wall -fno-common -fvisibility=hidden -DMACOSX_DEPLOYMENT_TARGET=10.5 -g -DOS_OSX=1 -D_OS_NAME=osx -D_PRODUCT_VERSION=1.1.0 -D_PRODUCT_NAME=Aspen -D_GLOBAL_NS_VARNAME=Aspen -D_CONFIG_FILENAME=Aspen.config -D_BOOT_RUNTIME_FLAG= -D_BOOT_HOME_FLAG= -D_DISTRIBUTION_URL=smithmicro.com -D_CRASH_REPORT_URL=smithmicro.com/p/v1/app-crash-report -DOS_32=1 -DDEBUG=1 -I. -Ikroll -Ibuild/osx/sdk/include -Ikroll/libkroll -Ikroll/libkroll/utils installer/osx/Controller.mm
In file included from kroll/libkroll/utils/../base.h:10,
                 from kroll/libkroll/utils/utils.h:8,
                 from installer/osx/Controller.h:8,
                 from installer/osx/Controller.mm:6:
/Developer/SDKs/MacOSX10.5.sdk/usr/include/c++/4.2.1/string:44:28: error: bits/c++config.h: No such file or directory 
```

我在这里有 10.5 sdk：/Developer/SDKs/MacOSX10.5.sdk。当我将 Snow Leopard 上的 10.5 SDK 与 Lion MAC 进行比较时，它们看起来是一样的。

任何帮助将不胜感激。提前致谢。

* * *

编辑

打开详细信息后，我可以在 10.7 机器上看到包含路径：

```
 /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include
 /Developer/SDKs/MacOSX10.5.sdk/usr/include/c++/4.2.1
 /Developer/SDKs/MacOSX10.5.sdk/usr/include/c++/4.2.1/backward
 /Developer/SDKs/MacOSX10.5.sdk/usr/include
 /Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks (framework directory)
 /Developer/SDKs/MacOSX10.5.sdk/Library/Frameworks (framework directory) 
```

当我查看 10.6 机器时，它有

```
/Developer/SDKs/MacOSX10.5.sdk/usr/include/c++/4.2.1/i686-apple-darwin10 
```

那是缺少的包含，但我不确定它是如何包含在 10.6 而不是 10.7 中的，它没有明确添加到构建脚本的任何地方。我相信它基于构建的 BaseSDK，它们是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T04:21:57.830

所以我最终创建了自己的别名文件夹，名为

```
/Developer/SDKs/MacOSX10.5.sdk/usr/include/c++/4.2.1/i686-apple-darwin11 
```

在我的 10.7 机器上，现在一切都编译好了。我想知道为什么 Xcode/SDK 安装没有像在 10.6 上那样为我创建这个文件夹

# python - 无效的语法错误。也许我的运营商？

> ID：16159133
> 
> 赞同：0
> 
> 时间：2013-04-23T00:54:44.053
> 
> 标签：python

为什么这行不通？我一直在搞乱我的 if 语句，它一直给我一个错误并说无效的语法。也许我只是忘记了如何设置操作员。请温柔一点，我刚开始从 Java 切换到 Python。谢谢！

```
# Create a short program that gets a users age and name

print("Hello there! What is your name?")
myName = raw_input()
print("Okay then %s(myName) how old are you?")
myAge = raw_input()
if myAge < 18
    print("Ah, so you're an adult then!")
else if age >= 18
    print("So you're a kid, huh?") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T00:58:12.253

你有几个问题：

*   `if myAge < 18`并且`else if age >= 18`都应该在行尾都有冒号。
*   `else if`应该是`elif`。
*   你的年龄比较是倒退的。
*   您的`myAge`变量不是整数。这是一个字符串。

这是我的做法：

```
myName = raw_input("Hello there! What is your name? ")
myAge = int(raw_input("Okay then {0} how old are you? ".format(myName)))

if myAge >= 18:
    print("Ah, so you're an adult then!")
else:
    print("So you're a kid, huh?") 
```

如果您使用的是 Python 3，请更改`raw_input`为`input`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T00:56:28.777

```
if myAge < 18 
```

最后缺少冒号

```
if myAge < 18:
             ^
             | 
```

并考虑使用`elif`代替`else if`. 无论哪种方式，最后都需要 a `:`，所以

```
elif age >= 18:
              ^
              | 
```

Blender 指出了其他一些问题，例如您的“向后”年龄比较，以及在进行比较之前需要将您收到的作为输入的字符串转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:22:02.807

@Xiam：我也是 Python 新手，我发现这种语言“很棒”。要向其他答案添加更多信息，Python 中的所有控制流语句（如 if-else、for、while）都需要尾随冒号 (:)。这是一种告诉解释器后面的代码行开始新的语句块并且可能根据其前面的控制流语句的结果执行的方法。希望能帮助到你。

# ruby-on-rails - 如何通过 has_and_belongs_to_many 迁移到 has_many？

> ID：16159134
> 
> 赞同：12
> 
> 时间：2013-04-23T00:55:06.947
> 
> 标签：ruby-on-rails

我们在两个模型之间有一个简单的 has_and_belongs_to_many 关系。我们想在该模型中添加一些参数，因此我们需要将其更改为 has_many :through 类型的模型。

据我所知，我们需要添加一个 id 列（以及我们想要的任何列）。但是，我并不清楚 100% 如何做到这一点。如果我们添加一个整数列 :id，rails 会知道那是 'id' 主键吗？

我们使用的是最新的 3.x。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-20T11:57:55.590

假设您的数据库表为由 rails 创建的许多 has_and_belong_to 是patients_physicians

您需要做的就是生成这样的模型

**`rails g model patients_physician --skip-migration`**

然后您可以使用迁移命令添加所需的任何列，例如 do

```
rails g migration add_new_column_to_patients_physician new_column 
```

并且您的数据仍然完好无损，您可以根据您生成的模型进行查询。

不要忘记添加

```
belongs_to :model_1
belongs_to :model_2 
```

到新添加的模型 patients_physician

那么您将可以在您需要的模型中进行操作。

```
has_many patients_physician
has_many :model_2, through: :patients_physician 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-17T15:18:59.713

只需在迁移时在您的表上添加 id ：

`add_column :table, :id, :primary_key`

从[这个答案中引用](https://stackoverflow.com/questions/1702441/rails-modeling-converting-habtm-to-has-many-through/1702793#1702793)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-14T20:35:27.520

这里有一篇文章说明了使用 sql 修补 habtm 表并添加一个 id（作为 pkey）：[Rails 建模：将 HABTM 转换为 has_many :through](https://stackoverflow.com/questions/1702441/rails-modeling-converting-habtm-to-has-many-through)。我在使用这种方法时遇到了麻烦，并且可能存在特定于数据库的问题。我最终破坏了连接（habtm）表并创建了一个新的连接模型。那行得通。

一些警告：在这样做之前，我建议在 git 中创建一个分支并将数据库存档，以便在它横向运行时轻松恢复。

这些是步骤：

1.  编辑两个连接模型以使用 has_many 通过

    ```
    class Physician < ActiveRecord::Base
      # has_and_belongs_to_many :patients
      has_many :appointments
      has_many :patients, :through => :appointments
    end 
    ```

    对患者做同样的事情。

2.  创建新的连接模型：

    ```
    rails g model Appointment physician_id:integer patient_id:integer has_insurance:boolean 
    ```

    编辑上面生成的新迁移文件...请注意，“更改”作为迁移方法不起作用，因为我们正在处理数据。见下文。

3.  在数据库中创建新的连接模型，并通过记录将所有旧的 habtm 关联映射到新的 has_many：

    ```
    def self.up
      create_table :appointments do |t|
        t.integer :physician_id
        t.integer :patient_id
        t.boolean :has_insurance

        t.timestamps
      end

      Physician.find_each {|doc|
        doc.patients.each do |pat|
          Appointment.create!(:physician_id => doc.id, :patient_id => pat.id, :has_insurance => false )
        end
      }

      # finally, dump the old hatbm associations
      drop_table :patients_physicians

    end 
    ```

4.  如果按照 Rails 指南重建旧的 habtm 关联似乎太痛苦了，那就中止。但是请注意，使用这种方法无法再回滚迁移。

    ```
    def self.down
      raise ActiveRecord::IrreversibleMigration
    end 
    ```

    相反，要“关闭”，只需终止 git 分支，然后重新加载备份数据库。然后，如有必要，您可以从那里恢复 db:rollback。另一方面，如果 has_many through 记录不需要修改，另一种方法是删除 :id 列，并重命名 db：

    ```
    def self.down
      remove_column :appointments, :id
      rename_table :appointments, :patients_physicians
    end 
    ```

    我没有测试后者（因为在我的情况下我必须弄乱元数据）。这些想法来自这篇文章：http: [//7fff.com/2007/10/31/activerecord-migrating-habtm-to-model-table-suitable-for-has_many-through/](http://7fff.com/2007/10/31/activerecord-migrating-habtm-to-model-table-suitable-for-has_many-through/)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-15T23:59:46.683

这是我用于转换团队和用户之间的 has_and_belongs_to_many 关系的迁移：

```
class CreateTeamMembers < ActiveRecord::Migration
  def up
    # Create a new table with id and timestamps to replace the old one
    create_table :team_members do |t|
      t.belongs_to :team
      t.belongs_to :user
      t.timestamps
    end

    # Now populate it with a SQL one-liner!
    execute "insert into team_members(team_id,user_id) select team_id,user_id from teams_users"

    # drop the old table
    drop_table :teams_users
  end

  def down
    # This leaves the id and timestamps fields intact
    rename_table :team_members, :teams_users
  end
end 
```

# ruby-on-rails - Rails RSpec 吸盘冲床

> ID：16159135
> 
> 赞同：0
> 
> 时间：2013-04-23T00:55:07.447
> 
> 标签：ruby-on-rails, ruby, testing, rspec

请原谅这里的 Rails，RSpec 新手问题。

我正在尝试使用 RSpec 来测试我在文件中创建的类中的方法`app/workers/myworker.rb`。像这样的东西：

```
class MyWorker
   include SuckerPunch::Worker

   def perform(user_id)
     do_stuff(user_id)
     #etc
   end

   def do_stuff(user_id)
     # do stuff
   end
end 
```

我有一个规范文件`spec/workers/myworker_spec.rb`，如下所示：

```
require 'spec_helper'

describe MyWorker do
  describe "do_stuff method" do
    test = do_stuff(3)
  end
end 
```

我越来越`undefined method 'do_stuff' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2:0x007fef211b7840>`

关于如何包含此类`MyWorker`及其方法以便我可以使用 RSpec 测试它们的任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:04:33.433

从您提供的代码中，没有`require`or `require_relative`of `app/workers/myworker.rb`，并且“测试”不在[example group](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/example-groups/basic-structure-describe-it!)中。

在这些东西在那里之前，您可能遇到的任何其他问题都是没有实际意义的。

* * *

使用上面使用的样式，您会得到一个*隐含*的主题：

```
describe MyWorker do
  # subject { MyWorker.new } # this is not needed, and is kept in `subject`
  describe "do_stuff method" do
    it { should do_stuff(3) }  # but `subject` doesn't need to be used when it's implicit.
  end
end 
```

然而，这仍然不像一个真正的规范，它可能应该更像这样：

```
describe MyWorker do
  let(:worker){ MyWorker.new }
  describe "do_stuff method" do
    subject { worker.do_stuff(3)}
    it { should_not be_nil }
    its(:total) { should == 12 }
  end
end 
```

类似的东西。请参阅[文档](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/subject/implicit-subject)和[此博客文章](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)。您仍然需要将测试放在示例组中。当您这样做时，您将免费获得`subject`（即`worker`在您的答案中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:07:14.737

哇。答案很明显。

我一直假设`app/workers/myworker.rb`需要以某种方式要求它，但真正的问题只是我没有实例化我的类。

```
describe MyWorker do
  describe "do_stuff method" do
    worker = MyWorker.new
    test = worker.do_stuff(3)
  end
end 
```

这行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:15:10.673

你错`do`了，在`describe MyWorker`字符串：

```
require 'spec_helper'

describe MyWorker do
  describe "do_stuff method" do
    test = do_stuff(3)
  end
end 
```

# java - Apache Commons VFS 是否可以进行通配符搜索？

> ID：16159138
> 
> 赞同：0
> 
> 时间：2013-04-23T00:55:10.400
> 
> 标签：java, wildcard, apache-commons, vfs

我只是在学习 Apache Commons VFS。我想在某个目录中搜索文件，但我不知道文件的确切名称。然而，我确实知道这个名字的一部分。

要搜索文件，我*想*我可以这样做：

```
FileSystemManager manager = VFS.getManager();
FileObject file = manager.resolveFile(directory + "/" + filename);

if (file.exists()) {
    System.out.println("File found");
} else {
    System.out.println("File not found");
} 
```

其中“目录”是我要查找的目录的字符串，“文件名”是我要查找的文件的确切文件名。那应该打印出文件是否存在。

我想知道当我不知道文件的确切名称时是否可以做类似的事情，但我知道其中的一部分。例如，如果我知道文件名以“foo.txt”结尾，我可以对“*foo.txt”进行某种通配符搜索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:59:53.740

看看

```
org.apache.commons.vfs2.FileSelector 
```

您可以找到以下标准实现：

AllFileSelector、FileDepthSelector、FileFilterSelector、FileTypeSelector

**FileFilter**是从**FileDepthSelector**派生的，它可能是最接近你能得到的。您可以使用它来实现您自己的基于“通配符”的选择器。所有这些选择器都像过滤器一样工作。它们是遍历文件系统时文件系统管理器的回调。您的过滤器将决定文件是否在选择中。从 FileDepthSelector 派生 FileFilter 的优点是可以限制所经过的文件系统的目录深度级别。总体而言，这是一个不错的方法，因为您可以实现其他类型的过滤器，例如文件修改时间 - 但如果您想到 (*a*b.doc*) 之类的过滤器，它们可能会提供一个不容易实现的通配符过滤器希望这会有所帮助.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T16:05:03.583

我知道这个问题现在有点老了，但我今天遇到了它，因为我正在实施需要通配符匹配的 SFTP 集成。我找到了一个 Apache 实用程序可以做到这一点。 [选择器实用程序](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.maven.shared/maven-verifier/1.0/org/apache/maven/it/util/SelectorUtils.java)

这可以与上一个实现 FileSelector 实现的答案中的建议一起单独使用

# php - 数学验证码会话值未通过

> ID：16159144
> 
> 赞同：0
> 
> 时间：2013-04-23T00:55:48.700
> 
> 标签：php, javascript, validation, session, captcha

我正在使用联系表格。我的问题是我无法验证验证码。`isset($_session[''])`不起作用。

我的代码：

联系人.php

```
<?php
  session_start();
  if (!isset($_SESSION['num1']) && !isset($_SESSION['num2'])) {
    $_SESSION['num1'] = rand(1,5);
    $_SESSION['num2'] = rand(1,5);
  }
?> 
```

显示验证码字段：

```
<label for="captcha">
  <?php echo $_SESSION['num1']; ?>+ <?php echo $_SESSION['num2']; ?>?
</label>
<input type="text" id="captcha" name="captcha" placeholder="Captcha"> 
```

JavaScript：

```
$(document).ready(function() {
  $.validator.addMethod("nourl", function(value, element) {
    return !/http\:\/\/|www\.|link\=|url\=/.test(value);
  }, "No URL's");

  $("form").validate({
    rules: {
      name: {
        required: true
      },
      email: {
        required: true,
        email: true
      },
      comments: {
        required: true,
        minlength: 4,
        nourl: true
      },
      captcha: {
        required: true,
        remote: {
          url: "validation.php",
          type: "post"
        }
      }
    },
    messages: {
      name: "",
      email: "",
      comments: "",
      captcha: ""
    }
  });
}); 
```

验证.php：

```
<?php
  session_start();
  if (!isset($_SESSION['num1']) || !isset($_SESSION['num2'])) {
    exit('"Unknown session"');
  }
  $sum = (int)$_SESSION['num1'] + (int)$_SESSION['num2'];
  if (isset($_POST['captcha']) && (int)$_POST['captcha'] === $sum) {
    exit('true');
  }
  exit('false');
?> 
```

我得到的结果：“未知会话”

每次得到这条线返回。

```
if (!isset($_SESSION['num1']) || !isset($_SESSION['num2'])) {
  exit('"Unknown session"');
} 
```

有人可以帮忙吗？

# python - 循环播放 Pandas 系列时获取下一个和上一个条目

> ID：16159145
> 
> 赞同：2
> 
> 时间：2013-04-23T00:55:50.950
> 
> 标签：python, pandas

循环遍历 Pandas 系列时如何获取下一个和上一个迭代值？我想计算下一个和上一个索引之间的差异，如下所示：

```
data = pd.Series([1,2,4,2,5], index = [100,120,130,140,170])
for idx in data.iteritems():
    delta = idx.next()[0] - idx.previous()[0]
    # do other stuff 
```

我会分别处理第一个和最后一个元素，所以现在让我们忽略它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:21:08.177

这个怎么样？

```
In [55]: for i in range(data.size):
   ....:     print 'now', data[data.index[i]]
   ....:     if i==0: continue
   ....:     if i==data.size-1: continue
   ....:     print '  last: ', data[data.index[i-1]]
   ....:     print '  next: ', data[data.index[i+1]]
   ....:     

now 1
now 2
  last:  1
  next:  4
now 4
  last:  2
  next:  2
now 2
  last:  4
  next:  5
now 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:01:14.053

这些对你有用吗？

```
In [32]: data = pd.Series([1,2,4,2,5], index = [100,120,130,140,170])

In [33]: data
Out[33]: 
100    1
120    2
130    4
140    2
170    5
dtype: int64

In [34]: data.diff()
Out[34]: 
100   NaN
120     1
130     2
140    -2
170     3
dtype: float64

In [35]: data-data.shift(1)
Out[35]: 
100   NaN
120     1
130     2
140    -2
170     3
dtype: float64

In [36]: data-data.shift(-1)
Out[36]: 
100    -1
120    -2
130     2
140    -3
170   NaN
dtype: float64 
```

# java - 仅带有文件的扫描仪 VS 带有 FileReader 和文件的扫描仪

> ID：16159154
> 
> 赞同：1
> 
> 时间：2013-04-23T00:56:55.653
> 
> 标签：java, file, filereader

伙计们，我只是在徘徊这些行之间有什么区别

1.  `Scanner file = new Scanner(new FileReader(new File(filePath)));`
2.  `Scanner file = new Scanner(new File(filePath));`
3.  `Scanner file = new Scanner(new FileReader(filePath));`

当您将使用它们时，它们是什么类型的实例？还是他们都一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:14:15.020

他们都是一样的。构造`File`函数是为了方便。有时您会得到其他`Readers`（不是来自文件）或需要`FileReader`自己构造（为了指定编码），在这种情况下`Reader`构造函数很重要。

# java - Java：从正在运行的线程中为字符串设置赋值？

> ID：16159156
> 
> 赞同：0
> 
> 时间：2013-04-23T00:57:21.607
> 
> 标签：java, multithreading, assign

如何在 java 中的 run() 之外为 String 赋值。它正在启动新线程，运行并获取值，然后应该返回它。如果我尝试在线程中设置 string = value，它会告诉我需要将 String 更改为 final，这将不起作用

对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:19:11.230

> “它告诉我我需要将 String 更改为 final 这将无法正常工作”

似乎暗示我您的问题与线程无关，而是与封闭范围内的变量相关的（匿名）内部类访问。

我敢打赌你在做什么是这样的：

```
class Foo {
    public void foo() {
        String myString = "abc";

        Thread t = new Thread(
            new Runnable() {
                @Override
                public void run() {
                    myString = "xyz";
                }
            }
        };
        t.start();
        t.join();
        System.out.println("result :" + myString);
    }
} 
```

你会发现编译器抱怨“myString 应该是最终的”之类的东西。它与多线程无关。很简单，对于匿名内部类，它只能访问封闭范围内的最终变量。

鉴于 String 是不可变的，通过保留原始代码结构来解决的一种方法是，拥有一些最终的 String 持有者。字符串数组是一种可能的选择，或者您可以像这样简单地制作一个持有者：

```
public class StringHolder {
    String value;
    public StringHolder(String value) {
        this.value = value;
    }
    public void setValue(String value) {
        this.value = value;
    }
    public value getValue() {
        return this.value;
    }
} 
```

并将您的代码更改为以下内容：

```
class Foo {
    public void foo() {
        String myString = "abc";
        final StringHolder myStringHolder = new StringHolder(myString);

        Thread t = new Thread(
            new Runnable() {
                @Override
                public void run() {
                    myStringHolder.setValue("xyz");
                }
            }
        };
        t.start();
        t.join();
        System.out.println("result: " + myStringHolder.getValue());
    }
} 
```

但是，这不是从线程获取结果的推荐方式。

我强烈建议您更改代码结构，并研究 Future（和相关类）的用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:24:18.813

正如 Ron Dahlgren 评论的那样，正确的方法是使用[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)。这样做的技巧是将您的字符串分配给 a 的第一个元素`final String[] oneStringReference = new String[1];`

```
public class MyCallable implements Callable {
    private Object param1;
    private Object param2;
    private Object param3;

    public MyCallable(Object param1, Object param2, Object param3) {
        this.param1 = param1;
        this.param2 = param2;
        this.param3 = param3;
    }

    public Object Callable() {
        ...
    }
} 
```

# php - 通过 POST 方法提交 HTML 表单时未定义的索引

> ID：16159158
> 
> 赞同：2
> 
> 时间：2013-04-23T00:57:33.827
> 
> 标签：php, html, forms, indexing, undefined

我一直在寻找为什么这段代码不起作用。通过搜索具有相同问题的帖子多次调整代码。

问题：我的 php 文件似乎没有通过 POST 方法从简单的 HTML 表单（使用引导程序制作）中获取所需的值。我使用 issit 函数检查是否已单击提交按钮，然后我使用检查表单是否已完全填写。

请注意，我对 php 比较陌生。我希望我确实错过了一些东西，这不仅仅是一个简单的错字。

PHP 代码 (bootstrap/php/boeking.php)

```
<?php

//<!--debug-->

error_reporting(E_ALL);
ini_set('display_errors', '1');

//<!--connectie-->

mysql_connect("localhost","root","root") or die(mysql_error());
mysql_select_db("hota") or die(mysql_error());

//<!--boeking info verzenden-->

if(isset($_POST['send']))

{

if (isset($_POST['achternaam'])) 
{
   $anaam = $_POST['achternaam'];
   // do whatever here
}

if(isset($_POST['voornaam']))
{
$vnaam =  $_POST['voornaam'];

}

}

$anaam = mysql_real_escape_string($anaam);
$vnaam = mysql_real_escape_string($vnaam);

$boek = "INSERT INTO klant (achternaam , voornaam) VALUES ('{$anaam}', '{$vnaam}')";

mysql_query($boek);

?> 
```

HTML 代码：

```
<form id="newbook" method="POST" action="bootstrap/php/boeking.php" class="form-horizontal">
  <legend>Nieuwe boeking</legend>
   <div class="control-group">
      <label class="control-label" for="voornaam">Voornaam</label>
      <div class="controls">
        <input type="text" name="voornaam" id="voornaam" placeholder="Voornaam">
      </div>
   </div>
   <div class="control-group">
      <label class="control-label" for="achternaam">Achternaam</label>
      <div class="controls">
        <input type="text" name="achternaam" id="achternaam" placeholder="Achternaam">
      </div>
    </div>
   <div class="control-group">
      <div class="controls">
        <button type="submit" name="send" class="btn">Sign in</button>
      </div>
   </div>
  </form> 
```

提前致谢！

**更新：**

改变了我的 php 代码。

不再收到未定义的索引错误。
var_dump($vnaam); 和 var_dump($anaam); 确实表明字符串被传递给了 php，但在那之后，当查询被触发时，事情似乎并没有被发送到数据库。

这可能是我的查询中的问题吗？

（已经感谢提示：给按钮一个值并使用 var_dump）

这是我的新代码：

```
<?php

//<!--debug-->

error_reporting(E_ALL);
ini_set('display_errors', '1');

//<!--connectie-->

mysql_connect("localhost","root","root") or die(mysql_error());
mysql_select_db("hota") or die(mysql_error());

$anaam = '';
$vnaam = '';

if(!isset($_POST['send'])) { 

} 
 else
{

if (isset($_POST['achternaam'])) 
{
   $anaam = $_POST['achternaam'];
   // do whatever here

}

if(isset($_POST['voornaam']))
{
$vnaam =  $_POST['voornaam'];

}
var_dump($vnaam);
var_dump($anaam);

    $anaam = mysql_real_escape_string($anaam);
    $vnaam = mysql_real_escape_string($vnaam);

}

var_dump($vnaam);

$boek = "INSERT INTO klant (achternaam , voornaam) VALUES ('{$anaam}', '{$vnaam}')";

mysql_query($boek);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:59:25.837

# 编辑：

您需要给按钮一个*值*，否则`isset`将返回 false。

* * *

目前尚不清楚您是否仍然遇到未定义的索引错误，但如果您已经过去了，请尝试在语句之外声明您的变量`if`。

```
$anaam = '';
$vnaam = '';

if(isset($_POST['send']))    
{

    if (isset($_POST['achternaam'])) 
    {
       $anaam = $_POST['achternaam'];
       // do whatever here
    }

    if(isset($_POST['voornaam']))
    {
        $vnaam =  $_POST['voornaam'];    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:11:14.993

您可以通过使用 var_dump() 输出 $_POST 变量来进行调试，以查看是否有任何内容。

如果什么都没有，您确定您没有将浏览器重定向到您尝试查找值的页面吗？

如果设置了一些东西，那么 isset($_POST["send"]) 可能返回 false。

请使用 PDO 代替那些即将被弃用和坏的 mysql_ 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:33:12.883

你可以试试：

代替

```
<button type="submit" name="send" class="btn">Sign in</button> 
```

和

```
<input type="submit" name="send" value="Sign in" /> 
```

和

```
 if(isset($_POST['send']))

    {

    if (isset($_POST['achternaam'])) 
    {
       $anaam = $_POST['achternaam'];
       // do whatever here
    }

    if(isset($_POST['voornaam']))
    {
    $vnaam =  $_POST['voornaam'];

    }

    }

    $anaam = mysql_real_escape_string($anaam);
    $vnaam = mysql_real_escape_string($vnaam);
    [...] 
```

和

```
if(!isset($_POST['send'])) { 
    echo " No valid Post ";
} 
 else
{

if (isset($_POST['achternaam'])) 
{
   $anaam = $_POST['achternaam'];
   // do whatever here
}

if(isset($_POST['voornaam']))
{
$vnaam =  $_POST['voornaam'];

}

    $anaam = mysql_real_escape_string($anaam);
    $vnaam = mysql_real_escape_string($vnaam);
    [...]
} 
```

**可点击按钮**

```
<button type="submit" name="send" class="btn">Sign in</button> 
```

要指定单击按钮时应该发生什么，您可以使用例如侧面 onclick 事件处理程序。分配给事件处理程序属性的值，然后可以编写 JavaScript 代码。

在其他方面，这些按钮对于它们的传统对应物来说是同样的事情：没有 JavaScript，它们**完全没有功能**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T21:52:14.350

通过调整我在原始帖子中写的更新中看到的代码解决了未定义索引的问题。解决该问题后，由于主键的重复，查询拒绝触发并将数据放入数据库中。解决这个问题后，它就像一个魅力。这些信息是否足以帮助面临一些相同问题的人，还是我应该更彻底？

无论如何，非常感谢所有响应者！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T01:07:57.823

尝试这个....

```
if($_SERVER['REQUEST_METHOD'] == 'POST'){

   $voornaam = $_POST['voornaam'];
   $achternaam = $_POST['achternaam'];

   // Validate post input here

   // Please use PDO or MySQLi at least. It's easier than it looks...
   try {
       $conn = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass, array(PDO::ATTR_PERSISTENT => true));
       $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
   } catch(Exception $e) {
       echo 'Error connecting to the database.';
   }

     $stmt = $conn->prepare('INSERT INTO klant (achternaam, voornaam) VALUES (:achternaam, :voornaam)');
     $stmt->bindValue(':achternaam', $achternaam);
     $stmt->bindValue(':voornaam', $voornaam);
     $stmt->execute();
} 
```

# java - Is Using Packages in Types Good Convention?

> ID：16159159
> 
> 赞同：-1
> 
> 时间：2013-04-23T00:57:50.347
> 
> 标签：java, types, packages

Is it good convention, in Java, to use something like

```
 java.net.URL myUrl = new URL(...); 
```

or should I try my best to use an import and

```
 import java.net.URL;
 URL myUrl = new URL(...); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:02:22.437

主要是风格问题。您的 IDE 可能能够通过使用代码格式化程序从一种转换为另一种。

例外情况是在一个编译单元（即类）中使用两个或多个具有相同名称但来自不同包的类或接口。然后，您必须至少在一种情况下使用完全限定名称。从不同的包中导入两个具有相同名称的单一类型将导致编译时错误。

当然，您可以在 JLS 中找到详细信息：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html) - 关于包和导入

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1) - 单一导入和冲突

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html) - 关于名称

也就是说，我看不到在不需要时使用完全限定名称的任何额外价值，但它确实使代码混乱。

所以典型的约定是使用导入；一直使用完全限定名称的指数很少见。

# android - passing int value to string value in listview

> ID：16159160
> 
> 赞同：2
> 
> 时间：2013-04-23T00:57:58.533
> 
> 标签：android

```
 TextView location=(TextView)template_view.findViewById(R.id.tvlocation);
    TextView weather=(TextView)template_view.findViewById(R.id.tvweather);
    TextView temp=(TextView)template_view.findViewById(R.id.tvtemp);
    TextView dewpoint=(TextView)template_view.findViewById(R.id.tvdew);
    TextView humidity=(TextView)template_view.findViewById(R.id.tvhumidity);
    TextView windspeed=(TextView)template_view.findViewById(R.id.tvspeed);
    TextView winddir=(TextView)template_view.findViewById(R.id.tvdir);
    TextView windgust=(TextView)template_view.findViewById(R.id.tvgust);
    TextView pressure=(TextView)template_view.findViewById(R.id.tvcondition);
    TextView heatindex=(TextView)template_view.findViewById(R.id.tvheat);
    TextView visibility=(TextView)template_view.findViewById(R.id.tvvisibility);
    TextView precipitation=(TextView)template_view.findViewById(R.id.tvprecipitation);
    TextView dailyprecipitation=(TextView)template_view.findViewById(R.id.tvdaily);
    TextView sunrise=(TextView)template_view.findViewById(R.id.tvsunrise);
    TextView sunset=(TextView)template_view.findViewById(R.id.tvsunset);

    location.setText(Voicenames.get(position).getLocation());
    weather.setText(Voicenames.get(position).getWeather());
    //temp.setText(Voicenames.get(position).getTemp_c());
    //dewpoint.setText(Voicenames.get(position).getDewpoint_c());
    //windspeed.setText(Voicenames.get(position).getWind_kph());
    //windgust.setText(Voicenames.get(position).getWind_gust_kph());
    humidity.setText(Voicenames.get(position).getRelative_humidity());
    winddir.setText(Voicenames.get(position).getWind_dir());
    pressure.setText(Voicenames.get(position).getPressure_mb());
    heatindex.setText(Voicenames.get(position).getHeat_index_c());
    visibility.setText(Voicenames.get(position).getVisibility_km());
    precipitation.setText(Voicenames.get(position).getPrecipitation());
    dailyprecipitation.setText(Voicenames.get(position).getDaily_precipitation());
    sunrise.setText(Voicenames.get(position).getSunrise());
    sunset.setText(Voicenames.get(position).getSunset()); 
```

i have here a listview of string value and i put comment on int value i cant pass an int value for it how can i pass an int value to string so that the null pointer exception will not show anymore?JSONboject are used here

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:01:47.923

您可以使用：

```
String.valueOf(Voicenames.get(position).getWhatever()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T01:03:24.853

将这些 getter 包装在[String.valueOf](http://docs.oracle.com/javase/1.6.0/docs/api/java/lang/String.html#valueOf%28int%29)中。

```
temp.setText( String.valueOf(Voicenames.get(position).getTemp_c()) );
dewpoint.setText( String.valueOf(Voicenames.get(position).getDewpoint_c()) );
windspeed.setText( String.valueOf(Voicenames.get(position).getWind_kph()) );
windgust.setText( String.valueOf(Voicenames.get(position).getWind_gust_kph()) ); 
```

# javascript - javascript - jQuery mobile execute transition after function finish

> ID：16159162
> 
> 赞同：0
> 
> 时间：2013-04-23T00:58:12.800
> 
> 标签：javascript, jquery-mobile

I'm currently using the current bit of html for jQuery Mobile page transitions:

```
<a href="#page2" data-role="button" data-transition="flip" onclick="save()">page2</a> 
```

The `save()` function here is something that saves the `canvas` on the current page.

It seems however the `save()` function runs asynchronously along with the page transition and hence at times the page transitions without having managed to fully save the information I wanted it to.

Is there a way to completely finish a function before jQuery Mobile executes the page transition?

--**update**--

Here's a jsFiddle example for all to play around with:

[http://jsfiddle.net/nMR85/1291/](http://jsfiddle.net/nMR85/1291/)

(notice the `pagebeforechange` firing before the `save trigger` in the console)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:36:30.773

试试这个解决方案：

```
var transition = false;

function save() {

    if(!transition) {
        var callback = function() {
            transition = true;
            $("a").click();
        };

        // your aynchronous code which will trigger callback after it finishes executing

        return false;
    }
    else {
        transition = false;
    }
} 
```

此函数的第一次执行不会触发转换（`return false`阻止执行每个附加的下一个事件处理程序）。第二次执行会，但不会触发发送。当然，将`transition`变量放入全局上下文不是一个好习惯，但这只是一个如何处理这个问题的想法。

另外我认为在 onclick 里面（在 HTML 中）你应该有`return save()`.

* * *

根据提供的小提琴编辑：

玩小提琴我`a`稍微改变了元素：

```
<a id="goto_trigger" href="#p2" data-role="button" onclick="return save()">Go To Page 2 with return</a> 
```

脚本也应该是这样的：

```
$(document).bind('pagebeforechange', function(e, data) {
    console.log("pagebeforechange");
});

var transition = false;

function save() {
    if(!transition) {
        setTimeout(function(){
            alert("save trigger");
            transition = true;
            $("#goto_trigger").click();
        },3000);
        return false;
    }
}; 
```

现在它按预期工作。

# javascript - 内联 javascript 以避免 hackish 数据 API

> ID：16159165
> 
> 赞同：0
> 
> 时间：2013-04-23T00:58:34.820
> 
> 标签：javascript, model-view-controller, jqplot, jinja2

我需要在 jinja2 模板中使用 jqplot 渲染绘图。模板可以访问需要绘制的数据。我可以通过将数据嵌入到 html 中或通过某些 API 将数据传递给一些外部 javascript，但简单地包含几行 javascript 以在模板中呈现绘图似乎更实用且不那么 hack-ish。这样，绘图中涉及的所有内容都组合在一起。

有没有一些标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:03:26.063

我不确定你在问什么。将数据直接嵌入页面的标准方法是`<script>`在页面 HTML 中的标签内声明 javascript 数据结构。然后，您可以直接使用其他页面 javascript 引用数据，而无需从服务器获取数据：

```
<script>
var pageData = [
   {prop1: true, prop2: false, name: "foo"},
   {prop1: false, prop2: false, name: "whatever"},
];
</script> 
```

或者，如果你想给全局命名空间，你有一个地方可以放置其他全局变量：

```
<script>
var myNameSpace = myNameSpace || {};
myNameSpace.pageData = [
   {prop1: true, prop2: false, name: "foo"},
   {prop1: false, prop2: false, name: "whatever"},
];
</script> 
```

如果您的问题与此不同，请澄清。

# mvvm - 处理视图模型中的 Selectionchanged 和 currentselected 项目？

> ID：16159168
> 
> 赞同：0
> 
> 时间：2013-04-23T00:58:54.003
> 
> 标签：mvvm, mvvm-light, mvvm-toolkit

谁能提供一个示例，说明我如何处理在我的视图模型中的 longlistselector（或任何列表控件）中存储当前选定的项目。我似乎无法理解如何在视图模型中实现逻辑，使其远离页面代码隐藏中的事件处理程序！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:04:34.660

看这篇文章，如果你想通过绑定来调用事件[http://www.wiredprairie.us/blog/index.php/archives/1701](http://www.wiredprairie.us/blog/index.php/archives/1701)

如果您想将 SelectedItem 存储在 ViewModel 中，您的 xaml 应如下所示：

```
<ComboBox SelectedItem="{Binding MySelectedItem, Mode=TwoWay}"/> 
```

你的 ViewModel 应该是这样的：

```
public class ContactModel : ViewModelBase

public ContactModel()
{
    MySelectedItem = "";
}

   private string _myselecteditem
   public string MySelectedItem
    {
        get { return _myselecteditem; }
        set
        {
            _myselecteditem = value;
            RaisePropertyChanged(() => MySelectedItem);
        }
    }
} 
```

# c# - 通过 global.asax 从外部类获取 web.config 请求

> ID：16159169
> 
> 赞同：2
> 
> 时间：2013-04-23T00:59:09.217
> 
> 标签：c#, web-config, global-asax

我的 Web 应用程序对我在许多地方使用的某些过程使用外部类库。我想添加到我的库中的一件事是这个配置器类，它允许我加密我的 web.config 文件的一部分。

现在，我从 调用该类`global.asax`，它可以编译，并且智能感知没有任何问题，但是在执行 Web 应用程序时出现此错误：

> 请求在此上下文中不可用

我该如何解决？

```
public class configurator {
private Configuration _webconfig;
public const string DPAPI = "DataProtectionConfigurationProvider";

public Configuration webconfig {
    get { return _webconfig; } 
    set { _webconfig = webconfig; } 
}

public configurator() {
    webconfig = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath);
}

public void ProtectSection(string sectionName, string provider = DPAPI) {
    ConfigurationSection section = webconfig.GetSection(sectionName);

    if (section != null && !section.SectionInformation.IsProtected) {
        section.SectionInformation.ProtectSection(provider);
        webconfig.Save();
    }
}

public void EncryptConnString(string protectionMode) {
    ConfigurationSection section = webconfig.GetSection("connectionStrings");
    section.SectionInformation.ProtectSection(protectionMode);
    webconfig.Save();
}

public void DecryptConnString() {
    ConfigurationSection section = webconfig.GetSection("connectionStrings");
    section.SectionInformation.UnprotectSection();
    webconfig.Save();
}
} 
```

该类在 global.asax 中被称为第一件事*（对不起混合；我更喜欢 c#，但在我开始使用 c# 之前在 vb 中启动了另一个项目！）*：

```
<%@ Application Language="VB" %>
<script runat="server">
Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs on application startup - this will encrypt the web.config
    Dim thisconfigurator As mydll.configurator = New orsus.configurator()
    If ConfigurationManager.AppSettings("con") = "production" Then
        thisconfigurator.ProtectSection("AppSettings")
        thisconfigurator.ProtectSection("connectionStrings")
        thisconfigurator.ProtectSection("system.net/mailSettings/smtp")
    End If
End Sub
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:16:19.883

David Hoerster 是对的，`Request`还没有初始化，所以它会出错。如果您只需要访问根配置，则可以使用：

```
webconfig = WebConfigurationManager.OpenWebConfiguration("~"); 
```

# r - 带有 RcppArmadillo 的大型 SpMat 对象

> ID：16159174
> 
> 赞同：1
> 
> 时间：2013-04-23T00:59:28.920
> 
> 标签：r, sparse-matrix, rcpp, armadillo

我正在尝试学习和使用 Rcpp 和 RcppArmadillo 用于稀疏线性代数例程。

下面的代码是这里示例的改编：http: [//gallery.rcpp.org/articles/armadillo-sparse-matrix/](http://gallery.rcpp.org/articles/armadillo-sparse-matrix/)

```
code <- '
  S4 matx(x);
  IntegerVector Xd = matx.slot("Dim");
  IntegerVector Xi = matx.slot("i");
  IntegerVector Xp = matx.slot("p");
  NumericVector Xx = matx.slot("x");

  arma::sp_mat Xsp(Xd[0], Xd[1]);

  // create space for values, and copy
  arma::access::rw(Xsp.values) = arma::memory::acquire_chunked<double>(Xx.size() + 1);
  arma::arrayops::copy(arma::access::rwp(Xsp.values), 
             Xx.begin(), 
             Xx.size() + 1);

  // create space for row_indices, and copy -- so far in a lame loop
  arma::access::rw(Xsp.row_indices) = arma::memory::acquire_chunked<arma::uword>(Xx.size() + 1);
  for (int j=0; j<Xi.size(); j++)
    arma::access::rwp(Xsp.row_indices)[j] = Xi[j];

  // create space for col_ptrs, and copy -- so far in a lame loop
  arma::access::rw(Xsp.col_ptrs) = arma::memory::acquire_chunked<arma::uword>(Xp.size() + 1);
  for (int j=0; j<Xp.size(); j++)
      arma::access::rwp(Xsp.col_ptrs)[j] = Xp[j];

  // important: set the sentinel as well
  arma::access::rwp(Xsp.col_ptrs)[Xp.size()+1] = std::numeric_limits<arma::uword>::max();

  // set the number of non-zero elements
  arma::access::rw(Xsp.n_nonzero) = Xx.size();

  Rcout << "SpMat Xsp:\\n" << arma::dot(Xsp,Xsp) << std::endl;
'

norm2 <- cxxfunction(signature(x="Matrix"),
                     code,plugin="RcppArmadillo") 
```

当我使用 1e4 的向量时，一切正常：

```
> p <- 10000
> X <- Matrix(rnorm(p),sparse=TRUE)
> norm2(X)
SpMat Xsp:
9997.14
NULL 
```

但是，当我使用长度为 1e5 的向量时，会产生错误

```
> p <- 100000
> X <- Matrix(rnorm(p),sparse=TRUE)
> norm2(X)

error: SpMat::init(): requested size is too large

Error: 
> 
```

我似乎无法弄清楚我做错了什么。任何指针将不胜感激。

============== 更多信息 ==============

问题似乎在于尺寸 >= 2^16=65536

以下作品：

```
> m <- 1000
> n <- 65535
> nnz <- 10000
> iind <- sample.int(m,nnz,replace=TRUE)
> jind <- sample.int(n,nnz,replace=TRUE)
> xval <- rnorm(nnz)
> X <- sparseMatrix(i=iind,j=jind,x=xval,dims=c(m,n))
> norm2(X)
SpMat Xsp:
10029.8
NULL 
```

以下不起作用：

```
> m <- 1000
> n <- 65536
> nnz <- 10000
> iind <- sample.int(m,nnz,replace=TRUE)
> jind <- sample.int(n,nnz,replace=TRUE)
> xval <- rnorm(nnz)
> X <- sparseMatrix(i=iind,j=jind,x=xval,dims=c(m,n))
> norm2(X)

error: SpMat::init(): requested size is too large

Error: 
> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:19:45.780

你的矩阵看起来很奇怪。通过说

```
 Matrix(rnorm(p),sparse=TRUE) 
```

你最终得到 apx 1 矩阵，尽管稀疏。如果我只分配 10 行或列，那么事情就可以了。

```
R> p <- 100000
R> X <- Matrix(rnorm(p),nrow=10,sparse=TRUE)
R> dim(X)
[1]    10 10000
R> norm2(X)
SpMat Xsp:
100832
NULL
R> 
```

所以我认为你只需要一个更好的稀疏矩阵来使用——转换代码和犰狳的稀疏矩阵类型都很好。

**2013-04-30 更新**：这实际上是一个犰狳错误，刚刚在上游修复。新的 RcppArmadillo 版本 0.3.810.2 现在在 SVN 中，应该很快就会迁移到 CRAN。您不再需要定义`ARMA_64BIT_WORD`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:44:37.543

我遇到了这个：[http](http://arma.sourceforge.net/docs.html#config_hpp) ://arma.sourceforge.net/docs.html#config_hpp 。

解决方案是通过在犰狳的头文件上方添加一行来设置 64 位整数选项：

```
#define ARMA_64BIT_WORD 
```

我把它放在 [R root]/lib/R/library/RcppArmadillo/include/RcppArmadilloConfig.h

我曾尝试为 cxxfunction 使用“includes”参数，但我认为这个定义语句必须在包含语句之上，

```
#include RcppArmadillo.h 
```

在cpp代码中。我不知道内联包的 cxxfunction 是否允许这样做。

修改 RcppArmadilloConfig.h 后，我现在可以声明一个大于 2^16 的矩阵。

```
> m <- 1000
> n <- 65536+1000
> nnz <- 10000
> iind <- sample.int(m,nnz,replace=TRUE)
> jind <- sample.int(n,nnz,replace=TRUE)
> xval <- rnorm(nnz)
> X <- sparseMatrix(i=iind,j=jind,x=xval,dims=c(m,n))
> norm2(X)
SpMat Xsp:
10218.8
NULL
> 
```

# java - Java: Concurrent reads on an InputStream

> ID：16159183
> 
> 赞同：6
> 
> 时间：2013-04-23T01:01:25.310
> 
> 标签：java, performance, concurrency, inputstream

Been looking around for a little while now and I'm a bit confused on this issue. I want to be able to take an input stream and read it concurrently in segments. The segments don't interact with each other they are just values to be inserted or updated in a database from an uploaded file. Is it possible to read an input stream concurrently by setting a segment size and then just skipping forward before spinning off a new thread to handle the conversion and insert/update?

Essentially the file is a list of ID's (one ID per line), although it would be preferable if I could specify a separator. Some files can be huge so I would like to process and convert the data to be into segments so that after inserting/updating to the database the JVM memory can be freed up. Is this possible? And if so are there any libraries out there that do this already?

Cheers and thanks in advance,

Alexei Blue.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T01:17:38.867

一个好的方法可能是让一个读取器读取块，然后将每个块从线程池交给工作线程。鉴于这些将被插入到数据库中，与读取输入相比，插入将是迄今为止较慢的部分，因此单个线程应该足以读取。

下面是一个将每一行的处理从`System.in`工作线程移交给工作线程的示例。如果您在单个事务中执行大量插入，则数据库插入的性能要好得多，因此传递一组比如说 1000 行将比像示例中那样传递单行更好。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Main {
    public static class Worker implements Runnable {
        private final String line;

        public Worker(String line) {
            this.line = line;
        }

        @Override
        public void run() {
            // Process line here.
            System.out.println("Processing line: " + line);
        }
    }

    public static void main(String[] args) throws IOException {
        // Create worker thread pool.
        ExecutorService service = Executors.newFixedThreadPool(4);

        BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
        String line;

        // Read each line and hand it off to a worker thread for processing.
        while ((line = buffer.readLine()) != null) {
            service.execute(new Worker(line));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:09:41.493

首先，要从不同的偏移量开始同时读取文件，您需要*随机访问*文件，这意味着从任何位置读取文件。Java 允许使用 java.in 中的 RandomAccessFile 或 java.nio 中的 SeekableByteChannel：

[在 Java 文件中间写入字节的最佳方法](https://stackoverflow.com/questions/181408/best-way-to-write-bytes-in-the-middle-of-a-file-in-java)

[http://docs.oracle.com/javase/tutorial/essential/io/rafs.html](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)

我认为出于速度的原因，您会更喜欢 java.nio。 [Java NIO FileChannel 与 FileOutputstream 性能/实用性](https://stackoverflow.com/questions/1605332/java-nio-filechannel-versus-fileoutputstream-performance-usefulness)

现在您知道如何从任何位置读取，但您需要同时执行此操作。使用相同的文件访问对象是不可能的，因为它们在文件中占有位置。因此，您需要与线程一样多的文件访问对象。既然您是在阅读而不是在写作，那应该没问题。

现在您知道如何从许多不同的偏移量同时读取同一个文件。

但想想表现。尽管您只有一个磁盘驱动器和随机读取（许多线程访问同一个文件）的线程数，但性能比顺序读取（一个线程读取一个文件）慢得多。即使是突袭 0 或 1 - 也没关系。顺序读取总是快得多。因此，在您的情况下，我建议您在一个线程中读取文件，并为其他线程提供来自该读取线程的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:19:26.177

我认为您不能同时读取 InputStream 。这就是合约定义读取、重置和标记的原因——这个想法是流在内部跟踪已读取的内容和未读取的内容。

如果您正在读取文件，只需打开多个流。您可以使用[skip()](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#skip%28long%29)方法将标记向前移动以供其他线程避免重复行处理。 [BufferedReader](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)也可能有所帮助，因为它提供[逐行](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)阅读。

# c# - 在 datagridview 单元格中的组合框上应用事件。(DatagridViewColoumnComboBox)

> ID：16159186
> 
> 赞同：-1
> 
> 时间：2013-04-23T01:01:44.377
> 
> 标签：c#, winforms, events, datagridview, combobox

我正在用 c# 开发窗口应用程序。我想在组合框 e 上应用“SelectedValuechanged”事件，这个组合框在 datagridview 内。我无法访问 datagridviewcomboboxcoloumn 中的每个组合框。请帮助我，我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:22:43.243

您可以处理[DataGridView.EditingControlShowing 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.editingcontrolshowing.aspx)。

代码示例：

```
 private void dataGridViewReadings_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        ComboBox combobox = e.Control as ComboBox;
        if (combobox != null)
        {
            combobox.SelectionChanged -= combobox_SelectionChanged;

            combobox.SelectionChanged += combobox_SelectionChanged;
        }
    } 
```

# javascript - Angular.js 的 Node.js CORS 会话 cookie

> ID：16159188
> 
> 赞同：8
> 
> 时间：2013-04-23T01:01:49.093
> 
> 标签：javascript, node.js, angularjs, cors

*我正在使用带有 CORS 和 Angular.js 的 Node.js 进行简单的登录。*

那就是 ---也在`client.example.com`进行**POST**`api.example.com/login`，成功时也会返回会话 cookie，`client.example.com`并且也可以访问**GET**服务，如`api.example.com/secret`受会话 cookie 保护的服务。

*发出不受会话 cookie 保护的 GET 请求不是问题。*

> 最终，这里的目标是[**使用 CORS 和本地策略（**](https://stackoverflow.com/questions/15286324/authenticate-client-side-app-too-rest-api-using-cors-with-local-stradegy)即用户名和密码）向 REST api 验证客户端应用程序，即使上述约定是不可能的。

*我找不到可以从任何地方学习的可行方法——为我指明正确的方向？*

***奖励：****展示一个工作示例。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:57:14.513

您的问题很简单，浏览器不允许将在一个域中设置的 cookie 发送到另一个域。
这是为了安全。如果您的会话 cookie 可以从任何域访问，那么任何站点都可以执行 csrf（根据定义，您想要执行 csrf - 使用来自不同站点的一个站点的会话）。

有一些方法可以解决它，但在应用它们时应该小心。

*   最简单的方法是使用Jsonp登录并进行跨域请求，jsonp基本上打破了cookies跨域策略。

*   `client.example.com`您可以在页面中嵌入 iFrame `api.example.com`，父级和 iFrame 可以使用[post message](http://javascript.info/tutorial/cross-window-messaging-with-postmessage)进行通信。

这两种方式都对 csrf 请求开放（就其本质而言），因此您应该格外小心您允许`client.example.com`访问的信息。

# c++ - 套接字编程 - 奇怪的行为

> ID：16159195
> 
> 赞同：-1
> 
> 时间：2013-04-23T01:02:47.610
> 
> 标签：c++, sockets, http, posix

我正在尝试构建一个 HTTP 客户端。到目前为止，我有一些东西需要一个 IP 地址并打印 http 响应，没问题。但是，当我尝试接受该响应并将其放入字符串中时，程序会挂起。

所以这有效：

```
write(sockfd, sendBuff, strlen(sendBuff));
string s = "";

while((n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0)
{
    recvBuff[n] = 0;
    if(fputs(recvBuff, stdout) == EOF)
    {
        printf("\n Error : Fputs error\n");
    }
} 
```

而这并没有：

```
write(sockfd, sendBuff, strlen(sendBuff));
string s = "";

while((n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0)
{
    recvBuff[n] = 0;
    s.append(recvBuff, strlen(recvBuff));
} 
```

我真的很想将整个 http 响应放入一个字符串中，因为我有一个解析整个响应的对象。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:16:05.763

您在连续循环中从套接字读取，直到套接字出错或断开连接，这是处理 HTTP 时完全错误的做法。一方面，服务器可能不会在响应结束时关闭连接，这会使您的代码死锁。

HTTP 消息具有结构，但您完全忽略了这一事实。要**正确**读取 HTTP 响应，您需要遵循[RFC 2616 第 4.4 节](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)中概述的规则，以了解响应的结构，该结构控制如何读取响应以及如何知道响应何时完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:16:06.153

您是否考虑过使用字符串流来存储输出？您可以执行以下操作：

```
write(sockfd, sendBuff, strlen(sendBuff));
stringstream s;
s.str(""); // resets the internal string

while((n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0)
{
    recvBuff[n] = 0;
    s << recvBuff;
} 
```

然后，当您去处理生成的字符串时，您可以使用以下方法通过内部字符串缓冲区访问它：

```
s.str(); 
```

当我必须建立一个字符串以从不同的部分进行处理时，我已经使用过很多次了。你的旅费可能会改变。编译并自己尝试。我希望它有所帮助。

# java - VideoView它没有响应，Eclipse Android

> ID：16159196
> 
> 赞同：0
> 
> 时间：2013-04-23T01:03:04.620
> 
> 标签：java, android, android-videoview

我正在编写一个应用程序，上面有 4 个视频，当我播放第一个视频时一切正常，但是当我尝试播放第二个视频时，它说应用程序已意外停止，我使用 2 中的一些代码活动。我没有发现任何错误，是我的第一个程序，非常感谢你提前我把代码放在下面：

布局 XML：primeraventana.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
 android:id="@+id/textview1"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="@string/Escala_Uno" />

<VideoView
 android:id="@+id/videoView1"
 android:layout_width="match_parent"
 android:layout_height="254dp" />

<Button
 android:id="@+id/boton3"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="@string/Menú_Principal" />

</LinearLayout> 
```

Java 类：primeraventana.java

```
package gabrielrojas.com;

import android.os.Bundle;
import android.app.Activity;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.TextView; 
import android.widget.VideoView;
import android.net.Uri;

public class primeraventana extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.primeraventana);

VideoView mVideoView = (VideoView) findViewById(R.id.videoView1);
mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
+"/"+R.raw.test));
mVideoView.setMediaController(new MediaController(this));
mVideoView.requestFocus();  
mVideoView.start();     
mVideoView.isPlaying();  
mVideoView.stopPlayback();  
mVideoView.clearFocus();

TextView text = (TextView) findViewById(R.id.textview1);
Button boton3 = (Button) findViewById(R.id.boton3);

text.setText(R.string.Escala_Uno);

boton3.setText(R.string.MenÃº_Principal);

boton3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
          finish();

}}); }} 
```

布局 XML :: segundaventana.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView 
android:id="@+id/textview2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/Escala_Dos"/>

 <VideoView
 android:id="@+id/videoView2"
 android:layout_width="match_parent"
 android:layout_height="254dp" />

 <Button 
 android:id="@+id/boton4"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="@string/Menú_Principal"/>

 </LinearLayout> 
```

Java 类 :: segundaventana.java

```
package gabrielrojas.com;

import android.os.Bundle;
import android.app.Activity;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.TextView; 
import android.widget.VideoView;
import android.net.Uri;

public class segundaventana extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.primeraventana);

VideoView mVideoView = (VideoView) findViewById(R.id.videoView2);
mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
+"/"+R.raw.test));
mVideoView.setMediaController(new MediaController(this));
mVideoView.requestFocus();  
mVideoView.start();     
mVideoView.isPlaying();  
mVideoView.stopPlayback();  
mVideoView.clearFocus();

TextView text = (TextView) findViewById(R.id.textview2);
Button boton4 = (Button) findViewById(R.id.boton4);

text.setText(R.string.Escala_Dos);

boton4.setText(R.string.MenÃº_Principal);

boton4.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
          finish();

}}); }} 
```

AndroidManifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="gabrielrojas.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".PruebaNumero3"
        android:label="@string/title_activity_prueba_numero3" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".primeraventana"/>
    <activity android:name=".segundaventana" />
    <activity android:name=".terceraventana" />
    <activity android:name=".cuartaventana" />
    <activity android:name=".VideoActivity"
              android:label="@string/app_name"
              android:screenOrientation="landscape"
              android:theme="@android:style/Theme.NoTitleBar"
              android:noHistory="true"/>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:34:28.167

你的问题出在这里：

```
Setting the layout:

public class segundaventana extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.primeraventana);-------------------------> Here lies your problem 
```

改成：

```
public class segundaventana extends Activity  {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.segundaventana);---------------------->this layout contains your videoview2 
```

试试看再说..

# heroku - Wicked_PDF 不呈现在生产中通过 Asset Sync 托管的 HTML 和 CSS 资产

> ID：16159200
> 
> 赞同：4
> 
> 时间：2013-04-23T01:03:39.677
> 
> 标签：heroku, amazon-s3, asset-pipeline, wkhtmltopdf, wicked-pdf

我在使用 Wicked_PDF 呈现 PDF 时遇到问题。我正在使用 Amazon S3 和 CloudFront 托管我的所有资产管道资源，并且在开发过程中生成的东西很好；但是在生产中，HTML 和 CSS 资产不会在生成的 PDF 中呈现。

我在 MAC OSX 10.8.2、wkhtmltopdf 0.9.9 以及当前版本的 Wicked_PDF 和 wkhtmltopdf-heroku 上运行 Rails 3.2.11、Ruby 1.9.3p327。

以下是所有相关信息：

**Heroku 日志：**

```
2013-04-21T14:13:19.482011+00:00 app[web.1]: Completed 302 Found in 212ms (ActiveRecord: 205.6ms)
2013-04-21T14:13:19.584108+00:00 app[web.1]: Started GET "/office/download/7" for ip_address at 2013-04-21 14:13:19 +0000
2013-04-21T14:13:21.551581+00:00 app[web.1]: Processing by OfficesController#show_pdf as HTML
2013-04-21T14:13:21.551581+00:00 app[web.1]: ***************WICKED***************
2013-04-21T14:13:21.551581+00:00 app[web.1]:   Parameters: {"office_id"=>"7"}
2013-04-21T14:13:21.551581+00:00 app[web.1]:   Rendered appointments/forms/_office.pdf.html.erb within layouts/pdf.html (13.6ms)
2013-04-21T14:13:21.551581+00:00 app[web.1]:   Rendered text template (0.0ms)
2013-04-21T14:13:21.551581+00:00 app[web.1]: Sent data Office.pdf (42.2ms)
2013-04-21T14:13:21.551581+00:00 app[web.1]: Completed 200 OK in 1961ms (Views: 41.9ms | ActiveRecord: 7.8ms)
2013-04-21T14:13:21.554211+00:00 heroku[router]: at=info method=GET path=/office/download/7         
host=www.foobar.com fwd="ip_address" dyno=web.1 connect=1ms service=1971ms status=200 bytes=22019 
```

**路线：**

```
# => Route that generates the PDF

get "/office/download/:office_id" => 'offices#show_pdf' 
```

**控制器：**

```
# => app/controllers/offices_controller.rb

def show_pdf
  @office = Office.find_by_id(params[:office_id])
  abrv = @office.abrv
  partial = "appointments/forms/_#{abrv}"
  @format = "pdf"

  respond_to do |format|
    format.pdf do
      render :pdf => "#{@office.name}",
             :template => "#{partial}.pdf.html.erb",
             :layout => "pdf.html",
             :page_size => "A4",
             :encoding => "UTF-8",
             :show_as_html => params[:debug].present?
     end
  end

end 
```

**看法：**

```
# => app/views/offices/index

<div>
  # List of all offices
</div>

# PDF partials for each office

<%= render 'appointments/forms/office.pdf.html.erb' %>
<%= render 'appointments/forms/office_1.pdf.html.erb' %>
... 
```

**PDF模板：**

```
# => app/views/appointments/forms/_office.pdf.html.erb:

<% if @format != 'pdf' %>
  <%= stylesheet_link_tag 'office' # => .css.scss.erb %>
<% else %>
  <%= wicked_pdf_stylesheet_link_tag 'office' # => .css.scss.erb %>
<% end %>

<div class="pdf_styling">
  <p>Bar</p>
</div> 
```

**CSS：**

```
# => app/assets/stylesheets/office.css.scss.erb

.pdf_styling {
  background-image: url('https://s3.amazonaws.com/foo/assets/pdf_background_image.jpg');
  width: 100%;
  height: 100%;

  p {
    position: absolute;
    left: 100px;
    right: 100px;
  }
} 
```

**Wicked_PDF 初始化程序：**

```
# => config/initializers/wicked_pdf.rb

WICKED_PDF = {
  :wkhtmltopdf => (Rails.env.test? || Rails.env.development? ? '/usr/local/bin/wkhtmltopdf' : Rails.root.join('bin', 'wkhtmltopdf-amd64').to_s),
  :exe_path => (Rails.env.test? || Rails.env.development? ? '/usr/local/bin/ ' : Rails.root.join('vendor','bin', 'wkhtmltopdf-amd64').to_s)
} 
```

**宝石文件：**

```
# PDF Gem
gem 'wicked_pdf'

# PDF to HTML utility
gem 'wkhtmltopdf-binary'

# PDF on heroku
group :production do
  gem "wkhtmltopdf-heroku", :git => 'git://github.com/camdez/wkhtmltopdf-heroku.git'
  gem 'thin'
end

# Asset Pipeline Optimization
gem "asset_sync" 
```

同样，在开发中一切正常，但我只是在生产中得到一个空白的 PDF 页面。日志中没有引发任何错误。这可能是由于测功机太少的问题吗？

诚然，我对这一切都是一个 n00b；对不起。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-16T13:20:52.720

在 Heroku 中部署到生产环境时，我遇到了同样的问题。

两个可能需要解决的领域...首先，每个 Javascript 或 CSS 资源文件都必须指定为绝对 URL，而不仅仅是您在模板代码中指定的那个。如果您在其他地方引用了任何 JS/CSS 文件，也必须以绝对形式指定这些文件。因此，您还需要查看您的 pdf 布局文件

其次（这就是我在 Heroku 上的诀窍），我最终不得不在 config/application.rb 中指定我的每个资源，如下所示：

```
config.assets.precompile += ['blueprint/screen.css', 'jquery.timepicker.css', 'pdf.css', 'jquery.ui.datepicker.js', 'pdf.js', 'jquery.autosize.js', 'jquery.timepicker.js'] 
```

我不确定为什么需要这第二步，但没有它，Heroku 上没有任何工作：我得到了相同的空白 PDF，没有您报告的错误，即使认为一切都在开发中工作。我的经验是，如果存在资源问题，wkhtmltopdf 会静默失败。我在[这里](http://www.nubyrubyrailstales.com/2013/06/wickedpdf-wkhtmltopdf-and-herokua.html)写了关于这个问题的博客，还推送了对 WickedPDF README 文档的更新，这可能会有所帮助。

# java - Cannot create table in test (Hibernate & H2)

> ID：16159201
> 
> 赞同：2
> 
> 时间：2013-04-23T01:03:40.897
> 
> 标签：java, mysql, hibernate, jpa-2.0, h2

I have an image mapping table that maps images to the various items that have images. This works as expected when I make the entries in the database by hand, and am retrieving, however when I try to do tests they fail with the below errors. I am using hibernate with h2 for test, and hibernate with mysql for dev.

Here are the errors the table creation is getting.

```
ERROR - Unsuccessful: create table ImageMapping (image_mapping_id integer not null, category_id integer, image_id integer, product_id integer, product_item_id integer, product_option_id integer generated by default as identity, primary key (product_option_id, image_id), unique (image_id))
ERROR - Attempt to define a second primary key; SQL statement:
create table ImageMapping (image_mapping_id integer not null, category_id integer, image_id integer, product_id integer, product_item_id integer, product_option_id integer generated by default as identity, primary key (product_option_id, image_id), unique (image_id)) [90017-168] 
```

ImageMapping entity.

```
@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
@Entity
@Table(name="ImageMapping")
public class ImageMapping {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "image_mapping_id")
    private int imageMappingId;

    @Column(name="product_option_id")
    private int productOptionId;

    @Column(name="product_item_id")
    private int productItemId;

    @Column(name="product_id")
    private int productId;

    @Column(name="image_id")
    private int imageId;

    @Column(name="category_id")
    private int categoryId; 
```

Since the other field the error is mentioning is the product_option_id I am including that entity.

```
@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
@Entity
@Table(name="ProductOptions")
public class ProductOptions implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "product_option_id")
    private int productOptionId;

    @JoinTable(
            name="ImageMapping",
            joinColumns = @JoinColumn(name = "product_option_id"),
            inverseJoinColumns = @JoinColumn(name = "image_id")
    )
    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private Set<Image> productOptionImageGroup;

    @JoinColumn(name = "image_id")
    @OneToOne
    private Image optionImage;

    @Column(name = "product_option_description")
    private String productOptionDescription; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:04:49.820

您似乎错误地使用了 JoinTable 注释。您实际上创建了两次 ImageMapping 表：一次用于您的实体，一次用于 ProductOptions 的 JoinTable 注释。

查看这篇文章，了解连接表注释的含义：[JPA "@JoinTable" 注释](https://stackoverflow.com/questions/5478328/jpa-jointable-annotation)

他给出了一个很好的例子来说明如何使用它。我不完全是您的域对象的用途，ImageMapping 中似乎发生了很多事情。但是使用 JoinTable 的一种方案可能是

```
Table: Image
id      integer
data    blob
name    varchar

Table: ProductOption
id      integer
desc    varchar
partnum varchar

Table: Image_Option
image_id     integer foreign key
prod_opt_id  integer foreign key 
```

所以在这个例子中，我有 Image 和 ProductOption 的 Hibernate 实体，并且表 Image_Option 只会出现在 JoinTable 注释中。

# vb.net - 列表框中的多个变量

> ID：16159202
> 
> 赞同：0
> 
> 时间：2013-04-23T01:03:57.060
> 
> 标签：vb.net, visual-studio-2010

好的，所以我的组合框中的选择在我的列表框中创建了不同的列表。我现在要做的是让我在列表框中的选择给我一个变量，以便我可以使用该变量计算其他东西。（我怎么能如果 SeleceIndex=0 然后）我尝试了各种尝试避免编写更多私人潜艇并运行它们。

我正在使用 VB.net 2010，出于某种奇怪的原因，SelectedItem 没有给我一个数字。是否应该期望我使用不同的短语来查找用户选择的列表框中的哪个变量，或者我必须把它吸起来并制作私人潜艇？（即它看起来像这样，但这只是一种变体）。

```
intticket = cbx1.SelectedIndex
inttickets = lstbx1.SelectedItem 
If intticket = 0 Then
    SeasonSeats()
ElseIf intticket = 1 Then   
    SingleGameSeats() 
End If  
If (intticket = 0) AndAlso (inttickets = 0) Then   
    intseatgame = intseaboxseats      
ElseIf (intticket = 0) AndAlso (inttickets = 1) Then    
    intseatgame = intsealowerdeck     
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:00:04.203

我认为您正在寻找[ListBox.SelectedIndex 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)- 这将返回所选项目的基于 0 的索引。

您还可以将第二个 If 块移到第一个中（这更像是一种风格变化）：

```
intticket = cbx1.SelectedIndex
inttickets = lstbx1.SelectedIndex

If intticket = 0 Then
    SeasonSeats()
    if (inttickets = 0) Then
        intseatgame = intseaboxseats
    ElseIf (inttickets = 1) Then
        intseatgame = intsealowerdeck
    End If
ElseIf intticket = 1 Then   
    SingleGameSeats() 
End If 
```

# java - Why does this Java program terminate despite that apparently it shouldn't (and didn't)?

> ID：16159203
> 
> 赞同：208
> 
> 时间：2013-04-23T01:03:58.693
> 
> 标签：java, concurrency, java-memory-model, memory-visibility

A sensitive operation in my lab today went completely wrong. An actuator on an electron microscope went over its boundary, and after a chain of events I lost $12 million of equipment. I've narrowed down over 40K lines in the faulty module to this:

```
import java.util.*;

class A {
    static Point currentPos = new Point(1,2);
    static class Point {
        int x;
        int y;
        Point(int x, int y) {
            this.x = x;
            this.y = y;
        }
    }
    public static void main(String[] args) {
        new Thread() {
            void f(Point p) {
                synchronized(this) {}
                if (p.x+1 != p.y) {
                    System.out.println(p.x+" "+p.y);
                    System.exit(1);
                }
            }
            @Override
            public void run() {
                while (currentPos == null);
                while (true)
                    f(currentPos);
            }
        }.start();
        while (true)
            currentPos = new Point(currentPos.x+1, currentPos.y+1);
    }
} 
```

Some samples of the output I'm getting:

```
$ java A
145281 145282
$ java A
141373 141374
$ java A
49251 49252
$ java A
47007 47008
$ java A
47427 47428
$ java A
154800 154801
$ java A
34822 34823
$ java A
127271 127272
$ java A
63650 63651 
```

Since there isn't any floating point arithmetic here, and we all know signed integers behave well on overflow in Java, I'd think there's nothing wrong with this code. However, despite the output indicating that the program didn't reach the exit condition, it reached the exit condition (it was both reached **and** not reached?). Why?

* * *

I've noticed this doesn't happen in some environments. I'm on [OpenJDK](http://en.wikipedia.org/wiki/OpenJDK) 6 on 64-bit Linux.

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-05-01T17:29:10.083

> 显然，在读取它之前不会发生对 currentPos 的写入，但我不明白这可能是什么问题。

`currentPos = new Point(currentPos.x+1, currentPos.y+1);`做了一些事情，包括将默认值写入`x`和`y`(0)，然后在构造函数中写入它们的初始值。由于您的对象未安全发布，编译器/JVM 可以自由地重新排序这 4 个写操作。

因此，从读取线程的角度来看，`x`使用其新值但`y`默认值为 0 进行读取是合法的执行。当您到达`println`语句时（顺便说一句，它是同步的，因此确实会影响读取操作），变量具有它们的初始值并且程序会打印预期值。

标记`currentPos`为`volatile`将确保安全发布，因为您的对象实际上是不可变的 - 如果在您的实际用例中，对象在构造后发生了变异，`volatile`那么保证是不够的，您可能会再次看到不一致的对象。

或者，您可以使`Point`不可变的，这也将确保安全发布，即使不使用`volatile`. 要实现不变性，您只需要标记`x`和`y`最终。

作为旁注，正如已经提到`synchronized(this) {}`的，JVM 可以将其视为无操作（我知道您将其包括在内以重现行为）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-23T02:06:45.193

由于`currentPos`正在线程之外进行更改，因此应将其标记为`volatile`：

```
static volatile Point currentPos = new Point(1,2); 
```

如果没有 volatile，则线程不能保证读入对主线程中正在进行的 currentPos 的更新。因此，继续为 currentPos 写入新值，但出于性能原因，线程继续使用以前的缓存版本。由于只有一个线程会修改 currentPos，因此您可以在没有锁的情况下逃脱，这将提高性能。

如果您在线程中仅读取一次值以用于比较和随后的显示，结果看起来会大不相同。当我执行以下操作时，`x`始终显示为`1`并在某个大整数`y`之间变化。`0`我认为在没有关键字的情况下，此时它的行为有些不确定，`volatile`并且代码的 JIT 编译可能会导致它像这样运行。此外，如果我注释掉空`synchronized(this) {}`块，那么代码也可以工作，我怀疑这是因为锁定导致足够的延迟，`currentPos`并且它的字段被重新读取而不是从缓存中使用。

```
int x = p.x + 1;
int y = p.y;

if (x != y) {
    System.out.println(x+" "+y);
    System.exit(1);
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-08-15T17:54:00.287

你有普通的内存，'currentpos' 引用和 Point 对象及其背后的字段，在 2 个线程之间共享，没有同步。因此，在主线程中发生在此内存上的写入与创建线程中的读取（称为 T）之间没有定义的顺序。

主线程正在执行以下写入（忽略点的初始设置，将导致 px 和 py 具有默认值）：

*   到像素
*   到py
*   到当前位置

因为这些写入在同步/障碍方面没有什么特别之处，所以运行时可以自由地允许 T 线程看到它们以任何顺序发生（当然，主线程总是看到按照程序顺序排列的写入和读取），并发生在 T 中读取之间的任何时间点。

所以 T 正在做：

1.  读取 currentpos 到 p
2.  读取 px 和 py（以任意顺序）
3.  比较，取分支
4.  读取 px 和 py （任意顺序）并调用 System.out.println

鉴于 main 中的写入和 T 中的读取之间没有顺序关系，显然有几种方法可以产生结果，因为 T 可能会在写入 currentpos.y 或 currentpos.x*之前看到 main 对 currentpos 的写入：*

1.  它首先读取 currentpos.x，在 x 写入发生之前 - 获取 0，然后在 y 写入发生之前读取 currentpos.y - 获取 0。将 evals 与 true 进行比较。写入对 T 可见。调用 System.out.println。
2.  它在 x 写入发生后首先读取 currentpos.x，然后在 y 写入发生之前读取 currentpos.y - 得到 0。将 evals 与 true 进行比较。写入对 T... 等变得可见。
3.  它首先读取 currentpos.y，在 y 写入发生之前 (0)，然后在 x 写入之后读取 currentpos.x，评估结果为 true。等等

等等......这里有许多数据竞争。

我怀疑这里有缺陷的假设是认为从这一行产生的写入在执行它的线程的程序顺序中的所有线程中都是可见的：

```
currentPos = new Point(currentPos.x+1, currentPos.y+1); 
```

Java 没有做出这样的保证（这对性能来说很糟糕）。如果您的程序需要相对于其他线程中的读取有保证的写入顺序，则必须添加更多内容。其他人建议将 x,y 字段设置为最终字段，或者将 currentpos 设置为 volatile。

*   如果您将 x,y 字段设置为 final，那么 Java 保证在所有线程中，在构造函数返回之前可以看到写入它们的值。因此，由于对 currentpos 的赋值是在构造函数之后，因此可以保证 T 线程以正确的顺序看到写入。
*   如果您使 currentpos 可变，则 Java 保证这是一个同步点，它将与其他同步点进行全排序。在 main 中，对 x 和 y 的写入必须发生在对 currentpos 的写入之前，然后在另一个线程中对 currentpos 的任何读取都必须看到之前发生的 x、y 的写入。

使用 final 的优点是它使字段不可变，因此允许缓存值。使用 volatile 会导致 currentpos 的每次写入和读取同步，这可能会损害性能。

有关详细信息，请参阅 Java 语言规范的第 17 章：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-17.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)

（最初的答案假设一个较弱的内存模型，因为我不确定 JLS 保证 volatile 是否足够。编辑答案以反映来自 assylias 的评论，指出 Java 模型更强 - 发生之前是可传递的 - 所以 currentpos 上的 volatile 也足够了）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-15T21:19:14.267

您可以使用对象来同步写入和读取。否则，正如其他人之前所说，对 currentPos 的写入将发生在两次读取 p.x+1 和 py 的中间

```
new Thread() {
    void f(Point p) {
        if (p.x+1 != p.y) {
            System.out.println(p.x+" "+p.y);
            System.exit(1);
        }
    }
    @Override
    public void run() {
        while (currentPos == null);
        while (true)
            f(currentPos);
    }
}.start();
Object sem = new Object();
while (true) {
    synchronized(sem) {
        currentPos = new Point(currentPos.x+1, currentPos.y+1);
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-08-15T18:10:46.567

您正在访问 currentPos 两次，并且不保证在这两次访问之间不会更新它。

例如：

1.  x = 10, y = 11
2.  工作线程将 px 评估为 10
3.  主线程执行更新，现在 x = 11 和 y = 12
4.  工作线程将 py 评估为 12
5.  工作线程注意到 10+1 != 12，所以打印并退出。

您本质上是在比较*两个不同的*点。

请注意，即使将 currentPos 设置为 volatile 也不会保护您免受此影响，因为它是工作线程的两次单独读取。

添加一个

```
boolean IsValid() { return x+1 == y; } 
```

方法到你的积分类。这将确保在检查 x+1 == y 时只使用一个 currentPos 值。

# c++ - Is there a way to define Variadic template macro?

> ID：16159204
> 
> 赞同：-5
> 
> 时间：2013-04-23T01:04:05.480
> 
> 标签：c++, c++11, variadic-templates

Is there a way to define variadic template macro just like variadic macro?

For example, if define variadic macro like:

```
#define PRINT_STRING(fmtId, ...) { \
    CString fmt; \
    fmt.FormatString(fmt, ##__VA_ARGS__); \
    cout << fmt << endl; } 
```

Could we define something like:

```
#define PARSE_FUNCTION(functionName, typename...) \
    std::function<int(typename...)> m_##functionName(){ \
        return (std::function<int(typename...)>) functionName; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:01:02.947

`__VA_ARGS__`可以多次使用，所以你可以写：

```
#define PARSE_FUNCTION(functionName, ...) \
    std::function<int(__VA_ARGS__)> m_##functionName() { \
        return std::function<int(__VA_ARGS__)>(functionName); \
    } 
```

正在发生的只是简单的文本替换，预处理器不会检查参数是否用于模板。

实际上，任何函数对象都可以隐式转换为 a `std::function`，因此可以省略强制转换。此外，如果`functionName`引用函数指针，可以很容易地推断出确切的类型，即您根本不需要可变参数宏：

```
#define PARSE_FUNCTION(functionName) \
    auto m_##functionName() \
        -> std::function<std::remove_pointer<decltype(functionName)>::type> \
    { \
        return functionName; \
    } 
```

# android - Android usage of Intent

> ID：16159209
> 
> 赞同：0
> 
> 时间：2013-04-23T01:04:41.857
> 
> 标签：android, android-intent, toast

In my main Activity's `onCreate` method, I've started a `Intent` using the following code:

```
Intent intent = new Intent(this, NetworkHandler.class);
startService(intent); 
```

I've created another class named NetworkHandler which extends the `IntentService`

```
public class NetworkHandler extends IntentService {
    public NetworkHandler() {
        super("HTTPRequest");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        String url = "http://vlm1.uta.edu/~zhangzhong/questions.json";
        Toast.makeText(intent.getComponent(), "Debug!", Toast.LENGTH_LONG).show();
        DefaultHttpClient client = new DefaultHttpClient(); 
```

The problem is I'm trying to use the `Toast` in the `NetworkHandler` class. I'd like to pass the main activity object to the first parameter of `makeText` method of `Toast`. How can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:20:00.210

您可以传递`getApplicationContext()`或`this`作为 的第一个参数`makeText()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:14:58.577

你需要的是一个上下文。幸运的是，IntentService 是一个上下文，所以只需使用`this`!

# c++ - 使用 UNICODE_STRING_SIMPLE 时 ICU 字符不匹配

> ID：16159214
> 
> 赞同：0
> 
> 时间：2013-04-23T01:05:30.220
> 
> 标签：c++, unicode, icu

我需要了解使用 '\uhhhh' 时 UNICODE_STRING_SIMPLE 宏的行为

我有以下代码：

```
cout<<"Char print out for À"<<endl;
SCAUString us = UNICODE_STRING_SIMPLE ("À");
cout<<"us.countChar32()="<<us.countChar32()<<endl;
for (int i=0; i<us.countChar32(); i++)
  cout<<(int)us.charAt(i)<<" "; 
```

输出：us.countChar32()=2 195 8364

但下面给出了不同的答案：\u00C0 是 À

```
cout<<"\nChar print out for \\u00C0"<<endl;
us = UNICODE_STRING_SIMPLE ("\u00C0");
cout<<"us.countChar32()="<<us.countChar32()<<endl;
for (int i=0; i<us.countChar32(); i++)
  cout<<(int)us.charAt(i)<<" "; 
```

这里的输出是：us.length()=1 192

谁能解释为什么会有差异？

我使用 ustream.h 写入文件：

```
testFile<<"5:"<< UNICODE_STRING_SIMPLE ("À"); // needs ustream.h
testFile<<endl;
testFile<<"6:"<< UNICODE_STRING_SIMPLE ("\u00C0"); // needs ustream.h
testFile<<endl; 
```

testFile 是一个流。当我打开时，我看到 5:À 但 6 是错误的：6:' 我在 Visual Studio 中打开了文本文件，这就是 VS 显示给我的实际字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:05:41.777

什么是`SCAUString`？

（`\u`单反斜杠）由您的编译器解释。也许编译器不认为目标代码页与 ICU 期望的相同？

尝试这个：

`printf("%x or %x?\n", (int)'À', (int)'\u00C0');`

# javascript - JavaScript信用卡津贴不起作用

> ID：16159219
> 
> 赞同：0
> 
> 时间：2013-04-23T01:06:23.853
> 
> 标签：javascript

**当我运行以下代码时：**

```
var creditCheck = function(income) {
    if (income >= 100) {
        return console.log("You earn a lot of money! You qualify for a credit card.");
    }
    else {
        return console.log("Alas you do not qualify for a credit card. Capitalism is cruel like that.");
    }
};
creditCheck("75");
creditCheck("125");
creditCheck("100"); 
```

**我得到：**

```
Alas you do not qualify for a credit card. Capitalism is cruel like that.
You earn a lot of money! You qualify for a credit card.
You earn a lot of money! You qualify for a credit card.
Alas you do not qualify for a credit card. Capitalism is cruel like that. 
```

为什么变量没有给出正确的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:07:57.673

不要使用

```
creditCheck("75"); 
```

相反，使用

```
creditCheck(75); 
```

使用引号，您将一个字符串传递给该方法。你想传入一个数字。但是，在这种情况下，这并不重要，因为 JavaScript 会自动转换它。您可能在问题中遗漏了一些东西；请发布您的完整代码和输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:10:02.037

您在问题中发布的输出不是 JavaScript 控制台的输出，而是[codeacademy.com 编辑器](http://www.codecademy.com/courses/javascript-beginner-en-6LzGd/2/4#)的输出，因此我们无法理解问题所在。

你应该完全改变你的问题。但是，使用此代码可以正常工作。

```
var creditCheck = function(income) {
    if (income >= 100) {
        return ("You earn a lot of money! You qualify for a credit card.");
    }
    else {
        return ("Alas you do not qualify for a credit card. Capitalism is cruel like that.");
    }
};
creditCheck("75");
creditCheck("125");
creditCheck("100"); 
```

# c# - How to send child objects to an MVC view in a list of parent objects

> ID：16159221
> 
> 赞同：0
> 
> 时间：2013-04-23T01:06:32.443
> 
> 标签：c#, model-view-controller, inheritance, collections

say I have these classes:

```
public class Animal
{

}

public class Elephant : Animal
{
  public string Name { get; set; }
} 
```

and I have a controller method

```
 public SubmitElephants()
{
    var elephants = new List<Animal>();

    elephants.Add(new Elephant { Name = "Timmy" };
    elephants.Add(new Elephant { Name = "Michael" };

return View("DisplayElephants", elephants);

} 
```

The DisplayElephants view looks like:

```
@model IList<Elephant>

@foreach(var elephant in Model)
{
  <div>@elephant.Name</div>
} 
```

So if I run this code I will get the error:

The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[Animal]', but this dictionary requires a model item of type 'System.Collections.Generic.IList`1[Elephant]'

So no I'm NOT wanting to change my list to be `var elephants = new List<Elephant>();`

What I'm wanting to know given I have a list of Animals that I know contains only Elephants how can I from the controller pass this to a view which is specific to Elephants?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:21:16.370

AFAIK 这是不可能的。从某种意义上说，您正在尝试的与协方差相反。

[本文](http://msdn.microsoft.com/en-IN/library/ee207183.aspx)介绍协方差和逆变。

总之，你可以这样做 -

```
IEnumerable<Elephant> elephants = new List<Elephant>();
IEnumerable<Animal> animals = elephants; 
```

你实际上想要相反的方式。

另请注意，并非所有通用集合都是协变的。[这篇文章](http://msdn.microsoft.com/en-IN/library/dd233059.aspx)告诉我们在 C# 中协变的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:45:56.983

更改此行：

```
var elephants = new List<Animal>(); 
```

至：

```
var elephants = new List<Elephant>(); 
```

有关为什么会这样的更多信息，请参阅@Srikanth 的回答。

# java - JdbcOdbcDriver.finalize() 行：不可用

> ID：16159225
> 
> 赞同：1
> 
> 时间：2013-04-23T01:06:52.830
> 
> 标签：java

我正在使用 eclipse 来构建 Maven 项目。每当我尝试调试时，都会出现一个标题为“JdbcOdbcDriver.finalize() 行：不可用”的选项卡，并在选项卡中显示以下消息“未找到源”，并显示“编辑源查找路径”按钮。

谁能解释我应该怎么做才能解决这个问题？

PSthis问题阻止我对任何问题执行任何调试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:37:11.250

听起来您可能在 JdbcOdbcDriver.finalize() 中设置了断点，或者您可能设置了异常断点（捕获或未捕获），并且在 JdbcOdbcDriver.finalize() 中引发了异常。

Eclipse 正在尝试提供一个编辑器来显示断点。由于您没有编写 JdbcOdbcDriver.java，并且在您的 IDE 中没有它的源代码，因此 eclipse 会告诉您通过运行/调试启动设置添加它。您看到“行：不可用”的原因是因为 JdbcOdbcDriver.class 是在未启用调试的情况下（由 Oracle）编译的，因此源代码行号不可用于调试。

您可以查看是否设置了断点，然后在调试透视图的断点视图中取消选中或删除它，或者您可以简单地选择 Run -> Resume 以允许程序继续通过断点。

**编辑**

您可以在 Eclipse 首选项中全局禁用未捕获的异常错误。下面的截图来自 eclipse 4.2。

![没有异常暂停的调试首选项](https://i.stack.imgur.com/MWCpe.png)

# ruby - RVM 说它无法打开 openssl.cnf

> ID：16159226
> 
> 赞同：1
> 
> 时间：2013-04-23T01:06:53.720
> 
> 标签：ruby, macos, openssl, rvm, osx-mountain-lion

我正在使用 rvm 设置我的新 MacBook（10.8.3），我一直得到这个：

```
WARNING: can't open config file: /Users/dan/.rvm/etc/openssl/openssl.cnf 
```

我查看了那个目录，没有看到 openssl.cnf。我尝试在许多不同的配置中重新安装 rvm，并且尝试运行`rvm pkg install openssl`，但它给了我相同的警告。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T13:45:57.453

对于 Windows，您设置系统环境变量

添加变量： OPENSSL_CONF 然后指向您的 openssl.cnf 文件所在的目录

这至少解决了我对该错误消息的问题。

但对于 MAC，变量可能会从其他地方访问。我不确定 MAC 是否使用相同的术语。

# python - 在 Python 3.3 中使用 .format() 方法对文本进行格式化

> ID：16159228
> 
> 赞同：12
> 
> 时间：2013-04-23T01:06:55.997
> 
> 标签：python, python-3.x

我是 Python 新手，正在尝试处理一些示例脚本。我正在做一个简单的收银机类型的事情，但我想证明或右对齐输出，使其看起来像这样：

```
subTotal = 24.95
tax = subTotal * 0.0725
total = subTotal + tax
paid = 30
change = paid-total
print("The subtotal was: $",subTotal)
print("The tax was: $",tax)
print("The total was: $",total)
print("The customer paid: $",paid)
print("Change due: $",change) 
```

我知道我可以用更少的打印语句来简化它，但我只是想让它更容易看到我想要做什么。

我希望它输出类似这样的内容，请注意美元金额都是对齐的，并且 $ 和美元金额之间没有空格。我不知道如何做这两件事。

```
The subtotal was:   $24.95
The tax was:         $1.81
The total was:      $26.76
The customer paid:  $30.00
Change due:          $3.24 
```

我尝试阅读有关格式方法的 Python 文档，但我没有看到任何关于可以使用哪些格式说明符来执行某些操作的示例。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T01:26:41.350

金额可以这样形成：

```
"${:.2f}".format(amount) 
```

您可以为字符串添加填充，例如宽度为 20：

```
"{:20s}".format(mystring) 
```

您可以右对齐字符串，例如宽度为 7：

```
"{:>7s}".format(mystring) 
```

把所有这些放在一起：

```
s = "The subtotal was:"
a = 24.95
print("{:20s}{:>7s}".format(s, "${.2f}".format(a)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T01:26:20.870

如果您知道文本和数字的最大大小，您可以这样做

```
val_str = '${:.2f}'.format(val)
print('{:<18} {:>6}'.format(name+':', val_str)) 
```

如果事先不知道这些，就会变得更加棘手。这是一种方法，假设`names`和`values`是列表：

```
value_format = '${:.2f}'.format
name_format = '{}:'.format
values_fmt = [value_format(val) for val in values]
names_fmt = [name_format(name) for name in names]
max_value_len = max(len(x) for x in values_fmt)
max_name_len = max(len(x) for x in names_fmt)
for name, val in zip(names_fmt, values_fmt):
    print('{:<{namelen}} {:>{vallen}}'.format(name, val,
        namelen=max_name_len, vallen=max_value_len)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T01:31:47.783

```
subTotal = 24.95
tax = subTotal * 0.0725
total = subTotal + tax 
paid = 30
change = paid-total

text  = [ 
"The subtotal was:", "The tax was:", "The total was:",
"The customer paid:", "Change due:"
]
value = [ subTotal, tax, total, paid, change ]

for t,v in zip(text, value):
    print "{0:<25} ${1:.2f}".format(t, v) 
```

**输出**

```
The subtotal was:         $24.95
The tax was:              $1.81
The total was:            $26.76
The customer paid:        $30.00
Change due:               $3.24 
```

您还可以像这样获得所需的间距：

```
maxLen = max(len(t) for t in text)  
for t,v in zip(text, value):
    print str("{0:<" + str(maxLen) + "} ${1:.2f}").format(t, v) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T01:33:11.633

见[http://docs.python.org/2/library/string.html#grammar-token-width](http://docs.python.org/2/library/string.html#grammar-token-width)

```
def myformat(name, value):
    return "{:<18} {:>6}".format(name, "${:.2f}".format(value))
print(myformat("The subtotal was:", subTotal))
print(myformat("The tax was:", tax))
print(myformat("The total was:", total))
print(myformat("The customer paid:", paid))
print(myformat("Change due:", change)) 
```

输出：

```
The subtotal was:  $24.95
The tax was:        $1.81
The total was:     $26.76
The customer paid: $30.00
Change due:         $3.24 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T01:43:25.293

```
subTotal = 24.95
tax = subTotal * 0.0725
total = subTotal + tax
paid = 30
change = paid-total
print("The subtotal was: %8s" % ("$%.2f" % subTotal))
print("The tax was:      %8s" % ("$%.2f" % tax))
print("The total was:    %8s" % ("$%.2f" % total))
print("The customer paid:%8s" % ("$%.2f" % paid))
print("Change due:       %8s" % ("$%.2f" % change)) 
```

# jquery - 灯箱点击外部图片关闭

> ID：16159229
> 
> 赞同：4
> 
> 时间：2013-04-23T01:07:13.380
> 
> 标签：jquery

我问过作者，但他说让我通过 Github 添加我想要的贡献，我不知道该怎么做，因为我对 JavaScript 不太了解。希望大家能帮忙。:)

这是插件的链接：http: [//brutaldesign.github.io/swipebox/](http://brutaldesign.github.io/swipebox/)

基本上，如何通过单击图像外部的任何位置来关闭灯箱？就像大多数灯箱的功能一样？

这个灯箱完全符合我的要求：http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/) 我不使用那个灯箱，因为它没有我需要的滑动功能。

我知道它必须与以下功能有关

```
.click 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T01:21:06.670

（*更新了更多活动和更好的活动委托*）

尝试将以下脚本添加到您的页面

```
<script>
    $(function(){
      $(document.body)
          .on('click touchend','#swipebox-slider .current img', function(e){
              return false;
          })
          .on('click touchend','#swipebox-slider .current', function(e){
              $('#swipebox-close').trigger('click');
          });
    });
</script> 
```

# java - 当我从另一个类更新时，为什么“javax.swing.JProgressBar”会在旧值之上显示新值？

> ID：16159230
> 
> 赞同：2
> 
> 时间：2013-04-23T01:07:13.823
> 
> 标签：java, swing, jprogressbar

问题：

```
ClassA
    static JProgressBar progressBar;
ClassB
    ClassA.progressBar.setValue(0);
    ...
    ClassA.progressBar.setValue(10);
    ...
    ClassA.progressBar.setValue(20); 
```

进度条显示 0，然后在 0 上显示 10，然后在 10 上显示 20。

代码：

```
public class ClassA
{
    static JProgressBar progressBar;
    public ClassA()
    {
        ...
        progressBar = new JProgressBar(0, 100);
        progressBar.setStringPainted(true);
        ...
    }
    public static void main(String[] args)
    {
        ClassA cA = new ClassA();
        cA.something();
    }
    public void something()
    {
        ...
        panel.add(progressBar, BorderLayout.CENTER);
        ...
    }
    ...
}
public class ClassB
{
    public void something()
    {
        ...
        ClassA.progressBar.setValue(0);
        ClassA.progressBar.update(ClassA.progressBar.getGraphics());
        ...
    }
    ...
} 
```

我还将进度条添加到面板中。正如上面提到的，它显示进度条和百分比，但它显示每个值在另一个之上。

**编辑：** 问题与此非常相似：[Java Swing revalidate() vs repaint()](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)。然而，而不是

> 旧内容实际上仍然可见（尽管被新内容遮盖了）

JPanel 有问题，我的 JProgressBar 有问题。我试过了`ClassA.progressBar.revalidate();`，`ClassA.progressBar.repaint();`但除了 之外没有任何效果`ClassA.progressBar.update(ClassA.progressBar.getGraphics());`，正如上面提到的，它再次在旧值之上显示新值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:49:25.857

你不需要这一行：

```
ClassA.progressBar.update(ClassA.progressBar.getGraphics()); 
```

调用`setValue()`将更新进度条 UI。

否则，您在此处发布的代码没有任何问题。问题必须在别处。这是基于您的代码的 SSCCE，它按预期工作，没有油漆问题。

```
public class ClassA {
    static JProgressBar progressBar;
    private ClassB classb;
    private JPanel panel;

    public ClassA() {
        progressBar = new JProgressBar(0, 100);
        progressBar.setStringPainted(true);

        classb = new ClassB();

        JButton button = new JButton("test");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                classb.something();
            }
        });

        panel = new JPanel();
        panel.add(button);
        panel.add(progressBar, BorderLayout.CENTER);
        JFrame frame = new JFrame();
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new ClassA();
    }
}

public class ClassB
{
    private int index;

    public void something()
    {
        ClassA.progressBar.setValue(++index);
        //ClassA.progressBar.update(ClassA.progressBar.getGraphics());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T06:44:21.843

亚瑟，你的代码片段没有显示 ClassB.something 是如何被调用的。大多数 Swing 都不是线程安全的，除非 javadoc 明确声明，否则 Swing ui 组件需要从 Event Dispatch Thread 进行修改。通常，如果 Swing 组件是线程安全的，它会在 javadoc 中显式调用它。我查看了[JProgressBar javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JProgressBar.html)并没有看到任何免责声明，实际上它[警告](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html#threading)说 Swing 不是线程安全的。
如果从其他线程访问 Swing 组件，可能会导致应用程序行为异常。由于线程不正确，我已经看到组件呈现奇怪且不完整的情况。如果 ClassA 要在构造函数中构造和修改摆动组件，则构造函数应该从事件调度线程中执行。

```
public class ClassA 
{
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new ClassA());
    }
} 
```

# java - 由于 ActionListener，JComboBox 不刷新/更新

> ID：16159233
> 
> 赞同：0
> 
> 时间：2013-04-23T01:07:20.243
> 
> 标签：java, swing, actionlistener, jcombobox

所以这是我的问题：我目前正在使用两个 JComboBoxes。第二个 JComboBox 应该根据第一个 JComboBox 中选择的内容进行更新。在这种情况下，第一个 JComboBox 包含学习专业的首字母：（ART、CSC、MTH、PHY 等），第二个 JComboBox 应该更新为该特定专业存在的所有可能的班级编号。所以我拥有的文件阅读器能够读取所有信息并相应地填写两个列表。当从第一个 JComboBox 中选择特定专业时，我遇到的第一个问题是进行第二次 JComboBox 更新。我通过向第一个 JComboBox 添加一个 actionListener 来解决这个问题。但现在我有另一个问题..：

**问题：**当我单击第一个 JComboBox 时，有一个应该有的所有专业的列表，但是当我单击其中一个专业时，它不会改变。第二个 JComboBox 会适当地改变，就好像我选择了正确的一样，但第一个 JComboBox 不会改变。它只是停留在“ART”（按字母顺序排列在列表中的第一个）。

我从第一个 JComboBox 中选择其他选项之一：http: [//imageshack.us/photo/my-images/845/problem2t.jpg/](http://imageshack.us/photo/my-images/845/problem2t.jpg/)

它适当地改变了第二个 JComboBox 但第一个没有改变。 [http://imageshack.us/photo/my-images/189/problem1n.jpg/](http://imageshack.us/photo/my-images/189/problem1n.jpg/)

这是我的代码： 首先我有设置图形的构造函数。然后我有我的动作监听器（JComboBox 是最后一个 elseif 语句），然后我有设置 JComboBoxes 的方法。

```
public Student(){
        //Window Attributes
        setSize(WINDOW_WIDTH,WINDOW_HEIGHT);
        setTitle("Academic Major Selection");

        //Center the Program Window
        Dimension dim = new Dimension(toolkit.getScreenSize());
        setLocation((int)dim.getWidth()/2 - WINDOW_WIDTH/2,(int)dim.getHeight()/2 - WINDOW_HEIGHT/2);

        //do not allow resizing of window
        setResizable(false);

        //create arrays for classes
        //input file reader here
        String[] subjectArray = {"CSC","MTH","ENG","THE","PHY"};
        String[] numberArray = {"100","200","300","400","500"};

        //create boxes for dropdown
        subjectBox = new JComboBox(subjectArray);
        subjectBox.addActionListener(this);
        numberBox = new JComboBox(numberArray);

        //creates a panel for our dropdown panels
        selectPanel = new JPanel();
        selectPanel.setLayout(new GridLayout(1,2,25,0));
        selectPanel.add(subjectBox);
        selectPanel.add(numberBox);
            .
            .
            .//trimmed out some excess stuff
            .
        try {
            setDropDownBoxes();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //show the window
        setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        //What button is pressed?
        .
            .
            .//Trimmed out some extra stuff
            .
            //This will equal true when something is selected from the first JComboBox
        }else if(((String)subjectBox.getSelectedItem()).length() == 3){
            System.out.println("New Subject Selected");
            try {
                setDropDownBoxes();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }

    }

    void setDropDownBoxes() throws IOException{
        int j=0;

        String[][] someArrayTwoD = studentWriter.fetchClassLists();

        String[] subjectArray = new String[someArrayTwoD.length];
        while(j<someArrayTwoD.length){
            subjectArray[j] = someArrayTwoD[j][0];
            j++;
        }

        String[] numberArray = new String[someArrayTwoD[subjectBox.getSelectedIndex()].length-1];
        for(int i=0; i<numberArray.length; i++){
            numberArray[i] = someArrayTwoD[subjectBox.getSelectedIndex()][i+1];
        }   

        selectPanel.remove(subjectBox);
        selectPanel.remove(numberBox);

        subjectBox = new JComboBox(subjectArray);
        numberBox = new JComboBox(numberArray);

        selectPanel.add(subjectBox);
        selectPanel.add(numberBox);
        selectPanel.validate();
        subjectBox.addActionListener(this);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:13:42.143

您的代码的一个问题是您`==`用于检查 String 等价性，而不是使用 the`equals(...)`或`equalsIgnoreCase(...)`方法：

```
if(e.getActionCommand() == addButton.getText()){
    //....
} 
```

了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if (fu.equals("bar")) {
  // do something
} 
```

或者，

```
if (fu.equalsIgnoreCase("bar")) {
  // do something
} 
```

或者更好的是，摆脱你的“开关板”ActionListener，不要让你的 GUI 类实现监听器接口（通常是一个坏主意），而是给你的 JButtons 匿名内部类监听器。

# apache2 - Permission denied by web2py with Apache2 on CentOS

> ID：16159234
> 
> 赞同：0
> 
> 时间：2013-04-23T01:07:36.630
> 
> 标签：apache2, web2py, centos6

I am installing web2py with Apache2 httpd server on CentOS 6, and with https. I installed httpd server, enabled mod_wsgi, mod_ssl, and configured the ssl certs/keys. After I restarted the httpd service, I can see the WSGIDaemonProcess running, all applications directories under web2py granted with read/write permissions to web2py group which is the user and group I chose to run the WSGI process. However, I tried the admin app, the welcome app, both gave me 403 permission denied Apache error page (instead of web2py error page).

The following is the segment of httpd config file for the VirtualHost:

```
NameVirtualHost *:443
WSGIDaemonProcess web2py user=web2py group=web2py display-name=%{GROUP}

<VirtualHost *:443>
  ServerName myserver_ipaddress
  ServerAlias myserver_hostname
  WSGIProcessGroup web2py
  WSGIScriptAlias / /home/web2py/web2py/wsgihandler.py

  <Directory /home/web2py/web2py>
    AllowOverride None
    Order Allow,Deny
    Deny from all
    ExpiresDefault "access plus 1 month"
    <Files wsgihandler.py>
      Allow from all
    </Files>
  </Directory>

  AliasMatch ^/([^/]+)/static/(.*) \
       /home/web2py/web2py/applications/$1/static/$2
  <Directory /home/web2py/web2py/applications/*/static/>
    Order Allow,Deny
    Allow from all
  </Directory>

  <Location /admin>
    Allow from all
  </Location>

  ScriptAlias /cgi/ "/home/web2py/web2py/cgi-bin/"
  <Directory "/home/web2py/web2py/cgi-bin/">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
  </Directory>

  <LocationMatch ^/([^/]+)/appadmin>
  Allow from all
  </LocationMatch>

  CustomLog /home/web2py/var/log/apache2/access.log common
  ErrorLog /home/web2py/var/log/apache2/error.log
</VirtualHost> 
```

Does anybody have an idea where I did wrong? or the problem may be somewhere else?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:55:08.533

最后，问题解决了。不过这有点愚蠢。httpd 进程由用户 apache 运行，站点根目录为 /home/web2py/web2py，由用户 web2py（web2py 组）拥有。用户 apache 属于 web2py 组，但是，默认情况下 /home/web2py 目录不可按组写入或执行。

```
chmod 775 /home/web2py 
```

解决了这个问题。

# c# - Add two variable of an object in a list

> ID：16159235
> 
> 赞同：1
> 
> 时间：2013-04-23T01:07:43.913
> 
> 标签：c#, .net, linq

I have a list of objet having "ean" and "eanAlt" properties.

This works:

```
List<string> eanList = new List<string>();
eanList.AddRange(toGroup.Where(a => a.ean.Length > 0).Select(b => b.ean).ToArray());
eanList.AddRange(toGroup.Where(a => a.eanAlt.Length > 0).Select(b => b.eanAlt).ToArray()); 
```

But how can I do it in one query? (I suppose with `SelectMany`, but can't find how)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:14:10.493

要使用[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)，您需要先转换`ean`并`eanAlt`列出：

```
 eanList = toGroup
       .SelectMany(a => new List<string> { a.ean, a.alt })
       .Where(s => !string.IsNullOrEmpty(s))
       .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T01:13:30.460

您的代码可以`ean`同时`eanAlt`选择`toGroup`. 我认为要获得完全相同的行为，您必须执行以下操作：

```
eanList.AddRange(
    from a in toGroup
    from b in new[] { a.ean, a.eanAlt }
    where b.Length > 0
    select b); 
```

`ToArray`这里不需要注释。

或者，如果您更喜欢流利的语法，您可以这样做（尽管我认为这会使发生的事情变得不太清楚）：

```
eanList.AddRange(toGroup.SelectMany(a => new[] { a.ean, a.eanAlt }).Where(b => b.Length > 0)); 
```

# c++ - how to intentionally leak non-pointer heap allocated object

> ID：16159236
> 
> 赞同：0
> 
> 时间：2013-04-23T01:07:45.030
> 
> 标签：c++, memory-leaks, heap-memory

say I have class Foo which I allocate on the heap via the 'new' keyword. Say Foo has non-pointer data member Bar. Bar, although non-pointer, is itself on the heap since it is a part of Foo. It will be properly deallocated when I delete my Foo object - even if I declare my own Foo destructor that doesn't (wont, and shouldn't) delete Bar.

1.  Is there some term for data members like Bar which, although on the heap, isn't created via the "new" keyword? For objects not stack allocated but destructor-calling handled automagically.

2.  Is Foo's default destructor still created even though the programmer has declared and defined one, that executes afterward?

3.  If not, how does Bar's destructor get called?

4.  Given the standards rule that says "the committee shall make no rule that prevents C++ programmers from shooting themselves in the foot," if I WANTED to create a memory leak on a non-pointer data member, whether stack or heap allocated, how would I do so? (Note: I'm not actually trying to do this)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:13:22.707

1）这不是魔术，也没有术语。当您为 分配空间时`Foo`，`sizeof` `Foo`包括其所有数据成员的大小，并且这些成员通常沿 4 字节边界进行字节对齐。调用时`delete`，分配对象前面的簿记标头将保存分配的大小，其中包括`Bar`数据成员。

2）你是什么意思？如果用户创建了默认构造函数，那么为什么编译器会生成默认构造函数？

3)`Bar`被释放，因为它是单个分配的一部分`Foo`。

4) 您需要手动修改围绕分配的簿记结构。这会诱使标准内存管理器认为您的分配比实际要小。这样做会导致未定义的行为并可能导致崩溃。

你所有的问题确实表明你不知道什么`new`或`delete`在做什么。我建议阅读如何构建一个简单的 C++ 内存管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:58:45.887

首先，C++ 标准没有堆。它具有免费存储和自动存储。

让我们看一个与您的理论相匹配的具体示例：

```
struct Bar { int x[100]; }
struct Foo {
  Bar bq;
  int x;
  ~Foo() {};
}; 
```

`Bar bq`是任何`Foo`实例的成员变量。当您在免费商店中创建 a`Foo`时，其成员变量是`Foo`. 如果`Foo`是标准布局（如上），则基本上可以保证其成员变量分配在线性缓冲区中。在某些理论编译器中，非标准布局对象可以具有奇异的布局：但实际上它们没有。

使用上述`Foo`方法，不会创建默认析构函数。但是，对于 的每个析构函数`Foo`，内部的对象都会在 的析构函数体运行`Foo`后被`Foo`销毁。请注意，销毁指针没有任何作用——我的意思是`Foo`.

这不是因为调用了“自动创建的默认析构函数”——默认析构函数是`~Foo() {}`，与您定义的相同。相反，代码在析构函数完成后自动运行。

`Bar`不调用make 的析构函数的唯一方法是不调用数据成员`Bar`。有几种方法可以做到这一点，包括创建一个大小和对齐的`Bar`数据缓冲区，然后放置.`new``Bar`

但是，虽然不会调用析构函数，但`Bar`存在于其中的内存将在回收存在时由空闲存储`Foo` `Bar`回收。

如果你想`Bar`泄露，你会`Foo`被阻止返回免费商店。但是，没有办法`Foo`从免费存储中分配 a 并将*部分*返回到`Foo`免费存储 - 您只能返回全部或不返回。您可以选择使用这些属性实现您自己的免费存储或您自己的手动堆，没有什么能阻止您。您甚至可以覆盖`new`and`delete`以便当有人执行 a`Foo* foo = new Foo()`和执行`delete foo`.

但是，`Foo`占用的内存量不在您的控制范围内，也不是每个成员变量的相对位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:18:13.583

好吧，您可以让操作员超载`delete`什么也不做，但这确实会严重影响您自己。

我想如果你真的想要你会让删除操作符调用一种内存管理器，它本身有一个指针，而不是释放内存，作为池模式的一部分或类似的东西。这位经理最后还要负责收拾烂摊子。但这真的值得吗？

编辑：对不起，我没有阅读“非指针”部分，我想这不会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T01:18:37.710

1) 这种行为对所有数据成员都是通用的——它们包含在类中，因此无论在何处创建类的实例都存在。（指针数据成员本身也在类中，即使它们在堆的单独部分中跟踪指向的数据。）就术语而言，您可以说它们是使用面向对象的“组合”作为不同的“按值存储”从指向或引用的数据。

2) 数据成员有自己的构造函数，它们在类构造函数的主体之前运行。您可以使用初始化列表 ala 为数据成员构造函数提供参数`Class() : data_member(value) { }`。稍后，类的默认析构函数在数据成员的默认析构函数之前运行——这就是为什么拥有一个空的析构函数不会影响数据成员的销毁。

3）它自己的默认析构函数运行，并且在类的所有数据成员和基础都被销毁之后，内存被释放。对于自由存储/堆变量，所有由`delete`.

4）内存泄漏是程序不再可用但没有也不会被销毁和释放的对象。唯一不执行自动销毁/释放的对象是自由存储/堆分配的对象，只能使用`new`或`malloc`/ `realloc`（或调用它的函数，例如`strdup`）创建。所以 - 你必须使用指针（你可以存储一个引用 ala`*new X`但它仍然暂时处理一个指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T01:20:28.883

使用用 new 关键字初始化的引用怎么样？

又名：

```
class Foo
{
private:
    Bar& bar;
public:
    Foo() : bar(*new Bar())
    { }
}; 
```

我认为这会起作用:)

# python - How can I find the longest word in a text file?

> ID：16159239
> 
> 赞同：0
> 
> 时间：2013-04-23T01:08:02.277
> 
> 标签：python, python-3.x, python-3.3

I have created a function to find the longest word in a text file and finding the longest word(s) in a text file that can be made from 9 letters. I'm new to python and I'm creating a game similar to countdown.

I've created a function to find the longest word in the text file. What I want now is to create python code to find the longest word(s) that can be formed from the 9 letters.

Each letter can only be used once. So from 'qugteroda', I should get rag outed, outraged, out dare, out read, outrage,readout. I'm using python 3.3

my code looks like this:

```
def Words():
    qfile=open('dict.txt','r')
    long=''
    for line in qfile:
    if len(line)>len(long):
        long=line
    return long 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:27:29.340

因此，您想从字典中存在的一组字母中找到最长的排序组合。

为此，您将使用长度等于字符串长度的[itertools.combinations() 。](http://docs.python.org/2/library/itertools.html#itertools.combinations)您将根据排序字典检查所有这些组合，如果找不到匹配项，请减少组合长度。

您还希望将整个字典加载到集合中以减少搜索时间。我已将一组单词加载到字典中，其中键是排序后的字符串，值是具有相同排序表示的单词列表。

像这样的东西：

```
import itertools
from collections import defaultdict

words = defaultdict(list)
with open('/usr/share/dict/words') as qfile:
    for word in qfile:
        word = word.rstrip('\n').lower()
        words[''.join(sorted(word))].append(word)

def longest_anagram(term, words):
    search_length = len(term)
    term = sorted(term) # combinations maintains sort order
    while search_length > 0:
        for combo in itertools.combinations(term, search_length):
            search = ''.join(combo) # sort above means we dont need it here
            if search in words:
                return words[search]
        search_length -= 1
    return None

found = longest_anagram('qugteroda', words)
for w in found:
    print(w) 
```

为了完整起见，我应该提到这种方法适用于 18 个字母或更少的搜索字符串。如果您需要从大于 18 个字母的字符串中找到最长的字谜，最好翻转算法，以便按长度将字典单词排序到列表中。然后，您将遍历所有单词并检查它们是否存在于输入搜索字符串中——就像@abarnert 的答案一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T01:19:39.697

您当前的代码返回文本文件中最长的行，句号。

如果您想要最长的行是某个输入字符串的字谜，您需要获取一个输入字符串，并过滤掉不是字谜的行。

由于您指定没有重复字母，因此检查两个单词是否是字谜的最简单方法是检查它们是否都具有相同的字母集。所以：

```
def Words(inputletters):
    inputletters = set(inputletters)
    qfile=open('dict.txt','r')
    long=''
    for line in qfile:
        if set(line.strip()) == inputletters:
            if len(line)>len(long):
                long=line
    return long 
```

如果您不是在寻找精确匹配，而只是一个*子集*，只需将 替换`==`为`.issubset`。

或者，如果“你不能重复字母”实际上是指“你必须在两个字符串中重复完全相同的*字母*才能算作字谜”，那也很简单：不是比较字母*集，而是比较**排序*的字母列表：

```
def Words(inputletters):
    inputletters = sorted(inputletters)
    qfile=open('dict.txt','r')
    long=''
    for line in qfile:
        if sorted(line.strip()) == inputletters:
            if len(line)>len(long):
                long=line
    return long 
```

等等。一旦您可以准确定义您要搜索的内容，这可能是对数据结构和/或比较的微不足道的更改。

我不认为这是一个完整的程序，无论你想要什么，但它应该足以（a）让你指向正确的方向，或者（b）让你稍微澄清一下问题更好的。

* * *

同时，还有一些其他方面可以改进：

首先，您应该始终关闭您打开的文件（最好使用`with`语句）。

虽然我们在这里，但通常的 Python 编码标准（在[PEP 8](http://www.python.org/dev/peps/pep-0008/)中编码）建议使用小写的函数名称。并且`long`不是一个变量的好名字——虽然它不再是 Python 3.0 的一种类型，但它可能会使自 2.x 以来一直在使用 Python 的读者感到困惑（在这一点上，它仍然是大多数人）。

更有趣的是，就像 Python 中的许多简单`for`循环一样，您的整个循环可以通过使用迭代器转换调用链来替换。结果通常更简洁、更快、更难出错，并且通常更具可读性。

因此，让我们编写另一个版本来改变所有这些，并检查子集而不是完整集：

```
def words(inputletters):
    inputletters = set(inputletters)
    with open('dict.txt') as qfile:
        words = map(str.strip, qfile)
        letters = map(set, words)
        matching = filter(inputletters.issubset, letters)
        longest = max(matching, key=len)
        return longest 
```

当然，您可以将其中一些调用合并在一起（或者甚至将整个链变成单行，但我认为这可能会推动可读性的界限），或者将它们重写为生成器表达式（组合得更好——比较`(set(line.strip()) for line in qfile)`到`map(set, map(str.strip, file))`或`map(lambda line: set(line.strip()), qfile)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T08:36:42.723

```
def longestWord(fileName):
    mx = 0
    op = open(fileName,'r')
    words = op.read().split()
    for i in words:
        if len(i) > mx:
            mx = len(i)
            word = i
            #return the longest word and its length
    return (mx,word) 
```

# html - 如何修复我的导航菜单栏

> ID：16159241
> 
> 赞同：0
> 
> 时间：2013-04-23T01:08:33.667
> 
> 标签：html, css

在我的导航栏中，我的活动按钮和悬停按钮在内部与导航栏不对齐。有人可以帮我弄这个吗？

这是我正在测试的链接：

[http://jsfiddle.net/3qPbE/63/](http://jsfiddle.net/3qPbE/63/)

CSS：

```
<style type="text/css">

.cl{clear:both;}

#navi{
  background:#0082c8;
  position:relative;
  margin-top:0;
  list-style:none;
  height:50px;
}

#navi > li{
float:left;
margin:0 20px;
position:relative;
padding:14px 0;
}

#navi li a, .subnavi li a{
color:white;
text-decoration:none;
display:block;
line-height:29px;
padding:0 13px;
font-size:16px;
font-family:arial;
text-shadow: 0px 2px 2px #034e9f;
filter: dropshadow(color=#034e9f, offx=0, offy=2); 
}

#navi > li:hover > a, #navi li a.active{
background-color:#009;
height:50px;
line-height:29px;
display:block;              
 }

.subnavi{
position:absolute;
display:none;
top:50px;
background:#0082c8;
padding:10px 0;
white-space:nowrap;
list-style:none;    
}

#navi li:hover .subnavi{
display:block;
}

#navi .subnavi li{
margin:0;}

#navi .subnavi li a{
display:block;
font-size:13px;
padding:0 15px;
border-radius:0;
line-height:27px;}

#navi .subnavi li a:hover{
padding:0 15px;
border-radius:0;
border-left:0;
border-right:0;
line-height:25px;}

</style> 
```

这是HTML：

```
<body>
  <ul id="navi">
    <li><a href="" class="active">Home Owners</a></li>
    <li><a href="">Proffesionals</a>
    <ul class="subnavi">
        <li><a href="">LInk 1</a></li>
        <li><a href="">LInk 1</a></li>
        <li><a href="">LInk 1</a></li>
        <li><a href="">LInk 1</a></li>
        <li><a href="">LInk 1</a></li>    
    </ul>
    </li>
    <li><a href="">Why Ventilate?</a></li> 
    <div class="cl"></div>
  </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:11:18.383

# [工作小提琴](http://jsfiddle.net/3qPbE/66/)

`height: 50px;`从导航`a`标签中删除。那是选项 1。另一个选项是增加`nav`酒吧的高度。问题在于，通过将锚点设置为与导航栏相同的高度，它会在边距和填充之后变得太大。

您的代码如下所示：

```
#navi > li:hover > a, #navi li a.active{
    background-color:#009;
    line-height:29px;
    display:block;        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:11:51.470

您需要将`a:active`元素的高度更改为 29px 以匹配 的所有其他子`a`元素的行高`#navi`，或者干脆将其删除：

```
#navi > li:hover > a, #navi li a.active{
    background-color:#009;
    height:29px;
    line-height:29px;
    display:block;
} 
```

我已经更新了你的 jsfiddle：

[http://jsfiddle.net/3qPbE/64/](http://jsfiddle.net/3qPbE/64/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:16:28.190

**工作小提琴：http:** [//jsfiddle.net/3qPbE/65/](http://jsfiddle.net/3qPbE/65/)

更改填充`#navi > li`并`#navi li a`给出`#navi > li:hover > a, #navi li a.active`正确的高度。

```
#navi > li{
    float:left;
    margin:0 20px;
    position:relative;
    padding:0;
}

#navi li a, .subnavi li a{
    color:white;
    text-decoration:none;
    display:block;
    line-height:29px;
    padding:10px 13px;
    font-size:16px;
    font-family:arial;
    text-shadow: 0px 2px 2px #034e9f;
    filter: dropshadow(color=#034e9f, offx=0, offy=2); 
}

#navi > li:hover > a, #navi li a.active{
    background-color:#009;
    height:30px;
    line-height:29px;
    display:block;
} 
```

# three.js - 三.js立方体透明纹理显示边缘

> ID：16159242
> 
> 赞同：1
> 
> 时间：2013-04-23T01:09:06.733
> 
> 标签：three.js, transparency, cube, texture-mapping, invisible

我正在尝试使用 three.js 在游戏演示中创建世界的限制，所以我创建了两个立方体，每个立方体显示一个“透明森林纹理”，它将模拟世界限制。

我最初的问题是纹理显示在立方体的所有面上，但我希望它只显示在 4 个面上。

**[更新：我已经设法使立方体顶面的纹理不可见，但我仍然可以看到某种边缘（我不确定它是什么......）在天空中飞行。现在的问题是如何隐藏立方体边缘？]**

![在此处输入图像描述](https://i.stack.imgur.com/6qRmm.jpg)

仔细看看：

![在此处输入图像描述](https://i.stack.imgur.com/rgXwU.png)

如果您访问[https://googledrive.com/host/0BynsKHbZoT73elJpaUxqTlprVjQ/demos/3dworld/](https://googledrive.com/host/0BynsKHbZoT73elJpaUxqTlprVjQ/demos/3dworld/)，您将能够看到它的运行情况。

我的代码是**[更新]**：

```
 function createWall(texture,distanceFromMapLimit,wallsHeight,positiony){
        //texture
        var backgroundInteriorTexture = THREE.ImageUtils.loadTexture(texture,distanceFromMapLimit);
        backgroundInteriorTexture.wrapS = backgroundInteriorTexture.wrapT = THREE.RepeatWrapping;
        backgroundInteriorTexture.repeat.set( 10, 1 ); //repeat texture 10 times per face
        backgroundInteriorTexture.needsUpdate = true;
        // materials (for each face of the cube we will add one material)
        var backgroundInteriorMaterials = [];
        for ( var i = 0; i < 6; i ++ ) {
            if((i == 0) || (i == 1) || (i == 4) || (i == 5)) // side faces
            {
                console.log(i,'visible')
                backgroundInteriorMaterials.push(
                    new THREE.MeshBasicMaterial(
                    {
                        map: backgroundInteriorTexture,
                        transparent: true,
                        opacity: 1, //visible
                        side: THREE.BackSide
                    }
                ));
            }
            else //top and bottom faces
            {
                console.log(i,'NOT visible')
                backgroundInteriorMaterials.push(
                    new THREE.MeshBasicMaterial(
                    {
                        map: backgroundInteriorTexture,
                        transparent: true,
                        opacity: 0, //not visible
                        side: THREE.BackSide
                    }
                ));
            }
        }
        //geometry
        var backgroundInteriorGeometry = new THREE.CubeGeometry(
            world.worldWidth + distanceFromMapLimit,
            wallsHeight,
            world.worldDepth + distanceFromMapLimit
        );
        //mesh
        var backgroundInteriorMesh = new THREE.Mesh(
            backgroundInteriorGeometry,
            new THREE.MeshFaceMaterial(backgroundInteriorMaterials)
        );
        backgroundInteriorMesh.position.y = positiony;
        game.scene.add(backgroundInteriorMesh);
    }

    function createBackground(){
        //INTERIOR
        var wallsHeight = 4056;
        var positiony = 1750;
        createWall("Back_01.png", 0, wallsHeight, positiony); //just in ground limits
        //EXTERIOR
        createWall("Back_02.png", 5000, wallsHeight, positiony); //5000 away from ground limits
    } 
```

谢谢 ：）

# c - String Error in Void Function Segmentation Fault

> ID：16159243
> 
> 赞同：1
> 
> 时间：2013-04-23T01:09:24.343
> 
> 标签：c, arrays, string, function

This is one void function from a larger program, with the function of printing a kind of chart. It would first print the header, and then it uses a for loop to print 13 lines that calls information from 4 arrays. Names, a 2D Char Array, Scores, a 2D Int Array, Average, a 1D Float array, and Letter, a 1D Char array.

The function itself looks like this:

```
void display(char names[][8], int scores[][4], float *average, char *letter)
{
  int q = 0;

  printf("\n\n Name \t E1 \t E2 \t E3 \t E4 \t Avg \t Grade");
  for(q=0; q<13; q++)
  {
    printf("\n %s \t %d \t %d \t %d \t %d \t %.2f \t %c", names[q][0], scores[q][0],
    scores[q][1], scores[q][2], scores[q][3],  average[q], letter[q]);
  }
return;
} 
```

Once I run it, it runs well until the function call for this, and once I get there, I get a segmentation fault. As a reference, this is the function call:

```
 display(&names, &scores, &average, &letter); 
```

Changing the %s in the printf to a %c stops the segmentation fault but I need it to be printing the string held in the array not just a single character.

So how would I print the string (and the statement as a whole) without a segmentation fault?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:15:35.960

我`printf()`相信应该如下，

```
printf("\n %s \t %d \t %d \t %d \t %d \t %.2f \t %c", names[q], scores[q][0],
    scores[q][1], scores[q][2], scores[q][3],  average[q], letter[q]); 
```

在您的原件`printf()`中，您尝试`names[q][0]`使用`%s`.

# java - 如何从我使用 Runtime.getRuntime().exec(cmdLine) 执行的 Java 程序的 netcat 侦听器子进程中获取标准输出？

> ID：16159251
> 
> 赞同：0
> 
> 时间：2013-04-23T01:10:10.770
> 
> 标签：java, subprocess, inputstream, bufferedreader, netcat

我正在使用 netcat 测试 udp 端口​​转发器，并且无法以编程方式从目标（netcat 侦听器子进程）读取字符串。从我的 netcat 侦听器子进程读取消息是否正确转发到侦听器的正确流是什么？目前，我正在从侦听器子进程的 INPUT STREAM 中读取内容，但无法使其正常工作。我已经读过 Process.getInputStream() 实际上是父进程的输入流，并且对应于子进程的标准输出，但也许这是错误的流？

首先，我启动我的 udp 端口​​转发器子进程，它将把 localhost:srcPort 上的任何内容转发到 localhost:destPort。

接下来，我启动了一个 netcat 侦听器以及两个“耗尽”线程——一个从侦听器子进程的错误流中读取，一个从其输入流中读取。

```
Process recvProcess = Runtime.getRuntime().exec("nc -luv -p <destPort>"); 
```

然后我启动一个 netcat 发送器向端口转发器发送一个字符串，以及 2 个耗尽线程：

```
Process sendProcess = Runtime.getRuntime().exec("nc -vu <srcHost> <srcPort>"); 
```

最后，我将字符串发送过来：

```
String sendString = String.format("hello%s", System.lineSeparator());
PrintWriter sendWriter = new PrintWriter(sendProcess.getOutputStream());
sendWriter.print(sendString);
sendWriter.flush(); 
```

如果我从 cmd 窗口运行 netcat 侦听器，则 sendString 会正确输出到控制台。但是从我的 Java 程序中，读取侦听器的 inputStream 块。这是我的侦听器的 inputStream 读取线程的 run() 方法：

```
BufferedReader in;
try {
    in = new BufferedReader(new InputStreamReader(receiveMsgProcess.getInputStream()));
    String receivedMsg;
    while ((receivedMsg = in.readLine()) != null) {
        System.out.println(String.format("RECV IN: %s", receivedMsg));
    }
} catch (...) { ... } 
```

我认为这可能是换行问题，所以我也尝试使用 in.ready() 和 in.read(buffer, 0, 1024) 方法而不是 in.readLine()。他们都挡住了。

我还尝试将我的列表器的输出重定向到一个文件：

```
Runtime.getRuntime.exec("nc -luv -p <destPort> > recvMsg.txt"); 
```

但这也不起作用，没有创建文件。

请帮忙，我很确定我只是误解了一些关于 netcat 和 java Process 流的东西。提前感谢您的任何建议或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-08T10:50:47.547

读取错误流以获取 nc 命令的输出。

```
StringBuffer response = new StringBuffer();
BufferdReader reader = new BufferedReader(new InputStreamReader(recvProcess.getErrorStream()));
String line="";
while ((line = reader.readLine())!= null) {
    response.append(line + "\n");
}
System.out.println(response.toString()); 
```

# r - R：按类别计算唯一值

> ID：16159253
> 
> 赞同：14
> 
> 时间：2013-04-23T01:10:22.520
> 
> 标签：r, count, unique, categories

我在 R 中有如下数据：

```
 Cnty   Yr   Plt       Spp  DBH Ht Age
 1  185 1999 20001 Bitternut  8.0 54  47
 2  185 1999 20001 Bitternut  7.2 55  50
 3   31 1999 20001    Pignut  7.4 71  60
 4   31 1999 20001    Pignut 11.4 85 114
 5  189 1999 20001        WO 14.5 80  82
 6  189 1999 20001        WO 12.1 72  79 
```

我想知道每个县（Cnty）的独特物种（Spp）的数量。“unique(dfname$Spp)”为我提供了数据框中独特物种的总数，但我希望按县进行。

任何帮助表示赞赏！对不起，奇怪的格式，这是我关于 SO 的第一个问题。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T03:55:42.810

我试图让你的样本数据更有趣一点。您的样本数据目前每个“Cnty”只有一个唯一的“Spp”。

```
set.seed(1)
mydf <- data.frame(
  Cnty = rep(c("185", "31", "189"), times = c(5, 3, 2)),
  Yr = c(rep(c("1999", "2000"), times = c(3, 2)), 
         "1999", "1999", "2000", "2000", "2000"),
  Plt = "20001",
  Spp = sample(c("Bitternut", "Pignut", "WO"), 10, replace = TRUE),
  DBH = runif(10, 0, 15)
)
mydf
#    Cnty   Yr   Plt       Spp       DBH
# 1   185 1999 20001 Bitternut  3.089619
# 2   185 1999 20001    Pignut  2.648351
# 3   185 1999 20001    Pignut 10.305343
# 4   185 2000 20001        WO  5.761556
# 5   185 2000 20001 Bitternut 11.547621
# 6    31 1999 20001        WO  7.465489
# 7    31 1999 20001        WO 10.764278
# 8    31 2000 20001    Pignut 14.878591
# 9   189 2000 20001    Pignut  5.700528
# 10  189 2000 20001 Bitternut 11.661678 
```

接下来，正如建议的那样，`tapply`这里是一个很好的候选人。合并`unique`并`length`获取您正在寻找的数据。

```
with(mydf, tapply(Spp, Cnty, FUN = function(x) length(unique(x))))
# 185 189  31 
#   3   2   2 
with(mydf, tapply(Spp, list(Cnty, Yr), FUN = function(x) length(unique(x))))
#     1999 2000
# 185    2    2
# 189   NA    2
# 31     1    1 
```

如果您对简单的制表（不是唯一值）感兴趣，那么您可以探索`table`和`ftable`：

```
with(mydf, table(Spp, Cnty))
#            Cnty
# Spp         185 189 31
#   Bitternut   2   1  0
#   Pignut      2   1  1
#   WO          1   0  2
ftable(mydf, row.vars="Spp", col.vars=c("Cnty", "Yr"))
#           Cnty  185       189        31     
#           Yr   1999 2000 1999 2000 1999 2000
# Spp                                         
# Bitternut         1    1    0    1    0    0
# Pignut            2    0    0    1    0    1
# WO                0    1    0    0    2    0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T01:40:28.487

正如贾斯汀所说，聚合可能是你想要的。如果您将数据框称为 foo，则以下内容应为您提供所需的内容，即假设每个带有 Butternut 的行代表属于该种的唯一个体的每个物种的个体数量。注意我使用 foo$Age 来计算向量的长度，即属于每个物种的个体（行）的数量，但你可以使用 foo$Ht 或 foo$DBH 等。

```
aggregate(foo$Age, by = foo[c('Spp','Cnty')], length) 
```

干杯，

丹尼

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-08T12:56:38.970

```
set.seed(1)
mydf <- data.frame(
  Cnty = rep(c("185", "31", "189"), times = c(5, 3, 2)),
  Yr = c(rep(c("1999", "2000"), times = c(3, 2)), 
         "1999", "1999", "2000", "2000", "2000"),
  Plt = "20001",
  Spp = sample(c("Bitternut", "Pignut", "WO"), 10, replace = TRUE),
  DBH = runif(10, 0, 15)
)
mydf 
```

dplyr包可以在这里提供帮助**：**

```
 library(dplyr)
mydf %>% 
  group_by(Cnty) %>% 
  summarise(un_Spp = length(unique(Spp)))
#> # A tibble: 3 × 2
#>   Cnty  un_Spp
#>   <chr>  <int>
#> 1 185        3
#> 2 189        2
#> 3 31         2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-13T21:32:41.837

```
with(mydf, tapply(Spp, list(Cnty, Yr), 
     FUN = function(x) length(unique(x)))) 
```

唯一查询不适用于大型数据集，我的意思是超过 1000k 行的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-04T16:13:40.887

我想补充一下 A Handcart And Mohair 提到的内容。对于那些想要将下面代码的结果放入数据框中的人（在 R 工作室中很有帮助）...

```
with(mydf, table(Spp, Cnty))
#            Cnty
# Spp         185 189 31
#   Bitternut   2   1  0
#   Pignut      2   1  1
#   WO          1   0  2
ftable(mydf, row.vars="Spp", col.vars=c("Cnty", "Yr"))
#           Cnty  185       189        31     
#           Yr   1999 2000 1999 2000 1999 2000
# Spp                                         
# Bitternut         1    1    0    1    0    0
# Pignut            2    0    0    1    0    1
# WO                0    1    0    0    2    0 
```

您需要将 as.data.frame.matrix 修饰符放在代码前面，如下所示：

```
as.data.frame.matrix(with(mydf, table(Spp, Cnty))) 
```

当我看到这篇文章时，我对 R 还很陌生，我花了很长时间才弄清楚这一点，所以我想我会分享一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-01T21:18:59.233

使用该`data.table`方法的简单解决方案。

```
library(data.table)

output <- setDT(mydf)[ , .(count=.N) , by = .(Spp,Cnty)] 
```

如果您想将输出重塑为更好的表格格式：

```
library(tidyr)

spread(data=a, key =Spp, count)

#   Cnty Bitternut Pignut WO
# 1:  185         2      2  1
# 2:  189         1      1 NA
# 3:   31        NA      1  2

# or perhaps like this:

spread(data=a, key =Cnty, count)

#          Spp 185 189 31
# 1: Bitternut   2   1 NA
# 2:    Pignut   2   1  1
# 3:        WO   1  NA  2 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-04-04T17:15:34.183

我们现在可以使用 tally 函数来简化此操作。

> ```
> tally(group_by(mydf, Spp, Cnty))
> 
>         Spp   Cnty     n
>      <fctr> <fctr> <int>
> 1 Bitternut    185     2
> 2 Bitternut    189     1
> 3    Pignut    185     2
> 4    Pignut    189     1
> 5    Pignut     31     1
> 6        WO    185     1
> 7        WO     31     2 
> ```

# objective-c - 计算 NSString 中最多 %@ 的字符

> ID：16159255
> 
> 赞同：-3
> 
> 时间：2013-04-23T01:10:40.863
> 
> 标签：objective-c, nsstring, nsscanner

我有各种各样的 NSStrings，例如：

```
NSString *string = [NSString stringWithFormat:@"Item Used %@ times",item.numberOfUses]; 
```

或者

```
NSString *string = [NSString stringWithFormat:@"Created %@ items",item.count]; 
```

重点是，字符的数量总是不同的。我需要做的是计算从字符串开头到但不包括'%@'的字符数，包括空格，并将该值作为整数。

我试图调查 NSScanner 但到目前为止失败了。这样做的正确方法是什么？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:23:26.467

您不能将第一部分存储在 NSString 中，询问其长度，然后将其添加到格式化字符串中吗？像这样：

```
NSString * firstPart = @"Item Used ";
int length = [firstPart length];

NSString *string = [NSString stringWithFormat:@"%@%d times", firstPart, item.numberOfUses]; 
```

# google-apps-script - 上传到谷歌驱动器后返回 SPREADSHEET_ID

> ID：16159260
> 
> 赞同：0
> 
> 时间：2013-04-23T01:11:49.203
> 
> 标签：google-apps-script

我使用脚本使用 DocsList.createFile() 将电子表格文件上传到 Google Drive，我想通过电子邮件自动返回该新上传文件的 SPREADSHEET_ID，而无需先从技术上打开文件以手动确定 ID。我该如何编写这个脚本？

感谢提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:54:13.567

您可以在电子邮件中返回新创建文件的 ID。这是代码的概要。

```
//Your newly created file
  var file = DocsList.createFile(blob);
  var id = file.getId();
  GmailApp.sendEmail(Session.getEffectiveUser(), 'Id of newly created spreadsheet', id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:55:25.130

您可以在创建新文件并将其放入变量时调用方法 getId()。

```
var new_doc_id = DocsList.createFile("Test","Some text.").getId();
Logger.log(new_doc_id); 
```

在此之后只需调用 MailApp 发送电子邮件。

```
MailApp.sendEmail("to@gmail.com", subject, "", {htmlBody : email_body, noReply : true}); 
```

# backbone.js - 您如何使用速记“事件”对象从视图中监听模型中的更改事件？

> ID：16159270
> 
> 赞同：1
> 
> 时间：2013-04-23T01:12:41.690
> 
> 标签：backbone.js

我有以下 BackboneJS 视图，它有一个模型：

```
view = Backbone.View.extend({
   events: {
       // This will fire btnClicked() when the button is clicked
       "click .btn": "btnClicked",

       // Will this fire when the "data" property of my model changes?
       "change:data": "render"
   },
   btnClicked: function() {},
   render: function() {}
}); 
```

知道是否可以使用此快捷方式吗？

如果不是，则扩展形式为：

```
this.model.bind("change:data", render); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:17:54.227

该事件映射是用于监听 UI 事件的视图，而不是用于连接数据事件。

[视图](http://backbonejs.org/#View-delegateEvents)文档状态

> 使用 jQuery 的 on 函数为视图中的 DOM 事件提供声明性回调。

所以 View 的事件映射不能用于模型事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:41:07.273

正如 Kyle 所说，`events`哈希用于将 DOM 事件委托给视图对象。

值得补充的是，您通常应该使用`listenTo`表单而不是`bind`方法，因为这将为您处理事件清理（使用`events`哈希处理 DOM 事件的主要优点之一）。

```
this.listenTo(this.model, "change:data", render); 
```

# javascript - Strange Javascript Number Behavior - Cannot tell difference between 1 and 10

> ID：16159271
> 
> 赞同：2
> 
> 时间：2013-04-23T01:12:55.880
> 
> 标签：javascript, jquery

I have a slider, and each slide has content-editable set to true. Meaning, each slide is basically a form. Upon creating a slide, I embed a data-id attribute into each of the slide's fields, so that I can grab the field values from any particular slide.

The problem is, When I grab the field values with a data-id attribute set to `1` it also grabs the field values from the slide with a data-id attribute set to `10`.

Why is this happening?

Here is the code I use to grab any particular slide's values on an event trigger:

```
 var dealID = $(e.currentTarget).data("id");
    console.log("Deal ID: " + dealID);
    var dealTitleText = $('#deal-main-title[data-id*="' + dealID + '"]').text();
    var dealProvider = $('#deal-main-provider[data-id*="' + dealID + '"]').text();
    var dealDescription = $('#deal-main-description[data-id*="' + dealID + '"]').text();
    var dealPhoneNumber = $('#deal-main-phonenumber[data-id*="' + dealID + '"]').text();
    var dealConditions = $('#deal-main-conditions[data-id*="' + dealID + '"]').text(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T01:14:19.603

`[data-id*="1"]`查找`data-id` *包含* `1`的所有元素。如果你想要相等，只使用等号：

```
$('#deal-main-title[data-id="' + dealID + '"]') 
```

# php - Jquery validation of a form split across multiple hidden DIVs

> ID：16159277
> 
> 赞同：0
> 
> 时间：2013-04-23T01:13:37.423
> 
> 标签：php, jquery, forms, validation

I've created a form that is split into 2 DIVs. When the user clicks the NEXT button, I want to do 2 things: 1\. Validate the text fields in the first DIV, and if successful; 2\. Hide the first DIV and fadein the second DIV (if validation fails, show a message, and prevent the display of the 2nd part of the form).

I've stripped down my code. This is the script that currently hides the first DIV when clicking on an image button. I do not know how to modify this script to execute the validation on the fields, preventing the first DIV from hiding and the second one showing:

```
<script>
  $(document).ready(function(){
    $("img.nextlink").click(function (event) {
    $("#partone").hide();
    $("#parttwo").fadeIn("slow");
  });    
</script> 
```

The Form is as follows:

```
<form action="mail.php" method="post" enctype="multipart/form-data" name="registration">

<div id="partone">
Name:* <input type="text" name="customer_name" id="customer_name" />
<img src="images/arrow.png" id="arrow" class="nextlink" alt="next">
</div>    

<div id="parttwo">
Address*: <input type="text" name="address" id="address" />
<INPUT TYPE="image" src="images/arrow.png" alt="Submit">
</div>

</form> 
```

CSS:

```
div#partone {   
}
div#parttwo {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:21:13.020

只需将 hide() 和 fadeIn() 放在 if 子句中，检查表单的第一部分是否有效。

```
function validateFirstPart() {
  if($('#customer_name').val().length < 1){
    alert("Too short customer name");
    return false;
  }

  return true;
}

$(document).ready(function(){
    $("img.nextlink").click(function (event) {
        if(validateFirstPart()){
            $("#partone").hide();
            $("#parttwo").fadeIn("slow");
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:18:05.633

啊哈！是的。它的工作原理如下：

```
function validateFirstPart() {
  if($('#customer_name').val().length < 1){
    alert("Too short customer name");
    return false;
  }
  if($('#ranch').val().length < 1){
    alert("Too short ranch name");
    return false;
  }
  return true;
}

$(document).ready(function(){
    $("img.nextlink").click(function (event) {
        if(validateFirstPart()){
            $("#partone").hide();
            $("#parttwo").fadeIn("slow");
        }
}); 
```

# c# - 输出文本文件

> ID：16159281
> 
> 赞同：0
> 
> 时间：2013-04-23T01:14:03.007
> 
> 标签：c#, asp.net-mvc-4, text-files

我正在将信息写入文件，并将其命名为`"//Average+DateTime.txt"`; 我认为我的代码会比我试图澄清的更容易：

```
String path=bama();

if(path.Contains(".txt")) {
    StreamWriter sw=
        new StreamWriter(
            "C:/Users/msilliman11/Average"
            +DateTime.Now.ToString("yyyyMMdd")
            +".txt"
            );
}

String ElementsNum=RoundedValues.Count.ToString();
DateTime dt=System.DateTime.Now;

using(var NewFile=File.Create(path)) {
    using(var writeIt=new StreamWriter(NewFile)) {
        writeIt.Write(
            "NA"+","
            +dt.Hour.ToString()+","+dt.Minute+","
            +dt.Day+","+dt.Month.ToString()+","+dt.Year.ToString()+","
            +"ALTEST "+","+"ALTEST "+","+heatgrade
            +"    "+","+"        "+","+heatname+","
            +DT2.Columns[3].ToString()+","+heatgrade+","
            +"OE2"+","+","+","+","+","+","+","+" "+ElementsNum+","
            );

        foreach(
            var pair in
            RoundedValues.Zip(
                Elements, (a, b) => new {
                    A=a,
                    B=b
                })) {
            writeIt.Write(pair.B.ToString()+","+pair.A.ToString()+",");
        }
    }
} 
```

我遇到的问题是我需要命名`"Average"`文件，并将外部 using 块中的代码写入文件...

我很不擅长解释这些问题，但基本上我试图在第二个 using 块中获取信息，以便`"4222013Average.txt"`在输出文件中命名......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:44:26.723

如果我正确理解您的问题，我认为这可能对您更有效。

```
var toFile = Path.Combine(@"C:\Users\msilliman11\", 
    string.Format("Average{0}.txt", DateTime.Now.ToString("yyyyMMdd")));
var dt = DateTime.Now;
using (var fs = File.OpenWrite(toFile))
using (TextWriter sw = new StreamWriter(fs))
{
    sw.Write(string.Join(",", 
        "NA", 
        dt.Hour, 
        dt.Minute, 
        dt.Day,
        dt.Month,
        dt.Year,
        "ALTEST ",
        "ALTEST ",
        heatgrade, 
        "    ",
        "        ", 
        heatname,
        DT2.Columns[3],
        heatgrade,
        "OE2",
        string.Empty,
        string.Empty,
        string.Empty,
        string.Empty,
        string.Empty,
        string.Empty,
        string.Empty,
        " ",
        ","));

    foreach (var pair in RoundedValues.Zip(Elements, (a, b) => new { A = a, B = b }))
    {
        writeIt.Write(pair.B.ToString() + "," + pair.A.ToString() + ",");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:29:16.163

目前尚不完全清楚问题是什么，除了：

您说您想将文件命名为：`4/22/2013Average.txt`. 这是不可能的。文件名中不允许使用正斜杠。

这是你需要知道的吗？如果不是，请更清楚。

还有一个提示：通过使用使您的代码更清晰`string.Format()`：

```
string text = string.Format("NA,{0},{1},{2},{3},{4},ALTEST,ALTEST ,{5}    ,        ,{6},{7},{5},OE2,,,,,,, {8},",
        dt.Hour,
        dt.Minute,
        dt.Day,
        dt.Month,
        dt.Year,
        heatgrade,
        heatname,
        DT2.Columns[3],
        ElementsNum);
    writeIt.Write(text); 
```

# javascript - Google 表单的动态 iframe 高度

> ID：16159286
> 
> 赞同：1
> 
> 时间：2013-04-23T01:14:28.587
> 
> 标签：javascript, jquery, html

我想知道是否可以拥有 Google Form iframe 的动态高度（100%）？

特别是，当您的 Google 表单扩展到两个或更多页面时。有没有办法将其调整为 100% 高度而不是放入高度像素？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-10T09:08:57.677

嵌入 Google Forms iframe 的最佳方式是简单地拥有一个 100vh 的父元素。这样 iframe 可以垂直测量它所需的空间

```
<div style="height: 100vh;">
// Your embed code here with height and width set to 100%
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:20:15.433

100% 表示它将填充其父元素高度的 100%，如果没有更高的父元素，它将填充其高度的 100%`body`

```
iframe {
 height:100%;
} 
```

虽然，我敢肯定你的问题不会像最初指出的那么简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T15:16:38.723

您无法获得 iframe 的高度，因为浏览器安全措施会阻止 javascript 访问框架内容。

您能够做到这一点的唯一方法是，如果您同时拥有将包含在 iframe 中的页面，以及 iframe 将存在的页面。如果您确实拥有这两个页面，则可以使用 David Bradshaw 的 iframe resizer 插件。见[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

# git-tfs - 使用 git-tfs fetch 获取最新会导致合并冲突

> ID：16159288
> 
> 赞同：5
> 
> 时间：2013-04-23T01:14:52.313
> 
> 标签：git-tfs

我在尝试从 TFS 中提取我的最新更改并将它们添加到 BitBucket 存储库时遇到问题。我已经成功地将我的分支推送到 BitBucket 中，但是当我尝试从 TFS 获取任何新的签入时，我总是会遇到合并冲突。

脚步：

1.  `git tfs clone http://TFS-ADDRESS/Collection $/Project/Name/Branch`
2.  `git tfs init-branch $/Project/Name/NewBranch NewBranchName`
3.  `git push -u origin --all`

此时，我的 BitBukcet 存储库包含了我所有来自 TFS 的文件和历史记录。然后我在 TFS 上检查了我的 $/Project/Name/NewBranch。

现在我想从 TFS 获取最新的变更集并将它们添加/提交到 BitBucket 存储库 注意：此时，TFS 或 BitBucket 中的其他分支没有更改。唯一的变化是我单次签入到 TFS

当我在我的 NewBranch 上执行以下操作时，我遇到了合并冲突：

```
git tfs pull

Auto-merging Source/build.version
CONFLICT (content): Merge conflict in Source/build.version 
```

据我所知，即使 NewBranch 是最新的代码，它也正试图将我的“master”的更改合并到我的“NewBranch”。ptfs pull 命令正在拉下最后一个检查集，但随后尝试进行合并。如果我使用

```
git tfs fetch --all 
```

我看到列出的变更集，但我无法将其提交/推送到 BitBucket 存储库。我在网上找不到参考资料来说明我做错了什么，或者我需要采取哪些步骤（我是 Git 新手）。任何人都可以帮忙吗？

我最终希望将其自动化，以便可以获取 TFS 中的任何签入并将其添加到 BitBucket 存储库（直到我们最终将所有开发人员移至 BitBucket）

谢谢

编辑我正在尝试将更改从 TFS 更改为 BitBucket。BitBucket 没有向 TFS 添加任何内容。

所有工作都在一个分支上完成（见下文）。用户正在 TFS 中工作。用户在那里提交他们的更改。注意：没有人对 BitBucket 存储库进行编辑。它是 TFS 的副本。每天一次，我想将每个 TFS 分支的最新变更集拉到我的本地 git 文件夹，然后将它们推送到 BitBucket。“git tfs fetch”检索变更集：

```
D:\development\workspaces\git\anothertry>git tfs fetch --all
C83419 = 3abdaedf571369dce15f74a52697d86069f87d6d 
```

但是“git status”告诉我没有什么可以提交的

```
D:\development\workspaces\git\anothertry>git status
# On branch Feature
nothing to commit, working directory clean 
```

当我尝试将这个变更集推送到 BitBucket 中时，git 告诉我没有什么可以提交的。

分支机构

```
Master---o---------------o----o--o-o--o-------
          \             /    /  / /  /
           Feature-----o----o--o-o--o 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:29:35.607

在使用 Git Extensions 之后，我似乎找到了答案。

看来我需要提取

```
git tfs fetch --all 
```

这将为我的主干和我映射的任何分支（init-branch）从 TFS 获取所有变更集

```
D:\development\workspaces\git\anothertry>git tfs fetch --all
C83454 = f65ba8d0cc7b40f42148ba2c06d0da8b7e968c4d
C83455 = 6c25feb6e74a09d0d3d84344002e7546044900ab
C83459 = 91c4450d702d5a97e862aedd7ad1b5af3ff2c375
C83460 = 5cacaba5bfe4197c1bf9fab498f51c1ba435e6ea 
```

接下来我需要执行合并

```
git merge <guid> 
```

注意：这是最新的变更集（在本例中为 5cacaba...）

```
Updating 6c25feb..5cacaba
Fast-forward
 Source/Common/w32threads.h             | 1238 ++---
 Source/xxxxxxx_Service/ServerAgent.cpp | 3638 ++++++-------
 Source/xxxxxxx_Service/ServerAgent.h   |  449 +-
 Source/xxxxxxx_Service/User.cpp        | 9073 ++++++++++++++++----------------
 Source/xxxxxxx_Service/User.h          |  647 +--
 Source/build.version                   |    2 +-
 6 files changed, 7562 insertions(+), 7485 deletions(-) 
```

最后，将我的更改推送到 BitBucket

```
git push --all 
```

所以，似乎我错过了`git merge`调用和传递给它的参数。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:06:16.013

我不完全明白你做错了什么，但你现在应该在使用 git-tfs 时做一些事情......

*   使用 TFS 分支我看到您创建了一个分支（步骤 2）并在该分支中提交。签出分支“NewBranchName”后，应使用以下命令签入：

    git tfs rcheckin -i 新分支名称

并使用以下命令进行修改：

```
git tfs pull -i NewBranchName 
```

或（使用变基）

```
git tfs pull -r -i NewBranchName 
```

如果您没有使用 TFS 远程名称指定 -i 选项，您将在主分支（此处为 $/Project/Name/Branch ）中签入您的提交：（

*   检查您在 TFS 上的提交我在命令上方为您提供检查您的提交的命令。但是您应该知道，由于某些原因，当您在 TFS 中签入 git 提交时，会在 TFS 中创建一个新的变更集（这就是我们想要的；））并且在创建新的 git 提交之后。它与原始版本几乎相同，但包含一些信息（您可以在 git 评论中看到）。由于这个事实，根据您所做的事情（我并不完全理解），您可能会遇到问题，因为 git 尝试在同一位置合并提交与完全相同的修改，因此无法自动合并。

事实上，我认为你的工作流程有问题，因为你不应该遇到这个问题。尝试在您的工作流程中找出问题所在。

我希望它会有所帮助。

随意查看 git-tfs wiki：[https](https://github.com/git-tfs/git-tfs/wiki) ://github.com/git-tfs/git-tfs/wiki 我希望有非常有用的信息（部分做到了，很喜欢；））

PS：为了更好地帮助你，你能告诉我你使用哪个命令来检查你的提交吗？签入，签入，重新签入？强烈建议 rcheckin ！

我做什么来自动化你的工作流程：

（这里的 'bitbucket' 是您的远程 bitbucket 存储库的假定名称）

=> 在您的主分支中：

```
//Do your job & commit with git & ...
//rebase your work on TFS work
git tfs pull -r
//rcheckin with git-tfs
git tfs rcheckin
//commit in bitbucket repo
git push bitbucket master 
```

=> 在您的“NewBranchName”分支中：

```
//Do your job & commit with git & ...
//rebase your work on TFS work
git tfs pull -r -i NewBranchName
//rcheckin with git-tfs
git tfs rcheckin -i NewBranchName
//commit in bitbucket repo
git push bitbucket NewBranchName 
```

PS2：也许，如果在执行 pull -r 和 rcheckin ...

编辑：你编辑，我编辑；）

之前，我假设您已经为您的 bitbucket 存储库定义了一个远程：

```
git remote add bitbucket https://bitbucket.org/yout_login/your_project.git 
```

你只需要：

```
//checkout your branch
git checkout NewBranchName
//fetch the TFS changesets and merge your branch into
git tfs pull -r -i NewBranchName
//push your commit on bitbucket
git push bitbucket NewBranchName 
```

并解释一下你在做什么（但不完全理解：（）......

使用“git tfs fetch --all”，您将获取所有分支的 TFS 变更集，但不会与您的本地分支合并（或变基）。因此它们不会出现在您的本地分支中。您可以使用以下命令查看 DAG 以更好地理解：

```
git log --oneline --graph --decorate 
```

上面给出的“git tfs pull”将获取的提交与您的分支合并，这样会很好！

> “git status”告诉我没有什么可以提交的

此命令显示在工作目录中修改的文件。所以，你看不到任何变化是正常的。那确实表明您的提交没有被取消！

> 当我尝试将这个变更集推送到 BitBucket 中时，git 告诉我没有什么可以提交的。

你应该有！您确定已将远程定义到您的 bitbucket 存储库吗？（见上文）您使用哪个命令？git告诉你什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T01:31:21.597

**git tfs fetch**命令不会更新您的本地 git 存储库，这就是您应该在此之后执行git **merge**的原因。

要在一个命令中执行相同操作，只需从 TFS 遥控器中拉取

```
git tfs pull -r 
```

这应该使用来自 TFS 服务器的所有新更新来更新本地 git 存储库

此时你只需要将更新推送到 git 服务器：

```
git push -u origin --all 
```

# sorting - Topological sort on an incidence matrice

> ID：16159304
> 
> 赞同：-1
> 
> 时间：2013-04-23T01:16:56.840
> 
> 标签：sorting, graph-algorithm

If my directed graph is represented as its incidence matrix how do I apply topological sort on that graph? I think it can be done by finding null rows and removing them with their corresponding columns but this is not efficient.How can I do this more efficiently?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:42:41.820

我认为这是家庭作业。尝试以下算法：

1）识别所有入度为0的节点（没有边缘点进入节点）

2) 对于步骤 1 中的每个节点，从该节点开始执行深度优先搜索游走。

如果图是 DAG（有向无环图 - 没有像 A -> B、B -> C、C -> A 这样的有向环），则您看到节点的顺序保证是拓扑排序。

# h.264 - Converting between SDP's sprop-parameter-sets and mkv's CodecPrivate

> ID：16159305
> 
> 赞同：1
> 
> 时间：2013-04-23T01:16:57.543
> 
> 标签：h.264, rtsp, conventions, sdp, matroska

Is there some easy way to convert between h264 settings as stored in Matroska file:

```
+ CodecPrivate, length 36 (h.264 profile: Baseline @L2.0) hexdump 
01 42 c0 14 ff e1 00 15 67 42 c0 14 da 05 07 e8
40 00 00 03 00 40 00 00 0c 03 c5 0a a8 01 00 04
68 ce 0f c8 
```

and the same settings when streaming that matroska file using RTSP?:

```
a=fmtp:96 packetization-mode=1;profile-level-id=42C014;sprop-parameter-sets=Z0LAFNoFB+hAAAADAEAAAAwDxQqo,aM4PyA== 
```

Base-64 strings decodes to this:

```
00000000  67 42 c0 14 da 05 07 e8  40 00 00 03 00 40 00 00  |gB......@....@..|
00000010  0c 03 c5 0a a8    

00000000  68 ce 0f c8                                       |h...| 
```

which partially matches the data in mkv's CodecPrivate.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:38:02.657

从 ffmpeg 提取从 raw 到 CodecPrivate 的转换：

```
/*
 * AVC helper functions for muxers
 * Copyright (c) 2006 Baptiste Coudurier <baptiste.coudurier@smartjog.com>
 * Modified by _Vi: stand-alone version (without ffmpeg)
 *
 * This file is based on the code from FFmpeg.
 *
 * FFmpeg is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * FFmpeg is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with FFmpeg; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
 */

#include <string.h>
#include <stdio.h>

#define assert(x) if(!(x)) { fprintf(stderr, "Assertion failed...\n"); return -1; }

#ifndef AV_RB24
#   define AV_RB24(x)                           \
    ((((const uint8_t*)(x))[0] << 16) |         \
     (((const uint8_t*)(x))[1] <<  8) |         \
      ((const uint8_t*)(x))[2])
#endif

#ifndef AV_RB32
#   define AV_RB32(x)                                \
    (((uint32_t)((const uint8_t*)(x))[0] << 24) |    \
               (((const uint8_t*)(x))[1] << 16) |    \
               (((const uint8_t*)(x))[2] <<  8) |    \
                ((const uint8_t*)(x))[3])
#endif

#define avio_w8(pb, x) *(*pb)++ =  x;
#define avio_wb16(pb, x) *(*pb)++ = ((x)>>8);  *(*pb)++ = x&0xFF;
#define avio_wb32(pb, x) *(*pb)++ = ((x)>>24); \
                         *(*pb)++ = ((x)>>16)&0xFF; \
                         *(*pb)++ = ((x)>>8)&0xFF; \
                         *(*pb)++ = ((x)>>0)&0xFF;
#define avio_write(pb, b, l) memcpy((*pb), b, l); (*pb)+=(l);

typedef unsigned char uint8_t;
typedef int intptr_t;
typedef unsigned long uint32_t;

static const uint8_t *ff_avc_find_startcode_internal(const uint8_t *p, const uint8_t *end)
{
    const uint8_t *a = p + 4 - ((intptr_t)p & 3);

    for (end -= 3; p < a && p < end; p++) {
        if (p[0] == 0 && p[1] == 0 && p[2] == 1)
            return p;
    }

    for (end -= 3; p < end; p += 4) {
        uint32_t x = *(const uint32_t*)p;
//      if ((x - 0x01000100) & (~x) & 0x80008000) // little endian
//      if ((x - 0x00010001) & (~x) & 0x00800080) // big endian
        if ((x - 0x01010101) & (~x) & 0x80808080) { // generic
            if (p[1] == 0) {
                if (p[0] == 0 && p[2] == 1)
                    return p;
                if (p[2] == 0 && p[3] == 1)
                    return p+1;
            }
            if (p[3] == 0) {
                if (p[2] == 0 && p[4] == 1)
                    return p+2;
                if (p[4] == 0 && p[5] == 1)
                    return p+3;
            }
        }
    }

    for (end += 3; p < end; p++) {
        if (p[0] == 0 && p[1] == 0 && p[2] == 1)
            return p;
    }

    return end + 3;
}

const uint8_t *ff_avc_find_startcode(const uint8_t *p, const uint8_t *end){
    const uint8_t *out= ff_avc_find_startcode_internal(p, end);
    if(p<out && out<end && !out[-1]) out--;
    return out;
}

int ff_avc_parse_nal_units(unsigned char **pb, const uint8_t *buf_in, int size)
{
    const uint8_t *p = buf_in;
    const uint8_t *end = p + size;
    const uint8_t *nal_start, *nal_end;

    size = 0;
    nal_start = ff_avc_find_startcode(p, end);
    while (nal_start < end) {
        while(!*(nal_start++));
        nal_end = ff_avc_find_startcode(nal_start, end);
        avio_wb32(pb, nal_end - nal_start);
        avio_write(pb, nal_start, nal_end - nal_start);
        size += 4 + nal_end - nal_start;
        nal_start = nal_end;
    }
    return size;
}

int ff_avc_parse_nal_units_buf(const unsigned char *buf_in, unsigned char **buf, int *size)
{
    unsigned char *pbptr = *buf;

    ff_avc_parse_nal_units(&pbptr, buf_in, *size);

    *size = pbptr - *buf;
    return 0;
}

int my_isom_write_avcc(unsigned char **pb, const uint8_t *data, int len)
{
    unsigned char tmpbuf[4000];

    if (len > 6) {
        /* check for h264 start code */
        if (AV_RB32(data) == 0x00000001 ||
            AV_RB24(data) == 0x000001) {
            uint8_t *buf=tmpbuf, *end, *start;
            uint32_t sps_size=0, pps_size=0;
            uint8_t *sps=0, *pps=0;

            int ret = ff_avc_parse_nal_units_buf(data, &buf, &len);
            if (ret < 0)
                return ret;
            start = buf;
            end = buf + len;

            /* look for sps and pps */
            while (buf < end) {
                unsigned int size;
                uint8_t nal_type;
                size = AV_RB32(buf);
                nal_type = buf[4] & 0x1f;
                if (nal_type == 7) { /* SPS */
                    sps = buf + 4;
                    sps_size = size;
                } else if (nal_type == 8) { /* PPS */
                    pps = buf + 4;
                    pps_size = size;
                }
                buf += size + 4;
            }
            assert(sps);
            assert(pps);

            avio_w8(pb, 1); /* version */
            avio_w8(pb, sps[1]); /* profile */
            avio_w8(pb, sps[2]); /* profile compat */
            avio_w8(pb, sps[3]); /* level */
            avio_w8(pb, 0xff); /* 6 bits reserved (111111) + 2 bits nal size length - 1 (11) */
            avio_w8(pb, 0xe1); /* 3 bits reserved (111) + 5 bits number of sps (00001) */

            avio_wb16(pb, sps_size);
            avio_write(pb, sps, sps_size);
            avio_w8(pb, 1); /* number of pps */
            avio_wb16(pb, pps_size);
            avio_write(pb, pps, pps_size);
        } else {
            avio_write(pb, data, len);
        }
    }
    return 0;
}

#define H264PRIVATE_MAIN

#ifdef H264PRIVATE_MAIN
int main() {
    unsigned char data[1000];
    int len = fread(data, 1, 1000, stdin);

    unsigned char output[1000];
    unsigned char *output_f = output;

    my_isom_write_avcc(&output_f, data, len);

    fwrite(output, 1, output_f - output, stdout);
    return 0;
}
#endif 
```

在每个 base-64 解码块之前插入“00 00 00 01”并将其输入该程序输出 CodecPrivate：

```
$ printf '\x00\x00\x00\x01'\
'\x67\x42\xc0\x14\xda\x05\x07\xe8\x40\x00\x00\x03\x00\x40\x00\x00\x0c\x03\xc5\x0a\xa8'\
'\x00\x00\x00\x01'\
'\x68\xce\x0f\xc8' | ./avc_to_mkvcodecpriv | hd
00000000  01 42 c0 14 ff e1 00 15  67 42 c0 14 da 05 07 e8  |.B......gB......|
00000010  40 00 00 03 00 40 00 00  0c 03 c5 0a a8 01 00 04  |@....@..........|
00000020  68 ce 0f c8                                       |h...|
00000024 
```

# python - Socket not defined error in client application

> ID：16159310
> 
> 赞同：0
> 
> 时间：2013-04-23T01:17:45.000
> 
> 标签：python, user-interface, tkinter

I am trying to make a GUI for this script I made. I want to press the *connect* button first to connect to the server. then hit *send* to send a file. But when I press connect it sends an empty text file and the send button gives me an error that my socket is not defined.

```
from Tkinter import *

class Application(Frame):

def __init__(self, master):

    Frame.__init__(self, master)
    self.grid()
    self.create_widgets()

def create_widgets(self):

    self.instruction = Label(self, text = 'Enter ip')
    self.instruction.grid(row=0, column = 0, columnspan = 2, sticky = W)

    self.instruction = Label(self, text = 'Enter Port')
    self.instruction.grid(row=1, column = 0, columnspan = 2, sticky = W)

    self.instruction = Label(self, text = '      ')
    self.instruction.grid(row=2, column = 0, columnspan = 2, sticky = W)

    self.instruction = Label(self, text = 'Enter path')
    self.instruction.grid(row=5, column = 0, columnspan = 2, sticky = W)

    self.ip = Entry(self)
    self.ip.grid(row=0, column = 1, sticky = W)

    self.port = Entry(self)
    self.port.grid(row=1, column = 1, sticky = W)

    self.path = Entry(self)
    self.path.grid(row=5, column = 1, sticky = W)

    self.submit_button = Button(self, text='connect', command = self.connect)
    self.submit_button.grid(row = 1, column = 2, sticky = W)

    self.send_button = Button(self, text='Send file', command = self.send)
    self.send_button.grid(row = 5, column = 2, sticky = W)

    self.text = Text(self, width = 80, height = 5, wrap = WORD)
    self.text.grid(row = 10, column = 0, columnspan = 3, sticky = W)

def connect(self):

    ip = self.ip.get()
    port = int(self.port.get())

    import socket
    import sys
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((ip, port))

    self.text.insert(0.0, 'connecting to' ,ip, port )

def send(self):
    path = self.path.get()
    f=open (path, "rb") 
    l = f.read(1024)
    while (l):
        s.send(l)
        l = f.read(1024)
    s.close()

 root = Tk()
 root.title("Client")
 root.geometry("420x200")
 app = Application(root)

 root.mainloop() 
```

this is my server script

```
from Tkinter import *

import socket
import sys

class Application(Frame):

def __init__(self, master):

    Frame.__init__(self, master)
    self.grid()
    self.create_widgets()

def create_widgets(self):

    self.text = Text(self, width = 35, height = 5, wrap = WORD)
    self.text.grid(row = 0, column = 0, columnspan = 2, sticky = W)

    self.submit_button = Button(self, text='start', command = self.start)
    self.submit_button.grid(row = 2, column = 0, sticky = W)

def start(self):

    self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.text.insert(0.0, 'Server started!\n' )
    self.s.bind(('',1080))
    self.s.listen(10)

    while True:
        sc, address = self.s.accept()
        i=1
        f = open('file_'+ str(i)+".txt",'wb') #open in binary
        i=i+1
        while (True):       
            l = sc.recv(1024)
            while (l):
                print l 
                f.write(l) 
                f.flush()
                l = sc.recv(1024)
        f.close()

        sc.close()

    #s.close()

  root = Tk()
  root.title("Server")
  root.geometry("500x250")
  app = Application(root)
  root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:24:15.687

`s`是 的局部变量`connect`，所以它不在`send`方法的范围内。由于您已经为应用程序使用了一个类，您可以通过将每个替换为 来存储对套接字的`s`引用`self.s`。

还要记住，您的套接字操作在 GUI 线程上运行，因此您的应用程序在完成执行之前不会响应。作为一种可能的解决方案，您可以使用该[`threading`模块](http://docs.python.org/2/library/threading.html)在单独的线程上运行它们。

# php - PHP/SQL PDO 准备/执行插入语句不起作用

> ID：16159316
> 
> 赞同：1
> 
> 时间：2013-04-23T01:18:29.173
> 
> 标签：php, mysql, sql, pdo

所以我试图在我的网站上使用 PDO 对象而不是旧方法（特别是因为我听说它更适合并且正在更新一堆查询。但由于某种原因，我无法准备/执行无论我做什么都要工作。

dbconnect.php：

```
try {
    $main = new PDO("mysql:dbname=$dbmain;host=$dbhost", $dbuser, $dbpassword);
    $tracker = new PDO("mysql:dbname=$dbtracker;host=$dbhost", $dbuser, $dbpassword);
} catch (PDOException $ex) {
    echo "Connection failed: " . $ex->getMessage();
} 
```

跟踪器.php

```
include 'dbconnect.php';

$page = $_SERVER['PHP_SELF']; //Get page name
$ip = $_SERVER['REMOTE_ADDR'];   //Get the IP address
$browser = $_SERVER['HTTP_USER_AGENT']; //Get the browser name

if(isset($_SERVER['HTTP_REFERER'])) {
    $referer = $_SERVER['HTTP_REFERER']; //Get the page the visitor came from
}
else { //If not refered from any page, referer should be blank or error occurs
    $referer = "";
}

$result = $tracker->prepare("INSERT INTO 'pages' ('page', 'ip', 'browser', 'referer') VALUES (:page, :ip, :browser, :referer)");
$result->execute(
            array(
                ':page' => $page,
                ':ip' => $ip,
                ':browser' => $browser,
                ':referer' => $referer
                )
            ); 
```

其次，有人可以向我解释为什么我不应该对所有事情都使用 query() 吗？现在我看到我应该对非动态查询使用查询，并为动态准备/执行，但查询对两者都有效。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:31:14.380

我看到的问题（*可能还有其他问题*）是你用单引号包裹列名。***列名和表名是标识符而不是字符串文字***。如果您曾经在它们上使用过保留关键字，或者列名和表名周围包含空格，则应使用反引号而不是单引号对它们进行转义，

```
INSERT INTO pages (page, ip, browser, referer) VALUES (...) 
```

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

# c# - 如何从动态创建的 ViewBag 的封装属性创建 DropDownList？

> ID：16159318
> 
> 赞同：0
> 
> 时间：2013-04-23T01:18:40.370
> 
> 标签：c#, asp.net-mvc-4, viewdata, viewbag

注意：变量名称已更改以使我的代码的目的保持匿名。

**任务**：

创建一个`SelectList`将显示选择的内容（如果选择了任何内容），并将生成一个可供选择的列表。

**`ViewBag``CarShow`控制器中的声明/定义**：

```
/* db.Companies is DataContext (Entities), 
*  CarShow.Company.Id is a ViewModel (Company is encapsulated under CarShow) */
ViewBag.CompanyList = new SelectList( db.Companies,       //Constructor
                                      "Id",               //Property Name
                                      "Name",             //Text to display each item
                                      CarShow.Company.Id  //Value of the initially selected item
                                      ).Distinct(); 
```

**我在“编辑视图”中尝试了以下代码来生成`SelectList`带有错误消息的代码：**

```
/* <-- The ViewData item that has the key 'Company.Id' is of 
    type 'System.Int32' but must be of type 'IEnumerable<SelectListItem>'. --> */
@Html.DropDownListFor( model => model.Company.Id,
                      (IEnumerable<SelectListItem>)ViewBag.CompanyList )

/* <!-- Compilation Error --> */
@Html.DropDownList( (IEnumerable<SelectListItem>)ViewData.Id,
                    (IEnumerable<SelectListItem>)ViewData.Name )

/* <!-- The ViewData item that has the key 'Id' is of type 'System.Int32' 
     but must be of type'IEnumerable<SelectListItem>'. --> */
@Html.DropDownList( "Id", 
                    (IEnumerable<SelectListItem>)ViewData["Name"], 
                     new { id = "Id" })

/* <!-- Cannot apply indexing with [] to an 
     expression of type 'System.Dynamic.DynamicObject' --> */
@Html.DropDownList("Id", (IEnumerable<SelectListItem>)ViewBag["Name"]) 
```

**我的方法是否正确，我的“编辑视图”代码或`CarShow`控制器和“编辑视图”代码有问题？**

*我想提前感谢任何有帮助的人。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:41:37.383

试试这个我不认为你想区分列表

```
ViewBag.CompanyList = new SelectList( db.Companies.Distinct().ToList(),      
                                      "Id",             
                                      "Name",             
                                      CarShow.Company.Id);

@Html.DropDownList("CompanyList", (SelectList)ViewBag.CompanyList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:00:57.360

在您看来，请使用强类型版本：

```
@Html.DropDownListFor( model => model.Company.Id, (SelectList)ViewBag.CompanyList ) 
```

在您的控制器中，`.Distinct()`从行尾删除...如果您需要它，请以这种方式使用它：

```
ViewBag.CompanyList = new SelectList( db.Companies.Distinct(), "Id",  "Name", CarShow.Company.Id ); 
```

# javascript - Is it kosher to have document.ready and window.load in the same JavaScript file?

> ID：16159320
> 
> 赞同：2
> 
> 时间：2013-04-23T01:18:49.090
> 
> 标签：javascript, jquery

Is it okay to have both wrapper functions in the same JavaScript file? For example, the main.js file which contains all of my site's scripts currently is using the `$(window).load(function(){//...});` method and I was wondering if I could also utilize the `$(document).ready(function(){//...});` method in the same script file?

```
$(document).ready(function() {
    //Code here...
});

$(window).load(function() {
    // Code here...
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:21:08.143

他们做不同的事情，所以是的。

*   `$(document).ready()`当 DOM 准备好被修改时触发。
*   `$(window).load()`当所有外部资源（如图像、脚本和样式表）完成加载时触发。

即使它们都相同（例如，两者都是`$(document.ready()`），jQuery 仍然会执行这两个绑定的回调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T01:20:50.093

是的，这并没有错。事实上，这两个事件是针对完全不同的事情的。

由于您使用 jQuery 来处理这些事件，因此您甚至可以拥有多个处理程序。

# java - java程序中的编译错误

> ID：16159333
> 
> 赞同：-1
> 
> 时间：2013-04-23T01:20:34.430
> 
> 标签：java

我编写了以下程序，程序抛出编译错误为

我不知道为什么会出现错误，因为所有分号和括号似乎都已到位

```
import java.io.*;

public class Solution {
  public static void main(String args[]) throws Exception {
    long coords[5000][2];
    long number;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    try {
      number = Long.parseLong(br.readline());  // take no of inputs
      //take all co ordinates and store it in 2d array
      for(long i=0;i<number;i++) {  
        coords[i][0] = Long.parseLong(br.readline());
        coords[i][1] = Long.parseLong(br.readline());
      }
    } catch(NumberFormatException e) {
      System.out.println("Number Format Exception:");
    }

    if(check_line(coords,number)) {
      System.out.println("YES");
    } else {
      System.out.println("NO");
    }
  }

  public boolean check_line(long coords[][], long limit) {
    long x;

    for(long i=0;i<no;i++) {
      x = coords[i][0];
      if(coords[x][0] == x)
      return true;
      else {
        coords[i][0] = coords[x][0];
        coords[x][0] = x;
      }
    }

    return false;
  }
} 
```

编译错误如下：

```
Solution.java:8: error: ']' expected
long coords[5000][2];
^
Solution.java:8: error: illegal start of expression
long coords[5000][2];
^
Solution.java:8: error: ';' expected
long coords[5000][2];
^ 
Solution.java:8: error: not a statement
long coords[5000][2]; 
^
Solution.java:8: error: ';' expected
long coords[5000][2];
^ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:22:07.617

这是不正确的语法，正确的是 `long coords[][] = new long[5000][2];` ，您似乎将其与 C 的某些派生混淆了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:21:47.633

这不是创建数组的正确方法：

```
long coords[5000][2]; 
```

它应该是：

```
long coords[][] = new long[5000][2]; 
```

`=`请记住，为变量赋值时必须始终使用符号。

# macos - OSX：文件是为存档而构建的，它不是被链接的架构（i386）

> ID：16159335
> 
> 赞同：0
> 
> 时间：2013-04-23T01:20:54.903
> 
> 标签：macos, g++

我有以下生成文件：

```
PROG    = tracecone
RBASE= /Users/owner/Documents/raytrace
GDIR=$(RBASE)/Graphics
MDIR=$(RBASE)/VrMath
ODIR=$(RBASE)/OpenglRender
MANDIR=$(RBASE)/RaytraceMgr

CFLAGS  = -w -s -O2 -ansi -DSHM -m32
XLIBS   = -lX11 -lXext -lXmu -lXext -lXmu -lXt -lXi -lSM -lICE
LIBS    = -lglut -lGLU -lGL
RAYLIBS = -lraygraph -lvrmath
INCLS   = -I/usr/X11R6/include -I/usr/X11/include/GL
INCL1   = -I$(GDIR) -I../RayTrace -I$(GDIR) -I$(MDIR) -I$(ODIR) -I$(MANDIR) 
LIBDIR  = -L/usr/X11/lib -L/usr/X11R6/lib -L$(GDIR) -L$(MDIR)
#source codes
SRCS = $(PROG).cpp 

#substitute .cpp by .o to obtain object filenames
OBJS = $(SRCS:.cpp=.o)
#in ../Graphics
OBJOD = $(ODIR)/GlutRenderer.o
OBJO = GlutRenderer.o
OBJMAND = $(MANDIR)/SceneDescription.o
OBJMAN = SceneDescription.o
OBJ_temp = ../RayTrace/RayTraceData.o

#$< evaluates to the target's dependencies, 
#$@ evaluates to the target

$(PROG): $(OBJS)  
    g++ -o  $@  -m32 $(OBJ_temp) $(OBJS)  $(OBJOD) $(OBJMAND)  $(LIBDIR) $(LIBS) $(XLIBS) $(RAYLIBS)

$(OBJS): 
    g++ -c -m32 $*.cpp $(INCLS) $(INCL1)

$(OBJ1):
    cd $(GDIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJM):
    cd $(MDIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJO):
    cd $(ODIR); g++ -m32 -c $*.cpp $(INCLS)

$(OBJMAN):
    cd $(MANDIR); g++ -m32 -c $*.cpp $(INCLS)
clean:
    rm $(OBJS) 

clean1:
    rm $(OBJD1) 
```

我收到以下错误：

```
 g++ -c -m32 tracecone.cpp -I/usr/X11R6/include -I/usr/X11/include/GL -I/Users/owner/Documents/raytrace/Graphics -I../RayTrace -I/Users/owner/Documents/raytrace/Graphics -I/Users/owner/Documents/raytrace/VrMath -I/Users/owner/Documents/raytrace/OpenglRender -I/Users/owner/Documents/raytrace/RaytraceMgr 
        g++ -o  tracecone  -m32 ../RayTrace/RayTraceData.o tracecone.o  /Users/owner/Documents/raytrace/OpenglRender/GlutRenderer.o /Users/owner/Documents/raytrace/RaytraceMgr/SceneDescription.o  -L/usr/X11/lib -L/usr/X11R6/lib -L/Users/owner/Documents/raytrace/Graphics -L/Users/owner/Documents/raytrace/VrMath -lglut -lGLU -lGL -lX11 -lXext -lXmu -lXext -lXmu -lXt -lXi -lSM -lICE -lraygraph -lvrmath
        ld: warning: ld: warning: ld: warning: ignoring file /Users/owner/Documents/raytrace/OpenglRender/GlutRenderer.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /Users/owner/Documents/raytrace/OpenglRender/GlutRenderer.oignoring file /Users/owner/Documents/raytrace/RaytraceMgr/SceneDescription.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /Users/owner/Documents/raytrace/RaytraceMgr/SceneDescription.oignoring file ../RayTrace/RayTraceData.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): ../RayTrace/RayTraceData.o

ld: warning: ignoring file /Users/owner/Documents/raytrace/Graphics/libraygraph.a, file was built for archive which is not the architecture being linked (i386): /Users/owner/Documents/raytrace/Graphics/libraygraph.a
        ld: warning: ignoring file /Users/owner/Documents/raytrace/VrMath/libvrmath.a, file was built for archive which is not the architecture being linked (i386): /Users/owner/Documents/raytrace/VrMath/libvrmath.a
        Undefined symbols for architecture i386:
          "_BackgroundColorR3", referenced from:
              RayTrace(int, VectorR3 const&, VectorR3, VectorR3&, long)in tracecone.o
          "_Cdims", referenced from:
              ResizeWindow(int, int)in tracecone.o
          "_GlobalAmbientR3", referenced from:
              CalcAllDirectIllum(VectorR3 const&, VisiblePoint const&, VectorR3&, long)in tracecone.o
              RenderWithGlut()     in tracecone.o
          "_LightArray", referenced from:
              CalcAllDirectIllum(VectorR3 const&, VisiblePoint const&, VectorR3&, long)in tracecone.o
              RenderWithGlut()     in tracecone.o
          "_MainView", referenced from:
              ResizeWindow(int, int)in tracecone.o
              mySpecialFunc(int, int, int)in tracecone.o
              SetupRayTraceWorld()     in tracecone.o
              RayTraceView()     in tracecone.o
              RenderWithGlut()     in tracecone.o
          "_NumLights", referenced from:
              CalcAllDirectIllum(VectorR3 const&, VisiblePoint const&, VectorR3&, long)in tracecone.o
              RenderWithGlut()     in tracecone.o
          "_NumObjects", referenced from:
              SeekIntersection(VectorR3 const&, VectorR3 const&, double*, VisiblePoint&, long)in tracecone.o
              ShadowFeeler(VectorR3 const&, Light const&, long)in tracecone.o
              SetupRayTraceWorld()     in tracecone.o
              RenderWithGlut()     in tracecone.o
          "_ViewObj", referenced from:
              SeekIntersection(VectorR3 const&, VectorR3 const&, double*, VisiblePoint&, long)in tracecone.o
              ShadowFeeler(VectorR3 const&, Light const&, long)in tracecone.o
              SetupRayTraceWorld()     in tracecone.o
              RenderWithGlut()     in tracecone.o
          "SetUpLights()", referenced from:
              SetupRayTraceWorld()     in tracecone.o
          "SetUpMainView()", referenced from:
              SetupRayTraceWorld()     in tracecone.o
          "SetUpMaterials()", referenced from:
              SetupRayTraceWorld()     in tracecone.o
          "DirectIlluminateViewPos(VectorR3 const&, VectorR3 const&, VectorR3 const&, Light const&, MaterialBase const&, VectorR3&, VectorR3 const&)", referenced from:
              DirectIlluminateViewPos(VisiblePoint const&, VectorR3 const&, Light const&, VectorR3&, VectorR3 const&)in tracecone.o
          "GetOrtho(VectorR3 const&, VectorR3&, VectorR3&)", referenced from:
              ViewableCone::SetCenterAxis(VectorR3 const&)  in tracecone.o
          "CameraView::RotateViewUp(double)", referenced from:
              mySpecialFunc(int, int, int)in tracecone.o
          "CameraView::PixelDirPreCalc()", referenced from:
              CameraView::SetDirection(VectorR3 const&)  in tracecone.o
              CameraView::SetDirection(float const*)in tracecone.o
              CameraView::SetDirection(double const*)in tracecone.o
              CameraView::SetDirection(double, double, double)in tracecone.o
          "CameraView::RecalcPixeldUdV()", referenced from:
              CameraView::SetScreenDimensions(double, double)in tracecone.o
              CameraView::SetScreenPixelSize(int, int)in tracecone.o
          "CameraView::RotateViewRight(double)", referenced from:
              mySpecialFunc(int, int, int)in tracecone.o
          "CameraView::CalcScreenCenter()", referenced from:
              CameraView::SetPosition(VectorR3 const&)  in tracecone.o
              CameraView::SetPosition(float const*)in tracecone.o
              CameraView::SetPosition(double const*)in tracecone.o
              CameraView::SetPosition(double, double, double)in tracecone.o
              CameraView::SetDirection(VectorR3 const&)  in tracecone.o
              CameraView::SetDirection(float const*)in tracecone.o
              CameraView::SetDirection(double const*)in tracecone.o
              ...
          "CameraView::RescaleDistanceOfViewer(double)", referenced from:
              mySpecialFunc(int, int, int)in tracecone.o
          "PixelArray::ClampAndDrawFloats()", referenced from:
              PixelArray::Draw()      in tracecone.o
          "PixelArray::SetSize(int, int)", referenced from:
              ResizeWindow(int, int)in tracecone.o
              PixelArray::PixelArray(int, int)in tracecone.o
          "GlutRenderer::RenderViewable(ViewableBase const&)", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::FinishRendering()", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::SetupCameraView(CameraView const&, double, double)", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::SetGlobalAmbientLight(VectorR3 const&)", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::SetGlobalAmbientLight(double, double, double)", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::AddLight(Light const&)", referenced from:
              RenderWithGlut()     in tracecone.o
          "GlutRenderer::GlutRenderer()", referenced from:
              RenderWithGlut()     in tracecone.o
          "Material::Default", referenced from:
              ViewableCone::Reset()      in tracecone.o
          "ViewableBase::CalcExtentsInBox(AABB const&, AABB&) const", referenced from:
              vtable for ViewableBasein tracecone.o
          "ViewableBase::CalcAABB(AABB&) const", referenced from:
              vtable for ViewableBasein tracecone.o
          "Material::CalcLocalLighting(VectorR3&, Light const&, VectorR3 const&, double, VectorR3 const&, VectorR3 const&, VectorR3 const&, VectorR3 const*) const", referenced from:
              vtable for Materialin tracecone.o
          "Material::Clone() const", referenced from:
              vtable for Materialin tracecone.o
          "vtable for ViewableCone", referenced from:
              ViewableCone::ViewableCone()in tracecone.o
          NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
        ld: symbol(s) not found for architecture i386
        collect2: ld returned 1 exit status
        make: *** [tracecone] Error 1 
```

如何避免以下错误：

如果这很重要，我正在使用 OSX。

```
File was built for archive which is not the architecture being linked (i386) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:48:00.453

对于 GlutRenderer.o、SceneDescription.o、RayTraceData.o 文件：将它们添加到您的干净部分和`make clean`. 现在您只清理一个文件：tracecone.o。`-m32`在您将标志添加到您的生成文件之前，可能已经构建了其他目标文件。您也可以手动删除所有目标文件。
在源码根目录下运行`find . | grep '\.o$'`，检查清理后是否还有目标文件。

对于 libraygraph.a 和 libvrmath.a：这些库也必须使用`-m32`标志构建。

# javascript - Angularjs $scope 在微风js回调中没有更新

> ID：16159347
> 
> 赞同：0
> 
> 时间：2013-04-23T01:21:56.327
> 
> 标签：javascript, angularjs, breeze

我正在尝试使用微风来执行与使用 angualar 的 $http 相同的调用。由于某种原因，$scope 在微风回调中似乎不起作用。

代码：

```
<!DOCTYPE html>
<html ng-app="">
<head>
    <meta name="viewport" content="width=device-width" />
    <title>App</title>
</head>
<body ng-controller="TextController">
    <div>
        <p>{{textData1}}</p>
        <p>{{textData2}}</p>
        <ul>
            <li ng-repeat="patient in patients">     
                <span>{{patient.FirstName}}</span>
            </li>
        </ul>
    </div>
    <script src="/scripts/jquery-1.8.2.js"></script>
    <script src="/scripts/q.js"></script>
    <script src="/scripts/breeze.min.js"></script>
    <script src="/Scripts/angular.js"></script>
    <script type="text/javascript">

        function TextController($scope, $http){

            breeze.config.initializeAdapterInstance("modelLibrary", "backingStore", true);
            var serviceName = "/api/breeze";
            var manager = new breeze.EntityManager(serviceName);
            var query = breeze.EntityQuery.from("Patients");

            $scope.textData1 = "Waiting..";
            $scope.textData2 = "Waiting..";

            manager.executeQuery(query).
                then(function (data) {
                    console.log(data);
                    $scope.textData1 = 'Breeze';
                    //$scope.patients = [];
                    //$scope.patients = data;
                }).
                fail(function(error) {
                    $scope.textData1 = error.message;
                });

            $http({ method: 'GET', url: '/api/patients' }).
                  success(function (data, status, headers, config) {
                      console.log(data);
                      $scope.textData2 = 'Angular';
                      //$scope.patients = [];
                      //$scope.patients = data;
                  }).
                  error(function (data, status, headers, config) {
                  });
        }
    </script>
</body>
</html> 
```

在上面的代码中，当我将数据打印到控制台时，角度 $http 调用和微风调用都会返回数据。当它运行时，只有 textData2 绑定更新为“Angular”，textData1 绑定不会更新为“Breeze”。我在调用控制台时在函数中，但绑定没有更新。如果我尝试将数据列表绑定到范围中的“患者”引用，也会发生同样的事情。我对此进行了评论以显示我的问题的最简单版本。

说得通？想法？

布赖恩

# actionscript-3 - flash builder 4：找不到 flash.net.SecureSocket

> ID：16159349
> 
> 赞同：0
> 
> 时间：2013-04-23T01:22:05.180
> 
> 标签：actionscript-3, flash

我安装了 Flash Builder 4。我创建了一个新的 Actionscript 项目，当我尝试导入 flash.net.SecureSocket 时，我收到一个编译错误，提示找不到 flash.net.SecureSocket。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:12:08.007

我的猜测是您正在开发移动应用程序，并且在移动设备或电视上不支持 ServerSocket 或 Socket，请参阅文档顶部的注释：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SecureSocket.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SecureSocket.html)

也就是说，有一个适用于 iOS 的 Socket 类的 ANE，我个人计划最终为 Android 端编写一个，并且他们还提供了一个 Socket 类（我不知道为什么 Adob​​e 不支持这个盒子）。

# sql - Oracle 按字段分组 - 字段

> ID：16159355
> 
> 赞同：0
> 
> 时间：2013-04-23T01:23:14.257
> 
> 标签：sql, oracle, group-by

我是 SQL 新手，我有 2 个字段，其中一个需要从另一个中减去并显示为总计。我尝试将它放在我的选择语句`AS`Total 中，但它引发了一个错误，所以我虽然会尝试`Group By`，但效果也不好。如何在 SQL 中将列 Total 作为收入 - 成本？

```
SELECT PROJECT_NAME, DESCRIPTION, PROJECT_DATE, COST, REVENUE
FROM PROJECT
GROUP BY (REVENUE - COST) AS TOTAL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:24:56.140

如果我理解您的要求，您可以使用：

```
SELECT PROJECT_NAME, 
  DESCRIPTION, 
  PROJECT_DATE, 
  REVENUE,
  COST,
  (REVENUE - COST) as Total
FROM PROJECT 
```

`GROUP BY`如果您尝试聚合数据，将使用。例如，如果您的表为每个项目有多个条目并且您想要一个总数，那么您可以使用：

```
SELECT PROJECT_NAME, 
  DESCRIPTION, 
  PROJECT_DATE, 
  SUM(REVENUE - COST) as Total
FROM PROJECT
GROUP BY PROJECT_NAME, DESCRIPTION, PROJECT_DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:30:45.200

你可以试试

```
SELECT PROJECT_NAME, DESCRIPTION, PROJECT_DATE, COST, REVENUE, ( REVENUE - COST ) profit
FROM PROJECT 
```

# mongodb - MongoDB 2.4 C++ 驱动程序导致链接错误

> ID：16159356
> 
> 赞同：0
> 
> 时间：2013-04-23T01:23:16.217
> 
> 标签：mongodb

[我从http://dl.mongodb.org/dl/cxx-driver](http://dl.mongodb.org/dl/cxx-driver)下载了最新的代码，并将其编译为 Ubuntu 12.04 和 12.10 上的静态库。我的 GCC 是 4.7，并使用 CMake 作为构建系统。Boost 库：Ubuntu 12.04 上的 1.48，Ubuntu 12.10 上的 1.49。

然后，我的两个项目使用 mongodb 客户端库编译成功，但第三个项目出现以下链接错误：

```
Linking CXX executable cml_cloud 
```

/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/libmongoclient.a(log.o): 在函数`mongo::LoggingManager::start(std::string const&, bool)': log.cpp:(.text._ZN5mongo14LoggingManager5startERKSsb[_ZN5mongo14LoggingManager5startERKSsb]+0x4c): undefined reference to`boost::filesystem3::detail::status (boost::filesystem3::path const&, boost::system::error_code*)' log.cpp:(.text._ZN5mongo14LoggingManager5startERKSsb[_ZN5mongo14LoggingManager5startERKSsb]+0x86): 未定义对`boost::filesystem3::detail::status(boost::filesystem3::path const&, boost::system::error_code*)' log.cpp:(.text._ZN5mongo14LoggingManager5startERKSsb[_ZN5mongo14LoggingManager5startERKSsb]+0xb8): undefined reference to`boost::filesystem3::detail::status( boost::filesystem3::path const&, boost::system::error_code*)' collect2: 错误: ld 返回 1 退出状态 make[2]: *** [bin/cml_cloud] 错误 1 ​​make[1]: *** [bin/ CMakeFiles/cml_cloud.dir/all] 错误 2 make: *** [all] 错误 2

我以前从未遇到过这种问题。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:26:59.703

我修好了它。这与mongodb库无关，我只是更改了CMakeLists.txt中target_link_libraries的顺序。

原来的说法是：

```
target_link_libraries( cml_cloud ${CMAKE_THREAD_LIBS_INIT} ${Boost_LIBRARIES} cppcms mongoclient booster loki cryptopp) 
```

现在看起来像：

```
target_link_libraries( cml_cloud ${CMAKE_THREAD_LIBS_INIT} cppcms mongoclient booster loki cryptopp ${Boost_LIBRARIES}) 
```

我现在很高兴，但是有人知道为什么它可以纠正这个问题吗？

# ruby-on-rails - ActiveRecord 是否已经将手动查询包装到事务中？

> ID：16159359
> 
> 赞同：6
> 
> 时间：2013-04-23T01:24:01.760
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个查询开始和结束这样的事务：

```
transaction = "BEGIN; UPDATE articles set x = 1 where id = 1; UPDATE articles set x = 2 where id = 2; END;"

ActiveRecord::Base.connection.execute(transaction) 
```

我的问题：我什至需要 BEGIN 和 END 吗？ActiveRecord 是否已经将我的查询包装到事务中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T02:09:35.563

[ActiveRecord 提供了在 AR 类和实例上都可用的事务方法](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)，它将在给定块中包装查询。它甚至支持嵌套事务。

您可以将代码重写为：

```
sql = <<-SQL
UPDATE articles set x = 1 where id = 1; 
UPDATE articles set x = 2 where id = 2;
SQL

ActiveRecord::Base.transaction do
  ActiveRecord::Base.connection.execute(sql)
end 
```

# php - 使用 PHPExcel 计算 excel 公式的输出

> ID：16159360
> 
> 赞同：2
> 
> 时间：2013-04-23T01:24:13.080
> 
> 标签：php, phpexcel

我有一个包含公式的 Excel 电子表格。我想知道使用公式并根据给定输入计算输出的最佳方法是什么。

我的第一个倾向是将展开加载到 PHPExcel 对象中，并将公式中涉及的每个单元格的值设置为给定的输入，然后最终读取结果。

编辑：我尝试使用以下方法获取公式的计算值：

```
getCalculatedValue() 
```

我在应该包含“原样”传播的计算值的单元格上运行此方法，但它会吐出 Excel5.php 和 MathTrig.php 的未定义偏移错误以及不正确的结果：

```
Notice: Undefined offset: 437 in /Applications/MAMP/htdocs/bang/Classes/PHPExcel/Reader/Excel5.php on line 5679

Notice: Undefined offset: 438 in /Applications/MAMP/htdocs/bang/Classes/PHPExcel/Reader/Excel5.php on line 5679

Notice: Undefined offset: 439 in /Applications/MAMP/htdocs/bang/Classes/PHPExcel/Reader/Excel5.php on line 5679

Notice: Undefined offset: 9 in /Applications/MAMP/htdocs/bang/Classes/PHPExcel/Calculation/MathTrig.php on line 1171 
```

PHPExcel中调试的公式和堆栈跟踪是：

```
Value is =SUMIF(Sheet3!A1:H530,"=212410000",Sheet3!H1:H530)
Parser Stack :-
Array
(
    [0] => Array
        (
            [type] => Cell Reference
            [value] => Sheet3!A1
            [reference] => Sheet3!A1
        )

    [1] => Array
        (
            [type] => Cell Reference
            [value] => Sheet3!H530
            [reference] => Sheet3!H530
        )

    [2] => Array
        (
            [type] => Binary Operator
            [value] => :
            [reference] => 
        )

    [3] => Array
        (
            [type] => Value
            [value] => "=212410000"
            [reference] => 
        )

    [4] => Array
        (
            [type] => Cell Reference
            [value] => Sheet3!H1
            [reference] => Sheet3!H1
        )

    [5] => Array
        (
            [type] => Cell Reference
            [value] => Sheet3!H530
            [reference] => Sheet3!H530
        )

    [6] => Array
        (
            [type] => Binary Operator
            [value] => :
            [reference] => 
        )

    [7] => Array
        (
            [type] => Operand Count for Function SUMIF()
            [value] => 3
            [reference] => 
        )

    [8] => Array
        (
            [type] => Function
            [value] => SUMIF(
            [reference] => 
        )

) 
```

Excel5.php 中触发错误的行是：

```
 // offset: 1; size: 2; one-based index to definedname record
                $definedNameIndex = self::_GetInt2d($formulaData, 1) - 1;
                // offset: 2; size: 2; not used
                $data = $this->_definedname[$definedNameIndex]['name']; // errors here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:36:23.580

您可以在调试模式下运行计算引擎，以获取有关它正在做什么以帮助诊断此类问题的更多详细信息：

```
$cell = 'C3';
//  enable debugging
PHPExcel_Calculation::getInstance()->writeDebugLog = true;

$sheet = $objPHPExcel->getActiveSheet();
$formulaValue = $sheet->getCell($cell)->getValue();
echo '<b>'.$cell.' Value is </b>'.$formulaValue."<br />\n";

$calculate = false;
try {
    $tokens = PHPExcel_Calculation::getInstance()->parseFormula($formulaValue,$sheet->getCell($cell));
    echo '<b>Parser Stack :-</b><pre>';
    print_r($tokens);
    echo '</pre>';
    $calculate = true;
} catch (Exception $e) {
    echo "PARSER ERROR: ".$e->getMessage()."<br />\n";

    echo '<b>Parser Stack :-</b><pre>';
    print_r($tokens);
    echo '</pre>';
}

if ($calculate) {
    //  calculate
    try {
        $cellValue = $sheet->getCell($cell)->getCalculatedValue();
    } catch (Exception $e) {
        echo "CALCULATION ENGINE ERROR: ".$e->getMessage()."<br />\n";

        echo '<h3>Evaluation Log:</h3><pre>';
        print_r(PHPExcel_Calculation::getInstance()->debugLog);
        echo '</pre>';
    }
} 
```

**编辑**

不能保证，因为我需要对其进行更多测试，但要修改 Classes/PHPExcel/Calculation/MathTrig.php 文件中的第 1171 行

此行当前读取

```
$returnValue += $sumArgs[$key]; 
```

将其更改为

```
$returnValue += $sumArgs[$key % count($sumArgs)]; 
```

假设条件范围内的单元格数（在您的情况下为 Sheet3!A1:H530）与总和范围内的单元格数（Sheet3!H1:H530）相匹配，当条件引用 8 列时显然不是这种情况和 530 行，而总和范围仅引用单列中的 530 行。

**编辑#2**

虽然上面的编辑建议将修复错误，但它会返回错误的结果。如果您指定 A1:H530 作为标准，但仅 H1:H530 作为 MS Excel 中的总和值，则它仅测试第一列（以匹配潜在的总和结果数）并忽略标准中的列 BH。

一个快速的解决方法可能是修改第 1161 行：

```
if (empty($sumArgs)) {
    $sumArgs = $aArgs;
} 
```

至

```
if (empty($sumArgs)) {
    $sumArgs = $aArgs;
} elseif (count($aArgs) > count($sumArgs)) {
    $aArgs = array_slice($aArgs,0,count($sumArgs));
} 
```

并将第 1171 行（现在为 1173）恢复为

```
$returnValue += $sumArgs[$key]; 
```

我仍然需要检查 flattenArray 是否正确排序单元格，但这将是一个更接近的修复

**编辑#3**

修复 PHPExcel 的计算引擎以处理不匹配的标准/求和数组需要更长的时间（我上面的修复不起作用，因为 PHPExcel 按行展平，而这需要按列展平） - 但作为临时修复，将您的公式更改为仅使用条件范围中的一列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:47:20.523

如果你做 toArray 你可以：

```
$objWorksheet = $objPHPExcel->setActiveSheetIndex($index);
$arrExcelObject = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true); 
```

toArray 函数记录在代码中：

```
public function toArray($nullValue = null, $calculateFormulas = true, $formatData = true, $returnColumnRef = false) 
```

所以第二个参数表示你想从公式中计算，默认设置为true。

# c++ - 在 XCode 4.6.2 上使用 cryptopp 静态库在 iOS 应用程序中引发异常

> ID：16159363
> 
> 赞同：0
> 
> 时间：2013-04-23T01:24:28.013
> 
> 标签：c++, ios, objective-c, xcode, crypto++

这是我所拥有的一些细节。

*   单独编译的 crypto++ 构建并具有静态库 (libcryptopp.a)。
*   创建示例单视图应用程序并链接到上述库，创建新组以包含 crypto++ 标头。这些标头不会复制到应用程序的目标文件夹中。
*   在应用程序中创建了一个新的 .mm 文件，我正在从中执行一些我想暂时发送到控制台的示例代码。请注意，此示例代码与测试文件 SymmetricCipher.cpp 中提供的代码基本相同。

    * * *

*   项目构建设置下的设置：

    Apple LLVM 编译器 4.2 设置

*   C 语言方言 - GNU99
*   C++ 语言方言 - GNU++11
*   C++ 标准库 - libstdc++

    * * *

*   对现有项目进行完全相同的更改，并在现有文件中插入示例代码以测试输出。这没有任何问题。

*   独立应用程序中的代码引发异常**“EXC_BAD_ACCESS (code=2, address=0x20)”**

    ```
     #import "TestView.h"

      //Include C++ headers
      #ifdef __cplusplus
      #include "aes.h"

      // Includes all required Crypto++
      // Block Cipher Headers
      #include "SymmetricCipher.h"

      #include <iostream>
      #include <iomanip>

      // Crypto++ Includes
      #include "modes.h" // xxx_Mode< >
      #include "filters.h" // StringSource and
      // StreamTransformation

      #include "sha.h"
      #include "base64.h"

      #endif

      @implementation TestView

      - (id)initWithFrame:(CGRect)frame
      {
          self = [super initWithFrame:frame];
          if (self) {
              // Initialization code
             }
          return self;
      }

      - (void)testBlock
      {

      //Test code
      byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];

      ::memset( key, 0x01, CryptoPP::AES::DEFAULT_KEYLENGTH );
      ::memset( iv, 0x01, CryptoPP::AES::BLOCKSIZE );

      // Message M
      std::string PlainText = "Yoda said,Do or Do Not. There is no try.";

      // Cipher Text Sink
      std::string CipherText;

      // Encryptor
      CryptoPP::CBC_Mode<CryptoPP::AES>::Encryption
      Encryptor( key, sizeof(key), iv );

      // Encryption
      CryptoPP::StringSource( PlainText, true,
                       new CryptoPP::StreamTransformationFilter( Encryptor, new             CryptoPP::StringSink(CipherText )) // StreamTransformationFilter
                       ); // StringSource

      // example of hashing followed by base64 encoding, using filters
      std::string digest;

      CryptoPP::SHA256 hash;  // don't use MD5 anymore. It is considered insecure

      CryptoPP::StringSource foo(PlainText, true,
                           new CryptoPP::HashFilter(hash, new CryptoPP::Base64Encoder (new CryptoPP::StringSink(digest))));

      NSLog(@"SHA256 Hash %s", digest.c_str());

      }

      @end 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T03:39:46.787

Crypto++ 代码很好。你的问题在别处。

与其尝试交叉编译 Crypto++，不如尝试[在 GitHub 上尝试 cryptopp-5.6.2-ios](https://github.com/noloader/cryptopp-5.6.2-ios)。`armv7`它为 6.1 SDK ( , `armv7s`, )提供了一个预构建的 fat 库`i386`；`armv7`以及用于 7.0 SDK ( , `armv7s`, `arm64`, `i386`)的预构建 fat 库。

![Crypto++/iOS 测试代码](https://i.stack.imgur.com/QahoC.png)

# python - Sympy plot：传入符号表达式列表

> ID：16159365
> 
> 赞同：1
> 
> 时间：2013-04-23T01:24:44.983
> 
> 标签：python, sympy

我用 sympy 创建了未知数量的符号表达式。

例如：

```
f1 = x
f2 = exp(x)
...
fn = ... 
```

由于它是一个未知的数量，我不能简单地做：`plot(f1, f2, f3)`，所以我想传入一个符号表达式列表。我不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:41:10.330

使用[参数解包运算符](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/), `*`。

```
plot(*[f1, f2, f3]) 
```

相当于

```
plot(f1, f2, f3) 
```

# ruby-on-rails - SendGrid 和 Rails 错误

> ID：16159366
> 
> 赞同：1
> 
> 时间：2013-04-23T01:24:45.513
> 
> 标签：ruby-on-rails, sendgrid

我正在尝试在我的 Rails 应用程序上设置 SendGrid，我一直在关注这个：[http ://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html](http://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html)

到目前为止，我已经设置了我的`config/environment.rb`

```
ActionMailer::Base.smtp_settings = {
  :user_name => *********, 
  :password => *********, 
  :domain => *********, 
  :address => "smtp.sendgrid.net",
  :port => 587,
  :authentication => :plain,
  :enable_starttls_auto => true
} 
```

制作了一个名为的新文件`app/models/notifier.rb`，其中包含

```
class Notifier < ActionMailer::Base
  include SendGrid
  default :from => "*****@******.com"

  # send a signup email to the user, pass in the user object that contains the user's email address
  def signup_email(user)
    mail( :to => user.email, :subject => "Thanks for signing up" )
  end
end 
```

在 rails 控制台中，会发生这种情况。

```
>> @new_user = User.new(:email => 'blah@blah.com')
 => #<User id: nil, email: "blah@blah.com", created_at: nil, updated_at: nil> 
>> @new_user.save
   (0.2ms)  BEGIN
  SQL (1.0ms)  INSERT INTO "users" ("created_at", "email", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["created_at", Tue, 23 Apr 2013 01:21:17 UTC +00:00], ["email", "blah@blah.com"], ["updated_at", Tue, 23 Apr 2013 01:21:17 UTC +00:00]]
   (1.8ms)  COMMIT
 => true 
>> Notifier.signup_email @new_user
ActionView::MissingTemplate: Missing template notifier/signup_email with "mailer". Searched in:
* "notifier" 
```

我究竟做错了什么？我不明白为什么我需要一个模板。我是 Rails 的新手，所以如果这很明显，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:49:15.627

问题是`ActionMailer`在 Rails 中默认使用模板。您应该查看[rails 的邮件指南](http://guides.rubyonrails.org/action_mailer_basics.html)，它的详细信息比我在这里要描述的要多。

要解决此问题，您应该创建一个`app/views/notifier/signup_email.html.erb`包含一些内容的模板。

* * *

顺便说一句，如果您想在不使用模板的情况下发送电子邮件，则需要`deliver`在创建邮件程序后立即调用该函数。有关详细信息，请参阅此堆栈溢出问题：

[如何在没有模板的情况下使用 rails 发送邮件？](https://stackoverflow.com/questions/4916557/how-can-i-send-mail-with-rails-without-a-template)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T13:36:59.517

def signup_email(user) mail(:to => user.email, :subject => "感谢注册") end

替换为

def signup_email(user) mail( :to => user.email, :subject => "感谢注册", :body => "hello" ) end

# git - Git 的 GUI 客户端

> ID：16159369
> 
> 赞同：2
> 
> 时间：2013-04-23T01:24:56.500
> 
> 标签：git, user-interface, version-control, bazaar

首先，这不是一个重复的问题。

我正在使用[Bazaar Explorer](http://doc.bazaar.canonical.com/explorer/en/)进行 bzr 版本控制。它运行良好并且满足我的所有需求，但最近我发现 Git 比 bzr 运行得更好，所以我决定使用它，但我遇到了 Git 可用性问题，因为大多数 Git 的 Gui 不像 Bazaar Explorer 那样用户友好，所以我希望你的建议基于关于最佳 git 的 GUI 用户友好或与 Bazaar Explorer 最相似的实践体验？

附言

*   我已经阅读了[建议的 git Gui 工具](https://git.wiki.kernel.org/index.php/InterfacesFrontendsAndTools#Graphical_Interfaces)
*   我更喜欢从使用过 Bazaar Explorer 的人那里获得答案，或者至少对其进行测试。
*   我根本不使用商业产品。

# ruby - Ruby 哈希默认值行为

> ID：16159370
> 
> 赞同：48
> 
> 时间：2013-04-23T01:25:03.657
> 
> 标签：ruby, hash

我正在浏览 Ruby Koans，我点击了 #41，我相信这是：

```
def test_default_value_is_the_same_object
  hash = Hash.new([])

  hash[:one] << "uno"
  hash[:two] << "dos"

  assert_equal ["uno","dos"], hash[:one]
  assert_equal ["uno","dos"], hash[:two]
  assert_equal ["uno","dos"], hash[:three]

  assert_equal true, hash[:one].object_id == hash[:two].object_id
end 
```

它无法理解这种行为，所以我用谷歌搜索它并发现[使用 Hash 默认值时奇怪的 ruby​​ 行为，例如 Hash.new([])](https://stackoverflow.com/questions/2698460/strange-ruby-behavior-when-using-hash-new)很好地回答了这个问题。

所以我理解它是如何工作的，我的问题是，为什么在使用过程中不会改变一个默认值，比如一个递增的整数？例如：

```
puts "Text please: "
text = gets.chomp

words = text.split(" ")
frequencies = Hash.new(0)
words.each { |word| frequencies[word] += 1 } 
```

这将接受用户输入并计算每个单词的使用次数，它之所以有效，是因为始终使用默认值 0。

我觉得这与`<<`操作员有关，但我希望得到解释。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-23T10:17:01.073

其他答案似乎表明行为的差异是由于`Integer`s 是不可变的而`Array`s 是可变的。但这是误导。不同之处不在于 Ruby 的*创建者*决定让一个不可变而另一个可变。不同之处在于*，**程序员*决定改变一个而不改变另一个。

问题不在于`Array`s 是否可变，而在于你是否*改变*了它。

`Array`您可以通过使用s来获得上面看到的两种行为。观察：

## `Array`一种带有突变的默认值

```
hsh = Hash.new([])

hsh[:one] << 'one'
hsh[:two] << 'two'

hsh[:nonexistent]
# => ['one', 'two']
# Because we mutated the default value, nonexistent keys return the changed value

hsh
# => {}
# But we never mutated the hash itself, therefore it is still empty! 
```

## `Array`一种没有突变的默认值

```
hsh = Hash.new([])

hsh[:one] += ['one']
hsh[:two] += ['two']
# This is syntactic sugar for hsh[:two] = hsh[:two] + ['two']

hsh[:nonexistant]
# => []
# We didn't mutate the default value, it is still an empty array

hsh
# => { :one => ['one'], :two => ['two'] }
# This time, we *did* mutate the hash. 
```

## 一个新的，`Array`每次都不同的突变

```
hsh = Hash.new { [] }
# This time, instead of a default *value*, we use a default *block*

hsh[:one] << 'one'
hsh[:two] << 'two'

hsh[:nonexistent]
# => []
# We *did* mutate the default value, but it was a fresh one every time.

hsh
# => {}
# But we never mutated the hash itself, therefore it is still empty!

hsh = Hash.new {|hsh, key| hsh[key] = [] }
# This time, instead of a default *value*, we use a default *block*
# And the block not only *returns* the default value, it also *assigns* it

hsh[:one] << 'one'
hsh[:two] << 'two'

hsh[:nonexistent]
# => []
# We *did* mutate the default value, but it was a fresh one every time.

hsh
# => { :one => ['one'], :two => ['two'], :nonexistent => [] } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T01:35:59.060

这是因为`Array`在 Ruby 中是可变对象，所以你可以改变它的内部状态，但`Fixnum`不是可变的。因此，当您使用`+=`内部增加值时，它会得到（假设这`i`是我们对`Fixnum`对象的引用）：

1.  获取引用的对象`i`
2.  获取它的内部价值（让我们命名它`raw_tmp`）
3.  创建内部值是的新对象`raw_tmp + 1`
4.  将创建对象的引用分配给`i`

如您所见，我们创建了新对象，并且`i`现在引用了与开始时不同的东西。

另一方面，当我们使用`Array#<<`它时，它是这样工作的：

1.  获取引用的对象`arr`
2.  到它的内部状态附加给定元素

所以你可以看到它要简单得多，但它可能会导致一些错误。其中一个是您的问题，另一个是当展位尝试同时附加 2 个或更多元素时的线程竞赛。有时你可以只用其中的一些和内存中的颠簸结束，当你`+=`也在数组上使用时，你将摆脱这两个问题（或至少最小化影响）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:31:08.910

从[doc](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-default)，设置默认值具有以下行为：

> 返回默认值，如果密钥在 hsh 中不存在，则 hsh 将返回的值。另请参阅 Hash::new 和 Hash#default=。

因此，每次`frequencies[word]`未设置时，该单个键的值都设置为 0。

两个代码块之间存在差异的原因是数组在 Ruby 中是可变的，而整数则不是。

# php - 我提交后，带有下拉列表的 php javascript 表单在我的 _GET 中有 %24

> ID：16159372
> 
> 赞同：0
> 
> 时间：2013-04-23T01:25:29.957
> 
> 标签：php, javascript, html, mysql, forms

我正在提交表单，但`_GET`在 URL 中返回的方式存在一些问题

这是代码：

```
index.php/search?stmindate=2013-04-01&stmaxdate=2013-05-31&%24comname=teststring 
```

正如你所看到的，`2013-05-31`当`comname`我`&%24` 尝试在另一边获取它时，它不会以“teststring”的形式返回，我认为这是因为：

```
<form action="http://<?=$_SERVER["SERVER_NAME"]?>/index.php/search" method="GET">
  By  Start Date:<br/>
  Min Date:<?= date_input("stmindate", $stmindate, true) ?>
  Max Date:<?= date_input("stmaxdate", $stmaxdate, true) ?> 
  <select name="$comname">
    <option value="all">All</option>
    <?
      for ($scan = 0; $scan < count($Companies); $scan++) {
        $ty = $Companies[$scan]['name'];
        $sel = "";
        echo "<option $sel value=\"$ty\">$ty</option>".PHP_EOL;
      }
    ?>
  </select>
  <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:29:11.943

查看您的`<select name="$comname">`. 你想把美元符号拿出来。%24 是一种传递 $ 的 URL 友好方式。我认为你不想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:30:12.393

[http://www.obkb.com/dcljr/charstxt.html](http://www.obkb.com/dcljr/charstxt.html)

%24 是一个美元符号。它将其编码到 url 字符串中，您需要对 url 进行解码才能使用它，尽管您似乎不太可能希望在您的 URL 中使用 $ 符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:28:02.023

某些字符经过编码以在 URL 中使用。您只需要使用`urldecode()`将它们转换回来。

# jquery - 从 JSON 或纯 HTML 加载数据？

> ID：16159373
> 
> 赞同：1
> 
> 时间：2013-04-23T01:25:39.330
> 
> 标签：jquery, ajax, json, codeigniter

我正在使用 CodeIgniter 框架开发一个站点，并希望集成一些 AJAX 调用（使用 jQuery）。

该网站是关于赛马小费的（类似于足球小费，用户可以通过单击按钮提交小费）。我喜欢避免用户在提交小费时需要重新加载页面（如果没有 AJAX，他们将不得不一遍又一遍地重新加载页面）。

基本上我的想法是：（如果您有想法，请随时纠正我或给我更好的建议）

1.  用户提交他们的小费（比如第 1 场比赛）
2.  表单提交到服务器端 (PHP)，它会检查所有内容。如果没问题，它会返回一个“OK”标志。
3.  如果它收到“OK”标志，它会向服务器请求 Race #1 的数据
4.  服务器收到对 Race #1 数据的请求
5.  使用 jQuery，它将 Race #1 数据填充到浏览器中。

**我的问题是：**获取 JSON 数据并使用 javascript 将其填充到浏览器中会更好吗？或者更好地请求服务器端（在这种情况下为 CodeIgniter）生成特定的 HTML，然后使用 AJAX 获取它并使用 javascript/jQuery（即：）填充它`$("div#r1").html(fetched_data)`？

我知道 JSON 数据将是轻量级的，但我必须使用 JavaScript 填充数据，这取决于要求可能更容易或更难。

你对这个问题有什么看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:40:15.783

用json，json更好。

在php中发送html不是一个好的选择。从 php 中返回您的数据`json_encode()`。

编辑 ：

例如，你有一个这样的数组；

```
<?php
  $data = array(
    'races'=>array('race1'=>array('race','details','here'),'race2'),
    'horses' => array('horse1','horse2')
  );
?> 
```

所以你必须为每个不同的数据设置 html 代码。但是，如果您使用 json 发送此数据，您可以从您的视图中解析它或包含 javascript，并将数组中的每个项目设置为一个对象，并直接在您想要的任何地方使用。

json 示例；

```
//Ajax proccess here
success:function(response){
  if(response.races){
    $.each(response.races, function(i,item)){
      var $race = $('<div></div>');
      $race.addClass('race');
      $race.html('<h3>'+item.racename+'<h3>');
      $race.appendTo('#races');
    }
  }
} 
```

如您所见，您可以完全控制 json 对象。访问元素和创建新元素总是更容易处理。如果你没有使用过 json 对象；您将始终使用返回的 html 刷新所有数据。这就像因为忘记了“，”而从零开始写所有页面。

技术：Php 是服务器端，javascript 是客户端。所以你不能在你的服务器上做所有的事情，这不是一个聪明的举动。

技术示例：

```
<?php
$data = getDataFromDB();
if(count($data) > 0) //Proccess: 1
{
  $html = ''; //Proccess 2
  foreach($data as $race) //Process 3
  {
    $html .= '<div class="race"><h3>'.$race->name.'</h3></div>';
  }

  if($html != '') //Proccess 4
  {
    echo $html;
  }
}
?> 
```

但是，如果您只使用 json_encode 它将只有一个过程......

这就是为什么最好使用 ajax 处理 json 对象。

# java - 如何在java中从列表中创建一个选择？

> ID：16159374
> 
> 赞同：-5
> 
> 时间：2013-04-23T01:25:50.063
> 
> 标签：java

我正在处理一个输入选项列表，但我找不到一种方法可以通过下拉列表输入我的一些结果，而不是我输入。我该怎么办？

```
strSystolicBloodPressure =etSystolicBloodPressure.getText().toString();
strDiastolicBloodPressuretDiastolicBloodPressure.getText().toString();
strTemperatureCelcius = etTemperatureCelsius.getText().toString();
strSmokingType = etSmokingType.getText().toString();
strSmokingAmount = etSmokingAmount.getText().toString();
strCurrentSmoker = etCurrentSmoker.getText().toString();
strTimeSmoking = etTimeSmoking.getText().toString();
strGenetics = etGenetics.getText().toString();
strRace = etRace.getText().toString();
strSymptoms = etSymptoms.getText().toString();

int age = Integer.valueOf(strAge);
int sex = Integer.valueOf(strSex);
int bmi = Integer.valueOf(strBMI);
int systolic_blood_pressure = Integer.valueOf(strSystolicBloodPressure);
int diastolic_blood_pressure = Integer.valueOf(strDiastolicBloodPressure);
int temperature_celsius = Integer.valueOf(strTemperature);
int smoking_type = Integer.valueOf(strSmokingType);
int smoking_amount = Integer.valueOf(strSmokingAmount);
int current_smoker = Integer.valueOf(strCurrentSmoker);
int time_smoking = Integer.valueOf(strTimeSmoking);
int genetics = Integer.valueOf(strGenetics);
int race = Integer.valueOf(strRace);
int symptoms = Integer.valueOf(strSymptoms); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:33:44.157

答案很大程度上取决于您使用的 Web 框架。如果您使用 Wicket，您可以创建一个[DropDownChoice](https://cwiki.apache.org/WICKET/dropdownchoice-examples.html)。如果您使用 Spring MVC，您将使用模型中的选项填充 an并在相应的 JSP 中`List`创建一个。`<select>`

如果您提供有关您正在使用的技术堆栈的更多信息，我们可以为您提供更具体的指导。

# java - 从一个 java 程序生成的多个窗口框架

> ID：16159375
> 
> 赞同：0
> 
> 时间：2013-04-23T01:25:53.597
> 
> 标签：java, swing, user-interface, jframe

我目前正在编写 Catan 的 Java 实现。有没有办法运行程序，然后让它为游戏的每个玩家生成不同的帧。如果所有帧都在同一台机器上也没关系（我打算使用分屏显示器）。我应该为此研究 JFrame 吗？我对它没有太多经验，所以我不确定它是否可以做到这一点或者它有多容易。

# r - r 将两列“插槽”合二为一（如 zip）

> ID：16159377
> 
> 赞同：3
> 
> 时间：2013-04-23T01:26:03.990
> 
> 标签：r, merge

给定长度相等的两列（可能来自数据帧）*N*，我如何生成长度为*2N*的列，其中第一列的奇数条目和第二列的偶数条目？

假设我有以下数据框

```
df.1 <- data.frame(X = LETTERS[1:10], Y = 2*(1:10)-1, Z = 2*(1:10)) 
```

我怎样才能产生这个数据框`df.2`？

```
i <- 1
j <- 0
XX <- NA
while (i <= 10){
XX[i+j] <- LETTERS[i]
XX[i+j+1]<- LETTERS[i]
i <- i+1
j <- i-1
}

df.2 <- data.frame(X.X = XX, Y.Z = c(1:20)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:56:38.623

`ggplot2`具有`interleave`执行此操作的未导出功能。

虽然未导出，但它*确实*有一个帮助页面 ( `?ggplot2:::interleave`)

```
with(df.1, ggplot2:::interleave(Y,Z))
## [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:26:51.497

如果我理解正确，您想在数据框中创建一个长度是向量 X、Y 和 Z 两倍的新向量，然后希望 X 的所有元素占据这个新向量的奇数索引以及Y 偶数指数。如果是这样，那么下面的代码应该可以解决问题：

```
foo<-vector(length=2*nrow(df.1), mode='character')

foo[seq(from = 1, to = 2*length(df.1$X), by=2)]<-as.character(df.1$X)
foo[seq(from = 2, to = 2*length(df.1$X), by=2)]<-df.1$Y 
```

注意，我首先创建一个长度为 20 的空向量 foo，然后用 df.1$X 和 df.1$Y 的元素填充它。

干杯，

丹尼

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:37:55.453

您可以使用`melt`来自`reshape2`：

```
library(reshape2)
foo <- melt(df.1, id.vars='X')

> foo
   X variable value
1  A        Y     1
2  B        Y     3
3  C        Y     5
4  D        Y     7
5  E        Y     9
6  F        Y    11
7  G        Y    13
8  H        Y    15
9  I        Y    17
10 J        Y    19
11 A        Z     2
12 B        Z     4
13 C        Z     6
14 D        Z     8
15 E        Z    10
16 F        Z    12
17 G        Z    14
18 H        Z    16
19 I        Z    18
20 J        Z    20 
```

然后你可以排序并选择你想要的列：

```
foo[order(foo$X), c('X', 'value')] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T03:37:26.913

使用基础 R 的另一种解决方案。

首先使用向量索引 data.frame 的字符向量`[1,1,2,2 ... 10,10]`并存储为`X.X`. 接下来，`rbind`data.frame 向量`Y`和`Z`有效地“压缩”它们并存储在`Y.X`.

```
> res <- data.frame(
+   X.X = df.1$X[c(rbind(1:10, 1:10))],
+   Y.Z = c(rbind(df.1$Y, df.1$Z))
+ )
> head(res)
  X.X Y.Z
1   A   1
2   A   2
3   B   3
4   B   4
5   C   5
6   C   6 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T04:29:47.567

底座 R 中的~~一~~对二衬管：

```
test <- data.frame(X.X=df.1$X,Y.Z=unlist(df.1[c("Y","Z")]))
test[order(test$X.X),] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T02:06:44.303

假设您想要您在第一段中要求的内容，而您发布的其余内容是您解决它的尝试。

```
a=df.1[df.1$Y%%2>0,1:2]
b=df.1[df.1$Z%%2==0,c(1,3)]
names(a)=c("X.X","Y.Z")
names(b)=names(a)
df.2=rbind(a, b) 
```

如果您想按照示例中所示按 XX 对它们进行分组，您可以执行以下操作：

```
library(plyr)
arrange(df.2, X.X) 
```

# r - R动态列表列表

> ID：16159378
> 
> 赞同：0
> 
> 时间：2013-04-23T01:26:07.663
> 
> 标签：r, syntax

嗨，我是 R 新手，对于一个学校项目，我正在尝试创建一个可以通过索引访问并附加到的列表列表。就像是

```
aList[1] = A, B, C

aList[1] returns [1] A, B, C

aList[1] += D

aList[1] returns [1] A, B, C, D

aList[2] = 1, 2, 3

aList[2] returns [2] 1, 2, 3

aList returns [1] A, B, C, D 
              [2] 1, 2, 3 
```

但是，我不确定我是否使用了正确的数据类型（而且绝对不是正确的语法），因为我尝试过的所有操作要么只为列表创建一个索引，要么为一个项目创建多个索引。

这不是家庭作业。这甚至不应该是一个问题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:32:56.597

列表`R`与向量是分开的——向量中的每个项目只能是基本类型，如数字或字符串，而列表可以包含向量或其他列表。听起来您想创建一个向量列表。这可以这样做：

```
> aList = list(c("A", "B", "C"), c(1, 2, 3))
> aList[[1]]
[1] "A" "B" "C"
> aList[[1]] = c(aList[[1]], "D")
> aList[[1]]
[1] "A" "B" "C" "D"
> aList[[2]]
[1] 1 2 3
> aList
[[1]]
[1] "A" "B" "C" "D"

[[2]]
[1] 1 2 3 
```

请注意，您通常使用双括号访问列表，例如`[[1]]`. 如果您使用单括号访问列表，您将获得列表的子集：

```
[[1]]
[1] "A" "B" "C" "D" 
```

如果您想修改该项目，这不是您想要的。

# java - Java textBox.setText() 错误（文本太多？）

> ID：16159385
> 
> 赞同：0
> 
> 时间：2013-04-23T01:26:54.577
> 
> 标签：java, swing, netbeans, methods, settext

我有一个总的菜鸟 Java 问题：| 使用 setText() 方法时，出现此错误

```
javax.swing.JTextArea[,0,-26524,590x27015,layout=javax.swing.plaf.basic.BasicTextUI$UpdateHandler,alignmentX=0.0,alignmentY=0.0,border=javax.swing.plaf.basic.BasicBorders$MarginBorder@52d1f1fb,flags=296,maximumSize=,minimumSize=,preferredSize=,caretColor=sun.swing.PrintColorUIResource[r=51,g=51,b=51],disabledTextColor=javax.swing.plaf.ColorUIResource[r=184,g=207,b=229],editable=true,margin=javax.swing.plaf.InsetsUIResource[top=0,left=0,bottom=0,right=0],selectedTextColor=sun.swing.PrintColorUIResource[r=51,g=51,b=51],selectionColor=javax.swing.plaf.ColorUIResource[r=184,g=207,b=229],colums=20,columWidth=11,rows=5,rowHeight=15,word=false,wrap=false] 
```

这是我的行动事件

```
 list.setText(list.toString().replaceAll("|3835569365|e49e24d5", "")); 
```

列表是我的 JTextArea，那些数字和十六进制以及 | 是我基本上试图从文本区域中删除的内容。

谢谢任何人:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:28:35.033

问题是您`toString()`在应该使用`getText()`.

更改您的代码以阅读更像...

```
list.setText(list.getText().replaceAll("|3835569365|e49e24d5", "")); 
```

反而

`toString()`正在返回有关对象的状态信息，您不需要在日常工作中使用

# css - 砌体类型背景图像

> ID：16159386
> 
> 赞同：1
> 
> 时间：2013-04-23T01:26:56.457
> 
> 标签：css, ruby

我正在为我正在开发的 ruby​​ on rails web 应用程序做一些研究，需要一些问题的帮助。

1.  是否可以使用砌体 jquery 类型插件将图像渲染/显示为网页的背景？

2.  如果第一个问题的答案是否定的，那么是否可以使用 css(3) 和 html(5) 手动渲染多个图像作为背景？

3.  最后，如果我可以使用 1、2 或任何其他方法来显示多个背景图像，我是否能够应用常规 css 代码来操作图像？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:30:45.750

使用 CSS3 是可能的。在最简单的情况下，这是一个如何实现它的示例：

```
#exampleA {
width: 500px;
height: 250px;
background-image: url(decoration.png), url(ribbon.png), url(old_paper.jpg);
background-repeat: no-repeat;
background-position: left top, right bottom, left top;
} 
```

顺序从第一个（左侧）是顶层到最后一个（右侧）是底部背景层（如果你正在分层它们）。

编辑：为了对每个背景图像应用更复杂的样式，例如灰度，您需要将 CSS 分解为这种格式：

```
/* this is the master css block - the height and width here represent the total coverage for all child background images */
    .sample1 .sea, .sample1 .mermaid, .sample1 .fishing {
       height: 300px;
       width: 480px;
       position: relative;

    }
/* individual stylings for each background image featured - apply greyscale and separate width and heights here */
    .sample1 .sea {
       background: url(media/sea.png) repeat-x top left;
    }
    .sample1 .mermaid {
       background: url(media/mermaid.svg) repeat-x bottom left;
    }
    .sample1 .fish {
      background: url(media/fish.svg) no-repeat;
      height: 70px;
      width: 100px;
      left: 30px;
      top: 90px;
      position: absolute;
    }
    .sample1 .fishing {
      background: url(media/fishing.svg) no-repeat top right 10px;
    } 
```

# gdb - gdb 中的下一个命令无法正常工作

> ID：16159394
> 
> 赞同：2
> 
> 时间：2013-04-23T01:27:31.913
> 
> 标签：gdb, next

我只是使用 gdb 逐行遍历代码以了解它是如何工作的以及它在做什么。我第一次这样做时效果很好，但现在下一个命令无法正常工作。有时向前，有时向后。这没有意义。每次我这样做时，它似乎都是相同的模式。下面是一个例子。有谁知道出了什么问题？

注意：这是带有旧程序版本的旧 Mac（我无权更新）

请明确。我对 linux 和一般编程相当陌生。

谢谢！

```
Reading symbols for shared libraries ... done
(gdb) b main
Breakpoint 1 at 0x2730: file ../../../../gcc-3.4.6/libf2c/libF77/pow_zi.c, line 14.
(gdb) r
Starting program: /Users/kevin/project/ConstU/main 
nReading symbols for shared libraries +. done
Error in re-setting breakpoint 1:
Function "main" not defined.
Re-enabling shared library breakpoints: 1

Breakpoint 1, 0x00002730 in main () at main.c:34
34      {
(gdb) n
main () at main.c:42
42      for (i=0;i<DpDIM;i++) {
(gdb) n
34      {
(gdb) n
35      runstart=clock();
(gdb) n
39      Init=ReadInit(&CaseDim);/*reads in initial valies from initfile*/
(gdb) n
35      runstart=clock();
(gdb) n
39      Init=ReadInit(&CaseDim);/*reads in initial valies from initfile*/
(gdb) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:42:07.640

> 有谁知道出了什么问题？

您描述的症状在调试使用优化构建的程序时*非常*常见：编译器重新排列代码，使来自不同行的指令混合在一起。

确保在没有任何`-O`标志的情况下进行编译，或者`-O0`在编译行的末尾添加。

> 这是make文件的一部分：`CC = gcc` `CFLAGS = -g -O2`

这样就可以了：删除`-O2`，您的调试会容易得多。

# ruby-on-rails - 如何设置 Rails Angular 项目来测试 JS？

> ID：16159395
> 
> 赞同：31
> 
> 时间：2013-04-23T01:27:44.517
> 
> 标签：ruby-on-rails, testing, angularjs, asset-pipeline, jasmine

我正在尝试设置我的 Rails Angular 项目以提供 JS 测试。我几乎尝试了在 Google 上找到的所有内容：

*   [业力](https://karma-runner.github.io/)（原睾丸）
*   [Jasmine](https://github.com/pivotal/jasmine) + [Jasmine-headless-WebKit](https://github.com/johnbintz/jasmine-headless-webkit)
*   [茉莉香米](https://github.com/bradphelan/jasminerice)
*   其他一些教程

但我都失败了。我正在寻找一种以最轻松的方式运行单元和 e2e 测试的方法（它可以在 Guard 或 Karma 中，我不在乎，但它必须在后台自动运行）。

有没有人有一些不错的文章，其中有一个很好的例子来说明如何实现这一点？在我的研究中，我发现[了这一点](https://github.com/lucassus/rails-angular-seed)，但恕我直言，这是一个如何不这样做的例子。

我的实际`Gemfile`：

```
source 'https://rubygems.org'

# Use Ruby 1.9.3 instead default Heroku's 1.9.2
# for development I suggest https://gist.github.com/1688857
ruby '1.9.3'

gem 'rails', '3.2.12'

# Use PostgreSQL, which is quite awesome, fast and easy
gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'bootstrap-sass', '~> 2.3.1'

  # I heard that you like Compass
  gem 'compass'

  # Angular.js
  gem 'angularjs-rails'
  gem 'angularjs-rails-resource'
  gem 'angular-ui-rails'

  # Assets should be minified before production
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Serve static pages like a boss
gem 'high_voltage'

# Some user management will be nice
gem 'devise' # User management
# gem 'cancan' # And they privileges

# To use Jbuilder templates for JSON
gem 'jbuilder'

# Be fast and deadly as Puma
#gem 'puma'

# We need also some administration panel, don't we?
gem 'rails_admin'

# Some helpers
gem 'andand'

group :development do
  # IRb is ugly. Use Pry for the God's sake
  gem 'pry-rails'

  # Deploy with Capistrano
  # gem 'capistrano'
  # or Vlad the Deployer
  # gem 'vlad'

  # Why bother yourself with rerunning tests? Use Guard
  gem 'guard'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'guard-livereload'
  gem 'guard-jasmine'
  gem 'rb-fsevent', require: false
  gem 'rb-inotify', require: false

  # Who like ugly error pages? We don't.
  gem 'better_errors'
  gem 'binding_of_caller'

  # Prettier documentation
  gem 'yard'
end

group :development, :test do
  # Use RSpec for testing
  gem 'rspec-rails', '~> 2.12.0'

  # Test JS using Jasmine
  gem 'jasmine'
  gem 'jasmine-headless-webkit'

  # Some DB table generator
  gem 'factory_girl_rails', '~> 4.1.0'

  # And fake data generator
  gem 'ffaker'
end

group :test do
  # Some Gherkins will be also good (to vodka of course)
  gem 'turnip', '~> 1.1.0'

  # Aww, an of course some web browser will be also apprised
  gem 'capybara', '~> 2.0.1'

  # Clean DB after tests
  gem 'database_cleaner'

  # Some nice matchers
  gem 'shoulda-matchers'

  # Extend your mocks
  gem 'bourne', '~> 1.2.1'

  # Coverage reports will be nice
  gem 'simplecov', require: false
end 
```

**PS：** 如果我能以简单的方式创建覆盖率报告，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T14:53:01.733

您可以使用[teaspoon](https://github.com/modeset/teaspoon)它运行您最喜欢的测试套件（默认为 jasmine），并且他们有一个与 angular 集成的 wiki。Teaspoon 与资产管道集成，因此您可以将所有 angular gem 放入其中，并在 teaspoon 生成的 spec_helper.js 中使用它们。

另一个很酷的事情是：他们也有一个可用的保护插件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-14T13:35:13.260

我感受到了你的痛苦，我花了一些试验和错误来让我的 Rails 应用程序运行所有测试。我最终使用 Guard 进行开发人员对规范、验收和 javascripts 的持续测试。这是我的劳动成果。

这是您需要包含的*Gemfile片段。*[它具有Guard](https://github.com/guard/guard)、[Jasmine](http://pivotal.github.io/jasmine/)、[Rspec](https://github.com/jnicklas/turnip)和[Turnip](http://rspec.info/)所需的宝石。此设置适用于 MRI 和 JRuby，我们在两者上运行我们的测试。

```
group :test, :development do
  # Guard
  gem 'guard-jasmine'
  gem "guard-bundler", ">= 1.0.0"
  gem "guard-rails", ">= 0.4.0"
  gem "guard-rspec", ">= 2.5.2"
  gem "rb-inotify", ">= 0.9.0", :require => false
  gem "rb-fsevent", ">= 0.9.3", :require => false
  gem "rb-fchange", ">= 0.0.6", :require => false

  # Rspec
  gem "rspec-rails", '~> 2.12.2'

  # Jasmine
  gem "jasmine", '~> 1.3.1'
  gem "jasminerice"
end

group :test do
  # Turnip
  gem "turnip", '~> 1.1.0'
  gem "capybara", '~> 2.0.3'
end 
```

这是监视 Rspec、Turnip 和 Jasmine 以触发测试的完整*Guardfile*：

```
guard 'rspec' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails 
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
end

guard :jasmine do
  watch(%r{spec/javascripts/spec\.(js\.coffee|js|coffee)$}) { 'spec/javascripts' }
  watch(%r{spec/javascripts/.+_spec\.(js\.coffee|js|coffee)$})
  watch(%r{spec/javascripts/fixtures/.+$})
  watch(%r{app/assets/javascripts/(.+?)\.(js\.coffee|js|coffee)(?:\.\w+)*$}) { |m| "spec/javascripts/#{ m[1] }_spec.#{ m[2] }" }
end 
```

现在事情变得有点棘手。为了让 Jasmine 正确加载 AngularJS 进行测试，我将[angular-mocks.js 1.0.7](http://code.angularjs.org/1.0.7/angular-mocks.js)下载到目录*spec/javascripts/support/angular-mocks.js*。规范助手和 jasmine 配置使用它来运行 AnguljarJS 规范。

对于*spec/javascripts/spec_helper.js.coffee*，将其指向 Rails 应用程序 javascript、angular-mocks.js 和所有 javascript 规范：

```
#=require ../../app/assets/javascripts/application
#=require ./support/angular-mocks
#=require_tree ./ 
```

对于 Jasmine 配置*spec/javascripts/support/jasmine.yml*，该配置需要指向 Rails 应用程序 javascript 和 angular-mocks.js。这是我们使用的，但为简洁起见删除了注释：

```
src_files:
  - assets/application.js
  - spec/javascripts/support/angular-mocks.js

stylesheets:
  - stylesheets/**/*.css

helpers:
  - helpers/**/*.js

spec_files:
  - '**/*[sS]pec.js'

src_dir:

spec_dir: spec/javascripts 
```

一切都设置好后，您只需运行`bundle exec guard`，所有测试都会运行并由开发更改触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-19T21:42:02.447

我写了一篇关于使用默认 Jasmine gem 在 Rails 应用程序上设置 AngularJS 单元测试的非常简单的方法的博客文章。Jasmine 团队已经接受了一个小的代码更改以使事情顺利进行。

[http://pivotallabs.com/unit-testing-angularjs-using-jasmine/](http://pivotallabs.com/unit-testing-angularjs-using-jasmine/)

简而言之：

将 jasmine 和 angularjs-rails 添加到您的 Gemfile

```
gem "angularjs-rails"
gem "jasmine", github: "pivotal/jasmine-gem" 
```

安装 gems 并运行 Jasmine 生成器

```
$ bundle install
$ rails g jasmine:install 
```

在您的应用程序代码的其余部分之前，将 Angular 添加到您的 application.js

```
//= require angular
//= require_tree . 
```

创建一个名为`./spec/javascripts/helpers/angular_helpers.js`并添加此行的文件

```
//= require angular-mocks 
```

现在您可以在您的`app/assets`目录中包含 AngularJS 实现文件，并使用提供的模拟编写测试。并且当您升级`angularjs-rails`gem 时，您将同时获得`angular.js`和的新版本`angular-mocks.js`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T15:06:10.683

您可能有一些运气检查它使用 grunt 作为构建系统的[angular 样板项目](https://github.com/joshdmiller/ng-boilerplate)，我意识到它无论如何都不是 ruby​​，但是我认为在尝试使用 angular 测试事物时，您唯一的希望是走 nodejs/karma 路线。

此设置监视代码中的更改并运行测试。但是，在我有限的经验中，我无法让它显示测试运行的结果。我不确定我做错了什么或者它是否不受支持。

无论如何希望这会有所帮助

# java - 使用 Spring Data JPA 查找实体时如何启用 LockModeType.PESSIMISTIC_WRITE？

> ID：16159396
> 
> 赞同：54
> 
> 时间：2013-04-23T01:27:50.980
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

如何实现此代码的等效项：

```
tx.begin();
Widget w = em.find(Widget.class, 1L, LockModeType.PESSIMISTIC_WRITE);
w.decrementBy(4);
em.flush();
tx.commit(); 
```

...但是使用 Spring 和 Spring-Data-JPA 注释？

我现有代码的基础是：

```
@Service
@Transactional(readOnly = true)
public class WidgetServiceImpl implements WidgetService
{
  /** The spring-data widget repository which extends CrudRepository<Widget, Long>. */
  @Autowired
  private WidgetRepository repo;

  @Transactional(readOnly = false)
  public void updateWidgetStock(Long id, int count)
  {
    Widget w = this.repo.findOne(id);
    w.decrementBy(4);
    this.repo.save(w);
  }
} 
```

但是我不知道如何指定`updateWidgetStock`方法中的所有内容都应该使用悲观锁定集来完成。

有一个 Spring Data JPA 注释`org.springframework.data.jpa.repository.Lock`允许您设置 a `LockModeType`，但我不知道将它放在`updateWidgetStock`方法上是否有效。这听起来更像是 上的注释`WidgetRepository`，因为 Javadoc 说：

> org.springframework.data.jpa.repository
> @Target(value=METHOD)
> @Retention(value=RUNTIME)
> @Documented
> public @interface Lock
> 注解用于指定执行查询时要使用的 LockModeType。在查询方法上使用 Query 或从方法名称派生查询时，将对它进行评估。

......所以这似乎没有帮助。

如何使我的`updateWidgetStock()`方法使用`LockModeType.PESSIMISTIC_WRITE`set 执行？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-04-23T06:14:19.470

`@Lock`从 Spring Data JPA 1.6 版开始，CRUD 方法支持（事实上，已经有一个[里程碑](https://repo.spring.io/libs-milestone/org/springframework/data/spring-data-jpa/1.6.0.M1/)可用）。请参阅此[票](https://jira.spring.io/browse/DATAJPA-173)以获取更多详细信息。

使用该版本，您只需声明以下内容：

```
interface WidgetRepository extends Repository<Widget, Long> {

  @Lock(LockModeType.PESSIMISTIC_WRITE)
  Widget findOne(Long id);
} 
```

这将导致后备存储库代理的 CRUD 实现部分将配置`LockModeType`应用于.`find(…)``EntityManager`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-08-31T16:29:11.673

如果您不想覆盖标准`findOne()`方法，则可以通过使用`select ... for update`查询来获取自定义方法中的锁定，如下所示：

```
/**
 * Repository for Wallet.
 */
public interface WalletRepository extends CrudRepository<Wallet, Long>, JpaSpecificationExecutor<Wallet> {

    @Lock(LockModeType.PESSIMISTIC_WRITE)
    @Query("select w from Wallet w where w.id = :id")
    Wallet findOneForUpdate(@Param("id") Long id);
} 
```

但是，如果您使用的是 PostgreSQL，当您想要设置锁定超时以避免死锁时，事情会变得有点复杂。PostgreSQL 忽略`javax.persistence.lock.timeout`JPA 属性或`@QueryHint`注释中的标准属性集。

我可以让它工作的唯一方法是创建一个自定义存储库并在锁定实体之前手动设置超时。这不是很好，但至少它正在工作：

```
public class WalletRepositoryImpl implements WalletRepositoryCustom {

@PersistenceContext
private EntityManager em;

@Override
public Wallet findOneForUpdate(Long id) {
    // explicitly set lock timeout (necessary in PostgreSQL)
    em.createNativeQuery("set local lock_timeout to '2s';").executeUpdate();

    Wallet wallet = em.find(Wallet.class, id);

    if (wallet != null) {
        em.lock(wallet, LockModeType.PESSIMISTIC_WRITE);
    }

    return wallet;
} 
```

}

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-25T03:50:08.363

**如果您能够使用 Spring Data 1.6 或更高版本，请忽略此答案并参考 Oliver 的答案。**

Spring Data 悲观`@Lock`注释仅适用于（如您所指出的）查询。我知道没有注释会影响整个事务。您可以创建一个使用悲观锁`findByOnePessimistic`调用的方法，`findByOne`也可以更改`findByOne`为始终获取悲观锁。

如果您想实现自己的解决方案，您可能可以。在引擎盖下，`@Lock`注释被处理`LockModePopulatingMethodIntercceptor`，执行以下操作：

```
TransactionSynchronizationManager.bindResource(method, lockMode == null ? NULL : lockMode); 
```

您可以创建一些具有`ThreadLocal<LockMode>`成员变量的静态锁管理器，然后在每个存储库中的每个方法周围都有一个方面，这些方法`bindResource`使用`ThreadLocal`. 这将允许您在每个线程的基础上设置锁定模式。然后，您可以创建自己的`@MethodLockMode`注释，将方法包装在一个方面，该方面在运行该方法之前设置特定于线程的锁定模式，并在运行该方法后将其清除。

# java - JMF 错误 - 方法 getDeviceList 返回一个大小为 0 的向量

> ID：16159401
> 
> 赞同：1
> 
> 时间：2013-04-23T01:28:45.410
> 
> 标签：java, video, webcam, jmf

我正在开发一个应用程序，它应该从 Java 中的网络摄像头捕获图像，因为我正在使用 JMF（Java 媒体框架）。我无法识别网络摄像头。

```
Vector devices = CaptureDeviceManager.getDeviceList (null); 
```

该方法`getDeviceList`返回`Vector`大小为 0 的 a。我安装了 JMStudio，他认出了我的网络摄像头。我的项目在 Eclipse 中，我将 jmf 的 jar 添加到项目的类路径中，并将`jmf.properties`文件放在`src`目录中。方法是：

```
Vector devices = CaptureDeviceManager.getDeviceList(  
if (devices == null) {
  System.out.println("Devices list is null");
  System.exit(0);
}
if (devices.size() == 0) {
  System.out.println("No devices found");
  System.exit(0);
} 
```

它适用于命令行，但不适用于 Eclipse。

# java - android代码通过wifi连接失败

> ID：16159408
> 
> 赞同：0
> 
> 时间：2013-04-23T01:29:53.450
> 
> 标签：java, android, sockets, wifi

我刚刚写了一个连接wifi的应用程序如下：

```
wifi.setWifiEnabled(false);
wifi.setWifiEnabled(true);

int res = wifi.addNetwork(wificonfigurationA);              
boolean b = false;
b = wifi.enableNetwork(res, true);
Log.d("WifiPreference", "enableNetwork returned " + b);

Socket socket = new Socket(serverAddr, 3000);
PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

out.println("Hey Server!"); 
```

这给出了`01-02 00:03:36.882: E/ClientActivity(1550): java.net.ConnectException: /10.10.2.200:3000 - Network is unreachable`错误。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:28:47.700

使用 connectionManagaer 对象执行此操作，并始终在单独的线程中执行此类网络操作。

# mysql - MySQL：使用 AND OR 选择产生不正确的数据？

> ID：16159409
> 
> 赞同：1
> 
> 时间：2013-04-23T01:30:01.440
> 
> 标签：mysql, database

我有一张表格，记录了我正在开发的体育应用程序的所有得分情况。我试图从得分表中找出一个球员有多少次助攻。有一个主要助攻和一个次要助攻，所以我试图使用一个返回总助攻的值`COUNT(*) WHERE...`

我正在使用以下 SQL 语句：

`SELECT COUNT(*) FROM teamassist13.AllScoringPlays WHERE GameId = 6124 AND SeasonId = 1 AND P_AssistId = 21 OR S_AssistId = 21;`

这给了我游戏 6124 的准确得分（它返回用户有 2 次助攻），但是当我切换`GameId`到 6125 时，它显示用户有 1 次助攻，而他们应该有 0 次助攻。

我也试过以下说法：

`SELECT COUNT(*) FROM AllScoringPlays WHERE GameId = 6124 AND SeasonId = 1 AND (P_AssistId = 21 OR S_AssistId = 21);`

然后告诉我球员有 1 次助攻`GameId`6124（不准确，应该是 2），0 次助攻`GameId`6125（准确）。

```
`GameId` 6125 should return 0 assists
`GameId` 6124 should return 2 assists 
```

这是我当前正在查询的视图的结构：

```
| GameId | TeamId | SeasonId | LeagueId | GoalId | P_AssistId | S_AssistId |
   6124      1         1           1        20        21             23
   6124      1         1           1        19        20             21 
```

它似乎绕过了 OR 语句，我不知道如何解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:35:47.833

您的第二个查询是正确的：

```
SELECT COUNT(*) FROM AllScoringPlays WHERE GameId = 6124 AND SeasonId = 1 AND
(P_AssistId = 21 OR S_AssistId = 21); 
```

# c# - userinit 并运行另一个程序

> ID：16159411
> 
> 赞同：0
> 
> 时间：2013-04-23T01:30:21.167
> 
> 标签：c#, winlogon

每次计算机启动时我都需要启动一个程序。

公司规则不允许触及运行注册表项。

我在某处读到，将可执行文件附加到 winlogon 注册表中 userinit 条目的末尾将允许启动程序。

我认为这是真的，因为我的应用程序确实启动了......但是，这是疯狂的事情......应用程序从屏幕开始......比开始按钮低得多。

我将程序设置为在屏幕中心启动......但它不想显示在正确的位置，直到我执行 alt-tab 将其带到前面，然后它将显示在正确的位置。

所以我的问题是

使用 userinit，并将可执行文件附加到值行的末尾，确实启动了应用程序，但是当屏幕尚未建立时，如何强制它在屏幕上居中？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:35:28.977

您无需为此修改注册表。事实上，您可能*不应该*为此修改注册表。公司政策在一定程度上是有道理的。

相反，只需将应用程序可执行文件的快捷方式添加到您的启动文件夹即可。（或者，如果您想让它在*所有*用户启动时运行，请将其添加到 All Users Startup 文件夹。）

手动操作非常简单——只需将快捷方式拖到文件夹中即可。典型的路径是这样的：

```
%APPDATA%\Microsoft\Windows\Start Menu\Programs\StartUp (for a single user)

%ALLUSERSPROFILE%\Microsoft\Windows\Start Menu\Programs\StartUp (for all users) 
```

但是，以编程方式执行此操作也不是很困难。您只需要检索文件夹的路径 - 不要对其进行硬编码！要从 C# 中执行此操作，请调用[`Environment.GetFolderPath`](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)函数，指定`SpecialFolder.Startup`或`SpecialFolder.CommonStartup`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:21:15.250

如果你只是在谈论一个 WinForm 应用程序的位置，也许你可以试试这个：

```
void SetLocation(Point location) {
    var context=SynchronizationContext.Current;

    (new Thread(
        () => {
            SendOrPostCallback d=dummy => {
                this.Location=location;
            };

            for(; ; Thread.Sleep(0))
                try {
                    context.Send(d, null);
                }
                catch(InvalidAsynchronousStateException ex) {
                    break;
                }
        })).Start();
} 
```

例如，在您的表单加载或您希望的某个事件处理程序中调用它：

```
SetLocation(Point.Empty); 
```

它永远执行以设置表单的位置；您可能想要编写一个方法来终止该线程，一旦它已经设置为您想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T16:06:55.767

这是视频驱动程序...更新了它，对话框显示在屏幕中央，如编码。

# php - PHP，Memcached 从命令行工作，但不能从网络工作

> ID：16159415
> 
> 赞同：11
> 
> 时间：2013-04-23T01:31:05.830
> 
> 标签：php, apache, memcached

我在 Centos 6.4 上安装了带有`memcached.so`扩展名的 PHP 5.3.3，并且 httpd 运行版本为 2.2.15-26。这是我的`index.php`：

```
$mc = new \Memcached();
$mc->addServer('127.0.0.1', 11211);
$mc->set("test", "blah");
var_dump($mc->getResultCode());
var_dump($mc->getResultMessage());
var_dump($mc->get("test"));
die; 
```

当我从命令行运行它时，**它可以工作**。我得到以下信息：

```
10:22:33 $ php index.php
int(0)
string(7) "SUCCESS"
string(4) "blah" 
```

memcache 服务器也可以通过 telnet 工作。但是，当我`index.php`从网络上运行时，**它会失败。**我得到以下信息（来自查看网页源）：

```
int(47)
string(51) "SERVER HAS FAILED AND IS DISABLED UNTIL TIMED RETRY"
bool(false) 
```

没有重新安装我的操作系统并尝试不同版本的废话，任何人都可以解释可能导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:35:00.333

是**SELinux**的问题吗？Cli 可以访问 Memcached 但没有守护进程。尝试这个 ：

*   `getenforce`了解您是否启用了 SELinux
*   `setenforce 0`禁用它
*   `reboot`
*   重试您的测试

如果很好，您必须配置 Apache 才能访问 Memcached。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-28T09:34:52.373

我在 CentOS 上有类似的问题，我发现它正在运行 SELinux，这会阻止 httpd 连接到 memcached。您需要在下面设置，

```
# setsebool -P httpd_can_network_memcache 1
# getsebool httpd_can_network_memcache
httpd_can_network_memcache --> on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T09:37:56.647

请确保您的 memcache 服务应该绑定所有 IP。默认值为 127.0.0.1。将其更改为 0.0.0.0 以支持所有定义的 Ips。此外，不要忘记控制您的 iptables 或防火墙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T23:50:41.257

我在 WAMP 2.4 中遇到了这个问题，在命令行中运行了一个简单的 Memcache 测试脚本，但在浏览器中没有。

答案竟然是惊人的平凡：WAMP 有两个 php.ini 文件，而我编辑了错误的一个。

例如 Apache 使用了这个：c:\wamp\bin\apache\Apache2.4.4\bin\php.ini WAMP 也有这个：c:\wamp\bin\php\php5.4.12\php.ini

将 extension=php_memcache.dll 放在正确的 .ini 文件中可以解决问题。

我的线索是这样的问题是phpInfo（）的加载配置文件在两种情况下报告了不同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-27T18:50:40.070

我遇到了与 OP 描述的完全相同的问题。事实证明，问题是由 memcached 扩展在内部维护的服务器列表引起的。我的代码是这样的：

```
$serversList = $memcached->getServerList();

if (empty($serversList)) {
     $memcached->addServer($host, $port);
} 
```

我对测试脚本的初始调用是使用错误的 $port 值完成的。调用是从 web (apache) 而不是 cli 完成的。在我更正端口并再次运行代码后，它跳过了“if”并使用了存在缺陷的现有服务器列表，因此再次失败。

从网上看到我用 cli 测试的失败，它工作得很好。在 cli 中的服务器列表与 web 中的不同。事实上，服务器列表在脚本每次启动时都是空的，即使我的脚本在每次运行时都设置了它。然而，它在网络上的通话之间持续存在。

无论如何，在清除网络上的服务器列表并设置正确的服务器后，它也可以从网络上按预期工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-02T13:42:10.320

当我查看示例时，我发现它在没有命名空间“\”修饰符的情况下使用。试试没有它可能吗？

[http://www.php.net/manual/en/memcache.examples-overview.php](http://www.php.net/manual/en/memcache.examples-overview.php)

```
<?php

$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("Could not connect"); 
```

# javascript - 导航菜单指示器 - 在悬停、单击和滚动时滑动

> ID：16159418
> 
> 赞同：3
> 
> 时间：2013-04-23T01:31:11.517
> 
> 标签：javascript

我从来没有在这里问过问题，但我已经使用了很多答案，所以我希望我希望达到的效果也能帮助其他希望达到同样效果的人。

我目前正在客户的网站上工作，并将其上传到我的保管箱以解决这个问题： [http ://dl.dropboxusercontent.com/u/62164771/stage/cw/index16042013.html](http://dl.dropboxusercontent.com/u/62164771/stage/cw/index16042013.html)

它目前使用几个不同的脚本来实现以下目标：

（这个脚本在头部区域） 导航菜单是固定的，当你点击一个菜单链接时，页面会滚动到相关部分。当页面滚动到相关部分时（被点击后），一个类 (.act) 被添加到活动菜单链接中。当用户使用鼠标/触控板等在页面中上下滚动时，也会添加 .act 类。

（此脚本位于页面底部）导航栏链接还添加了另一个效果：当您将鼠标悬停在导航项目上时，导航菜单指示箭头（带有箭头背景图像的 div）滑过悬停的链接。

**所以这就是我想要发生的事情**

目前导航菜单指示箭头仅在悬停时滑动。我希望它在单击时滑动到活动链接并停留在那里，直到用户将鼠标悬停在另一个链接上。我当前的脚本有点问题，菜单指示器并不总是滑动到活动链接。

我还希望导航菜单指示箭头在用户滚动页面时滑动到活动链接。

这是可以实现的吗？

**相关脚本**

**脚本 1 - 平滑滚动到部分并在滚动时激活“act”类：**

```
<script type="text/javascript">
  jQuery(document).ready(function( $ ) {
    $('nav a').on('click', function() {
      var scrollAnchor = $(this).attr('data-scroll'),
      scrollPoint = $('section[data-anchor="' + scrollAnchor + '"]')
        .offset().top + 1;
      $('body,html').animate({
        scrollTop: scrollPoint
      }, 500);
      return false;
    })

    $(window).scroll(function() {
      var windscroll = $(window).scrollTop();
      if (windscroll >= 100) {
        $('#wrap section').each(function(i) {
          if ($(this).position().top <= windscroll + 200) {
            $('nav a.act').removeClass('act');
            $('nav a').eq(i).addClass('act');
          }
        });
      } else {
        $('nav').removeClass('fixed');
        $('nav a.act').removeClass('act');
        $('nav a:first').addClass('act');
      }

    }).scroll();
  })
</script> 
```

**脚本 2 - 用于将主菜单指示器滑动到悬停和活动链接的位置**

```
<script type="text/javascript">
$('#header')
  .css('position', 'relative')
  .append(
    $('<div>').attr('id', 'main-menu-indicator')
  )
  menuHover = function(which){

    if(which==null)
      which = $('ul#main-menu a.act')
    $('#main-menu-indicator')
      .stop(true, false)
      .animate({
        left: ($(which).offset().left - $('#header').offset().left +
          $(which).width()/2 + parseInt($(which).css('paddingLeft')) -
          $('#main-menu-indicator').width()/2 )
      }, 500)
  } 

$('ul#main-menu a')
  .hover(
    function(){
      menuHover(this)
    },
    function(){
      menuHover(null)
    }
  ) 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:36:43.677

您可以使用[Bootstrap ScrollSpy](http://twitter.github.io/bootstrap/javascript.html#scrollspy)来获得所需的效果，它可能比编写自己的解决方案更容易实现。`activate`您可以使用事件启动动画。

在您的情况下，您可以设置`<a href="#top">`，您当前有 a`section`和 an `article`，`id`您应该摆脱其中一个，因为拥有多个相同的元素是无效的 html `id`，并且可能会破坏事情。例如保持`id`在`article`:上`<article class="top area" id="top">`。在页面上包含 ScrollSpy 脚本并添加：

```
$('.header').scrollspy({activate: function() {
  // Add your logic here.
  }
}); 
```

在 activate 函数`$('nav li.active')`中将为您提供当前活动`li`的信息，使用该信息您应该能够计算出将箭头移动到哪里，然后您可以运行平滑滚动箭头代码将箭头移动到正确的位置。

现在 ScrollSpy 负责`activate`在用户滚动某处时调用，您可以通过将箭头移动到正确的位置来对此做出反应。

# javascript - 使用 NodeJS 自触发永久运行的 Firebase 进程

> ID：16159425
> 
> 赞同：1
> 
> 时间：2013-04-23T01:31:34.413
> 
> 标签：javascript, node.js, firebase

我有一组记录，我想永久按顺序更新。基本上：

1.  获取最近最少更新的记录
2.  更新记录
3.  将记录日期设置为现在（又名。将其发送到列表的后面）
4.  返回步骤 1

这是我使用 Firebase 的想法：

```
// update record function
var updateRecord = function() {

    // get least recently updated record
    firebaseOOO.limit(1).once('value', function(snapshot) {
        key = _.keys(snapshot.val())[0];

        /*
         * do 1-5 seconds of non-Firebase processing here
         */

        snapshot.ref().child(key).transaction(

            // update record
            function(data) {
                return updatedData;
            },

            // update priority after commit (would like to do it in transaction)
            function(error, committed, snap2) {
                snap2.ref().setPriority(snap2.dateUpdated);
            }
        );
    });
};

// listen whenever priority changes (aka. new item needs processing)
firebaseOOO.on('child_moved', function(snapshot) {
    updateRecord();
});

// kick off the whole thing
updateRecord(); 
```

这是合理的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:46:06.330

一般来说，这种类型的守护进程正是设想与 Firebase NodeJS 客户端一起使用的。所以，这个方法看起来不错。

但是，在`on()`通话中，您似乎正在将`snapshot`正在传递的内容放在地板上。这可能是特定于您正在做的事情的应用程序，但`snapshot`相`once()`对于`updateRecord()`.

# jquery - Javascript 在不使用 JQuery 的情况下获取文本区域的值

> ID：16159432
> 
> 赞同：0
> 
> 时间：2013-04-23T01:32:37.597
> 
> 标签：jquery, textarea

我知道这应该和做一样简单`myTextArea.value`，但除非我在`id`.

所以我创建了这个 Javascript 对象，并在其上分配了一个名为`assignmentQuestionTextArea`. 这是我这样做的完整代码：

```
TextQuestionAssignmentTakingPage.prototype.makeContent = function (question) {
    var questionWrapper = StageAssignmentTakingPage.prototype.makeContent.call(this, question);

    var answerDiv = document.createElement("div");
    answerDiv.setAttribute("id", "assignmentTakingQuestionAnswerWrapper");
    var textArea = document.createElement("textarea");
    textArea.setAttribute("id", "assignmentTakingTextQuestionTextArea");
    textArea.innerHTML = this.answerSupplied;
    this.assignmentQuestionTextArea = textArea;
    answerDiv.innerHTML = textArea.outerHTML;

    questionWrapper.innerHTML += answerDiv.outerHTML;

    return questionWrapper.outerHTML;
}; 
```

就这样。早就这么叫了。然后，当我稍后单击某个按钮时，我调用了该`TextQuestionAssignmentTakingPage`对象的一个​​方法，称为`hasBeenChanged`. 在这里，我尝试查看 的值，`this.assignmentQuestionTextArea`看看它是否与我保存的不同。保存的值位于名为 的属性中`answerSupplied`。

```
TextQuestionAssignmentTakingPage.prototype.hasBeenChanged = function () {
    alert($('#assignmentTakingTextQuestionTextArea').val() + " - " + this.assignmentQuestionTextArea.value + " - " + this.assignmentQuestionTextArea.innerHTML);
    if (this.answerSupplied === null) { // just need to check if an answer exists
        var patt = /^\s*$/; // pattern for any number of spaces and nothing else
        var result = patt.test($(this.assignmentQuestionTextArea).val());
        if (result == true) {
            return false;
        } else {
            return true;
        }
    } else { // need to look at what the answer was and see if it has changed
        if ($(this.assignmentQuestionTextArea).val() === this.answerSupplied) {
            return false;
        } else {
            return true;
        }
    }
}; 
```

问题是，第一次这样做，`this.assignmentQuestionTextArea.value`似乎总是一个空字符串。是的，它确实可以通过将 的 包装`id`在`textarea`JQuery 对象中并使用`.val()`来工作，但我真的很希望它能够工作，即使`this.assignmentQuestionTextArea`当前不在屏幕上。

为什么它不能给我最新的价值？

> ID：16159435
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c++ - 从文件中读取行并存储在单独的字符串变量中

> ID：16159442
> 
> 赞同：0
> 
> 时间：2013-04-23T01:33:56.730
> 
> 标签：c++, variable-assignment, fstream, getline

我正在为一项任务创建一个银行终端。它能够添加客户，每个客户包含 5 个不同的变量，分别是姓名、地址、社交#、雇主和收入。一旦这些变量被填充并退出终端，这些变量就会被写入文件。

我遇到的问题是，在启动终端时，我需要从文件中读取这些值，每个值都在各自的行中，并将它们存储在各自的变量中以在 addClient() 函数中使用。这是使事情比提交我的整个项目更容易的代码片段：

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main()
{
  using namespace std;

  std::ifstream infile2("client-info.txt");

  //Strings used for respective items from file
  string clientName, clientAddress, clientSocial, clientEmployer, clientIncome;

  //Here is where I am having the problem of reading the info from the file
  //line by line and storing it in respective variables.
  while (infile2)
  {
     getline(infile2,clientName);
     getline(infile2,clientAddress);
     getline(infile2,clientSocial);
     getline(infile2,clientEmployer);
     getline(infile2,clientIncome);

     client.addClient(clientName, clientAddress, clientSocial, clientEmployer, clientIncome);
  }
  infile2.close();
} 
```

例如，文件就是这样存储的。

```
John Doe
123 Easy Lane
123-45-6789
USSRC
36000 
```

我遇到的问题是我无法找到一种可靠的方法来获取每一行并将它们存储在各自的字符串中。对于作业，我不必处理空格等。所以第 0-4 行将用于一个客户，5-9 用于另一个客户，依此类推。

非常感谢朝着正确的方向推动，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:44:48.850

如果该`addClient`函数像您一样接受 5 个参数，那么您当前的 main 函数已经解决了您的问题。

如果您想将这 5 个字符串放入一个字符串中，请在`addClient`函数中使用这个单个字符串。

您可以创建一个类：

```
class ClientInfo
{
 private:
   string clientName;
   string clientAddress; 
   string clientSocial;
   string clientEmployer,;
   string clientIncome;
public:
  ClientInfo(string name, string addr, string ssn, 
                 string employer, string income):
                  clientName(name), clientAddress(addr), clientSocial(ssn),
                  clientEmployer(employer), clientIncome(income)
  {
  }
}; 
```

然后在你的内部`main`，你可以执行以下操作：

```
ClientInfo currentClient(clientName, clientAddress, 
                clientSocial, clientEmployer, clientIncome);
client.addClient(currentClient); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:42:09.737

我认为您遇到的唯一问题是当您调用 getline 时，您没有传入参数。在这种情况下，我认为您需要使用换行符。

```
 while (infile2)

      {
         getline(infile2,clientName, '\n');
         getline(infile2,clientAddress, '\n');
         getline(infile2,clientSocial, '\n');
         getline(infile2,clientEmployer, '\n');
         getline(infile2,clientIncome, '\n');

         client.addClient(clientName, clientAddress, clientSocial, clientEmployer, clientIncome);
      } 
```

我不确定 '\n' 语法，但这会读取文件，直到它遇到换行符，然后继续下一行。

# c - 在 C 中使用 .txt 文件和电话簿程序的任务

> ID：16159443
> 
> 赞同：0
> 
> 时间：2013-04-23T01:33:58.897
> 
> 标签：c, text-files

下面是我用 C 语言编写的电话簿程序的代码。我在修改它时遇到了麻烦。我需要对其进行修改，以便在向电话簿添加条目后，将内容写入 .txt 文件。删除条目后，我需要将内容写入同一个 .txt 文件并打印全部内容。我应该使用 fopen () 函数吗？我是初学者...

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct Phonebook_Contacts
   {
      char FirstName[20]; 
      char LastName[20];
      char PhoneNumber[20]; 
   } phone; 

void AddEntry(phone * ); 
void DeleteEntry(phone * ); 
void PrintEntry(phone * );
void SearchForNumber(phone * ); 
void RandomName(phone * ); 
void DeleteAll(phone * ); 
void FreeContacts (phone * ); 

int counter = 0; 
char FileName[256]; 
FILE *pRead; 
FILE *pWrite; 

int main (void)
   {      
      phone *phonebook; 
      phonebook = (phone*) malloc(sizeof(phone)*100); 
      int iSelection = 0; 

         if (phonebook == NULL)
         {

         printf("Out of Memory. The program will now exit");
         return 1;
         }
         else {} 

      do
      {
         printf("\n\t\t\tPhonebook Menu");
         printf("\n\n\t(1)\tAdd Friend");
         printf("\n\t(2)\tDelete Friend");
         printf("\n\t(3)\tDisplay Phonebook Entries");
         printf("\n\t(4)\tSearch for Phone Number");
         printf("\n\t(5)\tFind a Random Friend");
         printf("\n\t(6)\tDelete All Entries");
         printf("\n\t(7)\tExit Phonebook");
         printf("\n\nWhat would you like to do? ");
         scanf("%d", &iSelection);  

         if (iSelection == 1)
         {
            AddEntry(phonebook); 
         } 

         if (iSelection == 2)
         {
            DeleteEntry(phonebook); 
         } 

         if (iSelection == 3)
         {
            PrintEntry(phonebook); 
         } 

         if (iSelection == 4)
         {
            SearchForNumber(phonebook);         
         } 

         if (iSelection == 5)
         {
            RandomName(phonebook);         
         } 

         if (iSelection == 6)
         {
            DeleteAll(phonebook); 
         } 

         if (iSelection == 7)
         {
            printf("\nYou have chosen to exit the Phonebook.\n");
            system("pause");
            FreeContacts(phonebook);
            return 0;
         } 
      } while (iSelection <= 9); 
   } 

void AddEntry (phone * phonebook)
{  
   pWrite = fopen("phonebook_contacts.dat", "a");
   if ( pWrite == NULL )
   {
      perror("The following error occurred ");
      exit(EXIT_FAILURE); 
   }
      else
      {
         counter++; 
         realloc(phonebook, sizeof(phone)); 

         printf("\nFirst Name: ");
         scanf("%s", phonebook[counter-1].FirstName);
         printf("Last Name: ");
         scanf("%s", phonebook[counter-1].LastName);
         printf("Phone Number (XXX-XXX-XXXX): "); 
         scanf("%s", phonebook[counter-1].PhoneNumber);
         printf("\n\tFriend successfully added to Phonebook\n"); 

         fprintf(pWrite, "%s\t%s\t%s\n", phonebook[counter-1].FirstName, phonebook[counter-1].LastName, phonebook[counter-1].PhoneNumber);
         fclose(pWrite); 
      } 
} 

void DeleteEntry (phone * phonebook)
{
   int x = 0;
   int i = 0;
   char deleteFirstName[20];  // 
   char deleteLastName[20];  

      printf("\nFirst name: ");
      scanf("%s", deleteFirstName);
      printf("Last name: ");
      scanf("%s", deleteLastName);

      for (x = 0; x < counter; x++)
      {
         if (strcmp(deleteFirstName, phonebook[x].FirstName) == 0) 
         {
            if (strcmp(deleteLastName, phonebook[x].LastName) == 0) 
            {
                for ( i = x; i < counter - 1; i++ )
               {
                  strcpy(phonebook[i].FirstName, phonebook[i+1].FirstName); 
                  strcpy(phonebook[i].LastName, phonebook[i+1].LastName); 
                  strcpy(phonebook[i].PhoneNumber, phonebook[i+1].PhoneNumber); 
               } 
               printf("Record deleted from the phonebook.\n\n");
               --counter; 
               return;
            } 
         } 
      }    

   printf("That contact was not found, please try again.");
}

void PrintEntry (phone * phonebook)
{
   int x = 0;

   printf("\nPhonebook Entries:\n\n ");
   pRead = fopen("phonebook_contacts.dat", "r");
   if ( pRead == NULL)
   {
      perror("The following error occurred: ");
      exit(EXIT_FAILURE);
   }
   else
   {
      for( x = 0; x < counter; x++) 
      {
         printf("\n(%d)\n", x+1); 
         printf("Name: %s %s\n", phonebook[x].FirstName, phonebook[x].LastName); 
         printf("Number: %s\n", phonebook[x].PhoneNumber); 
      } 
   } 
   fclose(pRead);
} 

void SortByFirstName (phone * phonebook)
{
   int i = 0;
   int x = 0;
   int swap;
   int TempCounter = counter;
   phone Temp; 

   do
   {
      swap = 0;
      for(i = 1; i < TempCounter; i++)
      {

         if(strcmp(phonebook[i-1].FirstName, phonebook[i].FirstName) > 0)
         {
            Temp = phonebook[i]; 
            phonebook[i] = phonebook[i-1]; 
            phonebook[i-1] = Temp; 

            strcpy(Temp.FirstName, phonebook[i].FirstName);
            strcpy(Temp.LastName, phonebook[i].LastName);
            strcpy(Temp.PhoneNumber, phonebook[i].PhoneNumber);

            swap = 1;
         }
      } 
      TempCounter--;
   } while (swap); 

   printf("\nYour friends in Alphabetical Order by First Name:\n\n");
   for( x = 0; x < counter; x++ )
   {
      printf("\n(%d)\n", x+1); 
      printf("Name: %s %s\n", phonebook[x].FirstName, phonebook[x].LastName); 
      printf("Number: %s\n", phonebook[x].PhoneNumber); 
   }   
} 

void SortByLastName (phone * phonebook)
   {
   int i = 0;
   int x = 0;
   int swap;
   int TempCounter = counter;
   phone Temp; 

   do
   {
      swap = 0;
      for(i = 1; i < TempCounter; i++)
      {

         if(strcmp(phonebook[i-1].LastName, phonebook[i].LastName) > 0)
         {
            Temp = phonebook[i]; 
            phonebook[i] = phonebook[i-1]; 
            phonebook[i-1] = Temp;

            strcpy(Temp.FirstName, phonebook[i].FirstName);
            strcpy(Temp.LastName, phonebook[i].LastName);
            strcpy(Temp.PhoneNumber, phonebook[i].PhoneNumber);

            swap = 1;
         } 
      } 
      TempCounter--;
   } while (swap); 

   printf("\nYour friends in Alphabetical Order by First Name:\n\n");
   for( x = 0; x < counter; x++ )
   {
      printf("\n(%d)\n", x+1); 
      printf("Name: %s %s\n", phonebook[x].FirstName, phonebook[x].LastName); 
      printf("Number: %s\n", phonebook[x].PhoneNumber); 
   }                 
} 

void SearchForNumber (phone * phonebook)
{
   int x = 0;
   char TempFirstName[20]; 
   char TempLastName[20]; 

   printf("\nPlease type the name of the friend you wish to find a number for.");
   printf("\n\nFirst Name: ");
   scanf("%s", TempFirstName);
   printf("Last Name: ");
   scanf("%s", TempLastName);
   for (x = 0; x < counter; x++)
   {
      if (strcmp(TempFirstName, phonebook[x].FirstName) == 0) 
      {
         if (strcmp(TempLastName, phonebook[x].LastName) == 0) 
         {

            printf("\n%s %s's phone number is %s\n", phonebook[x].FirstName, phonebook[x].LastName, phonebook[x].PhoneNumber);
         } 
      } 
   }     
} 

void RandomName (phone * phonebook)
{
   int iRandom = 0;
   srand(time(NULL));
   iRandom = rand() % counter;  
   int x = iRandom; 

   printf("\nYour random friend is: %s %s\n", phonebook[x].FirstName, phonebook[x].LastName);
   printf("Their phone number is: %s\n", phonebook[x].PhoneNumber);
}    

void DeleteAll (phone * phonebook)
{
   int x = 0;
   char nullStr[20] = {'\0'}; 

   for ( x = 0; x < counter; x++ )
   {
      strcpy(phonebook[x].FirstName, nullStr); 
      strcpy(phonebook[x].LastName, nullStr); 
      strcpy(phonebook[x].PhoneNumber, nullStr); 
      --counter; 
   }   

   printf("All Contacts have been deleted.\n");     
} 
void FreeContacts (phone * phonebook)
{
     --counter;
     for ( ; counter > 0; --counter)
     {
        free(phonebook[counter].FirstName); 
        free(phonebook[counter].LastName); 
        free(phonebook[counter].PhoneNumber); 
        free(phonebook); 
        counter = 0; 
        return; 
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:28:46.257

您*确定*要执行“realloc(phonebook, sizeof(phone));”吗？在您的 AddEntry() 函数中？这几乎肯定不是你认为的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:59:21.617

您需要的几乎所有代码都已在此程序中。我建议您从查找教程或阅读书籍的文件 I/O 章节开始。另一个资源是 C 函数的手册页。如果您使用的是 *NIX 系统，您可以输入`man fopen`或输入 Google 以在 Windows 系统上获得相同的结果。

[这是`fopen()`](http://linux.die.net/man/3/fopen). 如您所见，有两个参数，您要打开的文件的名称和模式。

显然，有一些选项可以打开一个文件以便在那里写入以及附加一个已经存在的文件。

您提到了写入 .txt 文件的要求，在您的代码中您正在打开一个 .dat 文件`phonebook_contacts.dat`，这是您在谈论的文件吗？

最简单的选择之一是将整个文件读入内存，然后将其更改并写回文件（覆盖现有文件），但这不是有效的，因为您必须遍历每个现有元素并复制它们进入你`phonebook`的变量。您可能需要与您的讲师核实，看看这是否是一个可接受的解决方案。就像是：

```
 while( more to read){
    read fname line
    strcpy(phonebook[i].first_name, fname)
    read lname line
    strcpy(phonebook[i].last_name, fname)
    read num line
    strcpy(phonebook[i].number, num)
    increment i
 } 
```

# python - 有没有办法检测命令提示符在 python/django 中是否可用？

> ID：16159448
> 
> 赞同：1
> 
> 时间：2013-04-23T01:35:22.953
> 
> 标签：python, django

我有一些代码有时会从命令行运行（django 管理命令），有时不会（django changelist 操作）。在此代码中，如果引发某个异常，我可以获得一些用户输入并在命令提示符 (stdin) 可用的情况下继续操作。否则，我需要让异常传播或做一些不同的事情。

例如

```
def copy_account_settings(old_acct_domain, new_acct_domain):
  try:
    new_account = Account.objects.get(domain = new_acct_domain)
  except Account.DoesNotExist:
    print ("Couldn't find an account matching %s." % new_acct_domain)
    if <command prompt is available>:
      print "Would you like to create the account? (y/n)"
      if raw_input().lower().strip()='y':
        # get some more input and create the account and move on
    else:
      raise 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:45:03.967

也许您可以检查 TTY？

```
import os
if os.isatty(0): 
```

如果会话是交互式的，那应该返回 true，否则返回 false。

# facebook - 喜欢和like.php的问题

> ID：16159453
> 
> 赞同：0
> 
> 时间：2013-04-23T01:35:54.107
> 
> 标签：facebook, facebook-like

我正在尝试为我拥有的公司优化我的网站的一些内容。公司名称在几周前更改了。问题是当有人点击我们网站上的“喜欢”按钮时，facebook 会显示用户喜欢旧的公司名称。该网站是 www.puzzlecreatives.com。旧名称是铂金营销。问题似乎出在“like.php”中，我无法在我们服务器的任何位置找到该文件的位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:14:29.453

`like.php`是在 Facebook 的服务器上，这实际上并不是问题所在。问题是您的“facebook 应用程序”是附加到按钮的内容，并且仍然与旧公司名称相关联。

转到[此处](https://developers.facebook.com/apps)，登录您公司的 Facebook 帐户并更改详细信息。

# mysql - 如何在 1 个表中插入相同的数据并将其限制为 10

> ID：16159456
> 
> 赞同：0
> 
> 时间：2013-04-23T01:36:03.823
> 
> 标签：mysql

我正在使用“用户最近查看”脚本。我有 3 个表，`tbl_user, tbl_articles and tbl_recently_viewed.`我的 tbl_recently_viewed 有 3 个字段，`user_id(from tbl_user),article_id(from tbl_articles) and date,`我做了 2 个主键，`user_id and article_id.`我的问题是我想限制某个 user_id 插入 tbl_recently_viewed 到 10。有什么办法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:59:40.913

我认为你需要一个触发器来做你想做的事。如果您只插入行，那么您可以使用插入触发器来删除最旧的。

以下仅作为示例：

```
CREATE TRIGGER t_keep10 after INSERT ON t
  FOR EACH ROW BEGIN
     if (10 > (select count(*) from t where t.user_id = new.user_id)) then
         delete from t where t.article_id = (select a from (select article_id as a from t t2 where t2.user_id = t.user_id order by date desc limit 1))
     end if;
  END;
| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:00:01.103

要从以下位置删除用户最旧的项目`tbl_recently_viewed`：

```
DELETE v.* FROM tbl_recently_viewed v
JOIN (SELECT MIN(date) mindate
      FROM tbl_recently_viewed
      WHERE user_id = ?) r
ON v.date = r.mindate
WHERE user_id = ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:12:28.097

您可以使用此查询删除 10 之后的行：

```
delete from tbl_recently_viewed where user_id=1 and date <= (select max(date) from (select date from tbl_recently_viewed where user_id=1 order by date desc limit 10,999) as tmp); 
```

或者只是使用查询删除最旧的行：

```
delete from tbl_recently_viewed where user_id=1 order by date limit 1; 
```

# tinymce - 从数据库调用的 tinyMCE 默认内容

> ID：16159457
> 
> 赞同：1
> 
> 时间：2013-04-23T01:36:06.387
> 
> 标签：tinymce

我使用 tinyMCE 作为博客帖子的内容。我的问题是关于博客的编辑。因此，当作者在他/她的博客上进行编辑时，内容必须加载到从数据库调用的 tinyMCE 编辑器中，例如：

```
query = select id,title,content from blogs where id='id'

-input id="subject" value="echo title" -

-textarea- id="content"- "echo content" -textarea- 
```

但这显然是行不通的。任何帮助将不胜感激。

# c# - 是否有将字符串作为模型传递给 MVC 视图的修复程序

> ID：16159463
> 
> 赞同：0
> 
> 时间：2013-04-23T01:37:07.837
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC 4.0 并遇到了由于我的模型是字符串对象而无法获得正确视图的情况。

以下尝试都以相同的方式失败，即浏览器尝试将我的调用路由到具有模型内容名称的视图。

尝试 1

```
return View("Image", (object)key); 
```

尝试 2

```
return View(viewName: "Image", model: (object)key); 
```

尝试 3

```
return View("Image", "Image", (object)key); 
```

尝试 4

```
return View(viewName: "Image", masterName: "Image", model: (object)key); 
```

错误：未找到视图“我的数据”或其主视图，或者没有视图引擎支持搜索的位置...

[我从http://www.heartysoft.com/aspnet-mvc-gotcha-string-model](http://www.heartysoft.com/aspnet-mvc-gotcha-string-model)得到了我尝试的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:51:20.453

尝试使用 System.String 以外的东西。也许 MvcHtmlString 像这样：

```
return View("Image", "Image", MvcHtmlString.Create(key)); 
```

或者只是创建一个模型类：

```
public class MyViewModel
{
    public string Value { get; set; }
} 
```

任何一个都应该工作。当然，这意味着可能会改变你的观点，但不会太多。

# javascript - Greasemonkey 脚本中的间隔不等待

> ID：16159465
> 
> 赞同：1
> 
> 时间：2013-04-23T01:37:24.557
> 
> 标签：javascript, greasemonkey

我正在使用 Greasemonkey 每 100 秒单击一次页面上的按钮。到目前为止，我能够让 JS 单击按钮，但它没有等待 100 秒。

我没有收到任何错误，但`setInterval`只是在继续之前没有等待。谢谢！

编码：

```
console.log('script start');
var int =self.setInterval(function(){clickConfirmButton(e)},100000);
console.log('script start waiting');
function clickConfirmButton(e) {
 var buttons = document.getElementsByTagName('button');
 var clicked = false;
 for (var index=0; index < buttons.length; index++){
  if(buttons[index].textContent == "check"){
   buttons[index].click();
   clicked = true;
   break;
  }
 }
 if(!clicked){
  setTimeout("window.location.reload()",300*1000);
 }
}
clickConfirmButton(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:46:33.497

最后你有这个函数调用：

```
clickConfirmButton(); 
```

它完全绕过了 100 秒计时器。删除或注释掉该行。

# spring - 找不到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/data/mongo]

> ID：16159466
> 
> 赞同：3
> 
> 时间：2013-04-23T01:37:40.830
> 
> 标签：spring, mongodb, maven, configuration

我正在尝试构建一个示例 Spring+MongoDB 骨架，但出现以下运行时错误。

```
SEVERE: Context initialization failed
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/mongo]
Offending resource: ServletContext resource [/WEB-INF/spring-servlet.xml]

    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:284)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1332)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4887)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)

Apr 23, 2013 7:14:57 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/mongo]
Offending resource: ServletContext resource [/WEB-INF/spring-servlet.xml]

    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:284)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1332)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4887)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

供您参考，我的代码在 github 中：
[https ://github.com/james-singh/maven-spring](https://github.com/james-singh/maven-spring)

知道如何解决这个问题吗？珍惜你的时间。

**编辑：**
我检查了罐子并在那里找到了 spring-mongodb xsd 文件。

```
james@james-Inspiron-1525:~/.m2/repository/org/springframework/data/spring-data-mongodb/1.2.0.RELEASE$ ls
_maven.repositories                                 spring-data-mongodb-1.2.0.RELEASE.pom
spring-data-mongodb-1.2.0.RELEASE.jar               spring-data-mongodb-1.2.0.RELEASE.pom.sha1
spring-data-mongodb-1.2.0.RELEASE.jar.sha1          spring-data-mongodb-1.2.0.RELEASE-sources.jar
spring-data-mongodb-1.2.0.RELEASE-javadoc.jar       spring-data-mongodb-1.2.0.RELEASE-sources.jar.sha1
spring-data-mongodb-1.2.0.RELEASE-javadoc.jar.sha1
james@james-Inspiron-1525:~/.m2/repository/org/springframework/data/spring-data-mongodb/1.2.0.RELEASE$ jar -tf spring-data-mongodb-1.2.0.RELEASE.jar | grep xsd
org/springframework/data/mongodb/config/spring-mongo-1.2.xsd
org/springframework/data/mongodb/config/spring-mongo-1.1.xsd
org/springframework/data/mongodb/config/spring-mongo-1.0.xsd
james@james-Inspiron-1525:~/.m2/repository/org/springframework/data/spring-data-mongodb/1.2.0.RELEASE$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T07:08:29.370

您必须确保您的 WEB-INF/libs 目录中有一个 spring-data-mongodb-1.2.0.RELEASE.jar。请检查一下 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T08:48:50.623

我找到了解决这个问题的方法。

尝试删除架构[http://www.springframework.org/schema/data/mongo](http://www.springframework.org/schema/data/mongo)并像这样直接定义 mongo bean：

```
<bean id="mongoAddress" class="com.mongodb.ServerAddress">
    <constructor-arg name="host" value="${MONGO_HOST}" />
    <constructor-arg name="port" value="${MONGO_PORT}" />
</bean>

<bean id="mongo" class="com.mongodb.Mongo">
    <constructor-arg name="addr" ref="mongoAddress" />
    <constructor-arg name="options" ref="mongoOptions"/>
</bean>

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
     <constructor-arg index="0" ref="mongo" />
     <constructor-arg index="1" value="mydb" />
</bean> 
```

这个解决方案对我来说很好用。

# javascript - Jquery 效果 - 鼠标悬停背景颜色变化；

> ID：16159467
> 
> 赞同：2
> 
> 时间：2013-04-23T01:37:40.590
> 
> 标签：javascript, jquery, css, mouseevent

我正在尝试创建一种效果，即当鼠标悬停在此效果上时，背景颜色会从左到右发生变化。我试过这个：

[http://jsfiddle.net/WVWKE/](http://jsfiddle.net/WVWKE/)

```
$('#div1').mouseover(function(){
$('#back').animate({width: '200px'}, 1000);
});
$('#div1').mouseout(function (){
$('#back').animate({width: '0px'}, 1000).stop();
});

#div1{
height:200px;
width:200px;
background-color:green;
float:left;
}

#back {
width:0px;
height:200px;
background-color:Gray;
display: block;
}

<div id="div1">
<div style="position:absolute">That was amazing!</div>
<div id="back">
</div>
</div> 
```

但是，无法正常工作。如果我将鼠标多次放在 div 上，这会产生多次效果，但不会。试着把鼠标和离开很多次。效果发生多次。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:39:44.187

您使用`stop`不正确。像这样使用它：

```
$('#div1').mouseover(function (){
    $('#back').stop().animate({width: '200px'}, 1000);
});
$('#div1').mouseout(function (){
    $('#back').stop().animate({width: '0px'}, 1000);
}); 
```

如果您将其视为英语，则很容易理解：

```
$('#back')                         // take "back"
.stop()                            // and stop it
.animate({width: '200px'}, 1000);  // and animate it 
```

## **[小提琴](http://jsfiddle.net/WVWKE/1/)**

# iphone - 更改副本时 NSDictionary 更改

> ID：16159470
> 
> 赞同：2
> 
> 时间：2013-04-23T01:37:53.777
> 
> 标签：iphone, objective-c

我是 ObjectiveC 和 Xcode 的新手并且会犯错误。这段代码从 getAllRecords 中获取了一个字典（myDataPlist）。然后，我在 (myDataPlist) 中制作一个字典（1 条记录）的可变副本，并用它解密 1 个字段。这完美地工作。我只返回那个记录（mutCopy）。这也有效。我的问题是原始字典（myDataPlist）的更改。它被解密的记录也在（myDataPlist）中被解密。2 NSLog(@"%@",myDataPlist) 返回不同的结果。我肯定错过了什么。为什么 (myDataPlist) 会发生变化？

谢谢您的帮助。

```
-(NSDictionary *)getRecordForKey:(NSString *)key{

    NSDictionary *myDataPlist = [self getAllRecords];
    NSMutableDictionary *mutCopy = [[myDataPlist valueForKey:key] mutableCopy];
    NSArray *keys = [mutCopy allKeys];
    NSData *tData = [[NSData alloc]init];
    NSLog(@"%@",myDataPlist);
    for (int x = 0; x <= [keys count] - 1; x++) {
        if (![keys[x] isEqualToString:@"Template"] && ![keys[x] isEqualToString:@"RecNum"]) {

        NSMutableArray *myArray = [mutCopy objectForKey:keys[x]];
        tData = myArray[1];
        NSString *tString = [tData decryptData:tData withKey:self.settingsManager.masterPad];
        myArray[1] = tString;
        [mutCopy setObject:myArray forKey:keys[x]];

        }
    }
    NSLog(@"%@",myDataPlist);
    return mutCopy ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:10:37.993

`mutableCopy`仅创建字典的副本，而不创建字典的内容。因此，您从中接收的字典`[[myDataPlist valueForKey:key] mutableCopy]`本质上是一个新字典，其中引用了相同的对象（它不是深拷贝）。

尝试使用

```
NSMutableDictionary *mutCopy = 
    [[NSMutableDictionary alloc] initWithDictionary:[myDataPlist valueForKey:key] 
                                          copyItems:YES]; 
```

而不是`mutableCopy`.

来自 Apple 文档：

> **其他词典**
> 
> 包含用于初始化新字典的键和值的字典。
> 
> **旗帜**
> 
> 如果是，otherDictionary 中的每个对象都会收到一个 copyWithZone: 消息来创建对象的副本——对象必须符合 NSCopying 协议。在托管内存环境中，这不是对象将收到的保留消息。然后将对象副本添加到返回的字典中。如果否，则在托管内存环境中， otherDictionary 中的每个对象在添加到返回的字典时都会收到保留消息。

如果您的字典包含自定义对象，请确保它们符合 NSCopying 协议。

# java - Android上dalvik中的动态类重新加载

> ID：16159473
> 
> 赞同：1
> 
> 时间：2013-04-23T01:38:00.777
> 
> 标签：java, android, jvm, dalvik

我试图了解是否可以在 Android 上运行的 Dalvik vm 中动态重新加载现有类/加载新类。在网上搜索给了我一些混合的答案：

[在 Dalvik VM（Android 的 VM）上，您不能在 Sun VM 中做什么？](https://stackoverflow.com/questions/230193/what-can-you-not-do-on-the-dalvik-vm-androids-vm-that-you-can-in-sun-vm)

[如何在 android/dalvik 上动态加载 Java 类？](https://stackoverflow.com/questions/3022454/how-to-load-a-java-class-dynamically-on-android-dalvik)

[http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)

[http://larshamren.blogspot.com/2012/02/android-dynamically-loading-classes.html](http://larshamren.blogspot.com/2012/02/android-dynamically-loading-classes.html)

有人可以确认是否可以在 Android 上这样做？它的工作方式是否与 Sun 的 vm 完全相同，可能只是 Dalvik 加载到 .dex 文件中并且需要将它们打包在 jar 中？在 Android 平台上进行类加载是否有任何限制？如果有关于这方面的官方 Dalvik 文档，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:34:46.017

您列出的[android-developers](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)文章展示了如何使用“插件”方法在 Dalvik 中使用`DexClassLoader`.

它应该工作的方式是，如果没有更多对`ClassLoader`或从中加载的类的引用，则可以对类本身进行垃圾收集。在实践中，当前版本的 Dalvik（Android 4.2 “Jellybean”）不支持类卸载，所以类仍然存在。

您可以定义一个`DexClassLoader`新版本并加载这些类的新版本，但您会泄漏以前的副本。这可能是也可能不是问题，具体取决于您希望加载一组新类的频率以及它们的大小。

# jquery - 使用 jQuery 隐藏所有相同的元素

> ID：16159474
> 
> 赞同：0
> 
> 时间：2013-04-23T01:38:02.283
> 
> 标签：jquery, hide

我希望知道如何使用 jQuery 隐藏所有相同的元素，我尝试了以下代码，但这仅适用于同类的第一个元素。

```
$('#duracion').hide();
$('#video-box img').on({
mouseenter: function() {
    $('#duracion').slideDown(200);
},

mouseleave: function() {
    $('#duracion').slideUp(200);
}
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:39:05.930

根据规范，ID 在 HTML 标记中必须是唯一的。假设您有多个具有完全相同 id 的元素，将导致您体验到的行为（仅查询第一个元素）。

您应该使用*类名*而不是 ID，然后调用

```
$('.duracion').hide();   // will hide all nodes which own the classname "duracion" 
```

# android - 适用于 HTC One 手机的 Sencha Touch 2.X 解决方法

> ID：16159476
> 
> 赞同：5
> 
> 时间：2013-04-23T01:38:20.020
> 
> 标签：android, sencha-touch

ext版本测试：Sencha Touch 2.2

测试的浏览器版本： HTC One 上的 Chrome (Android 4.1.2) 股票 HTC One 浏览器 (Android 4.1.2)

说明： Sencha Messageboxes 等在股票浏览器或 HTC One 上的 webviews 中清除它们后不会释放焦点。在 Chrome 或其他 Android 4.1.2 手机 AFAIK 上不会发生此问题。今天测试了三星，一切都按预期工作。

重现问题的步骤：使用 HTC One，在此处访问 Sencha Kitchen Sink 演示：http: [//cdn.sencha.io/touch/sencha-touch-2.2.0/examples/kitchensink/index.html#demo/覆盖](http://cdn.sencha.io/touch/sencha-touch-2.2.0/examples/kitchensink/index.html#demo/overlays) 点击“警报”，然后点击“确定”。在 Chrome 中运行良好。不适用于股票浏览器或 web 视图（因此也没有 PhoneGap/Cordova）。

是的，我知道，这属于煎茶板上。我这个周末在那里发了一个帖子，周一早上该帖子被删除了。谷歌“sencha 默认覆盖 Android 4.1.2 HTC One”以查看死链接。所以我在这里发帖。

也许我的挫败感正在表现出来，而 Sencha 不喜欢我的帖子的语气。我真的很想从 Sencha、HTC 或 SO 上的某个人那里看到某种解决方法。

有谁知道允许 Sencha Touch 2.X 在 HTC One 上工作的软件解决方法？还是我们一直在等待 HTC 和运营商？并不是 Sencha 的错，但这让我对 HTML-5 移动应用程序开发感到失望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T02:15:09.240

由 Sencha 论坛中的 appglu 提供的答案：

在 messagebox.js 中将 hideAnimation 设置为 null 而不是：

```
hideAnimation: { type: 'popOut', duration: 250, easing: 'ease-out' }, 
```

此解决方案适用于我的新 HTC One，运行我在 Cordova 3.0 中构建的 Sencha 2.2.1 应用程序。

此处进一步讨论： [http ://www.sencha.com/forum/showthread.php?262324-Sencha-Messagebox-and-Overlay-Problems-on-HTC-One-Browser](http://www.sencha.com/forum/showthread.php?262324-Sencha-Messagebox-and-Overlay-Problems-on-HTC-One-Browser)

# html - 如何使用响应式设计原则来解决此屏幕尺寸问题？

> ID：16159477
> 
> 赞同：0
> 
> 时间：2013-04-23T01:38:25.567
> 
> 标签：html, css, responsive-design

对于我的一个项目，我决定开始使用响应式设计。我使用的指南不是明确的，纯粹是介绍性的，所以我在某个地方迷路了，在这里找不到问题。如果使用下面的代码，您将为自己呈现一个导航菜单。它在 13 英寸的屏幕上看起来不错，但是通过缩短浏览器的宽度来缩小屏幕尺寸，您会注意到导航菜单将占据徽标的空间。我该如何调整它，以使导航菜单不会位于徽标的顶部，并且可能会在它越过徽标之前停止？

**HTML：**

```
<header class="bar_top">
    <div class="logo_block">
        <a href="index.php">
            <img alt="Logo" src="/logo.png" class="logo">
        </a>
    </div>
    <nav class="menu_above">
        <ul class="menu">
            <li class="menu_inner"><a href="#">Home</a></li>
            <li class="menu_inner"><a href="#">Our Products</a></li>
            <li class="menu_inner"><a href="#">Services</a></li>
            <li class="menu_inner"><a href="#">About Company</a></li>
            <li class="menu_inner"><a href="#">Contact</a>
                <ul class="menu_layer">
                    <li class="menu_contact_is"><a class="menu_contact_inner" href="#">Menu 1</a>
                    </li>
                    <li class="menu_contact_is"><a class="menu_contact_inner" href="#">Menu 2</a>
                    </li>
                    <li class="menu_contact_is"><a class="menu_contact_inner" href="#">Menu 3</a>
                    </li>
                </ul>
            </li>
            <span class="phone_us">000-000-0000</span>
        </ul>
    </nav>
</header> 
```

**CSS：**

```
.bar_top {
    background-color: #FFFFFF;
    font-size:14.5px;
    width: 100%;
    height: 82px;
    top: 0;
    left: 0;
    position:absolute;
    z-index: 99;
}

.logo_block {
    display: block;
    position: absolute;
    z-index: 998;
}
.logo {
    margin-left: 30px;
    margin-top: -3px;
    height: 85px;
}
.menu_above {
    width: 960px;
    margin:  40px auto;
    float:right;
}
.menu_layer {
    margin-left: -40px;
}
.menu_contact_is {
    color: #ffffff !important;
}
a.menu_contact_inner {
    color: #ffffff !important;
}
.phone_us {
    font-size: 1.5625em;
    margin-left: 75px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:24:39.080

如果您试图将菜单保留在页面左侧的徽标旁边，您应该尝试以下操作：

```
 .logo_block {
      display: inline-block;
      vertical-align: top;
  }

.menu_above {
        margin: 40px auto;
        display: inline-block;
 } 
```

使用 div 容器包装内容是很常见的，该容器在两侧具有固定的 with 和自动边距，以使其保持在页面的中心。

当您使用**不必要的相对定位**时，您还应该考虑修改页面上的其他**元素**。;)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:45:54.280

试试属性 margin: auto; 将元素设置在屏幕或容器的中心，而不是使用静态值来定位元素

您还可以阅读有关**灵活设计**和**响应式设计**的信息来了解。**

# javascript - 类型错误评估单元格.not

> ID：16159479
> 
> 赞同：0
> 
> 时间：2013-04-23T01:38:40.860
> 
> 标签：javascript, jquery, jquery-mobile

我在 jquery 移动应用程序上收到以下错误。任何想法这可能指的是什么以及如何解决它？

```
10970TypeError: 'undefined' is not an object (evaluating '$cells.not') 
```

该错误很少发生。它似乎与在表头上创建隐藏/显示切换有关。

# python - 强制函数参数为字符串

> ID：16159486
> 
> 赞同：1
> 
> 时间：2013-04-23T01:39:47.087
> 
> 标签：python, string, function, arguments

所以，我的代码是这样的：

```
def func(s,x):
   return eval(s.replace('x',x)

#Example:
>> func('x**2 + 3*x',1)
4 
```

函数的第一个参数`func`必须是字符串，因为该函数`eval`只接受字符串或代码对象。但是，我想在一种计算器中使用此功能，例如，用户在其中键入`2 + sin(2*pi-0.15) + func(1.8*x-32,273)`并获得表达式的答案，而且总是不得不在表达式内部写上引号，这很烦人`func()`。

有没有办法让python理解`s`参数总是一个字符串，即使它不在引号之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:44:11.600

不，这是不可能的。您不能在 Python 解释器解析和评估之前拦截它`1.8*x-32`。

用作`eval`美化计算器是一个**非常**值得怀疑的想法。用户可以传入各种恶意 Python 代码。**如果**你打算这样做，你应该为代码运行提供尽可能小的环境。传入你自己的全局变量`dict`，只包含允许用户引用的变量。

```
return eval(s, {'x': x}) 
```

除了更安全之外，这也是替代`x`表达式的更好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:43:37.423

你可以让它处理这两种情况：

```
def func(s, x=0):
    if isinstance(s, basestring):
        # x is in the scope, so you don't need to replace the string
        return eval(s)
    else:
        return s 
```

和输出：

```
>>> from math import *
>>> func('2 + sin(2*pi-0.15) + func(1.8*x-32,273)')
    -30.1494381324736
>>> func('x**2 + 3*x', 1)
    4 
```

注意：`eval`可以做的不仅仅是添加数字。我可以打字`__import__('os').system('rm /your/homework.doc')`，你的计算器会删除你的作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:56:13.353

一句话：不，如果我理解你的话。

在更多的情况下，您可以通过制作`x`一个特殊的对象来解决这个问题。这就是 Python 数学库[SymPy](http://sympy.org)的工作原理。例如：

```
>>> from sympy import Symbol
>>> x = Symbol('x')
>>> x**2+3*x
x**2 + 3*x
>>> (x**2+3*x).subs(x,1)
4 
```

甚至还有一个方便的函数可以将字符串转换为 sympy 对象：

```
>>> from sympy import sympify, pi
>>> sympify("x**2 - sin(x)")
x**2 - sin(x)
>>> _.subs(x, pi)
pi**2 
```

所有关于不受信任的用户输入的警告都会保留。[我懒得检查代码路径上是否使用了`eval`or ，而且正如他们所说，每个武器都已加载，甚至是未加载的武器。]`exec``sympify`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T02:25:56.387

你可以写一个解释器：

```
import code

def readfunc(prompt):
    raw = input(prompt)
    if raw.count(',')!=1:
        print('Bad expression: {}'.format(raw))
        return ''
    s, x = raw.split(',')
    return '''x={}; {}'''.format(x, s)

code.interact('Calc 0.1', readfunc) 
```

# java - 调用 bean 方法 primefaces jsf 时托管 bean 字段为空

> ID：16159498
> 
> 赞同：1
> 
> 时间：2013-04-23T01:41:53.123
> 
> 标签：java, spring, jsf, cdi

我正在开发一个 primefaces - spring 框架应用程序，但我的 bean 有一个大问题

我在 java 代码中使用 spring 注释来发现我的 bean、服务或组件

但问题是当我启动 jboss 7.1 AS 并创建 bean 时，我可以看到我的 bean ListUsersBean

成功创建并成功设置了自动装配的设置器，但是当我尝试调用 test() 方法之后

从 jsf 页面自动装配属性为空。

我不知道发生了什么

非常感谢如果有人可以帮助我

我正在使用

spring-framework 3.2.2 JBOSS AS 7.1 primefaces 3.5

这是我的豆子

```
package edu.unbosque.beans;

import java.io.Serializable;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ManagedProperty;

import edu.unbosque.model.User;
import edu.unbosque.services.IUserService;
import edu.unbosque.services.TestService;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Component;

@Component
@ManagedBean
@SessionScoped
public class ListUsersBean implements Serializable{
    /**
     * Acceso A Datos De Usuario
     */
    private IUserService userService;

    private TestService testService;
    /**
     * Listado De Usuarios
     */
    private List<User> usersList;
    /**
     * Usuario Seleccionado
     */
    private User selectedUser;
    /**
     * Carga Los Usuarios
     */
    private void populateUsers(){       
        this.usersList = this.userService.getUsers();
    }
    public IUserService getUserService() {
        return userService;
    }

    @Autowired(required = true)
    @Qualifier("userServiceImpl")
    public void setUserService(IUserService userService) {
        this.userService = userService;
    }
    public List<User> getUsersList() {
        return usersList;
    }
    public void setUsersList(List<User> usersList) {
        this.usersList = usersList;
    }
    public User getSelectedUser() {
        return selectedUser;
    }
    public void setSelectedUser(User selectedUser) {
        this.selectedUser = selectedUser;
    }   

    public TestService getTestService() {
        return testService;
    }

    @Autowired
    public void setTestService(TestService testService) {
        this.testService = testService;
    }

    public void test(){ 

        this.testService = this.getTestService();

        int i = 1;
        i = i + 2;
    }
} 
```

这是我的服务

```
package edu.unbosque.services;

import java.util.List;

import javax.faces.bean.ManagedProperty;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

import edu.unbosque.*;
import edu.unbosque.dao.UserDao;
import edu.unbosque.model.User;
import javax.inject.Named;

@Named("userServiceImpl")
public class UserServiceImpl implements IUserService{

    @Autowired
    private UserDao userDao; 

    public UserDao getUserDao() {
        return userDao;
    }

    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {                       
        return (UserDetails) userDao.getUserByUserName(username);
    }

    @Override
    public List<User> getUsers() {
        return getUserDao().getUsers();
    }      
} 
```

配置文件

面孔-config.xml

*

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>

    <lifecycle>
        <phase-listener>edu.unbosque.listeners.LoginPhaseListener</phase-listener>
    </lifecycle>
</faces-config> 
```

*

弹簧数据库.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans    
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

       <context:annotation-config />
       <context:component-scan base-package="edu.unbosque.model" />
       <context:component-scan base-package="edu.unbosque.dao" />
       <context:component-scan base-package="edu.unbosque.services" />
       <context:component-scan base-package="edu.unbosque.beans" />    

       <context:property-placeholder location="classpath:jdbc.properties" />
       <tx:annotation-driven transaction-manager="hibernateTransactionManager" />
       <bean id="hibernateTransactionManager"
              class="org.springframework.orm.hibernate4.HibernateTransactionManager">
              <property name="sessionFactory" ref="sessionFactory" />
       </bean>
       <bean id="dataSource"
              class="org.springframework.jdbc.datasource.DriverManagerDataSource">
              <property name="driverClassName" value="${database.driver}" />
              <property name="url" value="${database.url}" />
              <property name="username" value="${database.user}" />
              <property name="password" value="${database.password}" />
       </bean>

       <bean id="sessionFactory"
              class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
              <property name="dataSource" ref="dataSource" />
              <property name="annotatedClasses">
                     <list>
                           <value>edu.unbosque.model.User</value>
                           <value>edu.unbosque.model.Authority</value>                           
                     </list>
              </property>
               <property name="hibernateProperties">
                     <props>
                           <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                           <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                            <prop key="hibernate.hbm2ddl.auto">update</prop>

                     </props>
              </property>         
        </bean>

       <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>             
</beans> 
```

web.xml

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>           
            /WEB-INF/spring-security.xml,
            /WEB-INF/spring-database.xml
        </param-value>
    </context-param>

    <display-name>Semilleros Universidad El Bosque</display-name>

    <!-- Change to "Production" when you are ready to deploy -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <!-- Welcome page -->
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <!-- JSF mapping -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>bootstrap</param-value>
    </context-param>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

</web-app> 
```

![在此处输入图像描述](https://i.stack.imgur.com/GM5jF.png) ![在此处输入图像描述](https://i.stack.imgur.com/HxJ1A.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:29:35.707

问题是你混淆了 jsf、CDI 和 spring 注释。`@Component`在你的课堂上使用`UserServiceImpl`。因为如果使用`@Named`，创建的 bean 的生命周期将由 CDI 管理，因为它是一个 CDi 注释。因此，当您使用`@Autowired`注解注入 Spring 未知的 bean 时，将获得`null`. 因此，当您在注入 bean 时使用`@Autowired`时，注入 bean 必须在 spring 托管上下文中，并且要做到这一点，您应该使用`@Component`. 如需进一步阅读，您可以查看这个不错的[教程](http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/)。

# javascript - Google Maps API v3 折线选项卡式 InfoWindow

> ID：16159499
> 
> 赞同：0
> 
> 时间：2013-04-23T01:41:58.360
> 
> 标签：javascript, google-maps, google-maps-api-3, gis

我在获取选项卡式信息窗口以显示路径时遇到了一些困难。我已按照[本教程](http://googlemapapitutorial.com/customizedinfowindow1.jsp)进行操作。

我有一个带有折线的 KML 图层（它们是曲线 - 代表地形特征），并且不知道如何在单击路径时显示信息窗口。我看过一些关于计算中点（但直线）的教程。

我试图获得路径点的 2 种方法（很多）：

```
var streamPoly = google.maps.Polyline.prototype.getPosition = function() {
return this.getPath().getAt(0);}

var streamPoly = poly.getPath(); 
```

我的标题中有什么：

```
var map;
var streamPoly;

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(42.687984,-79.394159);

    var mapOptions = {
        zoom: 12,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

    var ctaLayer = new google.maps.KmlLayer({
        url: 'paths.kml'
    });
    ctaLayer.setMap(map);
    ctaLayer.set('preserveViewport', true); 

    var  infoBubble = new InfoBubble({
        maxWidth: 300
    });

    var div = document.createElement('DIV');
    div.innerHTML = 'Hello';

    infoBubble.addTab('Tab 1', div);
    infoBubble.addTab('Tab 2', "<B>This is tab 2</B>");

    google.maps.event.addListener(streamPoly, 'click', function() {
        if (!infoBubble.isOpen()) {
            infoBubble.open(map, streamPoly);
        }
    });
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:38:02.453

You can't access polylines in a KmlLayer as google.maps.Polyline objects. To open an InfoWindow (or an InfoBubble) on a KmlLayer, you need to add a listener to the KmlLayer:

```
google.maps.event.addListener(ctaLayer, 'click', function(evt) {
        if (!infoBubble.isOpen()) {
            infoBubble.setPosition(evt.latLng);
            infoBubble.open(map);
        }
    }); 
```

evt will be a [KmlLayerMouseEvent](https://developers.google.com/maps/documentation/javascript/reference#KmlMouseEvent) which will contain information about the feature clicked

# php - Spotify iFrame 在 Bootstrap 模式中无法正确显示？

> ID：16159503
> 
> 赞同：0
> 
> 时间：2013-04-23T01:42:12.527
> 
> 标签：php, html, css, twitter-bootstrap, spotify

我正在尝试将 Spotify 播放列表输入到 Bootstrap 模式中，但它不是“大”按钮，而是“紧凑”按钮。它在模态中以这种方式显示： ![在此处输入图像描述](https://i.stack.imgur.com/2U7kj.png)

bootstrap 和 iframe 的代码是

```
 <!-- Modal -->
<div id="spotify_player" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Spotify Player</h3>
  </div>
  <div class="modal-body">
    <iframe src="https://embed.spotify.com/?uri=spotify:user:1210474735:playlist:1u4MR4ER329f64KjsRrcnA" width="445" height="525" frameborder="0" allowtransparency="true"></iframe>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

并在显示器`src`上`iframe`显示为： ![在此处输入图像描述](https://i.stack.imgur.com/YzZxo.png)

它应该是这样的。我需要做什么才能让第一张图像像第二张一样具有播放列表/“长”按钮？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:41:26.603

Bootstrap 的 hide 类将显示样式设置为 none，这也隐藏了 iframe。这将使播放按钮变得紧凑，而不管 iframe 的宽度和高度比如何。

可以理解，这不是 Spotify Play 按钮的预期行为，我已经提交了一份错误报告，以便最接近代码的人可以查看它。

# c - 使用 Typedef 将元素存储在 2D 数组中

> ID：16159507
> 
> 赞同：0
> 
> 时间：2013-04-23T01:42:40.463
> 
> 标签：c, arrays, struct, typedef

我正在将我已经完成的程序（使用 4 个数组）更改为一个新程序，该程序使用 typedef 创建一个包含这些数组的结构，所以我只使用一个。

为此，我使用了以下代码：

```
typedef struct structure
{
char names[13][9];
int scores[13][4];
float average[13];   
char letter[13];
} stuff; 
```

现在包含所有这些的一个数组是：

```
stuff everything[13]; 
```

但是，由于“名称”“分数”“平均”和“字母”不再存在，我遇到了一些并发症，我必须将其更改为通过 typedef。所以，作为一个例子，我有这个代码：

```
for(i=0; i<13; i++)
{
    for(j=0; j<4; j++)
    {
    fscanf(score, "%d", &scores[i][j]);
    }
}   
fclose(score); 
```

我如何让它将信息存储在“分数”数组中？

另外，我以后如何从该数组中调用信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:45:25.960

你仍然有`scores`，它只是在结构内部。您可以使用普通的数组和结构访问运算符来访问它：

```
everything[x].scores[i][j] = 6; 
```

`x`正如您声明的那样，必须介于`0`和（包括）之间。`12``everything``13``stuff`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:53:23.193

```
 stuff everything[13]; 
```

声明一个包含 13 个结构的数组，其类型为`stuff`. 它相当于

```
 struct structure everything[13]; 
```

，`typedef`你不需要再写`struct structure`了。

为了从上述结构数组中访问信息，您可以执行以下操作`scores`（类似的推理适用于其他字段：

```
 for (int i = 0; i < 13; ++i )
 {
    for ( int j = 0; j < 13; ++j)
    {
       for (int k = 0; k < 4; ++k)
       {
           printf("%d ", everything[i].scores[j][k]);
       }
   }
 } 
```

当你想把东西放入这个结构数组时，你应该遵循与上面相同的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:07:16.603

可能你想要的是这样的：

```
#define NUM_TEAMS 13
typedef struct 
{
    char names[9];
    int scores[4];
    float average;   
    char letter;
} team; 

team everything[NUM_TEAMS];

int readInScores(team* allTeams)
{
    int i = 0;
    int j= 0;
    FILE* score = fopen("whatever", "r");
    if (score == 0)
        return 0;
    for(i=0; i<NUM_TEAMS; i++)
    {
        for(j=0; j<4; j++)
        {
            fscanf(score, "%d",&allTeams[i].scores[j]);
        }
    }   
    fclose(score);
    return 1;
} 
```

# java - 重构后更改内容提供程序包

> ID：16159511
> 
> 赞同：1
> 
> 时间：2013-04-23T01:42:59.250
> 
> 标签：java, android, refactoring

我从去年的 Google IO 分叉了 IOSchedule 应用程序。我想确保我可以获得一个 API 密钥，这意味着我需要对应用程序进行签名，并且它与内容提供者没有冲突，这意味着我需要重构。但是，每次我尝试使用 Android Tools > Refactor Package Name 时，都会遇到问题，即修改内容提供程序。

这是内容提供者的标签：

```
<provider
android:name="com.google.android.apps.iosched.provider.ScheduleProvider"
android:authorities="com.google.android.apps.iosched"
android:label="@string/app_name"
android:syncable="true"
android:writePermission="com.google.android.apps.iosched.permission.WRITE_SCHEDULE" /> 
```

我一直在尝试将其更改为以下内容：

```
<provider
android:name="com.google.android.apps.iosched.provider.ScheduleProvider"
android:authorities="org.mrkaiser.android.apps.iosched"
android:label="@string/app_name"
android:syncable="true"
android:writePermission="com.google.android.apps.iosched.permission.WRITE_SCHEDULE" /> 
```

但是在运行时我收到以下错误：

`04-22 21:29:13.818: E/AndroidRuntime(12329): java.lang.NullPointerException` `04-22 21:29:13.818: E/AndroidRuntime(12329): at com.google.android.apps.iosched.ui.MyScheduleFragment.onLoadFinished(MyScheduleFragment.java:175)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at com.google.android.apps.iosched.ui.MyScheduleFragment.onLoadFinished(MyScheduleFragment.java:1)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:424)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:392)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.Loader.deliverResult(Loader.java:103)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.CursorLoader.deliverResult(CursorLoader.java:81)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.CursorLoader.deliverResult(CursorLoader.java:35)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:221)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:61)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.ModernAsyncTask.finish(ModernAsyncTask.java:461)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.ModernAsyncTask.access$500(ModernAsyncTask.java:47)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.support.v4.content.ModernAsyncTask$InternalHandler.handleMessage(ModernAsyncTask.java:474)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.os.Handler.dispatchMessage(Handler.java:99)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.os.Looper.loop(Looper.java:137)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at android.app.ActivityThread.main(ActivityThread.java:5226)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at java.lang.reflect.Method.invokeNative(Native Method)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at java.lang.reflect.Method.invoke(Method.java:511)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)` `04-22 21:29:13.818: E/AndroidRuntime(12329): at dalvik.system.NativeStart.main(Native Method)`

我不确定我做错了什么。如果我尝试重构包 R 与一些 xml 文件不同步并且我无法恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T00:35:31.147

所以我真的想通了。项目中的 ScheduleContract 声明了内容权限。如果没有指向正确的包，它将无法找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:55:35.110

我认为您还必须重命名您的提供程序....如果您使用的是 eclipse，请尝试通过它重命名您的包。尝试像这样重命名它：

```
android:name="org.mrkaiser.android.apps.iosched.provider.ScheduleProvider"
android:authorities="org.mrkaiser.android.apps.iosched"
android:label="@string/app_name"
android:syncable="true"
android:writePermission="org.mrkaiser.android.apps.iosched.permission.WRITE_SCHEDULE" 
```

并通过eclipse重命名你的包名。它将更新所有引用。还要更改 androidmanifest.xml 中的包名

# python - 在 python 迭代器中保持相同的值

> ID：16159515
> 
> 赞同：1
> 
> 时间：2013-04-23T01:43:35.533
> 
> 标签：python, iterator

我正在创建一个`interator`这样的：

```
some_list = [1,2,5,12,30,75,180,440]
iter(some_list) 
```

我需要再次访问迭代器的当前值。有没有一种`current()`方法可以让我保持在同一个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:02:12.060

您当然*可以*创建一个允许您执行此操作的课程：

```
from collections import deque

class RepeatableIter(object):
    def __init__(self,iterable):
        self.iter = iter(iterable)
        self.deque = deque([])
    def __iter__(self):
        return self

    #define `next` and `__next__` for forward/backward compatability
    def next(self):
        if self.deque:
            return self.deque.popleft()
        else:
            return next(self.iter)
    __next__ = next

    def requeue(self,what):
        self.deque.append(what)

x = RepeatableIter([1, 2, 3, 4, 5, 6])
count = 0
for i in x:
    print i
    if i == 4 and count == 0:
        count += 1
        x.requeue(i) 
```

问题是你为什么要这么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:23:54.223

你可以用它`numpy.nditer`来构建你的迭代器，然后你有很多很棒的选项，包括当前的`value`.

```
import numpy

rng = range(100)
itr = numpy.nditer([rng])
print itr.next()          #0
print itr.next()          #1
print itr.next()          #2

print itr.value           #2 : current iterator value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-25T20:14:27.057

[从这个答案](https://stackoverflow.com/a/7542261/208880)改编第三个例子：

```
class CurrentIterator():

    _sentinal = object()
    _current = _sentinal

    @property
    def current(self):
        if self._current is self._sentinal:
            raise ValueError('No current value')
        return self._current

    def __init__(self, iterable):
        self.it = iter(iterable)

    def __iter__(self):
        return self

    def __next__(self):
        try:
            self._current = current = next(self.it)
        except StopIteration:
            self._current = self._sentinal
            raise
        return current
    next = __next__  # for python2.7 compatibility 
```

一些有趣的观点：

*   如果当前值不存在，使用`_sentinal`so 会引发错误
*   使用`property`so`current`看起来像一个简单的属性
*   Python 2&3 兼容性的使用`__next__`和`next = __next__`

# ios - UIActionSheet 的委托在用户输入之前释放

> ID：16159517
> 
> 赞同：0
> 
> 时间：2013-04-23T01:43:38.783
> 
> 标签：ios, objective-c, uiactionsheet

我认为最好按顺序写出正在发生的事情：

1)`object_1`创建`object_2`如下：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
      Object_2 *object_2 = [[Object_2 alloc] init];
      [object_2 show]
} 
```

2)`object_2`创建一个`UIActionSheet`, set 本身作为委托并显示它：

```
- (void) show{
     UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"title"
                                                         delegate:self
                                                cancelButtonTitle:@"cancel"
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:nil];
     [actionSheet showInView:[UIApplication sharedApplication].delegate.window.rootViewController.view];

} 
```

3) 用户与action sheet进行交互，向delegate发送消息，delegate已被释放（by ARC）。所以应用程序崩溃了。

如何“保留”它，以便在调用委托方法时它存在，并在用户完成操作表（和委托方法）时“释放”它？

**编辑**

因为我对内存管理很神经质...

经过一些研究，我最终在object2中这样做了：

（如果你不记得，guenis 的答案是完全正确的）

```
@property (strong) MoreOptionsListController *selfPointerWhileUserInteractsWithTheMenu; 
```

然后

```
- (void) show {
    _selfPointerWhileUserInteractsWithTheMenu = self;
    ...
}   

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
    _selfPointerWhileUserInteractsWithTheMenu = nil;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:04:37.470

这应该有效：

```
//Object1.h 
//Add a property in header
@property (nonatomic, strong) Object2 *actionSheetDelegate;

//Object1.m
//Use the property instead to retain the object
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
      self.actionSheetDelegate = [[Object_2 alloc] init];
      [self.actionSheetDelegate show]
} 
```

编辑：

还有一种替代方法，我在 uialertviews 中使用了很多。它是用块来处理委托方法。从某种意义上说，操作表非常接近警报视图，因此您可以使用本教程中的类似内容：

[http://www.cocoanetics.com/2012/06/block-based-action-sheet/](http://www.cocoanetics.com/2012/06/block-based-action-sheet/)

# php - 如何使用 Highcharts 获取图形中更新点的索引以及如何重新加载数据直到该索引

> ID：16159520
> 
> 赞同：0
> 
> 时间：2013-04-23T01:43:59.007
> 
> 标签：php, javascript, highcharts

您好，我正在从 csv 文件中获取数据，并且我在图表上使用“this.update(0)”通过鼠标单击更新任何点，因此使该点在 y 轴上等于 0，但我想要的是当我单击一个点，它首先获取该点的索引，然后再次从同一个 csv 文件重新加载数据，但这次数据值不应超出索引。例如，如果我单击 x=10 处的某个点，那么我应该能够再次从文件重新加载数据，直到 x=9 并将新加载的数据存储到数组中。

这是我的代码必须重新加载数据的部分。它会重新加载不需要的整个数据，这可能是我没有得到正确的索引，或者如果有其他问题，请帮忙。谢谢你。

```
plotOptions: {
series: {
cursor: 'pointer',
point: {
events: {
click: function() {
var x= this.update(0);
$.get('testFile.csv', function(data) {
var lines = data.split('\n');
$.each(lines, function(lineNo, line) {
var items = line.split(',');
var series = {
data: []
};
$.each(items, function(itemNo, item) {
if(itemNo<x){
series.data.push(parseFloat(item)); }   });
options.series.push(series);
});
var chart = new Highcharts.Chart(options);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:16:27.767

要获取索引使用：`this.series.processedXData.indexOf(this.x)`

现在，删除创建新图表，而是使用值更新每个点，如下所示：

```
var actSeries = this.series; //needed for scope range

...
... 
...

$.each(items, function(itemNo, item) {
    if(itemNo<x){
        actSeries.data[itemNo].update(parseFloat(item), false);
    });
});
actSeries.chart.redraw(); 
```

# linux - Python 更新 Linux（树莓派）

> ID：16159522
> 
> 赞同：1
> 
> 时间：2013-04-23T01:44:22.247
> 
> 标签：linux, python-3.x, debian, raspberry-pi

我正在尝试使用 Raspian Wheezy Distro 在我的 Raspberry Pi 上将我的 Python 3.2.4 升级到较新的 3.3.1，但由于某种原因这不起作用。我只需要它来使用引入的新 ipaddress 模块，但是，这给了我一些问题。我没有收到任何错误，只是整个过程似乎不适用于 Pi。

我努力了 ：

```
apt-get install python3
apt-get update python-3.2.4 
```

没有什么能给我带来任何运气，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:16:36.237

试试`apt-get install package=version`。

# c# - C# VS2010程序编译+Linux MONO运行

> ID：16159528
> 
> 赞同：0
> 
> 时间：2013-04-23T01:44:52.723
> 
> 标签：c#, mono

我有我写的 ac# 程序。我想在 CentOS 6 上的 Mono 上运行它。我需要采取哪些步骤来编译它？我使用 xbuild 阅读了一些我无法开始工作的步骤，一些使用 gmcs 的步骤等。现在没有任何工作。

一个简单而中肯的指南会很好。我通过 Mono Analyzer 运行它，它没有给 Mono 任何错误，所以应该很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:39:32.107

要在单声道下运行 .net 程序，您只需将包含所有依赖 dll 的 .exe 文件复制到单声道机器并使用以下命令运行应用程序：

```
mono myprogram.exe 
```

如果这不起作用，则您的代码中的某些内容不适用于 mono/Linux。

正如您在评论中提到的，您遇到了一些 IO 错误，这可能是因为您尝试连接到 COM1 或类似的东西。COM 在 Linux 中不存在，因为我确信其他东西也不存在（我是 Linux 的初学者 ^^）。

也许您应该尝试在代码的某些点使用 Console.WriteLine()。这是不用调试器“调试”的好方法^^

*我也会对其他答案发表评论，不幸的是我不能评论，因为我不允许以 <= 50 的声誉发表评论，所以请不要对我的答案投反对票，我只是想帮忙:)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:50:05.720

好吧，只要它没有 GUI（这意味着它只是一个控制台应用程序），或者该 GUI 是一个简单的 Windows 窗体或 GTK#，你根本不需要专门编译它。Mono 将在控制台上运行一个常规的 C# 程序就好了。Windows 窗体有一些奇怪之处，它从未完全完成，但通常你应该能够使用 VS 2010 进行编译，将 dll 和可执行文件复制到你想要运行它的系统，然后运行“mono myprogram.exe” . 我们以这种方式运行几个较旧的程序。

# javascript - 使用 javascript 在搜索词（片段）周围查找单词

> ID：16159532
> 
> 赞同：4
> 
> 时间：2013-04-23T01:45:26.727
> 
> 标签：javascript, regex

我正在使用[jlinq](https://github.com/hugoware/jlinq-beta)从一些 json 返回搜索结果，我想向用户显示包含搜索词的结果文本片段，在搜索词之前说三个词，在搜索词之后说三个词。

```
var searchTerm = 'rain'
var text = "I'm singing in the rain, just singing in the rain"; 
```

结果会是“在雨中唱歌，只是在唱歌”

我怎么能在javascript中做到这一点？我已经看到了一些[使用 php 的建议](https://stackoverflow.com/questions/7743217/php-regex-for-a-word-collection-around-a-search-phrase)，但没有专门针对 javascript 的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T03:42:15.533

这是一个稍微好一点的近似值：

```
function getMatch(string, term)
{
    index = string.indexOf(term)
    if(index >= 0)
    {
        var _ws = [" ","\t"]

        var whitespace = 0
        var rightLimit = 0
        var leftLimit = 0

        // right trim index
        for(rightLimit = index + term.length; whitespace < 4; rightLimit++)
        {
            if(rightLimit >= string.length){break}
            if(_ws.indexOf(string.charAt(rightLimit)) >= 0){whitespace += 1}
        }

        whitespace = 0
        // left trim index
        for(leftLimit = index; whitespace < 4; leftLimit--)
        {
            if(leftLimit < 0){break}
            if(_ws.indexOf(string.charAt(leftLimit)) >= 0){whitespace += 1}
        }
        return string.substr(leftLimit + 1, rightLimit) // return match
    }
    return // return nothing
} 
```

这有点“贪婪”，呵呵，但它应该可以解决问题。注意 _ws 数组。您可以包含您喜欢的所有空格或修改以使用正则表达式来检查空格。

这已被稍微修改以处理短语。它只找到该术语的第一次出现。处理多个事件需要稍微不同的策略。

在我看来，您想要的也可能（在不同程度上）通过以下方式：

```
function snippet(stringToSearch, phrase)
{
    var regExp = eval("/(\\S+\\s){0,3}\\S*" + phrase + "\\S*(\\s\\S+){0,3}/g")
    // returns an array containing all matches
    return stringToSearch.match(regExp)
} 
```

唯一可能的问题是，当它抓取您的模式的第一次出现时，它会切掉匹配的部分，然后再次搜索。您还需要注意“短语”变量中没有任何正则表达式字符（或将其转换为十六进制或八进制表示）

无论如何，我希望这对人有所帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:21:01.523

首先，我们需要在字符串中找到第一次出现的术语。相反，我们处理的是一个单词数组，所以我们最好在这样的数组中找到第一次出现的词。我决定将此方法附加到 Array 的原型中。我们可以使用`indexOf`，但是如果我们用 " " 分割一个字符串，我们将处理像 "rain" 这样的词，并且`indexOf`不会匹配它。

```
Array.prototype.firstOccurance = function(term) { 
    for (i in this) { 
        if (this[i].indexOf(term) != -1 ) {  // still can use idnexOf on a string, right? :)
            return parseInt(i,10);  // we need an integer, not a string as i is
        }
    }
} 
```

然后，我按单词拆分字符串，为此，将其拆分为“”：

```
function getExcerpt(text, searchTerm, precision) {
    var words = text.split(" "),
        index = words.firstOccurance(searchTerm),
        result = [], // resulting array that we will join back
        startIndex, stopIndex;
    // now we need first <precision> words before and after searchTerm
    // we can use slice for this matter
    // but we need to know what is our startIndex and stopIndex
    // since simple substitution from index could lead us to 
    // a negative value
    // and adding to an index could get us to exceeding words array length

    startIndex = index - precision;
    if (startIndex < 0) {
        startIndex = 0;
    }

    stopIndex = index + precision + 1;
    if (stopIndex > words.length) {
        stopIndex = words.length;
    }

    result = result.concat( words.slice(startIndex, index) );
    result = result.concat( words.slice(index, stopIndex) );
    return result.join(' '); // join back
} 
```

结果：

```
> getExcerpt("I'm singing in the rain, just singing in the rain", 'rain', 3)
'singing in the rain, just singing in'

> getExcerpt("I'm singing in the rain, just singing in the rain", 'rain', 2)
'in the rain, just singing'

> getExcerpt("I'm singing in the rain, just singing in the rain", 'rain', 10)
'I\'m singing in the rain, just singing in the rain' 
```

# javascript - 流星集合光标 forEach 不起作用

> ID：16159533
> 
> 赞同：8
> 
> 时间：2013-04-23T01:45:49.307
> 
> 标签：javascript, meteor, foreach, collections

为什么 Meteor 集合游标 foreach 循环在下面的代码中不起作用。如果我将循环包装在 Template.messages.rendered 或 Deps.autorun 函数中，它就可以工作。我不明白为什么。

```
Messages = new Meteor.Collection("messages");

processed_data = [];

if(Meteor.isClient) {

    data = Messages.find({}, { sort: { time: 1 }});
    data.forEach(function(row) {
        console.log(row.name)
        processed_data.push(row.name);
    });
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T03:55:44.080

当您的代码正在运行时，消息集合尚未准备好。

尝试这样的事情：

```
Messages = new Meteor.Collection("messages");

if(Meteor.isClient) {
    processed_data = []; 

    Deps.autorun(function (c) {
        console.log('run');
        var cursor = Messages.find({}, { sort: { time: 1 }});
        if (!cursor.count()) return;

        cursor.forEach(function (row) {
            console.log(row.name);
            processed_data.push(row.name);
        }); 

        c.stop();
    }); 
} 
```

**其他解决方案：**

只是玩订阅！您可以将[onReady](http://docs.meteor.com/#meteor_subscribe)回调传递给订阅 [http://docs.meteor.com/#meteor_subscribe](http://docs.meteor.com/#meteor_subscribe)

# php - 错误 500，不确定是什么原因造成的

> ID：16159538
> 
> 赞同：0
> 
> 时间：2013-04-23T01:46:15.793
> 
> 标签：php, forms

我正在通过 php 为家庭作业创建一个简单的 MySQL 界面。用户输入他们的姓名、密码和 sql 查询，然后它会返回一个响应。当我让用户每次输入名称和密码时，一切正常，但我正在努力做到这一点，所以如果用户已经登录，它会显示他们的用户名和注销按钮，而不是让他们选择登录。当我使用基本的 html 表单并让用户每次输入名称和密码时，都没有问题。当我尝试使用表单的 php 版本时，我收到 500 错误并且页面不会加载。我哪里错了？

表单的 HTML 版本：

```
 <form action="?" method="post">
            <input type="text" name="user" placeholder="username" autofocus="auotfocus" <?php if(isset($_POST['user'])) echo 'value="'.$_POST['user'].'" '; ?> />
            <input type="password" name="pass" placeholder="password" <?php if(isset($_POST['pass'])) echo 'value="'.$_POST['pass'].'" '; ?>/>
            <input type="submit" value="Submit Query" />
            <br />
            <textarea name="sql" rows="10" cols="50" wrap="soft" placeholder="enter an SQL command..."><?php if(isset($_POST['sql'])) echo $_POST['sql']; ?></textarea>
        </form> 
```

PHP 版本的表格（?php 括号省略：

```
 if(isset($_SESSION["user"])) {
            echo '<form action="?" method="post"'>;
            echo '<h1>Welcome back'.$_SESSION["user"];
            echo '</h1><button type="submit" value="Logout">< br/>';
            echo '<input type="submit" value="Submit Query" /> <br />';
            echo '<textarea name="sql" rows="10" cols="50" wrap="soft" placeholder="enter an SQL command...">'. if(isset($_POST['sql'])) echo $_POST['sql'].'</textarea>';
            echo '</form>';
        }

        else {
            echo '<form action="?" method="post"'>;
            echo '<input type="text" name="user" placeholder="username" />';
            echo '<input type="password" name="pass" placeholder="password"/>';
            echo '<input type="submit" value="Submit Query" />'.' <br />';
            echo '<textarea name="sql" rows="10" cols="50" wrap="soft" placeholder="enter an SQL command...">'. if(isset($_POST['sql'])) echo $_POST['sql'].'</textarea>';
            echo '</form>';
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:53:26.950

你的`echo`陈述也有错误。

```
echo '<form action="?" method="post"'>; 
```

# arguments - Smalltalk：使用块作为块参数？

> ID：16159546
> 
> 赞同：3
> 
> 时间：2013-04-23T01:46:48.880
> 
> 标签：arguments, block, smalltalk, function-composition

是否可以将块语句作为给定深度 k 的块参数传递？例如，如果 k = 1，我将 f(x) 定义为`[x + 3]`，但如果 k=2，我想要 f(f(x))，即`[[x + 3] + 3]`。这是一个分配，所以我需要使用块语句。`#value:`似乎只取整数，是否有更通用的版本`#value:`？

编辑：让我更清楚一点。我的函数采用从 a 到 b 的范围和深度 k。该函数将对块语句进行评估。因此，for将从 1`[x + 3] method: 1 to: 3 for: 2`评估`[[x+3] + 3]`到 3。只要 k = 1，我就可以从 1 评估到 3。我正在尝试将块语句修改`[x+3]`为`[[x+3]+3]`，这就是我遇到麻烦的地方。我试过了

```
tempvariable := self "where self is the block statement [x+3]"
tempvariable := tempvariable value: self 
```

但我得到一个 `BlockClosure(Object)>>doesNotUnderstand: #adaptToNumber:andSend:`错误（这就是为什么我认为它只是整数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T06:48:41.477

`#method:to:for:`如果我正确理解了您的问题，您需要一种基于初始块创建和评估块的方法（您将其命名为）。

如在

```
[:x | x + 3] method: 1 to: 3 for: 1\. 
```

变成

```
1 to: 3 do: [:index| [:x | x + 3] value: index]. 
```

并评估`[:x | x + 3]`三遍；和

```
[:x | x + 3] method: 1 to: 3 for: 2\. 
```

变成

```
1 to: 3 do: [:index| [:y | ([:x | x + 3] value: y) + 3] value: index]. 
```

**无法**通过修改现有块来实现此目的。但是，我们可以尝试以另一种方式解决该问题。

让我们以不同的方式编写函数和块：

```
功能块                    
f(x) = x + 3 f := [:x | x + 3]。
     ↪ f(1) = 4 ↪ f 值：1 "=> 4"

f₁(x) = f(x) f1 := [:x | f值：x]。
     ↪ f₁(1) = f(1) = 4 ↪ f1 值：1 "=> 4"

f2(x) = f(f(x)) = f₁(f(x)) f2 := [:x | f1 值：（f 值：x）]。
     ↪ f₂(1) = f₁(4) = 7 ↪ f2 值：1 "=> 7"

f₃(x) = f(f(f(x))) = f2(f(x)) f3 := [:x | f2值：（f值：x）]。
     ↪ f₃(1) = f₂(4) = f₁(7) = 10 ↪ f3 值：1 "=> 10"

```

对于深度 k，只需在原始块的结果上调用 k-1 的块。

* * *

## 解决方案

所以，一个解决方案可能看起来像

```
BlockClosure>>depth: k
    | closure |
    closure := self.
    k timesRepeat: [ | newClosure |
        newClosure := closure.
        closure := [:x | newClosure value: (self value: x)]].
    ^ closure 
```

你可以像这样调用它：

```
([:x | x + 3] depth: 0) value: 1\. "=> 4"
([:x | x + 3] depth: 1) value: 1\. "=> 7"
([:x | x + 3] depth: 2) value: 1\. "=> 10" 
```

适应您的需求。

# java - 在 JTable 中计算值

> ID：16159547
> 
> 赞同：0
> 
> 时间：2013-04-23T01:46:51.177
> 
> 标签：java, mysql, swing, jtable, defaulttablemodel

现在我有一个 JTable，每当按下按钮时，它都会显示我创建的 MySql 数据库中的项目名称和项目价格。我遇到的麻烦是为桌子上出现的物品的价格保持一个运行总计。

```
enter code here  private void waterbuttonActionPerformed(java.awt.event.ActionEvent evt) {                                            
    // TODO add your handling code here:
    try{
     st = connection.createStatement();   
    String query;
    query = "SELECT itemName, itemPrice FROM item WHERE itemID = '11111'";
    String itemName = " ",itemPrice =" ";  

      ResultSet rs = st.executeQuery(query);

       if(rs != null){
        while(rs.next())
        { 
         itemName = rs.getString(1);
         itemPrice = rs.getString(2);
        }
      model.addRow(new Object[]{itemName, itemPrice});

       }
       String holder = model.getValueAt(WIDTH, 1).toString(); 
       total += Double.parseDouble(holder);
       System.out.println(total);
         } catch (SQLException | NumberFormatException | ArrayIndexOutOfBoundsException ex) {} 
```

变量“total”是一个全局双精度变量，变量“model”是一个 DefualtTableModel。我是否在获得这个运行总数的正确轨道上或者我应该尝试一种完全不同的方法？请帮助我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T18:51:04.743

使用循环计算`total`

```
 int row;
   for(row= 0; row<=model.getRowCount(); row++){
   String holder = model.getValueAt(row, 1).toString(); // I do not know why you are writing WIDTH here. 

   total += Double.parseDouble(holder);
   System.out.println(total);
   } 
```

# java - 让 JFlex 和 Cup 协同工作

> ID：16159548
> 
> 赞同：2
> 
> 时间：2013-04-23T01:46:55.387
> 
> 标签：java, compilation, jflex

我正在尝试使用 JFlex 和 Cup 实现解析器。现在我只是想让他们编译下面链接中的简单示例程序。

> [http://www.cs.rit.edu/~pal6640/cup-example/simple-expr.html](http://www.cs.rit.edu/~pal6640/cup-example/simple-expr.html)

要从我运行的脚本创建`parser.java`and`sym.java`文件：`cup`

```
java –jar java-cup-11a.jar parser.cup 
```

接下来，我使用`JFlex.jar`创建 lexer java 文件：

```
java –jar JFlex.jar lexer.lex 
```

然后编译：

```
javac –classpath java-cup-11a.jar Yylex.java sym.java parser.java 
```

编译命令抛出**12 个错误**。他们都说

> 找不到符号变量扫描仪

我认为我的所有环境变量都设置正确。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:48:40.143

Java CUP 分发两个 jar 文件：[可执行的独立 Jar-package](http://www2.cs.tum.edu/projects/cup/java-cup-11a.jar)和[CUP runtime-library 以与 CUP 生成的解析器一起使用](http://www2.cs.tum.edu/projects/cup/java-cup-11a-runtime.jar)。CUP 生成的解析器需要第二个。因此，您的第三个命令应该类似于

```
javac –classpath java-cup-11a-runtime.jar Yylex.java sym.java parser.java 
```

# javascript - 获取参数的函数截断值

> ID：16159553
> 
> 赞同：0
> 
> 时间：2013-04-23T01:47:28.590
> 
> 标签：javascript, jquery

我正在使用此函数在 Javscript 中获取我的参数，但在某些情况下，它会切断我的`charge_id`参数。

```
 $.urlParam = function(name) {
    var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
        if (results) {  return results[1] || 0;  }
 };  

 if ($.urlParam('success')) {
    // Get Charge ID from param
    var chargeId = $.urlParam('charge_id') 
 }; 
```

在这种情况下，`charge_id`参数被上述表达式缩短：

```
lvh.me:3001/?charge_id=ch_1hK2X4XiaCv3r8&success=true 
```

这是返回的内容：

```
ch_1hK2X4Xi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:57:28.200

```
$.urlParam = function(name) {
    var results = new RegExp(name + '=([^&#]+)').exec(window.location.href);
    if (results) {
        return results[1] || 0;
    }
}; 
```

应该做的伎俩。正如 Barmar 在评论中指出的那样，不要在正则表达式中使用 HTML 字符引用。

# ruby-on-rails - 在 Ember Data 修订版 12 中删除记录的正确方法是什么？

> ID：16159557
> 
> 赞同：2
> 
> 时间：2013-04-23T01:48:19.937
> 
> 标签：ruby-on-rails, ruby, json, ember-data

我正在使用 Ember Data 的第 12 版。

我有一个简单的方法，`ArrayController`它试图删除一条记录，并从模板中的操作中调用：

```
deleteFact: function(fact) {
  self=this;
  window.App.confirm(Em.I18n.t('Delete fact?'), {
    yes: function() {
      fact.deleteRecord();
      fact.store.commit();
    }
  });
} 
```

这始终适用于删除的第一条记录，并且列表显示记录消失。我正在使用 Rails，服务器处理`DELETE`并返回一个 JSON 空对象和`status 200`. 如果我在第一次删除后的任何时间删除另一条记录，我总是会立即抛出一个内部异常：

`Uncaught Error: Attempted to handle event`删除记录`on <App.Fact:ember402:31> while in state rootState.deleted.saved. Called with undefined`

什么是删除记录的正确方法。我搜索了谷歌并找不到任何答案，而余烬数据的源代码和测试看起来就像这就是所有必须要做的事情。

模板：

```
{{#each fact in content}}
  <tr>
      <td>{{fact.title}}</td>
      <td>{{fact.body}}</td>
      <td>{{#linkTo 'facts.show' fact}}View{{/linkTo}} | <a {{ action 'deleteFact' fact}} class="button small deny delete-button">Delete</a>[{{fact.id}}]({{fact.stateManager.currentState.path}})</td>
  </tr>
  {{else}}
  <tr>
    <td colspan='4'>No facts registered at present.</td>
  </tr>
{{/each}} 
```

模板输出：

```
Title   Facts           Actions
asdfsd  asdfsadf    View | Delete[46](rootState.loaded.saved)
asdfsd  asdfsadf    View | Delete[47](rootState.loaded.saved)
asdfsd  asdfsadf    View | Delete[48](rootState.loaded.saved) 
```

控制台中的输出：

单击带有 Fact Id 46 的记录删除记录到通过 id 46 的 yes 函数的控制台。记录从模板显示的列表中消失，留下 id 为 47 和 48 的两条记录。单击记录 47 的删除会在日志中显示记录 id 46 再次通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:13:54.613

这应该工作得很好。

我的猜测是你一直在删除相同的记录。`deleteFact`好象叫同`fact`。

更新（尝试修复模板）

```
{{#each fact in controller}}
  <tr>
      <td>{{title}}</td>
      <td>{{body}}</td>
      <td>{{#linkTo 'facts.show'}}View{{/linkTo}} | <a {{ action 'deleteFact'}} class="button small deny delete-button">Delete</a></td>
  </tr>
  {{else}}
  <tr>
    <td colspan='4'>No facts registered at present.</td>
  </tr>
{{/each}} 
```

你的事实控制器：

```
FactsController = Ember.ArrayController.extend({
  itemController: 'fact'
}); 
```

你的事实控制器：

```
FactController = Ember.ObjectController.extend({
  deleteFact: function() {
    self.get('content').deleteRecord();        
    self.get('content.transaction').commit();
  }
}); 
```

# html - Jade 多行对象/数组

> ID：16159561
> 
> 赞同：5
> 
> 时间：2013-04-23T01:48:49.083
> 
> 标签：html, pug

我需要知道如何在翡翠中分割成线条对象/数组。

这工作正常：

```
object = [{foo: bar, bar:foo},{foo: bar, bar:foo},{foo: bar, bar:foo}] 
```

这不会：

```
object = [
   {foo: bar, bar:foo},
   {foo: bar, bar:foo},
   {foo: bar, bar:foo}
] 
```

这也不是：

```
- object = [
-       {foo: bar, bar:foo},
-       {foo: bar, bar:foo},
-       {foo: bar, bar:foo}
- ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T20:06:17.527

[哈巴狗网站](https://pugjs.org/language/code.html#unbuffered-code)上的文档说这应该有效*（跟踪空白）*：

```
-
  var object = [
    {foo: bar, bar:foo},
    {foo: bar, bar:foo},
    {foo: bar, bar:foo}
  ] 
```

# javascript - 更新和/或修复 AppFog 数据库的架构

> ID：16159566
> 
> 赞同：1
> 
> 时间：2013-04-23T01:50:13.680
> 
> 标签：javascript, node.js, express, appfog

我使用 ExpressJS 在 NodeJS 中创建了一个应用程序，我在 AppFog 上托管了我的应用程序并且它可以工作，但是，我对我的本地版本进行了一些更新，现在我想在 AppFog 上更新我的应用程序但我遇到了一个问题，因为我在本地更新了我的模型，现在，我无法更新我的 AppFog 数据库......

我该怎么办？删除应用程序并再次更新？我将丢失数据库中的所有数据...

日志：

```
Error: ER_BAD_FIELD_ERROR: Unknown column 'tags' in 'field list' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:09:32.573

首先导出数据库以保留备份，以防万一这没有按预期进行。

1.  `af apps`获取应用程序的数据库服务名称
2.  `af export-service [service-name]`获取备份的下载 url

接下来将服务隧道传输到您的本地盒子。请注意，这可能有点挑剔，因此如果需要，请尝试几次。

1.  `af tunnel [service-name]`
2.  选择您需要的连接选项。选项“无”将输出可与您最喜欢的数据库工具一起使用的凭据。**设置一个到localhost**端口**10000**的数据库连接，并使用提供的数据库名称、用户名和密码。选项“mysql”将使用 mysql cli 自动连接到数据库。关闭终端窗口或退出 af tunnel 命令将删除本地隧道，因此在进行更改时保持其运行。[更多关于 af 隧道的信息](https://docs.appfog.com/services/mysql)。

> ```
> 1: none <- this will let you connect using sequel pro
> 2: mysql <- to make manual tweeks
> 3: mysqldump 
> ```

最后根据需要修复数据库结构以使您的应用程序正常工作，然后更新应用程序。

* * *

此外，将来您可能会使用像[Sequelize](http://www.sequelizejs.com/documentation#migrations)这样的 ORM ，它具有非破坏性的数据库迁移，可以在应用程序启动后运行`af update`

**在您的启动文件的早期位置：**

```
// Sudo code. see af online docs on how to get the bound service creds
if (process.env.NODE_ENV == "production") {
  var sequelize = new Sequelize(appfog.dbname, appfog.username, appfog.password, ...)

  var migratorOptions = { path: process.cwd() + '/migrations' };
  var migrator        = sequelize.getMigrator(migratorOptions);
  migrator.migrate();
} 
```

# javascript - 用 getElementsById 替换 getElementsByName 不起作用

> ID：16159569
> 
> 赞同：5
> 
> 时间：2013-04-23T01:51:34.240
> 
> 标签：javascript, html

我有这个有效的代码：

```
<script type="text/javascript" language="javascript">
function doStuff1(){
    var eml=document.getElementsByName('email')[0].value;
        msg=document.getElementsByName('message')[0];
    msg.value = eml + ' ' + msg.value;
    alert ('Message has been submitted');
    return true;  //return false to test just messagebox and updated message textarea
}
</script> 
```

但是，当我使用`getElementById`而不是`getElementsByName`then 它停止工作。那就是该方法不会显示警报对话框。

当然，我`id`在同一个标​​签上添加了一个属性`name`，比如`id="email" name="email"`

当单击表单中的提交按钮时调用此方法。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:53:04.177

`getElementById`不返回元素集合，而只返回单个元素。 `document.getElementById('email')[0].value`是语义错误。

删除`[0]`s。

# php - Symfony 2.2 登录后总是将我发送到登录页面

> ID：16159571
> 
> 赞同：2
> 
> 时间：2013-04-23T01:51:48.197
> 
> 标签：php, session, symfony, login

我在 Symfony 2.2.1 上有一个简单的登录系统，问题是何时进入安全区域是的，显示登录表单并输入用户并通过，但总是将我发送到`/login`页面，有时将我发送到`/`. 查看日志我得到以下信息

```
[2013-04-22 20:25:01] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2013-04-22 20:25:01] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2013-04-22 20:25:02] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\FragmentListener::onKernelRequest". [] []
[2013-04-22 20:25:02] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". [] []
[2013-04-22 20:25:02] request.INFO: Matched route "login_check" (parameters: "_route": "login_check") [] []
[2013-04-22 20:25:02] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". [] []
[2013-04-22 20:25:02] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2013-04-22 20:25:02] doctrine.DEBUG: SELECT t0.id AS id1, t0.nombre AS nombre2, t0.contrasena AS contrasena3, t0.salt AS salt4 FROM usuario t0 WHERE t0.nombre = ? LIMIT 1 ["rkmax"] []
[2013-04-22 20:25:02] doctrine.DEBUG: SELECT t0.id AS id1, t0.nombre AS nombre2 FROM rol t0 INNER JOIN usuario_rol ON t0.id = usuario_rol.rol_id WHERE usuario_rol.usuario_id = ? [8] []
[2013-04-22 20:25:02] security.INFO: User "" has been authenticated successfully [] []
...
[2013-04-22 20:25:02] security.WARNING: Username "" could not be found. [] [] 
```

如您所见，在 SecurityContext 中写入时用户为空，但我不知道原因。

## 课程和设置

```
class SecurityController extends Controller
{
    public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();

        if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
            $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
        } else {
            $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
            $session->remove(SecurityContext::AUTHENTICATION_ERROR);
        }

        return $this->render('MySecurityBundle:Security:login.html.twig', array(
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error' => $error,
        ));
    }
} 
```

两个实体`Usuario`（用户）和`Rol`（角色）都实现了与 symfony 安全对话的接口

```
class Rol implements RoleInterface

//Repository/Usuario
class Usuario extends EntityRepository implements UserProviderInterface
{
    public function loadUserByUsername($login)
    {
        $usuario = $this->findOneBy(array('nombre' => $login));

        if (!$usuario) {
            throw new UsernameNotFoundException(
                sprintf("El usuario '%s' no existe o el nombre esta mal escrito", $login)
            );
        }

        return $usuario;
    }

    public function refreshUser(UserInterface $usuario)
    {
        return $this->loadUserByUsername($usuario);
    }

    public function supportsClass($class)
    {
        return $class === 'Iscltda\SecurityBundle\Entity\Usuario';
    }
}

class Usuario implements UserInterface, \Serializable
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="nombre", type="string", length=200, nullable=false)
     */
    private $nombre;

    /**
     * @var string
     *
     * @ORM\Column(name="contrasena", type="string", length=64, nullable=false)
     */
    private $contrasena;

    /**
     * @var string
     *
     * @ORM\Column(name="salt", type="string", length=64, nullable=false)
     */
    private $salt;

    /**
     * @var \Doctrine\Common\Collections\Collection
     *
     * @ORM\ManyToMany(targetEntity="Rol", inversedBy="usuario")
     * @ORM\JoinTable(name="usuario_rol",
     *   joinColumns={
     *     @ORM\JoinColumn(name="usuario_id", referencedColumnName="id")
     *   },
     *   inverseJoinColumns={
     *     @ORM\JoinColumn(name="rol_id", referencedColumnName="id")
     *   }
     * )
     */
    private $rol;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->rol = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function __toString()
    {
        return $this->getNombre();
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set nombre
     *
     * @param string $nombre
     * @return Usuario
     */
    public function setNombre($nombre)
    {
        $this->nombre = $nombre;

        return $this;
    }

    /**
     * Get nombre
     *
     * @return string
     */
    public function getNombre()
    {
        return $this->nombre;
    }

    /**
     * Set contrasena
     *
     * @param string $contrasena
     * @return Usuario
     */
    public function setContrasena($contrasena)
    {
        $this->contrasena = $contrasena;

        return $this;
    }

    /**
     * Get contrasena
     *
     * @return string
     */
    public function getContrasena()
    {
        return $this->contrasena;
    }

    /**
     * Set salt
     *
     * @param string $salt
     * @return Usuario
     */
    public function setSalt($salt)
    {
        $this->salt = $salt;

        return $this;
    }

    /**
     * Get salt
     *
     * @return string
     */
    public function getSalt()
    {
        return $this->salt;
    }

    /**
     * Add rol
     *
     * @param \Iscltda\SecurityBundle\Entity\Rol $rol
     * @return Usuario
     */
    public function addRol(\Iscltda\SecurityBundle\Entity\Rol $rol)
    {
        $this->rol[] = $rol;

        return $this;
    }

    /**
     * Remove rol
     *
     * @param \Iscltda\SecurityBundle\Entity\Rol $rol
     */
    public function removeRol(\Iscltda\SecurityBundle\Entity\Rol $rol)
    {
        $this->rol->removeElement($rol);
    }

    /**
     * Get rol
     *
     * @return \Doctrine\Common\Collections\Collection
     */
    public function getRol()
    {
        return $this->rol;
    }

    public function getRoles()
    {
        return $this->rol->toArray();
    }

    public function getPassword()
    {
        return $this->getContrasena();
    }

    public function getUsername()
    {
        $this->getNombre();
    }

    public function eraseCredentials()
    {

    }

    /**
     * Serializes the content of the current User object
     * @return string
     */
    public function serialize()
    {
        return \serialize(array(
            $this->id,
            $this->nombre,
            $this->salt,
            $this->contrasena
        ));
    }

    /**
     * Unserializes the given string in the current User object
     * @param serialized
     */
    public function unserialize($serialized)
    {
        list(
            $this->id,
            $this->nombre,
            $this->salt,
            $this->contrasena
        ) = \unserialize($serialized);
    }
} 
```

`routing.yml`设置_

```
login:
    pattern: /admin/login
    defaults: { _controller: MySecurityBundle:Security:login }

login_check:
    pattern: /admin/login_check

logout:
    pattern: /admin/logout 
```

这是我的`security.yml`设置

```
security:
    encoders:
        MyVendor\MySecurityBundle\Entity\Usuario:
            algorithm: sha256
            encode-as-base64: true
            iterations: 10

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        user_db:
            entity: { class: MyVendor\MySecurityBundle\Entity\Usuario, property: nombre }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/admin/login$
            security: false
            anonymous: ~

        secured_area:
            provider: user_db
            security: true
            pattern:    ^/admin
            form_login:
                login_path: /admin/login
                check_path: /admin/login_check
            logout:
                path:   /logout
                target: / 
```

## 更新

我发现问题是我`getUsername`更改为的方法中没有返回任何内容

```
public function getUsername()
{
    return $this->getNombre();
} 
```

但仍然将我发送到登录页面

## 更新 2

我在 UserProvider 类中发现了最后一个问题，该方法`refreshUser`是错误的，我已更改为

```
public function refreshUser(UserInterface $usuario)
{
    return $this->loadUserByUsername($usuario->getUsername());
} 
```

这可以正常工作

# pthreads - MPI/Pthread 程序无法扩展

> ID：16159575
> 
> 赞同：0
> 
> 时间：2013-04-23T01:52:21.377
> 
> 标签：pthreads, mpi, openmpi

我有一个 MPI/Pthread 程序，其中每个 MPI 进程都将在单独的计算节点上运行。在每个 MPI 进程中，都会启动一定数量的 Pthreads (1-8)。然而，无论在一个 MPI 进程中启动多少个 Pthread，整体性能几乎是相同的。我怀疑所有的 Pthread 都在同一个 CPU 内核上运行。如何将线程分配给不同的 CPU 内核？

每个计算节点有 8 个核心。（两个四核 Nehalem 处理器） Open MPI 1.4 Linux x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:10:43.180

像这样的问题通常取决于手头的问题。最有可能的是，您遇到了资源锁定问题（线程正在竞争锁定）——这看起来只有一个内核在做任何工作，因为在任何给定时间只有一个线程可以（有效地）做任何工作.

为某个线程设置 CPU 亲和性并不是一个好的解决方案。您应该允许 OS 调度程序以最佳方式确定给定 pthread 的物理核心分配。

查看您的代码并尝试找出您在不应该锁定的位置，或者您是否针对手头的问题提出了正确的并行解决方案。您还应该只使用 pthreads（而不是 MPI）测试程序的一个版本，看看是否实现了缩放。

# firebase - 我确信 ref.auth 被窃听了

> ID：16159576
> 
> 赞同：0
> 
> 时间：2013-04-23T01:52:25.820
> 
> 标签：firebase, firebase-security

几个星期前我试过了，但它不起作用，我刚才又试了一次，它仍然不起作用。我只在身份验证完成后分配事件处理程序。在我的代码中，延迟机制是使用 $scope.$watch 执行的。

安全规则：

```
{
"rules": {
"chats": {
  "$org": {
    ".read": "auth != null",
    ".write": "auth.org == $org"
  }
}
}
} 
```

服务：

```
"$$fbase": ['$timeout', function($timeout) {
  return {
    ...
    ref: function(path) { var self = this;
      var ref = new Firebase(self.url + path);
      self.ready = false;
      ref.auth(self.auth_token, function(err) {
        if (!err) {
          if (console) console.log(path+" login succeeded.");
          $timeout(function() { self.ready = true; });
        }
      });
      return ref;
    },
    bind: function(ref, excludes, limit, start) { var self = this;
      var result = {total: 0, list: []};
      ref.on('value', function(data) { result.total = data.numChildren(); });
      return result;
    },
  }
}], 
```

控制器：

```
QuickMsgCtrl: ['$scope', '$$fbase', '$timeout', 
    function($scope, $$fbase, $timeout) {
  var ref = $$fbase.ref("/chats/abc");
  $scope.$watch(function() { return $$fbase.ready }, function() {
    if ($$fbase.ready) {
      var data = $$fbase.bind(ref);
      $scope.listing = data.list;
    }
  });
}], 
```

铬控制台：

```
/chats/abc login succeeded.
FIREBASE WARNING: on() or once() for /chats/abc failed: permission_denied 
```

在这一点上，我很清楚你这边有一个错误，尽管登录成功，但我还是允许我进行简单的阅读。

不，AngularFire 对我来说毫无用处，因为它不进行身份验证，而且漏洞百出。

# c++ - 一维与二维阵列相结合。需要在 main 中调用函数

> ID：16159577
> 
> 赞同：0
> 
> 时间：2013-04-23T01:52:30.003
> 
> 标签：c++, arrays, multidimensional-array

我有一个一维数组和一个二维数组。我将它们都放在一个函数中，用于从 .txt 文件中读取信息。

我已经设置了所有数组，并且我的函数设置正确，据我所知，我只是无法弄清楚如何实际调用其中包含 2 个单独数组的函数。这是相关信息，请让我知道我需要在 main 中输入什么来调用这些函数。谢谢！

```
 void   getSales(double[][QUARTERS], int[]);     // places sales figures into the array
void   printSales(double[][QUARTERS], int[]);   // prints data as a table
void   printTableHeading();                     // prints table heading

int main()

{   
    double sales[YEAR_COUNT][QUARTERS]; // 2D array to hold the sales transactions
    int years[YEAR_COUNT];              // 1D array to hold the years
    return 0;
}

void printTableHeading()

{
}

void getSales(double salesTable[][QUARTERS],int yearArray[])
{
}

void   printSales(double salesTable[][QUARTERS], int yearArray[])
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:55:38.320

```
int main(
{
      getSales(sales, years);  // Will call your get sales function
      printSales(sales, years); // Will call your print sales function
} 
```

# sql-server - 通过电子邮件在不同的 sql 服务器之间发送数据

> ID：16159580
> 
> 赞同：0
> 
> 时间：2013-04-23T01:52:40.203
> 
> 标签：sql-server, email, service, service-broker

我在我们的组织外部有一个 sql 服务器，它向员工邮箱发送带有一些基本数据的自动电子邮件。

然后将其手动转录成一个 csv 文件，该文件通过 ssis 导入我们的 sql 服务器。

有没有办法直接将电子邮件发送到我们的 SQL 服务器，以便它可以自动处理数据？

我无法控制外部服务器的设置或输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:45:47.013

“有没有办法直接将电子邮件发送到我们的 SQL 服务器，以便它可以自动处理数据？” – 不。没有默认支持的方式来执行此操作。您需要创建一个自定义应用程序

1.  检查邮箱
2.  解析结果
3.  将结果插入数据库

应用程序不必在服务器本身上，但它当然需要能够连接到它。

# vb.net - 使用 VB GUI 选择案例（适用于学校）

> ID：16159582
> 
> 赞同：0
> 
> 时间：2013-04-23T01:52:46.777
> 
> 标签：vb.net, select, case

问候和问候。我真的需要帮助上学。

这就是我正在处理的：

![在此处输入图像描述](https://i.stack.imgur.com/ywQh5.png)

在选择一个选项之前无法进行选择。在按下“选择位置”之前，不应显示“您已选择宿舍位置”文本。我的任务是选择宿舍，允许用户选择其中一个。通过 btnselect 进行选择后，应该显示 lblselected，然后应该关闭窗口。请帮我。我不知道我在做什么。我是一名网页设计师，试图扩展我的知识。

```
Option Explicit On

Public Class frmhostelselection

    Private Sub btnlondon_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnlondon.Click

    End Sub

    Private Sub btndublin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btndublin.Click

    End Sub

    Private Sub btnselect_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnselect.Click

    End Sub

    Private Sub btnexit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnexit.Click

    End Sub

    Private Sub lblselected_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lblselected.Click

    End Sub

    Private Sub lblmsg_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lblmsg.Click

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:16:34.547

好的，我给你一个逻辑

先说你`loadsub`

你必须添加

```
londonlistbox.enabled = false
dublinlistbox.enabled = false 
```

然后，添加到你的伦敦按钮

```
dublinlistbox.enabled = false
london.enabled = false 
```

并将反面添加到都柏林按钮

然后，选择位置

```
select case londonlistbox and dublinlistbox
case londonlistbox.enabled = true
label1.text = londonlistbox.selecteditems
case dublinlistbox.enabled = true
label1.text = dublinlistbox.selecteditems 
```

就这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:58:03.603

您想隐藏标签。在 Visual Studio 中，您要选择标签，并将其可见值设置为 false。或者您可以将其设置为对 formload 事件不可见。

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
lblselected.visible = false

end sub 
```

然后，您需要它显示按钮单击事件。

```
lblselected.visible = true 
```

从你的照片我不确定按钮是做什么的。You seem to have 2 actual locations to choose (as buttons) and another button which seems to act as a select button.

您还要求在您的问题中选择案例命令。

因此，也许您希望在单击选择位置按钮时加载选择案例，并且如果您单击其他任何一个按钮，就会设置一个值？

如上所述，您没有尝试自己尝试，所以我不会编写代码，但听起来您想要这个......

1.  在单击选择按钮之前，第二个标签应该是不可见的。

2.  您想要字符串或可以识别已按下的内容的东西。该字符串应该是在公共路径下声明的全局变量。

3.  当按下 londen 按钮或...其他按钮时，全局字符串应更改为 London 或...Dublin。

4.  当您按下选择按钮时，它应该加载一个选择案例方法，该方法将检查伦敦或都柏林。

    ```
    Select case globalstring
    case "London"
    ' make label visible, maybe change lblselected text to reflect that London was pressed.
    case "Dublin"
    ' Make label visible, maybe change lblselected text to reflect that Dublin was pressed.
    case default
    ' Produce an error message saying that nothing was pressed.
    end Select 
    ```

我猜您还希望在这些图片框中显示图像。使用初始图像来获得那个图像。

退出按钮就是 me.close()

# meteor - 如何在标准 Meteor 中实现这一点而不必做奇怪的黑客攻击？

> ID：16159587
> 
> 赞同：0
> 
> 时间：2013-04-23T01:53:17.440
> 
> 标签：meteor

我的示例应用程序显示了一个带有流星的 d3js 图表。宽度、高度和数据可以由用户被动更改。

挑战在于仅刷新图表中需要刷新的部分。

我这样做是为了看看它是如何用 Meteor 反应性实现的，因为有人在这里用 Reactive.js 实现了它：http: [//eng.wealthfront.com/2013/04/reactive-charts-with-d3-and-reactivejs .html](http://eng.wealthfront.com/2013/04/reactive-charts-with-d3-and-reactivejs.html)

您可以在这里试用该应用程序：http: [//testd3js.meteor.com/](http://testd3js.meteor.com/)

记录的代码在这里：[https ://gist.github.com/tomsdev/5428018](https://gist.github.com/tomsdev/5428018)

问题是：要让这个工作，我必须使用一个 hack，用一个更简单的对象替换 Session，因为我们不能在 Session 中存储一个 Function 类型。我需要存储 d3js 返回的比例函数。然后，我使用比例函数作为反应依赖项来刷新图表的条形或标签。

所以，我想知道您是否可以添加在 Session 中存储 Function 的可能性，或者是否有其他方式（不创建我自己的反应式数据源）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T15:14:09.190

您可以将值存储在可以存储函数的 ReactiveVars 中。添加包后`meteor add reactive-var`：

```
var foo = new ReactiveVar;
foo.set(function(){});
foo.get(); // => function(){} 
```

# javascript - 如果选中复选框，则 JavaScript 不起作用

> ID：16159592
> 
> 赞同：0
> 
> 时间：2013-04-23T01:53:34.673
> 
> 标签：javascript, jquery, forms, checkbox, required

我有一个网站表单，其中只有在选中复选框时才需要我需要的字段（使用 JQuery 插件）。

到目前为止，如果未选中或选中复选框，我编写的 JavaScript 就可以工作。但是当用户选中复选框然后取消选中它时，代码不起作用（未选中时字段仍然是必需的）。

另外一个错误是由于某种原因，相同的代码仅适用于仅更新一个需要布尔值的项目。例如，如果我有相同的代码，但要更新两个元素要求，则脚本根本不起作用。

以下是相关的源代码：

```
<script>
function swap(){
  if(document.getElementById('must').checked){     
    document.getElementById("element1").setAttribute("required", "true");
  }else{      
    document.getElementById("element1").setAttribute("required", "false");
  }
}
</script>

<form>
<input type="checkbox" onclick="swap();" id="must" name="must" value="1" style="width:10;">
<input id="element1" type="text" name="element1" placeholder="Enter Value" >
<input type="submit" id="submit" name="submit" value="Send" >
</form> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:57:08.610

我知道检查是否`checkbox`是的最好方法是`checked`使用 jQuery`is()`方法（[文档](http://api.jquery.com/is/)）。它为您处理 x 浏览器的差异。向 HTML 元素添加属性的最佳方法是使用`attr()`方法。

```
if($("#must").is(":checked")) {
    $("#element1").attr('required', 'required');
} else {
    $("#element1").removeAttr();
} 
```

您可以在 DOM 检查器中检查该属性已添加。

所需的属性文档在[此处](http://www.w3.org/TR/html5/forms.html#the-required-attribute)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:00:55.650

试试这个，在 xhtml 中我们指定 required="required" 并且没有 required="false"，更好的方法是删除 else 上 required 的属性

```
<script type="text/javascript">
   function swap(){
  if(document.getElementById('must').checked){     
    document.getElementById("element1").setAttribute("required", "required");
  }else{      
    document.getElementById("element1").removeAttribute("required");
  }
}
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:57:43.670

required 属性是一个布尔属性，它存在意味着该字段是必需的，它不存在意味着该字段不是必需的。它只有 3 种有效形式 1.`required`单独 2.`required=""`等于空字符串 3.`required="required"`

# php - htaccess 中的 SetEnvIf 引用

> ID：16159594
> 
> 赞同：0
> 
> 时间：2013-04-23T01:54:30.143
> 
> 标签：php, html, linux, .htaccess

我试图让我的 htaccess 文件阻止所有流量，除非从名为 Premiere.htm 的本地文件中单击链接。这就是我现在所拥有的，但它不起作用......我做错了什么？

```
SetEnvIf Referer .*(premiere.htm)$ let_me_in
Order Deny,Allow
Deny from all
Allow from env=let_me_in 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:24:11.667

如果链接`referer`是从从`file://`. 如果您在点击链接之前使用 Chrome 并打开开发者工具，您将能够看到请求标头 - 浏览器可能不会为本地文件传递此信息。

# mysql - #1064 - 创建视图时 SQL 语法有错误

> ID：16159596
> 
> 赞同：0
> 
> 时间：2013-04-23T01:54:46.320
> 
> 标签：mysql, sql, view

有人可以告诉我这段代码有什么问题导致它吐回错误吗？

我的代码如下：

```
CREATE OR REPLACE VIEW vw_training AS 
SELECT training.train_attended, clients.client_firstname, clients.client_lastname, clients.client_swn, clients.client_id, locations.loc_id, locations.loc_title, locationsp.loc_id, locationsp.loc_title, 
FROM training 
JOIN clients ON clients.client_id = training.train_clientid
JOIN locations AS locationsp ON locations.loc_id = training.train_pickup
LEFT JOIN locations ON locations.loc_id = clients.client_winz 
```

这是我回来的错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“FROM training JOIN clients ON clients.client_id = training.train_clientid JOIN”附近使用正确的语法

我正在运行 phpmyadmin 版本信息：3.5.2.2

我之前用不同的值使用过这个脚本，没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:55:50.850

`FROM`子句前有一个额外的尾随逗号

```
SELECT ....,
       locationsp.loc_id, 
       locationsp.loc_title, -- <<== remove this trailing comma
FROM   training ... 
```

另一个会引发此消息的错误：`Unknown column 'locations.loc_id' in 'on clause'`是使用`tablename`而不是提供的别名。它应该是，

```
JOIN locations AS locationsp ON locationsp.loc_id = training.train_pickup
                                    ^^ should use alias here 
```

# php - PHP更改写权限

> ID：16159598
> 
> 赞同：0
> 
> 时间：2013-04-23T01:54:51.533
> 
> 标签：php, apache

抱歉，如果这是重新发布，但我在用 PHP 将文件写入磁盘时遇到了一些困难。我正在尝试使用 HTML 表单上传文件，然后使用 PHP 文件将该文件下载到我的计算机，但我不断收到错误消息

`Warning: fopen(temp/127.0.0.1): failed to open stream: Permission denied in C:\xampp\htdocs\VotingBox\processForm.php on line 30`

我已经尝试`chmod`对该目录赋予自己写入权限，并且该目录是在 Windows 7 中的管理员配置文件下创建的，因此它应该具有文件写入功能，但我仍然遇到相同的错误。这是我编写文件的代码：

```
$ip=$_SERVER['REMOTE_ADDR']; 
if(is_dir("temp/".$ip) == false)
{
    mkdir("temp/".$ip, 0777);
}
chmod("temp/".$ip, 0777);
move_uploaded_file($candImgs[$i], "temp/".$ip);
$filename1 = "temp/".$ip; 
$fp1 = fopen($filename1, "r");
$contents1 = fread($fp1, filesize($filename1)); 
fclose($fp1); ` 
```

任何帮助将不胜感激。另外，如果有帮助的话，我正在使用 XAMPP 来托管我的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:18:16.087

I finally realized that the problem was with my HTML form, and not with the php code. Here are the useful parts of my final code if anyone else has this problem:

```
<form name="FORM_NAME" enctype="multipart/form-data" method='post' action="ACTION">

<input type="hidden" name="MAX_FILE_SIZE" value="170000" /> 
```

And finally my php code:

```
 move_uploaded_file($_FILES['fileName']['tmp_name'], $target_path);  
    $fp      = fopen($target_path, 'r');
    $data = fread($fp, filesize($target_path));
    fclose($fp);
    $encoded = chunk_split(base64_encode($data)); 
```

# ruby-on-rails - 将 Rails 模型转换为 SQL 插入查询？

> ID：16159599
> 
> 赞同：10
> 
> 时间：2013-04-23T01:54:57.100
> 
> 标签：ruby-on-rails, ruby, activerecord

有没有办法将 Rails 模型转换为插入查询？

例如，如果我有这样的模型：

```
m = Model.new
m.url = "url"
m.header = "header" 
```

如果我执行 m.save，如何获得 ActiveRecord 将生成的相应 SQL 查询？

如果可能，我想得到：“INSERT INTO models(url, header) VALUES('url', 'header')”。

注意：我不想实际保存模型并取回查询（来自日志文件等）。如果我选择保存查询，我想获取它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-26T20:42:44.817

在 Rails 4.1 上，我发现下面的代码片段有效：

```
record = Post.new(:title => 'Yay', :body => 'This is some insert SQL')

record.class.arel_table.create_insert
  .tap { |im| im.insert(record.send(
            :arel_attributes_with_values_for_create,
            record.attribute_names)) }
  .to_sql 
```

感谢[https://coderwall.com/p/obrxhq/how-to-generate-activerecord-insert-sql](https://coderwall.com/p/obrxhq/how-to-generate-activerecord-insert-sql)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:46:29.090

在 Rails 3.2.13 中测试：我想我这次做对了，这次肯定不会持久化到数据库。它也不会触发验证或回调，因此除非您以其他方式调用它们，否则它们更改的任何内容都不会出现在结果中。

将它保存在 lib 中作为 insert_sqlable.rb 然后你可以

```
#in your models or you can send it to ActiveRecord::Base
include InsertSqlable 
```

然后就是model.insert_sql来看看。

```
#lib/insert_sqlable
module InsertSqlable
    def insert_sql
      values = arel_attributes_values
      primary_key_value = nil

      if self.class.primary_key && Hash === values
        primary_key_value = values[values.keys.find { |k|
          k.name == self.class.primary_key
        }]

        if !primary_key_value && connection.prefetch_primary_key?(self.class.table_name)
          primary_key_value = connection.next_sequence_value(self.class.sequence_name)
          values[self.class.arel_table[self.class.primary_key]] = primary_key_value
        end
      end

      im = self.class.arel_table.create_insert
      im.into self.class.arel_table

      conn = self.class.connection

      substitutes = values.sort_by { |arel_attr,_| arel_attr.name }
      binds       = substitutes.map do |arel_attr, value|
        [self.class.columns_hash[arel_attr.name], value]
      end

      substitutes.each_with_index do |tuple, i|
        tuple[1] = conn.substitute_at(binds[i][0], i)
      end

      if values.empty? # empty insert
        im.values = Arel.sql(self.class.connectionconnection.empty_insert_statement_value)
      else
        im.insert substitutes
      end

      conn.to_sql(im,binds)
    end
end 
```

原来代码在 ActiveRecord::Relation 中而不是 ActiveRecord::Persistence 中。唯一显着的变化是生成 sql 而不是执行它的最后一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:14:17.450

如果您不想保存模型，请在完成对象后调用 m.destroy。

您可以像这样调试它来记录sql查询

Rails.logger.debug "插入模型(url, header) VALUES(#{m.url}, #{m.header}).inspect

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-01T04:46:55.503

在互联网和论坛上搜索了很多之后，我想我找到了一个更好的解决方案：**只需要两行代码**。

我找到了一个很好的 gem 可以完全满足你的要求，但是这个 gem 只适用于 Rails 3.2 和更早版本。我[和作者谈过，](https://github.com/vivrass/models-to-sql/issues/1)他不想再支持这个宝石了。所以我自己发现了如何支持 Rails 4.0，现在我正在维护这个 gem。

### 在此处下载[“models-to-sql-rails”gem](https://github.com/paladini/models-to-sql-rails)，支持 Rails 4.0 及更早版本。

* * *

使用此 gem，您可以轻松地执行以下操作。（*values*里面的例子只是个玩笑，在你的对象中使用它时你会得到正确的值）。

对于对象：

```
object.to_sql_insert
# INSERT INTO modelName (field1, field2) VALUES ('Wow, amaze gem', 'much doge') 
```

对于对象数组：

```
array_of_objects.to_sql_insert
# INSERT INTO modelName (field1, field2) VALUES ('Awesome doge', "im fucking cop")
# INSERT INTO modelName (field1, field2) VALUES ('much profit', 'much doge')
# (...) 
```

只要看看[这个项目的 Github，](https://github.com/paladini/models-to-sql-rails)你就会发现如何安装和使用这个美妙的 gem。

# php - 对二维关联数组进行排序并根据键值进行分类

> ID：16159601
> 
> 赞同：0
> 
> 时间：2013-04-23T01:55:02.313
> 
> 标签：php

我是这里的新手。有一个关于 php 排序的问题。搜索了很多，但不幸的是找不到我正在搜索的解决方案。我知道这很容易——但我不知道为什么我在搜索了几个小时后找不到它。

我有一个这样的数组。他们有一个关键的“职责”，我想对此进行某种排序，以便新数组包含 - 与“职责”字段按顺序排列的数组。

```
$arrayName = array(
array(
    'name' => 'Dr. Hugo Lopez',
    'duty' => 'Anesthesiologist',
    'link' => ''
),
array(
    'name' => 'Dr. Dario Garin',
    'duty' => 'Orthopedic Specialist',
    'link' => 'dr-dario-garin.php'
),
array(
    'name' => 'Dr. Maclovio Yañez',
    'duty' => 'Plastic Surgeon',
    'link' => ''
),
array(
    'name' => 'Melissa Bracker',
    'duty' => 'Patient Liaison',
    'link' => ''
),
array(
    'name' => 'Dr. Diego Guzman',
    'duty' => 'Cardiologist',
    'link' => ''
),
array(
    'name' => 'Ivan Arafat',
    'duty' => 'Accountant',
    'link' => ''
),
array(
    'img-old' => 'jorge-fernandez.jpg',
    'duty' => 'Hospital Administrator',
    'link' => ''
),
); 
```

我试过了：

```
usort($arrayName, function($a, $b) {
return $a['duty'] - $b['duty'];
}); 
```

但这会按 Duty 字段的降序排列数组。

我想按照职责字段的优先顺序排列它。喜欢：我将设置职责字段值的顺序，将它们排列在护士、维护、医生、司机等类别中。

我希望能够 - 使用某种数组自己设置分类顺序。

```
sort($arrayName, $priority);
$priority = array( 'President', 'Vice President', 'Doctors', 'Nurse', 'Maintenance', 'Drivers'); 
```

我对 PHP 不太熟悉。如果我问的是基本问题，请原谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:41:20.997

```
usort($arrayName, function (array $a, array $b) {
    static $priority = array('President', 'Vice President', 'Doctors', 'Nurse', 'Maintenance', 'Drivers');
    return array_search($a['duty'], $priority) - array_search($b['duty'], $priority);
}); 
```

在这里进行广泛的解释：[https ://stackoverflow.com/a/17364128/476](https://stackoverflow.com/a/17364128/476)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:49:55.020

老实说，我会改变你组织数据结构的方式——有许多小的低效率可能会在未来伤害你。您的专业人员列表更自然地属于某个部门，而不是具有描述其角色的属性。如果您将用户分组到以下数据结构中，则执行排序和其他“部门”级别的任务会变得容易得多，而不会使“用户”级别的任务变得更加困难。

```
$arry = array(
   'Accountant' => array(
        ...
    ),
    'Anesthesiologist' => array(
        ...
    ),
) 
```

如果这不是一个选项..您可以使用下面的功能..但请注意，我不建议在任何生产场景中以这种方式对数据进行排序。它为您设置的每个优先级迭代整个用户列表，这是一种非常低效的排序方法。想象一个场景，您有 100 个优先级和 1000 个用户——这将需要 100 * 1000 = 100,000 次迭代来简单地确定数据的优先级。最糟糕的是，它的速度呈指数级增长。

无论如何，这是低效的解决方案..

```
$priorities = array(
        'Accountant',
        'Cardiologist',
        'Anesthesiologist',
);

$arrayName = array(
...
);

$r = sortDuties($arrayName, $priorities);
var_dump($r);

function sortDuties($userList, $priorities = array()) {
 $newList = array();
 foreach($priorities AS $priority) {
    for($i = 0; $i < count($userList); $i++) {
        if(isset($userList[$i]) && $userList[$i]['duty'] == $priority){
            $newList[] = $userList[$i];
            unset($userList[$i]);
        }
    }
 }

 return array_merge($newList, $userList);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:51:49.670

这是我的解决方案，不是最有效的，但它应该可以解决问题，它应该解决未定义为优先级的职责问题。

```
$priority = array('Orthopedic Specialist', 'Hospital Administrator', 'Accountant', 'Anesthesiologist', 'Plastic Surgeon');

function dutySort(array &$array, array $priority) {

    usort($array, function($a, $b) use ($priority) {
        $aPriority = array_search($a['duty'], $priority);
        $aPriority = ($aPriority !== false ? $aPriority : count($priority));
        $bPriority = array_search($b['duty'], $priority);
        $bPriority = ($bPriority !== false ? $bPriority : count($priority));

        return ($aPriority < $bPriority) ? -1 : 1;
    });
}

dutySort($array, $priority); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-11T08:13:58.847

因为`isset()`（或我将演示的 null 合并）总是优于`array_search()`，所以我建议您通过翻转优先级数组来准备查找数组。当职责不在优先级数组中时，您需要分配一个高于最高优先级值的数字——为此，只需使用`count()`.

代码：（[演示](https://3v4l.org/9h4YX)）

```
$array = [
    ['name' => 'Dr. Hugo Lopez', 'duty' => 'Anesthesiologist', 'link' => ''],
    ['name' => 'Dr. Dario Garin', 'duty' => 'Orthopedic Specialist', 'link' => 'dr-dario-garin.php'],
    ['name' => 'Dr. Maclovio Yañez', 'duty' => 'Plastic Surgeon', 'link' => ''],
    ['name' => 'Melissa Bracker', 'duty' => 'Patient Liaison', 'link' => ''],
    ['name' => 'Dr. Diego Guzman', 'duty' => 'Cardiologist', 'link' => ''],
    ['name' => 'Ivan Arafat', 'duty' => 'Accountant', 'link' => ''],
    ['name' => 'Jorge Fernandez', 'duty' => 'Hospital Administrator', 'link' => ''],
];

$lookup = array_flip(['Hospital Administrator', 'Plastic Surgeon', 'Orthopedic Specialist']);
$fallback = count($lookup);

usort($array, function ($a, $b) use ($lookup, $fallback) {
    return ($lookup[$a['duty']] ?? $fallback) <=> ($lookup[$b['duty']] ?? $fallback);
});
var_export($array); 
```

* * *

如果你想扩展基于 的排序规则`name`，spaceship 运算符让这变得非常简单。事实是，名称字符串的解析比排序更难。我会将名称拆分为最多 3 个元素，然后颠倒它们的顺序，使其变为“姓氏”、“名字”、“前缀”。

代码：（[演示](https://3v4l.org/LRuD4)）

```
usort($array, function ($a, $b) use ($lookup, $fallback) {
    $aName = array_reverse(preg_match('~^((?:[a-z]+\.)?) ?(\S+) (.+)~i', $a['name'], $out) ? $out : ['', '', '']);
    $bName = array_reverse(preg_match('~^((?:[a-z]+\.)?) ?(\S+) (.+)~i', $b['name'], $out) ? $out : ['', '', '']);
    return [$lookup[$a['duty']] ?? $fallback, ...$aName]
           <=>
           [$lookup[$b['duty']] ?? $fallback, ...$bName];
}); 
```

# sql - Microsoft Access 和 SQL Azure 性能问题

> ID：16159602
> 
> 赞同：2
> 
> 时间：2013-04-23T01:55:06.450
> 
> 标签：sql, ms-access, azure

我们正在尝试使用 SQL Azure 作为我们的 Microsoft Access 后端。但是，我们在代码中或作为查询运行简单查询时遇到了巨大的性能问题。当从本地 SQL Management Studio 查询窗口直接针对 SQL Azure 数据库运行相同的查询时，它执行得很好。

注意：相同的查询对本地 SQL 数据库执行良好。

*   微软访问 2013
*   ODBC SQL 本机 11.0
*   道
*   表已链接（不是 Web 应用程序）

任何机构都有任何想法或关于性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:57:20.260

我将访问用作红砖数据仓库的前端。我们的情况可能有一些相似之处。我的观察是，如果 redbrick 表具有多列主键，则查询需要很长时间。事实上，我什至能够看到会发生什么。

我看到的和这个差不多。假设我的 redbrick 表，我们称之为 MyTable，有一个 5 列的主键。其中之一称为 TheDate。我在访问中构建了一个基本上类似于以下内容的查询：

```
select somefields
from MyTable
where field1 = [prompt for value]
and TheDate > 7 days ago, whatever that syntax is in access. 
```

如果我提交的值导致不返回任何记录，则它是即时的。但是，即使只返回一条记录，我也看到这种 sql 在 redbrick 中运行。

```
select somefields
from MyTable
where (field1 = something
and TheDate = something
and field 3 = something
and field4 = something)
or (same sort of thing for a different date)
and so on for all 7 days in the date range. 
```

我不是特别在意，因为我是用户，我认为结果值得等待。事实上，有时我在等待时会查看 StackOverflow。

另一方面，直通查询就像直接查询数据库一样。此外，对具有单键主键的表的查询很快。

这可能就是发生在你身上的事情。或者它可能是别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:40:28.790

如果我理解正确，您是从 Azure 上的远程 SQL Server 实例链接表并在 MS Access 前端运行查询？

如果是这种情况，有很多事情会影响性能：

*   Access 会尽可能尝试在服务器上运行查询，但如果您以需要 Access 从服务器提取原始表数据以在本地执行查询本身的方式编写查询，则情况并非总是如此。
    例如，如果您的查询中有 UDF（VBA 中的用户定义函数），或者如果您使用只有 Access 有的函数，而不是 SQL Server，就会发生这种情况。

*   在您的查询中，如果您将本地表与远程表混合使用，请小心，您最终会传输大量数据，如果 MSAccess 无法优化查询，则可能传输整个表。

*   如果您在 SQL Server 中的每个表上都没有 ROWVERSION 字段，则 MSAccess 将需要读取比确定特定行是否已更改所需的更多数据（如果需要读取所有字段以进行比较它们到它的缓存）。

*   如果您的索引不适合您运行的查询类型，那么您最终可能会获得比必要更多的数据。

*您可以尝试缓解问题*

*   确保您的查询没有提取超出您实际需要的数据。
    使用 SQL Server 的探查器工具来准确了解正在执行的内容以及 Access 请求的数据量。

*   使用传递查询。它们将完全在服务器上运行。

*   在 SQL Server 上定义将返回所需数据的视图，然后将这些视图链接为前端中的表。

*   定义可以仅计算和返回所需数据的存储过程。

*   避免将远程数据绑定到包含太多控件的表单。

*参考*

*   [优化链接到 SQL Server 的 Microsoft Office Access 应用程序](http://msdn.microsoft.com/en-us/library/bb188204%28v=sql.90%29.aspx)

# jquery - 删除选择器不起作用

> ID：16159605
> 
> 赞同：5
> 
> 时间：2013-04-23T01:55:14.360
> 
> 标签：jquery

为什么`:odd`当我将它传递给`remove(selector)`函数时选择器不起作用？根据[文档](http://api.jquery.com/remove/)，它应该过滤已经选择的一组项目，在这种情况下是`li`'s.

```
<ul id='list1'>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul>
<ul id='list2'>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul> 
```

* * *

```
$(document).ready(function() {
    $('#list1').children(':odd').remove(); // works as expected
    $('#list2').children().remove(':odd'); // does not work
}); 
```

* * *

**结果**

```
-One
-Three

-One
-Two
-Three
-Four 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T02:04:40.573

这实际上是一个错误：[http ://bugs.jquery.com/ticket/13721](http://bugs.jquery.com/ticket/13721)

并于 17 天前在[jQuery 2.0](https://github.com/jquery/jquery/commit/1b610266502490eab42a0b9ddfac2f93da0b0fe1#src/manipulation.js)中修复。

问题是它正在检查每个元素是否与选择器匹配：

```
for element in matched_elements:
    if element matches the selector:
        remove element 
```

`:odd`仅适用于一组匹配元素的上下文，因此这些元素都不是奇怪的。同样，如果您将其更改为`:even`，所有这些都将被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:05:10.260

传递给的选择器`remove`用于动态匹配，即针对选择器测试每个元素并在匹配时将其删除，一次一个元素。（[源代码](https://github.com/jquery/jquery/blob/03ab9b9f9061df1cf38fd6466c2241dfb2ae9cdc/src/manipulation.js#L165-L178)）

这种行为在[jQuery 2.0](http://blog.jquery.com/2013/04/18/jquery-2-0-released/)中有所改变，现在在删除之前应用选择器过滤器。看：

[#13721: remove(“:nth-child(1)”) 与 filter(“:nth-child(1)”).remove() 的工作方式不同](http://bugs.jquery.com/ticket/13721)

* * *

（**编辑：**对结果行为解释的更正，@Blender 是正确的）。在这种情况下，没有匹配项，因为每个元素都被单独检查过选择器。

因此，[`:odd`选择器](http://api.jquery.com/odd-selector/)永远不会匹配，因为在针对选择器进行测试时，所有元素都将被视为 jQuery 对象的索引`0`（这是`:odd`/`:even`检查的内容）。这解释了为什么`:odd`从不匹配并且`:even`会匹配所有元素。

# html - 表格父元素的宽度是否扩展到其子元素？

> ID：16159607
> 
> 赞同：1
> 
> 时间：2013-04-23T01:55:19.310
> 
> 标签：html, css

`<table>`设置宽度为 1000px。

它有 5 个`<td>`元素，每个元素的宽度为 300 像素。

`<td>`尽管我明确设置了宽度，表格是否会扩展以包含所有孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:01:59.000

您应用的宽度`table`是最重要的。

元素将`td`调整大小以适应表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:13:40.357

这可能取决于浏览器以及实际指定宽度的方式，但在您的情况下，表格单元格很可能会调整大小以适合整个表格的宽度。计算表格宽度的说明：http: [//www.w3.org/TR/CSS2/tables.html#width-layout](http://www.w3.org/TR/CSS2/tables.html#width-layout)

`table-layout: fixed`将使用固定表格布局算法，该算法将使用其内容从普通框模型计算表格宽度（在您的情况下为 1500px）。您也可以通过将块级元素作为`<td>`s 的内容来做到这一点。

[http://jsfiddle.net/AS6EZ/](http://jsfiddle.net/AS6EZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:02:29.330

不会。无论其子列的宽度如何，表格都不会超过设定的宽度。您示例中的表格将是 1000 像素宽，而不是 1500 像素宽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T02:03:36.700

子元素（`td`'s）将调整大小以适应表格的宽度。

[例子](http://jsfiddle.net/d96bL/)。

# osx-mountain-lion - 终端窗口中的 tmux 会话名称

> ID：16159608
> 
> 赞同：4
> 
> 时间：2013-04-23T01:55:29.497
> 
> 标签：osx-mountain-lion, zsh, tmux, tmuxinator

我经常在单独的 Terminal.app 选项卡中运行两个 tmux 会话。我通过 tmuxinator 使用了命名会话。我想要一种方法将该会话名称显示为选项卡的标题，以便我可以识别哪个 tmux 会话是哪个。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T11:35:07.537

这应该可以使用 tmux 配置

> 设置标题 [上 | off ] 如果终端看起来是 xterm，则尝试使用 \e]2;...\007 xterm 代码设置窗口标题。此选项默认关闭。请注意，如果设置了 STY 环境变量，elinks 只会尝试设置窗口标题。
> 
> set-titles-string string 如果 set-titles 开启，则用于设置窗口标题的字符串。字符序列被替换为 status-left 选项。

有问题的项目是`#S Ta Session name`。

检查手册页。

为当前连接/活动的会话设置此项：

```
$ tmux set-option -s set-titles on
$ tmux set-option -s set-titles-string '#S' 
```

# java - java中的方法重载错误

> ID：16159610
> 
> 赞同：1
> 
> 时间：2013-04-23T01:55:50.247
> 
> 标签：java, overloading

您好，我正在建立一家书店，我收到此错误消息

```
Duplicate method getApparel(String) in type Bookstore 
```

Apparel 是这些方法中的一个类。我如何解决这个问题。Eclipse 建议重命名这些。

```
public Apparel getApparel(String id)
{
    for(int i=0; i < apparel.size(); i++)
    {
        if(apparel.get(i).getId().equals(id))
        {
            return apparel.get(i);
        }
    }

    return null;
}

public ArrayList<Apparel> getApparel(String name)
{
    ArrayList<Apparel> apparel = new ArrayList<Apparel>();
    for(int i=0; i < this.apparel.size(); i++)
    {
        if(this.apparel.get(i).getName().equals(name))
        {
            apparel.add(this.apparel.get(i));
        }
    }

    return apparel;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:57:44.873

在 Java 中，同一类中不能有多个方法具有相同的方法名称和相同的参数类型和计数 - 在此上下文中不考虑不同的返回值。

要解决此问题，您必须重命名其中一个方法，或者添加或更改参数以使其唯一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:39:23.147

两种方法 getApparel(String) 具有相同的方法签名！JAVA 和 C++ 禁止具有相同方法签名的多个方法。否则，编译器将无法识别要调用的方法。

方法签名由：方法名称+方法参数列表（类型列表）标识。编译器不按返回类型区分方法。

详细信息可以参考：[定义方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:56:59.003

像这样的东西：

```
public Apparel getApparelById(String id)
{
    for(int i=0; i < apparel.size(); i++)
    {
        if(apparel.get(i).getId().equals(id))
        {
            return apparel.get(i);
        }
    }

    return null;
}

public ArrayList<Apparel> getApparelByName(String name)
{
    ArrayList<Apparel> apparel = new ArrayList<Apparel>();
    for(int i=0; i < this.apparel.size(); i++)
    {
        if(this.apparel.get(i).getName().equals(name))
        {
            apparel.add(this.apparel.get(i));
        }
    }

    return apparel;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T01:59:49.837

两种方法具有相同的参数类型，但返回类型不同，这是不可能的。来自[Java 语言规范](http://java.sun.com/docs/books/jls/third_edition/html/classes.html#38649)：

`Two methods have the same signature if they have the same name and argument types.`

如果两种方法都有不同的参数类型，那么这是可能的。

# ruby - 如何使用提供的维度创建矩阵或在 Ruby 中为每个后续数组创建动态变量名称？

> ID：16159614
> 
> 赞同：1
> 
> 时间：2013-04-23T01:56:02.440
> 
> 标签：ruby, arrays, variables, dynamic, matrix

我想创建一个类并将 2 个变量传递给该类；宽度（x）和长度（y）。使用这些变量，程序应该建立一个矩阵或创建 x 个具有 y 个条目的数组。

问题是，如果它不是矩阵（如何？）如果数组是最好的，那么如果通过了 4、8，它怎么能工作？

```
array_name_0 = [0, 1, 2, 3, 4, 5, 6, 7]
array_name_1 = [0, 1, 2, 3, 4, 5, 6, 7]
array_name_2 = [0, 1, 2, 3, 4, 5, 6, 7]
array_name_3 = [0, 1, 2, 3, 4, 5, 6, 7] 
```

其中“array_name_x”x将=通过创建传递的x，0-7基于y。

示例代码如下：

```
class Dimensional
  attr_reader :width, :length

  def initialize(width,length)

    @width = width
    @length = length
    @sqft = width * length

  end
  def full
    "
    width : #{@width}
    length: #{@length}
    sq ft : #{@sqft}

    #display array/matrix here

"
  end
end

myDimensional = Dimensional.new(4, 8)

print Dimensional.full 
```

那么，在这个例子中，我将如何创建一个具有这些 x、y 值的矩阵，或者我将如何根据提供的 x 为 x 动态分配一个数字“array_name_x”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:53:23.147

`width.times.map{ length.times.to_a }`想到，例如

```
matrix = 3.times.map{ 2.times.to_a }
# => [[0, 1], [0, 1], [0, 1]]

matrix.map{ |row| row.join(" ") }.join("\n")
# 0 1
# 0 1
# 0 1 
```

# java - Joda Time : 设置星期几和一个月的星期几

> ID：16159615
> 
> 赞同：2
> 
> 时间：2013-04-23T01:56:03.443
> 
> 标签：java, jodatime

我正在使用 Joda 时间，但在设置星期几和月份的星期几时遇到问题。假设如果我选择`April 23,2013`哪个是（本月第 4 周的第 3 天），我想要下一个日期`3rd day of 4th week of the month`是 5 月 21 日。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-26T14:51:24.907

我不推荐使用日历 api，因为它非常复杂......并不简单......正如 Ilya 所说。

最简单的是jodatime api。您可以使用 joda api 的许多方法来获得许多最简单形式的结果：

然后你可以这样做：

**返回当前日期的第三天：**

> 日期时间 dateTime = DateTime.now().withDayOfWeek(3)

**设置特定月份，在本例中为四月：** 

> dateTime = dateTime.withMonthOfYear(4)

我不知道jodatime是否有get ***week of the month***的方法，但是你可以在[jodatime api doc](http://joda-time.sourceforge.net/apidocs/)中更好地搜索 存在方法：

> .withWeekOfWeekyear(int)
> 和
> .withWeekyear(int)

在以 word 开头的方法中：***.with...***（例如：dateTime.withHourOfDay(2)）您可以获得很多结果。看看那里，玩得开心...

腹肌！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T08:22:41.720

最简单的方法是下一个：使用类`java.util.Calendar`

```
 static DateTime nextMonth(final DateTime current)
   {
      final Calendar curr = current.toCalendar(Locale.getDefault());
      final Calendar retVal = Calendar.getInstance();
      retVal.set(Calendar.DAY_OF_WEEK, curr.get(Calendar.DAY_OF_WEEK));
      retVal.set(Calendar.WEEK_OF_MONTH, curr.get(Calendar.WEEK_OF_MONTH));
      retVal.set(Calendar.MONTH, curr.get(Calendar.MONTH) + 1);
      return new DateTime(retVal).withMillisOfDay(0);
   } 
```

用法

```
DateTime dateTime = new DateTime(2013, 04, 23, 0 ,0 ,0 ,0); //April 23,2013
DateTime nextMonth = nextMonth(dateTime); // May 21, 2013 
```

# javascript - 禁用复选框节点时的问题

> ID：16159617
> 
> 赞同：1
> 
> 时间：2013-04-23T01:56:19.233
> 
> 标签：javascript, checkbox, jstree

我想用复选框插件制作一个 jstree。当 jstree 加载时，我希望检查一些节点并且它们的状态不能再改变。我找到了一种禁用复选框节点的方法，但是当我更改其父节点状态时，子节点可能仍会更改自身的状态。

这是我发现禁用复选框节点的方法：

```
"types" : {
     "types": {
     "disabled" : { 
           "check_node" : false, 
           "uncheck_node" : false 
         } 
     }
}

$.jstree._reference('#tree').set_type("disabled", "#node5"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-04T16:25:06.497

您可以通过以这种方式配置复选框插件来禁用选择父节点时自动选择子节点

```
$("#tree").jstree({
    "checkbox" : {
      "three_state" : false
    },
    "plugins" : [ "checkbox" ]
  }); 
```

# listview - 如何访问由 data-filter="true" 创建的输入元素

> ID：16159618
> 
> 赞同：0
> 
> 时间：2013-04-23T01:56:29.020
> 
> 标签：listview, jquery-mobile

万事如意。我有一个表单，其中一部分是使用 jquery mobile 的 listview 自动完成/数据过滤器使用本地数据的搜索框。

用户输入几个字符后，他们可以从自动完成中选择一个建议的结果。发生这种情况时，我希望在搜索框中填写所选结果。

问题是，由于 jquery-mobile 创建了输入元素，我不确定如何获取元素的句柄。

我需要有一个元素的句柄，因为在某些情况下我希望有一个默认值，并且因为我没有使用 listview 项目作为链接（它是表单的一部分。）

我发现的示例似乎只是展示了如何设置 listview 过滤器，但在显示结果后实际上并没有对其进行任何操作。

我的列表视图：http: [//jsfiddle.net/EXHNp/](http://jsfiddle.net/EXHNp/)

```
<div data-role="fieldcontain">
<ul class="emp_listview" data-filter="true" data-filter-reveal="true" data-filter-placeholder="Emp Code..." data-role="listview" data-inset="true">
    <li><a>fred</a></li>
     <li><a>mary</a></li>
     <li><a>bob</a></li>
     <li><a>alex</a></li>
</ul> 
```

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:24:02.973

我最终扩展了 mobile.listview 小部件以添加获取/设置功能

基本上我做了什么：

```
$.mobile.listview.prototype.searchElement;

$.mobile.listview.prototype.getInput = function(){
    return $(searchElement).find('input').val();    
};

$.mobile.listview.prototype.setInput = function(a_input){  
    return $(searchElement).find('input').val(a_input);
}; 
```

而且我已经覆盖了委托的 listviewcreate 函数以将创建的输入包装器保存在对象中。

```
$.mobile.document.delegate( "ul, ol", "listviewcreate", function() {
...
searchElement = wrapper; 
```

很可能是非常错误的方式，但似乎有效。欢迎批评。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:40:48.217

没有直接的方法可以访问输入元素，而是需要遍历 DOM。您可以使用以下代码来获取输入元素。

```
$("ul.emp_listview").prev().find('input.ui-input-text'); 
```

# android - 为什么我会收到以下错误：'没有这样的列“模块”'？

> ID：16159621
> 
> 赞同：2
> 
> 时间：2013-04-23T01:56:54.737
> 
> 标签：android, android-sqlite

有谁知道我为什么会收到上述错误？

这是代码：

这是包含我所有数据库信息的类：

```
package com.petroc.nationaldiploma;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class MySQLiteHelper extends SQLiteOpenHelper {

public static final String TABLE_GRADES = "grades";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_GRADE = "grade";
public static final String COLUMN_MODULE = "module";

private static final String DATABASE_NAME = "grades.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_GRADES + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_GRADE
        + " text not null" + COLUMN_MODULE + " text not null" + ");";

/*
 * private static final String DATABASE_CREATE = "create table " +
 * TABLE_GRADES + "(" + COLUMN_ID + " integer primary key autoincrement, " +
 * COLUMN_GRADE + " text not null);";
 */

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_GRADES);
    onCreate(db);
}
} 
```

这是创建用于创建和操作数据库的方法的类

```
package com.petroc.nationaldiploma;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class GradesDataSource {

// Database fields
private SQLiteDatabase database;
private final MySQLiteHelper dbHelper;

  private final String[] allColumns = { MySQLiteHelper.COLUMN_ID,
  MySQLiteHelper.COLUMN_GRADE, MySQLiteHelper.COLUMN_MODULE };

/*private final String[] allColumns = { MySQLiteHelper.COLUMN_ID,
        MySQLiteHelper.COLUMN_GRADE };*/

public GradesDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public Grade createGrade(String grade, String module) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_GRADE, grade);
    values.put(MySQLiteHelper.COLUMN_MODULE, module);
    long insertId = database.insert(MySQLiteHelper.TABLE_GRADES, null,
            values);
    Cursor cursor = database.query(MySQLiteHelper.TABLE_GRADES, allColumns,
            MySQLiteHelper.COLUMN_ID + " = " + insertId, null, null, null,
            null);
    cursor.moveToFirst();
    Grade newGrade = cursorToGrade(cursor);
    cursor.close();
    return newGrade;
}

/*
 * public Grade createGrade(String grade) { ContentValues values = new
 * ContentValues(); values.put(MySQLiteHelper.COLUMN_GRADE, grade); long
 * insertId = database.insert(MySQLiteHelper.TABLE_GRADES, null, values);
 * Cursor cursor = database.query(MySQLiteHelper.TABLE_GRADES, allColumns,
 * MySQLiteHelper.COLUMN_ID + " = " + insertId, null, null, null, null);
 * cursor.moveToFirst(); Grade newGrade = cursorToGrade(cursor);
 * cursor.close(); return newGrade; }
 * 
 * public void deleteGrade(Grade grade) { long id = grade.getId();
 * System.out.println("Grade deleted with id: " + id);
 * database.delete(MySQLiteHelper.TABLE_GRADES, MySQLiteHelper.COLUMN_ID +
 * " = " + id, null); }
 */

public List<Grade> getAllGrades() {
    List<Grade> grades = new ArrayList<Grade>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_GRADES, allColumns,
            null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Grade grade = cursorToGrade(cursor);
        grades.add(grade);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return grades;
}

private Grade cursorToGrade(Cursor cursor) {
    Grade grade = new Grade();
    grade.setId(cursor.getLong(0));
    grade.setGrade(cursor.getString(1));
    return grade;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:36:52.720

在 null 后添加一个空格：

```
+ " text not null, " + COLUMN_MODULE + " text not null" + ");"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:05:33.703

在 cursorToGrade() 函数中，从 db 获取值时，您应该使用类似这样的东西，而不是硬编码 0 和 1。

```
grade.setId(cursor.getLong(cursor.getColumnIndex(MySQLiteHelper.COLUMN_ID ));
grade.setGrade(cursor.getString(cursor.getColumnIndex(MySQLiteHelper.COLUMN_MODULE)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:11:18.170

请参阅此列**COLUMN_GRADE + " text not null"**您在 null 后缺少**逗号 (,) 和空格**。

```
private static final String DATABASE_CREATE = "create table " + TABLE_GRADES 
        + "(" + COLUMN_ID + " integer primary key autoincrement, " 
        + COLUMN_GRADE + " text not null" 
        + COLUMN_MODULE + " text not null" + ");"; 
```

您的创建表查询首先是错误的，请更正它。

```
private static final String DATABASE_CREATE = "create table " + TABLE_GRADES + "(" 
        + COLUMN_ID + " integer primary key autoincrement, " 
        + COLUMN_GRADE + " text not null, " 
        + COLUMN_MODULE + " text not null" + ");"; 
```

更正此创建查询并删除数据库或卸载您的应用程序并再次运行您的应用程序并检查它。

我希望它对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:27:45.607

您忘记了`,`字符串中列名后的简单名称。这就是你得到的原因`Column Not Found`。改变

```
private static final String DATABASE_CREATE = "create table "
        + TABLE_GRADES + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_GRADE
        + " text not null" + COLUMN_MODULE + " text not null" + ");"; 
```

至

```
private static final String DATABASE_CREATE = "create table "
        + TABLE_GRADES + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_GRADE
        + " text not null, " + COLUMN_MODULE + " text not null" + ");"; 
```

希望这可以帮助。

# macos - 无法使用 NSWorkspace launchApplicationAtURL:options:configuration:error 在 Mac OS X 10.8 中启动另一个应用程序

> ID：16159622
> 
> 赞同：1
> 
> 时间：2013-04-23T01:56:55.990
> 
> 标签：macos, cocoa, sandbox, launch, nsworkspace

我正在使用 NSWorkspace launchApplicationAtURL:options:configuration:error 启动另一个应用程序。

该应用程序归 root 所有，具有权限：rwx rx rx，并归 root:wheel 所有。
该应用程序也位于/Applications 文件夹中（例如/Application/MyApp.app）。
根据“使用启动服务启动助手”部分下的以下链接：http: [//developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html)
我应该能够启动我的应用程序，因为满足以下条件：

> 该应用程序安装在 /Applications 和应用程序包中，所有内容都归 root 所有。

启动应用程序时，我收到以下错误：

> “应用程序“MyApp”已损坏，无法启动。”
> “操作无法完成。（OSStatus 错误 -10827。）”

也就是说，根据同一个链接，当没有满足任何条件时的错误。
请注意，我使用的是 Mac OS X 10.8。在 Mac OS X 10.7.5 中，我没有遇到同样的问题。
另请注意，我正在尝试在沙盒应用程序中运行应用程序“MyApp”。
我尝试使用 2 个版本的“MyApp”，但在两个版本中，问题都可以复制：

1.  代码签名（使用自签名证书）
2.  没有代码签名

似乎是什么问题？我错过了什么吗？

# node.js - 在 node 项目源代码管理中存储 npm 模块的位置

> ID：16159632
> 
> 赞同：4
> 
> 时间：2013-04-23T01:58:14.207
> 
> 标签：node.js, deployment, npm

好的，我有一点奇怪的情况。我有一个节点应用程序将交付给无法访问互联网的系统。我的 package.json 文件中有我所有的 deps，但是当我交付服务器时，我无法运行 npm install。

目前 node_modules 目录正在被检入 SVN。到目前为止，我讨厌这个，因为每次我需要获取模块的更新版本时，我都会从 SVN 中删除整个模块，安装更新版本，将其添加到 SVN 并签入。

我的其他选择是在打包节点应用程序以进行交付时进行某种构建，该构建会执行 npm install。也许从 SVN 签出的东西，npm 安装并创建必要的 tarball 或 rpm。

我过去曾为 ruby​​ 使用过'bundler'，这非常好，因为你只需将所有的 deps 放在另一个目录中，它就会拉入这些 deps。如果您处于离线状态，效果很好。节点有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T07:01:22.967

在寻找类似的答案时，我发现了这篇关于为什么将完整的**node_modules 保留**在源代码控制中的意义的文章：

[git中的节点模块](http://www.futurealoof.com/posts/nodemodules-in-git.html)

虽然它是从 2011 年 12 月 10 日开始的，但现在*可能*有点过时了。

**更新**：在 2014 年 1 月，将所有**node_modules**存储在源代码管理中的建议仍然适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-13T07:11:26.523

有一个名为[shrinkpack](https://github.com/JamieMason/shrinkpack)的 CLI可以帮助您管理这个。

它通过读取生成的依赖关系图`npm shrinkwrap`并重新指向每个依赖项（和子依赖项）的**https://** url 来代替指向项目中**node_shrinkwrap**目录中的 tarball 来工作。

node_shrinkwrap目录包含与从 npm 注册表下载的完全相同的 .tgz 文件，并且 - 由于存在**文件****（**由创建和更新） -知道使用本地找到的 tarball 进行安装，而不是通过网络访问 npm 注册表.`npm install``npm-shrinkwrap.json``npm shrinkwrap``shrinkpack``npm install`

```
npm install -g shrinkpack 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:45:56.523

我也面临着类似的部署场景，我从搜索中遵循的解决方案依赖于使用 make（unix 工具）并编写我自己的 Makefile。Makefile 是一个文本文件，它遵循特定的格式，您可以在其中创建目标，例如：测试、发布、安装。每个目标都是一段 Bash 代码，当您从命令行调用时会运行，例如：'make publish ' 或者您可以将它们链接在一起，例如 'make test publish'。

因此，在我的场景中，我有一个执行测试的“测试”目标，然后我有一个执行几件事的“发布”目标，例如调用“npm install”然后“npm prune”（删除我停止使用的旧 npm 依赖项）。然后通过将文件夹的 gzip 压缩到一个单独的位置来完成“发布”，然后将代码推送到我的生产服务器可以从中下载和解压缩的 Intranet 位置。所有 node_modules 代码都在 zip 文件中。在生产服务器上，运营团队提取 gzip，然后调用“make start”。'start' 只是设置任何环境变量并启动我的节点应用程序的另一个目标。

总而言之，我在源代码控制中有我的 node_modules 并且我发现 makefile 非常可定制，因此它非常适合具有不同需求的不同项目，但是您可以保持目标命名的约定，因此对其他团队来说很容易-工作人员和 DevOps 来测试/发布/安装您的应用程序。

问候，路易斯。

# javascript - jQuery插件剪切了我的输入并将其设置在表单之外

> ID：16159635
> 
> 赞同：3
> 
> 时间：2013-04-23T01:58:36.877
> 
> 标签：javascript, jquery, jqxwidgets

我在我的jsp页面上的表单中使用jqx下拉按钮。

当我将它们设置为以下

```
<form name="myForm">

    <input type="button" value="one" onclick="validate(this.form);">

        <div style="float: left;" id="dropDownButton">
              <div style="border: none; display: none;" id='jqxTree'>
            <ul>
               <li>
              <input type="button" value="two" onclick="validate(this.form);">
               </li>
               <li>
               <input type="button" value="three" onclick="validate(this.form);">
               </li>
              </ul>
           </div>
        </div>

    <input type="button" value="four" onclick="validate(this.form);">

    </form> 
```

以及以下获得我想要的东西：

```
$("#dropDownButton").jqxDropDownButton({ width: 90, height: 22, theme: theme }); 
```

这样做它会以某种方式将 dropDownButton div 设置为表单之外，并且它显然会抛出错误，说 this.form 是未知的。

如何解决此问题，或者是否可以将外部元素分配回我的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:45:34.307

没有看到任何 CSS，很难说为什么有些东西可能会错位。可以肯定的一件事是您的输入标签格式不正确。这些应该是自动关闭`<input type="button" />`的——结尾`/>`是关键，所以他们不是在寻找结束标签。

我还建议不要使用内联`onclick`属性来调用验证函数。这一切都可以通过一个简单的 JS 函数来完成。所以这是我提出的修订：

这是清理后的 HTML

```
<form name="myForm" id="myForm">

    <input type="button" value="one"/>

    <div style="float: left;" id="dropDownButton">
        <div id='jqxTree'>
            <ul>
                <li>
                    <input type="button" value="two"/>
                </li>
                <li>
                    <input type="button" value="three"/>
                </li>
            </ul>
        </div>
    </div>

    <input type="button" value="four"/>

</form> 
```

这里是 JavaScript/jQuery

```
$(function(){
    //Hide the dropdown with JS, then call the plugin
    $("#dropDownButton")
        .hide()
        .jqxDropDownButton({
            width: 90,
            height: 22,
            theme: theme
        });

    //Save the form to a variable so we only have to select it once
    var $theForm = $("#myForm");

    //Find all the buttons inside the form, then attach a click event
    $theForm
        .find("input[type='button']")
        .on("click",function(){
            //Pass the form into the validate function when a button is clicked
            validate(theForm);
        });

}); 
```

# python - 将 Stripe 与 Flask 集成时，如何防止表单提交到服务器？

> ID：16159637
> 
> 赞同：2
> 
> 时间：2013-04-23T01:58:44.940
> 
> 标签：python, flask, forms, stripe-payments

我一直在关注 Stripe 的教程，使用他们的 API 创建我自己的表单。长话短说，当提交表单时，会发生一些 Javascript 将数据发送到他们的服务器，然后附加`stripeToken`输入字段。然后再次提交表单，我的 Flask 应用程序应该读取这个新表单字段的值。但是，当我尝试运行我的代码时，它会产生 500 Internal Server Error，我认为这是因为 Flask 正在立即查找表单`stripeToken`，而它在第一次检查时并不存在。是否有 Javascript 或 Python 可以添加，`request.form['stripeToken']`直到 Stripe 添加后才调用？

这是我的相关 HTML：

```
<head>
    <title>Settings</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://js.stripe.com/v1/"></script>
    <script type="text/javascript">
    // This identifies your website in the createToken call below
    Stripe.setPublishableKey('STRIPE_TEST_KEY');

    var stripeResponseHandler = function(status, response) {
      var $form = $('#payment-form');

      if (response.error) {
        // Show the errors on the form
        $form.find('.payment-errors').text(response.error.message);
        $form.find('button').prop('disabled', false);
      } else {
        // token contains id, last4, and card type
        var token = response.id;
        // Insert the token into the form so it gets submitted to the server
        $form.append($('<input type="hidden" name="stripeToken" id="stripeToken" />').val(token));
        // and re-submit
        $form.get(0).submit();
      }
    };

    jQuery(function($) {
      $('#payment-form').submit(function(e) {
        var $form = $(this);

        // Disable the submit button to prevent repeated clicks
        $form.find('button').prop('disabled', true);

        Stripe.createToken($form, stripeResponseHandler);

        // Prevent the form from submitting with the default action
        return false;
      });
    });
  </script>
</head>

<body>
    <div id="payments">
        <h1>Add a credit card</h1>
        <form action="{{ url_for('stats') }}" method="POST" id="payment-form"> 
```

这是Python：

```
@app.route('/stats', methods=['GET', 'POST'])
def stats():
#if signed in as user       
if session['signed-in-accttype'] == 'u':
    u=User.query.get(session['signed-in-id'])
    if request.method == 'POST': 
            stripe.api_key = "STRIPE_TEST_KEY"
            token = request.form['stripeToken']

        customer = stripe.Customer.create(
            card=token,
            description=u.uemail
            )
        #update stripe id
        u.ustripe_id = customer.id
        db.session.commit()
        return redirect(url_for('stats'))       
    return render_template('settings.html', u=u) 
```

和日志：

```
2013-04-23T01:57:39.590458+00:00 app[web.1]: 10.44.13.218 - - [2013-04-23 01:57:39] "GET /stats HTTP/1.1" 200 2348 0.014429
2013-04-23T01:57:39.590171+00:00 heroku[router]: at=info method=GET path=/stats host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=3ms service=19ms status=200 bytes=2230
2013-04-23T01:57:39.804162+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=1ms service=4ms status=404 bytes=238
2013-04-23T01:57:39.808201+00:00 app[web.1]: 10.127.113.186 - - [2013-04-23 01:57:39] "GET /favicon.ico HTTP/1.1" 404 347 0.000610
2013-04-23T01:57:54.934252+00:00 heroku[router]: at=info method=POST path=/stats host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=1ms service=24ms status=500 bytes=291
2013-04-23T01:57:54.931497+00:00 app[web.1]: 10.92.74.166 - - [2013-04-23 01:57:54] "POST /stats HTTP/1.1" 500 412 0.020936
2013-04-23T01:57:55.133776+00:00 app[web.1]: 10.44.58.92 - - [2013-04-23 01:57:55] "GET /favicon.ico HTTP/1.1" 404 347 0.000603
2013-04-23T01:57:55.137417+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=24ms service=43ms status=404 bytes=238
2013-04-23T01:57:58.710721+00:00 heroku[router]: at=info method=GET path=/stats host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=1ms service=15ms status=200 bytes=2230
2013-04-23T01:57:58.714328+00:00 app[web.1]: 10.44.45.210 - - [2013-04-23 01:57:58] "GET /stats HTTP/1.1" 200 2348 0.012623
2013-04-23T01:57:58.826291+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=ancient-oasis-5770.herokuapp.com fwd="99.110.189.136" dyno=web.1 connect=1ms service=3ms status=404 bytes=238
2013-04-23T01:57:58.827469+00:00 app[web.1]: 10.44.13.218 - - [2013-04-23 01:57:58] "GET /favicon.ico HTTP/1.1" 404 347 0.000772 
```

更新：这是在本地运行的回溯）

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/Zach/Desktop/t/t.py", line 20, in stats
    stripe.api_key = "STRIPE_TEST_KEY"
NameError: global name 'stripe' is not defined
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=jquery.js HTTP/1.1" 200 -
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=source.png HTTP/1.1" 200 -
127.0.0.1 - - [22/Apr/2013 22:11:03] "GET /stats?__debugger__=yes&cmd=resource&f=ubuntu.ttf HTTP/1.1" 200 - 
```

更新 2：我推断出我的本地测试脚本上的上述错误是因为我忘记了`import stripe`. 这样做使它运行良好。但是，同样的代码在 Heroku 上运行时会继续产生 500 错误。

更新 3（启示）：所以我的 Stripe 仪表板说我确实在创建新用户。因此，我认为可以公平地假设直到（包括）之前的所有代码都`customer = stripe.Customer.create`有效。那么500错误可能是由我修改数据库引起的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:29:16.820

NameError：未定义全局名称“条纹”

看起来你忘记了 import `stripe`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:50:56.547

在检查了我的 Stripe 仪表板后，我意识到客户的创建是正确的。所以错误在于以下代码，我在其中更新数据库中用户的 stripe_id。问题是条带 id 的 Flask 列需要一个整数。然而，Stripe 将 id 分配为字符串。

# php - 从 mysql 数据库回显数据

> ID：16159640
> 
> 赞同：-3
> 
> 时间：2013-04-23T01:58:53.610
> 
> 标签：php, mysql

嗨，大家有一个美好的一天。我有一个关于从 mysql 数据库中回显值的问题现在我有一个表名--->`materialachievement` 在表内我有 3 列（章节、子章节和部分）

数据如下：

```
chapter      subchapter         part
-------------------------------------
2               2.1               1
2               2.1               2
2               2.1               3
2               2.2               1
2               2.2               2
3               3.1               1
3               3.1               1
------------------------------------- 
```

现在我想做一个表格来呼应第 2 章和第 3 章，第 2 章内有第 2.1 小节，第 2.1 小节内有第 2.2 小节，第 2.1 小节有第 1、2、3 部分，第 2.2 小节内有第 1、2 部分

结构如下：

```
2
 2.1
    1
    2
    3
 2.2
    1
    2 
```

所以我的问题是我怎样才能只重复第 2 章，然后重复第 2.1 小节，然后转到第 1、2、3 部分？与第 2.2 章相同。

```
$query="SELECT * FROM materialachievement WHERE sID=$id GROUP BY (chapter and subchapter) ORDER BY chapter ASC , subchapter ASC ";

$result=mysql_query($query,$conn);

if($result === FALSE) 
{
die(mysql_error()); // TODO: better error handling
}

while($row=mysql_fetch_array($result))
{
    $chapter = $row['chapter'];
    $subchapter = $row['subchapter'];

    echo "<br>Chapter :".$chapter."<br>";
    echo "<br>Subchapter :".$subchapter."<br>";
} 
```

现在的结果假设是：第 2 章、第 2.1 小节、第 2.2 小节、第 2.3 小节和第 3 章、第 3.1 小节、第 3.2 小节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:16:54.830

希望这有帮助

```
$data=array();
$data[] = array("chapter" => "2",                "subchapter" => "2.1",               "part" => "1"              );
$data[] = array("chapter" => "2",                "subchapter" => "2.1",               "part" => "2"              );
$data[] = array("chapter" => "2",                "subchapter" => "2.1",               "part" => "3"              );

$data[] = array("chapter" => "2",                "subchapter" => "2.2",               "part" => "1"              );
$data[] = array("chapter" => "2",                "subchapter" => "2.2",               "part" => "2"              );

$data[] = array("chapter" => "3",                "subchapter" => "3.1",               "part" => "1"              );
$data[] = array("chapter" => "3",                "subchapter" => "3.1",               "part" => "1"              );

$new_array=array();

foreach($data AS $v){

    if(!array_key_exists($v['chapter'],$new_array )){
        $new_array[$v['chapter']]=array();
    }
     if(!array_key_exists($v['subchapter'],$new_array[$v['chapter']]) ){
        $new_array[$v['chapter']][$v['subchapter']]=array();
    }
    $new_array[$v['chapter']][$v['subchapter']]=$v['part'];

}

print_r($new_array); 
```

输出

```
 Array
(
    [2] => Array
        (
            [2.1] => 3
            [2.2] => 2
        )

    [3] => Array
        (
            [3.1] => 1
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:24:12.723

```
$query="SELECT * FROM materialachievement WHERE sID=$id ORDER BY chapter ASC, subchapter ASC, part ASC ";

$result=mysql_query($query,$conn);

if($result === FALSE) 
{
die(mysql_error()); // TODO: better error handling
}

$last_chapter = null;
while($row=mysql_fetch_array($result))
{
    $chapter = $row['chapter'];
    $subchapter = $row['subchapter'];
    $part = $row['part'];
    if ($last_chapter !=== $chapter) {
        echo "Chapter: $chapter<br>";
        $last_chapter = $chapter;
        $last_subchapter = null;
    }
    if ($subchapter !== $last_subchapter) {
        echo "Subchapter: $subchapter<br>";
        $last_subchapter = $subchapter;
    }
    echo "Part: $part<br>";
} 
```

# html - 网站没有显示更新版本，后来显示更新版本没有我改变任何东西

> ID：16159641
> 
> 赞同：1
> 
> 时间：2013-04-23T01:58:57.973
> 
> 标签：html, web

我最近接管了更新网站。当我尝试更改主页时，我发现 domain.com/index.html 已正确更新，但 domain.com 本身仍然显示旧版本的页面。一段时间后，在我没有做任何更改的情况下，最终 domain.com 开始显示新版本的页面。

我最初的想法是，这与我的浏览器缓存旧主页有关，但在进行了一些谷歌搜索后，我了解到浏览器应该在加载任何缓存的页面之前检查更新（至少默认情况下）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:01:31.563

网页缓存在大多数浏览器中是一般行为，除非用户更改，以下代码将始终发出新请求并忽略已定义网页的任何存储缓存

`<META HTTP-EQUIV="Pragma" CONTENT="no-cache">`

把它放在你的. 里面`<head></head>`，还要注意这并不总是在所有版本的 IE 中都有效，因为页面在加载之前没有填充 64K 缓冲区`Pragma`，因此意味着页面被缓存，以确保非缓存您可以简单地添加另一行

`<META HTTP-EQUIV="Expires" CONTENT="-1">`

# html - 嵌入在 HTML 中的 Flash 不会出现在 Chrome 中，而只会出现在 Safari 中

> ID：16159647
> 
> 赞同：0
> 
> 时间：2013-04-23T01:59:22.570
> 
> 标签：html, flash, interactive

我正在编写交互式短篇小说并将我的 Flash 嵌入到我的 HTML 页面中，但它根本没有播放。这只是一个黑屏。不过，使用 Safari 时动画播放良好。欢迎尽快提供帮助。这是我用来嵌入 swf 文件的代码：

```
<div id="sleepingvideo">
    <object width="720" height="510">
        <param name="movie" value="SC_Flash.swf" />
        <param name="allowfullscreen" value="true" />
        <param name="scale" value="noScale" />
        <param name="salign" value="lt" />
        <param name="allowscriptaccess" value="always" />
        <param name="flashvars" value="path=deuter" />
        <embed margin-height="100" width="600" height="400" src="survey.swf"
               flashvars="path=deuter" allowfullscreen="true"
               allowscriptaccess="always" name="player1" scale="noScale"
               salign="lt"></embed>
    </object>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:17:06.957

我建议您使用[SWFObject](https://code.google.com/p/swfobject/)进行 Flash 嵌入。它无处不在。

# java - 如何将paintComponent(Graphics g)与MouseListener和MouseMotionListener结合起来

> ID：16159651
> 
> 赞同：0
> 
> 时间：2013-04-23T02:00:30.240
> 
> 标签：java, swing, jpanel, paintcomponent, mouselistener

因此，我尝试将paintComponent() 的使用以及MouseListener 和MouseActionListener 的使用结合起来，但是当我运行它时出现很多错误，并且它不起作用，因为我想要它。在这段代码中，我希望程序在你按下、拖动和释放按钮时，获取按下的坐标，然后是释放的坐标，然后测量形状有多大，并绘制指定的形状通过 JComboBox。我还有 JFrame 底部带有按钮的颜色选择器。我想知道如何在不自动运行的情况下运行 paintComponent() 方法，这样我就可以在它绘制之前给它规范，并让它按需绘制。另外，我想知道是否有另一种方法可以做到这一点，我完全错了我如何接近它。我希望解释是' 太混乱了:)。任何帮助都很棒，谢谢！

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

@SuppressWarnings({"unchecked", "rawtypes"})
public class GraphicGUI extends JPanel implements ActionListener  {

    HandlerClass handler = new HandlerClass();

    public int x1, x2, y1, y2, width, height;
    public String event;
    public JButton colorChooserButton;
    public Color color = (Color.WHITE);
    public JComboBox shapeBox;
    public JLabel eventLabel;

    public GraphicGUI(){
        shapeBox = new JComboBox();
        eventLabel = new JLabel();
        colorChooserButton = new JButton("Choose a color");
        colorChooserButton.addActionListener(this);

        shapeBox.addItem("Oval");
        shapeBox.addItem("Rectangle");
        shapeBox.addItem("Line");

        super.addMouseListener(handler);
        super.addMouseMotionListener(handler);
    }

    public void actionPerformed(ActionEvent arg0){
        if(arg0.getSource().equals(colorChooserButton)){
            color = JColorChooser.showDialog(null, "Pick Your Color", color);
            if(color==null){
                color = (Color.BLACK);
            }
        }
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        this.setBackground(Color.white);
        if(shapeBox.getSelectedItem() == "Oval")
            if(event.equals("released")){
                width = x1-x2;
                height = y1-y2;
                g.setColor(color);
                g.fillOval(x1, y1, width, height);
            }
    }

    private class HandlerClass implements MouseListener, MouseMotionListener{

            //Mouse Events
            public void mouseClicked(MouseEvent arg0){
                event = "click";
            }
            public void mousePressed(MouseEvent arg0){
                event = "pressed";
                x1 = arg0.getX();
                y1 = arg0.getY();
                eventLabel.setText(String.format("Mouse pressed at %d, %d", x1, y1));
            }
            public void mouseReleased(MouseEvent arg0){
                event = "released";
                x2 = arg0.getX();
                y2 = arg0.getY();
                eventLabel.setText(String.format("Mouse released at %d, %d", x2, y2));
            }
            public void mouseEntered(MouseEvent arg0){
            }
            public void mouseExited(MouseEvent arg0){
            }

            //Mouse Motion Events
            public void mouseDragged(MouseEvent arg0){
            }
            public void mouseMoved(MouseEvent arg0){
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:08:47.907

您应该开始绘制形状。

```
public void paintComponent(Graphics g){
    //Draw the oval
    g.setColor(color);
    g.fillOval(x1, y1, width, height);
}

public void mouseReleased(MouseEvent arg0){
    event = "released";
    x2 = arg0.getX();
    y2 = arg0.getY();       
    if( x2 > x1 ) {
        width = x2-x1;
    } else {
        width = x1-x2;
    }       
    if( y2 > y1 ) {
        height = y2-y1;
    } else {
        height = y1-y2;
    }
    eventLabel.setText(String.format("Mouse released at %d, %d", x2, y2));  
} 
```

然后（如果您想添加更多形状）您需要一种添加形状的方法（duh），因此您可以拥有一个形状列表并遍历该列表。

而且您确实应该（必须）初始化所有变量。

询问您是否需要更多详细信息。:)

# javascript - jQuery地址在刷新时不起作用

> ID：16159653
> 
> 赞同：0
> 
> 时间：2013-04-23T02:00:36.203
> 
> 标签：javascript, jquery, browser, browser-history

我正在使用 Asual 的 jQuery Address 插件在不使用哈希的情况下在内容之间进行深度链接（使用 HTML5 History API）。

这是我的代码：

```
$.address.state("/").init(function(e){
    $('#nav li a').address(); // initializes
    if (e.value == "/") {
        $.address.value("/home"); // loads /home by default
    };
});

$.address.change(function(e) {
    // loads whatever page is in that /pages folder and puts the content in div#container
    $.get("/pages" + e.value + ".html", function(data, textStatus, xhr) {
        $('#container').html(""); //clears out the old content
        $('#container').html(data); //loads the new page in there
    });
}); 
```

单击顶部导航按钮时，这非常有效。甚至浏览器中的后退和前进按钮也很有效。问题是在另一个选项卡中刷新/打开 url 时。例如，如果我写[http://domain.com](http://domain.com)它会让我访问[http://domain.com/home](http://domain.com/home)并显示内容。如果我刷新我得到一个 404 错误。浏览器正在寻找一个实际不存在的 /home 文件（取而代之的是 home.html）。

有任何想法吗？谢谢！

DD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:12:14.100

我试图做同样的事情并遇到同样的问题，最终使用哈希。

# .net - 更改 .net dll 中的代码

> ID：16159654
> 
> 赞同：0
> 
> 时间：2013-04-23T02:00:54.107
> 
> 标签：.net, reflection, dll, replace

我有一个包含 20 多个项目的大型 .net 解决方案。它由 1 个可执行文件和许多 dll 组成。

对我们的 SOE 的更改破坏了该应用程序。

我需要能够在说.net反射器（或类似的东西）中打开可执行文件和一个dll，在两个地方更改添加3行代码，然后重新编译这两个文件然后我会发送一个错误使固定，

有人可以为我指出这种事情的正确方向吗？

关于巴兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:02:49.113

你在正确的轨道上。在 .NET Reflector 或您选择的 .dll 反编译器中打开有问题的 .dll 后，您应该能够提取源代码并在 Visual Studio（或您选择使用的任何编辑器）中进行编辑。完成编辑后，您将不得不重新编译代码，您的 .dll 应该可以使用了。我希望这回答了你的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:05:18.593

如果程序集已签名（强名称程序集），则需要使用开发中使用的相同密钥对其进行签名。否则这应该工作。

# windows - win8 HttpClient 自动重定向

> ID：16159659
> 
> 赞同：0
> 
> 时间：2013-04-23T02:01:05.407
> 
> 标签：windows, microsoft-metro

当我使用 HttpClient.GetAsync(url) 时，该 url 不是可访问的地址，但它总是重定向到另一个地址，并返回一个 ok 的状态码。

```
var httpClient = new HttpClient(handler);
        httpClient.DefaultRequestHeaders.ExpectContinue = false;
        //using ()
        {
            HttpResponseMessage response = new HttpResponseMessage();
            response = await httpClient.GetAsync(url);

            if (response.IsSuccessStatusCode)
            {
                var result = response.Content.ReadAsStringAsync();
                Debug.WriteLine(response.StatusCode.ToString());
            }
            else
            {
                // problems handling here
                Debug.WriteLine(
                    "Error occurred, the status code is: {0}",
                    response.StatusCode
                );
            }
        } 
```

# highcharts - Highcharts - 工具提示 / yaxis zindex 问题

> ID：16159660
> 
> 赞同：0
> 
> 时间：2013-04-23T02:01:17.277
> 
> 标签：highcharts

我遇到的问题是我的折线图上前几个点的工具提示位于 Y 轴上的值后面。我认为这只是工具提示和 yaxis 之间的 z-index 问题。

我不确定解决此问题的正确方法，如果有一些我应该使用的选项，或者这是需要解决 CSS 的问题。

直到我将 yaxis 更改为使用 HTML，这个问题才开始发生。也许是我的格式造成的？

```
yAxis: {
    labels: {
useHTML:true,   
formatter: function() {
    var amount = this.value;

    if(this.value > 0 ){
        return  '<span class="format_positive">'  + amount + '</span>';
    } else {
        return  '<span class="format_negative">' + '(' + amount + ')' + '</span>'
    }

    }},
    alternateGridColor: '#F5F5F5',
    minorTickInterval: 'auto',
    lineWidth: 1,
    tickWidth: 1,
    title:{ text: 'Total Amounts'}
    } 
```

# javascript - Javascript - 检查表单字段值并在值为 0 时显示错误消息

> ID：16159665
> 
> 赞同：1
> 
> 时间：2013-04-23T02:02:02.467
> 
> 标签：javascript, jquery

我有一个在 html 表单上运行的 Javascript，它根据用户输入的值执行一些计算，然后将结果输入到其他一些字段中。这一切都运作良好。这是 HTML 的样子：

```
<table width="100%" border="0" cellspacing="0" cellpadding="10" class="border" id="calcs">
  <tr class="d_green">
    <td colspan="4">LAST YEAR</td>
    </tr>
  <tr class="l_white">
    <td width="53%">number of instances in the last year </td>
    <td width="13%" align="right"><input name="textfield1" type="text" class="input_b_r" id="textfield1" value="0" /></td>
    <td width="24%">&nbsp;</td>
    <td width="10%">&nbsp;</td>
  </tr>
  <tr class="l_green">
    <td>average number of moderate-risk activity per week in the last year</td>
    <td align="right"><input name="textfield2" type="text" class="input_b_r" id="textfield2" value=""/></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="l_white">
    <td>average number of hours of high-risk activity per week in the last year</td>
    <td align="right"><input name="textfield3" type="text" class="input_b_r" id="textfield3" value=""/></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="d_green">
    <td colspan="4">NEXT YEAR</td>
  </tr>
  <tr class="l_white">
    <td>expected average number of hours of moderate-risk activity per week next year</td>
    <td align="right"><input name="textfield4" type="text" class="input_b_r" id="textfield4" value=""/></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="l_green">
    <td>expected average number of hours of high-risk activity per week next year</td>
    <td align="right"><input name="textfield5" type="text" class="input_b_r" id="textfield5" value=""/></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="l_white">
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="l_green">
    <td>&nbsp;</td>
    <td colspan="2" style="padding-left:31px;"><input type="submit" name="button" id="Calculate" value="Calculate" class="button_calculate" /></td>
    <td>&nbsp;</td>
  </tr>
  <tr class="l_white">
    <td>&nbsp;</td>
    <td colspan="2" style="padding-left:105px;">predicted number of instances next year</td>
    <td><input name="textfield6" type="text" class="input_b" id="textfield6" /></td>
  </tr>
  <tr class="l_green">
    <td>&nbsp;</td>
    <td colspan="2" style="padding-left:105px;">extra instances next year</td>
    <td><input name="textfield7" type="text" class="input_b" id="textfield7" /></td>
  </tr>
</table> 
```

这是Javascript：

```
$(document).ready(function(){

        $('#Calculate').click(function(){

            var IRRC2 = 1.35;
            var IRRC3 = 2.75;

            var Npast = Number($("#textfield1").val());
            var t2hrswk = Number($("#textfield2").val());
            var t3hrswk = Number($("#textfield3").val());
            var t2nexthrswk = Number($("#textfield4").val());
            var t3nexthrswk = Number($("#textfield5").val());

            var t2epyr = t2hrswk * 6 * 52;
            var t3epyr = t3hrswk * 6 * 52;
            var t01epyr = 52 * 7 * 24 * 6 - t2epyr - t3epyr;

            var epochBaseInstances = Npast / (t01epyr + IRRC2 * t2epyr + IRRC3 * t3epyr);

            var baselineCoefficient = Math.log(epochBaseInstances);

            var t2nextepyr = t2nexthrswk * 6 * 52;
            var t3nextepyr = t3nexthrswk * 6 * 52;
            var t01nextepyr = 52 * 7 * 24 * 6 - t2nextepyr - t3nextepyr;

            var predictedInstances = Math.exp(baselineCoefficient) * (t01nextepyr + IRRC2 * t2nextepyr + IRRC3 * t3nextepyr);

            var roundedPredictedInstances = Math.round( predictedInstances * 10 ) / 10;

            var lastYearTotal = Number($("#textfield1").val());

            var extraInstancesRounded = Math.round( (roundedPredictedInstances - lastYearTotal) * 10 ) / 10;

            $('#textfield6').val(roundedPredictedInstances);
            $('#textfield7').val(extraInstancesRounded);
        });
    }); 
```

我知道需要修改它，以便当用户单击“计算”按钮时第一个表单字段 (textfield1) 的值为 0，它会检测到这一点然后退出，显示错误消息（例如“去年的值不能为零”）。

到目前为止，我尝试过的一切都破坏了 Javascript - 感谢有关如何继续的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T02:05:27.683

试试这个代码，就在声明之后`Npast`：

```
var Npast = Number($("#textfield1").val());
if (Npast === 0) {
    alert("the value for Last Year cannot be zero");
    return;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T02:10:50.500

将此条件语句添加到底部：

```
if ( !Npast ) {
    alert('Error!');
    return false;
} 
```

这是修复的工作演示：http: [//jsfiddle.net/38PGy/](http://jsfiddle.net/38PGy/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T02:09:00.227

试试这个

```
var last_year = $("#textfield1").val();
if (last_year == 0) {
    alert("The value for Last Year cannot be zero, please enter valid number");
    return;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T03:37:29.790

您可以尝试为您的文本字段添加验证，

**这是一个示例：**

```
$(document).ready(function(){
    $('#Calculate').on('click',function(){
        if (!validateTextField()){
            alert('no zeroes');
        } else {
            alert('zeroes');
        }
    });
});

function validteTextField(){
    //$('input[id^=textfield]') --> selects all input with id having a prefix textfield
    $('input[id^=textfield]').css('background-color','white');
    var flg = false;
    $('input[id^=textfield]').each(function(){
        if ($(this).val() === 0 || $(this).val().length === 0){
            $(this).css('background-color','pink');
            flg = true;
        }            
    });
    return flg;
} 
```

[jsFiddle 演示](http://jsfiddle.net/WWDHn/)

# xml - Understand the DOM in xml

> ID：16159668
> 
> 赞同：0
> 
> 时间：2013-04-23T02:02:25.207
> 
> 标签：xml, dom

```
#include <stdio.h>
20 #include <stdlib.h>
21 #include <string.h>
22 #include <libxml/tree.h>
23 #include <libxml/parser.h>
24 
25 
26 
27 xmlNodePtr get_child_element_by_name(const xmlNodePtr parent_element, const xmlChar* child_name);
28 
29 int main(int argc, const char *argv[])
30 {
31   const char * xmlPath=argv[1];·
32   xmlDocPtr xmldp=xmlParseFile(xmlPath);
33   if ( !xmldp )
34     return 1;
35 
36   printf("Target xml file: %s\n",xmldp->URL);
37 
38   xmlNodePtr root_element=xmlDocGetRootElement(xmldp);
39 
40   xmlNodePtr tmp=get_child_element_by_name(root_element,"Referenc");
41 
42   if (tmp)
43     printf("found %s\n",tmp->name);
44 
45 
46   return 0;
47 }
48 
49 xmlNodePtr get_child_element_by_name(const xmlNodePtr parent_element, const xmlChar* child_name){
50   if (parent_element == NULL)
51     return NULL;
52 
53   xmlNodePtr child_ele = parent_element->children;
54   xmlNodePtr last_ele = parent_element->last;
55 
56   for (; child_ele; child_ele=child_ele->next){
57     printf("Current child:%s\n",child_ele->name);
58 
59     if (0 == strcmp(child_name, child_ele->name))
60         return child_ele;
61   }
62   return NULL;
63 } 
```

Use this code to parse the following this xml: [http://schemas.dmtf.org/ovf/envelope/1/dsp8023_1.0.xsd](http://schemas.dmtf.org/ovf/envelope/1/dsp8023_1.0.xsd)

the output:

```
Current child:text
Current child:import
Current child:text
Current child:import
Current child:text
.... 
```

Why so many text node? How is text node arranged inside the DOM? I understand that anything inside dom is node and text node is used to store text content of a element. However, this output makes no sense for me. Any helpful insights? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:04:20.053

Every newline and indentation at the end of an `<import/>` element must be represented as a text node.

# ocaml - 涉及列表的 OCaml 错误

> ID：16159675
> 
> 赞同：4
> 
> 时间：2013-04-23T02:03:51.070
> 
> 标签：ocaml

我对 OCaml 还是很陌生，希望在优化代码方面得到一些帮助。

我试图将给定列表的每个元素乘以列表的最后一个元素。

这是我的代码片段：

```
(* Find the last element of a function *)
let rec lastE = function
| [] -> []
| [x] -> x
| _ :: t -> lastE t;;

(*multiply a list by the last element*)
let rec lmul list =
match list with
[] -> []
| hd::tl -> (hd *. (lastE tl)) :: lmul tl;; 
```

当我运行代码时，我收到此错误消息：

```
Error: This expression has type float list but 
an expression was expected of type 'a list list 
```

我已经研究了一段时间，但是对于这个问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:39:34.013

换一种说法，戴夫纽曼告诉你的是，你的基本问题是`lastE`需要以不同的方式处理一个空列表。如果`lastE`应该返回一个数字，它必须在所有情况下都返回一个数字。就目前而言，`lastE`当它收到一个空列表时返回一个列表。

如果您不想使用`List.map`（再次像 Dave Newman 建议的那样），您至少可以考虑`lastE`只调用一次而不是为列表的每个元素调用一次。这将对长列表产生很大的影响。

# c# - ComboBox 绑定到自定义 ViewModel

> ID：16159681
> 
> 赞同：0
> 
> 时间：2013-04-23T02:04:34.360
> 
> 标签：c#, wpf, xaml, data-binding, mvvm

我正在开发一个 WPF 项目。这是我的 XAML 代码：

```
<Window x:Class="MyNamespace.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:l="clr-namespace:MyNamespace" 
        xmlns:p="clr-namespace:MyNamespace.Properties"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
        Height="500" Title="{x:Static p:Resources.Title}" Width="500"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <l:BrowsersViewModel x:Key="BrowsersViewModel"/>
    </Window.Resources>
    <Canvas Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
            DataContext="{StaticResource BrowsersViewModel}">
        <ComboBox Canvas.Left="10" Canvas.Top="10" DisplayMemberPath="Name"
                  ItemsSource="{Binding Path=Items}" 
                  SelectedItem="{Binding Mode=TwoWay, Path=SelectedItem}"
                  SelectedValuePath="Process" Width="379"/>
        <Button Content="Repopulate" Canvas.Right="10" 
                Canvas.Top="10" Width="75"/>
    </Canvas>
</Window> 
```

这是我的 ViewModel 代码：

```
// BrowserInstance is a simple struct with two public fields:
// 1) System.Diagnostics.Process Process
// 2) System.String Name
public sealed class BrowsersViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private BrowserInstance m_SelectedItem;
    public BrowserInstance SelectedItem
    {
        get { return m_SelectedItem; }
        set
        {
            if (m_SelectedItem != value)
            {
                m_SelectedItem = value;
                NotifyPropertyChanged("SelectedItem");
            }
        }
    }

    private ObservableCollection<BrowserInstance> m_Items;
    public ObservableCollection<BrowserInstance> Items
    { 
        get { return m_Items; }
        set
        {
            if (m_Items != value)
            {
                m_Items = value;
                NotifyPropertyChanged("Items");
            }
        }
    }

    public BrowsersViewModel()
    {
        m_Items = new ObservableCollection<BrowserInstance>();
        Populate();
    }

    private void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, (new PropertyChangedEventArgs(propertyName)));
    }

    public void Populate()
    {
        foreach (Process process in Process.GetProcessesByName("chrome"))
        {
            BrowserInstance instance = new BrowserInstance();
            instance.Process = process;
            instance.Name = "[Chrome] " 
                         + process.Handle.ToString() 
                         + " " + ((process.MainWindowTitle.Length > 0) ? 
                                        process.MainWindowTitle : "NULL");

            m_Items.Add(instance);
        }

        NotifyPropertyChanged("Items");
    }
} 
```

我真的很难让这个工作。我到处查看了大量示例，但仍然找不到使一切按预期工作的解决方案。

1) 我在 ComboBox 下拉列表中看到很多值，但它们都是空的。我想`BrowserInstance.Name`在 ComboBox 内显示属性并在选择项目时检索`BrowserInstance.Process`值。

2) 当应用程序启动时，会检查当前正在运行的浏览器进程以填充 ComboBox。如果没有找到正在运行的实例，我怎么能在我的 ComboBox 中显示一条消息，例如“没有找到实例！”？

3) 如果在应用统计时发现一个或多个浏览器实例，如何默认选择第一个？

4) Repopulate 按钮将用于重新检查用户正在运行的浏览器实例。假设之前选择的实例仍在运行……我怎样才能让那个实例保持选中状态？如果之前选择的实例不再运行，我如何再次默认选择第一个？

非常感谢！

**编辑：这是我当前的代码**

主窗口：

```
public MainWindow()
{
    InitializeComponent();
    DataContext = m_BrowserInstances = new BrowserInstancesViewModel();
}

private void OnClickButtonRefresh(Object sender, RoutedEventArgs e)
{
    m_BrowserInstances.Populate();
} 
```

BrowserInstancesViewModel：

```
public void Populate()
{
    BrowserInstance selectedItem = m_SelectedItem;
    List<BrowserInstance> items = new List<BrowserInstance>();

    foreach (Process process in Process.GetProcessesByName("chrome"))
        items.Add(new BrowserInstance(process));

    if (items.Count > 0)
    {
        m_Items = new ObservableCollection<BrowserInstance>(items.OrderBy(x => x.Process.Id));

        if ((selectedItem != null) && (m_Items.SingleOrDefault(NewMethod(selectedItem)) != null))
            m_SelectedItem = selectedItem;
        else
            m_SelectedItem = m_Items[0];

        m_Enabled = true;
    }
    else
    {
        m_Items = new ObservableCollection<BrowserInstance>() { (new BrowserInstance()) };
        m_SelectedItem = m_Items[0];

        m_Enabled = false;
    }

    NotifyPropertyChanged("Enabled");
    NotifyPropertyChanged("Items");
    NotifyPropertyChanged("SelectedItem");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:58:39.187

> BrowserInstance 是一个具有两个公共字段的简单结构：

WPF 不支持对字段进行数据绑定。只有属性。

这应该有效：

```
public class BrowserInstance
{
    public string Name { get; set; }

    public Process Process { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:26:53.617

1）我无法复制这个问题，你确定有一个正在运行的 chrome 进程吗？:D

2）你可以像这样破解它：：D

```
 <ComboBox Canvas.Left="10" Canvas.Top="10" 
               DisplayMemberPath="Name" ItemsSource="{Binding Path=Items}"
               SelectedItem="{Binding Mode=TwoWay, Path=SelectedItem}" 
               SelectedValuePath="Process" Width="200">
        <ComboBox.Style>
            <Style TargetType="ComboBox">
                <Setter Property="IsEnabled" Value="True"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Items.Count}" Value="0">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ComboBox.Style>
    </ComboBox>
    <TextBlock Canvas.Left="10" Canvas.Top="10" 
               Text="No instances have been found!" >
        <TextBlock.Style>
            <Style TargetType="TextBlock">
                <Setter Property="Visibility" Value="Collapsed"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Items.Count}" Value="0">
                        <Setter Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock> 
```

或者更好的是，您重新模板组合框以包含文本块并使用组合框的 hasitems 属性值绑定其可见性（当然您需要使用 BoolToVis 转换器）

3）在填充后将此代码添加到vm构造函数中

```
if (m_Items.Count > 0)
{
    SelectedItem = m_Items[0];
} 
```

4）在vm中添加新的repopulate方法并存储当前选中的item，填充，检查是否存在，重新选中item

```
 public void Repopulate()
    {
        BrowserInstance currentSelectedItem = m_SelectedItem;
        Populate();

        if (m_Items.Count>0)
        {
            if (currentSelectedItem !=null 
                && m_Items.FirstOrDefault
                   ((bi) => bi.Process == currentSelectedItem .Process) 
                         != null)
            {
                SelectedItem = currentSelectedItem;
            }
            else
            {
                SelectedItem = m_Items[0];
            }
        }
    } 
```

注意：
当我尝试上面的代码并对其进行调试时，我不确定要检查什么属性来验证实例的存在，因为我的 chrome 进程列表不断变化。但基本上这就是你能做的

# html - 使用下一个按钮时如何使 iPad HTML5 日期默认为空白/空

> ID：16159685
> 
> 赞同：5
> 
> 时间：2013-04-23T02:04:50.840
> 
> 标签：html, ipad, date, mobile-safari, html-input

iPad默认为今天`input type="date"`获得焦点（由于下一个/上一个按钮，我假设使用蓝牙键盘的tab/shift-tab），例如在iPad上使用[http://jsbin.com/etovur/1进行测试。](http://jsbin.com/etovur/1)

问题：是否有一种解决方法可以在 iPad 和 iPhone 上使用，以便在仅在字段中导航时使日期*不默认为今天？*

这是编辑现有数据并使用下一个/上一个导航字段时的 UI 问题，因为它将空白更改为今天，例如员工的终止日期字段设置为今天，并且该员工被解雇。

我们只需要一个适用于 iPad/iPhone 的解决方案，并注意`input type=date`两种设备之间的实现存在显着差异。桌面浏览器无关紧要，因为我们使用非本地日期控件（正是为了避免日期控件的工作方式和外观变化或是否提供这些问题）。该问题至少发生在装有 iOS5 的 iPad 和装有 iOS6 的 iPhone 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T04:25:30.237

最有效的解决方案：请参阅[http://jsbin.com/etovur/5](http://jsbin.com/etovur/5) - 当日期输入获得焦点时，延迟后将值设置为 ''。

```
 setTimeout(function() {
    document.getElementById('adate').value = '';
  }, 0); 
```

最大的问题是，这种解决方法使用户很难选择今天（用户必须从今天滚动并再次返回才能选择今天）。由于这是恕我直言，iOS 上日期选择器的过度简化 UI 的缺陷，我认为对于我原来的问题没有任何可行的解决方案。

一些计时错误的可能性（下一个然后在慢速 iPad 上快速下一个？）。

# php - 在文本文件中加密密码

> ID：16159688
> 
> 赞同：0
> 
> 时间：2013-04-23T02:05:26.787
> 
> 标签：php, encryption, passwords

我在 php 文件中定义我的数据库

```
define ('DB_HOSTNAME', 'localhost');

define ('DB_USERNAME', 'user');

define ('DB_PASSWORD', 'pass');

define ('DB_DATABASE', 'dbase'); 
```

是否有一种内置方式可以将加密/散列密码存储在文本文件中，然后在程序中对其进行解密，而不是将密码存储在源代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:34:47.010

> 我将我的源代码备份到很多人都可以访问的存储库中......超出我的团队也是......

然后你想要的是将敏感配置与源代码*分开。*不要将其签入存储库，将其保存在受信任计算机上某处的受保护文件中，并且仅将其与代码分开部署到生产服务器。

# c++ - 关于 C++/Boost 的真正基础 - 测试提升

> ID：16159692
> 
> 赞同：0
> 
> 时间：2013-04-23T02:05:55.100
> 
> 标签：c++, gcc, boost

我想我已经正确安装了 boost，所以我尝试使用在[这里](http://tabreziqbal.wordpress.com/2006/03/16/how-to-test-c-boost-installation/)找到的测试“first.cpp” ：

```
#include<iostream>
#include<boost/any.hpp>

int main()
{
    boost::any a(5);
    a = 7.67;
    std::cout<<boost::any_cast<double>(a)<<std::endl;
} 
```

我得到以下信息：

```
Jason@ITHAKA-DB44CFE1 /home/jason
$ g++ -o first first.cpp
first.cpp:2:24: boost/any.hpp: No such file or directory
first.cpp: In function `int main()':
first.cpp:6: error: `boost' has not been declared
first.cpp:6: error: `any' undeclared (first use this function)
first.cpp:6: error: (Each undeclared identifier is reported only once for each
unction it appears in.)
first.cpp:6: error: expected `;' before "a"
first.cpp:7: error: `a' undeclared (first use this function)
first.cpp:8: error: `boost' has not been declared
first.cpp:8: error: `any_cast' undeclared (first use this function)
first.cpp:8: error: expected primary-expression before "double"
first.cpp:8: error: expected `;' before "double"
first.cpp:9:2: warning: no newline at end of file

Jason@ITHAKA-DB44CFE1 /home/jason
$ 
```

我的 boost 库在我的 ./home/Jason/ 中

显然有什么事情发生了。此外，所有的 boost 库本身都使用这个“boost/...”，所以出于某种原因：

1 - 我在 Boost 上做错了 2 - C++/gcc 没有“看到”我的提升

任何输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:07:40.210

您需要传递`-I/home/Jason/include`给`gcc`，并且可能`-L/home/Jason/lib`也传递给 a ，因为该库未安装在标准路径中。尝试：

```
 g++ -I/home/Jason/include -L/home/Jason/lib -o first first.cpp 
```

此外，一旦编译，它将无法正常运行，因为库不再位于标准路径中。要运行它，您需要添加`/home/Jason/lib`到环境变量`LD_LIBRARY_PATH`中。

编辑：正如 Tony D 指出的那样，您可以改为设置`CPLUS_INCLUDE_PATH`为`/home/Jason/include`，这相当于我给您的编译器选项。

**编辑**

如果您只想测试您的安装，您可以运行`~/bin/Boost.Test`脚本（假设您在`--with-libraries=test`安装时已启用）。否则，小时主页中应该有一个`bin`目录（如果您使用它作为前缀），如果其中有任何名称`Boost`，请尝试运行它（但请记住设置`LD_LIBRARY_PATH`之前）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T02:16:32.993

*   头文件链接到“/usr/include”

`$ cd /usr/include`
`$ sudo ln -s /usr/local/boost_xxxx/boost boost`

*   编译boost库，并将so文件复制到'/usr/lib'

`$ sudo cp /usr/local/lib/libboost_regex-gcc41-mt-xxxx.so.xxxx /usr/lib/`

# php - Swagger-PHP 和 CakePHP

> ID：16159693
> 
> 赞同：0
> 
> 时间：2013-04-23T02:06:28.613
> 
> 标签：php, cakephp, swagger, swagger-php

我正在尝试在我的 CakePHP 项目中使用[Swagger-PHP ，但遇到了一些问题。](http://zircote.com/swagger-php/using_swagger.html#swaggerswagger)有没有人设置这个？你有什么建议吗？我已经通过 Composer 成功安装了 swagger-php，它已加载到我的控制器中（见下文）。我正在尝试通过 Web 视图呈现规范，但我不太确定为什么没有填充注册表，或者是否需要填充。

以下是 ApiController.php 内部

```
use Swagger\Annotations as SWG; 
use Swagger\Swagger;

public function swagger(){
    $path = APP . 'Model'; //Path to the app directory
$swagger = Swagger::discover($path,APP . 'Model/Behavior');
debug($swagger);
 //$swagger->jsonEncode($swagger->registry['/api']);
$swagResults = $swagger->registry;
debug($swagResults);
$this->set(array(
    'results' => $swagResults,
    '_serialize' => 'results'
));
} 
```

结果

```
object(Swagger\Swagger) {
    resourceList => array()
    registry => array()
    models => array()
    [protected] fileList => array(
        (int) 0 => '~/Sites/com/sitename-api/app/Model/[ModelName].php',
        ... All of my models
    )
    [protected] path => '~/Sites/com/sitename-api/app/Model'
    [protected] excludePath => '~/Sites/com/sitename-api/app/Model/Behavior'
    [protected] cache => object(Doctrine\Common\Cache\ArrayCache) {
        [private] data => array(
            'DoctrineNamespaceCacheKey[]' => (int) 1,
            '[][1]' => 'a:4:{s:8:"registry";a:0:{}s:6:"models";a:0:{}s:4:"path";N;s:11:"excludePath";N;}',
            '[cd9db43f54f6017ba1a20037c1577eb4d2017868][1]' => 'a:4:{s:8:"registry";a:0:{}s:6:"models";a:0:{}s:4:"path";s:56:"~/Sites/com/sitename-api/app/Model";s:11:"excludePath";s:65:"~/Sites/com/sitename-api/app/Model/Behavior";}'
        )
    }
    [protected] cacheKey => 'cd9db43f54f6017ba1a20037c1577eb4d2017868'
} 
```

所以，基本上 $swagResults 是空的，我猜这不应该是，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:32:12.273

我写了一个控制器来生成所有的 swagger 文档（需要 swagger-php 0.6 或更高版本）：

```
<?php
use Swagger\Swagger;
class SwaggerController extends AppController {

    function index() {
        $swagger = Swagger::discover(APP, TMP.':'.APP.'Vendor');

        $this->autoRender = false;
        if (isset($this->request->query['resource'])) {
            return $swagger->getResource($this->request->query['resource']);
        }
        $list = array(
            "apiVersion" => "1.0",
            "swaggerVersion" => "1.1",
            "basePath" => Router::url(array('?' => array('resource' =>'')), true),
            "apis" => array()
        );
        foreach ($swagger->registry as $name => $resource) {
            $item = array("path" => $name);
            foreach ($resource->apis as $api) {
                if ($api->description !== null) {
                    $item['description'] = $api->description;
                    break;
                }
            }
            $list['apis'][] = $item;
        }
        return json_encode($list);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:31:59.450

感谢您的回答 Bob，我意识到如何实际排除目录。无论如何，到目前为止，以下工作正在进行中。现在我只需要更好地处理实际的 Swagger 规范。

在您的模型中，添加以下内容：

```
use Swagger\Annotations as SWG;

/**
 * User Model
 * @SWG\Model(
 *      id="User",
 *      description="Defines a user."
 * )
 */ 
```

在控制器中，添加以下内容。注意：controller_name 将传递给 swagger 方法。

```
use Swagger\Annotations as SWG;

/**
 * @SWG\Resource(
 *      resourcePath="/users"
 * )
 */ 
```

在 API 控制器中构建如下所示的方法。

```
/**
 * swagger method
 * This method renders the Swagger spec
 * @param string $controller The controller a.k.a resource to pull Swagger docs for
 * @return array
 */
public function swagger($controller = ''){
    if(!empty($resource)) {
        $this->request->query['resource'] = '/'.$controller;
    }
    $path = APP; //Path to the app directory
    $path = substr($path, 0, -1);
    $swagger = Swagger::discover(
            $path, 
            APP . 'Plugin:' . 
            APP . 'Vendor:' . 
            APP . 'Config:' . 
            APP . 'Test:' .
            APP . 'Console:' .
            //APP . 'Model:' .
            APP . 'View/Helper:' .
            APP . 'Controller/Component:' .
            APP . 'webroot:' .
            APP . 'tmp:' .
            APP . 'index.php:' .
            'libs:' .
            'plugins:' .
            'vendors' 
        );
    $swagger->setDefaultApiVersion(Configure::read('CC.version'));
    $swagger->setDefaultBasePath(Configure::read('CC.site_url') . DS . Configure::read('CC.version'));
    $swagger->setDefaultSwaggerVersion(SWAGGER_VERSION);
    $this->autoRender = false;
    if (isset($this->request->query['resource'])) {
        return $swagger->getResource($this->request->query['resource']);
    }
    $list = array(
        "apiVersion" => API_VERSION,
        "swaggerVersion" => "1.1",
        "basePath" => Router::url(array('?' => array('resource' =>'')), true),
        "apis" => array()
    );
    if (isset($this->request->query['resource'])) {
        return $swagger->getResource($this->request->query['resource']);
    }
    $list['apis'][] = $swagger->registry;
    $this->set(array(
        'results' => $list,
        '_serialize' => 'results'
    ));
} 
```

方法注释可能类似于：

```
/**
 * info method
 * This provides an app with basic user information. 
 * @param int id The user id
 * @return array 
 * @SWG\Api(
 *      path="/users/info/{user_id}.{format}",
 *      description="This provides an app with basic user information.",
 *      @SWG\Operations(
 *          @SWG\Operation(
 *              httpMethod="GET",
 *              summary="User Basic Info",
 *              notes="",
 *              responseClass="List[User]",
 *              nickname="getUserInfo",
 *              group="users",
 *              @SWG\Parameters(
 *                  @SWG\Parameter(
 *                      name="format",
 *                      description="The format that the data will be returned in.",
 *                      paramType="path",
 *                      required="true",
 *                      allowMultiple="false",
 *                      dataType="Array",
 *                      @SWG\AllowableValues(
 *                          valueType="LIST",
 *                          values="['json', 'xml']"
 *                      )
 *                  ),
 *                  @SWG\Parameter(
 *                      name="user_id",
 *                      description="The user id",
 *                      paramType="path",
 *                      required="true",
 *                      allowMultiple="false",
 *                      dataType="int"
 *                  ),
 *                  @SWG\Parameter(
 *                      name="client_id",
 *                      description="Your client id",
 *                      paramType="query",
 *                      required="true",
 *                      allowMultiple="false",
 *                      dataType="string",
 *                      threescale_name="client_ids"
 *                  )
 *              ),
 *              @SWG\ErrorResponses(
 *                  @SWG\ErrorResponse(
 *                      code="404",
 *                      reason="User not found"
 *                  )
 *              )
 *          )
 *      )
 *  )
 */ 
```

注意：threescale_name 和 groups 是我添加的自定义操作和参数。如果您想使用这些，只需将它们添加到 zircote/swagger-php/library/Swagger/Annotations/(Parameter and Operation).php 文件中。这些是 3scale.net 的特定项目。

# objective-c - 目标 c 中的（覆盖）是什么

> ID：16159697
> 
> 赞同：4
> 
> 时间：2013-04-23T02:06:52.520
> 
> 标签：objective-c, overriding

我正在关注如何在 Iphone 中创建弹出框的[教程](http://www.youtube.com/watch?v=1iykxemuxbk)

这是什么`(overrides)`代码：

```
@interface UIPopoverController (overrides)
  + (BOOL)_popoversDisabled;
@end

@implementation UIPopoverController (overrides)

  + (BOOL)_popoversDisabled 
  { 
     return NO;
  }

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T02:48:43.900

这是一个objective-C类别。类别是在类上提供额外方法的一种方式，它们在以下情况下很有用：

*   扩展具有特定领域功能的库类。即提供一些对您的应用程序有用的额外功能。无论您是否拥有该类的源代码，这都有效。例如，您可以实现**[NSString asCreditCard]**方法或**[UIColor applicationThemeColor]**。
*   类别对于将相关功能分组到一个复杂的类中也是非常宝贵的。

Objective-C 类别有一个限制，即您不能在类别上定义其他 ivars，因此不能定义 ivar 支持的属性，尽管您可以使用*关联引用*轻松解决这个问题- 一种允许您将对象链接到给定的运行时功能班级。

**关联引用**

要“伪造”类别类上的属性或 ivar，请使用以下命令：

定义一个“键”来引用关联的属性。

```
static char const* const carNamekey = "com.myObject.aKey"; 
```

键不一定必须有值，因为它是实际使用的对象的内存地址。

现在，实现属性：

```
- (void) setCar:(Car*)car 
{
    objc_setAssociatedObject(self, &carNamekey, car, OBJC_ASSOCIATION_RETAIN_NONATOMIC);     
}

- (Car*) car 
{
    return objc_getAssociatedObject(self, &carNamekey);
} 
```

如果您希望可以在该类别的接口定义上添加@property 声明，以邀请该类的用户使用属性样式（即class.property = xxx）语法。

**类扩展**

另一个与 Objective-C 类别非常相似的特性是类扩展。类扩展在类的实现块中定义，如下所示：

```
@interface MyClass() 
```

有些人将这些称为“空类别”，但这并不完全正确。与类别不同，类扩展将允许您在类上定义其他属性和 ivars，而无需使用关联引用。这对于制作只读属性、内部可写以及类似的东西很有用。

那里 - 现在你可能比很多人更了解类别:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T03:30:29.953

Jasper Blues 的回答很好地解释了类别，所以我只想补充一点，您应该避免使用类别来覆盖要添加类别的类中的方法。原因是类别添加到类的顺序是未定义的，因此您无法确定该类是否会获得您的方法版本或在另一个类别中定义的方法。**如果您需要覆盖类中的方法，请创建一个子类并将您的覆盖放在那里。**

但是，人们有时会使用类别来组织类定义中的方法。如果这里是这种情况，那么`overrides`类别中的方法可能意味着覆盖超类中的方法，这很好。

# java - 算法优化 - 并行 AsyncTasks 或线程？

> ID：16159699
> 
> 赞同：6
> 
> 时间：2013-04-23T02:07:07.710
> 
> 标签：java, android, algorithm, image-comparison

我目前有一个单曲，目前使用 OpenCV 技术`AsyncTask`比较图像。`bubble sort`说，我必须将`400`图像相互比较。这意味着`400*401/2=80,200`比较。假设一次比较需要 1 秒。所以，这就是`80,200 sec`它周围`22.27 hours`的长度非常长。所以，我开发了这种类型的算法：

它将`400`图像分成几组`5`。`80`所以每组都有图像。

算法的第一部分是在组成员中比较自己的图像。

因此，`image1`将自身与 进行比较`image2-80`，这意味着存在`79`比较。`image2`会有`78`比较等等。这使得`3,160`比较。或`3,160 sec`。同样，`image81`将自身与`image82-160`等进行比较。所以所有的“组比较”都完成了，`3,160 sec`因为它们是并行运行的。

算法的第二部分将`group 1`元素与`group 2`元素、`group 2`with `group 3`、`group 3`with`group 4`等进行比较。这将意味着`image1`将与 进行比较`image81-160`，这是比较，因此和`80`之间的总比较将是比较。是否可以将每个图像比较与组比较并行？也就是说，如果将自己与then进行比较，则应该这样做，以此类推，而其他组也在这样做。所以，这部分应该只取。`group 1``group 2``80*80=6400``image1``image81-160``image2``6400 sec`

现在，`group1`将与`group3`，`group2`与`group4`，`group3`与进行比较`group5`。->`6400 sec`

之后，`group1 will be compared with group4`并`group2`与`group5`. ->`6400 sec`

因此，所有组都进行了比较。

总时间 = `3160+6400+6400+6400=22,360sec`。我意识到小组越多，需要的时间就越多。所以，我必须增加小组规模以减少时间的增加。无论哪种方式，它都会将时间缩短到几乎`1/4th`是实际时间。

这个算法不现实吗？如果是这样，为什么？它有什么缺陷？我将如何解决它？是否有更好的算法可以更快地比较图像列表？显然不是`quick sort`，我无法按升序或降序排列图像。或者我可以吗？

如果这个算法是可能的？实施它的最佳方法是什么？`Thread`还是`AsyncTask`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:00:42.310

这是一个现实的算法，但理想情况下，您希望能够在整个程序中使用相同数量的工作线程。为此，您需要使用偶数个线程，例如 8 个。

在 Pass1 上，Thread1 处理图像 1-50，Thread2 处理图像 51-100，等等。

在 Pass2 上，Thread1 和 Thread2 都处理映像 1-100。Thread1 处理图像 1-25 和 50-75，Thread2 处理图像 26-50 和图像 76-100。然后 Thread1 处理图像 1-25 和 76-100，而 Thread2 处理图像 26-75。

通过 3 到 8 遵循相同的模式 - 分配给正在处理的两个组的两个线程将它们之间的组分开。这样，您就可以让所有线程保持忙碌状态。但是，为了简化组分区，您需要偶数个线程。

4个线程的示例代码

```
class ImageGroup {
    final int index1;
    final int index2;
}

class ImageComparer implements Runnable {
    final Image[] images;
    ImageGroup group1;
    ImageGroup group2;

    public ImageComparer(Image[] images, ImageGroup group1, ImageGroup group2) {
        ...
    }

    public void run() {
        if(group2 == null) { // Compare images within a single group
            for(int i = group1.index1; i < group1.index2; i++) {
                for(int j = i + 1; j < group1.inex2; j++) {
                    compare(images[i], images[j]);
                }
            }
        } else { // Compare images between two groups
            for(int i = group1.index1; i < group1.index2; i++) {
                for(int j = group2.index1; j < group2.index2; j++) {
                    compare(images[i], images[j]);
                }
            }
        }
    }
}

ExecutorService executor = new ThreadPoolExecutor(); // use a corePoolSize equal to the number of target threads
// for 4 threads we need 8 image groups
ImageGroup group1 = new ImageGroup(0, 50);
ImageGroup group2 = new ImageGroup(50, 100);
...
ImageGroup group8 = new ImageGroup(450, 500);

ImageComparer comparer1 = new ImageComparer(images, group1, null);
ImageComparer comparer2 = new ImageComparer(images, group3, null);
...
ImageComparer comparer4 = new ImageComparer(images, group7, null);

// submit comparers to executor service
Future future1 = executor.submit(comparer1);
Future future2 = executor.submit(comparer2);
Future future3 = executor.submit(comparer3);
Future future4 = executor.submit(comparer4);

// wait for threads to finish
future1.get();
future2.get();
future3.get();
future4.get();

comparer1 = new ImageComparer(images, group2, null);
...
comparer4 = new ImageComparer(images, group8, null);

// submit to executor, wait to finish

comparer1 = new ImageComparer(images, group1, group3);
...
comparer4 = new ImageComparer(images, group7, group6);

// submit to executor, wait to finish

comparer1 = new ImageComparer(images, group1, group4);
...
comparer4 = new ImageComparer(images, group7, group5); 
```

# prolog - 关于 prolog 中的 c() 谓词

> ID：16159700
> 
> 赞同：0
> 
> 时间：2013-04-23T02:07:10.053
> 
> 标签：prolog

我有代码

> newplan(State, [c(StateList)], [], State):- 满意(State, StateList)。

而且我不知道 c() 谓词的作用。我试图在互联网上搜索答案，但我找不到。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:46:02.303

在这段代码`c/1`中只是一个结构。Prolog 与大多数语言略有不同，因为结构和谓词（在另一种语言中可能被认为是函数调用）共享语法。所以这里`c/1`没有*做*任何事情，它只是一个标记，（大概）通过你没有与我们共享的代码中的其他东西被赋予意义。

让我给你一个具体的例子。

```
eval(c(X), X2) :- X2 is (X*2) + 3.
eval(q(X), X2) :- X2 is X / 3.

something_to_do(c(14)).
something_to_do(q(21)). 
```

在这段代码中，`c/1`并`q/1`没有*做*任何事情。如果您查询`something_to_do/1`，您将获得结构：

```
?- something_to_do(X).
X = c(14) ;
X = q(21) ;
false. 
```

但是，如果您随后将该结构传递给`eval/2`它，则取决于它获得的结构。所以你可以说`eval/2`赋予结构`q/1`和`c/1`意义（尽管“赋予意义”在任何意义上都不是官方 Prolog 命名法）。

```
?- something_to_do(X), eval(X, Y).
X = c(14), Y = 31 ;
X = q(21), Y = 7 ;
false. 
```

这是同样的故事。您将不得不搜索您的代码库并找出其中的`c/1`含义，因为它不是内置谓词。

**注意**：在同一个代码库中可以同时拥有同名的结构和谓词。例如，我可以添加一个谓词，如

```
q(foo).
q(bar).
q(X) :- even(X). 
```

`q/1`并且这个谓词在任何意义上都与上面的结构没有重叠。这只是关于 Prolog 的那些有趣而令人困惑的事情之一（后来证明它是强大而伟大的）。创建结构和尝试统一目标之间存在巨大差异。

# powershell - Powershell 在使用 Office 自动化方面的变化？

> ID：16159703
> 
> 赞同：0
> 
> 时间：2013-04-23T02:07:15.260
> 
> 标签：powershell, ms-office, office-interop, office-2007

在旧机器（Windows 2008）上，我有：

```
PS P:\> $psversiontable

Name                           Value
----                           -----
CLRVersion                     2.0.50727.3623
BuildVersion                   6.0.6002.18111
PSVersion                      2.0
WSManStackVersion              2.0
PSCompatibleVersions           {1.0, 2.0}
SerializationVersion           1.1.0.1
PSRemotingProtocolVersion      2.1 
```

使用以下脚本：

```
$document = "C:\\Temp\\test.docx"
$word = new-object -comobject word.application
$word.Visible = $false
$doc = $word.Documents.Open($document)
$extensionSize = 3;
if ($document.EndsWith("docx")) {
    $extensionSize = 4;
}
$dest = $document.Substring(0, $document.Length - $extensionSize) + "pdf"
$saveAsPath = [ref] $dest
$formatPDF = [ref] 17
$doc.SaveAs($saveAsPath, $formatPDF)
$doc.Close([ref]$false)
$word.quit() 
```

在新机器上（Windows 2008 R2）：

```
PS H:\> $psversiontable

Name                           Value
----                           -----
CLRVersion                     2.0.50727.5466
BuildVersion                   6.1.7601.17514
PSVersion                      2.0
WSManStackVersion              2.0
PSCompatibleVersions           {1.0, 2.0}
SerializationVersion           1.1.0.1
PSRemotingProtocolVersion      2.1 
```

我不得不将脚本更改为：

```
$document = "c:\\Temp\\test.docx"
$word = new-object -comobject word.application
$doc = $word.Documents.Open($document)
$extensionSize = 3;
if ($document.EndsWith("docx")) {
    $extensionSize = 4;
}
$dest = $document.Substring(0, $document.Length - $extensionSize) + "pdf"
Add-Type -AssemblyName "Microsoft.Office.Interop.Word"
$formats = "Microsoft.Office.Interop.Word.WdSaveFormat" -as [type]
$doc.SaveAs($dest, $formats::wdFormatPDF)
$doc.Close($false)
$word.quit() 
```

谁能解释为什么脚本需要更改？

# javascript - 有没有更好的方法在 javascript 中进行回调链接？

> ID：16159706
> 
> 赞同：3
> 
> 时间：2013-04-23T02:07:36.013
> 
> 标签：javascript, callback

我写了一个回调助手，它可以让我将多个回调分组到一个函数变量中：

```
function chainCallbacks() {
    var callbacks = arguments;
    return function () {
        for(var i = 0; i < callbacks.length; i++) {
            if(callbacks[i] != null) {
                callbacks[i].apply(null, arguments);
            }
        }
    };
} 
```

这可行，但我想知道是否有任何提供相同功能的 javascript 库？甚至更好的是模拟.NET“事件”模式的东西？

```
myEvent+=myCallback; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:07:39.480

我已经修改了你的 chainCallbacks 函数。您可以在 JS 控制台中测试以下代码（我正在使用 Chrome - 工作正常），并检查结果。

```
var result = 0;

function a() {
        result += 5;
        console.log(result);
        _next();
}

function b() {
        result += 10;
        console.log(result);
        _next();
}

function c() {
        result += 20;
        console.log(result);
        _next();
}

function chainCallbacks() {

    var _this = this;
    var _counter = 0;
    var _callbacks = arguments;

    var _next = function() {
        _counter++;
        if(_counter < _callbacks.length) {
            _callbacks[_counter].apply(_this);
        }
    };

    _this._next = _next;

    return function() {
        if(_callbacks.length > 0) {
            _callbacks[0].apply(_this);
        }
    };
}

var queue = chainCallbacks(a, b, c);
queue(); 
```

想法很简单——`_next()`只要你的回调函数完成执行，你就调用它，并且你想跳转到另一个。所以你也可以在一些 jQuery 动画之后调用`_next()`eg，这样你就可以保持函数的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:29:05.117

如果您想用调用原始回调和其他回调的回调替换回调，我可能会这样做：

```
Requirejs.config.callback = function(orig) {
    var fns = [orig, first, second, third];
    return function() {
        fns.forEach(function(fn) { fn.apply(null, this); }, arguments);
    };
}(Requirejs.config.callback); 
```

* * *

但如果你经常这样做，我认为你的解决方案会尽可能好。我认为不需要图书馆。

```
Requirejs.config.callback = chainCallbacks(Requirejs.config.callback, first, second, third) 
```

库不能做任何事情来扩展 JavaScript 中的语言语法。它仅限于可用的......没有运算符重载或任何东西。

# android - 在框架窗口中开始一个新活动

> ID：16159708
> 
> 赞同：1
> 
> 时间：2013-04-23T02:07:44.040
> 
> 标签：android

我有两个框架定义如下：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     
    android:orientation="vertical"     
    android:layout_width="match_parent"     
android:layout_height="match_parent">     

<fragment class="com.test.act"         
    android:id="@+id/list"             
    android:layout_weight="1"             
    android:layout_width="match_parent"             
    android:layout_height="wrap_content" />      
<fragment android:name="com.test.nact"             
    android:id="@+id/viewer"             
    android:layout_weight="1"             
    android:layout_width="wrap_content"             
    android:layout_height="wrap_content" />  

</LinearLayout> 
```

在基于用户输入（单击按钮）的第二帧中，我想启动一个以前由其他人编码的新活动。因此，在 onCreateView 函数中，我创建了一个新意图并像这样启动它：

```
Intent newIntent = new Intent( view.getContext(), PictureActivity.class );
startActivityForResult( newIntent, ACTION_REQUEST_PIC ); 
```

然而，会发生的是 PictureActivity 被启动并接管了整个屏幕，也覆盖了显示的 com.test.act 片段部分。我希望 PictureActivity 仅在显示的 com.act.nact 部分中显示。我怎样才能做到这一点？

# rest - 使用 Spring Security 在 Web 应用程序和 RESTful 服务之间共享安全上下文

> ID：16159710
> 
> 赞同：4
> 
> 时间：2013-04-23T02:07:50.070
> 
> 标签：rest, authentication, spring-security, cxf, single-sign-on

我们正在为一个带有 UI Web 模块 (Spring MVC) - 客户端和 RESTful 服务 Web 模块 (CXF) - 服务器的绿地项目设计安全性，将作为单独的 war 文件部署在同一个 Websphere 应用程序服务器中。系统应该使用 Spring Security 保护，针对 LDAP 进行身份验证并针对数据库进行授权。我们一直在寻找在两个应用程序之间共享安全上下文的最佳解决方案，以便用户可以在 Web UI 中进行身份验证并调用其对安全 RESTful 服务的 AJAX 调用。找到的选项：

*   OAuth：对我们的要求来说似乎有点过头了，引入了相当复杂的身份验证过程，据报道还存在一些企业集成问题

*   CAS：相当于建立企业 SSO 解决方案，这超出了我们的参与范围

*   基于容器（Websphere）的安全性，虽然 Spring Security 不推荐，但我们不清楚这是否可以为我们的特定需求提供解决方案

我们正在寻找更简单的解决方案。我们如何在 2 个应用程序之间传播安全上下文？我们是否应该在 UI Web 应用程序中实现身份验证，然后在数据库中持久化会话，以便 RESTful 服务查找？CXF可以提供解决方案吗？我们阅读了许多关于生成可以传递的“安全令牌”的线程，但是如何使用 Spring Security 完全做到这一点，它是否足够安全？

期待任何想法或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:51:39.837

您希望能够代表在 UI Web 模块中认证的用户在服务器上执行 REST Web 服务。您描述的要求称为 SingleSignOn。最简单的方法是在 REST WS 调用期间传递带有用户名的 HTTP 标头。（我希望您的 REST 客户端允许这样做）。要以安全的方式执行此操作，请使用以下方法之一：

1.  在 REST 客户端加密用户名并在 REST 服务器中解密
2.  确保标头是从本地主机发送的（因为您的应用程序部署在同一个容器上）

因此，使用 SpringSecurity 保护两个应用程序对 LDAP 进行身份验证。在第一个应用程序（Rest Client）中使用常规表单身份验证在第二个应用程序（Rest Server）中添加您自己的`PreAuthenticatedProcessingFilter`： [http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity -single.html#d0e6167](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167)

*已编辑*

“身份验证”是验证主体身份的过程。在我们的例子中，REST 客户端（Spring MVC 应用程序）和 REST 服务器（CXF 应用程序）都根据 LDAP 验证身份。LDAP “说”OK 或 Not。LDAP 是一个用户存储库。它是无状态的，不记得以前的状态。它应该保存在应用程序中。

根据我的理解，用户不会直接访问 REST 服务器——用户总是访问 REST 客户端。因此，当用户访问 REST 客户端时，他/她提供用户名和密码，REST 客户端针对 LDAP 进行身份验证。因此，如果 REST 客户端访问 REST 服务器，则用户已通过身份验证，并且 REST 客户端知道他的姓名。

因此，如果请求带有用户标头名称的 REST 服务器 - REST 服务器肯定知道用户已通过身份验证，并且不应再次针对 LDAP 对其进行身份验证。（标题应以上述安全方式传递）。Rest Server 应该使用用户名来访问 LDAP 并在不提供用户密码的情况下收集相关的用户信息（因为用户已经通过身份验证）。

# c - 如何将 typedef 结构传递给函数？

> ID：16159712
> 
> 赞同：3
> 
> 时间：2013-04-23T02:08:02.873
> 
> 标签：c, arrays, function, struct

目前我正在尝试

```
void avg(everything) 
```

但这给了我错误：

```
error: subscripted value is neither array nor pointer 
```

今天早些时候我收到这个错误是因为我没有正确地将二维数组传递给函数。所以我认为这是相同的，但我找不到正确的格式来传递它。

这是我的类型定义：

```
typedef struct structure
{
char names[13][9];
int scores[13][4];
float average[13];
char letter[13];
} stuff; 
```

这是我的 typedef 数组：

```
stuff everything[13]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T02:13:49.363

在函数签名中，您需要指定类型，而不是要传入的变量的特定名称。此外，如果要传递数组，则需要传递指针（您可能应该通过指针传递结构无论如何，否则每次调用该函数时都会制作数据副本）。因此，您的功能应如下所示：

```
void avg(stuff* s); 
```

但是，C 数组也没有长度的概念。因此，您应该始终将数组的长度传递给函数：

```
void avg(stuff* s, size_t len); 
```

然后你可以这样称呼它：

```
avg(everything, 13); 
```

此外，如果函数不以任何方式修改数据，则应通过指定参数来表示`const`：

```
void avg(const stuff* s, size_t len); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T02:12:45.890

引入的类型`typedef`是可用于真实类型的别名。

例如：

```
typedef struct some_struct { ... } some_type_name; 
```

现在您可以使用`some_type_name` *而*不是`struct some_struct`.

因此，当声明一个采用这种“类型”结构的函数时，您可以像使用任何其他类型一样使用该类型：

```
void some_function(some_type_name var) { ... } 
```

`some_function`如上所述，您可以`var`像使用普通结构变量一样使用。

要定义一个将数组（或指针）指向此类型的函数，同样简单：

```
void some_function(some_type_name *pointer) { ... } 
```

# javascript - 在页面加载时通过标记名称内联添加一个函数，例如 onmouseover

> ID：16159713
> 
> 赞同：4
> 
> 时间：2013-04-23T02:08:03.823
> 
> 标签：javascript, html

我需要知道如何在标签中添加函数，这很重要，因为 ID 和类不同，我需要应用具有相同标签名称的 JavaScript 方法。到目前为止，这就是我想出的，并试图让它发挥作用。

```
<!DOCTYPE html>
<html>
<body onload="myFunction()">

<select>
    <option>1</option>
</select>
<br/>
<select>
    <option>1</option>
</select>

<script>
function myFunction()
{
    var elem = document.getElementsByTagName("SELECT");
    for (var i = 0;i < elem.length; i++)
    {
        elem[i].onmouseover = "this.style.background='red'";
    }
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:17:02.700

你可以试试这个

```
window.onload=function(){
    var elem = document.getElementsByTagName("SELECT");
    for (var i = 0;i < elem.length; i++)
    {
        elem[i].onmouseover = function(){ this.style.background='red'; }
        elem[i].onmouseout = function(){ this.style.background='white'; }
    }
}; 
```

[**演示。**](http://jsfiddle.net/heera/hMPEt/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:17:31.467

事件处理程序是函数，因此：

```
elem[i].onmouseover = function() {
    this.style.background='red';
} 
```

当您直接在 HTML 中添加事件处理程序时，例如 in `<div onmouseover="this.style.background='red'"></div>`，该包装函数是隐式的。从 JavaScript 附加处理程序时，它是强制性的，它的主体应该是常规代码，而不是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:23:16.647

你可以试试这个（包括你的 HTML 中的一些修复）：

```
<!DOCTYPE html>
<html><head><title>Demo</title>
<script type='text/javascript'>//<![CDATA[ 
function highlight(){
    this.style.background='red';
}

window.onload=function(){
    var col = document.getElementsByTagName('select'), L=col.length;
    while(L--){ col[L].addEventListener("mouseover", highlight, false); }
};
//]]>  
</script>
</head><body>

<select>
    <option>1</option>
</select>
<br/>
<select>
    <option>1</option>
</select>

</body></html> 
```

[在这里工作 JSFiddle](http://jsfiddle.net/U9ewj/)。

如果您希望切换颜色，请将 javascript 替换为以下内容：

```
function highlight(){
    var ts=this.style;
    ts.backgroundColor = ts.backgroundColor === 'red' ? '' : 'red';
}

window.onload=function(){
    var col = document.getElementsByTagName('select'), L=col.length;
    while(L--){ 
        col[L].addEventListener("mouseover", highlight, false); 
        col[L].addEventListener("mouseout", highlight, false);
    }
}; 
```

[在这里工作的 JSFiddle](http://jsfiddle.net/U9ewj/1/)

# javascript - NodeJS、ExpressJS - 重新加载无法正确刷新页面

> ID：16159714
> 
> 赞同：2
> 
> 时间：2013-04-23T02:08:11.277
> 
> 标签：javascript, node.js, express

我有一个非常奇怪的问题。

我正在将 NodeJS 与 ExpressJS 一起使用。我还启用了“护照”模块来验证用户。

我有以下路线

```
app.get("/home", ensureLoggedIn("/login"), (req, res) ->
    res.render "home",
        title:"Home"
) 
```

用户第一次登录后工作正常。

现在，当我在“localhost:3000/home”中并刷新时，似乎并未加载所有 CSS 和 JS 文件，所以我的 Chrome 只是一直在“加载”（旋转图像）。

当我查看控制台时，我打印出以下日志

```
GET /home 200 14ms - 1.32kb <-- first time page being loaded...
GET /css/main.css 304 19ms
GET /js/libs/handlebars.min.js 304 12ms
GET /js/libs/underscore-min.js 304 19ms
GET /js/libs/jquery-ui-1.10.2.custom.min.js 304 21ms
GET /js/libs/jquery-migrate-1.1.1.min.js 304 26ms
GET /js/libs/backbone-min.js 304 19ms
GET /js/libs/jquery-1.9.1.min.js 304 31ms

GET /home 304 18ms <-- second time page being loaded
GET /js/libs/underscore-min.js 304 14ms
GET /js/libs/jquery-ui-1.10.2.custom.min.js 304 16ms
GET /js/libs/jquery-1.9.1.min.js 304 15ms
GET /js/libs/jquery-migrate-1.1.1.min.js 304 15ms 
```

起初它似乎是一个特定的 JS 文件，所以我取出了“jquery-migrate-1.1.1.min.js”文件，但它再次发生在我试图加载的另一个 JS 文件上。

我认为这与“护照”模块有关，所以我将“ensureLoggedIn”代码取出，但它仍在发生。

有任何想法吗？

# 更新

一旦浏览器“挂起”并且没有加载任何内容，我就无处可去。我在浏览器中输入任何 URL 以获取任何资产（例如 CSS 文件、JS 文件、图像）或路径，它只是不断加载，控制台日志中没有任何内容。

# 更新2

这越来越奇怪了。所以这就是我所做的。当我去一个路线

```
app.get("/home", (req, res) ->
    res.render "home",
        title:"Home"
) 
```

使用我的（非常简单的）home.jade 文件

```
!!! 5
html(lang='en')
head
  body 
```

一切正常。我可以多次刷新页面，没有问题。

然后我启用“护照”模块并转到

```
app.get("/home", ensureLoggedIn("/login"), (req, res) ->
    res.render "home",
        title:"Home"
) 
```

我可以成功登录，并且我的“home”（home.jade）文件正确显示。这是踢球者。我准确刷新了 16 次，然后在第 17 次，页面挂起。

我停止我的 NodeJS 服务器并重新启动，并且完全相同，最多刷新 16 次，并在 17 日停止。

我觉得护照模块中有某种“请求”限制？或者我可能会发疯。

# 解决

我发现了我的问题 - 一个新手错误 - 我使用 Postgres 作为我的数据库，对于每个查询，我没有正确“关闭”连接。所以每次我刷新时，它都会打开一个与数据库的新连接 - 傻，傻。

# google-apps-script - range.requireValuesInList 和 requireValuesInRange 似乎被破坏了

> ID：16159719
> 
> 赞同：0
> 
> 时间：2013-04-23T02:08:56.030
> 
> 标签：google-apps-script, google-sheets

直到今天早上，以下代码都可以正常工作

```
function onOpen(e)
{
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  var sheet = ss.getActiveSheet();
  var range = sheet.getRange("B2:B100");
  var dv = range.getDataValidation();
  dv.requireValuesInList(["Shower","Shave","Shop"]);
  dv.setShowDropDown(true);
  range.setDataValidation(dv);    
} 
```

但是今天晚上，这两个函数都给出了错误消息：

```
TypeError: Cannot find function requireValuesInList in object DataValidation.
TypeError: Cannot find function requireValuesInRange in object DataValidation. 
```

知道发生了什么吗？这些功能被替换了吗？

只是为了测试，我创建了一个新的空白电子表格，粘贴在 onOpen 函数中并尝试运行它......没有工作。

任何洞察力都会得到极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:11:18.250

如果您打印 Object.keys(dv) [列出 DataValidation 对象的所有方法] 的返回值，您现在会得到：isAllowInvalidData,setAllowInvalidData,getCriteriaValues,setHelpText,toString,setCriteria,getCriteria

似乎 DataValidation 原型刚刚彻底改变，没有任何警告或更改文档。Google 自己的文档 ( [http://developers.google.com/apps-script/reference/spreadsheet/data-validation](http://developers.google.com/apps-script/reference/spreadsheet/data-validation) ) 指的是现已失效的 DataValidation 原型。

好一个谷歌！

Waqar，我不确定您如何声称 getDataValidation() 未记录。getDataValidation() 返回的 DataValidation 对象在我上面发布的链接中有详细记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:09:34.623

range 对象中的 getDataValidation() 方法未记录在案，因此我们无法说出实际发生了什么。最佳实践是仅使用那些记录在案的方法和类。

这是问题跟踪器中相同的链接。你可以检查一下。

[https://code.google.com/p/google-apps-script-issues/issues/detail?id=2356](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2356)

# php - 选择多个（PHP 和 MySQL）

> ID：16159721
> 
> 赞同：1
> 
> 时间：2013-04-23T02:09:07.863
> 
> 标签：php, mysql

我有一个这样的选择倍数的表格：

```
<select name="states[]" size="5" multiple>
    <option value="2">state 1</option>
    <option value="3">state 2</option>
    <option value="4">state 3</option>
    <option value="5">state 4</option>
    <option value="6">state 5</option>
</select> 
```

我希望有可能选择多个状态，然后对我的数据库进行查询并显示所选每个状态的描述。

所以这就是我必须使用 PHP 和 MySQL 进行查询的内容：

```
$state = $_POST['states'];
$data = mysql_query("SELECT * from states WHERE id_state = '$state'",$db); 

while($row = mysql_fetch_array($data)){
    $result=$row['description'];
}

echo $result; 
```

我有那个代码，它没有显示任何东西。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:15:22.813

尝试这个

```
$state = $_POST['states']; // return Array
$count_states = count( $state );

if( $count_states > 0) {
    $states = implode( ',', $state);
    $data = mysql_query("SELECT * from states WHERE id_state IN ($states)",$db); 

    while($row = mysql_fetch_array($data)){
       echo $row['description'];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:22:26.087

`$_POST['states']`包含一个包含所选状态的所有 ID 的数组。

当然，您可以为每个发布的 state_id 查询您的数据库，但是更好（更快）的方式是进行如下查询并且只使用一个查询：

```
SELECT description FROM states WHERE id_state=1 OR id_state=2 etc etc 
```

这也可能是开始使用像[PDO](http://www.php.net/manual/en/intro.pdo.php)这样的数据库抽象层的好点。由于发布状态的数量是可变的，我们需要使语句也可变：

```
// The [connection setup][2] by PDO is done in $conn, with some proper exception handlers
// e.g. $conn = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

// Fill an array with count() number of elements with value 'id_state=?'
$place_holders = array_fill(0, count($_POST['state']), 'id_state= ?');

//implode the array 
$place_holders = implode(' OR ', $place_holders);

// prepare the query
$st = $conn->prepare("SELECT description FROM state WHERE $place_holders");

// execute to above prepared query with the $_POSTED states
$st->execute($_POST['state']);

// traverse the result
foreach($st->fetchAll() AS $r){
     // do some magic
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:11:58.827

这将需要一个简单`foreach`的遍历数组并根据每个值获取结果，

```
foreach($_POST['states'] as $state) {
    $data = mysql_query("SELECT * from states WHERE id_state = '$state'",$db);
    $row = mysql_fetch_array($data);
    echo $row['description'];
} 
```

另外，由于您没有以某种方式保护您的查询，并且使用的是自 PHP 5.5.0 起已弃用的**mySQL ，我建议您查看****PDO**或**mySQLi** Prepared statements

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T02:14:48.960

您可以通过遍历数组来构建字符串：

```
$state = "";

foreach($_POST['states'] AS $s)
{
    // Sanitize $s here
    $state .= "`id_state` = " . $s . " OR";
}

if($state)
{
    $state = substr($state, 0, -3);

    $data = mysql_query("SELECT * from states WHERE $state",$db); 

    while($row = mysql_fetch_array($data)){
        echo $row['description'];
    }
} 
```

当然，您应该使用[MySQLi](http://en.wikipedia.org/wiki/MySQLi)或[PDO](http://en.wikipedia.org/wiki/PHP#History)之类的东西来处理数据库交互。他们将有办法轻松清理输入，因此您可以避免明显的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

泰米尔语也有一个很好的 IN 选择方法。这只是一种选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T05:14:50.693

```
Example (pages for edit):

//On select_multiple.php (Form):

<?php
//Conn
include('incl_config.php');

//Multiple data to bring
$sql = " select COD_DXS,VALOR_DXS from hc_dxsindromico where ESTADO_DXS='1' ";
$result=@mysql_query($sql);       
?>

//In the form select:
<select  multiple="multiple" size="7"  name="dxsindromico[]"> //look yes or yes brackets []
    <option value="" selected="selected">Choose one or more options</option>
        <?php
        while($row=mysql_fetch_array($result)){
    ?>
        <option value="<?php echo $row['COD_DXS']; ?>" style="color:#F00;"><?php echo $row['VALOR_DXS'];?></option> 
        <?php } ?>  
</select>

//////////// On grabar_mtr.php ///////////////

<?php
include('incl_config.php');
/*Multiple selection form in HTML5, PHP and Bootstraps
Created by: www.nycsoluciones.com
Version: 1.1*/

//we use a foreach to traverse the array (values of our select and save them in the table dxsindromico_data)

if(isset($_POST['dxsindromico'])){
    foreach( $_POST['dxsindromico'] as $insertar ) {
        //echo $insertar;
        $sqli="insert into dxsindromico_data(DXSINDROMICO_HC) values('$insertar')";
        //echo $sqli;
        //exit;
        $resulti=mysql_query($sqli);
    } 
} else{
    foreach( $_POST['dxsindromico'] as $insertar ) {
        //echo $insertar;
        $sqli="insert into dxsindromico_data(DXSINDROMICO_HC) values('$insertar')";
        $resulti=mysql_query($sqli);
    } 
}
?> 
```

# google-chrome - 为什么我不能在chrome浏览器默认路径中设置TChromium cookie存储路径？

> ID：16159724
> 
> 赞同：1
> 
> 时间：2013-04-23T02:09:57.563
> 
> 标签：google-chrome, cookies, chromium, tchromium

我已阅读有关如何设置 cookie 存储路径的[主题](https://stackoverflow.com/questions/12269587/how-do-i-clear-the-cache-and-cookies-for-an-embedded-chromium-browser)，我想

将我的 cookie 设置在与 chrome 浏览器默认 cookie 路径相同的路径中。

这是我的代码。

```
var
  CookieManager: ICefCookieManager;
  dir: string;
  setSuccess: Boolean;
begin
  dir := GetSpecialFolderPath(CSIDL_LOCAL_APPDATA, True);
  dir := dir + '\Google\Chrome\User Data\Default';//Chrome browser cookie path.
  CookieManager := TCefCookieManagerRef.GetGlobalManager;
  setSuccess := CookieManager.SetStoragePath(dir);
  if setSuccess then
    ShowMessage('set new path success!!');
end; 
```

消息显示，表示设置存储路径成功。

当我执行我的程序并使用 TChromium 浏览器加载我的 gmail 时，它仍然
保留在登录控制台中，即使没有登录信息。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:28:03.720

我猜你同时执行你的 cotom 浏览器和 chrome 浏览器。

看起来 chrome 浏览器执行时 cookie 被锁定。

# php - 使用 AJAX 向自身 POST PHP 不返回预期值？

> ID：16159725
> 
> 赞同：0
> 
> 时间：2013-04-23T02:10:04.467
> 
> 标签：php, jquery, post

使用 AJAX 向自身 POST PHP 不返回预期值？

参数已成功发送到 POST，基于 Firebugs 控制台，但它不会将结果显示到同一页面。

如何解决这个问题？

劳动.php

```
 <?php

if(isset($_POST['from']) && isset($_POST['from']))
{
    echo 'from: '.$_POST['from'].
    ' to: '.$_POST['to'];
    //do something here
}

?>

<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Labor Reports</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#datepicker_from" ).datepicker();
    $( "#datepicker_to" ).datepicker();
    $( "button" )
      .button()
      .click(function() {
        $.ajax({
            url: 'labor.php',
            type: 'POST',
            data: { from: $('#datepicker_from').val().trim(), to: $('#datepicker_to').val().trim() }, 
            success: function(){

            }
        });
      });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:12:39.663

您没有对返回的数据做任何事情。

```
success: function(data){
    alert(data);
} 
```

`data`表示从服务器发回的响应。在您的情况下，它将是您`from`和`to`$_POST 值的回显输出。巧合的是，您还会将页面的其余部分发送回给您，您可能希望在回`return false;`显之后，以便它停止页面的打印。

# javascript - 我是否应该使用 jQuery 对话框？

> ID：16159730
> 
> 赞同：0
> 
> 时间：2013-04-23T02:10:49.540
> 
> 标签：javascript, jquery, user-interface

我在页面上有一个用户帖子列表，每个帖子的右上角都有一个图标。当用户将鼠标悬停在图标上时，我想显示有关帖子的其他信息，例如日期、时间、作者等。

我想在某种叠加层中显示附加信息，我想知道我应该使用 jQuery 对话框小部件还是只使用一些 javascript。我不认为 jQuery 工具提示可以解决问题，因为有些细节很长。

一些细节：

*   详细信息应在悬停时显示并在指针移开时消失
*   覆盖不需要是模态的。它不需要标题栏。
*   它应该出现在指针的当前位置，并且应该自动调整大小以适应内容

那么，我应该查看 jQuery 对话框小部件吗？或者只是一个javascript解决方案？

谢谢..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:19:26.730

位于用户光标旁边的临时非模态对话框实际上是一个工具提示。我会查看一个更高级的 jQuery 工具提示插件，例如[qTip2](http://craigsworks.com/projects/qtip2/)。它可以容纳许多不同类型的内容（图像、段落、视频），并且非常适合缩放以适应大型内容。

您应该对演示页面上的[AJAX 示例特别感兴趣。](http://craigsworks.com/projects/qtip2/demos/#ajax)

祝你好运！

# c - 为什么以下按位运算会返回意外结果？

> ID：16159732
> 
> 赞同：2
> 
> 时间：2013-04-23T02:10:57.537
> 
> 标签：c

3 位最多可容纳 7 (4 + 2 + 1)。我正在尝试使用按位运算来计算它。

```
3 is 0b011 
~3 is 0b100 
```

做一个按位或我希望0b111（即7）。相反，我得到

```
int result = (~3) | 3;
printf("%i\n", result); 
```

> -1

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T02:12:36.013

你做的一切都是正确的：`N | ~N`结果是一个由全1组成的二进制表示的数字。这样的数字被解释为负数的二进制补码`-1`表示[。](http://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T02:15:17.127

一个 有多少位宽`int`？您似乎认为它是三位宽。肯定不对！再猜。是什么`~0u`？试试`printf("%u\n", ~0u);`。怎么样`~1u`？...和`~2u`？你注意到一个模式吗？

注意`u`后缀，它告诉编译器它是一个`unsigned`文字。根据 n1570.pdf 的 6.2.6.2 ，您不能使用操作符处理有符号整数类型`~`...好吧，您*可以，但您可能会遇到陷阱表示和负零。*使用陷阱表示是未定义的行为。这*可能*适用于您的系统，但只是巧合。你想依赖巧合吗？

同样，我建议使用该`%u`指令来打印`unsigned`值，因为`%d`根据 n1570.pdf 的 7.21.6.1p29 会产生未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:05:31.163

```
#include <stdio.h>

int main (){
    unsigned d3 = 0b011;
    unsigned invd3 = ~d3;
    unsigned d4 = 0b100;
    unsigned result = d3 | invd3;
    printf("%X\n", result);//FFFFFFFF
    result = d3 | d4;
    printf("%X\n", result);//7
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:40:08.880

在代码中执行此操作后

```
 int result = (~3) | 3; 
```

添加这一行

```
 result= result & 0x07 
```

这将为您提供您期望的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T02:15:14.807

当你这样做时，`~3`你正在反转组成 3 的位 - 所以你`0000 0000 0000 0000 0000 0000 0000 0011`变成`1111 1111 1111 1111 1111 1111 1111 1100`. 由于设置了高位，这被解释为一个负数 - 所有的 1 都是 -1，比它少一个是 -2，少一个是 -3，依此类推。此数字是 -4 的有符号 32 位整数。

如果您将其与 3 进行二进制或，您将得到全 1（根据定义）——这是 -1 的有符号 32 位整数。

您唯一的问题是您认为您正在使用 3 位数字，但实际上您正在使用 32 位数字。

# html - Firefox 中不显示单元格边框

> ID：16159735
> 
> 赞同：1
> 
> 时间：2013-04-23T02:11:25.160
> 
> 标签：html, css, firefox, cell

我有一个非常简单的表格，应该同时显示表格和单元格边框。这在 Chrome 和 IE 中运行良好，但 Firefox 只显示表格边框，而不显示单元格边框。这是HTML：

```
<table border = "1" class ="MyTable">
   <tr>
       <td class = "c1"></td>
       <td class = "c2"></td>
       <td class = "c3"></td>
       <td class = "c4"></td>
       <td class = "c5"></td>
       <td class = "c6"></td>
       <td class = "c7"></td>    
       <td class = "c8"></td>
       <td class = "c9"></td>
       <td class = "c10"></td>
</tr>   
</table> 
```

（所有 td 类都将在后面的 javascript btw 中引用 - 但与这个问题无关，或者至少我不这么认为）

这是CSS：

```
table.MyTable {
    margin-left: 10%;
}

table.MyTable td
{   
   width: 20px;
   height:30px;
   border: 4px solid black;
} 
```

我试过 1）使用表 id 而不是表类；2)`<table border ="1" >`从 HTML 中删除并在 CSS 中添加样式信息；3) 将 CSS 代码拆分为单独的边框样式、边框颜色和边框宽度命令。在任何情况下，代码都会在 Chrome 和 IE 中正常显示，但在 Firefox 中则不会。

作为参考，它应该是这样的（在 Chrome 中）：

![在 Chrome 中正确渲染](https://i.stack.imgur.com/XKSuJ.png)

这是它在 Firefox 中的样子：

![Firefox 中的渲染不正确](https://i.stack.imgur.com/vy3nX.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:46:52.793

我已经找到了答案，我在这里添加它以防其他人有同样的问题。`<!DOCTYPE html>`在文档开头添加标签可以解决问题。

看看区别：

[http://www.users.on.net/~tschembri214/test1.html](http://www.users.on.net/~tschembri214/test1.html) - 正确显示

[http://www.users.on.net/~tschembri214/test.html](http://www.users.on.net/~tschembri214/test.html) - 无法正确显示

我已经确认第二个链接在 3 台不同计算机上的 Firefox 上无法正确显示。除了包含 doctype 标记之外，两个页面中的所有内容都是相同的。此外，这不会在 jsfiddle 上重现 - 它可以在 Firefox 上没有标签的情况下工作。

# c++ - 复制构造函数、深拷贝、常量引用

> ID：16159736
> 
> 赞同：1
> 
> 时间：2013-04-23T02:11:27.960
> 
> 标签：c++, memory-management, constants, copy-constructor, deep-copy

复制构造函数、深拷贝、常量引用

Q. 在内存管理方面。

**类 A 的复制构造函数的形式为 A(const A& a) 为什么参数是通过引用传递的？解释为什么我们不能定义形式为 A(A a) 的构造函数**

回答。我们这样做的三个原因：

1.  将对象作为参数传递时的常量引用更有效
2.  如果我们在没有 const 修饰符的情况下传递 A(A a)，则不应该更改的对象可能会被错误地更改
3.  我们这样做是为了进行 Deep Copy

这三个理由对吗？

请告诉我。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:13:40.153

```
A(A a) 
```

将需要生成一个副本，`a`因为它是按值传递的。因此，我们需要调用复制构造函数来进行复制。但是，在这种情况下，复制构造函数尚未定义，您无法生成 的副本`a`，因此应通过引用传递。

我们有格式：

```
 A(const A& a) 
```

注意：常量引用实际上是对常量的引用。这意味着我们通过`A`引用传递对象，并且`a`在复制`a`.

复制构造函数采用 const 引用的更重要的一点是临时对象不能绑定到非 const 引用。因此，复制构造函数必须引用 const 对象才能复制临时对象。

# c - 在 Visual Studio 2012 Express 中将 C 代码编译为 .bin 文件

> ID：16159738
> 
> 赞同：-2
> 
> 时间：2013-04-23T02:11:47.707
> 
> 标签：c, compiler-construction, visual-studio-2012, binary, bin

我想知道是否有一种方法可以设置编译器将我的代码编译成一个只有 1 和 0 的 .bin 文件，没有 .exe 文件中的十六进制代码。我希望代码在处理器上运行，而不是在操作系统上运行。是否有任何设置可以将其设置为 Express 版中的设置？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:06:28.523

“.bin”文件没有什么神奇之处。扩展名一般只表示二进制文件，但*所有*文件都是二进制的。因此，您可以通过将链接器生成的“.exe”文件重命名为“.bin”来创建“.bin”文件。

我想你不会对此感到满意，所以我会进一步详细说明。“.exe”文件扩展名（至少在 Windows 上是这样，因为您已经添加了与 Visual Studio 相关的标签，所以我假设它）意味着具有特殊格式的二进制文件 — [Portable Executable](http://en.wikipedia.org/wiki/Portable_Executable)或简称 PE。这是 Windows 操作系统上使用的二进制文件的标准形式，适用于可执行文件和 DLL。

所以PE文件是一个二进制（“.bin”）文件，但是一个未知的带有“.bin”扩展名的二进制文件*不一定*是PE文件。您可以获取其他一些二进制文件（如图像）并将其重命名为具有“.bin”扩展名。它只包含一系列没有特定格式的二进制位。您将无法执行该文件，因为它的格式不正确且可识别。它缺少使其可执行的神奇 PE 标头。C 构建系统默认输出 PE 文件是有原因的：这是唯一对您有用的文件类型。

就像 user1167662 在他的[评论](https://stackoverflow.com/questions/16159738/compiling-c-code-into-a-bin-file-in-visual-studio-2012-express#comment23093215_16159738)中所说的那样，十六进制代码没有什么神奇之处。二进制文件中的代码可以用十六进制*或*二进制格式表示。无论哪种方式，它都是完全相同的信息。任何好的文本编辑器（至少是为程序员设计的）都可以使用任一表示（或 ASCII 或十进制）打开和显示文件的内容。

> 我希望它尽可能低以获得最佳性能。

它没有任何“低级”，而且您肯定不会获得任何优化的性能。PE 文件已经包含直接在您的微处理器上运行的本机机器代码。它不会像托管代码那样被解释。它包含一系列处理器机器语言的指令。PE 文件只包含一个额外的头文件，允许它们被操作系统识别和执行。这对性能没有影响。

> 构建操作系统。

现在，这有点不同……特别是，这将比编写常规 Windows 应用程序困难得多。你有*很多*工作要做，因为你不能依赖操作系统来帮助你。您需要深入了解您所针对的底层硬件——针对您的 CPU 的开发人员指南/手册将非常有用。

而且您必须获得不同的构建环境。如果您不以可识别的格式创建 PE 文件，Visual Studio 不会对您有任何帮助。微软的 C++ 链接器也不包含在其中，`link.exe`. 链接器不支持输出“平面”二进制文件（即剥离了 PE 标头的文件）。您将需要一个不同的链接器。[GCC 工具集可以做到这一点](https://stackoverflow.com/questions/3615392/making-gcc-generate-only-machine-code)。有一个Windows端口；它被称为[MinGW](http://www.mingw.org/)。

我还推荐一本关于操作系统开发的书。回答 Stack Overflow 问题的内容太多了。出于学习目的，我*强烈*建议使用英特尔 x86 以外的架构。

# ruby - 如何使用正则表达式在 Ruby 中获取值标签？

> ID：16159745
> 
> 赞同：-1
> 
> 时间：2013-04-23T02:12:35.030
> 
> 标签：ruby, regex

我有标签：

```
val = "<a href=\"https://mobile.twitter.com\" rel=\"nofollow\">Mobile Web</a>" 
```

在我的测试中：

```
val[/(>.*<)/] 
```

回报：

```
>Mobile Web< 
```

我想返回文本：

```
Mobile Web 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:16:20.410

你可以用[Nokogiri](http://nokogiri.org/)解析它：

```
require 'nokogiri'

html = '<a href="https://mobile.twitter.com" rel="nofollow">Mobile Web</a>'
elem = Nokogiri(html)

puts elem.text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T03:43:49.317

您可以使用 match 并使用括号选择您想要的部分

```
/>(.*)</.match(val)[1] 
```

我会使用像 hpricot 或 nokogiri 这样的 html 解析库来进行 html 解析，因为可能有很多带有正则表达式的极端情况，直到它在某个地方在生产中运行数月并中断之后才明显！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:14:12.477

```
require 'nokogiri'

html = '<a href="https://mobile.twitter.com" rel="nofollow">Mobile Web</a>'
elem = Nokogiri::HTML::DocumentFragment.parse(html).child

p elem.text #=> Mobile Web 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T02:15:17.910

前瞻/后瞻将起作用。

```
val[/(?<=>)(.*)(?=<)/] 
```

# c++ - 有什么比使用 istream eof 更好地读取文件直到结束的方法？

> ID：16159749
> 
> 赞同：0
> 
> 时间：2013-04-23T02:12:43.383
> 
> 标签：c++, string, istream

我读过使用 istream eof 是“错误的”而不是“正式”的代码编写方式，那么使用什么代码更好呢？例如，我有以下代码：

```
using namespace std; //I've heard this is bad practice also

int main(){
    string line;
    ifstream myfile("example.txt");
    while(!myfile.eof()){
        getline(myfile, line);
    }//while
    //do something with line
}//main 
```

我应该用什么替换 !myfile.eof() ？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:21:30.177

关键是要实现[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)返回对流的引用，`true`如果流正常且`false`前一个操作失败，则返回对流引用的布尔操作。这包括无法打开文件。

```
while (getline(myfile, line))
{
    // do something with line
} 
```

`while`我不知道为什么您的原始示例在循环之外“做某事” 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T02:15:57.433

```
if (ifstream myfile("example.txt"))
{
    while (getline(myfile, line))
    {
        ...
    }
    if (!eof(myfile))
        std::cerr << "error before end of input file\n";
}
else
    std::cerr << "error opening input file\n"; 
```

# ios - 在 Objective C 中调用 c 函数

> ID：16159751
> 
> 赞同：0
> 
> 时间：2013-04-23T02:12:56.043
> 
> 标签：ios, objective-c, c, file, mixing

您好我正在尝试在 iOS 应用程序中使用一些纯 C 库，但是我不知道如何调用和传递参数。这里有 2 个函数，Node 是一个结构体：

```
Node *parse(FILE *f);
void add_subnode(Node *t, Node *parent); 
```

有人可以告诉我一些示例代码怎么做吗？或者向我指出一些关于这个主题的好书。

谢谢雷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:16:20.757

您可以像这样调用 C 函数：

```
Node *node = parse(f); // node will hold return value

add_subnode(t, parent); 
```

# ruby-on-rails-3 - 由于 gihub 上的 gem，乘客无法开始申请

> ID：16159760
> 
> 赞同：0
> 
> 时间：2013-04-23T02:13:52.093
> 
> 标签：ruby-on-rails-3, passenger

我有一个 Rails 应用程序，我上传到使用Passenger 的服务器。产生的错误是：

```
compile error PATH TO GEM FILE/Gemfile:28: syntax error, unexpected ':', expecting kEND ...ery-datatables-rails', github: 'rweng/jquery-datatables-rail... ^ 
```

在 gem 文件中，我有这个：

```
gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails' 
```

这是它失败的那条线。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:35:59.723

您在服务器上使用 Ruby 1.8 吗？当人们在安装 Ruby 1.8 时尝试使用 Ruby 1.9 哈希语法（例如`foo: 'bar'`，而不是`:foo => 'bar'`）时，我经常看到这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:42:44.720

Ruby 版本很重要。在服务器上，我有 1.8.7，语法应该是：

```
gem 'jquery-datatables-rails', :git => 'git://github.com/rweng/jquery-datatables-rails.git' 
```

# objective-c - (NSString *)name 是什么意思？

> ID：16159761
> 
> 赞同：-1
> 
> 时间：2013-04-23T02:14:06.793
> 
> 标签：objective-c

我正在阅读一本 Objective-C 的书来学习，并遇到了一个我不特别认识的符号：在标题中创建了指向“名称”的指针作为实例变量。

```
NSString *name; 
```

然后，在其中一个函数声明中，它说：

```
-(id)initWithName:(NSString*)name atFrequency:(double)freq; 
```

我知道这是一个名为的实例方法`initWithName:atFrequency:`，但我不明白参数的含义`(NSString*)name`。他将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:27:14.670

所谓的两件事`name`是完全无关的。正如您所说，一个（第一个）是一个实例变量。另一个是方法参数，对方法调用中提供的第一个参数的本地引用。所以如果有人说

```
[[MyClass alloc] initWithName:@"howdy" atFrequency:2]; 
```

然后*在*方法的主体内`initWithName:atFrequency:`，将有一个`name`带有值`@"howdy"`的变量（和一个`freq`带有值的变量`2.0`）。

然而，这令人不悦。您的局部变量掩盖了实例变量。这是不明智的，事实上我希望编译器会发出警告。

# html - 如何指定未禁用的 CSS 标签并将鼠标悬停在按钮上？

> ID：16159762
> 
> 赞同：0
> 
> 时间：2013-04-23T02:14:17.757
> 
> 标签：html, css

我正在尝试以下操作：

```
button:disabled {
    border-color: #50a3c8 #297cb4 #083f6f;
    background: #0c5fa5 url(/Content/images/old-browsers-bg/button-element-bg.png) repeat-x left top;
    .top-gradient( #FFF, #72c6e4, 4%, #0c5fa5);
    color: white;
}

button:not(disabled):hover {
    border-color: #1eafdc #1193d5 #035592;
    background: #057fdb url(/Content/images/old-browsers-bg/button-element-hover-bg.png) repeat-x left top;
    .top-gradient(#FFF, #2bcef3, 4%, #057fdb);
} 
```

但我的 IDE 说“禁用”不是有效的 HTML 标记，但仅适用于第二个 CSS 定义，其中 disabled 括在括号中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:16:46.463

那将是`:not(:disabled)`

[http://jsfiddle.net/yVanF/](http://jsfiddle.net/yVanF/)

只是为了更清楚一点：http: [//jsfiddle.net/yVanF/1/](http://jsfiddle.net/yVanF/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:17:35.010

试试这个，使用**:not(:disabled)**

```
button:not(:disabled):hover {
    border-color: #1eafdc #1193d5 #035592;
    background: #057fdb url(/Content/images/old-browsers-bg/button-element-hover-bg.png) repeat-x left top;
    .top-gradient(#FFF, #2bcef3, 4%, #057fdb);
} 
```

# authentication - 如何在 defaultLayout 中嵌入 BrowserID 登录按钮

> ID：16159764
> 
> 赞同：5
> 
> 时间：2013-04-23T02:14:25.533
> 
> 标签：authentication, haskell, yesod, browserid

BrowserID 的部分优点在于它对您网站上的基础架构要求非常低，您只需嵌入一个带有一些 javascript 的按钮，然后设置一个回调路由来处理身份验证后数据。我希望能够在 defaultLayout 模板内的所有页面顶部嵌入 BrowserID 登录按钮（然后根据登录状态有条件地显示/隐藏它），但我目前看不到这样做的方法。Auth 子站点通过将其“登录页面”嵌入到 defaultLayout 模板中来工作，但除此之外，它似乎是一个完整的黑盒。

如果可能的话，我真的希望能够避免滚动我自己的 BrowserID 登录处理程序或将用户重定向到一个完全独立的页面，该页面上只有一个 BrowserID 登录按钮。

有没有办法完成我正在尝试做的我只是想念的事情，或者我最好的选择真的是推出我自己的 BrowserID 登录代码？

查看 Yesod.Auth.BrowserId 模块的源代码，看起来我可以执行以下操作：

```
(apLogin authBrowserId) <not sure what would go here> 
```

为了获得登录小部件，但像这样劫持插件的胆量感觉很脏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:02:13.523

您可以使用[createOnClick](http://hackage.haskell.org/packages/archive/yesod-auth/1.1.7/doc/html/Yesod-Auth-BrowserId.html#v%3acreateOnClick)生成一个 Javascript 函数，然后在您的页面上插入任何类型的按钮/链接/图像。只需附加一个点击处理程序并让它调用该函数。

# python - 值的 Python 字典索引

> ID：16159766
> 
> 赞同：0
> 
> 时间：2013-04-23T02:14:43.113
> 
> 标签：python, dictionary, indexing, key, key-value

我目前正在尝试从字典中获取值的索引，但不确定要尝试什么。

我的字典是：

```
 midi2notes = {                                  
        'c':("0","12","24","36","48","60","72","84","96","108","120"),
        'des':("1","13","25","37","49","61","73","85","97","109","121"),
        'd':("2","14","26","38","50","62","74","86","98","110","122"),
        'ees':("3","15","27","39","51","63","75","87","99","111","123"),
        'e':("4","16","28","40","52","64","76","88","100","112","124"),
        'f':("5","17","29","41","53","65","77","89","101","113","125"),
        'ges':("6","18","30","42","54","66","78","90","102","114","126"),
        'g':("7","19","31","43","55","67","79","91","103","115","127"),
        'aes':("8","20","32","44","56","68","80","92","104","116"),
        'a':("9","21","33","45","57","69","81","93","105","117"),
        'bes':("10","22","34","46","58","70","82","94","106","118"),
        'b':("11","23","35","47","59","71","83","95","107","119")
    } 
```

示例：我想从 key-'c' 中获取 value-"60" 的索引。应该是 5。什么是最有效/最快的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:15:44.597

我会做：

```
midi2notes['c'].index('60') 
```

如果未找到索引，这将引发一个`ValueError`错误，但如果数字通常在元组中，则很难击败优化的 C 后端。

```
>>> midi2notes = {                                  
...         'c':("0","12","24","36","48","60","72","84","96","108","120"),
...         'des':("1","13","25","37","49","61","73","85","97","109","121"),
...         'd':("2","14","26","38","50","62","74","86","98","110","122"),
...         'ees':("3","15","27","39","51","63","75","87","99","111","123"),
...         'e':("4","16","28","40","52","64","76","88","100","112","124"),
...         'f':("5","17","29","41","53","65","77","89","101","113","125"),
...         'ges':("6","18","30","42","54","66","78","90","102","114","126"),
...         'g':("7","19","31","43","55","67","79","91","103","115","127"),
...         'aes':("8","20","32","44","56","68","80","92","104","116"),
...         'a':("9","21","33","45","57","69","81","93","105","117"),
...         'bes':("10","22","34","46","58","70","82","94","106","118"),
...         'b':("11","23","35","47","59","71","83","95","107","119")
...     }
>>> midi2notes['c'].index('60')
5
>>> midi2notes['c'].index('180')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: tuple.index(x): x not in tuple
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T02:20:17.977

如果您需要经常这样做，而不是每次都查找索引，只需创建一个`dict`将值映射回索引的方法：

```
midi2notes_map = {key: {value: index for index, value in enumerate(tup)}
                  for key, tup in midi2notes.items()} 
```

然后你可以这样做：

```
midi2notes_map['c']['60'] 
```

或者，或者：

```
midi2notes_map = {(key, value): index
                  for key, tup in midi2notes.items()
                  for index, value in enumerate(tup)}

midi2notes_map['c', 60] 
```

每次进行查找时，这应该会提高 5 倍的效率（因为您只需要对键进行散列，而不是线性搜索 10 个项目的元组）......但是当然构建地图需要一些时间，所以如果您只进行了几次查找，这可能不值得。

当然，在担心它之前，您应该确保此查找的性能确实相关。（我猜你能想出的最慢的实现，使用一个显式的嵌套循环，仍然足够快来播放一个 MIDI 序列……）如果是这样，使用`timeit`你的实际数据和使用模式设置一个测试找出实际上最快的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:18:35.033

与`enumerate()`：

```
>>> for x,y in enumerate(midi2notes['c']):
...     if y == "60":
...         print x
... 
5 
```

# c# - 为属性提供两个用于反序列化 JSON 的标识符

> ID：16159768
> 
> 赞同：1
> 
> 时间：2013-04-23T02:14:50.257
> 
> 标签：c#, json, deserialization

我在 C# 中使用 JavaScriptSerializer 将 JSON 反序列化为一个对象。

该对象具有以下属性：

```
public string plugin_name { get; set; }
public string slug { get; set; }
public string description { get; set; }
public string logo_full { get; set; }
public string[] categories { get; set; }
public Version[] versions { get; set; } 
```

问题是名称（例如`plugin_name`）不遵循通常的命名准则（pascal case）。有没有什么简单的方法可以给一个属性两个标识符？或者还有什么可以帮助我实现我想要的。我知道我可以这样做：

```
public string PluginName { get; set; }
public string plugin_name { set { PluginName = value; } } 
```

但是有没有更简单和更清洁的解决方案呢？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:22:48.430

根据[此文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_JsonProperty.htm)，您可以添加一个属性来协助此映射，而不必创建此重定向：

```
[JsonProperty("plugin_name")]
public string PluginName{get;set;} 
```

但是，正如所指出的，这是特定于 Json.NET 的。您可以改用它吗？

# python - 到数组的最小距离

> ID：16159770
> 
> 赞同：1
> 
> 时间：2013-04-23T02:14:58.500
> 
> 标签：python, numpy, scipy, distance

我从我的另一篇文章[点和曲线[之间的距离[（找到点和曲线python之间的距离](https://stackoverflow.com/questions/16158402/find-the-distance-between-a-point-and-a-curve-python/16158876#16158876)）中遵循了这个方法，但是出了点问题。数值不准确。

我在 Mathematica 中绘制了相同的轨迹并检查了一些距离，我发现距离与`18000`python 返回的最小值一样低`209000`。

底部的代码出了什么问题？

**编辑** 这段代码中有一个错误，现在一切都检查出来了。谢谢。

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = -129.21 * np.pi / 180  #  true anomaly angle in radian                       

x = 327156.0 - 4671
#  x location where the moon's SOI effects the spacecraft with the offset of the  
#  Earth not being at (0,0) in the Earth-Moon system                              
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = 0 * np.pi / 180  #  angle in radians of the flight path                   

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(nu) - pi2 * r12
#  spacecraft x location relative to the earth         
yrel = (re + 300.0) * np.sin(nu)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]                                                               
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[5] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[4] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0                                                    

dt = np.arange(0.0, 320000.0, 1)  #  200000 secs to run the simulation            
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show()

my_x, my_y, my_z = (384400,0,0)

delta_x = x - my_x
delta_y = y - my_y
delta_z = z - my_z
distance = np.array([np.sqrt(delta_x ** 2 + delta_y ** 2 +
           delta_z ** 2)])

print(distance.min()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:00:39.363

更正的代码

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = -129.21 * np.pi / 180  #  true anomaly angle in radian                       

x = 327156.0 - 4671
#  x location where the moon's SOI effects the spacecraft with the offset of the  
#  Earth not being at (0,0) in the Earth-Moon system                              
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = 0 * np.pi / 180  #  angle in radians of the flight path                   

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(nu) - pi2 * r12
#  spacecraft x location relative to the earth         
yrel = (re + 300.0) * np.sin(nu)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]                                                               
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[4] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[3] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0       

dt = np.arange(0.0, 320000.0, 1)  #  200000 secs to run the simulation            
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show()

my_x, my_y, my_z = (384400,0,0)

delta_x = x - my_x
delta_y = y - my_y
delta_z = z - my_z
distance = np.array([np.sqrt(delta_x ** 2 + delta_y ** 2 +
           delta_z ** 2)])

print(distance.min()) 
```

# java - Java 桌面中的广告

> ID：16159771
> 
> 赞同：2
> 
> 时间：2013-04-23T02:15:05.020
> 
> 标签：java, android, admob, desktop

我正准备部署一个使用 LIBGDX 为安卓和台式电脑开发的游戏。有没有办法在桌面应用程序中投放广告？我也想从桌面广告中获得收入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:43:35.003

您必须在桌面应用程序中粘贴一个浏览器小部件并在其中显示广告。然而，JEditorPane 的 HTML 支持非常原始，因此您必须搜索可嵌入的 Java 浏览器或支持现代 HTML 的 JEditorPane 的自定义子类（我认为 JEditorPane 支持停止于 HTML 3.2）。有一些免费的替代品只需谷歌搜索即可。

在我的脑海中，我根本想不出任何面向桌面应用程序的广告网络，所以浏览器方法可能是你做你想做的事情的唯一真正机会。

# python-sphinx - 指令和条目错误之间缺少空白行

> ID：16159781
> 
> 赞同：1
> 
> 时间：2013-04-23T02:15:29.567
> 
> 标签：python-sphinx, toctree

我刚刚使用 Sphinx 创建了我的文档，这是我的问题：最初在 Toc 树指令中是空的，然后我在下面添加“教程”，它看起来像这样：

```
.. toctree::
   :maxdepth: 2
    tutorial 
```

当我“制作 html”时，我没有在索引页面上获得“教程”。然后我在与 index.rst 相同的目录中创建了一个 tutorial.rst。我再次“制作 html”并收到以下错误消息：

> toctree 包含对不存在文档的引用

我该如何解决 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T15:01:10.293

也许试试这个：

```
.. toctree::
   :maxdepth: 2

   tutorial <tutorial>

.. 
```

假设您的 tutorial.rst 文件位于 index.rst 文件同一级别的“源”目录中

注意：换行符在目录树选项和页面列表之间很重要。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-02-22T11:35:31.257

您必须在 maxdepth 定义和文件名之间有一个空行。

# node.js - Node.js：解析包含端口的 url

> ID：16159782
> 
> 赞同：0
> 
> 时间：2013-04-23T02:15:33.683
> 
> 标签：node.js, url, port, resolve

我想解析一个包含端口的 url。具体例子：

```
mainServerURL   ='localhost:8080/';
tempFilesDir    ='/temp'; 
```

如果我在这两个变量上调用 url.resolve，我得到

```
'localhost:/temp' 
```

但我实际上正在寻找：

```
'localhost:8080/temp' 
```

我的代码非常简单，所以恐怕我必须使用 url.resolve 错误（可能是由于我这边的理论错误），但我环顾四周，找不到另一种方法。

当然有字符串方式，但我猜它是可以避免的？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:45:35.827

URL 的主机可以[用](http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost)前缀来表示`//`：

```
> var mainServerURL = '//localhost:8080/';
undefined
> var tempFilesDir  = '/temp';
undefined
> url.resolve(mainServerURL, tempFilesDir)
'//localhost:8080/temp' 
```

没有它，`localhost:`将被视为协议而不是主机名：

```
> url.parse('localhost:8080/', false, true)
{ protocol: 'localhost:',
  host: '8080',
  port: null,
  hostname: '8080',
  ... } 
```

# oracle - 使用 Oracle 正则表达式将字符串（由连续分隔符分隔）转换为行

> ID：16159793
> 
> 赞同：0
> 
> 时间：2013-04-23T02:16:47.703
> 
> 标签：oracle

我在 Oracle 中有一个由连续分隔符波浪号 (~) 分隔的通用字符串。例如，字符串是'apple~orange~~mango~~grapes'。它需要转换为行，但要注意的重要一点是分隔符是连续的波浪号而不是单个波浪号。输出应如下所示：

苹果~橙子

芒果

葡萄

解决方法已经使用 instr 和 substr oracle 函数完成，但我需要使用 Oracle 正则表达式的更清洁的解决方案。我试过使用下面的查询，但没有得到正确的解决方案：

```
WITH str AS (SELECT 'apple~orange~~mango~~grapes' str FROM dual),
     cnt AS (SELECT LEVEL sno FROM dual CONNECT BY LEVEL < 5)
SELECT regexp_substr (str, '[^~]+', 1, sno) FROM str CROSS JOIN cnt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:55:39.783

试试这个（你可以使用任何类似`*, ^, #`etc的字符，`,`除非你期望你的任何字符串包含`,`作为实际值）：

```
WITH STR AS (SELECT REPLACE('apple~orange~~mango~~grapes','~~',',') STR FROM DUAL),
     CNT AS (SELECT LEVEL SNO FROM DUAL CONNECT BY LEVEL < 4)
SELECT REGEXP_SUBSTR (STR, '[^,]+', 1, SNO) FROM STR CROSS JOIN CNT; 
```

您还可以将 XML 与 oracle 一起使用

```
WITH CTE AS (SELECT '"' 
             || REPLACE('apple~orange~~mango~~grapes','~~','","') 
             || '"' STR FROM DUAL)
select column_value str from cte, xmltable(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:08:38.340

尝试这个，

```
select 
          t.str
         , regexp_substr (t.str, '[^~(?=~)]+', 1, rn) spl
    from YOURTABLE t
     cross
     join (select rownum rn
       from (select max (length (regexp_replace (t.str, '[^~~]+'))) + 1 mx
                     from YOURTABLE t
                  )
          connect by level <= mx
          )
   where regexp_substr (t.str,'[^~(?=~)]+' , 1, rn) is not null) 
```

# jquery - 表 td 或 (div) 不透明度在悬停时更改 td 或 (div) 的其余部分

> ID：16159794
> 
> 赞同：0
> 
> 时间：2013-04-23T02:16:53.320
> 
> 标签：jquery, css, jquery-ui

当我悬停一个`td`元素时，如何更改`td`除悬停元素之外的所有元素的不透明度？

[小提琴](http://jsfiddle.net/jhunlio/n9MmT/)

![在此处输入图像描述](https://i.stack.imgur.com/FoK9X.jpg)

html:

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>  
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>  
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>  
    </tr>
  </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T02:20:10.713

创建一个将鼠标悬停在表格上的规则，该规则会改变所包含的所有图像的不透明度。*然后，您可以为悬停的img*创建一个规则，将不透明度设置为 1。设置单个图像而不是整个表格的不透明度很重要，因为子图像不能比其父图像更不透明。

```
table:hover td img {
    opacity: .5;
}
table td img:hover {
    opacity: 1;
} 
```

[http://jsfiddle.net/n9MmT/1/](http://jsfiddle.net/n9MmT/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:33:20.617

试试这个我想，它会在 IE 上工作。

```
table:hover td img {
  opacity: .5;
  filter:alpha(opacity=50);
}
table td img:hover {
  opacity: 1;
  filter:alpha(opacity=100);
} 
```

[演示](http://jsfiddle.net/n9MmT/3/)

[参考](http://www.w3schools.com/css/css_image_transparency.asp)

# rust - 我可以在我的代码中导入 libsyntax 吗？

> ID：16159796
> 
> 赞同：2
> 
> 时间：2013-04-23T02:16:56.950
> 
> 标签：rust

我想在我的代码中导入 rust 词法分析器

```
use syntax;

fn main() { () } 
```

但上面的代码无法编译

```
error: failed to resolve imports
testparse.rs:1:4: 1:11 error: unresolved import
testparse.rs:1 use syntax;
                   ^~~~~~~
error: aborting due to 2 previous errors 
```

我可以从用户代码中使用 libsyntax 吗？如果可以，如何导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:35:03.163

您需要添加库：

```
extern mod syntax; 
```

# android - 如何跟踪虚拟键盘中的向下箭头按钮？

> ID：16159802
> 
> 赞同：6
> 
> 时间：2013-04-23T02:17:47.373
> 
> 标签：android, softkeys

![在此处输入图像描述](https://i.stack.imgur.com/pwZ7j.png)

> 在上图中，我想听向下箭头（我用红色标记了它，用于隐藏键盘的键）。我试图通过菜单选项、视图配置类等来让它发挥作用。但它没有用。是否有任何方法、侦听器或任何回调事件来跟踪此按钮。请让我知道您的建议和想法。在这方面的任何帮助都是非常可观的

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T02:30:19.567

在您的活动中，覆盖此方法：http: [//developer.android.com/reference/android/app/Activity.html#onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed())

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-23T04:46:47.793

如果我不是你在谈论这种方法

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
super.onKeyDown(keyCode, event);
    switch(keyCode)
    {

    case KeyEvent.KEYCODE_BACK:
     Toast.makeText(KeyActions.this, "Pressed Back Button", Toast.LENGTH_SHORT).show();

        return true;
    }

    return false;
} 
```

# jquery - 我想嵌入一堆没有错误的第三方社交bs

> ID：16159805
> 
> 赞同：0
> 
> 时间：2013-04-23T02:18:07.980
> 
> 标签：jquery, api, google-maps, social, same-origin-policy

所以基本上我使用插件和嵌入从其他地方提取我的内容以及从我自己的数据库中提取 AJAX。它主要工作，但每个页面加载我得到 100 多个错误（不安全的 JavaScript 尝试使用 URL 访问框架），同源策略的东西。

谷歌地图的标记是：

```
<a class="various iframe" href="http://maps.google.com.au/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=ADDRESSINFO&amp;output=embed">
    <img src="map.png" alt="gmaps" width="100"/>
</a> 
```

YouTube：

```
<a class='various iframe' href='http://www.youtube.com/embed/VIDEOCODE' rel='venue-photos'>
    <img src="videothumb.png" alt="gmaps" width="100"/>
</a> 
```

我还连接到 facebook 和 twitter。

我拥有或可以获得密钥和 API 令牌。

简短错误：“不安全的 JavaScript 尝试使用 URL 访问框架”

长错误：“不安全的 JavaScript 尝试从 URL 为“Twitter URL”的框架访问 URL 为“MYURL”的框架。请求访问的框架将“document.domain”设置为“twitter.com”，但被访问的框架没有。两者必须将 'document.domain' 设置为相同的值才能允许访问。”

感谢您提供有关更改 document.domain 的任何建议，我不确定如何在获取数据时来回切换或触发更改？以及它如何影响我自己的 AJAX 起源。

您将哪些代码用于社交插件？它们似乎在不断变化，我经常需要稍微不同的片段来处理画廊插件等。所以我把他们所说的和插件开发者所说的混合在一起。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:49:53.717

您基本上是在尝试从主页访问框架中的 javascript（反之亦然）。如果它们指向不同的域（例如您的域与 twitter.com），则您不能这样做，但是您可以自由地嵌入它们。即框架可以包含您想要的任何内容，只是不要从您的框架调用该框架中的函数（反之亦然）。

您应该/可以访问的加载框架中的唯一属性是父级的位置属性。`parent.location`

# java - 按住一个键

> ID：16159806
> 
> 赞同：0
> 
> 时间：2013-04-23T02:18:09.233
> 
> 标签：java, keyboard, key, mouse

在我的应用程序中，我想添加一个按键事件，其中几个键被不断按下。

如果我退出我的申请，他们仍然会受到压力。这有点难以解释，但我希望我的电脑认为我正在按下这些键或鼠标。

# c++ - 错误 LNK2019 - 我觉得我的代码应该可以编译，但出现此错误

> ID：16159807
> 
> 赞同：-5
> 
> 时间：2013-04-23T02:18:18.517
> 
> 标签：c++, lnk2019

如果有人可以帮助我弄清楚为什么会发生这个错误，我会非常高兴。我觉得我的代码应该可以编译，但是我的两个 void 函数都出现了这个错误。

这是我的代码...

```
#include<iostream>
#include<iomanip>
#include<fstream>

using namespace std;

// global constant variables
const int YEARS = 8;
const int MONTHS = 12;
const int SPACER =5;

// function prototypes

// function to read in values
void getData(double[][MONTHS], int[]);
// function to display values in table format
void printData(double[][MONTHS], int[]);

// function to print data to screen in table format using arrays

int main()
{
    double rain [YEARS][MONTHS];
    int years[YEARS];

    getData(rain, years);
    printData(rain, years);

return 0;
}

// function definitions 

void getData (double rainArray[][YEARS], int yearArray[])
{
    ifstream fin;

    fin.open("rainfall.txt");

    if (!fin)
    {
        cout << "Error opening file, shutting down now.\n" ;
        exit(EXIT_FAILURE);
    }
    else
    {
        for( int i = 0; i < YEARS; i++)
        {
            fin >> yearArray[i];
            for (int j = 0; j < MONTHS; j++)
            {
                fin >> rainArray[i][j];
            }
        }
    }
    fin.close();
}   

void printData (double rainArray[][YEARS], int yearArray[])
{

    for ( int i = 0; i < YEARS; i++){
        cout << yearArray[i] << setw(SPACER);
        for ( int j = 0; j < MONTHS; j ++)
            cout << rainArray[i][j] << setw(SPACER);
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:25:29.223

您的`genData`参数和`rain`数组中存在尺寸不匹配：您有：

```
 double rain [YEARS][MONTHS]; 
```

但以错误的方式使用它：

```
 void getData (double rainArray[][YEARS], int yearArray[])
                    //^^^ should be rainArray[YEARS][MONTHS] 
```

`printData`该功能的类似问题

# ruby-on-rails - NilClass:Class Rails 3 的未定义方法“model_name”

> ID：16159810
> 
> 赞同：0
> 
> 时间：2013-04-23T02:18:38.987
> 
> 标签：ruby-on-rails, ruby

我对 Rails 很陌生，并且不断收到以下错误。任何帮助将不胜感激。请！

错误：NilClass:Class 的未定义方法“model_name”

这是我的会员控制器。

```
class MembershipsController < ApplicationController

 def new
 end

 def create
  @user = User.find_by_email(params[:email])
  @project = Project.find(params[:project_id])
  @membership = @project.memberships.build(project_id: @project.id, user_id: @user.id)
  redirect_to project_url(@membership.project_id)
 end

end 
```

这是我的会员表格。它嵌套在项目路线下方。

```
<%= form_for([:project, @membership]) do |f|%>
  <div class="field">
   <%= f.label "Enter the email of the person you'd like to invite:" %>
   <%= text_field_tag :email %>
  </div>

  <div class="actions">
   <%= f.submit "Save", :class=>"btn btn-primary btn-large" %>
  </div>
<% end %> 
```

供您参考，memberships 表是项目表和用户表之间的连接表。

我不知道为什么我不断收到上面的错误。也许我缺少一些东西。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:34:11.560

您的表单应该`form_for [@project, @membership]`是`@project`Project 实例，而不是`:project`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:32:06.060

找不到@user 或@project 2 个对象之一。虽然结果为零。您不能在 nil 对象上调用方法。为了更好地了解故障对象在哪里记录结果。

```
Rails.logger.debug @user.inspect
Rails.logger.debug @project.inspect 
```

# signalr - SignalR 不工作：$.connection.client 为空或未定义

> ID：16159813
> 
> 赞同：7
> 
> 时间：2013-04-23T02:19:09.787
> 
> 标签：signalr

在花了两天时间让这个工作没有成功之后，最后我在这里问这个问题。

背景：我正在尝试使用 SignalR 将实时数据从我的桌面应用程序发送到所有网页。

我所拥有的是一个控制台应用程序（这只是为了让概念工作，然后将其移动到活动项目），需要将实时数据发送到内置于 asp .net 中的网页。两者都使用.Net 4。

在 IE9 中，它在“chat.client.broadcastMessage =”行的调试模式下显示错误，说 chat.client 为空或未定义。

在 firfox 中，它没有向我显示该错误，但它没有工作/没有做任何事情，并且问题与它没有向我显示警报（'asking for name'）相同；window 所以我猜它没有到达那里并在此之前抛出错误。

这是我的网页代码。这是一个新的独立网站项目。

```
<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="message" />
        <input type="button" id="sendmessage" value="Send" />
        <input type="hidden" id="displayname" />
        <ul id="discussion">
        </ul>
    </div>
    <!--Script references. -->
    <!--Reference the jQuery library. -->

    <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.json-2.2.min.js" type="text/javascript"></script>
    <script src="Scripts/json2.js" type="text/javascript"></script>
    <!--Reference the SignalR library. -->

    <script src="Scripts/jquery.signalR-1.0.1.min.js" type="text/javascript"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <!--Add script to update the page and send messages.--> 
    <script type="text/javascript">
        $(function () {
            alert('starting scrip');
            // Declare a proxy to reference the hub. 
            $.connection.hub.url = 'http://<ipaddressORlochost>:8080/chatroom';
            alert($.connection.hub);
            alert($.connection.hub.url);
            var chat = $.connection.chatHub;
            // Create a function that the hub can call to broadcast messages.
            alert(chat);
            chat.client.broadcastMessage = function (name, message) {
                // Html encode display name and message. 
                var encodedName = $('<div />').text(name).html();
                var encodedMsg = $('<div />').text(message).html();
                // Add the message to the page. 
                $('#discussion').append('<li><strong>' + encodedName
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            };
            alert('asking for name');
            // Get the user name and store it to prepend to messages.
            $('#displayname').val(prompt('Enter your name:', ''));
            // Set initial focus to message input box.  
            $('#message').focus();
            // Start the connection.
            $.connection.hub.start({ jsonp:true}).done(function () {
                $('#sendmessage').click(function () {
                    // Call the Send method on the hub. 
                    chat.server.send($('#displayname').val(), $('#message').val());
                    // Clear text box and reset focus for next comment. 
                    $('#message').val('').focus();
                });
            });
        });
    </script>
</body>
</html>
------------------------- 
```

我尝试删除下面的行并在最后添加“/signalr”。

$.connection.hub.url = 'http://:8080/chatroom';

这是我的桌面应用程序（服务器）代码。

```
class Program
    {

        static void Main(string[] args)
        {

            using (WebApplication.Start<Startup>(@"http://<ipaddressORlochost>:8080/chatroom"))
            {

                while (true)
                {
                   // GlobalHost.ConnectionManager.GetHubContext<ChatHub>().Clients.All.addMessage("dsf","asdfd");
                    Console.WriteLine("Tags sent :" + DateTime.Now.ToString("HH:mm:ss"));
                    Thread.Sleep(3000);
                }
            }

        }

 class Startup
    {

        public void Configuration(IAppBuilder app)
        {
            var config = new HubConfiguration { EnableCrossDomain=true };
            app.MapHubs(config);
        }
    }

    public class ChatHub : Hub
     {
        public void Send(string b,string a)
        {
          try
           {
                Clients.All.broadcastMessage(b,a);
            }
             catch { }
        }
     } 
```

任何帮助将非常感激。

提前谢谢大家。

-------------- 找到答案 ---------- 已编辑此问题，因为无法在 8 小时内回答我自己的问题

大家好

以防万一其他人有同样的问题。我找到了答案/已修复。

感谢**[旗木卡卡西](https://stackoverflow.com/questions/12396233/connection-is-undefined-signalr-0-5-3-mvc4/16160077#16160077)**

主要问题是 $.connection 现在更改为 $.hubConnection

这是我必须改变的。

我的网页中的脚本。我留下了注释代码以显示替换为什么。

```
 <script type="text/javascript">
        $(function () {
            alert('starting scrip');
            // Declare a proxy to reference the hub. 
            // $.connection.hub.url = 'http://localhost:8080/chatroom';
            var conn = $.hubConnection('http://localhost:8080/chatroom');

            alert($.connection.hub);
            alert($.connection.hub.url);

            var chat = conn.createHubProxy('chatHub'); //$.connection.chatHub;
            // Create a function that the hub can call to broadcast messages.
            alert(chat);
            //            chat.client.broadcastMessage = function (name, message) {
            //                // Html encode display name and message. 
            //                var encodedName = $('<div />').text(name).html();
            //                var encodedMsg = $('<div />').text(message).html();
            //                // Add the message to the page. 
            //                $('#discussion').append('<li><strong>' + encodedName
            //                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            //            };
            chat.on('addMessage', function (a, message) {

                $('#discussion').append('<li><strong>' + $('<div />').text(a).html()
                                + '</strong>:&nbsp;&nbsp;' + $('<div />').text(message).html() + '</li>');

            });

            alert('asking for name');
            // Get the user name and store it to prepend to messages.
            $('#displayname').val(prompt('Enter your name:', ''));
            // Set initial focus to message input box.  
            $('#message').focus();
            // Start the connection.
            conn.logging = true;
            // Start the connection
            conn.start().done(function () {
                alert("Now connected!");
            }).fail(function () {
                alert("Could not Connect!");
            });

//            $.connection.hub.start({ jsonp: true }).done(function () {
//                $('#sendmessage').click(function () {
//                    // Call the Send method on the hub. 
//                    chat.server.send($('#displayname').val(), $('#message').val());
//                    // Clear text box and reset focus for next comment. 
//                    $('#message').val('').focus();
//                });
//            });
        });
    </script> 
```

在服务器端（桌面应用程序），因为这是一种方式，只有我不需要 ChatHub 中的任何内容

```
 static void Main(string[] args)
        {

            using (WebApplication.Start<Startup>(@"http://localhost:8080/chatroom"))
            {

                while (true)
                {
                    GlobalHost.ConnectionManager.GetHubContext<ChatHub>().Clients.All.addMessage("dsf", "Tags sent :" + DateTime.Now.ToString("HH:mm:ss"));
                    Console.WriteLine("Tags sent :" + DateTime.Now.ToString("HH:mm:ss"));
                    Thread.Sleep(500);
                }
            }

        }

 class Startup
    {

        public void Configuration(IAppBuilder app)
        {
            var config = new HubConfiguration { EnableCrossDomain=true };
            app.MapHubs(config);
        }
    }
 public class ChatHub : Hub
       {
            /public void Send(string b, string a)
           //{
           //    try
           //    {
           //        Clients.All.addMessage(b, a);
           //    }
           //    catch { }
           //}
       } 
```

希望这对其他人有帮助。

# php - json_decode 无法显示数组

> ID：16159815
> 
> 赞同：-3
> 
> 时间：2013-04-23T02:19:19.303
> 
> 标签：php, arrays, json

好的，我查看了一些示例，但似乎无法显示数组或元素。它一直以 null- 的形式返回。我有以下 JSON（来自 mapquest）

```
renderGeocode({
    results: [
        {
            locations: [
                {
                    latLng: {
                        lng: -90.1978,
                        lat: 38.627201
                    },
                    adminArea4: "Saint Louis City",
                    adminArea5Type: "City",
                    adminArea4Type: "County",
                    adminArea5: "Saint Louis",
                    street: "",
                    adminArea1: "US",
                    adminArea3: "MO",
                    type: "s",
                    displayLatLng: {
                        lng: -90.1978,
                        lat: 38.627201
                    },
                    linkId: 0,
                    postalCode: "",
                    sideOfStreet: "N",
                    dragPoint: false,
                    adminArea1Type: "Country",
                    geocodeQuality: "CITY",
                    geocodeQualityCode: "A5XAX",
                    mapUrl: "http://www.mapquestapi.com/staticmap/v4/getmap?key=123456789&type=map&size=225,160&pois=purple-1,38.627201,-90.1978,0,0|&center=38.627201,-90.1978&zoom=12&rand=1390479880",
                    adminArea3Type: "State"
                }
            ],
            providedLocation: {
                location: "SAint Louis,mo"
            }
        }
    ],
    options: {
        ignoreLatLngInput: false,
        maxResults: -1,
        thumbMaps: true
    },
    info: {
        copyright: {
            text: "© 2013 MapQuest, Inc.",
            imageUrl: "http://api.mqcdn.com/res/mqlogo.gif",
            imageAltText: "© 2013 MapQuest, Inc."
        },
        statuscode: 0,
        messages: [

        ]
    }
}) 
```

我试图将它添加到这样的数组中

```
$array =json_decode($data, true); 
```

但是，无论我如何尝试打印或检查内容，它都返回为空，我真的只是想打印出 lat lng 和 adminArea5。任何帮助都会很棒。

这是完整的代码

```
<?php
$where = filter_input(INPUT_GET, 'where', FILTER_SANITIZE_STRING);
$source = "getLat";
if ($source =="getLat")
{
    ob_start();
    $getsource = array('location' =>$where,
            'type'=>$getWhat,
            'callback'=>'ResultSet'
    );
    $url = "http://www.mapquestapi.com/geocoding/v1/address?key=123456789" . http_build_query($getsource, '', "&");
//print_r($url);
    $data_mapquest = file_get_contents($url);
    $array = json_decode($data_mapquest, true);
    ob_end_flush();
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:44:50.400

不要包含`'callback' => 'ResultSet'`使响应成为[*JSONP*](http://en.wikipedia.org/wiki/JSONP)响应的参数。

# javascript - 多次提交具有不同值的 HTML 表单

> ID：16159818
> 
> 赞同：3
> 
> 时间：2013-04-23T02:19:32.037
> 
> 标签：javascript

阅读我列出了多个 IP 地址的列表框（dpAddress）。我选择了其中的几个，并希望使用以另一种形式 (loginForm) 提供的用户名-密码-域向每个选定的 IP 发送请求。如果我在列表中选择了 2 个 IP 地址，我已经验证循环可以工作 2 次。但它只打开一个新标签。

我想在表单提交后在浏览器的同一窗口中打开多个选项卡并显示结果。我怎样才能做到这一点？

```
function formSubmit1()
    {
     len = document.dpForm.dpAddress.length
     i = 0

     for (i = 0; i < len; i++) {
        if (document.dpForm.dpAddress[i].selected) {
            alert(document.dpForm.dpAddress[i].selected)
            var f = document.createElement("form");
            f.setAttribute('method',"post");

            var user = document.createElement("input"); //input element, text
            user.setAttribute('type',"text");
            user.setAttribute('name',"user");
            user.setAttribute('value',document.loginForm.user.value);

            var pass = document.createElement("input"); //input element, Submit button
            pass.setAttribute('type',"text");
            pass.setAttribute('name',"pass");
            pass.setAttribute('value',document.loginForm.pass.value);

            var domain = document.createElement("input"); //input element, Submit button
            domain.setAttribute('type',"text");
            domain.setAttribute('name',"domain");
            domain.setAttribute('value',document.loginForm.domain.value);

            f.appendChild(user);
            f.appendChild(pass);
            f.appendChild(domain);

            host = document.dpForm.dpAddress[i].value;

            address = "https://"+host+":9090/sys.login";
            f.setAttribute("target", "_blank");         
            f.setAttribute('action',address);
            f.submit();
        } 
     } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:52:32.773

使其工作的一种方法是给窗口一个唯一的目标属性并在提交表单之前打开它们。

```
function formSubmit1() {
    len = document.dpForm.dpAddress.length
    i = 0

    for (i = 0; i < len; i++) {
        if (document.dpForm.dpAddress[i].selected) {

            // ... other code goes here

            address = "https://" + host + ":9090/sys.login";
            f.setAttribute("target", "window-" + i); // a unique id instead of "_blank"
            f.setAttribute('action', address);
            window.open(address, "window-" + i); // pop open a window with that same id and the form will submit into it
            f.submit();
        }
    }
} 
```

这是一个[功能演示](http://jsfiddle.net/UUd5h/1/)，展示了该技术的实际应用（确保您的弹出窗口阻止程序已禁用）。

# asp.net-mvc-4 - MVC4 项目和 ImageResizer

> ID：16159820
> 
> 赞同：4
> 
> 时间：2013-04-23T02:20:00.347
> 
> 标签：asp.net-mvc-4, imageresizer

问题：在任何页面访问中使用 ImageResizer 的 MVC 4 测试应用程序响应“无法加载类型‘ImageResizer.InterceptModule’”

为了测试和了解 ImageResizer 的工作原理，在 VS 2012 中创建了一个 MVC4 项目，创建了一个控制器来显示 HelloWorld 页面。按预期工作。

下一步是从 NuGet 添加 ImageResizer。已安装 MVC 的 ImageResizer Web.Config 安装。这个包增加了三个额外的包：

ImageResizer Web.Config 安装 ImageResizer.MVC - MVC 友好的 utilitite ImageResizer

尝试运行应用程序会导致黄屏死机，并显示“无法加载类型'ImageResizer.InterceptModule。'

尝试解决但没有成功包括：

1.  验证 DLL 是否存在。
2.  删除并重新安装软件包。
3.  从工作的网络表单应用程序复制 ImageResizer dll
4.  ImageResizer 故障排除指南中的第 1 项似乎不是问题“1.您的网站内部有一个“子站点”（应用程序文件夹）。应用程序文件夹从其父站点继承所有 Web.config 设置，但期望在他们自己的 /bin 文件夹中拥有这些设置引用的所有 dll 的自己的副本。您可以通过 (a) 将 app 文件夹更改为虚拟文件夹，(b) 添加 ImageResizer.dll 和插件的副本来解决此问题该应用程序内的 /bin 文件夹，或 (c) 使用子 Web.config 中的语句来取消从父 Web.config 继承的语句。选项 (c) 将禁用子应用程序内的图像大小调整。

是的，views 目录中有一个 web.config 文件。尝试创建图像调整器 dll 并将其复制到视图中的 bin 目录 - 没有成功。尝试将删除添加到视图目录中的 web.config。再次没有成功。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T15:51:31.423

问题已解决 - 自己造成的。

将测试项目命名为 imageresizer 似乎是个好主意。这当然创建了一个 dll 名称 imageresizer，它遍历了真正的 imageresizer dll。

# c# - 只有一种颜色的 Visifire 点图

> ID：16159824
> 
> 赞同：0
> 
> 时间：2013-04-23T02:20:21.677
> 
> 标签：c#, charts, visifire

我正在尝试使用 visifire 点图绘制一些数据，但我只想要一种颜色而不是彩虹色，或者如果我添加另一个数据集，则为我正在绘制的每个数据集使用不同的颜色。这是我到目前为止所拥有的。

```
ColorSet ct = new ColorSet();
ct.Id = "MyColorSet";
ct.Brushes.Add(new SolidColorBrush(Colors.Blue));

// Create a Chart element
Chart chart = new Chart();

//Create new instance of ColorSets class
chart.ColorSets = new ColorSets();
chart.ColorSets.Add(ct);
chart.ScrollingEnabled = false;
chart.AnimatedUpdate = true;

            // Set chart width and height
            chart.Width = 1400;
            chart.Height = 400;
            chart.ZoomingEnabled = true;

            // Create new DataSeries
            DataSeries dataSeries = new DataSeries();
            dataSeries.RenderAs = RenderAs.Point;
            dataSeries.MarkerType = MarkerTypes.Triangle;
            dataSeries.MarkerSize = 3.5;

            // Loop and add a few DataPoints
            for (int loopIndex = 0; loopIndex < numOfPoints; loopIndex++)
            {
                // Create a DataPoint
                DataPoint dataPoint = new DataPoint();

                // Set the YValue using random number
                dataPoint.YValue = arr[loopIndex].mass;
                dataPoint.XValue = arr[loopIndex].num;
                // Add DataPoint to DataSeries
                dataSeries.DataPoints.Add(dataPoint);
            }

            // Add DataSeries to Chart
            chart.Series.Add(dataSeries);

            // Add chart to the LayoutRoot for display
            ChartGrid.Children.Add(chart); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:04:09.367

我想到了。

```
 System.Windows.Media.Brush brush = new SolidColorBrush(Colors.DarkRed);
 dataSeries.Color = brush; 
```

# python - 如何计算 Str 中的重复字符

> ID：16159826
> 
> 赞同：1
> 
> 时间：2013-04-23T02:20:38.163
> 
> 标签：python, string, python-3.x

大家我只是想知道如何计算str中ch中的重复，我写的函数是：

```
def repeat(s):
    '''
    '''
    count = 0 
    L = []

    for i in range(len(s)):
        count = 0
        if s[i] in s: 
         count = count + 1
        else:
             count = count

    L.append(count)
    return L 
```

但是，如果字母相同，该列表将自行重复。有没有更好的方法来计算 str 中的字符数量？我在想用字典？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T02:30:55.680

计算字符串中的字符数如下：

```
len(my_str) 
```

所以如果你想计算重复字符的数量，那就是

```
len(my_str) - len(set(my_str)) 
```

这相当于：

> 字符总数 - 唯一字符的数量。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:35:38.303

目前这个问题有点不清楚，但如果你想计算每个字符出现在字符串中的次数，这将起作用：

```
>>> from collections import Counter
>>> char_counts = Counter(s) 
```

例子：

```
>>> d = Counter("Chris Doggett")
>>> for k, v in d.iteritems():
...    print k, v
  1
C 1
e 1
D 1
g 2
i 1
h 1
o 1
s 1
r 1
t 2

>>> print d
Counter({'g': 2, 't': 2, ' ': 1, 'C': 1, 'e': 1, 'D': 1, 'i': 1, 'h': 1, 'o': 1, 's': 1, 'r': 1}) 
```

Counter 基本上会给你一个可迭代的字典，其中每个项目作为键，以及该键作为值出现的次数。

如果您只想要多次显示的字符列表，这是一个简单的列表理解：

```
>>> [k for k in d if d[k] > 1]
['g', 't'] 
```

# r - 删除一组具有特定值的变量中的随机观察子集

> ID：16159828
> 
> 赞同：3
> 
> 时间：2013-04-23T02:20:42.787
> 
> 标签：r

假设我有一个数据框，我想在其中删除满足特定标准的随机观察样本（意思是整行）。以这个数据框为例：

```
id    var1  var2
AAAA  1     Car
BBBB  2     Truck
CCCC  1     Boat
DDDD  2     Car
EEEE  1     Truck
FFFF  2     Car
FFFF  2     Car
FFFF  2     Car
FFFF  2     Car 
```

如何进行（1）随机抽样（n = 3）的观察`var2=="Car"`，以及（2）删除所有其他`var2=="Car"`未抽样的行？我`sample()`在某个标准（即“var2 = Car”）内使用时遇到问题，因为它还会从数据集中删除所有其他观察结果（当我想用`Trucks`and保留其他行时`Boats`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:42:59.130

关于您在使用时遇到的困难`sample`，它可能与您采样的对象/地点有关。

您不想直接从 data.frame 中采样，因为这将对列进行采样

您不想从逻辑向量中采样，因为使用结果来进一步索引 data.frame 并不简单。

相反，您希望从*索引中采样 rows*。您可以从索引的适当子集中进行采样，然后与第二个子集组合，但这很麻烦。

### 更直接的是对*您将取出的内容进行采样*：

```
# remove 3 random rows where var2 is "car": 
DT[-sample(which(var2=="Car"), 3)]

#      id var1  var2
# 1: BBBB    2 Truck
# 2: CCCC    1  Boat
# 3: DDDD    2   Car
# 4: EEEE    1 Truck
# 5: FFFF    2   Car
# 6: FFFF    2   Car 
```

*在哪里`DT <- data.table(yourDataFrame)`*

请注意使用 为`which( )`行提供索引。如果没有，我会从`TRUE`&的向量中采样`FALSE`（多亏了这`recycling`会产生非常不可预测的结果）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T02:38:13.203

```
(carindex <- which(dat$var2 == 'Car'))
(deleteindex <- sample(carindex, length(carindex) - 3)) 
dat[-deleteindex, ]

R > (carindex <- which(dat$var2 == 'Car'))
[1] 1 4 6 7 8 9
R > (deleteindex <- sample(carindex, length(carindex) - 3))
[1] 4 6 9
R > dat[-deleteindex, ]
    id var1  var2
1 AAAA    1   Car
2 BBBB    2 Truck
3 CCCC    1  Boat
5 EEEE    1 Truck
7 FFFF    2   Car
8 FFFF    2   Car 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:38:17.800

这是一种使用`data.table`. `.I`是包含特定子集的行号的向量。（见`?data.table`）

```
library(data.table)
# assuming your data.frame is called df
DT <- data.table(df)

DT[DT[, list(keep =  if(var2 =='Car'){
   .I[sample(.N, 3)]
   } else{.I})  ,  by = var2]$keep]

     id var1  var2
1: DDDD    2   Car
2: FFFF    2   Car
3: AAAA    1   Car
4: BBBB    2 Truck
5: EEEE    1 Truck
6: CCCC    1  Boat 
```

# azure - 如何让每个工作角色实例运行 cmd 脚本？

> ID：16159831
> 
> 赞同：0
> 
> 时间：2013-04-23T02:21:16.227
> 
> 标签：azure

我想在每个工作角色实例上运行一个 cmd 脚本。所以我为每个工作角色创建了一个 WCF 服务。但我只得到VIP。如何使用内部 IP 并打开每个端点并在每个实例上运行 cmd 脚本？有人对此有什么建议吗？还是使用其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:35:33.657

如果您想在启动时运行 cmd 脚本...您可以为此目的在 csdef 中使用启动任务...这将确保 cmd 脚本在每个实例上运行。某些启动任务可能需要提升的权限才能运行...还相应地配置启动任务类型...因为如果本质上是顺序的，它可能会增加您的部署时间。

如果由于某种原因这不适用于您的需求，您可以探索 InstanceInputEndpoint 它可以为您提供特定 VM 实例的句柄。

# javascript - Javascript 帮助在 writeln 中改变颜色

> ID：16159833
> 
> 赞同：3
> 
> 时间：2013-04-23T02:21:20.567
> 
> 标签：javascript, css

你能解释一下为什么这条线没有显示吗？

```
document.writeln("<p style=\"color:red;"> error value must be >= 1 </p>"); 
```

我希望文字是红色的

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T02:23:05.920

尝试这个：

```
document.writeln("<p style=\"color:red;\"> error value must be >= 1 </p>"); 
```

您忘记转义第二个引号（在 之后`color: red;`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:24:30.897

周围的引号`"color:red;"`必须是单引号，或者两者都必须转义。

`'color:red;'`

`\"color:red;\"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T02:25:19.370

尝试这个

```
document.writeln("<p style='color:red;'> error value must be >= 1 </p>"); 
```

# java - 在java中将垂直字符串中的单个字母居中

> ID：16159837
> 
> 赞同：0
> 
> 时间：2013-04-23T02:21:40.733
> 
> 标签：java, swing, awt, drawstring

好的，所以我有一个垂直字符串，但是当它包含 I 或 L 时，它们会从字符串的其余部分偏移，因为它们是如何印刷的. 我想知道如何使这些字母与其他字母一致。同样重要的是，这些是单独的拉绳调用。我尝试使用 AffineTransform 但它将所有字母混合在一起。这是我用来循环字符串并写入每个字符的代码。

```
for(int i =0; i<team.length();i++) 
{
    gg.drawString(Character.toString(team.charAt(i)), 100, ypos-fm.getDescent());
    ypos+=40;
} 
```

如果你想测试它，我使用的字符串是 BOLIVAR。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:33:28.667

您可以尝试将文本围绕字符宽度居中

![在此处输入图像描述](https://i.stack.imgur.com/HkqEp.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestVerticalTexr {

    public static void main(String[] args) {
        new TestVerticalTexr();
    }

    public TestVerticalTexr() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            String team = "BOLIVAR";
            FontMetrics fm = g2d.getFontMetrics();
            int ypos = fm.getHeight();
            for (int i = 0; i < team.length(); i++) {
                int x = 100 - (fm.charWidth(team.charAt(i)) / 2);
                g2d.drawString(Character.toString(team.charAt(i)), x, ypos);
                ypos += fm.getHeight();
            }
            g2d.dispose();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:44:02.603

您可以考虑使用[Text Icon](http://tips4java.wordpress.com/2009/04/02/text-icon/)。它在文字的绘画上更复杂一些。

# c# - Mono 有什么模拟框架？？？我很沮丧，我似乎找不到一个

> ID：16159838
> 
> 赞同：4
> 
> 时间：2013-04-23T02:21:55.257
> 
> 标签：c#, mono, mocking

我只是在寻找一个明确的答案：是否有任何适用于 Mono 的模拟框架，如 Moq 或 RhinoMocks？是的，我意识到我可以进行手动模拟，但我正在谈论一些具有良好 API 的东西......比如 Moq 或 RhinoMocks。我正在专门使用 MonoTouch，但我很惊讶我什至找不到任何直接用于 MonoTouch 的模拟框架。

从我的阅读来看，*MonoTouch*没有 mocking 框架的原因之一似乎是因为它们中的大多数使用 Reflection.Emit，它当然不会通过 Apple 对 AppStore 提交的静态分析。

但是，*非*AppStore 应用程序呢？许多企业应用程序分布在 AppStore 之外，因此不受静态分析的影响。而且在企业应用程序中使用模拟框架是很常见的。

那么，为什么我们没有看到 MonoTouch 应用程序更频繁地使用模拟框架呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:41:12.233

好吧，我发现可以为 Mono 编译[来自 GitHub 的 Moq 源代码。](https://github.com/Moq/moq4)但是您还需要[Castle.Core](https://github.com/castleproject/Castle.Core-READONLY)。

但是，您尝试使用 Mono 2.10.x（撰写本文时为 2.10.11）构建 Castle.Core，您将收到有关 PriorityBehaviorExtensions.cs 中泛型类型约束的编译错误 (CS0314)。这是 Mono 的 2.10.x 版本中的一个错误。

为了构建 Castle.Core，我必须使用 Mono 3.0.10 构建。一旦满足了该依赖关系，就可以使用 Castle.Core 构建 Moq。

我仍然需要做一些测试以确保一切正常。只是想在我出门之前把这一切都写下来。希望这可以帮助某人。

感谢 Moq (Daniel Cazzulino) 的作者为我指明了正确的方向。

**编辑：**这对我不起作用。我能够很好地构建 DLL，但它们针对的是错误的框架。问题是我似乎无法构建针对 MonoTouch 的 Castle.Core 库，因为 Castle.Core 所利用的 .NET 的某些功能在 Mono 中根本不可用。因此，如果无法为 MonoTouch 构建 Castle.Core，我也无法为 MonoTouch 构建 Moq 甚至 RhinoMocks。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T11:17:06.610

我发现[Simple.Mocking](https://github.com/mikaelwaltersson/Simple.Mocking/)可以与 Mono 一起使用。它不像其他一些模拟框架那么整洁，但它确实有效！

# ajax - jQuery Masonry 制作 Ajax 调用删除了类 masonry-brick

> ID：16159842
> 
> 赞同：0
> 
> 时间：2013-04-23T02:22:06.927
> 
> 标签：ajax, jquery-masonry

我正在使用 jQuery 插件 Masonry，当我对另一个页面进行 ajax 调用以加载画廊的图像时，我遇到了一个问题。ajax 调用有效并且图像加载但是当进行调用时，会发生一些事情，它删除了 Masonry 附加到我的 div 之一的类之一。

这是我的 html 在第一页上的外观。这里一切都很好，并显示了 masonry-brick 类，我需要渲染出适当的 css 以使一切看起来不错，它还渲染出内联 css。

```
 <a href="/system/images/series_uploads/15/original/berkshire_25585_walnut_famousdaves03.jpg?1330115640" rel="lightbox['gallery']">
    **<div class="item masonry-brick" style="position: absolute; top: 0px; left: 0px;">**<img alt="" src="/system/images/series_uploads/15/gallery/berkshire_25585_walnut_famousdaves03.jpg?1330115640" title="Berkshire" />
    <div class="gallery-text">
      <h3>Berkshire</h3>
      <p>HDP &ndash; High Definition Porcelain</p>
    </div>
    </div>
  </a> 
```

当我单击链接进行 ajax 调用时，图像可以正常加载，并且它适用于所有链接，但是 masonry-brick 类被删除并且图像丢失了它们的 css。

```
 jQuery("#project-galleries-navigation li.load-category a").on("click", function(){      
     var href = jQuery(this).attr("href");
            jQuery("#gallery").fadeOut(300).remove("img").load(href).fadeIn(2300);      
        return false;           
  }); 
```

这是我用于砌体的代码。

```
var $container = jQuery('#copy-wrapper-gallery');
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector : '.item',
    isAnimated: true            
  });
}); 
```

当页面加载新数据时，这就是我的 html 最终发生的事情。masonry-brick 类不再存在，内联 css 也消失了。

```
 <a href="/system/images/series_uploads/7/original/ashton_23931_smokey_beige_.jpg?1330114250" rel="lightbox['gallery']">
   **<div class="item">**<img alt="" src="/system/images/series_uploads/7/gallery/ashton_23931_smokey_beige_.jpg?1330114250" title="Ashton" />
    <div class="gallery-text">
      <h3>Ashton</h3>
      <p>Porcelain</p>
    </div>
    </div>
  </a> 
```

有没有人遇到过这个问题或知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:06:09.777

我可以通过修改这个 jquery 并为其设置一个回调函数来让它工作。

```
 jQuery("#gallery").fadeOut(300).remove("img").load(href, function(){
                    jQuery("#gallery").masonry("reload");
                }).fadeIn(2300);    
                e.preventDefault();                     
      }); 
```

# entity-framework - 使用带有 onContextCreating 的 entitydatasource 的静态 dbcontext 时出现异常

> ID：16159843
> 
> 赞同：1
> 
> 时间：2013-04-23T02:22:11.570
> 
> 标签：entity-framework, webforms, dbcontext, objectcontext, entitydatasource

我想在会话中共享一个 dbcontext。我了解使用共享的缓存 Dbcontexts 存在许多问题。

所以我创建了一个全局 dbcontext 并将其保存在一个静态类变量中。

我能够创建选择、创建新实体、通过调用后面的代码中的 dbcontext 进行插入和更新，而不会出现问题

出于并发原因，我想在我的 web 表单中的 entitydatasource 控件中使用相同的 dbcontext。我通过使用 OnContextCreating 和 ONContextdisposing 事件来做到这一点。这适用于读取数据，但是当我尝试通过实体数据源（来自数据视图、网格视图等）进行更新时，出现以下异常

```
 AcceptChanges cannot continue because the object's key values conflict with 
another object in the ObjectStateManager. Make sure that the key values are unique 
before calling AcceptChanges. 
```

我已将产生错误的系统减少为 ef5.0 数据模型，使用单个表和具有单个实体数据源的单个 Web 表单页面。我已经复制了下面的代码

```
 public partial class _Default : Page
    {
        static QuantumDataEntities dbcontext = null;

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void OnContextCreating(object sender, EntityDataSourceContextCreatingEventArgs e)
        {
            if (dbcontext == null)
                    dbcontext = new QuantumDataEntities();

            e.Context = (dbcontext as IObjectContextAdapter).ObjectContext;
        }

        protected void OnContextDisposing(object sender, EntityDataSourceContextDisposingEventArgs e)
        {
            e.Cancel = true;
        }
    } 
```

如您所见，它非常简单。每当 Entitydatasource 需要一个对象上下文来读取、更新等时，它都会调用 OnContextCreating。我在第一个 OnContextCreating 调用中创建 dbcontext，缓存在静态类变量中并为将来的 OnContextCreating 调用重用。OnContextCreating 事件被调用了几次，首先是页面加载，接下来是按下编辑按钮时的回发，最后（我认为）是实际的 dbsave。

如果我得到缓存并为每个调用创建一个新的 dbcontext，它就可以正常工作。即替换

```
 if (dbcontext == null)
    dbcontext = new QuantumDataEntities();

  e.Context = (dbcontext as IObjectContextAdapter).ObjectContext; 
```

和

```
 dbcontext = new QuantumDataEntities();  
  e.Context = (dbcontext as IObjectContextAdapter).ObjectContext; 
```

此错误还有其他一些奇怪之处。如果我设置了一个 OnUpdating 事件，它应该在 entitydataosource 执行任何更新之前被调用，它永远不会被调用。我已经包含了异常的堆栈跟踪和本文的结尾。

我想用 EF 6.0 Alpha 3 对此进行测试，但设计人员已将对象上下文移动到另一个程序集中，使其与 entitydatasouce 不兼容

这是我们网站进一步发展的主要障碍。我们现在唯一的选择是移动到非共享的 dbcontext，这将导致极端的性能问题（即在页面加载时多次加载相同的 20K 数据集 - 是的，我们可以重新架构，我们将需要数周时间/个月，我们现在没有）

问题 ？

1.  到底是怎么回事 ？
2.  难道我做错了什么 ？（相对于糟糕的架构）

异常堆栈跟踪

```
[InvalidOperationException: AcceptChanges cannot continue because the object's key values conflict with another object in the ObjectStateManager. Make sure that the key values are unique before calling AcceptChanges.]
   System.Data.Objects.ObjectStateManager.FixupKey(EntityEntry entry) +2518309
   System.Data.Objects.EntityEntry.AcceptChanges() +159
   System.Data.Objects.ObjectContext.AcceptAllChanges() +356
   System.Web.UI.WebControls.EntityDataSourceView.ExecuteUpdate(IDictionary keys, IDictionary values, IDictionary oldValues) +376
   System.Web.UI.DataSourceView.Update(IDictionary keys, IDictionary values, IDictionary oldValues, DataSourceViewOperationCallback callback) +87
   System.Web.UI.WebControls.DetailsView.HandleUpdate(String commandArg, Boolean causesValidation) +1091
   System.Web.UI.WebControls.DetailsView.HandleEvent(EventArgs e, Boolean causesValidation, String validationGroup) +425
   System.Web.UI.WebControls.DetailsView.OnBubbleEvent(Object source, EventArgs e) +89
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
   System.Web.UI.WebControls.DetailsViewRow.OnBubbleEvent(Object source, EventArgs e) +80
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
   System.Web.UI.WebControls.LinkButton.OnCommand(CommandEventArgs e) +121
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +156
   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +9642898
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

# php - 算法帮助 - 处理学校“信天”的功能。6天重复的一周

> ID：16159847
> 
> 赞同：2
> 
> 时间：2013-04-23T02:22:38.000
> 
> 标签：php, algorithm, series

我在这上面花了太多时间，但无法得到它。我正在寻找一个在给定日期时返回“字母日”的函数。

字母日是每周 6 天，从 A 到 F 不包括周末。如果星期一是 A，那么星期五是 E，下一个星期一是 F，星期二是 A。明白吗？

```
Week 1: a, b, c, d, e, null, null
Week 2: f, a, b, c, d, null, null
Week 3: e, f, a, b, c, null, null 
```

选择一个任意日期作为参考。为了功能，让我们同意 4 月 22 日星期一是 C 日。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:12:05.843

这对你有用吗？

```
<?PHP
$datetime1 = new DateTime('2013-04-22');
$datetime2 = new DateTime('2013-04-30');
$interval = $datetime1->diff($datetime2);
$numDays = $interval->format('%d');

$calibration = 2; //April 22, 2013 is a "C" day.
$numWeekDays = $numDays - 2 * floor($numDays / 7);
$answer = ($numWeekDays + $calibration) % 6 + 1; 

echo chr(64 + $answer);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:02:29.193

这是想法：

```
for ($i = 0; $i < 100; $i++)
{
    if ($i % 7 == 0)
        echo "<BR>";
    echo GetLetter ($i) . ",";
}

function GetLetter ($numDays)
{
    $letters = Array ("A", "B", "C", "D", "E", "F");
    $nullRet = false;
    $currentLetter = 0;
    $lastLetter = 0;
    for ($i = 0; $i <= $numDays; $i++)
    {
        if (($i+2) % 7 == 0 || ($i+1) % 7 == 0)
        {
            $nullRet = true;
            continue;
        }
        else
        {
            $nullRet = false;
            $lastLetter = $currentLetter;
            $currentLetter++;
        }
    }
    if ($nullRet)
    {
        return "null";
    }
    else
    {
        return $letters[$lastLetter%6];
    }
}
?> 
```

你能从中算出你自己的日期吗？从这里开始很容易。这个想法是你想循环一周中的几天，跳过坐着和太阳。您在所有其他日子递增并检查它们是什么 mod 6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:59:37.563

```
echo get_letter('29-4-2013');
echo get_letter('30-4-2013');
echo get_letter('1-5-2013');
echo get_letter('2-5-2013');
echo get_letter('3-5-2013');
echo PHP_EOL.'------------------'.PHP_EOL;
echo get_letter('6-5-2013');
echo get_letter('7-5-2013');
echo get_letter('8-5-2013');
echo get_letter('9-5-2013');
echo get_letter('10-5-2013');

function get_letter($set_date){
$map=array('a','b','c','d','e','f');

$start_letter = 'c';
$start_date = strtotime("22-4-2013");

$target_date = strtotime($set_date);

$start_date_w = date('w',$start_date);

$target_date_w = date('w',$target_date);

if($target_date_w == 6 || $target_date_w == 0){
return 'null';
}

$bwt_d = ($target_date-$start_date) / 86400;

$week_count =  floor($start_date_w + $bwt_d /7)-1;

$bwt_d5 = $bwt_d -$week_count*2;

$aa=($bwt_d5+1)%6;

return $map[$aa];
} 
```

试试 [http://sandbox.onlinephpfunctions.com/code/295d52d2ef2ecdbd7c2d2b93c747254e864fdf9c](http://sandbox.onlinephpfunctions.com/code/295d52d2ef2ecdbd7c2d2b93c747254e864fdf9c)

# c# - 无法关闭 SqlConnection

> ID：16159856
> 
> 赞同：3
> 
> 时间：2013-04-23T02:24:02.337
> 
> 标签：c#, sql-server, dispose, sqlconnection

我知道这是一个老问题。谷歌上千条声明说`Connection will be closed in Dispose()`。然而，谁真正证实了这一点？

我发现一个`SqlConnection`是**没有办法关闭**的。我有一个简单的程序（左边有行号）。

```
 class Program
  {
    static void Main(string[] args)
1   {
2        var connectionString = "Data Source=localhost;Initial Catalog=master;Integrated Security=SSPI;";
3        using (var conn = new SqlConnection(connectionString))
5        {
6            using (var cmd = new SqlCommand("create table #mytable(col1 int);", conn))
7            {
8                conn.Open();
9                cmd.ExecuteNonQuery();
10           }
11           conn.Close();
12           conn.Dispose();
13       }
14       GC.Collect();
15   }
  } 
```

我有一个用于检查活动连接的 T-SQL 语句

```
exec sp_who2 
```

我**逐行**使用调试器，同时，我检查了与`sp_who2`.

每个人都希望连接应该在第 11 行关闭。对吗？但是，连接在`sleep`第 11 行之后。

好的，尝试在下一行手动处理。但是在第 12 行之后，连接仍然在`sleep`.

好的，下一行是自动处理。但在第 13 行之后，连接仍在`sleep`.

好吧，这可能与`GC`. 所以我明确地跑去`GC.Collect()`尝试收集`conn`对象。但是在第 14 行之后，连接仍然在`sleep`.

**连接实际上在第 15 行之后关闭**。这意味着程序的结束。

在上面的程序中，创建了一个临时表`#mytable`。但是，只有在关闭连接时才会删除临时表。我们面临的问题是`too many temp tables are in the database`。（是的，我知道使用后应该删除临时表。）

我也试过

1.  用于`{ }`创建一个新范围来包装连接。结果是一样的。

2.  创建一个新线程以连接到数据库服务器。结果也是一样的。

3.  `while(true) { Thread.Sleep(1000); GC.Collect(); }`在方法结束时使用`Main`。结果也是一样的。

上面没有一个可以关闭SqlConnection。如何关闭连接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T02:37:22.087

ADO.NET 中的连接池默认启用。这意味着当您“处理”您的连接时，您只是将它返回到池中。当您退出程序时，您显然最终会从池中释放所有内容。如果您想避免这种情况，您必须选择退出连接池。

要禁用，请将`Pooling=false`参数添加到连接字符串：

```
var connection = new SqlConnection(
    @"Data Source=(local)\SQLEXPRESS;Initial Catalog=TEST;Integrated " +      
    "Security=SSPI;Pooling=false;"); 
```

# php - php 将 CSV 导入 MySQL，其中 CSV 包含 HTML 内容

> ID：16159857
> 
> 赞同：1
> 
> 时间：2013-04-23T02:24:05.703
> 
> 标签：php, mysql, import, pdo

我的方法`$csv->getContent();`包含我的列名，“数据”是我要导入数据库的各个行。将我的各种 CSV 导入数据库时​​，下面的循环完美无缺。但是，当我在 CSV 中有一个包含 html 内容的列时，许多行可以正常导入，但有些行不能正常导入，我会收到`SQLSTATE[HY093]: "Invalid parameter number: number of bound variables does not match number of tokens"`错误消息。

从我的研究中，我看到按照我在下面显示的方式做事应该正确地转义字符以避免需要添加斜杠，但它似乎没有任何区别。唯一有效的情况是，如果我这样做`addslashes(addslashes($values));`有点荒谬，并且它将我的内容留在数据库中，并且`\\\`在适用字符之前。

我在这里错过了一步还是我只是卡住了。我看到它的方式，我应该能够“防弹”我的内容每次都进入我的数据库。

```
$this->db->exec("SET CHARACTER SET utf8");                          
$this->db->beginTransaction();
$content = $csv->getContent();
foreach($content['data'] as $key => $value) {

    $sql  = "INSERT INTO `".$destination_table."` (`";
    $sql .= implode("`, `", $content['columns']);
    $sql .= "`) VALUES (";
    $sql .= implode(", ", array_fill(0, count($content['columns']), "?"));
    $sql .= ")";
    $statement = $this->db->prepare($sql);
    $statement->execute($value);

}
$this->db->commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:39:28.500

好的，我找到了我的问题的答案。我构建了一个供个人使用的小型应用程序，我可以在其中保存我在网上列出的拍卖内容。一些内容很旧并且包含格式错误的 html，因此在解析 csv 并导入数据库时​​，格式错误的 html 真的会搞砸。然而，经过更多的研究和阅读，PDO 的“bindParam”和“execute”方法允许无缝导入内容，无论 html 格式多么糟糕。以下是我构建测试查询的方式，然后继续尝试将混乱的 html 写入数据库。

```
$sql = $objDb->prepare('UPDATE `autolist_html` SET `value` = :html WHERE entity = "'.$entity[1].'"');
$sql->bindValue(':html',$_POST[$entity[1].'_html'],PDO::PARAM_STR);
$sql->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:27:47.753

我不喜欢你的代码。如果有数千个数据并且您循环每个数据然后插入数据库怎么办。有一个 mysql 查询将 csv 文件导入数据库表。

来源：[how-to-import-csv-file-to-mysql-table](https://stackoverflow.com/questions/3635166/how-to-import-csv-file-to-mysql-table)

# java - Weblogic JMS 高吞吐量生产者/消费者

> ID：16159858
> 
> 赞同：0
> 
> 时间：2013-04-23T02:24:08.290
> 
> 标签：java, jms, weblogic, java-ee-5, producer

我正在做一个项目，我们有一个高吞吐量的 jms 消息生产（顺便说一下，还有消费者）。一些测试让我相信我无法在最好的情况下正确使用 JMS 消息生成。首先让我解释一下场景：我们有一个带有 13 个队列的 Weblogic 集群（2 个节点）。消息在 UDP 侦听器 (Netty) 上接收，并创建一个分配在第一个队列上的 ByteMessage，依此类推。通过一些分析，我发现这第一步不需要很长时间来执行，而且它的消费者也没有，但是消息仍然在队列中停留了很长一段时间。它们是非持久性的，交付时间为 0（零）。一个改进是缓存 de connectionFactory、ConnectionQueue、Queue 和 QueueSession 并像永远一样使用它们。但这不可能。我的意思是，我们不应该打开这些资源，也永远不要关闭它们，对吧？真正应该缓存什么以及何时应该释放连接和会话？我应该为要发送的每条消息创建一个会话还是可以重复使用它？我的意思是，考虑到正确的资源处理，在队列上生成大量 jms 消息（每秒 300 条左右）的最佳方法是什么？我被困在这里，我发现的所有来源都告诉我在工作完成但它从未完成时总是关闭（它总是会收到大量消息）。考虑到正确的资源处理，在队列上生成大量 jms 消息（每秒 300 条左右）的最佳方法是什么？我被困在这里，我发现的所有来源都告诉我在工作完成但它从未完成时总是关闭（它总是会收到大量消息）。考虑到正确的资源处理，在队列上生成大量 jms 消息（每秒 300 条左右）的最佳方法是什么？我被困在这里，我发现的所有来源都告诉我在工作完成但它从未完成时总是关闭（它总是会收到大量消息）。

提前问候。

编辑：我忘了说 MDB 有默认的 16 个消费者大小，理论上考虑到单个消息所花费的处理时间，应该足以消耗所有消息而无需“存储”它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:10:11.647

您需要缓存 JMS 对象。

如果您使用的是 Java EE 服务器，那么它应该为您执行此操作。我相信这是可配置的。

[https://community.jboss.org/wiki/ShouldICacheJMSConnectionsAndJMSSessions](https://community.jboss.org/wiki/ShouldICacheJMSConnectionsAndJMSSessions)

> 连接、会话、消费者和生产者等 JMS 对象被设计为可重用。在大多数实现中，连接和会话的设置非常重要，消费者通常需要网络往返来设置。Producer 通常更轻量级，尽管创建它通常会有一些开销。

Spring 还提供连接和会话缓存包装器。

调整 WebLogic JMS [http://docs.oracle.com/cd/E28280_01/web.1111/e13814/jmstuning.htm](http://docs.oracle.com/cd/E28280_01/web.1111/e13814/jmstuning.htm)

# javascript - 将表格分成两个保持相同的列宽

> ID：16159866
> 
> 赞同：2
> 
> 时间：2013-04-23T02:24:44.403
> 
> 标签：javascript, jquery

我正在尝试拆分一张桌子——即，撕下`thead`它并将其放在自己的桌子上。这是我到目前为止所得到的：

# [小提琴](http://jsfiddle.net/mnbayazit/UPeN3/)

```
var $colgroup = $('<colgroup>');

$('td,th', '.query-results tr:first').each(function () {
    $colgroup.append($('<col>').width($(this).outerWidth()));
});

$('<table>')
    .insertBefore('.query-results')
    .append($colgroup)
    .append(
$('.query-results thead'));

$('.query-results').prepend($colgroup.clone()); 
```

我似乎无法让列宽得到尊重；桌子从不排队。我尝试[像这个人说](https://stackoverflow.com/a/13073537/65387)的那样使用 colgroups ，但这似乎也没有效果。

有什么问题？

[使用 width 属性](http://jsfiddle.net/mnbayazit/UPeN3/1/)也不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:50:43.170

看来您必须设置表格宽度才能尊重列宽。

```
var $colgroup = $('<colgroup>')

var tableWidth = $('.query-results').width();

$('td,th','.query-results tr:first').each(function() {
   $colgroup.append($('<col>').attr('width',parseInt($(this).outerWidth())));
});

$('<table>')
    .width(tableWidth)
    .insertBefore('.query-results')
    .append($colgroup)
    .append(
        $('.query-results thead')
    );

$('.query-results').width(tableWidth).prepend($colgroup.clone()); 
```

[小提琴](http://jsfiddle.net/mnbayazit/UPeN3/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:00:38.083

如果您尝试制作带有固定标题的可滚动表格，请查看此处：

[http://salzerdesign.com/test/fixedTable.html](http://salzerdesign.com/test/fixedTable.html)

# r - 如何使用 igraph inR 为二部图创建“类型”属性

> ID：16159867
> 
> 赞同：0
> 
> 时间：2013-04-23T02:24:59.473
> 
> 标签：r, igraph, bipartite

我有一个两种模式的网络边缘列表数据，如下`tmp`所示：

```
tmp <- read.table(text="PersonID CompanyID
P1 C000001
P2 C000001
P3 C000001
P4 C000001
P5 C000001
P6 C000002
P7 C000002
P8 C000002
P9 C000003
P10 C000003
P11 C000003
P12 C000003",header=TRUE)

# make a graph using this data
el <- graph.edgelist(as.matrix(tmp)) 
```

我这样做是为了添加“类型”属性以在 igraph 中创建二分图

```
V(el)$type <- V(el)$name %in% el[,1] 
```

但结果是类型全是“假”，名字不匹配。有谁知道这里出了什么问题？

```
> table(V(el)$type)
FALSE 
   15 

> V(el)$name
 [1] "P1"      "C000001" "P2"      "P3"      "P4"    "P5"    "P6"    "C000002"
 [9] "P7"      "P8"      "P9"      "C000003" "P10"   "P11"   "P12" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:54:02.393

而不是`el[,1]`，使用`get.edgelist(el)[,1]`. `el[,1]`不是您可能期望的边缘列表的第一列；像您所做的那样索引图形对象实际上会给您邻接矩阵的切片。

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：8

> ID：16159872
> 
> 赞同：-1
> 
> 时间：2013-04-23T02:25:19.823
> 
> 标签：java, compiler-errors

我已经查看了其他一些相同类型的问题并试图找到答案，但我无法看到问题所在，如果有人可以为我指出，那就太好了！

所以基本上我正在创建一个“记忆游戏”，在其中我必须为每张卡片设置一个默认背景图像，但是每次我再次运行它时这个图像都必须改变。此外，我必须使用前景图像（21 个）创建和排列列表，但我每场比赛只使用 8 个。每次我运行程序时，它们也必须更改。也就是说，到目前为止我得到的是：

```
public class GameBoard extends javax.swing.JPanel implements Runnable {

    private JLabel[] _Labels = new JLabel[8];
    private Card[] _Cards = new Card[16];

    public GameBoard(){

        setLayout(new GridLayout(4, 4));

        for(int i = 0; i<8; i=i+1){

            _Labels[i] = new JLabel();

        }

        for(int i = 0; i<16; i=i+2){

            _Cards[i] = new Card(_Labels[i]);
            _Cards[i+1] = new Card(_Labels[i]);

            add(_Cards[i].getLabel());
            add(_Cards[i+1].getLabel());

            _Labels[i].addMouseListener(new LabelListener(_Cards[i]));
            _Labels[i+1].addMouseListener(new LabelListener(_Cards[i+1]));

        }

    }

    @Override
    public void run() {

    }

} 
```

卡类是：

```
public class Card{

    private JLabel _Label;

    ImageIcon imageOne;

    ImageIcon imageTwo;

    public Card(JLabel once){

        _Label = once;

 //-----------------------Foreground--------------------------------

        ArrayList<String> foregroundCard = new ArrayList<String>();       
        int i = 1;
        while(i < 23){
            if(i > 9){
                String addGreaterNine = "F" + i + ".png";
                foregroundCard.add(addGreaterNine);
            }
            else{
                String addLesserNine = "F0" + i +".png";
                foregroundCard.add(addLesserNine);
            }
            i = i + 1;
        }

        //-----------------Add 8---------------------

        int a = 0;

        while(a < 8){

            Collections.shuffle(foregroundCard); 

            ArrayList<String> stringsGoingToBeUsed = new ArrayList<String>();            
            stringsGoingToBeUsed.add(foregroundCard.get(0));
            stringsGoingToBeUsed.add(foregroundCard.get(0));

            for(int l = 0; l<16; l=l+1){

            Collections.shuffle(stringsGoingToBeUsed);  

            String frontName = "Images/" + stringsGoingToBeUsed.get(0);
            imageOne = new ImageIcon(frontName);

            }

            a = a + 1;

        }       

//------------------------Background--------------------------------        

        ArrayList<String> backgroundCard = new ArrayList<String>();
        backgroundCard.add("B01.png");
        backgroundCard.add("B02.png");
        backgroundCard.add("B03.png");
        Collections.shuffle(backgroundCard);
        String location = "Images/" + backgroundCard.get(0);
        imageTwo = new ImageIcon(location);

//-------------------------------------------------------------------        

        _Label.setIcon(imageTwo);   

    }
    public void TurnCard (){

        ImageIcon temp;
        temp = imageTwo;
        imageTwo = imageOne;
        imageOne = temp;
        _Label.setIcon(imageTwo);

    }

    public JLabel getLabel(){

        return _Label;

    }

} 
```

LabelListener 类是：

```
public class LabelListener implements MouseListener {

    private Card _Card;

    public LabelListener(Card c){

        _Card = c;

    }

    @Override
    public void mouseClicked(MouseEvent arg0) {

        _Card.TurnCard();

    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

主要方法是：

```
public class Game {
    public static void main(String[] args) {

        JFrame main = new JFrame("Memory Game");
        main.add(new GameBoard());  

        main.pack();
        main.setVisible(true);
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:28:02.477

我怀疑这是因为它`_Labels`是一个包含 8 个元素的数组，但是您尝试在以下代码中最多引用 16 个元素：

```
for(int i = 0; i<16; i=i+2){
    ...
    _Labels[i+1].addMouseListener(new LabelListener(_Cards[i+1]));
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:43:11.540

由于产生. `Card`_ 您可以添加另一个索引来解决此问题：`JLabel``ArrayIndexOutOfBoundsException``j`

```
for (int i = 0, j = 0; i < 16; i += 2, j++) {

   _Cards[i] = new Card(_Labels[j]); // AIOOBE was happening here
   _Cards[i + 1] = new Card(_Labels[j]);

   add(_Cards[i].getLabel());
   add(_Cards[i + 1].getLabel());

   _Labels[j].addMouseListener(new LabelListener(_Cards[i]));

   // not necessary
   // _Labels[j + 1].addMouseListener(new LabelListener(_Cards[i + 1])); 
} 
```

另外：使用 Java 命名约定来命名变量，例如`cards`代替`_Cards`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:28:04.217

```
for(int i = 0; i<16; i=i+2){

        _Cards[i] = new Card(_Labels[i]);
        _Cards[i+1] = new Card(_Labels[i]);

        add(_Cards[i].getLabel());
        add(_Cards[i+1].getLabel());

        _Labels[i].addMouseListener(new LabelListener(_Cards[i]));
        _Labels[i+1].addMouseListener(new LabelListener(_Cards[i+1]));

    } 
```

不起作用，因为 _Labels 的大小仅为 8，可能的解决方案是将其拆分为单独的循环或更改程序架构。

# wcf - WCF 双工请求时间延迟

> ID：16159876
> 
> 赞同：1
> 
> 时间：2013-04-23T02:25:58.070
> 
> 标签：wcf

我有一个基于 WCF 构建的简单 Pub/Sub 服务。服务器端的界面如下图所示：

```
[ServiceBehavior(UseSynchronizationContext = false, InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class RDFService : IRDFService
{
 public Guid Register(string ric)
 public void Unregister(Guid guid)
} 
```

客户端回调接口：

```
 [CallbackBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
internal class ServiceCallback : IRDFCallBack
{
 // [OperationContract(IsOneWay = true)]
 public void UpdateSignal(Guid guid, string ric, MarketFeedData data, MarketDataMessageType type)
} 
```

客户端是一个 Win 表单项目。

处理逻辑如下： 如果客户端收到UpdateSignal请求，客户端会通过处理方法调用自己注销。

通常，UpdateSignal 和 Unreg 方法几乎都不需要时间。但是当大量的 UpdateSignal 请求同时发送到客户端时，1-3 秒之间会有很大的延迟。我打开trace，发现时间在Unregister服务方法调用上： ![在此处输入图像描述](https://i.stack.imgur.com/GYBwQ.jpg)

如图所示，活动 3 和活动 4 之间有 2 秒的延迟。可能是什么原因？谢谢。

# android - 为什么我的 Intent 不起作用？

> ID：16159879
> 
> 赞同：0
> 
> 时间：2013-04-23T02:26:07.020
> 
> 标签：android, android-intent

我有以下代码：

```
public class P1R1 extends Activity {

    int correctCounter;
    private String[] answerString;
    private TextView score;
    private static final Random rgenerator = new Random();
    protected static final String EXTRA_playerOneScore = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.level);

        score = (TextView) findViewById(R.id.score);

        correctCounter = 0;

        loadActivity();
        //start round timer
        new CountDownTimer(60000, 1000) {

            final TextView timer = (TextView) findViewById(R.id.timer);

            public void onTick(long millisUntilFinished) {
                timer.setText("Time: " + millisUntilFinished / 1000 + "s");
            }

            public void onFinish() {
                Intent roundOneToTwo = new Intent(getActivity(), R1R2.class);
                String playerOneScore = String.valueOf(correctCounter);
                roundOneToTwo.putExtra(EXTRA_playerOneScore, playerOneScore);
                startActivity(roundOneToTwo);
            }
         }.start(); 
```

我有一个计时器正在运行，当计时器结束时，我希望它`Intent`运行，但我的 Intent 语句出现错误`The constructor Intent(new CountDownTimer(){}, Class<R1R2>) is undefined`。

我确实创建了一个 R1R2 类，但我的 Intent 仍然出错。我还是android的新手，所以如果你能提供帮助那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:29:05.110

代替

```
Intent roundOneToTwo = new Intent(this, R1R2.class); 
```

尝试

```
Intent roundOneToTwo = new Intent(P1R1.this, R1R2.class); 
```

Intent 构造函数的第一个参数应该是 Context，但您传递的是对 CountDownTimer 的引用。见[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# soundcloud - 如何使用 Soundcloud API 公开私人曲目？

> ID：16159880
> 
> 赞同：1
> 
> 时间：2013-04-23T02:26:32.220
> 
> 标签：soundcloud

我似乎找不到编辑`<sharing>`曲目属性的方法。甚至可能吗？

如果没有，您能建议一种安排曲目发布的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:12:17.580

这可以通过`PUT`对轨道资源的请求来实现。这是一个使用 curl 的示例：

```
curl -X PUT "https://api.soundcloud.com/tracks/<track_id>" -d"oauth_token=YOUR_TOKEN" -d"track[sharing]=public" 
```

显然替换`<track_id>`为您的实际轨道 ID 和`YOUR_TOKEN`您的访问令牌。该`track[sharing]`属性可以是`private`或`public`。

# google-oauth - 用于服务器-服务器身份验证的令牌的 1 小时时间限制

> ID：16159883
> 
> 赞同：1
> 
> 时间：2013-04-23T02:26:51.343
> 
> 标签：google-oauth

通过 OAuth 2.0 为服务帐户获取的令牌会在 1 小时后过期。

如果在达到 1 小时限制时 HTTP 会话仍然打开（可能是由于许多上传/下载操作），连接会保持活动状态直到会话关闭？

谢谢。

——李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T03:29:43.900

如果您使用 OAuth 对您网站中的用户进行身份验证，那么在与 OAuth 提供者进行初始交换后，您甚至可能没有使用令牌。大多数框架将创建一个基于 cookie 的会话，该会话的有效时间取决于您的设置。通常默认设置是在浏览器打开时保持会话，但它确实在您的控制之下。

另一方面，如果您使用 OAuth 访问某些 API（例如，如果您使用 GMail API 从 Web 应用程序内部检查或发送电子邮件），那么是的，之后您将无法访问 API无论令牌新鲜时看到多少活动，令牌都已过期。如果您想保持授权，您需要后台进程之类的东西来在令牌到期之前继续更新令牌。

# asp.net - 使用数据表更改前景色超链接

> ID：16159884
> 
> 赞同：0
> 
> 时间：2013-04-23T02:26:53.670
> 
> 标签：asp.net, vb.net, hyperlink

我有超链接，文本的颜色会根据它的值而不同，如果值为 0，则颜色为黑色，如果值 >0，它将为红色，这是我尝试过的代码

```
ForeColor='<%#IIf(Eval("exception") = 0, "Black", "Red")%>' 
```

但它给了我错误”

> “服务器标签格式不正确。”

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:12:14.380

您可以在后面的代码中更改其属性。您只需根据值更改事件中的值分配不同的 CssClass。

```
HyperLink1.CssClass = "NewClass" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:46:59.450

尝试如下，

ForeColor='<%#(DataBinder.Eval("exception").ToString()=="0") ？“黑色”：“红色”%>'

# macos - 为什么 Brew 安装的 postgres 看这里？

> ID：16159888
> 
> 赞同：1
> 
> 时间：2013-04-23T02:27:58.447
> 
> 标签：macos, osx-mountain-lion, postgresql-9.2, rails-postgresql

为什么 brew 安装的 postgres 在我`/tmp/.s.PGSQL.5432`指定`/var/pgsql_socket`( `unix_socket_directory = '/var/pgsql_socket'`)时寻找`postgresql.conf`

安装成功。我可以成功启动和停止 Pg。

我的`PATH`和`PGHOST`环境变量似乎设置正确，但是当我尝试时`psql`，我无法连接？

```
PATH="/usr/local/bin:$PATH"
PGHOST="/var/pgsql_socket" 
```

有任何想法吗？我已经阅读了 1000 篇帖子，但似乎没有什么适合我的情况并提供修复？

![在此处输入图像描述](https://i.stack.imgur.com/f8MMj.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:31:33.860

更改`unix_socket_directory`in`postgresql.conf`仅影响服务器放置套接字目录的位置。`postgresql.conf`客户端无法读取，并且客户端在可以连接之前无法向服务器询问设置，因此鸡与蛋问题阻止客户端询问服务器如何连接。

您需要告诉`psql`套接字目录在哪里。看来您已经使用 完成了此操作`pghost`，所以我的猜测是您尚未*导出*环境变量：

```
export PGHOST="/var/pgsql_socket" 
```

或者

```
psql -h /var/pgsql_socket 
```

# android - Android 计费 - 未找到项目

> ID：16159894
> 
> 赞同：1
> 
> 时间：2013-04-23T02:28:16.483
> 
> 标签：android, android-billing

我创建了一个订阅产品，当人们尝试购买它时，他们从我的应用程序点击到应用程序商店，他们收到一个错误“找不到项目”

但是这些项目在我的开发者控制台中显示为实时。

我是这样称呼它的：

这是此方法的 onActivityResult() ：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    sendEmail(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data 
```

结果是：

```
onActivityResult(10001,0,Intent { (has extras) } 
```

和 onIabPurchaseFinished

```
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() 
{
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) 
    {
        sendEmail(TAG, "Purchase finished: " + result + ", purchase: " + purchase); 
```

似乎永远不会被执行。

和

```
public void onUpgradeAppButtonClicked( ) 
{
    sendEmail(TAG, "Buy button clicked; launching purchase flow for upgrade. SKU: " + SKU_SUBSCRIPTION + " and RC_REQUEST: " + RC_REQUEST );
    //setWaitScreen(true);
    mHelper.launchPurchaseFlow(this, SKU_SUBSCRIPTION, RC_REQUEST, mPurchaseFinishedListener);
} 
```

结果是：

点击购买按钮；启动升级购买流程。SKU：my_sku 和 RC_REQUEST：10001

有谁知道为什么会发生错误？难道这发生在一些旧手机上？

另外，如果有人可以在他们的手机上尝试，那会有所帮助，因为我只有一部手机可以测试:) 这是应用程序的链接：https: [//play.google.com/store/apps/details? id=com.problemio&hl=en](https://play.google.com/store/apps/details?id=com.problemio&hl=en)

并在主屏幕的最底部按钮上进行结算。

编辑：

我知道有时应用内产品需要时间才能真正在 Android 系统中上线，但它说在我的开发控制台中上线 :)

编辑：

在我的 IABHelper.java 我有这个：

```
/**
 * Same as calling {@link #launchPurchaseFlow(Activity, String, int, OnIabPurchaseFinishedListener, String)}
 * with null as extraData.
 */
public void launchPurchaseFlow(Activity act, String sku, int requestCode, OnIabPurchaseFinishedListener listener) {
    launchPurchaseFlow(act, sku, requestCode, listener, "");
} 
```

然后这个：

```
/**
 * Initiate the UI flow for an in-app purchase. Call this method to initiate an in-app purchase,
 * which will involve bringing up the Google Play screen. The calling activity will be paused while
 * the user interacts with Google Play, and the result will be delivered via the activity's
 * {@link android.app.Activity#onActivityResult} method, at which point you must call
 * this object's {@link #handleActivityResult} method to continue the purchase flow. This method
 * MUST be called from the UI thread of the Activity.
 *
 * @param act The calling activity.
 * @param sku The sku of the item to purchase.
 * @param requestCode A request code (to differentiate from other responses --
 *     as in {@link android.app.Activity#startActivityForResult}).
 * @param listener The listener to notify when the purchase process finishes
 * @param extraData Extra data (developer payload), which will be returned with the purchase data
 *     when the purchase completes. This extra data will be permanently bound to that purchase
 *     and will always be returned when the purchase is queried.
 */
public void launchPurchaseFlow(Activity act, String sku, int requestCode, OnIabPurchaseFinishedListener listener, String extraData) {
    checkSetupDone("launchPurchaseFlow");
    flagStartAsync("launchPurchaseFlow");
    IabResult result;

    try {
        logDebug("Constructing buy intent for " + sku);
        Bundle buyIntentBundle = mService.getBuyIntent(3, mContext.getPackageName(), sku, ITEM_TYPE_INAPP, extraData);
        int response = getResponseCodeFromBundle(buyIntentBundle);
        if (response != BILLING_RESPONSE_RESULT_OK) {
            logError("Unable to buy item, Error response: " + getResponseDesc(response));

            result = new IabResult(response, "Unable to buy item");
            if (listener != null) listener.onIabPurchaseFinished(result, null);
        }

        PendingIntent pendingIntent = buyIntentBundle.getParcelable(RESPONSE_BUY_INTENT);
        logDebug("Launching buy intent for " + sku + ". Request code: " + requestCode);
        mRequestCode = requestCode;
        mPurchaseListener = listener;
        act.startIntentSenderForResult(pendingIntent.getIntentSender(),
                                       requestCode, new Intent(),
                                       Integer.valueOf(0), Integer.valueOf(0),
                                       Integer.valueOf(0));
    }
    catch (SendIntentException e) {
        logError("SendIntentException while launching purchase flow for sku " + sku);
        e.printStackTrace();

        result = new IabResult(IABHELPER_SEND_INTENT_FAILED, "Failed to send intent.");
        if (listener != null) listener.onIabPurchaseFinished(result, null);
    }
    catch (RemoteException e) {
        logError("RemoteException while launching purchase flow for sku " + sku);
        e.printStackTrace();

        result = new IabResult(IABHELPER_REMOTE_EXCEPTION, "Remote exception while starting purchase flow");
        if (listener != null) listener.onIabPurchaseFinished(result, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:54:57.397

我没有在应用计费中尝试过订阅，但据我所知，请在下面查看我的答案。确保您为产品提供的产品密钥有两件事是正确的。并在项目类型中使用 IabHelper.ITEM_TYPE_SUBS。

```
 1) static final String SKU_SUBSCRIPTION = "your product id should be here";

  2) mHelper.launchPurchaseFlow(youractivity.this,
                            SKU_SUBSCRIPTION, IabHelper.ITEM_TYPE_SUBS, 
                            RC_REQUEST, mPurchaseFinishedListener, payload); 
```

请让我确认它对你有用。希望它会帮助你。

检查 IabHelper 方法：

```
 // The listener registered on launchPurchaseFlow, which we have to call back when
   // the purchase finishes
   OnIabPurchaseFinishedListener mPurchaseListener;

   public void launchPurchaseFlow(Activity act, String sku, int requestCode, OnIabPurchaseFinishedListener listener) {
       launchPurchaseFlow(act, sku, requestCode, listener, "");
   }

   public void launchPurchaseFlow(Activity act, String sku, int requestCode, 
           OnIabPurchaseFinishedListener listener, String extraData) {
       launchPurchaseFlow(act, sku, ITEM_TYPE_INAPP, requestCode, listener, extraData); 
   }

   public void launchSubscriptionPurchaseFlow(Activity act, String sku, int requestCode, 
           OnIabPurchaseFinishedListener listener) {
       launchSubscriptionPurchaseFlow(act, sku, requestCode, listener, "");
   }

   public void launchSubscriptionPurchaseFlow(Activity act, String sku, int requestCode, 
           OnIabPurchaseFinishedListener listener, String extraData) {
       launchPurchaseFlow(act, sku, ITEM_TYPE_SUBS, requestCode, listener, extraData); 
   }

   /**
    * Initiate the UI flow for an in-app purchase. Call this method to initiate an in-app purchase,
    * which will involve bringing up the Google Play screen. The calling activity will be paused while
    * the user interacts with Google Play, and the result will be delivered via the activity's
    * {@link android.app.Activity#onActivityResult} method, at which point you must call
    * this object's {@link #handleActivityResult} method to continue the purchase flow. This method
    * MUST be called from the UI thread of the Activity.
    *
    * @param act The calling activity.
    * @param sku The sku of the item to purchase.
    * @param itemType indicates if it's a product or a subscription (ITEM_TYPE_INAPP or ITEM_TYPE_SUBS)
    * @param requestCode A request code (to differentiate from other responses --
    *     as in {@link android.app.Activity#startActivityForResult}).
    * @param listener The listener to notify when the purchase process finishes
    * @param extraData Extra data (developer payload), which will be returned with the purchase data
    *     when the purchase completes. This extra data will be permanently bound to that purchase
    *     and will always be returned when the purchase is queried.
    */
   public void launchPurchaseFlow(Activity act, String sku, String itemType, int requestCode,
                       OnIabPurchaseFinishedListener listener, String extraData) {
       checkSetupDone("launchPurchaseFlow");
       flagStartAsync("launchPurchaseFlow");
       IabResult result;

       if (itemType.equals(ITEM_TYPE_SUBS) && !mSubscriptionsSupported) {
           IabResult r = new IabResult(IABHELPER_SUBSCRIPTIONS_NOT_AVAILABLE, 
                   "Subscriptions are not available.");
           if (listener != null) listener.onIabPurchaseFinished(r, null);
           return;
       }

       try {
           logDebug("Constructing buy intent for " + sku + ", item type: " + itemType);
           Bundle buyIntentBundle = mService.getBuyIntent(3, mContext.getPackageName(), sku, itemType, extraData);
           int response = getResponseCodeFromBundle(buyIntentBundle);
           if (response != BILLING_RESPONSE_RESULT_OK) {
               logError("Unable to buy item, Error response: " + getResponseDesc(response));

               result = new IabResult(response, "Unable to buy item");
               if (listener != null) listener.onIabPurchaseFinished(result, null);
               return;
           }

           PendingIntent pendingIntent = buyIntentBundle.getParcelable(RESPONSE_BUY_INTENT);
           logDebug("Launching buy intent for " + sku + ". Request code: " + requestCode);
           mRequestCode = requestCode;
           mPurchaseListener = listener;
           mPurchasingItemType = itemType;
           act.startIntentSenderForResult(pendingIntent.getIntentSender(),
                                          requestCode, new Intent(),
                                          Integer.valueOf(0), Integer.valueOf(0),
                                          Integer.valueOf(0));
       }
       catch (SendIntentException e) {
           logError("SendIntentException while launching purchase flow for sku " + sku);
           e.printStackTrace();

           result = new IabResult(IABHELPER_SEND_INTENT_FAILED, "Failed to send intent.");
           if (listener != null) listener.onIabPurchaseFinished(result, null);
       }
       catch (RemoteException e) {
           logError("RemoteException while launching purchase flow for sku " + sku);
           e.printStackTrace();

           result = new IabResult(IABHELPER_REMOTE_EXCEPTION, "Remote exception while starting purchase flow");
           if (listener != null) listener.onIabPurchaseFinished(result, null);
       }
   } 
```

# ios - 具有滚动效果的页面视图控制器与启用分页的 UIScrollView

> ID：16159895
> 
> 赞同：1
> 
> 时间：2013-04-23T02:28:29.773
> 
> 标签：ios, uiscrollview, uipageviewcontroller

我不明白具有滚动效果的页面视图控制器和启用分页的 UIScrollView 之间有什么区别。

如果他们有一些滚动效果，你觉得哪一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:19:42.653

两者在视觉上是相同的，但是在页面视图控制器中，我们必须在之前和之后为代表传递视图控制器，您还可以在页面视图控制器中使用页面卷曲效果。

# image - MATLAB：图像 AlphaData 改变图形大小

> ID：16159897
> 
> 赞同：0
> 
> 时间：2013-04-23T02:28:42.443
> 
> 标签：image, matlab, size, border, figure

我有两个图像：需要用 0.5 的恒定 alpha 映射`im2`覆盖。`im1`每当我设置`'AlphaData'`for `im2`（在`im1`下面显示）时，图形/轴的大小都会略有变化。如果我的坐标轴占据了整个图形，一些边框像素就会丢失。以下示例通过两个示例图像演示了此问题，其中`im2`有一个黄色边框，因此您可以清楚地注意到此问题：

```
close all;

frame_sz = [106 777];
% create a white im1
im1 = ones([frame_sz 3]);

% create im2 with a yellow border
im2 = zeros([frame_sz 3]);
im2(:,1,[1 2]) = 1;
im2(:,end,[1 2]) = 1;
im2(1,:,[1 2]) = 1;
im2(end,:,[1 2]) = 1;

% create the figure at a specific location with size equal to image
screen_sz = get(0,'ScreenSize');
fg_h = figure('units', 'pixels', 'position', ...
    [screen_sz([3 4])-frame_sz([2 1])-40 frame_sz([2 1])], ...
    'paperpositionmode', 'auto');
ax_h = axes('Parent',fg_h);

% show first image
imshow(im1, 'Parent',ax_h, 'InitialMagnification','fit');
hold on;
% display im2 ontop of im1
h = image(im2, 'Parent',ax_h);
% set the axis such that image occupies the whole figure
set(ax_h, 'Units','normalized', ...
    'position', [0 0 1 1], 'visible', 'off');
axis off;

%%%%%%%%%%%% PROBLEM HAPPENS HERE %%%%%%%%%%%%%
% as soon as I set the AlphaData couple of pixels 
%  go missing from the right and bottom side
set(h, 'AlphaData', ones(frame_sz([1 2]))*0.5); 
```

无论我是使用 image() 叠加还是仅使用 image() 显示图像，都会出现问题。一旦我设置了 AlphaData，轴的大小就会发生轻微的变化并切断一些边界。

我该如何解决？

# json - Elasticsearch 重新索引或标记已删除类型属性

> ID：16159902
> 
> 赞同：1
> 
> 时间：2013-04-23T02:29:34.697
> 
> 标签：json, rest, lucene, elasticsearch

这与我在这里的原始问题有关： [Elasticsearch Delete Mapping Property](https://stackoverflow.com/questions/16156565/elasticsearch-delete-mapping-property)

从那篇文章假设您将不得不“重新索引”您的数据。这样做的安全策略是什么？

总结一下原始帖子，我试图从以下位置获取映射：

```
{
  "propVal1": {
    "type": "double",
    "index": "analyzed"
  },
  "propVal2": {
    "type": "string",
    "analyzer": "keyword"
  },
  "propVal3": {
    "type": "string",
    "analyzer": "keyword"
  }
} 
```

对此：

```
{
  "propVal1": {
    "type": "double",
    "index": "analyzed"
  },
  "propVal2": {
    "type": "string",
    "analyzer": "keyword"
  }
} 
```

删除已删除属性的所有数据。

我一直在考虑为此使用 REST API。这似乎很危险，因为您将需要与进行 REST 调用的客户端应用程序同步状态，即您需要将所有文档发送给客户端，修改它们，然后将它们发送回来。

如果有一个服务器端操作可以移动和转换类型，那将是理想的。是否存在这样的事情，或者我是否在“重新索引”中遗漏了一些明显的东西？

另一种方法是将数据标记为不再有效。就映射而言，是否有任何内置标志，或者是否有必要创建一个辅助类型来定义另一个类型属性是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:01:42.393

你可以看看[elasticsearch-reindex 插件](https://github.com/karussell/elasticsearch-reindex)。更手动的操作可能是使用扫描和滚动 API 来取回您的原始内容并使用批量 API 将其索引到新的索引或类型中。

最后一个答案，您是如何在 Elasticsearch 中获取文档的？如果您在某处已经有数据源，只需使用与以前相同的过程即可。如果您不想要任何停机时间，请在旧索引之上使用别名，一旦重新索引完成，只需将别名移动到新索引。

# qt - 如何使用 QtSoap 解析动态响应？

> ID：16159904
> 
> 赞同：0
> 
> 时间：2013-04-23T02:29:49.727
> 
> 标签：qt

我目前有以下类型的响应：

```
<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><StartBuisnessResponse xmlns=\"http://test.com/kerosene/mytest/\"><StartBuisnessResult><Commodity><_price>45</_price></Commodity><Commodity><_price>36</_price></Commodity></StartBuisnessResult></StartBuisnessResponse></soap:Body></soap:Envelope> 
```

在这里，节点是动态的。在这种情况下，我无法找到使用 QtSoap 解析响应 SOAP XML 的方法。

这是用于获取第一个商品的代码：

```
QString str("<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><StartBuisnessResponse xmlns=\"http://cg.nic.in/kerosene/finotest/\"><StartBuisnessResult><Commodity><_price>45</_price></Commodity><Commodity><_price>36</_price></Commodity></StartBuisnessResult></StartBuisnessResponse></soap:Body></soap:Envelope>");

    QByteArray *arr = new QByteArray();
    arr->append(str);

    QtSoapMessage *testMsg = new QtSoapMessage();
    testMsg->setContent(*arr);

    const QtSoapType &testCont = testMsg->returnValue();
    const QtSoapType &price = testCont["Commodity"];

    qDebug() << "The value of the _price here is " << price["_price"].value().toString(); 
```

但是在这种情况下如何遍历后续节点呢？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:25:01.403

如果您遵循他们为 Google 提供的 Qt 解决方案上显示的示例`QtSoap`，您应该正在使用它。

[http://doc.qt.digia.com/solutions/4/qtsoap/index.html](http://doc.qt.digia.com/solutions/4/qtsoap/index.html)

[http://doc.qt.digia.com/solutions/4/qtsoap/google-example.html](http://doc.qt.digia.com/solutions/4/qtsoap/google-example.html)

如果您不想尝试，另一种方法是使用 QXmlStreamReader：

[http://qt-project.org/doc/qt-4.8/qxmlstreamreader.html#details](http://qt-project.org/doc/qt-4.8/qxmlstreamreader.html#details)

这是一些快速代码，可以从中获取`_price`信息：

```
// add "QT += xml" to your .pro

#include <QXmlStreamReader>
#include <QDebug>

QXmlStreamReader xml(str);

while (!xml.atEnd())
{
    if (xml.readNextStartElement())
        qDebug() << qPrintable(xml.name().toString());
    if(xml.name().toString() == "_price")
    {
        qDebug() << "\t" << xml.readElementText().toInt();
    }
} 
```

您还可以使用许多其他替代方案。请参阅[Qt XML 处理](http://qt-project.org/doc/qt-4.8/xml-processing.html)。

希望有帮助。

# python - 在 Python 中更改全局变量

> ID：16159905
> 
> 赞同：1
> 
> 时间：2013-04-23T02:29:52.893
> 
> 标签：python, global-variables

我想从 Python 2.7 中的函数修改全局变量

```
x = 0
def func():
    global x
    x = 2 
```

如果我在解释器中加载这段代码，然后运行 ​​func()，x 保持为 0。如何从函数中修改 x 的值？

编辑：这是解释器和源代码的屏幕截图。我不确定为什么它适用于其他人而不适用于我。 [http://img18.imageshack.us/img18/9567/screenshotfrom201304222.png](http://img18.imageshack.us/img18/9567/screenshotfrom201304222.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:07:52.010

这是一个非常有趣的情况。当我从解释器运行您的代码时，`from mytest import *`遇到了同样的问题：

```
>>> from mytest import *
>>> x
0
>>> func()
>>> x
0 
```

但是，当我刚刚`import mytest`从那里运行它时：

```
>>> import mytest
>>> mytest.x
0
>>> mytest.func()
>>> mytest.x
2 
```

结果很好！我相信，原因来自[http://docs.python.org/2/reference/simple_stmts.html#the-global-statement](http://docs.python.org/2/reference/simple_stmts.html#the-global-statement)中的一行：

> 全局语句中列出的名称不得定义为形式参数或 for 循环控制目标、类定义、函数定义或导入语句。

看起来因为它是您的导入语句中的参数（通过导入全部），`global`所以遇到了麻烦。您需要`import *`，还是可以简单地导入整个模块？

# java - 字节[]到Java中适当截断的字符串转换

> ID：16159906
> 
> 赞同：0
> 
> 时间：2013-04-23T02:30:15.900
> 
> 标签：java, string, truncate

我有一个大小为 200 的字节数组，其中接收到的数据是`socket.receive()`. 假设数据包数据是“你好”。

```
int size = 200;
DatagramPacket packet = new DatagramPacket(new byte[size], size);
socket.receive(packet);
byte[] byte1 = packet.getData(); 
```

我试图将字节数组转换为字符串，字符串长度为 200，即使它只打印出 'hello' 字符串。

```
String result = new String(byte1); // .toString();
System.out.println(result.length()); --> 200
System.out.println(result); ---> hello 
```

从 byte[] 转换字符串时，如何截断字符串以仅包含“hello”？

## 添加

根据马尔乔的回答，这解决了我的问题：

```
int packetLength = packet.getLength();
byte[] byte1 = packet.getData();
String result = new String(byte1);
return result.substring(0, packetLength); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:40:00.547

也许您应该尝试在收到数据后检查收到的数据的长度：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/DatagramPacket.html#getLength%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/DatagramPacket.html#getLength%28%29)

这应该是 4（在调用 socket.receive() 之后）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:37:29.503

如果额外的咬都是空的/空白，则 trim() 应该这样做。

# android - Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED|Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET

> ID：16159908
> 
> 赞同：1
> 
> 时间：2013-04-23T02:30:25.110
> 
> 标签：android, android-intent, launcher

当这两个标志被添加（或设置）到一个新的活动 A 时，A 成为任务的后栈的顶部并显示在屏幕上。此处按下 HOME，屏幕显示 home。我想要什么：然后让我们去启动器并选择应用程序的图标，应用程序再次活跃起来，A 消失了。我很困惑：然后让我们长按HOME并选择应用程序，应用程序再次激活，A仍然存在。

我希望 A 消失，但是从 Launcher 或最近。我怎样才能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:47:00.417

我认为没有任何简单的方法可以做到这一点。您可以从“最近”列表中排除您的应用程序，也可以在活动 A 中保存一个标志，如果为 true，则在 onCreate 中调用 finish()。

# emacs - Aquamacs 2.4 -- WordWrap / Visual Line Mode -- 错误解决方法？

> ID：16159909
> 
> 赞同：2
> 
> 时间：2013-04-23T02:30:28.187
> 
> 标签：emacs, aquamacs

有没有人找到解决 Aquamacs 2.4 无法在窗口边界正确换行的方法？

我最常使用的模式是文本模式和乳胶模式。

我已经删除了文本模式的内置钩子以尝试隔离错误并提出解决方法：

```
(remove-hook 'text-mode-hook 'smart-spacing-mode)
(remove-hook 'text-mode-hook 'auto-detect-wrap) 
```

下面的代码在状态栏中给了我一个花哨的指示符`WordWrap`，但是在窗口边界处文字仍然是零散的。

```
(add-hook 'latex-mode-hook 'set-word-wrap)
(add-hook 'text-mode-hook 'set-word-wrap) 
```

下面的代码给了我一个漂亮的状态栏指示器`vl WordWrap`，但单词在窗口边界仍然是零散的。

```
(setq-default global-visual-line-mode t) 
```

以下代码似乎没有明显的效果：

```
(setq longlines-wrap-follows-window-size t) 
```

我真的从未见过此功能有效，因此我不确定是否可以使用 Aquamacs 2.4。

预期的行为是单词应该通过自动换行到窗口边界的下一行来保持在一起。当我调整窗口大小时，这应该即时发生。当我输入一行时，当我到达窗口边缘时，这应该会自动发生。

以防万一这是冲突，我会提到我启用了 Yasnippets、本地和全局空格以及 flyspell。我还有行号、突出显示当前行、大小指示和列号。

也许有人可以给我负责此行为的 el / elc 文件的名称，我将从 24.3 版本中获取它并将其粘贴到 Aquamacs 2.4 中。我主要对这个版本感兴趣，因为它可以轻松处理 LaTeX 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:39:18.580

您是否尝试过在“选项”菜单中的子菜单“在此缓冲区中换行”？

或者，

```
(add-hook 'text-mode-hook #'visual-line-mode) 
```

或者

```
(global-visual-line-mode 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T05:24:40.783

Emacs / Aquamacs 的每晚版本已经解决了这个问题。

# java - 子类的参数可以少于其子类吗？

> ID：16159912
> 
> 赞同：0
> 
> 时间：2013-04-23T02:30:49.117
> 
> 标签：java, inheritance, constructor, subclass, superclass

我目前的任务是在 java 中编辑小行星游戏的代码。主类已经完成，但我必须完成main控制的游戏中交互对象的类。在游戏的 API 中，超类 SpaceObject 的构造函数是这样写的：

```
public SpaceObject(double xPos, double yPos, double xVel, double yVel, double radius){
    setXPosition(xPos);
    setYPosition(yPos);
    setXVelocity(xVel);
    setYVelocity(yVel);
    setRadius(radius);
} 
```

其子类 Comet 概述为：

```
Comet(double xPos, double yPos, double xVel, double yVel, double radius){
  super(xPos, yPos, xVel, yVel, radius);
} 
```

最后，问题，子类 LargeComet 概述为：

```
LargeComet(double xPos, double yPos, double xVel, double yVel){
  super(xPos, yPos, xVel, yVel);
} 
```

而 LargeComet 的半径应该是 40（这个 int 的静态变量在超类 SpaceObject 中）。

我似乎收到了一个错误，但是参数不匹配。我在子类 LargeComet 的构造函数中不能有 5 个参数值，因为这样我在使用 4 个参数引用它的主类中出现错误（而且我不应该在那里更改主类代码）。我在这里忘记了关于显式调用超类构造函数的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:34:07.583

您需要使用它期望的参数（其中 5 个）调用 super()。如果一个是静态的，你给它静态值而不是你的参数。对于其父类接受 3 个参数的类，它看起来像这样。

```
MyClass(int arg1, int arg2)
{
  super(arg1,arg2,5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:35:51.480

由于 SpaceObject 已经知道 LargeComet 半径，所以我只需调用 Comet 构造函数，将 4 个参数传递给 LargeComet 构造函数，再加上来自超类的常量。您不会创建比现有更多的依赖项。

# java - Android 如何防止后退按钮退出应用程序（按下主页按钮后）

> ID：16159916
> 
> 赞同：0
> 
> 时间：2013-04-23T02:31:23.167
> 
> 标签：java, android

我有一个问题，后退按钮工作正常。除非您按下主页按钮，然后重新进入应用程序，然后再次按下返回按钮。然后它退出应用程序，因为它们没有任务跟踪（活动）

这是我的同事代码，我正在尝试修复。Android.R.id.home 是有问题的软后退按钮，尽管操作系统后退按钮也发生了同样的事情。

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent intent;
        switch (item.getItemId()) {
        case android.R.id.home:
            activity.finish();
            return true;
        case R.id.menu_paymentLocs:
            intent = new Intent(activity, PaymentLocationsPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_feedback:
            intent = new Intent(activity, FeedbackPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_about:
            intent = new Intent(activity, AboutPage.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            activity.startActivity(intent);
            return true;
        case R.id.menu_changeconsumer:
            new SelectConsumerDialogFragment().show(getFragmentManager(), "select_consumer");
            return true;
        case R.id.menu_logout:
            intent = new Intent(activity, SplashPage.class);
            myMeter.logout();
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
            activity.startActivity(intent);
            return true;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:17:01.797

为了防止后退按钮执行任何预定义的操作，您需要覆盖该`onbackpressed()`方法

如果您使用 api 级别 2.0 或更高版本，请尝试此操作

```
@Override
public void onBackPressed() {
    // Do Here what ever you want do on back press;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:04:45.033

移除所有`intent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);`

# iphone - 如何隐藏 UITableView 部分的 headView？

> ID：16159917
> 
> 赞同：0
> 
> 时间：2013-04-23T02:31:24.627
> 
> 标签：iphone, ios, objective-c, objective-c-blocks

我想在触摸时隐藏导航栏和标签栏并在 uitableview 上移动，打击代码：viewForHeaderInSection 中的 _headView 没问题。但有时在块执行后，_headView 是可见的

```
if(_headView)
    _headView.hidden = YES; //
[UIView animateWithDuration:0.5 animations:^{
    scrollView.frame = rect;
    _vc.navigationController.navigationBar.top -= navigationBarHeight;
    tabView.top =  SCREEN_HEIGHT;

} completion:^(BOOL finished) {
}]; 
```

如果我将隐藏代码移动到完成块，它运行正常，但在 0.5 秒后隐藏，它很慢。

```
[UIView animateWithDuration:0.5 animations:^{
    scrollView.frame = rect;
    _vc.navigationController.navigationBar.top -= navigationBarHeight;
    tabView.top =  SCREEN_HEIGHT;

} completion:^(BOOL finished) {
    if(_headView)
        _headView.hidden = YES;  //Delay after 0.5s.
}]; 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:32:00.377

我们有一个委托方法来设置部分的高度`UITableView`

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

只需为此返回 0，用于隐藏标题。

# java - 如何生成二维码并在网页中显示

> ID：16159922
> 
> 赞同：0
> 
> 时间：2013-04-23T02:32:28.187
> 
> 标签：java, zxing

我如何使用“zxing”（[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)）或任何其他免费提供的库来生成二维码并显示在我的网页上。

当用户在我的网页上注册提供信息时，我想显示一个带有他/她（姓名/电子邮件/手机号码）的 qrcode

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:57:01.900

如果您的网页是供公众访问的，我强烈建议您使用 Google Charts API。这是一个示例： [https ://developers.google.com/chart/infographics/docs/qr_codes](https://developers.google.com/chart/infographics/docs/qr_codes)

# ruby-on-rails-3 - Rails 中的数学视图 simple_form

> ID：16159924
> 
> 赞同：0
> 
> 时间：2013-04-23T02:32:36.943
> 
> 标签：ruby-on-rails-3, view, simple-form

我有一个视图，其中包含我想要总计的几个整数的简单表单输入 - 但我不知道该怎么做。显然这不起作用

可以澄清一下，这是 haml 中家庭模型的视图表单（家庭没有@，因为我使用的是体面的曝光）

```
= simple_form_for household do |f|
  %td= f.input :income1
  %td= f.input :income2
  %td= f.input :income3

  %td  Total Income #{household.income1.to_i + household.income2.to_i + household.income3.to_i} 
```

我想在用户输入收入时更新总数 如何获得总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T23:19:26.093

好的，我想通了 - 这可行，但在更新之前它不会显示总数。我想我需要 Ajax 来现场直播

# actionscript-3 - 如何从影片剪辑中访问 ActionScript 类上的脚本？

> ID：16159925
> 
> 赞同：0
> 
> 时间：2013-04-23T02:32:42.427
> 
> 标签：actionscript-3, movieclip

我希望能够从影片剪辑中访问私有变量，有谁知道我会怎么做？

我希望能够`public function counter(numPoints:int)`从我的主 swf 上的影片剪辑中访问 ActionScript 类文件中的内容。每当我尝试访问它时，它都会以未定义的形式出现，但是如何从影片剪辑内部访问它是问题（我知道所有变量都已正确定义，因为它在不在影片剪辑内部时工作）。任何想法表示赞赏^^;，谢谢！

```
 unlock3.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame_3);

    function fl_ClickToGoToAndStopAtFrame_3(event:MouseEvent):void
    {
        MovieClip(parent).gotoAndStop(8);
        addScore(1);
} 
```

我想让 addScore 函数正常工作，但它总是未定义。此处的脚本位于影片剪辑中。导航工作正常，但我不知道如何定位分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:15:37.503

目前还不清楚你到底在做什么，你的函数被命名为 counter 但你正在调用 addScore。看看这是否有帮助。

在您的文档类（假设它被称为 Main）中，您将具有以下内容：

```
private var _currentScore:int;

public function addScore(scoreToAdd:int):void
{

_currentScore += scoreToAdd;

trace("New Score: "+_currentScore);

} 
```

然后在扩展 MovieClip 的对象类中，您将拥有：

```
function fl_ClickToGoToAndStopAtFrame_3(event:MouseEvent):void
{
Main.addScore(1);
} 
```

# php - while 循环没有重置结果和重复结果

> ID：16159931
> 
> 赞同：0
> 
> 时间：2013-04-23T02:33:25.540
> 
> 标签：php, loops, smarty

我有 3 个表，我在 while 循环中查询了两个表和第二个表，这个表是结果视图中的问题，请检查附件以了解问题，这是 php 代码：

```
 $select_all =  mysql_query("SELECT categories.id,cat![enter image description here][1]egories.name,categories.name_en,
categories.block_type,group_fields.ct_id,group_fields.content,group_fields.content_en
 FROM categories LEFT JOIN group_fields
ON categories.block_type=group_fields.id
WHERE categories.home_new='1' ORDER BY sorting ASC ")or die(mysql_error());
while($row_all    = mysql_fetch_array($select_all))
{
  $allcc[]      = $row_all;

  $tblname      =$row_all['id'];
  $select_grp   = $Drweb2->mysql_query("select * from $tblname");
  while($rrc    = $Drweb2->mysql_fetch_array($select_grp))
  {
    $rgcont[] = $rrc;
  }
  $smarty->assign('data',$rgcont);
}
$smarty->assign('allcc',$allcc); 
```

这是聪明的 html 代码：

```
{section name=gac loop=$allcc}
{$allcc[gac].content}
{/section} 
```

问题示例：[1]：http: [//i.stack.imgur.com/mOHIg.png](http://i.stack.imgur.com/mOHIg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:44:25.913

我假设 while 语句正在工作，但您没有遍历数组。

也许尝试：

```
$tblname      = $row_all['id'];
$select_grp   = $Drweb2->mysql_query("select * from $tblname");
$data         = $Drweb2->mysql_fetch_array($select_grp)
foreach ($data as $row) {
    $rgcont[] = $row; // or a specific field name using $row['field_name']
} 
```

至于聪明人，你能这样做吗：

```
{section name=gac loop=$allcc}
    {$allcc[gac].content}
    {$allcc[gac].data}
{/section} 
```

不确定这是否可行，但这是我最好的猜测。

# javascript - 通过ajax发送长字符串不起作用

> ID：16159932
> 
> 赞同：0
> 
> 时间：2013-04-23T02:33:27.133
> 
> 标签：javascript, ajax

我正在尝试通过 ajax 向 php 页面发送一个长字符串，该页面将处理它并返回我需要的内容，我认为它超出了 GET 容量或类似的东西！但由于某种原因它不起作用

```
var string = document.getElementById('text').innerHTML; // so long text
var xhr = new XMLHttpRequest();
xhr.open('GET', 'read.php?string=' + string, true);
xhr.send();
xhr.onreadystatechange = function () {
   if (xhr.status == 200 && xhr.readyState == 4) {
    content.innerHTML = xhr.responseText;
   } else {
    content.innerHTML = 'loading';
   }
} 
```

我怎样才能让它工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:40:23.677

只需更换：

```
xhr.open('GET', 'read.php?string=' + string, true);
xhr.send(); 
```

和

```
var body = "string=" + encodeURIComponent(string);
xhr.open("POST", "read.php", true);
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
xhr.setRequestHeader("Content-Length", body.length);
xhr.setRequestHeader("Connection", "close");
xhr.send(body); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:37:44.480

要解决 URL 编码问题，请执行以下操作：

```
xhr.open('GET', 'read.php?string=' + encodeURIComponent(string), true); 
```

# php - uplodify 的两个问题

> ID：16159934
> 
> 赞同：0
> 
> 时间：2013-04-23T02:33:33.133
> 
> 标签：php, jquery

我已经为我的网站实施[了 uplodify](http://www.uploadify.com/)。我成功地将文件和缩略图上传到服务器。谁能告诉我如何在网站上显示这些缩略图。

上传实现

```
<script type="text/javascript" language="JavaScript">
    $(function() {
$('#file_upload').uploadify({
    'removeCompleted' : false,
    'swf'      : 'uploadify.swf',
    'uploader' : 'uploadify.php',
    'buttonText' : 'Add/Edit Images',
'cancelImg' : 'cancel.png',
     'onUploadSuccess' : function(file, data, response) {
    alert('The file was saved to: ' + data);
},
onComplete : function(event,queueID,fileObj,response,data) {

 $('#thumbnails).append(<img src=\"' + response + '\" />');
}
        // Put your options here - ashish tyagi
    }); 
```

HTML 代码：

```
<tr><input type="file" name="file_upload" id="file_upload" /></tr>
<tr><div id=\"thumbnail"\></div></tr> 
```

我也看不到取消按钮，我需要显示缩略图而不是文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:40:19.860

您在 onUploadSuccess 事件中有文件名，并且您应该知道文件已上传到的目录。只要您知道 URL 的这两个部分，就可以构建要包含在页面上的图像的 URL。

```
$(function () {
    var base_url = "http://example.com/";

    $('#file_upload').uploadify({
        'removeCompleted': false,
         'swf': 'uploadify.swf',
         'uploader': 'uploadify.php',
         'buttonText': 'Add/Edit Images',
         'cancelImg': 'cancel.png',
         'onUploadSuccess': function (file, data, response) {
            $('#thumbnails').append('<img src=\"' + base_url + file.name + '\" />');
         }
    });
}); 
```

而且我不知道取消图像有什么问题，但我的猜测是浏览器正试图从错误的 URL 获取它。尝试使用图像文件的整个路径。

# java - 为什么我不能停止这个服务器？

> ID：16159935
> 
> 赞同：-1
> 
> 时间：2013-04-23T02:33:36.610
> 
> 标签：java

我正在尝试用 java 编写一个简单的 Web 服务器，但一直在停止它。这是一段示例代码：

```
 public static void main(String... args) {

    args = new String[]{"stop"};
    Server s = Server.getServerInstance();
    s.init();
    if (args.length > 0) {
        for (int i = 0; i < args.length; i++) {
            if (args[i].equals("start")) {
                   System.out.println(s);
                   s.start();
            } else if (args[i].equals("stop")) {
                   System.out.println(s);
                   s.stop();
            }
        }
    }
}

public class Server {

private static Server serverInstance = null;
private volatile boolean running = false;
private Thread serverthread = null;

private Server() {}

public static synchronized Server getServerInstance()
{
    if(serverInstance == null)
    {
        serverInstance = new Server();
    }
    return serverInstance;
}

public void init()
{
    Runnable r = new ServerThread();
    serverthread = new Thread(r);
}

public void start()
{
    running = true;
    if(serverthread!=null)
    {
        serverthread.start();
    }
}

public void stop()
{
    running = false;
    if(serverthread!=null)
    {
        try {
            serverthread.join(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

class ServerThread implements Runnable
{
    @Override
    public void run() {
        while(running)
        {
            //some action here...
            System.out.println("RUNNING..");
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

} 
```

}

我将所有这些代码打包到一个 jar 文件中，并使用 java -cp *.jar CLASS_NAME args 命令来启动和停止服务器。服务器可以启动，但从未通过传入停止参数而停止。我调试了一下，发现运行的布尔值永远不会改变..为什么？如何以优雅的方式实现 stop 方法？谢谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:38:20.403

根据您的代码，我假设您尝试停止的服务器实例不是正在运行的服务器实例。

相反，试试这个。

```
public static void main(String... args) {

    Server s = Server.getServerInstance();
    s.init();
    s.start();
    try {
        Thread.sleep(5000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    s.stop();
} 
```

这将启动您的服务器，等待 5 秒钟然后关闭它。

如果要停止在单独进程中运行的服务器，则需要考虑使用套接字之类的东西来启用跨进程通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:42:36.070

我建议你使用这样的脚本（当然如果你的 Java 服务器在 Linux 上运行）

```
#!/bin/sh

PROGRAM_NAME=servername
PROGRAM_HOME=/usr/local/servername
PIDFILE=/var/run/$PROGRAM_NAME.pid

application_start() {
    CMDLINE="/usr/lib/java/bin/java -jar $PROGRAM_NAME.jar"
    echo -n "Starting $PROGRAM_NAME daemon: $CMDLINE"
    cd $PROGRAM_HOME

    /usr/lib/java/bin/java -classpath lib -jar $PROGRAM_NAME.jar &
    ps -Ao pid,command | grep java | grep $PROGRAM_NAME.jar | awk '{print $1}' > $PIDFILE
    echo
}

application_stop() {
        echo -n "Stopping $PROGRAM_NAME daemon..."

        if [ -r $PIDFILE ]; then
                PID=`cat $PIDFILE`
                if [ $PID -gt 0 ]; then
                        kill $PID
                        echo
                        sleep 1
                        fi
                rm -f $PIDFILE
        fi
        killall $PROGRAM_NAME
}

application_restart() {
    application_stop
    sleep 1
    application_start
}

case "$1" in
'start')
    application_start
    ;;
'stop')
    application_stop
    ;;
'restart')
    application_restart
    ;;
*)
    echo "usage $0 start|stop|restart"
esac 
```

# java - 按钮 onClick 后程序崩溃

> ID：16159937
> 
> 赞同：0
> 
> 时间：2013-04-23T02:34:01.120
> 
> 标签：java, android

不知道这里有什么问题。如果编辑文本点中没有任何内容，则会发生崩溃。如果它们都被填写，它会起作用。所以我的问题是`if`语句检查。`if`即使编辑文本为空，它也会进入语句。它应该跳到`else`并记录并非所有字段都已完成。

问题就在这里（我认为）-即使不应该这样做，它也会跳入循环：

```
//Calculate Risk Score Button

Button calcButton = (Button) findViewById(R.id.calcButton);

calcButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

        // Create and set values
        int smoker = 0;
        int medicated = 0;
        char gender = 'm';
        String selectedAge = (String) ageSpin.getSelectedItem();
        Log.i("TEST", "Before if");

        if (selectedAge != null
                && cholEdit.getText().toString() != null
                && hdlEdit.getText().toString() != null
                && sbpEdit.getText().toString() != null
                && genderGroup.getCheckedRadioButtonId() != -1
                && smokerGroup.getCheckedRadioButtonId() != -1
                && medsGroup.getCheckedRadioButtonId() != -1) {
        Log.i("TEST", "After if");

            // store values
            int age = Integer.parseInt(selectedAge.toString());
            int chol = Integer.parseInt(cholEdit.getText().toString());
            int hdl = Integer.parseInt(hdlEdit.getText().toString());
            int sbp = Integer.parseInt(sbpEdit.getText().toString());
            int genderId = genderGroup.getCheckedRadioButtonId();
            int smokeId = smokerGroup.getCheckedRadioButtonId();
            int medsId = medsGroup.getCheckedRadioButtonId();

            // Set gender, smoker and if medicated values
            if (genderId == R.id.maleR)
                gender = 'm';
            else if (genderId == R.id.femaleR)
                gender = 'f';

            if (smokeId == R.id.yesR)
                smoker = 1;
            else if (smokeId == R.id.noR)
                smoker = 0;

            if (medsId == R.id.yesR2)
                medicated = 1;
            else if (medsId == R.id.yesR2)
                medicated = 0;

            // Calculate Answer and Print
            String answer = calc.calculateRiskScore(age, gender, chol,
                    smoker, hdl, sbp, medicated);

            SharedPreferences settings = getSharedPreferences(
                    PREF_FILE, 0);
            SharedPreferences.Editor editor = settings.edit();

            editor.putInt("age", age);
            editor.putInt("chol", chol);
            editor.putInt("hdl", hdl);
            editor.putInt("sbp", sbp);
            editor.putInt("gender", genderId);
            editor.putInt("smoker", smoker);
            editor.putInt("med", medicated);
            editor.putString("risk", answer);

            editor.commit();

            displayRisk(answer);
        } else {
            Toast toast = Toast.makeText(getApplicationContext(),
                    "Not all fields are completed", Toast.LENGTH_SHORT);
            toast.show();
        }
    }
}); 
```

这是 logcat 错误。我明白错误在说什么，但它不应该出现在`if`声明中：

```
04-22 21:26:43.920: I/TEST(22544): Before if
04-22 21:26:43.920: I/TEST(22544): After if
04-22 21:26:43.920: W/dalvikvm(22544): threadid=1: thread exiting with uncaught exception (group=0x41634438)
04-22 21:26:43.930: E/AndroidRuntime(22544): FATAL EXCEPTION: main
04-22 21:26:43.930: E/AndroidRuntime(22544): java.lang.NumberFormatException: Invalid int: ""
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.invalidInt(Integer.java:138)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.parseInt(Integer.java:359)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.parseInt(Integer.java:332)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at edu.auburn.eng.csse.comp3710.group04.CardiovascularActivity$1.onClick(CardiovascularActivity.java:83)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.view.View.performClick(View.java:4198)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.view.View$PerformClick.run(View.java:17164)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.os.Handler.handleCallback(Handler.java:615)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.os.Looper.loop(Looper.java:137)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at android.app.ActivityThread.main(ActivityThread.java:4918)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:46:06.260

由于异常已抛出：

```
04-22 21:26:43.930: E/AndroidRuntime(22544): java.lang.NumberFormatException: Invalid int: ""
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.invalidInt(Integer.java:138)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.parseInt(Integer.java:359)
04-22 21:26:43.930: E/AndroidRuntime(22544):    at java.lang.Integer.parseInt(Integer.java:332) 
```

问题是：`TextField`您用来获取文本并解析 int。因为这个文本字段是空的（你应该记住，空与 非常不同`NULL`）。 `TextField`本身，不为空，但你得到的文本是空的（`""`）。所以，`Integer.parseInt`在这种情况下会抛出异常。（不会像我们希望的那样自动返回 0）因此，在代码中，您必须将程序中`try-catch`的所有方法都用块包围`Integer.parseInt`，以防止用户进行一些愚蠢的输入。

```
int chol = 0;
int hdl = 0;
int age = 0;
try {

                    age = Integer.parseInt(selectedAge.toString());
                    chol = Integer.parseInt(cholEdit.getText().toString());
                    hdl = Integer.parseInt(hdlEdit.getText().toString());

}

catch (Exception e) {
     chol = 0;
     hdl = 0;
     age = 0;
} 
```

这是您使用`Integer.parseInt`或`Double.parseDouble`...时的最佳模式

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:39:34.147

而不是检查“！= null”，您应该检查isNullOrEmpty（编写这样一个方法来检查“string == null || string.isEmpty（）”，因为显然那些toString方法返回空字符串（“”）和 Integer.parseInt barfs 在空字符串上的作用与在字符串“hello”上的作用相同。

# mysql - 我可以将此模式用于 where 子句的可选部分吗？

> ID：16159939
> 
> 赞同：0
> 
> 时间：2013-04-23T02:34:08.650
> 
> 标签：mysql, sql, query-optimization, prepared-statement

我有这段代码，非常标准的东西。它采用 java 对象中的一些过滤器，并返回与过滤器匹配的所有记录：

```
class MarkFilters {
   Integer idFilter;
   Integer userIDFilter;
   Integer claimIDFilter;
}

List<Integer> findMarksMatchingFilters(MarkFilters filters) {
    String sql = "select id from Mark where 1";

    // This has the values to substitute in for the ?'s in the SQL
    List<Object> parameters = new LinkedList<Object>();

    if (filters.idFilter != null) {
        sql += " and id = ?";
        parameters.add(filters.idFilter);
    }

    if (filters.userIDFilter != null) {
        sql += " and userID = ?";
        parameters.add(filters.userIDFilter);
    }

    if (filters.claimIDFilter != null) {
        sql += " and claimID = ?";
        parameters.add(filters.claimIDFilter);
    }

    return executeSQLWithParameters(sql, parameters);
} 
```

我找到了一种应该做同样事情的方法：

```
List<Integer> findMarksMatchingFilters(MarkFilters filters) {
    return executeSQLWithParameters(
            "select * from Mark " +
            "where (? = NULL or id = ?) " +
            "and (? = NULL or userID = ?) " +
            "and (? = NULL or claimID = ?) ",
        filters.idFilter, filters.idFilter,
        filters.userIDFilter, filters.userIDFilter,
        filters.claimIDFilter, filters.claimIDFilter);
} 
```

例如，如果我输入一个*新的 MarkFilters(null, null, 3)*，则 sql 语句将是：

```
select * from Mark
where (NULL = NULL or id = NULL)
and (NULL = NULL or userID = NULL)
and (3 = NULL or claimID = 3) 
```

理论上将优化为：

```
select * from Mark where claimID = 3; 
```

我的具体问题：这种优化真的会发生吗？

我更广泛的问题：这是一个很好的模式，还是有我看不到的缺点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:38:19.043

不，表达式的`NULL = NULL`计算结果为假。

你要：

```
 "select * from Mark " +
        "where (? is NULL or id = ?) " +
        "and (? is NULL or userID = ?) " +
        "and (? is NULL or claimID = ?) ", 
```

我希望 MySQL 在编译时评估常量表达式。这意味着该`where`条款在评估之前被简化。但是，我在文档中找不到可以保证这一点的特定参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:48:17.303

不完全是一个答案，但我只是找到了我建议的两种方法的一个很好的替代方法：

[http://mybatis.github.io/mybatis-3/dynamic-sql.html#chooseWhenOtherwise](http://mybatis.github.io/mybatis-3/dynamic-sql.html#chooseWhenOtherwise)

# c++ - 内存管理：范围和局部指针变量

> ID：16159940
> 
> 赞同：0
> 
> 时间：2013-04-23T02:34:11.483
> 
> 标签：c++, memory-management, memory-leaks, reference, local-variables

内存管理：范围和局部指针变量

Q. 在内存管理方面，以下代码中的错误是什么？

```
 char* secret_message()
 {
   char message_buffer[100];
   char* text = "Hey man!";
   int n = 0;
   while (text[n] != '\0')
     n++;
   for (int i = 0; i <= n ; i++)
     message_buffer[i] = text[i];
   return message_buffer;
 } 
```

回答。我认为 message_buffer 是函数结束后自动回收的局部变量。此函数返回对无效内存位置的引用，因为 message_buffer 在 return 语句后立即消失。

这是对的吗？

请告诉我。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:36:53.907

> 回答。我认为 message_buffer 是函数结束后自动回收的局部变量。此函数返回对无效内存位置的引用，因为 message_buffer 在 return 语句后立即消失。

是的，这是正确的。`message_buffer`在堆栈上分配，它的内存将在函数退出时被释放。指针将指向释放内存。

顺便提一句：

```
char* text = "Hey man!"; 
```

应该

```
const char* text = "Hey man!"; 
```

在现代 C++ 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T09:17:19.993

message_buffer 是自动变量，其范围仅在函数内。此变量应在主函数中声明或在函数中声明为静态变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:38:25.860

你是对的。这会产生未定义的行为。

# php - SCP 命令行和 PHP exec() 没有做同样的事情

> ID：16159943
> 
> 赞同：0
> 
> 时间：2013-04-23T02:34:28.117
> 
> 标签：php, linux, apache, ssh, scp

当我在命令行上运行它时：

```
scp -i private.ppk -P 22 foo.txt someuser@domain.com:/home/someuser/foo.txt 
```

一切正常。`foo.txt`毫无问题地传输到远程服务器。我需要从 PHP 运行完全相同的命令。所以，我有以下代码：

```
$command = 'scp -i private.ppk -P 22 foo.txt someuser@domain.com:/home/someuser/foo.txt';
exec($command); 
```

这行不通。PHP 文件正在与`private.ppk`. 当我`var_dump`的结果`exec`，我得到一个`NULL`。

我想知道这是否是一个权限问题。我知道我在命令行上运行谁，但我不确定谁在运行脚本。这可能是问题吗？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T22:31:20.667

我认为这是一个许可问题。SSH 客户端通常会拒绝连接，除非权限已设置为第三方（例如用户“nobody”）无法读取密钥。

也就是说，您使用 *.ppk 有点奇怪 - 这是 PuTTY 密钥使用的扩展 - OpenSSH 不支持。

也就是说，我的建议是使用[phpseclib 的 SCP 客户端](http://phpseclib.sourceforge.net/)。此时您可以将密钥作为字符串保存在 PHP 文件本身中，而不必将它们保存在文件系统中。更多信息：

[https://github.com/phpseclib/phpseclib/blob/master/phpseclib/Net/SCP.php](https://github.com/phpseclib/phpseclib/blob/master/phpseclib/Net/SCP.php)

# weblogic-10.x - 如何计算weblogic中卡住的线程？

> ID：16159945
> 
> 赞同：1
> 
> 时间：2013-04-23T02:34:49.827
> 
> 标签：weblogic-10.x

有一个日志显示了Weblogic标记的卡住线程：

```
<Apr 23, 2013 7:48:25 AM CST> <Error> <WebLogicServer> <BEA-000337> <[STUCK] ExecuteThread: '276' for queue: 'weblogic.kernel.Default (self-tuning)' has been busy for "668" seconds working on the request "weblogic.servlet.internal.ServletRequestImpl@23ba221b[
GET /XXX/saveInfo.do?fx=duration&info=25159,0,0,0,0,0,0,25153 HTTP/1.1 
```

在我的例子中，我们观察到如果卡住的线程太多，我们的服务器会变得更慢的响应时间并且消耗越来越多的内存。

我想让卡住线程的计数成为我的自动报告机器人的健康指数。除了日志文件如何计算它？是否有任何命令或 api 帮助我计算卡住的线程？

* * *

[从@viccari](https://stackoverflow.com/a/16170150/90909)总结了解决方案（wlst 示例代码）：

```
from tempfile import mktemp

connect('your_account', 'your_account_pass', 'localhost:7001')

# dump thread details to a temp file
file = mktemp()
threadDump(writeToFile="true", serverName="your_server_name", fileName=file)

# count the string token "[STUCK]" by line
count = 0
f = open(file, "r")
for line in f.readlines():
  if line.find("STUCK") > 0:
    count = count + 1

print "NUM_OF_STUCK_THREADS: ", count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:06:17.857

您可以使用 WLST（WebLogic 脚本工具）脚本访问线程池运行状况详细信息（如果您熟悉 Python，这应该不是问题），或者使用 Java 访问 JMX 计数器。

[这篇文章](http://middlewaremagic.com/weblogic/?p=5582)包含一个示例脚本，当存在卡住的线程时会发送一封警报电子邮件，在评论部分，您将找到一些访问 JMX 计数器的 Java 代码示例。网络上有更多关于这两种方法的示例。

# web-services - Sitecore：以编程方式从字段值解析 URL

> ID：16159951
> 
> 赞同：4
> 
> 时间：2013-04-23T02:35:33.417
> 
> 标签：web-services, sitecore, sitecore6

我有一个可以包含内部链接、媒体链接、外部链接等的字段，通常我们通过提供 sc:Link 项目和相应的字段来对其进行排序，并相应地解析 url。

如果我想以编程方式解析 url（使用 Web 服务进行序列化和发送），我需要做什么？

我真的很感激提示或指向正确方向的提示。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T05:27:56.920

Sitecore API 中没有任何内容可以直接满足您的需求，但您可以创建一个辅助方法来实现您的需求。我假设您使用的是`LinkField`.

在 Brian Pedersen 的博客上有一篇很棒的文章，关于[使用 LinkManager 和 MediaManager 的 Sitecore 链接](http://briancaos.wordpress.com/2012/08/24/sitecore-links-with-linkmanager-and-mediamanager/)。下面的代码片段取自他的文章：

```
Sitecore.Data.Fields.LinkField lf = Sitecore.Context.Item.Fields["Link"];
switch (lf.LinkType.ToLower())
{
  case "internal":
    // Use LinkMananger for internal links, if link is not empty
    return lf.TargetItem != null ? Sitecore.Links.LinkManager.GetItemUrl(lf.TargetItem) : string.Empty;
  case "media":
    // Use MediaManager for media links, if link is not empty
    return lf.TargetItem != null ? Sitecore.Resources.Media.MediaManager.GetMediaUrl(lf.TargetItem) : string.Empty;
  case "external":
    // Just return external links
    return lf.Url;
  case "anchor":
    // Prefix anchor link with # if link if not empty
    return !string.IsNullOrEmpty(lf.Anchor) ? "#" + lf.Anchor : string.Empty;
  case "mailto":
    // Just return mailto link
    return lf.Url;
  case "javascript":
    // Just return javascript
    return lf.Url;
  default:
    // Just please the compiler, this
    // condition will never be met
    return lf.Url;
} 
```

如果您需要将内部 URL 解析为完全限定域名，则`UrlOptions.SiteResolving=True`传入`LinkManager`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-27T17:58:00.760

```
string url = linkField.GetFriendlyUrl(); 
```

`linkField`的实例在哪里`LinkField`。

# c - 带电围栏库的gcc不生效

> ID：16159953
> 
> 赞同：2
> 
> 时间：2013-04-23T02:35:51.830
> 
> 标签：c, linux, gcc, ubuntu, debian

我写了一个在动态分配时出现内存问题的片段；用`-lefence`option编译的时候，好像没有效果。这是代码段：

```
int main(int argc, char *argv[])
{
  int *a = (int *)malloc(2*sizeof(int));
  for(int i = 0; i <=2; ++i){
    a[i] = i;
    printf ("%d\n",a[i]);
  }

  free(a);
  return 0;
} 
```

和编译选项：

```
gcc -g3 -Wall -std=c99 outOfBound.c -lefence 
```

预期的结果是，当被分配给 2 并被调用`a.out`后，执行时会有一个核心转储。`i``a[i]=i`

那么为什么`-lefence`没有效果呢？

我还将循环中的上限增加到 9，但仍然没有`electric-fence`调用核心转储。（实际上默认情况下确实有一个核心转储，但这可能是由于`MALLOC_CHECK_`env virable，因为当 I 时`export MALLOC_CHECK_=0`，将不再有核心转储）。

**更新**：整个结果`nm -A a.out`如下：

```
a.out:08049f28 d _DYNAMIC
a.out:08049ff4 d _GLOBAL_OFFSET_TABLE_
a.out:0804864c R _IO_stdin_used
a.out:         w _Jv_RegisterClasses
a.out:08049f18 d __CTOR_END__
a.out:08049f14 d __CTOR_LIST__
a.out:08049f20 d __DTOR_END__
a.out:08049f1c d __DTOR_LIST__
a.out:08048718 r __FRAME_END__
a.out:08049f24 d __JCR_END__
a.out:08049f24 d __JCR_LIST__
a.out:0804a01c A __bss_start
a.out:0804a014 D __data_start
a.out:08048600 t __do_global_ctors_aux
a.out:08048480 t __do_global_dtors_aux
a.out:0804a018 d __dso_handle
a.out:         w __gmon_start__
a.out:080485f2 t __i686.get_pc_thunk.bx
a.out:00000000 a __init_array_end
a.out:00000000 a __init_array_start
a.out:080485f0 T __libc_csu_fini
a.out:08048580 T __libc_csu_init
a.out:         U __libc_start_main
a.out:0804a01c A _edata
a.out:0804a024 A _end
a.out:0804862c T _fini
a.out:08048648 R _fp_hw
a.out:080483b4 T _init
a.out:08048450 T _start
a.out:0804a01c b completed.6159
a.out:0804a014 W data_start
a.out:0804a020 b dtor_idx.6161
a.out:080484e0 t frame_dummy
a.out:         U free
a.out:08048504 T main
a.out:         U malloc
a.out:         U printf 
```

（我`electric-fence`在 Ubuntu 12.04 32bit 上使用 debian 包，`gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3`）

# 更新（20140801）：

对于debian（测试分支，即jessie）打包`electric-fence`的版本，它可以工作。`2.2.4`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:54:25.147

您可能会遇到这种情况。

> ...它必须将分配的大小增加到字大小的倍数。此外，函数 memalign() 和 valloc() 必须遵守关于内存分配对齐的明确规范，这也只能通过增加分配的大小来实现。因此，在某些情况下，内存分配的末尾包含一些填充空间，并且不会检测到对该填充空间的访问，即使它们是溢出的。

尝试更多地超出界限，看看溢出检测在什么时候开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T09:29:03.760

一旦你编译并执行上面的程序而不将它与电子围栏库链接，它可以运行而没有任何分段错误。

所以最好将它与电子围栏库链接，然后通过在 gdb 中加载它来运行它，给出以下命令

```
$ gdb a.out
....
(gdb)run
Starting program: /home/arif/sysprog-2017/processmgmt/nonlocalgoto/a.out 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
  Electric Fence 2.2 Copyright (C) 1987-1999 Bruce Perens <bruce@perens.com>
0
1
Program received signal SIGSEGV, Segmentation fault.
0x000055555555484d in main (argc=1, argv=0x7fffffffe228) at temp.c:8
8       a[i] = i; 
```

因此，从 gdb 的上述输出中，您可以找出导致问题的源代码行号，如果您此时打印 i 的值，它将是 2 :)

# jsp - tomcat 没有检测到我的课程

> ID：16159959
> 
> 赞同：0
> 
> 时间：2013-04-23T02:36:40.553
> 
> 标签：jsp, tomcat, tomcat7

我做了一个如下的课程

```
:~/apache-tomcat-7.0.39/webapps/ROOT/WEB-INF/classes/myclasses$ ls
myLog.class  myLog.java
:~/apache-tomcat-7.0.39/webapps/ROOT/WEB-INF/classes/myclasses$ cat myLog.java
import java.io.*;

public class myLog
{
    private static PrintWriter log = null;
    public myLog(String logpath) throws IOException
    {
        log = new PrintWriter(new FileWriter(logpath, true));
        log.println("Logging started\n");
    }
    p 
```

我正在尝试从我的 jsp 访问相同的内容，如下所示，

```
<%@ page language = "java" %>
<%@ page import = "myclasses.*" %>
<html>
  <head>
    <title></title>
  </head>
  <body>
  <%
    myLog log = (myLog)application.getAttribute("logfile");
    try
    {
      if (log == null)
      {
        log = new myLog("new.log"); 
```

我正面临一个类现在发现异常。我已经重新启动了tomcat。java.lang.NoClassDefFoundError: myLog

谁能告诉我为什么，拜托..

# python - 替换2个字符串python之间的所有文本

> ID：16159969
> 
> 赞同：19
> 
> 时间：2013-04-23T02:37:55.287
> 
> 标签：python

可以说我有：

```
a = r''' Example
This is a very annoying string
that takes up multiple lines
and h@s a// kind{s} of stupid symbols in it
ok String''' 
```

我需要一种方法来在“This”和“ok”之间进行替换（或只是删除）和文本，这样当我调用它时，a now 等于：

```
a = "Example String" 
```

我找不到任何似乎有效的通配符。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T02:47:12.797

你需要[`Regular Expression`](http://docs.python.org/3/library/re.html)：

```
>>> import re
>>> re.sub('\nThis.*?ok','',a, flags=re.DOTALL)
' Example String' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-18T02:02:08.410

另一种方法是使用字符串拆分：

```
def replaceTextBetween(originalText, delimeterA, delimterB, replacementText):
    leadingText = originalText.split(delimeterA)[0]
    trailingText = originalText.split(delimterB)[1]

    return leadingText + delimeterA + replacementText + delimterB + trailingText 
```

限制：

*   不检查分隔符是否存在
*   假设没有重复的分隔符
*   假设分隔符的顺序正确

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T02:51:20.943

DOTALL 标志是关键。通常，“。” 字符不匹配换行符，因此您不匹配字符串中的跨行。如果你设置了 DOTALL 标志，re 将匹配 '.*' 跨越尽可能多的行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T02:46:52.450

```
a=re.sub('This.*ok','',a,flags=re.DOTALL) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-25T17:55:31.753

用途：它用所需的**字符**或**符号**或**字符串**`re.sub`替换两个***字符**或**符号**或**字符串***之间的文本。

 ******```
format: re.sub('A?(.*?)B', P, Q, flags=re.DOTALL) 
```

```
在哪里
A : 字符或符号或字符串
B : 字符或符号或字符串
P : 替换 A 和 B 之间文本的字符或符号或字符串
问：输入字符串
re.DOTALL ：匹配所有行

```

```
import re
re.sub('\nThis?(.*?)ok', '', a,  flags=re.DOTALL)

output : ' Example String' 
```

让我们看一个以 html 代码作为输入的示例

```
input_string = '''<body> <h1>Heading</h1> <p>Paragraph</p><b>bold text</b></body>''' 
```

**目标**：删除`<p>`标签

```
re.sub('<p>?(.*?)</p>', '', input_string,  flags=re.DOTALL)

output : '<body> <h1>Heading</h1> <b>bold text</b></body>' 
```

**目标**：用单词替换`<p>`标签：`test`

```
re.sub('<p>?(.*?)</p>', 'test', input_string,  flags=re.DOTALL)

otput : '<body> <h1>Heading</h1> test<b>bold text</b></body>' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T02:50:20.657

如果你想要第一句话和最后一句话：

```
re.sub(r'^\s*(\w+).*?(\w+)$', r'\1 \2', a, flags=re.DOTALL) 
```******

# matlab - Matlab Mex 文件编译

> ID：16159970
> 
> 赞同：3
> 
> 时间：2013-04-23T02:38:13.013
> 
> 标签：matlab, mex

我正在尝试编译一个 mex 文件以在 matlab 中使用套接字连接。问题是它总是说我没有安装 sdk 或编译器。但我已经安装了 Visual Studio 2010 Express、Visual Studio 2012 Express、Visual Studio 2012 Professional 并没有改变错误。我也安装了sdk。有什么我可以尝试的吗？matlab 版本是 R2012b，我使用的是 windows 7、64 位。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T14:01:49.053

您可以尝试[gnumex](http://sourceforge.net/projects/gnumex/)，它可以让您访问 Windows 上的 mingw 编译器。它适用于[mingw-w64](http://mingw-w64.sourceforge.net/)，它是 mingw 的 64 位[版本](http://www.mingw.org/)。您必须安装 mingw 编译器套件，然后在 Matlab 中运行 gnumex 以告诉它 mingw 在哪里并进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:46:30.517

我相信只有最新的 R2013a 支持 Visual Studio 2012。为您的 MATLAB 版本使用 VS2010。

此外，VS 的 Express 版本不包含 64 位编译器。您需要获得专业版或下载免费的 Windows SDK。

有关更多信息，请参阅[支持的编译器](http://www.mathworks.com/support/compilers/current_release/)列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T13:22:16.670

您正在询问如何直接在 Matlab 的命令行上编译 mex 文件。

另一种方法是从 Visual Studio 编译 mex 文件。你可能对我的回答感兴趣

[在 MATLAB 中找不到使用 mex 的 C++ 编译器](https://stackoverflow.com/questions/9281871/no-c-compiler-found-in-matlab-using-mex/17920144#17920144)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T19:04:51.230

可能这个链接对你有用 [http://support.brainvoyager.com/available-tools/52-matlab-tools-bvxqtools/339-how-to-get-a-64-bit-compiler-under-windows -to-use-with-matlab.html](http://support.brainvoyager.com/available-tools/52-matlab-tools-bvxqtools/339-how-to-get-a-64-bit-compiler-under-windows-to-use-with-matlab.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T02:42:41.563

您是否跑过`mex -setup`告诉 MATLAB您要使用 *哪个编译器？*

有关更多信息，请参阅[有关构建 MEX 文件的此页面](http://www.mathworks.com/help/matlab/matlab_external/building-mex-files.html "这个关于构建 MEX 文件的页面")

# jpa - Play!Framework 2 Java 模型字符串字段长度注解

> ID：16159978
> 
> 赞同：2
> 
> 时间：2013-04-23T02:38:52.327
> 
> 标签：jpa, playframework, annotations, playframework-2.1, ebean

为了获得最佳性能和验证便利，String 字段需要哪些注释？

数据库：MySQL

存储地区名称的字段

```
@Column(length=50)  // javax.persistence.Column 
```

这将被转换为 varchar(50) 吗？或者我特别需要这个：

```
@Column(columnDefinition='varchar(50)') 
```

还有两个注释

```
@MaxLength(50) // play.data.validation.Constraints.MaxLength
@Length(max=50) // com.avaje.ebean.validation.Length, is this one useful or not required anyway?
public String districtName; 
```

我想我需要@Column(length=50) 进行定义和@MaxLength(50) 进行验证？或者这两个中的一个会自动暗示另一个？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:19:49.737

据我所知，当我们`String`用这些注释标记变量时：

1.  `@javax.persistence.Column(length=50)`
2.  `@javax.persistence.Column(columnDefinition='varchar(50)')`. 注意：我使用的是 postgreSQL，这将创建具有不同数据类型的列定义
3.  `@com.avaje.ebean.validation.Length(50)`

上面的三个注释具有**相同的目的**。这些将在数据库上创建具有`character varying`数据类型和`50`字符长度的列定义。

如果没有`@Constraint.MaxLength(50)`，当您输入长度大于 50 的输入值时，您将得到如下异常：

> **执行异常** `[ValidationException: validation failed for: models.TheModel]`

我认为，应该有一种方法来处理上述异常，但老实说，直到现在我才知道该怎么做。

* * *

> ### 建议
> 
> 我对您的建议是使用 anotation 从上面的 3 个注释中选择一个（这是您的偏好）`@Constraint.MaxLength(50)`。对我来说，这是最简单最简单的方法，你可以使用 play framework scala-template-helper 轻松制作表单。

# android - Android - 比较时间字符串与当前时间减去差异并转换为毫秒

> ID：16159979
> 
> 赞同：0
> 
> 时间：2013-04-23T02:38:58.417
> 
> 标签：android, time

我对 Java/Android 开发有点陌生，我需要比较两次。其中一个时间值存储在一个字符串中，另一个是当前系统时间（长） - 我怎样才能找出两个时间之间的差异（以毫秒为单位）并将其存储为一个数字？

编辑：

尝试＃1（响应懒惰的忍者）

```
public class Rules extends Activity {

private String password;

private PendingIntent mPendingIntent;
String TIMELIMIT = "10";

TextView textSsid, textSpeed, textRssi, Time;
private static final int NOTIFY_ME_ID = 1337;
private int count = 0;
private NotificationManager notifyMgr = null;
public Handler mHandler = new Handler();
public long mStartRX = 0;
public long mStartTX = 0;
public long txBytes;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rules);

    String NDEF_PREF = "prefs";
    SharedPreferences prefs = getSharedPreferences(NDEF_PREF,
            Context.MODE_PRIVATE);
    String name = prefs.getString("name", "");
    String code = prefs.getString("corename", "");
    String time = prefs.getString("time", "");
    String ssid = prefs.getString("restricted", "");
    Time = (TextView) findViewById(R.id.Time);
    Time.setText(time);

     String dtStart = "09:27:37";
    SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
    try {
        Date date = format.parse(time);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    Long convertedLong = date.getTimeInMillis();

    long currentTimeLong = System.currentTimeMillis(); 
    long difference = currentTimeLong - convertedLong;
     String strDiff = String.valueOf(difference); 
```

问题：

日期无法解析 Rules.java Java 问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:48:06.290

好的，将您的字符串转换为日期时间：

```
String dtStart = "09:27:37";  
SimpleDateFormat  format = new SimpleDateFormat("HH:mm:ss");  
try {  
    Date date = format.parse(dtStart);  
 } catch (ParseException e) {  
    // TODO Auto-generated catch block  
    e.printStackTrace();  
} 
```

然后将其转换为毫秒

```
long convertedLong = date.getTimeInMillis(); 
```

然后

```
long currentTimeLong = System.currentTimeMillis(); // will get you current time in milli
long difference = currentTimeLong - convertedLong;
 String strDiff = String.valueOf(difference); 
```

从那里数学 currentTimeLong - convertLong。

# java - Jython 图形库

> ID：16159985
> 
> 赞同：1
> 
> 时间：2013-04-23T02:39:48.087
> 
> 标签：java, python, graph, jython, networkx

我需要在一个项目中将 python 与 Java 结合使用，其中图形（具有节点和边的那种）起着重要作用。我想在一个简单的 GUI 中可视化这些图表，并每隔一秒左右更新它的节点标签/边权重/任何东西。我还想从 graphml 格式的文件中加载图表。

许多人建议使用 Networkx，但似乎不适用于 Jython，对吗？如果没有，我会得到一个

`SyntaxError: 'import *' not allowed with 'from .'`

Networkx egg 内部的错误。即使它有效，我也需要 Numpy 和 matplotlib 才能工作，我不确定它们是否能与 Jython 一起工作。

所以首先，你能帮我解决这些 NetworkX 问题吗？其次，您可以为我的目的推荐 Networkx 的替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T01:09:52.563

Jython is python language spec inside of the JVM much like JRuby.

NetworkX source code is C or fortran (don't remember which). Numpy/Scipy are C based (great packages for scientific computing). Matplotlib is c (for display of the graphs).

NetworkX will help create graphs, matplotlib will help display them but both may not work in Jython.

If you need c based resources try jpype; its older (python 2.7) but will allow some functionality between c and java using JNI (java native interface).

What I have done is create graphs in python then switch over to Gephi to visualize and display the graphs. Gephi is java based and a up and coming free tool.

# php - CakePHP GET 请求仅在部分时间失败

> ID：16159987
> 
> 赞同：1
> 
> 时间：2013-04-23T02:40:02.967
> 
> 标签：php, javascript, cakephp, knockout.js

我遇到了一个奇怪的情况，我不太确定从哪里开始寻找。我在前端有一个 knockout.js 表单，在后端有一个 CakePHP。

截至目前，我将一些 JSON 数据从一个 knockout.js 表单发送到 CakePHP。这个 PHP 进行了一些处理，然后将结果以 JSON 格式回显到剔除的 javascript 文件中。

好吧，问题是当我通过 CakePHP 设置这个 PHP 时，它似乎只工作了 1/4 的时间。当我在我的 webroot 中有这个 PHP 文件（只是一个标准文件，与 Cake 无关，因为敲除毕竟与后端无关）时，它 100% 的时间都可以工作。

所以这是两个数据流

```
Fails frequently: knockout.html -> knockout.js -> CakePHP Controller -> echo in CakePHP view-> knockout.js -> knockout.html

Works 100%: knockout.html -> knockout.js -> PHP in webroot, echo from the same page -> knockout.js -> knockout.html 
```

我只会在我的 webroot 中使用 PHP 文件，但我必须查询数据库以获取一些信息，并且我希望将所有查询保留给 Cake 而不是外部资源。

CakePHP 方法是否可能花费太长时间而失败，因为它没有足够快地返回结果？

**编辑-我改变了我的控制器，所以没有计算，它只是将一些 JSON 编码的文本传递给视图。这不会产生任何错误，并且 100% 的时间都有效。那么，是否可以肯定地说 CakePHP 花费了太长时间导致错误？我知道一个框架比普通的 PHP 需要更长的时间，但是为什么这会导致它失败呢？我没有做任何激烈的计算。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:44:45.357

我让它以一种非常迂回的方式工作。它现在 100% 的时间都在工作，但我对我必须如何做到这一点并不满意。

正如我所解释的，我在我的 ItemsController 中使用 PHPQuery。我采用了所有这些逻辑，并在蛋糕结构之外创建了一个单独的 PHP 文件，并且就在我的 webroot 中。因此，它不会为相应的操作调用我的 ItemsController 函数，而是调用 webroot 中的文件。我从这个文件访问数据库，查找我需要的内容，然后执行 PHPQuery 任务。

很奇怪。在 CakePHP 之外 100% 工作。在 CakePHP 函数中使用时失败超过 50% 的时间。我不明白，但至少它正在工作。

# python - 服务器应用程序因 GUI 冻结

> ID：16159990
> 
> 赞同：0
> 
> 时间：2013-04-23T02:40:42.703
> 
> 标签：python, user-interface, tkinter

这是我的服务器脚本，在没有 GUI 的情况下运行它时，只有启动方法才能正常工作，但是当运行整个脚本并按下启动按钮时，它只是冻结并且没有响应，并且文本窗口上没有任何内容

```
from Tkinter import *

import socket
import sys

class Application(Frame):

def __init__(self, master):

    Frame.__init__(self, master)
    self.grid()
    self.create_widgets()

def create_widgets(self):

    self.text = Text(self, width = 35, height = 5, wrap = WORD)
    self.text.grid(row = 0, column = 0, columnspan = 2, sticky = W)

    self.submit_button = Button(self, text='start', command = self.start)
    self.submit_button.grid(row = 2, column = 0, sticky = W)

def start(self):

    self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.text.insert(0.0, 'Server started!\n' )
    self.s.bind(('',1080))
    self.s.listen(10)

    while True:
        sc, address = self.s.accept()
        i=1 
        f = open('file_'+ str(i)+".txt",'wb') #open in binary
        i=i+1
        while (True):       
            l = sc.recv(1024)
            while (l):
                print l 
                f.write(l) 
                f.flush()

        f.close()

        sc.close()

root = Tk()
root.title("Server")
root.geometry("500x250")
app = Application(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:50:35.327

GUI 工作的唯一方法是它的事件循环是否能够为事件提供服务，例如响应重绘自身请求、响应按钮等的事件。在 Tkinter 中，此事件循环是`mainloop`.

当您单击开始按钮时，您会在此事件循环中运行不少于两个无限循环，只要这些内部无限循环正在运行，这实际上就会冻结事件循环。

# asp.net - ASP.Net 控件多次呈现相同的服务器引用

> ID：16159991
> 
> 赞同：0
> 
> 时间：2013-04-23T02:40:46.677
> 
> 标签：asp.net, reference, webforms, servercontrols

我`Table`在内部子属性中的自定义服务器控件的顶部和底部添加了一个寻呼机`Footer`，即`Header`

```
<twc:Table runat="server" DataSource="<%# Incidents %>" Pagination="<%# ui_twcPagerTableTop %>">
    <Header>
        <twc:Paginator runat="server" ID="ui_twcPagerTableTop" />
    </Header>
    <Columns>
        ...
    </Columns>
    <Footer>
        <twc:Paginator runat="server" ID="ui_twcPaginatorBottom" />
    </Footer>
</twc:Table> 
```

真的，我只想添加一个 Paginator 并让它在页面上的多个位置呈现，在服务器端使用相同的控件引用（它们实际上是同一件事）。

`ui_twcPaginatorTableTop`例如在页眉和页脚中渲染。

有没有办法在标记中使控件在 2 个不同的位置渲染两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:29:34.023

我最终在 javascript 中执行此操作，复制 DOM 元素并将它们附加到页脚容器中。工作得很好 - 虽然有一个服务器端解决方案会很好。

# iphone - SDWebImage 不显示 placeholderImage

> ID：16159993
> 
> 赞同：0
> 
> 时间：2013-04-23T02:41:13.870
> 
> 标签：iphone, ios, sdwebimage

我有一个图片链接 people.avatarbig: [http://ws.loc.sh/images/515b9f54e4b04a5a481030f9](http://ws.loc.sh/images/515b9f54e4b04a5a481030f9) 当你使用浏览打开它时，你什么也看不到，所以 SDWebImage 应该显示 placeholderImage 但现在它什么都不显示。我的代码：

```
 if(![GlobalVariable isBlankString:people.avatarbig])
        {
            [imageView1 setImageWithURL:[NSURL URLWithString:people.avatarbig]
                           placeholderImage:[UIImage imageNamed:@"default_user.png"]];

        }else{
            imageView1.image=[UIImage imageNamed:@"default_user.png"];
        } 
```

为什么 SDWebImage 不显示 placeholderImage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:03:53.167

我认为这是一个错误，因此您应该修改方法：NS_INLINE UIImage *SDScaledImageForPath(NSString *path, NSObject *imageOrData)

正确的是：

```
if (image &&[[UIScreen mainScreen] respondsToSelector:@selector(scale)]) 
```

# emacs - 如何在议程自定义视图中截断长任务名称？

> ID：16159996
> 
> 赞同：2
> 
> 时间：2013-04-23T02:41:33.277
> 
> 标签：emacs, org-mode

在 emacs org-mode 中，我定义了一些 org-agenda-custom-commands。但有些任务名称比*Org Agenda*缓冲区中的屏幕长。

如何在议程自定义视图中截断长任务名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:27:51.630

议程的显示将反映 Emacs`truncate-lines`变量的设置。该功能`toggle-truncate-lines`是交互式打开或关闭此功能的最简单方法。org-mode 还提供了一个`org-startup-truncated`变量，它将控制`truncate-lines`整个 org-mode 中的默认值：

```
Non-nil means entering Org-mode will set `truncate-lines'.
This is useful since some lines containing links can be very long and
uninteresting.  Also tables look terrible when wrapped. 
```

如果您真的想全局关闭截断（包括在 Org 模式缓冲区中），但您希望议程中的行换行，那么您可以添加一些内容`org-agenda-mode-hook`来禁用该选项：

```
(defun my/org-agenda-mode-hook ()
  (interactive)
  (setq truncate-lines nil))

(add-hook 'org-agenda-mode-hook
          'my/org-agenda-mode-hook) 
```

# java - 绘制一个扩展 JPanel 的类

> ID：16159997
> 
> 赞同：0
> 
> 时间：2013-04-23T02:41:41.993
> 
> 标签：java, swing, jpanel, awt, paint

我有一个扩展 JPanel 的类，它包含一个用于绘制自身的 draw(Graphics page) 方法。如果我正在构建一个测试驱动程序并想在框架上显示它我应该使用什么。我在paint( )、paintComponent()、getGraphics() 等。

班上

```
class Car extends JPanel {

     void draw (Graphics page) {
         ....draw polygons...
     } 
```

****编辑****

目标是让汽车在屏幕上移动，我将绘制方法更改为“paintComponent()”，它就出现了！但它需要移动它并用计时器重新绘制它。所以我想一遍又一遍地画它是它是draw（）而不是paintComponent（）的原因。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:58:19.117

*   `paint()`

    AWT 容器（使用 Swing）和 Swing 顶级容器，例如`JFrame`& `JApplet`（不要在顶级容器中绘制 - 添加`JPanel`或`JComponent`）。所以基本上，不要在这个时代改变方法。

*   `paintComponent()`

    绝大多数 Swing 组件。

*   `getGraphics()`

    [`BufferedImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)（可能显示在 a 中`JLabel`）。这将提供一个`Graphics`实例，但我更喜欢使用[`createGraphics()`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#createGraphics%28%29)一个`Graphics2D`实例（渲染提示很棒）。

# nginx - Omniauth Nginx Unicorn 回调到错误的主机 URL

> ID：16159998
> 
> 赞同：1
> 
> 时间：2013-04-23T02:41:47.797
> 
> 标签：nginx, ruby-on-rails-3.2, omniauth, unicorn

我已经将 Rails 应用程序部署到 VPS 服务器，并且我正在使用 Nginx/Unicorn 组合，一切正常，除了由于某种我无法理解的原因，Omniauth 回调重定向错误，

IE。

```
http://unicorn/users/auth/linkedin/callback?oauth_token=95218ed3-b426-45ab-b022-693d2a2447cb&oauth_verifier=25955 
```

它应该是：

```
http://my-real-domain.com/users/auth/linkedin/callback?oauth_token=95218ed3-b426-45ab-b022-693d2a2447cb&oauth_verifier=25955 
```

怎么了？为什么使用nginx中定义的上游名称的回调？

```
upstream unicorn {
  server unix:/tmp/unicorn.todo.sock fail_timeout=0;
}

server {
  listen 80;
  listen [::]:80 ipv6only=on default_server;

  root /home/deploy/work/project/current/public;
  index index.html index.htm;

  server_name my-real-domain.com;

  try_files $uri/index.html $uri @unicorn;

  location @unicorn {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header Client-IP $remote_addr;
    proxy_set_header X-Forwarded-For $remote_addr;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;

  location ~ ^/assets/ {
    expires 1y;
    add_header Cache-Control public;

    add_header ETag "";
    break;
  }
} 
```

请你帮助我好吗？我需要知道如何克服这种错误的重定向。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T15:04:50.647

Nginx 默认不传递主机头，你必须告诉它：

```
 location @unicorn {
    proxy_set_header Host $http_host; 
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header Client-IP $remote_addr;
    proxy_set_header X-Forwarded-For $remote_addr;
    proxy_pass http://unicorn;
  } 
```

否则，请求发送到的主机会丢失。

# function - 结合 jquery 功能准备和生活

> ID：16159999
> 
> 赞同：0
> 
> 时间：2013-04-23T02:42:08.137
> 
> 标签：function, live, ready

```
$(document).ready(function(){
        $("a[rel='box']").colorbox();
                }); 
```

和

```
jQuery('a[href*=#]').live('click',function() { ...etc... 
```

总 NOOB 问题：我在 JQuery 中有这两个函数......

我该如何组合它们？

`a[href*=#]`是幻灯片演示，`a[rel='box']`用于打开颜色框...一个或另一个作品，但不能同时使用。

这就是我尝试“剪切和粘贴”代码的结果......

Jquery 已加载

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js">    </script>
<script type='text/javascript' src='scripts/jquery.colorbox-min.js'></script> 
```

在 HEAD 部分

我什至尝试添加：

```
 jQuery(function(){
 if(jQuery.isFunction(jQuery.fn.colorbox)) {
    jQuery("a").live('click',function(){
         jQuery(this).colorbox();
     });
 }
 }); 
```

但这也不起作用......

这是我得到幻灯片的地方... www.pixedelic.com/plugins/camera/ colorbox 已加载，但不适用于单个图片...

任何帮助将不胜感激和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:34:34.463

问题是在 jQuery 中定义 $ 不是与 READY 和 LIVE 的冲突...

我认为您的 jquery.min.js 副本已损坏，它没有定义 $。

您的 jQuery 脚本以 jQuery.noConflict(); 结尾，这会阻止定义 $。

所以你必须写 jQuery(document).ready() 而不是 $(document).ready()

在 jquery.min.js 中已经有了 jQuery.noConflict() 之后，就不能编写 $.noConflict()。

解决方案：

```
 jQuery(document).ready(function($){            
        $("a[rel='box']").colorbox();
                }); 
```

不是：

```
// cannot below use if have jQuery.noConflict(); !  use above notice large Q //
    $(document).ready(function(){
        $("a[rel='box']").colorbox();
        }); 
```

谢谢！巴尔玛！