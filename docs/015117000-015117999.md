# StackOverflow 问答 15117000-15117999

# iphone - UIView 中图像之间的准确间距，如 UITabViewController

> ID：15117000
> 
> 赞同：2
> 
> 时间：2013-02-27T16:19:37.357
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uiview

我有 UIView，里面有 3 个 UIImages。（我用故事板来画它们）

我并不总是显示 3 个 UIImages。我像这样隐藏和显示它们：

```
facebookIcon.hidden = YES/NO; 
```

我想显示它们之间的准确间距。

例如，如果有一个图像 - 它将位于中心。

如果有 2 个图像 - 中心的每一侧都会有一个

如果有 3 张图像 - 将有一张在右侧，一张在中间，一张在左侧。

类似于`UITabViewController`图标 - 使用准确的空格自动传播。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:18:07.317

不使用自动布局或`autoResizeMask`. 没有以最佳方式编码，请进行适当的更改。这假设`self.view`是图像视图的超级视图，并且所有图像视图的大小相同。

```
 CGFloat padding = 10; //your wish
    NSMutableArray *notHidden = [NSMutableArray array];
    for (UIImageView *img in self.view.subviews) {
        if (!img.hidden) {
            [notHidden addObject:img];
        }
    }
    int arrayCount = notHidden.count;
    switch (arrayCount%2) {
        case 0:{
            for (int index =-arrayCount/2;index<arrayCount/2;index++) {
                int tempIndex =index;
                UIImageView *img = (UIImageView *)[notHidden objectAtIndex:index+arrayCount/2];
                CGRect tempFrame = img.frame;

                if (index>=0) {
                    tempIndex=index+1;
                }
                CGFloat xDiff = img.frame.size.width*index+padding*tempIndex;

                tempFrame.origin.x = self.view.center.x+xDiff;
                [[notHidden objectAtIndex:index+arrayCount/2] setFrame:tempFrame];
            }

            break;  
        }
        case 1:{
            for (int index =-arrayCount/2;index<=arrayCount/2;index++) {
                int tempIndex =-1;
                UIImageView *img = (UIImageView *)[notHidden objectAtIndex:index+arrayCount/2];
                CGRect tempFrame = img.frame;
                CGFloat xDiff = img.frame.size.width*index+padding*index+tempIndex*(img.frame.size.width/2);

                tempFrame.origin.x = self.view.center.x+xDiff;
                [[notHidden objectAtIndex:index+arrayCount/2] setFrame:tempFrame];
            }
        }
        default:
            break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:29:42.877

解决方案如下：

```
- (void)showIconsInView:(NSArray *)channelIcons iconsView:(UIView *)iconsView
{
    int iconsCounter = channelIcons.count;
    int iconWidth = 13;
    int iconHeight = 12;
    int space = (iconsView.frame.size.width - (iconWidth*iconsCounter))/(iconsCounter+1);
    //add the icon image to the view
    NSString *icon = nil;
    NSEnumerator *enumerator = [channelIcons objectEnumerator];
    while (icon = (NSString*)[enumerator nextObject]) {
        UIImage *image = [UIImage imageNamed:icon];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.contentMode = UIViewContentModeScaleAspectFit;
        imageView.frame = CGRectMake(space, 0, iconWidth,iconHeight);
        space = space*2 +iconWidth;
        [iconsView addSubview:imageView];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:30:14.367

很快：在 iOS 6 中使用[自动布局](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

或在 iOS 6 之前自动调整大小[蒙版](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/autoresizingMask)

```
// auto resizing masks
self.button1.autoresizingMask =  UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
self.button2.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
self.button3.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

请注意，您可以在 Interface Builder 中执行所有自动布局/调整大小的蒙版。

# javascript - Nodejs node-mysql模块未连接到数据库

> ID：15117005
> 
> 赞同：1
> 
> 时间：2013-02-27T16:19:44.403
> 
> 标签：javascript, mysql, node.js

我正在运行这个脚本：

```
var mysql      = require('mysql');

var connection = mysql.createConnection("mysql://localhost/");

connection.connect();
console.log(connection) 
```

但是遇到错误...

```
{ config: 
   { host: 'localhost',
     port: 3306,
     socketPath: undefined,
     user: undefined,
     password: undefined,
     database: '',
     insecureAuth: false,
     supportBigNumbers: false,
     debug: undefined,
     timezone: 'local',
     flags: '',
     queryFormat: undefined,
     pool: undefined,
     typeCast: true,
     maxPacketSize: 0,
     charsetNumber: 33,
     clientFlags: 193487 },
  _socket: 
   { _handle: 
      { writeQueueSize: 0,
        owner: [Circular],
        onread: [Function: onread] },
     _pendingWriteReqs: 0,
     _flags: 0,
     _connectQueueSize: 0,
     destroyed: false,
     errorEmitted: false,
     bytesRead: 0,
     _bytesDispatched: 0,
     allowHalfOpen: undefined,
     _connecting: true,
     writable: true,
     _events: 
      { data: [Function: ondata],
        end: [Object],
        close: [Object],
        error: [Object],
        drain: [Function: ondrain] } },
  _protocol: 
   { readable: true,
     writable: true,
     _config: 
      { host: 'localhost',
        port: 3306,
        socketPath: undefined,
        user: undefined,
        password: undefined,
        database: '',
        insecureAuth: false,
        supportBigNumbers: false,
        debug: undefined,
        timezone: 'local',
        flags: '',
        queryFormat: undefined,
        pool: undefined,
        typeCast: true,
        maxPacketSize: 0,
        charsetNumber: 33,
        clientFlags: 193487 },
     _connection: [Circular],
     _callback: null,
     _fatalError: null,
     _quitSequence: null,
     _handshakeSequence: 
      { _callback: undefined,
        _ended: false,
        _callSite: '    at Handshake.Sequence (/usr/local/lib/node_modules/mysql/lib/protocol/sequences/Sequence.js:15:21)\n    at new Handshake (/usr/local/lib/node_modules/mysql/lib/protocol/sequences/Handshake.js:9:12)\n    at Protocol.handshake (/usr/local/lib/node_modules/mysql/lib/protocol/Protocol.js:41:50)\n    at Connection.connect (/usr/local/lib/node_modules/mysql/lib/Connection.js:63:18)\n    at Object.<anonymous> (/Users/itaccess/Desktop/test.js:5:12)\n    at Module._compile (module.js:449:26)\n    at Object.Module._extensions..js (module.js:467:10)\n    at Module.load (module.js:356:32)\n    at Function.Module._load (module.js:312:12)\n    at Module.runMain (module.js:492:10)',
        _config: [Object],
        _handshakeInitializationPacket: null,
        _events: [Object] },
     _destroyed: false,
     _queue: [ [Object] ],
     _handshakeInitializationPacket: null,
     _parser: 
      { _supportBigNumbers: false,
        _buffer: <Buffer >,
        _longPacketBuffers: [],
        _offset: 0,
        _packetEnd: null,
        _packetHeader: null,
        _onPacket: [Function],
        _nextPacketNumber: 0,
        _encoding: 'utf-8',
        _paused: false },
     _events: 
      { drain: [Object],
        error: [Object],
        end: [Object],
        close: [Object],
        data: [Function: ondata],
        unhandledError: [Function] } },
  _connectCalled: true }
{ [Error: connect ECONNREFUSED]
  code: 'ECONNREFUSED',
  errno: 'ECONNREFUSED',
  syscall: 'connect',
  fatal: true } 
```

而控制台中的这个错误......

```
/Users/itaccess/Desktop/test.js:10
  if (err) throw err;
                 ^
Error: connect ECONNREFUSED
    at errnoException (net.js:769:11)
    at Object.afterConnect [as oncomplete] (net.js:760:19)
    --------------------
    at Handshake.Sequence (/usr/local/lib/node_modules/mysql/lib/protocol/sequences/Sequence.js:15:21)
    at new Handshake (/usr/local/lib/node_modules/mysql/lib/protocol/sequences/Handshake.js:9:12)
    at Protocol.handshake (/usr/local/lib/node_modules/mysql/lib/protocol/Protocol.js:41:50)
    at Connection.connect (/usr/local/lib/node_modules/mysql/lib/Connection.js:63:18)
    at Object.<anonymous> (/Users/itaccess/Desktop/test.js:5:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

我确定不需要用户名/密码，并且我也尝试过各种密码。我尝试使用对象来设置设置和查询字符串。我已经尝试显式添加端口，无论如何这是默认端口。

为什么连接不上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-10T04:59:53.477

您需要设置套接字路径。

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
    host     : 'localhost',
    user     : 'root',
    password : 'password',
    socketPath  : '/var/run/mysqld/mysqld.sock',
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:48:48.210

试试这样的，我想你肯定需要登录名和密码

一些示例代码

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
});

connection.connect();

connection.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
  if (err) throw err;

  console.log('The solution is: ', rows[0].solution);
});

connection.end(); 
```

# java - elasticsearch：嵌套文档映射不起作用

> ID：15117006
> 
> 赞同：5
> 
> 时间：2013-02-27T16:19:48.110
> 
> 标签：java, elasticsearch

我在弹性搜索中有以下 json 结构，它存储了 @ `http://localhost:9200/mongoindex/documents/`：

```
{
"text" : "OTesting1"
"otag" : "otag1"
"pages" : [{
      "text" : "1"
  "name" : "itag1"

    }, {
     "text" : "2"
     "name" : "itag2"
    }
]
} 
```

我创建了如下嵌套映射以启用嵌套搜索和嵌套过滤器：

```
http://localhost:9200/mongoindex/documents/_mapping [PUT]

{
  "documents": {
    "properties": {
      "pages": {
        "type": "nested"
      }
    }
  }
} 
```

现在执行以下java代码：

```
Settings settings = ImmutableSettings.settingsBuilder()
                .put("cluster.name", "xyz").build();
        Client client = new TransportClient(settings).addTransportAddress(new InetSocketTransportAddress("localhost", 9300));
        SearchResponse response = client.prepareSearch("mongoindex")
                .setTypes("documents")
                .setQuery(QueryBuilders.nestedQuery("documents", QueryBuilders.boolQuery().must(QueryBuilders.matchQuery("pages.text", "1"))).scoreMode("avg"))
                .execute()
                .actionGet(); 
```

但它给了我以下例外：

```
> Exception in thread "main"
> org.elasticsearch.action.search.SearchPhaseExecutionException: Failed
> to execute phase [query], total failure; shardFailures
> {[kSKaBxjGTMSS352kukrYVw][mongoindex][0]:
> SearchParseException[[mongoindex][0]: from[-1],size[-1]: Parse Failure
> [Failed to parse source
> [{"query":{"nested":{"query":{"bool":{"must":{"match":{"pages.text":{"query":"1","type":"boolean"}}}}},"path":"documents","score_mode":"avg"}}}]]];
> nested: QueryParsingException[[mongoindex] [nested] nested object
> under path [documents] is not of nested type];
> }{[kSKaBxjGTMSS352kukrYVw][mongoindex][4]:
> SearchParseException[[mongoindex][4]: from[-1],size[-1]: Parse Failure
> [Failed to parse source
> [{"query":{"nested":{"query":{"bool":{"must":{"match":{"pages.text":{"query":"1","type":"boolean"}}}}},"path":"documents","score_mode":"avg"}}}]]];
> nested: QueryParsingException[[mongoindex] [nested] nested object
> under path [documents] is not of nested type]; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:47:07.840

在您的情况下，您必须在[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)中指定嵌套对象的路径`"path" : "pages"`。我不熟悉 Java 语法，但等效的 REST 请求如下所示：

```
{
   "nested" : {
       "path" : "pages",
       "score_mode" : "avg",
       "query" : {
           "bool" : {
               "must" : [
                   {
                       "match" : {"pages.text" : "1"}
                   }
               ]
           }
       }
   } 
```

}

切线相关的是，ElasticSearch 错误消息的最后一行通常包含您需要调试的信息（而其余的则非常无用和/或重复）。所以这是关键部分：

> QueryParsingException[[mongoindex] [nested] 路径 [documents] 下的嵌套对象不是嵌套类型]; }

# java - 使用 Spring 包作为外部库

> ID：15117008
> 
> 赞同：1
> 
> 时间：2013-02-27T16:19:53.443
> 
> 标签：java, spring, ldap

我将所有人员信息存储在 LDAP 中。但我还必须将它们作为 Java 对象处理。

我关注一个对象并查找每个属性，检查该对象的属性是否存在并将其设置为我的 Java 对象。我为几种对象类型执行此操作。根据 OOP 概念，这在我看来很难看。我找到了一个 Spring 包做我需要的 ( [Spring ODM](https://src.springframework.org/svn/spring-ldap/trunk/odm/src/main/java/org/springframework/ldap/odm/core/impl/OdmManagerImpl.java) )，但我不希望我的应用程序有一个 Spring 上下文。是否可以在没有上下文的情况下使用 Spring 类和方法，如外部库？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:40:35.303

这取决于你想从 Spring 中使用什么。如果您可以提供该类的所有依赖项（其构造函数中的参数），并且在您的类路径中没有其他 Spring jar 的情况下进行编译，那么您很有可能可以使用它。

但作为仅供参考，Spring Ldap 是一个死项目，还有其他库可用于对象目录映射。特别是如果您的项目不依赖于 Spring，您可能需要考虑使用例如 UnboundID LDAP SDK 来代替它提供[相同类型的功能](https://www.unboundid.com/products/ldap-sdk/docs/persist/index.php)。可能你可以使用它。

# zend-form - ZendForm 中的 zf2 复选框创建失败并出现数组表示法

> ID：15117009
> 
> 赞同：1
> 
> 时间：2013-02-27T16:19:57.003
> 
> 标签：zend-form, zend-framework2

我正在创建一个表单并使用 ZF2 添加一个复选框，但由于某种原因，当我使用数组表示法时，这些选项不会被发送。

所以这：

```
class PageForm extends Form
{
  public function __construct($name = null)
  {
$checkbox = new Element\Checkbox('system');
    $checkbox   ->setLabel('System Page')
                ->setUseHiddenElement(true)
                ->setCheckedValue("1")
                ->setUncheckedValue("0");

    $this->add($checkbox);
}
} 
```

工作正常，但是这个：

```
 class PageForm extends Form
    {
      public function __construct($name = null)
      {
   $this->add(array(
             'type' => 'Checkbox',
             'name' => 'checkbox',
             'options' => array(
                     'label' => 'A checkbox',
                     'use_hidden_element' => true,
                     'checked_value' => 'good',
                     'unchecked_value' => 'bad'
             )
    }
    } 
```

创建复选框但没有选中/未选中的值，我想知道我做错了什么，还是错过了一步？（示例直接来自文档）

这是视图中的代码：

```
$form = $this->form;
$form->setAttribute('action', $this->url('page', array('action' => 'add')));
$form->prepare();
echo $this->form()->openTag($form);
echo $this->formCollection($form);
echo $this->form()->closeTag(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:10:48.530

为什么不使用 Multicheckbox 呢？

```
 $multiCheckbox = new Element\MultiCheckbox('multi-checkbox');
 $multiCheckbox->setLabel('What do you like ?');
 $multiCheckbox->setValueOptions(array(
         array(
                 '0' => 'Apple',
                 '1' => 'Orange',
                 '2' => 'Lemon'
         )
 ));
 $form = new Form('my-form');
 $form->add($multiCheckbox); 
```

# java - java swing如何与其他平台一起使用？

> ID：15117012
> 
> 赞同：1
> 
> 时间：2013-02-27T16:20:18.343
> 
> 标签：java, executable-jar

我正在尝试在不同的平台上运行我的应用程序。应用程序使用可以输入和输出。我把这些文件和使用的类放在一起。对于我放的路径

```
public static String getPath() {
        String decodedPath = null;
        try {
            String path = InstallApk.class.getProtectionDomain()
                    .getCodeSource().getLocation().getPath();
            // URLDecoder decoder = new URLDecoder();
            decodedPath = URLDecoder.decode(path, "UTF-8");
        } catch (Exception e) {
            e.printStackTrace();

        }
        return decodedPath;
    } 
```

但是当我试图用其他系统或来自usb的其他位置测试我的jar时，例如。我没有写路径，但是一个错误的。

# javascript - 匹配最后一次出现的“”

> ID：15117018
> 
> 赞同：4
> 
> 时间：2013-02-27T16:20:37.907
> 
> 标签：javascript, jquery, regex

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:22:49.647

You can use look ahead:

```
str = str.replace(/”(?=[^”]*$)/,"<span class=quote>”&lt;/span>") 
```

This will replace a `"` which is followed by a sequence of `non-"` characters till the end.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:27:59.340

# php - 如何让父类构造函数在子构造函数之前运行？(PHP)

> ID：15117021
> 
> 赞同：1
> 
> 时间：2013-02-27T16:20:44.660
> 
> 标签：php

如何让父构造函数在子构造函数之前运行？（ 代码： ）

```
class database{
    public function __construct(){
        // Connect to database
    }
}

class child extends database{
    public function __construct(){
        // Do something
    }
} 
```

我希望它连接到数据库然后运行孩子的构造函数，这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:21:44.330

添加`parent::__construct()`到孩子的开头`__construct()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:22:41.020

像这样：

```
class child extends database{
    public function __construct(){
        parent::__construct();
        // Do something
    }
} 
```

# wolfram-mathematica - 带有频率数据的直方图

> ID：15117024
> 
> 赞同：1
> 
> 时间：2013-02-27T16:20:51.447
> 
> 标签：wolfram-mathematica

我正在尝试使用 MATHEMATICA 从 2 列数据中绘制直方图，其中第一个具有从最小值增加到具有相同间隔的最大值的数字，第二个具有频率。我将间隔计算为，interval = (max-min)/(number of Bins)。默认的直方图 [] 适用于没有计算频率的单列数据，但现在我的数据有频率。你能帮我解决这个问题吗？

非常感谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:35:32.373

以您描述的形式生成一些示例数据，您可以像这样绘制它：

```
frequencydata = Tally@Sort[RandomInteger[9, 100]];
TableForm[frequencydata, TableHeadings -> {None, {"Value", "Frequency"}}] 
```

![在此处输入图像描述](../Images/18395f1360ee1748bfb1bbf572f02a5c.png)

```
Histogram[Flatten[Table[#1, {#2}] & @@@ frequencydata], {0, 10, 1}] 
```

![在此处输入图像描述](../Images/e46184e2bc6f334b95ba18f0e3ac4e40.png)

# resteasy - 如何在不使用“spring”的情况下将对象保存到“resteasy”应用程序范围？

> ID：15117026
> 
> 赞同：0
> 
> 时间：2013-02-27T16:21:01.617
> 
> 标签：resteasy

你知道如何在不使用 spring 的情况下将对象设置为 resteasy 框架。
例如我有服务：

```
@Path("/customers")
public class CustomerResource {

   private MyDBconnection db = new MyDBconnection();

   ...

} 
```

如何将数据库连接对象保存到所有网络服务器的应用程序范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:45:36.483

我不会保存一个数据库连接以在多个物理服务器之间共享。我不确定这是否是您要问的。我建议在每台服务器上共享连接/池。您可以做的最简单的事情是一个简单的单例。但是，我建议您使用 Guice [https://code.google.com/p/google-guice/](https://code.google.com/p/google-guice/)以便您可以在任何需要的地方执行类似的操作。

```
@Path("/customers")
public class CustomerResource {
   @Inject
   private Connection db;

   ...
} 
```

然后你可以定义一个类似这样的guice模块

```
public class DatabaseModule extends AbstractModule {
    @Override
    protected void configure() {
        ...
    }

    @Provides
    @Singleton
    Connection provideConnection() {
        MyDBConnection connection = new MyDBConnection("jdbc:mysql....");
        connection.setSomeCustomStuff(someCustomStuff);
        return connection;
    }
} 
```

我知道目前resteasy只支持Guice 2.0。如果你能忍受那么酷，如果不能，我可以帮助你将 Guice 3.0 与 resteasy 集成，因为我自己做了它并且运行良好。

# mongodb - 如何使用 MongoDB 过滤子文档中的数组

> ID：15117030
> 
> 赞同：120
> 
> 时间：2013-02-27T16:21:09.990
> 
> 标签：mongodb, filter, mongodb-query, aggregation-framework

我在子文档中有这样的数组

```
{
    "_id" : ObjectId("512e28984815cbfcb21646a7"),
    "list" : [
        {
            "a" : 1
        },
        {
            "a" : 2
        },
        {
            "a" : 3
        },
        {
            "a" : 4
        },
        {
            "a" : 5
        }
    ]
} 
```

我可以过滤 > 3 的子文档吗

我的预期结果如下

```
{
    "_id" : ObjectId("512e28984815cbfcb21646a7"),
    "list" : [
        {
            "a" : 4
        },
        {
            "a" : 5
        }
    ]
} 
```

我尝试使用`$elemMatch`但返回数组中的第一个匹配元素

我的查询：

```
db.test.find( { _id" : ObjectId("512e28984815cbfcb21646a7") }, { 
    list: { 
        $elemMatch: 
            { a: { $gt:3 } 
            } 
    } 
} ) 
```

结果返回数组中的一个元素

```
{ "_id" : ObjectId("512e28984815cbfcb21646a7"), "list" : [ { "a" : 4 } ] } 
```

我尝试使用聚合`$match`但不工作

```
db.test.aggregate({$match:{_id:ObjectId("512e28984815cbfcb21646a7"), 'list.a':{$gte:5}  }}) 
```

它返回数组中的所有元素

```
{
    "_id" : ObjectId("512e28984815cbfcb21646a7"),
    "list" : [
        {
            "a" : 1
        },
        {
            "a" : 2
        },
        {
            "a" : 3
        },
        {
            "a" : 4
        },
        {
            "a" : 5
        }
    ]
} 
```

我可以过滤数组中的元素以获得预期结果吗？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-02-27T17:04:51.780

using`aggregate`是正确的方法，但您需要在应用之前`$unwind`对`list`数组进行过滤，`$match`以便过滤单个元素，然后`$group`将其重新组合在一起：

```
db.test.aggregate([
    { $match: {_id: ObjectId("512e28984815cbfcb21646a7")}},
    { $unwind: '$list'},
    { $match: {'list.a': {$gt: 3}}},
    { $group: {_id: '$_id', list: {$push: '$list.a'}}}
]) 
```

输出：

```
{
  "result": [
    {
      "_id": ObjectId("512e28984815cbfcb21646a7"),
      "list": [
        4,
        5
      ]
    }
  ],
  "ok": 1
} 
```

**MongoDB 3.2 更新**

从 3.2 版本开始，您可以使用新的[`$filter`](https://docs.mongodb.org/master/reference/operator/aggregation/filter/#exp._S_filter)聚合运算符更有效地执行此操作，只需`list`在 a 中包含您想要的元素`$project`：

```
db.test.aggregate([
    { $match: {_id: ObjectId("512e28984815cbfcb21646a7")}},
    { $project: {
        list: {$filter: {
            input: '$list',
            as: 'item',
            cond: {$gt: ['$$item.a', 3]}
        }}
    }}
]) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-12-03T11:07:22.047

如果需要多个匹配的子文档，上述解决方案效果最佳。 如果需要单个匹配的子文档作为输出，[$elemMatch也非常有用](https://docs.mongodb.org/manual/reference/operator/query/elemMatch/)

```
db.test.find({list: {$elemMatch: {a: 1}}}, {'list.$': 1}) 
```

结果：

```
{
  "_id": ObjectId("..."),
  "list": [{a: 1}]
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-03-18T15:48:42.260

使用[$filter 聚合](https://docs.mongodb.com/manual/reference/operator/aggregation/filter/)

> 根据指定条件选择要返回的数组子集。返回一个仅包含符合条件的元素的数组。返回的元素按原始顺序排列。

```
db.test.aggregate([
    {$match: {"list.a": {$gt:3}}}, // <-- match only the document which have a matching element
    {$project: {
        list: {$filter: {
            input: "$list",
            as: "list",
            cond: {$gt: ["$$list.a", 3]} //<-- filter sub-array based on condition
        }}
    }}
]); 
```

# javascript - 对象文字变量在创建对象的语句中未定义

> ID：15117031
> 
> 赞同：0
> 
> 时间：2013-02-27T16:21:15.163
> 
> 标签：javascript, knockout.js, object-literal

我正在玩 Knockout JS，在这个代码示例中：

```
var data = 
    {
      allMakes: ko.observableArray([ 
        { name: "Toyota" }, 
        { name: "Fiat"} 
      ]),
      allModels: ko.observableArray([
        { name: "Corolla", make: "Toyota" },
        { name: "Celica", make: "Toyota" },
        { name: "Avensis", make: "Toyota" },
        { name: "Uno", make: "Fiat" },
        { name: "Bravo", make: "Fiat" }
      ])
    };

var myViewModel = 
    {
      makes : data.allMakes,
      models: ko.computed(function() {
        if (!myViewModel.selectedMake())
          return;

        // TODO: filter models by selected make
      }),
      selectedModel: ko.observable(""),
      selectedMake: ko.observable("")
    };

/* Uncomment it to work
myViewModel.models = ko.computed(function() {
if (!myViewModel.selectedMake())
          return;

        // TODO: filter models by selected make
      });
*/

ko.applyBindings(myViewModel); 
```

[http://jsbin.com/upaxum/8/edit](http://jsbin.com/upaxum/8/edit)

我们可以看到我尝试访问模型中的**myViewModel**变量： ko.computed 。然而，当这个计算的 observable 运行时 myViewModel 是未定义的。我不知道为什么？

但是，如果我在下一条语句中创建可观察到的计算**模型，则会定义****myViewModel**变量。这是为什么？

编辑：其中一个答案表明我在创建对象之前正在访问它。那么这个代码片段是如何工作的呢？

```
var myViewModel = 
    {
      myFnk : function()
      {
        console.log(myViewModel);
      }
    };

myViewModel.myFnk(); 
```

[http://jsbin.com/eyutip/1/edit](http://jsbin.com/eyutip/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:23:54.147

当你写

```
alert("This is " + myViewModel); 
```

`myViewModel`还没有被定义——你还在定义它的过程中！你到底想做什么？您希望能够从内部访问视图模型的最初原因是什么？如果你告诉我们这一点，我很确定我们可以找到一种更惯用的方式来做你需要做的事情。

* * *

### 编辑（在 OP 的编辑之后）

为了能够从视图模型的其他部分引用视图模型的部分，请使用`self`模式（如[Knockout 文档中所推荐的那样](http://knockoutjs.com/documentation/computedObservables.html#managing_this)）：

```
function myViewModel() {
    var self = this;
    self.makes = data.allMakes;
    self.models = ko.computed(function() {
        if (!self.selectedMake())
            return;
        // TODO: do something with self.selectedMake()
        });
    self.selectedModel = ko.observable("");
    self.selectedMake = ko.observable("")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:46:37.113

这是不时让我绊倒的事情。**ko.computed 在定义后立即执行一次**。它这样做是为了知道它需要订阅哪些变量来监视更改。

所以在这段代码中

```
models: ko.computed(function() {
    if (!myViewModel.selectedMake())
        return;

    // TODO: filter models by selected make
}) 
```

myViewModel 在它被分配到`var myViewModel =`行中之前被访问，因为 ko.computed 在它被定义后立即执行该函数。

在您的第二个示例中，您在定义 myViewModel 之后执行函数*，*这就是它起作用的原因。如果您想在第一个示例中复制它，您可以执行以下操作：

```
var myViewModel = 
{
  makes : data.allMakes,
  selectedModel: ko.observable(""),
  selectedMake: ko.observable("")
};

myViewModel.models = ko.computed(function() {
    if (!myViewModel.selectedMake())
      return;

    // TODO: filter models by selected make
}); 
```

# asp.net-mvc - 如何在 ASP.NET MVC 4 解决方案中将 WebForms URL 重定向到它们的 MVC 等效项？

> ID：15117033
> 
> 赞同：3
> 
> 时间：2013-02-27T16:21:17.823
> 
> 标签：asp.net-mvc, redirect, asp.net-mvc-4, webforms

我发现这个问题有很多不同的变体，但似乎没有什么是我想要尝试的，所以如果已经回答，请原谅。

我有一个已完成转换为 MVC 4 (C#) 的旧 WebForms 解决方案。我在不同的解决方案中有两个项目。我想完全删除旧的 WebForms 项目、解决方案和已部署的文件，并在其位置重新部署新的 MVC 4 站点。既然如此，我不想杀死所有的旧 URL。例如，在 WebForms 站点中，您可以访问：

[http://mysite.com/Customers.aspx](http://mysite.com/Customers.aspx)

在 MVC 4 中，该 URL 现在是：

[http://mysite.com/Customers](http://mysite.com/Customers)

我想设置一个路由或重定向规则来处理这样的场景。我什至可以手动添加许多规则，因为该站点实际上并没有那么大。我觉得这应该很简单，但我对这个领域真的很陌生，似乎不太清楚我应该在哪里添加或添加什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:40:54.380

尝试使用这样的自定义过滤器：（此代码尚未在您的场景中进行测试，但我已使用我的基本重定向到 SSL 已测试）...

```
using System.Web.Mvc;   
namespace Libraries.Web.Attributes
{
    public class RedirectASPXAttribute : FilterAttribute, IAuthorizationFilter
    {
        public void OnActionExecuting(ActionExecutingContext filterContext)
        {
            var request = filterContext.HttpContext.Request;
            if (request.Url != null && request.Contains(".aspx"))
            {
                var manipulatedRawUrl = request.RawUrl.Remove(request.RawUrl.LastIndexOf(".aspx"), 5);
                filterContext.Result = new RedirectResult("http://" + request.Url.Host + manipulatedRawUrl);
            }
        }
    }
} 
```

然后，您只需使用属性装饰控制器：

```
[RedirectASPX]
public class HomeController : Controller
{

} 
```

希望这至少会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:14:28.447

感谢@brenton 为我指出了正确的方向，我终于明白了这一点。在我之后执行此操作的任何人的全套步骤。

在此处找到的 IIS 实例中安装 URL 重写模块：

[http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)

Visual Studio 的 Intellisense 不知道重写模块，因此请按照此处的说明添加它（不是必需的）：

[https://stackoverflow.com/a/8624558/45077](https://stackoverflow.com/a/8624558/45077)

之后，将以下块添加到文件的`<system.WebServer>`部分`Web.config`：

```
<rewrite>
<rules>
    <rule name="Redirect ASPX File to MVC" stopProcessing="true">
        <match url="(.*)\.aspx" />
        <action type="Redirect" url="{R:1}" appendQueryString="false" />
    </rule>
</rules>
</rewrite> 
```

# vb.net - 在模块中使用我的命名空间

> ID：15117034
> 
> 赞同：0
> 
> 时间：2013-02-27T16:21:29.063
> 
> 标签：vb.net, namespaces

我试图在 VB.NET 的一个模块中使用 MY 命名空间，但它说“我没有声明...” 使用 MY 命名空间会节省很多时间，但我可以在模块中使用它吗？

```
Imports System.Windows.Forms

Public Module Entry_Module
    Sub Main()
        My.Computer.Registry.SetValue("HKEY_CURRENT_USER\Software\Microsoft\Windows\Currentversion\Run\", "MyApp", application.executeablepath, RegistryValueKind.String)
    End Sub
End Module 
```

我正在将我的应用程序添加到启动中，我拥有的应用程序没有表单而是模块。那么如何在这个模块中使用我的命名空间呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:40:58.423

您必须`My`在 Method 中使用命名空间才能可用，我认为这是您的问题。看：

```
Public Class MyClass
    My.<Does not work>

    Public Sub MyMethod()
        My.<Correct>
    End Sub
End Class 
```

无论如何，如果你想在任何地方使用它，你可以创建一个新类来检索你想要的信息：

```
Public Class MyNS
    Public Shared Function CurrentDirectory() As String
        Return My.Computer.FileSystem.CurrentDirectory()
    End Function

    'etc
End Class 
```

然后在调用类方法的任何地方使用它：`MyNS.CurrentDirectory()`

**额外信息**：
[`My`命名空间和项目类型](http://msdn.microsoft.com/en-us/library/ms172698.aspx)。

# javascript - 骨干在骨干上的“排序”后触发“添加”事件。关系集合

> ID：15117035
> 
> 赞同：1
> 
> 时间：2013-02-27T16:21:29.043
> 
> 标签：javascript, backbone.js, marionette, backbone-relational

我将尝试详细解释我的问题，但如果缺少某些内容，请戳我，我很乐意为您提供更多信息..

我正在使用主干 0.9.10，主干关系 0.7.1，下划线 1.4.4。

我已经设置了一个这样的骨干关系集合：

```
// ActorAssignmentCollection.js
Backbone.Collection.extend({
    model: AbstractActorAssignment,
    comparator: function (assignment) {
        return assignment.get('sort_index');
    }
}); 
```

..并创建了一个主干视图，它将侦听器动态附加到传递的集合：

```
// ActorDisplay.js
Backbone.View.extend({

    attachListeners: function (collection) {
        this.listenTo(collection, 'add', _.bind(this.onAdd, this));
        this.listenTo(collection, 'sort', _.bind(this.onCollectionSort, this));
    },

    onAdd: function () {
        console.log('onAdd fired');
    },

    onCollectionSort: function() {
        console.log('onCollectionSortFired');
    }
}); 
```

现在，好的部分来了：

我使用关系的 .findOrCreate 方法来创建一个新的 ActorAssignment 模型：

```
// AddAssignmentCommand:
execute: function (data) {
    var sortIndex = data.collection.length,
        actorAssignment = data.collection.model.findOrCreate({
            actor: data.actor,
            sort_index: sortIndex,
            process_model: data.processModel
        });

    data.collection.add(actorAssignment);
} 
```

以前，在主干 0.9.2 中，'sort' 事件总是在 'add' 事件之后触发，但现在不再触发。我花了几个小时试图调试这个，这是我的结果。似乎模型上的“添加”传播到集合被延迟，而“排序”直接在集合上触发，这导致我的应用程序出现奇怪的行为.

我在主干源代码中放了一些调试语句，这是输出：

```
triggering add events.. 6dd47c9_backbone_1.js:641
triggering add event on model 6dd47c9_backbone_1.js:644
trigger: add fired 6dd47c9_backbone_1.js:182
triggering sort events.. 6dd47c9_backbone_1.js:647
trigger: sort fired 6dd47c9_backbone_1.js:182
*onCollectionSortFired* ControlStructureActorDisplay.js:136
trigger: relational:add fired 6dd47c9_backbone_1.js:182
trigger: change:entity_type fired 6dd47c9_backbone_1.js:182
trigger: change:entity_type fired 6dd47c9_backbone_1.js:182
trigger: change:entity_type fired 6dd47c9_backbone_1.js:182
trigger: change:entity_type fired 6dd47c9_backbone_1.js:182
trigger: change:actor fired 6dd47c9_backbone_1.js:182
trigger: change:actor fired 6dd47c9_backbone_1.js:182
trigger: change:actor fired 6dd47c9_backbone_1.js:182
trigger: change:actor fired 6dd47c9_backbone_1.js:182
trigger: change:process_step fired 6dd47c9_backbone_1.js:182
trigger: change:process_step fired 6dd47c9_backbone_1.js:182
trigger: change:process_step fired 6dd47c9_backbone_1.js:182
trigger: change:process_step fired 6dd47c9_backbone_1.js:182
trigger: change:sort_index fired 6dd47c9_backbone_1.js:182
trigger: change:sort_index fired 6dd47c9_backbone_1.js:182
trigger: change:sort_index fired 6dd47c9_backbone_1.js:182
trigger: change:sort_index fired 6dd47c9_backbone_1.js:182
trigger: change fired 6dd47c9_backbone_1.js:182
trigger: change fired 6dd47c9_backbone_1.js:182
trigger: change fired 6dd47c9_backbone_1.js:182
trigger: change fired 6dd47c9_backbone_1.js:182
trigger: add fired 6dd47c9_backbone_1.js:182
trigger: add fired 6dd47c9_backbone_1.js:182
trigger: add:actor_assignments fired 6dd47c9_backbone_1.js:182
trigger: add:actor_assignments fired 6dd47c9_backbone_1.js:182
trigger: add fired 6dd47c9_backbone_1.js:182
*onAdd fired* ControlStructureActorDisplay.js:155 
```

如您所见，onAdd 是在 onCollectionSort 之后触发的，而 'sort' 事件是在骨干 collection.add 中的 'add' 事件之后触发的，在第 644 行附近。上面是有意的吗？或者它是一个错误？另外，我不知道这是一个特定的关系问题，还是 Backbone 本身有问题。最后，我的问题是：事件应该像上面的例子那样是非阻塞的，还是我们应该更加谨慎地假设事件是按特定顺序触发的？

编辑：我将 process_model 属性添加到 findOrCreate 调用中，因为这导致了我的问题，答案如下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:11:26.177

我找到了！显然，在与另一个模型有关系的集合模型上调用 findOrCreate 会导致主干.relational 自动解析关系并将其添加到 processModel 上我的 oneToMany 的逆关系集合中，这会在我实际添加模型之前触发添加到收藏。希望这对遇到此问题的其他人有意义。

# c# - (.1f+.2f==.3f) != (.1f+.2f).Equals(.3f) 为什么？

> ID：15117037
> 
> 赞同：69
> 
> 时间：2013-02-27T16:21:36.123
> 
> 标签：c#, equality, floating-accuracy

我的问题**不是**关于浮动精度。这是关于为什么`Equals()`不同于`==`.

我明白为什么`.1f + .2f == .3f`是`false`（`.1m + .2m == .3m`而是`true`）。
我知道这`==`是参考，`.Equals()`是价值比较。（*编辑*：我知道还有更多。）

但是为什么是`(.1f + .2f).Equals(.3f)` `true`，while`(.1d+.2d).Equals(.3d)`还是`false`呢？

```
 .1f + .2f == .3f;              // false
(.1f + .2f).Equals(.3f);        // true
(.1d + .2d).Equals(.3d);        // false 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-02-27T16:54:01.963

这个问题措辞令人困惑。让我们把它分解成许多小问题：

> 为什么在浮点运算中十分之一加十分之二并不总是等于十分之三？

让我给你打个比方。假设我们有一个数学系统，其中所有数字都精确到小数点后五位。假设你说：

```
x = 1.00000 / 3.00000; 
```

您会期望 x 为 0.33333，对吗？因为这是我们系统中*最接近**真实*答案的数字。现在假设你说

```
y = 2.00000 / 3.00000; 
```

您会期望 y 为 0.66667，对吗？因为这也是我们系统中*最接近**真实*答案的数字。0.66666比 0.66667 离三分之二*更远。*

请注意，在第一种情况下，我们向下取整，在第二种情况下，我们向上取整。

现在当我们说

```
q = x + x + x + x;
r = y + x + x;
s = y + y; 
```

我们得到什么？如果我们进行精确的算术运算，那么这些显然都是三分之四，而且它们都是相等的。但它们并不相等。尽管 1.33333 是我们系统中最接近三分之四的数字，但只有 r 具有该值。

q 是 1.33332——因为 x 有点小，每次加法都会累积该错误，最终结果有点太小了。同样，s 太大；它是 1.33334，因为 y 有点太大了。r 得到了正确的答案，因为 y 的过大被 x 的过小抵消，结果最终是正确的。

> 精度的位数对误差的大小和方向有影响吗？

是的; 更高的精度使误差的幅度更小，但可以改变计算是由于误差而产生的损失或收益。例如：

```
b = 4.00000 / 7.00000; 
```

b 将是 0.57143，它从 0.571428571 的真实值向上四舍五入......如果我们去了 8 个地方，那就是 0.57142857，它的误差幅度要小得多，但方向相反；它四舍五入。

因为改变精度可以改变每个单独计算中的误差是收益还是损失，这可以改变给定聚合计算的误差是相互加强还是相互抵消。最终结果是，有时较低精度的计算比高精度计算更接近“真实”结果，因为在较低精度的计算中*你很幸运，而且误差在不同的方向。*

> 我们希望以更高的精度进行计算总是给出更接近真实答案的答案，但这个论点表明并非如此。这就解释了为什么有时浮点数的计算给出了“正确”的答案，而双精度数的计算——精度是两倍——给出了“错误”的答案，对吗？

是的，这正是您的示例中发生的情况，除了我们有一定数量的*二进制*精度而不是五位十进制精度。正如三分之一不能用五位或任何有限的十进制数字准确表示一样，0.1、0.2 和 0.3 也不能用任何有限的二进制数字准确表示。其中一些将向上舍入，其中一些将向下舍入，并且它们的添加是否会*增加*误差或*消除*误差取决于每个系统中有**多少二进制数字的具体细节。**也就是说，*精度*的变化可以改变*答案*无论好坏。通常，精度越高，答案越接近真实答案，但并非总是如此。

> 如果 float 和 double 使用二进制数字，我怎样才能获得准确的十进制算术计算？

如果您需要精确的十进制数学，请使用`decimal`类型；它使用十进制分数，而不是二进制分数。你付出的代价是它更大更慢。当然，正如我们已经看到的，像三分之一或七分之四这样的分数不会被准确地表示。然而，实际上是小数的任何分数都将用零错误表示，最多约 29 位有效数字。

> 好的，我接受所有浮点方案由于表示错误而引入不准确性，并且这些不准确性有时会根据计算中使用的精度位数而累积或相互抵消。我们是否至少可以保证这些不准确之处是*一致*的？

不，你对浮点数或双打没有这样的保证。编译器和运行时都被允许以比规范要求*更高的*精度执行浮点计算。*特别是，允许​​编译器和运行时以 64 位或 80 位或 128 位或任何大于*32 的位数进行单精度（32 位）算术。

允许编译器和运行时这样做，*但他们当时觉得这样*。它们不需要在机器之间、从运行到运行等等保持一致。由于这只能使计算*更准确*，因此这不被视为错误。这是一个特点。这个特性使得编写行为可预测的程序变得异常困难，但仍然是一个特性。

> 所以这意味着在编译时执行的计算，如文字 0.1 + 0.2，可以给出与在运行时使用变量执行的相同计算不同的结果？

是的。

> 比较 to 的结果怎么`0.1 + 0.2 == 0.3`样`(0.1 + 0.2).Equals(0.3)`？

由于第一个是由编译器计算的，而第二个是由运行时计算的，我只是说他们可以随意使用比规范要求的精度更高的精度，是的，这些可能会给出不同的结果。也许其中一个选择仅以 64 位精度进行计算，而另一个选择 80 位或 128 位精度进行部分或全部计算并得到不同的答案。

> 所以在这里等一下。你说的不仅`0.1 + 0.2 == 0.3`可以不同于`(0.1 + 0.2).Equals(0.3)`. 您是说`0.1 + 0.2 == 0.3`可以完全根据编译器的心血来潮计算为真或假。它可以在星期二产生真，在星期四产生假，它可以在一台机器上产生真而在另一台机器上产生假，如果表达式在同一个程序中出现两次，它可以产生真假。无论出于何种原因，此表达式都可以具有任一值；这里允许编译器*完全*不可靠。

正确的。

这通常向 C# 编译器团队报告的方式是，有人有一些表达式，当他们在调试模式下编译时产生 true，而在发布模式下编译时产生 false。这是最常见的情况，因为调试和发布代码生成更改了寄存器分配方案。但是编译器*可以*对这个表达式做任何它喜欢的事情，只要它选择真或假。（比如说，它不能产生编译时错误。）

> 这是疯狂。

正确的。

> 我应该为这个烂摊子怪谁？

不是我，那是肯定的。

英特尔决定制造一种浮点数学芯片，在这种芯片中，要获得一致的结果要昂贵得多。编译器中关于注册哪些操作与保留在堆栈上的操作的小选择可能会导致结果的巨大差异。

> 如何确保一致的结果？

`decimal`正如我之前所说，使用类型。或者用整数做所有的数学运算。

> 我必须使用双打或花车；我可以做些*什么*来鼓励一致的结果吗？

是的。如果您将任何结果存储到任何*静态字段*、类的任何*实例字段*或float 或 double 类型的*数组元素*中，则可以保证将其截断回 32 位或 64 位精度。（此保证明确*不适*用于存储到本地或形式参数。）此外，如果您对已经属于该类型的表达式执行*运行时*强制转换`(float)`，`(double)`则编译器将发出特殊代码，强制截断结果，就好像它已分配给字段或数组元素。（在编译时执行的强制转换——即对常量表达式的强制转换——不能保证这样做。）

> 为了澄清最后一点：C#*语言规范*是否做出了这些保证？

不会。*运行时*保证存储到数组或字段中会被截断。C# 规范不保证身份转换会被截断，但 Microsoft 实现具有回归测试，可确保编译器的每个新版本都具有此行为。

关于这个主题的所有语言规范都必须说的是，浮点运算可以根据实现的判断以更高的精度执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T16:35:54.620

当你写

```
double a = 0.1d;
double b = 0.2d;
double c = 0.3d; 
```

*其实*，这些并不完全`0.1`是`0.2`和`0.3`。来自 IL 代码；

```
 IL_0001:  ldc.r8     0.10000000000000001
  IL_000a:  stloc.0
  IL_000b:  ldc.r8     0.20000000000000001
  IL_0014:  stloc.1
  IL_0015:  ldc.r8     0.29999999999999999 
```

SO中有很多问题指出这个问题，例如（[.NET中十进制、浮点和双精度之间的区别？](https://stackoverflow.com/q/618535/447156)和[处理.NET中的浮点错误](https://stackoverflow.com/q/2248748/69809)），但我建议你阅读很酷的文章；

[`What Every Computer Scientist Should Know About Floating-Point Arithmetic`](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

*嗯*，leppie[说](https://stackoverflow.com/a/15117472/447156)的更合乎逻辑。真实情况就在这里，完全**取决于**`compiler`/`computer`或`cpu`。

基于 leppie 代码，此代码适用于我的*Visual Studio 2010*和*Linqpad*，因此`True`/ `False`，但是当我在[ideone.com](http://ideone.com/)上尝试时，结果将是`True`/`True`

检查**[演示](http://ideone.com/Q3gZQw)**。

*提示*：当我写`Console.WriteLine(.1f + .2f == .3f);`Resharper 时警告我；

> 浮点数与相等运算符的比较。舍入值时可能会损失精度。

![在此处输入图像描述](../Images/e7cb780b59fed5f7b6dfa310e32a835d.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T16:41:52.050

正如评论中所说，这是由于编译器进行了不断的传播并以更高的精度执行计算（我相信这取决于 CPU）。

```
 var f1 = .1f + .2f;
  var f2 = .3f;
  Console.WriteLine(f1 == f2); // prints true (same as Equals)
  Console.WriteLine(.1f+.2f==.3f); // prints false (acts the same as double) 
```

@Caramiriel 还指出`.1f+.2f==.3f`像`false`在 IL 中一样发出，因此编译器在编译时进行了计算。

确认常量折叠/传播编译器优化

```
 const float f1 = .1f + .2f;
  const float f2 = .3f;
  Console.WriteLine(f1 == f2); // prints false 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T16:44:15.857

FWIW 以下测试通过

```
float x = 0.1f + 0.2f;
float result = 0.3f;
bool isTrue = x.Equals(result);
bool isTrue2 = x == result;
Assert.IsTrue(isTrue);
Assert.IsTrue(isTrue2); 
```

所以问题实际上出在这条线上

> 0.1f + 0.2f==0.3f

如前所述，这可能是特定于编译器/PC的

到目前为止，我认为大多数人都从错误的角度来回答这个问题

**更新：**

我认为另一个奇怪的测试

```
const float f1 = .1f + .2f;
const float f2 = .3f;
Assert.AreEqual(f1, f2); passes
Assert.IsTrue(f1==f2); doesnt pass 
```

单等式实现：

```
public bool Equals(float obj)
{
    return ((obj == this) || (IsNaN(obj) && IsNaN(this)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T17:32:49.933

`==`是关于比较精确的浮点值。

`Equals`是一个布尔方法，可能返回真或假。具体实现可能会有所不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-07T15:18:23.110

我不知道为什么，但此时我的一些结果与你的不同。注意第三个和第四个测试恰好与问题相反，所以你的部分解释现在可能是错误的。

```
using System;

class Test
{
    static void Main()
    {
        float a = .1f + .2f;
        float b = .3f;
        Console.WriteLine(a == b);                 // true
        Console.WriteLine(a.Equals(b));            // true
        Console.WriteLine(.1f + .2f == .3f);       // true
        Console.WriteLine((1f + .2f).Equals(.3f)); //false
        Console.WriteLine(.1d + .2d == .3d);       //false
        Console.WriteLine((1d + .2d).Equals(.3d)); //false
    }
} 
```

# c# - System.InvalidCastException：无法转换类型为“System.Xml.XmlDocument”的对象

> ID：15117041
> 
> 赞同：1
> 
> 时间：2013-02-27T16:21:41.413
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0

我遇到了一些奇怪的异常，例如 tmo = (testobjectt)value[i]; 这是“无法将'System.Xml.XmlNode []'类型的对象转换为system.type类型”。

关于这个问题的任何想法？唯一可用的解决方案是重新启动 Windows 服务，以便 UI 中的所有内容都可用。另一件事是我们在客户端和服务器之间确实有 API。

这是我正在使用的代码片段：

```
public class Testarray: ArrayList

     // Release resources
     if (rd != null)
     {
        rd.Close();
     }

     return retval;
  }

Assembly a = Assembly.GetAssembly(typeof(Testobject));
                  string myType = a.gettype;
                  string xml = xmlvalue;
DataModelObject dmo;
// Deserialize and process the object
                  Testarraycol = Testarray.Deserialize(xml, Type.type);
tmo= (Testobject)value[i];  // this is where the exception occurs 
```

**更新** 是否在任何地方都需要任何无参数构造，我正在手动检查整个项目在序列化时丢失的任何地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:22:22.450

对于这个错误的原因，我最好的猜测是你依赖于`col` `ObjectArray`. 这不能保证。

可能，在一个简单的表示中，您的`ObjectArray.Deserialize`方法如下所示：

```
public static ObjectArray Deserialize(string xml, Type type)
{
    var s = new XmlSerializer(typeof(ObjectArray),
        new Type[] { type });
    var o = (ObjectArray)s.Deserialize(new StringReader(xml));
    return o;
} 
```

但这意味着序列化`xml`中不属于`Type` `type`（方法的参数）的任何其他对象都将被反序列化为`System.Xml.XmlNode[]`.

可能，错误发生在`col[i]`实际持有`ViewObjectInfo`.

如果您想确保这两种类型都被正确反序列化，请使用类似于以下内容的内容：

```
public static ObjectArray Deserialize(string xml, Type[] types)
{
    var s = new XmlSerializer(typeof(ObjectArray), types);
    var o = (ObjectArray)s.Deserialize(new StringReader(xml));
    return o;
} 
```

并这样称呼它：

```
ObjectArray col = ObjectArray.Deserialize(xml, 
    new Type[] { typeof(DataModelObject), typeof(ViewObjectInfo) }
    );
dmo = (DataModelObject)col.OfType<DataModelObject>().Skip(i).First(); 
```

无论如何，如果您只需要反序列`DataModelObject`化对象并保留当前逻辑，则只需替换：

```
dmo = (DataModelObject)col[i]; 
```

和

```
dmo = (DataModelObject)col.OfType<DataModelObject>().Skip(i).First(); 
```

不要忘记，`col[i]`不**保证**数组项的原始顺序匹配。

# boxplot - 创建具有两个分类解释变量的 MAM 箱线图

> ID：15117045
> 
> 赞同：2
> 
> 时间：2013-02-27T16:21:50.643
> 
> 标签：boxplot, lmer

我正在尝试创建由两个分类变量解释的 MAM 的图形表示。我意识到我需要制作 2 个箱线图来显示每个解释变量的效果，因为两者之间的交互作用微不足道。我如何绘制箱线图，因为我似乎无法提取手段等，而且我不确定它是否是因为我使用的是 lmer。

到目前为止，这是我的代码....

```
m1<-lmer(Bird.species~Weather*AM.or.PM+(1|Staff),family=poisson)
summary(m1)
m2<-update(m1,REML=FALSE)
m3<-update(m2,~.-Weather:AM.or.PM)
anova(m2,m3)
m4<-update(m3,~.-Weather)
anova(m3,m4)
m5<-update(m3,~.-AM.or.PM)
anova(m3,m5)

m6<-update(m5,~.-Weather)
anova(m5,m6)
m7<-update(m4,~.-AM.or.PM)
anova(m4,m6)

mam.lmer<-update(m3,REML=TRUE)
summary(mam.lmer) 
```

我认为为了绘制这两个图表，我必须将 m4 用于上午或下午，将 m5 用于天气。

到目前为止我有这个但是后来卡住了，似乎无法在任何有帮助的地方找到答案，因为当我使用“$”时它会产生我不理解的错误。

```
m5<-update(m5,REML=TRUE)
par(mfrow=c(1,1))
mam.graph1<-update(m5,~.-1) 
```

谢谢

# asp.net-mvc-4 - Signalr1.0.0.0 + unity + 实体框架坏了

> ID：15117046
> 
> 赞同：3
> 
> 时间：2013-02-27T16:21:50.693
> 
> 标签：asp.net-mvc-4, unity-container, entity-framework-5, signalr

今天我从 1.0.0alpha2 升级到 Signalr 1.0.0，我注意到我必须更改我的`Application_Start`.

前：

```
UnityContainer = Bootstrapper.Initialize();
var unityDependencyResolver = new UnityDependencyResolver(UnityContainer);

DependencyResolver.SetResolver(unityDependencyResolver);

var signalRUnityDependencyResolver = new SignalRUnityDependencyResolver(UnityContainer);

RouteTable.Routes.MapHubs(signalRUnityDependencyResolver);

GlobalHost.DependencyResolver = signalRUnityDependencyResolver;

AreaRegistration.RegisterAllAreas(); 
```

现在：

```
UnityContainer = Bootstrapper.Initialize();
var unityDependencyResolver = new UnityDependencyResolver(UnityContainer);

DependencyResolver.SetResolver(unityDependencyResolver);

var signalRUnityDependencyResolver = new SignalRUnityDependencyResolver(UnityContainer);
//RouteTable.Routes.MapHubs(signalRUnityDependencyResolver);
RouteTable.Routes.MapHubs();

GlobalHost.DependencyResolver = signalRUnityDependencyResolver;

AreaRegistration.RegisterAllAreas(); 
```

我知道`RouteTable.Routes.MapHubs();`应该首先出现的文档状态，但这只会让一切都挂在那条线上。这是我发现实际加载的唯一方法。

但是当我尝试进行数据库调用时，我没有得到异常或任何东西，但网站会冻结。当我在调试器中点击暂停时，它在遇到的第一个 EF5 查询中被冻结。但也不例外，所有属性都表示为：

`Cannot evaluate expression because a native frame is on top of the call stack.`

当我删除`RouteTable.Routes.MapHubs();`一切再次工作（除了Signalr）。

有时它甚至没有走那么远，然后它就挂了`AreaRegistration.RegisterAllAreas();`。

Signalr 的每次更新都会再次发生变化，现在让我发疯了。

让 Unity+Signalr 工作的正确调用顺序应该是什么？

**编辑：** 经过一番摆弄后，当我禁用以下几行时，它似乎可以工作：

```
var signalRUnityDependencyResolver = new SignalRUnityDependencyResolver(UnityContainer);
GlobalHost.DependencyResolver = signalRUnityDependencyResolver; 
```

# oracle - 将 RefCursor 传递给函数时光标无效

> ID：15117052
> 
> 赞同：1
> 
> 时间：2013-02-27T16:22:08.377
> 
> 标签：oracle, plsql

我正在尝试执行一个接收 REFCURSOR 并执行一些数据操作的函数。

为了测试我的功能，我有这个 SQL/PLUS 代码：

```
var some_cursor REFCURSOR;

exec :some_cursor := SCHEMA.test_getcursor;

print some_cursor;

variable res varchar2;

exec :res := SCHEMA.second_function(:some_cursor, 'Other_parameter');

print res; 
```

现在，第一个`test_getcursor`函数是一个简单的函数，它打开游标，执行选择查询并返回游标。它工作得很好，打印`some_cursor`也很好。

当我调用`second_function`并将 refcursor 传递给它时，就会出现问题。

函数有以下代码：

```
type cursor_row
IS RECORD
(field_1 some_field1%type,
 field_2 some_field2%type,
 field_3 some_field3%type);

 new_row cursor_row;

BEGIN
LOOP
fetch PASSED_IN_REFCURSOR INTO new_row --this is where the function fails
...data manipulation...
EXIT WHEN PASSED_IN_REFCURSOR%NOTFOUND;
END LOOP;
CLOSE PASSED_IN_REFCURSOR;
END; 
```

我得到的错误是`Invalid Cursor`.

我确信我创建的类型与 ref 游标具有相同的行数和相同的数据类型。

在这种情况下我做错了什么？我正在使用 Oracle 10g、PL/SQL 10.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:41:08.740

这是你的问题：

```
print some_cursor; 
```

去掉它。通过打印游标，您获取了所有记录并将其关闭。所以第二个函数不能再读取它了。

例如;

```
SQL> create procedure two(p_rc sys_refcursor)
  2  is
  3    v_col varchar2(1);
  4  begin
  5    loop
  6      fetch p_rc into v_col;
  7      exit when p_rc%notfound;
  8      dbms_output.put_line(v_col);
  9    end loop;
 10  end;
 11  /

Procedure created.

SQL> set serverout on
SQL> var rc refcursor;
SQL> exec :rc := one;

PL/SQL procedure successfully completed.

SQL> exec two(:rc);
X

PL/SQL procedure successfully completed. 
```

对比

```
SQL> var rc refcursor;
SQL> exec :rc := one;

PL/SQL procedure successfully completed.

SQL> print rc

D
-
X

SQL> exec two(:rc);
BEGIN two(:rc); END;

*
ERROR at line 1:
ORA-01001: invalid cursor
ORA-06512: at "TEST.TWO", line 6
ORA-06512: at line 1 
```

由于光标未打开，因此在获取时会爆炸。如果你想返回一个更有用的错误，你应该`%isopen`首先检查并提出一个定义的错误。

# java - 实例化 SQL 语句 (Java) (JDBC) 时出错

> ID：15117053
> 
> 赞同：0
> 
> 时间：2013-02-27T16:22:11.363
> 
> 标签：java, sql, netbeans, jdbc

我一直在尝试在 netbeans 中练习使用 JDBC，但遇到了一个小问题，现在我加载了一个驱动程序，建立了与 SQL 的连接，但由于某种原因，我的 SQL 语句不起作用，我会很高兴任何人都可以忍受我

```
public void dbTest() {
    try {
        Class.forName(
                "com.mysql.jdbc.Driver").newInstance();
    } catch (InstantiationException |
            IllegalAccessException |
            ClassNotFoundException e) {
    }

    try (Connection connection = DriverManager.getConnection(
            "jdbc:mysql://localhost:3306/", "root", "explore");
            Statement statement = (Statement) connection.createStatement()) {
        String query = "select first_name, last_name"
                + " from sakila.customer "
                + "where address_id < 10";
        try (ResultSet resultset =
                statement.executeQuery(query)) {
            while (resultset.next()) {
                String firstName =
                        resultset.getString("first_name");
                String lastName =
                        resultset.getString("last_name");
                System.out.println(firstName + " " + lastName);
            }
        }
    } catch (SQLException e) {
    }
} 
```

这行代码给我带来了麻烦

```
Statement statement = (Statement) connection.createStatement() 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:11:49.580

正如大多数评论所述，您应该使用`java.sql.Statement`而不是`java.beans.Statement`.

我注意到您的代码的另一件事是您正在查询并且您没有指定应该从哪个数据库执行这些操作，这将引导您进入`SQLException`。因此，您必须再次将 url 字符串从 更改`"jdbc:mysql://localhost:3306/"`为`"jdbc:mysql://localhost:3306/database_name"`。

希望这可以帮助。

# c++ - 以极高的精度获取时差

> ID：15117062
> 
> 赞同：0
> 
> 时间：2013-02-27T16:22:37.033
> 
> 标签：c++, time

我想获取当前时间并使用一个函数，并计算生成函数的时间，尽可能使用最大的时间数......我写了这段代码，但是，总是返回 0 秒 :(

```
#include <iostream>
#include <chrono>

using namespace std;
using namespace std::chrono;

void number(int numero, int *retNumber)
{
    int a = *retNumber;
    __asm
    {
        mov eax, numero
        neg eax // Apenas um ciclo da maquina, eba, mais rapido :)
        mov a, eax
    }
    *retNumber = a;
}

int main ()
{
    int numero = 10;
    int retorno = 0;
    monotonic_clock::time_point start = monotonic_clock::now();

    number(numero, &retorno);

    duration<double> sec = monotonic_clock::now() - start;
    cout << "f() took " << sec.count() << " seconds\n";
    return 0;
} 
```

当然，如果可以使用代码来做这个，我会做，但是，如果不可能，我可以用什么程序来做这个？

# php - 字符串被 strtolower 函数识别为对象

> ID：15117066
> 
> 赞同：1
> 
> 时间：2013-02-27T16:22:46.487
> 
> 标签：php, string, function, object

当我尝试使用[`strtolower()`](http://php.net/strtolower)我的字符串时出现以下错误：

```
Warning: strtolower() expects parameter 1 to be string, object given in 
```

当我这样做时，`var_dump()`它告诉我字符串应该是一个字符串？

```
string(21) "This IS a Test String" 
```

一些代码：

```
protected $hostname;

public function __construct($hostname)
{
    //$this->hostname = $hostname;
    $this->hostname = 'This IS a TeSt String';
    return $this->_filter();
}

private function _filter()
{
    $hostname = $this->hostname;
    var_dump($hostname);
    $hostname = strtolower($hostname);
    $hostname = $this->_getDomain($hostname);
    $hostname = $this->_stripDomain($hostname);

    return $hostname;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:39:49.537

问题可能是由于您尝试`return`从构造函数中获取某些内容而引起的。你不能这样做。

如果这可以解决问题，您应该尝试：

```
public function __construct($hostname)
{
    $this->hostname = $hostname;
    $this->_filter();
} 
```

另外，您似乎做了很多重复分配，所以我会将您的功能更改为：

```
private function _filter()
{
    var_dump($this->hostname);
    $this->hostname = strtolower($this->hostname);
    // here you might need other variable names, hard to tell without seeing the functions
    $this->hostname = $this->_getDomain();
    $this->hostname = $this->_stripDomain();
} 
```

请注意，`$this->hostname`它适用于类中的所有函数，因此您无需将其作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:41:08.880

这似乎可以正常工作，稍微调整一下我认为您正在用初始输入覆盖变量

```
<?php 
class Test {
    public $outputhost;
    public function __construct($inputhost)
    {
        $this->hostname = $inputhost;
        $this->outputhost = $this->_filter();
    }
    private function _filter()
    {
        var_dump($this->hostname);
        $outputhost = strtolower($this->hostname);
        return $outputhost;
    }
}

$newTest = new Test("WWW.FCSOFTWARE.CO.UK");
echo $newTest->outputhost;
?> 
```

# google-app-engine - 在 Google App Engine 管理控制台中按键 GQL 查询

> ID：15117074
> 
> 赞同：3
> 
> 时间：2013-02-27T16:23:12.510
> 
> 标签：google-app-engine, gql

这是我尝试为（不是 Python）编写 GQL 管理控制台查询的记录示例。

解码的实体密钥：

```
packageName: name=com.mycompany.example > userId: name=someone@gmail.com
Entity key: ag...Qw 
```

我已经尝试过：

```
SELECT * FROM userId where __key__ = KEY('userId', 'someone@gmail.com') 
```

这没有找到记录。我怀疑这是因为`userId`是孩子`packageName`……我该如何为此编写 GQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:51:26.310

试试这个：

> ```
> SELECT * FROM userId WHERE __key__ = KEY('packageName', 'com.mycompany.example', 'userId','someone@gmail.com') 
> ```

```
>     // SELECT * FROM ChildClassName WHERE __key__ = KEY('ParentClassName', 'ParentName, 'ChildClassName', 'ChildName')) 
```

有关更多详细信息，请参阅有关[Key](https://developers.google.com/appengine/docs/python/datastore/keyclass?hl=es-419)类的信息。

希望这可以帮助。

# date - JCR SQL2 查询比较日期

> ID：15117075
> 
> 赞同：2
> 
> 时间：2013-02-27T16:23:17.960
> 
> 标签：date, jcr

我很难使用 SQL2 查询语言来比较日期。

我希望能够做这样的事情：

```
SELECT p.* FROM [nt:base] AS p WHERE EXTRACT(YEAR FROM p.[some_date]) = "2008" 
```

可能吗？这些约束之王的最佳技术是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T17:11:25.630

The best way to use dates in a query is to use `CAST` to force the conversion of a string representation of a date/time into a DATE value used by JCR.

Unfortunately, in your example you're looking for a date that occurs within a particular year. There's no way in JCR to extract the year as an integer, so the only standard way I know of is to check whether the actual date occurs within a range defined by the first the first and last microsecond of the year:

```
SELECT p.* FROM [nt:base] AS p
WHERE p.[some_date] >= CAST('2008-01-01T00:00:00.000Z' AS DATE)
  AND p.[some_date] <= CAST('2008-12-31T23:59:59.999Z' AS DATE) 
```

You can of course use a long representation (the number of milliseconds past epoch) rather than the string literal.

This becomes much easier if you have some kind of 'year' property:

```
SELECT p.* FROM [nt:base] AS p
WHERE p.[some_year] = 2008 
```

You could also use a string literal and force a cast to LONG:

```
SELECT p.* FROM [nt:base] AS p
WHERE p.[some_year] = CAST('2008' AS LONG) 
```

If the `some_year` property is defined on a property definition to be LONG, then some implementations may discover this and auto-convert during planning.

# codeigniter - Codeigniter：无法在视图页面中显示来自购物车选项的特定值

> ID：15117078
> 
> 赞同：0
> 
> 时间：2013-02-27T16:23:28.380
> 
> 标签：codeigniter

我用codeigniter做了一个购物车。

我在购物车中添加了几本书的详细信息。我想在不同的 div 中显示特定的购物车选项值。但我无法展示它。

我尝试了下面的代码，但是有了这个，我一次得到了所有的选项值。

请帮我。

## 控制器.php

```
 function add($id=0)
{   
  if($id>0)
     {
       $query = $this->Booksmodel->get($id);
       $bid = $query['book_id']; 
       $qnty = $query['quantity'];  
       $price = $query['price'];  
       $title = $query['book_title'];  
       $covername ='Hard Cover';  
       $afname = $query['auth_firstname'];  
       $alname = $query['auth_lastname'];  
       $aname=$afname.'&nbsp;'.$alname;
       $img = $query['img1'];    
       $data = array
          (
           'id'      => $bid,
           'qty'     => $qnty,
           'price'   => $price,
           'name'    => $title, 
            'options' => array('aname' => $aname, 'covername' => $covername,'Bimg' => $img)
          );
       $this->cart->insert($data);
          $this->load->view('cart/cart',$data);  
     } 
} 
```

视图.php

```
 ---------------
   ----------------
 <?php $i = 1; ?>
           <?php foreach($this->cart->contents() as $items): ?>                                                     
             <td> //i want to display here only the value of the a name
                 <?php foreach ($this->cart->product_options($items['rowid']) as $aname => $option_value): ?>
                          <?php  echo $option_value;    ?> 
                           <?php endforeach; ?> 
            </td>                                                                                                      
          <?php $i++; ?>
        <?php endforeach; ?>
           -----------------
            ---------------- 
```

var_dump($this->cart->contents()) ;

**输出（购物车中的 1 件商品）：**

```
 array(1) { ["3705f19b9e71159a8b1a84079cfa8a3f"]=> array(7) { ["rowid"]=> string(32) 
         "3705f19b9e71159a8b1a84079cfa8a3f" ["id"]=> string(2) "17" ["qty"]=> string(1) "1" ["price"]=> 
         string(2) "46" ["name"]=> string(39) "Budhhiyoga Of the Gita And other Essays" ["options"]=> 
          array(3) { ["aname"]=> string(16) "Sri Anirvan" ["covername"]=>  string(11) 
        "Hard Cover" ["Bimg"]=> string(13) 
        "DSC00a009.JPG" } ["subtotal"]=> int(46) } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:47:19.937

**更新**

我想这次我成功了

```
<?php $i = 1; ?>
       <?php foreach($this->cart->contents() as $item): ?>                                                     
         <td> //i want to display here only the value of the a name
              <?php  echo $item['options']['covername'];    ?> 
        </td>                                                                                                      
      <?php $i++; ?>
    <?php endforeach; ?> 
```

# asp.net-mvc - 有人可以解释 MVC 模型绑定吗？

> ID：15117080
> 
> 赞同：1
> 
> 时间：2013-02-27T16:23:31.777
> 
> 标签：asp.net-mvc, model-binding

我有一个模型，我创建并传递给我的视图。该模型创建了一个表单并使用该`HttpPost`属性将模型取回。我将模型保存到数据库，然后我想将默认模型状态返回到视图（IE 下拉值，但不是所选项目）

我创建了一个空模型，将其传递给视图，但值保持不变，我不明白为什么。

我的观点

```
 @using (Html.BeginForm())
  {
    @Html.ValidationSummary(true)
    <fieldset>
      <legend>
        <h2>Configuration settings</h2>
      </legend>

      <div class="editor-label">
        @Html.LabelFor(model => model.DeviceType)
      </div>
      <div class="editor-field">
        @Html.DropDownListFor(model => model.DeviceTypeSelectedItem, new SelectList(Model.DeviceType, "Value", "Text"),new {@class = "DeviceTypeDDL"})
        @Html.ValidationMessageFor(model => model.DeviceTypeSelectedItem)
      </div>

       <div class="editor-label">
        @Html.LabelFor(model => model.ConfigGroup)
      </div>
      <div class="editor-field">
        @Html.DropDownListFor(model => model.ConfigGroupSelectedItem, new SelectList(Model.ConfigGroup, "Value", "Text"),new {@class = "ConfigGroupDDL"})
        @Html.ValidationMessageFor(model => model.ConfigGroupSelectedItem)
      </div>

       <div class="editor-label">
        @Html.LabelFor(model => model.ConfigName)
      </div>
      <div class="editor-field">
        @Html.DropDownListFor(model => model.ConfigNameSelectedItem, new SelectList(Model.ConfigName, "Value", "Text"),new {@class = "ConfigNameDDL"})
        @Html.ValidationMessageFor(model => model.ConfigNameSelectedItem)
      </div>

        <div class="editor-label">
        @Html.LabelFor(model => model.ConfigValue)
      </div>
      <div class="editor-field">
        @Html.EditorFor(model => model.ConfigValue)
        @Html.ValidationMessageFor(model => model.ConfigValue)
      </div>

        <div class="editor-label">
        @Html.LabelFor(model => model.MergeOrDelete)
      </div>
      <div class="editor-field">
        @Html.DropDownListFor(model => model.MergeOrDeleteSelectedItem, new SelectList(Model.MergeOrDelete, "Value", "Text"), new { @class = "MergeDeleteDDL" })
        @Html.ValidationMessageFor(model => model.MergeOrDeleteSelectedItem)
      </div>

      @Html.HiddenFor(model => model.ManagementGroupId)

      <p>
        <input type="submit" value="Add" />
      </p>
    </fieldset>
  } 
```

控制器：

```
[HttpGet]
    public ActionResult Index(int id)
    {
      var model = CreateDefaultConfigModel(id);
      return View(model);
    }
    [HttpPost]
    public ActionResult Index(vmConfiguration model)
    {
      if (ModelState.IsValid)
      {
        bool isMerge = model.MergeOrDeleteSelectedItem == 1 ? true : false;
        _configLogic.AddConfigurationValue((int)model.ConfigNameSelectedItem, (int)model.ManagementGroupId, model.ConfigValue, isMerge);
        return View(CreateDefaultConfigModel(model.ManagementGroupId));
      }
      else
      {
        return View(model);
      }
    }
private vmConfiguration CreateDefaultConfigModel(int id)
{
  var model = new vmConfiguration
  {
    DeviceType = _configLogic.GetDevices,
    ConfigGroup = new List<SelectListItem>() { EmptySelect() },
    ConfigName = new List<SelectListItem>() { EmptySelect() },
    ConfigGroupSelectedItem = null,
    MergeOrDeleteSelectedItem = null,
    DeviceTypeSelectedItem = null,
    ConfigNameSelectedItem = null,
    ManagementGroupId = id,
    ParamData = _configLogic.GetParamValuesForGroup(id)
  };
  return model;
}
private static SelectListItem EmptySelect()
{
  return new SelectListItem { Text = "No value", Value = "-1" };
}
private ConfigurationLogic _configLogic; 
```

做研究我发现如果我`this.ModelState.Clear();`在创建新模型之前调用它，那么它可以工作，但为什么 MVC 会忽略我传递的模型并使用绑定的模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:22:18.807

改变

```
return View(CreateDefaultConfigModel(model.ManagementGroupId)); 
```

对此

```
return RedirectToAction("Index", new { id = model.ManagementGroupId }); 
```

它不会忽略您的模型，它会在您将它们发送回同一索引页面时尝试填写您的表单，因为它假设您由于需要更多信息而将它们发送回来，并且它试图通过不强迫用户重新来提供帮助- 再次输入所有信息。此信息全部存储在 ModelState 中，因为它保存了回传到服务器的尝试值。无论如何，在成功发布后重定向是推荐的模式。查找[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# android - 如何在android上实现ad hoc连接？

> ID：15117088
> 
> 赞同：-4
> 
> 时间：2013-02-27T16:23:40.170
> 
> 标签：android, adhoc

是否可以在应用程序 ad hoc 连接中实现？我想编写需要连接到 ad hoc 网络的应用程序，但我知道 android 不支持 ad hoc 网络。我可以做找到并连接到 ad hoc 网络的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:30:11.420

Lib 开发了一个 ad-hoc 库，可以包含在任何需要在移动 ad-hoc 网络上运行的 Android 应用程序中。该库包含一个路由协议模块（基于 AODV）和一个设置模块，用于在支持的 Android 设备上创建和停止 ad-hoc 网络。

```
http://code.google.com/p/adhoc-on-android/ 
```

我希望这可以帮助你。

# ruby-on-rails - 在 Rails 中使用相同部分时显示不同数据的最佳实践

> ID：15117090
> 
> 赞同：2
> 
> 时间：2013-02-27T16:23:55.980
> 
> 标签：ruby-on-rails, scopes

只是一个与 Rails 最佳实践相关的问题：

假设我们有一个 Post 和一个 Comment 模型。相同的部分用于在索引视图和显示视图上呈现帖子。在该部分内部是对呈现评论的另一个部分的引用。

**post_controller.rb**

```
def index
  @posts = Post.all
end

def show
  @post = Post.find(params[:id])
end 
```

**_post.html.haml**

```
.post
  = post.content 
  = render 'comments/list', :comments => post.comments 
```

**评论/_list.html.haml**

```
- comments.each do |c|
    c.comment 
```

现在假设对于帖子索引视图，我们只想显示每个帖子的最后 3 条评论，但在显示视图中我们希望显示帖子的所有评论。因为使用了相同的部分，我们不能编辑调用来限制评论。实现这一目标的最佳方法是什么？目前我已经将它抽象为一个助手，但是感觉有点狡猾：

```
def limited_comments(comments)
  if params[:controller] == 'posts' and params[:action] == 'show'
    comments
  else
    comments.limit(3)
  end
end 
```

这意味着**_post.html.haml**更改为读取

```
= render 'comments/list', :comments => limited_comments(post.comments) 
```

它有效，但感觉不像 Rails 方式。我猜有一种使用范围的方法，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:29:47.280

您可以对索引操作持续 3 条评论并分配给`@comments`变量，对于显示操作，您可以加载该帖子的所有评论。所以它变成

```
def index
  @posts = Post.all
  @comments = Comment.order("created_at desc").limit(3)
end

def show
  @posts = Post.all
  @comments = @post.comments.order("created_at desc").limit(3)
end 
```

在视图中它只是

```
= render 'comments/list', :comments => @comments 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:24:49.120

我相信@benchwarmer 想说的是最好将参数传递给_post partial。直截了当的@comments 不起作用，但类似下面的代码可能：

```
def index
  @posts = Post.all
  render :partial => @posts, :locals => { :max_comments => 3 }
end

def show
  @post = Post.find(params[:id])
  render :partial => @post, :locals => { :max_comments => false }
end 
```

在 post.html.haml 中：

```
= render 'comments/list', :comments => limited_comments(post.comments,max_comments) 
```

你的助手：

```
def limited_comments(comments,max_comments)
  max_comments ? comments.limit(max_comments) : comments
end 
```

我没有编译，因此您可能需要进一步处理传递给 render :partial 的参数（在这种情况下，您可能必须单独设置 :partial 和 :object/:collection ，否则，我不'不记得也没有尝试）。但我希望这个想法很明确——将逻辑表示（所有评论或最后 3 条）与处理路径（哪个控制器/动作）分开。可能您稍后会想要显示带有嵌入另一个列表中的评论的帖子（用户列表的最后 3 个帖子），那么这种分离将派上用场。

如果您不想在控制器级别公开所有内部逻辑细节，您也可以这样做：

```
def index
  @posts = Post.all
  render :partial => @posts, :locals => { :comments_list_type => :short }
end

def show
  @post = Post.find(params[:id])
  render :partial => @post, :locals => { :comments_list_type => :full }
end 
```

然后，在 post.html.haml 中：

```
= render 'comments/list', :comments => build_comments_list(post.comments,comments_list_type) 
```

你的助手：

```
def limited_comments(comments,comments_list_type)
  case comments_list_type
    when :short
      comments.limit(3) 
    when :long
      comments.limit(10) 
    when :full
      comments
  end
end 
```

# c# - (object source, ElapsedEventArgs e) 什么意思？

> ID：15117092
> 
> 赞同：1
> 
> 时间：2013-02-27T16:24:00.770
> 
> 标签：c#, xna

这是一个来自 msdn 的示例。

```
public class Timer1
{
    public static void Main()
    {
        System.Timers.Timer aTimer = new System.Timers.Timer();
        aTimer.Elapsed+=new ElapsedEventHandler(OnTimedEvent);
        // Set the Interval to 5 seconds.
        aTimer.Interval=5000;
        aTimer.Enabled=true;

        Console.WriteLine("Press \'q\' to quit the sample.");
        while(Console.Read()!='q');
    }

    // Specify what you want to happen when the Elapsed event is raised.
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("Hello World!");
    }
} 
```

我的问题针对这一行：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e) 
```

'source' 和 'e' 变量中隐藏着什么？我知道，它们是函数参数，但是从事件发送给它们的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:27:15.843

好吧，`source`应该是调用事件的任何对象，在这种情况下似乎有些`Timer`，

并且`e`应该包含更多关于事件的元信息。

例如，如果您有一个`on-click`事件，它`...EventArgs`可能会告诉您点击发生的坐标。

如果您使用的是 Visual Studio，则可以键入类似的内容`e.`，然后智能应该会告诉您其中的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:28:09.240

Source 是事件的*来源*- 在这种情况下是计时器；而 e 包含与事件有关的信息。在这种情况下，ElapsedEventArgs：

[http://msdn.microsoft.com/en-us/library/system.timers.elapsedeventargs_members(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.timers.elapsedeventargs_members(v=vs.80).aspx)

另一个示例是 winforms 中文本框的 keyDown 事件 - e 参数为您提供 KeyCode 并让您确定用户是否在按住 Alt/Control 等。

```
 txt_KeyDown(object sender, KeyEventArgs e)
 {
   if (e.KeyCode == Keys.Enter)
   ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:29:08.647

`source`将成为计时器本身。`e`将告诉您事件触发的时间：[ElapsedEventArgs](http://msdn.microsoft.com/en-us/library/system.timers.elapsedeventargs.aspx)。

大多数时候，您不会关心这些论点中的任何一个。您只关心在触发计时器时做某事，因此您可以愉快地忽略传递给该方法的参数。

# ajax - 如何使用 angularjs $http 修复我的 jsonp 回调以解决“意外令牌”错误？

> ID：15117097
> 
> 赞同：3
> 
> 时间：2013-02-27T16:24:11.237
> 
> 标签：ajax, angularjs, google-apps-script, jsonp

从谷歌应用脚​​本接收 jsonp 的规范不会导致返回数据中出现“意外令牌”。

我正在使用 angularjs $http.jsonp - 它不喜欢语法 ?prefix=? 在我的谷歌应用脚​​本网址的末尾。

这适用于 jQuery，但我正在尝试使用这个应用程序进行所有角度的调整。这是[我从以前的用户那里分叉的小提琴](http://jsfiddle.net/4JRqm/)。这是请求，很好：

```
function jsonp_example($scope, $http) {
$scope.doRequest = function() {
    var url = "https://script.google.com/macros/s/AKfycbyTnhcsnyXKJqZdF8yAppVQjXX935J9-YTJOHyf7jkea16gSsOA/dev?prefix=?";

    $http.jsonp(url);
}; 
```

请打开控制台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T17:01:11.713

试试这个：

```
function jsonp_example($scope, $http) {
    $scope.doRequest = function() {
        var url = "https://script.google.com/macros/s/AKfycbyTnhcsnyXKJqZdF8yAppVQjXX935J9-YTJOHyf7jkea16gSsOA/dev?prefix=JSON_CALLBACK";

        $http.jsonp(url).success(function(data) { alert(data) })
    };
} 
```

为我工作：http: [//jsfiddle.net/sc0ttyd/7MUty/3/](http://jsfiddle.net/sc0ttyd/7MUty/3/)

# javascript - jQuery Autocomplete 接受带有特殊字符的匹配项

> ID：15117106
> 
> 赞同：0
> 
> 时间：2013-02-27T16:24:39.187
> 
> 标签：javascript, jquery

我有以下设置。一个运行良好的自动完成功能。我也找到了删除特殊字符的功能，它似乎有效，但我无法做到我需要的。

我真正需要的是匹配带有 & 不带特殊字符的自动完成结果。因此，例如在下面的第一个元素中的代码中`availableTags`是`Ábelová`。我需要修改它，以便`Ábelová`在用户键入时自动完成匹配`Abelova`。

任何人都可以帮忙吗？

```
bdiak = "áäčďéěíĺľňóô öŕšťúů üýřžÁÄČĎÉĚÍĹĽŇÓÔ ÖŔŠŤÚŮ ÜÝŘŽ"; 
sdiak = "aacdeeillnoo orstuu uyrzAACDEEILLNOO ORSTUU UYRZ"; 
function bezdiak(form) 
{ 
    tx = ""; 
    txt = form; 
    for(p = 0; p < txt.length; p++) 
    { 
        if (sdiak.indexOf(txt.charAt(p)) != -1) 
        { 
            tx += bdiak.charAt(sdiak.indexOf(txt.charAt(p))); 
        } 
        else 
        {
            tx += txt.charAt(p); 
        }
    } 
    return tx; 
} 

$(function () {
    var availableTags = [
        { label: "Ábelová,Lučenec,Banskobystrický kraj", id: "1" },
        { label: "Abovce,Rimavská Sobota,Banskobystrický kraj", id: "2" }
    ];

    $("#tags").autocomplete({
    source: function(req, response) { 
        var re = $.ui.autocomplete.escapeRegex(req.term); 
        var matcher = new RegExp( "^" + re, "i" ); 
        response($.grep( bezdiak(availableTags), function(item){ 
        return matcher.test(item.label); 
        }) ); 
    },
    minLength: 2,
    select: function(event, ui) {
        $("#kraj").val(ui.item.id);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:39:30.870

您必须使用重音折叠方法。[http://jqueryui.com/autocomplete/#folding](http://jqueryui.com/autocomplete/#folding)

有用于重音折叠的特殊字符的完整列表：

```
var accentMap = { "ẚ": "a", "Á": "a", "á": "a", "À": "a", "à": "a", "Ă": "a", "ă": "a", "Ắ": "a", "ắ": "a", "Ằ": "a", "ằ": "a", "Ẵ": "a", "ẵ": "a", "Ẳ": "a", "ẳ": "a", "Â": "a", "â": "a", "Ấ": "a", "ấ": "a", "Ầ": "a", "ầ": "a", "Ẫ": "a", "ẫ": "a", "Ẩ": "a", "ẩ": "a", "Ǎ": "a", "ǎ": "a", "Å": "a", "å": "a", "Ǻ": "a", "ǻ": "a", "Ä": "a", "ä": "a", "Ǟ": "a", "ǟ": "a", "Ã": "a", "ã": "a", "Ȧ": "a", "ȧ": "a", "Ǡ": "a", "ǡ": "a", "Ą": "a", "ą": "a", "Ā": "a", "ā": "a", "Ả": "a", "ả": "a", "Ȁ": "a", "ȁ": "a", "Ȃ": "a", "ȃ": "a", "Ạ": "a", "ạ": "a", "Ặ": "a", "ặ": "a", "Ậ": "a", "ậ": "a", "Ḁ": "a", "ḁ": "a", "Ⱥ": "a", "ⱥ": "a", "Ǽ": "a", "ǽ": "a", "Ǣ": "a", "ǣ": "a", "Ḃ": "b", "ḃ": "b", "Ḅ": "b", "ḅ": "b", "Ḇ": "b", "ḇ": "b", "Ƀ": "b", "ƀ": "b", "ᵬ": "b", "Ɓ": "b", "ɓ": "b", "Ƃ": "b", "ƃ": "b", "Ć": "c", "ć": "c", "Ĉ": "c", "ĉ": "c", "Č": "c", "č": "c", "Ċ": "c", "ċ": "c", "Ç": "c", "ç": "c", "Ḉ": "c", "ḉ": "c", "Ȼ": "c", "ȼ": "c", "Ƈ": "c", "ƈ": "c", "ɕ": "c", "Ď": "d", "ď": "d", "Ḋ": "d", "ḋ": "d", "Ḑ": "d", "ḑ": "d", "Ḍ": "d", "ḍ": "d", "Ḓ": "d", "ḓ": "d", "Ḏ": "d", "ḏ": "d", "Đ": "d", "đ": "d", "ᵭ": "d", "Ɖ": "d", "ɖ": "d", "Ɗ": "d", "ɗ": "d", "Ƌ": "d", "ƌ": "d", "ȡ": "d", "ð": "d", "É": "e", "Ə": "e", "Ǝ": "e", "ǝ": "e", "é": "e", "È": "e", "è": "e", "Ĕ": "e", "ĕ": "e", "Ê": "e", "ê": "e", "Ế": "e", "ế": "e", "Ề": "e", "ề": "e", "Ễ": "e", "ễ": "e", "Ể": "e", "ể": "e", "Ě": "e", "ě": "e", "Ë": "e", "ë": "e", "Ẽ": "e", "ẽ": "e", "Ė": "e", "ė": "e", "Ȩ": "e", "ȩ": "e", "Ḝ": "e", "ḝ": "e", "Ę": "e", "ę": "e", "Ē": "e", "ē": "e", "Ḗ": "e", "ḗ": "e", "Ḕ": "e", "ḕ": "e", "Ẻ": "e", "ẻ": "e", "Ȅ": "e", "ȅ": "e", "Ȇ": "e", "ȇ": "e", "Ẹ": "e", "ẹ": "e", "Ệ": "e", "ệ": "e", "Ḙ": "e", "ḙ": "e", "Ḛ": "e", "ḛ": "e", "Ɇ": "e", "ɇ": "e", "ɚ": "e", "ɝ": "e", "Ḟ": "f", "ḟ": "f", "ᵮ": "f", "Ƒ": "f", "ƒ": "f", "Ǵ": "g", "ǵ": "g", "Ğ": "g", "ğ": "g", "Ĝ": "g", "ĝ": "g", "Ǧ": "g", "ǧ": "g", "Ġ": "g", "ġ": "g", "Ģ": "g", "ģ": "g", "Ḡ": "g", "ḡ": "g", "Ǥ": "g", "ǥ": "g", "Ɠ": "g", "ɠ": "g", "Ĥ": "h", "ĥ": "h", "Ȟ": "h", "ȟ": "h", "Ḧ": "h", "ḧ": "h", "Ḣ": "h", "ḣ": "h", "Ḩ": "h", "ḩ": "h", "Ḥ": "h", "ḥ": "h", "Ḫ": "h", "ḫ": "h", H: "h", "̱": "h", "ẖ": "h", "Ħ": "h", "ħ": "h", "Ⱨ": "h", "ⱨ": "h", "Í": "i", "í": "i", "Ì": "i", "ì": "i", "Ĭ": "i", "ĭ": "i", "Î": "i", "î": "i", "Ǐ": "i", "ǐ": "i", "Ï": "i", "ï": "i", "Ḯ": "i", "ḯ": "i", "Ĩ": "i", "ĩ": "i", "İ": "i", i: "i", "Į": "i", "ı": "i", "į": "i", "Ī": "i", "ī": "i", "Ỉ": "i", "ỉ": "i", "Ȉ": "i", "ȉ": "i", "Ȋ": "i", "ȋ": "i", "Ị": "i", "ị": "i", "Ḭ": "i", "ḭ": "i", I: "i", "ı": "i", "Ɨ": "i", "ɨ": "i", "Ĵ": "j", "ĵ": "j", J: "j", "̌": "j", "ǰ": "j", "ȷ": "j", "Ɉ": "j", "ɉ": "j", "ʝ": "j", "ɟ": "j", "ʄ": "j", "Ḱ": "k", "ḱ": "k", "Ǩ": "k", "ǩ": "k", "Ķ": "k", "ķ": "k", "Ḳ": "k", "ḳ": "k", "Ḵ": "k", "ḵ": "k", "Ƙ": "k", "ƙ": "k", "Ⱪ": "k", "ⱪ": "k", "Ĺ": "a", "ĺ": "l", "Ľ": "l", "ľ": "l", "Ļ": "l", "ļ": "l", "Ḷ": "l", "ḷ": "l", "Ḹ": "l", "ḹ": "l", "Ḽ": "l", "ḽ": "l", "Ḻ": "l", "ḻ": "l", "Ł": "l", "ł": "l", "Ł": "l", "̣": "l", "ł": "l", "̣": "l", "Ŀ": "l", "ŀ": "l", "Ƚ": "l", "ƚ": "l", "Ⱡ": "l", "ⱡ": "l", "Ɫ": "l", "ɫ": "l", "ɬ": "l", "ɭ": "l", "ȴ": "l", "Ḿ": "m", "ḿ": "m", "Ṁ": "m", "ṁ": "m", "Ṃ": "m", "ṃ": "m", "ɱ": "m", "Ń": "n", "ń": "n", "Ǹ": "n", "ǹ": "n", "Ň": "n", "ň": "n", "Ñ": "n", "ñ": "n", "Ṅ": "n", "ṅ": "n", "Ņ": "n", "ņ": "n", "Ṇ": "n", "ṇ": "n", "Ṋ": "n", "ṋ": "n", "Ṉ": "n", "ṉ": "n", "Ɲ": "n", "ɲ": "n", "Ƞ": "n", "ƞ": "n", "ɳ": "n", "ȵ": "n", N: "n", "̈": "n", n: "n", "̈": "n", "Ó": "o", "ó": "o", "Ò": "o", "ò": "o", "Ŏ": "o", "ŏ": "o", "Ô": "o", "ô": "o", "Ố": "o", "ố": "o", "Ồ": "o", "ồ": "o", "Ỗ": "o", "ỗ": "o", "Ổ": "o", "ổ": "o", "Ǒ": "o", "ǒ": "o", "Ö": "o", "ö": "o", "Ȫ": "o", "ȫ": "o", "Ő": "o", "ő": "o", "Õ": "o", "õ": "o", "Ṍ": "o", "ṍ": "o", "Ṏ": "o", "ṏ": "o", "Ȭ": "o", "ȭ": "o", "Ȯ": "o", "ȯ": "o", "Ȱ": "o", "ȱ": "o", "Ø": "o", "ø": "o", "Ǿ": "o", "ǿ": "o", "Ǫ": "o", "ǫ": "o", "Ǭ": "o", "ǭ": "o", "Ō": "o", "ō": "o", "Ṓ": "o", "ṓ": "o", "Ṑ": "o", "ṑ": "o", "Ỏ": "o", "ỏ": "o", "Ȍ": "o", "ȍ": "o", "Ȏ": "o", "ȏ": "o", "Ơ": "o", "ơ": "o", "Ớ": "o", "ớ": "o", "Ờ": "o", "ờ": "o", "Ỡ": "o", "ỡ": "o", "Ở": "o", "ở": "o", "Ợ": "o", "ợ": "o", "Ọ": "o", "ọ": "o", "Ộ": "o", "ộ": "o", "Ɵ": "o", "ɵ": "o", "Ṕ": "p", "ṕ": "p", "Ṗ": "p", "ṗ": "p", "Ᵽ": "p", "Ƥ": "p", "ƥ": "p", P: "p", "̃": "p", p: "p", "̃": "p", "ʠ": "q", "Ɋ": "q", "ɋ": "q", "Ŕ": "r", "ŕ": "r", "Ř": "r", "ř": "r", "Ṙ": "r", "ṙ": "r", "Ŗ": "r", "ŗ": "r", "Ȑ": "r", "ȑ": "r", "Ȓ": "r", "ȓ": "r", "Ṛ": "r", "ṛ": "r", "Ṝ": "r", "ṝ": "r", "Ṟ": "r", "ṟ": "r", "Ɍ": "r", "ɍ": "r", "ᵲ": "r", "ɼ": "r", "Ɽ": "r", "ɽ": "r", "ɾ": "r", "ᵳ": "r", "ß": "s", "Ś": "s", "ś": "s", "Ṥ": "s", "ṥ": "s", "Ŝ": "s", "ŝ": "s", "Š": "s", "š": "s", "Ṧ": "s", "ṧ": "s", "Ṡ": "s", "ṡ": "s", "ẛ": "s", "Ş": "s", "ş": "s", "Ṣ": "s", "ṣ": "s", "Ṩ": "s", "ṩ": "s", "Ș": "s", "ș": "s", "ʂ": "s", S: "s", "̩": "s", s: "s", "̩": "s", "Þ": "t", "þ": "t", "Ť": "t", "ť": "t", T: "t", "̈": "t", "ẗ": "t", "Ṫ": "t", "ṫ": "t", "Ţ": "t", "ţ": "t", "Ṭ": "t", "ṭ": "t", "Ț": "t", "ț": "t", "Ṱ": "t", "ṱ": "t", "Ṯ": "t", "ṯ": "t", "Ŧ": "t", "ŧ": "t", "Ⱦ": "t", "ⱦ": "t", "ᵵ": "t", "ƫ": "t", "Ƭ": "t", "ƭ": "t", "Ʈ": "t", "ʈ": "t", "ȶ": "t", "Ú": "u", "ú": "u", "Ù": "u", "ù": "u", "Ŭ": "u", "ŭ": "u", "Û": "u", "û": "u", "Ǔ": "u", "ǔ": "u", "Ů": "u", "ů": "u", "Ü": "u", "ü": "u", "Ǘ": "u", "ǘ": "u", "Ǜ": "u", "ǜ": "u", "Ǚ": "u", "ǚ": "u", "Ǖ": "u", "ǖ": "u", "Ű": "u", "ű": "u", "Ũ": "u", "ũ": "u", "Ṹ": "u", "ṹ": "u", "Ų": "u", "ų": "u", "Ū": "u", "ū": "u", "Ṻ": "u", "ṻ": "u", "Ủ": "u", "ủ": "u", "Ȕ": "u", "ȕ": "u", "Ȗ": "u", "ȗ": "u", "Ư": "u", "ư": "u", "Ứ": "u", "ứ": "u", "Ừ": "u", "ừ": "u", "Ữ": "u", "ữ": "u", "Ử": "u", "ử": "u", "Ự": "u", "ự": "u", "Ụ": "u", "ụ": "u", "Ṳ": "u", "ṳ": "u", "Ṷ": "u", "ṷ": "u", "Ṵ": "u", "ṵ": "u", "Ʉ": "u", "ʉ": "u", "Ṽ": "v", "ṽ": "v", "Ṿ": "v", "ṿ": "v", "Ʋ": "v", "ʋ": "v", "Ẃ": "w", "ẃ": "w", "Ẁ": "w", "ẁ": "w", "Ŵ": "w", "ŵ": "w", W: "w", "̊": "w", "ẘ": "w", "Ẅ": "w", "ẅ": "w", "Ẇ": "w", "ẇ": "w", "Ẉ": "w", "ẉ": "w", "Ẍ": "x", "ẍ": "x", "Ẋ": "x", "ẋ": "x", "Ý": "y", "ý": "y", "Ỳ": "y", "ỳ": "y", "Ŷ": "y", "ŷ": "y", Y: "y", "̊": "y", "ẙ": "y", "Ÿ": "y", "ÿ": "y", "Ỹ": "y", "ỹ": "y", "Ẏ": "y", "ẏ": "y", "Ȳ": "y", "ȳ": "y", "Ỷ": "y", "ỷ": "y", "Ỵ": "y", "ỵ": "y", "ʏ": "y", "Ɏ": "y", "ɏ": "y", "Ƴ": "y", "ƴ": "y", "Ź": "z", "ź": "z", "Ẑ": "z", "ẑ": "z", "Ž": "z", "ž": "z", "Ż": "z", "ż": "z", "Ẓ": "z", "ẓ": "z", "Ẕ": "z", "ẕ": "z", "Ƶ": "z", "ƶ": "z", "Ȥ": "z", "ȥ": "z", "ʐ": "z", "ʑ": "z", "Ⱬ": "z", "ⱬ": "z", "Ǯ": "z", "ǯ": "z", "ƺ": "z", "２": "2", "６": "6", "Ｂ": "B", "Ｆ": "F", "Ｊ": "J", "Ｎ": "N", "Ｒ": "R", "Ｖ": "V", "Ｚ": "Z", "ｂ": "b", "ｆ": "f", "ｊ": "j", "ｎ": "n", "ｒ": "r", "ｖ": "v", "ｚ": "z", "１": "1", "５": "5", "９": "9", "Ａ": "A", "Ｅ": "E", "Ｉ": "I", "Ｍ": "M", "Ｑ": "Q", "Ｕ": "U", "Ｙ": "Y", "ａ": "a", "ｅ": "e", "ｉ": "i", "ｍ": "m", "ｑ": "q", "ｕ": "u", "ｙ": "y", "０": "0", "４": "4", "８": "8", "Ｄ": "D", "Ｈ": "H", "Ｌ": "L", "Ｐ": "P", "Ｔ": "T", "Ｘ": "X", "ｄ": "d", "ｈ": "h", "ｌ": "l", "ｐ": "p", "ｔ": "t", "ｘ": "x", "３": "3", "７": "7", "Ｃ": "C", "Ｇ": "G", "Ｋ": "K", "Ｏ": "O", "Ｓ": "S", "Ｗ": "W", "ｃ": "c", "ｇ": "g", "ｋ": "k", "ｏ": "o", "ｓ": "s", "ｗ": "w" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T09:17:45.543

我已经建立了 fgokalps 解决方案，以便在整个站点中为所有自动完成小部件提供变音符号转换：

```
var accentMap = {as per fgokalps post};
var normalize = function (term) {
    var ret = "";
    for (var i = 0; i < term.length; i++) {
        ret += accentMap[ term.charAt(i) ] || term.charAt(i);
    }
    return ret;
};
$.extend($.ui.autocomplete, {

    escapeRegex: function (value) {
        return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
    },

    filter: function (array, term) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegex(term), "i");
        return $.grep(array, function (value) {
            value = value.label || value.value || value;
            return matcher.test(value) || matcher.test(normalize(value));
        });
    }
}); 
```

# ruby-on-rails - Actionmailer 中电子邮件的 NoMethodError

> ID：15117120
> 
> 赞同：0
> 
> 时间：2013-02-27T16:25:24.773
> 
> 标签：ruby-on-rails, ruby, actionmailer

我的购买确认是 NoMethodError。不知道我在这里缺少什么。
NoMethodError at /purchases undefined method `email' for nil:NilClass

```
purchase_confirmationapp/mailers/purchase_mailer.rb

     #   en.purchase_mailer.purchase_confirmation.subject
8   #
9   def purchase_confirmation(purchase)
10     @greeting = "Hi"
11     
12     mail to: purchase.email, subject: "Purchase Confirmation"
13   end
14 end

createapp/controllers/purchases_controller.rb

1 class PurchasesController < InheritedResources::Base
2 before_filter :authenticate_admin_user!, :only => [:index, :edit, :update, :destroy]
3         def create
4                 @purchase = Purchase.new(params[:purchase])
5   if @purchase.save
6           PurchaseMailer.purchase_confirmation(@purchase).deliver
7   redirect_to "/thankyou"
8 else
9 
10   render :action => "new"
11 end 
```

有什么建议吗？

编辑和删除@符号后，将@purchase 更改为购买我现在收到此错误

```
 _app_views_purchase_mailer_purchase_confirmation_text_erb

1 <%= @email.purchase %>
2 
3 <%= @greeting %>, thanks for your purchase! We're on it! 

    purchase_confirmationapp/mailers/purchase_mailer.rb

7   #   en.purchase_mailer.purchase_confirmation.subject
8   #
9   def purchase_confirmation(purchase)
 10     @greeting = "Hi"
 11     
 12     mail to: purchase.email, subject: "Purchase Confirmation"
 13   end
 14 end

    createapp/controllers/purchases_controller.rb
1 class PurchasesController < InheritedResources::Base
2 before_filter :authenticate_admin_user!, :only => [:index, :edit, :update, :destroy]
3         def create
4                 @purchase = Purchase.new(params[:purchase])
5   if @purchase.save
6           PurchaseMailer.purchase_confirmation(@purchase).deliver
7   redirect_to "/thankyou"
8 else
9 
 10   render :action => "new"
 11 end

    Rendered purchase_mailer/purchase_confirmation.text.erb (2.1ms) 
```

在 176 毫秒内完成 500 内部服务器错误

```
>>NoMethodError - undefined method `purchase' for nil:NilClass:
  app/views/purchase_mailer/purchase_confirmation.text.erb:1:in `_app_views_purchase_mailer_purchase_confirmation_text_erb___3663910894988497772_70151297381080'
  (gem) actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
  (gem) activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
  (gem) actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
  (gem) actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  (gem) actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  (gem) activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  (gem) actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  (gem) actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  (gem) actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  (gem) actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
  (gem) actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
  (gem) actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
  (gem) actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
  (gem) actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
  (gem) actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:701:in `block in collect_responses_and_parts_order'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:712:in `each'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:712:in `each_template'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:697:in `collect_responses_and_parts_order'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:636:in `mail'
  app/mailers/purchase_mailer.rb:12:in `purchase_confirmation'
  (gem) actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
  (gem) actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:457:in `process'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:452:in `initialize'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:439:in `new'
  (gem) actionmailer-3.2.8/lib/action_mailer/base.rb:439:in `method_missing'
  app/controllers/purchases_controller.rb:6:in `create'
  (gem) actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  (gem) actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
  (gem) actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
  (gem) actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:414:in `_run__3758076575822448262__process_action__1783438763289863484__callbacks'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
  (gem) actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
  (gem) actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  (gem) activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  (gem) actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  (gem) activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  (gem) actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
  (gem) actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  (gem) actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
  (gem) actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  (gem) actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
  (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `each'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
  (gem) better_errors-0.3.2/lib/better_errors/middleware.rb:51:in `app_call'
  (gem) better_errors-0.3.2/lib/better_errors/middleware.rb:45:in `call'
  (gem) warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
  (gem) warden-1.2.1/lib/warden/manager.rb:34:in `catch'
  (gem) warden-1.2.1/lib/warden/manager.rb:34:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  (gem) rack-1.4.1/lib/rack/etag.rb:23:in `call'
  (gem) rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
  (gem) rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
  (gem) rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
  (gem) activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
  (gem) activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1428976172628906859__call__3073148256851134214__callbacks'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  (gem) activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  (gem) railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
  (gem) railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  (gem) rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
  (gem) rack-1.4.1/lib/rack/runtime.rb:17:in `call'
  (gem) activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  (gem) rack-1.4.1/lib/rack/lock.rb:15:in `call'
  (gem) actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
  (gem) railties-3.2.8/lib/rails/engine.rb:479:in `call'
  (gem) railties-3.2.8/lib/rails/application.rb:223:in `call'
  (gem) rack-1.4.1/lib/rack/content_length.rb:14:in `call'
  (gem) railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
  (gem) rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
  /Users/russell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/russell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/russell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:21:35.537

您需要先分配 ，`instance variable`然后才能在视图中使用它们。在您的情况下，它的`purchase`变量。所以让邮件方法看起来像这样

```
 def purchase_confirmation(purchase)
    @greeting = "Hi"
    @purchase = purchase
    mail to: purchase.email, subject: "Purchase Confirmation"
  end
end 
```

在视图中你应该这样做

```
<%= @purchase.email %>

<%= @greeting %>, thanks for your purchase! We're on it! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:59:39.947

另一种选择是让您的实例变量可供其他类访问：

```
 class PurchasesController < InheritedResources::Base
 #adding this will allow you to access the instance variable in other classes. 
 attr_accessor :purchase
2 before_filter :authenticate_admin_user!, :only => [:index, :edit, :update, :destroy]
3         def create
4                 @purchase = Purchase.new(params[:purchase])
5   if @purchase.save
6           PurchaseMailer.purchase_confirmation(@purchase).deliver
7   redirect_to "/thankyou"
8 else
9 
10   render :action => "new"
11 end 
```

# java - 在 .xls .xls.part 的 .xls.part 的 firefox 中使用 javascript 导出到 excel

> ID：15117122
> 
> 赞同：0
> 
> 时间：2013-02-27T16:25:35.730
> 
> 标签：java, javascript, firefox, export-to-excel

```
<!DOCTYPE html>
<html>
<head>
<title>tableToExcel Demo</title>
<script>
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
  }
})()
</script>

</head>
<body>

<h1>tableToExcel Demo</h1>
<p>Exporting the W3C Example Table</p>

<input type="button" onclick="tableToExcel('testTable', 'W3C Example Table')" value="Export to Excel">

<table id="testTable" summary="Code page support in different versions of MS Windows." rules="groups" frame="hsides" border="2"><caption>CODE-PAGE SUPPORT IN MICROSOFT WINDOWS</caption><colgroup align="center"></colgroup><colgroup align="left"></colgroup><colgroup span="2" align="center"></colgroup><colgroup span="3" align="center"></colgroup><thead valign="top"><tr><th>Code-Page<br>ID</th><th>Name</th><th>ACP</th><th>OEMCP</th><th>Windows<br>NT 3.1</th><th>Windows<br>NT 3.51</th><th>Windows<br>95</th></tr></thead><tbody><tr><td>1200</td><td style="background-color: #00f; color: #fff">Unicode (BMP of ISO/IEC-10646)</td><td></td><td></td><td>X</td><td>X</td><td>*</td></tr><tr><td>1250</td><td style="font-weight: bold">Windows 3.1 Eastern European</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1251</td><td>Windows 3.1 Cyrillic</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1252</td><td>Windows 3.1 US (ANSI)</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1253</td><td>Windows 3.1 Greek</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1254</td><td>Windows 3.1 Turkish</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1255</td><td>Hebrew</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1256</td><td>Arabic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1257</td><td>Baltic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1361</td><td>Korean (Johab)</td><td>X</td><td></td><td></td><td>**</td><td>X</td></tr></tbody><tbody><tr><td>437</td><td>MS-DOS United States</td><td></td><td>X</td><td>X</td><td>X</td><td>X</td></tr><tr><td>708</td><td>Arabic (ASMO 708)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>709</td><td>Arabic (ASMO 449+, BCON V4)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>710</td><td>Arabic (Transparent Arabic)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>720</td><td>Arabic (Transparent ASMO)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr></tbody></table>

</body>
</html> 
```

我正在使用此代码将 html tabe 导出到 firefox 中的 excel，而 .xls .xls.part 的导出已开始。

如果我点击保存 .xls.part 它正在保存，请在我点击打开时帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:27:21.313

据我所知，Firefox 总是附加`.part`到正在进行的下载中。您是否下载了整个文件并且 .part 仍然存在？

# java - 从字符串转换为整数 java jdk 1.6

> ID：15117125
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:25:54.293
> 
> 标签：java, type-conversion

好吧，我最近开始学习java编码，还有一些需要解决的问题。

我只是在转换内部带有特殊参数的字符串时遇到了这个问题（例如“3 ^ 5 + 7 * 10”或“（1/2）”）。在这种情况下， Integer.parseInt 返回一个错误，指出不支持该数字。实际代码是：

```
int i = Integer.parseInt("5*3^2+3^2"); 
```

提前致谢 ：）

更新：我可以使用另一个库来进行转换吗，AFAIK 这在 C# 中曾经非常容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:29:30.607

您不能将这样的表达式发送到 parseInt。它旨在将给定的数字字符串表示形式转换为整数。您必须获得表达式的解决方案，*然后*将结果传递给 parseInt。尽管如果您在 java 代码中获得解决方案，那么无论如何它都会是一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:32:02.357

您将不得不自己编写代码来解析字符串并对其进行评估，我会亲自将其分解为标记并对其进行评估。

或者，这里有一个例子，有人使用 Java 的脚本功能来做到这一点。 [java的代数方程解析器](https://stackoverflow.com/questions/4681959/algebra-equation-parser-for-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:29:47.160

这是因为 parseInt 将解析一个正确的**数字**字符串值。这是一个完整的数学表达式。

String 无法在其内部计算数学运算，因为它仅包含它所知道的字符和其他任何字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T18:27:00.340

好的，自己找到了解决方案。使用 JDK 1.6，您可以使用 JavaScript，它在此类转换中与 C# 一样强大。太糟糕了，以至于使用 java 是如此痛苦。我认为大多数程序员使用 C++ 是有原因的。您可以[在此处查看实际答案](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)，也不要忘记投票。

# java - 子类构造函数方法可以覆盖超类构造函数吗？“爪哇”

> ID：15117126
> 
> 赞同：0
> 
> 时间：2013-02-27T16:25:56.327
> 
> 标签：java, overriding, superclass

子类构造函数方法是否可以覆盖超类构造函数？因为我有一个问题 - 超类（学生），子类（学士学生），它问我学士学生类的构造方法必须覆盖学生类。问题是有错误还是有问题？tq。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:27:32.217

构造函数永远不会被覆盖或继承。事实上，它们不能被虚拟调用。

但是，您可以在子类中创建一个构造函数，该构造函数调用父类中的构造函数。

# python - h5py 内存中文件和多处理错误

> ID：15117128
> 
> 赞同：1
> 
> 时间：2013-02-27T16:26:01.060
> 
> 标签：python, multiprocessing, hdf5, in-memory, h5py

这是给你的 HDF5*和*多处理专家...首先，我知道 python h5py 和多处理模块不一定彼此喜欢，但是我遇到了一个我无法弄清楚的错误。我正在处理的脚本创建一个临时*的内存中*hdf5 文件，将来自（pickle）输入文件的数据存储在内存文件中，然后一个多处理池对来自 temp 的数据执行（只读）操作HDF5 文件。

我已经能够隔离导致错误的代码，所以这里有一个简化的代码片段。当我在生成器函数中创建*内存中的*hdf5 文件，然后使用该生成器为多处理池生成参数时，我得到了一系列 HDF5 错误。这里有一些代码很简单，我可以让它重新创建错误：

```
import h5py
from multiprocessing import Pool
from itertools import imap

useMP = True

def doNothing(arg):
    print "Do nothing with %s"%arg

def myGenerator():
    print "Create hdf5 in-memory file..."
    hdfFile = h5py.File('test.hdf',driver='core',backing_store=False)
    print "Finished creating hdf5 in-memory file."
    yield 3.14159
    '''
    # uncommenting this section will result in yet another HDF5 error.
    print "Closing hdf5 in-memory file..."
    hdfFile.close()
    print "Finished closing hdf5 in-memory file."
    '''

if useMP:
    pool = Pool(1)
    mapFunc = pool.imap
else:
    mapFunc = imap

data = [d for d in mapFunc(doNothing,myGenerator())] 
```

当我使用 itertools.imap（设置“useMP=False”）时，我得到以下输出，如预期的那样：

```
Create hdf5 in-memory file...
Finished creating hdf5 in-memory file.
Do nothing with 0 
```

但是当我使用 Pool.imap 时，即使池仅使用单个工作线程创建，我也会得到以下输出：

```
Create hdf5 in-memory file...
HDF5-DIAG: Error detected in HDF5 (1.8.9) thread 139951680009984:
  #000: ../../../src/H5F.c line 1538 in H5Fopen(): unable to open file
    major: File accessability
    minor: Unable to open file
  #001: ../../../src/H5F.c line 1227 in H5F_open(): unable to open file: time = Wed Feb 27 09:32:32 2013
, name = 'test.hdf', tent_flags = 1
    major: File accessability
    minor: Unable to open file
  #002: ../../../src/H5FD.c line 1101 in H5FD_open(): open failed
    major: Virtual File Layer
    minor: Unable to initialize object
  #003: ../../../src/H5FDcore.c line 464 in H5FD_core_open(): unable to open file
    major: File accessability
    minor: Unable to open file
Finished creating hdf5 in-memory file.
Do nothing with 0 
```

奇怪的是，这个错误不会使程序崩溃。我正在编写的导致此错误的脚本实际上按我的预期工作 - 但它为它创建的每个内存文件提供了上述错误。使用 itertools.imap 时没有错误，读取现有 HDF5 文件时没有错误，只有多处理和内存中 HDF5 文件的组合。

h5py 版本 2.1.1

hdf5 版本 1.8.9

Python 版本 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:52:36.427

在挖掘了一些 h5py 文件之后，我找到了一个部分答案，尽管仍然不完整。h5py.File 类在[h5py/_hl/files.py](https://github.com/h5py/h5py/blob/master/h5py/_hl/files.py)中定义。在调用 make_fid() 的 File 对象创建期间发生错误：

```
def make_fid(name, mode, userblock_size, fapl):
    """ Get a new FileID by opening or creating a file.
    Also validates mode argument."""
    ...
    elif mode == 'a' or mode is None:
        try:
            fid = h5f.open(name, h5f.ACC_RDWR, fapl=fapl)
            try:
                existing_fcpl = fid.get_create_plist()
                if userblock_size is not None and existing_fcpl.get_userblock() != userblock_size:
                    raise ValueError("Requested userblock size (%d) does not match that of existing file (%d)" % (userblock_size, existing_fcpl.get_userblock()))
            except:
                fid.close()
                raise
        except IOError:
            fid = h5f.create(name, h5f.ACC_EXCL, fapl=fapl, fcpl=fcpl) 
```

如果文件存在，则以读/写模式打开。如果它不存在（内存文件就是这种情况），则 h5f.open() 调用会引发异常。正是这个对 h5f.open 的调用触发了 H5Fopen() 错误消息。

仍然悬而未决的问题是为什么仅在使用多处理时才打印错误？首先，我假设创建 HDF5 文件的生成器函数被主线程调用。好吧，事实并非如此。多处理池实际上创建了一个新线程来处理 imap 和 imap_unordered 的任务，但不用于 map/map_async。将pool.imap替换为pool.map，从主线程调用生成器函数，不打印错误信息。那么为什么在单独的线程中创建 HDF5 文件会引发错误呢？

**- - - - 更新 - - - - - -**

显然，h5py 会自动在主线程中使 HDF5 错误消息静音，因为 h5py 会处理错误。但是，它还不会自动使子线程中的错误静音。解决办法：`h5py._errors.silence_errors()`。此函数禁用当前线程中的自动 HDF5 错误打印。见 h5py[问题 206](https://code.google.com/p/h5py/issues/detail?id=206)。此代码使 HDF5 错误静音：

```
import h5py
from multiprocessing import Pool
from itertools import imap
import threading

useMP = True

def doNothing(arg):
    print "Do nothing with %s"%arg

def myGenerator():
    h5py._errors.silence_errors()
    print "Create hdf5 in-memory file..."
    hdfFile = h5py.File('test.hdf',driver='core',backing_store=False)
    print "Finished creating hdf5 in-memory file."
    yield 3.14159

if useMP:
    pool = Pool(1)
    mapFunc = pool.map
else:
    mapFunc = imap

data = [d for d in mapFunc(doNothing,myGenerator())] 
```

# javascript - 在 Angular JS 中将许多方法作为一项服务执行 AJAX 操作

> ID：15117130
> 
> 赞同：1
> 
> 时间：2013-02-27T16:26:01.783
> 
> 标签：javascript, ajax, angularjs

我正在编写一个应用程序，我必须在其中编写许多执行 AJAX 操作的函数。我想将所有这些功能放在一个模块中的一个服务下，并在需要时在控制器中调用这些功能。我知道它可以使用 Angular JS 模块来完成，但没有找到正确的方法来解决它。

谁能帮我这个？如果您可以通过示例进行演示，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:44:34.577

实际上，我不久前对此做了一个简短的[博客文章](http://www.benlesh.com/2013/02/angularjs-creating-service-with-http.html)。

基本示例：

```
var app = angular.module('myApp', []);

//create a service:
app.factory('myService', function($http) {
   return {
      getFoo: function(success) {
        $http.get('/Foo/Url/Here').success(success);
      }
   }
});

//use it in a controller
app.controller('MyCtrl', function($scope, myService) {
    myService.getFoo(function(data) {
        $scope.foo = data;
    });
}); 
```

使用 $http 和 $q 以获得更流畅的结果的示例。

```
var app = angular.module('myApp', []);

//create a service:
app.factory('myService', function($http, $q) {
   return {
      getFoo: function() {
          var deferred = $q.defer();
          $http.get('/Foo/Url/Here').success(function(data) {
              deferred.resolve(data);
          }).error(function(){
              deferred.reject();
          });
          return deferred.promise;
      }
   }
});

//use it in a controller
app.controller('MyCtrl', function($scope, myService) {
    $scope.foo = myService.getFoo();
}); 
```

# java - 数组列表 使用 get/remove 方法

> ID：15117132
> 
> 赞同：6
> 
> 时间：2013-02-27T16:26:08.897
> 
> 标签：java, android, list, arraylist, integer

当我在 Java 中使用 ArrayList 时，有些东西我不明白。这是我的初始化代码：

```
 ArrayList<Integer> list = new ArrayList <Integer> ();
list.add (0);
list.add (1); 
```

有时我需要通过索引删除对象：

```
list.remove (0) // delete the object in the first box 
```

但有时我想通过其内容删除一个对象：

```
list.remove (0) // delete the object HAS Which value of 0 
```

这段代码非常模棱两可。为了阐明我想在代码中执行的操作，我指定了这样的类型：

```
list.remove ((Object) 0) // delete the object which has a value of 0 
```

如果我不交流，唯一知道调用了哪些方法的方法是将鼠标指针放在方法上查看： java.util.ArrayList.remove boolean (Object object)

Java 但是它有什么不同呢？有方法指针吗？有没有一种不那么模棱两可的方法来做到这一点？

非常感谢，对不起我的英语。

PS：我应该说我终于使用了 SparseIntArray 但我很好奇

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T16:29:19.717

对于陈述者。[**List#remove(index)**](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28int%29)返回从列表中删除的对象。[**List#remove(Object)**](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)返回一个布尔值。

然而，在这种特殊情况下。你可以做。

```
 ArrayList<Integer> list = new ArrayList <Integer> ();
        list.add (0);
        list.add (1);
        System.out.println(list.remove(new Integer(0))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:36:46.713

每当 Java 中存在歧义时（当多个方法签名可以*在编译时*匹配参数的类型时），使用强制类型转换来选择正确的方法是您唯一的选择。当然，您可以在实际调用之前将参数转换并存储到正确类型的局部变量中，但这并不能让读者更清楚 - 在我看来，将参数直接转换到使用它的位置是最好的选择，明确调用哪个方法。

By the way the reason the API is so ambiguous in this case is that at the time the API was made, there was no Auto-Boxing so it was not possible to write ambiguous code like this in the first place. However changing the method to make it unambiguous would have been a breaking change. Since storing Integer in an ArrayList isn't that great of an idea anyway most of the time, they decided to let us live with that slight annoyance.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T16:43:02.617

If it is just the ambiguity with the remove() method in Integer ArrayList is bothering you, you can extend the ArrayList to implement your own :

```
public class MyIntArrayList extends ArrayList<Integer> {

    boolean removeByObject(Integer intObj) {
        return super.remove(intObj);
    }

    Integer removeByIndex(int index) {
        return super.remove(index);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:44:39.480

You could use `list.remove(new Integer(0))` to surely remove the object

# c# - 带有列表的列表视图 and multiple properties as a datasource Is it possible to bind a List to a ListView and use more than one property as display members? The object contains in total 3 prope 问问题 问问题 2013-02-27T16:26:08.333 1717 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is it possible to bind a List to a ListView and use more than one property as display members? The object contains in total 3 properties: String name; String email; Int cost; Please refrain from using for/foreach/while loops as I'm looking for a solution that utilizes databinding. create a custom property with only getter and combine properties in the getter c#listview 4 3 回答 3 This answer is useful 1 use a dataview ( with databinding if you are in WPF ) 于 2013-02-27T16:35:54.167 回答 This answer is useful 0 If you are using WinForms, instead of using ListView, you can use an ObjectListView, which I find is an easier way to hold classes in that type of control without all the casting problems. However, if you are using a ListView you will have to suck it up and add in each item individually. 于 2013-02-27T16:41:07.617 回答 This answer is useful 0 创建一个只有 getter 的自定义属性，并在 getter 中组合属性 于 2013-02-27T16:32:31.390 回答 Related 1 ruby-on-rails - 如何检索与散列数组中存在的散列键相关的值 2 php - PHP：在字符串块中插入 PHP 变量 3 java - 在 C++ 中是否有类似的可能 1 svg - 在中使用 SVG 字体 1 javascript - 使用 Leaflet 的 locate() 时检查用户是否共享位置 3 sql - 返回每组的前 3 行 4 javascript - 限制文本区域中单行的行数和字母数 1 xml - 替换 PostgreSQL 中的符号字符 2 python - Jinja 按字母顺序对混合大小写的列表进行排序 2 extjs - ExtJS 4.1 - JSON 中关联的嵌套 hasOne Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15117133
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, listview

Is it possible to bind a `List<object>` to a `ListView` and use more than one property as display members?

The object contains in total 3 properties:

```
String name;
String email;
Int cost; 
```

Please refrain from using for/foreach/while loops as I'm looking for a solution that utilizes databinding.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:35:54.167

use a [dataview](http://msdn.microsoft.com/fr-fr/library/system.data.dataview%28v=vs.80%29.aspx) ( with databinding if you are in WPF )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:41:07.617

If you are using WinForms, instead of using `ListView`, you can use an [`ObjectListView`](http://objectlistview.sourceforge.net/cs/index.html), which I find is an easier way to hold classes in that type of control without all the casting problems.

However, if you are using a `ListView` you will have to suck it up and add in each item individually.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:32:31.390

创建一个只有 getter 的自定义属性，并在 getter 中组合属性

# android - Phonegap 插件。onActivityResult 在结束前启动

> ID：15117134
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:11.987
> 
> 标签：android, cordova, android-asynctask, phonegap-plugins

我正在开发一个 phonegap 插件来启动一项活动。我使用“ *startActivityForResult* ”方法启动活动，但在活动结束之前触发了“ *onActivityResult* ”方法，因此我无法管理活动的结果。

这是插件的代码：

```
package com.phonegap.plugin.escanerDocumentos;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.visualtaggingservices.scandoc.ScanDocConstants;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

public class EscanerDocumentos extends Plugin {

private static final int SCANDOC_REQUEST_RESULT = 1;    
public static final String PATH_ME="path_mem_ext";
public static final String PATH_MI="path_mem_int";
public String strFilename="inicializado";
private  String callback=null ;
//public static final String COMPRESS="compress";
final static String TARGET_BASE_PATH = Environment.getExternalStorageDirectory().getAbsolutePath()+"/";

@Override
public PluginResult execute(String action, JSONArray args, String callbackId) {
    this.callback = callbackId;

    if (action.equalsIgnoreCase("EscanerDocumentos")) {
    Escanea();
    }
    PluginResult r = new PluginResult(PluginResult.Status.NO_RESULT);
    r.setKeepCallback(true);
    return r;
}

public EscanerDocumentos() {
}

private void Escanea() {
    Uri uri = Uri.parse("scandoc://com.visualtaggingservices.scandoc");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    intent.putExtra(ScanDocConstants.SCANDOC_KEY_PICTURE_WIDTH, ScanDocConstants.PICTURE_WIDTH);
    intent.putExtra(ScanDocConstants.SCANDOC_KEY_PICTURE_HEIGHT, ScanDocConstants.PICTURE_HEIGHT);
    this.cordova.startActivityForResult((Plugin)this,intent,SCANDOC_REQUEST_RESULT);

}

// ===================================================================
// ON_ACTIVITY_RESULT
// -------------------------------------------------------------------
/**
 * Funcion que obtiene el resultado de la Actividad.
 * @param requestCode   Codigo de la actividad que finaliza.
 * @param resultCode    Resultado de la actividad que finaliza.
 * @param data          Datos de la actividad que finaliza.
 */
// ===================================================================
@Override 
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    Log.d("EscanerDocumentos", "onActivityResult");
    if (requestCode == SCANDOC_REQUEST_RESULT)
    {
        if (resultCode == Activity.RESULT_OK)
        {
            Bundle bundle = data.getExtras();
             strFilename = bundle.getString(ScanDocConstants.SCANDOC_KEY_FILENAME);
             JSONObject obj = new JSONObject();
                try {
                    obj.put("filename", bundle.getString(ScanDocConstants.SCANDOC_KEY_FILENAME));
                    obj.put("signed", bundle.getString(ScanDocConstants.SCANDOC_KEY_SIGNED));
                }
                catch(JSONException e) {
                    Log.e("EscanerDocumentos", "Error al devolver el resultado");
                }
                Log.d("EscanerDocumentos", "Devolvemos el pluginResult");
                this.success(new PluginResult(PluginResult.Status.OK, obj), this.callback);
        }
    }
} 
```

}

谢谢你的帮助！！！

# css - twitter bootstrap 中同一行的按钮

> ID：15117135
> 
> 赞同：2
> 
> 时间：2013-02-27T16:26:12.560
> 
> 标签：css, ruby, twitter-bootstrap, haml

有按钮和一个按钮组

```
%button.btn{type: :submit}button1
%button.btn{type: :submit}button2
%button.btn{type: :submit}button3

.btn-group{"data-toggle" => "buttons-radio"}
  %button.btn.btn-primary.active{type: :button}
    button4
  %button.btn.btn-primary.active{type: :button}
    button5
  %button.btn.btn-primary.active{type: :button}
    button6
  %button.btn.btn-primary.active{type: :button}
    button7 
```

我希望所有这 7 个按钮都在同一行。现在它们在不同的线上：前 3 个在一条线上，其余的在不同的线上。即使我添加 div 并将它们全部放入其中，也没有任何变化。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:43:20.450

问题是 using`.btn-group`创建了一个`<div>`with 类`btn-group`- div 通常是块级元素（除非您以其他方式设置它们的样式），因此它们自己占据了一整行。

为了解决这个问题，您可以做的就是使用跨度：

```
%span.btn-group{"data-toggle" => "buttons-radio"}
  %button ... etc ... 
```

按钮仍将按预期运行 - Bootstrap 不关心您的按钮组是跨度还是 div。

这是一个[例子](http://jsfiddle.net/NVHNv/)。

# sql - SQL 查询：获取计数

> ID：15117136
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:16.037
> 
> 标签：sql, sql-server, count

需要有关 MS SQL 查询的建议：

表：学生

```
id  name    class
--  ----    -----
1   John    Math, Biology
2   Jane    English
3   Mark    Math 
```

表：类

```
id  name
--  ----
1   Math
2   English
3   Biology
4   History 
```

期望的输出

```
name        count
----        -----
Math        2
English     1
Biology     1
History     0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:27:54.633

 ~~这是为了`MySQL`.

```
SELECT  a.name, COUNT(b.id) as `totalCount`
FROM    class a
        LEFT JOIN students b
            ON FIND_IN_SET(a.name, b.class) > 0
GROUP   BY a.name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f3798/1)

 ~~为了获得最佳性能，请通过创建 3 个表来规范化表，

学生们

*   身份证（PK）
*   姓名

班级

*   身份证（PK）
*   姓名

学生班

*   学生证 (FK)
*   类 ID (FK)

这是一种`many-to-many`关系，因为学生可能有很多班级，而班级也有很多学生。

查询应该是这样的，

```
SELECT  a.Name, COUNT(b.ClassID) totalCount
FROM    Class a
        LEFT JOIN StudentClass b
          ON a.id = b.ClassID
GROUP   BY a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fbe2c4/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:29:36.080

这是 SQL Server 的答案：

```
SELECT  c.name, COUNT(b.id) as `totalCount`
FROM class c LEFT JOIN
     students s
     ON ','+s.class+',' like '%,'+a.name+',%'
GROUP BY c.name 
```

实际上，这不适用于类名中的空格。试试这个`on`：

```
 ON ','+replace(s.class, ' ', '')+',' like '%,'+replace(a.name, ' ', '')+',%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:36:36.583

```
select 
class.name as name, 
count(*) as count 
from students, class 
where students.class like '%'+class.name+'%' 
```~~~~

# ios - 本地化会产生奇怪的行为，请指教

> ID：15117138
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:18.910
> 
> 标签：ios, objective-c, localization, nsstring

嗯，我没有我想的那么聪明。一整天都在为几行代码苦苦挣扎。

```
char latChar = (actLat > 0) ? 'N' : 'S';
NSString *latString = [NSString stringWithFormat:@"%c" , latChar];    
NSString *latStringLocal = [NSString stringWithFormat:NSLocalizedString(@"%c",nil), latString]; 
```

在第一行： wich 字符是正确的。纬度 > 0 度是 N，< 0 是 S。这行得通。在第二行中，我将 char 转换为字符串。也可以。在第三行中，一切都出错了。运行应用程序时，会显示所有类型的符号和普通字符。每一秒都是一个新的。最后一部分是可以理解的，因为 locationmanager 会不断更新。

但为什么是那些字符？我在这里做错了什么？查看两个 localizable.strings 文件

en.lproj

```
"N" = "N";
"S" = "S";
"W" = "W"; 
"E" = "E"; 
```

项目

```
"N" = "N";
"S" = "Z";
"W" = "W";
"E" = "O"; 
```

应用程序显示名称工作正常，因此可以在“读取”中找到 .strings 文件。请指教。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:34:31.330

我不知道你在做什么`NSLocalizedString()`；第一个论点应该是`@"N"`，`@"S"`而不是`@"%c"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:52:54.643

我会这样写：

```
NSString *latStringLocal = actLat > 0 ? NSLocalizedString(@"N", @"North abbreviation") : NSLocalizedString(@"S", @"South abbreviation"); 
```

然后重新生成英文字符串：

```
find . -name \*.m | xargs genstrings 
```

en.lproj/Localizable.strings 将包含：

```
/* North abbreviation */
"N" = "N";

/* South abbreviation */
"S" = "S"; 
```

…并且 nl.lproj/Localizable.strings 应该包含：

```
/* North abbreviation */
"N" = "N";

/* South abbreviation */
"S" = "Z"; 
```

请注意，*genstrings*实用程序不喜欢 NSLocalizedString 的可变参数（不会为其生成密钥）。但是在运行时 - 如果密钥存在`[NSBundle.mainBundle localizedStringForKey:(key) value:@"" table:nil]`- 一切都应该工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T16:34:21.600

```
NSString *latStringLocal =  NSLocalizedString((actLat > 0) ? @"N" : @"Y", @""); 
```

# joomla2.5 - Joomla：是否可以将模块链接到备用布局

> ID：15117140
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:22.087
> 
> 标签：joomla2.5

我有一个模板需要在某些页面的标题中包含一个部分。我可以为此使用一个模块。但 in 仅显示在某些页面上，这需要在文章级别确定。所以“文章a”会有额外的内容，而“文章b”没有。我不喜欢隐藏菜单的想法，因为可能有数千篇这样的文章，而且作者需要额外的步骤。似乎最好的解决方案可能是替代布局，可以在创建或编辑文章时选择。那么问题来了，如何根据备用布局打开和关闭模块？我可以获取备用布局的值并对其进行处理（例如调用具有相同名称的文件）吗？

编辑：此时我只是想确定是否正在使用备用布局，如果是，它的名称是什么。我正在尝试在模板覆盖中访问它（templates/mytemplate/index.php）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:59:25.350

您可以调整所有页面的模块（调整某个位置），并在模板中添加一些规则以从模板中隐藏此位置，例如：

```
<?php if($articleID == 1){?><jdoc:include type="modules" name="menu" /><?php}?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:28:40.587

这就是我结束的地方。

要获得备用布局，我这样做：

```
 $article =& JTable::getInstance("content");
    $article->load(JRequest::getInt("id"));
    $attribs=new JParameter($article->attribs);
    $layout=$attribs->get("article_layout"); 
```

现在我可以引用一个文件，其中包含我想为此布局执行的任何特殊操作，如下所示：

```
 if($layout != ''){
            $layoutname=str_replace($this->template . ':', '', $layout);
            $path=JPATH_ROOT .'/templates/'. $this->template .'/html/com_content/article/' . $layoutname . '_include.php';      
            require_once $path;
        } 
```

任何需要附加部分的布局只需要在文件夹中包含另一个名为alternate_layout_name_include.php 的文件以及其他备用布局文件。

我不擅长 Joomla 或 php，所以任何提示、代码修改、输入总是受欢迎的。

# java - while循环中的语法错误

> ID：15117142
> 
> 赞同：2
> 
> 时间：2013-02-27T16:26:31.697
> 
> 标签：java

我收到一个语法错误，我不知道为什么。我正在学习编程课程，所以我的知识非常有限。这是我必须做的一个项目，也是我目前拥有的代码。我只是想测试一下，看看我是否走在正确的道路上，但我做不到。任何帮助都会非常感激，所以我至少可以看到我的下一个问题是什么哈哈。

```
import java.util.*;

public class project2 {

    public static void main(String[] args) {
        Scanner in = new Scanner (System.in);
        System.out.println("Welcome, I am thinking of a number between 1-100\. Take a guess!");
        System.out.print("Please enter your number: ");
        int guess = in.nextInt();
        Random r = new Random(101);
        int counter = 0;
        int totalcount = 6;
        While (counter != totalcount) {      // being told to insert ";" and I have no clue why
            if ( guess < r) {
                System.out.print("You guessed " + guess);
                System.out.println("Too Low");
            } else if ( guess > r) {
                System.out.print("You guessed " + guess);
                System.out.println("Too High");
            } else ( guess = r ) {
                System.out.print("You guessed " + guess);
                System.out.println("YOU'RE PSYCHIC!");
            }
            counter++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:28:34.360

您错误地大写了`While`. 它应该是`while`（全部小写）。

查看文档[while](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)。

但是，您的代码还有许多其他问题。

**首先**，如果您测试了一个数字不大于或小于它必须，根据定义是相等的。因此，您可以更改

```
else ( guess = r ) { 
```

至

```
else 
```

这对你来说是幸运的，因为`guess = r`不会测试平等。相反，它将分配`r`to的值`guess`。另外，因为`else (condition)`是语法错误。

**其次**，您正在尝试将这一行中的`int`a 与 a进行比较：`Random`

```
if ( guess < r) // r is of type Random, guess is of type Int. 
```

您实际上应该做的是使用您的`Random`来获取一个 int，例如：

```
Random rnd = new Random();
int r = rnd.nextInt();

if (guess < r) // This is now valid. 
```

**第三**，你已经为你的随机数生成器播种了 101。这意味着它总是会返回相同的数字序列。这可能是您想要的，但如果不是，您可以使用无参数构造函数以当前时间（以毫秒为单位）为其播种

```
Random rnd = new Random(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T16:28:42.790

```
else ( guess = r ) { 
```

将条件更改为注释。

```
else { // ( guess == r ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T16:28:34.960

不要将“while”一词大写。大小写在 Java 中非常重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T16:32:16.727

一堆问题。请参阅下面的修复。

1.  不要大写'While'
2.  如果您执行 else 并想检查另一个条件，请执行 'else if (...)'
3.  您无法将 int 与“随机”类型的变量进行比较。而是保存 Random.nextInt() 并进行比较
4.  比较时，请确保如果要“等于”，则使用“==”而不是“=”。后者是赋值运算符，而 '==' 是比较运算符。

    ```
     import java.util.Random;

     import java.util.Scanner;

     public class project2 {
     public static void main(final String[] args) {

        Scanner in = new Scanner(System.in);

        System.out.println("Welcome, I am thinking of a number between 1-100\. Take a guess!");

        System.out.print("Please enter your number: ");

        int guess = in.nextInt();

        Random r = new Random(101);
        int actual = r.nextInt();

        int counter = 0;

        int totalcount = 6;

        while (counter != totalcount) { // being told to insert ";" and I have no clue why

            if (guess < actual) {

                System.out.print("You guessed " + guess);

                System.out.println("Too Low");
            }

            else if (guess > actual) {

                System.out.print("You guessed " + guess);

                System.out.println("Too High");
            }

            else if (guess == actual) {

                System.out.print("You guessed " + guess);

                System.out.println("YOU'RE PSYCHIC!");

            }

            counter++;
        }

    } 
    ```

    }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T16:36:40.760

发现三样东西

1) 大写错误

2) r 是与整数比较的错误类型，它是“随机”的一个实例

3）你的意思是==而不是=

我通过将程序加载到 Eclipse 中发现了所有这些错误。我建议你找一个类似的编辑器来帮助解决这些问题！

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T16:35:11.730

改变

```
Random r = new Random(101); 
```

至

```
Random random = new Random();
int r = random.nextInt(100) + 1; 
```

您需要`int`与猜测进行比较。您使用的`Random`是随机数生成器。该`Random`方法`nextInt(int i)`返回一个介于 0（含）和`i`独占之间的数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T16:31:28.633

`guess = r`是分配而不是比较。在这种情况下，比较是不必要的，因为它是默认情况，但为了将来参考，`guess == r`是进行比较的正确方法（假设猜测是 int 或其他原语）

# java - 使用在 Plone 中运行的小程序查找 .xls 文件

> ID：15117144
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:32.953
> 
> 标签：java, resources, applet, plone

我正在开发一个在 Plone 网站内运行的 Applet。在 Plone 管理的其中一个页面中，我必须运行这个小程序，它执行以下步骤：

*   高级表单验证

*   在服务器硬盘上获取一个 excel 模板并将其复制并附加一些作为名称的数据（如 calcoloOneri.xls 变为 calcoloOneriJohnFileOne.xls）

*   将表单数据写入新创建的文件

*   将此文件发送到我创建的用于将 excel 转换为 PDF 的 Web 服务

*   让用户在他们的机器上下载 pdf

现在的问题是，由于我可能有多个不同网站的实例，仅在名称和其他方面有所不同，因此我将我的小程序参数化为在这些不同场景中的每一个中运行。我特别注意了 template.xls 文件的位置，它可能会根据站点结构/文件名的需要而有所不同。加载小程序的代码如下（取自加载的页面）：

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>var user='admin'</script>
<script>var comune='Andria'</script>
<script>var numPratica=''</script>
<script>var numPreinoltro='20482109022013'</script>
<script>var classifica=''</script>
<script>var numFascicolo=''</script>
<script>var annoFascicolo=''</script>
<script>var portalURL='http://xx.xx.xx.xx:xxxx/scia2'</script>
<script>
  var attributes = {code:'geotel.gui.Login.class', archive:'portal_url/++resource++java/GestioneOneri.jar, portal_url/++resource++java/mysql-connector-java-5.1.20-bin.jar, portal_url/++resource++java/poi-3.8-20120326.jar, portal_url/++resource++java/forms-1.3.0.jar', width:1024, height:700};
  var parameters = {jnlp_href:'portal_url/++resource++java/gestioneoneri.jnlp', nomeUtente:user, integrato:'true', portalUrl:portalURL, comune:comune, percorsoFileCalcoloOneri:'/++resource++java/', nomeFileCalcoloOneri:'calcoloOneri.xls', numPreinoltro:numPreinoltro, numPratica:numPratica, classifica:classifica, numFascicolo:numFascicolo, annoFascicolo:annoFascicolo};
  var version = '1.6';
  deployJava.runApplet(attributes, parameters, version);
</script>
<noscript>
Niente plugin java!
</noscript> 
```

正如我从 Plone 文档中读到的，++resource++ 语法允许 CMS 检索在 xml 注册表中注册的静态资源，并且我将它用于 plone .pt 文件没有问题。

因此，在阅读完所有内容后，我前往浏览器并写道：

```
http://xx.xx.xx.xx:xxxx/scia2/++resource++java/calcoloOneri.xls 
```

Chrome 会下载文件 calcoloOneri.xls，所以我认为“我必须走在正确的轨道上”。

当我将这些值传递到我的小程序中时，问题就出现了。首先，因为我可以有多个站点运行这个小程序，所以我将网站的地址作为参数（portalUrl）获取。为了检索 excel 文件的位置，我将 ++resource++java/calcoloOneri.xls 附加到门户 url，因为在浏览器中这个地址是正确的。

在我的 copyFile 方法中，我使用以下对象将 excel 模板复制到一个新模板中：

```
File f1 = new File(srFile); //srFile is "http://xx.xx.xx.xx:xxxx/scia2/++resource++java/calcoloOneri.xls"
File f2 = new File(dtFile);
InputStream in = new FileInputStream(f1);
OutputStream out = new FileOutputStream(f2);
byte[] buf = new byte[1024];
int len;
while((len = in.read(buf)) > 0)
{
   out.write(buf, 0, len);
}
in.close();
out.close(); 
```

我在我的皮肤上体验到 java.io.File 无法处理这种 url，我也无法在我的 applet 代码中使用 URL 或 URI 对象获取指向该文件的指针。

如何获得正确的字符串以将模板读入我的小程序？我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:32:04.747

您最好在 python 中使用 xlwt 库来修改 excel 文档。然后，它可以是一个简单的 Web 表单。excel 模板可以是文件内容类型对象，因此您只需从那里对文件数据进行分级，而不是进行远程调用。

否则，您可以这样做的一种方法是硬编码 excel 模板文件的路径。

如果您想从 URL 下载文件，谷歌搜索可以提供帮助：[http ://cookbooks.adobe.com/post_Download_a_file_from_a_URL_in_Java-17947.html](http://cookbooks.adobe.com/post_Download_a_file_from_a_URL_in_Java-17947.html)

无论您如何解决它，在实施时都要小心，因为接受从 Internet 下载的用户提交的值可能很危险。

# c# - 从 ASPX/C# 页面发送 APNS，使用 SSL 进行身份验证

> ID：15117145
> 
> 赞同：1
> 
> 时间：2013-02-27T16:26:34.493
> 
> 标签：c#, asp.net, ssl, push-notification, apple-push-notifications

我一直在尝试让 Windows 2008 R2 数据中心（在亚马逊上）来利用 Apple 推送通知服务——我已经看到了很多关于其中一些的问题，但是现有的答案都没有解决我的问题。我正在使用带有 TcpClient 的 SslStream 编写此代码，我将它封装在一个名为 SSLClient 的类中。我在 AuthenticateAsClient 行上不断收到“证书链是由不受信任的机构颁发的”错误消息。这是我的 SSLClient（其中大部分是从使用 SslStream 和 TcpClient 的 MSDN 示例开始的）：

```
public class SSLClient
{
    public delegate void OnSSLRequestHandler(SSLRequestEvent e);

    private string _machineName;
    private string [] _serverCertFilenames;
    private string [] _serverCertPasswords;

    public event OnSSLRequestHandler OnLoaded;

    public SSLClient(
        string machineName,
        string [] serverCertFilenames,
        string [] serverCertPasswords )
    {
        _machineName = machineName;
        _serverCertFilenames = serverCertFilenames;
        _serverCertPasswords = serverCertPasswords;
    }

    public bool ValidateServerCertificate(
          object sender,
          X509Certificate certificate,
          X509Chain chain,
          SslPolicyErrors sslPolicyErrors)
    {
       if (sslPolicyErrors == SslPolicyErrors.None)
            return true;

        // Do not allow this client to communicate with unauthenticated servers. 
        return false;
    }

    public void Load(byte[] sendData, int port = 443)  
    {
        // Create a TCP/IP client socket. 
        // machineName is the host running the server application.
        TcpClient client = new TcpClient(_machineName, port);

        // Create an SSL stream that will close the client's stream.
        SslStream sslStream = new SslStream(
            client.GetStream(), 
            false, 
            new RemoteCertificateValidationCallback (ValidateServerCertificate), 
            null
        );

        // The server name must match the name on the server certificate. 
        try 
        {
            X509Certificate2Collection xc = new X509Certificate2Collection();
            for (int i = 0; i < _serverCertFilenames.Length; i++)
            {
                string certName = _serverCertFilenames[i];
                string certPwd = _serverCertPasswords[i];

                X509Certificate2 x;
                if (certPwd != "")
                    x = new X509Certificate2(certName, certPwd);
                else
                    x = new X509Certificate2(certName);

                xc.Add(x);
            }

            sslStream.AuthenticateAsClient(_machineName, xc, SslProtocols.Ssl3, false);
        } 
        catch (AuthenticationException e)
        {
            string errMsg = "Exception: " + e.Message;

            if (e.InnerException != null)
                errMsg += ("\r\nInner exception: " + e.InnerException.Message);

            errMsg += ("\r\nAuthentication failed - closing the connection.");
            client.Close();

            // Just fires an event, ctor(success, message, response, SSLClient)
            if (OnLoaded != null)
                OnLoaded(new SSLRequestEvent(false, errMsg, null, this));

            return;
        }

        sslStream.Write(sendData);
        sslStream.Flush();

        // Read message from the server. 
        byte[] response = ReadMessage(sslStream);

        // Just fires an event, ctor(success, message, response, SSLClient)
        if (OnLoaded != null)
            OnLoaded(new SSLRequestEvent(true, "Success", response, this));

        // Close the client connection.
        client.Close();
    }

    private byte[] ReadMessage(SslStream sslStream)
    {
        MemoryStream ms = new MemoryStream();

        byte [] buffer = new byte[2048];

        int bytes = -1;
        do
        {
            bytes = sslStream.Read(buffer, 0, buffer.Length);

            ms.Write(buffer, 0, bytes);

        } while (bytes != 0);

        return ms.ToArray();
    }
} 
```

使用的证书是我遵循的步骤，从 Apple 到我正在开发的测试移动应用程序，以及 4 个似乎也需要的委托证书。该类的用法如下：

```
public void DoAPNSPush()
{
    // Build the binary data to be sent
    byte[] bin = BuildAPNSMessage();

    // These certs are uploaded to the server next to this ASPX
    // and are being found and read correctly.
    string[] certs = new string[] {
        Server.MapPath("certs") + "\\MyPFX.pfx",
        Server.MapPath("certs") + "\\my_cert_from_apple.cer",
        Server.MapPath("certs") + "\\entrust_2048_ca.cer"
    };

    string[] pwds = new string[] {
        "password",
        "",
        ""
    };

    SSLClient ssl = new SSLClient("gateway.sandbox.push.apple.com", certs, pwds);
    ssl.OnLoaded += new SSLClient.OnSSLRequestHandler(onSSLLoaded);
    ssl.Load(bin, 2195);
}

public void onSSLLoaded(SSLRequestEvent e)
{
    // We never get here, but the event has the following members:
    //      bool e.Success
    //      string e.Message
    //      byte[] e.Response
    //      SSLClient e.Client
} 
```

希望这不是 TLDR。身份验证仍然失败，我做错了什么？我已经确保在 Amazon 安全组上打开端口 2195。此外，我还尝试了其他 SslProtocols.Ssl3 和 SslProtocols.Tls。苹果的 CSR 是从该服务器生成并完成的，委托证书是从他们的网站下载的（[https://www.entrust.net/downloads/root_request.cfm#](https://www.entrust.net/downloads/root_request.cfm#)），我只是在服务器上双击它们一次安装它们。

任何输入都会有所帮助

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:42:20.130

我不确定 SSL 代码在 C# 中应该是什么样子（我在 Java 中实现了这个），但你不应该通过证书传递密码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:35:17.377

好吧，在使用 JavaPNS 一段时间后，我得到了它的工作，我的问题主要出在证书上。直到我发现我需要将 Apple 的 .p12 和 .cer 转换为新的 p12（使用 openSSL），Apple 才接受了连接并执行了推送。之后我修改了我的 SSLClient 代码并且也让它工作了。

```
public class SSLClient
{
public delegate void OnSSLRequestHandler(SSLRequestEvent e);

private string _remoteHost;
private string [] _serverCertFilenames;
private string [] _serverCertPasswords;

public event OnSSLRequestHandler OnLoaded;

public SSLClient(string remoteHost, string [] serverCertFilenames, string [] serverCertPasswords)
{
    _remoteHost = remoteHost;
    _serverCertFilenames = serverCertFilenames;
    _serverCertPasswords = serverCertPasswords;
}

public bool ValidateServerCertificate(
      object sender,
      X509Certificate certificate,
      X509Chain chain,
      SslPolicyErrors sslPolicyErrors)
{
    return true;
}

public void Load(byte[] sendData, int port = 443)  
{
    // Create a TCP/IP client socket. 
    TcpClient client = new TcpClient(_remoteHost, port);

    // Create an SSL stream utilizing the TcpClient
    SslStream sslStream = new SslStream(
        client.GetStream(), 
        false, 
        new RemoteCertificateValidationCallback (ValidateServerCertificate), 
        null
    );

    try 
    {
        X509Certificate2Collection xc = new X509Certificate2Collection();

        for (int i = 0; i < _serverCertFilenames.Length; i++)
        {
            X509Certificate2 x = new X509Certificate2(
                _serverCertFilenames[i],
                _serverCertPasswords[i] );

            xc.Add(x);
        }

        sslStream.AuthenticateAsClient(_remoteHost, xc, SslProtocols.Default, true);
    }
    catch (AuthenticationException e)
    {
        client.Close();
        sslStream.Close();

        if (OnLoaded != null)
            OnLoaded(new SSLRequestEvent(false, errMsg, null, this));

        return;
    }

    sslStream.Write(sendData);
    sslStream.Flush();

    // Read message from the server. 
    byte[] response = ReadMessage(sslStream);

    if (OnLoaded != null)
        OnLoaded(new SSLRequestEvent(true, "Success", response, this));

    // Close the client connection.
    client.Close();
}

private byte[] ReadMessage(SslStream sslStream)
{
    MemoryStream ms = new MemoryStream();

    byte [] buffer = new byte[1024];

    int bytes = -1;
    do
    {
        bytes = sslStream.Read(buffer, 0, buffer.Length);

        ms.Write(buffer, 0, bytes);

    } while (bytes != 0);

    return ms.ToArray();
}
} 
```

用法和以前一样。这里最大的技巧是我在这里需要的 openSSL 命令：

```
openssl x509 -in "path_to_apple_cert.cer" -inform DER -out "path_to_an_output_Cert.pem" -outform PEM
openssl pkcs12 -nocerts -in "path_to_exported_p12_from_apple_cer.p12" -out "path_to_an_output_Key.pem" -passin pass:your_p12_password -passout pass:your_new_p12_password
openssl pkcs12 -export -inkey "path_to_an_output_Key.pem" -in "path_to_an_output_Cert.pem" -out "path_to_final_p12.p12" -passin pass:your_new_p12_password -passout pass:your_final_p12_password 
```

这可能看起来很讨厌 - 但它真正做的是：第 1 行）获取您从苹果获得的 .CER 文件并从中制作证书 .pem，第 2 行）获取您从钥匙串访问和密码保护导出的 .P12 和从中制作一个密钥 .pem，然后最后 3）取出它刚刚制作的两个 pem 并从中创建一个新的 p12。这是苹果推送通知服务器最终接受我的 P12。

希望这对你们中的一些人有所帮助——我的头脑已经在证书、pfx、p12、pem 等问题上旋转了一周，现在让这些东西正常工作。

# symfony - Symfony2 学说：generate:entities 从不工作

> ID：15117146
> 
> 赞同：7
> 
> 时间：2013-02-27T16:26:35.403
> 
> 标签：symfony, doctrine-orm, doctrine, entities

我对 Symfony2 比较陌生，到目前为止我很喜欢它——除了这个我一直遇到的问题。

可怕的（对我来说）：教义：生成：实体

当我开始我的第一个 Symfony2 项目时，我无法使该命令正常工作，最终只使用了学说：generate:entity，它工作得很好。

但是，这一次我试图为已经有数据库表的系统编写一个应用程序。我按照以下说明进行操作：[Symfony2 Docs](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)似乎一切正常，除了像往常一样的原则：generate:entities 位。

我有以下实体文件@My/Bundle/FeedManagerBundle/Entity/Feeds.php

```
<?php

namespace My\Bundle\FeedManagerBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Feeds
 *
 * @ORM\Table(name="feeds")
 * @ORM\Entity
 */
class Feeds
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="feed_label", type="string", length=100, nullable=false)
     */
    private $feedLabel;

    /**
     * @var integer
     *
     * @ORM\Column(name="advertiser_id", type="integer", nullable=false)
     */
    private $advertiserId;

    /**
     * @var boolean
     *
     * @ORM\Column(name="active", type="boolean", nullable=false)
     */
    private $active;

} 
```

在 My/Bundle/FeedManagerBundle/Resources/config/doctrine/Feeds.orm.yml

```
Feeds:
    type: entity
    table: feeds
    fields:
    id:
        id: true
        type: integer
        unsigned: false
        nullable: false
        generator:
            strategy: IDENTITY
    feedLabel:
        type: string
        length: 100
        fixed: false
        nullable: false
        column: feed_label
    advertiserId:
        type: integer
        unsigned: false
        nullable: false
        column: advertiser_id
    active:
        type: boolean
        nullable: false
    lifecycleCallbacks: {  } 
```

这是我得到的错误：

```
$ php app/console doctrine:generate:entities My/Bundle/FeedManagerBundle/Entity/Feeds --path=src
Generating entity "My\Bundle\FeedManagerBundle\Entity\Feeds"

  [Doctrine\Common\Persistence\Mapping\MappingException]                                                                         
  Invalid mapping file 'My.Bundle.FeedManagerBundle.Entity.Feeds.orm.yml' for class 'My\Bundle\FeedManagerBundle\Entity\Feeds'.  

doctrine:generate:entities [--path="..."] [--no-backup] name 
```

我尝试将 yml 文件的名称更改为完整路径。我还尝试将 yml 文件的第一行更改为完整路径，并且我尝试同时做这两件事。似乎没有任何效果，现在我要开始把头发拉出来了。谁能想到这可能不起作用的任何原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T16:30:01.200

更改`Feed.orm.yml`为：

```
My\Bundle\FeedManagerBundle\Entity\Feeds:
   type: entity
   table: feeds
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T12:36:08.893

我有同样的问题，但问题不存在。

实际上，我想更改实体的名称，即：My\Bundle\FeedManagerBundle\Entity\Aircaft：将是 My\Bundle\FeedManagerBundle\Entity\Aircraft：

（因为桌子是“aircaft”：-S）

但我没有更改文件名。当我将**aircaft.orm.yml**更改为 airc **r** aft.orm.yml （带有“r”）时，该命令有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-11T11:41:21.077

搜索5小时后发现没有答案...

**要从 yml 生成实体到 model.php，只需执行此操作。**关注下面的粗体文本。命令是：

```
php app/console doctrine:generate:entities YourAppBundle:ReplaceWithEntityName --path src/ 
```

确保你的 model.orm.yml 文件在你的文件夹中

C:\xyz\abc**AppBundle\Resources\config\doctrine** 并且您的 yml 文件在映射代码“ **AppBundle\Entity\Book:** ”的开头添加了引号中的此引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-26T06:18:04.527

我以不同的方式解决了这个问题。 `orm.yml`Feeds 实体的文件正在产生问题，所以我从那时起删除了它，`resource -> config -> doctrine`然后我运行了 php app/console `doctrine:generate:entities YourBundleName`。

这行得通。

如果您想使用该`doctrine:mapping:convert`任务将映射信息转换为其他支持的映射格式。用您自己的命名空间替换以下命名空间。它可以 100% 工作。

```
php app/console doctrine:mapping:convert --namespace="Blogger\BlogBundle\Entity\Blog" yaml src/Blogger/BlogBundle/Resources/config/doctrine 
```

# c# - 在 Silverlight MVVM 应用程序中单击浏览器后退按钮上的运行方法

> ID：15117147
> 
> 赞同：2
> 
> 时间：2013-02-27T16:26:47.123
> 
> 标签：c#, asp.net, .net, silverlight, silverlight-4.0

我有一个枚举类型的依赖属性，用于跟踪 Silverlight 应用程序上当前显示的页面。这非常有效，直到用户选择按下浏览器后退按钮，并返回到我的 Silverlight 程序的上一页。但是，依赖属性不会更新。

是否可以在我的代码中更新这个依赖属性，而不需要晦涩的 JavaScript 函数等？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:30:42.613

如果在您按返回时重新加载 Silverlight 插件，那么您需要找到一种方法来传递信息。

一种解决方案是将值存储在独立存储中，然后在再次加载时将其读回。

# jsf - Spring Security 到用户 JPA 连接

> ID：15117148
> 
> 赞同：0
> 
> 时间：2013-02-27T16:26:49.503
> 
> 标签：jsf, jpa, spring-security

我试图从 StackOverflow（[使用 Spring Security 和 JPA](https://stackoverflow.com/questions/4489703/how-to-use-spring-security-with-jpa)）中关注这篇文章但没有成功。

我实现了一个 UserDetailsS​​ervice：

```
import javax.inject.Inject;

import org.springframework.dao.DataAccessException;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

import com.boss.mrfoods.dao.UserDao;
import com.boss.mrfoods.entity.User;

@Service
public class LoginController implements UserDetailsService {

    @Inject
    private UserDao userDao;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {
        User user = userDao.getForUsername(username);

        System.out.println("USERNAME: " + username);
        System.out.println("USER: " + user);
        System.out.println("ROLES:" + user.getRoles());

        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), user.getRoles());
    }

} 
```

并在 Spring XML 配置文件之一中引用它，如下所示：

```
<debug />

<global-method-security pre-post-annotations="enabled" />

<http pattern="/resources/**" security="none" />
<http pattern="/pages/loggedout.xhtml" security="none" />
<http pattern="/pages/timeout.xhtml" security="none" />

<http use-expressions="true">
    <intercept-url pattern="/pages/admin/**" access="hasRole('supervisor')" />
    <intercept-url pattern="/pages/user/**" access="isAuthenticated()" />
    <intercept-url pattern="/**" access="permitAll" />
    <form-login />
    <logout logout-success-url="/pages/loggedout.xhtml" delete-cookies="JSESSIONID" />
    <remember-me />
</http>

<beans:bean id="customUserDetailsService" class="com.boss.mrfoods.controller.LoginController" />

<authentication-manager>
    <authentication-provider user-service-ref="customUserDetailsService">
        <password-encoder hash="plaintext" />
    </authentication-provider>
</authentication-manager> 
```

什么都没发生。没有例外，我的 UserDetailsS​​ervice 实现永远不会被调用。

我想要归档的是 Spring Security 使用我的 JPA 连接/事务来查找用户/角色。我缺少配置吗？如果我什至没有得到异常，我从哪里开始寻找问题。

**到目前为止我发现的是：我的 userDao 是空的。对象注入不起作用。Inject 无法构建对象。为什么？**

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:46:50.873

您能否详细说明您是如何登录到该应用程序的。您是否直接访问用户页面并期待登录页面？

您是否尝试过像这样设置登录页面，

```
 <form-login
        login-page="/login.html"
        login-processing-url="/j_spring_security_check.action"
        authentication-failure-url="/login_error.html"
        default-target-url="/home.html"
        always-use-default-target="true"/> 
```

# postgresql - postgresql从join计算双重计数

> ID：15117151
> 
> 赞同：0
> 
> 时间：2013-02-27T16:27:00.910
> 
> 标签：postgresql, join

所以我有以下查询

```
SELECT SUM(s.price) as "totalSales", 
       sum(CASE 
             WHEN er.verified AND er.price = 1.010101 THEN s.price 
             WHEN er.verified AND er.price > 1.010101 THEN er.price ELSE 0 END) as "totalRet", 
       c.company as "client"
FROM "Esns" e 
  JOIN "EsnsSalesOrderItems" es on es."EsnId" = e."id" 
  JOIN "SalesOrderItems" s on es."SalesOrderItemId" = s.id
  JOIN "SalesOrders" so on so.id = s."SalesOrderId"
  JOIN "Clients" c on so."ClientId" = c.id                    
  LEFT OUTER JOIN  "EsnsRmas"  er on er."EsnId" = e.id
GROUP BY c.id 
```

但是，如果es上有多个“EsnId”，则会多次计数er，反之亦然。

我如何构建以使所有内容都只计算一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:40:13.477

```
SELECT
    SUM(s.price) as "totalSales", 
    sum(CASE 
        WHEN er.verified AND er.price = 1.010101 THEN s.price 
        WHEN er.verified AND er.price > 1.010101 THEN er.price ELSE 0 END) as "totalRet", 
    c.company as "client"
FROM "Esns" e 
    JOIN (
        select distinct "EsnId"
        from "EsnsSalesOrderItems"
    ) es on es."EsnId" = e."id" 
    JOIN "SalesOrderItems" s on es."SalesOrderItemId" = s.id
    JOIN "SalesOrders" so on so.id = s."SalesOrderId"
    JOIN "Clients" c on so."ClientId" = c.id                    
    LEFT OUTER JOIN  "EsnsRmas"  er on er."EsnId" = e.id
GROUP BY c.id 
```

# javascript - 使用木偶从骨干提取中添加收集结果

> ID：15117153
> 
> 赞同：1
> 
> 时间：2013-02-27T16:27:09.993
> 
> 标签：javascript, backbone.js, fetch, marionette

我正在使用 Backbone 0.9.2，它仍然有`{add: true}`一个 fetch 和 marionette 1.0.0.b4

所以场景是我在页面加载时在屏幕上呈现了一个集合（这很好用）。现在我想通过另一个 fetch 调用添加到该集合中。

据我所知，marionette.js 每次都会用重置函数覆盖 add 函数。

我查看了 initializeEvents 函数并将“重置”事件绑定到我自己的事件。在我的事件中，我调用`this.collection.add();`它的效果很好，只是它没有将数据呈现到模板中，因为我还没有调用`this.render();`。

这就是它变得糟糕的地方。所以我打电话`this.render();`，它会呈现数据。耶！但是，在下一次获取时`this.render()`会重置数据（我猜木偶有自己的渲染函数，总是重置而不是添加）

```
initialEvents: function () {
        if (this.collection) {
            this.bindTo(this.collection, "add", this.addChildView, this);
            this.bindTo(this.collection, "remove", this.removeItemView, this);
            this.bindTo(this.collection, "reset", this.resetted, this);
        }
    },
    resetted: function (item, collection, options) {

        // this works, but doesnt render data into the template, just empty divs
        this.collection.add();

        // this.render() resets the collection.
        this.render();

    },

Item = collection (with all my data)
Collection  = {} (literally)
options = undefined 
```

是的，我知道 resetted 是最糟糕的函数名称，但无论如何，它的 sudo 代码。

我也尝试过木偶“collectionEvents”，但在渲染发生后发现这些火灾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:18:57.880

在 Backbone 模型和集合上，都有一个可以覆盖的方法，称为 parse。

```
var B = Backbone.Collection.extend({
   ............,
   model: A,
   parse: function (data) {
       // manipulate your data here then return it
       return data;
   }
}); 
```

当我想在同一个调用中返回多个集合并将数据保存到集合的属性时，我会使用此功能。

```
var B = Backbone.Collections.extend({
    ..................,
    model: A,
    pagingCollection: {},
    parse: function(data) {
       this.pagingCollection = data.PageCollection;
       return data.CoreData;
    }
}); 
```

# operating-system - 展示如何仅使用二进制信号量和普通机器指令来实现计数信号量？

> ID：15117155
> 
> 赞同：7
> 
> 时间：2013-02-27T16:27:14.970
> 
> 标签：operating-system, semaphore

我正在为期中考试而学习，这是练习题之一：展示如何仅使用二进制信号量和普通机器指令来实现计数信号量（即可以保存任意值的信号量）？

我什至不确定从哪里开始。我在网上找到了这个；

```
P(s) { Pb(mutex_s); s = s-1; if(s < 0) {Vb(mutex_s); Pb(delay_s);} Vb(mutex_s); }
V(s) { Pb(mutex_s); s = s+1; if(s <= 0) Vb(delay_s); else Vb(mutex_s); } 
```

不幸的是，我真的不明白答案告诉我什么。谁能向我解释这个答案，或者用伪代码告诉我如何回答？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-02-03T18:28:34.557

[我根据Prahbat 的](https://stackoverflow.com/a/25220708/7032781)回答建立了以下直觉：

我们试图复制的内容：

*   计数信号量意味着最多允许 N 个线程访问资源

我们可以使用二进制信号量来做到这一点：

*   如果已经有 N 个进程在其临界区中，则计数信号量锁定对线程临界区的访问
    *   => 我们需要一个二进制信号量*sectionLock*，它告诉等待线程它们是否可以访问它们的临界区（*sectionLock = 1*）或者它们不能（*sectionLock = 0*）
*   我们必须跟踪访问临界区资源的线程数。让这个计数器是一个整数*计数*
    *   *count*在线程进入临界区时减少（即该资源中的线程少一个点）并在线程退出临界区时增加（即为该资源中的线程释放一个点）
    *   => *count*是共享资源，一次只能由一个线程访问
    *   => 我们需要一个二进制信号量*countLock*用于*计数*
*   如果*count <= 0*那么我们不能再允许线程进入临界区并且必须等待*sectionLock*被退出线程释放

因此，以下伪代码暗示了自己

```
P_counting( int count )
   P( countLock )        // Acquire lock to count: countLock <- 0
   count--
   if( count <= 0 )      // If no more threads allowed into critical section
      P( sectionLock )   // Resource full => Acquire section lock: sectionLock <- 0
      V( countLock )     // Release lock to count: countLock <- 1
   else
      V( countLock)

V_counting( int count )
   P( countLock )
   count++
   if( count > 0)        // Release sectionLock if resource is freed up
      V(sectionLock)     // countLock released after sectionLock so that waiting
      V(countLock)       // threads do not jump in when before resource is available
   else
      V(countLock) 
```

如果我有什么问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-11T22:16:31.243

```
CSem(K) cs { // counting semaphore initialized to K
    int val ← K; // the value of csem
    BSem gate(min(1,val)); // 1 if val > 0; 0 if val = 0
    BSem mutex(1); // protects val

    Pc(cs) {
        P(gate)
        a1: P(mutex);
        val ← val − 1;
        if val > 0
        V(gate);
        V(mutex);
    }

    Vc(cs) {
        P(mutex);
        val ← val + 1;
        if val = 1
        V(gate);
        V(mutex);
    }
} 
```

来源：[http ://www.cs.umd.edu/~shankar/412-Notes/10x-countingSemUsingBinarySem.pdf](http://www.cs.umd.edu/~shankar/412-Notes/10x-countingSemUsingBinarySem.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-09T16:33:53.060

> 令 x, y 为二进制信号量。我们将通过它来实现计数信号量S。P代表等待操作，V代表信号。由于我们采用 S=4，所以只有 4 个进程可以进入临界区。

```
S = 4, x = 1, y = 0;

/*---P(S)---*/
{P(x);S--;if(s<=0){V(x);P(y);}else V(x); }

/*--CRITICAL SECTION--*/

/*--V(S) ---*/
  { P(x); S++;IF(S>0){ V(y);V(x); }else V(x);} 
```

> 注意：P(x) 将 x 的值减少 1，而 V(x) 增加 1，对于 y 也是如此。y 被称为挂起信号量，因为如果 S<0，P(y) 将所有这些进程放入队列中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T00:53:25.650

弄清楚了：

```
int s = N;
semaphore mutex_s = 1;
semaphore delay_s = 0;

p(s) = down
  down(mutex_x);
  s--;

  if (s< n)
    up(mutex_s)
    down(delay_s)
  up(mutex_s)

V(s) = up
  down(mutex_s)
  s++
  if (s<=0)
    up(delay_s)
  up(mutex_s) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T04:34:00.937

我有一个类似的问题，我认为会有相同的答案，即“如何使用互斥锁实现计数信号量”。

请注意，二进制信号量可以被认为是互斥体。事实上，在不提供互斥锁的系统上，可以使用二进制信号量来提供互斥。

```
Mutex counting_mutex;    // used for accessing the shared variable count
Integer count = n;       // number of resource instances
Mutex mutex;             // the counting semaphore as mutex/binary semaphore
List waiting_list = [];  // list of waiting processes

/* ... */

// Entry Section
acquire(counting_mutex);
count--;
release(counting_mutex);

if (count < 0)
    add this process to waiting_list and have it sleep()

acquire(mutex);
/* ... Critical Section ... */
release(mutex);

// Exit Section
acquire(counting_mutex);
count++;
release(counting_mutex);

if (count <= 0)
    pull a process from waiting_list and call wakeup() 
```

# ruby-on-rails-3 - 回形针可以用于非图像上传吗

> ID：15117157
> 
> 赞同：0
> 
> 时间：2013-02-27T16:27:16.470
> 
> 标签：ruby-on-rails-3, paperclip

我正在尝试使用回形针来处理我的 rails 应用程序，我发现的大多数示例都是用于图像附件，我有一个用户可以上传 .json 文件的用例，我想将它附加到我的 ActiveRecord 模型中。回形针可以用于这样的用例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:34:30.893

是的。

只需访问 GitHub 页面即可发现这一点。

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

“ActiveRecord 的简单文件附件管理”

# c++ - 我正在尝试在 Windows 8 上执行 openCV 代码，它显示 Not Responding Windows。

> ID：15117160
> 
> 赞同：0
> 
> 时间：2013-02-27T16:27:29.137
> 
> 标签：c++, eclipse, opencv, windows-8, mingw

我正在尝试在 Windows 8 上执行 openCV 代码，它显示 Not Responding Windows。我正在使用以下代码：

```
#include <iostream>
#include<opencv/cv.h>
#include <opencv/highgui.h>
using namespace cv;
using namespace std;

int main() {
cout << "!!!Hello World !!!" << endl; // prints !!!Hello World!!!
cvNamedWindow( "abc", 1 );
IplImage* img = cvLoadImage( "C:\\Users\\****\\Pictures\\123.jpg" );
 cvShowImage( "abc", img );
 while( 1 ) {
     if( cvWaitKey( 100 ) == 27 ) break;
   }

 cvDestroyWindow( "abc" );
   cvReleaseImage( &img );

return 0;
} 
```

当我执行上述代码时，出现以下错误：

Windows 没有响应。

其他信息：

操作系统：Windows8 IDE：EClipse openCV Vesion 2.4.0 c++ 编译器：MinGW

如果需要更多额外信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:06:43.563

尝试

```
bool stop = 0;
while( !stop) {
    if( cvWaitKey( 100 ) == 27 ) stop=1;
} 
```

在调试模式下会发生什么？展开 if 语句并放置一个 cout << "exit"; 在中，添加一个断点，然后单步执行。找出它停止响应的位置。

# java - Android 应用程序一次性丢失对分配的本机内存的引用是一件大事吗？

> ID：15117163
> 
> 赞同：4
> 
> 时间：2013-02-27T16:27:45.850
> 
> 标签：java, android, java-native-interface

我相信解释这个问题的背景只会使事情变得混乱，所以我会直奔主题：

如果一个 Android 应用程序通过 JNI 分配了少量本机内存，然后失去了对该内存的引用（即，对管理该本机内存的对象的变量引用变为空，并且如果尝试使用将抛出空指针异常他们）：

1.  如果在应用程序的整个生命周期中仅发生一次，这真的很重要吗？

2.  内存最终不会被覆盖并因此被回收吗？

我知道允许内存泄漏是一种不好的做法。坦率地说，我完全理解这一点。但是，我也知道在极少数情况下应该打破规则（套用来自 Effective Java 的 Joshua Bloch 的话）。恕我直言，我不想讨论我为什么要这样做，我只是寻求这个特定问题的答案。

谢谢你！！！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:56:37.613

> 如果在应用程序的整个生命周期中仅发生一次，这真的很重要吗？

对于大多数人来说，这取决于*“少量本机内存”*对您意味着什么。*如果我们谈论的是几个 KB，那么当它丢失一次*时我不会担心它。另一方面，如果我们谈论的是几个 MB，那么情况可能会有所不同......

也就是说，已知内存泄漏是潜在设计问题的标志，也可能导致其他问题。如果未来的重构改变了应用程序的架构，它也可能成为一个更大的问题。

> 内存最终不会被覆盖并因此被回收吗？

当然……*最终*。当进程终止时，内核将释放所有分配的资源。我并不真正熟悉 Android 的内部工作原理，但据我了解，进程往往比桌面 Linux 系统上的寿命更长。对于内存很少且没有交换空间的嵌入式设备，这可能是个问题——尤其是如果所有应用程序编写者都开始到处留下内存泄漏。

# c# - 如何在后面的代码中设置 Validation.ErrorTemplate？

> ID：15117164
> 
> 赞同：3
> 
> 时间：2013-02-27T16:27:51.937
> 
> 标签：c#, wpf, validation, passwordbox

我一直在查看 StackOverflow，并完成了几个问题。但它们不起作用。

我有这个`PasswordBox`：

```
<PasswordBox Width="160"
      HorizontalAlignment="Left"
      Margin="10,3"
      Name="textBoxUserPass"
      local:PasswordBoxAssistant.BindPassword="True"
      local:PasswordBoxAssistant.BoundPassword="{Binding Path=Password, UpdateSourceTrigger=Explicit, 
      ValidatesOnDataErrors=True, ValidatesOnExceptions=True}"
      Validation.ErrorTemplate="{x:Null}" /> 
```

我第一次设置`ValidationErrorTemplate="{x:Null}"`所以第一次加载`PasswordBox`它不会尝试验证框。

当我发现错误时，我尝试更改`Validation.ErrorTemplate`它，使其显示红色边框（如`ErrorTemplate`我定义的那样），如下所示：

```
BindingExpression bePassword = textBoxUserPass.GetBindingExpression(PasswordBoxAssistant.BoundPassword);
if (bePassword != null)
{
    bePassword.UpdateSource();
    if (bePassword.HasError)
    {
        var validationError = new ValidationError(new ExceptionValidationRule(), bePassword);
        Validation.MarkInvalid(bePassword, validationError);
        validationError.ErrorContent = Cultures.Resources.MessageNoPassword;
        var b = Resources["validationTemplate"] as ControlTemplate;
        Validation.SetErrorTemplate(textBoxUserPass, b);
        }
    }
} 
```

我在这样的地方定义了我的**validationTemplate**`ResourceDictionary.xaml`：

```
 <Style x:Key="validationTemplate" TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <TextBlock DockPanel.Dock="Right" 
                    Foreground="Red"
                    FontSize="12pt">
                    *
                    </TextBlock>
                    <Border BorderBrush="Red" BorderThickness="1" CornerRadius="5">
                        <AdornedElementPlaceholder />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如您所见，一个普通的盒子。

**当我试图找到这个资源**来改变我`Validation.ErrorTemplate`的代码时，我的问题就出现了。我放了一个断点，这一行：

```
var b = FindResource("validationTemplate") as ControlTemplate; 
```

说**b**为空。我怎样才能找到`"validationTemplate"`和使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:09:26.473

您的 validationTemplate 是一个`Style`带有`Template`. `Template`只尝试：

```
<ControlTemplate x:Key="validationTemplate">
    <DockPanel LastChildFill="True">
        <TextBlock DockPanel.Dock="Right" 
        Foreground="Red"
        FontSize="12pt">
        *
        </TextBlock>
        <Border BorderBrush="Red" BorderThickness="1" CornerRadius="5">
            <AdornedElementPlaceholder />
        </Border>
    </DockPanel>
</ControlTemplate> 
```

# html - IE 10 - 尽管父位置：相对，但 div 被按下

> ID：15117168
> 
> 赞同：1
> 
> 时间：2013-02-27T16:28:02.980
> 
> 标签：html, css, cross-browser, position, internet-explorer-10

我遇到了与 IE 10 的浏览器兼容性问题。为了补偿在早期版本的 ie 中将这个 div 向下推的负上边距，我将父 div 相对定位，但这个修复似乎在 ie10 中不起作用。这是我的代码：

```
<div class="hidden-panel">
<div class="gradient-wrap">
    <div class="calls">
      <table>
        <tr>
          <td>
            <a href="/"><img src="bully-call1.png"></a>
          </td>
          <td>
            <a href="/"><img src="bully-call2.png"></a>
          </td>
          <td>
            <a href="/"><img src="bully-call3.png"></a>
          </td>
        </tr>
      </table>
    </div>
    <div class="blue-window">
      <img src="take-pledge.png">
    </div>
</div>
</div> 
```

和CSS：

```
.gradient-wrap{
    padding-top: 80px;
    padding-left: 25px;
    padding-bottom: 100px;
    background: url(gradientbg.png) repeat-x;
    margin-top: -100px;
    position: relative;
}

.calls{
  width: 60%;
  }

.hidden-panel{
    background-image: url(hidden-panel.png);
    background-position: center top;
    background-repeat: no-repeat;
  }

.blue-window{
  background-color: $theme_color_6;
  padding: 45px 180px 45px 0px;
  width: 180px;
  margin: 100px auto 30px;
  } 
```

这是网站：[http ://www.thebullyproject.com/home2](http://www.thebullyproject.com/home2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:53:51.910

我现在不是 100% 确定为什么，但看起来内容在 IE10 中被下推，因为你也有左边的填充没有足够的空间。

如果您将其更改`padding-left`为`22px`on `.gradient-wrap`，它将按预期工作（填充少一点）。

# android - 我可以以某种方式检索我的视图的可见性状态吗？

> ID：15117169
> 
> 赞同：0
> 
> 时间：2013-02-27T16:28:03.777
> 
> 标签：android, visibility, state

设置为`myView`后`invisible`：

```
public void onClick(View arg0) {
myView.setVisibility(View.INVISIBLE); } 
```

我可以通过某种内置方法以某种方式询问*myView 可见性*的当前状态吗？类似*“myView.isVisible();”*

我检查了android.developer，但没有得到答案。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:30:40.460

```
boolean visible = myView.getVisibility() == View.VISIBLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:36:40.283

`myView.isShown()` 确定此视图及其所有父视图是否已设置为可见。
但是，它可能在屏幕外（例如在 a `ViewPager`、`ScrollView`等内部）并且`myView.isShown()`仍然是`true`.

相反，尝试这个来确定是否`myView`真的（部分）在屏幕上并显示给用户。

```
 Rect rect = new Rect();
 boolean visible = myView.isShown(); 
 boolean shown = visible && myView.getLocalVisibleRect(rect); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:44:02.190

您可以使用以下方法来了解视图的可见性：

```
public String getVisibleState(View v) {
        if (v.getVisibility() == View.VISIBLE)
            return "Visible";
        if (v.getVisibility() == View.INVISIBLE)
            return "In Visible";
        if (v.getVisibility() == View.GONE)
            return "Gone";
        return "I dont know";
    } 
```

# c - 为什么过早访问 ReadFileEx 的输入缓冲区会导致数据损坏？

> ID：15117170
> 
> 赞同：5
> 
> 时间：2013-02-27T16:28:08.980
> 
> 标签：c, winapi, readfile, corruption

[`ReadFileEx`的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365468.aspx)说：

> 在读取操作正在使用缓冲区时访问输入缓冲区可能会导致读取到该缓冲区的数据损坏。在读取操作完成之前，应用程序不得读取、写入、重新分配或释放读取操作正在使用的输入缓冲区。

这是我第一次听说读取数据会导致损坏。
所以我的问题是，*为什么*会这样？*读取*操作如何可能导致数据损坏？
导致这种情况的原因是什么？

### 更新：

我注意到[`ReadFile`'s page](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467.aspx)上有一个有趣的句子：

> 该`ReadFile`函数可能会失败`ERROR_NOT_ENOUGH_QUOTA`，这意味着调用进程的缓冲区无法被页面锁定。

也许这与答案有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:55:24.920

我不太确定，所以我很愿意接受评论，但我猜：

`ReadFileEx`实现使用`NtReadFile`（或多或少它只是围绕它的一个薄包装）。`NtReadFile`做了很多事情，但它使用`IoBuildAsynchronousFsdRequest`（或`IoBuildSynchronousFsdRequest`）来执行它的任务。从[这篇文章](http://support.microsoft.com/default.aspx?scid=kb;EN-US;Q326315)我们知道：

> 如果目标设备对象设置为直接 i/o (DO_DIRECT_IO)，则 IoBuildAsynchronousFsdRequest 创建一个 MDL 来描述缓冲区并**锁定页面**。

（重点是我的）

然后我猜他们`MmProbeAndLockPages`用调用`IoWriteAccess`，这是由内核模式下的驱动程序完成的，然后用户提供的缓冲区（在用户模式下）甚至无法访问以进行读取。

我不知道如果你这样做会发生什么，可能会抛出一个 SEH 异常并且你的代码会失败。

**编辑**
正如已编辑问题中所指出的那样，即使该`ReadFile`函数也禁止用户从缓冲区中读取，直到操作完成并且它可能会返回`ERROR_NOT_ENOUGH_QUOTA`：

> ReadFile 函数可能会因 ERROR_NOT_ENOUGH_QUOTA 而失败，这意味着调用进程的缓冲区无法被页面锁定。

至少这清楚地表明`ReadFile`（缓冲区不是由用户提供的）将分配一个页面并将其**锁定**（好的，我在链接的文章中也说过......）。用户定义的缓冲区是否也会发生损坏（如果有的话，我非常同意@David），还有待了解（如@Ben 所指出的，页面上的锁定在大多数情况下是不可能的）。

我不认为它使用页面错误来检测缓冲区溢出仅仅是因为它在调用*之前*知道所需的数据量然后它可以分配一次。

**那么为什么数据会被破坏呢？** 毕竟这里的一切都可能是由于错误而不是数据损坏。这是一个很大的猜测，但有一个已知问题`MmProbeAndLockPages`：

> 由于内存管理器中的争用条件，会出现此问题。当驱动程序调用 MmProbeAndLockPages 例程时，此例程可能会读取一些正在被另一个线程修改的数据。因此，会发生数据损坏。根据损坏数据的使用方式，应用程序或系统可能会崩溃。

很难说这个问题是否已经在非常低的水平上得到解决，或者如果应用程序做了一些奇怪的事情是否仍然可以利用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:59:39.460

Most likely, the corruption when you read from the I/O buffer results from the race condition -- the buffer may be partially filled in when you read from it, and the order in which it is filled in is unspecified. In addition, Windows could store anything in there during the time it owns the buffer -- you aren't guaranteed to see either the prior content or the data from the file.

What you can be sure of is that **it isn't related to access violations when reading from the buffer**, because it's perfectly legal to continue accessing other data in the same page. Only the buffer itself is forbidden to your use. Now, when the file is open for direct unbuffered I/O (`FILE_FLAG_NO_BUFFERING`), *and the volume sector size is a multiple of the memory page size*, then, the buffer is required to correspond to a sequence of complete pages, so the kernel has more freedom at that point. But that's a very particular set of conditions, and it's rare for the sector size to exceed the memory page size.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:31:16.267

有两句话。首先：

> 在读取操作正在使用缓冲区时访问输入缓冲区可能会导致读取到该缓冲区的数据损坏。

其次是：

> 在读取操作完成之前，应用程序不得读取、写入、重新分配或释放读取操作正在使用的输入缓冲区。

该文档没有明确说明第二句中提到的**每个**动作都可能导致第一句中描述的损坏。它说：

1.  在读取期间访问输入缓冲区可能会损坏该缓冲区，并且
2.  在读取期间不要读取、写入、重新分配或释放缓冲区。

因此，当我解释文档时，它并没有说明在读取操作期间从缓冲区读取会损坏它。

# python - 从 django 中完全删除 memcached

> ID：15117182
> 
> 赞同：0
> 
> 时间：2013-02-27T16:28:31.687
> 
> 标签：python, django, caching, memcached

请告诉一些从 Django 服务器中完全删除 memcached 的方法。将 apache 与 mod WSGI 一起使用，并且已经从 settings.py 中删除了所有缓存行，但即使该文件也被缓存了。

即使删除 settings.py 也不会阻止站点工作。这是荒唐的。没有形成我可以删除的 .pyc。缓存的文件在哪里。

我无法让 .py 文件中的代码更改以任何方式反映。它们有时会反映，有时旧代码会从某个缓存中返回。如何从此服务器中删除所有缓存机制？

问候 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T00:17:56.073

这与内存缓存无关；听起来旧的编译 python 脚本仍在使用。从理论上讲，重新启动 apache 应该可以做到。如果没有，删除所有 .pyc 文件（编译的 python 文件；不是 .py，它们是您的源代码）并重新启动服务器应该强制它从当前源重新生成 .pyc 文件。

# three.js - Maya 导出到 Three.js JSON

> ID：15117186
> 
> 赞同：3
> 
> 时间：2013-02-27T16:28:35.210
> 
> 标签：three.js, maya

将模型从 Maya 导出到 JSON threeJS 时出现问题

很多顶点看起来都在错误的位置：

![在此处输入图像描述](../Images/296eceffdcd0af1f9574e0fd4f36eb66.png)

你可以下载

*   这里的模型obj： [https ://dl.dropbox.com/u/5045633/JS_obj/130227_kyary001.OBJ](https://dl.dropbox.com/u/5045633/JS_obj/130227_kyary001.OBJ)

*   这里的模型js：[https ://dl.dropbox.com/u/5045633/JS_obj/130227_kyary001.js](https://dl.dropbox.com/u/5045633/JS_obj/130227_kyary001.js)

当我导出选项是： uv face vertex normale

我不认为它来自我的代码，因为它可以与 suzanne.js 等完美配合。但就是这样：

```
 loader = new THREE.JSONLoader()
    loader.load( "./3d/130227_kyaryTRI_001.js", @createScene )

    return

createScene:( geometry ) =>

    geometry.computeCentroids()
    geometry.computeFaceNormals()
    geometry.computeVertexNormals()
    geometry.computeMorphNormals()
    geometry.computeTangents()

    # Lambert
    material = new THREE.MeshLambertMaterial(
        map:THREE.ImageUtils.loadTexture( "./3d/Text_Kyary001.png" )
    )
    mesh = new THREE.Mesh( geometry, material )
    mesh.scale.set(6, 6, 6)
    @scene.add( mesh )

    # Phong 
    material = new THREE.MeshPhongMaterial({color:0x00FF00})
    mesh = new THREE.Mesh( geometry, material )
    mesh.scale.set(6, 6, 6)
    mesh.position.set(-300,-0,0)
    @scene.add( mesh )

    # Normal
    material = new THREE.MeshNormalMaterial()
    mesh = new THREE.Mesh( geometry, material )
    mesh.scale.set(6, 6, 6)
    mesh.position.set(-0,-240,0)
    @scene.add( mesh )

    # Wireframe 
    material = new THREE.MeshBasicMaterial({wireframe:true, color:0})
    mesh = new THREE.Mesh( geometry, material )
    mesh.scale.set(6, 6, 6)
    mesh.position.set(0,240,0)
    @scene.add( mesh )

    return 
```

我使用threejs 56版

我使用maya 2013 64bits，也尝试使用maya 2012

提前感谢您的帮助。

编辑：.OBJ 按预期工作（使用来自threejs 的OBJLoader 加载） EDIT2：错误来自具有新maya 版本的导出器脚本，他们修复了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-16T20:50:53.837

我建议使用 THREE.js 源代码附带的 Maya to THREE 导出器。它直接导出为 .JS 格式，无需中间步骤。如果您从 GitHub 下载存储库，您可以在 utils/exporters/maya 中找到导出器文件。

您可以在 THREE.js 官方存储库中找到的导出器仅支持静态模型。我创建了一个更新版本，它还支持导出装配和动画模型。我们有一个将更新的导出器与三个主干集成的拉取请求，但如果您想立即获得新的和改进的导出器，您可以从这个存储库获取它：[https ://github.com/BlackTowerEntertainment/three.js/tree /maya_animation_exporter](https://github.com/BlackTowerEntertainment/three.js/tree/maya_animation_exporter)。

希望这可以帮助。

# ios - 制作 iOS 框架：包括 3rd 方库和代码

> ID：15117187
> 
> 赞同：13
> 
> 时间：2013-02-27T16:28:35.380
> 
> 标签：ios, objective-c, frameworks, linker

我正在制作一个静态 iOS 框架。我想`AFNetworking`在我的框架中使用第 3 方代码，让我们以示例为例。`AFNetworking`很受欢迎。我现在可以感觉到命名空间冲突。这里的最佳做法是什么？据我了解，我有 3 个选项：

1）构建`AFNetworking`到我的框架中，导出标题。这允许客户使用`AFNetworking`我的库中的版本，但他们不能使用也链接的其他框架`AFNetworking`。如果他们建立在 AFNetworking 的基础上，他们会依靠我来更新 AFNetworking。

2）针对`AFNetworking`标头编写代码，但让第三方包含`AFNetworking`在他们的项目中。这为框架消费者增加了一个额外的步骤，他们必须添加`AFNetworking`源代码。将来可能会出现版本不兼容，但至少如果另一个框架使用`AFNetworking`它们，他们可以同时使用它。

3）重新命名空间`AFNetworking`并保持标题私有。通过这种方式，我可以避免任何方式的命名空间冲突，但更新我的`AFNetworking`. 最终的二进制文件变得有点大，但所有的互操作性问题都得到了解决。这对我来说还有很多工作要做。

我还有其他选择吗？最佳实践是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T17:11:28.703

更好的选择是使用[http://cocoapods.org](http://cocoapods.org)。这样，可以声明库的依赖关系并获得整个项目的单个下载。

不要重命名标题。很费时间，也很难。

PD：一个样本：

[http://chariotsolutions.com/blog/post/using-cocoapods-to-manage-private-libraries/](http://chariotsolutions.com/blog/post/using-cocoapods-to-manage-private-libraries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T23:35:53.513

就数字 3 而言，它不是完整的“重新命名空间”，但它类似于：

[http://atastypixel.com/blog/avoiding-duplicate-symbol-issues-when-using-common-utilities-within-a-static-library/](http://atastypixel.com/blog/avoiding-duplicate-symbol-issues-when-using-common-utilities-within-a-static-library/)

# ruby - 传递参数，ruby 脚本

> ID：15117191
> 
> 赞同：-2
> 
> 时间：2013-02-27T16:28:47.163
> 
> 标签：ruby, parameter-passing

我正在尝试将 2 个空数组传递给一个方法，但我得到一个参数异常......我阅读了一遍，但仍然无法弄清楚为什么会发生这种情况......

代码：

```
file = File.read("place_code.google.com")
paths = []
urls = []

def parseLog(file, paths)
    file.each_line do |line|
        match = line.match(/([a-z0-9]*GET\s)(.*puzzle\S*)/)
        if match 
            paths << match[2] 
        end
    end
    return paths
end 
```

错误：

```
:in `parseLog': wrong number of arguments (0 for 2) (ArgumentError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:38:25.383

当您调用您的方法时，您没有传入所需的参数。要调用您的方法，您可以执行以下操作：

```
file = File.read("place_code.google.com")
paths = []
urls = []
class NewClass
     def initalize
     end
     def parseLog(file, paths)
        file.each_line do |line|
          match = line.match(/([a-z0-9]*GET\s)(.*puzzle\S*)/)
          if match 
            paths << match[2] 
          end
       end
      return paths
     end
  end
yourClass = NewClass.new()
yourClass.parseLog(file, path) 
```

# jquery - 浮动元素没有正确浮动

> ID：15117199
> 
> 赞同：0
> 
> 时间：2013-02-27T16:29:04.703
> 
> 标签：jquery, html, css, wordpress

我有一些彼此相邻的图像。我希望用户单击一个元素（在本例中单击“bio”按钮）以打开一个新的 div，其中包含将浮动在图像旁边的文本。

我知道这在理论上可以做到，如下所示：http: [//jsfiddle.net/MGDTech/waq7x/1/](http://jsfiddle.net/MGDTech/waq7x/1/)。

```
li {display: block; float:left; background: #eee; margin: 20px; height: 80px; width: 80px;}
li.hide {display: none;} 
```

但是当我在我的测试版 wordpress 网站中实现它时，它不起作用并且文本浮动在图像下方。

这是实际代码：http: [//jsfiddle.net/MGDTech/GT36x/](http://jsfiddle.net/MGDTech/GT36x/)

```
.bio-button {font-family: "Open Sans", sans-serif; font-weight: 600; font-size: 10px; letter-spacing: 1.5px; background: #fff; color: #2d2d2d; width: 44px; text-align: center; padding: 0px 0px 0px 3px; position: relative; top: -125px; z-index: 10; cursor: pointer; margin-top: 360px;}
.bio-button:hover {opacity: 0.5; zoom: 1; filter: alpha(opacity=50);}
.team-member {float: left; margin-right: 40px; }
.team-member .close {float: right;}
.team-member img {opacity: 0.5; zoom: 1; filter: alpha(opacity=50);}
.team-member img:hover {opacity: 1; zoom: 1; filter: alpha(opacity=100);}
.team-member h2, .team-member p, .team-member .bio-button {margin-left: 22px;}
.team-member h2 {font-size: 11px; font-weight: 300; line-height: 15px;text-transform: uppercase; color: #737373; letter-spacing: 2px; -webkit-text-stroke-width: 1px;}
.team-photo p {font-size: 11px; font-weight: 300; line-height: 15px;text-transform: none; color: #737373; padding-top: 5px; -webkit-text-stroke-width: 1px;}
.team-photo {float:left;  width: 50%;}
.team-text {display: none;float: left; width: 50%; height: auto; padding: 25px 0px 0px 0px; font-size: 12px; } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:41:37.790

css 和 div 很棘手。

您在上面描述的问题的简单解决方案是将 div.team-text 移动到 div.team-photo 之前。这会给您带来关闭按钮的问题——我会将那个按钮移到 div.team-photo 中。

# javascript - 使用移动设备上的按钮打开和关闭用户可缩放

> ID：15117200
> 
> 赞同：4
> 
> 时间：2013-02-27T16:29:06.497
> 
> 标签：javascript, ios, mobile, touch, mobile-safari

我的目标是有一个按钮来打开和关闭移动设备上的缩放功能。

我已经成功地创建了一个按钮，该按钮使用 onClick 事件调用以下函数，以便在初始加载 user-scalable="no" 后打开用户可缩放，并且它按预期工作：

```
function zoom(){
viewport = document.querySelector("meta[name=viewport]");
viewport.setAttribute('content', 'width=device-width; initial-scale=1.0; maximum-scale=3.0; user-scalable=1;');

alert("does this work?");
} 
```

但是，我需要更进一步，并允许用户在第二次触摸按钮时关闭缩放，然后第三次再次打开。等等。下面是当前的javascript代码，if语句正常工作，但现在我似乎无法影响缩放能力。

```
var toggleZoom = 0;

function zoom(){

toggleZoom++;
var toggleModulus=toggleZoom%2;

if(toggleModulus==1)
{
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=device-width; initial-scale=1.0; maximum-scale=3.0; user-scalable=1;');
        alert("if");
}

else
{
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=device-width;   initial-scale=1.0; maximum-scale=1.0; user-scalable=no;');
        alert("else");
};

alert("function complete");
} 
```

我在这里缺少什么吗？我不明白为什么第一个代码允许我在触摸按钮时打开缩放，但第二个代码没有。此外，除了更改属性之外，第二个代码中的所有内容似乎都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T07:13:46.133

一旦您设置，Android 浏览器将不再尊重用户可扩展设置，`user-scalable=0`无论您稍后在同一页面中重新启用它`user-scalable=1`。

相反，总是离开`user-scalable=1`并改为修改`maximum-scale=1.0`为`maximum-scale=2.0`（例如）。

另请参阅我的答案以更深入地了解同一问题：

[禁用后如何启用用户可缩放（视口属性）？](https://stackoverflow.com/questions/13162174/how-to-enable-user-scalable-viewport-property-after-disabling-it/16933635#16933635)

**评论**

我真的认为在切换用户可扩展性方面给予任何自由没有任何目的。如果您正在制作应用程序或使用媒体查询，则应始终关闭缩放。否则，如果您的网站对移动设备不友好，那么您应该保持用户可扩展。

# mysql - MySQL 属性搜索（严格）

> ID：15117204
> 
> 赞同：0
> 
> 时间：2013-02-27T16:29:14.823
> 
> 标签：mysql, sql

我收到以下查询：

```
SELECT      SQL_CALC_FOUND_ROWS u.unit_id, u.unit_serial_full, u.unit_status, u.contract_id, u.warehouse_id,
            m.model_name,
            c.contract_name,
            t.transfer_id,
            w.warehouse_name_full
FROM        units AS u
LEFT JOIN   models AS m ON m.model_id = u.model_id
LEFT JOIN   contracts AS c ON c.contract_id = u.contract_id
LEFT JOIN   transfers AS t ON t.transfer_id = u.transfer_id
LEFT JOIN   warehouses AS w ON w.warehouse_id = u.warehouse_id
LEFT JOIN   units_attributes AS ua ON ua.unit_id = u.unit_id
WHERE       1
        AND u.company_id = :company_id
        AND (
                (
                    u.model_id = "4"
                AND (
                        ua.attribute_id = :attribute_id_0 AND attribute_default = :attribute_value_0
                    )
                AND (
                        ua.attribute_id = :attribute_id_1 AND attribute_default = :attribute_value_1
                    )
                )
            ) 
```

如果我使用 2 个或更多属性进行搜索，它不会给出任何结果，但如果我只有 1 个属性，则查询会按预期工作。有任何想法吗 ？

搜索必须严格。不带通配符。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:31:33.497

那么，ua.attribute_id 不能同时是两个值

```
(
    ua.attribute_id = :attribute_id_0 AND attribute_default = :attribute_value_0
)
AND (
    ua.attribute_id = :attribute_id_1 AND attribute_default = :attribute_value_1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:32:00.580

```
SELECT      SQL_CALC_FOUND_ROWS u.unit_id, u.unit_serial_full, u.unit_status, u.contract_id, u.warehouse_id, m.model_name, c.contract_name, t.transfer_id, w.warehouse_name_full
FROM        units AS u
LEFT JOIN   models AS m ON m.model_id = u.model_id
LEFT JOIN   contracts AS c ON c.contract_id = u.contract_id
LEFT JOIN   transfers AS t ON t.transfer_id = u.transfer_id
LEFT JOIN   warehouses AS w ON w.warehouse_id = u.warehouse_id
LEFT JOIN   units_attributes AS ua ON ua.unit_id = u.unit_id
WHERE 1 = 1
    AND u.company_id = :company_id
    AND u.model_id = "4"
    AND ua.attribute_id IN (:attribute_id_0, :attribute_id_1)
    AND attribute_default IN (:attribute_value_0, :attribute_value_1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:47:46.857

一列不能同时具有两个不同的值。因此，过滤器如`ua.attribute_id = :foo AND ua.attribute_id = :bar`导致`Impossible WHERE`子句。

最好的解决方案通常是对您的结果进行*分组*，并仅针对包含满足您条件的记录的结果组过滤结果组，即使用`HAVING`子句：

```
GROUP BY col1, col2, col3
HAVING   SUM(ua.attribute_id = :foo) AND SUM(ua.attribute_id = :bar) 
```

# excel - 偏移 vba 对象

> ID：15117212
> 
> 赞同：0
> 
> 时间：2013-02-27T16:29:39.133
> 
> 标签：excel, vba

我有一个简单的宏，它已经工作了几个月，现在当我重新格式化时它突然坏了（线索，但我想不通）。我知道问题集中在偏移函数上，这似乎有一些问题。

我想用别的东西（细胞），但我不知道怎么用。

具体来说，我有一个 Range，我正在检查并更改附近的单元格。

有没有办法用“细胞”做这样的事情

```
Dim x As Variant
x = Worksheets("Book1").Range("A131")
If (x = some value And x>0) Then
x.Offset(0,7).Value = some value
End if 
```

现在 excel 向我显示需要 Object 的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:37:18.410

您需要使用 SET：

```
SET x = Worksheets("Book1").Range("A131") 
```

当您不使用 SET 时，您返回的是单元格中的值，而不是实际的范围对象（使用 Offset() 所必需的）...使用 X 后使用 x.Value 返回单元格的内容.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:33:44.197

您使用 Cells() 的代码：

```
Dim x As Variant
Dim ws as Worksheet

Set ws = Worksheets("Book1")
x = ws.Cells(131, 1).Value ' row 131, column 1 (A131)
If (x = some value And x>0) Then
   ws.Cells(138, 1).Value = someValue ' row 138, column 1 (A138)
End if 
```

# javascript - 非活动选项卡内的 jQuery 目标锚标记

> ID：15117213
> 
> 赞同：2
> 
> 时间：2013-02-27T16:29:43.200
> 
> 标签：javascript, jquery, tabs, tags, anchor

我正在开发一家餐厅外卖网站，并试图弄清楚如何从其他选项卡定位选项卡内的锚标签，例如，主选项卡将是：菜单、信息、评论，然后在菜单选项卡内我想要一个列出食物类型（开胃菜、主菜等）的子菜单，理想情况下，我希望它们都同时可见，例如，如果您从评论单击到甜点，您将进入菜单选项卡以甜点锚。

```
<ul class='tabs'>
<li><a href='#tab1'>Menu</a></li>
    <ul class="submenu">
       <?php foreach ($contents as $header_id => $item_array): ?>
       <li>
          <a href="#<?php echo $item_array[0]["content"] ?>"><?php echo $item_array[0]["content"] ?></a>
       </li>
      <?php endforeach; ?>
    </ul>
<li><a href='#tab2'>Info</a></li>
<li><a href='#tab3'>Reviews</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:40:54.257

要通过单击链接从一个选项卡切换到另一个选项卡，您可能需要将自定义处理程序附加到这些链接。

例如：

HTML：

```
<li><a href="#" class="desertLink">Dessert</a></li> 
```

JS：

```
$(".desertLink").click(function(){
  $( ".tabs" ).tabs( "option", "active", 1 );
  $( "html, body" ).animate({scrollTop:$('#dessert_id').position().top}, 'slow');
}); 
```

会将您的选项卡从“菜单”选项卡切换到“信息”选项卡。

有关更多选项，请查看[http://api.jqueryui.com/tabs/#option-active上的 Tabs API](http://api.jqueryui.com/tabs/#option-active)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:35:27.023

> 如何从其他选项卡定位选项卡内的锚标记？

尝试使用`find()`“*获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤*”的方法。

```
$('ul.tabs li ul.submenu').each(function() {
    var anchors = $(this).find('a'); //these anchors are per sub menu.
}); 
```

# ajax - 替换/更新网站内容

> ID：15117222
> 
> 赞同：0
> 
> 时间：2013-02-27T16:30:04.907
> 
> 标签：ajax, html, jquery

我认为是时候寻求帮助了。七天的阅读 AJAX 教程让我感到沮丧，我比以往任何时候都更加困惑。我的目标是在单击事件后动态更改内容并加载（静态）内容。单击 a 后替换 a 内容的最佳方法（或至少一种方法）是什么？（与形式无关）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:48:24.517

要替换静态页面中的内容，一种方法是使用 JSON 对象，例如：

1）点击一个HTML按钮，有一个与之关联的onClick事件（javascript）。

2) 在 onClick 事件中，将其设置为执行 xhrPost 调用（在这种情况下，我使用 DOJO 工具包，您可以使用 DOJO、YUI、JQuery 等

```
function refreshDataGrid(gridDesc, url) {
  dojo.xhrPost({
    url: unescape(url),
    handleAs : "json",
    sync: true,
    load: function (response, args) {
    if (response.success) { 
     dojo.byId('divSearchResultMessages').innerHTML = "";
     dojo.removeClass('divResults','hiddenField');
     dojo.data.ItemFileReadStore({data:response.searchResults}));
    }else {
     dijit.byId('dg'+gridDesc).setStore(null);
     dojo.byId('divSearchResultMessages').innerHTML = "<div style='text-align:center' class='warning'><br><br>" + response.messages+"</div>";
     dojo.addClass('divResults','hiddenField');
   }
    return response;
            },
            error: function (exception, args) { 
                standby.hide();
                handleAjaxError2();
                return response;        
            }
        });     
    } 
```

3）一旦请求发送到服务器端（java）servletController，您可以处理从javascript传递的信息（作为请求参数）并将JSON对象返回给servlet（前端）页面

4）如果一切都正确完成，您应该会看到您的页面获得动态数据而无需刷新整个页面。

有很多 AJAX 教程可以帮助您确定我的帮助。我希望这有帮助。

参考： [http ://www.ibm.com/developerworks/library/wa-ground/](http://www.ibm.com/developerworks/library/wa-ground/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T16:32:28.753

您可以使用 jquery 在您的内容中已经存在的图层上执行 .toggleVisibility 以及其他操作。

# git - 哪些指标对基于 git 衡量开发人员进度有用？

> ID：15117224
> 
> 赞同：0
> 
> 时间：2013-02-27T16:30:12.617
> 
> 标签：git, metrics, code-metrics, developer-tools

可以`git`显示任何可能有助于跟踪开发人员进度的指标吗？

我知道`git shortlog --since="1/1/12"`作为一个基本实用程序，可以查看每个开发人员总共有多少次提交。每次提交的行数或添加的文件怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:44:45.800

[GitStats](http://gitstats.sourceforge.net/)是一个实用程序，可以分析存储库并输出一些统计数据和指标。

不幸的是，尽管它是用 Python 编写的，但它非常依赖于 unix（没有真正的原因），当您希望它查看其他分支而不只是 master 时，统计数据很奇怪。很长一段时间以来，我一直想自己编写一个工具，但从来没有真正实现过。

话虽如此，GitStats 仍然可以很好地工作，并且它能够生成的数据也很好。[您可以在此处](http://gitstats.sourceforge.net/examples/)找到一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:12:10.260

还有另一个名为[Codegraphite](http://www.codegraphite.com/)的服务，它还跟踪在存储库中添加或删除的行、提交、文件和图像。据我所知，它适用于任何 git repo。

它还将所有数据可视化为图表和图形页面。它有一些有趣的可以比较编码器和提交流。对于某些人来说，这些指标可能没有用，但它确实提供了一种设置基准的方法。它还允许您通过一个快照跟踪代码中发生的所有事情。

# networking - Windows Phone 8 模拟器的主机文件位于何处？

> ID：15117228
> 
> 赞同：3
> 
> 时间：2013-02-27T16:30:18.100
> 
> 标签：networking, windows-8, windows-phone-8

在 Windows 8 上使用 Windows Phone 8 模拟器，如何更新模拟器使用的主机文件？

我已尝试更新 Windows 8 主机文件 (C:\Windows\System32\Drivers\etc\hosts)。这不会影响 Windows Phone 8 模拟器中的 Internet Explorer。

# sql - 使用 XPATH/XQUERY 选择具有属性 X 的元素的所有值

> ID：15117229
> 
> 赞同：3
> 
> 时间：2013-02-27T16:30:23.727
> 
> 标签：sql, sql-server, xpath, xquery

我对 XPath 和 XQuery 比较陌生。我正在使用存储在名为`tblXML`. XML 存储在此表中`caseID`。对于此示例，此值是唯一的。XML 本身存储在标记为 的列中`Data`。

如果你去`select * from tblXML where caseID = '12345'`你会看到这个：

```
caseID        data
------        ------
12345         <root><patient><diagnosis preferred_name="diagnosis" tier="1">Melanoma</diagnosis> (XML file stored as blob in database) 
```

如果您要深入研究 XML，它看起来像这样。例如，这是“12345”`data`列中的 XML：`caseID`

```
<root>
    <patient>
        <diagnosis preferred_name="diagnosis" tier="1">Melanoma</diagnosis>
        <month_of_birth preferred_name="month_of_birth" tier="1">02</month_of_birth>
        <day_of_birth preferred_name="day_of_birth" tier="2">01</day_of_birth>
        <year_of_birth preferred_name="year_of_birth" tier="1">1960</year_of_birth>
        <new_tumor_events>
            <month_of_nte preferred_name="month_of_nte" tier="1">12</month_of_nte>
            <day_of_nte preferred_name="day_of_nte" tier="2">30</day_of_nte>
            <year_of_nte preferred_name="year_of_nte" tier="1">1994</year_of_nte>
        </new_tumor_events>
        <follow_ups>
            <follow_up>
                <month_of_fu preferred_name="month_of_fu" tier="1">12</month_of_fu>
                <day_of_fu preferred_name="day_of_fu" tier="2">31</day_of_fu>
                <year_of_fu preferred_name="year_of_fu" tier="1">1995</year_of_fu>
            </follow_up>
            <follow_up>
                <month_of_fu preferred_name="month_of_fu" tier="1">12</month_of_fu>
                <day_of_fu preferred_name="day_of_fu" tier="2">31</day_of_fu>
                <year_of_fu preferred_name="year_of_fu" tier="1">1996</year_of_fu>
            </follow_up>
        </follow_ups>
    </patient>
</root> 
```

**目标：** 我正在尝试为具有`@Tier`属性的 XML 文档的所有级别/节点上的所有元素选择所有值`"1"`。我希望看到每个值都在它自己的行中的一个名为“值”的列中输出，如下所示：

```
caseID     Value
------     ------
12345      Melanoma
12345      02
12345      1960
12345      12
12345      1994
12345      12
12345      1995
12345      12
12345      1996 
```

这是类似于我正在尝试编写的 SQL：

```
DECLARE @tier int 
SET @tier = '1' --To search by tier explicitly via variable

    select 
        x.caseID,
    bar.value('(//*[@tier = sql:variable("@tier")])[1]','varchar(max)') as value
from tblXML as x
    CROSS APPLY data.nodes('//*:patient') AS foo(bar)
where
    x.caseID = '12345'
    and x.data.value('(//@tier)[1]', 'varchar(3)') = '1' 
```

这给了我...

```
case ID        value
------         ------  
12345          Melanoma 
```

...但不是我正在寻找的其他行。

`[1]`我认为我的困惑集中在我的 CROSS APPLY 语句中的单例和上下文节点所施加的约束上。我不确定如何获取文档中第 1 层的所有内容，而不仅仅是查询找到的第 1 层的第一个实例。

对于这个示例，我知道我的 CROSS APPLY 语句中的上下文节点专注于`patient`XML 部分，但我希望能够在 XML 树的所有级别上下搜索。我知道`//`for`@Tier`让我可以搜索文档的所有级别，但我的上下文节点似乎在某种程度上驱动/限制了我可以搜索到文档的深度。

我的理解是我可以深入研究 XML（`follow_up`也许？），然后从上到下进行搜索。但是，最深的节点将从 caseID 变为 caseID，从 XML 文档变为 XML 文档。有没有办法将我的 CROSS APPLY 语句通配到给定 XML 文档中最深的节点中，然后`@Tier`在该文档中查找任何出现，然后检索其相应的值？

我意识到这种方法缺乏优雅并且没有性能。到目前为止，我还没有找到明确的文档来给我正在寻找的结果。

在此先感谢您的帮助。

编辑：我应该指定这个 SQL 将是 SQL Server 中表值函数的核心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:50:21.757

定义一个键：

```
<xsl:key name="t" match="*[@tier]" use="@tier"/> 
```

并使用找到所有 teir=1 元素

```
<xsl:for-each select="key('t', '1')">
  ....
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:42:14.687

尝试在您的选择中删除单例：

```
DECLARE @tier int 
SET @tier = '1' --To search by tier explicitly via variable
    select 
        x.caseID,
        bar.value('/string()','varchar(max)')
from tblXML as x
    CROSS APPLY data.nodes('//*[@tier = sql:variable("@tier")]') AS foo(bar)
where
    x.caseID = '12345' 
```

您选择中的 xpath 已经根据匹配的属性值过滤节点，因此您无需在 where 约束中再次执行此操作。xpath 谓词类似于 where。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T08:38:33.727

您基本上可以从 CROSS APPLY 语句中进行层查找，并在您的选择中获取根的值（“。”作为第一个参数）。

```
DECLARE @s XML;
SET @s='<root>
    <patient>
        <diagnosis preferred_name="diagnosis" tier="1">Melanoma</diagnosis>
        <month_of_birth preferred_name="month_of_birth" tier="1">02</month_of_birth>
        <day_of_birth preferred_name="day_of_birth" tier="2">01</day_of_birth>
        <year_of_birth preferred_name="year_of_birth" tier="1">1960</year_of_birth>
        <new_tumor_events>
            <month_of_nte preferred_name="month_of_nte" tier="1">12</month_of_nte>
            <day_of_nte preferred_name="day_of_nte" tier="2">30</day_of_nte>
            <year_of_nte preferred_name="year_of_nte" tier="1">1994</year_of_nte>
        </new_tumor_events>
        <follow_ups>
            <follow_up>
                <month_of_fu preferred_name="month_of_fu" tier="1">12</month_of_fu>
                <day_of_fu preferred_name="day_of_fu" tier="2">31</day_of_fu>
                <year_of_fu preferred_name="year_of_fu" tier="1">1995</year_of_fu>
            </follow_up>
            <follow_up>
                <month_of_fu preferred_name="month_of_fu" tier="1">12</month_of_fu>
                <day_of_fu preferred_name="day_of_fu" tier="2">31</day_of_fu>
                <year_of_fu preferred_name="year_of_fu" tier="1">1996</year_of_fu>
            </follow_up>
        </follow_ups>
    </patient>
</root>';

DECLARE @tblXML TABLE(caseID INT PRIMARY KEY,data XML);
INSERT INTO @tblXML(caseID,data)VALUES(12345,@s);

DECLARE @tier INT;
SET @tier=1;

SELECT
    t.caseID,
    node.value('.','NVARCHAR(512)') AS value
FROM
    @tblXML AS t
    CROSS APPLY t.data.nodes('//*[@tier=sql:variable("@tier")]') AS t1n(node)
WHERE
    t.caseID=12345; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-31T04:34:18.563

尝试这个：

```
SELECT  
    x.caseID,
    bar.value('.','varchar(max)') as value
FROM tblXML as x
    CROSS APPLY data.nodes('//*[@tier=1]') AS foo(bar) 
```

# jquery - 附加到动态添加的元素

> ID：15117234
> 
> 赞同：0
> 
> 时间：2013-02-27T16:30:40.640
> 
> 标签：jquery, dynamic

我有一个在页面加载时存在的 div。我附加了一个按钮和另一个按钮。然后我想单击按钮并将内容附加到 .

到目前为止，第一部分正在工作，但我无法附加到任何动态创建的元素。

```
$(document).ready(function () {

    // THIS WORKS
    $("#Value").change(function () {
        var value = $("#Value").val();
        $("#Question_Field").empty();
        for (var i = 1; i <= value; i++) {
            $("#Question_Field").append('<input type="button" id="button" /><div id="test"></div>');
        }
    });

    // THIS DOES NOT WORK
    $("#test").click(function () {
        console.log("Click");
        ("#test").append(STUFF);
    });
}); 
```

它甚至没有记录点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:34:01.703

有两个主要问题。

1.  当您挂钩事件时，`#test`尚不存在任何元素，因此没有任何东西被挂钩。

2.  您正在使用相同的`id`.

此外，您的电话开头`append`缺少 a 。`$`

您可以使用事件委托修复第一个（此代码也修复了`append`）：

```
$(document).on('click', '#test', function () {
    console.log("Click");
    $("#test").append(STUFF);
}); 
```

这告诉 jQuery 将`click`事件挂钩 on `document`，但仅当事件源自或通过与给定选择器 ( `#test`) 匹配的元素时才触发处理程序，因为它冒泡到文档。

要解决第二个问题，多个元素相同`id`，您需要更改输出元素的循环。很可能你想使用一个类而不是一个`id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:33:28.457

`click`只能处理调用时存在的元素。您应该根据您的 jQuery 版本检查`.live()` [http://api.jquery.com/live/](http://api.jquery.com/live/)或`.on()` [http://api.jquery.com/on/ 。](http://api.jquery.com/on/)

# c - 函数中的 if else 语句......这是一个好习惯吗？

> ID：15117236
> 
> 赞同：2
> 
> 时间：2013-02-27T16:30:45.560
> 
> 标签：c

我有 2 段代码，我想知道使用其中任何一个的原因。两者都有效，但在 C 中这是一个好的做法？

选项1

```
Void GoodPractice()
{
  bool flag;

  if (right)
  {
    flag=1;
  }
  else
  {
    flag=0;
  }
} 
```

或者

选项 2

```
Void GoodPractice()
{
  bool flag=0;

  if (right)
  {
    flag=1;
  }
} 
```

让我知道为什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:35:48.907

两者都不...

```
void GoodPractice()
{
  bool flag = right;

  // though I would return it  ;)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:33:10.343

```
bool flag = right != 0; // if you want to be more explicit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:34:03.517

这两个代码示例在功能上是等效的，所以真正的区别在于风格。

但是，可能存在一个比另一个更清晰的情况。

例如，在一个简短的函数中，第二个选项是明确的，但如果`bool flag=0`在 if 语句和 if 语句之间有很多代码，那么第二个选项就不太清楚了。

正是出于这些原因，我已经使用了这两种方法。看看代码，这对你来说似乎更清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:34:51.033

这取决于你想做什么。

一般来说，第二个版本比第一个版本好，因为没有没有定义标志的代码部分。

```
Void GoodPractice()
{
   bool flag=0;
   // you can use flag  
   if (right)
   {
      flag=1;
   }
}

Void NotAsGoodPractice()
{
   bool flag;
   // you can't use flag, because it has no defined value
   if (right)
   {
      flag=1;
   }
   else
       flag=0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T16:35:04.767

以我的拙见，我觉得这更好。

```
Void GoodPractice()
 {
 bool flag;

  if (right)
  {
    flag=1;
  }
  else
  {
    flag=0;
  }
} 
```

是的，它增加了代码行数，并且可能需要额外的一两个 CPU 周期。

但我觉得，通过以清晰的方式编写代码，涵盖所有可能的逻辑类型，出错的可能性会更小。

# jquery - Firefox中的等高div错误（？）

> ID：15117241
> 
> 赞同：1
> 
> 时间：2013-02-27T16:31:03.777
> 
> 标签：jquery, css, firefox

这让我发疯...

我正在使用下面的代码使`.textContent`div 的文本内容区域与其他 div 的最高文本内容区域的高度相同。目标是包含大小相同的所有 div ，并在底部显示图像，如果您[访问页面](http://hhtoys.geoffmuskett.co.uk/products.php)`.contentBlockShorter`，这将更有意义。这是白色块，第一个块的标题是“建立你的军队”。在 Chrome 和 ie9 上，一切都很糟糕，但在 FF 和 ie8 上，文本和图像之间存在差距——我根本不知道为什么！谁能看到可能发生的事情？谢谢

**css**

```
.contentBlockShorter {
    background-color: #fff;
    padding: 1.5em;
    margin: 0 1% 2em 1%;
    float: left;
    width: 31%;
    min-width: 15em;
}   
.textContent {
    display: block;
    margin: 0;
    padding:0;
}
.contentBlockShorter img {
    width: 100%;
    margin: 0;
    height: auto;
    float: none;
    padding: 0;
} 
```

**html**

```
<div class="contentBlock contentBlockShorter">
    <div class="textContent">
        <h3>Build your army</h3>
        <h4><a href="#">battle packs and special sets to boost your army</a></h4>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div><!-- /textContent --> 
    <img src="img/horrible-histories-toys-roman-and-egyptian-battle-packs.jpg" alt="Horrible Histories Toys Battle Packs" />
    <br class="clear">
</div><!-- /contentBlock --> 
```

**Javascript**

```
var maxHeight = 0;
$(".textContent").each(function(){
    if ($(this).height() > maxHeight) { maxHeight = $(this).height(); }
});
$(".textContent").height(maxHeight); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:48:45.047

我只是没有得到 ie 中的空白，它在所有其他浏览器中都存在。

我认为这与您的字体有关，因为您正在加载字体，jquery 在字体渲染之前触发，因此它使用的是您的后备字体（无衬线），它大于 typekit 字体的含义。被渲染它会在底部留下空白。

要明白我的意思，如果您检查最大 div 的元素并删除标题的“联盟哥特式”字体，您会发现剩下的内容完全适合盒子。

您需要延迟触发 jquery，直到您的字体被渲染之后。尝试使用：

```
$(window).load(function() {
    // javascript code here
}); 
```

# jquery - Windows Phone 8 WebView 页面不是静态的 (jQuery Mobile/PhoneGap)

> ID：15117243
> 
> 赞同：10
> 
> 时间：2013-02-27T16:31:05.617
> 
> 标签：jquery, css, cordova, jquery-mobile, windows-phone-8

为模棱两可的标题道歉；但是我正在尝试将在 Android 和 iOS 上运行良好的 PhoneGap 应用程序移植到 Windows Phone 8（用 jQuery Mobile/JavaScript、HTML 和 CSS3 编写）。

它的大部分工作（虽然我不得不改变几个位，但这是意料之中的）。我目前遇到的一个主要问题是让我们的应用程序的滚动列表功能正常工作，以及签名捕获（我相信两者都是相关的）。我不太确定问题出在哪里，但是当我滚动/签名时，整个页面用我的手指移动，并且各个元素不会接收到触摸事件。我正在使用 iScroll、jQuery 1.7.2 和 jQM 1.1.0；但是，请继续阅读，因为滚动功能正常工作（签名功能一直是个问题）*！*

在滚动停止工作之前，我遇到了页脚栏和页面底部之间的间隙问题：

![jQuery 移动差距](../Images/9452db43323d2ab579a8fd74e8a22081.png)

有人建议我做的一件事是添加以下 CSS；它解决了“差距”问题：

```
@media screen and (orientation: portrait) {
    @-ms-viewport {
        width: 320px;
        user-zoom: fixed;
        max-zoom: 1;
        min-zoom: 1;
    }
} 
```

![jQuery Mobile 差距修复](../Images/3843ef543675173845bebb78394f32a0.png)

但是，它随后导致滚动功能变得无响应。整个页面向上/向下移动，但不是与我想要的相反的列表元素！我尝试添加以下内容，但没有运气：

```
-ms-touch-action: none; 
```

我将此添加到包含页面的 div 元素中。它停止了页面上下移动！然而，这份名单仍然没有反应。但是，如果我删除这两个 CSS 类，则滚动功能会再次起作用，但这会重新引入间隙问题。视口 CSS 类绝对是我相信的正确途径——但我不能，就我的一生来说，让它按照我想要的方式工作。

如果有人可以提供帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T08:51:39.487

首先@-ms-viewport 不支持缩放，所以删除缩放属性，因为它们会产生解析错误。[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh868813.aspx)列出了支持的属性

其次，尝试将此规则添加到您的 CSS 中，并按照您所说的那样在您的中央容器中使用 iScroll

```
@-ms-viewport{width:device-width;}

body {
  overflow: hidden;
  -ms-user-select: none;
  -ms-content-zooming: none;
  -ms-touch-action: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T11:03:40.593

你可以在你的css中使用它，它会修复你的页脚。

```
[data-role=footer]{bottom:0; position:absolute !important; top: auto !important; width:100%;} 
```

# java - 删除优先队列的尾部元素

> ID：15117246
> 
> 赞同：9
> 
> 时间：2013-02-27T16:31:21.343
> 
> 标签：java, priority-queue

如何删除优先级队列的尾部元素？我正在尝试使用优先级队列实现波束搜索，一旦优先级队列已满，我想删除最后一个元素（优先级最低的元素）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:44:55.093

没有简单的方法。将元素从原始元素复制到新元素，最后一个除外。

```
PriorityQueue removelast(PriorityQueue pq)
{

    PriorityQueue pqnew;

    while(pq.size() > 1)
    {
        pqnew.add(pq.poll());
    }

    pq.clear();
    return pqnew;
} 
```

称为

```
pq = removelast(pq); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T17:13:59.533

您可能可以使用 Guava 的[MinMaxPriorityQueue](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/collect/MinMaxPriorityQueue.html)来执行此操作。它为队列的两端提供了 peek、poll 和 remove 方法。

另一种选择是编写一个强制边界的队列包装器，类似于[这个答案](https://stackoverflow.com/a/2382757/658907)。您需要实施`offer`、`add`和`addAll`检查容量。就像是：

```
public class BoundedQueue<E> implements Serializable, Iterable<E>, Collection<E>, Queue<E> {
    private final Queue<E> queue;
    private int capacity;

    public BoundedQueue(Queue<E> queue, int capacity) {
        this.queue = queue;
        this.capacity = capacity;
    }

    @Override
    public boolean offer(E o) {
        if (queue.size() >= capacity)
            return false;
        return queue.add(o);
    }

    @Override
    public boolean add(E o) throws IllegalStateException {
        if (queue.size() >= capacity)
            throw new IllegalStateException("Queue full"); // same behavior as java.util.ArrayBlockingQueue
        return queue.add(o);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        boolean changed = false;
        for (E o: c)
            changed |= add(o);
        return changed;
    }

    // All other methods simply delegate to 'queue'
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T22:17:35.257

使用反相比较器并从头部移除。如果你需要头部和尾部，那么你使用了错误的数据结构。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-02T15:16:23.973

我认为，PR的用例是，他需要头部，但也想要有一个小PQ，所以想法是去除尾部。

由于 PQ 被实现为映射到数组的二叉树，所以头部始终是后备数组 ( `queue[0]`) 的第一个元素，但尾部并不总是在数组的末尾，您必须搜索它。

我认为一个不错的方法是将 PQ 子类化并编写以下两种方法：

```
 public class MyPriorityQueue<E> extends PriorityQueue<E>
    {
        // constructors

    public E getTail()
     {
        // queue.length can be bigger than this.size() !!
        Object[] queue = this.toArray();
        E tail = (E)queue[0];
        Comparator<? super E> comparator = this.comparator();
        if (comparator !=null)
           for(int i = 1; i < this.size(); i++)
              if ( comparator.compare(tail, (E)queue[i]) < 0)
                 tail = (E)queue[i];
        else
           for(int j = 1; j < this.size(); j++)
              if ( ((Comparable)tail).compareTo( ((Comparable)queue[j]) ) < 0 )
                 tail = (E)queue[j];
        return tail;
     }  

     public E removeTail()
     {
        E tail = this.getTail();
        this.remove(tail);
        return tail;
     }   
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-12T18:20:20.033

当您将数据添加到优先级队列本身时，请进行比较；

```
PriorityQueue<Integer> pq = new PriorityQueue<Integer>(Collections.reverseOrder()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-06T07:36:49.460

如果您有理由不向内存生成另一个元素，则有一个更好的解决方案。

您可以获取队列的大小并在计算要遍历的元素时使用迭代器运行它，一旦您到达最后一个或您正在寻找的那个，您可以使用 PriorityQueue.remove(Object o)

```
Iterator<E> it = Queue.iterator();
while (it.hasNext()) {
   temp<E> = it.next();
   counter++;
   if (counter == Queue.size()) {
       Queue.remove(temp);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-19T17:09:37.557

不支持移除尾部。

你能做的最好的事情是交换元素的顺序，让尾巴变成头，而`remove()`不是它。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-03-12T22:06:43.030

如果您关心运行时，我建议您实现自己的队列。我做了以下工作并在我的项目中工作。

1) 从 PriorityQueue -> CustomQueue.java 复制粘贴代码 2) 添加方法 removeLast() 3) 这是我使用的实现（非常少）

```
public void removeLast() {
    if(size == 0) {
       return;
    }
    queue[size - 1] = null;
    size--; 
```

}

这样做的原因是 PriorityQueue 的实现使用数组来保存对象。所以“大小”实际上是指向数组中下一个可用点的指针。通过减少它，数组/队列的大小会减少，就好像您要删除最后一个元素一样。

# tomcat - 是否可以更改 Tomcat Web 应用程序管理器的主题或修改其标题？

> ID：15117247
> 
> 赞同：3
> 
> 时间：2013-02-27T16:31:22.547
> 
> 标签：tomcat, web-applications, themes

我的计算机上有几个tomcat服务器实例（一个是生产，一个是登台/测试/培训）。

用于生产和测试的 tomcat Web 应用程序管理器的（示例）url 如下所示：

`Production: xWeb8.myOwnServer/manager/html`

`test: xWeb8Test.myOwnServer/manager/html`

我想知道是否可以访问 Tomcat Web 应用程序管理器并修改其显示和/或添加颜色主题以指示它是生产还是测试等？如果是，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:08:49.693

In your `webapps` directory you will find the `manager` directory. Looking at the `index.jsp`, `web.xml`, and the source code to the `HTMLManagerServlet`, it looks like it is all hard-coded into the servlet. So it looks like it is not easily possible without rewriting the whole thing.

*Update*: You can create a Filter that modifies the HTML as it passes through the filter.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T18:09:25.437

虽然这是一个旧帖子，但我想我会给我的 2 美分......

即使在 Tomcat 上使用更高版本，我们似乎也无法真正改变 Manager 的外观。

但是，我所做的是将“../manager/images”文件夹中的“tomcat.gif”替换为修改后的 gif，该 gif 标识了我连接到的系统。

请参阅我使用的图像的此屏幕打印...

![在此处输入图像描述](../Images/036e6853dc907f31901aed41365db136.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T07:09:04.860

我自己也在看，在找到这篇文章后，我想出了以下想法：

1.  使用一些可以检测另一个窗口/选项卡中的 onLoad 事件的 java 脚本创建一个简单的 .html 页面。

2.  打开管理员页面。当它加载您的自定义页面时，将检测到 onLoad 事件，并且使用 DOM 将即时进行必要的修改 - 更改 CSS、添加元素等。

我知道这有点间接，但它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-23T12:53:00.463

您可以使用 css 更改每页的主题

例如[https://userstyles.org/styles/153943/tomcat-8-manager-dark](https://userstyles.org/styles/153943/tomcat-8-manager-dark)

```
/* Tomcat Dark Theme - Jerome E. Carter, II - Datatribe Softwers, Ltd. cc 2018 */

body, table
{
  background-color: #555555!important;
}

button, input
{
  background-color: #333333!important;
  border: 1px solid white!important;
  border-radius: 5px;
  color: #ffaa00;
}

/*not working as intended - hope to improve later*/
input[type=button]:hover
{
  background-color: #777777;
}

td
{
  background-color: #777777!important;
}

*
{
  color: white;
}

a
{
  color: #ffaa00;
}

tr:hover
{
  border-color: #aaaaaa!important;
} 
```

最简单的方法是通过浏览器扩展

例如

[https://addons.mozilla.org/en-US/firefox/addon/styl-us/?src=search](https://addons.mozilla.org/en-US/firefox/addon/styl-us/?src=search)

[https://chrome.google.com/webstore/detail/stylus/clngdbkpkpeebahjckkjfobafhncgmne](https://chrome.google.com/webstore/detail/stylus/clngdbkpkpeebahjckkjfobafhncgmne)

# java - JTable-condition if((table.getValueAt(0, 1)).equals("")) 显示错误

> ID：15117253
> 
> 赞同：-2
> 
> 时间：2013-02-27T16:31:34.370
> 
> 标签：java, swing, if-statement, jtable, jbutton

我做了空表：

```
String columnNames[] = {"br", "artikal", "cena", "kolicina","ukupno" };  
String dataValues[][] =new String[10][5];  
DefaultTableModel tableModel=new DefaultTableModel(dataValues, columnNames); 
```

我想通过循环和if条件从第一行到最后一行按顺序填充一列：

```
if ((((JButton)e.getSource()).getText()).equals(name.getName())){

    for (int i=0;i<10;i++){

        String products= (String) bill.tableModel.getValueAt(i, 1);
        String p=Double.toString(name.getPrice());

        if(products.equals(""))                                                                                                  
            bill.tableModel.setValueAt(name.getName(),i, 1);
            bill.tableModel.setValueAt(p,i, 2);
            break;   
    }
} 
```

当我单击按钮时，没有显示任何内容，但是当我删除 if 条件`if (products.equals(""))` 它正在工作时，而是在为空的列中填充单元格时，它再次将文本设置为列中的第一个单元格。

我试过 了`if ( dataValues[i][1].equals("null"))`，`if (products.equals("null"))`它什么也没显示。当我`System.out.print((String) bill.tableModel.getValueAt(0, 1))`在控制台上显示“null”时。

还有其他方法可以填充列中的单元格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:49:03.233

您的代码可能应该是：

```
if(products!=null && products.equals("")) {
    bill.tableModel.setValueAt(name.getName(),i, 1);
    bill.tableModel.setValueAt(p,i, 2);
} 
```

我假设 if 语句的主体周围有花括号，因为我不明白单击按钮时您要做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:03:06.890

这工作正常：

```
 if (e.getSource()instanceof JButton){

                  for (Product name:Main.manu){

                        if ((((JButton)e.getSource()).getText()).equals(name.getName())){

                            for (int i=0;i<10;i++){

                                String products= (String) bill.tableModel.getValueAt(i, 1);
                                String p=Double.toString(name.getPrice());

                                if (products!=null)  
                                continue;
                                {                                                                                                

                                    bill.tableModel.setValueAt(name.getName(),i, 1);
                                    bill.tableModel.setValueAt(p,i, 2);

                                break;   }

                        }

                      }
                 }                
                }
            } 
```

# visual-studio-2012 - SQL 数据库项目：根据构建配置构建不同的脚本

> ID：15117258
> 
> 赞同：5
> 
> 时间：2013-02-27T16:32:05.210
> 
> 标签：visual-studio-2012, msbuild, database-project, sql-server-data-tools, msbuild-target

我要解决的问题是根据构建配置构建不同的脚本。

假设我们有两个 SQL Server 实例：

*   带有连接的链接服务器的企业版
*   用于离线开发和单元测试的 LocalDb 版本

当 LocalDB 用本地表替换这些视图时，企业版具有链接服务器的视图。

那些链接服务器视图和本地表具有相同的名称和字段集。因此默认情况下它们不包含在构建中（构建操作 = 无）。相反，它们包含在项目文件的 BeforeBuild Target 中的构建中。

```
<Target Name="BeforeBuild">

    <ItemGroup Condition=" '$(Configuration)' == 'LocalDb'">
        <Build Include="Local_Tables\*.sql" />
    </ItemGroup> 

    <ItemGroup Condition=" '$(Configuration)' != 'LocalDb' ">
        <Build Include="Linked_Server_Views\*.sql" />
    </ItemGroup>

</Target> 
```

但问题是 Visual Studio 缓存了 DB 模型，如果我们首先为 LocalDb 构建项目，然后尝试为企业配置构建项目 - Visual Studio 输出错误：

*错误：SQL71508：模型已经有一个同名的元素*

如果要关闭并打开解决方案或卸载项目并重新加载项目，Visual Studio 将重新创建 dbmdl 文件，并且正在构建企业配置而不会出现错误。

所以我的假设是如果我刷新 dbmdl 缓存，我会顺利构建而不会出错。

* * *

当您在 Visual Studio 2012 中打开或重新加载 SQL Server 数据库项目时，它会创建一个扩展名为*dbmdl*的文件，这是一个反序列化和缓存的数据库模型，如此[处](https://stackoverflow.com/questions/3634649/what-is-the-function-of-the-dbmdl-file-in-vs-database-project)所述。

在重新创建 dbmdl 文件时，Visual Studio 输出以下内容：

```
Deserializing the project state for project 'MyProject.sqlproj'...
Detecting file changes for project 'MyProject.sqlproj'...
Deserialization has been completed for project 'MyProject.sqlproj'. 
```

如何强制 Visual Studio 在不重新加载项目且不更改项目 xml 文件的情况下刷新 dbmdl 缓存？

有没有办法刷新 dbmdl 缓存，将命令放入项目 xml 文件的 BeforeBuild 或 AfterBuild 目标？

或者解决问题的整个方法是错误的，还有另一种方法可以根据构建配置构建不同的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T15:37:06.660

在使用复合项目时，您可能还有另一种可能的选择。Jamie Thompson 在这里写了关于它们的博客：http: [//sqlblog.com/blogs/jamie_thomson/archive/2013/03/10/deployment-of-client-specific-database-code-using-ssdt.aspx](https://web.archive.org/web/20190330053308/http://sqlblog.com/blogs/jamie_thomson/archive/2013/03/10/deployment-of-client-specific-database-code-using-ssdt.aspx)

这将允许您构建一个主项目并将其他项目与特定于环境的代码联系起来。您可以通过在发布脚本中进行一些检查来部署适当的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T17:32:48.193

我正在考虑这个问题以及使用 SSDT 处理它的最佳方法。我可能没有“最佳”方式，*但*如果您可以在发布更改之前确定正确的版本，我会考虑：

1.  为每个版本创建一个发布配置文件 - 有和没有链接服务器。
2.  创建变量来保存您的链接服务器名称，可能还包括数据库，例如“[Server].[Database]”。
3.  为您的链接服务器视图创建一个部署后脚本。这些应该包括权限、链接服务器名称的变量等等。
4.  在 Post-Deploy 脚本中，查询您的“版本”变量。如果它将使用链接服务器，请在项目中删除/重新创建本机非链接服务器视图以使用链接服务器上的视图。或者，将变量设置为本地视图的空字符串和链接服务器的服务器/数据库，您可能只使用一组代码。

这样做的缺点是无法对视图进行代码检查，但会给您一个存储链接服务器视图的位置和一个部署它们的位置。您需要使用 Drop/Create 发布，而不是让 SSDT 处理更改，这意味着它们将在每个 Publish 操作中重新创建。不过，我认为它可能会为您提供所需的解决方案。

# objective-c - 为模拟器添加所有异常断点，但不为 iPad 添加

> ID：15117259
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:32:08.147
> 
> 标签：objective-c, xcode, breakpoints

我正在尝试同时在 iPad 和模拟器上运行我的项目。现在我想为模拟器添加所有异常断点，但恐怕这也会应用于 iPad。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:35:39.663

> 我正在尝试同时在 iPad 和模拟器上运行我的项目。

真的有可能吗？（调试它）据我所知，您无法在设备和模拟器上运行和调试。选一个 ;）

# c - GraphicsMagick：在新图像 C 上注释文本

> ID：15117264
> 
> 赞同：2
> 
> 时间：2013-02-27T16:32:17.443
> 
> 标签：c, graphicsmagick

我想使用 GraphicsMagick C API（低级）在空白图像上写一个文本。这是我的代码。

```
 ExceptionInfo exception;
  InitializeMagick(0);
  GetExceptionInfo(&exception);

  ImageInfo *image_info;
  Image* img;
  image_info = CloneImageInfo((ImageInfo*) NULL);

  strcpy(image_info->filename, "test.jpg");

  img = AllocateImage(image_info);
  img->columns = 200;
  img->rows = 200;
  img->x_resolution = 100;
  img->y_resolution = 100;

  DrawContext dr = DrawAllocateContext(NULL, img); 
  DrawAnnotation(dr, 1,1, (const unsigned char*)("hello world"));
  WriteImage(image_info, img);
  return ""; 
```

图像已创建，但大小为零。我不明白如何初始化所有这些结构。谢谢

# oracle-apex - Oracle APEX 导出文件格式

> ID：15117266
> 
> 赞同：0
> 
> 时间：2013-02-27T16:32:21.250
> 
> 标签：oracle-apex

执行 Oracle APEX 应用程序导出时，您需要选择文件格式 - UNIX、DOS 或数据库。

对于 UNIX 或 DOS，这适用于哪个环境 - 浏览器、Web/App 服务器或数据库服务器？

数据库选项有什么作用？我什么时候想使用这个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:09:09.987

正如保罗所说，“Unix”与“DOS”只是在导出的`.sql`脚本中选择 eol 标记。

“数据库”表示脚本存储在您的工作区导出存储库中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T22:10:24.337

它确定导出脚本中用于行尾标记的内容。

*   UNIX =`lf`
*   DOS =`cr` `lf`

当我选择“数据库”然后进行导出时，它没有将文件保存到我的计算机上。我只能假设它做了一些事情，比如将脚本保存在某个地方的表格中，但到目前为止我还没有找到任何文档来提供帮助。

对我来说，我在 Windows PC 上做所有事情（导出和导入），所以我总是将它设置为 DOS（数据库服务器是 UNIX），我从来没有遇到任何问题。

# php - Jquery 将单个变量发布到 PHP

> ID：15117267
> 
> 赞同：0
> 
> 时间：2013-02-27T16:32:26.417
> 
> 标签：php, jquery, json

我有“创建用户”表单，它必须检查用户名是否已经存在。为此，我在启动此脚本的按钮上创建了一个 onclick 函数：

```
$.ajax({
type: \"POST\",
dataType: \"json\",
url: \"test.php\",
data: $('input[name=Username]').val(),
contentType: \"application/json; charset=utf-8\",
success: function(data){
alert('Items added');
},
error: function(e){
console.log(e.message);
}
}); 
```

但是，什么都没有发生，即使警报说明没有成功！请帮助我了解如何发布该单个变量以及如何从 PHP 页面检查用户名是否存在的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:35:27.363

1.  不要逃避 JS 的随机位。摆脱`\`s
2.  如果您使用标准表单 mime 类型格式化而不是仅发送单个原始字符串，则处理提交的数据要容易得多。`data: { keyName: $('input[name=Username]').val() }`
3.  您没有发送 JSON 文本。摆脱`contentType: etc etc`. （保留它可能会导致 PHP 出现“这不是表单数据，我无法填充`$_POST`它”）。让 jQuery 确定它发送的内容类型。

然后你可以`$_POST['keyName']`在你的PHP中访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:34:28.863

您的`data`密钥需要一个`value`对象，如下所示：

```
data: {username: $('input[name=Username]').val())}, 
```

这样，`username`将创建 POST 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:35:02.797

您需要将变量分配给可以在`$_POST`调用中引用的项目：

```
$.ajax({
    type: "POST",
    url: "test.php",
    data: {user:$('input[name=Username]').val()},
    success: function(data){
        alert('Items added');
    },
    error: function(e){
        console.log(e.message);
    }
}); 
```

然后在`test.php`，刚刚检索`$_POST['user']`。

编辑 - 我删除了 contentType（感谢 Rocket）。我还删除了数据类型，因为如果您正确设置标题，则不需要这样做`test.php`：

```
header('Content-type: application/json'); 
```

# android - TextView.setText() 不工作

> ID：15117270
> 
> 赞同：1
> 
> 时间：2013-02-27T16:32:29.697
> 
> 标签：android, textview, handler, settext

我有这段代码...

```
class IncomingHandler extends Handler
{
    @Override
    public void handleMessage(Message message) 
    {

        String totalReceived = (String) message.obj;
        Log.i("TAG", "total received: " + totalReceived);
        totalTextView.setText("" + totalReceived);

        Log.i("TAG", (Looper.getMainLooper().getThread() == Thread.currentThread()) ? "UI thread" : "NOT UI thread");
        //Toast.makeText(MainActivity.this, "message received.", Toast.LENGTH_LONG).show();

    };
}; 
```

我运行我的应用程序，它工作得很好，但如果我重新创建活动，例如通过更改设备方向，文本将不会更新。请注意，我确实收到了这些消息，并且它们已由 LogCat 成功打印。

另请注意，在我的最后一个日志中，我尝试确定我是否在主线程上运行。如果该检查是正确的，我确实在 UI 线程上运行......

关于我可能做错了什么的任何想法？

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:04:54.823

您的问题是`totalTextView`仍然指向（现在已销毁）先前活动的 TextView。

如果`class IncomingHandler`是 Activity 的子类，那么确保在`onCreate()`您确保更新它的过程中应该很容易`totalTextView = (TextView)findViewById(R.id.__/* something */__);`

如果处理程序不是 Activity 的子类，那么也许它应该是，或者您应该查看更多 Android-Framework-High-Level 的东西来更新和回调 Activity（例如 Loaders 或 UI-less 片段`setRetainInstance(true);`)

ps.：有些用户会告诉你只需通过放入`configChanged`清单来覆盖 Activity 的销毁。虽然它可能在一开始就起作用，但它是一个糟糕的快速修复，这是一种不可取的模式，通常会在未来导致更大的问题。

来自：http: [//developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

> 注意：应避免使用此属性，并且仅将其用作最后的手段。有关如何正确处理由于配置更改而重新启动的更多信息，请阅读处理运行时更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:39:59.403

由于 lint 建议处理程序应该是静态的，使处理程序静态并创建一个`weakReference`活动，然后通过活动引用访问 textview，我认为它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:42:13.873

尝试保存实例添加这个

```
@Override
protected void onSaveInstanceState(Bundle outState) {
State s = new State(yourTextView.getText().toString());
outState.putSerializable(State.STATE, s);
super.onSaveInstanceState(outState);
 }
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
super.onRestoreInstanceState(savedInstanceState);
State s = (State) savedInstanceState.getSerializable(State.STATE);
yourTextView.setText(s.getYourTextViewText());
 } 
```

# node.js - 断开连接前的NodeJS连接

> ID：15117274
> 
> 赞同：0
> 
> 时间：2013-02-27T16:32:36.000
> 
> 标签：node.js, connection, webserver

首先抱歉标题被误解了，但不能让它变得更好。所以这是我的问题：我正在使用 NodeJS 和 socket.IO。我有一个大厅系统，用于游戏之类的东西。您创建 root，其他人加入等。我希望当房间的所有者关闭连接时，房间应该自行删除。我是这样做的

```
db.game.findOne({ _id: ObjectId(roomId) }, function(err, item)
    {
        if ( err || !item || item.started )
            return;

        if ( item.createdBy == currentUser )
        {
            db.game.remove({ _id: ObjectId(roomId) }, function(err, item) {
                io.sockets.in(roomId).emit('force_interupt');
            });
        } 
```

它正在工作，但我有问题。如果该人只是在浏览器上按 REFRESH，则网络服务器（php、nginx、mongod）首先获取游戏内容 -> 显示它，然后游戏被 NodeJS 删除，因为连接丢失。有什么想法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:53:29.507

您对房间的生命周期有何期望？

如果你想在 socket.io 连接关闭时关闭房间，你已经得到了你想要的。

如果你想在 http session 过期时关闭房间，你应该将房间连接到 session，这意味着你需要将房间信息保存在 http session 数据中，并在 session 过期时删除房间。

如果你想在 socket.io 连接关闭时关闭房间，除非连接关闭是由于页面重新加载或临时网络问题引起的，你可以这样做：

1.  定义一个“退出”命令。在客户端，关闭前发送“退出”命令。在服务器端，如果收到“退出”命令，立即移除房间。
2.  如果连接在没有“退出”命令的情况下关闭，请保留空间一段时间（例如 30 秒）。如果用户在房间被移除之前重新连接，则保留房间。否则，删除房间。

# nhibernate - NHibernate 显式多态性

> ID：15117278
> 
> 赞同：0
> 
> 时间：2013-02-27T16:32:46.230
> 
> 标签：nhibernate

我的基类映射：

```
<class name="BaseClient,BackOffice.Core"  table="client" polymorphism="explicit"  >
<id name="Id" unsaved-value="0" type="int">
  <column name="id" not-null="true"/>
  <generator class="hilo">
    <param name="max_lo">0</param>
    <param name="where">table_name = 'clients'</param>
  </generator>
</id>
<property name="Name" >
  <column name="name" length="1024"/>
</property> 
```

它的孩子的映射

```
 <joined-subclass name="Client, Transport.Core" table="transport_client" extends="BaseClient, BackOffice.Core">
    <key column="Id"/>
  </joined-subclass> 
```

映射类，包含 BaseClient

```
 <class name="BankPayment, BackOffice.Core"  table='bank_payment'>
    <id name="Id" unsaved-value="0" type="int">
      <column name="id" not-null="true"/>
      <generator class="native"/>
    </id>    
    <many-to-one name="ClientSource" class="BaseClient,BackOffice.Core" column="client_source_id" cascade="none"/> 
```

现在查询：

```
ICriteria criteria = NHibernateSession.CreateCriteria(typeof(BankPayment));
criteria.SetFetchMode(BankPayment.Properties.ClientSource, FetchMode.Join); 
```

所以我得到这个sql

```
FROM bank_payment this_ 
left outer join client baseclient2_ on this_.client_source_id=baseclient2_.id 
left outer join transport_client 
```

所以我的问题是为什么我得到第二个 sql，以及如何避免它。我认为显式多态应该有所帮助，但我有第二次加入。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:04:28.987

你不能避免加入，有一个很好的理由：既然`Client`存在，任何对 a 的引用`BaseClient`都可以是 a `Client`。

您特别要求 NHibernate 获取`ClientSource`，而这样做的唯一方法是使用连接；否则它会冒着获得“不完整”实例的风险。

“显式”多态属性值的作用与此无关；仅针对特定类型的查询（查看文档以获得更好的描述）

# c# - 收据打印机上的 WPF PrintVisual 正在剪切图像

> ID：15117280
> 
> 赞同：6
> 
> 时间：2013-02-27T16:32:49.703
> 
> 标签：c#, wpf, printing

我正在将 WPF 中的视觉效果打印到收据打印机（Star TSP 700II）。当视觉效果很小时，它很好，打印也很好。

但是，当视觉效果变大时，它会剪切图像并在 Star 打印机的卷筒上打印到特定尺寸，然后它只是剪切而不打印图像的其余部分。

```
PrintDialog.PrintVisual(Grid1, "Test"); 
```

我已经尝试调整 PageMediaSize 但这并没有改变打印输出上的任何内容。

有趣的是，当我打印到 Microsoft XPS Document Writer 时，保存的文件具有完整图像。

![在此处输入图像描述](../Images/6bda22e7ba76bd41259bef23af1149ed.png)

我还注意到它打印的尺寸始终是最大高度 = A4 页面的高度。问题是如何让它打印超过 A4 的高度（当我从打印机首选项打印测试文档时，它能够做到这一点）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-23T23:32:32.030

好的，我使用以下课程解决了这个问题。基本上我把我想打印的东西放在一个滚动查看器里面，然后在里面放一个堆栈面板，然后把这个堆栈面板传递给我的打印助手，它现在打印而不剪裁：

```
public static class PrintHelper
{

    public static FixedDocument GetFixedDocument(FrameworkElement toPrint, PrintDialog printDialog)
    {
        var capabilities = printDialog.PrintQueue.GetPrintCapabilities(printDialog.PrintTicket);
        var pageSize = new Size(printDialog.PrintableAreaWidth, printDialog.PrintableAreaHeight);
        var visibleSize = new Size(capabilities.PageImageableArea.ExtentWidth, capabilities.PageImageableArea.ExtentHeight);
        var fixedDoc = new FixedDocument();
        //If the toPrint visual is not displayed on screen we neeed to measure and arrange it  
        toPrint.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
        toPrint.Arrange(new Rect(new Point(0, 0), toPrint.DesiredSize));
        //  
        var size = toPrint.DesiredSize;
        //Will assume for simplicity the control fits horizontally on the page  
        double yOffset = 0;
        while (yOffset < size.Height)
        {
            var vb = new VisualBrush(toPrint)
            {
                Stretch = Stretch.None,
                AlignmentX = AlignmentX.Left,
                AlignmentY = AlignmentY.Top,
                ViewboxUnits = BrushMappingMode.Absolute,
                TileMode = TileMode.None,
                Viewbox = new Rect(0, yOffset, visibleSize.Width, visibleSize.Height)
            };
            var pageContent = new PageContent();
            var page = new FixedPage();
            ((IAddChild)pageContent).AddChild(page);
            fixedDoc.Pages.Add(pageContent);
            page.Width = pageSize.Width;
            page.Height = pageSize.Height;
            var canvas = new Canvas();
            FixedPage.SetLeft(canvas, capabilities.PageImageableArea.OriginWidth);
            FixedPage.SetTop(canvas, capabilities.PageImageableArea.OriginHeight);
            canvas.Width = visibleSize.Width;
            canvas.Height = visibleSize.Height;
            canvas.Background = vb;
            page.Children.Add(canvas);
            yOffset += visibleSize.Height;
        }
        return fixedDoc;
    }

    public static void ShowPrintPreview(FixedDocument fixedDoc)
    {
        var wnd = new Window();
        var viewer = new DocumentViewer();
        viewer.Document = fixedDoc;
        wnd.Content = viewer;
        wnd.ShowDialog();
    }

    public static void PrintNoPreview(PrintDialog printDialog,FixedDocument fixedDoc)
    {
        printDialog.PrintDocument(fixedDoc.DocumentPaginator, "Test Print No Preview");

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:37:59.970

您正在使用 PrintDialog.PrintVisual 它只应该打印您可以看到的内容。对于多页结果，您需要做更多的事情。

你可以试试 DocumentPaginator [http://msdn2.microsoft.com/en-us/library/system.windows.documents.documentpaginator.aspx](http://msdn2.microsoft.com/en-us/library/system.windows.documents.documentpaginator.aspx)

或者

PrintDialog.PrintDocument [http://msdn2.microsoft.com/en-us/library/system.windows.controls.printdialog.printdocument.aspx](http://msdn2.microsoft.com/en-us/library/system.windows.controls.printdialog.printdocument.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T11:39:37.300

最近几天我也遇到了这个问题。

解决方案是在内存中渲染根元素。

```
PrintDialog dlg = new PrintDialog();

// Let it meassure to the printer's default width
// and use an infinity height
Grid1.Meassure(new Size(dlg.PrintableAreaWidth, double.PositiveInfinity));

// Let it arrange to the meassured size
Grid1.Arrange(new Rect(Grid1.DesiredSize));

// Update the element
Grid1.UpdateLayout(); 
```

然后创建一个新的纸张尺寸供打印机使用：

您应该检查打印机的切割设置（例如使用`Receipt`切割模式）。

```
// Create a new papersize with the printer's default width, and the Grids height
dlg.PrintTicket.PageMediaSize 
= new PageMediaSize(dlg.PrintableAreaWidth, Grid1.ActualHeight);

// Let's print !
dlg.PrintVisual(Grid1, "blah"); 
```

这对我来说就像一个魅力，并为我节省了很多代码。

由于不需要收据打印机`pagination`，我认为这很容易使用。

*请注意，我**不**使用此方法来呈现`UIElement`在 XAML 中创建的内容，它都是在代码中以`StackPanel`as root element*制作的。

# javascript - 检查复选框验证javascript中的数量

> ID：15117281
> 
> 赞同：0
> 
> 时间：2013-02-27T16:32:52.687
> 
> 标签：javascript, checkbox

最近我发布了一个关于为什么我的 javascript 表单不起作用的问题。三个问题之一是 - 复选框和数量

我需要使用我的 chkquantity 正则表达式测试每个输入值，并确保订购的数量超过零，因为目前我的代码仅检查已选中复选框但未提供数量或提供数量但未选中复选框的情况和因此，这些测试不排除未选中复选框且所有数量设置为零的提交。

然后我需要为 totqty 小于或等于零生成进一步的测试

正则表达式 - var chkquantity = ^([1-9]?\d|[1-4]\d{2}|500)$/

测试

```
if (((document.form1.summer.checked) && (summer2012 <=0)) 
|| ((document.form1.autumn.checked) && (autumn2012 <=0)) 
|| ((document.form1.winter.checked) && (winter2012 <=0)))
{ 
alertmsg = alertmsg + "Please enter Quantity" +"\n"; 
}
else if (((!document.form1.summer.checked) && (summer2012 >0)) 
|| ((!document.form1.autumn.checked) && (autumn2012 >0)) 
|| ((!document.form1.winter.checked) && (winter2012 >0))) { 
alertmsg = alertmsg + "Please choose Product" +"\n";
}

if (alertmsg != "")
{
alertmsg = "Please enter the following values \n" + alertmsg;
alert(alertmsg);
} 

var f = document.form1;
if (!f.summer.checked && !f.autumn.checked && !f.winter.checked) {
alertmsg = alertmsg + "Please choose at least one edition of the magazine" +"\n";

}

if ((chkquantity.test(quantity) <= 500) {
alertmsg = alertmsg + "Please limit each magazine to 500 copies or less:" + "\n";
} 
```

html -

```
 <form name="form1" method="post">
    <fieldset id="fieldset">
       <legend id="legend">Order the latest Saraysounds Magazine</legend>
 <table width="500" border=0 align="left" cellpadding="4" cellspacing="4">
           <tr>
          <td colspan="2"><div align="left">First Name</div></td>
          <td colspan="2"><input type="text" name="fname"/>
          </td>
        </tr>
        <tr>
          <td colspan="2"><div align="left">Second Name</div></td>
          <td colspan="2">
            <input type="text" name="lname"/>
          </td>
        </tr>
         <tr>
          <td colspan="2"><div align="left">Address</div></td>
          <td colspan="2"><textarea name="address" cols="30" rows=5 col=40 wrap=soft>    </textarea>
          </td>
          </tr>
          <tr>
           <td colspan="2"><div align="left">Postcode</div></td>
          <td colspan="2">  <input type="text" name="postcode"/>
          </td>
        </tr>
           <tr>
          <td colspan="2"><div align="left">Email</div></td>
          <td colspan="2">
            <input type="text" name="email"/>
          </td>
        </tr>
         <tr>
          <td colspan="2"><div align="left">Telephone</div></td>
          <td colspan="2">
            <input type="text" name="telephone"/>
          </td>
              </tr>
                  <tr>
                 <td colspan="4"><center>
                   <strong>Select Magazine</strong></center></td>
                 </tr>
                     <tr>
                 <td width="123"><center>
                 <strong>Product Name</strong></center></td>
                 <td width="30" ><center>
                   <strong></strong>
                 </center></td>
                   <td ><center>
                   <strong>Price</strong>
                 </center></td>
                   <td>
                  <strong>Quantity</strong>
                 </td>
             </tr>
           <tr>
             <td  align="right">Summer 2012
               </td>
             <td>
               <input type="checkbox" name="summer" value="Summer 2012"/>
           </td>
             <td align="center" width="69"><div align="right">20.00 </div></td>
             <td width="216"><input name="summer2012" type="text" size="5"   value="0"/></td>
               </tr>
         <tr>
             <td align="right">Autumn 2012
             </td>
             <td>
               <input type="checkbox" name="autumn" value="Autumn 2012"/>
           </td>
             <td align="center" width="69"><div align="right">20.00 </div></td>
             <td><input name="autumn2012" type="text" size="5" value="0"/></td>
         </tr>
         <tr>
             <td align="right">Winter 2012
           </td>
             <td>
               <input type="checkbox" name="winter" value="Winter 2012"/>
          </td>
             <td align="center"  width="69"><div align="right">20.00</div></td>
             <td><input name="winter2012" type="text" size="5" value="0"/></td>
          </tr>
               <tr>
             <td align="center" colspan="4"><input name="button" type="button"   onClick="javascript:display()" value="Submit"/>
              <input type="reset" value="Clear Form"/>
             </td>
           </tr>
  </table>
   </fieldset>
 </form> 
```

# java - Java keylistener 使用箭头键移动汽车

> ID：15117287
> 
> 赞同：0
> 
> 时间：2013-02-27T16:33:29.800
> 
> 标签：java, swing, keylistener

我正在尝试实现一个 keylistener 来使用箭头键在我的程序中移动汽车。这是我的代码。

```
package moveCar;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CPanel extends JPanel{ 
private static final long serialVersionUID = 1L;
CarComponent component;
public CPanel() {
    component = new CarComponent();
    JButton startButton = new JButton("Start");
    JButton stopButton = new JButton("Stop");
    startButton.addActionListener(new StartAction());
    stopButton.addActionListener(new StopAction());

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new FlowLayout());
    buttonPanel.add(startButton);
    buttonPanel.add(stopButton);

    this.setLayout(new BorderLayout());
    this.add(buttonPanel, BorderLayout.NORTH);
    this.add(component, BorderLayout.SOUTH);
}

class StartAction implements ActionListener {
    public void actionPerformed(ActionEvent e){
        component.setAnimation(true);
    }
}
class StopAction implements ActionListener {
    public void actionPerformed(ActionEvent e){
        component.setAnimation(false);
    }
}
}

package moveCar;

import javax.swing.*;

public class CarViewer  {
CPanel a = new CPanel();
public CarViewer(){
    a.add(new CPanel());
}
public static void main(String[] arg){
    JFrame frame = new JFrame();
    //frame.setSize(800,200);
    frame.setTitle("This is strange .....");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(new CPanel());
    frame.pack();
    frame.setVisible(true);
}
} 
```

我相信这就是您需要的所有代码，但是如果您需要我的其他代码，我可以得到。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:54:29.903

您尚未向应用程序添加任何键绑定。查看关于[Swing 键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)的 Java 教程以获取有关如何执行此操作的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T16:43:23.220

您必须使用 addKeyListener：

```
addKeyListener(yourKeyListener); 
```

请参阅此[最小示例](http://www.java2s.com/Code/JavaAPI/javax.swing/JTextFieldaddKeyListenerKeyListenerl.htm)。

# c++ - 在具有 2003 ISO C 绑定的 Visual Studio 2010 中从 Fortran 调用 C++ 函数

> ID：15117292
> 
> 赞同：2
> 
> 时间：2013-02-27T16:33:43.623
> 
> 标签：c++, visual-studio, fortran, fortran-iso-c-binding

我必须从我的 fortran 程序中调用一个 C++ 函数。我正在使用 Visual Studio 2010。我在本书[http://www.amazon.com/Guide-Fortran-Programming-Walter-Brainerd/dp/1848825420](https://rads.stackoverflow.com/amzn/click/com/1848825420)中阅读了有关 2003 ISO C 绑定的相关章节。我尝试编译并运行第 219 页的简单示例（我在下面复制了它），但它显示“错误 LNK2019：未解析的外部符号 _c 在函数 _MAIN__ 中引用”。这些是我遵循的步骤。

1）我用Fortran主程序和模块创建了一个Fortran项目，并将其设置为“启动项目”。

2）我创建了一个“静态库”类型的 C++ 项目。

3）我添加了 $(IFORT_COMPILERvv)\compiler\lib\ia32 在这里解释[http://software.intel.com/en-us/articles/configuring-visual-studio-for-mixed-language-applications](http://software.intel.com/en-us/articles/configuring-visual-studio-for-mixed-language-applications)

当我编译时，我得到了那个错误。如果我评论 Call C 行，它会完美运行，所以它找不到 C 函数。有什么建议吗？提前致谢。以下是 C 和 Fortran 代码：

```
 module type_def
       use, intrinsic :: iso_c_binding
       implicit none
       private

       type, public, bind(c) :: t_type
          integer(kind=c_int) :: count
          real(kind=c_float) :: data
       end type t_type
    end module type_def

    program fortran_calls_c
       use type_def
       use, intrinsic :: iso_c_binding
       implicit none

       type(t_type) :: t
       real(kind=c_float) :: x, y
       integer(kind=c_int), dimension(0:1, 0:2) :: a

       interface
          subroutine c(tp, arr, a, b, m) bind(c)
             import :: c_float, c_int, c_char, t_type
             type(t_type) :: tp
             integer(kind=c_int), dimension(0:1, 0:2) :: arr
             real(kind=c_float) :: a, b
             character(kind=c_char), dimension(*) :: m
          end subroutine c
       end interface

       t = t_type(count=99, data=9.9)
       x = 1.1
       a = reshape([1, 2, 3, 4, 5, 6], shape(a))
       call c(t, a, x, y, "doubling x" // c_null_char)
       print *, x, y
       print *, t
       print *, a

    end program fortran_calls_c

    #include "stdafx.h"
    //#include <iostream>
    #include <fstream>
    typedef struct {int amount; float value;} newtype;
    void c(newtype *nt, int arr[3][2], float *a, float *b, char msg[])
    {
        printf (" %d %f\n", nt->amount, nt->value);
        printf (" %d %d %d\n", arr[0][1], arr[1][0], arr[1][1]);
        printf (" %s\n", msg);
        *b = 2*(*a);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:39:13.893

现在编辑答案以反映 IanH 评论中的建议和知识：

正如@BoBTFish 建议的那样，请注意`extern "C"`C++ 函数的声明`c`。当然，请确保您使用大写字母 C，那里的一些评论有点松散。

我注释掉了源代码行，其中包括`stdafx.h`似乎是可选的，我不会为寻找或创建它而烦恼。

在那之后，对于 Fortran 项目，

*   文件所在目录的链接器/常规/附加库目录`lib`；和
*   Linker/Input/Additional Dependencies 来指定`lib`文件。

将 C++ 和 Fortran 项目的运行时库选项设置为相同。在 Fortran 项目的属性页面中，将 Fortran / Libraries 设置为`Debug Multithread DLL`.

现在它编译并执行并产生以下内容：

```
 99 9.900000
 2 3 4
 doubling x
   1.100000       2.200000
          99   9.900000
           1           2           3           4           5           6 
```

多亏了 IanH 的投入，我现在是一个更明智的脚本跟随猴子。

# jquery - Kendo UI自动完成的dataTextField如何组合两个字段？

> ID：15117296
> 
> 赞同：8
> 
> 时间：2013-02-27T16:33:53.530
> 
> 标签：jquery, autocomplete, kendo-ui, datasource, concatenation

我想为剑道自动完成的 dataTextField 属性组合两个字段。

我的数据源有一个 FirstName 字段和一个 LastName 字段。

```
schema: {
            data: "d",
            model: {
                id: "PersonId",
                fields: {
                    PersonId: {
                        type: "number",
                        editable: false // this field is not editable
                    },
                    FirstName: {
                        type: "text",
                        validation: { // validation rules
                            required: true // the field is required
                        }
                    },
                    LastName: {
                        type: "text",
                        validation: { // validation rules
                            required: true // the field is required
                        }
                    }
                }
            }
        } 
```

有没有办法可以将自动完成配置为显示 FirstName + LastName？

也许我必须对数据源做一些事情，如果是这样，有人可以提供一个简单的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T17:21:35.920

你应该使用**[模板](http://demos.kendoui.com/web/autocomplete/template.html)**：

例如：

```
template:"The name is : #= FirstName # #=LastName #" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-17T16:08:06.793

使用模板是一个有效的解决方案。但是，如果您希望始终在模型上访问复合或计算字段，您可以在模式定义中定义[解析函数](http://docs.telerik.com/kendo-ui/api/javascript/data/datasource#configuration-schema.parse)。

```
schema: {
    data: "d",
    model: {
        id: "PersonId",
        fields: {
            PersonId: {
                type: "number",
                editable: false // this field is not editable
            },
            FirstName: {
                type: "string",
                validation: { // validation rules
                    required: true // the field is required
                }
            },
            LastName: {
                type: "string",
                validation: { // validation rules
                    required: true // the field is required
                }
            },
            Name: {
                type: "string"
                // add any other requirements for your model here
            }
        }
    },
    parse: function (response) {
        var values = response.d,
            n = values.length,
            i = 0,
            value;
        for (; i < n; i++) {
            value = values[i];
            value.Name = kendo.format("{0} {1}",
                value.FirstName,
                value.LastName);
        }

        return response;
    }
} 
```

parse 函数在使用服务器响应之前对其进行预处理，因此您可以修改现有字段或附加新字段。然后，您可以直接在使用模型的任何控件中引用字段。

# php - 将图像直接保存到 PHP 中的目录？

> ID：15117303
> 
> 赞同：3
> 
> 时间：2013-02-27T16:34:13.737
> 
> 标签：php

我有一个图像文件。示例：http: [//images5.fanpop.com/image/photos/31100000/random-random-31108109-500-502.jpg](http://images5.fanpop.com/image/photos/31100000/random-random-31108109-500-502.jpg)

我想将图像保存到主机中名为 images-folder 的目录中。使用 PHP 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T16:35:58.447

是的，这很简单。这是一个小[cURL](http://en.wikipedia.org/wiki/CURL)脚本来做到这一点：

```
$image_link = "http://images5.fanpop.com/image/photos/31100000/random-random-31108109-500-502.jpg";//Direct link to image
$split_image = pathinfo($image_link);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL , $image_link);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$response= curl_exec ($ch);
curl_close($ch);
$file_name = "images-folder/".$split_image['filename'].".".$split_image['extension'];
$file = fopen($file_name , 'w') or die("X_x");
fwrite($file, $response);
fclose($file); 
```

这应该做你想要的。它将图像保存到目录中，然后将图像命名为`random-random-31108109-500-502`<-filename `.jpg`<-extension。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T16:39:34.667

没有[cURL](http://en.wikipedia.org/wiki/CURL)更简单：

```
<?php
    $link= "http://images5.fanpop.com/image/photos/31100000/random-random-31108109-500-502.jpg";
    $destdir = 'images-folder/';
    $img=file_get_contents($link);
    file_put_contents($destdir.substr($link, strrpos($link,'/')), $img);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:38:25.227

这是另一个更容易理解的例子，直接来自我评论过的网站

```
$remote_img = 'http://www.somwhere.com/images/image.jpg';
$img = imagecreatefromjpeg($remote_img);
$path = 'images/';
imagejpeg($img, $path); 
```

[http://www.edmondscommerce.co.uk/php/php-save-images-using-curl/](http://www.edmondscommerce.co.uk/php/php-save-images-using-curl/)

# code-metrics - 每个提交是否有可以用作基准的平均行数？

> ID：15117305
> 
> 赞同：0
> 
> 时间：2013-02-27T16:34:16.463
> 
> 标签：code-metrics

试图跟踪进展并建立公司范围的基准。我知道每种语言都是不同的，但是这些东西有通用的基准吗？

开发人员可能不应该一次进行大量更改并将所有更改作为一次提交来完成。但是他们可能不应该在每行更改时都提交。

对性能标准有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:43:08.053

根据编写的代码行数创建策略可能不是最好的方法。

您应该有某种明确的目标/冲刺/故事/任何您想称呼它们的计划。一个好的做法是尽可能频繁地提交最低级别的定义。因此，如果 sprint 由目标组成，而故事由 sprint 组成，则承诺每个目标。

同样，只提交经过全面测试和工作的代码也是一种很好的做法。特别是如果你在做主干开发，主干应该总是 100% 测试并且稳定。如果您有错误代码，请将其保留在本地或单独的分支中。

最后，因为我写了 X 行代码而提交不应该被用作标准。虽然它确实在数据丢失的情况下提供了某种冗余，但它最终会用不重要的进度标记使你的提交日志变得混乱。我有没有提到每个提交都应该有评论？想象一下使用 line# 策略的评论会是什么样子。

'我添加了 int x=0; 并重新组织源代码，使其更具可读性'

如果我正在查看日志，试图找出我一周假期后项目的进展情况，我将不得不筛选所有那些无用的代码提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:28.853

虽然我同意对于某些跟踪提交和行的数量并不是质量代码最有用的指标，但它仍然可以为您提供一个很好的鸟瞰图来了解您的公司的运作方式。对于超过 20 人的开发团队来说，能够跟踪您的编码人员并确保每个人都在正轨上并推进项目是一件好事。

此外，一些人认为解决一个错误可能需要一整天的时间，但被困在一个问题上也可能是徒劳的。最好继续前进，而不是陷入单一项目。能够知道谁被卡住了，这有助于我更好地分配我的资源，并且坦率地说，这些资源根本没有完成任何事情。

如果您正在寻找这样的指标，我会推荐[CodeGraphite](http://www.codegraphite.com/)或[git-stats](http://gitstats.sourceforge.net/)

# c# - 进程启动不断失败。通过代码启动 exe 失败

> ID：15117306
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:34:21.453
> 
> 标签：c#, wpf, process

我正在尝试通过以下代码启动 WPF 应用程序可执行文件：

```
 Task.Factory.StartNew(() =>
            {
                CloseOpen();
            });

void CloseOpen()
{
      string srLocationss = @"" + srLocation + @"\Mycoded.exe";
      Process.Start(srLocationss);
} 
```

可执行文件启动并立即失败。如果我双击它，它可以工作。我真的很困惑。

这是错误

![在此处输入图像描述](../Images/0a1cb5adeb744d0c0bfb79c741a8f753.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:14:50.403

屏幕截图清楚地表明您确实成功地启动了程序。但它立即崩溃并显示 Windows 错误报告对话框。您还没有 ExitCode，因为该进程尚未退出。在您关闭对话框之前不会发生这种情况。

显然，“调试程序”选项很有吸引力。

进程在启动时崩溃的许多原因。到目前为止，最常见的一种方法是不设置 ProcessStartInfo.WorkingDirectory 属性。编写不佳的程序通常假定默认工作目录设置为 EXE 的路径。并尝试使用相对路径名而不是完整路径名加载文件（例如“mumble.txt”而不是“c:\foo\bar\mumble.txt”）。如果没有设置工作目录，那就太糟糕了。它不会与您当前的代码一起使用。

如果这个程序是你自己的，那么通过为 AppDomain.CurrentDomain.UnhandledException 编写一个事件处理程序来改进它。显示或记录 e.ExceptionObject.ToString() 的值。现在你*知道*它为什么崩溃了。

# javascript - 为 node.js 安装 V8plus

> ID：15117314
> 
> 赞同：2
> 
> 时间：2013-02-27T16:34:31.360
> 
> 标签：javascript, node.js, v8

我正在安装 v8+ C++ 到 C 边界层附加组件（[https://github.com/wesolows/v8plus](https://github.com/wesolows/v8plus)），以便调用我编写的 C 包装器，但我很难理解如何安装和使用它。

我通过在我的依赖文件中列出 v8plus 模块来安装它：package.json，然后使用 npm install，现在我试图通过使用它们列出的命令将它绑定到 Makefile：

```
PREFIX_NODE := $(shell dirname `bash -c 'hash node; hash -t node'`)/..
V8PLUS :=      $(shell $(PREFIX_NODE)/bin/node -e 'require("v8plus");') 
```

但是，每当我在我的 ubuntu 终端中输入它时，它都无法识别上面输入的“shell”命令，并建议我应该安装“lshell”、“spell”或“bshel​​l”。有人可以解释一下我如何正确安装和使用这个模块，以便通过 node.js 中的 Javascript 调用我的 C 函数。

我正在使用 C 包装器来调用 popen 以便代表我的 node.js 应用程序将命令通过管道传输到终端，是否有更好的解决方案来解决这个问题，然后使用以下命令：

```
popen()
execv c
system 
```

你能推荐任何其他好的解决方案/教程来解决这个问题吗？

感谢您的时间！

# android - 将十进制转换为 Unicode 字符

> ID：15117316
> 
> 赞同：2
> 
> 时间：2013-02-27T16:34:35.697
> 
> 标签：android

我想将十进制值或十六进制转换为 unicode char 我试过`Character.toString((char))`它一直不工作它返回错误的结果。有没有一种一直有效的方法？

编辑：在调用此方法之前我做错了。它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:47:47.120

## 如何在 Android 中将十进制或十六进制整数表示的 Unicode 字符转换为 Java 字符串：

* * *

我`Character.toString()`用来将 unicode 整数/十六进制值转换为字符串字符。此示例将向上箭头字符的 unicode 值转换为字符串。

向上箭头示例：[http ://en.wikipedia.org/wiki/File:U%2B2191.svg](http://en.wikipedia.org/wiki/File:U%2B2191.svg)

```
final int upSymbolUnicode = 0x2191;
final String text = Character.toString((char)upSymbolUnicode); 
```

我希望这有帮助。

# r - 如何在 R 中提供 html 页面？

> ID：15117318
> 
> 赞同：1
> 
> 时间：2013-02-27T16:34:51.517
> 
> 标签：r, http, webserver, r-rook-package

我有一个包含 html 文件的文件夹，我想启动一个简单的 HTTP 服务器来提供所请求的文件。

我一直在尝试使用`Rook`，但它要求生成 HTML 响应的应用程序功能。

```
library(Rook)
server <- Rhttpd$new()
server$start(quiet=TRUE)
server$add(name="my_app", app="path/to/app.R") 
```

我想我可以以某种方式告诉 app 函数读取请求的 HTML 文件的内容并将其用作响应，但应该有一种更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T22:41:31.043

我知道这篇文章有点旧，但我遇到了类似的问题，所以我想我会在这里发布我的解决方案。

[旁白：我想通过 rook 提供常规的 html/js/css 以及 json 对具有统计解决方案的 ajax 查询的响应 - 因此想要使用 R]

```
R.server <- Rhttpd$new(); # Create server

# Use a Builder to add a 
staticApp <- Builder$new( 
  Static$new(
      urls=c('/www/css',
             '/www/js/libs',
             '/www/js',
             '/www/img',
             '/www'),
  root=getwd()
))
R.server$add(app=staticApp, name="static")
R.server$start() 
```

基本上我的工作目录包含一个名为**www**的文件夹，其中包含我所有的静态资源（在子文件夹 css、js 等中）。特别是如果文件夹**www**包含文件**index.html**则可以通过**localhost:23702/custom/static/www/index.html访问**

其他更多以 R 为重点的操作的应用程序可以很容易地包含在构建器构建中。

**将www**移至 root = file.path(getwd(),'www') 并递归搜索所有子文件夹可能不会更干净。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T22:52:46.447

你应该看看这个例子`?Builder`。

你说得对，`Rook`希望你提供一个“应用程序”。但是，几乎可以根据需要构建“应用程序”。并`Builder`进入这一点。

的典型用法`Builder`是提供：

1.  静态页面的 url（js、css、图像等）
2.  将通过函数 brew() 的动态页面的 url `brew`，这些可以是`.html`或`.Rhtml`pages
3.  用于重定向您的 Web 应用程序的 url（默认或索引页面）

# nhibernate - 存储库实现

> ID：15117327
> 
> 赞同：3
> 
> 时间：2013-02-27T16:35:15.900
> 
> 标签：nhibernate, repository

我正在考虑改进我当前的存储库`GetAll`方法实现并在下面编写了代码。我试图在谷歌中找到这种方法的想法，但没有成功。因此，请查看代码并帮助我回答以下一些问题。这是简化的示例：

```
class Service
{
    public void DoOperation()
    {
        // Let's say we need to retrieve users by criteria
        var items = UnitOfWork
            .Over<User>() // Get repository of User
            .GetAll()     // Start querying

            // If we need simple WHERE then use:
            .Where(x => x.Email == "some@email.com")

            // If we need more complex condition then use specification:
            .Using(new UserNameContains("John"))

            // Execute:
            .List();
    }
}

class UnitOfWork
{
    public Repository<T> Over<T>()
    {
        // Get from DI container or injected field
        return new Repository<T>();
    }
}

class Repository<T>
{
    public QueryWrapper<T> GetAll()
    {
        return new QueryWrapper<T>(Session.QueryOver<T>());
    }
}

class QueryWrapper<T>
{
    // Query from DB session. Init from constructor.
    private IQueryOver<T> _query;

    public QueryWrapper<T> Where(Expression<Func<T, bool>> expression)
    {
        _query = _query.Where(expression);
        return this;
    }

    public QueryWrapper<T> Using(Specification<T> spec)
    {
        var spec = new TSpec();
        _query = spec.Apply(_query);
        return this;
    }

    public IEnumerable<T> List()
    {
        return return _query.List();
    }
}

abstract class Specification<T>
{
    public abstract IQueryOver<T> Apply(IQueryOver<T> query);
}

class UserNameContains : Specification<User>
{
    // Init from constructor:
    private string _name;

    public override IQueryOver<User> Apply(IQueryOver<User> query)
    {
        return /* apply filter condition here */;
    }
} 
```

因此，我们得到了这样的好处：

1.  不再需要创建自定义回购。单个泛型就足够了。
2.  自定义规范实现现在与数据层分离并且可测试。
3.  易于使用的服务。
4.  我们总是能够扩展`QueryWrapper`以支持其他方法，例如`OrderBy`等。
5.  它仍然是可单元测试的。

您能否指出我的方法的漏洞或提供您对问题的看法？现有文章的链接也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:43:18.817

我的建议是将您的架构减少到最低限度，并向自己证明每个添加层和抽象的好处。最小的 GetAll 实现是：

```
Session.Query<User>(); 
```

如果您有**将被重复使用的限制，**您可以将它们添加为扩展方法。如果可重用代码变得明显，那么重构为扩展方法就足够简单了。即使这样，对于简单的情况，如果您只包装一个 Lambda 表达式，如本例所示，重构通常没有什么好处。

```
public static IQueryable<User> UserNameContains(this IQueryable<User> queryable, string text)
{
    return queryable.Where(u => u.UserNameContains(text));
} 
```

我发现存储库模式不是很有用，但它可能是一种组织代码的合理方式。但我真的不喜欢通用存储库模式，因为它强制每个类规则一个存储库。如果我使用存储库，我喜欢将与根对象（例如 Project、ProjectStatus 等）相关的查询分组。此外，在通用存储库中提供 Get 或 GetAll 方法没有任何好处，因为 ISession 已经提供了这些方法。

至于可测试性，查询测试始终是集成测试，在 ASP.NET MVC 中，我直接测试控制器或任何独立的查询方法。我在 Windows 窗体项目中使用存储库进行测试。

# regex - R摆脱单引号字符

> ID：15117332
> 
> 赞同：0
> 
> 时间：2013-02-27T16:35:26.600
> 
> 标签：regex, r, encoding, utf

我有一个要处理的字符串向量，但我无法摆脱一些奇怪的字符。

当我阅读 csv 文件时，我使用了以下行：

```
train <- read.csv(file="files/file1.csv", header = T, encoding = "UTF-8") 
```

我用这条线来尝试摆脱标点符号：

```
train$var1 <- gsub("[[:punct:]]", " ", train$var1) 
```

但是在运行后检查，我仍然看到奇怪的单引号，'...'，以及像密码隐藏字符一样的黑点。这是输出：

```
dput(unique(unlist(var1List))[c(30242:30246, 30561, 30484)])
c("opportunity…", "about…", "expected…", "reward…", "us…", "‘as", 
"<U+25CF>") 
```

有什么摆脱这些角色的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:41:50.553

您可以删除除一组合法字符之外的所有内容：

```
train$var1 <- gsub("[^\\w\\s]", " ", train$var1, perl = TRUE) 
```

例如，会将不是字母数字或空白字符的每个字符更改为空格。

# django - json中的Django REST框架url

> ID：15117333
> 
> 赞同：3
> 
> 时间：2013-02-27T16:35:27.023
> 
> 标签：django, django-rest-framework

我在此处的示例 REST 框架站点[http://restframework.herokuapp.com/snippets/](http://restframework.herokuapp.com/snippets/)中注意到 ，每个用户都有一个名为“url”的字段，可以方便地链接到用户详细信息页面。Django REST 文档中的哪里是他们如何实现这一目标的示例，或者有人可以为我提供一个示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:40:56.373

使用`serializers.HyperlinkedModelSerializer`并添加 'url 这应该添加详细信息部分。

链接：[serializers.HyperlinkedModelSerializer](http://django-rest-framework.org/tutorial/5-relationships-and-hyperlinked-apis.html)

**更新：**

您可以使用 HyperlinkedModelSerializer 添加 ID，只需添加....

```
 id = serializers.Field() 
```

完毕 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:45:28.380

有一个专门针对这个主题的教程的整个页面：http: [//django-rest-framework.org/tutorial/5-relationships-and-hyperlinked-apis.html](http://django-rest-framework.org/tutorial/5-relationships-and-hyperlinked-apis.html)

检查标有“超链接我们的 API”的部分。它显示了定义您在该页面中看到的 JSON 的代码：

```
class SnippetSerializer(serializers.HyperlinkedModelSerializer):
    owner = serializers.Field(source='owner.username')
    highlight = serializers.HyperlinkedIdentityField(view_name='snippet-highlight', format='html')

    class Meta:
        model = models.Snippet
        fields = ('url', 'highlight', 'owner',
                  'title', 'code', 'linenos', 'language', 'style') 
```

# c# - 即使路径中有百分比编码的部分，我如何才能可靠地获取实际 URL？

> ID：15117342
> 
> 赞同：18
> 
> 时间：2013-02-27T16:35:57.190
> 
> 标签：c#, asp.net, asp.net-mvc, iis

IIS 和 ASP.NET (MVC)在使用*路径*中带有 %-encoding 的 url 时[会出现一些故障](https://stackoverflow.com/questions/7913830/is-iis-performing-an-illegal-character-substitution-if-so-how-to-stop-it)（不是查询字符串；查询字符串很好）。我怎样才能解决这个问题？即我怎样才能得到请求的实际 URL？

 *例如，如果我导航到`/x%3Fa%3Db`和（分别）导航到`/x?a=b`- 它们都报告`.Request.Url`为- 因为*路径*`/x?a=b`中的编码数据报告不正确。

 ** * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T16:35:57.190

我解决这个问题的方法是查看底层服务器变量；该`URL`变量包含一个*解码*值；该`QUERY_STRING`变量包含仍然编码的查询。我们不能只在零件上调用*encode*`URL`，因为它还包含`/`原始形式的原始等 - 如果我们盲目地对整个事物进行编码，我们将得到不需要的`%2f`值；但是，可以将其分开并发现有问题的情况：

```
private static readonly Regex simpleUrlPath = new Regex("^[-a-zA-Z0-9_/]*$", RegexOptions.Compiled);
private static readonly char[] segmentsSplitChars = { '/' };
// ^^^ avoids lots of gen-0 arrays being created when calling .Split
public static Uri GetRealUrl(this HttpRequest request)
{
    if (request == null) throw new ArgumentNullException("request");
    var baseUri = request.Url; // use this primarily to avoid needing to process the protocol / authority
    try
    {
        var vars = request.ServerVariables;
        var url = vars["URL"];
        if (string.IsNullOrEmpty(url) || simpleUrlPath.IsMatch(url)) return baseUri; // nothing to do - looks simple enough even for IIS

        var query = vars["QUERY_STRING"];
        // here's the thing: url contains *decoded* values; query contains *encoded* values

        // loop over the segments, encoding each separately
        var sb = new StringBuilder(url.Length * 2); // allow double to be pessimistic; we already expect trouble
        var segments = url.Split(segmentsSplitChars);
        foreach (var segment in segments)
        {
            if (segment.Length == 0)
            {
                if(sb.Length != 0) sb.Append('/');
            }
            else if (simpleUrlPath.IsMatch(segment))
            {
                sb.Append('/').Append(segment);
            }
            else
            {
                sb.Append('/').Append(HttpUtility.UrlEncode(segment));
            }
        }
        if (!string.IsNullOrEmpty(query)) sb.Append('?').Append(query); // query is fine; nothing needing
        return new Uri(baseUri, sb.ToString());
    }
    catch (Exception ex)
    { // if something unexpected happens, default to the broken ASP.NET handling
        GlobalApplication.LogException(ex);
        return baseUri;
    }
} 
```**

# module - Yii 从应用程序中调用模块模板

> ID：15117346
> 
> 赞同：1
> 
> 时间：2013-02-27T16:36:03.337
> 
> 标签：module, yii

我想要的是主站点的菜单、页脚和页眉，而内容属于模块的模板。那么哪些可以做以及如何做呢？

*   从主应用程序模板（视图）调用属于模块的子模板（视图，而不是布局）

或者

*   从模块模板（视图）中，调用属于主应用程序的模板

我知道一个模块是一个独立的应用程序，但是有没有将它连接到主应用程序？方法**render**似乎没有提供这种机制。

我需要一个答案示例。

**编辑**

好的，经过一番搜索。我发现你可以从模块的角度这样做：

```
$this->render("//view_folder/a_view") 
```

使用双斜杠“//”，它将调用 view_folder/a_view.php 下的主应用程序的视图，而使用单斜杠

```
$this->render("/view_folder/a_view") 
```

它将调用同一模块内的视图。

仍在搜索主视图是否有任何方法可以调用模块视图或模块之间的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:57:01.057

从应用程序视图或控制器调用模块视图

```
$this->render("application.modules.moduleName.views.folderName.fileName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:17:16.037

由于渲染方式的原因，主视图不太可能调用模块视图（Yii 从您的渲染部分开始，并一直处理到布局文件。

如果您需要通过渲染获得更多创意，请查看主题系统。它有点松散（了解正在发生的事情的最简单方法是使用像 XDebug 这样的调试器），但是您有很多选择。

# ios - 是否有充分的理由不制作仅具有视网膜尺寸的所有 iPhone / iPad 图形？

> ID：15117351
> 
> 赞同：0
> 
> 时间：2013-02-27T16:36:10.407
> 
> 标签：ios, graphics, retina-display

如果应用程序最初是使用非视网膜图形设计的，我了解需要将您的非视网膜图形升级到视网膜图形。如果您不转换旧应用程序，是否有理由制作 2 个不同大小的图形？既然视网膜图形可以缩小但非视网膜不能放大，为什么不让所有图形都具有视网膜尺寸呢？这似乎节省了很多时间（使每个图形有 2 个大小/适当地命名每个图形等），尽管它可能会占用微不足道的空间。如果我不只根据视网膜尺寸制作所有 iPad 和 iPhone 应用程序，我会忽略什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:40:00.327

主要原因只是性能，如果系统必须按比例缩小所有图像，可能会影响性能。

此外，如果只有@2x 图像可用，我不确定非视网膜系统是否会加载图像。这将需要在模拟器中进行一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:45:24.160

仅包含 Retina 图形的问题在于，正如您所说，设备必须先按比例缩小您的所有资产，然后才能显示它们。这可能对您的应用程序性能的影响可以忽略不计。更大的问题是缩小的图形看起来很糟糕，*特别是*因为它们将显示在较低分辨率的屏幕上。你所有的缩放图像充其量看起来都是平庸的。也许你可以花很多时间开发 iOS 可以很好地缩放的图像，但到那时，为什么不直接生成单独的图像文件呢？生成 1x 资产并不需要太多努力，您的用户会注意到其中的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:46:05.397

正如 Kendall 所说，一个原因是性能，另一个是视觉质量。

为视网膜设计的图像在自动缩小时可能会变得不
清晰：要使图像具有像素清晰度，必须为非视网膜设计：
这包括不在分数坐标上放置线条，它们将在像素之间，导致视觉质量下降.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:46:40.830

在为您的应用**创建图像时****，**最好在导出之前降低分辨率。与创建 .png 文件然后调整其大小相比，图像的渲染效果会更好。

想象一个 8px*8px 的正方形被缩小到 4px*4px。

如果你缩小你的 png 文件，一个 2px*2px 的正方形将对应一个像素。产生的颜色不会是完美的。如果在导出之前缩小图像，它会渲染得更好。

因此，如果您自己创建这些图像，最好在导出之前手动减少它们。

如果您使用“已经平坦”的图像，无论您还是操作系统操作这种“糟糕”的缩小比例，您都会得到相同的结果。但是，如果您为系统提供非视网膜图像，您的应用程序将运行更流畅，因为您可以为操作系统节省时间来创建低分辨率图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T16:54:32.607

性能是一个因素。此外，对于小图标，您需要适合屏幕尺寸的像素完美图像。iOS 上的缩放算法通常是平滑的，但是当您进入小图标时，您希望它更清晰。

# python - Google AppEngine 上带有 Django-nonrel 的 OAUTH2.0 提供程序库

> ID：15117352
> 
> 赞同：4
> 
> 时间：2013-02-27T16:36:35.790
> 
> 标签：python, google-app-engine, oauth-2.0, django-nonrel, oauth2app

我正在使用 Django-nonrel 在 Google App Engine 上开发 OAUTH 2.0 提供程序。对于身份验证，我提供了自己的用户身份验证，因此我没有使用 Google 帐户。

我对用于创建 oauth 提供程序的可用 OAUTH2.0 库进行了一些研究。[oauth2app](http://hiidef.github.com/oauth2app/ "oauth2app")看起来很有前途，因为它也在使用 Django。有没有人有使用 Django-nonrel 在 Google App Engine 上使用这个库的经验？或者有人可以推荐一个图书馆吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:55:23.953

我最终使用了[oauth2app](http://hiidef.github.com/oauth2app/)，我只需要进行一些小的改动就可以使用 django-nonrel。

唯一的限制是 oauth2app 中的模型类使用 ManyToManyFields，这在 django-nonrel 中不受支持，所以我最终将它们更改为 ListFields。然后，这会产生一些关于在库中完成的查询的微小变化。

总而言之，oauth2app 也可以与 Google App Engine 上的 django-nonrel 结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:08:11.023

我目前正在使用这个

[oauth2](https://github.com/simplegeo/python-oauth2)

Oauth 对我来说是未知的，但这个库对我帮助很大

该链接还包含示例以了解其工作原理

# c++ - 为什么 --list.end() 编译？

> ID：15117357
> 
> 赞同：9
> 
> 时间：2013-02-27T16:36:40.510
> 
> 标签：c++, list, stl, lvalue, rvalue

*   list 会`end()`返回一个过去的迭代器的副本，对吗？
*   因此，`list.end()`是一个右值，对吧？
*   为列表迭代器重载的 -- 运算符函数采用非常量引用，对吗？
*   您不能将右值绑定到非常量引用，对吗？

那么怎么会

```
std::list<int> lst;
// ... 
--l.end();` 
```

编译？

正如正确指出的那样，我的第三点不一定是正确的。但是，这段代码也可以编译呢？

```
struct A{};

void f(A&)
{

}
A a()
{
    return A();
}

int main()
{
    f(a());
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T16:40:13.513

> *   为列表迭代器重载的 -- 运算符函数采用非常量引用，对吗？

这一点是错误的。是`operator--`一个成员函数，一个成员函数可以被临时调用。您不会将任何对象作为参数传递给此成员函数。因此，将右值绑定到非常量引用的问题首先不会出现。

* * *

至于编辑（将*右值*传递给`f(A&){}`），它是一个非标准扩展。我*猜*你正在使用 Microsoft Compiler，因为我知道它有这个非标准扩展，在我看来这很愚蠢。

# c++ - 这种行为叫什么？我在这里初始化A类吗？

> ID：15117364
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:37:01.077
> 
> 标签：c++

`A A`在函数中是什么意思`g`？这种行为叫什么？我在初始化`class A`吗？有人可以解释一下吗？感谢您宝贵的时间！

```
 #include<iostream>
    using namespace std;

    class A {
        public:
    };

    void g()
    {
        A A; 

//if I declare 'A A;' and 'A a1' together here, then I could get an error "[Error] expected ';' before 'a1' " 
    }

    main(){
        A a2;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:47:54.143

您正在声明一个类型为 的变量`A`，其名称也是`A`.

在该声明之后，直到作用域结束，非限定名称`A`指的是变量，而不是类型；所以声明`A a1;`无效。由于该类型位于全局命名空间中，因此您可以将其称为`::A`，即使在变量声明之后也是如此`A`。

# html - HTML5 验证重新输入的值

> ID：15117366
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:07.363
> 
> 标签：html, forms, pattern-matching, validation

我刚刚在注册表单客户端验证中第一次使用了 HTML5 模式属性。它运行良好，我计划将它用于实时代码。

在我的注册表单中，我有一个`re-enter password`输入字段。

由于我认为重新输入值经常被使用，我想知道：确实存在一些花哨的 HTML5 机制来检查重新输入的值是否与第一个输入的值匹配。还是我仍然需要在 JavaScript 中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:51:48.207

并不真地。

HTML5 引入了一个[`<output>`](https://developer.mozilla.org/en-US/docs/HTML/Element/output)元素，该元素应该表示某些计算的结果（例如比较两个值）。您可以使用其`for`属性将其与页面上影响其结果的输入相关联。不过，问题出在这里：

*   您仍然需要 JavaScript 来实际执行计算。
*   Firefox 的渲染引擎 (Gecko) 允许您为`<output>` [（请参阅 Mozilla 文档中的此页面](https://developer.mozilla.org/en-US/docs/HTML/Forms_in_HTML)）指定有效性约束和错误消息，但其他渲染引擎可能不会（并且可能不会）。
*   许多非常常用的浏览器不支持 HTML5 表单验证（以及一般的 HTML5 功能）。例如，[使用 Internet Explorer < 10 或使用大多数移动浏览器访问您网站的任何人都无法使用表单验证。](http://caniuse.com/form-validation)

如果您想提供即时验证反馈，最好的办法是使用 JavaScript，确保在服务器上再次验证数据。

# windows-phone-7 - XAML 无效，但在运行时有效

> ID：15117369
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:18.273
> 
> 标签：windows-phone-7, xaml

我的 ListBox 有这个 XAML：

```
<ListBox x:Name="LbBatidas" ItemsSource="{Binding Batidas}" Height="Auto" Grid.Row="3" Grid.ColumnSpan="2">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Height="72">
                <Image Source="{Binding Natureza, Converter={StaticResource NaturezaBatidaConverter}}" Width="72"/>                                 
                <TextBlock Text="{Binding Horario, StringFormat=\{0:HH:mm:ss\}}" VerticalAlignment="Center" FontSize="48" Margin="10,0,0,0"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

但是当我运行我的应用程序时，它完全正常。

如果我删除图像源绑定的转换器无效 XAML 停止的错误

```
<ListBox x:Name="LbBatidas" ItemsSource="{Binding Batidas}" Height="Auto" Grid.Row="3" Grid.ColumnSpan="2">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Height="72">
                <Image Source="{Binding Natureza}" Width="72"/>                                 
                <TextBlock Text="{Binding Horario, StringFormat=\{0:HH:mm:ss\}}" VerticalAlignment="Center" FontSize="48" Margin="10,0,0,0"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

![无效的 XAML 错误](../Images/41253e5c29326c889d72106db2d2b582.png)

源代码链接： [https ://projects.developer.nokia.com/MeuPonto](https://projects.developer.nokia.com/MeuPonto)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:17:08.753

尝试像这样更改您的 Convert 和 ConvertBack 方法：

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var v = value as NaturezaBatida;
        if (v == null)
            return null;

        var imageSource = v == NaturezaBatida.Entrada
                              ? new Uri("/Imagens/Entrada.png", UriKind.RelativeOrAbsolute)
                              : new Uri("/Imagens/Saida.png", UriKind.RelativeOrAbsolute);

        return new BitmapImage(imageSource);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    } 
```

您应该在 Convert 方法中返回 null 或空/默认图像，而不是传入的对象。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-26T06:45:25.963

简单只需重建您的解决方案。单击构建-> 重建 sloution

# python - Pickle：AttributeError：“模块”对象没有属性

> ID：15117372
> 
> 赞同：4
> 
> 时间：2013-02-27T16:37:19.467
> 
> 标签：python, attributeerror, pickle

我发现了很多关于此的线程，但所有线程的问题都是命名空间。我的问题与命名空间无关。

一个小例子：

```
import cPickle as pickle
from uncertainties import Variable

class value(Variable):
    def __init__(self, args, showing=False):
        self.show = showing
        Variable.__init__(self, args[0], args[1])

val = value((3,1), True)
print val.nominal_value, val.std_dev(), val.show
fobj = file("pickle.file", "w")
pickle.dump(val, fobj)
fobj.close()

fobj = file("pickle.file", "r")
val = pickle.load(fobj)
fobj.close()
print val.nominal_value, val.std_dev(), val.show 
```

此代码的输出：

```
3.0 1.0 True
3.0 1.0
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/usr/lib/python2.7/dist-packages/IPython/utils/py3compat.pyc in execfile(fname, *where)
    173             else:
    174                 filename = fname
--> 175             __builtin__.execfile(filename, *where)

/home/markus/pickle.py in <module>()
     19 val = pickle.load(fobj)
     20 fobj.close()
---> 21 print val.nominal_value, val.std_dev(), val.show

AttributeError: 'value' object has no attribute 'show' 
```

命名空间在酸洗和解酸时是相同的。的所有属性`uncertainties.Variable`都恢复了——只有我添加的一个“节目”被遗漏了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:56:54.207

该类使用[`uncertainties.Variable()`属性](https://github.com/lebigot/uncertainties/blob/master/uncertainties/__init__.py#L1203)[`__slots__`来](http://docs.python.org/2/reference/datamodel.html#slots)节省内存。因此，要使其可腌制，它还*必须*定义一个[`__getstate__`方法](http://docs.python.org/2/library/pickle.html#object.__getstate__)（请参阅[Why am I getting an error about my class defined __slots__ when trying to pickle an object？](https://stackoverflow.com/questions/2204155/why-am-i-getting-an-error-about-my-class-defining-slots-when-trying-to-pickl)）。

如果您需要添加自己的附加属性，则必须覆盖该`__getstate__`方法。在您自己的属性中声明您的附加属性`__slot__`可能也是一个好主意：

```
from uncertainties import Variable

class value(Variable):
    __slots__ = ('show',)  # only list *additional* slots

    def __init__(self, args, showing=False):
        self.show = showing
        super(value, self).__init__(args[0], args[1])

    def __getstate__(self):
        obj_slot_values = {}
        for cls in type(self).mro():
            obj_slot_values.update((k, getattr(self, k)) for k in getattr(cls, '__slots__', ()))
        # Conversion to a usual dictionary:
        return obj_slot_values 
```

这`__getstate__`是必需的，因为该`Variable.__getstate__`方法假定只有*一个* `__slots__`属性，而 MRO 中的每个类可能都有一个。

这确实是`uncertainties`库的限制；我已经提交了一个[拉取请求](https://github.com/lebigot/uncertainties/pull/13)来解决这个问题，并且不需要`__getstate__`在子类中覆盖该方法。

# macos - 在 OSX 中以编程方式更改麦克风增益

> ID：15117373
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:23.747
> 
> 标签：macos, cocoa, core-audio, audioqueue

我在 OSX 10.8

在我的应用程序中，我必须更改麦克风增益，我使用 AudioQueue 来捕获缓冲区，但没有获得任何指针来更改麦克风增益，

Apple HAL 文档也有，但没有得到任何东西，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:11:08.003

首先，向您的队列询问它的`kAudioQueueProperty_CurrentDevice`，这是它正在读取的设备的标识符字符串。

接下来，您需要打开该设备。这比应有的工作要多，因为 Core Audio 的设计者相信通过通用的“GetProperty”和“SetProperty”函数可以完成几乎所有事情。开始：

1.  创建一个`AudioValueTranslation`结构，其中包含指向包含设备标识符的变量的指针和指向要在其中的`AudioDeviceID`.
2.  使用`AudioHardwareGetProperty`or 未弃用但更通用`AudioObjectGetProperty`的 get `kAudioHardwarePropertyDeviceForUID`，将指针传递给结构。HAL 将查找设备并通过您放入结构中的指针将其返回给您。

如果这没有返回错误，那么您现在拥有了一个设备。

最后一步是设置它的增益。我*认为*这体现`kAudioDevicePropertyVolumeScalar`在输入范围上，但我不是 100% 确定。无论如何，您将一直在修补`AudioDeviceSetProperty`和/或`AudioObjectSetProperty`直到找到正确的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:12:42.237

看来，在运行 AudioQueue 时无法即时更改音量增益，有些如何能够在缓冲区中添加麦克风增益，发布代码，

```
void AQRecorder::setGain(void *data, int bytes, float gain){
    SInt16 *editBuffer = (SInt16 *)data;

    // loop over every packet

    for (int nb = 0; nb < (bytes / 2); nb++) {

        // we check if the gain has been modified to save resoures
        if (gain != 0) {
            // we need more accuracy in our calculation so we calculate with doubles
            double gainSample = ((double)editBuffer[nb]) / 32767.0;

            /*
             at this point we multiply with our gain factor
             we dont make a addition to prevent generation of sound where no sound is.

             no noise
             0*10=0

             noise if zero
             0+10=10
             */
            gainSample *= gain;

            /**
             our signal range cant be higher or lesser -1.0/1.0
             we prevent that the signal got outside our range
             */
            gainSample = (gainSample < -1.0) ? -1.0 : (gainSample > 1.0) ? 1.0 : gainSample;

            /*
             This thing here is a little helper to shape our incoming wave.
             The sound gets pretty warm and better and the noise is reduced a lot.
             Feel free to outcomment this line and here again.

             You can see here what happens here http://silentmatt.com/javascript-function-plotter/
             Copy this to the command line and hit enter: plot y=(1.5*x)-0.5*x*x*x
             */

            gainSample = (1.5 * gainSample) - 0.5 * gainSample * gainSample * gainSample;

            // multiply the new signal back to short
            gainSample = gainSample * 32767.0;

            // write calculate sample back to the buffer
            editBuffer[nb] = (SInt16)gainSample;
        }
    }
} 
```

记住这个函数只有在有增益变化时才应该调用，否则会节省 CPU 资源。

# c# - HttpContext.Current 在 MVC 4 项目中未解决

> ID：15117379
> 
> 赞同：38
> 
> 时间：2013-02-27T16:37:31.470
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, httpcontext

我想使用 ImageResizer （来自 ImageResizing dot net）。我通过 NuGet 为 MVC 安装了 ImageResizer。但是当我使用示例中的以下代码时：

```
//Loop through each uploaded file
foreach (string fileKey in HttpContext.Current.Request.Files.Keys)
{
    HttpPostedFile file = HttpContext.Current.Request.Files[fileKey];
    if (file.ContentLength <= 0) continue; //Skip unused file controls.

    //The resizing settings can specify any of 30 commands.. See http://imageresizing.net for details.
    //Destination paths can have variables like <guid> and <ext>, or 
    //even a santizied version of the original filename, like <filename:A-Za-z0-9>
    ImageResizer.ImageJob i = new ImageResizer.ImageJob(file, "~/uploads/<guid>.<ext>", new ImageResizer.ResizeSettings(
                            "width=2000;height=2000;format=jpg;mode=max"));
    i.CreateParentDirectory = true; //Auto-create the uploads directory.
    i.Build();
} 
```

foreach 中的“HttpContext.Current.Request.Files.Keys”没有解析？我的使用正确，Visual Studio 没有提供“解决”选项。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-05-02T12:52:15.590

尝试在它前面加上`System.Web.`

如果我尝试`System.Web.HttpContext.Current`，则当前存在，但如果我尝试`HttpContext.Current`，则它无法识别“当前”。我的 using 语句中确实有`System.Web`，但我似乎仍然需要指定它才能访问“当前”。

[@Chris 的回答](https://stackoverflow.com/a/21529654/10251345)指出并解释了根本原因。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-02-03T14:16:26.460

问题是`Controller`该类有一个名为的公共属性`HttpContext`（请参阅[http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.httpcontext.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.httpcontext.aspx)）。

这意味着当您尝试在控制器中没有任何限定的情况下使用它时，它会解析为本地属性而不是`System.Web.HttpContext`. 该属性的类型`HttpContextBase`确实具有`Request`可以执行您想要的操作的属性（尽管请注意，它与您从`System.Web.HttpContext`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-29T08:44:43.683

非常简单的添加库

```
using System.Web; 
```

并更换

```
context.Response -> HttpContext.Current.Response 
```

方法

```
context -> HttpContext.Current 
```

你的问题就解决了。

# actionscript-3 - 将 SWF 文件转换为动画 GIF（最好是命令行）

> ID：15117380
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:33.370
> 
> 标签：actionscript-3, bash, flash, gif, animated-gif

我有一个 SWF 文件，其中包含一个简单的动画（旋转球），我想将其转换为动画 GIF。

理想情况下，我想使用命令行（bash 脚本）来执行此操作。任何人都可以建议任何链接让我开始（谷歌没有提供任何有用的东西）。

如果没有用于 SWF 到 GIF 转换的 bash 命令，我可能不得不使用 ActionScript。在这种情况下，任何让我入门的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:46:47.950

提示，如何使用 as3.0，首先使用 Bitmapdata 的[draw()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)捕获旋转球动画。并使用[GIFEncoder](http://www.bytearray.org/?p=93)创建一个 GIF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:47:39.320

正如 Jari 所说，Flash Pro 可以开箱即用。不确定 Bash 脚本，但您可以使用大量免费工具，例如

[Mac SWF2GIF](http://mac.softpedia.com/get/Utilities/SWF2GIF.shtml)

是的，Flash Pro 的试用版也能做到！但我推荐一个像链接中一样的超薄工具

我的错，找不到任何适用于 Linux 的东西，但只需搜索“Linux swf 2 gif 转换器”或者你可以上传它，我会快速转换它^^

# sql - 在一个 SQL Server 2000 中连接两个表

> ID：15117381
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:42.670
> 
> 标签：sql, sql-server

我被这个查询卡住了，我从两个查询中得到以下结果：

查询一：

```
SELECT convert(varchar(10), date_creat, 101) as DateCreate, count(distinct packslip) as OrdersPendingPickUp
FROM pickhead
WHERE procstep = '17'
GROUP BY convert(varchar(10), date_creat, 101)
ORDER BY convert(varchar(10), date_creat, 101) 
```

结果查询1：

```
DateCreate  OrdersPendingPickUp
2/11/2013   1
2/19/2013   1
2/21/2013   3
2/25/2013   1
2/26/2013   11
2/27/2013   6 
```

查询 2：

```
SELECT convert(varchar(10), DateCreate, 101) as DateCreate, count(distinct PackSlip) as OrdersPendingInvoice
FROM tblB2B_Orders [to]
INNER JOIN tblTmpLsrType ttlt ON [to].LSRNbr = ttlt.shpno
WHERE 
    [to].PackSlip not in (SELECT PackSlip FROM pickhead)
    AND (ttlt.InvcNbr = '' OR ttlt.InvcNbr is null) 
GROUP BY convert(varchar(10), DateCreate, 101)
ORDER BY convert(varchar(10), DateCreate, 101) 
```

结果查询2：

```
DateCreate  OrdersPendingInvoice
2/25/2013   1
2/26/2013   1 
```

现在我想将两个结果合二为一，结果应如下所示：

```
DateCreate  OrdersPendingPickUp OrdersPendingInvoice
2/11/2013   1                     0
2/19/2013   1                     0
2/21/2013   3                     0
2/25/2013   1                     1
2/26/2013   11                    1
2/27/2013   6                     0 
```

我做了以下，但它不能正常工作：

```
SELECT DISTINCT convert(varchar(10), DateCreate, 101) as DateCreate,
    isnull(
        (SELECT count(distinct packslip)
        FROM pickhead
        WHERE procstep = '17' AND (convert(varchar(10), [to].DateCreate, 101) = convert(varchar(10), date_creat, 101))
        GROUP BY convert(varchar(10), date_creat, 101)),0       
    ) as OrdersPendingPickUp,
    isnull(
        (SELECT count(distinct [to1].PackSlip)
        FROM tblB2B_Orders [to1]
        INNER JOIN tblTmpLsrType ttlt ON [to1].LSRNbr = ttlt.shpno
        WHERE 
            [to1].PackSlip not in (SELECT PackSlip FROM pickhead) 
            AND (ttlt.InvcNbr = '' OR ttlt.InvcNbr is null)
            AND [to1].DateCreate = [to].DateCreate
        GROUP BY convert(varchar(10), [to1].DateCreate, 101)),0 
    ) as OrdersPendingInvoice
FROM tblB2B_Orders [to]
ORDER BY convert(varchar(10), DateCreate, 101) 
```

这是结果：

```
DateCreate  OrdersPendingPickUp OrdersPendingInvoice
2/11/2013   1                     0
2/19/2013   1                     0
2/20/2013   0                     0
2/21/2013   3                     0
2/25/2013   1                     0
2/25/2013   1                     1
2/26/2013   11                    0
2/26/2013   11                    1
2/27/2013   6                     0 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:41:05.423

这很容易通过完全外连接完成：

```
with query1 as (<query1>),
     query2 as (<query2>)
select coalesce(query1.dateCreate, query2.dateCreate) as DateCreate,
       coalesce(query2.OrdersPendingPickup, 0.0) as OrdersPendingPickup,
       coalesce(query1.OrdersPendingInvoice, 0.0) as OrdersPendingInvoice
from query1
     full outer join
     query2
     on query1.datecreate = query2.datecreated 
```

请注意，您的查询进入该`with`子句。

你可以对子查询做同样的事情：

```
select coalesce(query1.dateCreate, query2.dateCreate) as DateCreate,
       coalesce(query2.OrdersPendingPickup, 0.0) as OrdersPendingPickup,
       coalesce(query1.OrdersPendingInvoice, 0.0) as OrdersPendingInvoice
from (<YOUR QUERY 1 GOES HERE>) query1
     full outer join
     (<YOUR QUERY 2 GOES HERE>) query2
     on query1.datecreate = query2.datecreated 
```

# javascript - jQuery：删除重复元素 - 暂时

> ID：15117383
> 
> 赞同：0
> 
> 时间：2013-02-27T16:37:46.163
> 
> 标签：javascript, jquery, duplicates

我有一个具有公共类的元素列表，并且想要隐藏所有重复项。我可以做到这一点。但是，我有一个“切换”链接，它显示和隐藏元素列表。当切换发生时，我希望浏览器“重置”或“忘记”标记为重复的内容，以便用户再次单击过滤器。

我的[Fiddle](http://jsfiddle.net/c6Tbp/)显示过滤器正在工作，但我不想将每个子 DIV 更改`#container`为可见元素，例如第 19 行正在执行的操作 - 这已经发生在我项目中的此代码之外。要“忘记”该元素，我需要使用第 18 行的内容，尽管这似乎不起作用。

最好，一旦元素被隐藏（第 7 行），“忘记”就会发生，因此它准备好再次出现在过滤器的未来实例中。什么是正确的语法？

编辑：为了更好地了解我所追求的：

1.  访问[http://www.adaptworkbench.co.uk/](http://www.adaptworkbench.co.uk/)

2.  在左侧单击“证券”复选框。您将看到“测试作业”出现。取消选中该框。

3.  在左侧单击“秘书”复选框。您将看到“测试作业”出现。取消选中该框。

4.  再次点击“证券”。毕竟，“TEST JOB”不会出现，但我希望浏览器“忘记”它被标记为“SEEN”并显示它。

这样做的目的是，如果选中两个复选框，则不会出现重复条目​​ - 如果您同时勾选“证券”和“秘书”，您可以看到这是有效的，但我希望它在隐藏重复项后立即忘记，以便之后单击一个复选框时，“测试作业”将再次出现。

希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:42:02.197

一旦你选择了所有这些元素，你可以通过添加一个只有他们才能拥有的特殊类来隐藏它们，比如喜欢`tempHidden`或其他东西。然后，一旦您准备好再次展示它们，您就可以选择所有具有该“特殊”类的项目：

```
$('.tempHidden').hide(); 
```

当你准备好再次展示它们时

```
$('.tempHidden').show(); 
```

并且每当您需要选择除隐藏项目之外的所有内容时，都可以使用以下`.not()`方法：

```
$('.everything').not('.tempHidden'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:12:27.197

根据以下评论中的要求更新（最后一个坏了，这不是）：

基本上`id`对每个作业使用相同的方法可以让我们跟踪作业，并且我们可以为检查作业类型分配多个类。可能有多种方法可以做到这一点，并且可能更多地取决于您实际显示它们的方式，但这有效。

[http://jsfiddle.net/EVDQa/6/](http://jsfiddle.net/EVDQa/6/)

HTML：

```
<div id="input">
    <form>
        <input type="checkbox" name="jobs" value="security">Security
        <br>
        <input type="checkbox" name="jobs" value="secretarial">Secretarial
    </form>
</div>
<div id="display">
    <div class="posting hidden security" id="12345">
         This is a test Security job. Id: 12345
    </div>
    <div class="posting hidden secretarial" id="12345">
         This is a test Secretarial job. Id: 12345
    </div>
</div> 
```

CSS：

```
.posting {
    border: 2px solid #000000;
}
.hidden {
    display: none;
    visibility: hidden;
}
#input {
    float: left;
}
#display {
    margin-left: 100px;
    float: left;
} 
```

JS：

```
$("#input form input").change(function () {
    var jobType = $(this).val();
    var jobIds = [];
    var id;

    function getJobs() {
        $(".posting." + jobType).each(function () {
            id = $(this).attr("id");
            if ($.inArray(id, jobIds) === -1) {
                jobIds.push(id);
                $(this).toggleClass("hidden");

                if ($(this).hasClass("hidden")) {
                    jobIds = jQuery.grep(jobIds, function (value) {
                        return value != id;
                    });
                }
            }
        });
    }

    $(".posting:not(.hidden, ." + jobType + ")").each(function () {
        id = $(this).attr("id");
        if ($.inArray(id, jobIds) === -1) {
            jobIds.push(id);
        }
    });

    //Toggle jobs
    getJobs();
    jobType = $(":checked").val();
    getJobs();
}); 
```

# objective-c - 什么条件会导致 iVar 更改其类型？

> ID：15117390
> 
> 赞同：2
> 
> 时间：2013-02-27T16:38:13.170
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我有一个 iVar`NSMutableArray* _syncModels`并且在我的类的 init 方法中我初始化它就像`_syncModels = [[NSMutableArray alloc] initWithCapacity:10];`

在整个课程中，我在数组中添加和删除对象，但我从未重新初始化`_syncModels`.

所以我得到了这个崩溃报告，上面写着`-[NSConcreteData filterUsingPredicate:]: unrecognized selector sent to instance 0x23c740c0`。

符号化后，导致此崩溃的行是`[_syncModels filterUsingPredicate:[NSPredicate predicateWithFormat:@"NOT (dataManagerFieldRecord = nil)"]];`

世界上怎么`_syncModels`能从一个`NSMutableArray`变成一个`NSConcreteData`？

这种特殊的崩溃很少见，但我们会遇到更多这样的崩溃，其中一些对象被打乱并被发送一条它无法处理的消息。

我们的目标是 ARC 下的 6.1。

**编辑**

我发现了问题......我无意中将`self`（拥有对 的引用`_syncModels`）从`self`'s`dealloc`方法添加到调度队列......所以这是一个内存管理问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:42:07.587

> 什么条件会导致 iVar 更改其类型？

我能想象的唯一情况是程序员在源代码中修改了它的类型并重新编译它。

您的意思是**存储在 ivar 中的指针指向的对象已更改。**这是一个典型的内存管理错误，它通常意味着您期望存在的对象已经过早地被释放（因为您没有保留对它的足够引用），然后运行时在创建时重用了它的底层内存块需要一个新对象。

# mysql - 具有不同的mysql实体框架

> ID：15117391
> 
> 赞同：1
> 
> 时间：2013-02-27T16:38:16.457
> 
> 标签：mysql, entity-framework, distinct

晚上好，我两天试图解决这个问题，但一无所获。我怀疑这是一个错误，有人可以帮助我吗？我收到以下错误消息。

> “where 子句”中的未知列“Distinct1.nCdSite”
> 
> [MySqlException (0x80004005): 'where 子句'中的未知列 'Distinct1.nCdSite'] MySql.Data.MySqlClient.MySqlStream.ReadPacket() +501 MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId) +450 MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force) +136 MySql.Data.MySqlClient.MySqlDataReader.NextResult() +1269 MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior 行为) +2528 MySql.Data。 Entity.EFMySqlCommand.ExecuteDbDataReader（CommandBehavior 行为）+22。. .

我有以下代码：

模型：

```
[Table("pagina")] 
public class pagina 
{ 
    [Key] 
    public long nCdPagina { get; set; } 
    public long nCdVisitante { get; set; } 
    public string sDsUrlReferencia { get; set; } 
    public string sDsPalavraChave { get; set; } 
    public string sDsTitulo { get; set; } 

    [ForeignKey("nCdVisitante")] 
    public visitante visitante { get; set; } 
} 

public class retorno 
{ 
    public long Key { get; set; } 
    public int Online { get; set; } 
} 

[Table("site")] 
public class site 
{ 
    [Key] 
    public long nCdSite { get; set; } 
    public string sDsTitulo { get; set; } 
    public string sDsUrl { get; set; } 
    public DateTime tDtCadastro { get; set; } 
} 

[Table("visitante")] 
public class visitante 
{ 
    [Key] 
    public long nCdVisitante { get; set; } 
    public long nCdSite { get; set; } 
    public string sDsIp { get; set; } 
    public DateTime tDtCadastro { get; set; } 
    public DateTime tDtAtualizacao { get; set; } 

    [ForeignKey("nCdSite")] 
    public site site { get; set; } 
} 
```

询问：

```
return (from pag in this.context.pagina.Include("visitante").Include("site") 
    group pag by pag.visitante.nCdSite into g 
    select new retorno 
    { 
        Key = g.Key, 
        Online = g.Select(e => e.visitante.sDsIp).Distinct().Count() 
    }).ToList<retorno>(); 
```

问题仅发生在我放置`Distinct()`. `Count()`如果更不用说完美地工作了。

# java - 单击 jButton 时，如何将 jTextField 值从一个类传递到另一个类？

> ID：15117392
> 
> 赞同：1
> 
> 时间：2013-02-27T16:38:19.420
> 
> 标签：java, netbeans, jtextfield

来自牙买加的问候，

我在使用 netbeans java 项目时遇到问题。我有两个单独的类：一个名为 MainJFrame.java 的 gui 类**和**另一个名为**main.java**的类。

在 MainJFrame 表单中，我有一个 jTextField 和一个 jbutton。如何通过单击 jbutton 将 jtextfield 值传递给 main.java 类？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:41:30.113

一种可能的解决方案是创建一个处理通信的第三类。
您必须在此处注册 main.java 并将其传递给 MainJFrame.java。

例如

```
public class handler {
    public static main myClass = new main;

    public static main getClass() {
        retunr myClass;
    }

} 
```

您的 JFrameMain 应该包含一个新变量

```
private main mainClass = handler.getClass(); 
```

您的 onClicklistener 现在应该取消 mainClass 中获取文本的方法。

```
mainClass.setText(textFromJText); 
```

希望我能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:41:49.270

1.  您在 MainJFrame 类中保留对 Main 类实例的引用。
2.  您为您的 JButton 定义一个`ActionListener`。
3.  在此 ActionListener 中，您可以通过以下方式获取 JTextField 的值`JTextField.getText()`
4.  然后在第一步中保留的实例上调用 Main 类的方法，并将文本作为参数。

# java - RestFB 不对帖子发表评论

> ID：15117398
> 
> 赞同：3
> 
> 时间：2013-02-27T16:38:33.480
> 
> 标签：java, facebook-graph-api, restfb

我正在使用[restfb](http://restfb.com/)以这种方式获取一些帖子和facebook页面每个帖子的每条评论：

```
FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN);
Connection<Post> pagePosts = facebookClient.fetchConnection("iPhone.page/feed", Post.class);
for (List<Post> posts : pagePosts)
    for (Post post : posts){
        for(Comment comment: post.getComments().getData()){
        //get number of likes of comment
        }
        String message = post.getMessage();
        String id      = post.getId();
        long timestamp = post.getCreatedTime().getTime()/1000;
        //store info            
    } 
```

[当它获取这样](https://www.facebook.com/130489060322069/posts/422930041125702)的帖子时，我的问题就诞生了。

它有 140 条评论，但该`toString()`方法给了我：

```
Post[actions=[...] application=null attribution=null caption=techblr.com comments=Comments[count=157 data=[]] createdTime=Wed Feb 27 14:41:58 CET 2013 ....] 
```

评论的json部分是：

```
comments=Comments[count=157 data=[]]

count=157 
```

但是，如果您现在继续发布该帖子，它会显示 145 ......并且没有`data`！

这可能是什么问题？为什么它给了我与真实数据不同的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:39:48.010

我是这样解决的：

```
private static List<FBComment> getCommentFromPost(FacebookClient client, String post_id){
    List<String> comments = new ArrayList<FBComment>();

    Connection<Comment> allComments = client.fetchConnection(post_id+"/comments", Comment.class);
    for(List<Comment> postcomments : allComments){
        for (Comment comment : postcomments){
        long likes     = comment.getLikeCount()==null?(comment.getLikes()==null?0:comment.getLikes()):comment.getLikeCount();
        comments.add(comment.getMessage()+" - "+likes);
        }
    }

    return comments;
} 
```

# constraints - 约束满足（分层）求解器

> ID：15117401
> 
> 赞同：1
> 
> 时间：2013-02-27T16:38:56.803
> 
> 标签：constraints, solver, linear-programming, hierarchical, constraint-programming

我需要在 Java 或 .NET 中对约束满足 (CSP) 问题进行建模。该问题需要表示变量的层次结构。所以树的每个节点都是一个变量。

例如，如果变量 C1 是另一个变量 C2 的子变量，并且如果 C1 为真，那么 C2 应该为真，因为它是他的父变量。同时，如果一个分支中的一个变量节点为真，这意味着其他分支中的所有变量都是假的，因为在层次结构中只能选择一个分支。

## 我如何将其表示为 CSP 问题，我可以在 Java 或 .NET 中使用哪个工具？

我必须对其进行编辑以提供更多详细信息，因为还有更多：

在我的问题中，有 2 个部分：在第 1 部分中，有一个最大化函数 q1*x1+q2*x2+q3*x3.. 其中 qi 是系数（实数），xi 是变量（可以是 0或 1) 我必须选择一些最大化此功能的 xi。换句话说，节点只能是 0 或 1，我必须通过从层次结构中选择一个节点来最大化这个功能。

同样，这些 xi 变量是树的节点，所以当我选择一些 xi 时，它们必须来自树的同一分支，并且一次只能选择 1 个分支。因此我需要表示这些分层约束（第二部分）。最好的办法是将所有内容都表示为 lp 问题，但我不知道如何表示具有线性规划约束的树。

我不知道我是否可以同时使用最大化问题（第一部分）并施加 CSP 约束（而不是使用 LP 约束）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:57:09.253

[Choco](http://www.emn.fr/z-info/choco-solver/) is a constraint solver that is implemented in Java and offers a Java API. It sounds like you want to use reified constraints in your model, that is constraints of the form

```
reify(otherConstraint(...), variable) 
```

where `variable` becomes true or false depending on whether `otherConstraint` is satisfied or not. You can model the tree hierarchy by introducing auxiliary variables and adding reification constraints. Then you can link the auxiliary variables with a set of additional constraints to achieve effects such as you describe.

Alternatively, you could use simple conjunctions and disjunctions of constraints to model the tree -- whether this is possible will depend on the other constraints that determine the assignments to your variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:55:03.203

Java 中有许多用于约束满足问题 (CSP) 的求解器。这是一个不完整的列表：

*   [贾科普](http://jacop.osolpro.com/)
*   [巧克力](http://www.emn.fr/z-info/choco-solver/)
*   [奶油](http://bach.istc.kobe-u.ac.jp/cream/)

也就是说，我认为在你的情况下使用 CSP 求解器是一种过度杀伤，除非你有一些你没有提到的其他限制。您所需要的只是将您的问题视为具有对应于变量的节点的图（树？）。然后取一个叶节点并一直到顶部设置变量，一路设置为 true 并将所有剩余变量设置为 false 将为您提供解决方案。为此，您只需要一个图形库，例如[JGraphT](http://jgrapht.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:04:57.970

[Drools Planner](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html) (open source, java)[扩展](http://blog.athico.com/2012/07/scaling-planner-with-jit-selectors-in.html)了传统的 CSP 实现，并且在分数设计（非线性约束，多个分数[权重](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e3333)和[级别](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e3354)，...）方面也更加灵活，但在找到最佳解决方案时无法识别它.

# java - DTO 模式：在两个对象之间复制属性的最佳方式

> ID：15117403
> 
> 赞同：47
> 
> 时间：2013-02-27T16:39:08.093
> 
> 标签：java, object, lambdaj

在我的应用程序架构中，我通常将对象或对象列表从数据访问层通过服务层发送到 Web 层，其中这些对象从[DAO](http://en.wikipedia.org/wiki/Data_access_object)对象转换为[DTO](https://en.wikipedia.org/wiki/Data_transfer_object)对象，反之亦然。Web 层无权访问 DAO 对象，并且 DAO 层不使用 DTO。

为了演示，我通常将代码编写为：

```
@Transactional(readOnly = true)
public List<UserDTO> getAllUserAsUserDTO() {
    List<UserDTO> userDTOs = new ArrayList<UserDTO>();

    for(User user : getAllUser()) {
        userDTOs.add(constructUserDTO(user));
    }

    return userDTOs;
}

private UserDTO constructUserDTO(User user) {
    UserDTO userDTO = new UserDTO();
    userDTO.setFullName(user.getFullName());
    userDTO.setId(user.getId());
    userDTO.setUsername(user.getUsername());
    userDTO.setRole(user.getRole());
    userDTO.setActive(user.isActive());
    userDTO.setActiveText(user.isActive() ? "Active" : "Inactive");
    return userDTO;
} 
```

这里用户是数据库实体：

```
@javax.persistence.Entity
@Table(name = "USER")
public class User extends Entity {

    @Transient
    private static final long serialVersionUID = -112950002831333869L;

    private String username;
    private String fullName;
    private boolean active;
    private String role;
    // other fields

    public User() {
        super();
    }

    @NaturalId
    @Column(name = "USERNAME", nullable = false)
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    @Column(name = "FULL_NAME")
    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    @Column(name = "ACTIVE", nullable = false)
    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    @Column(name = "ROLE")
    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }
} 
```

这是 UserDTO：

```
public class UserDTO extends BaseDTO {

    private static final long serialVersionUID = -3719463614753533782L;

    private String username;
    private String fullName;
    private String role;
    private String activeText;
    private Boolean active;
    //other properties

    public UserDTO() {
        super();
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public String getActiveText() {
        return activeText;
    }

    public void setActiveText(String activeText) {
        this.activeText = activeText;
    }

    public Boolean getActive() {
        return active;
    }

    public void setActive(Boolean active) {
        this.active = active;
    }
} 
```

所以我想知道这是否是在两个对象之间复制属性的唯一方法。我想我不确定。我也在使用[lambdaj](http://code.google.com/p/lambdaj/)，那么这个 API 中是否有一种方法可以复制所有这些属性来创建其他对象的列表？

这个话题可能听起来很主观，但我真的很想从各位专家那里了解如何在最大字段具有相同字符串的情况下将对象从一种形式转换为另一种形式。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T05:02:53.933

您可以使用[Apache Commmons Beanutils](http://commons.apache.org/proper/commons-beanutils//)。API 是

`org.apache.commons.beanutils.PropertyUtilsBean.copyProperties(Object dest, Object orig)`.

对于属性名称相同的所有情况，它将属性值从“origin”bean 复制到“destination”bean。

现在我要跑题了。在 EJB3 中，使用 DTO 主要被认为是一种反模式。如果您的 DTO 和您的域对象非常相似，则确实不需要重复代码。DTO 仍然有优点，尤其是在涉及远程访问时可以节省网络带宽。我没有关于您的应用程序架构的详细信息，但是如果您谈到的层是逻辑层并且不跨网络，我认为不需要 DTO。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-27T16:45:19.460

你可以看看[推土机](http://dozer.sourceforge.net/)，它是

> Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。

[另一个更好的链接...](http://dozer.sourceforge.net/documentation/about.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-25T02:48:02.623

我有一个需要从[JPA](http://en.wikipedia.org/wiki/Java_Persistence_API)实体转换为 DTO 的应用程序，我考虑了一下，最后想出了使用它`org.springframework.beans.BeanUtils.copyProperties`来复制简单属性以及扩展和使用`org.springframework.binding.convert.service.DefaultConversionService`来转换复杂属性。

详细来说，我的服务是这样的：

```
@Service("seedingConverterService")
public class SeedingConverterService extends DefaultConversionService implements ISeedingConverterService  {
    @PostConstruct
    public void init(){
        Converter<Feature,FeatureDTO> featureConverter = new Converter<Feature, FeatureDTO>() {

            @Override
            public FeatureDTO convert(Feature f) {
                FeatureDTO dto = new FeatureDTO();
                //BeanUtils.copyProperties(f, dto,"configurationModel");
                BeanUtils.copyProperties(f, dto);
                dto.setConfigurationModelId(f.getConfigurationModel()==null?null:f.getConfigurationModel().getId());
                return dto;
            }
        };

        Converter<ConfigurationModel,ConfigurationModelDTO> configurationModelConverter = new Converter<ConfigurationModel,ConfigurationModelDTO>() {
            @Override
            public ConfigurationModelDTO convert(ConfigurationModel c) {
                ConfigurationModelDTO dto = new ConfigurationModelDTO();
                //BeanUtils.copyProperties(c, dto, "features");
                BeanUtils.copyProperties(c, dto);
                dto.setAlgorithmId(c.getAlgorithm()==null?null:c.getAlgorithm().getId());
                List<FeatureDTO> l = c.getFeatures().stream().map(f->featureConverter.convert(f)).collect(Collectors.toList());
                dto.setFeatures(l);
                return dto;
            }
        };
        addConverter(featureConverter);
        addConverter(configurationModelConverter);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T16:42:17.080

您可以使用反射来查找**DAO**`get`对象中的所有方法并调用**DTO**中的等效方法。这仅在所有此类方法都存在时才有效。应该很容易找到这方面的示例代码。**`set`**

 ***** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T14:23:49.447

lambdaj 的[项目功能](http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html#project%28java.lang.Object,%20java.lang.Class,%20java.lang.Object...%29)不会满足您的需求吗？

它看起来像这样：

```
List<UserDTO> userNDtos = project(users, UserDTO.class, on(User.class).getUserName(), on(User.class).getFullName(), .....); 
```

（相应地定义 UserDTO 的构造函数......）

另请参阅[此处](https://code.google.com/p/lambdaj/wiki/LambdajFeatures)的示例...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-20T16:11:40.117

我建议您应该使用映射器的库之一：[Mapstruct](http://mapstruct.org/)、[ModelMapper](http://modelmapper.org/)等。使用 Mapstruct 您的映射器将如下所示：

```
@Mapper
public interface UserMapper {     
    UserMapper INSTANCE = Mappers.getMapper( UserMapper.class ); 

    UserDTO toDto(User user);
} 
```

具有所有 getter 和 setter 的真实对象将从该接口自动生成。你可以像这样使用它：

```
UserDTO userDTO = UserMapper.INSTANCE.toDto(user); 
```

[您还可以使用@AfterMapping](http://mapstruct.org/documentation/stable/reference/html/#customizing-mappings-with-before-and-after)注释为您的 activeText 添加一些逻辑。****

# php - 通过服务器端提交表单后强制重定向包括

> ID：15117404
> 
> 赞同：0
> 
> 时间：2013-02-27T16:39:09.813
> 
> 标签：php, forms, redirect, form-submit

我正在尝试将服务器端的 PHP 联系表单包含在另一个页面上，并在提交时重定向到感谢页面。

表单在页面页面中作为包含如下：

```
<div id="formArea">
<?php include 'form.php'; ?>
</div> 
```

并且目前将重定向设置为：

```
header("Location: thankyou.php"); 
```

该表格工作正常，消息将发送到我的收件箱。还要注意的是，当 form.php 页面按原样打开而没有包含时，它实际上会重定向到thankyou.php

知道如何完成这项任务吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:47:59.727

您尝试在发送标头*后*设置 HTTP 标头（因为您已经开始输出 HTML），因此重定向标头*Location*永远不会与请求一起发送到服务器。

## 服务器端解决方案

您必须在任何输出*之前*调用该`header()`函数。

 *## 客户端解决方案

如果您仍然坚持在**form.php**中进行重定向，您可以进行 JavaScript（客户端）重定向：

```
<script type="text/javascript">window.location = "someurl.php";</script> 
```

## 调试

我还建议您在开发应用程序时启用警告和错误（请记住在生产中禁用！）因为您的代码应该产生*headers_sent*警告。.

```
ini_set( 'display_errors', 'on' );
error_reporting( E_ALL ); 
```*

# c# - 410 状态显示“您请求的页面已被删除”

> ID：15117405
> 
> 赞同：5
> 
> 时间：2013-02-27T16:39:20.297
> 
> 标签：c#, asp.net, iis

我在 ASP NET 网页后面有以下代码：

```
Server.ClearError();
Response.Status = "410 Gone";
Response.StatusCode = 410; 
```

在我的本地主机上工作，页面不重定向并且用户按预期看到内容。但是，当我上传到我们的暂存站点时，我看到文本“您请求的页面已被删除”。而不是我的页面。我浏览了 IIS 7，但找不到它重定向此页面的位置！？！？

我想要的只是向该网站的用户显示一篇过期的新闻文章，但至关重要的是让 Google 知道我的真实意图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T16:46:16.977

我说你需要添加`Response.TrySkipIisCustomErrors = true;`：

```
Server.ClearError();
Response.TrySkipIisCustomErrors = true;
Response.Status = "410 Gone";
Response.StatusCode = 410; 
```

# c# - 发布后配置文件出现在 bin 文件夹中

> ID：15117407
> 
> 赞同：6
> 
> 时间：2013-02-27T16:39:24.917
> 
> 标签：c#, asp.net

我目前在项目的根文件夹中有一个配置文件。出于某种原因，每当我发布项目时，它都会创建此配置的两个实例——一个在我的根文件夹中，一个在我的 bin 文件夹中。为什么会发生这种情况以及如何更改它以使其不出现在我的 bin 文件夹中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T17:09:43.493

尝试制作`Copy to Output Directory = Do not copy`and `Build Action = Content`。仅对您的配置文件执行此操作。

# python - 在 Flask 路由中捕获任意路径

> ID：15117416
> 
> 赞同：37
> 
> 时间：2013-02-27T16:39:47.157
> 
> 标签：python, flask, werkzeug

我有一个简单的 Flask 路由，我想捕获文件的路径。如果我`<path>`在规则中使用，它适用于`/get_dir/one`但不适用`/get_dir/one/two`。如何捕获任意路径，以便`path='/one/two/etc`将其传递给视图函数？

```
@app.route('/get_dir/<path>')
def get_dir(path):
    return path 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-27T16:41:40.067

使用`path`转换器捕获任意长度`<path:path>`的路径：将捕获路径并将其传递给`path`参数。默认转换器捕获单个字符串，但在斜杠处停止，这就是您的第一个 url 匹配但第二个不匹配的原因。

如果您还想匹配根目录（前导斜杠和空路径），您可以[添加另一个](http://flask.pocoo.org/snippets/57/)为路径参数设置默认值的规则。

```
@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def get_dir(path):
    return path 
```

还有其他[内置转换器](http://werkzeug.pocoo.org/docs/routing/#builtin-converters)，例如`int`and ，对于更复杂`float`的情况，您也可以[编写自己的转换器。](http://werkzeug.pocoo.org/docs/routing/#custom-converters)

# c++ - 错误引用自：

> ID：15117417
> 
> 赞同：1
> 
> 时间：2013-02-27T16:39:47.930
> 
> 标签：c++, build

给定一个函数的定义，当两个边作为参数给出时，它会在屏幕上打印出矩形的剩余两条边：

```
static void restPuncte (Punct &x, Punct &y); 
```

及其实施：

```
void restPuncte (Punct &x, Punct &y)
{
    Punct c;
    c.MutaX(x.GetX());
    c.MutaY(y.GetY());

    Punct d;
    d.MutaX(y.GetX());
    d.MutaY(x.GetY());

    std::cout << "Punctul C este:" << c << std::endl;
    std::cout << "Punctul D este:" << d << std::endl;
} 
```

在尝试构建项目时，主要出现以下错误：

```
"Punct::restPuncte(Punct&, Punct&)", referenced from: 
```

主要是：

```
#include <iostream>
#include "punct.h"

using namespace std;

int main ()
{

    Punct firstPoint(1,2);

    Punct thirdPoint(4,3);

    cout << "Determinarea celorlalte doua colturi" << endl;
    cout << "Cele doua puncte sunt:" << firstPoint << " si " << thirdPoint <<endl;
    Punct::restPuncte(firstPoint,thirdPoint);

    return 0;
} 
```

你能告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:41:35.543

```
void restPuncte (Punct &x, Punct &y) 
```

不一样

```
void Punct::restPuncte (Punct &x, Punct &y) 
```

您正在定义一个自由函数，而您的`static`方法仍未定义。

# c - 预处理器宏变量

> ID：15117418
> 
> 赞同：-3
> 
> 时间：2013-02-27T16:39:47.923
> 
> 标签：c, hash, struct, c-preprocessor, assign

我有代码：

```
#DEFINE NEW = 1; 
```

还有一个结构：

```
typedef struct PCB
{

 /*Process state:new, ready, running, waiting, terminated*/
 int state;
 }PCB; 
```

如何分配 NEW，使得 state=1？

更多信息，我得到错误：

```
expected ‘:’, ‘,’, ‘;’, ‘}’ or ‘__attribute__’ before ‘=’ token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:42:04.693

删除分号和`=`

`#DEFINE NEW 1`

# javascript - 如何将javascript中的日期格式更改为字母

> ID：15117425
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:09.187
> 
> 标签：javascript, jquery, date

```
<script id="calendar-list-template" type="text/html">
    <div class="list-row">
        <div class="list-cell">
            {{= ICC.Utils.formatCalendarDate(StartTime) }}
        </div>
</script> 
```

这是它的功能：

```
 ICC.Utils.formatDateTime = function(dateTime) {
        return moment.utc(dateTime).format("YYYY-MM-DD H:MM");
    };

ICC.Utils.formatCalendarDate = function (dateTime) {
    return moment.utc(dateTime).calendar();
}; 
```

它显示：“2013-03-15”

但我希望它像这样显示：“2013 年 3 月 15 日”

根据用户从日期选择器中选择的内容，我显示了很多日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:45:53.487

只要`dateTime`是一个`Date`对象：`moment.utc(dateTime).format("Do MMMM YYYY")`

# algorithm - 找出日期的差异？

> ID：15117428
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:15.967
> 
> 标签：algorithm, data-structures, tree, linked-list, skip-lists

我安排了一堆活动，我想检查我安排的活动是否有 10 天的间隔，在这 10 天内没有活动发生。是否有良好的数据结构和搜索算法来找到 10 天的间隔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:52:24.657

我会使用有序链表来存储事件，并且我会将事件存储在哈希表中（键：事件日期），它至少比下一个早 10 天。当您将新事件插入链接列表时，您必须检查新事件与其邻居之间的日期差异。至此修改哈希表。

**编辑：**

也许不需要创建额外的哈希表。创建一个特殊的有序链表，其中的列表项如下所示：

[eventDate|nextEventPointer|next10DayEventPointer|previous10DayEventPointer]

next10DayEventPointer 指向下一个事件，该事件至少比下一个事件早 10 天。previous10DayEventPointer 指向上一个事件，它至少比下一个事件早 10 天。

HEAD 项 next10DayEventPointer 指向至少早于下一个事件的第一个事件。HEAD 项目 previous10DayEventPointer 为 NULL。

您可以使用 next10DayEventPointer 查询从 HEAD 开始的 10 天事件。

在插入过程中，如有必要，您必须更新指针。

**编辑：**

像这样使用二进制搜索：

```
class Program
{
    static void Main(string[] args)
    {
        Dictionary<int, int> result = new Dictionary<int, int>();
        int [] dates = {2, 2, 2, 2, 2, 7,18, 19, 23, 33, 34, 35, 50, 70};

        IsThereIntervalXBetween(dates, 10, 0, dates.Length - 1, result);
        foreach (var key in result.Keys)
            Console.WriteLine("Index:{0} Date:{1} Next:{2}",key,dates[key],dates[key+1]);
    }

    static void IsThereIntervalXBetween(int[] dates, int interval, int firstIndex, int lastIndex, Dictionary<int, int> result)
    {
        if (lastIndex - firstIndex == 1)
        {
            result.Add(firstIndex, dates[firstIndex]);
            return;
        }

        int middleIndex = (firstIndex + lastIndex) / 2;

        if (dates[middleIndex] - dates[firstIndex] >= interval)
            IsThereIntervalXBetween(dates, interval, firstIndex, middleIndex, result);

        if (dates[lastIndex] - dates[middleIndex] >= interval)
            IsThereIntervalXBetween(dates, interval, middleIndex, lastIndex, result);
    }
} 
```

这是递归的，这是不可取的，但仍然很容易转换为非递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:44:51.113

取决于您是否关心效率、内存使用等。如果所有其他方法都失败了，您可以使用 O(n*log(n)) 算法按日期排序，并获取每对连续日期之间的差异。

编辑：认为我现在更好地理解了您的问题。两个选项：1）假设日期已排序，当它们中的两个之间的增量小于 10 时，对它们停止二进制搜索。也许您可以优先搜索具有较大日期范围的子数组。这介于 log n 和 n 之间。2）存储与上一个或下一个日期的差异与日期。使用优先级队列使它们按与上一个或下一个日期的差异进行排序。您可以在恒定时间中弹出具有最大差异的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:17:24.843

你可以有排序的链表来存储时间表，也可以将其存储在哈希图中，日期作为键，值作为链表节点地址的地址。因此，要搜索并查看您是否有 10 天的时间来安排其 o(1) 时间的时间表，并插入一个其最大 o(n) 时间的时间表。

# javascript - 回调内部的值不会在每个函数调用上更新

> ID：15117429
> 
> 赞同：2
> 
> 时间：2013-02-27T16:40:19.317
> 
> 标签：javascript, jquery

我有一个非常简单的功能，如下所示。这会在确认这是他们想要做的事情后删除用户单据（注意 custom `confirm`）。在确认的回调函数中，`id`第一次设置正确，但之后永远不会更新。

如果我`console.log`在`deleteSlip`函数里面，`id`总是正确的。如果我`console.log`在回调内部，它总是`id`我第一个发送它。当我调试 javascript 时，我看到了同样的事情。该值第一次是正确的，但之后永远不会更新。

我需要做什么才能让回调函数中的值在更新时更新`deleteSlip`？

```
function deleteSlip(id){
    //  id is correct right here
    confirm('This will delete your slip.  Are you sure you want to do this?', function(confirmed){
        //  id here is always the first value from deleteSlip, and never changes
        if (confirmed)
        {
          // do stuff 
        }
    });
} 
```

被调用是自定义的`confirm`，定义如下：

```
window._originalConfirm = window.confirm;
window.confirm = function(text, cb) {
  bootStrapConfirm = function() {
    if(! $.fn.modal.Constructor)
      return false;
    if($('#windowConfirmModal').length == 1)
      return true;
    $('body').append(' \
    <div id="windowConfirmModal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true"> \
      <div class="modal-body"> \
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> \
        <p> alert text </p> \
      </div> \
      <div class="modal-footer"> \
        <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">No</button> \
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Yes</button> \
      </div> \
    </div> \
    ');
    function unbind() { 
      $("#windowConfirmModal .btn-primary").unbind('click', confirm);
      $("#windowConfirmModal .btn-danger").unbind('click', deny);
    }
    function confirm() { cb(true); delete cb;}
    function deny() { cb(false); delete cb;}
    $("#windowConfirmModal .btn-primary").bind('click', confirm);
    $("#windowConfirmModal .btn-danger").bind('click', deny);
    return true;
  }
  if ( bootStrapConfirm() ){
    $('#windowConfirmModal .modal-body p').text(text);
    $('#windowConfirmModal').modal();
  }  else {
    console.log('bootstrap was not found');
    window._originalConfirm(text);
  }
} 
```

`deleteSlip`是`onclick`按钮上的 HTML 属性。像这样：

```
onclick="deleteSlip(1234)" 
```

再次重申，`id`内部`deleteSlip`是正确的。`id`回调的内部`confirm`是它首先得到的，并且永远不会改变。回调可能是异步的，但我在任何给定时间只调用一次。 `deleteSlip`在按钮单击时触发。

我之前发布了这个问题，并被告知它太模棱两可了。请让我知道你需要看到什么来帮助我解决这个问题。“do stuff”区域有一个 ajax 调用，但在此之前的值是错误的（因此不向没有阅读整个问题的人显示它）。

**更新**：看起来这是自定义的问题`confirm`。我将自定义更改`confirm`为以下内容：

```
window.confirm = function(text, cb) {
  bootStrapConfirm = function() {
    if(! $.fn.modal.Constructor)
      return false;
    if($('#windowConfirmModal').length == 1)
      return true;
    $('body').append(' \
      <div id="windowConfirmModal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true"> \
      <div class="modal-body"> \
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> \
        <p> alert text </p> \
      </div> \
      <div class="modal-footer"> \
        <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">No</button> \
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Yes</button> \
      </div> \
      </div> \
    ');
    return true;
  }
  if ( bootStrapConfirm() ){
    function confirm() { cb(true); }
    function deny() { cb(false); }
    $("#windowConfirmModal .btn-primary").unbind('click', confirm);
    $("#windowConfirmModal .btn-danger").unbind('click', deny);
    $("#windowConfirmModal .btn-primary").bind('click', confirm);
    $("#windowConfirmModal .btn-danger").bind('click', deny);
    $('#windowConfirmModal .modal-body p').text(text);
    $('#windowConfirmModal').modal();
  }  else {
    console.log('bootstrap was not found');
    window._originalConfirm(text);
  }
} 
```

现在，当`confirm`被调用时，它会调用`id`它所见过的所有 's。我不`unbind`正确的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:52:20.790

你在这里有一个范围问题。*id*在*deleteSlip()*中定义，而不是在回调中。因此，您应该将 id 作为参数传递给回调。

在内置的 jquery 中，这将通过在回调函数被提供给*confirm()*之前添加参数来完成。不知道你会怎么做。

在你的情况下，我会这样做：

```
function deleteSlip(id){
  //  id is correct right here
  confirm('This will delete your slip.  Are you sure you want to do this?', id, function(cb_id, confirmed){
      //  id here is always the first value from deleteSlip, and never changes
      if (confirmed)
      {
        // do stuff 
      }
  });
} 
```

和：

```
window._originalConfirm = window.confirm;
window.confirm = function(text, id, cb) {
  bootStrapConfirm = function() {
    if(! $.fn.modal.Constructor)
      return false;
    if($('#windowConfirmModal').length == 1)
      return true;
    $('body').append(' \
      <div id="windowConfirmModal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true"> \
      <div class="modal-body"> \
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> \
        <p> alert text </p> \
      </div> \
      <div class="modal-footer"> \
        <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">No</button> \
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Yes</button> \
      </div> \
    </div> \
    ');
    function unbind() { 
      $("#windowConfirmModal .btn-primary").unbind('click', confirm);
      $("#windowConfirmModal .btn-danger").unbind('click', deny);
    }
    function confirm() { cb(id, true); delete cb;}
    function deny() { cb(id, false); delete cb;}
    $("#windowConfirmModal .btn-primary").bind('click', confirm);
    $("#windowConfirmModal .btn-danger").bind('click', deny);
    return true;
  }
  if ( bootStrapConfirm() ){
    $('#windowConfirmModal .modal-body p').text(text);
    $('#windowConfirmModal').modal();
  }  else {
    console.log('bootstrap was not found');
    window._originalConfirm(text);
  }
} 
```

免责声明：尚未运行代码，因此可能存在一些错误。但这个想法应该是合理的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T16:45:42.053

您应该将 id 显式传递给回调函数。

```
 function deleteSlip(id){
        //  id is correct right here
        confirm('This will delete your slip.  Are you sure you want to do this?',        function(confirmed,id){
            var newId = id;
            alert(newId);
            //  id here is always the first value from deleteSlip, and never changes
            if (confirmed)
            {
              // do stuff 
            }
        }); } 
```

# php - 我应该对列表和详细视图使用 1 个或 2 个 SQL 查询吗？

> ID：15117430
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:19.660
> 
> 标签：php, sql

这是困扰我的问题：使用 1 个或 2 个查询是否更优雅（处理的数据量与查询数量）。

让我们使用以下虚假结构：

```
CREATE TABLE myobj (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(64),
  color varchar(64) DEFAULT NULL,
  price float,
  description text,
  dateofcreation varchar(8) DEFAULT NULL
  PRIMARY KEY (id)
) 
```

我想显示一个包含记录列表（对象名称、颜色、价格）的页面

```
List (name, color, price)
      apple, red,    5.00
      brick, orange, 1.00
      corn,  yellow, 2.00 
```

如果`$_REQUEST['id']`已定义，我想显示所选记录的详细信息总量（名称、颜色、价格、描述、创建日期）`id`

**最后的问题：**

对列表视图使用 1 个查询是否更快

```
SELECT name, color, price FROM myobj 
```

后跟 1 个查询以获取详细视图

```
SELECT * FROM myobj WHERE id=[id_provided] 
```

或者

共 1 个查询

```
SELECT * FROM myobj 
```

然后当结果集的当前行的id与http请求中提供的id匹配时，将详细视图的值保存在PHP中？

我相信 2 个查询更优雅，但我想知道它在处理时间方面的效率如何（多个数据库连接与包含无用数据的大量结果集）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:45:23.787

我认为这真的取决于很多事情，行数和它们的大小。

两次调用有很大的开销。但取决于额外数据的大小，可能会或可能不会比描述字段的大小产生更大的影响。如果没有“文本”描述字段，那么一个调用显然会更快。

但你说这是假的——所以谁能说出你的实际查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:46:28.883

这取决于您需要多少数据。

通常 - 更少的查询更好。

可以说，有“主”表和“详细”表。

如果您有 100 个“主”行 - 您将需要 100 个查询来获取它们的“详细信息”。

在这种情况下 - 我通过连接获取所有数据，然后我构建类似树结构（数组）的东西以使用“foreach”循环显示它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:12:00.207

这是一个用户界面问题。是不是要先渲染三列再获取细节？如果是这样，那么您希望最小化渲染时间。这表示使用两个查询。更简单的查询应该稍微快一些，因为它返回的数据更少。

如果您要在任何人看到它们之前输入所有详细信息，那么请使用第二种形式。这似乎不太可能。

更重要的是，我认为`*`在这种查询中使用是不好的做法。您应该明确包括两个查询的列列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:47:20.670

让我们看看这个。您对列表视图的第一个建议是

```
 SELECT name, color, price FROM myobj 
```

这将是一次全表扫描，和 a 一样，`SELECT * FROM myOBJ` 也就是说，它是 o(n)

接下来，你有`SELECT * FROM myobj WHERE id=[id_provided]` 由于这个字段（id）被索引，它的复杂性是恒定的。它会立即检索该行。

但是，看起来您将显示所有项目的详细信息，并且我假设您将遍历所有行并获取每个行的详细信息。对 n 条记录的持续检索将是 O(n)。

如果您要获取所有记录的详细信息，为什么不只获取`select *`一次呢？

# command-line - 如何停止 Windows 服务，检查它是否已停止，然后使用 Cmd Line 重新启动它？

> ID：15117432
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:24.107
> 
> 标签：command-line, cmd, command-prompt

我有一个相当简单的任务要完成，但我对命令行脚本完全是个菜鸟。我搜索了一下，发现了一些与 Windows 机器上的服务交互的基本命令，但在检查服务是启动还是停止方面却一无所获。我希望有人可以帮助编写一个停止 3 项服务的脚本，检查以确保所有 3 项服务都已停止，并且一旦全部停止..重新启动它们。在启动其中任何一个备份之前，我需要确保所有 3 个都停止。我知道如何停止和启动服务，但剩下的就是我卡住的地方。

```
net Stop S1
net Stop S2
net Stop S3

//Check if all 3 are stopped

//If all 3 have been stopped successfully
net start s1
net start s2
net start s3 
```

我想出了这个，但不认为语法是正确的......

```
net stop PriceIdxImport
net stop RawDataImportDB
net stop DBDailyTrxProcessService

set Pstate = sc query PriceIdxImport state
set Rstate = sc query RawDataImportDB state
set Dstate = sc query DBDailyTrxProcessService state

if Pstate == Inactive if Rstate == Inactive if Dstate == Inactive GOTO sub_StartServices

:sub_StartServices
net start PriceIdxImport
net start RawDataImportDB
net start DBDailyTrxProcessService 
```

* * *

好吧，我把上面的脚本改成了一个while循环……它没有正确地循环吗？它检查了状态然后退出:(

```
 echo on
 net stop PriceIdxImport
 net stop RawDataImportDB
 net stop DBDailyTrxProcessService
 ping -n 5 127.0.0.1 > nul
 set Pstate = Sc query PriceIdxImport  |find /i "STOPPED"
 set Rstate = sc query RawDataImportDB |find /i "STOPPED"
 set Dstate = sc query DBDailyTrxProcessService |find /i "STOPPED"
 set Condition="false"

 while Condition="false";do if Pstate neq "" ( if Rstate  neq "" (if  Dstate neq ""          GOTO sub_StartServices));done
exit

:sub_StartServices
set Condition="true"
net start PriceIdxImport
net start RawDataImportDB
net start DBDailyTrxProcessService 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:43:07.017

请试试这个脚本

```
echo on
:sub_StopServices    
net stop PriceIdxImport
net stop RawDataImportDB
net stop DBDailyTrxProcessService

set Pstate = Sc query PriceIdxImport  |find /i "STOPPED"
set Rstate = sc query RawDataImportDB |find /i "STOPPED"
set Dstate = sc query DBDailyTrxProcessService |find /i "STOPPED"

if Pstate neq "" ( if Rstate  neq "" (if  Dstate neq "" (GOTO sub_StartServices) else (GOTO sub_StopServices) ) else (GOTO sub_StopServices)) else (GOTO sub_StopServices)
exit
:sub_StartServices
net start PriceIdxImport
net start RawDataImportDB
net start DBDailyTrxProcessService 
```

# php - 如何在 PHP 中使用 wsdl / SOAP 保存图像？

> ID：15117443
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:54.310
> 
> 标签：php, soap, wsdl

您好我正在尝试检索通过 wsdl 作为变量传递的图像

```
$wsdl = 'http://mydataconnection.com/IR?wsdl'; 
ini_set("soap.wsdl_cache_enabled", "0"); // TODO: disable WSDL cache if required
ini_set("default_socket_timeout", 10);   // TODO: set appropriate read timeout
$client = new SoapClient($wsdl, array("connection_timeout"=>5)); 

$days = 7;  // Get all products that have changed in the past 7 days
$date = date('d/m/Y 00:00', (time() - ($days * 24 * 60 * 60))); 
$productIds = $client->getProductIdsChangedSinceDateStrForType(array("lastRequestDateStr" => $date, "leafOnly" => true))->getProductIdsChangedSinceDateStrForTypeReturn;

foreach ($productIds as $productId) { 
$product = $client->getProductUsingIdAndImageFlag(array("productId" => $productId, "incImage" => true))->getProductUsingIdAndImageFlagReturn; 

$image =       $product->image; 

} 
```

此代码返回 $product （一个数组）中的变量数量，包括返回整个图像的 $product->image 但我似乎无法以清晰的格式保存数据.. $image 数据的开头看起来像这个而且很长，所以我不会发布所有内容......

```
‰PNG  IHDR88@x=€IDATxÚì½|[×Ùø¯3CÌÌÌÌL2³%ÙZK–%Ë’eŒ23sÐa‡“¦M»•×n+­´­k»rõïÈ7ñœ4É¶÷Ýÿó×žïçùœœV$û|ïóœ««+Ôù? þ (*¢B PTE…@ PTŠ @ ¨Š @Q!¢B (*¢B PTE…@ PTŠ @ ¨Š @Q!¢B (*¢B PTE…@ PTŠ @ ¨@Q!¢B (*¢B PTE…@ PTŠ @ ¨@Q!¢B (*¢B PTE…@ ¨Š @ ¨@Q!¢B (*¢B PTE…@ ¨Š @ ¨@Q!¢B (*E…@ PTE…@ ¨Š @ ¨@Q!¢B (*E…@ PTE…@ ¨Š @ ¨@Q!(*¢B (*E…@ PTE…@ ¨Šúÿ ?ýË-EýÿÍÒ 
```

我尝试使用下面的代码来保存图像，但它不起作用并且可能是错误的方法。

```
base64_decode($image);
$filename = "$imagename.png";
if (!$handle = fopen($filename, 'w')) {
    echo "Cannot open file ($filename)";
    exit;
}

if (fwrite($handle, $content) === FALSE) {
  echo "Cannot write to file ($filename)";
  exit;
}
fclose($handle);
echo system("png -d $filename"); 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T08:54:39.690

我得到了像你这样的肥皂客户的回应。在我的情况下，下面的代码有效。

```
$image =       $product->image;
$filename = "test.png";
if (!$handle = fopen($filename, 'w')) {
    echo "Cannot open file ($filename)";
    exit;
}
if (fwrite($handle, $image) === FALSE) {
    echo "Cannot write to file ($filename)";
    exit;
}
fclose($handle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:46:31.713

只是尝试随机的事情，看看会发生什么......

```
header("Content-type: image/png"); // or whatever 
print $image; 
```

将在屏幕上显示图像我仍在尝试解决如何将其保存为文件

# objective-c - 如何获得当前音量

> ID：15117446
> 
> 赞同：0
> 
> 时间：2013-02-27T16:40:56.037
> 
> 标签：objective-c, macos, audio, core-audio

我正在工作 10.8

这是获取当前扬声器音量的代码，

```
-(float)getVolume{

    float volume = 0.0;

    UInt32 thePropSize = sizeof(volume);

    AudioDeviceID devId = [self GetOutputAudioDevice];

    AudioObjectPropertyAddress thePropertyAddress = { kAudioDevicePropertyVolumeScalar, kAudioDevicePropertyScopeOutput, kAudioObjectPropertyElementMaster };

    if(AudioObjectHasProperty(devId, &thePropertyAddress)){
        AudioObjectGetPropertyData(devId, &thePropertyAddress, 0, NULL, &thePropSize, &volume);
    }else{
        printf(" doesn't have property to get the volume");
    }

    return volume;
} 
```

函数**AudioObjectHasProperty**无法获取 Current Vol 属性，知道出了什么问题，

这是选择默认输出设备的代码，

```
-(AudioDeviceID)GetOutputAudioDevice{

    OSStatus err;
    AudioDeviceID device = 0;
    UInt32 size = sizeof(AudioDeviceID);
    AudioObjectPropertyAddress address = {
        kAudioHardwarePropertyDefaultOutputDevice,
        kAudioObjectPropertyScopeGlobal,
        kAudioObjectPropertyElementMaster
    };

    err = AudioObjectGetPropertyData(kAudioObjectSystemObject,
                                     &address,
                                     0,
                                     NULL,
                                     &size,
                                     &device);
    if (err)
    {
        NSLog(@"could not get default audio output device");
    }

    return device;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:53:30.940

有两种选择。第一步是确定您想要什么设备并获取其 ID。假设默认输出设备，代码将如下所示：

```
AudioObjectPropertyAddress propertyAddress = { 
    kAudioHardwarePropertyDefaultOutputDevice, 
    kAudioObjectPropertyScopeGlobal, 
    kAudioObjectPropertyElementMaster 
};

AudioDeviceID deviceID;
UInt32 dataSize = sizeof(deviceID);
OSStatus result = AudioObjectGetPropertyData(kAudioObjectSystemObject, &propertyAddress, 0, NULL, &dataSize, &deviceID);

if(kAudioHardwareNoError != result)
    // Handle the error
Next, you can use the kAudioHardwareServiceDeviceProperty_VirtualMasterVolume property to get the device's virtual master volume:

AudioObjectPropertyAddress propertyAddress = { 
    kAudioHardwareServiceDeviceProperty_VirtualMasterVolume, 
    kAudioDevicePropertyScopeOutput,
    kAudioObjectPropertyElementMaster 
};

if(!AudioHardwareServiceHasProperty(deviceID, &propertyAddress))
    // An error occurred

Float32 volume;
UInt32 dataSize = sizeof(volume);
OSStatus result = AudioHardwareServiceGetPropertyData(deviceID, &propertyAddress, 0, NULL, &dataSize, &volume);

if(kAudioHardwareNoError != result)
    // An error occurred
Alternatively, you can use kAudioDevicePropertyVolumeScalar to get the volume for a specific channel:

UInt32 channel = 1; // Channel 0  is master, if available
AudioObjectPropertyAddress propertyAddress = { 
    kAudioDevicePropertyVolumeScalar, 
    kAudioDevicePropertyScopeOutput,
    channel 
};

if(!AudioObjectHasProperty(deviceID, &propertyAddress))
    // An error occurred

Float32 volume;
UInt32 dataSize = sizeof(volume);
OSStatus result = AudioObjectGetPropertyData(deviceID, &propertyAddress, 0, NULL, &dataSize, &volume);

if(kAudioHardwareNoError != result)
    // An error occurred 
```

Apple的文档中解释了两者之间的区别：

kAudioHardwareServiceDeviceProperty_VirtualMasterVolume

一个 Float32 值，表示音量控件的值。此属性值的范围是 0.0（静音）到 1.0（全级别）。此属性的效果取决于与 HAL 音频对象关联的硬件设备。如果设备具有主音量控制，则此属性对其进行控制。如果设备具有单独的通道音量控件，则此属性适用于由设备的首选多通道布局标识的那些，或者如果设备仅为立体声，则适用于首选立体声对。此控件保持其影响的通道之间的相对平衡。

因此，准确定义设备的音量可能很棘手，尤其是对于具有非标准通道映射的多通道设备。我希望这会有所帮助

# hibernate - SQuirrel SQL 客户端与休眠 4.1.7

> ID：15117450
> 
> 赞同：0
> 
> 时间：2013-02-27T16:41:00.193
> 
> 标签：hibernate, squirrel-sql

有没有人尝试使用 SQuirrel 结合休眠休眠 4.1.7 运行 HQL 查询。

### 软件版本：

SQuirrel 3.4.0
Oracle Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production
Hibernate 4.1.7-final

### 问题描述

当我附加到休眠进程并创建一个会话时：

1.  “映射对象”选项卡不显示任何对象
2.  堆栈跟踪显示

    ```
    java.lang.RuntimeException: java.lang.NoSuchMethodException:
    java.lang.Object.getMappedClass(org.hibernate.EntityMode)
    ```

3.  运行一个简单的 hql 查询 ( `select t from someTypeName t`) 会导致

    ```
    net.sourceforge.squirrel_sql.plugins.hibernate.server.SquirrelHibernateServerException：
    Hibernate 服务器进程发生异常：
    ORA-00923: 在预期的地方找不到 FROM 关键字
    java.sql.SQLSyntaxErrorException：
    ORA-00923: 在预期的地方找不到 FROM 关键字
    ```

难道是 SQuirrel 根本不支持 Hibernate 4.1.7？

我会很感激任何帮助，
阿纳托利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:08:03.840

我正在努力解决同样的问题。寻找解决方案，我花时间修补了 squirrel 以使用 hibernate 4.1.9。

该补丁已提交到 squirrel 的邮件列表，等待批准。同时，补丁在这里： http: [//pastebin.com/yinBqy4m](http://pastebin.com/yinBqy4m)

最好的祝福，

彼得

# magento - Magento 1.7：具有属性大小的目录列表->慢

> ID：15117451
> 
> 赞同：0
> 
> 时间：2013-02-27T16:41:03.023
> 
> 标签：magento, magento-1.7

我正在使用 Magneto 1.7CE 在我的类别视图 (list.phtml) 上列出 16 个可配置产品。

您可以找到有关 16 种产品的以下信息：

*   图片、名称、价格和尺寸

在启用 APC、memcache 和“使用平面目录”的情况下，页面生成非常慢（2 秒）。一大“表演者”是：

```
?php
   $attrs  = $_product->getTypeInstance(true)->getConfigurableAttributesAsArray($_product);
                    foreach($attrs as $attr) {
                             if(0 == strcmp("size", $attr['attribute_code'])) {
                                    $options    = $attr['values'];
                    foreach($options as $option) {
                    print "{$option['store_label']} ";
                    }
                }
            }?> 
```

你有什么想法，我怎样才能加快这段代码的速度？它为我提供了每个指定的简单产品的“库存”尺寸。

如果我禁用此剪辑，则页面生成需要〜0,9秒。

问候，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:59:22.507

基本上看起来你可以用这个（或类似的东西）替换所有这些来获得一个属性。

```
echo $_product->getResource()->getAttribute('size')->getFrontend()->getValue($_product); 
```

# parsing - 具有不同关联性和相同优先级的相邻运算符的表达式消歧

> ID：15117457
> 
> 赞同：2
> 
> 时间：2013-02-27T16:41:26.827
> 
> 标签：parsing, evaluation, operator-precedence, associativity, disambiguation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:41:26.827

# javascript - 检查aes密文的完整性

> ID：15117474
> 
> 赞同：0
> 
> 时间：2013-02-27T16:42:02.633
> 
> 标签：javascript, aes

解密 AES 密文时，如何检查密文是否有效？例如：

```
Encryption Key: stackoverflow
Plaintext: Hello World!
AES Ciphertext: 3AN75bE2LlGR957fjjd5WOfRmdY= 
```

当使用相同的加密密钥对其进行解密时，明文结果将是`Hello World!`

但是，如果我使用不同的密钥：

```
Encryption Key: stackexchange
AES Ciphertext: 3AN75bE2LlGR957fjjd5WOfRmdY=
Plaintext Result: ]o+ãTy¹¶Ïâ 
```

有没有办法验证明文结果是否有效以及指定的加密密钥是否正确？

我正在使用[http://www.movable-type.co.uk/scripts/aes.html](http://www.movable-type.co.uk/scripts/aes.html)编写一个 JS 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:07:11.620

检查密文是否正确的最佳方法是在密文上使用 MAC（例如，使用 SHA-256 的 HMAC）和其他参数（如 IV）或经过身份验证的密码（如 GCM）。如果您使用使用分组密码的 MAC，您当然应该使用单独的密钥。

检查已知值（如在接受的答案中）会使您容易受到各种攻击，并且由于填充和明文预言机攻击，当然不应该在传输协议上使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T16:44:20.620

当然：加密一个序列化的 json 对象，该对象包含您的纯文本，而不仅仅是纯文本。如果它不反序列化它不是正确的密钥

序列化和加密这个：

`{"p": "Hello World!"}`

解密时得到`{"p":"`前缀的几率是1:2^48，后缀是`"}`1:2^16。明文的解密也必须对 json 值有效。这意味着通过检查解密的文本是否可以反序列化并具有价值，误报的可能性小于 1:2^64，这`p`对于大多数应用程序来说已经足够好了。

如果你*真的*坚持你可以包含另一个字段来存储你的明文的第一个字符：

`{"p": "Hello World!","v":"H"}`

...但我认为有 1:2 ^ 128 的误报验证机会有点过头了

# android - ANDROID ELM327/OBD2 协议

> ID：15117475
> 
> 赞同：12
> 
> 时间：2013-02-27T16:42:03.867
> 
> 标签：android, obd-ii

我正在尝试将命令从 ANDROID 发送到 ELM327/OBD2 协议（WIFI 诊断故障）。我从以下网址下载了一个 api 或库：[https](https://github.com/pires/android-obd-reader) ://github.com/pires/android-obd-reader 这个 api 没有任何文档的问题。我们需要有关交换数据的命令和协议的帮助。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T14:41:38.753

你真正想知道什么？

使用 ELM327，协议相当简单。您只需以 ASCII 格式发送 PID，您将收到 ASCII 格式的答复。它基于民意调查。因此，您将收到 1 个请求的 1 个答案。只要你不发送，你就不会收到。

对于转换和发送什么命令，请检查我提供的链接。

更多链接：

[AT 命令](https://www.sparkfun.com/datasheets/Widgets/ELM327_AT_Commands.pdf)
[OBD-II 命令](http://en.wikipedia.org/wiki/OBD-II_PIDs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T14:10:02.140

如果你想使用这个库，你应该下载源代码。源代码是不言自明的。还有一个示例应用程序的源代码。我尝试运行示例应用程序，但它对我不起作用。但是，我查看了源代码，它对我的​​应用程序有所帮​​助。

在这个库中，您会发现已经实现且易于使用的主要查询。我只在 ObdResetCommand 类上发现了一个错误。此类实现超类 ObdCommand 并以这种方式覆盖 readResult 方法：

```
@Override
public void readResult(InputStream in) throws IOException {
    // do nothing
    return;
} 
```

要使其工作，您应该删除此覆盖方法以使用超类之一。如果您不这样做，则不会读取响应，它将在以下命令中读取，因此，每个响应都会延迟一个查询。

我希望它有所帮助。

# ssrs-2008 - 在单个报告页面上显示/拆分数据

> ID：15117479
> 
> 赞同：0
> 
> 时间：2013-02-27T16:42:09.247
> 
> 标签：ssrs-2008

在这一点上，我不确定如何提出我在使用 SSRS 开发请求的报告时遇到的问题。我被赋予使用的数据库视图以及报告本身的请求格式是静态的，因此我可以做的事情受到限制（尽管我可能能够更改视图或SP 添加，如果需要）。查看数据如下图所示。

我的问题的“短”版本-视图具有两种销售类型的销售信息（显然是正常和折扣？）。报告的要求格式是在报告的不同页面上显示每个 Rep 的销售额，并分别显示每种类型的销售，即 RepName 在页面顶部，两个不同的表格分别显示 Sale 和 DiscountedSale 信息。我为这两种类型创建了一个报告，但是当我尝试将 DiscSale 报告作为子报告添加到销售报告时，我遇到了预期的问题。我没有已知的方法来确保页面上用于两者的数据用于相同的 SalesRep，并且不知道如何确定每个页面的唯一数据点 (RepFullName)。即使我这样做了，我也不知道如何在 SSRS 中创建这种关系。我什至还没有提出我所知道的“

如果对我的问题的描述听起来含糊不清或混乱，我深表歉意，但老实说，这就是我的大脑目前的运作方式和处理方式！如果有人能理解我的问题是什么并能够指出我解决这个问题的正确方向，我将不胜感激！

可用视图字段 DayOfCharge、RepFullName、ManagerFullName、ChargeNumber、ProductID、SaleStart、SaleEnd、SaleTime、DiscStart、DiscEnd、DiscTime、ProductName、描述

谢谢你！！

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:12:06.980

作为创建子报表的替代方法，您可以返回同一数据集中的常规销售和折扣销售。然后，您可以将两个不同的数据区域添加到报告中（我假设您将使用表格）并为每个区域添加一个过滤器以仅显示销售或折扣销售。

如果您将这两个表都放在一个列表区域中，并且您的数据集每个销售代表有一行，那么您应该能够为每个销售代表显示一个页面，其中包含两个表，一个用于销售，一个用于折扣销售。

# c# - 仅保留字符串中的前 20 个条目

> ID：15117485
> 
> 赞同：1
> 
> 时间：2013-02-27T16:42:14.707
> 
> 标签：c#, asp.net

我有一个包含计算的字符串。每个条目之间都有一个空格。如何只保留最近的 20 个条目？

```
Label2.text += TextBox1.Text + "+" + TextBox2.Text + "=" + Label1.Text + " "; 
```

输出是：

20+20=40 40+20=60 60+20=80

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:53:47.650

您可能想要维护一个项目队列（先进先出结构）：

```
// have a field which will contain calculations
Queue<string> calculations = new Queue<string>();

void OnNewEntryAdded(string entry)
{
    // add the entry to the end of the queue...
    calculations.Enqueue(entry);

    // ... then trim the beginning of the queue ...
    while (calculations.Count > 20)
        calculations.Dequeue();

    // ... and then build the final string
    Label2.text = string.Join(" ", calculations);
} 
```

请注意，`while`循环可能只运行一次，并且可以很容易地替换为`if`（但这只是一个故障保险，以防队列从多个位置更新）。

另外，我想知道 a`Label`是否真的是保存项目列表的正确控件？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T16:55:53.650

`string.Split(' ').Reverse().Take(20)`

或者，正如 David & Groo 在其他评论中指出的那样

`string.Split(' ').Reverse().Take(20).Reverse()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:43:23.360

使用字符串拆分

```
string.Split(' ').Take(20) 
```

如果最近的在最后，那么你可以使用`OrderByDescending`then`Take20`

```
string.Split(' ').Select((n, i) => new { Value = n, Index = i }).OrderByDescending(i => i.Index).Take(20); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T16:45:29.197

```
string[] calculations = yourString.Split(' ');
string[] last20 = calculations.Skip(Math.Max(0, calculations.Count() - 20).Take(20); 
```

# javascript - 从 JQuery 方法将值设置为 TextField

> ID：15117486
> 
> 赞同：0
> 
> 时间：2013-02-27T16:42:16.730
> 
> 标签：javascript, jquery, html

我在下面定义了一个文本字段；我需要从 JQuery 方法中为这个文本字段设置一个值。正在调用 JQuery 方法，但未显示该值。

```
<input type="text" id="br_name" name="br_name" /> 
```

```
$(function () {
    $('.senddb').click(function () {
         $(".br_name").attr("value", $(this).data("bankbranchName"));
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:51:37.917

你把一些东西混在一起了。您需要通过“#idname”获取具有 id 的元素，并通过“.classname”获取具有类的元素。使用 jQuerys .val() 方法来设置和获取输入值。此外，您的数据属性不应该是驼峰式。

[http://jsfiddle.net/Dtk67/](http://jsfiddle.net/Dtk67/)

HTML

```
<input type="text" id="br_name" name="br_name" />
<button class="senddb" data-bankbranchname="foo">Button</button> 
```

JS

```
$('.senddb').click(function () {
    $("#br_name").val($(this).data("bankbranchname"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:44:07.803

如果要获取或设置文本输入的`value` *属性*，请使用以下[`.val()`](http://api.jquery.com/val/)方法：

```
$(function () {
    $('.senddb').click(function () {
        $(".br_name").val($(this).data("bankbranchName"));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:47:55.547

您应该使用 id 选择器而不是类选择器 `$("#br_name").val($(this).data("bankbranchName"));`

# java - 同步 Java 方法

> ID：15117488
> 
> 赞同：0
> 
> 时间：2013-02-27T16:42:18.173
> 
> 标签：java, synchronization

假设我有以下代码作为 Web 服务的一部分运行。代码必须是线程安全的，例如没有其他 Web 服务调用可以更改另一个实例中的变量。此代码是否满足此要求？

```
public class ExampleClass {

   public static String abc = "000";
   public static ArrayList<String> myList = new ArrayList();

   public static synchronized final void clearList(){
   mylist.clear();
   } 
   public static synchronized final void addToList(String listItem){
   myList.add(listItem);
   }

   ...

   more static synchronized methods...

} 
```

我继承了这段代码，需要进行最少量的更改以确保它是同步的。

非常感谢您的回答。

[编辑]为了澄清一点。执行此代码时会调用 Web 服务，它正在使用“abc”和“myList”变量，例如更改它们。与此同时，另一个 Web 服务调用进来，它也将开始使用这些变量。然而，这两个单独的请求应该有自己的“abc”和“myList”变量，例如它们不能在它们之间共享这些变量，否则结果将是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:44:24.487

不，你的`String` `abc`和 `ArrayList` `myList`可以被另一个班级清楚地访问。制作它们`private`（最好是非`static`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:52:45.467

[编辑：附录]

**线程安全**只是一个表述，而不是一个绝对的术语。除非你定义你的意思，否则很难提供帮助。

例如：您没有描述如何访问“abc”以及您的期望是什么。例如，如果您要求对 abc 和列表的更改是原子的，那么您需要将访问它们的代码包装到单个同步块中。如果“abc”永远不会改变，那么你不需要添加任何东西来使它成为线程安全的。如果是这样，您需要将所有修改**并读取**到同步块中（否则您将遇到令人讨厌的可见性问题）。如果只有一个线程对 abc 进行更改，那么将其设置为 volatile 应该没问题。

这两个问题是：

*   myList 是公开的，因此很难对使用它的代码做出任何保证甚至假设。如果你把它设为私有，你至少只需要担心你自己的方法。您可能想跳过方法的同步并直接转到： myList = Collections.synchronizedList(new ArrayList()); 这样所有方法都将在 myList 对象上同步；如果您决定这样做，则必须将 myList 设为最终版本（以便没有人可以将其切换为非同步版本）；
*   您的描述：“没有其他 Web 服务调用可以更改另一个实例中的变量”与线程安全无关。任何人都可以更改 myList 中的任何内容，因为您提供了方便的方法（公共静态方法）。此外，ExampleClass 的所有实例共享 myList，并且它们修改单个实例。关键是更改将是线程安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:49:02.003

变量是公开的，所以没有。将它们设为私有。如果您有任何返回列表对象的方法，则需要更改它们以防御性地复制列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:58:59.267

如果可以，请使用[同步的集合。](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedCollection%28java.util.Collection%29)

# c# - 在 C# / .NET 中为 PostMessage() 创建 WM_TOUCH 消息

> ID：15117490
> 
> 赞同：0
> 
> 时间：2013-02-27T16:42:21.883
> 
> 标签：c#, .net, winapi, multi-touch, wm-touch

（有关背景，请参阅[为 SendMessage() 编写 WM_TOUCH 消息，Kinect 作为多点触控设备](https://stackoverflow.com/questions/12081167/composing-a-wm-touch-message-for-sendmessage-kinect-as-a-multi-touch-device)，它提出的问题与我的基本相同，但其接受的答案实际上并没有回答问题。棘手的一点是没有填写`TOUCHINPUT`结构但制作一个有效的触摸输入句柄。）

我想以一种令人讨厌的骇人听闻的方式模拟多点触控输入设备的存在，大致如下：

```
while (true) {
  choose locations etc. for simulated touches;
  PostMessage(GetForegroundWindow(), WM_TOUCH, nTouches, ...);
} 
```

棘手的是标记为“...”的空间中的内容。*从消息消费者*的角度来看，MSDN 文档毫不奇怪，它`WM_TOUCH`说消息`lParam`的`WM_TOUCH`

> 一个触摸输入句柄，可用于调用以`GetTouchInputInfo`检索有关与此消息关联的触摸点的详细信息。

我可以很容易地制作，例如，一个结构数组`TOUCHINPUT`，这就是`GetTouchInputInfo`给你的。但这似乎与“触摸输入句柄”完全不同。（例如，触摸输入句柄必须是正确的东西才能传递给`CloseTouchInputHandle`，据称`PostMessage`或`SendMessage`将这样做。）

**用户代码是否有可能（官方或非官方！）生成可以传递给的有效触摸输入句柄`PostMessage`？**如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-16T15:48:43.260

Windows 8 有一个 TouchInjection API，用于在桌面环境中伪造触摸。

[http://social.technet.microsoft.com/wiki/contents/articles/6460.simulating-touch-input-in-windows-8-using-touch-injection-api.aspx](http://social.technet.microsoft.com/wiki/contents/articles/6460.simulating-touch-input-in-windows-8-using-touch-injection-api.aspx)

# regex - 将子文件夹的所有文件重定向到新服务器上的相同文件

> ID：15117495
> 
> 赞同：1
> 
> 时间：2013-02-27T16:42:43.623
> 
> 标签：regex, mod-rewrite, redirect, http-status-code-301, http-redirect

我必须将子文件夹的所有静态 HTML 文件重定向到新位置（旧站点的 drupal 版本）：

```
oldsite.net/topfolder/subx  =>  newsite.net/subx 
```

但新站点上不再存在所有文件。丢失的文件应重定向到新子文件夹中的主页

举个例子（请注意目标 URL 没有“.html”扩展名）：

```
oldsite.net/topfolder/subx/file1.html redirect to newsite.net/subx/file1 
oldsite.net/topfolder/subx/file2.html redirect to newsite.net/subx/file2 
```

和

```
oldsite.net/topfolder/subx/missing1.html redirect to newsite.net/subx/mainpage
oldsite.net/topfolder/subx/missing2.html redirect to newsite.net/subx/mainpage 
```

在根 .htaccess 中，我可以为每个文件编写如下内容：

```
redirect 301 /topfolder/subx/file1.html  http://www.newsite.net/subx/file1 
```

和丢失的文件

```
redirect 301 /topfolder/subx/missing1.html http://www.newsite.net/subx/mainpage 
```

但是对于超过 300 个文件，这是很多工作。

我不太擅长重写规则，我正在尝试编写规则，但它似乎不起作用。

这应该适用于现有文件（我没有尝试过）：

```
RewriteRule /topfolder/subx/^ (.*)\.html$  http://www.newsite.net/subx/$1 [R=301,L] 
```

但是丢失的文件怎么办？上面的规则对吗？

有什么建议吗？谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:52:10.897

通过启用 mod_rewrite 和 .htaccess`httpd.conf`然后将此代码放在您**的 oldsite**目录`.htaccess`下：`DOCUMENT_ROOT`

 **```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^topfolder/(subx/[^.]+)\.html$ http://www.newsite.net/$1 [R=302,L,NC] 
```

通过启用 mod_rewrite`httpd.conf`和 .htaccess，然后将此代码放在您的**newsite**目录`.htaccess`下：`DOCUMENT_ROOT`

 **```
# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
# not found then strip out query string and redirect to mainpage
RewriteCond %{QUERY_STRING} ^new=1$ [NC]
RewriteRule ^ subx/mainpage? [R=301,L]

# otherwise just strip out query string
RewriteCond %{QUERY_STRING} ^new=1$ [NC]
RewriteRule ^ %{REQUEST_URI}? [R=301,L] 
```****

# css - 右对齐父元素可能具有或不具有固定宽度的元素

> ID：15117497
> 
> 赞同：0
> 
> 时间：2013-02-27T16:43:01.307
> 
> 标签：css

我有一个表格，其中所有单元格都包含一个 div 元素。所有的 div 元素都有固定的宽度。我想仅使用 css 在 tds 中右对齐这些 div。问题是不是所有的 tds 都有固定的宽度，如果他们的孩子向右浮动，那些没有的人会搞砸。确实具有固定宽度的 tds 总是比孩子宽。反正有这样做吗？如果没有，感觉有点好笑，因为我可以做左对齐（默认），我也可以通过对孩子做 margin-left:auto 来做中心对齐，在这种情况下，父母有固定宽度的 div 将居中，并且父母没有固定宽度的div不会受到影响。但是如果不固定所有 tds 的宽度，我似乎找不到任何右对齐方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:58:29.480

Simply doing margin-left:auto and margin-right:0(or unspecified) should do the trick.

# java - 如何使用 Json 数组计算用户在测验中回答的项目数

> ID：15117499
> 
> 赞同：0
> 
> 时间：2013-02-27T16:43:04.627
> 
> 标签：java, javascript, android, json

我正在开发一个简单的测验，其中存储了 50 个问题并随机显示..我的问题是..我如何计算用户回答测验的项目数..例如，我有 50 个问题，如果用户只回答10？所以我希望它在我的分数（对话框）中显示玩家的分数和用户回答的项目数。请帮助我..请..我该怎么做???真的非常感谢帮助！

```
private OnClickListener finishListener = new OnClickListener() {
        public void onClick(View v) {
            setAnswer();
            //Calculate Score
            int score = 0;
            int count = 0;

            for(int i=0; i<correctAns.length; i++)
            {

                if ((correctAns[i] != -1) && (correctAns[i] == selected[i]))
                    score++;

            }
            count++;
            AlertDialog alertDialog;
            alertDialog = new AlertDialog.Builder(Question2.this).create();
            alertDialog.setTitle("Your Score");
            alertDialog.setMessage("You've got "+(score)+" out of " + (count) + "  items");

            alertDialog.setButton(AlertDialog.BUTTON_NEGATIVE,"Okay", new DialogInterface.OnClickListener(){

                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(Question2.this,
                            MainMenu.class);
                    startActivity(intent);
                }
            });

            alertDialog.show();

        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:47:12.750

您可以创建一个隐藏变量，并在用户每次选择答案时递增它。当您决定显示结果时，您可以从这个隐藏变量中读取答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:33:33.043

如果您需要永远保存的问题，我的意思是当用户退出程序并保存问题时。在这种情况下，您可以将其保存在数据库中的某个表中。如果您只需要在此用户会话中保存答案，请创建一些 ArrayList 并放入此问题列表 id。

# actionscript-3 - Actionscript 3 OOP编程方式？

> ID：15117501
> 
> 赞同：0
> 
> 时间：2013-02-27T16:43:07.580
> 
> 标签：actionscript-3, flash

前段时间我曾经使用 Actionscript 2 在 Flash 上编写简单的东西。现在我正在尝试继续使用 Actionscript 3，似乎我正在设法适应这些变化。

我想知道的是我见过的很多程序员的编程方式。

例如，这段代码让我想知道一些事情：

```
package  {
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    public class KeyExample extends Sprite {
        private var _theyArePressed:Object = { };
        public function Example() {

        }
    }
} 
```

为什么要使用“包”？我总是在电影的第一帧放一些AS，就是这样，现在这样做有错吗？

然后我看到他们导入了一些东西，但据我所知，我可以轻松使用这些东西而无需导入任何东西，那么这里有什么意义呢？

关于精灵？我很想知道它们是干什么用的。。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:11:16.917

```
package 
```

这一行定义了您要定义的类所属的包或集合。它反映了保存类的 .as 文件相对于 FLA（或其他源路径）的位置。包背后的想法是为您的类提供更多上下文并避免类名冲突。例如，您可以制作自己的`Sprite`类并将其放入自己的包中。

还有一个[`internal`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#internal)命名空间可用于使一个类仅可用于同一包中的其他类。

```
import package.Class; 
```

这一行将外部类引入到当前类定义中。与默认情况下所有可用的东西相比，这似乎很烦人，但它可以使用`packages`并具有许多优点：

*   它提供了可读性——您可以通过浏览导入语句的顶部列表来确定每个类中正在使用哪些类。
*   如果您在两个不同的包中有两个名称相同的类（例如，如果您创建自己的 Sprite 类），您可以定义您想要的类。
*   您可以轻松更改 import 语句以引用不同包中完全不同的同名类。

当您处理与另一个位于同一包中的类时，您不需要使用导入，*您只需要导入不同包中的类*。

> 关于精灵？我很想知道它们是干什么用的。。

[`Sprite`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)是一个内建类，继承自[`DisplayObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)，意思是用来表示可以通过显示列表绘制到屏幕上的图形。它`MovieClip`比内置 DisplayObjects 层次结构的传统低一层，如下所示：

![在此处输入图像描述](../Images/e4ef4a18a5d986c8db405f0f52e71e0b.png)

这意味着这`Sprites`比`MovieClips`将它们呈现到屏幕所涉及的过程以及它们用于保存信息的内存要轻。两者之间的主要区别在于，MovieClips 有帧，而 Sprites 没有，这意味着您不会有类似Sprite 的方法`gotoAndStop()`或属性。`currentFrame`

获得最大结果的想法是尽可能地向上移动这棵树，通过更轻、更简单的类使用最少的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:03:24.893

用简短的 SO 风格回答来回答您的问题并不容易。

最好，只需搜索一些 OOP Flash 教程。可以在这里找到：http: [//active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/)

简而言之（简化答案）：

*   `package`是 AS3 中代码的一种编写方式，它描述了文件相对于项目的位置（再次，简化答案）。例如，您可以将一些 .as 文件放在文件夹 ( `don/graphics/shapes`) 中，因此包名称为`don.graphics.shapes`.
*   `import`如果您在外部文件中编写代码，则需要填充。如果在框架中编写代码，Flash IDE 可以在后台导入一些类，因此`import`可以省略一些语句。
*   `Sprite`是`MovieClip`没有时间线的。好吧，它还有更多功能（例如，它不是动态的），但在大多数情况下，“没有时间线的电影剪辑”就足以知道了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:00:19.683

如果您想要任何 .fla 供您的 Class 使用，请执行以下操作：

1：将 .as 文件放在指定目录中。这个目录是包的顶部。

2：点击Flash-首选项

![在此处输入图像描述](../Images/46cde5110c017f273b1e1599d6fa64c4.png)

3：点击ActionScript3.0设置... ![在此处输入图像描述](../Images/d488dd81d8a7324a0edac86e99d0813f.png)

4：链接到你的目录。 ![在此处输入图像描述](../Images/2f29386b2c06074e6e00f70f00e4f796.png)

现在可以在任何地方使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T17:00:50.450

使用`DocumentClass`and `Classes`（保存在包中）通常可以使源代码更清洁、更易于维护、可互换，并且可以更好地分组工作。所以只有那里的优势;）

您需要所有导入，因为与时间轴脚本不同，默认情况下几乎没有导入任何类。

`Sprites`就像`MovieClips`没有`Frames`. 所以它们更轻巧。因此，如果您不需要框架，请使用`Sprites`！

顺便说一句，在您的代码段中，功能名称应以小写字母开头；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T17:05:02.340

我们使用包的原因是为了避免命名冲突。我可以创建一个名为 button 的类并在我的组件包中使用它，另一个开发人员可以创建一个名为 button 的类并将其放入他的包中。这样我们就可以在同一个项目中使用这两个按钮而不会发生任何冲突。

我们使用 import 语句在编译时引入这些类，不使用 import 类是不可用的。这样做的原因是，您的项目中可能有一个包含大量类的大型库，但您只想使用一定数量的类，如果您不使用 import，那么它们都将被包含在内，并且生成的 swf 将比只导入所需的类要大。

阅读[这篇文章](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/packages.html)以获得深刻的理解。

如果您需要使用 addChild 等将某些内容添加到显示列表中，则可以使用 Sprite 类。Sprite 就像没有时间线的 MovieClip，因此它不包含多个帧。您在应用程序中使用的第一个类必须能够显示某些内容，因此扩展 Sprite 通常是常态。

阅读[本文](http://www.adobe.com/devnet/flash/quickstart/display_list_programming_as3.html)以了解显示列表以及可以附加到它的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T17:02:24.410

包是分离代码的好方法。如果您有一个想要在多个项目中使用的按钮，您可以将其设为一个类。这遵循 OOP 方法，因为您正在抽象逻辑的不同部分。

类无法访问所有内容，因此您需要导入其他类。如果你想使用键盘，那么你只需要导入它的类。

# go - 运行时错误：“分配给 nil 映射中的条目”

> ID：15117513
> 
> 赞同：15
> 
> 时间：2013-02-27T16:43:27.220
> 
> 标签：go

我正在尝试创建一片地图。虽然代码编译得很好，但我得到下面的运行时错误：

```
mapassign1: runtime·panicstring("assignment to entry in nil map"); 
```

我尝试制作一个地图数组，每个地图包含两个指标，一个“Id”和一个“Investor”。我的代码如下所示：

```
for _, row := range rows {
        var inv_ids []string
        var inv_names []string

        //create arrays of data from MySQLs GROUP_CONCAT function
        inv_ids = strings.Split(row.Str(10), ",")
        inv_names = strings.Split(row.Str(11), ",")
        length := len(inv_ids);

        invs := make([]map[string]string, length)

        //build map of ids => names
        for i := 0; i < length; i++ {
            invs[i] = make(map[string]string)
            invs[i]["Id"] = inv_ids[i]
            invs[i]["Investor"] = inv_names[i]
        }//for

        //build Message and return
        msg := InfoMessage{row.Int(0), row.Int(1), row.Str(2), row.Int(3), row.Str(4), row.Float(5), row.Float(6), row.Str(7), row.Str(8), row.Int(9), invs}
        return(msg)
    } //for 
```

我最初认为像下面这样的东西会起作用，但这也不能解决问题。有任何想法吗？

```
invs := make([]make(map[string]string), length) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T17:15:46.130

您正在尝试创建**一片**地图；考虑以下示例：

[http://play.golang.org/p/gChfTgtmN-](http://play.golang.org/p/gChfTgtmN-)

```
package main

import "fmt"

func main() {
    a := make([]map[string]int, 100)
    for i := 0; i < 100; i++ {
        a[i] = map[string]int{"id": i, "investor": i}
    }
    fmt.Println(a)
} 
```

您可以重写这些行：

```
invs[i] = make(map[string]string)
invs[i]["Id"] = inv_ids[i]
invs[i]["Investor"] = inv_names[i] 
```

作为：

```
invs[i] = map[string]string{"Id": inv_ids[i], "Investor": inv_names[i]} 
```

这称为*复合文字*。

现在，在一个更惯用的程序中，您很可能希望使用 a`struct`来代表投资者：

[http://play.golang.org/p/vppK6y-c8g](http://play.golang.org/p/vppK6y-c8g)

```
package main

import (
    "fmt"
    "strconv"
)

type Investor struct {
    Id   int
    Name string
}

func main() {
    a := make([]Investor, 100)
    for i := 0; i < 100; i++ {
        a[i] = Investor{Id: i, Name: "John" + strconv.Itoa(i)}
        fmt.Printf("%#v\n", a[i])
    }
} 
```

# oracle - Oracle tns 侦听器安全性

> ID：15117515
> 
> 赞同：1
> 
> 时间：2013-02-27T16:43:31.173
> 
> 标签：oracle, security, tns

我注意到在 Oracle 8.1.7*（“SECURITY=ON”）中设置了一个 tns-listener 密码，SID 无论如何都是可枚举的（通过“Command=status”）。根据您的说法，防火墙过滤是唯一可能的解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:39:39.260

Step 1 – Check the DB listener status

```
 lsnrctl status 
```

Notice that the listener you want (in our case “orcl”) is not showing.

Step 2 – Login via sqlplus

```
 sqlplus sys/oracle as sysdba 
```

Sqlplus gave us this error message:

```
 Writing audit records to Windows Event Log failed 
```

Step 3 – Go into the Windows Event Viewer (eventvwr.exe)

Under “Windows Logs”, right click on Application and select “Clear Log”. Do the same for System.

It may also be wise to right click on Application and select Properties. Then, under “Log Size” select the following option under “When maximum log size is reached”: “Overwrite events as needed”. This should prevent the log from maxing out and causing the DB not to start.

In Windows Vista and higher, you can execute the following command to clear the Application log:

```
 wevtutil cl Application 
```

Step 4 – Login via sqlplus

```
 sqlplus sys/oracle as sysdba 
```

You should now be able to login with no error messages.

Step 5 - Check the DB listener status

```
 lsnrctl status 
```

You should now see your listener running.

Step 6 – Start UCM

UCM should now start up.

For a more in-depth answer to this question you can read my full [blog post](http://www.redstonecontentsolutions.com/5/post/2011/01/tnslistener-does-not-currently-know-of-sid-given-in-connect-descriptor-error-message-of-the-monthjanuary.html).

# powershell - Powershell 错误处理和日志记录

> ID：15117516
> 
> 赞同：-2
> 
> 时间：2013-02-27T16:43:35.403
> 
> 标签：powershell, error-handling

我有以下 powershell 脚本，它循环浏览文件列表并重命名它们。我想介绍一些错误处理，但不知道从哪里开始。

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SharePoint")

$Url = "https://....."
$UrlSub = "docs"
$FullPath = $Url + $UrlSub
$destinationFolder = "c:\022713\"
$sourceCsv = "c:\filename.CSV"

$Site = New-Object -TypeName Microsoft.SharePoint.SPSite $Url 
$web =  $Site.OpenWeb($UrlSub)
$fileObjects = Import-CSV $sourceCsv 

ForEach ($fileObject in $fileObjects) 
{
    $fileUrl = $fileObject.DOC_FILENAME.replace($Url,"")
    $file = $web.GetFile($FullPath)
        $binary = $file.OpenBinary()

    $dateTimeStamp = Get-Date -format s
    $newFileName = $fileObject.DocumentType + "_" + $fileObject.SAPObjectNumber + "_" + $dateTimeStamp.replace(":","").replace("-","")
    $extension = [System.IO.Path]::GetExtension($file.Name)

    $stream = New-Object System.IO.FileStream(($destinationfolder + $newFileName + $extension), [System.IO.FileMode]::Create)
    $writer = New-Object System.IO.BinaryWriter($stream)
    $writer.write($binary)
    $writer.Close()
}
$web.Dispose() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:59:12.723

Well you don't give us much to work with here. You need to figure out what can go wrong in your code and handle those using ex. try/catch blocks or traps.

Ex. your `filestream` constructor may throw an exception if you don't have access to create/overwrite the destination-file. This is an `UnauthorizedAccessException` exception, as defined at [MSDN - FileStream Class](http://msdn.microsoft.com/en-us/library/tyhc0kft.aspx) So to handle that, you can use this:

```
try {
    $stream = New-Object System.IO.FileStream($destinationfolder + $newFileName + $extension), Create
    $writer = New-Object System.IO.BinaryWriter($stream)
    $writer.write($binary)
    $writer.Close()
} catch [UnauthorizedAccessException] {
    #Handle your exception, ex. log it. Exception is stored in variable $_  and includes properties like $_.message
} catch {
    #Catch every possible terminating exception except 'UnauthorizedAccessException'
} 
```

To inspect the properties of an exception, use

```
(new-object UnauthorizedAccessException) | gm 
```

or

```
(new-object Exception) | gm 
```

(90% if not all of the properties are inherited from a this general expcetion anyways)

Search here at SO or google to learn more about try/catch and traps.

# vb.net - 列表框和项目值 - Visual Basic 2010

> ID：15117517
> 
> 赞同：2
> 
> 时间：2013-02-27T16:43:37.873
> 
> 标签：vb.net, winforms, listbox

我正在使用 VISUAL BASIC 2010 编写一个小型应用程序（它包含在 Visual Studio 2010 中）。

我有一个列表框设置为由 Access 数据库填充。数据库有两列：1) 变量名称 2) 描述。

作为我的问题中使用的示例，这是我的数据示例：

变量名称 描述 DOG1 来自家族 1 的犬种

现在，我有一个由 Description 列填充的列表框。这就是我需要的。我想单击一个按钮，然后根据单击的项目，在文本框中显示其相应的“描述”。这与我相信 DisplayMember 和 ValueMember 有关。我一次成功地完成了一项。我的问题是，如何使用循环为列表框中可能选择的几个项目执行相同的任务？

这是我的代码，它可以 100% 地显示一次单击的项目。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            TextBox1.Text = ListBox1.SelectedValue  
    End Sub 
```

我认为以下内容会起作用，但事实并非如此，我也不太清楚为什么。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
Dim i As Integer
        For i = 0 To ListBox1.SelectedValue - 1    
           TextBox1.Text = ListBox1.SelectedValue(i)
        Next i
End sub 
```

另外，如果可能的话，我想获取在 listbox1 中选择的项目并将它们的值显示在另一个列表框中。我之前使用自己填充的简单列表框完成了此操作，但现在我正在使用值和显示成员，我似乎无法调整代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim i As Integer
        For i = 0 To Listbox1.SelectedItems.Count - 1
            Listbox2.Items.Add(Listbox1.SelectedItems.Item(i))
        Next i 
```

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:57:59.583

我认为你需要 -

```
For i = 0 To ListBox1.SelectedValue - 1    
           TextBox1.Text &= ListBox1.SelectedValue(i)
        Next i 
```

见“&”。

还没有机会仔细检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T15:25:47.667

这应该是你需要的。试试看。不要忘记将 Listbox 的 SelectionMode 属性更改为 Multisimple。

```
TextBox1.Clear()
Listbox2.Items.Clear()
For x As Integer = 0 To ListBox1.SelectedItems.Count - 1
    TextBox1.Text += ListBox1.SelectedItems(x).ToString + " "
    ListBox2.Items.Add(ListBox1.SelectedItems(x).ToString)
Next x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T01:36:21.393

试试这个查看从`Listbox1`到`Listbox2`：

```
ListBox1.Items.Add("Dog, Cat, Fish, Bear, Bird, Goat")

Dim myArr() As String = ListBox1.Items.OfType(Of String)().ToArray()
ListBox2.DataSource = myArr 
```

# html - How to evenly distribute content across an html cell for a newsletter?

> ID：15117518
> 
> 赞同：1
> 
> 时间：2013-02-27T16:43:38.297
> 
> 标签：html, html-table, html-email

This is a newsletter so its heavy on tables and can't use much CSS but I'm sure there must be a solution.

I have a design I'm working on with the title of the newsletter at the top. Directly under that I want it to read Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec. Directly under that will be the start of the first content section.

This is a snippet of what I've got so far but its not justifying how I want. I'm trying to find a solution to have those months evenly spread across the 450px width. If necessary I can put a table inside that row. I'm sure this is something simple I'm just not seeing.

```
<table>
    <tr><td width=10px></td><td width=450px>Title</td></tr>
    <tr><td width=10px>
    </td><td width=450px>
        <span style="text-align: justify;">
                    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
        </span>
    </td>
    <tr>
        <td style="background-color: #5DB1E3;" width=10px>&nbsp;</td>
        <td style="background-color: #4D4D4D;" width=450px><span style="color: #FFF;">Industry Updates</span></td>
    </tr>
    <tr><td width=10px>&nbsp;</td><td width=450px> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:28:09.803

If you place it in a table with a set width, the cells inside will justify on their own.

```
<table width=450px>
  <tr>
    <td>Jan</td>
    <td>Feb</td>
    <td>Mar</td>
    <td>Apr</td>
    <td>May</td>
    <td>Jun</td>
    <td>Jul</td>
    <td>Aug</td>
    <td>Sep</td>
    <td>Oct</td>
    <td>Nov</td>
    <td>Dec</td>
  </tr>
</table> 
```

Here it is in [http://jsfiddle.net/QymYH/](http://jsfiddle.net/QymYH/)

Thanks,

Pedro

# c# - 何时使用 NaN 或 +/-Infinity？

> ID：15117520
> 
> 赞同：9
> 
> 时间：2013-02-27T16:43:41.913
> 
> 标签：c#, nan, infinity

`NaN`, `PositiveInfinity`or `NegativeInfinity`for `float`and有什么好处`double`？我们什么时候应该使用或避免使用它们？

如果有这样的常量，为什么会`float.Parse("a")`抛出错误而不是返回`float.NaN`？

有什么`NaN`不同`null`？为什么`division by zero`浮动类型甚至可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T16:56:57.070

使用无穷大是因为它们是浮点支持的算术系统的一部分。有各种运算，例如除以零，其中无穷大是一个有用的结果并且在数学上是合理的。显然，没有直接的物理量可以是无限的（例如，您不能有无限多的克），但对于物理过程的数学模型或人类用计算机建模的其他事物的某些方面，无限可能是一个有用的值。

使用 NaN 是因为算术系统不完整。也就是说，有些运算的输入值无法在浮点内表示正确的数学结果。例如， sqrt(-1) 是合法的数学运算，但结果，虚数*i*不能用浮点表示。因此，NaN 用作占位符，表示值已超出浮点数。NaN 还可用于其他目的，例如标记未初始化的数据，以帮助调试。

`float.Parse("a")`抛出错误而不是返回 NaN，因为它不是合法的操作。此表达式不执行具有可表示数字之外的正确结果的数学运算。这是一个实际错误，因此会引发错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T16:46:11.563

它们不是您*使用*的东西，而是您需要注意的东西：

```
double hmm = 1.0 / 0.0;
double hmm2 = -1.0 / 0.0;
double hmm3 = 0.0 / 0.0;
Console.WriteLine("1/0 == {0}", hmm);
Console.WriteLine("-1/0 == {0}", hmm2);
Console.WriteLine("0/0 == {0}", hmm3); 
```

输出：

```
1/0 == Infinity
-1/0 == -Infinity
0/0 == NaN 
```

编辑：至于这个问题：

> 如果有这样的常量，为什么 float.Parse("a") 会抛出错误而不是返回 float.NaN？

`double.NaN`实际上在某种程度上是一个数学定义-它被“定义”为`0.0/0.0`-虽然“不是数字”一词暗示类似的东西`double.Parse("a")`也应该返回`double.NaN`，但事实并非如此。为什么？

我的预感是因为无法确定`double.NaN`您收到的是垃圾数据的结果（在字符串的情况下）还是不确定数字的*实际*定义，例如零除以零。所以，为了区分这两种情况，`double.Parse("a")`抛出一个`Exception`我觉得更准确的方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T16:47:05.797

> 如果有这样的常量，为什么要`float.Parse("a")`抛出错误而不是返回`float.NaN`？

因为您列出的替代方案均不适用于此处：

`PositiveInfinity`就是这样`NegativeInfinity`- 即它们是诸如`1/0`or之类的表达式的结果`-1/0`。

`NaN`是`0/0`- 即结果不是（通常）明确定义且不产生数字的表达式的结果。

`float.Parse("a")`不是那样的。诚然，它可能表示为，`NaN`但您无法区分用户输入的无效`float`值 ( `a`) 和有效值`float`( `NaN`)。然而，这不是一个非常有力的论点：`NaN`它*明确地*是无效数字的占位符，因此可以想象它可以用来表示无效的用户输入。

另一方面，还有其他类型具有`Parse`方法但不`NaN`存在值（例如`int`）。因此，对于这些类型，`Parse` *必须*发出错误信号。使不同类型的`Parse`方法表现不同是不一致的（因此是糟糕的 API 设计）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T16:51:11.670

除了算术的结果之外，无穷大值可用于定义上下文的无限制。

例如：在没有大小限制的情况下，父 WPF 控件要求其子项测量自身；即 availableSize 是 PositiveInfinity

参考：[MeasureOverride](http://msdn.microsoft.com/en-gb/library/system.windows.uielement.measure.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-27T11:28:25.287

To resolve NAN and infinity, use this:

```
if (Double.IsNaN(YourValue) || Double.IsInfinity(YourValue))
{
   YourValue = 0;
} 
```

# ruby - 为什么 a = b rescue stmt 是错误而 stmt rescue stmt 不是？

> ID：15117523
> 
> 赞同：3
> 
> 时间：2013-02-27T16:43:56.547
> 
> 标签：ruby, syntax, syntax-error

我无法确定以下 ruby​​ 内联救援代码有什么问题

```
def test_check()
p  "first st"
t = 5 * lsdj rescue return false
p "second"
end

p test_check 
```

这给出了一条错误消息 `syntax error, unexpected kFALSE, expecting kEND` ，但如果我删除赋值语句，它将正常工作（返回 false）。

```
 def test_check()
    p  "first st"
     5 * lsdj rescue return false
    p "second"
    end 
```

如果出现问题，ruby 中内联救援的正确语法是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T16:53:45.640

内联在赋值^(1,2)`rescue`中使用时不会将语句作为参数——它只需要表达式的值以用于它被救出的情况。

但要小心，你认为这会返回什么？

```
def q
  return 5 * lsdj rescue false
  true
end 
```

不是*false，*它返回*true*。改为这样做，因此救援仅适用于表达式。

```
def q
  return (5 * lsdj rescue false)
  true
end 
```

这个返回*false。*

* * *

^(笔记。
1\. 这实际上是一个非常好的问题。重述：
      *为什么* **a = b rescue stmt** *是错误而* **stmt rescue stmt** *不是？*
肤浅的答案是，在赋值情况下，rhs 和救援语句是ruby​​ 语法中的**arg**非终结符而不是完整语句，而在语句情况下，语法只是在救援之后解析完整的**stmt**规则。这只是它的定义方式。现在，如果你问*为什么会这样？***[...嗯... Ruby 的复杂语法处于yacc(1)](http://en.wikipedia.org/wiki/GNU_bison)**的边缘有能力。在我看来，在许多情况下，Matz 详细说明了在某些情况下可以接受的内容，而不仅仅是使用像*expr*这样的单个非终结符，我想原因是保留语法**[LALR(1)](http://en.wikipedia.org/wiki/LALR)**和将不可避免的[转变/减少冲突](http://en.wikipedia.org/wiki/Shift-reduce_conflict#Conflicts_in_the_constructed_tables)限制在可容忍的范围内。**[查看](https://github.com/ruby/ruby/blob/trunk/parse.y)**Ruby 源代码分发中的 parse.y 以获得有趣的阅读。
2\. 这是一个示例：`def q; (t = 5 * lsdj) rescue return false; true; end`
这可以按您的意愿工作，因为它恰好与其他语法规则匹配。我听说有些限制是为了支持诗歌模式而存在的。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:56:24.280

您的代码将被解释为：

```
def test_check()
p  "first st"
t = (5 * lsdj rescue return) false
p "second"
end 
```

这使得`false`处于无效位置。为了修复它，请放置括号：

```
def test_check()
p  "first st"
t = 5 * lsdj rescue (return false)
p "second"
end 
```

# java - 如何使用 AJAX 查询动态填充 Google Chart，获取 DOM 异常 8

> ID：15117525
> 
> 赞同：0
> 
> 时间：2013-02-27T16:43:59.433
> 
> 标签：java, ajax, json, google-visualization, playframework-1.x

我有一个控制器，它以 Google Charts 期望的格式返回（很好）格式化的 JSON。我可以通过导航来查看输出，`http://localhost:9000/manager/echoVariables`OP如下：`[["foo",3],["foo",3]]`

我想做一个 AJAX 调用，但无法将此 JSON 传递给 Google Charts。我可以确认正在接收 JSON，我在 Chrome 的浏览器检查器的网络选项卡中进行了验证。

但是我正在`DOM Exception 8`将这个 JSON 字符串传递给 Google Charts。

这是创建图表的视图：

```
#{extends 'main.html' /} #{set title:'Home' /} #{set 'moreScripts'}
#{/set}
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>

<script type="text/javascript">
//$.get()
$(document).ready(function() {
    $("#result").html();
    $.get(
        '/manager/echoVariables',
        {var1: "foo", var2: 5},
        function(responseText){
            $("#result").html(responseText);
        },
        "json"
    );
});

</script>

<body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
    <div id="result"></div>
</body> 
```

如何让饼图显示我的值，而不是片段中给出的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:57:47.950

你的代码有两个问题。首先，您在 div 上使用 jQuery`html()`函数`#result`，但您传递的是 javascript 对象，而不是函数期望的字符串。如果您只是想查看数据，可以将其更改为类似

```
$.get(
    '/manager/echoVariables',
    {var1: "foo", var2: 5},
    function(responseText){
        $("#result").html(JSON.stringify(responseText));
    },
    "json"
); 
```

当然，另一个问题是您实际上并没有将结果数据传递给谷歌图表 API。为此，您需要`chart.draw`使用从 AJAX 调用返回的数据而不是示例中的数据进行调用。

# java - GPS和网络之间的切换？

> ID：15117531
> 
> 赞同：0
> 
> 时间：2013-02-27T16:44:20.307
> 
> 标签：java, android, gps

此代码非常适用于 GPS：

```
public class GetLocation extends Activity implements LocationListener {

    LocationManager lm;
    TextView tv;  
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_get_mission);

     // Acquire a reference to the system Location Manager
        tv= (TextView)findViewById(R.id.locationOutput);

        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 1, this);

    }
    public void onLocationChanged(Location arg0) {
        String lat = String.valueOf(arg0.getLatitude());
        String lon = String.valueOf(arg0.getLongitude());
        Log.e("GPS", "location changed: lat="+lat+", lon="+lon);
        tv.setText("lat="+lat+", lon="+lon);
    }
    public void onProviderDisabled(String arg0) {
        Log.e("GPS", "provider disabled " + arg0);
    }
    public void onProviderEnabled(String arg0) {
        Log.e("GPS", "provider enabled " + arg0);
    }
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        Log.e("GPS", "status changed to " + arg0 + " [" + arg1 + "]");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_get_mission, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

但是我想从网络而不是 GPS 获取位置。所以我改变：

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 1, this); 
```

到

```
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this); 
```

然后我什么也得不到。这是由于代码中的错误，还是位置没有像 GPS 那样频繁更改，因此永远不会调用 onLocationChange？如果我想在此时查看位置而不进行更改，我应该`.getLastKnownLocation`在哪里调用它，以便在应用程序启动时更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:03:43.450

原因可能是您必须比 GPS 模式移动更多。尝试移动几公里，看看您是否仍然没有获得位置更新。

尝试将 minTime 设置为 6000 毫秒，米我会设置 10 或更多。
检查您是否必须启用网络服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:23:24.830

您是否使用 LocationManager.isProviderEnabled() 来查看网络提供商是否启用/禁用。

```
network_enabled=locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER); 
```

如果它被禁用：

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0); 
```

# join - 加入后如何避免获得多个重复行

> ID：15117534
> 
> 赞同：0
> 
> 时间：2013-02-27T16:44:25.727
> 
> 标签：join, duplicates

好的，所以我有 4 张桌子：

```
credits, playlog, sessionlog, user 
```

`credits``userid`有要加入的列`user`。
`playlog`必须`sessionlogid`加入`sessionlog`。
`sessionlog`必须`userid`加入`user`。

因此，当我加入任何东西时`sessionlog`，我必须这样做才能获得用户，行将被多次列出。

我想我知道为什么会发生这种情况，我只是不知道如何防止它。

所以每次玩家玩一个关卡时，都会创建一个`playlog`（并且每个都`playlog`包含`sessionlogid`）。

当我将所有内容结合在一起时，每个玩家都会被列出`playlog`，尽管我只希望他被列出一次。

例如，当我查看特定玩家的积分时，我会得到 2 行，具体取决于他花费积分的频率。

但是，一旦我加入`sessionlog`，这 2 行就会相乘，似乎有多少`playlog`s 属于那个`sessionlog`- 如果他玩了 5 个级别，这 2 个付款行乘以 5，输出为 10 行，用于 2 次付款。这给我计算每个级别的付款带来了巨大的问题。

如何进行`playlog`仅从每个`sessionlog`附加约束中获取最新的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:12:05.380

你没有提供足够的信息。这是一个尝试：这将为您提供用户列表以及每次播放花费多少信用：

```
SELECT      dbo.Users.userID
            , dbo.Users.userName
            , SUM(dbo.Credit.CreditChange) AS NetCreditSpent
            , COUNT(dbo.PlayLog.sessionlogid) AS PlayCount
            , 1.0 * SUM(dbo.Credit.CreditChange) / COUNT(dbo.PlayLog.sessionlogid) AS CreditSpentPerPlay
FROM        dbo.Credit
                RIGHT OUTER JOIN dbo.PlayLog
                INNER JOIN dbo.SessionLog
                    ON dbo.PlayLog.sessionlogid = dbo.SessionLog.sessionlogid
                RIGHT OUTER JOIN dbo.Users
                    ON dbo.SessionLog.userid = dbo.Users.userID 
                    ON dbo.Credit.userID = dbo.Users.userID
GROUP BY    dbo.Users.userID, dbo.Users.userName 
```

# ruby-on-rails - 在 Ruby on Rails 中进行单行搜索以更改数据库中的属性

> ID：15117537
> 
> 赞同：2
> 
> 时间：2013-02-27T16:44:34.903
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

在 Ruby on Rails 中，对于 ActiveRecord `class MySettings`，是否有更优雅的选择

```
s = MySettings.last
s.do_updates = true
s.save 
```

在一条线上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:51:02.027

使用[update_attributes](http://apidock.com/rails/ActiveResource/Base/update_attributes)：

```
 MySettings.last.update_attributes :do_updates => true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T00:09:29.660

尽管我通常会`update_attributes`像其他人建议的那样推荐，但这[`update_column`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)是替换[`update_attribute`](https://github.com/rails/rails/pull/6739). `update_attribute`正在 Rails 4.x 中删除，并将在以后的 3.2.x 版本中发出弃用警告。

```
MySettings.last.update_column(:do_updates, true) 
```

与, 不同`update_attributes`，`update_column`不执行验证或回调。如果您需要 ActiveRecord 回调，请务必使用`update_attrbutes`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T16:51:13.440

[更新属性](http://apidock.com/rails/ActiveResource/Base/update_attributes)

```
MySettings.last.update_attributes(:do_updates => true) 
```

# html - 在 css 和 html 中增加 div 的大小

> ID：15117540
> 
> 赞同：0
> 
> 时间：2013-02-27T16:44:43.240
> 
> 标签：html, css

我喜欢让我的示例更大，以便我可以在 div1、div2、div3 和 div4 下并排放置 2 个或更多图像。现在，示例一的宽度似乎是固定的，每次我尝试设置宽度时，它都会把页面搞砸。我无法弄清楚这一点。非常感谢任何帮助。

CSS：

```
#example-one {
    background: inherit;
    padding: 10px;

    -moz-box-shadow: 0 0 5px #666;
    -webkit-box-shadow: 0 0 5px #666;
    margin: auto;

}

#example-one .nav {
    overflow: hidden;
    margin: 0 0 0 0;

}

    #example-one .nav li { width: 97px; float: left; margin: 0 10px 0 0; }
    #example-one .nav li.last { margin-right: 0; }
    #example-one .nav li a { display: block; padding: 5px; background: #959290; color: white; font-size: in; text-align: center; border: 0; }
    #example-one .nav li a:hover { background-color: #111; }

    #example-one ul { list-style: none; }
    #example-one ul li a { display: block; border-bottom: 1px solid #666; padding: 4px; color: #666; }
    #example-one ul li a:hover { background: #fe4902; color: white; }
    #example-one ul li:last-child a { border: none; }

    #example-one ul li.nav-one a.current, #example-one ul.featured li a:hover { background-color: #0575f4; color: white; }
    #example-one ul li.nav-two a.current, #example-one ul.core li a:hover { background-color: #d30000; color: white; }
    #example-one ul li.nav-three a.current, #example-one ul.jquerytuts li a:hover { background-color: #8d01b0; color: white; }
    #example-one ul li.nav-four a.current, #example-one ul.classics li a:hover { background-color: #FE4902; color: white; } 
```

这是html：

```
<div id="example-one" style="margin: 0 auto;">

<ul class="nav" style="margin:auto;">
    <div id="tab-section" style="position:absolute;left:50%;">
    <li class="nav-one"><a href="#div1" class="current">Content1</a></li>
    <li class="nav-two"><a href="#div2">Content2</a></li>
    <li class="nav-three"><a href="#div3">Content3</a></li>
    <li class="nav-four last"><a href="#div4">Content4</a></li>
    </div>
</ul>
<ul id="div1">
    <li id="section1></li>
    <li id="section2></li>
    <li id="section3></li>
    <li id="section4></li>
</ul>
<ul id="div2" class="hide">
</ul>
<ul id="div3" class="hide">
</ul>
<ul id="div4" class="hide">
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:52:07.413

您的 HTML 无效。`ul`s 应该只有`li`孩子，`li`s 应该只有`ul`或`ol`父母。

此外，您尝试使用`</div2>`结束`<div>`标记，并且`<div id="section1>`缺少结束引号。

嵌套列表应如下所示：

```
<ul>
    <li>some optional text here
        <ul>
            <li>some more text</li>
            <li>some more text</li>
        </ul>
    </li>
</ul> 
```

由于`ul`和`li`是块级元素，通常不需要将它们与`div`. 只需将样式应用于`ul`or`li`即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:45:10.947

我不知道你在找什么，但我做了以下事情：

[这是小提琴](http://jsfiddle.net/Fa6G8/)

首先，我更改了您的 HTML
- 出现了一些错误，例如`<li id="section1></li>`总是关闭“，例如`<li id="section1"></li>`
- 更改了 div 的位置，因此它们不会嵌套在`<ul>`标签内
- 其他一些事情，比如我认为你说的“图像”将是程序化的选择所以我添加了背景图像的东西。

这里是**HTML**：

```
<div id="example-one" style="margin: 0 auto;">

    <div id="tab-section" style="position:absolute;left:50%;">
        <ul class="nav" style="margin:auto;">  
            <li class="nav-one"><a href="#div1" class="current">Content1</a></li>
            <li class="nav-two"><a href="#div2">Content2</a></li>
            <li class="nav-three"><a href="#div3">Content3</a></li>
            <li class="nav-four last"><a href="#div4">Content4</a></li>
        </ul>
    </div>
    <ul id="div1" class="hide">
        <li id="section1">One</li>
        <li id="section2">Two</li>
        <li id="section3">Three</li>
        <li id="section4">Four</li>
    </ul>
    <div id="div2" class="hide" style="background-image:url('http://dribbble.s3.amazonaws.com/users/31348/screenshots/961313/dkng_shirt_2_1x.jpg')"></div>
    <div id="div3" class="hide" style="background-image:url('http://dribbble.s3.amazonaws.com/users/52758/screenshots/962057/new_york_ptiii_j_fletcher_1x.jpg')"></div>
    <div id="div4" class="hide" style="background-image:url('http://dribbble.s3.amazonaws.com/users/62174/screenshots/961388/aliens.jpg')" ></div>
</div> 
```

我假设您正在使用`:target`选择器来激活 effetc，所以我将 CSS 更改为：

```
#example-one {
    background: inherit;
    padding: 10px;
    height:300px;

    -moz-box-shadow: 0 0 5px #666;
    -webkit-box-shadow: 0 0 5px #666;
    margin: auto;
}

#example-one .nav {
    overflow: hidden;
    margin: 0 0 0 0;
}

#example-one .nav li { 
    width: 97px; 
    float: left; 
    margin: 0 10px 0 0;
}
#example-one .nav li.last { 
    margin-right: 0; 
}
#example-one .nav li a {
    display: block; 
    padding: 5px; 
    background: #959290; 
    color: white; 
    font-size: in; 
    text-align: center; 
    border: 0; 
}
#example-one .nav li a:hover { 
    background-color: #111; 
}

#example-one ul {
     list-style: none; 
}
#example-one ul li a { 
    display: block; 
    border-bottom: 1px solid #666; 
    padding: 4px; 
    color: #666; 
}
#example-one ul li a:hover { 
    background: #fe4902; 
    color: white; 
}
#example-one ul li:last-child a { 
    border: none; 
}
#example-one ul li.nav-one a.current,
#example-one ul.featured li a:hover { 
    background-color: #0575f4; 
    color: white; 
}
#example-one ul li.nav-two a.current, 
#example-one ul.core li a:hover { 
    background-color: #d30000; 
    color: white; 
}
#example-one ul li.nav-three a.current, 
#example-one ul.jquerytuts li a:hover { 
    background-color: #8d01b0; 
    color: white; 
}
#example-one ul li.nav-four a.current, 
#example-one ul.classics li a:hover { 
    background-color: #FE4902; 
    color: white; 
}

.hide{
    width:300px;
    height:300px;
    background-size:cover;
    background-position:center center;
    display:none;
}

#div1:target ,#div2:target, #div3:target, #div4:target{
    display:inline-block;
} 
```

如果这不是您需要的，请给我们一些关于效果、[Js Fiddle](http://jsfiddle.net/)甚至是画笔原始图像的更详细的反馈。

干杯。

# php - 每个语句的 PHP

> ID：15117547
> 
> 赞同：0
> 
> 时间：2013-02-27T16:44:54.770
> 
> 标签：php, foreach

我的代码看起来像这样

```
echo '<table border="2" > <th> locked </th> ';
$picksquery = mysql_query("SELECT `column`, `column` FROM table WHERE username='username' ");

 $pickresults= mysql_fetch_assoc($picksquery);
 foreach ($pickresults as $data)

  {
    echo $data. '<br/>';

}
echo ' </table>';

?> 
```

我的问题是它正在回显多个条目。（例如，数组是（a，b），我得到四个条目，a，a，b，b。有人知道我做错了什么吗？数据库是准确的，没有多个条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:45:57.577

你应该做 echo $data[0];

# php - 表单同时更新数据库的多个项目

> ID：15117549
> 
> 赞同：0
> 
> 时间：2013-02-27T16:45:00.977
> 
> 标签：php, html, database, forms

我正在尝试创建一个页面，该页面将显示表格中的项目以及每个项目的所有字段。目的是让用户可以在线更新项目的详细信息。

我的表中有大约 14 个字段，并计划像下面那样做。这有意义吗？或者会有更有效的方法来做到这一点？

```
<form>
(query all items in table)
while (...) {
    <span class="details">NAME: </span>
    <input name="name" value="<?php echo $info['name']; ?>">
    <span class="details">CATEGORY: </span>
    <input name="category" value="<?php echo $info['category']; ?>"
...
... and so on 12 more times
}
<button to submit the form>
</form> 
```

然后，我只想在数据库中更新用户已更新的那些字段。我应该每个字段一一检查吗？或者有没有更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:15:17.597

我目前正在使用此代码来禁用所有未更改的字段：

```
<script>
$(function() {
    $('.input').change(function() {
        $(this).addClass('changed');
    });
    $('input[type=submit]').click(function(){
     $('form').find('.input:not(.changed)').attr("disabled", "disabled");
    });
});
</script> 
```

我将“输入”类添加到所有表单元素（选择、文本区域、输入等），然后，脚本观察它们是否发生变化，然后添加另一个名为“已更改”的类，稍后，当单击提交按钮时，脚本禁用所有未更改的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:56:13.507

Akam 的回答非常出色 - 将 disabled="disabled" 应用于未更改的输入元素实际上会阻止它们被提交，并且只有更改的变量才会被发送到服务器。

我必须在这里添加的是......`.changed`这里已经检查提交/输入的值是否与原始值不同。但是您也可以轻松地在提交时将值与原始值进行比较（`===`例如，或者如果您已经想做一些卫生/验证，您可以使用正则表达式等）

这都是优雅的 javascript（或 jQuery）解决方案，但我看到（愚蠢的 ;-）人们也在服务器端进行类似的比较（例如使用 php）。但是，然后您要么来回反弹原始值-这还不错（意味着：您必须将新值和旧值传递回服务器-但不要再次从数据库中读取它们-然后您就松了不仅仅是更新数据库中的所有表单值）。

# grep - 格式化tail -f的输出

> ID：15117550
> 
> 赞同：0
> 
> 时间：2013-02-27T16:45:02.110
> 
> 标签：grep, printf, tail

我正在尝试通过 tail -f 跟踪日志文件并使用 grep 对其进行过滤：

`tail -f <log-file> | grep -F '<some string>'`

我希望在同一行更新输出，而不是在标准输出上获取新行。这意味着只要 grep 找到匹配项，stdout 中只有一行输出会发生变化。

我尝试过滤换行符，分别添加带有几个命令的回车符，`prinft, sed, awk, echo`但没有得到它的工作。我在 AIX 机器上，因此并非支持 grep 或其他命令的每个联机帮助页选项。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:54:11.680

尝试这样做：

```
tail -f <logfile> | awk '/some string/{system("");printf "\r%s", $0}' 
```

`system("")`是一个避免缓冲的小技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:55:56.630

你`watch`安装了吗？如果我理解你的要求（我不确定我是否做到了），你可以运行这样的东西：

`watch "tail -f <log-file> | grep -F '<some string>'"`

# c# - 为 Windows Phone 8 开发并使用 Azure 的 Google 身份验证问题

> ID：15117553
> 
> 赞同：1
> 
> 时间：2013-02-27T16:45:13.643
> 
> 标签：c#, azure, windows-phone-8, google-authentication

我目前正在使用 Google 身份验证来允许用户登录我的应用程序，但是我想做一些事情来更进一步，我不确定如何去做。

第一件事是只允许来自特定域的电子邮件地址，以便只有该域的注册用户才能登录应用程序，例如，您将无法使用“@gmail.com”帐户登录。（允许的域是我大学使用 Gmail 的域。）

其次，当您登录时，它会说“Welcome Google:0000000000000”（将 0 替换为实际的 userId），但我想使用用户名。当您验证应用程序以使用您的 Google 帐户时，它说您允许它访问您的基本信息，我假设其中包括您的姓名，但我不知道如何使用某人的姓名。

我使用[了这个 Azure 教程](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-wp8/)，所以很多代码不在我的应用程序中。

任何帮助将不胜感激，如果您有更多问题，请提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:34:05.667

我找到了很高的答案来检索用户名以存储在数据库中，以及关于我的第二个请求的其他一些有用信息：[http://blogs.msdn.com/...](http://blogs.msdn.com/b/carlosfigueira/archive/2012/10/25/getting-user-information-on-azure-mobile-services.aspx)

关于第一个问题，我得到了一位微软代表的回复，他说了以下我将调查的内容。

> 您可以做的是创建一个“虚拟”表，在您登录后，您可以调用该表（可以是任何操作）和表操作的脚本（选择插入/更新或读取之一) 您验证电子邮件。将来我们可能会简化这个过程。

更新：因此，他们的 Google 身份验证代码存在问题 - 您将获得有关用户的一些基本信息，但电子邮件不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:37:34.693

如果您使用的是 oauth。然后在 oauth 请求中，您可以添加“hd=domain.com”，它将限制对来自该域的用户进行身份验证。这是一个示例：[Google 客户端 API - 将 oauth 身份验证限制为我的域](https://stackoverflow.com/questions/14336564/google-client-api-limit-oauth-authentication-to-my-domain)。如果您不使用 oauth，请提供有关身份验证类型的更多信息。

我假设您正在使用 oauth 并且已经获得了令牌。您可以使用端点获取用户的用户名：[https://www.googleapis.com/oauth2/v2/userinfo](https://www.googleapis.com/oauth2/v2/userinfo)，范围为：[https](https://www.googleapis.com/auth/userinfo.email) ://www.googleapis.com/auth/userinfo.email 。在这里你可以做一些[测试](https://developers.google.com/oauthplayground/)。 [更多细节如何做到这一点。](https://sites.google.com/site/oauthgoog/Home/emaildisplayscope)

# git - VM/VirtualBox 上的 Git/GitHub 连接问题

> ID：15117564
> 
> 赞同：1
> 
> 时间：2013-02-27T16:45:28.063
> 
> 标签：git, github, connection, virtual-machine, virtualbox

我无法从我的 VM（VirtualBox / Debian）连接我在 GitHub 上的 Git 存储库：

```
# git clone git@github.com:username/reponame.git .
Cloning into ....
ssh: Could not resolve hostname github.com: Name or service not known
fatal: The remote end hung up unexpectedly 
```

然后我在我的 GitHub 上添加了一个条目`/etc/hosts`（这将是错误的方式——不要相信，它总是必要的）：

```
207.97.227.239  github.com 
```

现在我收到另一个错误：

```
# git clone git@github.com:username/reponame.git .
Cloning into ....
ssh: connect to host github.com port 22: Connection timed out
fatal: The remote end hung up unexpectedly 
```

我们将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:14:58.300

看起来你没有任何互联网访问...

# javascript - 淘汰视图模型日期-> MVC 4视图模型未在发布时转换

> ID：15117568
> 
> 赞同：1
> 
> 时间：2013-02-27T16:45:35.830
> 
> 标签：javascript, asp.net-mvc-4, knockout.js

我有一个带有日期的淘汰视图模型。Viewmodel 包含一个包含多个 BookingRows (orderRows) 的 CustomerOrder。这些视图模型中的每一个都有日期。为了便于阅读，我删除了很多数据：

```
 function ViewModel(data) {
    var self = this;
    self.CustomerOrder = ko.observable(data.CustomerOrder);
    self.AllTreatments = data.AllTreatments;
    self.AllTreatmentGroups = data.AllTreatmentGroups;
    self.AllTreatmentRooms = data.AllTreatmentRooms;
    ...
    self.Save {
       var dataToSave = ko.toJSON({ CustomerOrder: self.CustomerOrder });
       AjaxSaveCustomerOrder(dataToSave);
    }
}

var CustomerOrder = function (data) {
    var self = this;

    ....

    self.CustomerOrderDate = ko.observable(data.CustomerOrderDate);
    self.Bookings = ko.observableArray($.map(data.Bookings, function(item) {
         return new Booking(item);
       }) || []);
}; 
```

当我查看帖子时，日期以 JSon Dates 的形式发送，如下所示：

> CustomerOrderDate":"/日期(1361981980121)/

它不会被解析为我的视图模型的日期，它是 DateTime。

任何如何做到这一点的建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:21:52.073

您应该手动解析日期值并创建 Date 对象。

```
self.CustomOrderDate = ko.observable(new Date(+data.CustomerOrderDate.replace(/\/Date\((\d+)\)\//, '$1'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:10:53.743

感谢保罗为我指明了正确的方向。

我现在使用 Newton JSON 序列化到 KO 视图模型，如下所示：

```
 var viewModel = ko.mapping.fromJS(@(Html.Raw(JsonConvert.SerializeObject(Model, new IsoDateTimeConverter())))); 
```

然后传回服务器的日期是 ISO 和“Microsoft 日期”。似乎 KO 处理了这两种格式，只是把它得到的东西传回去。

这篇文章还提供了更多信息：[使用 Asp.Net MVC 和 KnockoutJS 处理日期](https://stackoverflow.com/questions/8735617/handling-dates-with-asp-net-mvc-and-knockoutjs)

# python - 在 Python3 中使用 `random.random` 作为关键字参数时，`random.shuffle` 的运行时间更短

> ID：15117573
> 
> 赞同：8
> 
> 时间：2013-02-27T16:46:00.457
> 
> 标签：python, random, python-3.x, runtime, shuffle

我刚刚观察到，当使用 Python3 显式提交关键字参数的函数时，列表的改组需要大约`random.shuffle`一半的运行时间。我检查了Python2是否有同样的问题，但发现它只发生在Python3上。`random.random``random`

我使用以下代码来测量两个版本的运行时间：

```
from timeit import Timer
t1 = Timer("random.shuffle(l)", "import random; l = list(range(100000))")
t2 = Timer("random.shuffle(l, random = random.random)", "import random; l = list(range(100000))")
print("With default rand: %s" % t1.repeat(10,1))
print("With custom rand: %s" % t2.repeat(10,1)) 
```

我[在 ideone](http://ideone.com/VdP5dh)制作了一个测试用例，供您使用 Python3 和使用 Python2 的相同代码[查看](http://ideone.com/pfoHcg)。

根据[shuffle 的文档，](http://docs.python.org/3/library/random.html#random.shuffle)`random.random`当我省略可选关键字参数时，默认情况下使用相同的函数`random`，因此当我给它提供与默认情况下相同的生成随机数的函数时应该没有区别。

`shuffle`我检查了文件夹中函数的相应来源（Python2 与 Python3），`Lib/random.py`发现*如果*我使用关键字函数显式调用 Python3 版本，它们的行为方式相同`random`。如果我省略这个参数，Python3 使用辅助函数`_randbelow`，所以应该是我的问题的根源。我不明白为什么 Python3 使用它，`_randbelow`因为它变慢`shuffle`了。据我了解，它的好处在于生成任意大的随机数，但它不应该减慢我对少于 2^32 个元素（在我的情况下为 100000）的列表的改组。

任何人都可以向我解释为什么我在运行时看到如此不同，尽管当我使用 Python3 时它们应该更接近？

PS：请注意，我不感兴趣为什么使用 Python2 的运行时比使用 Python3 更好，但是在 Python3 中使用参数`rand=rand.rand`参数与仅在 Python3 中不使用它时运行时的差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:13:56.133

函数中的文档字符串`random.shuffle`与代码相矛盾。在 python 2.7.2+ 中，文档字符串是正确的：

```
 def shuffle(self, x, random=None, int=int):
    """x, random=random.random -> shuffle list x in place; return None.

    Optional arg random is a 0-argument function returning a random
    float in [0.0, 1.0); by default, the standard random.random.
    """

    if random is None:
        random = self.random
    for i in reversed(xrange(1, len(x))):
        # pick an element in x[:i+1] with which to exchange x[i]
        j = int(random() * (i+1))
        x[i], x[j] = x[j], x[i] 
```

但在 Python 3.2 中，我们发现：

```
def shuffle(self, x, random=None, int=int):
    """x, random=random.random -> shuffle list x in place; return None.

    Optional arg random is a 0-argument function returning a random
    float in [0.0, 1.0); by default, the standard random.random.
    """

    randbelow = self._randbelow
    for i in reversed(range(1, len(x))):
        # pick an element in x[:i+1] with which to exchange x[i]
        j = randbelow(i+1) if random is None else int(random() * (i+1))
        x[i], x[j] = x[j], x[i] 
```

所以文档字符串仍然讲述了旧故事，但现在使用的默认函数是 random.randbelow

# c# - Chrome 中的 MVC 路由在路由结束时有额外的问号......为什么？

> ID：15117584
> 
> 赞同：1
> 
> 时间：2013-02-27T16:46:41.897
> 
> 标签：c#, asp.net-mvc-3, google-chrome, .net-4.0, asp.net-mvc-routing

我有一个 MVC 路由，在 IE 和 Firefox 中显示为`http://{site}.com/{value}/`，这是我期望的正确格式。但是，Chrome 中的同一条路线最后会有一个额外的问号；即`http://{site}.com/{value}/?`。没有查询字符串变量或我通过的额外数据..另外，在 IE 中它可以正常工作并且没有额外的？在路线的尽头。

为什么会有额外的？在 URL 的末尾，我怎样才能摆脱它？我的任务是规范我们网站的 URL，以帮助搜索爬取结果，这阻碍了我的任务。另外，这个额外字符的出现是否会影响从谷歌或其他公司的搜索引擎抓取？

编辑：我正在使用此值在我的控制器操作上设置我的路由： `[GET("{city}-{state}-{zip}/{name}/{entity}")]`

```
public static class AttributeRouting
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        // See http://github.com/mccalltd/AttributeRouting/wiki/3.-Configuration for more options.
        // To debug routes locally using the built in ASP.NET development server, go to /routes.axd
        routes.MapAttributeRoutes(config =>
        {
            config.AppendTrailingSlash = true;
            config.ScanAssembly(Assembly.GetExecutingAssembly());
            config.AddDefaultRouteConstraint(@"^entity$", new RegexRouteConstraint(@"^\d{6,7}$"));
            config.AddDefaultRouteConstraint(@"^address$", new RegexRouteConstraint(@".{3,}$"));
            config.AddDefaultRouteConstraint(@"^stateName$", new RegexRouteConstraint(@"^[^-]+$"));
            config.AddDefaultRouteConstraint(@"^page$", new RegexRouteConstraint(@"[0-9]*?$"));
        });
    }

    public static void Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

# php - 时髦的缓存与 Memcache 与...？

> ID：15117587
> 
> 赞同：1
> 
> 时间：2013-02-27T16:46:46.367
> 
> 标签：php, apache, caching, memcached

我正在一个具有旧的、基于 cgi+perl 的可嵌入小部件的站点上工作。我们正在加快小部件的速度，我想知道要使用哪些模式/方法进行缓存，以及人们是否知道除了我想的两种方法之外的其他方法：

1.  时髦的缓存：小部件的设置保存在 get 参数中，如果文件不存在，我们将使用重写让 PHP 创建文件；然后，Apache 将为后续请求提供该文件，直到 cron 将其清除。
2.  Memcache/d：PHP 可以将结果存储在 Memcache 中，Apache 可以从守护进程中提取结果（我猜想）。我想这可以做到，但目前不确定文件/类型和标题等。

我在很多场合都使用过#1，而#2 听起来可能是一个有趣的选择（如果可以的话）。在这种情况下还有其他好的选择吗？我们在标准的 LAMP 专用服务器上。

目标是在较大的站点嵌入小部件（我们一直在处理的事情）时最大限度地减少服务器负载......

**添加/结论**

Okay, while I appreciate Piontek's effort at a solution, it would seem there's not much else out there (that anybody has shared). What we have realized though, is that the most efficient manner to handle this will be to gen one file only and have the client-side handle the get params and logic that builds the resulting widget.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:54:06.057

为了获得最佳效果，我会使用 Memcache 和 APC ( [http://php.net/manual/en/book.apc.php](http://php.net/manual/en/book.apc.php) )。Memcache 更多用于缓存数据库查询并提高这方面的性能，而 APC 更多用于提高 PHP 代码的性能。它们一起可以为您提供一个非常可扩展的系统。

# c++ - 为什么不允许继承成员？

> ID：15117591
> 
> 赞同：53
> 
> 时间：2013-02-27T16:46:56.187
> 
> 标签：c++, inheritance

我是 C++ 的初学者，我正在做关于抽象类和继承的练习之一。

这是我的抽象类：

```
#ifndef   SHAPE_H 
#define  SHAPE_H
class Shape
{
    public:
        virtual void area();
        virtual void perimeter();
        virtual void volume();
};
#endif 
```

这是我实现抽象类的具体类：

```
#include <iostream>
#include <cmath>
#include "Shape.h"
using namespace std;

class Circle : public Shape
{
    public:
        Circle(int);
    private:
        int r;
};

Circle::Circle(int rad)
{
    r = rad;
}

void Circle::area()
{
    cout << "Area of this cirle = " << 3.14 * pow(r, 2) << endl;
}

void Circle::perimeter()
{
    cout << "Perimeter of this cirle = " << 2 * 3.14 * r << endl;
}

void Circle::volume()
{
    cout << "Volume is not defined for circle." << endl;
} 
```

`area()`我在,`perimeter()`和`volume()`在我的课堂上得到了红线`Circle`，显示`"Error: inherited member is not allowed"`。我浏览了我的课堂 ppt 并搜索了答案，但没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-27T16:48:46.947

您必须将覆盖的函数声明为类定义的一部分

```
class Circle : public Shape
    {
    public:
        Circle(int);
        virtual void area(); // overrides Shape::area
        void perimeter();    // overrides Shape::perimeter
        virtual void volume();
    private:
        int r;
    }; 
```

请注意，`virtual`此处的使用是可选的。

正如 nm 所指出的，您还应该在`Shape`. 您可能还希望使其虚函数成为纯虚函数（基于您对`Shape`抽象的评论）

```
class Shape
{
public:
    virtual ~Shape() {}
    virtual void area() = 0;
    virtual void perimeter() = 0;
    virtual void volume() = 0;
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T16:49:35.587

您还必须在 Circle 类中声明覆盖方法

```
class Circle : public Shape
    {
    public:
        Circle(int);
        virtual void area();
        virtual void perimeter();
        virtual void volume();
    private:
        int r;
    }; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T16:56:25.153

首先，您应该使 Shape 类显式抽象：

```
class Shape
{
public:
    virtual void area() = 0;
    virtual void perimeter() = 0;
    virtual void volume() = 0;
}; 
```

这样您就不必在类 Shape 中定义该方法，更重要的是如果您忘记覆盖派生类中的任何抽象方法并尝试创建它的实例，编译器会提醒您。其次，当您在派生类中覆盖虚拟方法时，您需要声明它们：

```
class Circle : public Shape
{
public:
    Circle(int);

    virtual void area();
    virtual void perimeter();
    virtual void volume();
private:
    int r;
}; 
```

# java - 设置继续按钮以恢复上一个活动

> ID：15117592
> 
> 赞同：0
> 
> 时间：2013-02-27T16:47:02.247
> 
> 标签：java, android

我在主屏幕上有一个“继续”和一个“新游戏”按钮。单击“新游戏”按钮时，将运行以下代码：

```
Case:R.id.new_button:     
Intent  = new Intent(this, Difficulty.class);
        startActivity(openDifficulty);
        break; 
```

然后打开“难度”活动屏幕，其中包含“简单”和“困难”按钮。例如，当单击“简单”或“困难”按钮时，将运行：

```
case R.id.easy_button:
        Intent openEasy = new Intent(this, EasyGameScreen.class);
        startActivity(openEasy);
        break; 

case R.id.hard_button:
        Intent openHard = new Intent(this, HardGameScreen.class);
        startActivity(openHard);
        break; 
```

然后将用户带到相应的级别

我怎样才能让“继续”按钮从原来的相同点恢复上一场比赛？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:50:46.733

您需要根据您的游戏要求保存游戏状态，然后检查您的第一个活动中是否存在任何保存状态，如果存在则显示继续按钮，然后单击该按钮按保存状态，你就完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:00:32.897

看起来您需要使用`startActivityForResult();`而不是`startActivity();`. 当您`finish();`在设置难度后调用下一个 Activity 以将其关闭时，就会出现差异。

*   如果您使用 开始下一个 Activity `startActivityForResult();`，则将 `onActivityResult()`在原始 Activtiy 中调用（即您之前的游戏），您可以从那里恢复游戏。
*   当你使用`startActivity();`时，`onActivityResult();`永远不会被调用。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:19:51.977

您需要保存用户离开的游戏状态。您可以通过使用共享偏好来做到这一点。继续游戏时，您将检查共享偏好的值并从中获取值。有关如何在共享首选项中保存数据的更多信息，请参阅官方 Android 文档

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

# imageview - 动态绘制自定义 ImageView

> ID：15117593
> 
> 赞同：1
> 
> 时间：2013-02-27T16:47:03.470
> 
> 标签：imageview

我正在使用自定义图像视图，实现捏缩放、滚动等...

我需要在这个自定义图像视图的源图像上画线和点，但是这些线和点需要跟随移动和缩放（缩放时）。还需要将此行更新为代码中的某些条件。

例如：

我有这个自定义图像视图，其源图像代表我家的地图，我需要从入口门到浴室画一条线，并在入口门上画一个圆圈。

任何人都可以帮忙吗？

# javascript - 单击将两个类添加到不同的元素

> ID：15117602
> 
> 赞同：0
> 
> 时间：2013-02-27T16:47:30.187
> 
> 标签：javascript

我正在建立一个[网站](http://marekfraczyk.com/szymon)，左侧有垂直导航，右侧有内容，其中导航占 20% 宽度，内容占 80%。

我想点击（切换 div，导航内部）将导航的宽度更改为 5%，将内容宽度更改为 95%。

我知道如何将类添加到被点击的元素，但我必须知道如何影响其他元素。任何帮助将不胜感激！

```
<div class="nav">
            <div class="toggle">
                <img src="images/toggle.png"/>
            </div>
            <ul>
                <li class="header"><p>Szymon Fraczyk<br>photography</p></li>
                <li class="szymon"><a href="index.html"><p>Szymon Fraczyk</p></a></li>
                <li class="zdjecia"><a href="index.html"><p>Zdjecia</p></a></li>
                <li class="slubne"><a href="index.html"><p>Slubne</p></a></li>
                <li class="chrzciny"><a href="index.html"><p>Chrzciny</p></a></li>
                <li class="kontakt"><a href="index.html"><p>Kontakt</p></a></li>
                <li class="kontakt"></li>
            </ul>
        </div>
        <div class="content">
            <div class="royalSlider rsDefault">
                <img class="rsImg" src="images/1.jpg" alt="image desc" />
                <img class="rsImg" src="images/2.jpg" alt="image desc" />
                <img class="rsImg" src="images/3.jpg" alt="image desc" />
                <img class="rsImg" src="images/4.jpg" alt="image desc" />
                <img class="rsImg" src="images/5.jpg" alt="image desc" />
                <img class="rsImg" src="images/6.jpg" alt="image desc" />
                <img class="rsImg" src="images/7.jpg" alt="image desc" />
            </div>  
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:56:45.490

你可以使用动画和 JQuery 来做你想做的事：

你的代码：http: **[//jsfiddle.net/f9RTJ/5/](http://jsfiddle.net/f9RTJ/5/)**

**我给你一些不错的动画效果:)**

**CSS：**

```
.nav {
    position:absolute;
    top:0px;
    left:0px;
    width:20%;
    background-color:#ccc;
}

.content {
    position:absolute;
    top:0px;
    right:0px;
    width:80%;
    background-color:#aaa;
} 
```

**javascript**：

```
$('.content').click(function(){
    $(this).animate({'width':'80%'}) ;
    $('.nav').animate({'width':'20%'}) ;
}) ;

$('.nav').click(function(){
    $(this).animate({'width':'5%'}) ;
    $('.content').animate({'width':'95%'}) ;
}) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:56:54.683

查看页面，如果您将 id 添加到内容 div 会更容易。然后你就可以

```
var d = document.getElementById('content');
d.className = d.className + "wideClass"; 
```

否则，您将不得不遍历所有 div 并找到具有“内容”类的那个。类似于这个答案： [Select element by and classname in javascript](https://stackoverflow.com/questions/3887619/select-element-by-and-classname-in-javascript)

无论哪种方式，一旦您选择了元素，您就可以根据需要附加使宽度为 95% 的类。

# python - 使用正则表达式在 Django 中动态重定向页面？

> ID：15117605
> 
> 赞同：2
> 
> 时间：2013-02-27T16:47:31.053
> 
> 标签：python, django, url-routing

我在 django中*遇到 url.py的问题。*

在我的应用程序中，我有很多网址，例如：

```
aaa-2011-bbb
aaa-2011 
```

我想将这些网址重定向到没有年份的新网址。所以我需要从网址中删除年份。是否可以？

我只有这样的静态映射：

```
(r'^aaa-\d{4}-bbb/$', redirect_to, {'url': '/aaa-bbb/'}), 
```

但我不喜欢为每个带有年份的网址写这条规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:55:45.880

我将子类[`RedirectView`](https://docs.djangoproject.com/en/1.5/ref/class-based-views/base/#redirectview)化并使用它来支持动态重定向

`urls.py`就像是

```
(r'^(?P<aaa>\w+)-\d{4}-(?P<bbb>\w+)/$', MyRedirectView.as_view()), 
```

并且在`views.py`

```
from django.views.generic.base import RedirectView

class MyRedirectView(RedirectView):
    permanent = False
    query_string = True

    def get_redirect_url(self, aaa, bbb):
        return '%s-%s' % (aaa, bbb) 
```

这需要`**kwargs` `aaa`and`bbb`来自`urls.py`（假设是字符串和来自您描述的 url 重定向）并返回组成的重定向 url`'%s-%s' % (aaa, bbb)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:34:54.117

正如@danodonovan 提到的，[*RedirectView*](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#redirectview)是实现这一目标的最佳方式。

但是，为了避免进一步不必要的重复，我提出以下建议：

```
# urls.py
(r"^([^/]*?(19|20)\d{2}[^/]*?)/?$", RemoveYearRedirect.as_view()),

# views.py
from django.views.generic.base import RedirectView
import re

class RemoveYearRedirect(RedirectView):
    query_string = True

    def get_redirect_url(self, **kwargs):
        """
        This has been overriden to remove any year from 1900 to 2099 from the URL
        """
        url = re.sub("(19|20)\d{2}", "", self.args[0])
        return "/" + re.sub("-+", "-", url).strip("-") 
```

这应该适用于以下 URL：

*   /testing-2012-foo --> /testing-foo
*   /2000-从未发生过 --> /从未发生过
*   /movies-from-1960 --> /movies-from

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T12:36:45.897

使用更少代码的另一种方法：

```
(r'^(?P<aaa>\w+)-\d{4}-(?P<bbb>\w+)/$', RedirectView.as_view(url='%(aaa)s-%(bbb)s')), 
```

# c# - 将文本框输入转换为数组

> ID：15117606
> 
> 赞同：0
> 
> 时间：2013-02-27T16:47:34.127
> 
> 标签：c#, arrays, winforms, input

相当新的 C# 开发人员。我正在尝试开发一个疯狂的库生成器。我有一个`button_1`标有“动词”的按钮，它应该生成一个随机动词。动词来自一个字符串数组，它是一个动词列表。我有另一个`button_5`标记为“添加新动词”的按钮，它应该将相应文本框中的动词添加到动词数组中。我遇到的问题是它只生成我单击时输入的最后一个动词，`button_1`标记为“动词”。

代码如下所示：

```
namespace WindowsFormsApplication1
{
    public class Arrays
    {
        public static string[] verbarray = new string[10];
    }
}

public void button5_Click(object sender, EventArgs e)
{
    for (int iverb = 0; iverb < Arrays.verbarray.Length; iverb++)
    {
        Arrays.verbarray[iverb] = Convert.ToString(this.txtaddverb.Text);
    }
}

public void button1_Click(object sender, EventArgs e)
{
    Random randomverb = new Random();
    verb.Text = Arrays.verbarray[randomverb.Next(0, Arrays.verbarray.Length)];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:57:20.923

Your verb-adding procedure is the problem.

You have set up a loop that iterates across *all* entries in your verb array, and replaces each one with the *current* value of your verb textbox. So, when you click the button to select a new verb, you're randomly selecting a verb from a list of entries that's always going to be identical once you've started adding verbs - and the verb chosen will always be the last one you added.

I'd suggest you take a look at a List, which can grow more readily and simplifies your Add problem. Might help!

```
// a little pseudocode to help with the notion..wire in your 
// event handlers accordingly
class VerbManager
{

 List<String> verbs= new List<String>();
 Random picker = new Random();

 public void addVerb(String newVerb)
 {
     verbs.Add(newVerb);
 }

 public string pickRandomVerb()
 {
     return verbs[picker.Next(0,verbs.Count)];
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:00:19.187

在 C# 中，数组的长度是固定的，因此，如果您的应用程序基于能够将动词动态添加到公共动词池中，您应该考虑更改

```
public static string[] verbarray = new string[10]; 
```

至

```
public static List<string> verbList = new List<string>(); 
```

一个列表的大小可以增长，所以如果你已经有 10 个动词并想添加另一个，那没问题。然后，所需的代码`button5_Click`将简单地阅读：

```
verbList.Add(txtaddverb.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:52:20.600

移动：

```
Random randomverb = new Random(); 
```

到班级水平。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T17:53:44.897

这是我在解决所有错误问题后最终使用的代码：

命名空间 WindowsFormsApplication1

{

```
public class Lists

{
    public static List<string> verbList = new List<string>();

    public static Random randomverb = new Random();
} 
```

}

公共字符串pickRandomVerb()

```
 {
        return Lists.verbList[Lists.randomverb.Next(0, Lists.verbList.Count)];
    }
    public void button1_Click(object sender, EventArgs e)
    {
        if (Lists.verbList.Count > 0) verb.Text = pickRandomVerb();
    } 
```

公共无效按钮5_Click（对象发送者，EventArgs e）

```
 {
        Lists.verbList.Add(txtaddverb.Text);
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-27T16:56:38.343

你应该在这里更正你的逻辑：

```
 public void button5_Click(object sender7, EventArgs e)
    {
        for (int iverb = 0; iverb < Arrays.verbarray.Length; iverb++)
        {
            Arrays.verbarray[iverb] = Convert.ToString(this.txtaddverb.Text);
        }
    } 
```

你想要什么

```
public void button5_Click(object sender7, EventArgs e)
        {
            // suppose index 6
                Arrays.verbarray[6] = Convert.ToString(this.txtaddverb.Text);

        } 
```

# ruby-on-rails - Rails 在部署后似乎没有随机化主键

> ID：15117608
> 
> 赞同：1
> 
> 时间：2013-02-27T16:47:40.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, random, primary-key

我不确定问题出在哪里，但是在尝试创建（通用）笑话（模型）时出现以下错误：

```
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '2147483647' for key   'PRIMARY': INSERT INTO `jokes` (`content`, `created_at`, `id`, `rating`, `updated_at`) VALUES ('dsfgdsfgdfgd', '2013-02-27 16:33:12', 90650754896700, 0, '2013-02-27 16:33:12')):
  app/controllers/jokes_controller.rb:141:in `create'
  app/controllers/jokes_controller.rb:140:in `create' 
```

当我尝试保存另一个时：

```
ActiveRecord::RecordNotUnique (Mysql2::Error: Duplicate entry '2147483647' for key 'PRIMARY': INSERT INTO `jokes` (`content`, `created_at`, `id`, `rating`, `updated_at`) VALUES ('dsfgdsfg', '2013-02-27 16:32:23', 29733688655250, 0, '2013-02-27 16:32:23')):
  app/controllers/jokes_controller.rb:141:in `create'
  app/controllers/jokes_controller.rb:140:in `create' 
```

该错误提到我有一个重复的条目（主键 2147483647）。我只能创造一个笑话。在部署之前我从未遇到过这个问题，我能想到的唯一值得注意的变化是数据库类型，从 sqlite3 到 mysql2。

这是我的笑话模型中的重要代码位：

```
before_create :randomize_id
#...
validates :content, :presence   => true
validates :content, :uniqueness => true
#...
  private
def randomize_id
begin
  self.id = SecureRandom.random_number(100_000_000_000_000)
end while Joke.where(:id => self.id).exists?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:51:12.590

您的密钥太大。您只能在该 ID 字段中放置一个 32 位（有符号）整数。不知道你为什么要创建自己的主键，但无论如何，试试这个：

```
 self.id = SecureRandom.random_number(1000_000_000) 
```

顺便说一下 (2^32)/2 -1 = 2147483647

# iphone - 在视图 iphone 中添加一个滚动视图

> ID：15117617
> 
> 赞同：0
> 
> 时间：2013-02-27T16:47:59.943
> 
> 标签：iphone, uiscrollview, scrollview

我有一个表单视图，里面有一些 UITextFields。我想在滚动视图中添加表单的视图。

以下是我设计表单及其文本字段的方式：

```
 - (UIView *)Form
{
    if (!_Form) {

        CGRect frame = CGRectMake(0.0, Height, Width, 310.0);
        UIView *container = [[UIView alloc] initWithFrame:frame];

        CGFloat y = 15.0;
        frame = CGRectMake(15.0, y, width, height);
        UITextField *field = [[UITextField alloc] initWithFrame:frame];
        [
        field.placeholder = @"text";

        CGFloat spacing = 8.0;
        y = frame.origin.y + height + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"text6";

        frame.size.height = 200.0;

        y = frame.origin.y + height + space;
        frame = CGRectMake(15.0, y, width - 2*15.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"text1*";

        y = frame.origin.y + height + 16.0;
        CGFloat w = (kDeviceWidth - 2 * 15.0) / 2;
        frame = CGRectMake(15.0, y, w - 2.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"text3*";

        frame = CGRectMake(15.0 + w + 2.0, y, w - 2.0, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"text4*";

        y = frame.origin.y + height + spacevalue;
        frame = CGRectMake(15.0, y, w, height);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"text5";

        y = frame.origin.y + height + 20.0;
        frame = CGRectMake((frame.size.width - 192.0) / 2, y, 192.0, 34.0);

        y = frame.origin.y + height + 8.0;
        frame = CGRectMake((frame.size.width - 192.0) / 2, y, 192.0, 34.0);
    }
    return _Form;
} 
```

我在“textFieldDidBeginEditing”中添加了这个：（signView 是其中包含表单视图的视图）

```
 UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.signView.frame.size.width, self.signView.frame.size.height)];
       scroll.pagingEnabled = YES;
       [scroll addSubview:self.Form];

       scroll.contentSize = CGSizeMake(self.signView.frame.size.width*self.Form.frame.size.width, self.Form.frame.size.height); 
```

但是当我点击一个文本文件时，表单视图的所有文本字段都会消失。如何将我的滚动视图嵌入到视图中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:13:28.163

是的，但是您必须通过添加子视图将 UITextField 放入容器中，该容器是您的容器

```
 if (!_form) {
      //YOUR STUFF then -> add container subview your view  
      [container addSubview:yourTEXTField]
      return container;
    }
    else { 
      return _form;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:22:36.310

你在做`return _Form;`

是什么`_Form`。

据我了解，您必须返回`container`。所以让它

`return container;`

而且您正在制作，`UITextField`但是您在哪里将 subView 添加到您的视图中，您只是在创建它。

# matlab - matlab中非均匀网格上的3维傅里叶变换

> ID：15117621
> 
> 赞同：6
> 
> 时间：2013-02-27T16:48:11.437
> 
> 标签：matlab, fft, non-uniform-distribution

我需要计算结构的 3D 傅里叶变换，我有它们的 [x,y,z] 坐标。我想插值到点之间最小间距的统一网格并使用fft，但这在内存中变得不切实际，所以`fft`不能使用。我的 [x,y,z] 数据中的一个样本是：

```
xyz=[ 23.1860   44.9710    5.9280
      25.5370   44.0090    4.9960
      24.5030   44.5890    6.2280
      20.0150   46.4080    7.9110
      24.9910   44.6760    7.5330
       4.8660   44.7120    8.6830
      36.7170   33.7440    6.5570
      11.1510   40.0590    5.8120
      29.2550   34.8750   10.0850
       5.4230   48.8200   12.7380
      38.2020   35.7590    1.3260 ]; 
```

非常感谢您的建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T20:06:26.837

不幸的是，使 FFT 如此高效的算法根本不适用于非均匀情况。虽然 FFT 是 O(N log N)，但非均匀情况通常是 O(N^2)（据我所知）。我所知道的所有 NUFFT 技术基本上都依赖于插值，因此您不太可能找到一种完全不同的方法。

您的网格几何形状是什么（我无法看到您为间距模式提供的阵列）？如果其中一个或两个维度是统一的，您可以对它们单独应用 1D 或 2D FFT，然后仅对第三个维度进行插值。球坐标中的许多问题有效地做到了这一点：它们沿恒定纬度线使用 FFT，因为纬度通常不均匀地间隔以使用高斯正交，而经度是均匀的。

[Greengard, L. 和 Lee, JY (2004)。加速非均匀快速傅里叶变换。暹罗评论，46（3），443-454。](http://www.math.nyu.edu/faculty/greengar/glee_nufft_sirev.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T02:06:37.503

我自己没有使用过这个，但考虑使用在开姆尼茨科技大学数学系网站上发布的[NFFT 。](http://www-user.tu-chemnitz.de/~potts/nfft/)与 FFT 情况一样，它将 O(N^2) 要求降低到仅 O(NlogN)。此外，它现在包括与 mex 文件交互的 Matlab 类。

您可以在网站上下载一些示例，以显示与 MATLAB 交互，并且常见问题解答中有关于如何在 Windows+MATLAB 中使用的说明（如果您是）。

NFFT 需要初始化一个计划并预先计算一些东西来提高性能。看起来需要一些努力才能熟悉，但可能对您很有帮助。

它是根据 GPL 许可的。

# javascript - 尝试使用来自 ASP.NET 的变量调用 javascript 函数

> ID：15117623
> 
> 赞同：2
> 
> 时间：2013-02-27T16:48:28.667
> 
> 标签：javascript, asp.net, string, function

我有一个看起来像这样的简单文本字段。

```
<asp:TextBox ID="txtMyTextBox" runat="server" onblur="checkMyText()"  ></asp:TextBox> 
```

在我的页面顶部，我有一点点 JS

```
<script type="text/javascript">
    function checkMyText() {
        var args = document.getElementById('<% =txtMyTextBox.ClientId %>').value;
        alert(args);
        }
</script> 
```

*这很好用*。当我尝试这样做时。

```
 <asp:TextBox ID="txtMyTextBox" runat="server" onblur="checkMyText("txtMyTextBox")"  ></asp:TextBox> 
```

. . .

```
 function checkMyText(ElementID) {
                var args =  document.getElementById('<% =ElementID.ClientId %>').value;
                alert(args)
                } 
```

它失败。

我对 javascript 完全陌生，所以我不确定它如何处理传递变量或在字符串中处理它们。这个想法是，如果我添加一个： ID="txtMyOtherTextBox" 我只需要为该按钮调用 onblur="checkMyText("txtMyOtherTextBox")" 。我如何处理 javascript 字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:55:26.423

在这一行

```
<asp:TextBox ID="txtMyTextBox" runat="server" 
      onblur="checkMyText("txtMyTextBox")"  ></asp:TextBox> 
```

你有两个主要错误。

1.  错误的配额->`"checkMyText("txtMyTextBox")"`
2.  您传递的 ID 是您在后面的代码中看到的，而不是它在页面上呈现的。

`this`通常我们使用关键字将当前元素传递给 JavaScript 函数。例如：

```
<asp:TextBox ID="txtMyTextBox" runat="server" onblur="checkMyText(this)"/>

function checkMyText(me) {
                var args =  me.value;
                alert(args)
                } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:51:23.470

您必须将文本框的 ClientId 传递给 javascript 函数。执行 Javascript 时不能使用服务器端代码（您试图通过调用`ElementID.ClientId`js 函数来执行此操作。

确定仍在服务器上的 ClientId 并将其作为字符串放入函数调用中：`onblur="checkMyText('<%=txtMyTextBox.ClientId %>')"`然后您可以在 javascript 函数中使用 id。

试试这个：

```
<asp:TextBox ID="txtMyTextBox" runat="server" onblur="checkMyText('<%=txtMyTextBox.ClientId %>')"></asp:TextBox> 
```

和

```
<script type="text/javascript">
    function checkMyText(id) {
        var args = document.getElementById(id).value;
        alert(args);
        }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:55:19.470

如果您查看您的页面源代码，您会发现 ASP.NET 破坏了您漂亮的可读 ID，以便在每个页面多次使用相同的“控件”（例如新闻小部件或其他东西）的情况下保持事物真正的唯一性)

我不喜欢 ASP.NET 的这方面，更喜欢手动管理我的 ID（并在有用的地方使用类），所以我`ClientIDMode="Static"`在我的 Page Directive 中使用。这会指示 ASP.NET 使用您在源代码中指定的 ID，从而使您能够完全按照您在第二个示例中描述的（当前）不起作用的方式进行操作。

也就是说，[Aristos 的](https://stackoverflow.com/a/15117766/622129)答案是首选的解决方案

# asp.net - 在 App_Code .cs 文件中使用指向 /bin 子文件夹中的 DLL 的指令

> ID：15117624
> 
> 赞同：0
> 
> 时间：2013-02-27T16:48:30.940
> 
> 标签：asp.net, iis, shared, bin, app-code

:)

我正在尝试制作某种共享代码“存储库”，因此我不必将文件复制到大约 20 个项目或我必须维护的东西。

环境：Win7、IIS 7、VS2010、ASP.NET 4.0 网站（不是 Web 应用程序）。

我已经像这样设置了我的目录结构：

```
App_Code
  - Shared.Web (virtual dir -> C:\Apps\Shared\Shared.Web)
  - BasePage.cs <- this one has problems :(
Bin
  - Shared.Bin (virtual dir -> C:\Apps\Shared\Shared.Bin)
    - Shared.Web.dll
    - Shared.Web.pdb
MasterPage.aspx
MasterPage.cs
Default.aspx
Default.cs
Web.config 
```

在 ASPX 文件上一切正常，但 BasePage.cs 有问题，因为它有一个

```
using SharedWeb; 
```

哪个应该有效，但没有，说明找不到程序集或命名空间。我已经这样设置了我的 web.config：

```
<?xml version="1.0"?>

<configuration>

  <system.web>
    <compilation debug="false" targetFramework="4.0" />
    <pages maintainScrollPositionOnPostBack="true" />
  </system.web>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="Bin;Bin\Shared.Bin;" />
      <dependentAssembly>
        <assemblyIdentity name="SharedWeb" />
        <codeBase version="1.0.0.0" href="FILE://C:/Apps/Shared/Shared.Bin/Shared.Web.dll" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

</configuration> 
```

如您所见，没有什么花哨的。

参考：[http ://warren.chinalle.com/2008/10/14/multiple-bin-folders-aspnet/](http://warren.chinalle.com/2008/10/14/multiple-bin-folders-aspnet/)

现在，问题是：关于如何制作 BasePage.cs 文件的任何想法都可以将程序集作为使用指令用于 Bin/Shared.Bin 中的程序集？

提前致谢！

*   黑暗小子

# c# - 如何匹配行尾的句子？

> ID：15117626
> 
> 赞同：-2
> 
> 时间：2013-02-27T16:48:34.280
> 
> 标签：c#, regex

```
const string input = "===== Action: [Action1]  State: [State1] by:[user1] at [timestamp1] =====    [Notes1]===== Action: [Action2]  State: [State2] by:[user2] at [timestamp2] =====    [Notes2]";

Regex expression = new Regex(@"===== Action: (?<Action>.*?)State:(?<State>.*?)by:(?<userid>.*?)at(?<timestamp>.*?)=====(?<Note>.*?)");

var results = expression.Matches(input);
foreach (Match match in results)
{
    Console.WriteLine("UserId:" + match.Groups["userid"].Value);
    Console.WriteLine("Action:" + match.Groups["Action"].Value);
    Console.WriteLine("State:" + match.Groups["State"].Value);
    Console.WriteLine("TimeStamp:" + match.Groups["timestamp"].Value);
    Console.WriteLine("Note:" + match.Groups["Note"].Value);
} 
```

我能够正确解析除 Note 之外的所有值。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:57:33.773

您忘记在..`(?======|$)`末尾使用您的正则表达式将匹配所有内容直到结束，这不是您想要的..`regex``(?<Note>.*?)`

所以正则表达式是

```
===== Action: (?<Action>.*?)State:(?<State>.*?)by:(?<userid>.*?)at(?<timestamp>.*?)=====(?<Note>.*?)(?======|$) 
```

`SinglelineMode`如果输入由换行符分隔，则使用选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:58:01.860

我的心理调试感觉告诉我，`.*?`你的正则表达式末尾的 不是贪婪的，只会拾取 0 个空格（满足`.*?`）。

我认为您可能希望在输入和正则表达式中使用一些符号来确定`Note`应该在哪里结束

# eclipse - 从本地 git 存储库中删除 Eclipse 包并恢复到包管理器

> ID：15117639
> 
> 赞同：1
> 
> 时间：2013-02-27T16:49:03.143
> 
> 标签：eclipse, git, restore

Eclipse Juno 和 Ubuntu 12.04

大约 5 个月前，我尝试将 git 与我项目中的一个包一起使用。我从未使用过 git，并且在学习教程时感到非常沮丧，因为很快，我的屏幕与教程屏幕截图不匹配，并且有些东西无法正常工作。我在更重要的工作上分心了一段时间，现在又开始为这个项目编码了。我还发现 git 不适合我正在做的事情，并且想从本地 git 存储库中删除我的包并将其恢复为包管理器的控制。本地 git 存储库位于工作区中。

以下是一些（缩短的）路径：

```
Package Explorer - before git
 airborne.nodes
   ->/.../development/WorkspaceAirborne/airborne.nodes

Package Explorer - with git
 airborne.nodes [nodes master]
   ->/.../development/hpairborne/nodes/airborne.nodes

Git Repositories
 hpairborne [NO-HEAD]
   ->/.../development/hpairborne/.git

 nodes [master]
   ->/.../development/hpairborne/nodes/.git 
```

如果我突出显示 git 存储库并右键单击选项是“删除”。如果我选择它，是删除存储库中的代码还是只是删除指向它的指针？

如何继续恢复包？

# actionscript-3 - 蒙版的影片剪辑区域包含在高度中

> ID：15117641
> 
> 赞同：2
> 
> 时间：2013-02-27T16:49:07.777
> 
> 标签：actionscript-3, apache-flex, flash-builder, mxml, flash-cs6

*   我有一个`MovieClip`我编译到 SWC 并导入到 Flash Builder 的文件。

*   有`MovieClip`一个蒙版（可见）区域和一个被蒙版隐藏的不可见区域：

    ![MC](../Images/198db35b31ba8d35b8f4cb9bc40b24d2.png)

*   我将 MC 包装在 a 中`UIMovieClip`，以便可以插入应用程序的 MXML：

    `<my:SomeMaskedControl bottom="0" />`

*   在我设置属性的 MXML 中`bottom="0"`，我希望它`UIMovieClip`位于应用程序的底部。不幸的是，MC 的隐形区域搞砸了：

    ![应用](../Images/b3135be7a0799752c04d0aa57e087106.png)

*   我希望它更像这样：

    ![更好的应用](../Images/3a102476b635cb539b0f645e6a1d562e.png)

我意识到我可以将`bottom`属性更改为负值，但我认为这会破坏应用程序的体系结构。有没有办法修复它以便我仍然可以使用`bottom="0"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:45:58.717

尝试使用 Colin Moock hack：[http ://www.moock.org/blog/archives/000292.html](http://www.moock.org/blog/archives/000292.html)

```
public class SomeMaskedControl extends UIMovieClip
{
    protected var mc:MaskedMC;

    public function SomeMaskedControl()
    {
        super();

        mc = new MaskedMC();

        addChild(mc);
    }

    public function getVisibleHeight (o:DisplayObject):Number {
        var bitmapDataSize:int = 2000;
        var bounds:Rectangle;
        var bitmapData:BitmapData = new BitmapData(bitmapDataSize, bitmapDataSize, true, 0);
        bitmapData.draw(o);
        bounds = bitmapData.getColorBoundsRect( 0xFF000000, 0x00000000, false );
        bitmapData.dispose(); 
        return bounds.y + bounds.height;
    }

    override public function get height():Number
    {
        return getVisibleHeight( mc );
    }
} 
```

但我不喜欢这种方式。如果您可以将遮罩创建为 MovieClip，并设置实例名称，则在应用程序中您可以获取 mask.height 并替换 UIMovieClip 高度：

```
public class SomeMaskedControl extends UIMovieClip
{
    protected var mc:MaskedMC;

    public function SomeMaskedControl()
    {
        super();

        mc = new MaskedMC();

        addChild(mc);
    }

    override public function get height():Number
    {
        return mc.maskMC.height;
    }
} 
```

# java - 检查结果是否正常

> ID：15117643
> 
> 赞同：7
> 
> 时间：2013-02-27T16:49:10.130
> 
> 标签：java, playframework, playframework-2.0

我试图通过让 @Cached 知道我在控制器中调用的函数的参数来制作更好的 @Cached 注释。

所以我有这个动作：

```
public class ContextualCachedAction extends Action<ContextualCached> {

    @Override
    public Result call(Context ctx) throws Throwable {
        try {
            String key = makeKey(ctx);
            Integer duration = configuration.duration();
            Result result = (Result) Cache.get(key);
            if (result == null) {
                result = delegate.call(ctx);

                //TODO find a way to cache only successful calls

                Cache.set(key, result, duration);
            }
            return result;
        } catch (RuntimeException e) {
            throw e;
        } catch (Throwable t) {
            throw new RuntimeException(t);
        }
    }

    private String makeKey(Context ctx) {
        //makes the key from some parameters in the ctx.request()
    }
} 
```

我的问题是：只有当它是 Ok() 时，我才想缓存 delegate.call() 的结果。我该如何检查呢？有财产吗？一个实用程序？还是我需要 Ok().getClass().isInstance(result)？

感谢您的任何答案和提示。

PS：我为什么要这样做？因为我有一些调用会产生几种不同的结果。很少有结果可以缓存它们，因为我不想

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-22T02:38:51.487

不那么糟糕的方法：

```
import org.junit.*;
import static org.fest.assertions.Assertions.assertThat;
import static play.test.Helpers.*;

/* do stuff */

Result result = doSomethingWithController();
assertThat(status(result)).isEqualTo(OK); 
```

从 2.2.2 开始工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T18:07:00.053

`ok`结果实际上是 a ，它包装了它的`play.mvc.Results.Status`Scala 对应物`play.api.mvc.Results.Status`，它的`status`代码设置为 200。

因此，您调用`result.getWrappedResult()`并检查类型是否正确，将其转换为`PlainResult`（最低公分母）并调用`status`.

不过，这看起来很丑陋：

```
 play.api.mvc.Result wrappedResult = result.getWrappedResult();
  if (wrappedResult instanceof play.api.mvc.PlainResult) {
    play.api.mvc.PlainResult plainResult = (play.api.mvc.PlainResult)wrappedResult;
    int code = plainResult.header().status();
    if (code == OK)
      // Cache
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-11T02:11:28.780

只是用最新的 2.3+ Playframework 方式更新此页面。

```
Result result = //.....
int httpStatus = result.toScala().header().status(); 
```

很容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-02T21:53:08.023

如果您知道您`Result`是一个实例`play.mvc.Results.Status`（如果您使用`play.mvc.Results`该类中的任何静态辅助方法创建它），您可以将其转换为`Status`，并`SimpleResult`直接使用以下方法获取对象`getWrappedSimpleResult()`：

```
Status result = (Status) YourController.actionHandler();
int expected = Results.ok()
        .getWrappedSimpleResult().header().status();
int actual = result.getWrappedSimpleResult().header().status();
Assert.assertEquals(expected, actual); 
```

# java - 指纹扫描仪

> ID：15117645
> 
> 赞同：-10
> 
> 时间：2013-02-27T16:49:16.183
> 
> 标签：java, c++, c, vb.net

我有从 digitalpersona 设备扫描指纹模板的代码。这个对我有用。但它还有更多功能，如存储模板、验证等。我只想提取命令或代码以从设备中扫描指纹模板。我有 4 种不同语言的代码（vb、java、c++、c）。任何一种可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:51:59.510

你不能。提供给您的代码归 DigitalPersona 所有并用 C++ 编写。它是封闭源代码。不幸的是，您将不得不对其进行逆向工程以仅从中提取一些功能。

如果您注意到，所有其他编写的代码都会调用本机 C++ dll 函数来完成它们的“脏”工作。

没有向您提供 DLL 的源代码。因此，您不能只是从 DP 的指纹硬件交互代码中复制粘贴*一些代码。*

# sql - 获取表中数据组的记录总数

> ID：15117647
> 
> 赞同：0
> 
> 时间：2013-02-27T16:49:21.233
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008R2 数据库。我有一个查询，用于从我们的数据库中获取一些实验室结果数据，这些数据是针对访问我们办公室超过 2 次的患者。这是查询：

```
;WITH PatientData (patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units )
AS
(
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
FROM dbo.dem_patient pat
RIGHT JOIN dbo.med_problemlist as pl
ON pat.patient_id = pl.patient_id
JOIN dbo.enc_encounter as enc
ON pat.patient_id = enc.patient_id
JOIN dbo.med_labresult as lab
ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '250%' AND
enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
)
SELECT patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units
FROM PatientData pd1 
WHERE EXISTS (SELECT patient_id 
                FROM PatientData pd2 
                WHERE pd2.patient_id  = pd1.patient_id  
                GROUP BY patient_id 
                HAVING COUNT(*)>1 )
ORDER BY pd1.race, pd1.ethnic_group 
```

这适用于获取患者列表及其实验室结果值。它返回如下内容：

```
patient_id    encounter_date    test_performed    result_value    result_units
00001         01/15/2012        HgbA1c            5.6             %
00001         05/03/2012        HgbA1c            8.6             %
00025         02/02/2012        HgbA1c            9.1             %
00064         07/01/2012        HgbA1c            7.6             % 
```

但是，我现在想对这些数据进行分组，并获得不同结果值之间的结果总数。例如，我希望得到如下所示的结果：

```
LessThan7%    7%To8%     8%To9%    GreaterThan9%
775           289        365       154 
```

过去我可以使用 CROSS JOIN 功能做类似的事情。但是，从来没有这样复杂的查询。我真的可以使用一些帮助。

谢谢！

更新：

根据以下建议，我已将查询更新为以下内容：

```
;WITH PatientData (patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units )
AS
(
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
FROM dbo.dem_patient pat
RIGHT JOIN dbo.med_problemlist as pl
ON pat.patient_id = pl.patient_id
JOIN dbo.enc_encounter as enc
ON pat.patient_id = enc.patient_id
JOIN dbo.med_labresult as lab
ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '250%' AND
enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
)
select sum(case when isnumeric(result_value) = 1
       then (case when result_value < 7.0 then 1 else 0 end) 
       end) as [LessThan7%],
       sum(case when isnumeric(result_value) = 1
       then (case when result_value >= 7.0 and result_value < 8.0 then 1 else 0 end) 
       end) as [7%to8%],
       sum(case when isnumeric(result_value) = 1
       then (case when result_value >= 8.0 and result_value < 9.0 then 1 else 0 end) 
       end) as [8%to9%],
       sum(case when isnumeric(result_value) = 1
       then (case when result_value >= 9.0 then 1 else 0 end)
       end) as [GreaterThan9%]
FROM PatientData pd1 
WHERE EXISTS (SELECT patient_id 
                FROM PatientData pd2 
                WHERE pd2.patient_id  = pd1.patient_id  
                GROUP BY patient_id 
                HAVING COUNT(*)>1 ) 
```

但是，我仍然收到“将 varchar 转换为数字数据类型的算术溢出错误”

非常感谢任何额外的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:01:02.923

这是一个条件聚合：

```
with query as (your query here)
select sum(case when result_value < 0.07 then 1 else 0 end) as [LessThan7%],
       sum(case when result_value >= 0.07 and result_value < 0.08 then 1 else 0 end) as [7%to8%],
       sum(case when result_value >= 0.08 and result_value < 0.09 then 1 else 0 end) as [8%to9%],
       sum(case when result_value >= 0.09 then 1 else 0 end) as [GreaterThan9%]
from query 
```

安排您的查询进入`with`子句。

如果 result_value 存储为字符，请尝试以下操作：

```
select sum(case when isnumeric(result_value) = 1
                then (case when result_value < 0.07 then 1 else 0 end)
            end) as [LessThan7%],
       sum(case when isnumeric(result_value) = 1
                then result_value >= 0.07 and result_value < 0.08 then 1 else 0 end)
           end) as [7%to8%],
       sum(case when isnumeric(result_value) = 1
                then (case when result_value >= 0.08 and result_value < 0.09 then 1 else 0 end)
            end) as [8%to9%],
       sum(case when isnumeric(result_value) = 1
                then (case when result_value >= 0.09 then 1 else 0 end)
           end) as [GreaterThan9%] 
```

您需要嵌套`case`语句以确保在尝试转换*之前*`isnumeric()`运行。

# counter - 使用 Dflip 触发器的纹波计数器

> ID：15117651
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:49:35.793
> 
> 标签：counter, verilog

我编写了这段代码来模拟使用 D 触发器的异步计数器。该程序为第一次迭代提供了正确的输出，但随后输出根本没有改变。我究竟做错了什么？

这是代码：

***第一个模块：***

```
module DFF(d,q,reset,clk);
  input      d,reset,clk;
  output reg q;

  always @(posedge reset, posedge clk) begin
    if(reset) begin
      q=0;
    end
    if(d)
      q=d;
    else
      q=q;
   end
endmodule 
```

***第二个模块：***

```
module RippleCounter(d,clk,reset,out);
  input  [3:0] d;
  input        clk, reset;
  output [3:0] out; // 4bit

  DFF a(d[0],out[0],reset,clk);
  DFF b(d[1],out[1],reset,out[0]);
  DFF c(d[2],out[2],reset,out[1]);
  DFF dx(d[3],out[3],reset,out[2]);
endmodule 
```

***第三个模块：***

```
module RippleCounterTOP;
  reg  [3:0] d;
  reg        clk, reset;
  wire [3:0] out;

  RippleCounter r(d,clk,reset,out);

  initial begin
    d=0;clk=0;reset=1;
  end

  always begin 
    #5 d=d+1; clk=~clk;
  end
endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:36:59.147

看看[这张](http://www.eecs.tufts.edu/~dsculley/tutorial/flopsandcounters/flops6.html)波纹计数器的图片，测试工具的唯一输入应该是时钟。

使用的翻牌类型通常看起来像：

```
always @(posedge reset, posedge clk) begin
  if(reset) begin
    q <= 'b0;
  end
  else begin
    q <= ~q;
  end
end 
```

在模块 1`always@(posedge clk ..`中，您应该使用非阻塞`<=`赋值而不是`=`.

在模块 3 中，你有一个没有敏感度列表的 always 块，我会添加`@*`, 这看起来你真的想要一个带有重复或 for 循环的初始值来执行你的测试，然后`$finish()`在完成后调用。我在下面使用了SystemVerilog，但如果需要`#5ns`，您可以更改为。`#5`

```
integer i;
initial begin 
  d=0;clk=0;reset=1;
  #5ns
  reset=0;

  for (i=0; i<5'b1000; i=i+1) begin
    #5ns d=d+1; clk=~clk;
    $display("%4b, %4b", d, out);
  end
  $finish;
end 
```

尝试您的示例，这就是我最终得到的结果，我认为这是您尝试做的事情：注意正确答案是`~out`.

**模块 1**可以扩展为 q 和 q_bar 输出。

```
module DFF(q,reset,clk);
  input      reset,clk;
  output reg q;

  always @(posedge reset, posedge clk) begin
    if(reset) begin
      q<=0;
    end
    else begin
      q<=~q;
   end
 end
endmodule 
```

**模块 2**

```
module RippleCounter(clk,reset,out);
  input        clk, reset;
  output [3:0] out; // 4bit

  DFF ax(out[0],reset,clk);
  DFF bx(out[1],reset,out[0]);
  DFF cx(out[2],reset,out[1]);
  DFF dx(out[3],reset,out[2]);
endmodule 
```

**模块 3**（测试工具）

```
module RippleCounterTOP;
  reg        clk, reset;
  wire [3:0] out;

  RippleCounter r(clk,reset,out);

  integer i;

  initial begin
    clk=0;reset=1;
    #5ns
    reset=0;

    for (i=0; i<6'b10000; i=i+1) begin
      #5ns clk=~clk;
      $display("%4b", ~out);
    end
    $finish;
  end
endmodule 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:16:52.043

我不确定你希望你的输出做什么，但一个问题是你总是在重置你的 DFF。

# asp.net-mvc - WebGrid 过滤器复选框值在页面更改时丢失

> ID：15117653
> 
> 赞同：1
> 
> 时间：2013-02-27T16:49:39.177
> 
> 标签：asp.net-mvc, checkbox, pagination, filtering, webgrid

我在我的 MVC 应用程序中使用 WebGrid 和 View Model。**我的 Viewmodel 有一个名为“ companyfilter** ”的 int[] 成员，可以从公司复选框列表中获取用户的多项选择来搜索产品数据库。

ViewModel 将通过 Ajax.BeginForm 发送到控制器，控制器将返回带有产品列表的 SAME 视图模型，以填充主要是 Webgrid 和分页（服务器端分页）的部分视图。

当我选中一些框，单击提交按钮并正确获得结果时，它运行良好。问题是，当我单击 WebGrid 中的下一页时，它在 Controller 端的**companyfilter中丢失了我的多选值。**

通过调试，我发现 View 确实正确地发回了带有数据的**公司**过滤器，但是 MVC 在填充控制器的视图模型时未能绑定数据。谁能告诉我为什么？

最有趣的是，如果我将 companyfilter 更改为 string[ ]，它会起作用。但是，当 Webgrid 进行分页时，MVC 为 companyfilter[0] 提供“1, 4, 5”，而不是我认为 companyfilter[0] = “1”，companyfilter[1] = “4”，companyfilter[2] = “ 5"。为什么它会这样？

有什么建议可以解决这个问题吗？我更喜欢使用 int[]，而不是 string[]。谢谢！

这是我的代码供参考。

```
public class ProductSearchViewModel
{
    public List<Company> CompanyFullList { get; set; }
    public int[] CompaniesFilter { get; set; }
    //Search Result
    public IEnumerable<ProductInfor> ProductList { get; set; }
}

public ActionResult M_ProductSearchIndex(ProductSearchViewModel searchViewModel)
{
    search database...

    if (Request.IsAjaxRequest())
    {
        return PartialView("_M_ProductSearchResult", searchViewModel);
    }
    else
    {
        return View(searchViewModel);
    }        
} 
```

我的观点：

```
@model MyApp.Models.ViewModels.ProductSearchViewModel
<div id="CompaniesChkboxs">
@foreach (var company in Model.CompanyFullList)
{
    <input type="checkbox" name="CompaniesFilter" value="@company.Id", @(Html.Raw(company.Selected ? "checked=\"checked\"" : "")) /> @company.CompanyName
}
</div>

@Html.Partial("_U_ProductSearchResult", Model) 
```

# c# - 如何在下载之前检查 zip 文件是否未被其他进程使用

> ID：15117654
> 
> 赞同：0
> 
> 时间：2013-02-27T16:49:40.333
> 
> 标签：c#

我正在编写一个 Windows 服务，它从服务器上的 Uri 路径收集一个 zip 文件。我遇到的问题是当我的服务尝试收集压缩文件时，它仍在服务器上被写入。如果我`Thread.Sleep(15000)`在打电话下载文件之前放了一个，它工作正常。处理视频报警时，这种延迟是不可接受的。如果可能的话，我希望在调用下载函数之前在 while 循环中添加一个检查，以查看文件是否已准备好从服务器 URI 下载。这可能吗？

我正在使用异步 WebClient 下载 zip 文件：

```
internal void DownloadZippedFile(string eventId)
{
    try
    {
        Logger.LogInformation("Extracing Video for event: " + eventId);

        using (WebClient webClient = new WebClient())
        {
            string urlPath = sureViewZipHost + "/archiveevent?user=" + sureViewUserId + "&password=" + sureViewPassword + "&event=" + eventId;
            string tempPath = Path.GetTempPath();

            long lReceived = 0;
            long lTotal = 0;

            webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(DownloadCompleted);
            webClient.DownloadProgressChanged += delegate(object sender, DownloadProgressChangedEventArgs e)
            {
                Logger.LogInformation("downloaded {0} of {1} bytes. {2}% complete", e.BytesReceived, e.TotalBytesToReceive, e.ProgressPercentage);

                // Assign to outer variables to allow busy-wait to check.
                lReceived = e.BytesReceived;
                lTotal = e.TotalBytesToReceive;
            };

            webClient.DownloadFileAsync(new Uri(urlPath), tempPath + "//" + eventId + ".zip",eventId);
        }
    }
    catch (Exception ex)
    {
        Logger.LogError("Error extracting Video " + ex.Message);
    }
} 
```

使用上面的代码永远不会引发异常。我通过打开部分下载的 zip 发现了这个问题，它包含：

> 400 错误请求
> 
> System.IO.IOException：该进程无法访问文件“C:\FileStore\G98\E16884\R6507679\JpegBackup022620132102384484.zip”，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:53:31.423

基本上，您不能-您必须尝试打开文件进行写入，如果遇到异常，您将无法写入它:(

即使您可以先进行单独的检查，在您开始编写之前，结果也会过时 - 您以后仍然可能会遇到异常。

你可以尝试这样的事情：

```
public class FileManager
{
    private string _fileName;

    private int _numberOfTries;

    private int _timeIntervalBetweenTries;

    private FileStream GetStream(FileAccess fileAccess)
    {
        var tries = 0;
        while (true)
        {
            try
            {
                return File.Open(_fileName, FileMode.Open, fileAccess, Fileshare.None); 
            }
            catch (IOException e)
            {
                if (!IsFileLocked(e))
                    throw;
                if (++tries > _numberOfTries)
                    throw new MyCustomException("The file is locked too long: " + e.Message, e);
                Thread.Sleep(_timeIntervalBetweenTries);
            }
        }
    }

    private static bool IsFileLocked(IOException exception)
    {
        int errorCode = Marshal.GetHRForException(exception) & ((1 << 16) - 1);
        return errorCode == 32 || errorCode == 33;
    }

    // other code

} 
```

这就是我在代码中用来克服此类问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:53:26.487

解决此问题的一种方法是每 n 秒重试一次操作（指定最大重试次数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:55:06.210

我认为在尝试访问文件之前没有任何方法可以检查服务器上的进程是否正在使用文件。您*可以*做的是专门捕获该 400 错误，检查“被另一个进程使用”的错误消息，然后在重试之前短暂休眠。

```
try
{
  int retrysLeft = 10;
  while (retrysLeft >= 0)
  {
     try 
     {
        // attempt to download
        retrysLeft = -1;
     }
     catch (WebException ex)
     {
        if (ex.InnerException.Message.Contains("used by another process"))
        {
           retrysLeft--;
           Thread.Sleep(1000);
        }
        else throw;
     }
   }
 }
 catch (Exception ex)
 {
    // Regular error handling
 } 
```

# sql - PostgreSQL：如何将相似的数据分组到一列

> ID：15117656
> 
> 赞同：0
> 
> 时间：2013-02-27T16:49:51.750
> 
> 标签：sql, postgresql

我正在寻找可以将类似数据分组到一列中的查询。基本上，我有一个代表订单项目的表格。每个订单商品都属于一个订单。一个订单项目有一个数量、每单位价格 (ppu)、ppu 的货币 (cur) 和一些其他成本（每个成本都有自己的货币）。成像，我在表中有以下数据：

```
id | id_order | amount | ppu | ppu_cur  | costsA | costsA_cur  | costsB | costsB_cur 
1  | Ord1     | 20     | 10  | EUR      | 5      | USD         | 15     | EUR
2  | Ord1     |  8     | 20  | EUR      | 0      |             | 15     | EUR
3  | Ord1     | 15     | 50  | USD      | 10     | USD         | 0      | 
4  | Ord2     | 50     | 25  | EUR      | 10,50  | EUR         | 15     | EUR 
```

现在，我需要的是一个可以像这样对价格进行分组的查询：

```
id_order | curr | price_total
Ord1     | EUR  | 390
Ord1     | USD  | 505
Ord2     | EUR  | 1275,5 
```

信息：“0”价格或没有货币的价格应被忽略。

不幸的是，我只用 ppu 做到了这一点：

```
SELECT "sub"."id", "sub"."cur", SUM("sub"."price_total")
FROM (
  SELECT "ord"."id" AS "id", ("oi"."amount" * "oi"."ppu") AS "price_total", "oi"."cur" AS "cur"
  FROM "orders" "ord", "orderitems" "oi"
  WHERE
    ("oi"."id_order" = "ord"."id") AND
    (("oi"."cur" IS NOT NULL) AND ("oi"."cur" <> '')) AND
    ("oi"."price" <> 0)
  ) "sub"
GROUP BY "sub"."id", "sub"."cur" 
```

有人知道如何解决这个问题吗？

提前致谢 ：）

**编辑：** 每个订单价格应根据货币计算，例如：“Ord1”中有两种不同的货币（欧元、美元）。因此，“Ord1”的结果必须有两行。另一方面，“Ord2”中只有一种货币（欧元）。所以结果只包含一行“Ord2”。

计算：每一个同币种的costX/ppu都要相加。此外，ppu 必须乘以数量。“Ord1”的示例：

```
EUR: (20 * 10 + 15) + (8 * 20 + 15)
USD: (5) + (15 * 50 + 10) 
```

**信息：**示例中只有 2 种不同的货币。但是，可以有任意数量的货币。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:08:51.163

每列使用单独的货币会有点棘手，因此最简单的方法是制作一个 cte 来逐项列出价格并从中选择具有适当分组的总和；

```
WITH cte AS (
  SELECT id_order,ppu_cur curr,amount*ppu price FROM orderitems  -- amount*ppu
  UNION ALL
  SELECT id_order,"costsA_cur","costsA" FROM orderitems          -- costsA
  UNION ALL
  SELECT id_order,"costsB_cur","costsB" FROM orderitems          -- costsB
)
SELECT id_order,curr,SUM(price)
FROM cte
WHERE curr IS NOT NULL AND price<>0
GROUP BY id_order,curr 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!12/31817/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:57:51.353

你没有很好地解释逻辑，但我想我是从结果中得到的。

试试这个：

```
select id_order, curr, sum(amount*(ppu+AddedCost)) as price_total
from (select t.*,
             (case when ppu_cur = costsa_cur then costsa
                   when ppu_cur = costSB_cur then costsb
                   else 0
              end) as AddedCost
      from t
     ) t
group by id_order, curr 
```

我正在使用子查询使添加的成本计算更清晰。

# javascript - 检查 attachEvent() 可用性的正确方法是什么？

> ID：15117657
> 
> 赞同：0
> 
> 时间：2013-02-27T16:49:53.003
> 
> 标签：javascript

我见过这3个：

```
if(window.attacheEvent)

if(document.attachEvent)

if(element.attachEvent) 
```

**笔记：**

*   元素很容易获得。

*   请不要图书馆

**每个答案应用 Fascade 模式**

```
$NS.addEventL = (function determineEventBinding(){
    if(window.attachEvent){
        return function attachEvent(element, type, callNow){
            element.attachEvent('on' + type, callNow);
        }
    }
    else {
        return function addEventListener(element, type, callNow){
            element.addEventListener(type, callNow);
        }
    }
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:54:38.323

它们都是“正确的”，因为它们会产生相同的结果（假设`element`是一个 DOM 节点）。`window`and的优点`document`是您不必创建或查找元素来测试功能，这意味着您可以更有效地执行测试。

你说`element`是现成的：这表明你正在编写一个插件/库/模块，它创建元素并将事件绑定到它们。我会说，分开你的事件：

而您可能有这样的代码：

```
function createButton(){
    // Create element
    var button = document.createElement('input');

    // Bind event
    if(button.attachEvent){
        button.attachEvent('onclick', actionTrigger);
    }
    else {
        button.addEventListener('click', actionTrigger, false);
    }

    return button;
} 
```

您最好编写自己的包装函数，如下所示：

```
var bindEvent = (function determineEventBinding(){
    if(window.attachEvent){
        return function attachEvent(element, hook, func){
            element.attachEvent('on' + hook, func);
        }
    }
    else {
        return function addEventListener(element, hook, func){
            element.addEventListener(hook, func, false);
        }
    }
}()); 
```

...然后忘记所有的头痛，在编写函数代码时使用你的包装器：

```
function createButton(){
    // Create element
    var button = document.createElement('input');

    // Bind event
    bindEvent(button, 'click', actionTrigger);

    return button;
} 
```

优点是多方面的：

1.  确定方法的代码只需要运行一次
2.  该代码可以在脚本执行开始后立即运行——远离性能拥塞热点，如 DOM 就绪或用户 CTA
3.  在编写深奥的功能代码时，您可以忘记所有关于浏览器差异的事情，您的代码将因此更好地阅读和执行
4.  如果您需要支持新的浏览器差异或修复现有的差异，您可以在一次编辑代码，而不是每次绑定事件时跟踪

# java - 我可以使用 AspectJ 用 ThreadLocal“包装”一个字段吗？

> ID：15117658
> 
> 赞同：1
> 
> 时间：2013-02-27T16:49:52.957
> 
> 标签：java, thread-safety, aspectj

假设我们有一个如下所示的类。

```
public class MyClass {

   @ThreadScoped    
   private Collection<String> words = new ArrayList<String>();

   public void addWord(String word) {
        words.add(word);
   }

} 
```

在运行时，我们只有这个类的一个实例，但它接受来自多个线程的调用。

我希望编写该类的开发人员能够忽略他们正在为多线程访问编写它的事实，而只是将该字段注释为“线程范围”。

是否可以创建一个方面，使每个调用线程都有自己的单词集合，就好像 words 字段本来是`ThreadLocal`? 即使在多次调用该方法时，集合也应该绑定到线程。

我已经看到了`set`和`get`点切割，但无法找到一种使用它们的方法，它不需要我在对象上设置字段，这会破坏类的线程安全。

是否有另一种不使用方面的方法，例如使用代理或反射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:40:49.913

您的设计中似乎有几个可能相互冲突的决定：

*   您只有一个`MyClass`.

*   您希望每个线程查看其自己的`words`字段版本。

在我看来，为此目的使用 AspectJ 可能是矫枉过正。我想线程特定的访问可以被认为是一个横切关注点，但我不确定 AOP 是处理这个问题的方法。在尝试 AspectJ 之前，我会首先考虑重新设计纯 Java 代码。

老实说，我相信实现第二种效果的最简单方法是让每个线程都有自己的`MyClass`. 如果不能明确地将其传递给每个线程，您甚至可以使用 a`ThreadLocal`来提供对正确实例的访问。`MyClass`

如果您的字段`MyClass`由多个线程共享，那么您可能需要考虑重构`MyClass`以将其分成两个类。这会将特定于线程的字段与共享字段分开，从而允许您以不同的方式处理每种情况。

**编辑：**

我稍微考虑了您的评论，在我看来，您正在尝试使用 AOP 从本质上向开发人员隐藏该字段的实现。将编程接口与实际实现分离的问题主要在面向对象编程中得到解决，而没有解决到 AOP。

在您的情况下，要走的路是使用抽象超类`MyClass`来为该字段保存一个*私有*声明，然后使用几个 getter 和 setter 方法来`MyClass`处理它。这样你就可以改变实际的实现而不影响其他任何东西。

```
public abstract AbstractMyClass {
    private ... words = ...;

    protected Collection<String> getWords() {
        ...
    }
}

public Myclass extends AbstractMyClass {
   public void addWord(String word) {
        this.getWords().add(word);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:31:47.217

由于以下几个原因，您想要以通用方式使用 AspectJ 是不可能的：

*   没有通用的方法可以在创建时克隆对象，即使是集合也不行。然后考虑原始类型。
*   即使您确实将对象克隆到`ThreadLocal`特定`set()`切入点中的 a 中，您如何将对象上的方法调用重定向到克隆？

话虽如此，一种方法是编写一个源代码预处理器来做一些魔术（包装有问题的对象和对它们的方法调用）。预处理器会将其代码编织到源代码中，然后您通常会使用*javac*编译它们。

无论如何，正如 thkala 所说，我认为最简单的解决方案是教您的开发人员自己实际使用`ThreadLocal`或使用您的 API 提供的本地化包装器（您必须实现）。

# android - uncaughtException 被多次调用

> ID：15117659
> 
> 赞同：2
> 
> 时间：2013-02-27T16:50:00.280
> 
> 标签：android, uncaught-exception

我是stackoverflow的相对新手。

我在我的 android 应用程序中实现了一个 owne uncaughtException 处理程序。问题是当我的一项活动中发生一个未处理的异常时，方法“uncaughtException”被多次调用。

这是我全班负责处理未捕获的异常：

```
public class CustomUncaughtExceptionHandler implements java.lang.Thread.UncaughtExceptionHandler {

 private UncaughtExceptionHandler defaultUEH;
public CustomUncaughtExceptionHandler(UncaughtExceptionHandler defaultHandler) {

    defaultUEH = defaultHandler;
    Log.w("cmhandler","setted default UEH");
}

public void uncaughtException(Thread thread, Throwable exception) {
    Log.w("cmhandler","uncaughtException");
    Helper.Log_e("CustomUncaughtExceptionHandler", "uncaughtException", exception);

    defaultUEH.uncaughtException(thread, exception);
} 
```

}

该行`Helper.Log_e("CustomUncaughtExceptionHandler", "uncaughtException", exception);`仅将异常保存在文件中，并且没有抛出异常。

我在我的活动中实现了这个类，如下所示：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Thread.setDefaultUncaughtExceptionHandler(new CustomUncaughtExceptionHandler(Thread.getDefaultUncaughtExceptionHandler())); 
```

当我运行我的应用程序并在活动的 oncreate 中插入类似的内容时（在上面的代码之后）

```
String i = null;
    i.length(); 
```

异常得到正确处理，并且 FC 对话框也弹出。到目前为止一切顺利，但在查看我的日志后，我发现方法 uncaughtException 被多次调用。

编辑：通常该方法被调用 2-6 次，并且来自 defaultUEH 设置的日志仅在日志中出现一次。

还有其他人有这样的行为吗？或者有没有人暗示我做错了什么？

谢谢，最好的问候 schw4ndi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:13:22.200

我的错误是我在 onCreate 的 evrey 活动中设置了默认的例外处理程序，所以通过调用 getDefaultExceptionHandler 我得到了 previos 设置的 customExceptionHandler。

我现在通过将课程设置为单例来解决它。所以默认处理程序只设置一次。

# php - PHP 5.4 是否有 x64 OAuth DLL？

> ID：15117663
> 
> 赞同：2
> 
> 时间：2013-02-27T16:50:13.140
> 
> 标签：php, windows, oauth, pecl

我正在寻找适用于 64 位 Windows 和 PHP 5.4 的 PECL OAuth DLL。有谁知道我在哪里可以找到 DLL（假设它存在于某处）？

Stack Overflow 上有类似的问题，但是我已经解决了所有我能找到的问题，并且大多数解决方案都指向几个网站来下载 DLL。不幸的是，这些网站都没有我正在寻找的 DLL。

*   [http://downloads.php.net/pierre/](http://downloads.php.net/pierre/) - 仅限**PHP 5.3**和**x86**
*   [http://windows.php.net/downloads/pecl/releases/oauth/1.2.2/](http://windows.php.net/downloads/pecl/releases/oauth/1.2.2/) - 有*PHP 5.4*但只有**x86**
*   [http://windows.php.net/downloads/pecl/releases/oauth/1.2.3/](http://windows.php.net/downloads/pecl/releases/oauth/1.2.3/) - 有*PHP 5.4*但只有**x86**
*   [http://www.mediafire.com/php-win64-extensions](http://www.mediafire.com/php-win64-extensions) - 有*x64*但只有 **PHP 5.3**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T15:17:02.077

这里，

```
php_oauth-1.2.3-5.4-VC9-x64.zip 
```

[http://www.mediafire.com/download/kdnxvxva6e0k5an/php_oauth-1.2.3-5.4-VC9-x64.zip](http://www.mediafire.com/download/kdnxvxva6e0k5an/php_oauth-1.2.3-5.4-VC9-x64.zip)

所有其他 x64 php 扩展

[http://www.mediafire.com/php-win64-extensions](http://www.mediafire.com/php-win64-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:05:15.220

我最近搜索过这个但没有运气。这么简短的回答。

### 不

# wpf - Caliburn.Micro：不同项目中的视图和引导程序

> ID：15117667
> 
> 赞同：5
> 
> 时间：2013-02-27T16:50:21.670
> 
> 标签：wpf, caliburn.micro, bootstrapping

我正在玩 Caliburn.Micro 有一个小问题。我喜欢为应用程序启动器创建一个项目，其中包含引导、配置文件等。然后将应用程序的 UI 组织在一个自己的项目中。这适用于 Prism，但在我看来，如果 UI 和引导程序分开，caliburn 不喜欢它。这是正确的还是我错过了什么？

编辑：我在 app.xaml 中引用了引导程序。引导程序目前看起来就像这样：

```
public class AppBootstrapper : Bootstrapper<MainViewModel>
{
} 
```

ViewModel 在另一个项目中，当我启动应用程序时，应用程序窗口显示“找不到视图模型的视图...”。如果 ViewModel 和 View 像引导程序一样在同一个项目中，则不会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:33:26.583

`SelectAssemblies`在引导程序中覆盖。

打开登录可能会有所帮助，CM 会告诉您它试图定位的视图或视图模型的名称变体：

```
if (Debugger.IsAttached)
     LogManager.GetLog = type => new DebugLogger(type); 
```

更多信息： [是否可以在单个解决方案中为视图、视图模型和模型创建不同的项目](http://caliburnmicro.codeplex.com/discussions/430031)

# android - OpenInputStream返回文件未找到异常但文件在那里

> ID：15117670
> 
> 赞同：4
> 
> 时间：2013-02-27T16:50:26.343
> 
> 标签：android

我正在尝试从 SD 卡缩放位图并将其写入手机内存。然后稍后将其解码以将其添加到`HashMap`.

问题是我得到文件未找到异常，尽管路径正确并且缩放图像存在（我检查过）

这是保存部分

```
 Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options );         
        File imageRootPath = getFilesDir();
        File imageRoot = new File(imageRootPath, imagUri.getLastPathSegment()+".png");
        FileOutputStream out = new FileOutputStream(imageRoot);
        yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 90, out); 
```

这是我阅读文件时的部分

```
try {
Uri mainImgeUri = Uri.parse(imageRoot.toString());
File imageFile = new File(mainImgeUri.toString());
if(imageFile.exists()){
   System.out.println("it does");
}
InputStream imageStream = ListPropertiesBaseActivity.this.getContentResolver().openInputStream(mainImgeUri); // I am getting file not found error

Bitmap yourSelectedImage =BitmapFactory.decodeStream(imageStream);
hmBitmap.put(ID, yourSelectedImage);
imageStream.close();
} catch (Exception e) {

e.printStackTrace();
} 
```

难道是`OpenInputStream`无法从手机内部存储器中读取？或者可能是保存后的图像不好？

虽然我可以通过手动浏览文件并打开它来查看它

请注意 System.out.Println 被执行所以这意味着文件存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:24:05.750

您是否尝试过记录 imageStream 以查看 uri 实际上是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:53:55.353

使用您的 uri创建一个`File`对象`mainImgeUri`并检查文件是否存在，将此文件传递给`openInputStream()`方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:54:27.233

我找到了。好吧，我找到了解决方法，但我永远无法解释以前的行为以及为什么它不起作用。我用这个 getContentResolver 替换了

```
FileInputStream fis = new FileInputStream(imageFile);
Bitmap yourSelectedImage =BitmapFactory.decodeStream(fis); 
```

这行得通。知道为什么！尽管

# win-prolog - flex中的随机数

> ID：15117673
> 
> 赞同：0
> 
> 时间：2013-02-27T16:50:40.663
> 
> 标签：win-prolog, lpa-flex

所以我刚刚开始掌握灵活和模糊的逻辑。我想创建一个简单的聊天系统，根据你选择的对话，NPC 会改变他们说的话，但我想让它更加独特，并且它目前一直得到相同的输出。

```
rule mood_dialogue2
    if the_mood is hello
    then the_mood becomes 30 .

rule mood_dialogue3
    if the_mood is  'you`re an ogre?!'
    then the_mood becomes 50 . 
```

如您所见，输入了相同的数字，因此我想将这部分随机化，例如在 30 到 49 之间的对话 2 和 50 到 100 之间的对话 3。我在一些文档中看到的内容中尝试了这个

```
then the_mood becomes irand(25) + 1 . 
```

但我知道这不起作用，因为它实际上在 the_mood 中存储了`"irand(25) + 1"

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:23:57.067

尝试`rand`不`irand`

```
| ?- X is irand(25) + 1 .

! ----------------------------------------
! Error 50 : Function Not Defined
! Goal     : _36394 is irand(25) + 1

Aborted
| ?- X is rand(25) + 1 .
X = 13.1864792832639 
```

# sencha-touch - Sencha Touch 布局

> ID：15117674
> 
> 赞同：0
> 
> 时间：2013-02-27T16:50:43.953
> 
> 标签：sencha-touch, sencha-touch-2

下面是我们项目中一个视图的代码。我想要一个表单面板和一个 vbox 布局中的按钮。我想将按钮水平居中。

```
Ext.define('Coder.view.membership.Login', {
    extend: 'Ext.Container',
    xtype: 'membershiploginview',

    requires: ['Ext.field.Password'],

    config: {
        title: 'Membership',
        layout: {
            type: 'vbox',
            align: 'center',
            pack: 'center'
        },
        items: [
            {
                xtype: 'formpanel',
                items: [
                    { xtype: 'textfield', name: 'userName', label: 'User ID' },
                    { xtype: 'passwordfield', name: 'password', label: 'Password' }
                ],
                height: 300,
                flex: 1
            },
            { xtype: 'button', text: 'Login' }
        ]
    }
}) 
```

使用此配置，窗体面板垂直占用所有可用空间，但其中的任何控件均不可见。我可以看到该按钮水平居中，窗体面板结束。为什么我在窗体面板中看不到控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:59:33.143

在`vbox`布局中：

1.  `pack: center`将项目垂直放置在中间。

2.  `align: center`将项目水平放置在中间。

您的表单面板没有显示，因为您没有为表单指定任何宽度，因此您的表单显然会`width: 100%`作为默认值，因此您的配置`align: center`会发生冲突。

要使其正常工作，您应该删除该配置或为表单面板指定宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:32:21.543

而不是这段代码，

```
{ 
  xtype: 'button', 
  text: 'Login' 
} 
```

像这样使用它：

```
title   : 'Membership',            
items   : [
    {
        xtype   : 'formpanel',
        items: [
            { xtype: 'textfield', name: 'userName', label: 'User ID' },
            { xtype: 'passwordfield', name: 'password', label: 'Password' }
        ],
        height : 300
    },{
        layout : {
            type : 'vbox',
            align : 'center'
        },
        items : [{ 
            xtype: 'button', 
            text: 'Login',
            width : 100 
        }]
    }
] 
```

默认情况下，它将`layout:'auto'`按钮放在中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:53:25.700

你给登录按钮样式，如 margin-left 和 margin right

```
 {
                                xtype:'button',
                                ui:'decline',
                                style: 'font-size: .8em; border:#A4A4A4 solid 1px;border-radius: 6px; -moz-border-radius:6px ;-webkit-border-radius:6px ; margin-left: 20px; margin-right: 20px; height:40px',
                                html:'<font color="white">Sign In</font>',
                                action:'signIn'
                              }, 
```

# jquery - Fancybox2 通过添加 margin-right 来修改 CSS

> ID：15117676
> 
> 赞同：1
> 
> 时间：2013-02-27T16:50:45.323
> 
> 标签：jquery, css, firefox, fancybox-2

我试图在我的网站上使用fancybox2，当我使用fancybox 链接（Firefox）时，我的页面一直向右移动。根据我所读到的内容，我可以通过更改 fancybox css 来修复它，但我不会成功。

我有 ：

```
body{
    width: 1024px;
    margin: auto; !important;
} 
```

当使用fancybox时，它得到（从萤火虫看到）：

```
<body style="margin-right: 0px;"> 
```

我试图改变css行：

```
.fancybox-lock {
    overflow: auto;
} 
```

和

```
.fancybox-lock .fancybox-overlay {
    overflow: auto;
    overflow-y: scroll;
} 
```

但它不会解决问题。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:59:11.423

使用 !important 时，它应该与值并排，而不是在分号之后。

这是错误的：

```
margin: auto; !important; 
```

这是对的：

```
margin: auto !important; 
```

希望这能让您更接近解决方案。

# javascript - 在 Jquery DataTables 的所有页面上使表格行可点击

> ID：15117681
> 
> 赞同：1
> 
> 时间：2013-02-27T16:51:05.297
> 
> 标签：javascript, jquery-plugins, twitter-bootstrap, datatables

所以我有一个带有分页的dataTables插件的实现。当我单击表中的任何行时，我希望出现一个引导模式。到目前为止，当我单击第一页上的行时，我可以使模式正常工作。但是一旦我转到下一页，所有行都不可点击。

这是我到目前为止所拥有的：

```
 $(document).ready(function() {
        $("tr").click(function(){
            $('#myModal').modal('show');
        });
    }); 
```

我有一种感觉，这可以使用 DataTables API 函数来完成，但我的经验不足让我退缩了。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:55:58.923

查看此页面上的 fnGetData 示例

[http://www.datatables.net/api](http://www.datatables.net/api)

```
 // Row data
$(document).ready(function() {
  oTable = $('#example').dataTable();

  oTable.$('tr').click( function () {
    var data = oTable.fnGetData( this );
    // populate your modal with the data from data variable which is the data that the row contains
    //show your modal
  } );
} ); 
```

当您将数据保存在模式中并关闭它时，只需重新加载数据表...

你真的需要看一下api文档，一切都在那里..真的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T10:40:38.803

使用委托事件：

`$('#myTable tbody').on( 'click', 'tr', function () { ... } );`

有关详细信息，请参阅[http://datatables.net/faqs#events](http://datatables.net/faqs#events)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T21:25:19.040

由于实际上没有人发布最终答案，因此我正在跟进此问题，因为我遇到了同样的问题。

```
COS.coupon.table_columns_titles = new Array();
COS.coupon.table_columns_titles.push({"sTitle": "Code"});
COS.coupon.table_columns_titles.push({"sTitle": "Status"});
COS.coupon.table_columns_titles.push({"sTitle": "Date"});
COS.coupon.table_columns_titles.push({"sTitle": "","sClass": "hide"});

$j('#listcoupons').dataTable({
  "bProcessing":true,
  'bJQueryUI': true,
  'sPaginationType': 'full_numbers',
  'oLanguage': {'sSearch': 'Filter:', 'sEmptyTable': 'Processing...'},
  'aoColumns': COS.coupon.table_columns_titles,
  "sScrollX": "100%",
  "iDisplayLength": 10,
  "bAutoWidth": false
}); 
```

...

```
// So this is the on click. I'm referencing the tbody because it's there
// throughout all the pagination.
$j("table#listcoupons tbody").on("click", function(event) { 
```

...

```
// This is how I'm refering the specific item I wanted.
// Then I do get the id from the hidden column.
  $j(event.target).closest('tr').children('td').eq(1).text() 
```

整个点击事件看起来像这样。

```
$j("table#listcoupons tbody").on("click", function(event) {
    if ($j(event.target).closest('tr').children('td').eq(1).text() == 'Used') {
      // do some stuff/show a dialog
    } else {
      // do some other stuff/show a different dialog
    }
  }); 
```

# javascript - JavaScript 闭包 - 使用 ECMA 规范，请解释闭包是如何创建和维护的

> ID：15117687
> 
> 赞同：8
> 
> 时间：2013-02-27T16:51:24.953
> 
> 标签：javascript, closures, ecmascript-5, ecma262

我正在阅读有关[JavaScript 闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)的内容。我熟悉[Execution Contexts](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3)，如何维护[Lexical Environment](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2)，并且非常熟悉[Lexical Scoping](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping)。

我想知道JavaScript 中的闭包是*如何***创建**和**维护**的。有时我很难在不知道它实际上是如何做的*情况下掌握这些重要的概念。*我知道，根据维基百科，闭包是

> 是一个函数或对函数的引用以及引用环境——一个存储对该函数的每个非局部变量（也称为自由变量）的引用的表。

但我的问题是，我想知道*如何*根据[ECMA 规范](http://www.ecma-international.org/ecma-262/5.1/)创建和维护闭包。我*不是*在寻找闭包理论的高级解释，请在您的回答中参考 ECMA 规范。

注意：请不要认为这是重复的，除非答案解释了使用 ECMA 规范的关闭。同样，我对有人引用维基百科并举个例子不感兴趣，我想完全理解 JavaScript 是如何做到这一点的。（我[对 SO 的这个问题](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)很熟悉）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T18:33:29.570

根据维基百科的定义，如问题中所述，闭包是

> 是一个函数或对函数的引用以及引用环境——一个存储对该函数的每个非局部变量（也称为自由变量）的引用的表。

对如何维护执行上下文和词法环境的理解是已知的，这里的目标是了解何时返回函数，该引用环境是*如何维护/引用的？*

让我们开始。

在 ECMA 262 v 5 规范的第[8.6.2](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2)节中，它列出了ECMAScript 对象的*内部*属性。这里要指出的是表 9 中的 [[Scope]] 属性。根据该属性的描述，它被描述为

> 定义执行 Function 对象的环境的词法环境。在标准的内置 ECMAScript 对象中，只有 Function 对象实现 [[Scope]]。

正如我们将看到的，函数对象的 [[Scope]] 属性将始终设置为父级的词法环境。我们在[13.2](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2)节中提到了这一点，该节讨论了创建函数对象的过程。（请注意：此上下文中的函数对象是指本机 ECMAScript 对象，而不是通过代码可访问的函数对象）。

创建函数时，它会将内部 [[Scope]] 属性设置为正在运行的执行上下文的 VariableEnvironment、LexicalEnvironment 或 Global Environment，具体取决于函数是[函数声明](http://www.ecma-international.org/ecma-262/5.1/#sec-13)、[函数表达式](http://www.ecma-international.org/ecma-262/5.1/#sec-13)还是通过[Function 构造函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.2.1)创建的。

当控制权交给全局代码时，以及当控制权进入函数代码时，声明绑定实例化作为初始化执行上下文的一部分发生。声明绑定实例化的一部分是通过创建 13.2 节中提到的函数对象来绑定当前上下文范围内的函数声明。下面的示例显示了这一点：

例如

```
 // The global execution context has already been initialized at this stage.
  // Declaration binding instantiation has occurred and the function 
  // foo is created as a new native object with a [[Scope]] property 
  // having the value of the global execution context's VariableEnvironment
  function foo() {
    // When foo is invoked, a new execution context will be created for 
    // this function scope.  When declaration binding instantiation occurs, 
    // bar will be created as a new native object with a [[Scope]] property
    // having the value of the foo execution context's VariableEnvironment
    function bar() {
      }
    bar(); // Call bar
  }
  foo(); 
```

[另一件事是在进入函数时](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.3)进入/创建执行上下文时发生的过程。以下是所发生情况的摘要。

1.  通过内部调用 NewDeclarativeEnvironment 创建一个新的词法环境类型。函数的 [[Scope]] 属性将设置为*外部*引用，以便维护“词法环境”链。（请记住，已设置 [[Scope]] 属性并将始终是父级的词法范围。此外，词法环境链是我编造的一个短语，该概念指的是通过通过外部引用遍历词法环境直到标识符来解析标识符可以解决。）
2.  将 LexicalEnvironment 和 VariableEnvironment 设置为步骤 1 中新创建的 Lexical Environment。
3.  [执行声明绑定实例化。](http://www.ecma-international.org/ecma-262/5.1/#sec-10.5)

知道函数通过内部 [[Scope]] 属性维护对其父词法环境的引用，我们现在可以看到闭包是如何工作的。

```
<script>
// foo.[[Scope]] was set to the global environment during the global execution context initialization
  function foo() {
    var x = 1;
    // bar.[[Scope]] was set to foo's lexical environment during foo's execution context initialization
    function bar() {
      var y = 2;
      alert(x + y);
    }
    return bar;
  }

   var dummy = foo(); // Assign variable binding "dummy" to a reference of the "bar" function.
   dummy(); // Calls the "bar" function code.  The reference still has it's [[Scope]] property set, thus the identifier look-ups work as expected when resolving the identifiers.
   alert(dummy.name); // Alerts "bar";

</script> 
```

因此，要回答这个问题，函数的父级 LexicalEnvironment 通过函数的内部 [[Scope]] 属性进行持久化。请注意，函数内的局部变量可以在函数运行时解析，只有“自由变量”需要跟踪，并且由 [[Scope]] 属性完成。

**注意：** 如果我的信息不正确，请在下方评论。

# java - 如何以编程方式从任何浏览器获取网页上所有元素的 xpath

> ID：15117689
> 
> 赞同：1
> 
> 时间：2013-02-27T16:51:28.537
> 
> 标签：java, javascript, xpath, ui-automation, domxpath

我是 Web UI 自动化的新手，作为其中的一部分，我们需要获取所有元素（如标签、按钮、超链接、文本框、复选框、单选按钮、图像等）的 Xpath 并将其存储到文件中。UI 脚本也可以在 IE、FireFox 和 Chrome 等不同的浏览器中执行。

有人可以帮助我提供有关如何在短时间内轻松获取所有元素的 Xpath 的建议或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:55:40.743

1.  创建一个Java程序连接到URL，在y的用户代理中，注入代码，设置你要模拟的浏览器的用户代理。
2.  使用 HTML Dom 解析器，如 jtidy 或任何其他将输入流解析为 HTML Dom
3.  现在您可以找到页面上存在的所有不同元素
4.  那么你的 xpaths 将是 //elementname

# xml - 在 XPath 1.0 中选择多个节点下属性的最小值/最大值

> ID：15117692
> 
> 赞同：2
> 
> 时间：2013-02-27T16:51:38.600
> 
> 标签：xml, xpath

考虑以下 XML 结构：

```
<a>
<b>
    <c>
        <d x="1"/>
        <d x="2"/>
        <d x="3"/>
        <d x="3"/>
        <d x="4"/>
    </c>
</b>
<b>
    <c>
        <d x="1"/>
        <d x="1"/>
        <d x="2"/>
        <d x="3"/>
        <d x="4"/>
        <d x="5"/>
        <d x="5"/>
    </c>
</b>
<b>
    <c>
        <d x="1"/>
        <d x="2"/>
        <d x="3"/>
        <d x="3"/>
        <d x="4"/>
        <d x="5"/>
        <d x="5"/>
    </c>
</b> 
```

我想要一个 XPath 1.0 语句来给我@x 的最小值和最大值？到目前为止，我至少有以下内容：

//a/b/c/d[not(preceding-sibling::d/@x <= @x) and not(following-sibling::d/@x <= @x)]/@x

这是接近，但没有雪茄:-(

非常感谢任何帮助！

谢谢，J

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T17:11:40.553

要获取最大值，请查找所有没有较小属性值的属性值。如果有多个结果，取第一个 - 它们必须相等。

```
(//@x[not(. < //@x)])[1] 
```

对于最小值，只需替换`<`为`>`。

*出于完整性原因：如果您的 XPath 引擎支持 XPath 2.0（或更好），只需使用可能会更快且更具可读性的`max(//@x)`尊重。`min(//@x)`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T11:48:34.267

我解决了类似的问题，我在单个嵌套的 for-each 循环中处理`<b>`和`<c>`元素，并且我想要获取每个部分中具有最大值的第一个元素的**内容**。我使用了以下代码：`<d>``x`

```
<xsl:for-each select="/a/b">
  <!-- do something -->
  <xsl:for-each select="./c">
    <!-- do something -->
    <xsl:value-of select="((./d/@x[not(. &lt; ../../d/@x)])[1])/../." /> 
  </xsl:for-each>
</xsl:for-each> 
```

# android - 是否可以在 Android 中扩展字符串资源查找？

> ID：15117694
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:51:40.033
> 
> 标签：android, xml, string, resources, extending

我有一个多语言应用程序，它使用标准 xml 文件来提供不同语言的字符串值。

```
...
res/values/strings.xml
res/values-es/strings.xml
res/values-pt/strings.xml
... 
```

我想要做的是在查看标准 xml 文件之前覆盖 Android 的正常行为以在其他地方寻找资源。

因此，当代码调用*getResources().getString()*时，自定义代码会在退回到标准 getString 实现之前查看替代资源文件。

有什么办法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:53:06.447

> 有什么办法可以做到这一点？

不。对于您自己的 调用`getString()`，您可以将这些调用包装在您自己的代码中以检查“其他地方”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:15:48.003

您打算实现的部分是不可能的，因为默认情况下 Android 只会在 res 文件夹中查找所需资源。

# php - 尝试使用多级 CI 控制器结构

> ID：15117695
> 
> 赞同：0
> 
> 时间：2013-02-27T16:51:44.320
> 
> 标签：php, codeigniter, codeigniter-2

控制器结构（admin.php 是我的控制器）：

```
controllers/menu/admin/admin.php 
```

当我打电话时，`http://localhost/project/index.php/menu/admin/admin`我收到`404 Page Not Found The page you requested was not found.`错误消息。

我已经按照[这个](http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/)示例进行操作，但仍然无法正常工作。我正在使用 CI2

知道为什么吗？

注意：以防万一，视图和控制器工作正常。那里没问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:07:09.673

[这个例子](http://ellislab.com/forums/viewthread/190563/)解决了这个问题。

# iphone - 自定义 UITableViewCells 未在 UITableView 上重用

> ID：15117698
> 
> 赞同：3
> 
> 时间：2013-02-27T16:51:58.340
> 
> 标签：iphone, ios, objective-c, uitableview

对此似乎有很多问题，但我无法使用其他人的答案，所以希望有人能回顾一下我是如何做到这一点的。我正在尝试使用。我有两个自定义 UITableViewCells，它们现在只有一个 BOOL 属性，这就是样式的方式。

在我的`cellForRowAtIndexPath`方法中，根据返回的数据类型，我正在为我的单元格设置样式。如果数据是“月”标题，则它是一个细长的单元格，如果它是“新闻项目”，它将是一个更大的白色单元格。

![在此处输入图像描述](../Images/a57e91a4aa6f50d07b25b293e00756b3.png)

当表格加载时，一切看起来都很好，但是如果我向下滚动以创建更多单元格然后向上滚动，单元格将被重新创建，最终滚动速度变慢，因为我的内存不足。

当我设置断点时，`dequeueReusableCellWithIdentifier`总是返回 nil，所以我的单元格永远不会被重复使用，这似乎是一个问题。

在这张图片中，您可以看到单元格彼此堆叠并弄乱了：

![在此处输入图像描述](../Images/148980f8165bd1a585b391cb806f43f4.png)

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *NewsCellIdentifer = @"NewsCellIdentifier";
    static NSString *MonthCellIdentifier = @"MonthCellIdentifier";

    NSUInteger row = [indexPath row];
    NewsItem *item = [self.newsArray objectAtIndex:row];

    if (item.IsMonth == YES)
    {
        NewsMonthUITableViewCell *cell = [self.mytableView dequeueReusableCellWithIdentifier:MonthCellIdentifier];

        if (cell == nil)
        {
            cell = [[NewsMonthUITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MonthCellIdentifier];
        }

        // This handles any other "date" cells to allow for different spacing styles.
        if (item.IsMonth)
        {
            UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(0, 10, 400, 20)];
            av.backgroundColor = [UIColor clearColor];
            av.opaque = NO;
            av.image = [UIImage imageNamed:@"month-bar-bkgd.png"];
            UILabel *monthTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 150, 20)];;
            CGFloat font = 11.0f;
            monthTextLabel.font = [BVFont HelveticaNeue:&font];
            monthTextLabel.backgroundColor = [UIColor clearColor];
            monthTextLabel.font = [BVFont HelveticaNeue:&font];
            monthTextLabel.textColor = [BVFont WebGrey];
            monthTextLabel.text = item.Title;

            cell.backgroundColor = [UIColor clearColor];
            [cell.contentView addSubview:av];
            [cell.contentView addSubview:monthTextLabel];
        }

        return cell;

    }
    else
    {
        NewsUITableViewCell *cell = [self.mytableView dequeueReusableCellWithIdentifier:NewsCellIdentifer];

        if (cell == nil)
        {
            cell = [[NewsUITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:NewsCellIdentifer];
        }

        cell.contentView.backgroundColor = [UIColor clearColor];

        UIView *whiteRoundedCornerView = [[UIView alloc] initWithFrame:CGRectMake(10,10,300,100)];
        whiteRoundedCornerView.backgroundColor = [UIColor whiteColor];
        whiteRoundedCornerView.layer.masksToBounds = NO;
        whiteRoundedCornerView.layer.cornerRadius = 3.0;
        whiteRoundedCornerView.layer.shadowOffset = CGSizeMake(-1, 1);
        whiteRoundedCornerView.layer.shadowOpacity = 0.5;

        [cell.contentView addSubview:whiteRoundedCornerView];
        [cell.contentView sendSubviewToBack:whiteRoundedCornerView];
        [cell.contentView addSubview:[self NewsItemThumbnailView:item]];
        [cell.contentView addSubview:[self NewsItemTextView:item]];
        [cell.contentView addSubview:[self NewsItemCornerIconIndicatorView:item]];

        return cell;

    }

    return nil;

} 
```

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:26:48.033

当您使用没有动态原型的情节提要时，您需要将创建和添加子视图的代码放在`if (cell==nil)`块内。否则，每次重新使用 tableview 单元格时，都会再次添加所有子视图。

展望未来，我的建议是使用带有动态原型（带有子类 UITableViewCells）的 Storyboard，并在 IB 的单元格中进行自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:57:21.013

将您的单元格转换为 Customcells，并仅使用 tableView 参见下面的示例。

```
 NewsMonthUITableViewCell *cell = (NewsMonthUITableViewCell *)[tableView dequeueReusableCellWithIdentifier:MonthCellIdentifier];
  NewsUITableViewCell *cell =(NewsUITableViewCell*) [tableView dequeueReusableCellWithIdentifier:NewsCellIdentifer]; 
```

使用动态原型单元，对于原型单元，不需要单元分配和检查正确的单元标识符。

在情节提要上创建两个原型单元格并为它们提供不同的单元格标识符，在您的情况下为 NewsCellIdentifer 和 MonthCellIdentifier。确保 NewsCellIdentifer 的拼写，因为您错过`i`了 NewsCellIdentifer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:32:38.597

有趣的问题。你说你的细胞出队返回为零。这是否已通过断点或日志确认？或者这仅仅是从您发布的图像中扣除的？

在我看来，可能还有另一个罪魁祸首是电池相互堆叠而不被重复使用的问题。

我可以看到每次滚动单元格时都会创建 whiteRoundedCornerView 并将其添加到单元格中。即使这不是你的问题的原因，它绝对是一个问题。您没有正确创建单元格。您必须将此代码放入 if (cell == nil) 块中。事实上，几乎所有位于块之外的代码都需要进入它。然后任何设置文本或图像值的代码都应该在块之外。我看到有人已经提出了这个建议，但它没有让你满意。我只是再次强调它仍然是错误的，如果你想修复你的应用程序，你需要修复它。（顺便说一句，漂亮的应用程序）。

另外，如果我可以对您代码的其他方面提出建议。您对标题进行了自定义编码，并且没有使用实际的部分标题。这对我来说太奇怪了。此外，您还有一个多余的“if (item.isMonth)”。由于一个已经在另一个的块中，它总是一个月份的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T18:55:58.843

我在 iOS 7 和情节提要上遇到了同样的问题，而在旧 Xcode-SDK 版本上使用相同的代码我从来没有遇到过这个问题，并且尝试了很多来自 stackoverflow 的建议，我无法修复它，你猜怎么着？！Apple 的[TableView Programming Guide](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)有详细解释的指南。甚至没有必要使用`cell==nil`.

因此，我将说明放在这里，希望对其他人有所帮助：

要使用可以正确重用的故事板创建自定义 tableview 单元格，您可以采用两种不同的方法。我个人更喜欢第一个更直接的解决方案，但我将两种解决方案都放在这里。

***第一种方法***

1.  使用 Master-Detail Application 模板创建一个项目并选择 Use Storyboards 选项。
2.  在故事板画布上，选择主视图控制器。
3.  在身份检查器中，验证 Class 是否设置为自定义 MasterViewController 类。
4.  选择主视图控制器内的表视图。
5.  在属性检查器中，确认内容弹出菜单设置为动态原型。
6.  选择原型单元格。
7.  在“属性”检查器中，在“样式”弹出式菜单中选择“自定义”。
8.  在标识符文本字段中输入重用标识符。这与您在消息中发送到表视图的重用标识符相同`dequeueReusableCellWithIdentifier:`。
9.  在“附件”弹出菜单中选择“披露指示器”。
10.  将对象从库中拖到单元格上。在此示例中，拖动两个标签对象并将它们放置在单元格末端附近（为附件视图留出空间）。
11.  选择对象并设置它们的属性、大小和自动调整大小特征。

为该过程的编程部分设置的一个重要属性是每个对象的`tag`属性。`View`在 的部分中找到此属性，`Attributes inspector`并为每个对象分配一个唯一的整数。

现在编写您通常编写的代码来获取表视图的数据。（对于本例，您需要的唯一数据是每个单元格的行号。）实现数据源方法 tableView:cellForRowAtIndexPath: 以从原型创建一个新单元格并用数据填充它，方式类似于以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

    UILabel *label;

    label = (UILabel *)[cell viewWithTag:1];
    label.text = [NSString stringWithFormat:@"%d", indexPath.row];

    label = (UILabel *)[cell viewWithTag:2];
    label.text = [NSString stringWithFormat:@"%d", NUMBER_OF_ROWS - indexPath.row];

    return cell;
} 
```

这段代码有几个方面需要注意：

*   您分配给原型单元格的字符串标识符与您传递给表格视图的字符串相同`dequeueReusableCellWithIdentifier:`。
*   **因为原型单元是在故事板中定义的，所以该`dequeueReusableCellWithIdentifier:`方法总是返回一个有效的单元。您无需根据 nil 检查返回值并手动创建单元格。**
*   **代码通过调用获取单元格中的标签`viewWithTag:`，并传入它们的标签整数。然后它可以设置标签的文本内容。**

***第二种方法***

如果您不想使用标签，您可以使用另一种方法来设置单元格中的内容。`UITableViewCell`为要设置的对象定义一个具有插座属性的自定义子类。在情节提要中，将新类与原型单元相关联，并将出口连接到单元中的相应对象。

*为自定义单元格内容使用插座*

1.  将名为 MyTableViewCell 的 Objective-C 类添加到您的项目中。
2.  将以下代码添加到接口中`MyTableViewCell.h`：

    @interface MyTableViewCell : UITableViewCell

    @property (nonatomic, weak) IBOutlet UILabel *firstLabel; @property（非原子，弱）IBOutlet UILabel *secondLabel; @结尾

3.  将以下代码添加到中的实现中`MyTableViewCell.m`：

    @synthesize 第一个标签，第二个标签；

4.  将以下代码行添加到实现数据源的源文件中：

    #import "MyTableViewCell.h"

5.  使用 将`Identity inspector`原型单元的 Class 设置为`MyTableViewCell`。

6.  使用 Connections 检查器将原型单元中的两个出口连接到它们相应的标签。 ![在此处输入图像描述](../Images/967990d23179080a3a8a7ba1273d3e80.png)

7.  实现数据源方法`tableView:cellForRowAtIndexPath:`

    ```
    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

    cell.firstLabel.text = [NSString stringWithFormat:@"%d", indexPath.row];
    cell.secondLabel.text = [NSString stringWithFormat:@"%d", NUMBER_OF_ROWS - indexPath.row];

    return cell;
    } 
    ```

代码使用访问器方法访问单元格中的标签（此处使用点表示法）。然后代码可以设置标签的文本内容。

# jsf - 垂直对齐

> ID：15117700
> 
> 赞同：-1
> 
> 时间：2013-02-27T16:52:07.020
> 
> 标签：jsf, jsf-2

我有这张图片：

```
<h:graphicImage library="images" name="lighton.png" height="22" rendered="#{mController.dothat}" /> 
```

我需要垂直对齐到一个字段。

手动添加（例如通过萤火虫）**align="absmiddle"**到生产的`<img/>`标签确实有效。然而，将它添加到 graphicsImage 标记中，什么也没做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T18:17:25.500

自 1998 年的 HTML 4.01 起，样式/定位元素/属性（如`font`、`center`、`align`、`bgcolor`等）已被**弃用**。让自己保持最新状态。您应该为此使用 CSS。

通过内联样式将 CSS`vertical-align`属性设置为 （不好的做法）`middle`

```
<h:graphicImage ... style="vertical-align: middle;" /> 
```

或通过元素或父元素上的样式类（推荐做法）

```
<h:outputStylesheet name="css/style.css" />
...
<h:graphicImage ... styleClass="someSensibleClassName" /> 
```

之内`/resources/css/style.css`

```
.someSensibleClassName {
    vertical-align: middle;
} 
```

# google-drive-api - 使用 Google Drive API (Python) 创建目录

> ID：15117702
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:08.203
> 
> 标签：google-drive-api

我正在尝试使用 Python API 在 Google Drive 中创建一个文件夹。这是我写的函数

```
def testCreateDir(self):
    try:
        media_body = MediaFileUpload("ALLFS", mimetype='application/vnd.google-apps.folder', resumable=True)
        body = {
                'title': "ALLFS",
                'mimeType': "application/vnd.google-apps.folder"
        }
        root_folder = self._service.files().insert(body=body, media_body=media_body).execute()

        return root_folder['id']
    except errors.HttpError,error:
        print 'An error occured: %s' % error
        return None 
```

这是跟踪：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "allfs/service/gdrive.py", line 63, in testCreatedir
    media_body = MediaFileUpload("ALLFS", mimetype='application/vnd.google-apps.folder',      
resumable=True)
  File "/Library/Python/2.7/site-packages/oauth2client/util.py", line 120, in  
positional_wrapper
    return wrapped(*args, **kwargs)
  File "/Library/Python/2.7/site-packages/apiclient/http.py", line 419, in __init__
    fd = open(self._filename, 'rb')
IOError: [Errno 21] Is a directory: 'ALLFS' 
```

其他一切都在工作：阅读，写作，搜索....有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T20:51:52.813

创建文件夹时无需插入任何媒体正文。删除实例化 MediaFileUpload 的行，并且不要将 media_body 传递给插入请求。

# javascript - 如何为每列设置单独的柱形图颜色？

> ID：15117705
> 
> 赞同：1
> 
> 时间：2013-02-27T16:52:09.877
> 
> 标签：javascript, dojox.charting

我在 Dojo 1.4 中生成一个柱形图，我想根据它表示的与阈值相关的值为各个列着色。例如，如果列的值为 5 或更少，则应为绿色填充。如果是 10 或更多，则应为红色填充。

我可以让颜色在系列级别工作，但我希望同一系列中的各个数据点具有这种可变的配色方案。这可以做到吗？有没有更好的方法来解决问题？

这是到目前为止我的应用程序生成的代码：

```
var chart1 = new dojox.charting.Chart2D("simplechart");
chart1.addPlot("default", {type: "Columns", gap:5});
chart1.addPlot("target", {type: "Lines"});
chart1.addAxis("x",
    {labels: [{value: 1, text: "Aug '12"},
    {value: 2, text: "Sep '12"},
    {value: 3, text: "Oct '12"},
    {value: 4, text: "Nov '12"},
    {value: 5, text: "Dec '12"},
    {value: 6, text: "Jan '13"}],
    minorTicks:false});
chart1.addAxis("y", {vertical: true, min: 0, max: 9});
chart1.addSeries("Data Series", [6.9,7.7,1,5.5,7.6,8.1]);
chart1.addSeries("Target Series", [6,6,6,6,6,6], {plot:"target"});

chart1.render(); 
```

我希望“数据系列”中的各个点具有可变的颜色值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:20:57.153

您可以使用“StackedColumns”来做到这一点。这个想法是您可以为每种颜色创建一个系列。例如，值 <=5 的“绿色”系列，值 >5 和 <=10 的其他系列以及值 >10 的“红色”系列。

然后，您必须评估您拥有数据的数组中的每个值，并将该值放入相应的系列中，如下所示：

```
 for(var i=0; i<chartData.length;i++){
        if(chartData[i]<=5)
            fill("green",chartData[i]);
        else if(chartData[i]>5 && chartData[i]<=10)
            fill("yellow",chartData[i]);
        else
            fill("red",chartData[i]);
    } 
```

请参阅此[jsfiddle](http://jsfiddle.net/noeliasfranco/fHvyD/)以查看使用 dojo 运行的示例

# windows - Windows Explorer 复制时间基准

> ID：15117707
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:10.407
> 
> 标签：windows, file, batch-file, benchmarking

我正在尝试对我们公司的操作系统进行基准测试，其中一个步骤是计算用户在资源管理器下仅使用 ctrl-c/ctrl-v 将某些内容复制到某处所需的时间。因此，我想知道如何将该操作批量编写脚本以多次运行，以便获得时间执行，特别是如何使复制过程弹出窗口出现。我认为“rundll32 shell32.dll”以某种方式涉及，但我不知道如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:16:10.077

你可以用 vbscript 做到这一点。[请参阅Folder.CopyHere 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787866%28v=vs.85%29.aspx)页面上的脚本示例。有趣的是，该`Folder.CopyHere`方法还可以将文件放入 zip 文件夹。看[一个例子](https://stackoverflow.com/a/15028897/1683264)（如果没有其他原因，只是想看看另一个真实世界的例子`CopyHere`）。与`scripting.filesystemobject`复制函数不同，`shell.application`copyhere 函数使用 Windows UI API，如果存在则提示替换，并显示文件复制对话框，就像用户拖放一样。

`".\Ubi Caritas.mp3"`这是一个复制到100 次的示例 benchmark.vbs `%temp%`，然后显示操作所用的时间（以毫秒为单位）（具有 4 位精度）。

```
set wShl = CreateObject("Wscript.Shell")
tmp = wShl.ExpandEnvironmentStrings("%TEMP%")
set wShl = nothing
set oShl = CreateObject("shell.application")
set fso = CreateObject("Scripting.FileSystemObject")

set srcfile=fso.GetFile("Ubi Caritas.mp3")
dest=tmp & "\" & srcfile.Name

wscript.Echo "Testing copy speed from " & srcfile.Name & " (" & srcfile.size & " bytes) to " & dest

' single copy
msb4 = Timer
call doCopy
msafter = Timer
wscript.Echo "1 copy took " & FormatNumber(msafter - msb4, 4, -2, -2, false) & " seconds."

' 100 copies
msb4 = Timer
for i = 0 to 100
    call doCopy
next
msafter = Timer
wscript.Echo "100 copies took " & FormatNumber(msafter - msb4, 4, -2, -2, false) & " seconds."

set destfile = nothing
set oShl = nothing
set fso = nothing

sub doCopy
    oShl.namespace(tmp).copyhere(srcfile.Name), 16
    if isEmpty(destfile) then set destfile = fso.getFile(dest)
    do until destfile.size = srcfile.size
        wscript.sleep 10
    loop
    destfile.delete
end sub 
```

示例输出：

```
C:\Users\me\Desktop>cscript /nologo benchmark.vbs
Testing copy speed from Ubi Caritas.mp3 (2929371 bytes) to C:\Users\me\AppD
ata\Local\Temp\Ubi Caritas.mp3
1 copy took 0.0664 seconds.
100 copies took 4.0430 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:06:45.590

你可以

*   直接从您的应用程序中使用**Windows 用户界面自动化**API ( [http://en.wikipedia.org/wiki/Microsoft_UI_Automation )；](http://en.wikipedia.org/wiki/Microsoft_UI_Automation)

*   或者您可以创建一个**AutoIt**脚本 ( [http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/) )

# android - 为我的 Android VoIP 应用程序部署哪个 SIP 服务器？

> ID：15117709
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:14.453
> 
> 标签：android, sip, voip, instant-messaging, lync

我正在使用可用的 Android SIP 堆栈构建一个支持 VoIP/IM/Presence 的 android 应用程序。作为我项目的一部分，我还需要部署一个 SIP 服务器以启用上述 SIP 功能。

借助所有可用的资源和丰富的在线源代码，开发 Android 应用程序似乎很容易。但是，我严重坚持部署 SIP 服务器与应用程序通信。

我用 OpenSIPS 试验了大约一个月，但它似乎比我的水平高了一点。特别是它是在linux环境下运行的。

1.  对于其他易于部署和易于处理的 SIP 服务器有什么建议吗？

2.  我还没有对此进行过广泛的研究，但是您认为 Microsoft Lync Server 为此目的如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:14:42.507

正如 Cthulu 在评论中建议的那样，我建议尝试[Asterisk](http://www.asterisk.org/)。只需配置几个文件（sip.conf 和 extensions.conf IIRC）即可启动并监听呼叫。

还有一本很棒的免费书籍，可以在刚开始时帮助了解术语和配置。这本书可以[在线](http://www.asteriskdocs.org/)阅读全文。您也可以[从 O'Reilly 下载 PDF 版本](http://cdn.oreilly.com/books/9780596510480.pdf)。

Asterisk 也有许多风格，它们的界面有些简化，使第一次设置更容易。[AsteriskNow](http://www.asterisk.org/downloads/asterisknow)可以直接从 Digium（负责 Asterisk 项目的公司）下载。如果您将来要做更多的 SIP 工作，使用“真正的”Asterisk 可能是值得的，但如果这是一次性的，请尝试 AsteriskNow。

另一个要研究的主要项目是[Freeswitch](http://www.freeswitch.org/)，尽管我发现 Asterisk 设置更简单一些。

# php - URL中的文字在index.php/之后有什么含义

> ID：15117712
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:23.283
> 
> 标签：php, url, url-routing

我想知道在 index.php/ 之后 URL 中的文本有什么特殊含义所以我会有一个类似 www.site.com/index.php/sometext 的地址，它是被解析为 GET 参数还是其他什么。

我正在开发一个供我个人使用的 PHP 框架。我要解决的问题是 URL 路由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:55:05.187

> 我想知道在 index.php/ 之后 URL 中的文本有什么特殊含义

那里没有*内在*的特殊含义。特殊含义在 first`?`和 first 之后被分配`#`。

也就是说，将针对`/index.php`and运行相同的脚本`/index.php/foo/bar/baz`，并且请求的完整 URL 将通过 提供`$_SERVER`，因此脚本可以为其添加自己的特殊含义。

请参阅`$_SERVER['REQUEST_URI']`和`$_SERVER['PATH_INFO']`了解一些有趣的内容。`print_r`上`$_SERVER`也是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:56:09.407

大多数框架使用之后的文本`index.php`来路由请求，而不必依赖丑陋的查询（例如：）`?page=foo`。因此，例如删除`index.php`一些`.htaccess`规则将提供一种拥有漂亮网址的方法：`site.com/foo/bar`. 后面的部分`index.php`可以通过`$_SERVER['PATH_INFO']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:56:48.487

之后的路径在`/index.php`您的`index.php`代码中可用：

```
 $_SERVER["PATH_INFO"] 
```

例如对于以下网址`http://domain.com/index.php/nice/url`：

```
$_SERVER["PATH_INFO"]=/nice/url 
```

该技术用于在 PHP 中创建干净/漂亮的 URL，**而无需任何 .htaccess 支持**。

# ios - xCode cocoa: MBProgressHUD 或 ZAActivityBar 在一处仅在执行功能后出现，但应在

> ID：15117714
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:30.767
> 
> 标签：ios, cocoa-touch, progress-bar, mbprogresshud

我尝试在我的可可项目中使用**MBProgressHUD**或**ZAActivityBar**作为**进度条。**一切都很好，但在一个地方，这个**进度条视图**仅在单例类执行功能后出现，但应该在此期间出现。

```
-(IBAction)importButtonClicked:(id)sender
{
    //[ZAActivityBar showSyncWithStatus:NSLocalizedString(@"MBProgressHUDLabel", nil) forAction:@"importButtonClicked"];
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];

    int count=0;
    count=[[CoreDataHelper helperCoreDataHelper] saveImportedFriends:_importedFriendsDictionary withOnlyDate:_onlyDateSwitcher withRewrite:(int)_rewriteSwitcher];

    //[ZAActivityBar dismissSyncForAction:@"importButtonClicked"];
    [MBProgressHUD hideHUDForView:self.view animated:YES]; 

} 
```

CoreDataHelper.m

```
-(int)saveImportedFriends:(NSMutableSet*)set withOnlyDate:(int)withDate withRewrite:(int)rewrite
{
    int count=0;
    for(FriendsForImport* friendsForImport in set)
    {
        if((withDate==1 && friendsForImport.birthday.length>0) || withDate==0)
        {
            Friends *friendsExist=[self checkFriendAlreadyExist:friendsForImport];
            if((friendsExist.lastName.length>0 || friendsExist.firstName.length>0) && rewrite==0)
                continue;
            else if((friendsExist.lastName.length>0 || friendsExist.firstName.length>0) && rewrite==1)
                [self deleteFriendAlreadyExist:friendsExist];

            UIImage *image;

            if([friendsForImport.importFrom intValue]==1)
            {
                image = [[UIImageHelper helper] getUIImageFromAddressBookContactId:[friendsForImport.uid integerValue]];
            }
            else
                image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:friendsForImport.photoPath]]];

            NSString *imageName=@"";

            if(image.size.height>0)
                imageName=[[UIImageHelper helper] saveImage:[[UIImageHelper helper] resizedImage:image withRect:CGRectMake(0, 0, kAvatarSize, kAvatarSize)]];

            Friends *friends= (Friends *)[NSEntityDescription insertNewObjectForEntityForName:@"Friends" inManagedObjectContext:_managedObjectContext];

            friends.lastName=friendsForImport.lastName;
            friends.firstName=friendsForImport.firstName;
            friends.uid=[NSString stringWithFormat:@"%@",friendsForImport.uid];
            friends.birthday=[[CoreDataHelper helperCoreDataHelper] properDateString:friendsForImport.birthday];
            friends.alarm=[NSNumber numberWithInt:1];
            friends.important=NO;
            friends.photoPath=imageName;
            friends.importFrom=friendsForImport.importFrom;
            friends.importDate=[NSDate date];

            //NSLog(@"friends %@",friends);

            NSError *error = nil;
            if (![_managedObjectContext save:&error]) {
                NSLog(@"Error in adding a new bank %@, %@", error, [error userInfo]);
                abort();
            }
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:01:25.613

您的`-saveImportedFriends:withOnlyDate:withRewrite:`方法阻塞了主线程，因此进度视图永远不会变得可见。

您应该更改您的逻辑，以便该方法可以在后台异步执行其任务。因为您使用托管对象上下文来插入并最终保存导入的朋友，所以您不能只将代码包装在`dispatch_async()`.

这个相关的答案应该让你走上正轨：[https ://stackoverflow.com/a/2141381/322548](https://stackoverflow.com/a/2141381/322548)

**编辑：**
您不应该在`-save:`每次将新朋友添加到托管对象上下文时调用，顺便说一句。只在与所有朋友结束时调用一次就可以了。

# c++ - 在类默认构造函数中初始化一个 2x2 矩阵

> ID：15117717
> 
> 赞同：3
> 
> 时间：2013-02-27T16:52:46.337
> 
> 标签：c++, class, matrix, default-constructor

我正在尝试在 C++ 中创建一个 2x2 矩阵类，并希望通过默认构造函数将矩阵初始化为单位矩阵。我的课是：

```
class Matrix2x2
{
public:
    Matrix2x2();
    void setVal(int row, int col, double newVal);

private:
    double n[2][2];
};

void Matrix2x2::setVal(int row, int col, double newVal)
{
n[row][col] = newVal;
} 
```

我尝试了几个不同的构造函数，但没有一个能做我想要的。

```
Matrix2x2::Matrix2x2(): setVal(0,0,1), setVal(0,1,0), setVal(1,0,0), setVal(1,1,1)
{  } 
```

和

```
 Matrix2x2::Matrix2x2(): n[0][0](1), n[0][1](0), n[1][0](0), n[1][1](1)
{  } 
```

我意识到这可能只是某个地方的一个简单错误，但我似乎找不到它，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:00:33.190

您可以使用数组聚合：

```
class Matrix2x2 {
public:
    Matrix2x2() : n({{3,1},{4,7}}) {
    }
    void setVal(int row, int col, double newVal);
private:
    double n[2][2];
}; 
```

[ideone 上的演示。](http://ideone.com/c39kyN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:02:17.427

在 C++11 中：

```
Matrix2x2::Matrix2x2(): n{{1,0},{0,1}} {} 
```

从历史上看，您无法在初始化列表中初始化数组，因此如果您停留在过去，那么您必须在构造函数主体中分配值：

```
Matrix2x2::Matrix2x2()
{
    n[0][0] = 1;  // or setVal(0,0,1) if you prefer
    n[0][1] = 0;
    n[1][0] = 0;
    n[1][1] = 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:59:30.883

> I'm trying to create a 2x2 matrix-class in C++ and want to initialize the matrix to an identity matrix through the default constructor.

```
//constructor (inside class)
Matrix2x2()
{
    n[0][0] = 1.0;
    n[1][1] = 1.0;
    n[0][1] = 0;
    n[1][0] = 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T17:01:54.497

或者像这样

```
Matrix2x2::Matrix2x2()
{  
    setVal(0,0,1);
    setVal(0,1,1);
    setVal(1,0,1);
    setVal(1,1,1);
} 
```

# c# - 如何验证 Excel 工作表名称和 Excel 列

> ID：15117718
> 
> 赞同：0
> 
> 时间：2013-02-27T16:52:46.120
> 
> 标签：c#, asp.net

******我有 Excel 工作表名称 xyz.xls 我能够验证 FileUploaded 只能是 .xls 扩展名。现在，我想检查 Xls 的 ColumnsName 是否必须与数据库列匹配...OtherWise Display error.. Excel 工作表列必须是.. [st_id],[st_rollno],[st_name],[branch_name],[sem_no ],[batch_year] *** *****

 **```
 protected void ShowGridView()
    {

        if ((txtFilePath.HasFile))
        {

            OleDbConnection conn = new OleDbConnection();
            OleDbCommand cmd = new OleDbCommand();
            OleDbDataAdapter da = new OleDbDataAdapter();
            DataSet ds = new DataSet();
            string query = null;
            string connString = "";
            string strFileName = txtFilePath.FileName;
            //string strFileName = DateTime.Now.ToString("ddMMyyyy_HHmmss");
            string strFileType = System.IO.Path.GetExtension(txtFilePath.FileName).ToString().ToLower();

            //Check file type
            if (strFileType == ".xls" || strFileType == ".xlsx")
            {
                //print progressbar
            txtFilePath.SaveAs(Server.MapPath("~/UploadedExcel/" + strFileName + strFileType));

            }
            else
            {
                lblMessage.Text = "Only Excel files(.xls or .xlsx) allowed";
                lblMessage.ForeColor = System.Drawing.Color.Red;
                lblMessage.Visible = true;
                return;
            }

            string strNewPath = Server.MapPath("~/UploadedExcel/" + strFileName + strFileType);

            //Connection String to Excel Workbook
            if (strFileType.Trim() == ".xls")
            {
                connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + strNewPath + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=2\"";
            }
            else if (strFileType.Trim() == ".xlsx")
            {
                connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strNewPath + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
            }

            query = "SELECT [st_id],[st_rollno],[st_name],[branch_name],[sem_no],[batch_year] FROM [student$]";
            //query = "SELECT [Country],[Capital] FROM [Sheet1$] WHERE [Currency]='Rupee'"
            //query = "SELECT [Country],[Capital] FROM [Sheet1$]"

            //Create the connection object
            conn = new OleDbConnection(connString);
            //Open connection
            if (conn.State == ConnectionState.Closed) conn.Open();
            //Create the command object
            cmd = new OleDbCommand(query, conn);
            da = new OleDbDataAdapter(cmd);
            ds = new DataSet();
            da.Fill(ds);

            grvExcelData.DataSource = ds.Tables[0];
            grvExcelData.DataBind();

            lblMessage.Text = "Data retrieved successfully! Total Recodes:" + ds.Tables[0].Rows.Count;
            lblMessage.ForeColor = System.Drawing.Color.Green;
            lblMessage.Visible = true;

            da.Dispose();
            conn.Close();
            conn.Dispose();
        }
        else
        {
            lblMessage.Text = "Please select an excel file first";
            lblMessage.ForeColor = System.Drawing.Color.Red;
            lblMessage.Visible = true;
        }

    } 
```**

# javascript - .blur（）上的setTimeout？

> ID：15117719
> 
> 赞同：2
> 
> 时间：2013-02-27T16:52:47.617
> 
> 标签：javascript, jquery

我有一个菜单栏，它在悬停时显示一个子菜单栏，并在单击关闭选项时退出。我想要一个超时选项，以便子菜单在 5 秒后自行关闭。我正在尝试使用 .blur() 主菜单失去焦点，然后 setTimeout(function() {}, 5000); 对于超时部分，但事件未触发。有什么建议吗？（setTimeout(function() 中包含的代码与手动退出菜单的代码相同）

```
$('#main-nav li a.main-link').blur(function() {
    setTimeout(function () {
        $('#main-nav li a.main-link').removeClass('active');
        $('.sub-links').fadeOut();
        $('#sub-link-bar').animate({
            height: '0px'
        });
        $('#main-nav li a.close').fadeOut();
    }
    , 5000);

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T16:54:55.017

鼠标移出时模糊不会触发，但是当元素失去焦点时（以前只是表单元素，现在是任何类型的元素）。您可能想尝试`mouseleave`，或者更好，`mouseout`.

# android - Android - 画布混淆（绘图和滚动）

> ID：15117723
> 
> 赞同：2
> 
> 时间：2013-02-27T16:53:07.837
> 
> 标签：android, android-canvas

我对`canvas`android 有点困惑，想知道是否有人可以为我澄清一些事情。

我目前在我的 View 类中有这段代码：

```
 class HomerView extends View { // the custom View for drawing on
    // set up Bitmap, canvas, path and paint
    private Bitmap myBitmap; // the initial image we turn into our canvas
    private Canvas myCanvas; // the canvas we are drawing on
    private Rect myRect; // the mathematical path of the lines we draw
    private Paint myBitmapPaint; // the paint we use to draw the bitmap

    // get the width of the entire tablet screen
    private int screenWidth = getContext().getResources()
            .getDisplayMetrics().widthPixels;
    // get the height of the entire tablet screen
    private int screenHeight = getContext().getResources()
            .getDisplayMetrics().heightPixels;

    private int mX, mY, iX, iY; // current x,y and initial x,y
    private static final float TOUCH_TOLERANCE = 4;
    private static final int INVALID_POINTER_ID = -1;
    private float mPosX;
    private float mPosY;
    private BitmapDrawable mImage;
    private float mLastTouchX;
    private float mLastTouchY;
    private int mActivePointerId = INVALID_POINTER_ID;
    private ScaleGestureDetector mScaleDetector;
    private float mScaleFactor = 1.f;

    public HomerView(Context context) { // constructor of HomerView
        super(context);
        myBitmap = Bitmap.createBitmap(screenWidth, screenHeight,
                Bitmap.Config.ARGB_8888); // set our drawable space - the bitmap which becomes the canvas we draw on
        myCanvas = new Canvas(myBitmap); // set our canvas to our bitmap which we just set up
        myRect = new Rect(); // make a new rect
        myBitmapPaint = new Paint(Paint.DITHER_FLAG); // set dither to ON in our saved drawing - gives better color interaction
        setHorizontalScrollBarEnabled(true);
        setVerticalScrollBarEnabled(true);
        TypedArray a = context.obtainStyledAttributes(R.styleable.View);
        initializeScrollbars(a);
        a.recycle();
        computeVerticalScrollRange();
        computeHorizontalScrollRange();
        mImage = new BitmapDrawable(getResources(), myBitmap);
        mScaleDetector = new ScaleGestureDetector(context,
                new ScaleListener());
    }

    public HomerView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mScaleDetector = new ScaleGestureDetector(context,
                new ScaleListener());
    }

    public HomerView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    protected void onDraw(Canvas canvas) { // method used when we want to draw something to our canvas
        super.onDraw(canvas);
        if (addObjectMode == true) {
            canvas.drawColor(Color.TRANSPARENT); // sets canvas colour
            canvas.drawBitmap(myBitmap, 0, 0, myBitmapPaint); // save the canvas to bitmap - the numbers are the x, y coords we are drawing from
            canvas.drawRect(myRect, myPaint); // draw the rectangle that the user has drawn using the paint we set up
        } else if (moveMode == true) {
            canvas.save();
            System.out.println("X: " + mPosX + " Y: " + mPosY);
            canvas.translate(mPosX, mPosY);
            canvas.scale(mScaleFactor, mScaleFactor);
            mImage.draw(canvas);
            canvas.restore();
        } 
```

据我了解，这是两种不同的绘制屏幕方法的融合。我的理解是我有`myBitmap`（这是用户绘图的基础），这对于*"addObjectMode"*很好用。但是，*“moveMode”*是我希望用户能够在他们绘制的房屋平面图周围捏缩放滚动等。

目前，我可以很好地绘制对象，但是当我按下按钮启用`moveMode`时，当我触摸或手势时，绘图就会消失。我知道这可能是因为`onDraw()`; 但帆布对我来说仍然有点神秘。

最终，我会想要一个基本的撤消/重做功能以及保存`canvas/bitmap`稍后打开的功能。任何人都可以提供任何建议或链接到任何全面的画布教程吗？

`onTouchEvent`编辑：包含我的方法也可能很有用-

```
 public boolean onTouchEvent(MotionEvent event) { // on any touch event
        if (addObjectMode == true) {

            float x = event.getX(); // get current X
            float y = event.getY(); // get current Y

            switch (event.getAction()) { // what action is the user performing?
            case MotionEvent.ACTION_DOWN: // if user is touching down
                touch_Start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE: // if user is moving finger while touched down
                touch_Move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP: // if user has released finger
                touch_Up();
                invalidate();
                break;
            }
            return true;
        } else if (moveMode == true) {
            mScaleDetector.onTouchEvent(event);
            final int action = event.getAction();
            switch (action & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN: {
                final float x = event.getX();
                final float y = event.getY();
                mLastTouchX = x;
                mLastTouchY = y;
                mActivePointerId = event.getPointerId(0);
                break;
            }

            case MotionEvent.ACTION_MOVE: {
                final int pointerIndex = event
                        .findPointerIndex(mActivePointerId);
                final float x = event.getX(pointerIndex);
                final float y = event.getY(pointerIndex);

                // Only move if the ScaleGestureDetector isn't processing a gesture.
                if (!mScaleDetector.isInProgress()) {
                    final float dx = x - mLastTouchX;
                    final float dy = y - mLastTouchY;
                    mPosX += dx;
                    mPosY += dy;
                    invalidate();
                }
                mLastTouchX = x;
                mLastTouchY = y;
                break;
            }

            case MotionEvent.ACTION_UP: {
                mActivePointerId = INVALID_POINTER_ID;
                break;
            }

            case MotionEvent.ACTION_CANCEL: {
                mActivePointerId = INVALID_POINTER_ID;
                break;
            }

            case MotionEvent.ACTION_POINTER_UP: {
                final int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
                final int pointerId = event.getPointerId(pointerIndex);
                if (pointerId == mActivePointerId) {
                    // This was our active pointer going up. Choose a new
                    // active pointer and adjust accordingly.
                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                    mLastTouchX = event.getX(newPointerIndex);
                    mLastTouchY = event.getY(newPointerIndex);
                    mActivePointerId = event.getPointerId(newPointerIndex);
                }
                break;
            }
            }
            return true;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:09:51.713

在您的示例中，当您处于 moveMode 时，您不会在最终画布上绘制任何内容。

即使您正在对已经绘制的东西应用转换，请注意画布在两次 onDraw() 调用之间是清晰的，因此您必须再次绘制它。

我不熟悉撤消重做功能，但是您应该能够在给定点存储画布位图的副本，以便以后恢复

[位图.copy()](http://developer.android.com/reference/android/graphics/Bitmap.html#copy%28android.graphics.Bitmap.Config,%20boolean%29)

请注意，对于移动环境而言，存储大量位图可能会非常繁重，因此您必须限制撤消堆栈的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:00:28.807

删除`if else if`draw方法的条件，并为撤消功能制作一个位图数组列表，并在每次用户执行某些操作时保存您的位图，然后在撤消时将位图替换为上一个并使视图无效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:51:40.923

为了实现 Undo\Redo，您需要维护路径列表...并且您必须相应地将这些路径存储在路径列表中。我在下面附上了我的代码，看看它，你就会对撤销重做功能有一些清晰的想法。

```
 public static LinkedList<Path> rrPathList=new LinkedList<Path>();
     public static LinkedList<Path> mPathList=new LinkedList<Path>();
     protected void onDraw(Canvas canvas) {

            for( i = 0; i < mPathList.size() && i < sPaint.size(); i++ )
            {
                canvas.drawPath(mPathList.get(i),sPaint.get(i));

            }
          }
   // In your touch up method store the paths into mPathList
        private void touch_up() {     
            mCanvas.drawPath(mPath, mPaint);
            mPathList.add(mPath);  
        }
   // Undo function
     public void undo()
    {
        try
        {
            if(mPathList.size()>0)
            {
                rPathList.add(mPathList.getLast());
                mPathList.removeLast();

                 invalidate();
            }
        }catch(ArrayIndexOutOfBoundsException arr)
        {
          //Print error;
        }
    }
     // Redo function
     public void redo()
    {
        try
        {
            if(rPathList.size()>0)
            {
                mPathList.add(rPathList.getLast());
                rPathList.removeLast();
             invalidate();
            }
        }catch(ArrayIndexOutOfBoundsException arr)
        {
            //Handle error
        }
    } 
```

注意：请不要忘记调用“invalidate()”。调用无效结果“调用画布并重绘 mPathList 对象”试试这个。我正在使用此代码...谢谢！

# sql-server-2008 - 在 SQL Server 2008 R2 及更高版本中查找视图、过程和其他对象的相关用户信息

> ID：15117724
> 
> 赞同：1
> 
> 时间：2013-02-27T16:53:15.043
> 
> 标签：sql-server-2008, tsql, sql-server-2012

我本可以发誓我之前从 sys 视图或数据管理视图中这样做过，并在某处找到了信息。然而我找不到我的代码，也许我过去只是用扩展属性来做这件事，发现就像我在网上到处读到的那样，除了跟踪对象创建之外，这是无法做到的。谁能告诉我如果他们知道你能找到在 SQL Server 2008 R2 或更高版本的 TSQL 中创建过程的用户吗？

EG：我知道您可以在 sys.objects 中找到您的对象的名称以及修改时间，如下所示：

```
Select Top 10 *
from sys.objects o (nolock) 
where type = 'V'  -- View
and name like '%Finance%'  -- Finance in the name of the object somewhere 
```

我知道有两个表包含有关用户帐户的信息（我知道您用来获取用户的表之一已被弃用，不确定它是否是其中之一）：

```
Select Top 10 *
from sys.server_principals p (nolock) 
where p.type = 'U'

Select top 10 *
from sysusers 
```

有没有办法找到创建它的对象或类似对象的 SID？检查此站点和其他站点时，我在网上发现“不”。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:00:44.187

默认情况下，SQL Server 不跟踪谁创建了表，默认跟踪除外。因此，如果它是最近创建的，您可以在此处找到该信息：

```
DECLARE @path NVARCHAR(260);

SELECT 
   @path = REVERSE(SUBSTRING(REVERSE([path]), 
   CHARINDEX('\', REVERSE([path])), 260)) + N'log.trc'
FROM    sys.traces
WHERE   is_default = 1;

SELECT LoginName, StartTime
FROM sys.fn_trace_gettable(@path, DEFAULT)
WHERE EventClass = 46 AND EventSubClass = 0 
AND databaseName = N'Your database name'
AND objectName = N'The table name you are trying to track down'
ORDER BY StartTime DESC; 
```

但是请注意，默认跟踪是滚动跟踪，数据回溯多远取决于服务器的工作负载。如果您想找出谁在 6 个月前创建了一张表，那么您很可能不走运。

您可以自己捕获这一点，继续前进，使用[SQL Server Audit](http://msdn.microsoft.com/en-us/library/cc280386.aspx)、[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms175941.aspx)或定期归档默认跟踪（[我在此处展示如何执行此操作](http://www.mssqltips.com/sqlservertip/2695/maintaining-sql-server-default-trace-historical-events-for-analysis-and-reporting/?utm_source-AaronBertrand)）。

# php - 查询在 laravel 中不起作用，但在其他情况下起作用

> ID：15117726
> 
> 赞同：0
> 
> 时间：2013-02-27T16:53:19.950
> 
> 标签：php, laravel

我有以下查询

```
select stock_data.symbol, open, high, low, close, oi from stock_data 
left join fo_data on fo_data.data_date = stock_data.data_date 
where stock_data.symbol='SYMBOL' 
```

符号是两个表中的同一列。stock_data 包含大约 9 列，fo_data 包含大约 70 列。

上面的查询在 phpmyadmin 中正常工作，但在 laravel 中不能正常工作，也尝试过流利的查询生成器。

**编辑**

```
$results = DB::table('stock_data')
        ->left_join('fo_data', 'stock_data.data_date', '=', 'fo_data.data_date')
        ->where('stock_data.symbol', '=', $symbol)
        ->where('stock_data.data_date', '>=', DB::raw("DATE_SUB('{$data_till}', INTERVAL {$months} MONTH)"))
        ->order_by('stock_data.data_date', 'asc')
        ->get(); 
```

如果我将此代码注释掉，其他代码将完美运行，但如果此代码存在，则返回的页面为空白（不是 404）

**编辑**

我增加了内存限制，现在它正在显示结果。我的查询非常错误，它返回了超过 5000000 行，所以这一定是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:04:41.733

您应该使用`DB::query`生成器发出不适合的复杂任意查询。

您还可以使用`DB::connection()->pdo`访问底层 PDO 对象并从中手动尝试。

看到这个： http: [//laravel.com/docs/database/raw](http://laravel.com/docs/database/raw)

此外，尝试将您的标识符放在反引号之间。前任：

```
select `id` from `users` 
```

这是因为您可能遇到了一些数据库的保留字。PhpMyAdmin 可能会为您执行此操作，这就是为什么您没有收到错误的原因。只是一个理论。

# php - 使用 UNION 的 PHP MySQL 查询并定位数据来自哪个表

> ID：15117727
> 
> 赞同：1
> 
> 时间：2013-02-27T16:53:23.223
> 
> 标签：php, mysql, union

所以我有一个查询，我从两个不同的表中选择值并将它们联合在一起。我需要知道哪个条目来自哪里，因为我需要为每个条目形成不同的 URL。标记这两个 SELECT 查询的最佳方式和正确语法是什么。任何帮助，将不胜感激。要遵循的代码：

```
 $query = "SELECT newsletter_id id, newstitle title FROM tbl_news WHERE (newstitle LIKE '%".stripslashes($rowCont->fname)."%' && newstitle LIKE '%".stripslashes($rowCont->lname)."%') || (newsletter_content LIKE '%".stripslashes($rowCont->fname)."%' && newsletter_content LIKE '%".stripslashes($rowCont->lname)."%') SET @type = news
    UNION
    SELECT event_id id, event_title title FROM tbl_event WHERE ((event_title LIKE '%".stripslashes($rowCont->fname)."%' && event_title LIKE '%".stripslashes($rowCont->lname)."%') || (event_content LIKE '%".stripslashes($rowCont->fname)."%' && event_content LIKE '%".stripslashes($rowCont->lname)."%')) SET @type = event";

    $result = mysql_query($query) or die(mysql_error());

    $i = 0;

    while($row = mysql_fetch_assoc($result)) {

        if($table_name == table1) { //SIMULATED TABLE NAME VARIABLE IF STATEMENT, NEED TO KNOW HOW TO GET TABLE NAME FOR SORTING
            echo "<p><a style='color:#00aeef' href='http://www.url1.com/display.php?article_=".$row["id"]."'>".$row["title"]."</a></p>";
        } else {
            echo "<p><a style='color:#00aeef' href='http://www.url1.com/display.php?article_=".$row["id"]."'>".$row["title"]."</a></p>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:55:32.233

一种选择是在每个查询的选择列表中包含一个文字，例如：

```
SELECT 'q1' AS source, newsletter_id id, ...
UNION
SELECT 'q2' AS source, event_id id, ... 
```

* * *

顺便说一句，如果不需要删除重复项，请考虑使用`UNION ALL`运算符代替运算符。`UNION`

# java - gl_Normal 计算不正确

> ID：15117732
> 
> 赞同：0
> 
> 时间：2013-02-27T16:53:39.807
> 
> 标签：java, opengl, glsl, lwjgl

当我尝试在我的 GLSL 顶点着色器中使用 gl_Normal 时，它保持 vec3，x 和 y 分量为 0，z 分量为 1.0。是否有一些启用正常计算的openGL语句？我正在尝试完成一个简单的着色程序，我已经将一个模型导入了世界，但由于某种原因，内置变量 gl_Normal 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:56:14.040

您应该使用`glNormalPointer`（或`glNormal`）将顶点法线与顶点位置一起传递。

我建议将您的模型导入 3D 建模工具（如 Blender） - 它可以自动为您生成法线向量。然后只需将其保存并使用法线导入您的应用程序。

# javascript - 简化 JQuery 代码？

> ID：15117735
> 
> 赞同：0
> 
> 时间：2013-02-27T16:53:46.383
> 
> 标签：javascript, jquery

**注意：我将此添加到在**[此链接](http://jsfiddle.net/kbarrows/SWEvm/1/)中找到的 JSFIDDLE

* * *

我编写了一些基本的 jQuery 代码来操作 3 个表之一中的行，处理几个按钮单击和复选框。我现在感觉很像一个n00b。我正在看这个并意识到有很多东西可以变成更通用的函数，但我并不精通创建 JS 函数。欢迎任何指点。

由于我有类似功能的块，我更愿意讨论如何简化每种块类型。

*   按钮交换
*   选择/取消选择清单
*   移动检查清单
*   显示/隐藏面板

这是代码：

```
 <script type="text/javascript" language="javascript">
        $(document).ready(function () {

        $('#displayActivePanel').hide();
        $('#displayInactivePanel').hide();

        // Button event handlers to move items from/to differing tables...
        $('#TableAdminPortfolio tbody .buttonSwap').live('click', function () {
            var tr = $(this).closest('tr');
            var stat = tr.children('.padLeft.status').text().trim();
            var tableActiveProjects = $('#TableActiveProjects tbody');
            var tableInactiveProjects = $('#TableInactiveProjects tbody');

            tr.fadeOut(1000);
            if (stat == 'Active') {
                tableActiveProjects.prepend(tr);
            } else {
                tableInactiveProjects.prepend(tr);
            }
            tr.fadeIn(1000);
        });

        $('#TableActiveProjects tbody .buttonSwap').live('click', function () {
            var tr = $(this).closest('tr');
            var tableAdminPortfolio = $('#TableAdminPortfolio tbody');

            tr.fadeOut(1000);
            tableAdminPortfolio.prepend(tr);
            tr.fadeIn(1000);
        });

        $('#TableInactiveProjects tbody .buttonSwap').live('click', function () {
            var tr = $(this).closest('tr');
            var tableAdminPortfolio = $('#TableAdminPortfolio tbody');

            tr.fadeOut(1000);
            tableAdminPortfolio.prepend(tr);
            tr.fadeIn(1000);
        });

        $('#masterCheckBoxAdminPortfolio').live('change', function () {
            var isChecked = $('#masterCheckBoxAdminPortfolio:checked').val() != undefined;

            var list = $('#TableAdminPortfolio .CheckBoxProjects');
            list.each(function () {
                this.checked = isChecked;
            });
        });
        $('#TableActiveProjectsCheckbox').live('change', function () {
            var isChecked = $('#TableActiveProjectsCheckbox:checked').val() != undefined;

            var list = $('#TableActiveProjects .CheckBoxProjects');
            list.each(function () {
                this.checked = isChecked;
            });
        });
        $('#TableInactiveProjectsCheckbox').live('change', function () {
            var isChecked = $('#TableInactiveProjectsCheckbox:checked').val() != undefined;

            var list = $('#TableInactiveProjects .CheckBoxProjects');
            list.each(function () {
                this.checked = isChecked;
            });
        });

        $('#TableAdminPortfolioRemoveAllChecked').live('click', function () {
            var list = $('#TableAdminPortfolio .CheckBoxProjects');
            list.each(function () {
                var isChecked = $(this).closest('td').children('.CheckBoxProjects:checked').val() != undefined;
                if (isChecked) {
                    var tr = $(this).closest('tr');
                    var stat = tr.children('.padLeft.status').text().trim();
                    var tableActiveProjects = $('#TableActiveProjects tbody');
                    var tableInactiveProjects = $('#TableInactiveProjects tbody');

                    tr.fadeOut(1000);
                    if (stat == 'Active') {
                        tableActiveProjects.prepend(tr);
                    } else {
                        tableInactiveProjects.prepend(tr);
                    }
                    tr.fadeIn(1000);
                }
            });
        });
        $('#TableActiveProjectsAddAllChecked').live('click', function () {
            var tableAdminPortfolio = $('#TableAdminPortfolio tbody');
            var list = $('#TableActiveProjects .CheckBoxProjects');
            list.each(function () {
                var tr = $(this).closest('tr');
                var isChecked = $(this).closest('td').children('.CheckBoxProjects:checked').val() != undefined;
                if (isChecked) {
                    tr.fadeOut(1000);
                    tableAdminPortfolio.prepend(tr);
                    tr.fadeIn(1000);
                }
            });
        });
        $('#TableInactiveProjectsAddAllChecked').live('click', function () {
            var tableAdminPortfolio = $('#TableAdminPortfolio tbody');
            var list = $('#TableInactiveProjects .CheckBoxProjects');
            list.each(function () {
                var tr = $(this).closest('tr');
                var isChecked = $(this).closest('td').children('.CheckBoxProjects:checked').val() != undefined;
                if (isChecked) {
                    tr.fadeOut(1000);
                    tableAdminPortfolio.prepend(tr);
                    tr.fadeIn(1000);
                }
            });
        });

        $('#showActivePanel').click(function () {
            $('#displayActivePanel').show();
        });
        $('#hideActivePanel').click(function () {
            $('#displayActivePanel').hide();
        });
        $('#showInactivePanel').click(function () {
            $('#displayInactivePanel').show();
        });
        $('#hideInactivePanel').click(function () {
            $('#displayInactivePanel').hide();
        });
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:12:36.010

没有 html，很难测试任何东西。但这完全是随心所欲，只是因为我喜欢挑战而且我很无聊。至少，它应该为您提供函数的起点……如何将项目传递给函数，以及函数如何使用这些参数。

```
$(document).ready(function () {
function hideIt($item) {
    $item.hide();
}

function prependPortfolio($tr,$portfolio){
    $tr.fadeOut(1000);
    $portfolio.prepend($tr);
    $tr.fadeIn(1000);
}

function setCheck($check,$list){
    $list.each(function(){
        $(this).prop('checked',$check);
    }
}

function moveItems($tr,$stat,$active,$inactive){
    $tr.fadeOut(1000);
    if ($stat == 'Active') {
        $active.prepend($tr);
    } else {
        $inactive.prepend($tr);
    }
    $tr.fadeIn(1000);
}

function addAllChecked($check,$list){
    $list.each(function () {
        var $tr = $(this).closest('tr'),
            $check = $(this).closest('td').children('.CheckBoxProjects:checked').val() != undefined;
        if ($check) {
            prependPortfolio(tr,tableAdminPortfolio);
        }
    });
}

hideIt($('#displayActivePanel'));
hideIt($('#displayInactivePanel'));

// Button event handlers to move items from/to differing tables...
$('#TableAdminPortfolio tbody .buttonSwap').live('click', function () {
    var tr = $(this).closest('tr'),
        stat = tr.children('.padLeft.status').text().trim(),
        tableActiveProjects = $('#TableActiveProjects tbody'),
        tableInactiveProjects = $('#TableInactiveProjects tbody');

    moveItems(tr,stat,tableActiveProjects,tableInactiveProjects);
});

$('#TableActiveProjects tbody .buttonSwap').on('click', function () {
    var tr = $(this).closest('tr'),
        tableAdminPortfolio = $('#TableAdminPortfolio').find('tbody');

    prependPortfolio(tr,tableAdminPortfolio);
});

$('#TableInactiveProjects tbody .buttonSwap').on('click', function () {
    var tr = $(this).closest('tr'),
        tableAdminPortfolio = $('#TableAdminPortfolio').find('tbody');

    prependPortfolio(tr,tableAdminPortfolio);
});

$('#masterCheckBoxAdminPortfolio').on('change', function () {
    var isChecked = $('#masterCheckBoxAdminPortfolio:checked').val() != undefined,
        list = $('#TableAdminPortfolio .CheckBoxProjects');

    setCheck(isChecked,list);
});
$('#TableActiveProjectsCheckbox').on('change', function () {
    var isChecked = $('#TableActiveProjectsCheckbox:checked').val() != undefined,
        list = $('#TableActiveProjects .CheckBoxProjects');

    setCheck(isChecked,list);
});
$('#TableInactiveProjectsCheckbox').on('change', function () {
    var isChecked = $('#TableInactiveProjectsCheckbox:checked').val() != undefined,
        list = $('#TableInactiveProjects .CheckBoxProjects');

    setCheck(isChecked,list);
});

$('#TableAdminPortfolioRemoveAllChecked').on('click', function () {
    var $list = $('#TableAdminPortfolio .CheckBoxProjects');

    $list.each(function () {
        var $check = $(this).closest('td').children('.CheckBoxProjects:checked').val() != undefined;
        if ($check) {
            var tr = $(this).closest('tr'),
                stat = tr.children('.padLeft.status').text().trim(),
                tableActiveProjects = $('#TableActiveProjects tbody'),
                tableInactiveProjects = $('#TableInactiveProjects tbody');

            moveItems(tr,stat,tableActiveProjects,tableInactiveProjects);
        }
    });
});

$('#TableActiveProjectsAddAllChecked').on('click', function () {
    var tableAdminPortfolio = $('#TableAdminPortfolio tbody'),
        list = $('#TableActiveProjects .CheckBoxProjects');

    addAllChecked(tableAdminPortfolio,list);
});

$('#TableInactiveProjectsAddAllChecked').on('click', function () {
    var tableAdminPortfolio = $('#TableAdminPortfolio tbody'),
        list = $('#TableInactiveProjects .CheckBoxProjects');

    addAllChecked(tableAdminPortfolio,list);
});

$('#showActivePanel').on('click',function(){
    $(this).toggle();
});

$('#showInactivePanel').on('click',function(){
    $(this).toggle();
});
}); 
```

这应该可行，因为我只是复制、粘贴和移动东西，但对此零保证。我真正做的唯一改变了它的设置方式的事情是，您可以在一个大的声明中用逗号分隔它们，而不是单独声明每个变量。

# c# - 带有 3 个网格的 WPF 窗口

> ID：15117736
> 
> 赞同：0
> 
> 时间：2013-02-27T16:53:46.777
> 
> 标签：c#, .net, wpf

我想`application`在主窗口中构建它，它们之间有 3`Grid`和 2 `GridSplitter`：

```
<Window x:Class="PlayTube.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="600" Width="625">
    <Grid Background="#FFD86F6F">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid Background="#FFFFFF89" MaxWidth="200">

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
                  VerticalAlignment="Stretch" 
                  Grid.Column="1" ResizeBehavior="PreviousAndNext"
                  Width="5" Background="#FFBCBCBC" />

        <Grid Background="#FF05BECB" Grid.Column="2">

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
                  VerticalAlignment="Stretch" 
                  Grid.Column="3" ResizeBehavior="PreviousAndNext"
                  Width="5" Background="#FFBCBCBC"/>

        <Grid Background="#FF4E04A7" Grid.Column="4">

        </Grid>
    </Grid>
</Window> 
```

我希望前两个网格的最大宽度为 200 像素。当我尝试使用 GridSplitter 重新调整大小时，网格保持最大 200，但我可以看到主网格颜色。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:58:16.480

Try moving the MaxWidth property to the ColumnDefinition instead of the grid.

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="600" Width="625">
    <Grid Background="#FFD86F6F">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" MaxWidth="200"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid Background="#FFFFFF89" >

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
                  VerticalAlignment="Stretch" 
                  Grid.Column="1" ResizeBehavior="PreviousAndNext"
                  Width="5" Background="#FFBCBCBC" />

        <Grid Background="#FF05BECB" Grid.Column="2">

        </Grid>

        <GridSplitter HorizontalAlignment="Right" 
                  VerticalAlignment="Stretch" 
                  Grid.Column="3" ResizeBehavior="PreviousAndNext"
                  Width="5" Background="#FFBCBCBC"/>

        <Grid Background="#FF4E04A7" Grid.Column="4">

        </Grid>
    </Grid>
</Window> 
```

# javascript - 如何将一个div的内容复制到另一个div

> ID：15117745
> 
> 赞同：0
> 
> 时间：2013-02-27T16:54:12.560
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 将选定 div 中的单个元素复制到另一个 div。但是用我的代码将整个部门复制到另一个部门..

我的代码是：

```
$('#image').html($('#selected').html());  //which copies entire content of #selected division 
```

划分是：

```
<div class="imgs" id="selected">
<img width="100%" height="100%" data-id="1" data-alid="1" src="data:image/jpeg;base64,">
<div class="xyz"><a href="#">Xyz</a></div>
</div> 
```

我只需`img`要从`div` `imgs`

请任何人帮助我...谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:57:29.080

这是一个示例，它使用 复制元素内的*第一个* 元素并将其附加到具有 的元素：`img``id` `"selected"``id` `"image"`

```
$("#selected > img").first().clone().appendTo("#image"); 
```

这使用：

*   [`$()`](http://api.jquery.com/jQuery/#jQuery1)找到所有`img`元素的[直接子](http://api.jquery.com/child-selector/)元素`id` `"selected"`

*   [`first()`](http://api.jquery.com/first/)减少到只是第一个匹配`img`

*   [`clone`](http://api.jquery.com/clone/)克隆（复制）它

*   [`appendTo`](http://api.jquery.com/appendTo/)将其附加到带有`id` `"image"`

* * *

花一个小时从头到尾阅读[jQuery API 文档](http://api.jquery.com)是*非常值得的。*令人惊讶的是，这将为您节省多少时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:59:07.767

Use this...

```
$('#image').html($('#selected').innerHTML()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:57:42.220

你想从#selected div中选择img吗？

如果是这样就这样做

```
$('#image').html($('#selected img').html()); 
```

# sql-server - 识别在别处用作外键的主键

> ID：15117750
> 
> 赞同：0
> 
> 时间：2013-02-27T16:54:31.280
> 
> 标签：sql-server, foreign-keys, primary-key

我在 中调用`CustomerID`了一个主键，`CustomerTable`并且此 PK 有可能在同一数据库中的各种其他表（读取超过 50 个）中用作 FK。

我想知道是否有一种简单的方法可以识别此 PK 被用作 FK 的所有表。

注意：我使用的是 SQL Server

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:08:27.110

```
SELECT ro.name as Referedtable, co.name as foreinKey,so.name as ParentTable
FROM sys.foreign_key_columns fkc
join sys.sysobjects co on co.id=fkc.constraint_object_id
join sys.sysobjects so on so.id=fkc.parent_object_id
join sys.sysobjects ro on ro.id=fkc.referenced_object_id
where ro.name='CustomerTable' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:10:27.750

I figured this out by myself and here's what I did.

```
SELECT *
  FROM [YourDBName].[sys].[foreign_keys]
  WHERE name LIKE '%CustomerID%' 
```

# android - 截取屏幕截图（以编程方式）

> ID：15117753
> 
> 赞同：1
> 
> 时间：2013-02-27T16:54:41.477
> 
> 标签：android, screenshot

我想以编程方式截取 Android 设备的屏幕截图。

我知道这个问题已经被问过很多次了。我知道有两种方法可以做到这一点。

1.  使用截图库（但我一直黑屏）。
2.  从根从帧缓冲区获取数据`\dev\graphics\fb0`（但它始终为 0 字节，我不知道存储设备当前屏幕截图的确切位置）。我的首选要求是获得更好的帧速率。我的代码是

    ```
    public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Intent intent = new Intent();
       intent.setClass(this, ScreenshotService.class);
       bindService (intent,  new ServiceConnection() {

        @Override
        public void onServiceDisconnected(ComponentName name) 
        {

        }
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
          try {
                asl = IScreenshotProvider.Stub.asInterface(service);
          } catch (Exception ex) {
                Log.e("errrorrrrrrrrrrrrr","errrorrrrrrrrrrr", ex);
          }
        }
    }, Context.BIND_AUTO_CREATE);
    Button b1=(Button) this.findViewById(R.id.widget33);
    b1.setOnClickListener(new OnClickListener() {

        public void onClick(View view) 
        {
            try {
                asl.takeScreenshot();
            } catch (RemoteException ex) {
                Log.e("nnnnerrrrrrrrrrrrrr","errrrrrrrrrrrrr",ex);
            }
        }
    });
    }' 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:17:17.963

通常当您使用屏幕截图时，我们会获取屏幕图像。您是否按照说的那样运行它，这也可能是设备问题，所以我建议您尝试在其他设备上使用相同的东西。

有时问题可能出在将文件写回 sd 时。所以请提供您尝试过的完整代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T17:13:04.947

不要多次发布一个问题。

您可以使用以下代码获取视图的绘图缓存：

```
view.setDrawingCacheEnabled(true);
view.buildDrawingCache();
Bitmap b1 = view.getDrawingCache(); 
```

# ruby-on-rails - Ruby - 如何将上传的文件传递给方法？

> ID：15117756
> 
> 赞同：1
> 
> 时间：2013-02-27T16:54:56.547
> 
> 标签：ruby-on-rails, ruby, file, methods, upload

我有一个上传文件的表格。在控制器方法中，我想将此文件传递给将使用此文件的方法，如下所示：

在控制器中：

```
 def uploaded_file
    file_handler= ::FilesOper.analizeFile(params[:upl_file])
  end 
```

如果我这样做，我会收到以下错误消息：

```
can't convert ActionDispatch::Http::UploadedFile into String 
```

我以为我正在传递与上传文件相关的所有内容，那么出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:56:53.820

尝试：

```
def uploaded_file
   file_handler= ::FilesOper.analizeFile(params[:upl_file]).to_s
end 
```

# json - 来自 REST API 的 JSON 响应是否应该进行 url 编码？

> ID：15117757
> 
> 赞同：3
> 
> 时间：2013-02-27T16:54:59.190
> 
> 标签：json, api, rest

我正在开发一个 RESTful API，它将通过接收和发送的 JSON 消息进行操作。

问题是，当我将 API 调用的结果返回为 时`application/json`，响应是否也应该是 URL 编码的？

例如，它是否更正确

```
{"status":"OK","id":"WjY3T2g2Z1JGV1dFcXRqcXh4TDBlNnd1bHlwMVVLVzBRWnU1TTBnWGwrUEFKTHd5RlZSSytRMmdMTnlBS1ViUg%3D%3D"} 
```

或者

```
{"status":"OK","id":"WjY3T2g2Z1JGV1dFcXRqcXh4TDBlNnd1bHlwMVVLVzBRWnU1TTBnWGwrUEFKTHd5RlZSSytRMmdMTnlBS1ViUg=="} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:58:28.897

As the name suggests url encoding is for URL's so there's no need to apply it to your JSON, unless, the value is a URL.

# c# - GetHashCode(obj)：为什么在某些情况下它是用参数设计的？

> ID：15117758
> 
> 赞同：2
> 
> 时间：2013-02-27T16:54:59.347
> 
> 标签：c#, gethashcode

我刚刚注意到例如接口`IEqualityComparer<T>`提供了`public int GetHashCode(T obj)`.
我经常`public int GetHashCode()`在另一个接口/类中看到变体。为什么它是用输入参数设计的？我知道在“带参数”的情况下，返回值不会基于调用者对象，而是基于方法的参数。在我看来，它需要的唯一方法是 GetHashCode 的空对象，是吗？
最后一个问题：调用者对象应该是什么（即 GetHashCode 方法的所有者）？

谢谢！

* * *

**升级版**。将最早存在的答案标记为答案。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:18:18.580

因为`IEqualityComparer<T>`比较其他对象，而不是自身。因此它需要两个参数`Equals`（比较其他两个对象）和一个参数`GetHashCode`（获取其他对象的哈希码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:19:01.837

`IEqualityComparer`这是和之间的区别`IEquatable`。

`IComparer`您会看到和之间的相同差异`IComparable`。

在这两种情况下，第一种类型是比较*其他东西*，因此它需要接受其他东西作为参数。第二种类型是将“我自己”与某物进行比较，因此总会少一个参数（本质上是`this`参数）。

# entity-framework - 实体框架：如果我打开连接，我应该关闭它吗？

> ID：15117761
> 
> 赞同：0
> 
> 时间：2013-02-27T16:55:15.147
> 
> 标签：entity-framework, database-connection

我正在从我的`ObjectContext`. 我需要检查连接的状态并在必要时打开它。我想知道我是否需要关闭它，或者这是否会为我处理。

无论如何，我正在处理我的上下文，我认为这是关闭连接。

我应该首先手动打开此连接吗？

仅供参考：我故意避免使用方便的方法`ExecuteStoredCommand`和`ExecuteStoredQuery`. 我们有一些针对旧 ADO.NET 类的旧代码。我只想公开连接并确保它可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:10:30.320

实体框架自己管理打开和关闭连接。通常，它会在完成命令后关闭连接。所以在使用连接之前，你必须检查连接状态并在它关闭时打开它。完成后，您可以关闭它（而不是丢弃它！）。

当上下文被释放时，连接总是关闭的。

`TransactionScope`如果您希望您的旧代码和实体框架在一个事务中运行，您可能必须将您的代码包含在一个事务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:58:43.307

我认为如果您处理上下文，它将为您关闭连接。如果你创建一个新的 ObjectContext，连接也会被打开。

# image - 使用 cx_Freeze 构建时，PyQt 应用程序 exe 中未显示图标

> ID：15117772
> 
> 赞同：3
> 
> 时间：2013-02-27T16:55:50.450
> 
> 标签：image, icons, pyqt, cx-freeze

我知道这个论坛已经被问过很多次了，但是当我使用 cx_Freeze 将我的 PyQt 应用程序构建到一个工作的 exe 文件中时，我真的无法让我的应用程序图标工作。

我已将 Qt 图像插件（qico4.dll、qjpeg4.dll 等）复制到 appdir/imageformats 和 appdir 中。我也将 qt.conf 复制到了这些目录中。改变了它的路径，什么都没有。这是在某些主题中提出的。

我尝试使用 setup.py-file 以多种方式设置图标选项，也没有它。

我尝试使用 qt 设计器创建资源文件并将其转换。我尝试使用 qt 设计器将图标设置到我的主窗口。依然没有。

现在这是我的 setup.py 脚本：

```
import sys

from cx_Freeze import setup, Executable

base = None
if sys.platform == "win32":
    base = "Win32GUI"

executables = [
    Executable(
        "main.py",
        base = base,
        icon = "icon_64x64.ico",
        appendScriptToExe = True,
        appendScriptToLibrary = False,
        targetName = "MyApp.exe")
]

buildOptions = dict(
    create_shared_zip = False)

setup(
    name = "MyApp",
    version = "1.0",
    options = dict(build_exe = buildOptions),
    executables = executables) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:29:09.293

应用程序图标不是 Qt 管理的东西——它嵌入到 exe 文件中供操作系统读取。

检查它是否`icon_64x64.ico`存在于您正在运行的同一文件夹中`setup.py`，并且它是一个有效的 ico 文件。为了比较，[这里](https://bitbucket.org/taxonome/taxonome/src/7ff0fa8bdc8eeac3d1e03362f8671a870d1dc4db/freeze_gui.py)有一个使用图标的 setup.py。

# timeout - 来自 NSAPI 插件的消息：没有可用于连接的后端服务器：10 秒后超时或幂等设置为 OFF

> ID：15117775
> 
> 赞同：1
> 
> 时间：2013-02-27T16:55:55.710
> 
> 标签：timeout, weblogic, http-status-code-503

当我在我的 Web 应用程序上运行一个长时间的等待请求时，我从浏览器收到以下消息：

来自 NSAPI 插件的消息：

没有可用于连接的后端服务器：10 秒后超时或幂等设置为 OFF。

另外，我从 httpConnection 获得了 503 响应代码。我假设服务器超时，但我找不到任何延长超时的东西。上述消息大约在请求发送 5 分钟后显示。服务器在 WebLogic 上运行。有谁知道我可以在哪里更改超时时间或无论如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:36:24.590

根据我的经验，很可能它与超时设置无关。根据[http://docs.oracle.com/cd/E13222_01/wls/docs81/plugins/plugin_params.html](http://docs.oracle.com/cd/E13222_01/wls/docs81/plugins/plugin_params.html)，参数 ConnectTimeoutSecs 默认值为 10 秒，这通常绰绰有余。关于如何配置插件的说明在这里[http://docs.oracle.com/cd/E13222_01/wls/docs81/plugins/nsapi.html#110496](http://docs.oracle.com/cd/E13222_01/wls/docs81/plugins/nsapi.html#110496)。您没有指定您使用的是哪个版本的 WLS，但说明几乎不会因版本而异。

但在您开始操作此参数之前，我建议您首先确保您的 WLS 域已启动并正在运行。其次，请检查您的 NSAPI 插件以确保您尝试连接的 WLS 服务器 DNS 名称和端口均已正确配置。第三，与您的网络管理员核实，确保您的 Web 服务器和 WLS 服务器之间没有防火墙。如果有这样的防火墙，请确保防火墙允许您在两者之间的连接流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-29T23:42:24.353

这通常是由于系统备份，在此期间 Web 服务不可用。稍后重试将成功。我们在周日下午在一些联邦网站上看到了这一点。

# c# - C# & DB2 错误：在“get_profile_internet”之后发现了一个意外的标记“END-OF-STATEMENT”

> ID：15117777
> 
> 赞同：1
> 
> 时间：2013-02-27T16:55:56.720
> 
> 标签：c#, stored-procedures, db2

当我尝试从我的 C# 代码调用 DB2 存储过程时，我收到以下错误消息：

> 错误 [42601] [IBM][CLI Driver][DB2/NT64] SQL0104N 在“get_profile_internet”之后发现了意外的标记“END-OF-STATEMENT”。预期的标记可能包括：“JOIN”。SQLSTATE=42601

我究竟做错了什么？

* * *

**这是 DB2 - 存储过程代码**

```
create procedure db2admin.pr_get_profile_internet (
    IN p_profile_internet_id INT
)
BEGIN
    DELCARE c_profile_internet CURSOR WITH RETURN TO CLIENT FOR
        SELECT * 
        FROM profile_internet 
        WHERE profile_internet_id = p_profile_internet_id;

    OPEN c_profile_internet;
END; 
```

* * *

**这是我的 C# 代码**

```
 public CDataResult<DataSet> GetProfileInternet() {
        string v_connection_string = General.GetDBConnection();
        CDataResult<DataSet> v_result = new CDataResult<DataSet>();
        OdbcConnection v_connection = new OdbcConnection(v_connection_string);
        try {
            // Open Connection
            v_connection.Open();
            OdbcCommand cmd = new OdbcCommand("db2admin.pr_get_profile_internet", v_connection);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("p_profile_internet_id", OdbcType.Int);
            cmd.Parameters["p_profile_internet_id"].Value = this.ProfileInternetId;
            OdbcDataAdapter da = new OdbcDataAdapter(cmd);
            DataSet ds = new DataSet("GetProfileInternet");
            da.Fill(ds);
            if (ds != null && ds.Tables[0].Rows.Count > 0) {
                v_result.ErrorOccured = false;
                v_result.ErrorMessageEn = "";
            } else {
                v_result.ErrorOccured = true;
                v_result.ErrorMessageEn = "Error! User code is not valid.";
            }
        } catch (Exception ex) {
            v_result.ErrorOccured = true;
            v_result.ErrorMessageEn = "DB error: CProfileInternet->GetProfileInternet()";
            v_result.ErrorException = ex.Message + '\n' + ex.InnerException;
        } finally {
            if (v_connection != null) {
                v_connection.Close();
            }
        }
        return v_result;
    } 
```

* * *

**这是最新的 C# 代码版本：**

```
 public CDataResult<DataSet> GetProfileInternet()
    {
        string v_connection_string = General.GetDBConnection();
        CDataResult<DataSet> v_result = new CDataResult<DataSet>();
        OdbcConnection v_connection = new OdbcConnection(v_connection_string);

        try
        {
            // Open Connection
            v_connection.Open();

            OdbcCommand cmd = new OdbcCommand("call db2admin.pr_get_profile_internet", v_connection);
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.Add("p_profile_internet_id", OdbcType.Int);
            cmd.Parameters["p_profile_internet_id"].Direction = ParameterDirection.Input;
            cmd.Parameters["p_profile_internet_id"].Value = this.ProfileInternetId;

            OdbcDataAdapter da = new OdbcDataAdapter(cmd);
            DataSet ds = new DataSet("GetProfileInternet");
            da.Fill(ds);

            if (ds != null && ds.Tables[0].Rows.Count > 0)
            {
                v_result.ErrorOccured = false;
                v_result.ErrorMessageEn = "";
            }
            else
            {
                v_result.ErrorOccured = true;
                v_result.ErrorMessageEn = "Error! User code is not valid.";
            }
        }

        catch (Exception ex)
        {
            v_result.ErrorOccured = true;
            v_result.ErrorMessageEn = "DB error: CProfileInternet->GetProfileInternet()";
            v_result.ErrorException = ex.Message + '\n' + ex.InnerException;
        }

        finally
        {
            if (v_connection != null)
            {
                v_connection.Close();
            }
        }

        return v_result;
    } 
```

**这是我的 DB2 存储过程代码：**

```
create procedure db2admin.pr_get_profile_internet 
```

( IN p_profile_internet_id int ) 开始

```
Declare c_profile_internet CURSOR WITH RETURN TO CLIENT FOR
Select  * 
From    db2admin.profile_internet 
Where   profile_internet_id = p_profile_internet_id;

Open c_profile_internet; 
```

结尾;

**这是我的表结构**

```
create table profile_internet
(
profile_internet_id         int not null, 
code_client                 varchar(30) not null,
prenom                      varchar(100) not null,
nom                         varchar(100) not null,
adresse                     varchar(100) not null,
appartement                 varchar(100) null,
ville                       varchar(100) not null,
code_postal                 varchar(30) not null,
code_province               varchar(10) not null,
telephone_domicile          varchar(30) null,
telephone_mobile            varchar(30) null,
telephone_bureau            varchar(30) null,
extension_bureau            varchar(10) null,
date_de_naissance           date null,
langue                      varchar(1)  not null,
courriel                    varchar(100) null,
profil_actif                smallint not null,
date_creation               timestamp not null,
creer_par                   varchar(30) not null,
date_modification           timestamp not null,
modifier_par                varchar(30) not null,
    primary key (profile_internet_id)
)
;

CREATE UNIQUE INDEX idx_profile_internet_code_client ON profile_internet (code_client);
CREATE UNIQUE INDEX idx_profile_internet_courriel ON profile_internet (courriel); 
```

我应该怎么做才能避免收到以下错误消息：

**错误 [42884] [IBM][CLI 驱动程序][DB2/NT64] SQL0440N 未找到类型为“PROCEDURE”的名为“DB2ADMIN.PR_GET_PROFILE_INTERNET”且具有兼容参数的授权例程。SQLSTATE=42884**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:22:44.827

您必须使用动词指定完整的 ODBC 语法`'CALL'`，而不仅仅是 SP 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:06:28.197

看起来你应该在调用存储过程时打开一个 DataReader 以便它可以处理语句结束

```
OdbcDataReader Reader = cmd.ExecuteReader(); 
```

然后

```
while (Reader.Read())
            {
                try
                {
                }

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:49:42.030

我想与您分享未来的解决方案。

首先，我使用的是 Visual Studio 2005，并在本地机器上安装了 DB2 Express 10.1.2.2。我添加了对文件 C:\Program Files\IBM\SQLLIB\BIN\netf20\IBM.Data.DB2.dll 的引用，但我没有工作。当它尝试打开连接时，它会不断返回以下错误消息：**错误 - 没有可用的错误信息**

为了解决这个问题，我使用 Visual Studio 2010 创建了相同的项目，并添加了对文件 C:\Program Files\IBM\SQLLIB\BIN\netf40\IBM.Data.DB2.dll 的引用。在项目的属性中，我将 Target Framework 更改为：.Net Framework 4 并且我能够调用 DB2 存储过程

**这是 C# 工作代码：**

```
using IBM.Data.DB2;

public DataSet GetProfileInternet()
{
    string v_connection_string = "Database=myDatabase;Server=myServer:myPort;UID=myUserId;PWD=myPassword";
    DB2Connection v_connection = new DB2Connection(v_connection_string);

    try
        {
    // Open Connection
    v_connection.Open();

    DB2Command cmd = new DB2Command("pr_get_profile_internet", v_connection);
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("p_profile_internet_id", DB2Type.Integer);
    cmd.Parameters["p_profile_internet_id"].Direction = ParameterDirection.Input;
    cmd.Parameters["p_profile_internet_id"].Value = 1;

    DB2DataAdapter da = new DB2DataAdapter(cmd);
    DataSet ds = new DataSet("GetProfileInternet");
    da.Fill(ds);

    return ds;

}

catch (Exception ex)
{
    throw ex;
}

finally
{
    if (v_connection != null)
    {
        v_connection.Close();
    }
}
} 
```

# java - 在纹理中切割出一个半透明的正方形

> ID：15117789
> 
> 赞同：5
> 
> 时间：2013-02-27T16:56:43.027
> 
> 标签：java, android, opengl-es, libgdx

如何移除（切出）纹理中的透明矩形，使孔变为半透明。

在 Android 上，我会使用 Xfermodes 方法：

[如何在android中使用掩码](https://stackoverflow.com/questions/8115732/how-to-use-masks-in-android)

但在 libgdx 中，我将不得不使用 opengl。[到目前为止](http://www.andersriggelsen.dk/glblendfunc.php)，通过使用 glBlendFunc，我几乎实现了我想要的东西。

```
glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_ALPHA); 
```

应该可以解决我的问题，但我试过了，它并没有像预期的那样工作：

```
batch.end();
batch.begin();
//Draw the background
super.draw(batch, x, y, width, height);
batch.setBlendFunction(GL20.GL_ZERO,
        GL20.GL_ONE_MINUS_SRC_ALPHA);

//draw the mask
mask.draw(batch, x + innerButtonTable.getX(), y
        + innerButtonTable.getY(), innerButtonTable.getWidth(),
        innerButtonTable.getHeight());

batch.end();
batch.setBlendFunction(GL20.GL_SRC_ALPHA,
        GL20.GL_ONE_MINUS_SRC_ALPHA);
batch.begin(); 
```

它只是使蒙版区域纯黑色，而我期待透明，任何想法。

这就是我得到的：

![蒙版将被绘制为黑色](../Images/f5e90fc4d8eab2d64aca1efd64fbb205.png)

这是我所期望的：

![蒙版区域应该是透明的](../Images/d8c5bd178f9091edfa67dfec0685743d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:45:14.920

我通过使用模板缓冲区解决了我的问题：

```
Gdx.gl.glClear(GL_STENCIL_BUFFER_BIT);
batch.end();
//disable color mask
Gdx.gl.glColorMask(false, false, false, false);
Gdx.gl.glDepthMask(false);
//enable the stencil
Gdx.gl.glEnable(GL20.GL_STENCIL_TEST);
Gdx.gl.glStencilFunc(GL20.GL_ALWAYS, 0x1, 0xffffffff);
Gdx.gl.glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);

batch.begin();
//draw the mask
mask.draw(batch, x + innerButtonTable.getX(), y
        + innerButtonTable.getY(), innerButtonTable.getWidth(),
        innerButtonTable.getHeight());

batch.end();
batch.begin();

//enable color mask 
Gdx.gl.glColorMask(true, true, true, true);
Gdx.gl.glDepthMask(true);
//just draw where outside of the mask
Gdx.gl.glStencilFunc(GL_NOTEQUAL, 0x1, 0xffffffff);
Gdx.gl.glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
//draw the destination texture
super.draw(batch, x, y, width, height);
batch.end();
//disable the stencil
Gdx.gl.glDisable(GL20.GL_STENCIL_TEST); 
```

# maven - java.lang.NoClassDefFoundError 部署由 Maven 覆盖创建的战争文件

> ID：15117790
> 
> 赞同：0
> 
> 时间：2013-02-27T16:56:43.337
> 
> 标签：maven, classloader, maven-3, jboss7.x, noclassdeffounderror

我已经通过 Maven 构建了一个战争文件，该文件使用其他**战争覆盖**作为依赖项......构建成功。

但是在部署到 Jboss 时出现以下错误：

```
11:27:49,054 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-1) .... nested exception is java.lang.NoClassDefFoundError: org/springframework/core/type/classreading/AnnotationMetadataReadingVisitor
        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:281) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
        ........ 
```

所以我已经`java.lang.NoClassDefFoundError`为类`AnnotationMetadataReadingVisitor`...基于异常，我假设该类在类路径上出现了不止一次。

我已经验证`org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor`了类路径中确实存在（在它所在的war文件中`WEB-INF\lib\spring-core-3.2.1.RELEASE.jar`）。

但据我所知，它是我的类路径中唯一包含该类的 jar。

知道我在这里缺少什么吗？

`WEB-INF\lib`这是我试图部署的战争的全部内容：

```
activemq-all-5.5.1.jar
ant-1.7.0.jar
ant-launcher-1.7.0.jar
antlr-2.7.7.jar
antlr-3.3.jar
antlr-runtime-3.3.jar
aopalliance-1.0.jar
aspectjweaver-1.7.1.jar
axiom-api-1.2.12.jar
axiom-dom-1.2.12.jar
axiom-impl-1.2.12.jar
axis2-1.6.1.jar
axis2-adb-1.6.1.jar
axis2-adb-codegen-1.6.1.jar
axis2-ant-plugin-1.6.1.jar
axis2-clustering-1.6.1.jar
axis2-codegen-1.6.1.jar
axis2-corba-1.6.1.jar
axis2-fastinfoset-1.6.1.jar
axis2-java2wsdl-1.6.1.jar
axis2-jaxbri-1.6.1.jar
axis2-jaxws-1.6.1.jar
axis2-jibx-1.6.1.jar
axis2-json-1.6.1.jar
axis2-kernel-1.6.1.jar
axis2-metadata-1.6.1.jar
axis2-mtompolicy-1.6.1.jar
axis2-saaj-1.6.1.jar
axis2-transport-http-1.6.1.jar
axis2-transport-local-1.6.1.jar
axis2-xmlbeans-1.6.1.jar
bcel-5.1.jar
blitzer-1.0.9.jar
c3p0-0.9.1.1.jar
camel-core-2.4.0.jar
camel-xstream-2.4.0.jar
cdjai-1.0.jar
commons-beanutils-1.7.0.jar
commons-cli-1.2.jar
commons-codec-1.3.jar
commons-collections-3.1.jar
commons-dbcp-1.4.jar
commons-digester-1.8.jar
commons-fileupload-1.2.1.jar
commons-httpclient-3.1.jar
commons-io-1.3.2.jar
commons-lang-2.5.jar
commons-logging-1.1.1.jar
commons-logging-api-1.1.jar
commons-management-1.0.jar
commons-net-3.1.jar
commons-pool-1.5.4.jar
displaytag-1.2.jar
displaytag-export-poi-1.2.jar
drools-compiler-5.3.0.Final.jar
drools-core-5.3.0.Final.jar
ecj-3.5.1.jar
el-api-2.2.jar
el-impl-2.2.jar
FastInfoset-1.2.7.jar
freemarker-2.3.13.jar
geronimo-activation_1.1_spec-1.0.2.jar
geronimo-annotation_1.0_spec-1.1.jar
geronimo-javamail_1.4_spec-1.6.jar
geronimo-jaxws_2.2_spec-1.0.jar
geronimo-jta_1.1_spec-1.1.jar
geronimo-saaj_1.3_spec-1.0.1.jar
geronimo-stax-api_1.0_spec-1.0.1.jar
geronimo-ws-metadata_2.0_spec-1.1.2.jar
httpcore-4.0.jar
itext-1.3.jar
javaee-api-5.0-2.jar
javax.inject-1.jar
jaxb-api-2.1.jar
jaxb-impl-2.1.7.jar
jaxb-xjc-2.1.7.jar
jaxen-1.1.1.jar
jaxws-tools-2.1.3.jar
jboss-j2se-200504122039.jar
jcl104-over-slf4j-1.4.2.jar
jettison-1.2.jar
jibx-bind-1.2.jar
jibx-run-1.2.jar
jsp-api-2.1.jar
jsr311-api-1.0.jar
jta-1.1.jar
juli-6.0.16.jar
junit-4.8.2.jar
knowledge-api-5.3.0.Final.jar
log4j-1.2.16.jar
mvel2-2.1.0.drools4.jar
neethi-2.0.1.jar
ognl-2.6.11.jar
ojdbc14-10.2.0.3.0.jar
p-my-web-app-legacy-1.0-SNAPSHOT-classes.jar
poi-3.2-FINAL.jar
primefaces-3.4.2.jar
quartz-2.0.2.jar
regexp-1.2.jar
servlet-api-2.5.jar
slf4j-api-1.6.1.jar
slf4j-log4j12-1.4.2.jar
spring-aop-3.2.1.RELEASE.jar
spring-asm-3.1.4.RELEASE.jar
spring-aspects-3.2.1.RELEASE.jar
spring-beans-3.2.1.RELEASE.jar
spring-context-3.2.1.RELEASE.jar
spring-context-support-3.2.1.RELEASE.jar
spring-core-3.2.1.RELEASE.jar
spring-expression-3.2.1.RELEASE.jar
spring-instrument-3.2.1.RELEASE.jar
spring-jdbc-3.2.1.RELEASE.jar
spring-jms-3.2.1.RELEASE.jar
spring-orm-3.2.1.RELEASE.jar
spring-oxm-3.2.1.RELEASE.jar
spring-test-3.2.1.RELEASE.jar
spring-tx-3.2.1.RELEASE.jar
spring-web-3.2.1.RELEASE.jar
spring-webmvc-3.2.1.RELEASE.jar
standard-1.0.6.jar
stax-api-1.0.1.jar
stax2-api-3.0.1.jar
stringtemplate-3.2.1.jar
struts2-core-2.1.6.jar
struts2-dojo-plugin-2.2.3.1.jar
struts2-tiles-plugin-2.1.6.jar
tiles-api-2.0.6.jar
tiles-core-2.0.6.jar
tiles-jsp-2.0.6.jar
tiles-servlet-2.1.2.jar
tribes-6.0.16.jar
woden-api-1.0M9.jar
woden-impl-commons-1.0M9.jar
woden-impl-dom-1.0M9.jar
woodstox-core-asl-4.0.7.jar
wsdl4j-1.6.2.jar
wstx-asl-3.2.9.jar
xalan-2.7.0.jar
xml-resolver-1.2.jar
xmlbeans-2.3.0.jar
XmlSchema-1.4.7.jar
xpp3_min-1.1.4c.jar
xstream-1.3.1.jar
xwork-2.1.2.jar 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T19:02:09.980

所以你这里有版本冲突

```
spring-aop-3.2.1.RELEASE.jar
spring-asm-3.1.4.RELEASE.jar
spring-aspects-3.2.1.RELEASE.jar
spring-beans-3.2.1.RELEASE.jar
spring-context-3.2.1.RELEASE.jar
spring-context-support-3.2.1.RELEASE.jar
spring-core-3.2.1.RELEASE.jar
spring-expression-3.2.1.RELEASE.jar
spring-instrument-3.2.1.RELEASE.jar
spring-jdbc-3.2.1.RELEASE.jar
spring-jms-3.2.1.RELEASE.jar
spring-orm-3.2.1.RELEASE.jar
spring-oxm-3.2.1.RELEASE.jar
spring-test-3.2.1.RELEASE.jar
spring-tx-3.2.1.RELEASE.jar
spring-web-3.2.1.RELEASE.jar
spring-webmvc-3.2.1.RELEASE.jar 
```

其他库是 3.2.1，spring-asm 是 3.1.4。一般来说，spring jars 应该是相同的版本。

Spring-asm 库捆绑在 3.2 系列的 spring-core 中（[源代码](http://www.springsource.org/node/3654)）：

> 从 3.2 M2 [..] 开始，我们已经取消了 M2 中的专用 spring-asm jar，转而将 org.springframework.asm 类直接包含在 spring-core 中。

所以在这种情况下，它应该被排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T13:30:26.410

而且，只是为了说明这一点（为将来的我自己），我必须添加`{ transitive = false }`到我的`BuildConfig.groovy`文件中。

例如

```
grails.project.dependency.resolution = {
    plugins {
        ...
        compile(":spring-security-core:2.0-RC2")
        compile(":spring-security-facebook:0.15.1-CORE2"){ transitive = false }
        ...
    }
} 
```

# vba - Run-Time error 91 I'm creating a macro that automatically creates a visio diagram from an excel spreadsheet where the diagram is representative of connections in a row on the exce 问问题 问问题 2013-02-27T16:56:57.177 1801 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm creating a macro that automatically creates a visio diagram from an excel spreadsheet where the diagram is representative of connections in a row on the excel spreadsheet. I'm getting this error and i can't find out the reason, be aware i am reasonably inexperienced at vba. My problem arises when i try to place connections between two objects that have already been placed. to call these objects again i am trying to use their unique id's but for some reason i can't get past the first hurdle. if theres any insight you can offer to help i'd be glad, forgive the messy code! While Current_Row < Last_Row While current_object <= counter object = "Ellipse." & current_object Set ShpObj = AppVisio.ActivePage.Shapes(object) If ShpObj.Text = Worksheets("TempSheet").Cells(Current_Row, COLUMN2).Value Then While current_get <= counter object = "Ellipse." & current_get ShpObj2 = AppVisio.ActivePage.Shapes(object) If ShpObj2.Text = Worksheets("TempSheet").Cells(Current_Row, COLUMN2).Value Then ShpObj2.AutoConnect ShpObj, visioAutoconnecDirRight, connector '(setting the color and label) Set ShpObj2 = Nothing End If current_get = current_get + 1 Wend End If current_object = current_object + 1 current_get = 1 Set ShpObj = Nothing Wend So thats the block thats causing the issue, if you'd like to see the rest of the modules you can find it in a forum post here http://visguy.com/vgforum/index.php?topic=4633.0 FFTW method fftw_cleanup() causing SIGABRT Good day , I am running a simulation program implemented in C++ which uses the FFTW libraries. The program was working fine for weeks. I now had to make some changes to a certain class A and now the program crashes at runtime with SIGABRT. I get no compiler warnings however(-Wall set). The call stack of the Netbeans debugger looks like this main -> ~class B -> class B::kill() -> fftw_cleanup() -> fftw_planner_destroy() -> ??() -> ??() -> abort() -> raise() -> __kernel_vsyscall() The peculiar thing is that the call stack does not list the class I changed, nor is it a member of class B or directly connected to it. What exactly can cause fftw_cleanup() to fail (since the function takes no arguments)? PS: I am using Netbeans 7.2.1 in a linux(opensuse) virtual machine. vbaexcelvisio 4 1 回答 1 This answer is useful 3 看起来您忘记正确设置 ShpObj2，然后在条件语句中使用它。 换线试试 ShpObj2 = AppVisio.ActivePage.Shapes(object) 和： Set ShpObj2 = AppVisio.ActivePage.Shapes(object) 于 2013-02-27T17:01:44.830 回答 Related 1 c# - DoubleAnimation，我如何以某个值执行动作？ 0 mongodb - How would one 'build' embedded documents in mongoid? 3 php - php 代码总是运行 else 而不是 if 1 sql - sql 将行转置为列 1 php - sql 触发器和技术债务 1 php - 将数据库查询保存到数组中，并将 user_id 的所有条目分组到一个数组条目中 1 wordpress - 自定义帖子永久链接中的Wordpress自定义帖子永久链接结构 1 java - how to integrate springREST into wicket website? 1 python - 有效地处理python中的键列表 3 java - 两个向量误差的交叉函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15117796
> 
> 赞同：0
> 
> 时间：
> 
> 标签：vba, excel, visio

I'm creating a macro that automatically creates a visio diagram from an excel spreadsheet where the diagram is representative of connections in a row on the excel spreadsheet. I'm getting this error and i can't find out the reason, be aware i am reasonably inexperienced at vba. My problem arises when i try to place connections between two objects that have already been placed. to call these objects again i am trying to use their unique id's but for some reason i can't get past the first hurdle.

if theres any insight you can offer to help i'd be glad, forgive the messy code!

```
 While Current_Row < Last_Row

    While current_object <= counter
        object = "Ellipse." & current_object

        Set ShpObj = AppVisio.ActivePage.Shapes(object)

        If ShpObj.Text = Worksheets("TempSheet").Cells(Current_Row, COLUMN2).Value Then

            While current_get <= counter
                object = "Ellipse." & current_get

                ShpObj2 = AppVisio.ActivePage.Shapes(object)

                If ShpObj2.Text = Worksheets("TempSheet").Cells(Current_Row, COLUMN2).Value Then

                    ShpObj2.AutoConnect ShpObj, visioAutoconnecDirRight, connector '(setting the color and label)

                    Set ShpObj2 = Nothing
                End If
                current_get = current_get + 1
            Wend
        End If

    current_object = current_object + 1
    current_get = 1

    Set ShpObj = Nothing
    Wend 
```

So thats the block thats causing the issue, if you'd like to see the rest of the modules you can find it in a forum post here [http://visguy.com/vgforum/index.php?topic=4633.0](http://visguy.com/vgforum/index.php?topic=4633.0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:01:44.830

看起来您忘记正确**设置** `ShpObj2`，然后在条件语句中使用它。

换线试试

`ShpObj2 = AppVisio.ActivePage.Shapes(object)`

和：

`Set ShpObj2 = AppVisio.ActivePage.Shapes(object)`

# c++ - FFTW 方法 fftw_cleanup() 导致 SIGABRT

> ID：15117797
> 
> 赞同：1
> 
> 时间：2013-02-27T16:56:59.963
> 
> 标签：c++, sigabrt, fftw

美好的一天，
我正在运行一个用 C++ 实现的模拟程序，它使用 FFTW 库。该程序运行良好数周。我现在必须对某个 A 类进行一些更改，现在程序在运行时使用 SIGABRT 崩溃。但是，我没有收到编译器警告（-Wall set）。
Netbeans 调试器的调用堆栈如下所示

```
main -> ~class B -> class B::kill() -> fftw_cleanup() -> fftw_planner_destroy() -> 
??() -> ??() -> abort() -> raise() -> __kernel_vsyscall() 
```

奇怪的是，调用堆栈没有列出我更改的类，也不是 B 类的成员或直接连接到它。

究竟是什么导致 fftw_cleanup() 失败（因为该函数没有参数）？

PS：我在 linux(opensuse) 虚拟机中使用 Netbeans 7.2.1。

# sql - Oracle Apex - 逗号分隔的 LOV

> ID：15117798
> 
> 赞同：1
> 
> 时间：2013-02-27T16:56:59.573
> 
> 标签：sql, list, select, oracle-apex

我正在使用 Oracle Apex 4,2。我有一个表，其中有一列称为“版本”。在每一行的“版本”列中，都有一个由逗号分隔的值列表，例如“1,2,3,4”。
我正在尝试创建一个选择列表，其值列表将是由逗号分隔的每行的每个值。对此的 SQL 查询是什么？

**例子：**

表名称：产品

```
Name     | Versions
--------------------
myProd1  | 1,2,3
myProd2  | a,b,c 
```

期望的输出：
两个选择列表。
第一个很明显，我只是从 products 表中选择 name 列。这样用户就可以选择他们想要的任何产品。第二个是我不确定的。假设用户从第一个选择列表中选择了“myProd1”。然后第二个选择应包含以下值列表供用户选择：“1.0”、“1.1”或“1.2”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T17:26:09.277

在阅读了您的最新评论后，我了解到您想要的不是 LOV，而是列表项。虽然它也可以是一个LOV。第一个列表项/lov 将仅包含用户从中选择的所有产品，例如 Prod1、Prod2、Prod3... 第二个列表项将所有版本从逗号分隔值转换为您的示例中的表格，如下面的示例. 因为在我的理解中，用户可能只能从这个列表中为每个产品选择一个值。单个产品可能有多个值，例如 Prod1 有值 1、2、3、4。但用户只需选择一个。正确的？这就是您需要将逗号值转换为表格的原因。第一个查询选择是 smth lk 这个：

```
SELECT prod_id
  FROM your_prod_table
 /

 id      
 --------
 myProd1 
 myProd2 
 ..... 
```

第二个查询应该选择 product_id 在 your_prod_table 中的所有版本：

```
 SELECT version FROM your_versions_table
   WHERE prod_id IN (SELECT prod_id FROM your_prod_table)
 /

 Versions
 --------
 1,2,3,4   -- myProd1 values
 a,b,c,d   -- myProd2 values
 ..... 
```

以上将返回产品的所有版本，例如 myProd1 的所有值等...

使用我的示例转换逗号 sep。值表。将硬编码的 '1,2,3,4' 替换为表中的值列。将 dual 替换为您的表名

如果您在单个查询和单个结果中需要产品和版本，那么只需连接/外连接（左、右连接）两个表。

```
SELECT p.prod_id, v.version 
  FROM your_prod_table     p
     , your_versions_table v
  WHERE p.prod_id = v.prod_id
 / 
```

在这种情况下，您将在输出中得到 smth lk：

```
 id      |  Values
 ------------------
 myProd1 | 1,2,3,4
 myProd2 | a,b,c,d 
```

如果您在上面的查询中将逗号转换为表格，那么您将得到这个 - 全部在一个列表或 LOV 中：

```
 id      |  Values
 ------------------
 myProd1 | 1
 myProd1 | 2
 myProd1 | 3
 myProd1 | 4
 myProd2 | a
 myProd2 | b
 myProd2 | c
 myProd2 | d 
```

我希望这有帮助。同样，如果 APEX 中可用，您可以使用 LOV 或列表值。两个单独的值列表——一个用于产品，另一个用于版本——对我来说更有意义。如果是列表项，您将需要如上所述的两个单独的查询，并且仅对值/版本进行逗号到表的转换会更容易。但这取决于你。

逗号到表格示例：

```
-- Comma to table - regexp_count --
SELECT trim(regexp_substr('1,2,3,4', '[^,]+', 1, LEVEL)) str_2_tab
  FROM dual
 CONNECT BY LEVEL <= regexp_count('1,2,3,4', ',')+1
/

-- Comma to table - Length -
SELECT trim(regexp_substr('1,2,3,4', '[^,]+', 1, LEVEL)) token
  FROM dual
CONNECT BY LEVEL <= length('1,2,3,4') - length(REPLACE('1,2,3,4', ',', ''))+1
/

-- Comma to table - instr --
SELECT trim(regexp_substr('1,2,3,4', '[^,]+', 1, LEVEL)) str_2_tab
  FROM dual
 CONNECT BY LEVEL <= instr('1,2,3,4', ',', 1, LEVEL - 1)
/ 
```

以上所有内容的输出都是相同的：

```
STR_2_TAB
----------
1
2
3
4 
```

逗号到表 - PL/SQL-APEX 示例。对于 LOV，您需要 SQL 而不是 PL/SQL。

```
DECLARE
  v_array apex_application_global.vc_arr2;
  v_string varchar2(2000);
BEGIN
-- Convert delimited string to array
   v_array:= apex_util.string_to_table('alpha,beta,gamma,delta', ',');

  FOR i in 1..v_array.count LOOP
    dbms_output.put_line('Array: '||v_array(i));
  END LOOP;

 -- Convert array to delimited string
  v_string:= apex_util.table_to_string(v_array,'|');
  dbms_output.put_line('String: '||v_string);
END;
/ 
```

# regex - Perl Use of uninitialized value in substitution

> ID：15117802
> 
> 赞同：0
> 
> 时间：2013-02-27T16:57:15.877
> 
> 标签：regex, perl, initialization, substitution

Why is this generating the error:

**Use of uninitialized value $match in substitution (s///) at ...**

```
my $sub = 0;  #added
my $m;  #added

open (FH1, "<FILE1.txt") || die $!;
open (FH2, "<FILE2,txt") || die $!;

my @strings = (<FH2>);  #each line of the file into an array
close FH2 or die $!;

my $here;
while ( my $url = <FH1> ) {
    chomp $url;

    foreach my $sub (@strings) {      
         my $repeat = 1; 
         while ((my $m = $_) =~ s|(?<![/])(?:[/](?![/])[^/]*){$repeat}[^/]*\K|$sub|)  #<-- Error states the error is occurring here
         {

              print "$m\n";   
              $repeat++;    

              push( @{ $here->{$url} }, $m ); 
         }        
    }
} 
```

There is definitely something in the files (as I can print each of the lines inside the `foreach` loop) and the regular expression substitution definitely works as it has been tested in its own program before I tried to move it into this program.

**Is it something obvious I'm overlooking?**

Your help would be much appreciated, many thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:08:37.570

You never assign anything to `$_`.

```
while ((my $match = $_) =~ ... 
```

should be

```
while ((my $match = $url) =~ ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:08:40.480

`$match` is uninitialized, as the error says. It is set to `$_`, which is uninitialized — you are explicitly providing loop variables (`$url` and `$sub`), so the implicit variable is not initialized in this case.

I assume you mean to `... ($match = $url) =~ s/the subst/.../ ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:02:23.927

`@strings`有一个未初始化的字符串。您正在尝试使用此字符串（通过`$sub`）来替换正则表达式。确保`@strings`有你想要的数据。

# ruby-on-rails - Convert an ActiveRecord column to PostGIS Point

> ID：15117803
> 
> 赞同：0
> 
> 时间：2013-02-27T16:57:18.950
> 
> 标签：ruby-on-rails, postgresql, activerecord, postgis, rgeo

My setup:

*   Ruby 2.0.0
*   Rails 3.2.12
*   most recent `pg` gem
*   most recent `activerecord-postgis-adapter` gem
*   most recent `rgeo-geojson` gem
*   Postgres 9.1.6
*   PostGIS 2

I've asked something similar a few days ago. ([Need to convert a Boolean from Postgres (== String) to a Ruby Boolean](https://stackoverflow.com/questions/14920537/need-to-convert-a-boolean-from-postgres-string-to-a-ruby-boolean)). There I had to convert a value from a custom select to boolean. This was pretty straight forward, by just adding this to my model:

```
def value_name
  ActiveRecord::ConnectionAdapters::Column.value_to_boolean(self[:value_name])
end 
```

But now I receive a value of type `Point` (which is a type from PostGIS). Its string representation in database looks like `"0101000000EE7C3F355EF24F4019390B7BDA011940"`, but it has to become a (I think) `RGeo::Feature::Point` or maybe `RGeo::Geos::CAPIPointImpl` ?!

Now I looked at `ActiveRecord::ConnectionAdapters::Column` ([http://rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/Column](http://rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/Column)), I can only find `value_to_boolean` and `value_to_decimal`.

Then I recognized that there is also `ActiveRecord::ConnectionAdapters::PostgreSQLColumn` ([http://rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/PostgreSQLColumn](http://rubydoc.info/docs/rails/ActiveRecord/ConnectionAdapters/PostgreSQLColumn)), but it doesn't seem to have any useful methods.

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:52:13.893

是的，postgis 适配器确实有效，并提供了更优雅的解决方案。

在我的 Gemfile 中：

```
gem 'rails', '3.2.12'

gem 'pg'
gem 'rgeo-activerecord'
gem 'activerecord-postgis-adapter' 
```

然后在模型中：

```
class MyPoint < ActiveRecord::Base
  set_rgeo_factory_for_column(:geom, RGeo::Geos.factory(srid: 4326))
  attr_accessible :geom
end 
```

查看您的 RGeo 安装是否支持 Geos：

```
>> RGeo::Geos::supported?
true 
```

这就是你得到的 - 在这种情况下模型的属性 geom `RGeo::Geos::CAPIPointImpl`（将根据工厂类而有所不同）。要让这个工厂正常工作，您需要在安装 RGeo 之前安装带有开发文件的 Geos。不一定是 Geos 工厂和 4326，RGeo 有工厂在纯 Ruby 中实现，在文档中找到你最好的匹配工厂类和 SRID：[http ://rubydoc.info/github/dazuma/rgeo/master/index](http://rubydoc.info/github/dazuma/rgeo/master/index)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:46:39.090

我找到了一个解决方案（搜索`rgeo`and `parse`）：

```
def my_value
  a = RGeo::WKRep::WKBParser.new
  a.parse(self[:my_value])
end 
```

我只需要知道这是否是正确的方法。来自 Java 世界，我是这样读的：

*   For every(!) `my_value`: 创建一个新的 WKBParser 实例

如果是这种情况：我怎样才能只创建它的一个实例并在每次调用该方法时重用它？

* * *

或者更详细地说：自动解析器如何处理这个问题？它在哪里被调用？

**我认为**它是在这里创建的：[https](https://github.com/dazuma/activerecord-postgis-adapter/blob/master/lib/active_record/connection_adapters/postgis_adapter/spatial_column.rb) ://github.com/dazuma/activerecord-postgis-adapter/blob/master/lib/active_record/connection_adapters/postgis_adapter/spatial_column.rb （第179和181行）

但是我怎样才能在我的模型中重用它呢？

**背景信息：**解析器自动适用于真实表列，但我的列是在查询中创建的。

* * *

找到了正确的方法：

```
def my_value
  RGeo::Geos.factory.parse_wkb(self[:my_value])
end 
```

:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T17:16:56.297

尝试这样的事情：

```
def value_name
  point_regex = /POINT \(([0-9]*\.[0-9]*) ([0-9]*\.[0-9]*)\)/
  match_data = self[:value_name].match(point_regex)
  match_data[1], match_data[2]
end 
```

它将返回几个值 [x, y] 代表您的观点。你必须做相反的事情，即定义一个value_name=(x,y)。

# php - php 中的 $_SESSION 变量（逐页）

> ID：15117811
> 
> 赞同：0
> 
> 时间：2013-02-27T16:57:43.607
> 
> 标签：php, html

每当我进入一个页面，即登录页面或任何其他页面时，我都想将页面的名称保存在一个`$_SESSION`变量中。

登录页面：

```
<?php
    session_start();
    $_SESSION['page'] = 'login.htm';    
?> 
```

它仅适用于登录页面，不会覆盖其他页面，例如主页：

```
<?php
    session_start();
    $_SESSION['page'] = "home.htm"; 
?> 
```

我需要会话变量'page'来保存我的最后一页，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:59:26.047

Why not just use `$_SERVER['HTTP_REFERER']`? This will give you the previous page in PHP, without having to add anything to sessions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:10:55.723

If all you need is default "back" functionality you should let the browser handle it.

If what you want is something to be used as a breadcrumb following some internal order (or path in a tree) my advice is to let each page "know" the path that leads to it.

If you really need to know from what page the user came from save it to a previous variable before you write over the current variable.

```
// Make sure user didnt just refresh the page
if ($_SESSION["current"] !== "currentPage.php") {
  $_SESSION["previous"] = $_SESSION["current"];
  $_SESSION["current"] = "currentPage.php";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T17:01:49.990

当您导航到新页面时，首先检索保存的“后退”变量（并在后退链接/面包屑或其他内容中使用它），然后用当前页面覆盖会话“后退”变量，以便为下一个页面做好准备移动 =)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:59:30.897

You're using different keys.. `'page'` and `'back'`.

# push-notification - 在 Windows Phone 中同时发送 Toast 和 Tile 通知

> ID：15117815
> 
> 赞同：1
> 
> 时间：2013-02-27T16:57:52.477
> 
> 标签：push-notification, windows-phone-7.1, mpns

是否可以在 Windows Phone 中同时发送 Toast 和 Tile 通知？我想在手机上同时接收 Toast 和 Tile 通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:14:16.990

这表明[这](https://stackoverflow.com/questions/14560068/sending-a-tile-and-toast-notification-through-at-the-same-time)是可能的，但[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202945%28v=vs.105%29.aspx)另有说明：

> 为适当的通知类型形成消息。以下部分描述了 toast、Tile 和原始通知消息的消息格式。您一次只能将一种通知类型（toast、Tile 或 raw）发布到服务器。如果要同时向同一客户端设备发送多种通知类型，则必须为每种通知类型创建单独的 POST 消息。

# jpa - 是否可以通过并测试 JPA 中的空列表？

> ID：15117816
> 
> 赞同：7
> 
> 时间：2013-02-27T16:57:57.960
> 
> 标签：jpa, jpa-2.0

我有一个以 a`List`作为参数的 JPQL 命名查询。我在一个`IN`短语中使用参数：

```
...WHERE x.id IN :list 
```

我想做类似以下的事情，但语法显然不允许我这样做：

```
...WHERE :list IS EMPTY OR x.id IN :list 
```

也不会：

```
...WHERE SIZE(:list) = 0 OR x.id IN :list 
```

我在 JPA 2.0 命名查询中尝试做的事情是不可能的吗？我知道如何通过标准 API 或使用普通的旧 JPQL 字符串来做到这一点。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-02-27T17:10:11.070

您在查询中尝试执行的操作似乎毫无意义。您正在尝试使用参数的状态来限制查询结果。但是您不会将此参数与您选择的任何内容进行比较。

想想这个查询（没有意义）：

```
SELECT * FROM SOMETABLE WHERE :list IS EMPTY 
```

所以我认为你需要在两个不同的查询之间进行选择之前检查 :list 是否为空：

如果`:list`不为空：`...WHERE x.id IN :list`

如果`:list`为空：`(NO WHERE CLAUSE AT ALL)`

# asp.net-mvc - MVC WebGrid setting up column value

> ID：15117824
> 
> 赞同：2
> 
> 时间：2013-02-27T16:58:08.527
> 
> 标签：asp.net-mvc, razor, webgrid

Was looking everywhere but couldn't find an answer. I have a webgrid which displays data from an IEnumerable. I do not want to create a view model especially for the purpose of the grid, so while creating columns, I use related properties. Like so:

```
grid.Column(format: @<text>
                    @item.User.FullName
                    </text>,
            header: "User"), 
```

That's for many to one relationship, and it works fine. I wanted to use similar trick with many to many like so:

```
grid.Column(format: @<text>
                    @item.Companies.FirstOrDefault().Title
                    </text>,
            header: "Company"), 
```

But got an error saying that

```
System.Collections.Generic.List<ActivityLog.Domain.Entities.Company>' does not contain a definition for 'FirstOrDefault' 
```

Is than any other way I can source this value to use it in the webgrid?

Or should I:

opt 1) use some other presentation helper, or alternatively build an html table in foreach loop

opt 2) create view model to accommodate all properties needed for the WebGrid

Which one would be more appropriate do you think?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:51:35.103

确保您已添加

```
@using System.Linq; 
```

在您的 cshtml 文件的顶部。

# parsing - Html Agility Pack xPath 问题

> ID：15117825
> 
> 赞同：1
> 
> 时间：2013-02-27T16:58:14.107
> 
> 标签：parsing, xpath, html-agility-pack

我正在开发一个 .Net 控制台应用程序。
我想请求一个 HTML 页面，然后在里面获取一些数据。
我使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)从响应 HTML 页面构建对象模型并使用 xPath 选择节点。

这是响应 HTML 页面的摘录：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- ... -->
<body>
    <div class="conteneur">
        <!-- ... -->
        <div class="page">
            <div class="inter_page">
                <!-- ... -->
                <form action="missions.html" method="post" id="formliste">
                <table class="tbl_deco_mini" cellspacing="0" style="width: 30%; margin: 0px;">
                    <tr>
                        <!-- ... -->
                    </tr>
                    <tr>
                        <td colspan="2" class="td">
                            <div class="inliste">
                                <p class="ligne_epee">
                                    <a id="3"></a><a href="http://ffta.mimigyaru.com/missions,affiche_001-moisson-dherbe.html#3"
                                        class="simple">
                                        <img src="http://ffta.mimigyaru.com/medias/divers/mission_batail.png" alt="Moisson d'herbe"
                                            class="img_middle" title="Moisson d'herbe" /></a>&nbsp;<a href="http://ffta.mimigyaru.com/missions,affiche_001-moisson-dherbe.html#3">001-Moisson
                                                d'herbe</a>
                                </p>
                                <!-- ... -->
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <!-- ... -->
                    </tr>
                </table>
                </form>
            </div>
        </div>
        <!-- ... -->
    </div>
</body>
</html> 
```

我想选择`<table>`节点的第一个子`<form>`节点。
我写了以下代码：

```
HtmlDocument l_missionsDoc = new HtmlDocument();
l_missionsDoc.Load(l_stream);

XPathNavigator l_navigator = l_missionsDoc.CreateNavigator();
XPathNodeIterator l_iterator = l_navigator.Select("//form[@id='formliste']/table");

if (l_iterator.Count <= 0) continue; 
```

`l_iterator.Count`等于 0 但它必须等于 1。
我的 xPath 选择有什么问题？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:20:09.797

这是因为 HTML Agility Pack 对 FORM 标记进行了特殊处理。原因在此处描述：[HtmlAgilityPack -- <form> 是否出于某种原因自行关闭？](https://stackoverflow.com/questions/4218847/htmlagilitypack-does-form-close-itself-for-some-reason)

因此，您基本上需要删除该特殊处理，如下所示（必须在任何加载*之前发生）：*

```
// instruct the library to treat FORM like any other tag
HtmlNode.ElementsFlags.Remove("form");

HtmlDocument l_missionsDoc = new HtmlDocument();
l_missionsDoc.Load(l_stream);

XPathNavigator l_navigator = l_missionsDoc.CreateNavigator();
XPathNodeIterator l_iterator = l_navigator.Select("//form[@id='formliste']/table");

if (l_iterator.Count <= 0) continue; 
```

# sql - 当表不直接相关时选择多个计数

> ID：15117826
> 
> 赞同：0
> 
> 时间：2013-02-27T16:58:14.263
> 
> 标签：sql, postgresql

用户表：

*   user_id（每个用户不同）
*   source_id（用户可能有相同的来源）

规则表：

*   white_rules
*   black_rules
*   一般规则

这些表看起来都一样，并且有：

*   victim_id（与 users 表中的 user_id 相关）。
*   rule_id（与不同的表相关联，这在此处并不重要）

我需要的是每个source_id 提取每种类型（白色，黑色，通用）的总规则量。

例子：

*   source_id: 5 ---> 共70条白规，共32条黑规，共21条一般规则
*   source_id: 7 ---> 共 2 条白色规则，共 0 条黑色规则，共 4 条通用规则

依此类推...对于用户表中列出的所有不同来源。

我尝试的是：

```
SELECT source_id,
count(w.victim_id) as total_white,
count(b.victim_id) as total_black,
count(g.victim_id) as total_general
from users
LEFT JOIN white_rules as w ON (user_id=w.victim_id)
LEFT JOIN black_rules as b ON (user_id=b.victim_id)
LEFT JOIN general_rules as g ON (user_id=g.victim_id)
where deleted='f' and source is not null
group by source; 
```

但是我得到的结果表有错误（更高）的数字，而不是我期望得到的数字，所以我一定做错了什么:) 会感谢任何朝着正确方向的铰链。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:25:16.307

您需要在子查询中进行计数，或计数不同，因为您的多个 1 到多个关系导致交叉连接。我不知道您的数据，但想象一下这种情况：

**用户：**

```
User_ID |   Source_ID
--------+--------------
  1     |      1 
```

**White_Rules**

```
Victim_ID | Rule_ID
----------+-------------
   1      |    1
   1      |    2 
```

**Black_Rules**

```
Victim_ID | Rule_ID
----------+-------------
   1      |    3
   1      |    4 
```

如果你跑

```
SELECT  Users.User_ID, 
        Users.Source_ID, 
        White_Rules.Rule_ID AS WhiteRuleID, 
        Black_Rules.Rule_ID AS BlackRuleID
FROM    Users
        LEFT JOIN White_Rules
            ON White_Rules.Victim_ID = Users.User_ID
        LEFT JOIN Black_Rules
            ON Black_Rules.Victim_ID = Users.User_ID 
```

您将获得`White_Rules.Rule_ID`和的所有组合`Black_Rules.Rule_ID`：

```
User_ID | Source_ID | WhiteRuleID | BlackRuleID
--------+-----------+-------------+-------------
  1     |    1      |      1      |      3
  1     |    1      |      2      |      4
  1     |    1      |      1      |      3
  1     |    1      |      2      |      4 
```

因此计算结果将返回 4 个白色规则和 4 个黑色规则，即使每个规则只有 2 个。

如果您将查询更改为此，您应该得到所需的结果：

```
SELECT  Users.Source_ID,
        SUM(COALESCE(w.TotalWhite, 0)) AS TotalWhite,
        SUM(COALESCE(b.TotalBlack, 0)) AS TotalBlack,
        SUM(COALESCE(g.TotalGeneral, 0)) AS TotalGeneral
FROM    Users
        LEFT JOIN
        (   SELECT  Victim_ID, COUNT(*) AS TotalWhite
            FROM    White_Rules
            GROUP BY Victim_ID
        ) w
            ON w.Victim_ID = Users.User_ID
        LEFT JOIN
        (   SELECT  Victim_ID, COUNT(*) AS TotalBlack
            FROM    Black_Rules
            GROUP BY Victim_ID
        ) b
            ON b.Victim_ID = Users.User_ID
        LEFT JOIN
        (   SELECT  Victim_ID, COUNT(*) AS TotalGeneral
            FROM    General_Rules
            GROUP BY Victim_ID
        ) g
            ON g.Victim_ID = Users.User_ID
WHERE   Deleted = 'f'
AND     Source IS NOT NULL
GROUP BY Users.Source_ID 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!1/3e26d/5)**

另一种选择是：

```
SELECT  Users.Source_ID,
        COUNT(Rules.TotalWhite) AS TotalWhite,
        COUNT(Rules.TotalBlack) AS TotalBlack,
        COUNT(Rules.TotalGeneral) AS TotalGeneral
FROM    Users
        LEFT JOIN
        (   SELECT  Victim_ID, 1 AS TotalWhite, NULL AS TotalBlack, NULL AS TotalGeneral
            FROM    White_Rules
            UNION ALL
            SELECT  Victim_ID, NULL AS TotalWhite, 1 AS TotalBlack, NULL AS TotalGeneral
            FROM    Black_Rules
            UNION ALL
            SELECT  Victim_ID, NULL AS TotalWhite, NULL AS TotalBlack, 1 AS TotalGeneral
            FROM    General_Rules
        ) Rules
            ON Rules.Victim_ID = Users.User_ID
WHERE   Deleted = 'f'
AND     Source IS NOT NULL
GROUP BY Users.Source_ID 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!1/3e26d/3)**

# javascript - jquery one-scroll event

> ID：15117829
> 
> 赞同：1
> 
> 时间：2013-02-27T16:58:15.223
> 
> 标签：javascript, jquery

Im using the jQuery.ScrollTo library right now like this to go directly to different selectors on the page:

```
var content = [$('#first'), $('#second'), $('#third'), $('#fourth'), $('#fifth')];
var idNumber = 0;
var max = content.length - 1;
$('#down').click(function () {
    if (idNumber < max) {
        idNumber += 1;
        $('div').scrollTo(content[idNumber], 1000);
    }
});
$('#up').click(function () {
    if (idNumber >= 1) {
        idNumber -= 1;
        $('div').scrollTo(content[idNumber], 1000);
    }
}); 
```

but what I want instead of triggering the event from a button I want the same effect with a one scroll, exactly like this page: [http://www.myprovence.fr/#p_home](http://www.myprovence.fr/#p_home)

# django - Django 1.5 索引页面

> ID：15117835
> 
> 赞同：29
> 
> 时间：2013-02-27T16:58:29.187
> 
> 标签：django

我已经将我的 django 更新到 1.5，但我有一个问题：在 urls.py 中我有

```
urlpatterns += patterns('django.views.generic.simple',
    (r'^$','direct_to_template', {'template': 'index.html'}),) 
```

在 1.4 中它工作得很好，但今天它写道

```
"Could not import django.views.generic.simple.direct_to_template. Parent module django.views.generic.simple does not exist." 
```

我在谷歌搜索 - 我找到[了这个](https://stackoverflow.com/questions/1940528/django-index-page-best-most-common-practice)，但它与我在代码中的相同。请帮忙

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-27T17:03:26.430

那个`direct_to_template()`功能已经不存在了。

用通用模板视图试试这个：

```
from django.conf.urls import patterns
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^$', TemplateView.as_view(template_name="index.html")),
) 
```

# makefile - 将共享库路径添加到 Makefile

> ID：15117836
> 
> 赞同：9
> 
> 时间：2013-02-27T16:58:32.573
> 
> 标签：makefile

我想将共享库路径添加到我的 Makefile。我已经在makefile中输入了导出命令，它甚至被调用了，但我仍然需要再次手动导出它。什么是正确的方法？

**生成文件：**

```
SOURCES = kwest_main.c fusefunc.c dbfuse.c logging.c dbbasic.c dbinit.c dbkey.c metadata_extract.c plugins_extraction.c import.c

LIBS = -L$(LIB) -lfuse -lsqlite3 -lkw_taglib -ltag_c -ltag -Wl,-rpath=.

INCLUDE = ../include
LIB = ../lib

EXE = kwest

CC = gcc

CCFLAGS = -g -Wall -Wextra -std=gnu99 -pedantic-errors -I$(INCLUDE)

OFLAGS = -c

ARCH = $(shell getconf LONG_BIT)

X = -D_FILE_OFFSET_BITS=$(ARCH)

OBJECTS = $(SOURCES:.c=.o)

$(EXE) : $(OBJECTS)
    $(CC) -o $(EXE) $(OBJECTS) $(LIBS)

%.o: %.c
    $(CC) $(OFLAGS) $(CCFLAGS) $< 

fusefunc.o: fusefunc.c
    $(CC) $(OFLAGS) $(CCFLAGS) $< $X

kwest_libs: kw_taglib
--->export LD_LIBRARY_PATH=$(LIB):$LD_LIBRARY_PATH

kw_taglib: plugin_taglib

plugin_taglib: plugin_taglib.o kwt_upd_meta.o
    gcc -g -shared -I$(INCLUDE) -Wl,-soname,libkw_taglib.so -o $(LIB)/libkw_taglib.so -ltag -ltag_c plugin_taglib.o kwt_upd_meta.o

plugin_taglib.o:
    gcc -c -g -I$(INCLUDE) -Wall -Wextra -pedantic-errors -std=gnu99 -fPIC -ltag_c -c plugin_taglib.c

kwt_upd_meta.o:
    g++ -c -g -I$(INCLUDE) -Wall -Wextra -pedantic-errors -fPIC -ltag kwt_upd_meta.cpp

c: clean

clean:
    rm -rf *.o
    rm -rf *.db

ca: cleanall

cleanall: clean
    rm -rf $(EXE)

ob: cleanall
    rm -rf ~/.config/$(EXE)/ 
```

**执行：**

```
$ ./kwest mnt
./kwest: error while loading shared libraries: libkw_taglib.so: cannot open shared object file: No such file or directory
$ export LD_LIBRARY_PATH=../lib:D_LIBRARY_PATH
$ ./kwest mnt
"executes correctly" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T17:09:31.470

通常的方法是在默认制作期间将动态库复制到标准库路径之一

> /usr/local/bin

或您的项目库路径之一，并将库添加到可执行文件使用

> -L/项目/具体/路径

在进行安装期间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T14:00:05.317

[正如这里](https://stackoverflow.com/questions/32200799/setting-path-to-shared-library-inside-a-makefile-for-compile)已经提到的，您可能想要的是链接器选项`-rpath`。

像这样，您可以为二进制文件设置默认搜索路径。看起来你甚至已经`-rpath`在你的 makefile 中使用了，但是你指定了错误的路径：

```
LIBS = -L$(LIB) -lfuse -lsqlite3 -lkw_taglib -ltag_c -ltag -Wl,-rpath=. 
```

因此二进制文件将在当前目录中搜索 dyn-libraries。但是，`../lib`您稍后添加以`LD_LIBRARY_PATH`执行二进制文件，因此给定的路径`.`似乎是错误的。

请尝试以下修复：

```
LIBS = -L$(LIB) -lfuse -lsqlite3 -lkw_taglib -ltag_c -ltag -Wl,-rpath=../lib 
```

像这样，您不需要指定 LD_LIBRARY_PATH 来执行。

# android - Activity Life Cycle Methods and Saving State

> ID：15117841
> 
> 赞同：0
> 
> 时间：2013-02-27T16:58:53.883
> 
> 标签：android, android-lifecycle

I started reading around about the activity life cycle callbacks and saving state and there are quite a few things I don't understand - I'm writing an android app but I want to ask more general questions than how to do it specifically for the few activities etc I have at the moment, I would like to have a better overall view of how this works!

There are two groups of methods I have seen being used (I have seen one or two others but don't want to confuse myself even further...)

*   onPause, onResume etc,
*   and then the onSaveInstanceState ones.

What is the difference between them and the circumstances we should be looking to use them? I have seen some questions where a poster is using one of the normal life cycle callbacks, and is told to use onSaveInstanceState instead, so when should we be implementing onPause rather than onSaveInstanceState and so on. Some posts mentioned about methods being used for transient state only, could someone expand on that?

I have seen state being used to mean slightly different things - UI/View state and Activity state, what is the difference between the two?
I am also a bit unsure with what they mean by state, when we are saving state what kind of things are we saving exactly, could anyone give some quick examples (I don't mean actual code)? The android developer guides say that the android system automatically takes care of some of this, so what should we be concerned with? Bundle objects used by onCreate and onSaveInstanceState only store simple values, so what about more complex objects and arrays.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:15:11.310

尝试使用此代码保存状态

```
@Override
protected void onSaveInstanceState(Bundle outState) {
  State s = new State(yourTextView.getText().toString());
  outState.putSerializable(State.STATE, s);
  super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  State s = (State) savedInstanceState.getSerializable(State.STATE);
  yourTextView.setText(s.getYourTextViewText());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:28:32.983

Android 可以在任何给定时间破坏您的活动，甚至终止您的进程（尽管它对用户可见时不太可能:-)）。当用户导航回活动时，应该再次显示在他或她离开之前显示在屏幕上的数据/信息。

`onSaveInstanceState`回调允许您执行此操作。

大多数视图已经自动为您执行此操作。例如，EditText 中的当前文本、ListView 的当前滚动位置等都会自动为您保存。

但是，有些内容不会自动为您保存。例如，TextView 中的当前文本，特定视图的（更改的）背景可绘制对象。

假设您在用户操作失败后显示错误消息。然后错误消息显示在 a 中`TextField`，并且 this`TextField`的背景变为红色（我只是在这里编造这个 :-)）。当用户在显示此错误时离开活动（例如按下主页按钮），活动被销毁，当用户返回活动时，错误消息和红色背景将不再显示。

这就是`onSaveInstanceState`救援的地方。
您可以`String`在其中保存包含错误消息的内容。然后在重新创建活动时，`Bundle savedInstanceState`不`onCreate`为空，您可以查询它以获取错误消息。如果此消息不为空/空，请调用错误消息并将其`setText`背景设为红色。`TextView``TextView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:02:26.500

```
protected void onPause ()
protected void onSaveInstanceState (Bundle outState) 
```

只看它，[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29) 有一个 Bundle，你可以把你需要保存的东西放进去。并在 onCreate(Bundle) 或 onRestoreInstanceState(Bundle) 中取回它；文档中的一些重要行：

> 这个方法在一个活动可能被杀死之前被调用，这样当它在未来某个时间回来时它可以恢复它的状态。不要将此方法与活动生命周期回调混淆，例如 [onPause()](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)，它总是在活动被放置在后台或销毁的途中调用，或者 onStop() 在销毁之前调用。

# r - Overlay density and histogram plot with ggplot2 using custom bins

> ID：15117843
> 
> 赞同：2
> 
> 时间：2013-02-27T16:58:57.573
> 
> 标签：r, ggplot2, histogram, kernel-density

So I have some data - gene expression in several samples - that I want to plot as an histogram binned in a way that makes sense, and then overlaying a density curve. Something along the lines of this plot: [Plotting_distributions_(ggplot2)](http://www.cookbook-r.com/Graphs/Plotting_distributions_%28ggplot2%29/hist-density.png)

```
ggplot(df, aes(x=rating)) + 
    geom_histogram(aes(y=..density..),      # Histogram with density instead of count on y-axis
                   binwidth=.5,
                   colour="black", fill="white") +
    geom_density(alpha=.2, fill="#FF6666")  # Overlay with transparent density plot 
```

![enter image description here](../Images/8ec6c6c5a4d1871e25d50da274a8aa66.png)

but with the bins being set by using cut(). This what my data looks like:

```
df <- structure(list(gene_id = c("0610005C13Rik", "0610007C21Rik", 
"0610007L01Rik", "0610007N19Rik", "0610007P08Rik", "0610007P14Rik", 
"0610007P22Rik", "0610008F07Rik", "0610009B14Rik", "0610009B22Rik", 
"Zwilch", "Zwint", "Zxda", "Zxdb", "Zxdc", "Zyg11a", "Zyg11b", 
"Zyx", "Zzef1", "Zzz3"), sample_name = structure(c(8L, 8L, 8L, 
8L, 8L, 8L, 8L, 8L, 8L, 8L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L), .Label = c("SRSF1", "SRSF2", "SRSF3", "SRSF4", "SRSF5", 
"SRSF6", "SRSF7", "GFP"), class = "factor"), fpkm = c(0, 21.7863, 
27.9083, 3.83815, 8.65554, 40.7533, 20.2477, 0, 0.670717, 41.5058, 
33.6888, 17.7709, 0.756213, 1.38326, 4.07163, 5.53123, 8.50196, 
40.8762, 2.79376, 14.6917), conf_hi = c(0, 28.6113, 33.396, 5.43846, 
10.5892, 50.3002, 25.7052, 0, 1.27673, 52.502, 40.9057, 21.8586, 
1.0982, 1.95332, 5.68713, 7.53352, 10.3355, 49.5294, 3.49622, 
17.7908), conf_lo = c(0, 14.9613, 22.4206, 2.23784, 6.72186, 
31.2064, 14.7903, 0, 0.0647031, 30.5095, 26.4719, 13.6831, 0.414229, 
0.813193, 2.45612, 3.52894, 6.66839, 32.2231, 2.0913, 11.5925
), quant_status = c("OK", "OK", "OK", "OK", "OK", "OK", "OK", 
"OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", 
"OK", "OK"), stdev = c(0, 3.4125, 2.74385, 0.800155, 0.96683, 
4.77345, 2.72875, 0, 0.3030065, 5.4981, 3.60845, 2.04385, 0.1709935, 
0.28503, 0.80775, 1.001145, 0.91677, 4.3266, 0.35123, 1.54955
)), .Names = c("gene_id", "sample_name", "fpkm", "conf_hi", "conf_lo", 
"quant_status", "stdev"), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 
7L, 8L, 9L, 10L, 185871L, 185872L, 185873L, 185874L, 185875L, 
185876L, 185877L, 185878L, 185879L, 185880L), class = "data.frame") 
```

Which I bin with cut():

```
df.bin <- transform(df, expression_bin=cut(fpkm, breaks=c(-Inf, 0.01, 0.1, 1, 10, 100, 1000, 10000, Inf), labels=c("<0.01","0.01-0.1","0.1-1","1-10","10-100","100-1000","1000-10.000", ">10.000"))) 
```

and the histogram plotting is also straightforward:

```
p.fpkm.bin <- ggplot(df.bin, aes(x=expression_bin)) + 
          geom_histogram(aes(fill = expression_bin), stat="bin") +
          #           geom_density(aes(x=fpkm),alpha=.2, fill="#FF6666")  # Overlay with transparent density plot
          facet_wrap(~ sample_name) +
          theme(axis.text.x  = element_text(angle=45, vjust=0.5)) + xlab("Expression category (fpkm)") + 
          ylab("Number of genes") + scale_fill_brewer()
p.fpkm.bin 
```

![my nice plot](../Images/3047de1643022412b06cebb97217d310.png)

The question is how to overlay the density line? Or how to define the bins inside the ggplot2 code to emulate the example plot?

# java - 如何在 Apache XMLBeans 中自动将 xsd:attribute 添加到 xsd:complexType？

> ID：15117850
> 
> 赞同：0
> 
> 时间：2013-02-27T16:59:26.377
> 
> 标签：java, xml, xsd, xmlbeans

我们在提供以下类型的 XSD 时遇到了一些麻烦：

```
<xsd:complexType name="foo">
    ...
    <xsd:attribute name="version" fixed="1" />
</xsd:complexType> 
```

然后，XML-Result 应该看起来像这样：

```
<foo version="1">...</foo> 
```

因为这不是固定属性值实际应该如何工作的，所以默认情况下 XMLBeans 不会为我们生成这样的结果。我们有数百个这样的具有不同版本的 XSD，并且希望避免手动添加它们。

有谁知道以编程方式确定给定 XMLObject 的固定属性值的方法，以便我们可以通用地添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:13:12.517

正如上述 Petru Gardea 评论所提供的[文档](http://xmlbeans.apache.org/docs/2.0.0/guide/conIntroToTheSchemaTypeSystem.html)中所述，您可以使用 SchemaTypeSystem 访问有关 XMLObjects 模式、其属性及其默认值的信息。

# php - PDO reg form results in "Please fill in all fields" when all fields are filled in

> ID：15117851
> 
> 赞同：1
> 
> 时间：2013-02-27T16:59:26.747
> 
> 标签：php, html, pdo

I am building a social network, and trying to implement PDO instead of mysql, and I haven't finished implementing all of the PDO because I can't find a way to make a working version of PDO for inserting my table values. I have no clue why it is resulting in this but here is the code. As the title says, with the PDO code I have provided, I fill in all of the fields, click sign up, and it displays "Please fill in all fields" at the top of the header. If more code is needed (for other .php pages please comment, as I do not know what all is needed. I picked the ones that I knew went together.).

original working mysql code to insert user's input into the database

```
("INSERT INTO users VALUES ('','$un','$fn','$ln','$em','$pswd','d','0')");
    die("<h2>Welcome to Rebel Connect</h2>Login to your account to get started."); 
```

Index.php

```
<? include("inc/incfiles/header.inc.php"); ?>
<?
$reg = @$_POST['reg'];
//declaring variables to prevent errors
$fn = ""; //First Name
$ln = ""; //Last Name
$un = ""; //Username
$em = ""; //Email
$em2 = ""; //Email 2
$pswd = ""; //Password
$pswd2 = ""; //Password 2
$d = ""; //Sign up Date
//registration form
$fn = strip_tags(@$_POST['fname']);
$ln = strip_tags(@$_POST['lname']);
$un = strip_tags(@$_POST['username']);
$em = strip_tags(@$_POST['email']);
$em2 = strip_tags(@$_POST['email2']);
$pswd = strip_tags(@$_POST['password']);
$pswd2 = strip_tags(@$_POST['password2']);
$d = date("y-m-d"); // Year - Month - Day

if ($reg) {
if ($em==$em2) {
// Check if user already exists
$statement = $db->prepare('SELECT username FROM users WHERE username= :username');
//query succeeded
if ($statement->execute(array(':username' => $un))) {
    //user exists
    if ($statement->rowCount() > 0){
        //check all of the fields have been filled in
        if ($fn&&$ln&&$un&&$em&&$em2&&$pswd&&$pswd2) {
            // check that passwords match
            if ($pswd==$pswd2) {
                // check the maximum length of username/first name/last name does not exceed 25 characters
                if (strlen($un)>25||strlen($fn)>25||strlen($ln)>25) {
                    echo "The maximum limit for username/first name/last name is 25 characters!";
}
else
{
    // check the length of the password is between 5 and 30 characters long
    if (strlen($pswd)>30||strlen($pswd)<5) {
        echo "Your password must be between 5 and 30 characters long!";
    }
    else
    {
        //encrypt password and password 2 using md5 before sending to database
        $pswd = md5($pswd);
        $pswd2 = md5($pswd2);
                    //prepare the SQL statement
                        $db_connect = $db->prepare
                        ("INSERT INTO users(
                            fname,
                            lname,
                            username,
                            email,
                            password,
                            d,
                            0
                        )
                        Value (
                            :fn,
                            :ln,
                            :un,
                            :em,
                            :pswd,
                            :d,
                            0
                        )"
                        );

                            //bind the parameters
                            $db_connect->bindParam(':fn', $fn);
                            $db_connect->bindParam(':ln', $ln);
                            $db_connect->bindParam(':un', $un);
                            $db_connect->bindParam(':em', $em);
                            $db_connect->bindParam(':pswd', $pwsd);
                            $db_connect->bindParam(':d', $d);

                    //execute the prepared statement
                        $db_connect->execute();
    }
        die("<h2>Welcome to Rebel Connect</h2>Login to your account to get started.");
    }
}
            }
            else {
                echo "Your passwords don't match!";
            }
        }
        else 
        {
            echo "Please fill in all fields";
        }
    }
    else
    {
        echo "Username already taken.";
    }
}
else {
    echo "Your e-mails don't match!";
}
}
?>
<?
//Login Script
if (isset($_POST["user_login"]) && isset($_POST["password_login"])) {
    $user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["user_login"]); // filter everything but numbers and letters
    $password_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["password_login"]); // filter everything but numbers and letters
    $password_login=md5($password_login);
    $sql = mysql_query("SELECT id FROM users WHERE username='$user_login' AND password='$password_login' LIMIT 1"); // query the person
    //Check for their existance
    $userCount = mysql_num_rows($sql); //Count the number of rows returned
    if ($userCount == 1) {
        while($row = mysql_fetch_array($sql)){
            $id = $row["id"];
    }
         $_SESSION["id"] = $id;
         $_SESSION["user_login"] = $user_login;
         $_Session["password_login"] = $password_login;
         exit("<meta http-equiv=\"refresh\" content=\"0\">");
         } else {
         echo 'That information is incorrect, try again';
         exit();
    }
}
?>
<div style="float: left;">
<table class="homepageTable">
        <tr>
            <td width="60%" valign="top">
             <h2>Already a member? Login below.</h2>
             <form action="index.php" method="post" name="form1" id="form1">
                <input type="text" size="25" name="user_login" id="user_login" placeholder="username" title="username"/>
                <br />
                <input type="password" size="25" name="password_login" id="password_login" placeholder="password" title="Password"/>
                <br />
                <input type="submit" name="button" id="button" value="Login to your account!">
             </form>
            </td>
            <td width="40%" valign="top">
             <h2>Sign up below...</h2>
            <form action="#" method="post">
            <input type="text" size="25" name="fname" placeholder="First Name" title="First Name" value="<? echo $fn; ?>">
            <input type="text" size="25" name="lname" placeholder="Last Name" title="Last Name" value="<? echo $ln; ?>">
            <input type="text" size="25" name="username" placeholder="Username" title="Username" value="<? echo $un; ?>">
            <input type="text" size="25" name="email" placeholder="Email" title="Email" value="<? echo $em; ?>">
            <input type="text" size="25" name="email2" placeholder="Re-enter Email" title="Re-enter Email" value="<? echo $em2; ?>">
            <input type="password" size="25" name="password" placeholder="Password" title="Password" value="<? echo $pswd; ?>">
            <input type="password" size="25" name="password2" placeholder="Re-enter Password" title="Re-enter Password" value="<? echo $pswd2; ?>"><br />
            <input type="submit" name="reg" value="Sign Up!">
            </form>
            </td>
        </tr>
</table>
</body>
</html> 
```

header.inc.php

```
<?
include ("inc/scripts/db_connect.inc.php");
session_start();
if (!isset($_SESSION["user_login"])) {

}
else
{
header("location: home.php");
}
?>
<html>
<head>
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>Rebel Reach - PHS Student Social Network</title>
</head>
<body>
<div class="headerMenu">
      <div id="wrapper">
            <div class="logo">
                  <img src="img/find_friends_logo.png">
            </div>
            <div class="search_box">
                  <form method="get" action="search.php" id="search">
                  <input name="q" type="text" size="60" placeholder="Search..." />
                  </form>
            </div>
            <div id="menu">
                  <a href="#">Home</a>
                  <a href="#">About</a>
                  <a href="#">Sign Up</a>
                  <a href="#">Login</a>
            </div>
      </div>
</div>
<br />
<br />
<br />
<br /> 
```

db_connect.inc.php

```
<?
$db = new PDO('mysql:host=localhost;dbname=socialnetwork', '*********', '*********');
?> 
```

results after taking off `@`

```
Notice: Undefined index: reg in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 3

Notice: Undefined index: fname in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 14

Notice: Undefined index: lname in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 15

Notice: Undefined index: username in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 16

Notice: Undefined index: email in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 17

Notice: Undefined index: email2 in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 18

Notice: Undefined index: password in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 19

Notice: Undefined index: password2 in C:\xampp\htdocs\tutorial\FindFriends\index.php on line 20 
```

# iis - 使用 Coldfusion 9.0.1 配置 IIS7.5

> ID：15117855
> 
> 赞同：0
> 
> 时间：2013-02-27T16:59:38.423
> 
> 标签：iis, coldfusion, iis-7.5, coldfusion-9

在过去的几天里，我一直在尝试配置 IIS 7.5 和 Coldfusion 以在我的本地计算机上运行，​​但我碰壁了。

我有两个站点，我试图在本地创建一个运行，但其中一个正在运行，另一个没有。

我的coldfusion管理员正在工作，我能够设置我的设置（数据库连接和东西）。

在 IIS 管理下，我正在创建一个站点，将其分配到我机器上的正确文件夹，将路径设置为“local.site1.com”，一切都按应有的方式运行。

当我尝试为 Site2 做同样的事情时，我从 Chrome 收到一条消息，说“糟糕！Google Chrome 找不到 local.site2.com”

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:04:27.297

添加`local.site2.com`到您的主机文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:26:46.930

如果 IIS7 和 7.5 难以实现，这两个站点是否都指向相同的代码库？

# string - perl command error

> ID：15117857
> 
> 赞同：1
> 
> 时间：2013-02-27T16:59:40.473
> 
> 标签：string, perl, file

I am using the information I found on this post

[Perl: add character to begin of a line](https://stackoverflow.com/questions/6847443/perl-add-character-to-begin-of-a-line)

to create this perl command (I need to add a |1 to the end of each string)

```
perl -p -e 's/$/|1/' C:\Users\Leslie\TABLE0212201314402-out.csv > C:\Users\Leslie\new.csv 
```

and I get the error:

*'1' is not recognized as an internal or external command, operable program or batch file*

Do I need to do something to my |1 so that it works? Thanks, Leslie

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:01:53.373

试试这个：

```
perl -p -e "s/$/|1/" C:\Users\Leslie\TABLE0212201314402-out.csv > C:\Users\Leslie\new.csv 
```

请注意在 Windows 命令 shell 中使用双引号而不是单引号。

# c# - 比较两个不同长度的整数数组时提高性能

> ID：15117859
> 
> 赞同：4
> 
> 时间：2013-02-27T16:59:47.407
> 
> 标签：c#, performance, algorithm

我对这个比较器有一个瓶颈（或者至少是一个我认为我可以做得更好的领域），它基本上是一个序数字符串比较器，但适用于整数（ushort，虽然我不认为这很重要）数组。

数组可以有不同的长度，但只有元素 [0..n] （其中 n 是最短数组的长度）匹配时，长度才有意义。在这种情况下，更长的数组被认为是“更大的”。

1 2 3 < 1 2 4

1 2 3 5 < 1 2 4

1 2 5 3 > 1 2 4

1 2 3 4 > 1 2 3

```
 public int Compare(ushort[] x, ushort[] y)
    {
        int pos = 0;
        int len = Math.Min(x.Length, y.Length);
        while (pos < len && x[pos] == y[pos])
            pos++;

        return pos < len ?
            x[pos].CompareTo(y[pos]) :
            x.Length.CompareTo(y.Length);

    } 
```

关于如何优化的任何想法？

**更新**

回应一位评论者关于我在这里实际所做的事情：我意识到我很久以前就问过一个与此相关的问题，这准确地显示了我在上下文中所做的事情。唯一的主要区别是我现在使用数组`ushort`而不是字符串作为键，因为它更紧凑。

使用整个路径作为键，我可以使用部分键从排序集中获取视图，从而为子集查询提供高性能。我试图在构建索引时提高性能。 [子集索引搜索的数据结构](https://stackoverflow.com/questions/6655431/data-structure-for-indexed-searches-of-subsets)

顺便说一句，到目前为止，我对这里的回答印象深刻，这些年来我已经问了很多关于 SO 的问题，但这绝对是我见过的最周到和最有趣的答案集合。我还不确定我的具体问题的正确答案是什么（即数百万次短数组比较），但他们每个人都教会了我一些我不知道的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:02:19.237

这是我想出的，我使用您的代码和一些并行代码的组合测试了大约 16 百万 (2^24)。

```
public int CompareParallel(ushort[]x, ushort[] y, int len, int segLen)
{
    int compareArrLen = ( len / segLen ) + 1;
    int [ ] compareArr = new int [ compareArrLen ];
    Parallel.For ( 0 , compareArrLen , 
                   new Action<int , ParallelLoopState> ( ( i , state ) =>
    {
        if ( state.LowestBreakIteration.HasValue 
                 && state.LowestBreakIteration.Value < i )
            return;
        int segEnd = ( i + 1 ) * segLen;
        int k = len < segEnd ? len : segEnd;
        for ( int j = i * segLen ; j < k ; j++ )
            if ( x [ j ] != y [ j ] )
            {
                compareArr [ i ] = ( x [ j ].CompareTo ( y [ j ] ) );
                state.Break ( );
                return;
            }
    } ) );
    int r = compareArrLen - 1;
    while ( r >= 0 )
    {
        if ( compareArr [ r ] != 0 )
            return compareArr [ r ];
        r--;
    }
    return x.Length.CompareTo ( y.Length );
}

public int CompareSequential ( ushort [ ] x , ushort [ ] y, int len )
{
    int pos = 0;
    while ( pos < len && x [ pos ] == y [ pos ] )
        pos++;

    return pos < len ?
        x [ pos ].CompareTo ( y [ pos ] ) :
        x.Length.CompareTo ( y.Length );

}

public int Compare( ushort [ ] x , ushort [ ] y ) 
{
    //determined through testing to be the best on my machine
    const int cutOff = 4096;
    int len = x.Length < y.Length ? x.Length : y.Length;
    //check if len is above a specific threshold 
    //and if first and a number in the middle are equal
    //chose equal because we know that there is a chance that more
    //then 50% of the list is equal, which would make the overhead
    //worth the effort
    if ( len > cutOff && x [ len - 1 ] == y [ len - 1 ] 
           && x [ len/2 ] == y [ len/2 ] )
    {
        //segment length was determined to be best through testing
        //at around 8% of the size of the array seemed to have the
        //on my machine
        return CompareParallel ( x , y , len , (len / 100)*8 );
    }
    return CompareSequential ( x , y, len );
} 
```

这是我写的测试：

```
class Program
{
    [Flags]
    private enum InfoLevel:byte
    {
        Detail=0x01, Summary=0x02
    }

    private static InfoLevel logLevel = InfoLevel.Summary;

    private static void LogDetail ( string content ) 
    {
        LogInfo ( InfoLevel.Detail,content );
    }

    private static void LogSummary ( string content ) 
    {
        LogInfo ( InfoLevel.Summary , content );
    }

    private static void LogInfo ( InfoLevel level , string content ) 
    {
        if ( ( level & logLevel ) == level )
            Console.WriteLine ( content );
    }

    private static void LogInfo ( InfoLevel level , string format, 
                                  params object[] arg )
    {
        if ( ( level & logLevel ) == level )
            Console.WriteLine ( format:format, arg:arg  );
    }

    private static void LogDetail ( string format , params object [ ] arg )
    {
        LogInfo ( InfoLevel.Detail , format, arg );
    }

    private static void LogSummary ( string format , params object [ ] arg )
    {
        LogInfo ( InfoLevel.Summary , format, arg );
    }

    const string _randTestResultHeader = "\r\nRandom Array Content\r\n";
    const string _equalArrayResultHeader = "Only Length Different\r\n\r\n";
    const string _summaryTestResultsHeader = 
                                "Size\t\tOrig Elps\tPara Elps\tComp Elps\r\n";
    const string _summaryBodyContent = 
                         "{0}\t\t{1:0.0000}\t\t{2:0.0000}\t\t{3:0.00000}\r\n";

    static void Main ( string [ ] args )
    {
        Console.SetOut(new StreamWriter(File.Create("out.txt")));

        int segLen = 0;
        int segPercent = 7;
        Console.WriteLine ( "Algorithm Test, Time results in milliseconds" );
        for ( ; segPercent < 13; segPercent ++ )
        {
            Console.WriteLine ( 
                      "Test Run with parallel Dynamic segment size at {0}%"
                       +" of Array Size (Comp always at 8%)\r\n" , segPercent);

            StringBuilder _aggrRandResults = new StringBuilder ( );
            StringBuilder _aggrEqualResults = new StringBuilder ( );

            _aggrRandResults.Append ( _randTestResultHeader );
            _aggrEqualResults.Append ( _equalArrayResultHeader );

            _aggrEqualResults.Append ( _summaryTestResultsHeader );
            _aggrRandResults.Append ( _summaryTestResultsHeader );

            for ( int i = 10 ; i < 25 ; i++ )
            {
                int baseLen = ( int ) Math.Pow ( 2 , i );
                segLen = ( baseLen / 100 ) * segPercent;

                var testName = "Equal Length ";
                var equalTestAverage = RandomRunTest ( testName , baseLen , 
                                                       baseLen, segLen );
                testName = "Left Side Larger";
                var lslargerTestAverage=RandomRunTest(testName,baseLen+10, 
                                                      baseLen, segLen );
                testName = "Right Side Larger";
                var rslargerTestAverage = RandomRunTest ( testName , baseLen ,
                                                        baseLen + 10, segLen );

                double [ ] completelyRandomTestAvg = new double [ 3 ];
                for ( int l = 0 ; l < completelyRandomTestAvg.Length ; l++ )
                    completelyRandomTestAvg [ l ] = ( equalTestAverage [ l ] +
                                                 lslargerTestAverage [ l ] +
                                              rslargerTestAverage [ l ] ) / 3;

                LogDetail ( "\r\nRandom Test Results:" );
                LogDetail ("Original Composite Test Average: {0}" ,
                           completelyRandomTestAvg [ 0 ] );
                LogDetail ( "Parallel Composite Test Average: {0}" ,
                            completelyRandomTestAvg [ 1 ]  );

                _aggrRandResults.AppendFormat ( _summaryBodyContent , 
                    baseLen , 
                    completelyRandomTestAvg [ 0 ] , 
                    completelyRandomTestAvg [ 1 ] , 
                    completelyRandomTestAvg [ 2 ]);

                testName = "Equal Len And Values";
                var equalEqualTest = EqualTill ( testName , baseLen , 
                                                 baseLen, segLen );

                testName = "LHS Larger";
                var equalLHSLargerTest = EqualTill ( testName , baseLen + 10 , 
                                                     baseLen, segLen );

                testName = "RHS Larger";
                var equalRHSLargerTest = EqualTill ( testName , baseLen , 
                                                     baseLen + 10, segLen );

                double [ ] mostlyEqualTestAvg = new double [ 3 ];
                for ( int l = 0 ; l < mostlyEqualTestAvg.Length ; l++ )
                    mostlyEqualTestAvg [ l ] = ( ( equalEqualTest [ l ] +
                                            equalLHSLargerTest [ l ] +
                                            equalRHSLargerTest [ l ] ) / 3 );

                LogDetail( "\r\nLength Different Test Results" );
                LogDetail( "Original Composite Test Average: {0}" , 
                           mostlyEqualTestAvg [ 0 ] );
                LogDetail( "Parallel Composite Test Average: {0}" , 
                            mostlyEqualTestAvg [ 1 ] );

                _aggrEqualResults.AppendFormat ( _summaryBodyContent , 
                                                 baseLen , 
                                                 mostlyEqualTestAvg [ 0 ] , 
                                                 mostlyEqualTestAvg [ 1 ] ,
                                                 mostlyEqualTestAvg [ 2 ]);
            }

            LogSummary ( _aggrRandResults.ToString() + "\r\n");
            LogSummary ( _aggrEqualResults.ToString()+ "\r\n");

        }
        Console.Out.Flush ( );
    }

    private const string _testBody = 
                  "\r\n\tOriginal:: Result:{0}, Elapsed:{1}"
                 +"\r\n\tParallel:: Result:{2}, Elapsed:{3}"
                 +"\r\n\tComposite:: Result:{4}, Elapsed:{5}";
    private const string _testHeader = 
                  "\r\nTesting {0}, Array Lengths: {1}, {2}";
    public static double[] RandomRunTest(string testName, int shortArr1Len, 
                                         int shortArr2Len, int parallelSegLen)
    {

        var shortArr1 = new ushort [ shortArr1Len ];
        var shortArr2 = new ushort [ shortArr2Len ];
        double [ ] avgTimes = new double [ 3 ];

        LogDetail ( _testHeader , testName , shortArr1Len , shortArr2Len ) ;
        for ( int i = 0 ; i < 10 ; i++ )
        {
            int arrlen1 = shortArr1.Length , arrlen2 = shortArr2.Length;

            double[] currResults = new double [ 3 ];

            FillCompareArray ( shortArr1 , shortArr1.Length );
            FillCompareArray ( shortArr2 , shortArr2.Length );

            var sw = new Stopwatch ( );

            //Force Garbage Collection 
            //to avoid having it effect 
            //the test results this way 
            //test 2 may have to garbage 
            //collect due to running second
            GC.Collect ( );
            sw.Start ( );
            int origResult = Compare ( shortArr1 , shortArr2 );
            sw.Stop ( );
            currResults[0] = sw.Elapsed.TotalMilliseconds;
            sw.Reset ( );

            GC.Collect ( );
            sw.Start ( );
            int parallelResult = CompareParallelOnly ( shortArr1 , shortArr2, 
                                                       parallelSegLen );
            sw.Stop ( );
            currResults [ 1 ] = sw.Elapsed.TotalMilliseconds;
            sw.Reset ( );

            GC.Collect ( );
            sw.Start ( );
            int compositeResults = CompareComposite ( shortArr1 , shortArr2 );
            sw.Stop ( );                
            currResults [ 2 ] = sw.Elapsed.TotalMilliseconds;

            LogDetail ( _testBody, origResult , currResults[0] , 
                        parallelResult , currResults[1], 
                        compositeResults, currResults[2]);

            for ( int l = 0 ; l < currResults.Length ; l++ )
                avgTimes [ l ] = ( ( avgTimes[l]*i)+currResults[l]) 
                                    / ( i + 1 );
        }
        LogDetail ( "\r\nAverage Run Time Original: {0}" , avgTimes[0]);
        LogDetail ( "Average Run Time Parallel: {0}" , avgTimes[1]);
        LogDetail ( "Average Run Time Composite: {0}" , avgTimes [ 2 ] );

        return avgTimes;
    }

    public static double [ ] EqualTill ( string testName, int shortArr1Len , 
                                       int shortArr2Len, int parallelSegLen)
    {

        const string _testHeader = 
               "\r\nTesting When Array Difference is "
               +"Only Length({0}), Array Lengths: {1}, {2}";

        int baseLen = shortArr1Len > shortArr2Len 
                          ? shortArr2Len : shortArr1Len;

        var shortArr1 = new ushort [ shortArr1Len ];
        var shortArr2 = new ushort [ shortArr2Len ];
        double [ ] avgTimes = new double [ 3 ];

        LogDetail( _testHeader , testName , shortArr1Len , shortArr2Len );
        for ( int i = 0 ; i < 10 ; i++ )
        {

            FillCompareArray ( shortArr1 , shortArr1Len);
            Array.Copy ( shortArr1 , shortArr2, baseLen );
            double [ ] currElapsedTime = new double [ 3 ];
            var sw = new Stopwatch ( );
            //See previous explaination 
            GC.Collect ( );
            sw.Start ( );
            int origResult = Compare ( shortArr1 , shortArr2 );
            sw.Stop ( );
            currElapsedTime[0] = sw.Elapsed.TotalMilliseconds;
            sw.Reset ( );

            GC.Collect ( );
            sw.Start ( );
            int parallelResult = CompareParallelOnly ( shortArr1, shortArr2, 
                                     parallelSegLen );
            sw.Stop ( );
            currElapsedTime[1] = sw.Elapsed.TotalMilliseconds;
            sw.Reset ( );

            GC.Collect ( );
            sw.Start ( );
            var compositeResult = CompareComposite ( shortArr1 , shortArr2 );
            sw.Stop ( );
            currElapsedTime [ 2 ] = sw.Elapsed.TotalMilliseconds;

            LogDetail ( _testBody , origResult , currElapsedTime[0] , 
                parallelResult , currElapsedTime[1], 
                compositeResult,currElapsedTime[2]);

            for ( int l = 0 ; l < currElapsedTime.Length ; l++ )
                avgTimes [ l ] = ( ( avgTimes [ l ] * i ) 
                                   + currElapsedTime[l])/(i + 1);
        }
        LogDetail ( "\r\nAverage Run Time Original: {0}" , avgTimes [ 0 ] );
        LogDetail ( "Average Run Time Parallel: {0}" , avgTimes [ 1 ] );
        LogDetail ( "Average Run Time Composite: {0}" , avgTimes [ 2 ] );
        return avgTimes;
    }

    static Random rand = new Random ( );
    public static void FillCompareArray ( ushort[] compareArray, int length ) 
    {
        var retVals = new byte[length];
        ( rand ).NextBytes ( retVals );
        Array.Copy ( retVals , compareArray , length);
    }

    public static int CompareParallelOnly ( ushort [ ] x , ushort[] y, 
                                            int segLen ) 
    {
       int len = x.Length<y.Length ? x.Length:y.Length;
       int compareArrLen = (len/segLen)+1;
       int[] compareArr = new int [ compareArrLen ];
       Parallel.For ( 0 , compareArrLen , 
           new Action<int , ParallelLoopState> ( ( i , state ) =>
       {
           if ( state.LowestBreakIteration.HasValue 
                    && state.LowestBreakIteration.Value < i )
               return;
           int segEnd = ( i + 1 ) * segLen;
           int k = len<segEnd?len:segEnd;

           for ( int j = i * segLen ; j < k ; j++ )
               if ( x [ j ] != y [ j ] )
               {
                   compareArr [ i ] = ( x [ j ].CompareTo ( y [ j ] ) );
                   state.Break ( );
                   return;
               }
       } ) );
       int r=compareArrLen-1;
       while ( r >= 0 ) 
       {
           if ( compareArr [ r ] != 0 )
               return compareArr [ r ];
           r--;
       }
       return x.Length.CompareTo ( y.Length );
    }

    public static int Compare ( ushort [ ] x , ushort [ ] y )
    {
        int pos = 0;
        int len = Math.Min ( x.Length , y.Length );
        while ( pos < len && x [ pos ] == y [ pos ] )
            pos++;

        return pos < len ?
            x [ pos ].CompareTo ( y [ pos ] ) :
            x.Length.CompareTo ( y.Length );

    }

    public static int CompareParallel ( ushort[] x, ushort[] y, int len, 
                                        int segLen )
    {
        int compareArrLen = ( len / segLen ) + 1;
        int [ ] compareArr = new int [ compareArrLen ];
        Parallel.For ( 0 , compareArrLen , 
            new Action<int , ParallelLoopState> ( ( i , state ) =>
        {
            if ( state.LowestBreakIteration.HasValue 
                 && state.LowestBreakIteration.Value < i )
                return;
            int segEnd = ( i + 1 ) * segLen;
            int k = len < segEnd ? len : segEnd;
            for ( int j = i * segLen ; j < k ; j++ )
                if ( x [ j ] != y [ j ] )
                {
                    compareArr [ i ] = ( x [ j ].CompareTo ( y [ j ] ) );
                    state.Break ( );
                    return;
                }
        } ) );
        int r = compareArrLen - 1;
        while ( r >= 0 )
        {
            if ( compareArr [ r ] != 0 )
                return compareArr [ r ];
            r--;
        }
        return x.Length.CompareTo ( y.Length );
    }

    public static int CompareSequential(ushort [ ] x , ushort [ ] y, int len)
    {
        int pos = 0;
        while ( pos < len && x [ pos ] == y [ pos ] )
            pos++;

        return pos < len ?
            x [ pos ].CompareTo ( y [ pos ] ) :
            x.Length.CompareTo ( y.Length );

    }

    public static int CompareComposite ( ushort [ ] x , ushort [ ] y ) 
    {
        const int cutOff = 4096;
        int len = x.Length < y.Length ? x.Length : y.Length;

        if ( len > cutOff && x [ len - 1 ] == y [ len - 1 ]
                 && x [ len/2 ] == y [ len/2 ] )
            return CompareParallel ( x , y , len , (len / 100)*8 );

        return CompareSequential ( x , y, len );
    }
} 
```

**注意：**

确保您使用优化的代码进行构建，当我不包含此步骤时，结果会大不相同，它使并行代码看起来比实际的改进要大得多。

我得到的结果是，对于非常长的相等数字集，执行时间减少了大约 33%。它仍然随着输入的增加而线性增长，但速度较慢。对于小型数据集（在我的机器上少于 4092），它的启动速度也较慢，但通常所花费的时间足够小（在我的机器上为 0.001 毫秒），以防万一你得到它是值得使用的一个大的几乎相等的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:17:50.443

可能不会有很大的不同，但是您可以将最后一个元素设置为不同的，以摆脱`pos < len`while 循环中的检查。而`pos++`对`++pos`.

```
public int Compare(ushort[] x, ushort[] y)
{
    int pos = 0;
    int len = Math.Min(x.Length, y.Length);

    // the below is probably not worth it for less than 5 (or so) elements,
    //   so just do the old way
    if (len < 5)
    {
      while (pos < len && x[pos] == y[pos])
        ++pos;

      return pos < len ?
        x[pos].CompareTo(y[pos]) :
        x.Length.CompareTo(y.Length);
    }

    ushort lastX = x[len-1];
    bool lastSame = true;
    if (x[len-1] == y[len-1])
        --x[len-1]; // can be anything else
    else
        lastSame = false;

    while (x[pos] == y[pos])
        ++pos;

    return pos < len-1 ?
        x[pos].CompareTo(y[pos]) :
        lastSame ? x.Length.CompareTo(y.Length)
                 : lastX.CompareTo(y[len-1]);
} 
```

**编辑：**只有在许多元素从一开始就相同的情况下，你才能真正获得性能提升（当存在早期差异时，情况会更糟，正如 pkuderov 所提到的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:43:00.930

对不起，回答太长了，但这个问题让我很感兴趣，我花了几个小时调查，我想分享结果。我写了一些测试用例生成器和粗略的性能测试器

什么东西在那里：

1.  生成完全随机的数组
2.  检查 3 种比较方法的执行时间
3.  生成相似概率高的数组
4.  检查执行时间。

我使用了 3 种方法

1.  OP的
2.  My - Idea - 将两个索引操作更改为指针增量
3.  Dukeling's - Idea - 删除不必要的比较

我从短数组开始（长度为 5-15）

方法 1 在两种测试变体中都是最快的（由 pkuderov 预测）

如果我们增加数组的长度，情况会发生变化。

当数组长度在 500 到 1500 之间时，我得到了这个

```
Generating test cases ...
Done. (5258 milliseconds)
Compare1 took 18 milliseconds
Compare2 took 18 milliseconds
Compare3 took 33 milliseconds
Generating 'similar' test cases ...
Done. (5081 milliseconds)
Compare1 took 359 milliseconds
Compare2 took 313 milliseconds
Compare3 took 295 milliseconds 
```

因此，与方法 1 相比，方法 2 的增益较小，与方法 2 相比，方法 3 的增益甚至更小；

**解析度：**

**1\. 如果您的数组足够短和/或从小索引值开始差异的可能性很高 - 您无能为力（使用建议的方法）
2\. 否则您可以尝试方法 2 和 3 的某种组合。**

编码：

```
using System;
using System.Diagnostics;

namespace ConsoleExamples
    {
        class ArrayComparePerformance
        {
            static readonly int testArraysNum = 100000;
            static readonly int maxArrayLen = 1500;
            static readonly int minArrayLen = 500;
            static readonly int maxValue = 10;

            public static void RunTest()
            {
                //Generate random arrays;
                ushort[][] a = new ushort[testArraysNum][];
                ushort[][] b = new ushort[testArraysNum][];

                Random rand = new Random();

                Console.WriteLine("Generating test cases ... " );

                Stopwatch sw = new Stopwatch();
                sw.Start();

                for (int i = 0; i < testArraysNum; i++)
                {
                    int len = rand.Next(maxArrayLen) + 1;
                    a[i] = new ushort[len];
                    for (int j = 0; j < len; j++)
                    {
                        a[i][j] = (ushort) rand.Next(maxValue);
                    }

                    len = rand.Next(maxArrayLen) + 1;
                    b[i] = new ushort[len];
                    for (int j = 0; j < len; j++)
                    {
                        b[i][j] = (ushort) rand.Next(maxValue);
                    }

                }

                sw.Stop();
                Console.WriteLine("Done. ({0} milliseconds)", sw.ElapsedMilliseconds);

                //compare1
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare1(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare1 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                //compare2
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare2(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare2 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                //compare3
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare3(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare3 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                //Generate "similar" arrays;

                Console.WriteLine("Generating 'similar' test cases ... ");

                sw.Restart();

                for (int i = 0; i < testArraysNum; i++)
                {
                    int len = rand.Next(maxArrayLen - minArrayLen) + minArrayLen -1;
                    a[i] = new ushort[len];
                    for (int j = 0; j < len; j++)
                    {
                        if (j < len/2)
                            a[i][j] = (ushort)j;
                        else
                            a[i][j] = (ushort)(rand.Next(2)  + j);
                    }

                    len = rand.Next(maxArrayLen - minArrayLen) + minArrayLen - 1;
                    b[i] = new ushort[len];
                    for (int j = 0; j < len; j++)
                    {
                        if (j < len/2)
                            b[i][j] = (ushort)j;
                        else
                            b[i][j] = (ushort)(rand.Next(2)  + j);
                    }
                }

                sw.Stop();
                Console.WriteLine("Done. ({0} milliseconds)", sw.ElapsedMilliseconds);

                //compare1
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare1(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare1 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                //compare2
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare2(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare2 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                //compare3
                sw.Restart();
                for (int i = 0; i < testArraysNum; i++)
                {
                    int result = Compare3(a[i], b[i]);
                }
                sw.Stop();
                Console.WriteLine("Compare3 took " + sw.ElapsedMilliseconds.ToString() + " milliseconds");

                Console.ReadKey();
            }

            public static int Compare1(ushort[] x, ushort[] y)
            {
                int pos = 0;
                int len = Math.Min(x.Length, y.Length);
                while (pos < len && x[pos] == y[pos])
                    pos++;

                return pos < len ?
                    x[pos].CompareTo(y[pos]) :
                    x.Length.CompareTo(y.Length);
            }

            public unsafe static int Compare2(ushort[] x, ushort[] y)
            {
                int pos = 0;
                int len = Math.Min(x.Length, y.Length);
                fixed (ushort* fpx = &x[0], fpy = &y[0])
                {
                    ushort* px = fpx;
                    ushort* py = fpy;
                    while (pos < len && *px == *py)
                    {
                        px++;
                        py++;
                        pos++;
                    }
                }

                return pos < len ?
                    x[pos].CompareTo(y[pos]) :
                    x.Length.CompareTo(y.Length);
            }

            public static int Compare3(ushort[] x, ushort[] y)
            {
                int pos = 0;
                int len = Math.Min(x.Length, y.Length);

                // the below is probably not worth it for less than 5 (or so) elements,
                //   so just do the old way
                if (len < 5)
                {
                    while (pos < len && x[pos] == y[pos])
                        ++pos;

                    return pos < len ?
                      x[pos].CompareTo(y[pos]) :
                      x.Length.CompareTo(y.Length);
                }

                ushort lastX = x[len - 1];
                bool lastSame = true;
                if (x[len - 1] == y[len - 1])
                    --x[len - 1]; // can be anything else
                else
                    lastSame = false;

                while (x[pos] == y[pos])
                    ++pos;

                return pos < len - 1 ?
                    x[pos].CompareTo(y[pos]) :
                    lastSame ? x.Length.CompareTo(y.Length)
                             : lastX.CompareTo(y[len - 1]);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T19:53:55.527

只是一些想法（可能是错误的，需要测试）：

**第一的。**较大的项目类型（例如`int`对于 x32 或`long`对于 x64 - 让我们命名这种类型`TLong`）可能会提供更好的性能。
如果您`ushort`以 item 类型打包多个项目`TLong`（按[大端](http://en.wikipedia.org/wiki/Endianness)顺序！），您将能够一次比较多个项目。但是，如果新数组 [of type ]
的最后一项没有被填满，您将需要处理它。`TLong`可能会有一些“棘手的情况”。我现在什么都看不到，但我不确定。

**第二。**更！在某些情况下，我们可以在 item 类型中打包更多的原产地物品`TLong`。
让我们回到 type 的初始数组`ushort`：让我们假设`K`- 存在于所有数组中的最大数字（即您想要排序的所有路径！）（即对于`t`存储在每个`ushort`真正的每个数字：） `t <= K`。然后让我们假设every`t`只是基数`K`系统中的一个“数字”。
这意味着图形中的每条路径（即每个`ushort`数组）只决定了这个数字系统中的一个数字。因此，`ushort`您不需要像这样操作数组：

1.  确定`K`适合类型的最大力量`TLong`- 让我们假设它是`p`：

    ```
    int p = 0;
    while (Math.Exp(K, p) <= TLong.MaxValue)
        p++; 
    ```

2.  取数组的第 i`p`项`ushort`并在基数系统中计算适当的数，`K`并将其保留为数组类型的第 i 项`TLong`：

    ```
    List<TLong> num = new List<TLong>();
    int i = 0;
    while (p * i < a.Length)
    {
        TLong y = 0;

        //transform from base-10 to base-K in chunks of p elements
        for (int j = p * i; j < Math.Min(p * (i + 1), a.Length); j++)
            y = y * K + a[j];

        num.Add(sum);
        i++;
    }
    TLong[] result = num.ToArray(); 
    ```

3.  这是一个动态的预先计算的转换，因此对于不同的 HTML 文档`K`可能会有所不同，对于`K`远小于 255 的情况，它会比第一个想法更快。此外，预先计算的变换具有线性复杂性，因此不会极大地影响您的性能。

4.  `K`通常，您将数组转换为以 base- num为单位的大数。系统。存储在数组中。就是这样！
5.  并且无需通过其他评论的改进来更改初始排序算法（无论如何检查它 - 我可能错了！）

我希望它会帮助你。

# java - 监控对象池工作人员的状态

> ID：15117862
> 
> 赞同：0
> 
> 时间：2013-02-27T17:00:09.087
> 
> 标签：java, multithreading, threadpool, pool, concurrent-programming

我从另一个类中创建了这个线程，用于在完成时读取执行器的状态并在失败时取消其余任务。任务是可运行的

如果看到任何失败，整体状态必须为 1 或失败

```
final CompletionService completionService = new ExecutorCompletionService(getExecutorService());
final List<Future> futures = new ArrayList<Future>();

    FutureTask<Integer> tasks = new FutureTask<Integer>(new Callable<Integer>() {

        public Integer call() {

            int status = 0;
            boolean fail = false;

            try {
                for (int i = 0; i < 10; i++) {

                    MyRunnable resultObj = null;

                    try {
                        resultObj = (MyRunnable) completionService.take().get();
                    } catch (CancellationException e) {
                        // Skip it ..
                    }

                    if (!fail) {
                        status = resultObj.getStatus();

                        if (status == 1) {
                            fail = true;
                            for (Future future : futures) {
                                if (!future.isCancelled() && !future.isDone())
                                    future.cancel(true); // cancel pending tasks including running tasks 
                            }
                        }
                    }
                }
            } catch (Exception e) {
                 e.printStackTrace();
            }

            return status;
        }

            }); 
```

上面的线程已启动-

```
ExecutorService pool = Executors.newSingleThreadExecutor();
pool.submit(tasks); 
```

在下面，对象是从池中借用的，这是一个阻塞调用，我将池大小设置为 3 所以最初立即创建了 3 个 MyRunnable 工作人员。当每个工人完成时，他们会重复使用以服务于其余的任务。

```
for (int i = 0 ; i < 10; i ++;) {

    MyRunnable myRunnable = null;
    myRunnable = (MyRunnable) this.getGenericObjectPool().borrowObject();

    set myRunnable ..

    futures.add(completionService.submit(myRunnable, myRunnable));

}

while (!tasks.isDone()) {

        try {
            Thread.sleep(Global.WaitTime());            
        } catch (InterruptedException iex) {            
        }

}

finalStatus = tasks.get();
pool.shutdown(); 
```

GenericObjectPool 被配置为重用对象。我通过强制第一个线程失败并将其状态设置为 1 在 IDE 中模拟了一个测试。但是，问题是一旦它被释放，它就被 borrowObject() 重用，并且监控线程看到了状态已设置的更改对象作为由 GenricObjectPool 完成的新对象激活的一部分，返回 0。

所以，我无法从失败的线程中读取状态。MyRunnable 不是 Callable ，所以我不得不使用 completionService.submit(obj,obj) 来欺骗 Runnable

如果将池大小设置为 10 或更大，则不会发生此问题，因为这样就不会重用任何对象，并且我将成功读取每个对象的状态，但这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:45:56.870

我为 Runnable 创建了一个 CallableDecorator 来解决这个问题。现在，即使使用 GenericObjectPool，我也有正确的返回值。由于现在不依赖于 Pool 对象来读取状态，即使重用对象也不会导致状态重置 -

因此，代码中的 2 处更改 - 更改

```
futures.add(completionService.submit(myRunnable, myRunnable)); 
```

到

```
futures.add(completionService.submit(new CallableDecorator(myRunnable))); 
```

添加一个新类

```
public class CallableDecorator implements Callable {

       IRunnable r;

       public CallableDecorator(IRunnable r) {

           this.r = r;
       }

       public Integer call() {

           r.run();
           return r.statusCode();
       }
}

interface IRunnable extends Runnable {
     public Integer statusCode();
} 
```

同样，必须将 resultObj 更改为整数才能在监视器线程中获取其值。

# ios - 改变财产的价值

> ID：15117863
> 
> 赞同：0
> 
> 时间：2013-02-27T17:00:09.770
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uikit

我有两个视图控制器，aViewController 和 bViewController，bViewController 是 aViewController 的子类。我在 aViewController 中声明了一些属性，在 bViewController 中我可以读取该属性的值，但是如果我尝试更改它们的值，则该值不会更改并且在更改之前保持第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:17:46.270

请确保你有这样的东西：

```
// "A" view controller
@interface AViewController : UIViewController

@property (nonatomic, strong) NSString *name;

@end

// "B" view controller
@interface BViewController : AViewController

- (void)changePropertyValue;

@end

@implementation BViewController

- (void)changePropertyValue
{
    self.name = @"Bill";
    NSLog(self.name);
    self.name = @"Steve";
    NSLog(self.name);
}

@end

// create your BViewController
BViewController *theController = [[BViewController alloc] init];
[theController changePropertyValue]; 
```

# mysql - mysql存储过程中的总值

> ID：15117869
> 
> 赞同：0
> 
> 时间：2013-02-27T17:00:21.567
> 
> 标签：mysql, stored-procedures

我试图从我的数据库中获取具有不同日期时间戳的值的总和。我的目标是返回该日期表中所有值的每一天的总数。我的商店过程如下所示：

```
DELIMITER //
DROP PROCEDURE get_reads;
CREATE PROCEDURE get_reads (IN  device varchar (20), IN start_date datetime, IN end_date datetime, IN read_type varchar(8))

BEGIN

    SELECT dr.date_time, sum(dr.device_reading)
    FROM DEVICE_DETAILS dd,
    DEVICE_READING dr
    WHERE dr.device_id = dd.device_id
    AND dd.serial_number = device
    AND dr.date_time BETWEEN start_date AND end_date
    AND dr.reading_type = read_type;

END// 
```

我相信我将不得不使用临时表或其他东西，但在网上找不到任何关于我的情况的建议。对于每一天，我每半小时都有一个值，我希望存储的 porocedure 在我的日期范围内返回每天的总计传入。数据库列看起来像这样

```
+-----------+---------------------+--------------+----------------+-------+
| device_id | date_time           | reading_type | device_reading | units |
+-----------+---------------------+--------------+----------------+-------+
| E1        | 2012-11-19 00:29:00 | Profile      |   0.0719131800 | KW    |
| E1        | 2012-11-19 00:59:00 | Profile      |   0.0802306700 | KW    |
| E1        | 2012-11-19 01:29:00 | Profile      |   0.0767434100 | KW    |
| E1        | 2012-11-19 01:59:00 | Profile      |   0.0737920500 | KW    |
| E1        | 2012-11-19 02:29:00 | Profile      |   0.0794256700 | KW    |
| E1        | 2012-11-19 02:59:00 | Profile      |   0.0729868200 | KW    |
| E1        | 2012-11-19 03:29:00 | Profile      |   0.0745970500 | KW    |
| E1        | 2012-11-19 03:59:00 | Profile      |   0.0804993100 | KW    |
| E1        | 2012-11-19 04:29:00 | Profile      |   0.0837193100 | KW    |
| E1        | 2012-11-19 04:59:00 | Profile      |   0.0483004600 | KW    | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:29:38.777

使用 CAST(datetime AS DATE) 解决；

```
DELIMITER //
DROP PROCEDURE get_reads;
CREATE PROCEDURE get_reads (IN  device varchar (20), IN start_date datetime, IN end_date datetime, IN read_type varchar(8))

    BEGIN

            SELECT dr.date_time, sum(dr.device_reading)
            FROM DEVICE_DETAILS dd,
            DEVICE_READING dr
            WHERE dr.device_id = dd.device_id
            AND dd.serial_number = device
            AND dr.date_time BETWEEN start_date AND end_date
            AND dr.reading_type = read_type
            GROUP BY CAST(dr.date_time AS DATE);

    END// 
```

# android - 截取设备屏幕截图

> ID：15117870
> 
> 赞同：-2
> 
> 时间：2013-02-27T17:00:25.630
> 
> 标签：android, screenshot

我知道这个问题已经被问过很多次了。我知道有两种方法可以做到这一点。（1）使用截图库（但我总是黑屏）。（2）从帧缓冲区获取数据与生根|| \dev\graphics\fb0||（但它始终为 0 字节，我不知道存储当前设备屏幕截图的确切位置）。我的首选要求是获得更好的帧速率。任何帮助都会非常有帮助，因为我已经花了很多时间在这。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:52:05.187

你可以使用这个：

```
$ adb shell screencap -p /mnt/sdcard/sc.png
$ adb pull /mnt/sdcard/sc.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:06:54.860

您可以使用以下代码获取视图的绘图缓存：

```
 view.setDrawingCacheEnabled(true);
    view.buildDrawingCache();
    Bitmap b1 = view.getDrawingCache(); 
```

# javascript - 将函数结果存储到变量

> ID：15117874
> 
> 赞同：-1
> 
> 时间：2013-02-27T17:00:42.790
> 
> 标签：javascript, variables, object

如何将函数的结果存储到变量中？

在导航包含数组的对象时，我正在寻找一个值*value1*，一旦找到，我想获取其属性之一的值*property1*。

我在下面使用的代码是一个示例，并且不正确。

```
function loadSets(id){
   clworks.containers.find(function(i){
      return i.get('property1')===id;
   });
} 
```

我的意图是导航下面的对象：

```
clworks.containers
    containers[0].property0.id
    containers[1].property1.id 
```

我试图确定如何找到数组中的哪个项目的属性值等于函数中使用的 id，然后将其存储为变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:01:48.390

简单地：

```
var myVar = loadSets(id); 
```

## 编辑

好的，据我现在了解您的问题，您的情况如下：

1.  您有一个`array`名为`containers`;的包含对象。
2.  您想遍历 this `array`，寻找与调用函数中指定`id`的属性`property1`相等的属性的属性`loadSets(id)`；
3.  找到后，将请求的对象存储`id`在变量中。

我对吗？如果是这样，这应该可以解决您的问题：

```
// This function iterates through your array and returns the object
// with the property id of property1 matching the argument id
function loadSets( id ) {

    for(i=0; i < containers.length; i++) {

        if( containers[i].property1.id === id )
            return containers[i];

    }

    return false;

} 
```

在此之后，您只需要按照我在您问题的第一个答案中所说的操作，随心所欲地触发它。我[**为你建立了一个快速的 JSBin**](http://jsbin.com/uxukaj/1)。尝试在`input`字段中放入 10 或 20，然后点击*查找*按钮；它将返回您正在寻找的对象。尝试输入任何其他数字，它将返回*Not found*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:06:31.723

目前，您的函数 loadSets 实际上并没有返回任何内容，因此您无法从中存储结果。

尝试：

```
function loadSets(id){
   return Base.containers.find(function(i){
      return i.get('entityid')===id;
   });
} 
```

并将结果放入变量中：

```
var result = loadSets(id); 
```

# javascript - 将碰撞检测（和其他处理器密集型循环）加载到 JavaScript 中的 WebWorker？

> ID：15117880
> 
> 赞同：2
> 
> 时间：2013-02-27T17:00:52.613
> 
> 标签：javascript, web-worker

我最近一直在玩网络工作者，我设法使用以下技术将 A* 路径查找卸载到工作线程......

1.  当对象向工作人员发送消息时，将对对象的引用推送到数组上
2.  当工作人员回发时，从数组中移动下一项

我的游戏有一个功能，即生物会对环境中的噪音做出反应。理想情况下，我想要实现的是......

1.  游戏中的某些东西会发出半径范围内的噪音
2.  将噪音的来源和生物列表传递给网络工作者
3.  网络工作者以噪音范围内的生物列表作为响应

显然存在一个问题，因为我无法将一组对象传递给工作人员，而且我正在努力想办法解决这个问题。

**更新的问题：** 我如何（有效地）告诉主线程生物 X 和生物 Y 听到了声音？

有什么建议么？

* * *

**您能否举一个示例说明您尝试向网络工作者发布的内容，例如控制台在卸载之前对其进行日志记录**

像这样的东西...

```
var iNoiseRadius = 100;
var aCreatures = [
    {id: 1, x: 0, y: 0},
    {id: 2, x: 200, y: 0},
    {id: 3, x: 100, y: 100},
    {id: 4, x: 50, y: 400},
    {id: 5, x: 100, y: 0}
];

....

oWorker.postMessage({
    type: 'noise',
    originator: aCreatures[2],
    radius: iNoiseRadius,
    creatures: aCreatures
}); 
```

在发布消息和接收响应之间，生物数组可能会发生变化，因此数组索引是无用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:10:10.963

您可以将其传递给序列化的 JSON。这不是最漂亮的解决方案，但在正确实施 WebWorkers 之前可能是最好的（据我了解，规范允许传入和传出任何对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:08:17.790

你想告诉主线程生物 X 和 Y 尽可能高效地听到声音。

合乎逻辑的答案是返回半径内的生物 ID 列表。这样，您将不得不在主线程中再次循环遍历列表。

您还可以使用工人`postMessage`发布发现半径内每个生物的 ID。伪代码：

```
// In the WebWorker
forEach(creature in creatures) {
  if (creature is within radius distance of originator) {
    postMessage(creature.id);
  }
}

// In the Main Thread
noiseDetectionWorker.addEventListener('message', function(event) {
  notificyCreatureOfNoise(event.data);
}); 
```

# r - 将数字读取为字符串

> ID：15117881
> 
> 赞同：11
> 
> 时间：2013-02-27T12:51:39.930
> 
> 标签：r, file, file-read, formal-languages

我是 R 编程新手，我想在 R 中读取文本文件。

其中一列，假设第 7 列是数字，每个数字代表一个 ID，我希望 R 读取数字，就好像它们是字符串一样。并计算每个 ID 在文件中出现的次数（以便稍后我可以将每个 ID 的频率分配给给定的 ID 以供以后使用）我尝试过

```
mydata<-(read.table(filename.txt))
ID=mydata[7]
freq=table(ID) 
```

这可行，但它将 ID 作为数字。现在我试过了

```
freq=table(as.character(ID)) 
```

但随后它将整个列 ID 作为一个字符串并从

```
summary(freq) 
```

我明白了

```
Number of cases in table: 1 
Number of factors: 1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T06:25:42.577

在从文本文件将数据读入数据框中时，您可以使用`colClasses`参数指定每列的类型。请参阅下面的文件在我的计算机中：

```
> head(read.csv("R/Data/ZipcodeCount.csv"))
    X zipcode stateabb countyno  countyname
1   1     401       NY      119 WESTCHESTER
2 391     501       NY      103     SUFFOLK
3 392     544       NY      103     SUFFOLK
4 393     601       PR        1    ADJUNTAS
5 630     602       PR        3      AGUADA
6 957     603       PR        5   AGUADILLA
> head(read.csv("R/Data/ZipcodeCount.csv",colClasses=c(rep("factor",5))))
    X zipcode stateabb countyno  countyname
1   1   00401       NY      119 WESTCHESTER
2 391   00501       NY      103     SUFFOLK
3 392   00544       NY      103     SUFFOLK
4 393   00601       PR      001    ADJUNTAS
5 630   00602       PR      003      AGUADA
6 957   00603       PR      005   AGUADILLA

> zip<-read.csv("R/Data/ZipcodeCount.csv",colClasses=c(rep("factor",5)))
> str(zip)
'data.frame':   53424 obs. of  5 variables:
 $ X         : Factor w/ 53424 levels "1","10000081",..: 1 36316 36333 36346 43638 52311 19581 23775 26481 26858 ...
 $ zipcode   : Factor w/ 41174 levels "00401","00501",..: 1 2 3 4 5 6 6 7 8 9 ...
 $ stateabb  : Factor w/ 60 levels "","  ","AK","AL",..: 41 41 41 46 46 46 46 46 46 46 ...
 $ countyno  : Factor w/ 380 levels "","000","001",..: 106 95 95 3 5 7 5 7 7 9 ...
 $ countyname: Factor w/ 1925 levels "","ABBEVILLE",..: 1844 1662 1662 9 10 11 10 11 11 12 ...
> head(table(zip[,"zipcode"]))

00401 00501 00544 00601 00602 00603 
    1     1     1     1     1     2 
```

如您所见，R 不再将邮政编码视为数字，而是将其视为因素。在您的情况下，您需要指定前 6 列的类，然后选择`factor`作为您的第七列。因此，如果前 6 列是数字，则应该是这样的`colClasses = c(rep("numeric",6),"factor")`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T07:33:21.037

如果没有`as.character`您`table`应该正常工作（即`freq <- table(ID)`），引用自`?table`，您的输入可以是：

> 一个或多个可以被解释为因素（包括字符串）的对象，或者一个列表（或数据框），其组件可以被如此解释。（对于 as.table 和 as.data.frame，参数传递给特定的方法。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T20:03:38.713

我认为您错过了数据框中的逗号。

```
mydata<-(read.table(filename.txt))
ID=mydata[,7]  #added comma
freq=table(as.character(ID)) 
```

# rally - 迭代燃尽图大小没有得到尊重？

> ID：15117882
> 
> 赞同：2
> 
> 时间：2013-02-27T17:00:59.357
> 
> 标签：rally

（这是用于通过 loginKey 在集会之外运行报告 - 目前使用 1.26，尽管我尝试使用高达 1.32 的结果没有差异）

似乎即使迭代燃尽图接受宽度和高度参数，它们在任何意义上都不可靠，而且通常根本不被尊重。如果我将其提取到渲染的 iframe，我会看到以下链接：

https://loginapirally1.rallydev.com/slm/analytics/reports/4/run?WIDTH=1024&HEIGHT=768&ITERATIONS=[MY_ITERATION]

但图表根本不接近那个尺寸 - 无论请求什么 w/h，它通常似乎默认为一个非常小的尺寸 (540pt x 300pt)。在我的实现中，我有一个 div 中的燃尽图，它首先调整为窗口的大小，然后将这些尺寸传递给购物车对象。在某些尺寸下，它将接近占用空间，但在其他尺寸下，它将恢复为默认尺寸。

这是一个已知的问题？我错过了什么明显的东西吗？提前感谢任何人的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:49:17.117

我已收到来自集会支持的确认，这确实是使用 loginkey 时支持的最大分辨率：

“只是想让你知道，我已经收到我们工程团队的确认，通过 LoginKey 的最大分辨率确实是 600x1000，所以 599x999 确实是正确的。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:02:45.490

无论出于何种原因，我发现我能得到的最大标准报告是高度 = 599 和宽度 = 999。如果我选​​择更大的，我最终会得到比 599x999 小得多的尺寸。一个例外是速度图表，如果您的高度为 599，则它很大但有一个垂直滚动条，但如果您将高度设为 600，它会更小并且没有滚动条。

# java - 什么可以放在同步块中？

> ID：15117888
> 
> 赞同：0
> 
> 时间：2013-02-27T17:01:21.370
> 
> 标签：java, multithreading, synchronized

我知道可以将一段代码或实例放入同步块中。所以考虑这个简短的例子：

```
public class SynchronizedObject {   
    public static void main(String args){
        System.out.println(" 1 " );

        synchronized(args){     
            //do stuff  
        } 
```

在这种情况下， args 是一个实例，我正确吗？而这个实例也是一个对象？在任何情况下都不能将变量或局部变量放入同步块中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:05:51.077

你的问题不清楚。您似乎混合了块和语句：

*   在您的示例中，同步块是花括号内的任何内容，因此是`//do stuff`部分。
*   `args`，在您的示例中，是`synchronized`语句使用的锁。

您可能会从阅读[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)中受益。

> 什么可以放在同步块中？

只要是有效的 java 语句，你想要的任何东西。

> args 是一个实例，我正确吗？

`String`args 是对（尽管您可能是指`String[]`）的一个实例的引用。

> 这个实例也是一个对象？

嗯，是的，一个类的实例就是一个对象。

> 在任何情况下都不能将变量或局部变量放入同步块中？

在块内，您可以按照上面的说明做您想做的事情。关键字（锁）的参数`synchronized`需要是对 Object 的非空实例的引用。如果您愿意，这可能是一个局部变量（尽管这很可能无法实现您的目标）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:08:48.250

在这种情况下`args`是一个局部变量 - 它是一个`String`类的实例。并且`String`确实是一个`Object`，因为 Java 中的所有类都派生自`Object`

将局部变量放在同步块中没有任何限制 - 这样做没有什么好处，但也没有限制。

但是，通过在局部变量上同步，您不会获得任何有用的信息。

# c# - Sharepoint 自定义操作以删除站点操作菜单项

> ID：15117889
> 
> 赞同：2
> 
> 时间：2013-02-27T17:01:24.730
> 
> 标签：c#, sharepoint, sharepoint-2010, custom-action

我一直在寻找如何隐藏站点操作菜单中的两个按钮（新页面和管理站点内容和结构）的几个小时。

这是我的具体情况......我有一个列表，当用户查看时，我希望能够删除某些按钮。还取决于用户是否是管理员，这些按钮是否应该显示......目前我已经能够使用`HideCustomActions`（下面的代码）删除这两个按钮。隐藏自定义操作的问题是没有属性可以指定列表或内容类型以使其正常工作。也没有像这样的属性`CustomActions`只会向管理员显示按钮（我想在下面的 CustomActions 中执行的示例代码）。

**隐藏自定义操作**代码：

```
<HideCustomAction
    Id="HideCreatePublishingPage"
    GroupId="SiteActions"
    HideActionId="PublishingSiteActionsMenuCustomizer"
    Location="Microsoft.SharePoint.StandardMenu">
</HideCustomAction> 
```

**自定义**操作代码：

```
<CustomAction
    Id="HideNewPage"
    GroupId="SiteActions"
    Location="Microsoft.SharePoint.StandardMenu"
    RegistrationType="List"
    RegistrationId="10037"
    RequireSiteAdministrator="TRUE">
    <CommandUIExtension>
      <CommandUIDefinitions>
        <CommandUIDefinition Location="WHAT GOES HERE?" /> <!-- PublishingSiteActionsMenuCustomizer should go here but i dont have the id -->
      </CommandUIDefinitions>
    </CommandUIExtension>
</CustomAction> 
```

如果缺少任何细节或我没有正确解释自己，请告诉我，我会更新！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:28:29.583

据我了解，当您在某个特殊列表/页面中时，您想在“**站点操作”菜单中隐藏一个操作。**

这不是开箱即用的。该[`HideCustomAction`](http://msdn.microsoft.com/en-us/library/ms414790.aspx)元素根本不提供*“仅当用户在页面 XYZ 上时隐藏”*。要么隐藏动作，要么不隐藏——这适用于所有用户。尤其是当您谈论的是（顾名思义）站点范围内的站点操作菜单时。

您唯一的选择是使用 JavaScript（或服务器端代码）来做您想做的事，仅对某些用户隐藏菜单项以及仅在某些页面上隐藏它们。如果您的逻辑适用，您必须使用 JavaScript 搜索菜单项并隐藏它们。

# python - 用于解析和运行 Javascript 网页的 Javascript 引擎（perl/python）

> ID：15117891
> 
> 赞同：2
> 
> 时间：2013-02-27T17:01:27.000
> 
> 标签：python, perl, www-mechanize, javascript-engine

长期以来，我一直在尝试使用 python(2.4) 解析和运行 javascript 网页。不幸的是，我不能使用 qt,webkit，所以大多数基于 python 的无头浏览器都被排除在外。然而，我最近在 perl（使用 perl 5.8.8）中发现了 WWW::Scripter，它似乎也是 javascript 的脚本引擎。我还安装了运行它所需的 javascript 插件。

```
use WWW::Scripter;
$w = new WWW::Scripter;
$w->use_plugin('JavaScript');  # packaged separately
$w->get('some javascript website');
print $w->content; 
```

好吧，它会打印出很多错误并最终终止，并且输出似乎与预期的相差无几。我尝试了 3-4 个站点，但结果相同。预期的输出是指从谷歌浏览器的检查元素中可以看到的源代码。知道我在使用 perl 脚本时做错了什么吗？其次，让javascript引擎运行以解析python2.4或perl（甚至ruby，约束不能使用qt）中的网站的任何快速替代方法希望我能提出我的问题而不会造成很多混乱。

编辑：前几行错误：

```
Day too big - 52263 > 24855
Sec too small - 52263 < 74752
Sec too big - 52263 > 11647
Day too big - 52263 > 24855
Sec too small - 52263 < 74752
Sec too big - 52263 > 11647
<></> at /usr/lib/perl5/site_perl/5.8.8/HTML/DOM/Element.pm line 320.
 at /usr/lib/perl5/site_perl/5.8.8/HTML/DOM/Element.pm line 320.
        HTML::DOM::Element::getAttribute('HTML::DOM::Element::Input=HASH(0xcc309f0)', 'checked') called at /usr/lib/perl5/site_perl/5.8.8/HTML/DOM/Element.pm line 379
        HTML::DOM::Element::_attr('HTML::DOM::Element::Input=HASH(0xcc309f0)', 'checked') called at /usr/lib/perl5/site_perl/5.8.8/HTML/DOM/Element/Form.pm line 965
        HTML::DOM::Element::Input::defaultChecked('HTML::DOM::Element::Input=HASH(0xcc309f0)') called at /usr/lib/perl5/site_perl/5.8.8/HTML/DOM/Element/Form.pm line 975
        HTML::DOM::Element::Input::checked('HTML::DOM::Element::Input=HASH(0xcc309f0)') called at /usr/lib/perl5/site_perl/5.8.8/JE.pm line 1719
        JE::__ANON__('JE::Object::Proxy=REF(0xcb53f44)', undef) called at /usr/lib/perl5/site_perl/5.8.8/JE/Object.pm line 385
        JE::Object::prop('JE::Object::Proxy=REF(0xcb53f44)', 'checked') called at /usr/lib/perl5/site_perl/5.8.8/JE/LValue.pm line 91
        JE::LValue::get('JE::LValue=ARRAY(0xcc4eac8)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1197
        JE::Code::Expression::eval('JE::Code::Expression=ARRAY(0xc5fa87c)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1377
        JE::Code::Expression::_eval_term('JE::Code::Expression=ARRAY(0xc5fa87c)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1150
        JE::Code::Expression::eval('JE::Code::Expression=ARRAY(0xc5fa78c)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 349
        JE::Code::Statement::eval('JE::Code::Statement=ARRAY(0xc5e50e8)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 186
        eval {...} called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 157
        JE::Code::execute('JE::Code=HASH(0xcb4a5c0)', 'WWW::Scripter::Plugin::JavaScript::JE=REF(0xa7c76e8)', 'JE::Scope=ARRAY(0xcb4fc7c)', 2) called at /usr/lib/perl5/site_perl/5.8.8/JE/Object/Function.pm line 486
        JE::Object::Function::apply('JE::Object::Function=REF(0xcb4aaac)', 'WWW::Scripter::Plugin::JavaScript::JE=REF(0xa7c76e8)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Object/Function.pm line 351
        JE::Object::Function::call('JE::Object::Function=REF(0xcb4aaac)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1287
        JE::Code::Expression::eval('JE::Code::Expression=ARRAY(0xc607808)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1377
        JE::Code::Expression::_eval_term('JE::Code::Expression=ARRAY(0xc607808)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1182
        JE::Code::Expression::eval('JE::Code::Expression=ARRAY(0xc5a0798)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1377
        JE::Code::Expression::_eval_term('JE::Code::Expression=ARRAY(0xc5a0798)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 1150
        JE::Code::Expression::eval('JE::Code::Expression=ARRAY(0xc5a0600)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 349
        JE::Code::Statement::eval('JE::Code::Statement=ARRAY(0xc3abbc0)') called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 186
        eval {...} called at /usr/lib/perl5/site_perl/5.8.8/JE/Code.pm line 157 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:51:20.607

如果它可能有任何用途： [jsPhantom](http://phantomjs.org "js幻影")是一个*单文件*无头 webkit（无需安装）。我用了几次（只是把exe放在perl旁边），然后让它工作。下一版本（1.9）（3 月/4 月？）预计将处理标准输入以简化管道。

[此答案](https://stackoverflow.com/questions/9409106/generating-html-canvas-image-data-server-side/14791639#14791639)中通过临时文件在 Perl 和 PhantomJs 之间进行交互的代码示例

# javascript - Javascript 错误 - 找不到函数 UISearchBarTextField

> ID：15117895
> 
> 赞同：0
> 
> 时间：2013-02-27T17:01:46.697
> 
> 标签：javascript, ios, monkeytalk

我正在尝试让 MonkeyTalk 使用 Javascript。我正在使用 iOS 自动化一些测试。当我运行 .MT 版本时，测试运行良好。但是，Javascript 版本与此错误。

错误 sun.org.mozilla.javascript.internal.EcmaError: TypeError: 找不到函数 uISearchBarTextField。(RADialerDirectory.js#8) 在 RADialerDirectory.js 的第 8 行

导出 javascript 代码显示了这一点：

`this.app.uISearchBarTextField().tap();`

任何人都知道如何解决这个错误？我只是尝试使用脚本的 Javascript 版本进行循环，然后获取外部数据进行迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T13:00:56.837

我对“UIAleartView”有同样的问题。有三种方法可以让它工作。发生这种情况是因为 MonkeyTalkAPI.js 文件不包含“uISearchBarTextField”条目

1.  使用更通用的类型（输入），如上面的答案。

2.  设置该组件的accessibilityLabel 属性并将其用作monkeyID，如下所示：[MonkeyTalk : Verify custom UITableViewCell Label text without select the cell](https://stackoverflow.com/questions/16304129/monkeytalk-verify-custom-uitableviewcell-label-text-without-select-the-cell)

3.  MonkeyTalkAPI.js 类的小技巧。找到对您的“uISearchBarTextField”更通用的“Input”一词，并获取它的副本再次将其粘贴到该文件中并编辑用“uISearchBarTextField”替换“Input”保存并运行。如果你仔细地做，它会起作用。

快乐测试

# datatables - jquery datatables可编辑如何在编辑后使单元格“只读”？

> ID：15117896
> 
> 赞同：0
> 
> 时间：2013-02-27T17:01:47.623
> 
> 标签：datatables

我正在成功地使用带有 jQ​​uery DataTables 的 jquery-datatables-editable 插件。有没有办法让可编辑的单元格在被编辑*后*变成不可编辑的？

基本上我有一个带有复选框的表格，一旦选中，它就需要不可编辑。我假设这将是一个“fnOnCellUpdated”参数或者可能是 rowcallback 函数的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:22:30.147

我觉得自己像个白痴。它真的比我想象的要简单：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex ) {
    var shop_ok_data = aData[15];
    if(shop_ok_data == "checked"){
        $('td:eq(10)', nRow).addClass("read_only");
    }
    return nRow;
}, 
```

# javascript - 解析键控 JSON 对象的最佳方法

> ID：15117906
> 
> 赞同：2
> 
> 时间：2013-02-27T17:02:14.910
> 
> 标签：javascript, jquery, json

我有对象从遵循这种模式的 API（无法更改）发送给我：

```
{
  aaa: {
    name: "Aaa",
    desc: "..."
  },
  bbb: {
    name: "Bbb",
    desc: "..."
  },
  ccc: {
    name: "Ccc",
    desc: "...",
    stuff: {
      foo: {
        bar: "bar"
      },
      keys: ["foo"]
    }
  },
  keys: ["aaa", "bbb", "ccc"]
} 
```

我正在尝试做的是将这些对象“扁平化”为客户端上更可用的对象。因此，将上面的对象展平的结果将是：

```
[
  {
    key: "aaa",
    name: "Aaa",
    desc: "..."
  },
  {
    key: "bbb",
    name: "Bbb",
    desc: "..."
  },
  {
    key: "ccc",
    name: "Ccc",
    stuff: [
      { key: "foo", bar: "bar" }
    ]    
  }
] 
```

如您所见，我需要遍历 2 个级别的数据。目前我正在循环并创建新对象（下面的简短示例），我只是想知道是否有更优雅的方式来处理这个问题？

```
var myObjs = [];

$(data.keys).each(function(i, objKey) {
  i = $.extend({}, data[objKey], { key: objKey });
  myObjs.push(i);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:22:30.533

这应该这样做：

```
function toArray(obj) {
    if (typeof obj !== 'object' || !("keys" in obj))
        return obj;
    return obj.keys.map(function(key) {
        var sub = obj[key];
        if (typeof sub !== 'object')
            return sub;
        for (var prop in sub)
            sub[prop] = toArray(sub[prop]);
        sub.key = key;
        return sub;
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:22:45.663

这似乎可以满足您的要求：

```
function flatten(obj) {
    return $.map(obj.keys, function(key) {
        var res = $.extend({}, obj[key], {key: key});
        for (var key in res) {
            if (typeof res[key] === 'object') {
                res[key] = flatten(res[key]);
            }
        }
        return res;
    });
} 
```

见[http://jsfiddle.net/alnitak/pgq2S/](http://jsfiddle.net/alnitak/pgq2S/)

注意：只要您有嵌套对象，这将继续递归 - 它目前不会停止在两个级别。

# asp.net-mvc-4 - 在 Web 上请求自定义报告

> ID：15117908
> 
> 赞同：0
> 
> 时间：2013-02-27T17:02:17.280
> 
> 标签：asp.net-mvc-4, crystal-reports

我有一个请求，用户希望能够创建自己的报告。我已经开发了 MVC4 应用程序，它目前使用 Crystal Reports 来生成报告的 pdf。

显然，Crystal 报表允许开发人员将元素拖到屏幕上的任何位置。用户现在希望能够创建自己的报告并能够将控件移动到他们希望的位置。

这是否可能和/或水晶报表是否有任何变化可以允许这样做？理想情况下，这也需要在 Web 上完成！！

任何方向将不胜感激，谢谢

# xcode - 如何在后台在xcode中运行系统命令

> ID：15117913
> 
> 赞同：0
> 
> 时间：2013-02-27T17:02:24.153
> 
> 标签：xcode, macos, shell, ffmpeg, system

我需要使用以下参数运行 ffmpeg 命令：-i 'url_of_input_here'。所以使用带有参数数组的 NSTask 是行不通的：

```
NSString * ffm_address = [NSString stringWithFormat:@"'udp://%d.%d.%d.%d:%d?fifo_size=1000000000&overrun_nonfatal=1'",addr_1,addr_2,addr_3,addr_4,portFFM];
[task setArguments:
[NSArray arrayWithObjects:@"-f", @"mpegts", @"-i", ffm_address, @"-re",@"-y",@"-strict",@"experimental",@"-vcodec", @"copy", @"-f", @"mp4", @"video.mp4", nil]]; 
```

因为引号的处理方式使得 ffmpeg 认为 udp://.... 地址是一个文件

XCode 具有 system() 函数，可以让我执行系统命令，但是当我运行 ffmpeg 命令时，它会停止进程（因为 ffmpeg 正在处理流）：

```
char ffm_cmd[512];
sprintf(ffm_cmd,"ffmpeg -f mpegts -i 'udp://%d.%d.%d.%d:%d?fifo_size=1000000&overrun_nonfatal=1' -re -y -strict experimental -vcodec copy -f mp4 video.mp4",addr_1,addr_2,addr_3,addr_4,portFFM);
    system(ffm_cmd); 
```

我怎样才能在后台运行 system() 命令，这样它就不会停止应用程序的其余部分？我宁愿不使用单独的线程，而是启动 ffmpeg 并继续该过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:11:24.250

找到了一种方法！只需在命令末尾添加 & ：

```
 char ffm_cmd[512];
    sprintf(ffm_cmd,"ffmpeg -f mpegts -i 'udp://%d.%d.%d.%d:%d?fifo_size=1000000&overrun_nonfatal=1' -re -y -strict experimental -vcodec copy -f mp4 video.mp4 &",addr_1,addr_2,addr_3,addr_4,portFFM);
    system(ffm_cmd); 
```

# opengl-es - OpenGL ES 纹理坐标映射和限制

> ID：15117917
> 
> 赞同：-1
> 
> 时间：2013-02-27T17:02:37.050
> 
> 标签：opengl-es, textures, texture-mapping

我有一个带有 GL_REPEAT 的无缝 Texture2D 和几个正确映射此纹理的三角形。

对于这些三角形中的每个顶点，我正在更新 positionX 以将此纹理作为视差背景移动，并且它会获得较大的值。

u = 位置X/纹理宽度；v = 位置 Y/纹理高度；

问题是，当 u <~50 时，一切正常，纹理重复，但在达到某个限制后，它开始显示分辨率较低的纹理，并且在每 X 距离之后，情况变得更糟。

我怎样才能正确地将这个 u & v 限制为更小的值？

我已经尝试简单地为每个顶点以这种方式限制你

```
float pWsp = positionX/(pTextureWidth); 
float pResult = pWsp -  ((int)pWsp); 
return pResult; 
```

但是每次纹理结束时都会反转 int X 这给了我奇怪的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:08:42.177

您遇到了纹理坐标的精度问题。随着整数部分的幅度增加，小数部分的精度降低，您开始看到伪影。

正如您所观察到的，您无法修复此每个顶点，因为您会遇到环绕问题，其中单个三角形的顶点最终会不一致地应用校正。

您需要将校正均匀地应用于整个多边形。执行此操作的最佳位置是在源数据中 - 将其分成块，这样纹理坐标就不会变得太大。

# youtube - 为什么手机（不限于 iPhone）上的 YouTube 音频出现乱码？

> ID：15117921
> 
> 赞同：1
> 
> 时间：2013-02-27T17:02:46.733
> 
> 标签：youtube, html5-video, mp4, ogg, webm

编辑：我尝试通过 HandBrake 使用几种不同的音频编解码器，每个都产生相同的结果。

编辑：我们已经对音频进行了试验，我们发现在移动设备上佩戴耳塞或耳机会使问题似乎消失。显然，录制的音频（立体声）有问题，手机通过扬声器期待单声道。在转换过程中强制立体声到单声道是否会导致问题？更多的研究随之而来。

我被难住了，已经把头撞在墙上两天了，现在试图弄清楚这一点。我们在公司网站上发布了一段视频，该视频适用于所有设备，包括 iPhone 和三星在内的手机设备除外。在这些设备上可以播放视频，但音频会出现乱码，无法使用。这是视频的链接-

[http://www.youtube.com/watch?v=6IVHv6nG20M&list=UUKTqrRWGA_rcxOYVVocB9kg](http://www.youtube.com/watch?v=6IVHv6nG20M&list=UUKTqrRWGA_rcxOYVVocB9kg)

我还在我们的网站上使用了 .mp4、.ogv 和 .webm 版本的文件，结果在手机上是一样的。这是使用视频的 URL -

[http://www.apexinnovations.com/miRULE.html](http://www.apexinnovations.com/miRULE.html)

我尝试使用 Miro Video Converter 转换为不同的视频类型，一直在上传和测试。结果是一样的——在除手机之外的所有设备上都能正常工作。我还使用 iMovie 将视频导出到 YouTube，但我仍然得到相同的结果。

踢球者？我们 YouTube 频道和我们网站上的其他两个视频在每台设备上都可以正常播放。我输出或转换或上传这些文件的方式没有区别。

有没有其他人有过这种经历？我做错了什么才能做到这一点？有解决办法吗？

非常感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:44:04.493

您如何编码音频或视频并不重要。无论如何，Youtube 都会重新编码。或者您是否曾经在 youtube 上看过一段没有声音或图片的视频？这对于全球 70 亿人直接从他们的摄像机上传视频是不可能的。

最重要的是，youtube 会调整比特率以适应您的连接速度。因此，使用 GPRS 连接不良的手机听起来可能会出现乱码，而在连接到 wifi 的同一部手机上，听起来可能还不错。这既是为了用户体验，也是为了节省带宽。

您可以在此处查看他们的指南：[https ://support.google.com/youtube/bin/answer.py?hl=en&answer=1722171&topic=1728573&parent=1728585&rd=1](https://support.google.com/youtube/bin/answer.py?hl=en&answer=1722171&topic=1728573&parent=1728585&rd=1)

但无论如何，他们最终都会重新编码。

# matlab - 双精度图像上的图像泊松噪声（散粒噪声）

> ID：15117923
> 
> 赞同：2
> 
> 时间：2013-02-27T17:02:53.800
> 
> 标签：matlab, noise, poisson

我正在尝试以双精度向图像添加泊松噪声。我愿意：

```
I = im2double(imread('mypic.tif')); % mypic.tif is already in the range 0...1 in double precision
J = imnoise(I,'poisson');
imshow(I),figure,imshow(J); 
```

我看到两者`I`都`J`非常相似。我做错了什么？
请注意，我确实知道 imnoise 将值缩放 1e-12 但真诚地我不明白如何正确使用它。

我在想我可以用`poissrnd()`手动添加噪音来绕过`imnoise`

关于缩放，我使用的是[这样的代码](http://www.mathworks.com/matlabcentral/newsreader/view_thread/242444#621859)：

```
maxValue = max(I(:));

% This is necessary based on imnoise behaviour
I = I * 10e-12;

% Generate noisy image and scale back to the original intensities. 
J = maxValue * imnoise(I, 'poisson'); 
```

但它返回的图像几乎是全黑的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:40:44.280

正如链接所说，这是一个很大的问题。

尝试使用较小的比例：

```
I = im2double(imread('eight.tif')); %Matlab default image
scale = 1e9;
J = scale * imnoise(I/scale, 'poisson'); 
close all; imshow(J); 
```

输入：

![在此处输入图像描述](../Images/32dc1142871abdddc5621a30e2f83e99.png)

输出（1e9）：

![在此处输入图像描述](../Images/3bf054a34d8c408d4318a1a121b91110.png)

输出（1e10）：

![在此处输入图像描述](../Images/e336eea4ca657817fa360d78c4690bd3.png)

# android - 如何相对于小部件高度缩放图像视图但尊重最大高度？

> ID：15117927
> 
> 赞同：3
> 
> 时间：2013-02-27T17:03:19.010
> 
> 标签：android, resize, android-widget, android-linearlayout

我目前正在开发一个包含图像视图的 Android 小部件。小部件应该是可调整大小的。

图像应该填充小部件的整个宽度（这是最简单的部分），并且应该填充小部件高度的 30%，同时尊重最大高度 80dip（这是我无法弄清楚的）。

在以下布局中，图像正确缩放到宽度，但不缩放到高度：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/widget_margin">

        <ImageView
            android:id="@+id/promoShelf"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/shelf"
            android:scaleType="fitXY"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

我尝试使用带权重的 LinearLayout 来完成此操作，可以在以下代码段中看到。但是，当使用权重时，它看起来`android:maxHeight`不受尊重。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/widget_margin">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="bottom"
        android:orientation="vertical"
        android:weight_sum="1">

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:maxHeight="80dip"
            android:src="@drawable/my_image"
            android:scaleType="fitXY"
            android:layout_weight="0.3" />

    </LinearLayout>
</RelativeLayout> 
```

所以，这是（不想要的）结果：

[![](../Images/daf5a33d3324b746e708ec4fc41e5584.png)](https://i.stack.imgur.com/i4888.png)

为什么`maxHeight`不工作或有人知道如何规避这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:09:47.123

我不确定是否有一个只使用标准组件的好的解决方案。但是可以使用自定义`ImageView`小部件轻松完成。

```
public class MyImageView extends ImageView {
    private float weight = 0.3f;
    private int maxHeight;

    public MyImageView(Context context, AttributeSet attrs) {
        super(context, attrs);

        if (attrs != null) {
            final int[] ids = {android.R.attr.maxHeight};
            final TypedArray array = context.obtainStyledAttributes(attrs, ids);

            if (array != null) {
                maxHeight = array.getDimensionPixelSize(0, 0);
                array.recycle();
            }
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (maxHeight > 0) {
            final int height = MeasureSpec.getSize(heightMeasureSpec);
            final int result = Math.min(Math.round(height * weight), maxHeight);

            heightMeasureSpec = MeasureSpec.makeMeasureSpec(result, MeasureSpec.EXACTLY);
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

然后在您的布局中：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#0f0">

    <com.example.MyImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:background="#f00"
        android:maxHeight="80dip"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:50:50.000

我不确定这是否可行，但试试这个：

把它包`ImageView`在一个容器里。让容器为 30%`LinearLayout`的高度。`ImageView`附在`bottom`容器上，并且最大`ImageView`高度为`80dp`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/widget_margin">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="bottom"
        android:orientation="vertical" >

        <View
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.7" />

        <FrameLayout 
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.3" >
            <ImageView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom"
                android:maxHeight="80dip"
                android:src="@drawable/my_image"
                android:scaleType="fitXY"
               />
        </FrameLayout>

    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:32:22.953

嘿，我知道这不是一个很好的解决方案，但这是我目前唯一想到的解决方案：P

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:orientation="vertical"
    android:weight_sum="1">
 <View android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="0.7"
android:background="#000000"/>
    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:maxHeight="80dip"
        android:src="@drawable/ic_action_search"
        android:scaleType="fitXY"
        android:background="#800000"
        android:layout_weight="0.3" />

  </LinearLayout>
 </RelativeLayout> 
```

# php - 在codeigniter php中声明一个大小为100的空数组

> ID：15117936
> 
> 赞同：0
> 
> 时间：2013-02-27T17:03:32.843
> 
> 标签：php, codeigniter

我正在使用 codeigniter 在 php 中开发一个应用程序，用于工作流过程。

现在我需要声明一个大小为 100 或 200 且具有空值默认值的空数组。无论何时执行工作流，值都会动态存储到该数组中。

我的视图中有一个数组，例如

```
 if(isset($value)){

 foreach ($value as $row) {

 $wer[] = $row;

 }
 } 
```

现在，每当工作流自动运行时，值就会使用`form_dropdown('perfpmself_1',$rate,$wer[0],'class="self"');` 上述格式存储在视图中，我用来加载从 $wer[0] 到 $wer[50] 的所有值。所有值都将正确显示......但如果数据库中没有值将其加载到数组中......它会抛出一个错误，如

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: wer

Filename: views/performancepm.php 
```

任何人都可以提出解决方案来克服我的视图屏幕上的这个错误吗？

请帮助..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:58:48.490

只需在全局范围内定义 wer。我也会使用array_push，但这只是我。把事情简单化：

```
$wer = array();

 if(isset($value)){

     foreach ($value as $row) {

         array_push($wer, $row);

     }
 }

if(empty($wer)){
    //wer has values
}else{
    // wer is not empty
} 
```

关于您的评论，据我所知，只有一种方法可以专门在 codeIgniter 框架中强制执行必填字段：

```
$this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('username', 'Username', 'required'); 
```

来自[CodeIgniter 指南](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules)

否则，您必须使用 JavaScript 或在您自己的 PHP 代码中强制执行它，以查看是否为空字段：

```
if (isset($_GET['username'])){
//username isnt blank
}else{
//username is blank
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:05:06.023

`$wer`在尝试为其分配值之前您没有初始化：

```
if(isset($value)){
    $wer = array();
    foreach ($value as $row) {
        $wer[] = $row;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:22:46.630

尝试：

```
$options = array_fill_keys(range(0,99),null);
echo form_dropdown('perfpmself_1', $options); 
```

# playframework - Play 2 中是否有默认捕获所有新操作的路线？

> ID：15117944
> 
> 赞同：9
> 
> 时间：2013-02-27T17:03:49.800
> 
> 标签：playframework, routes, playframework-2.1

在 Play 1 中，您定义的新操作具有默认路由。

```
*       /{controller}/{action}                  {controller}.{action} 
```

（这默认出现在新项目中）

什么是 Play 2/2.1 等价物？为什么它没有出现在默认路由文件中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-27T20:00:14.740

实际上有一条包罗万象的路线可用。根据 Play 2.0+ 中的[路由文档](http://www.playframework.com/documentation/2.0.4/JavaRouting)，您可以使用**跨越多个 / 的动态部件**，因此如果您将其作为给定方法的**最后**一条路线，它将捕获之前未捕获的每条路线。例如，如果您在数据库中存储了其他“路线”，您可以将其用于进一步处理。

```
GET   /*path   controllers.Application.seacrhRouteInDB(path: String) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:09:05.597

不幸的是，Play Framework 2 中的路由没有此功能。但是您可以创建一个`Global`扩展`GlobalSettings`并实现`onRouteRequest`方法中的全部捕获的类。检查[API](http://www.playframework.com/documentation/api/2.1.0/java/index.html)或[文档](http://www.playframework.com/documentation/2.1.0/JavaGlobal)以获取详细信息。

请注意，这仅在 2.1.0 之后可用。

# font-face - firefox字体渲染不正确

> ID：15117945
> 
> 赞同：0
> 
> 时间：2013-02-27T17:03:56.820
> 
> 标签：font-face, frontend, webfonts

我的网站字体渲染有问题。徽标字体在 chrome 和 safari 中正确呈现，但在 Firefox 中不正确。

这是css代码：

```
 @font-face {
  font-family: 'Bello Pro';
  src: url('./Bello Pro.otf');
}

.logo {
  font-family: 'Bello Pro';
  font-size: 40px;
  font-weight: lighter;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:23:45.220

确保您的 Firefox 版本同时支持`@font-face`, 和您的字体格式。您可能还想检查权限，有时 firefox 不会根据原始策略和/或某些格式呈现字体。

您应该使用在线字体转换器并提供您字体的所有格式（otf、ttf、eot、woff、svg）。

# actionscript-3 - 编译时将 jpeg 嵌入 SWF（无 fla 文件）

> ID：15117946
> 
> 赞同：0
> 
> 时间：2013-02-27T17:03:58.487
> 
> 标签：actionscript-3, flash

用户上传图片，选择模板AS3文件，与图片一起编译成SWF，供用户下载。

基本上，将我自己的自定义动画与用户的资源文件一起使用，以便在运行时编译新的 SWF。

我找到了一个名为“swftools”的工具，它可以将图像转换为幻灯片，所以我知道这样的事情是部分可行的，我只是对 AS3 了解不够，不知道如何动态加载资源，而无需手动创建 FLA 文件.

编辑：为了澄清，我不想在运行时从 URL 或文件动态加载图像。我想将图像嵌入到 SWF 中，但图像数据是在编译时确定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-11T14:31:02.223

同样的问题在这里，我发现了一些很棒的 tuts 展示了它是如何完成的，但是（不幸的是）在 AS2（不是 AS3）中：

[加载图像](http://entheosweb.com/Flash/loading_external_images.asp "加载图像")

要转换的代码：

```
loadMovie("photo.jpeg",photo.empty); 
```

[加载文本](http://republicofcode.com/tutorials/flash/loadvars_bc/ "加载文本")

要转换的代码：

```
myData = new LoadVars();
myData.onLoad = function () {
  myText_txt.text = this.myVariable;
};
myData.load("myText1.txt"); 
```

AS2 到 AS3 的文档记录*很差*，即使对于小脚本也是如此……</p>

如果您有解决方案，我想知道它;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:37:31.267

使用 Flex 和 compc 编译器。 [http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fd2.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fd2.html) 您可以在服务器上修改 as3 源并使用 [Embed(source='path/file.ext')] 指令嵌入图像，运行compc 并获得最终的 swf...

# .net - 当我只指定 net.tcp 时，为什么 UpdateServicereference 添加 HTTP 端点

> ID：15117952
> 
> 赞同：0
> 
> 时间：2013-02-27T17:04:31.280
> 
> 标签：.net, wcf

当我右键单击 if 并选择 UpdateServiceReference 时，我的一项服务已开始添加额外的 HTTP 端点。这会导致运行时错误，说我有重复的端点并且必须按名称指定一个。我现在手动删除端点，但我想停止这个。我只想要 TCP 端点。

这是服务，下面是“额外”端点

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IEmail" />
      </basicHttpBinding>
      <netTcpBinding>
        <binding name="tcpConfig" receiveTimeout="00:10:00" maxBufferPoolSize="5242880"
          maxBufferSize="1048576" maxReceivedMessageSize="1048576" />
      </netTcpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
        <behavior name="NotificationBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

    <services>
      <service behaviorConfiguration="NotificationBehavior" name="PGFContracts.LiveContractsService.LiveTargetPriceAgreementService">
        <endpoint address="LivePricing" binding="netTcpBinding" bindingConfiguration="tcpConfig"
          name="TCPLivePricing" contract="PGFContracts.LiveTargetPriceAgreementService.ILivePricing" />
        <endpoint address="TpaNotification" binding="netTcpBinding" bindingConfiguration="tcpConfig"
          name="TCPTpaNotification" contract="PGFContracts.LiveTargetPriceAgreementService.ITargetPriceAgreementNotification" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8020" />
          </baseAddresses>
        </host>
      </service>
    </services> 
```

这些是我不想要的端点，net.tcp 也正确生成。它是服务器上的 IIS 设置吗？

```
 <endpoint address="http://xxx:8083/LiveTargetPriceAgreement/LiveTargetPriceAgreementService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ILivePricing"
    contract="LiveTPAService.ILivePricing" name="BasicHttpBinding_ILivePricing" />
  <endpoint address="http://xxx:8083/LiveTargetPriceAgreement/LiveTargetPriceAgreementService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITargetPriceAgreementNotification"
    contract="LiveTPAService.ITargetPriceAgreementNotification"
    name="BasicHttpBinding_ITargetPriceAgreementNotification" /> 
```

# php - 在 textarea 中提交评论编辑然后保存

> ID：15117955
> 
> 赞同：0
> 
> 时间：2013-02-27T17:04:35.510
> 
> 标签：php, forms, report

所以，我正在编写一个简短的脚本，它需要用户的“错误报告”并保存它。在页面底部显示评论，并带有一个编辑按钮进行编辑。我希望该按钮将用户带到另一个带有 textarea 的页面，他们的评论可以在这里编辑，并且一个 Save 按钮可以保存他们的报告。我不确定如何链接到用户将上传的确切评论。
像这样： ![报告](../Images/955335a9ac3a4a2ddd320ad4bba5e2ff.png)

![编辑](../Images/5efe78b43bad66ff28464075b1130290.png)

这是我到目前为止所拥有的：

# 错误报告

```
<form method="POST" action="Bugs.php">
  <p>Bug Name <input type="text" name="name" /><br />
   Hardware Type <input type="text" name="hw" /><br />
   OS <input type="text" name="os" /> <br />
   Frequency of Occurence <input type="text" name="freq" /></p>
  <p>Proposed Solutions<br />
  <textarea name="sol" rows="6" cols="100"></textarea>
  <input type="submit" name="submit" value="Create New Bug Report" /></p>
</form>

<?php 

 $Dir = "comments";

 if (is_dir($Dir)) {
  if (isset($_POST['submit'])) {
    if (empty($_POST['name'])) {
        $String = "Unknown Visitor";
    }
    else 
        $String = stripslashes($_POST['name']) . "|";
        $String .= stripslashes($_POST['hw']) . "|";
        $String .= stripslashes($_POST['os']) . "|";
        $String .= stripslashes($_POST['freq']) . "|";
        $String .= stripslashes($_POST['sol']);
        $CurrentTime = microtime();
        $TimeArray = explode(" ", $CurrentTime);
        $TimeStamp = (float)$TimeArray[1] + (float)$TimeArray[0];
        /* File name is " Comment.seconds.microseconds.txt" */
        $SaveFileName = "$Dir/Comment.$TimeStamp.txt";
            if (file_put_contents($SaveFileName, $String)>0)
                echo "File \"" . htmlentities($SaveFileName) . "\" successfully saved.<br />\n";
            else
                echo "There was an error writing \"" . htmlentities($SaveFileName) . "\".<br />\n";
    }
 }

if (is_dir($Dir)) {    //show submitted reports on page
$CommentFiles = scandir($Dir);
foreach ($CommentFiles as $FileName) {
    if (($FileName != ".") && ($FileName != "..")) {
        echo "From <strong>$FileName</strong><br />";
        echo "<pre>\n";
        $Comment = file_get_contents($Dir . "/" . $FileName);
        echo $Comment . "<a href=edit.php>Edit</a>";
        echo "</pre>";
        echo "<hr />";
    }
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:14:10.047

您确实需要将所有这些都放入数据库中，这样会容易得多。

但是..当您对文件夹中的所有注释添加一个 $_GET 变量时，文件名如下：

```
echo $Comment . "<a href=edit.php?com_id=" . urlencode($Filename) . ">Edit</a>"; 
```

然后使用编辑部分，您可以调用 urldecode($_GET['com_id']) 来访问文件名并编辑评论。

# java - 单独的日期和时间对象

> ID：15117957
> 
> 赞同：4
> 
> 时间：2013-02-27T17:04:36.663
> 
> 标签：java, date, time

我有一个网络表单，用户可以在其中从日历弹出窗口中选择日期，从下拉列表中选择时间。目前我正在尝试使用 Date 对象存储日期。

```
@Required
public Date date; 
```

这个对象的输出是这样的：

> 格林威治标准时间 1970 年 1 月 1 日 00:00:00

我真正想做的是将它分开并将日期以*27/02/2013*之类的格式存储，并将时间作为 24 小时格式的单独对象，例如*23:45*。我不确定如何用java做到这一点。

使用 SimpleDateFormat 解决：

```
//also the import
import java.text.*;

@Required
public SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd/MM/yy");
public String date = simpleDateFormat.format(new Date());

@Required
public SimpleDateFormat simpleTimeFormat = new SimpleDateFormat("hh:mm");
public String time = simpleTimeFormat.format(new Date()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T17:05:51.137

看看`Calendar`课堂。它具有获取不同“日期部分”所需的所有方法。另外，查看`SimpleDateFormat`java中的类以所需的方式格式化日期。

日历 - [http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

SimpleDateFormat - [http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:08:46.323

试试这个：

```
SimpleDateFormat dateFormatter = new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat timeFormatter = new SimpleDateFormat("HH:mm:ss");

String dateAsString = dateFormatter.format(date);
String timeAsString = timeFormatter.format(date); 
```

# android - 标签栏一键式电子邮件编辑器的安全异常

> ID：15117958
> 
> 赞同：0
> 
> 时间：2013-02-27T17:04:40.857
> 
> 标签：android

我的目标是，当您按下选项卡时，在选项卡栏上会显示不同的活动，但在其中一个活动上，我不希望任何活动只显示一个电子邮件帐户选择器来显示导致电子邮件编写器的活动。

我目前的方法适用于 2.2 和 2.3，但不适用于更高版本。所以在 Galaxy 3s 上​​我得到

```
 Caused by: java.lang.SecurityException: Given caller package android is not running in process ProcessRecord{} 
```

这是我当前的代码，如果您有建设性的批评，我也愿意做更好的方法。

公共类 myTabbar 扩展 TabActivity {

```
TabHost tabHost;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tabHost = getTabHost();
    setTabs();
}

private void setTabs() {
    addTab("Home", R.drawable.home, Home_Page_Activity.class);
    addTab("Map", R.drawable.map, Map_Locations_Activity.class);
    addTab("Email", R.drawable.email, Email_From_Tab.class);    
    addTab("Input", R.drawable.suggestions, Suggestions_Activity.class);
    addTab("More", R.drawable.more, More.class);
}

private void addTab(String labelId, int drawableId, Class<?> c) {           
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);     
        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);      
        spec.setIndicator(tabIndicator);
        if(c == Email_From_Tab.class){
            Intent it=new Intent(Intent.ACTION_SEND);     
            String[] tos={"email@emael.com"};     
            String[] ccs={"email@emael.com"};     
            it.putExtra(Intent.EXTRA_EMAIL, tos);     
            it.putExtra(Intent.EXTRA_CC, ccs);     
            it.putExtra(Intent.EXTRA_TEXT, "The email body text");     
            it.putExtra(Intent.EXTRA_SUBJECT, "The email subject text"); 
            it.setType("message/rfc822"); 

            spec.setContent(Intent.createChooser(it, "Choose Email Client"));
        }else{
            spec.setContent(intent);
        }
        tabHost.addTab(spec);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:07:16.630

您不能以这种方式将第三方活动嵌入到您自己的 UI 中。

# javascript - 音频文件中的元数据图像？

> ID：15117961
> 
> 赞同：1
> 
> 时间：2013-02-27T17:04:45.140
> 
> 标签：javascript, image, audio, metadata

我想用 javascript/php 检索音频文件的元数据。

我有艺术家、专辑等信息。我使用图书馆

[http://blog.nihilogic.dk/2008/08/reading-id3-tags-with-javascript.html](http://blog.nihilogic.dk/2008/08/reading-id3-tags-with-javascript.html)

现在我还想检索与文件关联的图片。大多数歌曲都带有封面图片或类似的图片。我想提取图片。任何可用于此目的的库或代码？

谢谢。

# python-3.x - 在文本小部件中移动插入位置

> ID：15117966
> 
> 赞同：0
> 
> 时间：2013-02-27T17:04:56.443
> 
> 标签：python-3.x, tkinter

似乎语句： `MyText.mark_set(INSERT, 'new index')` 修改 Text .insert() 方法的插入位置，而不是在键盘上键入的文本的插入位置。

换句话说，有没有办法使用 .insert() 方法插入相当于 CTRL-END 键

```
from tkinter import *

def curseur(bidon):
    mytext.mark_set(INSERT, END)

root = Tk()
mytext = Text(root)
mytext.pack()
mytext.insert(INSERT, "Clic in other window, then clic back here (line one)\n")
mytext.insert(INSERT, "Type something on the keyboard\n")
mytext.insert(INSERT, "The typed text must go to the end of the widget\n")
mytext.bind("<FocusIn>", curseur)
root.mainloop() 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:35:40.917

这确实会移动`Text.insert()`方法的插入位置**和**在键盘上键入的文本的插入位置。原来你需要一点延迟，以便在 Text 小部件中单击的正常效果不会覆盖我们对光标的重新定位:)

```
from tkinter import *

def curseur(bidon):
    root.after(50, lambda: mytext.mark_set(INSERT, END))

root = Tk()
mytext = Text(root)
mytext.pack()
mytext.insert(INSERT, "Clic in other window, then clic back here (line one)\n")
mytext.insert(INSERT, "Type something on the keyboard\n")
mytext.insert(INSERT, "The typed text must go to the end of the widget\n")
mytext.bind("<FocusIn>", curseur)
root.mainloop() 
```

# c# - Jquery手风琴在回发后防止菜单折叠

> ID：15117967
> 
> 赞同：0
> 
> 时间：2013-02-27T17:05:01.630
> 
> 标签：c#, jquery, asp.net

我有一个菜单，它是我的母版页上的嵌套 ListView 控件。我使用下面的 Jquery 将这个 ListView 变成手风琴。问题是当我单击菜单标题时，它会导致回发。因此子菜单闪烁并且回发完成后重新加载页面和菜单（关闭活动子菜单）。

```
 $('.head').each(function () {
            var $content = $(this).closest('li').find('.content');
            $(this).click(function (e) {
               // e.preventDefault();
                $content.not(':animated').slideToggle();
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:47:47.657

简单地说，有几种方法可以在回发期间保持状态。两个最简单的方法是使用 POST 和 GET，即 ViewState 或某种查询字符串。

**继续**

我个人建议使用隐藏字段，假设您希望第三个项目在加载时打开，那么您将使用类似

```
<input id="hidMenuItem" type="hidden" value="3" /> 
```

然后使用 jQuery

```
$(document).ready(function {
  var itemIndex = $("#hidMenuItem").val();
  $("li .content:nth-child(" + itemIndex + ")").slideToggle();
}); 
```

要在回发之前保存打开的项目，请在`click`事件中执行此操作

```
var itemIndex = $("li .content").index(this);
$("#hidMenuItem").val(itemIndex); 
```

它未经测试，但这就是想法。希望有帮助

# c# - Solver Foundation 和 .NET GAC

> ID：15117970
> 
> 赞同：0
> 
> 时间：2013-02-27T17:05:07.600
> 
> 标签：c#, .net, gac, ms-solver-foundation

我使用微软求解器基础制作了一个应用程序，它很棒。但我的问题是我的客户没有安装微软求解器基础，所以当运行程序时，他们得到了这个错误：

> 无法加载文件或程序集“Microsoft.Solver.Foundation, Version=3.0.2.10889, Culture=neutral, PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我认为是因为它已安装到 GAC 中，但我可以在客户端机器上执行此操作，有什么解决方法吗？

也许我只能使用 dll？

# c# - 如何在不创建边框的情况下使拆分器在 SplitPanel 上可见

> ID：15117973
> 
> 赞同：1
> 
> 时间：2013-02-27T17:05:16.730
> 
> 标签：c#, splitcontainer

在我的 Windows 窗体应用程序中使用 3 个嵌套的[SplitContainer 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.aspx)当遇到与其他人相同的问题时，分隔条与周围面板的颜色相同。[常见](https://stackoverflow.com/a/11530023/1111886)的解决方案似乎是更改[BackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backcolor.aspx)但嵌套时会导致嵌套面板周围出现难看的边框：

![在 SplitContainer 中的容器周围形成边框](../Images/a17be55bc2571df2a6e5b308a68d40d5.png)

我也有人[建议使用](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/8c54057c-e980-4064-a702-7f0d18310a54)Fixed3D [BorderStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.borderstyle.aspx)但这有同样的问题：

![使用具有类似问题的 3DBorders 的表单。](../Images/4512e8868ddda0d13553188ee6bfa592.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:05:16.730

在写这个问题的最后时刻，我顿悟了。SplitContainer 内的虚线只是参考线，而不是固定的边距。嵌套的 SplitContainer 的位置是 3, 3。

通过手动将位置设置为 0、0（设计师捕捉到 3、3），左侧的灰色消失了。我还必须将其放大 3 个像素以防止右侧出现新边框。

对每个嵌套的 SplitContainer 执行此操作解决了我的问题： [Fixed form http://fr33dan.com/Fixed.png](http://fr33dan.com/Fixed.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T11:09:53.887

为拆分容器提供与其面板不同的背景颜色，并将它们的边框样式全部设置为无。

# php - str_replace 或 preg_replace 仅替换最后一场比赛？

> ID：15117974
> 
> 赞同：2
> 
> 时间：2013-02-27T17:05:17.890
> 
> 标签：php, regex, preg-replace

我想替换 H `</body>`​​TML 页面上的最终标签。页面上有很多标签（因为 iFrames），所以我只需要替换最后一个。

例如，如果我有这个代码：

```
</body>
</body>
</body>
</body> 
```

我需要`</body>`用其他东西替换最后一个标签。

我曾尝试这样做`preg_replace("~(?!.*</body>)~",$replace_with,$content);`，但效果不佳。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:17:28.920

我们将利用贪婪量词并使用一种先进的技术：

```
~.*\K</body>~s 
```

一些解释：

```
~        # A simple delimiter
.*       # Match anything greedy (until the end)
\K       # Forget what we matched until now
</body>  # Match ¨</body>¨
~        # The closing delimiter
s        # The s modifier to also match newlines with the dot ¨.¨ 
```

PHP 实现可能如下所示：

```
$str = '
</body>
Something !
</body>
</body>
</body>
</body>
</html>';

$search = '</body>';
$replace = '</replaced>';

$str = preg_replace('~.*\K'. preg_quote($search, '~') . '~s', '$1' . $replace, $str);

echo $str; 
```

请注意，我们曾经[`preg_quote()`](http://php.net/manual/en/function.preg-quote.php)转义可能被不受信任的用户使用的适当字符。

输出：

```
</body>
Something !
</body>
</body>
</body>
</replaced>
</html> 
```

# asp.net - 从 ASP.Net 登录控件获取用户名文本框的名称或 ID

> ID：15117980
> 
> 赞同：0
> 
> 时间：2013-02-27T17:05:37.287
> 
> 标签：asp.net, vb.net, login-control, setfocus, loginview

在这个 ASP.Net 登录控件中，您能告诉我 ASP.Net 给出的用户名文本框是什么 ID 或名称吗？

```
<asp:LoginView 
    ID="loginViewMain" 
    runat="server">

    <LoggedInTemplate>
        <asp:LoginName 
            ID="loginName" 
            runat="server"
            FormatString="Hello, {0}!<br/><br/> You have successfully<br/> logged onto the staff site." />

        <br/>
        <br/>

        (<asp:LoginStatus ID="loginStatus" runat="server" />)

        <br/>
        <br/>

    </LoggedInTemplate>

    <AnonymousTemplate>
        <asp:LoginStatus 
            ID="loginStatus" 
            runat="server" />
    </AnonymousTemplate>
</asp:LoginView> 
```

一旦我知道 ASP.Net 从代码隐藏文件中将其命名为什么，我想将重点放在用户名文本框上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:11:38.547

如果我正确理解你的问题，你在找这个吗？

```
var loginName = (LoginName)loginViewMain.FindControl("loginName"); 
```

登录控制

```
var usernameTextBox = (TextBox)LoginUser.FindControl("UserName");
userNameTextBox.Focus(); 
```

# java - Java Applet：如何绘制正方形的字符串？

> ID：15117983
> 
> 赞同：1
> 
> 时间：2013-02-27T17:05:54.887
> 
> 标签：java, arrays

我将如何绘制一个字符串/字符数组，以便将其写成正方形，字符之间的间距相等？数组越大，正方形越大。有没有办法将字符数除以长度并获得矩形中的某些坐标？

我考虑过遍历数组并使用 for 循环获取字符串的整个长度。然后让它成为我方边的长度。但我无法想象如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:09:19.967

Use [getFontMetrics()](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#getFontMetrics%28%29) to find out how much space the string will take up, and then draw character by character, adding the required extra space. Here is the code:

```
import java.awt.*;

// ...

@Override
public void paint(Graphics g) {
    String testString = "The quick brown fox jumps.";
    Rectangle testRectangle = new Rectangle(10, 50, 200, 20);

    Graphics2D g2d = (Graphics2D)g;
    g2d.setColor(Color.BLACK);
    g2d.draw(testRectangle);

    FontMetrics fm = g2d.getFontMetrics();
    int stringWidth = fm.stringWidth(testString);
    int extraSpace  = (testRectangle.width - stringWidth) / (testString.length() - 1);
    int x = testRectangle.x;
    int y = testRectangle.y + fm.getAscent();
    for (int index = 0; index < testString.length(); index++) {
        char c = testString.charAt(index);
        g2d.drawString(String.valueOf(c), x, y);
        x += fm.charWidth(c) + extraSpace;
    }
} 
```

And this is what it looks like:

![enter image description here](../Images/8f8a8f039a9bb24790a319f2d8d89413.png)

In order to get more accurate results `Graphics2D` also allows you to calculate with `float` instead of `int`.

# iphone - 使用 NSPredicate 过滤以数字或符号开头的字符串到 NSArray

> ID：15117984
> 
> 赞同：0
> 
> 时间：2013-02-27T17:05:55.757
> 
> 标签：iphone, ios, regex, nspredicate

如何使用 NSPredicate 过滤以数字或符号开头的字符串到 NSArray。

例子：

> 数组 = {“约翰”、“玛丽”、“阿罗多”、“1约翰”、“+玛丽”}
> 
> 到 newArray = {"1John," "+Mary"}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:50:37.817

这里有4种方法来做到这一点。所有示例都使用了否定字符类。您的要求是过滤掉数字和符号，但您也可以说要过滤掉以非字母字符开头的单词。

```
- (void)testFilterArray0
{
    predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"[^a-zA-Z].*"];
    filtered = [unfiltered filteredArrayUsingPredicate:predicate];
    STAssertTrue([filtered isEqualToArray:expected], nil);
}

- (void)testFilteredArray1
{
    predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"[^\\p{L}].*"];
    filtered = [unfiltered filteredArrayUsingPredicate:predicate];
    STAssertTrue([filtered isEqualToArray:expected], nil);
}

- (void)testFilteredArray2
{
    predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"[^\\p{Letter}].*"];
    filtered = [unfiltered filteredArrayUsingPredicate:predicate];
    STAssertTrue([filtered isEqualToArray:expected], nil);
}

- (void)testFilteredArray3
{
    predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"[^\\p{General_Category=Letter}].*"];
    filtered = [unfiltered filteredArrayUsingPredicate:predicate];
    STAssertTrue([filtered isEqualToArray:expected], nil);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:57:15.080

它不使用 NSPredicate，但它完成了工作

```
NSIndexSet *indexSet = [array indexesOfObjectsPassingTest:^BOOL(NSString *name, NSUInteger idx, BOOL *stop) {
    unichar ch = [name characterAtIndex:0];
    BOOL isLetter = (ch >= 65 && ch <= 90) || (ch >= 97 && ch <= 122);
    return !isLetter;
}];

NSArray *newArray = [array objectsAtIndexes:indexSet]; 
```

您可能需要仔细检查块中的返回条件，因为我没有测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:43:36.927

您可以使用带有正则表达式的谓词来完成您所追求的。

通常，您正在寻找的正则表达式模式`"[chars].*"`将匹配任何以 c、h、a、r 或 s 开头的字符串 - 在示例中。您将替换您想要匹配的实际字符。

为了使结构更清晰，您可以创建一个包含要匹配的实际字符的字符串、一个带有正则表达式模式的字符串，最后是谓词。

如果您对正则表达式和谓词非常熟悉，您当然可以将其全部压缩到一行代码。

```
NSString *matchChars  = @"0123456789+-,."; // Add other characters you want to match

NSString *regexString  = [NSString stringWithFormat:@"[%@].*", matchChars];

NSPredicate *pred = [NSPredicate predicateWithFormat:@"self matches[cd] %@", regexString]; 
```

# regex - Django 正则表达式子

> ID：15117985
> 
> 赞同：1
> 
> 时间：2013-02-27T17:05:56.420
> 
> 标签：regex, django, django-views

我希望将与结果匹配的模式加粗。所以，这是我的代码：

```
re.sub(r'[[:<:]]'+tagdef.content+'[[:>:]]', r'\1<b>'+tagdef.content+'</b>\2', qitem['value']) 
```

但是，它似乎不起作用。这是以前由 stackoverflow 社区的另一个人教的。不确定我是否做对了。

基本上 tagdef.content 是一个正则表达式（例如 increas.*），而 qitem['value'] 是一个字符串，我需要检查它是否存在。

如果我有预期的场景..

```
tagdef.content = "increas.*"
qitem['value'] = "the rate of increase in the market was increased by 100%" 
```

结果必须是：

```
"the rate of <b>increase</b> in the market was <b>increased</b> by 100%" 
```

# asp-classic - ASP VBScript 代码给出“800a0005 Runtime error Invalid Procedure Call”

> ID：15117987
> 
> 赞同：0
> 
> 时间：2013-02-27T17:06:07.817
> 
> 标签：asp-classic, vbscript, nstextattachment

将文本写入文件时，ASP 代码出现以下错误。

Microsoft VBScript 运行时错误“800a0005”

无效的过程调用或参数

我得到上述错误的行如下，

```
oFile.Write Chr(AscB(MidB(FileData,nIndex,1))) 
```

问题是在我上传文件时引起的。我只会在开发环境中遇到这个错误。但是相同的代码在生产环境中运行良好。我不明白为什么错误只在开发环境中引起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:47:29.720

您有一个包含三个嵌套函数调用的方法。尝试分解它以查看哪个调用实际导致错误：

```
b = MidB(FileData, nIndex, 1)
i = AscB(b)
c = Chr(i)
oFile.Write c 
```

# javascript - 具有交叉浏览简单按钮外观的输入文件

> ID：15117990
> 
> 赞同：-1
> 
> 时间：2013-02-27T17:06:26.973
> 
> 标签：javascript, jquery, css, html

我必须创建一个按钮。如果用户点击所述按钮，则提示他选择要上传的文件。选择文件后，使用 Javascript 或 JQuery，我必须填写表格并提交，以便可以上传文件。

问题是我不能使用通常的 html

```
<input type="file" name="xml" class="custom-upload" id="custom-upload"/> 
```

无论如何如何做到这一点？我已经彻底搜索过，所有可能的答案似乎都过于复杂，所以我认为我错过了一个更重要的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:12:03.043

您可以创建一个显示按钮图像的图像。然后单击该按钮，您可以触发实际文件输入的单击事件。

```
<img id="imageButton" src="soure/to/imagebutton.jpg" />
<input type="file" id="fileImageButton" style="display: none; " /> 
```

还有一点 jQuery 来解决问题

```
$("#imageButton").on('click', function() {
    $("#fileImageButton").trigger('click');
}); 
```

或者，香草 javascript

```
document.getElementById('imageButton').addEventListener('click', function() {
  fileinput = document.getElementById('fileImageButton');

  if (document.createEvent) {
    var evt = document.createEvent("MouseEvents")
    evt.initMouseEvent("click", true, true, window,0, 0, 0, 0, 0, false, false, false, false, 0, null);
    fileinput.dispatchEvent(evt);
  } else {
    element.fireEvent("onclick"); //For IE
  }
}); 
```

# objective-c - 为什么这个块在创建时不捕获变量值

> ID：15117992
> 
> 赞同：2
> 
> 时间：2013-02-27T17:06:29.987
> 
> 标签：objective-c, objective-c-blocks, dispatch-async

我在使用 GCD 的 Objective-C 中有以下问题，我无法弄清楚：

我正在使用以下方法来计算一些 648 个图块。首先处理哪些图块的顺序由一些设置变量“pi”的算法给出。变量“loaded”在这种情况下是全局的，从 0 开始，正确地上升到 647。

不使用该块时一切正常。

```
while (loaded < [self.tiles count]) {
    long pi = /* tricky way to calculate the position index to set */;
    NSLog(@"loaded: %d", loaded);
    // Do this in a separate thread
    dispatch_async(loader, ^{
        NSLog(@"loaded ->: %d", loaded);
        [self.tiles[loaded] setPositionIndexTo:pi];
    });

    loaded++;
} 
```

问题：

我得到一个异常，因为该块试图访问 self.tiles[648]！在 Apple 的块文档中，它说，块内的变量值是在创建块时捕获的，所以我不明白，这怎么可能。我确实理解实际上加载的变量最终确实具有值 648，它应该中止循环而不执行。其他一些奇怪的是，值 0 也从未在块中使用，但它以 1 开头。有时也可以看到块在关于加载值的循环之前，有时根本错过值，或者做一些两次。这是一些输出：

```
 loaded ->: 612
 loaded: 613
 loaded ->: 613
 loaded ->: 614
 loaded: 614
 loaded ->: 614
 loaded: 615
 loaded: 616
 loaded ->: 615
 loaded: 617
 loaded ->: 617 
```

为什么以及如何做到这一点？

感谢您的澄清，正如我认为 Apple 的文件明确指出的那样，当创建块时，应该捕获“已加载”的值，而不再为该块进行更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T18:28:44.520

问题是这`loaded`是一个实例变量，而不是局部变量。块捕获*本地*范围。在 Objective-C 中，当您访问实例变量时，编译器将该访问转换为结构成员访问。

```
@interface MyClass : NSObject
{
    int varA;
}
@end

@implementation MyClass
- (void)someMethod
{
    varA = 42; // This
    self->varA = 42 // is actually this after compilation
}
@end 
```

因此，该块在运行时总是会看到 load 的当前值，因为它实际上是在查看`self->loaded`.

这个问题有多种解决方案，但一般来说，您需要确保每个块都看到`loaded`. 一个简单的方法是创建`loaded`一个局部变量。如果您需要跟踪整体进度，请从块中更新进度属性。（请注意，如果`loader`是并发队列，则在更新进度属性时需要注意多线程问题。一个简单的解决方案是将更新分派回自定义串行队列。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:35:27.300

封闭词法范围的所有本地堆栈（非静态）变量都被捕获为 const 变量。在您的情况下，实例变量将作为普通变量访问。

要解决您的问题，请获取一个值为loaded 的局部变量并将其用于块处理。

```
int index = loaded;

while (index < [self.tiles count]) {
    long pi = /* tricky way to calculate the position index to set */;
    NSLog(@"loaded: %d", index);
    // Do this in a separate thread
    dispatch_async(loader, ^{
        NSLog(@"loaded ->: %d", index);
        [self.tiles[index] setPositionIndexTo:pi];
    });

    index++;
} 
```

# string - 反斜杠问题，更改桌面快捷方式目标路径时的引号

> ID：15117995
> 
> 赞同：5
> 
> 时间：2013-02-27T17:06:34.520
> 
> 标签：string, vbscript, desktop-shortcut

我想替换桌面快捷方式的目标，我做到了。但问题是，我无法按照我喜欢的方式配置新路径。以下是我的代码：

```
Set wsc = WScript.CreateObject("WScript.Shell")
Set lnk = wsc.CreateShortcut(wsc.SpecialFolders("desktop") & "\Java basics.lnk")

lnk.targetpath = "C:\Windows\System32\wscript.exe ""\\kk-05\apps\network\logon\kbs_logon_file.vbs"""
lnk.arguments = ""
lnk.save 
```

上面的代码可以编译运行成功，但是更新后的目标是：

> "C:\Windows\System32\wscript.exe \kk-05\apps\network\logon\kbs_logon_file.vbs"

我想要的是：

> C:\Windows\System32\wscript.exe "\\kk-05\apps\network\logon\kbs_logon_file.vbs"

双引号不能正常工作，为什么不能像这样使用双反斜杠//？好像不管我打了多少个/，执行后都只显示一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:13:30.720

采用

`lnk.targetpath = "C:\Windows\System32\wscript.exe " lnk.arguments = """\\kk-05\apps\network\logon\kbs_logon_file.vbs"""`