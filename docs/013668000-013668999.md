# StackOverflow 问答 13668000-13668999

# java - Tomcat中的Log4j2

> ID：13668004
> 
> 赞同：3
> 
> 时间：2012-12-02T09:32:36.240
> 
> 标签：java, tomcat, logging, log4j, log4j2

我正在使用 Tomcat 6 并尝试将 JUL 切换到 Log4j2 (2.0 beta 3)。但是，由于它是一个相当新的项目，文档非常稀少，在线资源还不是很多。

**我想要的是**

1.  调试级别以上的所有事件都应转到磁盘上的文件。
2.  错误应该去`syserr`。
3.  从信息到警告的所有内容都应该转到`sysout`.
4.  [标记](http://logging.apache.org/log4j/2.x/manual/markers.html)的审计日志应该跳过所有这些并转到磁盘上的不同文件。

**我试过的**

这是我的第一次尝试`log4j2.xml`文件：

*我应该写`configuration status`什么？关于它的一些文档在哪里？*

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="info">
<appenders>
    <Console name="Console-err" target="SYSTEM_ERR">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
    <Console name="Console-out" target="SYSTEM_OUT">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
    <File name="MyFile" fileName="app.log">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
</appenders>
<loggers>
    <logger name="com.ecm" level="error" additivity="false">
        <appender-ref ref="Console-err" />
        <appender-ref ref="MyFile" />
    </logger>
    <root level="info">
        <appender-ref ref="Console-out" />
        <appender-ref ref="MyFile" />
    </root>
</loggers>
</configuration> 
```

*记录器名称与 Java 类及其记录器有何关系？*

示例代码：

```
package com.ecm.backend;

public final class Foo {
   private static final Logger LOG = LogManager.getLogger(Foo.class);

   public static void bar() {
     LOG.error("this is error");
     LOG.warn("this is warning");
   }
} 
```

当我运行它时，我在控制台和日志文件中得到它：

```
10:22:49.385 [http-8080-3] ERROR com.ecm.backend.Foo - this is error 
```

*为什么忽略警告？*

如果我删除`additivity="false"`，我得到：

```
10:26:51.388 [http-8080-1] ERROR com.ecm.backend.Foo - this is error
10:26:51.388 [http-8080-1] ERROR com.ecm.backend.Foo - this is error 
```

再次忽略警告并重复错误（如预期的那样）。

*我究竟做错了什么？*

* * *

在折叠下：Tomcat 的其余部分可以使用 JULI，我只想要 Log4j2 用于我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T13:52:49.373

如果您设置配置状态=“调试”，您将看到很多关于配置过程中发生的事情的 log4j2-internal 日志语句。这可能有助于解决配置问题。

我通常设置配置状态=“警告”，所以只有在出现问题时才会收到通知。

关于记录器名称、记录器及其 java 类之间的关系，也许这会有所帮助： http: [//logging.apache.org/log4j/2.x/manual/architecture.html](http://logging.apache.org/log4j/2.x/manual/architecture.html)

关于为什么忽略警告的问题，有这个记录器配置：

```
<logger name="com.ecm" level="error" additivity="false"> 
```

还有一个像这样的记录器：

```
Logger LOG = LogManager.getLogger(com.ecm.backend.Foo.class); 
```

记录器配置“com.ecm”将处理来自 LOG 记录器的所有调用，但实际上只会记录“错误”级别或更高（致命）的调用。其他级别的日志事件（警告、信息、调试和跟踪）被过滤掉，因为它们的级别太低。

可加性的工作方式是首先命名记录器配置（在本例中为“com.ecm”）决定是否应该过滤掉事件。然后，如果 additivity="true"（默认值），则将事件传递给父记录器（在本例中为根记录器）。因为“警告”级别的事件已经被“com.ecm”记录器配置过滤掉了，所以它永远不会到达根记录器。

不确定您要实现什么，但是如果您想将不同的事件级别发送到不同的附加程序，一种方法可能是在 appender-refs 上设置级别，而不是在记录器上：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="info">
<appenders>
    <Console name="Console-err" target="SYSTEM_ERR">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
    <Console name="Console-out" target="SYSTEM_OUT">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
    <File name="MyFile" fileName="app.log">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </File>
</appenders>
<loggers>
    <logger name="com.ecm" additivity="false">
        <appender-ref ref="Console-err" level="error" />
        <appender-ref ref="MyFile" level="debug" />
    </logger>
    <root>
        <appender-ref ref="Console-out" level="info" />
        <appender-ref ref="MyFile" level="debug" />
    </root>
</loggers>
</configuration> 
```

这会将 LOG 记录器的输出发送到 MyFile 和（如果级别是错误或致命的）也发送到 Console-err。

不在“com.ecm”包中的记录器的输出将被发送到 MyFile，并且（如果级别是 info、warn、error 或 fatal）也发送到 Console-out。

# java - 在 Java 中除以双精度时的奇怪行为

> ID：13668007
> 
> 赞同：16
> 
> 时间：2012-12-02T09:33:23.080
> 
> 标签：java, double, divide

当我使用双打在 Java 中将 317 除以 219 时，我得到 1。
例如：

```
double b = 317/219;
System.out.println(b); 
```

输出是：1。

这是因为它是循环小数吗？不得不改用 BigDecimal，这很烦人。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-02T09:35:01.227

试试这个

```
 double b = 317/219D; 
```

java中编码数字的默认类型是`int`，因此使用您拥有的代码，java正在处理两个`int`数字，除法的结果也将是`int`，这将截断小数部分以给出最终结果`1`。然后将此`int`结果从`int 1`转换为 a`double 1`而没有编译器警告，因为它是一个*扩大*转换（保证源类型“适合”目标类型的转换）。

通过将任一数字编码为`double`尾随`D`（您也可以使用`d`，但我总是使用大写字母，因为`L`小写`l`看起来像 a `1`），除法的结果也将是`double`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T13:31:37.287

另一种选择...

```
double b = (double)317/219; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T09:34:57.300

这是因为您使用了整数文字，所以您正在进行整数除法。

试着改写`double b = 317.0/219.0;`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T09:48:02.567

值得一提的是，您的示例在运行时没有划分。317/219 在编译时计算（整数除法，分数被丢弃）并替换为常数。如果你反编译 .class （我使用 Jad [http://www.kpdus.com/jad.html](http://www.kpdus.com/jad.html)）你会看到

```
double b = 1.0D; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T09:34:57.857

这是`int`分裂。写：

```
double b = 317.0/219;
System.out.println(b); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T09:36:20.067

因为您输入的数字是 inetgers，所以答案也是如此。
要获得双精度，您需要使用浮点数或转换您使用的整数之一：

```
double b = 317.0/219;
System.out.println(b); 
```

或者：

```
double b = ((double)317)/219;
System.out.println(b); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-10-01T03:16:37.593

你可以试试

```
double b = 0.0;
b = 317/219; 
```

这样我就可以返回小数点

# java - 启动 jar 文件并在控制台中显示

> ID：13668009
> 
> 赞同：1
> 
> 时间：2012-12-02T09:33:31.100
> 
> 标签：java, jruby

我最近使用 JRuby 和 Rawr 制作了一个 jar 文件。该程序只是将单词“hello”写入 STDOUT，然后等待用户按 Enter。

要运行程序，我必须输入`java -jar MyProgram.jar`. 我想知道是否可以这样当用户双击 *.jar 文件时，控制台会自动弹出显示“hello”（而不是`java -jar MyProgram.jar`每次我想运行程序时都必须执行） ）。我想我可以创建一个批处理文件，但有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:37:27.260

一些 Java .exe 包装器，如 JSmooth，允许您将 jar 包装在 exe 文件中，然后弹出控制台。

# android-actionbar - 打开 ActionLayout 时隐藏菜单项

> ID：13668010
> 
> 赞同：6
> 
> 时间：2012-12-02T09:33:53.317
> 
> 标签：android-actionbar, actionbarsherlock, menuitem, actionview

我正在使用 ActionBarSherlock：

有 3 个菜单项，其中只有 1 个具有 ActionLayout。

**default_menu.xml**

```
<item
    android:id="@+id/searchIcon"
    android:icon="@drawable/search_icon"
    android:actionLayout="@layout/search_icon_actionview"
    android:showAsAction="always|collapseActionView"
    android:title="Search"/>
<item
    android:id="@+id/newIcon"
    android:icon="@drawable/new_icon"
    android:orderInCategory="0"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="New"/>
<item
    android:id="@+id/notificationIcon"
    android:icon="@drawable/notification_icon"
    android:orderInCategory="0"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="Notifications"/> 
```

如果我使用上面的代码。只有 1st 2 图标可见。如果我将第 2 和第 3 设为**Always**，即使在单击**Search时打开****actionLayout**时，它们也会保留。

 **我想最初显示所有 3 个菜单项，当单击 search_icon 时隐藏每个项目。

我也对我的实施有疑问，我是否以正确的方式做事。

**在 Activity（它有一个 viewPager）的第一个 Fragment 中：**

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.searchIcon:

    mEtSearchbar.clearFocus();
    (new Handler()).postDelayed(new Runnable() {
       public void run() {
           mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0));
           mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP , 0, 0, 0));
       }
    }, 100);

        return true;
    case R.id.newIcon:

        return true;
    case R.id.notificationIcon:

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    // TODO Auto-generated method stub
    inflater.inflate(R.menu.default_menu, menu);

    mSearchbar = (MenuItem) menu.findItem(R.id.searchIcon);
    View actionview = mSearchbar.getActionView();
    mEtSearchbar = ((EditText) actionview.findViewById(R.id.search_editText));
    ImageView searchImage = ((ImageView) actionview.findViewById(R.id.search_image));
    searchImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            String s = mEtSearchbar.getText().toString();
            Toast.makeText(getSherlockActivity(), "Searching for: " + s, Toast.LENGTH_SHORT)
                    .show();
        }
    });
    super.onCreateOptionsMenu(menu, inflater);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T09:18:14.787

这就是我最终使用的。

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {

            super.onCreateOptionsMenu(menu);
            MenuInflater inflater = getSupportMenuInflater();
            inflater.inflate(R.menu.main, menu);

            MenuItem searchItem = menu.findItem(R.id.search);

            mSearchView = (SearchView) searchItem.getActionView();
            setupSearchView(searchItem);

            mSearchView.setOnSearchClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                            // hide action item
                            if (menu != null) {
                                    menu.findItem(R.id.notifications).setVisible(false);
                                    menu.findItem(R.id.share).setVisible(false);
                            }

                    }
            });
            mSearchView.setOnCloseListener(new SearchView.OnCloseListener() {
                    @Override
                    public boolean onClose() {
                            adapter.getFilter().filter("");
                            // re-show the action button
                            if (menu != null) {
                                    menu.findItem(R.id.notifications).setVisible(true);
                                    menu.findItem(R.id.share).setVisible(true);
                            }
                            return false;

                    }
            });
            return true;
    }

private void setupSearchView(MenuItem searchItem) {
         //code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T19:25:03.713

我认为您可以在 searchView 上设置类似的内容：

```
searchCommand.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T04:45:11.900

我不确定，但试试这个。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
getSupportMenuInflater().inflate(R.menu.map_menu, menu);
for (int i = 0; i < menu.size(); i++) {
    MenuItem item = menu.getItem(i);
    if (item.getItemId() == R.id.menu_more) {
        itemChooser = item.getActionView();
        if (itemChooser != null) {
            itemChooser.setOnClickListener(this);
        }
    }
}
return super.onCreateOptionsMenu(menu);
} 
```**

# c# - 如何通过经度和纬度以编程方式显示谷歌地图

> ID：13668011
> 
> 赞同：0
> 
> 时间：2012-12-02T09:33:56.117
> 
> 标签：c#, asp.net, sql, google-maps

我正在开发一个 ASP.Net 项目。我有与之链接的 SQL Server 数据库。该项目有该市现有的酒店清单。一个页面将在网格视图上显示酒店列表。点击酒店将重定向到显示该酒店详细信息的另一个页面。我想通过经度和纬度显示该酒店的谷歌地图图片或谷歌街道图片以及该酒店详细信息页面上的详细信息。每个酒店的详细信息将从数据库中获取以显示在该页面上，并且每个酒店的经度和纬度值也保存在数据库的列中。

如何参考来自数据库的经度和纬度值显示谷歌地图图片或谷歌街景图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:18:45.790

这是一个使用 jQuery 和 google maps javascript API 的简单示例：

```
var map = new google.maps.Map(
    $('#map')[0],
    {
        zoom: 50,
        center: new google.maps.LatLng(52.250486, 4.432766),
        mapTypeId: 'terrain',
        streetViewControl: true
    }
);

map.StreetView = new  google.maps.StreetViewPanorama(
    $('#map')[0], 
    {
        position: map.getCenter(),
        pov: { heading: 0, pitch: 0, zoom: 1 
    }
});​ 
```

您可以在 ASP.NET .aspx 文件中使用类似这样的内容，而不是硬编码的纬度和经度：

```
...
zoom: 50,
center: new google.maps.LatLng(
    <%= string.Format(CultureInfo.InvariantCulture.NumberFormat, 
        "{0:0.0000}", YourLatitude) %>,
    <%= string.Format(CultureInfo.InvariantCulture.NumberFormat, 
        "{0:0.0000}", YourLongitude) %>),
mapTypeId: 'terrain',
... 
```

[JSFiddle 的现场演示。](http://jsfiddle.net/UCNXC/2/) 阳光明媚的日子里的海滩……嗯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T13:52:17.673

```
<html>
<head>
    <title>Google Map Integration</title>    
</head>
<body>

    <div>

       <!-- Google Map [Div]-->
        <div id="googleMap" style="width:auto; height:800px;"></div>
       <!-- END: Google Map [Div]-->

    </div>

    <!--Google Map-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

        //Load Google-Map on [Page-Load]
        google.maps.event.addDomListener(window, 'load', resetMap());

        function resetMap() {            

            //Google-Map DefaultPosition
            var defaultPostion = new google.maps.LatLng(0, 0);

            //Set Google-Map properties:
            var mapProperties = {
                center: defaultPostion,
                zoom: 2,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            //Load Google-Map on "googleMap" [div]
            var map = new google.maps.Map(document.getElementById("googleMap"), mapProperties);

            var locations = [
                                ['Tool Tip: Dubai', 25.10789521446838, 55.1819798029785, '<div><p>Dubai is the most populous city and emirate in the United Arab Emirates (UAE), and the second largest emirate by territorial size after the capital, Abu Dhabi.  Dubai is located on the southeast coast of the Persian Gulf and is one of the seven emirates that make up the country.</p></div>'],
                                ['Tool Tip: Houston', 29.9928829, -95.4859515, '<div><p>Houston is the most populous city in Texas and the fourth most populous city in the United States. According to the 2012 U.S. Census estimates, the city had a population of 2.16 million people within a land area of 599.6 square miles.</p></div>'],
                                ['Tool Tip: London', 51.51121389999999, -0.11982439999997041, '<div><p>London is the capital city of England and the United Kingdom. It is the most populous city in the United Kingdom with a metropolitan area of over 13 million inhabitants.</p></div>'],
                                ['Tool Tip: Riyadh', 24.7116667, 46.72416670000007, '<div><p>Riyadh is the capital and largest city of Saudi Arabia. It is also the capital of Riyadh Province, and belongs to the historical regions of Najd and Al-Yamama.</p></div>'],
                                ['Tool Tip: Karachi', 24.872769, 67.091738, '<div><p>Karachi is capital of Sindh as well as the largest and most populous metropolitan city of Pakistan and its main seaport and financial centre of the country.</p></div>']
                            ];

            for (i = 0; i < locations.length; i++) {

                var currentToolTip = locations[i][0]
                var currentLatitude = locations[i][1]
                var currentLongitude = locations[i][2]
                var currentContent = locations[i][3]

                var currentPostion = new google.maps.LatLng(currentLatitude, currentLongitude);

                //Add the [Marker] in Google-Map
                var marker = new google.maps.Marker({
                    position: currentPostion,
                    map: map,
                    title: currentToolTip
                });

                //Initialize [Info Window] for each [Marker]
                var infoWindow = new google.maps.InfoWindow();

                //Add Listener for [Marker] "click"
        google.maps.event.addListener(marker,'click', (function(marker,currentContent){ 
                return function() {
                    infoWindow.setContent(currentContent);
                    infoWindow.open(map,marker);
            };
        })(marker,currentContent)); 

            } 
        }
    </script>
    <!--END: Google Map-->    

</body>
</html> 
```

# .htaccess - 如何将子路径参数重定向到参数？

> ID：13668013
> 
> 赞同：0
> 
> 时间：2012-12-02T09:34:15.197
> 
> 标签：.htaccess

我希望当人们输入：

> quizz.pl/emit/myvariable

服务器将调用文件 emit.php 并将 myvariable 作为 f 参数传递：

> quizz.pl/emit.php?f=myvariable

只有当人们键入“emit”时，我才需要它工作。

如何使用 htaccess 完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:40:40.857

试试这个代码：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^/?emit/(.*)$ emit.php?f=$1
</IfModule> 
```

*IfModule*标签将检查规则是否仅在`mod_rewrite`安装时执行。第二行激活`RewriteEngine`. 第三行将为您奠定基础。接下来的两行检查是否将返回具有相同名称的目录或文件，而不是一些 url 重写。

它`RewriteRule`确实具有真正的*魔力*，它检查 url 是否具有发出并将所有内容作为参数放入您的`emit.php`.

# c - C数组算术和指针

> ID：13668014
> 
> 赞同：5
> 
> 时间：2012-12-02T09:34:17.270
> 
> 标签：c, arrays, pointers, integer-arithmetic

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

我正在阅读有关 C 的教程，并且遇到了以下语法：

```
int doses[] = {1, 3, 2, 1000};
doses[3] == *(doses + 3) == *(3 + doses) == 3[doses] 
```

现在的重点是得到`int 1000`，但最后一个没有任何意义。要么是晚了，我的大脑没有工作，要么是 C 特有的东西，要么是错字。当涉及到指针时，我想涵盖我所有的基础知识，因此请仔细阅读它。这意味着理解这一切。任何答案将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T09:37:03.970

来自[维基百科](http://en.wikipedia.org/wiki/C_syntax#Accessing_elements)

> 由于表达式 a[i] 在语义上等价于 *(a+i)，而后者又等价于 *(i+a)，因此表达式也可以写成 i[a]，尽管这种形式很少使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T09:39:54.960

是的，数组下标在 C 中是可交换的。`e1[e2]`确实与`*((e1)+(e2))`. 但它在生产代码中没有用，这种表示法的唯一目的是使源代码混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:38:53.397

```
ISO c99 : 6.5.2.1 Array subscripting 
```

1
一个表达式的类型应为“指向对象类型的指针”，另一个表达式应为整数类型，结果的类型为“类型”。

```
E1[E2] either E1 will be pointer to object type and E2 will be integer type. 
```

或者，

```
E1 is integer type and E2 is of pointer to that type 
```

as`+`是可交换`E1[E2] == E2[E1]`的 so ，因为它实际上被评估为`(*(E1+E2))`

# mysql - MySQL Join 基于日期范围

> ID：13668023
> 
> 赞同：0
> 
> 时间：2012-12-02T09:35:11.960
> 
> 标签：mysql

我正在创建一个模拟电子商务数据库来测试脚本；我想运行以下代码，但还包含进一步的语句来根据到期日期选择卡。

```
SELECT customerCard.cardNumber, customer.firstName, customer.eMailAddress, customer.lastName, cardType, expiryDate
FROM customerCard
LEFT JOIN customer
USING ( eMailAddress ) 
LEFT JOIN card
USING ( cardNumber )
WHERE card.Expiry =< DATE_FORMAT(NOW(),'%m-%Y')
ORDER BY  `customerCard`.`cardNumber` ASC 
```

我在 WHERE 语句的行中收到错误 - 我该如何解决这个问题？什么是正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:10:28.213

请尝试以下操作：由于没有提供表模式/示例数据，代码主要基于假设。比如你的到期日就像`'mm-yyyy' format`

```
SELECT customerCard.cardNumber, customer.firstName, 
customer.eMailAddress, customer.lastName, cardType, expiryDate
FROM customerCard CC
LEFT JOIN customer CO
ON CC.eMailAddress = CO.eMailAddress 
LEFT JOIN card CD
ON CO.cardNumber = CD.cardNumber
WHERE DATE_FORMAT(CD.Expiry,'%m-%Y') =< DATE_FORMAT(NOW(),'%m-%Y') -- put both in same format
ORDER BY  CC.cardNumber ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:16:49.983

我从您上面的帮助中找出了正确的 MySQL 查询语句。

```
SELECT customerCard.cardNumber, customer.firstName, customer.eMailAddress, customer.lastName, cardType, expiryDate
FROM customerCard
LEFT JOIN customer
USING ( eMailAddress ) 
LEFT JOIN card
USING ( cardNumber ) 
WHERE DATE_FORMAT( card.expiryDate,  '%y-%m-%d' ) <= DATE_FORMAT( 
CURRENT_TIMESTAMP ,  '%y-%m-%d' ) 
ORDER BY  `customerCard`.`cardNumber` ASC 
LIMIT 0 , 30 
```

# python - 如何在 jinja2 中做一段时间（ x < y ）

> ID：13668025
> 
> 赞同：6
> 
> 时间：2012-12-02T09:35:19.603
> 
> 标签：python, pyramid, jinja2

我应该如何在 jinja2 中做一段时间（ x < y ）？我看过 jinja2 文档，似乎它们只支持声明的数组变量的循环，而根本不支持 while()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T09:43:29.470

*我认为您与Jinja2*最接近的选择是使用*for* with *range*：

```
 {% range number from 3 to 6 %}
      {{ number }}
      (...)
  {% endrange %} 
```

您可以从程序中传递变量以在循环中使用它们。

# php - WCF 服务的前端

> ID：13668031
> 
> 赞同：3
> 
> 时间：2012-12-02T09:35:54.590
> 
> 标签：php, wcf, frontend, account-management

我必须做出一个相当大的设计决定，并想向有经验的人寻求一些建议。

我正在使用 WCF 开发 SOA 服务（包括登录 + 用户帐户管理、客户数据库、公司不同产品线的介绍）。

我现在必须决定要使用哪种前端技术来生成用户可以在浏览器中查看的 HTML。

合乎逻辑的答案是：ASP.Net。但是，我想知道其他选择。我正在考虑使用 PHP 服务（因为我想学习这种语言）。我可以想到这样的场景： - 最终用户通过 HTTP 访问 PHP 服务，PHP 服务通过 SOAP 对 WCF 服务执行一些业务逻辑调用，然后将结果返回给用户。

这至少产生了用户会话管理必须在 PHP 服务一侧的问题，因为 WCF 服务仅由 PHP 服务调用。

那么，有没有一种更简单的方法可以在我的 WCF 服务前面获取一些（动态）HTML 表示层（忽略 ASP.net，最好使用 PHP）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:02:51.340

对于大约 6 个月前我参与的一个小项目，我们的情况非常相似。我们有一个网站和 3 个移动应用程序，它们与托管在 Windows Azure 中的 WCF 服务进行通信。移动应用程序开发人员与 WCF 服务通信没有问题，但网站是另一回事。

我们使用了 ASP.Net 前端，但由于它在 Azure 中托管为不同的项目，因此它必须通过 HTTP 访问 WCF 服务。

我认为一旦你决定这是你想要设置的方式，无论你选择 ASP.Net 还是 PHP 都不再重要（除了托管成本等）。本质上，您的前端变成了一个瘦代理，它将请求路由到 WCF 服务并返回到浏览器。您可以使用 PHP 和 ASP.Net 轻松完成此操作。

现在回顾这个项目，我会主张在同一个项目中托管 WCF 服务和前端，但使用两个单独的 Web 角色。这完全消除了让您的前端进行 HTTP 调用所涉及的延迟。此外，您的前端和 WCF 服务可以使用相同的类库来访问业务逻辑。理想情况下，您的前端和 WCF 服务都将成为瘦包装器，它们都与所有业务逻辑的相同类库接口。

这是我可以看到 HTML 表示层变得更容易的唯一方法。如果您的前端位于其他地方并通过 HTTP 与您的业务逻辑接口，那么 PHP 和 ASP.Net 都同样适合该任务。就会话管理而言；这将非常容易，因为您指出用户帐户管理和登录都由 WCF 服务处理。然后，您的 PHP 或 ASP.Net 会话可能只保存服务提供给您的会话令牌，服务负责会话超时等。

# balanced-payments - 如果支票账户收费失败，能否将信用卡设置为备用来源？

> ID：13668032
> 
> 赞同：1
> 
> 时间：2012-12-02T09:36:15.183
> 
> 标签：balanced-payments

我希望客户提交支票账户和信用卡信息。如果支票账户收费失败，是否有可能自动向信用卡收费？是否可以有多张信用卡作为备份？我了解失败的支票账户费用为 3.50 美元，这与银行收取的 NSF 费用有何相似或不同之处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:03:07.277

目前，您不能通过 Balanced 向支票账户收费（借记）（贵公司自己的账户除外）。您可以从信用卡中收取费用，并将存款存入支票账户。您可以让您的客户提供多张卡作为备用卡，但您需要自己明确处理为备用卡充电的逻辑。Balanced 的费用（基本费率之外）只是从我们银行转入的费用。干杯。

# concurrency - IO 通道与读取器/写入器

> ID：13668036
> 
> 赞同：9
> 
> 时间：2012-12-02T09:36:37.227
> 
> 标签：concurrency, io, go, channel

由于 Go 有通道，我想知道为什么标准库似乎没有被设计为将它们用于 IO。

相反，有读者和作家类型，但使用渠道会有什么问题？

一个函数可以返回一个字节切片通道（假设单字节，甚至单比特返回效率太低），并接受一个用于取消请求的通道和一个用于错误报告的通道。

-好奇的围棋新手。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T10:08:27.517

通道非常适合 goroutine 之间的通信。当一个程序做一些简单的事情时，例如读取标准输入，对流做一些事情并将结果输出到标准输出 - 然后使用通道是一种过度杀伤，不必要地损害性能。

只要标准库在某些地方没有提供特定于 goroutine 相互通信的东西，就没有充分的理由对简单的操作进行建模，例如使用通道`io.Reader`或`io.Writer`使用通道的操作，分别具有基于通道的方法集 (API)。

此外，在需要时，可以将简单实现包装在通道中，而相反，将通道实现“解包”回其原语是不可能的。此外，Go 作者显然喜欢明确性，导致性能瓶颈没有被隐藏（并且令人惊讶）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-02T07:25:56.843

我认为存在的另一个原因`io.Reader`是`io.Writer`因为它们在单线程级别上运行良好；通道几乎专门用于 goroutine 间通信或多线程模型。在某些情况下，您可以互换使用它们，但它们旨在解决 2 个不同的挑战。 `io.Reader`并且`io.Writer`还具有无法通过通道轻松复制的 EOF 概念，除非您在通道上分层一个单独的协议 - 这当然只是一种矫枉过正。PS 关闭通道与 EOF 也不一样，因为关闭通道会阻止它在将来被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-22T22:45:16.123

我的这个包实现了将 io.Reader 和 io.Writer 包装成一个通道。

或者，换句话说，它创建了一个线程安全的缓冲区。

或者，换句话说，它是一个通用管道。

[https://github.com/latitov/milkthisbuffer](https://github.com/latitov/milkthisbuffer)

# ruby-on-rails - Rails - 单表继承中的多态性

> ID：13668040
> 
> 赞同：2
> 
> 时间：2012-12-02T09:37:04.457
> 
> 标签：ruby-on-rails, polymorphism, single-table-inheritance

我有三个模型，`Poem`and`Song`和`User`。用户可以对任意数量的诗歌和歌曲进行投票。

一种解决方案是制作两个关联模型`PoemVote`和`SongVote`

```
class PoemVote
  attr_accessible :poem_id, :user_id
  belongs_to :poem
  belongs_to :user
end

class SongVote
  attr_accessible :song_id, :user_id
  belongs_to :song
  belongs_to :user
end 
```

`some_poem_vote.poem`我可以打电话`some_song_vote.song`

但是，`PoemVote`和`SongVote`本质上是一样的。如何使用单表继承从一个父`Vote`类扩展两者？

我在想一些事情：

```
class Vote
  attr_accessible :resource_id, :user_id
end

class PoemVote < Vote
  ...not sure what goes here...
end

class SongVote < Vote
  ...not sure what goes here...
end 
```

如何使它工作，以便我仍然可以调用`some_poem_vote.poem`但在下面让 PoemVotes 和 SongVotes 共享一个数据库表？或者我的问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:00:49.597

在 rails 中，STI 很简单：您只需在表`type`上创建一个字符串列`votes`，其余的由 rails 处理。要创建正确的关联，您可以执行以下操作：

```
class Vote
  attr_accessible :user, :votable
  belongs_to :user
  belongs_to :votable, polymorphic: true
end 
```

...这将需要在您的表格上添加一个`votable_id`和一个`votable_type`列`votes`。务必添加

```
has_many :votes, as: :votable, class_name: 'PoemVote' # or 'SongVote' 
```

在您的关联模型上。但是，这种方法的问题是您必须保持警惕并且不能`Vote`直接使用来创建投票，否则您将获得关联的错误类型的投票。为了强制执行这一点，有一个可能的黑客攻击：

```
class Vote
  attr_accessible :resource_id, :user_id

  def self.inherited( subclass )
    super( subclass )
    subclass.send :belongs_to, :votable,
                  class:  "#{subclass.name.gsub('Vote','')}"
  end
end 
```

...但我确定（我在同样的问题上苦苦挣扎）它为代码恐怖打开了大门，因为你必须解决很多由继承引起的问题（作用域表现得很奇怪，一些库不能很好地管理 STI ， ETC。）。

问题是：你真的**需要**STI 吗？如果您的投票表现相同，请不要使用 STI，只需使用 polymorphic `belongs_to`，您将为自己省去很多麻烦。

# ios - numberf 的整数

> ID：13668041
> 
> 赞同：-1
> 
> 时间：2012-12-02T09:37:06.570
> 
> 标签：ios, xcode

我有这个代码：

```
sliderPosition.minimumValue = 150.0f;
sliderPosition.maximumValue = 450.0f; 
```

它的工作原理好像范围是 150 到 450。所以我不明白“f”是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:47:48.057

如果你只是这样写，`150.0`它会被当作`double`. 如果你这样写，`150.0f`它会被当作`float`.

在您需要告诉编译器您使用的是 float 而不是 double 的情况下，您需要`f`在数字后面加上 a。

# html - 将图像与文本一起使用

> ID：13668044
> 
> 赞同：1
> 
> 时间：2012-12-02T09:37:36.560
> 
> 标签：html, css, web-applications

我在这里遇到了一个很小的基本问题。我有一张图片和很多文字。我希望我的图像占据它的空间，然后剩余的空间应该用文本填充，也是图像右侧的空间。但是，文本总是从图像结束的下一行开始。这是代码。

```
<p style="float:left;">
  <img src="http://upload.wikimedia.org/wikipedia/commons/b/b1/Maria_Amalia.jpg" />
Princess Maria Amélia of Brazil (1831–1853) was the daughter of Dom Pedro I, founder of Brazil's independence and here continues my text...</p> 
```

jssfiddle：http: [//jsfiddle.net/xpncr/](http://jsfiddle.net/xpncr/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:47:54.700

你想把`float: left`你的形象。

```
<p>
    <img src="http://upload.wikimedia.org/wikipedia/commons/b/b1/Maria_Amalia.jpg" style="float: left;" />
    Princess Maria Amélia of Brazil (1831–1853) was the daughter of Dom Pedro I, founder of Brazil's independence and
</p> 
```

jsfiddle：http: [//jsfiddle.net/xpncr/1/](http://jsfiddle.net/xpncr/1/)

# jquery - jquery (1.8.2) 数据选择器

> ID：13668047
> 
> 赞同：1
> 
> 时间：2012-12-02T09:37:52.393
> 
> 标签：jquery, jquery-selectors, attributes

我正在使用 jQuery 1.8.2

我在元素上放置了一个数据：

```
el.data('uid', 'value') 
```

如何找到包含此数据的元素？我试过选择器

```
$('.class-name:data(uid="value")')
$('.class-name[uid="value"]') 
```

但是不管用，有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:43:46.590

如果你想使用选择器，你需要使用`.attr()`并设置一个`data-`属性。

```
// set data
$('p').attr('data-uid', 1234);

// find by uid
$('p[data-uid=1234]');

// find all with data-uid
$('[data-uid]') 
```

[在此处查看一些示例](http://jsfiddle.net/BzYjX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:45:11.540

您可以使用以下`filter`方法：

```
$('.selector').filter(function(){
    return $(this).data('uid') === 'value';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T09:46:49.647

搜索文档后，似乎 jquery 选择器`:data()`不在 jQuery 本身中，而是在 jQuery UI 的核心中。你可以在这里找到文档：http: [//api.jqueryui.com/category/ui-core/](http://api.jqueryui.com/category/ui-core/)

# java - 按下按钮时使其他类框架设置可见（假）

> ID：13668049
> 
> 赞同：0
> 
> 时间：2012-12-02T09:38:06.353
> 
> 标签：java, swing, jframe, jpanel

我想在按下按钮时使其他类框架设置可见（假）。

有一个名为 DisplayScore 的类，该类获取 getContentPane().add(new ScoreInfo()); 来自 ScoreInfo 类。拆分为两个类的原因是因为 DisplayScore 扩展了 JFrame 而 ScoreInfo 扩展了 JPanel。反正

在 ScoreInfo 中按下按钮时，我想调用其他框架并关闭 DisplayScore 框架。如果我这样做了 this.setVisible(false);，只有面板消失，并且由 DisplayScore() 制成的框架仍然存在。

所以..我的问题是如何从 ScoreInfo 类中处理它？查看底部部分。动作执行方法。

```
public class ScoreInfo extends JPanel implements ActionListener
{
        JButton btnBack;

public ScoreInfo()
{

    JTextArea ta = new JTextArea();
    ta.setForeground(Color.white);
    ta.setFont(new Font("Serif", Font.ITALIC+Font.BOLD, 16));
    ta.setBackground(Color.darkGray);

    try
    {
        ta.read(new FileReader("data/scores4.txt"),null);
    }
    catch(IOException ioe)
    {
        System.out.print("ERROR: Could not read file \"");
    }

    btnBack = new JButton("MAIN");
    btnBack.setSize(10,10);
    btnBack.setBackground(Color.darkGray);
    btnBack.setFont(new Font("Courier New", Font.ITALIC+Font.BOLD, 15));
    btnBack.setForeground(Color.black);

    JPanel score = new JPanel();
    score.setLayout(new BorderLayout());
    JButton btnScore = new JButton("H I G H  S C O R E");
    btnScore.setBackground(Color.BLACK);
    btnScore.setFont(new Font("Courier New", Font.ITALIC+Font.BOLD, 48));
    btnScore.setForeground(Color.white);

    JLabel score_tab = new JLabel("   N A M E  " + "  S C O R E  " + "  C O M B O  ");
    score_tab.setFont(new Font("Courier New", Font.ITALIC+Font.BOLD, 35));

    score.add(btnBack, BorderLayout.WEST);
    score.add(btnScore, BorderLayout.CENTER);
    score.add(score_tab, BorderLayout.SOUTH);

    JPanel panel = new JPanel();
    panel.setBackground(Color.darkGray);
    panel.setPreferredSize(new Dimension(800, 380));
    panel.setLayout(new BorderLayout());
    panel.add(score, BorderLayout.NORTH);
    //panel.add(backpnl, BorderLayout.WEST);
    panel.add(ta, BorderLayout.CENTER);

    add(panel, score);

    btnBack.addActionListener(this);

    }

public void actionPerformed(ActionEvent evt){
    if(evt.getSource()==btnBack){

        //want to make DisplayScore.setVisible(false); 
        //this.setVisible(false);
        MainFrame mf = new MainFrame();
        mf.pack();
        mf.setSize(640,480);
        mf.setLocation(400,0);
        mf.setResizable(false);
        mf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mf.setVisible(true);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:43:18.220

这应该有效：

```
if(evt.getSource()==btnBack){

    getParent.setVisible(false);
    MainFrame mf = new MainFrame(); 
```

但是不太健壮，因为您不知道父级是否实际上是`JFrame`（并且正如 MadProgrammer 评论的那样，这将是 contentPane，所以这不起作用）。更好的方法是`JFrame`在构造函数中请求，并隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:43:42.713

你可以：

*   将父框架的引用传递给面板。我觉得这有点脏，但那只是我。
*   用于[`SwingUtilities.getWindowAncestor(Component)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#getWindowAncestor%28java.awt.Component%29)查找当前组件的父窗口。然后你可以调用`setVisible`它。

# facebook - 使用 access_token 的客户端照片访问，使用 Facebook 图表

> ID：13668050
> 
> 赞同：0
> 
> 时间：2012-12-02T09:38:18.683
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我有一个应用程序，其中包括显示用户 Facebook 帐户中的一些照片。我目前正在使用 fb_graph gem 来执行此操作（这是一个 Ruby 项目）。

我可以获取 URL 没有问题，但我不知道的是，如果用户退出他们的 Facebook 帐户，他们是否能够看到这些照片，显示在我的页面上。URL 看起来像：`http://sphotos-d.ak.fbcdn.net/hphotos-ak-prn1/<id>.jpg`.

不过，有一个明显的解决方法。我可以将我为用户拥有的访问令牌附加到 URL 上，因此他们具有相同的权限来查看我所做的照片：`` [http ://sphotos-d.ak.fbcdn.net/hphotos-ak-prn1 /](http://sphotos-d.ak.fbcdn.net/hphotos-ak-prn1/) .jpg?access_token=`.

像这样的问题[http://developers.facebook.com/docs/authentication/client-side/](http://developers.facebook.com/docs/authentication/client-side/)`access_token`建议使用客户端应该是最后的手段，但我认为我必须这样做（因为并非所有照片都是上市）。

这个问题[Facebook access token: server-side vs client-side flow](https://stackoverflow.com/questions/9067947/facebook-access-token-server-side-vs-client-side-flows)说因为我在服务器端获取令牌，所以它会持续 60 天。所以我想小心我如何使用它。

那么有两个问题：这对查看照片有用吗，有没有更好的方法不暴露`access_token`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:15:46.610

在任何情况下都不要将访问令牌放在页面内容的任何 URL 中，否则您从第三方站点提取的任何资源都会在引荐来源标头中暴露用户的访问令牌

您从 API 中检索到的照片 URL 应该可以直接访问，无需访问令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:16:59.660

可以访问[https://sphotos-a.xx.fbcdn.net/hphotos-ash3/168119_10150146071831729_5116892_n.jpg](https://sphotos-a.xx.fbcdn.net/hphotos-ash3/168119_10150146071831729_5116892_n.jpg)吗？我认为你可以那是因为它在 facebook cdn 上。您获得此链接并非偶然。为了进行此步骤，您需要使用访问令牌和“user_photos”权限访问用户的相册和照片（您似乎已经这样做了）。

从技术上讲，您在生产中应该没问题（除非 facebook 更改其 cdn url，这似乎不太可能）。

**编辑**
忘了提。公开用户的访问令牌不是好的做法（如 Igy 提到的）。~~黑客仍然需要您的应用程序 ID 和客户端密码才能使用访问令牌进行恶意操作，但您不想承担不必要的风险。~~阅读[这个](https://stackoverflow.com/questions/9005210/what-are-the-security-risks-in-exposing-facebook-user-access-token-in-javascript)问题了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:57:43.273

我还没有正确理解这个问题。

对于像这样的资源：`http://sphotos-d.ak.fbcdn.net/hphotos-ak-prn1/blah`它们是静态 url，不会时不时地更改，并且它们不需要访问令牌供其他人查看。您将需要一个 access_token 来获取 url。

客户端生成的令牌有效期为 60 天，或者称为延长到期访问令牌，您显然`must not`会通过公开令牌来冒用户安全的风险。

我错过了你问题的任何部分吗？

# sqlite - 导入 SQlite3 转储后激活外键

> ID：13668051
> 
> 赞同：3
> 
> 时间：2012-12-02T09:38:19.417
> 
> 标签：sqlite, foreign-keys, dump

当我将 DUMP 导入 SQlite3 数据库时，我必须在之后再次手动激活 foreign_keys。

```
PRAGMA foreign_keys = ON; 
```

创建转储时，转储如下所示：

```
PRAGMA foreign_keys = OFF;
BEGIN TRANSACTION;
[...]
COMMIT; 
```

当我手动添加激活命令时，它会被忽略：

```
PRAGMA foreign_keys = OFF;
BEGIN TRANSACTION;
[...]
COMMIT;
PRAGMA foreign_keys = ON; 
```

有没有办法在导入转储时自动重新激活 foreign_keys？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:09:06.333

`PRAGMA foreign_keys = ON;` *确实*激活了外键。但是，此设置*不*存储在数据库中。您必须为每个与数据库的新连接执行此编译指示。

# android - WebView 无法加载 oAuth url

> ID：13668056
> 
> 赞同：5
> 
> 时间：2012-12-02T09:38:49.010
> 
> 标签：android, android-webview, android-twitter

我正在尝试[Android Twitter oAuth Connect Tutorial](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)中的代码，它运行成功。我试图将 twitter 授权页面更改为在 WebView 而不是 Web 浏览器中运行，但 WebView 似乎无法使用这种格式加载 url，这`oauth://twittersample`是返回到我的应用程序的链接。成功授权后，webview 应该关闭并成功返回到我的应用程序。

出现错误提示“位于 oauth://twittersample?oauth_token=.... 的网页可能暂时关闭，或者它可能已永久移动到新网址”。我应该怎么办？

这是我的 onCreate 中的 WebView 的片段

```
WebView myWebView = (WebView)findViewById(R.id.myWebView);

    myWebView.setWebViewClient(new WebViewClient()
    {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webView, String url)
    {
     if (url != null && url.startsWith("oauth://twittersample"))
      //handleTwitterCallback(url);
     {
        System.out.println("TWEET TWEET TWEET");    
        webView.loadUrl(url);
        return true;

        }

     else

     return false;
    }
    }); 
```

这是我的 Twitter java 类[TWITTER CONNECT CLASS](http://pastie.org/pastes/5469969/text?key=ux2a0tirlcdouqdlnwag)的链接 这是我的清单

```
<activity android:name="com.test.settings.ShareSettings" android:label="ShareSettings" android:screenOrientation="portrait" android:configChanges="orientation|keyboardHidden">       
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="oauth" android:host="twittersample"/>
        </intent-filter>
    </activity> 
```

附上浏览器成功运行的logcat

![在此处输入图像描述](../Images/a4c6b047b06ff334bd7792bbbd77a9b5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T02:28:19.040

我终于让它工作了。我认为早些时候它不起作用，因为我没有将访问令牌检索到 WebView 中。

在我的 onCreate 下的 WebView 中，我这样做了

```
myWebView = (WebView)findViewById(R.id.myWebView);
    myWebView.setWebViewClient(new WebViewClient()
    {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webView, String url)
    { if (url != null && url.startsWith(TWITTER_CALLBACK_URL))

     { System.out.println("TWEET TWEET TWEET");
        retrieveAccessToken(url); //added this
        webView.setVisibility(View.GONE); //added this
        return true;            
        }

     else

     return false;

    }
    }); 
```

在我的 retrieveAccessToken(url) 我有这个。

```
private void retrieveAccessToken(final String url)
{
    Uri uri = Uri.parse(url);
    String verifier = uri.getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

    try {
        // Get the access token
        AccessToken accessToken = twitter.getOAuthAccessToken(requestToken, verifier);

        // Shared Preferences
        Editor e = mSharedPreferences.edit();

        // After getting access token, access token secret
        // store them in application preferences
        e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
        e.putString(PREF_KEY_OAUTH_SECRET,accessToken.getTokenSecret());
        // Store login status - true
        e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
        e.commit(); // save changes

        Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

        TextView twitterConnect = (TextView) findViewById(R.id.twitterConnect);
        String disconnect = "Disconnect";
        twitterConnect.setText(disconnect);                                                     

        // Getting user details from twitter
        // For now i am getting his name only
        long userID = accessToken.getUserId();
        User user = twitter.showUser(userID);
        String username = user.getName();

        txtUpdate.setVisibility(View.VISIBLE);
        btnUpdateStatus.setVisibility(View.VISIBLE);

        // Displaying in xml ui
        //twitterUser.setText(Html.fromHtml("<b>Welcome " + username + "</b>"));
        TextView twitterUser = (TextView) findViewById(R.id.twitterDesc);     
        twitterUser.setText(Html.fromHtml(username));
        Toast.makeText(getApplicationContext(), "LOGGED IN AS " + username, Toast.LENGTH_LONG).show(); 
    } catch (Exception e) {
        // Check log for login errors
        Log.e("Twitter Login Error", "> " + e.getMessage());
    }
} 
```

我让它完全按照我想要的方式工作并成功登录。如果我在这里做错了什么，请纠正我。

感谢@user1690588 和@Nikolay Elenkov，感谢您抽出时间来帮助我。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:51:54.993

`http://localhost/twittersample/oauth_callback`使用类似或类似的 HTTP url 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:18:58.627

我也遇到了这个问题，我意识到我的回调 url 与清单文件中的过滤器条目不匹配。可能你也有同样的问题。

您可以通过以下步骤解决此问题：

在您的班级中将您的回调网址设置为

```
oauth://twittersample 
```

在你的 AndroidManifest 中

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="oauth" android:host="twittersample"/>
</intent-filter> 
```

试试看..，。

确保您的回调网址

```
XXX://YYY 
```

匹配

```
<data android:scheme="XXX" android:host="YYY"/> 
```

编辑................................................. ...................................

也试试[这个](http://blog.doityourselfandroid.com/2011/08/08/improved-twitter-oauth-android/)..,。

# c# - 无法启用约束（在 SQL Server 中）

> ID：13668061
> 
> 赞同：0
> 
> 时间：2012-12-02T09:39:46.483
> 
> 标签：c#, sql, sql-server, sqlexception

我在 SQL Server 中有以下查询：

```
SELECT
   nume, SUM(cantitate) AS Expr1
FROM 
   bon_produse
WHERE
   (bonid = @p1)
GROUP BY 
   nume 
```

我从标题中得到错误，我无法弄清楚它是怎么错的......

> *无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。*

# c# - C# - 传递 3 个参数与传递具有 30 个属性的对象 -

> ID：13668064
> 
> 赞同：10
> 
> 时间：2012-12-02T09:40:05.310
> 
> 标签：c#, performance, function, memory-management, parameters

我想知道，就性能和内存使用而言，哪种方式更好？

仅传递特定函数所需的参数，还是传递具有 30 个属性的对象但函数将使用其中 3 个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T09:47:30.113

您不应该根据性能来决定这一点。性能差异非常小，可以忽略不计。（但要回答您的问题，如果对象是[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)，则传递对象会更快；如果大对象是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，则传递参数会更快。）

您应该根据**代码的含义来决定这一点。**如果该方法在逻辑上与具有 30 个属性的对象相关，那么该方法取该对象是有意义的。您可能还想考虑*将来*对该方法的任何更改是否可能需要访问更多属性。

如果方法在逻辑上与对象无关，并且您传入的三个值只是该方法的信息片段，则应将它们作为单独的参数传入。您还应该考虑*将来调用该方法的任何代码*是否可能希望传入与该特定对象的这三个属性*不同*的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T09:45:03.383

当您调用任何非内联方法时，您作为参数传递的变量实际上将被物理复制到被调用方法中的形参槽内存中。这会导致堆栈内存操作并导致性能下降。最小化参数会更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T09:46:58.303

这完全取决于您是通过值还是引用传递它。典型的参数（int、float、double、bool）都是按值传递的。意味着它们被复制。如果您传递对象，它只会将指向对象（引用）的指针“发送”到 4 或 8 个字节长的函数。

如果你有那么多参数，传递对象会更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T09:46:25.797

如果是本地操作传递对象更好，因为它仅供参考。但是如果你想通过网络传递对象，那么你的对象将被整个序列化并且会很大

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T09:49:24.580

这可能取决于许多因素...

*   例如，这 3 个属性是引用类型还是值类型 - C# 是“按值传递”语言，对于值类型，它在每次赋值或参数传递期间复制整个对象，但对于引用类型，它只复制引用，而不是整个目的。
*   性能几乎相同（同样唯一的区别是复制值/引用），除非某些属性是例如延迟评估/创建的

一般来说，最小化方法参数是“一件好事”，但可能会施加依赖关系，因此更多的是关于您的数据结构和代码。

还要记住，通常性能是最不重要的代码指标之一，因此要避免过早的优化，更多地关注代码的含义、可读性和可维护性。如果您有性能问题，我怀疑这将成为瓶颈。

# scheme - 方案说明

> ID：13668065
> 
> 赞同：0
> 
> 时间：2012-12-02T09:40:08.467
> 
> 标签：scheme

我正在阅读一本编程语言书，它要求我解释以下 Scheme 函数的作用（不确定，有人可以帮忙解释一下）：

```
(define (x lis)
  (cond ((null? lis) 0) 
        ((not (list? (car lis))) 
         (cond 
          ((eq? (car lis) #f) (x (cdr lis))) 
          (else (+ 1 (x (cdr lis)))))) 
        (else (+ (x (car lis)) (x (cdr lis)))))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T09:52:51.467

它计算嵌套列表结构的叶节点数，忽略`#f`. 它使用递归过程：

*   如果输入是一个空列表，则这是返回 0 的基本情况。
*   如果输入是一对`car`不是列表的：
    *   如果`car`是`#f`，我们在 上递归`cdr`并返回它。
    *   否则，我们将`car`视为 1，并将其添加到递归的结果中`cdr`。
*   最后，我们对`car`和进行递归`cdr`，并将它们相加。

# servicestack - ServiceStack RegistrationFeature 和本地化验证消息

> ID：13668067
> 
> 赞同：3
> 
> 时间：2012-12-02T09:40:17.747
> 
> 标签：servicestack

我正在使用`RegistrationFeature Plugin`in`ServiceStack`并试图弄清楚如何以最简单的方式制作我自己的`ValidationException`消息（覆盖默认消息）。例如，当电子邮件地址已被使用时，`Registration`插件会返回：

```
{
    "responseStatus": {
        "errorCode": "ValidationException",
        "message": "Validation failed: \r\n -- Email already exists",
        "errors": []
    }
} 
```

我想将`message`发出的 JSON 的一部分更改为更自定义的消息。有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:14:08.780

没有内置方法可以提供错误消息中使用的内置文字的本地化版本（我们将在未来版本中添加支持），但您仍然可以[自定义 ServiceStack 的错误处理](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)。

另一种选择是遵循 SocialBootstrapApi 项目中采用的相同方法，并[使用 JavaScript 中的别名覆盖服务器消息](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Content/js/app/ss-validation.js#L7)。

# ruby - 如何表示“尚未实施”？

> ID：13668068
> 
> 赞同：63
> 
> 时间：2012-12-02T09:40:17.720
> 
> 标签：ruby, exception-handling, coding-style, conventions

在新 gem 的初始起草中，我需要将一些方法实现留空（将在下一个实现）

因此，我想发出“尚未实施”的异常信号

我想知道是否有特定于 Ruby 语言的*最佳实践*或*标准约定*来编码这种占位符/异常。

即：类似于：

*   Java 中的[UnsupportedOperationException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/UnsupportedOperationException.html)
*   .Net Framework (C#) 中的[NotImplementedException](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-05-18T08:18:58.260

你应该提出 NotImplementedError

```
raise NotImplementedError 
```

[红宝石文档](http://ruby-doc.org/core-2.3.0/NotImplementedError.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T09:59:53.243

您可以使用[todonotes-gem](https://rubygems.org/gems/todonotes)

有一个包含一些示例的[文档。](http://gems.rubypla.net/todonotes/0.1.1/)

它没有实现异常，而是一种日志记录机制和临时解决方案的可能性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-24T18:16:18.573

看起来像建议 raise 的原始答案`NotImplementedError`已被删除。我会尝试一下：编写文档。

不要添加只是占位符的代码。您不希望人们针对该 API 进行编码，因此甚至不给他们机会（包括您自己）。相反，在课堂和/或自述文件中记录您当前计划的路线图。然后对它的改变持开放态度。很可能当您开始解决路线图中的任何问题时，您将对什么是适当的解决方案产生新的想法。我认为这在任何语言/框架中都是正确的做法，但我认为 Ruby 特别鼓励我们不要编写您不打算执行的代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T09:44:28.847

不要在文档中提及未实现的方法，或者提及它们尚未实现。就这些。

* * *

## 回答 #5

> 赞同：-19
> 
> 时间：2012-12-02T11:09:39.347

`NoMethodError`无论如何，当调用一个不存在的方法时，Ruby 会为你提出一个。对于大多数情况来说，这应该足够好了。

# java - 安装了 Java 7，但终端仍然是 Java 6

> ID：13668069
> 
> 赞同：3
> 
> 时间：2012-12-02T09:40:40.433
> 
> 标签：java, macos, osx-lion

我已经在我的 Mac (10.7.5) 上安装了 Java 7，但在终端中仍然有 Java 6。

> java 版本“1.6.0_37”Java(TM) SE 运行时环境（构建 1.6.0_37-b06-434-11M3909）Java HotSpot(TM) 64 位服务器 VM（构建 20.12-b01-434，混合模式）

如果我在尝试安装 java 应用程序（[LatexDraw](http://latexdraw.sourceforge.net/download.html)）时总是遇到错误，那么终端上的版本 6 将没有问题：

> : CGContextGetCTM: 无效的上下文 0x0
> 
> : CGContextSetBaseCTM: 无效上下文 0x0
> 
> : CGContextGetCTM: 无效的上下文 0x0
> 
> : CGContextSetBaseCTM: 无效上下文 0x0

该问题与从此[链接推断的 java 6 的不稳定性有关](https://discussions.apple.com/message/18394472#18394472)

我已阅读此[installed-java-7-on-mac-osx-but-terminal-is-still-using-version-6](https://stackoverflow.com/questions/12757558/installed-java-7-on-mac-osx-but-terminal-is-still-using-version-6)并尝试通过 using 更改我的 Java 版本`export JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home"`，但在我的文件夹`/System/Library/Frameworks/JavaVM.framework/Versions`中，没有版本1.7，只有1.6以下的版本？？？那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:31:21.733

你可以这样解决：

*   以这种方式获取已安装 Java 7 JRE 的路径：

    /usr/libexec/java_home -v 1.7

*   将上一个命令的输出设置为`JAVA_HOME`变量（例如在我的情况下）：

    导出 JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home

看看[这篇文章](http://blog.hgomez.net/blog/2012/07/20/understanding-java-from-command-line-on-osx/)以获取更多信息......

# c++ - 返回 *this，尝试级联，而不返回引用

> ID：13668071
> 
> 赞同：2
> 
> 时间：2012-12-02T09:40:54.330
> 
> 标签：c++

我有一个类似于这里提出的问题的问题：[“这个”级联如何工作？](https://stackoverflow.com/questions/7249903/how-does-this-cascading-work)

假设我有以下代码：

```
#include <iostream>
using namespace std;

class Time
  {
  public:
     Time( int = 0, int = 0, int = 0 );
     Time setHour( int );
     Time setMinute( int );
     void print( void );

  private:
     int hour;
     int minute;
  };

  Time::Time(int hr, int mn, int sc)
  {
     hour = hr;
     minute = mn;
  }

  void Time::print( void )
  {
     cout << "hour = " << hour << endl;
     cout << "minute = " << minute << endl;
  }

  Time Time::setHour( int h )
  {
     hour = ( h >= 0 && h < 24 ) ? h : 0;
     return *this;
  }

  Time Time::setMinute( int m )
  {
     minute = ( m >= 0 && m < 60 ) ? m : 0;
     return *this;
  }

int main()
{
   cout << "Hello, world!" << endl;
   Time t;
   t.setHour( 10 ).setMinute( 25 );
   t.print();
} 
```

然后，很明显函数 setMinute(25) 没有在时间对象 t 上运行。请注意，函数 setHour 和 setMinute 不返回对 Time 对象的引用。

t.setHour(10) 执行后发生了什么？函数 setHour 是否以某种方式返回对象 t 的“副本”，并且 setMinute(25) 正在副本上运行？我已经用 -Wall 编译了程序，没有返回任何错误或警告。

感谢你的协助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T09:43:25.020

你的分析似乎是正确的。这个表达

```
t.setHour( 10 ) 
```

返回一个临时`Time`对象。然后你调用`setMinute(25)`那个临时的。这反过来又返回另一个临时`Time`对象，它没有分配给任何东西。所以`setHour()`作用于`t`实例，但`setMinute()`作用于一个临时的，它在这一行的末尾消失

```
t.setHour( 10 ).setMinute( 25 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:48:22.280

t 的每个方法都返回对 t 的引用。引用是别名。所以如果你这样做了

```
Time t;
 Time& tAgain = t;
 tAgain.setMinute( 25); 
tAgain.setMinute also alters t's time. 
```

现在将这个简单的例子外推到级联。t 的每个方法都返回对自身的引用

```
Time &Time::setSecond( int s ) 
  {
      second = ( s >= 0 && s < 60 ) ? s : 0; 
      return *this; 
  } 
```

所以在表达式中：

```
 t.setHour( 10 ).setMinute( 25 ) 
```

`t.setHour( 10 )`在 t 上调用 setHour，然后返回对 t 的引用。在这种情况下，引用是临时的。因此，您可以将其视为在评估 setHour 时上述行更改为以下内容：

```
tAgain.setMinute(25); 
```

`t.setHour`返回一个参考——类似于我们上面的 tAgain。只是 t 本身的别名。

# mysql - MySQL 中阿拉伯语的使用

> ID：13668072
> 
> 赞同：0
> 
> 时间：2012-12-02T09:41:05.973
> 
> 标签：mysql, arabic

我已经成功地制作了一个保存阿拉伯值的数据库表。但是当我运行这个查询时（您的浏览器可能无法正确显示阿拉伯文本）：

`SELECT * FROM ar_table WHERE title LIKE '%روشنی%'`

这失败了，我收到错误：

`#1267 - Illegal mix of collations (latin1_general_ci,IMPLICIT) and (utf8_unicode_ci,COERCIBLE) for operation 'like'`

应该优化什么，以便我可以进行此类查询。我需要这个用于搜索阿拉伯字体的搜索表单。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:24:26.320

你是对的soulseekah。我将标题列的排序规则转换为 latin1_general_ci 的 utf8_unicode_ci。它工作完美。谢谢

# database - iCloud + CoreData + 不同账户

> ID：13668073
> 
> 赞同：0
> 
> 时间：2012-12-02T09:41:06.940
> 
> 标签：database, core-data, icloud, remote-access

我正在构建一个应用程序，我希望 Coredatabase 可以通过多种设备使用。

*   同一个 iCloud 帐户可以关联的设备数量是否有限制
*   是否可以从不同的 iCloud 帐户登录，但使用一个 iCloud 数据库，只需在应用程序内登录或其他方式？也许还有另一项服务可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:45:13.227

第一个问题：
据我所知，同一 iCloud 帐户的设备没有限制。但是，未付费 iCloud 帐户的存储容量是有限制的。

第二个问题：
您可以让您的应用程序检测 iCloud 帐户的更改，然后根据需要复制或更新设备。但是，问题是来自 iCloud 帐户 A 的更新不会自动传播到 iCloud 帐户 B。

另一种解决方案是使用 Dropbox API。Dropbox 提供最大 1 GB 的免费帐户。问题是您无法通过 iCloud 来利用核心数据的增量更新。这意味着，每次更改都会导致整个数据库被覆盖，这几乎不是一个可行的设置。

最后一个可能也是唯一可行的想法是设置自己的服务器，将数据库内容镜像到另一个数据库中，并创建 API 以通过 JSON 或其他方案进行增量同步。最后一个解决方案是我们为带有应用程序的中央数据库所做的。8.000 个 iOS 客户端。

# iphone - iAd 广告展示频率

> ID：13668079
> 
> 赞同：0
> 
> 时间：2012-12-02T09:41:45.170
> 
> 标签：iphone, objective-c, xcode, iad, ads

我今天在一个计划在接下来的几个小时内发布的应用程序中试验了 iAd。我认为它应该可以正常工作，但是我已经玩了我的应用程序超过 20 分钟，并且没有显示任何测试广告。负责显示广告的方法已被中断，因此我知道广告何时尝试触发。苹果是否控制广告何时显示？是广告随机展示的频率；还是应用程序只显示广告多次然后停止显示？我找不到任何描述广告何时在应用中显示的文档。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:53:58.117

确保您已导入 iAdFramework 并且在您的 .h 文件中不要忘记导入 iAd/iAd.h 它还有一个委托方法 ADBannerViewDelegate

在您的 .h 文件中执行此 ADBannerView *bannerView;

// 在你的 .m 文件中

```
-(void)AddBanner

 {

    bannerView = [[ADBannerView alloc]
              initWithFrame:CGRectMake(0, 0, 320, 50)];
bannerView.requiredContentSizeIdentifiers =
[NSSet setWithObjects:
 ADBannerContentSizeIdentifierPortrait,
 ADBannerContentSizeIdentifierLandscape, nil];
bannerView.delegate = self;

  }

  - (void)bannerViewDidLoadAd:(ADBannerView *)banner
   {
   NSLog(@"banner didload");
   [self.view addSubview:bannerView];

    }

 - (BOOL)bannerViewActionShouldBegin: (ADBannerView *)banner willLeaveApplication:(BOOL)willLeave

   {
    return YES;
    }

   - (void)bannerViewActionDidFinish:(ADBannerView *)banner

   {

     NSLog(@"bannerViewActionDidFinish");

    }

  - (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error

   {

     NSLog(@"bannerView Error occureed");

    }

in your

  -(void)viewDidLoad

  {

 [self AddBanner];

   } 
```

希望对你有帮助。

# django - 记录价值历史的适当模型结构

> ID：13668083
> 
> 赞同：1
> 
> 时间：2012-12-02T09:42:17.743
> 
> 标签：django

我无法弄清楚这个问题的适当模型结构应该是什么（简化版本以使解释更容易）

目标是：

*   具有必填字段的 Person 模型
*   添加人员时，您可以选择输入体重和身高的初始值（每个输入一项，默认为 0）
*   当身高和/或体重的值更新时，之前的值会存储在某个位置，以便查看历史记录

我知道我可以有一个单独的身高和体重模型，通过 ForeignKey 将它们链接到 Person ，但是由于一次允许多个条目，它使管理演示变得混乱和脱节。

或者，我可以将身高和体重作为 Person 中的字段（有干净的 list_view 并将这些字段包含在字段集中的好处），并且当有任何更新时将先前的值存储到不同的模型中？然后可以列出该模型以显示某些人的价值观历史。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:06:39.307

使用 ForeignKeys 到身高和体重模型，然后添加一个属性来访问该字段

```
class Person(model)
    name = CharField()

    @property
    def weight(self):
        return self.weighthistory.latest().value

class Weight(model):
    value = IntegerField()
    date = DateTimeField()
    person = ForeignKey(Person, related_name="weighthistory")

class Height(model)
    value = IntegerField()
    date = DateTimeField()
    person = ForeignKey(Person) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:13:07.623

[django-reversion](https://github.com/etianen/django-reversion/)提供了这个功能。在`save()`您的每个模型中，都会保存更改值的历史记录，除了列出所有更改之外，您还可以回滚到任何以前的版本。

它不需要更改您的模型，甚至还带有与自定义管理类的管理集成。

[低级 API](https://github.com/etianen/django-reversion/wiki/Low-level-API)提供更多功能。

# bash - 如何在进程死亡后重新启动进程

> ID：13668086
> 
> 赞同：0
> 
> 时间：2012-12-02T09:42:57.930
> 
> 标签：bash, process

我正在写一些像这样的监控例程：

```
 tail -f /var/log/router-home.log | while read line ; do
   echo "$line" | egrep "MTF_SIP" | cut -b 28- | sed -u 's/#012/\n/g' \
   | egrep "IPP-->Received Event|rvCCConnMdmNewDigitCB|rvCCCallHandleOutOfBandDTMF" \
   | cut -d " " -f 15
 done > /tmp/phone/status & 
```

但是每次 logrotation 出现时，它都会改变`/var/log/router-home.log`杀死在这个例程上有多个进程的进程，我不能仅仅通过执行一个来检查它的状态`ps -e|grep tail`

我如何监控这个例程并在它死时重新启动它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T09:53:30.937

如果你想跟随文件*名*而不是描述符（这样你得到最新的文件，即使像`logrotate`在你下面移动它），你可以使用`tail -F`它基本上是：

```
tail --follow=name --retry 
```

我通常做的是运行：

```
tail -F somefile 2>/dev/null 
```

所以当文件更改时我看不到错误消息。您可以通过确保`somefile`不存在然后运行该命令来尝试此操作。然后，从另一个会话：

```
echo pax is a >somefile
rm somefile
echo wonderful person >somefile 
```

你会看到这两行都出现在`tail`输出中。

使用该解决方案，该进程*不应*终止，因此无需重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:01:42.133

我建议你把你的脚本变成系统守护进程（例如，[这里](https://serverfault.com/questions/135859/is-there-a-standard-way-to-make-daemon-in-debian)有一个提示如何在 Debian 下做到这一点），你也可以很好地记录和控制你的进程。

您也可以简单地[捕获](http://www.linuxjournal.com/content/use-bash-trap-statement-cleanup-temporary-files)所需的信号（可能是 SIGHUP？），而不是退出，重新打开日志文件（重新启动您的进程）。

```
trap ". /path/to/my-script.sh" SIGHUP 
```

`/path/to/my-script.sh`给定代码的文件在哪里。

# c++ - C++ 中的错误处理、构造函数与常规方法

> ID：13668091
> 
> 赞同：5
> 
> 时间：2012-12-02T09:43:37.643
> 
> 标签：c++

我有一个`cheesesales.txt`包含最近所有奶酪销售的 CSV 文件。我想创建一个`CheeseSales`可以执行以下操作的类：

```
CheeseSales sales("cheesesales.txt"); //has no default constructor
cout << sales.totalSales() << endl;
sales.outputPieChart("piechart.pdf"); 
```

上面的代码假定不会发生任何故障。实际上，失败会发生。在这种情况下，可能会发生两种故障：

*   **构造函数**失败：文件可能不存在，可能没有读取权限，包含无效/不可解析的数据等。
*   **常规方法**失败：文件可能已经存在，可能没有写入权限，可用于创建饼图的销售数据太少等。

我的问题很简单：您将如何设计此代码来处理故障？

一个想法：`bool`从表示失败的常规方法返回 a 。不知道如何处理构造函数。

经验丰富的 C++ 程序员会如何做这些事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:59:50.840

在 C++ 中，异常是报告错误的方式。可以处理初始化列表中的 BTW 异常。

> 函数尝试块将处理程序 seq 与 ctor-initializer（如果存在）和函数体相关联。在执行 ctor-initializer 中的初始化程序表达式期间或在执行函数体期间引发的异常将控制权转移到 function-try-block 中的处理程序，其方式与在执行 try 期间引发的异常相同-block 将控制权转移给其他处理程序。

好的代码通常应该在最上层（线程）级别上使用最少的 try/catch 块。理想情况下只有一个。这样，知道“一切都会抛出”，您不必过多考虑错误，并且您的正常场景代码流看起来很干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:55:28.807

你对这两种失败的区分是对的，它们确实有细微的不同。

* * *

> **构造函数**失败：文件可能不存在，可能没有读取权限，包含无效/不可解析的数据等。

只是**抛出**一个异常。半构建对象是解决程序错误的最短方法。

一个类应该有一个构造函数**建立**并且所有方法都**维护的****不变量**。如果构造函数无法建立不变量，则对象不可用，在 C++ 中报告这一点的最佳方法是抛出异常，以便语言确保不使用半构建的对象。

 ****如果人们建议您可能想要一个*无效状态*，请提醒他们**单一职责原则**：您的类已经具有特定的职责（它的不变量），希望更多的人可以将其*封装*在一个专门提供*可选*性的类中。离开我的头，`boost::optional`都是`std::unique_ptr`很好的选择。

* * *

> 常规方法失败：文件可能已经存在，可能没有写入权限，可用于创建饼图的销售数据太少等。

不幸的是，您未能区分两种情况：

*   只*读取*实例的方法
*   也修改实例的方法

对于所有方法，您需要选择错误报告策略。我的建议是*例外*是*例外*的。如果故障被认为是异常的（网络链接在 99.99% 的时间都在运行时断开），那么异常就可以了。另一方面，如果预计会失败，通常取决于输入（例如`find`方法或在您的情况下`write`是指定文件的方法），那么您希望让用户有机会做出适当的反应。

在排除了例外之后，至少还有两种方法：

*   返回一个代码 ( `bool`, `enum`) 指示操作是否顺利
*   要求用户提供将在出现问题时调用的*错误策略*

错误策略可能像`enum`（跳过、重试、抛出）一样简单，也可能像`Strategy`各种方法一样复杂。

此外，没有人说您的方法可能只有*一种*错误报告机制。例如，您可以选择：

*   如果文件已经存在，则调用错误策略（毕竟是用户提供的，他们可能想要切换到不同的名称）
*   如果无法访问磁盘，则抛出（通常预计硬件可以工作！）

* * *

最后，除此之外，也修改实例的方法必须担心**维护**构造函数建立的不变量。如果一个方法可能会搞砸不变量，那么它根本就不是不变量，每次使用该类时，您的用户都应该感到恐惧……一般的智慧是在开始修改对象*之前执行所有可能抛出的操作。*

一个简单（但非常容易）的实现是**复制和交换**习惯用法：在内部复制对象，对副本执行操作，并在方法结束时将副本的状态与当前对象的状态交换。如果出现任何问题，副本将被损坏并在堆栈展开期间立即丢弃，而对象不受影响。

有关此主题的更多信息，您可能需要阅读**Exceptions Guarantees**。我描述的是**强异常保证**方法的典型实现，类似于数据库事务（全有或全无）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T10:29:12.860

好吧，抛出异常是显而易见的选择。这在 C++ 中存在一些问题，因为无法捕获初始化器列表构造函数抛出的异常，从而导致各种麻烦。

因此，您实际上应该提供访问文件并可能引发异常的构造函数，以及使对象处于“数据未加载状态”的默认构造函数。这允许将您的对象安全地用作其他类的成员，同时还允许另一个构造函数加载（或抛出异常）数据。

另一种选择是让数据加载构造函数不抛出异常，而是在加载失败时将对象设置为无效状态，并让其他方法抛出异常，并为当前状态设置 getter。

无论如何，我相信你的班级需要错误/未初始化状态，没有安全的方法。

由@MathieuM. 的评论编辑：在外部实现“未初始化状态”的一种替代方法是使其成为可选，最容易通过使用指针包装类。然后在初始化列表中将其安全地初始化为 NULL，并在构造函数主体中尝试真正的初始化，并进行任何错误处理。通过选择这个，你可以让构造函数抛出异常，让类的用户担心它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T10:00:45.087

构造函数用于初始化对象的内部状态。不要使用它来进行繁重的操作，例如读取和处理文件。

如果发生错误，请改用读取文件并抛出异常（或返回布尔值表示成功）的方法。在您的主要流程中捕获此异常并按照您认为合适的方式处理它。

**编辑**：如果这是整个类的目的，那么可能`ChessSales`只包含数据，您应该使用**工厂类**（或者**静态实用程序类**），该类具有读取 CSV 文件并返回`ChessSales`包含从读取的相关数据的方法的方法CSV 文件。这样您就可以将数据与业务逻辑分开（在这种情况下读取和解析 CSV 文件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T10:54:10.803

当你问这个问题时，你错过了一个重要的细节：当操作失败时你想发生什么？

在构造函数的情况下，我肯定会抛出异常。我希望能够像您上面写的那样编写代码；我不希望它看起来像

```
CheeseSales sales("cheesesales.txt"); //has no default constructor
if (!sales.good()) {
    // Somehow handle things here.
}
// The if block has to break control flow or reinitialise sales, otherwise
// these next lines will break.
cout << sales.totalSales() << endl;
sales.outputPieChart("piechart.pdf"); 
```

投掷意味着在这种情况下我可以假设更强的不变量，因此是一件好事。

鉴于输出操作不会改变 的状态`CheeseSales`，扔在那里不会加强不变量。在这种情况下，使用辅助对象来打印图表可能会更好：

```
ChooseSales sales("cheesesales.txt");
PdfStream chart("piechart.pdf");
chart << sales.asPieChart(); 
```

（`PdfStream`可能只是`std::ofstream`，但也许您想提供更多功能。）

如果操作失败，它可以将`chart`对象置于错误状态，这与 iostreams 通常的工作方式相对应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T10:47:58.323

我认为您可以在构造对象之前从输入文件中获取信息。例如，代码可能是这样的：

```
if(!getInfoFromFile("cheesesales.txt", date, amount, kindOfCheese, money)){
    cout << "Failed to get information from file." << endl;
    return FALSE;
}
CheeseSales sales(date, amount, kindOfCheese, money);
cout << sales.totalSales() << endl;
sales.outputPieChart("piechart.pdf"); 
```

然后你可以避免在构造函数中处理错误。
当然，抛出异常也是一种解决方案。但我不喜欢它，因为 c++ 中的异常非常复杂。你可能会遇到很多难以想象的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T10:19:37.837

这就是我处理错误的方式：我在日志文件中记录所有错误，并创建一个简单易用的函数来报告错误。如果程序运行不好，我打开日志文件查找原因。

关于如何在错误发生时了解错误：将异常引入 C++ 的原因之一是在构造函数中报告错误。由于构造函数不返回值，因此它们可以通过这种方式抛出异常并报告失败。就个人而言，我不太喜欢这个方案，因为它会让你把你的代码放在`try..catch`. 如果您忘记这样做，您可能想知道为什么您的程序崩溃了。

所以我通常会这样做：

1）让构造函数设置一个成员变量为成功/失败，取决于构造函数的成功操作。我以后可以用类似的东西检查它`if (myobj.constructor_ok()...)`。请注意，我没有直接访问成员变量。

2）我非常喜欢从方法返回真/假，尽可能表示成功/失败。这使代码非常易读。

3) ..和上面的日志文件。****

# python - Python 和 PyDev 未使用的导入 - 可以在包级别禁用吗？

> ID：13668095
> 
> 赞同：2
> 
> 时间：2012-12-02T09:44:07.770
> 
> 标签：python, eclipse, pydev

我有一个使用南迁移的项目。通常，迁移 .py 文件有未使用的导入。这会在 PyDev/Eclipse 中生成警告。我希望总体上打开警告，因为它们促进了代码纪律。但是，我希望我可以在 Eclipse 中的包上或通过某些指令将它们关闭。

我知道#@UnusedImport 注释标签。是否有可能做类似的事情，但在包级别？也许可以使用**init .py ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:22:22.520

放在`# @PydevCodeAnalysisIgnore`模块的顶部将导致 PyDev 跳过对给定文件的所有代码分析。虽然不完全在包装级别，但这已经足够了。

# jquery - div 上的 jQuery click() 触发父母 click() 事件

> ID：13668096
> 
> 赞同：0
> 
> 时间：2012-12-02T09:44:09.987
> 
> 标签：jquery, onclick

```
 <div class="parent">
        <div class="child">
        </div>
    </div>
    <script type="text/javascript">
    $(document).on("click", ".parent", function(event){
        doAjaxCall();
    });

    $(document).on("click", ".child", function(event){
        doSomething(); // and DON'T call doAjaxCall();
    });
</script> 
```

`event.stopPropagation();`而且`return false;`也不工作。可能是什么问题呢？

编辑：好的，很明显它正在使用 js fiddle：http: [//jsfiddle.net/Smbb4/](http://jsfiddle.net/Smbb4/) 我必须再次检查我的代码..

编辑2：**解决方案：**

```
 $('.parent').click(function(event) {

        if ( $(event.target).closest('.child').length > 0 ) {
            var close = $(event.target).closest('.child');
            var windowID = close.data('windowid');

            closeWindow(windowID);
            return false;
        }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:20:49.817

对于父级，您只需要一个单击处理程序。以常规方式处理事件，除非最初的目标在孩子内部，在这种情况下你分支并做一些不同的事情。

```
$(document).on("click", ".parent", function(event){

    if ( $(event.target).closest('.child').length > 0 ) {
        doSomething;
        return false;
    }

    doAjaxCall();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:57:26.170

试试这个方法

```
$(".parent").click(function() {

});

$(".child").click(function() {

}); 
```

它应该可以正常工作。不必将它们放在 document.ready 函数中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T10:15:38.607

发现问题：

> 由于您在 body 元素上使用 on 而不是直接在 img.theater 上使用，因此事件将冒泡到 body 元素，这就是它的工作原理。
> 
> 在事件冒泡的过程中 .theater-wrapper 元素单击事件将被触发，因此您可以看到它。

[jQuery on() stopPropagation 不起作用？](https://stackoverflow.com/questions/8995008/jquery-on-stoppropagation-not-working)

解决方案：

```
$('.parentParent').on("click", ".child", function(event){}); 
```

# node.js - 如何用另一个文件夹替换 NPM node_module 文件夹？

> ID：13668097
> 
> 赞同：10
> 
> 时间：2012-12-02T09:44:12.630
> 
> 标签：node.js, npm

默认情况下，NPM 是在“node_modules”下安装模块。有没有办法将其更改为例如“my_modules？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T09:51:42.450

所有节点模块的标准是使用`node_modules`目录。

不要试图违背这个统一的标准。

您想通过自定义目录来完成什么？

* * *

笔记：

以下命令将安装一个模块到`my_project/node_modules/some_module`

```
[~/my_project] $ npm install some_module 
```

如果您想安装模块并使它们在您的系统上全局可用，您可以使用`--global`( `-g`) 标志

```
[~/my_project] $ npm install -g some_module 
```

`-g`使用标志安装的软件包被安装到`~/.npm`

* * *

## 编辑

根据您的评论，您可以尝试安装任何包含`package.json`文件的目录

```
[~/my_project] $ npm install /path/to/my/pkg 
```

或者，您可以安装符号链接，而不是将整个模块复制到您的`~/my_project/node_modules`目录。

```
[~/my_project] $ npm link /path/to/my/pkg 
```

有关此的更多信息：

```
$ npm help install
$ npm help link 
```

# ruby - `input_data': nil:NilClass (NoMethodError) 的未定义方法 `chomp'

> ID：13668101
> 
> 赞同：3
> 
> 时间：2012-12-02T09:44:48.997
> 
> 标签：ruby

大家好，我有以下问题：

**输入**：
2
ababaa
aa

**输出**：
11
3

**解释：**
对于第一种情况，字符串的后缀是“ababaa”、“babaa”、“abaa”、“baa”、“aa”和“a”。这些字符串中的每一个与字符串“ababaa”的相似度分别为 6,0,3,0,1,1。因此答案是 6 + 0 + 3 + 0 + 1 + 1 = 11。

对于第二种情况，答案是 2 + 1 = 3。

这部分有效，但我的代码应该通过的一些测试没有。

这是我的代码

```
def input_data
#STDIN.flush
tries = gets.chomp
end

strings=[];
tries = input_data until (tries =~ /^[1-9]$/)
tries = tries.to_i
strings << input_data until (strings.count == tries)

strings.map do |x|
values = 0
current = x.chars.to_a
(0..x.length-1).map do |possition| 
    current_suffix = x[possition..-1].chars.to_a
    (0..current_suffix.length-1).map do |number|
        if (current_suffix[0] != current[0])
            break
        end

        if ( current_suffix[number] == current[number] )
            values = values+1
        end
    end 
  end

  if (values != 0)
    puts values
  end
end 
```

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T09:59:45.803

`gets`return `nil`，不能`chomp`编辑。因此，您需要确保在调用`chomp`. ruby 中的一个常见习惯用法是`||=`仅当变量为 nil 时才使用运算符设置变量。所以你会写：

```
tries = gets        # get input
tries ||= ''        # set to empty string if nil
tries.chomp!        # remove trailing newline 
```

# c++ - 带有模板类的赋值运算符 - 没有可接受的转换，C++

> ID：13668103
> 
> 赞同：0
> 
> 时间：2012-12-02T09:44:50.907
> 
> 标签：c++, templates, assignment-operator

我构建了一个模板类，它应该代表一个线程本地指针。

```
template <class T>
class ThreadLocalPointer {
    public:
        T& operator*() {
            return *_map[std::this_thread::get_id()];
        }

        T* operator->() {
            return _map[std::this_thread::get_id()];
        }
        ThreadLocalPointer<T>& operator=(const T* right) {
            _map[std::this_thread::get_id()] = right;
            return *this;
        }

        T* get() {
            return _map[std::this_thread::get_id()];
        }
    private:
        std::unordered_map<std::thread::id, T*> _map;  
}; 
```

类的实例：

```
ThreadLocalPointer<PacketClientHeader*> _incomingBuffer; 
```

最后，我想在哪里使用我的赋值运算符

```
_incomingBuffer = (PacketClientHeader*)malloc(MAX_DATAGRAM_SIZE); 
```

代码不会编译：

```
 no operator found which takes a right-hand operand of type 'PacketClientHeader *' (or there is no acceptable conversion) 
```

我不确定我做错了什么！

编辑：包括完整的模板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:02:25.733

问题可能出在这里：

```
ThreadLocalPointer<PacketClientHeader*> _incomingBuffer; 
```

模板参数`T`是`PacketClientHeader*`, 在这里：

```
ThreadLocalPointer<T>& operator=(const T* right) { .... } 
```

您的运营商正在采取`const T*`，这将解决`const PacketClientHeader**`。然后，您尝试从`PacketClientHeader*`此处分配：

```
_incomingBuffer = (PacketClientHeader*)malloc(MAX_DATAGRAM_SIZE); 
```

并且没有找到合适的运营商。在不了解课程的更多细节的情况下，很难提出解决方案，但它可以像使用一样简单

```
 ThreadLocalPointer<PacketClientHeader> _incomingBuffer; 
```

或将赋值运算符声明为

```
ThreadLocalPointer& operator=(const T& right) { .... } 
```

# pdf - 从一个 PDF 中提取到 Unicode 映射并在另一个 PDF 中使用

> ID：13668105
> 
> 赞同：2
> 
> 时间：2012-12-02T09:45:00.843
> 
> 标签：pdf, unicode

我有一个 Unicode PDF 文档，其中缺少 toUnicode 映射。我有一个具有相同字体的不同 PDF，它具有 toUnicode 映射。我可以从一个 PDF 中提取它并使用它从另一个 PDF 中提取文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-30T14:54:29.757

对于 Unicode 映射 Adob​​e 有特殊资源 /ToUnicode 你可以在字体资源描述里面的 pdf 文件中找到它。看起来像

```
<</BaseFont /ONWALI+Sylfaen/DescendantFonts [10 0 R]/Encoding /Identity-H/Subtype /Type0/ToUnicode 11 0 R/Type /Font>> 
```

并且`/ToUnicode 11 0 R`是您需要在pdf文件中拥有的。`11 0`是资源 ID

我在 Acrobat Pro 中创建了包含所有字母符号的示例 pdf，以便使用报告中使用的相同字体进行标准 ToUnicode 映射。我已将资源提取为文本，它看起来像：

```
/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo
<< /Registry (Adobe)
/Ordering (UCS) /Supplement 0 >> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000> <FFFF>
endcodespacerange
50 beginbfchar
<0003> <0020>
...and so on...
endbfchar
endcmap CMapName currentdict /CMap defineresource pop end end 
```

ToUnicode 资源通常是压缩的，所以你必须解压缩它才能得到上面的文本。

然后我编写了获取 pdf 的代码（来自 Misrosoft Reporting 中生成的报告）并为找到的每种字体添加 /ToUnicode 资源。Pdf 有带有指针的外部参照表，您不能将其编辑为文本文件。所以你必须使用一些 pdf 引擎（我用过 PDFTron 但 itext 应该足够了）。每次我需要将报告另存为 pdf 时，都会执行此后处理代码。实际上 ToUnicode 映射应该由 Microsoft Reporting 引擎填充，但它好得令人难以置信。

而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T10:21:10.907

一般的答案是否定的。您所说的 ToUnicode 映射遵循 PDF CMap 格式，用于将字符代码转换为 Unicode 值。您面临两个潜在的陷阱：

1）字体不完全相同。虽然它们的名称可能相同，但它们可能具有不同的编码，或者可能包含不同的字形（即使对于相同的编码）。在这种情况下，从不同的字体应用 CMap 会给你不正确的 unicode 值。

2）字体可能在所有方面都相同，但可能在 PDF 文件中被子集（可能）并且子集可能不同。在某些情况下，这不会改变字体在 PDF 文件中的存储方式，但有优化的 PDF 编写器会将它们可以压缩的任何内容压缩为子集字体，这可能会导致使用不同的字符代码并最终不同ToUnicode 地图。

# r - “空间”数据的平滑

> ID：13668110
> 
> 赞同：3
> 
> 时间：2012-12-02T09:45:40.597
> 
> 标签：r, spatial, smoothing

我有 2 个变量`x`，`y`它们是 [0,1] 处的笛卡尔坐标，并且`z`是这些坐标处的（连续）变量的值。该`z`向量有一些重要的异常值

```
x<-sample(seq(0,1,0.001), replace=F)
y<-sample(seq(0,1,0.001), replace=F)
z<-runif(1001,min=0,max=1)
z[100]<-8;z[400]<-16;z[800]<-4 
```

这些异常值我想在以`filled.contour`

我一直用到现在

```
library(akima)
a<-interp(x,y,z)
filled.contour(a$x,a$y,a$z) 
```

但我对这种线性插值不满意。例如（异常值未正确显示）。

我在想我需要的是 z 的某种最近邻“空间”平滑（基于 x，y 位置）。任何人都可以帮助或查明可以帮助我的数据/示例/包/代码吗？我更喜欢基本的 R 解决方案，但如果 ggplot2 或 lattice 可以完成我的工作，那就没问题了。任何其他更好的可视化的想法/建议也将受到欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T12:08:12.203

[在此处](https://stackoverflow.com/questions/10047870/plotting-interpolated-data-on-map)查看@Paul Heimstra 的答案。[他们建议从fields](http://cran.r-project.org/web/packages/fields/fields.pdf)包中进行薄板样条插值。如果克里金法适合您，则包[automap](http://cran.r-project.org/web/packages/automap/automap.pdf)可能很有用。

如果您关心地理值的插值，值得一提的是[DG Rossiter 的地统计学和开源统计计算在线/免费课程](http://www.css.cornell.edu/faculty/dgr2/teach/degeostats.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-24T10:24:34.873

字段包中的薄板样条或 Tps() 函数是您的票。然后必须将模型结果放入同一包中的 predictSurface() 函数中，以生成平滑的空间数据。只需几行代码即可：

```
test.spline <- Tps(data.frame(x,y), z)
new.grid <- predictSurface(test.spline, nx = 200, ny = 200)
image(new.grid) 
```

数据的性质将定义网格的合适程度。您可以使用 predictSurface() 中的 nx 和 ny 参数来控制它。在此示例中，增加的网格分辨率没有影响。对于真实的空间数据，使用高分辨率表面进行平滑处理可能会非常引人注目。查看功能帮助以获取更多详细信息。

# c# - 连接多个 Int 以形成更大的 Int

> ID：13668114
> 
> 赞同：4
> 
> 时间：2012-12-02T09:46:05.313
> 
> 标签：c#, arrays, int, concatenation

我还有一个深夜脑死问题。做起来可能很简单，但你知道在 8 小时以上的编程之后，然后到达最后期限结束时的情况。:)

这是我的问题..

我有一个长度为 10 的布尔数组，它在逻辑上被分成单独的部分来保存 4 个不同的整数位数组（作为布尔值）。这是目标数组：

```
bool[] myArray = new bool[10]; 
```

这是我想插入的 4 个整数：

```
int value1 = 3;  // 2 bits, myArray[0-1], 11
int value2 = 12; // 4 bits, myArray[2-5], 1100
int value3 = 2;  // 2 bits, myArray[6-7], 10
int value4 = 1;  // 2 bits, myArray[8-9], 01 
```

*myArray*最终应该如下所示（注意第一个元素是位置 0）：

```
{(T,T),(T,T,F,F),(T,F),(F,T)} 
```

然后最终我想要做的是将*myArray*转换为 int 值：

```
0x1111001001 = 969 
```

也许有更好的方法来做到这一点而不必使用布尔值？因此，让我从更一般的意义上重新表述我的问题：

如何将 N 个 int 值*连接*到*目标*int 中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:54:37.083

通常，将多个数字中的位组合为一个的常用方法是这样的（使用您的值和位长度作为示例）：

```
var result = value1 | (value2 << 2) | (value3 << 6) | (value4 << 8); 
```

但是，您在问题末尾打印的数字的数字是从前到后的。如果这就是你想要的，那就是：

```
var result = value4 | (value3 << 2) | (value2 << 4) | (value1 << 8); 
```

当然，这假设代码知道每个值的所需位长。如果您在编译时不知道位长，那么您必须在运行时跟踪它，否则单个 int`1`不会告诉您的代码从中使用多少位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:39:21.443

这是一个尝试编写代码来连接整数的二进制表示，其中二进制表示中没有前导零。

```
static int Concat(int high, int low)
{
  // find location i of most significant bit of "low"
  int i;
  for (i = 31; i > -1; --i)
    if ((low & (1 << i)) != 0)
      break;

  if (i == 31)
    return low;
  return low & (high << (i + 1));
}

static int ConcatMany(IEnumerable<int> values)
{
  return values.Aggregate(Concat);
} 
```

这应该像这样使用：

```
int concatOfTwoNumbers = Concat(3, 12);

var list = new List<int> { 3, 12, 2, 1, };
int concatOfList = ConcatMany(list); 
```

当然，如果串联中的位超过 32 位，则最高有效位“下降”到左侧。要与 64 位整数一起使用，请将`high`和更改`low`为`long`，并将两者都更改`31`为`63`.

# iphone - 从服务器下载图像

> ID：13668117
> 
> 赞同：-1
> 
> 时间：2012-12-02T09:46:08.370
> 
> 标签：iphone, ios, image, download

我正在为我的客户创建应用程序，它是一个壁纸应用程序。图像将从他的服务器下载。服务器尚未设置，他正在寻找添加新图像的简单方法。

从服务器下载图像的最佳方法是什么？你能给我发一些教程的链接吗？我以前没有这样做过，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:57:14.253

在`Synchronous`某种程度上，您可以简单地使用：

```
NSData * imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://ezwebrus.com/wallpapers/cartoons/donald_and_daisy.jpg"]];
UIImage *image = [UIImage imageWithData:imageData]; 
```

但我不会推荐上面的代码。因为如果您的连接速度太慢，可能会使您的应用程序无响应。

以下是一些链接：

1.  [从 url 下载并创建图像](http://mobiledevelopertips.com/cocoa/download-and-create-an-image-from-a-url.html)
2.  [在 iPhone SDK 中下载图像并保存为 PNG 或 JPEG](http://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in-iphone-sdk/)
3.  用于异步图像加载[SDWebImage](https://github.com/rs/SDWebImage)

# javascript - 如何使用 jquery /css 修复屏幕上的元素（有示例）？

> ID：13668118
> 
> 赞同：0
> 
> 时间：2012-12-02T09:46:14.960
> 
> 标签：javascript, jquery, css

[示例](http://www.chicco.com/)在此网页中，您可以看到左侧有一个“follow us, facebook”。

当您向上或向下滑动屏幕时，它会跟随您的屏幕。

我想知道如何实现这个或者是否有任何现有的 jquery 插件来做这样的功能？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:47:27.057

```
#myElement {
    position:fixed;
    top:50px;
    left:0px;
} 
```

元素将相对于浏览器窗口定位，滚动/调整大小不会影响它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:50:13.793

您只需要使用一些样式设置位置作为`position:fixed;`. 你也可以使用 css 规则，这里是一个例子。

**内联样式**

```
<div style="position:fixed; top:100px; left:0px;">
   your content
</div> 
```

**使用 CSS**

```
<html>
    <style>
        #element {
            position:fixed; top:100px; left:0px;
        }
    </style>
    <body>
        <div id="element">
            your content
        </div>
    </body>
</html> 
```

# java - 如何使用在 applicationContext.xml 中设置的一些默认值从 Spring 中的 JVM 选项访问属性值？

> ID：13668121
> 
> 赞同：4
> 
> 时间：2012-12-02T09:46:28.917
> 
> 标签：java, spring, spring-mvc, properties

我想在 Spring 的 applicationContext.xml 中访问一些从 JVM 传递的属性值。我知道实现这一点的一种方法是`#{systemProperties.myProperty}`根据`-DmyProperty=xyz`Spring 的表达式语言功能。

但是我有兴趣为我通过 JVM 分配的每个此类属性设置一个默认值，以防用户没有从服务器的 JVM 选项中设置值。如何在 Spring 的任何上下文 xml 文件中实现这一点？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:18:54.200

您可以制作一个 bean，它从具有默认值的上下文中获取地图参数并初始化系统属性

```
<bean class="test.B1">
    <constructor-arg>
        <map>
            <entry key="p1" value="v1" />
            <entry key="p2" value="v2" />
                                 ....
        </map>
    </constructor-arg>
</bean> 
```

.

```
public B1(Map<String, String> defaultProperties) {
    for (Map.Entry<String, String> e : defaultProperties.entrySet()) {
        if (System.getProperty(e.getKey()) == null) {
            System.setProperty(e.getKey()
                    , e.getValue());
        }
    }
} 
```

上下文中的 B1 定义应该在任何 bean 使用之前，`#{systemProperties.myProperty}`以便首先初始化属性

**更新**

那是关于覆盖系统属性。但是如果你只需要像这里一样覆盖 Spring 占位符

```
<bean class="test.B1">
    <property name="prop1" value="${xxx}" />
</bean> 
```

将属性占位符的本地覆盖属性设置为“true”就足够了

```
<context:property-placeholder location="classpath:/app.properties" local-override="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:13:17.560

在 Spring EL 中，您可以添加一个默认值。在你的情况下：

```
#{systemProperties.myProperty:MyDefaultValue} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-29T10:00:46.273

使用基于注释的配置，您可以使用 Elvis Operator 在 Spring EL 中提供默认值：

```
 @Value("#{systemProperties['hostname'] ?: 'default-hostname'}")
 private String hostname; 
```

基于 atrain 的有用答案。我还不能发表评论，或者我会把语法更正放在那里:(

# github - 在 GitHub 上重新分叉已删除的分叉

> ID：13668126
> 
> 赞同：2
> 
> 时间：2012-12-02T09:46:47.753
> 
> 标签：github, http-status-code-404, fork

前几天，我在 GitHub 上删除了一个 fork。
现在我不能重新分叉同一个项目，当我这样做时，GitHub 显示 404 错误。

当我 fork 时，GitHub 将我重定向到一个页面，就像`"https://github.com/<project_name>-1"`该项目在我的空间中仍然可用一样。

# java - JFrame 上的 Java Swing 虚拟键盘

> ID：13668131
> 
> 赞同：4
> 
> 时间：2012-12-02T09:47:12.470
> 
> 标签：java, swing, layout, jframe

我正在尝试制作如下的打字导师：

![键盘](../Images/be57dda7c3bd749d2624229d770745dd.png) 这是我写的代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Arrays;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
/**
 * Simple swing based typing tutor using frame
 * @author 
 * @date 
 */
public class TypingTutor extends JFrame implements KeyListener
{  
//Individual keyboard rows  
String firstRow[] = {"~","1","2","3","4","5","6","7","8","9","0","-","+","<<<<<"};//BackSpace
String secondRow[] = {"Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\"};
String thirdRow[] = {"Caps","A","S","D","F","G","H","J","K","L",":","\"","Enter"};
String fourthRow[] = {"Shift","Z","X","C","V","B","N","M",",",".","?","   ^" };
String fifthRow[]={"      " ,"<" ,"\\/",">" };

//all keys without shift key press
String noShift="`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./";
//special charactors on keyboard that has to be addressed duing keypress
String specialChars ="~-+[]\\;',.?";

//Jbuttons corresponting to each individual rows 
JButton first[];

JButton second[];

JButton third[];

JButton fourth[];

JButton fifth[];

//default color of the button to be repainted when key released 
Color cc = new JButton().getBackground();

/*
 * Invoked when a key has been pressed.
 * @see java.awt.event.KeyListener#keyPressed(java.awt.event.KeyEvent)
 */
public void keyPressed(KeyEvent evt) 
{

}//end of keypressed

/**
 * Invoked when a key has been released.
 */
public void keyReleased(KeyEvent evt)
{

}

/*
 * Driver main method to start the application 
 */
public static void main(String[] args) {
    //launch typing tutor
    new TypingTutor().setVisible(true);
}
/*
 * No argument construtor to create frame
 */
public TypingTutor()
{
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //set non resizable 
    this.setResizable(false);
    //super.setSize(500,300);
    //set size of the content pane ie frame
    this.getContentPane().setPreferredSize(new Dimension(1000,600));
    //super.getContentPane().setSize(800,400);
    //set location for the frame 
    this.setLocation(50,50);

    //init and paint frame 
    initWidgets();
}

/**
 * Method to initialize frame component 
 */
private void initWidgets()
{
    //set the text area on top 
    JTextArea  text = new JTextArea();
    text.setPreferredSize(new Dimension(800,200));
    //JScrollPane scrollPane = new JScrollPane(text);
    //scrollPane.setPreferredSize(new Dimension(800, 200));

   // add(typingArea, BorderLayout.PAGE_START);
   // add(scrollPane, BorderLayout.CENTER);
    //set the info label on top 
    JLabel info = new JLabel("<html>Type some text using your keyboard.The keys you press will be highlighted and text will be displayed.<br> Note : Clicking the buttons with your mouse will not perform any action. <br><br> </html>" );
    //set the bold font for info
    info.setFont(new Font("Verdana",Font.BOLD,14));

    /*set the layout and place compomnet in place and pack it */
    setLayout(new BorderLayout());
    /*Various panel for the layout */
    JPanel jpNorth = new JPanel();
    JPanel jpCenter = new JPanel();
    JPanel jpKeyboard = new JPanel();
    JPanel jpNote = new JPanel();
    add( jpNorth, BorderLayout.NORTH);
    add( jpNote);
    add( jpCenter, BorderLayout.CENTER);
    add(jpKeyboard, BorderLayout.SOUTH);

    jpNorth.setLayout(new BorderLayout());
    jpNorth.add(info, BorderLayout.WEST);
    jpNorth.add(info, BorderLayout.SOUTH);

    jpCenter.setLayout( new BorderLayout());
    jpCenter.add(text, BorderLayout.WEST);
    jpCenter.add(text, BorderLayout.CENTER);

    //add(text,BorderLayout.WEST);
   // add(scrollPane,BorderLayout.CENTER);

    //layout for keyboard 
    jpKeyboard.setLayout(new GridLayout(5,1));
    //pack the components
    pack();

    /*paint first keyboard row  and add it to the keyboard*/
    first = new JButton[firstRow.length];
    //get the panel for the  row
    JPanel p = new JPanel(new GridLayout(1, firstRow.length));
    for(int i = 0; i < firstRow.length; ++i) 
    {
        JButton b= new JButton(firstRow[i]);
        b.setPreferredSize(new Dimension(100,50));
        first[i] = b;
        p.add(first[i]);
    }
    jpKeyboard.add(p);

    /*paint second keyboard row  and add it to the keyboard*/
    second = new JButton[secondRow.length];
    //get the panel for the  row
    p = new JPanel(new GridLayout(1, secondRow.length));
    for(int i = 0; i < secondRow.length; ++i) 
    {
        second[i] = new JButton(secondRow[i]);
        p.add(second[i]);

    }
    jpKeyboard.add(p);

    /*paint third keyboard row  and add it to the keyboard*/

    third = new JButton[thirdRow.length];
    //get the panel for the  row
    p = new JPanel(new GridLayout(1, thirdRow.length));
    for(int i = 0; i < thirdRow.length; ++i)
    {
        third[i] = new JButton(thirdRow[i]);
        p.add(third[i]);
    }
    jpKeyboard.add(p);

    /*paint fourth keyboard row  and add it to the keyboard*/
    fourth = new JButton[fourthRow.length];
    //get the panel for the  row
    p = new JPanel(new GridLayout(1, fourthRow.length));
    for(int i = 0; i < fourthRow.length; ++i)
    {
        fourth[i] = new JButton(fourthRow[i]);
        p.add(fourth[i]);
        if(i==fourthRow.length-2)
            p.add(new JPanel());

    }
    p.add(new JPanel());
    jpKeyboard.add(p);

    //paint the fifth row
    fifth = new JButton[fifthRow.length];
    //get the panel for the  row
    p = new JPanel(new GridLayout(1, fifthRow.length));
    /*put empty panel for layout adjustments */
    for(int i = 0; i < 1; ++i)
    {
        JPanel  spacePanel = new JPanel();
        p.add(spacePanel);
    }
    /*draw the buttons */
    for(int i = 0; i < fifthRow.length; ++i)
    {
        if(i==1) //space bar panel
        {
            JButton b = new JButton(fifthRow[i]);
            b.setPreferredSize(new Dimension(400,10));
            b.setBounds(10, 10, 600, 100);
            fifth[i]=b;
            //add empty panels for layout 
            p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());
        }
        else
        {
            fifth[i]=new JButton(fifthRow[i]);
        }
        if(i==0) //first black panel
        {
             //place a black panel at first
               JPanel  spacePanel = new JPanel();
               p.add(spacePanel);
        }

        p.add(fifth[i]);

    }
    jpKeyboard.add(p);
    /*add listeners */
    getContentPane().addKeyListener(this);
    text.addKeyListener(this);
    /*add listeners to all the button */
    for(JButton b : first)
        b.addKeyListener(this); 

    for(JButton b : second)
        b.addKeyListener(this); 
    for(JButton b : third)
        b.addKeyListener(this); 

    for(JButton b : fourth)
        b.addKeyListener(this); 

    for(JButton b : fifth)
        b.addKeyListener(this); 

    } //end of initWidgets   
}//end of class 
```

以上是非常简单的代码，但给了我以下布局：

![在此处输入图像描述](../Images/e5e44586ef69033eae76f0c158e6bc69.png)

**问题描述**：

> 对于键盘中的最后一行，我不得不将 Empty Jpanels 用于间距，我根本无法调整空格按钮的大小。它应该跨越 3 个常规按钮。请就此提出您宝贵的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:51:37.270

阅读有关[`javax.swing.Box.Filler`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/Box.Filler.html)类的信息，以获取间距，或者通过以下静态`create...`方法之一简单地创建一个`Box`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:29:23.437

如果窗口不可调整大小，这将是一个***非常快速和肮脏的实现。***

但是添加这么多面板只是为了获得空间并不是我所说的出色编码。如果您遇到更多布局问题，我建议您查看有关 LayoutManager 的各种教程。

```
for(int i = 0; i < fifthRow.length; ++i)
{
    if(i==0) //space bar panel
    {
        JButton b = new JButton(fifthRow[i]);
        fifth[i]=b;
        //add empty panels for layout 
        p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());p.add(new JPanel());
        Container glassPane = (Container) getRootPane().getGlassPane();
        glassPane.setVisible(true);
        glassPane.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.fill = GridBagConstraints.NONE;
        gbc.insets = new Insets(getBounds().y-350, 180, 0, 20);
        gbc.anchor = GridBagConstraints.SOUTHWEST;
        b.setPreferredSize(new Dimension(450,50));
        glassPane.add(fifth[i], gbc);
    }
    else
    {
        fifth[i]=new JButton(fifthRow[i]);
        p.add(fifth[i]);
    }
    if(i==0) //first black panel
    {
         //place a black panel at first
           JPanel  spacePanel = new JPanel();
           p.add(spacePanel);
    }

} 
```

# jquery - 为什么 prev() 和 .siblings() 在上下文中都不起作用？

> ID：13668142
> 
> 赞同：0
> 
> 时间：2012-12-02T09:48:34.307
> 
> 标签：jquery

```
<ul id="menu2">
<li><a href="/term/6">close/show</a>
<ul class="haschild">
<li><a href="/term/14">test 1 2</a></li>
<li><a href="/term/13">tst 13</a></li>
</ul>
</li>
<li><a href="/term/7">helli</a></li>
</ul> 
```

jQuery代码：

```
 $("ul.haschild").hide();
  $("ul.haschild").prev().click(function(){
    $(this).children('.haschild').slideToggle('slow');
    return false;
}); 
```

单击**close/show**时，**haschild**部分不会在显示或隐藏之间更改。

然后我改成`$("ul.haschild").prev()`它`$("ul.haschild").siblings()`仍然无法工作。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:51:40.863

那是因为被点击的元素没有`.haschild`后代元素，你可以使用`next`方法：

```
$(this).next('.haschild').slideToggle('slow'); 
```

[http://jsfiddle.net/tk9j8/](http://jsfiddle.net/tk9j8/)

请注意，您应该将代码放在文档就绪处理程序中。

# android - 正在显示九个补丁线

> ID：13668145
> 
> 赞同：-2
> 
> 时间：2012-12-02T09:48:54.517
> 
> 标签：android, textview, nine-patch

当我在实际设备上运行它时，会显示九个补丁线。在 Eclipse 上预览 xml 文件效果很好，我的图像顶部和底部没有黑线。但是在实际设备上运行时，会显示该行。

我已经尝试在drawinepatch中对其进行编辑。文件名包括 .9，我已经尝试将填充设置为 0dp。顺便说一句，我在这里设置 TextView 的背景。

对不起，这里是：

![在此处输入图像描述](../Images/c7cf2554e282d328ace2d8770bf5eb5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:11:48.023

你只画顶线。没有左行。

对于九个补丁顶部和左侧线是必须的。如果您不想缩放`left`线，那么只需将其完成即可。你不能把它留空。

右侧和底部是可选的。但是，如果您为 设置内容填充`Right`，则必须为底部画线！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:44:18.457

此图像仅包含顶部黑线。您还应该画左、右和底线。更喜欢使用 /android-sdk-linux/tools/draw9patch

# python - 无法对我的列表进行排序，因为它是 NoneType？简单的 Python

> ID：13668154
> 
> 赞同：10
> 
> 时间：2012-12-02T09:50:56.197
> 
> 标签：python, list, nonetype

当我试图找出我的 BeautifulSoup 网络刮刀的低价和高价时，我收到了这个错误。我附上了下面的代码。我的列表不应该是整数列表吗？

在发布此之前，我经历了类似的 NoneType 问题，但解决方案不起作用（或者我可能不理解它们！）

```
Traceback (most recent call last):
  File "/home/user-machine/Desktop/cl_phones/main.py", line 47, in <module>
    print "Low: $" + intprices[0]
TypeError: 'NoneType' object is not subscriptable 
```

相关片段：

```
intprices = []
newprices = prices[:]
total = 0
for k in newprices:
    total += int(k)
    intprices.append(int(k))

avg = total/len(newprices)

intprices = intprices.sort()

print "Average: $" + str(avg)
print "Low: $" + intprices[0]
print "High: $" + intprices[-1] 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T09:55:30.220

`intprices.sort()`正在就地排序并返回`None`，同时`sorted( intprices )`从您的列表中创建一个全新的排序列表并将其返回。

就您而言，由于您不想保留`intprices`其原始形式，因此只需`intprices.sort()`不重新分配即可解决您的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-02T09:57:02.777

你的问题是这条线：

`intprices = intprices.sort()`

列表上的`.sort()`方法就地对列表进行操作，并返回`None`. 只需将其更改为：

`intprices.sort()`

# asp.net-mvc - MVC 3 动作依赖注入

> ID：13668155
> 
> 赞同：0
> 
> 时间：2012-12-02T09:50:58.750
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container

也许它会重复，但我没有找到任何可以帮助我解决问题的东西。

我有可以有不同 ViewModels 的控制器：

我想做类似的事情：

```
[HttpPost]
public ActionResult ExportToExcell(ILeadsViewModel model)
{

} 
```

我的视图模型是：

```
public class ViewModelTest1 : ILeadsViewModel

public class ViewModelTest2 : ILeadsViewModel

public class ViewModelTest3 : ILeadsViewModel 
```

有没有机会为我的 ViewModel 配置 Unity 返回正确的实例？如果可能怎么办？如果可能，但您不建议这样做，请解释原因。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:35:38.393

`ILeadsViewModel`您可以为将根据某些请求属性返回正确视图模型的类型编写自定义模型绑定器。这[`an example`](https://stackoverflow.com/questions/6484972/viewmodel-with-listbaseclass-and-editor-templates)是一个自定义模型活页夹。在这个例子中，我使用了`Activator.CreateInstance`在具体视图模型的请求中存在的 Type 属性，但您可以使用 Unity 或其他任何东西。但是请记住，您应该在请求中包含一些信息，这些信息将允许模型绑定器知道要返回哪个视图模型的具体实例。

# c++ - C++ - 重复

> ID：13668156
> 
> 赞同：-1
> 
> 时间：2012-12-02T09:51:02.323
> 
> 标签：c++, function, header, recurrence

我想同时使用两个重复的函数，我有一个问题：

我有两个功能。每个都使用同一头文件中的其他函数。但是当我想在上面的函数中使用下面的函数时，我有一个错误。我知道，发生了什么，但我不知道如何解决它。我的代码：

**主要.cpp：**

```
include <iostream>
#include <cstdlib>
#include <C:\Users\Natch\Documents\CPP\Calc\incls.h>
using namespace std;

//Global vars

//Global functions

//Main program

int main() {
menu(1);
system("pause");
} 
```

**包括.h：**

```
#ifndef INCLS_H_INCLUDED
#define INCLS_H_INCLUDED

#endif // INCLS_H_INCLUDED

#include <iostream>
#include <cstdlib>

using namespace std;
//Vars

int a, b, func, sa, ctrl;
long double sum, sqrt;

//Voids
void down(int func) {
 if (func < 6) {
          cout << "Wprowadz pierwszy skladnik dzialania:" << endl;
          cin >> a;
          cout << "Wprowadz drugi skladnik dzialania:" << endl;
          cin >> b;
          switch(func){
              case 1:
                sum = a+b;
                cout << "Wynik wynosi: " << sum << endl;
                menu(2);
                break;
              case 2:
                sum = a-b;
                cout << "Wynik wynosi: " << sum << endl;
                break;
              case 3:
                sum = a*b;
                cout << "Wynik wynosi: " << sum << endl;
                break;
              case 4:
                sum = a/b;
                cout << "Wynik wynosi: " << sum << endl;
                break;
              case 5:
                sum = a%b;
                cout << "Wynik wynosi: " << sum << endl;
                break;
          }
 }else if (func == 6)
 {
       cout << "Podaj ilosc liczb do obliczenia sredniej:" << endl;
       cin >> sa;
 }else if (func == 7)
 {
       cout << "Podaj liczbe do wyciagniecia pierwiastka:" << endl;
       cin >> a;
 }else if (func == 8)
 {
       cout << "Podaj liczbe do wyciagniecia potegi:" << endl;
       cin >> a;
 }else if (func== 9)
 {
     system("exit");
 }
}

void menu(int ctrl) {
if (ctrl==1){
    system("cls");
    system("color 06");
    cout << "Kalkulator" << endl;
    cout << "Wybierz funkcje: " << endl;
    cout << "1.Dodawanie" << endl;
    cout << "2.Odejmowanie" << endl;
    cout << "3.Mnozenie" << endl;
    cout << "4.Dzielenie" << endl;
    cout << "5.Reszta z dzielenia" << endl;
    cout << "6.Srednia arytmetyczna" << endl;
    cout << "7.Pierwiastek kwadratowy" << endl;
    cout << "8.Potega n^2" << endl;
    cout << "9.Wyjscie" << endl;
    cout << "Twoj wybor:" << endl;
    cin >> func;
    down(func);
}else if (ctrl==2){
    cout << endl;
    cout << endl;
    cout << endl;
    cout << endl;
    menu(1);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:01:13.020

首先，您可能正在寻找的词是“递归”。您可能需要在这里小心一点，因为像这样在正常操作期间让函数重复调用彼此，最终可能会耗尽堆栈空间。对这实际上意味着什么的更详细的解释超出了这个答案的范围，但在这种情况下你可能会更好地使用传统的`while`循环而不是递归。

其次，当您遇到错误时，请告诉我们它是什么！不要让我们猜测，尤其是因为无法保证您看到的错误与我们在运行程序时看到的错误相同。

第三，告诉我们您使用的是什么平台和编译器。我假设您使用的是 windows，`system("cls")`但同样：不要让我们猜测。

现在，实际的错误。我明白了：

> test.h：在函数'void down（int）'中：test.h：30：错误：'menu'未在此范围内声明

您需要的是一个“函数原型”，`menu`它在实际定义函数之前描述了函数的接口。只要坚持

```
void menu(int); 
```

上面的定义`down`，你会发现编译错误消失了。之后应用程序是否按预期运行我不知道，因为您没有提供足够的信息！

# javascript - JS，如何理解页面是刷新还是第一次打开？

> ID：13668159
> 
> 赞同：1
> 
> 时间：2012-12-02T09:51:17.210
> 
> 标签：javascript, browser, load, refresh

如果页面是加载女巫刷新按钮或`F5`键，是否可以理解使用 javascript？那就是JS可以做出这样的东西？

```
 if (/*   page is load wich browser "refresh" button or "F5" key   */) {
                alert("page is refreshed");
            }
            else if (/*    we coming here from other page    */) {
                alert("We coming here from other page");
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:53:00.423

您可以检查该`document.referrer`属性，但请注意，刷新页面时*以及*用户通过书签或直接在浏览器地址栏中键入 URL 时（如果他们有浏览器扩展程序，则可能阻止推荐人信息）。当用户单击链接进入页面时，它通常会有一个值。所以它是不完美的，但我不知道如果不做服务器端的事情还有什么更好的。

# android - 从 .net webservice 到 listview 的 Android 数据集

> ID：13668167
> 
> 赞同：-1
> 
> 时间：2012-12-02T09:52:07.380
> 
> 标签：android, dataset

我有一个返回数据集的 .net 网络服务。我想列出通过 web 服务返回的所有项目。我成功地从 web 服务中获取了它们，但我在列出时遇到了一个小问题。这是我的代码。

```
public class RehberActivity extends Activity implements Runnable {

private static String SOAP_ACTION1 = "http://tempuri.org/GetNameSurname";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME1 = "GetNameSurname";
private static String URL = "http://www.ogu.edu.tr/Service1.asmx";

Button btnSorgula;
EditText edtIsim, edtSoyisim;
TextView txtSonuc;
ListView lvSonuc;

public KisilerList[] kullanici;
public String[] ad;
public String[] soyadi;
public String[] dahili;
public String[] tel;
public String[] eposta;

public static ProgressDialog pd;

private ArrayList<HashMap<String, Object>> alKisi;
private static final String AdKey = "Ad";
private static final String SoyadKEY = "Soyadi";
private static final String DahiliKey = "Dahili";
private static final String TelKEY = "Tel";
private static final String EpostaKey = "Eposta";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rehber);

    btnSorgula = (Button) findViewById(R.id.btnSorgula);
    edtIsim = (EditText) findViewById(R.id.edtAd);
    edtSoyisim = (EditText) findViewById(R.id.edtSoyad);
    txtSonuc = (TextView) findViewById(R.id.txtSonuc);
    lvSonuc = (ListView) findViewById(R.id.listView1);

    Spinner spUnvanlar = (Spinner) findViewById(R.id.spUnvanlar);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            getApplicationContext(), R.array.unvanlar,
            android.R.layout.simple_spinner_item);

    spUnvanlar.setAdapter(adapter);

    Spinner spGorev = (Spinner) findViewById(R.id.spGorevYerleri);
    ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
            getApplicationContext(), R.array.gorevyeri,
            android.R.layout.simple_spinner_item);

    spGorev.setAdapter(adapter2);

    btnSorgula.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            pd = ProgressDialog.show(RehberActivity.this,
                    "Lütfen Bekleyin...", "Rehber getiriliyor.", true, false);
            Thread thread = new Thread(RehberActivity.this);
            thread.start();

        }

    });
}

public void listPersonInfo() {
    serviceCall();
    // soru_Id=new int[soruArr.length];
    ad = new String[kullanici.length];
    soyadi = new String[kullanici.length];
    dahili = new String[kullanici.length];
    tel = new String[kullanici.length];
    eposta = new String[kullanici.length];

    for (int i = 0; i < kullanici.length; i++) {

        ad[i] = kullanici[i].getAd();
        soyadi[i] = kullanici[i].getSoyadi();
        dahili[i] = kullanici[i].getDahili();
        tel[i] = kullanici[i].getTel();
        eposta[i] = kullanici[i].getEposta();

    }
    // ---------------------------------------------------------------------
    alKisi = new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> hm;
    for (int i = 0; i < kullanici.length; i++) {
        hm = new HashMap<String, Object>();
        // hm.put(idKEY, soru_Id[i]);
        hm.put(AdKey, ad[i]);
        hm.put(SoyadKEY, soyadi[i]);
        hm.put(DahiliKey, dahili[i]);
        hm.put(TelKEY, tel[i]);
        hm.put(EpostaKey, eposta[i]);

        alKisi.add(hm);
    }

    lvSonuc.setAdapter(new myListAdapter(alKisi, this));
    lvSonuc.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
}

private void serviceCall() {
    // Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
    // Use this to add parameters
    request.addProperty("name", edtIsim.getText().toString());
    request.addProperty("surname", edtSoyisim.getText().toString());
    // Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;

    try {

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        // this is the actual part that will call the
        // webservice
        androidHttpTransport.call(SOAP_ACTION1, envelope);
        // Get the SoapResult from the envelope body.
        SoapObject result = (SoapObject) envelope.getResponse();

        KisilerList[] kullaniciArr = new KisilerList[result
                .getPropertyCount()];

        for (int i = 0; i < result.getPropertyCount(); i++) {
            KisilerList objectResult = new KisilerList();
            SoapObject pii = (SoapObject) result.getProperty(i);
            // objectSoru.setSoru_id(Integer.parseInt(pii.getProperty(0).toString()));
            objectResult.setAd(pii.getProperty(0).toString());
            objectResult.setSoyadi(pii.getProperty(1).toString());
            objectResult.setDahili(pii.getProperty(2).toString());
            objectResult.setTel(pii.getProperty(3).toString());
            objectResult.setEposta(pii.getProperty(4).toString());

            kullaniciArr[i] = objectResult;

        }

        this.kullanici = kullaniciArr;

        // txtSonuc.setText(result.getProperty(0).toString()
        // + result.getProperty(1).toString());

    } catch (Exception e) {
        // SoapObject result = (SoapObject) envelope.bodyIn;
        // Log.d("isa", result.toString());
        e.printStackTrace();
    }

}
@Override
public void run() {

    listPersonInfo();
    pd.dismiss();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:00:05.287

拨打您的所有`UI`电话`UI thread`。您不能`UI`从后台线程更改。我可以看到你的两个`UI`电话。如果你有任何其他的，那么也改变它们

改变这个

```
 @Override
public void run() {

    listPersonInfo();
    pd.dismiss();
} 
```

和

```
@Override
public void run() {

    listPersonInfo();
    RehberActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            pd.dismiss();

        }
    });
} 
```

和

```
lvSonuc.setAdapter(new myListAdapter(alKisi, this));
lvSonuc.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

和

```
@Override
public void run() {

    listPersonInfo();
    RehberActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            lvSonuc.setAdapter(new myListAdapter(alKisi, this));
            lvSonuc.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        }
    });
} 
```

# workflow-foundation-4 - 工作流基础 4 - 活动设计

> ID：13668169
> 
> 赞同：0
> 
> 时间：2012-12-02T09:52:31.683
> 
> 标签：workflow-foundation-4

我有一个现有项目，它是一个运行多个流程的应用程序，调用其他流程来执行一些流程。
当前实现使用[无状态状态机](http://code.google.com/p/stateless/)来处理流。
我现在正在重写这个项目（由于几个原因），我正在尝试使用 WF4 进行流量控制。

我的问题是：我应该构建一个只处理流程并为实际业务逻辑调用外部类的工作流（流程图），还是应该在工作流活动（主要是代码活动）中实现业务逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:14:34.563

如果您能够提取一些通用信息来决定您的转换，那么逻辑类的分离将保护您免受 WF 版本更改的影响。因此，您只需要在 WF 中调用您的 biz 逻辑方法，并保持逻辑部分不变。

# c# - 3D 控制光标

> ID：13668174
> 
> 赞同：0
> 
> 时间：2012-12-02T09:53:00.720
> 
> 标签：c#, 3d, kinect

我正在制作 3d 图形编辑器，它将用于`Kinect`屏幕导航。
我需要制作自己的光标，它将通过 Kinect 从右手获取轴 x 和轴 y 坐标，将其翻译到计算机屏幕并将光标移动到该位置。

我真正的问题是，我还需要来自深度传感器的坐标才能获得 z 轴上的坐标。任何帮助将不胜感激。应用程序是`C#`用官方开发的`MS Kinect SDK`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:35:07.087

例如，如果右手将移动光标，您可以获得右手的坐标，将其转换为颜色坐标并将鼠标放在所需的坐标处。

首先，声明你的骨架数组和坐标映射器实例私有 Skeleton[] 骨架；私人 CoordinateMapper cm = new CoordinateMapper();

在 AllFramesReady 或 SkeletonFrameready 事件句柄中，您可以执行以下操作：

```
using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
{
 if (skeletonFrame == null)
     return;

    if (skeletons == null || skeletons.Length != skeletonFrame.SkeletonArrayLength)
    {
        skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
    }
    skeletonFrame.CopySkeletonDataTo(skeletons);

    if (skeletons.All(s => s.TrackingState == SkeletonTrackingState.NotTracked))
        return;

    Skeleton firstTrackedSkeleton = skeletons.Where(s => s.TrackingState == SkeletonTrackingState.Tracked).FirstOrDefault();

    CoordinateMapper cm = new CoordinateMapper(YourKinectSensor);
    ColorImagePoint colorPoint = cm.MapSkeletonPointToColorPoint(first.Joints[JointType.HandRight].Position, ColorImageFormat.RgbResolution640x480Fps30);

     //Here the variable colorPoint have the X and Y values that you need to position your cursor.
} 
```

这是基础知识，对于更详细的示例，我建议您查看 sdk 附带的示例。

# nginx - Nginx upload_module 只会将文件存储在 /var/www

> ID：13668177
> 
> 赞同：0
> 
> 时间：2012-12-02T09:53:20.267
> 
> 标签：nginx

当前设置：

*   nginx 监听 80 端口，将 example.com 请求转发到 8080 上的 Apache
*   Apache 监听 8080 端口，通过 wsgi 连接到 Django 应用
*   Django表单将图像上传到子域photos.example.com/upload/

这似乎来自我在 nginx 中的配置文件，但我不能指望它。我主要尝试更改 nginx 中的 upload_store 指令。我希望用户上传的照片存储在 /var/www/dev/source/nginx/media/

我现在能做的最好的事情是从 /var/www 符号链接到我希望它们进入的文件夹。

相关nginx配置：

```
server {
        client_max_body_size 100m;
        listen 80;
        server_name photos.example.com;
        access_log /var/log/nginx/photos.example.com/access.log;
        error_log /var/log/nginx/photos.example.com/error.log;

        # Upload form should be submitted to this location
        location /upload {
                # Pass altered request body to this location

                # Store files to this location
                upload_store /var/www/dev/source/nginx/media 1;
                # Set specified fields in request body
                upload_set_form_field $upload_field_name.name "$upload_file_name";
                upload_set_form_field $upload_field_name.content_type "$upload_content_type";
                upload_set_form_field $upload_field_name.path "$upload_tmp_path";
        }
        # Pass altered request body to a proxy

        location / {
                root /var/www/dev/source/nginx/media;
        }
} 
```

相关`models.py`：

```
def rename_image(instance,filename):
    random = ''.join([choice(letters) for i in xrange(10)])
    today = datetime.date.today()
    userid = instance.user.username
    filename = '_'.join([today.strftime('%s'),userid,random,filename])
    return'/'.join(['images','users',userid,filename])

class Users(models.Model):
    user        = models.OneToOneField(User)
    ...
    photo       = models.ImageField(upload_to=rename_image) 
```

## 编辑：

当我尝试将它设置到另一个路径（组成一个名为 imgz 的目录作为测试）时，这是在 nginx 错误日志中：（我还创建了 imgz 以查看是否可以修复它，但它没有）

2012/12/02 09:37:44 [错误] 31229#0: *56472 open() "/var/www/dev/source/nginx/media/imgz/users/1354424400_lmDdkskvEPbrtUYBudgzsLjiOXvywx_gwslfBWlBk_me.jpg" 失败（2：没有这样的文件或目录），客户端：xx.xx.example.example，服务器：photos.example.com，请求：“GET /imgz/users/1354424400_lmDdkskvEPbrtUYBudgzsLjiOXvywx_gwslfBWlBk_me.jpg HTTP/1.1”，主机：“photos.example.com”，推荐人：“ [http://dev.example.com/lmDdkskvEPbrtUYBudgzsLjiOXvywx](http://dev.example.com/lmDdkskvEPbrtUYBudgzsLjiOXvywx) ”

## 编辑2：

实际上，这是在 POST 之后发生的 GET 请求。这是 Django 应用程序试图显示刚刚上传的图像。如果我没记错的话，表单的 POST 几乎总是成功的。如果我更改路径，它只会在 /var/www 中创建一个不同的路径。

# mysql - 在线时向大型 MySql 表添加列

> ID：13668178
> 
> 赞同：7
> 
> 时间：2012-12-02T09:53:20.330
> 
> 标签：mysql, myisam, alter-table, large-data

我需要向包含超过 2000 万行的 MySQL DB（MyISAM 表）中的表添加一个新列。

添加列的过程必须在运行时进行，我的意思是应用程序仍将运行，并且在更改表时仍将插入和选择行。

*   这将如何影响正在运行的应用程序？
*   执行此更改需要多长时间？

**我怎样才能安全地完成这个过程而不损害正在运行的应用程序？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:29:26.977

执行 DDL 查询时表被锁定。这并不意味着服务器在锁定时不接受其他会话的查询，但它们已排队并且可能在您的 ALTER TABLE 完成之前超时。取决于硬件、表结构以及行数（你说的很高）等因素，更改将需要一段时间。

在 MySQL 5.5（更快的索引创建，innodb）、8 核 CPU、芯片磁盘上，在我们的示例中，更改具有多个索引的 5 百万行表大约需要 15-20 分钟。

我建议创建一个副本，然后更改副本。完成后，您必须重播数据增量。Facebook 必须在更高的层次上处理这个问题，看看这个

[http://m.facebook.com/note.php?note_id=430801045932](http://m.facebook.com/note.php?note_id=430801045932)

但是，我不能保证这一切都可以在 MyISAM 引擎上安全运行

**编辑：**

Percona 创建了一个显然适用于所有存储引擎的工具包：

[http://www.mysqlperformanceblog.com/2012/04/05/percona-toolkit-2-1-with-new-online-schema-change-tool/](http://www.mysqlperformanceblog.com/2012/04/05/percona-toolkit-2-1-with-new-online-schema-change-tool/)

> 在此版本中，我们引入了新版本的 pt-online-schema-change，该工具使您能够在没有阻塞或停机的情况下更改大型表。如您所知，MySQL 为大多数 ALTER 操作锁定表，但 pt-online-schema-change 执行 ALTER 时没有任何锁定。客户端应用程序可以不间断地继续读取和写入表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T10:16:05.880

在添加新列时，它将锁定表。这意味着任何尝试使用该表的应用程序都将被阻止，直到它完成。不会对数据造成任何损害，但任何尝试使用该表的应用程序都会挂起。

很难说需要多长时间，这取决于数据库已经有多大，因为它必须进行大量数据复制，以及服务器的速度。正如上面有人所说，找到这个的方法是制作一个表的副本并首先在副本上执行更改。

# jquery - 如果我删除 alert()，脚本将停止执行

> ID：13668181
> 
> 赞同：0
> 
> 时间：2012-12-02T09:53:42.767
> 
> 标签：jquery, events

```
$("div[id^='BlockHeading']").live("click", function () {

    var text = $(this).text().toString();
    if ($(this).next().css("display") == "none") {
        $(this).empty();
        $(this).html("" + text + " <img src='../img/109041_25936_16_chevron_collapse_icon.png' height='12' width='12' style='float:right'>")
        iframeresize();
        $(this).focus();
    } else {
        $(this).empty();
        $(this).html("" + text + " <img src='../img/109041_25936_16_chevron_collapse_iconDown.png' height='12' width='12' style='float:right'>")
        iframeresize();
        $(this).focus();
    }
    jQuery(this).next(".content").slideToggle(100);
}); 
```

我正在尝试`IFRAME`在事件发生后调整大小。上面显示了一个这样的事件。但是，问题发生在函数中`iframeresize()`- 如果我`alert()`在调用它之前触发 an ，或者在函数本身中调用它......并且它在 Firebug 中起作用- 但除非存在，`debug-window`否则根本不起作用......`alert()`

我错过了什么？

**编辑** 代码`iframeresize()`：

```
function iframeresize() { 
     $("#frame1", parent.document).css("height", $("#form1").height() + 100);
     $("#container", parent.document).css("height", $("#form1").height() + 100); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:00:39.810

尝试从超时调用它并让其余代码继续执行。

```
...
setTimeout(iframeresize, 10);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:48:04.830

我删除了，`$(this).empty()`因为无论如何你为元素分配了新的 html。测试此代码，证明它可以工作（[http://jsfiddle.net/Zt3eP/17/](http://jsfiddle.net/Zt3eP/17/)）所以，您的代码的其他部分可能存在问题，而不是您显示的内容。

```
$("div[id^='BlockHeading']").live("click", function () {
    var text = $(this).text().toString();
    if ($(this).next().css("display") == "none") {
        $(this).html("" + text + " <img src='../img/109041_25936_16_chevron_collapse_icon.png' height='12' width='12' style='float:right'>")
        iframeresize();
        $(this).focus();
    } else {
        $(this).html("" + text + " <img src='../img/109041_25936_16_chevron_collapse_iconDown.png' height='12' width='12' style='float:right'>")
        iframeresize();
        $(this).focus();
    }
    $(this).next(".content").slideToggle(100);
});
function iframeresize(){
    console.log('resize');
}
​ 
```

# php - Mandelbrot 图像精度差颜色周期？

> ID：13668182
> 
> 赞同：0
> 
> 时间：2012-12-02T09:53:54.963
> 
> 标签：php, math, mandelbrot

我在 php 中创建了一个 mandelbrot，但 mandelbrot 看起来有点奇怪。我该如何改进它？ ![在此处输入图像描述](../Images/6c3e1c05c00db450691b83292689a8b6.png)

你可以在这里找到一个活生生的例子：[http](http://www.phpdevpad.de/index.php?id=190) ://www.phpdevpad.de/index.php?id=190 。

更新：Mandelbrot-Zoom 900 次迭代：

![在此处输入图像描述](../Images/7c8b830ffa25e6ba3412ffcfa07a794e.png)

更新：我使用这种计算 mandelbrot 的方法：

```
double Re_factor = (MaxRe-MinRe)/(ImageWidth-1);
double Im_factor = (MaxIm-MinIm)/(ImageHeight-1);

double newMinRe = MinRe + (Re_factor* x1);
double newMaxRe = MinRe + (Re_factor* x2);
double newMinIm = MinIm + (Im_factor* y1);
double newMaxIm = MinIm + (Im_factor* y2);

// and then I compute c - real and c- imag values

  for(unsigned y=0; y<ImageHeight; ++y) 
{ 
  double c_im = newMinIm - y*Im_factor;
  for(unsigned x=0; x<ImageWidth; ++x)
    {
      double c_re = newMinRe + x*Re_factor;

      // ComputeMandelbrot();

     }

 } 
```

1.  [http://warp.povusers.org/Mandelbrot/](http://warp.povusers.org/Mandelbrot/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:53:46.790

我猜有几件事正在发生：

1.  如前所述，对这样的分形进行 60 次迭代将无济于事。试试6000。
2.  您可能会遇到双精度的限制。这最终会导致出现块状且可能不正确的渲染，尤其是在缩放时。您将需要一个确切的数字类型。PHP 本身并不提供真正精确的数据类型，因此除了与浮点数的性质相关的轻微不一致外，您必须要么自己做一些有趣的数学运算，如整数或字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:16:22.300

1）您需要增加最大迭代次数。黑色区域太大。

2）您可以将味觉更改为更有趣的东西。突然变成“蓝色”很奇怪。

3）女性的默认图片应该更大并且......

# events - 如何在 Angularjs 中使用 $event 在事件点击时更新 ng-model

> ID：13668184
> 
> 赞同：4
> 
> 时间：2012-12-02T09:54:20.843
> 
> 标签：events, data-binding, angularjs

[http://plnkr.co/ywhmyO](http://plnkr.co/ywhmyO)

我已经尝试过编译和指令，但我没有得到任何地方。示例中的编译代码是直接从 Angular 网站上撕下来的，但我不知道如何使用它。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T17:23:11.240

`ng-repeat`您正在绊倒创建新范围的事实。因此，您的更新仅发生在子范围内，而不显示在父范围内。

你可以在你的视图中做这样的事情：

```
<div ng-repeat="name in names">
  <input ng-model="name.name" ng-click="changeName($index)" value="{{ name.name }}">
</div> 
```

`$index`在基于 0 的计数器中。然后在你的控制器中：

```
$scope.changeName = function($index) {
    $scope.names[$index].name = $scope.nameselected;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T06:50:55.637

为什么不传递论点？

```
<div ng-repeat="name in names">
  <input ng-model="name.name" ng-click="changeName(name)" value="{{ name.name }}">
</div> 
```

```
$scope.changeName = function(name) {
    name = $scope.nameselected;
}; 
```

# php - PHP - 用于拆分 URL 的正则表达式

> ID：13668185
> 
> 赞同：0
> 
> 时间：2012-12-02T09:54:27.400
> 
> 标签：php, regex

我有一个带有“ `a href`”和“ `[link]`”链接的文本。我想 preg_split 这段文本并在 [i] 上找到链接的数组

例子：

```
My text <a href="www.example.com">text</a> this continues [link=http://www.second.com]link[/link]

=>

[0] My text
[1] <a href="www.example.com">text</a>
[2] this continues
[3] [link=http://www.second.com]link[/link] 
```

我应该如何写我的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:46:21.427

`(.+)(\<a.+\/a>)(.+)(\[link.+\/link])`

生产

```
Match groups:
1\.  My text
2\.  <a href="www.example.com">text</a>
3\.  this continues
4\.  [link=http://www.second.com]link[/link] 
```

[http://rubular.com/r/8PEUbDX9zr](http://rubular.com/r/8PEUbDX9zr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:14:47.997

```
<?php
$text = 'My text <a href="www.example.com">text</a> this continues [link=http://www.second.com]link[/link]';

preg_match_all('/(?:href="|link=)(.*?)(?:"|\])/is', $text, $links);
// $links[1] = array('link', 'link', 'link'...)
$links = $links[1]; // $links = array('link'...)
?> 
```

应该管用 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:09:24.337

我猜是这样的。假设一切都在同一条线上..

```
/\<a\.*[link=(.*)\].*$/i 
```

# jquery - responseJSON 和 $.parseJSON 的区别

> ID：13668189
> 
> 赞同：1
> 
> 时间：2012-12-02T09:55:22.747
> 
> 标签：jquery

好的，所以当我通常使用 JSON 时，我会收集如下数据：

```
<?php 
    $some_array = array("success" => "The upload is successful", "failed" => "The upload has failed");
    echo  json_encode($some_array);
?> 
```

```
<script type="text/javascript">
    success: function(data){
        var imported = $.parseJSON(data);
        ...
    }
</script> 
```

但我目前正在尝试找出一个使用 responseJSON 的 jquery 插件，但我不确定如何使用它：

```
onComplete: function(id, fileName, responseJSON) {
    if (responseJSON.success) { 
```

这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:03:51.253

您可以`console.log(responseJSON)`查看完整的对象。

**编辑**

我要说的主要区别是它`data`是一个 JSON 字符串，并且作为对象访问它需要使用`parseJSON`它。

它似乎`responseJSON`已经是一个 JSON 序列化对象，因此您可以立即访问它的属性，而无需使用`parseJSON`.

# javascript - IE 和 Firefox 中不同的函数 onchange 事件

> ID：13668191
> 
> 赞同：0
> 
> 时间：2012-12-02T09:55:40.680
> 
> 标签：javascript, textbox, dom-events, onchange

我有三个带有`onchange`事件功能的 aspx 形式的文本框：

```
 <asp:textbox runat="server" id="txt1" onchange="f1();" />
 <asp:textbox runat="server" id="txt2" onchange="f1();" />
 <asp:textbox runat="server" id="sum" onchange="sum();" />

    function f1(){
    //change sum.text
    sum.text='125';
    } 
```

当 txt1.text 更改并且 txt2 获得焦点时，`f1()`不会删除`sum()`或`f1()`再次触发它。当 txt2.text 改变并且 sum 获得焦点时，它会`f1()`触发它并且`sum()`也会触发。在 IE 中会发生这种情况，但在 Firefox 中会正常发生；为什么？

# wcf - WF4 + WCF 服务......使用它的人接受的方法是什么？

> ID：13668202
> 
> 赞同：0
> 
> 时间：2012-12-02T09:58:15.137
> 
> 标签：wcf, workflow-foundation-4

我即将深入研究 WF4，并且我一直在阅读关于“做什么”的文章后的博客......但几乎无一例外 a）“演示”是如此简单以至于无用，b）演示没有编译/工作/运行或c）它满足基于“展示我能做什么，而不是业务需要什么”的需求。

所以：
对于实际使用 WF4 的任何 SOers - 对于这样的工作流程，您会采取什么方法？

*   “客户”提交请求。
*   “用户”打开它，完成一些字段并保存。
*   如果超过某个“值”为审批阶段
    *   否则自动进入下一阶段
*   电子邮件被发送给发起人，然后根据“一些逻辑”选择下一个部门
    *   如果下一个部门在 x 天内什么都不做，那么会发送另一封电子邮件，抄送给他们的经理。
*   下一个部门“得到”工作的请求。
*   ...等等类似的

恕我直言：这是非常标准的业务处理，具有一些自动化，但主要是人工交互 - SharePoint 做这种事情非常糟糕，几乎无法满足我们的所有要求，因此我们希望自己构建它。

我应该构建 WCF-WF 服务吗？然后添加MCV3进行人机交互？

我是否应该构建处理用户交互的传统 WCF 服务 + MVC3 和“调用”（即坐在......但不使用“WCF WF”）WF4？

一起忽略 WF4，只使用 WCF + MVC3 或类似的？

感谢任何现实世界的建议，尤其是任何现实的博客/文章！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:36:01.943

由于 WF4 主要用于解决复杂的业务问题，因此几乎不可能在博客文章/文章中使用真实的工作示例。

您的示例听起来像是我将在工作流程中建模的东西。如果工作流几乎是固定的东西，我会使用工作流服务；如果您想要更灵活并让用户/组织修改工作流，我会使用 WorkflowApplication。

我已经使用实例存储中的工作流状态来非常成功地驱动 UI。基本上具有基于它等待恢复的书签的工作流列表，并启用基于相同信息的禁用 UI 控件。

请记住，WF4 有相当长的学习曲线。这当然不是火箭科学，但如果你是新手，你可能会陷入陷阱并做错事。我会推荐[Pro WF：.NET 4 中的 Windows 工作流](https://rads.stackoverflow.com/amzn/click/com/1430227214)或（无耻的自我插件）[Essential Windows Workflow Foundation 4 (WF4) Training](http://www.develop.com/training-course/windows-workflow-wf4-training) .

# android - 如何制作为主应用程序提供资源的扩展应用程序

> ID：13668205
> 
> 赞同：2
> 
> 时间：2012-12-02T09:58:52.580
> 
> 标签：android, android-resources

我有一个需要一些内置资源并让用户搜索这些资源的应用程序。这些资源不是静态的，我有时会更新它，并且因为 Google Play 要求的 APK 文件不超过 50MB（[在此处](http://developer.android.com/guide/google/play/expansion-files.html)记录），所以我想将我的应用程序分成 2 个或多个应用程序，主应用程序和其他应用程序提供资源对于主应用程序。

像这个：

*   Aviary - 主应用程序：[https ://play.google.com/store/apps/details?id=com.aviary.android.feather&feature=search_result](https://play.google.com/store/apps/details?id=com.aviary.android.feather&feature=search_result)

*   Aviary - 我称之为“资源应用程序”：[https ://play.google.com/store/apps/details?id=com.aviary.android.feather.plugins.stickers.free_stickers&feature=search_result](https://play.google.com/store/apps/details?id=com.aviary.android.feather.plugins.stickers.free_stickers&feature=search_result)

解释 Aviary：在 Aviary 的主应用程序中，有一个功能需要资源应用程序才能运行。资源应用没有任何活动，只要安装资源应用，该功能就可用。

所以我的问题是：如何制作这样的资源应用程序？此外，我还希望资源应用程序能够为主应用程序提供一些数据库，以便在安装后进行搜索。

我想过ContentProvider，但似乎只能提供数据库，我不知道如何处理图像或媒体文件等真实资源。

任何建议表示赞赏。谢谢！

# iphone - 当tableview比屏幕长时将其转换为图像

> ID：13668206
> 
> 赞同：0
> 
> 时间：2012-12-02T09:59:12.150
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [当 webview 大于屏幕时，将 UIWebview 内容转换为 UIImage](https://stackoverflow.com/questions/4475397/convert-uiwebview-contents-to-a-uiimage-when-the-webview-is-larger-than-the-scre)

`UIGraphicsBeginImageContext`可以将视图转换为图像。但是如果一个table-view 比屏幕长，这个函数就不能显示整个table-view。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:03:56.573

请参阅此答案：[https](https://stackoverflow.com/a/5104559/254422) ://stackoverflow.com/a/5104559/254422 只需将 替换`UIWebView`为`UITableView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:07:55.133

这将得到一个整体的形象`UITableView`。

```
UIImage *image = nil;
CGRect oldFrame = self.tableView.frame;
[self.tableView setFrame:CGRectMake(0, 0, self.tableView.contentSize.width, self.tableView.contentSize.height)];
UIGraphicsBeginImageContext(self.tableView.contentSize); {
    [self.tableView.layer renderInContext:UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();
}
UIGraphicsEndImageContext();
[self.tableView setFrame:oldFrame]; 
```

# java - 交互式 Java 编译器和显示

> ID：13668210
> 
> 赞同：0
> 
> 时间：2012-12-02T09:59:21.253
> 
> 标签：java

是否有网站或程序显示已编译的程序并显示您对源代码所做的更改？（就像它在左侧显示您的源代码，在右侧显示您的程序以及您在源代码中对其所做的更改。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:01:58.210

如果您正在寻找可以显示代码并支持运行时更改的应用程序，eclipse 可以做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:02:33.950

窗口构建器可以做到这一点。在 Eclipse 中，`right click on your swing file, open in Window-Builder`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:03:34.720

Netbeans 基本上是围绕这个构建的。Eclipse 还通过各种官方和非官方插件支持这一点。

# java - 使用自定义比较器类时出错

> ID：13668212
> 
> 赞同：1
> 
> 时间：2012-12-02T09:59:49.560
> 
> 标签：java, priority-queue, dijkstra

我正在尝试为邻接矩阵实现 Dijkstra 算法，并且我正在使用 Java 优先级队列来执行此操作。对于我的顶点，我正在创建一个自定义比较器类，但出现以下错误：

```
 <anonymous Dijkstra$1> is not abstract and does not override abstract method compare(vertex,vertex) in java.util.Comparator
        PriorityQueue<vertex> Q = new PriorityQueue<vertex>(n,new Comparator<vertex>() { 
```

这是代码：

```
import java.util.Scanner;
import java.io.File;
import java.util.PriorityQueue;
import java.util.Comparator;
class vertex {
    int v,d;
    public vertex(int num,int dis){
        v =num;
        d=dis;
    }
    public int getv(){
        return v;
    }
    public int getd(){
        return d;
    }
} 
```

然后我用它来创建一个新的优先级队列：

```
PriorityQueue<vertex> Q = new PriorityQueue<vertex>(n,new Comparator<vertex>() {        
            public int compare (Object a, Object b){
            vertex v1 = (vertex)a;
            vertex v2 = (vertex)b;
            if (v1.getd() > v2.getd()){
                return +1;
            }else if (v1.getd() < v2.getd()){
                return -1;
            }else {
                return 0;
            }
        }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:44:50.763

你得到的错误是因为你没有实现正确的方法。is和 not`compare`方法的签名。 `Comparator<vertex>``public int compare (vertex a, vertex b);``public int compare (Object a, Object b);`

此外，正如 JB Nizer 明智地指出的那样，最好按如下方式实现您的比较方法：

```
public int compare (vertex a, vertex b) {
    return Integer.compare(a.getd(), b.getd());
} 
```

# stm32 - STM32L + ENC28J60 (Olimex)

> ID：13668230
> 
> 赞同：2
> 
> 时间：2012-12-02T10:01:56.617
> 
> 标签：stm32

我在将 Olimex 的 ENC28J60-H 连接到我的 STM32L-Discovery 时遇到问题。所以我编写代码，读取一个 ECON1 寄存器，然后向其中写入一些值，然后再次读取它。这里有一个问题：当我在这段代码中的每一行一步一步地使用调试器（F10）时，一切都很顺利。但是当我在这行之后设置断点时，寄存器返回 0x00。我决定，ENC 只是没有足够的时间将值写入寄存器。但是手册说，它有自己的晶体振荡器，频率为 20 或 25 MHz（不记得确切）。我的频率约为 150 kHz。无论如何，我在每次 SPI 发送或接收后设置一个延迟（循环中的简单计数器）。这很有帮助。然后我继续。我写了一个初始化函数（软复位，而不是将需要的值写入寄存器），在主函数中使用它。调用后，我再次读取了一个 ECON1 寄存器。我得到的只是0x00，即使有延迟。有人知道在这种情况下该怎么办吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T06:05:12.987

通过 SPDR 发送一个字节后，然后测试 SPSR 寄存器中的 SPIF 位 (0x80)。当 SPIF == 1 时，数据已发送。

延迟有效，因为您要给传输（以及 ENC28J60 中的内部逻辑）时间来完成。

# java - SWT Filedialog 打开到主文件夹

> ID：13668232
> 
> 赞同：5
> 
> 时间：2012-12-02T10:02:08.390
> 
> 标签：java, linux, swt, filedialog

我想在用户主文件夹中打开一个 FileDialog 窗口（即 /home/user 或 /Users/unsername）

我使用 System.getProperty 读取了用户主文件夹：

```
 String homefolder = System.getProperty(user.home); 
```

并且该变量包含正确的主文件夹。但是当我在 FileDialog 中设置过滤器路径时，它只打开（在 linux 中）不进入用户主目录的 /home 级别。

这是源代码：

```
 FileDialog dialog = new FileDialog(shell); 
  dialog.setText("Choose a certificate");
  String platform = SWT.getPlatform();
  String homefolder = System.getProperty("user.home");
  dialog.setFilterPath(homefolder); 
```

任何的想法？这是一个屏幕截图： ![Swt FileDialog 问题](../Images/a70dc2625e37b3448fcc435cd84e0447.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:02:09.240

您的代码与 SWT 3.6.1 完美配合。[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=287149)有一个错误报告，指出这是 SWT 版本 <= 3.3 中的一个问题，并且在 3.4 中已修复。

因此，解决方案是安装一个从不的版本（最好是当前版本）。

由于您提到您使用 Maven 存储库，因此这里有一个适用于 SWT 3.8 的存储库：

[maven 项目：SWT 3.5 依赖项：任何官方公共回购？](https://stackoverflow.com/questions/5096299/maven-project-swt-3-5-dependency-any-official-public-repo)

# multithreading - 从下标捕获输出，超时

> ID：13668235
> 
> 赞同：0
> 
> 时间：2012-12-02T10:02:26.273
> 
> 标签：multithreading, perl, stdout

我有一个运行下标来收集 5 行信息的 perl 脚本。目前它正在这样做：

```
my @info = split(/\n/,`/script/directory/$devtype.pl $ip $port`); 
```

但是，由于我无法控制的各种原因，下标有时会挂起，在这种情况下，我只想停止下标并继续前进。什么是最好的方法

*   获取下标的PID
*   等待这 5 行输出，如果在设置的超时之前未收到输出，则杀死 -9 pid

我在考虑`use`ing `Forks::Super`，`@info`与下标共享，并有一个循环等待数组填满，直到超时。但是，我不确定如何在不重写下标的情况下实现这一点，由于与其他脚本的向后兼容性，我不希望这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:52:19.817

以下代码使用[IPC::Run](https://metacpan.org/module/IPC%3a%3aRun)以 30 秒的超时获取 5 行`@info`并确保子进程已死：

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);

use IPC::Run qw(start timeout new_chunker input_avail);

my @info;
my $h;

# trap timeout exception
eval {
    $h = start
        # beware of injection here!
        # also, $^X holds the name of your actual Perl interpreter
        [$^X, "/script/directory/$devtype.pl", $ip, $port],

        # read STDOUT line-by line
        '>', new_chunker,

        # handle each line
        sub {
            my ($in, $out) = @_;
            if (input_avail) {
                if (5 > @info) {
                    chomp $in;
                    push @info, $in;
                    return 1;
                } else {
                    return 0;
                }
            }
        },
        timeout(30);

    # is it dead yet?
    $h->finish;
};

# make sure it is dead
if ($@) {
    warn "exception: $@";
    $h->kill_kill;
} 
```

# wpf - WinRT 中的 ClipToBounds 属性

> ID：13668236
> 
> 赞同：7
> 
> 时间：2012-12-02T10:02:28.253
> 
> 标签：wpf, windows-runtime

我试图在 Windows 运行时中找到相当于[ClipToBounds的东西。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)如果它不存在，有没有办法重新创建这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:43:14.963

这是我使用的解决方案：

```
public class Clip
{
    public static bool GetToBounds(DependencyObject depObj)
    {
        return (bool)depObj.GetValue(ToBoundsProperty);
    }

    public static void SetToBounds(DependencyObject depObj, bool clipToBounds)
    {
        depObj.SetValue(ToBoundsProperty, clipToBounds);
    }

    /// <summary>
    /// Identifies the ToBounds Dependency Property.
    /// <summary>
    public static readonly DependencyProperty ToBoundsProperty =
        DependencyProperty.RegisterAttached("ToBounds", typeof(bool),
        typeof(Clip), new PropertyMetadata(false, OnToBoundsPropertyChanged));

    private static void OnToBoundsPropertyChanged(DependencyObject d,
        DependencyPropertyChangedEventArgs e)
    {
        FrameworkElement fe = d as FrameworkElement;
        if (fe != null)
        {
            ClipToBounds(fe);

            // whenever the element which this property is attached to is loaded
            // or re-sizes, we need to update its clipping geometry
            fe.Loaded += new RoutedEventHandler(fe_Loaded);
            fe.SizeChanged += new SizeChangedEventHandler(fe_SizeChanged);
        }
    }

    /// <summary>
    /// Creates a rectangular clipping geometry which matches the geometry of the
    /// passed element
    /// </summary>
    private static void ClipToBounds(FrameworkElement fe)
    {
        if (GetToBounds(fe))
        {
            fe.Clip = new RectangleGeometry()
            {
                Rect = new Rect(0, 0, fe.ActualWidth, fe.ActualHeight)
            };
        }
        else
        {
            fe.Clip = null;
        }
    }

    static void fe_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        ClipToBounds(sender as FrameworkElement);
    }

    static void fe_Loaded(object sender, RoutedEventArgs e)
    {
        ClipToBounds(sender as FrameworkElement);
    }
} 
```

[在这里](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/0e80a0ed-bf4d-479f-bbf1-9fefc1db0857)找到

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-27T08:40:31.707

我更喜欢这里的“剪辑”属性是一些 xaml

```
<Grid Width="100" Height="50">
    <Grid.Clip>
        <RectangleGeometry Rect="0 0 100 50"/>
    </Grid.Clip>
</Grid> 
```

'Rect' 属性的参数是： Rect="xy width height"

希望能帮助到你

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-08T12:50:21.847

这是在 WinRTXamlToolkit ( [https://github.com/xyzzer/WinRTXamlToolkit](https://github.com/xyzzer/WinRTXamlToolkit) ) 中实现的，它也可以作为 Nuget 包使用。

添加到 XAML 标头：

```
xmlns:extensions="using:WinRTXamlToolkit.Controls.Extensions" 
```

然后，例如在 XAML Canvas 组件中

```
<Canvas extensions:FrameworkElementExtensions.ClipToBounds="True"/> 
```

# javascript - JavaScript 堆栈管理/释放内存

> ID：13668248
> 
> 赞同：4
> 
> 时间：2012-12-02T10:04:11.210
> 
> 标签：javascript, performance

当这样定义一个类时：

```
var namespace = {};
namespace.appleClass = function() {
   this.collection = [];
};

namespace.appleClass.prototype.methodOne = function(arg) {
   this.collection.push(arg);
}; 
```

摆脱 this.collection 的方法很简单。

```
this.collection.length = 0; 
```

我的问题是上面定义的方法会发生什么（关于`namespace.appleClass.prototype`）。JavaScript 如何处理它们？函数“存储”在哪里？如何释放存储空间？

上面的类可以这样使用。

```
var apple = new appleClass();
appleClass.methodOne(2);
appleClass.collection[0]// will be equal to two etc.. 
```

**我知道如何清空 DOM 引用、COM 引用以及删除操作符背后的长篇故事。我不知道从“自定义原型”或“类”中删除函数和对它们的引用的最佳方法是什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:15:31.037

> 摆脱 this.collection 的方法很简单。
> 
> ```
> this.collection.length = 0; 
> ```

这并没有摆脱数组，只是截断了它，所以它没有条目。要真正完全摆脱数组，请执行`delete this.collection`（这将完全删除引用数组的属性，使数组符合垃圾回收条件）或`this.collection = null`（这将释放对数组的引用，使其符合垃圾回收条件，但*不*删除该属性，该属性仍将与值一起存在`null`）。

任何在`this.collection`其他地方没有被提及的东西都将有资格进行垃圾收集。何时（或确实是否）发生这种情况完全取决于 JavaScript 实现。

这就是关键点，真的：要在 JavaScript 中“管理”内存，您只需确保没有任何内容指向您不再想要的东西。通常这无论如何都会超出您的应用程序逻辑（您不再需要它，所以您放弃对它的引用）。如果您在设计代码时牢记[闭包的工作原理](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)，那么在大多数情况下，您无需担心内存管理。

在问题的评论中重新提出您的问题：

> 我正在研究下找到的方法`namespace.appleClass.prototype`。JavaScript 如何处理它们？函数“存储”在哪里？如何释放存储空间？

函数对象存储在堆中（几乎可以肯定；如果它仅由局部变量引用，一些引擎（如 Google 的 V8）可能会使用堆栈）；代码所在的位置取决于实现。对函数对象的引用（以及对其代码的引用）存储在`prototype`对象 on的属性中`appleClass`。这些功能只有一个，由`new namespace.appleClass`原型链创建的所有实例共享。每个实例都**没有**单独的函数副本（只是对它的单独引用），因此无需担心在实例上“清理”该函数。

**如果您在代码中的任何地方都**不再需要该函数（例如，**所有** `appleClass`实例不再需要它），您可以通过`delete namespace.appleClass.prototype.methodOne`) 摆脱它。这将从原型中删除该属性，从而释放其对函数对象的引用，从而释放其对函数代码的引用，然后所有这些都可以进行垃圾回收。但这将是非常不寻常的，并且单个函数在任何情况下都不会占用太多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T10:33:04.647

Setting a variable to `null` makes sure to break any references to objects in all browsers including circular references being made between the DOM elements and Javascript scopes. By using `delete` command we are marking objects to be cleared on the next run of the Garbage collection, but if there are multiple variables referencing the same object, deleting a single variable WILL NOT free the object, it will just remove the linkage between that variable and the object. And on the next run of the Garbage collection, only the variable will be cleaned.

# c++ - 例外允许我们分开什么？

> ID：13668249
> 
> 赞同：1
> 
> 时间：2012-12-02T10:04:12.323
> 
> 标签：c++, exception

我想知道异常允许我们分开什么？如果您可以使用 c++ 用适当的示例进行解释，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:28:34.030

异常使你的代码更干净你不需要用`if`语句来混乱你的代码，只需用`try..catch`. 因此，他们将您的代码与错误检查分开。

意图是好的，但异常也带来一些问题，比如忘记用 try..catch 包装代码。Java 使用编译器错误来防止这种情况。

我主要在需要执行许多操作的功能中使用异常，每个操作都取决于前面操作的成功。所以我让所有的动作都抛出异常。我还将它们命名为它们反映了它们抛出异常的事实。

# c++ - 如何在双向链表上执行深拷贝？

> ID：13668252
> 
> 赞同：1
> 
> 时间：2012-12-02T10:04:31.760
> 
> 标签：c++, linked-list

我很难绕过指针。我可以想象这里有人可以更直观地概念化复制构造函数。我知道您不能简单地相互分配指针（浅拷贝），但我很难实际复制对象。

这是我的代码示例：

```
class LList {
    /* stuff */

    private:
        struct node {
            node   *next;
            node   *prev;
            int    *o;
        };

        node   *first; // The pointer to the first node (NULL if none)
        node   *last;  // The pointer to the last node (NULL if none)
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:15:55.970

当您为包含动态分配`X(const T& other)`的对象（在您的情况下可能是 a ）编写复制构造函数时，您可能最终会写出这样的一行：`X``T* p``Node*`

```
p = new T(*other.p); 
```

这会创建您正在复制的对象所指向的对象的副本，从而为您提供该对象的深层副本。在您的情况下，这将导致列表的递归深度复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:11:32.903

创建一个链表的深拷贝相当于创建一个具有相同数据值的新链表。

所以，你可以

*   遍历您当前的列表
*   从每个节点中提取信息
*   将其传递给新节点（本质上是复制列表指针以外的所有内容）
*   将其添加到新列表（即深层副本）中。

在您的情况下，您需要尊重 o，提取数据，分配新块，分配数据，然后将其添加到新节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T10:15:42.850

未经测试，但这可能表达了您的部分想法。不过，我会尝试`std::list`改用 :)**您应该添加一个复制赋值运算符和一个适当分配/取消分配的析构函数**。见[这里](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

```
template<typename T>
struct ListNode {
    ListNode *next, *prev;
    T value;

    ListNode(const T &val): value(val), next(0), prev(0) {}

    // copy constructor
    ListNode(const ListNode &other): value(other.value) {
        if(other.next)
           append(new ListNode(*other.next));
    }

    void append(ListNode &n) {
        next = &n; n.prev = this;
    }
}; 
```

如果您`value`是一个指针，那么您将希望以与`next`上面复制指针成员相同的方式复制它，即：

```
 // copy constructor
    ListNode(const ListNode &other): value(new T(*other.value)) {
        if(other.next)
           append(new ListNode(*other.next));
    } 
```

因此，对于上面的示例列表，您可以尝试以下操作：

```
class LList {
    LList(): first(0), last(0) {}

    // copy constructor
    LList(const LList &other):
        first(0),
        last(0)
    {
        if(other.first) {
          first = new node(*other.first);
          // find last item
          last = first;
          while(last->next) last = last->next;
        }
    }

    ~LList() {
       if(first) delete first;
    }

    // TODO: copy assignment operator

private:
    struct node {
        node(int val): next(0), prev(0), o(new int(val)) {}
        // copy constructor
        node(const node &other): next(0), prev(0), o(*other.o)
        {
            if(other.next) {
               next = new node(*other.next);
               next->prev = this;
            }   
        }

        ~node() {
          delete o;
          if(next) delete next;
        }
        // TODO: copy assignment operator

        node   *next;
        node   *prev;
        int    *o;
    };

    node   *first; // The pointer to the first node (NULL if none)
    node   *last;  // The pointer to the last node (NULL if none)
}; 
```

未经测试，但这就是想法......构造函数通过对下一个项目进行操作来递归地工作。正如链接所解释的，“TODO”项目很重要。您可能还想研究智能指针 - 它们消除了记住删除事物的需要，提高了异常安全性，并且通常是比原始指针更安全的选择。

# asynchronous - '一个' IOLoop 如何处理 10k 连接？

> ID：13668253
> 
> 赞同：0
> 
> 时间：2012-12-02T10:04:35.450
> 
> 标签：asynchronous, nginx, tornado, event-driven

很抱歉这个愚蠢的问题，但我真的很困惑；我希望你能纠正我哪里错了。

在**基于线程的**服务器（如 Apache）中，我知道对于每个客户端，将为他创建一个新的“工人”来满足他的所有需求。

在**事件驱动**（如 Nginx 和 Tornado）中，这让我感到困惑，尤其是像**Python 的 GIL这样的****Not Thread Safe**；据我了解，只有一个循环可以处理所有客户端请求，所以据我所知，如果有 10 000 个同时连接，我不知道如何处理所有这 10 个请求！

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:58:30.433

在事件驱动的服务器中，您只需使用非阻塞调用一个接一个地处理连接（实际上是来自特定连接`read()`的 s 和s ）。`write()`您通常在连接（`select()`, `poll()`, ...）之间使用一些调用来进行多路复用，它会告诉您需要服务哪些连接，然后您依次为它们提供服务。**

# c++ - MPI_Bcast 出错

> ID：13668257
> 
> 赞同：1
> 
> 时间：2012-12-02T10:04:59.460
> 
> 标签：c++, mpi, openmp

我收到 MPI_Bcast 错误（我认为这是一个旧错误）我不确定为什么会发生这种情况。错误如下：

```
An error occurred in MPI_Bcast    
on communicator MPI_COMM_WORLD  
MPI_ERR_TRUNCATE: message truncated      
MPI_ERRORS_ARE_FATAL: your MPI job will now abort 
```

它发生的代码是：

```
for (int i = 0; i < nbProcs; i++){
    for (int j = firstLocalGrainRegion; j < lastLocalGrainRegion; j++){
        GrainRegion * grainRegion = microstructure->getGrainRegionAt(j);
        int grainSize = grainRegion->getBoxSize(nb);
        double * newValues;
        if (myId == i)
            newValues = grainRegion->getNewValues();
        else
            newValues = new double[grainSize]; 
        MPI_Bcast(newValues, grainSize, MPI_DOUBLE, i, MPI_COMM_WORLD);
        MPI_Barrier(MPI_COMM_WORLD);

        if (myId != i)
            grainRegion->setNewValues(newValues);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:36:48.787

错误有两个可能的原因。

第一个是你有一个未决的 previous `MPI_Bcast`，在外循环之前的某个地方开始，它没有完成，例如以类似于[这个问题](https://stackoverflow.com/questions/13290608/mpi-err-truncate-on-broadcast)中的方式。

第二个是可能的缓冲区大小不匹配，因为`grainRegion->getBoxSize(nb)`在不同的进程中返回不同的值。您可以使用并行调试器检查代码，或者只是在广播之前放置一条打印语句，例如：

```
int grainSize = grainRegion->getBoxSize(nb);
printf("i=%d j=%d rank=%02d grainSize=%d\n", i, j, myId, grainSize); 
```

使用这种特定的输出格式，您应该能够简单地运行输出`sort`，然后快速找到不匹配的值。由于屏障总是同步的（广播可能不必如此），不同的调用几乎不可能`MPI_Bcast`像第一种可能的情况那样相互干扰。

如果发生这种情况，您的数据结构是分布式的，并且正确的值`grainSize`实际上仅在广播根进程中可用，那么您应该首先通知其他等级正确的大小。最简单（但不是最有效）的解决方案是广播`grainSize`。更好的解决方案是首先`MPI_Allgather`在每个过程中使用颗粒区域的数量（仅在必要时）执行，然后`MPI_Allgatherv`使用每个区域的大小执行。

# matlab - matlab，错误'在这种情况下不明确，'

> ID：13668259
> 
> 赞同：-2
> 
> 时间：2012-12-02T10:05:19.990
> 
> 标签：matlab

matlab给了我这个错误

？？？错误：文件：Untitled2.m 行：70 列：19 ***（此处发布的代码的最后一行）*** 构造“iPeaksK(...end...)”在此上下文中不明确，因为无法确定“iPeaksK”可以是变量的名称，也可以是函数的名称。要使其成为变量，请分配给它；要让它在执行时成为一个函数，请将“end”替换为对所需数组的 LENGTH、SIZE 或 NUMEL 的调用。

你能告诉我错误在哪里吗？非常感谢oyu。

```
 %knee
  xk = excel(:,13);
  yk = excel(:,14);
  zk = excel(:,15);
  [peaksk, iPeaksk] = findpeaks(-yk); 
  peaksk=-peaksk;
  wantedPeaksk = peaksk < ((max(yk) + min(yk))/2); %returning 0 or 1
  peaksk = peaksk(wantedPeaksk); %now we only have the good peaks/indexes
  iPeaksk = iPeaksk(wantedPeaksk);
  figure;subplot(221); plot(iPeaksk,peaksk,'*');hold on;plot(yk)
  IPEAKSLENGTHK = zeros(1, length(iPeaksk) - 1);
  for i = 1 : length(iPeaksk) - 1
      iPeaks1k = iPeaksk(i);
      iPeaks2k = iPeaksk(i + 1) - 1;
      IPEAKSLENGTHK(i) = length(iPeaks1k:iPeaks2k);
  end

  interpxsumk = zeros(1, 100);
  interpysumk = zeros(1, 100);
  interpzsumk = zeros(1, 100);
  for i = 1 : length(iPeaksk) - 1
      iPeaks1k = iPeaksk(i);
      iPeaks2k = iPeaksk(i + 1) - 1;

      %data between each pair of peaks - not interpolated
      xPeaks12k = xk(iPeaks1k:iPeaks2k);
      yPeaks12k = yk(iPeaks1k:iPeaks2k);
      zPeaks12k = zk(iPeaks1k:iPeaks2k);

      subplot(2,2,2)
      plot3(xPeaks12k, zPeaks12k, yPeaks12k, 'r*')
      title('final data (black) // interpolated data (green) // selected data (red)', 'FontSize', fontSize);
      xlabel('x', 'FontSize', fontSize);
      ylabel('z', 'FontSize', fontSize);
      zlabel('y', 'FontSize', fontSize);
      axis equal;
      grid on;
      hold on

      %interpolate each cycle to take the average curve
    originalIndexesk = 1 : length(xPeaks12k); % same as   =linspace(1, length(xPeaks12), length(xPeaks12)) 
        interpIndexesk = linspace(1, length(xPeaks12k), 100); %creating 100 indexes from 1 to length(xPeaks12)
      interpxk = interp1(originalIndexesk, xPeaks12k, interpIndexesk, 'spline'); %find new values=interpolate->spline_best option // http://www.mathworks.com/help/matlab/ref/interp1.html
      interpyk = interp1(originalIndexesk, yPeaks12k, interpIndexesk, 'spline');
      interpzk = interp1(originalIndexesk, zPeaks12k, interpIndexesk, 'spline');
    plot3(interpxk, interpzk, interpyk, 'g*'); %cycles interpolated
    interpxsumk = interpxsumk + interpxk;
        interpysumk = interpysumk + interpyk;
      interpzsumk = interpzsumk + interpzk;
  end
  newxk = interpxsumk / (length(iPeaksk) - 1); %average x -1inicial-1final-1
  newyk = interpysumk / (length(iPeaksk) - 1);
  newzk = interpzsumk / (length(iPeaksk) - 1);

  plot3([newxk(end) newxk], [newzk(end) newzk], [newyk(end) newyk], 'k-', 'LineWidth', 5); %close to plot

  %param
  zzwalkingtimeK=(t(iPeaksK(end))-t(iPeaksK(1))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:10:00.690

问题似乎是不同大小写的混合，`iPeaksK`并且`iPeasksk`end 的使用使 Matlab 误以为 iPeaksK 是一个实际函数。我建议解决两个大写之一并修复所有其他大写。

# c# - 在我的网站上使用 partial 在 C# MVC3 上显示主幻灯片

> ID：13668260
> 
> 赞同：-3
> 
> 时间：2012-12-02T10:05:36.033
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想在我的网络上使用部分显示主幻灯片，但是当我使用部分时，我不断出错。请帮帮我。这是我的一些代码：在控制器上

```
DataClasses1DataContext db = new DataClasses1DataContext();
    public ActionResult TestSnew()
    {
        var snew = db.Snews;
        return PartialView(snew);
    } 
```

在视图中

```
@model Jiremsenmn.Models.Snew
Some Html code to shown 
```

布局上

```
@Html.Partial("TestSnew") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:09:02.380

当您的视图只需要一个 Snew 时，您正在发送一个 Snews 模型（复数）。

试试这个：

```
var snew = db.Snews.FirstOrDefault(); 
```

当您处于视图的上下文中时，您应该准备好显示您的信息。

在从数据库中检索并将其发送到视图时，您在第一个示例 PartialView(snew) 中做到了这一点。

但是在您的第二个示例中，您已经在视图中，所以在这里您必须创建您的 Snew 对象，所以让我们假设 Snew 类很简单并且它有两个属性，例如：

```
public class Snew {
  public String Title { get; set;}
  public String Description { get; set;}
} 
```

So within the context of your View, you have to populate the object yourself to send it to HtmlPartial, something like this:

```
 @{
   var mySnew = new Snew { Title="Title created dynamically", Description="something else"};

  //now that you have the model (the Snew), you can use Partial

  Html.Partial("SnewTest",mySnew);
 } 
```

***NOTE*** make sure you reference the Snew class correctly with the using statement in your view

hope it helps,

# sproutcore - 我应该如何绑定值以使 CustomItemView 中的 labelView 显示 listController 中的文本信息？

> ID：13668261
> 
> 赞同：1
> 
> 时间：2012-12-02T10:05:38.213
> 
> 标签：sproutcore

我尝试在 listView 中设计一个自定义视图。代码如下所示：

```
Myapp.listView=SC.ScrollView.design({
  layout: { centerX: 0, width:100, top: 70, bottom:36},
  contentView: SC.ListView.design({
    contentBinding: SC.Binding.oneWay('Myapp.listController'),
    rowHeight: 36,
    exampleView:Myapp.CustomItemView.design({

         })

  })
});

MyApp.CustomItemView = SC.View.design({
          childViews:['imageView','labelView'],

          imageView: ....,
          labelView:SC.LabelView.design({

   })

}); 
```

我的问题是：我应该如何绑定值以使 CustomItemView 中的 labelView 显示 listController 中的文本信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:03:06.443

谢谢你的回答。

昨天玩的时候，我最终得到了这个解决方案。

我做了一个通用视图，它依赖于两个属性（libelle = 静态文本，valeur = 动态文本）。然后我可以使用相同的模式创建多个视图，并在所有实例中更改“valeurBinding”属性。无论如何，我不确定破解渲染功能是做事的好方法，但它目前有效。

```
MyFrameWork.LabelDataView = SC.View.extend
({
  libelle: '',
  valeur: '',
  render: function(context, firstTime) {

    context = context.begin('span').addClass('ldv-label').push(this.get('libelle') + ': ').end();
    context = context.begin('span').addClass('ldv-value').push(this.get('valeur')).end();

    sc_super();
  } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:52:33.050

就像 Ramesh 说的，你的 customItemView 应该是这样的：

```
MyApp.CustomItemView = SC.View.design({
  childViews:['imageView','labelView'],

  imageView: ...
  labelView: SC.LabelView.design({
    valueBinding: ".parentView.content.textInfo"
  }) 
```

# ruby-on-rails - 在 Rails 中弃用整个模型

> ID：13668262
> 
> 赞同：5
> 
> 时间：2012-12-02T10:05:43.723
> 
> 标签：ruby-on-rails, class, model, deprecated

我正在为从 Rails 2.x 到 3.x 的客户端重写/重构遗留应用程序。作为重构的一部分，我还想从我们当地语言的模型/方法转向纯英文代码库。

这涉及为几乎每个功能编写新方法。我通过以下方法解决了这个问题：

```
def english_method
  # ...
end

def native_method
  warn 'DEPRECATED, please use #english_method'
  english_method
end 
```

这适用于方法，并帮助我跟踪仍在使用旧方法的地方，而不会破坏任何代码。

然而，对于类（模型），我一直在做：

```
class NativeClass < EnglishClass
  # DEPRECATED, Please use EnglishClass
end

class EnglishClass
  # ...
end 
```

这个“有效”，无论何时`NativeClass`调用，应用程序都会继续工作，但我在日志中没有收到任何消息，通知我应用程序的一部分仍在调用`NativeClass`.

如何确保每次“触摸”`NativeClass`实际上都会导致写入日志错误？

我尝试（除了认为“也许这行得通”之外没有其他原因）这样做：

```
class NativeClass < EnglishClass
  -> { ActiveSupport::Deprecation.warn 'Native model is deprecated in favor of English' }
end 
```

但这（显然？）没有用。我认为每次`NativeClass`调用 lambda 都会延迟加载，但我对 lambdas 的理解仍然有些浅薄，所以我可能会在这里弄错。

关于如何弃用整个类并在我的日志被触摸时向我的日志发送警告消息的任何线索？

欢迎其他“最佳实践”和/或弃用解决方案，但我不确定这是否是 SO 的有效问题（我不想冒着因这个问题而关闭该主题的风险）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:21:54.807

尝试像这样使用：

```
class NativeClass < EnglishClass
  def initialize
    ActiveSupport::Deprecation.warn "NativeClass is deprecated and may be removed from future releases, use EnglishClass instead.", caller
    super
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T16:21:30.967

您最好单独弃用每种方法。这可以通过使用 Rails 的 deprecate 方法并传递给它您要弃用的方法列表来轻松完成。类中定义的方法列表可通过将 false 传递给`public_instance_methods`

```
class NativeClass < EnglishClass
  def method1
  end

  def method2
  end

  deprecate *public_instance_methods(false)
end 
```

请注意，它需要在最后一个公共方法之后声明。

# security - 如何从防火墙中排除路由？（或避免使用会话 cookie）

> ID：13668264
> 
> 赞同：7
> 
> 时间：2012-12-02T10:05:51.440
> 
> 标签：security, symfony, symfony-2.1

我有这个防火墙，其中包括以 /user 或 /admin 开头的任何内容。

```
firewalls:
    main:
        pattern: ^/(user|admin) 
```

但现在我需要排除`/user/profile/{user_id}`. 这可以用正则表达式完成吗？现在，如果它排除以 /user/profile 开头的任何内容就可以了，如果这样更容易的话。

Symfony2 是否提供了其他机制来排除路由？

**编辑**

我需要**完全排除**上述路由以避免发送会话 cookie；允许匿名访问`access_control`是不够的。如果您知道阻止该 cookie 的方法，它也可以是一个解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-02T16:21:09.663

我没有测试这段代码，但这个正则表达式应该可以工作：

```
firewalls:
    main:
        pattern: ^/(user|admin)(?!/profile) 
```

# python - 使用 cgi-python 脚本设置 cookie

> ID：13668265
> 
> 赞同：0
> 
> 时间：2012-12-02T10:05:56.297
> 
> 标签：python, cgi, setcookie

我正在尝试使用 set-cookie 标头从服务器响应

我的cgi脚本开始如下

```
#!/usr/bin/env python

import json
from collections import defaultdict
import cgi
import cgitb; cgitb.enable()  # for troubleshooting
from MySQL import sql

form = cgi.FieldStorage()
mode = form.getvalue('mode')

print """Content-type: text/html\r\n"""
print """Set-Cookie: name=12345\r\n\r\n""" 
```

但是，当在我的 Chrome 上检查来自服务器的响应时，调试器不会在响应部分显示任何 set-cookie 标头，并且 set-cookie 标头作为文本的一部分打印在响应部分中，与内容类型标题...

知道我做错了什么吗？

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:17:54.960

问题是您将两个换行符而不是一个附加到“Content-Type”标头的末尾，这是 HTTP 标头和正文之间的标准分隔符。

您应该改为`\r\n`在每个标头值的末尾发出（而不是`\n\n`）

当您完成发送标头后，您应该额外打印一个`\r\n`以开始您的消息正文。

编辑：此外，您应该在`sys.stdout.write(...)`打印语句中使用或附加逗号，以避免插入隐式换行符。例如，

`print "Header: Value\r\n",`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T14:09:00.857

您应该在 Content-type:text/html 行之前打印 Set-Cookie 行。

# c# - 将 char * 参数传递给 C# 函数

> ID：13668266
> 
> 赞同：2
> 
> 时间：2012-12-02T10:06:11.820
> 
> 标签：c#, c++, dll

C++ win32dll1.dll：

```
extern "C" __declspec(dllexport) int getSerialNumber(char* outs)
{
    char s[2];
    s[0]='0';
    s[1]='1';

    for(int i=0; i < 2; ++i){
        outs[i] = s[i];
    }
    return 1;
} 
```

C＃：

```
[DllImport("win32dll1.dll")]
public unsafe static extern int getSerialNumber(char* ss); 
```

无法传入`s`函数

```
char[] s = new char[2];
getSerialNumber(s); 
```

这不应该工作吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:09:26.857

您可能应该`StringBuilder`在声明中使用：

```
[DllImport("win32dll1.dll")]
public unsafe static extern int getSerialNumber(StringBuilder s); 
```

CLR 会自动将其转换为 C++ `char*`，调用函数，然后将结果转换回并将其存储在`StringBuider`.

用这样的方式调用它：

```
var sb = new StringBuilder(2);
getSerialNumber(sb); 
```

数字指定字符的初始容量。在这个例子中，它只有 2 个字符；如果 C++ 代码写的更多，您的应用程序将崩溃。

# browser - 检查元素时如何在窗口/控制台中打开所有节点和对象？

> ID：13668270
> 
> 赞同：1
> 
> 时间：2012-12-02T10:06:58.327
> 
> 标签：browser, firebug, opera, development-environment, google-chrome-devtools

1) 我需要在 Google Chrome Developer (devtools) 中一次打开所有节点。例如，在图片上你可以看到`<body>`并`<div id="mngb">`打开，但`<head>`不是 [https://developers.google.com/chrome/mobile/images/Desktop2.png](https://developers.google.com/chrome/mobile/images/Desktop2.png)

2）此外，我需要在控制台中打开所有对象。例如，当我输入 console.log(object); 这是一个问题：当我在控制台中按 Search 时，**它只通过打开的对象进行搜索**。

顺便说一句，我在其他浏览器（Opera、Firebug）中注意到了这样的问题。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:21:26.827

Opera Dragonfly 有一个扩展整个 DOM 树的按钮，但我在 Chrome 中找不到任何此类功能。

您可以使用`console.dir(obj)`Opera Dragonfly 来显示展开的对象，但它只会展开第一层。但是，当您使用此功能时，Chrome 不会扩展对象。

# c# - 在asp.net，jquery中创建stackoverflow类型的文本框

> ID：13668274
> 
> 赞同：2
> 
> 时间：2012-12-02T10:08:15.943
> 
> 标签：c#, javascript, jquery, asp.net

我正在尝试构建类似于 stackoverflow 的控件。在选择标签时，应显示自动完成建议，并在选择文本框时填充所选标签，我也应该能够从文本框中删除标签。

你能推荐一些我可以集成和使用的免费/付费库/组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:11:44.033

添加标签的优秀插件：

*   （[演示](http://aehlke.github.com/tag-it/examples.html)）[https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it)

    > 一个 jQuery UI 插件，用于处理多标签字段以及标签建议/自动完成。

其他：

1.  （[演示](http://tagedit.webwork-albrecht.de/playground.html)）[https://github.com/webworka/Tagedit](https://github.com/webworka/Tagedit)
2.  （[演示](http://xoxco.com/projects/code/tagsinput/)）[https://github.com/xoxco/jQuery-Tags-Input](https://github.com/xoxco/jQuery-Tags-Input)
3.  （[演示](http://documentcloud.github.com/visualsearch/#demo)）[https://github.com/documentcloud/visualsearch/](https://github.com/documentcloud/visualsearch/)
4.  （[演示](http://xoxco.com/projects/code/tagsinput/)）[http://ioncache.github.com/Tag-Handler/](http://ioncache.github.com/Tag-Handler/)
5.  （[演示](http://blog.crazybeavers.se/wp-content/Demos/jquery.tag.editor/)）[http://archive.plugins.jquery.com/project/jQueryTagEditor](http://archive.plugins.jquery.com/project/jQueryTagEditor)
6.  （[演示](http://webspirited.com/tagit/)）[http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/)
7.  （[演示](http://textextjs.com/)）[http://textextjs.com/](http://textextjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:27:01.467

我猜你可以使用[Chosen](http://harvesthq.github.com/chosen/)，JQuery 插件。

[你可以在这里](https://github.com/harvesthq/chosen/)下载插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:13:05.213

我用过的最好的插件，它非常简单。选择主题的许多选项也

([演示](http://loopj.com/jquery-tokeninput/demo.html)) [Jquery Tokeninput](http://loopj.com/jquery-tokeninput/)

# java - 带有 HTML 前端的独立 Java 应用程序

> ID：13668277
> 
> 赞同：0
> 
> 时间：2012-12-02T10:08:31.867
> 
> 标签：java, javascript, html

我想开发一个独立的 java 应用程序，以 web 浏览器作为前端。此应用程序将在本地运行，并且不会进行任何远程服务器调用。我本质上是在使用 java，因为 web 浏览器无法执行文件操作。

我希望这个应用程序是可移植的：不需要安装。只需复制一个文件夹就足够了。我想知道它是如何完成的，javascript 将如何与 java 代码通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:15:05.503

您不需要本地 Web 服务器。使用 JavaFX（嵌入式 webkit）并为“myprotocol”实现一个 URL 协议处理程序。然后您可以使用 myprotocol://xxx.yyy.zzz 从浏览器访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:16:05.037

继续@Quentin的回答。

是的，您需要网络服务器。

有两种主要架构：

*   使用嵌入式 Web 服务器创建独立应用程序
*   创建普通的 Web 应用程序并在专有 Web 服务器上运行它。

恕我直言，我认为第二种方法更好，但是它在很大程度上取决于您的应用程序功能。

您可以将 jetty 或 grizzly 作为 Web 容器。两者都可以在嵌入式或独立模式下运行。如果您需要有关您的应用程序设计的具体建议，欢迎您与社区分享您的应用程序的其他详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:16:20.963

根据需要编写一个小型 Web 应用程序并使用[Jetty](http://docs.codehaus.org/display/JETTY/Downloading+Jetty)进行部署。Jetty 是一个纯基于 Java 的 HTTP 服务器和 Java Servlet 容器。您也可以通过嵌入式模式使用它。

[如果您使用Jetty-Runner](http://wiki.eclipse.org/Jetty/Howto/Using_Jetty_Runner)，部署非常简单

```
java -jar jetty-runner.jar my.war 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T10:10:03.050

该应用程序需要实现一个 HTTP 服务器。然后所有的通信都将通过 HTTP 完成。

# actionscript-3 - 基于碰撞的弹跳

> ID：13668287
> 
> 赞同：0
> 
> 时间：2012-12-02T10:10:07.553
> 
> 标签：actionscript-3, collision-detection, bounce

我在舞台中央放置了一个大球，“centerBall”。然后我添加了一堆较小的，给它们随机的大小和速度。这些将使用基本的运动代码移动并从墙上反弹。在每一帧上，在每个移动球和中心球之间进行基于距离的碰撞检查。如果发生碰撞，我会根据两个球之间的角度和最小距离计算出偏移弹簧目标。还有一个问题：一些较小的球绕过“centerBall”边界然后反弹。您可以在附图中看到。为什么会这样？这是代码：

```
import flash.display.Sprite;
import flash.events.Event;

public class Bubbles extends Sprite
{
    private var balls:Array;
    private var numBalls:Number = 10;
    private var centerBall:Ball;
    private var bounce:Number = -1;
    private var spring:Number = 0.2;

    public function Bubbles()
    {
        init();
    }

    private function init():void
    {
        balls = new Array();
        centerBall = new Ball(100, 0xcccccc);
        addChild(centerBall);
        centerBall.x = stage.stageWidth / 2;
        centerBall.y = stage.stageHeight / 2;

        for(var i:uint = 0; i < numBalls; i++)
        {
            var ball:Ball = new Ball(Math.random() * 40 + 5, Math.random() * 0xffffff);
            ball.x = Math.random() * stage.stageWidth;
            ball.y = Math.random() * stage.stageHeight;
            ball.vx = Math.random() * 6 - 3;
            ball.vy = Math.random() * 6 - 3;
            addChild(ball);
            balls.push(ball);
        }

        addEventListener(Event.ENTER_FRAME, onEnterFrame);          
    }

    private function onEnterFrame(event:Event):void
    {
        for(var i:uint = 0; i < numBalls; i++)
        {
            var ball:Ball = balls[i];
            move(ball);
            var dx:Number = ball.x - centerBall.x;
            var dy:Number = ball.y - centerBall.y;
            var dist:Number = Math.sqrt(dx * dx + dy * dy);
            var minDist:Number = ball.radius + centerBall.radius;
            if(dist < minDist)
            {
                var angle:Number = Math.atan2(dy, dx);
                var targetX:Number = centerBall.x + Math.cos(angle) * minDist;
                var targetY:Number = centerBall.y + Math.sin(angle) * minDist;
                ball.vx += (targetX - ball.x) * spring;
                ball.vy += (targetY - ball.y) * spring;
            }
        }
    }

    private function move(ball:Ball):void
    {
        ball.x += ball.vx;
        ball.y += ball.vy;
        if(ball.x + ball.radius > stage.stageWidth)
        {
            ball.x = stage.stageWidth - ball.radius;
            ball.vx *= bounce;
        }
        else if(ball.x - ball.radius < 0)
        {
            ball.x = ball.radius;
            ball.vx *= bounce;
        }
        if(ball.y + ball.radius > stage.stageHeight)
        {
            ball.y = stage.stageHeight - ball.radius;
            ball.vy *= bounce;
        }
        else if(ball.y - ball.radius < 0)
        {
            ball.y = ball.radius;
            ball.vy *= bounce;
        }
    }
} 
```

[点击这里查看图片](http://imageshack.us/photo/my-images/14/screenshotazp.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:36:02.520

您遇到的问题是您正在根据它们的帧而不是位置进行碰撞检测。

您需要检查它现在的位置和上一帧的位置，以便跟踪它的移动。这就是为什么它会穿过你的中心球，因为你检查当前帧是否有碰撞。

这是基于时间的圆碰撞检测的链接。

[基于时间的碰撞](http://twobitcoder.blogspot.ca/2010/04/circle-collision-detection.html)

希望这可以帮助 ; )

# html - 2012 html 电子邮件 - 表格、div 和 @media

> ID：13668288
> 
> 赞同：1
> 
> 时间：2012-12-02T10:10:25.290
> 
> 标签：html, css, responsive-design, html-email

html电子邮件的当前趋势是什么？

查看响应式设计 html 电子邮件，我在campaignmonitor 上看到了[这篇](http://www.campaignmonitor.com/guides/mobile/responsive/)文章。

它似乎在样式块中混合了 css @media 查询和其他 css，而不是内联样式，以及老式的表格布局。

当然，如果电子邮件客户端能够处理 css，它知道如何处理 div 吗？还是该表只是那些仍然不能的人的后备？而媒体查询和阻止 css 对那些这样做的人来说是额外的甜蜜吗？

我意识到电子邮件客户端的变化不如网络浏览器那么快，但表格仍然是最好的前进方式吗？

我敢肯定这个问题之前已经被问过很多次了，但我正在寻找现代趋势。

也许这应该是另一个问题，但我也注意到这篇文章混合了 element.class 和 element[class="classname"] 声明——最后一个我以前只与 input[type="value"] 一起使用过。为什么类的方括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:27:48.130

最近我的公司正在改变他们的电子邮件布局。首先，我们决定测试不同电子邮件客户端与最新 html/css 标准的兼容性。然而，在编码过程中，我们遇到了许多正确渲染的问题，迫使我们转回`table`基于 - 的布局。

我们还`@media-queries`为能够理解它们的客户使用了更复杂的样式，但不幸`tables`的是，如果您想支持流行的邮件客户端，这仍然是可行的方法。很遗憾，有这么多商业客户使用旧的 Outlook 或类似的。

工作完成后，我们正在使用[Campaign Monitor Tester](http://www.campaignmonitor.com/testing/)测试我们的布局，但这还不够，因此我们不得不手动测试许多客户端。

总结：如果我现在要编写电子邮件布局，我会选择表格和内联样式。

编辑：括号符号是正确的，但我不明白这一点。此外，在此示例中，它将仅匹配具有一个名为 的类的元素`classname`。它不会匹配`<p class="classname othername">`。如果这里没有其他使用它的论据，我会使用标准的点表示法 ( `.classname`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:57:36.153

应该注意的是，您需要内联所有 css 以获得最大的兼容性。Campaignmonitor 有一个工具可以自动为您内联，因此在阅读他们的建议时请记住这一点。

需要内联css的原因是因为像gmail这样的基于Web的客户端和（我认为也是）雅虎剥离了样式声明（以及body标签之外的所有内容）以确保它不会弄乱他们的网页。媒体查询不能内联，因此即使制作响应式电子邮件是当前的趋势，请注意它们在 gmail 中不起作用。

仍然在表格中工作，因为不同的电子邮件客户端存在不一致，特别是它们如何处理不同的 css 属性。电子邮件“停留在过去”的主要原因之一是 Outlook 使用 MS Word 渲染引擎。Outlook 仍然是最受欢迎的电子邮件客户端，尤其是 B2B。

希望信息有所帮助！

# c++ - C 和 C++ 中的简单回显客户端-服务器

> ID：13668294
> 
> 赞同：2
> 
> 时间：2012-12-02T10:11:06.350
> 
> 标签：c++, c, multithreading, client-server

我想使用命名管道编写一个回显客户端-服务器应用程序（我用套接字做了它，它工作，但现在我想用命名管道做同样的事情。）服务器必须是多线程的。

当我第一次运行它们时，我认为我的程序可以正常工作，一切都很好。每个连接到服务器的客户端都从它那里收到一条消息。

但是现在，当我第二次尝试运行程序时，我仍然收到以下消息：

```
mkfifo client2server: File exists 
```

（许多这样的消息）。这是我尝试运行 ./echoserver 时的输出：

```
$ ./echoserver 
Server is working ...
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists
mkfifo client2server: File exists 
```

如何修复它以使其按我的意愿工作？制作一个真正的多线程回显服务器-客户端应用程序？

这是我的代码：

**回声服务器.cpp**

```
#include <fcntl.h>
#include <stdio.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <string>
#include <sstream>
using namespace std;

string toString(int d)
{
    ostringstream ss;
    ss << d;
    return ss.str();
}

void* clients_service(void * arg)
{
    int client_id = *((int*)&arg), server2client = -1, buffsize = 255, bytes_read = -1, client2server = -1;
    client_id++;
    char buffer[255];
    string fifoname = "/tmp/server2client";
    fifoname += toString(client_id);

    string fifoclient = "/tmp/client2server";
    fifoclient += toString(client_id);

    if(mkfifo(fifoclient.c_str(), 0666) == -1)
    {
        perror("mkfifo client2server");
        fprintf(stderr, "%s\n", strerror(errno));
        exit(1);
    }

    if((client2server = open(fifoclient.c_str(), O_RDONLY)) == -1)
    {
        perror("open client2server");
        exit(1);
    }

    if(mkfifo(fifoname.c_str(), 0666) == -1)
    {
        perror("mkfifo server2client");
        exit(1);
    }
    if((server2client = open(fifoname.c_str(), O_WRONLY)) == -1)
    {
        perror("open server2client");
        exit(1);
    }

    for(;;)
{

     if ((bytes_read = read(client2server, buffer, buffsize))== -1)
        {
            perror("read");
            exit(1);
        }
        else if (bytes_read == 0)
        {
            fprintf(stdout, "Connection closed\n");
            break;
        }
        buffer[bytes_read] = '\0';

      if (strcmp("\\q",buffer)==0)
      {
         fprintf(stdout, "Server OFF.\n");
         break;
      }

      fprintf(stdout, "From client: %s\n", buffer);
      if ((write(server2client,buffer, strlen(buffer)))== -1)
      {
          perror("write");
          break;
      }

      fprintf(stdout, "Send to client: %s\n", buffer);

      // clean buffer from any data
      memset(buffer, 0, sizeof(buffer));
}

close(client2server);
   close(server2client);

   unlink(fifoname.c_str());
   unlink(fifoclient.c_str());

}

int main(int argc, char **argv)
{
    int clientsCounter = 0;
    fprintf(stdout, "Server is working ...\n");

    while (1)
    {
        pthread_t thread;
        pthread_create(&thread, NULL, clients_service, (void*)&clientsCounter);
    }

    return 0;
} 
```

像这样编译它：`g++ -Wall -pthread echoserver.cpp -o echoserver`

**回声客户端.c**

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
   int client_to_server;
   char *myfifo = "/tmp/client2server";

   int server_to_client;
   char *myfifo2 = "/tmp/server2client";

   char str[255];

   /* write str to the FIFO */
   client_to_server = open(myfifo, O_WRONLY);
   server_to_client = open(myfifo2, O_RDONLY);
   while(1)
   {
       printf("\n> ");
   scanf("%s", str);
   write(client_to_server, str, sizeof(str));
   read(server_to_client,str,sizeof(str));
   printf("From server: %s\n",str);
   }

   close(client_to_server);
   close(server_to_client);

   /* remove the FIFO */
   unlink("/tmp/server2client");
   unlink("/tmp/client2server");

   return 0;
} 
```

像这样编译它：`gcc echoclient.c -o echoclient`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:29:03.077

要设置多个连接，您需要一个连接的多个独立实例。连接的实例由 fifo 表示，该 fifo 将自身表示为文件系统中的命名条目。

为了区分连接通道的这些实例，它们的标识名称需要不同。在您的代码中，它们不是。每个 cleint 使用相同的 fifos 与 server 和 verse vica 通信。

更改您的代码以使每个客户端的 fifos 文件系统条目的名称不同。

想想它是如何使用套接字工作的：

*   服务器端有**一个**监听套接字接受**所有**客户端连接。
*   作为接受连接的结果，为**一个特定的客户端设置****了一个特定的套接字**（允许双工通信）。

 **要使用 fifos 替换它，需要：

*   **监听插座的一种**替代品
*   **替换为**每个客户端连接服务的每个套接字。**

# jsp - 如何将jsp中的不同链接映射到扩展多动作控制器的控制器中的方法

> ID：13668300
> 
> 赞同：0
> 
> 时间：2012-12-02T10:11:41.890
> 
> 标签：jsp, spring-mvc

我正在使用 spring 和 jsp。在我的 jsp 中，我正在使用 1 个按钮和 2 个链接。通过单击按钮和链接，它将执行一些功能并保持在同一页面中。所以我使用扩展了 multiactioncontroller 的单个控制器。我完成了 url映射为

```
 <bean id="urlMapping"    class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
<props>                 
<prop key="/adminhomepage.htm">adminHomePageController</prop>
</props>
</property>
</bean> 
```

现在我需要将不同的方法映射到jsp页面中的按钮和链接以执行不同的操作。有人帮我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:29:37.083

您可以使用 javascript 之类的，

```
<input type="button" id="button1" onclick="doOnButtonClick();"> 
```

对于链接，

```
<a href="javascript:onLinkClick();">
<script>
function doOnButtonClick(){
document.yourFormName.action="youActionUrl?params";
document.yourFormName.submit();
}

function onLinkClick(){
document.yourFormName.action="youActionUrl?params";
document.yourFormName.submit();
}
<script> 
```

这是我从您的需求中猜测的，您可以使用注释来相应地执行不同的操作。如果您提供 jsp 和控制器的源代码，将会很有帮助。

# c# - 从 dll 到 winform 应用程序的通知

> ID：13668303
> 
> 赞同：-1
> 
> 时间：2012-12-02T10:12:21.133
> 
> 标签：c#, winforms, wcf

我创建了一个 C# 项目，并在另一个 Winform 应用程序中使用它的 dll 作为参考，并调用 dll 项目中存在的函数。

我有一个要求，我必须从那个 dll 调用一个 winform 的函数。有什么办法可以将函数注册到我的 dll 中？或者在某些情况下，我能够以任何其他方式从 dll 通知 winform 应用程序？

我只想从 dll 向 winform 应用程序发送一种通知。

我将使用 WCF 来结束 dll 项目。（有什么帮助吗？）

想法/代码示例将很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:17:27.463

c# 用于此目的的机制称为**[事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)**。

您将在您的 dll 项目中定义此事件。您的 Winforms 项目将**注册**到此事件，并且每次从 dll 触发事件时，它将运行一个方法。

# php - PHP时间戳直到“几小时前”麻烦

> ID：13668311
> 
> 赞同：1
> 
> 时间：2012-12-02T10:13:38.157
> 
> 标签：php, timestamp

我需要确定我们网站上发布的评论的“时间前”时间戳。我的老板希望它只显示几个小时。所以它应该显示“48 小时前”而不是“2 天前”或 480 小时而不是“20 天前”。

这是我找到的代码，但直到几个小时我才知道该怎么做。

```
 date_default_timezone_set('Asia/Taipei');
 class Cokidoo_DateTime extends DateTime {

    protected $strings = array(
        'y' => array('1 year ago', '%d years ago'),
        'm' => array('1 month ago', '%d months ago'),
        'd' => array('1 day ago', '%d days ago'),
        'h' => array('1 hour ago', '%d hours ago'),
        'i' => array('1 minute ago', '%d minutes ago'),
        's' => array('now', '%d secons ago'),
    );

    /**
     * Returns the difference from the current time in the format X time ago
     * @return string
     */
    public function __toString() {
        $now = new DateTime('now');
        $diff = $this->diff($now);

        foreach($this->strings as $key => $value){
            if( ($text = $this->getDiffText($key, $diff)) ){
                return $text;
            }
        }
        return '';
     }

    /**
     * Try to construct the time diff text with the specified interval key
     * @param string $intervalKey A value of: [y,m,d,h,i,s]
     * @param DateInterval $diff
     * @return string|null
     */
     protected function getDiffText($intervalKey, $diff){
        $pluralKey = 1;
        $value = $diff->$intervalKey;
        if($value > 0){
        if($value < 2){
            $pluralKey = 0;
            }
            return sprintf($this->strings[$intervalKey][$pluralKey], $value);
        }
        return null;
    }
 }
echo $date = new Cokidoo_Datetime('2012-11-28 0:59:44'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:23:22.133

如果您有发布日期的时间戳，则它（或可以）表示为 int

```
$now = time();  //current Unix timestamp  in seconds
$hours = ceil(($now - $posted_time)/3600) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:23:28.473

在 __toString() 修改上面代码的简单方法中，将 foreach 块替换为：

```
$hours = $diff->format('h');
return $hours > 1 ? $hours . ' hour ago' : $hours . ' hours ago'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:24:54.057

**工作示例：**您的班级修改为仅返回小时差。

```
<?php
class Cokidoo_DateTime extends DateTime {
    public function __toString() {
        $now = new DateTime('now');
        $diff = $this->diff($now);        
        return $this->getHours($diff);
     }

     function getHours($diff) {
        $hours =  ($diff->d * 24) + $diff->h; 
        return (string)$hours;
     }
 }
echo $date = new Cokidoo_Datetime('2012-11-28 0:59:44');
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T10:25:13.893

```
'd' => array('24 hours ago', '%d hours ago'),

protected function getDiffText($intervalKey, $diff){
        $pluralKey = 1;
        $value = $diff->$intervalKey;
        if($value > 0){
        if($value < 2){
            $pluralKey = 0;
            }
            if($intervalKey == "d")
            {
            return sprintf($this->strings[$intervalKey][$pluralKey], $value*24);
            }
            return sprintf($this->strings[$intervalKey][$pluralKey], $value);
        }
    return null;
} 
```

}

# python - show2() 方法不会显示子类

> ID：13668313
> 
> 赞同：2
> 
> 时间：2012-12-02T10:14:13.020
> 
> 标签：python, scapy

我在 scapy 中实现 GTPv2。当前定义如下：

```
class _GTPv2IE_HDR(Packet):
    fields_desc = [ ByteEnumField("type", None, gtpv2_ie_types),
                    ShortField("length", None),
                    BitField("spare", 0, 4),
                    BitField("instance", 0, 4) ]

class GTPv2IE(Packet):
    name = "GTPv2 Information Element"
    fields_desc = [ _GTPv2IE_HDR ]

    def extract_padding(self, p):
        return "", p

    def post_build(self, p, pay):
        if self.length is None:
            l = len(p) - 4
            p = p[:1] + struct.pack("!H", l) + p[3:]
        return p + pay 
```

正如你所见，GTPv2IE 是信息元素的基类（类似于 ipv6 中的 ext 标头）。

这是我定义 IE 的方式：

```
class GTPv2IE_Recovery(GTPv2IE):
    name = "GTPv2 Recovery IE"
    type = 3
    fields_desc = [ _GTPv2IE_HDR,
                    ByteField("recovery", None) ]
    def post_build(self, p, pay):
        if self.recovery is None:
            rec = random.getrandbits(8)
            p = p[:4] + struct.pack("B", rec)
        return GTPv2IE.post_build(self, p, pay) 
```

现在 GTPv2 数据包本身在 fields_desc 列表的末尾具有以下字段：

```
PacketListField("info_elements", [], GTPv2IE, length_from=lambda p:p.length-4-(4 if p.flags & 0x8 != 0 else 0))) 
```

问题是当我创建 GTPv2 数据包时：

```
pkt = IP(dst='2.2.2.2') / UDP() / GTPv2(info_elements=[GTPv2IE_Recovery()]) 
```

并调用 show2() 我得到：

```
###[ IP ]###
  version= 4L
  ihl= 5L
  tos= 0x0
  len= 41
  id= 1
  flags= 
  frag= 0L
  ttl= 64
  proto= udp
  chksum= 0x7465
  src= 1.1.1.90
  dst= 2.2.2.2
  \options\
###[ UDP ]###
     sport= 2123
     dport= 2123
     len= 21
     chksum= 0xc380
###[ GTPv2 ]###
        version= 2L
        flags= 
        type= echo_request
        length= 9
        sequence= 0x3a444d
        spare2= 0
        \info_elements\
         |###[ GTPv2 Information Element ]###
         |  type= recovery
         |  length= 1
         |  spare= 0L
         |  instance= 0L
         |###[ GTPv2 Information Element ]###
         |  type= 90
         |  length= None
         |  spare= 0
         |  instance= 0 
```

show() 方法按预期工作：

```
###[ IP ]###
  version= 4
  ihl= None
  tos= 0x0
  len= None
  id= 1
  flags= 
  frag= 0
  ttl= 64
  proto= udp
  chksum= None
  src= 1.1.1.90
  dst= 2.2.2.2
  \options\
###[ UDP ]###
     sport= 2123
     dport= 2123
     len= None
     chksum= None
###[ GTPv2 ]###
        version= 2
        flags= 
        type= echo_request
        length= None
        sequence= None
        spare2= 0
        \info_elements\
         |###[ GTPv2 Recovery IE ]###
         |  type= recovery
         |  length= None
         |  spare= 0
         |  instance= 0
         |  recovery= None 
```

谢谢你们的帮助。

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:50:30.607

我已经完成了这个工作（以 IPOption 为例）：

我向 GTPv2IE 基类添加了 2 个类方法，如下所示：

```
registered_info_elements = {}
@classmethod
def register_variant(cls):
    cls.registered_info_elements[cls.type.default] = cls
@classmethod
def dispatch_hook(cls, pkt=None, *args, **kargs):
    if pkt:
        t = ord(pkt[0])
        return cls.registered_info_elements.get(t, cls)
    return cls 
```

现在 show2() 按预期工作：

```
>>> pkt.show2()
###[ IP ]###
  version= 4L
  ihl= 5L
  tos= 0x0
  len= 46
  id= 1
  flags= 
  frag= 0L
  ttl= 64
  proto= udp
  chksum= 0x7607
  src= 1.1.1.90
  dst= 1.1.1.92
  \options\
###[ UDP ]###
     sport= 2123
     dport= 2123
     len= 26
     chksum= 0x52da
###[ GTPv2 ]###
        version= 2L
        flags= 
        type= echo_request
        length= 14
        sequence= 0x8ce2a1
        spare2= 0
        \info_elements\
         |###[ GTPv2 Recovery IE ]###
         |  type= recovery
         |  length= 1
         |  spare= 0L
         |  instance= 0L
         |  recovery= 37
         |###[ GTPv2 Sending Node Features IE ]###
         |  type= node_features
         |  length= 1
         |  spare= 0L
         |  instance= 0L
         |  node_features= PRN+MABR+NTSR 
```

# lambda - 需要闭包或 lambda 的示例

> ID：13668320
> 
> 赞同：8
> 
> 时间：2012-12-02T10:15:33.423
> 
> 标签：lambda, closures, computer-science, terminology

我花了一个小时阅读这个网站上的许多帖子以及其他关于 lambda 和闭包的帖子。我想我理解它们是*什么*，即它们是*如何*工作的，但我不明白它们*为什么*存在。我看到的许多例子都含糊地提到了它们的“力量”，但在每一种情况下，我都能想到一种更简单的方法来完成所说明的事情。也许这是由于示例故意过于简单（为了便于理解），或者我可能很密集。但我真正想要的是看到一个清晰的例子，说明你可以用闭包或 lambda 来完成你**做不到的事情**无一完成。也许这是一个很复杂的问题，因为所有编程范式最终都归结为相同的机器指令，并且可以用一种语言完成的任何事情都可以以某种方式用另一种语言完成。所以我想我真正要问的是一个用闭包做的事情的例子，它比没有做的更优雅（我见过的任何例子似乎都不是这种情况）。

这就是我要说的。

[什么是“关闭”](https://stackoverflow.com/questions/36636/what-is-a-closure)？，Scheme中的一个例子：

```
(define (make-counter)
  (let ((count 0))
    (lambda ()
      (set! count (+ count 1))
      count)))

(define x (make-counter))

(x) returns 1

(x) returns 2

...etc... 
```

我真的不知道Scheme，但我想我知道发生了什么。但是，这不是更直接并完成同样的事情吗？伪代码：

```
function incrementCount(var counter) {
    counter++;
    return counter;
}

counter = 1;
counter = incrementCount(counter);
counter = incrementCount(counter); 
```

这是关于 lambdas 的另一个：[什么是 lambda（函数）？](https://stackoverflow.com/questions/16501/what-is-a-lambda-function)

给出的 JavaScript 示例：

```
var adder = function (x) {
    return function (y) {
        return x + y;
    };
};
add5 = adder(5);
add5(1) == 6 
```

再说一遍，为什么要那样做？为什么不直接说：

```
function adder(x, y) {
    return x + y;
}
adder(5, 1); 
```

我看到的每个示例似乎都是一种过于复杂的方法，可以用基本功能轻松完成。这些例子当然不能说明我能看到的任何惊人的酷“力量”。所以请有人启发我，我一定错过了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:28:31.253

Lambda 演算实际上非常简单，并且本身并没有那么有用。然而，当您开始学习 lambda 演算的含义和使用函数式设计模式的应用程序控制策略时，您将成为一个更好、更*强大的*程序员。

前提是函数也是值，这使得它对于抽象许多概念非常强大。您的两个示例显示了实现闭包和柯里化的最简单方法。这些都是微不足道的例子。当您开始使用函数式编程时，这些模式将一遍又一遍地出现，作为抽象出复杂性的非常强大的方法。

## 关注点分离

函数式编程在您开始使用高阶函数进行抽象时很有用，典型的例子是 - 我想对对象集合做一些事情。

因此，在命令式程序中，您使用 for 循环：

```
result = Array(length);
for(i = 0; i < length; i++)
{
   result[i] = dosomething(input[i]);
} 
```

请注意，在代码块中，`dosomething`函数位于 for 循环的中间。您无法真正将您对数组的每个元素所做的操作与实际的 for 循环控制结构分开。

然而，通过使用函数式风格，循环的控制结构被抽象出来，使用`map`更高阶的函数，你可以清楚地分离循环和函数应用这两个概念。这是方案中的等效代码。

```
(define result (map dosomething collection)) 
```

`map`照顾您正在遍历数组的每个元素的事实。`dosomething`照顾您正在对数组的每个元素执行操作的事实。对此的推理变得更加清晰，更改代码变得更加容易。现在想象一下，`for`你的代码中的每个循环都被这个结构替换了，它将节省多少行代码。

## 廉价的构造函数

解决闭包和柯里化的概念。对象和函数之间存在等价关系。本质上，可以使函数看起来和表现得像对象。Javascript 充分利用了这一事实。你可以用对象做的任何事情，你也可以用函数做。事实上，通过摆脱对象是什么和函数是什么之间的区别，你已经有效地整理了你的思想，并且有了一种思考问题的方式——即通过通过功能构建的代码。

我在这里使用 clojure 代码，因为这是我喜欢的：

这是普通加法器示例的 clojure 代码，在加法器示例中，您正在调用`addn`带有数字 5 的 a 以获取将 5 添加到数字的函数。一般用例可能是：

```
(defn addn [n] (fn [m] (+ m n))
(def add5 (addn 5))

(map add5 [1 2 3 4 5 6])
;; => [6 7 8 9 10 11] 
```

假设你有一个函数`download-and-save-to`，它接受一个 url 和一个数据库，将 url 保存到数据库表并在成功时返回 true，你可以做与你做的完全相同的抽象`+`：

```
(defn download-url-to [db]
  (fn [url] (download-and-save-to url db)))

(def download-url-mydb (download-url-to mydb))
(map download-url-mydb [url1 url2 url3 url4 url5])
;; => [true true false true true] 
```

请注意，即使您正在做截然不同的事情，该结构也是等效的。想想你将如何使用 java 或 c++ 来解决这个问题。类定义、工厂方法、类抽象、继承……本质上会涉及更多代码。你必须经历更多的仪式才能获得同样的效果。

## 敞开心扉

由于您可以如此简洁地表达想法，函数式编程可以让您掌握许多很难用更冗长的语言表达的概念。您选择的工具将使探索某些问题变得更容易或更难。

我强烈推荐 clojure - (http://www.4clojure.com/) 和 lighttable - (http://www.lighttable.com/, [http://www.kickstarter.com/projects/ibdknox/light-table](http://www.kickstarter.com/projects/ibdknox/light-table) )开始。从我个人的经验来看，我在 clojure 社区学习和探索概念的一年时间类似于学习 java、c++ 和 python 结合的大约 10 年。

* * *

哦，我有没有提到我学习所有这些东西有多么有趣？Monads、combinators、propagators、continuations……当你有正确的工具来理解它们时，所有那些看起来可怕的学术概念实际上都触手可及。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T10:39:14.733

这个问题很难回答，因为你已经涵盖了所有的基础：你已经看过示例、描述、解释——你甚至意识到 lambda 表达式编译成一种机器语言，它本身没有 lambda 表达式一个主要特征。

尽管如此，我将尝试给出*一个*示例，该示例似乎是*我个人*使用 lambda 表达式的最常见用例之一。我使用 C#，它本质上是一种命令式语言，但具有 lambda 表达式作为内置功能，因此我的示例将使用 C#。

想象一下，您有一个需要值的函数。但是这个值计算起来很昂贵，所以要求是：

*   如果函数不需要该值，则根本不对其进行评估。
*   如果函数多次需要该值，则只应评估一次。

Lambda 表达式使这变得非常容易，因为您可以使用捕获的变量来“缓存”计算值：

```
bool computed = false;
MyType value = null;

var getValue = () => {
    if (!computed)
    {
        value = computeValue();    // this is the expensive operation
        computed = true;
    }
    return value;
}; 
```

现在我可以传入`getValue`任何函数，无论这个函数对它做什么（即它调用它多少次），我知道它`computeValue()`只会被调用一次。

要在没有 lambda 的情况下做同样的事情，我必须创建一个等效于这个 lambda*闭包*的类，并让它实现某种接口，例如：

```
sealed class Closure : IGetMyTypeValue
{
    bool Computed = false;
    MyType Value = null;

    public Closure() { }

    public MyType GetValue()   // implements IGetMyTypeValue.GetValue()
    {
        if (!Computed)
        {
            Value = ComputeValue();    // this is the expensive operation
            Computed = true;
        }
        return Value;
    }

    private MyType ComputeValue()
    {
        // expensive code goes here
    }
}

[...]

var closure = new Closure();
// pass closure to a method that expects an IGetMyTypeValue 
```

必须编写这个大类的缺点是：

*   你必须为每一个如此昂贵的计算编写一个新类。这是非常重复的工作；使用 lambda 表达式允许编译器自动执行该操作。
*   您必须为每种类型的操作编写一个单独的接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T11:30:08.230

我不知道你是否熟悉 JavaScript，但闭包和 lambda 是模拟面向对象行为的基本功能。

考虑以下代码：

```
var MyClass = function(buttonId) {
  var clickCounter = 0;

  var myButton = document.getElementById(buttonId);
  myButton.addEventListener(
    'onclick',
    function() {
      clickCounter += 1;
  });
};

var myButtonClickCounter = new MyClass(); 
```

在 JavaScript 中没有诸如*类*或*私有成员*之类的东西，但我们可以创建类似它们的结构。以下是解释了它在做什么的代码：

```
// I define a class constructor that takes a string as an input parameter
var MyClass = function(buttonId) {
  // I define a private member called click
  var clickCounter = 0;

  // I get the reference to the button with the given id.
  var myButton = document.getElementById(buttonId);
  // I attach to it a function that will be triggered when you click on it.
  // The addEventListener method takes two arguments as input:
  //  - the name of the event
  //  - the function to be called when the event is triggered
  myButton.addEventListener(
    'onclick',
    function() {
      clickCounter += 1;
  });
};

// I create an instance of MyClass for a button called myButton
var myButtonClickCounter = new MyClass('myButton'); 
```

在这种情况下，传递给该`addEventListener`方法的函数是一个**lambda 函数**。是的，你总是可以用其他方式定义它，但这只是实现细节。在这种情况下，我可以在定义中创建另一个变量`MyClass`而不是 lambda 函数，如下所示：

```
var MyClass = function(buttonId) {
  var clickCounter = 0;

  var clickHandler = function() {
      clickCounter += 1;
  };

  var myButton = document.getElementById(buttonId);
  myButton.addEventListener(
    'onclick',
    clickHandler
  );
}; 
```

关于 JavaScript，我能告诉你的`clickCounter`是在那个 lambda 函数的*闭包*范围内，因为它是在其链 ( `MyClass`) 上方的函数中定义的，但`clickHandler`也会出现在该范围内，而不仅仅是`clickCounter`.

假设这个类需要为 4 个不同的按钮创建一个监听器，您需要为每个按钮创建一个处理程序，并且每次触发一个时，所有变量都将出现在其闭包范围内。并且拥有 8 个变量引用（4 个处理程序 + 4 个计数器）比只有 4 个计数器更糟糕。

拥有这个闭包的另一个优点是它`clickCounter`是 MyClass 的*私有成员*，因为它在其主体中定义为变量，因此从外部看不到。相反，`clickHandler`（即使是它的 lambda 函数形式）是**在内部** `MyClass`定义的，因此它将能够通过*闭包*来引用它。

**编辑：** 为了以`clickCounter`某种方式有用，假设您需要一个公共方法来告诉您计数器是否已达到某个值。我们可以这样写（在定义的底部）：

```
var MyClass = function(buttonId) {
  var clickCounter = 0;

  var myButton = document.getElementById(buttonId);
  myButton.addEventListener(
    'onclick',
    function() {
      clickCounter += 1;
  });

  // This method takes a value x as input, and returns
  // a boolean value, that tells you whether the button
  // has been clicked more than the given x.
  this.hasReached = function(x) {
    return (clickCounter >= x);
  };
};

// Somewhere else in your code...
var myButtonClickCounter = new MyClass('myButton');
...
if( myButtonClickCounter.hasReached(4) )
{
  // Do some great stuff
} 
```

您还可以拥有简单地返回或更改私有变量值的经典 getter 和 setter，这取决于您的需要。在这个特定的实现中，我不想直接公开私有变量（强烈建议这样做，因为如果类是唯一知道如何操作其成员的类，则代码更易于维护）。

**注意：**请记住，这只是一个展示闭包用法的​​示例，在 JavaScript 中定义类还有更有效的方法！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:37:02.877

其他一些已发布的答案引用了使用闭包创建私有变量，但我认为 John Resig 的高级 JavaScript 教程中的这个示例使其更加清晰。也许其他人会从中受益。

资料来源：[http ://ejohn.org/apps/learn/#54](http://ejohn.org/apps/learn/#54)

```
function Ninja(){
  var slices = 0;

  this.getSlices = function(){
    return slices;
  };
  this.slice = function(){
    slices++;
  };
}

var ninja = new Ninja();
ninja.slice();

console.log(ninja.getSlices()); // 1!
console.log(slices); // undefined! 
```

# graphicsmagick - 使用图形魔法将 PSD 文件转换为 JPG

> ID：13668324
> 
> 赞同：2
> 
> 时间：2012-12-02T10:15:57.797
> 
> 标签：graphicsmagick

我正在尝试使用以下命令将 psd 文件转换为 jpg 格式文件：

```
gm -convert [input file name].psd -colorspace rgb -resize 150x150  -strip -quality 92 -   sharpen 2  [output file name].jpg

gm -convert -clip -negate  [input file name].psd -thumbnail 150x150     [output file name].jpg 
```

这两个命令都可以正常工作。但是对于某些具有 rgb 颜色空间的 psd 文件，它**不会**生成正确的再现。

有什么建议么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-05T12:48:20.287

你试过`ImageMagick`吗？`ImageMagick`有同样的*命令行*，还有PSD的缩略图，通过这个得到：

```
convert a.psd[0] b.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:00:08.303

GraphicsMagick 中的 PSD 阅读器不是很健壮，而且 PSD 非常复杂且文档很少。我见过的最好的免费实现是在 The GIMP 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-28T06:53:46.490

我刚刚创建了一个处理来自 CLI 的 PSD 文件的 Node 模块。

对于所有不想破解 Photoshop 只是为了查看正确渲染文件的非 Windows 用户（Gimp 并不是真正的解决方案，并且对现代 PSD 文件的理解很差）。

来自[Github repo](https://github.com/kartsims/psd-cli)的说明：

安装它：

`npm install -g psd-cli`

转换`myfile.psd`为新的`myfile.png`：

`psd myfile.psd`

希望你觉得这个有用 ！任何功能请求都是最喜欢的，我有很多想法，并感谢您帮助改进代码:)

# javascript - 视差动画和 iOS 滚动

> ID：13668333
> 
> 赞同：0
> 
> 时间：2012-12-02T10:17:21.883
> 
> 标签：javascript, jquery, scroll, touchscreen, parallax

我使用[SUPERSCROLLORAMA](http://johnpolacek.github.com/superscrollorama/)插件创建了一个网站。我不知道 iPad 和 iPhone 上的视差滚动问题。我发现有点晚了，我正在考虑解决这个问题的方法。

如果我理解正确，滚动时此设备上的事件被禁用。那么，如果我禁用本机滚动并通过 JavaScript 插件实现另一个滚动，我是否能够使网站发挥应有的作用？

我已经使用 Alnitak[对此](https://stackoverflow.com/questions/7733703/how-do-i-disable-scrolling-on-an-ipad-webapp)问题的回答禁用了原始滚动。我试图找到一些插件来再次激活滚动，但问题是，它必须绑定到`document`因为那里触发了动画......你知道可以解决问题的插件吗？我的解决方案是否正确，或者我的情况没有解决方案，我需要从头开始重写脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:51:15.450

您可以使用适用于移动浏览器（iOS 也是）的视差滚动插件。看看[**Skrollr**](https://github.com/Prinzhorn/skrollr)。它不依赖任何其他库，它有可选的移动 js 文件，并且非常易于使用。只需阅读文档。

# c# - CUDAfy 与 Visual C# Express 2010 和 Windows 8

> ID：13668335
> 
> 赞同：2
> 
> 时间：2012-12-02T10:17:42.740
> 
> 标签：c#, cuda, nvcc

有没有人成功运行示例 CUDAfy C# 项目？

执行 CudafyTranslator.Cudafy() 时出现此错误：

```
{Cudafy.CudafyCompileException: Compilation error: nvcc : fatal error : Visual Studio configuration file '(null)' could not be found for installation at 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin/../..'

   at Cudafy.CudafyModule.Compile(eGPUCompiler mode, Boolean deleteGeneratedCode)
   at Cudafy.Translator.CudafyTranslator.Cudafy(ePlatform platform, eArchitecture arch, Version cudaVersion, Boolean compile, Type[] types)
   at Cudafy.Translator.CudafyTranslator.Cudafy(ePlatform platform, eArchitecture arch, Type[] types)
   at Cudafy.Translator.CudafyTranslator.Cudafy(ePlatform platform)
   at CudafyExamples.Arrays.ArrayBasicIndexing.Execute() in C:\Users\Michael Routitski\Downloads\CudafyV1.12\CudafyV1.12\CudafyExamples\Arrays\ArrayBasicIndexing.cs:line 40} 
```

我尝试寻找解决方案并尝试了建议的解决方案

[CUDA 链接错误 - Visual Express 2008 - 由于（空）配置文件导致 nvcc 致命](https://stackoverflow.com/questions/2970493/cuda-linking-error-visual-express-2008-nvcc-fatal-due-to-null-configuratio)

我还安装了 Windows Development SDK 8 并没有帮助。我找不到启动 WD SDK 配置工具的文件...（Windows 8 有问题？）

这似乎是将 CUDA 编译器与 Visual C#/C++ Express 集成的常见问题......

# c++ - 如何防止构造类的对象？

> ID：13668336
> 
> 赞同：1
> 
> 时间：2012-12-02T10:17:47.677
> 
> 标签：c++

我在任何地方都找不到答案。可以通过使用条件和抛出异常来完成，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T10:20:17.873

目前尚不清楚为什么您想要一个在任何情况下都无法构造的类，但是您可以创建所有构造函数`private`并且不为它们提供任何实现。这将阻止编译时的构造。

在 C++11 中，您可以使用`delete`所有构造函数：

```
class A
{
 public: // or private, doesn't matter.
  A()=delete;
  A(const A&)=delete;
  A(A&&)=delete;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:36:51.737

好吧，这有点糟糕，但坦率地说，任何需要一种方法来定义不可构造对象的 C++ 应用程序都可能已经是一个糟糕的 hack！

```
class la
{
public:
    virtual void oh_no_you_dont() = 0;
};

int main()
{
    la an_instance;
    return 0;
} 
```

在 GCC 下，我得到以下信息：

> test.cpp：在函数'int main()'中：
> 
> test.cpp:9：错误：不能将变量“an_instance”声明为抽象类型“la”</p>
> 
> test.cpp:2：注意：因为以下虚函数在“la”中是纯的：
> 
> test.cpp:4: 注意: 虚空 la::oh_no_you_dont()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:21:39.867

您可以将所有构造函数设为私有。这样就不可能创建类的实例。然后，您可以提供一个或多个静态工厂方法来创建类，从而使用户只使用工厂方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-01T12:49:47.487

**您是否希望您的课程不被构建？**

这是使用旧 C++ 标准的解决方案，例如*C++03 和更早版本*

```
class A {
private:
  A();
  A(const A&)
  A(A&&);
  ~A()
}; 
```

这是使用最新 C++ 标准的解决方案，例如*C++11、C++14、C++17、C++20*

```
class A
{
  A()=delete;
  A(const A&)=delete;
  A(A&&)=delete;
}; 
```

甚至

```
class A final {
  ~A() = delete;
} 
```

`final`意味着一个类不能被继承。

`delete`对于析构函数意味着你不能破坏一个类

禁止析构函数也会阻止您构造对象。

**为什么我们要禁止对象被构造/破坏？**

一个非常常见的用例是开发人员想要在 C++ 中创建一个“静态”类。

C++ 中的“静态”类是指只有静态方法的类。

这种模式也被称为“util”类。

许多人建议不要定义一个类，而是为此目的使用`namespace`包含函数的规范。`static`

# windows-xp - 在 Windows XP 中将 mp3 声音发送到不同的音频设备

> ID：13668338
> 
> 赞同：2
> 
> 时间：2012-12-02T10:18:04.993
> 
> 标签：windows-xp, mp3, audio-streaming

我需要在 Windows XP 上的不同声音设备（不仅是默认设备）上播放 mp3 声音。如何在 windows xp 上选择声音设备来播放我的 mp3 文件？（我在 C# 上编程，但 C++ 的答案也会很好）。感谢您的回答

# java - Jackson/Jersey 动态隐藏子级别

> ID：13668339
> 
> 赞同：1
> 
> 时间：2012-12-02T10:18:18.127
> 
> 标签：java, json, serialization, jersey, jackson

我有一个 Java servlet 使用杰克逊/泽西发送 JSON。我必须送一棵树。这是我的数据结构。

```
public class Node {
    private String text;
    private String link;
    private List<Node> items;

    [...]
} 
```

即我要求`/`我只想要第一级，答案应该是：

```
 {
        "text":"toto",
        "link":"",
        "items":[{
            "text":"toutou",
            "link":"tata",
        ]}
    } 
```

如果我要求`/tata`答案应该是：

```
 {
        "text":"toutou",
        "link":"tata",
        "items":[{
            "text":"toto2",
            "link":"toutou2",
        ]}
    } 
```

所以我只想发送 1 级，`items`否则 JSON 会太大。可能吗 ？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:43:58.317

你的问题让我很感兴趣，所以我开始搜索递归 bean 引用以及如何使用 Jackson 来避免它。

我找到[了这个答案](https://stackoverflow.com/a/10195575/1108032)。我没有尝试过，但它似乎得到了认可和评价。也许值得一试。请写回发生的事情，因为我也对结果感兴趣。

# opengl - Haskell OpenGL 窗口终止

> ID：13668341
> 
> 赞同：1
> 
> 时间：2012-12-02T10:18:53.750
> 
> 标签：opengl, haskell, glut

我一直在使用 Haskell`FunGen`创建游戏并发现了终止问题。如果我单击按钮关闭游戏窗口`X`，我从中启动游戏的 Haskell 控制台仍然运行。

如果游戏以导致`exitWith`成功的游戏功能关闭，则不会发生这种情况。

有没有办法可以捕获`X`OpenGL 窗口上的按钮事件来终止应用程序？

# python - python count 日期出现的次数

> ID：13668349
> 
> 赞同：-1
> 
> 时间：2012-12-02T10:20:29.187
> 
> 标签：python

从以下数组中，如何计算日期在数组中出现的次数。输出应采用以下格式 [date,count]

```
 new_dates =  [['2012-12-02', 14],['2012-12-03',2],....] 
```

输入：

```
 dates = [['2012-12-02', 17], ['2012-12-01', 5], ['2012-12-02', 15], ['2012-12-02', 8], ['2012-12-02', 17], ['2012-12-02', 15], ['2012-12-11', 6], ['2012-12-02', 1], ['2012-12-02', 9], ['2012-12-02', 11], ['2012-12-03', 13], ['2012-12-03', 10], ['2012-12-02', 18], ['2012-12-02', 11], ['2012-12-02', 12], ['2012-12-05', 14], ['2012-12-02', 3], ['2012-12-02', 6], ['2012-12-06', 10], ['2012-12-07', 0], ['2012-12-08', 3], ['2012-12-09', 12], ['2012-12-02', 6]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:23:16.400

```
>>> from collections import Counter
>>> [[k,c[k]] for k in Counter([i[0] for i in dates])]
[['2012-12-01', 1], ['2012-12-02', 14], ['2012-12-03', 2], ['2012-12-05', 1], ['
2012-12-06', 1], ['2012-12-07', 1], ['2012-12-08', 1], ['2012-12-09', 1], ['2012
-12-11', 1]] 
```

如果您不能使用计数器，请使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> for i in dates:
...    d[i[0]] += 1
...
>>> [[k,d[k]] for k in d]
[['2012-12-01', 1], ['2012-12-02', 14], ['2012-12-03', 2], ['2012-12-05', 1], ['
2012-12-06', 1], ['2012-12-07', 1], ['2012-12-08', 1], ['2012-12-09', 1], ['2012
-12-11', 1]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:34:45.090

好的，如果不能使用 Counter，我建议使用循环/计数解决方案：

通过使用 Dict.get(a) ，如果 Dict 中没有键，则返回 None，如果 dict 中有键“a”，则返回值

```
>>> dates = [['2012-12-02', 17], ['2012-12-01', 5], ['2012-12-02', 15], ['2012-12-02', 8], ['2012-12-02', 17], ['2012-12-02', 15], ['2012-12-11', 6], ['2012-12-02', 1], ['2012-12-02', 9], ['2012-12-02', 11], ['2012-12-03', 13], ['2012-12-03', 10], ['2012-12-02', 18], ['2012-12-02', 11], ['2012-12-02', 12], ['2012-12-05', 14], ['2012-12-02', 3], ['2012-12-02', 6], ['2012-12-06', 10], ['2012-12-07', 0], ['2012-12-08', 3], ['2012-12-09', 12], ['2012-12-02', 6]]
>>> dict_ = {}
>>> for i,j in dates:
     if dict_.get(i):
         dict_[i] += 1
     else:
         dict_[i] = 1

>>> dict_
{'2012-12-01': 1, '2012-12-02': 14, '2012-12-03': 2, '2012-12-05': 1, '2012-12-06': 1, '2012-12-07': 1, '2012-12-08': 1, '2012-12-09': 1, '2012-12-11': 1} 
```

# android - android Json仅显示最后一项

> ID：13668350
> 
> 赞同：0
> 
> 时间：2012-12-02T10:20:33.157
> 
> 标签：android, android-asynctask

我有一个问题：我的 json 解析器只显示最后一项！但在 Logcat 我看到了所有项目！你能帮助我吗？

```
 @Override
    protected void onPostExecute(JSONObject result) {
      super.onPostExecute(result);      
      Log.d("Log", result.toString());
      JSONObject jsn = result;
      try {
        JSONArray jarray = jsn.getJSONArray("item");
        for (int i = 0; i < jarray.length(); i++){
            JSONObject jsno = jarray.getJSONObject(i);
            title.setText(Html.fromHtml("<a href=\""+jsno.getString("link")+"\">"+jsno.getString("title")+"</a>"));
            cat.setText(jsno.getString("category"));
            date.setText(jsno.getString("pubDate"));
            desc.getSettings().setJavaScriptEnabled(true);
            desc.getSettings().setDefaultTextEncodingName("charset=UTF-8");             desc.loadData(jsno.getString("description"), "text/html; charset=UTF-8", "utf-8");
        }

    } catch (JSONException e) {     
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:41:26.857

当您遍历 JSON`item`元素数组时，您将在相同的`title`,`cat`和`date`每次迭代中设置对象的字段。这就是为什么只有最后一项是“显示”的原因。

您需要为每个对象创建一个新对象`JSONObject(i)`并将其存储在某处。

# css - 无法在图像上添加边距

> ID：13668351
> 
> 赞同：0
> 
> 时间：2012-12-02T10:20:38.950
> 
> 标签：css, html

我正在用 wordpress 做一个网站。在导航下，我有容器（id =“cover_photo”）用于图像（id =“cover_photo_image）。我用边距居中，但我想将它向下移动，并将它放在容器中，但如果我放容器，容器会跟随边距。

HTML

```
 <div id="cover_photo">
        <p id="cover_photo_image">
        </p>
    </div> 
```

CSS

```
#cover_photo {
    width: 100%;
    height: 278px;
    background-color: #6b0c0b;
    box-shadow: inset 0px 0px 3px 0px #888, 0px 0px -3px 0px #888;
}

p#cover_photo_image {
    width: 821px;
    height: 172px;
    display: block;
    margin: 0 auto;
    margin-top: 6px;
    background-image: url(images/cover_photo.png);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:38:18.600

将您的代码放入小提琴中，看看您的意思。问题是您没有为`#cover_photo`or设置定位`#cover_photo_image`。外部元素需要是相对的，内部元素需要是绝对的。

```
#cover_photo {
position: relative;
}

p#cover_photo_image {
position: absolute;
}​ 
```

我更改了大小，使其适合预览，如果您尝试调整边距值，它应该四处移动而不是移动`#cover_photo`容器。

[http://jsfiddle.net/ESCNm/](http://jsfiddle.net/ESCNm/)

以防万一您希望在元素中自动垂直和水平对齐元素，还有很多手动定位的方法。手动定位太麻烦了，我尽量避免绝对。

这里有一篇关于它的文章：[http ://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-08T23:57:07.357

关于垂直和水平居中。

您可以使用 Flex。

请添加以下代码

```
#cover_photo {
   display: flex;
   justify-content: center;
   align-items:center;
}

p#cover_photo_image {
  border: 1px solid black;
  background-repeat: no-repeat;
  background-image: url(https://cdn.sstatic.net/Img/teams/teams-illo-free- 
  sidebar-promo.svg?v=47faa659a05e);
  background-size: contain;
  background-position: center;
} 
```

这应该是你想要的效果。 [在此处输入图像描述](https://i.stack.imgur.com/jl99e.png)

# php - 此数据以 ajax 显示如何对齐

> ID：13668353
> 
> 赞同：0
> 
> 时间：2012-12-02T10:20:52.017
> 
> 标签：php, ajax

1070毫米和750毫米，轴距1475毫米，重量仅为154公斤（不带风罩）。\r\nBajaj Avenger 220的离地间隙为169毫米，是15英寸宽巡洋舰中最好的轮胎、多辐条和镀铬车轮。轮胎规格分别为前轮和后轮的 90/90-17 和 130/90-15。1475 毫米的最长轴距以及粗壮的箱形截面摆臂确保 Bajaj Avenger 220 可以抓住所有颠簸而不会影响其平衡。","imagename":"300px-Bajaj_Avenger_220_DTS-i.jpg","Product_id" :"1","Category_id":"3","Brands_id":"2","Engine_CC_Models_id":"37","Prise_id":"5","Body_Style_id":"4","

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:24:23.000

如果你正在使用`jQuery`，你所需要的`data`就是你的 json 对象在哪里。在下面的函数中写下`success handler`

```
$.each(data, function(i, item) {
    alert(data[i].name);
});​

$.ajax({ 
type : 'POST',
url: 'localhost/TEMP/Compare/Display_Brand_Models',
data : data, colModel : [ { id : 'User ID', name : 'id' }],
  success : function(data){ 

       $.each(data, function(i, item) {
         alert(data[i].name);
         //here you write whatever you want.
         $('#Display_ComPare').html('<div>'+data[i].name+'</div>');} 
       });​

  }
); 
```

# jsp - 在Servlet中处理上传的文件内容，并在jsp中打印内容

> ID：13668354
> 
> 赞同：0
> 
> 时间：2012-12-02T10:20:56.613
> 
> 标签：jsp, servlets, apache-commons, apache-commons-fileupload

首先，我必须声明我是 jsp/servlet 新手，试图学习它的机制。
**简介：**
由于我阅读了有关使用*Apache-Commons-FileUpload 3.0 的*[本](http://www.codejava.net/java-ee/servlet/eclipse-file-upload-servlet-with-apache-common-file-upload)教程，Servlet 成功上传 .txt 文件，并且该文件存储在 Tomcat 的*wtpwebapps/MyProject/upload*文件夹中。 这是 UploadServlet 的 doPost 方法的重要部分，它与参考教程中的相同：

 **```
try {
        // parses the request's content to extract file data
        List formItems = upload.parseRequest(request);
        Iterator iter = formItems.iterator();

        // iterates over form's fields
        while (iter.hasNext()) {
            FileItem item = (FileItem) iter.next();
            // processes only fields that are not form fields
            if (!item.isFormField()) {
                String fileName = new File(item.getName()).getName();
                String filePath = uploadPath + File.separator + fileName;
                File storeFile = new File(filePath);                     
                // saves the file on disk
                item.write(storeFile);
            }
        }
        request.setAttribute("message", "Upload has been done successfully!");
    } catch (Exception ex) {
        request.setAttribute("message", "There was an error: " + ex.getMessage());
    }
    getServletContext().getRequestDispatcher("/message.jsp").forward(request, response);
} 
```

}

在代码段的末尾，程序员指定将在*/messages.jsp*文件 中打印的*消息文本。*

 ***问题：**
在设置请求属性之前，我如何将上传的文件作为流获取，逐行处理（使用*BufferedReader*或类似方法），关闭流并将其发送为... *String[]*例如，到*/ message.jsp*通过容器的请求对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:47:08.060

`FileItem`有[`getInputStream()`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html#getInputStream%28%29)方法。调用它，使用返回的输入流读取文件，`List<String>`用其内容填充 a，并将列表作为属性添加到请求中。***

# c - 即使定义了也没有写权限

> ID：13668355
> 
> 赞同：1
> 
> 时间：2012-12-02T10:21:00.270
> 
> 标签：c, ubuntu-11.04

我想使用 open() 创建一个文件。

这是我的代码的一部分：

```
int fd = open("testing", O_EXCL | O_CREAT, S_IRWXU | S_IRWXG | S_IRWXO);
    if(fd == -1){
        perror("Error");
        return 1; } 
```

输出应该是创建了一个名为“testing”的文件，对用户、组和其他人具有读、写和执行权限。

但我得到的是一个名为“testing”的文件，具有此权限：

```
-rwxr-xr-x 
```

缺少 Group 和 Others 的写入权限。

我也尝试过使用

```
S_IRUSR | S_IWUSR | S_IXUSR | S_IRGRP | S_IWGRP | S_IXGRP | S_IROTH | S_IWOTH |S_IXOTH) 
```

但我仍然得到相同的结果。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:24:38.827

权限由进程的 umask 修改。有效权限是`(mode & ~umask)`.

您应该在创建文件后更改权限，使用`fchmod()`. 避免了如果您使用并且基础文件更改为指向和之间的其他inode （谷歌用于TOCTOU比赛），`fchmod()`您可能会遇到的竞争条件。`chmod()``open()``chmod()`

# three.js - 三个带有材质颜色的 js 动画搅拌机模型

> ID：13668359
> 
> 赞同：2
> 
> 时间：2012-12-02T10:21:33.870
> 
> 标签：three.js, blender

我有一个导出的（三个 js json 格式）搅拌机模型。该模型有一些颜色的材料。如果我使用 THREE.MorphAnimMesh 和 THREE.MeshPhongMaterial 动画效果很好，但没有材质颜色。如果我使用 THREE.MeshFaceMaterial 它有颜色但动画不起作用。问题是，如何使用模型 js 文件中的材质颜色进行动画处理？

动画工作但没有颜色。模型是白色的：

```
var material = new THREE.MeshPhongMaterial({ morphTargets: true, morphNormals: true, vertexColors: THREE.FaceColors, shading: THREE.SmoothShading, perPixel: true }  );
var meshAnim = new THREE.MorphAnimMesh( geometry, material ); 
```

模型具有材质颜色但动画不起作用：

```
var material  = new THREE.MeshFaceMaterial({ morphTargets: true, morphNormals: true, vertexColors: THREE.FaceColors });
var meshAnim = new THREE.MorphAnimMesh( geometry, material ); 
```

这是模型 js 文件：[http ://speedy.sh/rs39u/skeleton-0.js](http://speedy.sh/rs39u/skeleton-0.js)

顺便说一句，我从示例中看到了 flamingo.js 文件。它有一个 morphColors 对象，但如果我知道正确，我不能从搅拌机中导出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:23:43.800

知道了。也许有人可以使用它：

```
for (var i=0; i<geometry.materials.length; i++) {
    geometry.materials[i].morphTargets = true;
}
var material  = new THREE.MeshFaceMaterial({ morphTargets: true, morphNormals: true, vertexColors: THREE.FaceColors });
var meshAnim = new THREE.MorphAnimMesh( geometry, material ); 
```

# authentication - 应该将哪些错误返回给 3rd-party-application？

> ID：13668361
> 
> 赞同：0
> 
> 时间：2012-12-02T10:21:42.077
> 
> 标签：authentication, oauth, oauth-2.0

当用户（“资源所有者”）明确拒绝身份验证请求时，应该将其传递给请求客户端（类似这样`https://oauth2client.com/cb#error=access_denied`）。

**应该将哪些其他错误传递给 3rd-party-application？**（临时）服务器错误怎么办？出于安全原因，是否存在不应回调的事件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:55:14.283

你读过[RFC](https://www.rfc-editor.org/rfc/rfc6749)吗？

请参见第*4.1.2.1 节。**授权码授予*的*错误响应*。它概述了您可以发回的错误代码。`server_error`或者`temporarily_unavailable`可能是您正在寻找的。OAUth2 安全建议并未说明不将其退回的原因。

```
If the request fails due to a missing, invalid, or mismatching
redirection URI, or if the client identifier is missing or invalid,
the authorization server SHOULD inform the resource owner of the
error and MUST NOT automatically redirect the user-agent to the
invalid redirection URI.

If the resource owner denies the access request or if the request
fails for reasons other than a missing or invalid redirection URI,
the authorization server informs the client by adding the following
parameters to the query component of the redirection URI using the
"application/x-www-form-urlencoded" format, per Appendix B:

error
     REQUIRED.  A single ASCII [USASCII] error code from the
     following:

     invalid_request
           The request is missing a required parameter, includes an
           invalid parameter value, includes a parameter more than
           once, or is otherwise malformed.
     unauthorized_client
           The client is not authorized to request an authorization
           code using this method.

     access_denied
           The resource owner or authorization server denied the
           request.

     unsupported_response_type
           The authorization server does not support obtaining an
           authorization code using this method.

     invalid_scope
           The requested scope is invalid, unknown, or malformed.

     server_error
           The authorization server encountered an unexpected
           condition that prevented it from fulfilling the request.
           (This error code is needed because a 500 Internal Server
           Error HTTP status code cannot be returned to the client
           via an HTTP redirect.)

     temporarily_unavailable
           The authorization server is currently unable to handle
           the request due to a temporary overloading or maintenance
           of the server.  (This error code is needed because a 503
           Service Unavailable HTTP status code cannot be returned
           to the client via an HTTP redirect.)

     Values for the "error" parameter MUST NOT include characters
     outside the set %x20-21 / %x23-5B / %x5D-7E. 
```

# android - 在 Android 中移动 SurfaceView

> ID：13668363
> 
> 赞同：0
> 
> 时间：2012-12-02T10:21:56.197
> 
> 标签：android, surfaceview

我正在开发一个简单的游戏，比如[BSD robots](http://en.wikipedia.org/wiki/Robots_%28BSD_game%29)。这个游戏包含一个相当大的棋盘（超过 40 个单元格），即使在 10 英寸平板电脑上看起来也不好看。我的决定是滚动（移动）表面视图，而不是缩放每个像手指点一样大小的图形。我已经阅读了大量有关表面视图的文章，但我不明白如何移动它？

我的活动代码：

```
package ru.onyanov.robots;
public class MainActivity extends Activity {

public BoardView board;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    board = new BoardView(this);
    setContentView(board);
}
} 
```

班级委员会：

```
package ru.onyanov.robots;
public class BoardView extends SurfaceView {
private GameThread mThread;
private boolean running = false;
public final int sizeX = 50;
public final int sizeY = 35;
public final int cellSize = 64;

private int robotCount = 4;

public ArrayList<Cell> cells = new ArrayList<Cell>();
private ArrayList<Robot> robots = new ArrayList<Robot>();
private Hero hero;
public Bitmap imageCell;
public Bitmap imageRobot;
public Bitmap imageHero;

public BoardView(Context context) {
    super(context);     

    makeGraphic();
    constructCells();
    constructRobots();      
    hero = new Hero(this, 3, 2, imageHero);

    mThread = new GameThread(this);

    getHolder().addCallback(new SurfaceHolder.Callback() {
        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            mThread.setRunning(false);
            while (retry) {
                try {
                    mThread.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }

        public void surfaceCreated(SurfaceHolder holder) {
            mThread.setRunning(true);
            mThread.start();
        }

        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {

        }
    });
}

private void makeGraphic() {
    Bitmap cellImageSource = BitmapFactory.decodeResource(getResources(),
            R.drawable.cell);
    imageCell = Bitmap.createScaledBitmap(cellImageSource, cellSize,
            cellSize, false);
    imageRobot = BitmapFactory.decodeResource(getResources(),
            R.drawable.robot);
    imageHero = BitmapFactory.decodeResource(getResources(),
            R.drawable.hero);

}

private void constructRobots() {
    Robot robot;
    Random rand = new Random();
    for (int r = 0; r < robotCount; r++) {
        int x = rand.nextInt(sizeX);
        int y = rand.nextInt(sizeY);
        robot = new Robot(this, x, y, imageRobot);
        robots.add(robot);
    }
    return;
}

private void constructCells() {
    Cell cell;
    for (int y = 0; y < sizeY; y++) {
        for (int x = 0; x < sizeX; x++) {
            cell = new Cell(this, x, y, imageCell);
            cells.add(cell);
        }
    }
    return;
}

protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.WHITE);
    Cell cell;
    for (int c = 0; c < cells.size(); c++) {
        cell = cells.get(c);
        cell.onDraw(canvas);
    }
    Robot robot;
    for (int r = 0; r < robots.size(); r++) {
        robot = robots.get(r);
        robot.onDraw(canvas);
    }
    hero.onDraw(canvas);
}

public boolean onTouchEvent(MotionEvent e) {
    int shotX = (int) e.getX();
    int shotY = (int) e.getY();

    if (e.getAction() == MotionEvent.ACTION_MOVE){
        //TODO move board
        showToast("move Board");
    } else if (e.getAction() == MotionEvent.ACTION_UP) {
        showToast("touchPoint: " + shotX + ", "+shotY);
        hero.moveByDirection(shotX, shotY);
        this.scrollTo(shotX, shotY);
    }
    return true;
}

public void showToast(String mes) {
    Toast toast = Toast.makeText(getContext(), mes, Toast.LENGTH_LONG);
    toast.show();
}

public class GameThread extends Thread {
    private BoardView view;

    public GameThread(BoardView view) {
        this.view = view;

    }

    public void setRunning(boolean run) {
        running = run;
    }

    public void run() {
        while (running) {
            Canvas canvas = null;
            try {
                canvas = view.getHolder().lockCanvas();
                synchronized (view.getHolder()) {
                    onDraw(canvas);                     
                }
                canvas.scale(300, 300);
            } catch (Exception e) {
            } finally {
                if (canvas != null) {
                    view.getHolder().unlockCanvasAndPost(canvas);
                }
            }
        }
    }
}
} 
```

这里的一些神奇数字是暂时的。现在我只想移动 BoardView；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:21:09.857

问题是向 SurfaceView 添加`x`和`y`字段，更改它们`onTouchEvent`并使用 x 和 y 偏移在画布中绘制所有元素。奇怪的是我没有收到任何答案...

# cuda - 如何使用 cusparse 加速预条件共轭梯度？

> ID：13668365
> 
> 赞同：2
> 
> 时间：2012-12-02T10:22:09.020
> 
> 标签：cuda

我正在从事 CFD 项目，并且正在使用新的 CUDA 5 库“cusparse”来求解线性方程组。我测试了示例代码“conjugateGradientPrecond”。结果表明，使用 ILU 的预处理梯度比没有预处理的共轭梯度花费更多的时间来获得最终答案。前一种算法确实需要较少的迭代，但在“cusparseScsrsv_solve”上需要很多时间，因此整体时间较长。

这是我的问题，是否有任何其他预处理共轭梯度可以大大减少迭代，同时不包括任何耗时的函数，如“cusparseScsrsv_solve”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T17:54:36.210

ILU0/ILUT、IC0/ICT 等预处理技术需要在 CG 的每次迭代中求解三角系统两次（预处理矩阵的上下分解）。从本质上讲，求解三角系统是一个顺序问题，但对于稀疏矩阵的情况，可以执行一些分析阶段以找到某种程度的并行化（请参阅[这篇文章](https://stackoverflow.com/questions/11382346/very-slow-performance-of-cusparse-csrsv-analysis)）。一般来说，对于稀疏系统，无法提供最好的预处理技术，但简单的对角线（也称为 Jacobi）预处理会产生可忽略的开销，并为 GPU 实现提供高水平的并行化。

# iphone - iPad 中的 PDF 缩略图模糊

> ID：13668366
> 
> 赞同：0
> 
> 时间：2012-12-02T10:22:19.067
> 
> 标签：iphone, ipad, pdf, cgaffinetransform, cgpdfdocument

我正在创建缩略图并在 gridView 中显示这些缩略图（使用 AQgridView）。gridView 中显示的缩略图太模糊，不是我想要的。我附上了我的代码。请帮忙。

这是我的代码：-

```
- (void)viewDidLoad
{
[super viewDidLoad];
imageArray = [[NSMutableArray alloc] init];
self.gridView = [[AQGridView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
self.gridView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
self.gridView.autoresizesSubviews = YES;
self.gridView.delegate = self;
self.gridView.dataSource = self;
[self.view addSubview:gridView];

[self makeThumbs];
// Do any additional setup after loading the view from its nib.
} 
```

//////////从PDF文件制作拇指/////////////

```
-(void)makeThumbs{

NSString* finalPath = [[NSBundle mainBundle] pathForResource:@"Maths" ofType:@"pdf" inDirectory:nil];

NSURL* pdfFileUrl = [NSURL fileURLWithPath:finalPath];
CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfFileUrl);
CGPDFPageRef page;

CGRect aRect = CGRectMake(0, 0, 70, 100); // thumbnail size
UIGraphicsBeginImageContext(aRect.size);
CGContextRef context = UIGraphicsGetCurrentContext();

NSUInteger totalNum = CGPDFDocumentGetNumberOfPages(pdf);

for(int i = 0; i < totalNum; i++ ) {
     UIImage* thumbnailImage;

    CGContextSaveGState(context);
    CGContextTranslateCTM(context, 0.0, aRect.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGContextSetGrayFillColor(context, 1.0, 1.0);
    CGContextFillRect(context, aRect);

    // Grab the first PDF page
    page = CGPDFDocumentGetPage(pdf, i + 1);
    CGAffineTransform pdfTransform = CGPDFPageGetDrawingTransform(page, kCGPDFMediaBox, aRect, 0, true);
    // And apply the transform.
    CGContextConcatCTM(context, pdfTransform);

    CGContextDrawPDFPage(context, page);

    // Create the new UIImage from the context
    thumbnailImage = UIGraphicsGetImageFromCurrentImageContext();

    //Use thumbnailImage (e.g. drawing, saving it to a file, etc)

    CGContextRestoreGState(context);
    [imageArray addObject:thumbnailImage];

}
NSLog(@"image array count is %d",[imageArray count]);
if ([imageArray count]>0) {
    [self.gridView reloadData];
}
UIGraphicsEndImageContext();    
CGPDFDocumentRelease(pdf);
} 
```

这里的图像显示了在 iPad 模拟器上创建的模糊缩略图![在此处输入图像描述](../Images/d18f39d38e8ead11f40ab7f431ab54c3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:27:08.050

尝试使用`UIGraphicsBeginImageContextWithOptions`传递 0.0 作为比例（使用屏幕比例）。

# stored-procedures - 带有 jdbc 和存储过程（函数）的 postgresql：ResultSet

> ID：13668367
> 
> 赞同：2
> 
> 时间：2012-12-02T10:22:27.627
> 
> 标签：stored-procedures, jdbc, stored-functions, psql

我只是试图从服务器（getStat）调用一个存储的函数，它看起来像这样：

```
create type stat as (type text, location text, number int);
create function getStat() returns setof stat as 'select distinct table1.type, table1.location, table1.number from table1, table2 where table2.finding=10 order by number desc;' language 'sql'; 
```

现在这里是 jdbc 代码：

```
CallableStatement callable = null;

    String storedProc = "{call getStat(?, ?, ?)}";

    try {
        callable = connection.prepareCall(storedProc);

        callable.registerOutParameter(1, java.sql.Types.VARCHAR);
        callable.registerOutParameter(2, java.sql.Types.VARCHAR);
        callable.registerOutParameter(3, java.sql.Types.INTEGER);

        boolean results = callable.execute();

        System.out.println(callable.getString(1));
        System.out.println(callable.getString(2));
        System.out.println(callable.getInt(3));

        while(results){
            ResultSet rs = callable.getResultSet();
            while(rs.next()){
                System.out.println(rs.getString(1));
                System.out.println(rs.getString(2));
                System.out.println(rs.getInt(3));
            }
            //rs.close();

            results = callable.getMoreResults();
        } 
```

好的，现在的问题是：当我调用它时，它只是打印出整个批量的第一行，应该是 printend。是的，这很清楚，因为我执行以下代码：

```
 System.out.println(callable.getString(1));
            System.out.println(callable.getString(2));
            System.out.println(callable.getInt(3)); 
```

但是我在 while 循环中做同样的事情......并且没有显示更多内容。

也许问题很明显，但我错过了:(

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T10:29:01.910

无需使用具有`{call ...}`语法的 CallableStatement。

只需使用 select 和常规`Statement`：

```
Statement stmt = connection.createStatement();
ResultSet rs = stmt.executeQuery("select * from getStat()");
while (rs.next())
{
  System.out.println(rs.getString(1));
  System.out.println(rs.getString(2));
  System.out.println(rs.getInt(3));
} 
```

# javascript - Html onmousedown vs href 优先级

> ID：13668368
> 
> 赞同：2
> 
> 时间：2012-12-02T10:22:34.007
> 
> 标签：javascript, html, dom-events, href, onmousedown

我在我的一个 html 页面中使用以下代码。当用户点击“搜索引擎”链接时，它会在新页面上打开 yahoo.com，在当前页面上打开 Google。

我已经对此进行了测试并且它可以工作（打开两个网址），但是页面是否有可能在不完成**href**命令的情况下完成**window.location**（重定向到不同的页面） ？

 **两个命令之间是否有优先级规则？

**注意：我知道我可以用不同的方式解决问题，但我对这种具体情况很好奇。

```
<html>
<head>
    <title></title>

<script type="text/javascript">
    function clickRedirect() {
        window.location = 'http://www.google.com';
    }
</script>
<body>

<a onmousedown="clickRedirect()" href="http://www.yahoo.com" target="_blank">Search Engines</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:35:13.437

该`mousedown`事件将首先发生，但正如您可以从您的代码当前正在运行的事实中看到的那样，这并不是全部。

问题是：一旦 mousedown 发生并且您设置`window.location`了 ，页面是否会立即消失（因此不会处理单击`a`元素的默认操作），或者该默认操作是否在之前完成页面被销毁并替换为新页面？

答案是：我认为这根本不是有保证的行为（无论哪种方式），我不会依赖它跨浏览器。一方面，如果用户按住鼠标按钮怎么办？由于`a`元素的默认操作直到 a 才会触发`click`，这需要 a `mouseup`。

相反，我可能会以两种方式对冲我的赌注：

首先，我会为此使用`click`，而不是。`mousedown`用户不希望页面在他们只是按住鼠标时换出。

其次，我会改变你的功能：

```
function clickRedirect() {
    setTimeout(function() {
        window.location = "http://www.google.com";
    }, 0);
} 
```

现在，您专门让浏览器有机会在您转到另一个页面之前完成单击的默认操作。

您可能会在 DOM 事件规范中找到更多关于这方面的信息：

*   [DOM2 事件](http://www.w3.org/TR/DOM-Level-2-Events/)
*   [DOM3 事件](http://www.w3.org/TR/DOM-Level-3-Events/)

...因为他们可能会说当事件正在进行并且页面被破坏时应该发生什么。我没有立即看到任何东西。**

# php - 将多个 post 变量发送到另一个 javascript 文件

> ID：13668370
> 
> 赞同：2
> 
> 时间：2012-12-02T10:22:52.373
> 
> 标签：php, javascript, html

我有两个单独的 javascipt 文件和一个 php 文件，在第一个 create.js 上，我使用 post 将变量发送到 get.php 文件，然后我想将这些变量从 get.php 发送到 register.js，怎么能我在 register.js 中获取这些变量并将它们用于下一步？

这是第一个 js 文件中的代码：

```
 var fs = $('#fname').val();
        var ls = $('#lname').val();
        var name = $('#adduser').val();
        var pass = $('#addpass').val();
        var cpass = $('#conpass').val();

        if (document.forms['form2'].fname.value == "" || document.forms['form2'].lname.value == "" || document.forms['form2'].adduser.value == "" || document.forms['form2'].addpass.value == ""){
            alert("Input the required Filled!");    
        }
        else{
            var vals;
            var request = $.ajax({
                url:"ifexist.php", type:"POST", 
                data:{
                  n:name
                }
            });                 
            request.done(function(data){
                vals = data; //alert(data);
                if (vals == "1"){
                    alert("Username Already Exist!");
                }   
                else
                    if(pass==cpass){

                            var request1 = $.ajax({
                                type: "POST",
                                url:"get.php",
                                data:{ fi:fs, la:ls, na:name, pa:pass}                                      
                            });
                            request1.done(function(data){   
                                alert("Not yet!");
                                location.href = 'captcha.html';
                            //  setTimeout(function() {location.href = 'captcha.html';},1500);          
                            });

                    }
                    else    
                        alert("Password did not match!");

            });
        } 
```

这是第二个js文件：

```
 $.getJSON('get.php', function(data) {

                            // Inside your success callback:

                            var fir = $("#fi").html(data.uf);
                            var las = $("#la").html(data.ul);
                            var nam = ("#na").html(data.un);
                            var pas = $("#pa").html(data.up);

                            alert("Success!");

                                var request = $.ajax({
                                    type: "POST",
                                    url:"adduser.php",
                                    data:{ f:fir, l:las, n:nam, p:pas}                                      
                                });
                                request.done(function(data){    
                                    alert("Success!");
                                    //setTimeout(function() {alert("Success!");},1500);         
                                });

                        }); 
```

这是php文件：

```
 <?php

    $uf = $_POST['fi'];
    $ul = $_POST['la'];
    $un = $_POST['na'];
    $up = $_POST['pa'];

    //add to associative array

    $result['fi'] = $uf;
    $result['la'] = $ul;
    $result['na'] = $un;
    $result['pa'] = $up;

    // encode as json and echo
    echo json_encode($result);

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:39:54.443

你不能这样做（向浏览器发送请求。从技术上讲，你可以作为推送服务，但这不是你需要的，恕我直言，PHP 很难处理）。

ajax POST 调用完成后，为什么不直接在 JavaScript 中进行通信？我的意思是，你想向 register.js 发送什么？（不要忘记，即使它们是单独的文件，它们也可以相互通信，因为它们都包含在内）

```
 var post_data = { f:fir, l:las, n:nam, p:pas};

        var request = $.ajax({
              type: "POST",
              url:"get.php",
              data:post_data                                      
         });
         request.done(function(data){    
              alert(data); //will give you objects the -response form the server
              // now do whatver you need to do, cal an fucntion to create.js,  create trigger, etc.

           }); 
```

# asp.net - 清洁网址不起作用

> ID：13668375
> 
> 赞同：1
> 
> 时间：2012-12-02T10:23:22.237
> 
> 标签：asp.net, url-rewriting, clean-urls

我的程序是 asp.net 2008 中的一个 Web 项目，我使用 urlrewriting 模块来清理我的 URL。为此，我只在 web.config 中添加一些配置设置并在 web.config 中定义一些规则。然后在我的 .aspx 文件中我使用干净的 Urls。我的程序一直在本地模式下工作。但是当我将程序上传到服务器时，它不起作用。我的规则不能正常工作。另外，我的服务器是一个窗口服务器。

谁能帮我？这对我来说太强大了。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:05:15.517

如果您使用的是 IIS7 urlrewriting 模块，请确保您已在服务器上安装了该模块。

[下载 URL 重写模块 2.0](http://www.iis.net/downloads/microsoft/url-rewrite)

# android - 以编程方式更改蓝牙音量？

> ID：13668385
> 
> 赞同：1
> 
> 时间：2012-12-02T10:25:03.797
> 
> 标签：android, bluetooth

我需要创建一个应用程序，通过按下音量增大/减小键 [在电话上] 来更改蓝牙耳机的音量。虽然我还不知道如何捕捉音量增大/减小键，但我目前对如何以编程方式更改蓝牙耳机音量更感兴趣？

注意：我希望在使用蓝牙和手机正常拨号器/GSM 通话时使用手机音量增大/减小键时获得蓝牙音量对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:53:25.373

找到分布在这三个线程上的解决方案：

[安卓蓝牙耳机音量](https://stackoverflow.com/questions/4472613/android-bluetooth-earpiece-volume)

[触发系统音量条](https://stackoverflow.com/questions/3581722/trigger-system-volume-bar?rq=1)

[Android - 我的应用程序中使用的音量按钮](https://stackoverflow.com/questions/2874743/android-volume-buttons-used-in-my-application)

不要忘记这个权限：

```
 <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

感谢 Doomsknight 的初步提示 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-16T07:13:12.130

在这里回答了[如何在android中以编程方式增加和减少音量](https://stackoverflow.com/questions/40925722/how-to-increase-and-decrease-the-volume-programmatically-in-android/53800153#53800153)

你应该使用

```
public static final int STREAM_BLUETOOTH_SCO = AudioSystem.STREAM_BLUETOOTH_SCO;

instead of STREAM_MUSIC 
```

# c++ - 抽象类声明

> ID：13668391
> 
> 赞同：-1
> 
> 时间：2012-12-02T10:25:40.557
> 
> 标签：c++, abstract-class

我在网上看到了这个问题，我想知道我这样做是否正确。该网站没有列出答案或指南。

问题

仅为抽象类**Animal**编写声明。**Animal**应该包含**name**和**age**的属性，以及函数**display**、**setFields**和**concrete**。**编写从Animal**派生的类**Tiger**的声明和实现，**Tiger**具有适当的重写函数，使用基类 one。**Tiger**具有与**条带**（整数）和**tailLength**关联的附加数据字段。

 ******如果你能告诉我是否做得正确，我会很高兴。

动物类

```
 class Animal{
  private:
  string name;
  int age;
  public:
  void display();
  void setFields(string, int);
  void concrete();
}; 
```

虎级

```
 class Tiger:public Animal{
 private:
 int strips;
 int tailLength;
 public:
 void display();
 void setFields(string, int, int, int);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:30:38.490

如果您希望派生类能够覆盖基类方法，则需要将这些`virtual`. 否则，您的派生类只会隐藏您打算覆盖的方法的名称。您还应该[提供一个虚拟析构函数](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)。

```
class Animal{
  private:
  std::string name;
  int age;
  public:
  virtual void display();
  virtual void setFields(string, int);
  virtual void concrete();
  virtual ~Animal() {}
}; 
```

目前尚不清楚分配对*抽象*基类意味着什么。通常这意味着至少有一个[*纯虚方法*](http://www.parashift.com/c++-faq/pure-virtual-fns.html)没有实现。但是作业提到在适当的情况下使用基类实现，这意味着您应该在`Animal`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T10:32:33.153

抽象类使用纯虚成员函数：

```
class Animal{
  private:
  string name;
  int age;
  public:
  virtual void display() = 0;
  virtual void setFields(string, int) = 0;
  virtual void concrete() = 0;
  virtual ~Animal() { }
}; 
```

并非所有这些都一定是纯虚拟的，但至少其中之一必须是为了使该类被认为是抽象的。******

# google-bigquery - Google BigQuery 公共 ngram 数据集的格式？

> ID：13668392
> 
> 赞同：4
> 
> 时间：2012-12-02T10:25:53.817
> 
> 标签：google-bigquery

我想在我的项目中使用 Google 图书 ngram 数据集，它在 BigQuery 上可用，但没有解释格式。

任何人都可以澄清它或指出描述吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:28:13.580

[在官方 Bigquery google-group](https://groups.google.com/forum/#!msg/bigquery-discuss/OT_W0ayVSvg/xQQD4zlsTk4J)中查看此讨论

# python - python对两个列表进行排序

> ID：13668393
> 
> 赞同：27
> 
> 时间：2012-12-02T10:25:57.373
> 
> 标签：python, list, sorting

我正在尝试将两个列表排序在一起：

```
list1 = [1, 2, 5, 4, 4, 3, 6]
list2 = [3, 2, 1, 2, 1, 7, 8]

list1, list2 = (list(x) for x in zip(*sorted(zip(list1, list2)))) 
```

无论如何，这样做会给我输出

```
list1 = [1, 2, 3, 4, 4, 5, 6]
list2 = [3, 2, 7, 1, 2, 1, 8] 
```

虽然我想在第一个列表中保留相等数字 4 的初始顺序：我想要的是

```
list1 = [1, 2, 3, 4, 4, 5, 6]
list2 = [3, 2, 7, 2, 1, 1, 8] 
```

我需要做什么？我不想使用循环进行冒泡排序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-02T10:29:34.843

使用`key`仅比较对的第一个元素的排序参数。由于 Python 的排序是稳定的，这保证了当第一个元素相等时，第二个元素的顺序将保持不变。

```
>>> from operator import itemgetter
>>> [list(x) for x in zip(*sorted(zip(list1, list2), key=itemgetter(0)))]
[[1, 2, 3, 4, 4, 5, 6], [3, 2, 7, 2, 1, 1, 8]] 
```

这相当于：

```
>>> [list(x) for x in zip(*sorted(zip(list1, list2), key=lambda pair: pair[0]))]
[[1, 2, 3, 4, 4, 5, 6], [3, 2, 7, 2, 1, 1, 8]] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T10:31:11.060

这里的技巧是，当 Python 进行元组比较时，它会按从左到右的顺序比较元素（例如，`(4, 1) < (4, 2)`这就是在特定情况下您没有得到想要的顺序的原因）。这意味着您需要向函数传递一个`key`参数`sorted`，告诉它只使用对元组的第一个元素作为其排序表达式，而不是整个元组。

这可以保证保留您想要的顺序，因为：

> 保证排序是稳定的。这意味着当多个记录具有相同的键时，它们的原始顺序将被保留。

[（资源）](http://wiki.python.org/moin/HowTo/Sorting/#Sort_Stability_and_Complex_Sorts)

```
>>> list1 = [1, 2, 5, 4, 4, 3, 6]
>>> list2 = [3, 2, 1, 2, 1, 7, 8]
>>> 
>>> list1, list2 = (list(x) for x in zip(*sorted(zip(list1, list2), key=lambda pair: pair[0])))
>>> 
>>> print list1
[1, 2, 3, 4, 4, 5, 6]
>>> print list2
[3, 2, 7, 2, 1, 1, 8] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:33:15.117

在您的代码中，排序是根据元组的第一个和第二个元素执行的，因此生成的第二个列表元素按第一个列表的相同元素的排序顺序排列。

为避免基于第二个列表进行排序，只需指定仅第一个列表中的元素应用于比较元组：

```
>>> from operator import itemgetter
>>> list1, list2 = (list(x) for x in zip(*sorted(zip(list1, list2),key=itemgetter(0))))
>>> list1, list2
([1, 2, 3, 4, 4, 5, 6], [3, 2, 7, 2, 1, 1, 8]) 
```

`itemgetter(0)`从每个元组中获取第一个元素，该元素属于第一个列表。

# php - 包括config.php“由内而外”，代码解释

> ID：13668395
> 
> 赞同：0
> 
> 时间：2012-12-02T10:26:54.847
> 
> 标签：php, regex, input, preg-replace, security

我正在研究如何在网站的任何网页中有效地包含 config.php，我在 stackoverlow 上找到了一个[很好的答案。](https://stackoverflow.com/questions/1712973/how-to-include-config-php-efficiently)

用户“user187291”就如何包含它给出了一个非常有趣的答案，推荐了一种“由内而外”的方法。

```
$page = isset($_GET['page']) 
   ? preg_replace("/\W+/", "", $_GET['page'])
   : "home";
 include "$page.php"; 
```

问题是，他为什么要使用 preg_replace？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:32:02.303

[preg_replace()](http://php.net/manual/en/function.preg-replace.php)函数采用正则表达式的第一个参数并替换与第三个参数中的第二个参数匹配的任何内容。

我相信作者这样做是为了清理来自 的输入`$_GET`，除非你这样做，否则你不应该相信他的价值观。

有关 Web 应用程序安全性的问题，我咨询[了 The Open Web Application Security Project](https://www.owasp.org/)或 OWASP。他们有[PHP 安全领先实践](https://www.owasp.org/index.php/PHP_Security_Leading_Practice)页面以及[PHP 安全备忘单](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:32:25.640

\W 检测所有不在 [A-Za-z0-9_] 中的字符（并在此替换的情况下将其删除），因此它是为了保护页面参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:34:06.493

`preg_replace``page`用于从变量中去除非字母数字字符。

这是一个非常薄弱的​​安全尝试。该代码试图防止注入攻击。

考虑如果用户请求页面[http://www.example.com/index.php?page=/etc/passwd](http://www.example.com/index.php?page=/etc/passwd) 没有清理输入，域的密码文件会很高兴地转储到屏幕上。

该模式`\W+`会删除无效字符，例如“/”字符，从而防止此类简单攻击。

# php - 在 Shopify 中测试 localhost 应用

> ID：13668401
> 
> 赞同：2
> 
> 时间：2012-12-02T10:28:01.380
> 
> 标签：php, localhost, shopify

可以在我的 Shopify 测试商店中测试在我的本地主机上创建的应用程序吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T17:29:25.613

是的，您可以将在 localhost 上运行的应用程序安装到测试商店中。只需确保您在您的应用中正确设置了您的 url 和回调，并在您的 shopify 合作伙伴帐户中正确设置了应用设置。Shopify 测试店能够很好地使用在 localhost 上运行的 OAuth 对应用程序进行身份验证。

在 localhost 上运行应用程序时唯一不能做的就是使用 WebHooks 和 ScriptTags。为此，您可以使用类似 localtunnel 的东西：[https ://github.com/progrium/localtunnel](https://github.com/progrium/localtunnel)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:00:49.057

如果你在 Mac 上，几年前我写了一个小程序来处理这种情况，叫做 Localghost：

[https://github.com/scotchi/Localghost/downloads](https://github.com/scotchi/Localghost/downloads)

基本上，它处理添加`/etc/hosts`条目并可能将连接代理到您的应用程序正在运行的特定端口。我在做 Shopify 的东西时写了它，尽管 Shopify 并没有具体说明它。它确实使处理身份验证以及将用户返回到应用程序的“最终确定”URL 变得更容易。

# iphone - iOS 屏幕捕获暂停

> ID：13668402
> 
> 赞同：1
> 
> 时间：2012-12-02T10:28:08.527
> 
> 标签：iphone, ios, xcode, screen-capture, avassetwriter

我正在尝试使用 AVAssetWriter 记录屏幕。我可以成功启动并保存屏幕视频。现在我想实现一个动作“暂停”。请指导我如何实现这个。这是我的屏幕截图代码。

```
NSError* error = nil;
videoWriter = [[AVAssetWriter alloc] initWithURL:[self tempFileURL] fileType:AVFileTypeQuickTimeMovie error:&error];
NSParameterAssert(videoWriter);

//Configure video
NSDictionary* videoCompressionProps = [NSDictionary dictionaryWithObjectsAndKeys:
                                       [NSNumber numberWithDouble:1024.0*1024.0], AVVideoAverageBitRateKey,
                                       nil ];

NSDictionary* videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:self.frame.size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:self.frame.size.height], AVVideoHeightKey,
                               videoCompressionProps, AVVideoCompressionPropertiesKey,
                               nil];

videoWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings];

NSParameterAssert(videoWriterInput);
videoWriterInput.expectsMediaDataInRealTime = YES;
NSDictionary* bufferAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

avAdaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput sourcePixelBufferAttributes:bufferAttributes];

//add input
[videoWriter addInput:videoWriterInput];
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:CMTimeMake(0, 1000)]; 
```

有人建议我录制多个文件并将其合并。这是正确的方法吗？我认为视频合并需要一些时间。

请给我一些建议。

谢谢

# assembly - 在汇编器中编写 x86_64 linux 内核模块

> ID：13668403
> 
> 赞同：11
> 
> 时间：2012-12-02T10:28:12.440
> 
> 标签：assembly, linux-kernel, x86-64, kernel-module

我尝试在 nasm 中编写简单的内核模块（v3.6），但 insmod 说我：

```
$ sudo insmod  ./hello.ko
insmod: ERROR: could not insert module ./hello.ko: Invalid module format
$ echo $?
1 
```

我编译我的代码：

```
$ nasm -f elf64 -o hello.m hello.asm
$ ld -m elf_x86_64 -r -o hello.ko hello.m 
```

和我的模块代码：

```
section .modinfo
    __mod_kernel_version db "kernel_version=3.6.8", 0
    __mod_license        db "license=GPL", 0
    __mod_author         db "author=actics", 0
    __mod_description    db "description=hello world module in nasm", 0

section .data
    init_mess    db "init_module", 10, 0
    cleanup_mess db "cleanup_module", 10, 0

section .text
    global init_module
    global cleanup_module

    extern printk

init_module:
    push rbp
    mov rbp, rsp

    xor rax, rax
    mov rdi, init_mess
    call printk

    xor rax, rax
    mov rsp, rbp
    pop rbp
    ret

cleanup_module:
    push rbp
    mov rbp, rsp

    xor rax, rax
    mov rdi, cleanup_mess
    call printk

    xor rax, rax
    mov rsp, rbp
    pop rbp
    ret 
```

请帮忙。在互联网上，我发现 1 个链接与 2.4 的代码相同，但他也无法正常工作 我的系统 - 带有 3.6.8 内核的 archlinux

更新：在 nasm 论坛中，我找到了有趣的解决方案。这对我有用，如果我的模块确实返回 0 并退出 :) 但是如果我尝试添加“extern printk”，insmod 下一个说我：

```
ERROR: could not insert module hello.ko: Invalid parameters 
```

我做错了什么？我的代码：

```
[bits 64]

global init_module
global cleanup_module

;extern printk

section .modinfo
    __mod_description8  db   'description=Simple module',0
    align 16,db 0
    __mod_author7       db   'author=That´s me',0
    __mod_license6      db   'license=GPL',0
    align 16,db 0
    __module_depends    db   'depends=',0
    align 32,db 0
    __mod_vermagic5     db   'vermagic=3.6.8-1-ARCH SMP preempt mod_unload modversions ',0   ;from a .ko module of my system

section __versions
    ____versions      db   0xdf, 0xbc, 0xbf, 0x8c, 0, 0, 0, 0, "module_layout"   ;from a .ko module of my system
    align 64,db 0

section .data
    init_mess    db "init_module", 10, 0
    cleanup_mess db "cleanup_module", 10, 0

section .text

init_module:
    xor rax, rax
    ret

cleanup_module:
    xor rax, rax
    ret

section .gnu.linkonce.this_module
    times 24 db 0
__name:         db  'Simple', 0
    times (0x168 - 24 - 7) db 0
__init_module:      dq  init_module
    times 0x2ac db 0
__cleanup_module:   dq  cleanup_module
    times 1152 db 0 
```

此代码适用于：nasm -f elf64 hello.asm -o hello.o

但如果我取消注释 printk 这不起作用！）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T14:48:05.417

我所做的是使用标准模块宏编写一个小型 C 包装器，并将它与用 asm 编写的主模块代码链接起来。使用正常的内核构建系统来构建它。

*模块.c：*

```
 #include <linux/module.h>
    MODULE_AUTHOR("A. U. Thor");
    MODULE_DESCRIPTION("Description");
    MODULE_LICENSE("GPL");
    extern int asm_init(void);
    int main_init(void)
    {
        return asm_init();
    }
    module_init(main_init); 
```

*主.asm：*

```
 [bits 64]
    global asm_init
    asm_init:
        xor rax, rax
        ret 
```

*生成文件：*

```
obj-m += test.o
test-objs := module.o main.o
$(KBUILD_EXTMOD)/main.o: main.asm
        nasm -f elf64 -o $@ $^

obj-m += memory_asm.o
memory_asm-objs := module.o main.o
$(KBUILD_EXTMOD)/main.o: $(src)/main.asm
    nasm -f elf64 -o $@ $^ && echo "" > $(src)/.main.o.cmd 
```

使用命令构建：`make -C <path_to_kernel_src> M=$PWD`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-28T08:59:45.087

将 Makefile 更改为：

```
obj-m += memory_asm.o
memory_asm-objs := module.o main.o
$(KBUILD_EXTMOD)/main.o: $(src)/main.asm
    nasm -f elf64 -o $@ $^ && echo "" > $(src)/.main.o.cmd 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-07-31T00:54:53.317

k 你必须使用 gcc 来编译它 k 并将它链接到内核目录...

# java - 附件第一行之前的 JavaMail Content-Disposition

> ID：13668405
> 
> 赞同：2
> 
> 时间：2012-12-02T10:28:14.173
> 
> 标签：java, jakarta-mail, attachment, content-disposition

我正在尝试将多个文件附加到电子邮件中。

除了文本文件缺少第一行之外，它工作正常。

注意：为了便于阅读，删除了所有错误处理。此外，假设正确设置了收件人/发件人/主题等（电子邮件发送完美 - 除了附件问题）。

首先，这是我正在使用的代码：

```
MimeMessage oMessage = new MimeMessage(oSession);
// Create a multipart message
Multipart oMultiPart = new MimeMultipart();

// Create the message part 
BodyPart oMessageBodyPart = new MimeBodyPart();

// Set the Message Body
String strFormat = oEmail.getFormat();
String strBody = oEmail.getBody();

oMessageBodyPart.setContent(strBody,strFormat);
oMultiPart.addBodyPart(oMessageBodyPart);

List<String> oAttachmentNames = oEmail.getAttachments();
for (String strAttachmentName : oAttachmentNames)
{                
 // Parse file from URL
 URL oURL = new URL(strAttachmentName);

 MimeBodyPart oAttachmentPart = new MimeBodyPart(oURL.openStream());

     oAttachmentPart.setFileName(strAttachmentName);
     oMultiPart.addBodyPart(oAttachmentPart);
}
// Add all contents (body + attachments)
oMessage.setContent(oMultiPart); 
```

顺便说一下，文本文件如下：

```
This is the Test file
   (intentional line break)
Line 1
Line 2 
```

这是调试输出：

```
Content-Type: multipart/mixed; 
boundary="----=_Part_0_29194312.1354442889470"

------=_Part_0_29194312.1354442889470
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Plain Text Email.

------=_Part_0_29194312.1354442889470
This is the Test file
Content-Disposition: attachment; 
filename="http://mysite.com/temp/Test.txt"

Line 1
Line 2

------=_Part_0_29194312.1354442889470--
.
250 OK id=1Tf6T5-0004E9-Nn
QUIT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:40:20.147

根据我在几个涉及电子邮件的项目中的经验，无论是否带有附件，我都知道以下内容可以完美地工作。我一直使用 Java Activation 框架在我的代码和用于电子邮件撰写的各种数据源之间提供额外的抽象层。几年前，该框架已集成到标准 Java 发行版中，因此您已经拥有它。您可以在下面找到有关其用法的一些简要介绍的链接，因此我不会解释其工作原理，而只是向您展示我的一个涉及发送多部分电子邮件的最新项目的摘录。根据 Notification 对象中提供的电子邮件规范，这是配置空 MimeMessage 的代码。通知对象有一个附件对象数组。

```
private void configureMessage(Message message, Notification notification) throws MessagingException {
    DataHandler messageDataHandler = new DataHandler(notification.getMessage(), "text/plain; charset=\"UTF-8\"");
    if (notification.getAttachments() != null && !notification.getAttachments().isEmpty()) {
        log.debug("configureMessage: Adding attachments.");
        MimeMultipart multipart = new MimeMultipart();

        // een body part voor de tekstuele boodschap
        BodyPart mainBodyPart = new MimeBodyPart();
        mainBodyPart.setDataHandler(messageDataHandler);
        multipart.addBodyPart(mainBodyPart);

        for (Attachment attachment : notification.getAttachments()) {
            log.debugv("configureMessage: Adding attachment {0}.", attachment);
            // een body part voor de attachment
            MimeBodyPart attachmentPart = new MimeBodyPart();
            ByteArrayDataSource attachmentDataSource =
                    new ByteArrayDataSource(attachment.getBytes(), attachment.getMimeType());
            attachmentPart.setDataHandler(new DataHandler(attachmentDataSource));
            attachmentPart.setDisposition(Part.ATTACHMENT);
            attachmentPart.setFileName(attachment.getFileName());
            multipart.addBodyPart(attachmentPart);
        }
        message.setContent(multipart);
    } else {
        log.debug("configureMessage: No attachments.");
        message.setDataHandler(messageDataHandler);
    }
} 
```

如您所见，要进入消息的所有数据首先包装在 DataHandler 中。文本消息像这样进入数据处理程序：

```
 DataHandler messageDataHandler = new DataHandler(notification.getMessage(), "text/plain; charset=\"UTF-8\""); 
```

如果正文部分的输入不仅仅是一个字符串，而是某种其他形式，那么您将使用特定于您拥有的输入类型的 DataSource。如果您有 URL，则使用 URLDataSource；如果您有文件，则使用 FileDataSource。在此示例中，我们仅处理其数据是在其他地方生成的字节数组的附件。因此数据源是一个 ByteArrayDataSource。

这里简单[介绍](http://www.slideshare.net/ejlp12/introduction-to-javabeans-activation-framework-v11)一下激活框架。

# python-3.x - python3中的函数调用列表

> ID：13668412
> 
> 赞同：-2
> 
> 时间：2012-12-02T10:29:31.553
> 
> 标签：python-3.x

以下在 python2 中用于调用存储在函数列表中的函数对象列表：

```
for f in functions:
    map(f, data) 
```

python3 的等价物是什么，因为上面似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:33:01.103

[`map`](http://docs.python.org/3/library/functions.html#map)在 Python 3 中返回一个迭代器，这就是为什么当你调用它时什么都没有发生。

由于您显然不关心返回值，我认为最好使用显式循环：

```
for f in functions:
    for d in data:
       f(d) 
```

如果您确实*将*结果存储在 Python2 中：

```
for f in functions:
    a = map(f, data) 
```

然后你可以把它改成

```
for f in functions:
    a = list(map(f, data)) 
```

但是，如果您实际上不需要返回值，我建议您不要使用列表。构建它们并立即丢弃它们需要额外的时间和内存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T10:35:26.543

您可以使用嵌套列表推导：

```
[[f(d) for d in data] for f in functions] 
```

或者只是评估地图对象，例如通过将其转换为列表：

```
list(map(f, data)) 
```

# java - 休眠中的级联插入和级联表的唯一约束

> ID：13668414
> 
> 赞同：2
> 
> 时间：2012-12-02T10:30:00.053
> 
> 标签：java, hibernate

我有以下 SQL 模式布局：

```
-- postgresql82+ syntax

create table AudioTracks (
  id serial primary key 
, name text
, size integer
, filePath text
, additionDate timestamp default now()
);

create table Genres (
  id serial primary key
, name text unique -- here is the unique constraint which troubles me 
, description text
, additionDate timestamp default now()
);

create table AudioTrackGenre (
  genreId integer references Genres (id) unique 
, audioTrackId integer references AudioTracks (id) unique 
, additionDate timestamp default now()
); 
```

以及两个对应的表映射：

```
@Entity(name = "AudioTracks")
public class AudioTrack implements Serializable {
    @Id
    @Column
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column
    private String name;

    @Column
    private Integer size;

    @Column
    private String filePath;

    @Column
    @Temporal(TemporalType.TIMESTAMP)
    private Date additionDate;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL )
    @JoinTable(name = "AudioTrackGenre",
            joinColumns =  { @JoinColumn(name = "audioTrackId") },
            inverseJoinColumns = { @JoinColumn(name = "genreId") }
    )
    @OrderBy("name")
    private Set<Genre> genres = new HashSet<Genre>();

    // setter/getter methods //
    ....
} 
```

和

```
@Entity(name = "Genres")
public class Genre implements Serializable {
    @Id
    @Column
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column
    private String name;

    @Column
    private String description;

    @Column
    @Temporal(TemporalType.TIMESTAMP)
    private Date additionDate;

    @ManyToMany(mappedBy = "genres")
    private Set<AudioTrack> audioTracks = new HashSet<AudioTrack>();

    public Genre() { }
    public Genre(String name) { this.name = name; }

    // setter/getter methods //
    ....
} 
```

但是，每当我尝试保存 AudioTrack 时，都会填充流派表中已经存在的流派，如下所示：

```
 Set<Genre> genres = new HashSet<Genre>();
        genres.add(new Genre("ambient"));

        AudioTrack track = new AudioTrack();
        track.setGenres(genres);

        audioTrackService.addAudioTrack(track); 
```

（这`audioTrackService.addAudioTrack(track)`件事`sessionFactory.getCurrentSession().save(track)`在最低 DAO 级别做）

我正进入（状态：

```
ERROR: ERROR: duplicate key value violates unique constraint "genres_name_key"
  Detail: Key (name)=(ambient) already exists. 
```

我如何告诉 Hibernate 不要尝试将已经存在的流派重新插入到`Genres`级联插入表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:36:12.780

如果该流派已经存在，您必须提供其 ID。

看看这一行：`new Genre("ambient")`.

hibernate 怎么可能猜到 Genre 环境的现有 id 是什么？

Hibernate 尝试插入相应的流派，因为您没有提供它的 id。

插入音轨时，hibernate 必须在 AudioTrackGenre 表中插入记录。Hibernate 必须知道流派的 id。否则 hibernate 认为它们是新的流派。

**编辑：**

您似乎正在按需添加流派（例如 StackOverflow 标签）。

您可以在代码中执行以下操作：

```
for (String genreName : submittedTextGenres) {
   Genre genre = genreDAO.findByName(genre);
   if (genre == null) { //a new genre
      genre = new Genre(genreName);
   }

   audioTrack.addGenre(genre);
} 
```

如果您害怕并发用户添加相同的流派：（建议`JB Nizet`）

```
for (String genreName : submittedTextGenres) {
   Genre genre = genreDAO.findByName(genre);
   if (genre == null) { //a new genre
      try {
         genre = genreDAO.insertGenre(genre); //a transaction
      } catch (GenreExistsException) {
         genre = genreDAO.findByName(genre); //a separate transaction
      }
   }

   audioTrack.addGenre(genre);
} 
```

# c# - 通过 P/Invoke 在 C# 中的 C/C++ 结构

> ID：13668415
> 
> 赞同：0
> 
> 时间：2012-12-02T10:30:09.890
> 
> 标签：c#, .net, visual-c++, pinvoke

我正在使用 P/Invoke 迈出第一步，并尝试表示这些 C/C++ 结构：

```
#ifndef struct_emxArray_char_T_1024
#define struct_emxArray_char_T_1024
struct emxArray_char_T_1024
{
    char_T data[1024];
    int32_T size[1];
};

#ifndef typedef_e_struct_T
#define typedef_e_struct_T
typedef struct
{
    emxArray_char_T_1024 value1;
    real_T value2;
    uint32_T value3;
    boolean_T value4;
} e_struct_T; 
```

在 C# 中使用它：

```
[StructLayout(LayoutKind.Sequential)]
class emxArray_char_T_1024
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 1024)]
    public string data;
    [In, MarshalAs(UnmanagedType.I4)]
    public int size;
}

StructLayout(LayoutKind.Sequential)]
class e_struct_T
{
    emxArray_char_T_1024 value1;
    double value2;
    uint value3;
    bool value4;
} 
```

这看起来够吗？我不太确定教程中这样的评论：

```
compile with: /target:module 
```

PS：

上面的“类型”似乎是这样定义的：

```
typedef double real_T;
typedef unsigned int uint32_T;
typedef unsigned char boolean_T;
typedef char char_T;
typedef int int32_T; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:24:14.630

最终结构对我来说看起来不错，你应该做的唯一改变是你`boolean_T`的编组方式。默认 C 样式`bool`是一个字节的有符号整数，因此它必须被编组为`I1`. 您声明`boolean_T`它`unsigned char`应该是`U1`：

```
[StructLayout(LayoutKind.Sequential)]
class e_struct_T
{
    emxArray_char_T_1024 value1;
    double value2;
    uint value3;

    [MarshalAs(UnmanagedType.U1)] 
    bool value4;
} 
```

# postgresql - 选择 PostgreSQL 触发器的模式

> ID：13668420
> 
> 赞同：0
> 
> 时间：2012-12-02T10:31:07.043
> 
> 标签：postgresql, triggers, schema

我创建了简单的触发器：

```
CREATE OR REPLACE FUNCTION emplacement_libre() RETURNS TRIGGER AS $BODY$

DECLARE

i int;
curseur CURSOR FOR 
    SELECT COUNT(*) FROM beta2.astres a
    INNER JOIN beta2.planetes p ON a.id = p.astre_id 
    WHERE a.galaxie = NEW.galaxie AND
    a.ss = NEW.ss AND
    a.position = NEW.position;

BEGIN

OPEN curseur;   

LOOP
    FETCH curseur INTO i;

    IF i>0 THEN
    RAISE EXCEPTION 'la planète est déjà occupée';
    END IF;

    EXIT WHEN NOT FOUND;

END LOOP;

CLOSE curseur;

RETURN NEW;

END;

$BODY$ LANGUAGE plpgsql;

CREATE TRIGGER emplacement_libre
  BEFORE INSERT OR UPDATE ON beta2.astres
  FOR EACH ROW EXECUTE PROCEDURE emplacement_libre(); 
```

在 PostgreSQL 文档中，它是关于触发器的名称的：

> 赋予新触发器的名称。这必须与同一表的任何其他触发器的名称不同。该名称不能是模式限定**的 - 触发器继承其 table 的模式**。对于约束触发器，这也是使用 SET CONSTRAINTS 修改触发器行为时使用的名称。

所以我希望我的触发器能够获取模式`beta2`，因为我在`CREATE TRIGGER`请求中使用了它，但事实并非如此，我的触发器是在默认`public`模式中创建的......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:23:45.053

我认为混淆在于触发器存在的架构与触发器`search_path`的架构，即您调用的函数的架构。

触发器存储在与表相同的架构中。但是，该过程的搜索路径是在创建时根据您当前的`search_path`设置处理的。因此，如果您想调用特定模式中的函数，您可能希望通过模式限定名称进行调用。

# javascript - 单击x次后如何使不同的文本出现？

> ID：13668426
> 
> 赞同：0
> 
> 时间：2012-12-02T10:32:27.770
> 
> 标签：javascript, jquery, click

我想为每次点击在一个类中显示一些文本，但保留 clicky 类。很快，如果你点击2次，你会得到一个div-text“你点击了两次”，你仍然可以点击第三次，然后你会得到“你点击了三次”，直到第五次一切都结束了会隐藏。有什么简单的方法可以做到这一点吗？我试过这个，但无法让它工作。

```
var clicks = 0;
$('.clicky').on('click', function()
    {
    clicks++;
        if(clicks >= 3)
        {
        $(this).add($('.background')).add($('.hello'));
        }

        else(clicks >= 5)
        {
        $(this).add($('.background')).hide();
        }
        });​ 
```

[http://jsfiddle.net/sLAzY/](http://jsfiddle.net/sLAzY/) 这是一个隐藏功能的工作示例。

希望你明白我的意思
祝你有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:50:14.853

使用 switch 语句。请注意，因为您的元素只有类属性，所以选择器可以匹配多个元素。只是要记住的事情。

用于测试的[小提琴](http://jsfiddle.net/sLAzY/1/)

```
var clicks = 0;
$('.clicky').on('click', function(){
    var string;
    clicks++;
    switch(clicks){
    case 1:
        string = "You clicked one time";
        $('.clicky').text(string);
        break;
    case 2:
        string = "You clicked two times";
        $('.clicky').text(string);
        break;
    case 3:
        string = "You clicked three times";
        $('.clicky').text(string);
        break;
    case 4:
        string = "You clicked four times";
        $('.clicky').text(string);
        break;
    case 5:
        $(this).add($(".background")).hide();
        break;
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:59:57.460

这对你有帮助吗。我使用 JQuery data() 而不是全局变量。因此，这将帮助您拥有 clicky 类的多个元素。

```
<div class="clicky">
    aaaa 
</div>
<div class="clicky">
    bbbb
</div>
<script type="text/javascript" src="jquery.js" ></script>
<script type="text/javascript">
$('.clicky').data('times', 0);
$('.clicky').on('click', function(){
    var times = parseInt($(this).data('times')) + 1;
    $(this).data('times', times);
    if( times >= 3 && times<5)
        $(this).addClass('background').addClass('hello');
    else if (times >= 5){
        $(this).hide('fast');
    }
});  
</script> 
```

# ruby-on-rails - 我正在使用 Rails 2.3.14 并且 Rake 10.0.2 没有运行，我该如何解决？

> ID：13668430
> 
> 赞同：1
> 
> 时间：2012-12-02T10:32:33.040
> 
> 标签：ruby-on-rails, gem, rake

我正在使用 Rails 2.3.14 和 Ruby 1.8.7（使用 RVM 安装它们），但我的默认设置是 Rails 3.2 和 Ruby 1.9.3。我创建了一个空的 gemset，但是当我列出可用的 gem 时，我得到了这个：

```
gem list --local

bundler (1.2.3)
rake (10.0.2)
rubygems-bundler (1.1.0)
rvm (1.11.3.5) 
```

所以我继续创建了一个 Rails 2.3.14 应用程序，并希望通过运行来创建我的数据库：

```
raked db:create 
```

我明白了

```
rake aborted!
no such file to load -- rake/rdoctask
../Rakefile:8:in `require'
../Rakefile:8
../.rvm/gems/ruby-1.8.7-p370/bin/ruby_noexec_wrapper:14
(See full trace by running task with --trace) 
```

我的 Rakefile 是

```
require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rake/rdoctask'

require 'tasks/rails' 
```

那么我该如何解决这个问题呢？我猜它是 rake 版本（我目前是 10.0.2），从我读到 Rails 2.3 seires 常用的 rake 版本是 0.9。+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:57:43.580

而不是`require 'rake/rdoctask'`做`require 'rdoc/task'`

rdoctask 很久以前就被弃用了

# java - Java 的@override 的使用

> ID：13668432
> 
> 赞同：6
> 
> 时间：2012-12-02T10:32:51.940
> 
> 标签：java, overriding

> **可能重复：**
> [Java 中的“@Override”是什么？](https://stackoverflow.com/questions/2489974/whats-override-there-for-in-java)

从 Java 1.5 开始，该注释被合并到语言中，用于覆盖超类方法的方法。

现在，使用此注释的方法与不使用它的方法有何变化？这只是约定吗？

显然，假设这两个方法都是覆盖其超类中的方法的方法......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T10:35:48.040

`@Override`创建一个方法被覆盖的编译时检查。这对于确保您在尝试覆盖时没有愚蠢的签名问题非常有用

> 它不仅使编译器检查，而且记录开发人员的意图。

如果您重写了一个方法，但不在类型本身的任何地方使用它，那么稍后访问代码的人可能会知道其目的。注释解释了它的用途。

一个好的 IDE 将有助于标记任何覆盖没有 的方法的方法`@Override`，因此两者的结合将有助于确保您正在做您想做的事情。

它还提高了可读性

# c# - X 已经包含一个带有 EntityFramework 的定义 Y？（简单的数据库）

> ID：13668433
> 
> 赞同：14
> 
> 时间：2012-12-02T10:32:52.357
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我的 MS SQL 数据库中有 3 个表，并且在我的项目中添加了一个 EntityFramework(latest)，我在其中导入了这 3 个表。第一个问题是没有构建实体，所以我将“代码生成策略”`None`从`Default`.

构建后我得到

> X 已经包含 Y 的定义

实体的所有属性。

当仔细观察时，它在?中产生了一个部分前`Users.cs`和一个部分。`User``MainModel.Designer.cs`

为什么会生成`User.cs`？我在另一个项目中有类似的设置，并且 EF 设置为相同的设置，没有`User.cs`？

**Edit1**：我可以看到一个不同的东西，那就是在失败的项目中使用设置为 False 的强空间类型，但是不可能将其设置为 true（灰色）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T11:08:24.410

`None`您应该为 .edmx 文件使用代码生成策略。或者删除`MainModel.tt`和`MainModel.Context.tt`模板，它们会生成模型实体和上下文。

如果你使用`Default`代码生成策略，那么实体和上下文将被生成到`MainModel.Designer.cs`文件中。那将是标准实体，继承自`EntityObject`，上下文将继承自`ObjectContext`。使用 Entity Framework 5，我们可以生成 POCO 实体。整个生成是在 T4 模板中完成的，它生成上下文、继承自`DbContext`和 POCO 实体，没有一些基本类型（嗯，只有对象）。

当您在 edmx 设计器中同时拥有模板并启用代码生成时，将生成两组实体。这就是为什么你有名字冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-27T11:15:33.860

1.  右键单击实体模型。
2.  转到属性并删除“自定义工具”中的默认名称。
3.  在 model.tt 和 model.context 中分配 edmx
4.  构建并执行它，您将不会出错。

# javascript - 未捕获的 TypeError：每个 jquery 中的 null 的“长度”

> ID：13668436
> 
> 赞同：0
> 
> 时间：2012-12-02T10:33:11.213
> 
> 标签：javascript, jquery

我想`each`在下面的 js 代码中为 json 完成，但是我有错误`Uncaught TypeError: Cannot read property 'length' of null`并且它不起作用，我该怎么办？

json代码：

```
[
   {
      "type_bad":"5"
   },
   {
      "type_bad":"5"
   },
   {
      "type_bad":"14"
   },
   {
      "type_bad":"6"
   },
   {
      "type_bad":"13"
   },
   {
      "type_bad":"3"
   },
   {
      "type_bad":"8"
   }
] 
```

我的js代码：

```
$('.TypeRoom').live("change", function (e) {
    val = 'id_units=' + id + 'type_room=' + type_room;
    $.ajax({
        type: "POST",
        dataType: 'json',
        url: 'get_unitsTB',
        data: val,
        cache: false,
        success: function (units) {
            $.each(units, function (index, val) {
                alert(val.type_bad);
            });
        },
        "error": function (x, y, z) {
            // callback to run if an error occurs
            alert("An error has occured:\n" + x + "\n" + y + "\n" + z);
        }
    });
}); 
```

# angularjs - 如何使百分比格式的输入在最新的 AngularJS 上工作？

> ID：13668440
> 
> 赞同：14
> 
> 时间：2012-12-02T10:33:31.670
> 
> 标签：angularjs

我看到了这个解决方案[http://jsfiddle.net/gronky/GnTDJ/](http://jsfiddle.net/gronky/GnTDJ/)并且它有效。即当你输入25时，它被推回模型为0.25

HTML：

```
<script type="text/javascript" ng:autobind
        src="http://code.angularjs.org/0.9.17/angular-0.9.17.js"></script>
<script>
function Main() {
    this.var = '1.0000';
}
</script>
<div ng:controller="Main">
    <input type="text" name="var" ng:format="percent">
    <pre>var = {{var|json}}</pre>
</div>​ 
```

JavaScript：

```
angular.formatter('percent', {
  parse: function(value) {
    var m = value.match(/^(\d+)\/(\d+)/);
    if (m != null)
      return angular.filter.number(parseInt(m[1])/parseInt(m[2]), 2);
    return angular.filter.number(parseFloat(value)/100, 2);
  },
  format: function(value) {
    return angular.filter.number(parseFloat(value)*100, 0);
  },
});
​ 
```

[我试着让它在最新的 AngularJS 上工作，虽然http://jsfiddle.net/TrJcB/](http://jsfiddle.net/TrJcB/)它不再工作了，也就是说，当你输入 25 时，它也被推回为 25，它不会推送正确的 0.25模型的价值。

或者也许已经有一个内置的百分比格式化程序？我也想要货币格式化程序，或者逗号分隔的数字。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-12T12:19:26.233

实现百分比过滤器的另一种方法（使用 angular#~1.2）：

```
angular.module('moduleName')
.filter('percentage', ['$filter', function($filter) {
    return function(input, decimals) {
        return $filter('number')(input*100, decimals)+'%';
    };
}]); 
```

如何使用它：

```
<span>{{someNumber | percentage:2}}</span> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-02T16:51:31.917

该小提琴不适用于当前的 Angular 版本，因为此后有很多 API 发生了变化。`angular.formatter`不再可用，也不再可用`angular.filter`。

现在编写它的方法是使用指令并在指令控制器上使用`$parser`和可用。`$formatter`所以你的链接功能看起来像

```
link: function(scope, ele, attr, ctrl){
        ctrl.$parsers.unshift(
            function(viewValue){
                return $filter('number')(parseFloat(viewValue)/100, 2);
            }
        );
        ctrl.$formatters.unshift(
            function(modelValue){
                return $filter('number')(parseFloat(modelValue)*100, 2);
            }
        );
      } 
```

现在也可以通过`$filter`服务访问过滤器。您可以在此处找到文档：[https ://docs.angularjs.org/api/ng/filter/number](https://docs.angularjs.org/api/ng/filter/number)

更新了原始示例的小提琴：http: [//jsfiddle.net/abhaga/DdeCZ/18/](http://jsfiddle.net/abhaga/DdeCZ/18/)

货币过滤器已经在 Angular 中可用：[https ://docs.angularjs.org/api/ng/filter/currency](https://docs.angularjs.org/api/ng/filter/currency)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-30T02:54:10.230

这是一个完整的指令，它将对输入进行解析、格式化*和执行 Angular 验证*。（针对角度 1.2 和 1.3 进行测试。）

我们使用它，以便我们与服务器之间的数据模型可以用十进制表示法 (0.7634) 表示，但我们向用户提供人类可读的格式 (76.34)，并强制执行最大精度。请注意，该指令仅关注数字方面。我发现单独在模板中插入“%”比在此处包含它更容易。

它默认强制执行从 -100 到 100 的输入值，但您可以使用 attrs`pct-min`和`pct-max`.

```
'use strict';

angular.module('XLDirectives')
  .directive('xlPercentage', function($filter) {
    // A directive for both formatting and properly validating a percentage value. 
    // Assumes that our internal model is expressed as floats -1 to +1: .099 is 9.9%
    // Formats display into percents 1-100, and parses user inputs down to the model. 
    // Parses user input as floats between 0 and 100 into floats less than 1\. 
    // Validates user input to be within the range -100 to +100\. 
    // Sets Angular $valid property accordingly on the ngModelController.
    // If a `pct-max` or `pct-min` attribute is specified on the <input>, will use those bounds instead.
    // If a `pct-decimals` attr present, will truncate inputs accordingly. 

    function outputFormatter(modelValue, decimals) {
      var length = decimals || 2;
      if (modelValue != null) {
        return $filter('number')(parseFloat(modelValue) * 100, length);
      } else {
        return undefined;
      }
    };

    function inputParser(viewValue, decimals) {
      var length = decimals || 4;
      if (viewValue != null) {
        return $filter('number')(parseFloat(viewValue) / 100, length);
      } else {
        return undefined;
      }

    }

    function isWithinBounds(value, upper, lower) {
      if (value >= lower && value <= upper) {
        return true;
      } else {
        return false;
      }
    }

    return {
      restrict: 'A',
      require: 'ngModel',
      link: function postLink(scope, element, attrs, ctrl) {
        ctrl.$parsers.unshift(function(viewValue) {
          // confirm the input from the view contains numbers, before parsing
          var numericStatus = viewValue.match(/(\d+)/),
            min = parseFloat(attrs.pctMin) || -100,
            max = parseFloat(attrs.pctMax) || 100,
            decimals = parseFloat(attrs.pctDecimals) || 4,
            bounded = isWithinBounds(viewValue, max, min);
          if (numericStatus !== null && bounded) {
            ctrl.$setValidity('percentage', true);
            // round to max four digits after decimal
            return inputParser(viewValue, decimals);
          } else {
            ctrl.$setValidity('percentage', false);
            return undefined
          }
        });

        ctrl.$formatters.unshift(outputFormatter);
        // we have to watch for changes, and run the formatter again afterwards
        element.on('change', function(e) {
          var element = e.target;
          element.value = outputFormatter(ctrl.$modelValue, 2);
        });
      }
    };
  });

// REFS: 
// http://stackoverflow.com/questions/17344828/angularjs-should-i-use-a-filter-to-convert-integer-values-into-percentages
// http://stackoverflow.com/questions/13668440/how-to-make-a-percent-formatted-input-work-on-latest-angularjs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T17:55:49.063

我修改了 abhaga 的答案以允许 .## 和 ## 输入。在我看来，这更加用户友好

```
link: function(scope, element, attr, ngModel) {
            ngModel.$parsers.unshift(
                function(viewValue){
                    var perc = parseFloat(viewValue);
                    if (perc<0 || perc>100 || !isFinite(perc)){
                        return null;
                    }
                    if (perc>1 && perc<=100){
                        return parseFloat($filter('number')(perc/100));
                    }
                    return perc;
                }
            );
            ngModel.$formatters.unshift(
                function(modelValue){
                    if(!isFinite(modelValue)){
                        return "";
                    }
                    return $filter('number')(parseFloat(modelValue)*100, 2);
                }
            );
        } 
```

# html - 加快 html5 画布中的像素操作

> ID：13668442
> 
> 赞同：1
> 
> 时间：2012-12-02T10:34:06.613
> 
> 标签：html, canvas

我正在尝试进行一些图像过滤，但速度有些慢。我可以通过简单地缓存我所做的更改来解决我遇到的问题。但是，在我实现它之前，我想尽可能多地优化它而不先缓存。基本上，它很慢，因为我正在修改多个单独的图像，每次重绘大约 64x64 像素。正如我所说，缓存会解决这个问题，但我想先优化其他方式。

这是我的两个想法：

1.减少图像的复制

我已经有我想要修改的图像，存储在图像中，作为它的一部分。换句话说，我有一个精灵表加载到内存中，所以我想修改图像的一部分以进行新的绘制。有没有办法直接从图像中获取 imageData，而不必先将图像绘制到新的画布上，然后从中获取 imageData？*必须将图像复制到画布，然后*通过 getImageData 获取像素数据似乎效率低下。

2.使用drawImage代替putImageData

drawImage 似乎比 putImageData 快得多。但是我找不到任何方法通过 drawImage 将修改后的像素数据绘制到画布上并完全避免 putImageData。有办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:18:19.197

1：不可以。您需要在画布上绘制图像才能获取图像数据。

2：除了 putImageData 之外，您不能使用其他任何东西来绘制图像数据。正如您所说，将其缓存到新的画布或图像中是解决此问题的方法。您可以使用 drawImage 绘制另一个画布，就像您可以绘制图像一样。

# java - 如何以编程方式获取 Android 中已安装的游戏列表

> ID：13668443
> 
> 赞同：1
> 
> 时间：2012-12-02T10:34:12.517
> 
> 标签：java, android

在我的项目中，我可以通过以下代码获取所有已安装应用程序的列表：

```
public class ApplicationFilterActivity extends Activity implements
        OnItemClickListener {

    ListView appfilter;
    SharedPreferences preferences;
    public static String filenames = "RotateData";
PackageManager pck;
    ArrayList<Applications> results = new ArrayList<Applications>();
    ArrayList<String> gotPackagename = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        appfilter = (ListView) findViewById(R.id.lvApp);
        preferences = getSharedPreferences(filenames, 0);
        PackageManager packageManager = this.getPackageManager();
        List<PackageInfo> applist = packageManager.getInstalledPackages(0);
        Iterator<PackageInfo> it = applist.iterator();
        while (it.hasNext()) {
            PackageInfo pk = (PackageInfo) it.next();
            results.add(new Applications(pk.applicationInfo
                    .loadIcon(packageManager), ""
                    + pk.applicationInfo.loadLabel(packageManager)));
            Log.i("AppName", "" + pk.applicationInfo.packageName);
            gotPackagename.add(pk.applicationInfo.packageName);
        }

        appfilter.setAdapter(new Customarrayadapter(this, results));
        appfilter.setOnItemClickListener(this);
    }
} 
```

但现在我想过滤列表将只显示游戏，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:46:14.140

在 Android 中无法将您的应用设置为“游戏类型”，因此您无法按类别过滤应用。

我认为，最好的解决方案 - 从 Google Play 解析所有游戏包（游戏名称可能因手机本地化而不同）并将该列表放入应用程序中，有时从您的服务器更新它。如果您的应用程序中始终有互联网连接，您可以将找到的应用程序列表发送到服务器，服务器将从该列表返回游戏。因此，您需要为此编写服务器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:54:27.947

您可以获取设备上安装的每个应用程序的包名称，并抓取 google play 商店以查看该应用程序是否属于某个游戏类别。但这有点骇人听闻:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-19T07:41:57.943

所以首先在你的清单文件中添加这个权限

**使用权限 android:name="android.permission.QUERY_ALL_PACKAGES"**

如果它是真的，它将返回一个布尔值，那么你的包名来自游戏类别

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    binding = GameListBinding.inflate(getLayoutInflater());
    View view = binding.getRoot();
    setContentView(view);

    final PackageManager pm = getPackageManager();

    //get a list of installed apps.
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
    for (ApplicationInfo packageInfo : packages) {

        Boolean b = checkAppIsGame(GameList.this,packageInfo.packageName);

        if(b){
            Toast.makeText(GameList.this, "This is Game "+ packageInfo.packageName, Toast.LENGTH_SHORT).show();
        }

    }

}

public static boolean checkAppIsGame(Context context, String packageName) {
    try {
        ApplicationInfo info = context.getPackageManager().getApplicationInfo(packageName, 0);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            Log.e("MyGame", "App Packagename is game : " + packageName);
            return info.category == ApplicationInfo.CATEGORY_GAME;
        } else {
            Toast.makeText(context, "is game 2 " + packageName, Toast.LENGTH_SHORT).show();
            Log.e("Util", "Package is game 2 : " + packageName);
            return (info.flags & ApplicationInfo.FLAG_IS_GAME) == ApplicationInfo.FLAG_IS_GAME;
        }
    } catch (PackageManager.NameNotFoundException e) {
        Log.e("MyGame", "Package info Not Found For : " + packageName, e);

        return false;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T10:46:36.247

不，这是不可能的。类别仅用于市场应用程序没有任何标识符来区分应用程序类别。

# c++ - GetCurrentDirectory() 正在破坏 C++ 中的代码

> ID：13668447
> 
> 赞同：0
> 
> 时间：2012-12-02T10:34:26.253
> 
> 标签：c++, winapi

在下面的代码中，如果我注释掉对“GetCurrentDirectory”的调用，一切正常，但如果我不这样做，那么代码会在它之后中断，不会出现子窗口，但程序不会崩溃。编译器没有给出任何错误。

```
 char *iniFilePath;
 int lenWritten = GetCurrentDirectory( MAX_PATH, iniFilePath );
 if( lenWritten )
 {
     lstrcat( iniFilePath, iniFileName.c_str() );
     char *buffer;
     GetPrivateProfileString( iniServerSectionName.c_str(), serverIp.c_str(), "", buffer, MAX_PATH, iniFilePath );// server ip
     MessageBox( 0, buffer, 0, 0 );
 }
 else
 {
     MessageBox( 0,0,0,0 );
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T10:36:12.700

`iniFilePath`是一个未初始化的指针，[`GetCurrentDirectory()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364934%28v=vs.85%29.aspx)它试图写入，导致未定义的行为。`GetCurrentDirectory()`不为调用者分配缓冲区：必须提供。

改成：

```
char iniFilePath[MAX_PATH]; // or similar. 
```

而不是 using [`lstrcat()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms647487%28v=vs.85%29.aspx)，它在其参考页面上有*警告不要使用*消息，而是使用 a 构造路径`std::string`以避免潜在的缓冲区溢出：

```
const std::string full_file_path(std::string(iniFilePath) + "/" + iniFileName); 
```

[请注意与Wimmel](https://stackoverflow.com/users/33499/wimmel)`buffer`指出的类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:54:48.757

我会这样做以获取当前目录-

```
int pathLength = GetCurrentDirectory(0, NULL);
std::vector<char> iniFilePath(pathLength);

GetCurrentDirectory(pathLength, iniFilePath.data()); 
```

但是请注意，这不是线程安全的，因为目录可能会在两个调用之间从另一个线程更改，但据我所知，很少有程序会更改当前目录，因此这不太可能成为问题。

# sql - 如何获取参与 SQL for Oracle 的字段列表？

> ID：13668448
> 
> 赞同：3
> 
> 时间：2012-12-02T10:34:33.307
> 
> 标签：sql, oracle, ado, xmltype

我正在编写一个用户可以输入 SQL 并获得结果的小应用程序。我注意到我的应用程序无法处理 XMLTYPE 列（我正在使用 ADO）。是否可以“询问”oracle 哪些字段参与了 SQL 的选择部分，所以我可以用“getclobval()”函数即时替换 XMLTYPE 字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:27:57.947

`*_TAB_COLS`您可以通过查询字典视图来确定列的数据类型。但是，这些是基于表的，而不是查询。要做到这一点“即时”将非常困难，因为您需要解析传入的查询（在您的代码中），找出查询中的每一列属于哪个表并发出以下命令：

```
select data_type 
from   all_tab_cols
where  table_name = :table
and    column_name = :column; 
```

然后根据需要更新查询并提交执行。这将很难编写并且很可能很慢。

您可以通过使用 XMLTYPE 对表创建视图、在视图中进行转换并让用户针对视图而不是基础表执行查询来做您想做的事情：

```
create table tab (x xmltype, y integer);

create or replace view tab_v as
  select t.x.getClobVal() x, y 
  from   tab t;

select table_name, data_type from all_tab_cols
where  column_name = 'X'
and    table_name like 'TAB%';

TABLE_NAME                     DATA_TYPE                                                                                                
------------------------------ --------
TAB                            XMLTYPE                                                                                                    
TAB_V                          CLOB 
```

# java - Java 改变另一个应用程序的声音

> ID：13668452
> 
> 赞同：0
> 
> 时间：2012-12-02T10:35:16.477
> 
> 标签：java, system, volume, javasound

我现在有兴趣改变我的系统的音量。我在 Windows 8 上运行，我发现了几个只能更改“java 应用程序”卷的代码。但我不仅要更改我的应用程序音量，还要更改系统的音量。

我使用了这个但没有奏效：

```
Mixer.Info[] infos = AudioSystem.getMixerInfo();
        for (Mixer.Info info : infos) {
            Mixer mixer = AudioSystem.getMixer(info);
            if (mixer.isLineSupported(Port.Info.HEADPHONE)) {
                Port port;
                try {
                    port = (Port) mixer.getLine(Port.Info.HEADPHONE);
                    port.open();
                    if (port.isControlSupported(FloatControl.Type.VOLUME)) {
                        FloatControl bc = (FloatControl) port
                                .getControl(FloatControl.Type.VOLUME);
                        System.out.println(info);
                        System.out.println("  - " + bc.getValue());
                        bc.setValue(0.1f);
                    }
                    port.close();
                } catch (LineUnavailableException e) {
                    e.printStackTrace();
                }

            }
        } 
```

此代码仅更改 javaw.exe 的音量。例如，如果有人在 google chrome 上播放 youtube 视频，则无法更改 chrome 的音量。

哪个是控制所有系统音量的最佳方式？

提前致谢。

# c - 核心实用程序中缺少 __vdso_time？

> ID：13668457
> 
> 赞同：12
> 
> 时间：2012-12-02T10:35:39.737
> 
> 标签：c, linux, gcc, linker, glibc

我构建了最新的 glibc，现在我在使用 coreutils 之类的函数`ls`或`cat`其他类似`vim`.

我的错误是

```
-bash-4.0$ cat
cat: error while loading shared libraries: __vdso_time: invalid mode for dlopen(): Invalid argument 
```

我用以下配置构建了 glibc，没有错误

```
../glibc/configure --prefix=/home/ex/uid377/glibbuilt 
```

在旧版本（如 2.14）上，运行实用程序会导致分段错误。

```
-bash-4.0$ ./pwd
./pwd: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by ./pwd)
-bash-4.0$ LD_LIBRARY_PATH=/home/ex/uid377/glibc/lib/:${LD_LIBRARY_PATH}
-bash-4.0$ ./pwd
Segmentation fault (core dumped) 
```

* * *

**编辑** 内核版本

```
-bash-4.0$ uname -r
2.6.32.26-175.fc12.x86_64 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T23:31:33.307

[如this](https://stackoverflow.com/a/851229/50617) answer中所述，在单个系统上拥有多个版本的 glibc 是可能的，但有点棘手。特别是，这：

> LD_LIBRARY_PATH=/home/ex/uid377/glibc/lib/:${LD_LIBRARY_PATH}

预计*会*崩溃，因为您`ld-linux-x86-64.so.2`将不匹配您的`libc.so.6`

> cat：加载共享库时出错：__vdso_time：dlopen() 的无效模式：...

目前尚不清楚您是如何构建`cat`它的，但很可能是完全相同的问题：您正在从 中选择一些库`/lib64`，而从`/home/ex/uid377/glibc/lib`. 不要那样做。您*必须*链接所有将使用的`/home/ex/uid377/glibc/lib/libc.so.6`程序`-Wl,--dynamic-linker=/home/ex/uid377/glibc/lib/ld-linux-x86-64.so.2`。

您可以通过运行以下命令来跟踪当前正在加载哪些库：

```
env LD_DEBUG=files,libs ./cat 
```

# java - Android：使默认全息按钮不透明

> ID：13668463
> 
> 赞同：3
> 
> 时间：2012-12-02T10:36:39.940
> 
> 标签：java, android, android-layout, button, transparency

默认情况下，ICS 中的按钮有点透明。我想实现该按钮保留其所有属性（形状、颜色、按下状态），而不是使其不透明。

我怎么能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:47:23.517

您可以为扩展默认样式的按钮创建样式（如果您使用的是 Holo.Light）：

```
<style name="GreenButton" parent="android:Widget.Holo.Button">
    <item name="android:background">#00ff00</item>
</style> 
```

然后使用 style 属性手动将样式应用于按钮，或者，如果您想更改所有按钮，请在应用程序的主题中设置 buttonStyle：

```
<style name="AppTheme" parent="android:Theme.Holo">
    <item name="android:buttonStyle">@style/GreenButton</item>
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T09:37:21.790

您也可以在按钮下方使用纯色背景的视图。鉴于您有一个相对布局，这将为您提供很好的服务。

```
<View
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_alignTop="@+id/button"
    android:layout_alignLeft="@id/button"
    android:layout_alignBottom="@id/button"
    android:layout_alignRight="@id/button"
    android:background="@android:color/black"
    /> 
```

# c++ - 最快的顺序访问

> ID：13668467
> 
> 赞同：-3
> 
> 时间：2012-12-02T10:36:59.200
> 
> 标签：c++, vector, linked-list

我们应该使用哪种数据结构来实现最快的顺序访问？

*   向量
*   单链表
*   双向链表

非同步数据结构是什么意思？有些人称向量同步，但有些人不。

数组可以以随机方式和顺序访问方式访问，但是 LL 只能以顺序访问方式访问，那么当顺序访问时，如何确定数组是快速的还是 LL 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:47:56.410

所有这三个项目都可以直接访问序列中的下一个项目。那说：

虽然向量、链表和双链表的顺序访问的复杂性可能相同；毫无疑问，向量几乎总是会提供最佳的实际性能。在查看方法的性能时，会考虑很多因素，而不仅仅是操作的 O(n) 或 Θ(n)。

最新的 C++ 规范中的向量保证了连续的内存分配（意味着项目在内存中紧随其后），这意味着从内存中查找一个对象将导致附近的对象也被加载到 L2 和 L1 缓存中（空间局部性）。这意味着访问同一向量中的后续项目将快得多，因为 CPU 不需要从内存中获取内容。

对于反向迭代，双链表和向量都会让你 O(1) 访问下一个（读取：上一个）项目，但同样的问题仍然存在。双链表必须执行多个操作才能到达下一个节点（但它是固定数量的操作，因此是 O(1) 值），包括读取指向下一个对象的指针的值，并加载该对象访问其内容的地址。向量在这里总是占上风。

向量还可以让您直接访问任何随机节点。双链表和单链表都不能这样做 - 您必须从头开始迭代（end 也是双链表的一个选项）才能获得随机索引。

基本上：99% 的时间，你应该使用向量。永远不要依赖 O(n) 或 Θ(n) 来获得实际性能，因为它隐藏了许多重要的指标。向量的缺点是，如果元素的数量超过了预先保留的空间量，则向量必须调整大小（通常这需要将所有数据复制到新位置）。一定大小的智能预留可以缓解这个问题；通常通过使用链表“解决”这个问题是过度热心的预优化，最终会伤害而不是帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:43:36.550

> 数组可以以随机方式和顺序访问方式访问，但是 LL 只能以顺序访问方式访问，那么当顺序访问时，如何确定数组是快速的还是 LL 呢？

因为顺序访问，当以随机访问的方式实现时，与从开始到*实际*寻找的替代方案相比将是恒定的`n`，这在时间上是线性的。

对于具有随机访问的容器，元素的顺序访问`n`可能如下所示：

```
cursor := getStartCursor()
cursor := cursor+n
getElementAt(cursor) 
```

对于只有顺序访问的容器，它必须如下所示：

```
cursor := getStartCursor()
for i = 0 to n:
    cursor := getNextCursor(cursor)
getElementAt(cursor) 
```

并且单个`add`操作与`n`取消引用属于不同的算法复杂性类别。

打个比方，顺序访问就像寻找复活节彩蛋一样，在没有找到前四个线索的情况下，你不能跳到第四个彩蛋。相比之下，每个鸡蛋所在位置的地图将使您能够随时前往您喜欢的任何鸡蛋，*包括*按原始顺序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-02T10:41:12.690

访问的方向也很重要：从前到后：所有这些都是相等的（尽管取决于向量实现，它可能会快一点 - 分配与增量）

如果您可能需要在两者之间反转：双链表和向量（感谢 Mahmoud 指出这一点！）

# bdd - 使用 SpecFlow 测试控制台应用程序

> ID：13668470
> 
> 赞同：3
> 
> 时间：2012-12-02T10:37:43.670
> 
> 标签：bdd, specflow

我想使用 SpecFlow 来测试控制台应用程序。我希望 SpecFlow 启动控制台应用程序并以与用户通过标准输入/输出完全相同的方式与之交互。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:40:37.993

是的，事实上我现在在我的机器上打开了一个这样的解决方案。我的建议是“不要这样做！”。

我打开解决方案，[nCrunch](http://ncrunch.org)（它只是一个超高效的测试运行程序）为我们用来协调多个服务器的调度系统启动了一些测试。其中一些测试检查时间表并确保流程按预期启动和停止。你可以这样说，因为每次我尝试输入一些东西时，都会弹出一个 calc.exe 窗口来窃取我的注意力，而且它确实妨碍了我。那是你真正想做的吗？

不要忘记 SpecFlow 确实是一个业务需求自动化系统，这是“一件好事”。但到目前为止，您只关注这里的技术问题。

我建议你再考虑一下你的要求。你想在哪里开始一个进程并检查它与你的交互，然后简单地测试它的参数和结果。如果您需要隔离它的功能（就像我在编写测试时没有做的那样，哎呀），请使用模拟。尝试使您的测试尽可能简单。

这样想吧。- 你真的需要测试 Process.Start 打开一个窗口吗？MS肯定是对的吗？:-) - 你真的需要测试 Console.ReadLine 得到一个字符串吗？- 如果您分别测试 MyArgumentParser 和 MyBusinessLogic 并使用模拟拆分它们，您的测试会不会更简单？

# magento-1.6 - Magento：产品信息中未显示特价

> ID：13668472
> 
> 赞同：0
> 
> 时间：2012-12-02T10:37:51.977
> 
> 标签：magento-1.6, magento

我正在使用 Magento 1.6.1.0 并想使用 special_price 属性（已为“所有产品类型”启用）。像这样：

![magento 特价属性](../Images/c9fd800b18423d2f44508767c97f26c0.png)

但是，我在其他系统的无数屏幕截图中看到的特价字段是不可见的。这是我在产品信息编辑器中的“价格”选项卡的屏幕截图：

![在此处输入图像描述](../Images/246885b688dd16e9aa1763ef0cd708f3.png)

我在这里错过了什么？正如您从屏幕截图中看到的那样，Tier Price 显示（并且工作）完全正常。我需要在其他地方启用特价属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:57:59.760

所以，正如我所见，您将属性值设置为`required`，但我在它附近看不到任何红色星号 (*)。实际上我也没有在屏幕截图`Special Price`字段上看到？？所以你只需要：

1.  创建属性。
2.  `Special Price`用代码命名`special_price`。
3.  设置为`Display on product page`.
4.  将其添加到您的`Attribute Set`.
5.  编辑产品并输入`Special Price`值。
6.  然后在产品视图上调用它。

没有魔法。我不明白你到底做了什么。但看起来你做错了什么。

附言。**顺便说一句，它不是 Magento 的默认功能吗？日期从/到的特价？？** 您是否以某种方式修改了您的核心功能？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T06:32:06.463

我有同样的问题，我找到了一个对我有用的修复程序。在属性列表下，我搜索“价格”找到了一个现有的“特价”属性。在我的情况下，我必须将“适用于”部分编辑为“所有产品类型”，但也适用于任何特定的产品类型。希望这对其他人有帮助。

# mysql - 如何选择不存在的行

> ID：13668473
> 
> 赞同：1
> 
> 时间：2012-12-02T10:37:51.703
> 
> 标签：mysql, sql, database

我用它来选择记录：

```
SELECT village 
FROM villages 
WHERE type = 'student' 
ORDER BY id DESC LIMIT 0, 50 
```

然后我得到了这个：

```
a, b, c, a, d, e, a, ... x 
```

我希望结果为：

```
a, b, x, c, e, d, ... 
```

不重复或不存在值。

请建议我如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:39:29.900

使用`DISTINCT`：

```
SELECT DISTINCT village 
FROM villages 
WHERE type='student' 
ORDER BY id DESC 
LIMIT 0, 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:40:57.840

在 select 语句中使用`DISTINCT` 子句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:52:13.390

其他答案已经提供了 DISTINCT ，它将查看完整的结果行并将它们不同地返回。如果您选择额外的列并且村庄不是主要或唯一键，您仍然可以两次获得一个村庄。

在这种情况下，您可以使用 GROUP_BY（村庄）

# jquery - 从 jQuery Ajax 方法返回

> ID：13668477
> 
> 赞同：-1
> 
> 时间：2012-12-02T10:39:00.507
> 
> 标签：jquery

我有一个名为 searchReportButton 的按钮。单击此按钮时，我需要使用 ajax Web 方法“Error.aspx/CheckSessionExpiry”从服务器检查会话值。这是在 checkSession javascript 函数中完成的。checkSession 现在没有返回任何东西——而是根据结果处理所需的操作（重定向到错误页面）。

1.  我需要将 ajax web 方法的结果返回给 Main Caller。我们怎样才能做到这一点？
2.  我是否需要将剩余的代码（来自主调用者）移动到成功回调中？

**主要来电者**

```
searchReportButton.click(function () {

    checkSession();
    //Remainging Code

}); 
```

**帮手**

```
function checkSession() {

var win = 101;
$.ajax(
        {
            type: "POST",
            url: "Error.aspx/CheckSessionExpiry",
            data: '{"winNumber": "' + win + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: handleSessionResult

        }
        );
        } 
```

**结果助手**

```
 function handleSessionResult(result) {

    if (result.hasOwnProperty("d")) 
    {
      result = result.d
    }

    if (result == "ACTIVE") 
    {
      window.location.href("Error.aspx");
      return false;
    }

   //alert(result); 
```

}

参考：

1.  [如何让 jQuery 执行同步而不是异步的 Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)
2.  [$.ajax 上下文选项](https://stackoverflow.com/questions/5097191/ajax-context-option/5097214#5097214)
3.  [jQuery Ajax 回调没有获取上下文](https://stackoverflow.com/questions/13670564/jquery-ajax-callback-does-not-get-context)
4.  [jQuery将更多参数传递给回调](https://stackoverflow.com/questions/939032/jquery-pass-more-parameters-into-callback)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:43:16.953

你不能。或者，更具体地说，您**不应该**这样做。Ajax 请求`async`意味着它在进行时不会阻止其他 JS 操作（想象一下，如果服务器响应缓慢，浏览器会冻结 5 秒？）。

相反，您可以传递一个`success`回调，您已经这样做了。然后在那里做任何你想做的事情。

所以而不是：

```
checkSession();
//Remainging Code 
```

您应该在回调中移动剩余的代码：

```
function handleSessionResult(result) {
    //... current code
    //Remaining code from the above
} 
```

# objective-c - 为什么我会收到此错误？在 Xcode

> ID：13668478
> 
> 赞同：1
> 
> 时间：2012-12-02T10:39:07.963
> 
> 标签：objective-c, ios, xcode, uiwebview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:42:41.050

`highlightAllOccurencesOfString`并且是在您尝试在对象上调用它们时`removeAllHighlights`定义的方法。试试这个：`WBSecondViewController``UIWebView`

```
-(IBAction)searchButtonPressed:(id)sender{
   NSLog(@"highlighttes");
   [self highlightAllOccurencesOfString:@"不明"];
}

-(IBAction)clearHighlights:(id)sender{
   [self removeAllHighlights];
} 
```

这至少会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:43:24.730

这两行是错误的，

```
[_webView highlightAllOccurencesOfString:@"不明"];
[_webView removeAllHighlights]; 
```

它应该是，

```
[self highlightAllOccurencesOfString:@"不明"];
[self removeAllHighlights]; 
```

您正在尝试调用`highlightAllOccurencesOfString`并且在's`removeAllHighlights`中定义但在对象上。编译器无法在类中找到它，因此错误消息为`WBSecondViewController``@interface``UIWebview``UIWebView``@interface``No visible @interface for 'UIWebView' declares the selector ...`

# php - 在数据库中插入新数据时警告用户

> ID：13668484
> 
> 赞同：4
> 
> 时间：2012-12-02T10:39:36.063
> 
> 标签：php, javascript, ajax

我不知道如何搜索，所以我有点迷路（我在这里看到的两个主题已关闭）。

我有一个新闻网站，我想在数据库中插入新数据时警告用户。我想在 StackOverflow 上这样做，我们会在不重新加载页面的情况下被警告，或者在 facebook 中，你会在不重新加载的情况下被警告新消息/通知。

最好的方法是什么？是某种具有超时的侦听器不断检查数据库吗？听起来效率不高...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:02:49.253

您需要 javascript ajax 和 json 以及回调函数来不断检查。它可以通过推送服务来完成，但 PHP 对此不好，你需要 websockest 等。facebook 使用超时调用。不确定stackoverflow

```
 refreshInterval = 500
  refreshTimeout = setTimeout( getNotificationCounts, refreshInterval );
function getNotifications() {
        $.ajax({
            url : 'path_to_your_php',
            type : 'POST',
                    data:   //put for exampel user_id but it cvan be handled by sesion as well
            dataType : 'json',
            success : function(data) {
                alert('You have'+ data.total +' new messages')
                refreshTimeout = setTimeout( getNotificationCounts, refreshInterval ); //this will check every half of second
            }
        });
    } 
```

然后在 PHP 中，例如，您在数据库中有一个标志，您可以使用它检查数据是否对数据库来说是新的。注意格式和正确的 sql 转义

```
 $result=mysql_query("SELECT count(*) as total from myTable where user_id=$_POST['user_id'] AND is_read=0"); 

      //note instad of $_POST you can use session if users are logged in, or however you are handling it
        $data=mysql_fetch_assoc($result);
        echo json_encode($data) 
```

;

之后，您可以创建另一个 ajax 调用，一旦用户单击它们，就将消息标记为已读。或打开一个对话框列表或 wahtever

```
mysql_query("UPDATE myTable WHERE user_id=$_POST['user_id'] SET  is_read=1"); 
```

# rake - rawr jruby 创建 exe

> ID：13668488
> 
> 赞同：0
> 
> 时间：2012-12-02T10:40:41.410
> 
> 标签：rake, jruby, exe

我有一个非常简单的 Ruby 脚本，我使用 rawr 将其打包成一个`*.jar`文件。然后我可以`*.jar`使用`java -jar *.jar`. 我想把我的程序变成一个可执行文件，所以我做了`rake rawr:bundle:exe`。它说它成功创建了一个可执行文件，我可以看到它创建的可执行文件。

我不明白的是，当我双击可执行文件（或尝试在命令提示符下运行它）时，它实际上并没有做任何事情；它应该显示“你好”并等待我按下输入（在 STDOUT 上），但实际上什么也没发生。如果我运行该`*.jar`文件，它会显示“你好”。我应该如何运行可执行文件？我期待当我双击时`*.exe`，会弹出一个命令提示符窗口，显示“你好”并等待我按下回车...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:26:28.577

由于程序显示为 STDOUT，并且没有 GUI 组件，我认为您需要从命令提示符运行它。不确定您使用的是什么操作系统，因为您说的是 .exe，所以我假设是 windows。所以你只需要从命令提示符下运行它，而不是双击它。

因此在您能够成功执行的同一文件夹中：

```
java -jar *.jar 
```

只需输入：

```
myApplication.exe 
```

或者，如果您在机器上的另一个位置，您可以键入：

```
C:\full\path\to\myApplication.exe 
```

否则，该过程只会在后台运行，您无法看到结果。

# linux-kernel - 从内核符号表中获取符号地址

> ID：13668490
> 
> 赞同：1
> 
> 时间：2012-12-02T10:40:51.020
> 
> 标签：linux-kernel, netfilter

```
arif@khost:~/src/linux$ global -x ip_rcv_finish
ip_rcv_finish     319 net/ipv4/ip_input.c static int ip_rcv_finish(struct sk_buff *skb) 
```

现在如果我想使用这个函数，我需要初始化一个指向这个函数的指针。

为了能够做到这一点，我需要函数的地址。

我已经看到，从用户空间我可以读取`/proc/kallsyms`以获取符号的地址。他们是否存在任何类似的机制，我可以读取符号表以从内核空间中提取符号的地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:11:05.560

根据您的内核版本，您可以使用[kallsyms_lookup_name](https://elixir.bootlin.com/linux/v4.7/ident/kallsyms_lookup_name)和/或[kallsyms_on_each_symbol](https://elixir.bootlin.com/linux/latest/ident/kallsyms_on_each_symbol)从内核空间中运行的代码中获取符号的地址。

这仅`CONFIG_KALLSYMS`在内核配置中设置时才有效。

请注意，我不建议查找要调用的函数的地址，除非没有更好的方法（内核 API）来做你想做的事。尽管如此，如果没有其他帮助，kallsyms_*() API 可能是要走的路。

# javascript - 如何捕捉输入框失去焦点的时刻？

> ID：13668491
> 
> 赞同：19
> 
> 时间：2012-12-02T10:40:50.613
> 
> 标签：javascript, html

当输入框失去焦点时，我正在使用如下所示的事件侦听器结构来做一些事情。

但它不会起作用。我应该听什么事件，以获得输入框失去光标的那一刻（即用户点击它之外）？

```
document.getElementById('div inside which input is located')
    .addEventListener( 'blur',  function(e){
        if(event.target.className=='editInput'){
            doStuff(event.target);
        }
     } , false ); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T10:52:25.900

正确的事件是 onBlur。看看这段代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>element</title>
<script type="text/javascript">
  function message() {
            var text = document.getElementById("test").value;
            alert(text);
    }
</script>
  </head>
  <body>
      <input type="text" name="test" id="test">
<script type="text/javascript">
document.getElementById("test").onblur=message;
</script>
  </body>
</html> 
```

它在失去焦点时工作并打印输入的内容。也许您的错误是您将事件附加到 div 而不是输入？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T10:44:19.043

```
var input = document.getElementsByTagName('input')[0];

input.onfocus = function() {
  this.className = 'highlight';
}

input.onblur = function() {
  this.className = '';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T11:39:00.820

**使用 vanilla Javascript 为 blur 事件设置处理程序：**

您可以使用以下代码为 vanilla jQuery 中的特定元素“test”设置模糊事件的处理程序

```
document.getElementById("test").onblur= yourEventHandler 
```

您可以在您的问题中使用事件处理程序而无需任何修改。这就是涵盖的部分。不过，我相信这里还有很多话要说。

* * *

**大图：**

就跨浏览器的兼容性而言，文本输入上的模糊/焦点事件是最不麻烦的事件之一。但是，如果您打算进行任何认真的开发，我建议您使用 jQuery、YUI、Dojo、MooTools 等框架。这些都将帮助您编写更好的代码并避免出现兼容性问题。

不幸的是，Web 开发人员必须面对的现实是许多具有相似但不完全相同行为的浏览器。在我们测试刚刚编写的代码时，仅仅找到一个恰好可以在我们碰巧使用的浏览器上运行*的*解决方案是不够的。我们需要确保我们的代码在我们的应用程序所针对的所有浏览器中都能正常工作。那么，如果您突然发现您分配模糊的方式甚至不适用于某些特定元素的某些浏览器，而另一种则可以呢？你是否在你的代码中到处都放 if's there？如果你走这条路，你确定你没有错过任何东西吗？然后，如果你发现另一个浏览器有另一个问题，你会添加另一个 if' 等等吗？也许你决定定义一个函数`setBlurEventHandler`它会按照盒子上说的做，并在代码中的任何地方使用它，而不是上面的语句。你这样做只是为了模糊事件还是你所做的几乎所有事情？为其他事情做这件事也很有意义。伟大的。您现在有了一个编写跨浏览器兼容的代码的框架。如果我们所有人都将自己的框架留给自己，我们将花费大量时间重新发现和解决相同的问题。输入开源 Javascript 框架。您可以利用其他人投入的辛勤劳动时间来使用它们，但您也可以通过报告错误、编写代码和文档来做出贡献。这不是更有意义吗？（或者，如果在未来的某个时候，你确定你有一个基于一些非常聪明的想法的框架，但它并不完整，

为了更好地推动这一点，让我向您展示一些取自 jQuery 源代码的评论。正如我之前所说，就跨浏览器的兼容性而言，文本输入上的模糊/焦点事件是最不麻烦的事件之一。但是，当处理即使是最基本和最不麻烦的事件都带有这样的内联代码文档时，您是否知道（或记住！）您的代码必须处理的各种浏览器特性？

```
// IE<9 dies on focus/blur to hidden element (#1486)

// IE doesn't fire change on a check/radio until blur; trigger it on click

// This still fires onchange a second time for check/radio after blur. 
```

由于上述原因，我建议不要直接使用 DOM。

* * *

**使用 jQuery 的更好方法：**

假设您有一个包含三个元素的`div`调用，其中只有一个元素最初具有该类。`formDiv``input``editInput`

```
<div id=formDiv>     
    <input type="text" name="test1" id="test1" />   
    <input type="text" name="test2" id="test2" class='editInput' />    
    <input type="text" name="test3" id="test3" />           
</div> 
```

使用 jQuery，您可以简单地执行以下操作（我从您的代码中复制了事件处理程序的实际逻辑）：

```
("#formDiv input").blur(function(){ 
      if(this.className=='editInput'){
          doStuff(this.target);
      }
 }); 
```

我相信这比这里的其他解决方案更接近你想要做的事情。（在您的代码中，您试图将事件附加到包含输入的 div。我可能误解了您的意图，但我认为这就是您想要的。）

您可以使用此 jsFiddle 尝试此解决方案：http: [//jsfiddle.net/r7tuT/3/](http://jsfiddle.net/r7tuT/3/)

* * *

**一些离别的想法：**

有些人会告诉你这个或那个框架更好，他们可能是对的。我只会评论说 jQuery 是最受欢迎的，而且相当不错。选择是你的，但正如我所说，我相信你应该尽早开始使用其中一个框架，因为它会提高你的工作质量，让你在眨眼间完成某些事情并改变你处理问题的方式. 当一个框架或编程语言对你这样做时，是你作为编码员生活中的一个伟大时刻:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T10:42:36.920

尝试`onblur`代替`blur`.

`blur`是一种导致对象失去焦点的方法，而`onblur`是当对象失去焦点时引发的事件。

# javascript - 用推文拉过推特头像

> ID：13668496
> 
> 赞同：1
> 
> 时间：2012-12-02T10:41:07.293
> 
> 标签：javascript, html, twitter

我将我最新的推文拉到我的主页上，但我不知道我需要添加什么来拉动头像。

有任何想法吗？

```
 <script src="http://twitterjs.googlecode.com/svn/trunk/src/twitter.min.js"></script>
 <script type="text/javascript">
 getTwitters('tweet', {
id: 'gezzamondo',
count: 1,
enableLinks: true,
ignoreReplies: true,
clearContents: true,
template: '"%text%" <a href="http://twitter.com/%user_screen_name%/statuses/%id%/">%time%</a>'
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:05:42.040

如果你使用

```
 %user_profile_image_url% 
```

在模板变量中，应该得到你的头像。

所以它会是

```
 template: '"%text%" <img src="%user_profile_image_url%" height="" width="" /><a href="http://twitter.com/%user_screen_name%/statuses/%id%/">%time%</a>' 
```

更多信息见这里，

[资源](http://remysharp.com/2007/05/18/add-twitter-to-your-blog-step-by-step/)

# php - 通过javascript函数将元素ID传递给xajax php函数

> ID：13668505
> 
> 赞同：0
> 
> 时间：2012-12-02T10:42:09.927
> 
> 标签：php, javascript, xajax

我正在使用 xajax 函数检查用户名的可用性，我希望它在 anchar 标记上单击。我正在这样做`onclick="xajax_checkusername('getElementByid(\"username\").value')`。但它不工作。租赁帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:20:03.843

请用;

onclick="xajax_checkusername(xajax.$('username').value);"

用户名字段 ID 标记值必须是“用户名”，例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:47:49.373

您错误地传递了参数，请删除单引号，使其变为

```
onclick="xajax_checkusername(document.getElementByid('username').value)" 
```

请注意，不建议使用这种内联 Javascript，因为它会成为维护的噩梦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:10:02.930

尝试使用这个

```
onclick=\"xajax_checkusername(getElementById('username').value))\"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T10:47:37.767

在你的例子中

```
getElementByid(\"username\").value 
```

应该

```
document.getElementById("username").value // id should be ID 
```

# javascript - 如何在 perl 中执行页面的 javascript 函数？

> ID：13668507
> 
> 赞同：1
> 
> 时间：2012-12-02T10:42:13.107
> 
> 标签：javascript, perl

我正在尝试使用 Perl 从网站中提取数据。以下是该网站的描述：

*   网站根据日期显示数据
*   显示用于更改日期的日历
*   单击日历中的日期后，它会调用一个 javascript 函数，该函数传入日期并刷新显示数据的页面部分

我的问题是，我如何执行那个 JS 函数，以便我可以遍历我需要数据的日期？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:16:08.423

从您的脚本发出相同的 HTTP 请求并直接获取您需要的所有数据非常容易。

您可以使用 HTTP Fox 扩展（用于 Firefox）记录浏览器的所有 HTTP 请求/响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T10:52:29.667

**编辑**

有一个CPAN模块：

[JavaScript - 用于执行嵌入式 JavaScript 的 Perl 扩展](http://search.cpan.org/perldoc?JavaScript)

但我还没有测试过它们。

**原帖：**

看看`smjs`它是*Spidermonkey 的 JS shell*。

您可以通过以下方式传递 javascript：

```
open my $jsout,"echo '$javascript' | smjs |" or die;
print <$jsout>; 
```

...

但要小心！这消除了安全考虑！

# visual-studio-2008 - 反汇编并使用 .obj 文件

> ID：13668508
> 
> 赞同：4
> 
> 时间：2012-12-02T10:42:22.943
> 
> 标签：visual-studio-2008, assembly, disassembly, ida, .obj

我在大学有一门课程（逆向工程），我有作业。我有一个 .obj 文件（用 Visual Studio 2008 编译），我必须反汇编它，找出控制结构并在一个小 c 程序中调用它。

我使用了 IDA 反编译器，这里是 asm 代码：

```
_FB3:
  00000000: 55                 push        ebp
  00000001: 56                 push        esi
  00000002: 57                 push        edi
  00000003: 8B 7C 24 10        mov         edi,dword ptr [esp+10h]
  00000007: 83 3F 00           cmp         dword ptr [edi],0
  0000000A: 74 79              je          00000085
  0000000C: 8D 64 24 00        lea         esp,[esp]
  00000010: 8B 2F              mov         ebp,dword ptr [edi]
  00000012: 8B 75 00           mov         esi,dword ptr [ebp]
  00000015: 8B 44 24 14        mov         eax,dword ptr [esp+14h]
  00000019: 8B CE              mov         ecx,esi
  0000001B: EB 03              jmp         00000020
  0000001D: 8D 49 00           lea         ecx,[ecx]
  00000020: 8A 10              mov         dl,byte ptr [eax]
  00000022: 3A 11              cmp         dl,byte ptr [ecx]
  00000024: 75 1A              jne         00000040
  00000026: 84 D2              test        dl,dl
  00000028: 74 12              je          0000003C
  0000002A: 8A 50 01           mov         dl,byte ptr [eax+1]
  0000002D: 3A 51 01           cmp         dl,byte ptr [ecx+1]
  00000030: 75 0E              jne         00000040
  00000032: 83 C0 02           add         eax,2
  00000035: 83 C1 02           add         ecx,2
  00000038: 84 D2              test        dl,dl
  0000003A: 75 E4              jne         00000020
  0000003C: 33 C0              xor         eax,eax
  0000003E: EB 05              jmp         00000045
  00000040: 1B C0              sbb         eax,eax
  00000042: 83 D8 FF           sbb         eax,0FFFFFFFFh
  00000045: 85 C0              test        eax,eax
  00000047: 7D 05              jge         0000004E
  00000049: 8D 7D 0C           lea         edi,[ebp+0Ch]
  0000004C: EB 32              jmp         00000080
  0000004E: 8B 44 24 14        mov         eax,dword ptr [esp+14h]
  00000052: 8B CE              mov         ecx,esi
  00000054: 8A 10              mov         dl,byte ptr [eax]
  00000056: 3A 11              cmp         dl,byte ptr [ecx]
  00000058: 75 1A              jne         00000074
  0000005A: 84 D2              test        dl,dl
  0000005C: 74 12              je          00000070
  0000005E: 8A 50 01           mov         dl,byte ptr [eax+1]
  00000061: 3A 51 01           cmp         dl,byte ptr [ecx+1]
  00000064: 75 0E              jne         00000074
  00000066: 83 C0 02           add         eax,2
  00000069: 83 C1 02           add         ecx,2
  0000006C: 84 D2              test        dl,dl
  0000006E: 75 E4              jne         00000054
  00000070: 33 C0              xor         eax,eax
  00000072: EB 05              jmp         00000079
  00000074: 1B C0              sbb         eax,eax
  00000076: 83 D8 FF           sbb         eax,0FFFFFFFFh
  00000079: 85 C0              test        eax,eax
  0000007B: 7E 1E              jle         0000009B
  0000007D: 8D 7D 08           lea         edi,[ebp+8]
  00000080: 83 3F 00           cmp         dword ptr [edi],0
  00000083: 75 8B              jne         00000010
  00000085: 6A 10              push        10h
  00000087: E8 00 00 00 00     call        _malloc
  0000008C: 83 C4 04           add         esp,4
  0000008F: 89 07              mov         dword ptr [edi],eax
  00000091: 85 C0              test        eax,eax
  00000093: 75 14              jne         000000A9
  00000095: 5F                 pop         edi
  00000096: 5E                 pop         esi
  00000097: 33 C0              xor         eax,eax
  00000099: 5D                 pop         ebp
  0000009A: C3                 ret
  0000009B: 8B C5              mov         eax,ebp
  0000009D: FF 40 04           inc         dword ptr [eax+4]
  000000A0: 5F                 pop         edi
  000000A1: 5E                 pop         esi
  000000A2: B8 01 00 00 00     mov         eax,1
  000000A7: 5D                 pop         ebp
  000000A8: C3                 ret
  000000A9: 8B 74 24 14        mov         esi,dword ptr [esp+14h]
  000000AD: 8B C6              mov         eax,esi
  000000AF: 8D 50 01           lea         edx,[eax+1]
  000000B2: 8A 08              mov         cl,byte ptr [eax]
  000000B4: 40                 inc         eax
  000000B5: 84 C9              test        cl,cl
  000000B7: 75 F9              jne         000000B2
  000000B9: 2B C2              sub         eax,edx
  000000BB: 40                 inc         eax
  000000BC: 50                 push        eax
  000000BD: E8 00 00 00 00     call        _malloc
  000000C2: 8B 0F              mov         ecx,dword ptr [edi]
  000000C4: 89 01              mov         dword ptr [ecx],eax
  000000C6: 8B 07              mov         eax,dword ptr [edi]
  000000C8: 83 C4 04           add         esp,4
  000000CB: 83 38 00           cmp         dword ptr [eax],0
  000000CE: 74 C5              je          00000095
  000000D0: 8B 10              mov         edx,dword ptr [eax]
  000000D2: 8B CE              mov         ecx,esi
  000000D4: 8A 01              mov         al,byte ptr [ecx]
  000000D6: 88 02              mov         byte ptr [edx],al
  000000D8: 41                 inc         ecx
  000000D9: 42                 inc         edx
  000000DA: 84 C0              test        al,al
  000000DC: 75 F6              jne         000000D4
  000000DE: 8B 17              mov         edx,dword ptr [edi]
  000000E0: C7 42 04 01 00 00  mov         dword ptr [edx+4],1
            00
  000000E7: 8B 07              mov         eax,dword ptr [edi]
  000000E9: C7 40 08 00 00 00  mov         dword ptr [eax+8],0
            00
  000000F0: 8B 0F              mov         ecx,dword ptr [edi]
  000000F2: 5F                 pop         edi
  000000F3: 5E                 pop         esi
  000000F4: C7 41 0C 00 00 00  mov         dword ptr [ecx+0Ch],0
            00
  000000FB: B8 01 00 00 00     mov         eax,1
  00000100: 5D                 pop         ebp
  00000101: C3                 ret 
```

IDA 也让我成为了一个很好的控制结构： ![在此处输入图像描述](../Images/a7f4dbeb97e23031d02af6842dbe1dfb.png)

如您所见，代码是这样的：

```
for(...)
 {
    for1(...){...}
    ...
    for1(...){...}
 }

 malloc
 ....
 for3() ...
 malloc
 ...
 for2(...)
 {
    ...
 } 
```

据我所知，for1 和for2 的结构几乎相同，只是活动不同，for3 实现的功能与for1 和for2 一样在functionfamily 中。for3 使用第二个 malloc 的结果作为参数，所以我认为 for2 应该是某种数组复制循环。for1、for2 和 for3 是已知的 stdc 内联实现。

有人可以帮我弄清楚这个 f3 函数的目的吗？

第二个问题：如何在一个小示例 C 程序中使用这个 .obj 文件？我如何在 VS 中调用它的函数？

在此先感谢，任何帮助表示赞赏。

**更新**：小丑：有趣。你是怎么知道节点的结构的？我仍在试图弄清楚这整件事（在你的帮助下），但还没有。

我想通了，IDA 反汇编器有一个伪代码查看功能。这是伪：

```
signed int __cdecl FB3(int a1, const char *a2)
{
  int v2; // edi@1
  const char **v3; // ebp@2
  void *v4; // eax@7
  signed int result; // eax@8
  int v6; // edx@11
  const char *v7; // ecx@11
  const char v8; // al@12

  v2 = a1;
  while ( *(_DWORD *)v2 )
  {
    v3 = *(const char ***)v2;
    if ( strcmp(a2, **(const char ***)v2) >= 0 )
    {
      if ( strcmp(a2, **(const char ***)v2) <= 0 )
      {
        ++v3[1];
        return 1;
      }
      v2 = (int)(v3 + 2);
    }
    else
    {
      v2 = (int)(v3 + 3);
    }
  }
  v4 = malloc(0x10u);
  *(_DWORD *)v2 = v4;
  if ( v4 && (**(_DWORD **)v2 = malloc(strlen(a2) + 1)) != 0 )
  {
    v6 = **(_DWORD **)v2;
    v7 = a2;
    do
    {
      v8 = *v7;
      *(_BYTE *)v6++ = *v7++;
    }
    while ( v8 );
    *(_DWORD *)(*(_DWORD *)v2 + 4) = 1;
    *(_DWORD *)(*(_DWORD *)v2 + 8) = 0;
    *(_DWORD *)(*(_DWORD *)v2 + 12) = 0;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
} 
```

从这里也许它计算一个数字在字符串中的出现？这个伪代码对我来说有点模糊。

我试图在示例程序中调用此函数，但没有成功。我用过： extern signed int fb3(int a1, const char *a2); 然后我尝试调用它，但是链接器给了我“函数_main中引用的未解析的外部符号_fb3”错误（因此，我猜想我用那个extern关键字声明的.obj文件中没有具有此签名的fb3函数。所以签名错误）。

这是我尝试使用的示例程序（main.c）：

```
#include <stdio.h>
extern signed int fb3(int a1, const char *a2);

int main(void)
{
    char b[3] = {'e','3','y'};

    signed int i = fb3(3,b);
    printf("%d",i);

    return 0;
} 
```

我也将链接器输入（vs2010）设置为 f3.obj。

**UPDATE2：** 我实现了节点结构，并使用了区分大小写的函数名，现在我可以成功编译了。

示例程序：

```
#include <stdio.h>

typedef struct node
{
    int count;
    const char * text;
    struct node* right;
    struct node* left;
} node;

extern int FB3(node* root, const char *text);

int main(void)
{
    node* root;
    signed int i;
    int j;

    root = (node*)malloc(sizeof(node));  

    root->count = 0;
    root->text = "textone";
    root->right = NULL;
    root->left = NULL;

    printf("value = %d\n", FB3(root,"v"));
    printf("value = %d\n", FB3(root,"b"));
    printf("value = %d\n", FB3(root,"c"));
    printf("value = %d\n", FB3(root,"3dasf"));
    printf("value = %d\n", FB3(root,"3ssdfs"));
    printf("value = %d\n", FB3(root,"dsda"));
    printf("value = %d\n", FB3(root,"v"));
    printf("value = %d\n", FB3(root,"gsda"));
    printf("value = %d\n", FB3(root,"gsda"));
    printf("value = %d\n", FB3(root,"a"));
    printf("value = %d\n", FB3(root,"ab"));

    return 0;
} 
```

输出是：

```
 value=1
 value=1
 value=1
 ... (only value=1) 
```

有趣的是第 7 个 printf 应该 printf "value=2"，因为 "v" 已经在树中了，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:54:44.417

乍一看，这似乎是一棵用于计算字符串出现次数的二叉树。树节点如下所示：

```
const char* text;
int count;
node* left;
node* right; 
```

函数本身是`int addstring(node** root, const char* text)` 首先代码检查树是否为空，如果是则跳过搜索。搜索从 0x10 开始，通过执行`if (strcmp(current->text, text) > 0) current = current->right;`和循环返回。这段代码看起来并没有优化，在 0x4E 它做了同样的比较，这次检查`< 0`并离开。在 0x9B 是“找到”分支，它增加计数器并返回 1。

如果未找到文本，则在 0x85 创建一个新节点，将其插入树中，然后使用`strdup`（实现为`malloc(strlen())`+ `strcpy`）将文本复制到其中。新节点的 和 都设置为和为`left`1 。`right``NULL``count`

**更新**`malloc`：从调用中可以看出，节点大小为 16 个字节。偏移量 0 用于比较文本，因此必须是文本。偏移量 4 递增，因此它必须是计数器。偏移量 8 和 12 是两个子指针，因为它们是这样使用的。

IDA 提出的原型是胡说八道，第一个参数必须是指针，否则会爆炸。此外，C 区分大小写，因此请尝试`FB3`（大写）。像这样的东西：

```
#include <stdio.h>
extern int FB3(void** root, const char *text);

int main(void)
{
    void* root = NULL;
    int i = FB3(&root, "e3y");
    printf("%p %d", root, i);

    return 0;
} 
```

如果可行，您可以继续添加节点结构，以便您可以从 C 遍历并打印树。

# .net - 安装包 SignalR 导致无法找到包“SignalR”

> ID：13668514
> 
> 赞同：3
> 
> 时间：2012-12-02T10:43:03.103
> 
> 标签：.net, visual-studio, nuget

我正在尝试通过 NuGet 安装 SignalR 包，但没有看到：

```
PM> Install-Package SignalR
Install-Package : Unable to find package 'SignalR'.
At line:1 char:1
+ Install-Package SignalR
+ ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T10:00:38.027

它被重命名为`Microsoft.AspNet.SignalR`. 有关详细信息，请参阅[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

搜索：

```
Microsoft.AspNet.SignalR 
```

...但请确保在窗口顶部选择了“包括售前赛”。

# mysql - 以阿尔法顺序mysql获取到阿尔法变量之间的所有记录

> ID：13668517
> 
> 赞同：0
> 
> 时间：2012-12-02T10:43:17.533
> 
> 标签：mysql

我有一个用于字典查找目的的单词数据库。我需要能够用 mysql 做的是允许用户输入变量（alpha），我的脚本将返回以这两个变量开头的每个单词以及介于两者之间的所有内容。

假设这两个变量是：

```
$letters1 = abor
$letters2 = accr 
```

我想得到以`abor`through开头的每个单词`accr`。我需要返回适合这两个起点之间的每个单词。因此，我知道的示例 SQL 语句不起作用，但可能会帮助您理解我在问什么：

```
SELECT word from table1 WHERE word LIKE '%abor%' THROUGH '%accr%' ORDER BY word ASC 
```

我知道这`THROUGH`不是操作员，但这是我需要完成的总体思路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:45:07.267

如果你只想要两个变量之间以字母*开头*[`BETWEEN ... AND ...`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_between)的单词，你可以使用 MySQL 的操作符：

```
SELECT word FROM table1 WHERE word BETWEEN 'abor' AND 'accr' ORDER BY word 
```

# c#-4.0 - Solrnet/Tomcat 7 - 写几个大文件内存消耗增长惊人

> ID：13668519
> 
> 赞同：0
> 
> 时间：2012-12-02T10:43:31.730
> 
> 标签：c#-4.0, solr, tomcat7, solrnet

我正在将非常大的（大小和计数）文档写入 solr 索引（具有许多数字和一些文本字段的 100 多个字段）。我在 W7 x64 上使用 Tomcat 7。

根据@Maurico[在索引数百万个文档时的建议，](http://bugsquash.blogspot.com/2010/02/indexing-millions-of-documents-with.html)我并行化了写入操作（请参见下面的代码示例）

写入 Solr 方法正在从主循环中“执行”任务（注意：我将其任务完成，因为写入操作需要太长时间并且会占用主应用程序）

问题是内存消耗无法控制地增长，罪魁祸首是 solr 写操作（当我将它们注释掉时，运行正常）。我该如何处理这个问题？通过Tomcat？还是 SolrNet？

感谢您的建议。

```
 //main loop:
        {
               :
               :
               :
             //indexDocsList is the list I create in main loop and "chunk" it out to send to the task.
              List<IndexDocument> indexDocsList = new List<IndexDocument>();
              for(int n = 0; n< N; n++)
              {
                  indexDocsList.Add(new IndexDocument{X=1, Y=2.....});
                  if(n%5==0) //every 5th time we write to solr
                  {
                     var chunk = new List<IndexDocument>(indexDocsList);
                     indexDocsList.Clear();
                     Task.Factory.StartNew(() => WriteToSolr(chunk)).ContinueWith(task => chunk.Clear());
                     GC.Collect();
                   }
              }
      }

      private void WriteToSolr(List<IndexDocument> indexDocsList)
        {

            try
            {
                if (indexDocsList == null) return;
                if (indexDocsList.Count <= 0) return;
                int fromInclusive = 0;
                int toExclusive = indexDocsList.Count;
                int subRangeSize = 25;

                //TO DO: This is still leaking some serious memory, need to fix this 
                ParallelLoopResult results = Parallel.ForEach(Partitioner.Create(fromInclusive, toExclusive, subRangeSize), (range) =>
                {
                    _solr.AddRange(indexDocsList.GetRange(range.Item1, range.Item2 - range.Item1));
                    _solr.Commit();
                });

                indexDocsList.Clear();
                GC.Collect();
            }
            catch (Exception ex)
            {
                logger.ErrorException("WriteToSolr()", ex);
            }
            finally
            {

                GC.Collect();
            };
            return;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:34:03.713

您在每批之后手动提交。这是 Solr 最昂贵的操作。在您的情况下，我建议每隔 x 秒自动提交一次并执行一次 softAutoCommit (Solr 4.0) 功能。那应该照顾 Solr 的事情。您还必须调整您的 JVM 垃圾收集选项，以便您不会暂停世界 GC。

# iphone - 透明的 ViewController 可以看到下面的父级？

> ID：13668526
> 
> 赞同：21
> 
> 时间：2012-12-02T10:44:18.490
> 
> 标签：iphone, objective-c, uiviewcontroller, transparency

我想模态地添加一个具有透明背景的视图控制器，以便可以看到下面的父视图控制器。（这是在 iPhone 的应用程序中，而不是在 iPad 上。）

我试过这个：

```
TextFieldViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"TextFieldVC"];
vc.modalPresentationStyle = UIModalPresentationCurrentContext;
vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self.navigationController presentViewController:vc animated:YES completion:^{}]; 
```

没有运气，并给视图控制器一个清晰的颜色背景。如果有任何改变，我的视图控制器就在故事板中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T11:54:59.260

@Josh Kahane 设置视图控制器，该控制器将在此处显示带有此代码的透明视图控制器，`-ViewDidLoad` 并确保将`UIViewController`视图的 alpha 通道设置为低于 1。

代码：

```
self.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-19T13:57:46.183

我一直在寻找解决方案。现在感谢 iOS 8。他们引入了几个新的 modalPresentationStyle。其中之一是 UIModalPresentationOverCurrentContext。使用相同的方法来解决此问题。

```
viewcontroller.modalPresentationStyle = UIModalPresentationOverCurrentContext; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-29T10:12:11.690

为了完整性和更新，我还为 Swift 添加了解决方案：

**任何一个**

```
viewController.modalPresentationStyle = .CurrentContext 
```

being -*一种显示样式，其中内容仅显示在呈现视图控制器的内容上。*

**或者**

```
viewController.modalPresentationStyle = .OverCurrentContext 
```

being -*内容仅显示在父视图控制器的内容上的演示样式。演示结束时，所呈现内容下方的视图不会从视图层次结构中删除。因此，如果呈现的视图控制器没有用不透明的内容填充屏幕，则底层内容会显示出来。*

根据演示文稿的要求和情况而定。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-19T03:50:40.333

尽管有很多步骤很容易忘记，但这是可能的。在努力让自己工作 4 小时后，我想出了以下解决方案。

**1 - 像其他任何东西一样创建一个视图控制器。**

*头文件*

```
#import "DDBaseViewController.h"

@interface DDHomeSearchLoadingViewController : UIViewController

@end 
```

*实施文件*

```
#import "DDHomeSearchLoadingViewController.h"

@interface DDHomeSearchLoadingViewController ()
@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *activityMonitor;
@property (weak, nonatomic) IBOutlet UIView *modalView;

@end

@implementation DDHomeSearchLoadingViewController

#pragma mark - UIViewController lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self setupUI];
}

-(void) setupUI
{
    [self makeRoundedCorner:self.modalView AndCornerRadius:6.0f];
    [self.activityMonitor startAnimating];

}

-(void) makeRoundedCorner:(UIView*) view AndCornerRadius:(float) cornerRadius
{
    [view.layer setCornerRadius:cornerRadius];
    [view.layer setMasksToBounds:YES];
}

@end 
```

**2 - 将您的容器视图背景颜色设置为 ClearColor**

![在此处输入图像描述](../Images/ab63aa16764c93dcf69f029fd52268c4.png)

**3 - 添加一个 UIView，它将像覆盖一样呈现**

![在此处输入图像描述](../Images/85b978c9218459c3a9ed84d6004a4552.png)

**4 - 添加一个 UIView，它将像一个对话框一样呈现在覆盖 UIView 上**

***添加/移动它时，请确保它位于覆盖视图之外。出于某种原因，当您使用鼠标移动它时，它会自动添加到覆盖 UIView 中。（说实话真烦人）***

![在此处输入图像描述](../Images/201394183a4438d873fbd6c0d3b1a964.png)

**5 - 为您创建的视图设置 Storyboard ID**

![在此处输入图像描述](../Images/1d277f683a68e2ecf35580edba61b4da.png)

**6 - 最后在你不想调用它的地方添加这段代码（假设它也是一个 UiViewController ）**

```
DDHomeSearchLoadingViewController* ddHomeSearchLoadingViewController = [[UIStoryboard storyboardWithName:@"Main" bundle:nil] instantiateViewControllerWithIdentifier:@"DDHomeSearchLoadingViewController"];
self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:ddHomeSearchLoadingViewController animated:YES completion:nil]; 
```

我希望它可以帮助你们

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-02T11:42:41.933

斯威夫特 3 -

尝试`vc.modalPresentationStyle = .overFullScreen`

```
let vc = self.storyboard!.instantiateViewControllerWithIdentifier("ExampleViewController") as! ExampleViewController
vc.view.backgroundColor = UIColor.clearColor()
vc.modalPresentationStyle = .overFullScreen
self.presentViewController(vc, animated: true, completion: nil) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-02T11:48:54.590

Swift 5 的答案。

**透明视图控制器**

```
self.view.backgroundColor = .clear 
```

**呈现视图控制器**

```
let viewController = TransparentViewController()
viewController.modalPresentationStyle = .overFullScreen
navigationController.present(viewController, animated: false) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-19T13:50:35.173

```
UIStoryboard *story = [UIStoryboard storyboardWithName:@"Main" bundle:[NSBundle mainBundle]];
ChooseController *sec = [story instantiateViewControllerWithIdentifier:@"Controller"];
sec.modalPresentationStyle = UIModalPresentationOverCurrentContext;
sec.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:sec animated:YES completion:^{}]; 
```

注意：当前控制器 superview alpha 值必须低于 1，就像 0.5 alpha 一样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-25T10:14:19.970

您可以通过执行以下选项并减少父母视图不透明度来更改情节提要。使用情节提要：无需编写任何代码即可实现此目的

[![在此处输入图像描述](../Images/bfdaf901aad58dabfbe8352b329ffad8.png)](https://i.stack.imgur.com/Z1s2j.png)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-12-02T10:51:07.247

当您以模态方式呈现视图控制器时，它会进入堆栈，从而将视图控制器隐藏在其下方。所以你所能做的就是呈现一个带有动画的透明视图，类似于模态呈现视图控制器。

# android - Android通过单击列表视图中该行中的图像删除包含2个列表的行

> ID：13668528
> 
> 赞同：0
> 
> 时间：2012-12-02T10:44:30.127
> 
> 标签：android

我有一个使用**自定义适配器**填充的**列表**视图。列表视图包含 2 个列表和一个图像。.**`Format- list list image`**

 **单击该按钮时，我想同时从两个列表中删除项目。

我尝试使用`onclick`，`onitemclick`但应用程序崩溃了。

如何同时删除两个列表？列表不保存在日期库中。项目存储在`Vector`.

索引和视图有什么用？当自定义适配器扩展时`Base Adpater`，我们得到一个包含参数**位置**的 getView 方法。这与索引值相同吗？

```
code-holder.imgBtn.setOnClickListener(new ImageView.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                     Index index = (Integer)  arg0.getTag();
                    if(index>=0){                        

                    prescriptionRemoval = ProgressDialog.show(AddToCartActivity.this, null, getResources().getString(R.string.prescriptionRemoval));    
                    String removeDrug=drugNameList.get(index);
                    String removePrescription=prescriptionList.get(index);  
                    String removeTotal=removeDrug+removePrescription;
                    listCheck.remove(removeTotal);
                    drugNameList.remove(index.intValue());
                    prescriptionList.remove(index.intValue());
                    notifyDataSetChanged();
                    handler.sendEmptyMessage(DIALOG_PRESCRIPTION_REMOVAL);  
                     }
                }
            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:32:32.373

找到答案。获取位置并删除具有位置值和 notifydatasetchanged() 的两个列表**

# mysql - “可重复阅读”与乐观

> ID：13668531
> 
> 赞同：9
> 
> 时间：2012-12-02T10:44:44.310
> 
> 标签：mysql, sql, oracle, postgresql, transactions

并发控制和事务隔离级别有什么区别？

我清楚地理解它们中的每一个，但是，我在将它们相互关联时遇到了一些问题。具体来说，我看到它们的功能有些重叠，我不确定什么时候应该使用另一个。还是应该两者一起使用？

另外，用可重复读取说悲观锁定是什么意思？可重复读取不是已经意味着所有要编辑的值都将被锁定吗？那么为什么仍然需要悲观锁定呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:54:36.263

*并发控制*是处理由并发连接引起的问题的任何机制的通用术语。

*事务隔离级别*是 MySQL 实现并发控制的一种机制。

有关MySQL 如何在没有悲观锁定的情况下实现的文档，请参阅[Consistent Nonlocking Reads ：](http://dev.mysql.com/doc/en/innodb-consistent-read.html)`REPEATABLE READ`

> 一致读取不会对其访问的表设置任何锁定，因此其他会话可以在对表执行一致读取的同时自由修改这些表。
> 
> 假设您在默认`REPEATABLE READ`隔离级别下运行。当您发出一致的读取（即普通`SELECT`语句）时，InnoDB 会为您的事务提供一个时间点，根据该时间点您的查询会看到数据库。如果另一个事务在分配您的时间点后删除了一行并提交，您不会看到该行已被删除。插入和更新的处理方式类似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T17:33:14.957

之所以出现这个问题，是因为有两种并发控制模型，它们有时会被 SQL 实现混合使用。

1.  锁，如 2PL（两相锁定）
2.  版本，如 MVCC（多版本并发控制）

悲观意味着读取的行被锁定。乐观意味着读取的行没有被锁定。

The classic 2PL implementation of Repeatable Read is always pessimistic. The multiversion implementation of Repeatable Read is optimistic. It does not lock the rows that are read for a SELECT statement and allows other transactions to modify the rows that have been read in a SELECT. Such changes are not visible to the transaction that performed the SELECT, until it is committed.

# asp.net - 在 IIS 中启用 Http 或 Https 请求

> ID：13668533
> 
> 赞同：1
> 
> 时间：2012-12-02T10:45:22.383
> 
> 标签：asp.net, iis-7, iis-7.5

我有许多应用程序驻留在我的 IIS 中的同一站点下。我想将其中一些配置为仅与 http 和 https 中的其他一起使用。整个站点可以决定让他们全部使用 http 或全部使用 https。

我怎么能做到这一点？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-24T10:09:17.613

https 的 IIS 更改：

*   转到 → 我的 Web 应用程序 → 需要 SSL → 启用 SSL 以仅强制执行 https。如果这不是强制的，那么使用可以通过 https 和 http 进行连接。
*   可选地，我们可以在 IIS 中添加一个 Http 响应标头，以强制 https 下载任何资源，如果通过正常的 http url 请求注意：启用上述标头后，我们强制用户仅通过 http 访问

# c# - 如何将 System.Web 引用添加到 Windows 窗体应用程序

> ID：13668537
> 
> 赞同：4
> 
> 时间：2012-12-02T10:45:51.143
> 
> 标签：c#, visual-studio-2010, reference, windows-applications, system.web

我想在 Windows 窗体应用程序中使用 HttpUtility.UrlEncode，
但在 .NET（添加引用）区域中找不到 System.Web！
如何将此程序集添加到我的项目中？
我正在使用.net 4 ...

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T10:59:57.773

右键单击项目 -> 属性 -> 将目标框架从**.Net Framework 4 Client Profile**更改为**.Net Framework 4**

当您删除**客户端配置文件**限制时，您将在 .Net（添加引用）区域中看到**System.Web 。**

# java - JFace Dialog 处理提交的数据（okPressed）

> ID：13668543
> 
> 赞同：2
> 
> 时间：2012-12-02T10:46:55.747
> 
> 标签：java, dialog, return, jface

这是我的对话框类：InputDialog，它是用另一个视图中的按钮打开的。此对话框包含单个文本输入。

```
public class InputDialog extends Dialog{
   public InputDialog(Shell parentShell) {
      super(parentShell);
      // TODO Auto-generated constructor stub
   }

   @Override
   protected Control createDialogArea(Composite parent) {
       parent.setLayout(new GridLayout(1, false));

       Text txtName = new Text(parent, SWT.NONE);

       return super.createDialogArea(parent);
   }

   @Override
   protected void okPressed() {
       // TODO Auto-generated method stub
       super.okPressed();
   }
} 
```

这就是我打开对话框的方式：

```
buttAdd.addSelectionListener(new SelectionListener() {

    @Override
    public void widgetSelected(SelectionEvent e) {
        // TODO Auto-generated method stub

        InputDialog dialog = new InputDialog(new Shell());
        dialog.open();
    }

    @Override
    public void widgetDefaultSelected(SelectionEvent e) {
        // TODO Auto-generated method stub

    }
}); 
```

如何处理/读取对话框中返回或提交的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:04:18.323

您可以将输入的值保留在对话框中的字段中，然后在对话框关闭后使用 getter。

由于`InputDialog`阻塞，您必须检查它的返回值。

```
if (Window.OK == dialog.open()) {
    dialog.getEnteredText();
} 
```

在哪里

```
public class InputDialog extends Dialog {
    private Text txtName;
    private String value;

    public InputDialog(Shell parentShell) {
        super(parentShell);
        value = "";
    }

    @Override
    protected Control createDialogArea(Composite parent) {
        parent.setLayout(new GridLayout(1, false));

        txtName = new Text(parent, SWT.NONE);

        return super.createDialogArea(parent);
    }

    @Override
    protected void okPressed() {
        value = txtName.getText();
    }

    public String getEnteredText() {
        return value;
    }
} 
```

# facebook - facebook 共享器中的描述最大限制

> ID：13668545
> 
> 赞同：3
> 
> 时间：2012-12-02T10:46:58.017
> 
> 标签：facebook, limit, max, facebook-sharer

有谁知道 facebook feed 共享器中描述字段的最大限制？它似乎是 100 个字符，但我找不到任何关于最大长度 od 描述字段的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-17T08:14:15.617

截至今天，标题为 100 个字符，描述为 108 个字符。这就是您发布 Facebook 链接时在预览中显示的内容。然而，实际的 sharer.php 页面将显示更多描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T14:07:07.290

这里有一个相关的问题：

[Facebook 开放图元标记最大内容长度](https://stackoverflow.com/questions/8914476/facebook-open-graph-meta-tags-maximum-content-length)

（因为共享者使用开放图形标签）

答案似乎是没有硬性限制，但 Facebook 会根据需要截断它，这取决于它的使用位置；并且新闻提要的限制一直在变化。

# javascript - 导出 mongoose 数据库模块

> ID：13668547
> 
> 赞同：9
> 
> 时间：2012-12-02T10:47:14.537
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我需要导出我的 mongoose 数据库模块，这样我就可以使用程序中每个模块中定义的模型。

例如，我的 database.js 模块看起来像这样：

```
var mongoose = require('mongoose'),
    db = mongoose.createConnection('mongodb://localhost/newdb'),
    Schema = mongoose.Schema;

db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () {
    console.log("Connected to database newdb");

    var dynamicUserItemSchema = new mongoose.Schema({
      userID: Number,
      rank:  Number,
    });

    var staticUserItemSchema = new mongoose.Schema({
        _id: Schema.Types.Mixed,
        type: Schema.Types.Mixed,
    });

    var DynamicUserItem = db.model('DynamicUserItem', dynamicUserItemSchema);
    var StaticUserItem = db.model('StaticUserItem', staticUserItemSchema);

}); 
```

我希望能够将`var db = require('../my_modules/database');`我的程序添加到任何其他模块 - 所以我将能够使用这样的模型：

`db.DynamicUserItem.find();`或者`item = new db.DynamicUserItem({});`

是否可以使用“导出”或“模块导出”来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-02T11:47:14.240

我通常不使用`error`and`open`事件，而是按照[mongoosejs](http://mongoosejs.com/)的示例创建到我的数据库的连接。使用该示例，您可以执行以下操作。

数据库.js

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'test');

var schema = mongoose.Schema({ name: 'string' });
var Cat = db.model('Cat', schema);

module.exports = Cat; // this is what you want 
```

然后在你的 app.js 中你可以做类似的事情

```
var Cat = require('db');

var peter = new Cat(); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T17:51:42.950

您可以使用导出来定义其他地方可能需要的模块：

./models/list.js

```
var ListSchema = new Schema({
    name                : { type: String, required: true, trim: true }
    , description   : { type: String, trim: true }
});

module.exports = db.model('List', ListSchema); 
```

./routes/list.js

```
var list = module.exports = {};

var List = require('../models/list');

list.get = function(req, res){
        List.find({ user: user._id }).exec(function(err, lists){
            res.render('lists', {
                lists: lists,
            });
        });
    });
}; 
```

./app.js

```
app.get('lists', routes.lists.get); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T11:15:57.797

如果您使用的是 express，那么我会将模型放在 app.settings 中。您可以在配置时执行以下操作：

```
app.configure(function() {
  app.set('db', {
      'main'     : db
    , 'users'    : db.model('User')
  })
}) 
```

然后，您将能够使用类似的模型`req.app.settings.db.users`，或者您可以创建一种方法来`db`以其他方式在您想要的文件中获取 var。

这个答案不是一个完整的例子，但看看我的入门项目，它以相对易于使用的方式设置 express 和 mongoose：[https ://github.com/mathrawka/node-express-starter](https://github.com/mathrawka/node-express-starter)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-01T20:48:59.153

作为已接受答案的补充，如果您想导出多个模块，您可以执行以下操作：

在 db.js 中：

```
var my_schemas = {'Cat' : Cat, 'Dog': Dog};
module.exports = my_schemas; 
```

然后在 app.js 中：

```
var schemas = require('db');
var Cat = schemas.Cat;
var Dog = schemas.Dog;
Cat.find({}).exec({...}); 
```

# objective-c - 如何添加子视图，但我希望它向左/向右旋转 - 内部示例。（目标-c）

> ID：13668548
> 
> 赞同：0
> 
> 时间：2012-12-02T10:47:23.943
> 
> 标签：objective-c, iphone, rotation, uitextview, subview

我想将 a 添加`UITextView`到另一个视图（如下所示）并希望它旋转 15-20 度。怎么做到呢？

![在此处输入图像描述](../Images/3ac83d6710ff673dc0bddc1acb5550fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:51:38.503

您需要为此使用转换。

```
textView.transform = CGAffineTransformRotate(textView.transform, M_PI*45/180); 
```

我不太确定角度。我希望这会有所帮助。

# actionscript-3 - 1 个元素的 Vector 占用多少空间？

> ID：13668551
> 
> 赞同：1
> 
> 时间：2012-12-02T10:47:49.743
> 
> 标签：actionscript-3

这是一个更笼统的问题，但我不知道不同编程语言的空间是否不同，所以我用 actionscript-3 标记了它。在很多情况下，我需要一个通常包含 1 个元素的向量，但有时可能更多。例如，如果我使用 int 与 1 int 的向量相比，我会节省多少内存？假设我有一个函数可以对向量中的所有数字执行某些操作。输入通常是单个 int，但有时我可能需要更多。向量的大小也是固定的，所以我没有机会将 1 元素向量变成 2 元素向量。

现在我可以做两件事：

1) 我只能使用向量并且有一个函数可以接收向量，或者

2) 我可以定义 1 个接收单个 int 的函数和另一个执行相同操作但接收 int 向量的函数。

或者我可以让它接受任何类型的参数，检查输入的类型，然后将其转换为整数或向量？基本上，我应该制作 2 个函数来满足这两种情况，还是只制作 1 个只使用向量的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:44:37.350

OK 去掉了旧的例子，因为它并没有真正适用。

如果未提前指定向量的大小，则当向量空间不足时，大小会增加。每次向量的大小增加时，都会分配一个新的内存块。因此，通过不预先定义向量的大小，内存占用量正是存储一个 int 所需的。

因此，仅基于这一点制作一堂课并不是一个坏主意。但是现在您需要查看这一切的 OOP。因此，如果您的大多数锁都有一把钥匙，那么大多数时候您真的不需要访问 lock.keys[0] 尤其是即使知道您需要这样做，您仍然需要一些指示器，它只需要并且需要并且拥有一把钥匙。lock.lockType 或 lock.requiredNumKeys 或两者兼而有之。由于所有这些逻辑和属性都特定于您需要多个键的罕见情况，我说......

构建 2 个类。

编辑：

我想我会提到的一件事是在使用两个类时，您可能在某些时候需要一个数组或锁集合。使这两个类都实现和接口，如定义函数 addKey() 和 get isLocked() 的 IKeyedLock 这样你可以有一个列表将所有 IKeyedLocks，但是 SingleKeyLock 和 MultiKeyLock 类确定它们是否仍然被锁定以及如何添加一个键（或多个键）

# ios - 带圆角的 Xcode StoryBoard 按钮组

> ID：13668554
> 
> 赞同：0
> 
> 时间：2012-12-02T10:48:00.933
> 
> 标签：ios, xcode, uistoryboard

如何制作带圆角的按钮组

![圆角按钮组](../Images/f5e9a0d9e14ef39972fe071444f30db5.png)

我知道我可以使用图像。但是不使用图像就可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:16:33.983

来自故事板：

表视图

内容->静态单元格

样式->分组

[http://www.techotopia.com/index.php/Using_an_Xcode_Storyboard_to_Create_a_Static_Table_View](http://www.techotopia.com/index.php/Using_an_Xcode_Storyboard_to_Create_a_Static_Table_View)

# javascript - 让 HighCharts 显示更少的数据点

> ID：13668555
> 
> 赞同：2
> 
> 时间：2012-12-02T10:48:13.193
> 
> 标签：javascript, highcharts

我正在绘制一个图表，其中 x 轴是日期时间。我的数据包含每天的大量样本，结果图表很紧张。

有没有一种简单的方法可以让 highcharts 每天只显示 1 或 2 个数据点，以使图表更平滑？

[http://jsfiddle.net/RjPRd/72/](http://jsfiddle.net/RjPRd/72/)

```
var data = [[1354282654000,13],[1354285785000,13],[1354289387000,14],[1354292990000,15],[1354296592000,13],[1354419090000,20],[1354422692000,21],[1354426295000,20],[1354435425000,19],[1354438087000,19],[1354538087000,24]];

var options = {
    chart: { renderTo: 'graph' },
    xAxis: { type: 'datetime' },
    series: [{data: data}]
};

var chart = new Highcharts.Chart(options);
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:41:27.190

如果您问 HighCharts 是否可以进行插值/投影，那么答案是否定的。您可以做的是预处理您的数据或将 HighStock 与[dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)一起使用。[这](http://jsfiddle.net/wergeld/DBgqe/)是一个非常基本的例子。

这是执行此操作的代码：

```
plotOptions: {
    series: {
        dataGrouping: {
            approximation: 'average', //default
            units: [[
                'day',
                [1]
                ]]
        }
    } 
```

# php - 正则表达式也包含æøåÆØÅ

> ID：13668557
> 
> 赞同：-3
> 
> 时间：2012-12-02T10:48:46.853
> 
> 标签：php, regex, preg-match

我怎样才能编辑这个也接受æøåÆØÅ？

```
function validate_username($input, $pattern = '/[^A-Za-z0-9]/')
{
     return !preg_match($pattern, $input);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:50:08.430

```
'/[^A-Za-z0-9æøåÆØÅ]/u' 
```

要求您的 php 文件以 UTF-8 保存，并且输入当然也是 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:50:12.880

```
function validate_username($input, $pattern = '/^\w+$/')
{
     return preg_match($pattern, $input);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:16:55.740

尝试：

```
'/[^\p{L}\d]/u' 
```

`\p{L}`匹配所有 unicode 字母，包括您已经列出的字母以及许多尚未给您带来麻烦但可能会在某一天造成麻烦的字母。

`\d`还匹配所有数字，包括不同脚本中的 unicode 数字。

# c# - Windows 8 - 在 C# 中放置 GridView 的标题

> ID：13668559
> 
> 赞同：1
> 
> 时间：2012-12-02T10:49:31.800
> 
> 标签：c#, gridview, windows-8

我有一个 GridView：

```
<GridView HorizontalAlignment="Left" Width="400" Height="400" Header="AAAAAA">
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
        </GridView> 
```

![在此处输入图像描述](../Images/7fb31242a556663fb9846ed7c04a096a.png)

我只是想要 GridView 上侧的 AAAAA，而不是它干预 GridViewItem 位置的左侧。你知道，就像在 Windows 8 上的音乐应用程序中一样，标题“正在播放>”或“最流行的>”放置在 GridView 的上侧。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:25:05.300

尝试这个：

```
 <GridView HorizontalAlignment="Left" Width="400" Height="400" Header="AAAAA">
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Orientation="Horizontal" Width="400" />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
    </GridView> 
```

或者，您可以执行以下操作，而不是使用 GridView 的 Header：

```
 <Grid Width="400" Height="300">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock Style="{StaticResource SubheaderTextStyle}" Text="My Header" Margin="0 20" />
        <GridView Grid.Row="1">
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
            <GridViewItem Content="GridViewItem" Margin="0"/>
        </GridView>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:59:36.987

尝试这个：

```
<GridView HorizontalAlignment="Left" Width="400" Height="400">
        <GridView.Header> <TextBlock Text="AAAAA" Margin="240,0,0,0"/>
        </GridView.Header>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
    </GridView> 
```

您可以为 TextBlock 设置所需的任何属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T11:35:06.290

```
<GridView HorizontalAlignment="Left" Width="400" Height="400" Header="AAAAA">
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Orientation="Horizontal" Margin="-80,20,0,0" Width="400" />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
        <GridViewItem Content="GridViewItem" Margin="0"/>
    </GridView>

Or you can adjust the margin of the variableSizedWrapGrid, so that the alignment of the header and Items should appear in same line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T12:54:23.950

<--试试这个-->

```
<GridView HorizontalAlignment="Left" Width="400" Grid.Row="1" Height="400">
<GridView.Header>
<TextBlock Text="AAAAA" />
</GridView.Header>
<GridView.ItemsPanel>
<ItemsPanelTemplate>
<VariableSizedWrapGrid Margin="-35,20,0,0"/>
</ItemsPanelTemplate>
</GridView.ItemsPanel>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
<GridViewItem Content="GridViewItem" Margin="0"/>
</GridView> 
```

# python - python：从未知字符编码（假设 iso-8859-1）转换为 unicode

> ID：13668560
> 
> 赞同：2
> 
> 时间：2012-12-02T10:49:45.827
> 
> 标签：python, character-encoding

我正在使用 xml.etree 解码一个 xml 文件，其中一个元素包含此字符串：

```
ExÃ©cutive 
```

我几乎尝试了一切来弄清楚如何将其转化为真正的价值：

```
Exécutive 
```

我尝试了以下方法：

```
>>> s = 'Ã©'

>>> s
'\xc3\x83\xc2\xa9'

>>> print s
Ã©

>>> type(s)
<type 'str'>

>>> s.decode('iso-8859-1')
u'\xc3\x83\xc2\xa9'

>>> print( s.decode('iso-8859-1').encode('utf-8'))
ÃÂ©

>>> print( s.decode('utf-8'))
Ã© 
```

我对这些编码有点迷失了。有人帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:18:50.557

该数据显然是 UTF-8 编码数据（例如，“é”是两个字节），被误解为 ISO-8859-1。对于测试用例，以下生成输出“Executive”：

```
# This Python file uses the following encoding: utf-8
s = 'ExÃ©cutive'
print s.decode('utf-8') 
```

在处理 XML 文件时，您可能只需要将其读取为 UTF-8。

# php - 使用 POSTFIX 和 SWIFTMAILER、PHP 发送电子邮件

> ID：13668561
> 
> 赞同：5
> 
> 时间：2012-12-02T10:49:47.633
> 
> 标签：php, lamp, postfix-mta, swiftmailer, turnkeylinux.org

我已经安装了[TURNKEY LAMP](http://www.turnkeylinux.org/lampstack)（今天更新，2012 年 12 月 2 日）。它与 Oracle VM VirtualBox 一起使用。该虚拟服务器具有 linux、apache、php、mysql 和 Postfix MTA（绑定到 localhost），以允许从 Web 应用程序发送电子邮件。

问题是我无法使用 Postfix 发送邮件，因为我不知道要使用哪个用户名或密码，或者端口。

我用[SwiftMailer](http://swiftmailer.org)发送邮件，带有 PHP 代码。我已使用我的网站服务器之一成功发送邮件：

```
// Create the Transport
$transport = Swift_SmtpTransport::newInstance('localhost', 465, 'ssl')
  ->setUsername('myusername@mywebsite.net')
  ->setPassword('mypassword')
  ; 
```

或使用我的 gmail 帐户：

```
 // Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl')
  ->setUsername('myusername@gmail.com')
  ->setPassword('mypassword')
  ; 
```

Swiftmailer 支持 PostFix，它写在他们的文档中。

我从我的 Lamp 虚拟服务器使用 Postfix 邮件服务器接口。 [Postfix 邮件服务器接口](https://plus.google.com/photos/112810290552300062400/albums/5602803259607883393/5817296030469927026?banner=pwa&authkey=COvtn8ymn4ym1wE)

请问，你能告诉我如何使用这些发送邮件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T09:49:19.260

要使用 Postfix (sendmail)，您需要使用与 SwiftMailer 捆绑的 SendMail 传输。有一个小例子：

```
// Create the Transport
$transport = Swift_SendmailTransport::newInstance('/usr/sbin/sendmail -bs');
// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport); 
```

# javascript - 如何在js中使用图像数据作为路径？

> ID：13668563
> 
> 赞同：0
> 
> 时间：2012-12-02T10:50:07.480
> 
> 标签：javascript, image, html

我正在开发一个 html5、js、css3 应用程序，我的图像衬衫可以在其中改变颜色。

我目前的模型在顶部有基本图像和衬衫图像 (.png)。

为了获得替代颜色（我打算有 20 个左右的选项，裤子、鞋子等也一样），我可以为每种颜色创建一个专用的 .png 文件，但这似乎有点过头了。

使用带有 stroke() 和 fill() 的路径将实现我想要的，但我在文档中找不到解释 js 如何使用图像文件中的路径（或可能是什么文件格式）的方法。我找到的示例在 js 中绘制路径。

任何建议重新路径或实现这一目标的替代/更好的方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:07:29.547

我认为在衬衫所在的位置制作透明的 shirt.png 图像会更容易。然后你可以给一个 CSS 背景来给衬衫上色。应该是我认为最简单、最灵活的方式。

# ios5 - Quickblox：ASI Http 符号和模块之间的冲突

> ID：13668567
> 
> 赞同：1
> 
> 时间：2012-12-02T10:50:38.773
> 
> 标签：ios5, asihttprequest, quickblox

我正在尝试在我的应用程序中实现聊天模块。我参考了 QuickBlox API 的简单示例代码。

但是当我尝试从我的应用程序注册用户时，我得到了以下链接器错误。

我的代码： -

```
// Create QuickBlox User entity
 QBUUser *user = [QBUUser user];
 user.password = _textPassword.text;
 user.login = [DicResponse valueForKey:@"User name"];

 // create User
 [QBUsers signUp:user delegate:self]; 
```

在我的应用程序中，我已经在使用`ASIHTTP`库。如果我评论这一行`[QBUsers signUp:user delegate:self];`，那么它编译成功。

如何解决这种冲突？

> ```
> duplicate symbol _isDismissing in:
>     /Users/abc/Library/Developer/Xcode/DerivedData/app-dtliqcvxngqgfwgzpbvmtupglcjd/Build/Intermediates/app.build/Debug-iphonesimulator/app.build/Objects-normal/i386/ASIAuthenticationDialog.o
>     /Projects/abc/Quickblox.framework/Quickblox(QBASIAuthenticationDialog.o)
> 
> duplicate symbol _NetworkRequestErrorDomain in:
>     /Users/abc/Library/Developer/Xcode/DerivedData/app-dtliqcvxngqgfwgzpbvmtupglcjd/Build/Intermediates/app.build/Debug-iphonesimulator/app.build/Objects-normal/i386/ASIHTTPRequest.o
>     /Projects/LockMEIfYouCan/Quickblox.framework/Quickblox(QBASIHTTPRequest.o)
> 
> duplicate symbol _RedirectionLimit in:
>     /Users/abc/Library/Developer/Xcode/DerivedData/app-dtliqcvxngqgfwgzpbvmtupglcjd/Build/Intermediates/app.build/Debug-iphonesimulator/app.build/Objects-normal/i386/ASIHTTPRequest.o
> 
>     /Projects/app/Quickblox.framework/Quickblox(QBASIHTTPRequest.o)
> ld: 3 duplicate symbols for architecture i386 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:50:51.933

You have to use latest [QuickBlox iOS SDK version 1.4](https://github.com/downloads/QuickBlox/quickblox-ios-sdk/QuickBlox_iOS_Framework_v.1.4.zip) or just download from [QuickBlox iOS SDK GitHub page](https://github.com/QuickBlox/quickblox-ios-sdk)

# python - 从列表项中删除特定的空格

> ID：13668571
> 
> 赞同：1
> 
> 时间：2012-12-02T10:52:02.470
> 
> 标签：python, list, whitespace

我有一个巨大的行列表，每行看起来如下

```
1 01 01 some random text 
```

零件是一个参考编号，随行而`1 01 01`变。我想删除三个参考编号之间的两个空格，以便这些行如下所示。

```
10101 some random text 
```

显然，这需要一个`for`循环。问题是我应该在我不能使用的循环中写什么`strip`，

```
for i in my_list:
    i.strip() 
```

因为那，如果有的话，会删除所有的空格，给我

```
10101somerandomtext 
```

我不想要。但如果我写

```
for i in my_list:
    i.remove(4)
    i.remove(1) 
```

我收到一条错误消息`'str' object has no attribute 'remove'`。在这种情况下，正确的解决方案是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:55:04.077

[`str.replace`](http://docs.python.org/2/library/stdtypes.html#str.replace)如果数字总是在开头，您可以使用函数接受可选参数的事实`count`：

```
for l in mylist:
    print l.replace(' ', '', 2) 
```

请注意，我在`print`这里这样做是有原因的：**您不能就地更改字符串**，因为字符串是不可变的（这也是它们没有`remove`方法并`replace`返回修改后的字符串，但保留初始字符串的原因完好无损的）。因此，如果您需要将它们放在一个列表中，那么创建另一个这样的列表会更简洁：

```
newlist = [l.replace(' ', '', 2) for l in mylist] 
```

像这样覆盖列表也是安全的：

```
mylist = [l.replace(' ', '', 2) for l in mylist] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:26:49.100

[`split`](http://docs.python.org/2/library/stdtypes.html#str.split)接受第二个参数 - 要进行的分割数

```
for i in my_list:
    components = i.strip(" ", 3)
    refnum = ''.join(components[:3])
    text = components[3] 
```

或者在 python 3 中：

```
for i in my_list:
    *components, text = i.strip(" ", 3)
    refnum = ''.join(components) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T10:54:59.910

使用[replace](http://docs.python.org/2/library/string.html#string.replace)`count`的参数来替换前 2 个空格。

```
a = "1 01 01 some random text"
a.replace(" " , "", 2)
>>> '10101 some random text' 
```

# android - 以意图启动的活动的一个实例

> ID：13668575
> 
> 赞同：0
> 
> 时间：2012-12-02T10:52:21.500
> 
> 标签：android, android-lifecycle

我有一个活动，它通过一个按钮从另一个活动开始，并在启动时传递了一个意图。我现在发现，该活动随后被创建了几次，因为它是从一个意图开始的，并且每次我点击上面提到的按钮时都会调用 onCreate()。在我阅读的文档中，它说“每次有一个“标准”活动的新意图时，都会创建一个新的类实例来响应该意图”，所以我假设我在某个地方有几个该活动的实例在堆栈上。这是我想避免的，因为活动有一些静态变量，这些变量是从其他活动中引用的，我想确保这个变量的值是确定性的！

我想要的是在按下按钮时摆脱所有现有实例并创建一个新的活动实例，或者确保只有一个活动并每次都以新的意图创建它。

我试图通过为活动设置 android:launchMode="singleTop" 并实现 onNewIntent(intent) 来实现这一点。这应该确保在这种情况下我只有一个活动实例并且我得到了新的意图。但是，如果我这样做，我基本上必须复制我的整个 onCreate() 方法，但只是使用新的意图，这感觉不对。

```
public void onNewIntent(Intent intent) {
    myAdapter= null;
    serverThread.stopThread();
    serverThread = null;
    this.onCreate(...);  // <- somehow do all this with new intent
} 
```

你知道如何轻松解决这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:04:19.820

您可以将所有代码从 onCreate() 移动到 onStart() 以确保每次打开该活动时都会调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:10:54.890

尝试设置标志 FLAG_ACTIVITY_REORDER_TO_FRONT 它将确保如果堆栈中存在活动，它将将该活动带到最前面。

```
Intent intent = new Intent(getApplicationContext(),
            YourCustomActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:45:53.407

在上述情况下，实际上 onDestroy() 是在用户使用创建意图并启动 Activity 的按钮导航回上一个 Activity 时调用的。也就是说，实际上在这种情况下，已经只有一个活动实例，而前一个实例正在被销毁。

因此，在上述设置中未调用 onNewIntent()。如果您想停止服务器，如上面问题中的一段代码所示，以便在再次按下按钮时可以启动新服务器，您实际上可以简单地执行以下操作：

```
@Override
public void onDestroy() {
    serverThread.stopThread();  
    super.onDestroy();
} 
```

希望对其他人有所帮助:)

# java - 具有邻接矩阵的 Dijkstra 算法

> ID：13668576
> 
> 赞同：-1
> 
> 时间：2012-12-02T10:52:23.373
> 
> 标签：java, priority-queue

我正在尝试使用给定邻接矩阵的优先级队列来实现 Dijkstra 算法。我知道问题可能出在我将顶点添加到优先级队列中，但我不知道如何解决它！

```
static int dijkstra(int[][] g, int i, int j) {
    // Get the number of vertices in G
    int n = g.length;
    int counter = 0;

    PriorityQueue<Vertex> q = new PriorityQueue<Vertex>(n, new Comparator<Vertex>() {       
        public int compare(Vertex a, Vertex b) {
            Vertex v1 = (Vertex) a;
            Vertex v2 = (Vertex) b;
            if (v1.getD() > v2.getD()) {
                return 1;
            } else if (v1.getD() < v2.getD()) {
                return -1;
            } else {
                return 0;
            }
        }
    });
    int[] distance = new int[n];
    for (int l = 0; l < n; l++) {
        distance[l] = 99999;
    }
    distance[i] = 0;

    for (int l = 0; l < n/2; l++) {
        for (int m = 0; m < n; m++) {
            if (g[l][m] > 1) {
                System.out.printf("%d was added \n", g[l][m]);
                q.add(new Vertex(l, g[l][m]));
            }
        }
    }
    while (!q.isEmpty()) {
        int u = 0;
        for (int z = 0; z < n; z++) {
            if (distance[z] < distance[u]) {
                u = z;
            }
        }
        if (distance[u] == 99999) { break; }
        q.remove();
        for (int l = 0; l < n; l++) {
            if (g[u][l] > 1) {
                int alt = distance[u] + g[u][l];
                if (alt < distance[l]) {
                    distance[l] = alt;
                    q.remove();
                    q.add(new Vertex(u, distance[l]));
                }
            }
        }
    }

    for (int k = 0; k < n; k++) {
        System.out.printf("==>%d", distance[j]);
    }
    return distance[j];
} 
```

和：

```
class Vertex {
    int v,d;
    public Vertex(int num, int dis) {
        v = num;
        d = dis;
    }
    public int getV() {
        return v;
    }
    public int getD() {
        return d;
    }
} 
```

我正在使用以下矩阵进行测试：

```
 0  0  0  0  0  0  0 38  0  0  0  0  0  0  0  0
 0  0  0  0 65  0 64  0  6  0  0  0  0  0  0  0
 0  0  0  0  0  0  0  0  0  0  6  8  0  0  0 62
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
 0 65  0  0  0  0  0  0  0  6  0  0  0  0 55  0
 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
 0 64  0  0  0  0  0 53  0  0 36  0 45  0  0  0
38  0  0  0  0  0 53  0  0  0  0 91  0 29  0  0
 0  6  0  0  0  0  0  0  0  0  0 95 55  0  0  0
 0  0  0  0  6  0  0  0  0  0  0  0  0  0  0  0
 0  0  6  0  0  0 36  0  0  0  0  0  0  0  0  0
 0  0  8  0  0  0  0 91 95  0  0  0 60  0  0  0
 0  0  0  0  0  0 45  0 55  0  0 60  0  0  0  0
 0  0  0  0  0  0  0 29  0  0  0  0  0  0  0  0
 0  0  0  0 55  0  0  0  0  0  0  0  0  0  0  0
 0  0 62  0  0  0  0  0  0  0  0  0  0  0  0  0 
```

开始是`0`，结束是`n - 1`。我应该得到，`195`但似乎没有任何距离被改变！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:44:24.873

当您打印距离时，您`j`始终打印数组，而`k`迭代器是。距离看起来是恒定的，但它们在变化。

```
for (int k = 0; k < n; k++) {
    System.out.printf("==>%d", distance[k]);
} 
```

此外，在您的算法中，您要删除顶部顶点两次，这是不合理的。算法应该是这样的：

```
while (!q.isEmpty()) {
    int u = q.peek().v;
    q.remove();
    for (int l = 0; l < n; l++) {
        if (g[u][l] > 1) {
            int alt = distance[u] + g[u][l];
            if (alt < distance[l]) {
                distance[l] = alt;
                q.add(new Vertex(u, distance[l]));
            }
        }
    }
} 
```

# java - 将字符串从一个索引插入另一个字符串到字符串之间的另一个索引

> ID：13668579
> 
> 赞同：2
> 
> 时间：2012-12-02T10:52:39.143
> 
> 标签：java, stringbuffer

我有一个已经用 java 编写的 SQL 选择查询。现在我想再选择几列。在这种情况下，我需要在 from 关键字的索引之前写列名。像这个初始查询 -

```
StringBuffer query;
query = " Select name,age,dob from employee" 
```

新查询应该是这样的 -

```
query = "select name , age , dob,city from employee" 
```

为此我尝试了`query= query.insert(indexof(dob),"city");`

但我认为这将覆盖。我的问题归结为 insert 是否会创建足够的空间来插入字符串或覆盖之前的字符串？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:58:06.523

而不是获取 的索引值，而是获取 的`dob`索引值`from`

```
query= query.insert(original.indexOf("from"),"city "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:57:50.417

试试这个：-

```
 StringBuffer query = new StringBuffer("Select name,age,dob from employee");
 query.insert(query.indexOf("from"), "city "); 
```

# c++ - 如果第一个相同，则通过按第二个排序插入 STL 对集合

> ID：13668580
> 
> 赞同：1
> 
> 时间：2012-12-02T10:52:43.077
> 
> 标签：c++, stl, set

我有一个

```
pair<int, pair<int, string> >. 
```

现在，我将其插入到 C++ 的 STL 集中。它保持集合按第一个值排序。但是，如果我插入一对与其他值相同的第一个值，我希望根据较大的第一个值根据第二个值对其进行排序。我将举一个例子来说明清楚。

```
#define pii pair<int, string>
#define pint pair< int , pii >
set< pint > S;
set< pint >::iterator it;
S.insert(make_pair(100, make_pair(1, "hi")));
S.insert(make_pair(50, make_pair(2, "hello")));
it = S.begin();
cout << it->second.second; 
```

我得到的输出是

```
hello 
```

但是，现在如果我这样做，

```
S.insert(make_pair(50, make_pair(3, "dude")));
it = S.begin();
cout << it->second.second 
```

这里的输出也是

```
hello 
```

但我希望输出是

```
dude 
```

因为它的第一个值（50）小于“hi”的第一个值（100）并且等于“hello”的第一个值（50）。但是，它的第二个值（3）大于“hi”的第二个值（1），也大于“hello”的第二个值。

谢谢你。

因此，如果第一个值相同，则它必须根据第二个值排序，但首先在较大的第二个值中排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:00:22.090

如您所见， 的定义`set`允许您指定比较操作

```
template < class Key, class Compare = less<Key>,
       class Allocator = allocator<Key> > class set; 
```

`Compare`可以是一个可以进行`operator()`比较的类。`true`此运算符有两个值，如果第一个值要放在集合中的第二个之前，则需要返回。

# vim - 如何从 Vim 内部启动 Erlang shell

> ID：13668583
> 
> 赞同：4
> 
> 时间：2012-12-02T10:53:43.147
> 
> 标签：vim, erlang

我想使用 Vim 作为 Erlang 编码的编辑器。我设法在 vim 中安装了 Erlang 插件，我想知道是否可以在 vim 中编译当前缓冲区？例如，在 Emacs 中，您可以使用 Ctrl C + Ctrl L 组合键启动 Erlang shell。那么在 Vim 中是否有替代方法来启动 Erlang shell 然后编译当前缓冲区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:14:59.953

对于 Vim 内部的快速 shell 命令，请使用`:!command -a -b arg1`（例如`:!ls -l`，`:!erl %`）。

但是 Emacs 不是 Vim，它们背后有不同的想法。Vim 只是一个带有编程扩展的文本编辑器，它不是内部终端的地方（就像俄罗斯方块和`M-x doctor`）。

Vim 维护者拒绝将成熟的终端实现添加到 Vim 本身中（有关更多详细信息，请参阅 参考资料`:help shell-window`）。

如果你仍然想要一个缓冲区内的 shell，你可以看看[ConqueTerm](http://www.vim.org/scripts/script.php?script_id=2771)，但它不能无缝地工作。我试过了，但更喜欢使用`tmux`/`screen`将我的控制台的屏幕空间分割成窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:07:33.913

我还在 vim 中使用相同的[vimerl](https://github.com/jimenezrick/vimerl)插件进行 erlang 开发。但是，我必须对其进行一些[小改动](https://github.com/sanmiguel/vimerl/commit/e2b720026d1294eb2467e91556c35f9dd815e03e)，以对其编译检查的方式进行一些改进。

一旦我进行了这些更改，写入文件（例如使用`:w`）会导致 vimerl 编译该源文件并将警告/错误放入快速修复[列表中](http://vimdoc.sourceforge.net/htmldoc/quickfix.html#%3acopen)`:make`（与您有一个 Makefile 的方式完全相同）。

FWIW，我的[vimrc](https://bitbucket.org/sanmiguel/dotfiles/src/a2183041c36e1a4cc2389d6454b6884432946e12/vim/vimrc.symlink?at=master#cl-222)中也有以下配置：

```
let g:erlangHighlightErrors = 1
let g:erlangHighlightBif = 1
let g:erlangCompletionDisplayDoc = 1
let g:erlangWranglerPath = "/usr/local/share/wrangler"
let g:erlangRefactoring = 1 
```

# menu - 更改与菜单选择相关的正文背景

> ID：13668584
> 
> 赞同：1
> 
> 时间：2012-12-02T10:53:48.400
> 
> 标签：menu, background, transition

我是学习 CSS3 的新手。几天来我一直在解决同样的问题。因此，我将本教程用于练习和其他用途。 [http://tympanus.net/Tutorials/CSS3Accordion/](http://tympanus.net/Tutorials/CSS3Accordion/)

我熟悉它的工作原理。现在我想尝试将它们与背景滑块结合起来。简而言之，我希望每次单击菜单时都更改主体背景（例如，具有过渡效果，淡入淡出）。

例如：关于我们 -> 背景更改为我的照片，我们的工作方式 -> 书籍图片或其他内容。

我尝试使用 div 替换主体背景以独立显示在彼此之上，但我无法让它正常工作。

谁能给我基本的解决方案？谢谢！

# magento - 将元关键字添加到类别列表 html 页面输出

> ID：13668587
> 
> 赞同：0
> 
> 时间：2012-12-02T10:54:12.067
> 
> 标签：magento

是否有可能在产品列表下方的类别列表视图中回显类别元关键字？

我在文件 template/catalog/catalog/product/list.phtml 中尝试了这样的想法：

```
<?php echo $_category->getMetaKeywords(); ?> 
```

但它不输出任何东西。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:19:38.477

您没有得到任何输出，因为 $_category 变量未在 template/catalog/catalog/product/list.phtml 中初始化。以下代码应有效：

```
<?php

$_category = Mage::registry('current_category');
echo $_category->getMetaKeywords();

?> 
```

# java - 无限滚动图像 ViewPager

> ID：13668588
> 
> 赞同：15
> 
> 时间：2012-12-02T10:54:15.050
> 
> 标签：java, android, android-viewpager, infinite-scroll

正如 Google 所记录的，Gallery 类在 API 级别 16 中已被弃用。不再支持此小部件。其他水平滚动小部件包括支持库中的 Horizo​​ntalScrollView 和 ViewPager。所以我使用 ViewPager 作为 Gallery 类的替代品。

我的目标是最终实现**带有文本描述的无限滚动图像 ViewPager**。我使用下面的代码来实现带有描述每个图像的文本的图像 ViewPager，但是**如何将无限滚动应用于 ViewPager？**

我之前没有使用过 ViewPager，所以请尽可能提供详细的代码。

**活动主.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
       android:layout_width="fill_parent" 
       android:layout_height="fill_parent" 
       android:orientation="vertical">
  <android.support.v4.view.ViewPager 
       android:id="@+id/myimagepager" 
       android:layout_width="match_parent" 
       android:layout_height="match_parent" /> 
</LinearLayout> 
```

**custom_pager.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:orientation="vertical"  
   android:gravity="center_horizontal">
   <ImageView 
       android:id="@+id/myimage" 
       android:layout_width="match_parent" 
       android:layout_height="0dp" 
       android:layout_margin="5dp" 
       android:layout_weight="2" /> 
    <TextView 
       android:id="@+id/image_text" 
       android:layout_width="fill_parent" 
       android:layout_height="0dp"   
       android:layout_weight="1"/>

</LinearLayout> 
```

**图像页面：**

```
public class ImagePager extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra, stringArray );
        ViewPager myPager = (ViewPager) findViewById(R.id.myimagepager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);
    }

    private int imageArra[] = { R.drawable.a, R.drawable.b,R.drawable.c, 
                                 R.drawable.d,R.drawable.e,R.drawable.f,
                                 R.drawable.g, R.drawable.h, R.drawable.i};

    private String[] stringArray = new String[] { "Image a", "Image b","Image c"
                                                   "Image d","Image e","Image f", 
                                                   "Image g","Image h","Image i"};

} 
```

**图像页面适配器：**

```
public class ImagePagerAdapter extends PagerAdapter {

    Activity activity;
    int imageArray[];
    String[] stringArray;

    public ImagePagerAdapter(Activity act, int[] imgArra, String[] stringArra) {
        imageArray = imgArra;
        activity = act;
        stringArray = stringArra;
    }

    public int getCount() {
        return imageArray.length;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater)collection.getContext
                          ().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.custom_pager, null);   

        ImageView im=(ImageView) layout.findViewById(R.id.myimage);             
        im.setImageResource(imageArray[position]);

        TextView txt=(TextView) layout.findViewById(R.id.image_text);
        txt.setText(stringArray[position]);

        ((ViewPager) collection).addView(layout, 0);
          return layout;   
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState() {
        return null; 
    }

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-09T12:57:45.703

我有[同样的问题](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping)，但我能够找到解决它的方法 - 代码可以在[github](https://github.com/antonyt/InfiniteViewPager)上找到。

如果您将类[InfiniteViewPager](https://github.com/antonyt/InfiniteViewPager/blob/master/library/src/main/java/com/antonyt/infiniteviewpager/InfiniteViewPager.java)和[InfinitePagerAdapter](https://github.com/antonyt/InfiniteViewPager/blob/master/library/src/main/java/com/antonyt/infiniteviewpager/InfinitePagerAdapter.java)复制到您的项目中，您可以通过一些小的更改来实现无限（包装）滚动。

在您的活动中，将 PagerAdapter 包装为`InfinitePagerAdapter`：

```
PagerAdapter adapter = new InfinitePagerAdapter(new ImagePagerAdapter(this, imageArra, stringArray)); 
```

将活动 XML 中的 ViewPager 更改为`InfiniteViewPager`：

```
<com.antonyt.infiniteviewpager.InfiniteViewPager 
       android:id="@+id/myimagepager" 
       android:layout_width="match_parent" 
       android:layout_height="match_parent" /> 
```

您可以将类重命名为您想要的任何名称。此代码仅在您至少有三页时才有效（示例代码中有九页，因此它可以正常工作）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-02T17:54:03.980

我认为我的解决方案更简单。

注意我的图像结构数组：

```
Item 0          => last image

Item count()-1  => first image 
```

诀窍是`onPageScrollStateChanged`：

当用户滚动到最后一项时-> 寻呼机在没有动画的情况下跳转到第一个图像（位置 = 1）

当用户滚动到第一个项目时 -> 寻呼机在没有动画的情况下跳转到最后一个图像（位置 = 计数 - 2）

```
public class InfiniteScrollingActivity extends ActionBarActivity {

    private ViewPager     pager;
    private MyAdapter     adapter;
    int[] promoImageIds = new int[]{R.drawable.cover6, R.drawable.cover1, R.drawable.cover2, R.drawable.cover3, R.drawable.cover4, R.drawable.cover5, R.drawable.cover6, R.drawable.cover1 };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_test);

        adapter = new MyAdapter(getSupportFragmentManager(), promoImageIds);
        pager = (ViewPager)findViewById(R.id.pager);
        pager.setAdapter(adapter);
        pager.setCurrentItem( 1 );
        pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageSelected(int index) {
                Log.v( "onPageSelected", String.valueOf( index ) );
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                // Log.v("onPageScrolled", "");
            }

            @Override
            public void onPageScrollStateChanged(int state) {
                Log.v("onPageScrollStateChanged", String.valueOf(state));

                if (state ==ViewPager.SCROLL_STATE_IDLE) {
                    int index = pager.getCurrentItem();
                    if ( index == 0 )
                        pager.setCurrentItem( adapter.getCount() - 2, false );
                    else if ( index == adapter.getCount() - 1 )
                        pager.setCurrentItem( 1 , false);
                }
            }
        });
    }

    public static class MyAdapter extends FragmentPagerAdapter {

        int[] promoImageIds;

        public MyAdapter(FragmentManager fm, int[] promoImageIds){
            super(fm);
            this.promoImageIds = promoImageIds;
        }

        @Override
        public int getCount(){
            return promoImageIds.length;
        }

        @Override
        public Fragment getItem(int position) {

            return PromoFragment.newInstance( promoImageIds[position] );
        }
    }

    public static class PromoFragment extends Fragment
    {
        int imageID;

        static PromoFragment newInstance( int imageID)
        {
            PromoFragment f = new PromoFragment();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt( "imageID", imageID );
            f.setArguments(args);

            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            imageID = getArguments() != null ? getArguments().getInt( "imageID" ) : null;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState)
        {
            ImageView v = (ImageView) inflater.inflate(R.layout.fragment_image, container, false);
            v.setImageResource( imageID );
            return v;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-08T16:06:02.417

我已经找到了一个简单的技巧，希望对你有帮助

```
import java.util.ArrayList;
import android.os.Bundle;
import android.app.Activity;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.util.Log;

public class ImagePager extends Activity {
    String[] stringArray;
    int[] imageArra;
    ViewPager myPager;
    Boolean isScrooled = false;
    // use this array yo understand swipe left or right ?
    ArrayList<Float> pos = new ArrayList<Float>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            // put  empty view at the beginnig and to end

        imageArra = new int[] { 0, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher, 0 };

           // put  empty string at the beginnig and to end

        stringArray = new String[] { "", "Image a", "Image b", "Image c",
                "Image d", "Image e", "Image f", "Image g", "Image h",
                "Image i", "" };

        ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra,
                stringArray);
        myPager = (ViewPager) findViewById(R.id.myimagepager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);

        myPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {
                Log.v("onPageSelected", String.valueOf(arg0));
                pos.clear();
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                try {
                            // while scrolling i add ever pos to array
                    pos.add(arg1);
                                    // if pos.get(0) > pos.get(pos.size() - 1) 
                    // <----- swipe <-----  
                                    // we should check isScroll because setCurrent item is not a croll ? 

                    if (pos.size() > 0)
                        if (arg0 == imageArra.length - 1
                                & pos.get(0) > pos.get(pos.size() - 1)
                                & isScrooled == true) {
                            try {
                                isScrooled = false;
                                myPager.setCurrentItem(1, false);
                            } catch (Exception e) {
                                Log.v("hata",
                                        "<----- swipe <-----  " + e.toString());
                            }

                        }
                        // ----> swipe ---->
                        else if (arg0 == 0
                                & pos.get(0) < pos.get(pos.size() - 1)
                                & isScrooled == true) {
                            try {
                                isScrooled = false;
                                myPager.setCurrentItem(imageArra.length - 1,
                                        false);
                            } catch (Exception e) {
                                Log.v("hata",
                                        "----> swipe ---->  " + e.toString());
                            }

                        } else if (arg0 == 0 & pos.size() == 1
                                & isScrooled == true) {
                            try {
                                isScrooled = false;
                                myPager.setCurrentItem(imageArra.length - 1,
                                        false);
                            } catch (Exception e) {
                                Log.v("hata",
                                        "----> swipe ---->  " + e.toString());
                            }

                        }

                } catch (Exception e) {
                    Log.v("hata", e.toString());
                }

            }

            @Override
            public void onPageScrollStateChanged(int arg0) {
                Log.v("onPageScrollStateChanged", String.valueOf(arg0));
                            // set is scrolling
                isScrooled = true;
            }
        });

    }

} 
```

[编辑 1]

```
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.util.Log;

public class ImagePager extends Activity {
    String[] stringArray;
    int[] imageArra;
    ViewPager myPager;
    int scrollState;
    Boolean isFirstVisitEnd= true,isFirstVisitBegin = true;
    ArrayList<Integer> pos = new ArrayList<Integer>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        imageArra = new int[] { 0,R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher,
                R.drawable.ic_launcher, R.drawable.ic_launcher, 0 };

        stringArray = new String[] {"","Image a", "Image b", "Image c",
                "Image d", "Image e", "Image f", "Image g", "Image h",
                "Image i", "" };

        ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra,
                stringArray);
        myPager = (ViewPager) findViewById(R.id.myimagepager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);

        myPager.setOnPageChangeListener(new OnPageChangeListener() {
            @Override
            public void onPageSelected(int arg0) {
                Log.v("onPageSelected", String.valueOf(arg0));
                pos.clear();
                if (arg0 == imageArra.length - 1)
                    isFirstVisitEnd = false;
                else
                    isFirstVisitEnd = true;

                if (arg0 == 0)
                    isFirstVisitBegin = false;
                else
                    isFirstVisitBegin = true;
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {                                
                try { 
                    pos.add(Integer.valueOf(arg2));

                    if (pos.size() > 0) {
                        //Log.v("onPageScrolled_arg2","arg0  : "+String.valueOf(arg0)+"   ilk : "+pos.get(0).toString()+"    son : " +pos.get(pos.size() - 1).toString()+ "   "+ String.valueOf(pos.get(0)-(pos.get(pos.size() - 1)))+"    isFirstVisitEnd: "+String.valueOf(isFirstVisitEnd.booleanValue()) );

                        // <----- swipe <-----
                        if (arg0 == imageArra.length - 2& (pos.get(pos.size() - 1) -pos.get(0)  < 100)& scrollState == 2 & isFirstVisitEnd == false) {                          
                            myPager.setCurrentItem(1, false);
                        }

                        //Log.v("onPageScrolled_arg2","arg0  : "+String.valueOf(arg0)+"   ilk : "+pos.get(0).toString()+"    son : " +pos.get(pos.size() - 1).toString()+ "   "+ String.valueOf(pos.get(0)-(pos.get(pos.size() - 1)))+"    isFirstVisitbegin: "+String.valueOf(isFirstVisitBegin.booleanValue()) );
                        if (arg0 == 0 & (pos.get(pos.size() - 1) -pos.get(0)  > -100)& scrollState == 2 & isFirstVisitBegin == false) {                         
                            myPager.setCurrentItem(imageArra.length - 2, false);
                        }       
                    }

                } catch (Exception e) {
                    Log.v("hata", e.toString());
                }

            }

            @Override
            public void onPageScrollStateChanged(int arg0) {
                Log.v("onPageScrollStateChanged", String.valueOf(arg0));
                scrollState =arg0;
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-16T14:09:40.967

我找到了另一个解决方案，基于[Shlomi Hasin](https://stackoverflow.com/a/25629429/5541688)和[antonyt 的](https://stackoverflow.com/a/13787543/5541688)答案，没有修改集合。

```
ViewPager yourPager;
PagerAdapter yourAdapter;
//....
EndlessPagerAdapter endlessPagerAdapter = new EndlessPagerAdapter(yourAdapter, yourPager);
yourPager.setAdapter(endlessPagerAdapter);
yourPager.setCurrentItem(1);//for correct first page 
```

全班：

```
public class EndlessPagerAdapter extends PagerAdapter {

private PagerAdapter adapter;

public EndlessPagerAdapter(PagerAdapter adapter, ViewPager viewPager) {
    this.adapter = adapter;
    viewPager.addOnPageChangeListener(new SwapPageListener(viewPager));
}

@Override
public int getCount() {
    return adapter.getCount() + 2;
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    if (adapter.getCount() < 2) {
        adapter.instantiateItem(container, position);
    }

    int newPosition;
    if (position == 0) {
        newPosition = adapter.getCount() - 1;
    } else if (position >= getCount() - 1) {
        newPosition = 0;
    } else {
        newPosition = position - 1;
    }
    return adapter.instantiateItem(container, newPosition);
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    adapter.destroyItem(container, position, object);
}

@Override
public void finishUpdate(ViewGroup container) {
    adapter.finishUpdate(container);
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return adapter.isViewFromObject(view, object);
}

@Override
public void restoreState(Parcelable bundle, ClassLoader classLoader) {
    adapter.restoreState(bundle, classLoader);
}

@Override
public Parcelable saveState() {
    return adapter.saveState();
}

@Override
public void startUpdate(ViewGroup container) {
    adapter.startUpdate(container);
}

@Override
public CharSequence getPageTitle(int position) {
    return adapter.getPageTitle(position);
}

@Override
public float getPageWidth(int position) {
    return adapter.getPageWidth(position);
}

@Override
public void setPrimaryItem(ViewGroup container, int position, Object object) {
    adapter.setPrimaryItem(container, position, object);
}

@Override
public void unregisterDataSetObserver(DataSetObserver observer) {
    adapter.unregisterDataSetObserver(observer);
}

@Override
public void registerDataSetObserver(DataSetObserver observer) {
    adapter.registerDataSetObserver(observer);
}

@Override
public void notifyDataSetChanged() {
    adapter.notifyDataSetChanged();
}

@Override
public int getItemPosition(Object object) {
    return adapter.getItemPosition(object);
}

private class SwapPageListener implements ViewPager.OnPageChangeListener {

    private ViewPager viewPager;

    SwapPageListener(ViewPager viewPager) {
        this.viewPager = viewPager;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {

    }

    @Override
    public void onPageScrollStateChanged(int state) {
        if (state == ViewPager.SCROLL_STATE_IDLE) {
            PagerAdapter pagerAdapter = viewPager.getAdapter();
            if (pagerAdapter != null) {
                int itemCount = pagerAdapter.getCount();
                if (itemCount < 2) {
                    return;
                }
                int index = viewPager.getCurrentItem();
                if (index == 0 ) {
                    viewPager.setCurrentItem(itemCount - 2, false);
                } else if (index == itemCount - 1) {
                    viewPager.setCurrentItem(1, false);
                }
            }
        }
    }
}} 
```

**这个怎么运作：**

我们有一些收藏

[![收藏](../Images/29ebb7ac01b677735f0f71a39e45ed02.png)](https://i.stack.imgur.com/Xq7en.jpg)

然后向其中添加两个附加项目

[![新尺寸](../Images/9073d40ecee1dc8ecefde4e2a91d7420.png)](https://i.stack.imgur.com/hHnXR.jpg)

在最后一个位置显示第一个元素，在第一个位置显示最后一个元素

[![显示元素](../Images/665ba01a0e0156c8b6d83de5659fdc83.png)](https://i.stack.imgur.com/dk26D.jpg)

在事件上添加侦听器和交换页面，从 4 到 1 和从 0 到 3

[![交换元素](../Images/8d9487b5039aa1ce8f10401df3bcd6b8.png)](https://i.stack.imgur.com/9Z5my.jpg)

就这样。

我不建议你在那里应用动画或重布局，当元素交换时它可能会滞后。（也许，我没有遇到任何滞后）

也不要多次将此适配器设置为寻呼机，或将 SwapPageListener 移动到外部类并在初始化块中设置它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-01T15:35:36.753

对于天数的无限滚动，重要的是您在寻呼机中有良好的片段，因此我在页面上写了我的答案（[Android 中的 Viewpager 可以在天数之间无休止地切换](https://stackoverflow.com/questions/20584129/viewpager-in-android-to-switch-between-days-endlessly)）

它工作得很好！以上答案对我不起作用，因为我希望它起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-20T12:35:16.150

```
if ((pagerBottom.getCurrentItem() + 1) == (sliderimageDetails.size())) {
    pagerBottom.setCurrentItem(0);
} else {
    pagerBottom.setCurrentItem((pagerBottom.getCurrentItem() + 1));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T02:32:39.617

[RecyclerViewPager](https://github.com/lsjwzh/RecyclerViewPager/)有实现`infinite scrolling`并且可以像画廊一样滚动。

# .htaccess - .htaccess - 在文件中的某个点后重定向不起作用

> ID：13668589
> 
> 赞同：0
> 
> 时间：2012-12-02T10:54:19.660
> 
> 标签：.htaccess, redirect, http-status-code-301

如果有人能帮我解决这个问题，我将不胜感激......我已经在我的个人商业网站上使用 .htaccess 301 重定向文件有一段时间了，但是在文件中的某个点之后，重定向根本不起作用（在 Rex Swain 的 http 标头工具中返回 200）。

我用细齿梳浏览了文件，重定向停止工作的地方根本没有问题（例如，urs 完全符合它们应该的样子）。真的不知道为什么他们会在某个点之后停止重定向？

有没有人有任何想法/建议？对于愿意提供帮助的任何人，我都可以将文件发送过去。

期待您的来信，莫特利

这是代码，最后一行是不起作用的重定向。在此之前的所有工作都很好。在最后一个之后还有其他重定向（我只是没有显示它们），它们也不会重定向。文件末尾还有一个空行。

**.htaccess**

```
RewriteEngine On
RewriteBase /
RewriteCond %{http_host} ^domain.com [NC]
RewriteRule ^(.*)$ http://www.domain/$1 [L,R=301]

Options +FollowSymLinks
RewriteEngine on
# index.html to /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.html\ HTTP/
RewriteRule ^(.*)index\.html$ /$1 [R=301,L] 
```

**重定向示例**

```
Redirect 301 /spas/alexander-house/overnight-packages http://www.domain/spas/alexander-house/spa-breaks

Redirect 301 /spas/alexander-house/day-packages http://www.domain/spas/alexander-house/spa-days

Redirect 301 /spas/alexander-house/weekend-packages http://www.domain/spas/alexander-house/spa-weekends

Redirect 301 /spas/armathwaite-hall/overnight-packages http://www.domain/spas/armathwaite-hall/spa-breaks

Redirect 301 /spas/armathwaite-hall/day-packages.html http://www.domain/spas/armathwaite-hall/spa-days

Redirect 301 /spas/armathwaite-hall/weekend-packages http://www.domain/spas/armathwaite-hall/spa-weekends

Redirect 301 /spas/billesley-manor/overnight-packages http://www.domain/spas/billesley-manor/spa-breaks

Redirect 301 /spas/billesley-manor/day-packages http://www.domain/spas/billesley-manor/spa-days

Redirect 301 /spas/billesley-manor/weekend-packages http://www.domain/spas/billesley-manor/spa-weekends

Redirect 301 /spas/bishopstrow-house/overnight-packages http://www.domain/spas/bishopstrow-house/spa-breaks

Redirect 301 /spas/bishopstrow-house/day-packages http://www.domain/spas/bishopstrow-house/spa-days

Redirect 301 /spas/bishopstrow-house/weekend-packages http://www.domain/spas/bishopstrow-house/spa-weekends

Redirect 301 /spas/bovey-castle/overnight-packages http://www.domain/spas/bovey-castle/spa-breaks

Redirect 301 /spas/bovey-castle/day-packages http://www.domain/spas/bovey-castle/spa-days

Redirect 301 /spas/bovey-castle/weekend-packages http://www.domain/spas/bovey-castle/spa-weekends

Redirect 301 /spas/castlemartyr/overnight-packages http://www.domain/spas/castlemartyr/spa-breaks

Redirect 301 /spas/castlemartyr/day-packages http://www.domain/spas/castlemartyr/spa-days

Redirect 301 /spas/castlemartyr/weekend-packages http://www.domain/spas/castlemartyr/spa-weekends

Redirect 301 /spas/celtic-manor/overnight-packages http://www.domain/spas/celtic-manor/spa-breaks

Redirect 301 /spas/celtic-manor/day-packages http://www.domain/spas/celtic-manor/spa-days

Redirect 301 /spas/celtic-manor/weekend-packages http://www.domain/spas/celtic-manor/spa-weekends

Redirect 301 /spas/chewton-glen/overnight-packages http://www.domain/spas/chewton-glen/spa-breaks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:06:29.587

您是否尝试将重定向移动到 .htaccess 文件中的不同行？如果重定向 301 /spas/chewton-glen/overnight-packages [http://www.domain/spas/chewton-glen/spa-breaks](http://www.domain/spas/chewton-glen/spa-breaks)的新行位置之后的重定向现在不起作用，那么您知道这是重定向仅是导致问题的原因。您是否尝试删除此重定向并查看前面的重定向现在是否有效？我敢打赌它与chewton-glen 目录有关吗？

# javascript - 设置 cookie 后获取 cookie

> ID：13668595
> 
> 赞同：0
> 
> 时间：2012-12-02T10:54:38.727
> 
> 标签：javascript, cookies, web

我在服务器的 cgi 脚本上使用 set-cookie 设置了我的 cookie，如下所示

```
print "Content-type: text/html\n";
sys.stdout.write(cookie.output())
print "\n\n"; 
```

但是当我重新加载页面时，我无法获取 cookie，因为它没有出现在

```
document.cookie 
```

我如何获得饼干？刷新页面后，Set-cookie : name=value 是否应该出现在 document.cookie 上？

总的来说，我希望客户端能够识别 cookie（如果存在）并采取相应措施

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:22:09.093

[W3Schools](http://www.w3schools.com/js/js_cookies.asp)很好地解释了它。你可以看看网站提供的getCookie和setCookie函数。您可以将其用作基础。它的纯javascript

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T10:58:30.157

Cookie 由服务器设置。客户端（浏览器）只是将它们发回。您不能使用 Javascript 来设置 cookie。

**编辑**

您需要更少的引号，并且`\r`不需要。可能需要`;`而不是`,`. IE

```
print "Content-type: text/html\n";
print "Set-Cookie: name=value\n\n"; 
```

还可以使用 Firefox 的 HTTP 实时标头插件来检查 HTTP 通信。

# java - 时间戳显示错误数据

> ID：13668603
> 
> 赞同：5
> 
> 时间：2012-12-02T10:55:16.400
> 
> 标签：java, android, date, timestamp

为什么**Timestamp((long)-62135596800000L) 返回 0001-01-03 00:00:00**，但必须返回**0001-01-01 00:00:00**？[此服务在此处](http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/)显示正确的时间戳

![在此处输入图像描述](../Images/f9717ca92aa07c0ca09067f6151e6299.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T12:22:14.723

`-62135596800000`是 0001-01-03 00:00:00.0 因为[默认情况下 java 使用儒略历来表示 1582 年 10 月 15 日之前的日期](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/GregorianCalendar.html)。

您正在使用的网站使用 javascript，它对所有日期使用外推或预测的公历。来自[javascript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.3)

> ECMAScript 使用外推公历系统将日期编号映射到年份编号，并确定该年份的月份和日期。

事实上，在 javascript 中：

```
new Date(-62135596800000).toUTCString()
//"Mon, 01 Jan 1 00:00:00 GMT" 
```

您可以在 java 中使用类似的东西来获得相同的结果：

```
GregorianCalendar date = new GregorianCalendar();
date.clear();
//Use Gregorian calendar for all values
date.setGregorianChange(new Date(Long.MIN_VALUE));

date.setTimeZone( TimeZone.getTimeZone("UTC"));
date.setTime(new Date(-62135596800000L));

System.out.println(
        date.get(GregorianCalendar.YEAR) + "-" +
        (date.get(GregorianCalendar.MONTH) + 1) + "-" + 
        date.get(GregorianCalendar.DAY_OF_YEAR) + " " +
        date.get(GregorianCalendar.HOUR_OF_DAY) + ":" +
        date.get(GregorianCalendar.MINUTE) + ":" + 
        date.get(GregorianCalendar.SECOND) + "." +
        date.get(GregorianCalendar.MILLISECOND)
);
//Prints 1-1-1 0:0:0.0 
```

不幸的是，我不知道如何执行从`Calendar`到`Date`对象的公历更改，所以我直接从日历对象进行格式化。如果我只是这样做 `formatter.format(date.getTime())`，它将失去公历更改设置并再次显示第 3 天。

朱利安日期提前 2 天，因为据此[，](http://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar#Difference_between_Julian_and_proleptic_Gregorian_calendar_dates)从公元前 1 年到公元 100 年，朱利安比预产期公历提前 2 天。

* * *

顺便说一句，我建议使用[`JodaTime`](http://joda-time.sourceforge.net/key_instant.html)，它正确（我的意见，[虽然如果你需要一些更有说服力](http://joda-time.sourceforge.net/cal_iso.html)的东西）默认为纯公历：

```
DateTime dt = new DateTime(-62135596800000L, DateTimeZone.UTC);
System.out.println(dt.toString());
//0001-01-01T00:00:00.000Z 
```

# windows-phone-7 - 当 OnInvoke 方法被触发时，我们可以从 ScheduledAgent.cs 中调用 MainPage.xaml.cs 文件的代码吗？

> ID：13668609
> 
> 赞同：0
> 
> 时间：2012-12-02T10:56:24.367
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone-7.1.1

我正在使用 PeriodicTask，当然它每 30 分钟运行一次。当 OnInvoke 方法被触发时，我们可以从 ScheduledAgent.cs 调用 MainPage.xaml.cs 文件的代码吗？我想重新使用 MainPage.xaml.cs 方法之一编写的代码。

如果这不可能，我可以在每次触发 OnInvoke() 方法并获取数据并将它们显示为图块/吐司时连接到互联网吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:47:34.910

您不能在后台代理中使用 MainPage 中的代码，因为您的主项目必须引用后台代理的项目。因此，从后台代理向主项目添加额外的引用会产生循环依赖。

但是您仍然可以在主项目和后台代理之间共享代码。只需创建第三个项目，类型为“类库”，并从主项目和后台代理项目中引用它。然后将共享代码放入该附加项目中。

# iphone - 子类化 NSMutableArray

> ID：13668616
> 
> 赞同：0
> 
> 时间：2012-12-02T10:58:27.953
> 
> 标签：iphone, nsmutablearray

我一直在看 iTunes 上的 CP193 课程，常见的信息是可重用性。

我正在创建一个具有 NSMutableArray 形式的列表的程序。我将一遍又一遍地访问这个类。

所以我创建了一个 NSMutableArray 类，其中包含一个在数组中设置 NSStrings 的函数

```
@interface Geology : NSMutableArray
- (void) setuparray; 
```

在我的实现文件中

```
[super addobjects:@"object1"]; 
```

我想用里面已经存在的对象初始化这个对象。我使用以下代码在 ViewController 中导入了头文件：

```
Geology *geology = [[Geology alloc] initWithCapacity:5];
[geology setuparray]; 
NSLog(@"%@", [geology objectAtIndex:1]; 
```

但是，该程序无法编译并出现以下错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[NSMutableArray initWithCapacity:]：仅为抽象类定义的方法。定义 - 地质 initWithCapacity:]！

因此，我需要在我的新文件中定义容量。但是，即使我在文件中添加 [Super initWithCapacity] 它仍然不起作用？

编辑：

地质学.h

```
@interface Geology : NSMutableArray
- (void) setupGeology; 
```

@结尾

地质学.m

```
@implementation Geology 
- (void) setupGeology{
    [super initWithCapacity:1];
    [super addObject:@"object1"];
}
@end 
```

在我的 ViewController 我有

```
#import "Geology.h"

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.   
    Geology *geology = [[Geology alloc] initWithCapacity:5];
    [geology setupGeology];
    NSLog(@"%@", [geology objectAtIndex:1]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:21:37.500

首先，您没有在 .h 和 .m 中声明和定义 initWithCapacity ，因为 NSMutableArray 是一个抽象类，因此您需要定义它，其次我不确定这是否是正确的方法... 每当您需要向现有类添加额外功能时，您始终可以 在 Objective-c 中使用**类别。**当您需要向类添加额外的属性以及一些功能时，通常会进行子类化。

我相信你应该研究分类，因为继承 NSMutableArray 是一件非常罕见的事情，我从来没有觉得有必要这样做。

您可以参考这个[答案](https://stackoverflow.com/questions/3862619/should-i-subclass-the-nsmutablearray-class)以获得更清晰的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:31:07.453

看起来您要做的就是为 NSMutableArray 创建一个自定义初始化程序，以便它更适合您在应用程序中使用它的方式。

您不必继承 NSMutableArray 来执行此操作。

如果您只想为现有类添加功能而不是添加额外的存储空间，您可以在 NSMutableArray 上创建一个类别，为您执行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:16:39.243

当它不合适时，你正在继承 NSArray 。子类化用于特化或扩展。您在这里没有专门或扩展 NSArray - 您只是在使用它。所以像往常一样使用 NSArray；无需子类。因此，您可能有一个包含 NSArray 作为属性的辅助数据对象。

另外，我希望 NSArray 的子类至少在类名中有“Array”。

另请注意，当向 Objective C 中的现有类添加功能时，有时会使用类类别而不是子类化。当您想向现有类添加新方法而不添加任何新状态（即 ivars/属性）时，类别特别有用。

# git - git，如果有人克隆特定标签，则显示文件列表

> ID：13668617
> 
> 赞同：1
> 
> 时间：2012-12-02T10:58:29.123
> 
> 标签：git, file

我有一个 git 仓库。一些提交已经完成——一些文件被添加，一些被删除。

我想获取文件列表，如果有人从我的存储库中克隆特定标签，这些文件将被克隆。

所以它不是特定提交的文件。如果它将与所有先前的提交融合在一起，则它是该提交的文件。

任何想法如何获取此类文件的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:06:54.757

```
git ls-tree -r --name-only tagName 
```

如果您在回购中设置了标签，它将起作用。
这假设您已经提交了索引（以及添加、删除和修改的文件）。

标签或提交将始终引用您存储库的*所有*文件，即完整的存储库内容。
它不会只引用已修改的内容。

# asp.net - 如果您有 txtbox1、txtbox2、txtbox3，如何通过循环获取输入文本值？

> ID：13668620
> 
> 赞同：1
> 
> 时间：2012-12-02T10:58:33.200
> 
> 标签：asp.net, for-loop

我制作了一个带有 id 的输入文本字段的表格

```
 <td> <INPUT id="txtName1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtDescription1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtColNum1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtColW1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtType1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtFormula1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtCost1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtCostFormula1" type="text" runat="server" /> </td>
        <td> <INPUT id="txtPullDown1" type="text" runat="server" /> </td>
        <td> <INPUT id="chkLock1" type="checkbox" runat="server" /> </td>
        <td> <INPUT id="chkHideQ1" type="checkbox" runat="server" /> </td>
        <td> <INPUT id="chkHideW1" type="checkbox" runat="server" /> </td> 
```

并有一个javascript动态添加行，增加id的数字，例如

txtName2、txtDescription2、txtColNum2 等等...

此外，我使用以下代码使用 vb.net 将数据保存到 SQL

```
Protected Sub btnSaveTemplate_Click(sender As Object, e As EventArgs) Handles btnSaveTemplate.Click

        SqlCMData.InsertParameters("categoryName").DefaultValue = txtCategory1.Value
        SqlCMData.InsertParameters("productName").DefaultValue = txtName1.Value
        SqlCMData.InsertParameters("productDescription").DefaultValue = txtDescription1.Value
        SqlCMData.InsertParameters("colNum").DefaultValue = txtColNum1.Value
        SqlCMData.InsertParameters("colW").DefaultValue = txtColW1.Value
        SqlCMData.InsertParameters("type").DefaultValue = txtType1.Value
        SqlCMData.InsertParameters("formula").DefaultValue = txtFormula1.Value
        SqlCMData.InsertParameters("cost").DefaultValue = txtCost1.Value
        SqlCMData.InsertParameters("costFormula").DefaultValue = txtCostFormula1.Value
        SqlCMData.InsertParameters("pullDown").DefaultValue = txtPullDown1.Value
        SqlCMData.InsertParameters("lock").DefaultValue = chkLock1.Checked
        SqlCMData.InsertParameters("hideQ").DefaultValue = chkHideQ1.Checked
        SqlCMData.InsertParameters("hideW").DefaultValue = chkHideW1.Checked
        SqlCMData.Insert()

End Sub 
```

我的问题是，我怎样才能让 for 循环获取所有值，包括具有 id 数字的其他行已递增，例如 txtCategory* *2* *？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:17:23.860

假设你得到的最高数字是 10，你可以有一个循环。这是准代码中的示例。

```
for (i = 1; i < 10; i++)
{
   INSERT txtCategory + i;
   INSERT txtName + i;
   INSERT txtDescription + i;
   .
   .
   .
   .
   .
   .
   INSERT chkHideW + i;
} 
```

显然 INSERT 只是将其插入 MySQL 表的缩写。这应该允许您插入所有元素 i 次，i 是您达到的最高编号的后缀。我不能保证这会奏效，但我希望它有所帮助，至少在它背后的逻辑上。

# javascript - 如何覆盖特定 Joomla 模块的样式？

> ID：13668621
> 
> 赞同：0
> 
> 时间：2012-12-02T10:58:43.180
> 
> 标签：javascript, html, css, joomla-module

我有这么多模块，我正在显示每个模块的边框。

以下是我所拥有的

```
div.ja-moduletable-inner,
div.moduletable-inner {
  background: none;
  padding: 1.5em;
  box-shadow: 0px 0px 3px 3px rgba(0,0,0,.25);
}
<div id="Mod143">
    <div class="moduletable-inner clearfix"> ... </div>
</div>
<div id="Mod148">
    <div class="moduletable-inner clearfix"> ... </div>
</div>
<div id="Mod149">
    <div class="moduletable-inner clearfix"> ... </div>
</div> 
```

**注意：这些模块是 Joomla 默认添加的，所以我无法处理。**我想要的是使用 Javascript，我想在其中添加类，`Mod149`以便将其作为

```
<div id="Mod149">
    <div class="moduletable-inner clearfix newMyOwnClass">`
                                           ^^^^^^^^^^^^^^
</div> 
```

我将在css中作为

```
div.newMyOwnClass {
  box-shadow: 0px 0px 0px 0px rgba(0,0,0,.25);
                      ^^^^^^^
} 
```

知道如何将此类添加到`<div id="Mod149">`Javascript 中的元素中（没有 jQuery！）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:01:50.173

解决问题的 2 种方法：

## 1.纯CSS

只需增加选择器的[特异性](http://css-tricks.com/specifics-on-css-specificity/)：

```
#Mod149 > div.moduletable-inner {
   box-shadow: 0px 0px 0px 0px rgba(0,0,0,.25);
} 
```

## 2\. 使用 JavaScript

要添加类，请使用`classList.add`方法或更新`className`属性：

```
var elem = document.querySelector('#Mod149 > .moduletable-inner');
if (elem) {
    elem.className += ' newMyOwnClass';
} 
```

要插入 CSS，要么注入`<style>`标签，要么使用 styleSheet 的[`insertRule`](https://developer.mozilla.org/en-US/docs/DOM/CSSStyleSheet/insertRule)方法。当样式表来自不同的来源时，最后一种方法不起作用，所以我推荐第一种方法：

```
var head = document.getElementsByTagName('head')[0];
var style = document.createElement('style');
var css = ['div.newMyOwnClass {',
           '    box-shadow: 0px 0px 0px 0px rgba(0,0,0,.25);',
           '}'].join('\n');
head.appendChild(style);

if (style.styleSheet) {
    /* This is for IE-users.*/
    style.styleSheet.cssText = css;
} else {
    style.appendChild(document.createTextNode(css));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:04:44.073

如果您要添加类的元素始终是 Mod149 中的第一个元素，您可以执行以下操作

```
document.getElementById("Mod149").childnodes[0].className += " newMyOwnClass"; 
```

# android - 用android中的内置闹钟铃声覆盖短信铃声

> ID：13668622
> 
> 赞同：0
> 
> 时间：2012-12-02T10:58:55.137
> 
> 标签：android, alarm

先生，请在我的程序中帮助我。如果用户收到带有关键字的消息，我计划敲响警报。我如何强制应用程序使用闹钟（闹钟中始终使用的类型），即使它不是由用户设置并使用它代替接收消息时使用的音调。因为当我尝试运行程序时，我会在收到短信时听到通知音以及默认铃声。提前致谢

```
for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("alert")) {

            Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
             if(alert == null){
                 // alert is null, using backup
                 alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                 if(alert == null){ 
                     // alert backup is null, using 2nd backup
                     alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
                 }
             }
             Ringtone r = RingtoneManager.getRingtone(context.getApplicationContext(), alert);
             r.play();
                Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();

        }//end if
    }//end for 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:53:15.387

您唯一能做的就是将清单中意图过滤器的优先级保持在最大值，这类似于

```
<receiver android:name="com.missed.reciever.SmsReceiver" >
            <intent-filter android:priority="2147483647" > 
```

这将做的是您将在默认和android消息应用程序之前首先收到消息，然后您可以阅读该短信并将其标记为已读。

这基本上就是像 gosms 这样的应用程序所做的。

# tmux - tmux 中的拆分窗格切换：每个命令切换一次

> ID：13668633
> 
> 赞同：78
> 
> 时间：2012-12-02T11:01:04.307
> 
> 标签：tmux

一段时间以来，我一直是一个快乐的 tmux 用户，但有一种行为困扰着我。当我使用 ^b 箭头切换窗格，然后立即按向上箭头（例如，从历史记录中获取命令）时，窗口窗格再次切换。我知道如果您想快速通过多个窗格，这可能很有用，但对我来说，这是一种痛苦，因为我一直在我从未想过要进入的窗格中结束。

那么，有没有办法设置 tmux 以便 ^b-arrow 命令只切换*一次*窗格并忽略任何后续箭头键按下？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-02T15:50:46.273

发生这种情况是因为箭头键的默认绑定是用 设置的`bind-key -r`，指定它们可以重复。有两种方法可以禁用此功能。

首先，您可以使用`set-option repeat-time 0`完全禁用重复。这将影响所有绑定。我发现在调整窗格大小时这很烦人。

其次，您可以更改箭头键的绑定以在`bind-key`不使用该`-r`选项的情况下使用：

```
bind-key Up    select-pane -U
bind-key Down  select-pane -D
bind-key Left  select-pane -L
bind-key Right select-pane -R 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-04T10:28:28.587

如果您花很多时间在窗格中导航，为什么不设置全局映射，这样您根本不必使用前缀，例如`bind -n C-h select-pane -L`将 ctrl-h 映射到左切换，就像 Vim 一样。

请参阅[http://robots.thoughtbot.com/seamless-navigate-vim-and-tmux-splits](http://robots.thoughtbot.com/seamlessly-navigate-vim-and-tmux-splits)以获得更好的解决方案，该解决方案也可以跨 Vim 窗口导航。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T01:38:53.520

如果您在相同的两个窗格之间来回滑动，另一个选项是进行绑定以跳转到上一个窗格。

```
bind-key C-a last-pane 
```

# iphone - 使用 UINavigationController 忘记以前的视图控制器

> ID：13668635
> 
> 赞同：1
> 
> 时间：2012-12-02T11:01:35.760
> 
> 标签：iphone, cocoa-touch, uinavigationcontroller, uinavigationitem

我有一个`UINavigationController`在我的 App Delegate 中创建的。

推送视图控制器后，我希望`navigationItem`该视图的“忘记”前一个视图控制器（停止显示其后退按钮），同时仍保留新推送的视图控制器的标题。

我怎么能做到这一点？我尝试`leftBarButtonItem`使用设置新视图控制器的 navigationItem

```
 self.navigationItem.leftBarButtonItem = nil; 
```

中`viewDidLoad`，但无济于事。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:44:19.670

在您的 New（堆栈中的第二个）视图控制器中，使用 navigationItem 的方法隐藏后退按钮`setHidesBackButton:`。

请在您的新视图控制器中尝试以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // this hides navigation back button 
    [self.navigationItem setHidesBackButton:YES];
}
```

这将隐藏后退按钮，用户无法返回。

# java - 如何解析来自网站的自定义 XML 样式错误代码响应

> ID：13668638
> 
> 赞同：3
> 
> 时间：2012-12-02T11:01:57.910
> 
> 标签：java, xml, rest, xml-parsing

我正在开发一个程序，该程序查询并打印出来自当地交通当局的开放数据，这些数据以 XML 响应的形式返回。

通常，当有巴士计划在接下来的几个小时内运行（以及其他典型情况）时，页面生成的 XML 响应会被`java.net.URLConnection.getInputStream()`函数正确处理，之后我可以打印单独的结果。

问题是当公共汽车没有运行时，或者当我的查询被发送到交通当局的网络服务器后出现其他问题时。当当局开发他们的服务时，他们想出了自己独特的错误响应代码，这些代码也以 XML 形式发送。例如，这些错误消息之一可能如下所示：

```
<Error xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<Code>3005</Code>
<Message>Sorry, no stop estimates found for given values.</Message>
</Error> 
```

（此代码和类似代码是我在这种情况下从运输当局收到的所有代码。）

但是，它的`URLConnection.getInputStream()`一些兄弟姐妹似乎无法将此自定义代码解释为“有效”响应，我可以处理并打印为错误消息。相反，他们给了我一个更一般的`HTTP/1.1 404 Not Found`错误。这个问题级联到我的程序中，然后打印出`java.io.FileNotFoundException`指向有问题的输入流的错误。

因此，我的问题有两个：

**1\. 有没有办法使用 Java 中可用的插件来检索、解析和打印由 Web 服务发送的自定义 XML 格式的错误代码？**

**2\. 如果上述方法不可行，我应该使用或开发哪些其他工具来处理所描述的此类自定义代码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:06:40.357

`URLConnection` isn't up to the job of REST, in my opinion, and if you're using `getInputStream`, I'm almost certain you're not handling character encoding correctly.

Check out Spring's [RestTemplate](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html#rest-resttemplate) - it's really easy to use (just as easy as `URLConnection`), powerful and flexible. You will need to change the `ResponseErrorHandler`, because the default one will throw an exception on 404, but it looks like you want it to carry on and parse the XML in the response.

# c++ - 逻辑或表达式 C++

> ID：13668643
> 
> 赞同：0
> 
> 时间：2012-12-02T11:02:38.680
> 
> 标签：c++, operators, expression

我在 C++ 中使用逻辑 OR 运算符时遇到问题。问题来了，如果左侧为真，则不计算右侧表达式。我有两个双端队列，我需要在一段时间内从它们中弹出左端，但是如果我可以从第一个双端队列弹出，我不会从第二个双端队列弹出，因为 OR 运算符没有对其进行评估。我该如何克服这个问题。这是一段代码：

```
while( D.popLeft( k ) || E.popLeft( m ) )
{
    if( k < m )
    {
      C.pushRight( k );
      E.pushLeft( m );
    }
    else
    {
      C.pushRight( m );
      D.pushLeft( k );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:06:07.453

我想您只想在可以同时填充 m 和 k 时运行循环的内容，对吗？然后只需用 AND 替换您的 OR：

```
while( D.popLeft( k ) && E.popLeft( m ) )
{
    if( k < m )
    {
      C.pushRight( k );
      E.pushLeft( m );
    }
    else
    {
      C.pushRight( m );
      D.pushLeft( k );
    }
} 
```

然后两个 pop 都会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:08:49.453

假设您想保留您的`||`（而不是使用 a `&&`），您可以单独评估：

```
bool canPopE = E.popLeft( m );
bool canPopD = D.popLeft( k );
bool canPop = canPopD || canPopE;

while( canPop )
{
    if( k < m )
    {
      C.pushRight( k );
      E.pushLeft( m );
    }
    else
    {
      C.pushRight( m );
      D.pushLeft( k );
    }

    canPopE = E.popLeft( m );
    canPopD = D.popLeft( k );
    canPop = canPopD || canPopE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:04:47.770

使用`&&`运算符

```
while( D.popLeft( k ) && E.popLeft( m ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T11:14:46.610

默认情况下，C++ 逻辑运算符使用短路机制，如果您想在没有短路的情况下执行循环，请使用急切运算符“|” 反而。这将以任何方式评估这两个表达式。 [http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

```
while( D.popLeft( k ) | E.popLeft( m ) ) 
```

# c# - 无法将类型 System.Collections.Generic.IEnumerable 隐式转换为 System.Collections.Generic.List

> ID：13668648
> 
> 赞同：3
> 
> 时间：2012-12-02T11:03:36.823
> 
> 标签：c#, generics, ienumerable

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T11:06:57.083

您的查询返回一个`IEnumerable`，而您的方法必须返回一个`List<B>`。
您可以通过`ToList()`扩展方法将查询结果转换为列表。

```
public class A
{
   public List<B> Load(Collection coll)
   {
       List<B> list = (from x in coll select new B {Prop1 = x.title, Prop2 = x.dept}).ToList();
       return list;
   }
} 
```

列表的类型应该由编译器自动推断。如果不是，您将需要调用`ToList<B>()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T11:08:15.487

您需要将枚举转换为列表，有一个扩展方法可以为您做到这一点，例如试试这个：

```
 var result = from x in coll select new B {Prop1 = x.title, Prop2 = x.dept};
    return result.ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T11:30:20.490

您不能将更通用类型的对象转换为更具体的对象。

让我们想象一下，我们有一个 B 的列表和 B 的 IEnumerable：

```
List<B> BList = ...
IEnumerable<B> BQuery = ... 
```

你可以这样做：

```
IEnumerable<B> collection = BList; 
```

但你不能这样做：

```
List<B> collection = BQuery; 
```

因为集合是一个比 IEnumerable 更具体的对象。

因此，您应该在您的情况下使用扩展方法 ToList() ：

```
(from x in coll
select new B 
  {
    Prop1 = x.title, 
    Prop2 = x.dept
  }
).ToList() 
```

# javascript - 如何使用 HighCharts 绘制聚合小时事件率？

> ID：13668649
> 
> 赞同：2
> 
> 时间：2012-12-02T11:03:56.460
> 
> 标签：javascript, highcharts

我将收到的每个应用程序错误都保存到我们的数据库中，并将其公开为一个端点，该端点会给出一系列错误：

```
[[1354445413000,1],[1354445502000,1],[1354445522000,1]] 
```

格式为`(Timestamp, 1)`，（第二个值始终为 1），该系列包含我在系统中遇到的每个错误的值。

什么是让 HighCharts 显示带有向下钻取的周期性聚合图表的最简单方法 - 每天显示 N 个错误事件，并且可以向下钻取到每小时或缩小到每周分辨率？（请注意，缩放会更改正在显示的实际数据，而不仅仅是分辨率）。

向下钻取和缩小不是必需的，我的第一个重点是让 HighCharts 为我汇总数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:44:51.730

HighCharts 不会为您汇总数据 - 它需要一串数据点并绘制它们。也许你应该看看他们的其他图表库 HighStock 和[dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)方法。dataGrouping 系统非常好 - 可以让您决定使用哪种聚合（总和、平均值等），并且您可以告诉它以低至毫秒的时间单位进行分组。

# asp.net - AJAX GridView 未更新

> ID：13668652
> 
> 赞同：0
> 
> 时间：2012-12-02T11:04:19.507
> 
> 标签：asp.net, ajax, gridview

我正在使用更新面板并将 SqlDataSource 以及 GridView 放在 contenttemplate 中

我已将 timercontrol 设置为 asyncpostback 触发器，但是当我从 sqlserver 中的相关表更改记录时，gridview 不会更新，而且看起来更疯狂的是，当我刷新时，已删除的记录仍然显示在网格视图中（完整返回页面）我也禁用了数据源的缓存但是这不是 wrking HELP !!!!!

这是我的代码

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" 
      Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
    </div>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">

    <ContentTemplate>
    <div id="ajx">
    <div>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:busConnectionString %>" 
            SelectCommand="SELECT * FROM [reserv]" EnableCaching="false" CacheDuration="0" CacheExpirationPolicy="Absolute" EnableViewState="false"></asp:SqlDataSource>
    </div>
    <div>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource1" EnableModelValidation="True">
            <Columns>
                <asp:BoundField DataField="SeatNo" HeaderText="SeatNo" 
                    SortExpression="SeatNo" />
                <asp:BoundField DataField="Status" HeaderText="Status" 
                    SortExpression="Status" />
            </Columns>
        </asp:GridView>
    </div>
    <div>
        <asp:Timer ID="Timer1" runat="server" Interval="1000" ontick="Timer1_Tick">

        </asp:Timer>
    </div>

    <div>
        <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
    </div>

    </div>
    </ContentTemplate>

    <Triggers>
    <asp:AsyncPostBackTrigger ControlID="Timer1"/>
    </Triggers>

    </asp:UpdatePanel>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:32:48.843

您必须在计时器的每个滴答声上手动对数据源和网格视图进行数据绑定。
将以下内容添加到您的 Timer1_Tick 事件中：

```
 protected void Timer1_Tick(object sender, EventArgs e)
    {
        SqlDataSource1.DataBind();
        GridView1.DataBind();
    } 
```

# java - 如何优化 MySQL 数据库查询率高的 Java 程序

> ID：13668661
> 
> 赞同：1
> 
> 时间：2012-12-02T11:06:22.273
> 
> 标签：java, mysql, performance

我目前正在开发一个用于教育目的的游戏。

游戏是一个小型聊天，每个玩家都有一个人物。这个人物的位置写在 MySQL 数据库中，每次玩家移动他的人物时都会更新。

目前，游戏每 60 帧更新一次所有玩家的位置并在游戏客户端中更改它们。数据库的性能并不是我唯一关心的问题，因为这会导致游戏帧率下降到 30-50 fps 左右。

显然，这会为每个玩家每秒生成 1 个位置更新查询（游戏以 60fps 运行）。考虑到比我和几个朋友更大的用户，我可以想象这可能是一个问题。

一个标准的租用网络服务器能够处理这个问题吗？我该如何改进它？（它不能每秒更新一次位置）

我希望你有一些想法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:14:44.563

此类数据在每次更改后并没有真正保存到数据库中，而是保存在某种内存上下文中，以便访问速度更快。您存储在数据库中的内容是更改频率较低的内容，例如每分钟一次。

您可能会定期将当前内存中的上下文快照到数据库。也就是说，每分钟左右你都会“保持”游戏状态，这样如果引擎崩溃，它就可以从那个点恢复。如果您创建正确的体系结构，这不会比定期调用方法更困难。

某些事情可能会立即持久化，以避免人们利用发生的动作与永久记录该动作之间的这种滞后。例如，任何使用游戏内货币的交易都会被立即记录下来，而内存中的缓存对于这些交易是不可信的。

对于人数较少的玩家，比如不到一百人，使用商品 VPS 应该没有问题。要容纳更多玩家，您必须非常小心以提高效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:14:18.360

您可以使用内存中的 Java 数据库，它允许您更频繁地更新播放器。然后以较低频率将更改存储在 MySQL 数据库中。

# joomla3.0 - 调用未定义的方法 JDate::toFormat()

> ID：13668663
> 
> 赞同：2
> 
> 时间：2012-12-02T11:06:51.667
> 
> 标签：joomla3.0

我在名为 Readless 的 joomla 插件上收到此错误：

```
Fatal error: Call to undefined method JDate::toFormat() in D:\wamp\www\test\plugins\content\readlesstext\readlesstext.php on line 1371
Call Stack
#   Time    Memory  Function    Location
1   0.0007  340432  {main}( )   ..\index.php:0
2   0.1884  7087984 JSite->dispatch( )  ..\index.php:52
3   0.1919  7150720 JComponentHelper::renderComponent( )    ..\application.php:205
4   0.1986  7192016 JComponentHelper::executeComponent( )   ..\helper.php:339
5   0.1990  7239144 require_once( 'D:\wamp\www\test\components\com_content\content.php' )   ..\helper.php:359
6   0.2060  7681608 JControllerLegacy->execute( )   ..\content.php:16
7   0.2060  7681656 ContentController->display( )   ..\legacy.php:722
8   0.2061  7683608 JControllerLegacy->display( )   ..\controller.php:77
9   0.2169  8470112 ContentViewCategory->display( ) ..\legacy.php:685
10  0.3341  10557472    JEventDispatcher->trigger( )    ..\view.html.php:109
11  0.3341  10558024    JEvent->update( )   ..\dispatcher.php:161
12  0.3341  10558528    call_user_func_array ( )    ..\event.php:71
13  0.3341  10558552    plgContentReadLessText->onContentBeforeDisplay( )   ..\event.php:0
14  0.3341  10558640    plgContentReadLessText->ReadLessText( ) ..\readlesstext.php:1448
15  0.3676  10562608    plgContentReadLessText->_GetParams( )   ..\readlesstext.php:1549
16  0.3836  10586160    ReadLessTextExpand->SetExpandables( )   ..\readlesstext.php:1871 
```

这是插件文件中的代码：

```
 if ( $dateFormat )
    {
      if ( $this->_created )
      {
        $this->_expandables[ '{created}' ] = $this->_created->toFormat( $dateFormat );
      }
      if ( $this->_modified )
      {
        $this->_expandables[ '{modified}' ] = $this->_modified->toFormat( $dateFormat );
      }
      if ( $this->_publishUp )
      {
        $this->_expandables[ '{publish_up}' ] = $this->_publishUp->toFormat( $dateFormat );
      }
    } 
```

我没看出有什么问题，帮帮我。它的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:30:42.230

得到了答案：

`toFormat`

在 joomla 3 中已弃用

采用 `Format`

# forms - Perl CGI、Apache 重写规则和表单发布数据

> ID：13668671
> 
> 赞同：1
> 
> 时间：2012-12-02T11:07:49.727
> 
> 标签：forms, perl, cgi, rewrite, http-post

在我的 perl CGI 动态网站中，我结合了 Apache URL 重写和表单发布的数据。

**阿帕奇**

```
Alias "/test" "C:/Users/Fred/workspace/test"
<Directory "/Users/Fred/workspace/test/">
Allow from 127.0.0.1
Options +ExecCGI
RewriteEngine On
RewriteBase /test/
RewriteRule ^$ cgi-bin/index.pl [L]
RewriteRule ^fred/(.+)$ cgi-bin/fred.pl?data=$1 [L]
</Directory> 
```

**HTML 表单**

```
<form action="fred/1234" method="post">
  <input type="text" name="text" value="ABCD" />
  <input type="submit" />
</form> 
```

以下 perl 代码将为 'data' 显示一个空值，因为尽管**$ENV{'QUERY_STRING'}**包含**'data=1234' ，但****cgi->param('data')**不返回任何内容：

 ****```
my $cgi = CGI->new;
print $cgi->header();

print Dumper($ENV{'QUERY_STRING'});

my $data = $cgi->param('data');
my $text = $cgi->param('text');

print "data=$data<br/>";
print "text=$text<br/>"; 
```

**知道为什么 CGI 参数中不包含“数据”变量吗？**

谢谢。

弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:14:24.740

您在示例中发布表单，这意味着表单数据在请求正文中可用。查询字符串仅用于 GET 方法。您不能混合使用 POST 和 GET。****

# css - 水平菜单，不是 CSS 中可点击的整个框

> ID：13668673
> 
> 赞同：2
> 
> 时间：2012-12-02T11:07:57.190
> 
> 标签：css, button, menu

在过去的 3 个小时里，我一直在尝试让它正常工作，但没有运气，我很沮丧。

我有一个带有链接的水平菜单，但我无法让整个按钮都可以点击。然后我在菜单居中遇到了麻烦。

页面看起来像这样（它以网站为中心，容器宽度 900px）

[http://i.stack.imgur.com/cFKpf.png](http://i.stack.imgur.com/cFKpf.png)

HTML：

```
<div id="container">
         <div id="title">
            <h1>Welcome to my website</h1>
         </div>
         <div id="menu">
            <ul>
               <li><a href="">Home</a></li>
               <li><a href="">About</a></li>
               <li><a href="">Contacts</a></li>
               <li><a href="">FAQ</a></li>
            </ul>
         </div>
         <div id="content"></div>
</div> 
```

CSS：

```
#container{
   background-color: whitesmoke;
   width: 900px;
   margin: 0px auto;
   padding-bottom: 20px;

}

#menu, #menu ul {
   width: 100%;
   height: 35px;
   background-color: #333;
   color: whitesmoke;
   margin: 0px auto;
   padding: 0px;
   float: left;
   display: table;
   text-align: center;
   font-weight: bold;
}

#menu li{
   display: table-cell;
   padding: 0px 50px;
   vertical-align: middle;
   border: solid 1.5px olive;
   }

#menu a, #menu a:visited {
   color: whitesmoke;
   text-decoration: none;
   }

#menu li:hover {
   background-color: olive;
   color: white;
} 
```

有关如何在保持页面外观的同时使整个按钮可点击的任何帮助？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:11:07.837

你不应该给`li`a 填充。您应该设置`a`为`display: block;`并给他们填充。这样做会填满整个盒子，因为和`a`之间不会有任何填充。`li``a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:09:41.017

只需设置`display: block`锚点：

```
#menu a {
  display: block;
} 
```

# jquery - 即使返回为假，IF 语句也会运行

> ID：13668674
> 
> 赞同：0
> 
> 时间：2012-12-02T11:08:08.357
> 
> 标签：jquery, if-statement, slide

我正在尝试构建自己的图像幻灯片，因此代码将查看特定的 div，如果所有图像都被隐藏，它应该 fadeToggle div 中的第一个图像，然后再次重新触发该功能。我面临的问题是我检查 img:hidden 的数量是否等于该 div 内的 img.length （这是开始的 faze），如果它是真的，那么代码应该 fadeToggle 第一个图像 img:first 和它永远不应再次运行，因为下次此函数运行时 img:hidden != imglength 因为其中一张图像是可见的。但它一直在运行。请看下面的代码。

谢谢

```
<div class="mainSlide">
<img src="img/1.jpg" style="display:none;" />
<img src="img/2.jpg" style="display:none;" />
<img src="img/3.jpg" style="display:none;" />
</div>

<script type="text/javascript">
$(document).ready(function() {

slideShow();

function slideShow() {
    $allSlides = $('div.mainSlide img').length;
    $hiddenSlides = $('div.mainSlide img:hidden').length;

    if ($hiddenSlides == $allSlides) {
        $('div.mainSlide img:first').fadeToggle('slow').delay(5000);
    }
    slideShow();
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:43:11.590

为什么不使用回调？

```
function slideShow() {
  $allSlides = $('div.mainSlide img').length;
  $hiddenSlides = $('div.mainSlide img:hidden').length;

  if ($hiddenSlides == $allSlides) {
    $('div.mainSlide img:first').fadeToggle('slow', function() {
      slideShow();
    });
  }
} 
```

# r - 重新计算距离矩阵

> ID：13668675
> 
> 赞同：0
> 
> 时间：2012-12-02T11:08:12.823
> 
> 标签：r, distance

我有一个很大的输入矩阵（4000x10000）。我`dist()`用来计算它的欧几里得距离矩阵（大约需要 5 个小时）。
我需要计算带有附加行的“相同”矩阵的距离矩阵（对于 4001x10000 矩阵）。在不重新计算整个矩阵的情况下确定距离矩阵的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:14:59.127

我会假设你的额外行意味着额外的点。如果这意味着一个额外的变量/维度，它将需要一个不同的答案。

首先，对于矩阵的欧几里德距离，我推荐包中的`rdist`函数`fields`。它是用 Fortran 编写的，比`dist`函数快得多。它返回 a`matrix`而不是对象，但您始终可以使用and`dist`从一个对象转到另一个对象。`as.matrix``as.dist`

这是（小于您的）示例数据

```
num.points <- 400
num.vars   <- 1000
original.points <- matrix(runif(num.points * num.vars),
                          nrow = num.points, ncol = num.vars) 
```

以及您已经计算的距离矩阵：

```
d0 <- rdist(original.points) 
```

对于额外点，您只需要计算额外点之间的距离以及额外点与原始点之间的距离。我将使用两个额外点来表明该解决方案对于任意数量的额外点都是通用的：

```
extra.points <- matrix(runif(2 * num.vars), nrow = 2)
inner.dist   <- rdist(extra.points)
outer.dist   <- rdist(extra.points, original.points) 
```

因此您可以将它们绑定到更大的距离矩阵：

```
d1 <- rbind(cbind(d0, t(outer.dist)),
            cbind(outer.dist, inner.dist)) 
```

让我们检查一下它是否与完整的、长时间的重新运行所产生的匹配：

```
d2 <- rdist(rbind(original.points, extra.points))

identical(d1, d2)
# [1] TRUE 
```

# php - php 脚本 - 一次只允许一个会话

> ID：13668677
> 
> 赞同：1
> 
> 时间：2012-12-02T11:08:19.013
> 
> 标签：php, mysql, session, login

请帮助我一次仅验证一个会话，请参阅以下脚本，该脚本当前允许相同的用户名登录任意数量的会话。

我不确定何时何地验证会话，请帮助我仅添加可以验证用户名会话的那几行。

```
<?php // accesscontrol.php
include_once 'common.php';
include_once 'db.php';

session_start();

$uid = isset($_POST['uid']) ? $_POST['uid'] : $_SESSION['uid'];
$pwd = isset($_POST['pwd']) ? $_POST['pwd'] : $_SESSION['pwd'];

if(!isset($uid)) {
  ?>
  <!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<title>Login</title>
<meta http-equiv="Content-Type"
  content="text/html; charset=iso-8859-1" />
<head>
<style type="text/css">
<!--
.style1 {
    font-size: 16px;
font-family: Verdana, Arial, Helvetica, sans-serif;
}
.style3 {
    font-size: 12px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}

body {
background-color: #D7F0FF;
margin-left: 0px;
margin-top: 0px;
margin-right: 0px;
margin-bottom: 0px;
}

-->
</style>

  </head>
<body>
  <h1 class="style1"> <br><br>Amogh Site - Login Required </h1>
  <span class="style3"><br>
  You <strong>must login to access this area </strong>of the site. <br>
  <br>
  If you are not a registered user, please contact your Admin
     to sign up for instant access!</span>
  <p><form method="post" action="<?=$_SERVER['PHP_SELF']?>">

<span class="style3">User ID:&nbsp;&nbsp;&nbsp;&nbsp;    
<input type="text" name="uid" size="12" />
<br>
<br />
Password:</span>    
<input type="password" name="pwd" SIZE="12" />
<br>
<br />
<input type="submit" value="Login" />
  </form></p>

</body>
  </html>
  <?php
  exit;
}

$_SESSION['uid'] = $uid;
$_SESSION['pwd'] = $pwd;

dbConnect("hitek_svga3");
$sql = "SELECT * FROM user WHERE
    userid = '$uid' AND password = '$pwd'";
$result = mysql_query($sql);
if (!$result) {
error('A database error occurred while checking your '.
    'login details.\\nIf this error persists, please '.
    'contact you@example.com.');
}

if (mysql_num_rows($result) == 0) {
  unset($_SESSION['uid']);
  unset($_SESSION['pwd']);
  ?>

  <!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title> Access Denied </title>
    <meta http-equiv="Content-Type"
      content="text/html; charset=iso-8859-1" />
    <style type="text/css">
<!--
.style1 {
    font-size: 16px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}
.style3 {
font-size: 12px;
font-family: Verdana, Arial, Helvetica, sans-serif;
}
-->
</style>  

  </head>
  <body>
  <br/>
  <br/>

  <h1 class="style1"> Access Denied </h1>
  <p class="style3">Your user ID or password is incorrect, or you are not a
 registered user on this site. To try logging in again, click
 <a href="<?=$_SERVER['PHP_SELF']?>">here</a>. To access, please contact our Admin     !</a>.</p>
  </body>
  </html>
  <?php
  exit;
}

$username = mysql_result($result,0,'fullname');
$_SESSION['user'] = mysql_result($result,0,'userid');
$_SESSION['email'] = mysql_result($result,0,'email');
$_SESSION['notes'] = mysql_result($result,0,'notes');

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:15:57.673

首先，为什么要将密码存储在会话变量中？

其次，如果 POST vars 'uid' 和 'pwd' 不存在，您的代码假定会话变量 'uid' 和 'pwd' 将存在，因此您需要在允许脚本之前确保其中一个或存在接着说。这必须在 session_start() 函数之后完成：

```
<?php // accesscontrol.php
include_once 'common.php';
include_once 'db.php';

session_start();

if(
      (!isset($_SESSION['uid']) || !isset($_SESSION['pwd'])) &&
      (!isset($_POST['uid']) || !isset($_POST['pwd']))
{
     //Redirect or throw exception or whatever
}

$uid = isset($_POST['uid']) ? $_POST['uid'] : $_SESSION['uid'];
$pwd = isset($_POST['pwd']) ? $_POST['pwd'] : $_SESSION['pwd']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:22:22.273

你不应该：

*   在数据库中保留明文密码
*   使用`mysql`扩展
*   2012年无框架开发

问题的关键是：PHP 如何判断请求来自哪个用户？上次我检查它使用了作为 GET 参数发送的*令牌*`PHPSESSID`或 HTTP 请求标头部分中的 cookie（我认为它被称为）。

显然，为了保证没有人窃取会话，必须通过安全通道交换身份令牌，即一旦用户登录，您必须生成会话 ID 并禁用端口 80 上的普通 HTTP 套接字。必须保留需要登录用户的脚本在仅允许端口 443 上的 HTTPS 的单独主机中。

会话 ID 将从登录脚本中分配，并将保存在`user`表的列中。顺便说一句，*常规*应用程序使用单独的表将会话与用户相关联，但是由于您需要每个用户一个客户端，因此表中的一列`user`就足够了。

因此，当请求带有会话令牌时，如果令牌仍然有效，您的**授权逻辑将检查用户表。**它应该使用令牌对用户进行**身份验证**，因此如果请求不包含令牌或在数据库中找不到令牌，则发出 a`403 FORBIDDEN`并在标头中建议登录 URL `Location`- 您也可以编写带有`<a>`在代理不自动遵循重定向的情况下链接。

登录脚本承诺使用令牌更新列，具体取决于您要执行的操作：使旧会话无效或阻止创建新会话，直到用户明确注销另一个客户端（后者在这种情况下会导致麻烦）用户无法访问他之前登录的旧机器，可能是因为关闭了移动设备或因为它位于不同的建筑物中）

# jquery - 将选定的选项值复制到另一个文本框，但仅适用于某些选项

> ID：13668679
> 
> 赞同：1
> 
> 时间：2012-12-02T11:08:38.393
> 
> 标签：jquery

HTML 摘录

```
Selection:
<select name="no_exam" id="no_exam">
    <option value="" selected="selected">===select option===</option>
    <option value="A+">100-75</option>
    <option value="B+">50-74</option>
    <option value="C+">0-49</option>
    <option value="AB">AB</option>
    <option value="NE">NE</option>
    <option value="MC">MC</option>
</select>
</br>

Selected value:
<input type="text" name="std_marks" id="std_marks"/> 
```

与上层 HTML 相关的 Javascript

```
$("#no_exam").change(function() {
    var textval = $(":selected",this).val();
    $('input[name=std_marks]').val(textval);

    // if value is selected, text field is readonly
    result_form.std_marks.disabled=(!textval) ? false : true;
}); 
```

这段代码工作正常......但我想改变它。我的问题是选择组有两个类别......一个是标记，另一个是缺席..

```
--------------------------------------------------
* Marks category: 100-75,50-74,0-49
-----------------------------------------------------
* Absent category: AB,NE,MC
------------------------------------------------------ 
```

在这里，当我选择一个选项时，它的值被复制到输入框中。

当用户选择“缺席”类别选项之一但在选择“标记”选项时不执行任何操作时，如何更改此代码以复制所选选项的值？

演示链接：-[演示链接](http://jsfiddle.net/dontspeak/2zfdq/4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:53:10.020

我已经稍微更改了您的 HTML 以实际分隔两个选项组，然后还将脚本更改为仅在选择其中一个组中的选项时将值复制到文本框（并禁用它）。

这是[改变后的 JSFiddle](http://jsfiddle.net/2zfdq/6)。

```
Selection :
<select name="myOption" id="myOption">
    <option value="" selected="selected">===select option===</option>
    <optgroup label="Marks" data-process="0">
        <option value="A+">100-75</option>
        <option value="B+">50-74</option>
        <option value="C+">0-49</option>
    </optgroup>
    <optgroup label="Absent" data-process="1">
        <option value="AB">AB</option>
        <option value="NE">NE</option>
        <option value="MC">MC</option>
    </optgroup>
</select></br>
Selected value :
<input type="text" name="student_mark"  id="student_mark"/> 
```

和脚本

```
$("#myOption").change(function() {
    // get selected option
    var option = $(":selected", this);

    // get its value
    var value = option.val();

    // check if we need to copy value and disable input
    var process = option.parent().data("process") | 0;

    // get input box
    var input = $("#student_mark")[0];

    // set value and disable input
    input.value = value && process ? value : "";
    input.disabled = value && process && true || false;
}); 
```

# sql - 使用 SQL 根据新插入的值获取值

> ID：13668682
> 
> 赞同：1
> 
> 时间：2012-12-02T11:09:05.503
> 
> 标签：sql, oracle-sqldeveloper

我想在同一张表中选择另一列的特定值后对一列进行过滤，我尝试使用`@...`特殊字符后跟列名来获取该值的地址。

我的 SQL 语句如下所示：

```
SELECT ATTRIBUTE FROM TABLE WHERE FIELD = '@FIELDNAME'; 
```

如果我使用特定值而不是`@FIELDNAME`，它将正常工作，但它将是静态的，但我需要它基于所选值是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:48:28.077

创建另一个表，该表将包含 FIELDNAME 中的值列表，并为每条记录提供一个唯一的 id，然后根据您选择的新表字段名称检索值，前面带有“@...”

我不知道您是否在寻找什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:27:06.683

如果不允许触发器，表中是否有任何`date/time`列？是否有可能有额外的列来查看新插入行的时间？

您可能必须检查输入的最后一行，将其`field`值保存到变量中。然后`select`根据变量值进行。

根据*模糊*的最后一行 id，您可以尝试以下方法（它不漂亮）。但同样，如果您有更准确的日期/时间。

```
select attribute from table 
where field = (select field from table 
where rowid =(select max(rowid) from table))
; 
```

**upate** 您是否有权设置您的插入命令，如下所示：

```
insert into table (id, col1, col2,...) values (1,'something', 'something',...)
returning id into variable; -- you may either save field or id depending on your table 
```

然后您可以使用它`variable`来选择您想要的记录。

# qt - 指向 QHash 的 QPointer

> ID：13668689
> 
> 赞同：0
> 
> 时间：2012-12-02T11:10:12.167
> 
> 标签：qt, pointers, qhash, qpointer

是否可以将 QPointer 与 QHash 一起使用？

```
QPointer<QHash<QString, QPointer<QStringList>> >  pHash; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:59:00.373

QPointer 只能与 QObject 子类一起使用。因此它不能与 QHash 或 QStringList 一起使用，因为两者都不是 QObject 的。如果上面的代码为您编译，那可能是因为您还没有使用 pHash？甚至初始化这样的 QPointer，例如

```
QPointer<QHash<QString, QString> > foo( new QHash<QString, QString>() ); 
```

给出如下错误（gcc）：

```
error: cannot convert ‘QHash<QString, QString>*’ to ‘QObject*’ in initialization 
```

如果您确实需要指向容器的（智能）指针，请尝试[QSharedPointer](http://qt-project.org/doc/qt-4.8/qsharedpointer.html)，它不需要包含的对象是任何特定类型。虽然通常在堆栈上创建容器，但在堆上创建它们是不习惯的，几乎在所有情况下都是不必要的。Qt 的容器是[隐式共享](http://qt-project.org/doc/qt-4.8/implicit-sharing.html)的，因此复制它们很便宜。

# java - 在 Java 中覆盖 processKeyEvent

> ID：13668690
> 
> 赞同：1
> 
> 时间：2012-12-02T11:10:24.310
> 
> 标签：java, jtextarea, overriding

我正在开发一个支持阿拉伯语文本的应用程序。我没有在其中使用系统级语言。用户只需按下键，然后根据该键，将阿拉伯 unicode 插入到 JTextArea 中。我创建了一个ArabicTextArea 类，并使用Swing 的JTextArea 对其进行了扩展。我在这个类中包含了一个覆盖函数 processKeyEvent(KeyEvent e)。现在我的问题是，每当我按下某个键时，此功能会触发 3 次，可能是 KeyDown 的第 1 次、KeyUp 的第 2 次和 KeyPressed 的第 3 次。我希望这个函数只触发一次，但我不知道如何。请有人帮我...

我正在使用以下代码

```
@Override
protected void processKeyEvent(KeyEvent event) {

    switch (event.getKeyChar()) {
    case 'a':
        append("\u0627");
        break;
    case 'H':
        append("\u062D");
        break;
    case 'm':
        append("\u0645");
        break;
    case 'd':
        append("\u062F");
        break;
    default:
        super.processKeyEvent(event);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T18:43:30.863

Yes, it is being called multiple times because 3 events occur ('a' for example):

*   KEY_PRESSED, keyCode=65, keyChar='a'
*   KEY_TYPED keyCode=0, keyChar='a'
*   KEY_RELEASED, keyCode=65, keyChar='a'

and the code above only distinguishes by the KeyChar. Use

```
event.getID() == KeyEvent.KEY_TYPED 
```

to ignore the press and release events, since you only care if the user typed the character.

# asp.net - 在 .NET 中使用 AOP 在 BCL 调用之前运行代码

> ID：13668692
> 
> 赞同：1
> 
> 时间：2012-12-02T11:10:42.633
> 
> 标签：asp.net, .net, aop, postsharp, afterthought

我试图在 ASP.NET 应用程序中对 BCL 的每个函数调用之后/之前调用一个函数。

例如，当`Server.MapPath`被调用时，我想在该特定调用之后和之前调用我自己的函数。

是否有支持此功能的 AOP 库？PostSharp 或 Afterthought 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T18:30:51.383

您是否尝试过从 GAC 编织原始程序集并将结果作为本地副本存储在您的二进制目录中？那*应该*工作。但是：您可能需要定义自己的方法来定义切入点定义。我认为 postsharp 和 afterthought 都支持程序集范围的切入点定义，但这样做意味着您*在*程序集中定义它。我见过有人设法用 postsharp 做到这一点，但再也找不到了：/ 我希望当我更深入地研究 Afterthought 时，我能给你一个更好的答案。我目前正在将一个项目从 Postsharp 移植到 Afterthought——这让我很不开心……

# java - 队列不自然排序

> ID：13668695
> 
> 赞同：4
> 
> 时间：2012-12-02T11:10:51.417
> 
> 标签：java, queue, priority-queue

> **可能重复：**
> [为什么这个奇怪的顺序发生在 java 的 PriorityQueue 中？](https://stackoverflow.com/questions/12369204/why-is-this-strange-order-happens-in-priorityqueue-in-java)

请看下面的代码：

```
public static void main(String[] args) {
    Queue<String> q = new PriorityQueue<String>();
    q.offer("car");
    q.offer("airplane");
    q.offer("bicycle");
    Iterator<String> i = q.iterator();
    while(i.hasNext())
        System.out.print(i.next() + " ");
} 
```

有人可以解释一下为什么输出是

```
airplane car bicycle 
```

代替

```
airplane bicycle car 
```

?

因为[在 API 中](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)它说优先级队列的元素是根据它们的自然顺序排序的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T11:13:42.930

根据[迭代器的javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#iterator%28%29)：

> 迭代器不会以任何特定顺序返回元素。

但是，第一项（头部）保证是最小的。所以这应该打印你所期望的：

```
public static void main(String[] args) throws Exception {
    Queue<String> q = new PriorityQueue<String>();
    q.offer("car");
    q.offer("airplane");
    q.offer("bicycle");
    String e = null;
    while ((e = q.poll()) != null) {
        System.out.println(e);
    }
} 
```

如果要对迭代进行排序，则需要使用不同的结构，例如，`TreeSet`如果没有重复项，则为 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:48:23.553

PriorityQueue 基于优先级堆。尽管元素没有排序，但这种数据结构允许非常快速地检索最少元素。向 PriorityQueue 添加元素比向基于树的 TreeSet 添加元素要快。由于元素未排序，因此正如 API 所说，迭代器“不会以任何特定顺序返回元素”。

# .net - 准备好的语句和池连接

> ID：13668696
> 
> 赞同：1
> 
> 时间：2012-12-02T11:10:51.293
> 
> 标签：.net, database, prepared-statement, connection-pooling

我编写了一个程序，它使用一个带有准备好的语句的连接。到目前为止，这可行，但我正在使用池连接。

我假设准备好的语句与连接池一起使用，但我无法了解它在实践中的使用方式。

我假设不是存储连接对象，而是为我运行的每个查询创建一个新的对象（它将被池化）。

在我使用这样的东西之前：

```
//Single connection at startup
var conn = NpgsqlCommand(...);
...
//Prepare all commands once at start-up
var cmd = new NpgsqlCommand("INSERT...", conn);
cmd.Parameters.Add("id", NpgsqlDbType.Integer);
cmd.Prepare();
...
//Using the command multiple times later on
cmd.Parameters["id"].Value = 4312;
cmd.ExecuteNonQuery(); 
```

现在使用池连接，我该如何准备这些命令？
我想我需要为每个连接准备一个命令，但我还需要一些方法来获取给定连接的准备命令，该连接可能是池中的任何人。

我假设池也可以创建新的连接，那么我需要准备一组新的命令，还是为每次调用创建一个新的 NpgsqlCommand，准备并执行它？

*一些背景知识：
我当前的设置是对单个用户的测试，其中只有几个呼叫，所有呼叫都是按顺序进行的。稍后这将是具有并行执行的多用户/多线程服务。*

我可以看到如何创建自己的连接池并编写自己的代码来为新线程准备命令，但我假设我不必编写这个，但我可能错了。

我正在使用 Npgsql(PostgreSQL) 但如果可能的话，一个通用的解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:16:16.857

根据这个[问题](https://stackoverflow.com/questions/6094529/prepared-statements-along-with-connection-pooling)，答案是你不能使用连接池。

# c++ - 为什么动态数组比静态数组慢

> ID：13668697
> 
> 赞同：5
> 
> 时间：2012-12-02T11:10:51.853
> 
> 标签：c++

在我当前的项目中，我需要对大型数据数组进行操作。所以我做了一个愚蠢的测试来检查哪个会更好，但是在尝试下面的代码时，我发现动态数组比静态数组慢得多，为什么会这样？还是我做错了什么？

这是代码（我从这里删除向量（执行等于动态）和提升数组（等于静态））

结果：静态 8，动态 7493

```
#include<iostream>
#include<vector>

using namespace std;
using namespace boost;
double arr_time;
double darr_time;

void arrr()
{
int arr[100000];
LARGE_INTEGER start,end;
QueryPerformanceCounter(&start);

for(int i=0 ; i <100000 ; ++i)
{
    arr[i] = 10 ;
}
for(int i=0 ; i <100000 ; ++i)
{
    int x = arr[i];
}
QueryPerformanceCounter(&end);

arr_time += (end.LowPart - start.LowPart);
}

void darr()
{
int *arr = new int[100000];
LARGE_INTEGER start,end;
QueryPerformanceCounter(&start);

for(int i=0 ; i <100000 ; ++i)
{
    arr[i] = 10 ;
}
for(int i=0 ; i <100000 ; ++i)
{
    int x = arr[i];
}
QueryPerformanceCounter(&end);

darr_time += (end.LowPart - start.LowPart);

delete[] arr;
}

int main(int argc, char** argv)
{
for(int i= 0 ; i <100 ; ++i)
{
    arrr();
    darr();

}
cout<<"\n--------------------\n";
cout<<arr_time<<endl;
cout<<darr_time<<endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T11:17:37.833

您的代码不会对其计算的值做任何事情，从而允许编译器将您的代码优化为无。例如，编译器可能会这样：

```
void arrr()
{
  int arr[100000];
  LARGE_INTEGER start,end;
  QueryPerformanceCounter(&start);

  for(int i=0 ; i <100000 ; ++i)
  {
      arr[i] = 10 ;
   }
  for(int i=0 ; i <100000 ; ++i)
  {
      int x = arr[i];
  }
  QueryPerformanceCounter(&end);

  arr_time += (end.LowPart - start.LowPart);
} 
```

进入这个：

```
void arrr()
{
  LARGE_INTEGER start,end;
  QueryPerformanceCounter(&start);

  QueryPerformanceCounter(&end);

  arr_time += (end.LowPart - start.LowPart);
} 
```

在静态数组代码中，编译器可以告诉内存不再被访问，因为一旦函数返回，它的堆栈就消失了。在动态情况下，它不能，因为它不知道一旦内存被释放，它的值就无关紧要了。第一个循环可能必须保留，但第二个循环可能在动态情况下完全删除。

你没有测量你认为你正在测量的东西。

你可以尝试这样的事情：

```
void arrr()
{
  int arr[100000];
  LARGE_INTEGER start,end;
  QueryPerformanceCounter(&start);

  for(int i=0 ; i <100000 ; ++i)
  {
      arr[i] = 10 ;
  }
  int x = 0;
  for(int i=0 ; i <100000 ; ++i)
  {
      x += arr[i];
  }
  QueryPerformanceCounter(&end);

  arr_time += (end.LowPart - start.LowPart);
  cout << "x = " << x << endl;
} 
```

还有另一个区别。在静态数组的情况下，编译器知道没有外部函数（如`QueryPerformanceCounter`）可以依赖或修改数组的内容。在动态情况下，它无法知道这一点。的位置`QueryPerformanceCounter`可以相对于循环改变。例如，编译器可以将两个调用`QueryPerformanceCounter`一起移动到循环之后，在静态情况下而不是在动态情况下。（除非微软使用一些技巧来防止这种情况。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:16:28.007

关于一般的数组访问（而不是您当前的代码），如果您在编译器中打开优化，那么在内存中按顺序访问一堆元素时，动态数组和静态数组之间应该没有任何区别。另一方面，如果关闭了所有优化，那么对于动态数组，存储在指针变量中的内存地址会隐式加载，当您`[]`在取消引用之前将运算符与指针一起使用时，必须执行此操作地方。所以这是一个额外的操作，静态或堆栈分配的数组不存在。但是同样，打开任何优化，指针都会存储在寄存器中并从那里偏移，因此在第一次访问指针后两者之间不会有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:30:06.020

正如 David 上面所说，由于优化，您可能实际上并没有衡量您认为自己是什么。这是您的代码，其中进行了一些更改，以确保没有任何超时被优化。

使用此代码，在 Visual Studio 2008 和 2010 的发布版本中，时间几乎与每个函数生成的汇编代码相同。对我来说，动态时间总是略小于静态时间，但我会说它们是等价的。

```
#include <Windows.h>
#include <iostream>

LONGLONG arrr()
{
    int arr[100000], x = 0;
    LARGE_INTEGER start, end;
    QueryPerformanceCounter(&start);
    for(int i=0; i < 100000; ++i) arr[i] = 10;
    for(int i=0; i < 100000; ++i) x += arr[i];
    QueryPerformanceCounter(&end);
    std::cout << x << std::endl;
    return (end.QuadPart - start.QuadPart);
}

LONGLONG darr()
{
    int *arr = new int[100000], x = 0;
    LARGE_INTEGER start, end;
    QueryPerformanceCounter(&start);
    for(int i=0; i < 100000; ++i) arr[i] = 10;
    for(int i=0; i < 100000; ++i) x += arr[i];
    QueryPerformanceCounter(&end);
    delete[] arr;
    std::cout << x << std::endl;
    return (end.QuadPart - start.QuadPart);
}

int main()
{
    LONGLONG arr_time = 0, darr_time = 0;
    for(int i = 0; i < 100; ++i)
    {
        arr_time += arrr();
        darr_time += darr();
    }
    std::cout<<"\n--------------------\n";
    std::cout << arr_time << std::endl;
    std::cout << darr_time << std::endl;
    return 0;
} 
```

# jakarta-ee - 如何将 Dojo Toolkit 放在 WAR 文件之外以缩短构建时间？

> ID：13668705
> 
> 赞同：0
> 
> 时间：2012-12-02T11:12:08.780
> 
> 标签：jakarta-ee, tomcat, dojo, tomcat7

美好的一天，我正在使用 Dojo Toolkit 1.8.1 并在 Appache Tomcat 7.0 上运行的 NetBeans 7.2.1 中开发一个简单的 Java EE Web 应用程序。我将 Dojo Tolkit 包含在应用程序的资源文件夹中，但构建应用程序需要很长时间，因为 Dojo Toolkit 包含许多文件。是否可以将 Dojo Toolkit 放在 WAR 文件之外，以便构建不会花费那么长时间，并且我仍然能够在我的 Web 应用程序中使用 Dojo？每次我需要调试应用程序时，我都需要重新构建它，所以我等待了很多。请指教。提前谢谢了。沃杰科技

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:15:11.613

一个对我来说效果很好的解决方案是构建一个单独的 dojo Web 应用程序并部署在旁边或另一个 Tomcat 实例上。

原因是，跨域问题可能难以调试，并且您可以更好地控制构建、版本、模块等。

如果您有权访问或已将 dojo 安装在服务器上，您还可以将 dojo 部署到 apache httpd。

当您加载工具包时，您将使用其中一个，`http://<servername>:<tomcatport>/<context>`或者仅在 Apache httpd 上使用`"/dtk" or "/dojo/dojo/dojo.js"`等等。

我使用“dtk”作为上下文，因此 dojo.js 驻留在其中，`http://<servername>:<tomcatport>/dtk/dojo/dojo.js`并且通常我的应用程序被编译为 Tomcat 7 的 dtk##1.8.1.war - ## 向 tc 表明您希望将其显示为版本。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:17:27.943

您可以从 CDN 加载 Dojo，并且不在您的 WAR 中包含 dojo 代码。

```
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js"></script>

http://dojotoolkit.org/download/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:10:25.593

在应用程序启动时，您应该添加类似

```
import org.apache.catalina.loader.WebappLoader;
...
tomcat.addWebapp('/dojolib', '/path/to/dojolib'); 
```

我确切地知道在哪里使用 Grails 添加它，但这可能会为您提供 Java [http://nileshk.com/2010/08/25/emdedding-apache-tomcat-7-0.html](http://nileshk.com/2010/08/25/emdedding-apache-tomcat-7-0.html)的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:37:41.810

您可以将它放在 WAR 文件中的任何位置，但请确保不要将该文件夹包含在构建路径中

# java - Android 2.3 使用 Fragments 时保持 ListView 位置

> ID：13668709
> 
> 赞同：0
> 
> 时间：2012-12-02T11:12:51.200
> 
> 标签：java, android, listview, android-2.3-gingerbread

我一直在努力寻找解决方案。`ListView`当我使用`Fragments`并且有人旋转设备时，我如何保持位置。

旋转本身会重置一切，并再次回到 0。当我使用 normal 时，我可以让它与多个示例一起使用`Activities`，但是当我在特定的内部时该怎么做`Fragment`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:37:26.107

确保在轮换或执行任何操作后不要再次调用 setAdapter()。始终调用 notifyDataSetChange() 并且您的列表将保持在同一点

其他解决方法可以是您保存当前列表项的位置并为您想要保留的内容调用 setSelection(position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:37:02.450

您必须在暂停时和恢复时检查值是否为空时将某种视图标签或位置编号存储在捆绑包中。如果未将列表视图设置为所述位置。

# java - 向用户询问 0 到 180 度之间的角度

> ID：13668716
> 
> 赞同：0
> 
> 时间：2012-12-02T11:14:13.070
> 
> 标签：java

我的程序接受我输入的任何数字，甚至是 100 万 >.< 但我只想要求用户输入 0 到 180 度之间的角度，并输出该角度的正弦、余弦和正切

这是我的程序：

```
import java.util.Scanner;
import java.text.DecimalFormat;
public class Mathematics
{
  public static void main(String args[])
  {

    System.out.println("Enter an Angle ");
    Scanner data = new Scanner(System.in);
    int x;
    x=data.nextInt();

    double sinx = Math.sin( Math.toRadians(x) );
    double cosx = Math.cos( Math.toRadians(x) );
    double tanx = Math.tan( Math.toRadians(x) );

    DecimalFormat format = new DecimalFormat("0.##");
    System.out.println("Sine of a circle is  " + format.format(sinx));
    System.out.println("cosine of a circle is  " + format.format(cosx));
    System.out.println("tangent of a circle is  " + format.format(tanx));

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:16:07.420

将此代码放在后面`x=data.nextInt();`

```
if( x < 0 || x > 180 )
{
    throw new Exception("You have entered an invalid value");
} 
```

如果用户输入超出范围 [0, 180] 的数字，这将导致您的程序崩溃。如果您希望允许用户重试，则需要将程序放入循环中，如下所示：

```
do
{
    System.out.print("Enter a value in [0, 180]: ");
    x = data.nextInt();
} while(x < 0 || x > 180); 
```

这个循环将一直持续到用户输入所需的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:18:13.317

代替

```
x = data.nextInt(); 
```

写

```
do {
    x = data.nextInt();
    if (x < 0 || x > 180) {
        System.out.println("Please enter number between 0-180");
    }
} while (x < 0 || x > 180); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:21:29.697

把问题放在一个循环中。当用户输入的值超出您的范围时，打印一条错误消息并请求不同的值。当输入的值OK后，*就*可以退出循环了。最好使用函数来使内容更具可读性：

```
public static int askForInt(String question, String error, int min, int max) {
    while (true) {
       System.out.print(question + " (an integer between " + min + " and " + max + "): ");
       int read = new Scanner(System.in).nextInt();
       if (read >= min && read <= max) {
          return read;
       } else {
          System.out.println(error + " " + in + " is not a valid input. Try again.");
       }
    }
} 
```

像这样调用：`x = askForInt("The angle", "Invalid angle", 0, 180);`

# excel - 计算项目数量

> ID：13668717
> 
> 赞同：1
> 
> 时间：2012-12-02T11:14:15.567
> 
> 标签：excel, vba

我有两个工作表；Sheet1 包含不同的建筑物名称（重复），Sheet2 包含建筑物名称的列表。我想计算 sheet1 中的建筑物数量并在 sheet2 中显示它们。

目前，我正在使用工作簿函数 COUNTIF。如果在 sheet1 中添加了新建筑物，我该怎么办？（VBA或工作簿功能很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:40:02.087

您可以在工作表 1 中创建一个动态命名范围（用于建筑物列表），然后在工作表 2 中的 countif 函数中引用命名范围。

有关动态命名范围如何工作的更多详细信息，请查看以下内容：-

[http://www.ozgrid.com/Excel/DynamicRanges.htm](http://www.ozgrid.com/Excel/DynamicRanges.htm)

另一种选择是使用包含建筑物名称的整个列，因为您的 countif 函数只会返回包含函数中指定条件的单元格的值。它可能看起来像这样：-

=countif(Sheet1!A:A,"building a") <--这将在 Sheet 1 的 A 列中搜索所有包含“building a”的单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:34:27.543

当您使用动态范围或`A:A`范围时`CounIF()`，只要您在范围内没有任何空白单元格，它就可以工作。请知道。在这种情况下，您最好使用 a`pivot table`并相应地指向数据透视表的总单元格。

或者，如果您仍然喜欢`CountIf()`在空白单元格的情况下使用，您可以申请`conditional formatting`用一些文本/字符串填充空白。不要忘记条件格式会降低工作表性能。或者你可以用条件包装 CountIf() `IF`。

# c++ - 如何在 QtQuick 2.0 中从 C++ 与 QML 交互

> ID：13668723
> 
> 赞同：1
> 
> 时间：2012-12-02T11:15:18.500
> 
> 标签：c++, qt, qml, qt-quick, qt5

假设我们有一个非常简单的 QML 文件，如下所示：

```
import QtQuick 2.0

Rectangle {
    width: 800
    height: 600
    color: '#000'

    Text {
        text: qsTr("Hi all")
        anchors.centerIn: parent
    }
} 
```

QML 文件与 QtQuick2ApplicationViewer 帮助类一起加载，如下所示：

```
QtQuick2ApplicationViewer viewer;
viewer.setMainQmlFile(QStringLiteral("qml/MyApp/Login/Window.qml"));
viewer.showFullScreen(); 
```

例如，如果我想将 Rectangle 的颜色从 C++ 更改为白色，我应该如何进行。我的猜测是：

```
QQuickItem *window = viewer.rootObject();
window->setProperty("color", "#fff"); 
```

但所做的只是以下编译器错误：

```
invalid use of incomplete type 'struct QQuickItem'
forward declaration of 'struct QQuickItem' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T13:46:05.760

然后 QQuickItem 在您包含的标头中的某处前向声明，但不是完全限定的。[这里](https://stackoverflow.com/questions/6349822/incomplete-type-in-class)有更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T16:00:07.497

```
QObject *rootObject = (QObject *)viewer.rootObject();
rootObject->setProperty("color", "red"); 
```

# c - 防止用户输入错误的数据类型

> ID：13668724
> 
> 赞同：0
> 
> 时间：2012-12-02T11:15:38.583
> 
> 标签：c, scanf

我试图只扫描我的 c 程序中允许的类型。我有一个整数变量。我想在用户输入是字符时再次扫描。

```
 int usercount;

   do{
     printf("enter user count");
     scanf("%d",&usercount);
   }
   while(!isdigit(usercount)); 
```

但是当输入是 char 时，它处于无限循环中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:18:12.590

该`scanf()`函数有一个*返回值*。它告诉您它成功完成了多少“转换”。在这种情况下，如果未能将输入解释为整数，它将返回 0。您的代码应该检查返回值。

通常，为了对缓冲输入队列中留下的“东西”不那么敏感，您应该使用 一次读取整行`fgets()`，然后使用`sscanf()`（或任何其他解析函数，如`strtoul()`）来解析数据。

# python - 夹具加载失败：DoesNotExist：...匹配查询不存在

> ID：13668728
> 
> 赞同：3
> 
> 时间：2012-12-02T11:16:07.267
> 
> 标签：python, django, fixtures

从 git repo 运行 Django 1.5.x。使用南方来管理迁移。我有一个这样的模型：

```
class Company(models.Model):
    name = models.CharField(max_length = 100)
    subdomain = models.CharField(max_length = 50)
    is_active = models.BooleanField(default=True)
    prefs = models.TextField(max_length=8*1024, null=True, blank=True, default=None)

    is_dev = models.BooleanField(default=False) # this is a development company - internal to 15Five

    trial_start_date = models.DateField(null=True, blank=True, default=None)
    trial_length_days = models.PositiveIntegerField(default = 28)

    email_domain = models.CharField(max_length = 100, null=True, blank=True, default=None)
    cohort = models.ForeignKey(Cohort, null=True, blank=True, default=None)

    create_ts = models.DateTimeField(_('Created'), default=timezone.now)
    update_ts = models.DateTimeField(_('Updated'), default=timezone.now)
    deactivate_ts = models.DateTimeField(_('Deactivated'), null=True, blank=True, default=None)
    converted_to_paying_ts = models.DateTimeField(_('Converted'), null=True, blank=True, default=None)

    features = models.ManyToManyField(Feature,
                                      verbose_name=_('feature'), blank=True,
                                      help_text='A feature which can be turned on or off for a company') 
```

我在 django admin 中创建了一家公司。我曾经`manage.py dumpdata ff.company --indent=2`导出一个 JSON 夹具：

```
[
{
  "pk": 1,
  "model": "ff.company",
  "fields": {
    "cohort": null,
    "subdomain": "zzz",
    "name": "zzz",
    "trial_start_date": null,
    "trial_length_days": 0,
    "converted_to_paying_ts": "2012-12-02T11:06:10Z",
    "is_active": true,
    "update_ts": "2012-12-02T11:06:11Z",
    "is_dev": true,
    "deactivate_ts": null,
    "create_ts": "2012-12-02T11:05:56Z",
    "email_domain": "zzz.com",
    "prefs": "",
    "features": []
  }
}
] 
```

我清除了我的 ff_company 表并运行了我的迁移，但我收到了一个错误：

```
Error in migration: ff:0004_create_default_companies
DoesNotExist: Problem installing fixture 'C:\<redacted>/migrations/fixtures/create_default_companies.json': Company matching query does not exist. Lookup parameters were {'id': 1} 
```

知道问题可能是什么吗？我认为南不是问题，因为如果我手动加载夹具也会出现错误：

```
>manage.py loaddata ..\migrations\fixtures\create_default_companies.json
DoesNotExist: Problem installing fixture 'C:\<redacted>\migrations\fixtures\create_default_companies.json': Company matching query does not exist. Lookup parameters were {'id': 1} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T11:21:36.780

我的公司模型上有 pre_save 和 post_save 信号触发器。这些没有检查`raw`参数，而是试图对不存在的数据库值做一些聪明的事情。

# java - 如何使用 Httpclient 遍历返回的 JSON

> ID：13668731
> 
> 赞同：0
> 
> 时间：2012-12-02T11:16:35.520
> 
> 标签：java, httpclient

我有以下代码用于调用返回 JSON 格式如下的 API：-

```
{
  "data": [
    {
      " Ser": 1,
      " No": 1
    },
    {
      " Ser": 2,
      " No": 2
    },
    {
      " Ser": 3,
      " No": 3
    },
    {
      " Ser": 4,
      " No": 4
    },
    {
      " Ser": 5,
      " No": 5
    },

  ]
} 
```

代码是： -

```
 HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet("/json/api/getinfo?type=100");
    HttpResponse response = client.execute(request);
// Get the response, how i can loop through the returned JSON and assign the reterned json to a global parameters which i can access from ym system using has values #parameter1# , #parameter2#, etc. 
```

那么如何遍历返回的 JSON 并将其分配给全局参数“NO”呢？此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:37:16.867

您应该通过[文档](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)中提到的从`HttpReponse`对象中获取内容。然后应该将内容从任何 JSON 库（例如来自[json.org/java](http://json.org/java/)的库）馈送到 a 。然后，您可以通过 遍历 JSON 输出并从中提取元素。`HttpEntity.getContent()``JSONObject``JSONObject`

```
HttpResponse response = client.execute(request);
HttpEntity entity = response.getEntity();
if (entity != null) 
{
    //
    // Using Commons IO library's IOUtils method 
    // to read the content from the stream.
    //
    String json = IOUtils.toString(entity.getContent());
    JSONObject obj = new JSONObject(json);
    // Process the JSON

    // shutdown the connection.
} 
```

# android - 将详细信息写入文件

> ID：13668732
> 
> 赞同：1
> 
> 时间：2012-12-02T11:16:39.220
> 
> 标签：android, file

我想在应用程序运行的手机上保存一些详细信息，但使用 txt 扩展名会使其可读。是否可以将文件写为二进制而不是纯文本？有些东西不可读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:21:12.817

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，[例如这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:45:22.150

您可以使用共享首选项。例如像这样：

```
 @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  
        save("PUT YOUR STRING HERE");

        Log.e("---> This is it: ", load());
    }  

    private void save(String stringToSafe) // Speichern der Inhalte
    { 
        SharedPreferences shared = getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor edit = shared.edit();

        String yourString = "The string/value what you want to write into file";

        edit.putString("THE_KEY", stringToSafe);
        edit.commit();
    }

    private String load()
    {

        SharedPreferences shared = getPreferences(Context.MODE_PRIVATE);

        String   get = shared.getString("THE_KEY", "Error");
        return get;
    } 
```

对于铁道部你可以在这里阅读：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html) ..

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:11:26.853

您可以使用 SharedPreferences。但是，如果您只想在文件中使用它，为什么不对其进行加密，或者对其进行编码并将其写入文件呢？因此，当您从中读取时，只需对其进行解密或解码。

很简单。您可以使用 Base64 编码和解码，并且有很多示例。

# python - 在 xlrd 中创建搜索方法

> ID：13668733
> 
> 赞同：1
> 
> 时间：2012-12-02T11:16:42.573
> 
> 标签：python, search, xlrd

我正在尝试为 excel 文件创建搜索方法，如果找到该单词，则程序应打印整行并且代码为

```
from xlrd3 import open_workbook,cellname,empty_cell,XL_CELL_TEXT,error_text_from_code, cellnameabs, colname
book= open_workbook('s1.xls')
sheet=book.sheet_by_index(0)

def search():
    s=[]
    a=str(input("Enter Search : "))
    x= [a]
    for row in range(sheet.nrows):
        for col in range(sheet.ncols):
            s.append(str(sheet.cell(row,col).value))
            if x == s:
                for col in range(sheet.ncols):
                    s=[]
                    s.append(int((sheet.cell(row,col).value)))
                    print (s)
                    s=[]
            elif x != s:
                s=[]
    search()

search() 
```

我有一个问题，当涉及到数字时，它被打印为像 10301.0 这样的浮点数，我希望用户搜索确切的数字 10301 并显示为 10301

请问有什么建议吗？谢谢

# python - python - 如何通过python中的psycopg2模块取消存储在postgresql中的二进制数据？

> ID：13668735
> 
> 赞同：4
> 
> 时间：2012-12-02T11:16:42.777
> 
> 标签：python, postgresql, pickle, psycopg2

我正在使用 cPickle 和 psycopg2 将一些向量存储到数据库中。这是我存储二进制数据的代码

```
binary_vec = cPickle.dumps(vec, -1)
db.cur.execute('''
               INSERT INTO feature_vector (vector, id) 
               VALUES (%s, %s);
               ''', (psycopg2.Binary(binary_vec), thread_id)
db.conn.commit() 
```

但是，当我使用 fetchall() 加载数据时，类型是缓冲区。我找不到如何将此缓冲区对象恢复回列表（vec）。

这就是我获取数据的方式

```
db.cur.execute("SELECT * FROM feature_vector;")
m = db.cur.fetchall() 
```

结果看起来像这样

```
[(3169187, <read-only buffer for 0x1002b0f10, size 3462, offset 0 at 0x1004a7430>), 
(3169275, <read-only buffer for 0x1002b0f50, size 3462, offset 0 at 0x1004a7570>), 
(3169406, <read-only buffer for 0x1002b0f70, size 3462, offset 0 at 0x10140b0b0>), 
(3169541, <read-only buffer for 0x10141c030, size 3462, offset 0 at 0x10140b2b0>), 
(3169622, <read-only buffer for 0x10141c050, size 3462, offset 0 at 0x10140b3f0>),... 
```

当我尝试使用 cPickle.loads(m[0][1]) 时，它会返回错误消息

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: must be string, not buffer 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T02:19:02.253

您可以创建一个自定义的类型转换程序来自动将腌制值转换为 Python：

```
import cPickle
obj = {'a': 10}
data = cPickle.dumps(obj, -1)

import psycopg2

def cast_pickle(data, cur):
    if data is None: return None
    return cPickle.loads(str(psycopg2.BINARY(data, cur)))

psycopg2.extensions.register_type(
    psycopg2.extensions.new_type(
        psycopg2.BINARY.values, 'BINARY-PICKLE', cast_pickle))

cnn = psycopg2.connect('')
cur = cnn.cursor()
cur.execute("select %s::bytea", [psycopg2.Binary(data)])
cur.fetchone()
# ({'a': 10},) 
```

# c# - C#/WP7 绑定到包含来自 JsonNet 的 JSON 数组的对象？

> ID：13668739
> 
> 赞同：1
> 
> 时间：2012-12-02T11:17:07.083
> 
> 标签：c#, windows-phone-7, binding, json.net

我正在尝试将 Bindings 与 ListBoxes 一起使用来显示在 JSON 文件中提供的菜单。问题是如果我使用下面的代码，下面的“MenuEntryTemplate”的内容不会显示，如果我将列表框直接放在 CantineTemplate 中并使用 {Binding Meal.Lunch} 和 {Binding Meal.Dinner} 它们确实有效，所以我想知道为什么添加这个额外的级别会破坏代码。

我有以下一段 JSON（我无法更改其格式）：

```
"cantines": [
    {
        "name": "Canteen A",
        "meal": {
            "lunch": [
                {
                    "type": "soup",
                    "name": "Vegetable soup"
                },
                {
                    "type": "main",
                    "name": "Burger with fries"
                },
            ],
            "dinner": [
                {
                    "type": "main",
                    "name": "Chicken breast with rice"
                }
            ]
        }
    }
] 
```

我使用 Json.Net 对其进行反序列化，这似乎将我的对象正确反序列化为以下数据结构：

```
public class MenuModel : ViewModelBase
{
    public List<Cantines> Cantines { get; set; }
}

public class Cantines
{
    public string Name { get; set; }
    public Meals Meal { get; set; }
}

public class Meals
{
    public List<Lunches> Lunch { get; set; }
    public List<Dinners> Dinner { get; set; }
}

public class Lunches
{
    public string Type { get; set; }
    public string Name { get; set; }
}

public class Dinners
{
    public string Type { get; set; }
    public string Name { get; set; }
} 
```

我的 XAML 如下所示：

```
<DataTemplate x:Key="MealEntryTemplate">
    <StackPanel Orientation="Vertical">
        <TextBlock Text="{Binding Type}" />
        <TextBlock Text="{Binding Name}" />
    </StackPanel>
</DataTemplate>

<DataTemplate x:Key="MealTemplate">
    <StackPanel>
        <!-- These 2 listboxes do not show up, when I leave this MealTemplate out and
             use {Binding Meal.Lunch} in the "CantineTemplate" it does work. -->
        <ListBox 
            ItemsSource="{Binding Lunch}"
            ItemTemplate="{StaticResource MealEntryTemplate}"
            />
        <ListBox 
            ItemsSource="{Binding Dinner}"
            ItemTemplate="{StaticResource MealEntryTemplate}"
            />
    </StackPanel>
</DataTemplate>

<DataTemplate x:Key="CantineTemplate">
    <ListBox
        ItemsSource="{Binding Meal}"
        ItemTemplate="{StaticResource MealTemplate}"
        />
</DataTemplate>

<DataTemplate x:Key="MenuTemplate">
    <ListBox
        ItemsSource="{Binding Cantines}"
        ItemTemplate="{StaticResource CantineTemplate}"
    />
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:43:51.357

```
<ListBox
    ItemsSource="{Binding Meal}"
    ItemTemplate="{StaticResource MealTemplate}"
    /> 
```

该属性`Meal`是单个`Meals`对象。列表框需要一组对象，这就是它不起作用的原因。您可以将该`Meal`属性声明为 a`List<Meals>`以使其工作，但如果只有一个元素，我看不出使用列表框的意义。

# c - C中的整数数组初始化错误

> ID：13668743
> 
> 赞同：1
> 
> 时间：2012-12-02T11:17:49.887
> 
> 标签：c

我正在尝试以下列方式初始化我的数组，但出现表达式语法错误：

```
int LineOne[ARRAY_LENGTH];//where ARRAY_LENGTH is a constant of length 10
if(SOME_CONDITION_IS_TRUE){
LineOne[ARRAY_LENGTH] = {0,1,0,0,1,1,1,0,1,1};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:19:38.537

您不能在“经典”C 中使用数组文字，除非在定义变量时作为初始值设定项。

在 C99 中，您可以使用*[复合文字](http://en.wikipedia.org/wiki/C_syntax#Compound_literals)*来执行此操作，但您必须在文字之前在类似强制转换的表达式中重复该类型：

```
LineOne = (int[ARRAY_LENGTH]) { 0,1,0,0,1,1,1,0,1,1 }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:26:00.520

这真的取决于代码的其余部分（你想如何使用数组），什么解决方案是最好的。另一种方法可能是......

```
int* LineOne = 0;
if(SOME_CONDITION_IS_TRUE) {
    static int* init = {0,1,0,0,1,1,1,0,1,1};
    LineOne = init;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:21:10.973

你不能那样做。您可以使用备用数组并复制它：

```
#include <string.h>
…
int values[] = {0,1,0,0,1,1,1,0,1,1};

int LineOne[ARRAY_LENGTH];//where ARRAY_LENGHT is a constant of length 10
if(SOME_CONDITION_IS_TRUE)
    memcpy(LineOne, values, sizeof(values)); 
```

# shell - 如何从 shell 中包含字符串和数字的行中取出数字？

> ID：13668745
> 
> 赞同：2
> 
> 时间：2012-12-02T11:18:04.040
> 
> 标签：shell, split

所以我有一个文件，其中包含这样的行：

```
Kiss Bea 3 4 5 4
Nagy Katalin 4 5 2 3 
```

我试过这个：

```
 read name  
        while read var1 var2 var3
        do
            if [ $name == $var1 ]
            then 
                echo $var3
            fi
        done < test.txt 
```

`name="Kiss"` 所以`var3= 3 4 5 4`在这里

我的问题是我不能将这些数字（在 var3 中）放入不同的变量中，因为我需要一个脚本来写出这些数字的平均值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:44:17.953

在 bash 中这样的一种方式：

```
read name
while read var1 var2 var3
do
    if [ $name == $var1 ]
    then
        echo "scale=2;(${var3// /+})/4" | bc
    fi
done < test.txt 
```

用 '+' 替换 var3 中的所有空格，并使用 bc 命令完成平均值。

# objective-c - 在 iOS 中在 O(1) 时间内找到具有唯一前缀的文件

> ID：13668748
> 
> 赞同：1
> 
> 时间：2012-12-02T11:18:12.197
> 
> 标签：objective-c, ios, file-handling

在 iPad 应用程序中，我有一个包含以下文件的文件夹：

```
1-1-xxxx.dat
1-2-xxxx.dat
...
1-999-xxxx.dat
2-1-xxxx.dat
...
...
999-999-xxxx.dat 
```

其中`xxxx`部分是在创建文件时在运行时确定的字符。每个文件的内容取决于前一个文件的内容，因此对于我创建的每个文件，我都需要查询前一个文件。问题是，我只知道前一个文件的前缀而不知道`xxxx`部分，因为“xxxx”部分本质上是随机的。（该`xxxx`部分本身由`xxxx`前一个文件的部分决定，`1-1-xxxx`文件随机命名）。

要访问该文件，最初的方法是：

```
// For file 1-50-xxxx.dat
NSError *error = nil;
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *allFiles = [fm contentsOfDirectoryAtPath:path error:&error];

for (NSString *file in allFiles) {
    if ([file hasPrefix:@"1-49-"]) {
        // Determine contents and name of file "1-50-xxxx.dat"
        // Create file, break, etc.
    }
}
// ... And repeat for many files 
```

这显然会很快变得非常昂贵。是否有一种 O(1) 的方式来获取所需文件的路径，因为只有一个具有给定数字前缀的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:26:37.287

为什么不建立名称字典，然后在该字典中查找路径？字典键是前缀，值是完整路径。

即：（伪代码）

```
// Build the path dictionnary, that is done only once
currentPrefix = ...
previousXXX   = null
foreach file
  currentXXX = computeXXX( previousXXX )
  dictionnary.put( currentPrefix, computePath( currentPrefix, currentXXX )

  // Remember for next iteration
  previousXXX = currentXXX 
  currentPrefix++
endforeach 
```

然后，知道前缀，获取路径既简单又快速（当然，多快取决于使用的字典实现）：dictionnary.get(prefix)

* * *

要构建文件的内容，只需应用相同的逻辑：在每次迭代时，记住前一个文件的内容/后缀并使用它，而不是从头开始重新计算。

# actionscript-3 - Flex Mobile：更改默认应用程序 frameRate

> ID：13668753
> 
> 赞同：0
> 
> 时间：2012-12-02T11:18:46.013
> 
> 标签：actionscript-3, apache-flex, actionscript, flash-builder, flex-mobile

我正在开发一款灵活的游戏，它在移动设备上非常生涩且根本不流畅。我在我的 mxml 文件中将应用程序 frameRate 更改为 60，它似乎运行更顺畅（但不是应有的）。这对性能有影响吗？

有没有其他方法可以做到这一点？我没有冗长而复杂的操作，我之所以这么说是因为我发现了一些开源库，通过这些库我可以使用异步线程。但我读到这也有缺点。

我真的很困惑，因为我在舞台上仅有的对象是：15 个 Image 对象，每个对象都附加了一个 Move 对象和一个 OnClick 侦听器。4 个计时器，每 500 毫秒、1 秒、2 秒和 5 秒重复一次。侦听器和计时器中最长的操作是 O(n)，其中 n = 图像计数 = 15，但大多数是 O(1)

所有对象都是在视图 creationComplete 事件中创建的，我在整个过程中都重复使用它们。内存管理正确，我使用内存分析器进行了检查。

你能指点我一些方向吗？

# c# - 如何对填充有随机数的二维数组进行排序

> ID：13668754
> 
> 赞同：0
> 
> 时间：2012-12-02T11:18:48.403
> 
> 标签：c#, arrays, sorting, 2d

我正在做一个班级作业，
我需要创建一个随机数的二维数组并将它们排序为气泡或其他排序代码。我对单个数组很好，但问题是一个充满随机数的二维数组，我就是不明白。随机数应由 (-I,I) 间隔组成，它是用户输入。抱歉英语不好，没有获得任何学位。在处理可视化 C# windows 窗体时。寻找简单的情侣cicles方法。例子。：`A[MxN] ->>> B[MxN] (Sorted 1.....n)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:09:53.543

这是一个解决方案，它首先将每一行的列按顺序排序，然后按第一列比较每一行，然后是第二列，依此类推：

```
namespace StackOverflow.Demos
{

    class Program
    {

        public static void Main(string[] args) 
        {
            new Program();
            Console.WriteLine("Done");
            Console.ReadKey();
        }
        Program()
        {
            double[,] data = GenerateData();
            OutputData(data, "Before");
            SortData(ref data);
            OutputData(data, "After");
        }
        double[,] GenerateData()
        {
            Random randomGenerator = new Random(DateTime.UtcNow.Millisecond);
            double[,] data = new double[5, 5];
            for (int i = 0; i < data.GetLength(0); i++)
            {
                for (int j = 0; j < data.GetLength(1); j++)
                {
                    data[i, j] = (randomGenerator.NextDouble() * 2) - 1;
                }
            }
            return data;
        }
        void OutputData(double[,] data, string message)
        {
            Console.WriteLine("=====================");
            Console.WriteLine(message);
            Console.WriteLine("=====================");
            for (int i = 0; i < data.GetLength(0); i++)
            {
                for (int j = 0; j < data.GetLength(1); j++)
                {
                    Console.Write(data[i, j]);
                    Console.Write("\t");
                }
                Console.WriteLine();
            }
        }
        void SortData(ref double[,] data)
        {
            //sort sub arrays
            SortDataRows(ref data);
            //sort this array
            for (int i = 0; i < data.GetLength(0)-1; i++)
            {
                for (int j = i; j < data.GetLength(0); j++)
                {
                    for (int k = 0; k < data.GetLength(1); k++)
                    {
                        if (data[i, k].CompareTo(data[j, k]) < 0) //if already in order exit loop
                        {
                            break;
                        } else if (data[i, k].CompareTo(data[j, k]) > 0) //if out of order switch and loop
                        {
                            SwapRows(ref data, i, j);
                            break;
                        }//else orders are equal so far; continue to loop
                    }
                }
            }
        }
        void SortDataRows(ref double[,] data)
        {
            for (int row = 0; row < data.GetLength(0); row++)
            {
                for (int i = 0; i < data.GetLength(1) - 1; i++)
                {
                    for (int j = i; j < data.GetLength(1); j++)
                    {
                        if (data[row, i].CompareTo(data[row, j]) > 0)
                        {
                            Swap<double>(ref data[row, i], ref data[row, j]);
                        }
                    }
                }
            }
        }
        void Swap<T>(ref T a, ref T b)
        {
            T temp = a;
            a = b;
            b = temp;
        }
        void SwapRows(ref double[,]data, int i, int j)
        {
            for (int k = 0; k < data.GetLength(1); k++)
            {
                Swap<double>(ref data[i, k], ref data[j, k]);
            }
        }
    }

} 
```

代码不是最好的（还没有喝杯茶），但应该做你所追求的。

这是一个更好的解决方案（不使用二维数组，而是使用可以轻松转换为/从此类数组转换的结构）：

唱 System.Diagnostics；

```
namespace StackOverflow.Demos
{

    class Program
    {

        public static void Main(string[] args) 
        {
            new Program();
            Console.WriteLine("Done");
            Console.ReadKey();
        }
        Program()
        {
            List<List<double>> data = GenerateData(5, 5).ToList<List<double>>();
            OutputData(data,"Before");
            foreach (List<double> item in data)
            {
                item.Sort();
            }
            data.Sort(CompareListOfDoubles);
            OutputData(data,"After");
        }

        private IEnumerable<List<double>> GenerateData(int index1, int index2)
        {
            Random rnd = new Random(DateTime.UtcNow.Millisecond);
            List<double> result;
            for (int i = 0; i < index1; i++)
            {
                result = new List<double>(index2);
                for (int j = 0; j < index2; j++)
                {
                    result.Add(rnd.NextDouble() * 2 - 1);
                }
                yield return result;
            }
        }
        private void OutputData(List<List<double>> data, string message)
        {
            Console.WriteLine(message);
            foreach (List<double> list in data)
            {
                foreach (double datum in list)
                {
                    Console.Write(datum);
                    Console.Write("\t");
                }
                Console.WriteLine();
            }
        }
        static int CompareListOfDoubles(List<double> a, List<double> b)
        {
            for (int i = 0; i < a.Count; i++)
            {
                if (i > b.Count) return -1;
                if (a[i] > b[i]) return -1;
                if (a[i] < b[i]) return 1;
            }
            if (b.Count > a.Count) return 1;
            return 0;
        }
        double[,] ConvertListListDoubleTo2DArray(List<List<double>> data)
        {
            double[,] result = new double[data.Count, data[0].Count];
            for (int i = 0; i < result.GetLength(0); i++)
            {
                for (int j = 0; j < result.GetLength(1); j++)
                {
                    result[i, j] = data[i][j];
                }
            }
            return result;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:25:11.973

获取随机数很简单：

```
Random rnd;

for (int y = 0; y < h; y++)
    for (int x = 0; x < w; x++)
        array[y][x] = l - rnd.Next(2 * l + 1); 
```

`Random.Next()`将返回 0 和给定参数之间的随机值（不包括参数；这是 的原因`+ 1`）。

2D 数组可以像 1D 数组一样排序，它只取决于您要如何处理多行，例如它只是为了显示还是您想为自己排序每一行等。

# c - 加起来为 X 的给定数字的组合

> ID：13668756
> 
> 赞同：0
> 
> 时间：2012-12-02T11:18:59.943
> 
> 标签：c, combinations

虽然它不应该真的很困难，但我一直坚持这一点。我需要在 C 中创建一个函数，计算并显示给定数字的所有可能组合（不重复），其中每个组合的数字（仅从 1 到 9）在相加时给出指定的总和。

我想这不是最清楚的解释，所以这里有一个例子：计算所有 5 个数字（从 1 到 9）的集合，加起来为 28。

如果有人能解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:18:34.637

由于只有 512 种不同的选择，您可以轻松地预先计算结果。

预计算：

*   准备一张空地图(sum => set(set(digit)))，命名为`lookup`.
*   对于`subset`(1..9) 中的每一个
    *   计算其`sum`.
    *   如果`lookup`没有 key `sum`，则创建一个新条目，一个空集。
    *   添加`subset`到`lookup[sum]`

要查找`sum`：

*   如果`lookup`有 key `sum`，则返回（副本）该条目。否则返回一个空集。

* * *

为了解决 C 的一些低级问题：

map int=>x 只是一个数组。一组 x 也只是一个数组 + 长度。

映射的数组可以作为静态分配，因为您已经知道最大的键 45。

您也可以预先估计最大的集合，或使用动态分配（更有效）。如果您不关心空间，您可以轻松过度分配（最多 512 个条目）。我想你不想过度分配这么多，所以你也可以学习如何动态分配。

一组数字可以表示为 9 位位掩码（内存中的 16 位）。然后他们很容易列举。

的实际类型草图`lookup`：

```
typedef setOfDigits int16;

struct setOfSets{
  setOfDigits* data;
  int16 count; //the actual amount of sets in the set
  int16 space; //the size of the allocated array
}

setOfSets lookup[46]; 
```

的实际类型的草图`lookup`，没有动态分配或`struct`s：

```
int16 lookup[46][512];
int16 lookupLength[46]; 
```

请注意，如果您 equate `space:=count`，那么您永远不会过度分配，但您经常重新分配，这更容易实现但可能效率低下（但代码运行一次，所以嘿）

当然，高级语言（甚至 C++）本身具有动态数组（javascript）或通过标准库（C++、Java）。在 C 中，您必须依赖`realloc`.

# java - 从插件库目录中分离外部 jars

> ID：13668760
> 
> 赞同：0
> 
> 时间：2012-12-02T11:19:12.367
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我有一个依赖于外部 jar 文件的插件。我已经创建了一个更新站点来将插件安装到任何 Eclipse 中。

这些外部 jar 文件随插件一起提供。

我想分离这些外部依赖项，以便插件在安装过程中需要它们并在安装时获取它们。或在远离插件 jar 文件的特定位置搜索它们

那可能吗？如果是这样，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:27:55.723

为每个外部 jar 创建单独的插件？

就像 Eclipse 处理 Apache 组件之类的方式一样。

# ada - 替换表格中的字符 - ADA

> ID：13668763
> 
> 赞同：1
> 
> 时间：2012-12-02T11:19:49.637
> 
> 标签：ada, tabular

我创建了一个表格（ 62 x 35 ），表格中有字符。我试图用其他人从中间替换 10 x 10 表中的字符。

例如，如果我有一个看起来像这样的表： (62 x 35)

```
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
############################################################## 
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
############################################################## 
```

我希望能够加载包含 (10x10) 的文件：

```
//////////
//////////
//////////
//////////
//////////
//////////
//////////
//////////
//////////
////////// 
```

以便此文件中的字符替换先前创建的表中的字符

即有一张看起来像的桌子

```
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##############################################################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##########################//////////##########################
##############################################################
##############################################################
##############################################################
##############################################################
############################################################## 
```

我认为我想要做的不是很清楚，所以如果您想了解更多详细信息，请询问。

```
procedure Grid_Pilliers(A: out Grid) is  -- creates grid with pilliers --
begin
   for I in 0..31 loop
      for J in 0..75 loop
         if (I mod 4 = 1 or I mod 4 = 0) and (J mod 4 = 1 or J mod 4 = 0) then
            A(I,J) := true ;
         else
            A(I,J) := false ;
         end if ;
      end loop ;
   end loop ;
end Grid_Pilliers ;

procedure New_Grid_Random_Fill(A : in out New_Grid) is

   type Numero is range 0 .. 1;
   package Grid_Random is new Ada.Numerics.Discrete_Random (Numero);
   use Grid_Random;
   Random_Number : Numero;
   G : Generator;

begin
   Reset (G);
   for I in A'Range(1) loop
      for J in A'Range(2) loop
         Random_Number := Random (G);
         A(I,J) := (Random_Number = 1);
      end loop;
   end loop;
end New_Grid_Random_Fill; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:01:38.183

您可能应该使用切片...但是对于这个示例，我将使用一对 for 循环。假设您将表类型 ( `Grid`) 定义为`Array (Positive Range <>, Positive Range <>) of Character`...

```
procedure copy_into( Working : in out Grid; subimage : in Grid;
                     Offset_X, Offset_Y : Natural ) is
begin
 -- insert checks for subimage lengths [plus offsets]
 -- to be less than Working's lengths.

 for index_x in subimage'Range(1) loop
   for index_y in subimage'Range(2) loop
     Working(index_x+offset_x, index_y+offset_y):= subimage(index_x, index_y);
   end loop;
 end loop;
end copy_into; 
```

要获得偏移量很简单：

offset_x = big_grid_width + small_grid_width / 2。

offset_y = 以上，但使用高度。

# twitter-bootstrap - Bootstrap响应式样式表打破了跨度宽度？

> ID：13668764
> 
> 赞同：0
> 
> 时间：2012-12-02T11:19:50.427
> 
> 标签：twitter-bootstrap, responsive-design, grid-system

![在此处输入图像描述](../Images/0eb8670d1b5076918fe7c73b4e05df28.png)忙于实施包含响应式 CSS 文件的 Twitter Bootstrap，但这会导致我的 span 出现问题。整个宽度应该达到 span12，因此 6 * span2 也应该这样做。

现在这是有趣的部分。如果 bootstrap-responsive.css 没有加载，它确实有效，但是当我加载响应文件时，最后一个 span 浮动到左下角。

起初我以为它可能是我的边界，但我删除了它们，它仍然漂浮到底部。

```
 <div class="row" style="border: 1px solid green">
                <div class="container" style="border: 1px solid blue">
                    <div class="span2" style="border: 1px solid red">Foo!</div>
                    <div class="span2" style="border: 1px solid red">Bar!</div>
                    <div class="span2" style="border: 1px solid red">Baz!</div>
                    <div class="span2" style="border: 1px solid red">Foo!</div>
                    <div class="span2" style="border: 1px solid red">Bar!</div>
                    <div class="span2" style="border: 1px solid red">Baz!</div>
                </div>
            </div> 
```

应该可以加载两个 CSS 文件并获得一个不错的布局，对吧？不？

我找不到任何其他表明类似结果的问题。我的 Bootstrap CSS 文件未修改，而且我还没有构建自己的样式表，因此我认为这不是我做错的事情。

有任何想法吗？

谢谢！

科布斯

编辑：上传截图以获取更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:49:42.630

*您可以在下面尝试此代码，使用bootstrap-responsive.css*应该没有任何问题

 *```
<div class="row" style="border: 1px solid green">
  <div class="container" style="border: 1px solid blue; width:100%">
   <div class="span2" style="border: 1px solid red">Foo!</div>
   <div class="span2" style="border: 1px solid red">Bar!</div>
   <div class="span2" style="border: 1px solid red">Baz!</div>
   <div class="span2" style="border: 1px solid red">Foo!</div>
   <div class="span2" style="border: 1px solid red">Bar!</div>
   <div class="span2" style="border: 1px solid red">Baz!</div>
</div>
</div> 
```

**更新：**

```
<div class="row-fluid" style="border: 1px solid green">
<div class="container" style="border: 1px solid blue">
<div class="span2" style="border: 1px solid red">Foo!</div>
<div class="span2" style="border: 1px solid red">Bar!</div>
<div class="span2" style="border: 1px solid red">Baz!</div>
<div class="span2" style="border: 1px solid red">Foo!</div>
<div class="span2" style="border: 1px solid red">Bar!</div>
<div class="span2" style="border: 1px solid red">Baz!</div>
</div>
</div> 
```*

# php - 转储匹配表php

> ID：13668766
> 
> 赞同：1
> 
> 时间：2012-12-02T11:20:27.073
> 
> 标签：php, mysqldump

如果主题的前缀与使用 php.ini 的给定子字符串匹配，我正在尝试转储我的一些表。尝试使用 php`system`并没有带来任何结果，因为没有创建转储文件。我想使用命令行功能`exec`来实现我的结果，我正在做以下

```
 exec('E:/xampp/mysql/bin/mysqldump '. $dbname .' -h '. $this->host .' -u ' .$this->user . ' $(E:/xampp/mysql/bin/mysql -u '. $this->user . ' -p ' . $dbname .' -Bse "show tables like \'wp_dev%\'")> mydb.sql 2>&1', $output); 
```

但是要子查询过滤掉匹配表的内容会返回以下错误

```
mysqldump: unknown option '-s' 
```

似乎我在语法上遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:23:38.900

像这样使用，它将只转储列出的表。

```
exec('E:/xampp/mysql/bin/mysqldump -h '. $this->host .' -u ' .$this->user . ' -p'. $this->password .' '. $dbname .' table1 table2  > /path_to_file/dump_file.sql'); 
```

# php - MySQL 使用 LIKE 并且没有得到正确的结果

> ID：13668771
> 
> 赞同：0
> 
> 时间：2012-12-02T11:21:13.207
> 
> 标签：php, mysql, mysqli

希望对比我聪明的人提出一个简单的问题 - 从表中选择行时，我的 MySQL 语法有问题。

```
$query="SELECT auth, first_name, last_name FROM main_user
    WHERE (auth='1' OR auth='2'
      AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%')
    LIMIT 10"; 
```

我基本上想根据用户输入来检索客户端名称，用户输入的“身份验证”设置为 1 或 2。

我目前的结果似乎正在带回只有“auth”值匹配的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:24:40.770

```
auth='1' OR auth='2' AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%' 
```

这相当于

```
(auth='1') 
OR (
       auth='2' 
   AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%'
   ) 
```

你应该把它写成

```
(
    auth='1' 
OR  auth='2'
)  
AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:24:48.220

尝试将它们`OR`放在括号中，如下所示：

```
SELECT 
  auth, 
  first_name, 
  last_name 
FROM main_user
WHERE (auth = '1' OR auth = '2')
  AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%')
LIMIT 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:24:43.313

你`()`搞错了。尝试

```
SELECT auth, first_name, last_name
FROM main_user
WHERE (auth = '1' OR auth = '2')
AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%'
LIMIT 10 
```

或更简单

```
SELECT auth, first_name, last_name
FROM main_user
WHERE auth in ('1','2')
AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%'
LIMIT 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T12:05:55.007

请尝试执行下面提到的 sql 选择查询。

我在下面的 sql 查询中用 IN 替换了 OR 运算符

```
 $query="SELECT auth, first_name, last_name FROM main_user
WHERE auth in ('1','2')
  AND CONCAT(first_name,' ',last_name) LIKE '%".$client_name."%')
LIMIT 10"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T11:24:24.217

您需要将两个 OR 子句放在括号中：

```
WHERE ( ( auth='1' OR auth='2' )
     AND ... 
```

# android - 一些操作后的密码活动

> ID：13668773
> 
> 赞同：0
> 
> 时间：2012-12-02T11:21:33.960
> 
> 标签：android, android-activity

之后我需要显示 PIN 码活动（我们有很多活动的应用程序）：

1.  用户按下硬件按钮“主页”并返回应用程序。
2.  列表项应用程序屏幕进入睡眠模式然后返回。

我需要使用哪些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:51:33.573

捕获home键事件（KeyEvent.KEYCODE_HOME）和睡眠事件（Intent.ACTION_SCREEN_OFF），使用变量记录。返回应用程序活动时判断变量并显示您的 PIN 码活动。

# iis - 在 WIX 安装程序中创建应用程序池

> ID：13668777
> 
> 赞同：3
> 
> 时间：2012-12-02T11:22:08.010
> 
> 标签：iis, wix

我正在使用 WIX 创建具有自定义应用程序池设置的网站。安装后，我的新网站使用默认应用程序池，而不是使用我在安装期间创建的网站。我可以找到虚拟目录指向新创建的应用程序池的方法，但似乎`iis:WebSite`没有设置应用程序池的属性。

这是我的代码：

```
<iis:WebSite Id="MyWebSite" Description='MyWebsiteDesc' SiteId='*' Directory='MyWebFolder'>
  <iis:WebAddress Id="AllUnassigned" Port="80" />
</iis:WebSite>

<util:User Id="MyAppPoolUser" 
           CreateUser="no" 
           Name="[APPPOOL_USER]" 
           Password="[APPPOOL_PASS]" 
           Domain="." />

<iis:WebAppPool Id="MyAppPool" 
                Name="[WEB_APP_NAME]" 
                Identity="other" 
                User="MyAppPoolUser" 
                ManagedRuntimeVersion="v4.0" 
                ManagedPipelineMode="Integrated"  /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:02:16.830

用于`IIS:WebVirtualDir/IIS:WebApplication`指向您的 AppPool。

希望，这可能对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:09:49.027

您已经创建了一个应用程序池，但您只创建了一个网站。要使用应用程序池，您必须在网站内创建一个虚拟目录或应用程序。WebVirtualDir 和 WebApplication 元素都有一个 WebAppPool 属性，您可以使用该属性来配置 IIS 以使用您正在创建的应用程序池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T14:41:57.717

我最近遇到了这个问题。我在网站内的所有 Web 应用程序都分配了我创建的新应用程序池，但基础网站具有 DefaultAppPool。

这是将应用程序池分配给基础网站的技巧

```
 <iis:WebAppPool Id="MyAppPool" Name="YourAppPoolName" Identity="applicationPoolIdentity" />

     <iis:WebSite Id='MyWebSite' Description='Dummy' Directory='APPLICATIONFOLDER'>   

    <iis:WebApplication Id="AnyId" Name="Dummy" WebAppPool="MyAppPool" />  

 </iis:WebSite> 
```

# delphi - DataSnap 主/从关系 - 帖子引发异常，并显示消息“未找到相应的主记录”

> ID：13668783
> 
> 赞同：2
> 
> 时间：2012-12-02T11:22:50.787
> 
> 标签：delphi, delphi-xe2, datasnap

[这个问题](https://stackoverflow.com/questions/10297744/delphi-dbexpress-parent-child-no-corresponding-master-record-found)的副本，但由于没有接受答案，我想也许有一个解决方法。我的服务器上有两个`TSQLTable`组件`datasnap`，它们处于主/从关系中，一个`TDataSetProvider`链接到主表。在我的客户端应用程序中，有两个`TClientDataSet`组件，其中一个自然嵌套在另一个中。当我尝试将*新*记录发布到详细数据集时，即使在调用之前`ApplyUpdates()`，也会引发上述异常。这真的是 XE2 中的错误吗？如何解决它？

这是为表生成的图表 SSMS： ![在此处输入图像描述](../Images/c418f8d8f6963f9b82cad0879855a247.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:29:10.887

我假设主从关系是通过 CenterID -> ID。这不能按预期工作。

Midas 内部要求在两个数据集中使用相同的字段名称来建立主从关系。给出您的布局，它会尝试使用两个表中的 ID 字段建立关系。

要解决此问题，请将 Centers 中的 ID 字段重命名为 CenterID。

# java - 无法加载类 slf4g StaticLoggerBinder

> ID：13668784
> 
> 赞同：1
> 
> 时间：2012-12-02T11:23:13.690
> 
> 标签：java, maven, slf4j

我不知道程序有什么问题。我收到了这个通知。我已经在 pom.xml 文件上正确设置了依赖项。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

pom.xml

```
..
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.7.2</version>
</dependency> 
.. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:15:54.797

避免此警告的一种简单方法是将以下运行时依赖项添加到项目的 POM

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.7.2</version>
    <scope>runtime</scope>
</dependency> 
```

这将提供一个简单的日志实现，它将打印您的 INFO 级别语句。您将很快超越此解决方案，但它允许您有时间研究您的代码最终将使用的日志记录框架。

[SLF4J](http://www.slf4j.org/)是一个框架，旨在隐藏日志记录的实际实现细节。例如，在运行时，您可以决定使用[log4j](http://www.slf4j.org/legacy.html)、[commons logging](http://www.slf4j.org/legacy.html)、[Java logging](http://www.slf4j.org/legacy.html)或[logback](http://logback.qos.ch/)。

# 更新 1：如何重现问题

以下 Java 项目重现了您的问题：

```
|-- pom.xml
`-- src
    `-- main
        `-- java
            `-- HelloWorld.java 
```

从 Maven 运行程序如下：

```
$ mvn exec:java -Dexec.mainClass=HelloWorld
..
..
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

一旦将缺少的依赖项添加到 POM 中，您的程序就会有一个日志记录实现，它可以使用它来发出它的日志记录语句，如下所示：

```
$ mvn exec:java -Dexec.mainClass=HelloWorld
..
..
[HelloWorld.main()] INFO HelloWorld - Java says: Hello world
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

## pom.xml

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.demo</groupId>
    <artifactId>my-project</artifactId>
    <version>1.0-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.2</version>
        </dependency> 
    </dependencies>
</project> 
```

## HelloWorld.java

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HelloWorld {
    Logger log = LoggerFactory.getLogger(HelloWorld.class);

    public String speak(String speech) {
        log.info("Java says: {}", speech);

        return speech;
    }

    public static void main(String[] args) {
        HelloWorld hello = new HelloWorld();

        hello.speak("Hello world");
    }
} 
```

# 更新 2：如何创建可执行 jar

如果您将 Maven 配置为创建可执行 jar，那么它将自动使用引用 POM 文件中列出的依赖项的类路径打包 jar。

```
$ mvn clean package
$ java -jar target/my-project-1.0-SNAPSHOT.jar
[main] INFO HelloWorld - Java says: Hello world 
```

## pom.xml

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.demo</groupId>
    <artifactId>my-project</artifactId>
    <version>1.0-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.2</version>
        </dependency> 
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.7.2</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <classpathPrefix>lib/</classpathPrefix>
                            <mainClass>HelloWorld</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>copy</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/lib</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:58:59.967

您只有 API。提供一个实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T11:34:54.680

您的类路径中似乎缺少 slf4j jar。下载[slf4j 库](http://www.slf4j.org/dist/slf4j-1.7.2.tar.gz)并将其添加到您的项目类路径中。

# uitextfield - 在 UICollectionView 的 reloadData 之后，UItextField 不能成为第一响应者

> ID：13668785
> 
> 赞同：1
> 
> 时间：2012-12-02T11:23:18.010
> 
> 标签：uitextfield, uicollectionview, first-responder

我是stackoverflow和objective c的新手，所以请提前原谅我:)

我有一个 UIcollectionView，当单击“添加文件夹”时显示一个虚拟文件夹列表，一个单元格被添加到集合中。该单元格内部有一个 UITextField，我制作了 FirstResponder，它会弹出虚拟键盘，用户可以编辑文件夹的名称。在我添加的每个文件夹上都很好用。

问题是当用户点击文件夹时。

我确实 reloadData 到 CollectionView （因为我现在想显示点击文件夹的内容），之后我添加的每个文件夹都不会弹出虚拟键盘，并且 UITextField 不会成为第一响应者？

有人知道为什么会这样吗？

另一个有趣的事情是，当我点击集合（一个没有单元格的空白区域）然后尝试创建一个新文件夹时，键盘返回..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:39:45.907

我的问题是我的 UITextField 位于单元格本身上，而 UICollectionView 正在使用可重复使用的单元格。所以每次我给我一个不同的单元格（一个可用的现有单元格和一个新的单元格时）并且无法找到将我的 becomeFirstRisponder 发送到哪里。我通过在创建时为每个单元格提供一个唯一标识符并在发送 becomeFirstRisponder 命令时寻找正确的标识符来解决它。

# c++ - 向单词添加数字以调用变量

> ID：13668790
> 
> 赞同：3
> 
> 时间：2012-12-02T11:23:57.450
> 
> 标签：c++

请善待我是一个完全的新手。

我有一个从 num1 到 num90 的变量（字符串）列表。我需要通过将 int 中的数字添加到单词 num 来从函数中调用它们。

任务是将数字从“跳转到 C++”中转换为单词......我可能不会以“正确”的方式进行，但这部分已经阻止了我一段时间！

我正在尝试这样：

```
 #include <iostream>
    #include <string>

    using namespace std;

    // Hard code numbers to 20 and then in tens to 90
    string num1 = "one";
    string num2 = "two";
    string num3 = "three";
    string num4 = "four";
    string num5 = "five";
    string num6 = "six";
    string num7 = "seven";
    string num8 = "eight";
    string num9 = "nine"; 
```

等等...高达 90

```
 int main ()
    {

    // Break the number down into three digit blocks
    int num = 0;

    cout << "Please enter the number: ";
    cin >> num;

  while (num > 999)
    {
int digit = (num % 1000);
num = ((num - digit)/1000);
//cout << digit << '\n';
//cout << num << '\n';

// For each block of numbers work out hundreds,

if (digit > 100)
{
    int i = digit;
    int j = (i % 100);
    cout << num.append(j) << " hundred";
} 
```

我需要将存储在“j”中的数字标记到单词 num 上，以便调用字符串 num*。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:31:47.747

当然，使用地图：

```
#include <map>
#include <string>
#include <iostream>

std::map<int, std::string> words { { 1, "one" }, { 2, "two" }, { 3, "three" } };

int main()
{
    std::cout << words[1] << std::endl;
} 
```

您可能必须处理一些特殊情况（最多二十个？），并且您需要一个“一百”等词。如果您想使其国际化，您将不得不更加努力地思考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:48:42.897

> 我需要将存储在“j”中的数字标记到单词 num 上，以便调用字符串 num*。

这种方法的问题是你在代码中使用的任何变量名都没有被编译：当程序运行时，它会操纵你的变量的值，但它不知道也不关心你决定使用名称“num3”而不是“numero3”或“foobar”。

如果您想在数字（3）和字符串（“三”）之间建立链接，那么您可以使用 Vector（正如[@Mark](https://stackoverflow.com/a/13668853/98806)建议的那样，尽管在 20 之后您会遇到问题）或者更好的是 Map（如[@ Kerrek](https://stackoverflow.com/a/13668864/98806)建议）：这些将起作用，因为在这两种情况下，字符串都是由变量的*值*（例如**digit** in的值`lookup[digit]`或文字值**1** in `words[1]`）而不是变量的*名称*引用的。

* * *

编辑：

出于兴趣，这里有一个使用'if'和'switch'的版本......

```
#include <iostream>
#include <string>
using namespace std;

string units2word(int units){
    switch (units){
        case 0: return "zero";
        case 1: return "one";
        case 2: return "two";
        case 3: return "three";
        // etc ...
        case 18: return "eighteen";
        case 19: return "nineteen";
    }
}

string tens2word(int tens){
    switch(tens){
        case 2: return "twenty";
        case 3: return "thirty";
        // etc ...
        case 9: return "ninety";
    }
}

string num2words(int num) {
    if (num > 99 && num%100 == 0) return units2word(num/100) + " hundred";
    if (num > 99) return units2word(num/100) + " hundred and " + num2words(num%100);
    if (num < 20) return units2word(num);
    if (num%10 == 0) return tens2word(num/10);
    return tens2word(num/10) +"-"+ units2word(num%10);
}

int main(int argc, char *argv[]) {
    int num = -1;
    while( num < 0 || num > 999){
        cout << "Please enter a number between 0 and 999: ";
        cin >> num;
    }
    cout << "You typed: " << num2words(num) << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:30:36.763

你应该看看使用 std::vector。这为您提供了一个带有索引的变量

```
std::vector<std::string> lookup;
lookup.push_back( "zero" );   // starts at lookup[0]

lookup.push_back( "one" );
lookup.push_back( "two" );
// etc

// then

std::cout << lookup[digit] << std::endl;
std::cout << lookup[num] << std::endl; 
```

# html - 在 html 页面中包含一个 gif

> ID：13668792
> 
> 赞同：4
> 
> 时间：2012-12-02T11:24:06.857
> 
> 标签：html, gif

我不知道为什么没有正确加载简单的 gif 图像。在 html 代码中，我有通常的

```
 <img src="/img/loading.gif" alt="Loading" title="Loading" /> 
```

并且该文件在该文件夹中。奇怪的是，如果我把图像放在那里`/img/logo.png`，图像就会正确加载。

文件名是正确的，我什至复制并粘贴了它以重命名原始文件。

PS 在 Firefox 12、Safari 6.0.2 Chrome 23.0.1271.95 上测试（均适用于 Mac）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:53:14.090

这可能是一个损坏的 gif。您的代码应该与其他一些 gif 一起使用。如果您真的想让损坏的 gif 正常工作，请尝试在图像编辑器程序中打开它，然后将其重新保存为 gif（或任何其他格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:48:10.480

我认为问题出在 gif 文件上，可能以某种方式损坏。我从一个随机资源网站得到它并从中下载。

我已经尝试使用从`http://www.ajaxload.info/`现在开始获得的新文件，但代码未更改，它可以正常工作。

编辑：“损坏”的 gif 文件在系统的其他地方运行良好（例如 quicklook）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:31:39.107

愚蠢的问题，但是你的 gif 是什么样的？它是透明的，还是白色背景下的白色？

诊断问题的一种可能方法是（在 Chrome 或 Firefox 中）按 F12 以调出开发人员工具并查看您的 img 元素以查看图像是否已加载到 DOM 中。

# c# - C# 中的 XMLWriter 问题

> ID：13668795
> 
> 赞同：0
> 
> 时间：2012-12-02T11:24:29.427
> 
> 标签：c#, xml, directory

我的问题是我不能根据给定字段的文本保存 XML 的文件名：这是行：

```
XmlTextWriter writer = new XmlTextWriter(@"{0}\ops\op-" + OpName.Text.Replace(" ", "_") + ".xml", 
                                         System.Text.Encoding.UTF8); 
```

我得到的问题是它找不到路径：`C:\[stuff]\{0}\op\op-.xml`如果我删除`{0}`（在代码中）我得到`can't find C:\op\op-.xml`

我需要它来查找`C:\[stuff]\op\`，以便它可以在该文件夹中创建文件。

我怎么能改变这条线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:33:28.507

`{0}`在你的道路上代表什么？`XmlTextWriter`构造函数采用文件路径，而不是格式化字符串。如果您分步准备文件路径，它将更具可读性，例如。通过利用[Path.Combine](http://msdn.microsoft.com/en-us/library/dd782933.aspx)方法：

```
var fileName = string.Format("op-{0}.xml", OpName.Text.Replace(" ", "_"));
var rootDir = /* this would be {0} from your original example */
var filePath = Path.Combine(rootDir, "ops", fileName);

XmlTextWriter writer = new XmlTextWriter(filePath, System.Text.Encoding.UTF8); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:30:22.880

```
string additionalStr=OpName.Text.Replace(" ", "_");
if (string.IsNullOrEmpty(additionalStr))
{
    return;
    //or throw error or make default file name depending on the required logic
}
string directoryPath=String.Format(@"{0}\ops\",dirPrefix);
bool isDirectoryExists=Directory.Exists(directoryPath);
if (!isDirectoryExists){     
    //required logic. for example set default directory
}
string fileName=additionalStr+".xml";
string filePath=Path.Combine(directoryPath,fileName);
XmlTextWriter writer = new XmlTextWriter(filePath,System.Text.Encoding.UTF8); 
```

# c++ - 重载运算符 <

> ID：13668797
> 
> 赞同：0
> 
> 时间：2012-12-02T11:24:42.620
> 
> 标签：c++, operator-overloading

各位高手，再次在网上练习的时候，又遇到了一个问题。这是关于功能模板的。我能够创建模板，但我不确定如何重载适当的运算符。请指教。

问题

函数模板**maximumOfTree**返回相同参数化类型的 3 个元素中的最大值。函数模板可以应用于什么类？编写一个带有**name、model、mass**字段的**trainEngine**类。重载适当的运算符，以便将**最大**的三个函数模板应用于三个**trainEngine**对象。

 ******至今 ？

```
 template<class T>
 bool largestOfThree(T t1, T t2, T t3){
  if(t1<t2&&t2<t3){
  return true;
   }else{
    return false;
  }
 } 
```

火车引擎

```
class trainEngine {
private:
string name;
string model;
string mass;
public:
friend bool operator<(trainEngine const& lhs) {
if (lhs.name<lhs.model&&lhs.model<lhs.mass){
return true;
} 
```

};

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:26:05.080

A`friend operator<`将是非成员，因此应该是二进制的。此外，您忘记了返回类型。您可能想要：

```
friend bool operator<(trainEngine const& lhs, trainEngine const& rhs) {
    // implementation
} 
```

这将转到您的`operator<`声明当前所在的位置。

[这](http://jcatki.no-ip.org:8080/fncpp/OperatorOverloading)是运算符重载的惯用签名列表，以及对 juanchopanza 在评论中提到的内容的更详细解释。请注意，如果非成员运算符被标记为朋友，则可以在类主体中定义它们。（如果你这样做，它们仍然是非成员函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:27:17.137

如果你重载运算符' `<`'，你也应该重载运算符' `>`'

而且您还必须编写返回类型 bool 。

```
 friend bool operator<(trainEngine const& obj1, trainEngine const& obj2) 
```

事实上，在大多数代码中，习惯上更喜欢使用`<`over`>`但更一般地说，总是重载完整的相关运算符集；在您的情况下，这也可能是`==`,`!=`和.`<=``>=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:38:58.113

请注意，**目前您的实现仅取决于右侧**（您称之为 lhs！）。这肯定不是你想要的。

我想你想要这样的东西：

```
bool operator<(trainEngine const& rhs) {
  if(name!=rhs.name) 
    return(name<rhs.name);
  if(model!=rhs.model)
    return (model<rhs.model);
  return (mass<rhs.mass);
} 
```

或**朋友版本**：

```
//within the class
friend bool operator<(trainEngine const& lhs, trainEngine const& rhs);

//outside the class
bool operator<(trainEngine const& lhs, trainEngine const& rhs) {
  if(lhs.name!=rhs.name) 
    return(lhs.name<rhs.name);
  if(lhs.model!=rhs.model)
    return (lhs.model<rhs.model);
  return (lhs.mass<rhs.mass);
} 
```******

# javascript - 调用回调函数后，焦点或选择应恢复为回调开始之前的状态

> ID：13668799
> 
> 赞同：-1
> 
> 时间：2012-12-02T11:24:46.903
> 
> 标签：javascript, jquery, asp.net, .net

我正在寻找有助于在调用回调函数后恢复焦点或选择的 javascript 或 JQuery。页面中的控件可以是 HTML 控件或服务器控件。

每五秒后定期调用一个回调函数。这会带走控件的焦点，否则选择会丢失。请提供 ASP.net 的代码。

我已经尝试了三天，但无法得到解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:31:35.327

您是否尝试过使用[`blur`](http://api.jquery.com/blur/)事件来记住最后一个具有焦点的元素，然后[`focus`](http://api.jquery.com/focus/)在回调完成后调用它？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T14:19:47.610

为什么不编写自己的脚本来存储具有焦点的控件的 id 并将其保存在隐藏字段中，在页面加载后重用它。

快乐编码！！！

# bash - 如何在一个 bash 文件中运行多个命令？

> ID：13668801
> 
> 赞同：0
> 
> 时间：2012-12-02T11:24:51.413
> 
> 标签：bash

我有以下脚本：

```
#!/bin/bash        
PATH=...
echo 'Syncing database dumps'
rsync ssh user@XX.XXX.XXX.XX:/test/ /test
echo 'Creating symlink'
ln -s test /tmp/test 
```

只运行第一个命令和所有回显。如果我注释掉第一个命令，则运行符号链接命令：

```
#!/bin/bash        
PATH=...
echo 'Syncing database dumps'
#rsync ssh user@XX.XXX.XXX.XX:/test/ /test
echo 'Creating symlink'
ln -s /test /tmp/test 
```

其余的不运行。任何想法为什么？

编辑根据最近的评论，在符号链接命令中添加了 -v 选项。现在我可以看到所有命令都运行了。但是它们不会按照设置的顺序运行。符号链接命令将在 rsync 命令完成之前运行。如何设置顺序以便符号链接命令仅在 rsync 命令完成后运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:03:00.660

试试 rsync 的 --blocking-io 选项，即

```
rsync ssh --blocking-io user@XX.XXX.XXX.XX:/test/ /test 
```

或者，如果您的协议仍然是 ssh，您可以使用 scp

```
scp user@XX.XXX.XXX.XX:/test/ /test 
```

# jquery - 了解 jquery 片段、窗口。*

> ID：13668802
> 
> 赞同：1
> 
> 时间：2012-12-02T11:25:00.880
> 
> 标签：jquery

我正在调试一段 jquery，发现这个片段我不明白。

有人介意分解它以便我可以研究各个部分吗？

```
 window.specific = $('.' + specific_class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:28:37.570

这会将窗口对象的“特定”属性设置为由 specific_class 变量定义的类。

假设 specific_class 变量包含文本“myClass”，那么 window.specific 将等于：-

```
window.specific = $('.myClass'); 
```

这又将引用 myClass 类的所有实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:26:57.100

`specific`在函数外部的“窗口范围”中定义。`specific_class`里面会有一些类名，它在 jQuery 选择器中使用，匹配的元素被分配给`window.specific`.

**[现场演示](http://jsfiddle.net/fhckh/)**

```
window.specific = "";
specific_class =  'someclass';

function myfun()
{
    window.specific = $('.' + specific_class);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:27:04.707

基本上它寻找一个类...

`.`是类选择器的参数。`specific_class`是一个引用类名的变量。查找该变量，您会发现该类的含义。

# css - 固定社交按钮 div 相对于另一个 div 或容器的 CSS 定位

> ID：13668807
> 
> 赞同：0
> 
> 时间：2012-12-02T11:25:36.170
> 
> 标签：css, positioning, fixed

老实说，在这个问题之前，我还以为我实际上对 css 定位有所了解，但看起来我不知道。

这就是我所拥有的，我需要将社交按钮 div 放置在容器的左侧并使其固定以便它不会移动，但直到该 div 的底部与它所在的容器的底部对齐已定位，则需要进一步滚动。我不知道我是否在解释我自己，以便每个人都能理解我的意思所以请看下面的[例子](http://www.ehow.com/info_8493383_tips-keeping-christmas-tree-alive.html)

带有所有 facebook、twitter、G+ 和打印按钮的 div 是可滚动的，直到它接近为止。在浏览器顶部下方 10px 处，然后它停止并仅在其底部与放置它的容器对齐后才继续滚动。

请帮忙，我有点喜欢它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:13:52.923

这不是一个 CSS 问题，除非您愿意使用`position: sticky`，这可能不是您想要的。[（在这里](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)阅读）

如果您正在寻找 jQuery 解决方案，那么您可以使用[ScrollFollow](http://kitchen.net-perspective.com/open-source/scroll-follow/)，您可以在其中为固定滚动项指定容器父级。

# facebook - 隐藏/取消隐藏帖子不起作用

> ID：13668808
> 
> 赞同：1
> 
> 时间：2012-12-02T11:25:42.880
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 **facebook-graph-api**隐藏帖子。

$mydata = $facebook->api("/$UId_$posId",'POST',array('access_token' => $page_access_token,'is_hidden'=>'true'));

但我收到此错误：

未捕获的 OAuthException: (#100) 无效的帖子 ID

# c# - 如何在自定义绘图控件中制作选择方法？

> ID：13668814
> 
> 赞同：0
> 
> 时间：2012-12-02T11:26:10.820
> 
> 标签：c#, algorithm, colors

我正在创建一个从图片框扩展的控件，并且只使用 GDI 来绘制内容。我想使用选择方法（Ctrl + A）来选择内容。怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:24:43.410

我想更改所选区域的颜色以显示它已被选中。我的解决方案是更改图片框的每个像素颜色，但速度很慢。我尝试使用 LockBits，如果我不为每个像素计算颜色，那就太好了。如何解决问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:29:22.647

我会将我的选择存储在 a 中`Rect`（假设您只想使用方形选择）。

按下 Ctrl+A 时，您只需执行类似的操作`selectionRect = new Rect(0, 0, bitmap.Width, bitmap.Height);`

# javascript - 使用 onload 和 onerror javascript

> ID：13668822
> 
> 赞同：4
> 
> 时间：2012-12-02T11:27:08.380
> 
> 标签：javascript, asynchronous, onload, onerror

```
function loadNextComic()
{
window.scrollTo( 200, 480);
img comic = new Image();
    currentComicNumber++;
    comic.src="Freqpg"+currentComicNumber+".jpg";
    comic.onload = function()
        {
        document.getElementById("comic").src="Freqpg"+currentComicNumber+".jpg";
        document.getElementById("numberOutput").innerHTML=currentComicNumber;
        }
    comic.onerror =lastComicReached();

} 
```

此代码旨在迭代网络漫画页面。如果下一页存在，它应该加载，一旦加载，就会显示。如果页面不存在，代码应该调用另一个函数，因为这表明我们可能已经到达存档的末尾。不幸的是，这段代码什么也没做。甚至滚动功能也会中断。

```
function loadNextComic()
{
window.scrollTo( 200, 480);
//img comic = new Image();
    currentComicNumber++;
    //comic.src="Freqpg"+currentComicNumber+".jpg";
    //comic.onload = function()
    //  {
        document.getElementById("comic").src="Freqpg"+currentComicNumber+".jpg";
        document.getElementById("numberOutput").innerHTML=currentComicNumber;
    //  }
    //comic.onerror =lastComicReached();

} 
```

这段带有注释掉的 img 代码的代码可以正确地处理页面，直到我用完页面（这些页面是连续且可靠地命名的），并且看到这个数字每周将如何变化，我不能简单地硬编码最后一个页码. 在查看了网站上的其他示例后，我尝试使用 img.onerror 和 onload 代码。很明显，我一直像个白痴一样摸索这个。我在一些地方读到过关于异步执行中断错误的内容，但我认为这应该可以解释这一点。

如何让 img.onload 和 onerror 函数工作？如果代码异步执行，你如何进行结构化编程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:28:57.900

您需要在更改 src 之前声明它们

此外，您正在替换 onerror，因此您需要删除 ()，除非 lastComicReached 返回一个函数

最后`img comic`不是有效的语法，你的意思是`var comic`

```
var comic = new Image(); 
comic.onload = function() {
  document.getElementById("comic").src="Freqpg"+currentComicNumber+".jpg";
  document.getElementById("numberOutput").innerHTML=currentComicNumber;
}
comic.onerror =lastComicReached; // remove the () here!!
comic.src="Freqpg"+currentComicNumber+".jpg"; 
```

# c# - 拖动超出屏幕顶部时禁用 Windows 捕捉表单

> ID：13668823
> 
> 赞同：1
> 
> 时间：2012-12-02T11:27:11.320
> 
> 标签：c#, .net, windows

我创建了一个 800x600 像素的不可调整大小的 Windows 窗体。我的问题是，当在高度小于我的表单高度的屏幕分辨率上查看表单时，我的对话框的底部被 Windows 任务栏覆盖。

我尝试通过允许用户使用以下方法从任何地方拖动表单来解决这个问题：

```
[DllImport("user32.dll")]
        static extern IntPtr DefWindowProc(IntPtr hWnd, uint uMsg, UIntPtr wParam, IntPtr lParam);
        [DllImport("user32.dll")]
        static extern bool ReleaseCapture(IntPtr hwnd);

        const uint WM_SYSCOMMAND = 0x112;
        const uint MOUSE_MOVE = 0xF012;

        public void Drag()
        {
            DefWindowProc(this.Handle, WM_SYSCOMMAND, (UIntPtr)MOUSE_MOVE, IntPtr.Zero);
        }

        private void OnMainPanelMouseDown(object sender, MouseEventArgs e)
        {
            Control ctrl = sender as Control;
            ReleaseCapture(ctrl.Handle);

            this.Drag(); // put the form into drag mode.
        } 
```

我可以将我的表单拖到任何地方，但我现在遇到了问题。Windows 不允许将任何窗口拖动到屏幕顶部边缘之外。它将窗口捕捉回屏幕顶部。

我正在寻找一种禁用此 Windows 行为的方法，至少对于我的表单而言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:40:21.673

我能够使用一个小技巧来解决这个问题。主要是处理 ResizeEnd 事件和跟踪 MouseDown 事件和 ResizeEnd 事件之间的鼠标指针位置。然后将差异添加到/减去保存在 MouseDown 事件中的初始表单的 Y 坐标，然后只需将我的表单的位置设置为该坐标。

如果有人可以提供不同的答案，我仍然愿意接受其他答案，因为这会导致某种闪烁，因为 Windows 捕捉表单和代码强制其位置之间的位置差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-19T17:36:36.770

我知道这已经很老了，但是当我为这个问题寻找一个简单的解决方案时，我发现了这个问题。

您不需要计算任何东西，只需保存一个值并再次使用它。

只需将 Forms Y Location 保存在 MouseUp 事件和 ResizeEnd 事件中，将 Forms Y Location 设置为已保存的位置。

```
int oldY;

private void Form1_MouseUp(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        oldY = this.Location.Y;
        Console.WriteLine("LMB Up");
    }
}

private void Form1_ResizeEnd(object sender, EventArgs e)
{
    this.Location = new Point(this.Location.X, oldY);
    Console.WriteLine("ResizeEnd");
} 
```

希望这可以帮助任何寻找此问题的简单解决方案的人。

# c++ - 仅使用 4 个字节将整数存储到 QByteArray

> ID：13668827
> 
> 赞同：12
> 
> 时间：2012-12-02T11:27:18.617
> 
> 标签：c++, qt, integer, qbytearray

表示一个整数需要 4 个字节。如何将 an 存储`int`在 a 中`QByteArray`以便只占用 4 个字节？

*   `QByteArray::number(..)`将整数转换为字符串，因此占用超过 4 个字节。
*   `QByteArray((const char*)&myInteger,sizeof(int))`似乎也不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-02T18:54:18.547

有几种方法可以将整数放入 a`QByteArray`中，但以下通常是最干净的：

```
QByteArray byteArray;
QDataStream stream(&byteArray, QIODevice::WriteOnly);

stream << myInteger; 
```

这样做的好处是允许您相当方便地将多个整数（或其他数据类型）写入字节数组。它还允许您使用`QDataStream::setByteOrder`.

## 更新

虽然上述解决方案可行，但用于`QDataStream`存储整数的方法在 Qt 的未来版本中可能会发生变化。确保它始终有效的最简单方法是显式设置所使用的数据格式的版本`QDataStream`：

```
QDataStream stream(&byteArray, QIODevice::WriteOnly);
stream.setVersion(QDataStream::Qt_5_10); // Or use earlier version 
```

或者，您可以完全避免使用`QDataStream`并使用`QBuffer`：

```
#include <QBuffer>
#include <QByteArray>
#include <QtEndian>

...

QByteArray byteArray;
QBuffer buffer(&byteArray);
buffer.open(QIODevice::WriteOnly);
myInteger = qToBigEndian(myInteger); // Or qToLittleEndian, if necessary.
buffer.write((char*)&myInteger, sizeof(qint32)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-01T01:38:59.383

@Primož Kralj 没有用他的第二种方法发布解决方案，所以这里是：

```
int myInt = 0xdeadbeef;
QByteArray qba(reinterpret_cast<const char *>(&myInt), sizeof(int));

qDebug("QByteArray has bytes %s", qPrintable(qba.toHex(' '))); 
```

印刷：

```
QByteArray has bytes ef be ad de 
```

在 x64 机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T02:50:28.477

最近我遇到了同样的问题，但有一点变化。我必须将一个无符号短向量存储到 QByteArray 中。由于未知原因，QDataStream 的技巧不起作用。所以，我的解决方案是：

```
QVector<uint16_t> d={1,2,3,4,5};
QByteArray dd((char*)d.data(),d.size()*sizeof(uint16_t)); 
```

取回向量的方法是：

```
QVector<uint16_t> D;
for(int i=0; i<dd.size()/sizeof(uint16_t); ++i){
  D.push_back(*(uint16_t*)(dd.data()+i*sizeof(uint16_t)) );
} 
```

# python - 替换字符串中的每个第 n 个字母

> ID：13668829
> 
> 赞同：6
> 
> 时间：2012-12-02T11:27:47.043
> 
> 标签：python, replace

我正在编写一个函数来替换字符串中的每个第 n 个字母

```
def replaceN(str, n):
   for i in range(len(str)):
     n=str[i]
     newStr=str.replace(n, "*")
     return newStr 
```

但是当我执行它时，只有第一个字母被替换为 *。我确定有一个错误，但我看不到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T11:31:52.110

单线：

```
newstring = ''.join("*" if i % n == 0 else char for i, char in enumerate(string, 1)) 
```

扩展：

```
def replace_n(string, n, first=0):
    letters = (
        # i % n == 0 means this letter should be replaced
        "*" if i % n == 0 else char

        # iterate index/value pairs
        for i, char in enumerate(string, -first)
    )
    return ''.join(letters) 
```

```
>>> replace_n("hello world", 4)
'*ell* wo*ld'
>>> replace_n("hello world", 4, first=-1)
'hel*o w*orl*' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:06:47.523

您的代码有几个问题：

首先，`return`放错地方了。它在 for 循环内部，但应该在外部。接下来，在以下片段中：

```
for i in range(len(str)):
    n=str[i]
    newStr=str.replace(n, "*") 
```

你作为第二个参数传递给你的函数的`n`那个​​在每个循环步骤中都会被覆盖。因此，如果您的初始字符串是“abcabcabcd”并且您将 n=3（一个数字）作为第二个参数传递，那么您的循环所做的是：

```
n="a"
n="b"
n="c"
... 
```

所以从不使用值 3。此外，在您的循环中，仅保存字符串中完成的最后一次替换：

```
n="a"
newStr="abcabcabcd".replace("a", "*") --> newStr = "*bc*bc*bcd"
n="b"
newStr="abcabcabcd".replace("b", "*") --> newStr = "a*ca*ca*cd"
...
n="d"
newStr="abcabcabcd".replace("d", "*") --> newStr = "abcabcabc*" 
```

如果你`return`用一些字符串测试你的函数（在固定位置之后），它似乎工作正常：

```
In [7]: replaceN("abcabcabc", 3)
Out[7]: 'ab*ab*ab*' 
```

但如果您更仔细地选择：

```
In [10]: replaceN("abcabcabcd", 3)
Out[10]: 'abcabcabc*' 
```

那么很明显代码失败了，它相当于只替换字符串的最后一个字符：

```
my_string.replace(my_string[-1], "*") 
```

Eric 给出的代码运行良好：

```
In [16]: ''.join("*" if i % 3 == 0 else char for i, char in enumerate("abcabcabcd"))
Out[16]: '*bc*bc*bc*' 
```

它取代了第 3、6、9 等位置。如果您不希望位置 0 也被替换，则可能需要进行一些调整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-01T07:37:40.323

尝试这个：

```
def replaceN(string, n):
    s = ''
    for i in range(len(string)):
        if i%n!=0:
            s += string[i]
        else:
            s += '*'
    return s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T11:45:06.343

另一种选择，使用 re：

```
import re
def repl(matchobj):
    return re.sub('.$','*',matchobj.group(0))
def replaceN(str, n):
    return re.sub('.'*n,repl,str) 
```

但是，这需要额外的库。如果您已经导入了这个库，这可能是一种速记方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T11:29:11.803

您已将 return 放入循环中，因此在第一次迭代后，它会返回字符串，而不会替换字符串的其余部分。循环完全完成后，应返回字符串。像这样的东西应该工作：

```
def replaceN(str, n):
    for i in range(len(str)):
        n=str[i]
        newStr=str.replace(n, "*")
    return newStr 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T12:17:29.553

通过每次重新定义字符串的简单方法：

```
def replaceN(string, n):
    for i in range(n, len(string), n):
        string = string[:i-1] + "*" + string[i:]
    return string

In [1]: replaceN("abcabcabc", 3)
Out[1]: ab*ab*ab*
In [2]: replaceN("abcd abcd abcd", 4)
Out[2]: abcd*abcd*abcd 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T12:07:21.417

我喜欢 Eric 的回答，但您在评论中指出不应替换第一个字母。您可以像这样调整代码：

```
''.join("*" if i % n == 0 else char for i, char in enumerate(string, 1))
                                             the difference is here  ^

def replaceN(s, n):
    return ''.join(
      '*' if not i%n else char for i, char in enumerate(s, 1))

>>> replaceN('welcome', 3)
'we*co*e' 
```

# sql-server - 如何使用 LINQ 和 EF 找到层次结构的根？

> ID：13668831
> 
> 赞同：1
> 
> 时间：2012-12-02T11:28:10.833
> 
> 标签：sql-server, entity-framework, sql-server-2005, entity-framework-4, entity-framework-5

我已经使用对问题[Hierarchical data in Linq - options and performance](https://stackoverflow.com/questions/202912/hierarchical-data-in-linq-options-and-performance)的公认答案成功地查询了特定记录/节点的所有后代的层次表。现在我需要找到特定节点是其后代的树的根。我怎样才能使用尽可能接近的解决方案作为接受的答案来做到这一点？

层次结构由具有 ParentId 列的自引用表表示，该列对于层次结构中的顶部项目为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:22:16.683

这是你要找的东西吗

```
CREATE TABLE [dbo].[hierarchical_table](
    [id] INT,
    [parent_id] INT,
    [data] VARCHAR(255)
)
GO

INSERT [dbo].[hierarchical_table]
SELECT 1,NULL,'/1' UNION ALL
SELECT 2,1,'/1/2' UNION ALL
SELECT 3,2,'/1/2/3' UNION ALL
SELECT 4,2,'/1/2/4' UNION ALL
SELECT 5,NULL, '/5' UNION ALL
SELECT 6,5,'/5/6'
GO

CREATE FUNCTION [dbo].[fn_root_for_node] 
(
    @id int
)
RETURNS TABLE AS
RETURN (
    WITH [hierarchy_cte](id, parent_id, data, [Level]) AS
    (
        SELECT
            id,
            parent_id,
            data,
            0 AS [Level]
        FROM dbo.hierarchical_table
        WHERE id = @id
        UNION ALL
        SELECT t1.id, t1.parent_id, t1.data, h.[Level] + 1 AS [Level]
        FROM  dbo.hierarchical_table AS t1
        INNER JOIN hierarchy_cte AS h
            ON t1.id = h.parent_id
    )
    SELECT TOP 1
        id, parent_id, data, [Level]
    FROM [hierarchy_cte]
    ORDER BY [Level] DESC
)
GO

SELECT * FROM [dbo].[fn_root_for_node] (6)
GO 
```

# javascript - 如何轻松地将 javascript 版本迁移到谷歌地图的新版本？

> ID：13668833
> 
> 赞同：2
> 
> 时间：2012-12-02T11:28:17.233
> 
> 标签：javascript, google-maps, deprecated

多年前，我很难为我的网络制作带有标记的谷歌地图。我正在为 paypal 插入 ssl，我刚刚检查了一下，发现地图不适用于 htts：所以我进入谷歌地图寻求解决方案，发现 javascript 已被弃用，他们建议升级到版本 3。有没有简单的方法或一些教程，因为我正忙于尝试集成贝宝，上次并不容易。有小费吗？

这就是我拥有地图的方式：

```
function createMarker(point,html) {
    var marker = new GMarker(point);
    GEvent.addListener(marker, "click", enter code herefunction() {
      marker.openInfoWindowHtml(html);
    });
    return marker;
  }

  // Display the map, with some controls and set the initial location 
  var map = new GMap2(document.getElementById("map"));
  map.addControl(new GLargeMapControl());
  map.addControl(new GMapTypeControl());
  map.setCenter(new GLatLng(36.51308543049258, -4.886341094970703), 13);

  // Set up three markers with info windows  

  var point = new GLatLng(36.50856685143835, -4.866085052490234);
  var marker = createMarker(point,'<div style="width:240px">Text here<a href="link here">Link<\/a><\/div>')
  map.addOverlay(marker); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T01:28:19.283

使用[v2 参考](https://developers.google.com/maps/documentation/javascript/v2/basics)和[迁移表](https://developers.google.com/maps/documentation/javascript/v2/v2tov3)创建一个文本文件：

```
v2 v3
GMap2 google.maps.Map
GLatLng google.maps.LatLng
GInfoWindow google.maps.InfoWindow
GMapOptions google.map.MapOptions
G_API_VERSION google.maps.version
GPolyStyleOptions google.maps.PolygonOptions 或 google.maps.PolylineOptions

```

然后以一种或另一种方式运行查找/替换：

```
 for func in `cat deprecated.txt`
     do
      grep -R $func /path/to/src
   done 
```

**参考**

*   [迁移到较新版本的 PHP](https://stackoverflow.com/questions/732207/migrating-to-a-newer-version-of-php/732241#732241)
*   [高级查找和替换/文本展开/宏](https://stackoverflow.com/questions/3905759/advanced-find-replace-text-expand-macros/9011995#9011995)
*   [条件 Awk hashmap 匹配查找](https://stackoverflow.com/questions/13569913/conditional-awk-hashmap-match-lookup/13600904#13600904)
*   [awk/sed：如何递归查找/替换字符串？](https://stackoverflow.com/questions/1583219/awk-sed-how-to-do-a-recursive-find-replace-of-a-string)
*   [如何将文件从旧文件夹结构移动到新文件夹？](https://stackoverflow.com/questions/10556768/how-do-i-move-files-from-an-old-folder-structure-to-new/11319613#11319613)
*   [https://stackoverflow.com/questions/715457/how-do-you-implement-a-dispatch-table-in-your-language-of-choice/13999292](https://stackoverflow.com/questions/715457/how-do-you-implement-a-dispatch-table-in-your-language-of-choice/13999292)

# c# - 在所选数据源上找不到名为“ActualService”的字段或属性

> ID：13668844
> 
> 赞同：1
> 
> 时间：2012-12-02T11:29:29.587
> 
> 标签：c#, asp.net, gridview

当我向 gridview 添加一些列时，出现上述错误。但 ActualService 与我在数据库中的 Column 相同。请帮我解决这个错误。

我的代码：

```
<Columns>
     <asp:TemplateField HeaderText="PMRMName" SortExpression="PMRMName">
         <ItemTemplate>
            <asp:HyperLink runat="server" ID="HyperLink1" NavigateUrl='<%# "db_PmuKpi_CF_AllPMs.aspx?PMRMID="+ Eval("PMRMID") + "&PMRMName =" + Eval("PMRMName")%>' Text='<%# Eval("PMRMName","{0}")%>' Target="_blank"></asp:HyperLink>
            <asp:Label ID="lblRM" runat="server"></asp:Label>
         </ItemTemplate>
      </asp:TemplateField>

      <asp:BoundField DataField="BudgetRevenue" HeaderText="BudgetRevenue" SortExpression="BudgetRevenue" />
      <asp:BoundField DataField="BudgetCOGS" HeaderText="BudgetCOGS" SortExpression="BudgetCOGS" />
      <asp:BoundField DataField="BudgetService" HeaderText="BudgetService" SortExpression="BudgetService" />
      <asp:BoundField DataField="BudgetCashFlow" HeaderText="BudgetCashFlow" SortExpression="BudgetCashFlow" />
      <asp:BoundField DataField="ActualRevenue" HeaderText="ActualRevenue" SortExpression="ActualRevenue" />
      <asp:BoundField DataField="ActualCOGS" HeaderText="ActualCOGS" SortExpression="ActualCOGS" />
      <asp:BoundField DataField="ActualService " HeaderText="ActualService " SortExpression="ActualService " />
      <asp:BoundField DataField="ActualCashFlow " HeaderText="ActualCashFlow " SortExpression="ActualCashFlow " />
</Columns> 
```

我使用以下 SQL：

```
select PMRMID,PMRMName,BudgetRevenue,BudgetCOGS,BudgetService,BudgetCashFlow, ActualRevenue, ActualCOGS, ActualService,ActualCashFlow from [fn_pmukpi_CurrentMonthCF_AllRMs] ---------my function – 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:51:03.297

在 BoundField (DataField) 的列名中的“ActualService”和“ActualCashFlow”之后有一个空格。

# data-structures - 如何创建其帖子和顺序遍历已知的树？

> ID：13668846
> 
> 赞同：1
> 
> 时间：2012-12-02T11:29:42.067
> 
> 标签：data-structures, tree

如何从以下帖子创建树并按顺序遍历路径

> 订购：信息
> 后订购：INOFMANOTR

我知道 R 中的所有左侧元素都将是 Root 'R' 的左子树，而右侧元素将是根 R 的右子树，但我不知道如何进一步进行，任何人都可以帮忙我一步一步的指导谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:04:41.477

步骤1：在Post-Order中找到最后一个字母，让它成为X；这是根。
第 2 步：按顺序定位 X。X 左边的字母形成左子树，X 右边的字母形成右子树。
步骤 3：对每个节点重复步骤 1、2。

当您找到第二次迭代的第 2 步时，所有逻辑都变得简单。

# installation - 带有警告预置的 debian 安装程序的自动分区

> ID：13668847
> 
> 赞同：1
> 
> 时间：2012-12-02T11:29:52.643
> 
> 标签：installation, debian, partitioning

我想使用 debian 安装程序预置机制（preseed.cfg 文件）自动化 debian 安装程序。我希望安装程序自动删除所有磁盘分区并为根分区创建一个分区。重要的是，安装程序会在操作前显示所有分区将被删除的警告。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:54:52.247

查看 Debian 文档，您可以通过预置来实现这一点。要么通知用户有关格式的信息，要么只是跳过该部分。相关信息： http: [//www.debian.org/releases/stable/i386/apbs04.html.en](http://www.debian.org/releases/stable/i386/apbs04.html.en)

# c# - DataGridView 中的拖放文件

> ID：13668850
> 
> 赞同：5
> 
> 时间：2012-12-02T11:30:17.543
> 
> 标签：c#, file, datagridview

我有以下`DataGrid`name `gridOperations`。我已设置`AllowDrop`为 true，并使用了以下代码：

```
private void gridOperations_DragDrop(object sender, DragEventArgs e)
{

    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        var files = (string[])e.Data.GetData(DataFormats.FileDrop);
        foreach (var filePath in files)
        {
            MessageBox.Show(filePath);
        }
    }

}

private void gridOperations_DragEnter(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
        e.Effect = DragDropEffects.All;
    else
        e.Effect = DragDropEffects.None;
} 
```

但是当我尝试将文件拖入时`DataGrid`，它给了我“停止”光标。我究竟做错了什么？

是可能的，因为它绑定到列表？

基本上我需要的是从拖入数据网格的文件中获取文件名，并确定将其拖入哪个单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:39:38.547

您的网格和所有父控件是否已启用？

您的代码是正确的并且有效。我唯一能想到的是您的 GridView 可能未启用。您可以在应用程序运行时通过单击来更改网格的当前行吗？

# c++ - 模板函数特化

> ID：13668855
> 
> 赞同：0
> 
> 时间：2012-12-02T11:31:01.113
> 
> 标签：c++, templates

如何使用返回值模板对模板函数进行专门化？

我试过这个：

myfunc.h：

```
#pragma once

template< >
int MyFunc<int>(){
   return 10;
} 
```

主.cpp：

```
#include "myfunc.h"

int main()
{
    int a;
    a = MyFunc<int>();
    return 0;
} 
```

但我有错误：“<”标记之前的预期初始化程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T11:42:44.860

在您声明您的专业之前，您缺少主要模板。

```
template<typename> int func() { return 42; }

template<> int func<int>() { return 23; } 
```

请注意[功能](http://www.gotw.ca/publications/mill17.htm)特化的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T11:42:51.103

您没有声明或定义这是一个特化的主模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:53:19.117

我不知道你想做什么，但也许这对你有帮助：

```
template<typename T>
int MyFunc(){
   return 0;
}

template<>
int MyFunc<int>(){
   return 10;
}

template<>
int MyFunc<char>(){
   return 100;
}

using namespace std;

int main()
{
    cout << MyFunc<int>() << endl << MyFunc<char>() << endl;
    system("pause");

    return 0;
} 
```

# android - 应用程序 myapp(process com.example.package) 已意外停止，请重试

> ID：13668857
> 
> 赞同：0
> 
> 时间：2012-12-02T11:31:04.163
> 
> 标签：android, eclipse, android-logcat

我的Android应用程序遇到了很多麻烦。它无法运行，但现在我可以运行了，不幸的是，我收到错误“应用程序 myapp（进程 com.example.package）已意外停止，请重试）这是我的日志文件

```
12-02 11:25:11.980: E/MediaPlayer(278): Unable to to create media player
12-02 11:25:12.290: D/MediaPlayer(278): create failed:
12-02 11:25:12.290: D/MediaPlayer(278): java.io.IOException: setDataSourceFD failed.: status=0x80000000
12-02 11:25:12.290: D/MediaPlayer(278):     at android.media.MediaPlayer.setDataSource(Native Method)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.media.MediaPlayer.create(MediaPlayer.java:645)
12-02 11:25:12.290: D/MediaPlayer(278):     at com.mohammed.watzIslam.Mymain.onCreate(Mymain.java:27)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.os.Looper.loop(Looper.java:123)
12-02 11:25:12.290: D/MediaPlayer(278):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-02 11:25:12.290: D/MediaPlayer(278):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 11:25:12.290: D/MediaPlayer(278):     at java.lang.reflect.Method.invoke(Method.java:521)
12-02 11:25:12.290: D/MediaPlayer(278):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-02 11:25:12.290: D/MediaPlayer(278):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-02 11:25:12.290: D/MediaPlayer(278):     at dalvik.system.NativeStart.main(Native Method)
12-02 11:25:12.290: D/AndroidRuntime(278): Shutting down VM
12-02 11:25:12.290: W/dalvikvm(278): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-02 11:25:12.300: E/AndroidRuntime(278): FATAL EXCEPTION: main
12-02 11:25:12.300: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mohammed.watzIslam/com.mohammed.watzIslam.Mymain}: java.lang.NullPointerException
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-02 11:25:12.300: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 11:25:12.300: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
12-02 11:25:12.300: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-02 11:25:12.300: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-02 11:25:12.300: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
12-02 11:25:12.300: E/AndroidRuntime(278): Caused by: java.lang.NullPointerException
12-02 11:25:12.300: E/AndroidRuntime(278):  at com.mohammed.watzIslam.Mymain.onCreate(Mymain.java:28)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-02 11:25:12.300: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-02 11:25:12.300: E/AndroidRuntime(278):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:29:18.697

```
12-02 11:25:11.980: E/MediaPlayer(278): Unable to to create media player
12-02 11:25:12.290: D/MediaPlayer(278): create failed:
12-02 11:25:12.290: D/MediaPlayer(278): java.io.IOException: setDataSourceFD failed.: status=0x80000000
12-02 11:25:12.290: D/MediaPlayer(278):     at android.media.MediaPlayer.setDataSource(Native Method) 
```

我的猜测是您正在尝试加载不存在的媒体文件，或者文件名不正确。

# javascript - 如何使用Javascript在字符串中用{替换“{”？

> ID：13668860
> 
> 赞同：0
> 
> 时间：2012-12-02T11:31:09.823
> 
> 标签：javascript, replace

谁能告诉我如何`"{`用`{`JavaScript 替换？

这是我正在尝试做的事情：

```
string.replace(/\"\{/g, "{"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:33:32.623

你的正则表达式很好。不要忘记字符串在 javascript 中是不可变的。replace 函数不会更改接收者字符串，而是构建一个新字符串。

所以你必须做

```
string = string.replace(/\"\{/g, "{"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:49:10.283

如果您直接在上面`string`使用它，则应该在字符串实例上使用它。不在字符串类型上。

（我知道这听起来太微不足道了，但否则这段代码应该可以工作。:)）

```
var stringTypeVariable = 'some string "{ with target pattern';
var replacedVariable = stringTypeVariable.replace(/\"\{/g, "{"); 
```

# visual-studio - 在计算机之间共享 Visual Studio 项目

> ID：13668868
> 
> 赞同：7
> 
> 时间：2012-12-02T11:32:02.017
> 
> 标签：visual-studio, version-control

我有一台笔记本电脑和一台台式电脑，我希望在它们之间共享 Visual Studio 项目 - 最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:00:09.100

目前最简单的方法是在“云端”使用微软新的免费 TFS（Team Foundation Server）服务。

**首先，**[在这里](http://tfs.visualstudio.com/)注册一个 TFS 帐户。您必须选择一个名称，这将为您提供一个类似[http://yourname.visualstudio.com/的 URL](http://yourname.visualstudio.com/)

**接下来**，在 Visual Studio 中，您可以添加一个 TFS 服务器，您可以在其中从任意数量的计算机签入和签出您的解决方案和项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:42:59.440

您想*共享*Visual Studio 项目**(1)**还是要将*项目置于版本控制* **(2)**之下？

1.  对于第一种情况，您可以考虑在线备份/存储服务，如 Dropbox、Google Drive 或 SkyDrive。您将能够从不同的计算机访问您的项目，并可以在需要时与他人共享。这确实是最简单的方法；虽然没有版本控制。

2.  如果您需要版本控制，我建议您选择[Apache Subversion](http://subversion.apache.org)。TFS 就像走在艰难而荆棘的道路上，绝对不是最简单的方法。

因此，您可以安装[VisualSVN](http://www.visualsvn.com/visualsvn/)以将 SVN 作为源代码控制添加到 Visual Studio。然后您可以使用 VisualSVN [**“将解决方案添加到 Subversion” 。**](http://www.visualsvn.com/visualsvn/getting-started/)

您可以使用 VisualSVN 服务器（或任何其他 SVN 服务器）在 LAN 上托管存储库，也可以使用托管的 SVN 服务。初始设置实际上最多需要几分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T11:47:48.710

您可以使用免费的 SVN 服务。这是提供的一个：- [https://www.assembla.com/home](https://www.assembla.com/home)

# wso2 - MAMP - WSO2 DSS - 建立数据源连接时出错：通信链路故障最后一个数据包成功发送到服务器

> ID：13668871
> 
> 赞同：0
> 
> 时间：2012-12-02T11:32:42.807
> 
> 标签：wso2, wso2carbon, wso2dss

我同时运行 MAMP 和 WSO2 Carbon 数据服务。我想要做的是通过连接到 mysql 服务器来添加一个新的数据源。我已添加`com.mysql.jdbc.Driver`到 lib 文件夹。

尝试测试连接时遇到的完整错误

建立数据源连接时出错：通信链路故障最后一个成功发送到服务器的数据包是 0 毫秒前。驱动程序没有收到来自服务器的任何数据包。

![在此处输入图像描述](../Images/c4fca501630264dba806794c63b9229a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-29T02:13:54.217

在我的情况下，只需将**useSSL=false**放在连接字符串的末尾就可以了

jdbc:mysql://localhost:3306/USERS?useSSL=false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:52:58.303

这似乎是mysql服务器配置的问题。请查看以下线程。

[使用 JDBC 和 MySQL 解决“通信链路故障”](https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql)

[为什么我在使用 Java (Netbeans) 连接到 MySQL 时收到此错误“通信链接失败发送的最后一个数据包...”？](https://stackoverflow.com/questions/10567064/why-i-get-this-error-communicationslinkfailure-thelastpacketsent-when)

[com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接失败](https://stackoverflow.com/questions/2121829/mysql-jdbc-communications-link-failure)

# python - 带有子进程、IPC、SMP 的封闭 fd

> ID：13668872
> 
> 赞同：0
> 
> 时间：2012-12-02T11:32:44.630
> 
> 标签：python, python-2.7, ipc

给定函数

```
def get_files_from_sha(sha, files):
    from subprocess import Popen, PIPE
    import tarfile
    if 0 == len(files):
        return {}
    p = Popen(["git", "archive", sha], bufsize=10240, stdin=PIPE, stdout=PIPE, stderr=PIPE)
    tar = tarfile.open(fileobj=p.stdout, mode='r|')
    p.communicate()
    contents = {}
    doall = files == '*'
    if not doall:
        files = set(files)
    for entry in tar:
        if (isinstance(files, set) and entry.name in files) or doall:
            tf = tar.extractfile(entry)
            contents[entry.name] = tf.read()
            if not doall:
                files.discard(entry.name)

    if not doall:
        for fname in files:
            contents[fname] = None
    tar.close()
    return contents 
```

在循环中调用 的某些值`sha`，一段时间后（在我的情况下，4 次迭代）它在调用 时开始失败`tf.read()`，并显示以下消息：

```
Traceback (most recent call last):
  File "../yap-analysis/extract.py", line 243, in <module>
    commits, identities, identities_by_name, identities_by_email, identities_freq = build_commits(commits)
  File "../yap-analysis/extract.py", line 186, in build_commits
    commit = get_commit(commit)
  File "../yap-analysis/extract.py", line 84, in get_commit
    contents = get_files_from_sha(commit['sha'], files)
  File "../yap-analysis/extract.py", line 42, in get_files_from_sha
    contents[entry.name] = tf.read()
  File "/usr/lib/python2.7/tarfile.py", line 817, in read
    buf += self.fileobj.read()
  File "/usr/lib/python2.7/tarfile.py", line 737, in read
    return self.readnormal(size)
  File "/usr/lib/python2.7/tarfile.py", line 746, in readnormal
    return self.fileobj.read(size)
  File "/usr/lib/python2.7/tarfile.py", line 573, in read
    buf = self._read(size)
  File "/usr/lib/python2.7/tarfile.py", line 581, in _read
    return self.__read(size)
  File "/usr/lib/python2.7/tarfile.py", line 606, in __read
    buf = self.fileobj.read(self.bufsize)

ValueError: I/O operation on closed file 
```

我怀疑子进程尝试进行一些并行化（？）。

真正的原因是什么以及如何在python2上以一种干净而健壮的方式解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:56:24.843

我认为你的问题是`p.communicate()`. 此方法发送到标准输入，从标准输出和标准错误（您没有捕获）读取并等待进程终止。

`tarfile`正在尝试从进程 stdout 中读取，并且当它这样做时，进程已完成，因此出现错误。

我没有尝试运行您的代码（我无权访问`git`），但您可能根本不想要`p.communicate`，请尝试将其注释掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:56:49.540

不要`.communicate()`在`Popen`实例上使用；它会读取`stdout`流直到完成。从文档中：

> 与进程交互：将数据发送到标准输入。从 stdout 和 stderr 读取数据，直到到达文件结尾。

代码`.communicate()`甚至在管道`.close()`上添加了显式调用。`stdout`

只需删除对的调用就`.communicate()`足够了，但在阅读 tarfile 内容`.wait()` *后也要添加：*

```
tar.close()
p.stdout.close()
p.wait() 
```

可能`tar.close()`也关闭`p.stdout`了，但是那里的额外内容`.close()`不应该受到伤害。

# java - 无法通过 HtmlUnit / Java 登录

> ID：13668876
> 
> 赞同：1
> 
> 时间：2012-12-02T11:33:10.870
> 
> 标签：java, htmlunit

我刚开始使用 HtmlUnit，我想登录一个使用 Javascript 的 sHttp 页面，有问题吗？我希望没有，但我无法登录，问题出在哪里？至少我应该收到登录失败的警告，但一切似乎都没有尝试登录。非常感谢每一个想法！

```
WebClient webClient = new WebClient();
//webClient.setJavaScriptEnabled(true);
//webClient.getCookieManager().setCookiesEnabled(true);

// Get the first page
HtmlPage page1 = (HtmlPage) webClient.getPage("http://goo.gl/AxhP8");
HtmlPage page2 = (HtmlPage) page1.getFrameByName("text").getEnclosedPage();

// Get the form that we are dealing with and within that form,
// find the submit button and the field that we want to change.
HtmlForm form = page2.getFormByName("login");

// Enter login and passwd
form.getInputByName("xlogin").setValueAttribute("login");
form.getInputByName("xpasswd").setValueAttribute("password");

// Click "Sign In" button/link
page1 = (HtmlPage) form.getInputByValue("Přihlásit").click();

//  Get page as Html
String htmlBody = page1.getWebResponse().getContentAsString();
//  Save the response in a file
String filePath = "test_out.html";

BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filePath)));
bw.write(htmlBody);
bw.close();

webClient.closeAllWindows(); 
```

这是表格（或者您可以在此处获取来源：http: [//goo.gl/AxhP8](http://goo.gl/AxhP8)）

```
<form action="/fcgi/verso.fpl" method="GET" name="login" onsubmit="wipRet=true;wipRet=true;wipRet=kontrola_hesla(this);if(wipRet==false){wipRet=false;}else{vrGetScrollTop(this);doWkinPrgs(this.target,'Probíhá přihlášení uživatele ...');};if(wipRet==false){return false;}else{vrGetScrollTop(this);doWkinPrgs(this.target,'');}" target="text">
<input name="_vr_sclt" type="hidden" value="0" />
<input name="_vr_sclt" type="hidden" value="0" />
<input id="fname" name="fname" type="hidden" value="neni_js" />

Uživatel: <input class="login_in"  name="xlogin" size="15" type="text" />
Heslo: <input class="login_in" name="xpasswd" size="15" type="Password" />
<input class="btn" type="submit" value="Přihlásit" width="50" />

<input name="__formid" type="hidden" value="2a620f43d0478d14" />
<input name="__idf" type="hidden" value="afc09868294ba6ac" />
<input name="__formid" type="hidden" value="f73fa3ddfe457bc1" />
<input name="__idf" type="hidden" value="3162299a379cf323" />

</form> 
```

感谢每一个小小的帮助，我花了几个小时，阅读了很多文章，但我无法继续前进，谢谢 :) cookie 或类似的东西有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:40:20.680

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6); 
```

Firefox 比 IE 好得多 ...:// 现在可以使用

# python - 如何在 python 中制作类似网格的数据结构？

> ID：13668878
> 
> 赞同：-4
> 
> 时间：2012-12-02T11:33:18.787
> 
> 标签：python

我需要做的是

```
 Col 0   Col 1   Col 2 
Row 0       1       0       1 
Row 1       1       1       1 
Row 2       1       1       1 
```

这些数字是完全随机的，但我完全不知道如何制作电路板。问题是我需要能够在之后将数字添加到列和行中。我是否必须先将其放入列表中，然后将它们隔开或保持原样并用 \t 隔开。

我所拥有的只是一个随机数生成器。我不确定下一步该怎么做。

```
def generate_random_number(size):
  number = ""
  for i in range(size):
    digits = random.randint(0, 1)
    numbers = number + str(digits)
  return numbers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:41:30.903

我的建议是：选择数据结构，以便以合理的方式轻松处理数据。然后你可以决定如何可视化数据，但它不应该影响数据结构的选择。

在这种情况下，将板存储为整数列表（或元组的元组）可能是合理的。

然后你可以写，例如：

```
def row_sum(table, i):
    return sum(table[i])

def col_sum(table, i):
    return sum(row[i] for row in table)

def print_table(table):
    print ' '*colsize + '\t' + '\t'.join('Col {}'.format(i) for i, _ in enumerate(t))
    for i, row in enumerate(t):
        print 'Row {}'.format(i).ljust(colsize), '\t'.join(str(v).rjust(colsize) for v in row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:49:44.380

我建议创建一个列表列表。它本质上是一个行列表，然后每一行都有一堆单元格。下面的代码将用 0 或 1 的随机值填充它。还有代码向您展示如何对行和列值求和。

**代码**

```
import random, pprint

def random_row(size):
    return [random.randrange(2) for i in range(size)] 

data = [random_row(3) for i in range(3)]
pprint.pprint(data, width=20)
print 'row 1 sum:', sum(data[0])
print 'column 1 sum:', sum(row[0] for row in data) 
```

**输出**

```
[[1, 0, 0],
 [0, 0, 0],
 [1, 1, 0]]
row 1 sum: 1
column 1 sum: 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:44:41.840

看看这个代码示例会有帮助吗？

```
x = []
for row in range(10):
    x.append([])

for row in x:
   for col in range(10):
       row.append(0) 
```

这将使用元组创建一个 10x10 的零网格。实际上，它是一个包含十个元组的元组，每个元组包含十个数字。

有用的提示，输入：

```
print(x) 
```

然后输入：

```
import pprint
pprint.pprint(x) 
```

你会看到区别。pprint 代表“漂亮的印刷品”。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T11:47:01.833

我认为您正在寻找类似二维“数组”的东西。在 python 中，您可以使用列表列表来创建您描述的结构。

```
#first a list of lists

grid=[[],[],[]]

#you can use it like this

#       |  Col 0        | Col 1        | Col 2
#---------------------------------------------------
# Row 0 |  grid[0][0]=1 | grid[0][1]=0 | grid[0][2]=1
# Row 1 |  grid[1][0]=1 | grid[1][1]=1 | grid[1][2]=1
# Row 2 |  grid[2][0]=1 | grid[2][1]=1 | grid[2][2]=1 
```

将行或列中的数字相加很简单：

```
def sum_row(row):
  return grid[row][0]+grid[row][1]+grid[row][2]

def sum_column(column):
  return grid[0][column]+grid[1][column]+grid[2][column] 
```

此外，我不明白你在用你的 randomNumber 函数做什么。似乎您想返回随机数的字符串版本，但是当您尝试将列或行的条目相加时会导致问题。不过，如果您确实尝试获取一串数字，我会这样写：

```
 def generate_random_number(size):
    number=""
    for i in range(size):
      digit = random.randint(0, 1)
      number = number + str(digit)
    return number 
```

# node.js - 类名jade中的变量

> ID：13668881
> 
> 赞同：37
> 
> 时间：2012-12-02T11:33:36.403
> 
> 标签：node.js, express, pug

我无法在翡翠的类中设置变量名：

```
.flag_#{ session.locale } #{ session.locale } 
```

我有：

```
<div class="flag_" >en</div> 
```

我想拥有

```
<div class="flag_en" >en</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-02T12:24:32.823

试试这个（没有测试过）：

```
div(class="flag_#{ session.locale }") session.locale 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-19T14:19:57.493

至于 pug@2.0.0-alpha3 以这种方式工作：

```
div(class="flag_" + session.locale) session.locale 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-13T20:47:59.327

这是另一种方法：

```
mixin formButton(text, type, extra_classes)
    - var default_classes = 'btn btn-primary'
    if extra_classes
        - var classes = default_classes + ' ' + extra_classes
    else
        - var classes = default_classes

    if type
        button(class=classes type=type) !{text}
    else
        button(class=classes type="submit") !{text} 
```

**示例 1：**

用法：

```
+formButton('Text') 
```

结果：

```
<button type="text" class="btn btn-primary" type="submit">Text</button> 
```

**示例 2：**

用法：

```
+formButton('Text', 'button') 
```

结果：

```
<button type="text" class="btn btn-primary" type="button">Text</button> 
```

**示例 3：**

用法：

```
+formButton('Text', 'button', 'extra-class') 
```

结果：

```
<button type="text" class="btn btn-primary extra-class" type="button">Text</button> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-18T03:06:19.800

您还可以使用[条件语句](http://jade-lang.com/reference/conditionals/)来执行此操作，例如

```
 if liked == true
    span.like.active
  else
    span.like 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T19:03:17.547

您还可以使用[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)：

```
- const session = { locale: 'en' }
div(class=`flag_${session.locale}`) #{session.locale}

//- Just to show more options:

div(class=`flag_${session.locale}`)= session.locale
div(class=`flag_${session.locale}`) Current language is #{session.locale}
div(class=`flag_${session.locale}`)= `Current language is ${session.locale}` 
```

输出（使用 Pug 2.0.4）：

```
<div class="flag_en">en</div>
<div class="flag_en">en</div>
<div class="flag_en">Current language is en</div>
<div class="flag_en">Current language is en</div> 
```

# php - PHP 中的联系表单：允许用户向我发送电子邮件

> ID：13668882
> 
> 赞同：2
> 
> 时间：2012-12-02T11:33:37.283
> 
> 标签：php, email

在我的网站上，我有一个联系表，用户可以在其中报告错误或提交功能请求。该表单包含*主题*和*消息*。

我希望表单直接通过电子邮件发送给我，可以使用 PHPMailer 或 PHP 的内置邮件功能。

这里的问题是在生成电子邮件时，*发件人*必须是我拥有的地址，而不是实际用户的电子邮件地址。原因很明显，因为我们不应该被允许冒充其他人。但是，我希望能够直接从我的收件箱给我的用户发电子邮件，但我不能这样做，因为我不能使用他们的地址在脚本中给自己发电子邮件。

那么构建联系表格的最佳方法是什么？我能想到的唯一解决方法是将消息 + 发件人地址插入数据库，然后从那里手动读取......这是一个史诗般的麻烦。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:38:21.653

设置`Reply-To`电子邮件标题，这样您将得到如下内容：

```
<?php
$headers = 'From: you@example.com' . "\r\n";
// Set the sender address as Reply-to below
$headers .= 'Reply-To: sender@example.com' . "\r\n";

mail('you@example.com', 'Subject here', 'The message goes here', $headers);
?> 
```

这样您将成为发件人，但是当您点击邮件客户端中的回复按钮时，它将默认回复到`Reply-To`标题中列出的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:43:42.463

您可以使用下面的代码从您拥有的地址接收电子邮件，但当您回复时，它会转到用户的电子邮件

```
<?php
$to      = 'youremail@yourdomain.com';
$subject = 'the subject';
$message = 'message';
$headers = 'From: youremail@yourdomain.com' . "\r\n" .
'Reply-To: user@useremail.com' . "\r\n" .
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:37:59.657

为什么中心必须是您拥有的地址？

SMTP 不会禁止您提供用户作为发件人提供的电子邮件。只要 SMTP 服务器允许您从中中继，它就会为发件人和收件人取任何值。

另一种选择是创建发件人电子邮件 (contact-form@yourdomain.com) 并将回复字段设置为用户的电子邮件地址。

# android - 替换片段

> ID：13668886
> 
> 赞同：0
> 
> 时间：2012-12-02T11:35:06.960
> 
> 标签：android, android-fragments, android-listfragment

选择 listFragment A 项目后，我想用片段 B2 替换片段 B1。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    Integer Position = position;
    WebViewerFragment fragment = (WebViewerFragment) getFragmentManager()
            .findFragmentById(R.id.detailFragment);
    if (Position.equals(0)) {
        FragmentManager fm = getFragmentManager();
        WebViewerFragment newFragment = new WebViewerFragment();
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.detailFragment, newFragment);
        ft.addToBackStack("android");
        ft.commit();
    } else if (Position.equals(1)) {
        FragmentManager fms = getFragmentManager();
        WebViewerFragment_II newFragments = new WebViewerFragment_II();
        FragmentTransaction fts = fms.beginTransaction();
        fts.replace(R.id.detailFragment, newFragments);
        fts.addToBackStack("google");

        fts.commit();
    } 
} 
```

它只替换一次，在选择项目 1（位置 0）后应用程序再次崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:02:50.007

当您调用 的方法`replace(int, Fragment)`时`FragmentTransaction`， int 必须是您要在其中放置新的容器的 id 以及前一个容器的 id `Fragment`。通常，它是一个`FrameLayout`.
您不能`Fragment`用 XML 替换已设置的 a。

# hibernate - java.lang.ClassNotFoundException：org.hibernate.proxy.EntityNotFoundDelegate

> ID：13668892
> 
> 赞同：2
> 
> 时间：2012-12-02T11:35:51.497
> 
> 标签：hibernate, maven, tomcat, jpa

我使用 JSF、hibernate、tomcat7、JAVA EE 5 和 maven 部署了一个 Web 应用程序。我收到一个我无法解决的错误：

> java.lang.NoClassDefFoundError: org/hibernate/proxy/EntityNotFoundDelegate at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:55) at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63) at javax.persistence。 Persistence.createEntityManagerFactory(Persistence.java:47) 在 entity.ActeurexterneController.getJpaController(ActeurexterneController.java:44) 在 entity.ActeurexterneController.access$000(ActeurexterneController.java:23) 在 entity.ActeurexterneController$1.createPageDataModel(ActeurexterneController.java:59 ) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 javax.el.BeanELResolver.getValue(BeanELResolver.java:87) 在com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) 在 com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 在 org.apache.el.parser.AstValue.getValue( AstValue.java:183) 在 org.apache.el.parser.AstEqual.getValue(AstEqual.java:38) 在 org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185) 在 com.sun.faces.facelets .el.TagValueExpression.getValue(TagValueExpression.java:109) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) 在 javax.faces.component.UIComponentBase。isRendered(UIComponentBase.java:413) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1750) 在 javax.faces.render.Renderer.encodeChildren(Renderer.java:168) 在 javax.faces.component.UIComponentBase .encodeChildren(UIComponentBase.java:845) 在 javax.faces.component.javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756) 在 javax.faces.component。 UIComponent.encodeAll(UIComponent.java:1759) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401) 在 com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java: 131) 在 com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:410) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter (ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache。 catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java: 168) 在 org.apache.catalina.valves 的 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)。AccessLogValve.invoke(AccessLogValve.java:929) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) at org .apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor .run(JIoEndpoint.java:312) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang。 Thread.run(Thread.java:722) 引起：java.lang.ClassNotFoundException：org.apache 的 org.hibernate.proxy.EntityNotFoundDelegate。catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)

我的 persitane.xml ：

> ```
>  <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
>   <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
>   <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
>   <property name="hibernate.connection.username" value="root"/>
>   <property name="hibernate.connection.password" value="root"/>
>   <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/prosper"/>
>   <property name="javax.persistence.validation.mode">none</property> 
> ```

在我的 pom.xml 中：

> ```
>  <dependency>
>         <groupId>org.hibernate</groupId>
>         <artifactId>hibernate-core</artifactId>
>         <version>4.1.8.Final</version>
>         <scope>provided</scope>
>     </dependency>
>     <dependency>
>         <groupId>org.hibernate.javax.persistence</groupId>
>         <artifactId>hibernate-jpa-2.0-api</artifactId>
>         <version>1.0.1.Final</version>
>     </dependency>
> 
>     <dependency>
>         <groupId>org.hibernate</groupId>
>         <artifactId>hibernate-entitymanager</artifactId>
>         <version>4.1.8.Final</version>
>     </dependency> 
> ```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:05:20.583

在给定的 pom.xml 范围内*提供*用于休眠核心依赖。这意味着依赖关系应该由运行时环境提供。Tomcat 7 没有附带 Hibernate，这就是为什么使用在此上下文中*提供的范围确实有意义的原因。*

通过删除范围来解决问题。然后我们将回到默认范围，即*compile*。这意味着依赖关系在运行时也可用（也与应用程序一起打包）。

# android - 下载输入流中断时会发生什么

> ID：13668893
> 
> 赞同：0
> 
> 时间：2012-12-02T11:36:13.620
> 
> 标签：android, bitmapfactory, android-internet

我有以下代码行来下载`Bitmap`：

```
bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
```

但是，如果下载在下载过程中中断怎么办？连接会保持打开状态吗？如果是，我是否应该在开始下载图像时启动计时器，如果在 60 秒内未下载图像，则取消？

JavaDoc 对中断的下载只字未提：

> `openConnection()``IOException`如果在打开连接时发生错误，则 抛出一个。如果无法创建 InputStream ，则`getInputStream()`抛出异常。`IOException`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:46:02.100

我可以预见的两种情况，

1.  如果连接中断，则会引发网络异常。
2.  如果连接中断并且内容没有完全下载，那么解码部分可能无法工作，它也会抛出异常

# javascript - node.js 全局变量有问题

> ID：13668895
> 
> 赞同：0
> 
> 时间：2012-12-02T11:36:16.880
> 
> 标签：javascript, node.js

我不太了解javascript。我无法定义全局变量。

```
var data = 'empty';

connection.query('SELECT * FROM deneme',function(err, rows, fields){
    if (err) throw err;
    data = rows;
});

console.log(data); 
```

通常，控制台需要返回行的数据，但它返回“空”。如何从函数内部查询行？如何定义全局变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:43:52.197

它不起作用的原因是因为您`console.log`在异步代码块之外。基本上发生的事情是这样的：

1.  `data`设置为`empty`；
2.  `connection`发出数据库请求；
3.  `console.log`火灾（`data`在`empty`那个时候）；
4.  收到数据库响应；
5.  回调触发；
6.  `data`设置为`rows`。

因此，为了获得您想要的内容，只需将`console.log`语句放入异步块代码中：

```
var data = 'empty';

connection.query('SELECT * FROM deneme',function(err, rows, fields){
    if (err) throw err;
    data = rows;
    console.log(data);
}); 
```

# entity-framework - 如何将 Entity Framework 作为我的 Azure 辅助角色部署的一部分？

> ID：13668897
> 
> 赞同：1
> 
> 时间：2012-12-02T11:36:29.040
> 
> 标签：entity-framework, azure, azure-worker-roles

我正在将我的代码迁移到 Azure Worker Role，并使用 Entity Framework 4.1 进行数据库访问。
在 Azure 上，我的 Worker Role 崩溃，因为它找不到要在机器上安装的 Entity Framework 4.1。

*   有没有一种简单的方法可以在 Worker Role 上安装 Entity Framework 4.1？（不通过批处理脚本调用静默安装）
*   Azure Compute 附带的默认实体框架版本是什么？（如果它高于 4.1，我将升级我的代码）

注意：我尝试将我的 EntityFramework 和 System.Data.Entity 引用标记为“复制本地”，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:35:37.860

默认情况下，Windows Azure 实例不附带任何版本的 EF。他们所拥有的只是 .net 的基本安装（4 与 OS 系列 2，4.5 与 OS 系列 3）任何你想使用的东西，你必须提供。您不需要安装 EF，很有可能您需要设置另一个引用以复制本地。EF 5 现在可以作为 Nuget 包使用，如果您添加了 VS 可能足够聪明，可以为您整理出来。

# .htaccess - RewriteCond 适用于 IE，但不适用于 Firefox 或 Chrome

> ID：13668908
> 
> 赞同：0
> 
> 时间：2012-12-02T11:37:54.057
> 
> 标签：.htaccess, mod-rewrite, http-accept-language

所以我昨天一整天都在寻找我的问题的解决方案，发现了相似之处，但没有完全匹配。我尝试编写一个 .htacces 文件，该文件应该检查​​浏览器语言，然后将用户重定向到 (GERMAN) xyz.de/?lang=de&page=$1 或 (NONGERMAN) xyz.de/?lang=en&page=$1

它应该以浏览器的语言自动加载主页。到目前为止，我没有再遇到 500 个错误，它在**IE**上运行得很好，并且确实以正确的语言加载了页面，这给我留下了深刻的印象。但在 Firefox 或 Chrome 中，它既不显示语言也不显示页面；如果我 var_dump($_GET) 我什么也得不到。

.htaccess

```
 RewriteEngine on
    RewriteCond %{HTTP_ACCEPT_LANGUAGE} ^(de|de-at|de-li|de-lu|de-ch) [NC]
    RewriteRule ^([^./]{3}[^.]*)$   /index.php?lang=de&page=$1 [QSA,L] 
    RewriteCond %{HTTP_ACCEPT_LANGUAGE} !^(de|de-at|de-li|de-lu|de-ch) [NC] 
    RewriteRule ^([^./]{3}[^.]*)$   /index.php?lang=en&page=$1 [QSA,L]<i> 
```

[IE9] xyz.de

```
 var_dump($_GET) 
```

数组(2) { ["page"]=> string(0) "" ["lang"]=> string(2) "de" }

[壁虎] xyz.de

```
 var_dump($_GET) 
```

数组（0）{}

[壁虎] xyz.de/home

```
 var_dump($_GET) 
```

有人知道问题是什么吗？？？？

数组(2) { ["lang"]=> 字符串(2) "en" ["page"]=> 字符串(4) "home" }

// 改变

感谢上一篇文章，我更改了以下代码：

```
 RewriteCond %{HTTP:ACCEPT_LANGUAGE} !^(de) [NC]
    RewriteRule ^([^./]{3}[^.]*)$ /index.php?page=$1&lang=en [QSA,L]

    RewriteRule ^([^./]{3}[^.]*)$ /index.php?page=$1&lang=de [QSA,L] 
```

现在它什么都不重定向，就在我把 /home oder secondpage 或任何东西放在里面时，它总是以英文加载页面，并且它应该将页面重定向到 xyz.de/lang=[ACCEPT-LANG]&page=home 如果你按 xyz.de

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:42:42.643

尝试使用`%{HTTP:Accept-Language}`而不是`%{HTTP_ACCEPT_LANGUAGE}`.

[这篇](http://tech-blog.borychowski.com/index.php/2009/03/htaccess/redirect-according-to-browser-language-mod-rewrite-and-http_accept_language/)博文非常有用。

# google-app-engine - 使用自定义 SSL 的 Google App Engine 定价

> ID：13668914
> 
> 赞同：2
> 
> 时间：2012-12-02T11:39:09.987
> 
> 标签：google-app-engine

有没有人尝试过使用自定义`SNI SSL`证书的 Google App Engine？我有一个关于定价的问题......它说的大多数地方都是**每月 9**`SNI SSL`美元。但是，您首先必须有一个**付费**的GAE 帐户才能获得 SSL 服务。这里：[https](https://cloud.google.com/pricing/) ://cloud.google.com/pricing/它说**付费**的GAE 帐户是**$9/month**。所以我想知道，**付费**包含，还是该功能（来自**免费**帐户）真的需要**每月 18 美元**？**********`SNI SSL`**********

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:08:13.563

是的，启用计费费用为每月 9 美元，SNI SSL 的额外费用为 9 美元，因此如果您想要 SNI SSL，您将每月支付 18 美元。

并且基于 VIP 的 SSL 是 39 美元/月
[http://googleappengine.blogspot.com/2012/09/announcing-new-pricing-for-virtual-ip.html](http://googleappengine.blogspot.com/2012/09/announcing-new-pricing-for-virtual-ip.html)******

# multiple-inheritance - 错误 C2440：“reinterpret_cast”：无法从“重载函数”转换为“StateFunc”

> ID：13668916
> 
> 赞同：0
> 
> 时间：2012-12-02T11:39:36.240
> 
> 标签：multiple-inheritance, reinterpret-cast

代码取自一篇 DDJ 文章[state machine design in c](http://www.drdobbs.com/cpp/state-machine-design-in-c/184401236)

```
class EventData 
{
public:
    virtual ~EventData() {};  
};

struct StateStruct;

class CStateMachine : public CObject
{
    DECLARE_DYNAMIC(CStateMachine)

public:
    CStateMachine(int nMaxStates);
    virtual ~CStateMachine() {};

    unsigned char GetCurrentState() { return currentState;};
protected:
    enum { EVENT_IGNORED = 0xFE, CANNOT_HAPPEN };
    unsigned char currentState;
    void ExternalEvent(unsigned char, EventData* = NULL);
    void InternalEvent(unsigned char, EventData* = NULL);
    virtual const StateStruct* GetStateMap() = 0;

private:
    const int _maxStates;
    bool _eventGenerated;
    EventData* _pEventData;
    void StateEngine(void);
};

typedef void (CStateMachine::*StateFunc)(EventData *);
struct StateStruct 
{
    StateFunc pStateFunc;    
};

#define BEGIN_STATE_MAP \
public:\
const StateStruct* GetStateMap() {\
    static const StateStruct StateMap[] = { 

#define STATE_MAP_ENTRY(entry)\
    { reinterpret_cast<StateFunc>(entry) }, //IT COMPLAINS ABOUT THE CAST HERE...

#define END_STATE_MAP \
    { reinterpret_cast<StateFunc>(NULL) }\
    }; \
    return &StateMap[0]; }

#define BEGIN_TRANSITION_MAP \
    static const unsigned char TRANSITIONS[] = {\

#define TRANSITION_MAP_ENTRY(entry)\
    entry,

#define END_TRANSITION_MAP(data) \
    0 };\
    ExternalEvent(TRANSITIONS[currentState], data);} 
```

并且实现如下，同样来自DDJ文章，除了多重继承...

```
// structure to hold event data passed into state machine
struct MotorData : public EventData
{
    int speed;
};

class CMotor :
    public CStateMachine,
    public CSimulationObject //THIS IS NEW, NOT FROM THE ARTICLE IT CONTAINS A VIRTUAL FUNCTION void _step( double dt);
{
private:
    double dSetpoint;
public:
    CMotor(void): CStateMachine( ST_MAX_STATES), dSetpoint(0.0){};

    // external events taken by this state machine
    void Stop();
    void SetSpeed(MotorData*);

private:
    void _step( double dt);

    // state machine state functions
    void ST_Idle(MotorData*);
    void ST_Stop(MotorData*);
    void ST_Start(MotorData*);
    void ST_ChangeSpeed(MotorData*);

    // state map to define state function order
    BEGIN_STATE_MAP
        STATE_MAP_ENTRY( ST_Idle )        //ERRORS ON THESE LINES
        STATE_MAP_ENTRY( ST_Stop )        //
        STATE_MAP_ENTRY( ST_Start )       // 
        STATE_MAP_ENTRY( ST_ChangeSpeed ) //
    END_STATE_MAP

    // state enumeration order must match the order of state
    // method entries in the state map
    enum E_States { 
        ST_IDLE = 0,
        ST_STOP,
        ST_START,
        ST_CHANGE_SPEED,
        ST_MAX_STATES
    };
}; 
```

非常感谢对正在发生的事情的任何解释或提示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:12:15.173

我找到了各种各样的答案。我不得不重写一些代码。定义。

```
class CStateMachine;
typedef void (CStateMachine::*StateFunc)(void *);

class CStateMachine : public CObject
{
    DECLARE_DYNAMIC(CStateMachine)

public:
    CStateMachine(int nMaxStates);
    virtual ~CStateMachine() {};

    unsigned char GetCurrentState() { return currentState;};
protected:
    enum { EVENT_IGNORED = 0xFE, CANNOT_HAPPEN };
    unsigned char currentState;
    void ExternalEvent(unsigned char, EventData* = NULL);
    void InternalEvent(unsigned char, EventData* = NULL);
    virtual const StateFunc* GetStateMap() const = 0;

private:
    const int _maxStates;
    bool _eventGenerated;
    EventData* _pEventData;
    void StateEngine(void);
};

/*struct StateStruct 
{
    StateFunc pStateFunc;    
};*/

#define BEGIN_STATE_MAP(TheClass, TheData) \
private:\
typedef TheClass ThisClass;\
typedef void (ThisClass::*ThisStateFunc)(void *);\
public:\
const StateFunc* GetStateMap() const {\
    static const StateFunc StateMap[] = { 

#define STATE_MAP_ENTRY(entry)\
    { static_cast<StateFunc>(static_cast<ThisStateFunc>((entry))) },

#define END_STATE_MAP \
    { static_cast<StateFunc>(NULL) }\
    }; \
    return &StateMap[0]; }

#define BEGIN_TRANSITION_MAP \
    static const unsigned char TRANSITIONS[] = {\

#define TRANSITION_MAP_ENTRY(entry)\
    entry,

#define END_TRANSITION_MAP(data) \
    0 };\
    ExternalEvent(TRANSITIONS[currentState], data); 
```

# javascript - Firefox javascript重定向在ajax回调结果白屏

> ID：13668917
> 
> 赞同：1
> 
> 时间：2012-12-02T11:39:39.693
> 
> 标签：javascript, ajax, firefox, redirect, window.location

我正在尝试在 ajax 回调函数中将 Firefox 从当前地址**url_1**重定向到**url_2**这样做：

```
window.location = url_2 
```

这行代码执行后，地址行显示相同的**url_1**，但浏览器窗口只显示白屏并在此状态下挂起。

我尝试了不同的方法，但结果相同：

```
window.location.assign(url_2)

window.location.replace(url_2)

window.location = url_2
return false;

window.location.href = url_2 
```

此外，我注意到在 window.location 之前插入 alert('something') 会导致 Firefox 正常工作，并且在对话窗口关闭后会重定向到**url_2**。

其他浏览器可以毫无问题地进行重定向。

如何解决这个问题？

其余代码：

```
initializeViewModels = function (data, submitUrl) {

    // Handler of "submit" button click
    $(".submit").click(function () {
        var json = ko.toJSON(window.viewModel);

        //Submiting data to the server
        $.ajax({
            url: submitUrl,
            type: 'POST',
            dataType: 'json',
            data: json,
            contentType: 'application/json; charset=utf-8',
            success: callback
        });
    });

    var callback = function (data) {
        var url_2 = window.myViewUrl + '/' + data.Id.toString();
        window.location = url_2;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:15:15.643

挂起是由回调函数引起的。由于 AJAX 调用未完全关闭，垃圾收集器在尝试在到达请求的 url_2 之前卸载页面时会产生问题。

您可以使用它来解决问题，而不是直接将您的`window.location.replace()`行放在 AJAX回调中，因为这将在 AJAX 闭包之外异步执行任务。`onSuccess``setTimeout(window.location.replace(),5);`

# php - 安装 xdebug

> ID：13668918
> 
> 赞同：1
> 
> 时间：2012-12-02T11:39:44.743
> 
> 标签：php, xdebug

我想在我的 wamp 服务器上安装 xdebug。为我的 wamp 查找当前 xdebug 已经在这个网站上。

[http://xdebug.org/wizard.php][1]

在这个网站上，我已经粘贴了我的 phpinfo 源代码，当我提交它时会产生以下消息。

**不再支持构建此 PHP 的编译器 (MS VC6)。请升级到使用 MS VC9 构建的版本。**

那么这里的问题是什么？xdebug 不能在我的 wamp 上工作？

我将不胜感激任何类型的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:40:40.550

您必须将 PHP 扩展的“构建”与 PHP 的“构建”相匹配...

您使用的是用 VC6 编译的旧 PHP 版本（1998 年的 Visual C++ 版本）。可能是 PHP 5.2。

PHP 5.3 及更高版本现在仅使用 VC9 (VS.NET 2008) 构建。

XDebug 现在仅作为 VC9 版本提供。

您需要更新到至少具有 PHP 5.3 的较新 WAMP 版本 - [xampp](http://www.apachefriends.org/en/xampp-windows.html) - Wamp [-Developer Pro](http://www.devside.net/server/webdeveloper) - [UniformServer](http://www.uniformserver.com/) - [WampServer](http://www.wampserver.com/en/)

# windows - Windows批处理，在嵌套循环中设置变量

> ID：13668922
> 
> 赞同：2
> 
> 时间：2012-12-02T11:40:36.137
> 
> 标签：windows, loops, batch-file, command, nested

我有以下批处理从文本文件中读取数据，问题出在内部循环中；它应该在目标文件夹中获取 lat 创建的文件，但它什么也得不到！

这是我的代码：

```
:: Delete Files from folder
@echo off
:: Delete Files from folder
echo y | del "E:\HIS_Data_Consolidation\HIS_Backups\*.bak" 
echo Deleting previous bak files...
set destdir=E:\HIS_Data_Consolidation\HIS_Backups
setlocal
FOR /F "tokens=1,2,3 delims=," %%G IN (clinics.txt) DO (
pushd "%%G"
for /F  "tokens=*" %%a in ('dir *.* /b /a-d /o:e 2^>NUL') do (
set lfile=%%a
)
echo copying "%%G\%lfile%" to "%destdir%" ,,,%%H
copy /y "%%G\%lfile%" "%destdir%
E:
cd "%destdir%
E:\HIS_Data_Consolidation\HIS_Backups\unrar.exe e "%destdir%/%lfile%"
echo y | del "E:\HIS_Data_Consolidation\HIS_Backups\*.rar" 
echo Deleting RAR file...
SET v_test=%lfile%
SET v_result=%v_test:rar=bak%
ren "%v_result%"  "%%I"
echo Ready ...
popd
)
pause 
```

感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:27:51.113

如果您使用的是一套内部`for`身体，您将需要`enabledelayedexpansion`： [http ://www.robvanderwoude.com/variableexpansion.php](http://www.robvanderwoude.com/variableexpansion.php)

编辑：

```
:: Delete Files from folder
@echo off
:: Delete Files from folder
echo y | del "E:\HIS_Data_Consolidation\HIS_Backups\*.bak" 
echo Deleting previous bak files...
set destdir=E:\HIS_Data_Consolidation\HIS_Backups

setlocal enabledelayedexpansion
FOR /F "tokens=1,2,3 delims=," %%G IN (clinics.txt) DO (
    pushd "%%G" 
    for /F  "tokens=*" %%a in ('dir *.* /b /a-d /o:e 2^>NUL') do (
        set lfile=%%a
    )
    echo copying "%%G\!lfile!" to "!destdir!" ,,,%%H
    copy /y "%%G\!lfile!" "!destdir!"
    E:
    cd "!destdir!"
    E:\HIS_Data_Consolidation\HIS_Backups\unrar.exe e "!destdir!/!lfile!"
    echo y | del "E:\HIS_Data_Consolidation\HIS_Backups\*.rar" 
    echo Deleting RAR file...
    SET v_test=!lfile!
    SET v_result=!v_test:rar=bak!
    ren "!v_result!"  "%%I"
    echo Ready ...
    popd
)
endlocal
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T06:02:08.993

@npocmaka 谢谢！你解决了我工作了好几个小时的问题！我有一个类似的问题。

我正在使用嵌套的 for 循环并尝试将 for 循环拆分为另一个批处理文件，但没有奏效。所以我使用了'npocmaka的建议：

这是正在调用的批处理，它位于另一个 for 循环中。

```
@ECHO OFF

SET dir=%~1
SET suf=%~2

ECHO IN dir:%dir%
ECHO IN suf:%suf%
PAUSE

SET /A count=1

SETLOCAL EnableDelayedExpansion
pushd %dir%
FOR /R . %%A IN (*.%suf%) DO (

    ECHO File: %%~nxA count:!count!
    PAUSE
    REN %%~nxA !count!.txt
    CALL :increment RESULT count
)
popd
ENDLOCAL

:increment
SET /A count+=1 
```

# android - 隐藏键盘问题

> ID：13668924
> 
> 赞同：0
> 
> 时间：2012-12-02T11:40:42.553
> 
> 标签：android

单击按钮时，我正在使用以下代码隐藏键盘：

```
private OnClickListener saveButtonListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        final View activityRootView = findViewById(R.id.myProfileDetails);
        activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
                if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
                    imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
                }
             }
        });
        //other code that does something

    }

} 
```

该按钮还可以执行其他一些操作，但它们都与键盘无关，并且在按下按钮时，活动不会改变。

我的活动中也有两个`EditText`领域。当我使用该应用程序并点击任一字段时，它们会获得焦点并出现键盘。当我按下按钮时，键盘消失，其他代码完全按原样执行。在这种情况下，一切都很完美。

`EditText`当第二次点击任一字段时，就会出现问题。现在，`EditText`获得焦点，但键盘几乎立即出现和消失，而我没有做任何事情。我猜我的代码在我第一次单击按钮后使键盘永久消失。为什么会发生这种情况，我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:56:41.680

你正在初始化`ClickListener`你的`OnClick`. 这将尽快隐藏键盘`heightDiff>100`。不要这样做。

这样做

```
private OnClickListener saveButtonListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
                    imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                   imm.hideSoftInputFromWindow(
                                editText.getWindowToken(), 0);

        //other code that does something

    }

} 
```

# vim - Chromebook 中带有 SSH-Agent 的本地 Vim、本地文件系统和 SSH 客户端？

> ID：13668925
> 
> 赞同：5
> 
> 时间：2012-12-02T11:41:05.260
> 
> 标签：vim, ssh, filesystems, ssh-agent, chromebook

我在某处读到启用开发人员开关后这是可能的，但找不到如何访问它。[这里](http://news.ycombinator.com/item?id=4083175)的一个线程解释了一些关于包含 ssh 工具但缺少本地版本讨论的 javascript 插件。那么如何在 Chromebook 中拥有本地 fs、本地 Vim 和 ssh 客户端？用SSH客户端，我也是。想要密钥认证又名 ssh-agent。

**在没有互联网的情况下，我怎样才能让这种 Chromebook 的开发弹性降低？开发需要本地工具，例如 Vim、本地 FS 和带有 SSH-Agent 的 SSH-Client。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:38:24.493

您需要打开开发人员。该交换机至少在 2012 年 10 月/11 月三星机型之上被虚拟化。说明[在这里](http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices/samsung-series-5-chromebook)。

**打开 Developer 开关后获取 Bash、Vim、Ssh-agent 等工具的说明**

> 您需要打开 Crosh，然后键入并按回车，`"shell ENTER"`或另见`"help ENTER"`。因此，通过这种方式可以使用 ssh-agent 和 Vim 获得完整的 bash：
> 
> > CTRL+ALT T
> > 
> > 克罗什>壳
> > 
> > chrosos@localhost / $ 回声 $SHELL
> > 
> > /bin/bash
> > 
> > chrosos@localhost / $ vim

**也许相关**

1.  关于使用 Chromebook 的一些讨论[https://plus.google.com/109993695638569781190/posts/BHo38NLkMz4](https://plus.google.com/109993695638569781190/posts/BHo38NLkMz4)

2.  Secure Shell 应用程序在某些 Chromebook 上存在一些问题，例如三星 2012 年 10 月，挂断 NaCL

3.  [在三星 chromebook 上编程](https://stackoverflow.com/questions/7299685/programming-on-samsung-chromebook)

*Ps 如果你想切换到你最喜欢的键盘布局，例如 Dvorak，你可以在 chrome://settings/languages 中找到它。*

# ruby - 如何在正则表达式中转义普通字符？

> ID：13668927
> 
> 赞同：0
> 
> 时间：2012-12-02T11:41:21.893
> 
> 标签：ruby, regex, escaping

我正在运行最新版本的 sinatra 和 ruby​​ 1.9.3

我让用户在我的 sinatra 应用程序中创建自定义正则表达式。

代码：

```
Posts.all(:message => %r{(?i)(.*)#{params[:searchterm]}(.*)}) 
```

如何逃脱`#{params[:searchterm]}`以使用户无法插入更多正则表达式？

（如果用户搜索`(.)*user`他得到的结果不应该工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:08:35.303

用于[`Regexp.escape`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-quote)转义变量值：

```
%r{(?i)(.*)#{Regexp.escape(params[:searchterm])}(.*)} 
```

# data-binding - 与 Windows Phone 8 的地图 API 扩展绑定

> ID：13668929
> 
> 赞同：4
> 
> 时间：2012-12-02T11:41:35.277
> 
> 标签：data-binding, windows-phone-8, toolkit

我正在尝试将数据绑定与 windows phone 工具包的 map api 扩展一起使用。我正在做 ：

```
<maps:Map x:Name="Map" Center="47.6, -122.3" ZoomLevel="12">
    <maptk:MapExtensions.Children>
        <maptk:MapItemsControl ItemsSource="{Binding PositionList}">
            <maptk:MapItemsControl.ItemTemplate>
                <DataTemplate>
                    <maptk:Pushpin GeoCoordinate="{Binding}" />
                </DataTemplate>
            </maptk:MapItemsControl.ItemTemplate>
        </maptk:MapItemsControl>
    </maptk:MapExtensions.Children>
</maps:Map> 
```

后面有我的代码：

```
public partial class MainPage : PhoneApplicationPage, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }

    private bool NotifyPropertyChanged<T>(ref T variable, T valeur, [CallerMemberName] string name= null)
    {
        if (object.Equals(variable, valeur)) return false;

        variable = valeur;
        NotifyPropertyChanged(name);
        return true;
    }

    private IEnumerable<GeoCoordinate> positionList;
    public IEnumerable<GeoCoordinate> PositionList
    {
        get { return positionList; }
        set { NotifyPropertyChanged(ref positionList, value); }
    }

    public MainPage()
    {
        InitializeComponent();
        PositionList = new List<GeoCoordinate> 
        { 
             new GeoCoordinate(47.6050338745117, -122.334243774414),
             new GeoCoordinate(47.6045697927475, -122.329885661602),
             new GeoCoordinate(47.605712890625, -122.330268859863),
             new GeoCoordinate(47.6015319824219, -122.335113525391),
             new GeoCoordinate(47.6056594848633, -122.334243774414)
        };

        DataContext = this;
    }
} 
```

但我在地图上看不到任何图钉:(

我究竟做错了什么 ？

请注意，如果我在代码隐藏文件中使用它，它就可以工作

```
MapExtensions.GetChildren(Map).OfType<MapItemsControl>().First().ItemsSource = PositionList; 
```

在此先感谢您的帮助，

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:00:36.177

MapItemsControl 派生自 DependencyObject，而不是 FrameworkElement，因此 DataContext 不会传播。长话短说...除非您有某种方法可以设置绑定的 Source 属性，否则您不能从 XAML 数据绑定 MapItemsControl。

如果RelativeSource 的FindAncestor 模式在手机上工作，也许可以解决这个问题，但显然不行。这让我们要么在代码中创建绑定，要么（更实际地）在代码中设置 ItemsSource。

# php - Web 服务 API 设计中哪个模式更好

> ID：13668930
> 
> 赞同：3
> 
> 时间：2012-12-02T11:41:35.973
> 
> 标签：php, mysql, json, web-services, api

最近，我们的团队打算为我们现有的网站开发移动（iphone，android平台）应用程序，让用户可以使用应用程序更容易地通过应用程序阅读我们的内容。

但是我们的团队对 API 返回的 JSON 模式有不同的看法，下面是示例响应。

模式类型 1：

```
{
"success": 1,
"response": {
    "threads": [
        {
            "thread_id": 9999,
            "title": "Topic haha",
            "content": "blah blah blah",
            "category": {
                "category_id": 100,
                "category_name": "Chat Room",
                "category_permalink": "http://sample.com/category/100"
            },
            "user": {
                "user_id": 1,
                "name": "Hello World",
                "email": "helloworld@hello.com",
                "user_permalink": "http://sample.com/user/Hello_World"
            },
            "post_ts": "2012-12-01 18:16:00T0800"
        },
        {
            "thread_id": 9998,
            "title": "asdasdsad ",
            "content": "dsfdsfdsfds dsfdsf ds",
            "category": {
                "category_id": 101,
                "category_name": "Chat Room 2",
                "category_permalink": "http://sample.com/category/101"
            },
            "user": {
                "user_id": 2,
                "name": "Hello baby",
                "email": "hellobaby@hello.com",
                "user_permalink": "http://sample.com/user/2"
            },
            "post_ts": "2012-12-01 18:15:00T0800"
        }
    ]
}
} 
```

模式类型 2：

```
{
"success": 1,
"response": {
    "threads": [
        {
            "thread_id": 9999,
            "title": "Topic haha",
            "content": "blah blah blah",
            "category": 100,
            "user": 1,
            "post_ts": "2012-12-01 18:16:00T0800"
        },
        {
            "thread_id": 9998,
            "title": "asdasdsad ",
            "content": "dsfdsfdsfds dsfdsf ds",
            "category": 101,
            "user": 2,
            "post_ts": "2012-12-01 18:15:00T0800"
        }
    ],
    "category": [
        {
            "category_id": 100,
            "category_name": "Chat Room",
            "category_permalink": "http://sample.com/category/100"
        },
        {
            "category_id": 101,
            "category_name": "Chat Room 2",
            "category_permalink": "http://sample.com/category/101"
        }
    ],
    "user": [
        {
            "user_id": 1,
            "name": "Hello World",
            "email": "helloworld@hello.com",
            "user_permalink": "http://sample.com/user/Hello_World"
        },
        {
            "user_id": 2,
            "name": "Hello baby",
            "email": "hellobaby@hello.com",
            "user_permalink": "http://sample.com/user/Hello_baby"
        }
    ]
}
} 
```

一些开发人员声称，如果使用模式类型 2，

*   如果类别和用户实体重复过多，可以减少数据大小。它确实减少了至少 20~40% 的响应纯文本大小。
*   一旦数据大小变小，在将其解析为 JSON 对象时，内存会变少
*   categoey & user 可以存储在 hash-map 中，便于复用
*   减少检索数据的开销

我不知道模式类型 2 是否真的增强了。因为看了很多API文档，从来没见过这种模式设计。对我来说，它看起来像一个关系数据库。所以我有几个问题，因为我没有设计 Web 服务 API 的经验。

*   是否违反 API 设计原则（易于阅读、易于使用）？
*   在 IOS/Android 平台上解析真的变得更快，内存资源更少吗？
*   它可以减少客户端和服务器之间的开销吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:59:02.420

当我为 android 做这样的应用程序时，我只解析一个 JSON 并将其放入数据库中。后来我使用 ContentProvider 来访问它。在您的情况下，您可以使用第二个模式，但没有用户、类别部分。改用延迟加载，但如果类别和用户经常重复，这将是一个很好的解决方案。

# android - 如何在 GSON TypeToken 类中使用自定义泛型？

> ID：13668932
> 
> 赞同：9
> 
> 时间：2012-12-02T11:42:11.140
> 
> 标签：android, json, gson

我想将不同的 List 集合传递给 GSON 中的 TypeToken 类。这是我的课

```
public class ConvertToObject<T> {

public  T MappFrom(InputStream is) 
    String json = ConvertJsonInputStream.toString(is);
    Gson gson = new Gson();
    Type typeOfDest = new TypeToken<T>() {
    }.getRawType();
    T lstObject = gson.fromJson(json, typeOfDest);
    return lstObject ;
}

} 
```

现在我想以不同的方式实例化我的类，如下所示：

```
AssetManager am = getApplicationContext().getAssets();
InputStream is = am.open("form.txt");
ConvertToObject<List<Form>> co = new ConvertToObject<List<Form>>();
List<Form> JsonForm = co.MappFrom(is);

InputStream is2 = am.open("Messages.txt");
ConvertToObject<List<Messages>> co = new ConvertToObject<List<Messages>>();
List<Messages> JsonForm = co.MappFrom(is2); 
```

我的资产文件夹中有 27 个 Json txt 文件，我想将这些 JSON txt 文件解析为相应的类。我该怎么做？

**编辑：** 这样我捕捉到一个异常：

```
Caused by: java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to com.mypackage.Form 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T06:21:26.040

我这样解决了我的问题

```
public class ConvertToObject<T> {
    public List<T> mapFrom(InputStream is, Type typeOfDest) {

        String json = ConvertJsonInputStream.toString(is);

        Gson gson = new Gson();
        List<T> lstForm = gson.fromJson(json, typeOfDest);

        return lstForm;
} 
```

在我的活动中，我有以下代码：

```
ConvertToObject<Menu> co = new ConvertToObject<Menu>();
    Type typeOfDest = new TypeToken<List<Menu>>() {
    }.getType();

    AssetManager am = getResources().getAssets();
    Log.i("AssetManager", "AssetManager");
    InputStream is = null;
    try {
        is = am.open("menu.txt");
    } catch (IOException e) {
        Log.i("InputStream", e.getMessage());
    }
    List<Menu> JsonForm = co.mapFrom(is, typeOfDest); 
```

# jquery - 如何检测文件何时上传到文件类型的输入元素？

> ID：13668933
> 
> 赞同：3
> 
> 时间：2012-12-02T11:42:16.257
> 
> 标签：jquery, asp.net-mvc-3, file-upload

当文件上传到如下输入元素时，有什么方法可以使用 jQuery 进行检测：

`<input type='file' name='filex' id='filex' style="height: 2.3em" size="23" />`

我正在寻找特定于何时将文件放置（上传）到元素的事件，而不是在打开打开文件对话框之前单击元素时的事件。我知道我可以提交表单然后获取文件服务器端，但我想在确认提交表单之前向用户显示缩略图。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:59:34.133

由于`file`输入将在没有选择文件的情况下开始，并且在没有用户交互的情况下无法选择任何文件，我建议使用该`change()`方法（使用`change`事件）：

```
$('input:file').change(
    function(e){
        console.log('file "' + path.split('\\').pop(); + '" selected.');
    }); 
```

参考：

*   [`:file`选择器](http://api.jquery.com/file-selector/)。
*   [使用 jQuery 获取文件输入的选定文件名，不带路径](https://stackoverflow.com/questions/6365858/use-jquery-to-get-the-file-inputs-selected-filename-without-the-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:07:24.350

```
var fileInput = document.getElementById('filex');

fileInput.onchange = function(e){
    if(e.target.files.length > 0)
        // File uploaded
} 
```

# windows - 如何为 Windows 编写一个新的 Alt+Tab 任务切换器？

> ID：13668935
> 
> 赞同：0
> 
> 时间：2012-12-02T11:42:32.853
> 
> 标签：windows, winapi, windows-7, msdn

有人告诉我，处理 ALT+TAB 输入的程序称为任务切换器。但我对库存提供的任务切换器不满意。

谁能给我推动正确的方向，以便我知道如何自己编写一个并用新的替换旧的？

不是我没有编程经验，我只是不知道从哪里开始这个特殊的。:D

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T02:32:52.777

在 Windows 中编写替换切换器有三个基本要素（这些在 Windows 7 下进行了测试）：

1.  捕获 Alt+Tab：为此，我将使用[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)低级[键盘挂钩](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)( `WH_KEYBOARD_LL`)。

2.  枚举您可以在其间切换的窗口：两个选项是[`EnumWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)UI 自动化框架（托管代码可以使用[`System.Windows.Automation`](http://msdn.microsoft.com/en-us/library/system.windows.automation%28v=vs.110%29.aspx)）。

3.  执行切换：您可以使用[`SwitchToThisWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633553%28v=vs.85%29.aspx)或[`SetForegroundWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)，但无论哪种情况，您都需要[`uiAccess=true`](http://msdn.microsoft.com/en-us/library/ms742884%28v=vs.110%29.aspx)在清单中进行设置。这还需要您签署可执行文件并将其安装在 Program Files 中。您**无需**致电`AttachThreadInput`或执行其他此类恶作剧。

如需更深入的讨论，请参阅[此博客文章](http://blog.misterfoo.com/2014/02/how-do-i-write-alttab-replacement.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:55:31.957

我们已在此链接中回答了您的问题： [如何关注上次激活的程序？](https://stackoverflow.com/questions/13659970/how-to-focus-on-last-activated-program/13660585#13660585) 通过使用此代码而不是那个代码，您可以获得打开的窗口列表，

```
string name = GetWindowTextRaw((IntPtr)hwnd);
if (name.Length > 0)
{
     windowArray.Add(hwnd);
} 
```

现在您可以使用以下代码在窗口之间切换：

```
SetForegroundWindow((IntPtr)windowArray.sth); 
```

# django - 在 Heroku 中安装 C 库

> ID：13668936
> 
> 赞同：4
> 
> 时间：2012-12-02T11:42:35.290
> 
> 标签：django, heroku, geoip

我正在尝试将[GeoIP](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)与 Django 一起使用。它需要[MaxMind GeoIP C API](http://www.maxmind.com/download/geoip/api/c/)。

如果我使用的是 Ruby，我可以简单地使用捆绑 C API 和 Ruby 绑定的“geoip”gem，如在[heroku 上安装 MaxMind GeoIP ruby​​ 库中所述](https://stackoverflow.com/questions/11368461/installing-maxmind-geoip-ruby-library-on-heroku)。

不幸的是，Python 不存在这样的东西，所以我想知道如何从 Heroku 上的源代码安装 C API，或者 Heroku 上是否有等效的包管理器（即 OS X 的“brew install geoip” , 和 'sudo apt-get install geoip' 用于 Ubuntu）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:22:22.153

您需要编写自己的 buildpack 来编译 Heroku 中的任何内容，在您推送代码时，并且在您的 requirements.txt 中有一个包含二进制要求的包。请参阅 python buildpack 代码来指导您的工作[https://github.com/heroku/heroku-buildpack-python](https://github.com/heroku/heroku-buildpack-python)

# actionscript-3 - 如何在自定义渲染器上获得 showDataTips 的效果？

> ID：13668937
> 
> 赞同：0
> 
> 时间：2012-12-02T11:42:34.930
> 
> 标签：actionscript-3, apache-flex, flex3, itemrenderer

我`AdvancedDataGrid`在其中一列（扩展`AdvancedDataGridItemRenderer`）上有一个自定义渲染器。当它的内容太短时，我有兴趣将列中的全文显示为工具提示。使用标准渲染器，我可以通过使用轻松实现此效果`showDataTips`，但它不适用于自定义渲染器。我尝试以多种方式测量文本宽度并将其与列宽进行比较，但我得到的值不正确，到目前为止没有任何效果。这是一个例子：

```
public override function set data(value:Object):void
{
    super.data=value;
    var metrics:TextLineMetrics=getLineMetrics(0);
    if (metrics.width>this.width) toolTip=text; else toolTip="";
} 
```

如果有人知道这个问题的解决方案，如果他/她可以分享，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:31:26.463

试试这个

```
public override function set data(value:Object):void
{
    super.data=value;
    var metrics:TextLineMetrics=measureText(text);
    if (metrics.width>this.width) toolTip=text; else toolTip="";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:59:16.493

我其实已经解决了。如果其他人遇到同样的问题，这是解决方案：

```
public override function validateSize(recursive:Boolean=false):void
{
    super.validateSize(recursive);
    if ((AdvancedDataGrid(listData.owner).columns[listData.columnIndex].
            showDataTips)&&(textWidth>width))
        toolTip=listData.label;
    else toolTip=null;
} 
```

# objective-c - 通过情节提要场景的变化使标签内容持久化

> ID：13668939
> 
> 赞同：0
> 
> 时间：2012-12-02T11:42:50.733
> 
> 标签：objective-c, ios, xcode, storyboard, uilabel

我有一个包含三个场景的故事板，所有场景都包含相同的`UILabel`. 它连接到`IBOutlet UILabel *mainLabel;`我的 IBOutlet，`ViewController.h`一切正常，直到场景改变，当它重置时，就好像应用程序从后台被杀死并再次启动一样。
UILabel 不应该在场景更改时简单地重置，并保留更改之前的值，而不是重置为默认值。

场景之间的变化仅通过 Storyboard 作为模态 segues 完成。
我会提供更多相关的代码，但我找不到任何可能影响这一点的东西。
你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:17:38.430

viewDidUnload 被调用了吗？如果需要内存，可以卸载不在屏幕上的视图，在这种情况下，下次需要时它会从笔尖再次加载，恢复为默认值。viewController 不是，因此您可以将标签内容存储在 ivar（NSString？）中，然后在 viewDidLoad 上您可以恢复标签的状态。

# git - git，即时压缩提交

> ID：13668943
> 
> 赞同：5
> 
> 时间：2012-12-02T11:43:41.943
> 
> 标签：git, rebase, squash

我有一个本地 git 仓库，一个远程仓库。自从上次从远程拉取以来，我对本地仓库进行了 5 次提交。

现在我需要推送到远程。我需要压缩我最后的 5 次提交。

我可以做到`git rebase -i HEAD~5`

但这并不好。我不想更改本地存储库中的任何内容。我想将一个压缩的提交推送到远程，并在我的本地存储库中保留 5 个未更改的提交。

有任何想法吗？

UPD：如果我有 5 次提交的本地仓库怎么办。我需要创建新的远程仓库来与其他人分享我的代码。如何压缩这个新仓库的提交？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T11:51:16.080

如果你只是想保留你的五个提交以供参考，也许你应该和他们一起在一个分支中工作。

1.  `git branch new-branch master`

2.  做你的承诺。既然你已经这样做了，只需重置主人的头：

    `git reset --hard HEAD~5`

3.  `git merge --squash master new-branch`

4.  `git push`

你最终会得到 squashed commit on`master`和`origin/master`5 commits on `new-branch`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:33:38.413

[与Titas](https://stackoverflow.com/users/750495/titas)的[回答](https://stackoverflow.com/a/13669011/6309)略有不同，无需触及您的`master`分支，并挤压一个新分支（您将推送到您的新仓库）

```
 git remote add newrepo url://of/your/new/repo
 git checkout -b newbranch master
 git merge --squash master 
 git push -u newrepo newbranch:master 
```

但这会在你的新仓库中推送 master 的完整历史，+1（压缩）提交。

如果你想要一个新的分支历史，你的 repo 在 5 次新提交之后，更容易：

*   在本地克隆你的仓库，
*   删除该`.git`本地克隆中的，
*   `git init.`（即，从所有现有文件重新创建一个新的本地 git repo），
*   添加所有内容并进行一次提交，
*   添加你的遥控器（到你的*新*远程仓库），
*   并推送您的新本地存储库的一次提交。

# mysql - Mysql通过部分匹配搜索相似整数

> ID：13668947
> 
> 赞同：3
> 
> 时间：2012-12-02T11:44:03.040
> 
> 标签：mysql, matching

好的。我将尝试详细描述我的案例。我已经向 4 个用户提出了 6 个问题（是/否），并将这个答案记录为字符串变量（1-是，0-否）。因此，我有：

```
CREATE TABLE `answers` (
  `user_id` int(10) unsigned NOT NULL,
  `answers` int(6) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
);
INSERT INTO `answers` VALUES ('1', '111111');
INSERT INTO `answers` VALUES ('2', '111000');
INSERT INTO `answers` VALUES ('3', '110011');
INSERT INTO `answers` VALUES ('4', '100001'); 
```

现在我试图找到类似于我的“111111”结果的结果（我对所有问题的回答都是*肯定*的）。有趣的是 50% 匹配的行。

用户 #1 有 100% 的匹配答案 111111=111111
用户 #2 有 50% 的匹配答案 111000 -> 111111
...等等

所以我想发现什么查询会为我找到 50% 的匹配行:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:49:33.693

在 OP 添加架构后，我重写了答案。

首先，这是一个非常复杂的问题，将其封装在存储函数中是有意义的：

```
DELIMITER ;; -- In case you are using PHPMyAdmin or something like that

-- Calculates the number of matching answers between
-- two users, given the total number of answers each user has made
-- Replace 6 everywhere in this function with the number of questions (if it changes)
CREATE FUNCTION NumberOfMatchingAnswers(p_user1 INT, p_user2 INT) RETURNS INT

BEGIN
DECLARE i INT Default 1; -- Loop counter
DECLARE str_user1 VARCHAR(6); 
DECLARE str_user2 VARCHAR(6); 
DECLARE num_matched_answers INT Default 0;

SET str_user1 = LPAD(p_user1,6,'0');
SET str_user2 = LPAD(p_user2,6,'0');

answer_match_loop : LOOP

    IF SUBSTR(str_user1, i, 1) = SUBSTR(str_user2, i, 1) THEN
        SET num_matched_answers = num_matched_answers + 1;
    END IF;

    SET i = i + 1; -- Basically the equivalent of a FOR loop
    IF i > 6 THEN
        LEAVE answer_match_loop;
    END IF;
END LOOP answer_match_loop;

RETURN num_matched_answers;

END;; 
```

现在我们已经定义了存储函数，我们可以基于它创建查询：

```
SELECT user_id FROM Answers WHERE
NumberOfMatchingAnswers(Answers.answers, 101101) >= 3; 
```

此查询将获取与三个或更多问题`user_id`中回答相同的所有匹配s。`101101`

那么，如何在系统中使用此查询？

1.  替换`101101`为您要比较的实际答案集
2.  如果您发现误报太多，请增加数量`3`，使您的阈值高于 50%
3.  编写一个查询，找出所有`user_id`匹配度大于 50% 的 s 对
4.  等等等等。

**注意**：如果您希望将系统扩展为不仅接受是/否输入，而且实际上允许一系列选项，那么这个存储的函数将能够应付。因为它比较每个数字，所以每个问题最多可以有 10 个可能的答案，它仍然可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:15:00.430

[BIT_COUNT](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html#function_bit-count)应该可以帮助您。

```
SELECT * FROM table WHERE BIT_COUNT(score)>=3; 
```

此查询假设您有 6 个问题并查找分数为 50%+ 的分数；

如果您插入这样的行

```
INSERT INTO `answers` VALUES ('1', b'111111'); 
```

您不必使用转换。

更准确地说，如果您以这种方式插入分数，它们将被视为二进制，您可以在您的情况下成功使用按位运算符。所以如果你这样做

```
SELECT user_id, BIT_COUNT(answers) FROM answers 
```

您将获得正确答案的数量。要从给定的分数中获得 +/- 2 分，它将是

```
SELECT user_id FROM answers WHERE BIT_COUNT(answers) BETWEEN BIT_COUNT(score_to_compare_with)-2 AND BIT_COUNT(score_to_compare_with)+2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:24:49.040

我所说的答案可能太复杂了。不过，觉得最好分享一下。

对于所有 24 个问题，您可能需要生成正确/错误答案的排列作为模式。将它们存储在具有每个模式的唯一 ID 的表中。

然后，您将当前的答案表列与该模式表匹配以获取总和、计数等。

让我通过一个样本来重新表述和解释。此查询将为您提供完全匹配。但是，如果没有完全匹配，您可以进行必要的更改以获得部分匹配。

## 参考：[SQLFIDDLE](http://www.sqlfiddle.com/#!2/291c8/2)

您的模式表：

```
ANSWERS     CONV(BINARY ANSWERS,2,10)
111111      63
111000      56
110011      51
100001      33 
```

你的答案表：

```
ID  ANSWERS
1   111111
2   111000
3   110011
4   100001
5   111000 
```

查询以显示每个匹配项的计数：

```
select count(*) into @all from scores;
select x.p as b_answer_pattern,
conv(x.p,10,2) as answer_pattern, 
count(x.id)as counts, 
concat(round((count(x.id)/@all)*100,2),'%') as pct
from (
select id, conv(binary answers,2,10) as p
from scores) as x
group by x.p; 
```

结果：

```
B_ANSWER_PATTERN    ANSWER_PATTERN  COUNTS  PCT
33                  100001           1      20.00%
51                  110011           1      20.00%
56                  111000           2      40.00%
63                  111111           1      20.00% 
```

# ruby - ruby 正则表达式拆分字符串。但如果它是包含在排除列表中的单词的一部分，则不是

> ID：13668950
> 
> 赞同：0
> 
> 时间：2012-12-02T11:44:20.057
> 
> 标签：ruby, regex, split

我想用一个特定的字符分割句子，但只要这个字符没有用作排除列表中包含的单词的一部分。例如，我想用句号“。”来分割句子。但我只是在“博士”或“教授”之后没有使用它。例如：

“我是物理学博士，我叫 Sheldon Cooper。我在帕萨迪纳大学工作。”

所以正则表达式应该只在“Cooper”之后被句号分割，而不是在“Dr”之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:55:45.080

您可以使用否定的lookbehind：

```
a = "Im a Dr. of Physics and my Name is Sheldon Cooper. Im working at the University of Pasadena."
a.split(/(?<!Dr|Prof)\./)
#=> ["Im a Dr. of Physics and my Name is Sheldon Cooper", " Im working at the University of Pasadena"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:53:06.023

您可以单独定义标题。没有其他方法可以做到这一点。你应该这样设置：Dr|Prof|Assoc

# powershell - 如何在 PowerShell 中将文字路径传递给 Start-process？

> ID：13668954
> 
> 赞同：1
> 
> 时间：2012-12-02T11:44:46.213
> 
> 标签：powershell, start-process

在这里，我有一个 PowerShell 脚本，它打开 mspaint 文件夹中的所有 jpg 文件以保存它们。它修复 exif 拇指并减小文件大小。

问题是它无法发送路径中有空格的 mspaint jpg 文件。那么如何让 Start-process 获取 jpg 文件的文字路径呢？

```
$kansio = ($args[0]).replace("'","")
$tiedostot = 0
Write-Host "Folder to process: $kansio" -foregroundcolor White

Get-ChildItem -LiteralPath $kansio | foreach{if($_.Extension -eq ".jpg"){$_.FullName}} |
foreach{
    $id = (Start-process mspaint $_ -ea 0 -PassThru).Id
    $vikaTallennus = (Get-ChildItem -LiteralPath $_).LastWriteTime
    [bool]$onnistui = 0

    [void][System.Reflection.Assembly]::LoadWithPartialName("'Microsoft.VisualBasic")
    [void][System.Reflection.Assembly]::LoadWithPartialName("'System.Windows.Forms")

    do
    {
        try
        {
            if((Get-Process -Id $id -ea 'stop').WaitForInputIdle())
            {
                [Microsoft.VisualBasic.Interaction]::AppActivate($id)
                [System.Windows.Forms.SendKeys]::SendWait("^s")
                [System.Windows.Forms.SendKeys]::SendWait("{esc}")
                for($i=1; $i -le 10; $i++)
                {
                    if((Get-ChildItem -LiteralPath $_).LastWriteTime -gt $vikaTallennus)
                    {
                        try
                        {
                            Stop-Process -Id $id -force -ea 'stop'
                            Write-Host "Done: $_" -foregroundcolor Green
                            $onnistui = 1
                            break
                        }
                        catch
                        {
                            #Write-Host "Failed to close the process" -foregroundcolor Red
                            #Start-Sleep -milliseconds 100
                        }
                    }
                }
            }
        }
        catch
        {
            #Write-Host "Failed to catch the process" -foregroundcolor Red
            #Start-Sleep -milliseconds 100
        }
    }
    until((Get-Process -Id $id -ea 0) -eq $null -or $id -eq $null)
    if($onnistui){$tiedostot++}else{Write-Host "Failed: $_" -foregroundcolor Red}
}
Write-Host "Files saved: $tiedostot" -foregroundcolor Green 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:07:43.337

您需要将文件参数用引号引起来，否则 mspaint 会认为您正在尝试提供 3 个由空格分隔的参数。尝试这个：

```
Get-ChildItem -LiteralPath $kansio -filter "*.jpg" | foreach{
    $file = $_.fullname
    $id = (Start-process mspaint """$file""" -ea 0 -PassThru).Id 
```

# iphone - phonegap iphone 应用程序在 iPad 上显示黑屏

> ID：13668955
> 
> 赞同：0
> 
> 时间：2012-12-02T11:44:57.377
> 
> 标签：iphone, objective-c, ios, xcode, cordova

我正在 iPhone 模拟器和设备上正确开发和测试我的 iphone 应用程序（phonegap + native）。

但是，在 iPad 模拟器或设备上进行测试时，我只能看到一个空白的黑屏，并且在控制台上没有错误。

目标系列已正确设置为 iPhone，并且窗口 makeKeyAndVisible 也已执行！如何解决？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    UIViewController *introVC = [[videoViewController alloc] initWithNibName:@"videoViewController" bundle:nil];

    UIViewController *blogVC = [[blogViewController alloc] initWithNibName:@"blogViewController" bundle:nil];

    NSArray *viewControllers = [NSArray alloc];

    viewControllers = [NSArray arrayWithObjects: introVC, blogVC, nil];

    [rootController setViewControllers:viewControllers animated:NO];

    self.rootController.selectedIndex = 0;

    [window setRootViewController:self.rootController];
    [window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:13:18.160

黑屏几乎总是javascript中的错误。假设您使用的是 iOS 6，您应该能够附加桌面 safari web 检查器并查找任何不会显示在 Xcode 控制台中的 javascript 错误。

要测试的另一件事是，该应用程序仍然可以在 iPhone 上作为全新安装运行 - 更新现有应用程序只会复制新的和更新的文件，因此不会显示由删除引起的错误，例如重命名脚本和留下对旧文件名的引用马上起来。

# css - 在其他元素下定位和扩展元素

> ID：13668957
> 
> 赞同：0
> 
> 时间：2012-12-02T11:45:05.603
> 
> 标签：css, layout

我有一个具有典型博客布局的网站 - 一篇文章在另一篇文章下。我想放置一个像“管道”一样的 div，将它们全部连接起来——从顶部到底部。

这张图片可以解释帮助你理解我的想法[。](https://dl.dropbox.com/u/10530011/web-nie-usuwac/stackoverflow-css-pipe.png)（对不起手写）

例如，我正在考虑将整个帖子区域包装在 div 内，将其水平调整为更小、固定宽度和居中，但我可以在不影响内容的情况下这样做吗？我只想显示那个“管道”的背景。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:08:58.990

您可以将它包装在一个 div 中，并将管道绝对定位在它后面。就像是：

```
.wrapper {
  poisition: relative;    
}

.pipe {
  position: absolute;
  top:5%;
  width: 50px;
  height: 90%;
} 
```

像这样：http: [//jsfiddle.net/eMKaW/](http://jsfiddle.net/eMKaW/)

# java - 在没有后备服务器的情况下运行 GWT 页面？

> ID：13668960
> 
> 赞同：4
> 
> 时间：2012-12-02T11:45:13.540
> 
> 标签：java, javascript, gwt, canvas

由于 GWT 将 java 代码转换为 JavaScript：之后是否可以在没有后备服务器的情况下运行页面？就像只生产 html、css、js 文件夹并在没有服务器的浏览器中运行它？

特别是在使用 GWT 和 Canvas 时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T12:04:17.810

绝对没错。如果您不需要服务器，那么您就不需要服务器。

`xsiframe`注意：如果您打算从磁盘而不是 HTTP 提供文件，则必须使用链接器。在大多数浏览器中，`std`链接器（默认链接器）不适用于`file://`URL。

# php - Yii，CsqlDataProvider中的排序和列名

> ID：13668964
> 
> 赞同：2
> 
> 时间：2012-12-02T11:46:06.670
> 
> 标签：php, yii

我曾尝试将 cgridview 与 csqldataprovider 一起使用。

1.  我的 sql 查询从不同的表中获取数据。我在查询中使用了别名。所以在gridview中，当我点击标题值时，它会使用列名进行排序。即，`column name = Track`它将创建查询，`... order by Track`但实际上它应该创建`...order by t.trackname`.
2.  为了增加更多复杂性，我将表中的列名作为表名。例如，在具有表名`Store`和列名`trackid` 的同一个数据库中，我在同一个数据库中有另一个具有表名的表`trackid`。
3.  我已经检查了[解决方案](https://stackoverflow.com/questions/13044681/yii-cgridview-sorting-with-csqldataprovider)。在 cgridview 中，当我指定我的列属性时，它不会变得可排序（没有锚标签）。没有列属性，它是可排序的。

在控制器文件中，

```
$dataProvider=new CSqlDataProvider($query, array(
        'totalItemCount'=>$count,
        'sort'=>array('defaultOrder'=>'caseid DESC',
            'attributes'=>array(
             'caseid',
             'trackid',
             'status',
            ),
        ),
        )); 
```

在视图文件中，

```
$this->widget('zii.widgets.grid.CGridView', array(
'dataProvider'=>$dataProvider,
'ajaxUpdate'=>true,
'columns'=>array(
    array('header'=>'Case','name'=>'Case','value'=>'$data[caseid]'),
    array('header'=>'Track','name'=>'Track','value'=>'$data[trackid]'),
    array('header'=>'Status','name'=>'Status','value'=>'$data[status]'),
), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:28:34.117

您必须正确地`name`为每一列指定`CGridView`。在您的示例代码中它是不正确的，您使用`'name'=>'Case'`了 while it should be `'name'=>'caseid'`，即 的值`name`应该是您在 sql 中指定的**别名的****确切**值。

 **更新：

1.  另请注意，如果您没有进行任何格式化或修改从 db 检索的值，则不需要该`value`属性。该`name`属性将负责从 db 结果集中获取正确的值。将`header`负责显示列标题名称，在您的情况下是`Case`.

    例子：

    ```
    'columns'=>array(
        array('header'=>'Case','name'=>'caseid'), // 'value'=>'$data[caseid]'),
        array('header'=>'Track','name'=>'trackid'), // 'value'=>'$data[trackid]'),
        array('header'=>'Status','name'=>'status'), // 'value'=>'$data[status]'),
    ), 
    ```

2.  要处理情况 1 和 2，请在 sql 中使用别名，并在`sort`'`attributes`数组和`name`.

    Sql示例：

    ```
    select t.trackname as some_alias ... 
    ```

    数据提供者：

    ```
    'sort'=>array(
        'attributes'=>array(
            'some_alias',
            // ... more attributes ...
        ),
        // ... more options ...
    ), 
    ```

    CGridView：

    ```
    'columns'=>array(
        array(
            'header'=>'Some Header Name',
            'name'=>'some_alias',
            'value'=>'$data["some_alias"]' // as mentioned above this is unnecessary if you are not modifying the value
        )
    ) 
    ```

    因此，当您排序时，生成的查询将类似于 : `order by some_alias`，这非常好。**

# r - R中的回归作业

> ID：13668966
> 
> 赞同：0
> 
> 时间：2012-12-01T23:07:59.010
> 
> 标签：r, regression

我有一个标记为不同城市债券的数据集：$y$=债券收益率，$x_1$=报价规模（$\$$1000 债券）和 $x_2$=到期期限（100 个月）。我需要比较所有模型 $y=b_0+b_2x_2$、$y=c_0+c_1x_1+c_2x_2$ 和 $y=d_0+d_1x_1$ 的系数。

我能够制作第一个模型，但其他两个模型出现错误。这是前六个城市的值。

```
> head(bond)
  N0       City X1   X2   Y  
1  1 Birmingham 30 1.81 335 
2  2     Oxnard 10 1.93 365 
3  3    Salinas 30 2.79 315 
4  4    Danbury 15 1.81 325 
5  5  New Haven 15 1.87 283 
6  6    Norwalk 40 2.17 300 
```

线性 模型2`c <- lm(y ~ X1 + X2, bond)`产生了

```
Error in model.frame.default(formula = y ~ X1 + X2, data = bond, drop.unused.levels = TRUE) : 
  variable lengths differ (found for 'X1') 
```

最后一个模型是`d <- lm(y ~ X1, bond)`导致

```
Error in model.frame.default(formula = y ~ X1, data = bond, drop.unused.levels = TRUE) : 
  variable lengths differ (found for 'X1') 
```

**问题：**我不明白错误或如何继续纠正它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T23:20:24.003

看起来 y 和 X1 的长度不同。我打赌那是因为你应该使用 Y 而不是 y。

该函数`ls()`有时可以帮助您找到可能意外使用的名称相似的额外变量。你可以随时`rm`使用任何你不需要的东西。除非您对变量的使用非常自律，否则每次开始工作之前清理工作区通常是一个好主意。

# numerical-methods - 绝对和绝对相对误差（数值误差）

> ID：13668970
> 
> 赞同：0
> 
> 时间：2012-12-02T11:46:59.420
> 
> 标签：numerical-methods, numerical-stability

我想了解绝对和相对错误是如何工作的，以便编写一些代码。

假设，我们有`x1*=4.54 x2*=3.00`和`x3*=15.0`，准确度：3 位数。
我们如何定义：`x1*-x2*+x3*`和
b的绝对误差。`x1*x2*/x3*` c的绝对相对误差。a 和 b 中的精度。

试图理解：a。|e1|<=0.5*10^(-3)

```
|e2|<=0.5*10^(-3)

|e3|<=0.5*10^(-3) 
```

或 |e1|<=0.5*10^(-2)

```
|e2|<=0.5*10^(-2)

|e3|<=0.5*10^(-1) 
```

然后`|e|<=|e1|+|e2|+|e3|=(15+4+3)*0.5*10^(-3)` b。`|r|<=|r1|+|r2|+|r3|=|e1/x1*|+|e2/x2*|+|e3/x3*|`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:40:03.507

你在正确的轨道上。当然，您无法找到实际错误，因为您不知道实际值。因此，您要*限制*错误。首先请注意，我们正在谈论舍入误差（正如您所做的那样），因此每个变量可以关闭的最大值是其精度的 0.5，即

|e [1] | <= 0.005

|e [2] | <= 0.005

|e [3] | <= 0.05

对于 x [1] -x [2] +x [3]的绝对误差，最坏的情况是所有误差线性相加，即：

|e [123] | <= 0.005+0.005+0.05 = 0.06。

因为这是**绝对**错误，所以您不必根据 x [1] ... 的实际值重新调整比例。

对于 (x [1] x [2] )/x [3]的相对误差，它有点复杂——你必须实际传播（乘以）误差。但是，如果您假设误差远小于该值，即 |e [1] | << x [1]（在这种情况下这是一个很好的近似值），然后你会得到你在“b”中使用的方程：

|r| = |r [123] / (x [1] x [2] /x [3] ) | ~< |e [1] /x [1] | + |e [2] /x [2] | + |e [3] /x [3] |

因为这是**相对**误差，所以您*必须*根据实际值重新调整误差。

所以，总的来说，你做对了——只是在`absolute error`.

# ruby - 为什么应该两次执行相同的测试

> ID：13668973
> 
> 赞同：1
> 
> 时间：2012-12-02T11:47:11.660
> 
> 标签：ruby, testing, shoulda

我正在尝试使用应该和上下文来避免我的测试重复。在以下测试中，我希望得到以下输出。

```
"dir created"
"dir removed" 
```

但相反我有

```
"dir created"
"dir removed"
."dir created"
.
Finished tests in 0.001907s, 1048.7677 tests/s, 1048.7677 assertions/s.
2 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

我不明白为什么第一个测试要执行两次？

这是我的测试代码：

```
class FileDirTest < Test::Unit::TestCase 
context "FileDir:" do

setup do
  @fd = FileDir.new
  @myDir = "dir1"
end

context "When dir is create:" do
  setup do
    @fd.create_dir(@myDir)
    p "dir created"
  end
  should "be Dir1" do
    assert_equal true, Dir.exist?(@myDir)
  end
  context "When delete a dir" do
    setup do
      @fd.remove_dir(@myDir)
      p "dir removed"
    end
    should "be removed" do
      assert_equal false, Dir.exist?(@myDir)
    end  
  end
end 
```

结束结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:51:39.960

就像在任何测试框架中一样，设置在每次测试之前运行。由于一个上下文嵌套在另一个上下文中，您会看到“dir created”两次。

# objective-c - Tableview 图像加载缓慢

> ID：13668978
> 
> 赞同：0
> 
> 时间：2012-12-02T11:47:38.203
> 
> 标签：objective-c, ios, uitableview, nsurl

我正在尝试将 JSON 提要中的图像加载到表格视图中。下面的代码返回图像，但它使应用程序非常缓慢且“粘滞”。关于如何使它更快的任何想法？这是为表格视图中的每个单元格调用的。

```
NSURL *imageURL = [NSURL URLWithString:@"http://www.site.com/images/image_1.jpg"];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *cellImage = [UIImage imageWithData:imageData]; 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:58:03.060

请尝试以下代码。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_group_t group = dispatch_group_create();
dispatch_group_async(group, queue, ^{
    NSURL *imageURL = [NSURL URLWithString:@"http://www.site.com/images/image_1.jpg"];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    UIImage *cellImage = [UIImage imageWithData:imageData];

    dispatch_sync(group, ^{
        cell.image = cellImage;
    });
});
dispatch_release(group); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:56:31.397

在主线程中从 Internet 加载图像始终是个坏主意。

您需要子类`UITableViewCell`化并在后台线程中加载图像。

在这里，您有一些建议。

[在 UITableView 中延迟加载图像](https://stackoverflow.com/questions/1130089/lazy-load-images-in-uitableview)

[从 URL iphone sdk 将图像加载到 tableView](https://stackoverflow.com/questions/7565123/load-image-to-a-tableview-from-url-iphone-sdk)

# ios - 在 IOS 中以编程方式设置动作侦听器

> ID：13668981
> 
> 赞同：5
> 
> 时间：2012-12-02T11:47:49.323
> 
> 标签：ios, uibutton, uibarbuttonitem, actionlistener

嗨，我以编程方式创建了一个按钮。我将此按钮添加到导航栏。现在我想给它添加一个 Touch Up Inside 动作监听器。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T12:02:53.767

UIButton 是 UIControl 的子类。

创建按钮后，您需要做的就是设置按钮的目标和操作。IE

```
// Create your button:
UIButton *button = // However you create your button

// Set the target, action and event for the button
[button addTarget:// the object that implements the action method, or nil if you want it to propagate up the responder chain.
           action:// A selector for the method
 forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T12:41:19.950

由于您已将它们添加到导航栏，因此略有不同，但基本相同。您将在创建按钮的同时添加侦听器/处理程序。在这里，我使用以下内容添加`<<`和`>>`导航栏：

```
UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithTitle:@">>" style:UIBarButtonItemStylePlain target:self action:@selector(navNextButtonPressed)];
UIBarButtonItem *prevButton = [[UIBarButtonItem alloc] initWithTitle:@"<<" style:UIBarButtonItemStylePlain target:self action:@selector(navPrevButtonPressed)];
self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:nextButton, prevButton, nil]; 
```

然后像往常一样创建你的处理程序：

```
#pragma mark - button handling
-(void)navNextButtonPressed
{    
    NSLog(@"Next pressed");
}

-(void)navPrevButtonPressed
{
    NSLog(@"Prev pressed");
} 
```

# java - 如何从文件中只读取整数？

> ID：13668982
> 
> 赞同：0
> 
> 时间：2012-12-02T11:47:59.217
> 
> 标签：java, file, input, java.util.scanner

当我尝试从文本文件中读取 int 时遇到问题。我正在使用这种代码

```
 import java.util.Scanner;
 import java.io.*;

 File  fileName =new File( "D:\\input.txt");
 try {
     Scanner in = new Scanner(fileName);
     c = in.nextInt();
     n = in.nextInt();

 } catch(Exception e){
       System.out.println("File not Found!!!");
 } 
```

如果我的文字是这样编辑的

```
30
40 
```

所以它会起作用（意味着c = 30，n = 40）。但是如果我想编辑这样的文本文件

```
c=30
n=40 
```

我的代码不起作用。

如何更改我的代码以仅读取数字并忽略“c =”和“n =”或除数字之外的任何其他字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:49:34.357

您需要使用 阅读您的行`Scanner.nextLine`，在 上拆分每一行`=`，然后将第二部分转换为整数。

记得做检查 -`Scanner.hasNextLine`在你阅读任何一行之前。因此，您需要使用`while`循环来读取每一行。

一个简单的实现，您可以根据需要对其进行扩展：-

```
while (scanner.hasNextLine()) {
    String line = scanner.nextLine();

    String[] tokens = line.split("=");

    try {
        System.out.println(Integer.parseInt(tokens[1]);
    } catch (NumberFormatException e) {
        e.printStackTrace();
    }
} 
```

现在，如果您以后想使用这些数字，也可以将它们添加到`ArrayList<Integer>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:08:53.483

按照您要在输入文件中使用的格式，最好使用[`java.util.Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html). 你不需要关心解析。

```
Properties props = new Properties();
props.load(new FileInputStream(new File("D:\\input.txt")));
c = Integer.parseInt(props.getProperty("c"));
n = Integer.parseInt(props.getProperty("n")); 
```

您可以阅读有关[简单的面向行格式](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T11:50:45.373

您可以逐行阅读（`Scanner.nextLine`）并通过询问来检查行中的每个字符`isDigit()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T12:08:42.153

如果您的数据行将始终采用相同的格式`x=12345`，请使用正则表达式从该行获取数值

# security - 如何确保 Coldfusion 对象只创建一次？

> ID：13668984
> 
> 赞同：1
> 
> 时间：2012-12-02T11:48:16.933
> 
> 标签：security, object, coldfusion, scheduled-tasks

我有一个`scheduled task`应该每分钟运行一次。为了阻止从外部调用文件，我想像这样比较主机和调用 IP 地址：

```
 <cfif NOT structKeyExists( "variables", caller )>
    <cfset variables.caller = createObject("java", "java.net.InetAddress")>
 </cfif>

 <cfif variables.caller.getLocalHost().getHostAddress() EQ cgi.remote_addr> 
     // run task
 </cfif> 
```

**问题：**
我真的不习惯`objects`在 Coldfusion 中工作，所以这是否可以确保在调用任务时每分钟创建一次对象并重新创建对象？由于这是在我的管理部分运行的，我应该立即在应用程序范围内创建对象吗？

感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:10:33.397

即使请求是计划任务，当您运行请求时，所有变量都会在请求完成后销毁。只有会话、应用程序和服务器等变量在请求之间持续存在。

确保页面仅在它们所在的机器上运行的一种方法是：

```
<cfif cgi.remote_addr EQ "127.0.0.1"> 
 // run task
</cfif> 
```

# c# - DateTime.CompareTo 实际返回什么整数？

> ID：13668985
> 
> 赞同：11
> 
> 时间：2012-12-02T11:48:25.533
> 
> 标签：c#, datetime, compareto

一段时间以来，我一直在寻找答案，但实际上我无处可寻。

我特别看[这个页面](http://msdn.microsoft.com/en-us/library/system.datetime.compareto.aspx)。它说该`CompareTo`方法返回一个整数，指示它是更早、相同还是更晚。我理解它的用法，并且我理解在早期整数是负数，同样它是 0 等等。

但是这个整数是什么？它是否返回以秒、毫秒、滴答为单位的差异，或者根本没有返回差异？我希望你能帮我解决这个问题，如果有人能找到另一个关于这个问题的帖子，请告诉我。老实说，我很惊讶我不能马上找到关于这个话题的问题......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-02T11:53:17.870

该文档实际上在**IComparable**接口页面（DateTime 实现）中：http: [//msdn.microsoft.com/en-us/library/system.icomparable.aspx](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)

> CompareTo(Object) 方法的实现必须返回具有三个值之一的 Int32，如下表所示。
> 
> **小于零：**当前实例在排序顺序中位于 CompareTo 方法指定的对象之前。
> 
> **零：**此当前实例与 CompareTo 方法指定的对象出现在排序顺序中的相同位置。
> 
> **大于零：**此当前实例在排序顺序中遵循 CompareTo 方法指定的对象。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-02T11:52:58.493

根据 MSDN，没有指定任何内容：

```
if (result < 0)
   relationship = "is earlier than";
else if (result == 0)
   relationship = "is the same time as";         
else
   relationship = "is later than"; 
```

如果你想比较 2 DateTimes 之间的天数，你应该寻找这样的东西：

```
if ((expiryDate - DateTime.Now).Days < 30) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T11:50:48.597

这是一个您永远不需要知道并且可以随时更改的实现细节。仅有的 3 个类别是：

*   消极的
*   零
*   积极的

如果你发现自己使用了更多的东西，那么就有问题了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T11:51:00.277

据我所知，数字始终为 -1、0 或 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T11:51:18.997

它是[IComparable.CompareTo](http://msdn.microsoft.com/en-us/library/43hc6wht.aspx)的实现。这意味着它将在相等时返回 0，如果较大则返回正整数，如果较小则返回负整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-04T18:21:18.213

您可以选择特定的单位与 TimeSpan 进行比较

`DateTime local_time = DateTime.Now; //current time`

`DateTime remote_time = DateTime.Now.AddMinutes(-2); //two minutes delayed`

`TimeSpan time_difference = (local_time - remote_time);`

`if (time_difference.Minutes <= 5) //compare specific units desired`

`{`

`bool within_tollerance = true;`

`}`

# php - 如何选择与用户的好友关系中未被批准的“用户”用户名？

> ID：13668996
> 
> 赞同：0
> 
> 时间：2012-12-02T11:49:53.147
> 
> 标签：php, mysql, sql

我有一个 php 代码，我喜欢在列表中打印那些不是用户朋友的人。但我只能打印出除用户本人以外的所有用户。对这个问题有什么建议吗？谢谢您的回复。

测试列表.php

```
 $name = $_POST['Username'];

 $data=mysql_query("SELECT * FROM User");       
 $dataA = mysql_query("SELECT * FROM Friends WHERE responseRequest='$name' AND  status='approved'");                                                                                                                      
 $dataB = mysql_query("SELECT * FROM Friends WHERE sentRequest='$name' AND status='approved'"); 

 while($info = mysql_fetch_array( $data )) 
 { 
     if($info['username']==$name){
       continue;
     }

     while($friend1 = mysql_fetch_array($dataA)){
           if($info['username']==$friend1['sentRequest']){
            continue;
     }
     }

     while($friend2 = mysql_fetch_array($dataB)){
           if($info['username']==$friend2['responseRequest']){
            continue;
     }
     }

 Print $info['username']."*"; 
 } 
    mysql_close(); 
```

这是mysql数据库中的表：

用户： ![用户](../Images/5e37bd3f4012d99dca45d77f61109d60.png)

朋友们 ![朋友们](../Images/58dcd6e7f0e6943452dd43fde15250c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:03:47.637

您应该真正加密数据库中的密码，因为现在任何看到这些图像的人都可以访问这些帐户。

插入数据库时​​，请使用以下内容：

```
INSERT INTO table_name (password) VALUES (SHA('$password_variable')); 
```

# javascript - 事件监听器合二为一？

> ID：13668997
> 
> 赞同：1
> 
> 时间：2012-12-02T11:49:56.223
> 
> 标签：javascript, jquery

```
$something.on('mousedown touchstart mousemove', function(e){
   // everything do something
   if('mousedown') // do something

   if('touchstart') // do something

   if('mousemove') // do something
}); 
```

有可能做这样的事情吗？正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T11:51:22.123

您可以`switch`用于[`event.type`](http://api.jquery.com/event.type/)：

```
$something.on("mousedown touchstart mousemove", function(e) {
    switch (e.type) {
        case "mousedown":
            // do something
            break;

        case "touchstart":
            // do something
            break;

        case "mousemove":
            // do something
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:36:44.737

另一种方法是使用内部方法创建一个处理函数来匹配事件：

```
$('div').on('mouseenter click', evtHandler)

function  evtHandler(evt, el) {
    var _self=this, $el=$(this);

    var handler = {
        click: function() {
            $el.text('Div was clicked on')
        },
        mouseenter: function() {
            $el.css('background','#EAEAEA')
        }
    };
    handler[evt.type]();
} 
```

演示：http: [//jsfiddle.net/ufYKF/](http://jsfiddle.net/ufYKF/)

# javascript - 带有 html5 的简单可拖动弹出窗口不会在 chrome 扩展中移动

> ID：13668998
> 
> 赞同：0
> 
> 时间：2012-12-02T11:49:57.643
> 
> 标签：javascript, google-chrome-extension

我试图实现简单的不依赖于外部库的可拖动轻视窗口问题是该窗口已创建但它是静态的而不是可拖动的，它与我从这个参考网络示例中获取的代码相同：http: [//codelifter.com/main/ javascript/dragablelayer.html](http://codelifter.com/main/javascript/dragablelayer.html)：

这一切都发生在 charom 扩展的内容脚本中：

```
var s = document.createElement('script');
s.src = chrome.extension.getURL('client.js');
s.onload = function() {
    s.parentNode.removeChild(s);
};

try{
(document.head||document.documentElement||document.body).appendChild(s);
}catch(e){
  console.log("exception in appendChild");
} 
```

客户端.js：

```
isIE=document.all;
isNN=!document.all&&document.getElementById;
isN4=document.layers;
isHot=false;

function ddInit(e){
  topDog=isIE ? "BODY" : "HTML";
  whichDog=isIE ? document.all.theLayer : document.getElementById("theLayer");  
  hotDog=isIE ? event.srcElement : e.target;  
  while (hotDog.id!="titleBar"&&hotDog.tagName!=topDog){
    hotDog=isIE ? hotDog.parentElement : hotDog.parentNode;
  } 

  if (hotDog.id=="titleBar"){
    offsetx=isIE ? event.clientX : e.clientX;
    offsety=isIE ? event.clientY : e.clientY;
    nowX=parseInt(whichDog.style.left);
    nowY=parseInt(whichDog.style.top);
    ddEnabled=true;
    document.onmousemove=dd;
  }
}

function dd(e){
  //console.log("Starting draging");
  if (!ddEnabled) 
  {
    //console.log("continue draging !ddEnabled");
    return;
  }
  whichDog.style.left=isIE ? nowX+event.clientX-offsetx : nowX+e.clientX-offsetx; 
  whichDog.style.top=isIE ? nowY+event.clientY-offsety : nowY+e.clientY-offsety;
  return false;  
}

function ddN4(whatDog){
  if (!isN4) return;
  N4=eval(whatDog);
  N4.captureEvents(Event.MOUSEDOWN|Event.MOUSEUP);
  N4.onmousedown=function(e){
    N4.captureEvents(Event.MOUSEMOVE);
    N4x=e.x;
    N4y=e.y;
  }
  N4.onmousemove=function(e){
    if (isHot){
      N4.moveBy(e.x-N4x,e.y-N4y);
      return false;
    }
  }
  N4.onmouseup=function(){
    N4.releaseEvents(Event.MOUSEMOVE);
  }
}

function hideMe(){
  if (isIE||isNN) whichDog.style.visibility="hidden";
  else if (isN4) document.theLayer.visibility="hide";
}

function showMe(){
  if (isIE||isNN) whichDog.style.visibility="visible";
  else if (isN4) document.theLayer.visibility="show";
}

try{
    console.log("Starting to create tabel");
    var layerNode= document.createElement('div');
    layerNode.setAttribute('id','theLayer');
    layerNode.style.position="absolute";
    layerNode.style.width="250px";
    layerNode.style.left="100";
    layerNode.style.top="100";
    layerNode.style.visibility="visible";

    var tableNode= document.createElement('table');
    tableNode.setAttribute('border','0');
    tableNode.setAttribute('width','250');
    tableNode.setAttribute('bgcolor','#424242');
    tableNode.setAttribute('cellspacing','0');
    tableNode.setAttribute('cellpadding','5');  
    var newRow = tableNode.insertRow();
    var oCell = newRow.insertCell();
    oCell.setAttribute('width','100%');
    oCell.innerHTML =  "<table border='0' width='100%' cellspacing='0' cellpadding='0' height='36'><tr>"+
                      "<td id='titleBar' style='cursor:move' width='100%'>"+
                      "<ilayer width='100%' onSelectStart='return false'>"+
                      "<layer width='100%' onMouseover='isHot=true;if (isN4) ddN4(theLayer)' onMouseout='isHot=false'>"+
                      "<font face='Arial' color='#FFFFFF'>Layer Title</font></layer></ilayer></td>"+
                      "<td style='cursor:hand' valign='top'>"+
                      "<a href='#' onClick='hideMe();return false'><font color=#ffffff size=2 face=arial  style='text-decoration:none'>X</font></a></td></tr><tr>"+
                      "<td width='100%' bgcolor='#FFFFFF' style='padding:4px' colspan='2'>"+
                        "This is where your content goes.<br>"+
                        "It can be any html code or text.<br>"+
                        "Remember to feed the reindeer.<br>"+
                        "Avoid chewable giblet curtains."+
                      "</td></tr></table>";

    layerNode.appendChild(tableNode);
    document.body.appendChild(layerNode);

    document.onmousedown=ddInit;
    document.onmouseup=Function("ddEnabled=false");
    console.log("Ending to create tabel");
}
catch(e){
  console.log("script in page exception in appendChild"+e);
  //alert(e);
} 
```