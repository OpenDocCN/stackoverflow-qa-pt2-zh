# StackOverflow 问答 14741000-14741999

# php - 从数据库中获取下一个可用日期

> ID：14741000
> 
> 赞同：0
> 
> 时间：2013-02-06T23:39:52.933
> 
> 标签：php, mysql

我有一个系统，允许用户将特定文件分配给过去或现在的日期。限制是每个用户每天只能上传一个文件。当用户上传文件时，日期字段必须默认为当前日期，当该日期不可用时，它将以 DESC 顺序显示过去的第一个可用日期。以下是相关的字段名称。

```
file_id (INT - INDEX - AUTO INCREMENT)
user_id (INT - may index this)
upload_date (INT - stores date as a unix timestamp) 
```

我真正找到的唯一解决方案是将它们全部按日期按 DESC 顺序构建到一个数组中，然后循环直到找到一个空插槽。但是，我觉得如果用户已经填满了过去的一千天，这真的会导致速度问题。我觉得我忽略了一个简单的解决方案。

请注意：出于某种原因，他们的日期被存储为一个 Unix 时间戳，我理解它的缺点，我现在不关心更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:16:43.417

要获取尚未使用的最新日期：

```
select user_id, max(date) - 1
from (select ud.*,
             (select max(date) from upload_date ud2 where ud2.user_id = ud.user_id and ud2.date < ud.date
            ) as prevdate
      from upload_date ud
     ) ud
where date(from_unixtime(ud.prevdate)) <>  date(from_unixtime(ud.date)) - 1 or
      ud.prevdate is null
group by user_id 
```

此查询首先使用相关子查询获取任何给定日期的前一个日期。然后它将时间值转换为日期并选择前一个日期有间隔的任何行。最大的日期减一是您要查找的日期。

此 SQL 未经测试，因此可能存在语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:16:52.790

解决此问题的一种方法是使用经典的“返回缺失行”查询。基本上，要获得从数据库返回的“缺失”行，您需要一种生成“缺失”行的方法。

要构建这样的查询，我们可以从以下开始：

```
SELECT MAX(t.upload_date)
  FROM mytable t
 WHERE t.upload_date <= NOW() 
   AND t.user = 'someuser' 
```

这获得了初始日期，我们将从该日期开始向后工作。

对于“每天一个”的要求，您可能希望将 upload_date 截断到午夜，至少对于此查询。现在，我们假设 SELECT 列表中的表达式已经被截断，以说明该方法，而不会陷入处理 unix 时间戳的细节。

要生成日期的降序列表，从上一个查询检索到的初始日期开始...

```
SELECT s.upload_date - INTERVAL n.d DAY AS available_date
  FROM ( SELECT MAX(t.upload_date) AS upload_date
           FROM mytable t
          WHERE t.upload_date <= NOW() 
            AND t.user = 'someuser'
       ) s
 CROSS
  JOIN ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 
       ) n
 ORDER BY n.d DESC 
```

有了这个结果，我们可以使用反连接模式来查找尚未使用的日期。这是一个 LEFT JOIN 和一个抛出匹配行的谓词：

```
SELECT s.upload_date - INTERVAL n.d DAY AS available_date
  FROM ( SELECT MAX(t.upload_date) AS upload_date
           FROM mytable t
          WHERE t.upload_date <= NOW() 
            AND t.user = 'someuser'
       ) s
 CROSS
  JOIN ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 
       ) n
  LEFT
  JOIN mytable u
    ON u.upload_date = s.upload_date - INTERVAL n.d DAY
   AND u.user = 'someuser'
 WHERE u.upload_date IS NULL 
 ORDER BY n.d DESC
 LIMIT 1 
```

这只回顾 9 天，要让它回顾更多天，只需扩展别名为 n 的内联视图以返回更多连续整数。（我们可以使用一些技巧来使用交叉连接来获得一大堆整数。）

剩下的就是处理“匹配”标准（适用于 MySQL DATE 数据类型）：

```
 ON u.upload_date = s.upload_date - INTERVAL n.d DAY 
```

变成这样的东西：

```
 ON u.upload_date >= UNIX_TIMESTAMP(FROM_UNIXTIME(s.upload_date)-INTERVAL n.d+1 DAY)
   AND u.upload_date <  UNIX_TIMESTAMP(FROM_UNIXTIME(s.upload_date)-INTERVAL n.d DAY) 
```

并使用整数时间戳值来获取 MySQL 日期...

```
 SELECT DATE(FROM_UNIXTIME(s.upload_date)) - INTERVAL n.d DAY AS available_date 
```

# algorithm - 最陡的爬山与最佳优先搜索

> ID：14741006
> 
> 赞同：4
> 
> 时间：2013-02-06T23:40:36.537
> 
> 标签：algorithm, tree, traversal, tree-traversal, tree-search

我正在尝试使用不同的算法解决问题，而最陡坡爬山 (SAHC) 和最佳优先搜索是我需要实现的其中两种算法。

根据[维基百科：](http://en.wikipedia.org/wiki/Hill_climbing)

“在最陡峭的爬坡过程中，所有后继者都会被比较，并选择最接近解决方案的人......”

“最陡坡爬山类似于最佳优先搜索，它尝试当前路径的所有可能扩展，而不是只尝试一个。”

**SAHC** : 比较所有后继者并选择最接近解决方案的。
**BestFS**：尝试当前路径的所有可能扩展，而不是只尝试一个。

我真的不明白这些有什么不同。有人可以帮我解决这个问题，最好用树来解释一下吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T00:04:51.833

它们非常相似。不同之处在于，最佳优先搜索考虑了从起始节点到结束节点的*所有路径*，而最陡爬坡仅在搜索过程中记住*一条*路径。

例如，假设我们有一个像

```
start ---- A ---- B ---- end
  \                     /
   ------\    /---------
          \  /
           C 
```

每条边都具有相同的权重：忽略我蹩脚的 ASCII 艺术技巧 :)。还假设在我们的启发式函数中，A 被认为比 C 更接近末端。（这仍然是一个[可接受的启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)- 它只是低估了 A 的真实距离。）

然后最陡爬山会首先选择 A（因为它具有最低的启发式值），然后是 B（因为它的启发式值低于起始节点的），然后是结束节点。

另一方面，最佳优先搜索将

1.  将 A 和 C 添加到打开列表中。
2.  从打开列表中取出最佳值 A，然后添加 B。然后 OPEN = {B, C}。
3.  从打开列表中取出最好的节点（B 或 C，稍后会详细介绍），并添加其后继节点，即目标状态。
4.  将目标状态从打开列表中取出并返回到达那里的路径。

第 3 步中 B 或 C 的选择完全取决于您使用的最佳优先搜索算法。[A*](http://en.wikipedia.org/wiki/A*_search_algorithm)会将节点评估为到达那里的成本加上到达终点的成本估计值，在这种情况下 C 将获胜（事实上，通过可接受的启发式方法，A* 保证总是让您获得最优小路）。“贪婪的最佳优先搜索”将在两个选项之间任意选择。在任何情况下，搜索都会维护一个可能去处的列表，而不是一个地方。

现在更清楚两者有何不同了吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T00:18:40.407

SAHC 将贪婪地选择一个单一的（可能不是最优的）路径——它只会在每一步中选择最好的节点，直到它达到目标。

另一方面，最佳优先生成整个搜索树。通常（在 A* 的情况下）它会找到最佳解决方案，但 SAHC 无法保证这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T09:59:53.400

Dint知道如何标记所以再次粘贴它，对不起。所以这就是我得到的不同之处。

不同之**处在于理解**在寻找**目标状态时****更关心**什么。

 **问我们的**目标**是什么……**最终目标状态**是什么？或**达到目标状态的最佳路径**

> **最佳优先搜索**是一种系统性搜索算法，在为每个当前节点找出相邻节点的最佳启发值的基础上，通过迭代向前推进来实现系统性**。**
> 
> > 这里的**评估函数（启发式函数）计算实现目标状态的最佳路径**。所以在这里我们可以看到最佳优先搜索关注的是达到目标状态的最佳路径。

然而，有很多问题**并不关心“****通往目标的道路**” ，唯一关心的是以任何可能的方式或路径**达到最终状态**。（例如：**8皇后问题**）。

 ******因此，为此使用了**本地搜索算法**。

> 本地搜索算法使用**单个当前节点**进行操作，并且**通常仅移动到**该节点的邻居。
> 
> > 爬山算法是一种**局部搜索算法**。所以在这里我们需要了解到达目标状态的方法，而不是考虑爬山时达到的最佳路径。
> > 
> > （如**AI-A Modern Approach,SR & PN**中所述）
> > 
> > 基本上，要了解本地搜索，我们需要考虑**状态空间景观**。
> > 
> > 景观**既有**
> > 
> > > (i)**位置**（由**国家**定义）和
> > > 
> > > (ii)**高程**（由**启发式函数或目标函数的值**定义）
> > > 
> > > > **我们需要了解这两种海拔高度**，
> > > > 
> > > > (i)**如果高程对应于**目标**函数**，则目标是找到最高峰，即**全局最大值**。
> > > > 
> > > > > （因此，这些类型的海拔在不关心成本而只关心寻找最佳即时动作的不同场景中很有用）
> > > > 
> > > > (ii)**如果海拔对应于成本**，那么目标是找到最低谷，即**全局最小值**。
> > > > 
> > > > > （**这是最常见的事情，**即最陡（总是加强更好的估计，即没有高原问题或任何其他问题）爬山类似于最佳优先搜索。这里的**高程函数是**提供**最佳最小成本**的启发式函数。和爬山这里只关心**当前节点**并**遍历相邻节点以获得最小值**并**继续扩展最佳节点，类似于 Best First Search**）

**注意**：

爬山算法**不会超越当前状态的直接邻居**。它只关心最佳邻居节点进行扩展。最佳邻居由上述评估函数决定。

**然而**，最佳优先搜索算法**会先于直接邻居**寻找到达目标的最佳路径（使用启发式评估），然后继续寻找最佳路径。所以区别在于局部搜索和系统搜索算法的方法。

**了解方法的差异，**您将了解为什么两者命名不同。********

# arrays - 字符串输入的 PHP 数组输出

> ID：14741008
> 
> 赞同：0
> 
> 时间：2013-02-06T23:40:51.760
> 
> 标签：arrays

输入为 '4;5;6;7' 并返回 array('4','5','6','7'); 的函数是什么？在 PHP 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:42:02.060

```
<?php
explode(';', '4;5;6;7'); 
```

# perl - Perl for 循环失控

> ID：14741009
> 
> 赞同：5
> 
> 时间：2013-02-06T23:41:00.983
> 
> 标签：perl, for-loop

我在 Perl 中有一个简单的 for 循环

```
for ($i=0; $i <= 360; $i += 0.01)
{
print "$i ";
} 
```

为什么当我运行此代码时，我得到以下输出，一旦它达到 0.81，它就会突然开始添加更多小数位？我知道我可以简单地总结一下来避免这个问题，但我想知道为什么会这样。0.01 的增量似乎一点也不疯狂。

```
 0.77
 0.78
 0.79
 0.8
 0.81
 0.820000000000001
 0.830000000000001
 0.840000000000001
 0.850000000000001
 0.860000000000001
 0.870000000000001 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T23:55:36.650

计算机使用二进制表示。并非所有十进制浮点数都以二进制表示法精确表示，因此可能会出现一些错误（实际上是舍入差异）。这与[您不应将浮点数用于货币值](https://thedailywtf.com/articles/Somewhat-Obsolete)的原因相同：

[![乱七八糟的收据](../Images/026c675ac5b599ed8d4fa552e866b6a6.png)](https://thedailywtf.com/articles/Somewhat-Obsolete)

*（图片取自[dailywtf](https://thedailywtf.com/articles/Somewhat-Obsolete)）*

解决此问题的最优雅方法是使用整数进行计算，将它们除以正确的小数位数并使用`sprintf`限制打印的小数位数。这将确保：

*   总有正确的打印结果
*   舍入误差不会累积

试试这个代码：

```
#!/usr/bin/perl
for ($i=0; $i <= 360*100; $i += 1) {
  printf "%.2f \n", $i/100;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T23:50:40.603

基本上，因为十进制数 0.01 在二进制浮点中没有精确的表示，所以随着时间的推移，将最佳近似值添加到 0.01 会偏离您想要的答案。

这是（二进制）浮点运算的基本属性，并不是 Perl 特有的。[每个计算机科学家都应该知道的关于浮点运算](http://www.validlab.com/goldberg/paper.pdf)的知识是标准参考，您可以通过 Google 搜索轻松找到它。

另请参阅：[C 编译器错误（浮点运算）](https://stackoverflow.com/q/4002411/15168)以及毫无疑问的无数其他问题。

* * *

Kernighan 和 Plauger 在他们古老但经典的著作[《编程风格的要素》](https://rads.stackoverflow.com/amzn/click/com/0070342075)中说：

*   一位聪明的老程序员曾经说过“浮点数就像一堆小沙子，每移动一个，你就会失去一点沙子，得到一点泥土”。

他们还说：

*   10 * 0.1 几乎不是 1.0

两种说法都指出浮点运算并不精确。

请注意，一些现代 CPU (IBM PowerPC) 内置了 IEEE 754:2008 十进制浮点运算。如果 Perl 使用了正确的类型（可能没有），那么您的计算将是准确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T00:02:26.203

为了演示 Jonathan 的答案，如果您在 C 中编写相同的循环结构，您将得到相同的结果。尽管 C 和 Perl 的编译方式可能不同并且在不同的机器上运行，但底层的浮点算术规则应该会产生一致的输出。注意：Perl 使用双精度浮点作为其浮点表示，而在 C 中，编码器显式选择 float 或 double。

在 C 中循环：

```
 #include <stdio.h>

    int main() {
        double i;
        for(i=0;i<=1;i+=.01)  {
          printf("%.15f\n",i);
        } 
      } 
```

输出：

```
 0.790000000000000
    0.800000000000000
    0.810000000000000
    0.820000000000001
    0.830000000000001
    0.840000000000001
    0.850000000000001 
```

为了进一步证明这一点，用 C 编写循环代码，但现在使用单精度浮点运算，并看到输出不太精确，甚至更不稳定。

输出：

```
 0.000000000000000
    0.009999999776483 
    0.019999999552965
    0.029999999329448
    0.039999999105930
    0.050000000745058
    0.060000002384186
    0.070000000298023
    0.079999998211861
    0.089999996125698
    0.099999994039536 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T00:02:17.723

1/10 在二进制中是周期性的，就像 1/3 在十进制中是周期性的。因此，它不能准确地存储在浮点数中。

```
>perl -E"say sprintf '%.17f', 0.1"
0.10000000000000001 
```

要么使用整数

```
for (0*100..360*100) {
   my $i = $_/100;
   print "$i ";
} 
```

或者做很多四舍五入

```
for (my $i=0; $i <= 360; $i = sprintf('%.2f', $i + 0.01)) {
   print "$i ";
} 
```

# javascript - Javascript：数组中的所有对象都具有相同的属性

> ID：14741011
> 
> 赞同：2
> 
> 时间：2013-02-06T23:41:03.290
> 
> 标签：javascript, arrays, object

我正在尝试创建一个列在数组中的对象列表。newConstant 是一个创建对象并将它们推送到数组的函数。但是，当 while 循环遍历数组并抛出包含每个数组的属性之一的警报时，它会为数组中的每个对象吐出最后一个对象的值。在这种情况下，它每次都会警告“3”，但它应该警告“1”，然后是“3”，因为这些是数组“a”中两个对象的属性 x 的值。代码如下。我怎样才能解决这个问题？

```
var i = 0;
var a = [];
var newConstant = function (x, y) {
    this.x = x;
    this.y = y;
    a.push(this);
};
var one = newConstant(1, 2);
var two = newConstant(3, 4);

while (i < a.length) {
    alert(a[i].x);
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:42:55.397

您被编写`newConstructor`为构造函数，但您将其用作普通函数，请尝试添加`new`关键字。

```
var i = 0;
var a = [];
var newConstant = function (x, y) {
    this.x = x;
    this.y = y;
    a.push(this);
};
var one = new newConstant(1, 2); //notice the new keyword indicating a constructor
var two = new newConstant(3, 4);

while (i < a.length) {
    alert(a[i].x);
    i++;
} 
```

这是在行动：http: [//jsfiddle.net/V3zwW/](http://jsfiddle.net/V3zwW/)

这是一篇关于[javascript 中的 this 关键字](http://www.quirksmode.org/js/this.html)的文章。[这是有关如何正确使用构造函数模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)的另一个参考

之前发生的事情是您的第二次调用设置`this.x`为 3 但是`this`提到`window`，这是因为 javascript 中的函数将 this 分配给它们的调用者，除非它们是构造函数。在您的情况下`window.x`，您两次发出警报（您设置为 3）导致`3 3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:45:26.363

您忘记了关键字“new”，请参见下面的示例：

```
var one = new newConstant(1, 2);
var two = new newConstant(3, 4); 
```

# java - 带有spring jdbc的sql中的模式

> ID：14741024
> 
> 赞同：1
> 
> 时间：2013-02-06T23:42:05.577
> 
> 标签：java, spring, jdbc

是否有必要始终将 Schema 放在 sql 查询中？`SimpleJdbcTemplate`似乎可以在本地使用架构但在其他机器上失败。可能是什么原因？数据库是 oracle，它在 JBoss AS 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:09:49.050

SQL 语法仅取决于数据库的类型。对于 Oracle，如果引用的对象（例如表、视图）在您当前的模式中，或者它存在本地或公共同义词，则不需要指定模式。如果不是，那么您必须将对象引用为`[schema].[object]`.

# java - 使用 java 打印到网络打印机

> ID：14741027
> 
> 赞同：0
> 
> 时间：2013-02-06T23:42:18.720
> 
> 标签：java, pdf, web-applications, printing

我需要发送 pdf 文档以在 web 应用程序的服务器端打印，打印机完全支持 pdf 打印等，它也与服务器联网。pdf 也存储在服务器上。

我想要的是单击按钮，打印出pdf文件，目前我有以下代码：

```
//Server side printing
public class PrintDocument {

    public void printText(String text) throws PrintException, IOException {

        //Looks for all printers
        //PrintService[] printServices = PrinterJob.lookupPrintServices();

        PrintService service = PrintServiceLookup.lookupDefaultPrintService();
        InputStream is = new ByteArrayInputStream(text.getBytes("UTF8"));
        PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
        pras.add(new Copies(1));

        DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
        Doc doc = new SimpleDoc(is, flavor, null);
        DocPrintJob job = service.createPrintJob();

        PrintJobWatcher pjw = new PrintJobWatcher(job);
        job.print(doc, pras);
        pjw.waitForDone();
        is.close();
    }
}

class PrintJobWatcher {

    boolean done = false;

    PrintJobWatcher(DocPrintJob job) {
        job.addPrintJobListener(new PrintJobAdapter() {
            public void printJobCanceled(PrintJobEvent pje) {
                allDone();
            }

            public void printJobCompleted(PrintJobEvent pje) {
                allDone();
            }

            public void printJobFailed(PrintJobEvent pje) {
                allDone();
            }

            public void printJobNoMoreEvents(PrintJobEvent pje) {
                allDone();
            }

            void allDone() {
                synchronized (PrintJobWatcher.this) {
                    done = true;
                    System.out.println("Printing has successfully completed, please collect your prints)");
                    PrintJobWatcher.this.notify();
                }
            }
        });
    }

    public synchronized void waitForDone() {
        try {
            while (!done) {
                wait();
            }
        } catch (InterruptedException e) {
        }
    }
} 
```

但是我有几个问题/问题，如何将 pdf 放入输入流中以便打印出来，我可以选择双面打印等选项，以及如何从 JSF Web 应用程序内部调用它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T03:42:51.847

看看这个博客。我们必须使用双面打印选项打印文档。在java中直接双面打印是不可能的。然而，解决方法是使用 ghostscript 并将 PDF 转换为 PS（后脚本文件）。为此，您可以添加 PJL 命令或 Post 脚本命令。

更多信息在

[http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html](http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html)

还阅读了类似的问题

[使用 javax.print 库打印属性（托盘控制、双面打印等）](https://stackoverflow.com/questions/14328012/printing-with-attributestray-control-duplex-etc-using-javax-print-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:57:21.987

根据[这篇文章](http://www.tachytelic.net/2010/10/hp-direct-pdf-printing-and-printer-tray-control/)，应该可以使用[PJL](http://en.wikipedia.org/wiki/Printer_Job_Language)块（维基百科链接包括指向 PJL 参考文档的指针）开始打印作业，然后是 PDF 数据。

感谢 PJL，您应该能够控制打印机必须提供的所有功能，包括双面打印等 - 博客文章甚至提到了装订 2 个 pdf 的组合打印输出。

一定要阅读这篇文章的评论，还有来自被列为专利发明人的人的评论，以及关于 PJL 命令的额外信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-21T06:55:37.413

阅读完此问答后，我花了一段时间使用 javax.print 库，却发现它与打印机选项支持不太一致。即，即使打印机有装订之类的选项，javax.printer 库也会将其显示为“不支持装订”。

因此，我随后使用普通的 java 套接字尝试了 PJL 命令，它运行良好，在我的测试中，它的打印速度也比 javax.print 库快，它的代码占用空间要小得多，最好的部分是根本不需要库：

```
private static void print(File document, String printerIpAddress)
{
    try (Socket socket = new Socket(printerIpAddress, 9100))
    {
        DataOutputStream out = new DataOutputStream(socket.getOutputStream());
        String title = document.getName();
        byte[] bytes = Files.readAllBytes(document.toPath());

        out.write(27);
        out.write("%-12345X@PJL\n".getBytes());
        out.write(("@PJL SET JOBNAME=" + title + "\n").getBytes());
        out.write("@PJL SET DUPLEX=ON\n".getBytes());
        out.write("@PJL SET STAPLEOPTION=ONE\n".getBytes());
        out.write("@PJL ENTER LANGUAGE=PDF\n".getBytes());
        out.write(bytes);
        out.write(27);
        out.write("%-12345X".getBytes());
        out.flush();
        out.close();
    }
    catch (Exception e)
    {
        System.out.println(e);
    }
} 
```

[有关使用 javax.print 尝试的更多信息，](https://stackoverflow.com/q/55777889/1062992)请参阅此内容。

# python - spellbinder python需要的回归

> ID：14741028
> 
> 赞同：-2
> 
> 时间：2013-02-06T23:42:28.940
> 
> 标签：python, python-3.x

我必须从 HP Codewars 2012 返回 spellbinder 程序，我不知道自己在做什么。这是我到目前为止所拥有的，请帮忙。我正在使用 python 3.3.0。这是链接[http://www.hpcodewars.org/past/cw15/problems/2012ProblemsFinalForPrinting.pdf](http://www.hpcodewars.org/past/cw15/problems/2012ProblemsFinalForPrinting.pdf)

```
def  fix (string):
'''The function of the repaired by a
speelbot abused Dictionary

word -> word to be repaired
a -> the point-to-exchange
b -> the correct letter

'''
    word, a, b =  string.split ( " " )

    return  word.replace (a, b)

for  word in  [ '"MUSTARD MC " , "JUNK J TR" , "MONSTER ON A" ']:
    print (word, "->" to repair (word)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:24:58.127

不想这样做。

您应该考虑尝试调试和解决问题。

```
def fix(item):
    '''The function of the repaired by a
    speelbot abused Dictionary

    word -> word to be repaired
    a -> the point-to-exchange
    b -> the correct letter

    '''
    try:
        word, a, b = item.split(" ")
    except ValueError:
        print "Invalid Input"

    return word.replace(a, b)

if __name__ == "__main__":
    for w in ["MUSTARD M C", "JUNK J TR", "MONSTER ON A"]:
        print w, "-> ", fix(w) 
```

# jquery - 无法让子 div 匹配其父列或合作伙伴列的可变高度

> ID：14741029
> 
> 赞同：1
> 
> 时间：2013-02-06T23:42:33.127
> 
> 标签：jquery, html, css

我将尝试格式化帖子，使其易于访问：

*   **问题：**

我在尝试让一个列 div（侧边栏）匹配其父级或左侧列的高度时遇到了一些令人沮丧的事情。我试过用纯 CSS 和 jQuery 来做，到目前为止还没有找到解决办法。页面内的内容是内容管理的（Wordpress + Boostrap），并且基础本身用作其他三个页面的模板，因此固定高度的解决方案在这里不会真正有用。

还有我尝试的最后一次 jQuery 尝试的残余，来自 StackOverflow 上的另一个解决方案 - 非常相似 - 问题。这没有成功，但我将代码留在（父 div 上的 colh-parent、两个子列上的 colh-child 和标题中的 jQuery）中，以防它帮助任何人理解我想要实现的目标。

我还尝试了一种涉及浮动父容器和似乎也没有任何效果的子容器的方法。目前我还没有太多经验，这个问题似乎有点过头了。

*   **有问题的页面：**

[http://okamistudio.com/ssawp/pennants/](http://okamistudio.com/ssawp/pennants/)

*   **目标：**

我试图让蓝色边条与白页的底部相接，就像在这个页面中一样（尽管在那个页面中它被内容强制向下）：

[http://okamistudio.com/ssawp/about-us/](http://okamistudio.com/ssawp/about-us/)

我想要实现的是侧边栏（div.subpage-sidebar）的蓝色背景与白色条的底部相接。据我了解，这将要求其父级 (div.span3) 满足其伙伴列 (div.span6) 或父级 (div.row / .colh-parent) 的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:06:20.067

您可以使用侧边栏的绝对定位来解决此问题。也许不是最理想的，但我已经测试过了，它看起来和你想要的完全一样。

```
.colh-parent {
    position: relative;
}
.span3 {
    position: absolute;
    right: 0;
    height: 100%;
} 
```

# json - 如何替换 grails 中的 JSON 序列化器编解码器？

> ID：14741030
> 
> 赞同：1
> 
> 时间：2013-02-06T23:42:33.133
> 
> 标签：json, grails, jackson

内置 JSON 对象的 grails 并没有削减 CPU 使用率。

Jackson 做得更好，但我喜欢 grails 设置“as JSON”语法的方式。

有没有办法让我配置 grails 来替换默认的 JSON 实现，使其成为我自己构建的东西（例如，Jackon 包装器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:48:52.823

当然，JSON 只是 class `grails.converters.JSON`。所以基本上，你可以导入你自己的`myapp.converters.JSON`

```
import myapp.conv.JSON

def blabla() {
   render [bla:bla, [blou:blou]] as JSON
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:09:53.540

moskiteau 的回答对于我提出问题的方式是正确的。

对于我的用例，我需要查看 HttpBuilder.parsers

# asp.net - ASP.NET HttpContext.RemapHandler 重新映射到 ASP Classic

> ID：14741031
> 
> 赞同：2
> 
> 时间：2013-02-06T23:42:40.163
> 
> 标签：asp.net, asp-classic, httphandler, httpmodule

我们正在将一个 ASP Classic 网站（实际上是一个更大网站下的虚拟目录）升级到 ASP.NET 3.5。将有一些遗留目录仍然是 ASP Classic。除此之外，每个 .asp 文件都将替换为目录层次结构中相同位置的 .aspx 文件。我们不想破坏从其他地方进入网站的旧链接。该网站托管在 IIS 6 上（我们无法控制）。

我的想法是，在 IIS 中，将 .asp 文件的常用处理程序 asp.dll 替换为 aspnet_isapi.dll。**第一个问题：**如果我这样做，对 .asp 文件的请求是否会通过我在 web.config 中创建和注册的任何自定义 HTTP 模块进行路由？

然后，我将创建一个连接到 BeginRequest 的 HTTP 模块，该模块将测试请求的路径（在任何查询字符串之前）是否以 .asp 结尾。如果是，它将检查物理文件是否存在。如果没有，那么我将使用 HttpContext.RewritePath 将“x”附加到“.asp”。否则，如果 .asp 文件确实存在，我将使用 HttpContext.RemapHandler 将处理程序切换回 asp.dll，以便将文件作为 ASP Classic 文件进行处理。

**第二个问题：**这行得通吗？**第三个问题：**我使用什么作为 RemapHandler 方法的参数？如何获取对 ASP Classic 处理程序实例的引用？（如果我知道第三个问题的答案，我会自己尝试所有这些！）

**更新：**好的，我自己尝试过，除了我重命名了剩余的 .asp 文件，以便它们的扩展名是 .aspc（ASP Classic），并且在 IIS 中我指定了旧的 asp.dll 作为它们的处理程序。然后，我没有检查请求的 .asp 文件是否存在，如果存在则重新映射到 ASP Classic 处理程序，而是检查了对应物理位置中是否存在*扩展名为 .aspc*的文件。如果是这样，我会重写 URL 以附加“c”。这行得通！因此，上面我的第一个问题的答案是“是”，而我的第二个问题的答案是“是的，差不多，只是关于重新映射处理程序的部分是未知的”。但最好不必更改所有旧 .asp 文件的扩展名，所以我只剩下**一个问题**: 最初的 RemapHandler 方法是否有效，如果有效，它的论点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T07:33:58.250

您知道吗，您可以使用 IIS 中的 web.config 文件和重定向规则轻松处理这个问题？

您需要激活[此处](http://weblogs.asp.net/scottgu/archive/2010/04/20/tip-trick-fix-common-seo-problems-using-the-url-rewrite-extension.aspx)描述的 URL Rewrite2 模块。这是 IIS 的一个非常好的特性，可以解决路由问题，请参见[此处](http://www.ourace.com/78-iis-rewrite-rules)的一些示例。

看看你的情况，我会按照以下方式做一些事情：

```
<rule name="execute classic asp if file exists" stopProcessing="true">
  <match url="(\w+\.asp)$" />
  <conditions>
    <add input="C:\Path\To\Your\WebApp\{R:1}.asp" matchType="IsFile" />
  </conditions>
  <action type="Rewrite" url="{R:1}c" appendQueryString="true" />
</rule>
<rule name="execute dotnet otherwise" stopProcessing="true">
  <match url="(\w+\.asp)$" />
  <action type="Rewrite" url="{R:1}x" appendQueryString="true" />
</rule> 
```

我不确定这里的所有正则表达式是否都适合你，但这意味着作为一个实验的开始。明确写的原因`C:\Path\To\Your\WebApp\`是，我没有找到一种方法来获取 Web 应用程序的基本路径作为参数。

# gwt - GWT gwtquery .live() 方法可能存在的错误

> ID：14741032
> 
> 赞同：0
> 
> 时间：2013-02-06T23:42:44.680
> 
> 标签：gwt, gwtquery

我正在尝试执行以下操作：

我想为某些链接添加一个特定的处理程序，由一个类表示。

`$("a.link_list").live("click", new ListLinkHandler());`

我需要`.live()`而不是`.bind()`因为将生成新的此类链接。（我知道 jQuery 已`.live()`被弃用`.on()`，但 gwt-query 还`.on()`没有。）

我像这样定义了处理程序（就像[gwtquery 示例一样](http://code.google.com/p/gwtquery/wiki/GettingStarted#Add_an_event_handler)）：

```
public class ListLinkHandler extends Function {
    @Override
    public boolean f(Event e) { [...] }
} 
```

但是，当我单击链接时，永远不会调用处理程序方法。我可以在 Chrome 开发工具中看到事件监听器：http: [//screencloud.net/v/bV5V](http://screencloud.net/v/bV5V)。我认为它在，`body`因为它是一个`.live()`。

我尝试使用`.bind()`并且效果很好。`body`事件侦听器在 a 中发生了变化，并且`a.link_list`处理程序执行了它应该做的事情，但是（如文档所述，我没有测试）不适用于新创建的链接。

我为该方法[提交了一个错误](http://code.google.com/p/gwtquery/issues/detail?id=173)`.live()`，但也许我做错了什么。

另外，我不知道没有 gwtquery 怎么做，GWT 似乎没有按类选择元素的方法，也没有不断地将侦听器添加到新元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:03:24.517

看来你做错了什么，但我需要更多的代码来确定。您能否发送`onModuleLoad`演示此错误行为的完整代码？

我已经使用 编写了一个快速示例`live`，它可以在 Chrome 和 FF 中使用 gquery 添加新的 gwt 小部件或 dom 元素时工作

```
public void onModuleLoad() {
  $("a.link_list").live("click",  new ListLinkHandler());

  // Add a new link via gquery
  $("<a class='link_list' href=javascript:alert('href') onClick=alert('onClick')>Click </a>").appendTo(document);

  // Add a new link via gwt widgets
  Anchor a = new Anchor("click");
  a.setStyleName("link_list");
  a.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
      Window.alert("clickHandler");
    }
  });
  RootPanel.get().add(a);
}

public class ListLinkHandler extends Function {
  @Override
  public boolean f(Event e) {
    Window.alert("live");
    return true;
  }
} 
```

# javascript - 验证多个电子邮件字段

> ID：14741037
> 
> 赞同：0
> 
> 时间：2013-02-06T23:42:52.790
> 
> 标签：javascript, jquery

我使用[Joren Rapini 的验证码](http://jorenrapini.com/blog/javascript/the-simple-quick-and-small-jquery-html-form-validation-solution)来填写我的在线表格。[乔伦的网站](http://jorenrapini.com/blog/javascript/the-simple-quick-and-small-jquery-html-form-validation-solution)

它允许您检查是否已正确输入电子邮件地址，但我有 2 个电子邮件地址要在表单中验证。

知道我会怎么做吗？

我试过添加 email = $("#youremail"); 以及当前在代码中的那个 email = $("#receiveremail"); 但它只适用于一个。

```
$(document).ready(function(){
    // Place ID's of all required fields here.
    required = ["youremail", "name", "receiveremail", "message"];

    // If using an ID other than #email or #error then replace it here
    email = $("#receiveremail");
    errornotice = $("#error");

    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field";
    emailerror = "Not a vaild email";
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:52:51.200

他没有很好地解释这一点，但它相当简单。您必须验证两个单独的电子邮件字段：

```
if (!/^S+@S+.S+$/.test(email.val())) {
    email.addClass("needsfilled");
    email.val(emailerror);
}
var email2 = $("#youremail");
if (!/^S+@S+.S+$/.test(email2.val()) { 
```

当然，最好以与`required`完成方式类似的设置循环遍历电子邮件。

也用`var`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:53:17.520

您需要为其他字段运行验证代码

在 document.ready 中

```
otheremail = $("#otheremail"); 
```

在表单中提交

```
if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(otheremail .val())) {
            otheremail .addClass("needsfilled");
            otheremail .val(emailerror);
        } 
```

对 Joren Rapini 没有冒犯，但这段代码很老套，除了最小的目的之外，不应该用于其他目的。

# ruby - 在覆盖 super 的同时仍然返回 super 时，如何有条件地执行某些操作？

> ID：14741045
> 
> 赞同：1
> 
> 时间：2013-02-06T23:43:10.210
> 
> 标签：ruby, subclass, superclass

在覆盖 super 时如何有条件地执行某些操作，同时仍然返回 super 的结果？我确信在 Ruby 中有一种更简洁的方式来编写它

```
def my_method
  result = super
  if result.success?
    my_other_method1
    my_other_method2
    if @my_field
      @x = @y
    end
  end

  result
end 
```

我相信可以用块做一些事情，但还没有真正理解它们。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:39:45.903

如果您使用的是 ruby​​ 1.9，则可以使用该`Object#tap`方法对其进行一些清理。

```
def my_method
    super.tap do |result|
        if result.success?
            my_other_method1
            my_other_method2
            if @my_field
                @x = @y
            end
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:47:22.097

你可以这样做：

```
def my_method
  super || my_other_method
end 
```

# scala - 多态 Scala 返回类型

> ID：14741047
> 
> 赞同：8
> 
> 时间：2013-02-06T23:43:28.727
> 
> 标签：scala, generics, polymorphism, return-type

我有一个抽象的 Scala 类`Base`，它有子类`Derived1`和`Derived2`. `Base`定义了一个函数 f()，它返回一个与其实现类相同类型的对象。所以`Derived1.f()`返回`Derived1`和`Derived2.f()`返回`Derived2`。我如何在 Scala 中编写这个？

到目前为止，这是我想出的。

```
package com.github.wpm.cancan

abstract class Base {
  def f[C <: Base]: C
}

case class Derived1(x: Int) extends Base {
  def f[Derived1] = Derived1(x + 1)
}

case class Derived2(x: Int) extends Base {
  def f[Derived2] = Derived2(x + 2)
} 
```

这会产生以下编译器错误：

```
type mismatch;
[error]  found   : com.github.wpm.cancan.Derived1
[error]  required: Derived1
[error]   def f[Derived1] = Derived1(x + 1)

type mismatch;
[error]  found   : com.github.wpm.cancan.Derived2
[error]  required: Derived2
[error]   def f[Derived2] = Derived2(x + 2) 
```

这个错误信息让我很困惑，因为我认为`com.github.wpm.cancan.Derived1`应该和`Derived1`这个上下文中的一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T00:29:11.863

Randall Schulz 指出了您当前代码不起作用的原因之一。[*不过，使用F*有界多态性](http://en.wikipedia.org/wiki/Bounded_quantification)可以得到你想要的：

```
trait Base[C <: Base[C]] { def f: C }

case class Derived1(x: Int) extends Base[Derived1] {
  def f: Derived1 = Derived1(x + 1)
}

case class Derived2(x: Int) extends Base[Derived2] {
  // Note that you don't have to provide the return type here.
  def f = Derived2(x + 2)
} 
```

基本特征上的类型参数允许您在那里讨论实现类——例如在返回类型中为`f`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T15:53:19.133

`C`只是为了增加一个关于（非常好）Travis Brown 回答的小精确度：这不是`trait Base[C <: Base[C]]`让您参考实现类；它只是坚持`subclass extends Base[subclass]`让你这样做的写作惯例。据我所知，没有办法指代这种类型。为了澄清我的意思，这编译

```
trait Base[C <: Base[C]] { def f: C }

case class Derived1(x: Int) extends Base[Derived1] {
  def f: Derived1 = Derived1(x + 1)
}
// a Derived2 where f returns Derived1!!
case class Derived2(x: Int) extends Base[Derived1] {
  def f = Derived1(x + 2)
} 
```

现在，如果您将拥有的所有实现`Base`都是案例类，那么您可以通过自类型绑定来实现这一点：

```
trait Base[C <: Base[C]] { self: C => 
  def f: C 
}

case class Derived1(x: Int) extends Base[Derived1] {
  def f: Derived1 = Derived1(x + 1)
}
// a Derived2 where f returns Derived1!!
// this won't compile now
case class Derived2(x: Int) extends Base[Derived1] {
  def f = Derived1(x + 2)
} 
```

# php - php每2秒读取一次文件不起作用

> ID：14741048
> 
> 赞同：0
> 
> 时间：2013-02-06T23:43:35.050
> 
> 标签：php, jquery, ajax

我有一个每 2 秒更新一次的文件，我想读取日志文件并将其发布到 php 文件中，但它只是读取文件内容 1 次，而不是每 2 秒更新一次。在这种情况下，not_insync_text 值每 2 秒更新一次。这是我的代码

```
<script>
    //var insync_text = <?php echo $_SESSION['IN_SYNC_COUNT'];?>;
   var not_insync_text = ["10", "11", "12", "13"];
     var question_text = ["20", "21", "22", "23"];
     var counter = 0;
     var insync = document.getElementById("insync");
     var not_insync = document.getElementById("not_insync");
     var question = document.getElementById("question");

function change() {
    <?php $output="";$output=exec('cat hello1.txt');?>
    <?php $insync_output="";$insync_output=exec('cat $INSYNC_METRICS_LOG_FILE');?>
    insync.innerHTML = "<?php echo $insync_output; ?>";
    not_insync.innerHTML = "<font color=red>" +not_insync_text[counter]+ "</font>";
    question.innerHTML = "<?php echo $output; ?>";
    counter++;
    if (counter >= not_insync_text.length) counter = 0;
}

change();
setInterval(function() {
    change()
}, 4000); 
```

这里 hello1.txt 和 $INSYNC_METRICS_LOG_FILE 将更新为增量数字（1,2,3），我面临与 $_SESSION['INSYNC_METRICS_VALUE'] 相同的问题，除非我刷新页面，否则它只会打印一次，但我不想刷新，所以我从 setInterval 调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:48:11.653

PHP 在服务器上运行，这意味着所有 PHP 代码在页面加载时执行一次。函数 change() 中的所有 PHP 都会一次性输出值，而不是每次调用该函数时。

如果要在不刷新页面的情况下进行更新，则需要使用 AJAX。

# c++ - 字符串是 C++ 中的字符吗？

> ID：14741049
> 
> 赞同：0
> 
> 时间：2013-02-06T23:43:44.677
> 
> 标签：c++, string, char

C++ 中的 a可以`char*`接收字符串作为参数吗？如果是这样，这是如何工作的。

**例子：**

```
myfunc("hello"); //call
myfunc(char * c)
{ ...
} 
```

字符与字符串的关系究竟如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:05:33.530

字面量的类型`"hello"`是`const char[6]`，即一个字符数组，其中包含字符串空间和空终止字节。

C++ 允许在传递函数参数时将其转换为另一种类型。在这种情况下，数组类型被转换为指针类型，`const char *`，指针引用第一个具有 value 的字符`'h'`。

C++03 允许转换为`char *`，删除`const`，但实际修改字符串是未定义的行为。这样做是为了与老式 C 兼容，并在新的 C++11 标准中被撤销，因此您的示例不会通过更新的编译器。

顺便说一句，由于继承自 C 的遗留问题，如果将函数声明为`myfunc(char c[6])`. 的类型`c`仍然是`char *`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T23:50:21.380

在您的示例中，它不会按预期工作。以这种方式使用字符串（指向开始字符的指针）仅在字符串为空终止时才有效。这就是旧 c_str 的工作方式。如果我们有对第一个字符的引用，我们可以迭代直到找到终止字符“\0”来访问整个字符串。

# jquery - jQuery nav .animate .hover -- 为什么这不起作用？

> ID：14741050
> 
> 赞同：0
> 
> 时间：2013-02-06T23:43:57.703
> 
> 标签：jquery, jquery-animate, jquery-hover

我有一个要制作动画的侧面菜单。我希望它在页面加载时可见，然后滑动到左边距。在悬停时，我希望每个 li 向右移动 150px，而不是在鼠标离开时返回 -150px。

我几乎可以肯定我的代码是正确的，但是……不。你能帮助我吗？

```
<script type="text/javascript">

$(document).ready(function() {
  $('#nav').animate( {left: "-110px"} );

//When mouse rolls over
  $('#nav li').hover(function() {
    $(this).stop().animate( {left: "150px"}, {queue: false, duration: 'slow'} );

  }, function() {
    $(this).stop().animate( {left: "-150px"}, {queue: false, duration: 'slow'} );  

    });

  }); // end of document ready

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:24:18.833

您必须将`<li>`'s设置`position`为`relative`或使用`margin-left`. 此外，最好使用`mouseenter`并且`mouseleave`仅当鼠标指针位于所需元素上时才会触发事件（有关更多详细信息，请参见[mouseover()](http://api.jquery.com/mouseover/)）。尝试这个：

**HTML**

```
<ul id="nav">
     <li>Item1</li>
     <li>Item2</li>
</ul> 
```

**CSS**

```
li {
    position: relative;
} 
```

**JS**

```
$nav = $('#nav');
$nav.animate( {'left': "-110px"} );

//When mouse rolls over
$nav.find('li')
.on('mouseenter', function() {
    $(this).stop().animate( {'left': "150px"}, {queue: false, duration: 'slow'} );
})
.on('mouseleave', function() {
    $(this).stop().animate( {'left': "-150px"}, {queue: false, duration: 'slow'} );  
}); 
```

你可以[在这里](http://jsfiddle.net/ragnarokkr/q9qEX/)测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:27:04.940

[http://jsfiddle.net/T5W2P/](http://jsfiddle.net/T5W2P/)

您需要将位置设置为相对。

HTML：

```
<ul id="nav">
    <li>Link</li>
    <li>Link</li>
    <li>Link</li>
    <li>Link</li>
    <li>Link</li>
    <li>Link</li>
    <li>Link</li>
</ul> 
```

CSS：

```
#nav, #nav li {
    position: relative;
} 
```

jQuery：

```
$(document).ready(function () {
    $('#nav').animate({
        left: "-20px"
    });
    //When mouse rolls over
    $('#nav li').hover(function () {
        $(this).stop().animate({
            left: "20px"
        }, {
            queue: false,
            duration: 'slow'
        });
    }, function () {
        $(this).stop().animate({
            left: "0px"
        }, {
            queue: false,
            duration: 'slow'
        });
    });
}); 
```

# css - 使用 * 选择器调整框大小会添加不需要的填充

> ID：14741052
> 
> 赞同：0
> 
> 时间：2013-02-06T23:44:05.943
> 
> 标签：css, css-selectors

我在响应式设计中使用 box-sizing 和 padding。

有效地使用以下代码：

```
.col * {
} 
```

我能够定位我的部分中名为“col”的所有内容。这很棒，直到我开始在彼此之间添加元素，然后再次添加该类。

我在这里整理了一个示例[http://jsfiddle.net/XS7KB/1/](http://jsfiddle.net/XS7KB/1/)。您将看到`<h1>`由于 href 的原因，第一行再次添加了 box-sizing。如果我添加另一个跨度、列表、hr 等，我会想象它是一样的。这可能是有问题的。

我正在寻找一种将其应用于第一组标签的方法，而两者之间没有任何内容。也许不同的选择器会阻止这种情况发生。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:59:10.477

如果“第一个集合”是指“第一个嵌套级别”，请使用子选择器将其仅限制为该组元素：

```
.col > * {
} 
```

这只会选择`h1`和`p`的子级`.col`，而不是其中的任何内容。

[更新的小提琴](http://jsfiddle.net/BoltClock/XS7KB/2)

# sql - 删除特定数据库的所有索引

> ID：14741054
> 
> 赞同：1
> 
> 时间：2013-02-06T23:44:16.263
> 
> 标签：sql, sql-server, indexing

如何从一个数据库中删除所有索引，无论是集群还是非集群？

我需要用脚本来做到这一点，而不是通过 GUI。

**已编辑**

数据库有 7 个表，其中一些是查找表，一些是通过外键关联的。每个表都有最小的一个索引，在创建主键时创建，因此自动创建了约束。通过 GUI 删除此类索引时，我收到一个错误，即由于依赖于其他键而无法删除索引。

因此，我需要首先删除作为外键的索引键，然后在主键上创建索引。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T00:10:13.897

动态 SQL 的变体略有不同，但是它首先删除外键，然后是主键，然后是索引（首先是非聚集索引，这样您就不会转换为堆（这会影响所有非聚集索引））。

```
USE specific_database;
GO 
```

首先，删除所有外键：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + N'ALTER TABLE ' 
  + QUOTENAME(OBJECT_SCHEMA_NAME([parent_object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([parent_object_id])) 
  + ' DROP CONSTRAINT ' + QUOTENAME(name) + ';
'
FROM sys.foreign_keys
WHERE OBJECTPROPERTY([parent_object_id], 'IsMsShipped') = 0;

EXEC sp_executesql @sql; 
```

现在删除主键：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + N'ALTER TABLE '
  + QUOTENAME(OBJECT_SCHEMA_NAME([parent_object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([parent_object_id])) 
  + ' DROP CONSTRAINT ' + QUOTENAME(name) + ';
'
FROM sys.key_constraints 
WHERE [type] = 'PK'
AND OBJECTPROPERTY([parent_object_id], 'IsMsShipped') = 0;

EXEC sp_executesql @sql; 
```

最后，索引，首先是非聚集的：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + N'DROP INDEX ' 
  + QUOTENAME(name) + ' ON '
  + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id])) + ';
'
FROM sys.indexes 
WHERE index_id > 0
AND OBJECTPROPERTY([object_id], 'IsMsShipped') = 0
ORDER BY [object_id], index_id DESC;

EXEC sp_executesql @sql; 
```

请注意，数据库引擎优化顾问会推荐一堆这样的索引（并且根据您提供的工作负载，可能会遗漏一些，并且可能会建议冗余和几乎重复的索引）。但是，它不会推荐您刚刚删除的任何数据完整性内容（PK、FK、唯一约束）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T23:46:17.743

创建一个`Dynamic SQL`

```
DECLARE @qry nvarchar(max);
SELECT @qry =  (SELECT  'DROP INDEX ' + ix.name + ' ON ' + OBJECT_NAME(ID) + '; '
                FROM  sysindexes ix
                WHERE   ix.Name IS NOT NULL AND 
                        ix.Name LIKE '%prefix_%'
                FOR XML PATH(''));
EXEC sp_executesql @qry 
```

*   [在一个脚本中删除所有索引和统计信息](http://sqlblog.com/blogs/jonathan_kehayias/archive/2008/12/15/drop-all-indexes-and-stats-in-one-script.aspx)

# python - 使用 numpy 数组连接列向量

> ID：14741061
> 
> 赞同：25
> 
> 时间：2013-02-06T23:45:08.027
> 
> 标签：python, vector, numpy, concatenation

我想使用 numpy 数组连接“列”向量，但因为默认情况下 numpy 将所有数组视为行向量，`np.hstack`并且`np.concatenate`沿任何轴都无济于事（也没有`np.transpose`像预期的那样）。

```
a = np.array((0, 1))
b = np.array((2, 1))
c = np.array((-1, -1))

np.hstack((a, b, c))
# array([ 0,  1,  2,  1, -1, -1])  ## Noooooo
np.reshape(np.hstack((a, b, c)), (2, 3))
# array([[ 0,  1,  2], [ 1, -1, -1]]) ## Reshaping won't help 
```

一种可能性（但太麻烦）是

```
np.hstack((a[:, np.newaxis], b[:, np.newaxis], c[:, np.newaxis]))
# array([[ 0,  2, -1], [ 1,  1, -1]]) ## 
```

有没有更好的方法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-07T14:07:15.403

我相信[numpy.column_stack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.column_stack.html)应该做你想做的。例子：

```
>>> a = np.array((0, 1))
>>> b = np.array((2, 1))
>>> c = np.array((-1, -1))
>>> numpy.column_stack((a,b,c))
array([[ 0,  2, -1],
       [ 1,  1, -1]]) 
```

它本质上等于

```
>>> numpy.vstack((a,b,c)).T 
```

尽管。正如文档中所说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T23:49:33.470

我尝试了以下。希望这对你正在做的事情足够好？

```
>>> np.vstack((a,b,c))
array([[ 0,  1],
       [ 2,  1],
       [-1, -1]])
>>> np.vstack((a,b,c)).T
array([[ 0,  2, -1],
       [ 1,  1, -1]]) 
```

# c++ - 使用 g++ 的模板编译错误，使用 llvm 编译正常

> ID：14741062
> 
> 赞同：0
> 
> 时间：2013-02-06T23:45:22.837
> 
> 标签：c++, templates, compiler-errors, g++

我真的不知道该怎么做。我有一些在 iOS 和 Linux 服务器上共享的代码。iOS LLVM 编译器编译得很好，但是当我尝试在 Linux 上使用 g++ 编译时，我得到了很多错误。第一个如下：

```
RemoveLight.h: In member function ‘void RemoveLight<WindowDerived, ChunkDerived, dim>::lightRemoveEditStart()’:
RemoveLight.h:49:17: error: ‘FloodFillLight’ was not declared in this scope
RemoveLight.h:49:45: error: expected primary-expression before ‘,’ token
RemoveLight.h:49:59: error: expected primary-expression before ‘,’ token 
```

这是第 49 行：

```
FloodFillLight<WindowDerived, ChunkDerived, dim>(x, i, z, target, chunkWindow); 
```

我确实在 RemoveLight.h 中包含了 FloodFillLight.h，所以这不是问题，我的模板都在 .h 文件中声明。我没有在 cpp 文件中定义模板的任何部分。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:07:02.260

尝试预处理文件并确保在使用之前声明了 FloodFillLight。

可能是一个杂散的#ifdef 混淆了您的包含。

# scala - Scala - 在编译时强制执行 Vector 的大小

> ID：14741067
> 
> 赞同：11
> 
> 时间：2013-02-06T23:45:42.457
> 
> 标签：scala, tuples, compile-time, type-systems

`Vector`是否可以在编译时强制传入方法的大小？我想使用空间中看起来像这样的点集合来建模一个 n 维欧几里得空间（这就是我现在所拥有的）：

```
case class EuclideanPoint(coordinates: Vector[Double]) {
  def distanceTo(desination: EuclieanPoint): Double = ???
} 
```

如果我有一个通过 创建的坐标，则`EuclideanPoint(Vector(1, 0, 0))`它是一个 3D 欧几里得点。鉴于此，我想确保在调用中传递的目标点具有`distanceTo`相同的维度。

我知道我可以使用`Tuple1`to来做到这一点`Tuple22`，但我想表示许多不同的几何空间，如果我用`Tuple`s 来做，我将为每个空间编写 22 个类 - 有更好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T00:52:09.197

可以通过多种方式来做到这一点，这些方式都或多或少像 Randall Schulz 在评论中描述的那样。Shapeless[库](https://github.com/milessabin/shapeless)提供了一个特别方便的实现，它可以让你得到非常接近你想要的东西，如下所示：

```
import shapeless._

case class EuclideanPoint[N <: Nat](
   coordinates: Sized[IndexedSeq[Double], N] { type A = Double }
) {
  def distanceTo(destination: EuclideanPoint[N]): Double = 
    math.sqrt(
      (this.coordinates zip destination.coordinates).map {
        case (a, b) => (a - b) * (a - b)
      }.sum
    )
} 
```

现在您可以编写以下内容：

```
val orig2d = EuclideanPoint(Sized(0.0, 0.0))
val unit2d = EuclideanPoint(Sized(1.0, 1.0))

val orig3d = EuclideanPoint(Sized(0.0, 0.0, 0.0))
val unit3d = EuclideanPoint(Sized(1.0, 1.0, 1.0)) 
```

和：

```
scala> orig2d distanceTo unit2d
res0: Double = 1.4142135623730951

scala> orig3d distanceTo unit3d
res1: Double = 1.7320508075688772 
```

但不是：

```
scala> orig2d distanceTo unit3d
<console>:15: error: type mismatch;
 found   : EuclideanPoint[shapeless.Nat._3]
 required: EuclideanPoint[shapeless.Nat._2]
              orig2d distanceTo unit3d
                                ^ 
```

`Sized`带有许多不错的功能，包括一些带有关于长度的静态保证的集合操作。例如，我们可以编写以下内容：

```
val somewhere = EuclideanPoint(Sized(0.0) ++ Sized(1.0, 0.0)) 
```

并且在三维空间中拥有一个普通的老点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:59:14.500

您可以通过对自然数进行类型级编码来自己做一些事情，例如：[http](http://apocalisp.wordpress.com/2010/06/08/type-level-programming-in-scala/) ://apocalisp.wordpress.com/2010/06/08/type-level-programming-in-scala/ 。然后只需通过自然参数化您的矢量。不需要额外的依赖，但可能会比使用 Shapeless 更复杂。

# r - 绘图时将函数应用于分组值（ggplot）

> ID：14741068
> 
> 赞同：1
> 
> 时间：2013-02-06T23:45:48.740
> 
> 标签：r, ggplot2

只是想知道是否可以使用 geom_bar 操作 ggplot 的 y 轴

例如：

```
library(plyr)
df1 <- data.frame(a=c(5,5,10,10,10))
df2 <- ddply(df1,.(a),sum)
ggplot(df2,aes(a,V1)) + geom_bar(stat="identity") 
```

是否可以直接在 ggplot 中生成该图，而不是聚合 df1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:57:00.147

您可以使用以下方法执行此操作`stat_summary`：

```
ggplot(df1, aes(a, a)) +
  stat_summary(fun.y=sum, geom="bar") 
```

# php - 使用 PHP 上传图片时出现 500 内部服务器错误

> ID：14741073
> 
> 赞同：0
> 
> 时间：2013-02-06T23:46:12.433
> 
> 标签：php, upload

我为用户提供了使用在线表单上传文件的能力，但每当处理文件上传时，我都会不断收到 500 个内部服务器错误。这是我所知道的：

*   该问题与 php.ini 无关。我检查了最大文件上传大小，它设置为 2 兆字节。上传 3kb 大文件和 100kb 大文件时，我收到相同的 500 内部服务器错误。
*   该问题与文件权限无关。我用来上传的 php 文件的`upload.php`权限设置为 664，而上传的文件夹名为 的`upload_pic`文件夹权限为 755。
*   这不是代码的问题。完全相同的代码在我以前的服务器上运行。我最近购买了一台新服务器并正在迁移站点，这就是我遇到问题的地方。

这两天上网查了一下，没找到问题的原因。我见过许多与我类似的问题，但其中大部分是通过更改文件/目录权限或对 php.ini 进行编辑来解决的。

有没有人有任何其他建议的解决方案？

谢谢！

# python - 在 Python 中清理一段文本

> ID：14741078
> 
> 赞同：2
> 
> 时间：2013-02-06T23:46:29.983
> 
> 标签：python, compare, steam

我对 Python 还很陌生，但我想开始并通过编写一些我将使用的功能的脚本来学习一点。我有一些文本是通过在 Team Fortress 2 的控制台中输入“状态”来检索的。我想要实现的是，我想将下面的文本转换为只有`STEAM_X:X:XXXXXXXX`Steam64 ID 的文本。

```
# userid name                uniqueid            connected ping loss state
#     31 "Atonement -Ai-"    STEAM_0:1:27464943  00:48      103    0 active
#     10 "?loop?"        STEAM_0:0:31072991  40:48       62    0 active
#     11 "爱 -Ai-"          STEAM_0:0:41992530  40:46       68    0 active
#     12 "MrKateUpton -Ai-"  STEAM_0:1:10894538  40:25       81    0 active
#     13 "Tacet -Ai-"        STEAM_0:1:52131782  39:59       83    0 active
#     14 "CottonBonbon-Ai-"  STEAM_0:1:47812003  39:39       51    0 active
#     15 "belt -Ai-"         STEAM_0:1:4941202   38:43      123    0 active
#     16 "boutros :3"        STEAM_0:0:32271324  38:21       65    0 active
#     17 "[tilt] Xikkari"    STEAM_0:1:41148798  38:14       92    0 active
#     24 "ElenaWitch"        STEAM_0:0:17495028  31:30       73    0 active
#     19 "[tilt] Batcan #boutros" STEAM_0:1:41205650 38:10   63    0 active
#     20 "[?l??]whatupmydiggas" STEAM_0:1:50559125 37:58  112    0 active
#     21 "[tilt] musicman"   STEAM_0:1:37758467  37:31       89    0 active
#     22 "Jack Frost"        STEAM_0:0:24206189  37:28       90    0 active
#     28 "[tilt-sub]deaf ears #best safet" STEAM_0:1:29612138 19:05   94    0 active
#     25 "? notez ?ai"    STEAM_0:1:29663879  31:23      113    0 active
#     27 "-Ai- Lord English" STEAM_0:1:44114633  24:08      116    0 active
#     29 "1.prototypes"      STEAM_0:0:42256202  17:41       83    0 active
#     30 "SourceTV  // name for SourceTV" BOT                        active
#     32 "PUT ME IN COACH"   STEAM_0:1:48004781  00:36      173    0 spawning 
```

Python中是否有执行以下算法的内置函数？

```
For all that is not (!) Steam_X:X:XXXXXXXX, delete/remove. 
```

我已经做了相当多的谷歌搜索，但没有什么具体的。如果有人能让我开始使用内置的 Python 函数，我将非常感激开始编码。

PS输出会是这样的

```
STEAM_0:1:27464943
STEAM_0:0:31072991
STEAM_0:1:10894538
etc
etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:52:51.833

听起来像是一个正则表达式的简单案例。假设它们总是这样的数字：

```
>>> import re

>>> with open('/tmp/spam.txt') as f:
...   for steam64id in re.findall(r'STEAM_\d:\d:\d+', f.read()):
...     print steam64id
... 
STEAM_0:1:27464943
STEAM_0:0:31072991
STEAM_0:0:41992530
STEAM_0:1:10894538
STEAM_0:1:52131782
STEAM_0:1:47812003
STEAM_0:1:4941202
STEAM_0:0:32271324
STEAM_0:1:41148798
STEAM_0:0:17495028
STEAM_0:1:41205650
STEAM_0:1:50559125
STEAM_0:1:37758467
STEAM_0:0:24206189
STEAM_0:1:29612138
STEAM_0:1:29663879
STEAM_0:1:44114633
STEAM_0:0:42256202
STEAM_0:1:48004781 
```

*删除行的常用方法不是从原始文件中删除它们，而是将要保留*的行打印到新文件中（然后，如果处理成功，则可选择将其复制覆盖原始文件）。

# java - 使用允许延迟的远程服务器生成圆形时间戳

> ID：14741082
> 
> 赞同：0
> 
> 时间：2013-02-06T23:46:51.737
> 
> 标签：java, cryptography

我想以一种我认为相当简单的方式生成时间戳——但数学让我无法理解！

我想生成满足以下条件的 2 个时间戳（自纪元以来以毫秒为单位）：

1.  他们是平等的。
2.  它们在 10 秒内生成时相等。
3.  它们会在几分钟后“过期”——比如最少 5 分钟，最多 10 分钟？（即时间戳未来日期）

用例如下：

*   客户端 A 从服务器 A 请求当前时间 - 使用响应来计算它自己的时钟漂移。
*   客户端 A 根据服务器 A 时间生成一个到期时间戳并发送到服务器 B（加密 - 所以我不能只是读取它）
*   假设服务器 A 与服务器 B 的不同步时间少于 10 秒，服务器 B 生成具有相同到期时间的相同时间戳。

例子：

```
Time SvrA    Time SvrB    Client A    Server B

11:53.00     11:53.09     12:00.00    12:00.00
11:53.09     11:53.00     12:00.00    12:00.00
11:54.59     11:55.00     12:00.00    12:00.00
11:54.59     11:55.08     12:00.00    12:00.00 - could be 12:05 as long as they match
12:00.00     11:59.59     12:05.00    12:05.00 - could be 12:10 etc... 
```

ETC....

理想情况下，我想要一些只适用于 Longs 的东西——并且避开 Java 日历

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:20:43.963

为什么不直接使用毫秒时间戳并检查它们的差值的绝对值是否为 10 秒且最旧的不超过 10 分钟？

```
public static final long MAX_SKEW = 10 * 1000; // 10 seconds.
public static final long MAX_AGE = 10 * 60 * 1000; // 10 minutes.
public static boolean timestampsMatch(long t1, long t2) {
  if (Math.abs(t1 - t2) > MAX_SKEW) { return false; }
  final long oldest = Math.min(t1, t2);
  final long now = System.currentTimeMillis();
  if ((now - oldest) > MAX_AGE) { return false; }
  return true;
} 
```

# jquery - 无法让我的 Jquery 按钮转到链接

> ID：14741083
> 
> 赞同：0
> 
> 时间：2013-02-06T23:46:53.797
> 
> 标签：jquery, jquery-ui, uibutton

我正在使用 Jquery 为我的网站设计一些按钮，它看起来很棒，除了按钮什么都不做。这是我设置按钮的方式；

JS

```
$(function() {
    $( "input[type=submit], a, button" )
    .button()
    .click(function( event ) {
        event.preventDefault();
    });
}); 
```

HTML

```
<button><li><a href="../home.html">HOME</a></li></button>
<button><li><a href="../commercial.html">COMMERCIAL</a></li></button>
<button><li><a href="../residential.html">RESIDENTIAL</a></li></button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:06:46.437

```
 $(function() {

    $( "input[type=submit], a, button" )
    .button()
    .click(function( event ) {
var urlink = $(this).attr('href');   
    window.location = $urlink;   
    });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:04:28.967

这是我的建议。

```
<ul>
   <li ><a href="somewhere">Home</a></li>
   <li ><a href="somewhere">Commercial</a></li>
   <li ><a href="somewhere">Residential<a/></li>
</ul> 
```

我不知道您是如何使用 jQuery 来“样式化”的，但我认为简单的 css 可能会起作用。
我认为您不需要按钮。
或者，如果您需要按钮，那么

```
<ul>
    <li><input type="button" value="Home" name="home"/></li>
    <li><input type="button" value="commercial" name="commercial"/></li>
</ul> 
```

JS

```
$(document).ready(function(){

    $("input[name=home]").bind("click", function(){
                  //submit http request or locatioin.href
     });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T06:50:48.507

您显示的 JavaScript 片段来自[JQuery UI 演示页面](http://jqueryui.com/button/)

它使用 click 事件的 preventDefault() 方法来阻止它激活 click 事件。这样做是为了使演示按钮不会导致按钮，特别是输入按钮将事件发布到服务器。由于这是一个演示页面，我推测制作者不希望与按钮相关的事件被激活。

您可以省略 preventDefault() 方法，点击事件将被激活。此后，您将能够使用您的按钮查看页面或相关操作。例如

```
<script>
$(function() {
    $( "input[type=submit], a, button").button().click();
});
</script> 
```

# symfony - FOSUser Bundle 添加 PlaceHolder 到表单元素

> ID：14741084
> 
> 赞同：1
> 
> 时间：2013-02-06T23:46:57.160
> 
> 标签：symfony, fosuserbundle

我了解当您覆盖 FOSUser 捆绑表单时，您遵循此结构；

```
{{ form_widget(form.plainPassword.first, { 'attr': {'class': 'myformclass'} }) }} 
```

我还想在我的表单元素中添加 PlaceHolder 选项。我该怎么做？

所以它看起来像这样；

```
<input class="myformclass" placeholder="Password" type="password" id="password" name="_password" required="required" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:43:13.983

```
{{ form_widget(form.plainPassword.first, { 'attr': {'class': 'myformclass', 'placeholder': 'Password', 'id': password'}}) }} 
```

字段名称取决于您的表单名称

它会被命名为 fosuser 捆绑注册表单

```
fos_user_registration_form[plainPassword][password] 
```

ID将是

```
fos_user_registration_form_plainPassword_password 
```

您可以像我的示例中所写的那样覆盖“id”

必需和名称选项在表单类中定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:18:57.947

您可以使用[占位符属性](http://davidwalsh.name/html5-placeholder)。

## 方法1：树枝

```
{{ form_widget(form.plainPassword.first, { 'attr': {'placeholder': 'enter your password'} }) }} 
```

## 方法 2：表单生成器

```
$builder
    ->add('plainPassword', null , array(
        'attr'=> 
            array('placeholder'=>'enter your password')
        )
    ); 
```

# php - 在 PHP 错误中从数据库中提取数据

> ID：14741092
> 
> 赞同：1
> 
> 时间：2013-02-06T23:47:40.153
> 
> 标签：php

我正在使用此代码从我的数据库中提取数据，但它不起作用。有任何想法吗？

```
Code:
<?php

$db = new mysqli($host,$user,$pass,$name);

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
    $query = "SELECT * FROM Sublist WHERE 1 LIMIT 0 , 30";
    $result = $mysqli->query($query);

while($info = mysql_fetch_array($query,  MYSQL_ASSOC)) {
echo $info['scheduled_date'];
echo "<br>";
echo $info['customer_name'];
echo "<br>";
echo $info['status'];
echo "<br>";
echo $info['kaspersky_template'];
echo "<br>";
echo $info['pcpickup_template'];

 } 
?> 
```

错误代码：致命错误：在第 20 行的 /home/projectu/public_html/sub/scheduled.php 中的非对象上调用成员函数 query()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:49:01.157

你不是说

```
$result = $db->query($query); 
```

其次是

```
while ($info = mysqli_fetch_array($result)) { 
```

# c - 在 C 中动态重新分配结构数组

> ID：14741098
> 
> 赞同：3
> 
> 时间：2013-02-06T23:48:15.933
> 
> 标签：c, arrays, struct, realloc

我的部分代码将从文本文件中读取未知数量的行，将该行解析为结构（tempSomeStruct），调整 SomeStruct_Array 的大小，然后将该 tempSomeStruct 添加到内存中新打开的位置。

但是经过几次while循环后，我的程序停止并说

> myApplication.exe 已触发断点。

我没有设置断点，并且进行了一些挖掘，看起来断点是由于我调用 realloc 造成的堆损坏。我对动态分配很陌生，所以虽然我已经搜索并找到了一些可能的原因，但到目前为止还没有修复工作。

在这种情况下我是如何破坏堆的，我有什么不同的做法来避免这样做？

我有这样的功能：

```
int growArray(SomeStruct **SomeStruct_Array,int currentSize, int numNewElements)
{
    const int totalSize = currentSize + numNewElements;
    SomeStruct *temp = (SomeStruct*)realloc(*SomeStruct_Array,(totalSize * sizeof(SomeStruct)));
    if (temp == NULL)
    {
        printf("Cannot allocate more memory.\n");
        return 0;
    }
    else
    {
        *SomeStruct_Array = temp;
    }

    return totalSize;
} 
```

它在其他地方被这样调用：

```
SomeStruct* SomeStruct_Array = (SomeStruct *) calloc(1,sizeof(SomeStruct));
int Error_Array_Size = 0;

if(SomeStruct_Array == NULL)
{
   printf("Cannot allocate initial memory for data\n");
   return;
}

while(fgets(line,sizeof(line), file) != NULL)
{
   parseTextIntoSomeStruct(line, &tempSomeStruct);
   SomeStruct_Array_Size = growArray(&SomeStruct_Array,SomeStruct_Array_Size,1);
   if(SomeStruct_Array_Size > 0)
   {
      SomeStruct_Array[SomeStruct_Array_Size] = tempSomeStruct;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:52:33.830

您的新数组的大小是`SomeStruct_Array_Size`，并且您立即写入`SomeStruct_Array[SomeStruct_Array_Size]`数组末尾的哪一个！请记住，C 数组是零索引的。

采用

```
SomeStruct_Array[SomeStruct_Array_Size-1] = tempSomeStruct; 
```

反而。

# python - 不知道如何返回函数参数值

> ID：14741099
> 
> 赞同：0
> 
> 时间：2013-02-06T23:48:22.430
> 
> 标签：python, function, arguments, return

python windows 7 python 3.3.0的新手我不知道如何返回函数参数值。一直在疯狂地环顾四周，这是一项课堂作业，但我确实有一个简单的脚本可以上交，但我正在拍摄以推动我自己。只需要知道我是否走错了方向。谢谢

```
def main():
    seat_a = 15.00
    seat_b = 12.00
    seat_c = 9.00
    class_a(seat_a)
    class_b(seat_b)
    class_c(seat_c)
    set_a = class_a(ticket_a)
    set_b = class_b(ticket_b)
    set_c = class_b(ticket_c)
    result_a_b_c =  set_a + set_b + set_c
    print("The total income generated from all ticket sales is $ ", format(result_a_b_c,',.2f'))

def class_a(ticket_a):
    while True:
        try:
            ask_a = float(input("How many class A seat tickets were sold? "))
            total_a = ticket_a * (ask_a)
            break
        except ValueError:
            print("That is not a valid number. Please try again.")
            class_a(ticket_a)
            break
        total_a = class_a(ticket_a)

def class_b(ticket_b):
    while True:
        try:
            ask_b = float(input("How many class B seat tickets were sold? "))
            total_b = ticket_b * (ask_b)
            break
        except ValueError:
            print("That is not a valid number. Please try again.")
            class_b(ticket_b)
            total_b = class_b(ticket_b)
            break

def class_c(ticket_c):
    while True:
        try:
            ask_c = float(input("How many class C seat tickets were sold? "))
            total_c = ticket_c * ask_c
            break
        except ValueError:
            print("That is not a valid number. Please try again.")
            class_c(ticket_c)
            total_c = class_c(ticket_c)
            break

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:03:40.783

首先，您的函数不返回任何内容。看看添加一个 return 语句来传回一个值。 [这是一个相当简单的函数介绍](http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-functions-and-modules-2/)

其次，如果函数确实返回了一个值，您希望将其分配给一个变量，您的代码只是调用该函数而不进行分配。

例如，这个小程序将一个整数传递给一个函数，然后该函数将其加倍并返回新值，然后将其打印出来。

```
def double(x):
    y = x * 2
    return y

z = double(2)
print(z) 
```

# notifications - 用于监视自定义警报的 Nagios 替代方案

> ID：14741102
> 
> 赞同：1
> 
> 时间：2013-02-06T23:48:49.043
> 
> 标签：notifications, monitoring, alert

我不想监控网络流量、CPU 使用率、内存使用率、磁盘使用率等。我唯一想要监控的是来自应用程序的自定义警报/通知。

我也不想监控日志或只是日志信息。

我想将消息发送到一个系统，该系统将记录它们并向我报告。

是否有任何简单/小型的东西可以通过门户网站提供此功能？我只需向它发送一条消息，它会将其保存在自己的本地数据库中，我可以通过门户网站跟踪问题吗？

我今天尝试了 OpenNMS 和 Shinken，但它们似乎不适合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:48:51.717

NetXMS 可能是您为此选择的系统，因为：

*   易于部署（“简单”）
*   它在默认配置中是轻量级的，如果您不需要功能齐全的数据库（“小”），可以使用 sqlite
*   服务器可以在 Unix 或 Windows 上运行（你没有指定你的平台）
*   除非用户要求这样做，否则它不会监控参数
*   您可以在桌面 GUI 和 Web GUI 中查看警报
*   如果您将来需要扩展您的应用程序监控功能，这里有很多功能，因此您无需切换到其他任何功能

您没有指定您的应用程序如何发送这些通知，因此我假设您对它们如何发送这些通知具有编程控制权。如果是这种情况，那么您可以直接从您的应用程序代码中使用 NetXMS API 来传递这些通知，或者只调用与 NetXMS 服务器一起打包的事件发送命令。

# c++ - 如何在广度优先搜索中快速找到最短路径？

> ID：14741103
> 
> 赞同：3
> 
> 时间：2013-02-06T23:48:49.153
> 
> 标签：c++, algorithm, graph, breadth-first-search

我正在使用广度优先搜索来查找图表中的位置，并且我很确定我的算法可以正常工作，但是当我完成后，我很难找到通往结果的最短路径。本质上，我可以使用 BFS 从我的开始位置到我的结束位置，但我不知道如何构建从结束到开始的最短路径。任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T00:24:29.010

一种选择如下。创建某种将每个节点与“父”节点相关联的方式（可能是哈希表，或者可能通过将“父”字段添加到代表节点的任何类型）。然后，每当您从队列中取出一个节点 u 并准备将一个节点 v 添加到队列中时，将 v 的父指针设置为节点 u。这标志着你到达节点 v 的方式是沿着通往 u 的路径，然后将路径延伸一条边到达 v。

完成此操作并完成 BFS 后，您可以通过从目标节点开始读取最短路径的反向，然后重复跟随父指针直到返回开始节点。一旦你有了这个，你可以反转这条路径来取回实际的最短路径。

希望这可以帮助！

# twitter-bootstrap - 在构建 Twitter Bootstrap 时让 jshint 忽略某些文件

> ID：14741110
> 
> 赞同：39
> 
> 时间：2013-02-06T23:49:14.313
> 
> 标签：twitter-bootstrap, build, makefile, jslint, jshint

在将 Twitter Bootstrap 与其他 3rd-party JS 库一起使用时，我经常遇到这个问题，例如`html5.js`来自 WordPress 的“Twenty Twelve”主题，其中构建失败是因为`jshint`（或者`jslint`我认为在以前的 TB 版本中）由于第三个原因而引发错误-party JS 库，例如

```
\n##################################################
Building Bootstrap...
##################################################\n
js/html5.js: line 3, col 122, Expected ')' to match '(' from line 3 and instead
  saw ','.
js/html5.js: line 3, col 140, Expected an identifier and instead saw ')'.
js/html5.js: line 4, col 101, eval is evil.
js/html5.js: line 6, col 369, Confusing use of '!'.
js/html5.js: line 6, col 422, Confusing use of '!'.
js/html5.js: line 7, col 61, 'b' is already defined.
js/theme-customizer.js: line 26, col 26, Use '===' to compare with ''.

7 errors
make: *** [build] Error 1 
```

我想避免修改第三方库或修改 TB 的 Makefile，因为这会导致以后升级出现问题；是我将第 3 方 JS 文件放入单独文件夹的唯一选择。

有没有办法让 jshint 或 TB 的构建过程忽略某些 JS 文件（也许通过一些`.jshintrc`我不知道的配置？）？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-07T00:09:29.733

所以有一个选项可以忽略 jshint 中的文件，但它不是设置在里面，而是设置在`.jshintrc`一个单独的文件`.jshintignore`中，这是有道理的。但是，虽然 jshint 会`.jshintrc`在项目的子目录中查找，但`.jshintignore`需要在项目根目录中。所以使用 Twitter Bootstrap，`.jshintrc`在`/js`while`.jshintignore`需要放置在`/`.

因此，要解决我的问题中的问题`/.jshintignore`需要包含：

```
js/html5.js
js/theme-customizer.js 
```

就是这样！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-09-24T08:43:15.497

作为对 Lèse majesté[回答](https://stackoverflow.com/a/14741346/1778898)的补充，您也可以在您的 JS 中写下这些注释，而 jshint 将忽略其间的代码：

```
// Code here will be linted with JSHint.
/* jshint ignore:start */
// Code here will be linted with ignored by JSHint.
/* jshint ignore:end */ 
```

或者，如果您只是希望 JSHint 不检查一行：

```
 // jshint ignore:line 
```

参考：[jshint 文档](http://www.jshint.com/docs/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-27T17:34:47.993

对我来说最简单的解决方案是我只需添加`// jshint ignore: start`到我想要忽略的任何文件的顶部

# c# - 将 IQueryable 数据集与 MVC 和实体框架连接起来

> ID：14741111
> 
> 赞同：0
> 
> 时间：2013-02-06T23:49:26.803
> 
> 标签：c#, asp.net-mvc, linq

我正在使用 Visual Studio 2010、C# 和 Entity Framework 5。我正在生成一个 JSON 结构，它是 LINQ 查询的结果。在控制器中，我有以下内容：

```
[HttpPost]
public ActionResult ICD10ConditionSearch(string ICD10SearchTerm)
{
    CommonCodeEntities dataContextCommonCodes = new CommonCodeEntities(ConnectionString);

    IQueryable<ICD10Codes> codes = dataContextCommonCodes.ICD10Codes.
        Where(m => m.ICD10CodeTitle.Contains(ICD10SearchTerm));
    return Json(codes);
} 
```

这可以正常工作并返回预期结果。

我*真正*想做的是使用 lst 搜索词并连接结果。当我使用以下内容时：

```
[HttpPost]
public ActionResult ICD10ConditionSearch(string ICD10SearchTerms)
{
    String[] terms = ICD10SearchTerms.Split(' ');
    IQueryable<ICD10Codes> codes = Enumerable.Empty<ICD10Codes>().AsQueryable();
    IQueryable<ICD10Codes> codeLocal;            

    CommonCodeEntities dataContextCommonCodes = new CommonCodeEntities(ConnectionString);

    foreach (var term in terms)
    {
        codeLocal = dataContextCommonCodes.ICD10Codes.Where(m => m.ICD10CodeTitle.Contains(term));
        codes = codes.Concat(codeLocal);
    }
    return Json(codes);
} 
```

这会产生以下错误`This method supports the LINQ to Entities infrastructure and is not intended to be used directly from your code`。我已经尝试过 Concat() 的其他变体，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:11:02.053

删除 foreach 并尝试以下操作：

```
[HttpPost]
public ActionResult ICD10ConditionSearch(string ICD10SearchTerms)
{
    String[] terms = ICD10SearchTerms.Split(' ');
    CommonCodeEntities dataContextCommonCodes = new CommonCodeEntities(ConnectionString);
    IQueryable<ICD10Codes> codes = dataContextCommonCodes.ICD10Codes
       .Where(e => terms.Any(k => e.ICD10CodeTitle.Contains(k)).AsQueryable();

    return Json(codes);
} 
```

为什么你不使用`List<ICD10Codes>`instate of `IQueryable<ICD10Codes>`？

# perl - WWW::Mechanize::Firefox -- 连接超时

> ID：14741114
> 
> 赞同：1
> 
> 时间：2013-02-06T23:49:35.193
> 
> 标签：perl, firefox, web-scraping

我在一台装有 firefox 18 版的 windows 32 机器上使用 perl 5.14.2 版（我认为是活动的）。

我正在尝试运行以下代码：

```
#!/usr/bin/perl

use strict;
use warnings;
 use WWW::Mechanize::Firefox;

 my $mech = WWW::Mechanize::Firefox->new(
      activate => 1, # bring the tab to the foreground
 );

  $mech->get('https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San%20Diego%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&      collection_id=2000219',':content_file'
  'main.html');

  1; 
```

我收到错误：C:/Perl/site/lib/MozRepl/Client.pm 第 186 行的命令超时

我将不胜感激任何帮助解决此错误。

但是，如果我运行以下命令，它会起作用：

```
 #!/usr/bin/perl

 use strict;
 use warnings;
 use WWW::Mechanize::Firefox; 
```

在工具下，我看到了 MozRepl。我点击了ActivateStart。

# c - Ubuntu，POSIX mq_receive 不应该阻塞

> ID：14741116
> 
> 赞同：3
> 
> 时间：2013-02-06T23:49:43.330
> 
> 标签：c, posix

我的 POSIX 队列被困在起点：

（我认为）应该阻塞的东西根本没有阻塞，并且循环一直在旋转。我试图阻止一个进程，`mq_receive`直到一些消息到达，但看起来调用总是从队列中收到一条空消息（但还没有任何客户端发送消息）。使用默认设置正确打开队列`mq_flags=0`。

我正在运行 Ubuntu 12.04。

这是代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#include <fcntl.h>
#include <sys/stat.h>
#include <mqueue.h>

int main(int argc, char **argv) {
    mqd_t qd;
    qd = mq_open("/tempqueue", O_RDONLY | O_CREAT, 0666, NULL);
    if (qd == (mqd_t) -1){
        printf("Problemz");
        return 1;
    }else{
        printf("Coda creata\n");
    }

    char buf[400];

    while(1){
        mq_receive(qd, buf, 400, NULL);
        printf("Ricevo: %s.\n", buf);
    }

    mq_close(qd);
    mq_unlink("/tempqueue");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T23:52:11.520

检查返回值！

几乎可以肯定是“-1”......您可以在哪一点调用“perror()”或检查“errno”以了解潜在错误：

# ssl - Jetty HttpClient 9 (9.0.0.M5) SSLContextFactory 的 TrustAll 标志不起作用？

> ID：14741120
> 
> 赞同：4
> 
> 时间：2013-02-06T23:49:57.920
> 
> 标签：ssl, jetty, jetty-httpclient

我正在使用 Jetty HttpClient 9 进行一些简单的网络爬取，但我似乎无法使其与 HTTPS 一起使用。以下发出同步 GET 请求的简单代码...

```
SslContextFactory sslContextFactory = new SslContextFactory(true);
HttpClient client = new HttpClient(sslContextFactory);
client.start();
ContentResponse response = client.newRequest("https://www.twitter.com")
                .method(HttpMethod.GET)
                .send(); 
```

创建 SslContextFactory 时在哪里使用 TrustAll 标志会导致以下异常，该异常似乎与 SSL 相关...

```
java.util.concurrent.ExecutionException: org.eclipse.jetty.io.EofException
at org.eclipse.jetty.client.util.FutureResponseListener.getResult(FutureResponseListener.java:118)
at org.eclipse.jetty.client.util.FutureResponseListener.get(FutureResponseListener.java:101)
at org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:433)
at com.blogfrog.system.service.http.Jetty9HttpClientTester.main(Jetty9HttpClientTester.java:17)

Caused by: org.eclipse.jetty.io.EofException
at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:597)
at org.eclipse.jetty.client.HttpReceiver.receive(HttpReceiver.java:74)
at org.eclipse.jetty.client.HttpConnection.receive(HttpConnection.java:308)
at org.eclipse.jetty.client.HttpExchange.receive(HttpExchange.java:104)
at org.eclipse.jetty.client.HttpConnection.onFillable(HttpConnection.java:296)
at org.eclipse.jetty.io.AbstractConnection$ReadCallback.run(AbstractConnection.java:240)
at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:278)
at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:78)
at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:198)
at org.eclipse.jetty.io.AbstractConnection$ReadCallback.run(AbstractConnection.java:240)
at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:278)
at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:78)
at org.eclipse.jetty.io.SelectChannelEndPoint.onSelected(SelectChannelEndPoint.java:109)
at org.eclipse.jetty.io.SelectorManager$ManagedSelector.processKey(SelectorManager.java:482)
at org.eclipse.jetty.io.SelectorManager$ManagedSelector.select(SelectorManager.java:439)
at org.eclipse.jetty.io.SelectorManager$ManagedSelector.run(SelectorManager.java:404)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:589)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:520)
at java.lang.Thread.run(Thread.java:722)
Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
at sun.security.ssl.Handshaker.checkThrown(Handshaker.java:1362)
at sun.security.ssl.SSLEngineImpl.checkTaskThrown(SSLEngineImpl.java:513)
at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:790)
at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)
at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:490)
... 18 more
Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1703)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:278)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1341)
at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:153)
at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
at sun.security.ssl.Handshaker$1.run(Handshaker.java:808)
at sun.security.ssl.Handshaker$1.run(Handshaker.java:806)
at java.security.AccessController.doPrivileged(Native Method)
at sun.security.ssl.Handshaker$DelegatedTask.run(Handshaker.java:1299)
at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:547)
... 18 more
Caused by: java.security.cert.CertificateException: No subject alternative names matching IP address 199.59.148.10 found
at sun.security.util.HostnameChecker.matchIP(HostnameChecker.java:154)
at sun.security.util.HostnameChecker.match(HostnameChecker.java:91)
at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:347)
at sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:889)
at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:828)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1328)
... 25 more 
```

我在这里做错了什么？这是让 Jetty HttpClient 信任所有 SSL 连接的正确方法吗？如果没有，正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:03:33.777

（从这里的邮件列表中获取修复）

这是一个错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=400184](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400184)

它已在 master 中修复，作为一种解决方法，这应该有效：

```
SslContextFactory.setEndpointIdentificationAlgorithm(null); 
```

# javascript - LeafletJS 在加载图像图标时是异步的吗？

> ID：14741129
> 
> 赞同：0
> 
> 时间：2013-02-06T23:50:51.360
> 
> 标签：javascript, leaflet

在 LeafletJS 中，当创建自定义图标以用于地图中的标记时，它是异步的吗？我问是因为我有一个加载大量自定义图标的应用程序，我想知道我的代码将如何流动。

我有一个`loadIcons()`基本上如下所示的javascript函数：

```
var icons = {};
for(var icon in listOfIconURLs){
 icons[icon] = L.Icon{
  IconUrl: icon
 });
}
runOtherSetUpCode(); 
```

如果到我的服务器的连接速度很慢并且加载图标需要很长时间，那么在`runOtherSetUpCode()`加载所有图标之前就可以运行，还是必须等到它们都在浏览器的缓存中？

最好的，
萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:04:20.693

Leaflet 非常轻量级，它会（同步）操作地图下方的 DOM 以包含一个`img`显示图标的元素。将加载图标的是浏览器。异步的，就像浏览器一样。

# ruby-on-rails - 简单的计算导致 Ruby 中的语法错误

> ID：14741131
> 
> 赞同：0
> 
> 时间：2013-02-06T23:50:53.520
> 
> 标签：ruby-on-rails, ruby, syntax-error

我有一个简单的 Ruby 财务应用程序，可以跟踪用户的支出并根据它们生成报告。

费用属于不同的类别，这会影响每项费用中有多少是税收。

在我生成费用报告的代码中，我有这样一段：

```
 tax_totals = [0] * 13
  totals = [0] * 13
  expenses.each do |expense|
    tax_ratio = tax_rate/(1+tax_rate)
    category = Category.find(expense.category_id).first
    tax_ratio *= category.tax_rate.to_f / 100
    if !expense.rate_id.nil?
      subcategory = Rate.where("id = ?", expense.rate_id).first
      tax_ratio *= subcategory.tax_rate.to_f
    end
    tax_totals[expense.transaction_date.to_date.month] +=
      (expense.amount * tax_ratio)
    totals[expense.transaction_date.to_date.month] += expense.amount
  end 
```

我不断收到一条语法错误`tax_ratio = tax_rate/(1+tax_rate)`：

```
syntax error, unexpected '(', expecting keyword_end 
```

如果我删除该行，错误将移至`tax_ratio *= category.tax_rate.to_f / 100`行：

```
syntax error, unexpected tINTEGER, expecting keyword_end 
```

我不知道这是从哪里来的。我根本看不出代码有什么问题。我在多个函数中有非常相似的代码，每个函数的计算略有不同。但只有这一个是一个问题。

也许是缺乏咖啡因。这段代码有问题吗？文件中是否还有其他原因导致此问题？如何继续调试？

干杯!

编辑：我想通了。红宝石菜鸟错误。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:01:03.107

如上所述，这是有效的 Ruby。我能够将您的代码放入一个方法并调用它。见下文：

```
require 'active_support/all'
require 'rspec'

class Category
  def self.find(category_id)
    [new]
  end

  def tax_rate
    0.5
  end
end

class Rate
  def self.where(*args)
    [new]
  end

  def tax_rate
    0.5
  end
end

def ratio(expenses, tax_rate)
  tax_totals = [0] * 13
  totals = [0] * 13
  expenses.each do |expense|
    tax_ratio = tax_rate/(1+tax_rate)
    category = Category.find(expense.category_id).first
    tax_ratio *= category.tax_rate.to_f / 100
    if !expense.rate_id.nil?
      subcategory = Rate.where("id = ?", expense.rate_id).first
      tax_ratio *= subcategory.tax_rate.to_f
    end
    tax_totals[expense.transaction_date.to_date.month] +=
      (expense.amount * tax_ratio)
    totals[expense.transaction_date.to_date.month] += expense.amount
  end
end

describe "#ratio" do

  let(:expense) do
    double("expense", category_id: 5, rate_id: 6, transaction_date: 5.days.ago, amount: 5)
  end
  let(:expenses) { [expense] }
  let(:tax_rate) { 0.25 }

  it "should run" do
    ratio(expenses, tax_rate)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:29:05.453

我是 Ruby 和 Rails 的新手，对我来说这是最奇怪的事情。

错误来自如此无辜的线路，我什至没有费心将它包含在我原来的问题中。

`tax_rate`是一个被传递给方法的变量。它以整数形式存储在数据库中，因此我需要将其转换为小数点。这是更完整的代码：

```
 tax_rate = tax_rate.to_f /100
  tax_totals = [0] * 13
  totals = [0] * 13
  expenses.each do |expense|
    tax_ratio = tax_rate/(1+tax_rate)
    category = Category.find(expense.category_id).first
    tax_ratio *= category.tax_rate.to_f / 100
    if !expense.rate_id.nil?
      subcategory = Rate.where("id = ?", expense.rate_id).first
      tax_ratio *= subcategory.tax_rate.to_f
    end
    tax_totals[expense.transaction_date.to_date.month] +=
      (expense.amount * tax_ratio)
    totals[expense.transaction_date.to_date.month] += expense.amount
  end 
```

第一行是 Ruby 不喜欢的，我仍然不知道为什么。但是你不能`myVar /100`说它必须是`myVar / 100`，甚至是数字和数字`myVar/ 100`之间绝对需要有一个空格`/`。

# java - 如何从 Java 应用程序连接到 REST Web 服务

> ID：14741133
> 
> 赞同：0
> 
> 时间：2013-02-06T23:51:06.387
> 
> 标签：java, web-services, rest

我必须测试 EPA 的数据交换 Web 服务。由于很难创建 100 个帐户、建筑物、能源使用分布等。我想自动化这个过程。我搜索了代码示例来做一个简单的 GET。我找到的最好的是[http://pic.dhe.ibm.com/infocenter/tivihelp/v10r1/index.jsp?topic=%2Fcom.ibm.taddm.doc_7.2%2FSDKDevGuide%2Ft_cmdbsdk_restapi_java.html](http://pic.dhe.ibm.com/infocenter/tivihelp/v10r1/index.jsp?topic=%2Fcom.ibm.taddm.doc_7.2%2FSDKDevGuide%2Ft_cmdbsdk_restapi_java.html)。我出于我的目的修改了这个。

1.  使用证书，它会在该行引发错误
2.  如果没有证书（已注释掉），连接将超时并在 getResponseCode() 处引发异常。

我不确定：

1.  提交证书的正确方法是什么
2.  如果我正确发送凭据
3.  如果我的代码不完整，因此应用程序无法获取响应代码
4.  我应该使用 Eclipse EE（带有 Web 工具平台）并创建项目 > Web 应用程序，而不是 Eclipse Juno（没有 WTP）

先感谢您。

```
 package Package1;

import java.io.*;
import java.util.*;
import java.lang.StringBuffer;
import java.net.*;
import java.net.HttpURLConnection;
import javax.net.ssl.HttpsURLConnection;

public class Class1 {

    public static void main (String args[]){

        try{            

        // set this property to the location of the cert file
         System.setProperty("javax.net.ssl.trustStore","C:/Documents and Settings/bhattdr/Desktop/-.energystar.gov.der");   

        String username = "yy777PPP";
        String password = "yy777PPP";
        String userpass = "";

        URL url = new URL("https://portfoliomanager.energystar.gov/wstest/account");
//      URLConnection uc = url.openConnection();
        HttpsURLConnection uc = (HttpsURLConnection) url.openConnection();

        userpass = username + ":" + password;
        String basicAuth = "Basic " + javax.xml.bind.DatatypeConverter.printBase64Binary(userpass.getBytes());

        System.out.println("sending request...");

        uc.setRequestMethod("GET");
        uc.setAllowUserInteraction(false);
        uc.setDoOutput(true);
        uc.setRequestProperty( "Content-type", "text/xml" );
        uc.setRequestProperty( "Accept", "text/xml" );

        uc.setRequestProperty ("Authorization", basicAuth);

        System.out.println(uc.getRequestProperties());

//        uc.setRequestProperty( "authorization", "Basic " + encode("administrator:collation"));

//        Map headerFields = uc.getHeaderFields();
//        System.out.println("header fields are: " + headerFields);

        int rspCode = uc.getResponseCode();

        if (rspCode == 200) {
            InputStream is = uc.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);

            String nextLine = br.readLine();
            while (nextLine != null) {
                System.out.println(nextLine);
                nextLine = br.readLine();
            }

        }
        }

        catch(IOException e) { 
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:03:04.027

你不需要自己动手。

*   如果你想写点东西，你可以使用 Jersey，它有现有的类来充当 Rest Clients（[Java 的 Rest clients？](https://stackoverflow.com/questions/221442/rest-clients-for-java)）
*   如果您不想写东西，可以使用很多应用程序来锻炼休息 api。谷歌出现了很多（如[http://code.google.com/p/rest-client/](http://code.google.com/p/rest-client/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-04T08:11:58.737

在 REST-Clients 的所有框架中……你尝试过 OpenFeign 吗？它是来自 NetFlix 堆栈的组件。易于使用并适合 NetFlix 的所有其他组件。

试一试：[https ://github.com/OpenFeign/feign](https://github.com/OpenFeign/feign)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-25T01:15:43.130

您正在使用 DER 文件作为[Java Crypto](http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#KeyStore)通常不支持的密钥库。使用 keytool 创建 JKS 或其他受支持的密钥库，然后引用它。

# php - 检索期间的mysql_real_escape_string

> ID：14741136
> 
> 赞同：2
> 
> 时间：2013-02-06T23:51:07.523
> 
> 标签：php, mysql

我曾经`mysql_real_escape_string()`在将数据插入数据库时​​对其进行清理，从数据库中检索数据时可以再次使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:54:21.223

任何时候都不好用。MySQL 扩展已被弃用。请改用 PDO 或 MySQLi。

在查询中使用数据时，出于清理目的使用参数绑定而不是字符串操作。

您无需在检索时清理数据。如果您在 HTML 页面中显示数据，请改用`htmlspecialchars()`or`htmlentities()`函数。

## 更新

解释一下，您不应该在其中存储带有转义字符的数据。最好的方法是在不修改的情况下存储接收到的数据（这是在存储之前用于过滤输入的任何验证之外的）。

PDO 和 MySQLi 都支持参数绑定，这是存储易失性数据的最安全方式，例如 (PDO)

```
$stmt = $pdo->prepare('INSERT INTO tableName VALUES (:param1, :param2)');
$stmt->bindParam('param1', $var1);
$stmt->bindParam('param2', $var2);
$stmt->execute(); 
```

检索后，您将收到输入的数据，因此您无需再次修改它。

要在 HTML 页面中安全地显示此数据，请使用上面列出的编码函数之一，例如

```
$stmt = $pdo->prepare('SELECT name FROM tableName');
$stmt->execute();

$row = $stmt->fetch(PDO::FETCH_ASSOC);
?>

<p>Hello, <?= htmlspecialchars($row['name']) ?></p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T00:06:02.503

**不**，`mysql_real_escape_string()`（它是更现代的版本`mysqli::real_escape_string()`）不应该用于从数据库*检索*到的数据。

*转义数据以插入*数据库的唯一原因是因为您将其组装为另一种语言的字符串数据：SQL。这就是逃跑的目的。如果有一个 API 调用，您将所有元素作为离散参数提供，则不需要转义数据。但这不是 SQL 的工作方式。

（同样，`stripslashes()`仅当您无法在 PHP 实例中关闭魔术引号时才需要。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T23:59:47.570

是的，总是。

```
 $username = stripslashes($_POST['username']);
    $username = mysql_real_escape_string($_POST['username']); 
    $password = mysql_real_escape_string(md5($_POST['password']));//with md5
    And retrieve----
    $req = mysql_query('select password,id from users where username="'.$username.'"');
    $dn = mysql_fetch_array($req);
    if($dn['password']==md5($password) and mysql_num_rows($req)>0)
{ // ... 
```

您要在检索时进行消毒的原因是大多数注射都发生在这里。一年前 Facebook 的一个用户黑客攻击的一个例子——他向浏览器提交了一个 mysql_query 检索以获取另一个用户的数据。并在管理员的程序中结束。

# jaxb - xs:int 对于十进制值解组为 null

> ID：14741140
> 
> 赞同：4
> 
> 时间：2013-02-06T23:51:18.867
> 
> 标签：jaxb, jax-ws

我遇到了与基于 JAX-WS 的 WebService 中的解组过程相关的问题。在 WSDL 文件中有一个元素定义为

```
 <element name="quantity" nillable="true" type="int" /> 
```

在相关的 JAVA 类中定义为：

```
 @XmlElement(name = "Quantity", required = true, type = Integer.class, nillable = true)
   protected Integer quantity; 
```

当此元素的 XML 值是十进制数 (3.4) 的表示形式时，该元素将解组为空整数。不会生成 SOAPFault，并且无法在 WebService 中区分十进制值和空值。这可能是 JAXB 实现中的缺陷还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:05:54.207

> 这可能是 JAXB 实现中的缺陷还是我做错了什么？

这不是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现中的缺陷。这是将 JAX-WS 配置为使用 JAXB 的结果。我将在下面用一个例子来演示。

**根**

下面是一个域对象，其字段与您的问题相匹配。我已经`type=Integer.class`从`@XmlElement`注释中删除了，因为它是多余的。

```
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElement(name = "Quantity", required = true, nillable = true)
    protected Integer quantity;

} 
```

**演示**

JAXB 提供了设置 a 的能力，`ValidationEventHandler`让`Unmarshaller`您可以控制如何处理解组错误。

```
import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent event) {
                System.out.println(event.getMessage());
                return true;
            }
        });

        StringReader xml = new StringReader("<root><Quantity>3.4</Quantity></root>");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

在专家组中，我们认为无效元素数据很常见，并且每次遇到这种情况时 JAXB 都不应该失败，但是您可以看到`ValidationEvent`引发了 a。

```
Not a number: 3.4
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <Quantity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</root> 
```

**更新演示**

如果我们更新`ValidationEventHandler`以表明我们不希望在引发`unmarshal`a 时继续，`ValidationEvent`我们可以进行以下更改。

```
 @Override
        public boolean handleEvent(ValidationEvent event) {
            System.out.println(event.getMessage());
            return false;
        } 
```

**更新的输出**

现在出现以下输出。

```
Not a number: 3.4
Exception in thread "main" javax.xml.bind.UnmarshalException: Not a number: 3.4
 - with linked exception:
[java.lang.NumberFormatException: Not a number: 3.4]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:647)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext.java:676)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext.java:672)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.handleParseConversionException(Loader.java:256)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:54)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:499)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.processText(SAXConnector.java:166)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:139)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:203)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:175)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:214)
    at forum14741140.Demo.main(Demo.java:22)
Caused by: java.lang.NumberFormatException: Not a number: 3.4
    at com.sun.xml.internal.bind.DatatypeConverterImpl._parseInt(DatatypeConverterImpl.java:101)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$17.parse(RuntimeBuiltinLeafInfoImpl.java:713)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$17.parse(RuntimeBuiltinLeafInfoImpl.java:711)
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.parse(TransducedAccessor.java:232)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:50)
    ... 19 more 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T15:18:37.747

我回答了这个问题：[https ://stackoverflow.com/a/30617814/3632201](https://stackoverflow.com/a/30617814/3632201)

上周我一直在努力解决这个问题，最后我找到了一个可行的解决方案。诀窍是 JAXB 在使用 @XmlRootElement 注释的对象中查找方法 beforeUnmarshal 和 afterUnmarshal。

```
..
@XmlRootElement(name="MSEPObtenerPolizaFechaDTO")
@XmlAccessorType(XmlAccessType.FIELD)

public class MSEPObtenerPolizaFechaDTO implements Serializable {
..

public void beforeUnmarshal(Unmarshaller unmarshaller, Object parent) throws JAXBException, IOException, SAXException {
        unmarshaller.setSchema(Utils.getSchemaFromContext(this.getClass()));
        unmarshaller.setEventHandler(new CustomEventHandler());
  }

  public void afterUnmarshal(Unmarshaller unmarshaller, Object parent) throws JAXBException {
        unmarshaller.setSchema(null);
        unmarshaller.setEventHandler(null);
  } 
```

使用这个 ValidationEventHandler：

```
public class CustomEventHandler implements ValidationEventHandler{

      @Override
      public boolean handleEvent(ValidationEvent event) {
            if (event.getSeverity() == event.ERROR ||
                        event.getSeverity() == event.FATAL_ERROR)
            {
                  ValidationEventLocator locator = event.getLocator();
                  throw new RuntimeException(event.getMessage(), event.getLinkedException());
            }
            return true;
      }
} 
```

}

这是在您的 Utility 类中创建的方法 getSchemaFromContext：

```
 @SuppressWarnings("unchecked")
  public static Schema getSchemaFromContext(Class clazz) throws JAXBException, IOException, SAXException{
        JAXBContext jc = JAXBContext.newInstance(clazz);
        final List<ByteArrayOutputStream> outs = new ArrayList<ByteArrayOutputStream>();
        jc.generateSchema(new SchemaOutputResolver(){
              @Override
              public Result createOutput(String namespaceUri,
                         String suggestedFileName) throws IOException {
              ByteArrayOutputStream out = new ByteArrayOutputStream();
              outs.add(out);
              StreamResult streamResult = new StreamResult(out);
              streamResult.setSystemId("");
              return streamResult;
              }
        });
        StreamSource[] sources = new StreamSource[outs.size()];
        for (int i = 0; i < outs.size(); i++) {
              ByteArrayOutputStream out = outs.get(i);
              sources[i] = new StreamSource(new ByteArrayInputStream(out.toByteArray()), "");
        }
        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        return sf.newSchema(sources);
  } 
```

# c++ - std::stringstream vs std::string 用于连接许多字符串

> ID：14741144
> 
> 赞同：49
> 
> 时间：2013-02-06T23:51:42.637
> 
> 标签：c++, string, stringstream

我知道它的优点之一`std::stringstream`是`std::istream`它可以接受来自定义`operator<<`to的任何类型的输入，也可以接受`std::istream`来自原始类型的输入。

我不会使用`operator<<`; 相反，我只是要连接许多字符串。的实现是否`std::stringstream`比`std::string`连接许多字符串更快？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-07T00:04:32.223

没有理由期望`std::string`' 附加函数比`stringstream`' 插入函数慢。`std::string`通常只不过是可能的内存分配/复制加上将数据复制到内存中。`stringstream`必须处理语言环境等问题，即使是基本`write`呼叫。

此外，`std::string`还提供了最小化或消除除第一次内存分配之外的任何内容的方法。如果你有`reserve`足够的空间，每个插入都只是一个`memcpy`. 这对于`stringstream`.

即使它比`std::string`' 附加函数更快，您仍然*必须*将字符串从 中复制出来`stringstream`才能对其进行处理。所以这是另一个分配 + 副本，你不需要`std::string`. 尽管至少 C++20 看起来可以消除这种特殊需求。

`std::stringstream`如果您需要*格式化*，您应该使用，而不仅仅是将一些字符串粘在一起。

# android - 如何从几个 EditTexts 中清除条目？

> ID：14741145
> 
> 赞同：0
> 
> 时间：2013-02-06T23:51:47.450
> 
> 标签：android

我是java和android的新手，所以如果我问一个简单的问题，请原谅我。我有一个应用程序需要用户在两个 EditTexts 中输入。这些输入相乘，结果显示在 TextView 中。我想使用“清除条目”按钮来清除用户条目的内容和显示的结果。有什么办法吗？

这是一个应用程序代码。

```
package c.example.rectangle;

import android.os.Bundle;

import android.view.View;
import android.app.Activity;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{

    EditText l;
     EditText w;
     TextView a;
     Button b;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  

        l = (EditText) findViewById(R.id.length);
        w = (EditText) findViewById(R.id.width);
        a = (TextView) findViewById(R.id.lblarea);
        b = (Button) findViewById(R.id.calculate);

        b.setOnClickListener(this);

    }

    public void onClick(View v) {
        calculateRectangle(l.getText().toString(), w.getText().toString());

    }
    private void calculateRectangle(String clength, String cwidth){

        double area = Double.parseDouble(clength)*Double.parseDouble(cwidth);

        a.setText(String.valueOf(area)); 
}} 
```

这是我的 XML 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#8B4513"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/label1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="20dp"
        android:background="#2F4F4F"
        android:gravity="center"
        android:text="@string/rect"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/label2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30dp"
            android:layout_marginTop="50dp"
            android:background="#2F4F4F"
            android:gravity="center"
            android:text="@string/cm"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/length"
            android:layout_width="110dp"
            android:layout_height="21dp"
            android:layout_marginLeft="40dp"
            android:layout_marginTop="50dp"
            android:background="#2F4F4F"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/help"
            android:inputType="text" />

    </LinearLayout>

 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

    <TextView
        android:id="@+id/label3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#2F4F4F"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="20dp"
        android:text="@string/breadth"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/width"
        android:layout_width="110dp"
        android:layout_height="21dp"
        android:layout_marginLeft="33dp"
        android:layout_marginTop="20dp"   
        android:background="#2F4F4F"
        android:inputType="text"
        android:hint="@string/help"

        android:ems="10" 
        android:gravity="center"
        >

        <requestFocus />
    </EditText>

</LinearLayout>

 <Button
     android:id="@+id/calculate"
     android:layout_width="fill_parent"
     android:layout_marginLeft="100dip"
     android:layout_marginRight="100dip"
     android:layout_height="wrap_content"
     android:text="@string/calculate"
     android:layout_marginTop="20dp" />

 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#8B4513"
        android:orientation="horizontal" >

 <TextView
     android:id="@+id/label4"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginLeft="30dp"
     android:layout_marginTop="20dp"
     android:background="#2F4F4F"
     android:text="@string/area"
     android:textAppearance="?android:attr/textAppearanceMedium" />

 <TextView
     android:id="@+id/lblarea"
     android:layout_width="110dp"
     android:layout_height="21dp"
     android:layout_marginLeft="60dp"
     android:layout_marginTop="20dp"
     android:background="#2F4F4F"
     android:gravity="center"/>
 </LinearLayout>

 <Button
     android:id="@+id/clear"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_marginLeft="100dip"
     android:layout_marginRight="100dip"
     android:layout_marginTop="20dp"
     android:text="@string/clear" />

</LinearLayout> 
```

我将非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:05:42.667

为什么似乎没有人使用真正有用的[android:onClick](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)？

```
<Button
    ...
    android:text="@string/calculate"
    android:onClick="calculate" />
<Button
    ...
    android:text="@string/clear"
    android:onClick="clearForm" /> 
```

通过以下活动：

```
class MyActivity extends Activity
{
    ...
    /**
     * Calculate
     * android:onClick="calculate"
     */
    public void calculate(View view)
    {
        // Handle click on your 'Calculate' button
    }

    /**
     * Clear form
     * android:onClick="clearForm"
     */
    public void clearForm(View view)
    {
        int[] ids = new int[]{R.id.length, R.id.width};
        for(int id : ids)
        {
            ((EditText) this.findViewById(id).)setText("");
        }
    }
} 
```

这样，您不必关心 id，您的代码将比干净更干净。

ID不应该被过度使用！它们非常适合用户可以“更改”以处理这些更改（并享受 onSaveInstanceState() 自然行为）的视图，仅此而已！

国际海事组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:01:42.057

如果您想遍历它们，可以将它们放在一个列表中，然后使用 for 循环将文本设置为“”

```
List<EditText> myList = new List<EditText>();
myList.add(editText1); 
```

然后用你明确的方法

```
for (int x = 0; x < myList.size(); x++

{   
myList.get(x).setText("");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:53:52.617

当您不再需要显示其中的数据时，为什么不将两个 editTexts 都设置为空呢？

```
EditText.setText(""); 
```

与 TextView 相同；

```
TextView.setText(""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:57:41.113

如果要创建清除按钮，请执行以下操作。

在您的 xml 中创建一个按钮：

```
<Button
     android:id="@+id/clear_button"
     ... you own layout prefs ...
/> 
```

为代码中的按钮创建一个侦听器：

```
OnClickListener clearButtonListener = new OnClickListener(){
  @Override
  public void onClick(View view) {          
    ((EditText)findViewById(R.id.id_for_text_box_a)).setText("");
    //...do this for all your edit texts that you want to clear         
  }
}; 
```

将监听器连接到按钮

```
Button clearButton = (Button) findViewById(R.id.clear_button);
clearButton.setOnClickListener(clearButtonListener); 
```

或者，不是在侦听器中通过 id 查找编辑文本，它们可以是在其中`onCreate`或任何地方初始化的实例变量。我还建议不要使用一个字母的变量名。

就个人而言，我会设置`OnClickListener`s 而不是`onClick`XML 中的属性。尽管使用 XML`onClick`属性可能会减少代码行数，但不幸的是，它创建了布局和功能的非常紧密的耦合。我更喜欢 XML 用于布局，Java 用于功能。此外，被迫使用`id`s 相当于要求 XML 元素具有变量名，这使得布局代码更具可读性（这个按钮是什么？这个复选框是做什么用的？）。我看到使用该`onClick`属性的另一个问题是它强制您调用的方法公开，这对于其中许多方法没有意义。*我更愿意通过阅读 Java 来了解 Activity 在功能上做了什么，并且我宁愿没有未引用的公共方法在我的 Activity 中浮动。*

# symfony - Symfony2，Doctrine，“findXxx”方法名称中的下划线

> ID：14741146
> 
> 赞同：0
> 
> 时间：2013-02-06T23:51:50.920
> 
> 标签：symfony, methods, doctrine

简单的例子，我们有

```
/**
 * @ORM\Column(name="api_keyID", type="integer", nullable=false)
 */
private $api_keyID;

  /**
 * @return integer 
 */
public function getApi_keyID()
{
    return $this->api_keyID;
}

/**
 * @param integer $api_keyID
 * @return object
 */
public function setApi_keyID($data)
{
    $this->api_keyID = $data;

    return $this;
} 
```

查看方法名称和列名称。当我尝试

```
//...
   ->findOneByApi_keyID($some); 
```

我收到一个错误，例如

```
Entity 'entity\path' has no field 'apiKeyID'. You can therefore not call 'findOneByApi_keyID' on the entities' repository 
```

所以学说\symfony 吃下划线？О.о 而且我不能在列名中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:01:15.603

是出路

```
$repository->findBy(array('is_enabled' => true)); 
```

在这里成立

[当字段有下划线时，Magic Doctrine2 finders？](https://stackoverflow.com/questions/9659221/magic-doctrine2-finders-when-field-has-underscore)

# c++ - 不调用非模板成员函数的显式特化

> ID：14741149
> 
> 赞同：0
> 
> 时间：2013-02-06T23:52:22.333
> 
> 标签：c++, template-specialization

...除非调用库中的其他内容。这是一个最小的例子。

测试1.cpp

```
#include <iostream>

void proofOfTwoLinked();

template <class T>
struct Foo
{
    void bar(){ std::cout << "normal bar\n"; }
};

struct A{};
struct B{};
struct C{};
struct D{};

template <> void Foo<B>::bar(){ std::cout << "B bar\n"; }

int main()
{
    Foo<A> a;
    Foo<B> b;
    Foo<C> c;
    Foo<D> d;

    a.bar();
    b.bar();
    c.bar();
    d.bar();

    //proofOfTwoLinked();
} 
```

测试2.cpp

```
#include <iostream>

struct C;

template <class T>
struct Foo
{
    void bar(){ std::cout << "normal bar\n"; }
};

template <> void Foo<C>::bar(){ std::cout << "C bar\n"; }

void proofOfTwoLinked()
{
    std::cout << "Yup, two is linked\n";
} 
```

如果我将两者一起编译，程序将按预期工作：

```
$ rm test; rm *.a; rm *.o; g++ -c test1.cpp; g++ -c test2.cpp; g++ -o test test1.o test2.o; ./test
normal bar
B bar
C bar
normal bar 
```

如果我编译 test2，将其放入存档中，然后将程序链接到该文件...当调用 c.bar() 时，不会执行类型 C 的特化：

```
$ rm test; rm *.a; rm *.o; g++ -c test1.cpp; g++ -c test2.cpp; ar -r test2.a test2.o; g++ -o test test1.o test2.a; ./test
ar: creating test2.a
normal bar
B bar
normal bar
normal bar 
```

但是如果我取消注释 test1 (proofOfTwoLinked) 的最后一个函数调用，然后再次编译，*则*执行特化。

```
$ rm test; rm *.a; rm *.o; g++ -c test1.cpp; g++ -c test2.cpp; ar -r test2.a test2.o; g++ -o test test1.o test2.a; ./test
ar: creating test2.a
normal bar
B bar
C bar
normal bar
Yup, two is linked 
```

这让我觉得很奇怪，而且肯定出乎我的意料。这实际上是正常行为吗？也许因为在链接器搜索 test2.a 之前，在 main() 中调用的每个函数的某种形式已经存在，它会跳过存档。有没有办法强制链接器“查看整个档案”？

我正在使用 gcc 4.6.1 和 ar 2.21.53（在 ubuntu 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:51:00.927

使用 MSVC2010SP1 我得到的结果略有不同：

按原样编译我没有得到“C bar”。这与预期一致，因为 test1.cpp 和 test2.cpp 是单独的编译单元，并且没有前向声明另一个包含的特化 test1.cpp 将实例化其默认的“正常栏”，而 test2.cpp 不会实例化“C bar”，因为它看不到任何使用它的东西。

当我取消注释 proofOfTwoLinked(); 我得到“是的，两个已链接”，这是预期的，因为“proofOfTwoLinked()”是前向声明的。我仍然没有得到预期的“C bar”，因为它没有在 test1.cpp 中声明

当我再次编译添加

```
template <> void Foo<C>::bar(); 
```

到 test1.cpp 我得到一个链接器错误，因为虽然 test1.cpp 编译单元现在知道有一个

```
template <> void Foo<C>::bar() 
```

在某个地方，test2.cpp 仍然不知道有人在使用它。

当我再次编译添加

```
template void Foo<C>::bar(); 
```

test2.cpp 一切正常，我得到“C bar”。注意

```
template void Foo<C>::bar(); 
```

必须在其定义之前。

据我所知，MSVC 行为正确，而 gcc 在你的情况下表现得很奇怪。我使用[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)第 14.7 节作为参考，它可能会有所帮助。

# java - 加载类 org.slf4j.impl.StaticLoggerBinder 失败，即使我似乎与我的 Maven 项目有绑定

> ID：14741150
> 
> 赞同：2
> 
> 时间：2013-02-06T23:52:24.497
> 
> 标签：java, maven, log4j, logback

所以我在Stack Overflow上搜索并发现这个问题，解决方案通常与IDE相关（你需要一个外部版本的Maven！），错误版本的记录器（尝试了最新的），最后是缺乏选择粘合剂。

所以我有一个 Maven 项目，它具有以下依赖项来满足我的日志记录需求：

```
 <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.2</version>
            <exclusions>
                <exclusion>  
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-log4j12</artifactId>
                </exclusion> 
            </exclusions>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>1.7.2</version>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
                <scope>runtime</scope>
            <version>1.0.9</version>
        </dependency> 
```

即使我在那里有一个绑定记录器（实际上是两个，slf4j 和 Logback），每当我在我的计算机上编译或将它推送到我的 Jenkins 盒子上编译时，我都会得到：

> 无法加载类 org.slf4j.impl.StaticLoggerBinder

对于我的每一个模块。任何可能的尝试解决方案将不胜感激。

# java - 在Java中获取无符号字节

> ID：14741152
> 
> 赞同：3
> 
> 时间：2013-02-06T23:52:29.613
> 
> 标签：java, byte

有没有办法在 Java 中读取字节并获得与 C# 中相同的“格式”结果？

实际上，在 Java 中，字节是有符号的 (-128, +127)，而在 C# 中则不是 (0, 255)。

我正在将带有 java 应用程序的文件发送到只需要正字节的服务器，所以只要我有一些负字节，它就不会工作。

具体问题：当我将 bytes[] 序列化为 json（使用 gson）时，我的值从 -128 到 + 127，而我希望值从 0 到 255。

希望它足够清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T23:55:50.987

如果您想在 Java 应用程序中获取 [0-255] 值，请使用`(b & 0xff)`类似于`int`从`byte`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-23T15:06:56.377

Java字节从-128签名到127，如果你想得到0到25​​5的表示，我使用这2个函数

```
public static byte fromIntToByte(String value) throws Exception {
        return fromIntToByte(Integer.parseInt(value));
    }

    public static byte fromIntToByte(int value) throws Exception {
        String stringByte = "";
        if (value < 0 && value > 255) {
            throw new Exception("Must be from 0<=value<=255");
        }
        if (value <= 127) {
            for (int i = 0; i < 8; i++) {
                stringByte = String.valueOf(value % 2) + stringByte;
                value = value / 2;
            }
        } else {
            value = value / 2;
            for (int i = 0; i < 7; i++) {
                stringByte = String.valueOf(value % 2) + stringByte;
                value = value / 2;
            }
            stringByte = "-" + stringByte;
        }
        System.out.println(stringByte);
        byte b = Byte.parseByte(stringByte, 2);
        return b;
    } 
```

# random - 添加随机数会使它们更随机吗？

> ID：14741158
> 
> 赞同：3
> 
> 时间：2013-02-06T23:52:43.180
> 
> 标签：random

这是一个纯粹的理论问题。

我们都知道，大多数（如果不是全部）随机数生成器实际上只生成*伪随机*数。

假设我想要一个从 10 到 20 的随机数。我可以按如下方式执行此操作（`myRandomNumber`作为整数类型变量）：

```
myRandomNumber = rand(10, 20); 
```

但是，如果我执行此语句：

```
myRandomNumber = rand(5, 10) + rand(5, 10); 
```

这种方法*更*随机吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:13:57.073

不。

随机性不是累积的。该`rand()`函数在您定义的两个端点之间使用均匀分布。

添加两个均匀分布会使均匀分布无效。它会形成一个看起来很奇怪的金字塔，最有可能倾向于中心。这是因为随着自由度的增加概率密度函数的累积。

我敦促您阅读以下内容：

[均匀分布](http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29)

还有这个：

[卷积](http://en.wikipedia.org/wiki/Convolution)

特别注意屏幕右上角的两个均匀分布会发生什么。

您可以通过将所有总和写入文件然后在 Excel 中绘图来向自己证明这一点。确保给自己足够大的样本量。25000应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T03:01:27.750

理解这一点的最好方法是考虑流行的游乐场游戏“幸运七”。如果我们掷一个六面骰子，我们知道获得六个数字中的任何一个的概率是相同的 - 1/6。如果我们掷两个骰子并将两个骰子上出现的数字相加会怎样？总和的范围可以从 2（两个骰子都显示“一”）到 12（两个骰子都显示“六”）。从 2 到 12 获得不同数字的概率不再一致。获得“七”的概率最高。可以有 1+6、6+1、2+5、5+2、3+4 和 4+3。从 36 种可能性中获得“七”的六种方法。如果我们绘制分布图，我们会得到一个金字塔。概率是 1,2,3,4,5,6,5,4,3,2,1（当然，每个都必须除以 36）。和的金字塔图（和概率分布）可以通过'卷积得到。如果我们知道两个随机数的“预期值”和标准偏差（“sigma”），我们可以快速计算两个随机数之和的预期值。期望值只是两个单独的期望值的加法。通过对两个单独的 sigma（每个 sigma 的平方和的平方根）应用“毕达哥拉斯定理”来获得 sigma。期望值只是两个单独的期望值的加法。通过对两个单独的 sigma（每个 sigma 的平方和的平方根）应用“毕达哥拉斯定理”来获得 sigma。期望值只是两个单独的期望值的加法。通过对两个单独的 sigma（每个 sigma 的平方和的平方根）应用“毕达哥拉斯定理”来获得 sigma。

# css - iPad媒体查询

> ID：14741160
> 
> 赞同：1
> 
> 时间：2013-02-06T23:52:45.793
> 
> 标签：css, ipad, tablet

我尝试了一些建议 (device-width:768px) (min-device-width: 768px) 和 (max-device-width: 1024px)

但我似乎无法让 CSS 以 iPad 为目标。不过，我只在 iPad 1st gen 上进行测试。第一代是否有单独的媒体查询？

另外，我不确定提及我使用过是否重要：

```
<meta name="viewport" content="width=device-width"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:54:54.613

我更喜欢使用纵横比与宽度：

**iPhone < 5:**

```
@media screen and (device-aspect-ratio: 2/3) {} 
```

**iphone 5：**

```
@media screen and (device-aspect-ratio: 40/71) {} 
```

**平板电脑：**

```
@media screen and (device-aspect-ratio: 3/4) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:57:08.677

可能已经过火了，但在它成为一个问题之前，我不会调整它。我用了：

```
@media(min-device-width: 650px) and (max-device-width: 1024px) { 
```

它奏效了。

# c++ - STL 容器向前和向后行走

> ID：14741164
> 
> 赞同：0
> 
> 时间：2013-02-06T23:53:10.390
> 
> 标签：c++, list, stl, iteration, reverse

一个基本的问题，我正在寻找适合以下用途的 STL 容器：

1) 支持常规前向迭代

2）支持从列表中间删除，同时向后遍历列表，并且

3）如果向后走时删除了某些内容，我需要停下来向前走到列表的末尾。

我使用了常规`std::list`，发现从列表中的某个点向前走有点困难，但可行。我使用了 forward 和 reverse_iterator 的组合，并设法避免使用`advance`（因为那会很昂贵！）

这是我的代码。

```
#include <list>
using namespace std ;

int main()
{
  list< int > os ;
  os.push_back( 1 ) ;
  os.push_back( 2 ) ;
  os.push_back( 3 ) ;
  os.push_back( 4 ) ;
  os.push_back( 5 ) ;  

  // 1 2 3 4 5
  // should print:
  // 5: NOTHING
  // 4: 5
  // 3: 4,5
  // 2: 3,4,5
  // 1: 2,3,4,5
  for( list<int>::reverse_iterator riter = os.rbegin() ; riter != os.rend() ; ++riter )
  {
    //printf( "All the ones in FRONT of %d are:\n", riter->a ) ;
    printf( "%d:  ", *riter ) ;

    // You can't do it with a for loop.
    //for( list<O>::reverse_iterator iter = riter ; iter != os.rbegin() ; --iter )

    list<int>::reverse_iterator iter = riter ;

    if( iter != os.rbegin() ) do
    {
      --iter ; // move the iterator back.
      printf( " %d", *iter ) ;
    } while ( iter != os.rbegin() ) ;
    //else printf( " NOTHING AFTER ME" ) ;

    puts("");
  }
} 
```

我的问题是：

*   我是否选择了错误的容器？我应该`deque`改用吗？
*   有没有办法使用`for`而不是`do/while`在内部循环中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:01:12.267

考虑到您的要求，我相信您的选择`list`是好的（但它是`std::list`，不是`stl::list`）。

从 a 的中间移除`vector`将使所有指向被移除元素之前的元素的指针、引用和迭代器无效；从 a 中间移除 a`deque`将使所有指针、引用和迭代器无效。

`list`另一方面，从 a 中删除保证只会使您删除的元素的迭代器无效，因此如果在删除元素时采取适当的措施，您可以继续向前和向后迭代。

考虑到您的循环，我不禁指出：

```
if (C) do { ... } while (C) 
```

相当于更优雅（IMO）：

```
while (C) do { ... } 
```

# actionscript-3 - 在适用于 iOS 和 Android 的 AIR 应用程序中播放 MP3

> ID：14741169
> 
> 赞同：0
> 
> 时间：2013-02-06T23:53:38.323
> 
> 标签：actionscript-3, air

我想知道是否有人可以阐明在为 iOS 和 Android 构建的 AIR 应用程序中嵌入、选择和播放音频文件的最佳方法？

我有一个应用程序，用户可以在其中从 10 个音频文件的列表中选择要播放的文件。当滑块向左或向右移动时选择这些。

我目前将创建 10 个单独的嵌入片段和类

```
[Embed(source="assets/audio/file1.mp3)]
public static const file1:Class;

[Embed(source="assets/audio/file2.mp3)]
public static const file2:Class;
... 
```

然后在应用程序中初始化每个类，以便我可以引用它们。然后只需调用

```
file1.play(); 
```

问题是这只在我希望声音看到的地方播放一次声音，直到用户选择另一个声音。

我猜有几个问题： 1\. 拥有 10 个嵌入/类是处理 10 个不同 MP3 文件的最佳方式吗？2\. 如何无缝循环播放 MP3

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:11:04.673

您存储了用户选择的 Array 或 Vector mp3 文件 URL。播放 mp3 文件结束。从 Array, Vector 加载下一个 URL。

```
var sound:Sound = new Sound();
var soundChannel:SoundChannel;
var currentIndex:int = 0;

var mp3List:Vector.<String> = new Vector.<String>();
//only stored user selected mp3 url

sound.addEventListener(Event.COMPLETE, onMp3LoadComplete);

sound.load(mp3List[currentIndex]);

function onMp3LoadComplete(e:Event):void
{
    sound.removeEventListener(Event.COMPLETE, onMp3LoadComplete);
    soundChannel = sound.play();
    soundChannel.addEventListener(Event.SOUND_COMPLETE, onSoundChannelSoundComplete);
}

function onSoundChannelSoundComplete(e:Event):void
{
    e.currentTarget.removeEventListener(Event.SOUND_COMPLETE, onSoundChannelSoundComplete);
    currentIndex++;
    if(currentIndex==mp3List.length) currentIndex = 0;
    sound.load(mp3List[currentIndex]);
    soundChannel = sound.play();
    sound.addEventListener(Event.COMPLETE, onMp3LoadComplete);
} 
```

# c# - 列出结构内的属性

> ID：14741173
> 
> 赞同：-1
> 
> 时间：2013-02-06T23:53:59.260
> 
> 标签：c#

如何为结构内的列表编写属性？

我的代码：

```
public struct Config
{
    List<int> ipAddress = new List<int>();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T00:05:59.933

如果您只想创建一个自动属性（默认`null`为引用类型并且*无法*初始化），您可以按照@scartag 的建议进行操作。

```
public struct Config
{
    // will default to null
    List<int> ipAddress {get; set;}
} 
```

但是，如果您尝试执行代码中的操作并将其初始化为实际引用，则会遇到问题，因为您无法初始化`struct`. 他们只能有他们的默认值。更糟糕的是，您不能覆盖默认构造函数来为您执行此操作。

一般来说，`struct`对于小型的，最好是不可变的类型，往往是最好的。您是否有理由不想仅用`class`于此目的？

现在，如果您*确实*想创建一个`struct`带有“已初始化”字段的字段，您可以用一些惰性逻辑来欺骗它：

```
public struct Config
{
    private List<int> _ipAddress;
    private bool _isAssigned;

    public List<int> 
    {
        get 
        {
            if (!_isAssigned)
                _ipAddress = new List<int>;
            return _ipAddress; 
        }
        set
        {
            _ipAddress = value;
            _isAssigned = true;
        }
    }
} 
```

但实际上，在这种情况下，最好使用 a ，`class`因为您*可以*初始化字段，或覆盖默认构造函数：

```
public class Config
{
    public List<int> ipAddress {get; set;}

    public Config()
    {
        ipAddress = new List<int>();
    }
} 
```

再一次，正如 Andrew 在评论中提到的，我强烈建议查看[MSDN 指南，了解在`struct`和`class`](http://msdn.microsoft.com/en-us/library/ms229017.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:55:43.850

见下文。

```
public struct Config
{
    List<int> ipAddress { get; set; }
} 
```

或者，如果您不想使用自动获取/设置

```
public List<int> ipAddress 
{
    get
    {               
        return ipAddress?? new List<int>();
    }       
    set 
    {
        ipAddress = value;
    }
} 
```

# android - Android - 启动意图以打开已打开的活动时屏幕闪烁

> ID：14741176
> 
> 赞同：6
> 
> 时间：2013-02-06T23:54:44.807
> 
> 标签：android, android-intent

我有一个活动。启动方式是singleTask，我实现onNewIntent。当我在活动打开时发送启动此活动的意图时（带有标志 NEW_TASK 和 RESET_TASK_IF_NEEDED），屏幕会在向我显示相同的活动之前闪烁。

为什么会发生这种情况？我认为 singleTask 应该足以确保将新意图传递给 onNewIntent，而不是系统为我的活动启动新任务或任何东西。当我执行以下任一操作时，闪烁消失：

*   将启动模式更改为 singleTop；
*   将标志 Intent.FLAG_ACTIVITY_CLEAR_TOP 添加到启动意图。

我很想知道发生了什么以及我可以做些什么来克服闪烁（如果可能的话，我真的不希望更改启动模式或启动意图标志）。基本上，有什么好的理由为什么这不起作用？

请注意，即使屏幕闪烁，我也确实获得了 onNewIntent。

# jquery - 使用 Jquery 查找所有标签

> ID：14741184
> 
> 赞同：0
> 
> 时间：2013-02-06T23:55:08.043
> 
> 标签：jquery, label

我有一个简单的函数，可以增加输入中的数字：

```
$(elem).find("input").attr("name", function(i, name) {
  return name.replace(/\[(\d+)\]/, function(match, number) {
    return "[" + (+number + 1) + "]";
  })
}) 
```

我想`elem`通过像这样更改第一行来将相同的功能扩展到其中的所有标签：

```
$(elem).find("input, label").attr("name", function(i, name) { 
```

虽然第一个函数按预期工作，但添加`label`到 find 查询会导致以下行出现错误：

```
TypeError: name is undefined
return name.replace(/\[(\d+)\]/, function(match, number) { 
```

为什么会这样？我不能简单地标记我输入、div 和其他 HTML 标记`find`的相同原因吗？`find`

# android - 带有 Android 的 HttpClient

> ID：14741190
> 
> 赞同：1
> 
> 时间：2013-02-06T23:55:50.883
> 
> 标签：android

我有一个有趣的问题，我已经尝试了 3 个小时。我正在 Android 中创建一个登录页面。我将使用 HttpClient 的用户名和密码值发送到我的 PHP 页面，我会得到真实的结果，直到看到下面的一些代码。

```
button_login_submit.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("username", et_username.getText().toString()));
                postParameters.add(new BasicNameValuePair("password", et_password.getText().toString()));

                String response = null;
                try 
                {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2/corner1/login.php", postParameters);
                    String res=response.toString();
                    //here, the value of "res" variable is the exactly what I want. 
                    if(!res.equals("0")) // but in here, the value of "res.equals("0")" is always false. So  the value of inside if is always true!! but why????
                    {
                        if(!res.equals("01"))
                        {
                            tv_login_error.setText("Success");
                            Intent main_page = new Intent(getApplicationContext(), Main_Activity.class);
                            main_page.putExtra("id",res);
                            //startActivity(main_page);
                            //finish();
                        }
                        else
                        {
                            tv_login_error.setText("False Username or Password");
                        }
                    }
                    else
                    {
                        tv_login_error.setText("Please try again using your full usurname or password ");
                    }
                } 
                catch (Exception e) 
                {
                    tv_login_error.setText(e.toString());
                }
            }
        }); 
```

如果“res”的变量为“0”，表示有一些空值。如果是 "01" 则没有用户，否则 PHP 页面会向我发送用户 ID。为什么 "res.equals("0") 总是假的？？？

问题解决了！！！！问题是来自代码的 res 的值`String res=response.toString();`带有“\n”。所以当你想比较值时，你必须在单词末尾添加“\n”。例如`res.equals("0\n")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:02:43.347

您必须在使用之前修剪该值。更改`String res=response.toString();`为`String res=response==null?null:response.trim();`。它将解决您的问题。

# jquery - 将自定义标题添加到 JqGrid 创建/编辑/删除方法

> ID：14741193
> 
> 赞同：0
> 
> 时间：2013-02-06T23:55:54.523
> 
> 标签：jquery, jqgrid

我正在尝试将 JqGrid 与 WebAPI 一起使用。要访问 webAPI，我们需要设置自定义标头。例如：

```
headers: {
    'Username': 'Administrator'
}, 
```

我可以通过 AJAX 来加载网格。但是，我想利用 JqGrid 支持的创建/编辑/删除。问题是 JqGrid 似乎不允许我在调用中添加标题：

```
$("#btnCreate").click(function () {
   jQuery("#myGrid").jqGrid('editGridRow', "new", { reloadAfterSubmit: true, url: 'htp://localhost/colorfolder/insert' });
}); 
```

您如何将标题添加到创建中？

我无法将标题添加到网格的负载中，我什至尝试扩展 onclickSubmit 但无济于事。

这是代码：

```
<head>
    <title>htp://stackoverflow.com/questions/6831306/load-local-json-data-in-jqgrid-without-addjsonrows</title>
    <meta htp-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="htp://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="htp://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.1.2/css/ui.jqgrid.css" />

    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="js/jquery.jqGrid.js" type="text/javascript"></script>

    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>

    <script type="text/javascript">
        function CallWebAPI() {
            jQuery.support.cors = true;
            var webAPIurl = "htp://localhost/colorfolder/list";

            $.ajax({
                url: webAPIurl,
                headers: {
                    'Username': 'Administrator'
                },
                contentType: "application/json; charset=utf-8",
                type: 'GET',
                dataType: 'json',
                data: "{}",
                success: function (data) {
                    GetDataFields(data);
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        }
    </script>
    <script type="text/javascript">
        var lastsel2

        function GetDataFields(data) {
            'use strict';
            var data = {
                "page": "1",
                "records": "3",
                "rows": data
            },
            grid = $("#myGrid");

            grid.jqGrid({
                colModel: [
                    { name: 'FolderID', index: 'FolderID', width: "200" },
                    { name: 'FolderDescription', index: 'FolderDescription', width: "105"}
                ],

                onSelectRow: function (id) {
                    if (id && id !== lastsel2) {
                        jQuery('#myGrid').jqGrid('restoreRow', lastsel2);
                        jQuery('#myGrid').jqGrid('editRow', id, true);
                        lastsel2 = id;
                    }
                },

                pager: '#myGridPageControls',
                datatype: "jsonstring",
                datastr: data,
                jsonReader: { repeatitems: false },
                rowNum: 25,
                viewrecords: true,
                multiselect: false,
                caption: "Folder",
                height: "auto",
                ignoreCase: true
            });

            $("#btnCreate").click(function () {
                jQuery("#myGrid").jqGrid('editGridRow', "new", { reloadAfterSubmit: true, url: 'htp://localhost/colorfolder/insert' });
            });
        }

        var grid = $("#myGrid");      // your jqGrid (the <table> element)
        var orgEditGridRow = grid.jqGrid.editGridRow; // save original function

        var folder = { "Params": "<Filters><FolderTypeID>1</FolderTypeID><FolderDescription>Test</FolderDescription></Filters>" };

        jQuery.support.cors = true;

        $.jgrid.extend({ 
            editGridRow: function (rowid, p) {
                $.extend(p, { // modify some parameters of editGridRow
                    onclickSubmit: function (formid) {
                        $.ajaxSetup({
                            headers: {
                                'Username': 'Administrator'
                            },
                            type: 'POST',
                            data: JSON.stringify(folder),
                            contentType: "application/json;charset=utf-8",
                            success: function (data) {
                                alert("inserting");
                            },
                            error: function (x, y, z) {
                                alert(x + '\n' + y + '\n' + z);
                                var alerting = "alert";
                            }
                        });
                    }
                });
                orgEditGridRow.call(this, rowid, p);
            }
        });

        CallWebAPI();
    </script>
</head>

<body>
    <table id="myGrid"><tr><td/></tr></table>
    <div id="myGridPageControls"></div>
    <input type="button" id="btnCreate" value="Create" />
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:29:45.070

它应该像编辑一样简单（会单独调用删除等）

```
editData: { ValueName: ValueData }, 
```

# php - 动态 jquery 中未捕获的语法错误

> ID：14741194
> 
> 赞同：0
> 
> 时间：2013-02-06T23:55:54.517
> 
> 标签：php, jquery, mysql, pdo

我一直在研究一段动态 JavaScript 代码：

```
$(document).ready(function() {
<?php 
    $sql = "SELECT * from pm_schedule";
    $result = $pdo->query($sql);
    foreach ($result as $row) 
        {
        echo 
            "$('#updatebtn".$row['id']."').click(function() {
             $('#result".$row['id']."').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform".$row['id']."').serialize(), 
            });";
        }
?>
}); 
```

当我在我的服务器上运行它时，它会扩展为以下内容：

```
$(document).ready(function () {

    $('#updatebtn1').click(function () {
        $('#result1').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform1').serialize(),
        });

    $('#updatebtn2').click(function () {
        $('#result2').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform2').serialize(),
        });

    $('#updatebtn3').click(function () {
        $('#result3').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform3').serialize(),
        });

    $('#updatebtn4').click(function () {
        $('#result4').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform4').serialize(),
        });

    $('#updatebtn5').click(function () {
        $('#result5').show('slow').delay(4000).hide('slow')
        $.post('process.php', $('#updateform5').serialize(),
        });
    }); 
```

谷歌浏览器不断为上面的代码返回一个未捕获的语法错误——知道为什么吗？请注意，我必须对第一个代码块而不是第二个代码块进行编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:58:23.210

`,`将此处末尾的逗号`$('#updateform".$row['id']."').serialize(),`<-- 替换为`)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:01:10.570

后面缺少分号，后面有`hide('slow')`逗号`serialize()`

# ruby-on-rails - 用户输入中的自定义降价

> ID：14741197
> 
> 赞同：9
> 
> 时间：2013-02-06T23:56:33.830
> 
> 标签：ruby-on-rails, ruby, markdown, redcarpet

我想为用户评论添加一个简单的降价。

当用户提交此评论时：

**我刚得到[卡：黑莲花]人。战俘！**

我希望它像这样显示：

**我刚得到黑莲花人。战俘！**

但有额外的 html 标记：

`I just got <span class="preview" data-card="/cards/card.id">Black Lotus</span> man. POW!`

1) 我查看了[Redcarpet](https://github.com/vmg/redcarpet)，但不知道如何为其添加`[card:...]`降价。

2）或者我应该在将内容保存到数据库之前运行正则表达式并替换内容，然后`sanitize(ActionView::Helpers::SanitizeHelper)` `span`在显示评论之前进行标记？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T23:18:04.897

回答我自己的问题：

定义自定义渲染器并覆盖 normal_text 方法就可以了。

```
class HTMLwithCards < Redcarpet::Render::HTML
  def preprocess(full_document)
    full_document.gsub(/\[card:(.*)\]/) do
      card = Card.find_by_name($1)
      if card
        "<span class='preview' data-card='/cards/#{card.id}'>#{$1}</span>"
      else
        $1
      end 
    end
  end
end 
```

然后你可以这样称呼它：

```
def markdown(text)
  renderer = HTMLwithCards.new(hard_wrap: true, filter_html: true)
  Redcarpet::Markdown.new(renderer).render(text).html_safe
end 
```

# android - android中的下拉微调器不是对话框微调器

> ID：14741199
> 
> 赞同：0
> 
> 时间：2013-02-06T23:56:42.647
> 
> 标签：android, android-spinner

我想在我的应用程序中有一个下拉微调器，但是当我点击微调器时，微调器打开一个对话框并显示其中的项目，实际上我想要一个像这样的微调器：

![在此处输入图像描述](../Images/19a0f7c73e05215d8ebed395e6f8bb7b.png)

但是，我的微调器是这样的

![在此处输入图像描述](../Images/5fb7736e43620888ea74c49411264f8f.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:36:14.687

您可以尝试以下代码： - 其中 mMyArray 是要显示的字符串数组。活动是上下文。

`Spinner mMySpinner = (Spinner)findViewById(R.id.myValues);`

`ArrayAdapter<String> mMyadapter = new ArrayAdapter<String>(mActivity,` `android.R.layout.simple_spinner_item, mMyArray);` `mMyadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);`

`mMySpinner.setAdapter(mMyadapter)`

让我知道它是否有效

# git - Git 已修改 - 未正确添加对象

> ID：14741200
> 
> 赞同：0
> 
> 时间：2013-02-06T23:56:42.800
> 
> 标签：git

我一直遇到这个问题，它不断显示修改：Aisis-Core：

```
nothing added to commit but untracked files present (use "git add" to track)
adam@adam-VirtualBox:~/Dropbox/AisisGit/Aisis-Core$ git add -A
adam@adam-VirtualBox:~/Dropbox/AisisGit/Aisis-Core$ git status
# On branch tests
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   Aisis-Core
#   new file:   functions.php
#   new file:   index.php
#   new file:   style.css
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   Aisis-Core (modified content, untracked content) 
```

如果我做**git add -A**或**git add Aisis-Core**然后做 git status 我仍然看到**修改：Aisis-Core**

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:00:09.630

去看看[git 文档页面](http://git-scm.com/documentation)上的教程。`git add`只是暂存更改，直到您执行`git commit`它们并没有真正锁定在存储库中。

# ruby - 将过程代码转换为 OO

> ID：14741206
> 
> 赞同：0
> 
> 时间：2013-02-06T23:57:04.780
> 
> 标签：ruby

我注意到我的 Ruby 项目中有一个常见的模式。这是一个例子。

```
def collect_reverses b
  a = []
  b.each do |element|
    a << element.reverse
  end
  a
end 
```

这个特殊的例子被精简到最基本的部分。通常循环内的代码更复杂。

所描述的模式有效。然而，这种模式的过程性质与其余代码的面向对象性质形成鲜明对比。

是否有更清洁/更面向对象的方法来完成相同的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T23:58:44.030

参见[`Enumerable#collect`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)（也称为`map`）：

```
def collect_reverses(a)
  a.collect(&:reverse)
end 
```

# javascript - 简单表单上的 AJAX 验证

> ID：14741216
> 
> 赞同：0
> 
> 时间：2013-02-06T23:57:50.823
> 
> 标签：javascript, jquery, ajax, validation

我正在尝试使用 AJAX 进行客户端验证，以检查简单表单上的空字段。如果该字段为空，我想通知用户这是无效的。如果有任何空白字段，则不应提交表单。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:01:50.190

Ajax 不需要进行客户端验证。我只能假设您正在将术语与“jQuery”互换。在这种情况下...

[到目前为止， jQuery Validate](http://docs.jquery.com/Plugins/Validation)是最广泛使用的 jQuery 验证插件。

> “该插件由 Jörn Zaefferer 编写和维护，他是 jQuery 团队的成员、jQuery UI 团队的首席开发人员和 QUnit 的维护者。它始于 2006 年 jQuery 的早期，并从那时起进行了更新和改进。 "

这是一个工作演示......

**[http://jsfiddle.net/EggSb/](http://jsfiddle.net/EggSb/)**

**jQuery：**

```
$(document).ready(function() {

    $('#myform').validate({ // initialize the plugin
        rules: {
            field1: {
                required: true,
                minlength: 5,
                // other rules
            },
            field2: {
                required: true,
                email: true,
                // other rules
            }
        }
    });

}); 
```

**HTML：**

```
<form id="myform">  
     <input type="text" name="field1" />
     <input type="text" name="field2" />
     <input type="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:01:19.423

如果您要测试的只是空字段，则无需使用 AJAX。如果您的目标浏览器支持 HTML5 表单，您可以这样做：

```
<input type="text" name="username" required /> 
```

如果您需要支持 IE 等其他浏览器，则需要使用 JavaScript。谷歌“JavaScript 表单验证库”可以找到执行此操作的 JavaScript 示例。

# c# - 如何让 NDesk 在命令行解析多参数列表？

> ID：14741217
> 
> 赞同：1
> 
> 时间：2013-02-06T23:57:55.637
> 
> 标签：c#, command-line-arguments, ndesk.options

如何让 NDesk 在命令行 (C#) 解析多参数列表？

我有两个标志，它们都带有多个参数（文件列表）。所以一个是-j，另一个是-c。但我认为 NDesk 要求这些参数中的每一个都以 -j/-c 开头）

例如我想要：

```
%> main -j file1.j file2.j file3.j -c file4.c file5.c file6.c file7.c 
```

并让它生成 2 个列表，一个包含 .j 文件，另一个包含 .c 文件。但是，它希望以这种方式列出的每个文件前面都有标志。

所以这将起作用：

```
%> main -j file1.j -j file2.j -j file3.j -c file4.c -c file5.c -c file6.c -c file7.c 
```

虽然我宁愿拥有第一个版本。

有没有办法用 NDesk.Options 库做到这一点？我已经阅读了大部分文档，但我认为不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T23:10:19.890

有一种方法可以做到这一点，但它几乎不需要破解。NDesk 使用“<>”作为特殊的默认处理程序。您所做的是跟踪“当前”参数，然后让默认处理程序根据当前参数决定如何处理这些值。这是我将值放入字典的示例。

```
static void Main(string[] args)
{
    string currentParameter = "";
    Dictionary<string, List<string>> parameters = new Dictionary<string, List<string>>();
    OptionSet set = new OptionSet() {
            { "c", ".c files", v => currentParameter = "c" },
            { "j", ".j files", v => currentParameter = "j" },
            { "<>", v => {

                    List<string> values;
                    if (parameters.TryGetValue(currentParameter, out values))
                    {
                        values.Add(v);
                    }
                    else
                    {
                        values = new List<string> { v };
                        parameters.Add(currentParameter, values);
                    }

                }
            }
        };

    set.Parse(args);
    foreach (var parameter in parameters)
    {
        Console.WriteLine("Parameter: {0}", parameter.Key);
        foreach (var value in parameter.Value)
        {
            Console.WriteLine("\t{0}", value);
        }
    }
} 
```

输出是：

参数：j
file1.j
file2.j
file3.j
参数：c
file4.c
file5.c
file6.c
file7.c

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T15:43:43.657

另一种方法是`OptionSet.Parse` [按照此处概述的方式覆盖](http://www.ndesk.org/doc/ndesk-options/NDesk.Options/Option.html#M%3aNDesk.Options.Option.OnParseComplete%28NDesk.Options.OptionContext%29)

该示例描述了一种更彻底的“连接/附加”方法，它将解析所有格式，但如果您只是对处理感兴趣，`-flag value1 value2 value3 ... valueN`那么您可以使用：

```
public class MultiOptionSet : OptionSet
{
    private string lastArg;
    private Option lastOption;

    protected override bool Parse(string argument, OptionContext c)
    {
        // based on example in http://www.ndesk.org/doc/ndesk-options/NDesk.Options/Option.html#M:NDesk.Options.Option.OnParseComplete(NDesk.Options.OptionContext)

        string f, n, s, v;
        bool haveParts = GetOptionParts(argument, out f, out n, out s, out v);

        // reset placeholder for next multiple if we are looking at a flagged argument name
        if( haveParts )
        {
            lastArg = f + n;
        }
        // are we after a flagged argument name, without parts (meaning a value)
        else
        {
            // remember for next time, in case it's another value
            if( null != c.Option ) lastOption = c.Option;
            // but if the 'last arg' wasn't already provided, we reuse the one we set last time
            else
            {
                c.Option = lastOption;
                c.OptionName = lastArg;
            }

            c.OptionValues.Add(argument); // add the value to be invoked
            c.Option.Invoke(c); // perform the 'setter'
            return true;
        }

        return base.Parse(argument, c);
    }
} 
```

# javascript - JavaScript 三赋值

> ID：14741218
> 
> 赞同：1
> 
> 时间：2013-02-06T23:57:56.930
> 
> 标签：javascript, variable-assignment

我正在将一些 JavaScript 移植到 Java，但我很难理解以下两行代码：

```
var blocks=[];
for (var z=0; z<size; z++) {
    var slice=blocks[z]=[];    //Those are the lines I don't understand.
    for (var x=0; x<size; x++) {
        var row=slice[x]=[];    //Those are the lines I don't understand.
        for (var y=0; y<size; y++) {
            row[y]=isFull(x,y,z);
        }
    }
} 
```

第一行声明“slice”，然后分配“blocks[z]”，然后再次分配一个空数组。

在我写这篇文章时，我想到可能是在分配新数据之前清除任何以前的信息，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:01:54.573

实际上将一个空数组分配给`blocks[z]`，然后将`blocks[z]`（空数组）的值分配给`slice`。

基本上，这只是为两个（或更多）变量赋值的一种简单方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:10:20.300

是的，不是的，它会清除以前的数据，但这就是`var`正在做的事情。重要的部分是它分配了一个数组，以便以下行不会崩溃

```
blocks =[]; // blocks is an array of zero length 'filled' with NULL values;
var slice = blocks[z]; // slize would be the same as blocks[z] so it'd be NULL
blocks[z] = []; // blocks[z] is now an zero length array filled with NULL values. 
```

所有赋值代码都是从右到左执行的，因此它首先将一个数组`blocks[z]`分配给并将同一个数组分配给`var slice`

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:01:50.987

```
x = y = z; 
```

完全等同于：

```
y = z;
x = y; 
```

以该顺序。

# ocaml - ML (OCaml) API 中的solver_get_unsat_core() 返回空核心

> ID：14741219
> 
> 赞同：1
> 
> 时间：2013-02-06T23:58:08.157
> 
> 标签：ocaml, core, z3

我正在尝试使用 OCaml API 编写一个简单的 Z3 问题来提取 unsat 核心。问题是返回的 unsat 核心在不应该是空的时候是空的。你有什么想法或者你能指出我可能做错了什么吗？

我只使用 OCaml API 遵循 Rise4fun 中的示例：

```
let _ =
  (* make a new context:
    * - enable model construction
    * - enable quantifier instantiation
  *)
  let ctx = Z3.mk_context [("MODEL","true"); ("PROOF_MODE", "2"); ("MBQI","true")] in

  (* make a new "default" solver *)
  let solver = Z3.mk_solver ctx in

  (* assert some stupid constraints: exists x: int, y: int.  x < y *)
  let x_symb = Z3.mk_string_symbol ctx "x" in
  let x = Z3.mk_const ctx x_symb (Z3.mk_bool_sort ctx) in

  let y_symb = Z3.mk_string_symbol ctx "y" in
  let y = Z3.mk_const ctx y_symb (Z3.mk_bool_sort ctx) in

  let z_symb = Z3.mk_string_symbol ctx "z" in
  let z = Z3.mk_const ctx z_symb (Z3.mk_bool_sort ctx) in

  let p1_symb = Z3.mk_string_symbol ctx "p1" in
  let p1 = Z3.mk_const ctx p1_symb (Z3.mk_bool_sort ctx) in

  let p2_symb = Z3.mk_string_symbol ctx "p2" in
  let p2 = Z3.mk_const ctx p2_symb (Z3.mk_bool_sort ctx) in

  let p3_symb = Z3.mk_string_symbol ctx "p3" in
  let p3 = Z3.mk_const ctx p3_symb (Z3.mk_bool_sort ctx) in

  let p4_symb = Z3.mk_string_symbol ctx "p4" in
  let p4 = Z3.mk_const ctx p4_symb (Z3.mk_bool_sort ctx) in

  let p5_symb = Z3.mk_string_symbol ctx "p5" in
  let p5 = Z3.mk_const ctx p5_symb (Z3.mk_bool_sort ctx) in

  let p6_symb = Z3.mk_string_symbol ctx "p6" in
  let p6 = Z3.mk_const ctx p6_symb (Z3.mk_bool_sort ctx) in

  (* assert implications *)
  let notx = Z3.mk_not ctx x in
  let noty = Z3.mk_not ctx y in
  let notz = Z3.mk_not ctx z in
  let implies1 = Z3.mk_implies ctx p1 (Z3.mk_or ctx [| x; y|]) in
  Z3.solver_assert ctx solver implies1;

  let implies2 = Z3.mk_implies ctx p2 (Z3.mk_or ctx [| notx; y|]) in
  Z3.solver_assert ctx solver implies2;

  let implies3 = Z3.mk_implies ctx p3 (Z3.mk_or ctx [| x; noty|]) in
  Z3.solver_assert ctx solver implies3;

  let implies4 = Z3.mk_implies ctx p4 (Z3.mk_or ctx [| notx; noty|]) in
  Z3.solver_assert ctx solver implies4;

  let implies5 = Z3.mk_implies ctx p5 (Z3.mk_or ctx [| y; z|]) in
  Z3.solver_assert ctx solver implies5;

  let implies6 = Z3.mk_implies ctx p6 (Z3.mk_or ctx [| y; notz|]) in
  Z3.solver_assert ctx solver implies6;

  (* assert some constraints over p1, ..., p6 *)
  Z3.solver_assert ctx solver p1;
  Z3.solver_assert ctx solver p2;
  Z3.solver_assert ctx solver p3;
  Z3.solver_assert ctx solver p4;
  Z3.solver_assert ctx solver p5;
  Z3.solver_assert ctx solver p6;

  (* check satisfiability *)
  match Z3.solver_check ctx solver with
  | Z3.L_TRUE -> (* SAT *)
      (* get model *)
      let mdl = Z3.solver_get_model ctx solver in
      print_endline "Sat";
      print_endline (Z3.model_to_string ctx mdl)

  | Z3.L_FALSE -> (* UNSAT *)
    let unsat_core = Z3.solver_get_unsat_core ctx solver in
    print_endline "Unsat";
    print_endline "Solver";
    print_endline (Z3.solver_to_string ctx solver);
    print_endline "Unsat Core";
    print_endline (Z3.ast_vector_to_string ctx unsat_core)

  | Z3.L_UNDEF -> (* shrug *)
      print_endline "Unknown" 
```

生成的输出是：

```
Unsat
Solver
(solver
  (=> p1 (or x y))
  (=> p2 (or (not x) y))
  (=> p3 (or x (not y)))
  (=> p4 (or (not x) (not y)))
  (=> p5 (or y z))
  (=> p6 (or y (not z)))
  p1
  p2
  p3
  p4
  p5
  p6)
Unsat Core
(ast-vector) 
```

对 unsat_core ast_vector 大小的显式检查返回 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:09:53.957

你需要`("UNSAT_CORE","true");`像你设置的那样设置`("MODEL","true");`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:25:27.670

如果我使用`Z3.solver_check_assumptions`而不是仅使用`Z3.solver_check`. 要使用它，请为每个断言引入新的布尔变量，然后将这些布尔变量添加为假设。例如，我添加了变量`as1`并`as2`作为我的假设。运行此示例，我得到以下结果：

```
Unsat
as1
as2 
```

这是示例代码：

```
let _ =
  (* make a new context:
    * - enable model construction
  *)
  let ctx = Z3.mk_context [("MODEL","true")] in

  (* make a new "default" solver *)
  let solver = Z3.mk_solver ctx in

  (* assert some stupid constraints: exists x: int, y: int.  x < y *)
  let x_symb = Z3.mk_string_symbol ctx "x" in
  let x = Z3.mk_const ctx x_symb (Z3.mk_int_sort ctx) in

  let y_symb = Z3.mk_string_symbol ctx "y" in
  let y = Z3.mk_const ctx y_symb (Z3.mk_int_sort ctx) in

  let as1_symb = Z3.mk_string_symbol ctx "as1" in
  let as1 = Z3.mk_const ctx as1_symb (Z3.mk_bool_sort ctx) in
  let as2_symb = Z3.mk_string_symbol ctx "as2" in
  let as2 = Z3.mk_const ctx as2_symb (Z3.mk_bool_sort ctx) in

  Z3.solver_assert ctx solver (Z3.mk_iff ctx as1 (Z3.mk_lt ctx x y));
  Z3.solver_assert ctx solver (Z3.mk_iff ctx as2 (Z3.mk_lt ctx y x));

  (* check satisfiability *)
  match Z3.solver_check_assumptions ctx solver [| as1; as2 |] with
  | Z3.L_TRUE -> (* SAT *)
      (* get model *)
      let mdl = Z3.solver_get_model ctx solver in
      print_endline "Sat";
      print_endline (Z3.model_to_string ctx mdl)

  | Z3.L_FALSE -> (* UNSAT *)
      print_endline "Unsat";
      let core = Z3.solver_get_unsat_core ctx solver in
      for i = 0 to (Z3.ast_vector_size ctx core) - 1 do
        print_endline (Z3.ast_to_string ctx (Z3.ast_vector_get ctx core i))
      done

  | Z3.L_UNDEF -> (* shrug *)
      print_endline "Unknown" 
```

# javascript - 如何替换 HTML 元素，同时保持页面上所有其他元素的位置相同

> ID：14741220
> 
> 赞同：0
> 
> 时间：2013-02-06T23:58:10.753
> 
> 标签：javascript, html, css, styles

假设您在第三方网页上，因此您无法控制该页面，除了您的 javascript。

您想用一个空的 DOM 节点替换一个元素，但您希望页面为页面上的所有其他元素保持相同的位置。您不知道该元素将是什么以及网页上的样式是什么。

如果您将元素替换为 DIV，并且手动将该 div 的宽度和高度设置为与被替换元素相同，那么您就快到了。但是，您将不知道页面上是否有任何其他样式适用于 DIV 并将事情搞砸。此外，如果被替换的元素是浮动到左边或右边，或者是`display:inline`，那么用 DIV 替换它可能会弄乱页面上其他元素的位置。

有没有万无一失的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:00:41.517

您可以丢弃其内容，而不是替换整个元素。但是，它仍然可以有边框和背景图像，更不用说鼠标悬停之类的事件处理程序，所以有很多尴尬的情况。

# python - python初学者：最好制作一个方法或一个函数

> ID：14741223
> 
> 赞同：2
> 
> 时间：2013-02-06T23:58:23.030
> 
> 标签：python, class, function, methods

我有一个可以创建多个实例的类。创建一个方法和调用该方法与创建一个类和一个函数然后在类上使用该函数有什么区别？第一个是否因为该方法是“实例化”而消耗更多内存？

例子：

```
class myclass:
    def __init__(self):
        self.a=0

    def mymethod:
        print self.a

inst1=myclass()
myclass.mymethod 
```

相对：

```
class myclass:
    def __init__(self):
        self.a=0

def myfunction(instance):
    print instance.a

inst1=myclass()
myfunction(inst1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:05:08.723

方法实际上只是总是接收类实例作为第一个参数的函数（并且恰好在类的范围内声明）。方法的代码在所有实例之间共享，因此您不会在每次创建类实例时都“实例化”方法。

所以，它们真的是等价的；你使用任何最清楚地表达你的意图的东西（可读性很重要！）。如果您正在编写一个始终将特定类的实例作为参数的函数，那么它可能最清楚地表示为方法。如果该函数可以对许多不同种类的类进行操作，那么它作为一个函数可能是最清晰的。

# c++ - 我想不出一个好的算法

> ID：14741224
> 
> 赞同：-7
> 
> 时间：2013-02-06T23:58:25.437
> 
> 标签：c++

有一个魔术板。魔术板有 N*N 个单元：N 行和 N 列。每个单元格包含一个整数，最初为 0。让行和列从 1 到 N 编号。

有2种操作可以应用于魔术板：

•RowSet ix：表示经过此操作后，第i 行单元格中的所有整数都已更改为x。

•ColSet ix：表示在此操作后第i 列单元格中的所有整数都已更改为x。

您的朋友有时对某行或某列上的整数 0 的总数感兴趣：

•RowQuery i：表示您应该回答第i 行0 的总数。

•ColQuery i：表示您应该回答第i 列0 的总数。

输入

第一行输入包含 2 个空格分隔的整数 N 和 Q。它们表示魔术板的大小，以及来自朋友的操作和查询的总数。

然后接下来的 Q 行中的每一行都包含上述格式的操作或查询。

输出

对于每个查询，输出查询的答案。

约束

1≤N，Q≤500000（5*105）

1≤i≤N

x ∈ {0, 1}（即 x = 0 或 1）

样本输入：

3 6

行查询 1

集合 1 1

行查询 1

ColQuery 1

行集 1 0

ColQuery 1

输出：3

2

0

1

怎么办？时间限制为 0.6 秒，因此在 2D 数组上标记操作的简单算法将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:06:51.383

如果你想不出一个好的算法，试试这个技术：

1.  使用铅笔和方格纸运行一个示例。
2.  再次运行一个示例，这次记下您执行的每个详细步骤。
3.  使用您的步骤再次运行示例。根据需要进行调整。
4.  将您的步骤转换为代码。

使用这种技术，您可以提出更合适的问题在 Stackoverflow 上进行搜索，例如“如何实现一个正方形的内存/矩阵区域？”

或者“我如何使用调试器？”

或者“这是重现我的问题的最小程序......，我做错了什么？”

## 编辑1：（提高我的SO声誉）

从需求来看，您至少需要两个功能：将行设置为给定值或将列设置为给定值。

让我们从像 4x4 矩阵这样的小东西开始。并使用命令： Set Row 1 0 // 将第 1 行设置为全零。请记住，C++ 索引从 0 到 N-1 而不是 1 到 N 的要求是，所以我们必须从我们的行号中减去一个。让我们使用符号：`board[row][column]`表示板上的一个单元格。用手：

```
 board[0][0] = 0;
  board[0][1] = 0; // Note the incrementing column numbers.
  board[0][2] = 0;
  board[0][3] = 0; // Note the last column index is 3 not 4. 
```

看上面的代码，我们可以注意到一个模式，即列索引每次都在变化，1。所以我们可以把它放到一个循环中：

```
 Set column to zero.
  While column is less than 4 do:
      board[0][column] = 0;
      column = column + 1;
      end-while 
```

下一步是将其转换为一些代码：

```
 unsigned int column;
  unsigned int board[4][4];
  for (column = 0; column < 4; ++column)
  {
       board[0][column] = 0;
  } 
```

由于该`Set Row`命令允许可变行索引和可变行值，我们制作这些变量并将它们插入到我们的代码中：

```
unsigned int row = 0;
unsigned int value = 0;
unsigned int column;
unsigned int board[4][4];
for (column = 1; column < 4; ++column)
{
    board[row][column] = value;
} 
```

我们可以通过提供函数签名将其变成一个独立的函数：

```
void Set_Row(unsigned int& array[4][4],
             unsigned int  row,
             unsigned int  value)
{
   // Insert above code fragment here.
} 
```

接下来，为其他命令创建函数。
创建一个`main`函数来读取命令。
运行程序，注意问题出在哪里，例如能够在运行时声明任意大小的矩阵。
添加代码以解决问题。
重复。

# php - PHPUnit：类 找不到 .php

> ID：14741228
> 
> 赞同：9
> 
> 时间：2013-02-06T23:58:55.947
> 
> 标签：php, unit-testing, phpunit

我无计可施。我一定已经阅读了关于同一主题的每一个 SO 问题，但并不高兴。

我无法让 phpUnit 正常工作。我已经使用 PEAR 成功安装了 phpUnit 及其依赖项。我还修改了我的 php.ini 文件并将 phpUnit 的路径添加到包含路径：（“.:/php/includes:usr/lib/php/pear”）。

为了测试 phpunit 是否正常工作，我复制了这个简单的类，所以 MyClassTest.php 如下：

```
class MyClassTest extends PHPUnit_Framework_TestCase
{
    public function testCalculate()
    {
        $this->assertEquals(2, 1 + 1);
    }
} 
```

运行“phpunit MyClassTest”产生以下输出：（运行“phpunit MyTestClass MyTestClass.php”产生相同的结果）；

```
class MyClassTest extends PHPUnit_Framework_TestCase
{
    public function testCalculate()
    {
        $this->assertEquals(2, 1 + 1);
    }
}
PHPUnit 3.7.13 by Sebastian Bergmann.

Class 'MyClassTest' could not be found in 'MyClassTest.php'. 
```

我想不出有什么问题。我试过卸载并重新安装 phpunit/PHPUnit，但没有任何乐趣。你能找出问题所在吗？如果您需要更多信息，请告诉我，我会编辑这篇文章。提前致谢。

*   PHP 5.3.15
*   PHPUnit 3.7.13
*   OSX 10.8.2

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T00:20:14.813

您的源代码会打印到控制台，因此您似乎`<?php`一开始就忘记了。

# asp.net - 使用服务和 Masterpage 自动完成

> ID：14741229
> 
> 赞同：0
> 
> 时间：2013-02-06T23:59:00.660
> 
> 标签：asp.net, ajax, autocomplete

我一直在努力让所有这些组件正常工作，但是当我访问 js 时，它在 Student 页面上找不到 TextBox 控件。

MasterPage ScriptManager：

```
<body>
<form id="MainForm" runat="server">
    <asp:ScriptManager ID="ScriptManagerMain" runat="server">
        <Services>
            <asp:ServiceReference Path="~/AutoComplete.asmx" />
        </Services>
    </asp:ScriptManager> 
```

母版页 ContentPlaceHolder：

```
 <asp:ContentPlaceHolder ID="ContentPlaceHolderStudent" runat="server">
        </asp:ContentPlaceHolder> 
```

学生（儿童）页面：

```
<asp:Content ID="Content" ContentPlaceHolderID="ContentPlaceHolderStudent" runat="server" >
<asp:UpdatePanel ID="StudentSearchPanel" runat="server" ViewStateMode="Inherit">
    <ContentTemplate>
        Search by student ID:
        <br />
            <asp:TextBox ID="StudentIDSearchTextBox" runat="server" OnTextChanged="StudentIDSearchTextBox_TextChanged" Wrap="False" MaxLength="6" ClientIDMode="Static"  ViewStateMode="Inherit"></asp:TextBox>                 
        <br />
                    <asp:Label ID="StudentIDEntryError" runat="server" Visible="false" Font-Bold="True" ForeColor="Red" Text="Please enter a 6-digit student ID number."></asp:Label>
        <br />                        
        Or, begin typing student last name:
        <br />
        <asp:TextBox ID="StudentNameSearchTextBox" runat="server" 
            CssClass="StudentNameSearch"
            ViewStateMode="Inherit"></asp:TextBox> 
```

学生页面上的自动完成扩展器：

```
 <ajaxToolkit:AutoCompleteExtender ID="StudentNameSearchTextBox_AutoCompleteExtender" runat="server"
            TargetControlID="StudentNameSearchTextBox" 
            ServicePath="~/Scripts/AutoComplete.asmx"
            ServiceMethod="GetStudents"
            OnClientItemSelected="onStudentSelected" 
            MinimumPrefixLength="2" 
            CompletionSetCount="30" 
            UseContextKey="True" 
            CompletionListCssClass="autocomplete_completionListElement" 
            CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem" 
            CompletionListItemCssClass="autocomplete_listItem" >
        </ajaxToolkit:AutoCompleteExtender> 
```

AutoComplete.asmx 正在工作，所以我不会添加该代码。当我开始输入学生的姓氏时，我确实收到了一个 json 响应，类似于以下内容（为了保护学生数据而进行了更改）。我从 FireBug 那里得到这个：

```
{"d":["{\"First\":\"Lisaaa, Abby E.\",\"Second\":\"610999\"}","{\"First\":\"Lisbbb, Bobby P.\",\"Second\":\"151999\"}","{\"First\":\"Lisccc, Cathy M.\",\"Second\":\"739999\"}","{\"First\":\"Lisddd, David L.\",\"Second\":\"496999\"}","{\"First\":\"Liseee, Emily C.\",\"Second\":\"701999\"}","{\"First\":\"Lisfff, Frank G.\",\"Second\":\"623999\"}"]} 
```

问题是，当我在 GetStudentJson.js 中到达 OnClientItemSelected="onStudentSelected" 时：

```
function onStudentSelected(sender, e) {
    var selectedStudent = eval("(" + e._value + ")");
    var StudentIdTextbox = document.getElementById('<%=ContentPlaceHolderStudent_StudentIDSearchTextBox.ClientID %>');

    StudentIdTextbox.innerText = selectedStudent;
    __doPostBack(StudentIdTextbox, "");
} 
```

我收到一个错误 StudentIdTextbox is Null。我尝试通过转到 ViewSource 来添加所有级别的占位符以找出如何找到该框并为其提供学生 ID 的值，但无济于事。事实上，它看起来是这样的：

```
<input name="ctl00$ContentPlaceHolderStudent$StudentIDSearchTextBox" type="text" maxlength="6" id="StudentIDSearchTextBox" /> 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:59:58.587

我终于发现问题在于页面生命周期。我没有在母版页中引用脚本，而是将脚本本身移到了子页。现在，“FindControl”正在寻找实际存在的控件。

```
<script type="text/javascript">
    function onStudentSelected(sender, e) {
        var selectedStudent = eval("(" + e._value + ")");
        var txtId = document.getElementById('<%= Page.Master.FindControl("ContentPlaceHolderStudent").FindControl("StudentSearchPanel").FindControl("StudentIDSearchTextBox").ClientID %>');
        txtId.value = selectedStudent;
    }
</script> 
```

我只是想过早地找到那个控制。

# html - Firefox 不断显示 iframe 的滚动条。如何隐藏它们

> ID：14741232
> 
> 赞同：1
> 
> 时间：2013-02-06T23:59:12.860
> 
> 标签：html, firefox, iframe

原文链接：[http ://www.webdeveloper.com/forum/showthread.php?235680-FF-has-problems-with-IFrames-scrolling-and-height](http://www.webdeveloper.com/forum/showthread.php?235680-FF-has-problems-with-IFrames-scrolling-and-height)

我一直是 FireFox 的粉丝，但现在我开始讨厌它。我正在更改我的页面以具有 IFrames，现在 FireFox 是一个痛苦的屁股，而 IE 就像一个魅力！

我的 iframe 如下： 代码：

```
<iframe id="leftiframe" src="<?=$page?>" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" vspace="0" hspace="0" style="overflow:visible; width:100&#37;;">
</iframe> 
```

但是 FireFox 一直在我的 IFrame 中向我显示滚动条，其中`scrolling=no`. 为什么 FireFox 不明白我不想要滚动条。此外，在 FireFox 中未正确报告 IFrame 的大小。不带`offsetHeight`,`clientHeight`或`scrollHeight`其他。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T00:30:28.723

HTML5 不支持 iframe 滚动属性。您需要使用 CSS 来删除滚动条。

```
#leftiframe {
  overflow: hidden;
} 
```

# java - 在 listFilesInFolder 函数中显示单元格数据

> ID：14741234
> 
> 赞同：0
> 
> 时间：2013-02-06T23:59:33.107
> 
> 标签：java, javascript

我有这个公式，它成功地列出了我在一个文件夹中的所有文件。惊人的。但是，我也可以在这个脚本中列出每个文件中的一些特定单元格数据吗？

```
function listFilesInFolder() {
  var folder = DocsList.getFolder("1- Summaries");
  var contents = folder.getFiles();

  var file;
  var data;

  var sheet = SpreadsheetApp.getActiveSheet();
  sheet.clear();

  sheet.appendRow(["Name", "Date", "Size", "URL", "Download", "Description", "Type"]);

  for (var i = 0; i < contents.length; i++) {
    file = contents[i];

    if (file.getFileType() == "SPREADSHEET") {
      continue;
    }

    data = [ 
      file.getName(),
      file.getDateCreated(),
      file.getValue(B10),  **(THIS IS WHERE I WOULD LIKE TO GET DATA, but it does not work)**
      file.getUrl(),
      "https://docs.google.com/a/acme.com/spreadsheet/ccc?key=" + file.getId(),
      file.getDescription(),
      "audio/mp3"
    ]

    sheet.appendRow(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:46:23.227

您可以从电子表格中读取，是的。

在所在的地方`if (file.getFileType()...`，放这个：

```
var cellValue;
if (file.getFileType() === "SPREADSHEET") {
  cellValue = SpreadsheetApp.openById(file.getId()).getSheetByName("NameOfSheet")
      .getRange("B10").getValue();
} else {
  cellValue = null; // specify some default value here!
}
  ... 
```

然后在您的数据数组中：

```
data = [ 
  file.getName(),
  file.getDateCreated(),
  cellValue,
... 
```

# jquery - 跳转到下一部分 - Jquery

> ID：14741235
> 
> 赞同：0
> 
> 时间：2013-02-06T23:59:38.413
> 
> 标签：jquery, navigation, scroll

我在水平布局中工作，并尝试使用 jquery 在单击锚点时在 html 部分中导航。所以当点击跳转到下一节。

我看到一些例子做同样的但垂直！

HTML 代码：

```
<div id="main">
    <div id="nav">
        <a id="prev" class="prev"> prev </a>
            <a id="next" class="next"> next </a>
        </div>
        <div class="content-container">
        <div class="content">
            <section id="about" class="panel">

                <p>About content</p>

            </section><!-- end about -->

            <section id="event" class="panel">

                <p>Event content</p>                

            </section><!-- end event -->

            <section id="services" class="panel">

                <p>Services content</p>

            </section><!-- end services -->

        </div><!-- end content -->

    </div><!-- end content-container -->
</div><!-- end main --> 
```

JS代码

```
<script src="jquery-1.6.min.js"></script>
<script type="text/javascript">

    function scrollToPosition(element) {
            if (element !== undefined) {
                $("#main.content-container").scrollTo(element, 700, {
                    margin: true
                });
            }
    }

    $(function() {

            var posts = $('.panel');
        var position = 0; //Start Position
            var next = $('#next');
            var prev = $('#prev').hide();

            next.click(function(evt) {

                prev.show();
                scrollToPosition(posts[position += 1]);
                if (position === posts.length - 1) {
                        next.hide();
                }
            });

            prev.click(function(evt) {
                next.show();
                scrollToPosition(posts[position -= 1]);
                if (position === 0) {
                        prev.hide();
                }
            });

    });
</script> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:06:27.880

您使用的方法`scrollTo`不是 jQuery 方法，而是插件方法。您没有包含任何插件，因此代码将在浏览器控制台中引发错误并且什么也不做。

在加载 jQuery.js 之后和代码之前包含插件文件。

否则，如果没有看到您的 css 在工作中，很难说出您可能遇到的其他问题。

# perl - 使用 LWP 出错

> ID：14741237
> 
> 赞同：0
> 
> 时间：2013-02-06T23:59:45.230
> 
> 标签：perl, lwp

我试图在 perl 中使用 LWP，并按照链接中给出的示例进行操作：[http](http://www.perl.com/pub/2002/08/20/perlandlwp.html) ://www.perl.com/pub/2002/08/20/perlandlwp.html ，

但我得到了这样的错误：

LWP::Simple 模块不导出“www.google.com”

在 /System/Library/Perl/Extras/5.12/LWP/Simple.pm 第 23 行出现导入错误后无法继续

这是我的代码：

```
 #!/usr/bin/perl -w
     use LWP::Simple

    $url = 'www.google.com';
    $content = get $url; 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:09:26.020

您的语句后需要一个分号`use`，并且您的 URL 需要指定一个协议。

```
 #!/usr/bin/perl
 use LWP::Simple;

 use strict;
 use warnings;

 my $url = 'http://www.google.com';
 my $content = get $url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:11:54.163

是的。你错过了后面的分号`use LWP::Simple`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:29:55.890

如果你使用`strict`它会告诉你，你必须申报`$url`。但是如果你声明了这两个变量，你仍然会得到你所做的错误。

因此，这不是 USUW 的简单案例。

因为您没有在 import 语句后放置分号，所以 perl 将字符串分配给`'www.google.com'`autovariable `$url`。然后，由于它是一个可以传递的表达式，它将该值作为 的导出参数传递`LWP::Simple`。

模块期望作为参数传递给其导入过程的任何值都是模块（或导出器）知道如何导出的符号。

所以它告诉你，无论你传入的字符串是什么，它都不是模块导出的东西。

所以，你只需要习惯这种类型的消息，指出你的 import 语句有问题。

# jquery-file-upload - 如何让 jquery 上传接受除 php 和 js 之外的所有文件类型

> ID：14741239
> 
> 赞同：2
> 
> 时间：2013-02-06T23:59:48.143
> 
> 标签：jquery-file-upload

我在[Jquery 文件上传上有这一行：](http://blueimp.github.com/jQuery-File-Upload/)

```
'accept_file_types' => '/.+$/i', 
```

如何修改它以使其接受除 PHP 和 Javascript 文件之外的所有文件类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-08T11:22:34.310

原来的

```
'accept_file_types' => '/.+$/i', 
```

改变

```
'accept_file_types' => '/\.(gif|jpe?g|png)$/i' 
```

或添加新的扩展

```
'accept_file_types' => '/\.(gif|jpe?g|png|zip|pdf)$/i' 
```

# java - Object 类型的数组，并比较数组内的对象

> ID：14741247
> 
> 赞同：0
> 
> 时间：2013-02-07T00:00:35.353
> 
> 标签：java, arrays, object

我正在创建一个对象类型的数组。我有两个不同的类，Employee 和 Person，它们具有简单的属性，如姓名、薪水（Employee）名字、出生日期（Person）。我需要将一些 Employee 和 Person 对象添加到我的数组中并比较数组中的某些内容。例如，从数组中检索最年轻的人。

```
public class Driver {

public static void main(String[] args) {
    Employee e1 = new Employee("Den", 2000);

    Employee e2 = new Employee("Jon", 1004);

    Person p1 = new Person("Pen", "Tel", "1993");
    Person p2 = new Person("Jon", "Smith", "1933");

    Object [] crr;
    crr = new Object[4];
    crr[0] = e1;
    crr[1] = p1;
    crr[2] = p2;
    crr[3] = e2;
    System.out.println();
    new Driver().printObjectArray("array crr", crr);

}
public void printObjectArray(String arrayName, Object [] array){
    for (int i = 0; i < array.length; i++){
        System.out.println(arrayName + "["+ i +"]" + array[i].toString());
    }
    System.out.println("--------------------");
}   
} 
```

我将如何比较阵列上的某些东西。就像打印最年轻的人一样，这意味着我必须查看数组并查看它是否是 Person 对象，然后在这些对象上获取 DateOfBirth 并打印最年长的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:12:00.217

```
public Person getYoungestPerson(Object [] arr){

    int i=0; Person youngest;
    while(person == null){
      if(arr[i] instanceof Person) youngest = arr[i];
      i++;
      }
     for(i=0;i<arr.length;i++){ if (arr[i] instanceof Person) 
            if(arr[i].getDateOfBirth()<youngest.getDateOfBirth()) 
               youngest= arr[i];}
   return youngest;
} 
```

理想情况下，Employee 应该是 Person 的子类，并且您将拥有一个 Person 数组。如果你**只**想要Persons，你必须小心，因为`instanceof`所有子类也返回 true，这不是你的情况，因为 Employee 不扩展 Person，只是对未来的提醒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:51:14.797

在 Employee 和 Person 类中编写一些 get 方法。例如，

在您的 Employee 类中，创建：

```
public int getSalary(){
  return salary; // Make salary as a global variable
} 
```

在您的 Person 类中，执行

```
public int getYear(){
  return year; // same here
} 
```

所以在你的主要代码中，你可以做

```
for (int i = 1; i < array.length; i++){
  Object youngest;
  if (crr[i].getYear() < crr[i+1].getYear())){
    youngest = crr[i];
  }
} 
```

但是，我实际上想建议您使用 ArrayList 而不是数组。并创建两个数组/ArrayLists，而不是将 e 和 p 放在一个数组中。更容易管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:12:16.827

不要使用 Object 类型的数组。Java 擅长强类型，因此请充分利用这一点。如果 Person 扩展了 Employee，或者 Employee 扩展了 Person，则利用它。用顶级类初始化你的数组：

```
Person[] people = {new Employee(...), new Employee(...),
  new Person(...), new Person(...)}; 
```

或者

```
Person[] people;
...
people = new People[]{new Employee(...), 
  new Employee(...), new Person(...), new Person(...)}; 
```

或者

```
Person[] people = new People[<some number>];
...
people[0] = new Employee(...);
people[1] = new Person(...);
... 
```

然后我们可以通过确保 Person（或 Employee）实现 Comparable（或 Employee）、实现 compareTo(Person other) {...}（或 Employee）并调用 Arrays.sort(people) 来对数组进行排序。因为我们使它们具有可比性，Java 将[知道](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)如何对它们进行排序。

Java 可以为您做很多事情，但您必须遵守它的规则。不使用“对象”容器是其中之一，实现 Comparable 接口是另一个（第三种是在 ArrayList、HashMap 等容器上使用泛型，以便 Java 知道您在其中放入了什么，而不是捕获-所有“对象”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T00:26:39.200

如果 Person 通过扩展与 Employee 不“相关”，您可以强制两个类实现相同的接口。创建该接口类型的数组并将 Employee 和 Person 对象放入其中。然后使用接口方法比较 Employee 和 Person 对象。我认为这里最好的选择是让 Employee 扩展 Person，但是接口可以提供一个不错的选择。

# java - 如何在Java中除以小数而不是零？

> ID：14741248
> 
> 赞同：9
> 
> 时间：2013-02-07T00:00:35.897
> 
> 标签：java, division

```
double[] arrayName = new double[10]; 
arrayName[0] = (14/49)*100; 
```

尝试获取两个数字 14 / 49 的百分比，并将结果添加到数组中。它返回的只是 0.0。如果我使用浮点数而不是双精度数，同样的事情。Java新手。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T00:04:03.840

要么将`int`s 转换为`double`，要么只使用`double`s。

例如：

```
double[] arrayName = new double[10]; 
resultValue[0] = (14.0/49.0)*100; 
```

或者：

```
double[] arrayName = new double[10]; 
resultValue[0] = ((double)14/49)*100; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T00:03:01.540

你怎么看：

```
(double/double)*double 
```

JVM 如何看待它

```
(int/int)*int 
```

来自[JLS](http://java.sun.com/docs/books/jls/)。int 到 double 是一个扩大的转换。从[§5.1.2 开始](http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#5.1.2)：

> 扩大原始转换不会丢失有关数值整体大小的信息。
> 
> [...]
> 
> 将 int 或 long 值转换为 float，或将 long 值转换为 double，可能会导致精度损失——也就是说，结果可能会丢失一些值的最低有效位。在这种情况下，生成的浮点值将是整数值的正确舍入版本，使用 IEEE 754 舍入到最近模式[(§4.2.4)](http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#9249)。

如果您用双文字替换其中一个（例如添加`.0`或强制转换其中一个，`double`您应该得到您期望的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T00:02:50.470

像这样：

```
arrayName[0] = (14/49)*100.0; // put ".0" after any of the numbers 
```

或这个：

```
arrayName[0] = (double)(14/49)*100; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T00:04:38.610

您的值中至少有一个应该是`double`：

```
double[] arrayName = new double[10]; 
arrayName[0] = (14d/49d)*100;
// or...
// arrayName[0] = (14d/49)*100;
// or...
// arrayName[0] = (14/49d)*100;
// or...
// arrayName[0] = (14.0/49)*100;
// or...
// arrayName[0] = (14/49.0)*100;
// or...
// arrayName[0] = (14/(double)49)*100;
// or...
// arrayName[0] = ((double)14/49)*100;
// or...
// arrayName[0] = ((double)14/(double)49)*100; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T00:08:04.540

正如许多其他人指出的那样，您只需将常量设置为双精度数：

```
arrayName[0] = (14*100)/49.0; 
```

这样，您只需将最后一个计算转换为 double 而不是开始，并减少浮点计算的数量。

顺便说一句，如果您愿意，您也可以使用相同的交换顺序的方法将结果作为整数，并在除法之前使用乘法，例如：14*100/49 而不是 (14/49)*100。

# ruby - Rspec 请求规范寻找单个命名控制器

> ID：14741249
> 
> 赞同：0
> 
> 时间：2013-02-07T00:00:41.500
> 
> 标签：ruby, ruby-on-rails-3, routing

我定义了以下路由并定义了以下 UsersController，当我尝试运行**在 { visit signup_path } 之前**尝试的规范测试时，我收到以下错误：

**错误**

```
Failure/Error: before { visit signup_path}
     ActionController::RoutingError:
       uninitialized constant UserController
     # ./spec/requests/user_pages_spec.rb:7:in `block (3 levels) in <top (required)>'
  resources :users 
```

**路线.rb**

```
 resources :users
  match '/signup',  to: 'users#new'
  match '/help', to: 'static_pages#help'
  root :to => 'static_pages#help' 
```

**users_controller.rb**

```
class UsersController < ApplicationController
  def new
  end

  def show
    @user = User.find(params[:id])
  end
end 
```

**更新** **user_pages_spec.rb**

```
 describe "UserPages" do
  subject { page }

  describe "Signup Page" do
    before { visit signup_path}

    it "Should have header Sign-up" do
      should have_selector("h1", text: "Sign-up")
      should have_selector("title", text: "Sign-up")
    end
  end

  describe "profile page" do
    let(:user) {FactoryGirl.create(:user)}
    before { visit user_path(user) }

    it { should have_selector("title", text: "#{user.name} Profile")}
    it { should have_selector("h1", text: user.name)}
  end
end 
```

这是我的路线：

```
users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy
   signup        /signup(.:format)         users#new
     help        /help(.:format)           static_pages#help
     root        /                         static_pages#help 
```

我可以毫无问题地访问 www.blah.com/signup。但是规范正在寻找一个单一的用户控制器。我也可以用“signup_path”代替“/users/new”，测试就会通过。

另外，想补充一点，最初我使用单一版本的 rails 生成器创建了控制器（仅）。但是在我发现使用 rails destroy 控制器脚本后，我放弃了它。然后为复数版本发布了正确的 rails 生成器。就像我说的，它就像测试搞砸了，但实际的应用程序。

# html - 何时使用，或 ?

> ID：14741262
> 
> 赞同：19
> 
> 时间：2013-02-07T00:01:43.367
> 
> 标签：html

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T00:18:29.343

> 我一直在问自己是否要加粗、斜体或黄色突出显示文本，这让我觉得我应该改用 CSS。

这是 100% 正确的。标记用于描述内容，而不是外观。话虽如此：

[http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html)

*   该`<strong>`元素对其内容具有很强的重要性。用 strong 元素改变一段文本的重要性**并不会改变句子的含义**。

*   元素表示其内容的`<em>`强调重点。重音的放置**改变了句子的意思**。

*   该`<mark>`元素表示一个文档中的一系列文本，出于参考目的而标记或突出显示，**因为它与另一个上下文相关**。

`<mark>`与内容无关，仅与上下文相关（例如，标记与搜索词匹配的内容、拼写错误的单词、网络应用程序中的选定内容等）。

`<strong>`表示重要的文本，但不*影响*含义。

`<em>`表示重要的文本并通过说应该重点阅读/说出来来影响内容的含义。

您可以随意使用 CSS 更改所有这些元素的浏览器默认设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-21T20:13:19.047

记住 HTML 是一种标记语言。在它里面你写页面的内容。如果你使用“Cats are NOT dogs”，像谷歌这样的搜索引擎不知道“DOGS”是否是一个显着的短语（当然你的读者会注意到它）。如果您使用 CSS（一种样式语言），也会发生同样的事情：搜索引擎不会将“DOGS”识别为可区分的文本，但用户会。

当您使用问题的元素时，它们确实提供了信息。它们被称为语义元素。例如，搜索引擎（或屏幕阅读器或口语软件）使用元素`<h1>`作为标题比仅仅使用`<p>`和通过 CSS 使其大而粗体提供更多信息。另一个例子是在 中使用`alt`和`title`属性`img`，因为引擎不理解您在 中的图像`src`。

因此，即使任何 HTML 元素`<em>`, `<strong>`,对**用户**`<mark>`来说都是显而易见的，但它们为**引擎**中的文本赋予了不同的含义。

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T00:09:09.790

寻找例如书籍的写作风格。诚然，网页没有这么正式，但它应该给你一个起点。斜体文本（即，<em>）用于强调。粗体 (<strong>) 用于标题等，很少用于运行文本。****

# vb.net - VB.net ListView 多次添加项目

> ID：14741264
> 
> 赞同：0
> 
> 时间：2013-02-07T00:01:46.990
> 
> 标签：vb.net, listview

如果我多次运行我的操作，我会在我的 ListView 中为同一项目获得多个条目。

我正在创建一个简单的网络扫描器/主机名抓取器，它将在项目恢复到我的 ping 测试时将它们添加到列表视图中。

当我第一次运行它时，它运行良好并按应有的方式创建一个条目。

当我随后运行它时，它创建项目的次数与我运行代码前的次数一样多。第三次点击开始它会创建每个条目 3 次，而它应该只创建一次条目。

这是我的 go 按钮代码：

```
 Private Sub Go_Click(sender As Object, e As EventArgs) Handles Go.Click
        Dim verifyIP
        ListView1.Items.Clear()
        chkDone = 0
        verifyIP = ipChk(ipAdd.Text)
        If verifyIP = 1 Then
            ipAddy = Split(ipAdd.Text, ".")
            pingTest1.WorkerReportsProgress = True
            pingTest1.WorkerSupportsCancellation = False
            AddHandler pingTest1.ProgressChanged, AddressOf pingTest1_ProgressChanged
            pingTest1.RunWorkerAsync()
            pingTest2.WorkerReportsProgress = True
            pingTest2.WorkerSupportsCancellation = False
            AddHandler pingTest2.ProgressChanged, AddressOf pingTest2_ProgressChanged
            pingTest2.RunWorkerAsync()
            pingTest3.WorkerReportsProgress = True
            pingTest3.WorkerSupportsCancellation = False
            AddHandler pingTest3.ProgressChanged, AddressOf pingTest3_ProgressChanged
            pingTest3.RunWorkerAsync()
            pingTest4.WorkerReportsProgress = True
            pingTest4.WorkerSupportsCancellation = False
            AddHandler pingTest4.ProgressChanged, AddressOf pingTest4_ProgressChanged
            pingTest4.RunWorkerAsync()
            While chkDone < 4
                wait(25)
            End While
        Else
            MsgBox("IP Invalid")
        End If
        MsgBox("Done")
    End Sub 
```

这是我正在使用的一位后台工作人员的代码：

```
Private WithEvents pingTest1 As BackgroundWorker = New BackgroundWorker

    Private Sub pingTest1_DoWork(ByVal sender As Object, ByVal e As DoWorkEventArgs) Handles pingTest1.DoWork
        Try
            Dim hostCheck
            pingResult1 = 0
            pingTestDone1 = 0
            tryIP1 = ipAddy(0) & "." & ipAddy(1) & "." & ipAddy(2) & ".1"
            If My.Computer.Network.Ping(tryIP1) = True Then
                'Dim pingsender As New Net.NetworkInformation.Ping
                'If pingsender.Send(tryIP).Status = Net.NetworkInformation.IPStatus.Success Then
                Try
                    'Dim host As System.Net.IPHostEntry
                    hostCheck = ""
                    'host = System.Net.Dns.GetHostByAddress(tryIP3)
                    'MsgBox(host.HostName)
                    'host3 = host.HostName
                    'hostCheck = System.Net.Dns.GetHostEntry(tryIP3).HostName
                    hostCheck = System.Net.Dns.GetHostByAddress(tryIP1)
                    'get the hostname property 
                    hostCheck = hostCheck.HostName
                    pingTest1.ReportProgress("1", hostCheck)
                Catch f As Exception
                    'MsgBox("Error: " & f.Message)
                    pingTest1.ReportProgress("1", "No Hostname Found")
                End Try
            Else
                pingResult1 = 2
            End If
        Catch d As Exception
            MsgBox("There was an error trying to ping the IP Address: " & d.Message)
        End Try
    End Sub

    Private Sub pingTest1_ProgressChanged(e.ByVal sender As Object, ByVal e As ProgressChangedEventArgs)
        MsgBox("Hey")
        Dim str(2) As String
        Dim itm As ListViewItem
        str(0) = tryIP1 & " Is Alive!!!"
        str(1) = e.UserState
        itm = New ListViewItem(str)
        ListView1.Items.Add(itm)
        str(0) = ""
        str(1) = ""
        itm = Nothing
    End Sub

Private Sub pingTest1_RunWorkerCompleted(ByVal sender As Object, ByVal e As RunWorkerCompletedEventArgs) Handles pingTest1.RunWorkerCompleted
    chkDone = chkDone + 1
End Sub 
```

*   我添加了 Hey 框，果然 ProgressChanged 事件触发了我点击 Go 按钮的次数。是我编码错误的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:17:53.037

这很可能是因为您正在添加但没有删除您的处理程序以更改进度，因此您正在多次处理该事件。

在实例化后台工作人员时尝试添加进度更改事件处理程序，而不是每次单击按钮时。这样他们只会处理一次。

# qml - 如何在 Blackberry 10 Dev Alpha Simulator 中播放 SystemSounds？

> ID：14741270
> 
> 赞同：1
> 
> 时间：2013-02-07T00:02:02.080
> 
> 标签：qml, blackberry-10, blackberry-cascades

我只是想运行提供的示例代码，据我所知，它应该可以正常工作。有什么我遗漏的，或者这是模拟器的限制。

如果是这样，是否有任何解决方法？

```
import bb.cascades 1.0
// To use the MediaPlayer, we must include
// the multimedia library.
import bb.multimedia 1.0

Page {
    Container {
        id: mainContainer
        layout: StackLayout {
            orientation: LayoutOrientation.TopToBottom
        }
        topPadding: 50.0
        Label {
            id: titleLbl
            text: qsTr("SystemSound and MediaPlayer\n Sample App")
            multiline: true
            textStyle.fontSizeValue: 9.0
            textStyle.fontWeight: FontWeight.Bold
            textStyle.fontFamily: "Verdana"
            textStyle.color: Color.DarkBlue
            textStyle.textAlign: TextAlign.Center
            horizontalAlignment: HorizontalAlignment.Center
        }
        // Part 1 of the sample: Playing system sounds.
        Container {
            id: systemSoundsContainer
            layout: StackLayout {
                orientation: LayoutOrientation.TopToBottom
            }
            topMargin: 100.0
            horizontalAlignment: HorizontalAlignment.Center
            DropDown {
                id: soundSelectorDropdown
                title: "Sound: "
                maxWidth: 600.0
                Option {
                    text: qsTr("Battery Alarm")
                    value: SystemSound.BatteryAlarm
                    selected: true
                }
                Option {
                    text: qsTr("Browser Start")
                    value: SystemSound.BrowserStartEvent
                }
                Option {
                    text: qsTr("Camera Shutter")
                    value: SystemSound.CameraShutterEvent
                }
                Option {
                    text: qsTr("Device Tether")
                    value: SystemSound.DeviceTetherEvent
                }
                Option {
                    text: qsTr("General Notification")
                    value: SystemSound.GeneralNotification
                }
            } // soundSelectorDropdown
            Button {
                id: systemSoundPlayButton
                text: qsTr("Play Selected System Sound")
                minWidth: 600.0
                onClicked: {
                    systemSound.play();
                }
            } // systemSoundPlayButton
        } // systemSoundsContainer
        // Part 2 of the sample: Playing custom sound files.
        Container {
            id: customSoundsContainer
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            topMargin: 100.0
            Button {
                id: customSoundPlayButton1
                text: qsTr("Play Sound 1")
                layoutProperties: StackLayoutProperties {
                    spaceQuota: 1.0
                }
                onClicked: {
                    // Here we could have created a second MediaPlayer object to
                    // use to play our sound, but instead we programmatically
                    // changed the sourceUrl property of the current myPlayer
                    // MediaPlayer object, and re-used it to play our sounds.
                    myPlayer.setSourceUrl("asset:///sounds/Doorbell_001.wav")
                    myPlayer.play()
                }
            } // customSoundPlayButton1
            Button {
                id: customSoundPlayButton2
                text: qsTr("Play Sound 2")
                layoutProperties: StackLayoutProperties {
                    spaceQuota: 1.0
                }
                onClicked: {
                    // Same as above, here we also could have created a second
                    // MediaPlayer object to use to play our sound, but instead
                    // we programmatically changed the sourceUrl property of the
                    // current myPlayer MediaPlayer object, and re-used it to
                    // play our sounds.
                    myPlayer.setSourceUrl("asset:///sounds/Doorbell_002.wav")
                    myPlayer.play()
                }
            } // customSoundPlayButton2
        } // customSoundsContainer
    } // mainContainer

    // The SystemSound and MediaPlayer objects are attached so
    // they can be used in our QML code to play sounds.
    attachedObjects: [        
        SystemSound {
            id: systemSound
            sound: soundSelectorDropdown.selectedValue
        },
        MediaPlayer {
            id: myPlayer
            // sourceUrl: < Set in the Button control's onClicked event handler. >
        }
    ] // Attached objects.
} 
```

来源：[https ://developer.blackberry.com/cascades/documentation/design/audio_video/playing_sounds_code_sample.html](https://developer.blackberry.com/cascades/documentation/design/audio_video/playing_sounds_code_sample.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:33:57.907

我怀疑系统声音在内部实际上是 .mp3 或 .ogg 文件，其中“ [Cowbell sample](https://github.com/blackberry/Cascades-Samples/tree/master/cowbell) ”和“ [Pull My Beard](https://github.com/blackberry/Cascades-Samples/tree/master/pullmybeard) ”使用的是 .wav 文件。这是一个已知问题，并且已在[此处](http://supportforums.blackberry.com/t5/Native-Development/Why-audio-is-so-difficult/td-p/2023171/page/2)和[此处](http://supportforums.blackberry.com/t5/Cascades-Development/Sound-on-the-Simulator/m-p/2097381/highlight/true#M11549)以及[此处](http://supportforums.blackberry.com/t5/Cascades-Development/Neither-c-nor-qml-media-player-sample-works-on-blackberry-10-Dev/m-p/2114375)的 Blackberry Developer 论坛上进行了讨论，模拟器没有正确的编解码器来播放除 .wav 文件之外的任何声音。声音应该在实际硬件上正确播放。

# r - R 在午夜 (00:00:00) 的时间日期时间的 strptime 给出 NA

> ID：14741271
> 
> 赞同：3
> 
> 时间：2013-02-07T00:02:05.313
> 
> 标签：r

R 的基本`strptime`功能给了我我没想到的输出。

这按预期工作：

```
strptime(20130203235959, "%Y%m%d%H%M%S")
# yields "2013-02-03 23:59:59" 
```

这个也是：

```
strptime(20130202240000, "%Y%m%d%H%M%S")
# yields "2013-02-03" 
```

**...但事实并非如此。为什么？**

```
strptime(20130203000000, "%Y%m%d%H%M%S")
# yields NA 
```

**更新**

该值`20130204000000`显示在我使用以下命令在 Mac 10.7.5 系统上生成的日志中：

```
➜  ~  echo `date +"%Y%m%d%H%M%S"`
20130204000000 
```

**更新 2**

我什至尝试过[lubridate](http://cran.r-project.org/web/packages/lubridate/)，这似乎是建议：

```
> parse_date_time(c(20130205000001), c("%Y%m%d%H%M%S"))
 1 parsed with %Y%m%d%H%M%S
[1] "2013-02-05 00:00:01 UTC"
> parse_date_time(c(20130205000000), c("%Y%m%d%H%M%S"))
1 failed to parse.
[1] NA 
```

...然后很有趣的是，当我添加足够的秒数`now()`以达到午夜时，它打印出“00:00:00”：

```
> now() + new_duration(13000)
[1] "2013-02-10 00:00:00 GMT" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:41:06.473

当我解析我的日期时，我应该使用`character`而不是：`numeric`

```
> strptime(20130203000000, "%Y%m%d%H%M%S")    # No!
[1] NA
> strptime("20130203000000", "%Y%m%d%H%M%S")  # Yes!
[1] "2013-02-03" 
```

The reason for this seems to be that my `numeric` value gets cast to `character`, and I used one too many digits:

```
> as.character(201302030000)
[1] "201302030000"
> as.character(2013020300000)
[1] "2013020300000"
> as.character(20130203000000)
[1] "2.0130203e+13"       # This causes the error: it doesn't fit "%Y%m%d%H%M%S"
> as.character(20130203000001)
[1] "20130203000001"      # And this is why anything other than 000000 worked. 
```

* * *

A quick lesson in figuring out the type you need from the docs: In R, execute `help(strptime)` and see a popup similar to the image below.

*   The **red** arrow points to the main argument to the function, but does not specify the type (which is why I just tried `numeric`).
*   The **green** arrow points to the type, which is in the document's *title*.

![enter image description here](../Images/a44597bae9607546561b790f89d87c99.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:05:16.663

你本质上是在要求“zeroeth”秒，这显然不存在:)

```
# last second of february 3rd
strptime(20130203235959, "%Y%m%d%H%M%S")

# first second of february 4rd -- notice this 'rounds up' to feb 4th
    # even though it says february 3rd
strptime(20130203240000, "%Y%m%d%H%M%S")

# no such second
strptime(20130204000000, "%Y%m%d%H%M%S")

# 2nd second of february 4th
strptime(20130204000001, "%Y%m%d%H%M%S") 
```

# xcode - 无法加载“ITunesSoftwareService”，因为它已损坏或缺少必要的资源。”

> ID：14741275
> 
> 赞同：2
> 
> 时间：2013-02-07T00:02:19.547
> 
> 标签：xcode

我看到其他人抱怨这个错误。就我而言，我能够将其追溯到 MacKeeper 的快速清理功能。

我可以通过以下测试反复重现该问题： 1\. 使用 Xcode 4.6 的工作版本，清理，为 OS 设备和存档构建：无错误 2\. 终止 Xcode 3\. 启动 MacKeeper。Scan 说有数百个“垃圾”文件。按“修复此问题”按钮。MacKeeper 尽其所能并报告全部为绿色。4\. 启动 Xcode。尝试清理、构建和存档。构建失败并出现以下错误：

2013-02-06 16:45:17.568 验证 [39540:f07] 无法在“file://localhost/Applications/Xcode.app/Contents/Applications/Application%20Loader.app/Contents/Frameworks/ITunesSoftwareService. framework/” (err = Error Domain=NSCocoaErrorDomain Code=3587 "无法加载捆绑包“ITunesSoftwareService”，因为它已损坏或缺少必要的资源。"

1.  这是令人沮丧的部分。解决此问题的唯一方法是重新安装 Xcode，Clean Build & Archive 现在可以再次使用。很明显，MacKeeper 正在删除它不应该删除的东西！

我已向 MacKeeper 报告此问题，但没有收到任何回复。今天我下载了最新的更新 2.4.1 并以相同的结果进行了测试 - 代码再次损坏。

其他人可以验证吗？我准备放弃踢 MacKeeper。

# php - MySQLi stmt num_rows 返回 0

> ID：14741280
> 
> 赞同：5
> 
> 时间：2013-02-07T00:02:57.957
> 
> 标签：php, mysql, mysqli

我在使用`$stmt->num_rows`PHP 时遇到问题，我不确定我做错了什么。`$stmt->num_rows`当它应该返回 1 时返回 0。在 phpMyAdmin 中执行查询时，查询*确实有效并返回 1 结果。*任何帮助将不胜感激。

```
public function get_login($username, $password)
{
    $query = "SELECT `id` FROM `users` WHERE `username` = ? AND `password` = ? LIMIT 1;";
    if($stmt = $this->prepare($query))
    {
        $stmt->bind_param('ss', $username, $password);
        if($stmt->execute())
        {
            $stmt->bind_result($id);
            $stmt->fetch();
            $stmt->store_result();
            if($stmt->num_rows > 0)
            {
                return $id;
            }
            return false;
        }
        return false;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T00:10:21.977

试试这个，调用第`store_result`一个，然后调用`fetch`结果。

```
public function get_login($username, $password)
{
    $query = "SELECT `id` FROM `users` WHERE `username` = ? AND `password` = ? LIMIT 1;";
    if($stmt = $this->prepare($query))
    {
        $stmt->bind_param('ss', $username, $password);
        if($stmt->execute())
        {
            $stmt->bind_result($id);
            $stmt->store_result();
            $stmt->fetch();          
            if($stmt->num_rows > 0)
            {
                return $id;
            }
            return false;
        }
        return false;
    }
    return false;
} 
```

# git - MAMP 和 Git git-http-push

> ID：14741283
> 
> 赞同：2
> 
> 时间：2013-02-07T00:03:09.573
> 
> 标签：git, mamp

我想要一个在我的 iMac 上运行的 git 服务器，可以远程访问（从工作或其他地方）。我完成了创建 git 存储库 (git init --bare) 的步骤，并且还打开了端口。我成功导入了 git 文件（里面什么都没有），但是当我进行本地更改（不是远程更改）并且我想将其推送到服务器时，它给了我这个错误（我替换了我的 ip）：

```
Pushing to http://name@[ip]:8888/gitprojects/test.git
error: Cannot access URL http://name@[ip]:8888/gitprojects/test.git/, return code 22
fatal: git-http-push failed 
```

我在互联网上搜索了解决方案，但没有找到使用 MAMP 解决此问题的解决方案。

# javascript - 通过javascript将参数传递给python函数

> ID：14741284
> 
> 赞同：1
> 
> 时间：2013-02-07T00:03:19.760
> 
> 标签：javascript, python

由于主要是后端人员，因此我不确定如何实现以下目标，因为它需要与浏览器进行一些交互。

所以，到目前为止，我有以下几点。

一种通信协议，其中服务器在 python 中，客户端在 javascript 代码中。最终，我希望我的数据能够访问该 javascript 代码。

现在，这些数据正在从浏览器中捕获。

作为一种实践..我想做的是..在我的浏览器上有两个单选按钮和一个提交按钮

```
 *radio A
  *radio B
  * Submit 
```

现在，当用户按下提交时，我想创建一个查询“用户提交：A（或 B）”，我可以在 python 脚本上捕获这个查询。

我不知道如何做到这一点。

我的猜测是“提交”调用了一个 python 脚本。但是，如果我的 python 服务器始终处于开启状态，我该如何解析从浏览器点击到该 python 服务器的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:11:49.193

这是它通常的工作方式：

1.  客户端（浏览器）访问网页并向服务器发起请求
2.  服务器（在您的情况下为 Python）处理请求并编写 HTML 响应，包括单选按钮表单
3.  客户端填写表单并点击提交，触发对服务器的另一个请求
4.  服务器处理第二个请求并写入另一个响应（例如“购买成功”、“消息已发布”等）。

请注意，第二个请求是一个全新的请求。您可能需要某种方式将第一个请求链接到第二个请求，除非第二个请求是匿名的。一些框架会为您做到这一点，但如果您从头开始制作服务器，您将需要某种会话机制来跟踪状态。

要让客户端发出第二个请求，最简单的方法是向HTML 中的元素添加适当`action`的`method`属性。指定表单请求要访问的 URL，可以是或。（更高级的用法，例如在这个站点上，通常使用 AJAX 来代替提交）。`form``action``method``GET``POST`

# jquery - jQuery一次循环两个元素

> ID：14741285
> 
> 赞同：2
> 
> 时间：2013-02-07T00:03:23.440
> 
> 标签：jquery, loops, jquery-selectors

我有一个这样的列表：

```
<div id="post-1" class="post"></div>
<div id="post-2" class="post"></div>
<div id="post-3" class="post"></div>
<div id="post-4" class="post"></div>
<div id="post-5" class="post"></div> 
```

我想选择#post-1 AND #post-2，然后做点什么。然后选择#post-3 AND #post-4 并做某事，然后抓住最后一个并做某事。这将超过很多 div，所以我需要它是某种循环。

伪代码是这样的：

```
var maxHeight = 0;
jQuery('.post-block:two-at-time').each(function(){
     var height = jQuery(this).height();
     if( height > maxHeight) {
          maxHeight = height;
     }
});
jQuery('.post-block:two-at-time').height(maxHeight); 
```

关于如何最好地做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:19:41.723

```
var $post = $('.post'),
    $even = $post.filter(':even'),
    $odd = $post.filter(':odd')

    for (var i = 0; i < $even.length; i++) {
        var $a = $even.eq(i).add( $odd.eq(i) );
        // ... ?
    } 
```

[http://jsfiddle.net/E3kbP/](http://jsfiddle.net/E3kbP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:11:51.633

这可能不是最干净的方式，但您可以使用普通`for`循环来迭代您的最小值/最大值，然后使用`.slice`：

```
for (var start = 0, end = 2; start < $(".post").length; start += 2, end += 2) {
    jQuery('.post').slice(start, end).each(function () { 
```

[http://jsfiddle.net/ExplosionPIlls/EJY5W/](http://jsfiddle.net/ExplosionPIlls/EJY5W/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:21:14.873

也许它会这样工作..

```
for( var id = 2; id < $('.post').length; id=id+2){
     var height = $('post-'+(id-1)).height() + $('post-'+id).height(); // I guess this way should work
     if( height > maxHeight) {
          maxHeight = height;
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T00:47:12.817

这也会将`.post`元素按两个分组，查找正确的一个`maxHeight`，然后将所有元素的高度设置为`maxHeight`..

```
var count = maxHeight = 0;
$('.post').each(function ()
{
    if (count % 2 == 0)
    {
        var even = $(this).height(); odd = $(this).next('div').height();
        if(even > maxHeight || odd > maxHeight)
            (even >= odd) ? maxHeight = even : maxHeight = odd;
    }
    count++;
}).css('height', maxHeight); 
```

# c++ - 需要 C++ 函数的帮助来解析/显示 XML 序列化

> ID：14741286
> 
> 赞同：0
> 
> 时间：2013-02-07T00:03:27.070
> 
> 标签：c++, xml, parsing, xml-parsing, xml-serialization

我需要一些帮助才能使我的 XML 序列化正常工作。现在我有两个函数可以逐个字符地读取我的 XML 文件。现在他们成功地检测和存储元素以及将元素的内容存储为变量。我有函数打印元素的层次结构，它们成功地显示了它们包含的内容。

我的问题：我无法获得正确识别元​​素结束标签的功能！例如，当解析到元素结束标记时，它会将其检测为元素而不是元素的结尾。

**对不起所有的文字和代码的长度。我试图尽可能彻底。先谢谢了！**

这是编译和运行代码时显示的内容。注意 hot 有一些元素不等于：

```
XML.World.Item.name = silver key
XML.World.Item.properties.property = metal
XML.World.Item.properties.property = silver
XML.World.Item.properties = 
XML.World.Item.weight = 1
XML.World.Item.displayChar = )
XML.World.Item.value = 10
XML.World.Item.rarity = 5
XML.World.Item = 
XML.World.Creature.name = orc
XML.World.Creature.properties.property = orcish
XML.World.Creature.properties.property = humanoid
XML.World.Creature.properties = 
XML.World.Creature.level = 2
XML.World.Creature.maxHP = 15
XML.World.Creature.displayChar = o
XML.World.Creature = 
XML.World = 
```

* * *

**我的 XML 文件名为 world.xml，这是它包含的 XML 代码：**

```
<?xml version="1.0" encoding="UTF-8"?>
<World>
<Item>
<name>silver key</name>
<properties>
<property>metal</property>
<property>silver</property>
</properties>
<weight>1</weight>
<displayChar>)</displayChar>
<value>10</value>
<rarity>5</rarity>
</Item>
<Creature>
<name>orc</name>
<properties>
<property>orcish</property>
<property>humanoid</property>
</properties>
<level>2</level>
<maxHP>15</maxHP>
<displayChar>o</displayChar>
</Creature>
</World> 
```

* * *

**这是我正在使用的代码 - XMLSerialization.h、XMLSerialization.cpp 和 main.cpp：**

**XMLSerialization.h**

```
#include <iostream>
#include <string>
#include <fstream>

class XMLSerialization {

public:
    virtual bool parseElement(std::istream & xmlFile, std::string hierarchy$
    virtual bool parseXML(std::istream & xmlFile);

private:
    //none
}; 
```

**XMLSerialization.cpp**

```
#include "XMLSerialization.h"
#include <string>

using namespace std;
bool XMLSerialization::parseElement(istream & xmlFile, string hierarchy){
    char c; // the character as we reach it
    string elementName;

    //reads char by char, checking for '>' at the end of the tag

    do {
        c = xmlFile.get();
        if (c != '>')
            elementName.push_back(c);
    }
    while (c != '>');

    string content; //holds the non-element content of the element

    while (true){
            c = xmlFile.get();
            if (c == '<'){
                    if (xmlFile.peek() == '/'){
                            xmlFile.get();
                            string endTag; //holds the end tag as its read

                            while(c != '>'){
                                    c = xmlFile.get();
                                    if (c != '>'){
                                            endTag.push_back(c);
                                    }
                            }

                            if (endTag != elementName){
                                cout<<"Tag name mismatch! "<<endTag<<
                                            " differs from "<<elementName
                                            <<"."<<endl;
                                    return false;
                            }

                            //output what is known. Where we are in the
                            //file, current element, and its content
                            cout<<hierarchy<<"."<<elementName<<" = "<<
                                    content<<endl;
                            return true;
                    }
                    else {
                            //read in '<' and was NOT an end tag. c is at
                            //the first char after < so function calls
                            //on itself again. Passing hierarchy and current
                            //element name so next element knows where it
                            //is in the xmlFile.
                            if (!parseElement(xmlFile, hierarchy + "." + el$
                                    return false;
                            }
                    }
            }

            else {
                    //c is not '<' so its content. Also ignores EOL
                    if (c != '\n'){
                                content.push_back(c);
                    }
            }
    }

    return true;
}

// checks for a valid XML Header
bool XMLSerialization::parseXML(istream & xmlFile){
    char c; // char to hold the character as we reach it

    //get character while the character != '<'
    do {
            c = xmlFile.get();
    }
    while (c != '<');

    //checks the character after the '<'
    if (xmlFile.get() != '?'){
            cout<<"Invalid XML Header! Does not begin with '<?'"<<endl;
            return false;
    }
   //continues through header look for '?'
    do {
            c = xmlFile.get();
    }
    while (c != '?');

    // checks for the header ending with ?>
    if (xmlFile.get() != '>'){
            cout<<"Invalid XML Header! Does not end with '?>'"<<endl;
            return false;
    }

    // go through character until the first tag after the header
    do {
            c = xmlFile.get();
    }
    while (c != '<');

    // at the first character after the opening '<' of the tag
    // call parseElement
    return parseElement(xmlFile, "XML");
} 
```

**主文件**

```
#include "XMLSerialization.h"
#include <fstream>
#include <iostream>
using namespace std;

int main(int argc, char * argv[]){
    cout<<"________________________"<<endl;
    cout<<"XML TESTING"<<endl<<"________________________"<<endl<<endl;
    ifstream xmlFile;
    xmlFile.open("world.xml");
    XMLSerialization test;
    test.parseXML(xmlFile);
    xmlFile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:08:14.780

出于对所有神圣事物的热爱，请使用适当的 XML 解析器。你会很高兴你做到了。我强烈推荐[libxml2](http://xmlsoft.org)。

# list - 如何从列表中删除相似但不重复的项目？

> ID：14741287
> 
> 赞同：0
> 
> 时间：2013-02-07T00:03:28.443
> 
> 标签：list, python-3.x

我有一个清单：

```
values = [[6.23234121,6.23246575],[1.352672,1.352689],[6.3245,123.35323,2.3]] 
```

有什么方法可以浏览此列表并将**0.01**范围内的所有项目删除到同一列表中的其他元素。

我知道如何使用 del 对一组特定的列表执行此操作，但我希望它是**通用**的，如果值中有 n 个列表并且每个列表有 n 个元素。

我想要发生的是在这个列表上执行一些操作

```
values = [[6.23234121,6.23246575],[1.352672,1.352689],[6.3245,123.35323,2.3]] 
```

并得到这个输出

```
new_values = [[6.23234121],[1.352672],[6.3245,123.35323,2.3]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:32:16.743

我将为单个列表编写一个函数来执行此操作，例如

```
>>> compact([6.23234121,6.23246575], tol=.01)
[6.23234121] 
```

然后，您可以通过 just 让它在您的嵌套结构上工作`[compact(l) for l in lst]`。

这些方法中的每一个都将保留列表中没有任何更接近它的第一个元素；对于@DSM 的示例，`[0, 0.005, 0.01, 0.015, 0.02]`它们都会返回`[0, 0.0.15]`（或者，如果您切换`>`到`>=`, `[0, 0.01, 0.02]`）。如果您想要不同的东西，则必须更仔细地准确定义它。

* * *

首先，简单的方法，类似于大卫的回答。这是 O(n^2)：

```
def compact(lst, tol):
    new = []
    for el in lst:
        if all(abs(el - x) > tol for x in new):
            new.append(el)
    return compact 
```

* * *

在三元素列表上，这非常好。但是，如果您想在三百万个元素的列表上执行此操作，那将不会减少它。让我们尝试一些不同的东西：

```
import collections
import math

def compact(lst, tol):
    round_digits = -math.log10(tol) - 1
    seen = collections.defaultdict(set)
    new = []
    for el in lst:
        rounded = round(seen, round_digits)
        if all(abs(el - x) > tol for x in seen[rounded]):
            seen[rounded].add(el)
            new.append(el)
    return new 
```

如果你`tol`是`0.01`，那么`round_digits`是 1。所以`6.23234121`被索引`seen`为 just `6.2`。当我们看到`6.23246575`时，我们将其四舍五入`6.2`并在索引中查找，该索引应包含所有可能在`tol`我们正在查找的数字范围内的数字。然后我们仍然必须检查与这些数字的距离，但只检查该索引箱中的极少数数字，而不是整个列表。

这种方法是 O(nk)，其中 k 是落在一个这样的 bin 内的平均元素数。仅当 k << n （通常是这样，但这取决于您使用的相对于 的数字的分布）时才会有帮助`tol`。请注意，它使用的内存可能是其他方法的两倍多，这对于非常大的列表可能是个问题。

* * *

另一种选择是先对列表进行排序；那么您只需查看前面和后面的元素即可检查是否存在冲突。

# ruby-on-rails - 如何配置 Cygwin 以使用 PATHEXT 环境变量进行搜索？

> ID：14741290
> 
> 赞同：0
> 
> 时间：2013-02-07T00:03:52.677
> 
> 标签：ruby-on-rails, ruby, windows, cygwin

我正在尝试在 Cygwin 下运行 Rails，但是当我输入“rails -v”时，它会找到“rails”并引发错误。当我输入“rails.bat -v”时，它工作得很好。两者都可以在本机 Windows 命令处理器中正常工作，因为它使用 PATHEXT 来识别像 .BAT 这样的可执行文件。

我在 .bash_profile 中添加了一行，如下所示，它正在设置变量，据我所知。

```
export PATHEXT=".RB;.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC" 
```

这是我的输出：

```
$ echo $PATH
/usr/local/bin:/usr/bin:/cygdrive/c/Program Files/Common Files/Microsoft Shared/Windows Live:/cygdrive/c/Program Files (x86)/Common Files/Microsoft Shared/Windows Live:/cygdrive/c/Program Files (x86)/NVIDIA Corporation/PhysX/Common:/cygdrive/c/Windows/system32:/cygdrive/c/Windows:/cygdrive/c/Windows/System32/Wbem:/cygdrive/c/Program Files/WIDCOMM/Bluetooth Software:/cygdrive/c/Program Files/WIDCOMM/Bluetooth Software/syswow64:/cygdrive/c/Program Files (x86)/Windows Live/Shared:/cygdrive/c/Program Files/Intel/WiFi/bin:/cygdrive/c/Program Files/Common Files/Intel/WirelessCommon:/cygdrive/c/Program Files/Microsoft Windows Performance Toolkit:/cygdrive/c/Program Files (x86)/QuickTime/QTSystem:/cygdrive/c/Windows/System32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files/Microsoft/Web Platform Installer:/cygdrive/c/Program Files/7-Zip:/cygdrive/d/sysinternals:/cygdrive/d/batch:/cygdrive/d/Program Files/Sublime Text 2:/cygdrive/d/RailsInstaller/Ruby1.9.3/bin:/cygdrive/d/RailsInstaller/Git/cmd:/cygdrive/d/RailsInstaller/Git/bin:/usr/bin:/cygdrive/d/batch

 18:54~
$ echo $PATHEXT
.RB;.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC

 18:54~
$ which rails
/cygdrive/d/RailsInstaller/Ruby1.9.3/bin/rails

 18:54~
$ which rails.bat
/cygdrive/d/RailsInstaller/Ruby1.9.3/bin/rails.bat

 18:55~
$ rails -v
D:\RailsInstaller\Ruby1.9.3\bin\ruby.exe: No such file or directory -- /cygdrive/d/RailsInstaller/Ruby1.9.3/bin/rails (LoadError)

 18:55~
$ rails.bat -v
Rails 3.2.11

 18:55~
$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:19:05.313

看起来您正在使用[Railsinstaller](http://railsinstaller.org/) ruby​​ 二进制文件，它基本上是[RubyInstaller](http://rubyinstaller.org/)的重新分发，捆绑了 Rails 开发的一些必需品。

但是，一切实际上都按预期工作。

Cygwin 不会使用`PATHTEXT`，因为它不需要。换句话说，它将调用`rails`binstub 而不是`rails.bat`批处理文件。由于`hashbang`binstubs 中有一个，cygwin 自己处理整个执行过程。

此外，RubyInstaller 发行版没有为 Cygwin 编译。所以`ruby.exe`不明白 Cygwin 路径的查找。这就是为什么你得到一个`LoadError`.

在我看来，您可能应该查看[Luis Lavena 对类似问题的回答](https://stackoverflow.com/a/12252443/527152)。但是，如果您真的想这样做，您可以在 Cygwin 中重新编译 Ruby 或获取 Cygwin Ruby 发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T01:50:03.170

（在使用 RailsInstaller 的 Windows 中）对我来说，唯一的方法是在安装路径中添加和别名。

```
alias rails='C:/RailsInstaller/Ruby1.9.3/bin/rails' 
```

一旦我在 cygwin 终端中输入它，它就可以正常工作。

# javascript - 如何检查 CSS 背景颜色是否为白色？

> ID：14741291
> 
> 赞同：1
> 
> 时间：2013-02-07T00:03:56.477
> 
> 标签：javascript, jquery, css, colors

我需要这个：

```
$('*').each(function() {
        if($(this).css("background-color") == "#ffffff") {
           $(this).css("background-color") == "#000000"
        }
    });​​​​ 
```

工作 onclick 一个类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:11:30.503

即使它是正确的（它不是），它也是不可靠的并且不太可能工作。原因是有几种显示白色的方法：

*   `white`
*   `#ffffff`及其所有 64 个案例组合
*   `#fff`及其所有 8 个案例组合
*   `rgb(255,255,255)`以及值之间任意空格的所有 ∞ 组合
*   `rgba(255,255,255,1)`以及值之间任意空格的所有 ∞ 组合

你可以这样检查：

```
if( $(this).css("background-color").match(/^(?:white|#fff(?:fff)?|rgba?\(\s*255\s*,\s*255\s*,\s*255\s*(?:,\s*1\s*)?\))$/i))
    this.style.backgroundColor = "#000"; 
```

# javascript - 根据当前查看的 div 更改按钮的 id

> ID：14741293
> 
> 赞同：0
> 
> 时间：2013-02-07T00:04:13.207
> 
> 标签：javascript, jquery, html

我有一个让我发疯的问题。我试图解释...我有一个很长的滚动页面，大约有 10 个 div，一个在另一个之下（之间没有空格）。查看端口的底部是一个带有 id 和位置的按钮：固定。当我向上或向下滚动时，按钮是固定的，而 div 向上或向下移动。我想在按钮上有不同的 id，具体取决于查看端口中的 div 层。这意味着如果一个 divlayer 填充了超过 50% 的可用空间，则按钮的 href 应该更改...我尝试了 inview.js，但问题是，2 个 div 同时具有 inview 类...

我当前的代码：

```
$('#div4, #div5, #div6').bind('inview', function (event, visible) {
        if (visible == true) {
        $(this).addClass("inview");

        } else {

        $(this).removeClass("inview");
        }
    });

var $div4 = $('#div4');

if($div4.hasClass("inview")){
    $('#button1').attr('id', 'button2'); 
  } 
```

你看，按钮在视口中的每个 div 都有一个新的 id。你们有人有解决办法吗？谢谢泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:33:41.960

您可以在添加之前尝试删除`inview`该类.. 像这样的东西：

```
var $divs = $('#div4,#div5,#div6';
$divs.bind('inview', function (event, visible) {
        $divs.not(this).removeClass("inview");
        if (visible == true) {
          $(this).addClass("inview"); 
        }
     }); 
```

另一个建议是使用 Waypoints 插件并在 div 超过 50% 标记时触发。

唯一困难的部分是，根据您需要选择当前 div 或上述 div 的方向。

插件：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

演示：http: [//jsfiddle.net/lucuma/nFfSn/1/](http://jsfiddle.net/lucuma/nFfSn/1/)

代码：

```
 $('.container div').waypoint(function (direction) {
        if (direction=='up')
            alert('hit ' + $.waypoints('above')[$.waypoints('above').length-2].id);
        else
            alert('hit ' + $(this).attr('id'));  
    }, {
        offset: $.waypoints('viewportHeight') / 2

}); 
```

# php - 提交错误时如何重定向到带有错误消息的注册页面

> ID：14741298
> 
> 赞同：0
> 
> 时间：2013-02-07T00:04:40.397
> 
> 标签：php, registration, user-input

我正在尝试创建一个注册表单，以检查用户输入的电子邮件和密码是否匹配，所有表单是否完整，以及该电子邮件是否以前用于注册。当实际上有错误时，我希望代码在注册表顶部显示错误消息。

但是，我无法弄清楚如何使错误消息显示在注册输入上方。相反，发生的情况是错误消息替换了注册输入并单独出现（要求用户刷新页面以再次尝试注册）。这是我在 stackoverflow 上的第一篇文章，如果我的编码术语不正确，请见谅！下面是我一直在尝试使用的代码。

```
<?php

// Connect to database server
mysql_connect("localhost", "root") or die (mysql_error ());

// Select database
mysql_select_db("mydatabase") or die(mysql_error());

    //Checks to make sure form has been submitted
    if (isset($_POST['submit'])) { 

//Checks to make sure all fields are complete
if (!$_POST['FirstName'] | !$_POST['LastName'] | !$_POST['Username']| !$_POST['Username2']| !$_POST['Password']| !$_POST['Password2'] ) {
    die('You did not complete all of the required fields');
}

//Check to see if email has already been used to reigster
if (!get_magic_quotes_gpc()) {
    $_POST['Username'] = addslashes($_POST['Username']);
}

$usercheck = $_POST['Username'];

$check = mysql_query("SELECT Username FROM people WHERE Username = '$usercheck'") 
or die(mysql_error());

$check2 = mysql_num_rows($check);

//Email has already been used to register message
if ($check2 != 0) {
    die('Sorry, the Email '.$_POST['Username'].' has already been used to register.');
}

//Confirm that Emails match
if ($_POST['Username'] != $_POST['Username2']) {
    die('The Email addresses you entered do not match. ');
}

//Confirm that passwords match
if ($_POST['Password'] != $_POST['Password2']) {
    die('The passwords you entered do not match. ');
}

//Encrypt the password and add slashes if needed
$_POST['Password'] = md5($_POST['Password']);
if (!get_magic_quotes_gpc()) {
    $_POST['Password'] = addslashes($_POST['Password']);
    $_POST['Username'] = addslashes($_POST['Username']);
    }

    // now we insert it into the database
$insert = "INSERT INTO people(FirstName,LastName,Username,Password) VALUES ('" . $_POST["FirstName"] . "','" . $_POST["LastName"] . "','" . $_POST["Username"] . "','" . $_POST["Password"] . "')";

$add_member = mysql_query($insert);
?> 
```

# 挂号的

谢谢，您已注册 - 您现在可以登录了。

```
 <?php 
    } 
    else 
    {   
    ?>
    <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
        <table border="0">
            <tr><td>First Name:</td><td>
                <input type="text" name="FirstName" maxlength="60">
            </td></tr>
            <tr><td>Last Name:</td><td>
                <input type="text" name="LastName" maxlength="60">
            </td></tr>
            <tr><td>Email Address:</td><td>
                <input type="text" name="Username" maxlength="60">
            </td></tr>
            <tr><td>Confirm Email Address:</td><td>
                <input type="text" name="Username2" maxlength="60">
            </td></tr>
            <tr><td>Password (8 character minimum):</td><td>
                <input type="password" name="Password">
            </td></tr>
            <tr><td>Confirm Password:</td><td>
                <input type="password" name="Password2">
            </td></tr>
            <tr><th colspan=2>
        <input type="submit" name="submit" value="Register"></th></tr> </table>
    </form>
    <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:02:46.173

正如我在上面的评论中提到的，几乎每一行代码都有一些不好的做法。这是一个快速的总结。

*   正如 Geek Num 88 所述，您应该使用 PDO 或 mysqli。有关链接，请参见上面的评论。
*   假设 ext/mysql`addslashes`不足以转义值。也不靠`get_magic_quotes_gpc`。适当的功能是`mysql_real_escape_string`。但是，从前一点来看，您也不应该使用它。使用参数化查询，无需任何形式的转义。
*   编码时，最好将其放在`error_reporting(-1);`文件的顶部。这将迫使您对标准进行更严格的编码。
*   您在比较中使用按位或`|`而不是`||`. 如果您不知道“按位或”的含义，请使用`||`.
*   而不是这样做`if (!$_POST['FirstName'])`，您应该检查它是否已设置，然后使用检查它是否为空`strlen()`
*   不要`die()`为每个错误做，而是将它们附加到一个数组并在最后迭代它。使用`die()`很糟糕，因为可能会发生不止一个错误，然后用户将不得不多次填写表单，而且如果您省略出现在底部的正常页脚，您的 HTML 可能不再有效页。
*   看在上帝的份上，不要`md5`用于散列密码。您不妨将它们存储为纯文本。而是使用[bcrypt](https://stackoverflow.com/a/6337021/811240)。
*   永远不要回`$_SERVER['PHP_SELF']`显到浏览器，因为这会使您的脚本容易受到 XSS 攻击。

所以要真正回答你的问题，这就是我要做的：

1.  查看表格是否已发布。这可以通过 HTML 中的隐藏字段来完成。如果已设置，请进行验证
2.  遍历所有可能的错误并将所有错误附加到数组中。说，`$errors[]`。
3.  如果存在错误，请将其回显给用户
4.  如果没有错误，安全地散列密码并将所有值存储在数据库中
5.  成功后将浏览器重定向到某种成功页面。这可以防止用户推送刷新和重新提交表单。
6.  如果表单尚未提交或出现错误，请显示仍填充任何值的表单，以便他们不必再次填写或退回

# serialization - HTTPClient.PostAsync 忽略 XmlMediaTypeFormatter 序列化属性

> ID：14741306
> 
> 赞同：1
> 
> 时间：2013-02-07T00:05:18.587
> 
> 标签：serialization, httpwebrequest

我正在使用一个看起来像这样的现有 xsd（为了简洁而缩短）：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://www.mycompany.com/Widgets"
    xmlns="http://www.mycompany.com/Widgets"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified">
  <xs:element name="Widget" type="WidgetDefinition" />
  <xs:complexType name="WidgetDefinition">
    <xs:sequence>
        <xs:element name="name" type="xs:string"/>
    </xs:sequence>
  </xs:complexType> 
</xs:schema> 
```

当你通过**xsd.exe**运行它时，你会得到一个类定义，如：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.mycompany.com/Widgets")]
[System.Xml.Serialization.XmlRootAttribute("Widget", Namespace="http://www.mycompany.com/Widgets", IsNullable=false)]
public partial class WidgetDefinition {
    private string nameField;

    public string Name {
      get {
          return this.nameField;
      }
      set {
          this.nameField = value;
      }
    }
} 
```

快进...我正在使用**HTTPClient 发布**到 REST 服务。这里的代码非常简单。

```
var widget = new WidgetDefinition();
// do something here to hydrate widget
var httpClient = new HttpClient();
return httpClient.PostAsync<WidgetDefinition>(
    uri, terminatedCall, new XmlMediaTypeFormatter()); 
```

在接收端，我想获取请求有效负载并将其转换回 WidgetDefinition 对象。如果您使用以下命令检查请求内容：

```
request.Content.ReadAsStringAsync().Result 
```

xml 看起来像：

```
<WidgetDefinition xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://schemas.datacontract.org/2004/07/\">
... 
```

基于生成类的`XmlTypeAttribute`and属性，我希望它看起来像：`XmlRootAttribute``WidgetDefinition`

```
<Widget xmlns:i=\"http://www.mycompany.com/Widgets\">
... 
```

当序列化发生在发送端时，似乎`XmlTypeAttribute`和属性被忽略了。`XmlRootAttribute`

任何线索可能导致这种情况？

编辑：如果我使用 XmlSerializer 手动序列化它，它会遵循 WidgetDefinition 类的序列化属性。我认为我的问题与传递给 PostAsync 调用的格式化程序有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:23:53.707

由此看来`xmlns=\"http://schemas.datacontract.org/2004/07/\"`，您的 REST 服务配置为使用 DataContractSerializer（WCF 服务中的默认值）而不是 XmlSerializer。

您可以将您的服务配置为使用 XmlSerializer ，这至少可以让您走得更远：

[http://msdn.microsoft.com/en-us/library/ms733901.aspx](http://msdn.microsoft.com/en-us/library/ms733901.aspx)

# r - 如何在 R 中使用 gfile 指定文件路径后立即更新 gedit 框，使用 gWidgetsRGtk2

> ID：14741307
> 
> 赞同：2
> 
> 时间：2013-02-07T00:05:29.467
> 
> 标签：r, user-interface, gwidgets

我正在尝试为`gWidgetsRGtk2`我用 R 编写的程序创建一个 GUI。我的 GUI 有一个`gedit()`文本框，用户可以在其中键入要放入程序中的输入数据文件的文件路径。它还有一个“浏览”按钮，单击该按钮会打开一个`gfile()`框，以便他们可以浏览所需的文件。在用户使用“浏览”按钮选择他们的文件后，我遇到的问题是更新我的`gedit()`框中的值。下面的代码可能会使这一点更清楚：

```
dir <- getwd()
sfilepath <- paste0(dir,"/")
win = gwindow("Set Parameters:",width=400,height=550)
nb = gnotebook(cont=win)
tab2 <- glayout(cont=nb, label = "Advanced Settings")
tab1 <- glayout(cont=nb, label = "Basic Settings")
tab1[2,2] <- glabel("BD:",cont=tab1)
tab1[2,4:5] <- gedit(1,cont=tab1)
addhandlerkeystroke(tab1[2,4],handler=function(h,...){BD <<- as.numeric(svalue(h$obj))})
tab1[3,2:5] <- gseparator(cont=tab1)
tab1[4,2:5] <- glabel("File path:",cont=tab1)
tab1[5,2:4] <- gedit(paste0(dir,"/"),cont=tab1)
tab1[5,5] <- gbutton(text="Browse", handler=function(h,...){ gfile("Select a file",type="open", filter = list("text files" = list(patterns = c("*.csv","*.txt")), "R files" =list(patterns = c("*.R","*.Rdata"))), handler = function(h,...){ sfilepath <<- h$file},cont=TRUE)},cont=tab1)
addhandlermousemotion(tab1[5,2],handler=function(h,...){svalue(h$obj) <- sfilepath}) 
```

到目前为止，我已经尝试使用，如上面的代码所示，因此只有当您将鼠标移到框本身上时才会更新框中`addhandlermousemotion`的文本。`gedit()`但是，如果框中的文本立即更新，我会更喜欢它。

我也试过用`addhandleridle()`, 间隔 1 秒，这样框内的文字就会每 1 秒自动更新一次。这行得通。但是，无法正确输入该框，因为在保存正在输入的新“sfilepath”之前，文本框已使用旧的“sfilepath”更新。

我是 GUI 制作的初学者（我已经编写了一个工作程序，但是一旦我离开它就需要其他人使用，所以上周五决定我应该弄清楚如何将它制作成 GUI）。因此，任何人都可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:46:45.990

这是您想要的模式（将处理程序传递给 gfilebrowse）：

```
w <- gwindow("test")
g <- ggroup(cont=w, horizontal=FALSE)
file_upload <- gfilebrowse(cont=g, handler=function(h,...) {
  svalue(e) <- svalue(h$obj)
})
e <- gedit("", cont=g) 
```

# javascript - document.all 到 document.getElementById

> ID：14741312
> 
> 赞同：0
> 
> 时间：2013-02-07T00:05:52.517
> 
> 标签：javascript, getelementbyid

我在一个旧网站上遇到了这个问题。如何将 document.all 转换为 document.getElementById ？

谢谢

```
function _contsetValue(item,vl){

var _item=document.all._cnt_item[item];

_item.style.backgroundImage='url(' + skin_image[23].src + ')'
_item.style.color="#000000";
_item.innerHTML= (item+1) + " " + vl;

var _cnt=document.getElementById('_contbase');
if ( (item+1) > _cntxx){
    _cnt.scrollLeft=(65*(item));
    _cntxx+=7;
}
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:10:48.967

`document.all[ID]`就像`document.getElementById(ID)`你想要的一样

# android - Android：从内部 XML 填充 ListView

> ID：14741315
> 
> 赞同：0
> 
> 时间：2013-02-07T00:06:04.280
> 
> 标签：android, xml, listview

我发现这个教程正是我需要的： [http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

问题是 ListView 是从在 URL 上找到的 XML 填充的。我必须改变什么才能从内部 XML 加载列表项（图像+文本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:26:00.187

“内部”xml 是什么意思？
您的 XML 文件是在 SD 卡上还是作为原始资源编译到您的应用程序中？

看看这些链接：

[从 sdcard 读取 .xml 文件](https://stackoverflow.com/questions/9260454/reading-an-xml-file-from-sdcard)

[Android：从本地资源读取 XML（用于测试）](https://stackoverflow.com/questions/5111735/android-reading-xml-from-local-resource-for-testing)

您需要更改的代码行是：

```
String xml = parser.getXmlFromUrl(URL); // getting XML from URL 
```

# java - oc4j 如何从主题设置用户主体？

> ID：14741317
> 
> 赞同：0
> 
> 时间：2013-02-07T00:06:16.480
> 
> 标签：java, authentication, oc4j

我有一个旧版 web 应用程序，它当前在 servlet 中对用户进行身份验证。也就是说，它从 servlet 调用 LoginContext.login()。

作为升级的一部分，我想通过 web.xml 文件添加使用声明式身份验证的新网页。我希望旧网页继续使用 servlet 身份验证。最后，我将重做旧网页以使用新的身份验证。

但是，新页面不会继承从 servlet 完成的身份验证。它们以未经身份验证的形式出现，请求中没有 userPrincipal。

使用现有的 servlet，我最终得到了一个主题。有什么方法可以调用一些东西，以便 OC4J 将用户主体设置为主题的一个主体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:03:04.923

找到了：

```
 // http://docs.oracle.com/html/E13977_01/authoriz.htm#BABHJJCJ
  // oc4jclient.jar, oc4j-unsupported-api.jar
  oracle.oc4j.security.Security.setSubject(subject, Longevity.SESSION); 
```

# php - 在 jQuery mobile 中启动 Javascript

> ID：14741321
> 
> 赞同：0
> 
> 时间：2013-02-07T00:06:40.380
> 
> 标签：php, javascript, jquery, jquery-mobile

有人可以告诉我如何在每个页面中启动 javscript 吗？如果您有任何问题，请告诉我。我听从了[http://jquerymobile.com/demos/1.2.0/docs/api/events.html的建议](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

[http://jsbin.com/ikemuh/3/](http://jsbin.com/ikemuh/3/)

```
<!DOCTYPE html>
<html>
<head>
<link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<meta charset=utf-8 />
<script>

function updateClock ( )
{
var currentTime = new Date ( );
var currentHours = currentTime.getHours ( );
var currentMinutes = currentTime.getMinutes ( );

// Pad the minutes and seconds with leading zeros, if required
currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;

// Choose either "AM" or "PM" as appropriate
var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";

// Convert the hours component to 12-hour format if needed
currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;

// Convert an hours component of "0" to "12"
currentHours = ( currentHours == 0 ) ? 12 : currentHours;

// Compose the string for display
var currentTimeString = currentHours + ":" + currentMinutes + " " + timeOfDay;

$("#clock").html(currentTimeString);

}
$(document).bind('pageinit', function() {
setInterval('updateClock()', 1000);
});
</script>

<title>Clock</title>
</head>
<body onload="updateClock(); setInterval('updateClock()', 1000 )">
<div data-role="page" id="page1">
<div data-role="header">
<h1><span id="clock">&nbsp;</span></h1>
</div>
<div data-role="content">
<p>Content<br/>
<a data-role="button" href="#page2">Finished!</a>
</p>
</div>
</div>
<div data-role="page" id="page2">
<div data-role="header">
<h1><span id="clock">&nbsp;</span></h1>
</div>
<div data-role="content">
<p>Content<br/>
<a data-role="button" href="#page3">Finished!</a>
</p>
</div>
</div>
<div data-role="page" id="page3">
<div data-role="header">
<h1><span id="clock">&nbsp;</span></h1>
</div>
<div data-role="content">
<p>Content<br/>
<a data-role="button" href="#page1">Finished!</a>
</p>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:12:00.487

您正在寻找与 jQuery 的普通 onDOMReady ( `$(function() {})`) 稍有不同的事件。看看[文档的这一页](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)。具体来说：

```
$(document).bind('pageinit', function() {
  //call to any JavaScript you want to run when your view is initialized
}); 
```

查看您的代码，我发现您实际上需要进行一些更改（这里是一个[演示](http://jsbin.com/ikemuh/5)）。首先我切换到`pageshow`，其次，因为您实际上有 3 个跨度，其 id 为 ' `Clock`' 我切换到一个类 (`ID`应该在文档中是唯一的，并且因为 jQuery Mobile 使用单个文档来表示您需要请特别注意您的元素选择器。我更新了 JavaScript 以查找一个类（因此它更改了所有三个跨度），最后我替换了 setInterval：

```
setInterval('updateClock()', 1000); 
```

对此：

```
setInterval(updateClock, 1000); 
```

因为[eval 是邪恶的](http://www.jslint.com/lint.html#evil)

# javascript - JSON、Codeigniter、Highcharts 和 AJAX

> ID：14741325
> 
> 赞同：1
> 
> 时间：2013-02-07T00:07:00.423
> 
> 标签：javascript, ajax, json, codeigniter, highcharts

我正在使用 CI (+HMVC) 在表单上显示带有 ajax 事件的 Highcharts。

我的 pb 是为图表创建有效系列。我必须从 mysql DB 创建 6 个系列。我的图表代码 [在使用 jquery 调用 json arrary 时受到空白页 highchart 的启发](https://stackoverflow.com/questions/11851122/blank-page-highchart-in-using-jquery-to-call-json-arrary)。

我的视图（`<?=$instance_graph?>`无处不在，因为我希望能够实例化多个图表）

```
$(document).ready(function() {
    $('#submit<?=$instance_graph?>').click(function() {
        $('#rendu_graph<?=$instance_graph?>').html('');
        var form_data = {
        from : $('#from[name=from<?=$instance_graph?>]').val(),
        to : $('#to[name=to<?=$instance_graph?>]').val(),
        parametre : $('#parametre[name=parametres<?=$instance_graph?>]').val(),
        ajax : '1'
        };
        $.ajax({
            url: "<?= site_url('graph_meteo/ajax_graph'); ?>",
            type: 'POST',
            async : false,
            data: form_data,
            dataType:'json',
            success: function(data) {
            //alert(msg) ;
            //$('#rendu_graph<?=$instance_graph?>').html(msg);
            var chartSeriesData=[];
            $.each(data, function(i,item){
                var series_name = item.name;
                var series_data = item.data;     
                var series = {data: item.data,name:series_name};
                chartSeriesData.push(series);
            });
            console.log(chartSeriesData) ;
            chart = new Highcharts.Chart({ //Début du Highchar
            chart: {
                renderTo: 'rendu_graph<?=$instance_graph?>',
                type: 'spline'
            },
            title: {
                text: 'Graph' 
            },
            subtitle: {
                text: 'Title'
            },
            xAxis: {
                type: 'datetime'

            },
            yAxis: {
                title: {
                    text: 'param 1'
                }
            },
            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + '</b><br/>' + Highcharts.dateFormat('%a %d %b %H:%M', this.x) + ': ' + this.y + ' m';
                }
            },

            series: chartSeriesData

        }) 
```

该系列的console.log 创建：

```
[Object { data="[Date.UTC(2013,02,06,14,15),65.09375]",  name="Station 1"}, Object { data="[Date.UTC(2013,02,06,14,15),65.09375]",  name="Station 1"}, Object { data="[Date.UTC(2013,02,06,14,15),65.09375]",  name="Station 1"}, Object { data="[Date.UTC(2013,02,06,14,30),63.425]",  name="Station 1"}. 
```

![图片](../Images/02389b0c14f68dd4eb31d5b25e6c46d8.png)

当然，我对每个没有情节的对象都有一个系列：

![在此处输入图像描述](../Images/8645cf2f1f0587b52c2d912871fe42d9.png)

编辑：我正在寻找一种方法来使用这些数据（1 行）制作一个很好的工作图，并且我希望我的代码适用于许多行/系列。我的大 pb 是从查询结果开始到图表系列格式。一个例子可能是很好的答案。

我希望你能在我发疯之前帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:52:12.850

您的设置的第一个问题是每个系列的数据都是一个包含数组的字符串。目前它看起来像：

```
{ data: "[Date.UTC(2013,02,06,14,15),65.09375]",  name: "Station 1"} 
```

名称看起来不错，但数据应该是真正的 javascript 数组，而不是字符串。这就是你想要的样子：

```
{ data: [Date.UTC(2013,02,06,14,15),65.09375],  name: "Station 1"} 
```

解决此问题后，我认为您应该将所有数据点放在相同的系列定义中。所以而不是：

```
{ data: [Date.UTC(2013,02,06,14,15),65.09375],  name: "Station 1"},
{ data: [Date.UTC(2013,02,07,14,15),67.09375],  name: "Station 1"} 
```

你应该有一个系列有很多点：

```
{ data: [
      [Date.UTC(2013,02,06,14,15),65.09375],
      [Date.UTC(2013,02,07,14,15),67.09375],
      <more data points here>],
  name="Station 1"}, 
```

# jquery - 对象文字语法中的插件与 $ 有问题

> ID：14741328
> 
> 赞同：0
> 
> 时间：2013-02-07T00:07:16.570
> 
> 标签：jquery, syntax, object-literal

我有一个用对象文字语法编写的插件，所以它基本上只是一个大对象变量。它在一个外部 JS 文件中。当我在函数中的 html 中内联初始化该函数时 `jQuery(document).ready(function($){}` ，出现此错误：“对象 [对象窗口] 的属性 '$' 不是函数”。

如果我将插件文件中的所有“$”更改为“jQuery”，它就可以工作。有没有办法让插件在不这样做的情况下工作？谢谢！如果您需要更多信息/代码来帮助我，请告诉我，我可以提供更多。

- 更多细节：

它是一个限制输入/文本区域字符的插件。它看起来像这样：

```
var charLimiter = { 
  //config stuff here...

'init' : function(options) {    
        if (options && typeof(options) == 'object') {
             $.extend(charLimiter.config, options);
        }

    $('.'+charLimiter.config.inputClass).each(function() {
       var $this = $(this);

       charLimiter.appendHTML($this);
       charLimiter.calcChars($this); 
    });

},

'someFunction' : function(){}, 

//..more stuff here... 

}; 
```

当我在 HTML 中调用时，它看起来像：

```
jQuery(document).ready(function($){
   charLimiter.init();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:16:31.417

尝试使用以下包装插件：

```
;(function($){    
/* plugin code here can use "$"*/
})(jQuery); 
```

如果插件引用，这将起作用，`$.fn.pluginName`否则`$.pluginName`可能不起作用，需要查看插件是如何构造的

# ruby - 为什么我所有的看跌期权都返回=>nil？

> ID：14741329
> 
> 赞同：9
> 
> 时间：2013-02-07T00:07:21.500
> 
> 标签：ruby, null, puts

我知道这似乎是一个非常简单的问题，但我的 put 不断生成“=> nil”确实让我很困扰，我搜索了答案但找不到答案。谢谢。

> > puts 'blink' *4 blink blink blink blink => nil

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T00:08:51.700

因为那是的返回值`puts`：

> puts(obj, ...) → 无
> 
> 与 IO#print 一样将给定对象写入 ios。在尚未以换行序列结尾的任何内容之后写入记录分隔符（通常是换行符）。如果使用数组参数调用，则将每个元素写入新行。如果不带参数调用，则输出单个记录分隔符。

来源：[http ://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)

另外，我认为这只是在`irb`？因为在普通应用程序中调用`puts`不会显示它的返回值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-09T19:11:48.587

您可能想要使用`p`而不是`put`s。

`p`打印然后返回值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-02T06:21:29.470

Hunter McMillen 的回答是正确的。

但是，如果您想要一个实际返回非零值的 puts 替换，我创建[了一个名为 reputs 的 gem](https://github.com/jeffreybiles/reputs)。

```
reputs 'blink ' *4
blink blink blink blink
=> "blink blink blink blink " 
```

# java - Java 反射。运行一个外部 jar 并引用它的类？

> ID：14741338
> 
> 赞同：1
> 
> 时间：2013-02-07T00:09:09.137
> 
> 标签：java, class, reflection

这个代码片段允许我在我的程序中运行一个 jar：

```
File f = new File("client.jar");
URLClassLoader cl = new URLClassLoader(new URL[]{f.toURI().toURL(), null});
Class<?> clazz = cl.loadClass("epicurus.Client");
Method main = clazz.getMethod("main", String[].class);
main.invoke(null, new Object[]{new String[]{}}); 
```

无论如何，我可以参考该外部程序的课程吗？
例如，我希望能够更改其 JFrame 的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:26:22.190

我相信你可以。我会尝试如下。

在调用 main 之后，您需要运行一个循环来访问您感兴趣的 Window（可以在单独的线程中完成）。

```
for(Window window : Window.getWindows()){
    if(window != null && window.isVisible() && window instanceof JFrame){
        JFrame jFrame = (JFrame)window;
    }
} 
```

然后，您可以通过反射访问 JFrame 的字段和方法（或者，如果需要，通过比较 jFrame.getName() 和一些字符串来指定您正在修改的框架是您想要的框架）。

例如，假设您对修改 JTextArea 中的字体大小和样式感兴趣。

```
Field textAreaField = jFrame.getClass().getDeclaredField("textArea");
textAreaField.setAccessible(true); 
```

将允许您访问该字段并允许您以任何您认为合适的方式对其进行修改。

从那里你需要实际的对象。

```
JTextArea textArea = (JTextArea) textAreaField.get(jFrame);

Font font = textArea.getFont();
textArea.setFont(new Font(font.getFontName(), font.getStyle(), 24)); 
```

这应该只是为你做的。

# android - Android 预建 UI 组件列表

> ID：14741342
> 
> 赞同：1
> 
> 时间：2013-02-07T00:09:14.100
> 
> 标签：android, user-interface, components

我想知道 Android 平台提供的所有 UI 组件是否有某种带有图像的列表（文档没有图像）？

我试过寻找某种列表或任何东西，但我找不到任何接近的东西。我知道 Apple/iOS 有许多列表，包括[这个](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)列表，这正是我正在寻找的类型。那是在我搜索 android 列表时出现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:16:37.850

您不需要带有预览的列表。您已经在 Eclipse 的 UI 编辑器中拥有它：

![在此处输入图像描述](../Images/27f23ec8aacd1ad06391fb90ee9db68f.png)

# php - PHP、Javascript JSON、XSS 保护

> ID：14741347
> 
> 赞同：0
> 
> 时间：2013-02-07T00:09:47.587
> 
> 标签：php, javascript, json, xss

我正在考虑XSS漏洞！

我有网站，其中所有数据 b/w Web 服务器和客户端都通过 XHR 传输 - JSON 和浏览器 javascript 完成其余工作以显示该网站。

当客户端提交数据时，这是我将数据记录在数据库（PHP）中之前的代码：

```
$string = trim($_POST['user_input']);
$string = strip_tags($string);
$string = mysql_real_escape_string($string); 
```

当服务器从数据库中获取数据时 PHP 代码如下：

```
$string = htmlspecialchars($db_value); 
```

接着

```
header('Content-Type: application/json; charset=utf-8');
print json_encode($string); 
```

这足以保护我免受 XSS 攻击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-24T16:19:41.423

作为一般经验法则，这里的另一个答案是不正确的。将 application/json 用于您的内容类型将解决一些问题，但许多客户端倾向于从 JSON 对象中提取数据并将其显示在页面上。这导致了经典的攻击。

停止 XSS 的唯一可靠方法（我说可靠，因为它不是万无一失的）是清理入站流上的数据（完全拒绝请求可能是一个更好的调用）并编码所有可能显示的输出（即：用户可以修改的任何内容）。

此外，不要接受并非为安全性而设计的方法本质上是安全的想法（json_encode 并不意味着 XSS 安全性，不应该这样使用）。任何关于由于 X 而没有必要进行正常安全实践的建议，如果不是完全无视，就应该持怀疑态度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:23:35.800

这真的取决于。如果`$string`post json_encode 的内容包含 HTML 实体并在页面上显示为 html，那么您将容易受到 XSS 的攻击。如果不是这种情况（而且不是因为您一直在使用`application/json`），那么不仅没有必要使用`htmlspecialchars`，而且可能是不可取的，因为它会改变您尝试通过 JSON 传输的原始数据。

我不会说你对 XSS 完全无懈可击，因为它只受到恶人想象力的限制，但我会说`header('Content-Type: application/json;')`在这种情况下提供了足够的保护。

在不相关的注释上，停止使用[`ext/mysql`](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated).

# css - Internet Explorer 中的透明背景

> ID：14741348
> 
> 赞同：0
> 
> 时间：2013-02-07T00:09:48.063
> 
> 标签：css, internet-explorer

`div`我在元素中设置了透明背景。它的子元素没有透明背景。

我有：

```
background: rgba(181, 182, 183, 0.6); 
```

对于 IE，我尝试如下：

```
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#B5B6B700, endColorstr=#B5B6B700);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#B5B6B700, endColorstr=#B5B6B700)"; 
```

正确的`hex`值是多少？我不确定最后两位数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:16:57.363

在这里尝试@MatTheCat 的答案以获得 IE 透明背景回退：[CSS background opacity with rgba not working in IE 8](https://stackoverflow.com/questions/3975688/css-background-opacity-with-rgba-not-working-in-ie-8)

查看您当前的代码，如果您无法让背景透明，您可能需要添加`zoom: 1`才能在 IE 中触发 hasLayout。

尝试这个：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#B5B6B700,endColorstr=#B5B6B7000); 
zoom: 1; 
```

有关hasLayout 的[更多信息。](http://reference.sitepoint.com/css/haslayout)

# rally - 如何从 _ref 中获取对象

> ID：14741356
> 
> 赞同：1
> 
> 时间：2013-02-07T00:10:28.560
> 
> 标签：rally

如果这是一个愚蠢/新的问题，我深表歉意，但是当返回带有 _ref 的 Rally 查询结果（使用 Javascript SDK 1.32）时，有没有办法直接获取与 _ref 关联的对象？

我看到我可以使用 getRefFromTypeAndObjectId 来获取类型和对象 ID，然后查询该类型和对象 ID 以获取对象，但是我想知道是否有类似 getObjectFromRef 或其他类似的方式来更直接地取回与引用关联的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:31:13.593

很好的问题。[RallyDataSource 上的getRallyObject](http://developer.help.rallydev.com/rally-data-source)方法应该可以满足您的需要。

```
var ref = '/defect/12345.js';
rallyDataSource.getRallyObject(ref, function(result) {
    //got it
    var name = result.Name;
}, function(response) {
    //oh noes... errors
    var errors = response.Errors;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:03:40.500

在 SDK 2.0 中，您使用数据模型的加载方法来读取特定对象。看看这个例子： http: [//developer.help.rallydev.com/apps/2.0p5/doc/# !/guide/appsdk_20_data_models](http://developer.help.rallydev.com/apps/2.0p5/doc/#!/guide/appsdk_20_data_models)

# angularjs - 解析中的Angularjs依赖注入

> ID：14741359
> 
> 赞同：12
> 
> 时间：2013-02-07T00:10:55.560
> 
> 标签：angularjs, coffeescript, angular-routing

我想使用适当的依赖注入`MyCtrl1`来注入`MyCtrl1.resolve`对象的字段。我尝试了许多不同的尝试注入`@MyCtrl1.resolve`等组合，但没有运气。

```
@MyCtrl1 = ($scope, $http, batman, title) ->
  $scope.batman = batman.data
  $scope.title = title.data

@MyCtrl1.resolve = {
 batman: ($http) ->
   $http.get('batman.json')
 title: ($http) ->
   $http.get('title.json')
}
#@MyCtrl1.$inject = ['$scope', '$http'] -- commented out because not sure how to inject resolve fields

 angular
.module( 'app', [])
.config( ['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider)->
  $locationProvider.html5Mode(true)

  $routeProvider.when('/', {templateUrl: 'index.html', controller: MyCtrl1, resolve: MyCtrl1.resolve})
  $routeProvider.otherwise({redirectTo: '/'})
])

angular.bootstrap(document,['app']) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T18:12:58.243

Resolve 是路由的属性，而不是控制器。控制器将被注入在路由级别定义的依赖项，无需在控制器上指定解析属性。

以您的一个示例（转换为 JavaScript）为例，您将一如既往地定义您的控制器，即：

```
MyCtrl1 = function($scope, $http, batman, title) {
  $scope.batman = batman.data;
  $scope.title = title.data;
} 
```

然后是路由上的 resolve 属性：

```
angular.module('app', []).config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
  $locationProvider.html5Mode(true)

  $routeProvider.when('/',{templateUrl: 'index.html', controller: MyCtrl1, resolve: {
    batman: ['$http', function($http) {
      return $http.get(..).then(function(response){
         return response.data;
      });
    }],
    title: ['$http', function($http) {
      return //as above
    }]
  }});
  $routeProvider.otherwise({redirectTo: '/'});
}]); 
```

如果你想使用路由的解析部分来缩小代码，你需要使用数组样式的注释——我已经在上面的例子中包含了这个。

# uiviewcontroller - 使用 UISegmentedControl 在 UIViewController 之间切换

> ID：14741360
> 
> 赞同：0
> 
> 时间：2013-02-07T00:10:56.617
> 
> 标签：uiviewcontroller, ios6, navigation, uisegmentedcontrol

我想用 UISegmentedControl 在 3 个视图之间切换，但我被卡住了。

我正在使用故事板和ARC，到目前为止我得到了这个：

我已将分段控件拖到我的 VC 中，然后我制作了一个 IBOutlet 和一个连接到分段控件的 IBAction。

这是 .h 文件的样子：

```
#import <UIKit/UIKit.h>

@interface SCViewController : UIViewController

@property (strong, nonatomic) IBOutlet UISegmentedControl *segment;

- (IBAction)changeSeg:(id)sender;
@end 
```

然后在 .m 文件中：

```
#import "SCViewController.h"

@interface SCViewController ()

@end

@implementation SCViewController

@synthesize segment;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
[self setSegment:nil];
[super viewDidUnload];
}

- (IBAction)changeSeg:(id)sender {

if(segment.selectedSegmentIndex == 0){
    NSLog(@"page one pressed");
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"segmentView1"]];

}
if(segment.selectedSegmentIndex == 1){
    NSLog(@"page two pressed");
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"segmentView2"]];

}

}
@end 
```

控制台显示 NSLog 消息但没有切换视图（故事板中存在 vc segmentView1 和 segmentView2）

也许我在这方面使用了错误的方法？

我想要实现的是像 iDaft2 应用这样的功能。在那里你有 2 或 3 页，你可以轻松地在它们之间切换。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:01:54.417

好吧，我添加了一个视图控制器，然后我将 UIViews 放入其中并使用`setHidden`按钮在它们之间切换。我不认为这是最好的解决方案（应该是更好的解决方案），但它可以完成工作。

意见：

```
//  Set views visibility you must make an @property in .h file for each view
//  Like: @property (nonatomic, weak) IBOutlet UIView *firstPage;
[_firstPage setHidden:NO];
[_secondPage setHidden:YES];
[_thirdPage setHidden:YES]; 
```

切换按钮：

```
- (IBAction)switchOne:(id)sender {

[_firstPage setHidden:NO];
[_secondPage setHidden:YES];
[_thirdPage setHidden:YES];
} 
```

# android - android 平板电脑上播放 mp4 视频的 As3 应用程序无法正确暂停？

> ID：14741364
> 
> 赞同：0
> 
> 时间：2013-02-07T00:11:17.217
> 
> 标签：android, actionscript-3, air, adobe, flashdevelop

当我在平板电脑（android）上运行我的应用程序并点击暂停按钮时，它会暂停视频的屏幕，但是当我取消暂停视频时，视频会跳过多少秒的暂停。因此，如果我开始播放视频，然后单击暂停并走开，我可以返回并取消暂停视频，它会直接跳到最后。

我正在使用的代码是 `ns.togglePause();`相同的代码在桌面上工作，并与 .flv 和 .f4v 一起工作，但当我在平板电脑上使用 mp4 时将无法工作。

有没有人见过这个或知道为什么它会做这样的事情？

我正在使用 flashdevelop 来调试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:56:03.337

我发现我的问题是由编码引起的。这帮助我解决了我的问题。我在 adobes 表单上找到了这个。

视频编码非常重要。例如，对移动设备使用 H264 的基线配置文件级别 3.1（而不是推荐用于桌面的高级配置文件级别 4.1）。有关更多信息，请参阅 Fabio Sonnati 的 MAX 会议：“在多个设备上进行性能编码”如果您有 Android 手机/平板电脑，可以使用我的 AIR 应用程序来观看 Adob​​e MAX 2011 视频： [https://market.android。 com/details?id=air.fr.inway.maxVideos2011 在](https://market.android.com/details?id=air.fr.inway.maxVideos2011) “Sonnati”中搜索本次会议的视频。（有关信息，我使用基于 OSMF 1.6 的视频播放器）

pdf 演示文稿可在 Sonmati 的博客上找到： [http ://sonnati.wordpress.com/](http://sonnati.wordpress.com/)

# c++ - 如何检查 C++ 中的 DBNull - ADO 记录集字段？

> ID：14741367
> 
> 赞同：5
> 
> 时间：2013-02-07T00:11:41.467
> 
> 标签：c++, ado

我试图通过 C++ 中的 ADO 从 SQL Server 检索数据，如何检查记录集字段的 Null 值？没有 IsNUll() 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:21:10.367

在 C++ ADO 记录集中测试 DBNull 涉及检查`fieldpointer->Value`类型为`VARIANT`. 要测试空变量值，请检查该`vt`字段，对于空值，该字段是`VT_NULL`.

所以要测试 DBNull，检查`fieldpointer->Value.vt == VT_NULL`

# visual-studio-2010 - OpenAL 输出声音 5.1

> ID：14741375
> 
> 赞同：0
> 
> 时间：2013-02-07T00:12:04.117
> 
> 标签：visual-studio-2010, visual-c++, openal, surround

在我的项目中，我使用的是 OpenAl，3d 效果很好，但只能使用左/右扬声器。我的电脑有 5.1 系统，所以 2 个后置扬声器、2 个前置、1 个头和 1 个低音炮。

在 windows 中配置正确，所以如果我看电影或玩支持环绕系统的游戏，声音会从所有 6 个扬声器中退出，但在我的项目中不是，只有 2 个，如歌曲或标准 windows 声音..

我需要如何配置 OpenAl 以使用 5.1 扬声器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:33:37.560

在创意实验室的 OpenAL 程序员指南中，第 140 页有一个关于多通道缓冲区的部分。该指南可在[此处](http://connect.creativelabs.com/openal/Documentation/OpenAL_Programmers_Guide.pdf)找到。这是 OpenAL 的扩展，您可以在第 131 页看到。

# ember.js - 当处于错误状态时，您可以使用 Ember 数据模型做什么？

> ID：14741377
> 
> 赞同：21
> 
> 时间：2013-02-07T00:12:09.743
> 
> 标签：ember.js, ember-data

我正在努力理解将在以下场景中使用的工作流程：

用户创建一个模型，我们称之为产品。我们向他们展示了一个要填写的表单。由于验证以外的某些原因（超时、访问被拒绝等）而导致的保存错误在 Ember 中，这会将模型置于错误状态。从 UI 的角度来看，我要做的就是在屏幕上显示一条消息（简单）并允许用户再试一次（显然不是那么容易）。

我已经多次看到它不重用事务。我明白其中的逻辑。在新产品的情况下，我简单地创建另一个新产品，合并来自原始产品的数据（属性、关系）并用新产品替换我的控制器的内容。这并不难，而且看起来效果很好，尽管可能（希望）有更好的方法。

但是，当我编辑产品时，我遇到了一个严重的问题，上述解决方案不起作用。产品模型现在处于错误状态，我找不到任何方法来获取该产品的副本，该副本也不处于相同状态。

我无法弄清楚的是，一旦该模型达到错误状态，我可以用它做什么。我尝试了以下方法：

**回滚：**这不起作用。您不能回滚处于错误状态的事务。

**重新加载：**同上。不允许在错误状态下重新加载记录。

**获取记录的新副本：**所以我尝试使用与现有记录相同的 ID 的 App.Product.find(id)。它只是给了我一份现有记录的副本，处于错误状态。

我希望我在这里遗漏了一些相当基本的东西。是否可以将记录很好地从错误状态（或无效状态）中推出？

如果有一种简单的方法可以改变这些模型的状态，我们是否还应该创建一个新事务来进一步尝试提交？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T21:34:29.043

因此，经过几天的阅读源代码和实验，我得出的结论是，这是尚未实现的功能。要将记录移动到另一个状态，您应该向它发送一个事件，该事件在`statemanager`. 似乎没有在错误状态上注册的事件允许我们恢复记录。

有一个丑陋的解决方法 - 我可以调用`transitionTo`记录`statemanager`并强制它进入我们想要的状态。我并没有轻易决定这样做，但在这一点上，我必须在等待 ember-data 发展的同时继续该项目。因此，如果记录到目前为止尚未保存，我们可以通过调用将其从无效或错误状态中拯救出来：

`model.get('stateManager').transitionTo('loaded.created.uncommitted')`

或对于现有记录：

`model.get('stateManager').transitionTo('loaded.updated')`

一旦调用了它，您就可以尝试在模型所在的事务上再次调用 commit。这将是默认事务，因为 ember-data 的行为是在调用 commit 后将模型移动到默认事务中这是原始交易。您始终可以通过调用来检索模型的当前事务`model.get('transaction')`

所以最后，我有一种方法可以创建我们可能在 Ruby on Rails 中看到的典型 CRUD 场景，但我不认为这是实现它的理想方式。然而，我确实相信，此时，ember-data 团队也不相信。

对于那些有兴趣将 CRUD 功能用作 Ember 的控制器和路由混合的人，我有一个[Gist](https://gist.github.com/intrica/4773420)，其中包含我目前使用的代码。这工作正常，可以从保存错误和验证错误中恢复。希望随着 ember-data 的发展，我可以继续完善这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-17T18:56:07.833

在 1.0.0-beta5 中添加 DS.Errors （请参阅[https://github.com/emberjs/data/commit/994f3b234ef899b79138ddece60d8b214c5449e3](https://github.com/emberjs/data/commit/994f3b234ef899b79138ddece60d8b214c5449e3)）您应该能够调用...

```
record.get("errors").clear(); 
```

这将清除以前的错误和触发器`becameValid`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T13:29:44.603

您可以在其上触发`becameValid`事件：

```
record.send("becameValid"); 
```

这应该将模型转换为*未提交*状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:10:12.383

您可以尝试将模型的并行表示创建为未持久化但具有与持久化模型相同的属性的 Ember.Object。如果您的 ajax 在错误状态下反弹，您可以使用 ajax 方法提供的错误回调来执行某些操作。

在这种情况下，“某事”可能是删除记录，然后将虚拟对象中的属性克隆到新记录中并重新保存记录。在成功回调中，只需销毁您的临时对象，如果所有记录都是干净的，则清除您的临时对象（以防止延迟临时对象）。

这也可能是疯狂的......但它作为一种选择让我感到震惊。

# linux - 自动将日期添加到 git commit 消息

> ID：14741383
> 
> 赞同：8
> 
> 时间：2013-02-07T00:12:57.153
> 
> 标签：linux, git, bash

所以我有一个 sh 脚本，它将一些文件放在一起，然后将它们提交到 git repo。如何将日期动态添加到我的提交消息中？

我的 .sh 看起来像

```
// do things to files...
git add -u;
git commit -m 'generated files on <date here?>';
git push origin master; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T00:15:53.310

只需格式化[date](http://netbsd.gw.com/cgi-bin/man-cgi?date+1+NetBSD-current)命令的输出，Bob 就是你的叔叔：

```
// do things to files...
git add -u;
git commit -m "generated files on `date +'%Y-%m-%d %H:%M:%S'`";
git push origin master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T00:18:15.397

为什么不使用`prepare-commit-msg`或`commit-msg` [git hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)？您可以在`.git/hooks`目录中找到存根。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T00:18:26.997

不知道为什么要这样做，因为提交已经加上时间戳，但类似于：

```
THEDATE=`date`
git commit -m "... $THEDATE" 
```

会这样做。请注意，双引号很重要。

# ios - RegisterForRemoteNotificationTypes 导致 UI 挂起

> ID：14741386
> 
> 赞同：6
> 
> 时间：2013-02-07T00:13:25.280
> 
> 标签：ios, xamarin.ios, push-notification, apple-push-notifications

我可以成功为我的应用注册推送通知：

```
UIApplication.SharedApplication.RegisterForRemoteNotificationTypes(
    UIRemoteNotificationType.Alert
    | UIRemoteNotificationType.Badge
    | UIRemoteNotificationType.Sound); 
```

但每当我执行此操作时，我的 UI 通常会挂起 2-3 秒。即使我按照建议在应用程序生命周期的早期拥有它（例如，甚至`WillFinishLaunching`），一旦我的第一个 ViewController 加载，我的 UI 仍然会挂起。

我的第一个想法是在单独的线程中执行注册，但 MonoTouch 阻止了这一点：

```
// From MonoTouch.UIKit
public virtual void RegisterForRemoteNotificationTypes(UIRemoteNotificationType types)
{
    UIApplication.EnsureUIThread(); 
```

我的下一个想法是至少弹出一个`UIAlertView`框让用户知道发生了什么事，但由于某种原因直到注册*后才*显示，导致`UIAlertView`打开并立即关闭！

```
modalPopup = new UIAlertView("Working", "The application is loading...", null, null);
modalPopup.Show();
// It doesn't show here!
RegisterForRemoteNotificationTypes();
// It shows here!
modalPopup.DismissWithClickedButtonIndex(0, true); 
```

我怎么能

1.  阻止推送通知注册占用我的 UI 线程
2.  掩盖UI冻结？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T13:50:58.310

您是否覆盖了公共覆盖 void RegisteredForRemoteNotifications(UIApplication application, NSData deviceToken)

或者

public override void FailedToRegisterForRemoteNotifications（UIApplication 应用程序，NSError 错误）

我在 Registered... 函数中遇到了类似的问题，我调用了一个 Web 服务来上传设备令牌。但是网络调用不在另一个线程中，因此导致 UI 冻结。

# arrays - 二分搜索（样条应用）

> ID：14741390
> 
> 赞同：0
> 
> 时间：2013-02-07T00:13:58.663
> 
> 标签：arrays, algorithm, vba, binary-search

我一直在尝试使用三次样条插值的应用程序对已排序的数据数组实现二进制搜索。我无法让它在所有范围内运行。例如，搜索编号 4.4 应返回范围 [4.35-4.57) 的下限 4.35。4.57 存在于 [4.35-4.57] 和 [4.57, 4.76) 等中。

```
Sub Binary_Search_of_Array()
Dim SplineRanges() As Variant
Dim Right As Integer
Dim Middle As Integer
Dim Left As Integer
Dim SearchNumber As Variant

SplineRanges = Array(4, 4.35, 4.57, 4.76, 5.26, 5.88)
SearchNumber = 4.4

Right = UBound(SplineRanges)
Left = LBound(SplineRanges)
Do While Left < Right
  Middle = Left + (Right - Left) / 2

  If SplineRanges(Middle) < SearchNumber Then
     Left = Middle + 1
  ElseIf SplineRanges(Middle) > SearchNumber Then
     Right = Middle - 1
  Else
    Left = Middle
    Exit Do
  End If
Loop

  Debug.Print SplineRanges(Left - 1); SearchNumber; SplineRanges(Left) ' Tried many different statements to return the correct bounds.

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:24:51.047

你的问题是在线

```
Right = Middle - 1 
```

那应该是

```
Right = Middle 
```

否则你会关闭间隔太远，太快......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:14:44.487

我太快地指出（仅）一件让你的代码有问题的事情。我再次查看了所有逻辑，并提出了以下代码段 - 这更容易理解和更正：

```
Do While Right - Left > 1
  Middle = Left + (Right - Left) / 2

  If SplineRanges(Middle) < SearchNumber Then
    Left = Middle
  Else
    Right = Middle
  End If
Loop

Debug.Print SplineRanges(Left); SearchNumber; SplineRanges(Right) 
```

我以 0.01 的步长在 4.01 到 5.88 的整个值范围内运行它，它似乎始终表现得很好。逻辑更容易理解：如果你的中点值太高，那么你将你的下边界调整到那个点；否则你调整你的上限。一旦上下边界仅相距一，您的目标就“在括号中”。请注意，除了小整数值之外，浮点类型并不是真的每个都达到相等。因此，您关于“4.57 存在于 [4.35-4.57] 和 [4.57-4.76] 中”的观点很棘手。无论如何，当你制作样条曲线时，当你“只是一个点的错误的一面”时，近似值不会崩溃，因为样条曲线有所有那些可爱的连续导数......

# ruby-on-rails - 在 Rails 中使用“Bundle Update”在测试中产生了无数错误

> ID：14741392
> 
> 赞同：0
> 
> 时间：2013-02-07T00:14:09.487
> 
> 标签：ruby-on-rails, ruby, rspec, bundler, gemfile

我正在艰难地阅读这个关于 Ruby on Rails 的极易出错的教程，该教程位于此处：[http](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book) ://ruby.railstutorial.org/ruby-on-rails-tutorial-book 。

我一直在研究有关使用 rspec 进行测试的部分。现在，本教程提供的说明创建了一大堆错误（弃用、数组问题等），这些错误填满了我的页面。在互联网上翻了几个小时后，我决定遵循几个建议来更新我所有的宝石。

更新了我的 gem 并尝试执行这个非常基本的测试（实际上是默认测试），我得到了一大堆我无法开始理解的错误。我只能说“请帮忙”。

谢谢你。

```
> bundle exec rspec spec/requests/static_pages_spec.rb
Rack::File headers parameter replaces cache_control after Rack 1.5.
←[31mF←[0m

Failures:

  1) StaticPages GET /static_pages works! (now write some real specs)
     ←[31mFailure/Error:←[0m ←[31mget static_pages_path←[0m
     ←[31mNameError:←[0m
       ←[31mundefined local variable or method `static_pages_path' for #<RSpec::
Core::ExampleGroup::Nested_1::Nested_1:0x5168040>←[0m
←[36m     # ./spec/requests/static_pages_spec.rb:6:in `block (3 levels) in <top
(required)>'←[0m

Finished in 0.19901 seconds
←[31m1 example, 1 failure←[0m

Failed examples:

←[31mrspec ./spec/requests/static_pages_spec.rb:5←[0m ←[36m# StaticPages GET /st
atic_pages works! (now write some real specs)←[0m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:43:23.730

如果您将所有 gem 升级到最新版本，那么您可能遇到的一个问题是您较新的 capybara gem 不再在**'spec/requests'**中查找您的测试。该测试现在需要在**“规范/功能”**中。如果没有**“规格/功能”**，只需创建它。

此外，如果它还没有的话，水豚将在你**的 'spec/spec_helper.rb'中需要这一行：**

```
require 'capybara/rspec' 
```

# visual-studio-2012 - DeleteAsync() 在 C# .NET for Windows Store 中导致 FileNotFoundException

> ID：14741394
> 
> 赞同：0
> 
> 时间：2013-02-07T00:14:28.860
> 
> 标签：visual-studio-2012, asynchronous, filenotfoundexception

我在尝试删除异步创建的文件夹时遇到问题。我似乎无法使用 System.IO.File 同步删除，因为 Visual Studio Express 声称这不存在。当我使用 DeleteAsync() 时，文件夹删除得很好，但它也会引发 FileNotFoundException，这是一个问题，因为它会导致我的程序失败，即使文件夹被成功删除。这几天一直在给我问题。

我已经像这样初始化了文件夹

```
 StorageFolder zip_contents_folder = await ApplicationData.Current.LocalFolder.CreateFolderAsync("Zip Contents", CreationCollisionOption.ReplaceExisting); 
```

并且，在将 zip 文件解压缩到它之后，我稍后使用

```
try
{
    await zip_contents_folder.RenameAsync("trashfile2.xml", NameCollisionOption.GenerateUniqueName);
    await zip_contents_folder.DeleteAsync();

}
catch (Exception e_deletezipfolder)
{
    System.Diagnostics.Debug.WriteLine(e_deletezipfolder.ToString());
} 
```

**编辑：** 这是控制台的输出。它发生在我的第 3 方 DLL 加载后

'Indigo.exe' (Managed (v4.0.30319)): Loaded 'D:\Skydrive\Visual Studio Projects\eBook\Indigo\bin\Debug\AppX\Ionic.Zip.DLL' 'System. IO.FileNotFoundException'发生在 mscorlib.dll 类型“System.IO.FileNotFoundException”的第一次机会异常发生在 mscorlib.dll 类型“System.IO.DirectoryNotFoundException”的第一次机会异常发生在 mscorlib.dll 的第一次机会异常在 mscorlib.dll 中发生类型“System.IO.DirectoryNotFoundException”

有谁知道这个问题的解决方法？

# java - 将 Java Google AppEngine 应用程序转换为 Python AppEngine

> ID：14741395
> 
> 赞同：0
> 
> 时间：2013-02-07T00:14:40.373
> 
> 标签：java, python, google-app-engine

我是 GAE 的大菜鸟，Python 中等水平，Java 中等到生疏。我正在寻找将现有且正在运行的 GAE Java 应用程序（在 Google Play 商店中并在 Android 上运行）转换为 GAE Python。最终目标是让它进入 Raspberry Pi 商店，所以我假设 GAE Python 将是最无缝的。

有没有人这样做，假设它甚至可能？它需要完全重写，还是我可以只写一个包装器/容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:29:01.967

这将是一次彻底的重写。

但是，服务器端应该独立于客户端。您可以为 Raspberry Pi 提供一个 python 客户端，并且您的服务器端代码仍然可以用 Java 编写。

# powershell - Format-List 的-view 参数是什么？

> ID：14741397
> 
> 赞同：3
> 
> 时间：2013-02-07T00:14:44.777
> 
> 标签：powershell

Format-List 显然有一个名为“view”的字符串参数，可以在[这里](http://ss64.com/ps/format-list.html)看到。它有什么作用，它是如何工作的？除了“替代格式或'视图'的名称”之外，我找不到任何文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:14:06.053

各种 Format-* cmdlet 上的“-View”参数允许您获取各种不同的“视图”或数据格式，例如：

```
PS> Get-Process

Handles  NPM(K)    PM(K)      WS(K) VM(M)   CPU(s)     Id ProcessName
-------  ------    -----      ----- -----   ------     -- -----------
    672      56   272684     220692   975   141.45   8480 powershell
    692      34    47184      60156   234    23.73  17048 powershell
    751      82   217624     162780  1047   157.73  13336 powershell_ise 
```

相对

```
PS> Get-Process | Format-Table -View StartTime

   StartTime.ToShortDateString(): 1/14/2013

ProcessName                  Id   HandleCount   WorkingSet
-----------                  --   -----------   ----------
powershell                 8480           672    225988608

   StartTime.ToShortDateString(): 2/6/2013

ProcessName                  Id   HandleCount   WorkingSet
-----------                  --   -----------   ----------
powershell                17048           624     92418048

   StartTime.ToShortDateString(): 1/17/2013

ProcessName                  Id   HandleCount   WorkingSet
-----------                  --   -----------   ----------
powershell_ise            13336           771    166686720 
```

至于确定哪些命令支持备用视图，您通常可以在文档中找到此类信息。以下是 Get-Process 帮助的摘录：

> 您还可以使用 Format-Table 提供的进程的内置替代视图，例如“StartTime”和“Priority”，并且您可以设计自己的视图。有关详细信息，请参阅 T:Microsoft.PowerShell.Commands.Format-Table。

[PowerShell 社区扩展](http://pscx.codeplex.com)还包括一个名为的命令，`Get-ViewDefinition`当文档不可用时可以获取此信息（或在这方面有很大帮助。

# database - 访问表设计 - 两种选择 - 哪个更好？

> ID：14741398
> 
> 赞同：2
> 
> 时间：2013-02-07T00:14:47.233
> 
> 标签：database, database-design, ms-access-2007

我有一张表，我需要存储来自实验室的不同产品的样本分析数据。我有两个选择。我通常会使用选项#1，但我想知道我是否应该开始使用选项#2 的版本。对于每个样品，即使是同一种产品，我每周都要求进行不同的测试，但有些是重复的，有些不是。以下是我可以使用的选项...

选项1

```
 SampleID     pH      Solids        Calcium        Nitrogen
 3755        4.2       20.6           15.8
 3756        4.35                     15.7           12.2 
```

选项 #2

```
 SampleID     TestID     TestValue
 3755           1         4.2
 3755           2         20.6
 3755           3         15.8
 3756           1         4.35
 3756           3         15.7
 3756           4         12.2 
```

TestID 将链接到一个包含 testID 编号和测试名称的表。选项 #2 永远不会有空字段值，但会有更多行。选项 #1 会有很多空值，但每个样本的所有值都将排成一行。随着我对数据库的了解越来越多，我认为选项 #2 就是它们的全部意义所在。最后要注意的一件事，虽然我在上面的示例中有四个测试，但实际上是 50+。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T03:04:50.857

好吧，选项＃2更加规范化。稍后添加其他测试会很容易。
另外，如果您有 50 多个测试，应用程序设计会更容易。

顺便说一句，我很想使用 TestCode 而不是 TestID。该代码将是测试的 2-3 个字母表示。它会占用更多的空间和 CPU，但实际上两者都可以忽略不计。如果您必须直接查看表格，则阅读起来会更容易。

# spring - jsp不显示变量的值

> ID：14741402
> 
> 赞同：0
> 
> 时间：2013-02-07T00:15:36.220
> 
> 标签：spring, jsp, spring-mvc

我有以下类发送 name 变量的值，但 jsp 没有显示它。它只是显示 hello world 消息

雇员.java

```
public class Employee {

    private String name;

    public Employee(){
       this.name = "Daniel";
    }

    public String getName() {
        return name;
    }

    public void setName(String name)
    {
       this.name = name;
    } 
```

Emp.java

```
public class Emp implements Controller {

private Employee empp;

protected final Log logger = LogFactory.getLog(getClass());

   @Override
     public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

        System.out.println("empp:"+this.empp.getName());
        String myname = empp.getName();
        logger.info("Returning hello view");

    return new ModelAndView("emp.jsp","name",myname);  

     } 
```

Emp.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <h2><c:out value="${name}"/></h2>
    </body>
</html> 
```

**还使用了以下**

```
@Override
public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    System.out.println("empp:"+this.empp.getName());
    String myname = empp.getName();
    logger.info("Returning hello view");
    Map<String, Object> myModel = new HashMap<String, Object>();
    myModel.put("name", this.empp.getName());

return new ModelAndView("emp.jsp","model",myModel);
} 
```

Emp.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <h2><c:out value="${model.name}"/></h2>
    </body>
</html> 
```

我用了

```
<h1><%= pageContext.findAttribute("model.name") %></h1> 
```

但它返回 Null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:22:11.040

您需要将 的值添加`employeeInstance.getName()`到 ModelAndView。根据[文档](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/ModelAndView.html)，这是如何做到的：

```
@Override
public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        logger.info("Returning hello view");
        ModelAndView modelAndView = new ModelAndView();
        modelAndView.addObject("name", employeeInstance.getName());
        modelAndView.setViewName("Emp.jsp");
        return modelAndView;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:32:47.617

作为控制器接口，它们的常量变量不能改变，它只是一个只读值。是接口控制器中的变量名吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:39:42.107

如果这些作品都没有，只需使用

java中的request.setParameter

和

jsp中的response.getParameter

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-30T15:42:48.200

您应该将其添加到您的页面标题中：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

或者直接使用EL：

```
 <h1>${model.name}</h1> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T07:24:30.487

我的错误是我导入`org.springframework.web.portlet.ModelAndView`而不是`org.springframework.web.servlet.ModelAndView`. 使用后者解决了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-25T06:11:34.427

在你的jsp中做这个小修改

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <h2>/${name.getName()}</h2>
    </body>
</html> 
```

# powershell - 如何限制 Get-ChildItem 搜索的文件（或限制递归深度）？

> ID：14741403
> 
> 赞同：4
> 
> 时间：2013-02-07T00:15:39.050
> 
> 标签：powershell, filter, powershell-1.0, get-childitem

# 背景

有一个目录会全天自动填充 MSI 文件。我计划利用任务计划程序每 15 分钟运行一次如下所示的脚本。该脚本将搜索目录并将过去 15 分钟内创建的所有新 MSI 复制到网络共享。

在此文件夹`C:\ProgramData\flx\Output\<APP-NAME>\_<TIME_STAMP>\<APP-NAME>\`中还有另外两个文件夹：`Repackaged`和`MSI Package`. `Repackaged`不需要搜索该文件夹，因为它不包含任何 MSI。我还发现需要以某种方式排除它以防止出现此错误：

```
Get-ChildItem : The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.
At line:14 char:32
+$listofFiles=(Get-ChildItem <<<< -Recurse -Path $outputPath -Include "*.msi" -Exclude "*.Context.msi" | where {$_.LastAccessTime -gt $time.AddMinutes($minutes)})
+ CategoryInfo : ReadError: C:\ProgramData\...xcellence\Leg 1:String) [Get-ChildItem], PathTooLongException
+ FullyQualifiedErrorId : DirIOError,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

## 限制

*   我被困在使用 Powershell v1.0
*   我无法控制源位置的目录结构

**更新：**

*   我不知道应用程序名称或时间戳是什么。那是我无法控制的另一件事。

## 目前的计划

我已经阅读了有关使用`-Filter`的信息，并且我知道过滤器类似于函数，但我无法想出如何使用它们的任何想法。我目前唯一的想法是做类似的事情：

```
$searchList=Get-ChildItem "all instances of the MSI Package folder"

foreach($folder in $searchList){
    $listofFiles=Get-ChildItem "search for *.msi"

    foreach($file in $listofFiles){"Logic to copy MSI from source to destination"}
} 
```

但是......我认为可能有一种更有效的方法来做到这一点。

# 问题

1.  如何限制 Get-ChildItem 搜索的深度？
2.  如何将 Get-ChildItem 搜索限制为`C:\ProgramData\flx\Output\<APP-NAME>_<TIME_STAMP>\<APP-NAME>\MSI Package`
3.  如何仅搜索在过去 15 分钟内访问过的文件夹？当我知道 MSI 已被复制时，我不想浪费时间深入文件夹。

任何关于如何使这个脚本整体更有效率的额外建议也将不胜感激。

# 脚本

我当前的脚本可以在[这里](http://pastebin.com/uqVaX0Nt)找到。我不断收到：“您的帖子似乎包含未正确格式化为代码的代码”并在第四次尝试重新格式化后放弃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:03:41.803

你可以试试这个

```
dir C:\ProgramData\flx\Output\*\*\*\*\* -filter *.msi 
```

`.msi`搜索此级别的所有文件

```
C:\ProgramData\flx\Output\<APP-NAME>\_<TIME_STAMP>\<APP-NAME>\Repackaged or 'MSI Package' or whatever else present folder 
```

没有递归，这避免了太深的文件夹会给你带来错误。

将结果传送到：

```
Where {$_.LastAccessTime -gt (Get-Date).AddMinutes(-15)} #be sure no action on file is taken before the dir command 
```

或者

```
Where {$_.LastWriteTime -gt (Get-Date).AddMinutes(-15)} #some file can be re-copied maybe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:02:45.440

在 CB 的帮助下，这是我的新搜索，它消除了我遇到的问题。

*   更改`-Path`为`C:\ProgramData\flx\Output\*\*\*\*`帮助限制搜索的深度。
*   用于`-Filter`代替`-Include`并将`-Exclude`逻辑放入 where 子句中。

`Get-ChildItem -Path C:\ProgramData\flx\Output\*\*\*\* -Filter "*.msi" | where {$_.Name -notlike "*.Context.msi" -and $_.LastAccessTime -gt (Get-Date).AddMinutes(-15)}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:24:56.223

您不能限制 Get-ChildItem 的递归深度，除非不使用`-Recurse`即 Get-ChildItem 是 depth = 0 或 N。

为应用名称和时间戳设置变量，例如：

```
$appName = "foo" 
$timestamp = Get-date -Format HHmmss
Get-ChildItem "C:\ProgramData\flx\Output\${appName}_$timestamp\$appName\MSI Package" -force -r 
```

您可以像这样过滤结果：

```
Get-ChildItem <path> -R | Where {$_.LastWriteTime -gt (Get-Date).AddMinutes(-15)} 
```

# llvm - LLVM IR：有效地对向量求和

> ID：14741404
> 
> 赞同：7
> 
> 时间：2013-02-07T00:15:45.263
> 
> 标签：llvm, llvm-ir, llvm-3.2

我正在编写一个生成 LLVM IR 指令的编译器。我正在广泛使用向量。

我希望能够对向量中的所有元素求和。现在我只是单独提取每个元素并手动添加它们，但令我震惊的是，这正是硬件应该能够提供帮助的事情（因为这听起来像是一个非常常见的操作）。但似乎没有内在的做到这一点。

最好的方法是什么？我正在使用 LLVM 3.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:34:14.423

首先，即使不使用内在函数，您也可以生成`log(n)`向量加法（n 是向量长度）而不是`n`标量加法，这里有一个向量大小为 8 的示例：

```
define i32 @sum(<8 x i32> %a) {
  %v1 = shufflevector <8 x i32> %a, <8 x i32> undef, <4 x i32> <i32 0, i32 1, i32 2, i32 3>
  %v2 = shufflevector <8 x i32> %a, <8 x i32> undef, <4 x i32> <i32 4, i32 5, i32 6, i32 7>
  %sum1 = add <4 x i32> %v1, %v2
  %v3 = shufflevector <4 x i32> %sum1, <4 x i32> undef, <2 x i32> <i32 0, i32 1>
  %v4 = shufflevector <4 x i32> %sum1, <4 x i32> undef, <2 x i32> <i32 2, i32 3>
  %sum2 = add <2 x i32> %v3, %v4
  %v5 = extractelement <2 x i32> %sum2, i32 0
  %v6 = extractelement <2 x i32> %sum2, i32 1
  %sum3 = add i32 %v5, %v6
  ret i32 %sum3
} 
```

如果您的目标支持这些向量添加，那么似乎很可能会降低上述内容以使用这些指令，从而为您提供性能。

关于内在函数，没有与目标无关的内在函数来处理这个问题。但是，如果您正在编译到 x86，您确实可以访问`hadd`内部函数（例如`llvm.x86.int_x86_ssse3_phadd_sw_128`，将两个`<4 x i32>`向量相加）。您仍然需要执行与上述类似的操作，只能`add`替换说明。

有关这方面的更多信息，您可以搜索“水平和”或“水平向量和”；例如，这里有一些关于 x86 水平总和的相关 stackoverflow 问题：

*   [8 个压缩的 32 位浮点数的水平总和](https://stackoverflow.com/questions/13879609/horizontal-sum-of-8-packed-32bit-floats)
*   [使用 AVX 指令进行水平向量求和的最快方法](https://stackoverflow.com/questions/9775538/fastest-way-to-do-horizontal-vector-sum-with-avx-instructions)
*   [在 x86 上进行水平浮点向量求和的最快方法](https://stackoverflow.com/questions/6996764/fastest-way-to-do-horizontal-float-vector-sum-on-x86)

# vb.net - 将 DataGridView_1 (DGV) 分配给 DGV_2 并且 DGV_2 不会更新

> ID：14741408
> 
> 赞同：0
> 
> 时间：2013-02-07T00:15:52.217
> 
> 标签：vb.net, datagridview

自从两年前开始使用 VB.NET 通过拖网论坛以来，我已经成功地找到了所有问题的答案，但这一次我失败了，我决定加入我最喜欢的论坛，在那里我总能找到最好的答案。这个 ：-）

我有点像初学者，所以给你们装弹枪，因为我们开始了……

在我的主窗体中，我有一个 DGV（称为“gridDisplay”）来显示数据。此 DGV 是只读的，因为它仅用于显示数据，而不是与之交互。

我有一个类（称为“TaskData”）的任意数量的副本，其中包含要显示的数据，并且要在主窗体中显示的数据是活动的“TaskData”类的数据。

我想出了一个绝妙的想法（我现在有疑问......）让 TaskData 类创建一个 DGV，因为它知道其中有什么数据以及如何显示它，然后我必须在主窗体中做所有事情是将那里的 DGV 设置为 Active TaskData 类的 DGV（请参见下面的代码）

```
With ActiveTask

    'Assign the active DataDisplay to the one in the main form
    Me.gridDisplay = .TaskData.DataDisplay
    Me.gridDisplay.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.AutoSizeToAllHeaders
    Me.gridDisplay.Refresh() 'Trying to make it update
    Me.gridDisplay.Update() 'Trying to make it update
    MsgBox("Row count: " & Me.gridDisplay.RowCount)
End With 
```

好的，所以 .TaskData.DataDisplay 中的 DGV 有 1 列和 500 行。主窗体中的 One 设置为默认 2 列且无行（在设计器中设置）

在上面的代码之后，在主窗体中视觉上什么都没有发生。仍然是 2 列和 0 行。但是，文本框显示：“行数：500”如果我在那里放置一个断点，我可以检查 Me.gridDisplay 并且它包含所有应该存在的数据。为什么不显示？将一个 DGV 分配给另一个 DGV 是不是在做一些不明智的事情？

任何帮助将非常感激。任何建设性的批评同样如此:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:19:43.650

我认为您应该在
Me.gridDisplay.Refresh()
Me.gridDisplay.Update()之前再次调用数据源

像这样，
gridDisplay.DataSource = dataset.Tables["your table"];

# jquery - 动态删除元素 Jquery .click 不触发

> ID：14741411
> 
> 赞同：0
> 
> 时间：2013-02-07T00:16:26.630
> 
> 标签：jquery

我正在编写一个脚本来动态创建和删除元素，添加元素效果很好。但是#removeText 函数没有触发，我假设是因为它是在页面完成加载之后创建的。如果#removeText click 函数是动态创建的，如何使其工作？

```
var i = 0;

$('#addText').on('click', function() {
    var div = $("#addText").closest('div').attr('id');

    $("<p><input type=\"text\" id=\"text" + i + "\" placeholder=\"Type something…\"><a href=\"#\" id=\"removeText\">Remove</a></p>").appendTo('#' + div);
});

$('#removeText').on('click', function() {
    console.log(1);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:18:09.533

如果`#removeText`调用时 DOM 中不存在`$("#removeText").on`，则不会绑定任何内容，因为没有任何内容可以绑定，因为它不存在。

一切都没有丢失。使用事件委托：

```
$(document).on('click', '#removeText', function () { 
```

您可能也应该这样做`#addText`。您也可以委托给 DOM 中已经存在的元素。

# java - ConcurrentModificationException 使我的应用程序崩溃

> ID：14741412
> 
> 赞同：0
> 
> 时间：2013-02-07T00:16:29.207
> 
> 标签：java, android

我的 Android 应用程序有一个 IntentService，它从 Facebook 请求 MessageThreads 对象列表，解析 JSON 响应以构建对象的 ArrayList：

```
ArrayList<MessageThread> mMessageThreads = new ArrayList<MessageThread>(); 
```

然后它在同一个服务中再次调用 FB，获取 MessageThread id 的名称并将它们与 MessageThread 对象匹配。此时，我有一个包含完整 MessageThread 对象的 ArrayList，并将它们插入到 SQLite 数据库中。

```
// save to db and broadcast
for (MessageThread message : mMessageThreads) {
    ((FBClientApplication)getApplication()).getMessagesData().insertOrIgnore(message.toContentValues();
} 
```

在哪里：

```
public void insertOrIgnore(ContentValues values) {
    SQLiteDatabase db = this.dbHelper.getWritableDatabase();
    db.insertWithOnConflict(TABLE, null, values, SQLiteDatabase.CONFLICT_IGNORE);
} 
```

通过 ACRA 报告，我间歇性地看到这条线

```
for (MessageThread message : mMessageThreads) 
```

抛出一个`ConcurrentModificationException`并且应用程序关闭。我一直无法在什么条件下隔离。我读到了这一点`Exception`，据我了解，当我们`ArrayList`在迭代它时删除项目时会发生这种情况，但我没有从列表中删除项目。非常感谢任何有助于解决此问题的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:20:04.077

当您在迭代它时添加项目时也会发生这种情况`ArrayList`，看起来您可以在此代码中执行此操作。

一般来说，`ArrayList`在迭代过程中发生的任何“结构修改”都可能导致 CME。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T03:36:15.287

您可以尝试做的是，当您迭代您的集合而不是使用原始集合时，您可以在那里制作副本，因此您将拥有类似的东西：

```
for (MessageThread message : new List<MessageThread>(mMessageThreads)) 
```

这将帮助您避免 CuncurrentModificationException。现在，如果您真的想变得花哨，可以使用同步块保护您的代码，例如：

```
synchronized(mMessageThreads){
    for (MessageThread message : new List<MessageThread>(mMessageThreads)){
    ...
} 
```

使用这最后一段代码，您将限制对 mMessageThreads 的访问，如果有人使用它，它将被锁定，因此如果其他人想要使用它需要等到第一个完成。

# javascript - 将元素href设置为其他元素id

> ID：14741416
> 
> 赞同：0
> 
> 时间：2013-02-07T00:16:36.100
> 
> 标签：javascript, jquery

我有一个菜单，我需要将每个菜单项的 href 设置为内容项 id，如下所示：

```
$(this).attr("href") = $(".element").attr("id"); 
```

我怎样才能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:18:52.210

要更改 href，请使用以下内容：

```
$("a").attr("href", $(".element").attr("id")) 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:18:48.187

```
$(this).attr("href",$(".element").attr("id")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T00:21:45.580

如果你有多个菜单项，你可以使用 jquery 的 each 函数：

```
$(".yourMenuItemsSelector").each(function(){

    $(this).attr("href",$(".element").attr("id"));

}); 
```

# c# - WebClient.DownloadFile 问题和响应标头（变化：协商，Pragma：无缓存）

> ID：14741421
> 
> 赞同：1
> 
> 时间：2013-02-07T00:16:49.487
> 
> 标签：c#, .net, fiddler

我有一个 SSIS 作业，在它的一个任务中，我使用了一个脚本任务（C# 代码），它试图`WebClient.DownloadFile`从给定的网站下载一个 CSV 文件（使用方法）以供后续阶段处理。

CSV 的下载每次都会失败，因此在尝试调查[此博客](http://blogs.msdn.com/b/ieinternals/archive/2009/10/03/internet-explorer-cannot-download-over-https-when-no-cache.aspx)的问题时，发现当 CSV 文件的 URL`Vary: negotiate`在`Pragma: no-cache`其响应标头中存在时，下载失败。IE8 是主机服务器上可用的最新版本的 IE，所以我对此没有发言权。尝试使用 IE8 下载 CSV 文件时显示以下错误：

![在此处输入图像描述](../Images/e32d8d4a02acc90fc2a11041117c80db.png)

尝试下载 CSV 文件时的响应标头：

![在此处输入图像描述](../Images/68886667546779dd84c82bb6a5bfca6e.png)

当我使用以下过滤器运行 Fiddler 时，CSV 的下载在 IE8 中按预期工作：

![在此处输入图像描述](../Images/45d5f7535edf72e6e263ed9ba793adda.png)

所以我的问题是我该怎么做`WebClient.DownloadFile`？我查看了 Fiddler.Core 但无法弄清楚如何做到这一点。我还研究了使用以下方法简单地运行 Fiddler：

```
 ProcessStartInfo startInfo = new ProcessStartInfo();
  startInfo.FileName = @"C:\PROGRA~1\Fiddler2\Fiddler.exe"; 
```

但是上述方法的问题是，当 Process.Kill() 被调用时，Fiddler 没有机会自行清理并留下其代理......等导致其他应用程序的连接中断。

有人能告诉我如何处理这种情况吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:09:50.950

.NET WebClient 实现不受您在上面引用的我的 IEInternals 博客文章中描述的限制。WebClient 直接基于套接字，而不是 WinINET。您的问题与这些标题无关。

# java - Hibernate：javax.naming.NoInitialContextException（使用Hibernate生成的DAO）

> ID：14741425
> 
> 赞同：2
> 
> 时间：2013-02-07T00:17:28.417
> 
> 标签：java, eclipse, hibernate, dao

我是休眠的新手。使用来自 Eclipse indigo 的 Hibernate 3.0。

该主题在这里讨论，答案没有帮助，[Hibernate: javax.naming.NoInitialContextException (Component Mapping via Annotations)](https://stackoverflow.com/questions/6293052/hibernate-javax-naming-noinitialcontextexception-component-mapping-via-annotat?answertab=active#tab-top) 即我尝试从 session-factory 中删除 name 并仍然收到错误。

我错过了什么吗？有人能帮忙吗？

错误如下：

```
Feb 6, 2013 3:59:05 PM PatternsHome getSessionFactory
SEVERE: Could not locate SessionFactory in JNDI
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:662)
at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:305)
at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:342)
at javax.naming.InitialContext.lookup(InitialContext.java:409)
at PatternsHome.getSessionFactory(PatternsHome.java:26)
at PatternsHome.<init>(PatternsHome.java:21)
at OutputProcessing.saveData(OutputProcessing.java:47)
at OutputProcessing.FPFileOutputWriter(OutputProcessing.java:110)
at OrderPatternFileCreate.main(OrderPatternFileCreate.java:84)
Exception in thread "main" java.lang.IllegalStateException: Could not locate SessionFactory in JNDI
at PatternsHome.getSessionFactory(PatternsHome.java:29)
at PatternsHome.<init>(PatternsHome.java:21)
at OutputProcessing.saveData(OutputProcessing.java:47)
at OutputProcessing.FPFileOutputWriter(OutputProcessing.java:110)
at OrderPatternFileCreate.main(OrderPatternFileCreate.java:84) 
```

休眠配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                     "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">root</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost/test</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
  <property name="show sql">true</property>
  <mapping resource="hibernate_db_mapping.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

DAO 文件由 Hibernate 生成，大纲如下：

```
public class PatternsHome {

private static final Log log = LogFactory.getLog(PatternsHome.class);

private final SessionFactory sessionFactory = getSessionFactory();

protected SessionFactory getSessionFactory() {
    try {
        return (SessionFactory) new InitialContext()
                .lookup("SessionFactory");
    } catch (Exception e) {
        log.error("Could not locate SessionFactory in JNDI", e);
        throw new IllegalStateException(
                "Could not locate SessionFactory in JNDI");
    }
}
    .....
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:33:19.443

我无法单独完成这项工作。但是我使用 HibernateUtil 创建了一个通用 DAO 并使用

```
 sessionFactory = new Configuration().configure(new File("hibernate.cfg.xml")).buildSessionFactory(); 
```

并使用在我的 DAO 中访问数据库

```
Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = null;
    try{
        transaction = session.beginTransaction();
        session.save(myData);
        transaction.commit();
        System.out.println("Data is Saved");
    }catch(Exception e){
        e.printStackTrace();
    }finally{
        session.close();
    } 
```

这行得通。

# python - 插入排序实现

> ID：14741426
> 
> 赞同：-1
> 
> 时间：2013-02-07T00:17:31.773
> 
> 标签：python, sorting

我不确定为什么我的插入排序不起作用。它是用python编码的。当我尝试测试输入时，我得到 [4]。

```
 def insertion_sort(list):
        q =0
        temp = []  #list to hold sorted values
        size = len(list)
        while(q < size):
          if not temp: #if empty add first element of list
              temp.append(list[0])
          list = list[1:len(list)] #update list so it doesn't include first element
          for i in range(1,len(temp)):  #insertion step
              if(len(temp)==1):
                  if(list[0] > temp[0]): #if temp is size 1 insert element before/after
                      temp.append(list[0])
                  else:
                      temp.insert(0,list[0])

              else:
                  if(list[0] >= temp[i-1] and list[0] <= temp[i]): #insert value between two values
                      temp.insert(i,list1[0])
                  if(list[0] <= temp[0]):           # if less than min insert first
                      temp.insert(0,list1[0])
                  if(list[0] >= temp[len(temp)-1]): # if greater than max, insert last
                      temp.insert(len(temp),list[0])
          q=q+1
        return temp 

  list = [4,3,2,1] 
  print insertion_sort(list) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:26:37.063

不要自己实现。使用`sorted()`内置：

```
>>> mylist = [4,5,6,7,8,9,1]
>>> sorted(mylist)
[1,4,5,6,7,8,9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:32:46.743

您是否需要创建新的插入排序代码，或者您只是对它为什么不起作用感兴趣？这是[DaniWeb](http://www.daniweb.com/software-development/python/code/216689/sorting-algorithms-in-python)提供的插入排序：

```
def insertion_sort(list2):
for i in range(1, len(list2)):
    save = list2[i]
    j = i
    while j > 0 and list2[j - 1] > save:
        list2[j] = list2[j - 1]
        j -= 1
        list2[j] = save
return list2 
```

# ruby-on-rails - 获取 Ruby on Rails 应用程序的主机/URL？扩展

> ID：14741427
> 
> 赞同：1
> 
> 时间：2013-02-07T00:17:34.587
> 
> 标签：ruby-on-rails, ruby, url

我已经阅读了另一个标题相同的问题，它实际上并没有获得应用程序的 URL。它获取当前页面的 URL，该 URL 非常接近，并且非常适合问题的需要。可悲的是，我没有当前页面，甚至没有控制器。

我想获取应用程序的 HOST/URL。从工人 DYNO 内部。

我现在在 Heroku 上有两个“应用程序”......一个测试和一个生产。从技术上讲，两者都是生产，一个是测试版，另一个是发布的。

我希望能够找出应用程序的 URL，因为我将数据发送给第三方，并且我想包含一个返回系统的链接（和特定记录）......

更多细节：
我有一个工人向 eBay 发送一个包含产品详细信息的 XML 文件。在产品详细信息中，有一个与 HTML 兼容的“描述”的空间。我希望在其中有一个返回我的系统的链接，以便查看者可以看到超出 eBay 显示能力的详细信息。因此我需要我的系统的 URL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T00:22:05.467

您可以使用以下方法访问 Rails 应用程序的路由助手：

```
Rails.application.routes.url_helpers 
```

要从此模块访问帮助程序，只需调用其上的方法并将主机传递给它：

```
Rails.application.routes.url_helpers.products_url(:host => "example.com") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:53:23.923

ENV / config 中没有任何内容，但您可以添加它：

`heroku config:add HOST=warmmist837.herokuapp.com`

或者更好

`heroku config:add BETA=1`

然后在代码中你可以说`ENV['HOST']`或`ENV['BETA']`

通常在 Rails 代码中我会说`Request.host`，但我认为这不会有帮助，因为你是在工作人员而不是机架请求中。

另外，如果您担心使用此设置在本地工作，如果您可能应该使用 RVM，您可以将导出语句添加到 .rvmrc

`export HOST=my.localmachine.com`

# jquery - 使用 jquery 在 DOM 中移动动态加载的内容

> ID：14741431
> 
> 赞同：0
> 
> 时间：2013-02-07T00:17:52.557
> 
> 标签：jquery, dom, blogs

我正在使用博客模板 - squarespace 6，它不允许我访问 .html / 并且只能访问 .css

每次我创建博客文章时，我都会为其添加标签和类别 - 但这些标签/类别放置在博客文章的底部。我正在尝试将它们移至侧边栏。

问题是我每页有多个博客文章，我正在尝试使用 jquery 来选择`.tags`和`.category`类并将它们移动到`.sidebar`前面的`.date`代码中，如下所示：

```
$(document).ready(function(){

var $categories = $('div.categories').parent('article');
var $spanDate =('span.date').parent('article');  

$categories.insertBefore($spanDate);

}); 
```

*（此代码只是 .categories 的示例）*

问题是这段代码从每篇博客文章中获取标签/类别并将其应用于每个侧边栏，因此类别和标签会混淆。

我正在尝试获取代码来选择父文章的`.tags`和`.category`，然后将它们移动到 . `sidebar`同一个父母`article`。

我不能使用任何特定的 ID，因为我希望这适用于每篇博客文章 - 但标签/类别需要保留在该文章中。

注入的代码很多，但HTML的基本结构如下：

```
<blog>  //Wrapper for the whole blog page
<content>
<article> //Each article is a blog entry
  <section class="main"> //Contains the contents of the blog entry. This also has a dynamically generated ID, 
    //Blog Entry Content Goes Here
    <footer>
      <div class="meta"> //Contains the tags/categories I try to pull out of the DOM
        <span class="tags"></span> //Contains the tags each wrapped in an `<a>`
        <span class="categories"></span> //Contains the category tags
      </div>
    </footer>
   </section>
   <section class="sidebar"> //This is where I'm trying to place the tags/categories
     <span class="date"></span> //I try to place the category before this in the jquery code above
     <more spans....> // I try to place the tags appended onto the end of the sidebar (code not shown above).
   </section>
</article>
<article></article> //More blog entries with same structure
<article></article> //More blog entries with same structure
<article></article> //More blog entries with same structure
</content>
</blog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:31:14.520

如果我的理解正确，应该这样做：

```
$('div.categories').each(function(){
    var $this = $(this);
    var $date = $this.closest("article").find(".date");

    $this.insertBefore($date);
}); 
```

关键是对于每一个`.categories`我都找到相关的`.date`而不是所有`.date`的。此外，您的代码不应该对提供的 html 做任何事情。您`.categories`或您`.date`都没有`article`.

# c# - 会员忘记密码链接

> ID：14741432
> 
> 赞同：0
> 
> 时间：2013-02-07T00:18:09.640
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-membership

希望在我的 MVC4 会员资格上实施忘记密码链接。我已经对其进行了一些更改，以了解我在注册时获取的信息并为 google openAuth 打开了大门

我知道我无法为 google 和其他开放式身份验证服务提供忘记密码，但对于我的本地用户，我想提供忘记密码的链接。

有谁知道任何关于最佳实践的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:28:57.883

这是一个很好的白皮书，讨论了来龙去脉和一些陷阱：

[最佳实践](http://www.fishnetsecurity.com/sites/default/files/media/10WP0003_BestPractices_SecureForgotPassword%5B1%5D_0.pdf)

# c++ - 替代虚拟类型定义

> ID：14741442
> 
> 赞同：7
> 
> 时间：2013-02-07T00:18:53.943
> 
> 标签：c++, templates, polymorphism, typedef

我有一个接口 IEnumerable 用于 List<>、Array<> 和 Dictionary<> 的模板类。我希望使用 typedef 来获取他们的模板类型 T。

我希望做以下事情。

```
class IEnumerable
{
public:
    virtual typedef int TemplateType;
} 
```

然后在继承的成员中覆盖，但你不能创建一个虚拟类型定义。那么有没有其他方法可以获取未知模板类的类型（IEnumerable 不是模板）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T02:35:23.600

好吧，这是评论中讨论的内容，以防以后有相同问题的人发现这一点。

基本上，您想做类似于 C# 的 List<>、Array<>、IEnumerable 和 IEnumerator 的事情。但是，您不想创建通用父类 Object，因为这可能意味着您每次都需要进行 dynamic_cast。

此外，您不想让 IEnumerable 成为模板，因为您不想在使用集合时知道类型。

事实上，使用 C++11，您**可以使用隐式类型关键字****auto**使 IEnumerable 成为模板，而不必知道类型，这是 C++11 等效于 c# 的**var**关键字。

所以要做到这一点，你可以做的是：

```
 template <class T>
 class IEnumerable { 
     public:
        virtual IEnumerator<T> getEnumerator() = 0; 
        // and more stuff
 } 
```

然后

```
 template <class T>
  class List : public IEnumerable<T> { 

  public:
         virtual IEnumerator<T> getEnumerator() { 
               return ListEnumerator<T>(this); 
         }
  } 
```

和

```
 template <class T>
  class ListEnumerator : public IEnumerator<T> { 
  public:
        T getNext();   // or something to this effect
        // and more stuff
  } 
```

最后，在使用它时，您可以执行以下操作：

```
 List<int> myList;

  auto i = myList.getEnumerator();
  int z = i.getNext()+1; 
```

# r - 求和而不是频率的 R 直方图

> ID：14741443
> 
> 赞同：1
> 
> 时间：2013-02-07T00:19:00.740
> 
> 标签：r, histogram

我是使用 R 的新手，我正在尝试生成一个直方图，其中轴显示另一列的总和，而不仅仅是频率计数。

**例如**
，我有一个包含两列 RATE 和 BALANCE 的矩阵。我想生成一个直方图，显示余额总和，而不仅仅是记录计数。

`hist(mydata$RATE)`#only 显示频率。我如何求和`mydata$BALANCE`

我想生成一个对 BALANCE 列求和的直方图，而不仅仅是进行记录计数。类似`hist(mydata$RATE, mydata$BALANCE)`但显然 hist 函数似乎没有采用 sum 参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:07:40.267

听起来您正在尝试绘制条形图。相应的功能`barplot`可能会有所帮助。

首先，正如@DWin 所建议的，[创建一些可重现的数据](https://stackoverflow.com/q/5963269)：

```
set.seed(1) # Sets the starting seed for pseudo-random number generation
mydata <- data.frame(RATE = sample(LETTERS[1:5], 100, replace = TRUE),
  BALANCE = rpois(100, 15) * 10) 
```

然后使用函数创建汇总数据`tapply`。这将计算`BALANCE`变量的每个值的`RATE`变量总和。

```
plotdata <- tapply(mydata$BALANCE, mydata$RATE, FUN = sum) 
```

然后使用`barplot`：

```
barplot(plotdata) 
```

![在此处输入图像描述](../Images/32c31b7945a021cf1fd0e7d78686e94b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:22:53.937

这不是我们可以测试以查看它是否符合您的期望的示例，（并且也不清楚您所说的“采用总和参数”是什么意思），但试试这个：

```
hist( cumsum( mydata$BALANCE) ) 
```

# codeigniter-routing - Codeigniter路由如何允许空参数

> ID：14741445
> 
> 赞同：0
> 
> 时间：2013-02-07T00:19:27.423
> 
> 标签：codeigniter-routing

我想分页我的索引 http:localhost/mysite/home 但是如果我只写这个 http:localhost/mysite/home 页面说：“找不到页面”，但是如果我写 http:localhost/mysite/home/3 它的工作！如何配置路由以获取空参数？我尝试使用 (:any) 和 (num) 但不起作用

我的路线文件是：

```
 $route['404_override'] = 'welcome/no_found';
       $route['home/'] = "welcome/home/$1"; 
```

我的控制器：

```
 $config['base_url'] =  base_url().'/mysite/home';
      $config['total_rows'] = $this->mtestmodel->countNews();
      $config['per_page'] = 2; 
      $config['num_links']   = 20;
      $this->pagination->initialize($config); 
      $data['paginator']=$this->pagination->create_links();
      $data['news']=$this->mtestmodel->show_news( $config['per_page'],intval($to) ); 
```

//$to是url中的参数 base_url()/mysite/home/3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:59:14.313

将您的`route.php`文件更改为以下内容：

```
$route['404_override'] = 'welcome/no_found';
$route['home/(:num)']  = "welcome/home/$1";
$route['home']         = "welcome/home"; 
```

这样，您的应用程序将捕获两个请求（`http://localhost/mysite/home`和`http://localhost/mysite/home/3`），并将它们都发送到您的控制器。

然后，您应该能够访问您的`$to`变量（已作为第一个参数传递到控制器的函数中）或`$this->uri->segment(2)`改为使用。

例如

```
public function home($to = 0) {
    $config['base_url']    =  base_url().'/mysite/home';
    $config['total_rows']  = $this->mtestmodel->countNews();
    $config['per_page']    = 2; 
    $config['num_links']   = 20;
    $this->pagination->initialize($config); 
    $data['paginator']     = $this->pagination->create_links();
    $data['news']          = $this->mtestmodel->show_news( $config['per_page'],intval($to) );

} 
```

希望有帮助！

# mysql - 将HDFS数据文件导入mysql

> ID：14741446
> 
> 赞同：1
> 
> 时间：2013-02-07T00:19:29.620
> 
> 标签：mysql, hadoop, mysqlimport

我正在尝试将大型 HDFS 文件导入 mysql 数据库。文件中的数据由“^A”分隔。如何告诉mysql用ctrl-A分隔每一列？另外，我是否可以指定要导入的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:24:36.340

请参阅此处的文档：

[http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html](http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html)

您正在寻找`--fields-terminated-by=string`选项。虽然您可以使用`--columns=column_list`将数据中的列映射到表中的字段，但无法选择仅选择某些字段进行导入。

# mysql - 将数据库移动到另一台服务器

> ID：14741447
> 
> 赞同：0
> 
> 时间：2013-02-07T00:19:40.690
> 
> 标签：mysql, mysqldump, mysqldumpslow

我正在使用 mysqldump 将我的数据库移动到另一台服务器。但数据库有数百万行的表，mysql 恢复需要太长时间（4 小时）。
有什么方法可以让我更快地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:27:44.390

是的，您可以杀死源服务器上的 mysqld，一旦它关闭，您可以将整个 datadir 复制到新服务器并在复制完成后启动两个服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:34:48.303

这是我过去使用 mysql 复制的方法

在打开二进制日志的源计算机上转储 SQL（使用该`--master-data`选项），这将为您提供该时间点的数据，并允许您在旧服务器上填充新数据时导入新服务器上的数据。

导入后（你说 4 小时？）然后你可以`START SLAVE`在新服务器上，新服务器将重放二进制日志并赶上旧服务器并保持同步，直到实际切换发生。

[如何设置mysql复制](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

# macos - 为什么 Silverlight 5 在 Mac OS X 10.8.2 上无法始终如一地运行？

> ID：14741451
> 
> 赞同：3
> 
> 时间：2013-02-07T00:20:15.063
> 
> 标签：macos, silverlight

我有客户向我展示 Mac OS X 核心转储，这些转储显示在 Mac 上打开默认 Silverlight 首选项时，对 Mac OS X 进行的调用会导致信号中止 (SIGABRT)。此外，我们的 Silverlight 5 应用程序不会在该机器上启动。

Silverlight 5，我的意思是 5.1.10411.0。

似乎遇到最大麻烦的客户正在使用 Mac OS X 10.8.2（最新的 Mountain Lion）

我有一台可以完美运行 Silverlight 5 的 Mac，但它是 Mac OS X 10.6.8 机器（Snow Leopard）。我们的应用程序也在该 Mac 机器上按预期运行。

互联网上有很多证据表明很多人都遇到过同样的问题。有许多所谓的“神奇”解决方案，但最终用户必须跳过障碍才能使其发挥作用似乎并不正确。人们在 Mac 上遇到 Netflix 问题，以及一个名为 MacKeeper 的程序弄乱 Silverlight 安装的问题。我只想知道是什么导致了这样的问题？是不是每当 Mac 推出新版本的 Mac OS X 时，微软都没有始终如一地测试 Silverlight，还是苹果更有可能出于某种原因故意故意颠覆 Microsoft Silverlight（以及其他程序） ? 使用 Microsoft Office，Mac OS X 10.8.2 上显然发生了很多随机崩溃，和其他非 Microsoft 应用程序。有人对这背后的原因有任何见解吗？Silverlight 在您的 Mac OS X 10.8.2 机器上是否适合您？

谁在这件事上有过错？苹果还是微软？两个都？两者都不？

微软表示他们计划在 2021 年之前支持 Silverlight。但是否有潜台词表明它真的只在 Windows 上受支持？对于许多决策者来说，首先在 Silverlight 中制作应用程序的全部意义在于它能够在 Mac 上运行。为什么苹果和微软不能很好地发挥作用，至少在互操作性被展示和营销为可以依赖的东西的特定情况下才能正常工作。（为什么我们不能相处融洽？停下。那是修辞。）

微软是否在旧版本的 Mac OS X 上测试 Silverlight 只是为了让 Apple 在 Mac OS X 的下一个版本中改变一些东西？

我的客户和 Internet 上的其他人是否在做一些不支持的事情，例如运行破坏 Silverlight 安装过程的第 3 方实用程序？

这最终会成为某种权限问题吗？

Mac OS X 10.8.2 是简单的错误还是通常不稳定？是否有其他应用程序会在 Mountain Lion 上崩溃？必须做些什么来避免这种情况 - Apple 是否已弃用某些 API 调用？

欢迎理论、推测、内幕见解和其他类型的输入！

请不要对公司实体进行激烈的抨击，因为那是没有意义的。我只是想知道如何解决这个问题，以及打电话给谁来让事情发生。我不想知道谁是“邪恶的”——我只想知道谁没有正确地完成他们的工作。

这是在 Silverlight 上崩溃的线程，只是试图显示其首选项：

```
> Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x9114da6a __pthread_kill + 10
1   libsystem_c.dylib               0x99467acf pthread_kill + 101
2   libsystem_c.dylib               0x9949e4f8 abort + 168
3   com.microsoft.net.coreclr       0x0a00b8d4 0xa000000 + 47316
4   com.microsoft.net.coreclr       0x0a00b958 0xa000000 + 47448
5   com.microsoft.net.coreclr       0x0a00b3e8 0xa000000 + 46056
6   com.microsoft.net.coreclr       0x0a103b27 GetCLRRuntimeHost + 193895
7   com.microsoft.net.coreclr       0x0a037553 PAL_InitializeCoreCLR + 58243
8   com.microsoft.net.coreclr       0x0a10130c GetCLRRuntimeHost + 183628
9   com.microsoft.net.coreclr       0x0a101445 GetCLRRuntimeHost + 183941
10  com.microsoft.net.coreclr       0x0a1069a6 GetCLRRuntimeHost + 205798
11  com.microsoft.net.coreclr       0x0a106b5b GetCLRRuntimeHost + 206235
12  com.microsoft.net.coreclr       0x0a1c94be GetCLRRuntimeHost + 1003262
13  com.microsoft.net.coreclr       0x0a1ca005 GetCLRRuntimeHost + 1006149
14  com.microsoft.net.coreclr       0x0a27a5ea GetCLRRuntimeHost + 1728554
15  com.microsoft.net.coreclr       0x0a339c94 GetCLRRuntimeHost + 2512596
16  com.microsoft.silverlight       0x000050ac start + 5624
17  libobjc.A.dylib                 0x9279e586 -[NSObject performSelector:] + 62
18  com.apple.CoreFoundation        0x90f1bb64 -[NSSet makeObjectsPerformSelector:] + 228
19  com.apple.AppKit                0x97263011 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1180
20  com.apple.AppKit                0x97241572 loadNib + 373
21  com.apple.AppKit                0x9724094a +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 233
22  com.apple.AppKit                0x973919a4 +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 154
23  com.apple.AppKit                0x9724061f +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 709
24  com.apple.AppKit                0x9723c498 NSApplicationMain + 447
25  com.microsoft.silverlight       0x00003baf start + 251
26  com.microsoft.silverlight       0x00003add start + 41 
```

# sql - 将 SELECT DISTINCT 或替代方法与 3 个表查询一起使用

> ID：14741453
> 
> 赞同：0
> 
> 时间：2013-02-07T00:20:35.477
> 
> 标签：sql, select, distinct

在这里，我有一个 SQL 语句，它正在检索所有正确的东西，但我需要它是 DISTINCT。

因此，对于 WEEK_NUMBER，其返回的 week_number = 1,1,1,1,1,1 等

我希望它浓缩为 1。这是一个 3 表查询，我不确定如何包含 SELECT DISTINCT 功能或替代方案，有什么想法吗？

```
SELECT WEEKLY_TIMECARD.*,DAILY_CALCULATIONS.*,EMPLOYEE_PROFILES.EMPLOYEE_NUMBER
FROM WEEKLY_TIMECARD, DAILY_CALCULATIONS, EMPLOYEE_PROFILES 
WHERE EMPLOYEE_PROFILES.EMPLOYEE_NUMBER = WEEKLY_TIMECARD.EMPLOYEE_NUMBER
AND EMPLOYEE_PROFILES.EMPLOYEE_NUMBER = DAILY_CALCULATIONS.EMPLOYEE_NUMBER
AND WEEKLY_TIMECARD.WEEK_NUMBER = DAILY_CALCULATIONS.WEEK_NUMBER 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:23:52.097

你应该添加`GROUP BY WEEK_NUMBER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:37:29.710

试试这个：

```
SELECT DISTINCT WEEKLY_TIMECARD.WEEK_NUMBER
FROM 
  WEEKLY_TIMECARD, 
  DAILY_CALCULATIONS, 
  EMPLOYEE_PROFILES 
WHERE EMPLOYEE_PROFILES.EMPLOYEE_NUMBER = WEEKLY_TIMECARD.EMPLOYEE_NUMBER
  AND EMPLOYEE_PROFILES.EMPLOYEE_NUMBER = DAILY_CALCULATIONS.EMPLOYEE_NUMBER
  AND WEEKLY_TIMECARD.WEEK_NUMBER = DAILY_CALCULATIONS.WEEK_NUMBER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:42:58.947

由于您要显示表中的所有字段，`WEEKLY_TIMECARD`并且`DAYLY_CALCULATIONS`如果您使用，`SELECT DISTINCT...`您最终可能会遇到与您现在遇到的完全相同的情况（许多行具有相同的值）。

除了`DISTINCT`和`GROUP BY`用法，您还需要考虑以下几点：

1.  你*真的*需要所有的领域吗？如果你这样做，那么也许你*确实*需要重复的值。如果您不这样做，只需包含您需要的字段。
2.  您需要汇总数据吗？或者您只需要对这些值进行重复数据删除？如果需要聚合数据，则*必须*使用`GROUP BY`, 和适当的聚合函数。如果您不需要聚合数据，我建议您不要使用`GROUP BY`，因为它会使您的查询执行非常缓慢（这可能取决于您使用的 RDBMBS）。
3.  无论您选择哪种解决方案，请确保您的表已正确编入索引。

除此之外，我会使用`INNER JOIN`显式定义您的数据之间的关系（而不是使用`WHERE`条件隐式定义它们）......但这是我个人的偏好。

# regex - 正则表达式替换特殊字符，仅当不是单词的一部分时

> ID：14741454
> 
> 赞同：0
> 
> 时间：2013-02-07T00:20:39.553
> 
> 标签：regex

我有以下字符串：

```
'United Breaks Guitars': Did It Really Cost The Airline $180 Million? http://ow.ly/htPVk 
```

目前，我的正则表达式模式如下所示：`[^A-Za-z-0-9- - / -$]`

我不是正则表达式方面的专家，我一直在使用[这个工具](http://gskinner.com/RegExr/)来解决问题，但我被困住了。

我想删除诸如`'`, `"`,`:`等字符。到目前为止，使用上述模式，突出显示的字符已从我的示例字符串中删除：

`'`United Breaks Guitars`'` `:`真的让航空公司损失了 1.8 亿美元`?`http : `:`//ow `.`ly/htPVk

上面的问题是我不想从 URL中删除`:`and 。`.`但是如果字符串以句点结尾，我想删除它。此外，撇号`'`字符应保留，以防它用于省略字符或作为所有物。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:54:34.607

取决于您如何定义“单词的一部分”，URL 不是一个单词。

如果您将“单词的一部分”定义为由非空格字符包围，那么您可以使用以下内容：

```
(?<!\S)[^\w $-]+|[^\w $-]+(?!\S) 
```

`(?!\S)`是一种更简短的说法`(?=\s|$)`，同样适用于后视。

# sql-server-2008 - 子查询不返回结果

> ID：14741456
> 
> 赞同：0
> 
> 时间：2013-02-07T00:20:47.443
> 
> 标签：sql-server-2008, subquery, case

我正在创建一个包含多个子查询的大型 SELECT 查询。每个子查询都可以正常工作，除了其中一个（“吨/米”）。我使用了与其他人相同的链接和值，但是它确实在不同的数据库中使用了不同的表。但是语法对我来说看起来是正确的，如果我把有问题的子选择拉出来并自己运行它，它就可以工作。

这是成功返回其中一行的 TEST 子选择（带有硬编码参数）...

```
 SELECT SUM((OreNo*CONVERT(decimal(10,2),ISNULL(round((Code1),2),0))) + (WasteNo*CONVERT(decimal(10,2),ISNULL(round((Code2),2),0))) + (WFG*CONVERT(decimal(10,2),ISNULL(round((Code3),2),0))))
  FROM BETA..Bogging, BETA..Equipment, OperationalAssetDetail
  WHERE EquipmentName = 'LD038' and
  OperationalAssetDetail.Name = EquipmentNameMainpac and
  BETA..Bogging.EquipmentID = BETA..Equipment.EquipmentID and
  '2013-01' = RTRIM(CAST(DATEPART(year, Date) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, Date) AS CHAR)),2) 
```

...这是它返回的行...

（无列名）33900.00

...但后来我将它包含在主查询中，它返回 null ...

```
declare @myAsset varchar(50)
set @myAsset = 'LD038'

select Name, months, 

ISNULL(
(
select CONVERT(decimal(10,2),ISNULL(round(ClassValue2,2),0))
from OperationalAssetDetail
where 
Name = @myAsset and 
SortKeyName = 1000 and
months >= RTRIM(CAST(DATEPART(year, InstallDate) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, InstallDate) AS CHAR)),2)  and
months <= RTRIM(CAST(DATEPART(year, ExpiryDate) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, ExpiryDate) AS CHAR)),2)
)
,0) as 'Ownership Cost',

(
select CONVERT(decimal(10,2),ISNULL(round(sum(AdditionalCost),2),0))
from Transactiondetail
where 
AccountStructureName like '%1625' and
OperationalAssetName = OperationalAssetDetail.Name and
ResourceName = 'Issue' and
months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
) as 'Operating Cost',

(
select CONVERT(decimal(10,2),ISNULL(round(sum(AdditionalCost),2),0))
from Transactiondetail
where 
AccountStructureName like '%1627' and
OperationalAssetName = OperationalAssetDetail.Name and
ResourceName = 'Issue' and
months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
) as 'Component Cost',

(
select CONVERT(decimal(10,2),ISNULL(round(sum(AdditionalCost),2),0))
from Transactiondetail
where 
AccountStructureName like '%1628' and
OperationalAssetName = OperationalAssetDetail.Name and
ResourceName = 'Issue' and
months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
) as 'Tyre Cost',

(
select CONVERT(decimal(10,2),ISNULL(round(sum(AdditionalCost),2),0) + ClassValue2)
from Transactiondetail
where 
(AccountStructureName like '%1625' OR AccountStructureName like 'DM%1627' OR AccountStructureName like 'DM%1628') and
OperationalAssetName = OperationalAssetDetail.Name and
ResourceName = 'Issue' and
months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
) as 'Total Cost',

CASE OperationalAssetDetail.Name 
WHEN 'DR%' THEN
      (
      select CONVERT(decimal(10,2),ISNULL(round(sum(Value),2),0))
      from UsageDetail
      where (OperationalAssetName LIKE OperationalAssetDetail.Name + '-07' OR OperationalAssetName LIKE OperationalAssetDetail.Name + '-08') and
      months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
      )
WHEN 'LH%' THEN
      (
      select CONVERT(decimal(10,2),ISNULL(round(sum(Value),2),0))
      from UsageDetail
      where OperationalAssetName = OperationalAssetDetail.Name + '-08' and
      months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
      )
ELSE
      (
      select CONVERT(decimal(10,2),ISNULL(round(sum(Value),2),0))
      from UsageDetail
      where OperationalAssetName = OperationalAssetDetail.Name and
      months = RTRIM(CAST(DATEPART(year, createtime) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, createtime) AS CHAR)),2) 
      )
END as 'Engine Hours',

CASE OperationalAssetDetail.Name 
WHEN 'LD%' THEN
      (
      SELECT SUM((OreNo*CONVERT(decimal(10,2),ISNULL(round((Code1),2),0))) + (WasteNo*CONVERT(decimal(10,2),ISNULL(round((Code2),2),0))) + (WFG*CONVERT(decimal(10,2),ISNULL(round((Code3),2),0))))
      FROM BETA..Bogging, BETA..Equipment, OperationalAssetDetail
      WHERE EquipmentName = @myAsset and
      OperationalAssetDetail.Name = EquipmentNameMainpac and
      BETA..Bogging.EquipmentID = BETA..Equipment.EquipmentID and
      months = RTRIM(CAST(DATEPART(year, Date) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, Date) AS CHAR)),2) 
      )            
END as 'Tonnes/Metres'

from months, OperationalAssetDetail
where 
Name = @myAsset and 
SortKeyName = 1000 and
months >= RTRIM(CAST(DATEPART(year, InstallDate) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, InstallDate) AS CHAR)),2)  and
months <= RTRIM(CAST(DATEPART(year, CURRENT_TIMESTAMP) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, CURRENT_TIMESTAMP) AS CHAR)),2) 
```

...这是结果...

```
Name    months  Ownership Cost  Operating Cost  Component Cost  Tyre Cost   Total Cost  Engine Hours    Tonnes/Metres
LD038   2010-08 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2010-09 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2010-10 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2010-11 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2010-12 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-01 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-02 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-03 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-04 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-05 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-06 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-07 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-08 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-09 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-10 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-11 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2011-12 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-01 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-02 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-03 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-04 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-05 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-06 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-07 45072.37    0.00    0.00    0.00    45072.37    0.00    NULL
LD038   2012-08 45072.37    0.00    0.00    0.00    45072.37    7659.00 NULL
LD038   2012-09 45072.37    839.49  0.00    0.00    45911.86    191.00  NULL
LD038   2012-10 45072.37    2817.43 0.00    20382.67    68272.47    488.00  NULL
LD038   2012-11 45072.37    3103.25 0.00    0.00    48175.62    358.00  NULL
LD038   2012-12 45072.37    1322.96 0.00    0.00    46395.33    461.00  NULL
LD038   2013-01 45072.37    23346.40    0.00    0.00    68418.77    225.00  NULL
LD038   2013-02 45072.37    507.58  0.00    0.00    45579.95    0.00    NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:28:06.543

我没有看到关于 Tones/Metres 的 CASE 语句的 ELSE 语句。尝试添加**ELSE**语句并查看它是否返回 else 值，然后您就知道您的条件不太正常。

> （这将是 OperationalAssetDetail.Name != 'LD%' ）

试试这个，看看是否返回了“Wenis”，如果你知道你的案例条件不起作用。

```
CASE OperationalAssetDetail.Name WHEN 'LD%' THEN ( SELECT SUM((OreNo*CONVERT(decimal(10,2),ISNULL(round((Code1),2),0))) + (WasteNo*CONVERT(decimal(10,2),ISNULL(round((Code2),2),0))) + (WFG*CONVERT(decimal(10,2),ISNULL(round((Code3),2),0)))) FROM BETA..Bogging, BETA..Equipment, OperationalAssetDetail WHERE EquipmentName = @myAsset and OperationalAssetDetail.Name = EquipmentNameMainpac and BETA..Bogging.EquipmentID = BETA..Equipment.EquipmentID and months = RTRIM(CAST(DATEPART(year, Date) AS CHAR)) + '-' + right('0' + RTRIM(CAST(DATEPART(month, Date) AS CHAR)),2) )
ELSE 0
END as 'Tonnes/Metres' 
```

也用于调试添加

```
OperationalAssetDetail.Name 
```

作为列结果之一，可以直观地看到它是什么。

这个选择需要**大量**的工作。

# python - 运行 Heroku Django 教程的问题

> ID：14741458
> 
> 赞同：1
> 
> 时间：2013-02-07T00:20:58.423
> 
> 标签：python, django, heroku, foreman

我一直在按照 Heroku-Django 教程 ( [https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django) ) 中的步骤获取在 Heroku 上运行的 Django 应用程序的概念验证版本，但到目前为止我被卡住了在部署步骤。如果重要的话，我正在开发 OS X 10.8。我已经按照这封信的所有说明进行操作，但是当我进入部署步骤时，我最终遇到了以下错误：

```
-----> Discovering process types

 !     Heroku push rejected due to an unrecognized error.
 !     We've been notified, see http://support.heroku.com if the problem persists.

To git@heroku.com:stormy-earth-5394.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:stormy-earth-5394.git' 
```

我昨天已将错误报告给 support.heroku.com，但尚未收到任何回复。 [https://status.heroku.com/](https://status.heroku.com/)表示当前没有问题。

这是应用程序的目录结构：

```
hellodjango/
    Procfile
    hellodjango/
        __init__.py
        settings.py
        urls.py
        wsgi.py
    manage.py
    requirements.txt
    venv/ 
```

跑步

```
python manage.py runserver 
```

工作正常，我可以浏览到预期的默认页面。

这是部署步骤的完整输出。

```
$ git push heroku master
Counting objects: 13, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (13/13), 3.92 KiB, done.
Total 13 (delta 0), reused 0 (delta 0)
-----> Python app detected
-----> No runtime.txt provided; assuming python-2.7.3.
-----> Preparing Python runtime (python-2.7.3)
-----> Installing Distribute (0.6.34)
-----> Installing Pip (1.2.1)
-----> Installing dependencies using Pip (1.2.1)
       Downloading/unpacking Django==1.4.3 (from -r requirements.txt (line 1))
         Running setup.py egg_info for package Django

       Downloading/unpacking distribute==0.6.31 (from -r requirements.txt (line 2))
         Running setup.py egg_info for package distribute

       Downloading/unpacking dj-database-url==0.2.1 (from -r requirements.txt (line 3))
         Downloading dj-database-url-0.2.1.tar.gz
         Running setup.py egg_info for package dj-database-url

       Downloading/unpacking psycopg2==2.4.6 (from -r requirements.txt (line 4))
         Running setup.py egg_info for package psycopg2

           no previously-included directories found matching 'doc/src/_build'
       Installing collected packages: Django, distribute, dj-database-url, psycopg2
         Running setup.py install for Django
           changing mode of build/scripts-2.7/django-admin.py from 600 to 755

           changing mode of /app/.heroku/python/bin/django-admin.py to 755
         Found existing installation: distribute 0.6.34
           Uninstalling distribute:
             Successfully uninstalled distribute
         Running setup.py install for distribute
           Before install bootstrap.
           Scanning installed packages
           Setuptools installation detected at /app/.heroku/python/lib/python2.7/site-packages
           Non-egg installation
           Moving elements out of the way...
           Already patched.
           /app/.heroku/python/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info already patched.

           Installing easy_install script to /app/.heroku/python/bin
           Installing easy_install-2.7 script to /app/.heroku/python/bin
           After install bootstrap.
           /app/.heroku/python/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info already exists
         Running setup.py install for dj-database-url

         Running setup.py install for psycopg2
           building 'psycopg2._psycopg' extension
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/psycopgmodule.c -o build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/green.c -o build/temp.linux-x86_64-2.7/psycopg/green.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/pqpath.c -o build/temp.linux-x86_64-2.7/psycopg/pqpath.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/utils.c -o build/temp.linux-x86_64-2.7/psycopg/utils.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/bytes_format.c -o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/connection_int.c -o build/temp.linux-x86_64-2.7/psycopg/connection_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/connection_type.c -o build/temp.linux-x86_64-2.7/psycopg/connection_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/cursor_int.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/cursor_type.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/lobject_int.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/lobject_type.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/notify_type.c -o build/temp.linux-x86_64-2.7/psycopg/notify_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/xid_type.c -o build/temp.linux-x86_64-2.7/psycopg/xid_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_asis.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_binary.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_datetime.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_list.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pboolean.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pdecimal.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pint.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pfloat.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_qstring.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/microprotocols.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/microprotocols_proto.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/typecast.c -o build/temp.linux-x86_64-2.7/psycopg/typecast.o -Wdeclaration-after-statement
           gcc -pthread -shared build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o build/temp.linux-x86_64-2.7/psycopg/green.o build/temp.linux-x86_64-2.7/psycopg/pqpath.o build/temp.linux-x86_64-2.7/psycopg/utils.o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o build/temp.linux-x86_64-2.7/psycopg/connection_int.o build/temp.linux-x86_64-2.7/psycopg/connection_type.o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o build/temp.linux-x86_64-2.7/psycopg/notify_type.o build/temp.linux-x86_64-2.7/psycopg/xid_type.o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o build/temp.linux-x86_64-2.7/psycopg/typecast.o -L/usr/lib -lpq -o build/lib.linux-x86_64-2.7/psycopg2/_psycopg.so

           no previously-included directories found matching 'doc/src/_build'
       Successfully installed Django distribute dj-database-url psycopg2
       Cleaning up...
-----> Collecting static files
       0 static files copied.

-----> Discovering process types

 !     Heroku push rejected due to an unrecognized error.
 !     We've been notified, see http://support.heroku.com if the problem persists.

To git@heroku.com:stormy-earth-5394.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:stormy-earth-5394.git' 
```

我怀疑heroku可能与工头检查输出以下错误的事实有关，但我不知道为什么工头认为在我有教程中应该有的确切行时Procfile中没有定义任何进程.

```
$ foreman check
ERROR: no processes defined
$ cat Procfile 
web: python manage.py runserver 0.0.0.0:$PORT --noreload 
```

任何有关下一步检查的指针将不胜感激。几个月前，我开发了一个不同的 Django Heroku 应用程序，但当时没有遇到这些问题。

heroku 日志的输出也无济于事。

```
2013-02-07T00:15:50+00:00 heroku[slugc]: Slug compilation started
2013-02-07T00:17:31+00:00 heroku[slugc]: Slug compilation failed: unrecognized error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:32:57.267

我发现“heroku 日志”通常可以很好地调试这些问题。

我认为我们应该用 gunicorn 试试。我在我的本地机器上尝试了它，它工作正常，然后部署到一个示例应用程序，它工作正常（[http://arcane-shore-6254.herokuapp.com](http://arcane-shore-6254.herokuapp.com)）。

**第 1 步**：将“gunicorn”添加到您的 requirements.txt

**第 2 步**：在您的 Procfile 中，将您的“网络”流程更改为：

```
web: gunicorn hellodjango.wsgi:application 
```

**第 3 步**：提交和重新部署。看看这是否有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:59:59.683

确保您的 Procfile 是 ASCII 文本：

```
file * 
```

我认为有些人遇到了 unicode 问题： [Problems getting my sinatra based app to work on Heroku](https://stackoverflow.com/questions/12440389/problems-getting-my-sinatra-based-app-to-work-on-heroku)

此外，也许您已经有一个名为“stormy-earth-5394”的现有 Heroku 项目，它正在尝试同步 git 存储库。删除虚拟项目并创建一个新的 Heroku 项目可能值得：

```
heroku destroy --app stormy-earth-5394
heroku create 
```

然后重试：

```
git push heroku master
heroku ps:scale web=1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T01:34:15.210

您可能想看看对这个[问题](https://stackoverflow.com/questions/8924841/django-not-running-on-heroku)的回答。

特别是，您可能应该考虑您是否在正确的目录中，或者是否`manage.py`应该在路径中使用 hellodjango 调用。

# google-app-engine - 在 Google App Engine (Java) 上向 OpenId/Federated Login 添加自定义登录

> ID：14741464
> 
> 赞同：1
> 
> 时间：2013-02-07T00:21:35.637
> 
> 标签：google-app-engine, authentication, openid

目前在 GAE 上运行的客户端应用程序支持 OpenId 登录以通过 OAuth 访问服务器应用程序（也在 GAE 上）上的资源。一切皆好。

但是，它要求用户拥有 Google、Yahoo 或其他 OpenId 提供商的帐户。虽然这对个人用户来说似乎很好，但我如何处理用户想要使用 myname@mycompany.com 作为登录名的公司案例？

我是否构建自己的 OpenId 提供程序、托管它并将这些名称/密码存储在数据库中？是否有我可以使用的现有 OpenId 源，但给它我自己的名称/密码？我是否完全跳过 OpenId 并以某种方式获得自己的自定义数据库查找以与 GAE 身份验证集成？完全不同的东西？

我的工作是使用 Java，因此首选 Java 解决方案。而且由于这更多地用于原型设计而不是生产用途，因此首选更简单的解决方案:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:35:14.513

在做了一些额外的研究之后，如果我想坚持目前使用 Restlet 的 GAEAuthenticator，那么我将不得不依赖 OpenId。似乎有一些方法可以重写整个身份验证，以便它可以与 Google/OpenId 和自定义数据库（不是我想尝试的）一起使用，并且似乎有商业产品（SadaSystems）似乎也可以做到这一点。
目前，我的解决方法是让想要在我们系统中使用自己的电子邮件地址的人注册 MyOpenId 并将该电子邮件地址添加为他们的角色。

# list - 我应该在哪里保留列表的选择状态？

> ID：14741467
> 
> 赞同：7
> 
> 时间：2013-02-07T00:21:45.737
> 
> 标签：list, ember.js, multi-select

我正在使用 ember 1.0.0-pre4。

我想显示模型实例的列表。用户应该能够通过单击每行中呈现的按钮或复选框来选择尽可能多的列表条目。

我设法显示列表。但我不知道如何管理选择状态。当我将类似的东西`{{view Ember.Checkbox checkedBinding="isSelected"}}`放入模板中时，选择状态将保留在我的模型中。但我不认为这是最好的地方。我认为选择状态属于控制器或视图状态。

您能否告诉我存储和访问（多个）列表选择状态的最佳方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T10:03:10.097

一种方法是在控制器中保留第二个列表：

```
App.FooController = Ember.ArrayController.create({
  selectedContent: [],
  selectToggle: function(event) {
    var selectedContent;
    selectedContent = this.get(selectedContent);
    if (selectedContent.contains(event.context)) {
      return this.set('selectedContent', selectedContent.without(event.context));
    } else {
      return this.get('selectedContent').push(event.context);
    }
  }
});

<script type="text/x-handlebars" data-template-name="index">
  <ul>
    {{#each foo in controller}}
          <li {{action selectToggle foo}}>{{foo.name}}</li>
    {{/each}}
  </ul>
</script> 
```

这只是在控制器中维护一个单独的列表，并根据是否选择了该项目来推送/删除。

您还可以使用 Ember.ObjectProxy 通过“isSelected”属性来增加 foo 对象的值。

```
App.FooController = Ember.ArrayController.create({
  selectedContent: @get('content').map(function(item){
    Ember.ObjectProxy.create({ 
      content: item
      isSelected: false
    });
  }); 
});

<script type="text/x-handlebars" data-template-name="index">
  <ul>
    {{#each foo in controller.selectedContent}}
          <li {{bindAttr class= "foo.isSelected"}}{{action selectToggle foo}}>{{foo.name}}</li>
    {{/each}}
  </ul>
</script> 
```

然后在您的 selectToggle 方法中，您只需适当地设置 foo 的 isSelected 属性。

# facebook - 没有 Canvas URL 的 Facebook 选项卡应用程序

> ID：14741473
> 
> 赞同：-1
> 
> 时间：2013-02-07T00:22:11.837
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

你知道当你创建一个标签应用程序时，你有一个带有页面标签 URL 的页面标签部分：和安全页面标签 URL：。在我的应用程序中，我想将 FB.init 用于 Fb.login，但如果我调用 FB.init，我会收到此错误。

应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

这是因为我没有从 App 配置中完成 Facebook 上的 App 部分，我的想法是我不想完成。什么是替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:45:36.437

这听起来可能违反直觉，但在您的应用设置中（就在您设置页面标签 URL 的位置附近），您需要打开**带有 Facebook 登录的网站**部分并填写**站点 URL**。一个典型的例子是`http://mydomain.gov:8080/`，但您可以包含比`/`您想要的更长的路径。此外，如果您尚未填写**App Domains**，请在此处添加一个域以匹配站点 URL。在我的示例中，它将是`mydomain.gov`.

您在其上使用 JS SDK 的页面以及您在任何对话 URL 中的页面都需要以您配置的**站点 URL**`redirect_uri`开头。

# powershell - PowerShell 输出到文件

> ID：14741477
> 
> 赞同：1
> 
> 时间：2013-02-07T00:22:44.350
> 
> 标签：powershell, batch-file, powershell-2.0

我想将我的 PowerShell 脚本中的结果保存到一个文本文件中。我怎样才能做到这一点？

```
GET-CHILDITEM  -recurse C:\Enlistment\DAX\* | SELECT-STRING -pattern "BatchIL.start()" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T01:17:20.440

很容易：:-)

```
Get-ChildItem C:\Enlistment\DAX -r | Select-String "BatchIL.start()" > results.txt 
```

如果您不喜欢 results.txt 的默认 Unicode 编码，您也可以这样做：

```
Get-ChildItem C:\Enlistment\DAX -r | Select-String "BatchIL.start()" | 
    Out-File results.txt -Encoding Ascii 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:38:35.253

另一种方法是使用“Add-Content”命令行开关：

```
add-content <fileLocation> (CHILDITEM  -recurse C:\Enlistment\DAX\* | SELECT-STRING -pattern "BatchIL.start()") 
```

您还可以在文件位置的`Join-Path`括号中使用如下内容：`()`

```
add-content (Join-Path $env:UserProfile "OutputFile.txt") (CHILDITEM  -recurse C:\Enlistment\DAX\* | SELECT-STRING -pattern "BatchIL.start()") 
```

如果您需要在其他机器上运行它并希望避免硬编码，这将使它更具可移植性。上面的例子将把你命令的整个输出放入“OutputFile.txt”到用户配置文件的根目录中（例如`C:\Users\Username`在 Windows Vista 和 7 中）

# python - python调用perl，文件不是由Popen创建的，直到read（）

> ID：14741482
> 
> 赞同：1
> 
> 时间：2013-02-07T00:23:41.170
> 
> 标签：python, perl, subprocess, popen

编辑：哎呀！我不小心发布了与我的问题不符的代码。我在完成实验之前就开始写这篇文章，所以我从测试过程的中间点发布了代码。我已经修改了这个问题，以通过稍微更改代码来反映我真正想要发布的内容。

以下 Python 代码按预期工作，但存在一个问题：除非 I If verbose == False，否则不会创建由 Perl 脚本生成的文件。为什么我必须为底层 Perl 脚本调用 output.stdout.read() 才能成功创建文件？

```
cmdStringList = ["perl","script.pl","arg1",...]

output = subprocess.Popen(cmdStringList,stdout=subprocess.PIPE)

if verbose:
    print output.stdout.read() 
```

在我尝试在生产环境中使用 verbose=False 执行 Python 脚本之前，我什至没有意识到有什么问题。我做了一些 google-fu 试图了解 Popen 和子进程的行为，但我还没有想出这种行为的原因。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:33:35.693

您实际上有以下代码，对吗？

```
if verbose:
    outputRead = output.stdout.read()
    print outputRead 
```

问题很可能是孩子在尝试写入 STDOUT 时被阻止。在您通过读取管道在管道中腾出一些空间之前，孩子将无法完成对 STDOUT 的写入并继续创建您所引用的文件的位置。

如果您想防止孩子在不阅读的情况下阻塞，请将其标准输出重定向到`nul`（Windows）或`/dev/null`（其他地方）。这应该适用于除 Windows 之外的任何地方：

```
cmdStringList = ["sh","-c","\"$0\"" \"$@\" >/dev/null","perl","script.pl","arg1",...] 
```

（请原谅任何语法错误。我根本不懂 Python。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:28:17.137

您应该继续读取流，否则缓冲区可能会变满，然后您的 perl 进程可能会被阻塞。它与特定语言无关，而与底层操作系统无关。

我在使用 Java 时遇到[了类似的问题。](https://stackoverflow.com/q/11732399/1365960)

# jquery - 动画完成对话框

> ID：14741483
> 
> 赞同：2
> 
> 时间：2013-02-07T00:23:43.930
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我遇到了 UI 对话框的问题。我加入了完整的事件来创建一个 TinyMCE，因为它不能很好地播放动画。但它似乎不适用于最新版本的 JQuery UI。

我搜索了发行说明以查看这是否已更改或其他任何内容，但我没有看到它在任何地方列出。

这是删除/移动的功能还是 v1.10.0 中的问题？

这是示例代码，在下面的 jsfiddle 中使用：

```
$("div").dialog({
    show:{
        effect:"puff",
        duration:400,
        complete:function()
        {
            $(".complete").html("Animation Complete.");
        }
    }
}); 
```

以前的版本功能（1.9.2）：

[http://jsfiddle.net/N4APL/1/](http://jsfiddle.net/N4APL/1/)

最新版本功能（1.10.0）：

[http://jsfiddle.net/jXDYz/1/](http://jsfiddle.net/jXDYz/1/)

注意：我为 UI javascript 使用了 MS CDN，因为 jsfiddle 还没有它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:00:34.317

这是一段旅程，但我终于弄清楚了您的问题和解决方案。

事实上，这个`complete`特性已经从 jQuery UI 对话框 1.10.0 中移除了。 [它不在 API 中](http://api.jqueryui.com/dialog/#option-show)。我不确定它为什么被删除，而且他们当然没有在升级指南中记录它。

在深入研究 1.10.0 代码后，我发现了这个：

```
this._show( this.uiDialog, this.options.show ); 
```

如您所见，没有回调`._show`（这只是 jQuery 的`.show`），也没有办法设置回调。确认！你被困住了。

...或者你会是 jQuery 1.10.1 不在路上：

```
this._show( this.uiDialog, this.options.show, function() {
    that._focusTabbable();
    that._trigger("focus");
}); 
```

仍然不能直接设置回调，但是可以通过`focus`1.10.1 中的选项进行设置。 [我已经确认这行得通](http://jsfiddle.net/ExplosionPIlls/jXDYz/2/)。

我仍然认为这对其他人来说会有点不稳定，但至少对你来说不是。您可以选择现在升级到 jQuery 1.10.1，或者只是等待 1.9 发布，直到它到来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T16:56:43.793

正如@brian 所指出的，`complete`回调功能在 v1.10.0 上被删除，此后再也没有添加回来。Brian 的方法很简洁，但是只适用于`open`.

在这里，我提出了一种更正确的方法，适用于`open`和`close`：

[https://stackoverflow.com/a/18257205/2678731](https://stackoverflow.com/a/18257205/2678731)

在（最新）v1.10.3 上成功测试：http: [//jsfiddle.net/losnir/jcmpm/](http://jsfiddle.net/losnir/jcmpm/)

# javascript - 从 Chrome 扩展程序打开 chrome://newtab

> ID：14741484
> 
> 赞同：1
> 
> 时间：2013-02-07T00:23:44.633
> 
> 标签：javascript, google-chrome-extension

我尝试编写一个 Google Chrome 扩展程序，当我在短时间内单击左右时，它只会打开一个新选项卡。JavaScript 没问题，但我将其实现为“content_scripts”脚本。

在其他一些线程中，我读到我无法从 content_scripts 访问 chrome.* API（chrome.extension API 除外）。

即使没有必要访问 chrome.tabs API 来打开一个新窗口（window.open 应该可以完成这项工作），但似乎我需要它来打开一个*带有新标签页的新标签页*，这显然不可能通过 window 。打开。

所以我真的不知道什么是最好的方法。我可以使用可以从 content_script 调用的背景页面，但我认为*应该*有一种更简单的方法来做到这一点，我只是不明白。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:40:05.980

我认为您的内容脚本必须向您的后台页面发送一条消息才能调用`chrome.tabs.create`- 内容脚本不能使用 chrome api，也不能直接与后台页面通信。

这是有关在 Chrome 扩展中传递消息的[参考以获取更多详细信息，但这里是示例代码（根据上述参考中的示例修改）](http://developer.chrome.com/extensions/messaging.html)

```
// in background
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    switch ( request.action) {
       case 'newTab' : {
         //note: passing an empty object opens a new blank tab, 
         //but an object must be passed
         chrome.tabs.create({/*options*/}); 
         // run callback / send response
       } break;
    }
    return true; //required if you want your callback to run, IIRC
  });

// in content script:
chrome.extension.sendMessage({action: "newTab"}, function(response) {
  //optional callback code here.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:28:31.037

简单易行

```
document.body.onclick = function openNewWindow(  ) {
  window.location.href = 'javascript:void window.open( "chrome://newtab" )';
} 
```

显现：

```
,"permissions":[
    "http://*/*"
    ,"https://*/*"
  ]
  ,"manifest_version": 2
  ,"content_scripts":[{
    "matches":[
      "http://*/*"
      ,"https://*/*"
    ]
    ,"js":[
      "js/openWindow.js"
    ]
  }] 
```

好吧，我想念理解这个问题...已修改

# php - PHP Preg_match 正则表达式结果

> ID：14741488
> 
> 赞同：0
> 
> 时间：2013-02-07T00:23:57.667
> 
> 标签：php, regex

这是我的 RE，我将它与`preg_match_all`PHP 一起使用，但我得到的结果不准确 [http://screencast.com/t/FPsoJkAT](http://screencast.com/t/FPsoJkAT)

```
#(\d+/\d+/\d+)|(\d+:\d+(AM|PM).*?[$]\d)#i 
```

我得到了应该被跳过的额外行（空行 + PM 和 AM）

当我尝试使用 RE 实用程序对其进行测试时，这是预期的结果。 [http://screencast.com/t/RRteFlCD](http://screencast.com/t/RRteFlCD)

有人请帮助我对这个 RE 进行排序，以将确切的结果与该实用程序产生的正确顺序相匹配。

RE 不能正常工作

```
 preg_match_all("#(\d+/\d+/\d+)|(\d+:\d+(AM|PM).*?[$]\d)#i",$response,$result); 
```

输入

13年11月1日$ 4.34下午10点02 Internet79kbs $ 0.02下午6点42 Internet34kbs $ 0.01 5时37 PM0438377989Optus SMS1 $ 0.000下午5点21 Internet253kbs $ 0.06 3点59 PM0438377989Optus SMS1 $ 0.000 3点59 PM0438377989Optus SMS1 $ 0.000 3点59 PM0438377989Optus SMS1 $ 0.000 3点57 PM0438377989Optus SMS1 $ 0.000 12:40 PM Internet462kbs $ 0.10 12:34 Internet1659kbs $ 0.37上午11:26 Internet54kbs $ 0.01 11:20 AM0411000321DIV-VoiceMail00:00:19 $ 0.00包装11:20 AM Internet76kbs $ 0.02 11:19 AM0438377989Optus SMS1 $ 0.000 11:19 AM0438377989Optus SMS1 $ 0.000 10:02 AM0414828271Optus SMS1 $ 0.000上午09时32 Internet297kbs $ 0.07 08:46 AM0282700517Sydney00： 03:15 $3.59 08:40AM0411000321DIV-VoiceMail00:00:25 $0.00 08:39AM Internet388kbs $0.09 第 1 页，共 3 页 打印使用详情 16/01/2013 [https://www.optus.com.au/portal/site/customercentre](https://www.optus.com.au/portal/site/customercentre)/template.BINARYPORTLET/m ... ( 由于处理时间，最近拨打的电话或最近的数据使用可能不会出现在上述使用交易详情页面中。某些类型的包含值或折扣也可能不会显示。如果如果您更改费率计划或在您的账单周期中途生效的附加项目，您的使用摘要将不准确，直到您的下一个账单周期开始。显示的金额是：GST 仅适用于电话、后付费移动和MOB ILE宽带服务。GST包括预付费移动服务。10/01/13 $ 22.94 10:00 PM Internet239kbs $ 0.05 10:00 $ 0.05optus sms1 $ 0.0 08:56 $ 0.000 08:51 $ 0.05optus sms1 $ 0.000 08:51 PM0417973105optus sms1 $ 0.000 08: 45PM0417973105Optus SMS1 0.000 美元 06:15PM Internet23kbs 0.01 美元 06:00PM Internet156kbs 0 美元。03 06:00 PM0738483389Brisbane00:15:18 $ 13.41 04:22 PM0438377989Optus SMS1 $ 0.000 04:22 PM0438377989Optus SMS1 $ 0.000下午2点20 Apps使用Mobile152kbs $ 0.03下午2点14分Internet154kbs $ 0.03 02:14 PM0282700517Sydney00:05:49 $ 5.23 02:03 PM0411000321DIV-VoiceMail00:00:24 $ 0.00包装01 ：55PM Internet958kbs $ 0.21 01:54 PM0282700517Sydney00:01:04 $ 1.95 01:53 PM0411000321VoiceMail00:00:32 $ 0.82 12:50 PM0411000321DIV-VoiceMail00:00:03 $ 0.00包装12:18 PM0295521298Sydney00:00:07 $ 1.14 10:04 AM0411000321DIV-VoiceMail00:00:26 $ 0.00包装08： 07AM Internet76kbs $0.02 第 2 页，共 3 页 打印使用详情 16/01/201321 01:54 PM0282700517S $ 1.95 01:53 PM0411000321VOVOIVEMAIL00:00:32 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82：03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.11月12:18 $ 1.14 $ 1.14 10:04 am0411000321div-voicemail00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 $ 0.08:07 AM Internet76KBS $ 0.08:07第 2 页，共 3 页 打印使用详情 16/01/201321 01:54 PM0282700517S $ 1.95 01:53 PM0411000321VOVOIVEMAIL00:00:32 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82 $ 0.82：03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.03 $ 0.11月12:18 $ 1.14 $ 1.14 10:04 am0411000321div-voicemail00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 $ 0.08:07 AM Internet76KBS $ 0.08:07第 2 页，共 3 页 打印使用详情 16/01/2013[https://www.optus.com.au/portal/site/customercentre](https://www.optus.com.au/portal/site/customercentre) /template.BINARYPORTLET/m ... 使用余额可能不考虑上限包含/折扣或调整。对于后付费，如果您有超过 7000 条记录，则显示的未计费使用量将是近似值。有关实际费用，请参阅您的发票。第 3 页，共 3 页 打印使用详情16/01/2013 [https://www.optus.com.au/portal/site/customercentre](https://www.optus.com.au/portal/site/customercentre) /template.BINARYPORTLET/m ...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:45:58.870

`preg_match_all()`的结果数组是一个二维数组。`$result[0]`是整个 RE 的所有匹配项的数组。其余的是每个匹配中第 th 个捕获组`$result[i]`的数组。`i`

因此，出于您的目的，您所关心的只是`$result[0]`. 我对此进行了测试，它有 47 个元素。

此外，您可能应该将 RE 中的所有组更改为非捕获组，以避免首先生成所有这些无关字符串。所以每一个都`(...)`应该是`(?:...)`。

`print_r($result[0])`印刷：

```
Array
(
    [0] => 11/01/13
    [1] => 10:02PM Internet79kbs $0
    [2] => 06:42PM Internet34kbs $0
    [3] => 05:37PM0438377989Optus SMS1 $0
    [4] => 05:21PM Internet253kbs $0
    [5] => 03:59PM0438377989Optus SMS1 $0
    [6] => 03:59PM0438377989Optus SMS1 $0
    [7] => 03:59PM0438377989Optus SMS1 $0
    [8] => 03:57PM0438377989Optus SMS1 $0
    [9] => 12:40PM Internet462kbs $0
    [10] => 12:34PM Internet1659kbs $0
    [11] => 11:26AM Internet54kbs $0
    [12] => 11:20AM0411000321DIV-VoiceMail00:00:19 $0
    [13] => 11:20AM Internet76kbs $0
    [14] => 11:19AM0438377989Optus SMS1 $0
    [15] => 11:19AM0438377989Optus SMS1 $0
    [16] => 10:02AM0414828271Optus SMS1 $0
    [17] => 09:32AM Internet297kbs $0
    [18] => 08:46AM0282700517Sydney00:03:15 $3
    [19] => 08:40AM0411000321DIV-VoiceMail00:00:25 $0
    [20] => 08:39AM Internet388kbs $0
    [21] => 16/01/2013
    [22] => 10/01/13
    [23] => 10:00PM Internet239kbs $0
    [24] => 10:00PM Internet46kbs $0
    [25] => 08:56PM0417973105Optus SMS1 $0
    [26] => 08:56PM0417973105Optus SMS1 $0
    [27] => 08:51PM0417973105Optus SMS1 $0
    [28] => 08:51PM0417973105Optus SMS1 $0
    [29] => 08:45PM0417973105Optus SMS1 $0
    [30] => 06:15PM Internet23kbs $0
    [31] => 06:00PM Internet156kbs $0
    [32] => 06:00PM0738483389Brisbane00:15:18 $1
    [33] => 04:22PM0438377989Optus SMS1 $0
    [34] => 04:22PM0438377989Optus SMS1 $0
    [35] => 02:20PM Apps Usage Mobile152kbs $0
    [36] => 02:14PM Internet154kbs $0
    [37] => 02:14PM0282700517Sydney00:05:49 $5
    [38] => 02:03PM0411000321DIV-VoiceMail00:00:24 $0
    [39] => 01:55PM Internet958kbs $0
    [40] => 01:54PM0282700517Sydney00:01:04 $1
    [41] => 01:53PM0411000321VoiceMail00:00:32 $0
    [42] => 12:50PM0411000321DIV-VoiceMail00:00:03 $0
    [43] => 12:18PM0295521298Sydney00:00:07 $1
    [44] => 10:04AM0411000321DIV-VoiceMail00:00:26 $0
    [45] => 08:07AM Internet76kbs $0
    [46] => 16/01/2013
    [47] => 16/01/2013
) 
```

# ios - 核心图 - iPhone 5 上带有条形图的极低帧速率

> ID：14741491
> 
> 赞同：0
> 
> 时间：2013-02-07T00:24:24.013
> 
> 标签：ios, core-animation, core-plot

我的情节有 390 分。在散点图和条形图的捏缩放期间，帧速率 < 20 fps。但是，如果我在屏幕上只有一个散点图，我会得到 ~50fps。当我使用仪器时，主要瓶颈似乎是 -[CPTBarPlot renderAsVectorInContext:]，它的运行时间超过 50%，而散点图 <20%。即使我只在屏幕上绘制条形图，我的速度也不会超过 20fps（但我仍然需要测试它）。这是条形图的标准表现吗？我该如何改进呢？我已经将缓存精度设置为两倍。

如果有人可以在这里帮助我，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:54:04.113

确保 barCornerRadius 和 barBaseCornerRadius 的默认值为零。将 barWidth 设置为零。将 barWidthsAreInViewCoordinates 设置为 YES 以加快坐标转换。将填充设置为零。

# python - python守护进程安装失败

> ID：14741498
> 
> 赞同：1
> 
> 时间：2013-02-07T00:25:01.677
> 
> 标签：python, python-daemon

我以非root用户身份安装了Python3.3，并使用python virtualenv中的pip来安装beaver，一个python模块依赖于python-daemon。但是安装失败，因为无法安装 python-daemon。

```
(py_virtual)[infra@sulog01 beaver-master]$ pip install beaver==22
Downloading/unpacking beaver==22
  Downloading Beaver-22.tar.gz (40kB): 40kB downloaded
  Running setup.py egg_info for package beaver

Downloading/unpacking pika>=0.9.5 (from beaver==22)
  Downloading pika-0.9.9.tar.gz (56kB): 56kB downloaded
  Running setup.py egg_info for package pika

Downloading/unpacking python-daemon>=1.5.2 (from beaver==22)
  Downloading python-daemon-1.6.tar.gz (41kB): 41kB downloaded
  Running setup.py egg_info for package python-daemon
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/home/infra/logstash/beaver_Python/beaver-
            master/py_virtual/build/python-daemon/setup.py", line 22, in 
            <module>main_module = __import__(main_module_name, 
                fromlist=['version'])
      File "./daemon/__init__.py", line 42, in <module>
        from . import version
      File "./daemon/version/__init__.py", line 16, in <module>
        from .version_info import version_info
      File "./daemon/version/version_info.py", line 21
        print 'revision: %(revno)d' % version_info
                                  ^
    SyntaxError: invalid syntax
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/home/infra/logstash/beaver_Python/beaver-master/
        py_virtual/build/python-daemon/setup.py", line 22, in <module>

    main_module = __import__(main_module_name, fromlist=['version'])

  File "./daemon/__init__.py", line 42, in <module>

    from . import version

  File "./daemon/version/__init__.py", line 16, in <module>

    from .version_info import version_info

  File "./daemon/version/version_info.py", line 21

    print 'revision: %(revno)d' % version_info

                              ^

SyntaxError: invalid syntax

----------------------------------------
Command python setup.py egg_info failed with error code 1 in 
    /home/infra/logstash/beaver_Python/beaver-master/py_virtual/
    build/python-daemon
Storing complete log in /home/infra/.pip/pip.log 
```

在安装 python-daemon 之前我需要安装其他任何东西吗？还是 Python3.3 本身的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:31:51.083

看起来 beaver 和 python-daemon 目前不支持 Python 3。您必须使用 Python 2.x。

# c# - 如何确保我的持久性设施是线程安全的？

> ID：14741503
> 
> 赞同：0
> 
> 时间：2013-02-07T00:25:57.297
> 
> 标签：c#, asp.net-mvc, fluent-nhibernate, thread-safety, castle-windsor

我已经按照城堡温莎教程按照相同的思路实现了我的 nhibernate 持久性工具。

看：

[http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Six-Persistence-Layer.ashx](http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Six-Persistence-Layer.ashx) [http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Seven-Lifestyles.ashx](http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Seven-Lifestyles.ashx)

我在我的应用程序中注意到，当池被释放并尝试再次访问它时，我最初会收到与正在构建的会话工厂相关的错误。

诸如添加了重复键之类的东西。

我认为这与我的映射关系不大，而与设施执行的方式或时间有关。

经过更多研究，我看到人们说[会话工厂应该是线程安全](https://stackoverflow.com/a/2362300/148998)的？

如果这是正确的，那么我的假设是我不能单独依靠 Castle Windsor 来确保执行的代码只会执行一次？

请查看我的持久性设施下面的 init 方法，我应该在 init 方法中添加更多级别的锁定吗？

这会是正确的地方吗？

我的设施 - 遵循教程：

```
public class PersistenceFacility : AbstractFacility
{
    // ... etc.

    protected override void Init()
    {
        Configuration config = BuildDatabaseConfiguration();

        Kernel.Register(Component.For<ISessionFactory>().UsingFactoryMethod(_ => config.BuildSessionFactory()).LifestylePerWebRequest());
        Kernel.Register(Component.For<ISession>().UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession()).LifestylePerWebRequest());
    }
} 
```

我在 App_Start 中初始化了我的容器，并没有真正做任何其他特别的事情，我只是使用我的存储库中的 ISession，所有这些都使用 CastleWindsor 解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:05:41.303

Windsor 将启动每个设施的次数与您将设施添加到容器中的次数完全相同。

因此，如果您执行一次，它将被初始化一次，并且无需在那里放置任何锁定。

在您的代码中唯一看起来很奇怪的是您在每个请求上都重新创建会话工厂。

# ruby - Ruby 测试脚本结构建议

> ID：14741505
> 
> 赞同：1
> 
> 时间：2013-02-07T00:26:09.023
> 
> 标签：ruby, selenium, jenkins, rake, testunit

我正在为具有邮件列表的程序编写自动化测试套件。我正在尝试确定构建我将要使用的工具的最佳实践。测试需要向各种电子邮件地址发送电子邮件，然后使用应用程序执行操作（批准、拒绝、丢弃）。然后脚本最终需要检查它的邮件并将它收到的电子邮件与它期望收到的电子邮件列表进行比较。这是我正在使用的工具列表。

Ruby、Rake、Selenium Webdriver、测试单元、Jenkins

我想做的是将所有内容都视为最后一步（检查电子邮件）的依赖项（在 rake 中）。当我试图让每封电子邮件都独一无二时，我的问题就来了。我计划将运行测试的时间和分配给测试中每封电子邮件的编号嵌入到电子邮件中（此编号对于每次测试运行都是相同的，因此我可以确定它应该去哪里）。我需要一种方法来传递从测试开始到测试结束的时间戳。

我看到的问题的解决方案是摆脱 rake（因为我不能或不知道如何在任务之间传递变量）或写入文件然后在单独的任务中访问文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:31:26.363

我建议在运行每个测试之前在 Rakefile 中设置一个 ENV 变量，如下所示：

```
ENV['TIMESTAMP_CONTROL'] = Time.now.to_s 
```

然后，您可以在脚本和 Rakefile 中的任何位置引用该变量，直到您像任何其他 Ruby 变量一样再次重置它：

```
assert_equal ENV['TIMESTAMP_CONTROL'], @email_response_text 
```

# javascript - 在没有画布的情况下创建水波纹？

> ID：14741510
> 
> 赞同：0
> 
> 时间：2013-02-07T00:26:38.820
> 
> 标签：javascript, ios, html, canvas, webgl

我需要创建一个响应触摸的水波纹效果（仅限客户端）。我查看了各种选项，[发现了一个有趣](http://code.almeros.com/code-examples/water-effect-canvas/#.URLyo1fnJLO)的使用画布的水波纹。我可以毫无问题地复制它，但是它运行得很慢。我还查看了 WebGL 以创建类似的水波纹效果，但我所追求的效果必须能够在 iPad 上运行，并且[根据 Caniuse](http://caniuse.com/#feat=webgl)的说法，iOS 不支持 WebGL。

我的问题是：有没有一种方法可以在不使用画布或 WebGL（或 Flash）的情况下创建快速流畅的水波纹效果。如果有办法加快渲染速度，我不反对使用画布。同样，我使用的任何代码都必须仅在客户端运行，并且*必须*在 iPad 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:18:43.427

可能出现的第一个问题，是要在网络平台上使用还是作为单独的APP使用。因为目前 iOS 本身并不支持 WebGL。然而，有一个黑客允许在移动浏览器上运行。见：http: [//vimeo.com/31553850](http://vimeo.com/31553850)。但我认为如果这将是一个商业产品，这超出了范围。

其次画布在移动平台上的表现不太好，但我找到了一个我在iOS上测试过的实验，结果中规中矩： http: [//media.chikuyonok.ru/ripple](http://media.chikuyonok.ru/ripple)

# iphone - 在 Objective-C 中以编程方式创建 .pem 文件？

> ID：14741512
> 
> 赞同：3
> 
> 时间：2013-02-07T00:26:44.013
> 
> 标签：iphone, objective-c, openssl, pem, csr

我正在尝试使用 Objective-C 和 iPhone 应用程序中的 OpenSSL 库以编程方式从证书签名请求创建 PEM 文件。我按照 Adria Navarro 对这个问题的回答生成了 CSR（类型为 X509_REQ *）：

[在 iOS 中使用 Keychain 存储的密钥生成 OpenSSL 证书签名请求](https://stackoverflow.com/questions/13456237/generating-an-openssl-certificate-signing-request-in-ios-with-keychain-stored-ke)

我已通过将 CSR 打印到控制台来确认它是有效的。

下面是我创建 PEM 文件 (CertificateSigningRequest.pem) 的代码。它最终创建了一个空白文件（0 字节，没有文本）。我是不是做错了什么，以至于它无法通过 PEM_write_X509_REQ 写入文件？（请注意，我通过 Organizer 下载 app 文件夹来检查文件。）

提前感谢您提供的任何帮助，如果我应该提供其他信息，请告诉我。

```
- (void)createPemFileWithCertificateSigningRequest:(X509_REQ *)certSigningRequest
{
    //delete existing PEM file if there is one
    [self deletePemFile];

    //create empty PEM file
    NSString *pemFilePath = [self pemFilePath];
    if (![[NSFileManager defaultManager] createFileAtPath:pemFilePath contents:nil attributes:nil])
    {
        NSLog(@"Error creating file for PEM");
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error creating file for PEM" message:[NSString stringWithFormat:@"Could not create file at the following location:\n\n%@", pemFilePath] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
        return;
    }

    //get a FILE struct for the PEM file
    NSFileHandle *outputFileHandle = [NSFileHandle fileHandleForWritingAtPath:pemFilePath];
    FILE *pemFile = fdopen([outputFileHandle fileDescriptor], "w");

    //write the CSR to the PEM file
    PEM_write_X509_REQ(pemFile, certSigningRequest);
}

- (NSString *)pemFilePath
{
    NSString *documentsFolder = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    return [documentsFolder stringByAppendingPathComponent:@"CertificateSigningRequest.pem"];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:14:09.397

事实证明，我的问题是我在写入文件后没有关闭文件。将最后一行添加到此方法就可以了。

```
- (void)createPemFileWithCertificateSigningRequest:(X509_REQ *)certSigningRequest
{
    //...

    //write the CSR to the PEM file
    PEM_write_X509_REQ(pemFile, certSigningRequest);

    //close the file
    fclose(pemFile); //THIS MAKES EVERYTHING WORK =)
} 
```

# asp.net - 未找到用户的 FormsAuthentication 角色

> ID：14741514
> 
> 赞同：-4
> 
> 时间：2013-02-07T00:27:07.627
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication

我的 FormsAuthentication 出现问题，由于某种原因，当我尝试为我的用户分配角色时，我收到错误“找不到用户'X'。”。这个错误没有任何意义，因为我刚刚添加了用户之前的行。

以下代码

```
FormsAuthentication.SetAuthCookie(member.Id.ToString(), true);
Roles.AddUserToRole(member.Id.ToString(), "Admin"); 
```

给我错误（member.Id 为 3）

```
The user '3' was not found 
```

**编辑：**用户名实际上不需要是用户名，它只需要与我在 FormsAuthentication 中设置的用户名相匹配！通常的做法是使用用户 ID（转换为字符串）！但是这个剂量仍然没有改变我的问题，所以我的用户名是“3”！

这是在用户登录时完成的：

```
// Set roles
foreach(var r in Roles.GetRolesForUser(user.Id.ToString()))
    Roles.RemoveUserFromRole(user.Id.ToString(), r);
IList<UserRole> roles = _usersServices.GetUserRoles((int)user.Id);
foreach (var userRole in roles)
{
    if(userRole.Expires == null || userRole.Expires > DateTime.Now)
    {
        if(!Roles.RoleExists(userRole.Name))
            Roles.CreateRole(userRole.Name);
        Roles.AddUserToRole(user.Id.ToString(), userRole.Name);
    }
} 
```

**解决方案：**问题是我忘记在我的 web.config 中设置 roleManager，所以即使我在用户登录时填充了我的值，它们是否无处可存储！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:32:32.293

这是有趣的。`Roles.AddUserToRole`接受一个字符串 ( `username`) 和一个角色 ( `rolename`)。您正确地将角色作为字符串传递，但错误地传递`userid`了用户名而不是用户名。

更改您的代码：

```
Roles.AddUserToRole({username}, "Admin"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T13:22:21.890

我有同样的问题。我在**Web.Config**中更改了某些属性的**applicationName**值。如果您更改了它，那么您必须更改所有应用程序变量值。

 **我把它们都改了，现在可以了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T10:35:29.133

我改变了我的角色经理`web.config`，现在它可以工作了。

它是：

```
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
    <providers>
        <add
            name="DefaultRoleProvider"
            type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            connectionStringName="DefaultConnection"
            applicationName="/" />
    </providers>
</roleManager> 
```

现在它是：

```
<roleManager
    enabled="true"
    cacheRolesInCookie="true"
    cookieName=".ASPXROLES"
    cookieTimeout="30"
    cookiePath="/"
    cookieRequireSSL="false"
    cookieSlidingExpiration="true"
    cookieProtection="All"
    defaultProvider="AspNetSqlRoleProvider"
    createPersistentCookie="false"
    maxCachedResults="25" /> 
```**

# django - 如何禁用内部 Django 测试？

> ID：14741515
> 
> 赞同：2
> 
> 时间：2013-02-07T00:27:09.177
> 
> 标签：django, unit-testing

我安装了 django 并写了一些小应用程序。在我尝试使用 ./manage.py test 运行我的测试并看到 django 运行了 419 个测试之后，但我只写了其中的 2 个。据我了解，这是某种内部 Django 测试。我如何禁用它们以及它们实际上来自哪里？我使用 virtualenv，这是 pip freeze 的结果：

*   Django==1.4.3
*   南==0.7.6
*   argparse==1.2.1
*   wsgiref==0.1.2
*   蛋黄==0.4.3

首先，我在我的 setting.py 中使用 SOUTH_TESTS_MIGRATE=False 和 SKIP_SOUTH_TESTS=True 搜索并禁用了南测试，但没有任何改变

**已解决**：当我安装 django-nose 时解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:26:13.547

您可以选择要运行测试的应用程序：

```
python ./manage.py test <my_app_name> 
```

# datagrid - 用户疯了！Wijmo Grid AfterCellUpdate 未触发

> ID：14741516
> 
> 赞同：2
> 
> 时间：2013-02-07T00:27:11.710
> 
> 标签：datagrid, event-handling, grid, wijmo

我有一个可编辑的 wijmo 网格，效果很好，但是有一个问题继续困扰我并使用户感到不安。

当您双击编辑单元格时，在它被编辑后，如果您单击页面上实际网格之外的任何位置，则永远不会触发 AfterCellUpdate（AfterCellEdit 或任何其他）事件；如果您在网格内单击，事件会触发。

这被证明是相当不方便的，因为每次更改单元格数据时我都需要处理基础数据，并且用户通常双击，编辑数据，然后单击保存按钮而不单击网格内部（它对我来说，他们应该能够做到这一点是有道理的）。

当然，数据不会被保存，因为它似乎没有在数据源中被更改；这不会让他们开心:-)

如果他们在网格中单击然后单击保存，它确实会正确保存数据。

有人可以解释一下这个相当令人困惑的问题吗？？？

顺便说一句，我在产品附带的一些示例代码中看到了类似的行为；我的意思是在编辑时，如果我在网格外单击，它会在正在编辑的单元格上保持编辑模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:59:34.707

Wijmo 网格会在当前单元格更改时保存数据。要在单击保存按钮时保存数据而不必在网格内单击，您可以在单击保存按钮时调用网格的 endEdit 方法。

```
 $("#btnSave").click(function(){
       $("#grid").wijgrid("endEdit");
    }); 
```

# jquery - 自动完成的keyup问题

> ID：14741519
> 
> 赞同：1
> 
> 时间：2013-02-07T00:27:33.217
> 
> 标签：jquery, autocomplete, jquery-ui-autocomplete

我有一些非常简单的代码。

好的，问题就是这样，我们有一个输入字段，并使用 jquery 自动完成。我们也有关于这个字段的keyup 功能。这个想法是，当用户在这个字段中输入时，在页面的下方，我们会回显他们正在输入的内容。

因此，如果他们要输入 apple，则在另一个 div 中，span 会使用单词**apple**实时更新。然而，我们也在这个输入上使用 jquery api 触发自动完成。所以问题就出现了，那就是他们输入：

**应用程序**并从自动完成**苹果**中选择。keyup 只注册了他们键入的字母，因此与**app**相呼应。

我的keyup代码如下：

```
//business suburb
$("#suburb").keyup(function() 
{
var suburb=$(this).val();
$(".adburb").html(suburb);
return false;
}); 
```

输入 id 是郊区

预览代码如下：

```
<li class="fixed">Suburb:
  <span class="overBit">
   <span id='title' class="adburb">Your Suburb</span>
  </span>
</li> 
```

所以我的问题是，如何绑定选定的自动完成值，就好像它完全由用户输入一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:43:29.417

把它放在某个地方来触发自动完成选择回调

```
    $( "#suburb" ).on( "autocompleteselect", function( event, ui ) {
      $(".adburb").html($("#suburb").val());
    });

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:03:37.617

在[dtbaker](http://codecanyon.net/user/dtbaker)和[designchemical](http://codecanyon.net/user/designchemical)的帮助下，这个问题现在得到了解决。

代码原样：

```
$("#suburb").autocomplete({
close: function(event, ui) {
    $(".adburb").html($("#suburb").val());
}
}); 
```

# c++ - 为什么不使用#define 来隐藏unique_ptr ugliness 在这里工作？

> ID：14741522
> 
> 赞同：1
> 
> 时间：2013-02-07T00:27:54.673
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

以下隐藏 unique_ptr 丑陋的“技巧”有什么问题？

```
class Drawable;
typedef unique_ptr<Drawable> pDrawable;
#define newDrawable(...) pDrawable(new Drawable (##__VA_ARGS__)) 
```

前两个很好。但是第三个在VS2012中导致错误：

```
 23 IntelliSense: "std::unique_ptr<_Ty, _Dx>::unique_ptr(const std::unique_ptr<_Ty, _Dx>::
_Myt &) [with _Ty=Drawable, _Dx=std::default_delete<Drawable>]" (declared at line 1447 of
"C:\vs2012\VC\include\memory") is inaccessible  file.h  36  26 
```

我不明白为什么这不起作用，除非我误解了 C++ 定义宏的工作方式。我认为它会简单地替换这段代码：

```
newDrawable(a, b, c) 
```

和

```
unique_ptr<Drawable>(new Drawable(a, b, c)); 
```

我知道 unique_ptr 不能被复制，但我不是在复制它，在这里。我是吗？

**编辑：**

我收到了一些关于“使用”相关宏的请求：

如果我要使用它，它将按如下方式使用*：*

```
pDrawable myDraw = newDrawable(); 
```

我想翻译成：

```
unique_ptr<Drawable> myDraw = unique_ptr<Drawable>(new Drawable()); 
```

但是，如果没有 Visual Studio 给出以下错误，我什至无法编译宏。就好像#define 中的某些内容本身是不允许的。错误在我进行定义的那一行返回，而不是在我调用定义的那一行。

请参阅此处了解为什么 make_unique 不起作用：[make_unique 不编译](https://stackoverflow.com/questions/13883824/make-unique-does-not-compile/13883981#13883981)

**编辑2**

我已经回答了下面的问题。上面的代码确实可以编译和工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T00:33:33.780

好吧，`#define`恕我直言，这是一个巨大的问题，因为它不遵守范围规则，并且它们会进行简单的文本替换，有时会产生令人惊讶的结果。当我需要完成某事时，我认为预处理器宏是最后的手段。

定义一个像`make_shared`返回一个`unique_ptr<T>`. 这是允许的，因为您可以将其移动到位。

```
auto a_drawable = make_unique<Drawable>(a, b, c);

template <typename T, typename... Args>
::std::unique_ptr<T> make_unique(Args&&... args)
{
    return ::std::unique_ptr<T>{new T(::std::forward<Args>(args)...)};
} 
```

这*比*宏干净得多，它适用于任何非数组类型。这是一个问题。它也可以用于数组类型，但该代码有点复杂，我不会重复它，我只是指出一个有用的评论者提到的答案：

*   [make_unique 和完美的转发](https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding/13512344#13512344)

至于为什么在使用宏时会出现错误，我不确定。看起来您在结果变成 a 的某些上下文中使用宏`const ::std::unique_ptr<Drawable> &`，然后尝试将其构造为不同的`pDrawable`. 这行不通。为什么会这样，我不知道。这主要取决于您使用宏的上下文，而您没有提供。

这只是突出了我的第一点。宏真的很难看的一个原因是它们是简单的文本替换，并且它们的含义可以根据上下文而改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T07:03:26.487

回答：

确保您实际使用宏，一切都会好起来的。

显然，为了验证#define 宏，VC++ 会检查您对宏的实际使用。如果编译的宏没有实际使用，VC++ 会尝试“理解”它，并可能引发编译器错误。

神奇的是，如果我添加：

```
pDrawable myDraw = newDrawable(); 
```

在我上面的代码之后，错误消失了。

很抱歉浪费了大家的时间。至少这启发了我阅读以下文章：

[http://blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx](http://blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx)

# c# - 显示/隐藏列表框中的项目

> ID：14741523
> 
> 赞同：1
> 
> 时间：2013-02-07T00:27:56.383
> 
> 标签：c#, winforms, listbox

我制作了一个列表框，它运行良好，我还制作了一个搜索功能，但我想隐藏列表框中的项目并仅在通过索引搜索时显示它们。这是我添加项目的代码

```
private void Savebtn_Click(object sender, EventArgs e)
{
    addTolist(gatherItem());
    refreshView();
}

private void addTolist(Person p)
{
    Person.listperson.Add(p);
}

private void refreshView()
{
    listBox1.Items.Add(getItem());
}

private String getItem()
{
    String result = null;
    foreach (Person p in Person.listperson)
    {
        result = p.lastname;
    }
    return result;
} 
```

这是我的搜索代码

```
private void button1_Click(object sender, EventArgs e)
{
    int index = listBox1.FindString(textBox6.Text);
    if (0 <= index)
    {
        listBox1.SelectedIndex = index;
    }
} 
```

有办法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:32:17.073

使用 winform 没有简单的方法可以做到这一点。使用 WPF 更容易。使用winforms，您将不得不处理`remove`这些项目。从技术上讲，您可以使用数据绑定，但根本不建议这样做，因为根据 MSDN 文档，列表框应该直接从您的代码中使用。

再三考虑，您可以过度绘制列表框并将要隐藏的项目设置为透明或其他内容，但这并不容易。您可能需要考虑将所有值存储在一个数组中，然后遍历数组并仅添加您想要的元素。或者切换到 WPF。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T23:18:20.897

您可以在原始列表框上覆盖一个虚拟列表框，并将原始列表设置为不可见。然后你可以通过编写类似的代码来归档相同的效果

```
class DummyItem {
        public string text;
        public int index;
        public override string ToString() {
        return text;
    }
}

public void build_dummy() {
    listbox_dummy.Items.Clear();

    for (int i = 0; i < listbox_origin.Items.Count; i++) {

        // replace with your own judgement
        if (! should_hide(listbox_origin.Items[i])) {
            DummyItem item = new DummyItem();
            item.text = listbox_origin.Items[i].ToString();
            item.index = i;
            listbox_dummy.Items.Add(item);
        }

    }
}

private void listbox_dummy_SelectedIndexChanged(object sender, EventArgs e) {
    var item = (DummyItem) listbox_dummy.SelectedItem;
    var index = item.index;
    listbox_origin.SelectedIndex = index;
} 
```

# java - 针对 Java 5 编译 Web 应用程序，但仍然允许 String.isEmpty()？

> ID：14741524
> 
> 赞同：1
> 
> 时间：2013-02-07T00:27:56.883
> 
> 标签：java, netbeans

我正在针对 Java EE 5 在 Netbeans 中编译我的 Web 应用程序。我知道该`String.isEmpty()`功能仅在 Java 6 中受支持。话虽如此，我仍然可以`.isEmpty()`在我的代码中使用 编译我的项目。

如果我针对 Java EE 5 进行编译，Netbeans 怎么会允许我的 Web 应用程序编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:48:24.037

编译器级别不等于您用于编译的 JDK 级别。编译器级别只检查语法，当然会创建不同的输出。但是编译器本身将在您的类路径上使用 jdk，因此如果您使用 java 5 选项编译但在类路径上使用 java 6 jar，则代码将编译而不会出现错误。你应该检查你的类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:05:06.737

正如许多人所指出的，Java EE 版本与 Java SE (JDK) 版本没有严格的联系。大多数情况下，它们需要最小的 Java SE 版本，但与更高版本兼容。

Java EE 5 规范（[可在此处下载 PDF](http://download.oracle.com/otndocs/jcp/javaee-5.0-fr-eval-oth-JSpec/)）说：

```
This specification requires that containers provide a Java Compatible™ runtime 
environment, as defined by the Java 2 Platform, Standard Edition, v5.0 specification 
(J2SE) 
```

由于 JSE 版本是向后兼容的，因此您可以使用与 Java 5 兼容的容器并在 Java SE 6 或 Java SE 7 之上运行它。

您可以通过检查项目“ *Properties* > *Source* > *Source/Binary Format* ”来检查 Netbeans 使用的兼容性级别

如果您仍然对“Java vs Java EE”有疑问，您可以在 SO 上查找关于 Java SE 和 Java EE 之间区别的几个问题。

# java - Android webview：未为类型 new WebChromeClient(){} 定义方法 setProgress(int)

> ID：14741525
> 
> 赞同：0
> 
> 时间：2013-02-07T00:27:57.137
> 
> 标签：java, android, android-webview

我正在尝试设置一个加载圈以显示在我的 android web 视图应用程序中。自从我开始以来，我已经取得了很大的进步。现在我收到 setProgress 行的错误。

错误信息是：

未为类型 new WebChromeClient(){} 定义方法 setProgress(int)

```
import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.webkit.WebChromeClient;

public class MainActivity extends Activity 
{   
    //Configure the webview setup in the xml layout
    public WebView myWebView;

     @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            //Remove title bar as we already have it in the web app
            this.requestWindowFeature(Window.FEATURE_NO_TITLE);

            getWindow().requestFeature(Window.FEATURE_PROGRESS);
            //Point to the content view defined in XML
            setContentView(R.layout.activity_main);
            myWebView = (WebView) findViewById(R.id.webview);
            myWebView.getSettings().setJavaScriptEnabled(true);
            myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

            WebSettings webSettings = myWebView.getSettings();
            //Yes, we want javascript, pls.

            webSettings.setJavaScriptEnabled(true);
            //Make sure links in the webview is handled by the webview and not sent to a full browser
            myWebView.setWebViewClient(new WebViewClient());
            //And let the fun begin
            myWebView.loadUrl("http://www.google.com");

            myWebView.setWebChromeClient(new WebChromeClient() {
                 public void onProgressChanged(WebView view, int progress) {
                  // Activities and WebViews measure progress with different scales.
                  // The progress meter will automatically disappear when we reach 100%
                  this.setProgress(progress * 100);

                 }});

        }

    @Override
    public void onBackPressed(){
        myWebView.goBack();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:30:19.190

改为

```
MainActivity.this.setProgress(progress * 100); 
```

要不就

```
setProgress(progress * 100); 
```

这样您就可以明确引用父类实例。仅`this`在`WebChromeClient`引用该类的实例时执行*此*操作，因此会出现编译时错误。

由于您正在使用 WebView，请参阅文档以获取有关[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)s 和其他所有相关内容（包括客户端）的更多信息。

# jquery - DOM元素上的jQuery键盘事件

> ID：14741537
> 
> 赞同：1
> 
> 时间：2013-02-07T00:29:16.940
> 
> 标签：jquery, keyboard, interactive

我正在构建一个项目，我将有两个 div，它们的 CSS 在不同的单个按键上切换。

我正在使用这个 jQuery 库：[https ://github.com/jeresig/jquery.hotkeys/](https://github.com/jeresig/jquery.hotkeys/)

你可以在这里看到一个简单的演示：http: [//lazarogamio.com/projects/key_test/](http://lazarogamio.com/projects/key_test/)

这是我的 HTML：

```
<div class="test_box" id="red"></div>

<div class="test_box" id="green"></div> 
```

我的 CSS：

```
.test_box {
width: 200px;
height: 200px;
border: 2px solid #000;
margin: 20px;
float: left;
}

.red {
background-color: red;
}

.green {
background-color: green;
} 
```

还有我的 jQuery：

```
function keymap(){

$(document).bind('keydown', 'r', function (evt){
    $('#red').toggleClass('red');
    });

$(document).bind('keydown', 'g', function (evt){
    $('#green').toggleClass('green');
    });
};

$(document).ready(keymap); 
```

目前，keydown 事件正在工作，但对于每个键和两个 div 都是有效的。我最初让每个 div 由一个单独的函数控制，但我的结果是一样的。我也试图映射其他键什么都不做，无济于事。我的预感是我没有正确定位键，或者可能没有将函数绑定到正确的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:14:44.657

你在包含 jQuery`hotkeys` *之前就包含了。*它需要反过来。目前，您只是`keydown`正常绑定，并且`hotkeys`包含无效。

如果您首先包含 jQuery，它应该可以按您的预期工作：

[http://jsfiddle.net/ExplosionPIlls/GGvrd/](http://jsfiddle.net/ExplosionPIlls/GGvrd/)

# eclipse - 如何用 sbt 和 sbt-osgi 构建一个 eclipse 插件？

> ID：14741539
> 
> 赞同：3
> 
> 时间：2013-02-07T00:29:28.300
> 
> 标签：eclipse, scala, plugins, sbt

是否可以使用 sbt build 构建 eclipse 插件？

一旦构建，我是否只需将 de jar 放在 eclipse 的插件目录中？

更新：

*   [sbt-tycho](https://github.com/ashewring/sbt-tycho)看起来很有希望，但对于 sbt 0.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:31:46.820

scala-ide 组有一个[giter8](http://github.com/n8han/giter8)模板，用于使用 maven 构建 scala eclipse 插件

`g8 scala-ide/scala-plugin.g8`

更新：

创建插件的最佳方式是通过插件开发环境 (PDE)。从那里你可以添加scala性质。

# android - 如何在 Android JNI 中链接加密共享库

> ID：14741541
> 
> 赞同：1
> 
> 时间：2013-02-07T00:29:46.410
> 
> 标签：android, android-ndk, cryptography, java-native-interface, shared

我正在编写一个包装器来使用加密的一些功能。我使用 Android-NDK从[openssl-android](https://github.com/guardianproject/openssl-android)构建加密库。现在我有了我需要的 libcrypto.so，但我不知道如何将它与我的包装器链接。

我的项目树是这样的

```
(proj root)
|
|->(src)
|->(src)-> com.package
|->(src)-> com.package->NativeCipher.java
|
|->(jni)
|->(jni)->Android.mk
|->(jni)->NativeCipher.c 
```

NativeCipher.java

```
public class NativeCipher {
    static {
         System.loadLibrary("crypto");
         System.loadLibrary("NativeCipher");
     }

     public static native byte[] AESEncrypt(byte[] in, byte[] key);
} 
```

NativeCipher.c

```
#include <string.h>
#include <jni.h>
#include <aes.h>

jbyteArray Java_com_package_NativeCipher_AESEncrypt(JNIEnv* env, jobject this, jbyteArray in, jbyteArray key)
{
    // All my code here
} 
```

我需要使用加密提供的#include 的功能。但是，我不知道如何处理 NDK 生成的 .so 文件以及如何构建 Android.mk 文件。

在此先感谢，我试图尽可能具体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:34:43.277

本机库转到您的 Android 项目的`libs/armeabi`or `libs/armeabi-v7a`。不过，您可能想要重命名 OpenSSL 库，因为系统已经有一个`libcrypto.so`. 至于您自己的 JNI 包装器，只需从 NDK 中获取共享库示例并修改为使用您自己的文件即可。

# notepad++ - 记事本++在id字符串中增加数字

> ID：14741542
> 
> 赞同：2
> 
> 时间：2013-02-07T00:29:51.153
> 
> 标签：notepad++

我目前正在使用 Notepad ++ 中的一个 xml 文件，它基本上看起来像这样：

```
<f>
  <p id="165" type="TEXT"]formatted paragraph from a book</p>
</f>
<f>
  <p id="166" type="TEXT"]other paragraph[/p>
</f]
<f]
  <p id="167" type="TEXT"]and another one</p>
</f> 
```

等等

在处理我的文件时进行一些更改后，大于 167 的数字消失了。字符串如下所示：

```
<f>
  <p id="" type="TEXT">another formatted paragraph</p>
</f> 
```

除了身份证号码，整个结构完好无损。所以我想要做的是在从167到最后一行4914的引号之间插入以下数字。是否可以只使用Notepad ++？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T13:26:04.360

是和不是。

*   **是**的，有可用的脚本插件，因此您无需离开 N++ 环境即可完成任务。

*   **不**，您不能以声明方式执行此操作，您仍然需要一些编程/脚本。如果所有段落都相同，只是数字不同，那么就有一种无需编程的方法。但在你的例子中，我不这么认为。

# php - jQuery AJAX 问题 - 页面在提交和未发送数据时不断刷新

> ID：14741544
> 
> 赞同：0
> 
> 时间：2013-02-07T00:29:56.780
> 
> 标签：php, jquery, mysql, ajax, pdo

我正在尝试使用 PHP 和 MySQL 创建一个动态 AJAX 函数，但到目前为止收效甚微。其目的是更新数据库中的记录而不刷新页面或更改到另一个页面。

在带有表单的页面上，我有以下代码：

```
// jQuery

<script type="text/javascript">
<?php 

$sql = "SELECT * from pm_schedule";
$result = $pdo->query($sql);

foreach ($result as $row) 
{
echo 
"$(document).ready(function() {
 $('#updatebtn".$row['id']."').click(function() {
 $('#result".$row['id']."').show('slow').delay(4000).hide('slow')
 $.post('process.php', $('#updateform".$row['id']."').serialize()) 
 });    
return false;   
});";
}
?>
</script> 

// form

$sql = "SELECT * from pm_schedule";
$result = $pdo->query($sql);
foreach ($result as $row) 
{
echo 
'<form id="updateform'.$row['id'].'">
<div class="tbl_header">'.$row['task'].'</div>

Due Date: 
<script>
$(function() {
$( "#datepicker'.$row['id'].'" ).datepicker({ minDate: -0,  
dateFormat: \'dd/mm/yy\', maxDate:  new Date(2013, 1,22) })
});
</script>
<input type="text" id="datepicker'.$row['id'].'" style="width: 100px; height: 10px;" value="'.$row['duedate'].'" name="duedate"/>&nbsp;

Status:
<select style="width: 125px;" name="status">
<option>'.$row['status'].'</option>
<option>----</option>
<option>Pending</option>
<option>In Progress</option>
<option>Complete</option>
</select>
&nbsp;

<input type="hidden" name="id" value="'.$row['id'].'">
<input type="submit" id="updatebtn'.$row['id'].'" value="Update" 
style="width: 100px;"/>
</form>

<div id="result'.$row['id'].'" style="display: none; color: red">
Update successful!
</div>
<p>';} 
```

在负责处理的页面**（process.php）**上，我有以下代码：

```
<?php
$name = mysql_real_escape_string($_POST["name"]);
$status = mysql_real_escape_string($_POST["status"]);
$id = mysql_real_escape_string($_POST["id"]);

$sql = "UPDATE pm_schedule SET name=?, status=?, id=? WHERE id=?";
$q = $conn->prepare($sql);
$q->execute(array($name,$status,$id));
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:27:26.630

`return false`是在调用的函数中，`$(document).ready`而不是在点击处理程序中，所以我猜这会导致表单在完成点击处理程序后提交。也许将语句移动一行：

```
echo 
"$(document).ready(function() {
   $('#updatebtn".$row['id']."').click(function() {
     $('#result".$row['id']."').show('slow').delay(4000).hide('slow');
     $.post('process.php', $('#updateform".$row['id']."').serialize());
     return false;
   }); 
 });"; 
```

正如 ripa 所说，再多一些也`;`应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:12:54.850

放在`;`这里

```
foreach ($result as $row) 
{
  echo 
  "$(document).ready(function() {
    $('#updatebtn".$row['id']."').click(function() {
    $('#result".$row['id']."').show('slow').delay(4000).hide('slow');
    $.post('process.php', $('#updateform".$row['id']."').serialize());
    });    
   return false;   
     });";
 } 
```

# javascript - 为每个元素动态创建新的唯一 ID

> ID：14741545
> 
> 赞同：1
> 
> 时间：2013-02-07T00:30:10.377
> 
> 标签：javascript, jquery

在下面的代码中，我正在做各种事情，但我现在看到的是，我为每个菜单项 href 分配了与我正在创建的每个元素的 id 名称相同的名称。

```
$(".nav li a").on("click", function(e) {
$(this).attr("href",$(".span6").attr("id"));
$('#content').removeAttr('id');

var $row = $(".span9");
var $rowNew = $('.new');

if ($rowNew.children().length > 1) {
        $(".span9 div").removeClass("new");
        $('<div class="row-fluid new"></div>').prependTo($row);
}

if ($(".new").length == 0) {
        $('<div class="row-fluid new"></div>').prependTo($row);
        $('<div id="content" class="span6"></div>').appendTo('.new');
} else {
    $('<div id="content" class="span6"></div>').appendTo('.new');
}

}); 
```

这就是我为每个菜单项 href 分配与我正在创建的每个元素的 id 名称相同的名称的方式：

```
 $(this).attr("href",$(".span6").attr("id")); 
```

我现在需要为每个人创建一个新的唯一 ID 名称`<div id="content" class="span6"></div>`

我知道它已经调用了一个 id`#content`但我正在使用点击删除它`$('#content').removeAttr('id');`

如何每次生成新的唯一 ID？

在另一个使用php的模板中我这样做：`<?php $a = 1; ?>`然后`<div class="span6" id="<?php echo "i".$a; ?>">`在一个循环中，`<?php $a++; ?>`但在我的情况下使用jquery？

另外我认为我需要对第一个和最后一个做一些事情，`<div id="content" class="span6"></div>`因为它们已经设置了一个 id #content，这些 id 仅在下一次点击时被删除，所以创建一个新的 id 将导致有 2 个 id我猜是第一个和最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:56:59.793

您可以使用函数来测试可用的第一个 ID。

```
function setId(elem)
{
    var first = 0;
    while($('#i'+first).length > 0) first++;
    elem.setAttr('id', 'i'+first);
}

//Usage:
setId(myJqueryObject); 
```

# git - 如何使用带有 Git 和 Team Foundation Service 的 VS2012 获取我的代码的早期版本？

> ID：14741550
> 
> 赞同：1
> 
> 时间：2013-02-07T00:30:47.343
> 
> 标签：git, visual-studio-2012, azure-devops

我无法在 VS2012 用户界面或帮助文档/博客中看到任何内容。

[我已经在http://tfs.visualstudio.com/](http://tfs.visualstudio.com/)注册了一个免费帐户。我已经安装了 VS2012 Update 2 CTP，并安装了必要的 Git 扩展。到目前为止，其他一切都运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T07:05:53.430

在我看来，在 Git 存储库的不同提交之间切换的最简单方法是使用命令行。通过这样做，您将更好地控制您的存储库，并且您将能够使用 Git 提供的所有功能（其中只有少数可以从 Visual Studio 用户界面访问）。

我建议你安装[posh-git](http://dahlbyk.github.io/posh-git/)，它是一个很棒的 Git PowerShell 工具。这是 Microsoft Virtual Academy 上的一个非常有用的视频，可指导您完成 Git 安装/配置过程：[安装和配置 Git](http://www.microsoftvirtualacademy.com/training-courses/using-git-with-visual-studio-2013-jump-start)（直接跳到第 2 节）。

一旦您安装和配置了 posh-git，您将获得 Git 的全部功能！而且您要查找的操作非常容易完成：

1.  `git log --graph --oneline --decorate`显示您的历史记录并确定您想要切换到的代码的先前版本
2.  `git checkout <commit>`从当前版本切换到所需版本

希望这会对您有所帮助，请不要犹豫，查看本教程的每个部分，以便更好地理解 Git 的各个方面。

# php - PHP登录，检查凭据时索引重定向到密码输入

> ID：14741551
> 
> 赞同：0
> 
> 时间：2013-02-07T00:30:54.217
> 
> 标签：php, html, security, dynamic, login

我正在迈出第一步`php`，我遇到了这个对我来说无法解决的问题。我正在尝试创建一个网站，该网站使用简单的`MySQL`数据库来识别访问者提供的一些凭据。请注意，此时*我对网站的整体安全性并不真正感兴趣*。现在解决问题：

假设我有 3 个文件。在文件`main_login.php`中存储了用户进入网站必须使用的表单，即调用`checklogin.php`：

```
<form name="form1" method="post" action="checklogin.php"> 
```

在`checklogin.php`我正在检查用户提供的输入（名称和密码）是否包含在数据库中，如果正确，我将他重定向到`index.php`：

```
// More unrelated php here....
$sql="SELECT * FROM $tbl_name WHERE username='$username' and password='$password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row
if($count==1)
{   
   // Register $username, $password and redirect to file "index.php"
   $_SESSION['username'] = $username;
   $_SESSION['password'] = $password;
   header("location:index.php");
}
else 
{
   echo "Wrong username or password";
} 
```

最后，`index.php`我正在检查是否定义了“$_SESSION[username]”，否则我将用户重定向到 main_login.php。

```
<?php
    session_start();
    if (!isset($_SESSION['username']))
    {
        header("location: main_login.php");
    }
?>

// HTML code here... 
```

现在的**问题**：也许我在这方面投入了太多时间，我无法清楚地思考，但每当我输入正确的密码和用户名时，我总是被重定向到 main_login.php，这与我输入错误凭据时不同。有人可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:35:29.287

当您在检查登录页面上设置会话变量时，您似乎还没有启动会话。这意味着`$_SESSION['username']`一旦它们被重定向到索引页面就不会被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:43:20.850

session_start() 根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。

如果您没有 session-cookie 并且因为您没有发布或到达那里 session_start 启动一个 FRESH 会话，从而清除用户名和密码，只需将 SID 添加到您的重定向以确保安全，否则您将被重定向到索引并直接再次登录。

```
header("location:index.php".SID); //should fix the missing sessioncookie 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:11:06.383

`session_start()`在任何输出之前的脚本顶部。

您的会话未初始化，因此您无法操纵会话变量。

# haskell - 有趣的 Haskell 行为：三个数字的 min 函数，包括一个负数

> ID：14741552
> 
> 赞同：12
> 
> 时间：2013-02-07T00:30:56.057
> 
> 标签：haskell

我一直在 GHCi 中使用一些 Haskell 函数。

我得到了一些非常有趣的行为，我想知道为什么会这样。

我意识到该函数`min`只应该与两个值一起使用。但是，当我使用三个值时，就我而言

```
min 1 2 -5 
```

我越来越

```
-4 
```

作为我的结果。

这是为什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-07T00:34:01.410

你得到这个结果是因为这个表达式：

```
min 1 2 -5 
```

解析就好像它像这样用括号括起来：

```
(min 1 2) -5 
```

这与此相同：

```
1 -5 
```

这与此相同：

```
1 - 5 
```

这当然是-4。

在 Haskell 中，函数应用是绑定最紧密的操作，但它并不贪心。事实上，即使是一个看似简单的表达式，`min 1 2`实际上也会导致两个单独的函数调用：`min`首先使用单个值 1 调用该函数；该函数的返回值是一个新的匿名函数，它将返回 1 与其单个参数之间的较小值。然后使用参数 2 调用该匿名函数，当然返回 1。因此，您的代码的更准确的全括号版本是这样的：

```
((min 1) 2) - 5 
```

但我不会把所有的事情都分解得那么远。在大多数情况下，看起来像具有多个参数的函数调用实际上变成了一系列多个单参数函数调用这一事实是一个可手动操作的实现细节。重要的是要知道，如果您向函数传递的参数太少，您会返回一个可以使用其余参数调用的函数，但大多数时候您可以忽略这样一个事实，即此类调用是在幕后发生的即使您传递正确数量的参数开始。

因此，要找到*三个*值中的最小值，您需要将两个调用链接在一起`min`（根据上面的逻辑实际上是四个调用，但同样，挥手）：

```
min (min 1 2) (-5) 
```

需要使用括号`-5`来确保将`-`解释为前缀否定而不是中缀减法；没有它们，您将遇到与原始代码相同的问题，只是这一次您会要求 Haskell 从函数中减去一个数字并会出现类型错误。

更一般地说，您可以让 Haskell 通过对列表应用折叠来为您进行链接，然后列表可以包含任意数量的数字：

```
foldl1 min [1, 2, -5] 
```

（请注意，在文字列表语法中，逗号和方括号分隔`-5`，使其显然不是减法运算，因此此处不需要括号。）

调用*fun**列表的意思是“获取**list*的前两项并对它们调用*fun*。然后获取该调用的结果和 list 的下一项*，*并对这两个值调用*fun*。然后获取该调用的结果和列表的下一项...” 以此类推，直到没有更多的*list*，此时最后一次调用*fun*的值返回给原始调用者。[`foldl1`](https://downloads.haskell.org/~ghc/6.12.2/docs/html/libraries/base-4.2.0.1/Data-Foldable.html#v%3Afoldl)

 ***对于 的特定情况`min`，已经为您定义了一个折叠版本：[`minimum`](https://downloads.haskell.org/~ghc/6.12.2/docs/html/libraries/base-4.2.0.1/Data-Foldable.html#v%3Aminimum)。所以你也可以这样写：

```
minimum [1, 2, -5] 
```

这与我的解决方案完全一样`foldl1`；特别是，如果传递一个空列表，两者都会抛出错误，而如果传递一个单元素列表，它们将返回该元素不变而无需调用`min`.

感谢 JohnL 提醒我`minimum`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T00:37:22.033

当您键入 时`min 1 2 -5`，Haskell 并没有`min 1 2 (-5)`像您想象的那样将其分组为 。而是将其解释为`(min 1 2) - 5`，也就是说，它进行减法而不是求反。`1`和的最小值显然`2`是`1`，`5`从中减去将（完全正确）给你`-4`。

通常，在 Haskell 中，您应该用括号将负数括起来，这样这种事情就不会意外发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T05:21:20.127

没有什么可以添加到以前的答案中。但您可能正在寻找此功能。

```
import Data.List
minimum [1, 2, -4] 
```***

# jquery - 传递值 - 都在同一个文件中 - 不起作用

> ID：14741557
> 
> 赞同：1
> 
> 时间：2013-02-07T00:32:00.123
> 
> 标签：jquery, ajax, openlayers

我需要你的建议。我是 ajax 和 jquery 的新手。我正在使用 postgresql 9.1 /postGIS 2.0 /openlayers/geoserver 和 apache。

当我使用javascript点击地图（openlayers）时，我设法获取了一个功能的ID。

使用 ajax 我试图将此值传递给 PHP 值并执行查询。Openlayers、jquery、javascript 和 ajax 工作正常，但 php 从未获得价值。这是我的代码片段。

```
//this is inside openlayers init function
function selected_feature(event){
//getting the id
var sf = event.feature.fid;
var sfs = sf.split(".");
var sff = sfs[1]
//ajax
$(document).ready(function()
{
 $.post("map.php", { jas: 'sff'});
});

//the php code snippet, after openlayers
$_SESSION['blah'] = $_POST['jas']; 
$blah= $_SESSION['blah'];
echo $blah;
 $queryd='
  SELECT
   pins.p_name 
  FROM
    pins
    WHERE
    pins.p_id='.$blah;
 //fetching to fill array
 $resultd=pg_query($conn, $queryd);
 $nord=pg_num_rows($resultd);
 $d=0;
  while($arrayd=pg_fetch_array($resultd)){
      $name[$d]=$arrayd['p_name'];
    $d++;
        echo $arrayd['p_name'];
                echo $arrayd[$d];

    } 
```

问题是 php 的回声不起作用，查询根本不起作用。我知道这个问题听起来像是重复的，但我相信是不同的，因为所有代码都在同一个文件中（名为 map.php）。另外，背景上有一些网络地图。我什至不知道是否是导致问题的网络映射程序之一。

请指教

谢谢你。

编辑我刚刚编辑了 ajax 部分。我已经用这个代替了

```
jQuery.post("map.php", { jas : "sff" }, function(data) {
  //  alert(data);
  }); 
```

......仍然没有运气

编辑#2

根据[本](http://wabism.com/ajax-tutorial-with-jquery/)教程，我编辑了我的代码。所以现在我的 map.php 中有这个 jquery

```
jQuery.post("testone.php", { jas : sff }, function(data) {
  alert(data);
  }); 
```

而在 testone.php 这个 php 代码

```
<?php
  $jas = $_POST['jas'];
     print $jas;
?> 
```

map.php 实际上会提醒数据。但是，还有一件事。如何将数据作为 PHP 值传回 map.php，这样我也可以激活查询？大多数教程都是关于提醒数据或将它们放入`<div>`. 我想用php。就像是

```
 jQuery.post("testone.php", { jas : sff }, function(data) {
    //put returned data in a php var
          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:46:43.650

我会将您的 PHP 移动到另一个文件，然后您需要`echo json_encode($name);`在 jQuery 帖子的回调处理程序中处理返回的数据。

`$.post('new.php',{jas:'sff'},function(data){ //do something cool with data[0] through the last index of the array });`

# search - 多值位置字段上的 Solr 空间搜索

> ID：14741558
> 
> 赞同：2
> 
> 时间：2013-02-07T00:32:05.260
> 
> 标签：search, solr, geolocation

Solr 中是否有办法知道多值位置字段上文档中的匹配地址，而不仅仅是文档。例如，我可能有“商店 A”，其位置为“100 Main Street, NY, 00001”和“100 NotMainStreet, NY, 00010”，相距 40 英里。当我假设“100 Main Street, NY, 00001”匹配时搜索“00002”时，我希望结果以某种方式指示“Store A”匹配的位置“100 Main Street, NY”。

我尝试了 Solr3.5 的 Solr2155 补丁，但我在其中找不到任何可以实现这一点的东西，我查看了新的 Solr4 空间搜索模块的文档，但我也没有发现任何有用的东西。请帮忙，谢谢

# java - GWT 序列化是否支持 writeObject() 和 readObject()？

> ID：14741560
> 
> 赞同：1
> 
> 时间：2013-02-07T00:32:11.863
> 
> 标签：java, gwt, serialization

我在任何地方都找不到它。我可以[发现](https://developers.google.com/web-toolkit/doc/latest/FAQ_Server?hl=fr#Does_the_GWT_RPC_system_support_the_use_of_java.io.Serializable)“GWT 序列化的语义远不如标准 Java 序列化复杂”，但对`writeObject()`和的支持却一无所获`readObject()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:13:32.143

GWT-RPC 有自己的序列化格式。它不支持`writeObject()`and `readObject()`from `java.io.Serializer`，但它有自己的机制，称为[`CustomFieldSerializer`](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideCustomSerialization).

# jquery - 用于显示李克特结果的 JQuery？

> ID：14741561
> 
> 赞同：1
> 
> 时间：2013-02-07T00:32:12.593
> 
> 标签：jquery, css

应用程序存储具有多个李克特量表（1：一般 - 5：非常好）的表格的结果。数据已经保存，现在我需要一种巧妙的显示方式。

是否有一个 jquery 库可以将一组 Likert 值转换为有吸引力的图形表示（例如渐变或条形）？我已经创建了后端表单，这是面向公众的，没有数据输入。我只显示结果。

我可以从头开始组装一些东西，但如果它已经可用，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T10:42:43.983

有一个基于 D3.js 的解决方案可以满足您的需求：[https ://github.com/phil303/Likert-Or-Leave-it](https://github.com/phil303/Likert-Or-Leave-it)

# ios - 将自定义对象添加到 NSMutable 数组不起作用，addObject 返回空数组

> ID：14741565
> 
> 赞同：0
> 
> 时间：2013-02-07T00:32:42.143
> 
> 标签：ios, nsmutablearray

我正在制作一些自定义对象。我想将每个对象添加到一个数组中，但是在运行下面的代码之后，数组仍然是空的。

```
for (int i = 0; i<= numberOfObjectsWanted; i++) {
     CustomClass *object = [[CustomClass alloc]init];
     [objectsArray addObject:object];
} 
```

objectsArray 是一个 NSMutableArray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:33:53.017

您没有添加已创建的对象。尝试...

```
for (int i = 0; i<= numberOfObjectsWanted; i++) {
     CustomClass *object = [[CustomClass alloc]init];
     [objectsArray addObject:object];
} 
```

**编辑**- 问题中的新代码现在看起来更好。接下来要检查的是你是否有一个好的可变数组开始。`NSLog(@"array is %@", objectsArray);` 在循环内部尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:44:23.367

因此，如果您的数组是`nil`，则发送的任何消息都不会对其产生任何影响...

```
objectsArray = [[NSMutableArray alloc] init]; 
```

预先。

# c++ - C++ VS2012 处理大于 32 位的数字

> ID：14741570
> 
> 赞同：-1
> 
> 时间：2013-02-07T00:32:47.767
> 
> 标签：c++, visual-studio-2012

我有这个程序需要处理大量数字以将数字分解为素数。就像 RSA 分解挑战一样。

我在一个带有素数的 txt 文件中得到了这个列表。这是我用来制作该列表的一段代码：

```
int export_list (int lim = 50)
{
    int last_in_txt = 0;
    {
        ifstream infile ("Primes.txt");
        int k;
        while(infile >> k)
        { last_in_txt = k; }
    }
    // Now last_in_txt is assigned properly, and Primes.txt is closed

    cout << "\nLast number in \"Primes.txt\": " << last_in_txt << endl << endl;
    cout << "Press <Enter> to start appending primes... ";
    cin.get();
    cout << "\nAppend started:\n";

    last_in_txt++;

    ofstream file ("Primes.txt" , ios::app);
    int x, counter;

    if (file.is_open()) // if it opens correctly
    {
        for (x = last_in_txt , counter = 0 ; counter < lim ; x++ , counter++)
        {
            if (check_prime (x)) // returns 1 when x is prime, returns 0 when not
            {
                cout << "Appending " << x << "\t\t" << "Estimated time remaining: " << (lim - counter) / 1000 <<endl;
                file << x << " ";
            }
        }
        cout << "Done!" << endl << endl << pressenter;
        cin.get();
    }
    else
    {
        cout << "Unable to open file" << endl << pressenter;
        cin.get();
    }
    return(0);
} 
```

问题是，当我知道这个 txt 文件包含大于 32 位的数字时，它不会处理它们......并且`last_in_txt`变量将始终存储不大于 32 位的 txt 文件中的最后一个数字......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:50:30.810

如果 64 位整数就足够了，请使用 int64_t。如果您需要更大的数字，请检查以下问题：[Bigint (bigbit) library](https://stackoverflow.com/questions/1055661/bigint-bigbit-library)

# c# - 如何在 C# 中将导航控件添加到 Web 浏览器控件

> ID：14741571
> 
> 赞同：1
> 
> 时间：2013-02-07T00:32:49.320
> 
> 标签：c#, winforms

我在 C# 项目中使用 Web 浏览器控件来加载 html 页面。

只有在右键单击网页后，我才能向后/向前导航或刷新页面。

如何将这些导航控件添加到 Web 浏览器本身，以便用户无需右键单击即可导航。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:47:50.873

您可以在表单上添加按钮并将其单击事件连接到您需要的适当操作。

```
//if wb is your WebBrowser instance
wb.GoBack();
wb.Refresh();
wb.GoForward(); 
```

# android - Android：如何以编程方式读取短信详细信息并对其进行过滤？有没有像iOS这样的限制？

> ID：14741573
> 
> 赞同：0
> 
> 时间：2013-02-07T00:33:14.347
> 
> 标签：android, sms

我需要阅读 SMS 详细信息，获取 SMS 发件人的电话号码，删除已读消息，有时向所有发件人广播 SMS。它就像一个注册服务器。我听说可以做这些事情。但是，该怎么做呢？有什么建议吗？

此外，有没有像iOS那样的限制？例如，iOS 不允许您在后台发送短信，您必须征得用户的许可。您无法访问 SMS 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:14:00.720

好的！没有人回答我。经过几天的研究。我在 GitHub 上有几个很好的例子。最好的一个是 nyaruka / android-sms-relay 。 [GitHub 上的短信中继](https://github.com/nyaruka/android-sms-relay)

> **Android SMS Relay** e 这是一个简单的 SMS 中继器。它本质上将您的 Android 手机变成了一个 SMS 调制解调器，它将消息中继到您选择的 HTTP 服务器，反之亦然。
> 
> 我们在工作中经常使用它，所以我们认为我们会向世界开放它。请注意，这个特定的代码库仍然是 Alpha 版，我们一直在为外界清理它。它很可能会崩溃，但我们感谢所有测试和错误报告。
> 
> 使其与其他解决方案不同的事情：
> 
> 我们由数据库支持以实现持久性，我们认为在断电、重启或其他问题的情况下，消息被丢弃的可能性较小我们的消息 UI 比其他人更漂亮，我们将打开或关闭 Wifi在网络错误的情况下.. 这在 WiFi 不可靠的地方很有用，因为手机在运行时会回退到 GSM（并在再次开始工作时自动切换回 WiFi） 轻松与我们的集成RapidSMS httprouter 模块。( [http://github.com/nyaruka/rapidsms-httprouter](http://github.com/nyaruka/rapidsms-httprouter) ) 这还是很早的东西，所以任何反馈或错误报告都非常感谢。

# tomcat7 - TOMCAT 7 未部署战争

> ID：14741584
> 
> 赞同：0
> 
> 时间：2013-02-07T00:34:24.717
> 
> 标签：tomcat7, war

我已经使用 Eclipse 开发了一个动态 Java 项目，其中涉及 Web 服务（RESTful）。完成后，我尝试运行我的项目 Eclipse IDE 的 Tomcat 7 运行时，它工作正常。我能够访问我所有的网络服务。但是，当我通过右键单击项目并将其导出到 WAR 文件并将 .war 文件放置在 Tomcat 7 的 webapps 文件夹中从我的项目中创建了一个 WAR 文件时。通过运行startup.bat启动tomcat，它抛出以下异常并且我无法访问任何Web服务：我已将所有必需的jar文件放在Tomcat的lib文件夹中。

1.  为上下文 [/Books] 修复 docBase 异常（Books 是我的战争文件名）
2.  无法创建工作目录 [{CATALINA_HOME}\work\Catalina\localhost\Books]
3.  未能创建目标目录以复制资源。

谁能让我知道我错过了什么？

提前致谢。

问候， Piyush

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T17:35:48.617

如果工作文件夹在 tomcat7 文件夹中不存在，则可能会出现无法创建“工作目录”错误。

此错误也可能是由于tomcat没有足够的权限在tomcat7目录中读取、写入和执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T07:27:14.840

问题是，tomcat 没有在类路径中找到您的 web.xml 位置。

执行以下步骤：

**右键单击 web 项目--> 属性--> 部署程序集-->**在我的情况下，将您的类路径添加到 web.xml (src/main/webapp)。

# android - ViewPagerExtension 示例 Android github

> ID：14741586
> 
> 赞同：2
> 
> 时间：2013-02-07T00:34:35.720
> 
> 标签：android, android-viewpager

我正在尝试使用来自 android github [https://github.com/astuetz/ViewPagerExtensions的 viewpager 扩展](https://github.com/astuetz/ViewPagerExtensions)

我在 eclipse 中导入了这个例子，并开始遇到很多错误，如果它在下面的话。为`activity_fixed_icon_tabs.xml`布局。

找不到以下类：-`com.astuetz.viewpager.extensions.FixedTabsView`

有人可以指导我`ViewPagerExtension`在eclipse中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T04:44:17.987

ViewPagerExtensions 是一个库，需要运行示例项目

右键单击示例项目> prpoerties > android

然后单击添加按钮，然后选择 ViewPagerExtensions 作为库

清理并构建您的项目

# c# - 新手视图模型问题..子类或不子类

> ID：14741591
> 
> 赞同：4
> 
> 时间：2013-02-07T00:35:21.223
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

好的，基本问题，我是一名自学成才的开发人员，所以我似乎经常无法确定哪种方法是正确的方法......这就是其中之一！简单我有一个视图模型，其中包含一组子项。但是在定义这些类的地方我无法决定子对象是否应该是父对象的子类......

例如这个：

```
public class ActionChartViewModel
{
    public IEnumerable<ActionChartItemViewModel> Items { get; set; }
    public TextPagingInfo TextPagingInfo { get; set; }
}

public class ActionChartItemViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Rating { get; set; }
    public string Comment { get; set; }
    public string AssignedToUserName { get; set; }
    public string ContactRequested { get; set; }
    public bool Resolved { get; set; }
    public int NoteCount { get; set; }
    public string ContactDetails { get; set; }
    public int ResponseId { get; set; }
} 
```

或这个：

```
public class ActionChartViewModel
{
    public IEnumerable<Item> Items { get; set; }
    public TextPagingInfo TextPagingInfo { get; set; }

    public class Item
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Rating { get; set; }
        public string Comment { get; set; }
        public string AssignedToUserName { get; set; }
        public string ContactRequested { get; set; }
        public bool Resolved { get; set; }
        public int NoteCount { get; set; }
        public string ContactDetails { get; set; }
        public int ResponseId { get; set; }
    }
} 
```

我更喜欢第二个代码可读性和简单性，但我不知道子类的优缺点。大家会怎么想？？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:36:01.850

我会使用单独的类（在同一个文件中）而不是内部类。当内部类仅服务于父类时，内部类将很有用，即不会从父类外部访问，只能通过父类方法等访问。在您的情况下，内部类需要在视图上使用，所以我认为没有必要。第一个选项，即单独的类，实际上对我来说更简单并且读起来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:28:57.797

“子类”是指您创建其类型的更具体的实现（继承）。正如@bloparod 所说，您正在做“内部课程”。我也很少使用内部类。有时我使用 some `private`or `internal`class 作为临时的。如果你这样做，你将需要使用 sintaxe 来创建，例如：

```
ActionChartViewModel.Item item = new ActionChartViewModel.Item(); 
```

我通常将文件分开并使用`public`类，但有时当我有很多 ViewModel 时，我认为一个好的做法是将所有相同类别的 ViewModel 保存在一个文件中，并在必要时继承，例如：

**文件：** ProductViewModel.cs

```
public class ProductViewModel 
{
   public int Id { get; set; }
   public string Name { get; set; }
   public decimal Price { get; set; }
   public string CategoryName { get; set; }
}

public class ProductDetailViewModel : ProductViewModel 
{
   public int Stocke { get; set; }
   public string Obs { get; set; }
   public IEnumerable<ProductMovViewModel> Inventory 
   /* other properties */
}

public class ProductMovViewModel 
{
   public int Id { get; set; } 
   public DateTime Date { get; set;
   public int Amout { get; set; }
} 
```

作为一个很好的做法，您也可以根据自己的喜好将您的 ViewModel 文件分开。

# java - 线程“主”java.util.NoSuchElementException 中的异常：未找到行

> ID：14741592
> 
> 赞同：0
> 
> 时间：2013-02-07T00:35:26.820
> 
> 标签：java, exception

我正在尝试获取用户输入，并且在第二个输入值之后出现此错误：

> 线程“主”java.util.NoSuchElementException 中的异常：在 Reservations.main(Reservations.java:29) 的 Reservations.start(Reservations.java:50) 的 java.util.Scanner.nextLine(Unknown Source) 处找不到行

```
import java.util.Scanner; // Needed to read user input

public class Reservations {

        // Boolean array for seating [false = available, true = taken]
        static boolean[][] seats;

        // Main method
        public static void main(String[] args) {

                // Initiates all array values to be false (available)
                seats = new boolean[4][4];
                for (int i = 0; i < 4; i++) {
                        for (int j = 0; j < 4; j++) {
                                seats[i][j] = false;
                        }

                        // Welcome message
                        System.out.println("-------------------------");
                        System.out.println("Welcome to NSCC AirLines.");
                        System.out.println("-------------------------\n");

                        // Starts program
                        start();
                }
        }

        public static void start() {

                // Scanner needed to read users input
                Scanner sc = new Scanner(System.in);

                // Variables for user input
                String requestedSection;
                String requestedSeat;

                // Counters for seating array
                int countSection = 0;
                int countSeat = 0;

                // Prompts the user to select their choice of section
                System.out.print("Please type 1 for First Class or 2 for Economy: ");

                // Section preference
                requestedSection = sc.nextLine();

                switch (requestedSection) {
                case "1":
                        // User selects first class
                        System.out.println(">>> You have selected First Class. \n");
                        break;

                case "2":
                        // User selects economy
                        System.out.println(">>> You have selected Economy. \n");
                        break;

                default:
                        // User has not selected a valid class
                        System.out
                                        .println(">>> You have not selected a valid class. Please try again. \n");
                        start();
                        break;
                }

                // Prompts the user to select their choice of seat
                System.out.print("Please type 1 for window and 2 for aisle: ");

                // Seat preference
                requestedSeat = sc.nextLine();

                switch (requestedSeat) {
                case "1":
                        // User selects first class
                        System.out.println(">>> You have selected a window seat. \n");
                        break;

                case "2":
                        // User selects economy
                        System.out.println(">>> You have selected an aisle seat. \n");
                        break;

                default:
                        // User has not selected a valid class
                        System.out.println(">>> You have not selected a valid seat. Please try again. \n");
                        start();
                        break;
                }

                // Closes Scanner
                sc.close();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:43:45.107

[readLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)方法的 API 文档说明如下

```
Throws:
    NoSuchElementException - if no line was found 
```

您应该处理此异常或仅使用[hasNextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextLine%28%29)方法来避免异常。

```
while(sc.hasNextLine()){
    requestedSeat = sc.nextLine();
} 
```

# android - 按下后退按钮后如何重新创建前 ListFragment 的列表视图

> ID：14741597
> 
> 赞同：0
> 
> 时间：2013-02-07T00:35:44.970
> 
> 标签：android, android-listview, android-fragments, android-listfragment, fragmenttransaction

我有一个 ListFragment，其中包含一个列表视图，其中包含一个导航结构。通过选择列表中的一项，应显示下一个导航层次结构阶段。等等。

下一个层次阶段由一个新片段创建（删除旧片段并使用 addToBackStack 通过片段事务添加新的相同片段），其中新列表视图的 arrayadapter 更新为下一个导航层次结构的项目。那工作还不错。

我希望用户能够通过后退按钮导航回来。从这里开始我的问题。我不知道如何保存列表视图，以便在使用后退按钮后重新创建它。

我认为使用 onSaveInstanceState 是个好主意。但是当事务被提交时不会调用 onSaveInstanceState 。我通过在方法中放置一个 Log.d("..","...) 来检查它。它没有被调用。（我发现，当从纵向旋转到横向时调用 onSaveInstanceState视图，反之亦然。但这对我的问题没有帮助）。

那么在使用后退按钮并创建前一个片段后，存储列表视图的元素并将其取回以重新创建列表视图的最佳想法是什么？所有项目都是存储在绑定到 ListAdapter 的 ArrayList 中的字符串。

* * *

这是我的代码。我实现了一个界面，通过单击列表视图中的项目调用父活动中的方法。在这个方法中，我首先调用一个方法来填充已经存在的 ArrayList (navigationsItems) 与作为下一个导航阶段内容的新项目：

我的 ArrayAdapter 的代码：

```
arrayAdapterFuerNaviList = new ArrayAdapter<String>(
        BRC_BoardOverviewActivity.this,
        android.R.layout.simple_list_item_1, 
                    navigationsItems); 
```

在这个方法中，我首先调用一个方法来用下一个导航阶段的项目填充 ArrayList (navigationsItems)：

```
// load new itemlist to navigation-
public void inhaltAktuelleNaviListeInArrayLaden() {

    navigationsItems.clear();
    for (int i = 0; i < prefs.getInt("aktuelleNaviListe_size", 0); i++) {
        (...)
        navigationsItems.add(titel);
    }
} 
```

然后我调用该方法，用它加载新的 ListFragment 并将新的 ArrayAdapter 绑定到它：

```
// push navifragment to BackStack and create a new instance of it
public void naviFragmenteNeuLaden() {

            // get a reference to the actual ListFragment
    Fragment removefragment = frgm.findFragmentById(R.id.navi_container);

    // initialize ne ListFragment
    BRC_NavigationsFragment navifragment = (BRC_NavigationsFragment) frgm
            .findFragmentById(R.id.navi_container);

    // remove the old and bind the new ListFragment from/to the container ...
    FragmentTransaction frgmta = frgm.beginTransaction();
    frgmta.remove(removefragment);
    frgmta.add(R.id.navi_container, navifragment);

    // ... push the old ListFragment on the BackStack and commit ...
    frgmta.addToBackStack(null);
    frgmta.commit();
    frgm.executePendingTransactions();

    // ... bind the updated ArrayAdapter to the new ListFragment ...
    try {
        navifragment.setListAdapter(arrayAdapterFuerNaviList);
    } catch (Exception e) {
        // TODO 
        e.printStackTrace();
    }

    // ... and notify 
    try {
        arrayAdapterFuerNaviList.notifyDataSetChanged();
    } catch (Exception e) {
        // TODO 
        e.printStackTrace();
    }
} 
```

如前所述，向前导航没有问题。但是当我在第二个导航阶段按下后退按钮时，前一个 ListFragment 被加载（用 ListFragment 的 onCreatView() 中的 Log.d("..."."...)-Messages 验证），但是未创建其中的前列表视图。

* * *

我目前正在研究一种新方法。当您单击列表中的某个项目时，我会将当前列表连同对当前 ListFragment 的引用一起写入基于向量的堆栈中。然后我用“onBackPressed()”方法按下后退按钮。所以现在当按下按钮时，我调用已经提到的方法（见上文），将堆栈中的项目数据写回到列表中，通过存储的引用调用表单 ListFragmt 并将更新的 ArrayAdapter 绑定到它。这实际上正在进行中。完成后我会写下这种方法的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:12:04.600

我解决了这个问题。

对于 ListView 的不同导航内容，我定义了一个类“Naviliste”，其中存储了所有项目。如果有人点击一个项目，那么将生成一个带有相应新列表的新列表视图。这些列表是索引的，所以每个列表都有一个固定的 ID。

通过单击 ListView 中的项目，当前 Naviliste 的 ID 被压入堆栈。之后，将创建一个新片段并绑定到它的新列表。如果用户更进一步，则重复相同的过程，依此类推......

如果用户按下后退按钮后退一步，则完成以下操作：

后退按钮的按下是通过放置在父活动中的 onPressedBack() 方法捕获的。通过此方法调用自己的方法。这会拉出最后一个压入堆栈的 ID，然后在新创建的片段中使用它构建前一个列表。

同时，我将沿着一个计数器运行，该计数器计算我所处的导航深度。在前进的每个导航步骤中，它都会增加 1。相反，它只会减少 1。使用此计数器，我可以查询用户是否在导航根目录（计数器 = 0）并再次按下后退按钮离开当前活动。如果是这样，我调用finish() 并且父活动及其片段被关闭。瞧！

它工作得很好。花了一点时间来克服它。但现在我很高兴我的解决方案有效。:)

# java - 未处理的内部错误。在 pig 中使用 EXPLAIN 时的 Java 堆空间

> ID：14741599
> 
> 赞同：3
> 
> 时间：2013-02-07T00:36:11.020
> 
> 标签：java, heap-memory, apache-pig

当我尝试使用以下语句时

```
explain -brief A; 
```

我收到以下错误

```
2013-02-06 19:18:34,250 [Low Memory Detector] INFO     org.apache.pig.impl.util.SpillableMemoryManager - first memory handler call - Collection threshold init = 526123008(513792K) used = 349984528(341781K) committed = 699072512(682688K) max = 699072512(682688K)
2013-02-06 19:18:34,942 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2998: Unhandled internal error. Java heap space 
```

我试图通过添加选项来增加堆空间大小

```
-Dmapred.child.java.opts=-Xmx4096m 
```

但它没有用。任何想法？

谢谢。担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-30T22:04:50.700

1.  使用增加 PIG 堆空间

    `export PIG_HEAPSIZE=4096`

尽管如此，**如果您在虚拟机中运行 PIG，请确保已为虚拟机分配了超过 4GB（或您想要设置的任何数量）的内存**。假设您已将`X`Gb 分配给 VM，那么将堆大小增加到超过`X`Gb 将无济于事。

2.  此外，**您使用的 PIG 版本可能存在问题**。

尝试使用较旧的猪版本。我遇到了与 PIG-0.14.0 相同的可重现问题，但[PIG-0.12.1没有](https://archive.apache.org/dist/pig/pig-0.12.1/)

# android - Android - 唤醒和解锁设备

> ID：14741612
> 
> 赞同：45
> 
> 时间：2013-02-07T00:37:48.133
> 
> 标签：android, android-wake-lock, keyguard

**应用程序描述：** 该应用程序旨在作为特定客户的安全程序（不公开部署）。当应用程序在一段时间内未检测到移动时，如果应用程序处于后台或设备处于睡眠状态，则应用程序应发出警报并将其自身带到前台。

**问题：** 如果设备处于睡眠状态并被锁定，我们需要唤醒并解锁设备。使用在 SO 和其他地方发现的各种技术，我们已经能够（部分）唤醒和解锁设备，但是只有在设备物理插入计算机时才能正常运行。如果设备自己拔掉插头，我们测试唤醒解锁，什么都不会发生；设备似乎保持睡眠状态，应用程序似乎什么都不做（没有警报）。

我使用过[这篇关于使用 PowerManager 和 KeyguardManager](https://stackoverflow.com/a/10179932/877472)的文章，以及[这篇文章使用窗口标志。](https://stackoverflow.com/a/9193501/877472)

以下是目前用于唤醒设备的代码：

```
public void wakeDevice() {
    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = powerManager.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "TAG");
    wakeLock.acquire();

    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
    KeyguardLock keyguardLock = keyguardManager.newKeyguardLock("TAG");
    keyguardLock.disableKeyguard();
    runOnUiThread(new Runnable(){
        public void run(){
            getWindow().addFlags(
                      WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
                    | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
                    | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                    | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);                
        }
    });
} 
```

从我看到/使用的其他一些 SO 问题的评论和帖子来看，似乎 PowerManager / KeyguardManager 代码应该可以解决问题。同样，正如我之前所说，当设备通过 USB 插入开发机器时，它在技术上确实有效，但在设备分离时绝对没有任何作用。

另请注意，这是我们的第一个 Android 应用程序，因此完全意识到我们可能完全偏离了我们正在尝试做的事情。欢迎任何建议。

所以简而言之，鉴于上面的代码，为什么设备的行为会根据它是否插入而如此不同，我们应该改变什么来唤醒和解锁设备？预先感谢您的协助！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-07T17:24:03.347

我解决了这个问题。当设备通过 USB 插入时，我们观察到不同行为的原因是设备的 CPU 不会进入睡眠状态。我认为这要么是调试模式设置的结果，要么只是它在插入计算机时的行为方式，因为 CPU 睡眠的省电功能无关紧要。显然，当设备没有插入时，CPU 会愉快地小睡一会儿，虽然我们确实观察到应用程序随机运行（它会随机唤醒自己），但时间会不一致。我进一步假设这是因为很少分配发生的 CPU 周期，并且我们的应用程序将在“随机”时间获得很少的周期。

所以我们的解决方案是在设备进入后台时获取部分唤醒锁（在`onPause`方法中完成），并在方法中释放锁`onResume`。这似乎可以防止 CPU 休眠。我们会在需要时继续使用完全唤醒锁定和键盘保护禁用功能来唤醒设备。使用部分唤醒锁似乎可以防止 CPU 进入睡眠状态，并且设备确实可以按预期正确唤醒。这是我们更新的代码，以防有人遇到此问题：

```
// Called from onCreate
protected void createWakeLocks(){
    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    fullWakeLock = powerManager.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "Loneworker - FULL WAKE LOCK");
    partialWakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Loneworker - PARTIAL WAKE LOCK");
}

// Called implicitly when device is about to sleep or application is backgrounded
protected void onPause(){
    super.onPause();
    partialWakeLock.acquire();
}

// Called implicitly when device is about to wake up or foregrounded
protected void onResume(){
    super.onResume();
    if(fullWakeLock.isHeld()){
        fullWakeLock.release();
    }
    if(partialWakeLock.isHeld()){
        partialWakeLock.release();
    }
}

// Called whenever we need to wake up the device
public void wakeDevice() {
    fullWakeLock.acquire();

    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
    KeyguardLock keyguardLock = keyguardManager.newKeyguardLock("TAG");
    keyguardLock.disableKeyguard();
} 
```

# bash - 加载共享库

> ID：14741614
> 
> 赞同：0
> 
> 时间：2013-02-07T00:38:26.323
> 
> 标签：bash, shell, unix, libraries, shared

运行需要共享库的脚本时，我在加载共享库时遇到问题：

`error while loading shared libraries: libirc.so: cannot open shared object file: No such file or directory`

但是，我认为我的设置还可以：

```
set LD_LIBRARY_PATH = /lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64
export LD_LIBRARY_PATH 
```

并`ls /lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64`表明它`libirc.so`确实存在。

`echo $LD_LIBRARY_PATH`正确返回：

```
/lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64 
```

它仍然不起作用，所以我有点绝望...... :)

有人可以帮我吗？

一些有用的信息：

```
echo ${SHELL}
/bin/bash 
```

此外，我运行的脚本在开头包含以下内容：

```
#!/bin/csh
#PBS -z
#PBS -S /bin/csh

set PATH = /usr/local/x86_64/gnu/openmpi-1.4.5/bin
export PATH 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:49:15.197

听起来您是在集群上运行它，在这种情况下，问题与您的外壳无关。尝试：

```
#PBS -v LD_LIBRARY_PATH="/lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64" 
```

可能还值得注意的是

```
set LD_LIBRARY_PATH = /lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64 
```

是 csh 语法，而你说你正在运行 bash。bash 等价物是

```
LD_LIBRARY_PATH=/lfs/data0/g_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64 
```

它对间距敏感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:04:39.073

谢谢 nneonneo，这是它给出的内容：（我只是粘贴消息的开头，因为它很长，如果需要完整输出，请告诉我）：

```
LD_DEBUG=all ./mpp_starter
 26489: 
 26489: file=librt.so.1 [0];  needed by ./mpp_starter [0]
 26489: find library=librt.so.1 [0]; searching
 26489:  search path=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/tls/x86_64:/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/tls:/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/x86_64:/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64      (LD_LIBRARY_PATH)
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/tls/x86_64/librt.so.1
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/tls/librt.so.1
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/x86_64/librt.so.1
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/librt.so.1
 26489:  search cache=/etc/ld.so.cache
 26489:   trying file=/lib64/librt.so.1
 26489: 
 26489: file=librt.so.1 [0];  generating link map
 26489:   dynamic: 0x0000003a74a06dc8  base: 0x0000000000000000   size: 0x0000000000207bb0
 26489:     entry: 0x0000003a74802140  phdr: 0x0000003a74800040  phnum:                  9
 26489: 
 26489: 
 26489: file=libnuma.so.1 [0];  needed by ./mpp_starter [0]
 26489: find library=libnuma.so.1 [0]; searching
 26489:  search path=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64       (LD_LIBRARY_PATH)
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/libnuma.so.1
 26489:  search cache=/etc/ld.so.cache
 26489:   trying file=/usr/lib64/libnuma.so.1
 26489: 
 26489: file=libnuma.so.1 [0];  generating link map
 26489:   dynamic: 0x0000003a77207450  base: 0x0000000000000000   size: 0x0000000000207d60
 26489:     entry: 0x0000003a770026d0  phdr: 0x0000003a77000040  phnum:                  7
 26489: 
 26489: 
 26489: file=libdl.so.2 [0];  needed by ./mpp_starter [0]
 26489: find library=libdl.so.2 [0]; searching
 26489:  search path=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64       (LD_LIBRARY_PATH)
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/libdl.so.2
 26489:  search cache=/etc/ld.so.cache
 26489:   trying file=/lib64/libdl.so.2
 26489: 
 26489: file=libdl.so.2 [0];  generating link map
 26489:   dynamic: 0x0000003a73a02da0  base: 0x0000000000000000   size: 0x0000000000203100
 26489:     entry: 0x0000003a73800de0  phdr: 0x0000003a73800040  phnum:                  9
 26489: 
 26489: 
 26489: file=libirc.so [0];  needed by ./mpp_starter [0]
 26489: find library=libirc.so [0]; searching
 26489:  search path=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64       (LD_LIBRARY_PATH)
 26489:   trying file=/lfs/data0/gstar_local/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/libirc.so
 26489: 
 26489: file=libirc.so [0];  generating link map
 26489:   dynamic: 0x00007f6635da51b0  base: 0x00007f6635c66000   size: 0x0000000000142bc0
 26489:     entry: 0x00007f6635c6d040  phdr: 0x00007f6635c66040  phnum:                  5
 26489: 
 26489: 
```

# tomcat - 在不重新启动 tomcat 的情况下替换 .war 会导致任何问题吗？

> ID：14741621
> 
> 赞同：0
> 
> 时间：2013-02-07T00:38:59.300
> 
> 标签：tomcat, war

我有一个 tomcat 实例，当我添加一个新的 .war 文件时，它会自动分解文件夹并部署它。现在如果我想替换这个 webapp，我是否只需删除 webapp 文件夹和 .war 文件？还是我也需要重新启动tomcat？

我还没有出现任何特殊症状，但想知道社区的经历以及需要注意什么。（tomcat 是否会删除旧 webapp 的所有痕迹，包括静态变量，是否关闭数据库连接等？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T07:18:26.423

我的理解是，假设您`antiJARLocking="true"`在应用程序的 context.xml 文件中有，您只需要覆盖战争，其余的由 Tomcat 完成。您不必重新启动 Tomcat。这称为 webapp 热部署。

另请参阅[Context 的标准实现](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation)。

# php - 使用 imagettftext 为文本添加下划线

> ID：14741622
> 
> 赞同：3
> 
> 时间：2013-02-07T00:39:01.623
> 
> 标签：php, freetype, imagettftext

**我的问题是，如何在图像中的所有文字下划线？

代码：**

```
function createImage($text)
{
    $text .= "\n";
    $text = wordwrap($text, 40, "\n");
    $newlines = substr_count($text, "\n");
    if($newlines == 0)
    {
        $height = 30;
    }
    else
    {
        $height = 30*$newlines-$newlines*7;
    }
    putenv('GDFONTPATH=' . realpath('.'));
    header('Content-Type: image/png');

    $im = imagecreatetruecolor(315, $height);
    $white = imagecolorallocate($im, 255, 255, 255);
    $grey = imagecolorallocate($im, 128, 128, 128);
    $black = imagecolorallocate($im, 0, 0, 0);
    $purple = imagecolorallocate($im, 97, 26, 139);
    imagefilledrectangle($im, 0, 0, 399, $height, $white);
    $font = 'arialbd.ttf';

    imagettftext($im, 11, 0, 10, 20, $purple, $font, $text);
    imagepng($im);
    imagedestroy($im);
}

createImage("Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow Stackoverflow "); 
```

**结果** [http://i.imgur.com/Jdr7HPy.png](http://i.imgur.com/Jdr7HPy.png)

我希望所有文本都加下划线，我找到了一些解决方案，但它们只是从左到右，而不取决于单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:44:03.690

使用 Unicode 下划线组合字符 U+0332。

您将需要一个循环或巧妙的数组合并来修改文本，

```
$e = explode(' ', $text);

for($i=0;$i<count($e);$i++) {
  $e[$i] = implode('&#x0332;', str_split($e[$i]));
}

$text = implode(' ', $e); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:50:19.607

您可以通过使用 找出以像素为单位的文本尺寸[`imagettfbbox()`](http://www.php.net/manual/en/function.imageftbbox.php)，然后将其用作在文本下方绘制线条的参考。我玩过它，这是我的尝试：

```
function createImage($text){

  putenv('GDFONTPATH=' . realpath('.'));

  $text = wordwrap($text, 40, "\n");  
  $padding = 10;                         // padding around text
  $uOffs = 2;                            // distance between the line and the text above it
  $uHeight = 1;                          // height of the under-line
  $lines = explode("\n", $text);         // split text in lines
  $lineLengths = array();                // will store length of each line
  $textSize = 11;
  $font = 'arialbd.ttf';

  // bounding box of all text
  $textBoundingBox = array_map('abs', imagettfbbox($textSize, 0, $font, $text));

  list($blx, $bly, $brx, $bry, $trx, $try, $tlx, $tly) = $textBoundingBox;

  // calculate image dimensions based on the bounding box data
  $x = max($brx, $trx) + ($padding * 4);
  $y = max($blx, $bly) + ($padding * 4);

  $img = imagecreatetruecolor($x, $y);

  // determine length of each line of text
  foreach($lines as $i => $line){
    $box = imagettfbbox($textSize, 0, $font, $line);
    $lineLengths[$i] = max($box[2], $box[4]);
  }

  $white = imagecolorallocate($img, 255, 255, 255);
  $grey = imagecolorallocate($img, 128, 128, 128);
  $black = imagecolorallocate($img, 0, 0, 0);
  $purple = imagecolorallocate($img, 97, 26, 139);
  imagefilledrectangle($img, 0, 0, $x - 1, $y - 1, $white);  

  imagettftext($img, $textSize, 0, $padding + min($tlx, $blx), $padding + min($tly, $bly), $purple, $font, $text);

  // starting Y position of the under-line
  $uY = $padding +  min($tly, $bly);

  // underline text...
  foreach($lineLengths as $length){
    imagefilledrectangle($img, $padding + min($tlx, $blx), $uY + $uOffs, $padding + $length, $uY + $uOffs + $uHeight, $purple);
    $uY += 19;
  }  

  header('Content-Type: image/png');
  imagepng($img);
  imagedestroy($img);
} 
```

结果：

![在此处输入图像描述](../Images/eb388a2761e18b7b66d3d8bd71e5e6fb.png)

这比使用 Unicode 字符更灵活一些，因为您可以控制行高以及相对于其上方文本的位置。

# c# - 从控制器 RedirectToAction() 下载文件

> ID：14741625
> 
> 赞同：3
> 
> 时间：2013-02-07T00:39:10.443
> 
> 标签：c#, asp.net-mvc

我有一个旧的 MVC 1.0 应用程序，我正在努力解决一些相对简单的问题。

1.  我有一个允许用户上传文件的视图。
2.  一些服务器端处理继续进行。
3.  最后，会生成一个新文件并自动下载到客户端的机器上。

我有第 1 步和第 2 步工作。我无法完成工作的最后一步。这是我的控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ViewResult SomeImporter(HttpPostedFileBase attachment, FormCollection formCollection, string submitButton, string fileName
{
    if (submitButton.Equals("Import"))
    {
        byte[] fileBytes = ImportData(fileName, new CompanyExcelColumnData());
        if (fileBytes != null)
        {
            RedirectToAction("DownloadFile", "ControllerName", new { fileBytes = fileBytes});
        }
        return View();
    }
    throw new ArgumentException("Value not valid", "submitButton");
}

public FileContentResult DownloadFile(byte[] fileBytes)
{
    return File(
                fileBytes,
                "application/ms-excel",
                string.Format("Filexyz {0}", DateTime.Now.ToString("yyyyMMdd HHmm")));
} 
```

代码执行：

```
RedirectToAction("DownloadFile", "ControllerName", new { fileBytes = fileBytes}); 
```

但文件不下载。欢迎提出建议并提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:02:16.140

尝试返回[`ActionResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult%28v=vs.108%29.aspx)，因为它是动作输出的最抽象类。ViewResult 将强制您返回 View 或 PartialView，因此，返回 File 将获得有关隐式转换类型的异常。

```
[HttpPost]
public ActionResult SomeImporter(HttpPostedFileBase attachment, FormCollection formCollection, string submitButton, string fileName
{
    if (submitButton.Equals("Import"))
    {
        byte[] fileBytes = ImportData(fileName, new CompanyExcelColumnData());
        if (fileBytes != null)
        {
            return File(
                fileBytes,
                "application/ms-excel",
                string.Format("Filexyz {0}", DateTime.Now.ToString("yyyyMMdd HHmm")));
        }
        return View();
    }
    throw new ArgumentException("Value not valid", "submitButton");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:05:53.597

为什么要做 RedirectToAction？您可以从 SomeImporter 操作返回 File，只需将 SomeImporter 的返回类型更改为 FileContentResult。

# ios - 传递对 ContainerView 中对象的引用

> ID：14741626
> 
> 赞同：0
> 
> 时间：2013-02-07T00:39:10.343
> 
> 标签：ios, objective-c, uinavigationcontroller

![在此处输入图像描述](../Images/f6e62248c208a6a68671c648d7f430b1.png)

要在我的主视图控制器中传递对 managedObjectContext 的引用，我的 App 委托中有以下代码，并且工作正常：

```
//Grab the Navigation Controller in front of the Main View Controller
UINavigationController *nav = (UINavigationController *)self.window.rootViewController;

//Grab Main View Controller out of the navigation controller at Position 0
SceneTwo *sceneTwo = (SceneTwo *) [[nav viewContollers]objectAtIndex:0];

//Pass the reference to managedObjectContext.  
sceneTwo.managedObjectContext = self.managedObjectContext; 
```

问题：我想在主视图控制器（场景 1）内的 ContainerView 中传递对 managedObjectContext 的引用，该控制器前面有一个导航控制器。请看上图。

获取containerView的导航控制器的代码应该是什么？从导航控制器中获取场景 1 的代码应该是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:40:49.723

因为您的主视图控制器使用容器视图，所以您可以在主视图控制器中遍历`childViewControllers`数组中的视图。查看图表，看起来第一个应该是您所追求的导航控制器。下面可以进去`MainViewController`。

```
UINavigationController *scene1Nav = (UINavigationController *)[[self childViewControllers] objectAtIndex:0]; 
```

当你找到正确的，你就可以设置`managedObjectContext`它。

另一种选择（可能比遍历所有子视图和导航控制器更痛苦）可能是`managedObjectContext`在场景本身中设置您的场景，并引用应用程序委托 - 例如，在`viewDidLoad`需要上下文的控制器中. 为此，`managedObjectContext`需要成为您的 App Delegate 的属性或 getter 方法。

```
self.managedObjectContext = [(YourAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

# android - 安卓动画可点击

> ID：14741627
> 
> 赞同：0
> 
> 时间：2013-02-07T00:39:13.717
> 
> 标签：android, animation, onclick

我已经为图像创建了简单的动画，如果用户单击图像，则在执行动画时我想要此图像 toast 开始问题是图像不可点击，但如果按下图像的原始位置，吐司就会开始（onClick它不会随着动画移动）

谢谢你的帮助

这是 anim 文件夹中的动画代码 (translate.xml)

```
<?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android"
      android:interpolator="@android:anim/linear_interpolator" >
    <translate
        android:duration="1500"
        android:fromXDelta="-100%p"
        android:repeatCount="0"
        android:repeatMode="reverse"
        android:toXDelta="0" />

    </set> 
```

这是活动类

```
package com.example.animatest;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends Activity {

private ImageView image01;

private long aefe;
private ImageView image1;
private ImageView image2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    image01 = (ImageView) findViewById(R.id.imageView1);

    final Animation animTranslate1 = AnimationUtils.loadAnimation(this,
            R.anim.translate);

    image01.startAnimation(animTranslate1);

    image01.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            Toast.makeText(MainActivity.this, "hello", Toast.LENGTH_SHORT)
                    .show();

        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:41:08.070

将动画侦听器添加到您的 animTranslate1 对象。

在动画监听器的 onAnimationFinished() 方法中设置 onClickListener。

```
animTranslate1.setAnimationListener(new AnimationListener(){
  @Override
  onAnimationEnd(Animation animation){
    image01.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            Toast.makeText(MainActivity.this, "hello", Toast.LENGTH_SHORT)
                    .show();

        }
    });
  }
}); 
```

# wix - WiX 扩展引导程序应用程序：如何确定选择了哪个单选按钮？

> ID：14741629
> 
> 赞同：0
> 
> 时间：2013-02-07T00:39:40.877
> 
> 标签：wix, bootstrapper

这是我的设置：

*   在 .NET 4.0 上编译（这不能改变）
*   使用 WiX 3.7
*   使用[WiX 扩展引导程序应用程序扩展](http://wixextba.codeplex.com/)

所以我正在创建一个引导程序安装项目，虽然我已经让它工作了，但我觉得有一种更干净、更简单的方法来做到这一点。

基本上，我需要让用户在安装产品时选择他们希望使用的环境。为此，我使用[WiX Extended Bootstrapper Application 扩展](http://wixextba.codeplex.com/)来允许我在第一个安装屏幕上放置一些单选按钮。

进行所有设置都很好，但后来我意识到我不知道如何**轻松**确定选择了哪个单选按钮。因此，当我解决问题时，我只是在捆绑包中列出了 MSI 三次，并在每一次上都设置了安装条件。

**有没有办法确定仅使用一个属性选择了哪个单选按钮？**（例如，当我将`InstallFolder`属性传递给我的 MSI 时，如下面的代码所示。）**如果目前没有办法做到这一点，有没有办法让我在不将我的 MSI 三次添加到捆？**

这是我的代码（注意我如何列出基本上相同的`MsiPackage`三次）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <?include Properties.wxi ?>

  <Bundle Name="!(loc.Product.Name)" Version="$(var.Version)" Manufacturer="!(loc.Product.Manufacturer)" UpgradeCode="$(var.UpgradeCode)" Condition="VersionNT >= v5.1">
    <BootstrapperApplicationRef Id="WixExtendedBootstrapperApplication.Hyperlink2License">
      <bal:WixExtendedBootstrapperApplication SuppressRepair="yes" LicenseUrl="" ThemeFile="$(var.Bundle.ExtTheme.RadioBtns.Path)" LocalizationFile="$(var.Bundle.ExtTheme.RadioBtns.l10n.Path)" />
    </BootstrapperApplicationRef>

    <WixVariable Id="WixMbaPrereqPackageId" Value="Netfx4Full" />

    <Variable Name="InstallFolder" Type="string" Value="$(var.InstallFolder.Value)" />

    <Variable Name="RadioButton1" Type="numeric" Value="0" />
    <Variable Name="RadioButton2" Type="numeric" Value="0" />
    <Variable Name="RadioButton3" Type="numeric" Value="1" />

    <Chain>
      <!-- Other Package References Here -->

      <MsiPackage Id="DBConnections_Dev"
                  SourceFile="$(var.MSI.Path)"
                  Visible="no"
                  Vital="yes"
                  InstallCondition="RadioButton1 = 1">
        <MsiProperty Name="INSTALLFOLDER" Value="[InstallFolder]" />
        <MsiProperty Name="SELECTED_ENV" Value="1" />
      </MsiPackage>
      <MsiPackage Id="DBConnections_Stage"
                  SourceFile="$(var.MSI.Path)"
                  Visible="no"
                  Vital="yes"
                  InstallCondition="RadioButton2 = 1">
        <MsiProperty Name="INSTALLFOLDER" Value="[InstallFolder]" />
        <MsiProperty Name="SELECTED_ENV" Value="2" />
      </MsiPackage>
      <MsiPackage Id="DBConnections_Prod"
                  SourceFile="$(var.MSI.Path)"
                  Visible="no"
                  Vital="yes"
                  InstallCondition="RadioButton3 = 1">
        <MsiProperty Name="INSTALLFOLDER" Value="[InstallFolder]" />
        <MsiProperty Name="SELECTED_ENV" Value="3" />
      </MsiPackage>
    </Chain>
  </Bundle>
</Wix> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:38:44.640

我还在项目的 CodePlex 网站上问了这个问题，开发人员的回答如下（这里是完整讨论的链接：[http](http://wixextba.codeplex.com/discussions/432341) ://wixextba.codeplex.com/discussions/432341 ）：

`This can now be done using the custom actions feature.`

我测试了他的反应，发现它是正确的！此功能从[3.7.4791.32058](http://wixextba.codeplex.com/releases/view/101745)版本开始可用。[源代码](http://wixextba.codeplex.com/SourceControl/changeset/view/22436#376973)中还包含一个示例，演示了这是如何完成的。我在下面发布了相关代码：

自定义操作 c++ 代码中需要：

```
STDMETHODIMP OnPlanCustomAction()
{
  ...
  if (SUCCEEDED(BalGetNumericVariable(L"RadioButton1", &llValue)) && llValue)
  {
    m_pEngine->SetVariableNumeric(L"RadioButton", 1);
    BalExitOnFailure(hr, "Failed to set variable.");
  }
  else if (SUCCEEDED(BalGetNumericVariable(L"RadioButton2", &llValue)) && llValue)
  {
    m_pEngine->SetVariableNumeric(L"RadioButton", 2);
    BalExitOnFailure(hr, "Failed to set variable.");
  }
  else if (SUCCEEDED(BalGetNumericVariable(L"RadioButton3", &llValue)) && llValue)
  {
    m_pEngine->SetVariableNumeric(L"RadioButton", 3);
    BalExitOnFailure(hr, "Failed to set variable.");
  }
  else if (SUCCEEDED(BalGetNumericVariable(L"RadioButton4", &llValue)) && llValue)
  {
    m_pEngine->SetVariableNumeric(L"RadioButton", 4);
    BalExitOnFailure(hr, "Failed to set variable.");
  }
  else
  {
    m_pEngine->SetVariableNumeric(L"RadioButton", 0);
    BalExitOnFailure(hr, "Failed to set variable.");
  }
  ... 
```

WiX XML 中需要（来自[下载的 DLL 附带的示例](http://wixextba.codeplex.com/SourceControl/changeset/view/22436#389705)）：

```
<Variable Name="RadioButton1" Type="numeric" Value="0" />
<Variable Name="RadioButton2" Type="numeric" Value="1" />
<Variable Name="RadioButton3" Type="numeric" Value="0" />
<Variable Name="RadioButton4" Type="numeric" Value="0" />

<Chain DisableSystemRestore="yes">
  <PackageGroupRef Id="NetFx40Redist" />
  <MsiPackage
    Id="Setup"
    Compressed="yes"
    SourceFile="Setup.msi"
    Vital="yes">
    <MsiProperty Name="APPLICATIONFOLDER" Value="[InstallFolder]" />
    <MsiProperty Name="RadioButton" Value="[RadioButton]" />
  </MsiPackage>
</Chain> 
```

查看文本中的链接以获取从中获取这些代码示例的原始示例。希望这对将来的其他人有所帮助。

# r - ggplot2中的连接方式

> ID：14741630
> 
> 赞同：0
> 
> 时间：2013-02-07T00:39:47.300
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 构建某种剖面图。因此，我想要一条连接情节中手段的线。如您所见，`geom_line`在这里不起作用，因为它仅连接每个因子级别内的点，而不是因子级别之间的均值。

这是一个小例子：

```
df <- data.frame(variable=rep(1:3,each=10),value=rnorm(30))
p <- ggplot(df,aes(factor(variable),value))
p + stat_summary(fun.y=mean, geom="point")+coord_flip()+geom_line() 
```

有谁知道如何实现这一目标？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:50:57.997

在绘图之前总结数据通常更容易。就像是

下一个技巧是`group`在调用中使用`geom_line`以覆盖默认分组`factor(variable)`

```
summarydf <- ddply(df,.(variable),summarize, value = mean(value))
p <- ggplot(summarydf,aes(factor(variable),value))  + 
  geom_point() + geom_line(aes(group=1)) + coord_flip()
p 
```

![在此处输入图像描述](../Images/55fba219c13ac2f359580e5ebe98d63a.png)

# jquery - 使用 PhoneGap 在 JQuery Mobile 的外部浏览器中无法打开链接

> ID：14741634
> 
> 赞同：12
> 
> 时间：2013-02-07T00:40:44.897
> 
> 标签：jquery, ios, cordova, jquery-mobile

我在使用 JQuery Mobile 1.2.0 的 PhoneGap 2.3.0 中遇到问题。

iOS 中的任何外部链接都会在应用程序内部打开，而不是在应用程序内部打开它们打开的 Safari，这使得用户无法在不重新启动应用程序的情况下返回应用程序。

我已经尝试过**rel="external"**和**target="_blank"**来表明它是一个外部链接，但都没有成功。

我已经看到带有 JQMobile 的 PhoneGap 应该采取的默认方式是我想要的方式。我发现很多对这种行为的要求，但不是这样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T02:16:38.163

我添加`rel="external"`到我的锚链接。

然后在类中添加/覆盖该`shouldStartLoadWithRequest`方法`MainViewController`：

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]){
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    else {
        return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    }
} 
```

这适用于 jQuery Mobile 1.2 和 Phonegap 2.2.0。它应该在 Phonegap 2.3.0 中同样工作——但我还没有测试过。

==================================================== =================================

**更新**：

在 Phonegap 2.7.0 或更高版本中可能不需要这样做。Phonegap 现在可以在 UIWebView、Safari 或 InAppBrowser 组件中打开链接。我个人喜欢 InAppBrowser 组件，因为它对于很多用例来说似乎是更好的用户体验。如果您想在 Safari 中打开链接，您现在可以使用 Javascript 执行此操作：

```
window.open('http://whitelisted-url.com', '_system'); 
```

或者对于 InAppBrowser：

```
window.open('http://whitelisted-url.com', '_blank'); 
```

在这里查看更多信息：

[http://wiki.apache.org/cordova/InAppBrowser](http://wiki.apache.org/cordova/InAppBrowser) [http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T03:33:59.360

如果您不想按照建议覆盖类或深入挖掘代码，请尝试此操作。它对我来说就像一个魅力。我正在使用 Phonegap Build 和 jQuery Mobile。

*注意 - 我尝试了其他几种将属性直接添加到锚标记的方法，例如`<a href="http://externalsite.com target="_blank" data-rel="external" data-ajax="false">`也尝试过`target="_system`- 但没有一个奏效，所以我不得不使用 javascript（虽然只有 5 行）。

这不是太复杂，但我会引导你完成它......

1.  您需要防止锚标记的默认行为。所以以某种方式抓住你关心的标签。我向我想在外部打开的所有锚标记添加了一个名为“外部”的类。很标准的东西：

    ```
    $(document).on('click', ".external", function (e) {
        e.preventDefault();
    }; 
    ```

2.  然后`href`从您尝试在 Safari 中加载的锚点中获取值。同样，这里没有什么太花哨的添加：

    ```
    $(document).on('click', ".external", function (e) {
        e.preventDefault();

        var targetURL = $(this).attr("href");
    }; 
    ```

3.  这是需要一些挖掘的部分 - 我猜 Phonegap 用 2.3 改变了他们的方法？无论如何，在新窗口中打开抓取`href`（这里是`"_system"`进来的地方）：

    ```
    $(document).on('click', ".external", function (e) {
        e.preventDefault();
        var targetURL = $(this).attr("href");

        window.open(targetURL, "_system");
    }); 
    ```

就是这样。最后一点代码就是一切。至少这对我有用。

祝你好运！

（为了给予应得的荣誉，这对我帮助最大： http: [//www.midnightryder.com/launching-external-urls-in-phonegap-again-phonegap-2-4-x/](http://www.midnightryder.com/launching-external-urls-in-phonegap-again-phonegap-2-4-x/)）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-30T14:00:14.747

与@KyleSimmons 相同的解决方案，但只是内联且更短。但一个简单的修复。对我很有用。

```
<a href="http://www.google.com/" onclick="window.open(this.href,'_system'); return false;">Google</a> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T01:19:38.850

在 jQuery Mobile 中打开外部链接：

```
<a href="http://moorberry.net" data-rel="external">Like this</a> 
```

# python - 将字典的字典展平为python中的列表

> ID：14741635
> 
> 赞同：0
> 
> 时间：2013-02-07T00:40:55.620
> 
> 标签：python, mysql, list, dictionary

我有一本字典，需要将其展平成一个列表。我的目标是把它做成可以发送到 MySQL 数据库的形式。字典的形式是

```
{
 'Customer 1': 
   {'Vitamin A': 0, 'Calcium': 1, 'Protein': 1, 'B vitamins': 0, 'HPMR': 0},
 'Customer 2': 
   {'Vitamin A': 0, 'Calcium': 0, 'Protein': 1, 'B vitamins': 1, 'HPMR': 0}
 } 
```

我希望它最终像：

```
('Customer 1', 'Vitamin A', 0), ('Customer 1', 'Calcium', 1)
...
('Customer 2', 'Vitamin A', 0), ('Customer 2', 'Calcium', 0)` 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:46:27.803

```
customers = {'Customer 1': {'Vitamin A': 0, 
                            'Calcium': 1, 
                            'Protein': 1, 
                            'B vitamins': 0, 
                            'HPMR': 0}, 
             'Customer 2': {'Vitamin A': 0, 
                            'Calcium': 0, 
                            'Protein': 1, 
                            'B vitamins': 1, 
                            'HPMR': 0}}
all_orders = []
for customer, order in customers.items():
    customer_orders = [(customer, vitamin, quantity) for vitamin, quantity in order.items()]
    all_orders.append(customer_orders)

all_orders = [[('Customer 2', 'Calcium', 0),
               ('Customer 2', 'Vitamin A', 0),
               ('Customer 2', 'HPMR', 0),
               ('Customer 2', 'Protein', 1),
               ('Customer 2', 'B vitamins', 1)],
              [('Customer 1', 'Calcium', 1),
               ('Customer 1', 'Vitamin A', 0),
               ('Customer 1', 'HPMR', 0),
               ('Customer 1', 'Protein', 1),
               ('Customer 1', 'B vitamins', 0)]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:46:55.093

```
In [6]: dic={'Customer 1': {'Vitamin A': 0, 'Calcium': 1, 'Protein': 1, 'B vitamins': 0, 'HPMR': 0}, 'Customer 2': {'Vitamin A': 0, 'Calcium': 0, 'Protein': 1, 'B vitamins': 1, 'HPMR': 0}}

In [7]: [tuple([x]+list(y)) for x in dic for y in dic[x].items() ]

Out[7]: 
[('Customer 2', 'Calcium', 0),
 ('Customer 2', 'Vitamin A', 0),
 ('Customer 2', 'HPMR', 0),
 ('Customer 2', 'Protein', 1),
 ('Customer 2', 'B vitamins', 1),
 ('Customer 1', 'Calcium', 1),
 ('Customer 1', 'Vitamin A', 0),
 ('Customer 1', 'HPMR', 0),
 ('Customer 1', 'Protein', 1),
 ('Customer 1', 'B vitamins', 0)] 
```

或使用`itertools.chain()`：

```
In [8]: from itertools import chain

In [9]: [tuple(chain(*([x],y))) for x in dic for y in dic[x].items() ]
Out[9]: 
[('Customer 2', 'Calcium', 0),
 ('Customer 2', 'Vitamin A', 0),
 ('Customer 2', 'HPMR', 0),
 ('Customer 2', 'Protein', 1),
 ('Customer 2', 'B vitamins', 1),
 ('Customer 1', 'Calcium', 1),
 ('Customer 1', 'Vitamin A', 0),
 ('Customer 1', 'HPMR', 0),
 ('Customer 1', 'Protein', 1),
 ('Customer 1', 'B vitamins', 0)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:49:11.440

```
[(k, k2, v) for k in dct for k2, v in k.items()] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T00:50:56.173

```
dictio = {'Customer 1': {'Vitamin A': 0, 'Calcium': 1, 'Protein': 1, 'B vitamins': 0, 'HPMR': 0}, 'Customer 2': {'Vitamin A': 0, 'Calcium': 0, 'Protein': 1, 'B vitamins': 1, 'HPMR': 0}}
a = []
for key in dictio.keys():
    for key_ in dictio[key].keys():
        a.append((key,key_,dictio[key][key_]))

print a 
```

输出： `[('Customer 2', 'Calcium', 0), ('Customer 2', 'Vitamin A', 0), ('Customer 2', 'HPMR', 0), ('Customer 2', 'Protein', 1), ('Customer 2', 'B vitamins', 1), ('Customer 1', 'Calcium', 1), ('Customer 1', 'Vitamin A', 0), ('Customer 1', 'HPMR', 0), ('Customer 1', 'Protein', 1), ('Customer 1', 'B vitamins', 0)]`

此外，您插入的是列表的元组，而不是列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T00:53:04.833

我也想过像其他人一样的列表理解：

```
cust = {'Customer 1': {'Vitamin A': 0, 'Calcium': 1, 'Protein': 1, 'B vitamins': 0, 'HPMR': 0}, 'Customer 2': {'Vitamin A': 0, 'Calcium': 0, 'Protein': 1, 'B vitamins': 1, 'HPMR': 0}}
cust_flat = [ (k, k2, v2) for k2, v2 in v.iteritems() for k, v in cust.iteritems() ] 
```

结果如下：

```
[('Customer 2', 'Calcium', 1),
 ('Customer 1', 'Calcium', 1),
 ('Customer 2', 'Vitamin A', 0),
 ('Customer 1', 'Vitamin A', 0),
 ('Customer 2', 'HPMR', 0),
 ('Customer 1', 'HPMR', 0),
 ('Customer 2', 'Protein', 1),
 ('Customer 1', 'Protein', 1),
 ('Customer 2', 'B vitamins', 0),
 ('Customer 1', 'B vitamins', 0)] 
```

# php - 将选项组添加到查询

> ID：14741639
> 
> 赞同：0
> 
> 时间：2013-02-07T00:41:09.580
> 
> 标签：php, mysql

我正在尝试将选项组添加到此选择框。我正在获取记录集中的行数和选项数。我可以得到计数或设置组。我还没有做这两个！

```
<select name="DETAILS">
<?php
include("config.php");
$sql = "SELECT tblDetails.DetailType AS type, CONCAT(tblDetails.DetailName,' (', Count(tblLocDet.DetailID),')') AS DetailName
FROM tblLocations INNER JOIN (tblLocDet INNER JOIN tblDetails ON tblLocDet.DetailID = tblDetails.DetailID) ON tblLocations.LocationID = tblLocDet.LocationID
GROUP BY tblDetails.DetailType, tblDetails.DetailName, tblLocations.CityID, tblLocations.AreaID, tblLocations.CuisineID
HAVING (((tblLocations.CityID)=16) AND ((tblLocations.AreaID)=131) AND ((tblLocations.CuisineID)=3));";

$result = mysql_query($sql) or die(mysql_error());  

while ($row = mysql_fetch_assoc($result)) { 
   echo "<optgroup label='{$row['type']}'>"; 
   $DetailNames = explode('|', $row['DetailName']); 
   foreach($DetailNames as $DetailName) { 
      echo "<option value='".$DetailName."'>".$DetailName."</option>"; 
   } 
   echo "</optgroup>"; 
}  
?>
</select> 
```

帮助表示赞赏。

# perl - 编译错误：需要明确的包名称

> ID：14741640
> 
> 赞同：1
> 
> 时间：2013-02-07T00:41:17.467
> 
> 标签：perl, file, file-io, compiler-errors

我刚开始使用 Perl，我正在编写一个程序，它读取一个文件并将该文件中的莫尔斯电码放入另一个文件中的纯文本中。我收到此错误，我无法弄清楚出了什么问题。任何帮助表示赞赏！

我收到的错误：

```
Jessicas-MacBook-Pro:Documents jessica$ perl -w Morse_to_Text.pl <Morse3.rtf> MorseTest.txt
Global symbol "$message" requires explicit package name at Morse_to_Text.pl line 20.
Global symbol "$message" requires explicit package name at Morse_to_Text.pl line 26.
Global symbol "$message" requires explicit package name at Morse_to_Text.pl line 26.
Global symbol "$message" requires explicit package name at Morse_to_Text.pl line 27. 
```

代码：

```
#!/usr/bin/perl 

 use 5.010;
 use strict;
 use warnings;

my %morsecode=(
".-" =>"A", "-..." => "B", "-.-." => "C", "-.." => "D", "." => "E",
"..-." => "F", "--." => "G", "...." => "H", ".." => "I", ".---" => "J",
"-.-" => "K", ".-.." => "L", "--" => "M", "-." => "N", "---" => "O", 
".--." => "P", "--.-" => "Q", ".-." => "R", "..." => "S", "-" => "T",
"..-" => "U", "...-" => "V", ".--" => "W", "-..-" => "X", "-.--" => "Y",
"--.." => "Z", "-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3",
"....-" => "4", "....." => "5", "-...." => "6", "--..." => "7", "---.." => "8",
"----." => "9", ".-.-.-" => ".", "--..--" => ",", "..--.." => "?", ".----." => "'",
"-....-" => "-", ".-..-." => '"', ".--.-." => "@", "-...-" => "=", "!" => " "
);

while (<>) {
    chomp;
    foreach my $char ( split ' ' ) {

        $message = $morsecode{$char} + $message;
        print $message;
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:19:48.900

你使用 strict，所以你应该首先声明全局变量 $message。但正如 ikegami 在评论中所说，使用严格和警告是编写 perl 代码时的最佳实践之一。编译指示会更快地捕获许多错误，否则它们会被捕获，这样可以更容易地找到错误的根本原因（就像您提供的错误一样）。根本原因可能是需要进行错误或验证检查，无论程序员的技能如何，这都可能发生。

我认为您想要的是以下代码：

```
#!/usr/bin/perl 

 use 5.010;
 use strict;
 use warnings;

my %morsecode=(
".-" =>"A", "-..." => "B", "-.-." => "C", "-.." => "D", "." => "E",
"..-." => "F", "--." => "G", "...." => "H", ".." => "I", ".---" => "J",
"-.-" => "K", ".-.." => "L", "--" => "M", "-." => "N", "---" => "O", 
".--." => "P", "--.-" => "Q", ".-." => "R", "..." => "S", "-" => "T",
"..-" => "U", "...-" => "V", ".--" => "W", "-..-" => "X", "-.--" => "Y",
"--.." => "Z", "-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3",
"....-" => "4", "....." => "5", "-...." => "6", "--..." => "7", "---.." => "8",
"----." => "9", ".-.-.-" => ".", "--..--" => ",", "..--.." => "?", ".----." => "'",
"-....-" => "-", ".-..-." => '"', ".--.-." => "@", "-...-" => "=", "!" => " "
);

my $message;

while (<>) {
    chomp;
    foreach my $char ( split ' ' ) {
        $message = $message.$morsecode{$char};
    };
}

print $message."\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:43:33.167

这意味着您没有在适当的地方声明`$message`使用`my $message;`。

* * *

您可能会受益于使用运行脚本

```
perl -Mdiagnostics script.pl 
```

它将解释许多警告/错误。

# html - 我无法在 Chrome 上从我的服务器流式传输 mp3 文件

> ID：14741641
> 
> 赞同：0
> 
> 时间：2013-02-07T00:41:40.057
> 
> 标签：html, wordpress, mime-types, audio-streaming

我正在使用 jPlayer 在我的网站（通过 Wordpress 提供支持）上制作音频播放器，但我无法让它在 Chrome 中工作。我刚刚发现，如果我尝试从 Chrome 上的服务器流式传输 mp3 播放器，它甚至不会流式传输。有谁知道为什么这可能不起作用？有没有办法强制它能够流式传输，以便我可以让我的 jPlayer 工作？

尝试一个例子。在 Firefox 和 Chrome 中访问此页面。它应该在 Firefox 上正常播放，而不是在 Chrome 中播放。[http://www.startingtofeelit.com/wp-content/uploads/2013/02/araabMUZIK-The-Prince-Is-Coming.mp3](http://www.startingtofeelit.com/wp-content/uploads/2013/02/araabMUZIK-The-Prince-Is-Coming.mp3)

我认为这可能与 MIME 类型有关。我对这些不太熟悉，但我在服务器的根文件夹中打开了我的 .htaccess 文件，并将 AddType audio/mpeg mp3 添加到底部，但这似乎也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:07:42.597

由于流可以很好地播放，并且您说您有非常大的图像并且当您关闭页面选项卡时它可以工作，我怀疑您遇到了并发连接限制。

浏览器通常一次只会向服务器发出 3 或 4 个请求。如果这些连接已用完，则在这些连接完成之前，浏览器不太可能对 MP3 流发出额外的请求。确保您正在使用`keep-alive`并优化您的网站。

# ios - 从 iOS 查询 Azure

> ID：14741643
> 
> 赞同：1
> 
> 时间：2013-02-07T00:41:46.557
> 
> 标签：ios, service, azure, web

我不知道如何在 Azure 中执行查询。我终于弄清楚了插入，但现在我试图从 Azure 查询。这里有两部分，如何从 Azure 返回结果以及如何在 Objective-C 中读取结果？

到目前为止，我有这个

```
-(double)GetValidAppVersion
{
// Create a proxy client for sending requests to the Azure platform.
MSClient *client = [MSClient clientWithApplicationURLString : @""
                                         withApplicationKey : @"];
MSTable *appSettingsTable = [client getTable:@"AppSettings"];
NSPredicate * predicate = [NSPredicate predicateWithFormat:@"Key == AppVersion"];
NSArray *queryResults = [[NSArray alloc] init];
[appSettingsTable readWhere:predicate completion:^(NSArray *results, NSInteger totalCount, NSError *error)
{
    self.items = [results mutableCopy];
}];

return 1.0; 
```

}

我也没有弄清楚Azure方面。如何根据输入参数查询并返回结果？

我的表很简单，ID 为 int Key varchar Value varchar

非常感谢您对实现这一目标的任何帮助。

编辑：

我将此添加到我的控制器中

```
-(bool) IsAppVersionValid
{
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
double validAppVersion = [delegate.appVersion doubleValue];
double serverAppVersion;

NSDictionary *item = @{ @"complete" : @(NO) };
[self.Service SelectAppVersion:item completion:^(NSUInteger index)
{
}];

return true;//clientVersion >= validAppVersion;
} 
```

这对我的服务（这很草率，因为它应该是一个简单的完成块——我想将 NSString * 与 AppSettings 键值一起传递并在谓词中使用它。对此语法有什么想法吗？

```
typedef void (^CompletionWithAppVersionBlock)(NSUInteger index);

- (void) SelectAppVersion:(NSDictionary *) item
completion:() completion; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:06:28.923

作为 iOS SDK for Mobile Services 一部分的所有读取表读取方法都是异步的，这意味着您必须将完成块传递给它们（正如您在上面设置 self.items = [results mutableCopy ];) 以便对他们获取的结果做一些事情。

这意味着为了获得您正在寻找的值，您需要将完成块传递给您的 GetValidAppVersion 方法。然后，您可以将要返回的应用程序版本传递给该块。所以是这样的：

```
-(void) GetValidAppVersion:(NSDictionary *)item completion:(CompletionWithVersion)completion
{
    MSTable *appSettingsTable = [client getTable:@"AppSettings"];
    NSPredicate * predicate = [NSPredicate predicateWithFormat:@"Key == AppVersion"];
    NSArray *queryResults = [[NSArray alloc] init];
    [appSettingsTable readWhere:predicate completion:^(NSArray *results, NSInteger totalCount, NSError *error)
    {
        completion([results objectAtIndex:0]);
    }];
} 
```

您需要将 CompletionWithVersion 定义为带有返回参数的块（AppVersion）。查看 iOS 快速入门应用程序，了解如何定义完成块。

# iphone - 为什么 iOS 钥匙串值不离开 ViewController 就不会改变？

> ID：14741644
> 
> 赞同：3
> 
> 时间：2013-02-07T00:41:47.903
> 
> 标签：iphone, ios, xamarin.ios

我对似乎运行良好[的 iOS Keychain API 有一个抽象。](https://github.com/calvin-fisher/MonoTouchTools/blob/master/Keychain.cs)基本上，它有：

```
public string GetGenericPasswordField(string account)
{
    var record = SecKeyChain.QueryAsRecord(query, out code);
    if (code == SecStatusCode.ItemNotFound)
        return null;
    return NSString.FromData(record.ValueData, NSStringEncoding.UTF8);
}

public void SetGenericPasswordField(string account, string value)
{
    if (value == null)
    {
        SecKeyChain.Remove(record);
        return;
    }
    var record = new SecRecord (SecKind.GenericPassword) {
        Service = service,
        Label = label,
        Account = account,
        ValueData = NSData.FromString (value),
    };
    SecStatusCode code = SecKeyChain.Add (record);
    if (code == SecStatusCode.DuplicateItem)
    {
        // (remove and re-add item)
    }
} 
```

我在我的应用程序的设置屏幕上使用了这个抽象来在离开时保存值，然后在应用程序的其他地方加载这些值。

但是我遇到了一个问题，如果您不离开当前的 ViewController，保存值似乎不会生效。我正在做的类似于：

```
if (Keychain.GetGenericPasswordField("RemoteLogin") == null)
{
    var remotePassword = GetFromDialog();
    Keychain.SetGenericPasswordField("RemoteLogin", Hash(remotePassword));
    // Safe to assume the RemoteLogin password got saved, right?
}

// Later on...

if (Keychain.GetGenericPasswordField("RemoteLogin") == null)
{
    // This block is being executed
} 
```

我已经在调试器中逐步检查了代码，以确认事情与我描述的一样，并且我的抽象方法确实得到了`SecStatusCode.ItemNotFound`支持，这意味着 null 是要返回的适当值。

我曾经通过将前半部分代码移回之前的 ViewController 来解决这个问题，出于某种原因，这似乎唤醒了它，或者清除了正在发生的任何缓存。但是现在我遇到了另一种不太实际的情况。

为什么会这样？我的抽象是否泄漏？

# xml - R - 简单的 XML 解析

> ID：14741647
> 
> 赞同：0
> 
> 时间：2013-02-07T00:42:05.297
> 
> 标签：xml, r, xml-parsing

假设我在下面运行代码：

```
url.df_1 = htmlTreeParse(url_1, useInternalNodes = T) 
```

并得到以下 htmlTree ：

```
 <!-- ******************* related ******************* --> 
    <div class="more-related-box">

    <div id="app_related">
        <h3>Customers Also Bought</h3>
            <ul>
<li><a href="/app/ios/flick-golf/" title="Flick Golf!"><img src="http://a2.mzstatic.com/us/r1000/067/Purple/v4/25/a8/91/25a891df-fed4-9dc4-0d86-1c8f5acf893f/mzl.fcctkywr.75x75-65.jpg" class="app_icon"><span class="app_name">Flick Golf!</span><span class="category">Games</span></a></li>

              <li><a href="/app/ios/minecraft-pocket-edition/" title="Minecraft â€“ Pocket Edition"><img src="http://a1.mzstatic.com/us/r1000/070/Purple2/v4/3f/56/07/3f56074b-af27-8ba3-7ef8-c97314c13ee7/mzl.rfhcaysw.75x75-65.jpg" class="app_icon"><span class="app_name">Minecraft â€“ Pocket Edition</span><span class="category">Games</span></a></li> 
```

我想从上面抓取的是“flick-golf”和“minecraft-pocket-edition”。（所以上面是 htmltree 的一部分，我想获取这些名称并希望最终将它们作为列表或数据框。）

到目前为止，我尝试了这个（以及其他一些）

```
getNodeSet(url.df_1, "//div[@id = 'app_related']//h3 ") 
```

但我最终得到

```
[[1]]
<h3>Customers Also Bought</h3> 

attr(,"class") 
```

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:55:04.843

首先，您需要确保您的 xml 格式正确。我假设你会照顾好它。之后，您只需要正确的 XPath 争论，在您的情况下将是`//li/a/@title`

```
> str <- '<div class="more-related-box">
+ <div id="app_related">
+ <h3>Customers Also Bought</h3>
+ <ul>
+ <li>
+ <a href="/app/ios/flick-golf/" title="Flick Golf!">
+ <img src="http://a2.mzstatic.com/us/r1000/067/Purple/v4/25/a8/91/25a891df-fed4-9dc4-0d86-1c8f5acf893f/mzl.fcctkywr.75x75-65.jpg" class="app_icon" />
+ <span class="app_name">Flick Golf!</span>
+ <span class="category">Games</span>
+ </a>
+ </li>
+ <li>
+ <a href="/app/ios/minecraft-pocket-edition/" title="Minecraft â€“ Pocket Edition">
+ <img src="http://a1.mzstatic.com/us/r1000/070/Purple2/v4/3f/56/07/3f56074b-af27-8ba3-7ef8-c97314c13ee7/mzl.rfhcaysw.75x75-65.jpg" class="app_icon" />
+ <span class="app_name">Minecraft â€“ Pocket Edition</span>
+ <span class="category">Games</span>
+ </a>
+ </li>
+ </ul>
+ </div>
+ </div>'
> doc <- xmlParse(str)
> getNodeSet(doc, "//li/a/@title")
[[1]]
        title 
"Flick Golf!" 
attr(,"class")
[1] "XMLAttributeValue"

[[2]]
                         title 
"Minecraft â€“ Pocket Edition" 
attr(,"class")
[1] "XMLAttributeValue"

attr(,"class")
[1] "XMLNodeSet" 
```

# iphone - 构建时我不断收到弧线错误

> ID：14741652
> 
> 赞同：1
> 
> 时间：2013-02-07T00:42:46.410
> 
> 标签：iphone, ios, automatic-ref-counting, build-process

> **编辑** 我的问题是我没有将课程链接到我的项目。

我正在开发一个基本上是终端应用程序的应用程序。当我尝试构建它时，我遇到了构建错误。

```
 Ld /Users/evanstoddard/Library/Developer/Xcode/DerivedData/Highjack-anstcjvykrnniwbltvijvyvexirq/Build/Products/Debug-iphonesimulator/Highjack.app/Highjack normal i386
    cd /Users/evanstoddard/Desktop/Highjack
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/evanstoddard/Library/Developer/Xcode/DerivedData/Highjack-anstcjvykrnniwbltvijvyvexirq/Build/Products/Debug-iphonesimulator -F/Users/evanstoddard/Library/Developer/Xcode/DerivedData/Highjack-anstcjvykrnniwbltvijvyvexirq/Build/Products/Debug-iphonesimulator -filelist /Users/evanstoddard/Library/Developer/Xcode/DerivedData/Highjack-anstcjvykrnniwbltvijvyvexirq/Build/Intermediates/Highjack.build/Debug-iphonesimulator/Highjack.build/Objects-normal/i386/Highjack.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/evanstoddard/Library/Developer/Xcode/DerivedData/Highjack-anstcjvykrnniwbltvijvyvexirq/Build/Products/Debug-iphonesimulator/Highjack.app/Highjack

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_XXFdHijacker", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的实现文件：

```
 //
//  ViewController.m
//  My Utility 2
//
//  Created by Evan Stoddard on 2/6/13.
//  Copyright (c) 2013 Evan Stoddard. All rights reserved.
//

#import "ViewController.h"
#import "XXFdHijacker.h"

@interface ViewController () <XXFdHijackerDelegate>
@property (weak, nonatomic) IBOutlet UITextView *loggingView;

@property (strong, nonatomic) XXFdHijacker *stdoutHijacker;
@property (strong, nonatomic) XXFdHijacker *stderrHijacker;

@property (strong, nonatomic) NSMutableString *contents;

@end // extension

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Hijack standard out.
    self.stdoutHijacker = [XXFdHijacker hijackerWithFd: fileno(stdout)];
    setbuf (stdout, NULL);
    self.stdoutHijacker.delegate = self;
    [self.stdoutHijacker startHijacking];
    [self.stdoutHijacker startReplicating];

    // Hijack standard error
    self.stderrHijacker = [XXFdHijacker hijackerWithFd: fileno(stderr)];
    setbuf (stderr, NULL);
    self.stderrHijacker.delegate = self;
    [self.stderrHijacker startHijacking];
    [self.stderrHijacker startReplicating];

    self.contents = [NSMutableString string];

    NSLog (@"All Kids Love Log");

} // viewDidLoad

- (void) scrollToEnd {
    NSRange range = NSMakeRange (self.contents.length, 0);
    [self.loggingView scrollRangeToVisible: range];
} // scrollToEnd

- (void) hijacker: (XXFdHijacker *) hijacker  gotText: (NSString *) text {
    if (hijacker == self.stdoutHijacker) [self.contents appendString: @"stdout: "];
    if (hijacker == self.stderrHijacker) [self.contents appendString: @"stderr: "];

    [self.contents appendString: text];
    self.loggingView.text = self.contents;
    [self scrollToEnd];
} // hijacker

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

如果您需要查看更多内容，我愿意发送我的 xcode 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:47:23.393

检查 Xcode 项目中的 XXFdHijacker.m 文件，打开“Utilities”视图（Xcode 的右侧面板）并确保为您的应用选中了“Target Membership”复选框。它可能没有被编译，因此在尝试链接时缺少符号

# php - PHP - 数组提取中的数组

> ID：14741653
> 
> 赞同：0
> 
> 时间：2013-02-07T00:42:46.063
> 
> 标签：php, parsing, multidimensional-array

今天晚上我的大脑不太好掌握多维数组提取。

这是我的代码的结果：

```
Array
(
    [0] => Array
        (
            [0] => (<b>John Smith</b>) at <b class="datetimeGMT">2012-02-07 00:00:20 GMT</b><hr>This is a comment posted<br><br>
            [1] => (<b>Alex Boom</b>) at <b class="datetimeGMT">2013-02-07 00:08:06 GMT</b><hr>And let's put some more in here<br />with a new line.
        )

) 
```

我只需要遍历内部数组，就可以操作文本。

这是我的代码，它实际上产生了你所看到的：

```
<?php
$notecomments = '(<b>John Smith</b>) at <b class="datetimeGMT">2012-02-07 00:00:20 GMT</b><hr>This is a comment posted<br><br>(<b>Alex Boom</b>) at <b class="datetimeGMT">2013-02-07 00:08:06 GMT</b><hr>And let's put some more in here<br />with a new line.';

if(preg_match_all('/\(<b>(?:(?!\(<b>).)*/s', $notecomments, $matches)){
print_r($matches);
}

?> 
```

我试过`foreach($matches as $key => $val)`了，它产生了这个：`Array`

我确信进入这个并不是一件难事，但我正在画一个严重的空白。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:44:40.717

尝试更深一层：

```
foreach ($matches[0] as $k => $v) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T13:56:05.507

像这样的东西应该适合你。

```
$prod = [];
$keys = array_keys($arraydata); // get keys of the main array
for($i = 0; $i < count($arraydata); $i++) { // loop through the main array
    foreach($arraydata[$keys[$i]] as $key => $value) { //loop through the keys collected
            $prod[] = $value; // return array
    }
} 
```

# php - 将数组元素的键分配给变量

> ID：14741654
> 
> 赞同：2
> 
> 时间：2013-02-07T00:42:50.553
> 
> 标签：php, arrays, foreach

我有以下代码，在函数 field_has_input() 内，我想将元素的键分配给错误 []

即errors[]=$key而不是errors[]=$field

函数 field_has_input($field) 从 check_all_fields($_POST) 调用

希望有人可以帮忙。

```
function field_has_input($field)
{
    global $errors;

    if(!isset($field) || empty($field))
    {
        $errors[]=$field;
    } 
```

}

```
function check_all_fields($_POST)
{
     global $errors;
    foreach($_POST as $key => $value)
    {
        echo $_POST[$key] . "<br />";
         field_has_input($_POST[$key]);

    }
    //exit;
    var_dump($errors);
    return $errors;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:46:52.713

我建议您`field_has_input()`完全放弃该功能，而只在另一个循环内完成工作。否则，您需要将 传递给`$key` 内部函数。在目前的简单性中，它完全没有必要并且增加了复杂性。

```
function check_all_fields($_POST)
{
     global $errors;
    foreach($_POST as $key => $value)
    {
        // empty() calls isset() implicitly...
        if (empty($value)) {
          $errors[] = $key;
        }
    }
    //exit;
    var_dump($errors);
    return $errors;
} 
```

此外，我建议不要使用`global`错误，而是将其传递给函数。因为`$_POST`是超全局的，所以没有必要将它作为参数传递给你的函数。只能通过`$errors`。

```
function check_all_fields($errors) {
  //  $_POST is already available here...
  foreach($_POST as $key => $value)
  {
    if (empty($value)) {
      $errors[] = $key;
    }
  }
  return $errors;
} 
```

如果您*必须*使用内部函数，例如如果要完成的实际工作`field_has_input()`比检查更复杂，请在函数内部`empty()`传递`$key`和检查`$_POST[$key]`

```
function field_has_input($key, $errors) {
  if (empty($_POST[$key])) {
    $errors[] = $key;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:19:48.627

如果你想得到一个由空的 $_POST 键组成的值数组，你可以只用一行来做到这一点：

```
$errors = array_keys( array_diff_key( $_POST, array_filter($_POST) ) ); 
```

1.  [array_filter](http://www.php.net/manual/en/function.array-filter.php)将删除 false、null 或空字符串值

2.  [array_diff_key](http://www.php.net/manual/en/function.array-diff-key.php)会将原始的完整帖子数组与过滤后的版本进行比较，并仅返回已过滤的键。

3.  [array_keys](http://www.php.net/manual/en/function.array-keys.php)将使用给定数组的数组键创建一个值数组

例如，如果：

```
$arr = array (
     'name'     => 'Bob'
    ,'company'  => ''
    ,'state'    => 'CA'
    ,'phone'    => '' 
);

$errors = array_keys( array_diff_key( $arr, array_filter($arr) ) );
var_dump($errors);

// output:
array(2) {
  [0]=>
  string(7) "company"
  [1]=>
  string(5) "phone"
} 
```

# ruby-on-rails - 如何在rails中设置postgresql命令超时

> ID：14741657
> 
> 赞同：17
> 
> 时间：2013-02-07T00:43:16.333
> 
> 标签：ruby-on-rails, postgresql, heroku

我正在使用 heroku 和 heroku postgresql。如何设置 db 命令超时，以便在 sql 命令花费超过 10 秒时得到异常？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-02-24T04:36:28.933

像这样配置你的 database.yml，关键位是变量哈希：

```
defaults: &default
  adapter: postgresql
  encoding: unicode
  pool: 5
  min_messages: warning
  variables:
    statement_timeout: 5000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T00:05:18.873

我在这里找到了一个解决方案：[Ruby on Rails：如何在应用程序配置中设置数据库超时？](https://stackoverflow.com/questions/3506225/ruby-on-rails-how-to-set-a-database-timeout-in-application-configuration)

添加

```
ActiveRecord::Base.connection.execute('set statement_timeout to 10000') 
```

在`environment.rb`文件的末尾。

有没有人看到更好的方法？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T02:03:53.667

我不知道 ruby​​，但是在 PostgreSQL 中你可以简单地运行这个：

```
SET statement_timeout = '10s' 
```

之后，此连接（会话）中的所有查询都将对运行时进行严格限制。

您还可以在 postgresql.conf 中将其更改为全局默认值，甚至可以在给定数据库或给定用户中将其设为默认值，例如：

```
ALTER DATABASE web SET statement_timeout = '10s';
ALTER USER bad_user SET statement_timeout = '10s'; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-23T16:12:45.400

添加

```
ActiveRecord::Base.connection.execute('set statement_timeout to 10000') 
```

到`environment.rb`文件末尾对我不起作用。

有效的是添加

```
ActiveRecord::Base.connection.execute("SET statement_timeout = '10s'") 
```

到一个初始化文件。

# java - 从数组内的类调用方法

> ID：14741667
> 
> 赞同：0
> 
> 时间：2013-02-07T00:44:06.200
> 
> 标签：java, arrays, object, methods

我有一个里面有对象的数组。我将如何在数组元素上使用方法？

我的数组是`Object`. 我试过`array[i].getSalary()`了，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:46:07.550

**首先**，您几乎不应该使用`Object`. 原因是您丢失了所有类型信息：

*   将使那些将阅读您的代码的人（包括您的教授、您自己和六个月后您将忘记有关代码的所有内容的您自己）更容易理解代码
*   编译器和您的 IDE 甚至可以在您测试程序之前告诉您何时出错。
*   将避免我将在此答案的第二部分向您解释的容易出错的类型。

`Object`使用与将放入其中的对象（或公共基类）的类型相对应的类型的数组，而不是数组。假设你的类被调用`Employee`，你应该这样声明你的数组：

```
Employee[] employeeArray; 
```

（`employeeArray`这是一个更好的名称，`array`因为它告诉它包含什么样的对象，再次为了可读性。通常，更喜欢变量的显式名称。）

`employeeArray[i].getSalary()`如果该类`Employee`包含此类方法，则使用该解决方案很容易使用。当您阅读它时，此代码的意图也很明显。

其他可能性是通用集合，如`List<Employee>`or `Set<Employee>`，具体取决于您的需要。

**如果您确实必须使用 Object 数组**并调用`getSalary()`方法，则必须将*数组*元素强制转换为该方法`getSalary()`所属的类或接口。

例如，如果这个类被调用`Employee`：

```
Employee employee = (Employee) array[i];
employee.getSalary(); 
```

*强制转换*的作用是获取对象的 Employee 类型的引用。该对象仍然是相同的，但现在您可以调用`Employee`该对象的方法。

但是这个解决方案有很多注意事项。首先，它更冗长，需要两行才能完成本来可以只写一行的内容。其次，更重要的是，既然你有一个 的数组`Object`，你不能确定你真的有一个类型的对象`Employee`，如果不是这样，操作会抛出一个`ClassCastException`。解决这个问题的方法是首先检查对象是否真的是所需的类型：

```
Object object = array[i];
if (object instanceof Employee) {
    Employee employee = (Employee) object;
    employee.getSalary();
}
else {
    System.err.println("Object is not an Employee: we can not call getSalary()!");
} 
```

但是您会发现它变得更加冗长，如果将其乘以必须调用这些对象的方法的次数，那么代码将变得难以管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:00:57.083

你里面的所有对象`object[]`都有`getSalary()`方法吗？

*   如果没有，那么您显然可以看到为什么编译器不允许您这样做。如果您最终遇到这种情况，您的代码中的某处会发生一些有趣的事情。

*   如果是，它是同一`getSalary()`方法还是同一类层次结构中同一方法的多个动态绑定实现？

    *   如果两者都不是，您可能应该创建一个`IHasSalary`公开此类方法的接口（我知道这个名字很蹩脚），让所有这些对象都实现该接口，然后将数组声明为`IHasSalary[]`.

    *   如果是，找到它们最专业的共同祖先，说它是 class `Employee`，并将数组声明为`Employee[]`。

# vb.net - 组合框调用以前的数据源

> ID：14741671
> 
> 赞同：0
> 
> 时间：2013-02-07T00:44:27.220
> 
> 标签：vb.net, winforms, combobox, datasource, valuemember

在这里寻找一些见解...

在我的表单上，我有三个 ComboBox 控件。当最左边接收到一个选择时，它会调用一个例程来启用和填充第二个，然后当在第二个中进行选择时，第三个也会发生同样的情况。

```
 Private Sub cboEquipment_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cboEquipment.SelectedIndexChanged

    Me.transData.isMobile = If(Me.cboEquipment.Text = MOBIEQIP, 1, 0)

    If cboMembership.Enabled = False Then

        Me.cboMembership.Enabled = True

    End If

    Call loadGroups()

End Sub 
```

方法'loadGroups'

```
 Private Sub loadGroups()

    Dim cn As New SqlConnection(My.Settings.MyConnectionString)
    Dim cm As New SqlCommand("SELECT ... ORDER BY codeHumanName ASC", cn)
    Dim ta As New SqlDataAdapter(cm)
    Dim dt As New DataTable

    Me.cboMembership.DataSource = Nothing
    Me.cboMembership.Items.Clear()

    Me.transData.membership = Nothing

    cn.Open()
    ta.Fill(dt)

    With Me.cboMembership

        .DataSource = dt
        .DisplayMember = "codeHumanName"
        .ValueMember = "codeID"

    End With

    cn.Close()

End Sub 
```

这工作得很好，一切都应该加载，并提供适当的 .ValueMember 结果。

我应该提到，当表单第一次加载时，框 2 和 3 是空的并且被禁用。在初始加载之后，我必须从列表中选择一个项目来获取值（如预期的那样）。

奇怪的是，一旦第二个或第三个组合框被“初始化”，它们似乎会回忆起最后的设置。例如，如果我调用 Reset 方法，该方法将 .DataSource 属性设置为 Nothing，请清除列表并将 Text 设置为 Nothing；下次我更改 cboEquipment 上的 SelectedIndex 时，其他框会通过 SelectedItems 和 SelectedValues 恢复活力。

根据新的 DataTable，这些值并没有错，但奇怪的是它们完全记得（它们不应该有任何引用，并且表现为新负载）。

其他兴趣点；在 SelectedIndexChanged 事件期间调用填充方法。

任何想法都会很棒！

* * *

更新 -

此行为与 SelectedIndexChange 事件相关联（raise！raise！raise！）

在战略点删除和添加事件处理程序使我的代码按我想要/期望的方式工作。

[这](http://www.fmsinc.com/free/NewTips/NET/NETtip12.asp)是使我走上正确道路的文章...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:58:26.737

在您的第二个和第三个组合框尝试清除 .Text/.SelectedText 属性，然后再设置 .DataTable

组合框可能太有用了，并假设当您第二次设置 .DataTable 时，您希望所选项目与您的 .Text 属性匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:53:42.887

我最终使用 AddHandler 和 RemoveHandler 来防止在填充组合框时发生连锁触发事件。

# java - Spring MVC - 是否可以在 GET 上接收强类型请求对象？

> ID：14741673
> 
> 赞同：0
> 
> 时间：2013-02-07T00:44:40.520
> 
> 标签：java, spring, spring-mvc

我有一个 Spring MVC 控制器，它为 GET 请求提供服务，以执行搜索。

这些请求有许多可以在查询字符串上传递的可选参数。

例如：

```
@Data
public class SimpleSearchRequest implements SearchRequest {

    private String term;
    private List<Status> stati;
    @JsonDeserialize(using=DateRangeDeserializer.class)
    private Range<DateTime> dateRange;  
} 
```

如果我为此使用 POST 或 PUT，我可以使用`@RequestBody`. 但是，因为我使用的是 GET，所以这似乎不合适。

相反，似乎我需要将方法签名上的所有可能参数列出为`@RequestParam(required=false)`.

除了导致丑陋的方法签名之外，我还因为不在这里使用类而失去了各种面向对象的优点。

尝试使用`@RequestBody`失败（可以理解），正如[这里](https://stackoverflow.com/questions/13270708/spring-resttemplate-http-get-with-request-body)和[这里](https://stackoverflow.com/questions/978061/http-get-with-request-body)所讨论的，在 GET 上使用实际的请求正文是不可取的。

有没有办法让 Spring MVC 支持将多个`@RequestParam`'s 编组为 GET 请求上的强类型对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:49:15.423

似乎答案是简单地删除注释。

这有效：

```
@RequestMapping(method=RequestMethod.GET)
public @ResponseBody List<Result> search(SearchRequest request) {} 
```

# ios - Adobe Air 是否能够将复杂的 Flash 游戏转换为 iPad/android 平台游戏？

> ID：14741675
> 
> 赞同：0
> 
> 时间：2013-02-07T00:44:46.940
> 
> 标签：ios, flash, air, adobe, cross-platform

我最近听说过 Adob​​e Air 的转换功能，但它的效果如何？它是模拟使用大量库输出的复杂 Flash 游戏的每一段代码，还是如果您要转换一个库，您是否应该期待大量工作？

我正在考虑制作一个复杂的跨平台游戏，但不确定哪个更好/更容易，使用 Flash 和 Adob​​e Air 以获得丰富的游戏库、资源和更快的开发，或者简单地使用 Java。

如果我可以使用 Flash 真的会节省很多时间。不过，我可以想象它也会让我一直担心。比如如果 adobe/apple 停止支持 Flash 或者转换功能不起作用怎么办。

欢迎任何建议和任何信息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:05:40.117

我个人的观点是“移动”不会去任何地方，现在是开始学习 Android 的 Java 和/或 iOS 的 Objective-C 的最佳时机。与 PhoneGap 一样，Flash 移动应用程序无法让您完全访问设备的整个 API/SDK 选项，即使它们提供的功能通常就足够了。Flash 仍然是一个受人尊敬的工具，但开发“原生”可以让您完全控制应用程序的内存、设备交互、尖端 API 等......

根据您编写的操作脚本 3 代码的优化程度，与使用原生图形库相比，您可能会遇到一些性能问题。我认为最新版本的 AIR（我知道 Flash 11.2 和包含一些不错的图形内容）可能会解决性能问题，但还没有看到任何移动设备上的 AIR 基准测试。

如果您希望走 AIR 路线，我会说为什么不花几天时间尝试移植它。如果一切都失败了，那就买一本不错的 iOS 或 Android 书，每天晚上都抱着它，直到你确信你可以在本地重新创建你的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:11:48.163

根据我的经验，AIR 在 iOS 上运行良好，尽管原生应用程序总是会表现得更好。我想不出在转换为在 iOS 上运行时 Flash 的任何方面都不起作用。

AIR 性能是否足够好实际上取决于个人情况 - 游戏的 gpu 和 cpu 密集程度如何。

您必须考虑权衡：使用现有的 Flash 技能快速创建“好”游戏；或者学习新技能来慢慢创造一个“更好”的游戏——是否值得花几周/几个月的时间学习新技能来获得额外的百分之几的性能？只有你可以决定。

关于未来对 Adob​​e AIR 的支持；谁知道 - 他们没有很好的记录（想想移动设备上的闪存） - 但我建议 AIR 至少会在中期出现，如果不是长期的话。

# ruby-on-rails - Rails 设计多态

> ID：14741676
> 
> 赞同：0
> 
> 时间：2013-02-07T00:44:46.717
> 
> 标签：ruby-on-rails, devise, polymorphic-associations

我正在使用设计，我想创建一个多态关系，我将列添加到表用户'usersable_type'和'usersable_id'

这是我的代码

**型号 >> 用户**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  # attr_accessible :title, :body
  attr_accessible :email, :password, :password_confirmation, :remember_me

  #usarsable
  belongs_to :usersable, :polymorphic => true, :autosave => true, :dependent => :destroy
  accepts_nested_attributes_for :usersable

end 
```

**型号 >> 医疗**

```
class Medic < ActiveRecord::Base
  attr_accessible :license_number, :specialty

  has_one :user, as: :usersable, dependent: :destroy
  has_and_belongs_to_many :patients
end 
```

**型号 >> 患者**

```
class Patient < ActiveRecord::Base
  belongs_to :socialsecurity
  attr_accessible :birthday, :blood_type
  has_one :user, as: :usersable, dependent: :destroy
  has_many :contacts
  has_and_belongs_to_many :medics
end 
```

**覆盖设计控制器**

```
class RegistrationsController < Devise::RegistrationsController
  def new
    super
    @user.build_usersable # I had problem in this line
  end

  def create
  end

  def update
    super
  end
end 
```

**这些是我目前拥有的所有模型，但我仍然有同样的问题，我不知道如何创建和保存多态对象。**

错误还是一样

> 错误：“<#User:”的未定义方法“build_usersable”

有没有人可以帮助我，我将不胜感激

提前致谢

朱莉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:59:43.557

根据评论中的对话，这是我认为您需要的那种方案。

我将使用 Aspect 的概念，即用户可以有很多方面，方面可能是医生、内容细节等；一个方面只能有一个用户。

首先，您需要一个具有 user_id 和 aspect_type 和 aspect_id 的 UserAspect 模型

```
class UserAspect < ActiveRecord::Base

  belongs_to :user
  belongs_to :aspect, :polymorphic => true
end 
```

现在你的用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  # attr_accessible :title, :body
  attr_accessible :email, :password, :password_confirmation, :remember_me

  #aspects
  has_many :user_aspects
  has_many :aspects, :through => :user_aspects

end 
```

现在你的医生

```
class Medic < ActiveRecord::Base
  attr_accessible :license_number, :specialty

  has_one :user_aspect, as: :aspect, dependent: :destroy
  has_one :user, :through => :user_aspect
end 
```

现在你可以做类似的事情

```
user.aspects

medic.user

etc 
```

# java - Android 的特定设备检测？

> ID：14741680
> 
> 赞同：2
> 
> 时间：2013-02-07T00:45:09.773
> 
> 标签：java, android

我可以通过哪些方式调用 android 应用程序来检测我在 Java 中使用的手机（如特定型号）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:50:18.347

如果您想显示“最终产品的最终用户可见名称”（文档），这应该可以工作：

```
String mDeviceModel = android.os.Build.MODEL; 
```

对于工业名称：

```
String mDeviceName = android.os.Build.DEVICE; 
```

获取制造商：

```
String mDeviceManufacturer = android.os.Build.MANUFACTURER; 
```

# google-chrome - Chrome 扩展“文件夹”按钮来保存其他 Chrome 按钮

> ID：14741682
> 
> 赞同：2
> 
> 时间：2013-02-07T00:45:29.940
> 
> 标签：google-chrome, google-chrome-extension

我的问题涉及 Google Chrome 扩展按钮，在运行 Google Chrome 时，您会在“设置”按钮旁边看到这些按钮。我运行了很多很多带有按钮的扩展程序，并且它开始从地址栏中占用太多的空间。我想知道是否有任何方法可以创建一个包含扩展按钮的按钮。

理想情况下，这个选项已经以我可以安装的扩展的形式存在。如果不是这种情况，我将创建自己的扩展。那将是一项任务。这就是生活。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T01:11:14.507

这不是一个真正的问题......
但至少在我的 chrome（v24，win7）中，我可以拖动栏（将地址栏与扩展图标分开的列）并通过拖动它，图标将被组合在一起 -下列表。

# iphone - 3.5 英寸 ios 应用程序屏幕在 4 英寸屏幕上变得混乱

> ID：14741685
> 
> 赞同：-3
> 
> 时间：2013-02-07T00:45:59.177
> 
> 标签：iphone, ios, xcode

我的第一个应用程序今天被接受并上传到应用程序商店:) 我将它下载到我的 4s（屏幕尺寸为 3.5 英寸的 iPhone）上，非常完美！但是当我将应用程序下载到我的 iphone 5（屏幕尺寸为 4 英寸的 iPhone）上时，图片完全不合适并在屏幕上四处移动（好像图像被拉伸了。我该如何解决这个问题？我没有时间现在重做所有的艺术作品。我只希望黑条位于顶部和底部。我怎样才能做到这一点？谢谢一群人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:53:51.340

从项目导航器中删除 Retina（4 英寸）启动图像（尽管提供 4 英寸版本的应用程序会更好：p）。

# jquery - 如何在 Tooltipster 工具提示中显示来自 jQuery Validate 插件的消息？

> ID：14741688
> 
> 赞同：20
> 
> 时间：2013-02-07T00:46:22.213
> 
> 标签：jquery, jquery-validate, tooltip, tooltipster

我想使用[Tooltipster 插件来显示由](http://calebjacob.com/tooltipster/)[jQuery Validate 插件](http://docs.jquery.com/Plugins/Validation)生成的表单错误。

**用于验证插件的 jQuery**：

```
$(document).ready(function () {

    $('#myform').validate({ // initialize jQuery Validate
        // other options,
        rules: {
            field1: {
                required: true,
                email: true
            },
            field2: {
                required: true,
                minlength: 5
            }
        }
    });

}); 
```

**用于 Tooltipster 插件的 jQuery**：

```
$(document).ready(function () {

    $('.tooltip').tooltipster({ /* options */ });  // initialize tooltipster

}); 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="field1" />
    <input type="text" name="field2" />
    <br/>
    <input type="submit" />
</form> 
```

我将如何整合这两个 jQuery 插件的使用，以便验证错误出现在工具提示中？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-07T00:46:22.213

**此答案中包含 Tooltipster 版本 2.1、3.0 和 4.0 的解决方案。**

**注意**，这`.tooltipster()`仅附加到`type="text"` `input`我下面示例中的元素。如果您`form`包含其他类型的数据输入元素，例如`type="radio"`, `type="date"`, `textarea`,`select`等，那么您**必须**`.tooltipster()`相应地调整您的选择器或为这些其他元素创建额外的实例。否则，一切都会因错误而失败。

* * *

**工具提示器 v2.1**

**首先，在所有**将显示错误的特定元素上初始化 Tooltipster 插件（[使用任何选项](http://calebjacob.com/tooltipster/#options)） ：**`form`**

 **```
$(document).ready(function () {

    // initialize tooltipster on form input elements
    $('#myform input[type="text"]').tooltipster({ 
        trigger: 'custom', // default is 'hover' which is no good here
        onlyOne: false,    // allow multiple tips to be open at a time
        position: 'right'  // display the tips to the right of the element
    });

}); 
```

其次，使用[Tooltipster 的高级选项](http://calebjacob.com/tooltipster/#advanced)以及[Validate 插件中内置的回调函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)[`success:`来`errorPlacement:`](http://docs.jquery.com/Plugins/Validation/validate#toptions)自动显示和隐藏工具提示，如下所示：

```
$(document).ready(function () {

    // initialize validate plugin on the form
    $('#myform').validate({
        // any other options & rules,
        errorPlacement: function (error, element) {
            $(element).tooltipster('update', $(error).text());
            $(element).tooltipster('show');
        },
        success: function (label, element) {
            $(element).tooltipster('hide');
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/2DUX2](http://jsfiddle.net/2DUX2/)**

**编辑**：更新代码以利用 2/12/13 版本 2.1 中发布的新 Tooltipster API 功能

* * *

* * *

**Tooltipster v3.0 的更新**

Tooltipster 3.0 已经发布，因此与上面所示的工作方式不同。以下代码提供了一个更新的示例。此版本的额外好处是，当消息尚未更改时，不会在每次击键时调用 Tooltipster。

（*不要忘记您仍然需要附加`.tooltipster()`到您的相关`input`元素，如上图所示。*）

```
$(document).ready(function () {

    // initialize validate plugin on the form
    $('#myform').validate({
        // any other options & rules,
        errorPlacement: function (error, element) {
            var lastError = $(element).data('lastError'),
                newError = $(error).text();

            $(element).data('lastError', newError);

            if(newError !== '' && newError !== lastError){
                $(element).tooltipster('content', newError);
                $(element).tooltipster('show');
            }
        },
        success: function (label, element) {
            $(element).tooltipster('hide');
        }
    });

}); 
```

**使用 Tooltipster v3.0 的演示：[jsfiddle.net/2DUX2/3/](http://jsfiddle.net/2DUX2/3/)**

* * *

* * *

**Tooltipster v4.0 的更新**

请注意，该`onlyOne`选项已从 Tooltipster 插件的 4.0 版本中删除。

我还将`success`回调替换为`unhighlight`. 在“可选”字段上，当该字段随后被空白时，错误消息从未被删除......这是因为`success`在这些情况下该函数不会触发。此问题并非孤立于 Tooltipster 版本 4，但以下代码可解决此问题。

```
// initialize Tooltipster on text input elements
$('input[type="text"]').tooltipster({ //find more options on the tooltipster page
    trigger: 'custom', // default is 'hover' which is no good here
    position: 'top',
    animation: 'grow'
});

// initialize jQuery Validate
$("#myform").validate({
    errorPlacement: function (error, element) {
        var ele = $(element),
            err = $(error),
            msg = err.text();
        if (msg != null && msg !== '') {
            ele.tooltipster('content', msg);
            ele.tooltipster('open');
        }
    },
    unhighlight: function(element, errorClass, validClass) {
        $(element).removeClass(errorClass).addClass(validClass).tooltipster('close');
    },
    rules: {
        .... 
```

**使用 Tooltipster v4.0 的演示： [https ://jsfiddle.net/h5grrrr9/](https://jsfiddle.net/h5grrrr9/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-29T15:16:29.143

Sparky 的回答一直是我网站验证的主要内容，但升级到 Tooltipster 4 需要进行一些更改。以下是我的工作方式，并进行了一些改进。

在您的页面上，在 head 部分包含 tooltipster css 和一个主题 css（以及您在其页面上描述的主题子类的任何主题 css）。

```
<link rel="stylesheet" type="text/css" href="/styles/tooltipster.bundle.css">
<link rel="stylesheet" type="text/css" href="/styles/tooltipster/sideTip/themes/tooltipster-sideTip-light.min.css"> 
```

此外，您需要包含 tooltipster 的 javascript 文件。您还需要 jquery-validation javascript。

```
<script src="/js/tooltipster.bundle.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script> 
```

现在，在另一个 javascript 文件或一些脚本标签中，您需要放置验证代码以及工具提示代码。这是我拥有的网页中的一个，Sparky 答案的更改位于顶部。

```
$(document).ready(function(){

    $('#form input[type="text"]').tooltipster({ //find more options on the tooltipster page
        trigger: 'custom', // default is 'hover' which is no good here
        onlyOne: false,    // allow multiple tips to be open at a time
        position: 'top',
        animation: 'grow', 
        theme: ['tooltipster-light'] //put your themes here
    });

    //form validation initialization
    $("#form").validate({
        errorPlacement: function (error, element) {
            if (error[0].innerHTML != null && error[0].innerHTML !== "") {
                $(element).tooltipster('content', $(error).text());
                $(element).tooltipster('open'); //open only if the error message is not blank. By default jquery-validate will return a label with no actual text in it so we have to check the innerHTML.
            }
        },
        success: function (label, element) {
            var obj = $(element);
            if (obj.hasClass('tooltipstered') && obj.hasClass('error')) {
                $(element).tooltipster('close'); //hide no longer works in v4, must use close
            }   
        },
        rules: {
            // your rules
            ......
        }
    });

}); 
```

现在，当您在违反所列规则之一的字段中键入内容时，框上方会弹出一个弹出窗口，说明 jquery-validate 所说的内容是错误的。如果其中没有任何内容可以向用户显示，它也不会打开消息（这将导致它打开一个空白工具提示然后立即关闭，这看起来很奇怪）。**

# security - 任何第三方都可以从我的项目中加载嵌入式资源吗？

> ID：14741696
> 
> 赞同：4
> 
> 时间：2013-02-07T00:47:06.397
> 
> 标签：security, delphi, embedded-resource

请参考我[之前的一个问题](https://stackoverflow.com/questions/14681364/issues-passing-data-from-dll-to-application)。我问的是从 DLL 加载已编译的资源。然后参考大卫赫弗南的答案。他的建议是使用内置机制直接从 DLL 的实例中加载资源，甚至不使用我自己的导出函数。这向我指出了一个安全漏洞。

如果确实如此，如果这种类型的解决方案是可能的，那么任何外部第三方都可以从任何 Delphi 应用程序/DLL 加载资源吗？嵌入式资源的安全性如何？假设我用嵌入式资源编译了一个 DLL。有人可以获取此 DLL 并提取资源吗？考虑到他们必须知道资源名称，这有多容易？他们是否能够检测到编译了哪些资源并获得命名资源的列表？如果是这样，那么我将不得不实现自己的安全级别并加密每个嵌入式资源并使用登录对其进行解密。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T00:58:10.067

[Windows Portable Executable](http://en.wikipedia.org/wiki/Portable_Executable)的*资源部分*可供任何对可执行文件具有读取权限的进程/用户访问和枚举。

Windows API 提供了一系列[使用资源](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468907%28v=vs.85%29.aspx)的函数，包括以下函数：

*   添加、删除和替换资源
*   枚举资源
*   查找和加载资源
*   资源文件格式
*   使用资源

事实上，有很多现成的工具可以执行此操作。您自己的 Delphi 安装有一个名为 Resource Explorer 的演示项目，通常安装在文件夹中`Samples\Delphi\VCL\resXplor`。

如您所见，任何拥有相关知识和/或[工具](https://www.google.com/search?q=resource+editor)的人不仅可以读取，而且可以删除和替换在您的 Windows 可执行文件中找到的资源，而不管生成它的编译器是什么。

[您可以在文章An In-Depth Look into the Win32 Portable Executable File Format](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)中找到有关 PE 文件格式的更多信息。

# ruby-on-rails - 使用 sidekiq 处理两个单独的 redis 实例？

> ID：14741700
> 
> 赞同：12
> 
> 时间：2013-02-07T00:47:17.503
> 
> 标签：ruby-on-rails, redis, queue, sidekiq

下午好，

我有两个独立但相关的应用程序。他们都应该有自己的后台队列*（阅读：单独的 Sidekiq 和 Redis 进程）*。但是，我希望偶尔能够将作业`app2`从`app1`.

`app1`从简单的队列/推送角度来看，如果没有现有的 Sidekiq/Redis 堆栈，这样做很容易：

```
# In a process, far far away

# Configure client 
Sidekiq.configure_client do |config|
  config.redis = { :url => 'redis://redis.example.com:7372/12', :namespace => 'mynamespace' }
end

# Push jobs without class definition 
Sidekiq::Client.push('class' => 'Example::Workers::Trace', 'args' => ['hello!'])

# Push jobs overriding default's 
Sidekiq::Client.push('queue' => 'example', 'retry' => 3, 'class' =>     'Example::Workers::Trace', 'args' => ['hello!']) 
```

但是，鉴于我已经调用了 a`Sidekiq.configure_client`和`Sidekiq.configure_server`from `app1`，因此在这之间可能需要发生一些事情。

显然，我可以直接从 Sidekiq 内部获取序列化和规范化代码并手动推送到`app2`的 redis 队列，但这似乎是一个脆弱的解决方案。我希望能够使用该`Client.push`功能。

我想我理想的解决方案是这样的：

`SidekiqTWO.configure_client { remote connection..... }` `SidekiqTWO::Client.push(job....)`

甚至：

`$redis_remote = remote_connection.....`

`Sidekiq::Client.push(job, $redis_remote)`

显然有点滑稽，但这是我理想的用例。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-10T03:40:10.093

所以一件事是[根据常见问题解答](https://github.com/mperham/sidekiq/wiki/FAQ#how-do-i-push-a-job-to-sidekiq-without-ruby)，“Sidekiq 消息格式非常简单和**稳定**：它只是 JSON 格式的哈希。” 强调我的——我不认为将 JSON 发送到 sidekiq 太脆弱了。尤其是当您想要围绕将作业发送到哪个 Redis 实例进行细粒度控制时，就像在 OP 的情况下一样，我可能只需要编写一个小包装器，让我可以指示 Redis 实例以及正在排队的作业。

对于 Kevin Bedell 将循环作业循环到 Redis 实例的更一般情况，我想您*不想*控制使用哪个 Redis 实例——您只想排队并自动管理分发。[到目前为止](https://github.com/mperham/sidekiq/issues/660)，似乎只有一个人提出了这个要求，[他们想出了一个解决方案](https://gist.github.com/xxx/4659986)，它使用[`Redis::Distributed`](https://github.com/redis/redis-rb/blob/e1881b2fbc7b361aa0aefc9ea520bdee0383f735/lib/redis/distributed.rb)：

```
datastore_config = YAML.load(ERB.new(File.read(File.join(Rails.root, "config", "redis.yml"))).result)

datastore_config = datastore_config["defaults"].merge(datastore_config[::Rails.env])

if datastore_config[:host].is_a?(Array)
  if datastore_config[:host].length == 1
    datastore_config[:host] = datastore_config[:host].first
  else
    datastore_config = datastore_config[:host].map do |host|
      host_has_port = host =~ /:\d+\z/

      if host_has_port
        "redis://#{host}/#{datastore_config[:db] || 0}"
      else
        "redis://#{host}:#{datastore_config[:port] || 6379}/#{datastore_config[:db] || 0}"
      end
    end
  end
end

Sidekiq.configure_server do |config|
  config.redis = ::ConnectionPool.new(:size => Sidekiq.options[:concurrency] + 2, :timeout => 2) do
    redis = if datastore_config.is_a? Array
      Redis::Distributed.new(datastore_config)
    else
      Redis.new(datastore_config)
    end

    Redis::Namespace.new('resque', :redis => redis)
  end
end 
```

在寻求高可用性和故障转移时要考虑的另一件事是获取包含可靠性功能的 Sidekiq [Pro](http://sidekiq.org/pro/)：“Sidekiq Pro 客户端可以承受短暂的 Redis 中断。它会在出错时在本地排队作业并尝试交付这些作业一旦连接恢复。” 由于 sidekiq 无论如何都是用于后台进程，因此如果 Redis 实例出现故障，那么短暂的延迟不会影响您的应用程序。如果您的两个 Redis 实例中的一个出现故障并且您正在使用循环，除非您使用此功能，否则您仍然会失去一些工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-27T08:49:50.793

正如 carols10cents 所说，它非常简单，但由于我总是喜欢封装该功能并能够在其他项目中重用它，因此我[从 Hotel Tonight 的博客中](http://engineering.hoteltonight.com/interservice-communication-with-sidekiq-remote-workers)更新了一个想法。以下解决方案改进了在 Rails 4.1 和 Spring 预加载器中无法使用的 Hotel Tonight。

目前，我将以下文件添加到`lib/remote_sidekiq/`：

**remote_sidekiq.rb**

```
class RemoteSidekiq
  class_attribute :redis_pool
end 
```

**remote_sidekiq_worker.rb**

```
require 'sidekiq'
require 'sidekiq/client'

module RemoteSidekiqWorker
  def client
    pool = RemoteSidekiq.redis_pool || Thread.current[:sidekiq_via_pool] || Sidekiq.redis_pool
    Sidekiq::Client.new(pool)
  end

  def push(worker_name, attrs = [], queue_name = "default")
    client.push('args' => attrs, 'class' => worker_name, 'queue' => queue_name)
  end
end 
```

您需要创建一个设置 redis_pool 的初始化程序

**配置/初始化程序/remote_sidekiq.rb**

```
url = ENV.fetch("REDISCLOUD_URL")
namespace = 'primary'

redis = Redis::Namespace.new(namespace, redis: Redis.new(url: url))

RemoteSidekiq.redis_pool = ConnectionPool.new(size: ENV['MAX_THREADS'] || 6) { redis } 
```

**亚历克斯编辑：**

在从来没有版本的 sidekiq 中，而不是行：

```
redis = Redis::Namespace.new(namespace, redis: Redis.new(url: url))

RemoteSidekiq.redis_pool = ConnectionPool.new(size: ENV['MAX_THREADS'] || 6) { redis } 
```

使用线：

```
redis_remote_options = {
  namespace: "yournamespace",
  url: ENV.fetch("REDISCLOUD_URL")
}

RemoteSidekiq.redis_pool = Sidekiq::RedisConnection.create(redis_remote_options) 
```

然后，您可以在`include RemoteSidekiqWorker`任何需要的地方简单地安装模块。任务完成！

******更多更大的环境******

添加 RemoteWorker 模型会带来额外的好处：

1.  您可以在任何地方重用 RemoteWorker，包括有权访问目标 sidekiq 工作人员的系统。这对调用者是透明的。要在目标 sidekiq 系统中使用“RemoteWorkers”表单，只需不要使用初始化程序，因为它将默认使用本地 Sidekiq 客户端。
2.  使用 RemoteWorkers 确保始终发送正确的参数（代码 = 文档）
3.  通过创建更复杂的 Sidekiq 架构来扩大规模对调用者来说是透明的。

这是一个示例 RemoteWorker

```
class RemoteTraceWorker
  include RemoteSidekiqWorker
  include ActiveModel::Model

  attr_accessor :message

  validates :message, presence: true

  def perform_async
    if valid?
      push(worker_name, worker_args)
    else
      raise ActiveModel::StrictValidationFailed, errors.full_messages
    end
  end

  private

  def worker_name
    :TraceWorker.to_s
  end

  def worker_args
    [message]
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-16T19:54:15.357

我遇到了这个问题并遇到了一些问题，因为我正在使用`ActiveJob`，这使得从队列中读取消息的方式变得复杂。

基于 ARO 的回答，您仍然需要 redis_pool 设置：

**remote_sidekiq.rb**

```
class RemoteSidekiq
  class_attribute :redis_pool
end 
```

**配置/初始化程序/remote_sidekiq.rb**

```
url = ENV.fetch("REDISCLOUD_URL")
namespace = 'primary'

redis = Redis::Namespace.new(namespace, redis: Redis.new(url: url))

RemoteSidekiq.redis_pool = ConnectionPool.new(size: ENV['MAX_THREADS'] || 6) { redis } 
```

现在我们将创建一个 ActiveJob Adapter 来代替 worker 来排队请求：

**lib/active_job/queue_adapter/remote_sidekiq_adapter.rb**

```
require 'sidekiq'

module ActiveJob
  module QueueAdapters
    class RemoteSidekiqAdapter
      def enqueue(job)
        #Sidekiq::Client does not support symbols as keys
        job.provider_job_id = client.push \
          "class"   => ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper,
          "wrapped" => job.class.to_s,
          "queue"   => job.queue_name,
          "args"    => [ job.serialize ]
      end

      def enqueue_at(job, timestamp)
        job.provider_job_id = client.push \
          "class"   => ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper,
          "wrapped" => job.class.to_s,
          "queue"   => job.queue_name,
          "args"    => [ job.serialize ],
          "at"      => timestamp
      end

      def client
        @client ||= ::Sidekiq::Client.new(RemoteSidekiq.redis_pool)
      end
    end
  end
end 
```

我现在可以使用适配器对事件进行排队：

```
require 'active_job/queue_adapters/remote_sidekiq_adapter'

class RemoteJob < ActiveJob::Base
  self.queue_adapter = :remote_sidekiq

  queue_as :default

  def perform(_event_name, _data)
    fail "
      This job should not run here; intended to hook into
      ActiveJob and run in another system
    "
  end
end 
```

我现在可以使用普通的 ActiveJob api 对作业进行排队。无论应用程序从队列中读取什么，都需要有一个匹配项`RemoteJob`才能执行该操作。

# ios - 格式化 NSDate 不起作用

> ID：14741701
> 
> 赞同：0
> 
> 时间：2013-02-07T00:47:18.303
> 
> 标签：ios, nsdate, nsdateformatter

我有以下方法，我想用它来返回修改后的日期：

```
- (NSDate *)getCreationDate:(NSFileManager *)fileManager atPath:(NSString *)path {
    NSError *error;
    NSDate *date;
    NSDictionary *fileAttributes = [fileManager attributesOfItemAtPath:path error:&error];

    // Get creation date.
    if (!error) {
        if (fileAttributes != nil) {
            NSDate *creationDate = [fileAttributes fileCreationDate];
            NSString *dateString = [creationDate description];
            NSLog(@"Unformatted Date Created: %@", dateString);

            // Format date.
            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat:@"dd-MM-yyyy hh:mm:ss"];
            date = [[NSDate alloc] init];
            date = [dateFormatter dateFromString:dateString];
            NSLog(@"Formatted Date Created: %@", [date description]);
        } else {
            NSLog(@"File attributes not found.");
        }
    } else {
        NSLog(@"%@", [error localizedDescription]);
    }

    return date;
} 
```

问题是格式化的日期返回为空。

**输出：**

创建日期：2013-02-06 04:44:57 +0000

创建格式化日期：（空）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:04:45.173

**没有格式化的 NSDate 这样的东西。**这只是一个没有格式的日期。描述方法用于调试和记录，并使用它想要的任何格式。

NSDateFormatter 用于创建具有您指定格式的 NSDate 的 NSString 表示。你的方法可以用这个代替，做同样的事情。

```
- (NSDate *)getCreationDate:(NSFileManager *)fileManager atPath:(NSString *)path {
    NSError *error;
    NSDictionary *fileAttributes = [fileManager attributesOfItemAtPath:path error:&error];

    // Get creation date.
    if (!error) {
        if (fileAttributes != nil) {
            return [fileAttributes fileCreationDate];
       } else {
            NSLog(@"File attributes not found.");
        }
    } else {
        NSLog(@"%@", [error localizedDescription]);
    }

    return nil;
} 
```

当您要显示日期时，请对其进行格式化。使用 NSDateFormatter 将其转换为格式化的 NSString。

此外，线条

```
 date = [[NSDate alloc] init];
    date = [dateFormatter dateFromString:dateString]; 
```

创建一个新日期，然后将其丢弃。第一行是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:50:54.460

您没有将时区合并到时间格式中，并且小时的格式是错误的。它应该是

```
yyyy-MM-dd HH:mm:ss ZZZZ 
```

# css - 如何控制 KendoUI 下拉菜单的定位并防止其与输入文本框重叠？

> ID：14741705
> 
> 赞同：3
> 
> 时间：2013-02-07T00:47:43.523
> 
> 标签：css, combobox, kendo-ui

我一直看到一件我无法解决的奇怪事情，这与我的网站中组合框和/或下拉列表的下拉部分重叠/隐藏文本条目的事实有关。有没有人遇到同样的问题，如果是的话是如何解决的？

**<UPDATE>**
可以在此处找到显示重叠的 repro 页面的链接[kendotest.azurewebsites.com](http://kendotest.azurewebsites.net/)
**</UPDATE>**

3张图片中的问题说明......

这是它在 KendoUI 演示网站上的外观 -**正确的行为** ![正确的行为 - 来自 kendo ui web demo site](../Images/1ad3289c8a0c266382355b29bfdb35d8.png)

这是我网站上的行为 - **重叠错误** ![处于折叠状态的组合框](../Images/c743e86b7df704447a98995e4dabf629.png) ![我的组合处于展开状态](../Images/d37729577e4b22657fc14ea761d43d70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:29:12.347

我找到了答案

默认 MVC 4 模板在 site.css 中有下一个正文条目：

```
body
{
    background-color: #fff;
    border-top: solid 10px #000;
    color: #333;
    font-size: .85em;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
}

enter code here 
```

当我删除**边框顶**线时，下拉菜单开始正常工作

# javascript - 为什么“在鼠标上...”功能奇怪

> ID：14741711
> 
> 赞同：0
> 
> 时间：2013-02-07T00:48:02.247
> 
> 标签：javascript, d3.js

我有一个程序，允许用户通过两个 2D 切片（在两个窗口中）探索 3D 功能。该函数在两个表中进行编码，每个表对应一个维度。要选择一个窗口中显示的切片，用户启用“editDim”复选框，然后在另一个窗口中单击并拖动。未选中“editDim”时，用户可以平移和缩放每个窗口。问题是，在“editDim”模式下，如果我单击并拖动鼠标光标移出粉红色阴影绘图区域，则平移缩放开始。我已将简化版本放入 jsfiddle，[http:// jsfiddle.net/eric_l/PB6aK/](http://jsfiddle.net/eric_l/PB6aK/)。
我添加了显示鼠标事件的日志消息，当不单击拖动（正常鼠标移动）时，我看不到绘图区域周围的区域的事件。

```
this.zoom = d3.behavior.zoom().x(self.xscale).y(self.yscale).on("zoom", function() {self.redraw() } );

this.div = d3.select(this.anchor).append("div");
this.svg = this.div.append("svg")
    .datum(this.data[this.select].values)
    .attr("width", this.width + this.margin.left + this.margin.right)
    .attr("height", this.height + this.margin.top + this.margin.bottom)
    .append("g")
    .attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")")
    .call(this.zoom)
    .on("mouseover", function () {
        console.log("on mouseover");
        self.div.style("background", "lightyellow");
    })
    .on("mouseout", function () {
        console.log("on mouseout");
        self.div.style("background", null);
    })
    .on("mousemove", function () {
        console.log("on mousemove");
        if (editDim)
        {
            d3.event.stopPropagation();
            self.update();
        }
    })
    .on("mousedown", function () {
        console.log("on mousedown");
        self.mousedown = true;
        if (editDim)
        {
            d3.event.stopPropagation();
            self.update();
        }
    })
    .on("mouseup", function () {
        console.log("on mouseup");
        self.mousedown = false;
    }); 
```

我正在使用 D3.behavior.zoom 方法 - 也许它与一个 DOM 元素相关联，该元素大于我的“鼠标上...”事件关联的 DOM 元素？如果是这样，我如何让两组事件覆盖相同的屏幕范围并互斥执行（再次，由“editDim”复选框选择）。当我将与“on mouse...”事件关联的 DOM 元素更改为“svg”上方的“div”元素时，我不再收到 mousedown 事件。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:51:30.767

您将事件附加到`g`元素，而不是`svg`，

我将代码更改为以下内容，以附加到 svg：

```
this.div = d3.select(this.anchor).append("div");
    var SVG = this.div.append("svg")
        .datum(this.data[this.select].values)
        .attr("width", this.width + this.margin.left + this.margin.right)
        .attr("height", this.height + this.margin.top + this.margin.bottom);
    this.svg=SVG
        .append("g")
        .attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")")
        .call(this.zoom);
     SVG.on("mouseover", function () {//........ 
```

[演示](http://jsfiddle.net/oceog/PB6aK/2/)

# iphone - 自动布局（约束）在父视图中居中 2 并排视图

> ID：14741713
> 
> 赞同：69
> 
> 时间：2013-02-07T00:48:23.267
> 
> 标签：iphone, ios, constraints, autolayout

我试图弄清楚如何使用自动布局（iOS6）和约束来做到这一点。

基本上，我的大视图在底部分为两个部分。在这些部分（当前为子视图）中，我有一个图像视图和一个标签。我想用可变长度的文本将它们放在两边的中心。

我的头主要是围绕自动布局，但我不确定最好的方法。我倾向于认为这在 IB 中是不可能的，但在代码中是不可能的。

将继续尝试解决这个问题，但与此同时，这是我正在尝试创建的示例。

![在此处输入图像描述](../Images/ebff4f7960a4d1d422a37aab1326cab8.png)

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-07T15:32:33.950

这就是你所追求的吗？

![短标签](../Images/e6639a4eef2dda90731a9ec9b98615a8.png) ![长标签](../Images/aa5f596a25b42a8da68724fd6946019f.png)

我通过`viewCenteredInLeftSection`在您的 中添加一个视图（名为 ）`leftSection`，然后将时钟图像和标签添加为具有这些约束的子视图来做到这一点：

*   使`viewCenteredInLeftSection`的 CenterX 和 CenterY 等于其父视图的 ( `leftSection`)。
*   使`clockImage`的顶部、底部和前缘等于其父视图的 ( `viewCenteredInLeftSection`)。
*   使`label`的后沿等于其父视图的 ( `viewCenteredInLeftSection`)。
*   将`clockImage`'s Trailing edge 设为距 'sleading edge 的标准距离`label`。

![viewCenteredInLeftSection](../Images/e2ce1154252d8cf05a3499157f1dfcff.png)

我在 Interface Builder 中调整 iOS UIViews 的大小时遇到​​了麻烦，所以我为 OS X 制作了我的示例，并且我能够完全在 Interface Builder 中这样做。如果您在 Interface Builder 中制作上述约束时遇到问题，请告诉我，我将发布创建它们的代码。

**2014-08-26 编辑**

[Luda](https://stackoverflow.com/users/1341180/luda)，这里是 Xcode 5 的 Pin 和 Align 菜单，也可以在 Xcode 的菜单栏中找到：

![对齐菜单](../Images/60e28a19007f111d322c1ad32031988d.png) ![固定菜单](../Images/d3440274016143054937db646e98fada.png)

下面是我的示例在 Interface Builder 中的样子。蓝色视图是原始问题的“父视图”，即图像和标签应居中的给定视图。

我将绿色视图（我命名为`viewCenteredInLeftSection`）添加为“父视图”的子视图。然后我突出显示它并使用对齐菜单“容器中的水平中心”和“容器中的垂直中心”来创建约束来定义其位置。

我将时钟图像添加为 的子视图`viewCenteredInLeftSection`，并带有定义其宽度和高度的约束。我突出显示了时钟图像`viewCenteredInLeftSection`，然后使用 Align > Leading Edges、Align > Top Edges 和 Align > Bottom Edges 应用约束。

我将标签添加为 的子视图`viewCenteredInLeftSection`，将其定位为距时钟图像的[标准 Aqua 空间距离。](https://stackoverflow.com/questions/14055900/what-constant-can-i-use-for-the-default-aqua-space-in-autolayout)我突出显示了标签`viewCenteredInLeftSection`，然后使用对齐 > 后沿应用了约束。

与 Xcode 4 相比，使用 Xcode 5的Interface Builder*更*容易创建。

![界面生成器](../Images/7253c34c81064697597f844b4dd54810.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-08T01:11:17.810

我想出了一个不添加另一个视图的方法：

```
 [aView addConstraint:[NSLayoutConstraint constraintWithItem:viewOnLeft attribute:NSLayoutAttributeRight relatedBy:NSLayoutRelationLessThanOrEqual toItem:aView attribute:NSLayoutAttributeCenterX multiplier:1 constant:0]];
 [aView addConstraint:[NSLayoutConstraint constraintWithItem:viewOnRight attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationLessThanOrEqual toItem:aView attribute:NSLayoutAttributeCenterX multiplier:1 constant:0]]; 
```

您还可以更改常量以在视图之间创建间隙。

*   左视图约束常数：`-X`
*   右视图约束常数：`+X`

![居中子视图](../Images/992dbba48eea29d8018cbf6c54d6afc6.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-02T04:19:06.843

斯坦福大学关于 ios 7 的讲座中考虑了一个解决方案。它工作得很好。附上这个解决方案。（这里 sdfssfg... 东西是 label1 和 efsdfg.... 东西是 label2）

![在此处输入图像描述](../Images/7c4e10e414b8c53de7a58d68fda66b9c.png)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-07T18:41:01.590

我花了一点时间，但我想出了一个非常可靠的解决方案。我想出了 John Sauer 提供的相同解决方案，但不想添加另一个视图来包装它们。

答案需要三个步骤。

1) 包含其他两个的子视图的宽度，我称之为`leftInfoSection`，需要由它的内容来确定。这消除了它对超级视图（或其他视图）具有左右约束以确定其宽度的需要。这是一个真正的关键，其中很多东西是让孩子定义宽度。

![在此处输入图像描述](../Images/5fa44e5383a8084be48fb6d7dfe3a29a.png)

2）我仍然必须在 IB 中有一个领先的约束，它才能有一个有效的布局。（它需要知道`leftInfoSection`水平放置的位置）。将该约束连接到您的代码中，以便您可以删除它。除此之外，我还有一个尾随约束 GTE 垂直分隔线 + 3。

3）最后一个关键是考虑你必须使用哪些信息（在代码中，因为 IB 是有限的）。我意识到我知道我的部分上方水平分隔线的中心，并且我的中心`leftInfoSection`将是该水平条的中心减去水平条宽度的 1/4。这是左侧和右侧的最终代码：

```
// remove the unwanted constraint to the right side of the thumbnail
[self.questionBox removeConstraint:self.leftInfoViewLeadingConstraint];
// calculate the center of the leftInfoView
CGFloat left = self.horizontalDividerImageView.frame.size.width/4 * -1;
// constrain the center of the leftInfoView to the horizontal bar center minus a quarter of it to center things
[self.questionBox addConstraint:[NSLayoutConstraint constraintWithItem:self.leftInfoView attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.horizontalDividerImageView attribute:NSLayoutAttributeCenterX multiplier:1 constant:left]];

// remove the unwanted constraint to the right side of the questionBox
[self.questionBox removeConstraint:self.rightInfoViewTrailingConstraint];
// calculate the center of the rightInfoView
CGFloat right = left * -1;
// constrain the center of the rightInfoView to the horizontal bar center plus a quarter of it to center things
[self.questionBox addConstraint:[NSLayoutConstraint constraintWithItem:self.rightInfoView attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.horizontalDividerImageView attribute:NSLayoutAttributeCenterX multiplier:1 constant:right]]; 
```

**结果：** ![最后结果](../Images/b408b8ec986ce336e35670685b36dd05.png)

此外，IB 对它如何自动更新约束可能非常烦人。当我试图将子视图上的前导和尾随约束定义为 0 时，它会不断断开一个或另一个并对父视图进行约束以定义宽度。诀窍是暂时保留不需要的约束，但将其优先级降低到 999。然后我能够创建子视图约束来定义宽度。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-11-16T07:38:15.977

这很好用，但需要 2 个间隔 UIView：

```
UIView *spacer1 = [[UIView alloc] init];
spacer1.translatesAutoresizingMaskIntoConstraints = NO;
[self.view addSubview:spacer1];

UIView *spacer2 = [[UIView alloc] init];
spacer2.translatesAutoresizingMaskIntoConstraints = NO;
[self.view addSubview:spacer2];

NSDictionary *views = NSDictionaryOfVariableBindings(spacer1, spacer2, imageView, label);

[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[spacer1(>=0)][imageView]-4-[label][spacer2(==spacer1)]|" options:0 metrics:nil views:views];

for (int i = 0; i < constraintsArray.count; i++) {

    [self.view addConstraint:constraintsArray[i]];
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-23T19:31:20.203

在 iOS 9 之后，实现此目的的另一个选择是使用[Stack Views](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStackView_Class_Reference/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-09T14:06:59.997

有几种方法可以做到这一点。基本来说，这里是如何将 1..n 个项目居中，假设所有项目的大小都受到限制并且不会*增长*。

1.  在物品的每一侧放置 2 个垫片。将垫片锚定到父边。将您的第一个和最后一个项目锚定到锚点上。最后，指定 1 个垫片具有另一个垫片的宽度。您不需要显式设置任何垫片大小，因为它将被*解决*。

    *   spacer1 -> left=parent:left width=spacer2:width
    *   spacer2 -> 右=父：右
    *   yourFirstItem -> left=spacer1:right
    *   yourLastItem -> 右=spacer2:left
2.  如果垫片不是您的东西，并且您和您有奇数个项目，则将中间一个放在父项的中心。此外，请确保第一个和最后一个项目没有锚定到父边缘。

    *   yourMiddleItem = centerX=parent:centerX
    *   otherItems->yourMiddleItem<-otherItems
3.  如果垫片不是您的东西，并且您有偶数个项目，则将 2 个内部项目的边缘居中到父项的中心。此外，请确保第一个和最后一个项目没有锚定到父边缘。

    *   leftMiddleItem -> right=parent:centerX
    *   rightMiddleItem -> left=parent:centerX
    *   otherItems->leftMiddleItem rightMiddleItem<-otherItems
4.  你也可以在中心放置一个不可见的占位符，并锚定到该位置，但是在约束时你仍然需要考虑奇数/偶数的项目，所以我不推荐这种方法。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-25T14:50:28.020

你可能想参考这个

[基于百分比的标记](http://simblestudios.com/blog/development/percentage-width-in-autolayout.html)

基本上，它说首先使用一些不正确的边距，然后将其更正到其父视图。

处理我的情况。

# python - 在 Python 中使用 filter 和 reduce 计算出现次数

> ID：14741715
> 
> 赞同：-2
> 
> 时间：2013-02-07T00:48:31.937
> 
> 标签：python, filter, reduce

```
c=["pink", "purple", "black", "yellow", "purple", "indego", "white", "peach"]
import random
import collections
def apply(T):
    i = random.randint(0, 7)
    return c[i]
for x in range(1, 50):
    for ch in map(apply, c):
        print(ch) 
```

我试图弄清楚如何仅使用 filter 和 reduce 函数来计算每个数字的出现次数。

有人能指出我正确的方向吗？

编辑：为了澄清，我想计算生成某种类型的随机数的次数，而不是列表中的那个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:03:12.740

首先，你的`apply`函数忽略了它的参数，这对于你正在给予的东西来说从来都不是一个好兆头`map`。我将假设您正在尝试生成一个随机颜色列表，称为`colors`，然后计算它；你同样可以用发电机代替它。

Filter、reduce 等是函数式编程概念，通常通过 Python 中的列表推导或生成器更好地处理。这是我的做法：

```
c = ["pink", "purple", "black", "yellow", "purple", "indego", "white", "peach"]

import random
colors = [c[random.randrange(len(c))] for _ in range(50)]

# now, to count

# (a) the way you'd actually do it in practice:
from collections import Counter
counts = Counter(colors)

# (b) the way you'd actually do it without the collections module
counts = {}
for x in colors:
    if x not in counts:
        counts[x] = 0
    counts[x] += 1

# (c) doing it with reduce...technically.
def add_to_counter(counter, el):
    counter[el] += 1  # can't actually do this in a lambda...
counts = reduce(add_to_counter, colors, Counter()) 
```

您也可以做类似于 (c) 的事情，但不只是使用 Counter 类，方法是维护一个元素列表及其计数，并在 reduce 函数中添加它们，但这只是同一件事的效率较低且更麻烦的版本.

既然你说你*必须*使用过滤器和减少，我假设这是一个家庭作业。这很愚蠢，因为这些绝对是解决这个问题的错误工具。但这是一种使用过滤器和减少（以及映射）来解决这个问题的非常低效且不可读的方法，这可能就像您的讲师正在寻找的那样：

```
from functools import partial
import operator
counts = {}
for x in c:
    counts[x] = reduce(operator.add,
                       map(lambda _: 1, filter(partial(operator.eq, x), colors)),
                       0) 
```

这很可怕，因为：

*   弄清楚发生了什么需要付出很多努力，而不是上面（a）和（b）的显而易见性。
*   您应该*始终*在 Python 中使用`sum`，而不是`reduce(operator.add, ...)`.
*   所以， `counts[x] = sum(1 for el in colors if el == x)`是相同的（坏的）算法，但可读性提高了一百万倍，启动时间短得多。
*   即便如此，`reduce`/`sum`和`map`可以只被调用替换`len(filter(...))`（假设 Python 2；在三个中，`filter`返回一个迭代器，所以你必须这样做`len(list(filter(...)))`，这是浪费的）。
*   它为每种颜色传递`colors`一次完整列表，而不仅仅是一次。这使得在您不知道可能结果的完整列表的情况下无法使用，并且在所有情况下效率都低得多。

有人可以声称的唯一可能的“优势”是它对任何未出现的颜色都包含 0 计数。当然，这对于任何其他解决方案也是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T19:53:13.687

@杜格尔

下面可以很好地使用 reduce 和 lambda 来计算列表：

```
 c = ["pink", "purple", "black", "yellow", "purple", "indego", "white", "peach", "test"]
    print reduce(lambda x, y: x + 1, c, 0) 
```

注意 reduce() 的最后一个参数是 0。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T01:29:30.387

我认为这将是最简单的解决方案。它不使用过滤器左右，但它似乎很聪明的解决方案

```
counts = [(colors.count(x), x) for x in set(colors)] 
```

您还可以制作字典，而不是元组列表...取决于您使用的 python 解释器版本。

# jquery - 如果您快速将鼠标悬停在 Metro JS (Jquery) 上，则闪烁错误

> ID：14741719
> 
> 赞同：0
> 
> 时间：2013-02-07T00:48:55.783
> 
> 标签：jquery, css, metro.js

我正在使用 Metro JS（[http://www.drewgreenwell.com/projects/metrojs](http://www.drewgreenwell.com/projects/metrojs)）创建一个 Jquery 翻转墙，如果我以“正常”速度悬停瓷砖，一切正常，如果我将瓷砖悬停得更快在完成翻转之前出现闪烁正面图像的小错误。

这是难以用语言解释的问题之一，但让我再试一次。

Metro JS 在 HoverIn 上“翻转” div，如果用户 HoverOut，则将 Tile 再次翻转回来。如果您将鼠标快速移动到图块上，脚本将图块翻转到背面，然后在再次翻转之前闪烁正面图像。我尝试更改 ZIndex 值，使用 Css 不透明度技巧以及我能想象到的一切，但我无法删除此图像闪存。

我与 Metro JS 开发人员 (Drew Greenwell) 进行了交谈，他总是回答用户问题的好人，但我知道他不能一直帮助每个人，所以我上传了我的代码，让你们重现错误，也许可以帮助我接着就，随即。

链接： [http ://www.drewgreenwell.com/projects/metrojs#liveTileBasicExample](http://www.drewgreenwell.com/projects/metrojs#liveTileBasicExample)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:11:11.447

该问题似乎是由于 mouseout 超时触发太快而无法应用 css 重置（基本上是在翻转可以完全完成之前）。我更新了我网站上的代码，并计划很快发布包含此修复程序的 0.9b 版。感谢您引起我的注意！德鲁

# ios - NSMutableArray 属性在 TableViewController 中自动重置

> ID：14741721
> 
> 赞同：1
> 
> 时间：2013-02-07T00:49:09.063
> 
> 标签：ios, objective-c, nsmutablearray, uitableview, nsnotificationcenter

我目前正在尝试从 NSNotification 更新 TableViewController 上的 NSMutableArray 属性，但遇到问题。

我在 Observer 类 .h 文件中声明了我的属性，如下所示：

```
@property (nonatomic,strong) NSMutableArray *cart; 
```

在 Observer 类 .m 文件中合成：

```
@synthesize cart = _cart; 
```

我在观察者类的 AwakeFromNib 方法中收到通知：

```
- (void)awakeFromNib{

if (!self.cart){
    NSLog(@"self.cart == nil");
    self.cart = [[NSMutableArray alloc] init];
}else{
    NSLog(@"self.cart != nil");
}

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(addCurrentItemToCartFromNotification:) name:@"ItemAddedToCart" object:nil];
} 
```

请注意，在收到通知之前，我正在上述 AwakeFromNib 方法中执行我的 NSMutableArray 属性的 alloc init。

这是在收到通知时调用的方法：

```
- (void)addCurrentItemToCartFromNotification:(NSNotification *)notification{

 NSDictionary *currentItem = [notification.userInfo objectForKey:@"CART_ITEM_INFORMATION"];

[self.cart addObject:currentItem];
[self.tableView reloadData];

} 
```

然后，我拥有基于我的 NSMutableArray 属性的 tableview 数据源方法，该属性在通知中的上述方法中更新。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [self.cart count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"itemInCart";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

// Configure the cell...
NSDictionary *cartItem = [self.cart objectAtIndex:indexPath.row];
cell.textLabel.text = [cartItem objectForKey:@"ITEM_NAME"];

return cell;
} 
```

我对程序的预期行为是在收到通知时更新我的​​ NSMutable 数组属性（由于 if (!self.cart) 条件，alloc init 应该只在第一次发生）

但是发生的事情是每次我收到通知时，都会删除 NSMutableArray 中的对象并添加新对象而不是附加对象。因此，在任何时间点，NSMutableArray 只包含最近一次通知接收到的对象。

我认为 alloc init 每次都发生，而不是第一次发生。

你能告诉我我在这里缺少什么吗？我非常感谢您在这个问题上的投入。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:01:17.147

每次添加条目时都会记录“self.cart == nil”这一事实意味着每次添加条目时都会调用 awakeFromNib，这反过来意味着您正在创建 Observer 类的新实例每一次。所以这就是问题所在，而不是您帖子中的任何代码。为了解决这个问题，我们需要知道你是如何创建这个类的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:10:09.997

不知道为什么您会看到该数组被重新分配（如果这是发生的事情），但这无论如何都需要一种不同的模式：我会通过替换合成的 setter 来懒惰地初始化您的购物车属性......

```
- (NSArray *)cart {
    if (!_cart) {
        _cart = [NSMutableArray array];
    }
    return _cart;
} 
```

删除 awakeFromNib 中的购物车内容，并始终引用 self.cart（init 和 dealloc 除外）。

# c++ - 寻找使用套接字将相同数据发送到多个目的地的最佳方法

> ID：14741725
> 
> 赞同：0
> 
> 时间：2013-02-07T00:49:21.127
> 
> 标签：c++, multithreading, sockets, queue

寻找使用 TCP/IP 套接字将相同消息发送到多个目的地的最佳方法。我正在使用 Windows 上现有的 VS 2010 C++ 应用程序。希望尽可能使用已经解决了许多复杂性的标准库/设计模式方法。

这是我正在考虑的一种方法。一个主线程从数据库中检索消息并将它们添加到某种线程安全队列中。应用程序还为每个客户端套接字连接到某个目标服务器有一个线程。这些线程中的每一个都将从线程安全队列中读取，并通过 tcp/ip 套接字发送消息。不过，可能有比这更好/更简单/更强大的方法..

我必须关心的主要问题是延迟。目的地可能在任何地方，并且一个套接字连接和另一个套接字连接之间可能存在显着延迟。消息必须以精确的 FIFO 顺序到达所有目的地。

一个目的地也将被视为主要目的地。所有消息都必须到达该目的地，没有例外。对于其他目的地，即非主要目的地，消息只是副本，如果非主要目的地没有收到少量消息，这不是绝对关键的。在任何时候，非主要目的地之一都可能成为主要目的地。如果其中一个目的地远远落后，那么该线程将需要赶上主要目的地，但会跳过一些消息。

寻找任何建议。到目前为止的初步研究，我的情况似乎类似于单生产者和多消费者模式，或者可能是 Java 中的主从模式。

我需要在 Windows 上用 C++ 实现这一点，并且应用程序必须使用现有定义的协议使用 tcp/ip 套接字。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:45:15.640

您恰好需要两个线程，一个使 IO 通道饱和到数据库，另一个使 IO 通道饱和到通向 12 个服务器的网络。除非您有多个网络接口（您应该考虑一下！），否则您不会通过使用多个线程来更快地发送内容。此外，由于您没有多个线程来处理网络，因此您不必同步它们。

你肯定需要知道的是 select()。对于 WinSock，还请查看 WSAEventSelect/WaitForMultipleObjects。基本上，您从队列中获取一条消息，然后在它们准备好时将其发送给所有客户端。select() 告诉您一组套接字中的一个何时准备好接受数据，因此您不会浪费时间等待或阻止尝试发送数据。您需要想出的是在连接断开后重新连接的架构，何时将消息发送到滞后的客户端等。此外，如果不同目标的吞吐量变化很大，您需要考虑并行处理多条消息。如果它们很小（小于网络数据包的有效负载），无论如何将它们组合起来以避免开销是有意义的。

我希望这个简短的概述可以帮助您入门，否则我可以详细说明细节。

# java - 找不到 JAX-WS 架构 http://jax-ws.dev.java.net/spring/servlet.xsd

> ID：14741729
> 
> 赞同：3
> 
> 时间：2013-02-07T00:50:04.753
> 
> 标签：java, web-services, spring, jax-ws

我正在使用 Spring 框架实现 JAX-WS。

以下是我的 Spring applicationContext.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:ws="http://jax-ws.dev.java.net/spring/core"
xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://jax-ws.dev.java.net/spring/core
    http://jax-ws.dev.java.net/spring/core.xsd
    http://jax-ws.dev.java.net/spring/servlet
    http://jax-ws.dev.java.net/spring/servlet.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    "> 
```

然而，Eclipse 抱怨：

> 引用的文件包含错误 ( [http://jax-ws.dev.java.net/spring/servlet.xsd](http://jax-ws.dev.java.net/spring/servlet.xsd) )。

查了一下，发现这个网址：http: [//jax-ws.dev.java.net/spring/servlet.xsd](http://jax-ws.dev.java.net/spring/servlet.xsd) 不存在。相反，它似乎移至：http: [//jax-ws.java.net/spring/servlet.xsd](http://jax-ws.java.net/spring/servlet.xsd) （您可以在浏览器中打开此链接）

因此，我将 XSD 架构 URL 从 [http://jax-ws.dev.java.net/spring/servlet.xsd](http://jax-ws.dev.java.net/spring/servlet.xsd)更新 为 [http://jax-ws.java.net/spring/servlet.xsd](http://jax-ws.java.net/spring/servlet.xsd)

现在我的 applicationContext.xml 看起来像这样：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:ws="http://jax-ws.dev.java.net/spring/core"
xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://jax-ws.dev.java.net/spring/core
    http://jax-ws.java.net/spring/core.xsd
    http://jax-ws.dev.java.net/spring/servlet
    http://jax-ws.java.net/spring/servlet.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    "> 
```

实际上，随着这种变化，Eclipse 错误消失了。问题是在 Tomcat 7 中启动 Web 服务后，我收到以下运行时错误：

> org.xml.sax.SAXParseException；行号：20；列号：29；schema_reference.4：未能读取架构文档' [http://jax-ws.java.net/spring/servlet.xsd](http://jax-ws.java.net/spring/servlet.xsd) '，因为1）找不到文档；2) 文件无法读取；3) 文档的根元素不是 . 在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198) 在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(ErrorHandlerWrapper.java:99)在 com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:433)

请指教。

非常感谢你。问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:23:11.033

您的问题是您将位置从[http://jax-ws.dev.java.net/spring/servlet.xsd](http://jax-ws.dev.java.net/spring/servlet.xsd)更改为[http://jax-ws.java.net/spring/servlet.xsd](http://jax-ws.java.net/spring/servlet.xsd)。尽管后一个是正确的 url，但它与 jaxws-spring.jar META-INF/spring.schema 文件中定义的内容不匹配。该文件应具有以下内容

```
http\://jax-ws.dev.java.net/spring/core.xsd=spring-jax-ws-core.xsd
http\://jax-ws.dev.java.net/spring/servlet.xsd=spring-jax-ws-servlet.xsd
http\://jax-ws.dev.java.net/spring/local-transport.xsd=spring-jax-ws-local-transport.xsd 
```

Spring 使用此映射来搜索类路径中的模式而不是互联网。这些模式文件位于 jaxws-spring.jar 文件的根目录。

请看一下[注册处理程序和架构](http://static.springsource.org/spring/docs/3.0.5.RELEASE/spring-framework-reference/html/extensible-xml.html#extensible-xml-registration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T14:18:36.017

你在你的项目中使用 spring 吗？，我有同样的问题，但是当我在我的 maven 依赖项中包含 spring-jaxws 时，问题解决了，事实上，你可以在那个 jar 中看到 META-INF/spring.schemas 文件是重新定义 XSD 位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-07T08:00:42.030

资源已移动，最终配置应为：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans        
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
        http://jax-ws.dev.java.net/spring/core 
        http://jax-ws.java.net/spring/core.xsd
        http://jax-ws.dev.java.net/spring/servlet 
        http://jax-ws.java.net/spring/servlet.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd"
        default-lazy-init="true"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:08:49.820

可能不是你的情况。但是在这种情况下，请清理并重新构建。如果两个 jar 退出，原因是旧的 spring jar 和 xsd 从那里取出。希望对其他人有所帮助....一般来说，由于多种原因会引发此异常。

# java - BufferedReader.readLine 不工作

> ID：14741733
> 
> 赞同：1
> 
> 时间：2013-02-07T00:50:18.603
> 
> 标签：java

我的程序在 readLine 调用后卡住了，if 语句不起作用。我究竟做错了什么？#java-first-timer

```
import java.io.InputStreamReader;
import java.io.BufferedReader;
import java.io.IOException;

public class nums {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));               
        System.out.println("Number Mania!!!");
        System.out.println("Pick your favourite number from 1 to 5");
        String favNum = br.readLine();
        if (favNum=="3"){
            System.out.println("Your favourite number is three!");
        }
        else{
            System.out.println("hi!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T00:51:27.547

使用`favNum.equals("3")`而不是`favNum == "3"`. 您几乎不应该使用`==`来比较对象；改为使用`.equals`。（有一些罕见的例外，但在您学习更多 Java 之前，您无需担心它们。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:02:57.110

用于比较字符串...实际上，您应该使用比较器进行字符串比较的`favNum.equals("3")`情况很少。`==`

作为第二个建议，您应该考虑开始使用`java.util.Scanner`该类。你的代码可能是这样的：

```
import java.util.Scanner;

public class nums {
    public static void main(String[] args) {
        Scanner scann = new Scanner(System.in);               
        System.out.println("Number Mania!!!");
        System.out.println("Pick your favourite number from 1 to 5");
        int favNum = scann.nextInt();
        if (favNum == 3){
            System.out.println("Your favourite number is three!");
        }
        else{
            System.out.println("hi!");
        }
    }
} 
```

希望我能帮上忙。

# php - WAMP 2.2 mysqli_connect 找不到本地主机

> ID：14741745
> 
> 赞同：0
> 
> 时间：2013-02-07T00:51:22.883
> 
> 标签：php, mysql, windows, mysqli, wamp

```
Warning: mysqli_connect(): php_network_getaddresses: getaddrinfo failed: No such host is known. in E:\www\auth\includes\class.db.php on line 16 
```

这是我尝试在 wamp 2.2 上使用 mysqli_connect 时遇到的错误。

php 扩展 php_mysqli 已激活。localhost 工作正常，phpmyadmin 工作正常，mysql 控制台工作正常。我的主机文件看起来很正常。

我试过：define("DB_HOST", "localhost"); 定义（“DB_HOST”，“本地主机：3306”）；定义（“DB_HOST”，“本地主机：80”）；

我检查了 my.ini 并设置为侦听默认端口。

我可以忽略什么？我不熟悉在 Windows 上运行 mysql/php，所以我可能遗漏了一些明显的东西，但这真的让我很头疼。

我唯一做的就是在 httpd.conf 中将我的 document_root 更改为 E:/www/forum 并且我试图将我的 class.db 包含在 e:/www/auth 中，但我没有看到这会导致问题。尝试使用 diff 用户，然后也尝试使用 root，但没有运气。

感谢您的时间 ：）

只有我在 httpd.conf 中修改的部分

```
ServerName localhost:80

<Directory />
    AllowOverride none
    Require all denied
</Directory>

DocumentRoot "e:/www/forum/"

<Directory "e:/www/">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require local
</Directory> 
```

# php - 使用 jQuery/Ajax 提交表单只能每隔一段时间使用一次

> ID：14741746
> 
> 赞同：3
> 
> 时间：2013-02-07T00:51:24.467
> 
> 标签：php, jquery, ajax, forms, yui

我正在尝试提交一个表单，其中包括通过 Ajax/jQuery 上传的文件，通过 PHP 脚本处理表单，并在表单最初所在的 div 中返回结果。

我当前的表单代码是：

```
<section id="content-right">
<form name="uploader" id="uploader" method="POST" enctype="multipart/form-data">
    <input type="hidden" id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="10485760" />
    <input type="file" name="fileselect" id="fileselect" />
    <input type="submit" name="submit" id="submit" value="Upload" />
</form>
</section> 
```

我当前的 Ajax/jQuery 脚本是：

```
<script> 
$(function() {
$('#uploader').submit(function() { 
        $(this).ajaxSubmit({
            type: $(this).attr('method'),
            url: 'upload-song.php',
            success: function(response) {
                $('#content-right').html(response);
                }
            }); 
    return false; 
    });
}); 
```

我的 PHP 脚本是“upload-song.php”（细节无关紧要）。

我还运行 YUI.Pjax 来处理普通导航（a href）链接并将其加载到#content-right（如果用户单击任何内容，我希望它加载到#content-right）。

有了这个设置，通过普通链接导航可以完美运行，所有内容都加载到#content-right，但上传器只能每隔一段时间工作一次。

例如，上传者将在#content-right 中加载upload-song.php 并完美处理所有内容，然后如果我离开页面并尝试上传另一个项目，它将无法正常工作，它只会刷新页面（如果我将 action="upload-song.php" 放在表单标签中，它会将 upload-song.php 作为整页加载，而不是在#content-right 中）。刷新页面后，我可以上传另一个项目，它将完美运行。

我认为这与我如何将我的 Ajax 脚本附加到表单提交有关（因为如果我刷新页面它可以完美地工作），但我对这些语言没有很多经验，所以我不确定如何修复它。

此外，如果我禁用 YUI.Pjax，它会修复上传器，但显然会破坏我的链接，所以我正在寻找解决方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:04:41.697

试试这个：

```
$(document).on("submit", "#uploader", function() ... 
```

此语法将使提交事件冒泡到文档。这样，当`#content_right`部分重新加载时，文档会保留在 DOM 就绪函数中设置的事件侦听响应。

# objective-c - NSFileProtectionComplete 与核心数据

> ID：14741748
> 
> 赞同：0
> 
> 时间：2013-02-07T00:51:31.583
> 
> 标签：objective-c, ios5, core-data

我希望只有当设备在 iOS5+ 中处于前台时才能访问我的 CoreData 文件。（根据 WWDC 2011 Lecture#208）我已将权利设置为[如何将数据保护类权利添加到我的 iOS 5 应用程序](https://stackoverflow.com/questions/7018129/how-do-i-add-data-protection-class-entitlements-to-my-ios-5-app)中。它仅在设备使用密码锁定时才有效。
iOS 是否提供任何 API 在应用程序进入后台时锁定/加密数据（即使未设置用户密码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:02:48.790

iOS 的数据保护功能使用用户的密码来获取其加密密钥。所以，如果没有密码，就没有数据保护。

如果您确实需要在没有密码的情况下加密用户的数据，则必须自己进行。至关重要的是，这意味着管理您自己的加密密钥。除非您碰巧是加密专家，否则这很可能不如 Apple 的解决方案安全。

您能否解释一下为什么需要按照您所描述的方式对数据进行加密？那么建议替代方案会更容易。

# opencl - 在哪里可以找到用于 openCL 编程的显卡规格？

> ID：14741752
> 
> 赞同：1
> 
> 时间：2013-02-07T00:51:50.133
> 
> 标签：opencl

我想买一张新卡，但我找不到很多关于卡的信息。我正在搜索 - 私有内存大小 - 本地内存大小 - 常量内存大小 - 纹理内存大小

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T21:52:31.983

你可能更幸运地研究卡牌的架构，而不是研究特定的卡牌。通常，特定一代的显卡在芯片上具有不同数量的相同硬件功能。例如，一个核心的架构在一系列卡中通常是相同的，但一个产品中的核心数量可以是唯一的。

我还建议阅读 AnandTech 显卡评论。他们在对显卡进行基准测试时往往会详细介绍。

# matlab - 具有非数值观察的 Matlab 分类树生成

> ID：14741753
> 
> 赞同：0
> 
> 时间：2013-02-07T00:51:58.337
> 
> 标签：matlab, classification

我正在尝试在 Matlab 中使用`ClassificationTree.fit()`or生成分类树`classregtree()`。我的数据是非数字的，但是我找不到可以从非数字数据生成分类的命令。

所以我的问题是如何从非数字数据生成分类树？

# python - 等待 shutil.copyfile 完成

> ID：14741755
> 
> 赞同：6
> 
> 时间：2013-02-07T00:52:17.610
> 
> 标签：python, shutil, file-copying

我想复制一个文件，然后开始编写新文件：

```
shutil.copyfile("largefile","newlargefile")
nwLrgFile=open("newlargefile",'a')
nwLrgFile.write("hello\n") 
```

但是，当我执行上述操作时，`hello`会在文件末尾之前写入。确保完成复制文件的正确方法是什么？

我查看了 SO 和其他地方，但我看到的所有答案都说 shutil.copyfile 阻塞或锁定，这应该不是问题。然而，确实如此。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:55:39.577

尝试`copyfileobj`直接使用：

```
with open('largefile', 'r') as f1, open('newlargefile', 'w') as f2:
    shutil.copyfileobj(f1, f2)
    f2.write('hello') 
```

# c++ - 将两个字符的字符串变量转换为十六进制

> ID：14741759
> 
> 赞同：0
> 
> 时间：2013-02-07T00:53:41.617
> 
> 标签：c++, string, c++11, hex, typeconverter

我有代码，用户将两个字符输入到`string`变量中。我有一个函数可以验证用户输入是否只有两个字符长，并且它只包含有效的十六进制数字。

我想将这些数字写入一个 32 字节长的二进制文件。我试过：

```
 outFile.write((char*)&string[0], 1); 
```

在一个运行 32 次的循环中（我想一次写入一个字节）进行测试，但它只是为 char 编写 ascii 代码，而不是实际的 char 本身。我希望它写一个 nybble 并跳过一个 nybble，但它写了一个完整的 ascii 信息字节。所以我尝试了：

```
 outFile.write((unsigned char*)&string[0], 1); 
```

但是我的编译器抱怨它是一个无效的演员表。

我想在不将字符串转换为 c 样式字符串的情况下解决这个问题。换句话说，我想`string`包含两个字符并代表一个字节的信息。不是四个（加上空字符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:11:27.187

您有一个表示整数的字符串。所以将字符串转换为整数：

```
unsigned char byte = (unsigned char)std::stoi(string, 0, 16);
outFile:write(static_cast<const char*>(&byte), 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:01:54.480

作为缺少 stoi 的解决方法，您可以执行以下操作：

```
#include <iostream>
#include <sstream>
#include <ios>

char hexnum[]{"2F"}; // or whatever, upper or lowercase hex digits allowed.
std::istringstream input(hexnum);
int num=0;
input >> std::hex >> num;
unsigned char byte = num;
outFile.write(static_cast<const char*>(&byte), 1); 
```

# javascript - MongoDB 在 Mac OS X 上无法连接到 127.0.0.1

> ID：14741761
> 
> 赞同：4
> 
> 时间：2013-02-07T00:53:56.890
> 
> 标签：javascript, macos, mongodb

我有一台运行 10.8.2 的 Mac，并且刚刚安装了运行该`brew install mongodb`命令的 mongodb。一切似乎都安装正确。但是，当我运行`mongo`进入 shell 时，出现以下错误：

```
Alexander-Burgos-Collazos-MacBook:~ Alexander$ mongo
MongoDB shell version: 2.2.3
connecting to: test
Wed Feb  6 19:44:59 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

我在这里关注了一些线程，但从未得到关于如何修复它的清晰简洁的答案。我`mongod`在命令终端输入并返回：

```
all output going to: /usr/local/var/log/mongodb/mongo.log 
```

从那里开始，我输入的所有内容都不会返回任何内容。我对这到底是如何工作的感到困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T01:26:21.430

可能是mongod没有启动。

对于开始手动使用命令：

```
/usr/local/opt/mongodb/mongod run --config /usr/local/etc/mongod.conf 
```

但是 brew 有一个 lanchctl plist。您可以在登录时运行此命令并启动 mongodb：

```
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist 
```

有关 brew 版本 mongodb 的更多信息：

```
brew info mongodb 
```

有关 mongod 的更多信息，您可以在[手册](http://docs.mongodb.org/manual/reference/mongod/#mongod)中阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T10:34:00.753

最新版本的 Brew 支持

`brew services start mongodb`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:24:47.677

我的 mongo 安装已损坏，卸载 mongo 并重新安装对我有用，以下过程可能会有所帮助

从 /usr/local/Cellar 中删除 mongodb 从 /usr/local/etc 中删除 mongod.conf 文件 从 /usr/local/var 中删除 mongodb 数据

验证不应该有数据库存在于：/usr/local/etc 使用命令：cd /d 验证不应该运行进程：ps aux | grep 蒙戈

重新安装 mongo： [http ://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)

# math - SHA(-1-2-3) 是一对一的函数，输入的长度与输出的长度相同吗？

> ID：14741762
> 
> 赞同：3
> 
> 时间：2013-02-07T00:54:08.067
> 
> 标签：math, hash, cryptography, sha

SHA(-1-2-3) 是一对一的函数，输入的长度与输出的长度相同吗？

将问题重述为具体示例：SHA-1 具有 160 字节输出，那么所有 160 字节输入是否都具有唯一的 160 字节输出？SHA-2 和 3 以及所有可用输出大小的答案是否相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:09:24.790

没有人知道，因为没有人以一种或另一种方式证明这一点，或在该范围内测试所有可能的输入。这就是简单的事实。

如果函数的行为真的是随机的，那么由于生日悖论，答案几乎肯定是“否”——平均而言，对于 160 位输出，您需要测试 2^80 个输入以找到任何对之间的冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T01:02:09.330

简短回答：虽然没有确凿的、明确的答案，但我认为*更安全*的选择（到目前为止，如果您将问题扩展到涵盖*所有*SHA 系列功能）是说“**不**”。让我们更数学*一点。*

让我们挑选并检查其中一个 SHA 系列函数。假设它返回一个*n*位输出，并且表现得像一个“随机预言机”（它没有，但假设它），这意味着它将为任何输入返回一个随机*n*位值，并具有始终返回相同输出的限制对于相同的输入。

有了这些假设，任何两个不相同的输入字符串的冲突概率应该是 2^(-n)。由于生日悖论，您会期望在大约 2^(n/2) 个不同的输入后发现碰撞。

*因此，由于生日悖论，我们的函数在散列n*位输入并生成*n*位输出时是一对一的机会并不好。

*最终，最终*回答您的问题的唯一方法是使用每个可能的*n*位 SHA 函数尝试所有可能的*n*位输入。不要指望在你的一生中得到一个明确的答案......

# c++ - 使用文件指针的 C++ 位移位

> ID：14741764
> 
> 赞同：2
> 
> 时间：2013-02-07T00:54:11.497
> 
> 标签：c++, hex, bit-manipulation, operator-keyword, shift

我正在阅读别人的代码，但不太明白它是如何工作的。这是三行代码。我想知道 w3 的值是多少：

```
int w1 = fgetc(fp) & 0xFF;
int w2 = fgetc(fp) & 0xFF;
int w3 = w1 + (w2 << 8); 
```

我知道 fgetc() 从 FILE* fp 返回一个字符，但是当他对值为 0xFF 的字符使用 & 运算符时，我感到很困惑。然后在 w2 上使用按位移位运算符并将其添加到 w1。我不确定我应该期待一个字符还是一个整数。这是一个程序的代码片段，它从文件中读取二进制数据，生成 UV 坐标作为输出。但我不太关心这一点，而更关心上面的代码是如何工作的。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:59:04.133

`& 0xff`确保结果是无符号的。然后，`w1 + (w2 << 8)`从这两个字节中生成一个 16 位整数。实际上，此代码片段正在读取一个小端序的两字节整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:58:14.600

这样`int w1 = fgetc(fp) & 0xFF;`做是将接收到的内容屏蔽`int`为单个字节。（毕竟`fgetc()`返回）`int`

这样`w1 + (w2 << 8);`做是将两个字节组合成一个`int`. 可能试图反序列化以前序列化的整数。（如果字节序是一个问题，这不是最好的方法）

# c# - 使用带有实体框架的动态字段按子记录排序

> ID：14741765
> 
> 赞同：2
> 
> 时间：2013-02-07T00:54:13.423
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, ado.net

我有兴趣使用实体框架对查询进行排序，并且无法使用按表达式的动态顺序进行排序，

我有一个父记录（DatasetRecord），它具有由多个关联值（DatasetValues）组成的一对多关系，如果它与某个字段匹配，我希望能够根据值中存储的数据进行排序，

所以我需要按与提供的 FieldID 匹配的 DatasetValues 的值进行排序

```
public IEnumerable<DatasetRecordDto> FetchData(ModuleSettingsDto settings)
{
    var query = _context.DatasetRecords.AsQueryable().Where(r => r.DatasetId == settings.DatasetId && r.IsDeleted == false);

    foreach (var filter in settings.Filters)
    {
        // this works fine, check we have current field and value matches
        query = query.Where(i => i.DatasetValues.Any(x => x.DatasetFieldId == filter.DatasetFieldId && x.Value == filter.Value));
    }

    foreach (var sort in settings.Sort)
    {
        switch (sort.SortDirection)
        {
            case "asc":
                // THIS IS WHERE I NEED THE DYNAMIC ORDER BY EXPRESSION, 
                // THIS SHOULD SORT BY DATETIME WHERE FIELD ID MATCHES
                query = query.OrderBy(i => i.DatasetValues.Any(x => x.ValueDateTime && x.DatasetFieldId == sort.DatasetFieldId));
                break;
        }

    }

    return ShapeResults(query);
} 
```

这是我的数据库架构：

```
CREATE TABLE [dbo].[DatasetRecords](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [DatasetId] [int] NOT NULL
)

CREATE TABLE [dbo].[DatasetFields](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Label] [varchar](50) NOT NULL,
    [DatasetId] [int] NULL,
    [DataType] [int] NOT NULL
)

CREATE TABLE [dbo].[DatasetValues](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [DatasetRecordId] [int] NOT NULL,
    [DatasetFieldId] [int] NOT NULL,
    [ValueString] [varchar](8000) NULL,
    [ValueInt] [int] NULL,
    [ValueDateTime] [datetime] NULL,
    [ValueDecimal] [decimal](18, 2) NULL,
    [ValueBit] [bit] NULL
) 
```

如果您需要任何进一步的信息，请告诉我，非常感谢任何帮助，

更新：我没有通过表达式创建动态顺序的问题，我正在尝试根据子表中的值对父记录应用条件排序顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:38:21.687

您是否尝试过在 LinqPad 之类的东西上运行 Linq 代码，它可以让您针对数据集运行 Linq 代码并向您显示生成的 SQL。您可以使用该 SQL 并手动运行它，以确保它不是导致错误的无效 SQL。

# ruby-on-rails - 在 Ember 视图中获取结果

> ID：14741766
> 
> 赞同：0
> 
> 时间：2013-02-07T00:54:25.170
> 
> 标签：ruby-on-rails, ember.js

所以花了很长的几天时间让所有 Emberjs 的东西一起玩得很好。我真的很喜欢这段旅程，但有时我开始觉得这样做太老了。

所以我有一个应用程序点击 /#/Records 链接。从他们需要查询Rails，返回结果，然后抓取其他页面的show view。当我把它作为一个单页应用程序，页面上有视图时，我让它工作了....现在过去的 2 天，混乱已经蔓延开来。（视图中的一些额外位等已被删除。

我的 hbs 记录/索引视图文件部分显示：

```
 <table>
    <tr>
      <th>Name</th>
    <tr>
      <td colspan="3">{{counter}}</td>
    </tr>
    </tr>
      {{#each record in controller}}
        <tr>
          <td>{{#linkTo "record" record}} {{record.fullName}} {{/linkTo}}</td>
        </tr>
      {{/each}}
  </table> 
```

我的 Ember 应用程序：

```
App = Ember.Application.create({
    rootElement: '#ember'
});
App.RecordsController = Ember.ArrayController.extend({
});
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.RESTAdapter'
});

App.Record = DS.Model.extend({
    firstName: DS.attr('string'),
    middleName: DS.attr('string'),
    surname: DS.attr('string'),
    suffix: DS.attr('string'),
})
App.Router.map(function(){
    this.resource('records');
    this.resource('record', {path: 'records/:record_id'})
});

App.IndexRoute = Ember.Route.extend({
    redirect: function(){
        this.transitionTo('records')
    }
});
App.RecordsRoute = Ember.Route.extend({
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:45:20.467

修改您的记录路线，如下所示。这个模型钩子为您提供了一种方法来指定控制器如何获取它的内容/模型。现在，当您查看网络选项卡时，您应该会看到一个 ajax 请求，用于从后端获取所有记录（通过 ember-data）

```
App.RecordsRoute = Ember.Route.extend({
    model: function() {                                                                                                                
        return App.Record.find();
    }
}); 
```

# android - 在 Android 上为 HLS 流渲染隐藏式字幕

> ID：14741767
> 
> 赞同：8
> 
> 时间：2013-02-07T00:54:47.017
> 
> 标签：android, http-live-streaming, closed-captions

我正在开发一个流式传输 HLS 视频的原生 Android 应用程序。我正在尝试显示 CEA-608 隐藏式字幕数据，但我遇到了问题。

**方法：** 我在果冻豆设备（API 4.1+）上运行，它支持隐藏式字幕和 HLS 播放（[http://developer.android.com/about/versions/android-4.1.html#Multimedia](http://developer.android.com/about/versions/android-4.1.html#Multimedia)）。

**测试提要：** 我正在使用包含字幕数据的 Apple 示例 HLS bip-bop 提要进行测试（[https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8](https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8)）

**抓取字幕数据：** 根据 Android 文档，我试图通过调用以下方式获取字幕轨道：

`"MediaPlayer.getTrackInfo()"`

**问题：** 当我执行 getTrackInfo() 行时播放器崩溃，LogCat 中的输出如下：

E/AndroidRuntime(7311)：致命异常：主要 E/AndroidRuntime(7311)：java.lang.RuntimeException：失败代码：-38

**问题：** 1) 原生 Android 应用程序是否支持从 HLS 提要上的流内字幕数据呈现隐藏式字幕？2）如果没有，有其他选择吗？3) 上面链接中的文档（下面引用）表明 MP4 或 3GPP 媒体源支持流媒体字幕。这是否一定会排除 HLS（我认为它是基于 MPEG-2）的工作？

> MediaPlayer 现在可以处理带内和带外文本轨道。带内文本轨道作为 MP4 或 3GPP 媒体源中的文本轨道出现。可以通过 addTimedTextSource() 方法将带外文本轨道添加为外部文本源。添加所有外部文本轨道源后，应调用 getTrackInfo() 以获取数据源中所有可用轨道的刷新列表。

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T20:34:46.120

我们进行了完全相同的练习。Android 上的 MediaPlayer 似乎不支持 HLS 中嵌入的 CEA-608。播放媒体播放器 (MP) 时从未调用 OnTimedTextListener。如您所述，在播放 MP 时尝试调用 getTrackInfo() 会导致崩溃。

可能是 Android MP 只能解码 MP4 中包含的 SRT。

替代方案是使用外部定时文本轨道，但在实时流媒体环境中，这将是困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-06T06:00:48.010

这个问题很老了，但有些人仍然可能面临这个问题。

[ExoPlayer](https://github.com/google/ExoPlayer)试图作为一个独立于 Android 版本的通用多媒体库来解决这个问题。

目前支持 CEA-608、SubRip、TTML、TX3g 和 WebVtt 字幕。当然不是全部标准，而是其中有用的一部分。

# git - 提交本身是一个分支吗？- 混帐

> ID：14741768
> 
> 赞同：1
> 
> 时间：2013-02-07T00:55:00.793
> 
> 标签：git, branch, commit

我希望下面的问题不会太笼统。如果没有，请告诉我，这篇文章可能会迁移到其他地方。所以，我在这个非常好的[文档](http://ftp.newartisans.com/pub/git.from.bottom.up.pdf)（第 10 页底部）中读到了提交本身可以被视为一个分支。怎么说呢？提交如何支持分支的整个历史（对于有数学头脑的人来说，提交可以被认为是对某棵树的纤维化（支持所谓的分支的历史））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:13:10.950

我认为对“分支”概念的讨论过于深奥，但这并不是非常重要。

效果是每个提交都代表一个分支，其 HEAD 是该提交，与典型分支的区别在于分支名称（即提交的 SHA-1）是不可变的。hash-as-branch-name 始终指向 hash-as-commit。

用这个命令自己试试看：（`git checkout 2ae907`这里引用的是一些以前的提交）。你会得到这样的文本：

> 注意：签出“2a9e07”。
> 
> 您处于“分离 HEAD”状态。您可以环顾四周，进行实验性更改并提交它们，并且您可以放弃在此状态下所做的任何提交，而不会通过执行另一个签出来影响任何分支。

提交被添加到提交图中，因此每个提交都是包含所有先前历史记录的子图的根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:58:23.957

在 git 中，提交始终包含该树的完整历史记录（通过包含对其父提交的引用）。从这个意义上说，您可以将其视为一个分支。唯一的区别是分支有一个符号名称，因此您不必通过它的哈希来引用它。

# java - JPA 查询实体未映射错误

> ID：14741769
> 
> 赞同：4
> 
> 时间：2013-02-07T00:55:09.543
> 
> 标签：java, jpa, hql, jpql

测试未通过以下代码。调试显示错误在于创建查询。

```
java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Catalog is not mapped [SELECT c FROM Catalog c WHERE c.name = :name]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1347)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1288) 
```

实体类：

```
@Entity
@Table(name = "eb_catalog", uniqueConstraints=@UniqueConstraint(columnNames="name"))
public class Catalog implements ICatalog, Serializable { 
```

和查询本身：

```
TypedQuery<Catalog> query = em.createQuery(
"SELECT c FROM Catalog c WHERE c.name = :name", Catalog.class)
.setParameter("name", catName); 
```

CTRL + 单击目录正在打开实体，因此名称与查询中的实体匹配。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T01:10:05.670

您可能忘记在`persistence.xml`. 看一看 ：）

# python - 如何安排热图 pcolormesh 的数据？

> ID：14741771
> 
> 赞同：3
> 
> 时间：2013-02-07T00:55:20.687
> 
> 标签：python, numpy, matplotlib

我出现的所有示例都使用随机数据。我的问题是安排我的实际数据以适应解决方案。

我正在尝试创建 x、y、z 的热图/散点图：x 和 y 是位置，而 z 是颜色。它们位于三个长度相等的数组中。

```
X = [-0.11, -0.06, -0.07, -0.12, ...]
Y = [0.09, 0.13, 0.17, 0.09, ...]
Z = [0.38, 0.37, 0.44, 0.33, ...] 
```

pcolormesh[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pcolormesh)似乎没有描述什么是“C”，只是说它可以是一个“掩码数组”。可悲的是，我也不知道那是什么（还）。

如何将我的三个数组变成它想要的东西？我尝试将它们粘贴到一个 numpy 数组中并传递它，这消除了关于没有“形状”的错误，但 3 维数组似乎并不是它正在寻找的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T01:15:13.830

`pcolormesh`想要三个二维数组。

你的`X`and`Y`很好，但需要通过 numpy 的`meshgrid`函数运行，即：

```
import numpy as np
X = [-0.11, -0.06, -0.07, -0.12, ...]
Y = [0.09, 0.13, 0.17, 0.09, ...]
xx, yy = np.meshgrid(X, Y) 
```

那么你只需要保持与and`Z`相同的形状，就可以了。`xx``yy`

对于散点图，`X`,`Y`和,`Z`很好：

```
import matplotlib.pyplot as plt
X = [-0.11, -0.06, -0.07, -0.12, ...]
Y = [0.09, 0.13, 0.17, 0.09, ...]
Z = [0.38, 0.37, 0.44, 0.33, ...]
fig, ax = plt.subplots()
ax.scatter(X, Y, c=Z)
plt.show() 
```

# ios - UImenucontroller 在 App Store 中的行为与在开发中的行为不同

> ID：14741776
> 
> 赞同：1
> 
> 时间：2013-02-07T00:56:20.467
> 
> 标签：ios, ipad, uimenucontroller

我的客户报告了一个基本 UIMenuController 的奇怪行为：当应用程序从应用商店或临时安装时，UIMenuController 不会出现！它在模拟器上运行良好，或者直接从 xcode 加载时，但如果我尝试分发完全相同的应用程序并通过应用程序商店或 ipa 文件安装它，菜单不会显示。

这可能是从哪里来的？

我认为它没有帮助，但这是我用来显示菜单控制器的代码：

```
 UIMenuController *menuController;
 NSAssert([self becomeFirstResponder], @"Sorry, UIMenuController will not work with %@ since it cannot become first responder", self);
 UIMenuItem *duplicateItem = [[UIMenuItem alloc] initWithTitle:@"Duplicate" action:@selector(duplicate:)];
 UIMenuItem *deleteItem = [[UIMenuItem alloc] initWithTitle:@"Delete" action:@selector(deleteButton:)];
 UIMenuItem *copyItem = [[UIMenuItem alloc] initWithTitle:@"Copy" action:@selector(copySelected:)];
 [menuController setMenuItems:[NSArray arrayWithObjects:duplicateItem, deleteItem, copyItem, nil]];
 [menuController setArrowDirection:UIMenuControllerArrowDown];
 [menuController setTargetRect:sender.frame inView:contentView];
 [menuController setMenuVisible:YES animated:YES]; 
```

和 ：

```
 - (BOOL) canPerformAction:(SEL)selector withSender:(id) sender
 {
      return [super canPerformAction:selector withSender:sender];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:23:08.507

您的测试和分布式二进制文件之间的区别在于您可能在“调试”中测试您的应用程序，但在“发布”中发布。

NSAssert 可能会从“发布”版本中剥离出来，并且 / 可以 / 改变行为。

# c++ - VS 2010 是否对 malloc 或新内存分配进行边界检查？

> ID：14741780
> 
> 赞同：0
> 
> 时间：2013-02-07T00:57:03.037
> 
> 标签：c++, visual-studio-2010, bounds

使用VS 2010。已经分析了内存泄漏。现在我想知道在执行期间编译的代码是否正在进行边界检查。我有理由确定这发生在用 C++ 创建的向量和数组上；我不知道边界检查是否扩展到通过调用**malloc**或使用**new**关键字创建的对象。如果 VS*不对*这种情况进行边界检查，是否有第三方工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:30:20.283

调试 CRT 堆将在新的内存块周围分配一个“溢出缓冲区”，并在块被释放时检查缓冲区的预期值 (0xFD)。当溢出缓冲区包含与预期不同的值时，您将看到 CRT 运行时检查失败对话框。这将捕获溢出写入但不捕获读取。不幸的是，只要您的进程可以访问正在读取的页面，就没有捕捉越界读取的好方法。

有关详细信息，请参阅[内存管理和调试堆](http://msdn.microsoft.com/en-us/library/bebs9zyz%28v=vs.100%29.aspx)和[_CrtSetDbgFlag](http://msdn.microsoft.com/en-us/library/5at7yxcs%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:30:15.800

数组在 C++ 中默认*不*检查边界，无论它们是静态分配还是动态分配。我曾经在 Visual C++ 中使用[BoundsChecker](http://en.wikipedia.org/wiki/BoundsChecker)。在 Linux 上还有 valgrind，这很好。

# c - 什么是“通用 C”？

> ID：14741782
> 
> 赞同：2
> 
> 时间：2013-02-07T00:57:46.827
> 
> 标签：c

我是一名编程学生，偶尔会遇到以下参考：*Generic C*，这是否意味着只是简单的经典*C*？

“任何严肃软件中常用数据结构的通用 c/c++ 实现”

它通常出现在诸如此类的上下文中；我很确定我只是误读了诸如 (generic c)/c++ 而不是：generic (c/c++) 之类的引用。看起来它可能指的是一组库。感谢你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:10:08.180

> 任何严肃软件中常用数据结构的通用 c/c++ 实现"

在这里，*generic*和*c/c++*只是列在*数据结构实现*前面的不同形容词；可以等效地表示“c/c++ 通用实现...”或“c/c++ 中的通用实现”等。诸如列表和二叉树之类的数据结构通常用于任意数据类型，例如`int`,`double`和用户定义的结构。允许将数据结构代码重用于任意类型的实现称为“通用”实现。

在 C 中，示例是标准库的二进制搜索和快速排序函数，它们在不了解内存内容的情况下接受数据，以及指向要调用的函数的指针以对数据执行有意义的解释。请参阅[http://www.cplusplus.com/reference/cstdlib/qsort/](http://www.cplusplus.com/reference/cstdlib/qsort/)和[http://www.cplusplus.com/reference/cstdlib/bsearch/](http://www.cplusplus.com/reference/cstdlib/bsearch/)

在 C++ 中，模板为通用数据结构提供了更好的支持，标准库托管通用向量、列表、（二叉树关联）映射、双端队列、堆栈、最近称为 unordered_maps 的哈希表等。

# c - 给定一个数字列表，找出输入某个数字的第一次和最后一次

> ID：14741784
> 
> 赞同：0
> 
> 时间：2013-02-07T00:57:58.517
> 
> 标签：c, scanf

我需要创建一个程序，当用户输入整数列表时，找到该数字的第一个和最后一个条目的位置，以及该特定数字出现的次数。

正确的输出应该如下所示：

```
Enter a number to find: 4
Enter a list of numbers (negative to quit): 1 8 4 9 3 4 4 8 2 4 10 3 4 2 4 -1
This list contains 15 numbers.
First occurrence of '4': 3
Last occurrence of '4': 15
Quite a few were found! 
```

我让它工作得很好，除了一件事：因为我每次都使用 scanf 来接收用户输入，而不是将所有数字放在一行上，如下所示：

```
1 8 4 9 3 4 4 8 2 4 10 3 4 2 4 -1 
```

它这样做：

```
1
8
4
9
3
4
4 
```

等等

有没有办法让它*不*与每个条目开始一个新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:00:34.237

是的，如果您`\n`在`printf`格式字符串中使用，它将换行。如果你没有那个角色，它就不会。所以把它拿出来，在你的循环*之后写一个新行。*

同样，当您在提示符下输入数字时，不要在每个数字后按*Enter 。*看起来您应该输入它们以空格分隔。

鉴于您想在输入的同一行显示提示文本，您可能还需要刷新输出：

```
printf( "Enter a list of numbers (negative to quit): " );
fflush( stdout );

// Input loop.
int num;
do {
    if( 1 != scanf( "%d", &num ) ) {
        fprintf( stderr, "Bad input\n" );
        exit(1);
    }

    // Do something with the input...

} while( num != -1 ); 
```

# java - 如何在 android 上使用 Robolectric 测试特定的硬件功能？

> ID：14741785
> 
> 赞同：5
> 
> 时间：2013-02-07T00:58:08.670
> 
> 标签：java, android, testing, robolectric

我开始围绕硬件特定功能编写 robolectric 测试，例如传感器和摄像头（正面和背面）。

想象一下这个类：

```
class CheckHardware {

    private bolean hasCamera(Context context) {
        PackageManager pm = context.callingActivityContext
            .getPackageManager();
        // camera support
        Boolean frontCam = pm.hasSystemFeature("android.hardware.camera.front");
        Boolean rearCam = pm.hasSystemFeature(PackageManager.FEATURE_CAMERA);
        if (frontCam || rearCam) {
            return true;
        }
        return false;
    }
} 
```

所以我想测试有前置摄像头和后置摄像头，只有前置摄像头或根本没有摄像头的不同场景。在我的应用程序中它有点复杂，但希望这能让我更容易理解我的意思。

现在我这样做了，感觉有点奇怪。

```
RobolectricPackageManager pm = (RobolectricPackageManager) Robolectric.application.getPackageManager();
pm.setSystemFeature(PackageManager.FEATURE_CAMERA, true); 
```

我考虑过编写自己的测试运行器，因此对于所有预期的硬件设置，像这样的特定运行器

```
public class WithCameraTestRunner extends RobolectricTestRunner {   
  @Override
  public void setupApplicationstate(RobolectricConfig robolectricConfig) {
    super.setupApplicationState(robolectricConfig);
    ShadowApplication shadowApplication = shadowOf(Robolectric.application);
    shadowApplication.setPackageName(robolectricConfig.getPackageName());
    RobolectricPackageManager pm = new RobolectricPackageManager(Robolectric.application, robolectricConfig)
    pm.setSystemFeature(PackageManager.FEATURE_CAMERA, true);
    shadowApplication.setPackageManager(pm);
  }
} 
```

对此也不太满意，因为我想在同一个测试中测试不同的场景。

有任何想法吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T05:49:49.370

这可以通过 JUnit 规则来完成。我在使用 JUnit 4.8.2 时编写了这个示例。

这是测试类：

```
public class CameraTest {

    @Rule
    public CameraRule rule = new CameraRule();

    @Test
    @EnableCamera
    public void testWithCamera() {
        Assert.assertTrue(CameraHolder.CAMERA);
    }

    @Test
    public void testWithoutCamera() {
        Assert.assertFalse(CameraHolder.CAMERA);
    }

} 
```

这是规则：

```
import org.junit.rules.MethodRule;
import org.junit.runners.model.FrameworkMethod;
import org.junit.runners.model.Statement;

public class CameraRule implements MethodRule {

    @Override
    public Statement apply(Statement base, FrameworkMethod method, Object target) {
        boolean camera = false;
        if (method.getAnnotation(EnableCamera.class) != null) {
            camera = true;
        }

        return new CameraStatement(camera, base);
    }

} 
```

我包括了进口，所以你可以看到它们的来源。语句是一个只有一个函数的接口`evaluate()`。

这是语句类：

```
import org.junit.runners.model.Statement;

public class CameraStatement extends Statement {

    private boolean mEnabled;
    private Statement mStatement;

    public CameraStatement(boolean enabled, Statement statement) {
        mEnabled = enabled;
        mStatement = statement;
    }

    @Override
    public void evaluate() throws Throwable {
        CameraHolder.CAMERA = mEnabled;
        mStatement.evaluate();
    }

} 
```

`boolean`您可以轻松地传入一个枚举或一个枚举，而不是`Set`启用您想要启用的功能。确保禁用所有未明确启用的功能。在此示例中，如果您未明确设置`enabled`为.`true``false`

这是注释本身的代码：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface EnableCamera {
} 
```

这将允许您使用它来注释函数，`@EnableCamera`除了`@Test`. 如果您想为同一个测试启用多个功能，您可以在该功能上放置多个注释。

为了完整起见，这里是 CameraHolder 的实现（但你不需要这个）：

```
public class CameraHolder {
    public static boolean CAMERA = false;
} 
```

我尝试使用 robolectric，但我的 robolectric 版本没有您使用的功能：

```
RobolectricPackageManager pm = (RobolectricPackageManager) Robolectric.application.getPackageManager();
// My version of robolectric didn't have this function.
pm.setSystemFeature(PackageManager.FEATURE_CAMERA, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T06:42:44.943

我可能会`HardwareInfo`用方法`hasBackCamera()`和`hasFrontCamera()`. 此类将需要四次测试——针对每种相机存在情况。所有这些都需要您使用**Robolectric**进行操作。

对于做实际工作的类，我将模拟 HardwareInfo 并有一种设置方法：

```
HardwareInfo infoWithFromCameraAndBackCamera() {
    HardwareInfo info = mock( HardwareInfo.class );

    when( info.hasBackCamera() ).thenReturn( true );
    when( info.hasFrontCamera() ).thenReturn( true );

    return info;
} 
```

**您可以使用JUnit**规则将其自动化/编写更少的代码作为上面/下面的答案。

也许我会走得更远，我不确定它是否适合您的情况。`HardwareInfo`我会直接在课堂上摆脱使用。基本上我会有在特定硬件情况下正确运行的策略类（类似于[如何用策略替换（而不仅仅是移动）条件逻辑？](https://stackoverflow.com/questions/3688656/how-to-replace-and-not-just-move-conditional-logic-with-strategy)）。但这又取决于您的情况。如果只有一两个地方使用这些条件，我不会采用策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-30T17:39:14.300

```
@Test
public void hasCamera(){
    MainActivity activity = Robolectric.buildActivity( MainActivity.class )
            .create()
            .resume()
            .get();

    PackageManager packageManager = activity.getApplication().getPackageManager();
    ShadowPackageManager shadowPackageManager = shadowOf(packageManager);

    shadowPackageManager.setSystemFeature(PackageManager.FEATURE_CAMERA, true);
    assert(CameraUtils.checkCameraHardware(activity));

    shadowPackageManager.setSystemFeature(PackageManager.FEATURE_CAMERA, false);
    assert(!CameraUtils.checkCameraHardware(activity));

} 
```

# c# - 通过 Orchard Migration 添加 TextField 到 part

> ID：14741797
> 
> 赞同：1
> 
> 时间：2013-02-07T00:59:21.237
> 
> 标签：c#, orchardcms

我创建了一个包含图像字段和文本字段（用于链接目标）的小型横幅小部件。ImageField 部分在管理视图中完美呈现，但文本字段永远不会呈现......

难道我做错了什么？

```
public int UpdateFrom5()
{
    ContentDefinitionManager.AlterPartDefinition("PartnerBannerLong", part => part
        .WithField("Image", field => field
            .OfType("ImageField")
            .WithSetting("ImageFieldSettings.Width", "728")
            .WithSetting("ImageFieldSettings.Height", "90")
            .WithSetting("ImageFieldSettings.ResizeAction", "Validate")
        )
        .WithField("LinkTarget", field => field
            .OfType("TextField")
            .WithDisplayName("Link Target")
        )
    );

    return 6;
} 
```

# c++ - Visual Studio 2008 中的错误 ? 包含算法似乎无意中在第 3795 行交换了迭代器的顺序

> ID：14741798
> 
> 赞同：3
> 
> 时间：2013-02-07T00:51:18.663
> 
> 标签：c++, visual-c++, stl, stl-algorithm

我试图让`includes`算法在 a 上工作，`set`并将`map`地图的键与集合的值进行比较。需要规避的问题当然`map<K,V>::value_type`是`pair<K,V>`while `set<V>::value_type`is`V`所以这些不适用于默认值，默认值`includes predicate<T>`期望两个参数具有相同的值类型。

因此，我正在编写以下谓词类来解决这个问题

```
template <class P,class K>
struct mapKey_set_less : public std::binary_function<P,K,bool>
{
   inline bool operator() (const P& x, const K& y) const {return x.first < y ;};
};

template <class K,class P>
struct set_mapKey_less : public std::binary_function<K,P,bool>
{
    inline bool operator() (const K& x, const P& y) const {return x < y.first ;};
}; 
```

然而，模板实例化器在 VS2008 xutility 文件的第 313 行抛出

```
if (!_Pred(_Left, _Right)) 
```

带有无法将参数 1 从转换为的`const V`消息`const std::pair<_Ty1,_Ty2>`

这似乎是由文件的第 3795 行引起的

```
if (_DEBUG_LT_PRED(_Pred, *_First2, *_First1)) 
```

其中第一个和第二个参数似乎已被交换 在发布配置中编译在第 3795 行给出了相同的错误，因此 Visual Studio 实现似乎希望您通过此代码，除非您修改任何开关（如果有）删除此' _DEBUG_LT_PRED' 宏。

我的问题是：这是 Visual Studio 中的一个错误，还是有这样的原因，我犯了一个错误？十多年来，我没有做过任何 C++，上周不得不重新开始，以便在一些紧凑的循环中加快速度，所以需要我能得到的所有帮助。

谢谢大家

好的，

我没有考虑算法的要求。有道理，它需要从双方检查“小于”。

虽然编译这个并没有得到太多的乐趣。

用我以前的代码

```
template <class P,class K>
struct mapKey_set_cmp //: public std::binary_function<P,K,bool>
{
    inline bool operator() (const P& x, const K& y) const {return x.first < y ;};
}; 
```

我得到

```
error C2664: 'bool mapKey_set_cmp<P,K>::operator ()(const P &,const K &) const' : 
cannot convert parameter 1 from 'const double' to 'const std::pair<_Ty1,_Ty2> &' 
```

这是有道理的，因为没有 operator() 可以将 double 作为其第一个参数。

使用额外的重载 operator()

```
template <class P,class K>
struct mapKey_set_cmp //: public std::binary_function<P,K,bool>
{
    inline bool operator() (const P& x, const K& y) const {return x.first < y ;};
    inline bool operator() (const K& x, const P& y) const {return x < y.first ;};
}; 
```

我现在得到

```
error C2664: 'bool mapKey_set_cmp<P,K>::operator ()(const K &,const P &) const' : 
cannot convert parameter 1 from 'const std::pair<_Ty1,_Ty2>' to 'const double &'

error C2664: 'bool mapKey_set_cmp<P,K>::operator ()(const K &,const P &) const' : 
cannot convert parameter 1 from 'const std::pair<_Ty1,_Ty2>' to 'const double &'

error C2664: 'bool mapKey_set_cmp<P,K>::operator ()(const K &,const P &) const' : 
cannot convert parameter 2 from 'const double' to 'const std::pair<_Ty1,_Ty2> &'

error C2664: 'bool mapKey_set_cmp<P,K>::operator ()(const K &,const P &) const' : 
cannot convert parameter 2 from 'const double' to 'const std::pair<_Ty1,_Ty2> &' 
```

值得注意的是，所有错误似乎都与第 2 个错误有关`operator()`，即`K`第 1 个和`P`第 2 个错误。是的，在那个操作符上，所提到的任何转换都不应该是可能的。但是为什么编译器不尝试另一个运算符呢？即应该允许这些转换的那个。（顺便说一句，错误会重复出现，因为如果您想知道它们每个都出现在两条不同的行上）

这可能是另一件事当然是 const 不正确。已经有一段时间了，所以我会尝试考虑一下。

谢谢您的帮助

**2013 年 5 月 15 日编辑**

我不得不“继续下去”，所以通过将我的地图键放入一个集合中来规避这个问题，这样我就可以`includes`在两个集合上调用算法（导致明显的性能损失）。**我仍然想正确解决这个问题**。这是复制我用 Visual Studio 2008 描述的编译器错误所需的所有代码

```
template <class PAIR,class KEY>
struct mapKey_set_less : public std::binary_function<PAIR,KEY,bool>
{
    inline bool operator() (const PAIR& x, const KEY& y) const {return x.first < y ;};
    inline bool operator() (const KEY& x, const PAIR& y) const {return x < y.first ;};
};

int _tmain(int argc, _TCHAR* argv[])
{
    map<string,double> theMap;
    theMap["arse"] = 1;

    set<string> theSet;
    theSet.insert("arse");

    typedef map<string,double>::iterator MI;
    MI mi(theMap.begin()), miend(theMap.end());

    typedef set<string>::iterator SI;
    SI si(theSet.begin()), siend(theSet.end());

    typedef mapKey_set_less< pair<string,double>,string> cmp;

    if (includes(mi,miend,si,siend,cmp()))
    {}

} 
```

编译器吐出来

```
Error   1   error C2664: 'bool mapKey_set_less<PAIR,KEY>::operator ()(const KEY &,const PAIR &) const' : cannot convert parameter 1 from 'std::pair<_Ty1,_Ty2>' to 'const std::string &'    c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility  346
Error   2   error C2664: 'bool mapKey_set_less<PAIR,KEY>::operator ()(const KEY &,const PAIR &) const' : cannot convert parameter 1 from 'std::pair<_Ty1,_Ty2>' to 'const std::string &'    c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility  348
Error   3   error C2664: 'bool mapKey_set_less<PAIR,KEY>::operator ()(const KEY &,const PAIR &) const' : cannot convert parameter 2 from 'std::basic_string<_Elem,_Traits,_Ax>' to 'const std::pair<_Ty1,_Ty2> &'   c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility  346
Error   4   error C2664: 'bool mapKey_set_less<PAIR,KEY>::operator ()(const KEY &,const PAIR &) const' : cannot convert parameter 2 from 'std::basic_string<_Elem,_Traits,_Ax>' to 'const std::pair<_Ty1,_Ty2> &'   c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility  348 
```

单看第一个错误，它似乎想使用 operator()(KEY,PAIR) 来传递 PAIR,KEY。为什么它忽略了可用的 operator()(PAIR,KEY)??? 其他错误都是一样的，编译器“似乎”忽略了一个完美的重载运算符

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:47:00.800

标准没有要求第一个范围内的对象只能作为比较函数的左侧参数传递，第二个范围内的对象也只能作为右侧参数传递。因此，Visual Studio 正在做的事情是完全有效的，而且通常是必要的（见下文）。

您可以做的是编写一个处理这两种情况的函子：

```
template <class K,class P>
struct set_mapKey_less : public std::binary_function<K,P,bool>
{
    inline bool operator() (const K& x, const P& y) const {return x < y.first;};
    inline bool operator() (const P& y, const K& x) const {return y.first < x; }
};
...
std::map<int,int> m;
std::set<int> s;

std::includes(m.begin(), m.end(), s.begin(), s.end(),
              set_mapKey_less<int,std::pair<int const,int> >()); 
```

要了解为什么 VS 正在执行的检查可能是必要的，请考虑以下几点：

```
set X = { 1000, 3000, 5000, 7000, 9000 }
map Y = { (3000,'a') } 
```

如果你所拥有的只是一个小于运算符，它在左边取一对值，在右边取一个整数，你将如何测试 X 是否包含 Y？

```
Is (3000,'a').first < 1000? No.
Is (3000,'a').first < 3000? No.
Is (3000,'a').first < 5000? Yes. 
```

此时，我们知道`(3000,'a').first`，如果在集合中，必须是 3000。但是我们如何使用只能取左侧对的比较器来测试它实际上是 3000？如果我们可以反转论点，我们可以做到：

```
Is 3000 < (3000,'a').first? No. 
```

所以现在我们知道`3000`不小于`(3000,'a').first`，并且`(3000,'a').first`不小于`3000`，因此它们必须相等。

# javascript - 无法将脚本绑定到 DOM 中的新元素

> ID：14741799
> 
> 赞同：3
> 
> 时间：2013-02-07T00:59:30.677
> 
> 标签：javascript, ajax, bind

所以我已经为此工作了一段时间，但我似乎仍然无法弄清楚。

我在这里有一个页面：http: [//taste.fourseasons.com/ingredients/](http://taste.fourseasons.com/ingredients/)

底部的显示更多按钮使用以下脚本调用页面上的额外帖子：

```
$("a.view-more").bind('click',function(event){
        event.preventDefault();
        if($('.post-holder').hasClass('ingredients')) { posttype = 'ingredient'; }
        if($('.post-holder').hasClass('recipe')) { posttype = 'recipe'; }
        if($('.post-holder').hasClass('cmed')) { posttype = 'cmed'; }
        filter = 'none';
        morePosts(posttype,filter);
}); 
```

让人们投票的选项适用于此：

```
$.post('http://taste.fourseasons.com/wp-admin/admin-ajax.php', data,
           function(response){
                   if(response!="-1") {
                           el.find('.vote-sm').removeClass('vote-sm').addClass('unvote-sm');
                           el.find('.vote-text').html("VOTED");
                           el.unbind("click");
                           if(response!="null") {
                                   el.find(".vote-count").html(response);
                           }
                           var cookie = getCookie("better_votes_"+postID);
                           if(!cookie) {
                                   var newcookie = postID;
                           } else {
                                   var newcookie = postID;
                           }
                           setCookie("better_votes_"+postID, newcookie, 365);
                   } else {
                   }
           });
           return false;
   }); 
```

但是当用户点击显示更多并将这些元素添加到 DOM 时，投票选项不适用于这些新元素。我以为我可以将它们加在一起：

```
$("a.view-more").bind('click',function(event){
        event.preventDefault();
        if($('.post-holder').hasClass('ingredients')) { posttype = 'ingredient'; }
        if($('.post-holder').hasClass('recipe')) { posttype = 'recipe'; }
        if($('.post-holder').hasClass('cmed')) { posttype = 'cmed'; }
        filter = 'none';
        morePosts(posttype,filter);

        $(".vote").bind('click',function(event) {
               event.preventDefault();
               postID = $(this).attr('data-post');
               var el = $(this);
               //el.html('<span id="loader"></span>');
               var nonce = $("input#voting_nonce_"+postID).val();
               var data = {
                       action: 'add_votes_options',
                       nonce: nonce,
                       postid: postID,
                       ip: '66.252.149.82'                        
               };
               $.post('http://taste.fourseasons.com/wp-admin/admin-ajax.php', data,
               function(response){
                       if(response!="-1") {
                               el.find('.vote-sm').removeClass('vote-sm').addClass('unvote-sm');
                               el.find('.vote-text').html("VOTED");
                               el.unbind("click");
                               if(response!="null") {
                                       el.find(".vote-count").html(response);
                               }
                               var cookie = getCookie("better_votes_"+postID);
                               if(!cookie) {
                                       var newcookie = postID;
                               } else {
                                       var newcookie = postID;
                               }
                               setCookie("better_votes_"+postID, newcookie, 365);
                       } else {
                       }
               });
               return false;
       });
    }); 
```

但这似乎不起作用，并且还创建了一个场景，每次您投票时都会在总和中添加两票而不是一票。

谢谢你的帮助。

此代码来自 wp-function 页面：

```
function add_votes_options() {
    $postid = $_POST['postid'];
    $ip = $_POST['ip'];

    if (!wp_verify_nonce($_POST['nonce'], 'voting_nonce_'.$postid))
        return;

    $voter_ips = get_post_meta($postid, "voter_ips", true);
    if(!empty($voter_ips) && in_array($ip, $voter_ips)) {
        echo "null";
        die(0);
    } else {
        $voter_ips[] = $ip;
        update_post_meta($postid, "voter_ips", $voter_ips);
    }   

    $current_votes = get_post_meta($postid, "votes", true);
    $new_votes = intval($current_votes) + 1;
    update_post_meta($postid, "votes", $new_votes);
    $return = $new_votes>1 ? $new_votes : $new_votes;
    echo $return;
    die(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:15:21.467

您遇到了一个相当常见的事件绑定问题。

```
$("a.view-more").bind('click',function(event){ 
```

您编写的上述代码行将事件侦听器附加到当时可用的 DOM 元素。这就是添加到 DOM 的新元素不响应事件的原因；因为他们没有附加事件侦听器。

为了解决这个问题，我们可以使用称为事件委托的东西。这通过将事件附加到您想要侦听事件的 DOM 元素的父级来实现。然后，当事件最终传播到父级时，我们可以计算出事件从哪个子级开始。

jQuery 让这很容易做到。您可以使用该`delegate()`方法，但我建议您使用该`on()`方法，该方法是处理 jQuery 中所有事件操作的方法。其他诸如`click()`,`mouseover()`和`bind()`只是 的别名`on()`

无论如何，要委托一个事件，我们需要为事件将附加到的父级指定一个选择器，并为我们真正感兴趣的元素指定一个选择器。所以这行代码现在看起来像这样：

```
$("body").on('click', "a.view-more", function(event){ 
```

你真的应该使用身体以外的东西，但这只是一个例子。

进一步阅读：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# html - 禁用非英文字符？

> ID：14741805
> 
> 赞同：1
> 
> 时间：2013-02-07T01:00:23.113
> 
> 标签：html, text, non-english

我的一个页面被窃听了，我从 Google 收到一条消息，说它是印度尼西亚语。如果需要，这里有一个 .txt 链接：http: [//lc-roleplay.com/account/actions/modelchange/modelchange.txt](http://lc-roleplay.com/account/actions/modelchange/modelchange.txt)

我可以以某种方式禁用所有非英文字母吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:53:35.500

不，你不能。

没有“英文字母”之类的东西。您所描述的是罗马字符，其中出现在英语中的 52 个也出现在大多数其他语言中。

此外，许多英语单词在书写时保留了外国口音，如café、naïve 和façade。

您可以做的最好的事情是通过英语拼写检查来运行您的输入，并拒绝任何具有给定拼写错误百分比的输入。

您可以强制执行 ASCII 编码，但这不会阻止有人给您 unicode 输入 - 这只是意味着它被不正确地解码（并且看起来像胡言乱语）

# context-free-grammar - 如何将上下文无关语法（可以生成常规语言）转换为右线性语法

> ID：14741808
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:00:41.930
> 
> 标签：context-free-grammar, regular-language, nfa

上下文无关文法：（e代表epsilon）

```
 S --> aSb|aSa|bSa|bSb|e 
```

它可以生成正则语言，这意味着它可以转换为正确的线性语法。是否有将 CFG 转换为 RLG 的一般规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:17:51.410

没有将 CFG 转换为右线性文法的通用算法，因为右线性文法精确生成正则语言，它们是上下文无关语言的严格子集。因此，如果存在执行这种转换的通用算法，它将证明所有上下文无关语言都是正则的，这被认为是错误的。

希望这可以帮助！

# google-chrome - 为什么标记、模式和 unicode 字符在 google chrome 的 svg 数据 uri 中显示不正确？

> ID：14741810
> 
> 赞同：2
> 
> 时间：2013-02-07T01:00:53.910
> 
> 标签：google-chrome, svg, data-uri

我在 Mac OS X 10.6.8 上使用 google chrome 版本 24.0.1312.57。

在 Safari 5.1.7 中，svg 图像如下所示：

![svg_safari](../Images/8860f311064f84a665ce13b3c3434309.png)

在 Chrome 中它看起来像这样：

![在此处输入图像描述](../Images/283015f432ee1937cbad1adcac588ba7.png)

请注意，标记已从路径中消失，具有图案的路径现在填充黑色，Unicode 字符后面有一个 A。仅当图像是谷歌浏览器地址栏中的数据 uri 时才会发生这种情况。如果我将 svg 图像作为 chrome 文件打开，它会正确显示。

我尝试将行尾移开并将其放入 base64 中，但它似乎没有解决任何问题。

这是 chrome 的错误还是我错过了什么？

这是源svg：

```
<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg_elem">
<title id="doctitle">URI Test</title>
<defs id="thedefs">
<pattern id="ptrn" overflow="visible" patternUnits="userSpaceOnUse"
         x="0" y="0" width="10" height="10"
         viewBox="0 0 10 10" >
    <line fill="none" stroke="#000000" stroke-width="0.5" x1="-5" y1="-5" x2="15" y2="15"/>
</pattern>

<marker id="mtriangle" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="strokeWidth" markerWidth="4" markerHeight="3" orient="auto">
  <path d="M 0 0 L 10 5 L 0 10 z" fill="#FFF" stroke="#000" stroke-width="1"/>
</marker>

<marker id="mcircle" viewBox="-2 -2 12 12" refX="5" refY="5" markerUnits="strokeWidth" markerWidth="4" markerHeight="3" orient="auto">
  <circle cx="5" cy="5" r="5" fill="#FFF" stroke="#000" stroke-width="1"/>
</marker>  

</defs>

<g> 

<path 
fill="#F00"
stroke="#000000" 
stroke-width="3" 
marker-start="url(#mtriangle)"
marker-mid="url(#mcircle)"
d="M10,10l0,60l60,0z"/>      

<path 
fill="url(#ptrn)" 
stroke="#000" 
stroke-width="3" 
marker-start="url(#mtriangle)"
marker-mid="url(#mcircle)"
d="M110,110l0,70l70,0z"/>      

<text 
fill="#000" 
x='100'
y='100'
font-size="14pt" 
font-family="serif" 
text-anchor="middle"
space="preserve">N 34° 45' 30" E 300 ft</text>

</g>
</svg> 
```

这是数据uri。

```
data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODUwIiBoZWlnaHQ9IjEwNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGlkPSJzdmdfZWxlbSI+PHRpdGxlIGlkPSJkb2N0aXRsZSI+VVJJIFRlc3Q8L3RpdGxlPjxkZWZzIGlkPSJ0aGVkZWZzIj4gICAgPHBhdHRlcm4gaWQ9InB0cm4iIG92ZXJmbG93PSJ2aXNpYmxlIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHZpZXdCb3g9IjAgMCAxMCAxMCI+ICAgICAgICA8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC41IiB4MT0iLTUiIHkxPSItNSIgeDI9IjE1IiB5Mj0iMTUiPjwvbGluZT4gICAgPC9wYXR0ZXJuPiAgICA8bWFya2VyIGlkPSJtdHJpYW5nbGUiIHZpZXdCb3g9IjAgMCAxMCAxMCIgcmVmWD0iMCIgcmVmWT0iNSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBtYXJrZXJXaWR0aD0iNCIgbWFya2VySGVpZ2h0PSIzIiBvcmllbnQ9ImF1dG8iPiAgICAgIDxwYXRoIGQ9Ik0gMCAwIEwgMTAgNSBMIDAgMTAgeiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEiPjwvcGF0aD4gICAgPC9tYXJrZXI+ICAgIDxtYXJrZXIgaWQ9Im1jaXJjbGUiIHZpZXdCb3g9Ii0yIC0yIDEyIDEyIiByZWZYPSI1IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI0IiBtYXJrZXJIZWlnaHQ9IjMiIG9yaWVudD0iYXV0byI+ICAgICAgPGNpcmNsZSBjeD0iNSIgY3k9IjUiIHI9IjUiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIj48L2NpcmNsZT4gICAgPC9tYXJrZXI+ICAgIDwvZGVmcz48Zz4gPHBhdGggZmlsbD0iI0YwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIG1hcmtlci1zdGFydD0idXJsKCNtdHJpYW5nbGUpIiBtYXJrZXItbWlkPSJ1cmwoI21jaXJjbGUpIiBkPSJNMTAsMTBsMCw2MGw2MCwweiI+PC9wYXRoPiAgICAgIDxwYXRoIGZpbGw9InVybCgjcHRybikiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBtYXJrZXItc3RhcnQ9InVybCgjbXRyaWFuZ2xlKSIgbWFya2VyLW1pZD0idXJsKCNtY2lyY2xlKSIgZD0iTTExMCwxMTBsMCw3MGw3MCwweiI+PC9wYXRoPiAgICAgICAgICAgICAgPHRleHQgZmlsbD0iIzAwMCIgeD0iMTAwIiB5PSIxMDAiIGZvbnQtc2l6ZT0iMTRwdCIgZm9udC1mYW1pbHk9InNlcmlmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBzcGFjZT0icHJlc2VydmUiPk4gMzTCsCA0NScgMzAiIEUgMzAwIGZ0PC90ZXh0PjwvZz48L3N2Zz4JCQk= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:33:41.640

Not sure about markers and patterns, but as for the character set, Chrome must be using a different default encoding for data:URIs. If you add `charset=UTF-8;` in the beginning, e.g.:

```
data:image/svg+xml;charset=UTF-8;base64,PHN2ZyB3aWR0aD0iODUwIiBoZWlnaHQ9IjEwNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGlkPSJzdmdfZWxlbSI+PHRpdGxlIGlkPSJkb2N0aXRsZSI+VVJJIFRlc3Q8L3RpdGxlPjxkZWZzIGlkPSJ0aGVkZWZzIj4gICAgPHBhdHRlcm4gaWQ9InB0cm4iIG92ZXJmbG93PSJ2aXNpYmxlIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHZpZXdCb3g9IjAgMCAxMCAxMCI+ICAgICAgICA8bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC41IiB4MT0iLTUiIHkxPSItNSIgeDI9IjE1IiB5Mj0iMTUiPjwvbGluZT4gICAgPC9wYXR0ZXJuPiAgICA8bWFya2VyIGlkPSJtdHJpYW5nbGUiIHZpZXdCb3g9IjAgMCAxMCAxMCIgcmVmWD0iMCIgcmVmWT0iNSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBtYXJrZXJXaWR0aD0iNCIgbWFya2VySGVpZ2h0PSIzIiBvcmllbnQ9ImF1dG8iPiAgICAgIDxwYXRoIGQ9Ik0gMCAwIEwgMTAgNSBMIDAgMTAgeiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEiPjwvcGF0aD4gICAgPC9tYXJrZXI+ICAgIDxtYXJrZXIgaWQ9Im1jaXJjbGUiIHZpZXdCb3g9Ii0yIC0yIDEyIDEyIiByZWZYPSI1IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI0IiBtYXJrZXJIZWlnaHQ9IjMiIG9yaWVudD0iYXV0byI+ICAgICAgPGNpcmNsZSBjeD0iNSIgY3k9IjUiIHI9IjUiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIj48L2NpcmNsZT4gICAgPC9tYXJrZXI+ICAgIDwvZGVmcz48Zz4gPHBhdGggZmlsbD0iI0YwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIG1hcmtlci1zdGFydD0idXJsKCNtdHJpYW5nbGUpIiBtYXJrZXItbWlkPSJ1cmwoI21jaXJjbGUpIiBkPSJNMTAsMTBsMCw2MGw2MCwweiI+PC9wYXRoPiAgICAgIDxwYXRoIGZpbGw9InVybCgjcHRybikiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBtYXJrZXItc3RhcnQ9InVybCgjbXRyaWFuZ2xlKSIgbWFya2VyLW1pZD0idXJsKCNtY2lyY2xlKSIgZD0iTTExMCwxMTBsMCw3MGw3MCwweiI+PC9wYXRoPiAgICAgICAgICAgICAgPHRleHQgZmlsbD0iIzAwMCIgeD0iMTAwIiB5PSIxMDAiIGZvbnQtc2l6ZT0iMTRwdCIgZm9udC1mYW1pbHk9InNlcmlmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBzcGFjZT0icHJlc2VydmUiPk4gMzTCsCA0NScgMzAiIEUgMzAwIGZ0PC90ZXh0PjwvZz48L3N2Zz4JCQk= 
```

...it should work properly!

Here's a [fiddle](http://jsfiddle.net/uxegG/).

**EDIT** Upon further inspection (re: markers and patterns), it seems like this is a bug in Chrome. It looks like Chrome incorrectly interprets (*completely ignores?*) `url(#hash)` attribute values in SVG data:URIs when embedded as `<object>` (and possibly in other cases?).

Here's [another fiddle](http://jsfiddle.net/sHAa4/) with extensive testing of this issue.

在 Safari 6.0.2、Firefox 18.0.2 (Mac)、Firefox 10.0.1 (Win)、Opera 12.12 (Mac) 和 IE 9 中一切正常。`<object>`（[以及](http://jsfiddle.net/kAHkM/) `<embed>`和`<iframe>`）嵌入在 Chrome 中无法正确显示24.0.1312.57 (Mac/Win) 或 26.0.1405.0 canary (Mac)，而`<img>`嵌入工作正常。将 URI 编码或 base64 编码的数据粘贴到地址栏中也不起作用。

# c++ - 从std :: string中提取const char而不复制？

> ID：14741813
> 
> 赞同：0
> 
> 时间：2013-02-07T01:01:05.803
> 
> 标签：c++, string, std

我想知道是否有某种方法可以告诉`std::string`释放*它*`char*`正在使用的。

我想它的某个地方`std::string`有一个 type 字段`char*`，我想要一些类似的方法：

```
const char* std::string::release() {
    const char* result = __str;
    __size = 0;
    __capacity = INITIAL_CAPACITY_WHATEVER;
    __str = new char[INITIAL_CAPACITY_WHATEVER];
    return result;
} 
```

并不是说复制内容是一个问题或会影响我的表现，我只是对浪费时间复制我将要删除的内容感到不舒服。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:04:14.600

如果您使用的是 C++11，则可以使用`std::move`将一个字符串对象[的内容移动](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)到另一个字符串对象。这避免了复制的开销。

```
std::string s1 = "hello";
std::string s2(std::move(s1)); 
```

但是，您不能直接将内部`char*`缓冲区与`std::string`. 该`std::string`对象*拥有*内部`char*`缓冲区，并在调用析构函数时尝试释放它。

# jquery - 无法在 JQuery tmpl 中的文本字符串上运行 html

> ID：14741814
> 
> 赞同：5
> 
> 时间：2013-02-07T01:01:23.337
> 
> 标签：jquery, jquery-templates

在我项目的 JQuery 模板中，我试图写出一个变量，它是一个 HTML 字符串，而不对 HTML 进行编码。当我像这样输出变量时：

```
 ${description} 
```

它会导致原始 HTML 字符串与标签一起输出，就像这样：

```
<p>text <b>bold</b>  <i>italic</i></p> 
```

但是当我尝试将标记转换为代码中相同位置的真实标签时：

```
 {{html $description}} 
```

不输出任何东西！

我尝试了无数种传递变量的方法，但我认为 html 例程中发生了一些事情，我没有得到。

谢谢。

**更新：**

这是它的调用方式：

```
 this.$el.attr('data-id', tmplData.id).
          data('id', tmplData.id).html($.tmpl(this.template, tmplData)); 
```

其中 this.template 是模板文件，tmplData 是 JSON，其中包括 $description 和其他所需的变量。

**另一个更新：**

```
 {{html '<p>string</p>'}} 
```

确实按预期运行。但

```
 {{html $another_variable}} 
```

即使 $another_variable 中没有 HTML，也无法产生任何输出。

**另一个更新：**

我也试过：

```
 ${$item.html(description)} 
```

并将对模板的调用更改为

```
 this.$el.attr('data-id', tmplData.id).
         data('id', tmplData.id).
         html($.tmpl(this.template, tmplData, {
            truncate: _.truncateStrip,
            html: _.html,
        })); 
```

并编写了一个自定义的 html 例程来按照建议的方式传递字符串：

```
 html: function(str) {
        return str;
    } 
```

但仍然没有骰子。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T02:13:19.803

答案是：

```
{{html description}} 
```

我很早就尝试过，但是因为我在大括号内留下了杂散的空格，所以它没有正确解释。

:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:26:07.873

如果您打开源代码，您可以修改进行编码的行。我没有看到将其关闭的选项，因此这可能是您最简单的解决方案。

改变：

```
encode: function( text ) {
            // Do HTML encoding replacing < > & and ' and " by corresponding entities.
            return ("" + text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");
        } 
```

到

```
encode: function( text ) {
            // Do HTML encoding replacing < > & and ' and " by corresponding entities.
            return text;        
} 
```

# c++ - 指向类和破坏类的 C++ 指针

> ID：14741815
> 
> 赞同：0
> 
> 时间：2013-02-07T01:01:24.173
> 
> 标签：c++, pointers

有一个创建的类抛出一个`new`关键字和一个指向它的指针，然后从该类调用一个方法来销毁它自己的类，我是否必须从指针中释放内存？像这样的东西：

。H

```
#include <list>
#include <iostream>
class Test
{
public:
    Test();
    ~Test();
    void destroy();
    bool operator==(Test& right){return id == right.id;};
private:
    static int count;
    std::list<Test*>::size_type id;
    static std::list<Test*> instances;
}; 
```

.cpp

```
#include "Test.h"
int Test::count = 0;
std::list<Test*> Test::instances;
Test::Test()
{
    instances.push_back(this);
    id = count++;

}
Test::~Test()
{
}

void Test::destroy()
{
    for(auto t : instances){
        if(*t == *this)
        {
            delete t;
            break;
        }
    }
} 
```

资源

```
Test* n = new Test();
n->destroy(); 
```

所以我的问题是 n 指向的内存被释放了吗？还是我应该打电话`delete n`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:05:21.817

这会起作用，但为什么要这样做呢？为什么不只是`delete n`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:26:44.023

这是评论中讨论的内容，以防有人稍后发现。

基本上，看起来您正在尝试封装 Windows 的窗口机制并想要销毁 WM_DESTROY 上的窗口类。

你有一张从 HWND 映射到类的地图：

```
 map<HWND,CLASS*> instances; 
```

收到 WM_DESTROY 后，您可以执行以下两项操作之一：

**1.销毁功能选项**

```
 instance[hwnd]->destroy(); 
```

在destroy里面，你会有这样的东西：

```
void CLASS::destroy() {
     // assuming hwnd is a member (probably m_hwnd)
     instance.erase(hwnd);  
     // do some cleanup, and then delete the instance
     delete this;
} 
```

**2.删除选项**

```
delete instance[hwnd];
instance.erase(hwnd); 
```

在这种情况下，您必须将所有清理代码放入类的析构函数中。

选项 2 可能更可取，因为它不需要您**删除它；**，虽然技术上没问题，但可能对某些人没有吸引力。

# database - Laravel 和实体关系模型 - 我应该走多远？

> ID：14741819
> 
> 赞同：1
> 
> 时间：2013-02-07T01:02:13.527
> 
> 标签：database, entity-relationship, laravel, eloquent, third-normal-form

有些人可能知道 ER-Diagrams？数据库的模型

例如： [http ://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)

所以这是我的数据库模型：（ ![在此处输入图像描述](../Images/00b33d0c5f5c0b0388b7e6957fc4f5a7.png) 翻译：Werkstatt = Garage，Dienstleistung = Service，Kategorie = Category，Bewertung = Rating，bewerten = rate，besitzt = owns，hat = has）

我的问题是：

**1）**我可以建模多对多关系，一对一，一对多。我应该在需要时为他们使用自己的桌子吗？例如 MANY-to-MANY 关系需要一个自己的表。还是 Laravel 会通过其 Eloquent ORM 来处理这种关系？

**2）**您可以设计一个很好的数据库，例如不能有NULL值。或者它以适当的方式处理依赖关系或冗余（参见[http://en.wikipedia.org/wiki/Database_normalization#Normal_forms](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)）。我应该处理冗余和依赖关系，还是 Laravel 会再次处理这些问题？

所以总的来说，我只想知道，我的数据库设计应该走多远？我应该让它尽可能好，还是仅仅创建基本实体就足够了？

信息：在这里您可以看到如果数据库未标准化可能发生的后果： [http ://en.wikipedia.org/wiki/Database_normalization#Free_the_database_of_modification_anomalies](http://en.wikipedia.org/wiki/Database_normalization#Free_the_database_of_modification_anomalies)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:11:53.283

在我看来，USER 和 GARAGE 之间应该没有直接关系。相反，应该将一个用户链接到 RATING（一对多），并将 GARAGE 链接到 RATING（同样，一对多）。所以我会将 Ratings 作为一个单独的表，每个评级都有一个用户 ID、一个车库 ID 和一个评级。我相信在这种情况下，您不需要单独的多对多表，除非您将评分视为多对多表（您不应该这样做——评分应该有自己的 Eloquent 模型，在事实上。）免责声明：我自己只是 Laravel 的初学者。

# python - Web2py vs django 适合初学者网络程序员

> ID：14741824
> 
> 赞同：0
> 
> 时间：2013-02-07T01:02:45.473
> 
> 标签：python, django, web2py

我对学习 Web 编程非常感兴趣。我想使用 python 中的一些东西，但不确定我是否要使用 web2py 或 django 。对于像我这样的初学者来说，Django 似乎很难设置。但我不想把它扔掉吧.. Soo 有哪些关于 Web 编程框架的专家意见？另外，如果 django 真的不像看起来那么难，有人可以解释一下我将如何设置它。提前致谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T02:22:59.677

我也是初学者。我大约在 8 个月前开始，不知道计算机科学、编程、powershell 甚至 html/css，现在我几乎准备好了一个完整的 django 网站，减去一些小问题，因为我需要视频，而视频仍然在我的脑海中很难找到信息/了解。无论如何，如果你还不知道 html/css，我使用 codecademy.com 来学习它和一些 javascript，然后 learnpythonthehardway.org 来学习 python，然后是 djangobook.com 来学习 django。都是很好的资源。他们甚至会为您指明沿途所需的其他事物的方向。这并不容易，但是有很好的学习资源可供使用，而且自从我自己开始学习以来，codecademy 也添加了 python。我辞掉了工作专心做编程，这样我就可以边学边追梦，所以我从个人经验中知道，这可以通过在线提供的免费资源来完成。我仍然不知道很多，事情开始点击需要时间，但如果你想学习它就开始吧。我知道你征求专家意见，相信我，我不是专家，但根据我的经验，django 并不算太糟糕。是的，你会发现自己时不时地撞到墙上，但是像 stackoverflow 这样的社区也可以帮助你找出问题的答案。但是，我对 web2py 没有任何经验，所以我不能谈论这个。祝你好运！我不是专家，但根据我的经验，django 还不错。是的，你会发现自己时不时地撞到墙上，但是像 stackoverflow 这样的社区也可以帮助你找出问题的答案。但是，我对 web2py 没有任何经验，所以我不能谈论这个。祝你好运！我不是专家，但根据我的经验，django 还不错。是的，你会发现自己时不时地撞到墙上，但是像 stackoverflow 这样的社区也可以帮助你找出问题的答案。但是，我对 web2py 没有任何经验，所以我不能谈论这个。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:49:43.383

好的，我建议你试试这两个框架，测试 Django，然后测试 web2py。拿哪个你更喜欢。所有好的框架。

对于 web2py，我建议： http: [//killer-web-development.com/](http://killer-web-development.com/)

# javascript - 点击调整 HTML5 Canvas Circle 的大小

> ID：14741827
> 
> 赞同：0
> 
> 时间：2013-02-07T01:02:51.743
> 
> 标签：javascript, html, scale

试图将圆的大小加倍 onclick()。似乎没有工作？

HTML

`<canvas id="drawing" width="600px" height="600px" onclick="resize()"></canvas>`

Javascript

```
 window.onload = function() {
            canvas=document.getElementById("drawing");
            context=canvas.getContext("2d");
            var centerX = canvas.width / 2;
            var centerY = canvas.height / 2;
            var radius = 70;

            context.beginPath();
            context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
            context.fillStyle = 'green';
            context.fill();
        }

        function resize () {
            context.fillStyle= "#701be0"; // This changes the rectangle to blue
            context.fill();
            context.scale(10.5, 2.5); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:16:08.850

你需要再次重绘你的圆圈，并且记住这`context.scale()`也会缩放它的位置，所以我不建议这样做。你可以画一个半径更大的新圆。

jsFiddle - [http://jsfiddle.net/DSFMq/](http://jsfiddle.net/DSFMq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:04:32.470

这是我所需要的 jsFiddle，以防万一有人需要帮助。

[http://jsfiddle.net/elijahmurray/fHv82/1/](http://jsfiddle.net/elijahmurray/fHv82/1/)

```
x=200;
y=200;    
size=100;
radius=30;

function animate() {
reqAnimFrame =  window.mozRequestAnimationFrame    || //get framerate
                window.webkitRequestAnimationFrame ||
                window.msRequestAnimationFrame     ||
                window.oRequestAnimationFrame
            ;
reqAnimFrame(animate);

if(radius <= 200) {
    radius +=3; 
} //increase size by 1 per frame

    draw();
}

function draw() {
var canvas  = document.getElementById("ex1");
var context = canvas.getContext("2d");

  context.beginPath();
  context.arc(x, y, radius, 0, 2 * Math.PI, false);
  context.fillStyle = 'green';
  context.fill();
}
animate(); 
```

# c# - 在 Razor 中生成动态 XML

> ID：14741835
> 
> 赞同：4
> 
> 时间：2013-02-07T01:04:07.513
> 
> 标签：c#, xml, razor

我在 ASP.NET 之外使用 Razor 从模板生成 XML 文档。我有以下代码：

```
<event>
    <timeouts trigger='@Model.TriggerTimeout' />
    <parameters>
    @foreach (var parameter in Model.Parameters) {
        <@parameter.Key>@parameter.Value</@parameter.Key>
    }
    </parameters>
</event> 
```

其中 Model.Parameters 只是一个名称/值集合。我的预期输出应该是：

```
<event>
    <timeouts trigger='100' />
    <parameters>
        <name1>value1</name1>
        <name2>value2</name2>
        <name3>value3</name3>
    </parameters>
</event> 
```

但我实际上得到的是：

```
<event>
    <timeouts trigger='100' />
    <parameters>
        <name1>value1</@parameter.Key>
        <name2>value2</@parameter.Key>
        <name3>value3</@parameter.Key>
    </parameters>
</event> 
```

我究竟做错了什么？我需要使用什么秘诀才能使动态元素正确关闭？

**编辑** 所以现在我的模型演变为有多个事件，我的 Razor 代码如下所示：

```
<events>
@foreach (var _event in Model.Events) {
    <@_event.Name enabled='@_event.Enabled'>
        <timeouts trigger='@_event.TriggerTimeout' />
        <parameters>
        @foreach (var parameter in _event.Parameters) {
            @:<@parameter.Key>@parameter.Value</@(parameter.Key)>
        }
        </parameters>
    </@_event.Name>
}
</events> 
```

输出应该是：

```
<events>
    <event1 enabled='true'>
        <timeouts trigger='100' />
        <parameters>
            <name1>value1</name1>
            <name2>value2</name2>
        </parameters>
    </event1>
    <event2 enabled='false'>
        <timeouts trigger='100' />
        <parameters>
            <name1>value1</name1>
        </parameters>
    </event2>
</events> 
```

但实际上是：

```
<events>
    <event1 enabled='true'>
        <timeouts trigger='100' />
        <parameters>
            <name1>value1</name1>
            <name2>value2</name2>
        </parameters>
    </@_event.Name>
    <event2 enabled='false'>
        <timeouts trigger='100' />
        <parameters>
            <name1>value1</name1>
        </parameters>
    </@_event.Name>
</events> 
```

**解决方案** 通过*大量*的反复试验，我最终找到了丢失的秘方。打开的动态 XML 元素需要一个`?:`前缀才能正确呈现关闭元素。最诡异。

```
<events>
@foreach (var _event in Model.Events) {
    @:<@_event.Name enabled='@_event.Enabled'>
        <timeouts trigger='@_event.TriggerTimeout' />
        <parameters>
        @foreach (var parameter in _event.Parameters) {
            @:<@parameter.Key>@parameter.Value</@(parameter.Key)>
        }
        </parameters>
    </@_event.Name>
}
</events> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:06:05.000

你需要写信`</@(parameter.Key)>`阻止 Razor 认为那是一个电子邮件地址。

# python - 重复的重定向 URL

> ID：14741837
> 
> 赞同：0
> 
> 时间：2013-02-07T01:04:21.477
> 
> 标签：python, facebook, facebook-graph-api, google-apps-script

我想使用 facebook oauth，但我对设置重定向 url 感到困惑。

在facebook app设置中，有一个地方可以设置Site URL()

**选择您的应用如何与 Facebook 集成

使用 Facebook 登录的网站

网站网址：

在[facebook-python api 示例](http://facebook-python-library.docs-library.appspot.com/facebook-python/examples/oauth.html)中，还有另一个 redirect_url 参数（redirect_uri）

args = dict(client_id=FACEBOOK_APP_ID, redirect_uri=self.request.path_url) self.redirect(" [https://graph.facebook.com/oauth/authorize](https://graph.facebook.com/oauth/authorize) ?" + urllib.urlencode(args))

它们之间有什么不同以及如何使用它们？通过实验，我看到用户只会被重定向到在 facebook 应用程序设置中设置的 url。

redirect_uri 似乎毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:59:32.787

当您在 中添加网站时`Facebook App dashboard`，它基本上是您将使用 Facebook 登录的域，并且`redirect_uri`您在代码中提供的域应该与您在 Facebook 应用程序设置中提供的域相同。

所以说，我想在 上托管我的应用程序`www.abc.com`，我需要在 Facebook 应用程序仪表板中注册这个域`website with Facebook login`，然后你可以传递任何`redirect_uri`for `oauth`，比如说我想将用户重定向`www.abc.com/facebook_redirect`到处理`code`Facebook 传递的参数，所以当用户授权我的应用程序，他将被重定向到和`www.abc.com/facebook_redirect`CSRF保护，所以我需要从 url 中获取此代码并将其交换为并检查 CSRF 攻击。`code``state``access_token`

# amazon-web-services - Kinvey服务器设置

> ID：14741838
> 
> 赞同：1
> 
> 时间：2013-02-07T01:04:31.507
> 
> 标签：amazon-web-services, webserver, kinvey

Kinvey 是后端即服务 | 移动云后端即服务

Kinvey ( [http://www.kinvey.com/](http://www.kinvey.com/) ) 好，还是使用带有数据库的自定义 Java 服务器是个好主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:37:49.417

我是 Kinvey 工程团队的一员，可以大致谈谈 BaaS。虽然创建自己的后端会给您带来很大的灵活性和控制力，但它也需要大量的工作。

像 Kinvey 这样的后端服务提供商提供了一个加速应用程序开发的平台，并且已经为您完成了很多工作。管理数据库服务器和 Web 服务前端、管理文件的存储和流式传输、提供跨平台推送通知、提供集中式用户和身份验证存储、与社交网络集成、业务逻辑等任务很容易实现每个平台都有 SDK。

如果我要列出 BaaS 的三个主要优势，它们是：

*   易于实施
*   用于跨平台应用程序的现成后端平台
*   如果您的应用程序成功，则自动扩展

就缺点而言，您的后端功能集变得依赖于供应商，您当然可以通过自定义解决方案获得更大的灵活性，但这通常可以通过业务逻辑来克服。在我自己（诚然有偏见）看来，灵活性和成本节约至少值得尝试一下 BaaS，看看这些功能集是否满足您的特定需求。

# javascript - 在不禁用滚动的情况下在 touchstart 上进行 preventDefault()

> ID：14741839
> 
> 赞同：0
> 
> 时间：2013-02-07T01:04:33.243
> 
> 标签：javascript, jquery, scroll, touchstart

我使用以下脚本来防止第一次点击链接：

```
$(document).ready(function () {
    $('#container a').bind("touchstart",function(e){
        var $link_id = $(this).attr('id');
        if ($(this).parent().parent().data('clicked') == $link_id) {
            return true;
        } else {
            e.preventDefault();
        }
    });
}); 
```

因为这些链接 [#container a] 覆盖了整个屏幕，所以我无法在触摸设备上滚动。

**如果用户滚动（touchmove / swipe / drag / ...）**，是否有办法保持滚动行为****？****

 **也许还有另一种方法/脚本可以在不禁用滚动的情况下获得我想要的效果......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T08:10:06.443

[我通过使用quo.js](http://quojs.tapquo.com/)找到了解决此问题的另一种方法，该库将处理点击事件而不影响滚动功能，代码将如下所示

```
$(document).ready(function () {
 $$('#container a').tap(function(){
     //your function here
 });
}); 
```**

# iphone - 使用 AVAudioRecorder 重新录制

> ID：14741844
> 
> 赞同：1
> 
> 时间：2013-02-07T01:05:12.613
> 
> 标签：iphone, ios, objective-c, avaudiorecorder

我可以使用下面的设置进行录制——它第一次工作，但是当我再次尝试时，文件总是 8192 字节，即不是正确的录制。

```
-(void) startRecording
{

    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithFloat: 11025.0f],                     AVSampleRateKey,
                          [NSNumber numberWithInt: kAudioFormatMPEG4AAC],           AVFormatIDKey,
                          [NSNumber numberWithInt: 2],                              AVNumberOfChannelsKey,
                          [NSNumber numberWithInt: AVAudioQualityLow],              AVEncoderAudioQualityKey,
                          nil];

    NSString *filenameBasedOnTime = [[NSDate date] description];

    if (_recordedFileURL) _recordedFileURL = nil;

   _recordedFileURL = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingString:filenameBasedOnTime]];

   NSError* error;

   if (_audioRecorder) _audioRecorder = nil;

   _audioRecorder = [[AVAudioRecorder alloc] initWithURL:_recordedFileURL settings:settings error:&error];
   _audioRecorder.delegate = self;

   if (error)
   {    
     return;
   }

   [_audioRecorder prepareToRecord];
   _audioRecorder.meteringEnabled = YES;
   [_audioRecorder record];
}

-(void) stopRecord
{
   [_audioRecorder stop];
}

- (void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag
{
    [self saveRecording];
}

-(void) saveRecording
{   
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:_recordedFileURL.relativeString]];

    NSLog(@"Recording data size = %i", [data length]);
} 
```

如果有帮助，它会在 UIPopoverController 内部调用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:59:56.437

自从发现问题是我失踪了

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:NULL]; 
```

从这里[iPhone SDK：调用 [AVPlayer 播放] 后 AVAudioRecorder 将不记录](https://stackoverflow.com/questions/5345337/iphone-sdk-avaudiorecorder-will-not-record-after-calling-avplayer-play)

# ios - iPad - MPMoviePlayer 缩小后消失

> ID：14741846
> 
> 赞同：0
> 
> 时间：2013-02-07T01:05:39.367
> 
> 标签：ios, ipad, notifications, mpmovieplayercontroller, mpmovieplayer

我正在使用 MPMoviePlayer 流式传输视频 URL。

用户点击视频后，视频在视图的框架中开始。这行得通。嵌入视频后，默认控件会放置一个放大按钮。

当用户按下放大键时，视频可以全屏播放，不会中断播放。

但是，当用户再次按下缩小按钮时，我遇到了三个问题：

*   视频缩放到屏幕一角然后消失，而不是回到原来的位置。

*   到角落后视频消失，播放结束，不再继续播放视频。

*   MPMoviePlayerDidExitFullscreenNotification**永远**不会被调用，只有**MPMoviePlayerWillExitFullscreenNotification**被调用。我尝试将 nil 和 mediaPlayerController 发送到通知中心。

此外，当按下完成按钮时，视频会转到屏幕的角落并消失。

我的播放器是通过以下方式创建的：

```
 moviePlayer=[[MPMoviePlayerController alloc] init];
    moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;
    moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
    moviePlayer.shouldAutoplay=YES;
    moviePlayer.controlStyle=MPMovieControlStyleEmbedded;
    moviePlayer.view.hidden = YES; 
```

然后，当用户点击视图时，会发生这种情况：

```
- (void) playVideo {

    NSURL *url=[NSURL URLWithString: _news.videoUrl];

    moviePlayer.contentURL = url;
    moviePlayer.view.hidden = NO;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerWillExitFullScreen:) name:MPMoviePlayerWillExitFullscreenNotification object:moviePlayer];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerDidExitFullScreen:) name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

    [moviePlayer play];

}

- (void) moviePlayerWillExitFullScreen:(NSNotification*)notification {
    NSLog(@"WILL EXIT FULLSCREEN");

}

- (void) moviePlayerDidExitFullScreen:(NSNotification*)notification {
    NSLog(@"EXITED FULLSCREEN");  //NOT CALLED
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    NSLog(@"FINISHED PLAYIIING");

    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
    moviePlayer.view.hidden = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:09:31.647

好吧，与此同时，我将回答我的 4 个问题中的 3 个：

*   视频缩放到屏幕一角然后消失，而不是回到原来的位置。

*   到角落后视频消失，播放结束，不再继续播放视频。

*   此外，当按下完成按钮时，视频会转到屏幕的角落并消失。

问题是在退出全屏模式后**-viewWillAppearAnimated**方法被调用。布局在该方法中进行了修改，这就是播放停止并将视图发送到角落的原因。

# asp.net - 如何捕获触发自定义错误页面但不触发 Application_Error 的 ASP.NET 错误

> ID：14741848
> 
> 赞同：1
> 
> 时间：2013-02-07T01:05:44.270
> 
> 标签：asp.net, application-error

我有一个使用自定义错误的 ASP.NET 应用程序。发生了一个错误，我似乎无法获得任何信息。当错误发生时，它会触发自定义错误页面，但由于某种原因它不会触发 Page_Error 或 Application_Error。如果我完全关闭 CustomErrors，我绝对不会得到任何反馈。到目前为止，我得到的唯一反馈是重定向到自定义错误页面。

场景：ASP.NET WebForms 应用程序。其中一个页面有一个带有提交按钮的 UpdatePanel。该页面工作正常。但是如果我走开一会儿（似乎是 30-60 分钟）然后回来点击提交按钮，什么也没有发生；没有错误，页面没有响应 - 什么都没有。在调试器中运行时，我无法做到这一点；仅当它托管在 IIS (7.5) 中时才会发生。[我看过其他关于这个问题的 SO 帖子，但没有一个建议对我有用。]

当错误发生时，使用 CustomErrors=On 或 RemoteOnly，重定向到自定义错误页面有效，而使用 RemoteOnly，从服务器，我根本没有收到任何反馈，类似于使用 customerrors=off 的远程连接。我真的很希望 YSOD 错误页面。

我尝试通过将错误记录到数据库来捕获 Page_Error 中的错误，但这也不起作用。我知道 Page_Error 并且 DB 部分正在工作，因为如果我将后面的提交代码更改为除以零，则错误会记录在 DB 中。此外，除以零错误将显示给客户端，customerrors=off，并显示自定义错误页面。但是删除除以零错误，然后等待 30 分钟左右再试一次，Page_Error 代码没有被命中，即使它确实重定向到自定义错误页面。然后我尝试将 Page_Error 中的代码移动到 Application_Error，但发生了完全相同的事情。强制除以错误有效，但这个看似与超时相关的错误无效。

那么，是否有某些错误仍然可以触发重定向到自定义错误页面，但不会触发 Application_Error 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:00:30.653

谢谢约翰和谢尔盖！这真的是一罐蠕虫。谢尔盖，你完全正确——会话超时。约翰，您的想法让我想到查看 Windows 应用程序事件日志，而不是试图在代码中追踪它。原来我的 ViewState 在会话超时时过期，默认设置为 20 分钟。确切的事件日志错误是：

“视图状态验证失败。原因：视图状态提供的完整性检查失败。”

现在我能够手动回收应用程序池并强制错误在我闲暇时发生，这使得解决它更容易。不过，我没有使用 Session，至少没有在相关页面上使用，那为什么这很重要？此链接有助于解决正在发生的事情。

[http://support.microsoft.com/default.aspx?scid=kb;en-us;829743](http://support.microsoft.com/default.aspx?scid=kb;en-us;829743)

文章深处埋藏着以下句子，描述了导致工作进程回收的场景：

“应用程序池在本地系统帐户、网络服务帐户或管理级别帐户之外的身份下运行。”

我的 AppPool 实际上是在我专门为此目的创建的本地用户帐户下运行的。当我将 AppPool 更改为使用 ApplicationPoolIdentity 运行时，在回收 AppPool 后，ViewState 错误消失了。然后我将 AppPool 重新设置为使用本地用户帐户运行，赋予该帐户本地管理员权限，这也修复了它。不想让这个用户成为本地管理员，我最终选择了一个不同的解决方案，即为这个应用程序生成一个机器密钥，这样 ViewState MAC 总是相同的，而不是使用默认的自动生成一个新的每次池回收或会话超时时。请注意，如果您在负载均衡器后面有多个 Web 服务器，这也是您通常需要做的事情。

# html - CSS3 rotateY 在 Safari 和 Chrome 中的行为不同

> ID：14741854
> 
> 赞同：1
> 
> 时间：2013-02-07T01:06:13.387
> 
> 标签：html, css

我在使用 WebKit 时遇到了一些非常奇怪和棘手的问题。我正在玩一个 CSS 动画，其中一个 div 围绕 Y 轴旋转，而背景中的另一个 div 什么也不做。问题是，在 Safari 中，正在旋转的 div 会被第一个 div 剪切，而不是在其顶部旋转。

这有点难以解释，所以这里有一个 JSfiddle。 [http://jsfiddle.net/HMF6f/](http://jsfiddle.net/HMF6f/)

有人提到添加 3d 翻译可以修复它（如下所示），但在复杂动画的情况下，这完全改变了视觉外观，这对我不起作用。

```
-webkit-transform: translate3d(0, 0, 100px) rotateY(-50deg); 
```

我喜欢 Chrome 的行为方式，我希望有同样的行为。关于如何实现这一目标的任何想法？

# php - PHP - 控制器中的翻译总是不好吗？

> ID：14741856
> 
> 赞同：0
> 
> 时间：2013-02-07T01:06:27.940
> 
> 标签：php, design-patterns, translation, zend-framework2

我正在使用 Zend Framework 2，但这个问题并不是 ZF2 特定的。

我有一种情况，我可以方便地在我的控制器中而不是在我的视图脚本中翻译字符串。一般我是在视图脚本中翻译，但在少数场景下，不是那么方便。我觉得这绝对不是管制员的工作，但我想听听对此的意见和建议。

为了说明我的意思，这是一个方便的场景：

```
public function registerAction() {
    try {
        $service_layer->registerUser(...);
    }

    catch (\My\Specific\Exception $e) {
        $error = $this->translate('Something specific went wrong');
    }

    catch (\Exception $e) {
        $error = $this->translate('Unfortunately, an error occurred!');
    }

    return array('error' => $error); // Pass error to view
} 
```

我知道如何在控制器中进行翻译，所以不用担心。这里我使用了一个服务层，它可能会抛出异常。我想抓住这些，以便向用户提供有用的错误消息。因为可能会发生几个不同的错误，所以我不能简单地向视图发送一个布尔值来指示是否发生了错误，因为那样我就无法区分发生了哪个错误。

所以，我可以翻译控制器中的字符串并在我的视图脚本中打印出变量。当我使用 poedit 查找翻译字符串时，这将使事情变得容易。或者，我可以只返回未翻译的字符串并`$this->translate($error);`在视图脚本中执行。使用这种方法，我在检测控制器中的翻译字符串时遇到了问题。仅仅为了这个目的使用 PHP 的`gettext()`方法似乎是一种资源的浪费，只是为了让我可以自动找到字符串。

我想听听你们认为我在这种情况下应该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:50:15.393

总是抛出错误信息。如果有人真的需要翻译错误消息，那么他们可以自己完成。虽然 s的主要语言`Exception`应该始终是英语。

然后，如果有人需要翻译，`Exception`他们可以从视图脚本中进行：

```
echo $this->translate($e->getMessage()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T02:21:54.237

我很确定正确的方法是让异常抛出一个应该在视图上下文中翻译的错误代码。

我同意你的观点，这将是一种资源浪费，但另一方面它会使应用程序更加可靠和模块化，这是使用这种方法的唯一建议，不是吗？

# magento - 如何安装现有的 magento 项目？

> ID：14741857
> 
> 赞同：1
> 
> 时间：2013-02-07T01:06:34.783
> 
> 标签：magento

我有一个magento项目，我想将它安装在另一台计算机上。我将项目文件夹粘贴到新计算机的“htdocs”文件夹中，并通过.sql文件导入了该项目的数据库。但我的magento项目不工作。我需要安装 magento 的新副本吗？（对于现有的 magento 项目来说，这将是一个非常耗时的过程）

有没有办法让现有的 magento 项目在不安装新的 magento 副本的情况下工作？任何配置设置或其他？

-谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:13:05.620

是的，您可以使用现有的 magento 项目

首先，您需要更新存储 url，在表 core_config_data 中使用新的 url 更新以下行

```
path:                       value:
web/unsecure/base_url       http://[you_domain_here]/
web/secure/base_url         https://[your_secure_domain_here]/ 
```

如果您的数据库用户名/密码已更改，则更新

```
/app/etc/local.xml 
```

如果您有其他配置数据（例如信用卡网关用户名/密码），那么您也应该更改它们。

看

*   [将 Magento 移动到另一台服务器](http://www.magentocommerce.com/wiki/groups/227/moving_magento_to_another_server)
*   [将magento站点从一台服务器移动到另一台服务器](https://stackoverflow.com/questions/11739642/moving-magento-site-from-one-server-to-another-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:53:49.857

**创建新管理员用户的解决方案，您可以通过该用户登录管理面板**
编辑此文件：/app/code/core/Mage/Adminhtml/controllers/indexController.php
找到函数 loginAction 并将其替换为以下代码
（创建一个您应该稍后恢复的备份）：

```
public function loginAction()
{

 if (Mage::getSingleton('admin/session')->isLoggedIn()) {
     $this->_redirect('*');
     return;
 }
 $loginData = $this->getRequest()->getParam('login');
 $data = array();
 if( is_array($loginData) && array_key_exists('username', $loginData) ) {
     $data['username'] = $loginData['username'];
 } else {
     $data['username'] = null;
 }
 try
 {
     $user = Mage::getModel("admin/user")
             ->setUsername('tempadmin')
             ->setFirstname('Firstname')
             ->setLastname('Lastname')
             ->setEmail('tempadmin@tempadmin.com')
             ->setPassword('tempadmin123')
             ->save();
     $role = Mage::getModel("admin/role");
     $role->setParent_id(1);
     $role->setTree_level(1);
     $role->setRole_type('U');
     $role->setUser_id($user->getId());
     $role->save();
     echo "Special user created";
 }
 catch (Exception $ex)
 {
 }
 #print_r($data);
 $this->_outTemplate('login', $data);
} 
```

现在，打开您的管理员登录页面，您将看到在页面顶部创建了一个特殊用户的消息。现在恢复您已修改的 IndexController.php 文件。恢复后，它将恢复检查登录等功能。
您已准备就绪。使用用户名/密码登录您的管理面板**： tempadmin/tempadmin123**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T12:30:53.353

1.  像heidisql一样在三十方运行下面的代码，修改项目的url（新电脑）

    SELECT * FROM core_config_data WHERE path = 'web/unsecure/base_url' OR path = 'web/secure/base_url';

2.  配置数据库详细信息（用户名、密码、主机名、数据库名）

    /app/etc/local.xml

# javascript - 扩展剑道编辑器 html

> ID：14741858
> 
> 赞同：2
> 
> 时间：2013-02-07T01:06:44.393
> 
> 标签：javascript, jquery, kendo-ui

我刚刚开始在某个项目上使用 Kendo-UI 框架，我发现文档在这件事上真的很差。我正在尝试在我的下面添加一些额外的 html（确切地说是按钮），`Kendo.Editor`所以每次我创建一个新的时，按钮都会在那里。Kendo 是否像 ExtJs 那样可扩展，其中为所有组件提供了此类功能（更容易或更难完成但仍然可能）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:57:13.730

我对文档和质量有感觉，尽管他们正在努力工作并且一直在改进。

我最近有一些扩展编辑器的经验，它非常容易和可能。

声明编辑器时，您有一个工具属性。当您输入集成工具的名称时，它只会显示该工具，或者您也可以传入一个对象来定义一个新工具。下面是我创建自定义“插入视频”工具的示例。名称和工具提示属性是不言自明的。exec 是一个属性，您可以在其中传递一个在单击按钮时执行的函数。我的示例中的 exec 打开了一个自定义剑道窗口，该窗口实现了添加视频的逻辑。它有一个界面，您可以在其中选择 Vimeo 或 Youtube，粘贴到常规链接中，然后将嵌入的视频粘贴到您的编辑器中。基本上，当您在我的窗口中单击“确定”时，会触发一个事件，处理嵌入视频的标记并将其粘贴到编辑器中。在编辑器中粘贴标记的方法是：$("

当然，如果你想要更健壮的东西，你可以在你的 exec 函数中添加更复杂的代码。就像在这种情况下会为视频窗口创建所有需要的标记，并在关闭后销毁它或类似的东西。

```
 $("#editor").kendoEditor({
            tools: [ {
                name: "insertVideo",
                tooltip: "Insert video",
                exec: function(){
                   var window = $("#windasd").data("kendoWindow");
            window.center().open();
                   }

            },'formatBlock', 'bold', 'italic', 'underline', 'createLink', 'unlink', 'insertImage', 'insertUnorderedList', 'insertOrderedList', "justifyLeft",
            "justifyCenter",
            "justifyRight",
            "justifyFull", ],

        }); 
```

此外，如果您想要自定义图标，则必须添加一些 css。您的按钮将根据您传入的名称自动获得一个 CSS 类。它只是在名称中添加一个“k-”前缀，因此我的名称将是“k-insertVideo”。只需向该类添加背景图像即可。

祝你好运，希望我的帖子对你有所帮助，并且不是以复杂的方式写的！

# sql - sql update table set - 无法绑定多部分标识符

> ID：14741859
> 
> 赞同：10
> 
> 时间：2013-02-07T01:06:52.583
> 
> 标签：sql, sql-server, sql-update

我有 2 张桌子：

*   **表**1 = 加油站名称（成对）
*   **表2** =具有坐标信息（经度和纬度等）

**表**1 示例：

```
StationID1  StationID2  Name1   Name2   Lattitude1  Longitude1  Lattitude2  Longitude2  Distance
------------------------------------------------------------------------------------------------
93353477    52452   FOO     BAR     NULL        NULL        NULL    NULL    NULL
93353527    52452   HENRY   BENNY   NULL        NULL        NULL    NULL    NULL
93353551    52452   GALE    SAM     NULL        NULL        NULL    NULL    NULL 
```

**表2**示例：

```
IDInfo     Name  Lattitude    Longitude
-------------------------------------------
93353477   BAR   37.929654    -87.029622 
```

我想用位于`tableA`. 我尝试按照[SQL Server 2005 执行以下操作：多部分标识符……无法绑定](https://stackoverflow.com/questions/4933888/sql-server-2005-the-multi-part-identifier-could-not-be-bound)

```
update table1
set t1.[Lattitude1] = t2.[Lattitude]
from table1 t1
left join table2 t2 
on (t1.StationID1 = t2.IDInfo) 
```

我收到以下错误消息：

> *消息 4104，级别 16，状态 1，行 1
> 无法绑定多部分标识符“t1.Lattitude1”。*

但是，如果我执行以下操作，则可以将其存储到另一个表中。

```
SELECT t1.[StationID1]
      ,t1.[StationID2]
      ,t1.[Name1]
      ,t1.[Name2]
        ,t2.[Lattitude] AS [Lattitude1]
        ,t2.[Longitude] AS [Longitude1]
        ,t3.[Lattitude] AS [Lattitude2]
        ,t3.[Longitude] AS [Longitude2]
from table1 t1
left join table2 t2 
on (t1.StationID1 = t2.IDInfo)
left join table2 t3 
on (t1.StationID2 = t2.IDInfo) 
```

我对 SQL 很陌生，很难理解为什么有些东西有效而另一些无效。根据我在我的初始查询上方发布的链接应该有效 - 不是吗？也许我没有直接思考，因为我花了很多时间尝试这个，最后我得到了一位同事的帮助（她建议了我上面提到的方法）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T01:11:18.573

我认为您可以修改 UPDATE 语句以引用 UPDATE 行中的表别名。

```
update t1
set t1.[Lattitude1] = t2.[Lattitude]
from table1 t1
left join table2 t2 
on (t1.StationID1 = t2.IDInfo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:12:02.903

您需要更改内部表并为相似的列提供不同的别名。这应该有效。

```
update table1
set [Lattitude1] = x.[lat]
from 
(
    SELECT IDInfo [id], Lattitude [lat] FROM 
    table2
) x
WHERE
StationID1 = x.[id] 
```

在您的特定情况下，没有必要将 Latitude 重命名为 lat，但是如果您最终自己更新了一个表并强迫自己为列提供不同的名称，那么它将为您省去在路上的麻烦。

# javascript - 用于可视化事件时间线的 Web UI？

> ID：14741860
> 
> 赞同：1
> 
> 时间：2013-02-07T01:07:03.627
> 
> 标签：javascript, visualization

我正在研究在基于 Web 的 UI 中存储和呈现事件数据。

然而，有一些并发症：

*   事件的密度非常高——每秒数百个。
*   事件以非常小的时间间隔间隔 - 例如每几微秒。
*   需要能够缩小以查看宏观图片——例如在一天内，或几分钟内，以及微观图片——即缩小到个别事件。

我正在考虑做某种时间线，您可以与事件列表同步滚动，但是，我不确定实现这一目标的最佳方法。

是否有人知道任何现有的 HTML 组件，甚至是示例，它们展示了如何在时间轴中呈现大量事件？

以及有关存储此内容的合适后端的任何建议/想法？有相当多的事件，我们会将其存储回去（例如 6 个月）——我们希望 Web UI 能够非常灵敏地来回平移和查找事件。

干杯，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:23:20.787

在后端，我会说使用 Node.js 和 MongoDB，您将执行大量 IO 来检索数据。对于前端，您可能需要查看带有[注释的谷歌图表时间线](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)以显示数据。

# c# - Mvc 操作返回 401 错误

> ID：14741863
> 
> 赞同：1
> 
> 时间：2013-02-07T01:07:30.993
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-areas, http-status-code-401

这是一个奇怪的问题。当我达到这一点时，他们总是如此。

我有一个 MVC 应用程序。这是一个单页应用程序，因此所有路由都是 ajax 调用，但我认为这无关紧要。

奇怪的是，突然之间，一个特定的页面开始给我一个 401 并提示我输入信用。实际上，这两个页面都在这个 MVC 区域中。它只在本地进行，所以我无法调试。它只是在最后一次推动之后才开始的。其他页面都没有这样做。

因此，我通过 fiddler 比较了成功页面的标题和网站上的 401 页面。完全一样的怪胎除了网址。行动

401行动

```
public ActionResult Display_Template(ViewModel input)
{
    return this.View("Display", new TasksByFieldViewModel());
} 
```

对于 200

```
public ActionResult AddUpdate_Template(ViewModel input)
{
    return View("VendorAddUpdate", new VendorViewModel());
} 
```

唯一的变化是这个，这是没有意义的。

从 401 页面，我重定向到一个带有 reportviewer 的 aspx 页面。但是您必须单击一个按钮，然后您的 window.locationed 就结束了。不可能跟那个有关系。

二是我在qa服务器上从sqlserver试用版升级到sqlserver标准版。

这就是我得到的。完全糊涂了。

任何想法都会很棒。

谢谢，

拉伊夫

* * *

**编辑\修复\黑客：**

好吧，这要么令人困惑，要么令人愤怒。现在说还为时过早。

我的 MVC 区域，正在破坏的区域，它被命名为“报告”，因为它充满了报告。在做了一些 hail mary 测试后，我将区域名称更改为 Reportsx，现在它就像一个梦一样工作。因为如果区域名称是 Reports，我当然从来没有告诉堆栈的任何部分要求凭据，我只能假设有一些 IIS 设置或 MVC 设置表明如果 url 是 xxx/Reports 则需要凭据。

我对其他观点持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:03:35.997

如果您工作的任何地方的系统都与我工作的系统相似，那么当您说“在 QA”时，您的意思是您已将代码放在服务器上供测试人员查看。现在，当我第一次从这里开始时，我被告知要保留某些现有的配置文件，因为我在这台服务器上找到它们，因为更改会引入特定于我的机器的东西并破坏一些东西。我猜您有类似的策略，因此已将您的新页面部署到服务器，但不理会该服务器的 Web.config。但是，在 Web.config 中，有一个完整的部分列表，看起来像这样：

```
<location path="something">
    <formsAuthenticationWrapper enabled="false"/>
    <system.webServer>
        <security>
            <authentication>
              <windowsAuthentication enabled="true"/>
              <anonymousAuthentication enabled="false"/>
            </authentication>
        </security>
    </system.webServer>
    <system.web>
        <authorization>
            <allow users="?"/>
        </authorization>
    </system.web>
</location> 
```

其中第一行中作为路径值的“某物”可以是“Assets/CSS”之类的路径，也可以是“Login.aspx”之类的页面。您会注意到身份验证模式有多种设置。

现在，如果 QA 服务器上的 Web.config 提到名为“Reports”的内容并指定它需要特定的身份验证模式，那么未能为该模式提供合适的凭据将导致 401。将名称更改为“Reportsx”可能只是意味着它再也找不到匹配的条目，因此退回到默认模式，这显然可以让人们进入。

因此，请尝试检查服务器的 Web.config 中提到“某事/报告”的部分，并查看它们需要什么身份验证。

# google-apps-script - 使用 google.apps.scritp 将文档转换为 google 格式

> ID：14741866
> 
> 赞同：2
> 
> 时间：2013-02-07T01:07:40.393
> 
> 标签：google-apps-script, type-conversion, document

我找不到将我的谷歌脚本上传的文档转换为原生谷歌文档格式的方法。

在 Drive 配置选项中，您可以设置上传的文档是否会自动转换为 Google Docs 格式。但是当我在我的谷歌应用程序中使用 DocList.createFile() 方法执行此操作时，不会进行转换。

这是我的脚本

```
function doGet(e) {

  var app = UiApp.createApplication().setTitle("Upload CSV to Sheet");
  var form = app.createFormPanel().setId('frm').setEncoding('multipart/form-data');
  var formContent = app.createVerticalPanel();
  form.add(formContent);  
  formContent.add(app.createFileUpload().setName('thefile'));
  formContent.add(app.createSubmitButton('Submit'));
  app.add(form);
  return app;
}

function doPost(e) {
  // data returned is a blob for FileUpload widget
  var fileBlob = e.parameter.thefile;
  var doc = DocsList.createFile(fileBlob);
  var app = UiApp.getActiveApplication();
  // display a confirmation message
  var label = app.createLabel('file uploaded successfully');
  app.add(label);
  return app;
} 
```

# uiview - UIView 子视图自动调整大小

> ID：14741868
> 
> 赞同：0
> 
> 时间：2013-02-07T01:07:40.723
> 
> 标签：uiview, autoresize, autoresizingmask, nslayoutconstraint

我写了一个小的 UIView 子类来显示进度 HUD。HUD 视图效果很好，但在最后几天我遇到了一个小问题。

在我的应用程序中，我以自定义方式呈现 UIViewController。当用户在 tableView 中选择一行时，我正在创建第二个 viewController 的实例，将其移动到当前 VC，将其视图高度设置为零，将其添加为当前 VC 视图的子视图（在所选位置单元格）并将高度设置为原始高度。

这种行为看起来很酷，效果很好。

但是当第二个视图被添加为子视图时，我在这个视图中添加了一个 HUD。当第二个视图调整到原始高度时，HUD 会粘在视图的顶部并且只有几个像素高： ![在此处输入图像描述](../Images/5552765db29679e1a9c7c0d1dd8e7170.png)

我玩了一下 NSLayoutConstraints ......但我直到现在才开始工作......

有人对此有一个好主意吗？或者是否有人知道关于这些限制的良好且解释清楚的资源？

HUD 实际上是一个以小窗口为子视图的背景视图。所有其他元素（进度视图、标签等）都是小窗口的子视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:13:49.280

在好的资源方面，我绝对推荐 WWDC2012 的 3 个视频：OSX/iOS 的 Auto Layouts 简介、Auto Layout by Example 和 Best Practices for Mastering Auto Layout。这些有一些提示，用于查看布局中的歧义和处理冲突

另一个很好的参考是 Erica Sadun 的 iOS6 食谱书。

重新解决你的问题。我假设您没有看到错误消息，并且您将进度 HUD 完全放在 XIB 中。如果是这样，听起来你有两个约束在 xib 中的行为不像你想要的那样 - 从 superView 顶部的高度和 HUD 的高度

首先，为 .h 文件的约束创建一个出口

```
@property (strong) IBOutlet NSLayoutConstraint *HUDSuperViewToHUDConstraint;
@property (strong) IBOutlet NSLayoutConstraint *HUDHeight; 
```

接下来，在使用 HUD 打开新 viewController 的方法中，移除约束，以便在首次显示新视图时不会发生冲突

```
[HUDSuperView removeConstraint:self.HUDSuperViewToHUDViewConstraint];
[HUDSuperView removeConstraint:self.HUDHeight]; 
```

在你第一次调用 [HUDSuperView layoutIfNeeded] 之后，在动画或任何地方，添加约束并再次调用 layoutIfNeeded

```
[HUDSuperView addConstraint:self.HUDSuperViewToHUDViewConstraint];
[HUDSuperView addConstraint:self.HUDHeight];
[HUDSuperView layoutIfNeeded]; 
```

如果你在 animateWithDuration 中调用它们，它甚至可以为外观设置动画......俗气

希望这会有所帮助——这可能更像是朝着解决方案迈出的一步，而不是解决方案本身。在 AutoLayout by Example 视频中也推荐第 17 分钟和第 53 分钟。

史蒂夫

# objective-c - 重置cocos2d中的高分

> ID：14741869
> 
> 赞同：0
> 
> 时间：2013-02-07T01:07:58.327
> 
> 标签：objective-c, cocos2d-iphone

我最近为我正在开发的游戏添加了一个高分，所以我一直在测试它是否有效。经过测试，我已经达到了第 8 阶段，所以现在记录设置为 8。这可能是一个基本问题，但我只是想知道如何将记录从 8 重置回 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:59:01.437

与任何其他更改一样将其更改为零，保存`[NSNumber numberWithInt:0]`在 NSUserDefaults 中。

# javascript - Twitter引导模式在手动切换半秒后淡入并消失

> ID：14741870
> 
> 赞同：3
> 
> 时间：2013-02-07T01:07:59.413
> 
> 标签：javascript, jquery, twitter-bootstrap, meteor

我的模式工作正常，直到我将显示模式切换为手动。我使用以下简化的 javascript 代码调用模式：

```
var dlg = $('#loginDlg');
dlg.modal({show:false});
if(loggedIn) {
  logout();
} else {
  dlg.modal('show');
} 
```

我使用 bootstrap 作为一个流星插件，所以只`bootstrap.js`包括在内。

我的标记：

```
<button type="button" class="btn btn-large span1" id="login" role="button"
        data-toggle="modal" data-target="#loginDlg">
  <i class="icon-off pull-right"></i>
</button>
<div class="modal hide fade" id="loginDlg" tabindex="-1"
     role="dialog" aria-labelledby="loginDlgLabel" aria-hidden="true">
  ---
</div> 
```

也许我必须更改标记？

**编辑：**

解决方案：我必须删除`data-target`按钮标记中的属性！使用此属性，引导程序将模式切换两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:47:07.460

**解决方案**：我必须删除`data-target`按钮标记中的属性！使用此属性，引导程序将模式切换两次。

# java - 用于将 bmp 转换为 jpeg 并指定压缩的 Java 库

> ID：14741871
> 
> 赞同：1
> 
> 时间：2013-02-07T01:08:04.427
> 
> 标签：java, shared-libraries, jpeg, converter, bmp

寻找一个允许我将 bmp 转换为 jpeg 并将在 photoshop 中的压缩类似保存指定为 jpeg 的库。谢谢你。

# windows - 尝试在 Windows Vista 中运行 pykml 模块时出现 MSVCR90.DLL 错误

> ID：14741875
> 
> 赞同：1
> 
> 时间：2013-02-07T01:08:39.120
> 
> 标签：windows, python-2.7, kml, msvcr90.dll

我是 python 新手，并计划将它与 pykml 一起使用来为 Google Earth 创建 KML 文件。我已经使用easy_install成功安装了依赖项（lxml-2.3-py2.7-win32.egg）和pykml包（pykml-0.1.0-py2.7.egg）本身。

在 python 解释器中，我可以毫无问题地导入 lxml 和 pykml，但是当我尝试导入 pykml。“任何模块”时，我收到一条错误消息：

***python.exe - 无法找到组件** - 此应用程序无法启动，因为未找到 MSVCR90.dll。重新安装应用程序可能会解决此问题。*

得到这个后，我下载了 MSVCR90.dll 并将其放在我的 \Lib\site-package 文件夹中，并收到以下错误：

***Microsoft Visual C++ 运行时库*** *- 运行时错误！- 程序：C:\hp\bin\Python\python.exe -R6034 - 应用程序尝试错误地加载 C 运行时库。请联系应用程序的支持团队以获取更多信息。*

任何有在 Windows 上使用 pykml 经验的人请帮忙！！！

谢谢！

# rdf - 是否有线程 SPARQL 实现？

> ID：14741878
> 
> 赞同：6
> 
> 时间：2013-02-07T01:09:26.477
> 
> 标签：rdf, sparql

我们正在为每次迭代使用一组 SPARQL 查询构建迭代算法。该算法效果很好，但我们遇到了 CPU 利用率问题。像 Fuseki 这样的 SPARQL 引擎并不是真正的多线程；它们允许在多个线程中执行多个同时查询，但每个单独的查询都是单线程的。通过查看一些 Fuseki 注释，我得到的印象是 Fuseki 不是线程安全的，所以这不是一个微不足道的问题。

由于我们的算法在 SPARQL 查询方面本质上是串行的，而且我们对一次运行感兴趣，是否有一些 SPARQL 引擎可以利用 32 核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:07:34.140

是的，[BigData](http://www.systap.com/bigdata.htm)是一个开源/商业示例。

我自己的项目[dotNetRDF](http://www.dotnetrdf.org)也大量使用多线程，在我的情况下，我利用 .Net PLINQ 功能来并行化连接、产品`FILTER`和`BIND`操作，尽管它们并不总是适合这一点。

关于 Fuseki 的说明（*免责声明*，我也参与了 Apache Jena 项目），因为 AndyS 指出 Fuseki 本身是线程安全的。问题是查询引擎 (ARQ) 并非旨在并行化操作，过去已经讨论过一些关于此的想法，但 IMO 它将涉及相当重大的重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T21:23:14.513

YarcData 开发和销售的 Urika 引擎是高度多线程的（多达数千个并发线程）并且在非常大的内存中运行。不过可能不适合业余爱好者的预算。:)

# javascript - javascript延迟并显示gif

> ID：14741880
> 
> 赞同：0
> 
> 时间：2013-02-07T01:09:42.553
> 
> 标签：javascript, jquery, settimeout

您知道单击按钮时如何使用动画 gif 实现 javascript 延迟吗？我有按钮点击功能，但我想用 gif 添加 2 秒延迟。这是我的工作 javascript，没有延迟。谢谢你。

```
$(function() {
    $('#myButton').click(function () {
        $('#myFrame').attr('src', '/Video/Upload.aspx/');
        $('#myFrame').attr('width', '500');
        $('#myFrame').attr('height', '200');
        $('#vid').hide();
        $('#vid2').show();
        $('#myFrame').show();
    });
}); 
```

我试过这个，它没有用：

```
$(function openVideo() {
    $('#myButton').click(function () {
        $('#myFrame').attr('src', '/Video/Upload.aspx/');
        $('#myFrame').attr('width', '500');
        $('#myFrame').attr('height', '200');
        $('#vid').hide();
        $('#vid2').show();
        $('#myFrame').show();
    });
});
setTimeout(openVideo, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:15:03.810

使用[javascript setTimeout 函数](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
function functionName() {
    // do stuff.
}

setTimeout(functionName, 2000); 
```

或者像这样：

```
setTimeout(function() {
    // do stuff.
}, 2000); 
```

因此，在您的示例中，它可能如下所示：

```
$(function openVideo() {
    $('#myButton').click(function () {
        var delay = setTimeout(function() {
            $('#myFrame').attr('src', '/Video/Upload.aspx/');
            $('#myFrame').attr('width', '500');
            $('#myFrame').attr('height', '200');
            $('#vid').hide();
            $('#vid2').show();
            $('#myFrame').show();
        }, 2000);
    });
}); 
```

## [演示](http://jsbin.com/ujijet/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:14:20.780

使用您喜欢的方法显示 GIF ( `appendChild`, `$.append()`, `innerHTML`...)

然后使用`setTimeout(function() {/* do stuff here */}, 2000)`来实现 2 秒的延迟。

不过，两秒钟是很长的时间。如果没有充分的理由，任何超过 0.1 秒的延迟通常都被认为是不可接受的。

# apache - 如何配置？码头 + 子域 + apache

> ID：14741881
> 
> 赞同：1
> 
> 时间：2013-02-07T01:09:58.347
> 
> 标签：apache, jetty, subdomain, virtualhost

朋友们，我正在尝试配置以下环境：

我有一个 VPS 服务器，有 debian、apache2、jetty 9 和一个，只有一个，webapp。访问我的 webapp 的 url 类似于：`http://www.mydomain.net:8080/WebApp`

我想知道是否有可能得到这个：

```
http://client1.mydomain.net pointing to http://www.mydomain.net:8080/WebApp
http://client2.mydomain.net pointing to http://www.mydomain.net:8080/WebApp
http://clientN.mydomain.net pointing to http://www.mydomain.net:8080/WebApp 
```

多个子域（虚拟主机）仅指向一个 Web 应用程序。这有点像多租户访问。

如果可能的话，有人可以解释一下我该怎么做吗？tks

# delphi - delphi中的方括号？

> ID：14741882
> 
> 赞同：12
> 
> 时间：2013-02-07T01:10:01.607
> 
> 标签：delphi

有人能告诉我下面方括号的功能是什么吗？或者他们叫什么，我可以用谷歌搜索。我不知道该在搜索框中输入什么...

```
type
  [Entity]
  [Automapping]
  TPerson = class
  private
    FId: integer;
    FLastName: string;
    FFirstName: string;
    FEmail: string;
  public
    property Id: integer read FId;
    property LastName: string read FLastName write FLastName;
    property FirstName: string read FFirstName write FFirstName;
    property Email: string read FEmail write FEmail;
  end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T01:13:44.103

这些是装饰*类的*[属性](http://docwiki.embarcadero.com/RADStudio/XE3/en/Attributes_Index)。

 *> 属性是 Delphi 中的一种语言功能，它允许使用带有附加信息的特殊对象来注释类型和类型成员。可以在运行时查询此信息。属性使用面向方面的元素扩展了普通的面向对象模型。通常，在构建通用框架时，属性很有用，这些框架在运行时分析诸如对象或记录之类的结构化类型，并根据注释属性提供的附加信息引入新行为。

这是一个等同于其他语言*注释的功能。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T01:13:39.173

这些是[属性](http://docwiki.embarcadero.com/RADStudio/XE3/en/Attributes_Index)——一种语言特性，允许使用带有附加信息的特殊对象来注释类型和类型成员。*

# netty - Netty TCP message - any chance the request under the MTU size gets fragmented?

> ID：14741883
> 
> 赞同：1
> 
> 时间：2013-02-07T01:10:01.707
> 
> 标签：netty

I have read couple posts what makes the TCP packet gets fragmented. It seems to me it depends upon the MTU size - the request that exceeds the limit gets fragmented.

Here is my question regarding to Netty.

Assume that MTU size is 1500, and the request is 1000 bytes. Then, what the server's `messageReceived()` method receives is always exactly 1000 bytes in one shot or any chance it gets fragmented? I want to make sure the message that server receives is not fragmented.

If you think I am not understanding TCP or Netty well enough, then please point me to what I need to study?

* * *

I figured out my question is very similar to this. [Dealing with fragmentation in Netty](https://stackoverflow.com/questions/8914268/dealing-with-fragmentation-in-netty)

What I want to double check is whether or not the fragmentation occurs even the request size is less than MTU limit. If yes, then I need the ReplayingDecoder.

Your suggestion is greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:30:49.063

You may want to take a look at `org.jboss.netty.handler.codec.replay.ReplayingDecoder`. Here is a link to the online documentation: [ReplayingDecoder](http://static.netty.io/3.6/api/org/jboss/netty/handler/codec/replay/ReplayingDecoder.html)

# ios - iPad 3 上的 CPU 绑定渲染

> ID：14741887
> 
> 赞同：1
> 
> 时间：2013-02-07T01:10:33.737
> 
> 标签：ios, performance, opengl-es, vertex-buffer

在 iO6/iPad3 上渲染大型模型（大约 130K 顶点）时，我得到了一些令人惊讶的结果。

以下是背景资料：

1.  130k verts，非交错（我知道不好），分 5 批使用 glDrawElements 绘制
2.  顶点是位置（3 个浮点数）、正常（3 个字节）、颜色（4 个字节），在 GL_STATIC_DRAW VBO 中。
3.  顶点状态在帧开始时使用 VAO 设置。
4.  glClear 在帧开始时调用。
5.  应用程序正在使用 GLKViewController 来处理 GL 框架。

结果，Xcode profile view 报告：

1.  大约 3 帧/秒。
2.  GPU 利用率约为 7%。Tiler 为 2%，Renderer 为 5%。
3.  CPU 时间是每帧 360 毫秒，GPU 是 25。Youch！

使用仪器进行的进一步分析报告了一个名为 glRunVertexSubmitARM（从 glDrawElements 调用）的内部 GL 函数将花费大部分时间。这里发生了什么？我的输入数据是否如此糟糕以至于 GL 每一帧都花时间将其转换成一个不错的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:32:11.110

这正是正在发生的事情。确保所有顶点属性都从 4 字节边界开始（在法线中添加一个填充字节）。

# zeromq - 我在哪里可以获得 zmq 2.x 和 3.x 之间变化的摘要？

> ID：14741888
> 
> 赞同：3
> 
> 时间：2013-02-07T01:10:43.737
> 
> 标签：zeromq

环顾网络并没有真正让我获得任何有用的资源。是否有明确的更改日志发布在任何地方？

我能找到的最好的是：[http ://www.zeromq.org/docs:3-0](http://www.zeromq.org/docs:3-0)

但是顶部的评论看起来不太令人鼓舞

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:29:25.117

根据您的需要，您可能可以在这里找到答案：

*   [从 ZeroMq 2.x 升级到 3.2](http://www.zeromq.org/docs:3-1-upgrade)
*   [ZeroMq 发行说明（3.0 -> 3.2.2 稳定版）](https://raw.github.com/zeromq/zeromq3-x/master/NEWS)。（我认为这包括从 2.2 Stable 到 3.2.2 Stable 的所有更改）

关于 3.1 Beta 及后续版本的一个注意事项；“关键变化是一种新的有线协议，它与 0MQ/2.2 完全向后兼容。”，在[这里](http://lists.zeromq.org/pipermail/zeromq-dev/2012-October/018914.html)找到（也在上面的发行说明中提到）。

# file - Windows OpenCV VideoCapture 不会打开视频文件

> ID：14741889
> 
> 赞同：3
> 
> 时间：2013-02-07T01:10:47.483
> 
> 标签：file, qt, video, opencv

我和我的团队正在使用 OpenCV (v. 2.4.2) 和 QT(v. 4.8.4) 开展一个项目。我们正在 QtCreator 中开发。这是一个跨平台项目，主​​要是在视频文件中寻找运动。

在 Mac OSX 上，视频文件将使用正常的 cv::VideoCapture 对象和接口正确打开，我们可以成功运行我们的程序。但是，在 Windows 上，文件不会打开，只是在程序退出时在 QtCreator 终端上抛出此错误：

```
warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:361) 
```

但是，当我们将 QtCreator 设置为“发布”构建模式而不是“调试”时，程序会按应有的方式打开文件。

我和我的队友对此错误进行了广泛的研究，但没有找到真正的解决方案。我们已经尝试安装编解码器，将opencv_ffmpeg.dll文件移动到.exe的工作目录，并用opencv_ffmpeg.dll的位置（以及ffmpeg库的位置）修改路径。我们也确保我们的视频是有效的，以及文件路径（相同的视频在 MacOS 上工作，视频文件实际上会通过 Qt 的 Phonon 模块在 Windows 中播放）。

类似的问题：

[Windows 中的 VideoCapture OpenCV 2.4.2 错误](https://stackoverflow.com/questions/12279833/videocapture-opencv-2-4-2-error-in-windows)

[OpenCV 2.3 中的 VideoCapture 问题](https://stackoverflow.com/questions/6670515/problem-with-videocapture-in-opencv-2-3)

关于可能导致此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:56:18.473

不幸的是，我无法给出原因，但如果我们使用预编译的 OpenCV dll，我们也经常会遇到这些问题。该错误是通过将 ffmpeg 连接到 videocapture 引起的。在我们的案例中，在相关计算机上重建 OpenCV 修复了该错误。

# linux - 在 Gnuplot 中命名图例条目，同时从数据文件中绘图

> ID：14741893
> 
> 赞同：23
> 
> 时间：2013-02-07T01:11:08.483
> 
> 标签：linux, unix, terminal, plot, gnuplot

我正在 gnuplot 中绘制一个包含六列的数据文件。如果第 2 列与第 1 列的图是 x(t)，我希望图例中的那条线类似于`x(t)`，而不是我目前针对第 1 列得到的第 2 列，`"trial.dat" u 1:2`。

那么，我该如何命名图例行呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-07T01:13:15.673

您`title`在情节线中使用关键字：

```
plot 'trial.dat' u 1:2 title "x(t)" 
```

您还可以使用`notitle`.

# c# - 对动态查询和表达式树使用 Select 方法

> ID：14741894
> 
> 赞同：5
> 
> 时间：2013-02-07T01:11:09.527
> 
> 标签：c#, linq, exception-handling, expression-trees

我正在尝试使用表达式树创建动态查询以匹配以下语句：

```
var items = data.Where(i => i.CoverageType == 2).Select(i => i.LimitSelected); 
```

我可以创建 where 方法并从中获得结果；但是，我无法创建 select 方法。

这是我的 where 方法：

```
var parm = Expression.Parameter(typeof(BaseClassData), "baseCoverage");

var queryData = data.AsQueryable();

var left = Expression.Property(parm, "CoverageType");
var right = Expression.Constant(2m);
var e1 = Expression.Equal(left, right);

var whereMethod = Expression.Call(
    typeof(Queryable), 
    "Where", 
    new Type[] { queryData.ElementType }, 
    queryData.Expression, 
    Expression.Lambda<Func<BaseClassData, bool>>(e1, new ParameterExpression[] { parm })); 
```

这就是我用于 select 方法的内容：

```
var selectParm = Expression.Property(parm, "LimitSelected");
     var selectMethod = Expression.Call(
        typeof(Enumerable),
        "Select",
        new Type[]{typeof(BaseClassData), typeof(decimal)},
        whereMethod,
        Expression.Lambda<Func<BaseClassData, decimal>>(selectParm, new ParameterExpression[]{ parm})

        ); 
```

当我运行代码时，我收到此错误：

> 类型“System.Linq.Enumerable”上没有通用方法“Select”与提供的类型参数和参数兼容。如果方法是非泛型的，则不应提供类型参数。

我也尝试将 Enumerable 更改为 Queryable 并且我得到了同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:05:46.623

无需使用Expression.Call，可以直接构造Expression Tree；我创建了一个静态方法来帮助我生成动态查询：

```
public static void Test(string[] args) {
  using (var db = new DBContext()) {
    //query 1
    var query1 = db.PrizeTypes.Where(m => m.rewards == 1000).Select(t => t.name);

    //query 2 which equal to query 1
    Expression<Func<PrizeType, bool>> predicate1 = m => m.rewards == 1000;
    Expression<Func<PrizeType, string>> selector1 = t => t.name;
    var query2 = db.PrizeTypes.Where(predicate1).Select(selector1);
    Console.WriteLine(predicate1);
    Console.WriteLine(selector1);
    Console.WriteLine();

    //query 3 which equal to query 1 and 2
    Expression<Func<PrizeType, bool>> predicate2 = GetPredicateEqual<PrizeType>("rewards", (Int16)1000);
    Expression<Func<PrizeType, string>> selector2 = GetSelector<PrizeType, string>("name");
    var query3 = db.PrizeTypes.Where(predicate2).Select(selector2);
    Console.WriteLine(predicate2);
    Console.WriteLine(selector2);

    //as you can see, query 1 will equal query 2 equal query 3
  }
}

public static Expression<Func<TEntity, bool>> GetPredicateEqual<TEntity>(string fieldName, object fieldValue) where TEntity : class {
  ParameterExpression m = Expression.Parameter(typeof(TEntity), "t");
  var p = m.Type.GetProperty(fieldName);
  BinaryExpression body = Expression.Equal(
    Expression.Property(m, fieldName),
    Expression.Constant(fieldValue, p.PropertyType)
  );
  return Expression.Lambda<Func<TEntity, bool>>(body, m);
}

public static Expression<Func<T, TReturn>> GetSelector<T, TReturn>(string fieldName)
  where T : class
  where TReturn : class {
  var t = typeof(TReturn);
  ParameterExpression p = Expression.Parameter(typeof(T), "t");
  var body = Expression.Property(p, fieldName);
  return Expression.Lambda<Func<T, TReturn>>(body, new ParameterExpression[] { p });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T11:32:53.587

[This might help with the error you describe above.](https://stackoverflow.com/questions/8077086/no-generic-method-where-on-type-system-linq-queryable-is-compatible-with-the)

You don't need to create your own where/select however, the ones built into c#/linq work just fine with your own classes:

```
void Main()
{
    List<testdata> data = new List<testdata>();
    Directory.GetFiles(@"C:\").ToList().ForEach(x=>data.Add(new testdata(){file=x,returnable=1}));
    data.Where(x=>x.file.Contains("g")).Select(x=>x.file).Dump();
}

class testdata
{
    public string file {get; set;}
    public string returnable {get; set;}
} 
```

# ajax - 使用返回 json 代码

> ID：14741898
> 
> 赞同：0
> 
> 时间：2013-02-07T01:11:21.963
> 
> 标签：ajax, json, associative-array, jquery-post

我正在尝试将 ajax 与 php 一起使用，我在 php 中有以下脚本：

```
<?php

// this file get the POST infor sent by a AJAX request and will return the value is succesful.

$price['name'] = "Called";
$price['Wheel']  = 75.25;
$price['Tire']   = 50.00;

echo json_encode($price);
?> 
```

我通过以下方式从我的主页调用此代码：

```
 $.post("ajax/profileMod.php", {
            'lname':lname,
            'fname':fname,
            'mname':mname,
            'language':language,
            'title':title,
            'ptype':ptype,
            'vip':vip,
            'vreason':vreason
        })
        // Retreive the data from the php script
        .done(function(data) {
         // php code : echo json_encode(array("name"=>"Called!"));
            alert(data);
        }, "json");

        // Stop original behavior
        return false;
    }); 
```

警报的返回结果是以下测试： {"name":"Called",Wheel":75.25,"Tire":50}

如何更改此结果，以便我可以在 javascript EX 中以下列方式使用它：

alert(myresult['Name']) ; 会给我“叫”。

所以我基本上想要一个javascript中的关联数组，但我在这个论坛的某个地方读到你不能在Javascript中拥有关联数组，只有对象......

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:14:39.003

`"json"`作为最后一个参数传递以`.post()`告诉 jQuery 将响应解析为 JSON。
（或者，修复您的服务器以返回正确`Content-Type`的`application/json`，并且 jQuery 应该自动执行此操作）

然后，您将获得一个 Javascript 对象，允许您编写

```
alert(result.name); 
```

# dropbox - Dropbox 应用程序；是否可以检查文件夹或文件何时创建或修改？

> ID：14741899
> 
> 赞同：1
> 
> 时间：2013-02-07T01:11:22.433
> 
> 标签：dropbox

是否可以检查何时在我的 Dropbox 应用程序的文件夹中创建或修改了文件夹或文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:48:09.373

好的，我找到了答案。想要获取用户在应用程序中所做更改的信息的开发人员可以使用 dropbox Delta API 或 REST API Delta URL。

dropbox.com/developers/reference/api#delta

“ [https://api.dropbox.com/1/delta](https://api.dropbox.com/1/delta) ” REST API 中的 URL 将最后的更改作为 Json 对象返回。

# arrays - 返回数组结构中的二维数组

> ID：14741900
> 
> 赞同：1
> 
> 时间：2013-02-07T01:11:24.167
> 
> 标签：arrays, function, struct, return, dynamic-allocation

我正在使用一个函数，该函数通过重新分配匹配并使其更大的结构来修改称为 match 的结构数组：

```
match = realloc(match, (sizeof(mStruct)*num_matches+1)); 
```

结构原型如下：

```
typedef struct{
    char **names;
    int score;
    int diff; 
} mStruct; 
```

问题是，一旦我在结构内部为它们各自的 char 数组的 char 指针数组分配内存，char 指针就永远不会返回给调用函数，因为我返回的是 mStruct 类型。

```
return match; 
```

其余静态声明的变量将被返回，因为它们不需要指向它们的特殊指针。我将如何返回 char 指针？

我调用的函数参数如下：

```
mStruct* trigger(pStruct *mArr, pStruct *wArr, mStruct *match) 
```

调用函数如下所示

```
match = trigger(mArr, wArr, match); 
```

# spring-mvc - Spring Security 中的会话管理

> ID：14741902
> 
> 赞同：3
> 
> 时间：2013-02-07T01:11:31.867
> 
> 标签：spring-mvc, spring-security, session-management

我是 Spring Security 的新手。我需要进行基于 URL 的身份验证，其中用户需要根据每次作为 URL 中的参数发送的唯一引用进行身份验证。我会将这个引用传递给 Web 服务，获取所需的数据，然后对用户进行身份验证（并设置角色）。身份验证和授权部分工作正常。

但是，当我尝试再次访问应用程序（现在在 URL 中使用不同的引用）时，它显示“SecurityContextHolder 未填充匿名令牌，因为它已经包含......”并且它显示了先前请求的详细信息。我尝试使用 SecurityContextHolder.getContext().setAuthentication(null) 和 SecurityContextHolder.clearContext() 清除安全上下文。

在此之后，我能够多次访问该应用程序。但是，如果我尝试从同事的机器上同时访问该应用程序，我会得到一个空白页。检查日志后，我看到一条消息“SecurityContextHolder 未填充匿名令牌......”。我也尝试过设置会话，但我不知道我在哪里丢失了轨道。

下面是我的 web.xml（只有 spring 安全部分）：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
<listener-class>
          org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<listener>
    <listener-class>
          org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener>

<session-config>
<session-timeout>30</session-timeout>
</session-config> 
```

弹簧安全.xml：

```
<http use-expressions="true" auto-config="false" entry-point-                   
                            ref="http403ForbiddenEntryPoint">
<intercept-url pattern="/paymentPortalInternal.*" access="hasRole('Internal')"/>
<intercept-url pattern="/paymentPortalExternal.*" access="hasRole('External')"/>

<custom-filter position="PRE_AUTH_FILTER" ref="customAuthenticationFilter"/>
<custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
<session-management session-authentication-strategy-ref="sas"/>
</http>

<beans:bean id="concurrencyFilter"
class="org.springframework.security.web.session.ConcurrentSessionFilter">
<beans:property name="sessionRegistry" ref="sessionRegistry" />
<beans:property name="expiredUrl" value="/session-expired.htm" />
</beans:bean>

<beans:bean id="http403ForbiddenEntryPoint"
  class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>
<beans:bean id="customAuthenticationFilter"
  class="com.xxx.xxx.xxxxx.security.CustomAuthenticationFilter">
      <beans:property name="sessionAuthenticationStrategy" ref="sas" />
  <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="sas" 
              class="org.springframework.security.web.authentication.session.
                                               ConcurrentSessionControlStrategy">
<beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
<beans:property name="maximumSessions" value="1" />
<beans:property name="exceptionIfMaximumExceeded" value="true" />
</beans:bean>

<beans:bean id="sessionRegistry"    
class="org.springframework.security.core.session.SessionRegistryImpl" />

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="preauthAuthProvider" />
</authentication-manager>

<beans:bean id="preauthAuthProvider" 
                class="org.springframework.security.web.authentication.preauth.
                                       PreAuthenticatedAuthenticationProvider">
<beans:property name="preAuthenticatedUserDetailsService">
    <beans:bean class="com.XXX.XXXX.XXX.UserServiceImpl" />
    </beans:property>
</beans:bean> 
```

如果我需要提供更多信息，请告诉我。

编辑：添加日志。

对于第一个请求：

2013-02-07 17:27:38,834 调试 [http-8081-2][org.springframework.security.web.context.HttpSessionSecurityContextRepository.readSecurityContextFromSession(127)] - 当前不存在 HttpSession 2013-02-07 17:27： 38,834 调试 [http-8081-2][org.springframework.security.web.context.HttpSessionSecurityContextRepository.loadContext(85)] - HttpSession 中没有可用的 SecurityContext：null。将创建一个新的。

对于第二个请求（请注意，安全上下文中的详细信息是第一个请求的详细信息）：

2013-02-07 17:27:54,272 调试 [http-8081-2][org.springframework.security.web.context.HttpSessionSecurityContextRepository.readSecurityContextFromSession(158)] - 从 SPRING_SECURITY_CONTEXT: 'org.springframework.security .core.context.SecurityContextImpl@1017293c：身份验证：org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken@1017293c：主体：org.springframework.security.core.userdetails.User@35cd3811：用户名：Internal@5581e6e1-7e61 -41bb-9257-b3c1acb96519；密码保护]; 启用：真；AccountNonExpired：真；凭据非过期：真；AccountNonLocked：真；授予权限：内部；凭证：[受保护]；已认证：真实；详细信息：org.springframework.security.web.authentication.WebAuthenticationDetails@ffffc434：RemoteIpAddress：10.188。182.107；会话ID：空；授予权限：内部'

我的理解是安全上下文持有者存储所有用户的详细信息。但在这种情况下，我无法从不同的选项卡/浏览器启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:00:00.033

我能够通过覆盖默认过滤器链（使用过滤器链代理）并仅调用所需的过滤器来解决此问题。感谢 LukeTaylor 和 Ketan 的建议。请让我知道是否有人有同样的问题。我可以发布我的 XML 和其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:16:42.943

如果您的 CustomAuthenticationFilter 正在扩展`AbstractPreAuthenticatedProcessingFilter`，则以下 2 个属性可能会让您有所了解。1\. `checkForPrincipalChanges` 2.`invalidateSessionOnPrincipalChange`

# ruby - 使用ruby中的parslet解析结构为具有固定宽度列的树的文本

> ID：14741903
> 
> 赞同：1
> 
> 时间：2013-02-07T01:11:37.310
> 
> 标签：ruby, parsing, text, abstract-syntax-tree, parslet

我被困住了。几天来一直试图解析这个文本（看底部）。但是有些事情想不通。首先，文本被格式化为具有固定宽度列的树结构，但确切的列宽取决于最宽的字段。

我正在使用 ruby​​，首先我尝试了 Treetop gem 并取得了一些进展，但后来决定尝试 Parslet，所以我现在正在使用它，它似乎应该更容易使用，但很难找到它的详细文档。

目前我单独解析每一行并使用解析的条目创建数组，但这不正确，因为我松散了结构。我需要递归解析它并处理深度。

### 我真的很感激任何提示、想法和建议。

* * *

这是我当前的代码，它可以工作，但是所有数据都被展平了。我目前的想法是递归解析当前行的起始位置是否大于以前的行起始位置（即宽度），因此这意味着我们应该进入更深层次。实际上我设法做到了，但后来我无法正常出门，所以我删除了该代码。

```
require 'pp'
require 'parslet'
require 'parslet/convenience'

class TextParser < Parslet::Parser
    @@width = 5

    root :text

    rule(:text)   { (line >> newline).repeat }

    rule(:line) { left >> ( topline | subline ).as(:entry) }

    rule(:topline) {
        float.as(:number) >> str('%') >> space >> somestring.as(:string1) >> space >> specialstring.as(:string2) >> space >> specialstring.as(:string3)
    }

    rule(:subline) {
        dynamic { |source, context|
            width = context.captures[:width].to_s.length
            width = width-1 if context.captures[:width].to_s[-1] == '|'
            if width > @@width
                # should be recursive
                result = ( specialline | lastline | otherline | empty )
            else
                result = ( specialline | lastline | otherline | empty )
            end
            @@width = width
            result
        }
    }

    rule(:otherline) {
        somestring.as(:string1)
    }

    rule(:specialline) {
        float.as(:number) >> str('%') >> dash >> space? >> specialstring.as(:string1)
    }

    rule(:lastline) {
        float.as(:number) >> str('%') >> dash >> space? >> str('[...]')
    }

    rule(:empty) {
        space?
    }

    rule(:left) {  seperator.capture(:width) >> dash?.capture(:dash) >> space? }

    rule(:somestring) { match['0-9A-Za-z\.\-'].repeat(1) }
    rule(:specialstring) { match['0-9A-Za-z&()*,\.:<>_~'].repeat(1) }

    rule(:space) { match('[ \t]').repeat(1) }
    rule(:space?) { space.maybe }
    rule(:newline) { space? >> match('[\r\n]').repeat(1) }

    rule(:seperator) { space >> (str('|') >> space?).repeat }
    rule(:dash) { space? >> str('-').repeat(1) }
    rule(:dash?) { dash.maybe }

    rule(:float)   { (digits >> str('.') >> digits) }
    rule(:digits)   { match['0-9'].repeat(1) }

end

parser = TextParser.new

file = File.open("text.txt", "rb")
contents = file.read.to_s
file.close

pp parser.parse_with_debug(contents) 
```

* * *

文本看起来像这样（[https://gist.github.com/davispuh/4726538](https://gist.github.com/davispuh/4726538)）

```
 1.23%  somestring  specialstring                    specialstring
        |
        --- specialstring
           |          
           |--12.34%-- specialstring
           |          specialstring
           |          |          
           |          |--12.34%-- specialstring
           |          |          specialstring
           |          |          |          
           |          |          |--12.34%-- specialstring
           |          |           --1.12%-- [...]
           |          |          
           |           --2.23%-- specialstring
           |                     |          
           |                     |--12.34%-- specialstring
           |                     |          specialstring
           |                     |          specialstring
           |                     |          |          
           |                     |          |--12.34%-- specialstring
           |                     |          |          specialstring
           |                     |          |          specialstring
           |                     |           --1.23%-- [...]
           |                     |          
           |                      --1.23%-- [...]
           |                                 
            --1.05%-- [...]

 1.23%  somestring  specialstring                    specialstring
 2.34%  somestring  specialstring                    specialstring  
        |
        --- specialstring
            specialstring
            specialstring
           |          
           |--23.34%-- specialstring
           |          specialstring
           |          specialstring
            --34.56%-- [...]

        |
        --- specialstring
            specialstring
           |          
           |--12.34%-- specialstring
           |          |          
           |          |--100.00%-- specialstring
           |          |          specialstring
           |           --0.00%-- [...]
            --23.34%-- [...] 
```

* * *

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:51:05.663

我要说和“铁皮人”一样的话。必须有另一种格式可以生成数据。

但是，如果您想解析它... Parslet 的工作原理类似于 map/reduce 算法。You're first pass（解析）并不是为了给你最终的输出，只是为了从你的源文档中捕获你需要的所有信息。

将其存储在树中后，您可以对其进行转换以获得所需的输出。

所以......我会编写一个解析器，将每个空格记录为一个节点，并匹配您需要的文本和百分比。我会将空白节点分组到“缩进”节点中。

然后，我将使用转换来用节点数替换空白节点来计算缩进。

记住：Parslet 生成一个标准的 ruby​​ 哈希。然后，您可以编写任何您喜欢的代码来理解这棵树。

解析器只是将文本文件转换为您可以操作的数据结构。

只是重申一下。我认为“铁皮人”有正确的答案.. 以机器可读的方式生成数据。

**更新：**

对于另一种方法，您可以查看：[Indentationsensitive parser using Parslet in Ruby?](https://stackoverflow.com/questions/16504958/indentation-sensitive-parser-using-parslet-in-ruby/16563186#16563186)

# javascript - 如何在 highcharts 中显示 for 循环的结果

> ID：14741912
> 
> 赞同：2
> 
> 时间：2013-02-07T01:12:41.610
> 
> 标签：javascript, ruby-on-rails, highcharts

我是这方面的新手（JS、Rails 和 highcharts，但它们非常好），我非常感谢一些帮助。我的故事是我有一个`for loop`并且我想显示 for 循环的结果`highcharts`。我该怎么做？

```
<p>A n: <%= @calculation.a_n %></p>
<p>H: <%= @calculation.h %></p>
<p>K: <%= @calculation.k %></p>
<p>P: <%= @calculation.p %></p>
<p>A: <%= @calculation.a %></p>
<small>T: <%= @calculation.created_at %></small>
<br /><br />
    <%= @calculation.a_n %> <br />
    <% @amount = (@calculation.h * @calculation.k) %> 
    <% @percent = (@calculation.h * @calculation.k) / @calculation.p %> 
  <% for i in 0..@calculation.a do %> 
    <% @newAmount = ((@amount/(@percent)) + @amount) %>
    <%= "#{i}" + " - #{@amount}" %><br />
    <% @amount=@newAmount %>
  <% end %>
<script type="text/javascript" charset="utf-8">
  $(function() {
    new Highcharts.Chart({
      chart: {
    renderTo: "calculations_chart"
      },
      title: {
    text: "Sum for a year"
      },
      xAxis: {
    text: "Years"
      },
      yAxis: {
    title: {
      text: "Sum"
        }
      },
      series: [{
    data: //for loop?
      }]
    });
  });
</script>
<div id="calculations_chart" style="width:560px; height:300px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:05:48.337

如果你有一个在循环中计算的值，你可以把它放在你想要的位置

```
series: [{
data: [<%=@amount%>]
  }] 
```

或者，如果您有一系列数据存储在您想要迭代的地方并将它们添加到图表中

```
series: [
      {
      data: [
<% for i in 0..@calculation.a do %> 
  <% @amount = ((@amount/(@percent)) + @amount) %>
  <%= @amount %>,
<% end %>
 ]}
] 
```

这是页面中的很多逻辑，您可能需要考虑将其移动到控制器或模型中。为了在多个地方实现超级可重用性，您可以有一个操作以 JSON 格式提供数据，您可以在需要它的页面中异步获取这些数据。

编辑以匹配 highchart 格式

# python - SIGCHLD 未中断 python 选择

> ID：14741915
> 
> 赞同：0
> 
> 时间：2013-02-07T01:13:09.817
> 
> 标签：python, select, sigchld

我有以下代码：

```
try:
    r_l, w_l, e_l = select.select([connection_fd], [], [], timeout_secs)
except select.error as (err_no, msg):
    # get interrupted on select 
```

当我的程序等待这个时，如果有信号（如 SIGCHLD），则选择会被 select.error 中断。但是，即使我在输入 select 之前有待处理的信号，我也不确定这是否有效？（connection_fd 套接字设置为阻塞）。

是否有可能存在未决信号但 select 仍然没有被中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:24:15.483

好点子。现在让我觉得 Python 上的信号被破坏了:-(

VB9-UANIC：Python 中有“待处理信号”的概念，因为在 C 级别调用信号处理程序时，它只是设置一个标志，稍后将在安全点检查该标志。Python 级别的信号处理程序（如果有）仅在稍后从这些安全点之一调用。

这意味着如果我们不走运并且信号在 C 代码调用“select”系统调用之前到达，则调用 C 级信号处理程序并设置标志，但随后 C 代码恢复并调用“select " --- 不会被打断，因为没有信号了。

如果有的话，它表明信号不是 Python 中可靠的通信方式。我什至不知道如何解决它，顺便说一句:-(

编辑：这是[http://bugs.python.org/issue5315](http://bugs.python.org/issue5315)。

# php - PHP 之间的链接文本

> ID：14741931
> 
> 赞同：0
> 
> 时间：2013-02-07T01:14:46.113
> 
> 标签：php, string

我不想成为一个帮助吸血鬼，我只是要求一个总体方向或者必须使用哪些技术来实现这一点。

我有一个字符串，像这样：

```
joke<br>kid<br>forreal<br>me 
```

我怎么会把它变成这样的东西：

```
<a href="http://www.dumbsearch.com/chat/user.php?q=joke">joke</a><br>
<a href="http://www.dumbsearch.com/chat/user.php?q=kid">kid</a><br>
<a href="http://www.dumbsearch.com/chat/user.php?q=forreal">forreal</a><br>
<a href="http://www.dumbsearch.com/chat/user.php?q=me">me</a><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:20:23.087

您正在寻找的是[爆炸](http://php.net/manual/en/function.explode.php)。

```
$string = "...";

// split the string on every "<br>"
$users = explode("<br>", $string);

// loop through the users, adding the anchor
for ($i = 0, $count = count($users); $i < $count; $i++)
{
    echo '<a href="http://www.dumbsearch.com/chat/user.php?q=' . $users[$i] . '">'  . $users[$i] . '</a>';

    // add "<br>" to every user except the last
    if ($i < ($count - 1))
        echo "<br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:22:22.283

你可以通过分隔字符串来`<br>`做到这一点，你可以通过使用[PHP Explode来实现](http://php.net/manual/en/function.explode.php)

这将为您提供一个数组，您需要遍历它并根据需要生成 html 文本

如果您尝试编写代码会更好，那么我们都会提供更多帮助:)

如果您无法写作，也许我们可以提供帮助

**代码编辑**

```
$string = "joke<br>kid<br>forreal<br>me";

$tags = explode("<br>", $string);

$new = array(); 

foreach($tags as $tag)
{
    $new[] = '<a href="http://www.dumbsearch.com/chat/user.php?q=' . $tag . '">'  . $tag . '</a>';

}

echo implode("<br>", $new); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:17:34.507

PHP 有几个内置的 DOM 解析器：[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)和[`SimpleXML`](http://www.php.net/manual/en/book.simplexml.php). 根据我的经验，后者更适合阅读和简单的操作，而前者更适合更复杂的操作。

似乎您想用来`DOMDocument`查找字符串中的文本节点并用相应的锚点包装或替换它们。

[phpQuery](http://code.google.com/p/phpquery/)可能是一个选项，但它不是 PHP 原生的。

# automation - Inno Setup 可以发送按键和鼠标按键，如果不能，如何使用安装程序来完成？

> ID：14741933
> 
> 赞同：2
> 
> 时间：2013-02-07T01:15:11.967
> 
> 标签：automation, inno-setup, autohotkey, nsis

我是 [Microsoft Windows] 安装程序和[Inno Setup](http://www.jrsoftware.org/isinfo.php)的新手，但我需要知道是否可以使用 Inno Setup（或等效程序）在安装过程中自动输入基于 GUI 的 Windows 程序，例如通过单击菜单并选择一个子项目，例如？

我知道[AutoIt](http://www.autoitscript.com/site/autoit)和[AutoHotkey](http://www.autohotkey.com)以及[NSIS](http://nsis.sourceforge.net)，但是强烈建议将 Inno Setup 作为软件包程序/安装程序，我也喜欢学习一点 Pascal 编程的想法，以讨价还价；）

任何想法或想法都是最受欢迎的:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:03:50.100

我同意@Deanna，该[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)功能最适合模拟您可以获得的用户输入。在下面的脚本中，我展示了如何在绝对屏幕位置（以像素为单位）上模拟鼠标点击。例如，我试图通过*Help / About Inno Setup*菜单项显示 Inno Setup 的 about 框（如果您的屏幕设置与我相同并且 Inno Setup IDE 最大化，它甚至可能会点击该菜单项。所以这里只是鼠标部分（你只能获得有限的功能）。把它作为一个证据，它可以模拟来自 Inno Setup 的用户输入：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[code]
const
  SM_CXSCREEN = 0;
  SM_CYSCREEN = 1;
  INPUT_MOUSE = 0;
  MOUSEEVENTF_MOVE = $0001;
  MOUSEEVENTF_LEFTDOWN = $0002;
  MOUSEEVENTF_LEFTUP = $0004;
  MOUSEEVENTF_RIGHTDOWN = $0008;
  MOUSEEVENTF_RIGHTUP = $0010;
  MOUSEEVENTF_MIDDLEDOWN = $0020;
  MOUSEEVENTF_MIDDLEUP = $0040;
  MOUSEEVENTF_VIRTUALDESK = $4000;
  MOUSEEVENTF_ABSOLUTE = $8000;
type
  TMouseInput = record
    Itype: DWORD;    
    dx: Longint;
    dy: Longint;
    mouseData: DWORD;
    dwFlags: DWORD;
    time: DWORD;
    dwExtraInfo: DWORD;
  end;

function GetSystemMetrics(nIndex: Integer): Integer;
  external 'GetSystemMetrics@user32.dll stdcall';
function SendMouseInput(nInputs: UINT; pInputs: TMouseInput;
  cbSize: Integer): UINT; 
  external 'SendInput@user32.dll stdcall';

function SendMouseClick(Button: TMouseButton; X, Y: Integer): Boolean;
var
  Flags: DWORD;
  Input: TMouseInput;
  ScreenWidth: Integer;
  ScreenHeight: Integer;
begin
  Result := False;
  Flags := MOUSEEVENTF_ABSOLUTE or MOUSEEVENTF_VIRTUALDESK or MOUSEEVENTF_MOVE;
  ScreenWidth := GetSystemMetrics(SM_CXSCREEN);
  ScreenHeight := GetSystemMetrics(SM_CYSCREEN);

  Input.Itype := INPUT_MOUSE;
  Input.dx := Round((X * 65536) / ScreenWidth);
  Input.dy := Round((Y * 65536) / ScreenHeight);
  case Button of
    mbLeft: Input.dwFlags := Flags or MOUSEEVENTF_LEFTDOWN;
    mbRight: Input.dwFlags := Flags or MOUSEEVENTF_RIGHTDOWN;
    mbMiddle: Input.dwFlags := Flags or MOUSEEVENTF_MIDDLEDOWN;
  end;  
  Result := SendMouseInput(1, Input, SizeOf(Input)) = 1;

  if Result then
  begin
    Input.Itype := INPUT_MOUSE;
    Input.dx := Round((X * 65536) / ScreenWidth);
    Input.dy := Round((Y * 65536) / ScreenHeight);
    case Button of
      mbLeft: Input.dwFlags := Flags or MOUSEEVENTF_LEFTUP;
      mbRight: Input.dwFlags := Flags or MOUSEEVENTF_RIGHTUP;
      mbMiddle: Input.dwFlags := Flags or MOUSEEVENTF_MIDDLEUP;
    end;    
    Result := SendMouseInput(1, Input, SizeOf(Input)) = 1;
  end;
end;

procedure InitializeWizard;
begin
  if MsgBox('Are you sure you want to let the installer click ' +
    'somewhere on your screen ? TLama warned you :-)', mbConfirmation, 
    MB_YESNO) = IDYES then
  begin
    if not SendMouseClick(mbLeft, 242, 31) then 
      MsgBox(SysErrorMessage(DLLGetLastError), mbError, mb_Ok);
    if not SendMouseClick(mbLeft, 382, 263) then 
      MsgBox(SysErrorMessage(DLLGetLastError), mbError, mb_Ok);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:22:10.453

最好的办法是使用`SendInput()`DLL 中的 API，然后从 Inno Setup 中调用该 API。这将允许您完全控制您可以在该应用程序中手动执行的所有操作。

# lisp - 如何在球拍中计算非自然对数？

> ID：14741935
> 
> 赞同：5
> 
> 时间：2013-02-07T01:15:19.733
> 
> 标签：lisp, scheme, racket

我知道球拍的`log`功能，它计算一个数字的自然对数。我试图找到提高到任意基数的数字的对数。换句话说，而不是这样：

```
> (log 9)
2.1972245773362196 
```

我想做类似的事情：

```
> (logarithm 3 9)
2 
```

是否有任何人知道 Racket 的内置功能或 PLaneT 的模块中可用的功能，我可以像这样使用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T01:18:33.740

使用数学：log [k] n = ln n / ln k：

```
(/ (log 9) (log 3)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-19T04:17:56.890

Racket 6.9.0.1 为任意碱基添加了第二个参数。log [k] n 现在可以写成`(log n k)`.

根据文档，这相当于`(/ (log n) (log k))`，但可能更快。

[在文档中记录条目。](http://docs.racket-lang.org/reference/generic-numbers.html?q=log#%28def._%28%28quote._~23~25kernel%29._log%29%29)

# ruby - 有没有办法迭代一个范围，不包括一个值

> ID：14741938
> 
> 赞同：0
> 
> 时间：2013-02-07T01:15:26.880
> 
> 标签：ruby

我需要遍历一个数组，不包括中间的一个值。我知道我能做到

```
 (0..10).each do |i|
     unless i==6
         ...
     end
  end 
```

但我想知道是否有更清洁的方法。我找到的最接近的解决方案是：

[有没有一种优雅的方法来排除范围的第一个值？](https://stackoverflow.com/questions/3358788/is-there-an-elegant-way-to-exclude-the-first-value-of-a-range)

我需要这样做来遍历给我的组织不善的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:55:53.590

```
((0..10).to_a - [6]).each do |i|
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:23:18.500

您可以使用`reject`方法来完成它。

我不知道这是否是一种更清洁的方式，但这只是另一种方式。

```
(0..10).reject { |v| v == 6 }.each do |i| 
```

试一试，告诉我你对此有何看法。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:25:46.707

对于您的简单案例，不确定它是否更清洁或首选方式，但您可以执行类似的操作

```
(0..10).select{|i| i!=6}.each do
  # YOUR CODE
end 
```

在更复杂的情况下，这绝对是一种方法

PS在写答案的时候，有**reject**的答案到了:)这几乎是一样的，我只是忘了reject，只记得select:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T01:26:04.737

`next`如果您只想绕过将代码包装在一个`unless`块中，您可以使用它。例如，如果您想跳过一组数字，您可以执行以下操作：

```
skip_values = [3, 6, 7]
(0..10).each do |i|
  # When i is 3, 6, or 7, continue to the next iteration
  next if skip_values.include?(i)
  ...
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T01:36:50.667

我想你可以用类似的东西定义一个子类或补丁 Range 本身......

```
 def reach not_this_one
    each do |x|
      yield x unless x == not_this_one
    end
  end 
```

...也许...

```
 def reach not_this_one, &block
    self.select { |x| x != not_this_one }.each &block
  end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-07T14:05:17.393

您可以通过使用暂时排除一个值[`Enumerable#grep_v`](http://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-grep_v)：

```
(1..5).grep_v(2).each { |n| puts n }
#1
#3
#4
#5 
```

不幸的是`grep_v`，就像其他一些发布的答案一样，创建了一个中间数组。老实说，我更喜欢你最初的方法，它可以写得更整洁（没有猴子补丁）：

```
(1..5).each { |n| puts n unless n == 2 }
#1
#3
#4
#5 
```

# java - 倒数计时器麻烦android

> ID：14741940
> 
> 赞同：1
> 
> 时间：2013-02-07T01:15:43.417
> 
> 标签：java, android, timer

我有个问题。我有一个计时器，看起来像一个向后移动的进度条。现在它工作得很好，或者我应该说在旧手机上效果很好，但是带有高清屏幕的新手机却不能很好地工作。计时器栏在我的 xml 中设置为 vert 和 match_parent。我在下面包括了我的方法，你能看看它并告诉我如何改进它吗？

```
//used to animate timer bar
private Handler mHandler = new Handler();

//timer event code
private Runnable mUpdateTimeTask = new Runnable() {
       public void run() {
           final long start = startTime; 
// startTime will come from a spinner it will be 0,1,2,3,4 or 5 (users choice) 
// ** the bar is GREEN until the if condition is meet
           long currentLength = System.currentTimeMillis() - start;
           long remainingTime = gameTime - currentLength;
           float x = (float)remainingTime / (float)gameTime;

           if(remainingTime > 0)
           {
               //still have time remaining - update UI
               LinearLayout timerUI = (LinearLayout) findViewById(R.id.timerUI);
               timerUI.getLayoutParams().height =  (int) (x * 400);

               //update color
               if(remainingTime < 15000)
                  timerUI.setBackgroundColor(Color.RED);
               else if(remainingTime < 30000)
                   timerUI.setBackgroundColor(Color.YELLOW);

               timerUI.requestLayout();
               timerUI.invalidate();
               mHandler.postDelayed(this, 500);
           }
           else
           {
               if(monitorThread != null)
                   monitorThread.interrupt();

                //NEED to push user to final screen
                Intent resultsIntent = new Intent(SingleGameActivity.this, 
                    ResultsActivity.class);
                startActivity(resultsIntent);
           }
       }
    }; 
```

# sql-server - Scrapy / Python 和 SQL Server

> ID：14741945
> 
> 赞同：0
> 
> 时间：2013-02-07T01:16:36.007
> 
> 标签：sql-server, scrapy, scrapyd

是否可以使用 Scrapy 从网站上抓取数据，并将该数据保存在 Microsoft SQL Server 数据库中？

如果是，有没有这样做的例子？它主要是Python问题吗？即，如果我发现一些 Python 代码保存到 SQL Server 数据库中，那么 Scrapy 可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:14:42.413

是的，但是您必须自己编写代码来完成它，因为scrapy 不提供写入数据库的项目管道。

从 scrapy 文档中阅读[Item Pipeline页面，该页面更详细地描述了该过程（这里以](https://scrapy.readthedocs.org/en/0.16/topics/item-pipeline.html)[JSONWriterPipeline](https://scrapy.readthedocs.org/en/0.16/topics/item-pipeline.html#write-items-to-a-json-file)为例）。基本上，找到一些写入 SQL Server 数据库的代码（使用 PyODBC 之类的东西），您应该能够对其进行调整以创建自定义项目管道，将项目直接输出到 SQL Server 数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-15T01:24:04.527

在这里超级迟到并且完全自我提升，但我认为这可以帮助某人。我只是写了一个小scrapy扩展来将抓取的项目保存到数据库中。[scrapy-sqlitem](https://github.com/ryancerf/scrapy-sqlitem)

它非常易于使用。

```
pip install scrapy_sqlitem 
```

使用 SqlAlchemy 表定义 Scrapy 项

```
from scrapy_sqlitem import SqlItem

class MyItem(SqlItem):
    sqlmodel = Table('mytable', metadata
        Column('id', Integer, primary_key=True),
        Column('name', String, nullable=False)) 
```

添加以下管道

```
from sqlalchemy import create_engine

class CommitSqlPipeline(object):

    def __init__(self):
            self.engine = create_engine("sqlite:///")

    def process_item(self, item, spider):
            item.commit_item(engine=self.engine) 
```

不要忘记将管道添加到设置文件并创建数据库表（如果它们不存在）。

[http://doc.scrapy.org/en/1.0/topics/item-pipeline.html#activating-an-item-pipeline-component](http://doc.scrapy.org/en/1.0/topics/item-pipeline.html#activating-an-item-pipeline-component)

[http://docs.sqlalchemy.org/en/rel_1_1/core/tutorial.html#define-and-create-tables](http://docs.sqlalchemy.org/en/rel_1_1/core/tutorial.html#define-and-create-tables)

# ajax - 如何使用 Ajax 动态且正确地填充表格？

> ID：14741946
> 
> 赞同：0
> 
> 时间：2013-02-07T01:16:35.993
> 
> 标签：ajax, xml, dynamic, html-table

我有一个表单，用户在其中提交查询，然后有一个处理该查询并以 XML 格式返回结果的 Servlet。由于这个结果试图通过 Ajax 动态填充表，为此，我使用下面的代码。

```
var thead = $("<thead>");
var rowsTHead = $("<tr>");
var tbody = $("<tbody>");
var numberOfColumns;

$(xml).find("head").each(function(){
  var variable = $(this).find("variable");
   numberOfColumns = variable.length;
   for (var i = 0; i < variable.length; i++){
     var name = $(variable[i]).attr("name");
     rowsTHead.append($("<th>").html(name));
   }
});
thead.append(rowsTHead);

$(xml).find("result").each(function(){
   var literal = $(this).find("literal");
   var rowsTBody = $("<tr class=\"even\">");

   literal.length = numberOfColumns;
   for (var j = 0; j < literal.length; j++){
      var tdBody = $("<td>");
      tdBody.html($(literal[j]).text());
      rowsTBody.append(tdBody);
   }
   tbody.append(rowsTBody);
});

$(".tablesorter").empty()
 .append(thead)
 .append(tbody); 
```

这段代码在 UNION 查询中使用之前可以完美运行。使用 UNION 时，返回的 xml 以下列方式出现[http://pastebin.com/y7hXK1Zy](http://pastebin.com/y7hXK1Zy)

可以看出，这个查询有 4 个变量，它们是：gn1、indication1、gn2、indication2。出了问题的是所有变量的值都写在对应于gn1和indication1的列中。

我希望我将每个变量的值写在其对应的列中。我想知道我应该在我的代码中进行哪些更改才能使这成为可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:31:06.230

您需要尊重绑定元素的名称值，并将它们关联回您通过解析元素正确构建的列。当您进行查找“文字”时，您将跳过绑定元素的解析。您应该找到“绑定”，尊重名称并根据该名称查找要使用的列，然后为每个列找到实际值的“文字”元素。

# jquery - JQuery 或 Modernizr 不能在 IE 和其他旧版浏览器中运行？

> ID：14741947
> 
> 赞同：0
> 
> 时间：2013-02-07T01:16:36.633
> 
> 标签：jquery, css, modernizr

我正在尝试制作一个带有画布外导航的网站，单击左上角的“导航列表”图标会滑入。

我首先开发它并使用 CSS3 Transitions 和 :target 为它提供动力，这很有效。

然后，在 StackOverflow 的帮助下，我开发了一个由 JQuery 1.9 提供支持的版本，具有类似的效果。这个版本运行良好。

然后，我将它们组合在一起并使用 Modernizr 来检测何时不支持 :target 选择器，它会从之前加载 JQuery。我在 chrome 中尝试过，它可以工作——这意味着它在支持 CSS3 过渡和 :target 时可以工作。但是，后来我在 IE 7 中尝试了它，但它不起作用。

我不知道这是否是因为 Modernizr 和自定义 :target 测试不工作并加载 jQuery 或者 JQuery 现在由于某种原因不工作。

这是：http: [//goo.gl/ztbwe](http://goo.gl/ztbwe)

我真的很感谢所有和任何帮助，让它在支持 CSS3 转换和 :target 的浏览器中工作，当不支持任何一个时提供 & 执行 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:28:26.267

您的`odd()`函数（menu.html 中的第 62 行）有一个额外的逗号：

```
function odd() {
    $('.content').animate({
        marginLeft : '20%',
        marginRight : '-20%', // <-- bad comma
    });
} 
```

下次只需在 Internet Explorer（或任何给您带来问题的浏览器）中打开您的演示，然后点击`F12`（开发工具）。IE 允许您切换您希望查看页面的浏览器版本，因此如果您在 IE 中，则在开发工具中将“浏览器模式”设置为 IE7，然后打开控制台并检查您的错误。

# ios - 从 UICollectionViewCell 使用 UICollectionView

> ID：14741951
> 
> 赞同：6
> 
> 时间：2013-02-07T01:17:08.037
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个自定义 UICollectionViewCell ，其内容也是一个集合，我想使用 UICollectionView 来显示其内容。这可能吗？我将如何做到这一点？我使自定义 UICollectionViewCell 也继承自 UICollectionViewDataSource 并定义了 UICollectionView 内部属性，但事情没有按预期工作。任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-18T20:12:05.660

这是如何做到这一点的示例。我们有一个带有标准 UITableViewController、自定义 UITableViewCell 和单独的自由格式自定义 UIViewController 的故事板。

```
// ContainerCell.h
@class CellContentViewController;
@interface ContainerCell : UITableViewCell
@property (nonatomic, strong) CellContentViewController*  contentViewController;
@end

// CellContentViewController.h
@interface CellContentViewController : UIViewController
@property (nonatomic, weak) IBOutlet UILabel*   nameLabel;
@end

// CellContentViewController.m
@interface CellContentViewController ()    
- (IBAction)didTapButton:(UIButton*)sender;    
@end        
@implementation CellContentViewController           
- (void)didTapButton:(UIButton *)sender
{
    NSLog(@"Button for %@!", self.nameLabel.text);
}
@end

// MyTableViewController.m
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString* const kCellIdentifier = @"ContainerCell";
    ContainerCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier forIndexPath:indexPath];        
    if (!cell.contentViewController)
    {
        UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];

        CellContentViewController* contentViewController= [storyboard instantiateViewControllerWithIdentifier:@"CellContentViewController"];

        cell.contentViewController = contentViewController;
        [cell.contentView addSubview:cell.contentViewController.view];
    }        
    cell.contentViewController.nameLabel.text = self.names[indexPath.row];                
    return cell;
} 
```

结果是自定义视图控制器响应按钮点击。视图生命周期方法不会在视图出现和从表中消失时被调用。

我这样做是为了证明概念，但是对于我正在从事的项目，我认为拥有`CellContentViewController`一个视图控制器而不仅仅是一个自定义视图没有任何真正的优势。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T21:36:08.093

这个有可能。通常，您将创建一个管理内部集合视图的视图控制器，并将此视图控制器的视图添加到外部集合视图的单元格的内容视图中。

您没有对您当前的尝试或遇到的问题进行任何描述，因此我无法提供更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T13:08:59.793

正如 BrettThePark 所提到的，不可能将容器视图添加到情节提要中的 UICollectionVIew 原型单元格。

您可以做的是在情节提要中创建一个单独的视图控制器，并以编程方式将其添加到您在 UICollectionView 中使用的 UICollectionViewCell 子类中的视图中。这个视图控制器当然可以是一个 UICollectionViewController。

例子：

```
-(void)awakeFromNib 
{
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                         bundle: nil];
    UIViewController *controller = [mainStoryboard instantiateViewControllerWithIdentifier:@"MyUIViewController"];

    [self addSubview:controller.view];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T01:10:15.890

这是一个`UICollectionView`内部的例子`UICollectionViewCell`。

[https://github.com/irfanlone/Collection-View-in-a-collection-view-cell](https://github.com/irfanlone/Collection-View-in-a-collection-view-cell)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-13T21:29:34.447

据我了解，这是不可能的。

我尝试在情节提要中这样做并得到错误：

“容器视图不能放置在运行时重复的元素中”

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-04-24T06:37:24.913

使您的`UITableViewController`内容为`Static`.

![在此处输入图像描述](../Images/df9069ce68778e30b19034df53b39a2f.png)

# r - 检查R中因子变量的维度

> ID：14741952
> 
> 赞同：2
> 
> 时间：2013-02-07T01:17:16.037
> 
> 标签：r, variables, inspection

这是一个简短的问题，但我如何在 R 中查找因子变量的维度？我试过了：

```
dim(X)
nrow(X)
ncol(X) 
```

但都回来了`NULL`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T01:22:47.293

如果我们有一个原子变量（一个因子是），它将有一个`length`值

```
X <- factor(letters)

length(X)

## [1] 26 
```

它也会有`levels`

```
levels(x) 
```

什么时候`X`是一个因素，它`is`有以下几类

```
is(X)
[1] "factor"   "integer"  "oldClass" "numeric"  "vector" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:12:38.593

当一个人有一个数据框并且需要一次了解许多不同的级别时，str() 函数也很有帮助。

# javascript - Javascript 正则表达式匹配模式但不匹配正则表达式文字（r.js 优化器和 uglify 问题）？

> ID：14741958
> 
> 赞同：0
> 
> 时间：2013-02-07T01:18:01.090
> 
> 标签：javascript, requirejs, uglifyjs, r.js

我有一个 Backbone 应用程序，使用 Require.js 组织成模块。其中一个模块包含一个 Handlebars 帮助器，它有一个方法可以从我们所有的 HTML 模板中为每个视图提取一个合法的标题。标头包含在 HTML 注释中，因此我使用以下正则表达式将其剥离：

```
/<!--[\s\S]*?-->/g 
```

现在，当我使用 r.js 优化（连接/编译/缩小）应用程序时，我正在使用 r.js 的`onBuildWrite()`方法执行相同的 HTML 注释删除：

```
onBuildWrite: function (moduleName, path, contents) {
    var htmlCommentRegex = /<!--[\s\S]*?-->/g;

    return contents.replace(htmlCommentRegex, "");
}, 
```

现在，不幸的是，这意味着当包含 Handlebars 助手的 Require.js 模块被拉入 r.js 优化构建时，**助手中的正则表达式文字被剥离**，导致我的整个 r.js 构建被炸毁。

我试图通过有选择地将正则表达式应用于`onBuildWrite()`除助手之外的所有模块来解决此问题：

```
onBuildWrite: function (moduleName, path, contents) {
    var htmlCommentRegex = /<!--[\s\S]*?-->/g;

    if (moduleName !== "helpers/handlebars.compileClean") {
        contents = contents.replace(htmlCommentRegex, "");
    }

    return contents;
}, 
```

但是当在 r.js 配置中启用 uglification 时，这似乎不起作用；**正则表达式 STILL 似乎在整个构建脚本上运行**，包括帮助程序，导致构建爆炸。

如果在 r.js 配置中禁用了 uglify，则一切正常。

**任何人都知道为什么 uglify 会打破这个？切换到不同的正则表达式，这将捕获 HTML 注释但忽略 HTML 注释正则表达式文字，解决问题吗？如果是这样，那个正则表达式会是什么样子？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:39:07.867

将您的正则表达式更改为：

```
var htmlCommentRegex = /[<]!--[\s\S]*?-->/g; 
```

就 RE 处理器而言，单字符`[<]`类相当于`<`，但现在 RE 不再匹配自身。

另一种方法是转义 RE 中的一个文字字符：

```
var htmlCommentRegex = /<\!--[\s\S]*?-->/g; 
```

或者您可以从字符串构建 RE：

```
var htmlCommentRegex = new RegExp('<!'+'--[\s\S]*?-->', 'g'); 
```

如果 r.js 将所有这些优化回原始文本，试试这个：

```
var commentPrefix = '<!';
var htmlCommentRegex = new Regexp(commentPrefix+'--[\s\S]*?-->', 'g'); 
```

希望它没有做足够的代码分析来消除这种混淆。

# grails - Grails - _template中的countBy计数所有记录而不是域实例

> ID：14741960
> 
> 赞同：0
> 
> 时间：2013-02-07T01:18:19.423
> 
> 标签：grails, grails-orm, grails-2.0

我有 2 个简单的域模型。我正在尝试从投资组合实例的显示页面中计算已发布标志设置为 NO 的出版物。

我可以获得设置为 NO 的出版物总数，但无法获得 NO 标志的特定实例数。无论我尝试过什么，我总是从所有记录中得到总回报。我怎样才能只获得实例计数。

示例：用户加载 Porfolio 的显示页面（操作），显示出版物列表，通过计算该特定 Portfolio 的“已发布”标志 NO 来显示尚未发布的出版物的数字字段。

我试过 Publication.countByPublished('No'), ${Publication.executeQuery("select count (published) from Publication where published=?",['No'])} 和其他各种方法，但似乎无法通过该投资组合ID，因此仅计算已发布标志为No的该ID的出版物。

真的在这个问题上摸不着头脑

**班级组合**

```
hasMany = [publications:Publication]

Sring portfolioName 
```

**班级刊物**

```
belongsTo = [portfolio: Portfolio]

String publicationName
String publicationContent
String published

static constraints = {
published (blank: false, inList: ["No","Yes"]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:59:08.853

你有没有尝试过：

```
def count = Publication.countByPublishedAndPortfolio("No", portfolioInstance) 
```

一种不太有效的方法是迭代出版物的投资组合集合并保留一个计数器：

```
def count = 0
portfolioInstance.publications.each {
  if (it.published == 'No') {
    count++
  }
} 
```

# python - 在 re.sub 中使用变量时出现 Python TypeError

> ID：14741965
> 
> 赞同：3
> 
> 时间：2013-02-07T01:18:37.893
> 
> 标签：python, regex

我是 python 新手，做最简单的事情时总是出错。

我正在尝试在正则表达式中使用变量并将其替换为 *

以下让我收到错误“TypeError：并非所有参数在字符串格式化期间都转换”，我不知道为什么。这应该很简单。

```
import re
file = "my123filename.zip"
pattern = "123"
re.sub(r'%s', "*", file) % pattern 
```

错误：回溯（最近一次调用最后一次）：文件“”，第 1 行，在？TypeError：字符串格式化期间并非所有参数都转换了

有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T01:26:21.093

你的问题出在这条线上：

```
re.sub(r'%s', "*", file) % pattern 
```

您正在做的是替换字符串中文本中出现的每个`%s`with （在这种情况下，我建议重命名变量以避免隐藏内置对象并使其更明确您正在使用的内容）。然后，您尝试将（已替换的）文本中的 替换为. 但是， 其中没有任何导致您看到的格式修饰符。它与以下内容基本相同：`*``file``filename``file``%s``pattern``file``TypeError`

```
'this is a string' % ("foobar!") 
```

这会给你同样的错误。

您可能想要的更像是：

```
re.sub(str(pattern),'*',file) 
```

这完全等同于：

```
re.sub(r'%s' % pattern,'*',file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:21:35.877

试试`re.sub(pattern, "*", file)`？或者也许`re`完全跳过，然后做`file.replace("123", "*")`。

# project-management - 我们可以使用任何 Scrum/敏捷项目管理工具吗？

> ID：14741966
> 
> 赞同：0
> 
> 时间：2013-02-07T01:18:41.623
> 
> 标签：project-management, agile, scrum

请推荐一个 Scrum/敏捷项目管理工具。首先，它应该能够安装或部署在我的本地计算机上。另外，它应该是免费的，不需要完全无限制的使用，只要它可以支持 5 个用户和一些 scrum 项目功能，例如“看板”。

我找到了像我这样的其他问题的一些答案。已经推荐的一些工具太旧了，所以请为我推荐更新的工具。如果它有一个漂亮的外观会更好，比如[scrumwise](http://www.scrumwise.com/)或[targetprocess](http://www.targetprocess.com/)。

必备品：

1.  本地应用程序
2.  自由的
3.  看板

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-20T10:58:47.927

我建议使用[Eylean 板](http://www.eylean.com)，因为与竞争对手相比，它是最直观的 Scrum 板。根据 scrum，您需要在团队内部拥有一个可见且透明的流程。此外，该软件还允许混合其他方法。

它是免费供个人使用的。

![在此处输入图像描述](../Images/b9a4c4a83e57b3ef0a461ceb37fcba77.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:29:49.863

鉴于您想要一个本地应用程序，我假设您的团队都位于同一个地方。

如果是这样，我建议不要使用工具。正如敏捷宣言所说：“我们重视个人和互动，而不是流程和工具”。我敦促您考虑将您的团队放在一起，改善沟通，使用卡片、物理板和信息辐射器。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T23:00:28.403

试试**Yodiz**，您最多可以拥有 3 个免费用户，它是最直观的用户之一。每个月，他们都会向他们的平台添加更多功能。它们具有以下一些重要功能。

*   协作工具（聊天、讨论、在线评论）
*   板，他们有光滑的板来管理您的用户故事和任务。
*   用户故事管理非常简单。具有优先级和过滤功能的令人敬畏的积压工作。
*   在 Jira、Pivo​​tal 和许多其他系统中导入/导出数据。
*   三 (3) 个具有完整功能的免费用户。
*   报告，他们有详细的报告，这使得进度和时间跟踪变得如此容易。

总而言之，它是一个很棒的工具。值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T01:48:24.573

[http://www.simple-kanban.com](http://www.simple-kanban.com) 这似乎符合您的要求。如果您接受托管解决方案而不是本地安装，还有其他可能性。

# iphone - 'paymentWithProductIdentifier' 已弃用

> ID：14741968
> 
> 赞同：2
> 
> 时间：2013-02-07T01:18:51.197
> 
> 标签：iphone, in-app-purchase

我只是有问题

```
SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"ident"]; 
```

问题是 paymentWithProductIdentifier 已被弃用。我在网上找到可以使用的

```
paymentWithProduct 
```

但问题是我不知道如何获得 SKProduct。

我写了这样的东西：

```
SKProductsResponse *response;
SKProduct *validProduct = [response.products objectAtIndex:0];
SKPayment *payment = [SKPayment paymentWithProduct:validProduct]; 
```

但它不起作用。问题出在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:37:42.393

您的代码使用 *response 而不初始化它 - 这是直接的问题。

然而，更大的问题是获取 SKProduct 对象。这里的基本方法是，在向用户展示购买商品的能力之前，您需要向 App Store 发出请求以检索您可能希望向用户展示的 SKProduct 对象。每个 SKProduct 都包含您需要呈现给用户的本地化价格和描述信息。我构建我的代码以在进入购买屏幕时检索产品数组。根据您的应用，您可能需要提前调用它。

您从可能的可购买物品列表的 skus 开始。然后使用该组 sku (SKProductsRequest initWithProductIdentifiers:) 创建一个 SKProductsRequest 对象。此外，提供一个 SKProductsRequestDelegate 来接收响应。然后开始请求。当它使用 didReceiveResponse: 调用委托时，您可以将数组保存在包含 SKProduct 对象的响应中。它还会返回您无法向用户展示的无效产品列表。仅显示您在回调中收到 SKProduct 对象的项目。

当实际开始支付时，您​​从传递给 SKProductsRequestDelegate didReceiveResponse: 方法的数组中提取正确的 SKProduct 对象以创建支付对象。

# javascript - 试图替换字符串中的最后一个字符，而不是字符串重复

> ID：14741971
> 
> 赞同：2
> 
> 时间：2013-02-07T01:19:10.280
> 
> 标签：javascript, jquery

这是一个 JSBin：http: [//jsbin.com/ofusec/2/](http://jsbin.com/ofusec/2/)

当您打开 DIV（自定义或个性化）时，该函数会正常运行，截断“+”并替换为“-”符号，但是当用户关闭 DIV 时，字符串会被复制并放入。

我希望结尾的行为与开头相同（截断并替换最后一个字符）

这是代码：

HTML：

```
<div id="customize" class="leftDiv">
    <span class="smallTitle"  onclick="toggle_expand('customizePort');">Customize Portfolio &nbsp;&nbsp;&nbsp;&nbsp; +</span><br />
    <div class="leftDivContent" id="customizePort">
    LAYOUT:<BR />
    NAVIGATION:<BR />
    BACKGROUND COLOR:<BR />
    FONT COLOR:<BR />
    </div>
</div>

<div id="personalize" class="leftDiv">
    <span class="smallTitle" onclick="toggle_expand('personalizePort');">Personalize Portfolio &nbsp;&nbsp; +</span><br />
    <div class="leftDivContent" id="personalizePort">
        HEADER IMAGE:<BR />
        ARTIST STATEMENT:<br />
        CONTACT INFORMATION:<br />
    </div>
</div> 
```

JAVASCRIPT：

```
function toggle_expand(id){
    var e = document.getElementById(id);
    var text = $(e).siblings().text();
    if( $(e).css('display') === 'none' ){
        $(e).slideToggle('fast', function(){
            var newText = text.replace("+","-");
            $(e).siblings().text( newText );
        });
    } else {
        $(e).slideToggle('fast', function(){
            var newText = text.replace("-","+");
            $(e).siblings().text( newText );
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:26:48.953

这似乎具有您描述的效果：

```
function toggle_expand(id){
    var e = document.getElementById(id);
    var text = $(e).siblings("span").text();
    if( $(e).css('display') === 'none' ){
        $(e).slideToggle('fast', function(){
            var newText = $(e).siblings().text( text.slice(0, -1)+"-" );
        });
    } else {
        $(e).slideToggle('fast', function(){
            text = $(e).siblings("span").text( text.slice(0, -1)+"+" );
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:30:42.653

您的`siblings`选择器缺乏特异性。幽默的`<br>`是，它错误地添加了相同的文本，但在显示下拉 div 时它最初是模糊的。

```
function toggle_expand(id) {
    var e = document.getElementById(id);
    var $title = $(e).siblings(".smallTitle");
    var text = $title.text(); 
```

参考`$title`而不是`$(e).siblings("span")`在函数的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:34:52.523

小`regex`爱呢：

```
function toggle_expand(id){
    var e = document.getElementById(id);
    var text = $(e).siblings("span").text();
    if( $(e).css('display') === 'none' ){
        $(e).slideToggle('fast', function(){
            var newText = $(e).siblings().text( text.replace(/\+/,'-'));
        });
    } else {
        $(e).slideToggle('fast', function(){
            text = $(e).siblings("span").text( text.replace(/-/,'+'));
        });
    }
} 
```

# javascript - 是否可以将 dom 属性设为只读？

> ID：14741972
> 
> 赞同：0
> 
> 时间：2013-02-07T01:19:17.643
> 
> 标签：javascript, dom, internet-explorer-8, internet-explorer-7

目前在我的一个项目中，我正在劫持一个 div 的 appendChild 方法并将其代理给我自己的一个。这一切正常，但在劫持它后 appendChild 属性出现在 dom 中，这种行为只发生在 IE7/IE8 中。在使用了开发人员工具后，我注意到如果您单击“显示只读属性”，您可以看到所有 HTMLDivElement 原型的函数，但已修改的函数不再被视为只读。我的问题是，是否可以再次将被视为 dom 元素属性的函数设为只读？同样对于奖励积分，如果我可以像刚才那样继续并覆盖该功能，那么首先那个 readonly 标志的意义何在？

也只是为了确保我得到它，我只在 IE7 和 IE8 中看到这种行为。

例子：

```
<div id="element1">
</div>

var domElement = document.getElementById('element1');
domElement['appendChild'] = function newAppendChild() {....} 
```

但是 div 现在在 dom 中显示为

```
<div id="element1" appendChild="function newAppendChild() {...}"></div> 
```

最终目标是不显示 appendChild。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T00:27:59.037

使用反映该名称而不是[expando](/questions/tagged/expando "显示标记为“expando”的问题")属性的自定义事件：

*   [如何在 IE8 中触发自定义 javascript 事件？](https://stackoverflow.com/questions/13435008/1113772)

# .htaccess - .htaccess 没有重定向到我期望的地方

> ID：14741973
> 
> 赞同：1
> 
> 时间：2013-02-07T01:19:24.073
> 
> 标签：.htaccess, redirect

1-我写了以下重定向，期望当这个 url

“ [http://www.curtainrodstore.com/index.php?crn=234](http://www.curtainrodstore.com/index.php?crn=234) ”

输入它会重定向到

“ [http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/](http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/) ”

2-相反，它重定向到

“ [http://www.curtainrodstore.com/?crn=243](http://www.curtainrodstore.com/?crn=243) ”

3-注意丢失

“索引.php”

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^curtainrodstore.com [NC]
RewriteCond %{REQUEST_FILENAME} index\.php
RewriteCond %{QUERY_STRING} crn=243
RewriteRule ^.*$ http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/ [R=301,L]
</IfModule mod> 
```

有人对它为什么不起作用有任何建议吗？

这是更新的尝试列表……</p>

```
<IfModule mod_rewrite.c>
RewriteEngine On
#ATTEMPT 1
#RewriteCond %{HTTP_HOST} ^curtainrodstore.com [NC]
#RewriteCond %{REQUEST_FILENAME} index\.php
#RewriteCond %{QUERY_STRING} crn=243
#RewriteRule ^.*$ http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/ [R=301,L]
#ATTEMPT 2
#RewriteRule ^index\.php\?crn=243$ http://curtainrodstore.com/product-category/curtains-drapery/shower-curtains/ [R=301,L]
#ATTEMPT 3
#RewriteCond %{HTTP_HOST} ^www.curtainrodstore.com$ [NC]
#RewriteCond %{QUERY_STRING} ^crn=234$
#RewriteRule ^index\.php$ http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/? [R=301,L]
#ATTEMPT 4
#RewriteCond %{HTTP_HOST} ^curtainrodstore.com$ [NC]
#RewriteCond %{QUERY_STRING} ^crn=234$
#RewriteRule ^index\.php$ http://curtainrodstore.com/product-category/curtains-drapery/shower-curtains/? [R=301,L]
#ATTEMPT 5
#
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:49:41.210

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?curtainrodstore.com [NC]
RewriteCond %{REQUEST_URI} index\.php  [NC]
RewriteCond %{QUERY_STRING} crn=234    [NC]
RewriteRule .* product-category/curtains-drapery/shower-curtains/? [R=301,L] 
```

永久重定向

`http://www.curtainrodstore.com/index.php?crn=234`

至：

`http://www.curtainrodstore.com/product-category/curtains-drapery/shower-curtains/`

对于静默映射，`R=301`从`[R=301,L]`

**确保在任何测试之前清除浏览器的缓存**

# php - PHP分页 - 限制链接数量

> ID：14741974
> 
> 赞同：0
> 
> 时间：2013-02-07T01:19:24.847
> 
> 标签：php, pagination, hyperlink, limit, paging

所以我有这样的分页链接。

```
for ( $counter = 0; $counter <= $page_amount; $counter += 1) {
        echo "<a href=\"section.php?q=$section&p=$counter\">";
        echo $counter+1;
        echo "</a>";
     } 
```

链接增长如下：

1 2 3 4 5 6 7 等等。

但我想限制这一点，所以如果页面超过 7 个，它只会显示 7 个这样的链接：

1 2 3 ... 10 11 12

其中 12 是最后一页。

如果您转到下一页，它只会像这样更改第一页：

3 4 5 ... 10 11 12

直到您到达最后 7 页，如下所示：

6 7 8 9 10 11 12

我该怎么做呢 ？？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:03:02.867

这是一种方法。

```
// Set some presets
$current_page = 0;
$page_amount = 11;
$limiter = 7;

// Set upper and lower number of links
$sides = round(($limiter/2), 0, PHP_ROUND_HALF_DOWN);

for ( $counter = 0; $counter <= $page_amount; $counter++) {
    // Start with Current Page
    if($counter >= ($current_page)){
        // Show page links of upper and lower
        if(($counter <($current_page+$sides))||($counter >($page_amount-$sides))){
            echo "<a href=\"section.php?q=$section&p=$counter\">";
            echo $counter+1;
            echo "</a> ";
        }
        // The middle link
        elseif($counter ==($current_page+$sides)){
            echo "<a href=\"page.php?p=$counter\">";
                    // Show number if number of links == $limiter
            if(($page_amount-$current_page)==$limiter-1){
                 echo $counter+1;
            }
            // Show '...' number of links > $limiter 
                    else {
                     echo "...";
            }
            echo "</a> ";
        }
     }
} 
```

这允许更改显示的链接数量，即。从 7 点到 9 点。

注意，使用`PHP_ROUND_HALF_DOWN`in`round()`需要 php>=5.3

# c++ - C++ 避免全局变量和单例

> ID：14741987
> 
> 赞同：1
> 
> 时间：2013-02-07T01:20:51.160
> 
> 标签：c++, pointers, memory-management, vector, static

我最近一直在尝试从我的项目中删除单例和全局变量的使用，但我很难做到这一点。我已经设计了一个更好的替代单例和全局变量的方法，但是我不确定一旦我的应用程序终止后如何处理数据。

我的应用程序需要访问一些东西才能使大多数组件正常工作；有些组件需要访问`static std::vector<Foo*> foos;`，有些组件需要访问`static std::vector<Bob*> bobs;`，有些需要同时访问。我所做的是为这些向量创建了“管理器”，一个 FooManager 可以访问受保护的静态向量到一个继承它的类，一个 BobManager 对另一个向量执行相同的操作。通过这样做限制了这两个对象的范围。我的问题是在进程终止时如何以及在哪里解除分配每个向量中的指针？多个类现在是这些对象的“管理者”。从派生类？但是如果我在另一个类需要原始数据时释放了一些东西怎么办？

基本上我的问题是如何避免删除不应该删除的指针？唯一的_ptr？shared_ptr? 也欢迎任何其他实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:33:03.230

如果您在设计中有选择权，那么 Idan 的最后一段就是要走的路（再次包括在内）：

> 如果您仍然坚持避免使用单例模式，我建议您再次使这些向量非静态，在您的主函数或任何其他根函数中创建每个管理器的单个实例，然后将它们传递给任何其他需要它们的对象。是的，这需要做很多工作——但它可以让您控制创建和销毁这些向量（以及它们指向的对象）的时间。或者 - 你可以只使用单例。

你的问题：

> 基本上我的问题是如何避免删除不应该删除的指针？唯一的_ptr？shared_ptr? 也欢迎任何其他实现。

[引用计数](http://en.wikipedia.org/wiki/Reference_counting)是解决问题的一种方法。它跟踪对一组数据感兴趣的事物的数量。一种快速的方法（使用您当前的实现）是在管理器类中包含一个变量，以跟踪有多少实例。在析构函数中递减计数器。如果计数器为 0，请删除您的向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:36:56.557

如果我理解正确，您有这两个需要全局访问的向量，并且您曾经有单例来处理每个向量。现在您想删除那些单例，而是让这些向量成为静态成员并拥有许多 Manager 类的实例？

不。只是……不要。

全局变量是个问题。有一种误解认为单例是一种全局变量，因此也是一个问题。它们不是——单例是全局变量问题的**解决方案。**删除解决方案并不意味着删除问题 - 它只是意味着您有一个没有解决方案的问题。

如果您仍然坚持避免使用单例模式，我建议您再次使这些向量成为非静态的，在您的函数或任何其他根函数中创建每个管理器的单个实例**，**并将`main`它们传递给任何其他对象那需要他们。是的，这需要做很多工作——但它可以让您控制创建和销毁这些向量（以及它们指向的对象）的时间。或者 - 你可以只使用单例。

# twitter-bootstrap - 使用 AngularJS 的 Twitter Bootstrap 导航栏 - 折叠不起作用

> ID：14741988
> 
> 赞同：72
> 
> 时间：2013-02-07T01:21:29.810
> 
> 标签：twitter-bootstrap, angularjs

我正在使用 Angular 和 Twitter Bootstrap 导航栏，并试图让折叠功能正常工作。

**部分：program.html**

```
<div class="navbar navbar-inverse navbar-static-top" ng-include="'partials/navbar.html'" ng-controller="NavbarCtrl"></div> 
```

**部分：navbar.html**

```
<div class="navbar-inner">
    <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Short Course</a>
        <div class="nav-collapse collapse">
            <ul class="nav">
                <li><a href="#"><i class="icon-home icon-white"></i> Home</a></li>
                <li class="dropdown ng-class: settingsActive;">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Intro <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a onclick='$("#myModal").modal("show");'>User Info</a></li>
                        <li><a href="#/setup">Settings</a></li>
                        <li><a href="#/get-started">Getting started</a></li>
                    </ul>
                </li>
                <li class="dropdown ng-class: programActive;" ng-controller="ProgramCtrl">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Lessons <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li ng-repeat='o in lessonTypes'>
                            <a href="#/program/{{o.value}}">{{o.title}}</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#/freeform">Free Form</a></li>
                    </ul>
                </li>
                <li class="dropdown ng-class: reportsActive;">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Grades <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Simple Report</a></li>
                        <li><a href="#">Comprehensive Report</a></li>
                        <li class="divider"></li>
                        <li><a href="#">Current Grade Report</a></li>
                        <li><a href="#">Final Grade Report</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="#/class"><i class="icon-upload icon-white"></i> Upload/Save</a></li>
                <li><a href="#/class"><i class="icon-off icon-white"></i> Save/Logout</a></li>
            </ul>
        </div><!-- /.nav-collapse -->
    </div>
</div><!-- /navbar-inner --> 
```

导航栏显示完美。下拉菜单效果很好。Angular 函数加载数据并将特定项目标记为活动并完美地填充模型。唯一不起作用的是响应式折叠功能。当我调整屏幕大小时，菜单项消失并出现菜单图标，但单击它不起作用。我被困在这个问题上，我知道它必须是一个简单的解决方法，但我就是想不通。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-07-16T09:16:40.597

对于那些感兴趣的人 - 这是另一种在没有 Bootstrap 的 javascript 的情况下实现它的方法。

导入 Angular 的**UI-Bootstrap**。

HTML：

```
<div class="navbar navbar-inverse" ng-controller="NavBarCtrl">
<div class="navbar-inner">
    <div class="container">
        <button class="btn btn-navbar" ng-click="isCollapsed = !isCollapsed"> 
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
        </button> <a class="brand" href="#">Short Course</a>
        <div class="nav-collapse" uib-collapse="isCollapsed">
            <ul class="nav">
                <li><a href="#"><i class="icon-home icon-white"></i> Home</a>
                </li>
                <li><a href="#">Lessons</a>
                </li>
                <li><a href="#">Grades</a>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="#/class"><i class="icon-upload icon-white"></i> Upload/Save</a>
                </li>
                <li><a href="#/class"><i class="icon-off icon-white"></i> Save/Logout</a>
                </li>
            </ul>
        </div>
        <!-- /.nav-collapse -->
    </div>
</div>
<!-- /navbar-inner -->
</div> 
```

JS：

```
var myApp = angular.module('myApp', ['ui.bootstrap']);

function NavBarCtrl($scope) {
    $scope.isCollapsed = true;
} 
```

还有小提琴 - [http://jsfiddle.net/KY5Mf/](http://jsfiddle.net/KY5Mf/)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-05-28T17:51:05.650

我想让它与*纯 AngularJS*一起工作，而不需要更多的 JavaScript 库，结果证明它非常简单。[从这里的示例](http://getbootstrap.com/examples/starter-template/)开始，只需要进行两项更改（bootstrap v3）：

代替

```
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> 
```

我用了：

```
<button type="button" class="navbar-toggle" ng-init="isCollapsed = true" ng-click="isCollapsed = !isCollapsed"> 
```

而不是

```
<div class="collapse navbar-collapse"> 
```

我用了：

```
<div class="navbar-collapse" ng-class="{collapse: isCollapsed}"> 
```

# 下拉菜单

此外，如果您的导航栏中有任何下拉菜单，这同样适用于它们，除了 css 类不是“折叠”，而是“打开”：

```
<li class="dropdown" ng-class="{ open : dd1 }" ng-init="dd1 = false" ng-click="dd1 = !dd1"> 
```

请注意，多个下拉菜单都需要在角度根范围内拥有自己的状态变量（如果您不使用控制器）。因此我在这里将第一个下拉菜单命名为“dd1”，它们必须是唯一的，否则多个下拉菜单将同时打开/关闭。（这很有趣，但很少使用）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-18T00:29:32.870

无需使用控制器。只需在最初编译模板时使用`ng-init`来初始化标志。`isCollapsed`

```
<div class="navbar navbar-inverse" ng-controller="NavBarCtrl">
<div class="navbar-inner">
    <div class="container">
        <button class="btn btn-navbar" ng-init="isCollapsed = true" ng-click="isCollapsed = !isCollapsed"> 
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
        </button> <a class="brand" href="#">Short Course</a>
        <div class="nav-collapse" collapse="isCollapsed">
            <ul class="nav">
                <li><a href="#"><i class="icon-home icon-white"></i> Home</a>
                </li>
                <li><a href="#">Lessons</a>
                </li>
                <li><a href="#">Grades</a>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="#/class"><i class="icon-upload icon-white"></i> Upload/Save</a>
                </li>
                <li><a href="#/class"><i class="icon-off icon-white"></i> Save/Logout</a>
                </li>
            </ul>
        </div>
        <!-- /.nav-collapse -->
    </div>
</div>
<!-- /navbar-inner -->
</div> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-11T15:58:39.337

这是一个棘手的问题。文档显示了一种方法，它的功能很好。我复制了文档示例（[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)）并尝试使用它。然后我去了示例页面并尝试了此处列出的布局：http: [//twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

唯一的区别是 a`<button>`而不是`<a>`

```
<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
```

代替

```
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
```

我不知道为什么，但是改变它使它的功能很好。

***编辑***

Arbiter 指出`<a />`缺少该`href='#'`属性。添加该属性也可以解决问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-10-02T12:09:20.853

如果您正在寻找`Angular2`. 然后一击就是需要的改动。

```
<button type="button" class="navbar-toggle collapsed" (click)="toggleCollapse()"
        aria-expanded="false"> 
```

菜单应该是这样的。

```
<div class="navbar-collapse" id="bs-navbar-collapse" [class.collapse]="isCollapsed">
      <ul class="nav navbar-nav">
        <li>
          <a href="">
            Dashboard 
```

你的控制器应该是这样的。

```
import { Component} from '@angular/core';

@Component({
  selector: 'app-navbar',
  templateUrl: './navbar.component.html',
  styleUrls: ['./navbar.component.css']
})
export class NavbarComponent {
  isCollapsed: boolean = true;

  toggleCollapse(): void {
    this.isCollapsed = !this.isCollapsed;
  }

} 
```

看，这在`angular2`. 感谢@yankee 的回答。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-15T20:47:23.633

这是使用 ui.bootstrap.collapse 模块的工作实现。[https://jsfiddle.net/7z8hLuyu/](https://jsfiddle.net/7z8hLuyu/)

HTML

```
<div ng-app="app">
<nav class="navbar navbar-default">
  <div class="container-fluid" ng-controller="NavigationCtrl as vm">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" ng-click="vm.toggleCollapse()">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Brand</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
<div class="navbar-collapse" style="overflow:hidden!important;" uib-collapse="vm.    isCollapsed">
      <ul class="nav navbar-nav">
    <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></    li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link 2</a></li>
        <li><a href="#">Link 3</a></li>
        <li><a href="#">Link 4</a></li>     
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
</div> 
```

控制器（使用 controllerAs 语法）：

```
(function(){
    'use strict';

  angular
    .module('app', ['ngAnimate','ui.bootstrap.collapse'])
    .controller('NavigationCtrl', NavigationCtrl);

  NavigationCtrl.$inject = [];

  function NavigationCtrl() {
    var vm = this;
    vm.isCollapsed = true;
    vm.toggleCollapse = toggleCollapse;

    function toggleCollapse() {
        vm.isCollapsed = !vm.isCollapsed;
    }
  }

})(); 
```

注意：要让动画在 ui.bootstrap 模块中工作，您必须包含 ngAnimate。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-06T07:02:11.890

我觉得这将是简单的 JS 修复：

```
//for close, opened dropdown.
$(".nav a").click(function () {
    if ($(".navbar-collapse").hasClass("in")) {
        $('[data-toggle="collapse"]').click();
    }
}); 
```

如果此代码无法正常工作，请查看它是否正确绑定，因此将其放置在加载页面的控制器中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-01T04:01:10.740

只需将**jquery.min.js 和 bootstrap.min.js**添加到 index.html 文件即可解决此问题。

对于可折叠导航，我们需要包含**jquery.min.js 和 bootstrap.min.js**

# ruby-on-rails - ruby - 按索引将数组数组的元素放入变量中

> ID：14741990
> 
> 赞同：-1
> 
> 时间：2013-02-07T01:21:50.590
> 
> 标签：ruby-on-rails, ruby

我有这个数组数组：

> 数组 = [[“z1”、“y1”、“x1”]、[“z2”、“y2”、“x2”]、[“z3”、“y3”、“x3”]、[“z4”、 "y4" , "x4"]]

我希望能够通过索引检索更大数组中的数组元素并将它们放入变量中。
例如，对于索引*1*，输出应为：

> 输出 = [["y1"], ["y2"], ["y3"], ["y4"]]

之后我还希望能够推动这些结果以形成一个新数组。换句话说，我想重新排序数组的元素（如果你能找到比检索和推送更好的解决方案）。

例子 ：

> output_x = [["x1"], ["x2"], ["x3"], ["x4"]]
> 
> output_y = [["y1"], ["y2"], ["y3"], ["y4"]]
> 
> output_z = [["z1"], ["z2"], ["z3"], ["z4"]]

所以最终结果应该是这样的：

> 结果 = [[“x1”、“y1”、“z1”]、[“x2”、“y2”、“z2”]、[“x3”、“y3”、“z3”]、[“x4”、 "y4" , "z4"]]

我真的很想为此找到解决方案。谢谢

**PS：x,y 和 z 是坐标。忘记`sort`他们**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:38:10.303

您只想要`Array#transpose`，这是 的倒数`Array#zip`：

```
[["z1", "y1", "x1"],
 ["z2", "y2", "x2"],
 ["z3", "y3", "x3"],
 ["z4", "y4" , "x4"]].transpose

=> [["z1", "z2", "z3", "z4"],
    ["y1", "y2", "y3", "y4"],
    ["x1", "x2", "x3", "x4"]] 
```

从那里，很容易将它们拆分为单独的数组。如果您只想将数组转换为 XYZ（而不是 ZYX），那么您可能只想映射反转的数组：

```
[["z1", "y1", "x1"],
 ["z2", "y2", "x2"],
 ["z3", "y3", "x3"],
 ["z4", "y4" , "x4"]].map(&:reverse)
=> [["x1", "y1", "z1"],
    ["x2", "y2", "z2"],
    ["x3", "y3", "z3"],
    ["x4", "y4", "z4"]] 
```

您也可以只映射任意顺序。例如，要从 ZYX 映射到 XZY，您可以使用：

```
coordinates.map {|c| [c[2], c[0], c[1]] } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:28:24.920

您可以`array`像这样对每个元素进行排序

```
array.each do |e|
  e.sort!
end 
```

如果你运行上面的代码，你`array`会看起来像你想要的

```
result = [["x1", "y1", "z1"], ["x2", "y2", "z2"], ["x3", "y3", "z3"], ["x4", "y4" , "z4"]] 
```

有关排序的更多信息，请查看[此处](http://www.ruby-doc.org/core-1.9.3/Array.html#sort-21-method)

**更新**

根据您在下面的评论，您在每个子数组中都有坐标。既然现在的订单是`z, y, x`，你要他们进来`x, y, z`。反转数组中的元素就可以了。

```
array.each do |e|
  e.reverse!
end 
```

有关反向的更多信息，请查看[此处](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:40:34.253

如果您只是在寻找最终结果：

```
array  = [["z1", "y1", "x1"], ["z2", "y2", "x2"], ["z3", "y3", "x3"], ["z4", "y4" , "x4"]]
option = []

array.each do |item|
  option << item.reverse
end

puts option.inspect 
```

# html - 立方体的水平对齐

> ID：14741991
> 
> 赞同：0
> 
> 时间：2013-02-07T01:21:55.530
> 
> 标签：html, css, css-float

如何移动搜索图标立方体和与库存立方体相邻的文件立方体......我在萤火虫中给出了浮动但没有任何工作......在下面提供我的小提琴......

[http://jsfiddle.net/B49Ap/15/](http://jsfiddle.net/B49Ap/15/)

[http://jsfiddle.net/B49Ap/15/embedded/result/](http://jsfiddle.net/B49Ap/15/embedded/result/)

在下面提供我的代码

```
<div class="melonhtml5_gallery">
                    <div class="desktopContactImage" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;"
                    data-image="http://www.defie.co/designerImages/inventoryControl.png">desktopImage</div>
                    <p style='clear: left; text-align:left;'>rajkumar</p>
                    <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;"
                    data-image="http://www.defie.co/designerImages/png/search.png"></div>
                    <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;"
                    data-image="http://www.defie.co/designerImages/png/yourfiles.png"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:31:17.977

`<p style='clear: left; text-align:left;'>rajkumar</p>`

这个元素在惹你生气。标签在其`p`前后放置新行。所以删除它或者只是把它放在立方体之后，你只需要放置一些边距和填充来正确对齐我们的立方体。

如果你想看看我在说什么，我可以更新你的 jsfiddle。:)

我希望我有所帮助。

# mysql - cakePHP 更新表字段

> ID：14741995
> 
> 赞同：1
> 
> 时间：2013-02-07T01:22:25.593
> 
> 标签：mysql, cakephp, sql-update, cakephp-2.0

我有一个 cakePHP 问题 - 我想进行这样的更新查询

`UPDATE table SET field = field + some_var`

而且我不知道该怎么做...

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:48:14.007

唯一“正确”的方法是使用 cake 的“原子查询”包装方法。在您的情况下，这将是“updateAll”。该问题是其他十几个问题的完整副本-例如[按值递增 Cakephp 数据库字段](https://stackoverflow.com/questions/8689203/incrementing-cakephp-database-field-by-a-value)

```
$var = 1;
$this->Article->updateAll(
    array('Article.viewed' => 'Article.viewed + ' . $var),                    
    array('Article.id' => $id)
); 
```

这也在文档中：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T09:40:45.003

有两种方法可以进行更新：

如果您只更新一个字段，您可以执行以下操作：

```
$this->Model->id = foo;
$this->Model->saveField('field_name', 'field_value'); 
```

或者，您可以使用 $this->Model->save() 进行更新：

```
$data = array(
    'Model'=>array(
        'id'=>foo,
        'field_name'=>'field_value',
        'another_field_name'=>'another_field_value'
    )
);

$this->Model->save($data); 
```

您想避免使用 $this->Model->query() 并使用 CakePHP 的内置方法，因为内置方法与数据源无关（它们在 MySQL、Oracle、MSSQL 等上的工作方式相同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T05:41:57.020

我认为最好的方法是使用`Model::updateAll(array $fields, array $conditions)`.

当`Model::saveField(string $fieldName, string $fieldValue, $validate = false)`您尝试使用它显示的相同主键进行更新时，此方法`cannot replace duplicate key error`。并认为当一个更新时，他们必须使用主键作为匹配值来更新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T07:10:46.453

利用

```
$this->Baker->updateAll(
    array('Baker.approved' => 'Baker.approved + ' . $some_var),
    array('Baker.id' => $someId)
); 
```

欲了解更多信息，请参阅：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T01:37:31.973

您可以使用回调方法 beforeSave 来实现您所需要的。

[回调方法：BeforeSave](http://book.cakephp.org/2.0/en/models/callback-methods.html#beforesave)

```
public function beforeSave($options = array()) {
    if (!empty($this->data['table']['field'])){
         $this->data['table']['field'] += $this->data['table']['some_var'];
    }
    return true;
} 
```

# apache - 使用 Apache 进行 H.264 修剪/缩小和流式传输

> ID：14741996
> 
> 赞同：0
> 
> 时间：2013-02-07T01:22:26.160
> 
> 标签：apache, encoding, streaming, h.264, video-encoding

我正在研究如何做两件事：修剪和流式传输 H.264 视频。

1.  将 mpeg4 h.264 视频修剪到 30 秒并将其缩小到 480p 需要什么。我假设我需要找到一个执行 H.264 编码的 3rd 方库，进行快速谷歌搜索，我唯一找到的是 VideoLan.org，但我找不到他们的商业许可证。人们知道还有其他选择吗？

2.  将 H.264 流式传输到 HTML5 是如何工作的？我知道使用 Flash，可以有一种文件格式，需要下载整个文件，然后才能播放。另一种格式允许流式传输，但需要 Flash 服务器。我将使用 Apache 在 Intranet 上提供图像，如何在 Apache 上流式传输它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:34:35.767

1）您可以使用`FFmpeg`：

`ffmpeg -i in.mp4 -s 720x480 -t 30 out.mp4`

`-s`是调整大小并且`-t`只转储 30 秒

2）对于http流媒体，如果moov atomc（包含视频头和搜索信息）出现在视频的开头，视频将在缓冲几秒钟后立即开始播放，它不会等待整个文件下载。可以通过 http 中的 ByteRange 标头进行前向搜索。将 moov atom 放在开头使用`qt-fastart`. 它附带`FFmpeg`

`qt-faststart in.mp4 out.mp4`