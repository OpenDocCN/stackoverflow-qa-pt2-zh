# StackOverflow 问答 14582000-14582999

# java - 许多用户帐户（Java、Tomcat、Web）的安全问题

> ID：14582002
> 
> 赞同：0
> 
> 时间：2013-01-29T11:37:23.000
> 
> 标签：java, tomcat

我的服务器上有几个具有不同角色和用户的页面，并配置了基本身份验证。

当我成功登录第一页然后尝试打开另一个我的页面（在另一个选项卡中）时，我只看到错误：HTTP 状态 403 - 对请求的资源的访问被拒绝。要成功打开另一个页面，我需要关闭并重新打开浏览器。

预期行为：我在新选项卡中打开另一个页面，我看到新的登录对话框，用于输入新页面的登录名和密码。

这是我的配置：

tomcat-users.xml：

```
 <role rolename="Role1"/>
  <role rolename="Role2"/>

  <user username="user1" password="pass1" roles="Role1"/>
  <user username="user2" password="pass2" roles="Role2"/> 
```

web.xml 的一部分：

```
 <security-constraint>
      <web-resource-collection>
       <web-resource-name>Info Page</web-resource-name>
       <url-pattern>/DeploymentInfoService</url-pattern>
      </web-resource-collection>
      <auth-constraint>
       <role-name>Role1</role-name>
      </auth-constraint>
     </security-constraint>

     <security-constraint>
      <web-resource-collection>
       <web-resource-name>RSS Feeds</web-resource-name>
       <url-pattern>/RssFeedService</url-pattern>
      </web-resource-collection>
      <auth-constraint>
       <role-name>Role2</role-name>
      </auth-constraint>
     </security-constraint>

     <security-role>
      <role-name>Role1</role-name>
     </security-role>

     <security-role>
      <role-name>Role2</role-name>
     </security-role>

     <login-config>
      <auth-method>BASIC</auth-method>
      <realm-name>OnJava Application</realm-name>
     </login-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:57:46.727

您将每个页面限制为一个角色，并且您有 2 个用户，每个用户具有不同的角色。
所以user1只能访问DeploymentInfoService页面，user2只能访问RssFeedService页面。如果您希望他们中的任何一个访问另一个页面，您必须授予他们另一个角色，或者在该页面上允许更多角色。

# random - 在 WinRT 中创建随机数有哪些加密安全选项？

> ID：14582008
> 
> 赞同：13
> 
> 时间：2013-01-29T11:37:40.160
> 
> 标签：random, windows-8, cryptography, windows-runtime

通常我会做这样的事情：

```
byte[] randomBytes = new byte[bytes];
string randomString = Convert.ToBase64String(new RNGCryptoServiceProvider().GetBytes(randomBytes)); 
```

但是没有可用的 RNGCryptoServiceProvider。

是否有任何安全的随机替代方案可用？

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T12:04:43.287

我设法找到了一个等价物。

```
using Windows.Security.Cryptography;

IBuffer randomBuffer = CryptographicBuffer.GenerateRandom(PASSWORD_SALT_LENGTH);
string randomString = CryptographicBuffer.EncodeToBase64String(randomBuffer) 
```

我希望这对其他人有用。

# android - 使用 ASWing Haxe 版本定位 android

> ID：14582010
> 
> 赞同：1
> 
> 时间：2013-01-29T11:37:40.263
> 
> 标签：android, haxe

[我刚刚从http://svn.aswing.org/aswing/trunk/haXeAsWing/](http://svn.aswing.org/aswing/trunk/haXeAsWing/)查看了 Haxe 版本

并复制我项目的 com 文件夹旁边的 org 文件夹，如果我在 FlashDevelop 中以 Flash 播放器为目标，它将无错误地编译，但如果我以 android 为目标，我会收到这些错误：

```
org/aswing/AWTextField.hx:58: lines 58-63 : Field set_htmlText should be declared with 'override' since it is inherited from superclass
org/aswing/AWTextField.hx:76: lines 76-83 : Field set_scrollH should be declared with 'override' since it is inherited from superclass
org/aswing/AWTextField.hx:85: lines 85-92 : Field set_scrollV should be declared with 'override' since it is inherited from superclass
org/aswing/AWTextField.hx:68: lines 68-73 : Field set_text should be declared with 'override' since it is inherited from superclass

org/aswing/Component.hx:1671: lines 1671-1673 : Field get_height should be declared with 'override' since it is inherited from superclass
org/aswing/Component.hx:641: lines 641-643 : Field get_visible should be declared with 'override' since it is inherited from superclass 
```

任何的想法？我已经`NME 3.5.3`安装

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:54:47.523

AsWing 无法帮助您，但是当您喜欢 Android GUI 时，我真的建议您查看 Ian Harrigan 的 YAHUI ( [https://github.com/ianharrigan/YAHUI](https://github.com/ianharrigan/YAHUI) )。它正在大力发展，但看起来很有希望。

# cron - 尝试在 serverfree 上启动 cron 作业

> ID：14582013
> 
> 赞同：0
> 
> 时间：2013-01-29T11:38:00.317
> 
> 标签：cron, cron-task

我正在尝试在我的服务器上添加一个 cron 作业，它在此处托管[http://partisscan.bugs3.com/](http://partisscan.bugs3.com/)。提供者是 serversfree [http://www.serversfree.com](http://www.serversfree.com)。

这真的很好，但我不能做一个 cron 工作。我希望我的 php 文件[http://partisscan.bugs3.com/scan.php](http://partisscan.bugs3.com/scan.php)每分钟启动一次（也许后者不那么频繁，但开始）。所以我在控制面板下的 cron 作业管理器中添加了一个 cron 作业，但它不起作用。我的 cron 工作是：

```
 1 * * * *  php -f /home/u798416153/scan.php 
```

但是它不起作用：S

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:37:46.243

不工作的可能原因有很多。

关于文件：

*   文件的执行权限。
*   文件的所有者。

关于 crontab：

*   此 crontab 与您发布的行对应于哪个用户？
*   它必须由root或任何其他用户执行吗？如果不是root，则必须确保该用户不在/etc/cron.d/deny 中。

# java - 尝试使用 jaxb 解组 xml

> ID：14582017
> 
> 赞同：3
> 
> 时间：2013-01-29T11:38:14.407
> 
> 标签：java, eclipse, xsd, jaxb

我收到了一条响应消息的 xsd，我正在尝试将 xml 响应解析为 jaxb 生成的类。我首先遇到了一个问题，即根 xml 元素被称为“response”，但还有一个名为“response”的嵌套类，因此出现编译错误。为了解决这个问题，我发现在 xsd 中我可以使用 jaxb:class 注释来更改嵌套类的名称，该类创建如下，嵌套类现在生成为“callReport7Response”而不是“response”。

```
<xs:element name="callReport7" minOccurs="0">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="request">
            <xs:annotation><xs:appinfo><jaxb:class name="callReport7Request"/></xs:appinfo></xs:annotation>
                <xs:complexType>
                    <xs:complexContent>
                        <xs:extension base="xs:anyType">
                            <xs:attribute name="time" type="xs:string"/>
                        </xs:extension>
                    </xs:complexContent>
                </xs:complexType>
            </xs:element>
            <xs:element name="response">
            <xs:annotation><xs:appinfo><jaxb:class name="callReport7Response"/></xs:appinfo></xs:annotation>
                <xs:complexType>
                    <xs:complexContent>
                        <xs:extension base="xs:anyType">
                            <xs:attribute name="time" type="xs:string"/>
                        </xs:extension>
                    </xs:complexContent>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

不幸的是，当我尝试解组响应时，我收到错误消息说它无法将“callReport7Response”解析为“响应”

java看起来像这样：

```
 @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {"any"})
        @XmlRootElement(name = "response")
        public static class CallReport7Response {

            @XmlAnyElement
            protected List<Element> any;
            @XmlAttribute
            protected String time; 
```

似乎这就是它试图将我的嵌套对象转换为顶级对象。

```
09:28:34,608 ERROR [STDERR] java.lang.ClassCastException: uk.co.test.dashboard.dal.Response$Insurer$Subject$CallReport7$CallReport7Response cannot be cast to uk.co.test.dashboard.dal.Response 
```

我正在使用此代码解组：

```
Response response = new Response();
        StringReader reader = new StringReader(resp);
        try {
            JAXBContext context = JAXBContext.newInstance(response.getClass());
            Unmarshaller unmarshaller = context.createUnmarshaller();
            Object o = unmarshaller.unmarshal(reader);
            response = (Response) o;
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:14:48.717

**架构.xsd**

您应该将 JAXB 模式注释从嵌套`response`元素移至其对应的复杂类型。以下是基于您在问题中描述的简化 XML 架构。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="forum14582017" 
    xmlns="forum14582017" 
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    elementFormDefault="qualified" 
    jaxb:version="2.1">

    <xs:element name="response">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="callReport7">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="response">
                                <xs:complexType>
                                    <xs:annotation>
                                        <xs:appinfo>
                                            <jaxb:class name="callReport7Response" />
                                        </xs:appinfo>
                                    </xs:annotation>
                                    <xs:complexContent>
                                        <xs:extension base="xs:anyType">
                                            <xs:attribute name="time" type="xs:string" />
                                        </xs:extension>
                                    </xs:complexContent>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

**回复**

将生成如下所示的类（已删除注释和访问器以节省空间）。

```
package forum14582017;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.namespace.QName;
import org.w3c.dom.Element;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"callReport7"})
@XmlRootElement(name = "response")
public class Response {

    @XmlElement(required = true)
    protected Response.CallReport7 callReport7;

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {"response"})
    public static class CallReport7 {

        @XmlElement(required = true)
        protected Response.CallReport7 .CallReport7Response response;

        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {"any"})
        public static class CallReport7Response {

            @XmlAnyElement
            protected List<Element> any;
            @XmlAttribute(name = "time")
            protected String time;
            @XmlAnyAttribute
            private Map<QName, String> otherAttributes = new HashMap<QName, String>();

        }

    }

} 
```

**演示**

使用下面的演示代码和从上面的 XML 模式生成的 JAXB 模型。

```
package forum14582017;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("forum14582017");

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14582017/input.xml");
        Response response = (Response) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(response, System.out);
    }

} 
```

**输入.xml/输出**

可以生成/使用以下 XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="forum14582017">
    <callReport7>
        <response time="07:47"/>
    </callReport7>
</response> 
```

# php - FOREACH 和 UPDATE mysql 不工作

> ID：14582018
> 
> 赞同：0
> 
> 时间：2013-01-29T11:38:14.537
> 
> 标签：php, mysql, foreach, yii, sql-update

我有一个选择查询，然后是一个 foreach 循环内的更新查询。

我可以从 select 中获取数据并将其用作 json 来绘制图表，但是对于应该使用 select 中的相同数据更新的其他表，指定的字段有时会变为 0 1 或 2 ！
我尝试使用 select 进行更新，它可以（更新 ....（选择 ....））但在 foreach 内部它不起作用。我也尝试使用其他列，但结果相同，总是得到 0。请问有什么想法吗？提前谢谢了

这是我的代码

```
public function actionGetSensorsDataLive($beamId) {
    header('Content-Type: application/json; charset="UTF-8"');
    $sensorsIds = Sensor::model()->findAllBySql('SELECT sensor_id FROM sensor where 
                             node_id="' . $beamId . '" and sensor_name = "I" ;');

    foreach ($sensorsIds as $s) {
        $sResult = array();
       $modelSensor = SensorInfo2::model()->findBySql('SELECT * FROM information_sensor  
             where sensor_id= "' . $s['sensor_id'] . '"');

        $sResult = array(($modelSensor->information_sensor_time),
            ($modelSensor->information_sensor_value));
        /////////////// update//////////////// 
        // for every information_sensor_time that I get from the previous query  
         //  I want
        //  to update a row in another table //

        foreach ($modelSensor as $up) {
            $connection = yii::app()->db;

            $sql = 'UPDATE last_point  SET last_point_time = "' . 
                             $up['information_sensor_time'] . '"
            WHERE sensor_id= "' . $s['sensor_id'] . '"  ';

            $command = $connection->createCommand($sql);
            $command->execute();
        }
        /////update end///////               
    }
    echo json_encode($sResult);
    Yii::app()->end();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:40:46.040

```
 $sensorsIds=Sensor::model()->findAllBySql('SELECT sensor_id FROM lead where 
                         node_id="'.$beamId.'" and sensor_name = "I" ;' ); 
```

消除`;`

```
 $sensorsIds=Sensor::model()->findAllBySql('SELECT sensor_id FROM lead where 
                         node_id="'.$beamId.'" and sensor_name = "I"' ); 
```

现在试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:35:32.033

您正在使用 findBySql()`，它只返回一条记录，然后在 tha 上执行 foreach 是没有意义的。所以程行

```
 $modelSensor = SensorInfo2::model()->findBySql('SELECT * FROM information_sensor  
             where sensor_id= "' . $s['sensor_id'] . '"'); 
```

至

```
$modelSensor = SensorInfo2::model()->findAllBySql('SELECT * FROM information_sensor  
             where sensor_id= "' . $s['sensor_id'] . '"'); 
```

而且您应该使用 Alex 建议的非常安全的 querybuilder

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:54:50.777

最后我使用了这段代码

```
foreach ($sensors as $sensor)  {
$lastPointId = 1;  
$lastPoint = LastPoint::model()->findByPk($lastPointId);
$lastPoint->last_point_info = $sensor->information_time;
if ( ! $lastPoint->save()) {
    throw new CException('Unable to save last point.');
}
} 
```

谢谢大家

# c++ - 为什么我的析构函数被调用了两次？

> ID：14582022
> 
> 赞同：1
> 
> 时间：2013-01-29T11:38:38.697
> 
> 标签：c++, destructor

假设我有一个学生类的方法：

```
Student Student::method(Student x)
{
    //nothing important
    return x;
} 
```

复制构造函数被调用两次，一次是当对象 x 作为参数发送时，第二次是从函数返回 x 时。

当我调用此方法时，为什么**以及何时**调用了两次 Student 类的析构函数？调用是这样的：a = b.method(c)，其中 a、b 和 c 是 Student 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:52:07.263

对于您的示例，`a = b.method(c);`可能会发生三个副本，除了复制省略。第一个是当`c`对象被复制到函数参数中时`x`。第二个是`x`从函数返回对象时。第三个是返回值被复制到`a`对象中的时候。前两个涉及复制构造函数，最后一个涉及复制赋值运算符，除非您将其更改为`Student a = b.method(c);`，在这种情况下它们都使用复制构造函数。

`a`, `b`, 并且`c`都将在其作用域结束时被销毁。该对象`x`将在`method`函数结束时被销毁。函数的返回值将在包含它的完整表达式的末尾被销毁——也就是说，一旦`a = b.method(c);`完成。

但是，并非所有这些副本都必须发生 - 允许编译器在某些情况下*省略*或省略类的复制/移动构造。将发生第一次复制到函数参数中。函数的第二个副本将被视为先移动，然后再尝试复制它。此复制或移动可能会被省略。`a`如果您使用复制赋值，则从临时返回值到 的最终复制将发生，但如果您使用复制构造函数（如`Student a = b.method(c);`），则可能会被省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:39:36.120

如果构造了两个 Student 对象，则必须将它们销毁。传入参数和传出返回值的副本需要破坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:39:45.407

`x`当函数返回时调用析构函数（在`x`被复制到返回值之后）。

返回值的析构函数在包含函数调用的完整表达式的末尾调用（除非返回值通过分配给引用来延长其生命周期）。

每个被构建的具有自动存储持续时间的对象都会被自动销毁（通常以相反的构建顺序）。您构造了两个对象（`x`和返回值），因此有两个析构函数调用。

# model-view-controller - MVC 存储未加载

> ID：14582023
> 
> 赞同：0
> 
> 时间：2013-01-29T11:38:39.160
> 
> 标签：model-view-controller, extjs, proxy, sencha-touch, store

我是 SenchaTouch 的新手，试图在文档的帮助下创建一个基于 MVC 的应用程序。

现在我被困在从服务动态加载商店。

我经历了许多相同的链接/讨论，但它们以不同的方式实现。

请帮我解决这个问题，并建议在 senchatouch 中实现 MVC 是否正确。

这是我的代码。

控制器：

```
 var store1 = Ext.create('x.store.edAuthenticateStore',{});
        store1.setProxy({
            type:'ajax',
            url:'AppURL',
            reader:{
                type:'xml',
                rootProperty:"mbsResponse"
            },
            autoLoad:true
        });
        store1.load();

        alert(store1.getModel().get('membername')); 
```

店铺：

```
 Ext.define('x.store.edAuthenticateStore',{
         extend:'Ext.data.Store',
         requires:['Ext.data.reader.Xml'],
         config:{
             storeId:'authStore',
             model:'edTouch.model.edAuthenticateUserResult'
         }
    }); 
```

楷模：

```
 //1) edAuthenticateUserResult'
    Ext.define('edTouch.model.edAuthenticateUserResult',{
         extend:'Ext.data.Model',
         config:{
             id:'edAuthResult',
             fields:[
                {name:'memberid', type:'string'},
                {name:'membername', type:'string'},
                {name:'mbsstatuscode', type:'string'}, 
                {name:'mbsstatustext', type:'string'}
             ],
             hasMany:{
                     model:'edTouch.model.edChild',
                     name:'children'
             },
             hasOne:{
                 model:'edTouch.model.edSchoolDetails',
                 name:'schoolDetails'
             }      

         }
    });
    //2) edChild
    Ext.define('x.model.edChild',{
         extend:'Ext.data.Model',
         config:{
            fileds :[
              {name:'studentid', type:'string'},
              {name:'firstname', type:'string'},
              {name:'lastname' ,type:'string'},
              {name:'rollnumber', type:'string'},
              {name:'classid', type:'string'},
              {name:'classname', type:'string'},
              {name:'sectionid', type:'string'},
              {name:'sectionname', type:'string'},
              {name:'imagepath', type:'string'},                
            ]
        }
    });
    //3)
    Ext.define('x.model.edSchoolDetails',{
        extend:'Ext.data.Model',
        config:{
            fields:[           
              {name:'schoolid', type:'string'},
              {name:'schoolname', type:'string'},
              {name:'schoolImage' ,type:'string'},
              {name:'schoolweburl', type:'string'},
              {name:'location', type:'string'}
            ]
        }
     }); 
```

****_** xml ***_* _****

 **```
<?xml version="1.0"?>
<authenticateUserResponse xmlns="http://tempuri.org/">
  <authenticateUserResult>
    <mbsResponse xmlns="">
      <mbsstatuscode>200</mbsstatuscode>
      <mbsstatustext>Success</mbsstatustext>
      <memberid>101</memberid>
      <membername>xyz</membername>
      <schoolDetails>
        <schoolid>5</schoolid>
        <schoolname>abacd</schoolname>
        <schoolImage>123.jpg</schoolImage>
        <schoolweburl>www.google.com</schoolweburl>
        <location>IND</location>
      </schoolDetails>
      <children>
        <child>
          <studentid>1</studentid>
          <firstname>FName</firstname>
          <lastname>M</lastname>
          <rollnumber>123001</rollnumber>
          <classid>1</classid>
          <classname>1ST CLASS</classname>
          <sectionid>1</sectionid>
          <sectionname>A</sectionname>
          <imagepath>201312210145183111226-151723.jpg</imagepath>
        </child>
      </children>
    </mbsResponse>
  </authenticateUserResult>
</authenticateUserResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:31:18.163

尝试更换

`store1.load();`

和

```
store1.load({
    scope   : this,
    callback: function(records, operation, success) {
        // check for success and set the value of button        
    }
}); 
```**

# java - 如何为 Spring 应用程序中的多租户设置环境？

> ID：14582024
> 
> 赞同：3
> 
> 时间：2013-01-29T11:38:39.263
> 
> 标签：java, spring, multi-tenant

我必须使用 spring 框架和 eclipse IDE 在多租户中创建一个应用程序。我已经为 Spring 编程创建了环境。但是如何在其中为多租户创建设置。

我必须从哪里开始使用spring制作多租户应用程序？

感谢您提前回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:13:27.893

您应该首先设计您的应用程序以支持多个客户组织。Spring 方面没有对此的内置支持。我也使用 Spring 的路由数据源参与了此类应用程序。你可以阅读更多：

1.  [http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)

2.  [动态数据源路由](https://stackoverflow.com/questions/7304019/dynamic-datasource-routing)

# c# - 在 2D 中渲染等距文本

> ID：14582025
> 
> 赞同：2
> 
> 时间：2013-01-29T11:38:41.120
> 
> 标签：c#, xna, rendering, isometric

如何以等距投影的形式呈现文本？我了解原理，但我不确定如何以编程方式实际转换 SpriteFont 来做到这一点。

我的意思的例子：

![在此处输入图像描述](../Images/7250afadf1b0f50d4ed225bbadcc6ea0.png)

我什至不确定我应该寻找什么。似乎我可以通过使用等距投影矩阵和 3D 网格字体来实现这一点，但考虑到我在 2D 中工作，这似乎过于复杂。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:19:25.997

`SpriteBatch.Begin`接受一个`Matrix`参数，将您绘制的精灵（包括`SpriteFont`）转换到您想要的任何平面上。

不幸的是`Matrix`，没有提供`Create*`创建偏斜矩阵的方法。但是手动创建这样的矩阵很简单。以下代码经过测试，非常接近您想要的：

```
Matrix skew = Matrix.Identity;
skew.M12 = (float)Math.Tan(MathHelper.ToRadians(36.87f));
Matrix rotate = Matrix.CreateRotationZ(MathHelper.ToRadians(270+26.565f));

sb.Begin(SpriteSortMode.Deferred, null, null, null, null, null, skew * rotate);
// ... draw your sprites here ...
sb.End(); 
```

与您的图表的唯一区别是 Y 和 Y' 指向相反的方向，因为 XNA`SpriteBatch`在“客户端”坐标中工作（左上角的（0,0），Y+ 向下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:58:44.157

您可以将矩阵变换与精灵批处理一起使用来实现此目的。[您可以在此处](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Rotation_-_translation.php)阅读有关矩阵转换的更多信息。

# .net - Lotus Notes - 访问每个人的日历条目 .Net

> ID：14582027
> 
> 赞同：1
> 
> 时间：2013-01-29T11:38:48.783
> 
> 标签：.net, calendar, interop, lotus-domino, lotus

我基本上是想从我们的 Domino 服务器中获取所有员工的所有日历条目的列表。

然后，这些信息将被整理并显示在我们 Intranet 系统中 Silverlight 内的“行踪”屏幕中

我可以使用 Interop.Domino 访问我自己的邮箱/日历条目，但我想遍历服务器上的所有邮箱

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:42:49.323

我不熟悉*Interop.Domino*但您可以打开服务器 Domino 目录（通常为*names.nsf*）并循环所有个人文档，例如在“人物”视图中。邮件数据库路径和名称可以在每个个人文档的*MailFile项中找到。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:09:37.990

更多细节以扩展 Panu 的答案......

您要做的第一件事是建立对每个邮件文件的访问权限。没有它，你将无法在这个项目中取得任何进展。如果您的代码以您自己的身份运行，您可能无权访问任何其他用户的邮件文件。您可能需要让您的系统管理员为您的代码创建一个 ID，将该 ID 添加到一个组中，并授予该组对所有用户的邮件文件的“无读取公共文档的访问权限”访问权限。注意：我建议使用此级别而不是“阅读器”，因为这会将您的代码限制为只能查看公共日历条目。您的代码将看不到用户标记为“私人”的任何条目，并且您的代码将无法阅读用户的电子邮件。这与标准 Notes/Domino 安全实践一致。'

建立访问权限后，获取您所说的成功打开您自己的邮件数据库并读取您的日历的代码，将其放入一个函数，该函数使用 serverName 和 mailFile 的参数调用，使用这些参数替换您在当前代码中硬编码的字符串。

现在，编写一个新的主循环，在服务器上打开 Domino 目录 (names.nsf)，打开“人员”视图，并循环遍历所有人员文档。从每个文档中读取以下两个 NotesItem：“MailServer”和“MailFile”。如果它们是非空白的，请使用这些作为参数调用您的函数。

# google-apps - 寻找用于错误跟踪的谷歌应用程序或类似产品

> ID：14582037
> 
> 赞同：0
> 
> 时间：2013-01-29T11:39:30.407
> 
> 标签：google-apps

我看到了 googlebugs，我想找到类似的东西。有没有人知道那里的任何事情。在网上找了很久，还是没有找到像[googlebugs一样好的产品](https://code.google.com/p/googlebugs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:42:44.067

你知道你可以去[https://code.google.com/](https://code.google.com/)并创建一个帐户，然后你就可以在你自己的项目中使用所有这些功能，对吧？

还有许多其他错误跟踪工具：

Spirtest Jira Bugzilla 等。

# iphone - 在 Objective C 中调用 curl 命令

> ID：14582040
> 
> 赞同：0
> 
> 时间：2013-01-29T11:39:39.150
> 
> 标签：iphone, ios, objective-c, curl, github-api

我想在我的 iPhone 应用程序中调用这个 cURL 命令。

```
curl --user "username:PASSWD" https://api.github.com/users/username 
```

如何在目标 C 中执行它？我尝试了很多方法，但都没有成功。请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:42:33.410

要使用 shell 调用命令，请使用以下`system()`函数：

```
system("curl --foo --bar"); 
```

但是，**不要这样做。**这是一个黑客。使用 libcurl 或 NSURL API 进行联网。您也可以使用 libgit2 来检查 git 存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:47:18.350

NSTask 不能在沙盒环境下工作（你会得到“deny process-fork”）。所以把你的应用程序放到 /Applications

您可以`NSTask`用于执行任何系统命令。

```
NSTask *task=[NSTask new];
[task setLaunchPath:@"curl --user "username:PASSWD" https://api.github.com/users/username"];
[task launch]; 
```

# ios4 - 如何获取 Iphone 的设备 ID

> ID：14582055
> 
> 赞同：0
> 
> 时间：2013-01-29T11:40:21.820
> 
> 标签：ios4

我想使用推送通知，我需要获取 iPhone 的设备令牌。

如何得到这个，这样我就可以在代码中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:45:21.300

我假设您指的是 UDID（唯一设备标识符）

1.  启动 iTunes 并连接您的 iPhone。
2.  在右侧窗格中，找到有关您的 iPhone 的信息，包括其名称、容量、软件版本、序列号和电话号码。
3.  通过单击序列号显示标识符
4.  通过选择编辑→复制将标识符复制到剪贴板

# android - 如何从硬重置安卓手机中生存应用程序？

> ID：14582059
> 
> 赞同：2
> 
> 时间：2013-01-29T11:40:36.290
> 
> 标签：android, security, rooted-device

我见过像**Cerberus** 这样的应用程序可以在手机硬重置后存活下来。我想在我的应用程序中添加类似的功能，这些功能具有防盗等安全功能。所以我的问题是：如何创建一个能够在硬重置后幸存下来的应用程序，以保留一些甚至可能用于进一步目的的数据，`How can i prevent my app from hard reset of device?`

我`.zip`从一个用于将应用**程序闪存到 ROM 的应用**程序中浏览了该文件，但它并没有消除我的疑虑，任何人都可以弄清楚如何完成它

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:28:13.890

只有通过将 APK 移动到`/system/app`. SuperSu 等将其作为应用内功能提供。但是，如果您真的想要可靠的“安全功能”，则应用程序应该是固件的一部分，其他任何东西都是蛇油。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:46:43.517

为什么不将一些数据存储在 SD 卡上的文件中？您可以稍后简单地检索它，手机重置不应影响这一点。`/sdcard`在出厂重置 AFAIK 中未擦除。

看：

[http://www.androidcentral.com/android-zf-factory-reset](http://www.androidcentral.com/android-z-f-factory-reset)

[https://android.stackexchange.com/questions/33082/does-a-factory-reset-on-a-galaxy-nexus-wipe-the-virtual-sd-card-directory](https://android.stackexchange.com/questions/33082/does-a-factory-reset-on-a-galaxy-nexus-wipe-the-virtual-sd-card-directory)

# java - 查找包含可变数量元素的可变数量数组的排列的有效方法

> ID：14582060
> 
> 赞同：0
> 
> 时间：2013-01-29T11:40:36.687
> 
> 标签：java, c, algorithm, permutation, combinations

> **可能重复：**
> [如何从可变数量的可变长度数组中找到由 1 个元素组成的所有排列？](https://stackoverflow.com/questions/2189303/how-can-i-find-all-of-the-permutations-consisting-of-1-element-from-a-variable-n)

假设我有 n 个包含如下元素的数组

```
 a1 -> e11,e12,e13

 a2 -> e21,e22,e23,e24,e25

 a3 -> e31,e32

 a4 -> e41,e42,e43,e44

 ...

 an -> en1,en2,en3,en4,en5,en6 
```

我想从上面的每个数组中获取所有可能的排列，其中包含 n 个元素。

对于 exm。

```
 e11,e21,e31,e41.........,en1

 e13,e25,e32,e41.........,en6 
```

等等...

建议我一个有效的方法，如果可能的话，用 Java 或 C 编写代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:55:27.780

由于您对所有数组组合感兴趣，因此这里的 For 循环会很棒这是一个解决方案（应针对语法进行修改以使其正常工作）

```
int i = 0
int j=0
int k =0

while(i<arraylength(a1))
{
while (j < arraylength(a2))
{
//and so  till an
print a1[i],a2[j];
j++;
}
i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:17:24.993

您可以使用以下伪代码：

获得下一个排列的函数：

```
function NextPermutation(int[] current)
{
    current[0] = current[0] + 1;
    int pointer = 0;
    while(pointer <= n && current[pointer] == limit[pointer])
    {
        current[pointer] = 0;
        pointer = pointer + 1;
        current[pointer] = current[pointer] + 1;
    }
} 
```

预人口代码：

```
 int[] limit = new int[n + 2];
    int[] current = new int[n + 2];
    limit[1] = a1.length;
    ...
    limit[n] = an.length;

    while(current[n+1] == 0)
    {
        Print(current);
        NextPermutation(current);
    } 
```

`current`数组包含数组的索引`a1, a2, ... , an`。

# python - 如何在python中将位打包成可变长度的单词？

> ID：14582061
> 
> 赞同：0
> 
> 时间：2013-01-29T11:40:38.997
> 
> 标签：python, bit-manipulation

我可以将字符打包成 32 位字（或任何其他固定大小），但我想以位为单位的大小作为参数：

以下是适用于 32 位的方法：

```
def vectorize_key(key):
    return (v[0] << 24 | v[1] << 16 | v[2] << 8 | v[3] for v in split((ord(k) for k in key),4) ) 
```

这是行不通的。它说`int and tuple bad operands for |`，但我看不到我是如何在那里得到一个元组的。我明确地“解包”了元组！：

```
def vectorize_key(key,word_size=32):
    return (reduce(lambda p, (e,f) : p | (e << f),((x[i],i*8) for i in range(word_size/8))) for x in split((ord(k) for k in key),word_size/8)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:46:07.733

知道了。我错过了 reduce 的初始化器值：

```
def vectorize_key(key,word_size=32):
    return (reduce(lambda p, (e,f) : p | (e << f),((x[i],i*8) for i in range(word_size/8)),0) for x in split((ord(k) for k in key),word_size/8)) 
```

# php - 通过 foreach 函数过滤

> ID：14582066
> 
> 赞同：0
> 
> 时间：2013-01-29T11:41:04.603
> 
> 标签：php, wordpress, foreach

我在这里拉头发，我根本无法让它发挥作用。

我需要做一个 foreach 循环来获取网站中的所有作者，然后我需要过滤掉那些发表了 0 篇文章的作者，然后将作者的文章回显到一个特殊的 UL LI

*   数组中最后一位作者的标记：

    我的代码目前有两个函数，一个是预过滤至少有一篇文章的所有作者，然后在第二个函数中计算过滤数组中剩下的作者数量，然后给数组中的最后一个条目一个特殊的 li 标签。到目前为止的代码：

    ```
    /*********************
        Echo Filtered List
        *********************/
        function filtered_list() {
            $authors = get_users('orderby=nicename');
            $all_authors = array();
             if ( count_user_posts( $author->id ) >= 1 ) {
                 return true;
            }

        }

        function contributors() {

        $i = 0;
        filtered_list();
        $len = count($all_authors);
        foreach ($all_authors as $author ) {
              if ( count_user_posts( $author->id ) >= 1 ) {
                    if ($i == $len - 1) {
                        echo "<li class='author-last clearfix'>";}
                    else {
                        echo "<li class='author clearfix'>";}
                    $i++; 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:55:21.240

如果您通读代码，您可能会明白为什么它不起作用。

**第一：范围**

阅读[PHP 手册](http://php.net/manual/en/language.variables.scope.php)中的变量范围。基本上，在函数内声明的变量仅在该函数内可用，因此`$all_authors`在contributors() 内为null，因为它从未被初始化。

该`filtered_list`函数应*返回*经过过滤的作者列表，因此您应该循环`$authors`并将作者添加到`$all_authors`当且仅当她有 1 个或多个帖子时。循环结束后，返回数组。

现在，您可以通过将第一个函数的返回值设置为 $all_authors in `contributors`（或者更好的是，只需调用它们`$authors`）来获取过滤后的列表。

现在您已准备好遍历作者列表并找到他们的帖子。为此，您需要两个循环。一份给作者，一份给帖子。

```
foreach author in authors
    foreach post in author->posts
        if post is last post
            print special stuff
        else
            print normal stuff
        endif
    endforeach
endforeach 
```

希望这会有所帮助，并且您会从中学到一些东西。要点是：逐行阅读您的代码并向自己解释它的作用。

# ios - 创建 UITextField 对象的 NSArray

> ID：14582070
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:41:06.473
> 
> 标签：ios, uitextfield, nsarray

我想要大量的文本框，这些文本框将启用触控和可编辑。创建对象`NSArray`是`UItextField`最好的方法吗？如果是，我该如何创建？或建议其他方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:46:04.950

这在很大程度上取决于您要做什么。作为一种`NSArray`将您正在使用的所有文本框存储在控制器中的方法（而不是为此目的创建 ivars）是可以的，但您也可以使用`UITableView`/ `UITableViewController`。

使用表格视图可以让您毫不费力地增加文本框的数量。另一方面，如果您可以保证您的文本框永远不会超过您可以在单个屏幕上显示的内容，那么我认为使用表格视图不会给您带来很大的优势。但是，正如我所说，这在很大程度上取决于你想要做什么。

如果您决定使用数组选项，我建议您改用 an `NSDictionary`，以便您可以按名称（或标签，如果您将标签与每个视图相关联）访问每个视图。

另请记住，您可以`getViewByTag:`在容器视图上使用该方法来获取对它包含的任何视图的引用，这些视图基于您分配的视图标记。所以，你可以这样做：

```
//-- creating text box:
UITextField* textBox = ....;
textBox.tag = 1;
[self.view addSbview:textBox];

//-- accessing the text box:
UITextField* textBox = [self.view getViewByTag:1]; 
```

从这个意义上说，视图已经充当了文本框的容器，并允许您访问它们。

编辑：

> 实际上我正在尝试创建一个填字游戏网格

好的，所以，如果它是二维的，我会说排除了表格视图（这并非不可能，但我认为有更简单的方法）。

至于您的问题，这完全取决于您的填字游戏网格的动态程度：它是否总是具有相同数量的行和列？还是可以由用户定义？等等

在第一种情况下，我会选择`NSArray`，或者我会简单地使用如上所示的标记（这也会使内存管理自动进行）。

否则，您可能会检查`UICollectionView`.

如果您的问题是：哪种数据结构更适合处理填字游戏？那么，看看[这个帖子](https://stackoverflow.com/questions/2288901/best-data-structure-for-crossword-puzzle-search)。无论如何，我会说：不要指望你会为这类问题找到现成的解决方案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:46:26.317

如果`UITableView`您追求的是我认为您所描述的内容，那么包含可编辑单元格将是执行此操作的最佳方法。Apple 的开发人员网站上有很多示例代码，详细说明了如何最好地使用表格视图来创建显示一系列可编辑文本输入的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:23:20.743

最好使用 UI 表格视图，而不是添加“n”个文本字段。

# c# - 从一个网站应用程序到另一个 Web 应用程序的数据

> ID：14582076
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:41:27.380
> 
> 标签：c#

我创建了一个网站应用程序来验证用户（登录）并基于用户角色，response.redirect 用户到其他网站。我曾经在查询字符串中传递角色、电子邮件，但接下来我需要使用另一种方法来完成。我厌倦了创建会话，但重定向似乎不起作用..有人可以指导或指出我更好的方法吗？我只有一个提交按钮，它针对成员身份进行身份验证，以及一个 if 条件检查角色列表和基于角色的 reponse.redirecting 用户..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:03:43.077

发现这是在上一个问题中，这可能会有所帮助

在应用程序之间共享会话状态：http: [//www.codeproject.com/KB/aspnet/Sharing_session_state.aspx](http://www.codeproject.com/KB/aspnet/Sharing_session_state.aspx)

希望这可以帮助

# c# - 如何将单选按钮选择添加到 C# 中的列表中？

> ID：14582080
> 
> 赞同：0
> 
> 时间：2013-01-29T11:41:46.157
> 
> 标签：c#, list, radio-button

我对 C# 比较陌生，我正在尝试创建一个应用程序，用户可以在其中提供大量有关债券的数据。所以我有很多用于债券名称等的文本框，并且我在组框中有 2 个单选按钮来定义优惠券类型。所以，我有一个固定和零的单选按钮。我想要发生的是，当用户选择其中一个单选按钮时，该选择将被添加到列表中。

我试图做一个布尔运算并说：

```
if (rdbtn_Fixed.Checked)
{
    string couponType = rdbtn_Fixed.Text;
}
else
{
    if (rdbtn_Zero.Checked)
    {
        string couponType = rdbtn_Zero.Text;
    }
} 
```

虽然我知道这是一个很长的机会，因为我认为您不能以这种方式定义变量。我有一个调用不同类的方法：

```
Bond bonds = CreateBond(cusip, ticker, name, maturityNoTime, coupon, primaryBook, assignedBook, couponType, positionValue); 
```

因此，我无法将 couponType 定义为选中的单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:52:24.513

您只需将声明`couponType`放在`if`:

```
string couponType = null;

if (rdbtn_Fixed.Checked)
    couponType = rdbtn_Fixed.Text;
else if (rdbtn_Zero.Checked)
    couponType = rdbtn_Zero.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:58:50.280

```
 string couponType = rdbtn_Fixed.Checked == true ? rdbtn_Fixed.Text : rdbtn_Zero.Text; 
```

# python - 如何从预定义的块构建正则表达式

> ID：14582081
> 
> 赞同：2
> 
> 时间：2013-01-29T11:41:48.177
> 
> 标签：python, regex

我想基于模板和一组预定义块构建正则表达式，并使用 string.Template 进行替换。

例如：

*   模板：`/data/${year}_${month}_${day}/${year}${month}${day}_${type}_${id}.dat`
*   块：
    *   天： `(?P<day>\d{2})`
    *   月： `(?P<month>\d{2})`
    *   年： `(?P<year>\d{4})`
    *   类型： `(?P<typechar>[BDPCLNIYSQJ])`
    *   ID： `(?P<id>\d{8})`

* * *

```
>>> string.Template(template).safe_substitute(blocks)

/data/(?P<year>\d{4})_(?P<month>\d{2})_(?P<day>\d{2})/(?P<year>\d{4})(?P<month>\d{2})(?P<day>\d{2})_(?P<typechar>[BDPCLNIYSQJ])_(?P<id>\d{8}).dat 
```

问题在于重复的名称组，这在正则表达式中不被接受。

我正在寻找一种方法来纠正模板（在替换之前或之后），一种欺骗 re 吞下重复项的方法，或者一种全新的解决问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:30:23.520

我不确定 Python，但 PCRE 和 Perl 都支持 (?(DEFINE)...) 构造。所以你可以使用这样的东西

```
(?x) 
(?(DEFINE)
    (?<date>        (?&long_date) | (?&short_date))
    (?<long_date>   (?&year) _ (?&month) _ (?&day) _ (?&type) _ (?&id))
    (?<short_date>  (?&year) _ (?&month) _ (?&day))
    (?<day>         \d{2})
    (?<month>       \d{2})
    (?<year>        \d{4})
    (?<type>        [BDPCLNIYSQJ])
    (?<id>          \d{8})
)
(?&date) 
```

我使用“x”修饰符 (?x) 只是为了使正则表达式更具可读性（现在正则表达式中的空格被忽略）。

> (?(DEFINE)...) 形式的“条件组”可用于定义从不内联评估的组（命名和编号），但可以从其他地方作为“子例程”调用。实际上，DEFINE 条件始终为假。在这样的组中可能只有一种选择。

[http://www.pcre.org/changelog.txt](http://www.pcre.org/changelog.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:49:00.370

摆脱 ?P 名称元素。IE

```
day: (?P<name>\d{2}) 
```

变成

```
day: (\d{2}) 
```

在 tbh 之前我从未使用过 ?P 功能

不过，您的正则表达式模板想法很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:15:31.543

应用模板两次，一次设置名称，然后使用输出制作最终的正则表达式

```
day='(?P<$dayname>\d{2})'
d=dict(dayname='day_start')
Template(day).safe_substitute(d) 
```

重复您需要的所有名称，然后将它们全部输入到使用 day1 day2 等的最终模板中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T22:57:33.353

在听从朋友的建议后，我找到了达到预期效果的方法。

这个想法是在替换正则表达式块之前修改模板字符串以消除重复的变量。实际上，它并没有删除重复项，而是用 (?P=name) 语法将它们替换为对第一个的引用。通过这种方式，您可以强制使用该块的任何地方的内容都相同。

我将假设正则表达式组名与模板块名称相同。在问题示例中并非如此，但可以毫无问题地对其进行更改。

要转换重复项，我使用以下函数：

```
>>> def remove_duplicate_blocks(template):
        regex = '\$\{([\w]+)\}'
        def alt_seen(matchobj):
            x = matchobj.group(1)
            if x not in seen and not seen_add(x): return '${%s}' % x
            else: return '(?P=%s)' % x
        seen = set()
        seen_add = seen.add
        return re.sub(regex, alt_seen, template) 
```

它返回没有重复的转换后的模板，并强制所有相似的块具有相同的内容。

之后只需更换积木即可

```
>>> unique_blocks_template = remove_duplicate_blocks(template)
>>> print unique_blocks_template
/data/${year}_${month}_${day}/(?P=year)(?P=month)(?P=day)_${type}_${id}.dat

>>> string.Template(unique_blocks_template).safe_substitute(blocks)
'/data/(?P<year>\\d{4})_(?P<month>\\d{2})_(?P<day>\\d{2})/(?P=year)(?P=month)(?P=day)_(?P<type>[BDPCLNIYSQJ])_(?P<id>\\d{8}).dat' 
```

问题中没有提到，但是同样的原始模板也可以用来重构我们想要与正则表达式匹配的字符串，这就是这段代码的初衷。

# c++ - 在 OpenCV 中合并频道

> ID：14582082
> 
> 赞同：17
> 
> 时间：2013-01-29T11:41:49.793
> 
> 标签：c++, opencv

我需要从灰度图像创建一个“红色”图像。我正在使用这段代码：

```
void build_red(const cv::Mat& in, cv::Mat& out) {
    out = Mat::zeros(in.rows, in.cols, CV_8UC1);

    Mat zeros = Mat::zeros(in.rows, in.cols, CV_8UC1);
    Mat tmp;
    in.convertTo(tmp, CV_8UC1);

    vector<Mat> ch;
    ch.push_back(zeros);
    ch.push_back(zeros);
    ch.push_back(tmp);

    cout << "Using " << ch.size() << " channels" << endl;
    merge(ch, out);
} // build_red 
```

有一些解释：

```
void build_red(const cv::Mat& in, cv::Mat& out) { 
```

in 是输入矩阵，out 是输出。

```
out = Mat::zeros(in.rows, in.cols, CV_8UC1); 
```

为 out 分配一些空间（可能没用，但我尝试的一部分）

```
 Mat zeros = Mat::zeros(in.rows, in.cols, CV_8UC1);
    Mat tmp;
    in.convertTo(tmp, CV_8UC1); 
```

创建一个相同大小的空矩阵，并将输入图像转换为单通道uchar。

```
 vector<Mat> ch;
    ch.push_back(zeros);
    ch.push_back(zeros);
    ch.push_back(tmp);

    cout << "Using " << ch.size() << " channels" << endl;
    merge(ch, out); 
```

创建一个具有三个通道的向量，然后将它们合并到“输出”中。

但是，当我运行代码时，我收到以下消息：

```
 Using 3 channels 
```

和以下例外：

```
OpenCV Error: Bad number of channels (Source image must have 1, 3 or 4 channels) 
in cvConvertImage, file /[...]/libs/OpenCV-2.4.0/modules/highgui/src/utils.cpp, 
line 611
terminate called after throwing an instance of 'cv::Exception'
what():  /[...]/libs/OpenCV-2.4.0/modules/highgui/src/utils.cpp:611: 
error: (-15) Source image must have 1, 3 or 4 channels in function cvConvertImage 
```

请你帮助我好吗？从我没有经验的角度来看，图像的类型是相同的，通道数是正确的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T13:54:14.563

如果您有灰度图像，为什么要转换图像？

只需为蓝色和绿色创建两个相同大小的空矩阵。

并且您已将输出矩阵定义为 1 个通道矩阵。您的输出矩阵必须至少包含 3 个通道。（蓝色、绿色和红色）。其中蓝色和绿色将完全为空，您将灰度图像作为输出图像的红色通道。

```
#include <opencv2/highgui/highgui.hpp> 
#include <stdio.h>
using namespace std;
using namespace cv;

int main()
{
    Mat img, g, fin_img;
    img = imread("Lenna.png",CV_LOAD_IMAGE_GRAYSCALE);
    vector<Mat> channels;

    g = Mat::zeros(Size(img.rows, img.cols), CV_8UC1);

    channels.push_back(g);
    channels.push_back(g);
    channels.push_back(img);

    merge(channels, fin_img);
    imshow("img", fin_img);
    waitKey(0);
    return 0;
} 
```

# php - php消息发送者延迟

> ID：14582096
> 
> 赞同：0
> 
> 时间：2013-01-29T11:42:41.133
> 
> 标签：php, mysql, sender

此代码从我的数据库中提取用户 ID 并向他们发送消息。问题是试图同时向所有用户发送消息，而我的数据库出现故障。如果我将它发送给许多用户，我会收到错误。有人可以帮我让它同时向 1 个或 2 个用户发送消息，并且可能会在消息之间延迟几秒钟吗？

```
$result = mysql_query("
        SELECT
            *
        FROM
            offline_access_users
    ");

    if($result){
        while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
            $msg['access_token'] = $row['access_token'];
            try {
                $facebook->api('/me/feed', 'POST', $msg);
                $output .= "<p>Posting message on '". $row['name'] . "' wall success</p>";
            } catch (FacebookApiException $e) {
                $output .= "<p>Posting message on '". $row['name'] . "' wall failed</p>";

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:51:37.743

你需要考虑一下。

首先，您需要在**cronjob**中执行此操作，例如每 5 分钟运行一次。

之后，您需要了解如何限制每人每天一次（或您想要的任何限制）不更频繁地发送消息 - 因此您需要`message_sent_date`在表格中创建一个额外的字段。

然后，您需要限制每次运行 cronjob 的用户数量。

```
// replace mysql with mysqli or PDO !!!
$result = mysqli_query($link, "
        SELECT *
        FROM offline_access_users
        ORDER BY message_sent_date ASC
        LIMIT 5
    "); // this takes the 5 users that received messages the longest time ago 
```

接下来，在`while`循环内部，执行这个查询（在 try 块中）。

```
$updateQuery = "UPDATE offline_access_users SET message_sent_date = CURRENT_TIMESTAMP WHERE id = {$row[id]}"; 
```

应该是这样，让我知道它是怎么回事。

**结果**

这个脚本会每5分钟运行一次，并选择5个没有收到消息的用户（这里的逻辑看你需要什么，所以你应该清楚一点）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T11:52:23.317

试试下面的代码：

```
$offset = 0; //Starting Point
$limit = 2;  //Number of records to work with per loop
while(1)
{
    $result = mysql_query("
        SELECT * FROM offline_access_users LIMIT $offset,$limit
    ");

    if($result){
        while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
            $msg['access_token'] = $row['access_token'];
            try {
            $facebook->api('/me/feed', 'POST', $msg);
            $output .= "<p>Posting message on '". $row['name'] . "' wall success</p>";
            } catch (FacebookApiException $e) {
                $output .= "<p>Posting message on '". $row['name'] . "' wall failed</p>";

            }
        }
    }
    else
        break;
    $offset = $offset + $limit;
} 
```

# python - 获取满足条件的第一个值的列表索引

> ID：14582102
> 
> 赞同：2
> 
> 时间：2013-01-29T11:42:49.383
> 
> 标签：python

我有一个清单

```
a = [1.0, 1.2, 1.1, 1.4, 0.1] 
```

并从该列表中我想获得满足某些标准的*第一个值的**索引，例如**`x > 1.1`*

 *在 python 中这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:46:16.467

您可以结合`next`和`enumerate`：

```
>>> next(i for i,x in enumerate(a) if x > 1.1)
1
>>> next(i for i,x in enumerate(a) if x > 1.3)
3 
```

或者

```
>>> next((i,x) for i,x in enumerate(a) if x > 1.3)
(3, 1.4) 
```

如果你想要两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:45:09.093

你可以这样做：

```
def analyze(l, criteria):
    for idx in range(len(l)):
        if criteria(l[idx]):
            return idx 
```

然后像这样使用它：

```
a = [1.0, 1.2, 1.1, 1.4, 0.1]
analyze(a, lambda x: x > 1.1) 
```

我不认为它太pythonic。可能有更多的pythonic方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:53:58.803

我认为这可能比其他*一些*答案更具pythonic - 如果这就是你所追求的。

```
a = [1.0, 1.2, 1.1, 1.4, 0.1]

def crit(x):
    return x > 1.3

index = None
for i,v in enumerate(a):
    if crit(v):
        index = i
        break

print index 
```*

# sugarcrm - 在 SugarCRM 中实施标签系统

> ID：14582103
> 
> 赞同：1
> 
> 时间：2013-01-29T11:42:54.377
> 
> 标签：sugarcrm

我想为具有以下特征的 SugarCRM 实施标签系统：

1.  用户只需将新标签写入标签字段即可创建任何新标签
2.  建议用户选择现有标签，以避免出现相似的标签（例如，如果用户尝试输入“sugar”作为标签，则应建议他们选择“SugarCRM”）
3.  按标签搜索应该只得到具有该标签的记录，而不是具有该标签作为标题或描述字段中的关键字的记录
4.  所有模块中的所有记录都应该有一个标签字段
5.  如果可以在所有模块中进行标签搜索，那就太好了

有谁知道这是否已经有一些实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:10:07.023

SugarForge 上有几个。我以前使用过来自 CARRENET ( [http://www.sugarforge.org/projects/sugartags/](http://www.sugarforge.org/projects/sugartags/) ) 的 SugarTAGS 作为起点。

# php - 在codeigniter中更改密码

> ID：14582104
> 
> 赞同：0
> 
> 时间：2013-01-29T11:42:57.450
> 
> 标签：php, codeigniter

嗨，我编写了更改密码的代码，但它不会更改表中的密码，而是将当前密码设为 0。所以我该怎么做。谢谢

这是我的模特

```
function changepassword() {
$this->db->select('id');
$this->db->where('username', $this->session->userdata('username'));
$this->db->where('password', $this->input->post('OldPassword'));
$query = $this->db->get('mau_user');
if ($query->num_rows() > 0) {
    $row = $query->row();
    if ($row->id === $this->session->userdata('id')) {
        $data = array(
            'password' => $this->input->post('password')
        );
        $this->db->where('username', $this->session->userdata('username'));
        $this->db->where('password', $this->input->post('OldPassword'));
        if ($this->db->update('mau_user', $data)) {
            return "Password Changed Successfully"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:18:47.753

在控制器中

```
function edit_password()
{
    $uderid = $this->session->userdata('user_id');
    // update data

    if($_POST)
    {
        if($this->input->post('old_password')!=''){
            $this->form_validation->set_rules('old_password','Old password',  'trim|required|xss_clean|addslashes|encode_php_tags |callback_oldpass_check');            
            $this->form_validation->set_rules('new_password','New password', 'trim|required|xss_clean|addslashes|encode_php_tags|min_length['.PASS_MIN_LEN.']|md5');
            $this->form_validation->set_rules('conf_password', 'Confirm password', 'trim|required|xss_clean|addslashes|encode_php_tags|min_length['.PASS_MIN_LEN.']|matches[new_password]|md5');

            if($this->form_validation->run() == TRUE) 
            {       
                $data =array( 'password' => $this->input->post('conf_password'));                   
                $this->main->update('users','user_id',$uderid,$data);

                $this->change_password('Password updated successfully');                      
            }
            else{
                $this->change_password();
                }       
            }

        else{
            redirect(base_url().'user' , '301');
        }
    }       

}

 function oldpass_check($oldpass)
 {  
    $user_id = $this->session->userdata('user_id');
    $result = $this->main->check_oldpassword($oldpass,$user_id);       
        if($result ==0)
            {
                $this->form_validation->set_message('oldpass_check', "%s doesn't match.");
                return FALSE ;  

            }
         else
            {
                return TRUE ;

            }             
} 
```

模型

```
function check_oldpassword($oldpass,$user_id)
{
    $this->db->where('user_id', $user_id);
    $this->db->where('password', md5($oldpass));        
    $query = $this->db->get('users'); //data table
    return $query->num_rows(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:52:31.360

如果在数据库中，字段密码设置为整数，默认值为 0，因此您尝试更新的值可能无效，您应该打印 SQL 并从那里开始调试...。

# php - 更好的编码方式 - 检查禁止词的评论

> ID：14582109
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:43:12.317
> 
> 标签：php, regex, arrays, preg-replace, profanity

有没有更好、更快的方法来执行以下操作？

这是一个类的方法，用于检查评论中是否包含禁止词，如果有，则需要手动批准评论。

我真的不想改变我的模型/数据库的工作方式，所以`$this->get_words()`理想情况下需要保留（它返回一个对象数组，其中包含从 DB 字段生成的属性）。

PS我知道亵渎过滤器等不受欢迎，但在这种情况下，它只会发表评论，需要手动批准。

```
public function check_string($str) {
    // Put banned words in an array
    $banned_words = [];
    foreach ($this->get_words() as $word) {
        $banned_words[] = $word->word;
    }

    $patterns = array(
        '/[_.-]/', '/1/', '/3/', '/4/', '/5/', '/6/',
        '/7/',     '/8/', '/0/', '/z/', '/@/'
    );
    $replacements = array(
        '',  'i', 'e', 'a', 's', 'g',
        't', 'b', 'o', 's', 'a'
    );

    // Turn str into array of individual words
    $str_words = explode(" ", $str);

    foreach ($str_words as $str_word) {
        $str_word = strtolower(preg_replace($patterns,$replacements,$str_word));
        if (in_array($str_word, $banned_words, true))
            return TRUE;
    }

    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:08:48.007

您可以将**坏词**和**替换词**放在一个文件中。像这样 -

```
badword1,replaceword1
badword2,replaceword2
badword3,replaceword3 
```

**像这样读取文件并创建一个坏词**数组和**替换词**-

```
$allline_arr = file('bad_word.txt');
$badword_arr = array();
foreach ($allline_arr as $line) {
    $badword_arr[] = explode(',', $line);
} 
```

-或者-

```
$file = fopen("bad_word.txt","r");
$badword_arr = array();
while(! feof($file))
{
  $line = fgets($file);
  $badword_arr[] = explode(',', $line);
}
fclose($file); 
```

现在你可以随心所欲地使用它了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-05T08:39:01.400

你可以使用这个方法

```
var bannedWords = ["NO", "NO NAME", "NONAME", "MISS", "MS", "MS.", "MR", "MR.", "MRS", "MRS."];

function checkBannedWords(value) {
            var rgx = new RegExp(bannedWords.join("|"), "gi");
            if (value.replace(rgx,'*').indexOf('*') != -1) {
                return false;
            }
            return true;
        } 
```

# java - 片段布局内的MapView（android maps api v2）不显示

> ID：14582110
> 
> 赞同：8
> 
> 时间：2013-01-29T11:43:13.060
> 
> 标签：java, android, android-fragments, android-viewpager, android-maps-v2

我正在使用 viewpager 在 2 个操作栏选项卡之间滑动（使用 eclipse 向导进行这种导航）。我正在使用 android maps v2 api。

我想在我的一个选项卡中拥有 mapview、button 和 textview（我猜想拥有 mapfragment 是不可能的）。

我从 xml 为我的片段膨胀布局，如下所示：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.first_tab_fragment, container, false);
    }
} 
```

我的 first_tab_fragment.xml：

```
<?xml version="1.0" encoding="utf-8"?>

  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
   android:layout_height="match_parent" >

<com.google.android.gms.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="100dip"
    android:layout_height="100dip"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginRight="15dp" >
</com.google.android.gms.maps.MapView>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:text="Button" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/button1"
    android:layout_marginBottom="133dp"
    android:text="TextView" /> 
```

MapView 不显示，只是 textview 和按钮。我也没有错误。我是否必须编写一些代码来初始化地图视图？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-29T15:34:46.750

我通过将此代码添加到 onCreateView 来解决它：

```
 // Gets the MapView from the XML layout and creates it
    mapView = (MapView) v.findViewById(R.id.mapview);

    mapView.onCreate(savedInstanceState);
    mapView.onResume(); //without this, map showed but was empty 

    // Gets to GoogleMap from the MapView and does initialization stuff
    map = mapView.getMap(); 
    map.getUiSettings().setMyLocationButtonEnabled(false);
    map.setMyLocationEnabled(true);

    // Needs to call MapsInitializer before doing any CameraUpdateFactory calls
    try {
        MapsInitializer.initialize(this.getActivity());
    } catch (GooglePlayServicesNotAvailableException e) {
        e.printStackTrace();
    }

    // Updates the location and zoom of the MapView
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(new LatLng(44.14, 14.2), 10);
    map.animateCamera(cameraUpdate); 
```

# c# - 为不同环境配置web参考VS 2010

> ID：14582116
> 
> 赞同：0
> 
> 时间：2013-01-29T11:43:28.380
> 
> 标签：c#, asp.net, .net, .net-4.0, configuration

我有一个遗留项目，它有几个 Web 引用，我想根据环境（本地、开发、登台、生产）配置不同的端点。

我已经阅读了这篇[文章](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic)，但是 VS 使用的是`Settings.settings`和 applicationSettings 而不是`appSettings`，所以不是使用

```
this.Url = System.Configuration.ConfigurationSettings.AppSettings["foo_Api"] 
```

正在使用`this.Url = global::foo.Properties.Settings.Default.foo_Api;`

我的 app.config 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="foo.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <foo.Properties.Settings>
            <setting name="foo_Api" serializeAs="String">
                <value>http://myserver/server/Api.asmx</value>
            </setting>
        </foo.Properties.Settings>
    </applicationSettings>
</configuration> 
```

我已阅读有关配置 with 的信息`machine.config`，但在我的情况下这不起作用，因为同一台机器上有不同的环境。在运行时更改 Url 属性也不是最好的解决方案，因为我需要更改 Web 引用的所有用法。

理想情况下，我想使用`appSettings`这样我可以放置一个 local.config 来覆盖端点的值，但是如果有一种简单的方法来覆盖端点的值`applicationSettings`也可以。

**编辑**

这是一个dll项目。不知道这是否会以某种方式影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:34:22.933

您可以在 applicationSettings 部分包含外部配置文件，从而允许您针对不同的环境调整配置：

```
<applicationSettings>
    <foo.Properties.Settings configSource="ConfigFolder\local.config">
    </foo.Properties.Settings>
</applicationSettings> 
```

本地配置：

```
<applicationSettings>
    <foo.Properties.Settings configSource="local.config">
        <setting name="foo_Api" serializeAs="String">
            <value>http://myserver/server/Api.asmx</value>
        </setting>
    </foo.Properties.Settings>
</applicationSettings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:27:47.363

如果它可以帮助任何人：最后经过一些研究，我发现最好的解决方案是为每个环境添加一个 Visual Studio 配置文件和一个`Web.config`转换。然后我只是简单地添加到`Web.config`本地 Web 参考端点和每个`Web.{environment}.config`替换端点值的转换。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)

# xna-4.0 - XNA 相位管理

> ID：14582120
> 
> 赞同：1
> 
> 时间：2013-01-29T11:43:39.483
> 
> 标签：xna-4.0

我正在 XNA 4.0 中制作战术 RPG 游戏，想知道“阶段”的最佳方式是什么？我所说的阶段是创建一个阶段，让玩家将他的士兵放置在地图上，为玩家的回合创建一个阶段，为敌人的回合创建另一个阶段。

我在想我可以创建某种枚举并将升级/绘制方法中的代码设置为相应地运行，但我想确保这是最好的方法。

谢谢！

**编辑：**到下面**的anaximander**：

我之前应该提到过这一点，但我已经在我的应用程序中实现了一些与你提到的类似的东西。我的被​​调用`ScreenManager`，`Screen`但它的工作方式完全相同。我认为问题在于我将屏幕、阶段、状态等视为不同的事物，但实际上它们是同一事物。

基本上我真正想要的是一种在单个屏幕中管理不同“阶段”的方法。我调用的其中一个屏幕`map`基本上代表了游戏中所有可能的地图。这是战斗发生的地方等。我想知道解决这个问题的最佳方法是什么：

*   要么创建一个名为的枚举，该枚举`FightStage`包含诸如 `PlacementPhase`,`PlayerPhase`等的值，然后根据枚举拆分`Draw`and 方法`Update`
*   或者创建一个外部类来管理它。

对困惑感到抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:06:12.813

我经常对状态或阶段采取的一种方法是创建一个管理器类。本质上，您需要一个`GamePhase`具有`Initialise()`、和方法的对象，并且`Update()`可能还有。通常也值得拥有某种处理移交的方法。稍后再谈。一旦你有了这个类，从它继承来为每个阶段创建一个类；, ,等`Draw()``Dispose()``Pause()``Resume()``SoldierPlacementPhase``MovementPhase``AttackPhase`

然后你有一个`GamePhaseManager`类，它有`Initialise()`、和方法`Update()`，可能还有某种方法。您还需要一种将状态添加到管理器的方法——它需要一种存储它们的方法。我建议使用 an或作为键。您的方法将把该键作为参数。`Draw()``Dispose()``SetCurrentPhase()``Add()``Dictionary<>``int/enum``string``SetCurrentPhase()`

基本上，您要做的就是在游戏中设置一个实例`GamePhaseManager`，然后创建并初始化每个阶段对象并将其添加到管理器中。然后你的游戏的更新循环将调用`GamePhaseManager.Update()`，它只是调用当前状态的 Update 方法，并传递参数。

您的阶段将需要某种方式来告诉它们何时该结束，以及某种处理方式。我发现最简单的方法是设置你的`GamePhase`对象，然后有一个方法，就像`GamePhase.SetNextPhase(GamePhase next)`它为每个阶段提供一个对下一个阶段的引用。然后他们所需要的只是一个`Exiting`带有受保护设置器和公共获取器的布尔值，这样当他们的内部逻辑决定该阶段结束时，他们可以设置`Exiting = true`它们`Update()`，然后`GamePhaseManager.Update()`你可以这样做：

```
public void Update(TimeSpan elapsed)
{
    if (CurrentPhase.Exiting)
    {
        CurrentPhase.HandOver();
        CurrentPhase = CurrentPhase.NextPhase;
    }
    CurrentPhase.Update(elapsed);
} 
```

你会注意到我在更新*前改变了阶段。*这样退出阶段就可以完成它的循环；否则你会得到奇怪的行为。该`CurrentPhase.HandOver()`方法基本上让当前阶段传递下一阶段需要知道的任何内容，以便从正确的点继续。这可能是通过让它在`NextPhase.Resume()`内部调用，将它需要的任何信息作为参数传递给它来完成的。记得也设置`Exiting = false`在这里，否则只更新一个循环后它会继续移交。

这些`Draw()`方法以相同的方式处理 - 你的游戏循环调用`GamePhaseManager.Draw()`，它只是调用`CurrentPhase.Draw()`，传递参数。

如果你有任何不依赖于阶段的东西——例如地图——你可以将它存储在 中`GamePhaseManager`并在 的方法中调用它`GamePhaseManager`的方法，你可以让阶段传递它并让它们调用它的方法，或者您可以将其保持在顶层并在`GamePhaseManager`'s. 旁边调用它的方法。这取决于阶段需要对其进行多少访问。

**编辑** 您的编辑表明您知道上面的大部分内容，但我将其留在那里以帮助将来遇到此问题的任何人。

如果你已经有一个经理来处理游戏的各个阶段，我的直觉是嵌套它。你看到你的游戏有阶段，并建立了一个类来处理它们。您有一个拥有自己的阶段的阶段，那么为什么不使用您已经编写的阶段处理代码呢？`Screen`从你的对象继承来拥有一个`SubdividedScreen`类，或者任何你想调用它的东西。这个新类与父类基本相同，但它也包含自己的`ScreenManager`类实例。用这些对象之一替换`Screen`您正在调用的对象，并用实例填充它以表示各个阶段（、等）。您可能需要对`map``SubdividedScreen``ScreenManager``Screen``PlacementPhase``PlayerPhase``ScreenManager`代码以确保正确的信息可以到达需要它的方法，但它比使用`Update()`switch case 细分的杂乱方法要整洁得多。

# ios - 在iOS中替换图像的特定颜色

> ID：14582121
> 
> 赞同：6
> 
> 时间：2013-01-29T11:43:47.387
> 
> 标签：ios, image-processing, opengl-es, core-graphics, glkit

我想用其他用户选择的颜色替换图像的特定颜色。在替换图像颜色时，我想保持原始颜色的渐变效果。例如，请参阅所附图像。 [![image1.png](../Images/f17ba118f4aed319c90ad9d3bff194fb.png)](https://dl.dropbox.com/u/100176839/image1.png)
[![图像2.png](../Images/516b3974118fa3010ba7be7fd3a29b53.png)](https://dl.dropbox.com/u/100176839/image2.png)

我曾尝试使用 CoreGraphics 这样做，并且成功替换了颜色。但是替换颜色并没有保持图像中原始颜色的渐变效果。

有人可以帮我吗？CoreGraphics 是正确的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-10T12:34:40.923

在经历了几乎相同的问题（但使用 NSImage）后，在使用 ColorCube CIFilter 的 NSImage 中创建了一个用于替换颜色的类别。

[https://github.com/braginets/NSImage-replace-color](https://github.com/braginets/NSImage-replace-color)

受 UIImage 代码的启发（也使用 CIColorCube）： [https ://github.com/vhbit/ColorCubeSample](https://github.com/vhbit/ColorCubeSample)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T23:56:37.760

我在项目中的图像之间进行了很多颜色转移/混合/替换/交换，并发现以下出版物非常有用，均由 Erik Reinhard 撰写：

*   [图像之间的颜色转移](http://www.cs.bris.ac.uk/~reinhard/papers/colourtransfer.pdf)
*   [渲染和捕获视频的实时颜色混合](http://www.cs.bris.ac.uk/~reinhard/papers/1502.pdf)

不幸的是，我现在无法发布任何源代码（或图像），因为结果将提交给即将举行的会议，但我已经实现了上述算法的变体，结果非常令人满意。我敢肯定，通过一些调整（和一点耐心），您可能会得到您想要的！

编辑：

此外，真正的挑战在于分离不同的图片元素（例如隔离墙）。这与 Photoshop 的魔术棒工具没有什么不同，后者显然需要大量的处理能力和复杂的算法（并且仍然不完美）。

# javascript - 检查数字是否几乎相等 javascript

> ID：14582122
> 
> 赞同：14
> 
> 时间：2013-01-29T11:43:49.290
> 
> 标签：javascript

我想知道这是否可能？

假设：

```
var a = 2592;
var b = 2584;
if(a nearly equal to b) {
// do something
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T11:45:52.473

像这样。

```
var diff = Math.abs( a - b );

if( diff > 50 ) {
    console.log('diff greater than 50');
} 
```

如果绝对差异大于`50`使用`Math.abs`和简单比较，那将进行比较。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-31T17:59:54.543

这是老派的做法...

```
approxeq = function(v1, v2, epsilon) {
  if (epsilon == null) {
    epsilon = 0.001;
  }
  return Math.abs(v1 - v2) < epsilon;
}; 
```

所以，

```
approxeq(5,5.000001) 
```

是真的，而

```
approxeq(5,5.1) 
```

是假的。

您可以明确调整 epsilon 的传递以满足您的需求。千分之一通常涵盖我的 javascript 舍入问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T11:51:15.210

```
var ratio = 0;
if ( a > b) {
   ratio = b / a;
}
else {
    ratio = a / b;
}
if (ratio > 0.90) {
    //do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T06:39:35.877

[The Software Barbarian](https://stackoverflow.com/a/26680799/3030547)的一行 Es6 方式版本：

```
const approxeq = (v1, v2, epsilon = 0.001) => Math.abs(v1 - v2) <= epsilon;

console.log(approxeq(3.33333, 3.33322)); // true
console.log(approxeq(2.3, 2.33322)); // false
console.log(approxeq(3, 4, 1)); // true
```

我将其更改为在边距中包含数字。`approxeq`因此，在 1 和 2 之间的 epsilon 边距为 1是`true`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-24T21:03:28.160

浮点比较很快就变得复杂了。在很多情况下，它不像 diff 小于 epsilon 那么简单。

这是一篇关于该主题的文章，但不是特定于 javascript 的。

[https://floating-point-gui.de/errors/comparison/](https://floating-point-gui.de/errors/comparison/)

TLDR：

1.  当被比较的数字之一非常接近零时，从较大的数字中减去较小的数字可能会丢失精度数字，使差异看起来比实际值小（或零）。
2.  具有不同符号的非常小的数字以一种奇怪的方式工作。
3.  除以零会导致问题。

文章中有一个函数（java）可以更好地解决这些情况：

```
public static boolean nearlyEqual(float a, float b, float epsilon) {
    final float absA = Math.abs(a);
    final float absB = Math.abs(b);
    final float diff = Math.abs(a - b);

    if (a == b) { // shortcut, handles infinities
            return true;
    } else if (a == 0 || b == 0 || (absA + absB < Float.MIN_NORMAL)) {
            // a or b is zero or both are extremely close to it
            // relative error is less meaningful here
            return diff < (epsilon * Float.MIN_NORMAL);
    } else { // use relative error
            return diff / Math.min((absA + absB), Float.MAX_VALUE) < epsilon;
    }
} 
```

在你抱怨之前：是的，那是 Java，所以你必须用 Javascript 重写它。这只是为了说明算法，它只是从文章中复制的。

~~我仍在寻找一个彻底解决这个问题的方法，最好是使用 NPM 包，这样我就不必每次需要它时都重新解决这个问题。~~

编辑：我找到了一个包，它实现了上面链接的文章中的解决方案（在他们的自述文件中有相同的链接）。

[https://www.npmjs.com/package/@intocode-io/nearly-equal](https://www.npmjs.com/package/@intocode-io/nearly-equal)

与其他答案中显示的其他解决方案相比，这将是一个不易出错的解决方案。有几个 npm 包实现了简单的解决方案，它们的错误情况接近于零，如上所述。确保在使用它们之前查看源代码。

# r - R中的叠加图

> ID：14582124
> 
> 赞同：4
> 
> 时间：2013-01-29T11:44:00.490
> 
> 标签：r

我想根据数据框不同列的值在一个图中将 3 个条形图一起绘制。

它应该看起来[像这样](http://www.beckmancoulter.com/ucm/idc/groups/public/documents/webasset/glb_bci_003540.jpg)。

图 1 的 y 值是图 2 和图 3 的 y 值之和。图 1 和图 2 的颜色可以完全填充（例如蓝色和红色），但图 3 的颜色必须是半透明的。

我能够使用该`barplot()`函数分别为每一列绘制一个图，但我无法将它们组合在一个图中。

```
barplot(covpatient[[1]]$cov, names.arg = covpatient[[1]]$exon, xlab = covpatient[[1]]$gene[1] , ylab = "read depth" , border = "blue", col = "blue")
barplot(covpatient[[1]]$plus, names.arg = covpatient[[1]]$exon, xlab = covpatient[[1]]$gene[1] , ylab = "read depth" , border = "red", col = "red")
barplot(covpatient[[1]]$min, names.arg = covpatient[[1]]$exon, xlab = covpatient[[1]]$gene[1] , ylab = "read depth" , border = "gray", col = "gray") 
```

有人可以帮我一把吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T01:42:23.000

我不确定这是否是您想要的……但根据您发送的图片，我认为这会有所帮助：

```
require(ggplot2)
require(reshape2)

covpatient <-list()
covpatient$cov <-rnorm(100,2)
covpatient$plus <-rnorm(100,4)
covpatient$min <-rnorm(100,1)

plot_covpatient <- do.call(rbind,covpatient) 

melted_plot_covpatient<-melt(plot_covpatient,value.name = 'Value')

ggplot(melted_plot_covpatient,aes(group=Var1))+
  geom_density(aes(Value,colour=Var1,fill=Var1),alpha=.5) 
```

# c++ - 使用头文件而不是标准命名空间

> ID：14582125
> 
> 赞同：0
> 
> 时间：2013-01-29T11:44:03.993
> 
> 标签：c++, header, std

我很好奇 C++ 中是否有任何可以使用（包含）的头文件，而不是标准命名空间（`namespace std`），即使在新版本的 C++ 中也能正常工作？我想知道我是否可以在不使用任何命名空间的情况下编写代码并且仍然能够使用字符串数据类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:46:16.473

`string`位于`std`名称空间中，因此您不能完全忽略它。

不过有一些选择：

```
using std::string;
using namespace std;
typedef std::string myString;

//or fully qualify the name
std::string mystr; 
```

你可以把它放在一个标题中并包含它。

好了，现在我给了你灾难的秘诀。**不要使用它！**

**命名空间很好。**学习使用它们，而不是绕开它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:45:53.300

标头和命名空间不相关，命名空间是好东西。`using namespace std`不好。您始终可以使用`std::string`不带`using namespace std;`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T11:47:55.420

使用“使用命名空间标准；” 是一个糟糕的主意（尽管我不得不承认我在我在这里发布的示例中经常这样做，以便于打字）。将其隐藏在头文件中是一个更糟糕的主意。

命名空间的存在是有原因的。

但是，如果你有 100000 行已经存在的代码，这些代码是按照命名空间前标准编写的，并且你很快希望将其移植到新的编译器中使用，那么添加“使用命名空间 std;” 到每个文件的顶部将是首选解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:47:23.307

您可以`typedef`使用您希望使用的类，但这是一个非常糟糕的主意。

```
#include <string>
typedef std::string string; 
```

# oauth - 如何使用 oauth 下载 Dropbox 文件

> ID：14582127
> 
> 赞同：0
> 
> 时间：2013-01-29T11:44:11.830
> 
> 标签：oauth

我`oauth`在获取 access_token 后用于验证保管箱并从保管箱下载文件我正在使用以下签名从保管箱下载文件我通过根、文件的路径、consumerKey 和 oauth_token，signature_method 为 PLAINTEXT，我收到错误

```
{"error": "Bad oauth_signature for oauth_signature_method 'PLAINTEXT'"} 
```

正在使用的签名如下： [https ://api-content.dropbox.com/1/files?oauth_consumer_key=twcek2m7cxtantc&oauth_signature_method=PLAINTEXT&oauth_token=1jczc39y7rn1265&oauth_version=1.0&path=test%2Fut.txt&root=dropbox&oauth_signature=fbs95cfyb2g](https://api-content.dropbox.com/1/files?oauth_consumer_key=twcek2m7cxtantc&oauth_signature_method=PLAINTEXT&oauth_token=1jczc39y7rn1265&oauth_version=1.0&path=test%2Fut.txt&root=dropbox&oauth_signature=fbs34nykryouuj1%2526gbwmn3e27g97cfy)

我应该怎么做才能解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:15:22.293

我正在搜索这个并发现：

1) PLAINTEXT 方法不提供任何安全保护，只能通过 HTTPS 等安全通道使用。它不使用签名基本字符串。

2) 服务提供商声明支持所有请求的 HMAC-SHA1 签名方法，仅支持安全 (HTTPS) 请求的 PLAINTEXT。

3) 当与 PLAINTEXT 签名一起使用时，OAuth 协议不会尝试保护用户凭据免受窃听者或中间人攻击。PLAINTEXT 签名算法仅旨在与提供此类保护的传输层安全机制（例如 TLS 或 SSL）结合使用。如果传输层保护不可用，则不应使用 PLAINTEXT 签名方法。

您可以参考此链接[http://oauth.net/core/1.0/#anchor22](http://oauth.net/core/1.0/#anchor22)

您还可以检查您的密钥是否正确

签名协议参数设置为以下未加密的值：

oauth_signature_method ：设置为明文。oauth_signature ：设置为 oauth_consumer_secret 参数的连接编码值和 oauth_token_secret 参数的值。如果值包含一个 . 字符（ASCII 码 46），它必须编码为 %2E。这些值由 分隔。字符（ASCII 码 46），即使为空。结果不得再次编码。例如，如果 Consumer Key 是 dj.9rj$0jd78jf88 并且 Token Secret 是 jjd999(j88ui.hs3，则编码值为：

Consumer Key : dj%2E9rj%240jd78jf88 Token Secret : jjd999%28j88ui%2Ehs3 oauth_signature 值为 dj%2E9rj%240jd78jf88.jjd999%28j88ui%2Ehs3。该值不再被编码，而是在 HTTP 请求中使用。如果 Token Secret 为空，则值为 dj%2E9rj%240jd78jf88。（分隔符 . 被保留）。

# php - PHP 使用 eexcelview 导出到 excel

> ID：14582128
> 
> 赞同：0
> 
> 时间：2013-01-29T11:44:13.000
> 
> 标签：php, yii, phpexcel, yii-extensions

嗨，我正在尝试使用[eexcelview](http://www.yiiframework.com/extension/eexcelview/)获取 excel 中的数据。我已经在控制器中添加了代码

```
$query = " some query from 4 tables ";
$dataProvider=new CSqlDataProvider($query, array(
    'sort'=>array('attributes'=>array(
                                    'col1', 
                                    'col2',
                                    'col3', 
                                    'col4',
                                    'col5'  ),),));
$this->widget('application.extensions.EExcelView', array(
        'dataProvider'=> $dataprovider,
        'title'=>'Title',
        'autoWidth'=>false,
         )); 
```

我的理解是当这个动作被调用时，它会直接要求我保存excel报告。但相反，我得到了错误`The "dataProvider" property cannot be empty.`，

```
C:\wamp\www\yii\framework\zii\widgets\CBaseListView.php(106)
100      * Initializes the view.
101      * This method will initialize required property values and instantiate {@link columns} objects.
102      */
103     public function init()
104     {
105         if($this->dataProvider===null)
106             throw new CException(Yii::t('zii','The "dataProvider" property cannot be empty.')); 
```

此外，同样`$dataprovider`的`CGridView`工作正常。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:16:20.573

PHP 变量区分大小写。因此，您必须将代码更改为

```
$this->widget('application.extensions.EExcelView', array(
        'dataProvider'=> $dataProvider,
        'title'=>'Title',
        'autoWidth'=>false,
         )); 
```

# android - 气球覆盖在地图中无法正常工作

> ID：14582129
> 
> 赞同：0
> 
> 时间：2013-01-29T11:44:14.510
> 
> 标签：android, google-maps

我正在使用 Balloon Overlay 在 Tap 上显示弹出消息，它可以很好地使用捏合缩放。但是我遇到了一个问题，即当我使用搜索栏放大地图时，弹出消息不会类似地出现在点击上截图如下 ![图片1](../Images/c64207046e9f58e31769e48130013523.png)

![图片2](../Images/7bc97b92336448d5ea43b14484610b9f.png)

现在在使用搜索栏放大地图后，点击时不显示气球重叠弹出窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T19:27:58.173

每次放大或缩放都需要`clear();`映射，然后每次绘制新覆盖时重绘覆盖并处理`redrawmap()`方法中的点击

# c# - 递归搜索根文件夹内的文件时查看当前文件夹

> ID：14582131
> 
> 赞同：0
> 
> 时间：2013-01-29T11:44:29.977
> 
> 标签：c#, winforms

我正在使用它来选择一个根文件夹并在将这些文件添加到我之前从每个目录中获取最新文件`listbox`，我想知道是否有办法知道当前目录以便在我仍在搜索文件时更新我的​​ UI。

```
var rootDirFile = Directory
                        .EnumerateFiles(pathToSearch, "*.pcap", SearchOption.TopDirectoryOnly)
                        .OrderByDescending(f => File.GetCreationTime(f))
                        .Take(1);

                    var allNewestFilesOfEachFolder = Directory
                        .EnumerateDirectories(pathToSearch, "*.*", SearchOption.AllDirectories)
                        .Select(d => Directory.EnumerateFiles(d, "*.pcap")
                            .OrderByDescending(f => File.GetCreationTime(f))
                            .FirstOrDefault());

foreach (string tempFile in rootDirFile.Concat(allNewestFilesOfEachFolder))
{
   //add the file
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:47:32.733

可能最容易通过属性设置为的[BackgroundWorker](http://msdn.microsoft.com/en-gb/library/system.componentmodel.backgroundworker.aspx)调用您的代码，然后处理事件`WorkerSupportsProgress``true``ReportProgress`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:36:18.750

我希望下面的代码有助于解决您的问题

```
// Observable collection is the best choice to bind to the UI elements it automatically refreshes the changes in the UT whenever the data modifies. 

    ObservableCollection<string> objList = new ObservableCollection<string>();

          //Bind this ObservableCollection to the UI Element with TwoWay binding

          var rootDirFile = Directory.EnumerateFiles(pathToSearch, "*.pcap", SearchOption.TopDirectoryOnly).OrderByDescending(f => File.GetCreationTime(f)).Take(1);
           // add to the observable collection

          var allNewestFilesOfEachFolder = Directory
                        .EnumerateDirectories(pathToSearch, "*.*", SearchOption.AllDirectories);

           // Instead of Iterating the Directory in a single time, seperate the task and iterate folder by folder basis.

            foreach (string obj  in allNewestFilesOfEachFolder )
            {
                var dir = Directory
                        .EnumerateFiles(obj, "*.pcap", SearchOption.TopDirectoryOnly)
                        .OrderByDescending(f => File.GetCreationTime(f))
                        .Take(1);    

                // add to the observable collection , it will automatically reflects the changes in the UI            

            } 
```

如果您还需要绑定代码，请告诉我。我将简要解释

# java - 在java中使用正则表达式验证密码

> ID：14582136
> 
> 赞同：-6
> 
> 时间：2013-01-29T11:44:53.643
> 
> 标签：java, regex

我必须为匹配的密码验证创建一个正则表达式

例如。

> abcdABCD1234$%^

密码必须至少包含两个小写字母、两个大写字母、两个数字和两个特殊字符。但他们可以给出的不仅仅是这个标准

注意模式应该是有序的。

```
String pattern="(?=.*[a-z]{2,})(?=.*[A-Z]{2,})(?=.*[0-9]{2,})(?=.*[@#$%&]{2,})"; 
```

它对我有用，但它不检查顺序意味着 AB 大写或任何字符不应出现在 ab（小写）之前。

对你来说清楚吗？

```
 String minNum="4";
     String max="20";

     String REGEX="(^(?!.*(d))(?=.*[a-z]{3,})(?=.*[A-Z]{2,})(?=.*[0-9]{3,})(?=.[@#$%&*><?+]{2,})^(?!.*(#r)).{"+minNum+","+max+"})";
     //String regex="(?=.*[a-z]{2,})(?=.*[A-Z]{2,})(?=.*[0-9]{2,})(?=.*[@#$%&]{2,})";

      String INPUT ="acABC1333323@#";

   Pattern p = Pattern.compile(REGEX);

   Matcher m = p.matcher(INPUT);

   System.out.println(m.matches()); 
```

它工作正常，但是当我更改密码“ABac1333323@#”时；它也匹配，但根据我的要求它是正确的，因为 AB 是一阶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:30:12.440

**要求字符按特殊顺序排列是我听过的最奇怪的密码要求，我无法相信您的客户真的想要这个。**

说这个我可以向你解释你的正则表达式。

当所需的字符可以按任何顺序排列时，通常会使用您在正则表达式中使用的[前瞻断言](http://www.regular-expressions.info/lookaround.html)（这些东西）。`(?=...)`如果你真的没有这个要求，那么你的正则表达式很简单，你只需要跳过你的前瞻。

**这将符合您的要求：**

```
String pattern="[a-z]{2,}[A-Z]{2,}[0-9]{2,}[@#$%&]{2,}"; 
```

万一您想在密码中允许所有字母、数字和所有其他字符，请使用 Unicode 代码属性：

```
String pattern="p{Ll}{2,}p{Lu}{2,}\d{2,}[^\p{L}\d]{2,}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:02:54.163

也许它可以帮助你：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class PwdValidator{

      private Matcher match;
      private Pattern pattern;
      private static final String PWD_PATTERN = "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})";

      public PwdValidator(){
          pattern = Pattern.compile(PWD_PATTERN);
      }

      public boolean validate(final String pwd){
          match = pattern.matcher(pwd);
          return match.matches();
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:33:04.667

我想这就是你想要的

```
(?=[a-z]{2,}).{2,}(?=[A-Z]{2,}).{2,}(?=\d{2,}).{2,}(?=[@#$%&]{2,}).{2,} 
```

它**匹配** `abcdABCD1234$%^`和`abABcdCD1234$%^`

不**匹配** `ABababcdCD1234$%^`或`ABac1333323@#`

对于**两个或多个小写字母后跟两个或多个大写字母后跟两个或多个数字后跟两个或多个特殊字符**，请使用：

```
[a-z]{2,}[A-Z]{2,}\d{2,}[@#$%&]{2,} 
```

# javascript - Json响应错误

> ID：14582141
> 
> 赞同：0
> 
> 时间：2013-01-29T11:45:12.327
> 
> 标签：javascript, python, tornado, uncaught-exception

我有个问题。

我有一个向传感器网络发送命令的页面。

当我点击这部分代码时

```
<a href='javascript:void(send_command_to_network("{{net.id}}", "restartnwk"));'>Restart Network <i class="icon-repeat"></i> </a> 
```

我调用一个js函数，这个：

```
function send_command_to_network(net, command) {
    $.ajax({url: "/networks/" + net + "/send?command=" + command,
    type: "GET",
    async: true,
    dataType: "json",
    success: function(json_response) { 
         var err = json_response['error'];
     if (err) {
       show_alert('error', err);
       return;
     }
     var success = json_response['success'];
     if (success) {
       show_alert('success', success);
       return;
     }
     show_alert('alert', "This should not happen!");
       }
     }); 
   } 
```

此函数构建一个 url，用于调用用 python 编写的 Tornado Web 服务器中的处理程序。处理程序是这样的：

```
class NetworkSendHandler(BaseHandler):
# Requires authentication 
@tornado.web.authenticated
def get(self, nid):
    # Get the command 
    command = self.get_argument('command').upper(); 

    # The dictionary to return
    ret = {}

    #Check if the command is available
    if command not in ['RESTARTNWK']:
        raise tornado.web.HTTPError(404, "Unknown command: " + str(command))

    #Command ZDP-RestartNwk.Request
    if command == 'RESTARTNWK':
        op_group = "A3"
        op_code = "E0"
        packet_meta = "*%s;%s;%s;#"
        pkt_len = hextransform(0, 2)

        packet = packet_meta % (op_group, op_code, pkt_len)
        packet = packet.upper()

        op_group_hex=0xA3
        op_code_hex=0xE0

        cmdjson = packet2json(op_group_hex,op_code_hex, packet)

    mynet_type="ztc"

    print("\t\t " + packet + "\n")

    #TODO : -write command into db  
    ts = datetime.datetime.now().isoformat()
    mynet_type ="ztc" 
    self.lock_tables("write", ['confcommands'])
self.db.execute("INSERT INTO confcommands (network_id, ntype, timestamp, command) \
                              VALUES (%s,%s,%s,%s)", nid, mynet_type, ts, cmdjson)
    self.unlock_tables();

    # TODO: - open the /tmp/iztc file in append mode
    cmdfile = open('/tmp/iztc', 'a')
    #       - acquire a lock  "only for the DB case, it's easier"
    #       - write the packet 
    cmdfile.write(netid + "\t"+ mynet_type + "\t"+ ts + "\t"+  cmdjson +"\n");
    #       - release the lock "only for the DB case, it's easier"
    #       - close the file
    cmdfile.close()

    if command == 'RESTARTNWK':
        opcodegroupr = "A4"
        opcoder = "E0"      

    #Code for retrieving the MAC address of the node
    como_url = "".join(['http://options.como_address:', options.como_port,
                        '/', ztc_config, '?netid=', netid,
                        '&opcode_group=', opcodegroupr, 
                        '&opcode=', opcoder, '&start=-5m&end=-1s'])
    http_client = AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, como_url)

    ret = {}
    if response.error:
        ret['error'] = 'Error while retrieving unregistered sensors'
    else:
        for line in response.body.split("\n"):
            if line != "": 
                value = int(line.split(" ")[6])

    ret['response'] = value
    self.write(tornado.escape.json_encode(ret))
    self.finish()

    if value == "0":
        # TODO: handle Errors. It always return succesfully.
        #ret['error'] = "Error while sending the %s command!" % (command.upper())
        ret['success'] = "The %s command has been succesfully sent!" % (command.upper())
        self.write(tornado.escape.json_encode(ret))
    else:
    ret['error'] = "Error while sending the %s command!" % (command.upper()) 
```

我在开发者控制台中收到的错误是这样的：

*未捕获的 TypeError：无法读取 null 的属性“错误”*

在js函数中。为什么函数不知道“错误”或“成功”？问题出在哪里？？？？我认为程序永远不会进入处理程序，而是在之后被阻止，只是在 js 函数中。

非常感谢你的帮助。

# jquery - jQuery单击未触发div中的标签

> ID：14582143
> 
> 赞同：0
> 
> 时间：2013-01-29T11:45:13.283
> 
> 标签：jquery, html, click, label, children

我有以下html代码：

```
 <input type="text" size="30" id="county" class="auto_input" autocomplete="off" />
    <div id="l_county" class="autocomplete"></div> 
```

与 jQuery 一起从 API 获取数据（它是地址自动完成表单） 当您在文本字段中写入内容时，会在文本字段下方弹出县/街道/城市/邮政编码列表（取决于文本字段），看起来是 html像这样：

```
 <div id="l_county" class="autocomplete" style="display: block;">
    <label id="s_county" class="suggestion">
    Värmland
    </label>
    <label id="s_county" class="suggestion">
    Västerbotten
    </label>
    </div> 
```

我无法让 jQuery 在标签上触发点击事件。我试过了;

```
 $('.suggestion').on('click', ...
    $('.autocomplete').children().on('click', ...
    $('.autocomplete > label').on('click', .... 
```

还有一些我不记得了。没有任何效果。但

```
 $('.autocomplete').on('click', ... 
```

效果很好，但这并没有多大帮助，因为我需要来自 s 的数据。我迫切需要帮助，由于另一部分的并发症，我的工作超过了最后期限，而这个荒谬的问题使我无法进步。

**编辑：** 我发现了问题。对我来说，这是一个荒谬的错过。

```
 $('body').on('click', '.suggestion', function() {}); 
```

这样可行。问题是标签是通过 .append() 动态生成的，这是浪费你的时间。我很抱歉，谢谢你，这确实间接地让我弄清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:02:38.153

> 您可能会尝试在创建元素之前获取元素。利用 ：`$(document).ready(function(){ $('.suggestion').on('click', ...); $('.autocomplete').children().on('click', ...); $('.autocomplete > label').on('click', ...); });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:04:31.903

试试你的标签的点击事件，如下所示......它会帮助你......

```
$("[id=s_county]").live('click', function () {
      alert(this.innerHTML);
  }); 
```

小提琴链接：http: [//jsfiddle.net/RYh7U/50/](http://jsfiddle.net/RYh7U/50/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:50:34.600

您可以查看 Ingo 的自动完成 API 并搜索将子项添加到框中的方法。在那里你实现了你的 onClick-Listener。但是我自己也遇到了类似的问题，并且我找到了解决方案。我会寻找它并将其发布在这里;）

# javascript - 为什么我得到不同的数组？

> ID：14582144
> 
> 赞同：0
> 
> 时间：2013-01-29T11:45:20.237
> 
> 标签：javascript, jquery

再会。我给不同的数组有问题；

接下来是我的代码：

```
setInterval(function() {

var TestName = [];
var requests = [];
TestName.push('0');
for($i=1; $i<8; $i++) {
    var id = $i;
    requests.push($.post("./Scripts/", {
    record:id,
    opt:'get_test'
    }, function(data){
          TestName.push(data);
    }));
}

 $.when.apply($,requests).done(function(){

     for($i=1; $i<8; $i++) {
$('#test'+$i).html('').html(TestName[$i]);

}
alert(TestName);
 });

}, 15000); 
```

这段代码有效，但每次我得到不同的数组时......

例如：

`alert(TestName);` **结果一：**

```
0,
<a href="#"><img src="./images/test1.png"></a>,
<a href="#"><img src="./images/test2.png"></a>,
<a href="#"><img src="./images/test3.png"></a>,
<a href="#"><img src="./images/test4.png"></a>,
<a href="#"><img src="./images/test5.png"></a>,
<a href="TestTestTestTestTest.php"><img src="./1358997710.jpg"></a>,
<a href="#"><img src="./images/test7.png"></a>, 
```

`alert(TestName);` **结果二：**

```
0,
<a href="#"><img src="./images/test1.png"></a>,
<a href="#"><img src="./images/test2.png"></a>,
<a href="TestTestTestTestTest.php"><img src="./1358997710.jpg"></a>,
<a href="#"><img src="./images/test3.png"></a>,
<a href="#"><img src="./images/test5.png"></a>,
<a href="#"><img src="./images/test4.png"></a>,
<a href="#"><img src="./images/test7.png"></a> 
```

如您所见，每次交换席位时数组的元素，有时数组的元素排列顺序错误。

请告诉我代码中的错误可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:55:01.557

您的数组每次都不同的原因是您正在运行异步请求，然后从回调中填充。每次执行此操作时，您的请求恰好以不同的顺序完成，因此以不同的顺序填充数组。

您不能依赖在执行过程中的任何特定点调用异步请求回调，它们可以随时调用，具体取决于响应决定何时返回。

# ios - 应用程序和服务器之间的安全性？

> ID：14582156
> 
> 赞同：0
> 
> 时间：2013-01-29T11:45:59.543
> 
> 标签：ios, node.js, ssl, authorization, basic-authentication

我知道有很多关于这个的话题。但我还是很困惑。

我有一个应用程序向我的服务器（nodeJS）发出请求以获取 JSON 数据。目前，每个人都可以在以下位置获得一切：`http://myserver/allUpdates/`无需密码。他们只需要知道 URL。

所以我想我会做得更安全一些。我一直在查看**Basic Auth**，这似乎可以通过在每个请求的标头中发送用户名和密码来工作。

够了吗？

有些人说，如果你不使用 SSL，它不会做太多事情。但总比没有好，对吧？

我从未使用过 SSL，似乎还有很多东西要学。

所以我的问题是，当我不使用 SSL 时，我应该打扰身份验证吗？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:51:55.983

SSL 对您的请求进行加密，这意味着任何嗅探您的网络流量的人都无法读取请求的有效负载。

您有两种方法可以将客户端验证到服务器：

*   随每个请求发送凭据或 API 密钥，或者
*   使用凭据或 API 密钥登录客户端一次并重用它的会话

在这两种方式中，您都应该使用 SSL 并将凭据与您的 POST 数据一起发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:54:01.413

> 有些人说，如果你不使用 SSL，它不会做太多事情。但总比没有好，对吧？

不幸的是，这些人是对的。基本身份验证在发送明文时可能比没有*更糟糕*，因为它给您一种模糊的感觉，即没有任何*实际*安全性。

这是因为通过代理或类似方式拦截网络请求是微不足道的。如果您不使用 SSL，那么您发送的每个参数都很容易看到，包括您的基本身份验证凭据。

回答您的问题*“当我不使用 SSL 时是否应该使用身份验证？”* - 那要看。如果您想确保您的数据只能由经过身份验证的用户访问，那么它真的是 SSL 或什么都没有。但是，如果您要做的只是减轻服务器的负担（即速率限制），那么可能不会。我*假设*您正在寻找前者，在这种情况下，我建议您花时间掌握 SSL。有很多关于将 Node 与 SSL 结合使用的资源，具体取决于您可能使用的其他框架（Express 等）。

# android - Android Inapp 计费 - Play 商店不断发送 PURCHASE_STATE_CHANGED

> ID：14582157
> 
> 赞同：0
> 
> 时间：2013-01-29T11:46:01.513
> 
> 标签：android, in-app-purchase, google-play

我前段时间在我的应用中实现了应用内计费，所以它不是 v3 API，而是 v2。当我尝试购买非托管商品时，我会被收取费用并且一切正常，然后我的应用程序会显示一个对话框，表明购买情况良好。问题是 Google Play 不断再次发送这个

```
01-29 12:30:40.805: I/BillingService(18895): Received action: com.android.vending.billing.RESPONSE_CODE
01-29 12:30:40.805: I/BillingService(18895): checkResponseCode got requestId: 8646305544958370499
01-29 12:30:40.805: I/BillingService(18895): checkResponseCode got responseCode: RESULT_OK
01-29 12:30:40.805: I/BillingService(18895): Received action: com.android.vending.billing.PURCHASE_STATE_CHANGED

01-29 12:30:41.155: I/BillingService(18895): Received action: com.android.vending.billing.RESPONSE_CODE
01-29 12:30:41.155: I/BillingService(18895): checkResponseCode got requestId: 2207507822000358335
01-29 12:30:41.155: I/BillingService(18895): checkResponseCode got responseCode: RESULT_OK 
```

所以我的对话框显示了 6-7 次，看起来每次尝试都会增加一次。我真的不明白。有人可以向我解释为什么吗？

提前致谢

# javascript - JQM 固定标头，带有 iOS 透明状态栏

> ID：14582170
> 
> 赞同：2
> 
> 时间：2013-01-29T11:46:26.387
> 
> 标签：javascript, jquery-mobile, jquery-plugins, iphone-web-app

仅针对 iOS 更改 JQM 样式的最佳方法是：

```
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
```

为了修复这个[隐藏的标题](http://my.safaribooksonline.com/book/-/9781449331085/full-screen/id2728123)？有插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:19:18.607

1st）您检测您的客户使用哪个操作系统：

```
osInfo.ios = navigator.userAgent.match(/(iPhone|iPod|iPad)/); 
osInfo.android =  navigator.userAgent.match(/Android/);
osInfo.blackberry =  navigator.userAgent.match(/BlackBerry/); 
```

2nd）你应用CSS，所以它会固定iOs的位置

```
if(osInfo.ios)
{
    //something here
} 
```

PS希望我理解你的正确

# android - threadid=1：线程以未捕获的异常退出（组=0x40dc31f8）

> ID：14582177
> 
> 赞同：0
> 
> 时间：2013-01-29T11:46:54.983
> 
> 标签：android, google-maps-android-api-2

您好，我在尝试运行地图时收到此错误。这是我的代码

```
mapview = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();

    try {
        /**
        * Create a new instance of the SAX parser
        **/
        SAXParserFactory saxPF = SAXParserFactory.newInstance();
        SAXParser saxP = saxPF.newSAXParser();
        XMLReader xmlR = saxP.getXMLReader();
       // URL url = new URL("http://KML.php"); // URL of the XML
        /**
        * Create the Handler to handle each of the XML tags.
        **/
        InputStream is = getAssets().open("NewFile.xml");
        XMlHandler myXMLHandler = new XMlHandler();
        xmlR.setContentHandler(myXMLHandler);
      //  xmlR.parse(new InputSource(url.openStream()));
        xmlR.parse(new InputSource(is));
        sitesList = XMlHandler.getXMLData();

        //data= myXMLHandler.getXMLData();
    } catch (Exception e) {
        System.out.println(e);
    }
    //System.out.print(sitesList.getDescription().toString());
    for (int i = 0; i < sitesList.getCompany().size(); i++) {
        System.out.print(sitesList.getDescription().get(i).toString());
        System.out.print(sitesList.getLatitude().get(i).toString());
        System.out.print(sitesList.getLongitude().get(i).toString());
        //System.out.print(sitesList.getAddress().get(i).toString());
         compan22 = sitesList.getDescription().get(i).toString();
         compan11 = sitesList.getCompany().get(i).toString();
        double markerSnippet2 = (Double.parseDouble(sitesList.getLatitude().get(i).toString()));
        double markerSnippet3 = (Double.parseDouble(sitesList.getLongitude().get(i).toString()));
         ITALYwww=new LatLng(markerSnippet2,markerSnippet3);

            Marker testXml = mapview.addMarker(new MarkerOptions().title(compan22).position(ITALYwww).snippet(compan11));

    }

   LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String provider = service.getBestProvider(criteria, false);
    Location location = service.getLastKnownLocation(provider);
    LatLng userLocation = new LatLng(location.getLatitude(),location.getLongitude());

    String longitude = "Longitude: " +location.getLongitude();    
    Log.v(TAG, longitude);  
    String latitude = "Latitude: " +location.getLatitude();  
    Log.v(TAG, latitude);  

        String cityName=null;   
        String addressName=null;
          Geocoder gcd = new Geocoder(getBaseContext(),   
       Locale.getDefault());               
          List<Address>  addresses;    
          try {    
          addresses = gcd.getFromLocation(location.getLatitude(), location  
       .getLongitude(), 1);    
          if (addresses.size() > 0)    
             System.out.println(addresses.get(0).getLocality());    
             cityName=addresses.get(0).getLocality();   
             addressName=addresses.get(0).getAddressLine(0);

            } catch (IOException e) {              
            e.printStackTrace();    
          }         
          String s = longitude+"\n"+latitude +  
       "\n\nMy Currrent City is: "+cityName;  
    Marker currentLoc = mapview.addMarker(new MarkerOptions().position(userLocation).title(cityName).snippet(addressName).icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
        mapview.moveCamera(CameraUpdateFactory.newLatLngZoom(userLocation, 55));
        mapview.animateCamera(CameraUpdateFactory.zoomTo(10), 5000, null); 
```

和 LogCat

```
01-29 12:35:34.130: I/long(5019): -1.054687
01-29 12:35:34.150: W/dalvikvm(5019): threadid=1: thread exiting with uncaught exception (group=0x40dc31f8)
01-29 12:35:34.150: E/AndroidRuntime(5019): FATAL EXCEPTION: main
01-29 12:35:34.150: E/AndroidRuntime(5019): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.googlemapsv1/com.example.googlemapsv1.MainActivity}: java.lang.NullPointerException
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.os.Looper.loop(Looper.java:137)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread.main(ActivityThread.java:4476)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at dalvik.system.NativeStart.main(Native Method)
01-29 12:35:34.150: E/AndroidRuntime(5019): Caused by: java.lang.NullPointerException
01-29 12:35:34.150: E/AndroidRuntime(5019):     at com.example.googlemapsv1.MainActivity.onCreate(MainActivity.java:121)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.Activity.performCreate(Activity.java:4636)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
01-29 12:35:34.150: E/AndroidRuntime(5019):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
01-29 12:35:34.150: E/AndroidRuntime(5019):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:33:16.010

你的问题很可能来自这条线——

```
Location location = service.getLastKnownLocation(provider); 
```

从上的文档[`getLastKnownLocation`](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)，

> 如果提供程序当前被禁用，则返回 null。

由于是一个可能的返回值，因此您应该在使用它之前检查是否是`null`，以防止这种可能性。`location``null`

# php - WSO2 IS 和 simplesamlphp

> ID：14582178
> 
> 赞同：0
> 
> 时间：2013-01-29T11:47:01.290
> 
> 标签：php, wso2, saml-2.0, wso2is

我正在尝试让 WSO2 Identity Server (4.0.0) 对 simplesamlphp (1.10.0) 会话进行身份验证。

WSO2 IS 主机正在运行@ `https://sim2:9443/` #IdP 服务器。

simplesamlphp 脚本正在运行 @ `http://dellperf1/simplesaml/` # 配置为 SP

**配置**

在 WSO2 端，我配置了一个 Issuer，如下所示：

[wso2 IS 发行者配置](http://imgur.com/BBRcNCR)

我已经配置了一些用户，使用配置 -> 用户和角色下的“添加用户”和 WSO2 IS 主页上的“注册”功能。

我已将 simplesamlphp 配置如下 -

**配置/authsources.php**

entityID 与 WSO2 配置中的“Issuer”匹配 - 这是我的公司名称，所以我将其隐藏了。

```
14         // An authentication source which can authenticate against both SAML 2.0
15         // and Shibboleth 1.3 IdPs.
16         'default-sp' => array(
17                 'saml:SP',
18
19                 // The entity ID of this SP.
20                 // Can be NULL/unset, in which case an entity ID is generated based on the metadata URL.
21                 'entityID' => '$ISSUER HIDDEN',
22
23                 // The entity ID of the IdP this should SP should contact.
24                 // Can be NULL/unset, in which case the user will be shown a list of available IdPs.
25                 // 'idp' => NULL,
26
27                 // The URL to the discovery service.
28                 // Can be NULL/unset, in which case a builtin discovery service will be used.
29                 // 'discoURL' => NULL,
30                 'privatekey' => 'saml.pem',
31                 'certificate' => 'saml.crt',
32         ), 
```

**元数据/saml20-idp-remote.php**

```
93 /*
94  * $MY IdP
95  */
96
97 $metadata['https://sim2.FQDN:9443'] = array(
98         'name' => array(
99                 'en' => '$company IdP test server',
100         ),
101         'description'          => 'WSO2 ID Server',
102         'SingleSignOnService'  => 'https://sim2:9443/samlsso',
103         'SingleLogoutService'  => 'https://sim2:9443/samlsso',
104         //'certFingerprint'      => '04b3b08bce004c27458b3e85b125273e67ef062b'
105         'certFingerprint'      => '6bf8e136eb36d4a56ea05c7ae4b9a45b63bf975d'
106
107 ); 
```

每当我访问时`http://dellperf1/simplesaml/`，选择 Authentication 选项卡 -> Test Authentication sources -> default-sp 并选择“$company IdP test server”，我被正确重定向到 wso2 服务器并显示“基于 SAML 2.0 的单点登录”页面.

这是我遇到问题的地方。我似乎无法使用我创建的任何用户进行身份验证，无论是使用添加用户还是注册。

我只在 Carbon 日志中得到以下信息：

```
[2013-01-29 11:36:57,269]  WARN {org.wso2.carbon.identity.sso.saml.processors.AuthnRequestProcessor} -  Authentication Failure, invalid username or password. 
```

用户位于默认配置文件中，该配置文件具有以下配置为角色：“身份，每个人”。

如果我尝试使用（默认）admin:admin 密码登录，我似乎能够进行身份验证，但 simplesamlphp 会引发异常：

```
SimpleSAML_Error_Error: UNHANDLEDEXCEPTION

Backtrace:
0 /var/simplesamlphp/www/module.php:180 (N/A)
Caused by: Exception: Unable to find the current binding.
Backtrace:
2 /var/simplesamlphp/lib/SAML2/Binding.php:95 (SAML2_Binding::getCurrentBinding)
1 /var/simplesamlphp/modules/saml/www/sp/saml2-acs.php:11 (require)
0 /var/simplesamlphp/www/module.php:135 (N/A) 
```

我想我在这里遇到了两个问题：

1) 我创建的用户无法使用 SAML 进行身份验证 - 而管理员用户可以。为什么会这样？简介或政策问题？

2）即使我可以使用我创建的用户进行身份验证，除了管理员，我会得到相同的绑定回溯吗？

我在 2012 年 12 月的 WSO 邮件列表上看到了一些关于绑定 WSO2 IS 支持的流量——我在这里打一场失败的战斗吗？

如果 simplesamlphp 和 WSO2 IS 目前不能很好地配合使用，WSO2 人群中的某个人能否提出一种针对他们的 IS 测试 SAML-2.0 的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T09:39:00.853

如果用户无法登录，则表示您没有为该用户配置登录权限...请将登录权限分配给“everyrole”并检查...

我想我的一位朋友已经尝试过将 simplesamlphp 与 WSO2 身份服务器集成，请找到他从那里写的博客文章 [1]。我想这会对你有所帮助。

[1] [http://blog.facilelogin.com/2013/06/wso2-identity-server-saml2-idp-with.html](http://blog.facilelogin.com/2013/06/wso2-identity-server-saml2-idp-with.html)

# python - MySQLdb UPDATE 挂起

> ID：14582179
> 
> 赞同：1
> 
> 时间：2013-01-29T11:47:07.667
> 
> 标签：python, mysql, mysql-python

我正在使用 Python 的 MySQLdb 模块进行一些简单的查询。当我执行某个 UPDATE 时，它会挂起一段时间，最后给出这个错误：

> 操作错误（1205'锁定等待超时尝试重新启动事务'）

我正在使用的代码如下：

```
def unselectAll():
    try:
        db = MySQLdb.connect(host='localhost', user='user', passwd='', db='mydatabase')
        cursor = db.cursor()
        cursor.execute('UPDATE MYTABLE SET Selected=0')
    except MySQLdb.Error, e:
        print 'ERROR ' + e.args[0] + ': ' + e.args[1] 
```

如果我尝试在控制台中使用该查询，则效果很好。此外，如果在没有 db 参数的情况下连接并在查询中使用 mydatabase.MYTABLE 也不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:53:46.590

这可能是因为`UPDATE`没有提交 - 您是否尝试`autocommit=True`过连接？如在

```
db = MySQLdb.connect(host='localhost', user='user', passwd='', db='mydatabase', autocommit=True) 
```

甚至可能

```
db.autocommit(True) 
```

创建连接后。

# javascript - fancybox 在主页显示滚动

> ID：14582180
> 
> 赞同：0
> 
> 时间：2013-01-29T11:47:09.827
> 
> 标签：javascript, jquery, html, fancybox, fancybox-2

我的幻想框弹出窗口有时太大了，我想在主页上显示滚动条（不在幻想框内）。有人可以让我知道我该怎么做吗？

请参阅随附的屏幕截图。它根本没有显示滚动条。如何使用 fancybox 2 解决这个问题？

![在此处输入图像描述](../Images/74bf3acd82d930d192ab6dd483e073a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:56:53.317

您必须使用`fitToView`with`false`参数。希望这可以帮助。

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

# jquery - 如何在输入元素的max属性中查找值

> ID：14582184
> 
> 赞同：14
> 
> 时间：2013-01-29T11:47:24.360
> 
> 标签：jquery, html

如何使用**Jquery查找输入元素的max属性中的值**

```
<input type="number" id="pageNumber" class="toolbarField pageNumber" value="1" size="4" min="1" tabindex="7" max="29"> 
```

我试过了

```
$("input[max]").val() 
```

但这没有帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T11:48:17.097

您可以将[attr()](http://api.jquery.com/attr/)与[id 选择器](http://api.jquery.com/id-selector/)一起使用来获取 max 属性的值。

**[现场演示](http://api.jquery.com/attr/)**

```
$('#pageNumber').attr('max'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T11:52:48.583

使用 attr() 查找属性的值

尝试这个

```
$(".toolbarField").attr("max"); 
```

或者

```
$('#pageNumber').attr('max'); 
```

参考：

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T11:50:06.213

```
$("input").attr("max"); 
```

这将获取属性的值

请参阅 jQuery API 文档：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

# c# - 根据 textBox 文本设置 SQL 命令

> ID：14582185
> 
> 赞同：1
> 
> 时间：2013-01-29T11:47:29.400
> 
> 标签：c#, asp.net, sql, gridview

我有以下 gridView 选择命令-

```
SelectCommand="SELECT [columnA] FROM [DB].[dbo].[TABLE] WHERE value = 1 
```

运行时它将所需的结果带回gridview，但是我从上一页传递一个字符串值来填充一个textBox，并且在页面加载时希望gridview`SelectCommand`由该字符串确定。

所以像 -

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

SelectCommand="SELECT [columnA] FROM [DB].[dbo].[TABLE] WHERE value = <%TextBox1.Text%> 
```

但是，这并没有在页面加载时获取字符串值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:28:33.693

上面的评论是真实的，这种方法确实让你接触到 SQL 注入......但要回答你的问题：

这可以通过多种方式完成，尽管您不再需要文本框，因为您需要的值是使用查询字符串传入的。所以给这个bash（VB.Net）：

```
Protected Sub Page_Load(sender as Object, e as System.EventArgs) Handles Me.Load

  Dim myString As String = Request.Querystring("NameOfQuerystring")

  ' Call Sub and pass in value
  GenerateOutput(myString)

End Sub

Sub GenerateOutput(ByVal DBValue As String)

  'Perform Database call using the DBValue

  SelectCommand = "SELECT [columnA] FROM [DB].[dbo].[TABLE] WHERE value = " & DBValue

End Sub 
```

如果您想将其转换为 C#，请使用此链接：[将 VB.NET 转换为 C#](https://www.google.co.za/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDIQFjAA&url=http://www.developerfusion.com/tools/convert/vb-to-csharp/&ei=EMAHUaK9MenH0QXizoGwDg&usg=AFQjCNG3tnzIVnkd5WPUp-4OW0jwBFGclw&sig2=yKw5vubPr4cV7FvtDzV-xQ&bvm=bv.41524429,d.d2k&cad=rja)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:33:33.087

这种查询容易出现[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，可以使用参数代替。并使用您从 QueryString 中获得的值。

```
SqlCommand comm = new SqlCommand();
comm.CommandText = "SELECT [columnA] FROM [DB].[dbo].[TABLE] WHERE value = @value";
comm.Parameters.AddWithValue("value", Request.QueryString["string"]); 
```

# python - 使用ghost.py模拟点击后访问网页内容

> ID：14582186
> 
> 赞同：1
> 
> 时间：2013-01-29T11:47:31.880
> 
> 标签：python, screen-scraping, ghost.py

我正在使用 Ghost.py 模拟单击​​按钮。但无法弄清楚如何获取单击按钮后加载的内容。

```
from ghost import Ghost

ghost = Ghost(wait_timeout=40)
page, extra_resources = ghost.open("http://www.samsung.com/in/consumer/mobile-phone/mobile-phone/viewall")
#ghost.wait_page_loaded()
n=2;

print type(ghost.click("input#txtViewAll")) 
```

接下来要做什么来获取动态加载的内容？

PS：在谷歌上看。无法得到答案

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:11:13.040

我认为这应该是答案：

```
page, resources = ghost.evaluate(
    "document.getElementById('txtViewAll').click();", expect_loading=True) 
```

问候，

# sql-server - MSSQL 和实体框架在多个表上同步 PK

> ID：14582189
> 
> 赞同：1
> 
> 时间：2013-01-29T11:47:39.330
> 
> 标签：sql-server, entity-framework

我一直在使用 C# 中的实体框架，试图弄清楚如何将两个表连接在一起。我在这里找到了有关如何执行此操作的参考[http://msdn.microsoft.com/en-us/data/jj715646.aspx 。](http://msdn.microsoft.com/en-us/data/jj715646.aspx)问题是，这两个表的 PK 不同步，这似乎是一个要求。我以前从来不用担心从数据库中的两个表同步 PK。我知道我可以在一张桌子上关闭身份插入，但我看到很多人评论说这是一个非常糟糕的主意。如果我不应该这样做，那么如何完成每个表中的 PK 同步？

我在数据库中有两个表：

用户

*   pkID（整数）
*   名字（varchar）
*   姓氏 (varchar)
*   电子邮件（varchar）
*   ...

LockedFlags（锁定用户中的字段不被编辑）

*   PKID
*   fk用户ID
*   bFirstName (bool)
*   bLastName (bool)
*   bEmail (bool)

我很好奇为什么人们认为删除表上的身份插入是一个坏主意......如果我依靠 MSSQL 分配一个 PK，那么当我将记录插入数据库时​​我可以看到一个实例在处理多个写入时，第二个表写入可能会得到不同的值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:25:35.893

听起来您在 LockedFlags 表中有孤立的行，例如具有指向已删除用户的用户 ID 的行。根据关系的设置方式，反过来也可能成立。

如果您有一个实体，其中 2 个表合并为一个类，则加载实体集将查询两个表并需要匹配的行对。

您的 LockedFlags 可能有一个用户属性，它正在尝试加载并且在用户表中找不到。

表选项：注意：我使用的是等效的 MSSQL，因为我不知道 MYSQL。

关于您的数据模型的评论：我不知道 MYWSQL 如何处理记录锁定，但如果它类似于 MSSQL，您不必担心手动处理。

如果您要按原样使用它，我强烈建议您重新查看您的数据模型。如果您真的想手动锁定单个行字段，最好只使用单个表？

编辑：

```
ALTER TABLE LockFlags ADD CONSTRAINT
    FK_LockFlags_User FOREIGN KEY
    (
    UserID
    ) REFERENCES User
    (
    pkID
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO 
```

# android - 如何仅将应用程序设置为全屏和横向模式？

> ID：14582197
> 
> 赞同：0
> 
> 时间：2013-01-29T11:48:22.387
> 
> 标签：android

> **可能重复：**
> [android中的全屏活动？](https://stackoverflow.com/questions/2868047/fullscreen-activity-in-android)

我正在开发一款 Android 游戏，我需要知道如何将应用程序设置为全屏以及如何将应用程序设置为仅横向模式。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:52:30.673

在您的清单中，将以下主题设置为您的活动以使其全屏显示。

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

并将其设置为固定为横向

```
android:screenOrientation="landscape" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:52:22.993

在活动的 xml 中放置以下内容：

```
 android:screenOrientation="lands cape"

 android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:52:50.957

**1\. 清单方式 - 对于整个应用程序**

您应该在您的`Manifest.xml`-`<application>`

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
android:screenOrientation="landscape" 
```

* * *

**2.在你的代码里面——对于特定的活动**

在您的`onCreate`方法中，这两种方法都适用：

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

或者

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:52:51.497

**将此行添加到`AndroidManifest.xml`**

```
<activity android:name=".FullScreen" android:label="@string/app_title_home"  android:screenOrientation="landscape" /> 
```

**像这样编辑您的活动课程。**

```
public class FullScreen extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.main);
    }
} 
```

# ios - 如何检测 UIImagePickerController 预览状态？

> ID：14582201
> 
> 赞同：8
> 
> 时间：2013-01-29T11:48:50.463
> 
> 标签：ios, objective-c, camera, uiimagepickercontroller

我使用标准图像选择器制作一些相机照片。

*当用户使照片图像选择器向他显示带有 2 个按钮“**重拍**”和“**使用**”的**预览*******屏幕。****

 ****如何检测**预览屏幕现在处于活动状态或按下“重拍”按钮？** 可能吗 ？有用的属性或事件是什么？就像当图像源是库时 is 属性 - 允许编辑，它显示类似的 screen 。

```
UIImagePickerController * imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T19:49:13.720

事后一点，但也许有人仍在像我一样寻求这个答案。如果您想继续使用本机相机控件，您可以检查 ImagePickerController 的子视图以确定是否显示后记录视图。

```
BOOL videoTaken = NO;

for (UIView *aView in self.imagePickerController.view.subviews[0].subviews[0].subviews[0].subviews)
{
    if ([aView isKindOfClass:NSClassFromString(@"PLTileContainerView")])
    {
        videoTaken = YES;
        break;
    }
} 
```

“PLTileContainerView”是包含编辑滑块的子视图，可让您逐帧查看视频，因此如果存在，则表示您的视频已经录制。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T11:54:01.627

用来：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    [picker dismissModalViewControllerAnimated:NO];
    NSString *type = [info objectForKey:@"UIImagePickerControllerMediaType"];
    if ([type isEqualToString:@"public.movie"]) {

    } else {
        UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    }
} 
```

对于 Cancel 你没有检测它的方法（除了 subclassing `UIImagePickerController`，这可能是被禁止的，或者我不知道的其他方式），但可以肯定的是第二个 cancel 是可检测的：

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {    
    [picker dismissModalViewControllerAnimated:YES];
} 
```****

# svn - 从命令行更新 SVN

> ID：14582207
> 
> 赞同：0
> 
> 时间：2013-01-29T11:49:07.830
> 
> 标签：svn, tortoisesvn

我想从批处理文件中进行 SVN 更新：

我知道以下数据：

*   SVN 复制 URL
*   工作目录（复制本地文件的位置）
*   用户名
*   密码
*   深度全递归

在我研究了[SVN HELP](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.html#svn.ref.svn.sw)之后，我仍然无法编写正确的命令行语句来从批处理文件执行更新。有人可以为我写下正确的陈述吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:55:20.673

对于初始结帐，您可以使用：

```
svn co --username {username} -- password {password} --no-auth-cache {url_to_repo} {working directory for local folder} 
```

您需要在此处永久接受任何 SSL 证书（如果使用 https url）。

然后从批处理文件的工作目录中运行命令：

```
svn up --username {username} -- password {password} --no-auth-cache 
```

# java - 将 ListView 对象链接到布局 android

> ID：14582214
> 
> 赞同：0
> 
> 时间：2013-01-29T11:49:41.857
> 
> 标签：java, android, xml

我在整个互联网上搜索了这个，似乎没有关于如何做到这一点的简单解释或教程。

基本上，我想要一个具有 ListView 的布局，用户可以在其中单击一个对象，并将它们带到下一个布局。

换句话说，使用列表视图作为其他布局的链接。

我在互联网上找到的所有内容都有使用 Toast 的最终结果......但是我不想要 Toast，我想链接到下一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:54:13.160

感谢所有的帮助。对不起，我花了我时间回复。我的解决方案如下:)

```
 public class FP_WL1_ListView extends Activity {

 private ListView lv1;

 private String lv_arr[]={"Exercise Bike", "Treadmill", "Cross Trainer", "Squats", "Lunges"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.fitnessprograms_wlday_one);

        lv1=(ListView)findViewById(R.id.list);

        lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 , lv_arr));

        lv1.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {
          final TextView mTextView = (TextView)view;
          switch (position) {
            case 0:
             Intent newActivity0 = new Intent(FP_WL1_ListView.this,FitnessPrograms_Wlone_sp.class);     
             startActivity(newActivity0);
            break;
            case 1:
                 Intent newActivity1 = new Intent(FP_WL1_ListView.this,FitnessPrograms_Wlone_Treadmill.class);     
                 startActivity(newActivity1);
                break;
            case 2:
                 Intent newActivity2 = new Intent(FP_WL1_ListView.this,FitnessPrograms_Wlone_Crosstrainer.class);     
                 startActivity(newActivity2);
                break;
            case 3:
                 Intent newActivity3 = new Intent(FP_WL1_ListView.this,FitnessPrograms_Wlone_Squats.class);     
                 startActivity(newActivity3);
                break;
            case 4:
                 Intent newActivity4 = new Intent(FP_WL1_ListView.this,FitnessPrograms_Wlone_Lunges.class);     
                 startActivity(newActivity4);
                break;

          }

      }
    });

    }   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:00:41.637

你的问题有点令人困惑，所以我要做一个假设。

[LinearLayout1 LinearLayout2 Breadcrumb] 是否应该是导航或选项卡，在选择时将其相应内容插入主内容？

如果是这样，我建议为每条内容使用片段。然后，当您单击导航/选项卡时，执行片段的动画，将内容滑入和滑出。

请参阅谷歌文档了解如何使用片段：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

请参阅另一个 stackoverflow 答案以了解如何制作幻灯片动画：[Android Fragments and animation](https://stackoverflow.com/questions/4817900/android-fragments-and-animation) 或

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:08:39.087

下面是一些代码，概述了如何在单击列表行后调用活动。希望您可以调整`Toast`您提到的示例以使其适合您。基本思想是你`Activity`用新的`Intent`. 您可以将`listView`行中所需的任何数据作为`Intent`.

```
final static String[] months = new String[] {"Jan","Feb","Mar"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.row_layout, R.id.text1, months);
    setListAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    int intItem = (int)id;
    Intent intent= new Intent(this, SecondaryActivity.class);
    intent.putExtra("MONTH", intItem);
    startActivity(intent);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:10:30.450

为什么要使用 ListView 呢？每一行必须导致不同的布局？它的主要好处是显示动态变化的数据，但在您的情况下，数据是恒定的，对吗？

使用垂直线性布局，用“列表元素”以编程方式填充它，然后添加

```
leListComponent.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        startActivity(new Intent(YourActivity.this, TargetActivity.class));
    }
}); 
```

每个。

如果我没有得到它，并且您对使用某些适配器感觉很好，它可以是这样的：

```
public class LeWrapper {
    private String caption;
    private Class<? extends Activity> target;
    ...POJO here...
}

v.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
      //get leWrapper object from adapter
      startActivity(new Intent(MenuActivity.this, leWrapper.getTarget()));
  }
}); 
```

但它有点矫枉过正

# c++ - 请解释这个类构造函数的输出

> ID：14582217
> 
> 赞同：0
> 
> 时间：2013-01-29T11:49:50.670
> 
> 标签：c++, class, constructor

```
#include <iostream>

using namespace std;

class tricie
{
public:
    tricie(int);
    ~tricie();
    void acc();
    void deacc();
private:
    int df_speed=8;
};

tricie::tricie(int speed_input)                //Shouldn't this make the speed=8?
{
    int speed;
    if (speed_input > df_speed)
    {
        speed=speed_input;
        cout<<"speed now is "<<speed<<" km/hr \n";
    }
    else
    {
        speed=df_speed;
        cout<<"speed now is "<<speed<<" km/hr \n";
    }
}
tricie::~tricie()
{

}
void tricie::acc()
{
    int speed=(speed+1);
    cout<<"speed now is "<<speed<<" km/hr \n";
}
void tricie::deacc()
{
    int speed=(speed-1);
    cout<<"speed now is "<<speed<<" km/hr \n";
}
int main(int argc, const char * argv[])  //Xcode but these stuff in the bracket (ignore)
{
    tricie biker1(4);          //If i put any number > 8 the program work correctly
    biker1.acc();              //output from this line is "speed now is 5 km/hr "    instead of 9
    biker1.deacc();            //output from this line is "speed now is 4 km/hr "    instead of 8
    biker1.deacc();            //output from this line is "speed now is 3 km/hr "    instead of 7
    return 0;
} 
```

我想知道我是否遗漏了一个概念，它告诉我为什么输出 8 5 4 3 而不是 8 9 8 7？

提前感谢，如果问题很愚蠢，我很抱歉，我正在使用 sams 在 24 小时书中自学 C++。

感谢大家的快速回复我会搜索是否有办法防止在这些情况下编译提出我有一个后续问题：当我将 int speed 放在课堂的私人部分并且它工作正常但我想知道因为我把它放在类的私有部分并且主函数可以看到它，所以我没有得到另一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:54:29.600

您的基本概念有问题，因为您使用的局部变量 ( `int speed`) 一旦离开函数就会失去其价值。您最可能想要的是一个成员变量（就像`df_speed`）。

构造函数中的输出是正确的，因为您以任何一种方式设置值。

但是，`tricie::acc()`and的输出`tricie::deacc()`是未定义的，因为您`speed`在分配/计算中使用了未初始化的变量 ( )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:54:56.443

您的代码中有错误。`speed`您在所有函数（构造函数`acc()`和）中重新声明变量`deacc()`，例如`deacc()`：

```
int speed=(speed+1); 
```

最初`speed`未声明（在此范围内），但您使用它从中减去`1`。这是（完全）未定义的行为。

要解决此问题，请删除这 3 种情况下的变量声明 ( `int`)，并在类中添加一个类变量以存储当前速度：

```
class tricie {
  //...
  int speed;
  //...
}

void tricie::deacc()
{
    speed=(speed-1);
    cout<<"speed now is "<<speed<<" km/hr \n";
} 
```

`acc()`和在构造函数中完全删除相同`int speed;`。

注意：我不知道是什么`df_speed`，我假设（d）“默认速度”。如果是应该保持*实际*速度的类变量，则需要将所有`speed`变量用法重命名为`df_speed`. 但这取决于`df_speed`（可能在您的书中有所描述..？）

# yii - 如何使用gridview在单行中显示多行

> ID：14582218
> 
> 赞同：0
> 
> 时间：2013-01-29T11:49:53.063
> 
> 标签：yii, yii-components, cgridview

我想显示像 magento 这样的网格视图 [http://demo.magentocommerce.com/catalog/category/view/s/cellphones/id/8/](http://demo.magentocommerce.com/catalog/category/view/s/cellphones/id/8/)

在这里我们可以看到多个项目显示在同一行中......在上面的链接中，我们可以看到每行显示 3 个项目（行）。

目前我正在使用此代码并使用此单行显示每行

```
<?php
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'enablePagination'=>false,
    'columns'=>array(
        'brand',
        array(
          'name'=>'model',
            'header'=>'Model',
            'type'=>'raw',
            'value'=>'$data->model.($data->marketing_name?" (".$data->marketing_name.") ":"")'
        ),
        array(
            'name'=> 'platform',
            'header'=>'Platform',
            'type'=>'raw',
            'value'=>'$data->platform->platform." ".$data->platform->platform_version'
        ),
        array(
            'name'=>'add',
            'header'=>'Action',
            'type'=>'html',
            'value'=>  'CHtml::link("Add To My device", Yii::app()->createUrl("/site/add_device/id/".$data->id))',
        )
    ),
));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:00:58.487

`CGridView`始终在单独的行中显示每个项目。为了获得更大的灵活性（例如并排显示三个项目），您必须改用使用[`CListView`](http://www.yiiframework.com/doc/api/1.1/CListView)，但这意味着您必须自己做更多的事情。

`CListView`具有[`itemView`](http://www.yiiframework.com/doc/api/1.1/CListView#itemView-detail)您必须设置的属性并使用指定的视图来呈现列表中的每个项目。与[`template`](http://www.yiiframework.com/doc/api/1.1/CListView#template-detail)和[`itemsTagName`](http://www.yiiframework.com/doc/api/1.1/CListView#itemsTagName-detail)属性一起，您可以完全自定义列表生成的 HTML。

要每行显示三个项目，您可以使用任何通用的 CSS 技术，例如为每个项目`display: inline-block`和容器宽度的 1/3 的固定宽度；这将取决于您希望如何实现布局。

# copy - PyOpenCL，数组过滤器：copy_if 与我自己的基于原子的实现

> ID：14582222
> 
> 赞同：2
> 
> 时间：2013-01-29T11:50:05.987
> 
> 标签：copy, filtering, opencl, pyopencl, prefix-sum

我有一个随机整数数组。例如`[132, 2, 31, 49, 15, 6, 70, 18 ... , 99, 1001]`. 例如，我想生成所有大于 100 的数字的数组并获取该数组的大小。

有两种方法：

1.  PyOpenCL 的新功能[`copy_if`](http://documen.tician.de/pyopencl/algorithm.html#pyopencl.algorithm.copy_if)。它基于 [`GenericScanKernel`](http://documen.tician.de/pyopencl/algorithm.html#making-custom-scan-kernels)并且如果我们更深入地了解[Prefix Sums](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.128.6230)。
2.  使用[Atomics的纯 OpenCL 解决方案](http://www.cmsoft.com.br/index.php?option=com_content&view=category&layout=blog&id=113&Itemid=168)

`copy_if`总是正常工作吗？如我所见`copy_if`，不使用原子。使用时可能会遇到麻烦`copy_if`吗？

`copy_if`与原子方式相比，性能如何？

你会选择什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T09:24:46.430

我从未见过`copy_if`. 总是一样的结果；它看起来非常健壮。（不过，我还没有构建单元测试。）

至于性能，`copy_if`应该快得多，特别是如果你的 GPU 速度很快。正如其他人所说，原子和 GPU 是一个糟糕的组合（我已经遭受了太多的学习这个......）

如果与您的数据集相比，预期结果的数量很少，我在[这里](https://stackoverflow.com/questions/28249558/pyopencl-copy-if-is-it-possible-to-minimize-the-return-buffer-size)`sparse_copy_if()`提出了一种方法--- 您也可以在其中找到一个示例。`copy_if`

分叉我的代码，以下应该可以工作：

```
from my_pyopencl_algorithm import copy_if 
final_gpu, evt = my_pyopencl_algorithm.sparse_copy_if(array_gpu, "ary[i] > 100", queue = queue) 
```

# java - 如何在android中包装来自textview的数字

> ID：14582224
> 
> 赞同：0
> 
> 时间：2013-01-29T11:50:13.120
> 
> 标签：java, android, replace, textview

在Android中，我有一个TextView，在textview里面，它包含一些文本示例（22个喜欢，有时1个喜欢或空文本）。这里我只想得到数字而不是字符。所以使用如何使用String.replaceAll（ ) 以准确获取数字而没有空文本。这是一个示例代码...

```
textview.setText("2 Likes");
String com=textview.replaceAll("",""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:53:33.503

用于`String.split`将 Array 中的字符串拆分为：

```
textview.setText("2 Likes");
String strtxt=textview.getText();

String[] arrliks = strtxt.split(" ");  
String num_of_likes=arrliks[0]; //<<< get 2 here 
```

您还可以使用正则表达式来拆分字符串

**编辑 ：**

你也叫`String.replaceAll` 用作：

```
 String com=textview.getText();
   String liks = "likes";
   String str_new   ="";
  if (com.toLowerCase().indexOf(liks) != -1) {
     str_new=com.replaceAll(" Likes","");
   }else{
     str_new=com.replaceAll(" like","");
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:56:08.047

如果您的文字总是这样表示（32 个喜欢，2 个喜欢）

您可以使用子字符串功能

```
If(yourstring.length>0)
{

    string result = yourstring.substring(0,yourstring.index(" "));
}
else
{
Do whatever here..
} 
```

这将导致单独切割数字部分。但是 make`sure that always a space`应该在数字之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:03:44.927

您可以使用正则表达式轻松找到喜欢的数量：

```
 String txt = textview.getText();
     Pattern p = Pattern.compile("^([0-9]+).*");
     Matcher m = p.matcher(txt);

    if (m.find()) {
        int value = Integer.parseInt(am.group(1));
    } 
```

# php - iSeries 上的 PDO ODBC 到 IBM DB2 导致 Ubuntu 服务器上的段错误

> ID：14582226
> 
> 赞同：2
> 
> 时间：2013-01-29T11:50:33.103
> 
> 标签：php, pdo, db2, unixodbc, db2-400

我们尝试使用 PDO ODBC 从 Unix 系统 (Ubuntu) 连接到 iSeries 上的 DB2。到目前为止一切都很好。如果我们在结果数组中获得 NULL 值，则会导致段错误。

这里有一些测试代码来重现段错误：

```
$pdo_dsn = "odbc:DRIVER={iSeries Access ODBC DRIVER};SYSTEM=***";
$pdo_username = "***";
$pdo_password = "***";
$pdo_dbh = new PDO(
    $pdo_dsn, 
    $pdo_username, 
    $pdo_password,
    array(
        PDO::ATTR_PERSISTENT => FALSE, 
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
    )
);
$pdo_query = "SET SCHEMA [SCHEMANAME]";
$pdo_params = array();
$pdo_stmt = $pdo_dbh->prepare($pdo_query);
$pdo_stmt_result = $pdo_stmt->execute($pdo_params);
$pdo_query = "SELECT * FROM [FIRSTTABLE] LEFT JOIN [OTHERTABLE] ON (1=2)";
$pdo_params = array();
$pdo_stmt = $pdo_dbh->prepare($pdo_query);
$pdo_stmt_result = $pdo_stmt->execute($pdo_params);
$pdo_result = $pdo_stmt->fetchAll(PDO::FETCH_ASSOC); 
```

最后一行导致段错误！

```
php5[26525]: segfault at 2035000 ip 00007f8bf21f18d3 sp 00007fff78f1d3d8 error 6 in libc-2.15.so[7f8bf20a8000+1b5000] 
```

我们做了什么来修复：

1.  添加以下 PDO-Attribute 无效：
    1.  PDO::ATTR_ORACLE_NULLS => PDO::NULL_TO_STRING
2.  激活 unixodbc.log 并检查它。查询成功执行：
    1.  退出：[SQL_SUCCESS]
3.  将 IFNULL 插入 SQL 语句。这解决了问题，但在我们看来，对于生产环境来说，这不是一个实用的解决方案。

目前：没有任何想法。上面显示的代码在 Windows XP 和 Windows 7 上的 XAMPP 上运行良好，没有错误。如果我们使用 PDO::ATTR_ORACLE_NULLS 则无关紧要。两种可能的选项都可以正常工作，结果数组按预期显示

这个问题有什么解决方案吗？感谢您的任何帮助和想法。

附加信息：我们使用 Ubuntu 12.04 LTS 64 位。是否可能由于 libc 64bit 中的错误而发生此错误？似乎脚本在“某处”中止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:43:47.923

好的。经过几个小时的测试和设置额外的开发环境，我们发现这是 64 位系统上的问题。

系统期望答案（fetchAll 函数）中有一个严格的 8 字节字段长度，但得到了 4 字节的字段长度。这会导致上面提到的段错误。

设置一个几乎相同的 32 位环境是（临时）解决方案。该脚本现在正在运行。属性 PDO::ATTR_ORACLE_NULLS 也按预期工作。

对于生产环境，这意味着 RAM 限制为 4 GB：/

# linux - 安装 Redhat Satellite 服务器

> ID：14582233
> 
> 赞同：-3
> 
> 时间：2013-01-29T11:50:57.960
> 
> 标签：linux, redhat

我想知道是否有人可以在 Redhat Satellite 服务器上分享一些安装步骤。我试图查看谷歌，但找不到相关的。

这将是非常大的帮助。

在此先感谢， 苏曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:31:38.013

真的吗？Google 中的“redhat 卫星服务器安装”查询会产生大量结果，包括：[官方 RedHat 安装指南](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Network_Satellite/5.0/pdf/Installation_Guide/Red_Hat_Network_Satellite-5.0-Installation_Guide-en-US.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T08:49:20.270

向 RHN 注册 RHEL 系统的命令是：

```
rhn_register 
```

• 在系统注册到 RHN 之后，您应该在尝试安装 Satellite 之前完全更新系统并重新启动。

• 要使用所有当前更新更新 RHEL 系统：

```
yum -y update 
```

• 使用xxx.xxx 更新/etc/sysconfig/network 中的HOSTNAME。

• 配置 IPTables 以允许入站 TCP 端口 80、443 和 5222。

• 重新启动IPTables 服务。

• 配置 IPTables 以允许入站 TCP 端口 80、443 和 5222。 o 在 /etc/sysconfig/iptables 的“dport 22”行之后添加以下内容：

```
-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 5222 -j ACCEPT 
```

• 重新启动IPTables 服务。

```
 serviceiptables restart 
```

• 将 root 主目录中的卫星 ISO 挂载到 /mnt：

```
 mount -o loop /setupfiles/satellite-5.5.0-20120911-rhel-6-x86_64.iso /mnt

 cd /mnt

./install.pl --disconnected
rhn-satellite start 
```

完毕

# nhibernate - Fluent NHibernate 等价于一对一关系的逆

> ID：14582235
> 
> 赞同：1
> 
> 时间：2013-01-29T11:50:59.560
> 
> 标签：nhibernate, fluent-nhibernate

事实证明，客户的这个旧映射：

```
mapping.HasMany(x => x.CustomerBalances).Inverse(); 
```

CustomerBalances 是一个 ISet。

错误，因为 CustomerBalance 表中始终只能有 1 个条目。但是，由于数据库触发器（不幸的是），当我们保存客户时，NHB 不保存 CustomerBalance 仍然非常重要。

所以我想要类似的东西：

```
mapping.HasOne(x => x.CustomerBalance).Inverse(); 
```

需要注意的是，CustomerBalance 的 PK 与 Customer 的 PK 相同。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:33:23.937

```
mapping.HasOne(x => x.CustomerBalance).Cascade.None(); 
```

应该做的伎俩。

# sql - SQL 选择行

> ID：14582242
> 
> 赞同：-4
> 
> 时间：2013-01-29T11:51:30.970
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [SQL SERVER SELECTING ROW](https://stackoverflow.com/questions/14577406/sql-server-selecting-row)

如果我有下面这张表

```
 id         time
   start      08.00 AM 
   stop       09.00 AM
   stop       09.30 AM
   start      09.30 AM
   start      11.00 AM
   start      11.30 AM
   stop       11.30 AM
   stop       12.00 PM 
```

我想要如下所示的输出：

有什么解决办法吗？

这就是我想要的输出：

```
 id         time       end_time    interval 
   start      08.00 AM    09.00 AM      60 minute
   stop       09.00 AM    09.30 AM      30 minute
   start      09.30 AM    11.30 AM      120 minute
   stop       11.30 AM    12.00 PM      30 minute
   stop       12.00 PM     NULL          NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:02:43.217

> 我想要的输出只需要每次第一次启动和停止后的每次启动和最后一次停止

`row_number()`使用窗口函数很容易做到这一点：

```
; with  numbered as
        (
        select  row_number() over (order by [time]) rn
        ,       count(*) over() as cnt
        ,       *
        from    Table1
        )
select  *
from    numbered cur
left join
        numbered prev
on      cur.rn = prev.rn + 1
left join
        numbered next
on      cur.rn = next.rn - 1
where   cur.rn in (1, cur.cnt) -- first or last row
        or (cur.id = 'start' and prev.id = 'stop') -- start after stop
order by
        cur.rn 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/0df14/9/0)

并不是说您的示例输出不符合您的要求。它包括几行都不符合三个条件（第一行、最后一行、停止后开始）。

# asp.net - ASP.NET MVC 4 自定义 HTML Helpers 文件夹位置

> ID：14582243
> 
> 赞同：5
> 
> 时间：2013-01-29T11:51:32.907
> 
> 标签：asp.net, asp.net-mvc-4, html-helper

我开始使用带有 Razor 语法的 ASP.NET MVC 4 框架开发应用程序。我想知道我应该在哪里（文件夹位置）创建我的 HTML Helper 类。最佳实践。

例如：

*   VisualStudio解决方案
    *   控制器
    *   html
        *   HtmlHelperClass.vb
    *   楷模
    *   意见

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:08:58.647

使用[这个](https://stackoverflow.com/questions/3981175/where-should-i-place-declarative-html-helpers-in-asp-net-mvc-3)。要使用 Razor 中的“@helper”功能，您需要将 CSHTML 文件放在应用程序的 App_Code 文件夹中。ASP.NET MVC 3 中没有“Views/Helpers”文件夹。ScottGu 的博客文章是在该功能完全实现之前编写的，其中一些注释不再完全准确。

要调用您编写的“@helper”，您必须在其中包含文件名和助手的名称。例如，如果你有这个助手：

```
~/App_Code/MyHelper.cshtml 
```

而这个内容：

```
@helper ShowStuff(string stuff) {
    <p>@stuff</p>
} 
```

然后你这样称呼它：

```
@MyHelper.ShowStuff("some stuff!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:54:22.717

你有一个很好的结构。

我会用实用程序文件夹更改 Html 文件夹。你可以在那里添加所有的帮手。

*   控制器
*   楷模
*   意见
*   效用
*   框架（这可能对您的应用程序的引导很有用）

实际上没有修复“最佳实践”。只要确保你可以在明显的地方找到你的课程。如果不改造。

# jquery - ajax调用后Jquery-Json返回[object,object]

> ID：14582245
> 
> 赞同：0
> 
> 时间：2013-01-29T11:51:37.633
> 
> 标签：jquery, ajax, json

我有以下 ajax 来调用我的服务，该服务从数据库中获取一些记录并将其填充到我的前端...但是我收到 json:unexpected character 错误...请您帮我解决这个问题...

```
'http://localhost/WcfService/Service1.svc/remarksList';

    var tempyear="";

    $.ajax({
                    url: urlToHandler,
                    data:JSON.stringify({oei:{"reqNo1":reqNo,"loginid":userid}}),
                    type: 'POST',
                    dataType:"json",
                    contentType: 'application/json',
                    success: function(data) {    

                    alert(data.fillRemarksListResult);
                    myData = JSON.parse(data.fillRemarksListResult, function (key, value) {
        var type;
        if (value && typeof value === 'object') {
            type = value.type;
            if (typeof type === 'string' && typeof window[type] === 'function') {
                return new (window[type])(value);
            }
        }
        return value;
    });
    alert(myData);
        $.each(data.fillRemarksListResult,function(key,val){

                alert(val.rmrkreqNo1);
                        });
                    },
                    error: function(data, status, jqXHR) {                       
                        alert('There was an error.');
                    }
                }); // end $.ajax

}); 
```

**现在我得到这个错误：**

* ***Json.parse:unexpected character myData=JSON.parse(data.fillRemarksListResult, function (key, value) {* ***

**当作为警报给出时，我的 AJAX 调用还返回** [object Object]、[object Object]、[object Object]、[object Object]、[object Object]、[object Object]、[object Object]...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T12:02:26.180

有2种方法可以解决这个问题

**方式1]**

`dataType:"json",`从您的`$.ajax`通话中删除。回答使用`JSON.parse()`.

**方式2]**

保持`dataType:"json",`原样，不要使用`JSON.parse()`

**为什么 为什么 为什么**

以下是原因。根据`$.ajax()`API 文档，当您指定`dataType:'json'`属性时，jQuery 将自动`parse`响应来自服务器的响应并将`parse`d JSON 对象传递给您的成功回调。

在这种情况下，您正在`parse`调用 JSON 对象，这就是引发错误的原因。

所以要么不指定`dataType:"json"`并解析返回的字符串，要么指定`dataType:"json"`并且不解析它。

# c# - 将 Sage Line 50 与 Windows 应用程序集成

> ID：14582246
> 
> 赞同：7
> 
> 时间：2013-01-29T11:51:50.730
> 
> 标签：c#, asp.net, client-server, sage-erp, sage-line-50

我必须将 C# Windows 应用程序与 Sage Line 50 集成。（将所有发票详细信息从应用程序发送到 Sage）。

我在谷歌上搜索了大部分说要集成 Sage Line 50 的地方，我们需要使用 Sage 开发工具包 (SDK)。但它不是免费的。

我们已经购买了 Sage Line 50。但现在我想知道如何将我们的会计软件与 Sage Line 50 集成？

我找到了这个网址

```
http://crmsageconnector.codeplex.com/ 
```

他们使用 Microsoft Dynamics CRM Connector for Sage Line 50 来同步数据以及数据迁移。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-28T16:00:47.560

是的，如果您想将您的会计数据集成到 Sage，则需要 Sage 50 Accounts SDK……是的，它需要花钱：大约 1500 英镑。

为此，您可以完全访问开发支持团队（他们非常乐于助人并且知道他们在说什么）、SDK DLL、全面的 SDK 文档和激活密钥，以便您开始使用 Sage 的 SDK。

注意 - 示例代码是用 C# 和 VB.Net 编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T12:25:39.680

我一直在研究完全相同的问题。Sage SDK 每年 1500 英镑！！！和 Sage 交谈后我的理解是，使用今年版本开发的任何应用程序都不一定适用于 Sage 的未来版本，所以你需要再花 ANOTHER ！如果您的应用程序需要为更高版本更新，则需要 1500 英镑才能获得最新的 dll 等。这对我来说太富有了，更重要的是我的客户。

我一直在寻找替代品，并在

[http://sage.github.io/SData-2.0/](http://sage.github.io/SData-2.0/)

这是相当棘手的事情，但对于任何有兴趣的人来说，它允许我查询客户信息，最重要的是它允许我添加和编辑客户。接下来我将尝试添加发票。

我一直在使用上面的链接和此处的示例 .net 客户端作为参考

[https://github.com/Sage/SDataCSharpClientLib](https://github.com/Sage/SDataCSharpClientLib)

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:03:27.630

Sage Data objects C# 似乎是一种替代方案，付费的，但该网站没有下载链接[http://www.sagedataobjects.com/](http://www.sagedataobjects.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T11:10:02.127

您需要在[http://www.sage.co.uk/partnering-sage/developers/index.html申请成为 Sage 开发人员](http://www.sage.co.uk/partnering-sage/developers/index.html)

选择最适合您的选项并申请，或者您可以聘请已经付费成为会员的开发人员为您编写代码（就像我哈哈）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T16:04:43.137

You may find my product PostTrans which imports data from excel of use. By using excel you can easily add you own code/macros/formula to manipulate data before posting into the Sage 50 accounts, with full validation and in cell search for codes.

idaea for data entry, or import of external data. see [http://www.posttrans.co.uk/](http://www.posttrans.co.uk/)

Sorry for the advert, but may be of help ;_)

# javascript - iframe 到 jsbin 中的 stackoverflow.com

> ID：14582248
> 
> 赞同：0
> 
> 时间：2013-01-29T11:51:57.260
> 
> 标签：javascript, jsbin

我正在使用 jsbin 测试一些与 iframe 相关的代码，这是我的工作的链接 [http://www.jsbin.com/evidez/1/edit](http://www.jsbin.com/evidez/1/edit)

我错误地将 iframe 的 url 设置为[http://stackoverflow.com](http://stackoverflow.com)，现在当[http://www.jsbin.com/evidez/1/edit](http://www.jsbin.com/evidez/1/edit)加载时，会弹出一个警报并在关闭它时重定向到[http： //stackoverflow.com](http://stackoverflow.com)。

我找不到任何方法来编辑我的 jsbin 代码。

有没有出路，还是我必须重新开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:30:42.010

我与我的浏览器搏斗并为你挽救了这个。下次小心点。

HTML

```
<!doctype html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <title>Full Screen Example</title>
</head>
<body>
  <button id="fullsc">set source to iframe and take me full screen</button><br><br>

  <iframe id="myvideo" src="http://stackoverflow.com"></iframe>

</body>
</html> 
```

CSS

```
/* make the video stretch to fill the screen in WebKit */
    :-webkit-full-screen #myvideo {
      width: 100%;
  height: 100%;}

iframe{
  position: absolute; 
  height: 100%; 
  width:100%
} 
```

Javascript

```
var videoElement = $('#myvideo');
var fullsc = $('#fullsc');

  function toggleFullScreen() {
    if (!document.mozFullScreen && !document.webkitFullScreen) {
      if (videoElement.mozRequestFullScreen) {
        videoElement.mozRequestFullScreen();
      } else {
        videoElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
      }
    } else {
      if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else {
        document.webkitCancelFullScreen();
      }
    }
  }

  document.addEventListener("keydown", function(e) {
    if (e.keyCode == 13) {
      toggleFullScreen();
    }
  }, false);

fullsc.onclick = function(){
  //setiframeurl();
  toggleFullScreen();
};

function setiframeurl(){
  $('#myvideo').attr('src', "http://radbox.me/watch/mobile?c=21&du=35");

} 
```

# mono - arm交叉编译单声道时出错

> ID：14582250
> 
> 赞同：2
> 
> 时间：2013-01-29T11:52:06.250
> 
> 标签：mono, arm, cross-compiling, ubuntu-12.04

我试图在 Ubuntu 12.04 LTS 操作系统中借助 Scratchbox2 为 arm 架构交叉编译单声道，但没有这样做。

我做的整个过程如下

**A. 设置 Scratchbox2**

1.  克隆 scratchbox 2 存储库：

    ```
    $ git clone git://gitorious.org/scratchbox2/scratchbox2.git 
    ```

2.  要构建和安装 SB2：

    ```
    $ cd scratchbox2
    $ dpkg-buildpackage -rfakeroot
    $ cd ..
    $ sudo dpkg -i libsb2*deb scratchbox2*deb 
    ```

状态：成功

**B. 设置 qemu**

1.  克隆 qemu 仓库

    ```
    git clone git://git.qemu.org/qemu.git 
    ```

2.  构建和安装 qemu

    $ cd qemu $ ./configure --prefix=$HOME/sb2 --target-list=arm-linux-user $ make && make install $ cd ..

状态：成功

**C. 设置 arm 工具链**

1.  获取 arm 工具链

    ```
    $ wget https://sourcery.mentor.com/sgpp/lite/arm/portal/package8739/public/arm-none-linux-gnueabi/arm-2011.03-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2

    $ tar xjvf arm-2011.03-41-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 
    ```

2.  生成工作目标配置。

    ```
    $ cp -a arm-2011.03/arm-none-linux-gnueabi/libc/{lib,etc,usr} .
    $ sb2-init ARM9 arm-2011.03/bin/arm-none-linux-gnueabi-gcc    [ ARM9-> name of target] 
    ```

状态：成功

**D. 交叉编译单声道**

```
 $ sb2

   [SB2 simple arm9] root@Vostro-460 $ cd Desktop/mono-2.10.8.1
   [SB2 simple arm9] root@Vostro-460 mono-2.10.8.1 $ ./configure --disable-mcs-build
   [SB2 simple arm9] root@Vostro-460 mono-2.10.8.1 $ make 
```

状态：**失败**

错误：

```
/usr/local/lib/libgmodule-2.0.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make[4]: *** [test-glib] Error 1
make[4]: Leaving directory `/home/ushus/Desktop/mono-2.10.8.1/eglib/test'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/ushus/Desktop/mono-2.10.8.1/eglib'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/ushus/Desktop/mono-2.10.8.1/eglib'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/ushus/Desktop/mono-2.10.8.1'
make: *** [all] Error 2 
```

我被困在这一步。知道如何解决这个错误吗？

# facebook - 如何获取知道线程 ID 的 facebook 消息线程 URL？

> ID：14582251
> 
> 赞同：0
> 
> 时间：2013-01-29T11:52:06.340
> 
> 标签：facebook

当我得到一个 facebook 线程 id 时，我如何构建线程的链接？

我已阅读[如何在知道线程 ID 的情况下获取消息线程 URL？](https://stackoverflow.com/questions/9051642/how-to-get-message-thread-url-knowing-the-thread-id)和[http://facebook.stackoverflow.com/questions/7747622/how-can-i-construct-a-link-to-view-a-message-on-facebook-com-if-i-have-the-messa](http://facebook.stackoverflow.com/questions/7747622/how-can-i-construct-a-link-to-view-a-message-on-facebook-com-if-i-have-the-messa)

但在我的收件箱中，有一些这样的链接： http://m.facebook.com/messages#!/messages/read/?tid=mid.1359355288168%3A7e24f2d9dd97e7c323&__user= [1388422425](http://m.facebook.com/messages#!/messages/read/?tid=mid.1359355288168%3A7e24f2d9dd97e7c323&__user=1388422425)

*中*是什么意思？大多数线程使用 tid=id.xxxx 或 tid=xxx

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:34:35.143

我认为这里的问题是并非所有收件箱和消息都已更新到线程系统。我有同样的问题。

我假设 mid 表示消息 ID 而不是 tid 线程 ID

# javascript - javascript日期对象不返回结果

> ID：14582253
> 
> 赞同：0
> 
> 时间：2013-01-29T11:52:10.210
> 
> 标签：javascript, jquery, time

![在此处输入图像描述](../Images/ce589b3e3618d1030bf414d1f12e3ab8.png)

我有这个日历表（它的一堆浮动 div .. 不是`<table>`），

我的用户应该能够单击行上的任意位置以添加新预订。问题是如何计算他点击的时间。

所以我使用：

```
$('day-column').click(function(e){
  var posY = $(this).offset().top;//get offset of click
  var pos=(e.pageY - posY)* 60 * 1000;//convert it into millisec (since 1px=1min)
  var start=8 * 60 * 60 * 1000;//covert starting hour 8:00 into millisec
  var d = new Date();//create date object
  d.setMilliseconds((start+pos));//set obj millisec

  console.log(d.getHours()+':'+d.getMinutes());//try to extract new hour and time

}); 
```

为什么这不起作用？难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T12:43:14.767

我建议使用： http: [//momentjs.com/](http://momentjs.com/)

将支持所有浏览器，简单，并且您可以有格式选项。我想你会喜欢的。

# windows - qt 创建者错误：程序以代码-1073741819 退出

> ID：14582263
> 
> 赞同：1
> 
> 时间：2013-01-29T11:52:25.030
> 
> 标签：windows, qt, opencv, qt-creator

我正在使用 Qt 和 Opencv 在 Windows 7 32 位中使用 Qt Creator IDE 进行视频处理项目。我已经成功编译并运行了我的代码。但是当我关闭我的应用程序的 gui 时，Windows 会弹出一个错误：

```
MyProgram.exe has stopped working

Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: QtTracker3.exe
  Application Version:  0.0.0.0
  Application Timestamp:    5107b5da
  Fault Module Name:    ntdll.dll
  Fault Module Version: 6.1.7600.16695
  Fault Module Timestamp:   4cc7ab44
  Exception Code:   c0000005
  Exception Offset: 00052073
  OS Version:   6.1.7600.2.3.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

我不是专业的程序员，我不需要知道这是否会因为我的编程技能差或其他原因而发生..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:04:08.143

异常代码`c0000005`是访问冲突，也称为一般保护错误。程序正在读取或写入不属于虚拟地址空间的地址。一个非常常见的原因是您正在取消引用一个过时的指针。换句话说，指针曾经是有效的，但您随后释放了它。然后稍后当您尝试访问它时，会引发异常。

异常是`ntdll.dll`系统 DLL 出现故障。这意味着您的程序中的某些内容正在将无效数据传递给系统 API。

为了解决这个问题，您可能需要在调试器下运行，并让调试器在发生异常的代码点处中断。然后您可以尝试找出正在访问的内存无效的原因。

这是你可以做的事情，但我们做不到。你有代码，我们没有。因此，我们无法为您提供更多帮助。无论如何，没有必要绝望——这些问题通常很容易在调试器的帮助下解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T06:58:07.920

有时删除构建目录的内容并尝试再次编译以确保没有缓存。

# ruby-on-rails - 异常记录器 - 在请求中过滤密码

> ID：14582264
> 
> 赞同：2
> 
> 时间：2013-01-29T11:52:27.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception-handling, password-protection

我正在使用[异常记录器](http://rubygems.org/gems/r3_exception_logger)来获取异常，保存在数据库中并显示它。

在“例外”页面中显示时，用户输入的密码在请求参数中可见。知道如何过滤它吗？

我也添加了

```
config.filter_parameters += [:password] 
```

在 application.rb 文件中。这有助于我过滤日志中的密码，但不能过滤被过滤的异常。

# python - 在保持不透明度的同时混合图像

> ID：14582269
> 
> 赞同：1
> 
> 时间：2013-01-29T11:52:33.863
> 
> 标签：python, image, python-imaging-library

我一直在尝试将图像混合在一起（在 python 中使用 PIL）以形成一个组合图像。但是，为了使两张图像正确融合，我一直将 alpha 保持为 0.5。这导致图像是半透明的并失去其不透明度。无论如何我可以在不失去不透明度的情况下混合这两个图像。编码：

```
import Image
a = Image.open("image1.png")
b = Image.open("image2.png")
c = Image.blend(a,b,0.5)
c.save("abc.png", "PNG") 
```

这些是图像：（我是新用户，不允许发布图像或超过 2 个超链接。因此，我正在放置链接。）

image1 - [http://i.stack.imgur.com/EphiR.png](http://i.stack.imgur.com/EphiR.png)

abc - [http://i.stack.imgur.com/useql.png](http://i.stack.imgur.com/useql.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T18:12:54.480

这是一个可以改进的快速而肮脏的版本。

```
from PIL import Image
from PIL import ImageChops
from PIL import ImageOps
import numpy as np

a = Image.open("a.png")
b = Image.open("b.png")

# Finds the difference between the two images. Then inverts so differences are black.
diff = ImageOps.invert(ImageChops.difference(a, b)) 
# Then we use numpy to convert black to red. 
image = diff.convert('RGBA')
data = np.array(image)

r1,g1,b1 = 0,0,0
r2,g2,b2 = 255,0,0

red, green, blue = data[:,:,0], data[:,:,1], data[:,:,2]
mask = (red == r1) & (green == g1) & (blue == b1)
data[:,:,:3][mask] = [r2, g2, b2]
# Then we convert the array back to an image.
overlay = Image.fromarray(data)
# And blend with the original. 
imgblend = ImageChops.add(a.convert('RGBA'), overlay,2)
imgblend.show() 
```

# c++ - 轮廓不等于轮廓[i]？

> ID：14582270
> 
> 赞同：0
> 
> 时间：2013-01-29T11:52:45.457
> 
> 标签：c++, opencv, contour

这是基于[this question](https://stackoverflow.com/questions/14578711/contour-comparison-in-opencv-convertion-from-c-to-c)，它更多地关注OpenCV C++，所以我决定提出这个问题。这是我的程序的一部分：

```
vector<vector<Point> > contours;
vector<vector<Point> > largest_contours;

double largest_area = 0;
for(int i= 0; i < contours.size(); i++){
    double area = contourArea(contours[i]);
    if(area >= largest_area){
        largest_area = area;
        largest_contours = contours[i];  <---THIS is the problem
    }
} 
```

基本上[该程序](https://stackoverflow.com/questions/14578711/contour-comparison-in-opencv-convertion-from-c-to-c)将执行以下操作：

1.  扫描在图像序列/视频中检测到的每个轮廓
2.  将轮廓标记为`contours[i]`
3.  计算每个轮廓的面积
4.  比较`contours[i]`基于区域。面积越大`largest_area`，轮廓越大`largest_contours`
5.  最后，`DrawContours`和`imshow`

有问题的行将在鼠标上显示此消息：

```
Error: No operator "=" matches these operands 
```

问题是，**为什么** `contours[i]` **不等于** `largest_contours`尽管它们具有相同的类 ( `vector<vector<Point> >`) 并且一次每个轮廓只有一个值？谁能解释为什么以及如何解决它？

提前致谢。

编辑（1）：更改`contourArea(contours)`为`contourArea(contours[i])`. 添加了`largest_contours`和的声明`contours`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:58:25.100

这里有几个问题，如果没有完整的声明，您的问题的确切原因无法确定，但是这里有一些看起来很奇怪的事情：

```
double area = contourArea(contours); 
```

这看起来像您确定了所有轮廓的总面积 - 每次迭代。这听起来不对。

```
largest_contours = contours[i]; 
```

这很可能会失败，因为没有轮廓的赋值运算符。如何保存索引（除非您想保留整个结构（？））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:00:22.723

您似乎在收藏某物和没有收藏之间感到困惑。我猜 a`vector<Point>`是您认为的“轮廓”，而 a`vector<vector<Point>>`是一组轮廓。

As you loop from 0 to `contours.size()`, you are working out `contourArea(contours)` which will be exactly the same every time because you never modify `contours`. It seems to me that you want to work out the area of an individual contour and should be doing something like `contourArea(contours[i])`.

Then, if you want a list of your largest contours, which is also of type `vector<vector<Point>>`, then you need to push each of the contours you find into this `vector`. If `contours[i]` is the contour you want to add to the list, you would do that with `largest_contours.push_back(contours[i]);`.

# php - 按 [type] 对多维数组进行排序

> ID：14582271
> 
> 赞同：1
> 
> 时间：2013-01-29T11:52:47.227
> 
> 标签：php, arrays, drupal, multidimensional-array

如何按类型对这个数组进行排序，比如 video 然后 Simple Page ？

```
print_r($result); 
```

输出 ：

```
Array
(
    [link] => http://localhost/test/test
    [type] => Video
    [title] => Treasurer Robot
    [date] => 1359397195
    [node] => stdClass Object
        (
            [nid] => 9
            [type] => video
            [language] => 
            [uid] => 1
            [status] => 1
            [created] => 1344351903
            [changed] => 1359397195
            [comment] => 0
            [promote] => 1
    )
)

Array
(
    [link] => http://localhost/test/test
    [type] => Simple Page
    [title] => Treasurer Robot2
    [date] => 1359397193
    [node] => stdClass Object
        (
            [nid] => 11
            [type] => Simple Page
            [language] => 
            [uid] => 1
            [status] => 1
            [created] => 1344351903
            [changed] => 1359397195
            [comment] => 0
            [promote] => 1
    )
)

Array
(
    [link] => http://localhost/test/test
    [type] => Video
    [title] => Treasurer Robot3
    [date] => 1359397195
    [node] => stdClass Object
        (
            [nid] => 19
            [type] => video
            [language] => 
            [uid] => 1
            [status] => 1
            [created] => 1344351903
            [changed] => 1359397195
            [comment] => 0
            [promote] => 1
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:57:00.120

有许多 php 排序功能。请从以下网址中找到适合您的。 [http://resource.gvignesh.org/use-the-power-of-these-php-functions-to-sort-your-arrays/](http://resource.gvignesh.org/use-the-power-of-these-php-functions-to-sort-your-arrays/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:09:44.367

```
function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}
aasort($your_array,"order"); 
```

# inno-setup - 如何在 InnoSetup PreProcessor 部分复制文件？

> ID：14582277
> 
> 赞同：5
> 
> 时间：2013-01-29T11:52:54.653
> 
> 标签：inno-setup

我只是想在编译开始之前将一个文件复制到指定目录。

**背景：**我需要创建一些 zip 文件。需要将要包含的文件之一复制到最终的 zip 位置。（我不能直接从原始位置压缩它，因为它会将原始路径保留在 zip 文件中。

我发现 preProcessor 操作非常适合这个。我尝试使用 windows 复制命令，但它不起作用。是否可以在 preCompiler 部分中使用 CODE 部分的函数？如何？还是有完全不同的方式来实现我的目标？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:59:59.213

您可以使用 ISPP[`CopyFile()`](http://jrsoftware.org/ispphelp/topic_copyfile.htm)功能执行此操作。

```
#expr CopyFile("C:\SourceFolder\FileName.exe", "C:\TargetFolder\FileName.exe") 
```

请注意，无法使用`[Code]`ISPP 中的函数，但您可以使用本机 ISPP 函数和宏。`Exec()`使用命令调用`copy`也会失败，因为它是命令处理器 ( `cmd.exe`) 的功能，而不是应用程序本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:37:34.063

尽管我已经建议对此类任务使用批处理文件，但我制作了一个示例脚本，它处理某个目录中的所有 *.tzs 脚本文件，并为每个文件尝试检查文件是否有已创建（或更具体，如果存在）。当然，这只是假设 *.tzs 脚本的基本用法，如帮助文件中所示。这里是：

```
#define FindHandle
#define FindResult
#define ScriptFile
#define ScriptLine
#define ScriptHandle
#define ArchiveFile
; unique identifier for the target archive file name property member
#define ArchiveToken ".Archive="
; path to directory, where all the *.tzs script files will be processed
#define ScriptPath "d:\Development\__StackOverflow\14579484\"
; tool, which will be used for the *.tzs file processing mentioned above
#define ScriptTool "c:\Program Files (x86)\TUGZip\TzScript.exe"

; This procedure tries to extract the name of the archive, to be created from
; the line currently read from the just processed *.tzs script file. It first
; tries to search the ArchiveToken constant value in trimmed, space-less line
; of script. If it's found, and the script line contains also two quotes, the 
; file name is stored to the ArchiveFile variable, by which is later checked 
; the file existence after the script execution is done
#sub ParseScriptLine  
  #define SrcPos = Pos("""", ScriptLine)
  #define EndPos = RPos("""", ScriptLine)
  #define ParsedStr = Trim(StringChange(ScriptLine, " ", ""))

  #if (Pos(ArchiveToken, ParsedStr) != 0) && (SrcPos != 0) && (EndPos != 0) && (SrcPos != EndPos)
    #expr ArchiveFile = Copy(ScriptLine, SrcPos + 1, EndPos - SrcPos - 1)
    #expr ArchiveFile = StringChange(ArchiveFile, "\\", "\")
    #if ArchiveFile != ""
      #pragma message "ExecuteScriptFile: ArchiveFile=" + ArchiveFile
      #expr ExecuteScriptFile      
    #endif
  #endif        
#endsub

; This procedure opens the currently processed *.tzs script file and starts to 
; read it line by line to get the file name of the archive to be created
#sub ReadScriptFile
  #pragma message "ReadScriptFile: ScriptFile=" + ScriptPath + ScriptFile
  #for {ScriptHandle = FileOpen(ScriptPath + ScriptFile); \
    ScriptHandle && !FileEof(ScriptHandle); ScriptLine = FileRead(ScriptHandle)} \
    ParseScriptLine
  #if ScriptHandle
    #expr FileClose(ScriptHandle)
  #endif
#endsub

; This procedure is used for the script execution itself, here the TzScript.exe
; tool is called passing the name of the currently processed script file. After
; this tool is done, it's checked if the expected archive file has been created 
#sub ExecuteScriptFile
  #if Exec(ScriptTool, ScriptPath + ScriptFile) == 0
    #if FileExists(ArchiveFile) == 0
      #error The expected archive was not found. Compilation will abort now!
    #endif
  #else
    #error An error occured at script tool starting. Compilation will abort now!
  #endif
#endsub

; This is the file iteration "callback"
#sub ProcessFoundFile
  #expr ScriptFile = FindGetFileName(FindHandle)
  #expr ReadScriptFile
#endsub

; This procedure is used to find all the *.tzs script files in folder, specified
; by the ScriptPath constant path. All the *.tzs files found there are executed 
; by the command line tool specified by the ScriptTool constant 
#for {FindHandle = FindResult = FindFirst(ScriptPath + "*.tzs", 0); \
  FindResult; FindResult = FindNext(FindHandle)} \
  ProcessFoundFile
#if FindHandle
  #expr FindClose(FindHandle)
#endif

[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output 
```

# ruby-on-rails - 在运行时更改数据库连接

> ID：14582278
> 
> 赞同：2
> 
> 时间：2013-01-29T11:52:54.887
> 
> 标签：ruby-on-rails, multithreading, sqlite, database-connection

**给定**

我有一个模型需要连接到专用的内存 SQLite 数据库。我正在做的是——在这样的类级别创建一个连接（这里我使用提供的连接跳过模式定义`ExternalDatabase`）：

```
class ExternalDatabase < ActiveRecord::Base
  self.abstract_class = true

  establish_connection(adapter: 'sqlite', database: ':memory:')
end

class MyModel < ExternalDatabase
end 
```

**问题**

我怀疑上述定义在从多个线程访问时容易出错。一个很好的例子是在运行 Sidekiq 工作线程时，这些工作线程同时从它们的线程写入数据库。

所以问题是：

1.  从不同线程访问数据库时，我对读/写冲突的怀疑是否正确？是否`sqlite`将资源锁定在较低级别，从而实现安全的并发读取/写入访问？

2.  如何在运行时更改与给定模型的内存 SQLite 数据库的连接？`ActiveRecord::Base#establish_connection`因为我使用的是内存数据库，所以对我不起作用。

    我想实现这样的目标：

    ```
    klass = Class.new(ActiveRecord::Base)
    klass.establish_connection(adapter: 'sqlite', database: ':memory:')  

    create_schema(klass.connection)

    MyClass.connection = klass.connection 
    ```

    但是 Rails 缺乏`#connection=`对 an 的直接方法`ActiveRecord::Base`（尽管它没有记录`#connection_id`，但似乎仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:07:23.540

得出两个结论：

1.  对于内存数据库，线程始终获得唯一的连接，即它自己的数据库版本，将始终是“新鲜的”，并且不会与其他线程中的类似数据库发生干扰。
2.  for regular DB one should make sure connection is establish at a runtime not within the class definition.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:30:49.810

这可能有用。

[http://www.sqlite.org/faq.html#q6](http://www.sqlite.org/faq.html#q6)

我对它的快速阅读表明，您可以通过多个踏板访问同一个 sqlite 数据库而侥幸，但这是您应该尽量避免做的事情，并且会带来一些陷阱。

# javascript - Java Script 中的自定义打印预览

> ID：14582281
> 
> 赞同：2
> 
> 时间：2013-01-29T11:53:05.370
> 
> 标签：javascript, html

我如何开发自定义打印预览对话框，就像使用 Java 脚本的浏览器打印预览一样？我正在开发一个需要自定义打印预览对话框（计算页数、自动分页和更改字体大小）的图书阅读器。

有没有 JS 库可以做到这一点？请让我知道有什么办法可以做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:56:09.580

您实际上不需要为该任务使用太多 Javascript，CSS 及其*媒体查询*将完成这项工作。

您可以定义一张像

```
@media print {
  body {
      width: 100%;
      color: red;
  }

  #someElement {
      display: none;
  }
} 
```

这样，您可以克隆新*窗口*或*弹出*窗口的实际标记并应用这些样式表定义。

# java - 创建新用户帐户并发送电子邮件

> ID：14582282
> 
> 赞同：0
> 
> 时间：2013-01-29T11:53:14.897
> 
> 标签：java, spring-mvc

我的用户帐户创建方法如下，

```
 public String saveAccountInfo(User user) {

    if(null != user){
        userService.addUser(user);
        mailService.sendActivationEmail(user);
    }

    return "redirect:/greeting.html";
} 
```

当用户提交帐户创建表单时，直到“sendActivationEmail”成功发送电子邮件后才显示greeting.html。sendActivationEmail 需要更长的时间，因此用户需要很长时间才能看到问候页面。我怎样才能触发此方法并允许流程完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:55:46.833

您必须开始一个新线程并从新线程中发送电子邮件。

这几乎是在 Java 中实现异步处理的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:02:27.633

发送激活邮件的任务可以由另一个线程完成。这将允许您显示问候页面。

```
if(null != user)
{
    userService.addUser(user);

    Thread mailSenderThread = new Thread(new Runnable()
    {
        public void run()
        {
            mailService.sendActivationEmail(user);
        }
    });
    mailSenderThread.start();
} 
```

可以做这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:20:43.293

这就是我的做法，

```
 public String saveAccountInfo(final User user) {

    if(null != user){
        user.setActivationKey(generateRandomKey());
        userService.addUser(user);
        new Thread(new Runnable(){
            @Override
            public void run() {
                mailService.sendActivationEmail(user);                  
            }               
        }).start();
    }       
    return "redirect:/greeting.html";
} 
```

# mysql - 如何为mysql数据库中的一列分配顺序值？

> ID：14582283
> 
> 赞同：2
> 
> 时间：2013-01-29T11:53:20.457
> 
> 标签：mysql

我有一张这样的桌子

![在此处输入图像描述](../Images/fbfa7957d6a2e5ededca729ba442ce36.png)

我想把它转换成这样的表格

![在此处输入图像描述](../Images/a93a79b4706117ebeb2f02e937c9cfc2.png)

基本上，我想为列 id 分配顺序值。有什么查询吗？mysql中rownum的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:55:29.550

您需要使用[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

```
CREATE TABLE animals (
     id MEDIUMINT NOT NULL AUTO_INCREMENT,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) ENGINE=MyISAM; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:55:36.917

你可以用一种方式做到这一点。将`id`列设为 as`PRIMARY KEY AUTO INCREMENT`然后更改所有`1`s的数据值，`null`然后尝试插入。

```
CREATE TABLE `people` (
     `id` INT NOT NULL AUTO_INCREMENT,
     `name` CHAR(30) NOT NULL,
     `profession` CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) ENGINE=InnoDB; 
```

然后像这样的SQL：

```
INSERT INTO `people` VALUES
(null, 'John', 'Engineer'),
(null, 'Ronny', 'Doctor'),
(null, 'Monty', 'Engineer'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:56:03.380

你可以通过创建一个主键并给它一个 AUTO_INCREMENT 来做到这一点，就像这样

```
id int NOT NULL AUTO_INCREMENT, 
```

# java - 自动化安卓游戏测试工具

> ID：14582284
> 
> 赞同：-3
> 
> 时间：2013-01-29T11:53:21.640
> 
> 标签：java, android, testing, automation

我有一个项目来为第 3 方（源代码不可用）android 游戏创建一个自动化测试工具。所以我的问题是我们可以为游戏运行自动化测试到什么程度。是否可以创建这样的工具？如果是，请告诉我我们该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:55:56.230

[Robotium](https://stackoverflow.com/questions/tagged/robotium)似乎很符合您的要求。它允许在没有源代码访问权限的情况下在正在运行的应用程序上点击这里和那里，还可以搜索必须出现以响应这些点击的文本。

# jquery - 使用 Sqlite 在 Metro 应用程序的下拉列表中绑定数据

> ID：14582285
> 
> 赞同：0
> 
> 时间：2013-01-29T11:53:26.953
> 
> 标签：jquery, html, microsoft-metro

我正在使用（HTML 5，JavaScript）在 Windows 8 Metro 应用程序上工作，想知道如何绑定下拉列表中 SQLite 表中的数据，请指导或建议一些源代码。我正在使用下面提到的方法，有没有其他方法可以在 win metro 应用程序中完成这项工作

```
 function getcategories() {
    SQLite3JS.openAsync(dbPath).then(function (db) {
        db.allAsync('SELECT * FROM dbCategorymaster where isActive=' + IsActive + ' order by [order]')
            .then(function (rows) {
                var str = "";
                for (var i = 0; i < rows.length; i++) {

                    str = str + '<option value=' + rows[i].id + '>' + rows[i].category + '</option>';
                }
                var ddlcategory = document.getElementById("drpCategory");
                ddlcategory.innerHTML = '';
                ddlcategory.innerHTML = str;
                db.close();
            })
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:17:16.867

你使用什么样的组件来访问 SQLite？所以因为我还没有遇到任何方式来声明性地绑定选择标签的选项。您可以使用 ListView 及其 itemDataSource（[由我们的 SQLite 组件提供](https://github.com/doo/SQLite3-WinRT "SQLite 组件")）或以编程方式填充[此线程](https://stackoverflow.com/questions/13111064/bind-itemdatasource-to-select-html-element)中描述的选项。

# sharepoint - Sharepoint：从 GAC 中消失的 DLL

> ID：14582289
> 
> 赞同：0
> 
> 时间：2013-01-29T11:53:53.533
> 
> 标签：sharepoint, dll, sharepoint-2010, gac

我对 SharePoint 还很陌生，但我学得很快。然而，我遇到了一个让我完全困惑的令人困惑的问题，而且互联网还没有提供任何有用的东西......

我在 VM 中运行**SharePoint 2010**，我遇到了一个**重复的问题，*即库自发地从 GAC 中消失***。目前，这种情况平均每天发生一次，但在一天中的不同时间发生，并且**没有明显的触发因素**。我正在运行的 VM（及其上的源代码）与我同事的相同，但我是唯一遇到此问题的人。我已经多次**重建了我的环境，**并认为我已经用这个最新的环境破解了它，但问题又再次出现了。因为它发生在一天中的不同时间，我不认为它可以是一个计时器工作，它可以**在没有用户输入的情况下自发**发生（代码、设置、环境等任何东西都没有变化）。

如果需要，我可以提供受影响的库的更多详细信息，尽管它似乎是**项目特定的专有库和标准 Microsoft 程序集的混合**。

任何帮助或指点将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-03T19:24:37.083

有同样的问题。我通过重新编译一个具有不同版本号和一些不同数字的冲突 dll 文件来修复它。然后我确保每个使用这个 dll 的 webpart 在他们各自的 sharepoint 包中都有这个 dll，然后我再次部署了 webpart，这次它们没有消失。

我还发现消失不是随机的，而是安装另一个 Web 部件后的结果。很奇怪。

# python - 如何在 Python 3.3 中使用 ElementTree 选择某个元素的所有后代？

> ID：14582297
> 
> 赞同：0
> 
> 时间：2013-01-29T11:54:23.403
> 
> 标签：python, xml, elementtree

这是样本数据。

输入.xml

```
<root>
    <entry id="1">
    <headword>go</headword>
    <example>I <hw>go</hw> to school.</example>
</entry>
</root> 
```

我想将节点及其后代放入 . 那是，

输出.xml

```
<root>
    <entry id="1">
    <headword>go</headword>
            <examplegrp>
                <example>I <hw>go</hw> to school.</example>
            </examplegrp>
</entry>
</root> 
```

我可怜且不完整的脚本是：

```
import codecs
import xml.etree.ElementTree as ET

fin = codecs.open(r'input.xml', 'rb', encoding='utf-8')

data = ET.parse(fin)
root = data.getroot()

example = root.find('.//example')
for elem in example.iter():
    ---and then I don't know what to do--- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:06:30.957

[http://docs.python.org/3/library/xml.dom.html?highlight=xml#node-objects](http://docs.python.org/3/library/xml.dom.html?highlight=xml#node-objects) [http://docs.python.org/3/library/xml.dom.html?highlight=xml #文档对象](http://docs.python.org/3/library/xml.dom.html?highlight=xml#document-objects)

您可能希望遵循一些创建文档元素并将到达结果附加到它的范例。

```
group = Document.createElement(tagName)
for found in founds:
    group.appendNode(found) 
```

或类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:10:54.887

这是如何完成的示例：

```
text = """
<root>
    <entry id="1">
        <headword>go</headword>
        <example>I <hw>go</hw> to school.</example>
    </entry>
</root>
"""

import lxml.etree
import StringIO

data = lxml.etree.parse(StringIO.StringIO(text))
root = data.getroot()

for entry in root.xpath('//example/ancestor::entry[1]'):
    examplegrp = lxml.etree.SubElement(entry,"examplegrp")
    nodes = [node for node in entry.xpath('./example')]
    for node in nodes:
        entry.remove(node)
        examplegrp.append(node)

print lxml.etree.tostring(root,pretty_print=True) 
```

这将输出：

```
<root>
    <entry id="1">
        <headword>go</headword>
        <examplegrp><example>I <hw>go</hw> to school.</example>
    </examplegrp></entry>
</root> 
```

# android - “content://sms”在 android 2.3.x 操作系统版本中不起作用

> ID：14582303
> 
> 赞同：1
> 
> 时间：2013-01-29T11:55:07.037
> 
> 标签：android, sms, android-contentprovider

我正在尝试使用以下内容提供程序从 android 设备读取所有 SMS：

```
content://sms 
```

这样：

```
context.getContentResolver().query("content://sms", null, null,null, "date DESC") 
```

但光标在 android OS 版本 2.3.3 中返回 null。但相同的代码在 android 2.2 和 4.0 中运行良好。

我不明白是什么问题，可能是 Android 2.3.3 操作系统版本不支持“content://sms”内容提供程序，如果是，请告诉我找到 SMS 内容提供程序的正确方法是什么。

# c - 请在此处解释 typedef 的行为

> ID：14582304
> 
> 赞同：4
> 
> 时间：2013-01-29T11:55:17.203
> 
> 标签：c, structure, typedef

```
int main()
{
  int a;
  typedef struct  
  {
      int i;
      int j;
  }type1;
  typedef type1 type[10]; //Please explain this line ?
  typedef struct 
  {
      int  l;
      type  c;
  }type2;

  type2 x;
  x.c[0].i=1;   //How can we write this??
  x.c[0].j=2;

  x.c[2].j=3;

  printf("%d",x.c[2].j);
  return 0;
} 
```

程序正在成功编译，我不希望因为

```
 typedef type1 type[10]; 
```

请在这里解释 typeded 的行为。我所知道的是我们可以在 typedef 的帮助下定义一个别名。

输出：3

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T11:57:53.347

读取的方式`typedef`是作为常规变量声明，变量的类型是被赋予别名的类型，变量名是新别名的名称。

所以，在

```
typedef type1 type[10]; 
```

如果我们放弃`typedef`我们得到：

```
type1 type[10]; 
```

这清楚地定义`type`为 10 的数组`type1`。因此，`typedef`接下来介绍`type`类型“array of 10 `type1`”的名称。

# gcc - .cfi_remember_state 的实现

> ID：14582306
> 
> 赞同：5
> 
> 时间：2013-01-29T11:55:19.437
> 
> 标签：gcc, assembly, x86, x86-64, gnu-assembler

我想知道究竟`.cfi_remember_state`是如何实现的。我知道它是一个伪操作，所以我想它在组装时会转换成几条指令。我很感兴趣使用什么确切的指令来实现它。我尝试了很多方法来弄清楚。即：

*   阅读 GAS 源代码。但是没有找到足够有用的东西。
*   阅读 GAS 文档。但`.cfi_remember_state`条目只是一个简单的玩笑（字面意思）。
*   试图找到一个 gcc 开关，它可以让 gcc 从 C 代码生成 asm 并带有“扩展”的伪操作。无法为 x86 / x86-64 找到这样的开关。（如果有人能指出这样的开关，那就太好了，假设它存在，顺便说一句。）
*   Google-fu && 在 SO 上搜索并没有产生任何有用的东西。

在我看来，唯一的其他解决方案是读取组装可执行文件的二进制文件并尝试推断指令。然而，我想避免这样一项艰巨的任务。你们中的任何人，谁知道，可以启发我，它是如何在 x86 和/或 x86-64 上实现的？也许与分享该信息的获取方式/位置一起，以便我可以检查其他伪操作，如果我有需要的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:20:25.907

该指令是 DWARF 信息的一部分（实际上它所做的只是发出 DW_CFA_remember_state 指令）。摘自 DWARF3 标准：

> DW_CFA_remember_state 指令不接受操作数。所需的操作是将每个寄存器的规则集推送到隐式堆栈中。

您可以使用 objdump 处理 DWARF 信息。让我们从简单的 void 汇编文件开始：

```
 .text
.globl main
  .type main, @function
main:
.LFB0:
.cfi_startproc
#.cfi_remember_state
.cfi_endproc
.LFE0:
  .size main, .-main 
```

编译它`gcc cfirem.s -c -o cfirem.o`

现在反汇编生成的 DWARF 部分，`objdump --dwarf cfirem.o` 你会得到：

```
00000018 00000014 0000001c FDE cie=00000000 pc=00000000..00000000
  DW_CFA_nop
  DW_CFA_nop
  ... 
```

如果您取消注释 .cfi_remember_state，您将看到：

```
00000018 00000014 0000001c FDE cie=00000000 pc=00000000..00000000
  DW_CFA_remember_state
  DW_CFA_nop
  DW_CFA_nop
  ... 
```

所以它并没有真正转换成**汇编**指令（试着`objdump -d`看看我们的示例中根本没有汇编指令）。它在 DWARF 伪指令中转换，当 GDB 等调试器处理变量位置、堆栈信息等时使用这些伪指令。

# javascript - 与nodejs中的函数名称相同的var名称

> ID：14582310
> 
> 赞同：0
> 
> 时间：2013-01-29T11:55:27.193
> 
> 标签：javascript, node.js

我对下面的代码有点困惑，我们可以这样在js中创建类吗？

```
module.exports = function testname(paramas){
  testname.test = function(req, res){
  //some code here
  }
  return testname;
} 
```

我们不应该使用 this.test 代替函数 name.test 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:07:34.560

`ClassName.methodname`创建静态成员，同时`this.methodname`创建实例成员

```
function MyClass () {
  this.fn = function () {
    // instance member function
  }
}

MyClass.anotherFn = function () {
  // Static member function
} 
```

如果要创建一些在创建类对象时应封装在类对象中的变量，请使用`this.var`.

但是，如果您希望在同一类的所有实例之间共享数据成员，则使用`ClassName.var`

# exchange-server - Exchange API：获取带有附件内容的项目

> ID：14582316
> 
> 赞同：0
> 
> 时间：2013-01-29T11:55:45.723
> 
> 标签：exchange-server, exchangewebservices, exchange-server-2010

我在约会中添加了附件。但是当我尝试通过 GetItem API 方法预约时，我收到了一个没有 Content 节点的预约。我不想使用 GetAttachment 方法，因为它花费了我对服务器的一个额外请求。我可以通过 GetItem 方法获取附件的内容吗？

```
<t:Attachments>
  <t:FileAttachment>
    <t:AttachmentId Id="AAMkADMzZjU2NjIwLWUzOWItNDFlZC1hNDY5LTIwNTVlODdjM2E4YwBGAAAAAAD3/WwqN7V6Saz7jIDwyy6pBwB0enfRGC/+T5l033DSyikwAAAA5OxPAAB0enfRGC/+T5l033DSyikwAAAA5RW8AAABEgAQAMWyPz5NHRZAmn0OqOSsLew=" /> 
    <t:Name>Attachment.xml</t:Name> 
    <t:ContentType>text/xml</t:ContentType> 
    <t:Size>125</t:Size> 
    <t:LastModifiedTime>2013-01-29T08:40:48</t:LastModifiedTime> 
    <t:IsInline>false</t:IsInline> 
    <t:IsContactPhoto>false</t:IsContactPhoto> 
    <t:ContentId /> 
  </t:FileAttachment>
</t:Attachments> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:17:25.757

那里[http://msdn.microsoft.com/en-us/library/exchange/aa565934(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa565934(v=exchg.80).aspx)我发现了这样的信息：

> GetItem 操作不返回附件。它确实返回有关附加项目或文件的元数据。要返回附件，请使用 GetAttachment 操作。

问题已关闭。

# entity-framework - Mono 3.0.3 上带有 EF6 的 NullReferenceException

> ID：14582318
> 
> 赞同：0
> 
> 时间：2013-01-29T11:55:50.790
> 
> 标签：entity-framework, mono, entity-framework-6

我正在尝试将现有的实体框架项目迁移到 Mono 并发现了一个奇怪的错误：当请求被执行并且 EF 加载模型模式时，它会在 Mono 下抛出，尽管在 .Net 下使用 EF6 Alpha 2 它可以工作。以下是一个例外：

```
at System.Xml.XmlReader.CalcBufferSize(Stream input)
at System.Xml.XmlTextReaderImpl.InitStreamInput(Uri baseUri, String baseUriStr, Stream stream, Byte[] bytes, Int32 byteCount, Encoding encoding)
at System.Xml.XmlTextReaderImpl..ctor(String url, Stream input, XmlNameTable nt)
at System.Xml.XmlTextReader..ctor(Stream input)
at System.Xml.Schema.XmlSchema.Read(Stream stream, ValidationEventHandler validationEventHandler)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.AddXmlSchemaToSet(XmlSchemaSet schemaSet, XmlSchemaResource schemaResource, HashSet`1 schemasAlreadyAdded)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.AddXmlSchemaToSet(XmlSchemaSet schemaSet, XmlSchemaResource schemaResource, HashSet`1 schemasAlreadyAdded)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.ComputeSchemaSet(SchemaDataModelOption dataModel)
at System.Data.Entity.Core.Common.Utils.Memoizer`2.<Evaluate>c__AnonStorey106.<>m__100()
at System.Data.Entity.Core.Common.Utils.Memoizer`2.Result.GetValue()
at System.Data.Entity.Core.Common.Utils.Memoizer`2.Evaluate(TArg arg)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.SomSchemaSetHelper.GetSchemaSet(SchemaDataModelOption dataModel)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.CreateXmlReaderSettings()
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.Schema.Parse(XmlReader sourceReader, String sourceLocation)
at System.Data.Entity.Core.EntityModel.SchemaObjectModel.SchemaManager.ParseAndValidate(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, SchemaDataModelOption dataModel, AttributeValueNotification providerNotification, AttributeValueNotification providerManifestTokenNotification, ProviderManifestNeeded providerManifestNeeded, IList`1& schemaCollection)
at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths)
at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection.Loader..ctor(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, Boolean throwOnError)
at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest& providerManifest, DbProviderFactory& providerFactory, String& providerManifestToken, Memoizer`2& cachedCTypeFunction)
at System.Data.Entity.Core.Metadata.Edm.StoreItemCollection..ctor(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths)
at System.Data.Entity.Core.Metadata.Edm.MetadataCache.StoreMetadataEntry.LoadStoreCollection(EdmItemCollection edmItemCollection, MetadataArtifactLoader loader)
at System.Data.Entity.Core.Metadata.Edm.MetadataCache.StoreItemCollectionLoader.LoadItemCollection(StoreMetadataEntry entry)
at System.Data.Entity.Core.Metadata.Edm.MetadataCache.LoadItemCollection[T](IItemCollectionLoader`1 itemCollectionLoader, T entry)
at System.Data.Entity.Core.Metadata.Edm.MetadataCache.GetOrCreateStoreAndMappingItemCollections(String cacheKey, MetadataArtifactLoader loader, EdmItemCollection edmItemCollection, Object& entryToken)
at System.Data.Entity.Core.EntityClient.EntityConnection.LoadStoreItemCollections(MetadataWorkspace workspace, DbConnection storeConnection, DbConnectionOptions connectionOptions, EdmItemCollection edmItemCollection, MetadataArtifactLoader artifactLoader)
at System.Data.Entity.Core.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections)
at System.Data.Entity.Core.EntityClient.EntityConnection.GetMetadataWorkspace()
at System.Data.Entity.Core.EntityClient.EntityConnection.InitializeMetadata(DbConnection newConnection, DbConnection originalConnection, Boolean closeOriginalConnectionOnFailure)
at System.Data.Entity.Core.EntityClient.EntityConnection.Open()
at System.Data.Entity.Core.Objects.ObjectContext.EnsureConnection()
at System.Data.Entity.Core.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Entity.Core.Objects.ObjectQuery`1.<GetEnumerator>m__2C3()
at System.Lazy`1.CreateValue()
at System.Lazy`1.LazyInitValue()
at System.Lazy`1.get_Value()
at System.Data.Entity.Internal.LazyEnumerator`1.MoveNext()
at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
at System.Data.Entity.Core.Objects.ELinq.ObjectQueryProvider.<GetElementFunction`1>m__29A[TResult](IEnumerable`1 sequence)
at System.Data.Entity.Core.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
at System.Data.Entity.Core.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) 
```

我猜它无法加载元数据或类似的东西，至少当 XmlDocument 和 XmlSchema 不检查输入流是否为空时，最重要的行看起来就像 XmlDocument 和 XmlSchema 的已知行为。我尝试使用元数据文件而不是嵌入式资源，但没有帮助。

我会尝试挖掘资源，但如果有人已经知道发生了什么，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:12:06.177

您正在运行非常不寻常的配置，由 Mono 编译的 EF 和来自 .NET Framework 的 System.XML。如果 System.XML 可以处理架构的位置，这本身应该可以工作，但这不是常见的配置。

我会检查架构是如何嵌入到您的程序集中的，以及是否使用相同的命名空间。

# excel - 在屏幕上显示有错误的单元格

> ID：14582320
> 
> 赞同：0
> 
> 时间：2013-01-29T11:55:53.813
> 
> 标签：excel, excel-formula, vba

我有一个错误处理程序设置，允许用户在宏检测到错误时更新不正确的数据。问题是宏正在检查大量数据，而用户看不到我要求他们更新的有问题的单元格。我可以在这个错误处理程序中添加什么以允许用户在将正确结果输入输入框之前看到屏幕上的单元格？谢谢。

```
ErrPrice:
rngEachValue.value = InputBox ("Input correct Price here") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:59:08.713

您可以使用以下命令突出显示单元格：

```
rngEachValue.Activate

```

这样，单元格将被选中并被包围。或者，如果您`rngEachValue.Copy`之后使用，您甚至会看到“移动”选择...

# c - 防止嵌套调用

> ID：14582327
> 
> 赞同：3
> 
> 时间：2013-01-29T11:56:19.343
> 
> 标签：c, embedded, interrupt, c99

我有一个禁用中断的功能，但问题是如果我禁用它们并调用一个也禁用/启用它们的函数，它们会过早重新启用。以下逻辑是否足以防止这种情况发生？

```
static volatile int IrqCounter = 0;

void EnableIRQ()
{
    if(IrqCounter > 0)
    {
        IrqCounter--;
    }

    if(IrqCounter == 0)
    {
        __enable_irq();
    }
}

void DisableIRQ()
{
    if(IrqCounter == 0)
    {
        __disable_irq();
    }

    IrqCounter++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:45:47.603

我所知道的每个操作系统的做法是将 IRQ 状态保存到局部变量中，然后恢复它。

显然，您的代码存在[TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)问题 - 如果两个线程同时运行，检查 IrqCounter > 0，如果 IrqCounter == 1，则第一个线程将其视为 1，第二个线程将其视为 1，并且两者都递减柜台。

我肯定会尝试安排这样的事情：

```
int irq_state = irq_save();

irq_disable();

... do stuff with IRQ's turned off ... 

irq_restore(irq_state); 
```

现在，您不必担心计数器会不同步等问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:40:32.907

假设您有一个在禁用中断时无法更改上下文的系统，那么您所拥有的一切都很好，假设您仔细跟踪何时调用 enable()。

在您在下面的评论中描述的用法中，您计划在中断服务例程中使用这些部分。您的主要用途是阻止更高优先级的中断在 ISR 的某个部分运行。

请注意，您必须考虑这些嵌套 ISR 的堆栈深度，因为当您在从中断返回之前启用中断时，您将在 ISR 中启用中断。

关于其他答案： enable() 缺乏线程安全性（由于`if(IrqCounter > 0)`）并不重要，因为任何时候你在 enable() 上下文切换已经被禁用，因为中断被关闭。（除非由于某种原因您有无与伦比的禁用/启用对，并且在这种情况下您还有其他问题。）

我唯一的建议是将 ASSERT 添加到启用而不是运行时检查，因为您永远不应该启用未禁用的中断。

```
void EnableIRQ()
{
  ASSERT(IrqCounter != 0)  //should never be 0, or we'd have an unmatched enable/disable pair

  IrqCounter--;  //doesn't matter that this isn't thread safe, as the enable is always called with interrupts disabled.

  if(IrqCounter == 0)
  {
      __enable_irq();
  }
} 
```

我更喜欢您列出的`save(); disable(); restore();`技术而不是技术，因为我不喜欢每次处理中断时都必须跟踪操作系统的一段数据。但是，您必须注意何时（直接或间接）从 ISR 调用 enable()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:21:09.263

看起来不错，只是它不是线程安全的。

另一个常见的选项是查询中断启用/禁用状态并将其保存到局部变量中，然后禁用中断，然后在禁用中断时执行任何您想做的事情，然后从局部变量中恢复状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-15T17:58:41.720

```
static volatile int IrqCounter = 0;

void EnableIRQ(void)
{
    ASSERT(IrqCounter != 0)  //should never be 0, or we'd have an unmatched enable/disable pair

    if (IrqCounter > 0)
    {
        IrqCounter--;
    }

    if (IrqCounter == 0)
    {
        __enable_irq();
    }
}

void DisableIRQ(void)
{
    __disable_irq(); // Fix TOCTOU issues. In CMSIS there is no harm in extra disables, so always disable.
    IrqCounter++;
} 
```

# sharepoint-2010 - 从站点级别权限覆盖 Web 应用程序权限

> ID：14582329
> 
> 赞同：0
> 
> 时间：2013-01-29T11:56:34.927
> 
> 标签：sharepoint-2010, sharepointadmin

我遇到了权限问题。

任何用户都可以在我的网站上注册。注册用户只能查看站点中的所有页面（站点页面库）。他们不应查看所有内容或打开任何其他列表。

所以我拒绝了来自centraladmin-> webapp-> 权限策略的“查看应用程序页面”

一切进行得都很顺利。

现在我有另一个要求，

我想从站点级别为某些用户授予“创建页面权限”。所以我所做的是，我创建了一个名为“Creators”的共享点组，并授予添加列表项权限和查看列表项权限。

现在“创作者”用户无法查看列表项和“查看所有网站内容”选项。因为我在许可政策中否认了这一点。

如何从我的站点覆盖 web 应用程序级别策略。或者针对此要求的任何其他替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:14:22.883

您可以隐藏不想向其显示查看所有站点内容链接的组的所有站点内容链接。

尝试这个..

[http://www.apps4rent.com/support/kb/article/remove-view-all-site-content-sharepoint](http://www.apps4rent.com/support/kb/article/remove-view-all-site-content-sharepoint)

如果我误解了您的要求，请纠正我

# xamarin.android - 运行 NunitLite 测试时访问当前活动

> ID：14582330
> 
> 赞同：0
> 
> 时间：2013-01-29T11:56:37.043
> 
> 标签：xamarin.android

我有一个 ISettings 接口，它在 Mono For Android 和 iOS 上以特定于平台的方式实现。对于 Mono For Android，我使用 Activity.GetSharedPreferences 来实现我的设置 - 这在我的应用程序中运行良好。

但是，我希望能够使用 NunitLite 进行测试（我正在成功地使用它来测试我的其他核心代码）。

问题是对于我的测试夹具，我需要一个 Activity 来调用 GetSharedPreferences。有没有一种方法可以一般地或通过 NunitLite 实现访问当前正在运行的 Activity？

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:51:38.470

您可以通过以下方式访问共享首选项：

```
Application.Context.GetSharedPreferences("whatever", FileCreationMode.Private) 
```

你不需要活动。

# http - 如何创建不带引号的 cookie？

> ID：14582334
> 
> 赞同：4
> 
> 时间：2013-01-29T11:56:42.950
> 
> 标签：http, servlets, cookies, quotes

我需要以电子邮件地址为值创建 cookie - 但是当我尝试时 - 然后我得到了结果：

“某人@example.com”

但我想拥有：

某人@example.com

创建 cookie 时应不带双引号 - 因为其他应用程序以这种格式使用它。如何强制java不添加双引号？Java 添加它们是因为有特殊的字符“at”。

我以这种方式创建cookie：

```
 HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
    Cookie cookie = new Cookie("login", "someone@example.com");
    cookie.setMaxAge(2592000);
    cookie.setDomain("domain.com");
    cookie.setVersion(1);
    response.addCookie(cookie); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T11:59:49.337

`@`确实是符号引起的。这在版本 0 cookie 中是[不允许的。](http://docs.oracle.com/javaee/7/api/javax/servlet/http/Cookie.html#setValue-java.lang.String-)容器将隐式强制它成为版本 1 cookie（在 MSIE 浏览器中中断）。您想在创建 cookie 时对 cookie 值进行[URL 编码](http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html)

```
Cookie cookie = new Cookie("login", URLEncoder.encode("someone@example.com", "UTF-8"));
cookie.setMaxAge(2592000);
cookie.setDomain("domain.com");
response.addCookie(cookie); 
```

并在读取 cookie 时对其进行[URL 解码](http://docs.oracle.com/javase/8/docs/api/java/net/URLDecoder.html)

```
String value = URLDecoder.decode(cookie.getValue(), "UTF-8"); 
```

请注意，您不应该明确地将 cookie 版本设置为 1。

### 也可以看看：

*   [为什么带有空格的 cookie 值带有引号到达客户端？](https://stackoverflow.com/questions/572482/why-do-cookie-values-with-whitespace-arrive-at-the-client-side-with-quotes/7233959#7233959)

* * *

**与具体问题无关**，最终用户或中间人可以看到和操作 cookie。在 cookie 中携带电子邮件地址是一种难闻的气味。如果最终用户将其更改为不同的地址怎么办？无论您想通过在 cookie 中携带电子邮件地址来解决什么功能要求（记住登录名？），都应该以不同的方式解决。

### 也可以看看：

*   [如何让用户在我的网站上登录数月？](https://stackoverflow.com/questions/2185951/java-how-do-i-keep-a-user-logged-into-my-site-for-months/2186072#2186072)

# actionscript-3 - 如何在android上停止/暂停地理定位

> ID：14582338
> 
> 赞同：1
> 
> 时间：2013-01-29T11:56:55.800
> 
> 标签：actionscript-3, apache-flex, flash-builder4.5

我正在尝试使用 flashbuilder 4.6 并正在使用我在网上找到的这个简单/准系统的地理定位代码进行一些测试，因为我试图了解更多关于它以及如何使用它的信息......

我很想知道的一件事是如何停止/中断地理定位程序，以便它停止轮询位置并等待用户“启动”地理定位。

如果我使用 clearInterval(interval); 我猜这可以停止循环——但 geo2 继续存在并使用设备资源，对吗？例如，使用 slideToggle 控制它的代码会是什么样子？

地理定位代码片段我正在试验......

```
private function onMapReady(e:Event):void
        {
            if (Geolocation.isSupported)
            {
                var geo = new Geolocation();
                geo.setRequestedUpdateInterval(100);
                geo.addEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler);
            }
                else
                {
                    trace("No geolocation support.");
                }   
        }

        private function geolocationUpdateHandler(event:GeolocationEvent):void
        {
            trace("lat:" + event.latitude.toString() + " - ");
            trace("long:" + event.longitude.toString() + "° - ");
            trace("Accuracy:" + event.horizontalAccuracy.toString() + " m");

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:39:36.250

如果您想停止对轮询更新做出反应，只需删除侦听器：

```
geo.removeEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler); 
```

如果您想完全关闭轮询，只需将其取消：

```
geo = null; 
```

（并确保您也首先删除任何听众）

# java - Mockito 如何使用输出参数模拟 void 方法？

> ID：14582339
> 
> 赞同：12
> 
> 时间：2013-01-29T11:56:56.080
> 
> 标签：java, mockito

我有一个通知参数的无效方法“functionVoid”。

```
public class MyMotherClass {
 @Inject
 MyClass2 myClass2

 public String motherFunction(){
  ....
  String test = "";
  myClass2.functionVoid(test);

  if (test.equals("")) {
      IllegalArgumentException ile = new IllegalArgumentException(
      "Argument is not valid");
      logger.throwing(ile);
      throw ile;
  }
  ....
 }
}

public class MyClass2 {

public void functionVoid(String output_value)
{ ....
 output_value = "test";

 ....
 }
} 
```

如何在我的方法“motherFunction”的 JUnit 方法中模拟此方法？在我的示例中，“test”变量仍然为空。

```
@RunWith(MockitoJUnitRunner.class)
public class MyMotherClassTest {

 @Mock
 private MyClass2 myClass2 ;

 @InjectMock
 private final MyMotherClass myMotherClass = new MyMotherClass ();

 @Test
 public void test(){

  myMotherClass.motherFunction();     

 }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T12:24:42.017

如果你想模拟`motherFunction`then 的返回结果，你不必担心方法的内部实现（最终调用`functionVoid`）。您需要做的是向*Mockito*提供有关在调用该方法时要做什么的指令`motherFunction`，这可以通过带有语法的*when*子句来实现；

```
 when(mockedObject.motherFunction()).thenReturn("Any old string"); 
```

如果这错过了您尝试实现的目标，那么请查看[如何](https://stackoverflow.com/questions/2276271/how-to-make-mock-to-void-methods-with-mockito)在文档中模拟 void 方法并确定在`doAnswer`此处使用 是否适用，例如；

```
doAnswer(new Answer<Void>() {

  @Override
  public Void answer(InvocationOnMock invocation) throws Throwable {
    String output_value = invocation.getArguments()[0];
    output_value = "Not blank";
    return null;
  }
}).when(myClass2).functionVoid(anyString()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-23T03:17:58.390

如果您可以更改 functionVoid() 以接受可变对象作为参数，那么您应该能够实现您想要的。

例如，如果您更改 functionVoid() 如下：

```
public void functionVoid(StringBuilder output_value)
{ ....
 output_value.append("test");

 ....
 } 
```

并在你的 MotherFunction 中调用它，如下所示：

```
public String motherFunction(){
  ....
  StringBuilder test = new StringBuilder();
  myClass2.functionVoid(test);

  if (test.toString().equals("")) { 
```

现在修改 OceanLife 上面的答案，您应该能够执行以下操作：

```
doAnswer(new Answer<Void>() {

  @Override
  public Void answer(InvocationOnMock invocation) throws Throwable {
    StringBuilder output_value = invocation.getArguments()[0];
    output_value.append("Not blank");
    return null;
  }
}).when(myClass2).functionVoid(any(StringBuilder.class)); 
```

当然，如果你可以改变functionVoid()，你也可以让它返回一个String而不是void。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T20:43:37.500

> 在我的示例中，“test”变量仍然为空。

这不是 Mockito 问题。

看看这个[问题](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)，尤其是[这个答案](https://stackoverflow.com/a/40523/187206)。

它的要点是 Java 是按值传递的（在上面的链接中对此进行了更好的解释）。`test`在 Mockito 或 Java 中，除了空字符串之外，没有任何东西能够使var 成为任何东西。方法调用前为空字符串，调用后为空字符串。

您可以在方法中更改对象的状态（例如，在方法中将对象添加到集合中）并在退出方法时查看这些更改，但您无法更改 var 在方法中引用的对象并期望这些更改“坚持”一旦你退出该方法。然而，字符串实际上是不可变的（没有状态可以改变），所以你甚至不能这样做。

`test`因此，不能在该方法调用中进行任何修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T09:09:08.480

如果你想检查对象 Obj 的方法 someMethod(String arg) 那么：

```
String argument = "";
Mockito.verify(Obj, Mockito.times(1)).someMethod(argument); 
```

Obj 必须是 Mock 或 Spy。当您要检查是否将正确的参数传递给 void 方法时，此方法有效。

如果您的方法以某种方式修改了参数，那么您应该使用更改字符串的断言： someMethod(StringWrapper wrapper)。

```
// given
String argument = "a";
String expected = "a_changed";
String wrapped = new StringWrapper(a);

// when
someMethod(wrapped);

// then
Assert.assertEquals(wrapped.getString(), expected) 
```

我不确定这是否是您要找的？

# sharepoint - 在特定文件夹 sharepoint 2010 中禁用版本控制

> ID：14582341
> 
> 赞同：1
> 
> 时间：2013-01-29T11:56:59.737
> 
> 标签：sharepoint, version-control, sharepoint-2010

是否可以在激活库版本控制的文件夹中禁用版本控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:43:22.523

不，正如 Flowerking 所说，版本控制是 Sharepoint library 的一项功能，因此您可以为整个库启用/禁用它。

另一件事是文件夹不能进行版本控制，但其中的可用内容将根据库版本设置进行版本设置

[Sharepoint 文档库可以支持文件夹版本控制吗？](https://stackoverflow.com/questions/2764450/can-sharepoint-document-library-support-folder-versioning)

希望这可以帮助

# java - 杰克逊：数组中缺少@JsonTypeInfo

> ID：14582343
> 
> 赞同：6
> 
> 时间：2013-01-29T11:57:10.447
> 
> 标签：java, json, serialization, jackson

我发现杰克逊 JSON 处理器库的一些奇怪行为，我很好奇这是故意的还是错误的。请看下面的代码：

```
@JsonTypeInfo(use = Id.NAME)
public class Nut {} 
```

…</p>

```
ObjectMapper mapper = new ObjectMapper();

Nut nut = new Nut();
Object object = new Nut();
Nut[] nuts = new Nut[] { new Nut() };
Object[] objects = new Object[] { new Nut() };

System.out.println(mapper.writeValueAsString(nut));
System.out.println(mapper.writeValueAsString(object));
System.out.println(mapper.writeValueAsString(nuts));
System.out.println(mapper.writeValueAsString(objects)); 
```

输出：

```
{"@type":"Nut"}
{"@type":"Nut"}
[{"@type":"Nut"}]
[{}] 
```

我期望（和想要）的是以下内容：

```
{"@type":"Nut"}
{"@type":"Nut"}
[{"@type":"Nut"}]
[{"@type":"Nut"}] // <<< type information included 
```

我错过了什么还是应该提交错误报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:20:07.243

这是预期的行为。在遍历对象图进行序列化时，Jackson在确定要包含的类型信息时使用对象的*声明类型。*中的元素`objects`声明了 Object 类型，您没有告诉 Jackson 为其包含任何类型信息。

Jackson 只查看顶级参数的运行时类型`writeValueAsString`，因为方法参数具有类型`Object`；在 Java 中不可能知道作为参数传递给方法的对象的声明类型（即使使用泛型，由于类型擦除），所以你的前两个示例（`writeValueAsString(nut)`并且`writeValueAsString(object)`实际上是相同的）。

更多信息在这里：http: [//jackson-users.ning.com/forum/topics/mapper-not-include-type-in​​formation -when-serializing-object-why](http://jackson-users.ning.com/forum/topics/mapper-not-include-type-information-when-serializing-object-why)

# .htaccess - 通过屏蔽 url 重定向到另一个站点

> ID：14582346
> 
> 赞同：0
> 
> 时间：2013-01-29T11:57:16.673
> 
> 标签：.htaccess, masking

我想将所有进入 www.siteA.com/folder1 的用户重定向到 www.siteB.com/folder。但是即使在重定向到 www.siteB.com 之后，用户也应该在地址 bas 中看到 www.siteA.com/folder1。

我不知道如何使用 .htaccess 来做这件事有人可以帮我如何屏蔽 url。我真的需要你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:02:27.083

`P`您可以通过标志“强制替换 URL 作为代理请求在内部发送” 。

```
RewriteRule ^folder1(.*) http://www.siteB.com/folder$1 [P] 
```

[RewriteRule](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)的文档中还有一些其他示例。

~~如果这不起作用（例如，无法访问服务器配置并且代理模块被禁用），您可能最好使用[PHProxy](http://sourceforge.net/projects/phpr0xi)之类的代理脚本。~~

再看一遍，我认为 PHProxy 并不是您真正需要的。也许试试这个：[http](http://code.google.com/p/php-proxy/) ://code.google.com/p/php-proxy/ - 安装说明看起来很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:59:37.573

您想使用代理。在 Apache 上，[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)应该可以满足您的需求。

请记住，您的服务器将占用两倍的带宽。一次从源服务器获取数据，然后再次将其发送到客户端。

# javascript - 如何从框架窗口中获取框架集？

> ID：14582348
> 
> 赞同：2
> 
> 时间：2013-01-29T11:57:29.107
> 
> 标签：javascript, jquery, html, dom, frames

考虑以下代码：

```
function hide(aFrame) {
    var frameset = aFrame.frameset; //<-- this doesn't work
    $(frameset).attr('cols', '0,*');
}

//hide parent frame
hide(window.parent);

//hide current frame
hide(window); 
```

我有一个需要一个框架的函数，我想通过更改`cols`其框架集来隐藏它。jQuery 可以用来回答这个问题（但纯 JavaScript 解决方案也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:00:22.647

诀窍似乎是查询父文档：

```
function hide(aFrame) {
    var frameset = aFrame.parent.document.getElementsByTagName('frameset');
    $(frameset).attr('cols', '0,*');
} 
```

# java - 如何在 java 中使用 bitbucket API 和 singpost 创建问题

> ID：14582350
> 
> 赞同：3
> 
> 时间：2013-01-29T11:57:30.587
> 
> 标签：java, signpost

我正在尝试在 bibucket 上创建新问题，但我不知道如何使用 http。我尝试了很多东西，但它仍然不起作用。这是我的尝试之一：

```
URL url = new URL("https://api.bitbucket.org/1.0/repositories/" 
        + accountname + "/" + repo_slug + "/issues/"
        + "?title=test&content=testtest");

HttpsURLConnection request = (HttpsURLConnection) url.openConnection();       
request.setRequestMethod("POST");
consumer.sign(request);
request.connect(); 
```

我对 GET 请求没有问题。但是在这里我不知道如何发送参数并签署消息。

这是 API [https://confluence.atlassian.com/display/BITBUCKET/issues+Resource#issuesResource-POSTanewissue的文档](https://confluence.atlassian.com/display/BITBUCKET/issues+Resource#issuesResource-POSTanewissue)

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:33:15.313

最后我想通了。参数不是 URL 的一部分，但如果您使用流，则无法对其进行签名。

解决方案是使用 Apache HttpComponents 库并添加如下代码中的参数：

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("https://api.bitbucket.org/1.0/repositories/"
            + accountname + "/" + repo_slug + "/issues/");
    List<NameValuePair> nvps = new ArrayList<NameValuePair>();
    nvps.add(new BasicNameValuePair("title", "test"));
    nvps.add(new BasicNameValuePair("content", "testtest"));
    httpPost.setEntity(new UrlEncodedFormEntity(nvps));
    consumer.sign(httpPost); 
    HttpResponse response2 = httpclient.execute(httpPost);

    try {
        System.out.println(response2.getStatusLine());
        HttpEntity entity2 = response2.getEntity();
        // do something useful with the response body
        // and ensure it is fully consumed
        EntityUtils.consume(entity2);
    } finally {
        httpPost.releaseConnection();
    }

} 
```

但是您必须使用 CommonsHttpOAuthConsumer，它位于 commonshttp 的特殊路标库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:50:25.183

我已经看到您已经解决了，但是[这里](https://confluence.atlassian.com/display/BITBUCKET/OAuth+on+Bitbucket)说您需要使用 OAuth 进行身份验证，并且在您链接的页面中，您需要进行身份验证才能创建新问题。它还链接到此[页面](http://oauth.net/code/)以获取多种语言的 OAuth 实施。我将它发布为知识。

# bash - 重击'。与正确的目录字符串

> ID：14582359
> 
> 赞同：2
> 
> 时间：2013-01-29T11:58:07.597
> 
> 标签：bash

我一直在运行许多查找命令，并注意到 bash 如何处理`.`作为字符串输入的 vs 目录似乎有些奇怪。

```
find . -type f -exec sh -c 'cd $(dirname "$0") && aunpack "$0"' {} \; 
```

行为完全不同

```
find [current dir] -type f -exec sh -c 'cd $(dirname "$0") && aunpack "$0"' {} \; 
```

是什么赋予了？

bash 是否对待 '.' 和一个字符串指定的目录路径不同。不是'。替代当前目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T12:10:52.933

什么`find`是将路径的其余部分附加到作为参数传递的位置。

即：如果您在目录“/home/user/find”中：

```
find . 
```

印刷：

```
.
./a
./b 
```

但如果你尝试：

```
find /home/user/find 
```

它打印：

```
/home/user/find
/home/user/find/a
/home/user/find/b 
```

因此`find`，将路径的其余部分（/a、/b...）附加到参数（. 或 /home/user/find）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:04:21.790

您可以使用该`pwd`命令代替 the `.`，它的行为将相同。

```
find "`pwd`"  -type f -exec sh -c 'cd $(dirname "$0") && aunpack "$0"' {} \; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T18:29:27.460

@arutaku has pinpointed the source of the problem; let me point out another possible solution. If your version of `find` supports it, the `-execdir` primary does what you want very simply: it cd's to the directory each file is in, then executes the command with just the filename (no path):

```
find . -type f -execdir aunpack {} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T12:11:28.127

Bash 与它无关，这是`find`. 它不会尝试扩展或规范化*您*给出的路径，它只是逐字使用它们：不仅适用`.`于任何路径规范（例如`../../my/other/project`），而且适用于任何路径规范。

我认为这是合理的，因为任何转换都会比当前行为更复杂。至少我们必须记住在转换过程中是否解析了符号链接。每当我们出于某种原因*想要*一条相对路径时，我们都必须再次将其相对化。

# java - 通过 netbeans 启动 android 应用程序

> ID：14582360
> 
> 赞同：1
> 
> 时间：2013-01-29T11:58:08.020
> 
> 标签：java, android

再会。我在模拟器中启动程序时遇到问题。有一个代码：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

TextView tv = new TextView(this);
tv.setText("Hello, Android");
setContentView(tv); 
```

程序构建成功，但之后出现异常

```
java.lang.NullPointerException
at java.util.Arrays$ArrayList.<init>(Arrays.java:2842)
at java.util.Arrays.asList(Arrays.java:2828)
at com.sun.org.apache.xerces.internal.util.ParserConfigurationSettings.addRecognizedFeatures(ParserConfigurationSettings.java:115)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.<init>(SAXParserImpl.java:189)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl.newSAXParser(SAXParserFactoryImpl.java:81)
at com.android.sdklib.devices.DeviceParser.getParser(DeviceParser.java:371)
at com.android.sdklib.devices.DeviceParser.parse(DeviceParser.java:355)
at com.android.sdklib.devices.DeviceManager.loadDevices(DeviceManager.java:419)
at com.android.sdklib.devices.DeviceManager.getVendorDevices(DeviceManager.java:215)
at com.android.sdklib.devices.DeviceManager.getDevices(DeviceManager.java:167)
at com.android.sdklib.devices.DeviceManager.getDevice(DeviceManager.java:147)
at com.android.sdklib.devices.DeviceManager.getDeviceStatus(DeviceManager.java:136)
at com.android.sdklib.internal.avd.AvdManager.parseAvdInfo(AvdManager.java:1413)
at com.android.sdklib.internal.avd.AvdManager.buildAvdList(AvdManager.java:1325)
at com.android.sdklib.internal.avd.AvdManager.<init>(AvdManager.java:286)
at com.android.sdklib.internal.avd.AvdManager.getInstance(AvdManager.java:296)
at org.netbeans.modules.android.project.launch.AndroidLauncherImpl.configAvd(AndroidLauncherImpl.java:130)
at org.netbeans.modules.android.project.launch.AndroidLauncherImpl.launch(AndroidLauncherImpl.java:79)
at org.netbeans.modules.android.project.LaunchExecutor$1.taskFinished(LaunchExecutor.java:92)
at org.openide.util.Task.notifyFinished(Task.java:236)
at org.openide.util.Task.run(Task.java:256)
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1452) [catch] at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:2032) 
```

你能帮我解决这个问题吗？谢谢。

PS Emulator 可以通过 AVD 管理器启动，但不能通过 Netbeans 启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:06:58.663

[这里](http://netbeans.org/bugzilla/show_bug.cgi?id=223258)有一个错误报告，评论中有一个*解决方法*：

> 解决。我安装了 Java 1.7u11 Rel 1.7.0_11，现在模拟器启动良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T12:04:39.137

你的事情有点不正常。您在创建布局项目之前抓取它们。

从：

```
setContentView(R.layout.main);
TextView tv = new TextView(this);
tv.setText("Hello, Android");
setContentView(tv); 
```

到：

```
setContentView(R.layout.main);
setContentView(tv);
TextView tv = new TextView(this);
tv.setText("Hello, Android"); 
```

# c# - 从 DB View 读取数据

> ID：14582362
> 
> 赞同：0
> 
> 时间：2013-01-29T11:58:12.023
> 
> 标签：c#, asp.net-mvc, entity-framework, dbcontext

我是 asp.net MVC 的新手。我想从数据库视图中检索数据并将其映射到我的模型。模型类具有与视图相同的一组属性。有没有一种方法可以让我从数据库视图而不是表中获取数据（由于代码优先，表会自动创建）。

我的模型如下所示：

```
public class Product{

    public long ID { get; set; }

    [Display(Name = "Product Code")]
    public int ProductCode { get; set; }

    [Display(Name = "Product Title")]
    public string ProductTitle { get; set; }
};

public class ProductDBContext : DbContext
{
    public DbSet<Product> Products 
    { 
        get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:06:49.763

你在用 dbml 吗？将你的 dbo.View 拖到 dbml 中，像使用表一样使用，但不能添加和更新。

```
public class ProductDBContext : DbContext
{
    public ProductDBContext ()
        : base("MyConnection") //web.config
    {
    }

    public DbSet<Product> Products { get; set; }
}

// Your View:
// CREATE VIEW dbo.Product
// AS
// SELECT dbo.ProductProfile.ID, dbo.ProductProfile.ProductCode, dbo.ProductTitle.ProfileID, dbo.ProductTitle.ProductTitle 
// FROM   dbo.ProductProfile INNER JOIN
//          dbo.ProductTitle ON dbo.ProductProfile.ID = dbo.ProductTitle.ProfileID
//
[Table("dbo.Product")]  
public class Product
{
    [Key]
    public long ID { get; set; }

    [Display(Name = "Product Code")]
    public int ProductCode { get; set; }

    [Display(Name = "Product Title")]
    public string ProductTitle { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:57:14.833

您当然可以使用 Code First 映射到视图，只需告诉 Code First 它是一个表，并且它将对视图使用与表相同的 SQL。显然，如果您尝试更新该实体，如果视图不可更新，您将收到异常。

希望这可以帮助。

# php - 如何在wordpress的主页上获取和显示标签的特定帖子

> ID：14582363
> 
> 赞同：0
> 
> 时间：2013-01-29T11:58:14.033
> 
> 标签：php, wordpress

我正在尝试以标签的特色列表样式获取并显示所有帖子`my-guide`

```
<?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>
    <div class="post" id="post-<?php the_ID(); ?>">
    <div class="thumbnail">
    <a href="<?php the_permalink(); ?>">
    <?php the_post_thumbnail(); ?>
    </a>
    </div>
    <?php endwhile; ?>
    <?php endif; ?> 
```

此代码从帖子中获取所有特色图片，但是我试图通过特定标签获取它，我也尝试过，但它不适用于标签 `query_posts('tag=my-guide');`-

```
 <?php query_posts('tag=my-guide'); 
  while (have_posts()) : the_post();  
?>  
<div class="breaking">  
    <img src="<?php echo get_post_meta($post->ID, 'thumbnail',true) ?>" alt="Post Image" class="postimg" />  
    <h2><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>  
    <p class="datetime"><?php the_time('l, F j, Y G:i'); ?></p>  
    <?php the_content('Continue...'); ?>  
    <div class="postmeta">  
        <p><?php the_category(', '); ?> - <a href="<?php the_permalink() ?>#commenting" title="View Comments">  
    <span class="comm"><?php comments_number('0 Comments','1 Comment','% Comments'); ?></span></a></p>  
    </div><!--/postmeta-->  
</div><!--/breaking-->  
<?php endwhile; ?> 
```

这个来源-> [http://net.tutsplus.com/tutorials/wordpress/build-a-featured-posts-section-for-wordpress/](http://net.tutsplus.com/tutorials/wordpress/build-a-featured-posts-section-for-wordpress/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:25:26.613

我自己修复了代码 -

第二个代码块的问题在于，没有为此投入任何价值 -`$post->ID`

所以这个方法调用在代码中没有任何好处 -

```
<?php echo get_post_meta($post->ID, 'thumbnail',true) ?> 
```

要解决此问题，只需调用，`<?php the_post_thumbnail(); ?>`而不是`<img src="<?php echo get_post_meta($post->ID, 'thumbnail',true) ?>" alt="Post Image" class="postimg" />`

所以这是`general`特定标签帖子显示的工作代码 -

```
<?php query_posts('tag=your-tag'); ?>
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div class="thumbnail">  
        <?php the_post_thumbnail(); ?>
        <h2><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>  
        <p class="datetime"><?php the_time('l, F j, Y G:i'); ?></p>  
        <?php the_content('Continue...'); ?>  
        <div class="postmeta">  
            <p><?php the_category(', '); ?> - <a href="<?php the_permalink() ?>#commenting" title="View Comments">  
        <span class="comm"><?php comments_number('0 Comments','1 Comment','% Comments'); ?></span></a></p>  
        </div>
    </div>  
<?php endwhile; endif; ?> 
```

# iphone - 自定义表格单元格的uitextfield

> ID：14582364
> 
> 赞同：1
> 
> 时间：2013-01-29T11:58:14.550
> 
> 标签：iphone, ios, uitableview, uitextfield, custom-cell

我正在创建一个包含三种不同类型的自定义单元格的表格，其中一个自定义单元格具有`UITextField`. 我使用这个自定义单元格创建了两行。我为两行的文本字段设置标签和委托。我的问题是，当我滚动表格时，这些带有文本字段的行向上移动并从屏幕上消失，向下滚动时，我的应用程序崩溃了。我收到一个错误，例如

```
-[CellImageViewController txtField]: unrecognized selector sent to instance 0xa0ea5e0 
```

这是我的代码`cellForRowAtIndexPath:`

```
if (indexPath.row == 0 )
        {
            if (cell == nil) {
                cell = [[[CellWithTextFieldViewController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID] autorelease];
            }

            cell.txtField.tag =1;

            cell.txtField.delegate = self;
            cell.txtField.text = @"kjfkd";
            }

            return cell;

        }
        else if(indexPath.row==1)
        {
            if (cell == nil) {
                cell = [[[CellWithTextFieldViewController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID] autorelease];
            }

           cell.txtField.tag = 2;
           cell.txtField.text = @"glk";
           cell.txtField.delegate = self;

          return cell;
     } 
```

有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:46:45.180

您有不同类型的单元格，因此您需要为每个单元格使用不同的 cellIdentifier。

尝试这个：

```
customOrNormalCell *cell [tableView dequeueReusableCellWithIdentifier:CellIdentifier]
if(!cell){
    cell = [[CellWithTextFieldViewController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:[NSString stringWithFormat:@"%i", indexPath.row]];
} 
```

使用此代码，每个 cellIdentifier 将是 1,2,3,4...（全部不同）

我很确定它会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:30:55.690

尝试这个

```
 static NSString *cellIdentifier= @"Cell";

    CellWithTextFieldViewController *cell = (CellWithTextFieldViewController *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil) {
            cell = [[CellWithTextFieldViewController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        }

        cell.txtField.tag =indexPath.row+1;

        cell.txtField.delegate = self;
        cell.txtField.text = @"kjfkd";

        return cell; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:32:24.210

滚动 tableView 时，您的单元格将被重用。这就是为什么 textField 正在消失。尝试对不同的自定义单元格使用不同的单元格 ID。不要忘记在 nib 文件中为单元格标识符提供相同的 id

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
static NSString *customCellOne = @"customCell1";
static NSString *customCellTwo = @"customCell2";
UITableViewCell *cell =nil;

if (0 == indexPath.row)
{
    cell = (CustomCellOne *)[tableView dequeueReusableCellWithIdentifier:customCellOne];

    if (nil == cell)
    {
        // Create custom cell one and do what ever you want

    }
}
else if (1 == indexPath.row)
{
    cell=(CustomCellTwo *)[tableView dequeueReusableCellWithIdentifier:customCellTwo];

    if (nil == cell)
    {
         // Create custom cell two and do what ever you want       
    }

}

return cell; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:02:49.413

在创建`UITextField`之前创建`UITableView`并在单元格内容视图中添加您的 Textfield 对象

```
[cell.contentView addSubview:yourTxtFieldOblect]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:06:43.070

为什么要为每一行定义单元格？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d",indexPath.row];
 CellWithTextFieldViewController  *cell = (CellWithTextFieldViewController *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if(cell == nil)
  {
    cell =[[[CellWithTextFieldViewController alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]autorelease];

    cell.txtField.tag = indexPath.row;
    cell.txtField.text = [SET TEXT FROM ARRAY];
    cell.txtField.delegate = self;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T12:04:50.427

看起来您可能正在重用不同类型的单元格。在尝试访问它的属性之前，请尝试确保您正在重用的单元格是哪种类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-28T09:16:09.817

我不知道，可能是在重用单元格时，文本字段委托被释放。可能你可以设置

```
 textfield.deleagate = self; 
```

在 CellWithTextFieldViewController.m

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T12:11:48.767

我的项目中也遇到过这个问题。

试试这个：

禁用 Tableview 中的滚动属性并创建一个滚动视图。然后在滚动视图中添加您的 Tableview。

```
UITableView  *table=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 976, 395) style:UITableViewStylePlain];
[table setSeparatorStyle:UITableViewCellSelectionStyleNone];
UIScroll *scroll=[[UIScrollView alloc]initWithFrame:CGRectMake(24, 168, 978, 395)];
 [table setScrollEnabled:NO];

[scroll addSubview:table];
[self.view addSubview:scroll];
[scroll sendSubviewToBack:table]; 
```

# facebook - Facebook .. 开发一个标签有 5 个产品让用户将这些单独的产品分享到朋友墙

> ID：14582368
> 
> 赞同：1
> 
> 时间：2013-01-29T11:58:37.280
> 
> 标签：facebook, facebook-graph-api

首先，如果这是一个重复的问题，请原谅我，我浏览了该网站试图找到类似的线程，但他们并没有完全回答我的问题。

我的delema如下，我只是想知道是否可以创建一个facebook标签，例如有五个产品，在这个标签下有一个按钮或一个功能，允许用户将此产品发送到特定朋友的WALL并发表评论他们可以写。

我知道有共享功能，您可以手动标记帖子/项目，我也知道发布私人消息的发送功能。

反正有这个在墙上吗？

# php - PHP 启动：无法加载动态库 php5.4.3/ext/php_ffmpeg.dll 不是有效的 Win32 应用程序

> ID：14582372
> 
> 赞同：4
> 
> 时间：2013-01-29T11:58:47.090
> 
> 标签：php, apache

再会，

我正在尝试在我的 Windows 7 机器上安装 .dll 文件 php_ffmpeg，但我不断收到此错误：

```
[29-Jan-2013 11:37:00 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.4.3/ext/php_ffmpeg.dll' - %1 is not a valid Win32 application.

 in Unknown on line 0 
```

请帮忙，我尝试过一些在线教程，但在这个阶段它们都停止了。

# android - 如何在 google play 中查看我购买的商品？

> ID：14582377
> 
> 赞同：0
> 
> 时间：2013-01-29T11:59:12.850
> 
> 标签：android, google-play, in-app-billing

我开发了一个销售商品的应用程序。所以我用谷歌账户购买并用另一个账户出售，以进行测试。

我已经重新找到了一些项目。现在，当我尝试购买其中一些物品时，Google Play 显示我已经拥有该物品。

如何查看我在 google play 中真正购买的商品？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:50:36.063

使用恢复交易来获取您购买的详细信息，但它有一定的限制。你不能打电话给它的某些时间......你只能在安装时间或某些情况下使用它。您也可以从以下链接获得帮助，

[链接1](https://stackoverflow.com/questions/8465738/android-in-app-billing-restore-transaction)

[链接2](https://stackoverflow.com/questions/11768347/cannot-figure-out-how-to-restore-transactions-on-in-app-purchases-in-android)

[链接3](https://stackoverflow.com/questions/10393720/how-to-do-restore-purchase-and-get-whether-the-product-is-purchase-or-not)

[链接4](http://developer.android.com/google/play/billing/billing_overview.html)

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:38:07.880

它在我的商家帐户中。只需要使用正确的帐户登录。

# java - 使用 WSO2 ESB 发送简单的电子邮件

> ID：14582381
> 
> 赞同：2
> 
> 时间：2013-01-29T11:59:36.093
> 
> 标签：java, email, wso2, wso2esb, endpoint

我正在尝试使用 WSO2 ESB 向特定地址发送电子邮件。

我通过将以下设置应用于 mailto 传输发件人来配置我的axis2.xml。

```
<transportSender name="mailto" class="org.apache.axis2.transport.mail.MailTransportSender">
        <parameter name="mail.smtp.host">smtp.gmail.com</parameter>
        <parameter name="mail.smtp.port">587</parameter>
        <parameter name="mail.smtp.starttls.enable">true</parameter>
        <parameter name="mail.smtp.auth">true</parameter>
        <parameter name="mail.smtp.user">myusername@gmail.com</parameter>
        <parameter name="mail.smtp.password">mypassword</parameter>
        <parameter name="mail.smtp.from">myusername@gmail.com</parameter>
    </transportSender> 
```

这是我负责发送邮件的序列片段。

```
 <log level="custom">
      <property name="Mail status" value="===============enter the mail============="/>
   </log>
   <property name="messageType" value="text/html" scope="axis2"/>
   <property name="ContentType" value="text/html" scope="axis2"/>
   <property name="Subject" value="File Received" scope="transport"/>
   <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
   <log level="full"/>
   <send>
      <endpoint>
         <address uri="mailto:myreciveemail@gmail.com"/>
      </endpoint>
   </send>
   <log level="custom">
      <property name="flag" value="=====After======="/>
   </log> 
```

**我很确定我的代理服务的其他部分工作得很好。** 但问题是当我触发代理服务时，它会遍历序列的所有部分而不会引发错误**但不会发送邮件**

这是与我之前所说的序列片段相关的控制台输出。

```
[2013-01-29 17:07:15,552]  INFO - LogMediator Mail status = ===============enter
 the mail=============
[2013-01-29 17:07:15,552]  INFO - LogMediator To: , WSAction: urn:mediate, SOAPA
ction: urn:mediate, MessageID: urn:uuid:a12fd64c-f5c5-4b22-b092-e15af960a3d2, Di
rection: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envel
ope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body>
                <geo:getZipCode xmlns:geo="http://geo.wso2">
            <geo:longitude>1</geo:longitude>
            <geo:latitude>3</geo:latitude>
         </geo:getZipCode>
            </soapenv:Body></soapenv:Envelope>
[2013-01-29 17:07:15,567]  INFO - LogMediator flag = =====After======= 
```

请问各位大神知道这是什么问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-28T17:34:06.257

尝试使用

```
<parameter name="mail.smtp.user">myusername</parameter> 
```

没有@gmail.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T12:08:30.457

对于那些尝试使用问题中所述的配置通过 wso2 esb 发送电子邮件的人，除了您需要包含一个`axis2-transport-mail-1.0.0.jar`under之外`wso2esb-5.0.0\repository\axis2\client\lib`。此 jar 包含axis2 发送电子邮件所需的类。希望这可以帮助某人。

# css - 引导容器中高度为 100% 的内容

> ID：14582384
> 
> 赞同：2
> 
> 时间：2013-01-29T11:59:45.297
> 
> 标签：css, twitter-bootstrap

我需要 css、html 和 bootstrap 方面的帮助。

我怎样才能得到这样的效果： [布局](http://img210.imageshack.us/img210/9261/bootstrap.png)

1.  标题 = Boostrap 导航栏（50px 高度）
2.  容器 = 所有站点和中心内容的灰色背景
3.  左栏 = 菜单 - 宽度 220px
4.  右栏 = 白色背景和 100% 高度的内容
5.  页脚 = 粘性页脚（高度：50 像素）

居中我使用：

```
<div class="container"> 
```

但我对 100% 高度内容和粘性页脚有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:07:12.077

您应该将您的 css 和 html 放在这里，以便任何人都可以轻松地向您推荐。

对于粘性页脚，您需要将其位置设置为绝对位置并将主 div 的位置设置为相对位置。

喜欢 ：

```
html, body {
    height: 100%;
    min-height: 100%;
}

.container { 
    min-height: 100%;
    height: 100%;
    position: relative;
}

.footer
{
    height: 20px; //according to your requirement
    position: absolute;
    bottom: 0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:03:17.313

你需要做这样的事情：[Twitter Bootstrap: div in container with 100% height](https://stackoverflow.com/questions/11677886/twitter-bootstrap-div-in-container-with-100-height)

```
html, body {
    height: 100%;
}

.container { 
    min-height: 100%;
    height: 100%;
} 
```

# hadoop - Hadoop：可用的数据节点：0（总共 0 个，死亡 0 个）

> ID：14582387
> 
> 赞同：4
> 
> 时间：2013-01-29T11:59:53.487
> 
> 标签：hadoop

每次我跑：

```
hadoop dfsadmin -report 
```

我得到以下输出：

```
Configured Capacity: 0 (0 KB)
Present Capacity: 0 (0 KB)
DFS Remaining: 0 (0 KB)
DFS Used: 0 (0 KB)
DFS Used%: ï¿½%
Under replicated blocks: 0
Blocks with corrupt replicas: 0
Missing blocks: 0

-------------------------------------------------
Datanodes available: 0 (0 total, 0 dead) 
```

1.  我的 dfs/ 文件夹中没有数据目录。
2.  此文件夹中存在锁定文件：in_use.lock
3.  主节点、作业跟踪器和数据节点运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T10:44:24.760

我遇到了完全相同的问题，当我检查 datanodes 日志时，有很多`could not connect to master:9000`，当我通过检查 master 上的端口时，`netstat -ntlp`我在输出中有这个：

```
tcp 0 0 127.0.1.1:9000 ... 
```

我意识到我应该更改我的主机名称或更改`master`所有配置。我决定做第一个，因为它似乎更容易。所以我修改`/etc/hosts`并更改`127.0.1.1 master`为`127.0.1.1 master-machine`并在文件末尾添加了一个条目，如下所示：

```
192.168.1.1 master 
```

然后我更改`master`为`master-machine`in`/etc/hostname`并重新启动机器。问题消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:47:46.017

请检查数据节点日志。当无法向 namenode 报告时，它将记录错误。如果您发布这些错误，人们将能够提供帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:37:21.303

嗯……

你检查防火墙了吗？

当我使用 hadoop 时，我关闭了防火墙（iptables -F，在所有节点中）

然后再试一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T09:52:30.893

当我们重新启动集群时，它发生在我们身上。但过了一会儿，自动检测到数据节点。可能是因为块报告延迟时间属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-29T18:01:18.607

刚刚通过以下步骤解决了这个问题 -

1.  确保主节点和从节点的 IP 地址在`/etc/hosts`文件中正确
2.  除非你真的需要数据，否则`stop-dfs.sh`，删除`data`主/从节点中的所有目录，然后运行`hdfs namenode -format`和`start-dfs.sh`。这应该重新创建 hdfs 并解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-13T23:51:03.467

通常在数据节点中存在命名空间 id 问题的错误。所以从master中删除名称dir并从datanodes中删除data dir。现在格式化datanode并尝试start-dfs。该报告通常需要一些时间来反映所有数据节点。即使我得到了 0 个数据节点，但经过一段时间主检测到从属。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-04T17:20:48.520

我有同样的问题，我刚刚解决了。

所有节点的 /etc/hosts 应如下所示：

`127.0.0.1 localhost xxx.xxx.xxx.xxx master xxx.xxx.xxx.xxx slave-1 xxx.xxx.xxx.xxx slave-2`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-08T08:42:21.510

只是格式化名称节点对我不起作用。所以我检查了日志`$HADOOP_HOME/logs`。在`secondarynamenode`中，我发现了这个错误：

```
ERROR org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Exception in doCheckpoint
java.io.IOException: Inconsistent checkpoint fields.
LV = -64 namespaceID = 2095041698 cTime = 1552034190786 ; clusterId = CID-db399b3f-0a68-47bf-b798-74ed4f5be097 ; blockpoolId = BP-31586866-127.0.1.1-1552034190786.
Expecting respectively: -64; 711453560; 1550608888831; CID-db399b3f-0a68-47bf-b798-74ed4f5be097; BP-2041548842-127.0.1.1-1550608888831.
    at org.apache.hadoop.hdfs.server.namenode.CheckpointSignature.validateStorageInfo(CheckpointSignature.java:143)
    at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.doCheckpoint(SecondaryNameNode.java:550)
    at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.doWork(SecondaryNameNode.java:360)
    at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode$1.run(SecondaryNameNode.java:325)
    at org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:482)
    at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.run(SecondaryNameNode.java:321)
    at java.lang.Thread.run(Thread.java:748) 
```

所以我停止了 hadoop，然后专门格式化了给定的集群 id：

```
hdfs namenode -format -clusterId CID-db399b3f-0a68-47bf-b798-74ed4f5be097 
```

这解决了问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-31T00:44:48.707

这也可能发生还有另一个不为人知的原因：您的数据节点没有正常启动，但其他一切都在工作。

就我而言，在查看日志时，我发现绑定端口 510010 已被 SideSync（用于 MacOS）使用。我是通过 找到的 `sudo lsof -iTCP -n -P|grep 0010`，但是您可以使用类似的技术来确定可能已经占用了您众所周知的数据节点端口的内容。

将其关闭并重新启动即可解决问题。

此外，如果您以 root 身份安装了 Hadoop/Yarn，但在各个主目录中有数据目录，然后尝试以个人用户身份运行它，则必须公开数据节点目录。

# android - 处理 appwidget 的多个实例

> ID：14582395
> 
> 赞同：4
> 
> 时间：2013-01-29T12:00:44.107
> 
> 标签：android, static, sharedpreferences, android-appwidget

我有一个配置活动、一个大型小部件提供程序和一个小型小部件提供程序。从配置活动中，我将一些值保存在共享首选项中。从大大小小的应用程序小部件提供商那里，我得到了那些共享的偏好。我无法为应用小部件提供唯一 ID，并且每次从配置活动转到应用小部件提供程序时，我都希望拥有不同的共享偏好。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T09:05:30.687

要为应用小部件的每个实例提供唯一的小部件 ID，您可以执行以下操作：

```
 AppWidgetManager appWidgetManager = AppWidgetManager
                .getInstance(ConfigurationActivity.this);
    ComponentName thisAppWidget = new ComponentName(
                ConfigurationActivity.this, WidgetProvider.class);
    int[] appWidgetIds = appWidgetManager
            .getAppWidgetIds(thisAppWidget);
    Intent startBroadcast = new Intent(ConfigurationActivity.this,
                WidgetProvider.class);
    startBroadcast.putParcelableArrayListExtra("list", newsList);
    startBroadcast.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
                appWidgetIds);
    startBroadcast.setAction("android.appwidget.action.APPWIDGET_UPDATE");
        sendBroadcast(startService); 
```

为了将数据保存在唯一的共享首选项中，您可以执行以下操作：

```
 public void setWidgetNewsCategory(Context context, String category,
        int appWidgetId) {

    Editor editor = context.getSharedPreferences(
            PREFS_NAME_CATEGORY + String.valueOf(appWidgetId),
            Context.MODE_PRIVATE).edit();
    editor.putString(PREFS_VALUE_CATEGORY + String.valueOf(appWidgetId),
            category);
    editor.commit();
} 
```

您可以按如下方式检索此共享首选项值：

```
 public String getWidgetNewsCategory(Context context, int appWidgetId) {
     SharedPreferences sharedPreferences = context.getSharedPreferences(
            PREFS_NAME_CATEGORY + String.valueOf(appWidgetId),
            Context.MODE_PRIVATE);
    return sharedPreferences.getString(
            PREFS_VALUE_CATEGORY + String.valueOf(appWidgetId), null);
} 
```

最后，在 Widget Provider 的 onReceive 方法中，执行如下操作：

```
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action)) {
        Bundle extras = intent.getExtras();
        if (extras != null) {
            int[] appWidgetIds = extras
                    .getIntArray(AppWidgetManager.EXTRA_APPWIDGET_IDS);             
            if (appWidgetIds.length > 0) {
                this.onUpdate(context, AppWidgetManager.getInstance(context), appWidgetIds);//here you can call onUpdate method, and update your views as you wish
            }
        }
    } else if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
        Bundle extras = intent.getExtras();
        if (extras != null
                && extras.containsKey(AppWidgetManager.EXTRA_APPWIDGET_ID)) {
            final int appWidgetId = extras
                    .getInt(AppWidgetManager.EXTRA_APPWIDGET_ID);
            this.onDeleted(context, new int[] { appWidgetId });
        }
    } else if (AppWidgetManager.ACTION_APPWIDGET_ENABLED.equals(action)) {
        this.onEnabled(context);
    } else if (AppWidgetManager.ACTION_APPWIDGET_DISABLED.equals(action)) {
        this.onDisabled(context);
    }
} 
```

这只是对我有用的通用解决方案。希望它也对你有用。

# jpa - EclipseLink“drop-and-create-tables”在继承类中没有添加列，在具有 InheritanceType.TABLE_PER_CLASS 的超类中声明

> ID：14582402
> 
> 赞同：0
> 
> 时间：2013-01-29T12:01:03.940
> 
> 标签：jpa, eclipselink

在已经存在的表结构继承中，我添加了一个新的列类型（我删掉了一些代码）

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Account {
    ......        

    @Column                            // already existed column 
    private String name;               // get/set also applied

    @Column(length=20)                 // new added column 
    @Enumerated(EnumType.STRING)       // get/set also applied 
    private AccountType type; 

    ..........
}

@Entity
public User extends Account {
    ................                   // some other already existed fields
} 
```

在我的 persistence.xml 文件中，我正在使用下一个策略策略来生成 DDL

```
property name="eclipselink.ddl-generation" value="drop-and-create-tables" 
```

*当 DDL 生成正在处理Account*表中新添加的列**类型**时，成功创建了，但是对于*User*表，根本没有这种列（策略是 TABLE_PER_CLASS）。当我删除数据库并再次创建它时，我修复了这个问题。之后，应用了当前一代的 DLL -*用户*中的**类型**也被添加为一列。有人“遇到”这种问题吗？我修复了数据库的删除和创建，但我不确定这应该是未来相同情况下的策略，特别是对于生产数据库

 *****谢谢，西蒙·安杰洛夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:00:03.570

DDL 生成是用于开发而不是生产。您看到的问题是因为当表已经存在时，无法使用新字段创建它。如果您按照此处[http://wiki.eclipse.org/EclipseLink/DesignDocs/368365的描述添加到表中，则删除并创建或“创建或扩展表”功能将起作用](http://wiki.eclipse.org/EclipseLink/DesignDocs/368365)*****

# c# - 无法在 gridview 中打开超链接位置

> ID：14582411
> 
> 赞同：1
> 
> 时间：2013-01-29T12:01:58.667
> 
> 标签：c#, javascript, vb.net

我有一个 gridview 字段：

```
<asp:TemplateField HeaderText="View File">
    <ItemTemplate >     
        <asp:HyperLink ID="LinkView" runat="server" Target="_blank"></asp:HyperLink>
    </ItemTemplate>
    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
</asp:TemplateField> 
```

在后面的代码中，（Gridview 的 RowBound）

```
Dim lnk As HyperLink = DirectCast(e.Row.FindControl("LinkView"), HyperLink) 
lnk.Attributes.Add("onclick", "OpenPdf('" + "file://" + fileName + "')") 
```

前任。文件名：`E:\MyFolder\F1\File_01_15_2013_000100.pdf` 和javascript函数：

```
function OpenPdf(path1) {
    window.open(path1);
} 
```

但它不起作用。在 IE 中，我收到一个错误：`Access denied`在 Firefox 中：`NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMJSWindow.open]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:06:19.163

你得到了文件的物理路径，而不是你必须给出文件的虚拟路径，比如

```
fileName = "http://yourdomain.com/files/a.pdf" 
```

您需要将文件放在网站目录结构中，以便通过您的域访问路径。假设您的当前页面位于根目录下，pdf 文件位于文件夹中。如果不想将图像放在网站的虚拟目录中，则可以创建一个包含文件的新虚拟目录。

在您的网站内创建一个虚拟目录，并提供位于您的网站文件夹之外并包含图像的文件夹路径。现在这个文件夹将作为您网站的一部分，您不会收到错误。如何创建虚拟目录，[MSDN](http://msdn.microsoft.com/en-us/library/zwk103ab%28v=vs.100%29.aspx)

假设您有网站文件夹 d:\Yoursites\Testsite 并且您想访问 d:\file\a.pdf 中的文件，在 TestWebsite 侧创建一个虚拟目录指向 d:\files 并通过虚拟目录访问其中的文件。

pdf 的 URL 类似于

[http://yoursite.com/yourvirtualdirectoryname//a.pdf](http://yoursite.com/yourvirtualdirectoryname//a.pdf)

# c# - 使用通用返回类型的重载静态方法不起作用

> ID：14582412
> 
> 赞同：0
> 
> 时间：2013-01-29T12:02:01.163
> 
> 标签：c#, visual-studio-2010, static

我的静态类中定义了以下 2 个重载静态方法：

```
private static Dictionary<int, PartitionDefinition> GetNewPartitionDefinitions (string  measureGroup, int rangeThreshold)
    {
         do something;
}
private static Dictionary<int, PartitionDefinition> GetNewPartitionDefinitions(DateRange startDateRange)
{
do something else;
} 
```

我得到的行为是代码中首先列出的方法是在设计时识别的方法。链中的后续方法名称变灰，如果我将鼠标悬停在它上面，我会收到消息“方法从未使用过”。

我还注意到，如果我尝试调用该方法，智能感知只会检测到代码中出现的第一个，就像另一个不存在一样。

研究我“相信”的问题，我可以消除类型擦除的问题，但我不是 100% 绝对确定这一点。

我知道以下代码对使用泛型的类型擦除有效：

```
public class A {
 public static MethodOne  (List<String> param) {}
 public static MethodOne  (Dictionary<String,String> param) {}
} 
```

但在这种情况下，泛型是作为参数传递的，所以我可以看到这将如何导致问题。在我的例子中，只有返回类型是相同的泛型类型，但是人们会认为具有相同的方法名称并且显然具有不同的非泛型参数类型和数字应该可以工作。

有人可以对此有所了解吗？我在这里查看了类似的文章帖子，但似乎都没有描述我所看到的确切问题。

我对编程并不陌生，但我并不声称自己什么都知道，这对我来说是第一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:15:01.433

您收到的消息可能是因为您没有在代码中使用方法，实际上允许重载静态方法的问题并且不应该是问题或导致任何编译器错误，您可能需要检查配置中的警告和提示VS。

我刚刚使用以下代码对其进行了测试：

```
public static class TestClass
    {
        public static string stat(string measureGroup, int rangeThreshold)
        {
            return "st1";
        }

        public static string stat(int startDateRange)
        {
            return "st2";
        }

        private testmethode()
        {
           // string h = TestClass.stat(.... at this point i get both variants offered)
        }

    } 
```

# python - @tornado.web.asynchronous 装饰器是什么意思？

> ID：14582415
> 
> 赞同：18
> 
> 时间：2013-01-29T12:02:25.873
> 
> 标签：python, tornado

1.  如果代码没有使用这个装饰器，它是非阻塞的吗？
2.  为什么这个名字是异步的，意思是添加装饰器让代码异步？
3.  为什么@tornado.gen 总是和@tornado.web.asynchronous 一起使用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T13:38:52.303

`@tornado.web.asynchronous` [防止`RequestHandler`自动调用`self.finish()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.asynchronous)。而已; 这只是意味着 Tornado 将保持连接打开，直到您手动调用`self.finish()`.

1.  不使用此装饰器的代码可以阻塞，也可以不阻塞。使用装饰器不会以任何方式改变这一点。

2.  正如@Steve Peak 所说，您将装饰器用于异步请求，例如数据库检索。

3.  Tornado 3.1+ 更新：如果你使用`@gen.coroutine`，你也不需要使用`@asynchronous`。我相信旧的`@gen.engine`界面仍然需要`@asynchronous`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T21:24:45.780

1.  在这里回答：[异步与非阻塞](https://stackoverflow.com/questions/2625493/asynchronous-vs-non-blocking)

2.  像这样想。当您需要请求说出数据库或其他 url 来检索数据时，您不想阻止您的 tornado IO。因此，`@tornado.web.asynchronous`它将允许 IO 在等待内容加载（例如数据库或 url）时处理其他请求。

3.  它们是相似的。您很可能会使用`@tornado.web.asynchronous`.

    *   在这里阅读更多：[http ://www.tornadoweb.org/documentation/gen.html](http://www.tornadoweb.org/documentation/gen.html)
    *   示例：[在写入客户端之前链接异步操作（python - tornado）](https://stackoverflow.com/questions/9377902/chaining-asynchronous-operations-before-writing-to-client-python-tornado)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T01:21:27.750

`@tornado.web.asynchronous`本质上只是一个标记，您放置在处理程序方法上，例如`get()`或`post()`告诉框架它不应该`finish()`在方法返回时自动调用，因为它包含将设置`finish()`为稍后调用的代码。

# r - 如何将文件的多行读入数据框的一行

> ID：14582422
> 
> 赞同：4
> 
> 时间：2013-01-29T12:02:42.637
> 
> 标签：r, file

我有一个数据文件，其中各个样本由空行分隔，每个字段都在自己的行上：

```
age 20
weight 185
height 72

age 87
weight 109
height 60

age 15
weight 109
height 58

... 
```

如何将此文件读入数据框中，以便每一行代表一个包含年龄、体重、身高列的样本？

```
 age    weight    height

1   20      185        72  
2   87      109        60
3   15      109        58
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:58:45.373

@user1317221_G 展示了我将采用的方法，但求助于加载额外的包并显式生成组。组（ID 变量）是使任何`reshape`类型答案起作用的关键。矩阵答案没有这个限制。

这是基本 R 中密切相关的方法：

```
mydf <- read.table(header = FALSE, stringsAsFactors=FALSE, 
                   text = "age 20
                   weight 185
                   height 72

                   age 87
                   weight 109
                   height 60

                   age 15
                   weight 109
                   height 58
                   ")

# Create your id variable
mydf <- within(mydf, {
  id <- ave(V1, V1, FUN = seq_along)
}) 
```

使用 id 变量，您的转换很容易：

```
reshape(mydf, direction = "wide", 
        idvar = "id", timevar="V1")
#   id V2.age V2.weight V2.height
# 1  1     20       185        72
# 4  2     87       109        60
# 7  3     15       109        58 
```

或者：

```
# Your ids become the "rownames" with this approach
as.data.frame.matrix(xtabs(V2 ~ id + V1, mydf))
#   age height weight
# 1  20     72    185
# 2  87     60    109
# 3  15     58    109 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:57:40.947

要扩展@BlueMagister 的答案，您可以使用带有一些选项的扫描将其直接读入列表，然后将列表转换为数据框：

```
tmp <- scan(text = "
age     20
weight  185
height  72

age     87
weight  109
height  60

age     15
weight  109
height  58", multi.line=TRUE, 
  what=list('',0,'',0,'',0), 
  blank.lines.skip=TRUE)

mydf <- as.data.frame( tmp[ c(FALSE,TRUE) ] )
names(mydf) <- sapply( tmp[ c(TRUE,FALSE) ], '[', 1 ) 
```

这假设记录中的变量始终处于相同的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:39:03.717

```
df <- read.table(text ="
age     1
weight  1
height  6

age     2
weight  7
height  2

age     4
weight  8
height  9", header=FALSE) 

df$ID <- rep(1:3, each=3)
library(reshape2)
newdf <- dcast(df, ID~V1, value.var="V2")

#     ID age height weight
#1  1   1      6      1
#2  2   2      2      7
#3  3   4      9      8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T12:45:48.363

其他解决方案

```
data <- readLines('c:\\relatorios\\bla.txt') # Read the data
data <- data[data != ''] # Remove the white lines
names <- unique(gsub('[0-9]*','',data)) # Get the names
data <- matrix(as.real(gsub('[^0-9]*','',data)),ncol=3,byrow=T) # Create matrix
colnames(data) <- names # Set the names 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T15:30:44.073

这是我尝试过的东西`scan`：

```
##substitute text with file depending on your input
##read in three strings separated by spaces, multi-line input
y <- scan(text=x,what=list(character(),character(),character())
  ,sep="\n",multi.line=TRUE)
##combine into a matrix of strings
y <- do.call(cbind,y)
#     [,1]     [,2]         [,3]       
#[1,] "age 20" "weight 185" "height 72"
#[2,] "age 87" "weight 109" "height 60"
#[3,] "age 15" "weight 109" "height 58"
##set column names based on text from the first row
colnames(y) <- regmatches(y[1,],regexpr("^\\w+",y[1,]))
##remove non-numeric characters
y <- gsub("\\D+","",y)
##convert to number format, preserving matrix structure
y <- apply(y,2,as.numeric)
##convert to data frame (if necessary)
y <- data.frame(y) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T12:43:18.670

如果您的源文件一直包含这三个变量，一种简单的方法是将文件作为两个列读取（第一列是名称，第二列是数字），然后将第二列转换为矩阵。如果我`df`从 user1317221_G 的回答中告发，

```
matrix(df$V2,ncol=3,byrow=TRUE)
     [,1] [,2] [,3]
[1,]    1    1    6
[2,]    2    7    2
[3,]    4    8    9 
```

添加行和/或列名称是微不足道的。很抱歉获得列顺序“年龄，体重，身高”:-)

# c# - 在 Powerpoint 的文件菜单中添加菜单项

> ID：14582424
> 
> 赞同：0
> 
> 时间：2013-01-29T12:02:45.107
> 
> 标签：c#, powerpoint

我正在开发一个 Power Point 插件（使用 C#），我必须在“文件”菜单中添加一个自定义菜单条目。

我遵循了[http://msdn.microsoft.com/en-us/library/bb608602(v=vs.100).aspx中的所有步骤](http://msdn.microsoft.com/en-us/library/bb608602(v=vs.100).aspx)

但我的菜单没有出现在 Powerpoint 中。

我需要什么额外的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:17:05.740

@Nilzor，我找到了解决方案，它被称为后台视图

我们需要在 XML 中添加它以使其工作

```
<?xml version="1.0" encoding="utf-8"?>
<customUI onLoad="Ribbon_Load" xmlns="http://schemas.microsoft.com/office/2009/07/customui">
  <backstage>
    <tab id="MyBackstageTab"
           label="My Tab"
           getVisible="MyBackstageTab_GetVisible">
    </tab>
  </backstage>
</customUI> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:52:13.983

你必须检查我的插件是否可以让主机

完整示例链接：[http ://csharpmentor.blogspot.fr/2009/05/how-to-create-powerpoint-add-in-in-cnet.html](http://csharpmentor.blogspot.fr/2009/05/how-to-create-powerpoint-add-in-in-cnet.html)

![在此处输入图像描述](../Images/f8663c112cefa431fd17bf7a4fe561dc.png)

# amazon-web-services - S3 GET 请求的 Webhook/回调

> ID：14582429
> 
> 赞同：2
> 
> 时间：2013-01-29T12:02:54.463
> 
> 标签：amazon-web-services, amazon-s3, get, amazon-ec2

目前，我们通过 EC2 实例将 GET（下载）请求代理到 S3。这样做的原因是因为我们想知道特定文件有多少流量。

现在我们希望能够不使用该代理。但我们仍然需要这些信息。有没有办法做到这一点？

我想要的是对特定服务器的 webhook/回调。或者也许从日志文件中实时/实时读取它。

有没有办法做到这一点？一段时间以来一直在寻找答案，但也许我们没有朝着正确的方向思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:33:28.113

打开 S3 存储桶的[日志记录](http://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html)，然后（可选）将客户端直接发送到存储桶。

日志格式包括“发送的字节数”以及“对象大小”和许多其他好东西，包括远程 IP、引用页面和带有查询字符串的请求 URI。

日志当然不是实时的，但您会发现每隔几分钟就会有一个新日志放入您的存储桶中。检索、解析、存储感兴趣的内容（如果您愿意），然后如果您不想支付日志上的每月存储费用，则将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:09:49.973

保持请求 URL 相同，指向您的 EC2 实例。但是，不要通过您的 EC2 实例将 S3 中的内容代理到客户端，而是让您的 EC2 实例将用户重定向到 S3 URL。

使用过期的签名 URL 进行重定向。您的 EC2 实例可以为每个请求创建适当的 URL，并在几分钟后到期。这样，客户端就有时间获取 S3 资源，但将其添加为书签将不起作用，因为当他们稍后尝试时，它已经过期。所以他们总是必须去您的 EC2 实例获取资源，允许您控制和记录访问，但您不必代理内容本身。

# django - 在 Django 中处理每个对象的时区设置

> ID：14582430
> 
> 赞同：1
> 
> 时间：2013-01-29T12:02:58.897
> 
> 标签：django, timezone

我有一个 Django 应用程序，用户可以在其中创建一个活动，然后为一个活动创建多个日志条目。一个活动有一个创建的日期时间，一个日志条目也有一个创建的日期时间。

应使用创建用户在创建活动时的时区创建活动。具体来说，给定用户可能在不同的时区有两个活动；时区设置*不是*每个用户，而是每个活动。我可以在浏览器中的 JavaScript 中从 UTC 导出用户当前的偏移量（我很高兴依赖它）。

我不知道的是：如何将这些时间保存到数据库中，然后在渲染时正确显示它们？

我打开了 USE_TZ。在英国，一切正常：创建 Activity 时，我将创建的日期时间保存为`django.utils.timezone.now()`，并将用户当前的偏移量（来自 JavaScript）保存为 Activity 中的 timezoneHoursOffset。然后，当我在页面上显示 Activity 及其日志条目时，我将其包装在`{% timezone "Etc/GMT+(timezoneHoursOffset)" %} ... {% endtimezone %}`.

但是，如果服务器不在英国，则此方法不起作用。时间以 UTC 格式保存在数据库中（我已经通过检查数据库本身而不是使用 ORM 来验证这一点），然后 ORM 将时间“更改”为比 UTC 晚八小时（因为服务器的时区是UTC-8）（这给出了正确的时间！），然后`{% timezone %}`标签再减去*八个*小时的时间，这意味着显示的时间比它应该的时间晚了八个小时。

我不确定我是否应该以不同的方式节省时间。在输出时更改它们；使用时区模板标签；或者是其他东西。这东西很混乱。你会建议我如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:52:00.573

参考[答案](https://stackoverflow.com/questions/11670425/python-weird-behavior-with-pytz-timezones/11670743#11670743)，“Etc/GMT”时区的符号颠倒了。例如，我在 +0800，它应该是`'Etc/GMT-8'`而不是`'Etc/GMT+8'`（我怀疑你的 UTC-8 实际上应该是`"Etc/GMT+8"`）：

```
>>> from django.template import Template, Context
>>> from django.utils.timezone import now
>>> print(Template("""{% load tz %}
localtime: {{ t }}
Etc/GMT-8: {{ t|timezone:"Etc/GMT-8" }}
Etc/GMT+8: {{ t|timezone:"Etc/GMT+8" }}
""").render(Context({'t':now()})))

localtime: Jan. 29, 2013, 11:48 p.m.
Etc/GMT-8: Jan. 29, 2013, 11:48 p.m.
Etc/GMT+8: Jan. 29, 2013, 7:48 a.m. 
```

所以，你必须扭转你的`timezoneHoursOffset`...

对于数据库存储，根据[doc](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#std:templatefilter-timezone)，最好以 UTC 存储数据。

此外，由于 DST，您需要确保您的 javascript 生成正确的小时偏移量。如果可以，最好存储时区名称并相应地使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:58:47.133

```
from datetime import datetime
from dateutil import zoneinfo

from_zone = zoneinfo.gettz('UTC')
to_zone = zoneinfo.gettz('UK/UK') 

utc = created # your datetime object from the db

# Tell the datetime object that it's in UTC time zone since 
# datetime objects are 'naive' by default
utc = utc.replace(tzinfo=from_zone)

# Convert time zone
eastern_time = utc.aztimezone(to_zone) 
```

# java - @Convert 在 DataNucleus 中

> ID：14582431
> 
> 赞同：2
> 
> 时间：2013-01-29T12:02:59.310
> 
> 标签：java, jpa, datanucleus

有没有人设法将 @Convert 注释与 DataNucleus 一起使用？您有工作示例或文档链接吗？

我试图以这种方式实现它

```
...
@Convert(converter = MyAttributeConverter.class)
private String[] aField;
... 
```

`MyAttributeConverter`实现`javax.persistence.jpa21.AttributeConverter<String[], String>`。

当我运行 DataNucleus Enhancer 时出现此错误

```
WARN [main] (Log4JLogger.java:96) - Class "XXX" has an annotation "javax.persistence.jpa21.Convert" specified with property "converter" yet this is invalid. Please check the specification for that annotation class. Errors were encountered when loading the specified MetaData files and classes. See the nested exceptions for details
ERROR [main] (Log4JLogger.java:125) - DataNucleus Enhancer completed with an error. Please review the enhancer log for full details. Some classes may have been enhanced but some caused errors Errors were encountered when loading the specified MetaData files and classes. See the nested exceptions for details org.datanucleus.exceptions.NucleusUserException: Errors were encountered when loading the specified MetaData files and classes. See the nested exceptions for details
    at org.datanucleus.metadata.MetaDataManager.loadClasses(MetaDataManager.java:536)
    ... 
```

根据 DataNucleus 文档似乎很好：[http](http://www.datanucleus.org/products/accessplatform/jpa/annotations.html#Convert) : //www.datanucleus.org/products/accessplatform/jpa/annotations.html#Convert ，虽然谷歌搜索我发现了一个问题报告，其中事情有点不同：[http://www .datanucleus.org/servlet/jira/browse/NUCJPA-164](http://www.datanucleus.org/servlet/jira/browse/NUCJPA-164)。

我正在使用 DataNucleus 3.1.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:50:27.460

样本位于[http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/java/org/jpox/samples/typeconversion/](http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/java/org/jpox/samples/typeconversion/)并在 [http://进行测试datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/test/org/datanucleus/tests/TypeConversionTest.java?revision=16466&view=markup](http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/test/org/datanucleus/tests/TypeConversionTest.java?revision=16466&view=markup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T07:01:49.333

与此同时，我升级到了 datanucleus-accessplatform-jpa-rdbms 3.3.2（datanucleus-core 3.2.7，datanucleus-api-jpa 3.3.2）并让它工作了。

但该消息可能有多种原因：

*   您可以在类路径中缺少转换器类。
*   您的转换器可以从另一个类继承 - 请参阅我的另一个问题[Base class for JPA converter](https://stackoverflow.com/questions/18767889/base-class-for-jpa-converter)（虽然尚未回答）
*   转换器实体类型与使用 @Convert 注释的字段类型之间可能存在不兼容。
*   版本之间可能存在不兼容。例如，您的转换器可以实现`javax.persistence.jpa21.AttributeConverter`（旧版本），但增强器正在使用`javax.persistence.AttributeConverter`（新版本）或相反。

我认为错误消息应该更具体一点，以帮助您更好地识别问题。

# iphone - 如何从访问令牌中获取 tumblr 用户名

> ID：14582433
> 
> 赞同：0
> 
> 时间：2013-01-29T12:03:05.617
> 
> 标签：iphone, tumblr

如何从 tumblr 访问令牌中检索 tumblr 用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:46:39.623

彻底阅读 API 文档。您需要使用访问令牌通过 OAuth 调用 User Info 方法，这将返回一个 json 对象，其中包括您想要的信息以及一些信息。

# jquery - jQuery水平滚动添加额外的图像不显示

> ID：14582434
> 
> 赞同：2
> 
> 时间：2013-01-29T12:03:05.803
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jQuery [Horizo​​ntal 滚动插件](http://www.tonylea.com/2011/jquery-horizontal-scrollbars/)进行滚动[演示](http://www.tonylea.com/go/examples/jquery-horizontal-scrollbars/)。

当我向 li 添加额外的图像时，它不会显示添加的图像。有人知道吗？

```
<ul id="horiz_container_outer">
        <li id="horiz_container_inner">
            <ul id="horiz_container">
                <li><img src="images/toystory.png" width="500px" height="300px" alt="Toy Story" /></li>
                <li><img src="images/up.png" width="500px" height="300px" alt="UP" /></li>
                <li><img src="images/ratatouille.png" width="500px" height="300px" alt="Ratatouille" /></li>
                <li><img src="images/findingnemo.png" width="500px" height="300px" alt="Finding Nemo" /></li>
                <li><img src="images/cars.png" width="500px" height="300px" alt="Cars" /></li>
                <li><img src="images/monstersinc.png" width="500px" height="300px" alt="Monsters Inc" /></li>
                <li><img src="images/bugslife.png" width="500px" height="300px" alt="A Bugs Life" /></li>
                <li><img src="images/incredibles.png" width="500px" height="300px" alt="The Incredibles" /></li>
                <li><img src="images/bugslife.png" width="500px" height="300px" alt="A Bugs Life" /></li>
                <li><img src="images/incredibles.png" width="500px" height="300px" alt="The Incredibles" /></li>
                <li><img src="images/bugslife.png" width="500px" height="300px" alt="A Bugs Life" /></li>
                <li><img src="images/toystory.png" width="500px" height="300px" alt="The Incredibles" /></li>
                <li><img src="images/bugslife.png" width="500px" height="300px" alt="A Bugs Life" /></li>
                <li><img src="images/toystory.png" width="500px" height="300px" alt="The Incredibles" /></li>
            </ul>
        </li>       
</ul> 
```

## jQuery

```
$(document).ready(function(){
    $('#horiz_container_outer').horizontalScroll();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:48:26.637

我找到的唯一解决方案是调整css。在其根文件夹中有一个 CSS 字段名称**jquery.horizo​​ntal.scroll.css**

我将其更改如下，现在我有 14 张图片正在显示：

```
#horiz_container
{
    width:7064px;
    margin:0px;
    padding:0px;
    height:300px;
    margin-left:0px;
} 
```

我玩的所有东西都是**width**和**margin-left**属性。

转到你的**.php**文件并添加 14 个图像并更改 ID **#horiz_container**的 CSS，就像我提到的那样。

# php - Codeigniter - 表单中每个字段的验证规则

> ID：14582436
> 
> 赞同：0
> 
> 时间：2013-01-29T12:03:14.773
> 
> 标签：php, codeigniter, validation

我是 Codeigniter 的新手，在验证表单时发现了我的第一个麻烦。有验证表单库可以帮助做到这一点，它具有设置规则的功能，例如：

```
$this->form_validation->set_rules('username', 'Username', 'required'); 
```

我在文档中找不到任何关于将所需规则应用于表单中的每个字段的信息（因为它是根据数据库内容动态生成的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:19:44.770

感谢Rooneyl，这是答案：

CodeIgniter 不支持通过所有输入字段设置验证规则。尽管如此，可以在循环内使用设置规则。对我来说幸运的是，我的表单是从数据库内容生成的，因此循环通过相同的表元素使生成规则对我来说更容易。

但是，如果表单不是动态生成的，我们总是可以循环查看帖子（取自 CI 论坛）：

```
foreach($_POST as $p) {
    $this->form_validation->set_rules($p, ucfirst($p), 'required|trim');
} 
```

# java - 如何在运行时从类序列化中排除字段？

> ID：14582440
> 
> 赞同：35
> 
> 时间：2013-01-29T12:03:25.500
> 
> 标签：java, serialization

如何在运行时从序列化过程中排除类字段？编译时间有**瞬态**修饰符，但运行时呢？我的意思是使用 ObjectOutputStream 进行常见的 java 序列化，而不是 gson 之类的。

对不起，我认为我没有解释正确。这不完全是关于序列化，而是关于**反**序列化。我有一批遗留文件并像这样处理它们：

```
public class Deserialize {

/**
 * @param args
 * @throws IOException 
 * @throws ClassNotFoundException 
 */
public static void main(String[] args) throws ClassNotFoundException, IOException {
    File file = new File("/home/developer/workspace/DDFS/some.ddf");
    HackedObjectInputStream in = new HackedObjectInputStream(new GZIPInputStream(new FileInputStream(file)));

    System.out.println("Attempt to open " + file.getAbsolutePath());
    Object obj = in.readObject();
    in.close();

}

 static class HackedObjectInputStream extends ObjectInputStream
    {

        /**
         * Migration table. Holds old to new classes representation.
         */
        private static final Map<String, Class<?>> MIGRATION_MAP = new HashMap<String, Class<?>>();

        static
        {
            MIGRATION_MAP.put("DBOBExit", Exit.class);
        }

        /**
         * Constructor.
         * @param stream input stream
         * @throws IOException if io error
         */
        public HackedObjectInputStream(final InputStream stream) throws IOException
        {
            super(stream);
        }

        @Override
        protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFoundException
        {
            ObjectStreamClass resultClassDescriptor = super.readClassDescriptor();

            for (final String oldName : MIGRATION_MAP.keySet())
            {
                if (resultClassDescriptor.getName().equals(oldName))
                {
                    resultClassDescriptor = ObjectStreamClass.lookup(MIGRATION_MAP.get(oldName));   
                }
            }

            return resultClassDescriptor;
        }

    } 
```

}

此代码适用于大多数文件，但有些文件会抛出

```
Exception in thread "main" java.lang.ClassCastException: cannot assign instance of java.awt.Polygon to field Exit.msgbackPt of type java.awt.Point in instance of Exit
at java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2053) 
```

因为 Exit 类的版本不同。新版本有新领域。当我将瞬态添加到新字段时错误消失，但另一个文件开始抛出异常（最新文件）。

那么，如果我检测到遗留的序列化文件，我可以在运行时向这些新文件添加瞬态吗？也许反射或什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-29T12:09:39.303

[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)的文档说：

> 对象的默认序列化机制写入对象的类、类签名以及所有**非瞬态**和非静态字段的值。对其他对象的引用（瞬态或静态字段除外）也会导致这些对象被写入。

因此，当您将变量声明为瞬态时，ObjectOutputStream 应将其忽略。确保使用`transient`关键字而不是`@Transient`注释。一些 ORM 框架使用此类注释来标记不应保存在数据库中的字段。它们对于内置序列化框架毫无意义。

```
private transient String foo; // Field gets ignored by ObjectOutputStream
@Transient private String bar; // Treated normally by ObjectOutputStream (might mean something for some other framework) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T01:12:50.483

您可以使用`transient`修饰符：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:11:18.533

特定类的序列化表示取决于类本身，您不能在外部更改它，最接近的方法是定义具有自定义序列化行为的子类，但这只会影响该子类的对象，而不影响父类的对象类型。

如果您根本无法修改有问题的类，那么您唯一的选择是继承 ObjectOutputStream 并覆盖`replaceObject`以在写入时将问题对象替换为仅包含所需数据的不同对象，并在读取时进行镜像处理（子类 ObjectInputStream 和覆盖`resolveObject`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T00:50:30.773

你在这里挖错洞了。与其在运行时决定要序列化和重写哪些字段，不如`readClassDescriptor()`考虑重写`readResolve()`。

# r - 将两个标题合并为一个

> ID：14582441
> 
> 赞同：0
> 
> 时间：2013-01-29T12:03:31.713
> 
> 标签：r

很简单的问题。我正在使用一个有两行列标题的 Excel 表；如何将这两个行标题合二为一？此外，这些标题不会从工作表的顶部开始。

因此，我有 DF1

```
Temp Press  Reagent  Yield A  Conversion etc
degC bar    /g       %        %             
1    2      3        4        5          
6    7      8        9        10 
```

而且我要，

```
Temp degC Press bar  Reagent /g  Yield A % Conversion etc
1         2          3           4         5          
6         7          8           9        10 
```

使用 colnames(DF1) 返回大写的名字，但是让第二行与大写的名字合并一直让我望而却步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:20:57.283

这应该有效。读取数据时只需要设置 stringsAsFactors=FALSE。

```
data <- structure(list(Temp = c("degC", "1", "6"), Press = c("bar", "2", 
"7"), Reagent = c("/g", "3", "8"), Yield.A = c("%", "4", "9"), 
    Conversion = c("%", "5", "10")), .Names = c("Temp", "Press", 
"Reagent", "Yield.A", "Conversion"), class = "data.frame", row.names = c(NA, 
-3L)) # Your data

colnames(data) <-paste(colnames(dados),dados[1,]) # Set new names
data <- data[-1,] # Remove first line

data <- data.frame(apply(data,2,as.real)) # Correct the classes (works only if all collums are numbers) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:21:20.697

使用您的数据，修改为引用包含分隔符的文本字段（获取用于生成文件的任何工具来为您引用文本字段！）

```
txt <- "Temp Press  Reagent  'Yield A'  'Conversion etc'
degC bar    /g       %        %             
1    2      3        4        5          
6    7      8        9        10
" 
```

下面的这段代码分两步读取文件

1.  首先我们读取数据，所以`skip = 2`意味着跳过前两行
2.  接下来我们再次读取数据，但只读取前两行，然后通过数据帧列中的字符串`sapply()`进一步处理此输出。这些被分配给`paste(x, collapse = " ")``labs``names``dat`

这是代码：

```
dat <- read.table(text = txt, skip = 2)
labs <- read.table(text = txt, nrows = 2, stringsAsFactors = FALSE)
names(dat) <- sapply(labs, paste, collapse = " ")

dat
names(dat) 
```

代码在运行时产生：

```
> dat <- read.table(text = txt, skip = 2)
> labs <- read.table(text = txt, nrows = 2, stringsAsFactors = FALSE)
> names(dat) <- sapply(labs, paste, collapse = " ")
> 
> dat
  Temp degC Press bar Reagent /g Yield A % Conversion etc %
1         1         2          3         4                5
2         6         7          8         9               10
> names(dat)
[1] "Temp degC"        "Press bar"        "Reagent /g"      
[4] "Yield A %"        "Conversion etc %" 
```

在您的情况下，您需要修改`read.table()`调用以指向文件系统上的文件，因此在代码块中使用`file = "foo.txt"`代替，其中是文件的名称。`text = txt``"foo.txt"`

此外，如果这些标题不是从文件顶部开始，则增加到`skip`where`2+n`是`n`两个标题行**之前的行数。**您还需要添加`skip = n`到生成的第二个`read.table()`调用`labs`，其中`n`又是标题行之前的行数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T12:21:34.580

只需加载带有`read.table(file, header = FALSE, stringsAsFactors = F)`参数的文件。然后，您可以`grep`找到发生这种情况的位置。

```
df <- data.frame(V1=c(sample(10), "Temp", "degC"), 
                 V2=c(sample(10), "Press", "bar"), 
                 V3 = c(sample(10), "Reagent", "/g"), 
                 V4 = c(sample(10), "Yield_A", "%"), 
                 V5 = c(sample(10), "Conversion", "%"), 
                 stringsAsFactors=F)
idx <- unique(c(grep("Temp", df$V1), grep("degC", df$V1)))
df2 <- df[-(idx), ]
names(df2) <- sapply(df[idx, ], function(x) paste(x, collapse=" ")) 
```

在这里，如果需要，您可以将所有列转换为数字，如下所示：

```
df2 <- as.data.frame(sapply(df2, as.numeric)) 
```

# mysql - 如何在R中的MySQL数据库中存储数组

> ID：14582445
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:03:45.117
> 
> 标签：mysql, arrays, r

我遇到了一个问题，我需要使用 R 将数组存储在 Mysql 数据库中。

例如：

我有一个矢量图

```
v = c(2,4,5,7,8,9,12,13,34,21,10) 
```

我想把它添加到mysql数据库中。

请告诉我如何存储它，并让我知道 mysql 数据库中的表及其字段是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:08:30.537

谷歌搜索给`R mysql store blob`了我很多很好的链接，例如：

[https://stat.ethz.ch/pipermail/r-sig-db/2008q1/000423.html](https://stat.ethz.ch/pipermail/r-sig-db/2008q1/000423.html)

# android - Android：ActionBar 下拉导航中的部分？

> ID：14582448
> 
> 赞同：0
> 
> 时间：2013-01-29T12:03:49.953
> 
> 标签：android, drop-down-menu, android-actionbar

我只是想弄清楚他们是如何在谷歌音乐应用程序中实现类似部分的下拉导航（[参见 7 英寸设备上的屏幕截图](https://dl.dropbox.com/u/9067481/Google-Music_landscape_dropdown-navigation.png)）。

如您所见，最后两个项目（“Alle Musiktitel”、“Nur auf Gerät”）由更厚的项目分隔符分隔。此外，它们在 ActioBar 中的 currentItem 控件下方显示为副标题。

有人知道如何做到这一点吗？

**编辑：**我在 thepoosh 的建议中做了一些编码（再次感谢），并且问题的一个方面是无法通过考虑的解决方案解决的。尽管不同的布局正确膨胀（使用`getView()`and `getDropDownView()`，[请参阅更新的屏幕截图](https://dl.dropbox.com/u/9067481/MTTApp_startup-screen_rough-ActionBar-ListNavigation.png)），但我无法正确设置所选项目的 TextViews，因为在 Spinner Widget 更改**后**`onNavigationItemSelected()`调用回调并且我不知道如何刷新/使其无效。我可以清楚地表达自己吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:10:07.167

好吧，因为它是一个 ListView，你基本上可以创建一个父界面，它有一个布尔值`isSection`和 2 个视图，其中一个是原始 listView 项目，另一个是简单的：

```
<View android:layout_height="2dp"
      android:layout_width="match_parent"
      android:background="@android:color/white" /> 
```

然后你传递给适配器`ArrayList<MyInterface>`并且在`getView`方法中，你根据接口中的方法为每个项目膨胀`isSection()`。**

# knockout.js - 比较两个字段与淘汰赛验证

> ID：14582450
> 
> 赞同：6
> 
> 时间：2013-01-29T12:03:55.710
> 
> 标签：knockout.js, knockout-validation

我有一个表单的视图模型，我试图将验证添加到使用敲除验证。

```
fromDate: ko.observable(
            moment().subtract('days', 1).startOf('day').format(dateFormat)
          ),
toDate: ko.observable(
            moment().startOf('day').format(dateFormat)
        ), 
```

我需要确保起始日期小于截止日期。我似乎无法获得任何形式的自定义验证器来获取对第二个 observable 的引用。我需要一些类似的东西：

```
toDate: ko.observable(moment().startOf('day').format(dateFormat)).extend({
          validation: {
            validator: function (val, someOtherVal) {
                return moment(val) >= moment(someOtherVal);
            },
            message: 'Must be greater or equal to From Date',
            params: viewModel.fromDate()
          }
        }), 
```

有任何想法吗？

**更新**

我确定我已经尝试过了，但是将扩展方法移动到 onload 函数中是可行的。

```
$(function () {
    ko.validation.configure({ decorateElement: true });

    viewModel.toDate.extend({
    validation: {
            validator: function (val, someOtherVal) {
                return moment(val) >= moment(viewModel.fromDate());
            },
            message: 'To date must be greater than from date',
        }
    });

    ko.applyBindings(viewModel);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:06:29.027

淘汰赛验证的核心规则无法将可观察数据作为验证参数处理。但是已经有一个推送请求可以解决这个问题：[https ://github.com/ericmbarnard/Knockout-Validation/pull/217](https://github.com/ericmbarnard/Knockout-Validation/pull/217)

因此，您必须为此使用自定义角色。您应该将参数作为函数插入（通过省略括号）。这将使淘汰赛验证能够对参数的变化做出反应。

```
function ViewModel() {
    var self = this; // capture this to be able to reference properties

    self.fromDate = ko.observable(
        moment().subtract('days', 1).startOf('day').format(dateFormat)
    );
    self.toDate = ko.observable(
        moment().startOf('day').format(dateFormat)
    ).extend({
      validation: {
        validator: function (val, someOtherVal) {
            return moment(val) >= moment(someOtherVal());
        },
        message: 'Must be greater or equal to From Date',
        params: self.fromDate
      }
    }),
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:40:05.507

查看它的[文档](https://github.com/ericmbarnard/Knockout-Validation)，这看起来像你可以做到的方式：

```
ko.validation.rules['greaterThan'] = {
    validator: function (val, otherVal) {
        return val > otherVal;
    },
    message: 'The field must be greater than {0}'
};

ko.validation.registerExtenders();

fromDate: ko.observable(
            moment().subtract('days', 1).startOf('day').format(dateFormat)
          ),
toDate: ko.observable(
            moment().startOf('day').format(dateFormat)
        ).extend({ greaterThan: fromDate() }); 
```

它未经测试，我不知道您是要传入 fromDate() 还是 fromDate，然后在验证器中使用 otherVal()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T06:04:31.250

这对聚会来说有点晚了，但是当我在谷歌上搜索“knockoutjs 密码字段匹配”时，这是最热门的。

我想要一个不使用验证扩展的匹配器，因为我不需要该包的所有产品。

我发现了一个整洁的 knockoutjs 技巧，用于使用扩展器检查两个或多个字段。也就是说，将原始字段订阅到扩展程序中的第二个字段，以便在更新原始字段时针对第二个字段触发 valueHasMutated()。

```
 ko.extenders.match = function(target, match_original) {
  target.match_ok = ko.observable();
  function copy(value) {
    target.match_ok(value == match_original());
  }
  function original(value) {
    target.valueHasMutated();
  }
  copy(target());
  target.subscribe(copy);
  match_original.subscribe(original);
  return target;
}; 
```

这是一个 jsfiddle 以更好地说明功能 [https://jsfiddle.net/8nugva9f/13/](https://jsfiddle.net/8nugva9f/13/)

高温高压

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-25T12:12:06.933

```
this.fromDate= ko.observable(null).extend({
        date: true,

    });

this.toDate = ko.observable(null).extend({
        date: true,
        min: this.fromDate,

    }); 
```

尝试这个。

# dynamics-crm-2011 - Dynamics CRM 2011 创建自定义实体之间的关系

> ID：14582451
> 
> 赞同：1
> 
> 时间：2013-01-29T12:04:02.967
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我在 MSCRM 2011 中定义了 3 个实体。

**1-Place**：这是主要实体。在此表单中，我有一些字段（比如说 ID、整数），我想与其他自定义实体创建一些关系。
**2-Category**：这有两个字段，ID（整数）和类别名称（文本）。这只是一个关系实体。
**3-Place-Category 关系**：该实体包含Category 和Place 之间的关系。它有两个主要参数，它们都是整数。

一个地方可以有多个类别。

我想显示最终用户 Place 以及与该地点实体相关的类别。

提前致谢。

* * *

关于这个问题的更多信息：
-*就地*实体每个地方都有一个唯一的 ID（1 = 火车站，2 = Jhon's Kebab House，3 = Nando's，4 = Wagamama ...）
-*就地*实体我有大量数据，但类别ID 用于将地点与类别（如 42、108 等）匹配
- 在*类别*实体中，我有两个字段。类别 ID 与其类别名称相匹配（1 = 咖啡馆，2 = 餐厅 ... 42 = 火车站，... 108 = 杂货店等）
- 在*地方-类别关系*实体中，我有地点的 ID 和类别。（如 PlaceID = 1 CategoryID = 42，PlaceID = 2 CategoryID = 2，PlaceID = 2 CategoryID = 5 ..etc）

有 14 万个地点、200 个类别和超过 40 万个地点-类别关系。

一个地方至少有一个，最多80个类别。

我想将我的所有地点与它们的类别实体匹配（借助*地点-类别关系*实体）。

我想自动化这个匹配过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:28:54.330

既然你说过每个地方可以有很多类别，但反之则不然。

所以你只需要两个实体（地点，类别），你应该创建一个一对多

他们之间的关系。

1.  打开默认解决方案
2.  展开地点类别
3.  点击 1:N 关系并在它和类别实体之间创建关系

注意：打开“默认解决方案”舔设置=>自定义=>点击自定义

右侧系统

# jquery - jQuery Isotope 滚动到页面顶部

> ID：14582453
> 
> 赞同：0
> 
> 时间：2013-01-29T12:04:05.113
> 
> 标签：jquery, jquery-isotope

我在这里和其他地方搜索过，但找不到答案。

在我的网站中，我在几个页面中使用了[Isotope](http://isotope.metafizzy.co/)插件，并且一切正常。

问题是在其中一个页面中，插件仅在用户单击按钮时才被初始化。发生的事情是页面自动滚动到顶部。

我找不到阻止这种行为的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:54:55.657

向过滤器按钮添加阻止默认操作：

```
$('.filterable li a').click(function(event){
event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:01:21.700

假设您通过选择对象的 ID 作为初始化同位素的方式来分配点击功能，如果按钮有一个 hastag 作为 url，即：

```
<a id="buttonName" href="#">Click me!</a> 
```

然后，当您单击它时，它会将页面发送回顶部。解决此问题的一种方法是从元素中删除 href，并向其类或 id 添加一些 css，这将导致它在鼠标悬停时显示手形指针光标。

```
#buttonName {  
    cursor: pointer;
} 
```

没有看到您正在使用的链接或代码很难说，但希望这会有所帮助。

# java - Java，FileNotfound 异常，读取 conn.getInputStream() 时

> ID：14582455
> 
> 赞同：1
> 
> 时间：2013-01-29T12:04:11.137
> 
> 标签：java, http-post

请告诉我一些，如何解决这个问题，有时我得到 Filenotfound 异常，有时这段代码工作正常。

下面是我的代码，

```
public String sendSMS(String data, String url1) {
            URL url;

            String status = "Somthing wrong ";
            try {
                url = new URL(url1);
                URLConnection conn = url.openConnection();
                conn.setDoOutput(true);
                conn.setRequestProperty("User-Agent","Mozilla/5.0 ( compatible ) ");
                conn.setRequestProperty("Accept","*/*");
                OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
                wr.write(data);
                wr.flush();

                // Get the response
                try {
                    BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
                    String s;
                    while ((s = rd.readLine()) != null) {
                        status = s;
                    }
                    rd.close();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }

                wr.close();

            } catch (MalformedURLException e) {
                status = "MalformedURLException Exception in sendSMS";
                e.printStackTrace();
            } catch (IOException e) {
                status = "IO Exception in sendSMS";
                e.printStackTrace();
            }

            return status;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:17:19.880

像这样重写，让我知道你是怎么做的......（注意关闭读写流，如果抛出异常，还要清理流）。

```
public String sendSMS(String data, String url1) {
    URL url;
    OutputStreamWriter wr = null;
    BufferedReader rd = null;

    String status = "Somthing wrong ";

    try {

        url = new URL(url1);
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);
        conn.setRequestProperty("User-Agent","Mozilla/5.0 ( compatible ) ");
        conn.setRequestProperty("Accept","*/*");

        wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(data);
        wr.flush();
        wr.close();

        rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String s;
        while ((s = rd.readLine()) != null) {
            status = s;
        }
        rd.close();                

    } catch (Exception e) {
        if (wr != null) try { wr.close(); } catch (Exception x) {/*cleanup*/}
        if (rd != null) try { rd.close(); } catch (Exception x) {/*cleanup*/}
        e.printStackTrace();
    }    

    return status;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:58:02.703

这个问题似乎是已知的，但由于不同的原因，所以不清楚为什么会发生这种情况。

一些线程会建议关闭 OutputStreamWriter 因为刷新它是不够的，因此我会尝试在刷新后直接关闭它，因为您没有在刷新和关闭之间的代码中使用它。

其他线程表明，使用不同的连接（如 HttpURLConnection）可以避免发生此问题（看[这里](https://stackoverflow.com/a/4136963/395659)）

[另一篇文章](http://baskus.wordpress.com/2010/08/29/httpurlconnection-getinputstream-filenotfoundexception/)建议使用 URLEncoder 类的静态方法 encode。此方法接受一个字符串并将其编码为可以放入 URL 的字符串。

一些类似的问题：

[可以使用浏览器访问 URL，但仍然可以使用 URLConnection 访问 FileNotFoundException](https://stackoverflow.com/questions/8279219/url-is-accessable-with-browser-but-still-filenotfoundexception-with-urlconnectio)

[非标准 HTTP 端口源的 URLConnection FileNotFoundException](https://stackoverflow.com/questions/941628/urlconnection-filenotfoundexception-for-non-standard-http-port-sources)

[URLConnection 抛出 FileNotFoundException](http://objectmix.com/weblogic/565831-urlconnection-throwing-filenotfoundexception.html)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T16:12:32.987

当服务器对 HTTP 请求的响应是代码 404 时，它返回 FileNotFoundException。

检查您的网址。

# php - 使用 Jquery 和 PHP 的联系表

> ID：14582463
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:04:44.083
> 
> 标签：php, jquery, contact-form

尝试在我的网站上设置 Jquery 和 PHP 联系表单，在此处找到[http://www.greenlite.co.uk/Contactus.html](http://www.greenlite.co.uk/Contactus.html)

我认为我对 PHP 文件做错了。我已将必要的电子邮件放入 PHP 文件中，但我不确定我是否已将其正确链接到主代码中，甚至不确定如何做到这一点。甚至在根文件中添加它的位置。

这是我正在使用的代码；

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>Contact Form</title>

    <link href="js/style.css" rel="stylesheet" />

    <script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="js/contact/jquery.validate.min.js"></script>
    <script type="text/javascript" src="js/contact/jquery.form.js"></script>
    <script type="text/javascript" src="js/contact.js"></script>
  </head>
  <body>
<div id="wrap">
  <h1>Contact Greenlite Controls</h1>
  <form id="contactform" action="processForm.php" method="post">
    <table>
      <tr>
        <td><label for="name">Name:</label></td>
        <td><input type="text" id="name" name="name" /></td>
      </tr>
      <tr>
        <td><label for="email">Email:</label></td>
        <td><input type="text" id="email" name="email" /></td>
      </tr>
      <tr>
        <td><label for="message">Message:</label></td>
        <td><textarea id="message" name="message" rows="5" cols="20"></textarea></td>
      </tr>
      <tr>
        <td></td>
        <td><input type="submit" value="Send" id="send" /></td>
      </tr>
    </table>
  </form>
  <div id="response"></div>
</div>
  </body>
</html> 
```

这是PHP

```
<?php

// Clean up the input values
foreach($_POST as $key => $value) {
 if(ini_get('magic_quotes_gpc'))
$_POST[$key] = stripslashes($_POST[$key]);

  $_POST[$key] = htmlspecialchars(strip_tags($_POST[$key]));
}

// Assign the input values to variables for easy reference
$name = $_POST["name"];
$email = $_POST["email"];
$message = $_POST["message"];

// Test input values for errors
$errors = array();
if(strlen($name) < 2) {
  if(!$name) {
    $errors[] = "You must enter a name.";
  } else {
    $errors[] = "Name must be at least 2 characters.";
  }
}
 if(!$email) {
  $errors[] = "You must enter an email.";
} else if(!validEmail($email)) {
  $errors[] = "You must enter a valid email.";
}
if(strlen($message) < 10) {
  if(!$message) {
    $errors[] = "You must enter a message.";
  } else {
    $errors[] = "Message must be at least 10 characters.";
  }
}

if($errors) {
  // Output errors and die with a failure message
   $errortext = "";
  foreach($errors as $error) {
    $errortext .= "<li>".$error."</li>";
  }
  die("<span class='failure'>The following errors occured:<ul>". $errortext ."</ul>        </span>");
}

// Send the email
$to = "mick@greenlite.co.uk";
$subject = "Contact Form: $name";
$message = "$message";
$headers = "From: $email";

mail($to, $subject, $message, $headers);

// Die with a success message
die("<span class='success'>Success! Your message has been sent.</span>");

// A function that checks to see if
// an email is valid
function validEmail($email)
{
   $isValid = true;
   $atIndex = strrpos($email, "@");
   if (is_bool($atIndex) && !$atIndex)
   {
      $isValid = false;
  }
   else
   {
      $domain = substr($email, $atIndex+1);
      $local = substr($email, 0, $atIndex);
      $localLen = strlen($local);
      $domainLen = strlen($domain);
      if ($localLen < 1 || $localLen > 64)
      {
         // local part length exceeded
         $isValid = false;
      }
      else if ($domainLen < 1 || $domainLen > 255)
      {
         // domain part length exceeded
         $isValid = false;
      }
      else if ($local[0] == '.' || $local[$localLen-1] == '.')
     {
       // local part starts or ends with '.'
     $isValid = false;
  }
  else if (preg_match('/\\.\\./', $local))
  {
     // local part has two consecutive dots
     $isValid = false;
  }
  else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain))
  {
     // character not valid in domain part
     $isValid = false;
  }
  else if (preg_match('/\\.\\./', $domain))
  {
     // domain part has two consecutive dots
     $isValid = false;
  }
  else if(!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/',
             str_replace("\\\\","",$local)))
  {
     // character not valid in local part unless
     // local part is quoted
     if (!preg_match('/^"(\\\\"|[^"])+"$/',
         str_replace("\\\\","",$local)))
     {
        $isValid = false;
     }
  }
  if ($isValid && !(checkdnsrr($domain,"MX") || checkdnsrr($domain,"A")))
  {
     // domain not found in DNS
     $isValid = false;
    }
   }
        return $isValid;
    }

    ?> 
```

基本上，如果不清楚，在我使用联系表格后，我会得到“正在发送”，但它不会死。我没有收到成功消息，也没有发送邮件。我只能假设它与PHP有关。

我已将 PHP 文件放入名为 php 的根目录中的文件夹中，并尝试从 "action="php/ProcessForm.php" 中调用它，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:16:03.807

为什么不使用 Jquery 验证表单，而是在 PHP 中验证？

尝试使用 AJAX 发送您的表单和 Jquery UI 以响应您的用户成功或失败。

尝试在查询和 $.ajax 中使用 .serialize() ( [http://api.jquery.com/serialize/ ) 函数。](http://api.jquery.com/serialize/)

这样，您就可以清理您的 php 文件并找到错误。

看一个简单的代码示例：

调用提交函数：

```
 $().ready(function(e) {
    $("#cad_cliente").submit(function(e){
        e.preventDefault();
        insertDataForm(getDataForm());
                });
        return false;
    }); 
```

序列化参数：

```
 function getDataForm(){
    var params=$("#cad_cliente").serialize();
    return params;
  } 
```

在您的 php 文件中发布值：

```
 $.ajax({
        type: 'post',
        url:'registra.php',
        data:params,
        cache:false,
        success: function(){
            Alert("mesenge");
        }
    });
} 
```

很高兴我能帮助你...

# memory-management - Go 内存消耗管理

> ID：14582471
> 
> 赞同：25
> 
> 时间：2013-01-29T12:05:04.100
> 
> 标签：memory-management, go, memory-consumption

我是 Go 新手，并试图弄清楚它是如何管理内存消耗的。

在我的一个测试项目中，我的记忆力有问题。我不明白为什么当我的程序运行很长时间时，Go 会使用越来越多的内存（从不释放它）。

我正在运行下面提供的测试用例。第一次分配后，程序使用了近 350 MB 的内存（根据 ActivityMonitor）。然后我尝试释放它，ActivityMonitor 显示内存消耗翻了一番。为什么？

我正在使用 Go 1.0.3 在 OS X 上运行此代码。

这段代码有什么问题？在 Go 程序中管理大变量的正确方法是什么？

在实现一个使用大量时间和内存的算法时，我遇到了另一个与内存管理相关的问题。运行一段时间后，它会引发“内存不足”异常。

```
package main

import ("fmt" 
"time"
)

func main() {
  fmt.Println("getting memory")
  tmp := make([]uint32, 100000000)
  for kk, _ := range tmp {
    tmp[kk] = 0
  }
  time.Sleep(5 * time.Second)
  fmt.Println("returning memory")
  tmp = make([]uint32, 1)
  tmp = nil
  time.Sleep(5 * time.Second)
  fmt.Println("getting memory")
  tmp = make([]uint32, 100000000)
  for kk, _ := range tmp {
    tmp[kk] = 0
  }
  time.Sleep(5 * time.Second)
  fmt.Println("returning memory")
  tmp = make([]uint32, 1)
  tmp = nil
  time.Sleep(5 * time.Second)  
  return
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-29T15:27:16.777

目前，go 使用[标记和清除垃圾收集器](http://en.wikipedia.org/wiki/Mark-and-sweep#Na.C3.AFve_mark-and-sweep)，它通常不会定义对象何时被丢弃。

然而，如果你仔细观察，有一个调用[`sysmon`](https://github.com/golang/go/blob/be589f8d2b721aa86fd5e406733f61a5ed245d3a/src/runtime/proc.go#L4185)的 goroutine 基本上只要你的程序运行就运行，并且定期调用 GC：

```
// forcegcperiod is the maximum time in nanoseconds between garbage
// collections. If we go this long without a garbage collection, one
// is forced to run.
//
// This is a variable for testing purposes. It normally doesn't change.
var forcegcperiod int64 = 2 * 60 * 1e9

(...)

// If a heap span goes unused for 5 minutes after a garbage collection,
// we hand it back to the operating system.
scavengelimit := int64(5 * 60 * 1e9) 
```

[`forcegcperiod`](https://github.com/golang/go/blob/be589f8d2b721aa86fd5e406733f61a5ed245d3a/src/runtime/proc.go#L4175-L4180)确定强制调用 GC 的时间段。[`scavengelimit`](https://github.com/golang/go/blob/be589f8d2b721aa86fd5e406733f61a5ed245d3a/src/runtime/proc.go#L4191-L4193)确定跨度何时返回到操作系统。[跨度是](https://github.com/golang/go/blob/be589f8d2b721aa86fd5e406733f61a5ed245d3a/src/runtime/malloc.go#L22)可以容纳多个对象的多个内存页。它们被保留`scavengelimit`一段时间，如果没有物体在它们上面并且`scavengelimit`被超过，它们就会被释放。

在代码的更下方，您可以看到有一个跟踪选项。每当清道夫认为他需要清理时，您可以使用它来查看：

```
$ GOGCTRACE=1 go run gc.go
gc1(1): 0+0+0 ms 0 -> 0 MB 423 -> 350 (424-74) objects 0 handoff
gc2(1): 0+0+0 ms 1 -> 0 MB 2664 -> 1437 (2880-1443) objects 0 handoff
gc3(1): 0+0+0 ms 1 -> 0 MB 4117 -> 2213 (5712-3499) objects 0 handoff
gc4(1): 0+0+0 ms 2 -> 1 MB 3128 -> 2257 (6761-4504) objects 0 handoff
gc5(1): 0+0+0 ms 2 -> 0 MB 8892 -> 2531 (13734-11203) objects 0 handoff
gc6(1): 0+0+0 ms 1 -> 1 MB 8715 -> 2689 (20173-17484) objects 0 handoff
gc7(1): 0+0+0 ms 2 -> 1 MB 5231 -> 2406 (22878-20472) objects 0 handoff
gc1(1): 0+0+0 ms 0 -> 0 MB 172 -> 137 (173-36) objects 0 handoff
getting memory
gc2(1): 0+0+0 ms 381 -> 381 MB 203 -> 202 (248-46) objects 0 handoff
returning memory
getting memory
returning memory 
```

如您所见，在获取和返回之间没有执行 gc 调用。但是，如果您将延迟从 5 秒更改为 3 分钟（超过 2 分钟`forcegcperiod`），对象将被 gc 删除：

```
returning memory
scvg0: inuse: 1, idle: 1, sys: 3, released: 0, consumed: 3 (MB)
scvg0: inuse: 381, idle: 0, sys: 382, released: 0, consumed: 382 (MB)
scvg1: inuse: 1, idle: 1, sys: 3, released: 0, consumed: 3 (MB)
scvg1: inuse: 381, idle: 0, sys: 382, released: 0, consumed: 382 (MB)
gc9(1): 1+0+0 ms 1 -> 1 MB 4485 -> 2562 (26531-23969) objects 0 handoff
gc10(1): 1+0+0 ms 1 -> 1 MB 2563 -> 2561 (26532-23971) objects 0 handoff
scvg2: GC forced // forcegc (2 minutes) exceeded
scvg2: inuse: 1, idle: 1, sys: 3, released: 0, consumed: 3 (MB)
gc3(1): 0+0+0 ms 381 -> 381 MB 206 -> 206 (252-46) objects 0 handoff
scvg2: GC forced
scvg2: inuse: 381, idle: 0, sys: 382, released: 0, consumed: 382 (MB)
getting memory 
```

内存仍未释放，但 GC 将内存区域标记为未使用。当使用的跨度未使用且早于 时，将开始释放`limit`。从清道夫代码：

```
if(s->unusedsince != 0 && (now - s->unusedsince) > limit) {
    // ...
    runtime·SysUnused((void*)(s->start << PageShift), s->npages << PageShift);
} 
```

当然，这种行为可能会随着时间而改变，但我希望你现在对物体被强行扔掉和不被扔掉有一点感觉。

正如 zupa 所指出的，释放对象可能不会将内存返回给操作系统，因此在某些系统上您可能看不到内存使用量的变化。[根据golang-nuts 上的这个线程](https://groups.google.com/forum/#!topic/golang-nuts/vfmd6zaRQVs)，Plan 9 和 Windows 似乎就是这种情况。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-29T12:14:23.690

要最终（强制）收集未使用的内存，您必须调用[`runtime.GC()`](http://golang.org/pkg/runtime/#GC).

`variable = nil`可能会使事物无法访问，因此有资格收集，但它本身并没有释放任何东西。

# iphone - 是否可以有条件地使用 iOS 6 功能但仍支持旧设备？

> ID：14582474
> 
> 赞同：1
> 
> 时间：2013-01-29T12:05:11.447
> 
> 标签：iphone, objective-c

有时，新版本的 iOS 中添加了一些很容易使用的功能，但您不想仅仅因为一个小功能就阻止旧设备上的用户使用该应用程序。

我刚刚添加`UIRefreshControl`到一个应用程序，该应用程序是在 iOS 6 中添加的。我不太关心使用 3rd 方解决方案（其中有很多），我只是不想调用设置的代码如果我在旧设备上运行它。我怀疑，作为一种静态语言，这是不可能的，但我想我会问一下，看看是否有办法实现这一点。

显然，如果我只是共享代码，我可以使用预处理器宏来执行此操作，但我需要构建应用程序以在 iOS 5.1 + iOS 6.0 上执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:10:15.913

这是完全可能的，只需检查一个类是否可用：

```
if ([UIRefreshControl class]) {
   // the UIRefreshControl is available.
} 
```

与现有类的新方法相同：

```
if ([self.someLabel  respondsToSelector:@selector(setAttributedText:)]) {
    // The label support attributed strings
} 
```

Objective-c 并不是你想象的那样是静态的，只要确保你弱链接任何在早期版本的 iOS 中不可用的框架。

# java - 如何使用 Java pdfbox api 以 PDF 形式设置值

> ID：14582478
> 
> 赞同：1
> 
> 时间：2013-01-29T12:05:28.243
> 
> 标签：java, pdf, pdfbox

我需要使用 JAVA pdacroform api 为 PDF 表单设置一个值

在为 PDF 文件中的特定字段设置值的代码下方，但它抛出

线程“主”java.lang.NoClassDefFoundError 中的异常：org/fontbox/afm/AFMParser

尽管添加了 fontbox-1.7.jar

任何人都可以帮我吗？

```
import java.io.IOException;

import org.pdfbox.pdmodel.interactive.form.PDAcroForm;
import org.pdfbox.pdmodel.interactive.form.PDField;

import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.PDDocumentCatalog;

import org.pdfbox.exceptions.COSVisitorException;

import org.pdfbox.examples.AbstractExample;

public class SetField extends AbstractExample {

    public void setField(PDDocument pdfDocument, String name, String value)
            throws IOException {
        PDDocumentCatalog docCatalog = pdfDocument.getDocumentCatalog();
        PDAcroForm acroForm = docCatalog.getAcroForm();
        PDField field = acroForm.getField(name);
        if (field != null) {
            field.setValue(value);
        } else {
            System.err.println("No field found with name:" + name);
        }

    }

    public static void main(String[] args) throws IOException,
            COSVisitorException {
        SetField setter = new SetField();
        setter.setField(args);
    }

    private void setField(String[] args) throws IOException,
            COSVisitorException {
        PDDocument pdf = null;
        try {
            if (args.length != 3) {
                usage();
            } else {
                SetField example = new SetField();

                pdf = PDDocument.load(args[0]);
                example.setField(pdf, args[1], args[2]);
                pdf.save(args[0]);
            }
        } finally {
            if (pdf != null) {
                pdf.close();
            }
        }
    }

    private static void usage() {
        System.err
                .println("usage: org.apache.pdfbox.examples.fdf.SetField <pdf-file> <field-name> <field-value>");
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:32:22.730

由于缺少带有类定义的 jar，您将收到 java.lang.NoClassDefFoundError。

您需要将 FontBox jar 添加到您的类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:59:52.583

根据您对@user1951544 的回答的评论，您似乎使用的是非常旧的 PdfBox 0.7.3 版。这很可能与当前的 FontBox jar 不能很好地配合。我建议更新到当前状态。

在这种情况下，您还应该考虑 fontbox 所需的其他硬依赖项：

> [主要的 PDFBox 组件 pdfbox 对 fontbox 和 jempbox 组件以及 commons-logging 库具有硬依赖。](http://pdfbox.apache.org/dependencies.html)

# php - 在 php 中使用数组填充 DropdownMenu

> ID：14582479
> 
> 赞同：1
> 
> 时间：2013-01-29T12:05:41.607
> 
> 标签：php, html, arrays, drop-down-menu

有人能告诉我如何用数组中的元素填充下拉菜单，当有人选择某个专辑时，比如提交表单后的关闭时间，它将替换为数组的第二个元素“in voorraad”我一直在尝试搜索它，我在任何地方都找不到。

php形式的数组

```
$album["Closing time"]="in voorraad";
$album["Rumba Azul"]="uit voorraad"; 
$album["Survivor"]="in voorraad";  
$album["Greatest Hits Queen"]="uit voorraad";
$album["3121 Prince"]="in voorraad"; 
```

html部分我不知道如何查询数组

```
<form action="Albert_verwerken.php" method="post">
<table border=1 cellspacing=0 cellpading=0>  
<tr> <td>Achgternaam:</td> <td><input type="text" name="achternaam"></td></tr>   
<tr> <td>Voornaam:</td> <td><input type="text" name="voornaam"></td></tr>
<tr> <td>Adres:</td> <td><input type="text" name="adres"></td></tr>
<tr> <td>Postcode:</td> <td><input type="text" name="postcode"></td></tr>
<tr> <td>Plaats:</td> <td><select name="plaats">
<option value="">Kies...</option>
<option value="amsterdam">Amsterdam</option>
<option value="rotterdam">Rotterdam</option>
</select></td></tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:08:40.690

```
foreach($array as $key=>$value){
    $html .= "<option value='$key'>$value</key>";
}

echo "<select name="process">$html</select>"; 
```

其中 $array 是您的数组。

参考： http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

然后你可以在处理中选择它，如下所示：

```
$p = $_POST; //assuming its post

$value = $p['process']; 
```

# java - JavaMail IMAP IDLE 与轮询可靠性

> ID：14582480
> 
> 赞同：2
> 
> 时间：2013-01-29T12:05:45.553
> 
> 标签：java, email, imap

我想编写一个处理传入电子邮件的服务器进程。为此，我看到两个选项 1\. 轮询和 2\. 使用 IMAP IDLE 功能的电子邮件推送。两者都可以使用 JavaMail 完成。我倾向于使用 IMAP IDLE 来实现整体，但我对可靠性有些担忧。由于它将作为服务器进程 7x24 运行，因此如果服务只是保持、冻结或无响应，这将是致命的。

所以最后的问题是，IMAP IDLE 特性是否可以安全地在服务器进程中实现，或者就可靠性和稳定性而言，轮询方法是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:37:31.813

IMAP Idle 不会 24x7 运行，通常几乎所有的邮件都为 IDLE 定义了一个超时时间，比如 30 分钟如果服务器没有这样做，那么它可能是一个很大的瓶颈，因为像 imap/ipad 之类的设备和一些其他客户端同时实例化几个实例，可能会或可能不会关闭连接，如果没有空闲超时，那么服务器将堆积如此多的未终止和无用的连接，有效地阻塞整个系统。

轮询可能是一个不错的选择，但这可能会再次减慢服务速度，因为每次都需要扫描用户的整个邮箱以查找任何邮件活动。

我建议使用 IDLE，因为它以最少的资源运行（在服务器上）并且对任何更新都有效，并且不要忘记在 30 分钟之前断开与客户端的连接（超时值，听说过不同的问题）

# php - 如何让 PDO bindValue/bindParam 与 MySQL 绑定？

> ID：14582488
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:06:08.480
> 
> 标签：php, mysql, pdo

我过去一直在使用 mysql 和 mysqli，但是我正在开始一个新项目，所以想用 PDO-mysql 回到 OOP .. 但是，它不想工作：

```
$dbh = new PDO('mysql:host='.$host.';dbname='.$database, $username, $password);
if(isset($_POST["name"]) && isset($_POST["password"]))
    {

        $pwdHasher = new PasswordHash(8, FALSE);
        $hash = $pwdHasher->HashPassword($_POST["password"]);
        //$insert = $dbh->prepare('insert into users (username,password) values ("?","?")');
        $insert = $pdo->prepare("insert into users (username,password) values (?,?)");      
        $insert->bindParam(1,$_POST["name"]);
        $insert->bindParam(2,$hash);
        $insert->execute();
        echo "Registration Success!";
    } 
```

编辑：如果我将代码从注释行更改为非注释行（即单引号到双引号），则上面的代码有效但是，这在以后不起作用：

```
$query = $pdo->prepare("select * from users where username = ?");
$query->bindParam(1,$_POST["name"]);
$result = $query->execute() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:31:28.963

好的，您已经找到了第一个问题的答案。
对于第二个，它将是

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

连接后立即调用。
它会告诉你你的查询出了什么问题。

```
error_reporting(E_ALL); 
```

也总是有助于解决诸如拼写错误的变量之类的错误（例如，$pdo 不是 $dbh）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T12:25:18.237

如果你想用？对于占位符，您应该将数组发送到与问号位置匹配的执行方法。`$insert->execute(array('value1', 'value2'));`

但是，您可以使用命名占位符`.. WHERE x = :myxvalue`并使用`$insert->bindValue(':myxvalue', 'thevalue', PDO::PARAM_STR);`

`bindParam`另外，请看一下和之间的区别`bindValue`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T12:43:04.520

这个问题的答案很简单也很尴尬：我需要将准备好的sql语句周围的单引号更改为双引号（并删除'？'标记所在的双引号。更改：

```
$insert = $dbh->prepare('insert into users (username,password) values ("?","?")'); 
```

至

```
$insert = $dbh->prepare("insert into users (username,password) values (?,?)"); 
```

一切正常。

# jms - Websphere MQ 上的 JMS 和回退队列

> ID：14582494
> 
> 赞同：0
> 
> 时间：2013-01-29T12:06:29.107
> 
> 标签：jms, java-ee-6, ibm-mq, message-driven-bean, weblogic12c

我将 MQ 作为 Weblogic 服务器上的外部 JMS 服务器。问题是我需要回滚消息并重试，直到达到回退阈值。然后我需要将消息移动到回退队列。

MessageDrivenContext.setRollbackOnly() 方法可以很好地解决这个问题。然而，问题在于回退队列上的消息——它是未提交的。

此外，一旦新消息出现在主队列上，消息就会从回退队列中取出并再次处理。

这表明我的方法存在严重错误。但是，我无法改变这样一个事实，即我必须使用相同的消息多次重试 onMessage() 并将其发送到回退队列，以达到回退阈值。

```
@MessageDriven( name="MQListener", mappedName = "jms.mq.SOME.QUEUE.NAME",
        activationConfig = 
        { 
            @ActivationConfigProperty(propertyName = "destinationType",propertyValue = "javax.jms.Queue"),
            @ActivationConfigProperty(propertyName = "destination", propertyValue = "jms.mq.SOME.QUEUE.NAME"),
            @ActivationConfigProperty(propertyName = "connectionFactoryJndiName", propertyValue = "jms.mq.MQ"),
            @ActivationConfigProperty(propertyName = "useJNDI", propertyValue = "true")
        }) 
public class MQListener implements MessageListener {
    @Resource
    private MessageDrivenContext context;

    @Override
    public void onMessage(Message message) {
        String messageContent="";

        try {
            messageId = message.getJMSMessageID();
            if (message != null) {
                messageContent = ((TextMessage)message).getText();
                if(!doSomething(messageContent)){
                    // doSomething fails, I need to rollback the message and try again:
                    context.setRollbackOnly();
                }
            }
        } catch (Exception e) {
            throw new RuntimeException();
        }

    }

    private boolean doSomething(String messageContent){
        // ...
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:44:03.457

我是 EJB 的泰罗。但是从我在您的代码片段中可以看到，我认为您缺少`MessageDrivenContext`. 我想你必须做

```
context = getMessageDrivenContext(); 
context.setRollbackOnly(); 
```

或者

```
getMessageDrivenContext().setRollbackOnly(); 
```

# php - 将参数从 c++ 传递到 php

> ID：14582495
> 
> 赞同：1
> 
> 时间：2013-01-29T12:06:29.907
> 
> 标签：php, c++, parameters

> **可能重复：**
> [PHP 和 C++ 可以在彼此之间传递数据吗？](https://stackoverflow.com/questions/9936280/can-php-and-c-pass-data-between-each-other)

我想将一些参数从 C++ 传递给 PHP，但我不知道该使用什么。`$_POST`这些连接是否足够或`$_GET`有更好的选择？

PHP 只是一个简单的“数据到 OpenOffice 文档”脚本。该脚本需要从 C++ 应用程序接收一些参数，并根据这些参数从 MySQL 数据库中收集数据。

**编辑：**

[找到了答案，我可以通过URL 传递](http://www.plus2net.com/php_tutorial/variables2.php)简单地实现我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:12:27.773

使用[system()](http://www.cplusplus.com/reference/cstdlib/system/)启动 php 解释器，将脚本名称和任何附加参数作为参数的一部分传递`command`。[然后，您可以使用$argv](http://php.net/manual/en/reserved.variables.argv.php)变量访问传递给脚本的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:16:32.530

除了类似的问题，看看在[互联网上使用 PHP 执行 C++ 应用程序](http://archive.networknewz.com/networknewz-10-20020311Executing-A-C-Application-Over-The-Internet-With-PHP.html)。

# excel - 使用 VBA 进行颜色填充，以单元格值为条件

> ID：14582498
> 
> 赞同：1
> 
> 时间：2013-01-29T12:06:41.753
> 
> 标签：excel, vba

我希望根据单元格中选择的文本在 Excel 中对一系列单元格（C2：C7）进行颜色填充（将有一个下拉菜单，其中两个值是“SD”和“CS”）。到目前为止，这是我的代码：

Sub ChangeColor() Dim rCell As Range

```
With Sheet1
For Each rCell In .Range("C2:C7")

If rCell.Value <= SD Then
rCell.Interior.Color = vbRed
ElseIf rCell.Value <= CS Then
rCell.Interior.Color = vbGreen
Else: rCell.Interior.Color = vbYellow
End If
End With

End Sub 
```

有人告诉我有一个编译错误：End With without With

我刚刚开始使用 VBA，所以有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:13:53.147

要修复您的代码，您需要插入一条`Next`语句。行前 `End With`。此外，使用缩进直观地查看不同的代码块是一种很好的做法。在您的情况下，它看起来像这样：

```
子你的子
    使用 Sheet1
        对于 .Range("C2:C7") 中的每个 rCell
            如果 rCell.Value <= SD 则
                rCell.Interior.Color = vbRed
            ElseIf rCell.Value <= CS Then
                rCell.Interior.Color = vbGreen
            别的
                rCell.Interior.Color = vbYellow
            万一
        下一个 rCell
    结束于
结束子

```

另外，考虑在这里使用条件格式而不是 VBA - 它会做同样的事情，但更容易！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-01T20:45:13.370

我不确定它是否有效，但你可以试试这个，因为当你输入脚本“For commands”时，你需要输入下一个。而“For”更多地用于创建循环：

```
Sub ChangeColor()
    Dim rCell As Range
    With Sheet1
    For Each rCell In .Range("C2:C7")
        If rCell.Value <= SD Then
            rCell.Interior.Color = vbRed
        ElseIf rCell.Value <= CS Then
            rCell.Interior.Color = vbGreen
        Else rCell.Interior.Color = vbYellow
        End If
    Next
    End With
End Sub 
```

# android - 设置微调器适配器时的android nullpointer

> ID：14582501
> 
> 赞同：0
> 
> 时间：2013-01-29T12:06:52.217
> 
> 标签：android, spinner

我收到此错误：

```
14:03:44.170    322 hnlapp.hairdresser  ERROR   AndroidRuntime  FATAL EXCEPTION: main
14:03:44.170    322 hnlapp.hairdresser  ERROR   AndroidRuntime  java.lang.NullPointerException
14:03:44.170    322 hnlapp.hairdresser  ERROR   AndroidRuntime      at hnlapp.hairdresser.Page_Calendar.onOptionsItemSelected(Page_Calendar.java:2824) 
```

尝试执行此操作时：

```
spinusertype.setAdapter(spinnerArrayAdapter); 
```

在这段代码中：

```
Spinner spinusertype      =       (Spinner)  findViewById(R.id.spinnerUserType);
String[] userTypes = new String[]{"user","hairdresser","admin"};
                            ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, userTypes);

                            spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                            spinusertype.setAdapter(spinnerArrayAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:29:11.963

我通过这样做使它工作：

```
 Spinner spinusertype            =       (Spinner)  dialog.findViewById(R.id.spinnerUserType); 
```

而不是这个：

```
 Spinner spinusertype            =       (Spinner)  findViewById(R.id.spinnerUserType); 
```

我不知道为什么它会有所作为，因为微调器的 id 是唯一的。

# javascript - 显示链接以打开溢出的 div

> ID：14582504
> 
> 赞同：0
> 
> 时间：2013-01-29T12:07:00.850
> 
> 标签：javascript

我有一个`div`里面`ul`。`ul`可以包含未知数量的元素。每个元素可以包含不同数量的内容。它可以是长或短的文本行。

示例：[http ://codepen.io/anon/pen/Augrd](http://codepen.io/anon/pen/Augrd)

这`DIV`在页面加载时的高度不应超过 100px。

我想要实现的目标：如果这个 DIV 里面的内容太多并且溢出了，那么我想显示用户可以单击并“打开”这个 DIV 的链接，使它的高度更高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:28:19.907

这会检测您的自然高度，并在自然高度大于其当前高度`<div>`时自动生成“更多...”链接（如果 100px 足以显示所有内容，则不会显示一个）。`<div>`您不必针对不同高度的`<div>`.

[演示](http://jsfiddle.net/thUFP/3/)

Javascript

```
var main = document.getElementById("main");
var original_height = main.offsetHeight;
main.style.height = 'auto';
var natrual_height = main.offsetHeight;
main.style.height = original_height+"px";;
var more = document.getElementById("more");
if (natrual_height > original_height) {
  more.innerHTML = '<a href="javascript:void(0)" onClick="show_more()">More...</a>';
}
function show_more() {
  if (main.offsetHeight < natrual_height) {
      main.style.height = 'auto';
      more.innerHTML = '<a href="javascript:void(0)" onClick="show_more()">Less...</a>';
  } else {
      main.style.height = original_height+"px";;
      more.innerHTML = '<a href="javascript:void(0)" onClick="show_more()">More...</a>';
  }
} 
```

HTML

```
<div id="main" class="main">
<ul>
  <li>Something</li>
  <li>LoremLoremLoremLoremLoremLoremLorem</li>
  <li>Ipsum</li>
  <li>1234</li>
 <li>LoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLorem</li>
  <li>5678</li>
  <li>111111</li>
  <li>abc</li>
</ul>
</div>
<div id="more">

</div> 
```

CSS

```
.main {
  height: 100px;
  overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:35:32.697

我已经更新了你的 html 并放了一些 javascript。我希望这个对你有用。

html：

```
<div class="main">
<div id="ulist">

  <ul>
  <li>Something</li>
  <li>LoremLoremLoremLoremLoremLoremLorem</li>
  <li>Ipsum</li>
  <li>1234</li>
 <li>LoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLoremLorem</li>
  <li>5678</li>
  <li>111111</li>
  <li>abc</li>
</ul>
  </div>
  <div id='more' onclick="opendiv()">
    open
  </div>
</div> 
```

CSS：

```
.main {
  height: 100%;
  overflow: hidden;
}
#ulist {
  height: 100px;
  overflow: hidden;
} 
```

脚本：

```
 function opendiv()
{
  if(document.getElementById('more').innerHTML == 'open')
  {
  document.getElementById('ulist').style.height = '100%';
  document.getElementById('more').innerHTML = 'close';
  }
  else
  {
  document.getElementById('ulist').style.height = '100px';
  document.getElementById('more').innerHTML = 'open';
  }
} 
```

# c++ - 提升条件变量 - 调用“notify_one”堆栈？

> ID：14582505
> 
> 赞同：3
> 
> 时间：2013-01-29T12:07:03.057
> 
> 标签：c++, boost, boost-thread

在使用 Boost 线程的单个生产者/单个消费者应用程序中，如果生产者线程`cond_var.notify_one()`在消费者线程调用之前多次调用会发生`cond_var.wait(lock)`什么？

是否会堆叠额外的调用`notify_one`，以便每个调用`.wait()`将与调用 1:1 对应`.notify_one()`？

**编辑**实现并发队列的[常用示例具有以下方法：](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

```
void push(Data const& data)
{
    boost::mutex::scoped_lock lock(the_mutex);
    the_queue.push(data);
    lock.unlock();
    the_condition_variable.notify_one();
}

void wait_and_pop(Data& popped_value)
{
    boost::mutex::scoped_lock lock(the_mutex);
    while(the_queue.empty())
    {
        the_condition_variable.wait(lock);
    }

    popped_value=the_queue.front();
    the_queue.pop();
} 
```

我使用了一些非常相似的代码，并且经历了一些奇怪的内存增长，这似乎是由于消费者线程没有每次都醒来`.notify_one()`（因为它仍在忙于做其他工作），并且想知道是否缺少“堆叠”可能是原因。

如果（有时）消费者线程无法跟上生产者线程，那么如果不堆叠此代码似乎会失败。如果我的理论是正确的，我将不胜感激有关如何修复此代码的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:15:14.733

规格`notify_one`为：

> C++11 30.5.1/7：效果：如果任何线程被阻塞等待`*this`，解除阻塞其中一个线程。

所以答案是否定的：调用`notify_one`并且`notify_all`只会唤醒当前等待的线程，并且以后不会被记住。

更新：对不起，我将问题误读为`std::condition_variable`. 毫不奇怪，[Boost](http://www.boost.org/doc/libs/release/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.notify_one)规范或多或少是相同的：

> 如果任何线程当前在调用or时*被阻塞*等待，则取消阻塞其中一个线程。`*this``wait``timed_wait`

关于您的编辑：如果有人调用时没有线程等待`push`，那么下一个要调用的线程`pop`根本不会等待，因为`the_queue`不会为空。所以条件变量不需要记住它不应该等待；该信息存储在被管理的状态中，而不是条件变量中。如果消费者跟不上生产者，那么要么加快消费，要么放慢生产；对于信号机制，您无能为力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:15:24.527

简而言之：不，它不堆叠。

`notify_one()`仅当另一个线程正在等待`cond_var`. 因此，如果您的消费者正在等待，则第一个`notify_one()`已解除对消费者的阻止。第二个`notify_one()`没有效果，因为没有线程在等待`condition_variable`

# javascript - 使用一个功能移动多个 div，如矩阵样式背景

> ID：14582507
> 
> 赞同：1
> 
> 时间：2013-01-29T12:07:05.503
> 
> 标签：javascript, jquery, html, css, animation

我正在制作一种矩阵风格的背景，图像会随机下拉。我想将除法传递给一个函数作为启动动画的参数。我无法弄清楚如何做到这一点。我不认为为每个下拉的图形编写相同的函数是一种好的做法。这就是我所拥有的——

```
 <div id="l_0" class="drop_leds">
    </div>
    <div id="l_1" class="drop_leds">
    </div>
    <div id="l_2" class="drop_leds">
    </div>
    <div id="l_3" class="drop_leds">
    </div>

$(document).ready(function(){

     function row_01(id){
        var movePixAmount = 10;
            setInterval(function(){
               $(id).animate({ marginTop: movePixAmount+"px" }, 10);
               movePixAmount = movePixAmount +10;
                if(movePixAmount === 600){
                    movePixAmount = 0;
                    };
                },
            100);//inter

             };
        row_01("#l_0") 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:39:21.827

这是一场相当长的战斗，但我赢了（：如果你用一个函数来做这件事，就会发生冲突，或者它们都将具有相同的速度。

但相反，您可以以不同的速度编写 4 个不同的元素`setInterval` `functions`并应用这些`functions`多个元素，例如 100 个元素。只需定义不同的`left`值以不交叉。[**这是工作的jsFiddle。**](http://jsfiddle.net/TajwZ/46/)

**jQuery：**

```
var eleHeight = $('.drop_leds').height();
var windowH = $(window).height();
var count1 = 0;
var count2 = 0;
var counter;
var windowLimit = windowH + eleHeight;

counter = window.setInterval(function() {
    if( count1 >= 0 && count1 < windowLimit ) {
        count1 += 1;
        $('#l_0,#l_6').css({'top':count1 +'px'});
    }
    else if( count1 >= windowLimit ) { 
        count1=0; $('#l_0,#l_6').css({'top':'-'+ eleHeight +'px'});
    }
},1);

counter = window.setInterval(function() {
    if( count2 >= 0 && count2 < windowLimit ) {
        count2 += 4;
        $('#l_1,#l_4').css({'top':count2 +'px'});
    }
    else if( count2 >= windowLimit ) { 
        count2=0; $('#l_1,#l_4').css({'top':'-'+ eleHeight +'px'});
    }
},1); 
```

**CSS：**

```
.drop_leds {position:absolute; width:10px;height:60px;background:black;top:0px; }
#l_0 { left:40px; }
#l_1 { left:70px; }
#l_2 { left:110px; }
#l_3 { left:140px; }
#l_4 { left:180px; }
#l_5 { left:210px; }
#l_6 { left:220px; }
#l_7 { left:240px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T22:44:35.843

我知道这是旧的，但如果另一个人最终看到这里，我制作了一个插件，您可以将其添加到您的网站以使动画矩阵背景工作。[https://github.com/manacu/manacuMatrixBg](https://github.com/manacu/manacuMatrixBg)

希望有帮助！

# android - 如何在我的 android 应用程序中提供自动更新功能

> ID：14582509
> 
> 赞同：0
> 
> 时间：2013-01-29T12:07:26.033
> 
> 标签：android

我制作了一个应用程序，其中我使用了更多资源图像、视频、文本文件，这些资源位于我的应用程序资产文件夹中，并且我在运行时访问这些资源

通过 sqlight 数据库。该应用程序是离线应用程序。现在假设我的应用程序被世界各地的许多用户使用。

现在我想要的是：我想维护我自己的云服务器或我的服务器，这样当我在服务器上放置新资源（我的意思是新图像、视频等）时，这些

资源应该在使用应用程序的用户设备上自动更新（当用户通过互联网连接时）。

我不想创建我的应用程序的新版本，因为我正在更新资源。

我是android开发的新手，请建议。如何制作、管理和维护满足我需求的服务器端功能。如果事情不清楚，请告诉我。

问候阿努帕姆米什拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:16:01.950

首先，您说您的文件在 assets 文件夹中，这意味着它们与 apk 捆绑在一起并且是只读的。因此，无法将数据写入应用程序的这一部分，因此您无法对其进行更新。

以下是我的建议：

1.  不要将任何东西与您的应用捆绑在一起。相反，在应用程序的第一次运行时下载图像等，如果它们占用的空间超过一点，最好下载到外部存储中。可以下载到内部存储，但大多数设备的内部存储非常有限，如果您的应用占用了这个空间，则可以立即卸载。
2.  在您的服务器上以您喜欢的任何语言设置网络服务，可以报告文件的最新更新日期，并在需要时提供下载。
3.  每当您的应用程序运行时，请检查下载文件的最后修改日期与您的网络服务提供的最后更新日期。如果文件自下载后已更新，请再次下载并覆盖旧文件。

# android - 如何在 SQLCipher 中加密/解密

> ID：14582517
> 
> 赞同：3
> 
> 时间：2013-01-29T12:07:53.893
> 
> 标签：android, sqlcipher

我正在努力解决**如何使用 SQLCipher 加密/解密数据库。**

在我的这段代码中，我应该从哪里开始。以及如何开始。

如果可能，请编辑此代码。

我关注了这个链接，但没有得到如何做到这一点。[http://sqlcipher.net/sqlcipher-api/#key](http://sqlcipher.net/sqlcipher-api/#key)

我的数据库文件：-

```
import net.sqlcipher.database.SQLiteDatabase;
import net.sqlcipher.database.SQLiteOpenHelper;
import android.content.Context;
import android.util.Log;

public class DatabaseClass extends SQLiteOpenHelper 
{
    /**
     * Constants 
     */
    public final static String DATABASE_NAME ="mycipherdatabase.db";
    public final static String NAME ="name";
    public final static String ADDRESS ="address";
    public final static String CITY ="city";

    public static String pass = "1234";
    public DatabaseClass(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    /**
     * called once
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL( "CREATE TABLE mylistdata(_id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, address TEXT,city TEXT);");

        Log.v("inside", "oncreate");
    }

    /**
     * called when we upgrade(change)the version number of database
     * onCreate also called after changing the version
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP Table mylistdata");
        onCreate(db);
    }
} 
```

使用此数据库的其他活动：-

```
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SQLiteDatabase.loadLibs(this);
        File file = getDatabasePath(DatabaseClass.DATABASE_NAME);
        file.mkdir();
        file.delete();
        sqldb = SQLiteDatabase.openOrCreateDatabase(file,key, null);
        db = new DatabaseClass(this);

        etname = (EditText)findViewById(R.id.name);
        etadd = (EditText)findViewById(R.id.add);
        etcity = (EditText)findViewById(R.id.city);
        result = (ListView)findViewById(R.id.mylist);
    }

    /**
     *insert data in to database 
     */
    public void saveData(View v) {
        ContentValues insertData = new ContentValues();
        insertData.put(DatabaseClass.NAME, etname.getText().toString());
        insertData.put(DatabaseClass.ADDRESS, etadd.getText().toString());
        insertData.put(DatabaseClass.CITY, etcity.getText().toString());

        db.getWritableDatabase(key).insert("mylistdata", DatabaseClass.NAME , insertData);
        db.close();

        resetEditText();
        Toast.makeText(this,"Data saved", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:13:57.803

好吧，代码有这么多问题，我想你必须更好地了解 android 中的 SQLite 结构，从技术上讲，**Android SQLite**和**SQLCipher**看起来完全一样（除了密码）。因此，如果您编写标准 SQLite 应用程序，可以轻松将其更改为 SQLCipher，

我建议你阅读这篇关于 Android 中 SQLite 的精彩文章，

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

**提示**：使用**SQLiteOpenHelper**时无需调用**openOrCreateDatabase**，调用**getWritableDatabase**就可以完成这项工作，而且您必须拥有一个从**getWritableDatabase**方法获取的**SQLiteDatabase**对象，每次要插入记录时都调用**getWritableDatabase**不是正确的。

 ******这些部分将被移除，

```
 // in onCreate method
     File file = getDatabasePath(DatabaseClass.DATABASE_NAME);
     file.mkdir();
     file.delete();
     sqldb = SQLiteDatabase.openOrCreateDatabase(file,key, null);
     db = new DatabaseClass(this);

     // in saveData method
      db.getWritableDatabase(key).insert("mylistdata", DatabaseClass.NAME ,               insertData); 
```

相反，你必须做这样的事情

```
 // in onCreate method
     try{
        sqldb = new DatabaseClass(this).getWritableDatabase(key);
     }catch(Throwable e){
        // error occurred
     }

     // in insert action
     try{
        sqldb.insert("tablename", null, contentValues);
     }catch(Throwable e){
        // error occurred
     } 
```

这样您还可以查看是否发生错误，记住，不要在流行语上使用**Exception**类，只有**Throwable**！

另外，我不建议在每次插入操作时关闭连接，最好在更高级别进行处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:36:02.203

尝试使用这里描述的 SQLiteDatabase.openOrCreateDatabase：http: [//sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:21:43.180

这可能是一个很好的起点， [https://guardianproject.info/code/sqlcipher/](https://guardianproject.info/code/sqlcipher/)

更多来自 Android 文档， [http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onConfigure(android.database.sqlite.SQLiteDatabase)](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onConfigure(android.database.sqlite.SQLiteDatabase))

对我来说，关键点是将 sqlcipher jar 添加到您的 android deps 中，并确保您设置了密钥/密码短语 PRAGMA stmts。******

# linux - 通过 GPIO 信号启用从睡眠模式唤醒

> ID：14582518
> 
> 赞同：3
> 
> 时间：2013-01-29T12:07:53.760
> 
> 标签：linux, arm, gpio

我需要通过 GPIO 信号将运行 Angstrom OS 的 BeagleBone 设备从睡眠模式唤醒。

我读到使用`/sys/class/gpio/gpioXX/power/wakeup`是方法。问题是电源目录下没有任何“唤醒”文件。那么，我应该如何进行激活呢？有没有不重新编译内核的解决方案？

我可以从 GPIO 值中很好地读取，所以 GPIO sysfs 正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:11:19.227

There was issue inside GPIO driver in OMAP4xxx kernel, when GPIO banks was initialized *before* mux subsystem initialisation. This effectively prevented wakeups by pins in GPIO mode.

You can check this, by reading `mux[]` fields of struct `gpio_bank` (file drivers/omap/gpio-omap.c). They should not hold NULL values.

There is a for loop at end of `void omap_gpio_mod_init(struct gpio_bank *bank)` function. You need to remove it, and initialize `mux` pointer at end of `static int omap_gpio_request(struct gpio_chip *chip, unsigned offset)` function.

This will ensure, that it will be inited correctly.

Also, as far as I remember, the was some issue with debounce clocks. If my first advice wont work, try to disable debounce for that pin.

# javascript - 如何在没有 javascript 的情况下删除

> ID：14582519
> 
> 赞同：0
> 
> 时间：2013-01-29T12:07:54.823
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我试图让我的应用程序在没有 javascript 的情况下使用 DELETE 操作。

只要我的 app/view/layout/application.html.haml 文件包含以下内容，Evrything 就可以工作：

```
!!! 5
%html

  %head
    %title My application
    = stylesheet_link_tag    'screen', :media => 'screen, print, projection'
    /[if IE]
      // CSS for IE
    = javascript_include_tag 'application'
    = csrf_meta_tags

  %body
    ... 
```

如果我删除`= javascript_include_tag 'application'`指令。我不能再删除任何记录。Rails 正在执行 SHOW 操作。

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:13:36.657

编写 HTML 表单时唯一支持的两种方法是`post`和`get`。如果要使用`delete`or`put`方法，则必须使用 AJAX。

这就是为什么大多数网站使用普通的 post 请求并使用特殊 URL 的原因。例如

```
POST /some-object/delete/ 
```

或者

```
POST /some-object/?action=delete 
```

甚至最新的 HTML5 草案也不允许使用除`post`or以外的任何其他方法：http `get`: [//www.w3.org/html/wg/drafts/html/master/forms.html#attr-fs-method](http://www.w3.org/html/wg/drafts/html/master/forms.html#attr-fs-method)

Rails为执行和请求提供了一个[polyfill 。](http://en.wikipedia.org/wiki/Polyfill)我发现这很麻烦，尤其是当禁用 JavaScript 时代码会做一些完全不同的事情。`put``delete`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:21:10.007

Ryan Bates 在这个问题上做了一个很好的 RailsCasts 插曲：[Destroy without JavaScript](http://railscasts.com/episodes/77-destroy-without-javascript-revised)。

他只是建议添加一个额外的 GET 成员路由，当 JS 被禁用时，这将导致相同的控制器操作。

# xcode - 故事板和单个 UIViewController 方向锁定

> ID：14582520
> 
> 赞同：0
> 
> 时间：2013-01-29T12:07:58.047
> 
> 标签：xcode, xamarin.ios, interface-builder, storyboard, monodevelop

我已经使用情节提要制作了我的应用程序，并且我已经在项目选项中设置了 -> 支持的设备方向 -> 所有方向（纵向、横向左侧、横向右侧、倒置），因为我希望视图随着我的设备的轮子旋转。视图由导航控制器中的 Interface Builder（使用 Segue 方法）推送。

现在我有一个视图控制器（TestViewController），它是情节提要的一部分，我想锁定方向（只是肖像）。我已经覆盖了这些方法，但是 TestViewController 像其他方法一样旋转。不调用 ShouldAutorotate，触发 SupportedInterfaceOrientations 但结果与其他视图相同。

```
public partial class TestViewController : UIViewController {
...
    public override bool ShouldAutorotate()
    {
     return false;
    }

    public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
    {
    return UIInterfaceOrientationMask.Portrait;

    }
...
} 
```

环境

*   单触 6.06
*   Xcode 4.5.2
*   MonoDevelop 3.05

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:53:55.167

解决方案是像这样在 AppDelegate Supported Interface Orientation 中设置

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations (UIApplication application, UIWindow forWindow)
        {
            if (forWindow != null && forWindow.RootViewController != null) {
                UINavigationController nav = forWindow.RootViewController as UINavigationController;
                if(nav.VisibleViewController is TestViewController){
                    return UIInterfaceOrientationMask.Portrait;
                }
            }
            return UIInterfaceOrientationMask.All;
        } 
```

# asp.net-mvc-3 - 如何在 mvc3 的下拉列表中获取国家/地区列表？

> ID：14582525
> 
> 赞同：4
> 
> 时间：2013-01-29T12:08:31.107
> 
> 标签：asp.net-mvc-3, razor, html-select

我正在做一个项目，在注册页面中，我想在下拉列表中获取所有国家/地区的列表。谁能告诉我我需要在控制器、视图或任何需要的东西中做什么？我有一个注册页面的视图

```
@model Retail_MVC.Models.registration
@{

    Layout = null;
}

<div class="my_wrapper">
         <div class="my_left_box">
            @Html.LabelFor(model => model.username)
         </div>
         <div class="my_right_box">
           <input type="text" id="txtusername" name="UserName"/>         
         </div>

   </div>
  -- here i want to get dropdownlist for all countries 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:25:29.310

ASP.NET MVC 框架默认提供了许多非常有用的帮助器，但似乎总是让人感到困惑的是 Html.DropDownListFor() 帮助器方法。所以在这篇文章中，我将快速回顾一下我用来填充列表的步骤，以及一些启动并运行后更时髦的功能！

在我们的示例中，表单上只有一个下拉列表，显示国家列表，您可以从中选择和提交。

首先，我们需要构建一个视图模型，它将成为确定视图可以显示的数据的契约。

```
public class IndexViewModel
{
    // Stores the selected value from the drop down box.
    [Required]
    public int CountryID { get; set; }

    // Contains the list of countries.
    public SelectList Countries { get; set; }
}

public class HomeController : Controller
{
    [HttpGet]
    public ActionResult Index()
    {
        IndexViewModel viewModel = new IndexViewModel();
        viewModel.Countries = new SelectList(GetCountries(), "ID", "Name");
        return View(viewModel);
    }

    [HttpPost]
    public ActionResult Index(IndexViewModel viewModel)
    {
        viewModel.Countries = new SelectList(GetCountries(), "ID", "Name");
        if (!ModelState.IsValid)
        { return View(viewModel); }

        //TODO: Do something with the selected country...
        CMSService.UpdateCurrentLocation(viewModel.CountryID);

        return View(viewModel);
    }
}

@Html.DropDownListFor(x => x.CountryID, Model.Countries)
@Html.DropDownListFor(x => x.CountryID, Model.Countries, "- please select -")

<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")"
  type="text/css" rel="stylesheet" />
<script type="text/javascript" src="@Url.Content("></script>
<script type="text/javascript" src="@Url.Content("></script>
<link type="text/css" rel="stylesheet" href="@Url.Content("~/Content/selectmenu.css")" />
<script src="@Url.Content("~/Scripts/selectmenu.js")" type="text/javascript"></script>
<script type="text/javascript">
   $('select').selectmenu();
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:13:24.283

使用[文化信息](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Globalization.CultureInfo%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)

```
// Namespaces You need
using System.Globalization;
using System.Linq;

// GetCountries() method
IEnumerable<string> GetCountries()
{
     return CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                       .Select(x => new RegionInfo(x.LCID).EnglishName)
                       .Distinct()
                       .OrderBy(x => x);
} 
```

**编辑** * *//////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////* *

```
class Country
{
    public string ID { get; set; }
    public string Name { get; set; }
}

IEnumerable<Country> GetCountries()
{
    return CultureInfo.GetCultures(CultureTypes.SpecificCultures)
         .Select(x => new Country
                         {
                             ID = new RegionInfo(x.LCID).Name,
                             Name = new RegionInfo(x.LCID).EnglishName
                         })
                         .GroupBy(c => c.ID)
                         .Select(c => c.First())
                         .OrderBy(x => x.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:23:30.030

试试下面的一些东西......它会帮助你......

**在 HTML 视图中：**

```
@{
    var CountryItems = new List<SelectListItem>();
    CountryItems.Add(new SelectListItem { Text = String.Empty, Value = String.Empty });
    foreach (var name in ViewBag.Names)
    {
        CountryItems.Add(new SelectListItem { Text = name, Value = name });
    }
}

@Html.DropDownList("dropDownList", CountryItems) 
```

**在控制器中：**

```
List<string> countries =new List<string>(2);
var dtList = from ctry in objContext.Details
    select ctry;   // Source of Country
foreach (var dt in dtList)
{
    countries.Add(dt.Name);
}
ViewBag.Names = countries ;
return View(dtList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:23:01.370

在您的注册模型中，添加类型国家/地区列表 - 显然这将根据您的国家/地区数据类型而改变

```
public List<Countries> Countries { get; set; } 
```

然后在您的控制器中，从您选择的任何数据源将您的国家/地区分配给它

```
registration.Countries = [list_of_country_objects] 
```

最后你的观点：

```
@Html.DropDownList("countries", new SelectList(Model.Countries, "CountryId", "CountryName" 
```

# asp.net - 有循环时禁用 ASP.Net 中的按钮

> ID：14582529
> 
> 赞同：0
> 
> 时间：2013-01-29T12:08:41.677
> 
> 标签：asp.net, button, for-loop, disabled-control

我在禁用**ASP.Net中的****按钮**时遇到问题

 **有**循环**时我无法禁用**按钮**

 **我的代码示例：

```
private void button1(object sender, EventArgs e)
{
    button1.Enabled = false;

    for(int i = 0; i < 1000000; i++)
    {
         for(int j = 0; j < 1000000; j++)
         {
            for(int k = 0; k < 1000000; k++)
            {

            }
         }
    }
} 
```

在禁用按钮之前，我仍然需要等待完成 for 循环的执行。在执行**for 循环**之前，我应该怎么做才能禁用我的**按钮****？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:12:13.307

您最好的选择是在表单回发之前使用一小段 javascript 代码来禁用该按钮。你拥有它的方式是行不通的。我假设您试图阻止用户在长时间运行的操作发生时多次单击该按钮。

*像*这样的东西：

```
<INPUT name="myButton" type="submit" onclick="document.form1.myButton.disabled=true;document.form1.submit();"> 
```

如果您已经在使用 jquery，那么还有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:19:19.563

您实际上缺少 ASP.Net 页面生命周期的基本概念。仅当从服务器返回响应时（显然是在循环完成之后），该按钮才会被禁用。现在，如果您想禁用它，那么您将不得不按照 EJ Brenan 的建议使用 Javascript 或 Jquery。

页面生命周期： http: [//msdn.microsoft.com/en-us/library/ms178472 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)****

# linux - ./jdk-6u34-linux-i586.bin：没有这样的文件或目录

> ID：14582531
> 
> 赞同：2
> 
> 时间：2013-01-29T12:08:45.220
> 
> 标签：linux, java

我正在尝试为 32 位操作系统安装 jdk。按照以下步骤，

1.  `wget http://download.oracle.com/otn-pub/java/jdk/6u34-b04/jdk-6u34-linux-i586.bin`
2.  `chmod u+x jdk-6u34-linux-i586.bin`
3.  `./jdk-6u34-linux-i586.bin`

但是在尝试执行第 4 步时，会发生以下错误，

```
./jdk-6u34-linux-i586.bin
./jdk-6u34-linux-i586.bin: No such file or directory 
```

可能是什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:32:09.590

要下载该文件，您必须已接受上一页中的许可。因此，您尝试的 wget 命令只会下载说明您未接受许可证的 HTML 页面。

您可以通过将 cookie 添加到该站点中使用的 wget 命令来绕过此问题。

尝试以下 wget 命令下载文件。

```
wget --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" \
 -O jdk-6u34-linux-i586.bin \
 http://download.oracle.com/otn-pub/java/jdk/6u34-b04/jdk-6u34-linux-i586.bin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:21:09.423

尝试查看您下载的文件的大小，然后查看内容。好消息是您有一个 HTML 页面要求您接受 OTN 许可条款...

无论如何，在 Linux 系统上安装 JDK 很容易使用包管理器完成，例如 Aptitude (Debian) 或 Yum（基于 RPM 的系统）。

干杯，

# java - 使用 Xstream 进行 XML 转换时的性能注意事项

> ID：14582532
> 
> 赞同：1
> 
> 时间：2013-01-29T12:08:47.797
> 
> 标签：java, xml, performance, jaxb, xstream

我正在对主要由 Web 服务组成的 Java 应用程序进行分析。结果表明，大部分时间都花在了转换 XML 上。

我目前正在使用 XStream（版本 1.3.1）进行转换。如果我升级版本会获得更好的性能吗？或者还有什么我可以使用的东西可以给我更好的性能（比如 JAXB）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:30:38.940

最终，您将需要创建一个适合您的用例的基准，以确定哪个 XML 绑定库最适合您的用例。有太多的因素可以宣布最终的赢家（即，一个可能非常快，直到它达到继承层次结构，一个处理继承的速度超快但在集合上放慢了速度）。

在一个框架内，通常处理 StAX 或流比处理 DOM 更快，所以如果你能以这种方式定位你的代码，你会更好。此外，绑定框架通常利用较低级别的解析器，因此将 JAXB 与 Woodstox 结合使用可能会提高您的性能。

**JAXB 和性能**

表示已处理的`JAXBContext`元数据，并且此类是线程安全的。如果您创建一次并重复使用它，您将看到性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:13:46.500

有一个 marshaller 是专为性能而设计的，同时又符合 mashaller 一词。. . （而 Xstream 是一个序列化程序，因为它按约定输出，并且您无法调整通过使用例如映射文件生成的 XML。并不是我反对 XStream）。.

高性能编组器是几年前在新西兰惠灵顿启动的。. . 并且被称为JIBX。这是网站：http: [//jibx.sourceforge.net/](http://jibx.sourceforge.net/)

它是 Spring Framework 明确支持的编组器之一。

# javascript - 使用代码在 Twitter 上发送消息

> ID：14582535
> 
> 赞同：3
> 
> 时间：2013-01-29T12:08:57.053
> 
> 标签：javascript, asp.net, twitter

我想从我的 .net 应用程序向 twitter 用户发送消息。我怎样才能做到这一点？是否有任何可用的 api 或 javascript 代码？请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:14:11.677

为此，您可以使用 twitter 按钮插件。它基于javascript。请参考[这个](https://twitter.com/about/resources/buttons)链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:11:46.370

此[代码](http://www.naveen.com.au/asp-net/send-tweet-message-in-twitter-using-dot-net/192)片段用于包装 Twitter API 以发送消息。它不是一个完整的 Twitter 包装器，但它可以轻松地使用 Twitter 发送推文消息。有两个重载的构造函数，它们都需要传递用户名和密码，并且使用代理服务器作为重载参数。

```
using System;
    using System.IO;
    using System.Net;
    using System.Xml;
    using System.Web;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace Helpers
    {
public class TwitterHelpers
{
private string _twitterJsonUrl = &quot;http://twitter.com/statuses/update.json&quot;;

public string TwitterJsonUrl
{
get { return _twitterJsonUrl; }
set { _twitterJsonUrl = value; }
}

private string _twitterUser = string.Empty;

public string TwitterUser
{
get { return _twitterUser; }
set { _twitterUser = value; }
}

private string _twitterPass = string.Empty;

public string TwitterPass
{
get { return _twitterPass; }
set { _twitterPass = value; }
}

private string _proxyServer = string.Empty;

public string ProxyServer
{
get { return _proxyServer; }
set { _proxyServer = value; }
}

public string SendTwitterMessage(string message)
{
try
{
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(TwitterJsonUrl);
System.Net.ServicePointManager.Expect100Continue = false;

string post = string.Empty;
using (TextWriter writer = new StringWriter())
{
writer.Write(&quot;status={0}&quot;, HttpUtility.UrlEncode(message.Substring(0,140)));
post = writer.ToString();
}

SetRequestParams(request);

request.Credentials = new NetworkCredential(TwitterUser, TwitterPass);

using (Stream requestStream = request.GetRequestStream())
{
using (StreamWriter writer = new StreamWriter(requestStream))
{
writer.Write(post);
}
}

WebResponse response = request.GetResponse();
string content;

using (Stream responseStream = response.GetResponseStream())
{
using (StreamReader reader = new StreamReader(responseStream))
{
content = reader.ReadToEnd();
}
}

return content;

}
catch (Exception ex)
{
throw ex;
}
}

private void SetRequestParams(HttpWebRequest request)
{
request.Timeout = 500000;
request.Method = &quot;POST&quot;;
request.ContentType = &quot;application/x-www-form-urlencoded&quot;;
request.UserAgent = &quot;My Twitter Application&quot;;

if (!string.IsNullOrEmpty(_proxyServer))
{
request.Proxy = new WebProxy(_proxyServer, false);
}

}

public TwitterHelpers(string userName, string userPassword, string proxyServer)
{
_twitterUser = userName;
_twitterPass = userPassword;
_proxyServer = proxyServer;
}

public TwitterHelpers(string userName, string userPassword)
{
_twitterUser = userName;
_twitterPass = userPassword;
}

}
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleAppTest
{
class Program
{
private static TwitterHelpers _twitterHelpers = null;

private static TwitterHelpers TwitterHelpers
{
get
{
if (_twitterHelpers == null)
{
_twitterHelpers = new TwitterHelpers(&quot;twitteruser&quot;, &quot;twitterpassword&quot;);
}

return _twitterHelpers;
}
}

static void Main(string[] args)
{
TwitterHelpers.SendTwitterMessage(&quot;Hello World!!&quot;);
Console.WriteLine(&quot;Press any key to continue...&quot;);
Console.ReadKey();
}
}
} 
```

# c# - 为字符串 c# 创建自定义事件

> ID：14582536
> 
> 赞同：1
> 
> 时间：2013-01-29T12:08:57.620
> 
> 标签：c#

我有以下内容：

```
 using System.Data;
    using System.Drawing;
    using System.IO;
    using System.Linq;
    using System.Security.Permissions;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;

        namespace FarmKeeper.Forms
    {
        public partial class FarmLogs : Form
        {
            static string errorLogText = "";
            public string changedText = "";

            public FarmLogs()
            {
                InitializeComponent();

                string txtLoginLogPath = @"../../Data/LoginLog.txt";
                StreamReader readLogins = new StreamReader(txtLoginLogPath);
                txtLoginLog.Text = readLogins.ReadToEnd();
                readLogins.Close();

                loadLogs();

                changedText = errorLogText;

                txtErrorLog.Text = changedText;
            }

            public static void loadLogs()
            {
                string txtErrorLogPath = @"../../Data/MainErrorLog.txt";
                StreamReader readErrors = new StreamReader(txtErrorLogPath);
                errorLogText = readErrors.ReadToEnd();
                readErrors.Close();
            }
        }
    } 
```

现在，我要做的是检查字符串 changedText 是否已更改。我对自定义事件知之甚少，但我无法弄清楚这一点，互联网上的事件也不知道。

IF changedText 更改，然后将另一个文本框设置为该字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:13:41.813

用属性替换您的字段，并检查设置器中的值是否更改。如果它发生变化，请引发一个事件。有一个用于属性更改通知的接口，称为[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)：

```
public class Test : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string myProperty;

    public string MyProperty
    {
        get
        {
            return this.myProperty;
        }

        set
        {
            if (value != this.myProperty)
            {
                this.myProperty = value;

                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this, new PropertyChangedEventArgs("MyProperty"));
                }
            }
        }
    }
} 
```

* * *

只需将处理程序附加到`PropertyChanged`事件：

```
var test = new Test();
test.PropertyChanged += (sender, e) =>
    {
        // Put anything you want here, for example change your
        // textbox content
        Console.WriteLine("Property {0} changed", e.PropertyName);
    };

// Changes the property value
test.MyProperty = "test"; 
```

# asp.net - 如何在 Microsoft Exchange 服务中以编程方式获取域名

> ID：14582538
> 
> 赞同：0
> 
> 时间：2013-01-29T12:09:00.817
> 
> 标签：asp.net, outlook, exchange-server, exchangewebservices

我使用 Outlook COM 组件来创建约会，但它在 IIS 上引起了许多与安全等相关的问题。所以，我使用的是 Microsoft Exchange Services dll。

在下面的代码中，我必须给出域名，我不想这样做，因为每个客户端都会有所不同。

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
    service.Credentials = new WebCredentials("username", "password");
    service.AutodiscoverUrl("username@domain.com"); 
```

另一件事是，在创建约会期间添加与会者时，我必须再次提供用户的完整电子邮件地址，例如 username@domain.com；我只想使用用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:17:56.303

当用户登录 OWA 时，假设服务器使用基于表单的身份验证，输入用户名和密码后，单击“登录”后，域\用户名字段将在用户名之前填充域名。但是，您只会看到一秒钟。

在 Outlook 中更容易。转到工具、帐户设置并双击 Microsoft Exchange。在下一个窗口中，您将看到 Exchange 服务器的 FQ 名称。

# python - 从多维 FFT 中提取频率

> ID：14582543
> 
> 赞同：5
> 
> 时间：2013-01-29T12:09:20.480
> 
> 标签：python, scipy, fft

我编写了一个 python 代码来获取 2D 信号并对其进行 FFT，现在我想提取与 FFT 相关的频率。失败，`np.fft.fftfreq`给我错误

```
File "/usr/lib64/python2.7/site-packages/numpy/fft/helper.py", line 153, in fftfreq
    assert isinstance(n,types.IntType) or isinstance(n, integer)
AssertionError 
```

我的代码是：

```
import numpy as np
import scipy as sp
import pylab
import sys
import math

filename = sys.argv[1]  # Get name of file to open 

ifp = open(filename, "r")
ifp.seek(0)

nrows = 0
ncols = 0

nrows = sum(1 for line in ifp) # Sum over all the lines in the file ptr

ifp.seek(0) # Set the fptr back to beginning of file
for line in ifp:
   ncols = len(line.split()) #Split and count number of words in a line
   if ncols > 0:
      break

OrigData = np.zeros([nrows, ncols], dtype=np.float32) #Allocate numpy array
FFTData = np.zeros([nrows, ncols], dtype=complex)
IFFTData = np.zeros([nrows, ncols], dtype=complex)
FreqComp = np.zeros([nrows, ncols], dtype=np.float32)

ii = 0
jj = 0
ifp.seek(0)
for line in ifp:
   linedata = line.split()
   jj = 0
   for el in linedata:
      OrigData[ii,jj] = float(el)
      jj+=1
   ii+=1
ifp.close()

FFTData = np.fft.fft2(OrigData)
FreqComp = np.fft.fftfreq(FFTData, d=2)

#--- Continue with more code ---# 
```

我知道除了这`np.fft.fftfreq`条线之外的其他一切都有效，因为我最后添加了它。如何提取二维频率分量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T12:52:50.700

您传入了一个无效参数：`np.fft.fftfreq`将信号数据的大小作为第一个参数（整数），将时间步长作为第二个参数。您传入一个数组作为第一个参数。

不过，您需要先`np.fft.fft`对信号执行一次。

讨厌指出明显的，但阅读[`np.fft.fftfreq`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fftfreq.html)......示例代码非常清楚。

* * *

执行 2D FFT 后，您可以获得沿每个维度的采样频率，如下所示：

```
FreqCompRows = np.fft.fftfreq(FFTData.shape[0],d=2)
FreqCompCols = np.fft.fftfreq(FFTData.shape[1],d=2) 
```

# .net - ManagementObject 和 ManagementBaseObject 有什么区别

> ID：14582549
> 
> 赞同：2
> 
> 时间：2013-01-29T12:09:35.090
> 
> 标签：.net, wmi, wql

当我编译以下两个代码时，它给出了相同的结果（我认为是这样）。

```
//ManagementObject :
SelectQuery query = new SelectQuery("Win32_Environment");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
foreach (ManagementObject envVar in searcher.Get())
  Console.WriteLine("Variable : {0}, Value = {1}",envVar["Name"], envVar["VariableValue"]);

//ManagementBaseObject :
SelectQuery query = new SelectQuery("Win32_Environment");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
foreach (ManagementBaseObject envVar in searcher.Get())
  Console.WriteLine("Variable : {0}, Value = {1}",envVar["Name"], envVar["VariableValue"]); 
```

两种代码执行有什么区别......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:28:39.687

在这种特殊情况下，没有区别。

该`ManagementObjectSearcher.Get()`方法返回 a [`ManagementObjectCollection`](http://msdn.microsoft.com/en-us/library/system.management.managementobjectcollection.aspx)，它是 的集合 [`ManagementBaseObject`](http://msdn.microsoft.com/en-us/library/system.management.managementbaseobject.aspx)。这意味着集合可以包含 type`ManagementBaseObject`的实例或任何从`ManagementBaseObject`.

但是，它`ManagementBaseObject`被设计为基类，这意味着实际上它不会被实例化，而是它的后代类将被实例化。请注意，这只是一个约定，它不是由语言或框架强制执行的。

此外，由于框架中唯一（直接）继承`ManagementBaseObject`is 的类[`ManagementObject`](http://msdn.microsoft.com/en-us/library/system.management.managementobject.aspx)，因此有效地返回了一个实例`Get()`集合。`ManagementObject`请注意，这只是目前的情况，没有什么可以阻止创建额外的`ManagementBaseObject`继承者。

因此，有了所有提到的警告，这意味着，如果您只使用在基类中定义的属性（而不是被覆盖），您可以以任何一种方式进行迭代，并且代码的行为将完全相同。在您的代码中，您只使用[indexer](http://msdn.microsoft.com/en-us/library/system.management.managementbaseobject.item.aspx)，它确实是在`ManagementBaseObject`类中定义的，而不是被覆盖的。

如果您想要一个在一个循环中失败并在另一个循环中工作的代码示例，您可以尝试在 上定义的任何属性`ManagementObject`，例如[Path](http://msdn.microsoft.com/en-us/library/system.management.managementobject.path.aspx)：

```
foreach (ManagementObject envVar in searcher.Get())
  Console.WriteLine("Path : {0}, Value = {1}",envVar.Path.Path); //works

foreach (ManagementBaseObject envVar in searcher.Get())
  Console.WriteLine("Path : {0}, Value = {1}",envVar.Path.Path); //compile error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:28:08.987

你最好`ManagementBaseObject`在这里使用。该`Get()`方法返回一个（非泛型）[`ManagementObjectCollection`](http://msdn.microsoft.com/en-us/library/system.management.managementobjectcollection.aspx)，其中包含`ManagementBaseObject`衍生类型，包括`ManagementObject`和`ManagementClass`。

第一个版本可能适用于您的特定查询，但通常您可能会收到无效的强制转换异常。

如果您只需要考虑类型的对象，`ManagementObject`您可以考虑以下版本：

```
var query = new SelectQuery("Win32_Environment");
var searcher = new ManagementObjectSearcher(query);
foreach (var envVar in searcher.Get().OfType<ManagementObject>())
{
    Console.WriteLine("Variable: {0}, Value = {1}", 
        envVar["Name"], envVar["VariableValue"]);
} 
```

# sql - 将值返回为 null

> ID：14582554
> 
> 赞同：1
> 
> 时间：2013-01-29T12:09:45.597
> 
> 标签：sql, isnull

我正在使用以下 SQL 语句，如果没有任何值因此“合并”，我希望它返回空值，但我有一个问题 - 它不起作用:)

我想可能是因为该行不存在，所以我将如何将该条件添加到以下语句中？

```
SELECT 
  D1.dr, 
  D1.cr, 
  D1.asset_no, 
  (open_bal + dr - cr) AS closing_balance 
FROM (SELECT 
        COALESCE(SUM(dr_amount), 0) AS dr, 
        COALESCE(SUM(cr_amount), 0) AS cr, 
        asset_no 
      FROM posting, sysasset 
      WHERE posting.asset_no = @AssetNumber 
        AND period >= asset_open_per 
      GROUP BY asset_no) AS D1, asset 
WHERE D1.asset_no = asset.asset_no 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:17:07.330

哦，我认为记录没有显示，因为其中一些不存在于另一张桌子上，对吧？未显示的原因是因为您正在使用 加入他们`INNER JOIN`，请尝试使用`LEFT OUTER JOIN`.

```
SELECT  D1.dr, 
        D1.cr, 
        D1.asset_no, 
        (COALESCE(open_bal,0) + dr - cr) AS closing_balance 
FROM 
    (
        SELECT  COALESCE(SUM(dr_amount), 0) AS dr, 
                COALESCE(SUM(cr_amount), 0) AS cr, 
                asset_no 
        FROM    posting
                LEFT JOIN sysasset 
                    ON  posting.asset_no = asset.asset_no
        WHERE   posting.asset_no = @AssetNumber  AND 
                period >= asset_open_per 
        GROUP   BY asset_no
    ) AS D1
    LEFT JOIN asset 
        ON D1.asset_no = asset.asset_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:18:26.740

尝试用 isnull 替换合并。具有合并的表达式仍可被视为空值。[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

# objective-c - 固定长度的 NSData 到 NSData 的 NSMutableArray

> ID：14582555
> 
> 赞同：0
> 
> 时间：2013-01-29T12:09:46.047
> 
> 标签：objective-c, nsdata

我试图从 NSData 获取 NSMutableArray 16 个字节，但没有这样做。也许任何人都可以指出我正确的方向。

示例：输入：`<c4ebc39d edf81fe6 09e0a41a 34b4d20d c4ebc39d edf81fe6 09e0a41a 34b4d20d>`

输出：`<c4ebc39d edf81fe6 09e0a41a 34b4d20d> <c4ebc39d edf81fe6 09e0a41a 34b4d20d>`

我正在尝试这样：

```
NSMutableArray *blocks = [[NSMutableArray alloc]init];
for (NSUInteger i = 0; i <= [data length]; i=i+16) {
    unsigned char *byte = NULL;
    [data getBytes:byte range:NSMakeRange(i, 16)];
    NSData *temp = [[NSData alloc] initWithBytes:byte length:sizeof(byte)];
    [blocks addObject:temp];
} 
```

出于某种原因，这让我感到 exc_bad_access。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:24:40.467

```
[data getBytes:byte range:NSMakeRange(i, 16)]; 
```

将数据复制到 指向的内存中`byte`，它不分配内存。复制数据崩溃，因为`byte == NULL`不指向有效内存。更换

```
unsigned char *byte = NULL; 
```

经过

```
unsigned char byte[16]; 
```

应该解决问题。但请注意

```
NSData *temp = [data subdataWithRange:NSMakeRange(i, 16)]; 
```

更容易，根本不需要字节缓冲区。

还要注意 for 循环

```
for (NSUInteger i = 0; i <= [data length]; i=i+16) 
```

应该改为

```
for (NSUInteger i = 0; i <= [data length] - 16; i=i+16) 
```

避免对`data`对象的访问超出其范围。

您的循环将如下所示：

```
for (NSUInteger i = 0; i <= [data length] - 16; i = i + 16) {
    NSData *temp = [data subdataWithRange:NSMakeRange(i, 16)];
    [blocks addObject:temp];
} 
```

# python - if elif 带字符串

> ID：14582556
> 
> 赞同：0
> 
> 时间：2013-01-29T12:09:48.187
> 
> 标签：python, string, python-2.7

我正在重构一些包含大量代码的脚本，如下所示：

```
if 'mString1' in mStrVar:
    retVal = 1
elif 'mString2' in mStrVar:
    retVal = 2
elif 'mString3' in mStrVar:
    retVal = 3
elif 'mString4' in mStrVar:
    retVal = 4
else:
    retVal = 0 
```

就我个人而言，我不喜欢这种方法，我总是更喜欢这种[`dict()`](https://stackoverflow.com/questions/60208/replacements-for-switch-statement-in-python!)方法，但在这种特定情况下，我认为我不能那样做。

是否可以用更短的方式重写它？在某些情况下`mString`会四处走动。`mString10`

高度赞赏任何提示，如果这是重复的，我深表歉意，我找不到任何相关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:24:50.627

您可以创建一个映射列表并使用普通的 for 循环来搜索`mStrVar`变量中的字符串：

```
retVal_mapping = [
   ('mString1', 1),
   ('mString2', 2),
   ('mString3', 2),
   ('mString4', 2),
   ('', 0) # default as "'' in anyString" is always true.
]

for s, retVal in retVal_mapping:
    if s in mStrVar:
        break

# retVal now contains the right value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:19:21.820

例如，如果您要使用正则表达式`mString(\d+)`，您可以这样做：

```
# Precompile pattern into finite automaton:
_pattern = re.compile(r'mString(\d+)')

# Apply multiple times.
match = _pattern.match(mStrVar)
if match:
    retVal = int(match.group(1))
else:
    retVal = 0 
```

上面的子字符串代码的问题在于它的定义不是很好，例如 `mStrVar = "mString1mString2mString3mString4"`. 正则表达式匹配实际上要严格得多，这可能是合乎需要的。

`dict`对于非数字模式，您也可以使用样式方法：

```
# Precompile pattern:
_pattern = re.compile(r'(abc|def|ghi)')
_map = { 'def' : 1, 'ghi' : 2, 'abc' : 3 }

match = _pattern.match(mStrVar)
if match:
    retVal = _map.get(match.group(1), 0)
else:
    retVal = 0 
```

在某些情况下，您也可以立即使用 dict：

```
_map = { 'def' : 1, 'ghi' : 2, 'abc' : 3 }
retVal = _map.get(mStrVar, 0) # 0 is default! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:21:06.333

```
some_dict = dict(mString1=1, mString2=2, mString3=3)
return some_dict.get(string_value, 0) 
```

其中 string_value 是 mString1、mString2、mString3 之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:25:48.203

```
mylist = ['mString1', 'mString2', 'mString3', 'mString4']
retVal = [i for i in range(len(mylist)) if mylist[i] = mStrVar][0] + 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:29:37.153

```
retval, = [i for i in xrange(1, 5) if 'mString%s' % i in mStrVar] or [0] 
```

# iphone - 在 UINavigationBar titleView 中添加 2 个 UILabels

> ID：14582560
> 
> 赞同：1
> 
> 时间：2013-01-29T12:09:57.157
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uinavigationbar

我有一个`UINavigationBar`带有 2 行标签的自定义`titleView`：

```
 UILabel *navBarLabel = [[UILabel alloc] initWithFrame:CGRectZero];  
        UINavigationItem *item = [[UINavigationItem alloc] init];  
        navBarLabel.backgroundColor = [UIColor clearColor];
        navBarLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:14];
        navBarLabel.numberOfLines = 2;
        navBarLabel.textAlignment = UITextAlignmentCenter;
        navBarLabel.textColor = [UIColor colorWithRed:124.0/255.f green:125.0/255.f blue:128.0/255.f alpha:1.0];
        navBarLabel.text = @"This\nis an example";
        [navBarLabel sizeToFit];
        item.titleView = navBarLabel; 
```

但是`UILabel`，我不想使用 2 行文本来制作 my ，而是添加 2 `UILabels`，*一个在另一个之上，*以分别实现对每个“行”中字体的自定义。它是如何实施的？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:14:36.100

只需创建一个父容器`UIView`来保存您的两个标签，并将此父容器用作您的标题视图。在伪代码中：

```
 UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 150, 44)];
   [titleView addSubview:someLabel];
   [titleView addSubview:anotherLabel];
   item.titleView = titleView; 
```

...您只需要确保您已正确设置标签框架，以便一个标签位于另一个标签之上。你如何做到这一点取决于你是否使用自动布局，但它非常简单明了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T12:33:42.113

iOS 允许您在栏中添加两个项目。试试下面的代码。

```
 UIButton *tempButton = nil;
    UIImage  *tempButtonImage = nil;
    UIImage  *tempButtonPressedImage = nil;

    tempButtonImage = [UIImage imageNamed:@"unselected1.png"];
    tempButtonPressedImage = [UIImage imageNamed:@"selected1.png"];
    tempButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [tempButton setImage : tempButtonImage forState : UIControlStateNormal];
    [tempButton setImage : tempButtonPressedImage forState : UIControlStateHighlighted];
    [tempButton addTarget : self action : @selector(tempButtonClick:) forControlEvents : UIControlEventTouchUpInside];
    tempButton.frame = CGRectMake(0, 0, tempButtonImage.size.width, tempButtonImage.size.height);

    UIView *tempButtonContainer = [[UIView alloc] initWithFrame:(CGRect){0.0, 0.0, tempButtonImage.size.width, tempButtonImage.size.height}];
    tempButtonContainer.backgroundColor = [UIColor clearColor];
    [tempButtonContainer addSubview:tempButton];

    UIBarButtonItem *tempToolbarButton = [[UIBarButtonItem alloc] initWithCustomView:tempButtonContainer];
    // custom logout button
    UIButton *temp2Button = nil;
    UIImage  *temp2ButtonImage = nil;
    UIImage  *temp2ButtonPressedImage = nil;

    temp2ButtonImage = [UIImage imageNamed:@"unselectedtemp2Button.png"];
    temp2ButtonPressedImage = [UIImage imageNamed:@"selectedtemp2Button.png"];
    temp2Button = [UIButton buttonWithType:UIButtonTypeCustom];
    [temp2Button setImage : temp2ButtonImage forState : UIControlStateNormal];
    [temp2Button setImage : temp2ButtonPressedImage forState : UIControlStateHighlighted];
    [temp2Button addTarget : self action : @selector(temp2ButtonClick:) forControlEvents : UIControlEventTouchUpInside];
    temp2Button.frame = CGRectMake(0, 0, temp2ButtonImage.size.width, temp2ButtonImage.size.height);

    UIView *temp2ButtonContainer = [[UIView alloc] initWithFrame:(CGRect){0.0, 0.0, temp2ButtonImage.size.width, temp2ButtonImage.size.height}];
    temp2ButtonContainer.backgroundColor = [UIColor clearColor];
    [temp2ButtonContainer addSubview:temp2Button];

    UIBarButtonItem *temp2ToolbarButton = [[UIBarButtonItem alloc] initWithCustomView:temp2ButtonContainer];

    // setting right items
    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:tempToolbarButton, temp2ToolbarButton, nil];

    UIButton *button = nil;
    UIImage  *buttonImage = nil;
    UIImage  *buttonPressedImage = nil;

    buttonImage = [UIImage imageNamed:@"asd.png"];
    buttonPressedImage = [UIImage imageNamed:@"selected-asd.png"];
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage : buttonImage forState : UIControlStateNormal];
    [button setImage : buttonPressedImage forState : UIControlStateHighlighted];
    [button addTarget : self action : @selector(buttonClick:) forControlEvents : UIControlEventTouchUpInside];
    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    UIView *buttonContainer = [[UIView alloc] initWithFrame:(CGRect){0.0, 0.0, buttonImage.size.width, buttonImage.size.height}];
    buttonContainer.backgroundColor = [UIColor clearColor];
    [buttonContainer addSubview:button];

    UIBarButtonItem *toolbarButton = [[UIBarButtonItem alloc] initWithCustomView:buttonContainer];

    self.navigationItem.leftBarButtonItem = toolbarButton; 
```

# mongodb - 如果特定收藏的价值发生变化，希望得到提示

> ID：14582562
> 
> 赞同：0
> 
> 时间：2013-01-29T12:10:00.737
> 
> 标签：mongodb

嗨，我在 Mongo DB 中有一个名为“secs”的集合

秒内的记录如下所示：

```
{ "_id" : ObjectId("50c9dbc9f0e2a3f7445a0550"), "active_flag" : "1",  "pcls" : "150.2500",  "pe" : "na" }
{ "_id" : ObjectId("50c9dbc9f0e2a3f7445a0551"), "active_flag" : "1",  "pcls" : "150.2500",  "pe" : "na" }
{ "_id" : ObjectId("50c9dbc9f0e2a3f7445a0552"), "active_flag" : "1",  "pcls" : "150.2500",  "pe" : "na" } 
```

// 删除了大部分字段，看起来很简单。

```
Is there any way we can write trigger in Mongo DB ?? 
```

**我的要求是，如果 pcls 值更改或等于零，我想被暗示？？**

请让我知道这是否可能？

# eclipse - 如何在 Eclipse RCP PreferencePage 中禁用 KEY-ENTER 行为

> ID：14582563
> 
> 赞同：1
> 
> 时间：2013-01-29T12:10:00.287
> 
> 标签：eclipse, default, rcp, behavior

在我的应用程序中，我有几个首选项页面。在其中一些中，用户必须编辑一些项目。如果用户使用`Enter`键-KEY，则整个首选项对话框将关闭，这是由于 OK 按钮具有焦点这一事实。

那么我怎样才能禁用这种行为呢？

我可以将焦点设置在页面上的任何项目上，但按下`Enter`会强制关闭对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:44:58.270

扩展默认 Dialog 并覆盖以下方法。

```
@Override
protected void createButtonsForButtonBar(Composite parent) {
    // Its the same as super.createButtonsForButtonBar(), but makes no default buttons by sending false.
    createButton(parent, IDialogConstants.OK_ID, IDialogConstants.OK_LABEL, false);
    createButton(parent, IDialogConstants.CANCEL_ID, IDialogConstants.CANCEL_LABEL, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T16:04:09.550

您可以在目标小部件上使用此代码

```
widget.addListener(SWT.Traverse, new Listener() {
    public void handleEvent(Event e) {
    if (e.detail == SWT.TRAVERSE_RETURN)
        e.doit = false;
    }
}); 
```

# javascript - javascript , Innerhtml 信息到 php 邮件

> ID：14582565
> 
> 赞同：0
> 
> 时间：2013-01-29T12:10:12.933
> 
> 标签：javascript, email, innerhtml, php

我已经制作了这个简单的购物车，添加的产品通过 innerhtml 显示，现在我希望这个 innerhtml 信息显示在您提交时发送的邮件中。到目前为止，我所做的方式是将每个值输入提交到邮件中，这意味着所有 70 种产品都添加到邮件中，无论它们是否为空（我只希望显示非空的在邮件中）

[http://www.premiere-produkter.no/pp/lagersalg/index.php](http://www.premiere-produkter.no/pp/lagersalg/index.php)是网页的链接，

部分javascript：

```
if (document.form.prod73.value >=1) {
myArray[73] =  "Fleecejakke EN471 Orange XXL" + " " +  document.form.prod73.value + "<br>";
} 
else if(document.form.prod73.value <=0) {
    myArray[73] = "";
}

var len = myArray.length;
for (var i=0; i<len != "0" !=""; ++i)
{
//function adding() {   
radioAlert.innerHTML = (myArray + "<br>").replace (/,/g, '');
+ myfunc();
//}
return false;
} 
```

php 部分（除了邮件的标题、收件人等）$body = "

```
Bekreftelse på bestilling:
\r\n\r\n 

Navn: $name_field\r\n 
===========================================
E-Mail: $email_field\r\n 
===========================================
Firma: $firma\r\n 
===========================================
Adresse: $adresse\r\n 
===========================================
Poststed: $poststed\r\n 
===========================================
Postnummer: $postnummer\r\n 
===========================================
Firma: $firma\r\n 
===========================================
Telefon: $tlf\r\n 
===========================================
Message: $message\r\n\r\n
=====================================================================================
Takk for at du bestilte hos oss, orderen din vil sett på og du vil motta en faktura snart. 
\r\n\r\n
=====================================================================================
Varebestillingen : 
$varer
\r\n\r\n
===========================================
Total Order Sum: $order kr
===========================================
";

if (mail($recipients,$subject, $body, $header)) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:30:26.740

答案可能不是最简单的方法，但它是最安全的，只是不做我最初要求的事情，我只是做了一个简单的 if 和 else php 命令，如果 prod 1,2,3,4 超过或类似于 1 a我在邮件正文中调用的变量改变了它的内容。如果它没有超过一个，它只是空的，这就是我发现至少工作的方式，可能是一些更简单的方式，但至少这工作顺利^^

```
//pilotjakke grå//
$vare1 = $_POST['prod5']; 
$vare2 = $_POST['prod6']; 
$vare3 = $_POST['prod7']; 
$vare4 = $_POST['prod8']; 
$vare5 = $_POST['prod9']; 
$varesum1 = $_POST['smu']; 

    if(isset
    ($_POST['prod5']) 
    || ($_POST['prod6'] )
    || ($_POST['prod7'] ) 
    || ($_POST['prod8'] )   
    || ($_POST['prod9'])) 
    {
    if ($_POST['prod5'] || $_POST['prod6'] || $_POST['prod7'] || $_POST['prod8'] || $_POST['prod9'] >=1 ) 
    {

    $pilotjakkegrå=
    "\n Pilotjakke pelsforet Grå Small: $vare1\r\n 
    Pilotjakke pelsforet Grå Medium: $vare2\r\n
    Pilotjakke pelsforet Grå Large: $vare3\r\n
    Pilotjakke pelsforet Grå X-Large: $vare4\r\n
    Pilotjakke pelsforet Grå XX-Large: $vare5\r\n
    Pris per enhet: 349 kr\r\n
    Total sum for Pilotjakke pelsforet Grå: $varesum1 kr\r\n
    ";
    }

    else
        {
        $pilotjakkegrå= "";
        }
     }; 
```

# ruby - 啁啾中止！lib/cpp（没有这样的文件或目录）

> ID：14582568
> 
> 赞同：0
> 
> 时间：2013-01-29T12:10:29.943
> 
> 标签：ruby, ruby-on-rails-3, jrubyonrails

我正在尝试制造要部署的战争。但我得到错误warble中止！每当我启动warble war命令时，lib/cpp（没有这样的文件或目录）

$啁啾战争

rm -f ROOT.war

创建 ROOT.war

啁啾中止！

lib/cpp (没有这样的文件或目录) WarblerJar.java:61:in `create_jar'

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:58:38.300

我认为该错误与 g++ 或 c++ 无关。有问题的代码正在尝试压缩内容。[https://github.com/jruby/warbler/blob/master/ext/WarblerJar.java](https://github.com/jruby/warbler/blob/master/ext/WarblerJar.java)出于某种原因，假设 lib/cpp 是应该被压缩的东西，或者它正在尝试创建新的 jar文件。

我创建了一个名为 ROOT 的测试 Rails 应用程序，以查看它是否是一些奇怪的命名问题，但它确实有效。

config/warble.rb 文件包含包含目录的列表

```
 config.dirs = %w(app config lib log vendor tmp) 
```

也许那里有一个错字？尝试删除 lib 条目作为调试的一个步骤。

或者，如果它超出了您的控制范围，可能会将 lib/cpp 条目添加到

```
 config.excludes = FileList["lib/cpp"] 
```

# entity-framework - 程序集之间的实体框架代码优先迁移不匹配

> ID：14582572
> 
> 赞同：0
> 
> 时间：2013-01-29T12:10:38.570
> 
> 标签：entity-framework, azure, ef-code-first, azure-sql-database, entity-framework-migrations

我正在构建一个 Azure 服务（具有 Web 角色和辅助角色），这两个服务都使用实体框架代码优先模型类引用一个 .dll 文件（*模型 dll ）。**模型 dll*启用了自动迁移。

我打算让 worker 角色更容易扩展，所以我打算将一些 dll 文件（*worker dll*）上传到一个 blob，并对 worker 进行编码以从这些程序集中动态加载和执行代码。当然，*worker dll*也会引用*模型 dll*，因为它们会更新数据库。

我的问题是，如果我部署*模型 dll*的新版本，而不更新*worker dll* ，会发生什么。*工作人员*将引用*模型*的旧版本，其中不包含最新的迁移。EF 会尝试降级架构吗？抛出异常？只要实体仍然兼容，就可以按预期工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:18:30.907

为什么不重建工作角色程序集并在分段部署中运行它，一旦测试结束，您可以将其切换到生产部署而无需停机......

```
http://msdn.microsoft.com/en-us/library/windowsazure/hh386336.aspx
http://msdn.microsoft.com/en-us/library/windowsazure/ee517253.aspx 
```

# java - 如何在 iReport 中每组显示一次绑定的详细信息？

> ID：14582573
> 
> 赞同：1
> 
> 时间：2013-01-29T12:10:39.017
> 
> 标签：java, jasper-reports, ireport

我在 IReport 中创建了一个包含 3 个组（日期、ID、类别）的报告。在详细信息绑定中，我放置了属于该类别的项目。这意味着每个类别都有相同的项目（项目的数量是动态的）。这些项目显示在我不想要的每个类别下。

我想为类别组显示一次我的详细信息。这意味着对于高、低和中类别，细节应该只显示一次。如图片中的详细信息显示了 3 次，这不是我想要的。

**有谁知道如何在 ireport 中做到这一点？**

![在此处输入图像描述](../Images/69b0dcd51e2e712a4a26a05de5a07f61.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:53:19.717

将此添加到您的详细信息带的“打印时表达式”属性中：$V{REPORT_COUNT} == 1

编辑添加：尝试 $V{COLUMN_COUNT} == 1。也许 REPORT_COUNT 由于您的组而对您不起作用。

# zend-framework2 - ZF2 模块最佳实践

> ID：14582579
> 
> 赞同：2
> 
> 时间：2013-01-29T12:10:53.340
> 
> 标签：zend-framework2

Zend Framework 版本 2 中的新模块系统公认的最佳实践是什么？我的意图是为我的应用程序的每个控制器创建一个模块，还是我应该使用这些模块以某种方式将相关的控制器及其模型组合在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:00:39.967

请参阅[Rob Allens 对 Modules](http://akrabat.com/zend-framework-2/modules-in-zf2/)的介绍或[Matthews 对 Modules](http://www.mwop.net/blog/267-Getting-started-writing-ZF2-modules.html)的介绍。

简而言之：一个模块只是一堆执行一项特定任务的类。IE：A`Guestbook`可能是一个模块。**可能**`GuestbookMailing`是另一个模块（但不一定是）。您的模块中可以有多个控制器、模型、视图。但它应该与整个应用程序的一部分相关联。

# ios - 如何为纯原生 iOS 应用程序（无 Web 应用程序）配置“应用程序域”（Open Graph 操作需要）？

> ID：14582581
> 
> 赞同：4
> 
> 时间：2013-01-29T12:11:05.683
> 
> 标签：ios, facebook-opengraph

当用户从应用程序将照片上传到我的（网络）服务器时（例如，用户将**照片上传****到**服务器），我的 iOS 应用程序想要发布一个打开的图形操作。该应用程序将是我与 Facebook 交互的唯一点，并且我不维护想要使用 Facebook 登录的网络或移动网络。

 **每当我尝试发布上述操作+对象（我服务器中页面的 URL）时，Facebook 都会抱怨无效域并建议我配置“应用程序域”。

但是，在 Facebook 应用程序设置中，为了配置“应用程序域”，我需要有一个 Web（用户 Facebook 登录）或移动 Web 或 Facebook 选项卡。我不打算支持。如果我继续设置“应用程序域”，Facebook 将不允许我保存。

我错过了什么？或者我的用例不是 Open Graph 的意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:44:53.300

如果您的域是 example.com，只需在 App Dashboard 中启用“使用 Facebook 登录的网站”（即使您没有 Web 集成），对于网站 url 输入：[http](http://example.com) ://example.com 然后输入 example.com在“应用程序域”中。**

# bash - 使用两个分隔符从 10GB CSV 文件中剪切选定的数据

> ID：14582582
> 
> 赞同：1
> 
> 时间：2013-01-29T12:11:09.873
> 
> 标签：bash, sed, awk, grep

我有一个 10GB 的 CSV 文件，我正在尝试从中剪切选择输出。目前我有以下内容，但由于它的大小它消耗（方式）太多资源，所以我正在寻找优化它。

```
#!/bin/bash
FILE=data.txt
FILEPATH=/home/user/

if [[ -z $1 ]]; then
        echo "No search parameter specified. Specify one when running this."
fi

echo "Searching $FILEPATH/$FILE for $1.. this may take a while."
echo ""

while IFS= read -r LINE;
        do
                # Grep for $1 and cut select columns
                grep $1 | cut -d"," -f7,9,15,16,19,22,23,24
        done 
```

输入文件的示例行如下所示：

> 结果：key=value1,error=0,command=SetOperator|SOURCE: file=/home/user/logs/current,start_date=20130128,

我想做的是在文件中搜索任何值，并让它从找到结果的每一行返回（剪切版本）结果。
例如，搜索“20130128”应返回：

> SetOperator,value1,20130128,

这意味着我需要同时处理 command 和 equals 作为分隔符。

我环顾了 SO（即[this](https://stackoverflow.com/questions/7197500/performance-issue-with-parsing-large-log-files-5gb-using-awk-grep-sed)）并花了一些 Google-fu，虽然我发现“读取”速度很慢并且没有针对诸如此类的大文件进行优化是普遍接受的；我没有找到很多替代方案。

你会推荐我用什么？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:33:23.847

你写的命令：

```
while IFS= read -r LINE;
        do
                # Grep for $1 and cut select columns
                grep $1 | cut -d"," -f7,9,15,16,19,22,23,24
        done 
```

永远不会终止，因为您没有在任何东西上运行 grep，既不是文件也不是管道。

试试这个：

```
awk -v re="$1" 'BEGIN{FS=OFS=","} $0~re{print $7,$9,$15,$16,$19,$22,$23,$24}' "${FILEPATH}/${FILE}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:25:09.117

我没有要测试的 10GB 文件，但 grep 手册页显示了两个可能有帮助的选项：

> --line-buffered
> 在输出上使用行缓冲。这可能会导致性能损失。
> 
> --mmap
> 如果可能，使用 mmap(2) 系统调用来读取输入，而不是默认的 read(2) 系统调用。在某些情况下， --mmap 会产生更好的性能。但是，如果在运行 grep 时输入文件缩小，或者发生 I/O 错误， --mmap 可能会导致未定义的行为（包括核心转储）。

行缓冲选项会使整个命令运行得更慢，但是你会开始更快地获得结果，mmap 可能很奇怪。

使用这些选项然后循环将是不必要的，如下所示：

```
grep --mmap "pattern" file | cut -d"," -f7,9,15,16,19,22,23,24 
```

或者

```
grep --line-buffered "pattern" file | cut -d"," -f7,9,15,16,19,22,23,24 
```

# utf-8 - 在我的应用程序中使用 glassfish 时，UTF-8 字符特别是阿拉伯语损坏

> ID：14582590
> 
> 赞同：0
> 
> 时间：2013-01-29T12:11:28.813
> 
> 标签：utf-8, glassfish, liferay

我之前遇到过这个问题，使用 Liferay POrtal，在我导入 lar 文件后，任何阿拉伯字符和任何特殊字符（如“♦”）都被毁为问号“？”，当我检查数据库时，我看到它也是这样存储的，我是说 ”？” .

它在这里解释：[Import .lar file issue on Encoding with Glassfish as Application Server](https://stackoverflow.com/questions/8698525/import-lar-file-issue-on-encoding-with-glassfish-as-application-server)

添加`-DFile.encoding=UTF8`对我没有帮助。

并且在阿拉伯语中使用 Liferay 本身没有问题（例如添加 Web 内容），从数据库中检索数据运行良好。

这些天，我正在从 liferay 5.2.8 升级到 6.1.20，我再次遇到了这个问题，升级涉及的所有阿拉伯字符（作为临时文件提取到临时目录，然后重新插入到 DB）都损坏了..

所以在我看来，这是 Glassfish 文件系统的问题。

我尝试了 Tomcat 7.0 并没有发生此问题，并且我的数据幸存下来，但我需要在 Glassfish 应用程序服务器中解决它。

仅供参考：Glassfish v2.1.1、v3.1.2.2 和 ML 版本存在相同问题。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:12:12.353

检查您的数据库使用哪种编码。典型的建议是也使用 UTF-8 作为数据库存储。小心：当您检查数据库中的正确字符时，您的 DB-tools 可能使用与数据库本身不同的编码。很抱歉您遇到的情况，编码问题总是一团糟。

如果您检测到您的数据库使用非 UTF-8 编码，您可能会幸运地在数据库连接字符串中指定该编码（取决于您使用的任何数据库），但您会很幸运。您可能需要修复一些 - 脚本或手动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:22:11.433

这`-Dfile.encoding`是一个 Oracle JVM 特定设置如何读取 Java 源文件。这对 HTTP 响应的 Content-Type 标头中指定的字符集没有任何影响。

您可以将以下内容添加到文件 glassfish-web.xml（位于 WEB-INF 文件夹中）：

```
<parameter-encoding default-charset="UTF-8"/> 
```

如果您有 .jsp 文件，请在 web.xml 中尝试：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

# qt - qgroupbox的边框

> ID：14582591
> 
> 赞同：22
> 
> 时间：2013-01-29T12:11:35.707
> 
> 标签：qt, border, groupbox

我在设置组框的边框时遇到了一些麻烦。

我的目标是有这样的东西：

![在此处输入图像描述](../Images/c6a7bdcc0b69fd4f800c74dd9dede8a3.png)

但到目前为止，我能得到的是：

![在此处输入图像描述](../Images/90e3453967d868aa41214d551eec4cdd.png)

我正在使用的样式表：

```
#groupBox {
    border: 1px solid gray;
    border-radius: 9px;
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-29T13:27:06.833

```
QGroupBox {
    border: 1px solid gray;
    border-radius: 9px;
    margin-top: 0.5em;
}

QGroupBox::title {
    subcontrol-origin: margin;
    left: 10px;
    padding: 0 3px 0 3px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T03:19:40.520

我建议

```
QGroupBox::title {
    subcontrol-origin: margin;
    left: 3px;
    padding: 3 0 3 0;
} 
```

对于标题，可以更恰当地调整标题。

# c++ - 将整数的十进制值作为其 ASCII 表示形式插入 char 向量

> ID：14582592
> 
> 赞同：-2
> 
> 时间：2013-01-29T12:11:45.790
> 
> 标签：c++, vector, int

我有一个`int`，我想将其转换为`vector<char>`.

例如：

```
std::vector<char> MyVct;
int i = 2046; 
```

所以我想要一个大小为 4 的向量，它将具有：

```
MyVct[0] = '2';   
MyVct[1] = '0';   
MyVct[2] = '4';   
MyVct[3] = '6'; 
```

我怎样才能以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:19:23.723

一种方便的方法是使用[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)：

```
auto s1 = std::to_string(i);
std::vector<char> vec1(s1.begin(), s1.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:17:40.830

做这个：

```
if (n == 0) { MyVct.push_back('0'); }

else { for ( ; n; n /= 10) { MyVct.push_back('0' + (n % 10)); } }

std::reverse(MyVct.begin(), MyVct.end()); 
```

# java - 如何将值放入/从嵌套的 HashMap 中取出

> ID：14582596
> 
> 赞同：11
> 
> 时间：2013-01-29T12:11:51.620
> 
> 标签：java, hashmap, nested

我想创建一个嵌套的 HashMap，它将采用两个浮点类型的键并给出整数类型的值。

```
 public static HashMap<Float, HashMap<Float, Integer>> hashX = new HashMap<Float,HashMap<Float, Integer>>(); 
```

是否有一种简单的方法可以像普通的 HashMap 一样放置/获取值，即

```
 hashX.put(key, value);
  hashX.get(key); 
```

还是必须使用更复杂的方法？我在网上搜索了解决方案，但发现很难找到适用于我的解决方案。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T12:35:58.500

```
Map<Float, Map<Float, Integer>> map = new HashMap<>();

map.put(.0F, new HashMap(){{put(.0F,0);}});
map.put(.1F, new HashMap(){{put(.1F,1);}});

map.get(.0F).get(.0F); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T12:15:54.583

您必须`get()`将嵌套地图从外部地图中取出，然后调用可以`put()`调用`get()`它

```
float x = 1.0F;
HashMap<Float, Integer> innerMap = hashX.get(x);
if (innerMap == null) {
    hashX.put(x, innerMap = new HashMap<>()); // Java version >= 1.7
}
innerMap.put(2.0F, 5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T12:19:32.230

您可以使用如下方法创建包装类：

```
public class MyWrapper {
    private Map<Float, Map<Float, Integer>> hashX;
    // ...
    public void doublePut(Float one, Float two, Integer value) {
        if (hashX.get(one) == null) {
            hashX.put(one, new HashMap<Float, Integer>());
        }
      hashX.get(one).put(two, value);
    }
} 
```

请注意，在声明字段时，您应该使用接口而不是具体的实现。例如，如果需要，它会更容易`HashMap`重构`ConcurrentHashMap`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T12:16:41.213

你可以这样做：

```
HashMap<Float, Integer> h1 = new HashMap<Float, Integer>();
h1.put(1.0f,new Integer(1));
HashMap<Float, Integer> h2 = new HashMap<Float, Integer>();
h2.put(3.0f,new Integer(3));

hashX.put(1.0f, h1);
hashX.put(1.0f, h1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-17T18:59:26.740

试试这个。

```
static <K0, K1, V> void put(Map<K0, Map<K1, V>> map, K0 k0, K1 k1, V value) {
    map.computeIfAbsent(k0, x -> new HashMap<>()).put(k1, value);
}

static <K0, K1, V> V get(Map<K0, Map<K1, V>> map, K0 k0, K1 k1) {
    return Optional.ofNullable(map.get(k0)).map(s -> s.get(k1)).orElse(null);
} 
```

和

```
Map<Float, Map<Float, Float>> map = new HashMap<>();
put(map, 1F, 2F, 3F);
put(map, 4F, 5F, 6F);
System.out.println(map); 
```

输出：

```
{4.0={5.0=6.0}, 1.0={2.0=3.0}} 
```

或者干脆

```
Map<Float, Map<Float, Float>> map = Map.of(
    1F, Map.of(2F, 3F),
    4F, Map.of(5F, 6F)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T15:33:54.717

> 我想创建一个嵌套的 HashMap，它将采用两个浮点类型的键并给出整数类型的值。

你*不需要*一个嵌套的 Map 。如果您想使用复合键进行查找，最好将您的地图声明为这样。`Pair`JFK中没有一个好的课程，但你可以使用`Map.Entry`，这有点不方便使用但有效：

```
Map<Map<Float, Float>, Integer> map = new .... 
```

有关创建实例，请参阅[https://stackoverflow.com/a/3110563/18573](https://stackoverflow.com/a/3110563/18573)`Map.Entry`

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2021-07-24T16:11:08.723

```
package com.Collection;

import java.util.*;

public class India {

    public static void main(String[] args) {
        Set s = new TreeSet();
        s.add("Barshi");
        s.add("Pandharpur");
        s.add("Kurduwadi");
        s.add("Vairag");
        Map<String,Map<String,Map<String,TreeSet>>> map =               
                Map.of("India", Map.of("Maharashtra", Map.of("Solapur", new TreeSet(s))));

        System.out.println(map);
        System.out.println(map.get("India").get("Maharashtra").get("Solapur").contains("Barshi"));
    }

} 
```

# c++ - 在 C++ 中将 main() 声明为友元函数

> ID：14582603
> 
> 赞同：6
> 
> 时间：2013-01-29T12:12:24.667
> 
> 标签：c++

我有一个类，我只希望客户为每个进程创建一个对象。除了单例，更好的方法（我相信）是告诉客户只在 main() 中创建它们。因此，一个自然的强制措施是将构造函数设为私有，并将 main() 设为友元。

它是这样工作的：

```
class A { friend int main(int, char**); A() {} };
int main(int, char **) { A a; } 
```

但是当我需要将类 A 放在命名空间中时它会中断：

```
namepace ns { class A { friend int main(int, char**); A() {} }; }
int main(int, char **) { ns::A a; } 
```

问题在于范围：编译器现在认为

```
friend int main 
```

表示命名空间 ns 中名为 main() 的函数。所以真正的 main() 变得无关紧要。

所以问题是：如何解决这个问题？当然，我必须将 A 类放在命名空间中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T12:28:57.420

您需要`main`在类定义之前在全局命名空间中声明，因为`friend`声明只能在周围的命名空间中引入名称：

```
int main(int, char**); 
```

并在命名空间内引用它时限定名称：

```
namepace ns { class A { friend int ::main(int, char**); A() {} }; }
//                                 ^^ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T12:21:42.490

使用 " `::`" 将某些东西限定为在全局命名空间中，即：

```
friend int ::main(int argc, char** argv); 
```

# c++ - 用 boost::gil 画线？

> ID：14582607
> 
> 赞同：5
> 
> 时间：2013-01-29T12:12:46.427
> 
> 标签：c++, boost, drawing, 2d, boost-gil

我需要在（屏幕外）图像上绘制一些线条。我想使用 boost::gil 因为该库已经集成到我的项目中。

**我想在 2dim 数组中从起点到终点画一条线**

**谁能给我一个快速的例子，如何使用 gil 画一条线？**

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:57:22.180

GIL 本身非常关心各种格式的图像和像素的存储以及它们之间的转换……但仅此而已。 [user1929959 的答案](https://stackoverflow.com/a/14582868/24283)是使用 GIL 扩展，该扩展有助于 GIL 与 OpenCV 的互操作性，然后使用 OpenCV 的线条图（但 OpenCV 不附带增强功能，因此您也需要将其添加到您的项目中）。

对于高质量的抗锯齿线条绘制， [AGG](http://antigrain.com/)和[Cairo](http://cairographics.org/)可能也值得考虑（尽管您需要弄清楚如何最好地使 GIL 图像适应它们自己的图像缓冲区类型）。但是，如果您只想要基本的一个像素宽的线条，请查阅任何基本的计算机图形文本以获取一些[Bresenham 的线条算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)伪代码，这些伪代码可以使用像素设置轻松实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:27:04.740

首先看一下[boost::gil 教程](http://www.boost.org/doc/libs/1_41_0/libs/gil/doc/html/giltutorial.html)。[您可以在绘图测试](http://gil-contributions.googlecode.com/svn-history/r329/trunk/gil_2/libs/gil/opencv/unit_test/drawing_test.cpp)中找到一个示例，从中可以轻松提取方法来绘制线条。

# php - 调用未定义的方法 Mage_Customer_Helper_Address::getAttributeValidationClass()

> ID：14582608
> 
> 赞同：2
> 
> 时间：2013-01-29T12:13:04.883
> 
> 标签：php, magento

我有一个 Magento 安装并在结帐页面上出现以下错误。

```
Call to undefined method Mage_Customer_Helper_Address::getAttributeValidationClass() 
```

我已经检查`Mage_Customer_Helper_Address`了这个特定功能的类，并在类文档中进行了搜索。但是我也没有在文档中看到这种方法。谁能告诉我可能是什么问题？

它是 Magento 的内置方法吗？我是 Magento 新手，服务器上安装的版本是 `1.4.2.0`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:23:46.240

难道是有一些扩展与1.4.2.0版本不兼容？例如，因为 Magento v. 1.7 在`Mage_Customer_Helper_Address`类中确实有这个方法。您可以创建一个覆盖助手并将此方法添加到其中：

```
/**
     * Get string with frontend validation classes for attribute
     *
     * @param string $attributeCode
     * @return string
     */
    public function getAttributeValidationClass($attributeCode)
    {
        /** @var $attribute Mage_Customer_Model_Attribute */
        $attribute = isset($this->_attributes[$attributeCode]) ? $this->_attributes[$attributeCode]
            : Mage::getSingleton('eav/config')->getAttribute('customer_address', $attributeCode);
        $class = $attribute ? $attribute->getFrontend()->getClass() : '';

        if (in_array($attributeCode, array('firstname', 'middlename', 'lastname', 'prefix', 'suffix', 'taxvat'))) {
            if ($class && !$attribute->getIsVisible()) {
                $class = ''; // address attribute is not visible thus its validation rules are not applied
            }

            /** @var $customerAttribute Mage_Customer_Model_Attribute */
            $customerAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', $attributeCode);
            $class .= $customerAttribute && $customerAttribute->getIsVisible()
                ? $customerAttribute->getFrontend()->getClass() : '';
            $class = implode(' ', array_unique(array_filter(explode(' ', $class))));
        }

        return $class;
    } 
```

# c# - 这段代码有什么问题？找不到 webbrowser 元素的正确位置

> ID：14582610
> 
> 赞同：0
> 
> 时间：2013-01-29T12:13:07.813
> 
> 标签：c#, winforms, webbrowser-control, element

```
private Point GetElementPosition(IHTMLElement current_element)
    {
        int x_add = current_element.offsetWidth;
        int y_add = current_element.offsetHeight;
        int x = current_element.offsetLeft;
        int y = current_element.offsetTop;
        while ((current_element = current_element.parentElement) !=null)
        {
            x+=current_element.offsetLeft;
            y+= current_element.offsetTop;
        }

        y-=(webBrowser.Location.Y);

        return new Point(x+(x_add/2),y-(y_add/2));
    } 
```

这个方法应该计算屏幕上 IHTMLElement 的绝对位置，同时考虑到 webbrowser 控件的位置。然后它返回一个 Point 变量，该变量对应于元素的中点。它出什么问题了？它的目标似乎降低了大约 50-60 像素。编辑：我也尝试了同样的事情，但使用 HtmlElement 而不是 IHTMLElement。没有什么不同。我使用 SetCursorPos 函数将鼠标光标发送到计算结果，但它总是低于所需位置。我没有考虑什么？

# android - 如何以编程方式将图像添加到 LinearLayout？

> ID：14582620
> 
> 赞同：5
> 
> 时间：2013-01-29T12:13:53.963
> 
> 标签：android, imageview, android-linearlayout

我的项目中有一个 LinearLayout 和一些按钮。我希望在单击每个按钮时从 drawable 向 LinearLayout 添加一个小图像。如何以编程方式将图像添加到 LinearLayout？

这是我在 Horizo​​ntalScrollView 中的 LinearLayout：

```
 <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top|center"
        >

        <LinearLayout
            android:id="@+id/LinearLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

        </LinearLayout>
    </HorizontalScrollView> 
```

这是我的活动：

```
public class MainActivity extends Activity
{

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

            final LinearLayout notes = (LinearLayout)  findViewById(R.id.LinearLayout_notes);
            final  ImageView notes_do = new ImageView(this);
            notes_do.setBackgroundResource(R.drawable.notes_do);

    new Thread(new Runnable() {
        @Override
        public void run() {

    final ImageButton img_1 = (ImageButton) findViewById(R.id.img_1_);
    img_1.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

        if( event.getAction() ==  MotionEvent.ACTION_DOWN ) {

              notes.addView(notes_do);

        }
            return true;
        } 

       });  // end of ontouch

           }
          }).start(); // end of thread      

} // end of oncreate
}// end of activity 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T12:19:29.667

```
 LinearLayout ll = (LinearLayout)findViewById(R.id.LinearLayout1);
for(int i=0;i<5;i++)
{
        ImageView ii= new ImageView(this);
        ii.setBackgroundResource(R.drawable.ic_action_search);
        ll.addView(ii);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:19:12.163

您可以对线性布局执行 findViewById 并在按钮的 onclicklistener 中动态添加图像视图

```
LinearLayout linLay = (LinearLayout)findViewById(R.id.LinearLayout1);
ImageView image = new ImageView(this);
//add image to imageview
...
linLay.addView(image); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:22:30.263

```
 ImageView img = new ImageView( this);
        LinearLayout rl = (LinearLayout) findViewById(R.id.LinearLayout1);
        LinearLayout.LayoutParams viewParamsCenter = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        img.setImageResource(R.drawable.ic_launcher);
        img.setLayoutParams(viewParamsCenter);
        rl.add(img); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T12:25:32.027

当您想动态设置图像时，单击按钮。您可以将图像视图添加到线性布局

```
 View LinearLayout1 = findViewById(R.id.Layout1);
    ImageView image1 = new ImageView(getApplicationContext());
    String uri = "@drawable/myresource.png"; // Here you can set the name of
                                                // the image dynamically
    int imageResource = getResources().getIdentifier(uri, null,
            getPackageName());
    Drawable res = getResources().getDrawable(imageResource);
    image1.setImageDrawable(res);
    ((ViewGroup) LinearLayout1).addView(image1); 
```

# url - SEO 策略：目录、单独的域或子域？

> ID：14582622
> 
> 赞同：1
> 
> 时间：2013-01-29T12:14:04.190
> 
> 标签：url, blogs, seo

存储博客的最佳 SEO 策略是什么？

1）在目录中：`www.example.com/blog`

2) 在单独的域中：`www.exampleblog.com`

3) 在子域中：`www.blog.example.com`

使用目录，博客获得的重复直接转移到主域（`www.example.com`）。使用单独的域，任何指向我网站的链接都将计为反向链接。

我倾向于选项 1。我应该考虑哪些其他优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:15:32.987

这是全面的，**[子域与子目录](https://webmasters.stackexchange.com/questions/34173/subdomains-vs-subdirectory-status-as-of-2012 "子域与子目录 2012 状态")**（通过 Webmasters SE）。它于 2012 年 11 月更新。也请看**[这个答案](https://webmasters.stackexchange.com/a/30944/8359 "反向代理对子域与子目录的影响")**，因为它具体描述了一个巨大的图表，子文件夹（在这种情况下是指子目录）与子域对 SEO 有什么影响，以及如何使用反向代理会影响博客 SEO。它的要点是子域优于子目录。

**编辑**
我可能误读了这个问题。如果选择在
`mywebsitename.com/blog`
与
`mywebsitenameblog.com`

那么我肯定会推荐使用子目录。这就是为什么：

*   如果您使用完全不同的域名，即使是您网站的四个字母`blog`连接的域名，也会让用户感到困惑，因为没有人这样做！
*   您将需要支付第二个域的费用，而这会花费更多的钱。
*   您将做一些与典型网站命名约定不一致的事情，如果我担心 SEO 并正在开发电子商务网站，我会避免这样做。我不知道它是否会对 SEO 排名产生负面影响，但这无济于事，因为它将是一个完全不同的域名，没有您的主域名的任何正面声誉或可信度。
*   它将长四个字符，这绝不是好事，因为它不太方便，更难记住等等。

更好的是，为您的博客使用主网站的子域。总而言之，您应该按照从好到坏的顺序执行以下操作：

`blog.mywebsitename.com`
`mywebsitename.com/blog`
`mywebsitenameblog.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:28:49.373

根据这个决定，根据哪个搜索引擎将查看并为您的博客增加或减少价值，会有细微的差别。

[阅读Matt Cutts](http://www.mattcutts.com/blog/subdomains-and-subdirectories/)的这篇博文。或[观看此视频以获取摘要](http://www.youtube.com/watch?feature=player_embedded&v=_MswMYk05tk)

如果您选择另一个域，那么搜索引擎会期望它是单独的内容，并且与您的主域排名没有太大关系。

我会将博客安装在名为 blog 的子目录中，并且不再担心来自搜索引擎的实际汁液，因为它可能因一个而异。

# jquery - 在每个 page-break-inside 后插入页脚：避免在所有页面上 jQuery

> ID：14582624
> 
> 赞同：0
> 
> 时间：2013-01-29T12:14:09.760
> 
> 标签：jquery, html, css, printing

我为我的股票清单创建了一个打印 css。库存清单可以是 100 页。我希望能够在我打印的每一页的底部插入一个自定义页脚。我正在使用分页符来阻止内容与页脚重叠：

```
@media print {table.Mystock{page-break-inside: avoid}}

 div.divFooter {position: fixed; bottom: 0; left:0; text-align:left; color:black;   clear:both;
                   font-size:10px; display:block; padding-bottom:20px;}

<div class="divFooter">footer</div> 
```

但是，当我有多个页面时，页脚仅显示在打印的第一页上。

如何将页脚添加到打印的每一页的底部？

谢谢

# python - python中的对象树与带有Javascript的DOM

> ID：14582625
> 
> 赞同：0
> 
> 时间：2013-01-29T10:18:09.603
> 
> 标签：python, qt, pyqt4

我正在尝试做一些 python 应用程序（Pyside/Qt），但不知道如何将对象作为另一个函数的参数。使用 Javascript，我可以访问 DOM 中的任何对象/元素。我需要在 Python 中构建自己的对象模型吗？

在此处查看我的[示例](https://stackoverflow.com/questions/14546803/qt-and-python-how-to-find-objects-and-use-them)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:57:26.123

我想您是在问如何遍历 Qt 对象树。见[http://qt-project.org/doc/qt-4.8/qobject.html#details](http://qt-project.org/doc/qt-4.8/qobject.html#details)

> QObjects 在对象树中组织自己。当你以另一个对象为父对象创建 QObject 时，该对象会自动将自己添加到父对象的[children](http://qt-project.org/doc/qt-4.8/qobject.html#children) () 列表中。父级获得对象的所有权；即，它将自动删除其析构函数中的子级。您可以按名称查找对象，也可以选择使用[findChild](http://qt-project.org/doc/qt-4.8/qobject.html#findChild) () 或[findChildren](http://qt-project.org/doc/qt-4.8/qobject.html#findChildren) () 键入。

编辑：
`QGraphicsItem`但是，它不是子类，`QObject`也没有`objectName`属性。如果您需要按名称访问此类对象，则必须自己完成，例如使用 Python`dict`以名称作为键，对象作为值。

# c# - 如何从网页和 webform 访问类库中的配置文件

> ID：14582626
> 
> 赞同：1
> 
> 时间：2013-01-29T12:14:17.627
> 
> 标签：c#, asp.net, xml, winforms, webforms

我有几个项目，其中一些是 Web 应用程序，一些是 Windows 应用程序。
我想全球化我的设置，比如连接字符串，因为所有项目都使用相同的连接字符串。
所以我跟着这个例子[How to share custom application configuration settings across projects in .NET](http://support.microsoft.com/kb/555396)

我的 XML 文件位于类库中，并且在每个项目中都被引用。Windows 项目在客户端项目中的文件路径上运行良好，如下所示：

```
<configuration>
      <appSettings file="F:\Classes\ConnectionStringFile.xml">

      </appSettings>

    </configuration> 
```

我还希望能够从 Web 项目中使用这个 xml 文件。但是，Web 项目不接受该文件的路径，如前所示。

在 Web 项目和 Windows 项目之间共享此连接字符串文件的最佳方法或最佳解决方案是什么。我要传入什么

像`<appSettings file ="~/classLibrary/ConnectionStringFile.xml"`???`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:19:15.343

`file=`接受相对路径，并且 *.config 文件从 ASP.NET 和 IIS 静态文件规则中排除，因此将任何 *.config 文件放入 ASP.NET 站点是安全的。只需将其放在 web.config 文件（Web 应用程序的根目录）旁边`mylibrary.config`，然后`file="mylibrary.config"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:51:32.390

我们使用的解决方案是将共享设置存储在 CommonApplicationData 文件夹下的自定义文件夹中（例如 Windows7 上的 C:\ProgramData）：

```
var commonAppData = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
var settingsFilePath = Path.Combine(commonAppData, "MyProgram\\Settings.xml"); 
```

# azure-storage - 在 Jclouds 中使用 Azure blob 的凭据是什么？

> ID：14582627
> 
> 赞同：0
> 
> 时间：2013-01-29T12:14:19.300
> 
> 标签：azure-storage, jclouds

我在玩 Jclouds。我设法连接到我的 Amazon S3 帐户，并且我正在尝试为 Azure blob 存储做同样的事情。但是我不知道我应该填写什么凭据：

```
BlobStoreContext context = new BlobStoreContextFactory().createContext("azureblob", accesskeyid, secretkey); 
```

那么 accesskeyid 和 secretkey 是什么？

我在这里找到了一些说明，但它们不是很有帮助。 [http://www.jclouds.org/documentation/quickstart/azure-storage/](http://www.jclouds.org/documentation/quickstart/azure-storage/)

在 Azure blob 中，你得到的是两个访问密钥：一个主要的和次要的。我尝试将这些分别用作 accesskeyid 和 secretkey，但没有用。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:42:04.873

我刚刚发现凭据如下：

accessKeyId：存储帐户名称

secretKey：主访问密钥

# linux - 丢失的 TCP 数据包在哪里？

> ID：14582632
> 
> 赞同：0
> 
> 时间：2013-01-29T12:14:36.953
> 
> 标签：linux, sockets, tcp

我观察到一个令人惊讶的事情，当基于 udp 和基于 tcp 的应用程序都在发送数据包时，如果基于 upd 的应用程序发送数据包的速度如此之快，以至于带宽几乎被 udp 数据包填满，那么 tcp 数据包将非常困难发送出去。

令人惊讶的是，尽管基于 tcp 的应用程序能够发送一些数据包（通过 write() 的返回值观察），但 tcp 数据包的接收者从未收到它们。为什么？那是因为tcp-packets最终不是由网卡发出的吗？还是路由器实际上丢弃了 tcp 数据包？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:54:40.630

首先，write() 的返回值并不是数据包是否发送的指标。它只是表示数据已被缓冲。

其次，如果你用 UDP 数据包使网络饱和，将会有很多数据包丢失，而自适应 TCP 将通过更慢地发送数据包来适应这种情况。如果丢包率太高，TCP基本上可以完全停止。解决方案是不要用 UDP 数据包使网络饱和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:21:49.920

*这是一个简化的答案。您可以阅读许多文章。*

UDP是建立在IP之上的一层。TCP 同上。网卡只是发送IP数据包。您可以查找这些数据包的各种结构。

TCP 是一种使用 IP 数据包的协议，但使用一种机制来尝试确保以正确的顺序传送和重新排列数据包。请参阅维基百科上的文章。

路由器可以随意丢弃数据包。当网络过载、网络连接中断或 IP 数据包损坏时，可能会发生这种情况。

因此，要回答您的问题，他们在从一端传输到另一端的 UDP 或 IP 之间没有偏好。

# mysql - 我应该将哪些列添加到 PRIMARY KEY

> ID：14582633
> 
> 赞同：1
> 
> 时间：2013-01-29T12:14:47.300
> 
> 标签：mysql, sql, primary-key

我想通过创建一个主键来创建一个表并避免重复的条目。问题是我不知道应该将哪些列添加到此 KEY。考虑下表：

```
CREATE TABLE `customers` (
  `id_c` int(11) unsigned NOT NULL,
  `lang` tinyint(2) unsigned NOT NULL,
  `name` varchar(80) collate utf8_unicode_ci NOT NULL,
  `franchise` int(11) unsigned NOT NULL,
  KEY `id_c` (`id_c`),
  KEY `lang` (`lang`),
  KEY `franchise` (`franchise`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

**id_c**：客户 ID。它可以是一个企业。假设*McDonald's*
**lang**：联系语言。
**boss** : Boss' name
**特许经营权**：如果不为零，就是特许经营权。罗马、巴黎、伦敦的麦当劳……

如您所见，每个**ENTERPRISE**可以在每个国家拥有不同的**中央**“商店”（*联系语言*），但在每个城市也可以有不同的***特许经营权***（老板的名字会不同）。

我希望能够插入新行，其中**id_c**，**lang**可能不明显（同一国家/地区的许多特许经营权）。但是**只有**当 (**id_c,lang**）相同（对于其他 id_c,lang 组合...名称可能相同）。只有当没有在同一 (id_c,lang) 对中分配特许经营权时，特许经营权也可以相同。

我在考虑 PRIMARY KEY ( `lang`, `name`)，但这可能不是最好的方法。这个表结构是不是太复杂了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:24:20.170

您需要创建一个多列`UNIQUE`约束，

```
CONSTRAINT tb_uq UNIQUE (id_c,lang, name) 
```

或将它们设置为主键，

```
CREATE TABLE `customers` 
(
  `id_c` int(11) unsigned NOT NULL,
  `lang` tinyint(2) unsigned NOT NULL,
  `name` varchar(80) collate utf8_unicode_ci NOT NULL,
  `franchise` int(11) unsigned NOT NULL,
  KEY `id_c` (`id_c`),
  KEY `lang` (`lang`),
  KEY `franchise` (`franchise`),
  CONSTRAINT tb_PK PRIMARY KEY (id_c,lang, name)    --- <<== compound PK
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:34:00.063

如果我的问题是正确的...您是在问要选择哪些列...而不是如何做？正确吗？

所以我猜特许经营号码不是布尔（是/否）的东西，而是每个商店都有一个唯一的号码？......每个国家？如果是这样，那么使用 id_c 和特许经营权。
如果不是，您可以选择所有 4 个作为关键...但我认为这不是一个好习惯。在这种情况下，我会说您应该再添加一列（例如 trueID - 自动增量整数）并使用它一个作为您的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:22:17.160

只需将 Id 作为主键。因为使用 Id_c 您可以获得其他列值。如您所见，最好的建议是创建您的 Primary id 应该在第一列。

# iis-7 - 在本地主机上的 dnn 中创建新门户

> ID：14582636
> 
> 赞同：3
> 
> 时间：2013-01-29T12:14:53.477
> 
> 标签：iis-7, dotnetnuke

我正在玩 DotNetNuke 7，试图掌握基础知识。已按照在线教程在我的本地计算机上成功安装了它，该教程指导在 IIS 中创建一个名为 www.dnndev.me 的网站。这工作正常，但很难创建第二个 protal。

尝试了所有我可以在网上找到或想到的不同方式，但仍然无法在我的浏览器中查看新门户。有人可以提供他们如何创建和查看其他门户的清晰分步说明。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:31:09.027

在 DNN 中，您可以创建两种不同类型的 Portal，Parent 和 Child。

父门户是在 IIS 中具有自己的绑定（域）（例如：dnndev.me）或在 IIS 中具有虚拟目录/应用程序（例如：dnndev.me/Portal2）的门户

DotNetNuke 中的子门户不需要更改 IIS，DNN 基本上会创建一个文件夹（例如：dnndev.me/Child）并根据门户别名重定向用户。

要在 IIS 中创建新的父门户，如果在本地使用 IIS6 或更高版本，则需要为门户添加 BINDING。使用指向 127.0.0.1 的 DNNDEV.ME 域，您可以创建一个使用诸如 parent.dnndev.me 之类的子域的新门户。为此，在 IIS 中添加 parent.dnndev.me 的绑定，然后在从主机/站点管理页面创建门户时，使用 parent.dnndev.me 作为门户的别名/url。

整个过程的关键是在 IIS 中添加绑定。

如果要创建应用程序/虚拟目录，请在 IIS 中添加应用程序并将应用程序指向 DNN 文件的根目录 (c:\websites\dnndev.me)

# apache - Twig 生成的 URL 太长导致浏览器崩溃

> ID：14582638
> 
> 赞同：0
> 
> 时间：2013-01-29T12:14:57.720
> 
> 标签：apache, twig, vhosts, silex

我有一个非常奇怪的问题。

我正在通过 VM 在本地开发基于 Silex 和 Twig 的产品组合。起初我是这样访问它的：192.168.56.2/pfsilex，一切正常。

我已经在我的主机文件中创建了一个虚拟主机和相应的条目，我仍然可以访问我的网站并在页面之间导航，但是在页面上几秒钟后浏览器就会崩溃（尝试使用 Chrome、FF 和 IE）。

起初我以为这是某种脚本，所以我禁用了 JavaScript。没有改变。从 Apache 检查 error.log 后，我有奇怪的条目：“请求 URI 太长”。考虑到我的 URI 真的很短，这确实很奇怪。接下来要做的是检查 access.log，是的，URI 太长了：

```
192.168.56.1 - - [28/Jan/2013:22:37:40 +0100] "GET /[type:protected]%20=%3E%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[lineno:protected]%20=%3E%201%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[1]%20=%3E%20Twig_Token%20Object%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[value:protected]%20=%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[type:protected]%20=%3E%202%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[lineno:protected]%20=%3E%207%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20[2]%20=%3E%20Twig_Token%20Object%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(%20%20%20%20%20%20%20%20%20%20%20%20%20%20%" 414 540 "-" "-" 
```

在这个 URI 中，我们可以注意到两次名为“Twig_Token”的参数，这让我觉得这是一个 Twig 问题，但由于它完全可以在没有虚拟主机的情况下工作，我有点迷路了。我没有将任何 get 参数传递给我的视图（至少看起来是这样，但我是 Silex 的新手），只有返回模板时的参数。

我不认为它直接来自树枝。

这是我的虚拟主机：

```
<VirtualHost *:80>
        ServerName portfolio.dev
        DocumentRoot /var/www/pfsilex/
        <Directory /var/www/pfsilex/>
                Options -Indexes
                AllowOverride All
                Order Deny,Allow
                Allow from All
        </Directory>
</VirtualHost> 
```

我的 .htaccess ：

```
<ifModule mod_rewrite.c>
    Options -MultiViews

    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

我的主人：

```
192.168.56.2    portfolio.dev 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:47:54.480

它与 Twig 无关。

事实上，我有一条通用路线拦截“/”上提供的所有内容，以便从数据库加载页面。

但这意味着它也在拦截每个静态文件，当这个文件不存在时，该方法会抛出一个很大的堆栈跟踪。

发生的事情是我没有任何 favicon.ico，但每个浏览器都会尝试加载它。Chrome 网络控制台没有显示此资源加载，我可以使用显示它的 Firefox 对其进行调试。

# python - Python - 从列表元素初始化列表变量

> ID：14582640
> 
> 赞同：0
> 
> 时间：2013-01-29T12:15:04.750
> 
> 标签：python, list

前任。让我们考虑一下，我有一个清单，

`list_var = ['sales_qty' , 'returns_qty' , 'net_sales_qty' , 'sales_amt' , 'returns_amt' ,'product_discount_amt' , 'product_net_amt' ,'product_cost_amt' , 'gross_sales_amt' , 'supplier_disc_amt' , 'category_disc_amt' , 'topup_disc_amt' , 'value_at_cost']`

从这个列表元素中，我想像`list`在内存中一样初始化这些元素，所以我可以`append, extend`对这些元素使用方法。

如下，

```
#Need these variable in memory..
sales_qty = [], returns_qty  = [], net_sales_qty = [] ... value_at_cost = []

#list operation on variable..
sales_qty.append(5) 
```

有什么简单的方法可以做到这一点，所以我可以轻松地删除元素或在列表中添加元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:25:24.320

您可以基于`list_var`.

```
list_var = ['sales_qty' , 'returns_qty' , 'net_sales_qty' , 'sales_amt' , 'returns_amt' ,'product_discount_amt' , 'product_net_amt' ,'product_cost_amt' , 'gross_sales_amt' , 'supplier_disc_amt' , 'category_disc_amt' , 'topup_disc_amt' , 'value_at_cost']

list_dic = {k: [] for k in list_var} 
```

现在可以通过`list_dic`dict 访问您的列表：

```
list_dic['sales_qty'].append(123)
list_dic['category_disc_amt'].append('abc') 
```

* * *

如果您使用的 python 版本不支持字典推导（python 2.6 或更低版本），则可以使用列表推导（正如 DSM 在他的评论中解释的那样）：

```
list_dic = dict((k, []) for k in list_var) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:30:53.520

[`vars`](http://docs.python.org/2/library/functions.html#vars)如果您从全局范围调用，请使用。否则，使用[`globals`](http://docs.python.org/2/library/functions.html#globals).

```
list_var = ['sales_qty' , 'returns_qty' , 'net_sales_qty' , 'sales_amt' , 'returns_amt' ,'product_discount_amt' , 'product_net_amt' ,'product_cost_amt' , 'gross_sales_amt' , 'supplier_disc_amt' , 'category_disc_amt' , 'topup_disc_amt' , 'value_at_cost']

for item in list_var:
    vars()[item] = []

sales_qty.append(1)
sales_qty.append(3)
returns_qty.append(2)

print "Outside..."
print sales_qty
print returns_qty

def foo():
    global sales_qty

    sales_qty.append(4)

    print "Inside foo..."
    print sales_qty
    print returns_qty

    # This works if you want the whole thing inside a function
    print "Variable from inside foo..."
    globals()["new_var"] = []
    new_var.append(5)
    print new_var

foo()

print "Outside again..."
print sales_qty
print returns_qty 
```

输出：

```
>>> 
Outside...
[1, 3]
[2]
Inside foo...
[1, 3, 4]
[2]
Variable from inside foo...
[5]
Outside again...
[1, 3, 4]
[2]
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:25:11.043

你的意思是这样的：

```
list_var = [ 'abc', 'cde', 'fgh' ]

dict_var = dict()
for x in list_var:
    dict_var[x] = []

dict_var['abc'].append(5) 
```

# gwt - gwt CellTree 中的自定义单元格

> ID：14582642
> 
> 赞同：0
> 
> 时间：2013-01-29T12:15:12.287
> 
> 标签：gwt

我有一个使用简单文本单元格的 CellTree。现在，对于每个树节点，我想要一种不同类型的单元格，具体取决于它是否是叶子。

该单元格将是：

(1) 如果节点是叶子（没有子节点）：TextCell

(2) 如果节点是根节点（它有 >= 子节点）：。- 它必须显示与叶子相同的字符串 - + 1 个可点击的图像（这是一个用于重命名节点名称的图标）。- + 1 个可点击的图像（这是一个用于删除节点的图标）。

我试过：

(1) 自定义单元格，扩展 AbstractCell。这里的重点是我无法让可点击的图像响应鼠标点击。因此无法执行任何操作（编辑名称或删除节点）。

(2) 复合单元。这里的重点是虽然我得到了可点击的图像以响应鼠标点击，但我无法获得正确选择必须显示哪种单元格的实现（基于它是否有子单元，显示 TetxCell 或带有图标的自定义单元格）。

有人可以解释我如何做到这一点吗？到目前为止，我的代码是：

公共节点信息 getNodeInfo(T 值) {

```
if (value == null) {
  return new DefaultNodeInfo<CellTreeNode>(treeData.getDataProvider(), new IconCell(!isLeaf(value)),
      selectionModel, null);
}
else if (value instanceof CellTreeNode) {
  CellTreeNode node = (CellTreeNode) value;

  //data provider for this cell
  ListDataProvider<CellTreeNode> nodeDataProvider = new ListDataProvider<CellTreeNode>(node.getChildren());

  IconCell nodeCell = new IconCell(this, node, !isLeaf(node));

  // add a reference to the visual representation of the element
  node.setCell(nodeCell);

  return new DefaultNodeInfo<CellTreeNode>(nodeDataProvider, nodeCell,
      selectionModel, null);
}
// Unhandled type.
String type = value.getClass().getName();
throw new IllegalArgumentException(
    "[CellLargeTreeListBox] Unsupported object type: " + type); 
```

}

// 检查指定的值是否代表叶节点。叶节点不能 // 打开。公共布尔isLeaf（对象值）{

```
if (value == null) return false;
CellTreeNode node = (CellTreeNode) value;
return value instanceof CellTreeNode && !node.isRoot(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:30:08.700

单元格不依赖于它将显示的值，而是依赖于*父*节点的值。

因此，您需要一个支持渲染/行为的通用单元格，并根据要求显示的值在它们之间切换：对于您可以判断为叶子的值，然后仅渲染文本，否则也渲染图像/按钮（请注意，您也可以渲染相同的 HTML 以使使用 a 成为可能/更容易`CompositeCell`- 但使用 CSS 切换图像/按钮的可见性（`class=xxx`在容器元素上渲染）。

# java - doclet 中的 Main.execute 引发错误，提示找不到文件

> ID：14582644
> 
> 赞同：0
> 
> 时间：2013-01-29T12:15:21.867
> 
> 标签：java, javadoc, doclet

我有一个打印类数据的 doclet。我从命令行运行文件，它工作正常。但是，我也想在 java 程序中运行它。因此，我在 doclet 中使用了以下主要方法：

```
public class SimpleDoclet extends Doclet {

public static void main(String[] args) {
    System.out.println("====Starting the doclet=====");
    String[] args1 = { "javadoc -private -doclet "
            + SimpleDoclet.class.getName()
            + " -classpath /usr/java/jdk1.6.0_30/lib/tools.jar newPack/NewClass.java" };
    com.sun.tools.javadoc.Main.execute(args1);
} 
```

NewClass.java 是我希望 SimpleDoclet 生成 javadoc 的 java 文件。我可以这样做吗？

如果是这样，那么当我运行这个 doclet 时，我会收到以下错误消息：

```
====Starting the doclet=====
javadoc: error - File not found: "javadoc -private -doclet oldPack.SimpleDoclet -classpath /usr/java/jdk1.6.0_30/lib/tools.jar newPack/NewClass.java"
1 error 
```

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:06:56.843

您正在指定一个参数，您应该在其中指定多个参数。

```
{"javadoc", "-private", ...} 
```

# olap-cube - 蒙德里安在 oracle 上进行分组选择

> ID：14582647
> 
> 赞同：0
> 
> 时间：2013-01-29T12:15:27.240
> 
> 标签：olap-cube, mondrian

当我做这个维度时：

```
<Dimension ForeignKey="ID_PROCESSO" highCardinality="false" name="Adverso Principal">
       <Hierarchy Name="Adverso Principal" hasAll="true" allMemberName="Todos the Adverse Principais">
         <level Name="Adverso Principal" table="m_entidade" column="NOME" type="string" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
         <KeyExpression>
         <SQL dialect="generic">
         (
select NAME from D_PROCESSO_PARTE
         left join M_ENTIDADE on D_PROCESSO_PARTE.ID_ENTIDADE = M_ENTIDADE.ID_ENTIDADE
         where D_PROCESSO_PARTE.CLIENTE = 'F'
         and M_PROCESSO.ID_PROCESSO = D_PROCESSO_PARTE.ID_PROCESSO
)
         </ SQL>
         </ KeyExpression>
         </ Level>
       </ Hierarchy>
     </ Dimension> 
```

他正在将子选择分组，而不允许使用的神谕。有人已经有类似的问题了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:48:52.387

这可能是一个错误。Mondrian 在内部使用方言来确定给定数据库允许的内容。它应该知道 Oracle 不支持这一点。除非您更改代码并自己重新编译，否则您将无法解决此问题。

[您应该在项目的错误跟踪系统](http://jira.pentaho.com/browse/MONDRIAN)上报告这一点。

# java - Google-Eclipse 插件会自动生成战争目录内容吗？

> ID：14582648
> 
> 赞同：1
> 
> 时间：2013-01-29T12:15:27.970
> 
> 标签：java, eclipse, google-app-engine, war, google-eclipse-plugin

我刚刚使用 Google-Eclipse 插件创建了我的第一个**Web 应用程序项目。**在其他工件中，它自动生成了一个`war/`包含多个子目录和许多文件的目录，包括：

```
war/
    WEB-INF/
        lib/
            <Lots of JARs here>
        web.xml
        appengine-web.xml
        etc. 
```

现在有好几次我已经清除了这个`war/`目录的某些部分（搞乱了构建脚本和其他 Google-Eclipse 插件功能 - 这只是一个用于习惯插件的测试/临时项目），它们在某个时候神奇地重新出现未来。

我想知道，因为我将它设置为一个 Web 应用程序项目（因此它由 Google-Eclipse 插件管理），该插件是否试图保留 的结构`war/`，并因此继续自动生成有没有丢失的文件？

如果是这样，为什么？究竟（哪些文件/目录）它试图保留什么？我可以禁用它吗？

如果没有，那么我显然还有其他事情要做。在这种情况下，是否有其他人曾经使用 Google-Eclipse 插件或一般的 Eclipse 体验过这种情况？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:24:30.460

这应该不是问题。

War 文件夹是您稍后需要部署到 Google App Engine 的分解包。

当您构建或部署文件到 GAE 时，该文件夹将被重新创建/更新，它包含新编译的 jar 和必要的库。

读[这个。](http://en.wikipedia.org/wiki/WAR_file_format_%28Sun%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:18:22.913

此插件仅通过添加依赖项来更新 war/lib 目录。实际上，当您切换到另一个版本的 Google App Engine SDK 时，它只是复制 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T03:38:21.247

War 文件夹包含生成的 javascript 文件，这些文件部署到应用程序引擎。

# sql - 更新表中的第 n 条记录 - sql server

> ID：14582650
> 
> 赞同：2
> 
> 时间：2013-01-29T12:15:32.950
> 
> 标签：sql, sql-server, sql-update

我想`update` `nth`在表格中记录

```
UPDATE ROW_NUMBER(3) table_name SET column1=value1, column2=value2 
```

这行不通。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:32:33.277

如果您使用的是 SQL Server 2005 及更高版本，请使用 CTE。

您可以尝试以下方法（我的语法在设计上太久了）：

```
WITH CTE AS
(
    SELECT ROW_NUMBER() OVER (ORDER BY columnToUseForOrder) AS RowNumber,
           column1,
           column2
    FROM  table_Name
 )

 UPDATE CTE Set column1= value1, column2=value2 WHERE RowNumber = 3 
```

使用 CTE，您应该能够更新第 n 个行数。玩这个，你应该能够想出各种解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:41:28.910

`row_number`将按`orderingColumn`. 所以，根据需要更换它。`@value1, @value2`并且`@Nth_Number`是*变量*。

```
update A set column1= @value1, column2= @value2
from ( select column1, column2, 
              row_number() over (order by orderingColumn) rn from yourTable) A
where rn  = @Nth_Number 
```

如果你`value1, value2`是*列*然后尝试

```
update A set column1= value1, column2= value2
from ( select column1, column2, value1, value2
              row_number() over (order by orderingColumn) rn from yourTable) A
where rn  = @Nth_Number 
```

# dns - 为什么在孩子处发现没有名称服务器的错误？

> ID：14582651
> 
> 赞同：3
> 
> 时间：2013-01-29T12:15:34.367
> 
> 标签：dns, namespaces, nameservers, reverse-dns

我有一个具有 2 个 DNS 服务器 dns3-master 和 dns4-slave 的设置，在该设置中，我能够在成熟站点上添加反向委托，然后我们又添加了一个 dns 服务器，并将其设置为 dns5-slave 到 dns3 -掌握。

那么为什么我会出现以下错误？

> 引用：RIPE 数据库 Webupdates 错误：RDNS 授权失败 显示完整的响应消息 - 来自主机：xxx - 日期/时间：2013 年 1 月 29 日星期二 08:50:54

```
SUMMARY OF UPDATE:
Number of objects found: 1
Number of objects processed successfully: 0
Create: 0
Modify: 0
Delete: 0
No Operation: 0
Number of objects processed with errors: 1
Create: 1
Modify: 0
Delete: 0
Syntax Errors: 0 
```

详细说明：

发现以下对象有错误：

```
Create FAILED: [domain] x.x.x.in-addr.arpa
Info: Authorisation passed
Info: Syntax check passed

domain: x.x.x.in-addr.arpa
descr: NTT Reverse Delegation for x.x.x.0/24
nserver: dns3.ex.com
nserver: dns4.ex.com
admin-c: NRa19-RIPE
tech-c: NRa19-RIPE
zone-c: NRa19-RIPE
mnt-by: MNT-NEU
changed: xx@xx.com 20130129
source: RIPE

Info: Authorisation for parent [inetnum] x.x.x.x - x.x.x.x
using mnt-lower:
authenticated by: MNT-NEU 
```

RDNS：（与 xxxin-addr.arpa 有关）错误：

在 child 中找不到名称服务器。在孩子身上找不到名称服务器。这通常意味着子节点未配置为回答有关区域的查询。

RDNS：（与 xxxin-addr.arpa 相关）关键：

```
Fatal error in delegation for zone x.x.x.in-addr.arpa. 
```

在子级或父级未找到名称服务器。无法进行进一步的测试。

```
Error: RDNS Authorization failed 
```

RIPE 数据库受[条款和条件](http://www.ripe.net/db/support/db-terms-conditions.pdf)的约束：

> 如需帮助或澄清，请联系：RIPE 数据库管理 由 RIPE WHOIS 更新版本 1.51.1 生成 WHOIS4 处理同步更新 (RIPE, LGC, 2013-01-29 08:50:54)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:26:59.033

我已经通过将反向子网添加到 DNS 服务器中解决了我的上述问题，以便它可以响应来自 RIPE 的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:00:59.637

当我发现这个解决方案对我来说也是解决方案时，我想添加一个详细的解释：

在每个 xxxin-addr.arpa 区域下，您必须创建指向您的名称服务器的 NS 记录。

当 RIPE 在允许您创建 PTR 记录之前进行检查时，它希望找到指向您的名称服务器的 NS 记录。

如果未配置 NS 记录，您将收到 ***ERROR: No name servers found at child。

我希望它可以帮助其他人。

# java - 在休眠中做唯一ID的最聪明的方法

> ID：14582657
> 
> 赞同：0
> 
> 时间：2013-01-29T12:15:58.377
> 
> 标签：java, hibernate, identity

我使用此代码为我的实体生成唯一密钥

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id; 
```

我曾经使用其他方法，但在我的应用程序中，能够插入来自其他程序的数据库条目也非常重要。

IDENTITY 方法是我能弄清楚如何制作它的唯一方法，所以我不必担心增量器逻辑或其他问题。

还有其他策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:22:43.723

您可以在数据库上创建序列，然后可以使用以下构造：

```
@Id
@SequenceGenerator(name = "local_genName", 
    sequenceName = "db_GenName")
@GeneratedValue(strategy = GenerationType.AUTO, 
generator="local_genName")
@Column(name="id")
private Long id; 
```

# javascript - 在 IE 上：选择列表在悬停时关闭 jQuery Show/Hide Div on Hover 中的 Option 悬停

> ID：14582660
> 
> 赞同：0
> 
> 时间：2013-01-29T12:16:03.660
> 
> 标签：javascript, html, css, cross-browser

我已经通过 jQuery 设置了一个 div 来显示和隐藏项目的悬停。在 div 中我有下拉菜单，但是当我单击选择列表并将鼠标悬停在选项列表上时，选择菜单会在任何版本的 Internet Explorer 中立即关闭 - 在其他浏览器上它工作正常。

jQuery：

```
 <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){

        $(".tiptext").mouseenter(function() {
            $(this).children(".description").show();
        }).mouseleave(function() {
            $(this).children(".description").hide();
        });

    });//]]>  
    </script> 
```

HTML：

```
 <div class="description" style="display: none;">

                <div id="tab1">
                    <h2>Calendar Use</h2>
                    <p>Available dates are marked in white, those unavailable are black. The holiday villa is available from 4:00pm on the day of arrival and needs to be vacated by 10:00am on the day of departure. If you have earlier flight arrival times kindly contact us directly.</p>
                </div>

                <div id="tab2">
                    <h2>Check Availability</h2>
                    <br><p>Arrival Date</p>
                    <div id="calendar-titles"><span class="day-t">day</span><span class="month-t">month</span><span class="year-t">year</span></div>

<form method="post" action="">

                        <div id="calendar-container"><select id="year2Sel" name="year2Sel" onchange="showRSS(document.getElementById('field2').value"></select><select id="monthSel" name="monthSel" onclick="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, this.value, document.getElementById('daySel').value )"><option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option></select><select id="daySel" name="daySel" onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, this.value )"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select></div>
<select id="yearSel" name="yearSel" onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)">
                            <option value="2013">2013</option>
                            <option value="2014">2014</option>
                        </select>

<div id="avail-left">
<p>No of Nights</p>
<span>min stay: 7 nights</span>

                        <input type="text" id="field2" name="nights" onkeyup="showRSS(this.value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)" value="" alt="Test" onkeypress="return isNumberKey(event)" onchange="isValid();">

</div>
<div id="avail-right">
<p>Est. Rate</p>
<div id="rssOutput"></div></div>

<input type="submit" value="Enquire" name="submit" class="enquirebtn">
                    </form>

                    <br>

                </div>

                <div id="tab3">
                    <iframe width="243px" height="221px" src="/calendar/index.php" frameborder="0" border="0" style="border:0px;"></iframe>
                </div>

            </div> 
```

有人对如何解决这个问题有任何建议吗？

# java - 如何在 jsp 文件中获取当前的 Spring 配置文件。

> ID：14582661
> 
> 赞同：2
> 
> 时间：2013-01-29T12:16:03.807
> 
> 标签：java, spring, jsp, profile

我正在开发 Spring MVC 应用程序。在我的应用程序中，我有两个配置文件，测试和生产。当我部署我的应用程序以在生产环境中测试环境、生产时启用测试。

我需要在 jsp 文件中获取当前配置文件。是否可以 ？我不想发送其他变量来获取此信息，因为文件包含在许多其他文件中。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T15:52:03.757

由于您使用的是 MVC，因此更直接的方法是在控制器中自动装配环境并在模型中传递配置文件。

```
@Autowired
private Environment environment;

@RequestMapping("/needsProfile")
public String needsProfile(Model model) {
    model.addAttribute("profiles", environment.getActiveProfiles());
    return "needsProfile";
} 
```

在您的 needsProfile.jsp 中：

```
<jsp:useBean id="profiles" type="java.lang.String[]" scope="request"/>

<%-- ... --%>

<div>First Profile:  ${profiles[0]}</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:26:48.320

您可以使用以下内容：

```
ServletContext sc = request.getSession().getServletContext();
WebApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(sc);
String[] profiles = applicationContext.getEnvironment().getActiveProfiles(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-16T12:04:12.743

对于更优雅的方式，您可以创建自定义 JSP 标记。这是您可以用来实现此目的的教程：http: [//blog.florianlopes.io/access-spring-profiles-with-custom-jsp-tag/](http://blog.florianlopes.io/access-spring-profiles-with-custom-jsp-tag/)

使用此自定义标签，您将能够根据活动的 Spring 配置文件限制区域。

这个想法是扩展 Spring ***RequestContextAwareTag***。它将让您的自定义标签访问 Spring 配置文件。扩展这个类，实现很简单：

```
public class ProfileConditionTag extends RequestContextAwareTag {

    private String expectedProfile;

    @Override
    protected int doStartTagInternal() throws Exception {
        final Environment environment = this.getRequestContext().getWebApplicationContext().getEnvironment();
        if (environment != null) {
            final String[] activeProfiles = environment.getActiveProfiles();
            if (ArrayUtils.contains(activeProfiles, this.expectedProfile)) {
                return EVAL_BODY_INCLUDE;
            }
        }

        return SKIP_BODY;
    }

    // Getters, setters
} 
```

**SKIP_BODY**返回值告诉 JSP 处理器在活动配置文件不是预期的配置文件时跳过标签正文。

1.  创建 taglib 描述并导入标签：

    ```
    <%@ taglib prefix="tagprefix" uri="/WEB-INF/taglib/profile.tld" %> 
    ```

2.  用它：

    `<tagprefix:profile value="dev"> Only displayed if the active Spring profile is "dev". </tagprefix:profile>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-10T12:58:56.447

我知道这是一个旧线程，但也许有人仍在寻找它。

有一种简单的方法可以在 jsp 中访问环境而无需实现自定义类或标记库：

```
<spring:eval expression="@environment.getActiveProfiles()"></spring:eval> 
```

当然jsp必须声明：

```
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %> 
```

我使用的是 spring 4.2，但它是从 3.0.1 开始实施的

# java - PostgreSQL 服务器无法启动

> ID：14582664
> 
> 赞同：0
> 
> 时间：2013-01-29T12:16:13.607
> 
> 标签：java, postgresql, postgresql-8.4

我正在为我的应用程序使用 PostgreSQL 服务器。我正在尝试使用 SSL 证书实现安全连接。我在 postgresql.conf 中将 ssl 属性修改为“on”。我正在生成使用下面的 java 代码加密的自签名证书和密钥，它使用 pbe 来加密私钥。

```
 byte[] encodedprivkey = privKey.getEncoded();
    String MYPBEALG = "PBEWithSHA1AndDESede";
    String password = "test123";

    int count = 20;// hash iteration count
    Random random = new Random();
    byte[] salt = new byte[8];
    random.nextBytes(salt);

    PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, count);
    PBEKeySpec pbeKeySpec = new PBEKeySpec(password.toCharArray());

    SecretKeyFactory keyFac = SecretKeyFactory.getInstance(MYPBEALG);
    SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);

    Cipher pbeCipher = Cipher.getInstance(MYPBEALG);
    // Initialize PBE Cipher with key and parameters
    pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);

    // Encrypt the encoded Private Key with the PBE key
    byte[] ciphertext = pbeCipher.doFinal(encodedprivkey);

    // Now construct  PKCS #8 EncryptedPrivateKeyInfo object
    AlgorithmParameters algparms = AlgorithmParameters.getInstance(MYPBEALG);
    algparms.init(pbeParamSpec);
    EncryptedPrivateKeyInfo encinfo = new EncryptedPrivateKeyInfo(algparms, ciphertext);

    FileOutputStream out3 = new FileOutputStream("server.key");
    out3.write(Base64.encodeBase64(encryptedPkcs8, true));
    out3.flush();
    out3.close();

    FileOutputStream out3 = new FileOutputStream("server.crt");
    out3.write(Base64.encodeBase64(chain[0].getEncoded(), true));
    out3.flush();
    out3.close(); 
```

我将服务器证书和密钥加载到数据目录中，当我启动服务器时，它把我扔到了错误之下

```
 FATAL:  could not load private key file "server.key": unknown pbe algorithm 
```

请帮我解决这个问题。有没有人遇到过这个错误？任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:24:10.693

根据[文档](http://www.postgresql.org/docs/8.4/static/ssl-tcp.html)，可以对服务器密钥进行密码加密，但这意味着如果不手动输入密钥就无法启动 PostgreSQL。这意味着，除其他外，如果服务器进程失败，您将无法自动重新启动它，并且您无法在启动时自动启动 postgreSQL。如果这是您要求的一部分，请仔细考虑并考虑权衡以及您必须采取哪些措施来解决这些问题。

错误消息告诉您不支持用于密码保护服务器密钥的密码。选择不同的密码。

# c# - 仅包含字母数字、# 符号和 - 符号和空格的输入字符串

> ID：14582667
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:16:20.310
> 
> 标签：c#, regex, validation

尝试使用以下正则表达式代码，但我的输入文本框中无法接受 - 键。请协助！

我的代码如下：

```
if (Regex.IsMatch(textBox_address.Text, @"^[a-zA-Z0-9#- ]+$")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:17:29.627

`-`通过替换它来逃避`\-`：

```
^[a-zA-Z0-9#\- ]+$ 
```

正如您在这个表达式中看到的那样，`[.-.]`if 用于定义一组字符。为了解释正则表达式解析器，你的角色没有这个含义`\`，用来转义它。

如果您想要一个仅匹配数字和`[`. 要做到这一点：`^[0-9\[]+$`否则无法解析正则表达式。

# javascript - 使用与 javascript 关联的数组进行搜索？

> ID：14582668
> 
> 赞同：2
> 
> 时间：2013-01-29T12:16:20.473
> 
> 标签：javascript, jquery, arrays

我想使用数组 javascript 按姓名和姓氏进行搜索，结果在 div 中。例如：我在输入中写 Ali，它应该显示我 Alison 和阿里巴巴。
这是我的代码，但它给出了错误；还有其他方法吗？：

```
<input type='text' id='filter' placeholder='search'>
<div id='output' style='margin-top:50px '></div> 
```

我的阵列

```
var arrayD =[
    {"Name":"Alison","Surname":"Kenn","Mobile":529129293},
    {"Name":"Ashton","Surname":"Jhojan","Mobile":529129293},
    {"Name":"Bith","Surname":"Klint","Mobile":129129293},
    {"Name":"Ana","Surname":"Clow","Mobile":229129293},
    {"Name":"Geoge","Surname":"Rich","Mobile":329129293},
    {"Name":"kenneth","Surname":"Cooler","Mobile":329129}
]

var $result = $('#output');
$('#filter').on('keyup', function () {
    var $fragment = $('<div />');
    var val = this.value.toLowerCase();
    $.each(arrayD, function (i, item) {
        console.log( item[0].toLowerCase().indexOf(val));
        if ( item[0].toLowerCase().indexOf(val) == 0 ) {
            $fragment.append('<li>' + item[0] + ' ' + item[1] + '</li>');
        }
    });
    $result.html( $fragment.children() );
}); 
```

[http://jsfiddle.net/henrykend/ChpgZ/4/](http://jsfiddle.net/henrykend/ChpgZ/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:27:15.877

您的代码的主要问题是您试图通过序号位置而不是名称来引用对象中的字段。JavaScript 中没有什么`item.Name`可以`item["Name"]`从`item[0]`.

也没有必要建立一个“假元素”（在你的情况下`$fragment`），然后将它的子元素附加到输出区域 - 你也可以一次性完成（`.empty()`在调用之间记住它）。

您更正的代码：

```
var $result = $('#result');
$('#output').on('keyup', function () {
    $result.empty();
    var val = this.value.toLowerCase();
    $.each(arrayD, function (i, item) {
        if ( item.Name.toLowerCase().indexOf(val) == 0 ) {
            $result.append('<li>' + item.Name + ' ' + item.Surname + '</li>');
        }
    });
}); 
```

还有一个活生生的例子：http: [//jsfiddle.net/ChpgZ/6/](http://jsfiddle.net/ChpgZ/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:28:59.797

您的代码中有几个问题。

1.  我们错误放置的元素的名称（您已通过编辑修复）
2.  在 .each 中，您使用了 item[0] 而不是 item.Name（也是姓氏）

见以下代码

```
var arrayD =[
    {"Name":"Alison","Surname":"Kenn","Mobile":529129293},
    {"Name":"Ashton","Surname":"Jhojan","Mobile":529129293},
    {"Name":"Bith","Surname":"Klint","Mobile":129129293},
    {"Name":"Ana","Surname":"Clow","Mobile":229129293},
    {"Name":"Geoge","Surname":"Rich","Mobile":329129293},
    {"Name":"kenneth","Surname":"Cooler","Mobile":329129}
]
var $result = $('#result');
$('#output').on('keyup', function () {
    var $fragment = $('<div />');
    var val = this.value.toLowerCase();
    $.each(arrayD, function (i, item) {console.log( item.Name.toLowerCase().indexOf(val) );
        if ( item.Name.toLowerCase().indexOf(val) == 0 ) {
            $fragment.append('<li>' + item.Name + ' ' + item.Surname + '</li>');
        }
    });
    $result.html( $fragment.children() );
}); 
```

# objective-c - xcodebuild 命令是否有一些关于 C++ 编译选项的选项？

> ID：14582670
> 
> 赞同：1
> 
> 时间：2013-01-29T12:16:26.783
> 
> 标签：objective-c, xcode, objective-c++, xcodebuild

当我使用 Xcode 4.6 preview verion 或 xcodebuild 命令时，我在下面遇到了这样的错误。

```
invalid suffix on literal; C++11 requires a space between literal and identifier 
```

但是，当我使用 Xcode4 时，没有错误。

我对 C++ 和编译器了解不多，所以我无法从 Internet 上找到答案。

你能告诉我如何避免 xcodebuild 命令的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:58:21.393

如果您从命令行调用 xcodebuild，它***应该***与在 Xcode 的 IDE 中构建目标基本相同。

我能想到的唯一区别是从命令行运行将默认为发布配置，而在 IDE 内部可能会使用调试。（在这两种情况下都可以覆盖这些）。

是不是你有不同的 C++ 标志用于调试和发布，这使它不起作用？尝试在 IDE 中使用 Release 模式构建项目，看看会发生什么。

# java - PHP 的 StdClass 的 Java 模拟

> ID：14582674
> 
> 赞同：1
> 
> 时间：2013-01-29T12:16:35.973
> 
> 标签：java, php, jsf, jakarta-ee

我需要像属性包这样的东西来将键值对放入其中。我想创建此类对象的列表，在 bean 中初始化它们，然后使用该列表在 JSF 模板中呈现表。我知道该怎么做，但我想避免为这种情况创建一些特殊的类，比如`OrderLineItem`使用`List<OrderLineItem>`. 我不想定义新类。

在 PHP 中，我可以使用 StdClass。
StdClass 是 PHP 中一个文档稀疏的类，它没有预定义的成员。

```
$object = new StdClass;
$object->foo = 'bar'; 
```

但是，据我所知，Primefaces`<p:dataTable>`列表项必须是带有 getter 的对象。如果我想引用`<h:outputText value="#{item.title}" />`，我的列表对象应该有`getTitle()`方法。

在我的情况下是否有任何解决方法，或者我真的需要定义特殊类以使生活更轻松？
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:18:25.510

当您想要一个简单的键/值表时，[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)可能就是您正在寻找的。

```
Map<String, String> myMap = new HashMap<>();

myMap.put("foo", "bar");

System.out.println(myMap.get("foo")); // outputs "bar" 
```

此示例将字符串匹配到字符串，但您可以使用 HashMaps 将任何类型映射到任何其他类型。您甚至可以创建一个`Map<Object, Object>`来创建一个弱类型映射，它将任何东西映射到任何东西。但是对于大多数用例，您宁愿使用更专业的形式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T12:22:59.890

你需要的是一个`Map`.

你可以很容易地在其中存储键值对：

```
Map<KeyClass, ValueClass> myMap = new HashMap<KeyClass, ValueClass>(); 
```

使用`put`方法将数据放入其中。如果您使用简单的`String`值，它将是这样的：

```
myMap.put("key", "value"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:19:36.133

我不知道我是否理解你。但我认为您的意思是 SelectItem 或 JsfMap。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:18:09.367

我建议使用匿名类：

```
return new HashMap<String, String>() {
  {
    this.put("key", "value");
  }
}; 
```

# javascript - window.open 在谷歌图表选择功能中，不触发

> ID：14582676
> 
> 赞同：0
> 
> 时间：2013-01-29T12:16:41.467
> 
> 标签：javascript, google-visualization

```
 google.visualization.events.addListener(chart, 'select', function (e) {
        var selection = chart.getSelection();
        var url = "task_log.aspx?id=" + selection[0].row;
        window.open(url);
    }); 
```

我正在尝试在谷歌图表事件侦听器中使用 window.open ，但它没有触发..有什么想法吗？

该 url 是正确的，当被警告时它确实包含正确的参数。

谢谢，

# c# - 带有 Web 参考的 OperationContextScope

> ID：14582677
> 
> 赞同：2
> 
> 时间：2013-01-29T12:16:43.343
> 
> 标签：c#, web-services

使用`service reference`我有这个：

```
using (OperationContextScope scope = new OperationContextScope(client.InnerChannel)) {
    OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpDetails;
    return predicate(client);
} 
```

我想知道如何使用**Web 参考**而不是**服务参考**来做同样的事情。使用网络参考该属性`InnerChannel`不存在。

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:31:10.460

如果“Web 引用”是指对基于 ASMX 的 Web 服务的引用，那么它就无法完成。“服务引用”在您的客户端应用程序中为服务创建一个基于 WCF 的代理。“Web 引用”使用旧的 .NET 1.1 天 XML Web 服务框架 (ASMX) 创建服务代理。`OperationContextScope`仅适用于 WCF 客户端。

解决方法是为相关服务创建“服务引用”而不是“Web 引用”。这样，两个服务的代理都将基于 WCF，您可以同时使用`OperationContextScope`这两个服务。WCF 向后兼容任何基于 ASMX 的服务。

# django - 获取/HTTP/1.1" 404 2032

> ID：14582679
> 
> 赞同：0
> 
> 时间：2013-01-29T12:16:50.360
> 
> 标签：django, mongodb-php

我正在尝试安装 Mongo 的方，我完成了所有必需的步骤，但是当我尝试转到 http 页面时，我收到了以下错误消息：

```
muratalina@muratalina-To-be-filled-by-O-E-M:~/Documents/Fang-of-Mongo/fangofmongo$ python ./manage.py runserver
    Validating models...
    0 errors found
    Django version 1.4.3, using settings 'fangofmongo.settings'
    Development server is running at "http://127.0.0.1:8000/"
    Quit the server with CONTROL-C.
    [29/Jan/2013 12:36:52] "GET / HTTP/1.1" 404 2032 
```

当我转到“ `http://127.0.0.1:8000/fangofmongo/`”页面时，出现此错误![在此处输入图像描述](../Images/f590c93cf81c02a13f046dcf87dc7319.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:46:04.743

[Fang-of-Mongo](https://github.com/Fiedzia/Fang-of-Mongo)的基本 URL是：

`(r'^fangofmongo/', include('fangofmongo.fom.urls')),`

这意味着您需要导航到`http://127.0.0.1:8000/fangofmongo`.

没有`http://127.0.0.1:8000/`定义基本 URL - 所以它会 404。

编辑：另外，Fang-of-Mongo 似乎已经过去了 3 年，至少在 Github 上没有更新 - 所以你很可能会遇到在 Django 1.4.3 上运行的项目的其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-09T02:42:24.440

确保在 urls.py 中导入了 include 函数，否则添加“from django.urls import include”

以下是如何包含另一个 URLconf（在 urls.py 文件中）

包括另一个 URLconf

```
1\. Import the include() function: from django.urls import include, path

2\. Add a URL to urlpatterns:  path('blog/', include('blog.urls')) 
```

# jsf - 将 Tomcat 6 迁移到 glassfish v2.1 时出现 HTTP 状态 503 错误

> ID：14582681
> 
> 赞同：0
> 
> 时间：2013-01-29T12:16:52.607
> 
> 标签：jsf, exception, jsf-2, primefaces, http-status-code-503

我在我的应用程序中使用 Prime 面孔。我有将 Tomcat 服务器（6）迁移到 Glass fish（v2.1）的规范，我已经在 net beans 中完成了。

但是我在运行项目时收到 HTTP 状态 503 错误。（使用tomcat 6时工作正常）

在控制台中获取此信息

```
Initializing Mojarra (1.2_13-b01-FCS) for context '/Prime'
WebModule[/Prime]PWC1275: Exception sending context initialized event to listener
instance of class com.sun.faces.config.ConfigureListener

Caused by: org.xml.sax.SAXParseException: cvc-enumeration-valid: Value '2.0' is not
facet-valid with respect to enumeration '[1.2]'. It must be a value from the enumeration. 
```

为什么我收到这个错误，请给我一个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:06:55.203

Glassfish v2 是一个完整的 Java EE 5 容器，捆绑了 JSF 1.2。您的 webapp 显然是一个基于 JSF 2.0 的应用程序，它在`/WEB-INF/lib`. 这当然会与 Glassfish 自己的具有此类错误的 JSF 1.2 库冲突。您的特定错误是`<faces-config version="2.0">`由 JSF 1.2 不支持的错误引起的。

虽然向后兼容 Java EE 5，但 JSF 2.0 是 Java EE 6 的一部分，因此默认情况下仅捆绑在 Glassfish v3 等中。它在 Tomcat 中工作显然是因为 Tomcat 作为准系统 JSP/Servlet 容器不附带 JSF，而仅附带 JSP/Servlet。所以在 Tomcat 中不会有与 JSF 的潜在版本冲突。

您需要告诉 Glassfish 它不应该使用自己捆绑的 JSF，而是使用 webapp 捆绑的 JSF。您可以通过将以下条目添加到`<sub-web-app>`文件`/WEB-INF/sun-web.xml`中来做到这一点：

```
<class-loader delegate="false"/>
<property name="useBundledJsf" value="true"/> 
```

如果您没有此文件，可以在此[Glassfish v2.1.1 部署指南](http://docs.oracle.com/cd/E19879-01/821-0184/beaql/index.html)底部找到示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC '-//Sun Microsystems, Inc.//DTD 
   Application Server 9.0 Servlet 2.5//EN' 
   'http://www.sun.com/software/appserver/dtds/sun-web-app_2_5-0.dtd'>
<sun-web-app>
   <!-- Your config here -->
</sun-web-app> 
```

# asp.net - 加密的 mp3 流式传输到 Flash SWF

> ID：14582684
> 
> 赞同：1
> 
> 时间：2013-01-29T12:17:11.240
> 
> 标签：asp.net, actionscript-3, flash, encryption

我有一个为客户端 Flash Player (SWF) 提供示例 MP3 文件的 asp.net 网站。

这些文件可以通过大量下载工具下载。

虽然只有注册会员才能访问高质量的 mp3 样本，但我的客户希望防止这些低质量的 MP3 文件被下载工具下载。

所以我想到了这个解决方案：

1.  将这些 MP3 文件转换为服务器端的字节数组 (ASP.NET)
2.  做一些按位异或运算（简单加密）
3.  将此数组写入 aspx 的响应流
4.  修改 Flash (.fla) 以请求此新文件/页面/aspx
5.  对 Flash 进行一些按位异或运算，并将其转换为原始 MP3 作为字节数组。（简单解密）
6.  播放 MP3

我能够成功到第 6 步。我无法将此字节数组转换为 Flash 可以播放的声音对象。我对闪存上的结果数组和 ASP.NET 上的源数组进行了一点点比较。他们是**平等**的。

我对完全不同的方法持开放态度。但我不能使用 Flash Media Server。我需要使用 Flash as3 和 ASP.NET。

**也很重要！**.mp3 必须下载/解密并异步播放（我无法成功）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:09:17.967

我同意 Peter Elliot 的观点，即身份验证可能是限制对文件的访问的最简单方法。但是，如果您仍然需要探索加密文件的途径，我想我会扩展一点 Alex Vlad 的回答。

为了能够流式传输音频文件、动态解密和异步播放，您需要做的是结合使用`URLStream`类( [docs ) 和类 (](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLStream.html) [docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html) ) 并保留部分下载的缓冲区内容。`Sound`

一些伪代码来说明：

```
class AsyncEncryptedSoundPlayer extends Sound {
    var buffer:ByteArray;
    var stream:URLStream;
    var currSoundPosition:uint = 0;

    public function AsyncEncryptedSoundPlayer(url:String) {
        buffer = new ByteArray();
        stream = new URLStream();
        stream.addEventListener(ProgressEvent.PROGRESS, onProgress);
        stream.load(new URLRequest(url));

        addEventListener(SampleDataEvent.SAMPLE_DATA, onSampleDataRequested);
    }

    function onProgress(e:ProgressEvent):void {
        var tmpData:ByteArray;
        stream.readBytes(tmpData, buffer.length, stream.bytesAvailable - buffer.length);
        var decryptedData:ByteArray = decryptData(tmpData); // Decrypt loaded data
        buffer.writeBytes(decryptedData, buffer.length, decryptedData.length); // Add decrypted data to buffer
    }

    function onSampleDataRequested(e:ProgressEvent):void {
        // Feed samples from the buffer to the Sound instance
        // You may have to pause the audio to increase the buffer it the download speed isn't high enough
        event.data.writeBytes(buffer, currSoundPosition, 2048);
        currSoundPosition += 2048;
    }

    function decryptedData(data:ByteArray):void {
        // Returns decrypted data
    }
} 
```

这显然是一个非常粗略的课程大纲，但我希望它能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:39:17.923

@walkietokyo，非常感谢您为我指明了正确的方向。我成功地做了我想做的事。这里的关键字是`loadCompressedDataFromByteArray`函数。

经过数十次试验和错误，我发现它`loadCompressedDataFromByteArray`以不同的方式工作。

它将转换的任何内容**附加****到声音对象**数据的末尾。

`loadCompressedDataFromByteArray`另一个问题：声音对象在调用其`play`函数后不会继续播放附加的部分。

所以我实现了一种双缓冲。我可以互换使用 2 个声音对象。

下面列出了我的最终（测试）版本。使用我使用的加密（混淆）方法（一个简单的 XOR），我测试的任何下载管理器、抓取器或嗅探器都无法播放 Mp3。

Flash（客户端）端：

```
import flash.events.DataEvent;
import flash.events.Event;
import flash.events.EventDispatcher;
import flash.events.OutputProgressEvent;
import flash.events.ProgressEvent;
import flash.net.URLRequest;
import flash.net.URLStream;
import flash.utils.ByteArray;
import flashx.textLayout.formats.Float;

var buffer:ByteArray;
var stream:URLStream;
var bufferReadPosition:uint = 0;
var bufferWritePosition:uint = 0;

var url:String = "http://www.blablabla.com/MusicServer.aspx?" + (new Date());

buffer = new ByteArray();
stream = new URLStream();
stream.addEventListener(ProgressEvent.PROGRESS, onProgress);
stream.load(new URLRequest(url));

var s1:Sound = new Sound();
var s2:Sound = new Sound();

var channel1:SoundChannel;
var channel2:SoundChannel;

var pausePosition:int = 0;

var aSoundIsPlaying:Boolean = false;

var lastLoadedS1:Boolean = false;

var lastS1Length:int = 0;
var lastS2Length:int = 0;

function onProgress(e:ProgressEvent):void {
    var tmpData:ByteArray = new ByteArray();

    stream.readBytes(tmpData, 0, stream.bytesAvailable);

    var decryptedData:ByteArray = decryptData(tmpData); // Decrypt loaded data

    buffer.position = bufferWritePosition;
    buffer.writeBytes(decryptedData, 0, decryptedData.length); // Add decrypted data to buffer
    bufferWritePosition += decryptedData.length;

    if(lastLoadedS1)
    {
        buffer.position = lastS2Length;
        s2.loadCompressedDataFromByteArray(buffer, buffer.length - lastS2Length);
        lastS2Length = buffer.length;
    }
    else
    {
        buffer.position = lastS1Length;
        s1.loadCompressedDataFromByteArray(buffer, buffer.length - lastS1Length);
        lastS1Length = buffer.length;
    }

    if(!aSoundIsPlaying)
    {
        DecidePlay();
    }
}

function channel1Completed(e:Event):void
{
    DecidePlay();
}

function channel2Completed(e:Event):void
{
    DecidePlay();
}

function DecidePlay():void
{
    aSoundIsPlaying = false;

    if(lastLoadedS1)
    {
        channel1.stop();

        if(s2.length - s1.length > 10000)
        {
            //At least a 10 second buffer
            channel2 = s2.play(s1.length);
            channel2.addEventListener(Event.SOUND_COMPLETE, channel2Completed);
            lastLoadedS1 = false;
            aSoundIsPlaying = true;
        }
    }
    else
    {
        if(channel2 != null)
        {
            channel2.stop();
        }

        if(s1.length - s2.length > 10000)
        {
            //At least a 10 second buffer
            channel1 = s1.play(s2.length);
            channel1.addEventListener(Event.SOUND_COMPLETE, channel1Completed);
            lastLoadedS1 = true;
            aSoundIsPlaying = true;
        }
    }
}

function decryptData(data:ByteArray):ByteArray {
    for(var i:int = 0;i<data.length;i++)
    {
        //Here put in your bitwise decryption code
    }
    return data;
} 
```

ASP.NET 服务器端 (MusicServer.aspx)：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        CopyStream(Mp3ToStream(Server.MapPath("blabla.mp3")), Response.OutputStream);

        this.Response.AddHeader("Content-Disposition", "blabla.mp3");
        this.Response.ContentType = "audio/mpeg";
        this.Response.End();
    }

    public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[32768];
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            for (int i = 0; i < read; i++)
            {
                //Here put in your bitwise encryption code
            }

            output.Write(buffer, 0, read);
        }
    }

    public Stream Mp3ToStream(string filePath)
    {
        using (FileStream fileStream = File.OpenRead(filePath))
        {
            MemoryStream memStream = new MemoryStream();
            memStream.SetLength(fileStream.Length);
            fileStream.Read(memStream.GetBuffer(), 0, (int)fileStream.Length);
            return memStream;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:40:04.250

可能比加密从您的服务返回的数据更简单的方法是验证请求，以便只有您的 swf 可以请求文件。

您可以使用与 Amazon API 工作相同的方式来完成此操作：构建一个包含许多参数的请求，包括时间戳。将所有这些参数散列在一个 HMAC 中（HMAC-SHA256 在[as3crypto 库](http://code.google.com/p/as3crypto/)中可用）以及嵌入在您的 swf 中的私钥。您的服务器端对此请求进行身份验证，确保哈希有效并且与时间戳足够接近。任何带有错误散列的请求，或使用时间戳过早的请求（重放攻击）都会被拒绝。

这当然不是完美的安全性。任何有足够动力的用户都可以反汇编您的 swf 并取出您的身份验证密钥，或者从他们的浏览器缓存中获取 mp3。但是话又说回来，你要使用的任何机制都会有这些问题。这消除了必须加密和解密所有文件的开销，而是将工作转移到请求生成阶段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:38:21.927

Flash`Sound`仅支持流式 mp3 播放，即您只能通过直接链接播放 mp3。但是您可以发送带有嵌入 mp3 的 swf 文件，并且该 swf 可以像加密 mp3 一样被加密。

用于嵌入和使用 mp3 的 as3 代码：

```
public class Sounds
{
    [Embed(source="/../assets/sounds/sound1.mp3")]
    private static const sound1:Class;
} 
```

加载此 swf 后，`Loader`您可以通过以下方式访问声音：

```
var domain:ApplicationDomain = ApplicationDomain.currentDomain; // <-- ApplicationDomain where you load sounds.swf
var soundClass:Class = domain.getDefinition("Sounds_sound1");
var sound:Sound = new soundClass();
sound.play(); 
```

请确保您至少执行以下操作之一：

*   给声音类起不同的名字 ( `sound1`)
*   为持有者类提供不同的名称 ( `Sounds`)
*   或将 sound.swf 加载到不同的应用程序域中

以防止类名重叠。

不幸的是，这种方法不允许您流式播放声音，您必须加载整个 swf，解密它，然后才能播放声音。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:36:55.690

请看这里：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html)

和这里：

[http://help.adobe.com/en_US/as3/dev/WSE523B839-C626-4983-B9C0-07CF1A087ED7.html](http://help.adobe.com/en_US/as3/dev/WSE523B839-C626-4983-B9C0-07CF1A087ED7.html)

# ruby-on-rails-3 - 使用 Association 时在 Rails 中映射搜索结果

> ID：14582690
> 
> 赞同：1
> 
> 时间：2013-01-29T12:17:25.560
> 
> 标签：ruby-on-rails-3, search, mapping, sunspot-rails

我有两个模型：

```
Product { has_may variants}

Variant {belongs to product} 
```

我使用了 Sunspot 搜索，结果我检索到了选定的变体，现在我想要这个结果，因为我的搜索结果包含搜索检索到的每个产品，该产品是一个或多个变体。

搜索代码示例如下：

```
@search = Sunspot.search(Spree::Variant) do
  keywords params[:keywords]      
  with :is_active, true  
  with  :deleted_at,nil
  if params[:ah].present? && params[:al].present?
    (Date.parse(params[:al])..Date.parse(params[:ah])).each do |d|
    with :f2r_available_on, d.to_time
    end
  end
end
@products = @search.results 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:00:38.387

首先让我澄清一下：在您上面的代码中，`@search.results`是否从您的搜索返回了一组变体记录，并且您想要获取与这些变体中的一个或多个相关联的所有产品？

如果是这样，那么应该这样做：

```
@products = Product.where(:id => @search.results.map(&:product_id)) 
```

# twitter-bootstrap - twitter bootstrap 支持的转换类名是什么？

> ID：14582696
> 
> 赞同：9
> 
> 时间：2013-01-29T12:17:50.050
> 
> 标签：twitter-bootstrap, css-transitions, transitions

twitter bootstrap 支持的转换类名是什么？我只知道一个转换的类名，如网站上的示例中使用的那样：'fade' 用于淡入。twitter bootstrap 支持的其他转换类名是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T14:04:30.723

这些是不同转换的类：

*   `.fade`（消退）
*   `.fade.in`（淡入）
*   `.collapse`（崩溃）
*   `.collapse.in`（折叠）

如果您使用模态，那么淡入淡出类将动画添加到模态

*   `.fade`（淡出到顶部 0）
*   `.fade.in`（从顶部淡入到 50% 高度）

# android - 使用 Intent 从 SQLite 数据库传递数据

> ID：14582697
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:17:53.853
> 
> 标签：android, database, sqlite, listview, android-intent

在我的应用程序中，我有一个 SQLite 数据库，我想知道如何将一些数据（例如 id、title 等）传输到另一个活动。

到目前为止，这是我的代码：

```
ListView lv = getListView();

lv.setOnItemClickListener(new AdapterView.OnItemClickListener() 
{
    public void onItemClick(AdapterView<?> av, View v, int pos, long id) 
    {
        onListItemClick(v,pos,id);
    }
    protected void onListItemClick(View v, int pos, long id) 
    {
        Intent i = new Intent(context, Table.class);
        i.putExtra("Value1", c.getString(c.getColumnIndex("title")));
        startActivity(i); 

    }
}); 
```

但我收到错误。

```
01-29 12:25:46.511: E/AndroidRuntime(26478): FATAL EXCEPTION: main
01-29 12:25:46.511: E/AndroidRuntime(26478): android.database.CursorIndexOutOfBoundsException: Index 50 requested, with a size of 50
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at com.example.studentdatabase.MainActivity$2.onListItemClick(MainActivity.java:90)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at com.example.studentdatabase.MainActivity$2.onItemClick(MainActivity.java:87)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.widget.ListView.performItemClick(ListView.java:3513)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.os.Handler.handleCallback(Handler.java:587)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.os.Looper.loop(Looper.java:123)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at android.app.ActivityThread.main(ActivityThread.java:3683)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at java.lang.reflect.Method.invoke(Method.java:507)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-29 12:25:46.511: E/AndroidRuntime(26478):    at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:56:35.663

您输入的代码不是这里的问题。这是你的光标指向的地方。在您的游标声明之后，您应该调用 moveToFirst()。

```
cursor.moveToFirst() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:09:46.010

你必须指向光标上的位置

```
cursor.moveToFirst() 
```

还尝试验证游标中的数据以避免进一步的异常。看到[这个](https://stackoverflow.com/a/14566988/1450401)

# django - Django保存问题覆盖最后一个条目

> ID：14582700
> 
> 赞同：0
> 
> 时间：2013-01-29T12:18:09.780
> 
> 标签：django

**任何人都可以看到下面的代码有任何问题吗？**这是我的模型保存功能，它在第一次保存时为他们提供了 GUID。我的问题是当我保存一个新的收件人（在管理员中）时，它会覆盖最后一个添加的收件人。更新似乎完美无缺。

**Models.py 的一部分**

```
class GUID():
    make = hashlib.sha1(str(random.random())).hexdigest()

def save(self, *args, **kwargs):
    if not self.recipientid:
        self.recipientid = GUID.make
    super(Recipient, self).save(*args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:38:43.443

GUID.make 将在创建 GUID 类时设置，每次运行时都不会重新计算。我不知道您如何使用 GUID 的其余上下文，但我希望它是一个函数：

```
class GUID(object):
    @staticmethod
    def make():
         return hashlib.sha1(str(random.random())).hexdigest()

...

def save(self, *args, **kwargs):
    if not self.recipientid:
        self.recipientid = GUID.make()
    super(Recipient, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:21:20.713

一般来说，做你想做的事情的方法是使用默认的lambda（在这个例子中使用标准的python uuid）：

```
from django.db import models
from uuid import uuid4

class YourModel(models.Model):
    # ...
    recipientid = models.CharField(max_length=32, default=lambda: uuid4().hex) 
```

# c# - mailSettings 属性都在返回

> ID：14582708
> 
> 赞同：0
> 
> 时间：2013-01-29T12:18:46.927
> 
> 标签：c#, .net, unit-testing, configurationmanager

## 问题

抓取 时`_mailSettings.Smtp.Network.Host`，即使它在应用程序配置文件中，它也会返回`null`.

* * *

## 代码

首先，因为项目只是一个`Class Library`，我有以下构建后事件来构建正确命名的配置文件：

```
copy "$(ProjectDir)App.config" "$(TargetDir)ApplicationSupport.Email.dll.config" 
```

接下来我有一个旨在加载配置并使其可用的类：

```
public class Startup
{
    SmtpSection _smtpSection = ConfigurationManager.GetSection("system.net/mailSettings/smtp") as SmtpSection;

    public string SmtpServer
    {
        get
        {
            if (_smtpSection == null) { return string.Empty; }
            return _smtpSection.Network.Host;
        }
    }

    ...
} 
```

我正在尝试对其进行单元测试：

```
[TestMethod]
public void TestStartupSettings()
{
    var sut = new ApplicationSupport.Email.Startup();
    Assert.AreEqual("test.mail.com", sut.SmtpServer);
} 
```

我***认为***我应该获取数据，因为我已经在应用程序配置文件中配置了这个：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.net>
    <mailSettings>
      <smtp from="somebody@test.com">
        <network host="test.mail.com" defaultCredentials="true" port="25"/>
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:17:50.323

`ConfigurationManager`由于在 a中使用存在一些问题`Class Library`，因此我选择简单地使用中的`Settings`选项卡，`Project Properties`因为它会生成一个`app.config`包含数据的文件，例如，我可以简单地将其复制并粘贴到`web.config`正在运行的应用程序中。

它还允许我轻松地对应用程序进行单元测试。

# azure - 一个站点可以有多个地址吗？

> ID：14582709
> 
> 赞同：1
> 
> 时间：2013-01-29T12:18:50.540
> 
> 标签：azure, dns

我有一个网站，希望来自 5 个不同国家的用户使用。但是，我希望每个国家/地区都能通过特定语言的 url 访问该站点，例如 www.deutchname.com 和 ww.englishname.com。然后，该站点将根据域名提供语言服务。这是可能的还是我用相同的数据库设置了几个站点？我在 Azure Web 角色上运行我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:54:17.840

在 Windows Azure 中创建应用程序时，Azure会在*cloudapp.net*域上提供一个友好的*子*域。但是，在大多数情况下，您希望通过自定义域名访问您的网站，例如. *Azure 云服务*和*Azure 网站*都支持该功能。*`www.mysite.com`*

 ***自定义域对最终用户是不可见的，即访问者`www.yoursite.com`永远不会看到真正的主机（例如，`yoursite.cloudapp.net`）。

让*单个部署处理多个域*或*多个部署（每个都支持单个域）与一个数据库*通信的方法取决于系统架构的架构。每种解决方案都有其优点和缺点。这两种解决方案都可以在 Azure 云服务中构建。

我们正在使用第一种方法，即处理多个域（和语言）的单一部署，它工作得非常好。存在一些挑战，但与系统架构（例如，在一个域上可见而在其他域上隐藏的功能等）有关，而不是与 Azure 本身有关。

有为[Windows Azure 云服务或存储帐户配置自定义域名一](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)文描述了为 Azure 云服务设置自定义域（通过`CNAME`或别名记录（首选）或通过`A`记录）的过程以及验证过程。***

# wpf - 使用 WindowManager 重新激活退出窗口

> ID：14582710
> 
> 赞同：5
> 
> 时间：2013-01-29T12:18:54.830
> 
> 标签：wpf, caliburn.micro, window-management

我正在将 WPF 与当前最新最好的 Caliburn.Micro (1.4.1) 版本一起使用。我使用[IWindowManager.ShowWindow(...)](https://caliburnmicro.codeplex.com/SourceControl/changeset/view/aabf28a0d8c4#src/Caliburn.Micro.WPF/WindowManager.cs)打开一个新的无模式窗口：

```
private void OpenOrReactivateInfoView()
{
    if(this.infoViewModel == null)
    {
        this.infoViewModel = new InfoViewModel();
    }

    this.windowManager.ShowWindow(this.infoViewModel);
} 
```

而不是每次`OpenOrReactivateInfoView()`调用时都打开一个新窗口，我想检查窗口是否仍然打开，如果是，现有窗口应该重新获得焦点。

我们有什么好的 Calibrun.Micro 方法来解决这个问题？我当然想避免在视图模型中保留对窗口（或任何 UIElement）本身的引用。另请注意，这是许多无模式对话框的常见行为，因此最好以通用的可重用方式解决此问题。

Caliburn.Micro 是否已经内置了这个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:49:02.657

WindowManager 源代码总是创建一个新窗口，因此您真正想要做的只是在您确实打算创建一个新窗口时使用 WindowManager.ShowWindow 方法。

您要做的第一件事是保持对视图模型的持久引用，如下所示：

```
private readonly InfoViewModel infoViewModel = new InfoViewModel();
private void OpenOrReactivateInfoView()
{
    this.windowManager.ShowWindow(this.infoViewModel);
} 
```

然后，在您的视图模型中，创建一个名为 Focus 的方法或任何您想要的方法，如下所示：

```
public void Focus()
{
    var window = GetView() as Window;
    if (window != null) window.Activate();
} 
```

然后重新访问您的 OpenOrReactivateInfoView() 方法进行轻微调整，如下所示：

```
private void OpenOrReactivateInfoView()
{
    if (!this.infoViewModel.IsActive)
        this.windowManager.ShowWindow(this.infoViewModel);
    else
        this.infoViewModel.Focus();
} 
```

这种方法对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T04:45:31.277

无需实际实现 IViewAware 即可跟踪您的窗口的一种相当简单的方法是保留对您的 ViewModel 和 View 的弱引用的字典，然后检查您是否已经有一个现有的 Window。可以作为 WindowManager、子类或扩展的装饰器来实现。

假设您实际上并没有计划打开足够多的窗口，即使死掉的 WeakReferences 也会影响性能，那么像下面这样简单的事情应该可以解决问题。如果要长时间运行，那么实施某种清理应该不难。

```
public class MyFancyWindowManager : WindowManager
{
    IDictionary<WeakReference, WeakReference> windows = new Dictionary<WeakReference, WeakReference>();

    public override void ShowWindow(object rootModel, object context = null, IDictionary<string, object> settings = null)
    {
        NavigationWindow navWindow = null;

        if (Application.Current != null && Application.Current.MainWindow != null)
        {
            navWindow = Application.Current.MainWindow as NavigationWindow;
        }

        if (navWindow != null)
        {
            var window = CreatePage(rootModel, context, settings);
            navWindow.Navigate(window);
        }
        else
        {
            var window = GetExistingWindow(rootModel);
            if (window == null)
            {
                window = CreateWindow(rootModel, false, context, settings);
                windows.Add(new WeakReference(rootModel), new WeakReference(window));
                window.Show();
            }
            else
            {
                window.Focus();
            }
        }

    }

    protected virtual Window GetExistingWindow(object model)
    {
        if(!windows.Any(d => d.Key.IsAlive && d.Key.Target == model))
            return null;

        var existingWindow = windows.Single(d => d.Key.Target == model).Value;
        return existingWindow.IsAlive ? existingWindow.Target as Window : null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:40:25.313

我想出了这种扩展方法。它有效，但我对它并不特别满意，它仍然有些骇人听闻。

很明显，这个扩展必须对模型做出如此多的假设（你是否也看到了那些讨厌的例外？）。

```
using System;
using System.Collections.Generic;
using Caliburn.Micro;

public static class WindowManagerExtensions
{
    /// <summary>
    /// Shows a non-modal window for the specified model or refocuses the exsiting window.  
    /// </summary>
    /// <remarks>
    /// If the model is already associated with a view and the view is a window that window will just be refocused
    /// and the parameter <paramref name="settings"/> is ignored.
    /// </remarks>
    public static void FocusOrShowWindow(this IWindowManager windowManager,
                                         object model,
                                         object context = null,
                                         IDictionary<string, object> settings = null)
    {
        var activate = model as IActivate;
        if (activate == null)
        {
            throw new ArgumentException(
                string.Format("An instance of type {0} is required", typeof (IActivate)), "model");
        }

        var viewAware = model as IViewAware;
        if (viewAware == null)
        {
            throw new ArgumentException(
                string.Format("An instance of type {0} is required", typeof (IViewAware)), "model");
        }

        if (!activate.IsActive)
        {
            windowManager.ShowWindow(model, context, settings);
            return;
        }

        var view = viewAware.GetView(context);
        if (view == null)
        {
            throw new InvalidOperationException("View aware that is active must have an attached view.");
        }

        var focus = view.GetType().GetMethod("Focus");
        if (focus == null)
        {
            throw new InvalidOperationException("Attached view requires to have a Focus method");
        }

        focus.Invoke(view, null);
    }
} 
```

# c# - 如何隐藏 .exe.config 或更改位置？

> ID：14582714
> 
> 赞同：0
> 
> 时间：2013-01-29T12:19:16.680
> 
> 标签：c#, app-config

我需要设置实际位于应用程序文件夹中的隐藏 .exe.config。或者，它会很好地更改文件夹位置，例如在应用程序数据（隐藏文件夹）中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:36:56.123

您无法使用默认 CLR 主机更改 app.exe.config 文件的位置。在您的代码开始运行之前，它会使用在 .config 文件中找到的值初始化主 appdomain。它只会在一个地方查找文件，在与启动 EXE 相同的目录中，使用 EXE 的名称。更改位置在技术上是可行的，但前提是您编写了使用自定义 AppDomainManager 的自定义 CLR 主机。编写自定义 CLR 主机需要使用 C++ 编写的 COM 代码。否则，这会破坏只有一个可部署文件的意义。

如果您打算这样做以隐藏敏感信息，例如 dbase 连接字符串的用户名+密码，那么请记住，通过默默无闻的安全性并不是真正的安全性。

如果您打算这样做以实现单文件部署，那么不要忘记忽略标准解决方案：名为 setup.exe 的单个文件

# android - 如何关闭 onBackPressed 上的 android 应用程序？

> ID：14582715
> 
> 赞同：3
> 
> 时间：2013-01-29T12:19:16.733
> 
> 标签：android

我有三个屏幕（活动）。假设 A、B、C。

屏幕转换的顺序是 A、B、C。

一旦用户从第三个屏幕（屏幕 C）点击“返回”按钮，我想关闭应用程序。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:50:19.783

在 c 活动后退按钮单击事件中尝试以下代码

```
System.exit(0); 
```

或者您也可以使用以下代码

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:09:31.287

正如user936414所建议的，当你从活动A到B完成活动A时，当你从B到C时，完成活动B，所以当你到达活动C时，它将是堆栈上唯一的活动，按回将关闭它.

像这样：

```
startActivity(new Intent(getApplicationContext(), NextActivity.class));
finish(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:32:38.713

您可以在每个活动中注册以下广播接收器

```
/* Logout Intent Actions */
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("com.package.ACTION_LOGOUT");
broadcastReceiver = new BroadcastReceiver() {

@Override
public void onReceive(Context context, Intent intent) {
     Log.i("MyApp","Loggin out from <activity>");
     finish();
}
};
registerReceiver(broadcastReceiver, intentFilter);
/* Logout Intent Actions */ 
```

然后每次你打电话

```
broadcastIntent.setAction("com.package.ACTION_LOGOUT");
sendBroadcast(broadcastIntent); 
```

这将发送一个广播以关闭每个活动，并将应用程序置于后台。

请记住，Android 中“关闭应用程序”的概念是完全不同的，因为您实际上不能命令它关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:43:43.480

当您从活动 B 开始活动 C 时，使用此代码开始活动 C：

```
Intent intent = new Intent(getApplicationContext(), ActivityC.class)
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:36:46.783

从 Activity B 打开 Activity C 时，使用以下意图，

```
Intent intent = new Intent(this, StartActivity.class)
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

它将完成之前的所有活动。

# hibernate - JPA - 人和地址之间的 OneToMany 关联，但无法创建具有关联的 @NamedQuery

> ID：14582722
> 
> 赞同：1
> 
> 时间：2013-01-29T12:19:33.100
> 
> 标签：hibernate, jpa, spring-mvc, hibernate-mapping

我是hibernate和jpa的新手。基本上我有 2 个表 Person 和 Address。一个人可以有很多地址。我在人和地址之间有一个 OnetoMany 关系。我想得到每个人的名字和地址。

请在我的两张桌子下面找到：

```
ADDRESS: ADDRESSID,ADDRESS,PERSONID

PERSON:ID, FIRTSNAME,LASTNAME,PASSWORD. 
```

我不知道如何为下面的相应 sql 创建 @NamedQuery 的语法：

```
select PERSON.FIRSTNAME, ADDRESS.ADDRESS
FROM PERSON
INNER JOIN ADDRESS
ON PERSON.id = ADDRESS.PERSONID; 
```

请找到地址实体类，我假设选择语句将在下面的类中：

```
@Entity
@NamedQuery(name="getAddressWithPersonFirstName",query=" ")
@Table(name = "ADDRESS")
public class Address {

@Id
@Column(name = "ADDRESSID")
private int addressId;

@Column(name = "ADDRESS")
private String address;

@Column(name = "PERSONID")
private int personId;

@ManyToOne
@JoinColumn(name="personId")
private Person person;

public Person getPerson() {
    return person;
}

public void setPerson(Person person) {
    this.person = person;
}

public int getAddressId() {
    return addressId;
}

public void setAddressId(int addressId) {
    this.addressId = addressId;
}

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

public int getPersonId() {
    return personId;
}

public void setPersonId(int personId) {
    this.personId = personId;
} 
```

}

我的第二个实体类：

```
public class Person implements Serializable {

private static final long serialVersionUID = -1308795024262635690L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column
private String firstName;

@Column
private String lastName;

@Column
private String password;
@OneToMany(targetEntity = Address.class, mappedBy = "person")
private List<Address> address;

public List<Address> getAddress() {
    return address;
}

public void setAddress(List<Address> address) {
    this.address = address;
}

public Person() {
}

public Person(String firstName, String lastName) {
    super();
    this.firstName = firstName;
    this.lastName = lastName;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

@Override
public String toString() {

    return super.toString() + " name = " + firstName + " " + lastName
            + " id = " + id;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result
            + ((firstName == null) ? 0 : firstName.hashCode());
    result = prime * result + ((id == null) ? 0 : id.hashCode());
    result = prime * result
            + ((lastName == null) ? 0 : lastName.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Person other = (Person) obj;
    if (firstName == null) {
        if (other.firstName != null)
            return false;
    } else if (!firstName.equals(other.firstName))
        return false;
    if (id == null) {
        if (other.id != null)
            return false;
    } else if (!id.equals(other.id))
        return false;
    if (lastName == null) {
        if (other.lastName != null)
            return false;
    } else if (!lastName.equals(other.lastName))
        return false;
    return true;
} 
```

}

请找到我将在其中运行查询的方法：

```
 public List<Address> getAddressByPersonFirstName() {

    TypedQuery<Address> query = entityManager.createNamedQuery(
            "getAddressWithPersonFirstName", Address.class);
    List<Address> results = query.getResultList();
    return results;

} 
```

所以如上所述，我的两个主要问题是如何创建@NamedQuery 以查找所有带有人名的地址，我不确定上述方法是否正确，因为我将返回地址和人名，但我上面的方法返回一个对象地址.:(

任何帮助都是最受欢迎的。再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:23:30.330

因此，您要做的第一件事是仔细检查您的 Person 类。您的地址类有 @Table(name="ADDRESS") 和 @Entity，但我没有看到 Person 类的这些。确保将 Person 类映射到 PERSON 表。

根据您所描述的，我认为您甚至不需要命名查询来做您想做的事情。看起来您想要选择数据库中的所有地址并获取与该地址关联的人的名字。您已通过 @ManyToOne 加入将您的 Address 映射到 Person 类。

所以第一步是获取所有地址。有几种方法可以做到这一点，您可以尝试：

```
Query query = entityManager.createQuery("select a from Address a");
List<Address> addresses = (List<Address>) query.getResultList(); 
```

这将为您获取数据库中的每个地址。如果您希望名字与该地址一起使用，请从列表中拉出单个地址：

```
address.getPerson().getFirstName(); 
```

现在，假设您要进行命名查询来为特定的名字执行此操作。假设您要查找此人的名字为“Bob”的所有地址。

```
@NamedQueries({
    @NamedQuery(name="getAddressWithPersonFirstName", query="select a from Address a inner join Person p 
            where p.firstName=:firstName")
})
@Entity
@Table(name = "ADDRESS")
public class Address { 
```

然后调用命名查询：

```
Query query = entityManager.createNamedQuery("getAddressWithPersonFirstName")
query.setParameter(0, "Bob");
return (List<Address>) query.list(); 
```

# javascript - jQuery to add a class to image links without messing up when the link passes variables

> ID：14582724
> 
> 赞同：3
> 
> 时间：2013-01-29T12:19:39.903
> 
> 标签：javascript, jquery, html

OK so I was using a bit of jquery to select all the `<a>` tags on the page and if they link to an image file to add a `zoom` class to it for the purposes of a lightbox. This is the code which works

```
$(document).ready(function () {
$('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
}); 
```

There is a problem with this though;

Say I have a link which just goes to another page but passes an image url as a GET variable in the URL the lightbox is activated as a result of this and fails because the link is not actually to an image. For example:

```
<a href="http://example.com/a-normal-page/?pic=http://example.com/pics/picture.jpg">Link text</a> 
```

In the above instance the jQuery script will add the zoom class to this anchor even though it doesn't actually link to a picture. This wouldn't usually be an issue as you would leave the page to go to the link's destination before the lightbox has a chance to appear, but in times where a new tab/window is opened I get a failed lightbox coming up.

This is particularly prevalent on social media buttons such as Pinterest which passes an image url within the link.

[apologies for the title - I wasn't sure how best to phrase it. Please feel free to edit to something more suitable]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:30:23.410

you could add the `zoom` class only if `href` attribute doesn't contain a `?` (or, in other words, a querystring is not included), e.g.

```
$(document).ready(function () {
    $('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').each(function() {
        if (this.href.indexOf('?') < 0) {
             $(this).addClass('zoom');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:33:35.897

You can parse the href with a simple regex to check that the image is not in the query string, and filter out the false positives.

```
$(document).ready(function () {
    $imgLinks = $('a[href$=".png"], a[href$=".gif"], a[href$=".jpg"]');
    $imgLinks.filter(function() {
        return !$(this)
                .attr('href')
                .match(/^http\:\/\/.*\?.*http\:\/\/.*\.(png|gif|jpg)$/);
    })
    .addClass('zoom');
}); 
```

# javascript - js中的变量

> ID：14582725
> 
> 赞同：1
> 
> 时间：2013-01-29T12:19:42.197
> 
> 标签：javascript, kendo-ui

对于 js，我是个菜鸟，今天我遇到了一些我不太了解的 js，但我很想了解。你能解释一下吗？涉及剑道，但问题是纯js。

我有一个嵌套网格，例如。每行都可以扩展到其他网格，并且每个网格都有自己的数据源。当用户单击时，我通过下面的方法一一填充数据源，当它从创建调用接收到异步响应时，我遇到了强制数据源读取的问题。（调用 read 是非常不正确的事情，但是 Kendo 有自己的错误 - 这里不是重点。）。我的问题是，我没有调用 read() 的实例，该方法仅返回数据源并将其分配给网格，当事件返回时，我找不到任何可以得到正确的引用数据源实例来自。这是这里不同的上下文。

为了解决这个问题，我在构建数据源的方法中添加了一个数据源变量，然后我返回变量而不是数据源，这是同一回事。然而，这有助于有一些东西可以调用有问题的 read() 。现在在我的创建处理程序中，我在初始化期间在方法中返回的变量上调用 create。好吧，它可以工作，但我不确定每个数据源是否在 innit 之后都在其自己的实例上调用 read ？

```
function _getDatasource() {
        var datasource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: serviceBaseUrl + "ReadQuestionnaire",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",

                },               
               create: {
                    url: serviceBaseUrl + "CreateQuestionnaire",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    complete: function (jqXhr, textStatus) {
                        if (CheckForExceptions(jqXhr, textStatus) == false) {
                            // this is the variable I am not sure about 
                            // after innit does this always refers to this same datasource ?
                            datasource.read(); 
                        }
                    }
                }
            }
        });
        return datasource;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:23:22.317

您的解决方案是正确的，是的，`datasource.read()`在每种情况下调用都是正确的数据源对象。

这就是它起作用的原因：闭包。

闭包是在一个函数中声明的变量可以从嵌套函数访问的能力。或者，要获得更准确的描述，请参阅维基百科页面：[http://en.wikipedia.org/wiki/Closure_(computer_science)](http://en.wikipedia.org/wiki/Closure_(computer_science))

这是一个非常简单的例子：

```
 function doStuff(){
  var name = "Derick";

  function sayMyName(){
    console.log(name);
  }

  sayMyName();
}

doStuff(); 
```

在这个例子中，我在函数`name`内部声明了一个变量。`doStuff`然后我在第一个函数中嵌套了另一个函数。该`sayMyName`函数`name`通过使用闭包来访问变量。

当我调用`doStuff()`时，变量被定义并分配给一个值。然后`sayMyName`定义函数并使用该变量。然后我打电话`sayMyName()`并将名称记录到控制台。

同样，在您的代码中，您正在创建一个分配给`DataSource`. 稍后，您将为`complete`回调定义一个函数。加载数据源并`complete`触发回调后，您将访问`dataSource`通过使用围绕该变量的闭包分配给 DataSource 实例的同一变量。

由于您`var dataSource`每次调用时都在声明`_getDataSource`，因此您正在创建一个新的变量/引用，并分配给一个新的 DataSource 实例。我不认为你需要`return datasource`在你的函数的底部，虽然......至少，`complete`回调函数不需要工作。也许你需要它来做其他事情，在这个功能之外，虽然？

有关 JavaScript 中的闭包的更多信息：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)

[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

[http://www.javascriptkit.com/javatutors/closures.shtml](http://www.javascriptkit.com/javatutors/closures.shtml)

[http://www.watchmecode.net/javascript-scope](http://www.watchmecode.net/javascript-scope)（付费截屏）

高温高压

# android - 每 1 秒运行一堂课不能按预期工作

> ID：14582727
> 
> 赞同：0
> 
> 时间：2013-01-29T12:19:51.873
> 
> 标签：android

我正在尝试在主要活动中实现 Timer()。但是，不知何故，它并没有像我预期的那样工作。我将向您展示关键代码部分。错误：图标未更改

```
public class X extends Activity {
       private Timer timer = new Timer () ;
       setContentView(R.layout.main);
       public void onCreate(Bundle a) {
              //..
              timer.scheduleAtFixedRate( new Device(),  1000, 1000  );

       } 
```

}

```
public class Device extends TimerTask {
       Image e;
       View w;
       public void run() {
           e = ( ImageView ) w.findViewById(R.id.imageView1);
           if ( isVolited ( ))
                   e.setBackground(w.getResources().getDrawable(R.drawable.icon1));
               else
                   e.setBackground(w.getResources().getDrawable(R.drawable.icon2)); 
```

日志 ：

```
 01-29 14:25:51.175: E/TabletStatusBar(2172): closing mini mode apps panel
 01-29 14:25:51.255: E/TabletStatusBar(2172): closing mini mode apps panel
 01-29 14:25:56.510: E/lights(2051): write_int failed to open /sys/class/sec/sec_touchkey/brightness
 01-29 14:25:59.105: E/lights(2051): write_int failed to open /sys/class/sec/sec_touchkey/brightness
 01-29 14:26:00.060: E/TODmobile(3509): onReceive action=android.intent.action.TIME_TICK
 01-29 14:26:00.060: E/TODmobile(3509): hour : 14    minute : 26
 01-29 14:26:00.060: E/DigitalClockWidget(3509): updateWidgets
 01-29 14:26:00.065: E/TODmobile(3509): hour : 14    minute : 26
 01-29 14:26:10.725: E/Watchdog(2051): !@Sync 504 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:26:57.597

您不能从工作线程更新 UI 线程。您必须使用处理程序或 Aysn Task 来更新 UI 线程。

```
handler.post(new Runnable() {

                    @Override
                    public void run() {
                               e.setBackground(w.getResources().getDrawable(R.drawable.icon1));

                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:07:45.517

试试这个代码，它正在工作

```
Timer time = new Timer();
TimerTask doThis;

int delay = 1000; // delay for 5 sec.
int period = 1000; // repeat every sec.
doThis = new TimerTask() {
    public void run() {

        e = (ImageView) findViewById(R.id.imageView1);

        runOnUiThread(new Runnable() {
            public void run() {

                e.setImageResource(R.drawable.ic_launcher);

            }

        });

    }
};
time.scheduleAtFixedRate(doThis, delay, period); 
```

# google-maps - 谷歌地图上的集群标记

> ID：14582730
> 
> 赞同：0
> 
> 时间：2013-01-29T12:20:01.530
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-api-2

我在 Google Map API 工作方面没有太多经验，但现在我要尝试一下。

目前我正在尝试创建一个应用程序，用户可以在其中选择餐厅、剧院等位置类型。当用户单击剧院链接时，他将在当前位置周围的地图上获取所有剧院的标记，以及何时单击在餐厅上，他会在地图上找到所有餐厅的标记以及剧院的标记。我确实有一些经纬度细节来测试它。

为此，我正在使用 Google Map API 的集群标记，但现在的问题是，当我点击餐厅时，剧院标记正在转换为餐厅标记图标。

我的问题是有没有其他好的方法来做这种应用程序，或者我应该使用相同的方法。如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:34:38.297

我认为，这对你很有用。我尝试过关注 Api 工作正常。我准备了以下链接。我已经习惯了 IOS 应用程序和 android。

接口：

```
https://maps.googleapis.com/maps/api/place/search/xml?location=11.033538,76.958542&radius=50000&types=restaurant&sensor=false&key=AIzaSyBbFJq2_okjiRn4duMJwDCZvYoVrM_Tbtg 
```

[用于认证密钥和开发 API 格式的 API](https://code.google.com/apis/console/?pli=1#project:553488512845%3aaccess)

[支持的类型](https://developers.google.com/places/documentation/supported_types)

# ios - 隐藏故事板iOS中导航栏的后退按钮

> ID：14582733
> 
> 赞同：6
> 
> 时间：2013-01-29T12:20:03.957
> 
> 标签：ios, ios6, uinavigationcontroller, storyboard, back-button

我想隐藏作为故事板一部分的导航栏的后退按钮，我在详细视图按钮中尝试了不同的以下代码片段，似乎对我没有任何用处。

```
self.navigationItem.hidesBackButton = YES;

self.navigationItem.backBarButtonItem=nil; 
```

PS：我的故事板中也有标签栏和导航栏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T13:06:31.337

在您想要隐藏后栏按钮的 ViewController 的 viewDidLoad 中添加这一行：

```
[self.navigationItem setHidesBackButton:YES]; 
```

在故事板项目中成功测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T16:18:06.397

如果您已将自己的按钮添加到 navigationController 并且还想隐藏它（例如在编辑文本时），它的两行过程如下所示：

```
myViewController.navigationItem.leftBarButtonItem = nil;
myViewController.navigationItem.hidesBackButton=YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T06:50:24.480

尝试这个

```
self.navigationItem.hidesBackButton= YES; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-05T15:18:48.873

答案为时已晚，但可能对其他人有所帮助。
要隐藏后退按钮，您可以这样做：

```
self.navigationController.navigationItem.leftBarButtonItem.hidden = YES; 
```

您也可以尝试：

```
self.navigationItem.leftBarButtonItem.hidden = YES; 
```

这实际上隐藏了左侧 BarButton 并且后退按钮也在左侧，除非您以编程方式进行更改。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T12:32:41.167

您可以隐藏整个导航栏，如下所示：

```
self.navigationController.navigationBar.hidden = YES; 
```

然后在您的故事板中，您可以将导航栏添加到视图控制器。

结果就是你想要的，但也许用户会对他们为什么不能回去感到困惑......

# jstl - 使用 jstl 检索 bean 值

> ID：14582738
> 
> 赞同：0
> 
> 时间：2013-01-29T12:20:21.277
> 
> 标签：jstl

```
 public class CCDocumentHeaderBean
  {
    boolean TransportRequested;
public void setTransportRequested(boolean newTransportRequested) {
        TransportRequested = newTransportRequested;
    }
public boolean isTransportRequested() {
        return TransportRequested;
    }   

}
CCDocumentHeaderBean lDocHeaderBean = new CCDocumentHeaderBean();
 lDocHeaderBean = (CCDocumentHeaderBean)session.getValue("CustomHeaderValue");

<input type="checkbox" name="chkSelectNo"     
                            <c:if test="${lDocHeaderBean.TransportRequested== false}">
                         checked 
                        </c:if> 
        onClick = "javascript:onSelectNo();"> 
```

在这段代码中，我有 CCDocumentHeaderBean 类，我在页面加载时存储这个 TransportRequest 属性。我想检索复选框中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:23:52.213

这里，

```
<c:if test="${lDocHeaderBean.TransportRequested== false}">
    checked 
</c:if> 
```

您的编码约定很糟糕。属性名称应以小写字母开头。相应地修复它。

```
<c:if test="${not lDocHeaderBean.transportRequested}">
    checked 
</c:if> 
```

请注意，将布尔属性值与布尔值进行比较以获得布尔结果是没有意义的。只需直接返回布尔属性值。如果要反转它，只需使用`!`or`not`运算符，如上所示。

# css - CSS 和 WebGrid 的有趣问题

> ID：14582741
> 
> 赞同：0
> 
> 时间：2013-01-29T12:20:33.583
> 
> 标签：css, webgrid

这是我遇到的一个有趣的问题。

我在我的项目中使用*Asp.net MVC WebGrid 。*我正在尝试对其应用一些 CSS。

所以将代码更改为

```
@grid.GetHtml(footerStyle: "pagination") 
```

现在，*分页*类有一些像这样的代码

```
.pagination a:hover, .pagination a:active{
    border: 1px solid #2b66a5;
    color: #000;
    background-color: #F2F2F2;
} 
```

所以现在，当我运行这个文件并将鼠标悬停在页码上时，包含表格的面板开始展开！一次一排！

我知道如果我尝试过，我无法仅使用 CSS 来获得这种效果。:p 但我偶然得到它！**只有当我同时删除***边框*和*背景颜色*属性时，它才会消失。

我只是想知道这是怎么回事？？？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:26:36.083

边框增加了某些元素的大小。例如，假设您有`div`一个高度为`800px`，宽度为`400px`。如果你像这样添加一个`5px`边框`div`：

```
div.class {
    border: 5px solid black;
} 
```

然后你会注意到盒子`5px`向各个方向扩展；导致盒子`810px`被`410px`.

这可以通过使用这样的东西来避免：

```
div.class {
    border: 5px solid black;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
} 
```

这*应该可以*解决您的问题...希望！

# javascript - 如何从javascript中的总量和百分比值中找出增值税

> ID：14582744
> 
> 赞同：1
> 
> 时间：2013-01-29T12:20:59.187
> 
> 标签：javascript

以下代码用于使用 java 脚本从百分比值和金额值返回增值税值，但不准确。

```
var vat=((25*100)/447);
vat=vat.toFixed(1); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:44:15.740

好的，为了提供帮助，您需要指定您正在使用的详细信息。增值税税率是多少？您是根据总值（包括增值税）还是净值（不包括增值税）工作。

```
var nVatRate = 0.2;// This is the rate of VAT in the UK at present, 20%

function VatAmountFromGross(nGrossAmount){
    return nGrossAmount / (1 + (1 / nVatRate));
}

function VatAmountFromNet(nNetAmount){
    return nNetAmount * (1 + nVatRate);
} 
```

所以，改变增值税率以匹配你的，我猜是 25% (0.25)。

使用“toFixed(1)”将确保该值固定为小数点后 1 位 - 通常增值税需要两位小数。如果您对值求和，您还会遇到舍入问题，这些都是无济于事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:23:44.960

而不是这个：

```
var vat=((25*100)/447);
vat=vat.toFixed(1); 
```

您应该使用确切的总金额：

```
var vat=((24.585*100)/447);
vat=vat.toFixed(3); 
```

在将值保存在数据库中时，您应该做的是将每个值四舍五入到小数点后三位，无论是增值税、百分比还是总金额。为了将其呈现给用户/客户，您可以将其四舍五入到小数点后一位或两位.

# logging - Enterprise Library Logging Distributor 的配置中的 TraceListenerData 类型无效

> ID：14582750
> 
> 赞同：6
> 
> 时间：2013-01-29T12:21:07.533
> 
> 标签：logging, configuration, enterprise-library, msmq

我正在尝试使用 Enterprise Library MSMQ Distributor 服务来获取放置在 MSMQ 队列中的日志消息，并通过 Logging 块的标准数据库部分将它们放置在数据库中。

但是，当我尝试启动 Distributor 服务时，出现以下异常：

```
Exception Type: System.Configuration.ConfigurationErrorsException
Message: Invalid TraceListenerData type in configuration 'listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database"'. (C:\Projects\LogTest\msmqDistributor\MsmqDistributor.exe.Config line 15) 
```

有问题的行如下所示：

```
 <listeners>
   <add name="Database Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.Database.FormattedDatabaseTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database"
    databaseInstanceName="LoggingDB" writeLogStoredProcName="WriteLog"
    addCategoryStoredProcName="AddCategory" formatter="Text Formatter"
    traceOutputOptions="DateTime, Timestamp" />
  <!-- other listeners -->
  </listeners> 
```

我无法弄清楚侦听器定义有什么问题 - 似乎分发者找不到它，但据我所知，相关的 dll 在同一个文件夹中。对不同的应用程序运行相同的配置可以正常工作并将日志条目写入数据库，因此似乎它可能与服务权限有关，但我不知道我需要以哪种方式查找此权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:53:58.323

这个问题归结为有错误的 .dll 版本可用。如果您同时拥有 Enterprise Library 的源版本和二进制版本，则需要确保使用与用于创建配置文件的 EntLibConfig.exe 版本相同的库。因此，如果您使用二进制分发中的 EntLibConfig 文件，您需要使二进制分发中的 dll 可用于由它们配置的应用程序。否则你所有的引用都会被打乱，你会得到这种类型的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T22:40:42.563

我知道您已将此标记为已回答，但我遇到了这个问题，您可以解决它，而无需恢复到与 EntLibConfig 匹配的另一个 EntLib 版本。在我的情况下，我使用的是 EntLib 5.0.505.0 版，而 EntLibConfig.exe 需要 EntLib 5.0.414.0 版，就像你在配置文件中一样。只需在您的配置文件中每次出现 version=5.0.414.0 到正确的版本，这将起作用。那应该是 loggingConfiguration 的 Config 部分以及 Listener 和 formatter 部分。

缺点是您将无法再在 EntLibConfig.exe 中打开配置文件，因为它将尝试使用旧版本

![entlibconfig 错误](../Images/c53d143f030f3d68c571bb8423ca1fbd.png)

# asp.net - Mysql 连接器总是获取未设置为对象实例的对象引用

> ID：14582751
> 
> 赞同：1
> 
> 时间：2013-01-29T12:21:08.260
> 
> 标签：asp.net, mysql, entity-framework

我的整个应用程序只是连接到 mysql 数据库并使用 Entityframework 插入数据。该代码在本地运行良好，但是当我在我的亚马逊服务器上上传时，它只会给我这个错误：你可以在[http://fb1.131x.com/test_data.aspx看到](http://fb1.131x.com/test_data.aspx)

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

```
Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   MySql.Data.MySqlClient.MySqlClientFactory.get_MySqlDbProviderServicesInstance() +126
   MySql.Data.MySqlClient.MySqlClientFactory.System.IServiceProvider.GetService(Type serviceType) +39
   System.Data.Common.DbProviderServices.GetProviderServices(DbProviderFactory factory) +89
   System.Data.Metadata.Edm.Loader.InitializeProviderManifest(Action`3 addError) +174
   System.Data.EntityModel.SchemaObjectModel.Schema.HandleAttribute(XmlReader reader) +301
   System.Data.EntityModel.SchemaObjectModel.SchemaElement.ParseAttribute(XmlReader reader) +121
   System.Data.EntityModel.SchemaObjectModel.SchemaElement.Parse(XmlReader reader) +106
   System.Data.EntityModel.SchemaObjectModel.Schema.HandleTopLevelSchemaElement(XmlReader reader) +49
   System.Data.EntityModel.SchemaObjectModel.Schema.InternalParse(XmlReader sourceReader, String sourceLocation) +984
   System.Data.EntityModel.SchemaObjectModel.Schema.Parse(XmlReader sourceReader, String sourceLocation) +245
   System.Data.EntityModel.SchemaObjectModel.SchemaManager.ParseAndValidate(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, SchemaDataModelOption dataModel, AttributeValueNotification providerNotification, AttributeValueNotification providerManifestTokenNotification, ProviderManifestNeeded providerManifestNeeded, IList`1& schemaCollection) +472
   System.Data.Metadata.Edm.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths) +162
   System.Data.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest& providerManifest, DbProviderFactory& providerFactory, String& providerManifestToken, Memoizer`2& cachedCTypeFunction) +203
   System.Data.Metadata.Edm.StoreItemCollection..ctor(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths) +305
   System.Data.Metadata.Edm.StoreMetadataEntry.LoadStoreCollection(EdmItemCollection edmItemCollection, MetadataArtifactLoader loader) +129
   System.Data.Metadata.Edm.MetadataCache.LoadItemCollection(IItemCollectionLoader`1 itemCollectionLoader, T entry) +165
   System.Data.Metadata.Edm.MetadataCache.GetOrCreateStoreAndMappingItemCollections(String cacheKey, MetadataArtifactLoader loader, EdmItemCollection edmItemCollection, Object& entryToken) +245
   System.Data.EntityClient.EntityConnection.LoadStoreItemCollections(MetadataWorkspace workspace, DbConnection storeConnection, DbProviderFactory factory, DbConnectionOptions connectionOptions, EdmItemCollection edmItemCollection, MetadataArtifactLoader artifactLoader) +312
   System.Data.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections) +802
   System.Data.EntityClient.EntityConnection.InitializeMetadata(DbConnection newConnection, DbConnection originalConnection, Boolean closeOriginalConnectionOnFailure) +11108961
   System.Data.EntityClient.EntityConnection.Open() +198
   System.Data.Objects.ObjectContext.EnsureConnection() +97
   System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) +651
   System.Data.Entity.Internal.InternalContext.SaveChanges() +218
   test_data.Page_Load(Object sender, EventArgs e) +231
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064
Exception 
```

而且我还粘贴了我的 webconfig，我尝试使用 6.3.5 和 6.4.4 版本，我只是得到同样的错误。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
    <configSections>
        <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </configSections>
    <system.web>
        <customErrors mode="Off" />
        <compilation debug="true" targetFramework="4.0">
            <assemblies>
                <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
                <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
                <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
            </assemblies>
            <buildProviders>
                <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider" />
            </buildProviders>
        </compilation>
    </system.web>
    <system.data>
        <DbProviderFactories>
            <remove invariant="MySql.Data.MySqlClient" />
            <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
        </DbProviderFactories>
    </system.data>
    <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
            <parameters>
                <parameter value="v11.0" />
            </parameters>
        </defaultConnectionFactory>
    </entityFramework>
    <connectionStrings>
        <add name="fb131xEntities" connectionString="metadata=res://*/App_Code.FBDS.csdl|res://*/App_Code.FBDS.ssdl|res://*/App_Code.FBDS.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=fb131x.db.8808454.hostedresource.com;user id=fb131x;password=aA!259214;persist security info=True;database=fb131x&quot;" providerName="System.Data.EntityClient" />
    </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-18T07:51:21.700

您似乎没有包含`MySql.Data.Entity`. 没有那个是`dll`行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:31:00.133

These are some of the things u could try. it is always a difficult step to deploy an application on a hosting provider. once it gets going it does get going though.

*   a.build clean.
*   b.build mysql dll into ur bin directory
*   c.Install nuget packages for MySQL.Data and MySQL.Data.Entities.((right click on assembly and ensure Copy Local is set to true before building)
*   d.Remove Version=6.3.5.0 tag entirely and build without any versioning on VS.type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data" instead of specifying the full version data.

# c# - 三种型号合为一种维护形式

> ID：14582758
> 
> 赞同：0
> 
> 时间：2013-01-29T12:21:25.443
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework

我想为以下三个模型构建一个维护表单 -

```
namespace mysite.Models
{
public class LevelOne
{
    public int LevelOneId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<LevelTwo> LevelTwos { get; set; }
}

}
namespace mysite.Models
{
public class LevelTwo
{
    public int LevelTwoId { get; set; }
    public string Name { get; set; }
    public int LevelOneId { get; set; }
    public virtual LevelOne LevelOne { get; set; }
    public virtual ICollection<LevelThree> LevelThrees { get; set; }
}
}

namespace mysite.Models
{
public class LevelThree
{
    public int LevelThreeId { get; set; }
    public string Name { get; set; }
    public int LevelTwoId { get; set; }
    public virtual LevelTwo LevelTwo { get; set; }
}
} 
```

关系是：-
LevelOne 可以有多个 LevelTwo。
LevelTwo 将有一个 LevelOne 和多个 LevelThree。
LevelThree 将有一个 LevelTwo。

根据上述关系，我有级联 ddl 可供选择。

实现维护表单的最佳方法是什么，以便我可以根据 ddl 中选择的内容添加/编辑/删除级别？

是否有很多 div 被隐藏并基于 ddl 以 javascript 显示，或者可以使用 viewmodels 或一些花哨的 nancy .net 扩展等来完成更简单的事情？

想想就心痛:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:47:32.877

> 这也可以被视为只有 1 个模型和 3 个实体。
> 
> Level1 -> Level2 是一对多的关系。Level2 -> Level3 是一对多的关系。
> 
> 英孚支持这一点。正如我从你的命名空间中清楚地看到的那样，所有 3 个模型都是相同的 mysite.Models，我猜你已经在同一个模型文件中拥有所有这些模型文件，以便 EF 创建关系。

# ember.js - Ember.ContainerView 未响应 childViews.push(...) 更新

> ID：14582759
> 
> 赞同：2
> 
> 时间：2013-01-29T12:21:28.153
> 
> 标签：ember.js

我在 1.0-pre4 中出现了奇怪的行为。我`Ember.ContainerView`通过`{{view Ember.ContainerView viewName="dashboardView"}}`. 当我将视图推送到其`childViews`数组中时，DOM 不会更新。这在pre2中工作。

这是一个[jsfiddle](http://jsfiddle.net/SphtKr/RCLd7/7/)。更奇怪的是`childViews.length`，如果您查看模板的直接输出与 childViewCount 的直接输出，它似乎没有更新......或者更确切地说它没有更新（？！？），它在推送后立即更新两种观点。

## 更新

下面的答案是正确的，我的 jsfiddle 应该使用过`.pushObject`，而不是`.push()`......但我的原始代码实际使用过`.pushObject`。相反，它看起来像 Firefox 10 中的错误，请参阅答案评论。

## 更新 2

与主人确认，提交[问题 #1952](https://github.com/emberjs/ember.js/issues/1952)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:50:09.030

您需要确保您使用的是 EmberJS 等效项，以便您的绑定工作。在您使用的示例中`push`，它的行为与 几乎完全相同`pushObject`，但`pushObject`符合 KVO（键值观察/绑定），因此 Ember 可以做它的事情。

我已经更新了您的 JSFiddle 以反映这一点，它再次为您工作：http: [//jsfiddle.net/RCLd7/8/](http://jsfiddle.net/RCLd7/8/)但我所做的只是更改`push`为`pushObject`两个地方。如果我们要使用，`push`那么 Ember 将需要引入轮询，*它没有*，以**发现**更改，而不是通过`pushObject`.

本机 JavaScript 方法与 Ember 等效方法的其他一些示例：

*   本机: `push`, vs. Ember:`pushObject`
*   本机: `pop`, vs. Ember:`popObject`
*   本机: `unshift`, vs. Ember:`unshiftObject`

# c# - Visual Studio 2012 强制代理

> ID：14582761
> 
> 赞同：1
> 
> 时间：2013-01-29T12:21:35.877
> 
> 标签：c#, visual-studio, visual-studio-2012

我们正在使用 Visual Studio 2012 并尝试发布 Web 应用程序。如果我们尝试验证连接，则会返回错误：

Web 部署任务失败。无法连接到远程计算机（[服务器尝试连接]）。在远程计算机上，确保安装了 Web Deploy 并启动了所需的进程（“Web 管理服务”）。了解更多...

如果我们绕过我们的代理，我们会收到一个成功的连接。

我们找到了两篇文章，您可以通过在配置文件中添加代理元素来配置 devenv.exe.config 文件；我们已经分别尝试了这两个元素！

```
<system.net>
<defaultProxy useDefaultCredentials="true" enabled="true">
<proxy usesystemdefault="True" />
</defaultProxy>
</system.net>

<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true">
        <proxy bypassonlocal="True"
               proxyaddress="our proxy:port"/>
    </defaultProxy>
</system.net> 
```

我们已将 IE 10 设置配置为：LAN 设置为“自动检测设置”

我们正试图找到一种方法绕过我们的代理服务器并使用浏览器设置，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T16:57:48.123

这里有点晚了，但你有理由使用 VS Web Deploy 吗？是否可以使用另一种方法将应用程序部署到 Azure，例如 FTP 部署或从源代码控制设置部署？这些方法应该允许您在不必绕过代理服务器的情况下部署应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T02:22:31.907

不适用于VS2012；但更多 VS2013 - 在代理后面时，Visual Studio Web 部署中存在错误。我会假设 VS2012 也存在同样的错误。

VS2013 中包含的 Web Deploy 版本（最新更新 3）在代理后无法发布。即使您将 msbuild.exe.config 配置为具有 Microsoft 记录的正确代理设置，它仍然会失败。

幸运的是，2014 年 8 月 Web Deploy v3.6 BETA3 发布，修复了这个问题。要解决此错误，您可以下载 Web Deploy 测试版并修补您的 VS2013 安装。 [http://azure.microsoft.com/blog/2014/08/11/web-deploy-3-6-beta-released/](http://azure.microsoft.com/blog/2014/08/11/web-deploy-3-6-beta-released/)

修补 Visual Studio 后；您可以修改 msbuild.exe (msbuild.exe.config) 使用的代理设置，现在可以使用 Web Deploy 从代理后面发布。

我还没有在 VS2012 上测试过这个；作为应用于我的 VS2013 Update 3 安装的 Web 部署。

# jquery - 即使没有更改，带有 datepicker 的 jQuery 屏蔽输入也会触发 onChange 事件

> ID：14582762
> 
> 赞同：0
> 
> 时间：2013-01-29T12:21:37.923
> 
> 标签：jquery, datepicker, mask

我有一个输入（ id="myDate" ）、一个 datepicher 和附加到它的掩码

当用户按 Tab 键循环遍历所有控件，并到达输入“myDate”时，

```
__/__/____ 
```

显示是因为：

```
$("#myDate").mask("99/99/9999"); 
```

问题是当用户按下 Tab 离开控件而不写任何东西时，会触发 onChange 事件，这只有在用户修改控件值时才会发生！

如何检测真正的变化，并忽略

```
__/__/____ 
```

由 jQuery 掩码添加和删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:34:07.277

只需更新到最新的 jQuery (1.9.0) 和最新的 maskedInput (1.3.1)。
这是一个已解决的错误 - 查看[更改日志](http://digitalbush.com/projects/masked-input-plugin/)。

[1.2.1 的示例](http://jsfiddle.net/JVjFn/9/)不起作用。
[以 1.3.1为例](http://jsfiddle.net/JVjFn/6/)。

代码（因为 SO 说我必须）：
HTML：

```
First field: <input type="text" id="bla1" name="bla"><br>
Date field: <input type="text" id="datef" name="datef"><br>
Last name: <input type="text" name="lname"><br> 
```

JS：

```
$("#datef").mask("99/99/9999");
$("#datef").datepicker();
$("#datef").on('change', function(){ alert('ha');}); 
```

不要忘记添加 jQuery/jQuery-UI/ 和蒙面插件。
希望这可以帮助。

# java - Java NIO 非阻塞：如何拒绝传入连接？

> ID：14582763
> 
> 赞同：4
> 
> 时间：2013-01-29T12:21:38.487
> 
> 标签：java, connection, nio, nonblocking

我正在尝试使用基于“Rox Java NIO 教程”中的 java NIO（非阻塞）的服务器端代码。有很多传入的套接字连接，我只想接受 100 个。因此，如果有 100 个活动连接，则应该拒绝/拒绝新连接。但是怎么做呢？只有方法 ServerSocketChannel.accept() 返回 SocketChannel 对象。使用该对象我可以调用 socketChannel.socket().close()，但连接已经打开。以下是部分代码：

```
@Override
public void run() {
    while (true) {
        try {
            // Wait for an event one of the registered channels
            this.selector.select();

            // Iterate over the set of keys for which events are available
            Iterator selectedKeys = this.selector.selectedKeys().iterator();
            while (selectedKeys.hasNext()) {
                SelectionKey key = (SelectionKey) selectedKeys.next();
                selectedKeys.remove();

                if (!key.isValid()) {
                    continue;
                }

                // Check what event is available and deal with it
                if (key.isAcceptable()) {
                    this.accept(key);
                } else if (key.isReadable()) {
                    this.read(key);
                } else if (key.isWritable()) {
                    this.write(key);
                }
            }
        } catch (Exception e) {
            logger.warn("Reading data", e);
        }
    }
} 
```

和 accept() 方法：

```
 private void accept(SelectionKey key) throws IOException {
    // For an accept to be pending the channel must be a server socket channel.
    ServerSocketChannel serverSocketChannel = (ServerSocketChannel) key.channel();

    // Accept the connection and make it non-blocking        
    if (noOfConnections < MAX_CONNECTIONS) {
        SocketChannel socketChannel = serverSocketChannel.accept();
        Socket socket = socketChannel.socket();
        socket.setKeepAlive(true);
        socketChannel.configureBlocking(false);
        // Register the new SocketChannel with our Selector, indicating
        // we'd like to be notified when there's data waiting to be read
        socketChannel.register(this.selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);//listener for incoming data: READ from client, WRITE to client
        noOfConnections++;
        logger.info("Accepted: " + socket.getRemoteSocketAddress().toString());
    } else {

        // REJECT INCOMING CONNECTION, but how?

        logger.warn("Server is full: " + noOfConnections + " / " + MAX_CONNECTIONS);
    }
} 
```

如果连接不被接受，那么 accept() 方法被一遍又一遍地调用。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:58:30.140

没有办法做到这一点，但我怀疑那是你真正想要的，或者至少是你真正应该做的。

如果您想停止接受连接，请将服务器套接字通道的选择键中的 interestOps 更改为零，并`OP_ACCEPT`在您准备好再次接受时将其更改回。在此期间，`isAcceptable()`永远不会是真的，所以你描述的问题不会发生。

但是，这不会导致进一步的连接被拒绝：它只会将它们留在积压队列中，我认为它们属于 TCP 设计者。如果积压队列被填满，将会出现另一种失败行为：它在客户端中的影响取决于系统：连接拒绝和/或超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:18:41.217

我认为对积压队列的任何调整几乎都不是一个好的解决方案。但也许，你可以停止听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T12:08:45.457

好吧，我用下一个方法解决了这个问题：套接字上的挂起状态连接是一种“中间状态”，这意味着你不能控制/拒绝它们。特定 VM 可能以不同的方式使用/忽略/处理积压套接字参数。这意味着您必须接受特定的连接才能接收关联的对象并对其进行操作。

使用一个线程接受连接，将接受的连接传递给第二个线程进行处理。为活动连接数创建一些变量。现在，当活动连接的数量小于希望的最大值时，接受连接，将数量增加 1，然后传递给第二个线程进行处理。否则，接受连接并立即关闭它。

此外，在连接进程线程中，比完成时，将活动连接数减少 1 以指向还有一个可用的空闲通道。

EDT：刚刚为 Java.Net NIO 制作了服务器机制的“存根”。可适应 OP 需求：

```
package servertest;

import java.io.IOException;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Servertest extends Thread {
    final int MAXIMUM_CONNECTIONS = 3;
    int connectionnumber = 0;

    /**
     * @param args the command line arguments
     * @throws java.io.IOException
     */
    public static void main(String[] args){

        new Servertest().start();
    }

    @Override
    public void run() {
        try {
            ServerSocket sc = new ServerSocket(33000, 50, InetAddress.getLoopbackAddress());
          while (sc.isBound()) {
            Socket connection = sc.accept();
            if(connectionnumber<=MAXIMUM_CONNECTIONS){
                new ClientConnection(connection).start();
                connectionnumber++;
            } else {
                //Optionally write some error response to client
                connection.close();
            }
          }
        } catch (IOException ex) {
            Logger.getLogger(Servertest.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    private class ClientConnection extends Thread{
        private Socket connection;
        public ClientConnection(Socket connection) {
            this.connection=connection;
        }

        @Override
        public void run() {
            try {
                //make user interaction

                connection.close();

            } catch (IOException ex) {
                Logger.getLogger(Servertest.class.getName()).log(Level.SEVERE, null, ex);
            }

            connectionnumber--;

        }

    }

} 
```

# mysql - 没有where子句的查询中where子句中的未知列

> ID：14582764
> 
> 赞同：2
> 
> 时间：2013-01-29T12:21:39.733
> 
> 标签：mysql, where, mysql-error-1054

我有下表：

```
CREATE TABLE `pckgs` (
`idPckg` int(11) NOT NULL AUTO_INCREMENT,
`name` char(32) COLLATE utf8_polish_ci NOT NULL,
`customCount` int(11) NOT NULL DEFAULT '0',
`baseCustomCount` int(11) NOT NULL DEFAULT '0',
PRIMARY KEY (`idPckg`),
UNIQUE KEY `name` (`name`),
KEY `customCount` (`customCount`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci 
```

我的表中只有一条记录。我尝试执行语句：

`DELETE FROM pckgs;`

但我得到了错误：

```
ERROR 1054 (42S22): Unknown column 'packOnly' in 'where clause' 
```

这有点奇怪，因为我的简单查询中没有任何 where 子句，而且整个数据库中没有像 packOnly 这样的列。我要删，怎么办？我无法重新启动服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:32:32.230

可能是**表上设置了触发器，**或者您正在执行错误的查询。请记住，服务器没有说谎。`:D`

**触发器**是*邪恶*的！

# perl - 使用 Perl 拆分数组中的循环

> ID：14582767
> 
> 赞同：0
> 
> 时间：2013-01-29T12:21:43.597
> 
> 标签：perl

使用`split`数组中的值。

```
($field[1],
$field[2],
$field[3],
$field[4],
$field[5]) = split(",", $line); 
```

我读了一个文件。

使用，使用数组`split`获取分隔符之后的每个值。`,`

每行有五个文件，所以你可以想象，我想在每次循环迭代中输入一行。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:30:59.463

你可以这样做：

```
while (<$fh>){
  my @tmp;
  @tmp = split(/,/,$line);
  warn "Less than 5 items on a line: $line\n" if scalar(@tmp) != 5;

} 
```

或者您可以使用[Text::CSV](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)来读取文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:41:21.493

```
while ($line = < F >)
 {
 @clpData= split(/,/, $line);

 print "@clpData[9]\n";
 } 
```

# c# - 使用 runat="server" 验证视图状态 MAC 失败

> ID：14582771
> 
> 赞同：1
> 
> 时间：2013-01-29T12:21:47.950
> 
> 标签：c#, javascript, asp.net, .net

**Javascript**

```
var form = document.getElementById('date_budget');
pop('', 'exp_upd', '95', '80');
form.action = "test.aspx";
form.target = 'exp_upd';
form.submit(); 
```

**HTML**

```
<form id="date_budget" name="date_budget" method="post">
    <table>
    <tr>
        <!--#include file="zone.inc" -->
        <td id='mlodg_loc'><select name="loc" id="loc">
                <option value="Select Location">Select Location</option>
            </select></td>
        <td>
            <select name="month" id="month">    
                <option value="1">1</option>
            </select>
        </td>
        <td>
            <select name="year" id="year">
                <option value="2013">2013</option>
            </select>
        </td>
    </tr>
    </table>
</form> 
```

上面的代码打开了一个弹出窗口，但是当我通过添加 runat 属性更改 html 时，我收到“Validation of viewstate MAC failed”，以及一些额外的垃圾。修改后的html如下

```
<form id="date_budget" name="date_budget" method="post" runat="server">
    <table>
        <tr>
            <!--#include file="zone.inc" -->
        <td id='mlodg_loc'><select name="loc" id="loc" runat="server">
            <option value="Select Location">Select Location</option>
            </select></td>
            <td>
                <select name="month" id="month" runat="server"> 
                <option value="1">1</option>
                </select>
            </td>
            <td>
                <select name="year" id="year" runat="server">
                <option value="2013">2013</option>
                </select>
            </td>
        </tr>
    </table>
</form> 
```

是否有任何解决方法可以同时使用 runat 服务器和在 JS 中使用相同的元素，而不使用那些 asp 标签，就像`<%= hidBT.ClientID %>`我不希望以任何其他方式一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:29:58.113

1.  尝试将其添加`<pages enableViewStateMac="false">`到您的**web.config**中（或）

2.  尝试将其更改 `<form id="date_budget" name="date_budget" method="post">`为

    这 `<form id="date_budget" name="date_budget" runat="server">`

    **它不应该指定方法或动作**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:23:00.633

您可以尝试在控件或 @Page 指令中设置 ClientIDMode="Static"。这将使表单的 id 保持为“date_budget”。

Otherwise if you don't need the ViewState on the page, then you can disable it in the @Page directive using EnableViewState="false".

# python - 在appengine（python）上获取url后释放内存的最佳实践

> ID：14582773
> 
> 赞同：3
> 
> 时间：2013-01-29T12:21:49.890
> 
> 标签：python, google-app-engine

我的问题是如何最好地释放内存来响应 appengine 上的异步 url 获取需求。这是我在python中基本上做的事情：

```
rpcs = []

for event in event_list:
    url = 'http://someurl.com'
    rpc = urlfetch.create_rpc()
    rpc.callback = create_callback(rpc)
    urlfetch.make_fetch_call(rpc, url)
    rpcs.append(rpc)

for rpc in rpcs:
    rpc.wait() 
```

在我的测试场景中，它针对 1500 个请求执行此操作。但是我需要一个架构来在很短的时间内处理更多的事情。

然后是回调函数，将任务添加到队列中处理结果：

```
def event_callback(rpc):
    result = rpc.get_result()
    data = json.loads(result.content)
    taskqueue.add(queue_name='name', url='url', params={'data': data}) 
```

我的问题是，我做了这么多并发 RPC 调用，以至于我的实例的内存崩溃：**“在服务 975 个请求后，超过了 159.234 MB 的软私有内存限制”**

我已经尝试了三件事：

```
del result
del data 
```

和

```
result = None
data = None 
```

我在回调函数之后手动运行了垃圾收集器。

```
gc.collect() 
```

但是在回调函数将任务添加到队列后似乎没有直接释放内存 - 因此实例崩溃。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:22:59.377

错误的做法：将这些 url 放入（放置）队列，将其速率提高到所需值（默认值：5/秒），并让每个任务处理一个 url-fetch（或其中的一组）。请注意，安全限制为 3000 次 url-fetch-api-calls/分钟（一个 url-fetch 可能使用多个 api-call）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:23:34.267

将任务队列也用于 urlfetch，扇出并避免耗尽内存，注册命名任务并将 event_list 光标提供给下一个任务。您可能希望在这种情况下获取+处理，而不是为每个进程注册新任务，特别是如果进程还包括数据存储写入。

我还发现 ndb 可以让这些异步解决方案更加优雅。

查看 Brett Slatkins 关于[可扩展应用程序](http://www.google.com/events/io/2009/sessions/BuildingScalableComplexApps.html)和[管道](http://www.youtube.com/watch?v=zSDC_TU7rtc)的演讲。

# java - 原始硬核性能，对象的 ArrayList 与 hashset 比较

> ID：14582779
> 
> 赞同：0
> 
> 时间：2013-01-29T12:22:19.170
> 
> 标签：java, android, performance, arraylist, hashset

我有一个不占用大量内存的 ArrayList，它只存储两个字段，

```
 public class ExampleObject{

 private String string;
 private Integer integer;

 public ExampleObject(String stringInbound, Integer integerInbound){
 string = stringInbound;
 integer = integerInbound;
 } 
```

我将用这些对象填充一个 ArrayList

```
 ArrayList<ExampleObject> = new ArrayList<ExampleObject>(); 
```

对于原始的硬核性能，为此使用哈希集会更好吗？如果我的 ArrayList 增长到具有数百个索引的大量项目，我会注意到对象的 ArrayList 和哈希集之间存在巨大差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:28:03.217

尽管它们都是[Collection](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)，但我建议您阅读[Set](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)和[List](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)之间的区别。

它们的用途不同。因此，在考虑性能之前，请选择满足您的实施要求的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:19:13.897

这完全取决于你在做什么。数据是如何添加的？它是如何访问的？多久移除一次？

例如，在某些情况下，使用`String[]`and的并行数组可能会更好`int[]`——您可以避免集合类开销和`int`to的装箱`Integer`。取决于你在做什么，这可能真的很棒或非常愚蠢。

随着数据集变大，内存消耗会对性能产生很大影响。[几年前，IBM 的几位研究人员做了一个关于构建内存高效的 Java 应用程序](http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf)的简洁演示，每个关注性能的人都应该阅读。

# c# - C++ 如何克服钻石问题？

> ID：14582780
> 
> 赞同：0
> 
> 时间：2013-01-29T12:22:19.820
> 
> 标签：c#, c++, multiple-inheritance

我不是 C++ 人，但我不得不考虑这个问题。当我无法在 C# 中进行多重继承时，为什么在 C++ 中可以进行多重继承？（我知道钻石问题，但这不是我在这里要问的）。C++ 如何区分从多个基类继承的相同方法签名的歧义？为什么不能在 C# 中加入相同的设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:27:02.493

这是一个选择问题。C# 语言设计者 Anders Hejlsberg 选择将多重继承排除在语言之外。您可能想知道为什么...我的猜测是（1）通常不需要多重继承，（2）经常以错误的方式使用多重继承（就像许多面向对象的构造一样）以及（3）它会使语言和/或编译器和/或静态检查不必要地复杂。

CLR 本身并不阻止多重继承；因此，它在 C++.NET 中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:27:13.320

你不能在 Java 或 C# 中，因为这是语言中内置的设计决策。不管你同意与否，语言设计者认为实现的多重继承的困难，就像在 C++ 中所做的那样，不值得付出代价。

当我在 1995 年编写 C++ 时，它已经允许实现的多重继承。

早在 1995 年，Java 就做出了这个选择。出于同样的原因，C# 后来也效仿了。

我要指出的是，Java 和 C# 都允许您实现任意数量的接口。问题在于实现的多重继承。

我将把关于 C++ 如何消除实现的多重继承歧义的答案留给比我最近使用该语言的其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:32:25.413

使用虚拟继承解决了“死亡钻石”中的歧义。维基百科的文章是一个很好的解释。 [虚拟继承](http://en.wikipedia.org/wiki/Virtual_inheritance)

它也可以通过更好地设计你的类层次结构来解决。根据经验，只要您继承多个*接口*（在 C++ 中，纯抽象类），多重继承就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:49:40.917

来自[msdn.micosoft 链接](http://msdn.microsoft.com/en-us/library/ms973861.aspx)

> C++ 支持多重继承。然而，几乎所有其他现代面向对象语言，包括 Java，都选择不允许多重继承。（一些高级语言，例如 Eiffel，试图解决多重继承的问题）
> 
> 多重继承的最大问题是，当编译器需要找到虚方法的正确实现时，它会产生歧义。
> 
> 因此，为了简单起见，Java 和 C# 的创建者决定不允许多重继承。但是，还有一种替代多重继承的方法，称为接口

因此，将所有这些问题牢记在心，设计人员不允许语言中的多重继承，但语言仍然以接口等其他方式支持它。除了上述答案和链接之外，您还可以查看[为什么 c# 不支持多重继承](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/07/why-doesn-t-c-support-multiple-inheritance.aspx)

# java - 如何从易于控制和监视的 JVM 生成 JVM？

> ID：14582781
> 
> 赞同：5
> 
> 时间：2013-01-29T12:22:25.437
> 
> 标签：java, jvm

我想从 Java 类跨越一个新的 JVM 进程。

我可以使用`Runtime.getRuntime().exec(...)`，但这是一个非常低级的 api。

我正在寻找可以`Process`为我包装该 api 的更方便的东西，例如：

```
MonitoredJavaProcess javaProcess = new MonitoredJavaProcess(MyMainClass.class, "-Xmx1g");
javaProcess.getGcLogStream();
javaProcess.getHeapSizeObserver();
// ...
javaProcess.waitForShutdown(); 
```

关于我正在尝试做的事情的一些背景信息：我正在运行 JUnit 一个测试套件，它启动了一个嵌入式 Jetty 服务器并针对它运行了一些测试。这意味着经过测试的 Jetty 服务器线程和 junit 测试线程在同一个 JVM 中运行。我需要在单独的 JVM 中运行它们。我可以使用 ant 或 maven 或启动码头外部的任何东西，然后针对它运行测试套件，但对于我的简单场景来说，这听起来有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:35:13.150

也许你的方法不是正确的。也许您应该考虑使用[JMX](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)来监控您的 JVM？

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:44:41.900

你实际上想要做什么。也许您可以查看[java.lang.ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)它可能适合您的需要。

# c# - C# ProcessStartInfo 读取输出“实时”（并发）

> ID：14582794
> 
> 赞同：1
> 
> 时间：2013-01-29T12:23:08.590
> 
> 标签：c#, wpf, multithreading, process

我正在尝试编写一个控制台包装 WPF gui，它只运行选择的 .bat 文件，我希望能够“实时”查看 .bat 文件的任何输出（就像它在 cmd 中运行一样）。

我查看了 OutputDataReceived 和事件处理程序，它们附加文本然后将其发送到屏幕，但是它仍然等到进程完成，然后屏幕上才会出现任何内容。

如何让 .bat 的输出“实时”显示？

* * *

到目前为止我的代码片段（这是一种形式）：

该表单有一个按钮 ( `go`) 和一个多行文本字段 ( `textArea`)。

```
private void go_Click(object sender, EventArgs e)
{
    ExecuteCommand();
}

public void ExecuteCommand()
{

    int ExitCode;
    ProcessStartInfo ProcessInfo;
    Process Process;

    //ProcessInfo = new ProcessStartInfo("cmd.exe", "/C z:\foo.bat");
    ProcessInfo = new ProcessStartInfo(@"z:\foo.bat"); ;

    ProcessInfo.CreateNoWindow = true;
    ProcessInfo.UseShellExecute = false;

    ProcessInfo.RedirectStandardError = true;
    ProcessInfo.RedirectStandardOutput = true;

    Process = new Process();
    Process.StartInfo = ProcessInfo;

    Process.OutputDataReceived += new DataReceivedEventHandler(OutputToTextArea);

    Process.Start();

    // Start the asynchronous read of the sort output stream.
    Process.BeginOutputReadLine();

    Process.WaitForExit();

    ExitCode = Process.ExitCode;
    Process.Close();
}

private int numOutputLines = 0;
private void OutputToTextArea(object sendingProcess, DataReceivedEventArgs outLine)
{
    // Collect the sort command output. 
    if (!String.IsNullOrEmpty(outLine.Data))
    {
        numOutputLines++;

        this.AppendToTextArea("[" + numOutputLines.ToString() + "] - " + outLine.Data + Environment.NewLine);
    }
}

private void AppendToTextArea(string s)
{
    if (this.textArea.InvokeRequired)
    {
        // It's on a different thread, so use Invoke.
        this.BeginInvoke (new MethodInvoker(() => textArea.AppendText(s)));
    } else {
        textArea.AppendText(s);
    }
} 
```

我的 foo.bat 只是一个 for 循环：

```
ECHO OFF

FOR /L %%i IN (1,1,10) DO (
   echo %%i
   ping -n 2 127.0.0.1 >nul
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:56:12.480

是的，当您等待进程退出时，您当前正在阻塞主线程（即 UI 线程）`ExecuteCommand`，该进程直接从 UI 线程（在 中`go_Click`）调用。

只需启动一个新线程（或使用`ThreadPool`）（Winforms 示例）：

```
private void button1_Click(object sender, EventArgs e)
{
    ThreadPool.QueueUserWorkItem(new WaitCallback(this.ExecuteCommand));
}

public void ExecuteCommand(object state)
{
    ...
} 
```

如果您使用的是 WPF，您可能希望使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:24:49.080

如果您希望保持简单，您可以使用 /K 参数启动命令提示符并传入批处理文件。

```
string arguments = @"z:\foo.bat";

Process.Start("cmd.exe", "/K " + arguments); 
```

cmd.exe /K 打开命令提示符并运行您的 foo.bat 但仍保留在屏幕上。

# ruby-on-rails - 当种子失败时，mongoid 和 rails 的问题

> ID：14582796
> 
> 赞同：0
> 
> 时间：2013-01-29T12:23:19.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, mongoid

首先是状态：

```
class Status
  include Mongoid::Document
  field :name, type: String
  has_one :Apis
  validates_presence_of :name
end 
```

还有APIS：

```
class Apis
  include Mongoid::Document
  field :name, type: String
  field :description, type: String, default: ''
  field :create_at, type: DateTime, default: ->{ DateTime.now }

  belongs_to :Status
  validates_presence_of :name
end 
```

种子文件：

```
# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).
#
# Examples:
#
#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])
#   Mayor.create(name: 'Emanuel', city: cities.first)
if Status.count == 0 
    Status.create({name: "active"})
    Status.create({name: "inactive"})
    Status.create({name: "pending"})
    Status.create({name: "rejected"})
    Status.create({name: "sending"})
    Status.create({name: "contentItemPending"})
    Status.create({name: "contentItemListed"})
    Status.create({name: "staticItemListed"})
    Status.create({name: "requestItemPending"})
end

if Apis.count == 0 
    active_status = Status.find_by({name:"active"})
    youtub = Apis.new({name:"youtube", description:"Youtube API Used youtube_it gem"})
    youtub.build_Status(active_status.id)
    youtub.save!
    itunes = Apis.new({name:"itunes", description:"ITUNES API Used itunes gem"})
    itunes.build_Status(active_status.id)
    itunes.save!
    factual = Apis.new({name:"factual", description:"FACTUAL API Used FACTUAL gem"})
    factual.build_Status(active_status.id)
    factual.save!
end 
```

现在我得到这个错误：

```
fastwings:Feelike-Agent/ (master✗) $ rake db:seed                                                                                   [14:21:41]
rake aborted!
uninitialized constant Statu
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:230:in `block in constantize'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:229:in `constantize'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/activesupport-3.2.9/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.19/lib/mongoid/relations/metadata.rb:602:in `klass'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.19/lib/mongoid/relations/builders.rb:68:in `block in builder'
/home/fastwings/Projects/Ruby/Feelike-Agent/db/seeds.rb:23:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.19/lib/mongoid/railties/database.rake:13:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

现在我不知道我在这里做错了什么在这里不起作用？？？

以及它在第 23 行的 make 意味着 youtube.build_Status(active_status.id) 到未初始化的常量Statu 为什么？？？

好的，伙计们，我的错误是：belongs_to :Status , class_name: 'something' 和 has_one :Apis ,class_name:'something' 并且播种机需要像这样添加：

```
Mongoid.purge!
if SystemStatus.count == 0 
    SystemStatus.create!({name: "active"})
    SystemStatus.create!({name: "inactive"})
    SystemStatus.create!({name: "pending"})
    SystemStatus.create!({name: "rejected"})
    SystemStatus.create!({name: "sending"})
    SystemStatus.create!({name: "contentItemPending"})
    SystemStatus.create!({name: "contentItemListed"})
    SystemStatus.create!({name: "staticItemListed"})
    SystemStatus.create!({name: "requestItemPending"})
end

if Providers.count == 0 
    active_status = SystemStatus.find_by({name:"active"})
    Providers.create!({name:"youtube", description:"Youtube API Used youtube_it gem",status: active_status})
    Providers.create!({name:"itunes", description:"Youtube API Used youtube_it gem",status: active_status})
    Providers.create!({name:"youtube", description:"Youtube API Used youtube_it gem",status: active_status})
    Providers.create!({name:"unknown", description:"Rest service conntection",status: active_status})
end 
```

这里出了什么问题，它不知道我要上什么课以及我如何输入数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:04:52.033

除了 s 不见了，这就是它的样子，我不确定 Status.count 是否会工作，我认为你需要使用 Status.all.count，另外你应该使用 Status.create！一声巨响（！）。如果有错误，它将引发异常。如果你在没有爆炸的情况下使用它，它会返回 false 但你不会知道有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T02:05:57.610

您可能必须为您的状态模型设置自定义变形器。启动控制台并尝试运行`"status".singularize`以查看您得到的结果。

# objective-c - 为什么静态分析器会在此代码中警告垃圾值？

> ID：14582799
> 
> 赞同：1
> 
> 时间：2013-01-29T12:23:25.163
> 
> 标签：objective-c, xcode, static-analysis

对于 Apple LLVM 4.2 (XCode 4.6)，静态分析器在此类的“更新”方法中警告“'>' 的左操作数是垃圾值”：

# 测试.h

```
#import <Foundation/Foundation.h>

typedef struct {
    float x;
} TestInnerStruct;

typedef struct {
    TestInnerStruct innerStruct;
    int value;
} TestOuterStruct;

@interface Test : NSObject {
    TestOuterStruct outerStruct;
}

@end 
```

# 测试.m

```
#import "Test.h"

@implementation Test

- (id) init {
    if (self = [super init]) {
        outerStruct.value = 1;
    }
    return self;
}

- (void) update {
    outerStruct.innerStruct = (TestInnerStruct){0.0f};
    if (outerStruct.value > 0) {
        NSLog(@"Value greater than zero");
    }
}

@end 
```

这是一个人为的类，通过将真实类减少到重现此静态分析器警告所需的最低限度而制成。在真正的类中，使用嵌套结构是有充分理由的。

通过代码的哪条路径会导致该操作数成为垃圾值？还是静态分析器感到困惑？

编辑澄清：不仅仅是分析器在考虑 [super init] 返回 nil 的情况。我知道这是因为警告在注释掉更新方法的第一行时消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:30:34.597

如果 self = [super init] 成功，则 outerStruct.value 仅设置为 1。如果不是（这当然是一个非常罕见的事件，但有可能，否则 if 将不是必需的），该值没有设置，而是垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:45:32.187

Eric 是对的，这显然是一个编译器问题：如果将 TestOuterStruct 的定义更改为

```
typedef struct {
    int value;
    TestInnerStruct innerStruct;
} TestOuterStruct; 
```

即，如果这两个元素互换，则代码编译不会出错。

# regex - 使用多级正则表达式重写nginx文件

> ID：14582800
> 
> 赞同：2
> 
> 时间：2013-01-29T12:23:26.090
> 
> 标签：regex, nginx

我正在使用 nginx 开发文件服务器。为了访问服务器文件，我需要在每个目录之后附加一个字符串。

**示例：** 我的网址是

```
http://desk09/1.2/junior/kal12/pnr.doc 
```

我需要将其更改为名为的本地文件

```
../junior@1.2/kal12@1.2/pnr.doc 
```

我可以单独使用 nginx 配置文件来做到这一点，如下所示：

```
location ~ "^/([1-9]{1}\.[0-9]{1}/(.*)" {
    root /usr/home/fs/......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:33:16.117

我更改了答案以使其递归工作：

首先从头开始抛出版本号并将其添加到第一个目录

```
location ~ "^/([0-9]{1}\.[0-9]{1})/([a-zA-Z0-9]+)/(.*\.doc)$" {
    rewrite     .*  /$2@$1/$3;
} 
```

所以现在网址：

```
/1.2/junior/many_sub_dir_here/test.doc    ->   /junior@1.2/many_sub_dir_here/test.doc 
```

现在`location`指令 belove 将用作递归位置（因此您已标记 nginx 以允许递归位置调用）：

```
location ~ "^(/[a-zA-Z0-9]+@)([0-9]{1}\.[0-9]{1})/(([a-zA-Z0-9]+@[0-9]{1}\.[0-9]{1}/)*)([a-zA-Z0-9]+)/(.*\.doc)$" {
    rewrite .* /$1$2/$3$5@$2/$6;        
} 
```

对于您的网址，它将按以下方式工作

```
/junior@1.2/x1/x2/x3/test.doc           -->   /junior@1.2/x1@1.2/x2/x3/test.doc
  $1 = /junior@
  $2 = 1.2
  $3 = 
  $4 = 
  $5 = x1
  $6 = x2/x3/test.doc

/junior@1.2/x1@1.2/x2/x3/test.doc       -->   /junior@1.2/x1@1.2/x2@1.2/x3/test.doc
  $1 = /junior
  $2 = 1.2
  $3 = x1@1.2/
  $4 = x1@1.2/
  $5 = x2
  $6 = x3/text.doc

/junior@1.2/x1@1.2/x2@1.2/x3/test.doc   -->   /junior@1.2/x1@1.2/x2@1.2/x3@1.2/test.doc
  $1 = /junior@
  $2 = 1.2
  $3 = x1@1.2/x2@1.2/
  $4 = x2@1.2/
  $5 = x3
  $6 = test.doc 
```

最后一个 url 将不再匹配上面`location`块中的正则表达式，所以这里我们提供了这样的最终位置块：

```
location ~ ".*(@[0-9]{1}\.[0-9]{1})/[^@/]+\.doc$" {
    root root /usr/home/fs;
    try_files $uri =404;
} 
```

# android - Java android，如何知道短信是否发送成功？

> ID：14582801
> 
> 赞同：0
> 
> 时间：2013-01-29T12:23:29.293
> 
> 标签：android

如何知道短信是否发送成功？

我检查了文档，但没有找到解决问题的方法...我怎么知道？

```
//---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent",Toast.LENGTH_SHORT).show();
                        getServerData("http://site.com","id",Id);

                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "No service", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.STATUS_ON_SIM_UNSENT:
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "Message unsent", Toast.LENGTH_SHORT).show();
                        break;

                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.STATUS_ON_SIM_SENT :
                        System.exit(0);
                        Toast.makeText(getBaseContext(), "Message sent", Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        //Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                       // Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                        break;                      
                }
            }
        }, new IntentFilter(DELIVERED));        

        if(isMobileAvailable(getApplicationContext()) == true){
            Toast.makeText(getApplicationContext(), "Reseau mobile: OK !", Toast.LENGTH_LONG).show();

             ArrayList<String> parts = (ArrayList<String>) splitInChunks(message, 120);
               for (String str : parts) {
                   SmsManager sms = SmsManager.getDefault();
                   sms.sendTextMessage(phoneNumber, null, str, null, null);
              }
               getServerData("http://site.com","id",Id);

        }else
            Toast.makeText(getApplicationContext(), "Reseau mobile: NOK !", Toast.LENGTH_LONG).show();
    } 
```

我只是想知道我的短信是否成功发送...谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:58:19.553

我认为你应该试试这个内容观察者代码..它密切关注味精的天气内容是否发生了变化..

```
private class MyContentObserver extends ContentObserver {
    ContentValues values = new ContentValues();
    int threadId;

    public MyContentObserver() {
        super(null);
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Uri uriSMSURI = Uri.parse("content://sms");
        Cursor cur = getBaseContext().getContentResolver().query(uriSMSURI, null, null, null, null);
        cur.moveToNext();
        String content = cur.getString(cur.getColumnIndex("body"));
        String contentid = cur.getString(cur.getColumnIndex("_id"));

        Log.v(TAG, "content: " + content+"id:"+contentid);
    }

    @Override
    public boolean deliverSelfNotifications() {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:20:08.197

添加到@Aexin

```
Inbox = "content://sms/inbox"
Failed = "content://sms/failed"
Queued = "content://sms/queued"
Sent = "content://sms/sent"
Draft = "content://sms/draft"
Outbox = "content://sms/outbox"
Undelivered = "content://sms/undelivered"
All = "content://sms/all"
Conversations = "content://sms/conversations" 
```

数据库字段

```
0: _id
1: thread_id
2: address
3: person
4: date
5: protocol
6: read   
7: status
8: type
9: reply_path_present
10: subject
11: body
12: service_center
13: locked 
```

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/provider/Telephony.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/provider/Telephony.java)

@舒蒂

[http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage(java.lang.String, java.lang.String, java.lang.String, android.app.PendingIntent, android.app。待定意向）](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)

很明显，如果您必须进行回调，则必须提供将被广播的 PendingIntent。

正如您在代码中看到的： `sms.sendTextMessage(phoneNumber, null, str, null, null);`

[http://developer.android.com/reference/android/app/PendingIntent.html](http://developer.android.com/reference/android/app/PendingIntent.html)

尝试什么

`Intent intent = new Intent();`

`pi = PendingIntent.getBroadcast(Context context, int requestCode, Intent intent, int flags);`

`sms.sendTextMessage(phoneNumber, null, str, pi, null);`

`sms.sendTextMessage(phoneNumber, null, str, pi, pi);`

反正

`android.provider.Telephony.SMS_RECEIVED`检查您是否正确（区分大小写）并尝试理解这一点，并非每个广播都可以编程注册，反之亦然。

`<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>`

# asp.net - ASP.NET MVC4：IQueryable 不包含“添加”的定义

> ID：14582805
> 
> 赞同：1
> 
> 时间：2013-01-29T12:23:40.863
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4, iqueryable

我试图制作一个 MVC 新闻系统。我从使用复数教程开始，该教程用于创建一个有员工的部门。我改变了想法以适应自己的目的，将部门改为“类别”，将员工改为“新闻邮报”。这一切都很好，但现在我想删除类别，因为我的新闻系统不需要类别。但是当我这样做时，我无法使用实体框架添加到数据库中。

我有一个数据源接口，如下所示：

**INewMvcSiteDataSource**

```
public interface INewMvcSiteDataSource
{
    IQueryable<NewsPost> NewsPosts { get; }

    void Save();
} 
```

这是由我的 DB Context 类继承的：

**新MvcSiteDb**

```
public class NewsMvcSiteDb : DbContext, INewMvcSiteDataSource
{
    public NewsMvcSiteDb() : base("DefaultConnection")
    {
    }

    public DbSet<NewsPost> NewsPosts { get; set; }

    IQueryable<NewsPost> INewMvcSiteDataSource.NewsPosts
    {
        get { return NewsPosts; }
    }

    public void Save()
    {
        SaveChanges();
    }
} 
```

然后我想在控制器中使用它来向数据库添加新闻：

**新闻控制器**

```
var newsPost = new NewsPost()
                    {
                        Subject = newsModel.Subject,
                        Content = newsModel.Content,
                        ImagePath = newsModel.ImagePath
                    };
_db.NewsPosts.Add(newsPost);
_db.Save(); 
```

但这是 ADD 失败并显示消息的地方：*“System.Linq.IQueryable”不包含“Add”的定义，并且找不到接受“System.Linq.IQueryable”类型的第一个参数的扩展方法“Add” （您是否缺少 using 指令或程序集引用？）*

现在正如错误所说，它是由使用 IQueryable 引起的，但我不知道该怎么做。

你们能帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:02:32.503

如果您不介意通过界面公开 DbSet（有些人不喜欢 ORM 渗入应用程序），您应该能够执行以下操作：

```
public interface INewMvcSiteDataSource
{
    DbSet<NewsPost> NewsPosts { get; }

    void Save();
} 

public class NewsMvcSiteDb : DbContext, INewMvcSiteDataSource
{
    public NewsMvcSiteDb() : base("DefaultConnection")
    {
    }

    public DbSet<NewsPost> NewsPosts { get; set; }

    public void Save()
    {
        SaveChanges();
    }
} 
```

# php - 如何显示选中的复选框并更新数据库

> ID：14582807
> 
> 赞同：2
> 
> 时间：2013-01-29T12:23:44.893
> 
> 标签：php, mysql, sql-update, checkbox

我的页面上有 80 个复选框；这些复选框属于产品的一些选项..

我像这样存储它们

```
<input type="checkbox" name="options[]" value="<?php echo $row['value]?>"/> 
```

**数据库结构**

```
**Product_id** | **Option_id**
     1                 16
     1                 45
     1                 68
     1                 78
     1                 80 
```

问题是，我应该如何更新选项？当用户去更新页面时，用户应该能够看到选中的选项和未选中的选项。我怎样才能显示选中的选项？

我也将选项值存储在数据库中，就像这样

```
**id** | **Option_id** |
   1         16
   2         45
   3         68
   4         78      
   ....
   ....
   80 
```

非常感谢您的帮助，对不起我的英语..

祝你今天过得愉快

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:40:12.997

**在前端显示它们已选中**

假设您在数组中有产品选项的结果，称为`$checked`

在循环检查以打印它们时使用它

```
<input type="checkbox" name="options[]" value="<?php echo $row['value']?>" <?php if(in_array($row['value'], $checked)){ echo 'checked="checked"'; }?>/> 
```

**对于更新，有很多方法，最简单的一种是**

删除所有选项，然后添加新选中的选项

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:36:06.393

```
How can i show checked options? 
```

您可以使用`checked="checked"`属性来选中复选框。

```
how should i update options? 
```

假设您更新了属于产品 1 的选项。您需要做的是删除现有选项并重新插入新选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:38:07.187

你应该使用这样的数据库结构

`**User_id** | **Product_id** | **Option_id** | **State**`

用于存储选项值（因为每个选项都与特定用户和产品相关联），并在呈现复选框时使用数据库中的复选框状态值：

`<input type="checkbox" name="options[]" value="<?= ($row['State] ? "checked": "unchecked") ?>"/>`

数据库更新是指根据复选框的实际状态通过在复选框更改事件上发送 AJAX 请求来执行服务器端 UPDATE 查询，或者在整个表单提交后发送 POST 请求。

# c# - 删除表或删除所有数据，以及服务器上基于时间的事件如何

> ID：14582810
> 
> 赞同：0
> 
> 时间：2013-01-29T12:23:49.803
> 
> 标签：c#, asp.net, .net, sql-server, vb.net

在 sql server 中我需要创建一个存档系统，在每个月底我想将上个月发布的所有行移动到以月份名称命名的表中，但还要首先从该目标表中删除所有现有数据（因为你看到这个一年前发布的旧数据，所以我不再需要它了）。

我的问题：

1-这样做的更好方法是什么，删除表本身，然后使用 select-into 语句创建一个新表，或者使用删除语句删除所有行，然后从原始表中插入新行。（我认为这可能会产生巨大的影响）

2-我如何自动执行该操作，是否有任何基于时间的触发器？或者 asp.net 或服务器中的某些东西可以做到这一点？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:29:10.767

1.  使用 TRUNCATE TABLE 语句，这会从表中删除所有内容但保留结构

2.  您可以使用 SQL 代理在 SQL Server 中设置作业以定期运行该作业

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:40:27.343

您还可以在 Windows 中创建一个 cron/scheduler，它在月底运行并执行一个完成您工作的过程。

# javascript - 在 SVG 路径的中间显示 SVG 图像

> ID：14582812
> 
> 赞同：1
> 
> 时间：2013-01-29T12:23:52.157
> 
> 标签：javascript, svg, d3.js, force-layout

我有一个具有不同大小节点的力有向图。我想在连接两个节点的每条路径的中间显示一个自定义图标。从 d3 示例中，我找到了在节点内显示图像的方法。但是，当我在路径上尝试相同的技术时，不会显示图像。

```
var path = svg.append("svg:g").selectAll("path").data(force.links());

var pathEnter = path.enter().append("svg:path");

pathEnter.attr("class", function(d) {
    return "link " + d.target.type;
})

pathEnter.append("svg:g").append("image")
    .attr("xlink:href","http://127.0.0.1:8000/static/styles/images/add.png")
    .attr("x",0).attr("y",0).attr("width",12).attr("height", 12)
    .attr("class", "type-icon"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:06:16.613

我想在提问之前我需要多一点耐心。我解决问题的方法是：

```
var icon = svg.append("svg:g").selectAll("g")
.data(force.links()).enter().append("svg:g");

icon.append("image").attr("xlink:href","imagePath")
  .attr("x", -20)
  .attr("y", -2)
  .attr("width", 12).attr("height", 12)
        .attr("class", "type-icon"); 
```

然后在刻度函数中：

```
 icon.attr("transform", function(d) {
            return "translate(" +((d.target.x+d.source.x)/2) + "," +
                ((d.target.y+d.source.y))/2 + ")";
        }); 
```

得到两个节点之间的中心点。

# calendar - 如何使用 MonoDroid 添加日历项目？

> ID：14582814
> 
> 赞同：0
> 
> 时间：2013-01-29T12:23:55.507
> 
> 标签：calendar, xamarin.android

我正在尝试将事件添加到 android 设备上的日历中，并且我正在使用 MonoDroid。我在 Java 中找到了以下示例：[http ://www.androidcookbook.com/Recipe.seam?recipeId=3852](http://www.androidcookbook.com/Recipe.seam?recipeId=3852)

我试图将第一个代码片段翻译成 C#，但我无法设置“beginTime”和“endTime”字段，尤其是从 Calendar.getTimeInMillis() 翻译成 System.DateTime。这是我的代码：

```
DateTime epoch = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);
TimeSpan startSpan = fromDate - epoch;
TimeSpan endSpan = toDate - epoch;

Intent intent = new Intent(Intent.ActionEdit);
intent.SetType("vnd.android.cursor.item/event");
intent.PutExtra("beginTime", startSpan.TotalMilliseconds);
intent.PutExtra("endTime", endSpan.TotalMilliseconds); 
```

结果是 from 和 to 字段填充了今天的日期和长度为一小时的时间段。

如何正确设置活动的开始/结束时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:53:17.077

我过去使用过一种效果很好的辅助方法。这是一个应该正确设置日期和时间的快速示例。

```
protected override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);

    // Set our view from the "main" layout resource
    SetContentView(Resource.Layout.Main);

    AddEvent(this, "Sample Event", DateTime.UtcNow, DateTime.UtcNow.AddHours(5));
}

public void AddEvent(Context ctx, String title, DateTime start, DateTime end)
{
    var intent = new Intent(Intent.ActionEdit);
    intent.SetType("vnd.android.cursor.item/event");
    intent.PutExtra("title", title);
    intent.PutExtra("beginTime", TimeInMillis(start));
    intent.PutExtra("endTime", TimeInMillis(end));
    intent.PutExtra("allDay", false);
    ctx.StartActivity(intent);
}

private readonly static DateTime jan1970 = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);

private static Int64 TimeInMillis(DateTime dateTime)
{
    return (Int64)(dateTime - jan1970).TotalMilliseconds;
} 
```

# c# - 嵌套模型上的 nullReferenceException

> ID：14582816
> 
> 赞同：1
> 
> 时间：2013-01-29T12:24:02.500
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我需要帮助理解为什么我在这里得到一个空对象引用：

我有 2 个模型：

```
public class loadViewModel
{
    public importacaoConfig importacaoConfig { get; set; }
}

public class importacaoConfig
{
    public List<DocTypeModel> tipo { get; set; }
} 
```

我是我的控制器，我正在将一个列表传递给模型：

```
gedaiapp.Models.loadViewModel model = new gedaiapp.Models.loadViewModel();    
model.importacaoConfig.tipo = obj; -> Here obj is of type List<DocTypeModel> 
```

这给了我：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

我已经检查过了，obj 列表有 3 个元素。这里哪个引用为空？我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:27:45.130

问题是这样的：

`model.importacaoConfig.tipo`

你**还没有实例化** `importacaoConfig`，所以它是空的（因此你为什么会在该行得到异常。

添加此行以实例化它（在您现有的两条线之间）：

```
model.importacaoConfig = new importacaoConfig(); 
```

所以你的控制器将是：

```
gedaiapp.Models.loadViewModel model = new gedaiapp.Models.loadViewModel();
model.importacaoConfig = new importacaoConfig();    
model.importacaoConfig.tipo = obj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:27:34.037

您应该真正检查调试器，但我会假设以下内容为空：

```
model.importacaoConfig 
```

因为您在创建`loadViewModel`.

您需要有一个执行以下操作的构造函数：

```
public loadViewModel()
{
    importacaoConfig = new importacaoConfig();
} 
```

我还考虑为类赋予不同的变量名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:27:58.267

尝试

```
importacaoConfig.tipo=new List<DocTypeModel>(); 
```

你还没有初始化`tipo`

# javascript - 为什么我不能拖动，也不能调整我的数据表的大小

> ID：14582818
> 
> 赞同：1
> 
> 时间：2013-01-29T12:24:04.903
> 
> 标签：javascript, jquery, google-maps, google-visualization

在函数 LoadXml() 中，我使用谷歌可视化表 api 创建表；我把它放在一个 div 中。另外我还有另一个 div，它用谷歌地图占据了我浏览器的整个页面！

我想用表格拖动和调整我的 div 的大小，我认为它应该可以工作 - 但它没有。

```
 <html>
        <head> 
        <style>
          #wrapper 
          {
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;

          }

        #table 
        { position: absolute; 
        top: 10px; 
        left: 10px; 
        width: 150px; height: 150px;

         }

      </style>

 <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
    google.load('visualization', '1', {packages: ['table']});
    </script>
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=AIzaSyBwQlpVsFgaZ2EjeUSeQiSICP1UwPV9o9c" type="text/javascript"></script>
    <script src="http://gmaps-utility-library.googlecode.com/svn/trunk/markermanager/release/src/markermanager.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />

    <script type="text/javascript">

  $(function() {
$( "#table" ).resizable();
});

 $(function() {    $( "#table" ).draggable();  });

    function initialize() 
    {
        if (GBrowserIsCompatible()) 
        {
            map = new GMap2(document.getElementById("wrapper"));
            map.setCenter(new GLatLng(42.143365, 24.751032), 13);
            map.setUIToDefault();

        }
    } 

    function loadXMLDoc(l)
    {    
        arrayMyAddresses = [];  
        intPNum=l;
        s=l;

        xmlhttp.onreadystatechange = function() 
        { 
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                //alert(xmlhttp.responseText);
                var xmlObj = xmlhttp.responseXML;   
                var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

                //parsing data 

                //create array with name rec to hol our data for the datatable
                var rec = new Array();

                tblTst = google.visualization.arrayToDataTable(rec);

                visual = new google.visualization.Table(document.getElementById('table'));

            }

        }

// making ajax call to the server 

    }

</script>
</head>
<body onload= "loadXMLDoc(1),initialize();">
<div id = "wrapper"> </div>
<div id = "table" ></div>

</body>
</html> 
```

# magento - 当通过PayPal付款时如何阻止magento将付款状态设置为“已完成”

> ID：14582824
> 
> 赞同：0
> 
> 时间：2013-01-29T12:24:31.607
> 
> 标签：magento, paypal, status

在通过 PayPal 付款后，有没有办法阻止 magento 将订单状态设置为“已完成”？问题是我想在我开始使用服务时发送发票，这在有人之前付款时是不可能的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:33:22.200

如果我正确理解您的问题，请尝试下一步：

在 Magento PayPal 设置中，找到“付款操作”字段，并将其设置为“授权”

这个意思：

> 付款仅在 PayPal 系统一侧获得授权，并且仅在您商店的后端创建订单。商店管理员需要登录到 PayPal 网站上的商家帐户并捕获交易。

因此，在下订单和用户支付交易后，您商店的状态将保持在“待处理”或“处理中”。之后，您可以生成发票并将其发送给客户，然后转到您的 PayPal 并完成订单。

来源：http: [//www.magentocommerce.com/knowledge-base/entry/setting-up-paypal-for-your-magento-store/](http://www.magentocommerce.com/knowledge-base/entry/setting-up-paypal-for-your-magento-store/)

# android - 滚动自定义 ListView 时出错

> ID：14582825
> 
> 赞同：0
> 
> 时间：2013-01-29T12:24:36.900
> 
> 标签：android, scroll, custom-lists, dynamic-content

我正在创建应用程序，其中我在自定义 ListView 中显示数据......数据来自 XMLHandler。但是，当我滚动列表时，它给出了空指针错误.....

有六个项目来自 xmlHandler 一次只有 3 个项目显示在屏幕上....但是，当我滚动 getView() 时应该调用剩余的 3 个项目......但是，它要求还有一项......因此它给出了空指针......我不知道该怎么做......请帮助我......谢谢你的建议。

****抱歉，我忘记在我的问题中添加 getview()，但它在我的实际代码中。我已经编辑了我的代码......请查看此代码......* *****

```
public class SearchedRouteAdapter extends ArrayAdapter<BusGetSetters> {
    private final Activity activity;
    private List<BusGetSetters> listBusGS = Utils.arrayBusGetSetRoutes;
    String routeID, routeName, travelsName, busType, depTime, arrTime,
            seatsAvail, sellFare, ResCode;
    BusGetSetters searchBus = new BusGetSetters();

    public SearchedRouteAdapter(Activity activity, List<BusGetSetters> objects) {
        super(activity, R.layout.route_list_item, objects);
        this.activity = activity;
        this.listBusGS = objects;
    }

    @SuppressWarnings("deprecation")
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        RouteSearchView hsView = null;

              if (rowView == null) {
            // Get a new instance of the row layout view
            LayoutInflater inflater = activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.route_list_item, null);
            Log.v("Log position", "2");

            // Hold the view objects in an object,
            // so they don't need to be re-fetched
            hsView = new RouteSearchView();
            hsView.routeSVname = (TextView) rowView
                    .findViewById(R.id.routeName);
            hsView.routeSVtravelsName = (TextView) rowView
                    .findViewById(R.id.travelsName);
            hsView.routeSVbusType = (TextView) rowView
                    .findViewById(R.id.busType);
            hsView.routeSVdepTime = (TextView) rowView
                    .findViewById(R.id.depTime);
            hsView.routeSVarrTime = (TextView) rowView
                    .findViewById(R.id.arrTime);
            hsView.routeSVseatsAvail = (TextView) rowView
                    .findViewById(R.id.seatsAvail);
            hsView.routeSVsellFare = (TextView) rowView
                    .findViewById(R.id.sellFare);
            hsView.routeSVcmdCheck = (Button) rowView
                    .findViewById(R.id.cmdCheck);
            // Cache the view objects in the tag,
            // so they can be re-accessed later
            Log.v("Log position", "3");
            rowView.setTag(hsView);

        } else {
            hsView = (RouteSearchView) rowView.getTag();
        }
        // Transfer the stock data from the data object
        // to the view objects
        searchBus = listBusGS.get(position);

            routeID = searchBus.getRoute_id().toString();
            routeName = searchBus.getService_name().toString();
            travelsName = searchBus.getTravels_name().toString();
            busType = searchBus.getBus_type().toString();
            depTime = searchBus.getDeparture_time().toString();
            arrTime = searchBus.getArival_time().toString();
            seatsAvail = searchBus.getSeats_available().toString();
            sellFare = searchBus.getSell_fare().toString();

            hsView.routeSVname.setText(routeName);
            hsView.routeSVtravelsName.setText(travelsName);
            hsView.routeSVbusType.setText(busType);
            hsView.routeSVdepTime.setText(depTime);
            hsView.routeSVarrTime.setText(arrTime);
            hsView.routeSVseatsAvail.setText(seatsAvail);
            hsView.routeSVsellFare.setText(sellFare);

        }

        return rowView;
    }
protected static class RouteSearchView {

        protected TextView routeSVname;
        protected TextView routeSVtravelsName;
        protected TextView routeSVbusType;
        protected TextView routeSVdepTime;
        protected TextView routeSVarrTime;
        protected TextView routeSVseatsAvail;
        protected TextView routeSVsellFare;
        protected Button routeSVcmdCheck;
    }
} 
```

以下是 Logcat 输出：

```
02-01 15:59:22.852: E/AndroidRuntime(1964): FATAL EXCEPTION: main
02-01 15:59:22.852: E/AndroidRuntime(1964): java.lang.NullPointerException
02-01 15:59:22.852: E/AndroidRuntime(1964):     at com.demo.busbooking.SearchedRouteAdapter.getView(SearchedRouteAdapter.java:107)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.AbsListView.obtainView(AbsListView.java:1430)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.ListView.makeAndAddView(ListView.java:1745)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.ListView.fillDown(ListView.java:670)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.ListView.fillFromTop(ListView.java:727)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.ListView.layoutChildren(ListView.java:1598)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.AbsListView.onLayout(AbsListView.java:1260)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.View.layout(View.java:7175)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.View.layout(View.java:7175)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.View.layout(View.java:7175)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.View.layout(View.java:7175)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.os.Looper.loop(Looper.java:123)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at java.lang.reflect.Method.invoke(Method.java:507)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-01 15:59:22.852: E/AndroidRuntime(1964):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:46:13.090

您需要覆盖的`getView()`方法`ArrayAdapter`并将此代码放入其中。

```
public View getView(){  
if (rowView == null) {
            // Get a new instance of the row layout view
            LayoutInflater inflater = activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.route_list_item, null);
            Log.v("Log position", "2");

            // Hold the view objects in an object,
            // so they don't need to be re-fetched
            hsView = new RouteSearchView();
            hsView.routeSVname = (TextView) rowView
                    .findViewById(R.id.routeName);
            hsView.routeSVtravelsName = (TextView) rowView
                    .findViewById(R.id.travelsName);
            hsView.routeSVbusType = (TextView) rowView
                    .findViewById(R.id.busType);
            hsView.routeSVdepTime = (TextView) rowView
                    .findViewById(R.id.depTime);
            hsView.routeSVarrTime = (TextView) rowView
                    .findViewById(R.id.arrTime);
            hsView.routeSVseatsAvail = (TextView) rowView
                    .findViewById(R.id.seatsAvail);
            hsView.routeSVsellFare = (TextView) rowView
                    .findViewById(R.id.sellFare);
            hsView.routeSVcmdCheck = (Button) rowView
                    .findViewById(R.id.cmdCheck);
            // Cache the view objects in the tag,
            // so they can be re-accessed later
            Log.v("Log position", "3");
            rowView.setTag(hsView);

        } else {
            hsView = (RouteSearchView) rowView.getTag();
        }
        // Transfer the stock data from the data object
        // to the view objects
        searchBus = listBusGS.get(position);

            routeID = searchBus.getRoute_id().toString();
            routeName = searchBus.getService_name().toString();
            travelsName = searchBus.getTravels_name().toString();
            busType = searchBus.getBus_type().toString();
            depTime = searchBus.getDeparture_time().toString();
            arrTime = searchBus.getArival_time().toString();
            seatsAvail = searchBus.getSeats_available().toString();
            sellFare = searchBus.getSell_fare().toString();

            hsView.routeSVname.setText(routeName);
            hsView.routeSVtravelsName.setText(travelsName);
            hsView.routeSVbusType.setText(busType);
            hsView.routeSVdepTime.setText(depTime);
            hsView.routeSVarrTime.setText(arrTime);
            hsView.routeSVseatsAvail.setText(seatsAvail);
            hsView.routeSVsellFare.setText(sellFare);

        }

        return rowView;
    } 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:51:34.900

构造`ArrayAdapter`函数不返回视图。您应该实施`getView()`以返回`View`要放置在`ListView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:44:40.843

我已经解决了这个问题，这是在 xml 处理程序中而不是这段代码，但感谢您的努力！

# parallel-processing - 是否可以将 mpiexec 作为 mpiexec 程序的子进程运行？

> ID：14582829
> 
> 赞同：2
> 
> 时间：2013-01-29T12:24:43.477
> 
> 标签：parallel-processing, mpi, openmpi, mpich

我有一个使用 mpiexec 运行的程序 A。该程序通常并行运行，但在其中一种执行模式中，它可能会调用也启用了 MPI 的外部程序 B。当然，如果 B 作为串行调用，则 A 的每个实例最终都会调用 B 的一个实例。如果并行调用，A 的每个实例都将调用并行 B。

一种可能的解决方案是让 A 的主节点调用并行 B，让其他 A 的进程空闲，但当然我需要从 A 的用户命令行调用中继承 mpiexec 选项（包括任何怪癖，例如 PBS 交互）到内部 B 调用。据我所知，这不是微不足道的，也不能很好地处理不同的 MPI 实现（例如 MPICH 与 Open MPI）。

有没有人有这种问题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T09:52:16.067

如果不使用 MPI 2 及更高版本的动态进程管理，这是不可能的。您应该使用 MPI_COMM_SPAWN 或 MPI_COMM_SPAWN_MULTIPLE 之类的 MPI 调用来创建新的 MPI 进程。如果您使用 fork 和 exec 或类似函数来启动新的 mpiexec 命令，您的新进程将不会启用 MPI，并且对 MPI_Init 的任何调用都将失败。我在一个项目中有这样的经历。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-15T23:18:49.440

是否可能并不重要——这是一个糟糕的主意。如其他人所述，使用 MPI_Comm_spawn(_multiple)。

而且我相信至少有一些网络无法使用这种用法，因此它是不可移植的。

# java - Hibernate 使用查询选择类属性

> ID：14582830
> 
> 赞同：0
> 
> 时间：2013-01-29T12:24:45.903
> 
> 标签：java, hibernate

我有一个类叫做 product 这里是定义

```
public class Product {
    private String productId;
    private Set<Label> name;

    public String getProductId() {
        return productId;
    }

    public void setProductId(String productId) {
        this.productId = productId;
    }

    public Set<Label> getName() {
        return name;
    }

    public void setName(Set<Label> name) {
        this.name = name;
    }
} 
```

我希望通过 select 语句检索名为 name 的属性，因此我将其添加到我的映射文件中。

```
<class name="Product"  table="PRODUCT">

        <id name="productId" type="java.lang.String">
            <column name="PRODUCTID" />
            <generator class="assigned" />
        </id>

        <set name="name" cascade="all" inverse="true" lazy="false">
            <key column="CONTENTID" />
            <one-to-many class="com.dbs.web.models.org.Label" />
            <loader query-ref="nameLabel" />
        </set>

    </class>

<sql-query name="nameLabel">
        <load-collection alias="lbl" role="Product.name" />
        SELECT {lbl.*} FROM LABEL lbl where lbl.CONTENTID = :productId and
        lbl.KEY ='name'
    </sql-query> 
```

所以这一切运作良好。我只是有点担心它不会表现得很好。它不像 sql 查询会返回数千条记录，它可能像 10 条。

有没有另一种方法可以实现这一点。

# html - 如何布局元素以占用浏览器当前拥有的可用垂直空间？

> ID：14582836
> 
> 赞同：2
> 
> 时间：2013-01-29T12:25:16.947
> 
> 标签：html, css

我是 html 的初学者，所以这可能是一个简单/愚蠢的问题 ;-)

对于一个有趣的项目，我想要一个 html 页面，它占据窗口的整个高度但不滚动。（例如，我总是想在不使用静态定位的情况下查看页脚）。

如果内容多于无法显示的内容，则嵌套的 div 应滚动。由于该站点将有 2 列，因此应有 2 个可能的滚动条。

我创建了一个小例子来更好地解释这个问题：

**HTML：**

```
<body>
    <div id="sitepage">
        <div id="header" class="box">testtitle</div>
        <div id="dynamiccontent">
            <div id="leftside" class="box">
                <div id="navheader">little navigation</div>
                <div id="scrolleftcolumn" class="scrollcontainer">
                    <div id="forumandthreadlist">
                        <div class="forumslist selectable hoverable innerbox">textasfasdfds</div>
                    </div>
                </div>
            </div>
            <div id="rightside">
                <div class="box" id="navcontent">navigation hereasdfa sdfasd fsad sad fasd fasd fasdf asdf sd</div>
                <div
                id="scrollrightcolumn" class="scrollcontainer">
                    <div id="content">
                        <div class="box">another post</div>
                        <div class="box">another post</div>
                        <div class="box">another post</div>
                        <div class="box">another post</div>
                        <div class="box">another post</div>
                    </div>
                    <div id="editor" class="box">post reply + editor + preview</div>
            </div>
        </div>
    </div>
    </div>
</body> 
```

**CSS：**

```
html, body, * {
    padding: 0;
    margin: 0;
}
html {
    width: 100%;
    height: 100%;
}
#header {
}
#dynamiccontent {
}
#leftside {
    position: absolute;
    left: 0;
    right: 75%;
}
#rightside {
    position: absolute;
    left: 25%;
    right: 0;
}
div.box, .innerbox {
    margin: 5px;
}
div.box {
    background-color: #1c3c41;
}
div.innerbox {
    background: #274850;
    color: #C9C9C9;
} 
```

[JsFiddlelink](http://jsfiddle.net/FabNy/2/) 基本上：如何在“scrollcontainer”类上启用垂直滚动？甚至可以在液体布局中使用吗？

注意：我知道“溢出：自动；”。我似乎无法限制液体布局中嵌套 div 的高度以启用滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:30:08.147

添加`overflow:scroll;`到滚动容器类，或者`overflow:auto`如果您只想在内容溢出时滚动。

将它们的高度设置为百分比并限制其宽度以防止水平滚动。

我会建议：

```
header{
    height:10%;
}
dynamiccontent{
    height:85%;
}
footer{
    height: 5%;
} 
```

然后将左右列的高度设置为100%（动态内容的100%）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:54:24.897

您需要对需要扩展以达到可用高度的孩子进行填充。

1.  #sitepage 应占据所有可用高度
2.  #dynamiccontent 应垂直放置在距顶部 {size of header}px 的位置
3.  左右区域应占据全部可用高度。

**风格**：

```
html, body, * {
    padding: 0;
    margin: 0;
}
html {
    width: 100%;
    height: 100%;
}
#sitepage {
    position: absolute;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;
}
#header {
}
#dynamiccontent {
    top: 30px;
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
}
#leftside {
    position: absolute;
    left: 0;
    top:0;
    right: 75%;
    bottom: 0;
}
#rightside {
    position: absolute;
    left: 25%;
    right: 0;
    bottom: 0;
    overflow: auto;
    top:0;
}
div.box, .innerbox {
    margin: 5px;
}
div.box {
    background-color: #1c3c41;
}
div.innerbox {
    background: #274850;
    color: #C9C9C9;
} 
```

# c++ - 运算符重载的未解析外部符号

> ID：14582840
> 
> 赞同：1
> 
> 时间：2013-01-29T12:25:26.020
> 
> 标签：c++, linker, operator-overloading

我在中定义了以下函数`chess_location.h`：

```
inline chess_location operator+(chess_location lhs, const chess_coord& rhs); 
```

然后，在`chess_location.cpp`：

```
#include "chess_location.h"

chess_location operator+(chess_location lhs, const chess_coord& rhs) { 
  //function definition
} 
```

然后在我`main()`的 in 中使用这个运算符`main.cpp`，如下所示：

```
#include "chess_location.h"
int main() {
  chess_location_B = chess_location_A + chess_coord;
} 
```

但是，我收到一个链接器错误，提示找不到操作员：

```
error LNK2019: unresolved external symbol "class chess_location __cdecl operator+(class chess_location,class chess_coord const &)" (??H@YA?AVchess_location@@V0@ABVchess_coord@@@Z) referenced in function _main 
```

在我看来，链接器没有将运算符的声明连接到定义，但我不确定为什么。我怀疑我`const`的 s 可能有问题。但是，如果我将运算符定义移至`main.cpp`，则一切都可以编译并正常工作。

知道这个错误来自哪里吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:27:53.630

如果`operator +`应该是内联的，那么你需要把定义放在头文件中。如果不打算内联，则将其放入 cpp 文件并从声明中删除“内联”。

# java - hadoop 字段的不同计数

> ID：14582847
> 
> 赞同：1
> 
> 时间：2013-01-29T12:25:46.240
> 
> 标签：java, hadoop

我有一个格式如下的文件：

1,5321234567
1,5324564321
1,5324564321
2,1234567643
2,1234567666
2,9875422345
3,5344435345
3,5344435345
3,5344435345
3,5344435345
3,5345345312
3,8767564564

在减少过程结束时，我想要第二个字段的不同计数，第一个字段是关键。例如

1,2
2,3
3,3

为此目的，Java 中最简单的 map 和 reduce 函数是什么？

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:38:13.393

如果我正确理解您的目标，您将需要：

1.  使每个键的值唯一
2.  计算每个“键”的不同项目数

因此，到达那里的最简单方法是这样的：

假设输入是 {A,B}

```
MAP 1:
   Output Key  : {A,B}
   Output Value: 1
REDUCE 1:
   Input Key   : {A,B}
   Input Values: {1,1,1,...}
   Output Key  : A
   Output Value: B

MAP 2:
   Output Key  : A
   Output Value: 1
REDUCE 2:
   Input Key   : A
   Input Values: {1,1,1,...}
   Output Key  : A
   Output Value: SUM of all the values 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T14:12:45.530

据我了解，您需要计算键的唯一值而不是保留值。我们可以通过从记录中创建密钥来简单，其余的 hadoop 框架将为您处理唯一记录的排序。

```
 map (IntWritable key, Text value, Context context) {

       context.write(value, new IntWritable(1)); 
    }

    reduce (Text key, Iterable<IntWritable> values, Context context) {

         long count = 0;
         for (Iterator<IntWritable> iterator = values.iterator(); iterator.hasNext();) {
              count+= iterator.next().get();
         }

         context.write(key, new LongWritable(count));
      } 
```

Reducer 也可以用作组合器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-29T12:35:51.510

只需进行排序。获取数组列表中的所有输入并进行排序。

这会帮助你

[大批](http://www.leepoint.net/notes-java/data/arrays/arrays-library.html)

# sql-server-2008 - 微软 sql 服务器。如何设置和导入特殊字符，如 ø

> ID：14582851
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:25:54.477
> 
> 标签：sql-server-2008

我有一个 csv 文件，其中包含在荷兰或丹麦使用的特殊字符。我想将 csv 导入 Microsoft sql server 2008。但我只得到“°”而不是“ø”。

我已经尝试过 Danish_Norwegian_CI_AS 排序规则。

我听说它可以使用 UTF-8，但我不知道如何在 Ms-sql 中设置它... CSV 文件是从 MySQL 生成的，可能使用 UTF-8。

我导入：

从“temp...”批量插入 WITH (FIELTERMINATOR = ';', ROWTERMINATOR = '\n')

CSV 文件：

1;ÆgidiusB

2;诺尔克平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:32:17.917

批量插入需要 CODEPAGE = 'ACP'

所以这有效：

大部分

INSERT doorvaartenTest

从“c:...”

和

( FIELDTERMINATOR = ';', ROWTERMINATOR = '\n',

CODEPAGE = 'ACP'

)

还将文件重新保存为 ANSI 而不是 UTF-8

# python - python中的命名字典

> ID：14582852
> 
> 赞同：2
> 
> 时间：2013-01-29T12:26:00.817
> 
> 标签：python, arrays, list, dictionary, python-2.7

我对如何在 python 中使用 PHP 中的命名数组进行了一些研究，同时我发现了以下代码示例，因为他们说可以用字典来完成。

```
shows = [
   {"id": 1, "name": "Sesaeme Street"},
   {"id": 2, "name": "Dora The Explorer"},
] 
```

来源：[从这里获取的部分代码](https://stackoverflow.com/questions/178199/python-can-i-have-a-list-with-named-indices)

参考：[Python 参考资料](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)

但是我怎么能通过循环添加一个新值呢？虽然有关如何通过简单地显示 ['key']="value" 来添加单个值的参考资料，但我无法将它们都链接起来。谁能告诉我如何通过循环将值添加到这本字典中？

例如：

```
for message in messages: 
            myvariable inside having two field
            - Message
            - Phone number 
```

**更新** 我可以知道如何将它们循环出来以在将列表放入字典后显示吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:33:56.417

您应该将字典添加到如下数组中：

```
friends = []
for message in messages:
  dict = {"message" : message.message, "phone" : message.phone }
  friends.append(dict) 
```

再次循环，你可以这样做：

```
for friend in friends:
  print "%s - %s" % (friend["message"], friend["phone"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:29:24.997

实际上，您的示例是一个字典列表，在 PHP 术语中是关联数组的数组。

要添加项目，您可以执行以下操作：

```
shows.append({ "id" : 3, "name" : "House M.D."}) 
```

`[]`表示 a`list`或数组。

`{}`表示一个`dictionary`或一个关联数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T09:53:03.070

简而言之，你可以做（​​列表理解）

```
message_informations = [{"message": m.message, "phone": m.phone} for m in messages] 
```

如果您想为每个 message_information 分配一个 id 并存储在字典中（字典理解）

```
{_id: {"message": m.message, "phone": m.phone} for _id, m in enumerate(messages)} 
```

# ios - 适用于 iOS 的各种类型的通知中心

> ID：14582854
> 
> 赞同：1
> 
> 时间：2013-01-29T12:26:16.410
> 
> 标签：ios, notifications, nsnotificationcenter

我目前在通知中心工作。

我读到有 4 种类型的通知中心。

1.  **NSNotificationCenter**
2.  **NSDistributedNotificationCenter**
3.  **达尔文通知中心**
4.  **电话通知中心**

其中`NSNotificationCenter`我很熟悉。`TelephonyNotificationCenter`是私有的，不提供给开发人员。

我的问题是关于`NSDistributedNotificationCenter`和`DarwinNotificationCenter`。

这两个通知中心有什么用？是否可供开发人员使用？如果可用，我该如何使用它们？

**我尝试了什么：**

1.  谷歌搜索，得到了两个参考（[DarwinNotificationConcepts](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/MacOSXNotifcationOv/DarwinNotificationConcepts/DarwinNotificationConcepts.html)，[NSDistributedNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistributedNotificationCenter_Class/Reference/Reference.html)）。但读后一头雾水。
2.  阅读此[链接](http://www.informit.com/authors/bio.aspx?a=8FF32343-952D-4C6F-BFA6-F4B757655420)上提供的 iOS 书籍，获得概览。但没有详细说明

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:44:32.747

DarwinNotificationConcepts 和`NSDistributedNotificationCenter`OS X 都是特定的，**在 iOS 下不可用**。

**Darwin Notification Concepts 文章**指的是 MacOS X 下的 Unix。Darwin 是 Unix 子系统。它最适合用于应用程序和守护程序之间的 IPC 并依赖于`notifyd`工作。

`NSDistributedNotificationCenter`具有相同的基本工作，`NSNotificationCenter`但在进程之间工作。自 OS X 10.0 起可用

# php - jqplot 返回错误的图像数据

> ID：14582858
> 
> 赞同：0
> 
> 时间：2013-01-29T12:26:25.480
> 
> 标签：php, javascript, jquery, jqplot

每当我使用`jqplotToImageStr()`调用保存图表时，保存的图像已损坏。

此代码负责从图表中获取图像字符串，放入现有表单并提交表单：

```
<script type="text/javascript">
    function downloadChart(){
        var base64string = $( <?php echo '"#chart'.$chart_data['id'].'"'; ?>).jqplotToImageStr({});
        $('#image').val(base64string);
        $('#action').val('image');
        $('#ChartAnalyticsForm').submit();
    }
</script> 
```

然后我可以访问通过表单传递的数据并将其保存在服务器上。然而，保存的图像的图例标签、月份标签和数据点标签已损坏（请看下面的示例图像）：

[http://i.imgur.com/Mi5K29w.png](http://i.imgur.com/Mi5K29w.png)

## 任何人都可以提出任何可能导致这种情况的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:56:58.253

该错误是由错误的css引起的。

# sql-server-2008 - Foreach 循环容器中的枚举器列表中缺少 Foreach 文件枚举器

> ID：14582860
> 
> 赞同：2
> 
> 时间：2013-01-29T12:26:32.090
> 
> 标签：sql-server-2008, ssis

我正在学习 SSIS，在使用 For Each 循环容器时，我发现从可用枚举器列表中，“ForEach 文件”枚举器不存在。

我正在使用 SQL Server 2008 Enterprise Edition（一个实例）和 Enterprise Eval Edition（另一个实例）。

为什么可用枚举列表中没有 For Each 循环容器枚举？

**：更新：**

![在此处输入图像描述](../Images/d8729e1e38d4f963243aa424b6a69e16.png)

![在此处输入图像描述](../Images/57ee4a28d12ecaeee9ca9f9d5ee46ed5.png)

# jquery - z-index 问题，Mask 结束了视频？

> ID：14582869
> 
> 赞同：0
> 
> 时间：2013-01-29T12:27:05.863
> 
> 标签：jquery, html, css, popup, z-index

[如果您查看此页面](http://www.cinemaxx.dk/aarhus/)，然后单击滑块中的“播放”图标 - 然后在 IE 中，掩码位于整个视频/页面的顶部，但掩码的 z-index 低于打开的 div向上？在 FF 和 Chrome 中，它只是“关闭”按钮，而不是放置在蒙版下方......无法完全弄清楚为什么，因为蒙版的 z-index 低于带有视频的 div ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:31:26.600

您的页面的行为完全符合其应有的行为。

掩码是 body 标签的直接子代，它的 z-index 为 1000。

您的视频是 z-index 为 1 的任何滑块中 li 的直接子级。

因此，即使您的视频本身的 z-index 为 5000，它也位于比您的掩码低（因为 1 低于 1000）的堆叠上下文中，因此会出现在您的掩码后面。

如果可能的话，最好的办法是让包含您的视频的对话框出现在与您的掩码（body 的直接子项）相同的堆叠上下文中（如果可能）。

# git - Git存储问题

> ID：14582870
> 
> 赞同：5
> 
> 时间：2013-01-29T12:27:07.437
> 
> 标签：git, git-stash

我在 git stash 中有一个问题。

比如说我`a.txt,b.txt & c.txt`在 repo 中有 3 个文件，并且目录是干净的。

现在我正在修改其中的 2 个文件：`a.txt and b.txt`.

现在我还没有完成对两个文件的更改，所以我通过 foll 命令将它们存储起来：

```
$ git stash save "First Stash" 
```

不，如果我做 a `$ git stash list`，我会得到

```
stash@{0}: On master: First Stash 
```

否，如果我修改第三个文本文件`c.txt`并将其存储起来，如图所示：

```
$ git stash save "Second Stash" 
```

最后不，如果我这样做，`$git stash list`我会得到以下结果，

```
stash@{0}: On master: Second stash
stash@{1}: On master: First Stash 
```

存储号码和消息在这里混淆了。这是怎么回事？现在，如果我弹出`stash@{0}`我得到第一个存储内容，但这里的消息反转显示为第二个存储但应该是第一个存储。

**这是我的工作流程**

```
admin:stud:/demo/stash_demo> ls
a.txt  b.txt
admin:stud:/demo/stash_demo> echo Hello World >> a.txt
admin:stud:/demo/stash_demo> git stash save "First"
Saved working directory and index state On master: First
HEAD is now at cff03c6 Initail Commit
admin:stud:/demo/stash_demo> echo Hello World >> b.txt
admin:stud:/demo/stash_demo> git stash save "Second"
Saved working directory and index state On master: Second
HEAD is now at cff03c6 Initail Commit 
```

**这些是我可用的藏匿处：**

```
admin:stud:/demo/stash_demo> git stash list
stash@{0}: On master: Second
stash@{1}: On master: First 
```

**现在我将尝试应用 stash@{1} 这是第一个 stash 并且应该应用文件 a.txt**

```
admin:stud:/demo/stash_demo> git stash apply `stash@{1}`
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   b.txt
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

如上所示，我应用了最新的更改。

如果我尝试不带刻度线，那么它会给我 foll 错误。

```
admin:stud:/demo/stash_demo> git stash apply stash@{1}
fatal: ambiguous argument 'stash@1': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:39:40.897

Git 的 stash 是（默认情况下）一个[LIFO storage](http://en.wikipedia.org/wiki/LIFO_%28computing%29)。

通过使用`git stash apply`or`git stash pop`您将始终获得最后一个隐藏的补丁（也可以使用`stash@{0}`,来引用，`0`是隐藏内的索引）。存储一个新补丁会将其置于其他隐藏补丁之上，从而将它们的索引增加一（`stash@{0}`将变为`stash@{1}`）。

也就是说，如果您想应用或弹出除最后一个隐藏的补丁之外的补丁，则需要将其 ref 传递给命令：

```
$ git stash apply stash@{1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:38:26.043

他们没有混淆！

存储将“提交”（我知道这里不是正确的词）存储在堆栈中：

[http://en.wikipedia.org/wiki/Stack_(abstract_data_type)](http://en.wikipedia.org/wiki/Stack_(abstract_data_type))

所以 pop 操作总是让你得到你放在那里的最后一件事。

此行为是设计使然

编辑：如果你需要翻转一些东西，然后单独弹出堆栈（存储）中的每个项目 - 做一个真正的提交 - 和交互式 rebase 或任何..

编辑/编辑：做一个

```
git stash pop 
```

然后提交您的更改（无论此提交是否有用）

然后再做`git stash pop`一次，再次提交

现在您可以重新排序或删除单个提交 - 看看这里：[http://gitready.com/advanced/2009/03/20/reorder-commits-with-rebase.html](http://gitready.com/advanced/2009/03/20/reorder-commits-with-rebase.html) 或搜索交互式变基（再次..下一个时间做一个分支这个概念比存储更强大）

# c# - 如果在 c# 中没有选择单选按钮，则消息框？

> ID：14582871
> 
> 赞同：0
> 
> 时间：2013-01-29T12:27:06.767
> 
> 标签：c#, validation, radio-button, messagebox

嗨，我只是想知道如果没有选择单选按钮，如何提示错误？我在列表视图中添加了很多条目，并且我拥有它，因此您可以选择固定或零（使用债券），我希望如果两者都未选择，则会显示一个消息框。我试过了：

```
if (rdbtn_Fixed == null && rdbtn_Zero == null)
        {
            MessageBox.Show("Please select either Fixed or Zero coupon Type");
            return;
        } 
```

但是当我单击按钮添加到列表视图时，由于某种原因没有错误提示！

任何帮助将不胜感激，谢谢！

达米安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:28:50.150

检查是否检查了无线电，而不是检查它是否为空。单选按钮不会`null`因为它们被实例化并且不会为空。您可以在[**RadioButton.Checked**](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checked.aspx)属性上设置条件以检查是否选择了单选按钮。

```
if (!rdbtn_Fixed.Checked &&  !rdbtn_Fixed.Checked)
{
      MessageBox.Show("Please select either Fixed or Zero coupon Type");
      return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:33:45.680

如果控件`rdbtn_Fixed`和`rdbtn_Zero`在您的表单/页面上，那么，在其他条件相同的情况下，它们不会`null`；为了确定是否`RadioButton`选择了 a，您应该使用 apporiate 属性：[`RadioButton.Checked`](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checked.aspx)。

# php - 如何有效地检查mysql表中是否存在记录？

> ID：14582874
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:27:15.553
> 
> 标签：php, mysql, kohana

我正在编写 PHP kohana 应用程序，其中一部分我需要在表中插入一些记录。

我的表结构：

```
TABLE BOOKINGS
id int
booked_object_id int
date_from date
date_tom date 
```

该表有大约 10k 条记录，其中包含已预订的对象。

现在在我的一个 PHP 函数中，我有一个包含新数据的数组，我想将其插入到这个表中。执行我的函数时，大约有 20-30 个新预订要插入。

现在让我们来解决我的主要问题 - 我希望它检查我想插入表中的任何预订是否已经预订（object_id 和 date_from 与我的 php 数组中的相同）。如果其中任何一个已被预订，我的函数将不会在表中插入任何新内容。

有没有比将 mysql 表的所有内容放入 PHP 数组并检查 20 次（或我的插入次数）更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:31:48.377

如果您打算在表中查找某个列，那么您应该索引它。这将创建一个哈希表，数据库服务器将使用它来查找行。

至于进行 20 次调用的效率.. 您可以使用`IN`语句选择 1 次调用中的所有现有记录，并在插入时简单地忽略已经存在的记录。

参考：

[expr IN（值，...）](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

# visual-studio-2010 - 如何在 VS 2012 Express 中重新设计旧的 .rdlc 报告？

> ID：14582876
> 
> 赞同：3
> 
> 时间：2013-01-29T12:27:25.993
> 
> 标签：visual-studio-2010, reporting-services, visual-studio-2012, rdlc, designer

我有很多我在 VS 2010 Pro 中设计的报告，现在我只有**VS 2012 Express**，当我打开报告时，它只作为**XML 文件**打开。我一直在寻找解决方案，但没有任何成功。

*   如何查看设计器（我尝试安装 Sql Server 2008 Express /w Advance Services）？
*   是否有任何外部设计人员可以看到自定义数据类型？（我试过 fyiReporting）
*   如果以上两种方法都不可能，那么在任何地方我都可以找到如何手动编辑文件？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:32:12.157

如果您的报告是在 VS 2010 中设计的，这意味着它们是 SQL Server 2012 格式。我会尝试 SQL Server 2012 Express。它通过 Business Intelligence Development Studio (BIDS) 的 Express 版包括报表设计器。

如果您愿意，也可以在 MSDN 上找到 RDL 规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T02:15:08.670

您可以根据您的 SQL Server 版本下载报表生成器

[Microsoft SQL Server 2008 Reporting Services 报表生成器 2.0](https://www.microsoft.com/en-us/download/details.aspx?id=24085)

[Microsoft® SQL Server® 2012 SP4 报表生成器](https://www.microsoft.com/en-us/download/details.aspx?id=56043)

[Microsoft® SQL Server® 2014 报表生成器](https://www.microsoft.com/en-us/download/details.aspx?id=42301)

[Microsoft® 报表生成器 SQL 版本 >= 2016](https://www.microsoft.com/en-us/download/details.aspx?id=53613)

**注意：**我下载了 2008 版本，当您使用 Report Builder 打开文件时，扩展名`.rdl`会显示 ，如果您`.rdlc`刚刚选择`All Items (*.*)`

此外，您不需要安装 SQL Server 来创建/修改报告，但如果您想测试它，您必须安装它

[以下](https://docs.microsoft.com/en-us/openspecs/sql_server_protocols/ms-rdl/4299384a-e826-4f69-bb06-f56d37155197)是根据 SQL Server 版本的 RDL 格式的架构定义

# php - 来自函数的 PHP 图像

> ID：14582879
> 
> 赞同：3
> 
> 时间：2013-01-29T12:27:33.117
> 
> 标签：php, mysql, html

我是一个php新手，所以请放轻松。

我为 imgFld 和 imageFldName 创建了查询。我试图找出为什么我的数据库中的图像没有显示。

我有以下代码：

```
image_show(stripslashes($row['imgFld']),stripslashes($row['imageFldName']));

echo ' '.$records_num;

function image_show($name_image, $alt_tag) {

    if (file_exists("mywebsite.co.uk/images/'$name_image'")) {
        $img = getimagesize('mywebsite.co.uk/images/'.$name_image);
        echo '<img src="mywebsite.co.uk/images/'.$name_image.'" alt = '.$alt_tag.' border=0 align="bottom"';
        echo 'width = '. $img[0] .' height = ' .$img[1] . ' />';
    } else {
        echo 'Add an image here';
    }

} 
```

我从我的数据库中的一列获取图像名称，每列都有一个“image.jpg”，将它与 HTML 中的 img src 脚本连接起来，以便我可以显示数据库中的图像。

但是没有显示图像，我找不到错误。似乎没有什么不妥。当我回显 $name_image 时，什么也没有产生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:28:21.323

在这种情况下，这意味着没有任何东西填充`$name_image`变量。

假设网站目录是本地目录，则其原因很可能是您调用该`image_show`函数时的参数。它们与您指定的顺序不匹配。

第一个参数应该是名称，第二个参数应该是 alt 文本，定义如下：

```
function image_show($name_image, $alt_tag) 
```

但是，您将 id 传递给`$name_image`并将名称传递为`$alt_tag`.

应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:33:21.967

问题是[file_exists](http://php.net/file-exists)仅适用于本地文件。

例如：

```
if (file_exists($_SERVER['DOCUMENT_ROOT'] . '/path/to/files/image.jpg')) {
...
} 
```

# css - 电子邮件正文中的条形图

> ID：14582884
> 
> 赞同：7
> 
> 时间：2013-01-29T12:27:55.613
> 
> 标签：css, html, html-email, bar-chart

是否可以在电子邮件正文中绘制动态条形图。（需要与 Outlook 兼容）

我需要在通过 oracle 数据库发送的电子邮件中绘制一个图形，动态值将通过一个过程传递。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T12:35:32.550

最好的解决方案是动态创建条形图，然后将其转换为图像。您可以简单地使用打印屏幕并将其导入 Photoshop 或其他任何东西并在那里编辑图像。

HTML 电子邮件是出了名的坏事，因为它们对 10 多年前的 html 代码反应最好。

一些基本准则：

*   不要尝试在电子邮件中使用 HTML5。
*   不要尝试使用花哨的 CSS 或链接到外部样式表，甚至在 HEAD 中使用 css 样式。
*   不要尝试使用 javascript，因为它不会起作用；
*   不要尝试使用 Flash，因为它不起作用。

*   务必使用内联 CSS

*   务必使用 HTML TABLES 进行布局
*   请使用图像，但尽量保持文件大小尽可能小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:33:56.900

您可以使用谷歌图表之类的东西来创建嵌入到您的 html 电子邮件中的动态图像（通过正确的数据集）。

~~[http://imagecharteditor.appspot.com/](http://imagecharteditor.appspot.com/)~~

[http://www.jonwinstanley.com/charts/](http://www.jonwinstanley.com/charts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:03:45.250

你不能用 JavaScript 做任何事情，因为电子邮件客户端不解析它。

但是您可以告诉您的服务器在文件上设置一个标题，使其成为 JPEG 或 GIF。文件扩展名也应该是 jpg 或 gif，因为一些电子邮件客户端在渲染没有扩展名或没有图像扩展名的图像时会发疯。不确定您在服务器端使用什么，但大多数都有某种动态图像生成库。

或者，使用表格呈现图形。

```
<table>
  <tr>
    <td colspan="10" bgcolor="pink"></td>
  </tr>
  <tr>
    <td colspan="5" bgcolor="pink"></td>
    <td colspan="5" bgcolor="white"></td>
  </tr>
</table> 
```

你明白了。不幸的是，您必须编写一些东西来生成相关的 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-29T17:45:00.897

这必须以“旧” html 方式完成。表格和普通图像的含义。

假设您要创建一个包含 5 个项目的条形图。您创建一个包含您需要的所有单元格的表格，然后您将拥有 5 张不同的图像，您可以在发送个性化电子邮件时垂直动态缩放。每个图像都只是一个实心块，比如说 10x10px 的 5 种不同颜色。对于发送的每封电子邮件，您会将图像的大小覆盖为块的大小。然后，您将放置您的电子邮件应用程序的替代模式（即 %%variable%%），并为每封发送的电子邮件使用正确的值。

例如：

```
<table border=0>
<tr>
<td align=bottom><img src=redblock.gif width=20 height=%%height1%%></td>
<td align=bottom><img src=greenblock.gif width=20 height=%%height2%%></td>
<td align=bottom><img src=yellowblock.gif width=20 height=%%height3%%></td>
<td align=bottom><img src=blueblock.gif width=20 height=%%height4%%></td>
<td align=bottom><img src=greyblock.gif width=20 height=%%height5%%></td>
</tr>
<tr>
<td colspan=5 bgcolor=#000000 height=1><img src=singlepixel.gif width=1 height=1></td>
</tr>
<tr>
<td>Spain</td>
<td>France</td>
<td>US</td>
<td>UK</td>
<td>Italy</td>
</tr>
</table> 
```

# twitter - 使用 twitter4j 3.03 寻找 twitter 用户的时间线

> ID：14582887
> 
> 赞同：1
> 
> 时间：2013-01-29T12:27:59.310
> 
> 标签：twitter, twitter4j

我正在尝试使用 twitter4j 检索 twitter 用户的时间线。我可以使用 2.6 版做到这一点，但现在我升级到 3.03 并开始从 twitter 收到身份验证错误。

> 401：身份验证凭据 ( [https://dev.twitter.com/pages/auth](https://dev.twitter.com/pages/auth) ) 丢失或不正确。确保您已设置有效的使用者密钥/秘密、访问令牌/秘密，并且系统时钟同步。消息 - 无法验证您的代码 - 32

这就是我检索 twitter 对象的方式

```
TwitterFactory twitterFactory = new TwitterFactory(
                                                new ConfigurationBuilder().setDebugEnabled(true).
                                                setOAuthConsumerKey(oAuthConsumerKey).
                                                setOAuthConsumerSecret(oAuthConsumerSecret).
                                                setJSONStoreEnabled(true).
                                                build());
twitter = twitterFactory.getInstance();
twitter.setOAuthAccessToken(new AccessToken(accessToken, accessTokenSecret)); 
```

当我检索这样的 twitter 对象并尝试获取与经过身份验证的用户不同的用户时，我收到了身份验证错误。以下是检索用户的代码：

```
user = twitter.showUser(userName); 
```

在升级之前，我能够检索任何拥有公共个人资料的用户，但现在我无法检索除了经过身份验证的用户本身之外的任何用户。我在这里做 smtg 错了吗，我是否需要获得用户的许可才能查找他的时间线，我不相信，因为当我使用 twitter 的 oauth 工具时，我能够在没有得到用户任何许可的情况下检索用户.

我正在使用 twitter4j 3.03 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T08:35:29.110

显然旧 api 接受以“@”开头的用户名，而新版本只是抛出这个奇怪的错误。从搜索的用户名中删除“@”后，一切正常，没有任何问题。

# ember.js - Ember Data 中的类继承有很多关联

> ID：14582888
> 
> 赞同：9
> 
> 时间：2013-01-29T12:28:02.180
> 
> 标签：ember.js, ember-data

我正在尝试让 Ember Data 使用 hasMany 与类继承的关联。

Ember 代码示例：

```
var Person = DS.Model.extend({
  name: DS.attr('string'),
  animals: DS.hasMany('Animal')
});

var Animal = DS.Model.extend({
  name: DS.attr('string'),
  owner: DS.belongsTo('Person')
});

var Dog = Animal.extend({
  isBarking: DS.attr('boolean')
});

var Cat = Animal.extend({
  isMeowing: DS.attr('boolean')
});

var fred = Person.createRecord({name: 'Fred'});
var ed = Dog.createRecord({name: 'Ed', isBarking: true});
// This gives:
// Error: assertion failed: You can only add records of Animal to this relationship.
fred.get('animals').pushObject(ed); 
```

我希望能够`animals`为每个人添加猫和狗实例。

Mongoid 为 Ruby/Rails 提供的内容给出了如何实现它的示例：

[http://mongoid.org/en/mongoid/docs/documents.html#inheritance](http://mongoid.org/en/mongoid/docs/documents.html#inheritance)

我知道 Mongoid 的继承实现（`_type`每个记录的自定义属性）可能对于 Ember Data 来说过于具体而无法实现。

如果有人可以给我一个提示是否可以使用 Ember Data 进行上述操作，如果可以，我将如何实现这一点，将不胜感激。如果这是 Ember Data 根本不支持的东西，那也是我想要的答案。

我正在运行 Ember 1.0.0-pre4 和几天前构建的自定义 Ember 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:21:03.683

多态性尚未得到官方支持，但有一个长期的[pull request](https://github.com/emberjs/data/pull/750)可以准确地提出您正在寻找的功能。

# dynamic - 动态 JQGrid 国际化

> ID：14582891
> 
> 赞同：1
> 
> 时间：2013-01-29T12:28:14.897
> 
> 标签：dynamic, jqgrid, internationalization

我在 Ruby on Rails 中使用 JQGrid，它从控制器中提取数据，并且该控制器以 json 格式返回数据。下面是我的 JQuery 代码

```
<script type="text/javascript">
var list = null;
$(document).ready(function(){
    grid = $("#list");
    grid.jqGrid({
        datatype: "json",
        url:'/applications?'+new Date().getTime(),
        height: <%= JQGRID_HEIGHT %>,
        rowNum:<%= ROW_NUM %>, 
        rowList:<%= ROW_LIST %>,
        viewrecords: true,
        autowidth:true,
        gridComplete: function() {
            initLytebox();
            common.jqGridComplete($(this));
            initLytebox();

        },
        afterInsertRow: function(rowId) {           
            var action = grid.jqGrid('getRowData',rowId).action;
            var cellValue = '<a href="/applications/'+rowId+'/edit"><img alt="Edit" src="/assets/edit.png" title="Edit"></a>&nbsp;'
            cellValue += '<a href="javascript:void(0);" onclick="deleteApplication('+rowId+')" class = "delete_egress_group" id = "'+rowId+'">';            
            cellValue += '<img alt="Delete" src="/assets/delete.png" title="Delete"></a>';
            grid.jqGrid('setRowData',rowId,{action:cellValue});
        },
        colNames:['Application Name','Description','Action'],       
        colModel:[  
                    {name:'name',index:'name', width:"20%"},
                    {name:'description',index:'description', width:"70%"},
                    {name:'action',index:'action', width:"10%",search:false,sortable:false}
                 ],              
        multiselect: false,
        pager: '#pager',
        toolbar: [true,"top"],
        caption: "Applications" }
    );  
    grid.jqGrid('navGrid', '#pager', {search: false, add: false, edit: false, del: false },{}, {}, {},
     { multipleSearch: true, overlay: false});
    grid.jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true, defaultSearch: 'cn' });
    grid.jqGrid('navButtonAdd', '#pager',
        {
            caption: "Add",title: "Add New",buttonicon: 'ui-icon-plus',
            onClickButton: function () {window.location = "/applications/new";}             
        }
    );
}); 
</script>
<select id="languages">
    <option value="en">English (US)</option>
    <option value="en-GB">English (GB)</option>
    <option value="en-IN">English (IN)</option>
    <option value="de">German</option>
    <option value="ru">Russian</option>
</select>
<div style="width:100%">
    <table id="list"></table>
    <div id="pager"></div>
</div> 
```

我已经从以下位置下载了多语言 js 文件并放置在我的应用程序的 JQGrid 文件夹下

```
http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/src/i18n/grid.locale-en-fixed.js
http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/src/i18n/grid.locale-ru-fixed.js
http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/src/i18n/grid.locale-de-fixed.js 
```

现在我只想根据所选语言转换我的 JQGrid 的列标题和分页字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:52:13.450

[您使用答案](https://stackoverflow.com/a/7176964/315935)中描述的非常旧版本的 jqGrid (3.8.2) 的语言环境文件。我验证了相同的想法仍然可以在 jqGrid 中使用。

**[这](http://www.ok-soft-gmbh.com/jqGrid/Localization_.htm)是有效[的旧演示](http://www.ok-soft-gmbh.com/jqGrid/Localization.htm)的修改版本**。如果您将原始本地化文件（例如[grid.locale-en.js](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.3/js/i18n/grid.locale-en.js)）与修改后的版本（例如[grid.locale-en-dyn.js](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.3/js/i18n/grid.locale-en-dyn.js)）进行比较，您会发现我所做的修改非常简单。`grid.locale-en.js`看起来像的原始文件

```
(function($){
....
$.jgrid = $.jgrid || {};
$.extend($.jgrid,{
    defaults : {
    ....
});
})(jQuery); 
```

我修改为

```
(function($){
....
$.jgrid = $.jgrid || {};
if (!$.jgrid.hasOwnProperty("regional")) {
    $.jgrid.regional = {};
}
$.jgrid.regional.en = $.jgrid.regional["en-US"] = {
    defaults : {
    ....
};
$.extend($.jgrid,$.jgrid.regional.en);
})(jQuery); 
```

这种修改允许不仅将语言特定信息保存在**公共**部分，如 和`$.jgrid.defaults.recordtext`，而且**还**保存在语言特定部分，如`$.jgrid.regional.en.defaults.recordtext`和`$.jgrid.regional["en-US"].defaults.recordtext`。它允许包含**多种语言**特定的设置，这些设置可以复制到`$.jgrid.defaults`jqGrid 使用的标准部分。

# android - 为什么 startActivity 不起作用？表现或意图？

> ID：14582895
> 
> 赞同：0
> 
> 时间：2013-01-29T12:28:23.787
> 
> 标签：android

```
Button myButton = new Button(this);
myButton.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {
        startActivity(this,EqVisualizerCaptureAudio.class);
   }
}); 
```

为什么它不起作用？那个意图是坏的？

显现：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:29:37.203

采用

```
startActivity(new Intent(Current_Activity.this,EqVisualizerCaptureAudio.class)); 
```

**或者**

```
startActivity(new Intent(v.getContext(),EqVisualizerCaptureAudio.class)); 
```

反而

```
startActivity(this,EqVisualizerCaptureAudio.class); 
```

通过 Activity Context 来启动 Activity 而不是 View

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:43:46.990

如果不使用，您是否在 android 清单中声明 EqVisualizerCaptureAudio 活动

```
<activity
            android:name=".EqVisualizerCaptureAudio"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:30:31.883

```
startActivity(new Intent(Current_Activity.this,EqVisualizerCaptureAudio.class)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:40:46.677

尝试使用此代码代替您的代码：

```
Button myButton = new Button(this);
myButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        startActivity(getApplicationContext(),EqVisualizerCaptureAudio.class);
    }
}); 
```

希望它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T13:04:26.320

在清单中添加 EqVisualizerCaptureAudio 活动并使用 getapplicationcontext 而不是这个......

我认为这可能会帮助你

# java - 在 Android 上访问非 Google 日历条目

> ID：14582896
> 
> 赞同：0
> 
> 时间：2013-01-29T12:28:23.850
> 
> 标签：java, android, calendar, caldav

我正在开发一个应用程序，它需要聚合在您的日历中找到的所有位置。我可以从 Android 上的任何 CardDav 提供商（例如 owncloud）访问日历条目，还是仅限于 Gmail/Cal？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:23:47.510

欢迎您从 Internet 下载数据。如果恰好使用 CalDAV 访问该数据，那很好。但是，Android 中内置的 CalDAV 没有任何特定内容，因此您需要找到可在 Android 上运行并提供 CalDAV 支持的第三方 JAR，或者编写您自己的 CalDAV 代码。

# python - 我为跨平台应用程序选择什么服务器端语言

> ID：14582902
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:28:39.987
> 
> 标签：python, cross-platform, server-side

我正在踏上未知的领域，即将离开 Windows 和 .Net 的舒适。我对 Linux 很熟悉，今天正在运行 nginx 和 nodejs。

我的要求是能够开发一个**服务器端**实现，它可以：

*   在通用平台（Linux、Win、Mac）上运行
*   独立地可以使用例如 jdbc 连接到不同的 tsql rdbms 服务器（oracle、mysql、sql server、postgres）
*   让我在合理的时间内开始（多年未编写 c/c++）
*   支持套接字和线程
*   相对较短的学习曲线

我的问题是：

*   python是一个不错的选择吗？优点缺点
*   python 是否足够慢以保证使用 c/c++？

如果您有任何问题，请告诉我，我会澄清。

/K

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:43:16.100

Python就足够了。你可以做 web sockets，sockets 并且可以访问几乎所有的数据库。

但在我看来，唯一能完全满足您的要求的是 Java。例如，您可以使用 Play 框架，这样您就只使用标准 java，而不是 java 企业。

那里有 jdbc、线程、套接字和其他所有东西，您的代码可以在任何东西上运行，从带有 windows 或 linux 的最小 pc 机到 Solaris，甚至在大型机上，无需更改一行代码。

我个人最近更喜欢 python，但 Play 框架非常好。

如果你愿意，你可以看看 Ruby on Rails。他们的 ORM 系统非常好，他们有大多数关系数据库的驱动程序，即使不更改代码，您也可以使用 MongoDB。

您不再真正为 Web 服务器开发使用 C/C++

# java - java“错误无法打开文件”jar

> ID：14582906
> 
> 赞同：1
> 
> 时间：2013-01-29T12:28:47.067
> 
> 标签：java, compiler-construction

我无法运行它给我的“错误无法打开文件”的类或 jar 文件。

我正在使用以下命令：

```
javac src/*.java

jar cfe MyJar.jar src.Main src/*.class

java -jar MyJar.jar 
```

输出：

```
javac src/*.java
jar cfe MyJar.jar src.Main src/*.class
java -jar MyJar.jar
Error cannot open file
C^% 
```

我正在使用 linux/ubuntu 和 java：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

MANIFEST.MF 的内容：

```
Manifest-Version: 1.0
Created-By: 1.6.0_24 (Sun Microsystems Inc.)
Main-Class: src.Main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:09:01.053

该错误实际上是从我创建的 FileHandler 类中输出的。我现在觉得有点惭愧。我将研究它为什么没有打印出比捕获的异常更多的内容。感谢您抽出宝贵的时间让我注意到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:04:57.893

我很确定错误消息应该是：

```
Error: Unable to access jarfile MyJar.jar 
```

在任何情况下，都会打印实际的文件名。

因此，我想它只是打印错误的 jar 文件中的代码。

一个简单的测试：

```
jar -jar MyJar.jar "this is so stupid" 
```

那么输出是

```
Error: cannot open file this is so stupid 
```

如果是这样，请查阅您的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:59:18.517

我不相信错误实际上是在`java -jar`命令上。我怀疑是`jar`命令有问题 find `src.Main`。试试`jar cfe MyJar.jar src/*.class`吧。

# gtk - gtk_icon_view_set_markup_column 和 gtk_icon_view_set_text_column 有什么区别？

> ID：14582909
> 
> 赞同：0
> 
> 时间：2013-01-29T12:28:55.833
> 
> 标签：gtk

[gtk_icon_view_set_markup_column](http://developer.gnome.org/gtk3/3.1/GtkIconView.html#gtk-icon-view-set-markup-column)和[gtk_icon_view_set_text_column 有](http://developer.gnome.org/gtk3/3.1/GtkIconView.html#gtk-icon-view-set-text-column)什么区别？

根据文档，标记会覆盖文本，但我无法弄清楚标记是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:40:22.250

我没试过，但让我猜猜……也许`gtk_icon_view_set_markup_column`允许使用一些标记文本，比如“ `<b>text</b>`”。请参阅[pango 标记格式](http://developer.gnome.org/pango/stable/PangoMarkupFormat.html)。GTK 文档中的“标记”一词指的是，例如在[gtk_label_set_markup](http://developer.gnome.org/gtk3/3.1/GtkLabel.html#gtk-label-set-markup)文档中。

# javascript - 32位或64位文件的jsp/javascript前端上传验证

> ID：14582913
> 
> 赞同：0
> 
> 时间：2013-01-29T12:29:06.040
> 
> 标签：javascript, jsp

我有一个上传控件，我需要像javascript一样验证上传的文件是32位还是64位。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:54:49.577

这是使用jquery的简单方法

```
$('#test').bind('change', function() {

  //this.files[0].size gets the size of your file.
  alert(this.files[0].size);

}); 
```

只需在页面的 head 标签中包含最新的 jquery，如下所示：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

下面是它会在上传时显示大小的输入

```
<input type="file" id="test" /> 
```

完整代码如下：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <input type="file" id="test" />

        <script>
            $('#test').bind('change', function() {
                //this.files[0].size gets the size of your file.
                alert(this.files[0].size);
            });
        </script>
    </body>
</html> 
```

现在你可以自己修改它了

# machine-learning - 一类SVM概率估计以及一类SVM和聚类有什么区别

> ID：14582916
> 
> 赞同：2
> 
> 时间：2013-01-29T12:29:13.863
> 
> 标签：machine-learning, computer-vision, svm, libsvm

我有一组图像。我想学习一个类 SVM（OC-SVM）来模拟特定类（正）的分布，因为我没有足够的例子来表示其他类（负）。我对 OC-SVM 的理解是它试图将数据与原点分离，或者换句话说，它试图学习一个超球体来适应一类数据。

我的问题是，

1.  如果我想使用 OC-SVM 的输出作为概率估计，我该怎么做？

2.  OC-SVM 和任何聚类算法（例如 k-means）有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T11:01:04.263

如果您想要概率估计，请不要使用一类 SVM。这不是他们的设计目的。您需要类似[内核密度估计](http://en.wikipedia.org/wiki/Kernel_density_estimation)的东西，它在给定一些正例的情况下提供非参数密度估计。

一类 SVM 和聚类之间的区别在于，在聚类中，你从几个类中获得点，但你不知道哪些点对应于哪些类：这是推理的目标（你也可能最终得到类的密度估计和所有特征空间的边际密度）。一类 SVM 仅从一类中获得分数，并期望学习该类成员与其他任何成员之间的分离。

编辑：聚类与密度估计不同。聚类涉及确定哪些实例属于哪些类（集群），当没有给出分配时，并不一定会导致提供的示例与输入空间中的任何点之间的相似性得分。

如果目标是说这个新实例与我见过的正训练示例有多相似，那么您要做的就是将概率分布拟合到您的训练示例，然后评估新点的密度函数。如果此密度低于阈值，则您说新点不在提供的示例定义的类别之外。

如果您愿意，您可以构建该类的参数模型，但这通常很棘手，除非您对问题有所了解或愿意采用标准分布（多变量正态或朴素贝叶斯是两个明显的分布）。因此，替代方法是使用非参数密度估计。这就是我提到的核密度估计。

# javascript - 根据选择字段的选择计算 EMI

> ID：14582920
> 
> 赞同：0
> 
> 时间：2013-01-29T12:29:27.690
> 
> 标签：javascript, jquery, drupal

我在 Drupal 中有一个表单，我在一次选择更改、两个文本字段和该选择字段本身上获取三个值。我正在减去假定为借出金额的值，并且必须根据选择来计算 EMI，为此我得到了一个公式，但它不起作用。这是我正在使用的代码...

```
$(document).ready(function() {
    var actualAmount = 100000;
    var downPayment = 20000;
    var emi_total_amount = actualAmount - downPayment;
    var selected_emi_type = $("#edit-field-payment-emi-und option:selected").text();
    var emi_amount;

    var rate_24 = 15/(12*100);
    var rate_30 = 15/(12*100);
    var rate_36 = 15.5/(12*100);
    var rate_42 = 15.5/(12*100);
    var rate_48 = 16/(12*100);
    switch (selected_emi_type){
        case '6 EMI':
            emi_amount = parseInt(emi_total_amount/6);
            break;
        case '12 EMI':
            emi_amount = parseInt(emi_total_amount/12);
            break;
        case '24 EMI':
            emi_amount = emi_total_amount x rate_24 x (1 + rate_24)24 / ((1+rate_24)24 -1);
            break;
        case '30 EMI':
            emi_amount = emi_total_amount x rate_30 x (1 + rate_30)30 / ((1+rate_30)30 -1);
            break;
        case '36 EMI':
            emi_amount = emi_total_amount x rate_36 x (1 + rate_36)36 / ((1+rate_36)36 -1);
            break;
        case '42 EMI':
            emi_amount = emi_total_amount x rate_42 x (1 + rate_42)42 / ((1+rate_42)42 -1);
            break;
        case '48 EMI':
            emi_amount = emi_total_amount x rate_48 x (1 + rate_48)48 / ((1+rate_48)48 -1);
            break;                          
    }
    alert(emi_amount);
)}; 
```

我现在给出示例值。我的开关和所有其他东西都工作正常，前两个开关盒也没有公式实现。我知道这个公式可能有问题，但我需要解决它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:33:12.353

您的运算符不是有效的 javascript。

[http://www.w3schools.com/js/js_operators.asp](http://www.w3schools.com/js/js_operators.asp)

# ios - 如何使用textview移动到表格视图中的下一个单元格/行

> ID：14582924
> 
> 赞同：1
> 
> 时间：2013-01-29T12:29:39.027
> 
> 标签：ios, objective-c, uitableview, uitextfielddelegate

我被困在这个问题上。请帮助我解决这个问题。这是我的图像，现在我在表中有 5 个不同的行。如果您在编辑第一个字段后单击第一个文本字段，那么我想要完成按钮单击转到第二个字段并同时打开文本视图和文本字段（如图所示）。归档的**类别**具有选择器视图，**名称**字段（如图所示），**位置**与图像相同，**价格**具有操作表。

现在我已经为**价格字段**的操作表添加了代码。有人可以帮我实现要求吗。谢谢你的帮助...... :)

![在此处输入图像描述](../Images/ac83565de87f0dbf4a9c7cbd97f8ad11.png)

我正在做这样的事情，但它还没有为我工作。代码是：

```
- (void) textFieldDoneTouched
{

    [self.site setValue:textField.text forIndex:selectedRow];

    [UIView animateWithDuration:0.3
                     animations:^{
                         CGRect f = textFieldContainerView.frame;
                         f.origin.y = self.view.frame.size.height;
                         textFieldContainerView.frame = f;
                     }];

    [textField resignFirstResponder];
    NSIndexPath *indexPath = [NSIndexPath indexPathForItem:selectedRow inSection:0];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    self.tableView.userInteractionEnabled = YES;

    [self.view endEditing:TRUE];

    [self validateSiteData];
}

- (BOOL) textFieldShouldReturn:(UITextField *)textField
{

        [self textFieldDoneTouched];
    return YES;
}

#pragma mark -
#pragma mark UITextViewDelegate

- (void) textViewDoneTouched
{

    [self.site setValue:textView.text forIndex:selectedRow];

    [UIView animateWithDuration:0.3
                     animations:^{
                         CGRect f = textViewContainerView.frame;
                         f.origin.y = self.view.frame.size.height;
                         textViewContainerView.frame = f;
                     }];

    [textView resignFirstResponder];
    NSIndexPath *indexPath = [NSIndexPath indexPathForItem:selectedRow inSection:0];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    self.tableView.userInteractionEnabled = YES;

    [self validateSiteData];
}

#pragma mark - UIActionSheetDelegate

- (void) actionSheet:(UIActionSheet *)actionSheet1 clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if(buttonIndex == 0) {
        self.site.price = @"Free";
       // NSIndexPath *indexPath = [NSIndexPath indexPathForItem:4 inSection:0];

       // [self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:100];
        //[textField resignFirstResponder];
       // [textView becomeFirstResponder];
        }
    else if(buttonIndex == 1) {
        self.site.price = @"Paid ($)";
       // NSIndexPath *indexPath = [NSIndexPath indexPathForItem:4 inSection:0];

      //  [self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:100];
       // [textField resignFirstResponder];
         //[textView becomeFirstResponder];
        }

    NSIndexPath *indexPath = [NSIndexPath indexPathForItem:selectedRow inSection:0];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

    [self validateSiteData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:11:44.347

那么，您希望 iPhone 的返回键转到下一个字段，就像在计算机键盘上按 Tab 键一样？

一个小提示：我建议使用默认的灰色“返回”键，而不是屏幕截图中的蓝色“完成”键。*“完成*”是指用户填写完表格并且键盘应该消失的时候；“return”用于转到下一个字段或文本行，就像在 Apple 的联系人应用程序中一样。

![苹果通讯录](../Images/31a39c0f91e0faa94b6bb922931c38fe.png)

与 Apple 的联系人应用程序一样，我还建议您的 UITextField 与其标签（类别、名称...）位于相同的 UITableViewCells 中。我发现屏幕截图中键盘正上方的文本字段有点混乱。如果你这样做，那么下面的实现`textFieldShouldReturn`将使下一个单元格的文本字段成为第一响应者。

```
- (BOOL) textFieldShouldReturn:(UITextField*)textField {
    // Determine the row number of the active UITextField in which "return" was just pressed.
    id cellContainingFirstResponder = textField.superview.superview ;
    NSInteger rowOfCellContainingFirstResponder = [self.tableView indexPathForCell:cellContainingFirstResponder].row ;
    // Get a reference to the next cell.
    NSIndexPath* indexPathOfNextCell = [NSIndexPath indexPathForRow:rowOfCellContainingFirstResponder+1 inSection:0] ;
    TableViewCell* nextCell = (TableViewCell*)[self.tableView cellForRowAtIndexPath:indexPathOfNextCell] ;
    if ( nextCell )
        [nextCell.theTextField becomeFirstResponder] ;
    else
        [textField resignFirstResponder] ;
    return YES ;
} 
```

如果您希望我发布整个项目，请告诉我。

![UITableViewCells 中的 UITextFields](../Images/895dbd58bd63505fda5a8648872de5fa.png)

# c# - 如何使用多行文本框以使用列表项

> ID：14582926
> 
> 赞同：0
> 
> 时间：2013-01-29T12:29:49.063
> 
> 标签：c#, c#-4.0

我想使用具有多行`(TextMode = TextBoxMode.MultiLine)`属性的文本框。但是当我像下面这样写（sample1）时将任何行写入文本框时，我想显示一个像sample2这样的列表项图标。

```
(sample1)
Stack
Over
StackOver
StackOverflow

(sample2)
* Stack
* Over
* StackOver
* StackOverflow 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:13:26.120

这可能不是最优雅的方式，但它对我有用。使用`Key_Up`事件并抓住`Return`关键：

```
private void TextBox1_KeyUp(System.Object sender, System.Windows.Forms.KeyEventArgs e)    {

    if (e.KeyCode == Keys.Return) {

        string[] TextLines = TextBox1.Text.Split(Environment.NewLine);

        TextBox1.Text = "";    

        foreach ( txLine in TextLines) {

            if (!txLine.Contains("*") & !string.IsNullOrEmpty(txLine.Trim)) {
                txLine = "* " + txLine;    
            }

            TextBox1.Text += (txLine + Environment.NewLine);    
        }

        TextBox1.SelectionStart = TextBox1.Text.Length;
        TextBox1.ScrollToCaret();
    }    
} 
```

注意你会在两行之间得到一个空行，我会让你修复它:-)

# php - 无法运行 FuelPHP 动作

> ID：14582927
> 
> 赞同：0
> 
> 时间：2013-01-29T12:29:50.347
> 
> 标签：php, url-rewriting, fuelphp

我是 FuelPHP 的新手，我用它做了一些编码！我所做的是创建一个简单的控制器并创建了两个方法。一个是 action_index()，另一个是 action_add()。代码如下。视图已经在 app\views\ 文件夹中。

```
 class Controller_Student extends Controller
{
    public function action_index()
    {
        return Response::forge(View::forge('index'));
    }

    public function action_add()
    {
        return Response::forge(View::forge('select'));
    }
} 
```

我已将根设置为此控制器类。当我运行应用程序时，索引工作正常并加载定向视图。但是当我给出以下网址时

```
 http://localhost/project/public/add/ 
```

该方法没有被调用！一个 404 错误是给说

```
 You can see this page because the URL you are accessing cannot be found. 
```

我在这里做错了什么。我已经浏览了我找到的所有文档和教程，但我不应该得到这种类型的错误。请帮我。

下面是路由文件代码：

```
 return array(
'_root_'  => 'student',  // The default route
'_404_'   => 'welcome/404',    // The main 404 route
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:43:07.397

您已将根设置为`student`控制器，但这并不意味着所有流量都通过该控制器。尝试访问： `http://localhost/project/public/student/add/`

# java - 如何停止发送密钥

> ID：14582928
> 
> 赞同：1
> 
> 时间：2013-01-29T12:29:52.477
> 
> 标签：java, swing, listener, keyboard-events

是否可以阻止分发密钥？我基本上想禁用数字键盘触发其数字 - 它应该触发一个宏。问题是两者兼而有之。这是代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent keyEvent) {

    //If key has macro assigned then fire that (working fine) 

    if (keyEvent.getKeyLocation() == KeyEvent.KEY_LOCATION_NUMPAD) {
         return true;
    }
} 
```

阅读 KeyEventDispatacher 的规范，如果返回 false，则表示它将传递事件。它似乎在做同样的事情。有没有办法阻止它传递事件？还是我在做一些愚蠢的事情？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:41:33.733

您应该调用[`consume()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/InputEvent.html#consume%28%29)该事件以显示它已被处理。

```
@Override
public boolean dispatchKeyEvent(KeyEvent keyEvent) {

    if (keyEvent.getKeyLocation() == KeyEvent.KEY_LOCATION_NUMPAD) {
         keyEvent.consume();
         return true;
    }
} 
```

# android - 在 onDestroy 中进行所有清理是否安全？

> ID：14582929
> 
> 赞同：13
> 
> 时间：2013-01-29T12:29:53.850
> 
> 标签：android, android-asynctask, android-activity, activity-lifecycle, ondestroy

更具体地说：在 onDestroy 中取消任务是否安全？此外，使用 onDestroy 注销接收器和释放资源是否安全？

我的目标是确保我的任务在 Activity 被销毁时被取消/销毁，但不是在此之前。

销毁（）：

1.  当活动被销毁并且必须释放资源时调用。
2.  当活动被匆忙销毁时（当系统资源不足时等）时不会调用。

第一种情况很清楚：我在 onDestroy 中进行了所有清理，没有出现任何问题。第二种情况虽然有点问题。当 Activity 被销毁并跳过 onDestroy（所以我不会取消我的任务）时，是否会发生任务继续执行，然后完成并尝试更新死 Activity，因此应用程序崩溃？

* * *

我们来到了真正的问题：

1.  **当一个 Activity 被杀死并跳过 onDestroy 时，附加到该 Activity 的所有东西都会自动销毁吗？****（只有在**一切都被彻底清除的情况下才跳过 onDestroy ？任务、注册的接收者等）
2.  如果跳过 onDestroy 是否意味着**整个应用程序**被杀死？

* * *

让我们关注 onDestroy()，因为解决方案不在 onPause() 或 onStop() 中。论据：

*   onStop() 可以在 Activity 被销毁时跳过，就像 onDestroy
*   onPause 调用太早且太频繁，因此不适合用例。例子：

**屏幕锁定：设备****屏幕锁定**时可以调用onPause 。很多时候，这就像屏幕保护程序一样发生，用户会立即解锁，因为他站在那里看着屏幕。在这种情况下取​​消任务并停止我的应用程序正在执行的所有操作只会降低用户体验。我不希望我的应用程序仅仅因为偶然的“屏幕保护程序”而窒息和行为不端。

在示例应用程序中，我有两个屏幕是活动。用户可以在它们之间快速切换。在这个应用程序中，用户倾向于经常快速地切换屏幕。

**导航**：其中一个屏幕有一张地图，可以从系统接收位置更新。它记录了位置（路线）变化的精确图形日志，因此它需要不断运行，直到 Activity 关闭。通常我会在 onResume 和 onPause 中注册和取消注册任何接收器。但是，这会使应用程序非常不可用，因为每次用户导航离开时地图上的更新都会停止。因此，我想在 onDestroy 中注销接收器。

**加载列表**：第二个屏幕有一个列表，显示来自网络服务的数据。下载数据需要 4 秒。我使用 AsyncTask 并且我知道我应该在必要时取消。它不应该在 onPause 中取消，因为它应该在用户在屏幕之间切换时继续加载。因此，我想在 onDestroy 中取消它。

可以有更多的例子。在每个人看来，其中一些可能并不完全合适（您甚至可能建议使用服务而不是 AsyncTask）。但是这个想法很重要，他们都有一个相同的**想法**：继续做特定于 Activity 的工作，而 Activity*暂停，但确保在 Activity 被**销毁*时停止做。（无论我使用的是 AsyncTask 还是 Service，都没有关系。无论哪种情况，都应该在 Activity 被销毁时停止工作。）

PS 如果答案是*在 onDestroy 中进行清理是不安全的*，这意味着 Android 框架要求我们停止我们在 onPause 中所做的一切。然后我看不到任何使用 onDestroy 的理由......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T08:21:37.620

我想向您推荐这个宝贝： http: [//developer.android.com/reference/android/content/ComponentCallbacks2.html#onTrimMemory(int)](http://developer.android.com/reference/android/content/ComponentCallbacks2.html#onTrimMemory%28int%29)

本质上，它为您提供了系统认为取消任务和清理内存有用的所有地方：

请仔细看看以下2个案例：

TRIM_MEMORY_UI_HIDDEN - 进程一直显示用户界面，现在不再显示。

TRIM_MEMORY_COMPLETE - 进程接近后台 LRU 列表的末尾。

你问的大部分情况都是这样的。

在相同的方法中，您还可以捕获 TRIM_MEMORY_RUNNING_CRITICAL，它会提醒您系统没有内存并且必须立即采取特殊措施的情况。

这种方法使我在类似情况下的开发生活变得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T17:26:02.520

如果您只需要进行一些清理，那么无论活动如何关闭，您都应该能够使用[`onSaveInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和的组合[`onDestroy()`](http://developer.android.com/reference/android/app/Activity.html#onDestroy())。无论如何都应该调用其中之一。也许`boolean cleanupDone`在您的活动中有一个，只要两个完成之一就设置。

关于**保存用户数据**，请看[Saving Persistent State](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)：

谷歌建议一个

> “就地编辑”用户模型

即：用户创建新数据后立即保存，最迟在`onPause()`. 这并不意味着您需要在 中重新创建数据`onResume()`，只是应该保存它。

顺便说一句：`onStop()` [只能在蜂窝设备之前的设备上跳过](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，也就是说，[截至 2015 年 6 月](http://www.androidcentral.com/lollipop-now-available-over-10-percent-active-android-installs)，不到所有设备的 6%。尽管如此，如果其中一个或被省略，`onSaveInstanceState()`则应该调用。`onDestroy()``onStop()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:36:03.447

就我使用安卓而言，

**1**当您的应用程序崩溃时，与之相关的所有资源都会被销毁。

**2**当设备更改配置导致 Activity 被销毁并重新创建时。

**3**当在后台运行的应用程序和 Android 由于运行在低内存上而杀死它时

除了这些之外，还调用了其他回调方法，即

1当另一个活动出现在前面，或者您的设备锁定..etc

在所有情况下，根据您的要求，您可以释放 onDestroy 中的所有资源并取消 Thread 和 Asyntask 并停止所有服务等。如果您希望您的任务在调用销毁时保持暂停和活动状态，那么您可以保存配置并保留它而 onCreate 通过检查是否为空再次调用。

# php - htaccess 实现stackoverflow之类的链接

> ID：14582930
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:29:54.943
> 
> 标签：php, .htaccess

> **可能重复：**
> [如何像 stackoverflow 那样编写 .htaccess 重定向来解决它的问题](https://stackoverflow.com/questions/4583106/how-to-write-a-htaccess-redirect-like-stackoverflow-does-for-its-questions)

说我页面的链接是这样的......

[http://example.com/test.php?id=10978&name=html-tutorial-for-beginners](http://example.com/test.php?id=10978&name=html-tutorial-for-beginners)

我怎样才能做到

[http://example.com/10978/html-tutorial-for-beginners](http://example.com/10978/html-tutorial-for-beginners)

我有多个页面，例如

[http://example.com/more_test.php?id=1054758&name=how-to-use-htaccess](http://example.com/more_test.php?id=1054758&name=how-to-use-htaccess)

[http://example.com/some_more_test.php?id=10324758&name=some-thing-good](http://example.com/some_more_test.php?id=10324758&name=some-thing-good)

另外我如何从表单或锚标签发布？

是不是像 action="http://example.com/test.php?id=10978&name=html-tutorial-for-beginners"

或 action="http://example.com/10978/html-tutorial-for-beginners"

对于锚标签 href="http://example.com/test.php?id=10978&name=html-tutorial-for-beginners"

或 href="http://example.com/10978/html-tutorial-for-beginners"

我如何为 test.php、more_test.php some_more_test.php 等多个文件实现它

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:12:55.090

根据您的链接修改，我认为您希望在核心 php 文件中创建 SEO 友好的 url。基本上它会在 MVC 框架中。

但在代码php中仍然不是不可能的

第一步 创建 index.php 文件或任何其他将在每次页面调用时指向的文件 创建 .htaccess 文件，其中将定义任何页面调用请求的规则。下面是 .htaccess 文件代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

在 index.php 中，我们检查了页面的请求或 url，基于它我们可以调用所需的文件或操作 [通过提取查询字符串]。

愿这对你有帮助

# android - 使用 Facebook Android SDK 限制权限

> ID：14582934
> 
> 赞同：0
> 
> 时间：2013-01-29T12:30:00.103
> 
> 标签：android, facebook, facebook-android-sdk

我目前正在将一个 android 应用程序与新的 Android Facebook 3 SDK 集成。

我已经让它工作了，但我注意到在 facebook 上的“我的应用程序”中，它指出该应用程序需要代表我发布给我的朋友。这不是这个应用程序的要求，我没有特别要求任何额外的权限。我注意到我的应用中心中的许多其他应用只能发布到“只有我”。

如何消除对此权限的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:35:06.613

您可以为此使用该类的setReadPermissions [()](https://developers.facebook.com/docs/reference/android/3.0/LoginButton#setReadPermissions%28List%29)`LoginButton`。

这只会设置读取权限。

要设置发布权限，您需要使用[setPublishPermissions()](https://developers.facebook.com/docs/reference/android/3.0/LoginButton#setPublishPermissions%28List%29)。

登录按钮一次只能与其中一个关联。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T18:02:49.420

如果您在 facebook 设置中看到您的应用具有发布权限，这意味着您在某些时候已授权该应用获得发布权限。

如果您想从您的设置中删除它，您可以删除该应用程序，或仅删除“代表您发布”权限（在您的 Facebook 设置中）。

然后，您可以将您的应用更改为仅请求读取权限，而不是发布权限。您不能直接从应用程序中删除权限，您只能请求更多权限。

# c# - 使用 Linq (NHibernate) 进行条件分组和选择

> ID：14582936
> 
> 赞同：1
> 
> 时间：2013-01-29T12:30:01.713
> 
> 标签：c#, linq, nhibernate

我有这个查询：

```
var group = query.GroupBy(x => new
{
   ...
   TestName =  isSelected ? x.ClassA.Name : "" 
});

var select = group.Select(y => new MyResultDTO()
{
   ...
   TestName = isSelected ? y.First().ClassA.Name : ""  
}); 
```

这不是工作......我收到一个错误：

**列 'tblClassA.Name' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。**

但是，如果我将 groupBy 更改为 only（采用条件条款）：

```
TestName = x.ClassA.Name 
```

它工作正常......知道我该怎么做那个条件 GroupBy/Select 吗？

我正在使用 NHibernate 3.3.1

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:05:05.447

不确定你想达到什么目标，但你试过写作吗？

```
var select = group.Select(y => new MyResultDTO()
{
   ...
   TestName = y.Key.TestName  
}); 
```

此外，您可以为您的小组尝试这样的事情：

```
var group = query.Where(isSel=>isSel.isSelected).GroupBy(x => new
{
   ...
   TestName =  x.ClassA.Name 
})
.Union(query.Where(isSel=>!isSel.isSelected).GroupBy(x => new
{
   ...
   TestName = "" 
}); 
```

希望这会有所帮助

# c++ - 无法在 QtCreator 中使用 GDB 进行调试

> ID：14582937
> 
> 赞同：1
> 
> 时间：2013-01-29T12:30:02.550
> 
> 标签：c++, mingw, qt-creator

我正在使用 Qt 和 opencv 开发基于 GUI 的视频处理项目，但由于我遇到很多应用程序崩溃，我需要调试代码。我正在使用 mingw4.4 和 Qt creator 但每次我尝试调试 Windows 时都会说 gdb.exe 已停止工作并详细说明为：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: gdb.exe
  Application Version:  0.0.0.0
  Application Timestamp:    49a7f7bd
  Fault Module Name:    msvcrt.dll
  Fault Module Version: 7.0.7600.16930
  Fault Module Timestamp:   4eeaf834
  Exception Code:   c0000005
  Exception Offset: 000143f9
  OS Version:   6.1.7600.2.3.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

我正在使用 Windows 7 32 位...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:22:00.707

[从http://www.equation.com/servlet/equation.cmd?fa=gdb](http://www.equation.com/servlet/equation.cmd?fa=gdb)下载并安装较新版本的 gdb并更改 Qt 选项中的调试器路径以使更改生效...

# selenium - 使用 selenium 在弹出文本字段中自动插入值

> ID：14582942
> 
> 赞同：1
> 
> 时间：2013-01-29T12:30:17.127
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我正在尝试使用下面的代码将值自动插入到弹出窗口中的字段（见附图）。但是使用下面的自动化代码不会将值插入到字段中。

如果有人可以提供相同的原因和解决方案，将不胜感激。

任何帮助表示赞赏：

![在此处输入图像描述](../Images/0650a1fd9f5310efc6132a58436ad926.png)

```
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import java.util.concurrent.TimeUnit;
import static org.junit.Assert.fail;

public class test9 {
private WebDriver driver;
private String baseUrl;
private boolean acceptNextAlert = true;
private StringBuffer verificationErrors = new StringBuffer();
private WebElement foundElement;
@Before
public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://www.url.com/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
}

@Test
public void test9() throws Exception {
    driver.get(baseUrl + "/Login.aspx");
    driver.findElement(By.id("dnn_ctr362_Login_Login_DNN_txtUsername")).clear();
    driver.findElement(By.id("dnn_ctr362_Login_Login_DNN_txtUsername")).sendKeys("comp-da@comp.com");//dummy username
    driver.findElement(By.id("dnn_ctr362_Login_Login_DNN_txtPassword")).clear();
    driver.findElement(By.id("dnn_ctr362_Login_Login_DNN_txtPassword")).sendKeys("password");//dummy password
    driver.findElement(By.id("dnn_ctr362_Login_Login_DNN_cmdLogin")).click();
    driver.findElement(By.xpath("//div[@id='Nav']/span/span/div[3]/a")).click();
    driver.findElement(By.id("dnn_cd_Banner_Customer_b")).click();
    Thread.sleep(10000);
    WebElement userName = find(By.xpath("//*[@id=\"dnn_ctr384_View_CreateDealerAdmin_email\"]"),"abc@gmail.com");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_firstname"),"Abc");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_lastname"),"R");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_firstname"),"test1");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_lastname"),"abc");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_password"),"password");
    find(By.id("dnn_ctr384_View_CreateDealerAdmin_passwordconfirm"),"password");
    search(By.id("dnn_ctr384_View_CreateDealerAdmin_create_b_input"));
    driver.findElement(By.cssSelector("div.Controls")).click();
    driver.findElement(By.id("dnn_dnnLogin_enhancedLoginLink")).click();
}

@After
public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
        fail(verificationErrorString);
    }
}

private boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
}

public WebElement find(By by,String keys){
    By byy = by;
    String key=keys;
    System.out.println(by.toString()+keys.toString());
    for (int milis=0; milis<3000; milis=milis+3000) {
        try {
            foundElement = driver.findElement(by);
            //driver.findElement(by).clear();
            driver.findElement(by).click();
            Thread.sleep(5000);
            foundElement.sendKeys("");
            Thread.sleep(5000);

            foundElement.sendKeys(keys);
            Thread.sleep(5000);

            foundElement.sendKeys(keys);

        } catch (Exception e) {
            try {
                Thread.sleep(200);
            } catch (InterruptedException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
        }

    }
    return foundElement;

}

public WebElement search(By by){
    By byy = by;

    for (int milis=0; milis<3000; milis=milis+3000) {
        try {
            driver.findElement(by).click();
            driver.findElement(by).click();

        } catch (Exception e) {
            try {
                Thread.sleep(200);
            } catch (InterruptedException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
        }
    }
    return foundElement;
}

private String closeAlertAndGetItsText() {
    try {
        Alert alert = driver.switchTo().alert();
        if (acceptNextAlert) {
            alert.accept();
        } else {
            alert.dismiss();
        }
        return alert.getText();
    } finally {
        acceptNextAlert = true;
    }
}
} 
```

**编辑**

包括包含电子邮件、名字、姓氏等的 html。

```
<div id="Heading">
<span id="dnn_ctr384_View_CreateDA">Create DA</span>
<span class="nyk_ButtonSpan">
</div>
<table id="dnn_ctr384_View_CreateDealerAdmin" class="nykTable" border="0">
<tbody>
<tr class="nykRow">
<td class="nykCreateLbl" style="vertical-align: top">
<td class="nykCreateEntry">
</tr>
<tr class="nykRow">
<tr class="nykRow">
<tr class="nykRow">
<tr class="nykRow">
<tr id="dnn_ctr384_View_CreateDealerAdmin_assigned2_row" class="nykRow">
<tr class="nykRow">
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T14:02:05.593

而不是使用“ **Alert alert = driver.switchTo().alert()** ”语句，您将不得不使用“ **driver.switchTo().activeElement()** ”。这是您问题的解决方案。

# javascript - jquery排序和过滤表

> ID：14582945
> 
> 赞同：1
> 
> 时间：2013-01-29T12:30:21.243
> 
> 标签：javascript, jquery, sorting, jquery-plugins

我在排序和过滤 html 表时遇到问题。

[我使用 jQuery propdown Table Filter 插件](https://github.com/rbayliss/Dropdown-Table-Filter) ，它对我来说效果很好，但是，

现在它看起来像这样：

![在此处输入图像描述](../Images/4bf96661a107b12d67954f5bc7422079.png)

但问题是我还需要按值对表进行排序`(A-Z/Z-A)`，而且我不擅长通过 JQuery 重新编写这个插件。它必须看起来像这样（添加排序选项以选择）：

![在此处输入图像描述](../Images/de7bede59b5ac8bbe73d78dfcff7239f.png)

你能给我方向吗，我可以在哪里看？我找到了很多 jQuery 插件，但没有一个能满足我的需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:37:27.497

您是否想过使用 JQuery 数据表？它们非常易于使用，默认情况下您可以对列进行排序并过滤数据（搜索框根据输入文本对所有列执行过滤）。

[http://www.datatables.net/](http://www.datatables.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:06:02.030

对于上述排序，您可以检查字符的 ascii 值，然后根据它对字符进行排序。

对于非英文字符，找到ascii值，然后排序。

例如

```
"ABCDEF".charCodeAt(0)  // return 65 
```

同样的方式

```
"CÃNT".charCodeAt(1) // return 195 
```

愿这对你有帮助

# php - PHP 卷曲和 Json

> ID：14582948
> 
> 赞同：0
> 
> 时间：2013-01-29T12:30:23.633
> 
> 标签：php

我的问题是我想使用 curl 访问我的 fb 朋友并将其解码为 json，然后我只想显示那些名字以字母 a 开头的朋友，例如 aman、adam 等请帮助我..以下是我的代码。

```
<?php
// create a new cURL resource
$json_url="https://graph.facebook.com/100001513782830/friends?access_token=AAACEdEose0cBAPdK62FSjs4RvA21efqc8ZBKyzAesT5r4VSpu0XScAYDtKrCxk4PmcRBVzE2SLiGvs2d5FeXvZAD72ZCShwge3vk4DQqRAb8vLlm1W3";
$ch = curl_init( $json_url );

    // Configuring curl options
/*  $options = array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_HTTPHEADER => array('Content-type: application/json')
        );

    // Setting curl options
    curl_setopt_array( $ch );

    */// Getting results
    $result =  curl_exec($ch); // Getting jSON result string

    $obj = json_decode($result, true);
    foreach($obj[data] as $p)
    {
        echo '

        Name: '.$p[name][first].'

        Age: '.$p[age].'

        ';

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:45:56.533

顺便说一句，将安全令牌（在 URL 中）发布到公共场所不是一个好主意。

由于名称是字符串，您可以简单地遍历该数组并按名称过滤：

```
$letter = 'A';
foreach($obj['data'] as $p) {
    if ($p['name'][0] == $letter) {
        // do something with $p
    }
} 
```

但是 UTF-8 有一个小问题——这个解决方案（以及那个也有 substr 的解决方案）不适用于多字节字符。所以你需要使用 mb_substr 而不是普通的 substr 函数：

```
foreach($obj['data'] as $p) {
    if(mb_strtolower(mb_substr($p['name'], 0, 1))) == 'Á'){
        echo "Name: ", $p['name'], "\n",
             "Age: ", $p['age'], "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:35:41.697

您当然会尽量不要硬编码“a”，但为了这个目的：

```
foreach($obj[data] as $p){
  if(strtolower(substr(trim($p[name][first]),0,1)) == 'a'){
       echo 'Name: '.$p[name][first].'Age: '.$p[age];
  }
} 
```

# java - 如何获取hibernate的配置类代码？

> ID：14582953
> 
> 赞同：-2
> 
> 时间：2013-01-29T12:30:35.780
> 
> 标签：java, hibernate

我想获取`hibernate.cfg.Configuration`类代码的代码..我的意思是类的完整java代码..我`Configuration`怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:56:25.973

1.  在线查看：http: [//www.docjar.com/html/api/org/hibernate/cfg/Configuration.java.html](http://www.docjar.com/html/api/org/hibernate/cfg/Configuration.java.html)
2.  从 GitHub 获取：[https ://github.com/hibernate/hibernate-orm](https://github.com/hibernate/hibernate-orm)
3.  克隆仓库： git clone git://github.com/hibernate/hibernate-orm.git
4.  如果您已经使用 maven：使用 -DdownloadSources 获取工件的来源

然后反编译类有很多更好更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:48:44.133

好的 .. ！所以我想出了一些方法......你需要下载一个java反编译器。..你可以在这里得到一个：http: [//java.decompiler.free.fr/](http://java.decompiler.free.fr/)

# tridion - 使用 Tridion WebDAV 更新文件夹和文件夹内容

> ID：14582955
> 
> 赞同：10
> 
> 时间：2013-01-29T12:30:38.140
> 
> 标签：tridion, tridion-2011

我遇到了一个问题，不知道有没有人解决了这个问题。
我正在使用 Tridion webdav (Tridion 2011 SP1 HR1) 将结构化内容（文件夹 + 二进制文件）插入到出版物中。文件夹不存在时一切正常，但如果文件夹存在，则会出现错误：

> 您无权访问此 Web 文件夹位置

查看日志文件，问题是当我拖放现有文件夹并重命名为文件夹标题时，Tridion 尝试创建一个新文件夹，并给出错误：

> 对于以下类型的项目，名称必须是唯一的：此文件夹中的文件夹/虚拟文件夹及其蓝图上下文。

我尝试使用事件来避免在文件夹存在时保存它（在启动阶段引发异常），但是在更新文件夹内的内容时出现权限错误。

有没有人尝试做类似的事情？
有没有人可以尝试的任何建议？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:13:30.803

这与 Tridion 无关，因为您使用 Windows 资源管理器访问 WebDAV，所以如果有的话，应该归咎于资源管理器发送错误的请求，但是如果您将在此处查看 WebDAV sprcification：[http://www。 webdav.org/specs/rfc4918.html](http://www.webdav.org/specs/rfc4918.html)，你可以在第 9 章看到所有可能的调用。

Tridion 文件夹被视为集合，因此`MKCOL`需要创建一个文件夹，但如果您检查`9.7.2 PUT for Collections`，您将看到：

> 9.7.2 集合的 PUT
> 
> 本规范没有为现有集合定义 PUT 方法的行为。对现有集合的 PUT > 请求可能被视为错误（405 方法不允许）。
> 
> MKCOL 方法被定义为创建集合。

所以没有办法更新现有的文件夹，它确实是`create`and `upload contents`。

如果您对 WebDAV 协议感兴趣，也可以查看这篇文章：http: [//amarchuk.blogspot.nl/2011/10/heres-c-webdav-client-that-works-with.html](http://amarchuk.blogspot.nl/2011/10/heres-c-webdav-client-that-works-with.html)

# file - Lighttpd：可以进行文件上传前操作吗？

> ID：14582958
> 
> 赞同：2
> 
> 时间：2013-01-29T12:30:48.400
> 
> 标签：file, upload, triggers, lighttpd

我的场景是这样的：在嵌入式设备上，我们有一个使用 lighttpd 的 Web 界面和一个基于 cgicc 的应用程序。上传新固件需要很长时间，尤其是 CPU 负载很重（这是现场操作的典型情况）。例如，从“顶部”以 80% 的 CPU 使用率运行上传需要 5-10 分钟（！），关闭服务只需 1 分钟。

因此，我必须实现一些允许我在文件上传开始之前停用服务的东西。问题是在lighttpd 将整个文件上传到一组临时文件*后，我的 CGI 会识别文件上传操作。*我唯一的想法是实现第二个按钮，允许操作员在开始上传之前手动禁用服务。但这并不是很优雅。

在 Javascript 中，我可以隐藏第二个按钮并使用上传按钮模拟点击（我可以捕捉到文件输入的点击吗？）。但这听起来很肮脏，尤其是我们使用不*显眼的 Javascript*模式。

还有其他方法可以启动一些文件上传前的操作吗？也许通过我不知道的 HTTP 或浏览器等的模块或其他功能？

PS：我们需要向后兼容 IE6，所以不能使用 HTML5 功能。我们使用 XHTML 1.0 严格模式。

# sql - SQL 初学者 - 为什么我的 MySQL 连接查询不使用索引/工作这么慢？

> ID：14582963
> 
> 赞同：1
> 
> 时间：2013-01-29T12:30:57.337
> 
> 标签：sql, join, indexing

我的 MySQL 5.5 DB 出现以下问题 - 我对此很陌生，所以可能很明显出了什么问题，但我似乎无法理解：

两张表：

* * *

表格1

```
CREATE TABLE `sequence_matches` (
    `Sample_ID` INT(6) NOT NULL,
    `Sequence_Match_ID` INT(8) NOT NULL,
    `Start` INT(6) NULL DEFAULT NULL,
    `End` INT(6) NULL DEFAULT NULL,
    `Coverage` DOUBLE(5,2) NULL DEFAULT NULL,
    `Frag_String` VARCHAR(255) NULL DEFAULT NULL,
    `rms_mass_error_prod` DOUBLE(10,4) NULL DEFAULT NULL,
    `rms_rt_error_prod` DOUBLE(10,4) NULL DEFAULT NULL,
  PRIMARY KEY (`Sample_ID`, `Sequence_Match_ID`)
) 
```

* * *

和

* * *

表 2

```
CREATE TABLE `peptide_identifications` (
   `Sample_ID` INT(6) NOT NULL,
   `Peptide_identification_ID` INT(8) NOT NULL,
   `Mass_error` DOUBLE(10,4) NULL DEFAULT NULL,
   `Mass_error_ppm` DOUBLE(10,4) NULL DEFAULT NULL,
   `Score` DOUBLE(10,4) NULL DEFAULT NULL,
   `Type` VARCHAR(45) NULL DEFAULT NULL,
   `global_pept_ID` INT(8) NOT NULL,
  PRIMARY KEY (`Sample_ID`, `Peptide_identification_ID`),
  INDEX `Index` (`global_pept_ID`)
) 
```

* * *

它们每个都包含约 1500 万行。

现在，我想要来自`Table2`where的所有这些行`global_pept_id = 27443`，然后使用其中`peptide_identification_id`的那些，从`Table1`where查询所有信息`peptide_identification_id = sequence_match_id`。

我尝试了以下语句：

```
SELECT * from sequence_matches 
JOIN (
  SELECT peptide_identification_id 
  FROM peptide_identifications 
  WHERE global_pept_id = 27443
) as tmp_pept 
ON sequence_match_id = peptide_identification_id; 
```

这里是该查询的解释：

[![http://i.stack.imgur.com/QV3ER.jpg](../Images/92b79287630136b8085b95884d422d86.png)](https://i.stack.imgur.com/QV3ER.jpg)（点击放大）

现在这个查询非常非常慢（我实际上从未完成它，大约 10 分钟后停止它），我可以想象这是因为没有用于第二个表的索引，尽管两个 ID 都是主键，因此它们应该被索引对吗？

内部选择的结果需要 ~3 sek，如果单独执行，则返回 ~3k 行。所以我认为问题在于进行 3000 * 15mio 比较，因为在表 2 中检查了每一行。

但是我该如何解决这个问题？

任何帮助表示赞赏-voiD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:36:36.427

这可能是因为您要加入子查询。尝试：

```
SELECT sm.*, pi.peptide_identification_id
FROM sequence_matches sm
INNER JOIN peptide_identifications pi
ON sm.id = pi.peptide_identification_id
WHERE pi.global_pept_id = 27443 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:49:53.293

与其他解决方案略有不同。首先考虑您尝试获得的主要标准……给定全局肽值的那些肽元素。确保您在此表上具有您可能要查询的任何此类条件的索引（您有）。但是，如果您发现您将针对同一个表查询多个 WHERE 条件，请尝试准备/拥有一个有助于满足这两个条件的索引。

然后，在 PK/FK 关系上对另一个表添加 JOIN 条件以获取这些记录。

```
SELECT * 
   from 
      peptide_identification PI
         JOIN sequence_matches SM
            ON PI.peptide_identification_id = SM.sequence_match_id
   WHERE 
      PI.global_pept_id = 27443 
```

如果没有适当的索引，可能会严重影响查询的性能。您的 Sequence_Matches 表应仅在 (Sequence_match_ID) 上有一个索引，以帮助其优化。将它放在第二个位置（在 sample_id 之后）不会像预期的那样受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:36:05.080

一个提示是避免子选择。有时它们很棒，但通常会导致性能不佳。更好的方法可能是：

```
SELECT * from peptide_identification as tmp_pept
JOIN sequence_matches  
    ON sequence_matches.sequence_match_id = tmp_pept.peptide_identification_id
WHERE tmp_pept.global_pept_id = 27443 
```

这行得通吗？

编辑：不，真正的问题是 sequence_match_id 上没有索引。添加一个，你可能会没事的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:39:27.460

> 我认为问题可能是因为您现在创建了交叉连接而不是内部连接。您的子查询正在创建 1500 万行 * 300 万行的笛卡尔积。
> 
> 使用内部连接，您可以将该数字减少到 1500 万 * 3000 行。
> 
> 这仍然是一个巨大的数字。在 Sql 端，你可以通过发出 TOP 10 或 TOP 20 来限制它。
> 
> 在前端，如果是 C#，您应该在数据源上使用诸如 gridviewpager 或其他分页技术之类的分页技术，假设您将在前端显示结果，该结果将位于您的 SQL 连接查询和第 20 页结果的顶部一次。

# jquery - 为什么我的 JQuery .animate() 不起作用？

> ID：14582969
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:31:16.573
> 
> 标签：jquery, html, animation

```
<head>

<script type="text/javascript" src="lib/jquery-1.9.0.min.js"></script>      
<script type="text/javascript" src="source/jquery.fancybox.js?v=2.1.4"></script>
<link rel="stylesheet" type="text/css" href="source/jquery.fancybox.css?v=2.1.4" media="screen" />
<link rel="stylesheet" type="text/css" href="assets/style.css" />

<script>

$(document).ready(function () {
   $('.fancybox').fancybox();
});

</script>
<script>
  $(document).ready(function () {
        $(".allSideBars").delay(3000).animate({ marginLeft: "-100%"}, 700);
    });
</script>

</head> 
```

这是我在违规页面上的部分中的代码。当我链接到以下脚本时，动画部分在我的主页上运行良好：

```
<script type="text/javascript" src="assets/jquery-1.5.1.js"></script> 
```

那么仅仅是因为我的脚本链接吗？如果是这样，我怎样才能在我的其他页面上进行这项工作？我想做的就是像在主页上一样在我的所有页面上触发此动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:33:21.437

Http 是一种无状态协议，所以如果你想让一个脚本在多个页面上工作，你必须在每个页面上都包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:37:21.493

要测试您的 jquery，请使用如下方式：

```
<script>
  $(document).ready(function () {
        console.log('it works!');
    });
</script> 
```

您是否在控制台中看到此消息（打开 Chrome 按 F12 并单击控制台选项卡）它的工作！

# c# - Windows 窗体 - 如何获取 MDIparent 窗体

> ID：14582970
> 
> 赞同：2
> 
> 时间：2013-01-29T12:31:21.067
> 
> 标签：c#, winforms, visual-studio-2010, mdi

我有一个`MDIform`应用程序，其中一个名为的表单`MainForm`设置为父级。每次我打开一个新表单时，我都会关闭其他表单，并使用自定义方法进行操作，该方法获取 3 个参数，其中一个`object`代表`MDIparent`. 大多数情况下，我从我`MainForm`的表单中打开表单，`MDIparent`但我有这种情况，我必须从另一个子表单中打开一个子表单。假设我调用我的方法来打开一个新表单，例如：

> NewForm newForm = getMyForm(this, arg2, arg3)

当我在`MainForm`其中也是父母时，这很容易。但是如何调用我的方法或`MDIparent`当我从其他子窗体调用时如何传递我的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:32:50.073

您可以使用[Form.MdiParent](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdiparent.aspx)属性，该属性将为您`MDI Parent`提供当前表单。

```
MainForm frm = this.MdiParent as MainForm;
if(frm != null)
    //form found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:34:38.547

你试过像

从你的`MainForm`

```
 var f = new NewForm() { MdiParent = this};
 f.Show(); 
```

作为 Habib 先生的例子，请注意`method`from the `MainForm`is 必须是 a `public`。

```
MainForm frm = this.MdiParent as MainForm;
if(frm != null)
{
  frm.Methods(this, arg2, arg3)
} 
```

# javascript - window.open 的内联 javascript

> ID：14582973
> 
> 赞同：0
> 
> 时间：2013-01-29T12:31:36.283
> 
> 标签：javascript, jquery, popup

我有个问题。我想打开一个点击链接的窗口，条件是它尚未打开。像这样的东西。

```
function openPopupOneAtATime() {
    if (popup && !popup.closed) {
        popup.focus();
    }
    else {
        popup = window.open("http://www.google.com", 'window');
        return false;
    }
} 
```

我不想在函数中写这个。我想写一个内联 onclick 事件来检查这个 if 条件 .. 像这样

```
onclick="if (popup && !popup.closed){("http://www.google.com",'window')}" 
```

我将声明一个 javascript 变量

```
var popup; 
```

如果一个窗口已经打开并且我们尝试打开一个同名的新窗口，**浏览器**会在同一个窗口中重新加载页面。我不希望这种事情发生。如果同名的窗口已经打开。要么把焦点放在那个窗口上，要么什么都不做。如果我根据函数编写代码并调用函数 onclick ，代码工作正常，但我希望这个东西是内联的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:40:27.840

对于初学者：这与 jQuery 无关。

为什么要在 onclick 中内联代码？内联javascript事件是不好的做法

关于如何做到这一点的文章：谷歌是你的朋友！[http://www.idocs.com/tags/linking/linking_famsupp_89.html](http://www.idocs.com/tags/linking/linking_famsupp_89.html)

# javascript - 如何在 Opera 中获得离开页面确认？还有什么办法吗？

> ID：14582974
> 
> 赞同：0
> 
> 时间：2013-01-29T12:31:45.953
> 
> 标签：javascript, javascript-events

离开页面确认适用于除 Opera 之外的所有浏览器。

我需要做支持 Opera 的离开页面确认。请任何人提出一些建议。或者编辑我的代码。这可能对我有很大帮助。

我的java脚本代码是，

```
window.onbeforeunload = function () {

    return  "Are you Sure want to LOGOUT the session ?";
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T11:45:59.793

从 Opera 15 开始支持 onbeforeunload ！

# jquery - 仅当字段曾经处于活动状态时，jQuery 验证所需字段才有效。

> ID：14582977
> 
> 赞同：0
> 
> 时间：2013-01-29T12:31:56.963
> 
> 标签：jquery, jquery-validate

对不起，一般问题。我有表单 id =“formID”、此表单的验证器和一些带有“必需”类的元素。我应该如何为保存按钮编写 onclick 方法，以便在某些输入为空时它不起作用？

```
function onSaveButtonClicked() {
if(!($("#formID").valid())) {return}; 
```

我试过这个，但如果用户在编辑某些字段之前单击按钮，它就不起作用。
即，如果用户编辑字段而不是擦除其中的所有内容 - 它会起作用，无论是哪种方式 - 不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:51:00.043

你缺少一个右括号`}`。此外，如果它是无效的**NOT**`return false` ，将阻止表单提交。试试这个： **`return`**

 **```
function onSaveButtonClicked() {
    if(!($("#formID").valid())) {
        return false;
    }
} 
```**

# c# - 使用 XElement 解析 xml

> ID：14582978
> 
> 赞同：1
> 
> 时间：2013-01-29T12:31:57.767
> 
> 标签：c#, windows-phone-7, linq-to-xml, xelement

我有这个`XElement`：

```
<item>
  <guid isPermaLink="false">http://gdata.youtube.com/feeds/api/videos/s1tAYmMjLdY</guid>
  <pubDate>Wed, 17 Jun 2009 05:23:10 +0000</pubDate>
  <atom:updated xmlns:atom="http://www.w3.org/2005/Atom">2013-01-29T11:28:32.000Z</atom:updated>
  <app:control xmlns:app="http://purl.org/atom/app#">
    <yt:state name="restricted" reasonCode="limitedSyndication" xmlns:yt="http://gdata.youtube.com/schemas/2007">Syndication of this video was restricted.</yt:state>
  </app:control>
  <category domain="http://schemas.google.com/g/2005#kind">http://gdata.youtube.com/schemas/2007#video</category>
  <category domain="http://gdata.youtube.com/schemas/2007/categories.cat">Music</category>
  <title>blink-182 - I Miss You</title>
  <description>Music video by blink-182 performing I Miss You. (C) 2003 Geffen Records</description>
  <link>http://www.youtube.com/watch?v=s1tAYmMjLdY&amp;feature=youtube_gdata</link>
  <author>blink182VEVO</author>
  <gd:comments xmlns:gd="http://schemas.google.com/g/2005">
    <gd:feedLink rel="http://gdata.youtube.com/schemas/2007#comments" href="http://gdata.youtube.com/feeds/api/videos/s1tAYmMjLdY/comments" countHint="46136" />
  </gd:comments>
  <media:group xmlns:media="http://search.yahoo.com/mrss/">
    <media:category label="Music" scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Music</media:category>
    <media:content url="http://www.youtube.com/v/s1tAYmMjLdY?version=3&amp;f=videos&amp;app=youtube_gdata" type="application/x-shockwave-flash" medium="video" isDefault="true" expression="full" duration="230" yt:format="5" xmlns:yt="http://gdata.youtube.com/schemas/2007" />
    <media:description type="plain">Music video by blink-182 performing I Miss You. (C) 2003 Geffen Records</media:description>
    <media:keywords />
    <media:player url="http://www.youtube.com/watch?v=s1tAYmMjLdY&amp;feature=youtube_gdata_player" />
    <media:restriction type="country" relationship="deny">DE</media:restriction>
    <media:thumbnail url="http://i.ytimg.com/vi/s1tAYmMjLdY/0.jpg" height="360" width="480" time="00:01:55" />
    <media:thumbnail url="http://i.ytimg.com/vi/s1tAYmMjLdY/1.jpg" height="90" width="120" time="00:00:57.500" />
    <media:thumbnail url="http://i.ytimg.com/vi/s1tAYmMjLdY/2.jpg" height="90" width="120" time="00:01:55" />
    <media:thumbnail url="http://i.ytimg.com/vi/s1tAYmMjLdY/3.jpg" height="90" width="120" time="00:02:52.500" />
    <media:title type="plain">blink-182 - I Miss You</media:title>
    <yt:duration seconds="230" xmlns:yt="http://gdata.youtube.com/schemas/2007" />
  </media:group>
  <gd:rating average="4.93231" max="5" min="1" numRaters="154927" rel="http://schemas.google.com/g/2005#overall" xmlns:gd="http://schemas.google.com/g/2005" />
  <yt:statistics favoriteCount="0" viewCount="47338118" xmlns:yt="http://gdata.youtube.com/schemas/2007" />
</item> 
```

我想`media:group`和：

```
XElement mediaGroup = element.Element("media:group"); 
```

但我收到此错误：

```
The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:33:43.053

您需要单独指定命名空间 - 您不能`XName`直接从字符串转换为非本地。LINQ to XML 使用隐式转换 from `string`to[`XNamespace`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx)和重载`+`运算符来创建[`XName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx)from an使这变得容易`XNamespace + string`。

例如：

```
XNamespace media = "http://search.yahoo.com/mrss/";
XElement mediaGroup = element.Element(media + "group"); 
```

（您可以`XName.Get`按照 Cédric 的回答使用，但由于您可能在多个位置使用相同的命名空间，我更喜欢像这样拆分它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:33:51.637

将`:`元素名称拆分为前缀（命名空间的，此处为 : `http://search.yahoo.com/mrss/`）和本地名称。

使用 :`XName.Get("group", "http://search.yahoo.com/mrss/")`代替。

```
string mediaNamespace = "http://search.yahoo.com/mrss/";
XElement mediaGroup = element.Element(XName.Get("group", mediaNamespace)); 
```

# spring - Spring MVC 3中的后退按钮失败

> ID：14582984
> 
> 赞同：1
> 
> 时间：2013-01-29T12:32:23.353
> 
> 标签：spring, spring-mvc

我已经通过许多论坛来解决MVC 3中后退按钮的解决方案。当我点击后退按钮时，上一页不显示，但刷新时显示。我尝试过：

```
response.setHeader( "Expires", "0" );
// set standard HTTP/1.1 no-cache headers (post-check and pre-check for IE)
response.setHeader( "Cache-Control", "no-store, no-cache, must-revalidate, post-check=0, pre-check=0, max-age=0, proxy-revalidate, no-transform, private");
// set standard HTTP/1.0 no-cache header
response.setHeader( "Pragma", "no-cache" ); 
```

但仍然没有线索。你能告诉我如何请求浏览器刷新或从服务器获取数据吗？