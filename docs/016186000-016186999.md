# StackOverflow 问答 16186000-16186999

# sharepoint - 如何阻止项目发布？

> ID：16186002
> 
> 赞同：1
> 
> 时间：2013-04-24T07:30:43.520
> 
> 标签：sharepoint, sharepoint-2013

我有一个用于项目更新的事件接收器，它具有以下方法：

```
public override void ItemUpdated(SPItemEventProperties properties)
        {
            base.ItemUpdated(properties);

            if (!HandleEvent(properties))
            {
                return;
            }

            var item = properties.ListItem;

            EventFiringEnabled = false;

            if (IsPublished(item))
            {       

            }

            EventFiringEnabled = true;

} 
```

这是 IsPublished 的方法：

```
private bool IsPublished(SPListItem item)
{
    return item.Level == SPFileLevel.Published;

} 
```

我需要阻止它发布，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:41:29.690

```
public override void ItemCheckingIn(SPFeatureReceiverProperties properties)
{
  base.ItemCheckingIn(properties);
  //Major Version
  if(..){
   properties.Cancel = true;
   properties.ErrorMessage = "you cannot publish!";
  }

 } 
```

# ios - NSDictionary 中的 UIPickerView 数据

> ID：16186009
> 
> 赞同：0
> 
> 时间：2013-04-24T07:30:57.567
> 
> 标签：ios, objective-c, xcode, nsdictionary, uipickerview

我有这样的网络服务日期：

```
{
            "idlife_stage_question" = 43;//..basically this should be key
            "life_stage_idlife_stage" = 1;
            "profile_idprofile" = 0;
            "question_text" = "example";//..this should be object
            sequence = 42;
    } 
```

现在我需要每个 JSON 字典中的“idlife_stage_question”和“question_text”，并在 UIPickerView 中加载“question_text”，然后在 UILabel 中显示选定的行文本。此外，我需要为相应的“question_text”获取“idlife_stage_question”，以便稍后将“idlife_stage_question”发送到服务器。我怎么能用 NSDictionary 做到这一点？

**编辑：**

我的要求是：

1.  从 JSON 中获取“idlife_stage_question”和“question_text”。
2.  在 NSMutableDictionary 中设置“idlife_stage_question”和“question_text”
3.  使用“question_text”填充 UIPicker
4.  在标签中显示选定的行文本
5.  从 NSMutableDictionary 中获取与“question_text”对应的“idlife_stage_question”，将其发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:38:07.477

Assuming you have `self.questionsArray` which have all the data from webservice and there is only one component in `UIPickerView`

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [self.questionsArray count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
   return self.questionsArray[row][@"question_text"];
} 
```

The method which dismiss the pickerView

```
- (void)dismissPickerView
{
    //Get the selected Row in picker
    NSInteger selectedQuestionIndex = [self.pickerView selectedRowInComponent:0];
    NSDictionary *question = self.questionsArray[selectedQuestionIndex];

    self.label.text = question[@"question_text"];

    //Use this value to send back to server
    NSInteger questionId = [question[@"idlife_stage_question"] integerValue];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:40:00.480

将 json 解析为 nsdictionary

```
-(void) requestFinished : (ASIHTTPRequest *) request {
        NSArray *myArray = [NSJSONSerialization 
                                              JSONObjectWithData:[request responseData]
                                              options:kNilOptions 
                                              error:&error];
        } 
```

要检查您的数组层次结构：

```
NSLog(@"%@", myArray); 
```

现在可以将数组的每个元素提取到 NSDictionary 中。当你迭代你的数组时，你得到的每个对象都是一个 NSDictionary。

迭代你的数组

```
NSEnumerator *myIterator = [myArray objectEnumerator];
    id anObject;

    while( anObject = [myIterator nextObject]){
        NSLog(@"%@", [anObject objectForKey@"question_text"]);
        // get each value of your question_text in a new NSArray and use that array for UIPickerView demostrated in the following link
    } 
```

然后[在这里查看](http://cocoamatic.blogspot.com/2010/08/create-uipickerview-programmatically.html)如何以编程方式创建 UIPickerView

# isabelle - 固定元组参数的归纳谓词

> ID：16186010
> 
> 赞同：1
> 
> 时间：2013-04-24T07:30:58.683
> 
> 标签：isabelle

假设我们有一些谓词

```
definition someP :: "('a × 'a) ⇒ 'a ⇒ 'a ⇒ bool" 
```

和一个`inductive`结束它

```
inductive my_inductive :: "('a × 'a) ⇒ 'a ⇒ bool"
 for "a_b" where
 basecase: "fst a_b = a ⟹ my_inductive a_b a" |
 stepcase: "someP a_b x y ⟹ my_inductive a_b x ⟹ my_inductive a_b y" 
```

第一个参数“a_b”的归纳是固定的。"a_b" 是一个元组，导致语法有些难看。不幸的是，伊莎贝尔不允许我写类似`for "(a,b)"`.

如何为这个归纳谓词创建更好的介绍和归纳规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:30:58.683

`my_inductive_intros`我们可以用更漂亮的basecase和默认stepcase定义一组新的引入规则

```
lemma my_inductive_intro_1: "my_inductive (a, b) a"
  by (simp add: my_inductive.basecase)
lemmas my_inductive_intros = my_inductive_intro_1 my_inductive.stepcase 
```

我们可以编写自己漂亮的归纳规则

```
lemma my_inductive_tuple_induct[consumes 1, case_names "basecase" "stepcase", induct pred: my_inductive]: 
 "my_inductive (a, b) x ⟹ 
 (P a) ⟹ (⋀x y. someP (a, b) x y ⟹ my_inductive (a, b) x ⟹ P x ⟹ P y) ⟹ P x"
 apply(rule my_inductive.induct[of "(a,b)"])
 apply(simp_all)
 done 
```

`consumes 1`告诉 isabelle 使用第一个参数。让我们通过一个例子来说明这一点：

```
lemma "my_inductive (a,b) c ⟹ P a b c"
  proof(induction rule: my_inductive_tuple_induct) 
```

没有`[consumes 1]`这个就是证明状态：

1.  my_inductive (?a, ?b) (my_inductive (a, b) c ⟶ P abc)
2.  ？一种
3.  ⋀xy。someP (?a, ?b) xy ⟹ my_inductive (?a, ?b) x ⟹ x ⟹ y

有了`[consumes 1]`，我们得到了想要的证明状态：

1.  爸爸
2.  ⋀xy。someP (a, b) xy ⟹ my_inductive (a, b) x ⟹ P abx ⟹ P aby

`case_names`为 isar 证明设置案例名称。因此，上述证明可以从 开始`case basecase`。

`induct pred`告诉我们正在声明一个归纳规则。在某些情况下，`proof(induction)`现在仅仅写作可能就足以让 isabelle 自己找出来使用我们新的奇特归纳规则。

以下示例演示了设置

```
lemma
  assumes "my_inductive (a,b) c" shows "P a b c"
  using assms
proof (induction)
case basecase thus ?case using my_inductive_intros sorry
case (stepcase x y) thus ?case using my_inductive_intros sorry
qed 
```

# html - HTML：2 导航导致问题

> ID：16186018
> 
> 赞同：0
> 
> 时间：2013-04-24T07:31:36.267
> 
> 标签：html, css, nav

我对用 css 和 html 编写以下设计感到非常沮丧。我需要两个导航（一个灰色，另一个黑色），它们拥有一个简单的“呼叫我们”段落标签，然后是 2 个按钮（见右上角）。第一个按钮很简单，它打开查看者的电子邮件客户端，但第二个按钮是一个搜索栏，点击后需要展开。我不确定如何在 javascript/css 中执行此操作。在第二个导航中，我只能让 h1 标签浮动在导航（主页）旁边。我将如何在 html 和 css 中对这两个导航进行编码？

*我已经知道如何以渐变和颜色格式化背景，这是我需要帮助的内容的放置*

非常感谢所有帮助！:)

![Photoshop设计](https://i.stack.imgur.com/DehzY.png)

编辑：添加代码（它几乎不正确）

```
<div id="top-nav-bar">
<div class="container">

 <ul class="top-nav">
 <li><p>Call us 1234 567 891</p><li>

 <li> <a href="mailto:"><img src="img/mail.png"/></a></li>
 <li><form class="sidebar-search"><div class="input-box"><a class="remove"href="javascript:;"></a><input type="text"></input><input class="submit" type="button"   value="text"></input></div></form></li>
 </ul>

 </div>
 </div>

 <header id="header"> 

 <div class="container">
 <div class="sixteen columns">  

 <nav id="nav">

 <ul>
    <li class="h1-logo"><h1>Logo</h1></li>
    <li><a href="index.html">home</a></li>
    <li><a href="properties.html">lease</a></li>
    <li><a href="manage.html">manage</a></li>
    <li><a href="contact.html">contact</a></li>
 </ul>
 </nav>

 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:57:56.260

我认为这段代码可以帮助您提前开发您的网站。祝你好运，如果您有任何问题，请写信给我。

**HTML**

```
<div class="top-menu">
    <h1>Call on 5455234523523</h1>
    <div>
        <a href="">mail</a>
        <div class="search-box">
            <span id="search">search</span>
            <input id="search-input" type="text" />
        </div>    
    </div>
</div>
<div class="bottom-menu">

</div> 
```

**CSS**

```
body {
    font-size: 10px;
    font-family: tahoma;
    color: #fff;
}
a {
    color: #999;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;    
}
.top-menu, .bottom-menu {
    clear: both;
    width: 100%;
    height: 30px;
    line-height: 30px;
    vertical-align: middle;
}
.top-menu {
    background-color: #000;
}
.bottom-menu {
    background-color: #999;    
}
.top-menu h1 {
    float: left;
    font-size: 11px;
    margin: 0 0 0 10px;
    font-weight: normal;
    padding: 0;
}
.top-menu > div {
    float: right;
    width: 200px;
}
.top-menu > div * {
    float: left;
    margin: 0 5px;
}
.top-menu input {
    display: none;
    width: 100px;
}
.top-menu #search {
    cursor: pointer;
} 
```

**jQuery**

```
$('#search').click(function(){
    $('#search-input').toggle();
}); 
```

**演示**

[http://jsfiddle.net/LZYsA/](http://jsfiddle.net/LZYsA/)

# sql - JOIN 中的条件是否会为 sql 中的下一个 JOIN 结转？

> ID：16186021
> 
> 赞同：0
> 
> 时间：2013-04-24T07:31:43.690
> 
> 标签：sql, tsql, join, left-join

嗨，我有一个 sql 查询，我遇到了一个条件，因为我是新手`sql`

```
select * from Today
LEFT JOIN
        TABLEPricing Yesterday  ON 
        Yesterday.Date = (select top 1 date from #Dates where MONTH(DATE) = MONTH(Today.Date)-1 AND YEAR(DATE) = YEAR(Today.Date))
LEFT JOIN Prev ON
        Prev.Date = Yesterday.Date 
```

在第二个条件`Prev.Date = Yesterday.Date`中，将自动预先为like`Yesterday.Date`赋值表达式`Yesterday.Date``Yesterday.Date = (select top 1 date from #Dates where MONTH(DATE) = MONTH(Today.Date)-1 AND YEAR(DATE) = YEAR(Today.Date))`

或者我需要再次指定相同的条件，如下所示。

```
Prev.Date = (select top 1 date from #Dates where MONTH(DATE) = MONTH(Today.Date)-1 AND YEAR(DATE) = YEAR(Today.Date)) 
```

请澄清我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:44:26.167

我必须撤销我之前的回答，因为我认为您必须明确写 OUTER 才能使其成为外部连接。所以 ElectricLlama 是对的。您必须再次声明该条款。或者在这种情况下，您可以简单地删除 LEFT 以使其成为正常连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:30:17.997

这是不正确的。由于它是一个外连接，`Yesterday.Date`如果在 上没有匹配，则 in 的值将为 NULL `TABLEPricing`。因此，您的下一次加入`Prev`将无法匹配任何内容。

由于您使用的是外部联接，因此您确实需要使用完整的表达式。

我相信你可以重写它以提高效率。您是否尝试确定上个月？它是基于日历月的吗？

# scala - 如何在maven中使用akka数据流

> ID：16186024
> 
> 赞同：1
> 
> 时间：2013-04-24T07:31:50.890
> 
> 标签：scala, akka, dataflow, continuation

我在使用数据流时遇到了问题。如果我在 maven scala 插件配置中启用延续，maven 无法编译。

在我启用 maven 中的延续后，编译开始失败。并且错误信息非常混乱。

像这样：

发现：单位@scala.util.continuations.cpsSynth @util.continuations.cps[scala.concurrent.Future[Any]]

要求：单位

或这个：

找到 : ((Class[_ <: Indexed[String]], scala.concurrent.Promise[List[_ <: Indexed[String]]])) => (Class[ *$1(in value $anonfun)], List[* <: Indexed[String]]) @scala.util.continuations.cpsSynth @util.continuations.cps[scala.concurrent.Future[Any]] forSome { type _$1(in value $anonfun) <: Indexed[String] }

必需： ((Class[_ <: Indexed[String]], scala.concurrent.Promise[List[_ <: Indexed[String]]])) => B

所有这些错误都发生在关闭时。似乎闭包不能在流上下文中使用。

有谁知道为什么？

错误代码：

```
def toList[T <: Indexed[String]](content: Iterable[String], klass: Class[T]) = {
    val ref = new TypeReference[List[T]] {}
    content.flatMap(JsonUtils.toObject(_, ref)).toList
}

flow {
    val objects = toList(content, klass)
    val hasRefs = klass.getFields.filter(it => it.getAnnotation(classOf[Ref]) != null)
    hasRefs.foreach {injectRef(_, objects)}
    promise << objects
}

def injectRef[T <: Indexed[String]](field: Field, objects: List[T]) {
    val anno = field.getAnnotation(classOf[Ref])
    val refKlass = anno.klass()

    def setField(o: T) {
        val original = field.isAccessible
        field.setAccessible(true)
        val f = field.get(o)
        val found = promises.get(refKlass)().find(it => it.index() == f)
        field.set(o, found)
        field.setAccessible(original)
    }
    objects.foreach { o =>
        setField(o) // here, compile error
    }
} 
```

# python - 确定出站数据包的流程

> ID：16186027
> 
> 赞同：1
> 
> 时间：2013-04-24T07:31:55.800
> 
> 标签：python, windows, network-programming

有没有办法确定哪个进程正在发送特定的数据包。我正在网络接口卡上捕获数据包，并希望确定每个数据包的进程。我在 Windows 下使用 python 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:30:10.583

除非您不实现自己的数据包过滤器驱动程序，否则您不能仅查看通过网卡混杂模式捕获的数据流。

# eclipse - 使用 Eclipse 构建 Maven 多模块

> ID：16186028
> 
> 赞同：3
> 
> 时间：2013-04-24T07:32:03.437
> 
> 标签：eclipse, maven, pom.xml, m2e, multi-module

我正在转向 Maven 多模块构建。

我的项目结构如下：

```
MyProject
|-->MyProject-Core
|   |->pom.xml (packaging jar)
|-->MyProject-Assets
|   |->pom.xml (packaging jar)
|-->MyProject-Libs
|   |->pom.xml (packaging jar)
|-->pom.xml (packaging pom, aggregator) 
```

这`MyProject`是一个 Maven Eclipse 项目，由 M2E 构建。

我将 MyProject-Core/src/main/java 添加为 Eclipse 源文件夹，但由于我将父 pom 中的依赖部分更改为 dependencyManagement，因此我从 Eclipse 中得到了构建错误。手动调用`mvn package`仍然可以正常工作。

如何配置 Eclipse 以正确解决核心 pom 的依赖关系？

我仍然可以将依赖项添加到父 pom 作为范围：提供，但这是最好的解决方案吗？

家长-Pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>MyProject</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>pom</packaging>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>findbugs-maven-plugin</artifactId>
          <version>2.3.3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.9</version>
        </plugin>
        <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence 
          on the Maven build itself. -->
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>1.0.0</version>
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>
                      org.codehaus.mojo
                    </groupId>
                    <artifactId>
                      exec-maven-plugin
                    </artifactId>
                    <versionRange>
                      [1.2,)
                    </versionRange>
                    <goals>
                      <goal>java</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <ignore />
                  </action>
                </pluginExecution>
              </pluginExecutions>
            </lifecycleMappingMetadata>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <configuration>
          <archive>
            <index>true</index>
            <addMavenDescriptor>false</addMavenDescriptor>
            <manifest>
              <packageName>com.example</packageName>
              <addDefaultImplementationEntries>true
              </addDefaultImplementationEntries>
              <addDefaultSpecificationEntries>true
              </addDefaultSpecificationEntries>
            </manifest>
            <manifestEntries>
              <SVN-Revision>${workingCopyDirectory.revision}</SVN-Revision>
            </manifestEntries>
            <compress>false</compress>
          </archive>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <modules>
    <module>MyProject-core</module>
  </modules>
</project> 
```

核心-Pom：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>com.example</groupId>
    <artifactId>MyProject</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>
  <groupId>com.example</groupId>
  <artifactId>MyProject-Core</artifactId>
  <version>1.0-SNAPSHOT</version>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
    </dependency>
  </dependencies>

  <build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T11:43:20.047

我尝试了很多配置，但 M2E 无法将子模块识别为自己的项目，或者子模块的更改未被父模块项目识别。

现在我创建了几个 Eclipse 项目，每个 Maven 项目一个，它工作正常。

# c# - 在 C# lambda 表达式中插入、删除

> ID：16186034
> 
> 赞同：-5
> 
> 时间：2013-04-24T07:32:15.423
> 
> 标签：c#, linq, linq-to-sql, lambda

我想知道使用的区别

```
DB.MyTable.InsertOnSubmit(..);
and
DB.MyTable.InsertAllOnSubmit(..);
----------------------------------
DB.MyTable.DeleteOnSubmit(..);
and
DB.MyTable.DeleteAllOnSubmit(..); 
```

我也想知道怎么用，谁能给我举个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:55:10.190

```
InsertOnSubmit(yourSingleData) and InsertAllOnSubmit(yourMultipleData as List) 
```

要删除单个数据，

```
var obj = Db.MyTable.Where(x => x.SomeData == "something").SingleOrDefault();
Db.MyTable.DeleteOnSubmit(obj); 
```

要删除多个数据，

```
var obj = Db.MyTable.Where(x => x.SomeData == "something").ToList();
Db.MyTable.DeleteAllOnSubmit(obj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:35:43.820

在 LinqToSql 中，上下文派生自`DataContext`，区别在于是否提交特定的单个实体或它们的集合。它们将像这样使用：

```
using (var context = new MyDataContext()) {
  context.Things.InsertOnSubmit(new Thing { ... })
} 
```

`Thing`您将在其中填充准备好持久性的实例。

而在第二个（全部插入）的情况下，您将提供一个集合。

# c# - 在 URL 中发送之前特殊字符的百分比编码

> ID：16186042
> 
> 赞同：13
> 
> 时间：2013-04-24T07:32:35.557
> 
> 标签：c#, asp.net, urlencode, url-encoding

我需要传递特殊字符，例如 #,! 等在 Facebook、Twitter 和此类社交网站的 URL 中。为此，我将这些字符替换为 URL 转义码。

```
 return valToEncode.Replace("!", "%21").Replace("#", "%23")
   .Replace("$", "%24").Replace("&", "%26")
   .Replace("'", "%27").Replace("(", "%28")
   .Replace(")", "%29").Replace("*", "%2A"); 
```

它对我有用，但我想更有效地做到这一点。还有其他方法可以逃避这些角色吗？我尝试使用**Server.URLEncode()**但 Facebook 没有呈现它。

在此先感谢，
普里亚

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-24T07:47:21.113

如果您想与定义百分比编码的 RFC3986 标准[兼容](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)，您应该使用 ** [Uri.EscapeDataString**方法。](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx)

例如空格总是会被编码为`%20`字符：

```
var result = Uri.EscapeDataString("a q");
// result == "a%20q" 
```

而例如使用`HttpUtility.UrlEncode`（这是由内部使用的方式`HttpServerUtility.UrlEncode`）返回`+`字符：

```
var result = HttpUtility.UrlEncode("a q") 
// result == "a+q" 
```

更重要的是，它的行为`Uri.EscapeDataString`与客户端`encodeURIComponent`javascript方法兼容（除了区分大小写，但RFC3986说它无关紧要）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-08T08:54:25.093

对于那些仍在寻找的人，Thomas B 为此提供了一个很好的单线。

```
Regex.Replace(Uri.EscapeDataString(s), "[\!*\'\(\)]", Function(m) Uri.HexEscape(Convert.ToChar(m.Value(0).ToString()))) 
```

[在此出色答案](https://stackoverflow.com/a/853466/1175419)下的评论中找到，它也为该问题提供了合理的解决方案。

`Uri.EscapeDataString`.Net 4.5中更改的行为。

> 保留和未保留字符列表现在支持 RFC 3986。

请参阅[.NET Framework 4.5 中的应用程序兼容性](https://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx#core)。

还要注意 RFC 3986 的[特定保留字符](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)。我没有对这两个函数进行广泛测试，也没有花时间研究 RFC 2396，所以我只能假设 Andrew 和 Thomas 正在使用保留字符的子集，因为该子集反映了RFC 2396 和 RFC 3986 之间的区别，其余字符已由`Uri.EscapeDataString`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-20T12:50:11.383

此代码将根据 rfc 3986 “PercentEncode”。 HttpUtility.EncodeUrl 不考虑许多字符（'！'、'*'、'('、')'），并且不会将 % 字符后面的十六进制字母大写。

```
public static string PercentEncode(string value)  
{  
    StringBuilder retval = new StringBuilder();  
    foreach (char c in value)  
    {   
        if ((c >= 48 && c <= 57) || //0-9  
            (c >= 65 && c <= 90) || //a-z  
            (c >= 97 && c <= 122) || //A-Z                    
            (c == 45 || c == 46 || c == 95 || c == 126)) // period, hyphen, underscore, tilde  
        {  
            retval.Append(c);  
        }  
        else  
        {  
            retval.AppendFormat("%{0:X2}", ((byte)c));  
        }  
    }  
    return retval.ToString();  
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T07:36:27.570

使用`System.Web.HttpUtility.UrlEncode`或`System.Net.WebUtility.UrlEncode`代替手动形成它。

# javascript - 如何使用 Javascript 和 HTML 创建 doc 文件

> ID：16186047
> 
> 赞同：3
> 
> 时间：2013-04-24T07:32:45.357
> 
> 标签：javascript, html, web

我有一个网页，我希望当用户单击按钮时，它必须创建一个 doc 文件，其中包含以下信息，例如名称等和指定我们在 php 和 .net 中有库来创建文件，所以在 html 中有方法吗我们可以在项目的根文件夹中创建文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:38:07.500

您不能在服务器上创建它们，因为 HTML 和 JS 都仅用于客户端。即使那样，如果您希望将来在客户端执行类似的操作，请使用以下信息：

规范中定义了两种方法，1）来自 DOM Core Level 2 的**createDocument**和 2）来自 HTML5 的**createHTMLDocument 。**

**前者**创建一个 XML 文档（包括 XHTML），后者**创建**一个 HTML 文档。两者都作为函数驻留在**DOMImplementation**接口上。

```
var impl    = document.implementation,
xmlDoc  = impl.createDocument(namespaceURI, qualifiedNameStr, documentType),
htmlDoc = impl.createHTMLDocument(title); 
```

实际上，这些方法还很年轻，只在最近的浏览器版本中实现。根据[http://quirksmode.org](http://quirksmode.org)和 MDN，以下**浏览器**支持**createHTMLDocument**：

铬 4

歌剧 10

火狐 4

互联网浏览器 9

野生动物园 4

**您可以使用ActiveXObject**在旧版本的 Internet Explorer 中创建 HTML 文档：

```
var htmlDoc = new ActiveXObject("htmlfile"); 
```

生成的对象将是一个新文档，可以像任何其他文档一样对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:44:47.487

HTML 和 JavaScript 在客户端上运行，但要在项目的根文件夹中创建文件需要服务器上的过程。幸运的是，这种通信形式有一个通用的标准技术：AJAX。您的进程可能会像这样运行：

1.  使用您喜欢的 AJAX 库向服务器发送请求以创建文件
2.  使用您现有的库在 PHP 或 .NET 中编写服务器上的代码，这些库将接受请求、创建文件并返回 URL
3.  在您的页面中显示 URL 以供用户下载。

如果您使用 JQuery 或任何其他标准 JavaScript 框架，它们将具有已内置的 AJAX 库。

# objective-c - 如何让 uiviewcontroller 翻到下一页？

> ID：16186048
> 
> 赞同：1
> 
> 时间：2013-04-24T07:32:53.560
> 
> 标签：objective-c

我正在使用 uitapgestures，我想要一个 uiviewcontroller 导航到另一个带有翻转动画的控制器。我尝试使用 uimodaltransitionflip，它可以工作，但下一个控制器上的按钮将无法工作。我该怎么做呢？

对于此代码，该按钮适用于其他页面。

```
- (void)imageView1DoubleTapped:(UITapGestureRecognizer *)gestureRecognizer
{
    GFStoryBoardViewController *gfsb = [[GFStoryBoardViewController alloc]initWithNibName:nil bundle:nil];

    [self.navigationController pushViewController:gfsb animated:YES];

} 
```

对于此代码，该按钮在下一页上不起作用

```
- (void)imageView2DoubleTapped:(UITapGestureRecognizer *)gestureRecognizer
{
    SBStoryBoardViewController *sbsb = [[SBStoryBoardViewController alloc]initWithNibName:nil bundle:nil];

    sbsb.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    [self.navigationController presentModalViewController:sbsb animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:54:40.120

您需要一个根视图控制器的视图作为容器保存动画。这可以是自定义容器视图控制器或 UIWindow。*（即 [UIApplication sharedApplication].window ）*

然后这样做：

```
 [UIView transitionWithView:rootViewController.view duration:0.40 options:UIViewAnimationOptionTransitionFlipFromRight animations:^
    {
        [currentViewController.view removeFromSuperView];
        //This will take up the whole screen of the container view. If using UIWindow
        //If using UIWindow, you may need to adjust to accomodate the status bar. 
        newViewController.view.frame = rootViewController.view.bounds 
        [rootViewController.view addSubView:newViewController.view];

    } completion:^(BOOL complete)
    {
         //Anything that you want to happen afterwards
    }]; 
```

# iphone - 如何使用 Facebook Open graph api 进行健身以通过 FacebookSDK 进行步行

> ID：16186051
> 
> 赞同：3
> 
> 时间：2013-04-24T07:33:02.833
> 
> 标签：iphone, ios, objective-c, facebook-opengraph

我想在 Facebook 上发布一个 Open Graph Fitness:walk 动作，并希望它与我的路径图一起呈现。我该怎么做呢？下面的方法发布了操作，我可以在 Facebook 上的活动日志和时间轴中看到操作的文本。但是当我将鼠标悬停在已发布操作的任何元素上时，我看不到地图。我究竟做错了什么？

```
NSMutableDictionary<FBGraphObject> *action = [FBGraphObject graphObject];action[@"course"] = @"http://samples.ogp.me/136756249803614";

[FBRequestConnection startForPostWithGraphPath:@"me/fitness.walks"
                                   graphObject:action
                             completionHandler:^(FBRequestConnection *connection,
                                                 id result,
                                                 NSError *error) {
                                 // handle the result
                                 NSLog(@"error:%@",error.description);

                                 NSLog(@"Result:%@",result);
                             }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T12:41:09.753

尝试这个

```
 [FBRequestConnection startForPostWithGraphPath:[NSString stringWithFormat:@"me/fitness.%@?access_token=%@",walkType,appDelegate.session.accessTokenData.accessToken]
                                       graphObject:action
                                 completionHandler:^(FBRequestConnection *connection,
                                                     id result,
                                                     NSError *error)
                                {
                                     // handle the result
                                     //NSLog(@"error description:%@",error);
                                     NSLog(@"Result:%@",result);
                                     [SVProgressHUD dismiss];
                                    if (error == nil)
                                    {
                                        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Track My Walks" message:[NSString stringWithFormat:@"You successfully post a route and your id is:%@",[result valueForKey:@"id"]] delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
                                        [alert show];
                                    }
                                    else
                                    {
                                        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Track My Walks" message:error.description delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
                                        [alert show];
                                    }

                                 }];
}];
[request setFailedBlock:^{
    [SVProgressHUD dismiss];
    NSError *error = [request error];
    NSLog(@"Error: %@", error.localizedDescription);
    [self directionsDidFailedDirections:error.localizedDescription];
}];

[request startAsynchronous]; 
```

# android - 使用共享首选项保存 2 个搜索栏

> ID：16186052
> 
> 赞同：0
> 
> 时间：2013-04-24T07:33:09.990
> 
> 标签：android

我正在开发应用程序，其中有两个搜索栏，并且我想使用共享首选项存储他们的进度，以便每当用户打开该应用程序时，他都应该得到他所做的最后更改。我已经保存了 1 个搜索栏，但在 2 个搜索栏的情况下没有得到正确的答案。你能帮我么

```
public class Apartment extends Activity implements SeekBar.OnSeekBarChangeListener {

    SeekBar seekBar,Seekbar; 

    private int newProgressValue,currentProgress;
    private int newProgressValue1,currentProgress1;
    private SharedPreferences sharedPreferences,sharedPreferences1 ;
    private String Key_PROGRESS = "key_progress";
    private String Key = "key_value";
    private String PREFERENCE_PROGRESS = "preference_progress";
    private String Key_PROGRESS1 = "key_progress1";
    private String Key1 = "key_value1";
    private String PREFERENCE_PROGRESS1 = "preference_progress1";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        sharedPreferences = getSharedPreferences(PREFERENCE_PROGRESS , Context.MODE_PRIVATE);
        currentProgress = sharedPreferences.getInt(Key_PROGRESS, 0);

        sharedPreferences1 = getSharedPreferences(PREFERENCE_PROGRESS1 , Context.MODE_PRIVATE);
        currentProgress1 = sharedPreferences1.getInt(Key_PROGRESS1, 0);

        setContentView(R.layout.activity_apart);
        seekBar=(SeekBar)findViewById(R.id.seekbar);
        Seekbar=(SeekBar)findViewById(R.id.seekbar1);
        int max = 5;
        seekBar.setMax(max);
        Seekbar.setMax(max);
        seekBar.setProgress(currentProgress);
        Seekbar.setProgress(currentProgress1);

        seekBar.setOnSeekBarChangeListener(this);
Seekbar.setOnSeekBarChangeListener(this);

    }
    public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
        // TODO Auto-generated method stub

    }
    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }
    public void onStopTrackingTouch(SeekBar seekBar ) {

        // TODO Auto-generated method stub

newProgressValue = seekBar.getProgress();

        currentProgress = newProgressValue ;

        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putInt(Key_PROGRESS, newProgressValue);

        editor.commit();

    }
    public void onStopTrackingTouch1(SeekBar Seekbar) {

newProgressValue1 = Seekbar.getProgress();

        currentProgress1 = newProgressValue1 ;

        SharedPreferences.Editor editor = sharedPreferences1.edit();
        editor.putInt(Key_PROGRESS1, newProgressValue1);

        editor.commit();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:48:02.197

问题是您对两个搜索栏都使用了相同的侦听器，而没有检查一个要使用的侦听器，这是正确的代码：

```
public class Apartment extends Activity implements SeekBar.OnSeekBarChangeListener {

SeekBar seekBar, Seekbar;

private int newProgressValue, currentProgress;
private int newProgressValue1, currentProgress1;
private SharedPreferences sharedPreferences, sharedPreferences1;
private String Key_PROGRESS = "key_progress";
private String Key = "key_value";
private String PREFERENCE_PROGRESS = "preference_progress";
private String Key_PROGRESS1 = "key_progress1";
private String Key1 = "key_value1";
private String PREFERENCE_PROGRESS1 = "preference_progress1";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );
    sharedPreferences = getSharedPreferences( PREFERENCE_PROGRESS, Context.MODE_PRIVATE );
    currentProgress = sharedPreferences.getInt( Key_PROGRESS, 0 );

    sharedPreferences1 = getSharedPreferences( PREFERENCE_PROGRESS1, Context.MODE_PRIVATE );
    currentProgress1 = sharedPreferences1.getInt( Key_PROGRESS1, 0 );

    setContentView( R.layout.activity_apart );
    seekBar = (SeekBar) findViewById( R.id.seekbar );
    Seekbar = (SeekBar) findViewById( R.id.seekbar1 );
    int max = 5;
    seekBar.setMax( max );
    Seekbar.setMax( max );
    seekBar.setProgress( currentProgress );
    Seekbar.setProgress( currentProgress1 );
    seekBar.setOnSeekBarChangeListener( this );
    Seekbar.setOnSeekBarChangeListener( this );

}

public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
}

public void onStartTrackingTouch(SeekBar seekBar) {
}

public void onStopTrackingTouch(SeekBar seekBar) {
    if (seekBar.getID() == R.id.seekbar) {
        newProgressValue = seekBar.getProgress();
        currentProgress = newProgressValue;

        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putInt( Key_PROGRESS, newProgressValue );

        editor.commit();

    } else {
        newProgressValue1 = seekBar.getProgress();
        currentProgress1 = newProgressValue;
        SharedPreferences.Editor editor = sharedPreferences1.edit();
        editor.putInt( Key_PROGRESS1, newProgressValue1 );

        editor.commit();

    }
} 
```

}

这应该做你想要的，但实际上你应该看看在 Android 和 java 中进行开发时使用的正确模式。

例如，您使用的是 seekbar 和 Seekbar，这是无法阅读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:40:58.373

```
 public void onStopTrackingTouch1(SeekBar Seekbar) {

        newProgressValue1 = Seekbar.getProgress();

        currentProgress1 = newProgressValue1 ;

        SharedPreferences.Editor editor = sharedPreferences1.edit();
        editor.putInt(Key_PROGRESS1, newProgressValue1);

        editor.commit();

    } 
```

这个方法永远不会被调用。这是你只能得到一个值的方法`Seekbar`

你应该注册两个不同的实现`SeekBar.OnSeekBarChangeListener`，一个用于第一个`SeekBar`，一个用于后者。您可以通过 anonmyus 内部类：

```
seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

@Override
public void onStopTrackingTouch(SeekBar seekBar) {

       currentProgress = newProgressValue ;

       SharedPreferences.Editor editor = sharedPreferences.edit();
       editor.putInt(Key_PROGRESS, newProgressValue);

       editor.commit();

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
}
});

   Seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
            newProgressValue1 = Seekbar.getProgress();

            currentProgress1 = newProgressValue1 ;

             SharedPreferences.Editor editor = sharedPreferences1.edit();
             editor.putInt(Key_PROGRESS1, newProgressValue1);

             editor.commit();

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    }

@Override
public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {

}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:40:58.717

你有一个非常糟糕的方式来命名你的变量。与其调用它们`seekbar`and `Seekbar`，不如调用它们`seekbar1`and `seekbar2`。但是，保持变量名...您的问题是您使用的是相同的侦听器-因此`onStopTrackingTouch`将为两个 SeekBars 调用相同的方法。只是添加`onStopTrackingTouch1`什么都不做。相反，您需要检查两者中的哪一个调用了该方法并相应地处理它；像这样的东西：

```
public void onStopTrackingTouch(SeekBar seek) {
    if(seek == seekbar) {
        newProgressValue = seekbar.getProgress();
        currentProgress = newProgressValue;
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putInt(Key_PROGRESS, newProgressValue);
        editor.commit();
    }
    else if(seek == Seekbar) {
        newProgressValue1 = Seekbar.getProgress();
        currentProgress1 = newProgressValue1 ;
        SharedPreferences.Editor editor = sharedPreferences1.edit();
        editor.putInt(Key_PROGRESS1, newProgressValue1);
        editor.commit();
    }
} 
```

我不批准您使用变量名，也不评论您的代码结构 - 只是指出您遇到问题的原因。

# c# - 使用 webbrowser 控件在 c# 中获取价值

> ID：16186053
> 
> 赞同：0
> 
> 时间：2013-04-24T07:33:18.937
> 
> 标签：c#, winforms, webkit, webbrowser-control, webkit-transform

我将编写一个应用程序如下：有一个 Web 应用程序，通过这个 Web 应用程序，机构与中央组织通信（发送数据） 现在，这些机构中的一个需要一个如下应用程序：当用户准备一份数据副本将数据输入到 Web 应用程序表单。我决定编写一个 Windows 应用程序并使用 webbrowser 控件从网页获取数据。问题是一些标签和控件没有标识和获取它们的数据的 ID 或名称。有什么解决办法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:31:02.750

如果您知道目标 Web 应用程序需要什么样的数据，我想您可以不使用 Web 浏览器控件，而是在 C# 应用程序中复制表单并使用 HttpWebRequest 或类似方法发布数据。

```
HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create("http://the.url/"); 

httpRequest.Method = "POST"; 
httpRequest.ContentType = "application/x-www-form-urlencoded"; 

string poststring = String.Format("field1={0}&field2={1}",text1.Text,text2.Text);

byte[] bytedata =  Encoding.UTF8.GetBytes(poststring);
httpRequest.ContentLength = bytedata.Length;

Stream requestStream = httpRequest.GetRequestStream();
requestStream.Write(bytedata, 0, bytedata.Length);
requestStream.Close();

HttpWebResponse httpWebResponse = (HttpWebResponse)httpRequest.GetResponse();
// Handle the response 
```

Where`field1`等`field2`表示 Web 应用程序期望的 POST 变量。

如果您需要先登录，您也需要处理此问题，首先发送登录请求并使用 CookieContainer 存储会话 id，如下所示：

[C# 通过 httpwebrequest 保留会话 ID](https://stackoverflow.com/questions/1453560/c-sharp-keep-session-id-over-httpwebrequest)

一旦你完成了这项工作，你实际上可以将响应加载到 Web 浏览器中，如此处所述。

[使用 Web 响应加载 Web 浏览器](https://stackoverflow.com/questions/6172239/how-to-load-web-browser-with-web-response)

如果您需要 Web 浏览器控件来保留登录 cookie，这可能会有所帮助

[在 WebBrowser 中使用来自 CookieContainer 的 cookie](https://stackoverflow.com/questions/4185171/use-cookies-from-cookiecontainer-in-webbrowser)

# knockout.js - 具有与另一个具有淘汰赛的可观察到相同的内容

> ID：16186056
> 
> 赞同：0
> 
> 时间：2013-04-24T07:33:23.787
> 
> 标签：knockout.js

我有一个名为 observable 的名称`packing`，其中包含一堆属性。其中之一是一个名为 observableArray`isotopes`

```
packing
 - description
 - type
 - ...
 - isotopes
    - name
    - weight 
```

我想创建一个单独的 observable，使其具有与 packing.isotopes 相同的内容。这必须是动态的，因此每当从中添加/删除某些内容时，`packing.isotopes`也应该在其中添加/删除`mycopy`。

我已经尝试过：

```
var mycopy = ko.computed(function () { return packing.isotopes; }); 
```

但它不起作用。`mycopy`是*未定义*的。

任何想法？

谢谢。

* * *

更新

下面是我的代码：

```
define(function (require) {
    ...
    var mycopy = ko.computed(function () { return packing.isotopes; });

    var activate = function (routeData) {
        var idTran = parseInt(routeData.idTran);
        var idPack = parseInt(routeData.idPack);

        var promise = (idPack == -1) ? // -1 --> create a new empty itinerary
                        ctxTransport.createPackingDetailTransport(idTran, packing) : 
                        ctxTransport.getPackingById(idPack, packing); 

        return promise
              .then(ctxTransport.getTransportById(idTran, transport))
              .fail(somethingWrong); 

        function somethingWrong(error) {
            var msg = 'Error retreiving data. ' + error.message;
            logError(msg, error);
            throw error;
        }
    }

    var vm = {
        activate: activate,
        canDeactivate: canDeactivate,
        resource: resource,
        transport: transport,
        packing: packing,
        mycopy: mycopy,
        ...
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:00:42.837

Computed observables 应该跟踪其他 observables，但是你没有任何 observable 调用。看来你永远不需要`computed`。

```
var mycopy = packing.isotopes; 
```

# ios - 如何调用Document文件夹中的plist文件

> ID：16186066
> 
> 赞同：1
> 
> 时间：2013-04-24T07:33:58.940
> 
> 标签：ios, objective-c, plist

我要在 Document 文件夹中创建 plist 文件，我想在 NSDictionary 中调用和存储数据，但我不知道使用什么语法？？？

我的 plist 文件是字典类型。

这是我的代码：

```
#define DOC_DIR [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]

     NSString *item = @"Content";
        array = [[NSMutableArray alloc]init];
        for (int i =0; i<8; i++) {
            [array addObject:item];
        }
        NSLog(@"array : %@",array);
        [self WriteDataToPlistFromArray:array];
    - (void)WriteDataToPlistFromArray:(NSArray*)dataArray
    {
        NSDictionary *dic = [NSMutableDictionary dictionaryWithObjectsAndKeys:dataArray,@"Root", nil];
        NSString *Path = [DOC_DIR stringByAppendingPathComponent:@"mamal.plist"];
        [dic writeToFile:Path atomically:YES];
        NSLog(@"%@",dic);
        NSLog(@"%@",Path);
    }
I want call plist from Document Folder and show data in it. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:43:11.630

要访问您的 plist，请这样做

```
NSArray *directoryPath = [NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES ) objectAtIndex:0];

NSString *filePath = [directoryPath stringByAppendingPathComponent:@"mamal.plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:filePath];
NSLog(@"File content : %@",dict); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:36:07.057

的值`DOC_DIR`应该是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
NSString *documentsDir = [paths objectAtIndex:0]; 
```

即您的代码可以重写为：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
NSString *documentsDir = [paths objectAtIndex:0];
NSString *Path = [documentsDir stringByAppendingPathComponent:@"mamal.plist"];
[dic writeToFile:Path atomically:YES]; 
```

# c# - 找不到类型秒表

> ID：16186067
> 
> 赞同：5
> 
> 时间：2013-04-24T07:33:58.947
> 
> 标签：c#, xamarin-studio

我正在**Windows 7**上使用**Xamarin Studio 4.0.3**（以前的 MonoDevelop）学习**C#**。尝试使用类（仅一段代码）****`Stopwatch`****

 ****```
using System.Diagnostics;

class MainClass {
    public static void Main (string[] args) {
         Stopwatch stopWatch = new Stopwatch();                 
    }
} 
```

我得到：

> 错误 CS0246：找不到*类型或命名空间名称“秒表”。您是否缺少 using 指令或程序集引用？*

我的目标框架是：Mono .NET 4.0。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.100%29.aspx)秒表类应该被实现。

顺便说一句，`DateTime`上课效果很好。

问题是：我是否缺少某些东西（正确的命名空间、库链接）或 Stopwatch 根本没有实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:36:39.603

尽管您说您已包含该`using`指令，但错误消息却有所不同。

确保此行与您的方法位于**同一`.cs`文件**中，位于最顶部：

```
using System.Diagnostics; 
```

在 Visual Studio 中，您可以通过单击错误下方的图标来查看：

![](https://i.stack.imgur.com/fqsS1.png)

Xamarin Studio 中可能有类似的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T01:34:07.687

我最近在 Xamarin studio for Mac 中遇到了类似的问题。我正在为一个必须在 iOS、Android 和 Windows Store 应用程序之间共享的数据库构建一个 PLC 项目。

检查 PLC 项目文件选项 - 右键单击​​项目标题并选择选项。转到构建目标并取消选择 Silverlight 5/Windows Phone。

如果是 PLC，则只有框架的一个子集可供您使用，因为它仅包含可在所有选定设备上部署的功能。希望这可以帮助。

问候布雷特

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-11T13:08:42.920

我最近遇到了同样的问题。

我的问题是因为我创建了一个新项目，并试图在尚未引用的新项目中使用秒表。

我右键单击我的新项目参考文件夹 -> 编辑参考，并添加了对 System.

得救，建造，世界上一切都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T12:38:21.647

=> 秒表在 System (in System.dll) 程序集中定义，

=> 检查 System.dll 是否包含在引用中（如果未添加，可以通过右键单击解决方案资源管理器中的引用来添加）

=> 使用 System.Diagnostics 添加命名空间；

=> 在[https://msdn.microsoft.com/en-us/library/System.Diagnostics.Stopwatch(v=vs.110).aspx上查看更多信息](https://msdn.microsoft.com/en-us/library/System.Diagnostics.Stopwatch(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T08:50:59.183

我有同样的问题。所有使用声明和引用都已到位。当将鼠标指向括号时，Intellisense 甚至会响应“初始化 System.Diagnostics.Stopwatch 类的新实例”，同时在编译时仍会显示错误消息。
保存项目当前状态，关闭VS，重新打开VS和项目后，错误消失了。****

# android - 如何在 ScrollView 中将控件移动到 TextView 的底部（滚动到底部）

> ID：16186069
> 
> 赞同：0
> 
> 时间：2013-04-24T07:34:00.477
> 
> 标签：android, scroll, textview, scrollview

在我的布局中，我有`TextView`一个`ScrollView`. 但我无法以`TextView`编程方式滚动到底部。

我已经尝试过，`setSelection(int)`但该方法未定义`TextView`。所以任何人都可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:38:24.823

好的，最后我得到了解决。

```
TextView tv = (TextView)findViewById(R.id.textView);//my text view
ScrollView sv = (ScrollView) findViewById(R.id.scrollView);//my scrollview
String log ="a Very long text";
tv.setText(log);
sv.post(new Runnable() {
  public void run() {
    sv.scrollTo(0, tv.getHeight());
  }
}); 
```

# c# - 如何使用 C# 更新 mongodb 集合

> ID：16186070
> 
> 赞同：0
> 
> 时间：2013-04-24T07:34:01.023
> 
> 标签：c#, mongodb

我有一个具有集合状态的 mongo 服务器。每当添加新状态时，它都会保存在我的服务器中。但是当我尝试在前端编辑集合时，它会在我的服务器中保存为另一个具有不同 ID 的新集合。如何克服这一点。

```
 public  static void CreateData(string pass ,string pass1)
      {

          string StateCode = pass;
          string stateName = pass1;
          insertState(StateCode, stateName);

      }

      private static void insertState(string StateCode, string stateName)
      {
        MongoServer server = MongoServer.Create(ConnectionString);
        MongoDatabase myCompany = server.GetDatabase("BackOffice");

        MongoCollection<BsonDocument> tblStates = myCompany.GetCollection<BsonDocument>("tblStates");
        BsonDocument deptartment = new BsonDocument {
                    { "State_strCode", StateCode },
                    { "State_strName", stateName },
                    {"States_strIsActive","Y"},
                    {"State_strFedExStateCode",""},
                    {"State_dtmTimeStamp",DateTime.Now}
                    };
        tblStates.Insert(deptartment);
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:57:40.700

你最好定义一个结构或设置一个PK：

```
public class Customer
{
    public string name { get; set; }
    [MongoDB.Bson.Serialization.Attributes.BsonId]
    public string idCol { get; set; }
} 
```

并像这样更新您的对象

```
 public void Update(Customer cus)
    {
        if (cus != null)
        {
            MongoDB.Driver.MongoClient client = new MongoClient(_connectionString);
            MongoDatabase db = client.GetServer().GetDatabase(_dbName);
            db.GetCollection(_dbName).Save(cus);
        }

    } 
```

# ruby-on-rails - 检查字符串中是否包含大于 15 个字符的单词

> ID：16186074
> 
> 赞同：3
> 
> 时间：2013-04-24T07:34:22.127
> 
> 标签：ruby-on-rails, ruby, regex

我想做一个条件语句来检查是否：

```
comment.user.name 
```

（可能返回类似`"Montgomery Philips Ridiculouslylonglastname"`）包含任何超过 15 个字符的单词。

就像是：

```
if comment.user.name.split(" ").??? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T07:36:29.777

这个怎么样？

```
comment.user.name.split.any? { |x| x.length > 20 } 
```

这是它的精彩[`enumerable`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-any-3F)mixin 文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T07:44:56.060

仅供参考（因为您已经找到了合适的答案），使用正则表达式：

```
/\b[a-z]{15,}\b/i 
```

如果您找到匹配项，则表示单词长度超过 15 个字符（标题中为 20 个）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T07:44:13.707

使用正则表达式比创建一个全新的数组更干净，只是为了检查一个字符串是否匹配某个模式（正则表达式就是为此而生的！）：

```
('a'*19+' '+'a'*19) =~ /[^ ]{20}/ #=> nil
('a'*19+' '+'a'*20) =~ /[^ ]{20}/ #=> 20 
```

这就是我的意思：

```
$ ruby -rbenchmark -e 'long_string = ([("a"*20)]*1000).join(" ")
puts Benchmark.measure{ 100.times{ long_string.split.any? { |x| x.length > 20 } }  }'
#=>   0.050000   0.000000   0.050000 (  0.051955) 
```

```
$ ruby -rbenchmark -e 'long_string = ([("a"*20)]*1000).join(" ")
puts Benchmark.measure{ 100.times{ long_string  =~ /[^ ]{20}/ }  }'
#=>   0.000000   0.000000   0.000000 (  0.000128) 
```

正则表达式版本比`string.split.any?`一个版本快 365 倍！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:38:55.007

```
w = "Montgomery Philips Ridiculouslylonglastname" 
w.split().any? {|i| i[16] != nil} #=> true

"Montgomery Philips".split().any? {|i| i[16] != nil} #=> false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:42:46.653

```
def contains_longer_than length
  comment.user.name.split.select{|x| x.length > length}.size > 0
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T08:15:47.380

Loamhoof 很接近，但有一个更简单的正则表达式：

```
/\w{16}/ 
```

# performance - 使用 MATLAB 中的并行计算工具箱，并行代码比顺序代码花费的时间更长。为什么？

> ID：16186078
> 
> 赞同：1
> 
> 时间：2013-04-24T07:34:25.740
> 
> 标签：performance, matlab, parallel-processing, multicore, core

我正在使用 MATLAB。我只是 MATLAB 中的并行计算工具箱的新手。我有核心 i3 处理器、MATLAB R2011a、2 GB RAM、320 硬盘。

为了计算速度，我刚刚编写了以下代码，发现并行代码比顺序代码花费的时间更长。

第一个代码需要 **0.039763 秒**

第二个代码需要 **0.379056 秒**。

* * *

第一个代码：

```
tic
MM = magic(5);
MN = magic(5);
ML = magic(5);
MP = magic(5);
MK = magic(5);
MM
MN
ML
MP
MK
toc 
```

第二个代码：

```
matlabpool open local 4

tic
spmd  % Uses all 3 workers
    MM = magic(5); % MM is a variable on each lab
end
MM{1}
MM{2}
MM{3}
MM{4}
toc
matlabpool close 
```

我想学习并行计算工具箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:20:07.417

正如 Dan 在评论中提到的，问题显然太小，并行化无法带来好处。例如，将`magic`您创建的矩阵的大小从 5 增加到 5000，已经显示出明显的改进。也就是说，与一个矩阵的计算时间相比，随着大小的增加，并行化的开销变得（几乎）可以忽略不计。

# javascript - 在制作 Web 应用程序时，在头部添加 html 标签以移除标题栏

> ID：16186080
> 
> 赞同：-2
> 
> 时间：2013-04-24T07:34:33.300
> 
> 标签：javascript, jquery

我想删除我的 HTML/JS 应用程序/响应站点中的标题栏。该网站主要是响应式的，但它是一个单页应用程序。但是，我想删除移动设备和 iPad 上的标题栏。

我已经在使用：

```
window.scrollTo(0,0); 
```

适用于 iPhone 但不适用于 iPad。从我所做的阅读看来，当页面添加到 iPad 的主屏幕时，可以添加一些 HTML 头部标签来实现这一点？这是真的吗？如果是这样，标题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:40:29.127

这已在这里得到解答：[隐藏 iPad 中的地址栏](https://stackoverflow.com/questions/7449432/hide-address-bar-in-ipad)

只有当用户将您的网络应用程序的书签添加到主屏幕并且您的 中具有以下元标记时，才有可能`<head>`：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

# c# - 在 asp.net mvc 中对控制器进行简单的 Ajax 调用

> ID：16186083
> 
> 赞同：117
> 
> 时间：2013-04-24T07:34:36.110
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, asp.net-mvc-2

我正在尝试开始使用 ASP.NET MVC Ajax 调用。

**控制器：**

```
public class AjaxTestController : Controller
{
    //
    // GET: /AjaxTest/
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult FirstAjax()
    {
        return Json("chamara", JsonRequestBehavior.AllowGet);
    }   
} 
```

**看法：**

```
<head runat="server">
    <title>FirstAjax</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var serviceURL = '/AjaxTest/FirstAjax';

            $.ajax({
                type: "POST",
                url: serviceURL,
                data: param = "",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: successFunc,
                error: errorFunc
            });

            function successFunc(data, status) {     
                alert(data);
            }

            function errorFunc() {
                alert('error');
            }
        });
    </script>
</head> 
```

我只需要使用返回数据的控制器方法打印警报。上面的代码只是在我看来打印“chamara”。警报未触发。

**更新**

我如下修改了我的控制器，它开始工作。我不清楚为什么它现在可以工作。有人请解释一下。参数“a”不相关我添加了它，因为我无法添加具有相同方法名称和参数的两个方法。我认为这可能不是解决方案，而是它的工作

```
public class AjaxTestController : Controller
    {
        //
        // GET: /AjaxTest/
        [HttpGet]
        public ActionResult FirstAjax()
        {
            return View();
        }

        [HttpPost]
        public ActionResult FirstAjax(string a)
        {
            return Json("chamara", JsonRequestBehavior.AllowGet);
        }
    } 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-24T07:40:49.157

删除 data 属性，因为您`POSTING`对服务器没有任何意义（您的控制器不需要任何参数）。

在您的 AJAX 方法中，您可以使用`Razor`和使用`@Url.Action`而不是静态字符串：

```
$.ajax({
    url: '@Url.Action("FirstAjax", "AjaxTest")',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: successFunc,
    error: errorFunc
}); 
```

从您的更新：

```
$.ajax({
    type: "POST",
    url: '@Url.Action("FirstAjax", "AjaxTest")',
    contentType: "application/json; charset=utf-8",
    data: { a: "testing" },
    dataType: "json",
    success: function() { alert('Success'); },
    error: errorFunc
}); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-25T06:12:55.883

完成更新后，

1.  它首先使用默认的 HttpGet 请求调用 FirstAjax 操作并呈现空白的 Html 视图。（早些时候你没有它）
2.  稍后在加载该视图的 DOM 元素时，您的 Ajax 调用会被触发并显示警报。

之前您只是将 JSON 返回到浏览器而不呈现任何 HTML。现在它有一个呈现的 HTML 视图，它可以在其中获取您的 JSON 数据。

您不能直接呈现 JSON 其纯数据而不是 HTML。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-06-27T06:50:03.837

使用 Razor 通过调用您的操作来动态更改您的 URL，如下所示：

```
$.ajax({
    type: "POST",
    url: '@Url.Action("ActionName", "ControllerName")',
    contentType: "application/json; charset=utf-8",
    data: { data: "yourdata" },
    dataType: "json",
    success: function(recData) { alert('Success'); },
    error: function() { alert('A error'); }
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-12-22T09:34:14.577

如果你只需要在你的 Ajax 调用中点击 C# 方法，你只需要传递两个事件类型和 url，如果你的请求被获取，那么你只需要指定 url。请按照下面的代码工作正常。

**C#代码：**

```
 [HttpGet]
    public ActionResult FirstAjax()
    {
        return Json("chamara", JsonRequestBehavior.AllowGet);
    } 
```

**获取请求时的 Java 脚本代码**

```
 $.ajax({
        url: 'home/FirstAjax',
        success: function(responce){ alert(responce.data)},
        error: function(responce){ alert(responce.data)}
    }); 
```

**Java 脚本代码，如果是 Post 请求，还有 [HttpGet] 到 [HttpPost]**

```
 $.ajax({
            url: 'home/FirstAjax',
            type:'POST',
            success: function(responce){ alert(responce)},
            error: function(responce){ alert(responce)}
        }); 
```

注意：如果您在 View Controller 所在的同一控制器中使用 FirstAjax，则 url 中不需要控制器名称。像`url: 'FirstAjax',`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-06T08:15:43.327

首先，不需要在一个页面中有两个不同版本的 jquery 库，“1.9.1”或“2.0.0”足以使 ajax 调用工作。

这是您的控制器代码：

```
 public ActionResult Index()
    {
        return View();
    }

    public ActionResult FirstAjax(string a)
    {
        return Json("chamara", JsonRequestBehavior.AllowGet);
    } 
```

这是您的视图应如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    var a = "Test";
    $.ajax({
        url: "../../Home/FirstAjax",
        type: "GET",
        data: { a : a },
        success: function (response) {
            alert(response);
        },
        error: function (response) {
            alert(response);
        }
    });
});
</script> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-25T09:34:51.417

这是针对您的更新问题。

由于您不能有两个具有相同名称和签名的方法，因此您必须使用 ActionName 属性：

更新：

```
[HttpGet]
public ActionResult FirstAjax()
{
    Some Code--Some Code---Some Code
    return View();
}

[HttpPost]
[ActionName("FirstAjax")]
public ActionResult FirstAjaxPost()
{
    Some Code--Some Code---Some Code
    return View();
} 
```

请参阅[此](http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx)链接以进一步了解方法如何成为操作。不过很好的参考。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-22T06:01:21.767

看法;

```
 $.ajax({
        type: 'GET',
        cache: false,
        url: '/Login/Method',
        dataType: 'json',
        data: {  },
        error: function () {
        },
        success: function (result) {
            alert("success")
        }
    }); 
```

控制器方法；

```
 public JsonResult Method()
 {
   return Json(new JsonResult()
      {
         Data = "Result"
      }, JsonRequestBehavior.AllowGet);
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-24T07:41:17.060

而不是`url: serviceURL,` 使用

```
url: '<%= serviceURL%>', 
```

您是否将 2 个参数传递给 successFunc？

```
function successFunc(data)
 {
   alert(data);
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-24T09:07:06.393

在 global.asax 中添加“JsonValueProviderFactory”：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    ValueProviderFactories.Factories.Add(new JsonValueProviderFactory());
} 
```

# validation - JSF 验证提交表单

> ID：16186086
> 
> 赞同：2
> 
> 时间：2013-04-24T07:34:44.753
> 
> 标签：validation, jsf-2

我正在处理一个 JSF 2.0 表单，我有一个带有 2 个字段的 managedbean

```
import java.util.Date;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public class StackOverflow {

    private Date firstDate;
    private Date secondDate;

    public void submit(){
       //validate here and show error on form
    }

} 
```

和 xhtml 之类的：

```
<h:inputText value="#{stackOverflow.firstDate}">
    <f:convertDateTime pattern="d/M/yyyy" />
</h:inputText>
<h:inputText value="#{stackOverflow.secondDate}">
    <f:convertDateTime pattern="d/M/yyyy" />
</h:inputText>

<h:commandLink action="#{stackOverflow.submit}">
    <span>Submit</span>
</h:commandLink> 
```

我想验证第二个日期不早于第一个日期的第一个和第二个日期

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:24:31.463

这是其中一种方法：

```
<h:messages globalOnly="true"/>
<h:form>
    <h:inputText value="#{stackOverflow.firstDate}" binding="#{firstDate}">
        <f:convertDateTime pattern="d/M/yyyy" />
    </h:inputText>
    <h:inputText value="#{stackOverflow.secondDate}" validator="dateValidator">
        <f:attribute name="firstDate" value="#{firstDate}" />
        <f:convertDateTime pattern="d/M/yyyy" />
    </h:inputText>
    <h:commandButton value="Submit" action="#{stackOverflow.submit}"/>
</h:form> 
```

和

```
@FacesValidator(value="dateValidator")
public class DateValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        UIInput sd = (UIInput)component.getAttributes().get("firstDate");
        Date firstDate = (Date)sd.getValue();
        Date secondDate = (Date)value;
        if(!firstDate.before(secondDate)){
            FacesMessage msg = new FacesMessage("Entered dates are invalid: first date must be before second date");
            throw new ValidatorException(msg);
        }
    }

} 
```

# spring - 使用 AspectJ 和 Spring Security 捕获成功登录

> ID：16186087
> 
> 赞同：0
> 
> 时间：2013-04-24T07:34:45.317
> 
> 标签：spring, spring-mvc, spring-security, aspectj

我正在使用 spring security 和 AspectJ 来记录应用程序的行为。我需要捕获成功的登录并记录下来。我的弹簧安全配置：

```
<security:http auto-config="true" authentication-manager-ref="authenticationManager" use-expressions="true">
    <security:intercept-url pattern="/login" access="permitAll"/>
    <security:intercept-url pattern="/loginFailed" access="permitAll"/>
    <security:intercept-url pattern="/viewUserAccounts" access="hasRole('ROLE_ANTANI')" />
    <security:intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
    <security:custom-filter ref="ajaxTimeoutRedirectFilter" after="EXCEPTION_TRANSLATION_FILTER"/>
    <security:form-login
    login-page="/login"
    authentication-failure-url="/loginFailed"
    login-processing-url="/loginAttempt"
    password-parameter="password"
    username-parameter="username"
    />
</security:http> 
```

如何定义正确的切入点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:44:08.810

这是从 AuthenticationManager 中获取结果的解决方案；

上下文部分（您所拥有的简化版本）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <security:http auto-config="true">
        <security:intercept-url pattern="/**" access="ROLE_USER"/>
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="test" password="test" authorities="ROLE_USER"/>
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager>

    <aop:aspectj-autoproxy proxy-target-class="true"/>

    <bean class="de.incompleteco.spring.aspect.UsernamePasswordAuthenticationFilterAspect"/>
</beans> 
```

和切入点

```
package de.incompleteco.spring.aspect;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.AfterReturning;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.security.core.Authentication;

@Aspect
public class AuthenticationManagerAspect {

    @AfterReturning(pointcut="execution(* org.springframework.security.authentication.AuthenticationManager.authenticate(..))"
            ,returning="result")
    public void after(JoinPoint joinPoint,Object result) throws Throwable {
        System.out.println(">>> user: " + ((Authentication) result).getName());
    }

} 
```

这将允许您在身份验证对象从 AuthenticationManager 返回后访问它。

# eclipse - 在 Eclipse 中隐藏状态栏或进度条

> ID：16186089
> 
> 赞同：14
> 
> 时间：2013-04-24T07:34:47.270
> 
> 标签：eclipse, ide

如何在 Eclipse 中隐藏状态栏？我的意思是底部的那个，其中还显示了“进度”状态。这很让人分心，因为它一直在做某事。

我看了一下[这个问题](https://stackoverflow.com/questions/5645495/how-to-hide-the-status-bar-in-eclipse)，但是那里和超级用户上给出的答案并没有显示如何隐藏它。我也没有在偏好中找到任何东西。我正在使用 Eclipse 3.7.2。

如何隐藏状态栏，或者至少摆脱底部的“进度”栏？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-10T15:30:14.877

使用 Eclipse Juno 中的 CSS，可以按照您喜欢的方式为 Eclipse 设置样式：编辑`eclipse/plugins/org.eclipse.platform_4.2.2.v201302041200/css/e4_default_mac.css`（使其适应您的 Eclipse 版本和操作系统）。

在那里，添加以下行：

```
#org-eclipse-ui-trim-status,
#org-eclipse-ui-trim-vertical1,
#org-eclipse-ui-trim-vertical2 {
   visibility: hidden;
} 
```

现在，不仅状态栏而且左右的栏都被隐藏了。在此之前，您可能会打开您喜欢的视图并将它们带到您喜欢的位置，并为它们分配一个快捷方式，以便它们会在您需要它们时（并且仅在）时弹出。当然，您可以随时撤消该更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-28T06:22:08.780

### [日食氧气 (4.7)](http://www.eclipse.org/eclipse/news/4.7/)

**方法一**

1.  转到**快速访问**（或按`Ctrl`+ `3`）

    [![快速访问](https://i.stack.imgur.com/era9c.png)](https://i.stack.imgur.com/era9c.png)

2.  输入“*状态栏*”

3.  选择**切换状态栏 - 切换底部状态栏的可见性**

**方法二**

1.  **窗口**>**外观**>**隐藏状态栏**

    [![隐藏状态栏](https://i.stack.imgur.com/NwUrH.png)](https://i.stack.imgur.com/NwUrH.png)

    [此处](http://www.eclipse.org/eclipse/news/4.7/platform.php#hide-show-status-bar)描述了此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-26T21:49:46.443

在 Eclipse 的新版本中，您可以使用菜单来隐藏状态栏。

见：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=501811](https://bugs.eclipse.org/bugs/show_bug.cgi?id=501811)

# oracle - 为什么 varray 在本质上是有界的时在 oracle 中被称为可变大小的数组？

> ID：16186091
> 
> 赞同：1
> 
> 时间：2013-04-24T07:34:54.917
> 
> 标签：oracle, varray

我在 oracle 中学习集合并遇到了 Varrays。它说 Varrays 具有连续下标的固定大小，那么为什么我们说它是可变大小的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:10:47.527

我必须承认我虽然 VARRAY 代表变量数组，因为它是一个变量数组。但是，文档实际上确实说“可变大小数组” [（引文）](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/collections.htm#sthref1009)。我不知道这是什么原因:(

* * *

我不会为此流汗的。在现实生活中，我们几乎总是使用嵌套表集合。灵活性比固定大小的约束更有用。VARRAY 的一大优点是保证它们的元素保持顺序，而嵌套表则不然。

* * *

一个念头产生。当我们谈论这种数据类型时，我们通常将其发音为*vee array*。如果它被称为 Fixed-size Array 那将是*eff array*，因此容易被误解。一个以英语为母语的人：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T22:16:23.003

好吧，这就是[手册必须说的](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIJHD)：

> *varray（可变大小数组）是一个数组，其元素数量可以从零（空）到声明的最大大小不等。要访问可变数组变量的元素，请使用语法 variable_name(index)。index的下限为1；上限是当前元素的数量*

所以元素的*最大*数量是固定的，但*当前*的元素数量是可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T15:30:24.557

除了 a_horse_with_no_name 的解释：

根据[此 Oracle 文档](https://docs.oracle.com/cd/B28359_01/appdev.111/b28371/adobjcol.htm#i468598)中的 VARRAY 部分：

> 当您定义一个可变数组时，您指定它可以包含的最大元素数，尽管**您可以稍后更改这个数字**。数组中元素的数量就是数组的大小。**Oracle 允许数组具有可变大小，这就是它们被称为可变数组的原因。**

所以命名约定似乎源于两个关键点：

1) 即使您必须设置 VARRAY 的最大尺寸，也没有什么能阻止您再次设置它，这意味着它的尺寸*会随着时间而变化*。

2) 重申报价，Oracle 允许 VRRAYS 具有*可变大小*。*用户*在数组上定义所述“大小变量”的值。

# java - Gradle 多项目配置

> ID：16186095
> 
> 赞同：2
> 
> 时间：2013-04-24T07:35:00.270
> 
> 标签：java, gradle

我正在考虑从 ant 迁移到 Gradle，因为我们希望通过并行运行项目来加速构建并简化配置，但在我看来，这些目标对于 Gradle 构建来说是相互排斥的。希望我错过了什么。所以我想要一个编译 3 个 java 项目的多项目 Gradle 设置的好例子，这样 A 和 B 可以并行编译，C 依赖于两者。同样，可以（动态地）配置某些属性并在所有三个项目中使用，也许在附加的根项目中进行配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T21:19:47.640

“动态”配置属性是什么意思？一般来说，您应该能够为具有三个子项目的项目获得并行执行的构建，如您所描述的。[我在https://github.com/breskeby/gradle-snippets/tree/master/multiparallel](https://github.com/breskeby/gradle-snippets/tree/master/multiparallel)推送了一个示例骨架项目设置

希望有帮助，

干杯，勒内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T23:57:27.167

这是我在一两周前构建的一个示例应用程序，涵盖了这个用例：[https](https://github.com/jadekler/git-java-websiteskeleton) ://github.com/jadekler/git-java-websiteskeleton 。特别检查 settings.gradle，以及将所有其他组件（每个单独的 java 应用程序）捆绑为一个的应用程序包。

# android - android设备，接口“org.bluez.Device”上带有签名“sv”的蓝牙“SetProperty”不存在

> ID：16186098
> 
> 赞同：0
> 
> 时间：2013-04-24T07:35:12.343
> 
> 标签：android, bluetooth, bluez

我遇到了一个问题，在android 2.3.6的蓝牙设置中，我无法取消绑定设备的配对。

我可以从日志中得到什么：

> E/BluetoothDeviceProfileState(14111): 处理命令:100 D/CachedBluetoothDevice(15274): 命令发送成功:REMOVE_BOND 地址:32:18:60:18:3F:D9 E/BluetoothService.cpp(14111): setDevicePropertyNative: D-Bus错误：org.freedesktop.DBus.Error.UnknownMethod（接口“org.bluez.Device”上带有签名“sv”的方法“SetProperty”不存在E/BluetoothService.cpp（14111）：）W/InputManagerService（14111） : 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@40779c88

你遇到过这个问题吗？我需要你帮忙。谢谢...

# php - Mod重写mvc和分页的一般规则？

> ID：16186100
> 
> 赞同：0
> 
> 时间：2013-04-24T07:35:13.820
> 
> 标签：php, .htaccess

如何`uniq`为两者创建重写规则`url`

> index.php?controller=cname&task=tname&id=10
> 
> index.php?controller=cname&task=tname&page_id=20

我想创建链接

```
cname/tname/10
cname/tname/20 
```

两个任务相同但变量不同（**id**或**page_id**）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:46:55.150

你不能，因为就这两个而言：

```
cname/tname/10
cname/tname/20 
```

没有区别。你怎么知道`cname/tname/10`指的是什么时候`page_id=10`？而不是`id=10`？

或者，您可以添加另一个标识符来区分它们：

```
cname/tname/10
cname/tname/p20 
```

这使它更简单：

```
RewriteRule ^([^/]+)/([^/]+)/([0-9]+)/?$ /index.php?controller=$1&task=$2&id=$3
RewriteRule ^([^/]+)/([^/]+)/p([0-9]+)/?$ /index.php?controller=$1&task=$2&page_id=$3 
```

# delphi - 如何在 Delphi 中创建和实例化用户定义的组件？

> ID：16186102
> 
> 赞同：1
> 
> 时间：2013-04-24T07:35:19.333
> 
> 标签：delphi, delphi-7

我想为我的应用程序创建一个搜索框。搜索框将包括两件事：一个搜索字段和一个搜索按钮。我认为，正确的做法是将这两个组件放在一个组合框中，该组合框将用作将它们容纳在里面的容器。我想我需要创建一个派生自 TGroupBox 类的类，该类在创建时将接收一个表名作为要搜索的参数。搜索框和按钮这两个组件将成为它的子组件-它们是它将如何工作的基本原则。

这张图片说明了搜索框的外观：

![在此处输入图像描述](https://i.stack.imgur.com/aEstZ.png)

这是我到目前为止所做的：

```
unit clsTSearchBox;

interface

    uses Classes, SysUtils, StdCtrls, Dialogs, ADODB, DataModule;

    type
        TSearchBox = class (TGroupBox)
            constructor CreateNew(AOwner: TObject; Dummy: Integer);     
        end;

implementation

    constructor TSearchBox.CreateNew(AOwner: TObject; Dummy: Integer);
    begin
        inherited;
        Self.Height  := 200;
        Self.Width   := 400;
        Self.Caption := 'Test:'
    end;

end. 
```

如您所见，不多。我刚刚创建了一个从 TGroupBox 类派生的类。请帮助我编写正确的代码来实例化我的表单上的搜索框组件，因为我真的不知道该怎么做。我只需要正确创建对象的代码。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:51:55.330

如果您只是将所有 3 个组件放在一个 TFrame 中，在控件上添加您需要的任何代码，然后实例化该框架的一个实例，这听起来可能会更容易。

然后框架包含组框、编辑和按钮。您只需使用 TYourFrame.Create 创建框架或在设计时进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:21:37.970

您的组合框希望看起来像这样：

```
type
  TSearchBox = class(TGroupBox)
  private
    FSearchEdit: TEdit;
    FFindButton: TButton;
  public
    constructor Create(AOwner: TComponent); override;
  end; 
```

对于`TComponent`后代，您通常应该覆盖名为`Create`. 这将允许您的组件由流框架实例化。

实现如下所示：

```
constructor TSearchBox.Create(AOwner: TComponent);
begin
  inherited;
  FSearchEdit := TEdit.Create(Self);
  FSearchEdit.Parent := Self;
  FSearchEdit.SetBounds(...);//set position and size here
  FFindButton := TButton.Create(Self);
  FFindButton.Parent := Self;
  FFindButton.SetBounds(...);//set position and size here
end; 
```

可能最重要的一课是您必须设置`Parent`动态创建的控件的属性。这是强加底层窗口的父/子关系所必需的。

为了在运行时创建其中之一，您可以这样编码：

```
FSearchBox := TSearchBox.Create(Self);
FSearchBox.Parent := BookTabSheet;
FSearchBox.SetBounds(...);//set position and size here 
```

此代码将在表单的构造函数或`OnCreate`事件中运行。

我相信你现在明白了基本的想法。

# php - 如何识别 PHP 使用的是 VC6 还是 VC9 以及它的线程安全还是非线程安全？

> ID：16186104
> 
> 赞同：1
> 
> 时间：2013-04-24T07:35:27.443
> 
> 标签：php

我正在尝试为此下载扩展我需要知道我的安装使用的是 VC6 还是 VC9？以及它是线程安全的还是非线程安全的。我使用的 PHP 版本是 5.3.5。我确实查看了 phpinfo 结果页面，我看到一个关于它的参考：`MSVC6 (Visual C++ 6.0)`

这是否意味着我的 php 安装使用了 VC6？我将如何了解线程安全与非线程安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:39:59.303

只需打开一个命令外壳，进入 php 目录并运行

```
php -r phpinfo(); 
```

输出包含除其他外

```
PHP Version => 5.4.7
[...]
Build Date => Sep 12 2012 23:44:56
Compiler => MSVC9 (Visual C++ 2008)
Architecture => x86
[...]
Debug Build => no
Thread Safety => enabled 
```

您可以在网络服务器提供的脚本中通过以下方式执行相同的操作

```
<?php
phpinfo(); 
```

编辑：是的，这`Compiler:`条线是可靠的，如果它说`MSVC6`那么它通常是正确的......

# android - 如何直接拨打电话？

> ID：16186106
> 
> 赞同：4
> 
> 时间：2013-04-24T07:35:30.860
> 
> 标签：android, android-intent, phone-call

当我使用此代码时，首先出现带有此号码的拨号盘屏幕。

```
Intent dialintnt = new Intent(Intent.ACTION_DIAL,Uri.parse("tel:911"));
startActivityForResult(dialintnt, CALLING); 
```

我不要那个屏幕。当我单击按钮直接呼叫该号码时，我想要那个。那么如何拨打电话号码`onclick`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:37:52.260

这是不可能的。这是为了保护用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-26T13:20:24.397

已经很久了。但可能会帮助别人。如果你想直接调用，你应该使用[requestPermissions](https://developer.android.com/reference/android/support/v4/app/ActivityCompat.html#requestPermissions(android.app.Activity,%20java.lang.String[],%20int))方法。

**1.**将此行添加到您的清单文件中：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

**2.**在activity类中定义一个类变量：

```
private static Intent phoneCallIntent; //If use don't need a member variable is good to use a static variable for memory performance. 
```

**3.**将这些行添加到活动的**onCreate**方法中：

```
final String permissionToCall = Manifest.permission.CALL_PHONE;
//Assume that you have a phone icon.
(findViewById(R.id.menuBarPhone)).setOnClickListener(new OnClickListener(){
    public void onClick(View view) {
        phoneCallIntent = new Intent(Intent.ACTION_CALL);
        phoneCallIntent.setData(Uri.parse(getString(R.string.callNumber))); //Uri.parse("tel:your number")
        if (ActivityCompat.checkSelfPermission(MainFrame.this, permissionToCall) != PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(MainFrame.this, new String[]{permissionToCall}, 1);
            return;
        }
        startActivity(phoneCallIntent);
    }
}); 
```

**4.点击****允许按钮**后立即拨打电话，覆盖[onRequestPermissionsResult](https://developer.android.com/reference/android/support/v4/app/ActivityCompat.OnRequestPermissionsResultCallback.html#onRequestPermissionsResult(int,%20java.lang.String[],%20int[]))方法：

```
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults){
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    if(requestCode == 1){
        final int permissionsLength = permissions.length;
        for (int i = 0; i < permissionsLength; i++) {
            if(grantResults[i] == PackageManager.PERMISSION_GRANTED){
                startActivity(phoneCallIntent);
            }
        }
    } 
```

当用户授予权限后，下次不会出现对话框，直接拨打电话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:45:23.173

看[答案](https://stackoverflow.com/a/13076308/2203164)

您将需要清单文件的添加`CALL_PHONE`和`CALL_PRIVILEGED`权限。

然后可以使用以下方式调用该号码：

```
Uri callUri = Uri.parse("tel://911");
Intent callIntent = new Intent(Intent.ACTION_CALL,callUri);
callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_NO_USER_ACTION);
startActivity(callIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:43:05.447

只需更改`ACTION_DIAL`为`ACTION_CALL`.
像这样：

```
Intent dialintnt = new Intent(Intent.ACTION_CALL,Uri.parse("tel:911"));
startActivityForResult(dialintnt, CALLING); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T07:40:37.307

尝试这个：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
   callIntent.setData(Uri.parse("tel:" +phone_number));
   startActivity(callIntent); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-23T11:44:01.490

号码必须正确格式化，就像您尝试使用国家代码一样，它将带您使用默认拨号器。当我使用号码时，我在我的应用程序上对其进行了测试，因为 198 呼叫直接发生，当我使用 9999999999 时，这将调用 dailer，以便用户可以通过添加国家代码来更正号码。

```
`val intent =  Intent(Intent.ACTION_CALL, Uri.parse("tel:+91987654310" ))
      intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
      startActivity(intent)` 
```

# java - JTable 编辑/取消编辑代码不适用于重新排列的 JTable 列

> ID：16186113
> 
> 赞同：0
> 
> 时间：2013-04-24T07:35:51.330
> 
> 标签：java, swing, jtable, tablecolumn

我正在为我的 JTable 列使用以下代码进行编辑/取消编辑，但是当用户重新排列列时，以下代码不起作用 SSCCE 的代码如下：

```
 import javax.swing.JTable;
    import javax.swing.table.DefaultTableModel;
    import javax.swing.table.TableModel;

    public class Main {
    public static void main(String[] argv) throws Exception {
    TableModel model = new DefaultTableModel() {
    public boolean isCellEditable(int rowIndex, int mColIndex) {
    boolean flag = false;
            if (isEdit == true) {    
                if ((vColIndex == tblItem.getColumn("Design").getModelIndex())
                        || (vColIndex == tblItem.getColumn("ChangedCategory").getModelIndex())
                        || (vColIndex == tblItem.getColumn("Amount").getModelIndex())) {
                    flag = false;
                } else {
                    flag = true;
                }
            } else {
                flag = false;
            }    
            return flag;
  }
};

JTable table2 = new JTable(model);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:59:33.997

请注意，模型和视图索引是*不*等价的。[如此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)所述，

> `JTable`提供从模型坐标转换为视图坐标的方法 -`convertColumnIndexToView`和`convertRowIndexToView`- 以及从视图坐标转换为模型坐标的方法 -`convertColumnIndexToModel`和`convertRowIndexToModel`.

教程部分讨论了[*排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)行，但该原则也适用于列。没有[完整的例子](http://sscce.org/)，很难确定。

# ant - 在 pom.xml 中执行特定的 Ant 任务

> ID：16186118
> 
> 赞同：1
> 
> 时间：2013-04-24T07:36:12.027
> 
> 标签：ant, maven-2, maven-ant-tasks

我一直在尝试找到一种在 Maven 项目的 pom.xml 中指定一些 ant 任务（在 build.xml 中定义）的好方法。例如，在我的 build.xml 中，我有以下代码行；

```
<target name="clean">
   <delete dir="dist"/>
   <delete dir="build"/>
</target> 
```

如何在我的 pom.xml 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:03:36.913

以下是执行此类操作的 Maven 方式：

```
<build>
  [...]
  <plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
      <filesets>
        <fileset>
          <directory>${project.basedir}/dist</directory>
          <includes>
            <include>**/*</include>
          </includes>
        </fileset>
        <fileset>
          <directory>${project.basedir}/build</directory>
          <includes>
            <include>**/*</include>
          </includes>
        </fileset>
      </filesets>
    </configuration>
  </plugin>
  [...]
</build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:11:37.930

使用 maven-antrun-plugin。

您可以输入目标 ANT 命令。这里是执行命令的阶段安装的 maven-antrun-plugin 示例：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <id>file-exists</id>
                    <phase>install</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <target>
                            <delete dir="dist"/>
                            <delete dir="build"/>
                        </target>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

# java - 检查 Selenium WebDriver 是否指向窗口

> ID：16186119
> 
> 赞同：0
> 
> 时间：2013-04-24T07:36:12.293
> 
> 标签：java, selenium, webdriver

考虑下面的代码：

```
getCurrentUrl(driver);
driver.close();
getCurrentUrl(driver);

public void getCurrentUrl (WebDriver driver) {
    if (driver window is not closed)
        System.out.println(driver.getCurrentUrl());
    else
        System.out.println("Window is not available");
} 
```

请让我知道如何在 Java 中执行“驱动程序窗口未关闭”检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:49:00.863

嗯......这只是一个猜测。但是我觉得当`driver`你关闭它后调用变量时，你可以得到`NullPointerException`，因为它会是`null`

但不管怎么说。我会这样实现它：

```
public void getCurrentUrl (WebDriver driver) {
try {
   System.out.println(driver.getCurrentUrl());
} catch (Exception e) { // the most top one
   System.out.println("Window is not available");
  }
} 
```

可能有更好，更清洁的方法。但我不是 Java 程序员，我的直觉告诉我这会奏效

# cuda - 在 CUDA 中确定 dimGrid 和 dimBlock 大小

> ID：16186122
> 
> 赞同：1
> 
> 时间：2013-04-24T07:36:34.560
> 
> 标签：cuda

首先，我对 CUDA 编程相当陌生，所以我为这样一个简单的问题道歉。我已经研究了在我的 GPU 内核调用中确定 dimGrid 和 dimBlock 的最佳方法，但由于某种原因，我并没有完全让它工作。

在我的家用 PC 上，我有一个**GeForce GTX 580**（**计算能力 2.0**）。每个块 1024 个线程等。我可以让我的代码在这台 PC 上正常运行。我的 gpu 正在填充大小为 988*988 的距离数组。下面是部分代码：

```
#define SIZE 988

__global__ void createDistanceTable(double *d_distances, double *d_coordinates)  
{
int col = blockIdx.x * blockDim.x + threadIdx.x;
int row = blockIdx.y * blockDim.y + threadIdx.y;

if(row < SIZE && col < SIZE)
    d_distances[row * SIZE + col] = 
    acos(__sinf(d_coordinates[row * 2 + 0])*
   __sinf(d_coordinates[col * 2 + 0])+__cosf(d_coordinates[row * 2 + 0])*
   __cosf(d_coordinates[col * 2 + 0])*__cosf(d_coordinates[col * 2 + 1]-
   d_coordinates[row * 2 + 1]))*6371;
} 
```

main 中的内核调用：

```
dim3 dimBlock(32,32,1);
dim3 dimGrid(32,32,1);
createDistanceTable<<<dimGrid, dimBlock>>>(d_distances, d_coordinates); 
```

我的问题是我根本没有找到让这段代码在我的笔记本电脑上正常运行的方法。我笔记本电脑的 GPU 是**GeForce 9600M GT**（**计算能力 1.1**）。每个块 512 个线程等。我将非常感谢任何指导，以帮助我了解如何在笔记本电脑上为我的内核调用处理 dimBlock 和 dimGrid。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:45:09.430

您的代码中有几处错误。

1.  在 CC < 1.3 上使用双精度。
2.  线程块的大小（如您所说，CC <= 1.3 意味着每个块最多 512 个线程，每个块使用 1024 个线程）。`__CUDA_ARCH__`如果您确实需要一些多架构代码，我想您可以使用。
3.  没有错误检查或内存检查 ( `cuda-memcheck`)。您可能分配的内存比您拥有的更多，或者使用的线程/块数超过您的 GPU 可以处理的数量，而您将无法检测到它。

根据您的代码考虑以下示例（我使用的是`float`代替`double`）：

```
#include <cuda.h>
#include <stdio.h>      // printf

#define SIZE 988
#define GRID_SIZE 32
#define BLOCK_SIZE 16 // set to 16 instead of 32 for instance

#define CUDA_CHECK_ERROR() __cuda_check_errors(__FILE__, __LINE__)
#define CUDA_SAFE_CALL(err) __cuda_safe_call(err, __FILE__, __LINE__)

// See: http://codeyarns.com/2011/03/02/how-to-do-error-checking-in-cuda/
inline void
__cuda_check_errors (const char *filename, const int line_number)
{
  cudaError err = cudaDeviceSynchronize ();
  if (err != cudaSuccess)
    {
      printf ("CUDA error %i at %s:%i: %s\n",
          err, filename, line_number, cudaGetErrorString (err));
      exit (-1);
    }
}

inline void
__cuda_safe_call (cudaError err, const char *filename, const int line_number)
{
  if (err != cudaSuccess)
    {
      printf ("CUDA error %i at %s:%i: %s\n",
          err, filename, line_number, cudaGetErrorString (err));
      exit (-1);
    }
}

__global__ void
createDistanceTable (float *d_distances, float *d_coordinates)
{
  int col = blockIdx.x * blockDim.x + threadIdx.x;
  int row = blockIdx.y * blockDim.y + threadIdx.y;

  if (row < SIZE && col < SIZE)
    d_distances[row * SIZE + col] =
      acos (__sinf (d_coordinates[row * 2 + 0]) *
        __sinf (d_coordinates[col * 2 + 0]) +
        __cosf (d_coordinates[row * 2 + 0]) *
        __cosf (d_coordinates[col * 2 + 0]) *
        __cosf (d_coordinates[col * 2 + 1] -
            d_coordinates[row * 2 + 1])) * 6371;
}

int
main ()
{
  float *d_distances;
  float *d_coordinates;

  CUDA_SAFE_CALL (cudaMalloc (&d_distances, SIZE * SIZE * sizeof (float)));
  CUDA_SAFE_CALL (cudaMalloc (&d_coordinates, SIZE * SIZE * sizeof (float)));

  dim3 dimGrid (GRID_SIZE, GRID_SIZE);
  dim3 dimBlock (BLOCK_SIZE, BLOCK_SIZE);
  createDistanceTable <<< dimGrid, dimBlock >>> (d_distances, d_coordinates);

  CUDA_CHECK_ERROR ();

  CUDA_SAFE_CALL (cudaFree (d_distances));
  CUDA_SAFE_CALL (cudaFree (d_coordinates));
} 
```

编译命令（相应地更改架构）：

> nvcc prog.cu -g -G -lineinfo -gencode arch=compute_11,code=sm_11 -o prog

在 CC 2.0 上使用 32x32 块或在 CC 1.1 上使用 16x16：

> ```
> cuda-memcheck ./prog 
> ========= CUDA-MEMCHECK
> ========= ERROR SUMMARY: 0 errors 
> ```

在 CC 2.0 上使用 33x33 块或在 CC 1.1 上使用 32x32 块：

> ```
> cuda-memcheck ./prog 
> ========= CUDA-MEMCHECK
> ========= Program hit error 9 on CUDA API call to cudaLaunch 
> ========= Saved host backtrace up to driver entry point at error
> ========= Host Frame:/usr/lib/nvidia-current-updates/libcuda.so [0x26a230]
> ========= Host Frame:/opt/cuda/lib64/libcudart.so.5.0 (cudaLaunch + 0x242) [0x2f592]
> ========= Host Frame:./prog [0xc76]
> ========= Host Frame:./prog [0xa99]
> ========= Host Frame:./prog [0xac4]
> ========= Host Frame:./prog [0x9d1]
> ========= Host Frame:/lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main + 0xed) [0x2176d]
> ========= Host Frame:./prog [0x859]
> =========
> ========= ERROR SUMMARY: 1 error 
> ```

错误 9：

> ```
> /**
> * This indicates that a kernel launch is requesting resources that can
> * never be satisfied by the current device. Requesting more shared memory
> * per block than the device supports will trigger this error, as will
> * requesting too many threads or blocks. See ::cudaDeviceProp for more
> * device limitations.
> */ cudaErrorInvalidConfiguration         =      9, 
> ```

# twitter-bootstrap - 模态窗口快速消失

> ID：16186126
> 
> 赞同：0
> 
> 时间：2013-04-24T07:36:43.560
> 
> 标签：twitter-bootstrap

我正在尝试实现 2 个模态窗口。第一个模式窗口将包括一个联系表格。当用户单击提交时，我希望第一个模态窗口消失，然后立即出现一个新的模态窗口。

在我的情况下，按下提交按钮后，第一个模态消失，第二个模态会短暂出现然后消失。

我确保我只有 bootstrap-modal.js

任何帮助或指导将不胜感激！谢谢

第一个模态

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Contact</h3>
    </div>
    <div class="modal-body">

    <form class="form-horizontal">  
            <fieldset>  
                <div class="control-group">  
                    <label class="control-label" for="input01">Name</label>  
                    <div class="controls">  
                      <input type="text" class="input-xlarge" id="input01" name = "name">  
                    </div>  
                </div> 
                <div class="control-group"> 
                    <label class="control-label" for="input01">E-mail</label>  
                    <div class="controls">  
                      <input type="text" class="input-xlarge" id="input01">  
                    </div>  
                </div>  

              <div class="control-group">  
                <label class="control-label" for="textarea">Message</label>  
                <div class="controls">  
                  <textarea class="input-xlarge" id="textarea" rows="3"></textarea>  
                </div>  
              </div>  
            </fieldset>  
    </div>
    <div class="modal-footer">
        <button id= "form-submit" type="submit" class="btn btn-primary">Send</button>  
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>  
    </div>
    </form>
</div> 
```

第二模态

```
<div id="messageSentModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Success!</h3>
            <p>Your Message has been sent!</p>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>  
    </div>

</div> 
```

Javascript

```
<script src="index_files/jquery.js"></script>
<script src="index_files/bootstrap-transition.js"></script>
<script src="index_files/bootstrap-alert.js"></script>
<script src="index_files/bootstrap-modal.js"></script>
<script src="index_files/bootstrap-dropdown.js"></script>
<script src="index_files/bootstrap-scrollspy.js"></script>
<script src="index_files/bootstrap-tab.js"></script>
<script src="index_files/bootstrap-tooltip.js"></script>
<script src="index_files/bootstrap-popover.js"></script>
<script src="index_files/bootstrap-button.js"></script>
<script src="index_files/bootstrap-collapse.js"></script>
<script src="index_files/bootstrap-carousel.js"></script>
<script src="index_files/bootstrap-typeahead.js"></script> 
```

Javascript自定义代码

```
a = $(".span4").find('h3');
$(文档).ready(函数()
{
    $(".box").hide();
    a.点击（函数（）{
        $(this).next(".box").slideToggle(600);
        $(this).removeClass("sub_heading");
    });
    a.悬停（
     功能 （） {
       $(this).addClass("sub_heading");
     },
     功能 （） {
       $(this).removeClass("sub_heading");
     }
    );  
});

//提交按钮
$("#form-submit").click(function(){
    $("#myModal").modal('隐藏'); //隐藏第一个模态
    $("#messageSentModal").modal('show'); //显示第二个模态
});

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:45:43.573

这是正常行为，因为您正在提交表单。您将模态隐藏和显示放在提交功能中，因此 javascript 执行它们然后提交表单，使页面刷新。这就是为什么您只会简要地看到第二个模态。如果您在提交函数的末尾添加“return false”，您可以一个接一个地看到您的两个模态。（但您的表单不会以这种方式提交）我看到的这个问题的解决方案是使用 AJAX 提交，这样页面就不会刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:13:22.840

这似乎是当前版本的 Bootstrap 中的一个错误 - 我刚刚能够重现该错误，但是，如果您只包含模态和转换 js 文件，它应该会“工作”。

你可以在这里看到“工作”的解决方案：http: [//jsfiddle.net/Kyz5d/1/](http://jsfiddle.net/Kyz5d/1/)

注意：代码本身没有变化，期望“启动模式框”按钮 - 这个代码部分只是因为 jsfiddle.net 链接必须伴随代码：顺便说一句，我已经使用 jQuery 1.8.2 测试了该代码

```
<script src="index_files/jquery.js"></script>
<script src="index_files/bootstrap-transition.js"></script>
<script src="index_files/bootstrap-modal.js"></script> 
```

# asp.net - 刷新页面后如何隐藏asp:literal

> ID：16186128
> 
> 赞同：1
> 
> 时间：2013-04-24T07:36:57.497
> 
> 标签：asp.net, literals

我有 asp:literal 文本行，将在按下“保存”按钮后显示。但是当我刷新网站时，文字不会消失。

```
<asp:Literal id="Literall" Text="" runat="server"/>
Literall.text="Save completed!!!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:41:27.183

试试[这个](http://jcherryhomes.com/post/2013/01/03/Twitter-Bootstrap-Alert-Using-WebForms.aspx)网站！有关于你的问题的一切解释。

# asp.net - 如何在 Visual Studio 中生成 Web 服务的 WSDL 文件

> ID：16186129
> 
> 赞同：11
> 
> 时间：2013-04-24T07:37:04.680
> 
> 标签：asp.net, web-services, salesforce

我在 .NET 中有库存应用程序，它将与 Salesforce 互操作。

如何生成 Web 服务的 WSDL 文件，我被告知 Visual Studio 会自动创建它，并且还告诉我它不是物理创建的，如果它是那么如何将它导出到远程机器以访问如果`WSDL.exe`命令使用 asmx 文件执行它，什么是应该发射的确切位置。

如果我缺少任何链接，请提出建议。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-24T07:43:08.787

无需做任何特别的事情来为您的 Web 服务生成 WSDL。只需用“？WSDL”后缀您的Webservice url，您就会得到它。例如：

```
http://localhost/HelloService.asmx?WSDL 
```

完成此操作后，将 WSDL 保存为 XML 文件并将其作为 Web 引用添加到您想要调用它的客户端 .NET 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-27T16:39:40.310

在浏览器中查看时，查看源以摆脱可折叠元素。如果你想要一些清晰的东西，然后将其复制/粘贴到你最喜欢的 XML 查看器/格式化程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T09:11:15.330

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5.1 Tools\wsdl.exe" /language:CS /namespace:YourNameSpace /out:"G:\Work\YourFileName.cs" http://localhost/Service.asmx?wsdl 
```

这应该生成 .cs (c#) 文件。

# iphone - 导航栏没有立即改变背景 - IOS

> ID：16186131
> 
> 赞同：1
> 
> 时间：2013-04-24T07:37:09.467
> 
> 标签：iphone, ios, objective-c, navbar

我正在尝试使用代码更改导航栏的背景：

```
- (void)viewDidLoad
{
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"header_bg_smooth.png"] forBarMetrics:UIBarMetricsDefault];

    [super viewDidLoad];
...

} 
```

它有效，但我遇到的问题是，当您返回此代码所在的视图时，更改首先生效。因此，如果您转到此视图，导航栏不会更改，但是如果您再进一步然后返回此视图，则更改将生效。

有谁知道问题可能是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:40:41.187

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header_bg_smooth.png"] forBarMetrics:UIBarMetricsDefault];
...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:38:45.223

`viewDidLoad`仅在加载视图时触发一次。要在每次看到视图时运行代码，请将代码放入`viewDidAppear`or `viewWillAppear`（取决于您的使用情况）

此[答案](https://stackoverflow.com/a/5659007/188331)可帮助您从或`viewDidLoad`中进行选择。`viewDidAppear``viewWillAppear`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:39:52.010

使用`setBackgroundImage:forBarMetrics:`方法：并将此方法写在`viewWillAppear`

```
[navbar setBackgroundImage:[UIImage imageNamed:@"navbar"] 
               forBarMetrics:UIBarMetricsDefault]; 
```

这会对你有很大帮助....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:46:43.957

尝试这个..

```
UIView *backgroundView = ...
[navigationBar insertSubview:backgroundView atIndex:0]; 
```

另请参阅此链接.... [setting-custom-background-for-uinavigationbar-what-will-work-on-ios5-and-ios4-too](http://www.mladjanantic.com/setting-custom-background-for-uinavigationbar-what-will-work-on-ios5-and-ios4-too/)

# wcf - 从部署在 IIS 7.5 上的应用程序的类库中使用 WCF 时出错

> ID：16186136
> 
> 赞同：0
> 
> 时间：2013-04-24T07:37:26.713
> 
> 标签：wcf, iis

我是 WCF 服务的新手，在使用类库中的 WCF 时遇到错误，如果我在某处出错，请纠正；我正在逐步解释我的问题

1\. 独立的 WCF 项目，部署在本地 IIS 中，在 Visual Studio（开发环境）中运行良好。

2.`CustomClientChannelFactory`从业务层创建类并使用WCF（即类库）

```
CustomClientChannelFactory<IPDServices.IIPDServices> objChannelFactory = new CustomClientChannelFactory<IPDServices.IIPDServices>("BasicHttpBinding_IIPDServices", "HISWCFService.config"); 
                IPDServices.IIPDServices obj = objChannelFactory.CreateChannel();    
                strXML = obj.GetAllAdmittedPatients(strHospitalId); 
```

1.  绑定信息存储在`HISWCFService.config`（重命名为 App.config）并复制到指定位置（`C:\Program Files\Common Files\microsoft shared\DevServer\10.0`），这在调试应用程序时在本地 VS WebDev 服务器上运行良好。

2.  当我在 IIS 中部署应用程序时出现错误“ `The Address property on ChannelFactory.Endpoint was null. The ChannelFactory's Endpoint must have a valid Address specified.`”

请建议

# java - 克隆多维数组

> ID：16186141
> 
> 赞同：17
> 
> 时间：2013-04-24T07:37:47.377
> 
> 标签：java

```
int[][] array = new int[][] {...}
int[][] clone = array.clone(); 
```

我天真地期望这会奏效。但它没有——它只克隆了第一个维度，如果我想要一个真正的克隆，我必须手动去克隆另一个维度。注意：内容已正确复制。但是当我改变时`clone[0][1]`，它反映在`array[0][1]`

虽然`.clone()`已知执行浅克隆，但`int[][]`看起来像单个对象（如果我们不知道它的内部实现，至少）

为什么选择这种行为？不是`int[][]`引用数组对象，而不仅仅是数组的第一个维度？在什么情况下只克隆第一维所需的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T07:41:24.470

> 为什么选择这种行为？

一致性，很可能。

正如你所说，`int[][]`引用一个数组对象。碰巧每个数组元素的内容都是另一个数组，但这只是一个细节。Java 以相同的方式克隆所有数组，并且由于元素可以是任何类型，因此不能保证执行深度复制。

因此`clone()`对于数组执行浅拷贝，因此只克隆第一个维度。

（一般来说，对于克隆意味着深拷贝还是浅拷贝的问题，似乎没有单一的“最佳”或“明显”答案。开发人员想要什么取决于应用程序如何使用每个字段，所以一刀切的方法自然会有局限性。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T07:41:36.187

演示此行为是因为不存在真正的多维数组。

Java通过制作数组的数组来实现多维。意思是：

```
int[][] is actually Array<Array<int>> 
```

因此，克隆只会复制第一个维度。

如果您尝试使用 3 维数组，则需要克隆三次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:03:04.687

我实际上无法复制您提到的行为。我可以看到一些答案提到浅拷贝是问题的根本原因。如果我错了，请纠正我，浅拷贝只是意味着在克隆时我们将获得引用的副本，而不是对象的副本。可以在这里找到一个很好的解释[在 Java 中，什么是浅拷贝？](https://stackoverflow.com/questions/1175620/in-java-what-is-a-shallow-copy)

在这种情况下，浅拷贝只会确保原始数组中的更改会反映在克隆数组中，但不会阻止任何内容被复制。

```
int[][] array = new int[][] {{1,2,3},{4,5,6}, {7,8,9}};
int[][] clone = array.clone();

//Try this to see magic of shallow copy
//array[2][1]=11;

for(int i=0;i<array.length;i++)
    for(int j=0;j<array[i].length;j++)
        System.out.println("array["+i+"]["+j+"]"+array[i][j]);

for(int i=0;i<clone.length;i++)
    for(int j=0;j<clone[i].length;j++)
        System.out.println("clone["+i+"]["+j+"]"+clone[i][j]); 
```

对我来说，克隆非常完美，即两个数组具有相同的内容。对于克隆数组不会显示某些信息的问题，我能想到的唯一原因是我们实际上在克隆后修改了原始数组（然后浅拷贝开始起作用）。

顺便说一句，我使用的是 Java 1.6，我希望这不是问题。

**编辑：**如果我们只需要了解为什么它们是多维数组的浅拷贝而不是深拷贝。让我们看2个事实

1.  克隆时，对象总是被克隆为浅拷贝（对象引用的副本），只有本机类型才能获得真正的副本。[在 Java 中，什么是浅拷贝？](https://stackoverflow.com/questions/1175620/in-java-what-is-a-shallow-copy)
2.  java中的数组实际上是对象java中的[数组是对象吗](https://stackoverflow.com/questions/8781022/is-an-array-an-object-in-java)

现在结合1和2，我们知道Java中的多维数组只是一个对象，它具有其他数组对象的引用。

像 ArrayObj->{ArrayObj, ArrayObj, ArrayObj};

而且因为我们在对象（组合）中有对象，所以我们应该根据 Java 克隆规则获得浅拷贝。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T07:43:55.910

该`clone`方法是所谓的浅拷贝（参见[方法](https://stackoverflow.com/questions/5821851/does-calling-clone-on-an-array-also-clone-its-contents)[上的另一个 stackoverflow 答案`clone`](https://stackoverflow.com/questions/5821851/does-calling-clone-on-an-array-also-clone-its-contents)），这意味着所有元素都是通过引用复制的。

要获得您想要的（也称为深度克隆），您可以使用递归方式自己复制每个数组`Arrays.copy`，因此您找到的每个（子）数组都将获得深度克隆，或者[在深度克隆上查看这个 stackoverflow 答案](https://stackoverflow.com/questions/2156120/java-recommended-solution-for-deep-cloning-copying-an-instance/2156367#2156367)。

快乐的黑客:-)

# wordpress - 使用 php 脚本提供 mp4 和 pdf 文件

> ID：16186144
> 
> 赞同：0
> 
> 时间：2013-04-24T07:37:57.337
> 
> 标签：wordpress, .htaccess, pdf, mp4

如何使用 php 脚本保护 pdf 和 mp4 文件？当我在 wordpress 的上传目录中输入文件的确切 url 时，我会通过 .htaccess 重定向到一个 php 脚本 (serve.php)，该脚本应该能够将 pdf 和 mp4 文件的内容仅提供给经过身份验证的用户。该脚本应检查用户是否经过身份验证，然后检查文件是 pdf 还是 mp4，然后提供内容和适当的标题。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T15:28:47.463

根据上一个问题，将文件发送到`serve.php`后，您只需检查用户是否已登录（已通过身份验证）。

如果用户未通过身份验证，您应该简单地抛出一条错误消息，说明不允许他们查看文件，使用`die()`或输出带有`403 Forbidden`HTTP 状态代码的消息`header('HTTP/1.0 403 Forbidden');`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:23:52.317

如果您的服务器有 x_sendfile apache 模块 - 试试看。

[mod_xsendfile 主页](https://tn123.org/mod_xsendfile/)

如何使用：

[PHP - 保护数字下载](https://stackoverflow.com/questions/5412328/php-protecting-digital-downloads)

# apache - Apache Flume 在哪里记录其错误消息？

> ID：16186145
> 
> 赞同：1
> 
> 时间：2013-04-24T07:37:59.547
> 
> 标签：apache, flume

我是 Apache Flume 的新手，只是我想知道，Apacheflume 在哪里记录其错误消息和元数据信息。我在 apche flume 目录中搜索了捕获的错误日志，但我没有看到任何名称为 log 的 floder。

谁能帮我解决这个问题，如何在 apache flume 中配置日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:46:54.333

Flume 日志位于*/var/log/flume-ng*中。此位置在日志记录配置文件*/etc/flume-ng/conf/log4j.properties*中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T02:53:19.613

Dmitry 是对的，日志文件位置在`FLUME_HOME/conf/log4j.properties`.

我只是想补充一点，在 Apache Flume 1.5 中，默认的日志位置是：

```
FLUME_HOME/logs/flume.log 
```

如果 Flume 初始化失败，可能不会生成日志文件——这通常意味着 Flume 找不到 Java、配置文件等。

# javascript - jScrollPane 不适用于整页滚动条

> ID：16186146
> 
> 赞同：0
> 
> 时间：2013-04-24T07:38:00.627
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

我正在尝试在整个页面中实现 jScrollPane 以更改页面的滚动条，但它不起作用。

我的代码是css：

```
html,body {
    height: 100%;
    width: 100%;
    overflow: hidden;
}

#main-wrap {
    height: 100%;
} 
```

jQuery：

```
 jQuery(document).ready(function ($) {
     "use strict";
  $('#main-wrap').jScrollPane();
  }); 
```

和html：

```
 <div id="main-wrap">
     all other contents...
  </div> 
```

以及 jScrallPane 中给出的所有内容。

问题是：出现滚动条，但页面不直接用捏滚动或鼠标滚动滚动。

请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:09:47.293

您是否尝试在 css 中为#main-wrap 指定宽度

```
#main-wrap{
width:400px;
overflow:auto;
} 
```

# c# - 这是什么意思/做什么？“值 < 0 ？-值：值；”

> ID：16186148
> 
> 赞同：1
> 
> 时间：2013-04-24T07:38:06.550
> 
> 标签：c#, properties

在 C# 中

我正在关注的一本书建议设置和获取属性：

```
double pri_test;

public double Test
{
    get { return pri_test; }
    set { pri_test = value < 0 ? -value : value; }
} 
```

我了解`value`正在做什么，它是使用该属性的外部事物的输入值，但是我不了解符号的使用`-value`和`?``:`

有人可以解释一下这是什么意思：`value < 0 ? -value : value`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:39:08.480

您正在查看条件运算符。见[`?: Operator (C# Reference)`](http://msdn.microsoft.com/en-gb/library/ty67wk28%28v=vs.80%29.aspx)and [`?: (Wikipedia)`](http://en.wikipedia.org/wiki/?%3a#C.23)（后面的链接很简洁！）

您经常会看到人们将条件运算符称为*三元*运算符。这是因为在这种情况下，三元运算符需要三个操作数 - 条件和两个表达式。

* * *

关于`-value`，前缀`-`仅仅否定整数

```
int bar = 10;
int foo  = -bar;
Console.Write(foo); //prints "-10". 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T07:40:10.753

从[`?: Operator`](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.110%29.aspx)

```
condition ? first_expression : second_expression; 
```

> `condition`必须评估为`true`or `false`。如果`condition`是`true`, `first_expression`被评估并成为结果。如果`condition`是 `false`,`second_expression`被评估并成为结果。

```
pri_test = value < 0 ? -value : value; 
```

相当于；

```
if( value < 0 )
{
   pri_test = -value;
}
else
{
   pri_test = value;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T07:44:16.727

您已经得到了一些指向[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.110%29.aspx)的答案，这占了您问题的一半

> 有人能解释一下这是什么意思吗？`value < 0 ? -value : value`

该行的作用`value`是检查它是否为负数，如果是，则将其转为正数。如果该值一开始是正数，它就会不理会它。

.NET 框架中已经有一个方法可以做到这一点：[`Math.Abs`](http://msdn.microsoft.com/en-us/library/system.math.abs.aspx). 所以那行可以重写为

```
 pri_test = Math.Abs(value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T07:42:13.540

这里用来取一个数的绝对值。所以如果这个数字是负数。他们取负数，得到正数（负数乘以负数是正数）。

其他答案处理 ?: 三元运算符，但我会在 setter 中将代码更改为如下所示：

```
set { pri_test = Math.Abs(value); } 
```

更具可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T07:42:23.670

```
value < 0 ? -value : value 
```

等于这个

```
if(value < 0) 
{

   pri_test = -value;

}
else
{
   pri_test = value;
} 
```

# javascript - javascript弹出框显示，背景半透明，我该怎么办

> ID：16186151
> 
> 赞同：0
> 
> 时间：2013-04-24T07:38:08.603
> 
> 标签：javascript, css, popup

我是 javascript 和 css 的初学者

现在我想创建一个弹出框显示消息，同时html正文是半透明的。但是现在我做的不是那么好，我该怎么办？

我需要你的帮助

我的代码在下面

html代码

```
<div id="confirm_box" class="info_box">
<div class="info_box confirm_info">
    <div class="info_box confirm_title">{$confirmTitle}</div>
    <div class="info_box confirm_close">
        <span id="confirm_close" class="info_box confirm_close">×</span>
    </div>
</div>

<div id="info_box_content" class="info_box confirm_content">
    <div class="info_box info_img_box">
        <img src="{$url_app_dir}img/confirm_dog.png" class="info_box confirm_img"/>
    </div>
    <div id="content_box" class="info_box content_box">
    {$confirmContent}<label id="info_box_text" class="info_box info_text"></label>
    </div>
</div>
<div class="info_box confirm_button">
    <button class="info_box confirm_submit" >确认</button>
</div> 
```

js代码

```
window.onload = function ()
{
var confrimWin = document.getElementById("confirm_box");
var comfirmBtn = document.getElementById("show_confirm_box");
var closeBtn = document.getElementById("confirm_close");
var bodyElement = document.getElementsByTagName("body")[0];
//show pop-up box
comfirmBtn.onclick = function()
{           
    confrimWin.style.display = "block";     
    bodyElement.setAttribute('class',"body_mask");

    var text = document.getElementById("name").value;       
    document.getElementById("info_box_text").innerHTML= text ;
};
//close box
closeBtn.onclick = function()
{
    confrimWin.style.display = "none";
    bodyElement.setAttribute('class',"");   
}   

//get mouse Object
document.onclick = function(){  
    var e = arguments[0] || window.event;  
    var eventSource = e.srcElement||e.target;
    var isShow = eventSource.className.toLowerCase().indexOf('info_box');

    if(eventSource.className == 'btn'){
        comfirmBtn.onclick();
    }
    else if( isShow < 0)
    {

        confrimWin.style.display = "none";
        bodyElement.setAttribute('class',"");   
    }
} 
```

};

html代码

```
#confirm_box{
position:fixed;
top:50%;
left:50%;
width:500px;
height:300px;
border-radius: 5px 5px 5px 5px;
background:#fff;
z-index:100;
border:4px solid rgb(   220,220,220);
margin:-102px 0 0 -202px;
display:none;
}

.body_mask{
position: fixed;
background-color: none repeat scroll 0% 0% rgb(128,128,128);
opacity: 0.75; 
/* z-index: 100; */
display:block; 
}
.confirm_info{  
font-size:16px;
text-align:right;
background:#fff;
border-bottom:1px solid rgb(135,180,250);
padding:5px;
height:20px;
}
.confirm_title {
font-family:"微软雅黑","黑体";
float:left;
font-weight: bold;
color:rgba(30, 144, 255, 0.75);
}
.confirm_close {
float:right;

}
.confirm_close span{
font-size:16px;
color:#fff;
cursor:pointer;
background:rgb(135,180,250);
border:1px solid rgba(30, 144, 255, 0.75);
padding:0 2px;
}

.confirm_content{
font-family:"微软雅黑","黑体";
font-size: 14px;
line-height: 24px;
padding:5px;
height:70%;
width:100%;
}
.info_text{
font-family:"微软雅黑","黑体";
color: rgb(0, 108, 202);
line-height: 24px;  
height:70%;
width:100%;
}
.info_img_box{
float:left;
width: 200px;
height: 200px;
}
.content_box{
float:left;
width: 230px;
height: 200px;
}
.confirm_button{
background:#C4C4C4;
border:1px solid rgba(30, 144, 255, 0.75);
}
.confirm_submit {
float:right;
font-size: 15px;
width: 80px;
height:30px;
cursor:pointer;
color: rgb(255,245,238);
padding: 0px 10px; 
margin:8px 10px;   
border-radius: 5px 5px 5px 5px;
/*  text-shadow: 1px 1px 3px rgb(255, 255, 255); */
border: 1px solid rgb(135,170,230);
background: -moz-linear-gradient(center top , rgb(135,180,250),rgb(135,180,250) ) repeat scroll 0% 0% transparent;
}
.confirm_submit:hover {
background: none repeat scroll 0% 0% rgb(135,160,230);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:28:21.670

作为 javascript&css 的初学者，我尝试一次又一次地解决问题。最后以一种不太喜欢的方式解决了它

下面是我改过的代码，比以前好多了

```
#confirm_box{
position:fixed;
top:50%;
left:50%;
width:500px;
height:300px;
border-radius: 5px 5px 5px 5px;
background:#fff;
border:4px solid rgb(   220,220,220);
margin:-102px 0 0 -202px;
z-index: 1002;/*this add css code will show confirm_box upon body_mask*/
display:none;
} 
```

html代码

```
<div id="confirm_box" class="info_box">
</div>
<div id="hide_info_box" class="body_mask"></div> 
```

javascript代码

```
window.onload = function ()
{
var confrimWin = document.getElementById("confirm_box");
var comfirmBtn = document.getElementById("show_confirm_box");
var closeBtn = document.getElementById("confirm_close");
var hideElement = document.getElementById("hide_info_box");

//show info box 
comfirmBtn.onclick = function()
{           
    confrimWin.style.display = "block";
    hideElement.style.display = "block";
    var text = document.getElementById("name").value;       
    document.getElementById("info_box_text").innerHTML= text ;
};

    //close info box
closeBtn.onclick=hideElement.onclick=function()
{
    confrimWin.style.display = "none";
    hideElement.style.display = "none"; 
}
}; 
```

# sql-server - 调度程序从 SQL Server 获取数据到 Oracle

> ID：16186154
> 
> 赞同：0
> 
> 时间：2013-04-24T07:38:20.893
> 
> 标签：sql-server, oracle

我想创建一个任务作为调度程序将数据从 SQL Server 2000 获取到 Oracle 吗？我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:28:42.373

这种过程称为 ETL 自动化。

1.  在加载到其他系统之前，您应该首先编写适当的代码来完成数据转换和提取。你有几个选择。其中之一是使用 SQL。您可以使用 oracle 从 SQL 服务器获取数据，反之亦然。

2.  最好将此代码转换为批处理可执行文件，以便能够从命令行运行。

3.  根据您的业务需求选择调度程序来执行作业。

替代方案是用于 ux 平台的 cron、用于 ms 平台的 windows 任务调度程序、用于实现您自己的开源框架（如quartz）、开源产品（如果您没有预算）或更专业的商业产品（如 TlosLite）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:39:24.670

在 Sql server 中，您可以创建 DTS 作业以将数据从 SQL server 表传输到 Oracle 表。稍后使用 SQL server Agent，您可以安排此作业。

# socket.io - Webtrc 广播有多个带宽使用

> ID：16186158
> 
> 赞同：0
> 
> 时间：2013-04-24T07:38:27.833
> 
> 标签：socket.io, webrtc, multipoint

我想创建一个 webrtc 广播演示

[https://webrtc-experiment.appspot.com/socket.io/](https://webrtc-experiment.appspot.com/socket.io/)

在这里我有一个问题广播公司在连接 10 多个用户时有巨大的带宽，因为它使用对等连接，所以它使用这样的上传带宽

总上传带宽 = 用户数 *（上传 1 个视频大约需要 30 kb）

所以我想这样发展

[http://bloggeek.me/webrtc-multipoint-small-groups](http://bloggeek.me/webrtc-multipoint-small-groups)

如何使用最小带宽开发多点 webrtc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-16T04:10:14.530

虽然您想以小组多点方式使用 WebRTC，但这会带来很多复杂性和可靠性问题。根据我的经验，大多数通过对等中继的 WebRTC 应用程序往往不太可靠。从概念上讲，这是一个好主意，但我还没有看到任何可靠的实际应用。可扩展 WebRTC 广播的最可靠实现倾向于在中间使用服务器。你可以使用 Janus 之类的东西，但我更喜欢开源的 Kurento。如果您不想深入了解事物的工作原理，那么还有一个名为 OpenVidu 的平台位于 Kurento 之上，但可定制性较差。您甚至可以实时录制、转码和处理视频。

# c# - C# WebBrowser，注入 JavaScript 不会更新 HtmlDocument

> ID：16186159
> 
> 赞同：0
> 
> 时间：2013-04-24T07:38:28.783
> 
> 标签：c#, winforms, browser

我正在尝试解决一个让我感到不安的问题。这可能很明显，但我真的无法弄清楚出了什么问题。

我有一个带有 WebBrowser 的 winform，我以这种方式加载它，它工作正常：

```
 WebBrowser.DocumentText = someHtmlCode; 
```

在我的 winform 的网络浏览器中，我可以右键单击以获取 HTML 源代码并检查代码是否与我在 DocumentText 属性中设置的相同......此时一切正常。

因此，一旦我加载并运行它，我就会向其中注入一些 JavaScript 代码，如下所示：

```
 HtmlElement head = WebBrowser.Document.GetElementsByTagName("head")[0];
    HtmlElement scriptEl = WebBrowser.Document.CreateElement("script");
    IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
    element.text = "function sayHello() { alert('hello') }";
    head.AppendChild(scriptEl); 
```

所以我添加了一个名为“sayHello”的新 JavaScript 函数，我可以这样调用它，它仍然可以正常工作：

```
 WebBrowser.Document.InvokeScript("sayHello"); 
```

所以此时一切正常，我可以运行 JavaScript 函数并在 WebBrowser 中获取警报，但让我感到不安的是，当我右键单击 WebBrowser 以获取源代码时，我得到的代码与我在开始。没有任何关于后来添加的 JavaScript 代码的踪迹，尽管它在那里是因为当我调用它时它正在工作。

当然，如果我查看 WebBrowser.HtmlDocument，我也看不到 JavaScript，这与查看源代码相同。

所以我的问题是：新的 JavaScript 代码去哪儿了，我怎样才能把它找回来？我需要获取更新的 HTML 代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:36:15.763

源代码不会为您提供更新的文档。要获取更新的文档，您必须使用以下

```
HtmlElement head = WebBrowser.Document.GetElementsByTagName("head")[0];
string h = head.innerHtml; 
```

唯一的选择是导航顶部节点并获取当前 Html 状态的 innerHtml。

# php - 递归表哪个子父关系

> ID：16186168
> 
> 赞同：1
> 
> 时间：2013-04-24T07:38:53.620
> 
> 标签：php, mysql, codeigniter, pyrocms

我有一个递归函数的问题，它需要太多资源才能在下拉列表中显示子父关系。例如：

```
home
-menu 1
-menu 2
home 1
-menu 3
-menu 4 
```

我每次都为递归调用数据库编写了一些代码，这就是为什么我的代码需要大量资源来运行的原因。

下面是我的代码：

--调用递归

```
$tmp = $this->get_nav_by_parent(0);
$a_sel = array('' => '-Select-');
$a_sel_cat = array('home' => 'home');
$this->get_child_nav_cat($tmp, 0, $a_sel); 
```

--

```
public function get_nav_by_parent($parent) {
        $all_nav = $this->db
                ->select('id, title, parent')
                ->where('parent',$parent)
                ->order_by('position')
                ->get('navigation_links')
                ->result_array();

        $a_tmp = array();
        foreach($all_nav as $item)
        {
            if($parent != 0){
               $item['title'] = '--' . $item['title'];
            }
            $a_tmp[] = $item;
        }
        return $a_tmp;
    } 
```

-- 递归函数

```
 public function get_child_nav_cat($a_data, $parent, &$a_sel) {

        foreach($a_data as $item) {
            $a_sel[$item['page_slug_key']] = $item['title'];
            $atmp = $this->get_nav_by_parent($item['id']);
            $this->get_child_nav_cat($atmp, $item['id'], $a_sel);         
        }
       return $a_sel;
   } 
```

请给我建议，以便在选择框中将数据显示为父子关系的最佳解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:31:38.620

显示父子关系的最佳方法是在数据库中保留父子标志，而不是使用循环获取值。

在您的情况下，Home 1 是父标志，菜单属于子标志。

从 db 获取数据，您的循环如下所示：-

```
$arr = array(0 => array('name' => 'home','parent' => 0),
  1 => array('name' => 'menu 1 ','parent' => 1),
  2 => array('name' => 'menu 2 ','parent' => 1),
  3 => array('name' => 'home 1','parent' => 0),
  4 => array('name' => 'menu 3 ','parent' => 2),
  5 => array('name' => 'menu 4','parent' => 2)
  );

  $dd_html = '<select>';
  foreach($arr as $k => $v){
        if($v['parent'] == 0 )
           $dd_html .='<option>'.$v['name'].'</option>';
         else 
           $dd_html .='<option>--'.$v['name'].'</option>';
  }

  $dd_html .= '</select>';

  echo $dd_html; 
```

输出 ：-

```
home
-menu 1
-menu 2
home 1
-menu 3
-menu 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:19:54.710

设置`ParentID=0`为检测根项目然后执行以下操作：
`SELECT * FROM table ORDER BY ParentID, ID`
然后遍历结果，当 ParentID 更改时，创建新级别。

# php - 请求 index.php 以使用其他脚本是不好的做法

> ID：16186179
> 
> 赞同：1
> 
> 时间：2013-04-24T07:39:19.313
> 
> 标签：php, performance, code-structure

用作其他脚本的加载程序是不好的`index.php`还是会有所作为？

即`index.php`使用不同的查询字符串请求并在其中选择并包含匹配的脚本。

例如

`www.example.com/?sign-in`代替`www.example.com/sign-in.php` `www.example.com/?new-post`代替`www.example.com/new-post.php`

通过这种方式，您可以`index.php`用来执行常见的包含和过程，例如设置时区、mb 编码、数据库连接、身份验证等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:51:06.757

是和否

问题是这样做会失去任何 SEO 价值，例如： domain.com/index.php?post=story 对 domain.com/post/story 的排名会很差。此外，您的 index.php 很快就会变得一团糟。

话虽如此，MVC 通常使用 index.php，所以我的 url 将是 domain.com/users/edit/123 这是一个非常合乎逻辑的 url，但实际调用的是 domain.com/index.php ，然后它会查看第一个参数“users”并实例化用户控制器，然后在其中查找函数编辑并将“123”（用户 ID）作为函数中的第一个参数传递。如果您不熟悉 MVC，我建议您将 codeigniter 作为入门，[更多关于 codeigniter](http://codeigniter.com/ "这里")。

最后，您将只是通过从头开始构建它来重新发明轮子，而不是使用 MVC 使开发更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:42:40.273

最佳实践是让 apache 将所有 url 重写为一个`index.php`或其他可以用作引导程序的文件。此引导程序运行所有基本代码，然后此引导程序可以根据 url 确定要采取哪些其他操作。

每个框架都是这样工作的。

您可能想在引导程序中做几件事：

*   设置，自动加载类

*   设置mysql连接

*   检查用户是否已通过特定操作的身份验证

有很多关于用 apache 重写 url 的教程：[http ://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

如果您真的想了解最佳实践，我建议您查看现有框架，了解它们如何实现某些东西。例如：Zend 或 Symfony

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:13:19.990

除了将所有请求（通过 htaccess）路由到 index.php 之外，您还可以拆分路由以映射到其他文件：

`/blog/hello-there`映射到`blog.php?title=hello-there`

`/sign/in`映射到`login.php?login`

等等，因此您可以根据请求 URL 创建自己的简单路由；易于阅读和维护。

该解决方案适用于小型项目，对于较大的项目，我建议使用完整的框架，如 Yii 或 Symfony。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T08:06:31.607

这是最好的方法。您可以控制您的网站。`index.php`按需创建和包含其他文件。（定义一个常量并在包含的文件等中使用它）
但请记住尽可能减少`index.php`。
您也可以使用 Apache`mod_rewrite`生成 SEO 友好的 URL。

# asp.net - 在 SqlCommand SqlParameter 作为转换类型

> ID：16186183
> 
> 赞同：0
> 
> 时间：2013-04-24T07:39:25.587
> 
> 标签：asp.net, sql-server

我正在尝试通过`SqlParameter`.

但是查询没有被执行。

```
string strSQL = @"SELECT User_ID, Enabled 
              FROM User_Reg 
              WHERE Username = @paramUsername 
                AND CAST(Password AS varbinary(30)) = CAST(@paramPassword AS varbinary(30))";

objSqlCommand = new SqlCommand(strSQL, objSqlDbComm.SqlConnectionObject);
objSqlCommand.Parameters.AddWithValue("@paramUsername", txtUsername.Text);
objSqlCommand.Parameters.AddWithValue("@paramPassword", txtPassword.Text);

DataTable objDataTable = objSqlDbComm.ExecuteDataset(objSqlCommand).Tables[0]; 
```

`objDataTable.Rows.Count`计数为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:44:59.290

```
string strSQL = @"SELECT User_ID, Enabled FROM User_Reg WHERE Username = '"+txtUsername.Text+"'AND CAST(Password AS varbinary(30)) = CAST('"+txtPassword.Text+"' AS varbinary(30))";
objSqlCommand = new SqlCommand(strSQL, objSqlDbComm.SqlConnectionObject);
objSqlCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:29:42.800

```
string Query = @"SELECT User_ID, Enabled FROM User_Reg WHERE Username = '"+txtUsername.Text+"'AND CAST(Password AS varbinary(30)) = CAST('"+txtPassword.Text+"' AS varbinary(30))";
objSqlCommand = new SqlCommand(Query, objSqlDbComm.SqlConnectionObject);
objSqlCommand.ExecuteNonQuery(); 
```

# ruby - Amazon 负载均衡器将 Web Socket 连接丢弃到 TorqueBox

> ID：16186184
> 
> 赞同：3
> 
> 时间：2013-04-24T07:39:25.920
> 
> 标签：ruby, amazon-web-services, jruby, amazon-elb, torquebox

我在亚马逊 AWS 上运行 TorqueBox。我创建了一个负载均衡器，它在端口 8675 上为 Web Socket 连接传递 TCP。当我第一次加载页面时，这似乎工作得很好，但是如果我让页面打开一段时间，连接就会停止在职的。我没有收到错误消息，它只是默默地忽略通过连接发送的任何进一步消息。如果此时我重新加载页面，一切都会再次正常。

我已经尝试直接连接到集群中的各个节点，并且在这种情况下连接不会断开，所以我怀疑它与负载平衡器有关。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T10:13:16.970

有关您的特定架构的更多信息可能很有用，但我的第一个猜测是您应该启用会话粘性，以便来自同一主机的请求被定向到 AWS 上的同一台机器（如果请求被定向到另一台机器，则协议必须重新协商）。

# wix - 在 wix v3.8 中进行重大升级时如何保留配置文件？

> ID：16186187
> 
> 赞同：15
> 
> 时间：2013-04-24T07:39:44.353
> 
> 标签：wix, upgrade, preserve

当 msi 安装程序进行重大升级时，我想保留一个配置文件。对于配置文件，我在安装时进行了更改。代码如下：

```
<Component Id="MODIFYCONFIG" Guid="6A1D7762-B707-4084-A01F-6F936CC159CE" Win64="yes">
    <File Id="Application.config" Name="Application.config" Vital="yes" KeyPath="yes" Source="Resource\Application.config"></File>
    <util:XmlFile Id="SetValueIP" Action="setValue" Permanent="yes" File="[#Application.config]"
         ElementPath="/configuration/applicationSettings/Application.Properties.Settings/setting[\[]@name='IpAddress'[\]]/value"  Value="[IPADDRESS]" Sequence="1"/>
    <util:XmlFile Id="SetValuePort" Action="setValue" Permanent="yes" File="[#Application.config]"
         ElementPath="/configuration/applicationSettings/Application.Properties.Settings/setting[\[]@name='IpPort'[\]]/value"  Value="[PORT]" Sequence="2"/>
    <Condition>Not Installed</Condition>
  </Component>
  <Component Id="KEEPCONFIG" Guid="F7F173AA-C2FD-4017-BFBC-B81852A671E7" Win64="yes">
    <RemoveFile Id="ApplicationConfig" Name="Application.config" On="uninstall"/>
    <Condition>(REMOVE=ALL) AND (NOT UPGRADINGPRODUCTCODE)</Condition>
  </Component> 
```

但是当发生重大升级时，文件不会被保留。如何保留修改后的文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-27T14:14:37.747

这为我解决了...配置文件通过次要/主要升级保留，并在卸载时完全删除。

参考：http: [//blogs.msdn.com/b/astebner/archive/2008/10/19/9006538.aspx](http://blogs.msdn.com/b/astebner/archive/2008/10/19/9006538.aspx)

编辑：来自链接页面的汇总信息...

1.  **每个配置文件都应该有自己的组件，其中配置文件被标记为组件的 keypath。**Windows Installer 将使用未版本化的文件替换逻辑。
2.  **在“InstallFiles”操作之后添加“RemoveExistingProducts”操作。**在删除旧 MSI 之前安装所有组件的新版本。当它按此顺序完成时，组件的引用计数将增加到 2，但配置文件不会被替换，除非它们未修改（因为未版本化的文件替换逻辑）。当旧的 MSI 被删除时，引用计数将减回到 1，但文件不会被删除，因为引用计数不为 0。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-24T12:07:59.637

升级时有 3 个选项：

1.  使配置文件组件永久化。这不会卸载它，您可以升级它，但删除它会非常困难。
2.  使用[Remember 属性模式](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)将 IP 和 PORT 的配置设置存储在注册表中。
3.  作为安装的一部分，将配置文件写入临时文件名，然后使用 CopyFile 命令创建目标文件。升级时使用 FileSearch 检查文件，如果存在则不要复制。这里唯一的问题是，如果配置文件已更改，您将无法获得更新的部分。

最好的选择是记住我的属性，因为它的问题最少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T16:13:15.377

我花了一段时间，但这是我自己解决的方法。这可能是caveman_dick 的第三个选项的变体。

1) 在 UISequence 中添加新操作以备份您当前的配置文件。您可以使用自定义操作和 ComponentSearch 的魔力来实际定位文件。

2) 稍后在 ExecuteSequence 中恢复文件。

```
<Binary Id="CustomActions.CA.dll" SourceFile="..\CustomActions\bin\$(var.Configuration)\CustomActions.CA.dll" />
<CustomAction Id="BackupConfigFile"
         Return="check"
         BinaryKey="CustomActions.CA.dll"
         DllEntry="BackupFile" />

<CustomAction Id="RestoreConfigFile"
     Return="check"
     Execute="deferred"
     Impersonate="no"
     BinaryKey="CustomActions.CA.dll"
     DllEntry="RestoreFile" />

<CustomAction Id="PropertyDelegator" 
              Property="RestoreConfigFile" 
              Value="MYTARGET=[MYTARGET];FILENAME_TO_BACKUP=[FILENAME_TO_BACKUP]" />

<Property Id="FILENAME_TO_BACKUP" Value="test.exe.config" />

<Property Id="PREVIOUS_PATH">
  <ComponentSearch Id="evSearch" Guid="{010447A6-3330-41BB-8A7A-70D08ADB35E4}" />
</Property> 
```

这是我写的快速CustomAction.cs：

```
[CustomAction]
public static ActionResult BackupFile(Session session)
{
    try
    {
        // check out if the previous installation has our file included
        // and if it does,
        // then make copy of it.
        var previousInstallationPath = session["PREVIOUS_PATH"];
        var fileToBackup = session["FILENAME_TO_BACKUP"];

        if (!string.IsNullOrEmpty(previousInstallationPath) && !string.IsNullOrEmpty(fileToBackup))
        {
            var absolutePath = Path.Combine(previousInstallationPath, fileToBackup);
            if (File.Exists(absolutePath))
            {
                var destinationPath = Path.Combine(Path.GetTempPath(),
                    string.Concat(fileToBackup, _MODIFIER));

                File.Copy(absolutePath, destinationPath);
            }
        }
    }
    catch (Exception e)
    {
        session.Log("Couldn't backup previous file: {0}", e);
    }
    return ActionResult.Success;
}

[CustomAction]
public static ActionResult RestoreFile(Session session)
{
    try
    {
        // check if our CustomAction made backup of file,
        // and if it indeed exists in temp path, then
        // we basically copy it back.
        var currentInstallationPath = session.CustomActionData["MYTARGET"];
        var fileToRestore = session.CustomActionData["FILENAME_TO_BACKUP"];
        var fileOriginalContentPath = Path.Combine(Path.GetTempPath(),
            string.Concat(fileToRestore, _MODIFIER));

        if (File.Exists(fileOriginalContentPath))
        {
            var destinationFile = Path.Combine(currentInstallationPath, fileToRestore);
            if (File.Exists(destinationFile))
                File.Delete(destinationFile);

            File.Move(fileOriginalContentPath, destinationFile);
        }
    }
    catch (Exception e)
    {
        session.Log("Couldn't restore previous file: {0}", e);
    }
    return ActionResult.Success;
} 
```

实际定义序列：

```
<InstallUISequence>
  <Custom Action="BackupConfigFile" After="AppSearch"></Custom>
</InstallUISequence>

<InstallExecuteSequence>
  <Custom Action="PropertyDelegator" Before="RestoreConfigFile" />
  <Custom Action="RestoreConfigFile" After="InstallFiles"></Custom>
</InstallExecuteSequence> 
```

尚未对其进行彻底测试，但目前似乎可以完成这项工作。警告：临时文件夹可能会改变？！

或者有一个我从互联网上找到的，但没有测试过。

```
 <!-- Support Upgrading the Product -->

            <Upgrade Id="{B0FB80ED-249E-4946-87A2-08A5BCA36E7E}">

                  <UpgradeVersion Minimum="$(var.Version)"
OnlyDetect="yes" Property="NEWERVERSIONDETECTED" />

                  <UpgradeVersion Minimum="0.0.0"
Maximum="$(var.Version)" IncludeMinimum="yes" 

                                          IncludeMaximum="no"
Property="OLDERVERSIONBEINGUPGRADED" />

            </Upgrade>

            <Property Id="OLDERVERSIONBEINGUPGRADED" Secure="yes" />

            <!-- Action to save and Restore the Config-File on reinstall
-->

            <!-- We're using CAQuietExec to prevent DOS-Boxes from
popping up -->

            <CustomAction Id="SetQtCmdLineCopy" Property="QtExecCmdLine"
Value="&quot;[SystemFolder]cmd.exe&quot; /c copy
&quot;[INSTALLDIR]MyApp.exe.config&quot;
&quot;[INSTALLDIR]config.bak&quot;" />

            <CustomAction Id="QtCmdCopy" BinaryKey="WixCA"
DllEntry="CAQuietExec" Execute="immediate" />

            <CustomAction Id="SetQtCmdLineRestore"
Property="QtCmdRestore" Value="&quot;[SystemFolder]cmd.exe&quot; /c move
/Y &quot;[INSTALLDIR]config.bak&quot;
&quot;[INSTALLDIR]MyApp.exe.config&quot;" />

            <CustomAction Id="QtCmdRestore" Execute="commit"
BinaryKey="WixCA" DllEntry="CAQuietExec" />

            <!-- These actions will run only for a major upgrade -->

            <InstallExecuteSequence>

                  <Custom Action="SetQtCmdLineCopy"
After="InstallInitialize"> NOT (OLDERVERSIONBEINGUPGRADED = "")</Custom>

                  <Custom Action="QtCmdCopy"
After="SetQtCmdLineCopy">NOT (OLDERVERSIONBEINGUPGRADED = "")</Custom>

                  <Custom Action="SetQtCmdLineRestore"
Before="InstallFinalize">NOT (OLDERVERSIONBEINGUPGRADED = "")</Custom>

                  <Custom Action="QtCmdRestore"
After="SetQtCmdLineRestore">NOT (OLDERVERSIONBEINGUPGRADED =
"")</Custom>

            </InstallExecuteSequence> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T09:40:09.193

还有另一种选择，但它可能不适用于您的场景 - 这完全取决于*最初*运行您的安装程序的人...

例如，如果您的应用程序是通过网络下载的，那么我们通常会使用 Caveman_dick 的记住属性模式。

但是，我们有几套产品总是由我们自己的安装人员安装，他们访问客户站点。在这种情况下，根本不要在安装程序中包含配置文件！

简而言之 -**如果安装程序不知道某个文件，那么它就不会卸载它！**

在这种情况下，您可以选择让您的安装团队创建和配置配置文件，或者您的应用程序在它不存在时创建它，并询问用户的值。

如前所述，在某些情况下这不是一个选项，但它对我们来说效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-10T12:08:14.993

添加`Schedule="afterInstallExecuteAgain"`MajorUpgrade

```
<MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." Schedule="afterInstallExecuteAgain" /> 
```

它对我有用

# gwt - 在 GWT 中，如何隐藏 CheckBox 的一部分文本

> ID：16186188
> 
> 赞同：0
> 
> 时间：2013-04-24T07:39:47.057
> 
> 标签：gwt, checkbox

好的，假设我得到了：

```
CheckBox myCheckBox=new CheckBox("http://verylongurlverylonngurl_image.jpg"); 
```

我想隐藏`http://verylongurlverylonngurl_`复选框文本的一部分，即当在网站上看到复选框时，它将显示“image.jpg”作为复选框的文本，但是当我们获取该复选框的文本时：

```
myCheckBox.getText(); 
```

它将返回字符串“ [http://verylongurlverylonngurl_image.jpg](http://verylongurlverylonngurl_image.jpg) ”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:12:21.993

看起来您想`getText()`成为`image.jpg`并使用它[`getFormvalue()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/CheckBox.html#getFormValue%28%29)来获取*完整值*：`getText()`是显示的文本，`getFormvalue()`是复选框的*实际值*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:00:09.803

如果您只想使用它，您可以创建自己的小部件`myCheckBox.getText();`

```
public class TextShortenedCheckBox extends CheckBox{
   private String original;
   public CheckBox(String label, int visibleLength){
        super(label.subString(visibleLength));
          original=label;

   }
   @Override
   public String getText(){
      return original;
   }
} 
```

这是一种方法。

# java - 在 flashcs6 adobe air 中关闭安卓相机

> ID：16186198
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:05.717
> 
> 标签：java, android, actionscript-3, air, flash-cs6

**嗨，大家好**

我需要在 adobe air 3 在 flash cs6 中创建的 android 应用程序中关闭相机。

我使用此代码关闭相机：

**`videoDetect.attachCamera(null); videoCapture.attachCamera(null);`**

但是在我的设备中运行时，错误：

```
 An error has occurred in sub: settingm_camera1_ready
    (java line: 464)
    java.lang.IllegalStateException:The specified child already has a parent.you must call removeView() on the child s parent first. 
```

请帮忙。

坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:52:53.350

尝试以下操作：

```
video.attachCamera(null);
video.clear();
removeChild(_video);
camera = null; 
```

# android - facebook 开放图帖 sotry

> ID：16186201
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:22.243
> 
> 标签：android, facebook-graph-api

![图 1](https://i.stack.imgur.com/CXkNu.png) 我正在尝试使用 Facebook 开放图在第三张图片中实现这一目标。我已经完成了第一张图片中的第一行。但不知道如何与第二张图片中的朋友发布。如果有人知道的话。帮助我。

![图 2](https://i.stack.imgur.com/g6Tz2.png)

![图 3](https://i.stack.imgur.com/5X4rO.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:01:42.997

我相信这是 Facebook 的一项功能。如果它观察到许多人在做同样的动作，它会将他们结合起来。例如*Mr A 和其他 10 人分享了链接。*

因此，如果您在第一步中取得成功，其余的将由 Facebook 完成。

# asp.net - 模态弹出窗口未在 asp.net 中显示更新面板

> ID：16186202
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:23.983
> 
> 标签：asp.net, updatepanel, modalpopupextender

这是我的 aspx 页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="TotalFee.aspx.cs" Inherits="TotalFee" %>
<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <script type="text/javascript">
//        function ok(sender, e) {
//            alert("Hello");
//            __doPostBack('btnCreateBill','btnCreateBill_Click');
//        }
//        function cancel(sender, e) {
//            $find('ModalPopupExtender1').hide();
//        }
//    

    </script>
    <style type="text/css">
        .style2
        {
            font-size: x-large;
            font-family: "Times New Roman", Times, serif;
        }
        .style3
        {
            color: #FF0000;
        }
       .panel 
{
    position:static;
    top: 80%;
    left:50%;
     background-color:Aqua;

}
.modalBackground
    {

     z-index:auto;
    }
        </style>

</asp:Content>
<asp:Content ID="Content2" runat="server" contentplaceholderid="MainContent">
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

    <table style="width:100%">
   <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="Classlabel" runat="server" Text="Class" CssClass="style2"></asp:Label>

   </td>
   <td valign="top" align="center">
       <asp:DropDownList ID="ClassDropDownList" runat="server" Width="150px" 
           DataSourceID="SqlDataSource1" DataTextField="ClassName" 
           DataValueField="ClassName" AutoPostBack="True" 
           onselectedindexchanged="ClassDropDownList_SelectedIndexChanged">
       </asp:DropDownList>

       <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
           ConnectionString="<%$ ConnectionStrings:dbbilling2.0ConnectionString4 %>" 
           SelectCommand="SELECT [ClassName] FROM [tblClass]"></asp:SqlDataSource>

       <br />

   <br />
   </td>

   </tr>

   <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="StudentNamelabel" runat="server" Text="StudentName" CssClass="style2"></asp:Label>

   </td>
   <td valign="top" align="center">
       <asp:DropDownList ID="StudentNameDropDownList" runat="server" Width="150px" 
           DataSourceID="SqlDataSource2" DataTextField="StudentName" 
           DataValueField="StudentID" AutoPostBack="True">
       </asp:DropDownList>
       <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
           ConnectionString="<%$ ConnectionStrings:dbbilling2.0ConnectionString3 %>" 

           SelectCommand="SELECT [StudentID], [StudentName] FROM [tblStudentInfo] WHERE ([Class] = @Class)">
           <SelectParameters>
               <asp:ControlParameter ControlID="ClassDropDownList" Name="Class" 
                   PropertyName="SelectedValue" Type="String" />
           </SelectParameters>
       </asp:SqlDataSource>
       <br />
   <br />
   </td>
   </tr>
  <tr>
  <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="Monthlabel" runat="server" Text="Month" CssClass="style2"></asp:Label>
       <br />
       <br />
       <br />
       <br />
       <br />

   </td>

  <td valign="top" align="center">
       &nbsp;&nbsp;&nbsp;
       <asp:DropDownList ID="MonthDropDownList" runat="server" Width="150px" 
           DataSourceID="SqlDataSource3" DataTextField="Month" AutoPostBack="true"
           DataValueField="Month" OnDataBound="MonthDropDownListDataBound"
           onselectedindexchanged="MonthDropDownList_SelectedIndexChanged1">    
       </asp:DropDownList>

       <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
           ConnectionString="<%$ ConnectionStrings:dbbilling2.0ConnectionString2 %>" 
           SelectCommand="SELECT [Month] FROM [tblMonth]"></asp:SqlDataSource>
       <br />
  <br />
    </td>
    </tr>
    <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="MonthlyFeelabel" runat="server" Text="Monthly Fee" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       &nbsp;&nbsp;
       <asp:TextBox ID="txtMonthlyFee" runat="server" Width="150px"></asp:TextBox>
       <asp:RequiredFieldValidator ID="MonthlyFeeValidator" runat="server" 
           ControlToValidate="txtMonthlyFee" CssClass="style3">*</asp:RequiredFieldValidator>
       <br />
       <br />
   <br />
   </td>
    </tr>
   <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="TransportFeelabel" runat="server" Text="Transport Fee" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       &nbsp;&nbsp;
       <asp:TextBox ID="txtTransportFee" runat="server" Width="150px"></asp:TextBox>
       <asp:RequiredFieldValidator ID="TransportationFeeValidator" runat="server" 
           ControlToValidate="txtTransportFee" CssClass="style3">*</asp:RequiredFieldValidator>
       <br />
       <br />
   <br />
   </td>
    </tr>
     <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="Hostelfeelabel" runat="server" Text="Hostel Fee" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       &nbsp;
       <asp:TextBox ID="txtHostelFee" runat="server" Width="150px"></asp:TextBox>
       <asp:RequiredFieldValidator ID="HostelFeeValidator" runat="server" 
           ControlToValidate="txtHostelFee" CssClass="style3">*</asp:RequiredFieldValidator>
       <br />
       <br />
   <br />
   </td>
    </tr>
      <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="ECAFeeLabel" runat="server" Text="ECA Fee" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       &nbsp;
       <asp:TextBox ID="txtECAFee" runat="server" Width="150px"></asp:TextBox>
       <asp:RequiredFieldValidator ID="ECAFeeValidator" runat="server" 
           ControlToValidate="txtECAFee" CssClass="style3">*</asp:RequiredFieldValidator>
       <br />
       <br />
   <br />
   </td>
    </tr>
      <tr>
   <td style="width:300px; vertical-align:top;" align="left" >
       <asp:Label ID="DueFromPreviousMonthLabel" runat="server" 
           Text="Due From Previous Month" CssClass="style2"></asp:Label>
        <br />
        </td>
   <td valign="top" align="center">
      <asp:TextBox ID="txtDueFromPreviousMonth" runat="server" Width="150px" Text="0"></asp:TextBox>
       <asp:RequiredFieldValidator ID="DueFromPreviousMonthValidator" runat="server" 
           ControlToValidate="txtECAFee" CssClass="style3">*</asp:RequiredFieldValidator>
       <br />
       <br />
   <br />
      </td>
    </tr>
     <tr>
   <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="TotalFeeLabel" runat="server" Text="Total Fee" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       <asp:TextBox ID="txtTotalFee" runat="server" Width="150px" ReadOnly="true"></asp:TextBox>
       <br />
       <br />
   <br />
   </td>
    </tr>
     <tr>
     <td style="width:150px; vertical-align:top;" align="left" >
       <asp:Label ID="PaidLabel" runat="server" Text="Paid" CssClass="style2"></asp:Label>
   </td>
   <td valign="top" align="center">
       <asp:CheckBox ID="ChkPaidLabel" runat="server" />
       <br />
       <br />
   <br />
   </td>
   </tr>
     <tr>
   <td style="width:150px; vertical-align:top;" align="left" >

      </td>
   <td valign="top" align="right">
       <asp:Button ID="btnSubmit" runat="server" Text="Submit" Width="150px"
           onclick="btnSubmit_Click" />
       <asp:Button ID="btnReset" runat="server" Text="Reset" Width="150px" />
       <asp:Button ID="btnCreateBill" runat="server" Text="CreateBill" Width="150px"
         OnClick="btnCreateBill_Click"/>

       <%--<asp:PopupControlExtender ID="btnCreateBill_PopupControlExtender" OffsetX="-1100" OffsetY="115" 
           runat="server" DynamicServicePath="" Enabled="True" ExtenderControlID=""  
           TargetControlID="btnCreateBill"  PopupControlID="UpdatePanel1">
       </asp:PopupControlExtender>--%>

   </td>
    </tr>
     <tr>
   <td style="width:150px; vertical-align:top;" align="left" colspan="2" > 
   <asp:UpdatePanel ID="UpdatePanel1" runat="server">   
 <ContentTemplate>    
 <asp:ModalPopupExtender ID="ModalPopUpExtender1" runat="server" PopupControlID="UpdatePanel1"
    TargetControlID="UpdatePanel1" DropShadow="false" BackgroundCssClass="modalBackground"></asp:ModalPopupExtender>   
 <rsweb:ReportViewer ID="ReportingForPrintingReportViewer" runat="server" Visible="false" CssClass="panel"
   Width="100%" Height="100%" Font-Names="Verdana" Font-Size="8pt"
   InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana"
   WaitMessageFont-Size="14pt">  
   <LocalReport ReportPath="Report.rdlc">
   <DataSources>
   <rsweb:ReportDataSource DataSourceId="ObjectDataSource2" Name="DataSet1" />
   </DataSources>
   </LocalReport>
   </rsweb:ReportViewer>  
   <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
     SelectMethod="GetData" TypeName="DataSet1TableAdapters.tblTotalFeeTableAdapter">
   </asp:ObjectDataSource>
   </ContentTemplate>
        </asp:UpdatePanel>

         </td>

    </tr>
     </table>
        </asp:Content> 
```

这是我的cs页面：

```
protected void btnCreateBill_Click(object sender, EventArgs e)
    {
        ModalPopUpExtender1.Show();
        DisplayReport();

    } 
```

为什么单击**btnCreateBill时不显示****UpdatePanel1**？当我单击**btnCreateBill**时，我想将**UpdatePanel1**显示为弹出窗口 当我将它放在我的内部时，它给出了错误扩展器不能与它扩展的控件位于不同的 UpdatePanel 中。******`modal pop up extender``updatepanel1`******

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:53:30.613

因为它在更新面板之外，所以将它带入更新面板以使其出现。在更新面板中触发事件时，您无法访问和更改更新面板之外的控件状态。

**在更新面板中触发事件时，只能访问和修改更新面板中的控件。**

```
<td style="width:150px; vertical-align:top;" align="left" colspan="2" > 
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">   
 <ContentTemplate>  
 <asp:ModalPopupExtender ID="ModalPopUpExtender1" runat="server" PopupControlID="UpdatePanel1" TargetControlID="UpdatePanel1" DropShadow="false" BackgroundCssClass="modalBackground"></asp:ModalPopupExtender>     
 <rsweb:ReportViewer ID="ReportingForPrintingReportViewer" runat="server" Visible="false" CssClass="panel"
   Width="100%" Height="100%" Font-Names="Verdana" Font-Size="8pt"
   InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana"
   WaitMessageFont-Size="14pt">  
   <LocalReport ReportPath="Report.rdlc">
   <DataSources>
   <rsweb:ReportDataSource DataSourceId="ObjectDataSource2" Name="DataSet1" />
   </DataSources>
   </LocalReport>
   </rsweb:ReportViewer>  
   <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
     SelectMethod="GetData" TypeName="DataSet1TableAdapters.tblTotalFeeTableAdapter">
   </asp:ObjectDataSource>
   </ContentTemplate>
 </asp:UpdatePanel>        
 </td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T04:15:38.967

而不是在 modalpopup 面板上使用 updatepanel ，您可以尝试从后面的代码中进行某些操作来达到目的。

```
 <asp:scriptmanager id="ScriptManager1" runat="server">
                </asp:scriptmanager>

                 <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" BackgroundCssClass="modalBackground"
                CancelControlID="btnCancel" PopupControlID="Panel1" 
                TargetControlID="HiddenField1">
                </asp:ModalPopupExtender>

            <asp:Panel ID="Panel1" runat="server" CssClass="Panel">

            <asp:RadioButtonList ID="RadioButtonList1" runat="server" Height="34px" RepeatDirection="Horizontal"
                                                Width="129px" OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged"
                                                AutoPostBack="True">
                                                <asp:ListItem>Option1</asp:ListItem>
                                                <asp:ListItem>Option2</asp:ListItem>
                                            </asp:RadioButtonList>

        <asp:TextBox ID="txt1" runat="server" 
                                            Visible="False"></asp:TextBox>
                                        <asp:TextBox ID="txt2" runat="server"
                                            Visible="False"></asp:TextBox>    

             </asp:Panel>
===========================================    
    Code Behind:
===========================================

     protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (RadioButtonList1.SelectedIndex == 0)
            {
                txt1.Visible = true;
                ModalPopupExtender1.Show();

            }
            else
            {
                txt2.Visible = true;
                ModalPopupExtender1.Show();
            }
        } 
```******

# html - 对齐文本框和按钮

> ID：16186205
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:36.237
> 
> 标签：html

我在弹出框中有两个文本框和一个按钮。我想在两个文本框下方制作按钮，其中在我的代码中没有发生。**请帮助** HTML 代码 :::

```
<form method="post" action="index.html">
            <p><input type="text" name="login" value="" placeholder="Username or Email"></p>
            <p><input type="password" name="password" value="" placeholder="Password"></p>
        <p class="remember_me">
            <label>
                <input type="checkbox" name="remember_me" id="remember_me">
                    Remember me on this computer
            </label>
        </p>
        <p class="submit"><input type="submit" name="commit" value="Logine" class="marginleft5"></p>
            <!-- <div class="login-help">
                <p>Forgot your password? <a href="#.html">Click here to reset it</a>.</p>
            </div>  -->    
 </form> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T07:44:03.030

为线条使用`<div>`标签，或以其他方式用于`<br/>`换行

# django - Dojango 与 django 1.5

> ID：16186208
> 
> 赞同：1
> 
> 时间：2013-04-24T07:40:40.870
> 
> 标签：django, json

我是一个 django 菜鸟。我刚刚在项目应用程序中添加了 dojango 0.5.5。我使用 Django 1.5，当我尝试在 mysite/dojango/test/ 上查看 dojango 提供的测试页面时，我收到了这个错误：

```
__init__() got an unexpected keyword argument 'namedtuple_as_object' 
```

错误出现在 dojango 基本模板文件中，其中有：

```
'isDebug':{{ DOJANGO.DEBUG|json }}, 
```

有人遇到过这个问题吗？你如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:52:44.197

我发现了一个[类似的问题](https://github.com/brack3t/django-braces/pull/25)。尝试去找

```
from django.utils import simplejson as json 
```

并将其替换为

```
try:
    import json
except ImportError:
   from django.utils import simplejson as json 
```

# r - txt 文件在 R 包 tm 中生成 NA（文本挖掘）

> ID：16186210
> 
> 赞同：1
> 
> 时间：2013-04-24T07:40:41.933
> 
> 标签：r, text, na, mining, tm

我想阅读一个 txt 文件并做一些文本挖掘方法。当我在 R 中使用 tm 包时，我收到了很多错误消息。例如，如果我想关联最常见的词，我只会得到 NA。这是我到目前为止使用的代码：

```
library(tm)

doc <- c("word1 word1 word2 word1 word2 word3 word1 word2 word3 word4 word1 word2 word3 word4 word5")

Corpus <- Corpus(VectorSource(doc))
Corpus <- tm_map(Corpus, stripWhitespace)
Corpus <- tm_map(Corpus, tolower)
Corpus <- tm_map(Corpus, removeWords, stopwords("english"))
Corpus <- tm_map(Corpus, removePunctuation)

tdm <- TermDocumentMatrix(Corpus)

#Plotting correlation of Terms
plot(tdm, terms = findFreqTerms(tdm, lowfreq = 2, Inf)[1:3], CorThreshold = 0.1) 
```

之后，我收到以下错误消息：

```
Error in if (all(from == t(from))) "undirected" else "directed":
missing value where TRUE/FALSE needed 
```

好的调查，我使用了以下代码，这是 findAssocs() 的逐步方法：

```
terms <- findFreqTerms(tdm, lowfreq = 2)[1:3]
m <- as.matrix(t(tdm[terms,]))
m
cor(m) 
```

但是，我得到以下输出：

```
 word1 word2 word3
    word1    NA    NA    NA
    word2    NA    NA    NA
    word3    NA    NA    NA 
```

从我的角度来看，文本有问题，但我对这种奇怪的行为没有任何解释。我的问题是，如果有人有解决这个问题的办法。我的 R (2.15.2) 在 Mac 系统 (x86_64-apple-darwin9.8.0/x86_64 (64-bit)) 上运行。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:51:54.287

对于相关性分析函数`cor()`，您得到了 NA 值的矩阵，因为您对每个变量只有一个观察值 - 如果变量只有一个观察值，则无法进行相关性。

您可以通过查看矩阵 m 来检查它

```
> m
    Terms
Docs word1 word2 word3
   1     5     4     3 
```

# sql - postgres：具有无类型返回值的函数

> ID：16186211
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:43.463
> 
> 标签：sql, postgresql, dynamic-sql, stored-functions

我正在寻找一种方法来定义允许返回无类型行值的 postgres 函数。为了论证起见，我们假设存在以下表格：

```
create table foo(
  id serial primary key,
  value1 varchar(255),
  value2 int,
  value3 datetime,
  value4 boolean
); 
```

我们还有一个函数允许我们返回某些列的结果（这是一个相当人为的示例，但实际上，很多连接发生在内部，我想通过仅使用相关列来最小化）：

```
create or replace function foo_func(col1 text, col2 text) returns 
  table(?, ?) as 
$$
declare 
sql text;
begin
  sql := 'select ' || col1 || ', ' || col2 || ' from foo'
  return execute sql;
end
$$ language plpgsql; 
```

由于列值取决于选定的列参数，因此无法预先定义返回表。有没有办法在不指定它们的值的情况下返回行？我已经考虑返回一个游标，但我不确定这是否是最好的选择。

（可以定义postgresql版本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:42:51.493

您需要返回`setof record`（[ref](http://wiki.postgresql.org/wiki/Return_more_than_one_row_of_data_from_PL/pgSQL_functions)）。

```
create or replace function foo_func(col1 text, col2 text) returns 
  setof record as 
$$
declare 
sql text;
r record;
begin
  sql := 'select ' || col1 || ', ' || col2 || ' from foo';
  for r in execute sql
  loop
    return next r;
  end loop;
  return;
end
$$ language plpgsql; 
```

问题是您必须在函数之外声明列类型：

```
SELECT * from foo_func('value1','value2') as (a varchar(255),b int); 
```

如果声明不匹配，您将收到错误：[http ://sqlfiddle.com/#!12/ce8b0/3](http://sqlfiddle.com/#!12/ce8b0/3)

# android - 如何在android的自定义列表视图中禁用和启用单选按钮

> ID：16186213
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:50.073
> 
> 标签：android, android-listview

![在此处输入图像描述][1]我已经自定义`ListView`了`RadioButton`&`Text`每行。我如何禁用和启用（即）`RadioButton`中的点击。我如何通过 ENABLE 和 DISABLE点击来禁用和启用选择 s。下面是我的代码。我怎么能这样做？`ListView`
`ListView` `RadioButton``Button`

```
ListView LSOne;
        Button lock, unlock;
        int[] _intRadio = new int[20];
        String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",
                        "Jupiter", "Saturn", "Uranus", "Neptune" };

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
                LSOne = (ListView) findViewById(R.id.listView1);
                lock = (Button) findViewById(R.id.lock);
                unlock = (Button) findViewById(R.id.unlock);
                lock.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View arg0) {
                            **LsAdapter.isEnabled = !LsAdapter.isEnabled;
            int first = LSOne.getFirstVisiblePosition();
            for (int i = first; LSOne.getChildAt(i) != null; i++) {
                RadioButton button = ((RadioButton) LSOne.getChildAt(i)
                        .findViewById(R.id.radioButton1));
                button.setEnabled(LsAdapter.isEnabled);**

                        }
                });

                unlock.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View arg0) {
                                //need to do enable option

                        }
                });

                ArrayList<String> planetList = new ArrayList<String>();
                planetList.addAll(Arrays.asList(planets));

                // Create ArrayAdapter using the planet list.
                LsAdapter listAdapter = new LsAdapter(this, R.layout.country_info,
                                planetList);

                LSOne.setAdapter(listAdapter);

        }

        public class LsAdapter extends ArrayAdapter<String> {
                private LayoutInflater mInflater;
                private String[] mTaxi = null;
                private String[] mid = null;
                long id;
                **public boolean isEnabled;**
                private int mViewResourceId;

                public LsAdapter(Context ctx, int viewResourceId,
                                ArrayList<String> planetList) {
                        super(ctx, viewResourceId);

                        mInflater = (LayoutInflater) ctx
                                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                        String[] tax = planetList.toArray(new String[planetList.size()]);

                        mTaxi = tax;

                        mViewResourceId = viewResourceId;
                }

                @Override
                public int getCount() {
                        return mTaxi.length;
                }

                @Override
                public String getItem(int position) {
                        return mTaxi[position];
                }

                @Override
                public long getItemId(int position) {
                        return 0;
                }

                @Override
                public int getViewTypeCount() {
                        // TODO Auto-generated method stub
                        return 20;
                }

                @Override
                public int getItemViewType(int position) {
                        // TODO Auto-generated method stub
                        return position;
                }

                @Override
                public View getView(int position, View convertView, ViewGroup parent) {
                        ViewHolder holder = null;
                        Log.v("ConvertView", String.valueOf(position));
                        int _intPosition = getItemViewType(position);
                        if (convertView == null) {
                                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                                convertView = vi.inflate(R.layout.country_info, null);
                                holder = new ViewHolder();
                                holder.code = (TextView) convertView
                                                .findViewById(R.id.textView1);
                                holder.name = (RadioButton) convertView
                                                .findViewById(R.id.radioButton1);
                                convertView.setTag(holder);

                                holder.code.setText(mTaxi[position]);
                                holder.name.setId(_intPosition);
                        **if (isEnabled) {
                holder.name.setEnabled(true);
            } else if (!isEnabled) {
                holder.name.setEnabled(false);
            }**

                                holder.name.setOnClickListener(new View.OnClickListener() {
                                        public void onClick(View v) {
                                                for (int i = 0; i < _intRadio.length; i++) {
                                                        if (i == v.getId()) {
                                                                _intRadio[i] = 1;
                                                        } else {
                                                                _intRadio[i] = 0;
                                                        }
                                                }
                                                notifyDataSetChanged();
                                        }
                                });
                        } else {
                                holder = (ViewHolder) convertView.getTag();
                        }

                        if (_intRadio[_intPosition] == 1) {
                                holder.name.setChecked(true);
                        } else {
                                holder.name.setChecked(false);
                        }

                        return convertView;

                }

                private class ViewHolder {
                        TextView code;
                        RadioButton name;
                        Button btn;
                }
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:43:34.220

您不必编写两个不同的锁定/解锁实现。您可以在 LsAdapter 中创建一个公共布尔变量，以便 LSOne 可以切换它：

```
public class LsAdapter extends ArrayAdapter<String> {
    ...
    public boolean isEnabled;

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    ...
    if(isEnabled)
    //enable or disable the radio button here

} 
```

然后，像这样创建一个 onClickListener：

```
lock = (Button) findViewById(R.id.lock);
lock.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        LsAdapter.isEnabled = !LsAdapter.isEnabled;
        int first = LSOne.getFirstVisiblePostition();
        for(int i=first; LSOne.getChildAt(i)!=null; i++) {
            RadioButton button = ((RadioButton) LSOne.getChildAt(i).findViewById(your_radio_button_id));
            button.setEnabled(LsAdapter.isEnabled);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:54:29.800

```
btn.setEnabled(false); //to disable

btn.setEnabled(true); //to enable 
```

有时它不会停止某些设备上的多点/快速点击，因此替代选项是

```
btn.setClickable(false); //to disable

btn.setClickable(true); //to enable 
```

# .htaccess - 如何在codeigniter中重定向一个url，这样它就会省略一个子文件夹？

> ID：16186217
> 
> 赞同：0
> 
> 时间：2013-04-24T07:40:57.877
> 
> 标签：.htaccess, codeigniter

我想重定向`www.mydomain.com/sub_folder/controller`到 `www.mydomain.com/controller`.

我已经在 安装了 CodeIgniter `www.mydomain.com/sub_folder/`，并且我`.htaccess`在根目录的文件中使用了以下代码：

```
RewriteRule ^/sub_folder/controller/?$ ^/controller/?$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:08:45.973

RewriteRule 与前导斜杠不匹配，因此请尝试以下操作：

```
RewriteRule ^sub_folder/(controller)/?$ /$1/ [L,NC] 
```

# jquery - 验证失败时如何将文本框边框颜色设置为红色

> ID：16186219
> 
> 赞同：11
> 
> 时间：2013-04-24T07:40:58.480
> 
> 标签：jquery, asp.net, asp.net-mvc-4, asp.net-mvc-3-areas

当 .net mvc 4 中的验证失败时，我的任务是为文本框设置红色边框。

BExtensionMethods.cs

```
 public static string GetTextBoxColor(this ModelStateDictionary ModelState)
    {
        string textBoxColor = string.Empty;
        int count = 1;
        var errorKeys = (from item in ModelState
                         where item.Value.Errors.Any()
                         select item.Key).ToList();
        foreach (var item in errorKeys)
        {
            textBoxColor += string.Format("{0}.{1}</br>", count, item);
            count++;
        }
        return textBoxColor;
    } 
```

这里的 json 对象包含值。如何过滤它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-09-04T13:43:18.450

```
if ($('#TextBoxID').val() == '') {
    $('#TextBoxID').css('border-color', 'red');
}
else {
    $('#TextBoxID').css('border-color', '');
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-24T07:54:35.807

你需要像这样创建一个css类：

```
.errorClass { border:  1px solid red; } 
```

并使用 jQuery 将其添加到您的文本框中：

```
$("#myTextBox").addClass('errorClass'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-26T05:53:00.797

只需将以下代码复制到您的项目中，您就会知道，我在这里使用的是纯引导程序和 jquery。

```
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>

<style type="text/css">
/**
 * Override feedback icon position
 * See http://formvalidation.io/examples/adjusting-feedback-icon-position/
 */
#eventForm .dateContainer .form-control-feedback {
    top: 0;
    right: -15px;
}
</style>

<form id="eventForm" method="post" class="form-horizontal">
    <div class="form-group">
        <label class="col-xs-3 control-label">Event</label>
        <div class="col-xs-5">
            <input type="text" class="form-control" name="name" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-xs-3 control-label">Start date</label>
        <div class="col-xs-5 dateContainer">
            <div class="input-group input-append date" id="startDatePicker">
                <input type="text" class="form-control" name="startDate" />
                <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-xs-3 control-label">End date</label>
        <div class="col-xs-5 dateContainer">
            <div class="input-group input-append date" id="endDatePicker">
                <input type="text" class="form-control" name="endDate" />
                <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-5 col-xs-offset-3">
            <button type="submit" class="btn btn-default">Validate</button>
        </div>
    </div>
</form>

<script>
$(document).ready(function() {
    $('#startDatePicker')
        .datepicker({
            format: 'mm/dd/yyyy'
        })
        .on('changeDate', function(e) {
            // Revalidate the start date field
            $('#eventForm').formValidation('revalidateField', 'startDate');
        });

    $('#endDatePicker')
        .datepicker({
            format: 'mm/dd/yyyy'
        })
        .on('changeDate', function(e) {
            $('#eventForm').formValidation('revalidateField', 'endDate');
        });

    $('#eventForm')
        .formValidation({
            framework: 'bootstrap',
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                name: {
                    validators: {
                        notEmpty: {
                            message: 'The name is required'
                        }
                    }
                },
                startDate: {
                    validators: {
                        notEmpty: {
                            message: 'The start date is required'
                        },
                        date: {
                            format: 'MM/DD/YYYY',
                            max: 'endDate',
                            message: 'The start date is not a valid'
                        }
                    }
                },
                endDate: {
                    validators: {
                        notEmpty: {
                            message: 'The end date is required'
                        },
                        date: {
                            format: 'MM/DD/YYYY',
                            min: 'startDate',
                            message: 'The end date is not a valid'
                        }
                    }
                }
            }
        })
        .on('success.field.fv', function(e, data) {
            if (data.field === 'startDate' && !data.fv.isValidField('endDate')) {
                // We need to revalidate the end date
                data.fv.revalidateField('endDate');
            }

            if (data.field === 'endDate' && !data.fv.isValidField('startDate')) {
                // We need to revalidate the start date
                data.fv.revalidateField('startDate');
            }
        });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:02:27.813

如果您只有一个文本框并且您知道 id，您可以使用@PanzerKadaver 解决方案。否则，我建议在 json 中返回它自己要设为红色的文本框的 id。然后循环遍历它并在客户端添加错误类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T08:13:56.513

`result.renewableEnergy`会给你你需要的价值。的任何其他属性`objRenewableEnergy`都可以通过`result.renewableEnergy.property`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-24T14:26:49.590

```
public static List<string> GetTextBoxColor(this ModelStateDictionary ModelState)
    {
        string textBoxColor = string.Empty;
        int count = 1;
        List<string> list = new List<string>();
        var errorKeys = (from item in ModelState
                         where item.Value.Errors.Any()
                         select item.Key.Substring(item.Key.LastIndexOf('.')).Trim('.')).ToList();
        foreach (var item in errorKeys)
        {
            textBoxColor += string.Format("{0}.{1}</br>", count, item);
            list.Add(item);
            count++;
        }
        return list;

    } 
```

# .net - 从 AJAX 帖子调用的 MVC 操作中未本地化十进制

> ID：16186223
> 
> 赞同：0
> 
> 时间：2013-04-24T07:41:06.593
> 
> 标签：.net, ajax, json, binding

我有一个从德语本地化 UI 到德语本地化 Web API 操作的 AJAX 帖子。发布的对象是一个包含小数的复杂 JSON。这些值是使用德语语言环境插入的（例如，1 的一半是 0,5），并且 JSON 对象部分是从元素值创建的。

该请求被 ARR 从 MVC 项目路由到 Web API 项目。

动作中的绑定由框架完成，过程中没有任何干扰。当值包含逗号时，对象的有界十进制字段为 0，当值包含点时，对象的十进制值为正确的十进制值（这在正常流程中不会发生）。

我的假设是 JSON 到 .NET 的绑定应该关心语言环境，但显然这并没有发生。问题是：我的假设是否正确？如果是，错误绑定的可能原因是什么？

谢谢你，摩苏。

我通过在客户端格式化解决了这个问题。但我仍然对问题的答案很感兴趣！

# python - 想要在另一列中打印每封电子邮件的 maxm 条目

> ID：16186224
> 
> 赞同：1
> 
> 时间：2013-04-24T07:41:14.130
> 
> 标签：python, shell, csv, large-files

我有一个大约 2 GB 的巨大文件，有超过 2000 万行

我想要的是

输入文件将是这样的

```
07.SHEKHAR@GMAIL.COM,1
07SHIBAJI@GMAIL.COM,1
07.SHINDE@GMAIL.COM,1
07.SHINDE@GMAIL.COM,2
07.SHINDE@GMAIL.COM,3
07.SHINDE@GMAIL.COM,4
07.SHINDE@GMAIL.COM,5
07.SHINDE@GMAIL.COM,6
07.SHINDE@GMAIL.COM,7
07.SHOBHIT@GMAIL.COM,1
07SKERCH@RUSKIN.AC.UK,1
07SONIA@GMAIL.COM,1
07SONIA@GMAIL.COM,2
07SONIA@GMAIL.COM,3
07SRAM@GMAIL.COM,1
07SRAM@GMAIL.COM,2
07.SUMANTA@GMAIL.COM,1
07SUPRIYO@GMAIL.COM,1
07SUPRIYO@GMAIL.COM,2
07SUPRIYO@GMAIL.COM,3
07.SUSHMA@GMAIL.COM,1
07.SWETA@GMAIL.COM,1
07.SWETA@GMAIL.COM,2
07.SWETA@GMAIL.COM,3
07.TEENA@GMAIL.COM,1
07.TEENA@GMAIL.COM,2
07.UDAY@GMAIL.COM,1
07.UMESH@GMAIL.COM,1
07VAISHALISINGH@GMAIL.COM,1
07.VISHAL@GMAIL.COM,1,1
07.VISHAL@GMAIL.COM,2
07.VISHAL@GMAIL.COM,3
07.VISHAL@GMAIL.COM,4
07.VISHAL@GMAIL.COM,5
07.VISHAL@GMAIL.COM,6
07.VISHAL@GMAIL.COM,7
07.YASH@GMAIL.COM,1
07.YASH@GMAIL.COM,2
07.YASH@GMAIL.COM,3
07.YASH@GMAIL.COM,4 
```

需要的输出文件：-

```
07.SHEKHAR@GMAIL.COM,1,1
07SHIBAJI@GMAIL.COM,1,1
07.SHINDE@GMAIL.COM,1,7
07.SHINDE@GMAIL.COM,2,7
07.SHINDE@GMAIL.COM,3,7
07.SHINDE@GMAIL.COM,4,7
07.SHINDE@GMAIL.COM,5,7
07.SHINDE@GMAIL.COM,6,7
07.SHINDE@GMAIL.COM,7,7
07.SHOBHIT@GMAIL.COM,1,1
07SKERCH@RUSKIN.AC.UK,1,1
07SONIA@GMAIL.COM,1,3
07SONIA@GMAIL.COM,2,3
07SONIA@GMAIL.COM,3,3
07SRAM@GMAIL.COM,1,2
07SRAM@GMAIL.COM,2,2
07.SUMANTA@GMAIL.COM,1,1
07SUPRIYO@GMAIL.COM,1,3
07SUPRIYO@GMAIL.COM,2,3
07SUPRIYO@GMAIL.COM,3,3
07.SUSHMA@GMAIL.COM,1,1
07.SWETA@GMAIL.COM,1,3
07.SWETA@GMAIL.COM,2,3
07.SWETA@GMAIL.COM,3,3
07.TEENA@GMAIL.COM,1,2
07.TEENA@GMAIL.COM,2,2
07.UDAY@GMAIL.COM,1,1
07.UMESH@GMAIL.COM,1,1
07VAISHALISINGH@GMAIL.COM,1,1
07.VISHAL@GMAIL.COM,1,7
07.VISHAL@GMAIL.COM,2,7
07.VISHAL@GMAIL.COM,3,7
07.VISHAL@GMAIL.COM,4,7
07.VISHAL@GMAIL.COM,5,7
07.VISHAL@GMAIL.COM,6,7
07.VISHAL@GMAIL.COM,7,7
07.YASH@GMAIL.COM,1,4
07.YASH@GMAIL.COM,2,4
07.YASH@GMAIL.COM,3,4
07.YASH@GMAIL.COM,4,4 
```

即，每列中包含与特定电子邮件对应的最大条目数的 1 列，因此现在每一行都包含每封电子邮件的最大出现次数。我正在为这样一个大文件寻找一个可行的解决方案，最好是在 python 或 shell 脚本中，O(n) 或 O(nlogn) O(n**2) 的复杂性在这种情况下不会做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:40:24.740

让我们尝试一个 python 脚本，因为您可能更熟悉该语言，不需要巨大的内存或硬盘空间。在 Python 2.7 和 3.2 上测试

```
#!/usr/bin/python
email = "" # Initialize the email
count = 0  # and counter
import fileinput

for line in fileinput.input("word.txt"): # Interator: process a line at a time
  myArr = line.split(",")
  if (email != myArr[0]): # New email; print and reset count, email
    for n in range(0,count):
      print email + "," + str(n+1) + "," + str(count)
    email = myArr[0]
    count = 1  
  else: # Same email, increment count
    count = count + 1

# Print the final email
for n in range(0,count):
  print email + "," + str(n+1) + "," + str(count) 
```

有人想尝试`awk`脚本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:15:49.827

我了解您希望第三列包含每封邮件第二列的最大值。

在这种情况下，我将使用映射来存储为每封邮件找到的最大第二列值：

伪代码：

1.  创建一个空映射，其中邮件字符串是键集 -> M
2.  对于输入文件的每一行 (l)：
    1.  if (l.mail not in M) OR (l.mail in M AND l.secondColumn > M[l.mail].secondColumn) 然后：l.thirdColumn = l.secondColunn AND M[l.mail] = l;
3.  创建一个新文件-> fOut
4.  遍历映射条目（对于每个映射条目）：
    1.  将 M[entry] 附加到 fOut。

# asp.net - font-face 在本地不起作用

> ID：16186229
> 
> 赞同：1
> 
> 时间：2013-04-24T07:41:24.923
> 
> 标签：asp.net, html, css, font-face

我已经使用`@font-face`了一段时间，在线查看我的文件时没有任何问题。但`@font-face`从未在本地工作过。

我不明白为什么我不能`@font-face`在本地工作。我正在为我的开发人员使用 Visual Studio 2012 Ultimate。

CSS：

```
/* Include Fonts */
@font-face {
    font-family: 'SansationRegular';
    src: url('/Shared/Assets/Fonts/Sansation_Regular-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Regular-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Regular-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Regular-webfont.svg#SansationRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationLight';
    src: url('/Shared/Assets/Fonts/Sansation_Light-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Light-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Light-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Light-webfont.svg#SansationLight') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationBold';
    src: url('/Shared/Assets/Fonts/Sansation_Bold-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Bold-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Bold-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Bold-webfont.svg#SansationBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationLightLightItalic';
    src: url('/Shared/Assets/Fonts/Sansation_Light_Italic-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Light_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Light_Italic-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Light_Italic-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Light_Italic-webfont.svg#SansationLightLightItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationItalic';
    src: url('/Shared/Assets/Fonts/Sansation_Italic-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Italic-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Italic-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Italic-webfont.svg#SansationItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationBoldItalic';
    src: url('/Shared/Assets/Fonts/Sansation_Bold_Italic-webfont.eot');
    src: url('/Shared/Assets/Fonts/Sansation_Bold_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Shared/Assets/Fonts/Sansation_Bold_Italic-webfont.woff') format('woff'),
         url('/Shared/Assets/Fonts/Sansation_Bold_Italic-webfont.ttf') format('truetype'),
         url('/Shared/Assets/Fonts/Sansation_Bold_Italic-webfont.svg#SansationBoldItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

/* Set Fonts */
a, p, li, text, label, input, submit, textarea/* DEPRECATED:, #PositionPayRange*/ {
    font-family: 'SansationLight';
}

h1, h2, h3, h4, h5, h6, .PositionPayRange {
    font-family: 'SansationBold';
}

/* Font sizing */
a, p, li, label {
    font-size: small;

}

/* Set Font Colors */
a, p, li, text, label, input {
    color: #111111;
}

h1, h2, h3, h4, h5, h6 {
    color: #444444;
} 
```

有人可以解释为什么它在服务器上工作得很好，但*在本地*却不行吗？

我使用哪个浏览器或哪个版本的浏览器都没有关系。结果相同。

编辑：

我的目录结构是：

```
root/
   Shared/
      Assets/
         Fonts/
            *fonts are in here.*
         CSS/
            * css files are in here. *
   Home.cshtml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:53:13.887

这应该适用于您当前的目录结构。

```
@font-face {
    font-family: 'SansationRegular';
    src: url('../Fonts/Sansation_Regular-webfont.eot');
    src: url('../Fonts/Sansation_Regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Regular-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Regular-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Regular-webfont.svg#SansationRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationLight';
    src: url('../Fonts/Sansation_Light-webfont.eot');
    src: url('../Fonts/Sansation_Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Light-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Light-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Light-webfont.svg#SansationLight') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationBold';
    src: url('../Fonts/Sansation_Bold-webfont.eot');
    src: url('../Fonts/Sansation_Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Bold-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Bold-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Bold-webfont.svg#SansationBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationLightLightItalic';
    src: url('../Fonts/Sansation_Light_Italic-webfont.eot');
    src: url('../Fonts/Sansation_Light_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Light_Italic-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Light_Italic-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Light_Italic-webfont.svg#SansationLightLightItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationItalic';
    src: url('../Fonts/Sansation_Italic-webfont.eot');
    src: url('../Fonts/Sansation_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Italic-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Italic-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Italic-webfont.svg#SansationItalic') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'SansationBoldItalic';
    src: url('../Fonts/Sansation_Bold_Italic-webfont.eot');
    src: url('../Fonts/Sansation_Bold_Italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/Sansation_Bold_Italic-webfont.woff') format('woff'),
         url('../Fonts/Sansation_Bold_Italic-webfont.ttf') format('truetype'),
         url('../Fonts/Sansation_Bold_Italic-webfont.svg#SansationBoldItalic') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:46:56.337

试试这样的路径

```
src: url('../Shared/Assets/Fonts/Sansation_Regular-webfont.eot'); 
```

# ruby-on-rails - database.yml 文件中的 Postgres 数据库用户名

> ID：16186243
> 
> 赞同：1
> 
> 时间：2013-04-24T07:42:15.050
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql

如何找出`username`本地计算机中的数据库是什么？我正在`database.yml`我的 rails 应用程序中更新我的文件，但我尝试的任何方法都不起作用。

尝试使用`postgres`（或其他选项，例如`mymacusername`）时，出现以下错误：

```
FATAL:  role "postgres" does not exist 
```

我需要创建它吗？如何？或者我可以在我的计算机上使用现有的用户名吗？

更新：我正在尝试创建一个用户（这是在安装后不久，所以问题可能是它还不存在）我运行`createuser -s -U $USER` 了要添加的角色名称：`postgres`

但我收到以下错误：

```
createuser: could not connect to database postgres: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

所以这就是问题所在 - 我如何让它监听正确的套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:46:16.467

如果您有 root 访问权限：

```
sudo -u postgres psql DATABASENAME 
```

在里面输入

```
\l 
```

显示所有数据库及其用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-27T08:36:49.233

我们只需要创建 postgres 角色。创建角色名称 postgres 的命令： 1.sudo -u postgres psql 2.CREATE ROLE postgres WITH SUPERUSER CREATEDB CREATEROLE LOGIN ENCRYPTED PASSWORD 'password'

# mysql - 优化大表中的 SELECT

> ID：16186248
> 
> 赞同：1
> 
> 时间：2013-04-24T07:42:32.783
> 
> 标签：mysql, performance, query-optimization

我有一个包含来自游戏服务器的日志的表。这些日志以一种非常糟糕的方式保存（imo），但我需要设法收集它们。该表当前包含 4,000,000 行并且还在增长（这是 4 或 5 个月的日志）。

现在我正在寻找一种方法来过滤 SELECT 查询而不会给数据库带来太多负载。这是表结构：

```
CREATE TABLE `rp_logs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `time` int(11) NOT NULL,
  `type` enum('joinleave','kill','chat','spawn','ac','cmd','misc','hidden','cp','admin') NOT NULL,
  `msg` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

现在我可以过滤时间范围和日志类型。但我想要更多。日志消息大部分时间都包含玩家 ID。如果我能添加一个`msg LIKE '%playerid%'`. 但是，如果我只是用一个简单的查询来做到这一点，它会将搜索操作延长到 +30 秒。

目前我只是这样做（这不是 100% 的代码，只是我所做的方法）：

```
SELECT * FROM rp_logs 
WHERE time > $start AND time < $end 
AND (type = 'kill' or type = 'cmd' or ... ); 
```

有没有更好的方法来优化查询，所以它不那么重。

我所知道的可能是对时间进行查询，然后使用 msg 上的过滤器对其进行子查询，但我不知道它是如何工作的。我似乎无法让它工作。

这是 30 行示例数据：

```
INSERT INTO `rp_logs` (`id`, `time`, `type`, `msg`) VALUES
(4314121, 1366788849, 'chat', '[OOC] Danny Doss (STEAM_0:0:20730895): He logged a long time ago Itt'),
(4314122, 1366788849, 'chat', 'Eric Crendor (STEAM_0:0:46944468): the *'),
(4314123, 1366788851, 'spawn', 'Danny Doss (STEAM_0:0:20730895) created entity prop_physics with model models/props_building_details/storefront_template001a_bars.mdl'),
(4314124, 1366788855, 'chat', '[OOC] Eric Crendor (STEAM_0:0:46944468): did he?'),
(4314125, 1366788868, 'chat', '[OOC] Danny Doss (STEAM_0:0:20730895): 5 minutes ago'),
(4314126, 1366788872, 'misc', 'Daedalus Richmond (STEAM_0:1:20442870) has been made a Arms Dealer'),
(4314127, 1366788879, 'chat', '[OOC] Eric Crendor (STEAM_0:0:46944468): nontheless we killed him then started cracking, he still left whilst raid?'),
(4314128, 1366788893, 'chat', '[OOC] Jasonafex Mittsies (STEAM_0:0:29686591): He left because he went to bed'),
(4314129, 1366788899, 'chat', '[OOC] Danny Doss (STEAM_0:0:20730895): Can''t do anything about it'),
(4314130, 1366788903, 'chat', 'Eric Crendor (STEAM_0:0:46944468): left go to next dealer'),
(4314131, 1366788904, 'chat', '[OOC] Danny Doss (STEAM_0:0:20730895): It is not warnable'),
(4314132, 1366788909, 'chat', 'Eric Crendor (STEAM_0:0:46944468): * my grAMMAR'),
(4314133, 1366788912, 'chat', 'Eric Crendor (STEAM_0:0:46944468): damn keyboard'),
(4314134, 1366788913, 'spawn', 'Danny Doss (STEAM_0:0:20730895) created entity prop_physics with model models/props_c17/furnituredrawer001a.mdl'),
(4314135, 1366788919, 'spawn', 'Danny Doss (STEAM_0:0:20730895) created entity prop_physics with model models/props_combine/combine_window001.mdl'),
(4314136, 1366788921, 'chat', 'Eric Crendor (STEAM_0:0:46944468): k'),
(4314137, 1366788923, 'spawn', 'Danny Doss (STEAM_0:0:20730895) created entity prop_physics with model models/props_c17/furniturecouch002a.mdl'),
(4314138, 1366788932, 'kill', 'Danny Doss (STEAM_0:0:20730895) was killed by Entity [0][worldspawn], weapon: N/A'),
(4314139, 1366788947, 'spawn', 'Jasonafex Mittsies (STEAM_0:0:29686591) created entity prop_physics with model models/props_lab/blastdoor001c.mdl'),
(4314140, 1366788960, 'misc', 'AceFTFW (STEAM_0:0:37117785) has been made a Citizen'),
(4314141, 1366788960, 'joinleave', 'Ace Jones (STEAM_0:0:37117785) joined the game.'),
(4314142, 1366788967, 'joinleave', 'Jasonafex Mittsies (STEAM_0:0:29686591) has left the game.'),
(4314143, 1366788971, 'joinleave', 'Danny Doss (STEAM_0:0:20730895) has left the game.'),
(4314144, 1366788981, 'misc', 'Ace Jones (STEAM_0:0:37117785) has been made a Arms Dealer'),
(4314145, 1366788989, 'chat', 'Eric Crendor (STEAM_0:0:46944468): okay'),
(4314146, 1366788996, 'chat', 'Eric Crendor (STEAM_0:0:46944468): Ace'),
(4314147, 1366789011, 'chat', 'Eric Crendor (STEAM_0:0:46944468): wheres your sho'),
(4314148, 1366789014, 'chat', 'Eric Crendor (STEAM_0:0:46944468): we wanna get some guns'),
(4314149, 1366789018, 'chat', 'Eric Crendor (STEAM_0:0:46944468): ah k'),
(4314150, 1366789035, 'chat', 'Eric Crendor (STEAM_0:0:46944468): no literally'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:00:20.610

`time`在您的字段上添加重复索引。只要您查询相对较窄的时间范围，现有查询的性能提升应该是显着的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:47:28.933

向包含用户名的数据库添加一个新字段。做“LIKE”，尤其是使用通配符，总是会占用大量资源（因此也需要时间）。此外，如果您有一个单独的用户名字段，您可以在其上放置一个索引，并使其更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:51:28.397

[LIKE 查询可以替换为 FULLTEXT 搜索。](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

```
SELECT * 
FROM rp_logs 
WHERE MATCH (msg) AGAINST ('playerid'); 
```

您必须首先将您`msg`的列声明为 FULLTEXT

```
ALTER TABLE rp_logs ADD FULLTEXT(msg); 
```

或者

```
CREATE TABLE `rp_logs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `time` int(11) NOT NULL,
  `type` enum('joinleave','kill','chat','spawn','ac','cmd','misc','hidden','cp','admin') NOT NULL,
  `msg` text NOT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT (msg)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

进一步阅读：

*   [MySQL的FULLTEXT索引和LIKE查询对全文搜索的性能分析](https://makandracards.com/makandra/12813-performance-analysis-of-mysql-s-fulltext-indexes-and-like-queries-for-full-text-search)
*   [Like '%Query%' 与全文搜索 CONTAINS 查询的性能](https://stackoverflow.com/questions/3213998/performance-of-like-query-vs-full-text-search-contains-query)

# asp.net-mvc-3 - 虽然使用 @Html.BeginForm() 命名 mvc3 表单，但它在资源管理器中显示 System.Web.Mvc.Html.MvcForm {} 之间的表单字段

> ID：16186250
> 
> 赞同：2
> 
> 时间：2013-04-24T07:42:45.950
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC3 并创建一个表单：

```
@Html.BeginForm(null, null, FormMethod.Post, new { name = "frmAcnt", id = "frmAcnt" }) 
```

因为我不想给出动作和控制器名称。它工作正常，但在 Firefox 或任何其他浏览器中，它在这两行之间显示形式。我该怎么做才能将其从显示中删除？

```
System.Web.Mvc.Html.MvcForm {

} 
```

并且在页面源代码中显示了这一行

```
<form action="/Home/AccCode" id="frmAcnt" method="post"     name="frmAcnt">System.Web.Mvc.Html.MvcForm 
```

以下是我的看法

```
@model CBS.Models.AccntBD

@{
ViewBag.Title = "AccCode";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>AccCode</h2>

<div>
@Html.BeginForm(null, null, FormMethod.Post, new { name = "frmAcnt", id = "frmAcnt" })
{

<table class="tablestyle">
<tr>
<td>
<input type="text" id="AcCode" name="AcCode" maxlength="10" placeholder="Account Code" autofocus="true" class="required" />

</td>
</tr>

<tr>
<td>
 <label>Description</label>
</td>
<td>
   <input type="text" id ="Descrip" name="Descrip" maxlength="150" placeholder="Desription..." class="Descrip"/>
                     </td>
</tr>

   <tr>
   <td>
   <span>

    <input type="button" name="clear" value="Cancel" onclick="clearForm(this.form);" >
   </span>

          <span>
                    <input type="submit" id="sve" name="action" value="Save" />
        </span>
         <span>
         <input type="button" id="edi" value="Edit" name="action"/>
                     </span>
   <span>
    <input type="button" value="Delete" id="del" name="action"/>     
</span>
</td>
<td>                                     
</td>     
</tr>   
<tr>      
<td>   
</td>
</tr>
</table>     
}
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:58:59.220

尝试一次，理想情况下，您可以使用它`@using (Html.BeginForm()){ }`来定义表单

*看法*

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { name = "frmAcnt", id = "frmAcnt" }))
{ 
  @* Your Form Content Here *@
} 
```

*HTML*输出是

```
<form name="frmAcnt" method="post" id="frmAcnt" action="/"></form> 
```

# java - 为什么在重载时会出现这种行为

> ID：16186252
> 
> 赞同：1
> 
> 时间：2013-04-24T07:42:48.143
> 
> 标签：java

当我运行这个程序时，为什么它会调用用字符串参数重载的方法。

```
public class StaticBindTest {

    public static void main(String args[])  {
       StaticBindTest et = new StaticBindTest();
       et.sort(null);

    }

    //overloaded method
    public void sort(Object c){
        System.out.println("Inside Collection sort method");
    }

   //another overloaded method
    public void sort(String hs){
        System.out.println("Inside HashSet sort method");
    }

} 
```

如果我将我的方法重写为

```
 public void sort(String hs){
        if(hs instanceof String)
        System.out.println("Inside HashSet sort method");
    } 
```

它将显示空白控制台，这意味着它不是 String 的实例，那么为什么它以这种方式调用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:45:32.530

t 是因为在方法重载的情况下

```
The most specific method is choosen at compile time. 
```

因为“java.lang.String”是比“java.lang.Object”更具体的类型。在您的情况下，选择了将“String”作为参数的方法。

[**DOCS**](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)中明确提到[](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:47:48.927

当我执行你的代码时，我发现`Inside HashSet sort method`它在输出中。`null`是对对象的空引用。这两种方法都将 Object 作为输入，这`String`就是调用具有更窄层次结构的方法的原因。
不要写 `StaticBindTest et = new StaticBindTest();`
Just call `sort(null)`without object `et`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:47:43.327

完整的方法[在 JLS 的第 15.12.2 节中进行了](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)解释，特别是第 15.12.2.5 节（选择最具体的）。

总结是 Java 总是选择适用的最具体的重载。由于`null`可以是任何类的实例，因此这两种方法都是候选方法。既然`String`是 的子类`Object`，它肯定更具体。因此调用了 String 重载。

至于你的最后一段，`null`不是`instanceof`什么。如果您以类似的方式编写了 Object-overload 方法，它*也*不会打印任何内容 - 所以这不是 Java 是否应该选择一个重载或另一个的有力证据。**

# image - 如何将 nvarchar 数据类型图像显示到 SSRS 图像控件？

> ID：16186255
> 
> 赞同：0
> 
> 时间：2013-04-24T07:42:55.287
> 
> 标签：image, reporting-services

实际上我是 SSRS（SQL Server 报告服务）的新手。我必须在 SSRS Image Control 中显示签名图像。签名图像存储在 nvarchar 数据类型中。如果您需要其他信息，请询问我。

提前致谢。

丹麦语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:20:47.710

SSRS Image Control 显示字符串图像数据很好，没有额外的设置。

`Image Properties` `General`只需在报告和选项卡中拖动一个图像控件，

选择`Select the image source:`为`Database`

![在此处输入图像描述](https://i.stack.imgur.com/rCqxa.png)

并在选项中选择适当的字段`Use this field:`。即保存图像数据的数据库字段。

并在 `Use this MIME type:`. 尽管它们中的任何一个都应该为您工作。

# java - 如何按顺序将数据写入Excel文件

> ID：16186257
> 
> 赞同：1
> 
> 时间：2013-04-24T07:43:03.150
> 
> 标签：java, excel

我需要按顺序将数据写入 Excel 文件。

我写了这个函数：

```
private void writeXlFile() 
    { 
    HSSFWorkbook workbook = new HSSFWorkbook();

    HSSFSheet sheet = workbook.createSheet("Sample sheet");

    Map<String, List<String>> empData = new HashMap<String, List<String>>();
    List<String> name = new ArrayList<String>();
    name.add("Employee ID");
    name.add("Employee Name");
    name.add("Salary");
    empData.put("1", name);

    name = new ArrayList<String>();
    name.add("01");
    name.add("bala");
    name.add("100000");
    empData.put("2", name);

    name = new ArrayList<String>();
    name.add("02");
    name.add("Ganesh");
    name.add("100000");
    empData.put("3", name);

    name = new ArrayList<String>();
    name.add("03");
    name.add("Krish");
    name.add("100000");
    empData.put("4", name);

    Set<String> keyset = empData.keySet();
    int rownum = 0;
    for (String key : keyset)
    {
        Row row = sheet.createRow(rownum++);
        List<String> nameList = empData.get(key);
        int cellnum = 0;
        for (Object obj : nameList)
        {
            Cell cell = row.createCell(cellnum++);
            if (obj instanceof Date)
            {
                cell.setCellValue((Date) obj);
            }
            else if (obj instanceof Boolean)
            {
                cell.setCellValue((Boolean) obj);
            }
            else if (obj instanceof String)
            {
                cell.setCellValue((String) obj);
            }
            else if (obj instanceof Double)
            {
                cell.setCellValue((Double) obj);
            }
        }
    }

    try
    {
        String path = separator + "home" + separator + "santhanam" + separator
                + "Desktop" + separator + "write.xls";
        FileOutputStream out =
                new FileOutputStream(new File(path));
        workbook.write(out);
        out.close();
        System.out.println("Excel written successfully..");

    }
    catch (FileNotFoundException e)
    {
        System.out.println("FileNotFoundException :" + e);
    }
    catch (IOException e)
    {
        System.out.println("IOException :" + e);
    }
} 
```

它正在工作，但结果如下所示：

```
02          Ganesh          100000
01          bala            100000
Employee ID Employee Name   Salary
03          Kumar           100000 
```

我想将员工 ID 和姓名写为工作表的第一行。

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T08:51:26.730

请使用整数而不是字符串。

```
 Map<Integer, List<String>> empData = new HashMap<Integer , List<String>>(); 
```

等等。它将解决您的问题。

谢谢比平

# android - 方向改变后恢复 ListView 颜色的示例代码

> ID：16186263
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:43:22.177
> 
> 标签：android, android-listview

我想知道一些关于如何在方向改变后恢复`Color`的代码。`ListView`从风景到肖像，反之亦然。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:58:51.017

我不确定我是否理解您想要实现的目标，但如果我做对了，您就有了一个`ListView`并且您想用不同的颜色为每个项目着色。

有几种方法可以做到这一点，一种最简单的方法是自己处理配置更改，方法是`Activity`这样定义：

```
android:configChanges="keyboardHidden|orientation|keyboard|smallestScreenSize|screenSize" 
```

您`Activity`不会在所有这些事件上重新创建，它只会调整您的视图大小而不会丢失状态。请注意，这有很多缺点，具体取决于您在`Activity`/中所做的事情`Fragment`。

另一种解决方案是自己跟踪每个`ListView`项目的状态，例如，创建一个 int 数组并将所有列表视图元素的颜色保存在那里，并使用它为您的 adatper`getView()`调用中的视图着色。

# google-drive-api - files.list() 可重现地返回“drive.files”范围内的不完整列表

> ID：16186264
> 
> 赞同：14
> 
> 时间：2013-04-24T07:43:25.573
> 
> 标签：google-drive-api

我们的应用程序需要用户文件和文件夹的完整列表。我们使用`files.list()`via`Javascript`库（与官方给出的代码基本相同`API reference`）。

我们使用“ `drive.files`”范围。

检查对列表的响应，我们发现某些文件总是丢失。我做了各种测试来理解这个问题：

*   这些文件显然存在。它们出现在 中`Google Drive Webapp`，如果我通过 ID 明确请求它们，我可以通过 API 毫无问题地获取它们。
*   它是可重现的，总是丢失相同的文件。
*   它不是暂时的。一天后我尝试了，但仍然缺少相同的文件。我知道 API 中有一些奇怪的效果会在一段时间后消失，但不是这个。
*   这不是一次性的事情（例如在上传过程中出现了一些奇怪的事情）。如果我再次使用完全不同的 Google 帐户重复文件丢失。在一个测试中的一小部分 147 个上传的文件中，有 4 个被`files.list`调用丢失，在另一个帐户上使用相同的 147 个文件的另一个测试中，有 23 个文件丢失。
*   它仅在我使用`drive.files`范围时发生。如果我放宽范围，`drive`所有文件都将返回。如果查看 Google Drive Webapp 中的“详细信息”，那么丢失的文件也会显示为我们的应用程序创建的。因此，它们似乎并没有以某种方式失去起源。
*   当我指定搜索查询时也会发生这种情况。如果我使用搜索词“q: modifiedDate > '2012-06-04T12:00:00'” 调用 files.list，它也应该返回所有文件，那么相同的文件会丢失。
*   我重新实现了与 API 的纯 REST 调用相同的事情，以排除这是 Javascript 库的问题。错误仍然存​​在。

**更新：**我可以将其归结为分页和`maxResults`参数的问题。如果我使用不同的值，API 会返回不同数量的项目：

我得到`maxResults=100`100+100+7=207。

我得到`maxResults=99`99+99+28=226。

我得到`maxResults=101`101+101+0=202。

最后一个结果很有趣，它告诉我`nextLink`还有更多结果，但最后一个响应中的 items 数组实际上是空的。仅此一项就可能表明存在错误。

尽管如此，这只发生在`drive.file`范围内，计数在整个`drive`范围内是一致的。

我很高兴听到解决方法的想法。我知道跟踪用户文件的其他方法，例如使用更改提要。我已经在使用它，但对于我们应用程序中的特定部分，我只需要用户帐户中所有应用程序项目的可靠且完整的列表。

另一个注意事项：我们之前在“drive.files”范围内遇到过其他问题（请参阅[Listing files with search query returns out-of-scope results (drive.files.list call, using drive.files scope)](https://stackoverflow.com/questions/15821979/listing-files-with-search-query-returns-out-of-scope-results-drive-files-list-c)）。事实证明这是一个简单的解决方法。也许这个问题是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-20T14:32:36.943

属于“共享给我”的文件和自己的文件/文件夹是否有任何区别，是我的问题吗？它在 Google Drive 中的显示方式与我在没有正确标志的情况下搜索时得到的结果不同。

我发现当我对所有文件夹进行此文件列表时，我确实必须包括文件搜索范围的位置。- 包括已删除的文件 - 包括共享给我的文件

# python - 在 python 中检查大型日志文件

> ID：16186266
> 
> 赞同：3
> 
> 时间：2013-04-24T07:43:28.200
> 
> 标签：python

关于发布这个有点犹豫 - 就我而言，这是一个真正的问题，但我想我会理解它是否被批评或关闭为讨论邀请......

无论如何，我需要使用 Python 在一些相当大的网络日志中搜索特定事件。RegEx 会很好，但我不依赖于任何特定的方法——我只想要包含两个字符串的行，这些字符串可能出现在 GET 请求的任何地方。

由于一个典型的文件超过 400mb 并且包含大约一百万行，因此在完成时间和在服务器上加载方面的性能（ubuntu/nginx VM - 相当好的规范并且很少过度工作）可能是问题。

我是一个相当新的 Python 转换者（注意是一个新手，但仍有很多东西要学习），我想要一些关于实现这一目标的最佳方法的指导

我是否打开并迭代？grep到一个新文件然后打开？两者的某种组合？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:50:57.357

只要您不一次读取整个文件而是连续遍历它，您应该没问题。我认为你是用 python 还是用 读取整个文件并不重要`grep`，你仍然需要加载整个文件:)。如果你利用生成器，你可以做到这对程序员非常友好：

```
# Generator; fetch specific rows from log file
def parse_log(filename):
    reg = re.prepare( '...')

    with open(filename,'r') as f:
       for row in f:
           match = reg.match(row)
           if match:
               yield match.group(1)

for i in parse_log('web.log'):
    pass # Do whatever you need with matched row 
```

# websphere - 减少 WAR（基于 Java EE）文件大小的区域

> ID：16186267
> 
> 赞同：0
> 
> 时间：2013-04-24T07:43:28.990
> 
> 标签：websphere, war, ear

我有一个 EAR 文件，其中包含 3 个不同的 Web 应用程序“战争”文件。

项目环境：MAVEN、Java/Java EE、Spring、JSF、Hibernate/JPA、Oracle、WebSphere

我的耳朵大小已达到 81.6152 MB。因此，我的 EAR 部署很慢。

请提供一些建议和可以减少 EAR 文件大小并缩短部署时间的领域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:43:34.267

您可以为您的应用程序库（例如 Spring）创建**共享库**，并将它们分别链接到您的企业应用程序或 Web 模块。

# android - FragmentPagerAdapter 和 notifyDataSetChanged

> ID：16186268
> 
> 赞同：0
> 
> 时间：2013-04-24T07:43:31.977
> 
> 标签：android, android-adapter

我该如何`notifyDataSetChanged`使用`FragmentPagerAdapter`？

在`onResume`：
我用过`mMyFragmentPagerAdapter.notifyDataSetChanged();`但没用

但是
`mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());`
工作

```
 public class Activity extends FragmentActivity{

     static ViewPager mViewPager;  
        private MyFragmentPagerAdapter mMyFragmentPagerAdapter;  
        public void onCreate(Bundle savedInstanceState) {  

            super.onCreate(savedInstanceState);
     mViewPager = (ViewPager) findViewById(R.id.pager);  
            mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
            mViewPager.setAdapter(mMyFragmentPagerAdapter);  
}  
     private static class MyFragmentPagerAdapter extends FragmentPagerAdapter { 
    ...
    }

    @Override
       protected void onResume() {
           super.onResume();

    //WORKS     
             mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());        
         mViewPager.setAdapter(mMyFragmentPagerAdapter);  

    //DOESN'T WORK
     mMyFragmentPagerAdapter.notifyDataSetChanged();
     mViewPager.setAdapter(mMyFragmentPagerAdapter);     

           }
       } 
```

填充：

```
 public void startView() {
 this.questions.clear();  // this.questions is a LinkedList
 this.questions.add(q);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:24:41.770

首先，要更新 ListView / ViewPager 或任何其他类型的视图及其适配器，您需要重新查询`Cursor`例如，如果您使用它来填充视图。因此，在您的情况下，您有 a`ViewPager`和 a `Adapter`。因此，您首先考虑的是更新`LinkedList`. 在您的情况下，您做得对，但我认为`this.quetions`您的外部类与`LinkedList`您用于填充适配器的不同。在这种情况下，我建议您不要使用外部类来更新您的适配器。如果这取决于代码组织太难实现，请确保您`LinkedList`在您的`Fragment`和外部类中使用相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-03T08:01:04.577

更改您的适配器延伸`FragmentPagerAdapter`到`FragmentStatePagerAdapter`然后`notifyDataSetChanged`工作正常。这对我有用。

# java - 当 Internet/服务器/VPN 不可用时如何显示错误消息

> ID：16186271
> 
> 赞同：0
> 
> 时间：2013-04-24T07:43:43.653
> 
> 标签：java, javascript, jquery, jsf, ajax4jsf

我有一个代码是这样的；

```
<a4j:commandLink 
actionListener="#{controller.validate}"
onclick="showFadeLoadingImg();"
oncomplete="confirmOperation();}"
value="#{actionItem.actionDisplayName}"
reRender="text1,text2">
</a4j:commandLink> 
```

在这里，当我的 VPN 关闭时，我的 oncomplete 事件具有 jscript 函数 confirmOperation()，该函数将被执行并显示该函数的不需要的输出。但是，我最终想要的是，当我单击按钮时，我想检查我是否能够连接到服务器（是否启用了 VPN/互联网），如果不能，我必须显示一些错误消息，例如“无法连接到达服务器'，否则，我可以将页面重定向到登录页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:36:54.140

您可以通过 validate() 方法连接到服务器，如果无法连接到服务器，可以记录信息，然后您可以使用 jscript 函数 confirmOperation() 显示此信息。

# java - arraylist 的代码已完成一半

> ID：16186280
> 
> 赞同：-4
> 
> 时间：2013-04-24T07:44:02.983
> 
> 标签：java

我明天要进行期末考试，所以我正在练习一些问题。但是我被这个问题困住了。我得到了一个人类文件和一个完成了一半的 quiz10 文件，我必须填写。quiz10 代码已经完成了一半（给定）。

我需要实现一个函数`findPersonWhoseNameStartWith`，它返回列表中以 A 开头的人的姓名。但我不知道如何。

想要的输出：

结果：四月，亚当

```
public class Person{
    private int age;
    private String name;

    public Person(String name,int age){
        this.name=name;
        this.age=age;
    }

    public int getAge(){
        return age;
    }

    public String getName(){
        return name;
    }

    public String toString(){
        return "" + name;
    }
} 
```

给定代码的一半（我已经指出我尝试了哪一部分）：

```
import java.util.*;

public class Quiz10{
    public static void main(String[] args){
    ArrayList<Person>list=new ArrayList<Person>();
    list.add(new Person("April",9));
    list.add(new Person("Adam",3));
    list.add(new Person("bil",9));
    list.add(new Person("cpril",9));
    list.add(new Person("dpril",9));

    ArrayList<Person>result=findPersonWhoseNameStartWith(list,"A");
    System.out.println("result:");

//START DOING FROM HERE

    for(int i=0;i<list.size();i++){
        Person p=list.get(i);

        if(p.findPersonWhoseNameStartWith("A");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:48:03.383

你在正确的轨道上。你是对的，你必须遍历列表。现在，如果每个条目以 . 开头，则输出它`'A'`。它非常简单，并且单个 if 语句比您想象的要容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:09:18.400

```
// pass your personList and the prefix, return a list of person starting with the prefix you specified
private List<Person> findPersonWhoseNameStartWith(List<Person> personList, String prefix) {
      // create a list to store your result
      List<Person> matchedList = new ArrayList<Person>();

      // TODO iterate personList
      // add them to the matchedList if the prefix matches

      return matchedList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:09:56.137

```
public List<Person> findAPersonWhoStartsWith(List<Person> persons, String aLetter){
    List<String> personsNames = new ArrayList<String>();

    if(persons!=null && aLetter!=null && !aLetter.isEmpty()){
        for(Person aPerson:persons){
            if(aPerson.getName().startsWith(aLetter)){
                personsNames.add(aPerson);
            }
        }
    }
    return personsNames;
} 
```

# gwt - GWT 应用程序中的页面导航

> ID：16186282
> 
> 赞同：2
> 
> 时间：2013-04-24T07:44:03.333
> 
> 标签：gwt

我想导航到我的应用程序中的另一个页面。我不希望页面重新加载（即应用程序应该是单个 URL 应用程序）。

我只知道一种方法可以通过我要显示的任何数据更改附加在 RootPanel 中的正确 div 来完成此操作。但是我觉得如果有很多导航可能会变得很麻烦（虽然我还没有尝试过：P）。

有没有其他方法可以做到这一点或使上述方法更好？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:04:51.463

我猜你需要[带有活动和地点的 GWT 开发](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

好吧，是时候看看 [**MVP了**](https://developers.google.com/web-toolkit/articles/mvp-architecture)

有了它，你可以做到

```
 History.newItem(tokenOfYourPresenterScreen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T12:23:29.220

一个不错的单入口点演示应用程序在这里：（BrowserHistoryExample.java） [http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsHistory.html](http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsHistory.html)

我在示例中添加了以下内容以演示链接。

```
vertPanel.add(new Label("Access history via Hyperlinks"));
vertPanel.add(new Hyperlink("External Page 0","page0"));
vertPanel.add(new Hyperlink("External Page 1","page1"));
vertPanel.add(new Hyperlink("External Page 2","page2")); 
```

# java - 创建相对 java.io.File 的安全方法

> ID：16186285
> 
> 赞同：9
> 
> 时间：2013-04-24T07:44:13.403
> 
> 标签：java, file, security

如何`java.io.File`以安全的方式创建相对于父文件夹的实例，即防止恶意攻击者突破父文件夹。

例子：

```
 String path = request.getParameter( "path" );
  File file = new File( folder, path ); 
```

这是不安全的，因为攻击者可能会向我发送`../../../etc/passwd`as `path`。

我如何“清理”这样的路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:53:30.120

在阅读了其他答案后，我想出了这个解决方案：

```
public static boolean isParent( File parent, File file ) {

    File f;
    try {
        parent = parent.getCanonicalFile();

        f = file.getCanonicalFile();
    } catch( IOException e ) {
        return false;
    }

    while( f != null ) {
        // equals() only works for paths that are normalized, hence the need for
        // getCanonicalFile() above. "a" isn't equal to "./a", for example.
        if( parent.equals( f ) ) {
            return true;
        }

        f = f.getParentFile();
    }

    return false;
} 
```

所以用法是：

```
File file = new File( folder, path );
if( ! isParent( folder, file ) ) {
    ... deny access ...
} 
```

上面的代码可能不是很快，但所有其他解决方案都有安全问题：

*   我可以删除`/../|^../|/..$`，但这在 Windows 上不起作用。对于 Windows，该模式会变得更加复杂，不要忘记 Java 接受`/`Windows 上的文件分隔符（是的，`C:/Windows/`有效且含义与 相同`C:\Windows\`）

    此外，路径`a/../b/c`是有效的，因为它不会打破边界，所以仅仅消除相对运动是不够的。

*   我可以使用创建两个字符串`getCanonicalPath()`并确保`parent`路径是`file`. 但是，我必须确保父路径之后的字符是文件分隔符（见上文为什么`File.SEPARATOR`还不够）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:49:15.470

~~一种解决方案是禁止任何以`/`or开头的内容`..`。但~~我猜“安全/正确”的方式是在启用（JVM）安全管理器的情况下运行您的应用程序，并禁止在预定义配置之外访问文件。但是启用安全管理器需要一些工作来确定能够运行游览应用程序所需的所有权限。

显然，操作系统文件权限也很重要。

**编辑**

根据要求添加了一个示例。示例来自部署在 Tomcat 中的当前项目：

```
grant codeBase "file:${catalina.base}/webapps/mywebapp/-" {
    permission java.io.FilePermission "path/to/folder", "read"; // Anything else will be disallowed
    // Other required permissions
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:54:38.550

```
 String path = "../../../etc/passwd";
    String pureFilename = (new File(path)).getName();
    File file = new File(folder, pureFilename); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-29T02:08:26.487

```
boolean isChild(File parent, File child) throws IOException {
    String parentCanonicalPath = parent.getCanonicalPath();
    String childCanonicalPath = child.getCanonicalPath();
    return childCanonicalPath.startsWith(parentCanonicalPath);
} 
```

# java - Mac OS X 触控板水平滚动激活 Shift Mask

> ID：16186289
> 
> 赞同：0
> 
> 时间：2013-04-24T07:44:15.447
> 
> 标签：java, macos, horizontal-scrolling, trackpad

我在带有*Magic Trackpad*的 OS X 上检测到某些 Java 软件的一些奇怪行为。我可以检测到神奇之处在于，当执行水平“双指”滚动时，修饰符常量`MouseWheelEvent`设置为 1，这`InputEvent.SHIFT_MASK`与按下。

如何区分 Magic Trackpad 上的水平滚动和常见的 SHIFT+鼠标滚轮？使用`InputEvent.SHIFT_DOWN_MASK`显然会完全停用 SHIFT down 的检测。

这是一个行为如上所述的代码片段：

```
@Override
public void mouseWheelMoved(@NotNull MouseWheelEvent e) {
    int unitsToScroll = e.getUnitsToScroll();

    int modifiers = e.getModifiers();
    boolean shiftDown = ((modifiers & InputEvent.SHIFT_MASK) != 0);
    boolean ctrlDown = ((modifiers & InputEvent.CTRL_MASK) != 0);
    [...]
} 
```

这让我很头疼。感谢您的帮助 - 将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T13:56:38.120

从我的测试看来，如果在滑动过程中您的两根手指的距离发生变化（类似捏合的操作），则将设置换档键掩码。如果您可以将手指保持严格相同的距离，则永远不会设置换档键掩码。

# ruby - 在 rails 3.2.13 中使用 rest API

> ID：16186295
> 
> 赞同：0
> 
> 时间：2013-04-24T07:44:37.687
> 
> 标签：ruby, ruby-on-rails-3, api, openssl, activeresource

我有两个在不同端口上运行的 Rails 应用程序。我试图从一个应用程序使用另一个应用程序的 API。这是 APP_1 中 Product.rb 模型的代码。

```
class Product < ActiveResource::Base
  self.site = "https://localhost:3000"
  self.ssl_options = {:cert         => OpenSSL::X509::Certificate.new(File.open(pem_file)),
                      :key          => OpenSSL::PKey::RSA.new(File.open(pem_file)),
                      :ca_path      => "/path/to/OpenSSL/formatted/CA_Certs",
                      :verify_mode  => OpenSSL::SSL::VERIFY_PEER}
end 
```

我为 Product 模型设置了控制器和路由。当我运行 APP_1 我得到

```
 undefined local variable or method `pem_file' for Product:Class 
```

谁能告诉我如何编写 pem 文件，什么是 pem 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:22:03.017

查看： [https ://serverfault.com/questions/9708/what-is-a-pem-file-and-how-does-it-differ-from-other-openssl-generated-key-file](https://serverfault.com/questions/9708/what-is-a-pem-file-and-how-does-it-differ-from-other-openssl-generated-key-file)

这应该足以让您开始使用谷歌搜索和寻找您的解决方案。

# c++ - 将 FreeImage 链接为 VS2010 中的静态库？

> ID：16186300
> 
> 赞同：9
> 
> 时间：2013-04-24T07:44:55.963
> 
> 标签：c++, image, freeimage

我需要一个图像库，并且我一直在研究 FreeImage， http: [//freeimage.sourceforge.net/](http://freeimage.sourceforge.net/)。我想将它与我的应用程序静态链接。

我已经尝试下载二进制文件并将其链接，但是当我尝试调用它们的函数时出现 2019 链接器错误，即使我很肯定我链接它是正确的。

然后我尝试下载他们的源代码，将他们的“FreeImageLib.2008”转换为 VS2010 并构建它。它自己构建得很好，但是在链接它时我仍然遇到同样的问题，我使用它的应用程序仍然抱怨链接器错误。

我还设置了所有项目配置以匹配我的其他项目，因此与/MDd或/MTd等没有冲突。

我在他们的源代码中进行了一些挖掘，并且有像“FREEIMAGE_LIB”这样的宏，这表明应该在构建静态库时定义它，并且它已定义，但它仍然不起作用。

我用谷歌搜索了这个问题，找不到任何可靠的答案。[让 FreeImage 与 Visual Studio 2010 一起工作](https://stackoverflow.com/questions/9225890/getting-freeimage-to-work-with-visual-studio-2010)的答案没有区别；我已经在包含标头之前或作为预处理器参数定义了宏，但它不起作用。

这个库是否不打算用作静态库，或者可能是什么问题？有没有人能够在 VS2010+ 上静态链接 FreeImage？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:55:59.373

是的，我已经能够在几个 Visual Studio 版本上静态链接 FreeImage。在这里，我描述了我通常如何做到这一点。

使用 FreeImage，默认情况下，我们有 8 个选项将其链接到您的应用程序：

FreeImage - 动态链接（您将需要 dll）。

FreeImageLib - 静态链接。

这些中的每一个都可以使用“调试”或“发布”配置构建，并且适用于 Win32 或 Win64 平台。

因此，假设我们的应用需要 ( Static && Win32 && Debug ) 和 ( Static && Win32 && Release ) 变体。同样在我们的应用程序中，我们使用动态运行时库（默认情况下，出于某种原因，FreeImage 设置为静态）我们通常是如何得到它的：

*   下载并解压新版本（或至少清理旧的 distib）

*   `FreeImage.2008.sln`按住 Shift 并单击打开选择 10 个项目中的所有项目。然后在“Project(s) Properties / C++ / Code generation”中，我们为“Debug”配置选择 /MDd，为“Release”选择 /MD。

*   然后我们进入“Menu / Build / Batch build”，选择：

    `FreeImageLib | Debug | Win32`

    `FreeImageLib | Release | Win32`

并按“构建”。

*   等待构建的选定配置。我们需要的所有内容都将复制到`FreeImage\Dist`文件夹中

*   在`FreeImage\Dist`文件夹检查文件中： `delete.me` `FreeImage.h` `FreeImage.lib` `FreeImaged.lib` 检查创建日期和时间。它必须是新鲜出炉的和热的。如果没有，请从`FreeImage\Source\FreeImageLib\Debug`和复制它们`FreeImage\Source\FreeImageLib\Release`。

*   在主要应用程序中添加到包含和库`FreeImage\Dist`并链接`FreeImaged.lib`到调试配置和`FreeImage.lib`发布。
*   包含在源文件中：

    `#define FREEIMAGE_LIB`

    `#include "FreeImage.h"`

*   试着打电话 `FreeImage_Initialise();` `FreeImage_DeInitialise();`

*   它应该工作

快乐编码！

# php - PHP 的 IF/Else 用于登录显示

> ID：16186301
> 
> 赞同：2
> 
> 时间：2013-04-24T07:44:57.063
> 
> 标签：php, security, if-statement, login

我的目标是让 IF 状态显示“欢迎，%USERNAME%”，它链接到那个人的帐户设置。问题是，正如我所看到的，如果他们没有登录，则不会显示它。我希望它是“请登录”链接。

```
<?php 

 require("common.php"); 

 if (session_start()) {
     echo '<p class="right"><a href="/account"><?php echo htmlentities($_SESSION['user']['username'], ENT_QUOTES, 'UTF-8'); ?></a>!</p>';
     }
 else {
      echo '<p class="right"><a href="">Please Login</a></p>';
      } 
```

我的问题是 IF/Else 不正确……我做错了什么或忘记了……？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:47:12.287

你的方法是错误的，你需要`session_start()`在页面的最顶部，而不是使用这样的会话变量

```
$_SESSION['is_logged_in'] = false; 
```

现在，当用户登录时，将值更改为`true`并再次更改为`false`用户注销时

所以现在你可以设置一个条件

```
if($_SESSION['is_logged_in'] == true) {
   echo 'Welcome';
} else {
   echo 'Please login';
} 
```

另一方面，如果用户未使用登录，您也可以将用户重定向到登录页面`header()`

因此，例如，如果您不希望用户`admin.php`在最顶部看到该页面调用的页面，则可以指定条件，如果为假，则可以重定向

管理员.php

```
session_start();
if($_SESSION['is_logged_in'] == false) {
    header('Location: login.php'); 
    /* You can replace login.php to whatever page you want your 
       user to be redirected */
    exit;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T07:46:38.393

```
if (session_start()) { 
```

应该

```
session_start();
if (isset($_SESSION['user']['username'])) { 
```

# .htaccess - 是什么导致我的网站加载并在末尾添加“#”？

> ID：16186302
> 
> 赞同：0
> 
> 时间：2013-04-24T07:44:58.557
> 
> 标签：.htaccess, redirect, pageload

我认为我的 .htaccess 文件中可能有一些东西导致我的页面加载，然后“弹回”到顶部，在我的域末尾添加 #，如下所示：example.com/#

这是我的 htaccess 文件：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Start Category Redirects

Redirect permanent /check-out-this-page-tration http://example.com/this-page/

Redirect permanent /rewards http://example.com/example-reward-coupons-page/

Redirect permanent /p-photo-entries http://example.com/2012-contest-photos/

# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# Or, compress certain file types by extension:
<files *.html>
SetOutputFilter DEFLATE
</files>

# BEGIN WordPress
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^files/(.+) wp-includes/ms-files.php?file=$1 [L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule . index.php [L]

# END WordPress 
```

关于我应该删除或更改什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:54:47.620

[客户端（Web 浏览器）使用URL 片段](http://en.wikipedia.org/wiki/Fragment_identifier)来帮助确定如何处理它试图显示的内容。

这可以是跳转到页面某个部分的锚点，或者被 javascript 用来在其他脚本之间发送信息。这不是您的 htaccess 文件，因为片段永远不会发送到服务器（您的 htaccess 文件所在的位置）。

尝试有选择地删除 javascript（尤其是您从共享“添加到任何”之类的链接的 3rd 方网站加载的脚本），否则请确保您的内容中没有如下所示的链接：

```
some/path/file.html# 
```

# border - 边框在页脚上不起作用

> ID：16186306
> 
> 赞同：1
> 
> 时间：2013-04-24T07:45:12.347
> 
> 标签：border, footer

我有个问题。我想在我的页脚上有顶部边框，但似乎代码不起作用。我已经在互联网上搜索了答案，但除了在页面上显示与页脚不同的边框之外，我的问题没有任何问题。所以我需要你的帮助，为什么我的边境代码不起作用？页脚上的所有其他内容都可以完美运行。我在这里想念什么？

这是我的页脚的 CSS：

```
footer{
position:absolute;
bottom:0;
width:100%;
height:60px;   
background: #404040 ;
clear: both;
border-top: 2px solid #FFFFFF;
} 
```

如果您也需要 html，请告诉我，我会发布小提琴。Edit1：这里是小提琴[http://jsfiddle.net/N8eJp/](http://jsfiddle.net/N8eJp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:30:11.233

你的边界工作，但很难看到它。尝试将颜色更改为 #000 以查看黑色并确保其正常工作

# oracle10g - 为什么使用 lower() 会改变结果集的顺序？

> ID：16186313
> 
> 赞同：0
> 
> 时间：2013-04-24T07:45:49.270
> 
> 标签：oracle10g

我有一张表，用于存储有关用户的信息。该表具有以下结构：

```
CREATE TABLE PERSONS 
(
  ID NUMBER(20, 0) NOT NULL,
  FIRSTNAME VARCHAR2(40), 
  LASTNAME VARCHAR2(40),
  BIRTHDAY DATE, 
  CONSTRAINT PERSONEN_PK PRIMARY KEY 
  (ID)
  ENABLE 
); 
```

插入一些测试数据后：

```
SET DEFINE OFF;
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('1','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('2','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('3','Carl','Carlchen',to_date('01.01.12','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('4','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('5','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values ('6','Carl','Carlchen',to_date('01.01.12','DD.MM.RR')); 
```

我想选择给定用户的所有重复项。让我们以“Max Mustermann”为例：

```
SELECT p.id,p.firstname,p.lastname,p.birthday
  FROM persons p
  WHERE p.firstname = 'Max'
    AND p.lastname = 'Mustermann'
    AND p.birthday = to_date('31.10.1989','dd.mm.yyyy')
  ORDER BY p.firstname,p.lastname; 
```

这给了我这样的结果：

```
id  first   last        birthday
=================================
1   Max     Mustermann  31.10.89
2   Max     Mustermann  31.10.89
4   Max     Mustermann  31.10.89
5   Max     Mustermann  31.10.89 
```

我想做一个不区分大小写的比较，所以我使用较低（和修剪）更改查询，如下所示：

```
SELECT p.id,p.firstname,p.lastname,p.birthday
  FROM persons p
  WHERE lower(trim(p.firstname)) = lower(trim('mAx '))
    AND lower(trim(p.lastname)) = lower(trim('  musteRmann  '))
    AND p.birthday = to_date('31.10.1989','dd.mm.yyyy')
  ORDER BY p.lastname,p.firstname; 
```

现在惊喜的顺序已经改变了！

```
id  first   last        birthday
=================================
1   Max     Mustermann  31.10.89
5   Max     Mustermann  31.10.89
4   Max     Mustermann  31.10.89
2   Max     Mustermann  31.10.89 
```

**为什么顺序会改变，只需使用 lower()**（不使用 trim() 时结果相同）！？我可以通过将 id 列添加到 ORDER BY 来获得稳定的排序。但是 lower() 不应该对排序没有影响吗？

解决方法也为 ORDER BY 使用 id 列：

```
SELECT p.id,p.firstname,p.lastname,p.birthday
  FROM persons p
  WHERE p.firstname = 'Max'
    AND p.lastname = 'Mustermann'
    AND p.birthday = to_date('31.10.1989','dd.mm.yyyy')
  ORDER BY p.firstname,p.lastname,p.id;

SELECT p.id,p.firstname,p.lastname,p.birthday
  FROM persons p
  WHERE lower(trim(p.firstname)) = lower(trim('mAx '))
    AND lower(trim(p.lastname)) = lower(trim('  musteRmann  '))
    AND p.birthday = to_date('31.10.1989','dd.mm.yyyy')
  ORDER BY p.lastname,p.firstname,p.id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:01:42.900

如果要排序的值相同，则 DBMS 可以自由选择它认为正确的任何顺序（如果一起`order by`指定 no，则可以自由选择任何顺序）。

因为 order by 中列的所有值都相同，所以结果顺序不稳定。获得稳定订单的唯一方法是包含一个唯一列作为领带的附加订单标准 - 这正是您在添加 id 列时所做的。

> *为什么顺序变了，只用lower()*

从技术角度来看，我猜想应用`lower()`更改的执行计划以及数据的访问路径。

但同样（只是为了确保）：对相同的值进行排序永远不能保证稳定的顺序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:55:44.110

没有`order by clause`. 有时看起来可能有（`group by`在旧版本中愚弄了很多人`，但这只是巧合，绝不能依赖。在您的情况下，您按某些列排序，但您希望该排序中的重复项是进一步隐含地订购，这不会发生 - 或者至少不能依赖。

在这种情况下，Oracle 可能碰巧按照您插入它们的顺序检索您的第一个查询的行，这纯粹是它如何从块中读取数据的副作用，并`order by`在该集中对它们进行排序而不实际更改它们（或很可能如果它意识到这毫无意义，它会在内部跳过这`order by`一步；解释计划会告诉你）。

如果您更改创建记录的顺序：

```
...
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values
('5','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
Insert into PERSONS (ID,FIRSTNAME,LASTNAME,BIRTHDAY) values
('4','Max','Mustermann',to_date('31.10.89','DD.MM.RR'));
... 
```

然后结果“顺序”也会改变：

```
SELECT p.id,p.firstname,p.lastname,p.birthday
  FROM persons p
  WHERE p.firstname = 'Max'
    AND p.lastname = 'Mustermann'
    AND p.birthday = to_date('31.10.1989','dd.mm.yyyy')
  ORDER BY p.firstname,p.lastname;

        ID FIRSTNAME            LASTNAME             BIRTHDAY
---------- -------------------- -------------------- ---------
         1 Max                  Mustermann           31-OCT-89
         2 Max                  Mustermann           31-OCT-89
         5 Max                  Mustermann           31-OCT-89
         4 Max                  Mustermann           31-OCT-89 
```

一旦你有了这个功能，事情就会发生足够的变化，以至于那个快乐的事故会走出窗外，即使记录是按`id`顺序插入的（这与内部的数据库无关）。`lower()`没有改变顺序，你只是不再幸运了。

除非您在条款中*完全*指定，否则您不能期望或依赖订单。`order by`

# regex - 正则表达式匹配以特定字符串开头的所有行

> ID：16186319
> 
> 赞同：3
> 
> 时间：2013-04-24T07:45:56.983
> 
> 标签：regex, groovy

我有这个很长的 cfg 文件，我需要在其中找到以特定字符串开头的最新出现的行。cfg 文件的示例：

```
...
# format: - search.index.[number] = [search field]:element.qualifier
...    
search.index.1 = author:dc.contributor.*
...
search.index.12 = language:dc.language.iso
...
jspui.search.index.display.1 = ANY
... 
```

我需要能够获得以 开头的行的最后一次出现`search.index.[number]`，更具体地说：我需要那个数字。对于上面的代码片段，这个数字是**12**。

如您所见，还有其他行也包含该模式，但我**不想**匹配那些。

我使用 Groovy 作为编程/脚本语言。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:55:38.100

我认为您不应该这样做，但是...
如果您可以进行多行搜索（无论如何您必须在这里），唯一的方法就是向后读取文件。所以首先，用`.*`(om nom nom) 吃所有东西（如果你可以让点匹配所有东西，`(?:.|\s)*`如果你不能）。现在匹配你的模式`search\.index\.(\d+)`。并且您想在一行的开头匹配此模式：（`(?:^|\n)`希望您没有使用一些不用`\n`作换行符的疯狂格式）。

所以...

```
(?:.|\s)*(?:^|\n)search\.index\.(\d+) 
```

该号码应在第一个匹配组中。（用[**JavaScript**](http://jsfiddle.net/P5zgq/)[测试](http://jsfiddle.net/P5zgq/)**）**

 **PS：我不知道groovy，如果它完全不合适，很抱歉。

**编辑：**
这也应该有效：

```
search\.index\.(\d+)(?!(?:.|\s)*?(?:^|\n)search\.index\.\d+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:58:07.983

试试这个作为你的表达方式：

```
^search\.index\.(\d+)/ 
```

然后使用 Groovy，您可以通过以下方式获得结果：

```
 matcher[0][0] 
```

[这是一个解释页面。](http://groovy.codehaus.org/Tutorial+5+-+Capturing+regex+groups)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:58:50.587

你有没有尝试过：

```
def m = lines =~ /(?m)^search\.index\.(\d+)/
m[ -1 ][ 1 ] 
```**

# sql - 需要帮助在 codeigniter 中转换这段代码

> ID：16186320
> 
> 赞同：-2
> 
> 时间：2013-04-24T06:49:05.110
> 
> 标签：sql, codeigniter

谁能帮我转换一下？

```
SELECT  id,ospos_people.first_name,ospos_people.last_name,customer_id,is_draft 
from
(SELECT  
          ospos_quotations.id,
          ospos_quotations.customer_id, 
          ospos_quotations.is_draft,
          ospos_quotations.date 
 from     ospos_quotations, ospos_quotation_items
 where  ospos_quotations.id= ospos_quotation_items.quotation_id 
 and ospos_quotation_items.line=1) AS T 
LEFT OUTER JOIN ospos_people on T.customer_id = ospos_people.person_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:51:32.437

也许：

```
$sql = 'SELECT  id,ospos_people.first_name,ospos_people.last_name,customer_id,is_draft 
from
(SELECT  
          ospos_quotations.id,
          ospos_quotations.customer_id, 
          ospos_quotations.is_draft,
          ospos_quotations.date 
 from     ospos_quotations, ospos_quotation_items
 where  ospos_quotations.id= ospos_quotation_items.quotation_id 
 and ospos_quotation_items.line=1) AS T 
LEFT OUTER JOIN ospos_people on T.customer_id = ospos_people.person_id';

$this->db->query($sql);

// OR 

$this->db
    ->select('id,ospos_people.first_name,ospos_people.last_name,customer_id,is_draft')
    ->from('(SELECT  
          ospos_quotations.id,
          ospos_quotations.customer_id, 
          ospos_quotations.is_draft,
          ospos_quotations.date 
 from     ospos_quotations, ospos_quotation_items
 where  ospos_quotations.id= ospos_quotation_items.quotation_id 
 and ospos_quotation_items.line=1) AS T', false)
    ->join('ospos_people', 'T.customer_id = ospos_people.person_id', 'left outer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:11:58.553

我已将您的查询转换为像这样更优化

```
SELECT
  id,
  ospos_people.first_name,
  ospos_people.last_name,
  customer_id,
  is_draft
from (SELECT
    ospos_quotations.id,
    ospos_quotations.customer_id,
    ospos_quotations.is_draft,
    ospos_quotations.date
      from ospos_quotations
    LEFT JOIN ospos_quotation_items
      ON ospos_quotations.id = ospos_quotation_items.quotation_id
      where ospos_quotation_items.line = 1) AS T
  LEFT OUTER JOIN ospos_people
    on T.customer_id = ospos_people.person_id 
```

在这个内部查询中，我使用了 join 而不是 FROM table1, table2

您可以像这样转换查询

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样。转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
function myquery()
{
    $select =   array(
                    'ospos_quotations.id',
                    'ospos_quotations.customer_id', 
                    'ospos_quotations.is_draft',
                    'ospos_quotations.date'
                );
    $this->db->select($select);
    $this->db->from('ospos_quotations');
    $this->db->join('ospos_quotation_items','ospos_quotations.id= ospos_quotation_items.quotation_id ','left');
    $this->db->where('ospos_quotation_items.line',1);
    $subQuery = $this->db->_compile_select(); // get query string

    $this->db->_reset_select(); // reset the object to write new query

    unset($select);

    $select =   array(
                    'id',
                    'ospos_people.first_name',
                    'ospos_people.last_name',
                    'customer_id,is_draft' 
                );
    $this->db->select($select);             
    $this->db->from("($subQuery) AS T");
    $this->db->join('ospos_people','T.customer_id = ospos_people.person_id ','left outer');
    return $this->db->get()->result();
} 
```

事情就完成了。干杯！！！注意：在使用子查询时，您必须使用

```
$this->db->from('table_name') 
```

代替

```
$this->db->get('table_name') 
```

运行查询。

编辑：

这是另一种方法。简单使用`$this->db->query($query)`函数

```
function myquery()
{
    $query  =   "   SELECT
                      id,
                      ospos_people.first_name,
                      ospos_people.last_name,
                      customer_id,
                      is_draft
                    from (SELECT
                        ospos_quotations.id,
                        ospos_quotations.customer_id,
                        ospos_quotations.is_draft,
                        ospos_quotations.date
                          from ospos_quotations
                        LEFT JOIN ospos_quotation_items
                          ON ospos_quotations.id = ospos_quotation_items.quotation_id
                          where ospos_quotation_items.line = 1) AS T
                      LEFT OUTER JOIN ospos_people
                        on T.customer_id = ospos_people.person_id";
    return $this->db->query($query)->result();  
} 
```

# javascript - 如果没有叶节点，则单击 li 将其附加到另一个 div

> ID：16186321
> 
> 赞同：1
> 
> 时间：2013-04-24T07:46:03.640
> 
> 标签：javascript

我有一个 Activity xml 文件，当单击子显示的活动时，我尝试从活动中获取。它看起来像所有点击的结束。

```
 <ul id="firstLevelChild">
<ul id="ul">
    <li id="4">Activities
        <ul class="ul">
            <li id="10066">Physical1
                <ul class="ul">
                    <li id="10067">Cricket
                        <ul class="ul">
                            <li id="10068">One Day</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
</ul> 
```

现在我希望如果 li 没有叶节点，那么它会显示在另一个 div 中。就像是：

点击`Acitivities`那里有子节点`Physical1`，还有孩子`Cricket`，现在有一天，当点击我的显示`One Day`时没有孩子`one day``<div id="result"></div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:27:05.043

我会将其添加为评论，但我没有足够的代表。`ChildNodes()`不是一个函数——因为看起来你正在使用 jQuery，所以试试吧[`children()`](http://api.jquery.com/children/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:56:16.977

我认为 javascript 可以帮助你。您首先正确构建 DOM 的事实的一部分；）

如果当前元素节点有子节点，hasChildNodes() 方法返回 TRUE，否则返回 FALSE。

[http://www.w3schools.com/dom/met_element_haschildnodes.asp](http://www.w3schools.com/dom/met_element_haschildnodes.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:30:46.190

假设您提供的标记将始终是 ie `ul`as child for all `li`。您只需检查`ul`当前`li`. 见[小提琴](http://jsfiddle.net/anpsmn/aqmQN/3/)

**HTML**

```
<div id="content">
    <ul id="firstLevelChild">
       <li>
        <ul id="ul">
            <li id="4">Activities
                <ul class="ul">
                    <li id="10066">Physical1
                        <ul class="ul">
                            <li id="10067">Cricket
                                <ul class="ul">
                                    <li id="10068">One Day</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
           </ul>
        </li>
    </ul>
</div>

<h2>Result</h2>

<ul id="result"></ul> 
```

**JS**

```
$('#content li').each(function (i) {

    //for display purpose only
    $('#content').append('<span class="list">li(' + i + '):' + $('ul', $(this)).length + '</span>');

    //the code you needed
    if ($('ul', $(this)).length < 1) {
        $(this).on('click', function () {
          $('#result').append($(this).parent().html());
        });
    }
}); 
```

# wpf - 带有 MVVM 灯的命令参数

> ID：16186322
> 
> 赞同：1
> 
> 时间：2013-04-24T07:46:09.610
> 
> 标签：wpf, command, mvvm-light, datacontext, commandparameter

我正在尝试让 RelayCommand 与使用 MVVM Light 的 CommandParameter 一起工作。该命令在我的视图模型中定义，我想将选定的 ListBox 项作为参数传递。命令已绑定，但参数未绑定。这可能吗？

```
<UserControl x:Class="Nuggets.Metro.Views.EmployeeListView"
         ...
         DataContext="{Binding EmployeeList,Source={StaticResource Locator}}">
   <ListBox x:Name="lstEmployee" ItemsSource="{Binding EmployeeItems}" Style="{StaticResource EmployeeList}" Tag="{Binding EmployeeItems}">
        <ListBox.ContextMenu>
            <ContextMenu DataContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Self}}">
                <MenuItem Header="Edit item" Command="{Binding EditEmployeeCommand}" CommandParameter="{Binding PlacementTarget.SelectedItem,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"/>
                <MenuItem Header="Delete item" Command="{Binding DeleteEmployeeCommand}" CommandParameter="{Binding PlacementTarget.SelectedItem,RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}"/>
            </ContextMenu>
        </ListBox.ContextMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:55:07.910

~~这应该工作~~

 ~~```
<ContextMenu DataContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Self}}">
  <MenuItem Header="Edit item" 
            Command="{Binding EditEmployeeCommand}" 
            CommandParameter="{Binding SelectedItem,ElementName=lstEmployee}"/>
  <MenuItem Header="Delete item" 
            Command="{Binding DeleteEmployeeCommand}"
            CommandParameter="{Binding SelectedItem,ElementName=lstEmployee}"/>
 </ContextMenu> 
```~~ 

~~在 CommandParameter 的绑定中使用 ListBox 的 Name 和 ElementName，并将路径设置为 SelectedItem。~~

**更新：**

上面的代码不适用于 ListBox 和 ContextMenu，因为它们属于不同的可视化树。结果是

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=lstEmployee'. BindingExpression:Path=SelectedItem; DataItem=null; target element is 'MenuItem' (Name=''); target property is 'CommandParameter' (type 'Object') 
```

以下 XAML 完成了这项工作。使用 ContextMenu 的 PlacementTarget（即 ListBox）。

```
<ContextMenu DataContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Self}}">
  <MenuItem Header="Edit item" 
            Command="{Binding EditEmployeeCommand}" 
            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItem}"/>
  <MenuItem Header="Delete item" 
            Command="{Binding DeleteEmployeeCommand}"
            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItem}"/>
</ContextMenu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T04:04:59.650

这适用于带有 MVVM 的 TreeView 或 ListView。ContextMenu 中的 PlacementTarget 是（这里）Listview

```
<ListView.ContextMenu>
  <ContextMenu>
     <MenuItem x:Name="OpenExplorer"Header="ShowFolder"                  
      Command="{Binding ShowExplorer}"
      CommandParameter ="{Binding Path=PlacementTarget.SelectedItem,
            RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
   </ContextMenu>
</ListView.ContextMenu> 
```

# forms - 基于单选按钮和复选框的表单重定向？

> ID：16186327
> 
> 赞同：-2
> 
> 时间：2013-04-24T07:46:22.033
> 
> 标签：forms, checkbox, radio-button, calculator

如何创建一个表单，根据用户选择的内容将用户重定向到不同的 URL？

该表单将与[https://www.dropbox.com/upgrade](https://www.dropbox.com/upgrade)非常相似，其中您有 3 个主要单选按钮、每月或每年单选按钮和一个用于附加组件的复选框。

该表格还将计算选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:57:56.400

在没有看到任何代码的情况下，您可以执行此操作的最简单方法是对单选按钮使用 onclick 事件，该事件将更新表单操作属性。一个粗略的例子是：

```
<html>
<head></head>
<body>
<form onsubmit="submitForm();" id="myForm" type="get">
<input type="radio" name="myRadio1" data-op="0" value="10" onclick="calcNow();" selected />Monthly&nbsp;
<input type="radio" name="myRadio1" data-op="1" value="120" onclick="calcNow();" />Annually<br/>
<input type="radio" name="myRadio2" data-op="0" value="10" onclick="calcNow();" selected />Option A&nbsp;
<input type="radio" name="myRadio2" data-op="1" value="20" onclick="calcNow();" />Option B<br/>
<input id="myCheckbox" name="myCheckbox" type="checkbox" value="10" onclick="calcNow();" />Add-on<br/>
<input id="myTotal" name="myTotal" type="text" value="" disabled="disabled" /><br/>
<input type="button" id="myButton" onclick="submitForm();" value="Continue" />
</form>
<script type="text/javascript">
var pages = [[["page1.html","page2.html"],["page3.html","page4.html"]],[["page5.html","page6.html"],["page7.html","page8.html"]]];

function calcNow()
{
    var cb = document.getElementById("myCheckbox");
    var cost1 = getRadioValue("myRadio1");
    var cost2 = getRadioValue("myRadio2");
    var cost3 = cb.checked ? parseInt(cb.value) : 0;
    var costTotal = cost1 + cost2 + cost3;
    document.getElementById("myTotal").value = costTotal;

    var op1 = getRadioData("myRadio1", "op");
    var op2 = getRadioData("myRadio2", "op");
    var op3 = cb.checked ? 1 : 0;

    if (op1 != undefined && op2 != undefined && op3 != undefined)
    {
        return pages[op1][op2][op3];
    }
    return undefined;
}

function submitForm()
{
    var page = calcNow();
    if (page != undefined)
    {
        // ---- To popup ----
        //alert(page);
        // ---- To navigate ----
        location.href = page;
        // ---- To alter post ----
        //var form = document.getElementById("myForm");
        //form.action = page;
        //form.submit();
    }
    else
    {
        alert("Please answer all questions.");
    }
}

function getRadioValue(name)
{
  var controls = document.getElementsByName(name);
  for (var i = 0; i < controls.length; i++) {
      if (controls[i].checked) {
          return parseInt(controls[i].value);
      }
  }
  return 0;
}

function getRadioData(name, attribute)
{
  var controls = document.getElementsByName(name);
  for (var i = 0; i < controls.length; i++) {
      if (controls[i].checked) {
          return parseInt(controls[i].dataset[attribute]);
      }
  }
  return undefined;
}
</script>
</body>
</html> 
```

请注意，这是非常基本的 html 和 javascript，因此如果您遇到问题，您可能需要与网页设计师联系。这部分很简单！

# selenium - sendKeys() 不适用于表格列 webelement

> ID：16186332
> 
> 赞同：0
> 
> 时间：2013-04-24T07:46:43.883
> 
> 标签：selenium

**问题：**无法在表中使用 sendKeys。

**我在做什么：**我有从 dojo 创建的表。能够获取列，当我打印它们时，我可以看到每列的值。我想为一列设置值，在我的情况下这是第二个值，我想将它设置为“testselenium”字符串。sendkeys 正常工作，但在这种特殊情况下不能正常工作。

我正在使用 Java 使用 selenium 进行测试。

以下是我正在尝试使用的一段代码。

```
<pre><code>

    List<WebElement> findElements = driver
            .findElement( By.xpath("//div[starts-with(@id,'mytable')]"))
            .findElement( By.xpath("//div[starts-with(@class,'dojoxGridContent')]"))
            .findElements(By.tagName("td"));

    // Got the column elements

    Iterator<WebElement> iterator = findElements.iterator();
    int counter = 0;
    // Iterating over column i.e. td elements
    while(iterator.hasNext()){
        counter++;
        WebElement next = iterator.next();
        if(counter == 2){
            Actions action = new Actions(driver);
            action.doubleClick(next);
            action.perform();
            next.sendKeys("testselenium");
            break;
        }
        System.out.println(next.getText());
    }

</pre></code> 
```

有没有人有同样的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:27:22.960

```
<pre>
if(counter == 2){
Actions action = new Actions(driver);              
action.doubleClick(next);                        
**action.sendKeys("testselenium");**
action.perform();
break;
}     
</pre> 
```

在执行呼叫之前使用操作中的 sendKeys 对我有用。

# wordpress - Woocommerce 在购物车和订单页面中自定义产品名称

> ID：16186334
> 
> 赞同：3
> 
> 时间：2013-04-24T07:46:45.400
> 
> 标签：wordpress, cart, woocommerce

实际上，我已经开始在购物车页面和所有其他页面中自定义价格。

这是定制产品价格的钩子

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart_object ) {
    $custom_price = 10; // This will be your custome price  
    foreach ( $cart_object->cart_contents as $key => $value ) {
        $value['data']->price = $custom_price;
    }
} 
```

实际上，我正在使用 woocommerce 插件。我想要一个挂钩来自定义购物车页面和购物车页面旁边的所有其他页面中显示的产品名称。

我想自定义产品名称，我想将一些静态属性添加到购物车页面、订单页面、订单详细信息页面和购物车页面旁边的所有页面中显示的产品名称。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T13:49:03.080

我想分享这个，因为我设法找到了一些满足我需求的东西。**（我的订单中只有一件商品，因为我已经为假日预订定制了 WooCommerce。）**

```
<?php
add_action( 'woocommerce_product_title', 'add_custom_name' );
function add_custom_name( $title ) {
    return 'test name';
}
?> 
```

希望有人可以进一步详细说明这一点，或者将自定义价格代码所做的事情正确地重新用于产品名称。

# python - PyAPNS 未在生产环境中向 iOS 设备传递推送消息

> ID：16186336
> 
> 赞同：2
> 
> 时间：2013-04-24T07:46:51.637
> 
> 标签：python, iphone, ios, apple-push-notifications

自昨天（2013-04-23）以来，尽管开发工作正常，但我们在通过 APNS 的生产网关发送通知时遇到了问题。

我没有对发送消息的代码进行更改，所以看到它刚刚停止工作很奇怪。

这是有效载荷：

```
{"driver_pk":"505978566e77c33341000610","booking":{"pk":"5164d705b6c1213479c2fe5b"},"aps":{"sound":"booking_new_offer","alert":{"loc-key":"MSG_NB"}},"creation":"2013-04-24T07:44:28+00:00","type":"new-booking","param":{}} 
```

如你们所见，大小为 220（小于 256），这是一个简单的 ASCII 字符串，根本没有特殊字符。

使用 pyapns 库完成发送工作：[https](https://pypi.python.org/pypi/apns) ://pypi.python.org/pypi/apns在最新版本 1.1.2 中（也尝试过之前的 1.1.1 等）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:44:56.257

如果它已经在生产中工作，您应该检查您的生产推送证书是否已过期，如果已过期，请创建一个新的。

如果它从未在生产环境中工作，您应该确保在推送到生产 apns 服务器时使用生产证书和生产设备令牌。

编辑 ：

测试开发通知后，生产通知是否停止工作？如果是这种情况，问题可能是您的数据库同时包含沙盒和生产设备令牌，并且将沙盒设备令牌发送到生产 APNS 服务器将断开连接，这也可能导致在坏消息之后发送的好消息到被丢弃。

# c# - 未安装 Visual Studio 时 C# Form 自动关闭

> ID：16186353
> 
> 赞同：-2
> 
> 时间：2013-04-24T07:47:45.670
> 
> 标签：c#, winforms, .net-4.0, installation, installshield

我用 .Net4 和 C# 编写了一个应用程序，并将其部署到带有安装屏蔽的用户系统。

在我更改了几行代码后，我的一个Winform 会**自动**在**具有 .Net4**但未安装**Visual Studio的****客户端系统**中正确处理** 。

 ******所有先决条件均已安装，并且以前可以正常工作...**

如果我在客户端系统中安装 Visual Studio，它将完美运行。我试图调试它，但 Visual Studio 没有发现任何异常。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:51:49.273

表单可能包含客户端系统中不存在的组件。

这取决于您部署应用程序的方式。

**一般方式是：**

1.  安装框架。

2.  将调试文件夹复制粘贴到客户端系统。

3.  将快捷方式带到桌面。

**或者**

1.  只需发布应用程序。

2.  将粘贴发布文件夹复制到客户端的系统。

3.  执行发布设置。

4.  将快捷方式带到桌面。

它以这种方式工作。

希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:34:08.420

您在用户机器上写了 .Net 4 客户端框架已安装。尝试卸载它并安装完整的 .Net 4 框架（这里是[MS 下载站点的链接](http://www.microsoft.com/en-us/download/details.aspx?id=17718)）。

您添加的那 2 行现在可能会引用仅在完整的 .Net 4 安装中可用的功能。（不幸的是，您没有发布这些行，所以我们只能猜测问题所在）。

安装了完整的 Visual Studio .Net 4，可能正因为如此，您的应用程序在 VS 安装后开始工作。

有关更多详细信息，请参阅[.NET 4 客户端配置文件和完整框架下载之间的区别](https://stackoverflow.com/questions/2759228/difference-between-net-4-client-profile-and-full-framework-download)。****

# c++ - SIFT算法中奇怪的八度值？

> ID：16186361
> 
> 赞同：4
> 
> 时间：2013-04-24T07:48:01.853
> 
> 标签：c++, opencv, image-processing, computer-vision, sift

我在 opencv 代码中使用 sift 算法从图像中获取描述符和关键点。我的代码是

```
 Ptr<IplImage> image;
    vector<KeyPoint> keypoints;
    OutputArray des;

    Feature2D *descriptor_type = new SIFT()
    Mat image_mat(image);
    (*descriptor_type)(image_mat,noArray(),keypoints,des,false); 
```

在这里，我可以在矢量 < KeyPoint > 中获取图像的关键点。之后，我想获取每个关键点的八度音以获取更多详细信息。但是当我为一张图像计算每个关键点八度音值时，我想要的似乎很奇怪来确认他们是否正确。

```
for(int i=0;i<keypoints.size();i++)
{
     cout<< (keypoints[i].octave) <<endl;
}

9765375
9765375
2621951
8323583
13763071
6488575
12845567
721407
3604991
12321279
9568767
7406079
8585727
4653567
7799295
7799295
5112319
10486271
9961983
6226431
1245951 
```

如果我将 SIFT 算法更改为 SURF 算法，它会没问题并且看起来是正确的。

```
0
0
0
0
0
0
1
0
0
0
0
1
1
1
0
1
1
1
0
0
1
0 
```

所以想问下SIFT算法中Octave值的计算在opencv中是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-12T14:51:32.930

刚看到[这个链接](https://groups.google.com/forum/#!topic/javacv/E9xngMMwVW4)。

似乎`octave`SIFT 关键点的值需要“修补”：

```
keyPoint.octave = keyPoint.octave & 0xFF; 
```

# java - Java 从 txt 文件中读取向量会出错

> ID：16186368
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:48:21.633
> 
> 标签：java, vector, compiler-errors

我正在尝试将矢量写入和读取文本文件。我创建了一个类 WriteVectorToFile（如下所示），它创建了一个包含名为 Car 的类的对象的向量。Car 类实现了 Serializable 并且仅包含带有 setter 和 getter 方法的信息。在 WriteVectorToFile 类中，我创建了一个 createVector() 方法和 writetoFile() 方法，它们可以工作。readtoFile() 方法中的问题，它给出了一个错误（如下所列）。我想知道我做错了什么以及导致问题的原因。

```
The error :
java.lang.NullPointerException
    at WriteVectorToFile.readtoFile(WriteVectorToFile.java:73)
    at WriteVectorToFile.main(WriteVectorToFile.java:110)
    at __SHELL1.run(__SHELL1.java:6)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at bluej.runtime.ExecServer$3.run(ExecServer.java:725) 
```

代码：

```
import java.io.*;
import java.util.Vector;

public class WriteVectorToFile{

    private Car car1; 
    private Vector garage;
    private File myFile;
    private FileOutputStream out;
    private FileInputStream in;
    private ObjectInputStream objin;
    private ObjectOutputStream objout;

  public WriteVectorToFile(){

      this.myFile = new File("E:/JAVA/My Java Programs/MyVectorFile.txt");

      try{
        myFile.createNewFile();
        System.out.println("New File --> Success.");
      }catch(IOException e){
        e.printStackTrace();
        System.out.println("New File --> Fail.");
      }   

    }

    private void writetoFile(){
       try{
           out = new FileOutputStream(myFile);
           objout = new ObjectOutputStream(out);

        }catch(FileNotFoundException e){ 
           e.printStackTrace();
        }catch (IOException e){
           e.printStackTrace();
        }

        try{
         objout.writeObject(garage);
         objout.close();
         System.out.println("Write File --> Success.");
       }catch(IOException e){
         System.out.println("Write File --> Fail.");
         e.printStackTrace();
        }

    }

    private void readtoFile(){
       try{
         FileInputStream in = new FileInputStream(myFile);
         ObjectInputStream objin = new ObjectInputStream(in);
       }catch(FileNotFoundException e){ 
          e.printStackTrace();
       }catch(IOException e){
          e.printStackTrace();
       }

       // Object obj = null;
       Vector tempVec = new Vector();

       try{ 

    ERROR Line 73 : tempVec = (Vector) objin.readObject(); 
          objin.close();
          System.out.println("Read File --> Success.");

        }catch(Exception e){

          System.out.println("Read File --> Fail.");
          e.printStackTrace();

        }

       //Car tempg = new Car();
       //tempg = (Car) vecNew.firstElement();

       //System.out.println(tempg.toString());
       //System.out.println(((Car)(vecNew.firstElement())).toString());

    }

    private void createVector(){

       this.garage = new Vector();
       // To create a vector with a specific datatype add <type>
       // Vector garage = new Vector<Car>();

       car1 = new Car("3245","Toyota","Ferry23",(double)34500);
       this.garage.add(car1);
       this.garage.add(new Car("3232","Fiat","MozoZ3",(double)25000));
       this.garage.add(new Car("2345","Mazda","ZenFix",(double)13700));

    }

    public static void main (String[] args){

       WriteVectorToFile test = new WriteVectorToFile();
       test.createVector();
       test.writetoFile();
       test.readtoFile();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:54:53.777

因为您已将 `private ObjectInputStream objin;`as 实例变量定义为`null`. 所以当你调用`objin.readObject();`on时`null`会抛出`NullPointerException`. 在该`readtoFile()`方法中，您可以执行以下操作：

```
try{
     FileInputStream in = new FileInputStream(myFile);
     ObjectInputStream objin = new ObjectInputStream(in);
   }catch(FileNotFoundException e){ 
      e.printStackTrace();
   }catch(IOException e){
      e.printStackTrace();
   } 
```

这定义了一个新的本地`ObjectInputStream objin = new ObjectInputStream(in);`内部 try 块，它对外部`tempVec = (Vector) objin.readObject();`try-catch 块的代码是不可见的。这里`objin`指的是在实例级别声明的实例变量，它是`null`. 为了纠正它改变

```
ObjectInputStream objin = new ObjectInputStream(in); 
```

到

```
objin = new ObjectInputStream(in); 
```

在 try 块内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:45:02.010

首先，很抱歉，因为我无法将其作为评论发布，所以将其放入答案块中：

您的问题是涉及 try-catch 块的范围不匹配。如果您使用过任何 C++，则对象是按值或引用传递的，因此可以非常方便地避免这种情况。但是 Java 通过值传递所有内容，所以当你这样做时：

```
 try{
     FileInputStream in = new FileInputStream(myFile);
     ObjectInputStream objin = new ObjectInputStream(in);
   }catch(FileNotFoundException e){ 
      e.printStackTrace();
   }catch(IOException e){
      e.printStackTrace();
   } 
```

该对象`objin`是在 try-catch 范围内创建的，当您在以下情况下使用它时*并不相同：*

```
tempVec = (Vector) objin.readObject(); 
      objin.close();
      System.out.println("Read File --> Success.");

    }catch(Exception e){

      System.out.println("Read File --> Fail.");
      e.printStackTrace();

    } 
```

因此，解决方案是将所有内容放在一个“尝试”块中，并分别捕获所有异常（甚至一起使用 Exception 作为超类 [不是一个好习惯]）。这应该可以完成这项工作。告诉我们你是否设法解决它。

# ruby-on-rails - 每次启动时出现本地主机错误

> ID：16186374
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:48:49.707
> 
> 标签：ruby-on-rails, google-chrome, localhost

每次我启动 Chrome 时，它​​都会停顿一会儿，然后打开一个标签，地址栏显示“localhost:3000/user_sessions/new”，页面显示“此网页不可用。Google Chrome 与**localhost**的连接尝试被拒绝。”

我的电脑上有rails等，所以我使用localhost。会不会有关系？

它变得超级烦人。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:59:32.240

您的 chrome 设置为在启动时打开该页面（localhost:3000/user_sessions/new）。要删除它，您必须：

转到设置，然后在“启动时”下单击“打开特定页面或一组页面”旁边的“设置页面”。并删除该页面。

另一方面，如果您的 Rails 服务器停止，则 localhost:3000 将不会得到任何响应，因此它会告诉您该网页不可用。

如果您启动 rails 服务器然后打开 chrome，那么它会给您一些应用程序的响应。

# windows-8 - Windows 嵌入式 8 开发

> ID：16186377
> 
> 赞同：0
> 
> 时间：2013-04-24T07:48:57.043
> 
> 标签：windows-8, embedded

我是嵌入式 Windows 系列的新手，有一些问题。

首先，在 Windows 嵌入式系统上用于应用程序开发的最常用的编程语言是 C++ 还是 C#？

我想在[Windows Embedded 8 Standard](http://en.wikipedia.org/wiki/Windows_Embedded#Windows_Embedded_Standard)上开发一个简单的应用程序，以展示 GUI 元素的功能。使用哪个框架进行开发，开发工具有哪些？

我对创建图像主题并不真正感兴趣，更多的是如何创建在 Windows Embedded 8 系统上运行的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:58:57.697

C# 是“新”语言，更容易学习。许多公司仍然使用 C++，所以两个都学，也许从 C# 开始。

开发工具为 Visual Studio（可在 Microsoft 网站上免费下载）。它使用[.NET](http://en.wikipedia.org/wiki/.NET_Framework)框架。

如果你使用[MSDN](http://en.wikipedia.org/wiki/Microsoft_Developer_Network)，那里有很多教程和帮助。

您可以在*[Visual Studio Express 2012 产品](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)*上找到 Visual Studio 2012 。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:24:18.623

使用 Windows Embedded 的原因之一正是为了您可以使用 Windows 本身支持的任何语言。由于平台本身几乎没有任何限制，因此最合适的语言将在很大程度上取决于您的应用程序的性质，也许还有您员工的经验。

C# 是使用 .NET 框架的阻力最小的路径，而 C++ 和 C++/CLI 在大多数情况下支持更高的性能，但这些并不是唯一的选择。

在一般嵌入式系统中，C 和 C++ 很普遍，但这主要是由于在您的平台源自通用操作系统时不存在大小、性能和语言可用性限制。

# osgi - ServiceMix ESB 作为总线还是容器？

> ID：16186379
> 
> 赞同：0
> 
> 时间：2013-04-24T07:49:04.543
> 
> 标签：osgi, esb, apache-servicemix

我们应该使用 ServiceMix ESB 作为总线（即通信通道）还是作为容器来托管服务？

我目前的公司将服务（由 Java 构建的 JMS/SOAP/RESTFUL 等）托管在它们自己独立的容器/服务器等中，然后通过添加额外的绑定，它们中的每一个都通过 ServiceMix ESB 相互通信。

1.  这是一个正确的方法吗？
2.  我们是否应该将所有现有服务迁移为 OSGI 捆绑包，然后托管在 ServiceMix 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:37:39.467

我想说这更多地取决于您当前的系统环境。你如何处理故障转移等。我个人会将我的所有服务都放在那台机器上，如果需要路由，我会尝试执行“内存中”路由而不是执行外部服务调用，这样会快得多。另一方面，这又完全取决于您的应用程序堆栈的工作方式，以及您是否有“时间关键”服务调用，如果在同一个 jvm 中运行会更好。所以实际上不可能有一个“银弹”的方法。像往常一样，这取决于...

# c++ - 两个接口，多重继承合并到一个容器中？

> ID：16186380
> 
> 赞同：2
> 
> 时间：2013-04-24T07:49:08.533
> 
> 标签：c++, containers, multiple-inheritance, multiple-interface-implem

我偶然发现了以下问题：我有两个包 A 和 B 各自工作正常。每个都有自己的接口和自己的实现。现在我制作了一个包C，将A的适配器与B的具体实现相结合。C实际上只实现了A的接口，并且现在只是在内部继承和使用B的接口。大多数时候，只需要从容器访问接口 A 就足够了，但现在我也需要 B 中的方法可以访问。这是一个简单的例子：

```
//----Package A----
class IA 
{virtual void foo() = 0;}; 
// I cant add simply bar() here, it would make totally no sense here...

class A : public IA
{virtual void foo() {doBasicWork();} };

//----Package B----
class IB
{virtual void bar() = 0;};

class B1 : public IB
{
    //Some special implementation
    virtual void bar() {} 
};

class B2 : public IB
{
    //Some special implementation
    virtual void bar() {} 
};
// + several additional B classes  , with each a different implementation of bar()

//---- Mixed Classes
class AB1 : public B1, public A
{
void foo() {A::foo(); B1::bar();}
};

class AB2 : public B2, public A
{
void foo() {A::foo(); B2::bar();}
};

// One Container to rule them all: 
std::vector<IA*> aVec;
AB1 obj1;
AB2 obj2;

int main(){
    iAvector.push_back(&obj1);
    iAvector.push_back(&obj2);
    for (std::vector<IA>::iterator it = aVec.begin(); it != aVec.end(); it++)
    {
        it->for(); // That one is okay, works fine so far, but i want also :
//      it->bar(); // This one is not accessible because the interface IA 
                           // doesnt know it.
    }
    return 0;
}

/* I thought about this solution: to inherit from IAB instead of A for the mixed 
   classes, but it doesnt compile, 
stating "the following virtual functions are pure within AB1: virtual void IB::bar()"
which is inherited through B1 though, and i cant figure out where to add the virtual
inheritence. Example:

class IAB : public A, public IB
{
//  virtual void foo () = 0; // I actually dont need them to be declared here again,
//  virtual void bar () = 0; // do i? 

};

class AB1 : public B1, public IAB
{
    void foo() {A::foo(); B1::bar();}
};
*/ 
```

问题是，如何实现包 A 和 B 的组合，以便可以从一个容器访问两个接口，而 A 和 B 的所有实现细节仍然得到继承？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:13:51.867

显而易见的解决方案是创建一个组合接口：

```
class IAB : public virtual IA, public virtual IB
{
}; 
```

，拥有你的`AB1`并`AB2`从中派生（除了它们当前的派生），并保留`IAB*`在向量中。

这意味着`B1`并且`B2`还必须实际上源自 `IB`; 考虑到事情似乎正在发展的方向，`A`可能实际上也应该从`IA`.

有强烈的论点认为接口的继承应该始终是虚拟的。不用那么远：如果一个类被设计为派生自它，*并且*它具有基类，那么这些基类应该是虚拟的（并且可以说，如果一个类不是为了派生而设计的，则不应从它派生）。在您的情况下，您使用的是经典的 mixin 技术，通常，最简单的解决方案是让 mixin 中的所有继承都是虚拟的。

# ruby-on-rails - 使用`rails runner`为特定项目手动获取提交

> ID：16186385
> 
> 赞同：1
> 
> 时间：2013-04-24T07:49:32.220
> 
> 标签：ruby-on-rails, redmine

我对 ruby​​ on rails 完全不熟悉，所以这个问题可能是微不足道的。在 Redmine 文档[中，如何在提交时设置 Redmine 中的存储库的自动刷新，](http://www.redmine.org/projects/redmine/wiki/HowTo_setup_automatic_refresh_of_repositories_in_Redmine_on_commit)您可以阅读您可以使用的内容

```
/path_to_redmine/redmine/script/rails runner "Repository.fetch_changesets" -e production > /dev/null 2>&1 & 
```

而不是获取网址

```
curl "http://<redmine url>/sys/fetch_changesets?id=<project identifier>&key=<your service key>" 
```

但是缺少如何将项目 ID 传递给的信息，`rails runner`因此我只能获取给定项目标识符 ( `id=<project identifier>`) 的变更集。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T14:39:27.967

获取设置的 API 密钥，通过

```
./script/rails runner "puts Setting.sys_api_key" -e production 
```

获取这样的项目标识符列表

```
./script/rails runner 'Project.all.each {|p| puts "#{p}: id->#{p.id} identifier->#{p.identifier}"}' -e production 
```

# jquery - 如何在 jQuery UI 日期选择器中获取日期、月份、年份？

> ID：16186386
> 
> 赞同：24
> 
> 时间：2013-04-24T07:49:33.027
> 
> 标签：jquery, jquery-ui, datepicker

我有这个示例代码：

```
<div id="calendar"></div>
$(document).ready(function()  {
    $('#calendar').datepicker({
      dateFormat: 'yy-m-d',
      inline: true,
      onSelect: function(dateText, inst) { 
            var month = dateText.getUTCMonth();
            var day = dateText.getUTCDate();
            var year = dateText.getUTCFullYear();
            alert(day+month+year);
     } 
    });
}); 
```

当我运行代码时，出现错误。如何得到这个`(date, month, year)`？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-24T07:56:44.677

您可以使用方法**[getDate()](http://api.jqueryui.com/datepicker/#method-getDate)**：

```
$('#calendar').datepicker({
    dateFormat: 'yy-m-d',
    inline: true,
    onSelect: function(dateText, inst) { 
        var date = $(this).datepicker('getDate'),
            day  = date.getDate(),  
            month = date.getMonth() + 1,              
            year =  date.getFullYear();
        alert(day + '-' + month + '-' + year);
    }
}); 
```

**[小提琴](http://jsfiddle.net/VnbxH/)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-24T07:59:10.377

您好，您可以尝试查看此[jsFiddle](http://jsfiddle.net/VgL5p/)。

我使用了这段代码：

```
var day = $(this).datepicker('getDate').getDate();  
var month = $(this).datepicker('getDate').getMonth();  
var year = $(this).datepicker('getDate').getYear(); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T07:58:19.720

使用 javascript 日期对象。

```
$(document).ready(function()  {
    $('#calendar').datepicker({
      dateFormat: 'yy-m-d',
      inline: true,
      onSelect: function(dateText, inst) { 
            var date = new Date(dateText);
            // change date.GetDay() to date.GetDate()
            alert(date.getDate() + date.getMonth() + date.getFullYear());
     } 
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T16:08:04.100

那简单的方法呢）

```
$(document).ready ->
 $('#datepicker').datepicker( dateFormat: 'yy-mm-dd',  onSelect: (dateStr) ->
    alert dateStr # yy-mm-dd
    #OR
    alert $("#datepicker").val(); # yy-mm-dd 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-31T17:23:21.730

```
$("#date").datepicker('getDate').getMonth() + 1; 

```

日期选择器上的月份是基于 0 的 (0-11)，因此添加 1 以获得日期中出现的月份。

# python - 检查对象数组中的多个属性匹配

> ID：16186388
> 
> 赞同：1
> 
> 时间：2013-04-24T07:49:35.843
> 
> 标签：python, python-3.x

我有一个对象数组（它们都是相同的对象类型）并且它们具有多个属性，有没有办法返回一个较小的对象数组，其中所有属性都匹配一个测试用例，字符串，无论该属性类型是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T07:51:20.530

使用列表推导[`all()`](http://docs.python.org/3/library/functions.html#all)；以下假定`list_of_attributes`已预定义 a 以枚举您要测试的属性：

```
sublist = [ob for ob in larger_list if all(getattr(ob, attr) == 'some test string' for attr in list_of_attributes)] 
```

或者，如果您的输入列表很大，并且您只需要一个一个地访问匹配的元素，请使用生成器表达式：

```
filtered = (ob for ob in larger_list if all(getattr(ob, attr) == 'some test string' for attr in list_of_attributes))
for match in filtered:
    # do something with match 
```

或者您可以使用以下[`filter()`功能](http://docs.python.org/3/library/functions.html#filter)：

```
filtered = filter(lambda ob: all(getattr(ob, attr) == 'some test string' for attr in list_of_attributes)
for match in filtered:
    # do something with match 
```

[您可以使用函数](http://docs.python.org/3/library/functions.html#vars)`list_of_attributes`测试所有属性，而不是使用预定义的；这假定**所有**实例属性都需要测试：[`vars()`](http://docs.python.org/3/library/functions.html#vars)

 **```
all(value == 'some test string' for key, value in vars(ob)) 
```**

# linux - 使用 getopts (bash) 的多个选项参数

> ID：16186392
> 
> 赞同：9
> 
> 时间：2013-04-24T07:50:04.233
> 
> 标签：linux, bash, shell, unix, getopts

我正在尝试使用 bash 中的 getopts 处理命令行参数。要求之一是处理任意数量的选项参数（不使用引号）。

第一个示例（仅获取第一个参数）

```
madcap:~/projects$ ./getoptz.sh -s a b c
-s was triggered
Argument: a 
```

第二个例子（我希望它表现得像这样，但不需要引用参数”

```
madcap:~/projects$ ./getoptz.sh -s "a b c"
-s was triggered
Argument: a b c 
```

有没有办法做到这一点？

这是我现在拥有的代码：

```
#!/bin/bash
while getopts ":s:" opt; do
    case $opt in
    s) echo "-s was triggered" >&2
       args="$OPTARG"
       echo "Argument: $args"
       ;;
   \?) echo "Invalid option: -$OPTARG" >&2
       ;;
    :) echo "Option -$OPTARG requires an argument." >&2
       exit 1
       ;;
    esac
done 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-24T13:39:05.073

我认为您想要的是从单个选项中获取值列表。为此，您可以根据需要多次重复该选项，并将其参数添加到数组中。

```
#!/bin/bash

while getopts "m:" opt; do
    case $opt in
        m) multi+=("$OPTARG");;
        #...
    esac
done
shift $((OPTIND -1))

echo "The first value of the array 'multi' is '$multi'"
echo "The whole list of values is '${multi[@]}'"

echo "Or:"

for val in "${multi[@]}"; do
    echo " - $val"
done 
```

输出将是：

```
$ /tmp/t
The first value of the array 'multi' is ''
The whole list of values is ''
Or:

$ /tmp/t -m "one arg with spaces"
The first value of the array 'multi' is 'one arg with spaces'
The whole list of values is 'one arg with spaces'
Or:
 - one arg with spaces

$ /tmp/t -m one -m "second argument" -m three
The first value of the array 'multi' is 'one'
The whole list of values is 'one second argument three'
Or:
 - one
 - second argument
 - three 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-03-21T11:15:43.563

这是我使用用户定义函数执行此操作的方法：`getopts-extra`。

```
function getopts-extra () {
    declare i=1
    # if the next argument is not an option, then append it to array OPTARG
    while [[ ${OPTIND} -le $# && ${!OPTIND:0:1} != '-' ]]; do
        OPTARG[i]=${!OPTIND}
        let i++ OPTIND++
    done
}

# Use it within the context of `getopts`:
while getopts s: opt; do
    case $opt in
       s) getopts-extra "$@"
          args=( "${OPTARG[@]}" )
    esac
done 
```

getoptz.sh 的完整示例：

```
#!/usr/bin/env bash

function getopts-extra () {
    declare i=1
    # if the next argument is not an option, then append it to array OPTARG
    while [[ ${OPTIND} -le $# && ${!OPTIND:0:1} != '-' ]]; do
        OPTARG[i]=${!OPTIND}
        let i++ OPTIND++
    done
}

function main () {
    declare args
    declare OPTIND OPTARG opt
    while getopts :s: opt; do
        case $opt in
        s) getopts-extra "$@"
           args=( "${OPTARG[@]}" )
           ;;
       \?) echo "Invalid option: -$OPTARG" >&2
           ;;
        :) echo "Option -$OPTARG requires an argument." >&2
           exit 1
           ;;
        esac
   done

   declare i
   for i in "${!args[@]}"; do
       echo "args[$i]: ${args[i]}"
   done
}

main "$@"

exit 
```

测试：

```
bash getoptz.sh -s a b c 
```

输出：

```
args[0]: a
args[1]: b
args[2]: c 
```

此函数是名为[xsh-lib/core](https://github.com/xsh-lib/core)的 bash 库的一部分，可在语法中使用`xsh /util/getopts/extra`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T12:44:15.600

您可以自己解析命令行参数，但`getopts`不能将命令配置为识别单个选项的多个参数。[fedorqui 的建议](https://stackoverflow.com/a/7530327/1983854)是一个不错的选择。

这是自己解析选项的一种方法：

```
while [[ "$*" ]]; do
    if [[ $1 = "-s" ]]; then
        # -s takes three arguments
        args="$2 $3 $4"
        echo "-s got $args"
        shift 4
    fi
done 
```

# c# - 如何从 CSV 值实例化类对象？

> ID：16186393
> 
> 赞同：1
> 
> 时间：2013-04-24T07:50:07.800
> 
> 标签：c#, parsing, csv, windows-8, windows-runtime

您好我正在尝试使用 C# 在 Windows 8 App 中创建通用 CSV 解析器。我想创建一个解析器，当我传递 Type T 和字符串 CSV 和 Object 时，我应该让对象填充如下：

```
T obj = ParserCSV<T>(CSVString); 
```

目前，我能够在 MSDN 链接上获得该[http://code.msdn.microsoft.com/CSV-Parser-for-WinRT-42e0f4d0的示例](http://code.msdn.microsoft.com/CSV-Parser-for-WinRT-42e0f4d0)

在此我们解析 csv 字符串并获取键值对的集合。但是要转换为对象，我们需要找到特定的键并将其映射到对象。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:10:46.953

看一下[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)方法；这使用与指定参数最匹配的构造函数创建指定类型的实例。在您的情况下使用它的一个例子是

```
Activator.CreateInstance("myAssemblyName", "myType") 
```

所以如果你有以下课程

```
public class Person
{
    private string _name;
    public Person() { }
    public Person(string name)
    {
        this._name = name;
    }
    public string Name
    {
        get { return this._name; }
        set { this._name = value; }
    }
} 
```

您可以使用以下内容创建对象实例：

```
ObjectHandle handle = Activator.CreateInstance("PersonInfo", "Person");
Person p = (Person) handle.Unwrap();
p.Name = "Samuel";
Console.WriteLine(p); 
```

这将打印“塞缪尔”。在您的情况下，`KeyValuePair`您可以使用上述方法实例化相关对象。

我希望这有帮助。

* * *

*编辑。解决其他问题。*

```
Dictionary<String, String> someDict = new Dictionary<String, String>();
someDict = GetDictOfKvpFromCsv(); // Get the dictionary from your CSV.
foreach (KeyValuePair<String, String> kvp in someDict)
{
    ObjectHandle handle = Activator.CreateInstance(kvp.Key, kvp.Value);
    ISomeType t = (ISomeType)handle.Unwrap();
    // Do other stuff...
} 
```

# c++ - libvlc 流屏幕的一部分

> ID：16186401
> 
> 赞同：6
> 
> 时间：2013-04-24T07:51:06.300
> 
> 标签：c++, streaming, vlc, libvlc

我想使用 vlc 库流式传输屏幕的一部分。我写了一个小例子：

```
#include <iostream>
#include <cstdlib>

#include <vlc/vlc.h>

int main(int argc, char**argv)
{
    libvlc_instance_t * inst = libvlc_new(argc, argv);
    libvlc_vlm_add_broadcast(inst, "mybroad",
            "screen://", "#transcode{vcodec=h264, venc=x264,vb=0,scale=0, acodec=mpga,ab=128,channels=2, samplerate=44100}:http{mux=ffmpeg{mux=flv}, dst=:7777/}",
            0, NULL, 1, 0);
    libvlc_vlm_play_media(inst, "mybroad");
    std::cout << "ready" << std::endl;
    // next two lines - it just for waitint
    int i;
    std::cin >> i;
    // omit the code that frees libvlc
    return 0;
} 
```

这个代码流所有我的屏幕。如果我在控制台中进行，我可以流式传输屏幕的一部分：

```
vlc -I "dummy" screen:// --screen-left=0 --screen-top=0 \
   --screen-width=640 --screen-height=480 \
   --screen-fps=1 \
   --sout '#transcode{vcodec=h264,vb=800,scale=1,\
     acodec=mpga,ab=128,channels=2,\
     samplerate=44100}:http{mux=ts,dst=:7777/}' 
```

我尝试通过修改一行来在代码中做到这一点：

```
libvlc_vlm_add_broadcast(inst, "mybroad",
                "screen:// :screen-fps=24 :screen-top=0 :screen-left=0 :screen-width=320 :screen-height=240", 
               "#transcode{vcodec=h264,venc=x264, vb=0,scale=0,acodec=mpga,ab=128,channels=2, samplerate=44100}:http{mux=ffmpeg{mux=flv},dst=:7777/}",
                0, NULL, 1, 0); 
```

但是这个修改并没有改变什么。

老实说，我想从一台显示器流式传输（我有两台显示器），但我可以计算显示器的范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:44:44.093

我找到了解决方案。

```
#include <iostream>
#include <cstdlib>

#include <vlc/vlc.h>

int main(int argc, char**argv)
{
    // the array with parameters
    const char* params[] = {"screen-top=0", 
                            "screen-left=0",
                            "screen-width=640", 
                            "screen-height=480", 
                            "screen-fps=10"}; 
    libvlc_instance_t * inst = libvlc_new(argc, argv);
    libvlc_vlm_add_broadcast(inst, "mybroad",
            "screen://", 
            "#transcode{vcodec=h264,vb=800,scale=1,acodec=mpga,ab=128,channels=2,samplerate=44100}:http{mux=ts,dst=:7777/}",
            5, params, // <= 5 == sizeof(params) == count of parameters
            1, 0);
    libvlc_vlm_play_media(inst, "mybroad");
    std::cout << "ready" << std::endl;
    int i;
    std::cin >> i;
    return 0;
} 
```

# javascript - AngularUI 中的 Accordian 标题图像

> ID：16186404
> 
> 赞同：2
> 
> 时间：2013-04-24T07:51:08.643
> 
> 标签：javascript, jquery, angularjs

所以我目前正在将我的项目从 jQuery 移植到 AngularJS，我在 jQuery 中有以下代码

**jQuery 代码**

```
$(document).ready(function()
{
    var icons = {
      header: "ui-icon-circle-arrow-e",
      activeHeader: "ui-icon-circle-arrow-s"
    };

    $( "#Session" ).accordion({
      icons: icons
    });
}); 
```

我在 AngularUI 中找不到任何图标选项。是否有任何解决方法可以在 AngularUI 手风琴中添加标题图像？试图为图标使用很棒的字体

```
<accordion-group heading="My Current Sessions" class="icon-book">
      <div>Content Goes here</div>
</accordion-group> 
```

上面的代码在相邻的行上有图标和标题，而不是在同一行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T11:31:45.580

如果您使用来自[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)的手风琴指令，并且希望在您的手风琴标题中有自定义 HTML，您可以使用`<accordion-heading>`里面的元素（而不是在属性`<accordion-group>`上中继）。`heading`

这是一个例子：

```
<accordion>
    <accordion-group>
      <accordion-heading>
        Put any HTML <strong>here</strong><i class="icon-book"></i>
      </accordion-heading>
      This content is straight in the template.
    </accordion-group>
  </accordion> 
```

和工作plunk：[http ://plnkr.co/edit/E4QtpTYpHkMmcZhUPZsK?p=preview](http://plnkr.co/edit/E4QtpTYpHkMmcZhUPZsK?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T13:06:49.400

要模拟 jquery-ui 行为并根据状态更改图标，您还可以使用手风琴组中的 is-open 属性。

这是一个对我有用的例子

```
<accordion close-others="false">

  <accordion-group is-open="section1.isOpen">
    <accordion-heading>
      <i ng-class="{true : 'icon-chevron-down', false : 'icon-chevron-right'}[!!section1.isOpen]"></i>
      <strong> SECTION 1</strong>
    </accordion-heading>
  CONTENT SECTION 1
  </accordion-group>
  <accordion-group is-open="section2.isOpen">
    <accordion-heading>
      <i ng-class="{true : 'icon-chevron-down', false : 'icon-chevron-right'}[!!section2.isOpen]"></i>
      <strong> SECTION 2</strong>
    </accordion-heading>
  CONTENT SECTION 2
  </accordion-group>

</accordion> 
```

[http://plnkr.co/edit/CODNWD7WiBHDfYHHuK7C?p=preview](http://plnkr.co/edit/CODNWD7WiBHDfYHHuK7C?p=preview)

# c - malloc() 返回一个空指针

> ID：16186406
> 
> 赞同：0
> 
> 时间：2013-04-24T07:51:11.037
> 
> 标签：c, malloc

我正在尝试一个 C 编程任务，我需要遍历文档每一行的每个索引，并在相应数组 ar 中的每个字符索引处设置一个整数值：

```
//Jagged array ar containing pointers to each row
int* ar[line_count];
//The size of each row is the line width * the size of an int ptr
const int line_size = max_width * sizeof(int*);

//For each line
for (i = 0; i < line_count; i++)
{
    //If the first runthrough, copy the blank array 
    if (i == 0)
    {
        ar[i] = malloc(line_size);
        memcpy(ar[i], blank_ar, line_size);
    }
    //Otherwise, copy from the last row
    else
    {
        ar[i] = malloc(line_size);
        //This is set to a null pointer after several runthroughs
        memcpy(ar[i], ar[i - 1], line_size);
    }
    //Edit the current row ar[i]
} 
```

唯一的问题是，经过大约 9 次迭代后，malloc 开始返回一个空指针，导致 memcpy（显然）无法工作。

发生这种情况有什么原因吗？我没有办法耗尽内存，因为我只分配了这些小数组 9 次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T08:01:07.010

`malloc`失败时将返回空指针。发生这种情况的一些明显原因：

*   您已用尽堆内存。`line_size`如果非常大，这是合理的。
*   你已经破坏了堆。如果您正在运行的代码中存在错误，但出于询问此问题的目的已将其删除，则可能会发生这种情况。

检查 的值`errno`以了解有关失败的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:52:10.287

也许您的堆栈太少，请尝试在 IDE 中在编译/链接时修改默认堆栈。如果您使用的是 GCC，请[在使用 GNU 编译器编译期间查看此 Change stack size for a C++ application in Linux](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)

# windows-ce - Windows CE 命令行 shell 字体大小的变化？

> ID：16186407
> 
> 赞同：1
> 
> 时间：2013-04-24T07:51:17.037
> 
> 标签：windows-ce, windows-embedded-compact

是否有机会更改 Windows CE 命令行 shell (\windows\cmd.exe) 的字体大小？我想使用较小的字体，以便在小型显示器（例如 320x240）上显示更多文本。

谢谢你的帮助。

问候，蒂姆。

# sql-server - 如果在 '.' 之后，请选择查询问题以打印第 1 个 2 十进制值 十进制值只有 '0' - SQL

> ID：16186409
> 
> 赞同：0
> 
> 时间：2013-04-24T07:51:25.397
> 
> 标签：sql-server, sql-server-2008, select, if-statement

我正在尝试打印

**条件 1：**我的十进制值 IF 十进制列后的第一个两位数。为 0。

```
EX:If Column value is 123.00000 = 123.00 
```

**条件 2：**如果 '.' 后面有一些值，我需要打印相同的十进制列值

```
EX: If Column value is 123.00200 = 123.00200
    If Column value is 123.10000 = 123.10000 
```

我试过以下查询。但没有得到预期的输出

```
SELECT
  CASE
  WHEN PARSENAME(dbo.tblS.DecColumn,1) > 1 THEN dbo.tblS.DecColumn
  ELSE cast(round(dbo.tblS.DecColumn,2) as numeric(36,2)) 
  END AS 'ColumnValue'
From
dbo.tblS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:03:04.623

让我们假设这个数据：

```
create table t ( n float);
insert into t values
( 1.00100),
( 1.0 ); 
```

查询将是：

```
select
   case cast( n as int ) 
      when n then str(cast( n as int )) + '.00'
      else cast( n as varchar)
   end
from t; 
```

[演示](http://sqlfiddle.com/#!3/7f617/7/0)

```
| SOURCE |        TARGET |
--------------------------
|  1.001 |         1.001 |
|      1 |          1.00 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:39:52.957

试试这个...

```
SELECT
      CASE
      WHEN (dbo.tblS.DecColumn-Cast(dbo.tblS.DecColumn as int))>0 THEN dbo.tblS.DecColumn
      ELSE cast(dbo.tblS.DecColumn as Decimal(36,2)
      END AS 'ColumnValue'
    From
    dbo.tblS 
```

# oracle - Oracle 中的日期时间比较

> ID：16186411
> 
> 赞同：0
> 
> 时间：2013-04-24T07:51:28.803
> 
> 标签：oracle, oracle11g, date-arithmetic

我正在我的存储过程中的几个日期之间进行比较。

```
 TODAY := TO_DATE(TO_CHAR(SYSDATE, 'DD-MON-YYYY') || 
             ' 09:00:00', 'DD-MON-YYYY HH24:MI:SS');

    IF PREVIOUS_DATE < TODAY AND 
       TO_DATE(CURRENT_DATE, 'DD-MON-YYYY HH24:MI:SS') >= TODAY THEN
        -- do something
    ELSE
        -- do something else 
```

当我设置`CURRENT_DATE = SYSDATE`时，它没有进入该`IF`部分。有人可以告诉我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:04:42.763

> “CURRENT_DATE 是 VARCHAR2 类型”

好吧，这破坏了我的第一个想法 8-)

~~但我认为问题在于您使用`CURRENT_DATE`. 假设是 Oracle 函数存在两个潜在问题：~~

~~*   CURRENT_DATE 是 DATE 数据类型，因此具有时间元素。把它定型是没有意义的。~~
2.  ~~CURRENT_DATE 返回为系统时区调整的值。这大概是您的 IF 测试的重点。但是你知道价值观是什么吗？~~

但它仍然是一个简单的调试任务。检查您的价值观以了解正在发生的事情。这是一个使用 DBMS_OUTPUT（又名 The Devil's Debugger）的示例，因为我不知道您是否在使用更好工具的环境中工作。

```
TODAY := trunc(sysdate) + 9/24;

dbms_output.put_line('TODAY = '||to_char(today, 'DD-MON-YYYY HH24:MI:SS'));
dbms_output.put_line('PREVIOUS_DATE = '||to_char(previous_date, 'DD-MON-YYYY HH24:MI:SS'));
dbms_output.put_line('CURRENT_DATE = '||current_date);

IF PREVIOUS_DATE < TODAY AND 
   to_date(CURRENT_DATE, 'DD-MON-YYYY HH24:MI:SS') >= TODAY
THEN 
    .... 
```

不妨同时简化您的代码。

请记住，要查看 DBMS_OUTPUT.PUT_LINE 的输出，您需要为您使用的任何客户端设置 SERVEROUTPUT ON。

* * *

顺便说一句，声明与 Oracle 内置函数同名的变量是不好的做法。这就是为什么在我们的声明中添加一个作用域前缀（`l_`对于本地、`p_`对于参数等）是个好主意。我们不必做完整的匈牙利语来获得很多好处。

# magento - 如何在 magento 管理面板中添加菜单？

> ID：16186418
> 
> 赞同：0
> 
> 时间：2013-04-24T07:51:50.343
> 
> 标签：magento, magento-1.7

我正在寻找有关如何执行以下操作的一些建议或信息。我想在 magento 管理面板中再添加一个菜单。我正在尝试很多方法但没有工作。我如何在管理面板中添加额外的一个菜单。请指教...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T12:19:43.383

如果这是您的自定义模块，您需要在 etc/config.xml 添加以下内容：

```
<adminhtml>
  <menu>
      <report>
        <children>
          <module name>
            <title>Title to show in the menu bar</title>
            <sort_order>0</sort_order>
            <action>Modules controller action</action>
          </module name>
        </children>
      </report>
    </menu>
 </adminhtml> 
```

上面的示例将在报告选项卡中添加一个新项目，并在控制器中触发一个动作来做某事。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:48:09.167

您可以使用自定义模块添加菜单下面的教程对我有很大帮助请点击[这里](http://www.pierrefay.com/magento-developper-guide-howto-tutorial-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T06:57:39.823

我正在创建一个模块。

info - 公司名称文件夹

ExtendedMenu - 模块名称

我正在模块文件夹中创建 2 个新文件夹。

等 & 块

etc 文件夹我正在创建 config.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Info_ExtendedMenu>
            <version>0.1.0</version>
        </Info_ExtendedMenu>
    </modules>
    <global>
        <blocks>
            <configurable>
                <class>Info_Configurable_Block</class>
            </configurable>
            <adminhtml>
                <rewrite>
                    <page_menu>Info_ExtendedMenu_Block_Adminhtml_Menu</page_menu>
                </rewrite>
            </adminhtml>
        </blocks>
        <blocks>
            <configurable>
                <class>Inchoo_Configurable_Block</class>
            </configurable>
        </blocks>
    </global>
</config> 
```

块 - Adminhtml - Menu.php

```
<?php
class Info_ExtendedMenu_Block_Adminhtml_Menu extends Mage_Adminhtml_Block_Page_Menu
{
    public function getMenuArray()
    {
        //Load standard menu
        $parentArr = parent::getMenuArray();

        //Prepare "View Sites" menu
        $parentArr['view_sites'] = array(
            'label' => 'Web2Print',
            'active'=>false ,
            'sort_order'=>0,
            'click' => 'return false;',
            'url'=>'#',
            'level'=>0,
            'last'=> true,
            'children' => array()
        );

        $app = Mage::app();

        $j = 0;

        $allWebsites = $app->getWebsites();
        $totalWebsiteCount = count($allWebsites) - 1;

        foreach ($allWebsites as $_eachWebsiteId => $websiteVal){
            $_storeName = $app->getWebsite($_eachWebsiteId)->getName();
            $baseUrl = $app->getStore($_eachStoreId)->getUrl();
            $_websiteUrl = array(
                            'label' => 'View Admin',
                            'active' => false ,
                            'click' => "var extraurl='w2p/admin/index.php';alert(this.href+extraurl); window.open(this.href+extraurl, 'Website - '+ this.href); return false;",
                            'sort_order' => $i++ * 10,
                            'level' => 2,
                            'url' => $baseUrl
                            );

            if(count($parentArr['view_sites']['children']) == $totalWebsiteCount){
                $_websiteUrl['last'] = true;
            } else {
                $_websiteUrl['last'] = false;
            }

            $parentArr['view_sites']['children'][$j - 1] = $_websiteUrl;

            $allStores = $app->getWebsite($app->getWebsite($_eachWebsiteId)->getId())->getStores();
            $totalCount = count($allStores);
            $i = 0;
            foreach ($allStores as $_eachStoreId => $val){
                $_websiteId = $app->getStore($_eachStoreId)->getWebsiteId();
                if($_websiteId == $j){
                    $_storeName = 'View Admin';
                    $baseUrl = $app->getStore($_eachStoreId)->getUrl();
                    $_websiteUrl = array(
                            'label' => $_storeName,
                            'active' => false ,
                            'click' => "var extraurl='w2p/admin/index.php';alert(this.href+extraurl); window.open(this.href+extraurl, 'Website - '+ this.href); return false;",
                            'sort_order' => $i++ * 10,
                            'level' => 2,
                            'url' => $baseUrl
                            );

                    if(count($parentArr['view_sites']['children'][$j - 1]['children']) + 1 == $totalCount or $totalCount == 0)
                        $_websiteUrl['last'] = true;
                        else
                        $_websiteUrl['last'] = false;

                    $parentArr['view_sites']['children'][$j - 1]['children'][$i] = $_websiteUrl;
                }
            }
        }
        return $parentArr;
    }
} 
```

您还需要转到 magento 基本文件夹路径 app-etc-modules-youemodule name(Inchoo_ExtendedMenu.xml)

```
<?xml version="1.0"?>
<config>
    <modules>
        <Inchoo_ExtendedMenu>
            <active>true</active>
            <codePool>local</codePool>
        </Inchoo_ExtendedMenu>
    </modules>
</config> 
```

菜单创建结束。干杯。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T08:08:55.887

什么菜单？你说的是扩展吗？

为了做到这一点，你有：`System > Magento connect > Magento connect manager`

**编辑：**

有一个扩展来管理这个，看看：[自定义菜单 Magento](http://www.magentocommerce.com/magento-connect/custom-menu.html)

# javascript - 如何防止我的堆叠系列出现倒序？

> ID：16186427
> 
> 赞同：24
> 
> 时间：2013-04-24T07:52:35.903
> 
> 标签：javascript, indexing, highcharts, series, stacked

我[在 JSFiddle 上尝试了一个堆叠系列的示例，](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-stacking-line/)但据我说，堆叠时系列是相反的：

```
$(function () {
    $('#container').highcharts({
        chart: {
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
        }, {
            data: [144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2]
        }]
    });
}); 
```

应首先绘制第一条蓝色线（一月：29.9），然后将第二条添加到这条线（一月：29.9 + 144 = 173.9）。

有没有办法在堆叠时以正确的顺序获得系列？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-03-25T09:48:22.313

由于这是谷歌的最高结果，也许这可以节省一些时间：

有`yAxis`一个`reversedStacks`参数（从版本 3.0.10 开始），`true`默认情况下。要自下而上构建堆栈，请将其设置为`false`. 这样，图例和共享工具提示项顺序保持正确。

[http://jsfiddle.net/r5upptLo/](http://jsfiddle.net/r5upptLo/)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-24T13:41:56.380

您可以通过可以在系列中设置的索引参数更改顺序。

[http://jsfiddle.net/KLttA/](http://jsfiddle.net/KLttA/)

```
series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        index:1
    }, {
        data: [144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2],
        index:0
    }] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-21T16:26:07.647

您可以使用系列的***legendIndex***参数：[http ://api.highcharts.com/highcharts#series.data.legendIndex](http://api.highcharts.com/highcharts#series.data.legendIndex)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T16:06:24.617

另一种方法是添加`.reverse()`到系列数组的末尾，参见[http://jsfiddle.net/sq9u6q5n/](http://jsfiddle.net/sq9u6q5n/)中的示例。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-20T18:08:40.873

您正在寻找的是`reversed`xAxis 或 yAxis。我试过`reversedStacks`了，但没有用，在查看文档后，我找不到它，所以假设它已被替换为`reversed`.

# java - Android 滑动菜单不适用于平板电脑；菜单就像在普通手机中一样（单击按钮时滑动）

> ID：16186431
> 
> 赞同：1
> 
> 时间：2013-04-24T07:52:41.713
> 
> 标签：java, android, menu, slidingmenu, android-sliding

我正在使用 jfeinstein10 - SlidingMenu。我已经使用普通手机实现了它，但是当我在平板电脑上尝试我的应用程序时，它仍然显示滑动按钮。我按照 ResponsiveUI 上的教程进行操作，但我的菜单仍然隐藏。我希望它在我使用平板电脑时永久显示。使用平板电脑时不应该自动调用 menu_frame.xml 吗？我尝试评论询问 menu_frame 是否为空的部分，以强制它在我的平板电脑中运行，但错误显示 menu_frame 未找到。我对滑动菜单的真正工作原理感到困惑。请帮忙！知道为什么它在平板电脑中会这样吗？这是我的源代码：

**BaseActivity.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState); 
getSupportActionBar().hide();
setContentView(R.layout.activity_base);

// check if the content frame contains the menu frame
if (findViewById(R.id.menu_frame) == null) {            
    setBehindContentView(R.layout.menu_frame);
    getSlidingMenu().setMode(SlidingMenu.LEFT);
    getSlidingMenu().setSlidingEnabled(true);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    getSlidingMenu().setBehindWidthRes(R.dimen.sidebar_default_width);          
} else {
    // add a dummy view
    Log.v("BaseActivity", "menu not null");
    View v = new View(this);
    setBehindContentView(v);
    getSlidingMenu().setSlidingEnabled(false);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
    getSlidingMenu().setBehindWidthRes(R.dimen.sidebar_no_width);
}

// set the Above View Fragment
if (savedInstanceState != null) {
    mContent = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
    mMenuPosition = savedInstanceState.getInt("menu_position");         
}
if (mContent == null) {
    mContent = new BirdsFragment();
    mMenuPosition = 0;
}   

getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, mContent)
    .commit();

// set the Behind View Fragment
getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.menu_frame, new MenuListFragment())
    .commit();

// customize the SlidingMenu
SlidingMenu sm = getSlidingMenu();
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadow);
    sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    sm.setFadeDegree(0.35f);
} 
```

**布局/activity_base.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"   
        tools:context=".BaseActivity">

<include layout="@layout/actionbar" />

<FrameLayout
    android:id="@+id/content_frame"
    android:layout_below="@id/actionbar"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

**布局/menu_frame.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:57:17.970

我终于得到了答案。当然 menu_frame 不能随便添加；您必须在 layout-large 和 layout-large-land 设置 xml，以便 menu_frame 出现在平板电脑上。

# iphone - 设备轮换在 IOS 6 中不起作用 在 IOS 5 中运行良好 我做错了什么吗？

> ID：16186432
> 
> 赞同：0
> 
> 时间：2013-04-24T07:52:42.387
> 
> 标签：iphone, cocoa-touch, ios5, ios6

```
-(BOOL)shouldAutorotate
{

    if (appDelegate.isOrientationSupport)
    {
        return YES;
    }
    else
    {
        return NO;
    }

}

-(NSInteger)supportedInterfaceOrientations{
    NSInteger mask = 0;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight])
        mask |= UIInterfaceOrientationMaskLandscapeRight;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeLeft])
        mask |= UIInterfaceOrientationMaskLandscapeLeft;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortrait])
        mask |= UIInterfaceOrientationMaskPortrait;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortraitUpsideDown])
        mask |= UIInterfaceOrientationMaskPortraitUpsideDown;
    return mask;
} 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:22:05.860

在 AppDelegate 中：

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  // iOS 6
{

return UIInterfaceOrientationMaskAll;
} 
```

在您的视图控制器中：

```
-(BOOL)shouldAutorotate {
return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
} 
```

# regex - 正则表达式：除 xyz.abc.com 或 @abc.com 外，查找 abc.com

> ID：16186436
> 
> 赞同：0
> 
> 时间：2013-04-24T07:52:44.870
> 
> 标签：regex

在 Eclipse 中，我想查找一个字符串，并在数百个不相关的结果中使用正常的搜索结果。所以我正在尝试使用正则表达式，但直到现在它们还没有给我正确的结果。

这就是我需要的：找到“abc.com”，而不是“xyz.abc.com”或“@abc.com”。为了清楚起见，它应该返回 www.abc.com。

我已经尝试了以下正则表达式，但我不确定这是否应该是这样的：

```
[^@xyz\.]abc.com 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:55:55.297

使用否定的lookbehind应该适合您的需求：

```
(?<!xyz[.]|@)abc[.]com 
```

*每个前面没有“xyz”的“abc.com”。也不是 "@"*。

# lucene - Lucene 术语查询

> ID：16186439
> 
> 赞同：1
> 
> 时间：2013-04-24T07:52:56.267
> 
> 标签：lucene

在我的应用程序中，我们有交易，每笔交易都有一个目标用户群，其中可能包括性别、年龄和城市等多个字段。对于性别部分，交易的目标可以是`MALE` `FEMALE`或`BOTH`。我想找到针对男性或两者的交易。我创建了以下查询，但它不起作用......

```
TermQuery maleQuery = new TermQuery(new Term("gender","MALE"));
TermQuery bothQuery = new TermQuery(new Term("gender","BOTH"));

BooleanQuery query = new BooleanQuery();
query.add(maleQuery,BooleanClause.Occur.SHOULD);
query.add(bothQuery,BooleanClause.Occur.SHOULD); 
```

如果我犯了一些错误，请提出建议。不知何故，它似​​乎只吐出`MALE`交易，而不是`BOTH`。

我正在使用版本`4.2.1`和`Standard Analyzer`作为分析器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T08:55:57.313

几种可能的解决方案是：

> 1.  使用 a`QueryParser`来构造查询，而不是`TermQuery`使用在索引时使用的相同分析器。例如，在我的情况下，它将是：Query query = new QueryParser(version,"gender",new StandardAnalyzer()).parse("MALE BOTH ");
>     
>     
> 2.  使用不同的分析器进行不区分大小写的索引。
>     
>     
> 3.  （这个适用于 StandardAnalyzer，对于其他分析仪的解决方案可能会有所不同）在搜索之前将您的搜索词小写。

# 解释

对这种情况的简要解释是：

我使用了一个`StandardAnalyzer`用于索引的小写输入标记，以便可以实现不区分大小写的搜索。

然后我使用`QueryParser`配置了相同的分析器来构造一个查询实例，用于在前端搜索用户的查询。搜索有效，因为按照标准分析器工作的解析器将用户的术语小写并进行区分大小写的搜索。

然后我需要过滤我写了`TermQuery`s 而不是使用解析器的搜索结果，在解析器中我使用了没有以这种方式索引的大写文本，因此搜索失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:35:12.867

您的查询似乎完全有效，我会寻找其他可能有问题的东西（例如，您在索引时没有偶然使用`LowerCaseFilter`for术语吗？）。`MALE/BOTH/FEMALE`

您可能想阅读[这篇文章](http://searchhub.org/2011/12/28/why-not-and-or-and-not/)，了解如何将各种查询组合成一个`BooleanQuery`.

# php - 在 PHP 中将字符连接成单个字符串的更有效方法

> ID：16186440
> 
> 赞同：0
> 
> 时间：2013-04-24T07:52:58.073
> 
> 标签：php, string, iteration, concatenation

我正在逐个字符地迭代一个冗长的字符串并对其子字符串进行特定操作。

在某一时刻，我必须将较小的字符串与较大的字符串合并，在这里我不确定哪个更有效：

*   只需通过迭代逐个字符相加

    ```
    for(some iteration){
      large_string.=some_character;
    } 
    ```

*   或者首先将这些单个字符添加到一个较小的临时字符串中，然后使用单个操作将其连接起来

    ```
    for(some iteration){
      temporary_string.=some_character;
    }
    large_string.=temporary_string; 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:54:15.490

两种方法都将花费相同的时间来创建新字符串。没有时差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:36:26.130

两次迭代都是相同的，因此将花费相同的时间和相同数量的资源。

但是，如果您的输入数组具有以下结构：

```
$array = array('a', 'b', 'c', 'd'); 
```

您不应该使用自己的迭代和字符串连接，而是使用`implode`这种方式：

```
$large_string .= implode('', $array); 
```

因为**这要快得多**。即使输入数组不是那种结构，使用这个片段应该更快（没有测试它）：

```
$tmp = array();
foreach($somethings as $something) { // <-- foreach loop is quicker then for loop
    $tmp[] = $something['my_char'];
}
$large_string .= implode('', $tmp); 
```

使用**PHP 原生函数**总是比你自己实现相同的逻辑更好更快……至少因为你通常需要更少的输入。

# java - Android 按钮宽度为可用宽度的一半 - 布局

> ID：16186446
> 
> 赞同：1
> 
> 时间：2013-04-24T07:53:27.233
> 
> 标签：java, android, xml, layout

我已经使用 imageview 和一些按钮进行了布局，我希望这些按钮具有可用屏幕宽度和高度的一半。

这是我尝试过的，我的xml如下。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/imageidid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:scaleType="centerCrop"
            android:src="@drawable/actionbar_bg" />

    </LinearLayout>

    <LinearLayout
    android:id="@+id/1st row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal"
    android:layout_below="@id/imageid"
    >

    <Button
    android:id="@+id/btn1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="row1 col1" />

    <Button
    android:id="@+id/btn2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="row1 col2" />

    </LinearLayout>

    <LinearLayout
    android:id="@+id/2nd row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal"
    android:layout_below="@id/1st row"
    >

    <Button
    android:id="@+id/btn1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="row2 col1" />

    <Button
    android:id="@+id/btn2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="row2 col2" />

    </LinearLayout>

</RelativeLayout> 
```

输出看起来像这样。

![在此处输入图像描述](https://i.stack.imgur.com/FhhUs.png)

我想要这样的东西。（注意 imageview 占屏幕高度的 40%）

![在此处输入图像描述](https://i.stack.imgur.com/Ps4bt.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:03:11.143

这是实现所需内容所需的代码，您只需更改视图的重量即可设置您希望视图占用的屏幕百分比：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="40"
    android:scaleType="centerCrop"
    android:src="@drawable/actionbar_bg" />

<LinearLayout
    android:id="@+id/1st row"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_below="@id/imageid"
    android:layout_weight="30"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="row1 col1" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="row1 col2" />
</LinearLayout>

<LinearLayout
    android:id="@+id/2nd row"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_below="@id/1st row"
    android:layout_weight="30"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="row2 col1" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:text="row2 col2" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:23:33.743

试试这个，注意：

*   根据“提示”嵌套权重对性能不利，但请查看代码，
*   不推荐使用 Fill_parent，使用 match_parent
*   您的“图像”在视觉上并不代表百分比，无论如何，它很容易改变，

代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/imageid"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="4"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:contentDescription="@string/description"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"
            android:src="@drawable/actionbar_bg" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/1strow"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="3"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn11"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/row1col1" />

        <Button
            android:id="@+id/btn21"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/row1col2" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/2ndrow"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="3"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn12"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/row2col1" />

        <Button
            android:id="@+id/btn22"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/row2col2" />

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:00:18.180

您的 RelativeLayout 没有做任何特别的事情，因此将其更改为 LinearLayout（将宽度和高度属性都保留为“match_parent”，但添加

```
android:orientation="vertical" 
```

然后对于每个较小的 LinearLayout，添加：

```
android:layout_weight=".xx" 
```

其中 xx 是您希望子布局使用的大型 LinearLayout 的百分比。

背景参考这里，请务必阅读：

[http://developer.android.com/guide/topics/ui/layout/linear.html](http://developer.android.com/guide/topics/ui/layout/linear.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:01:19.230

您可以使用 LinearLayout 作为主布局，然后使用线性布局的 weightsum 属性

# jquery - 除了 Ajax 之外的其他传输数据的方式

> ID：16186449
> 
> 赞同：0
> 
> 时间：2013-04-24T07:53:41.203
> 
> 标签：jquery, html, ajax

这个想法一直困扰着我一段时间，但是除了`<html><form>`和之外，还有其他方法可以将数据从 UI 传输/发送到后端（即 .Net）`ajax()`吗？我认为 .ajax 现在是这方面的主流技术，但还有别的吗？

关注点：

1.  jquery 的 .ajax() 被大量插件使用，它基于 Javascript，所以当 js 文件中存在一些错误代码时，一切都会变得难以调试。此外，当浏览器禁用 javascript 时，我认为这也不起作用。

2.  根据我的经验，每当来自后端（Web 服务）的数据（即异常）出现问题时，页面呈现就会失真，并且其他元素无法显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:38:22.853

如果您在谈论 jquery，那么想到的是`.ajax()`或`.post()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:27:50.777

> 1.  jquery 的 .ajax() 被大量插件使用，它基于 Javascript，所以当 js 文件中存在一些错误代码时，一切都会变得难以调试。此外，当浏览器禁用 javascript 时，我认为这也不起作用。

*在没有 JS 可用的场景中所有不起作用的东西*的后备**是*HTML。*

 *如果您希望我能够在没有 JS 激活/可用的情况下提交数据——然后*使用*HTML 表单，这就是它们的*用途*。

[http://en.wikipedia.org/wiki/Progressive_enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)和[http://en.wikipedia.org/wiki/Unobtrusive_JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)是基本关键字。

> 1.  根据我的经验，每当来自后端（Web 服务）的数据（即异常）出现问题时，页面呈现就会失真，并且其他元素无法显示。

处理可能的错误/异常是*你的*责任——如果你这样做了，那是你的错。

jQuery 的 .ajax（和相关方法）提供了处理这种情况的方法，例如成功/错误回调。防止它收到根本无法处理的响应（fe 500 Internal Server Error 等）也是您的工作。*

# android - 将数组从 .js 文件传递 到 .html 文件

> ID：16186451
> 
> 赞同：1
> 
> 时间：2013-04-24T07:53:50.477
> 
> 标签：android, charts, titanium, pie-chart

我正在使用 Titanium Studio 中的一些附加插件为 android 设备创建一个饼图，所以这是我的 app.js

```
var earn=[' ',' '];
var textfield1 = Ti.UI.createTextField({
    value:earn[0],
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
});
win.add(textfield1);
var textfield2 = Ti.UI.createTextField({
    value:earn[1],
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
});
win.add(textfield2);
var webview = Titanium.UI.createWebView({
 url: 'chart.htm'
});
win.add(webview); 
```

这是我的chart.htm

```
<script type="text/javascript" src="wz_jsgraphics.js"></script>
<script type="text/javascript" src="pie.js"></script>

<div id="pieCanvas" style="overflow: auto; position:relative;height:350px;width:380px;"></div>

<script type="text/javascript">
var p = new pie();
p.add("Jan",100);
p.add("Feb",200);
p.render("pieCanvas", "Pie Graph")

</script> 
```

如果我要为我的“Jan”使用数组“earn[0]”，我如何从 app.js 文件中调用数组？当我将值“100”更改为“earn[0]”时，饼图将不会显示。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:03:08.690

试试这个：

应用程序.js

```
var earn = [100, 200];

var textfield1 = Ti.UI.createTextField({
    value: earn[0],
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD,
});
win.add(textfield1);

var textfield2 = Ti.UI.createTextField({
    value: earn[1],
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD,
});
win.add(textfield2);

var webview = Titanium.UI.createWebView({
    url: 'chart.htm'
});
win.add(webview);

webView.addEventListener('load', function (e) {
    webview.evalJS('createPie(earn);');
}); 
```

图表.htm

```
<script type="text/javascript" src="wz_jsgraphics.js"></script>
<script type="text/javascript" src="pie.js"></script>

<div id="pieCanvas" style="overflow: auto; position:relative;height:350px;width:380px;"></div>

<script type="text/javascript">
function createPie(arr) {
    var p = new pie();
    p.add("Jan", arr[0]);
    p.add("Feb", arr[1]);
    p.render("pieCanvas", "Pie Graph");
}
</script> 
```

查看此链接以获得更多帮助：http: [//developer.appcelerator.com/question/73121/passing-variable-from-titanium-js-class-to-html-script-](http://developer.appcelerator.com/question/73121/passing-variable-from-titanium-js-class-to-html-script-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:18:22.370

当您更改文本字段时，您的`earn`数组不会动态更新，如果这是您所要求的。您必须监听 texfields 何时触发更改事件，捕获该事件并获取新值，现在您可以更新饼图。

要做到这一点，以便在有人更改 texfields 中的值时更新图表，您需要执行以下操作：

```
/* app.js */
var textfield1 = Ti.UI.createTextField({
    value:' ',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
});
/* This is the important part */
textfield1.addEventListener('change', function(e) {
    var earn = [textfield1.value, textfield2.value];
    webview.evalJS('createPie(' + JSON.stringify(earn) +');');
});

var textfield2 = Ti.UI.createTextField({
    value:' ',
    keyboardType: Titanium.UI.KEYBOARD_NUMBER_PAD, 
});
/* This is the important part */
textfield2.addEventListener('change', function(e) {
    var earn = [textfield1.value, textfield2.value];
    // DO this
    webview.evalJS('createPie(' + JSON.stringify(earn) +');');
});

var webview = Titanium.UI.createWebView({
 url: 'chart.htm'
});

// Add views
win.add(textfield1);
win.add(textfield2);
win.add(webview); 
```

在您的 HTML 中（我取自 Mohit 精心制作的 HTML）：

```
<script type="text/javascript" src="wz_jsgraphics.js"></script>
<script type="text/javascript" src="pie.js"></script>

<div id="pieCanvas" style="overflow: auto; position:relative;height:350px;width:380px;"></div>

<script type="text/javascript">
function createPie(arr) {
    var earn = eval(arr); // convert from JSON string to JS, alternatively use JSON.parse
    var p = new pie();
    p.add("Jan", earn[0]);
    p.add("Feb", earn[1]);
    p.render("pieCanvas", "Pie Graph");
}
</script> 
```

现在你有了骨头，你可能不得不弄乱 createPie() 函数，查看 Mohit 发送的链接，那里有详细的说明。

# r - 合并数据集时添加数据集ID

> ID：16186453
> 
> 赞同：0
> 
> 时间：2013-04-24T07:53:54.697
> 
> 标签：r

我正在导入和合并[.tcx](http://developer.garmin.com/schemas/tcx/v2/)文件（XML 格式的 GPS 和健身数据）以进行进一步分析：

```
files <- dir(pattern = "\\.tcx")
ldf   <- lapply(files, 
      function(x) plyr::ldply(
            getNodeSet(xmlParse(x), "//ns:Trackpoint", "ns"), 
            as.data.frame(xmlToList)))
mydf  <- plyr::rbind.fill(mydf)
setNames(mydf, c('time', 'lat', 'long', 'alt', 'heartrate')) 
```

这很好用，但我需要添加一个带有文件标识的列。这可以是计数器，但我更喜欢在添加的列中添加文件名。如何添加此列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:09:13.800

如果没有可重复的示例，很难给出解决方案，也不确定所需的输出。一个想法是改变这一行：

```
 as.data.frame(xmlToList) 
```

类似于：

```
 function(y){data.frame(ID=x,as.data.frame(xmlToList(y)))}) 
```

这将使用每个 data.frame 的名称文件将 ID 添加到列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:02:31.747

假设 ID 是包含 ID 的向量（这里是您的文件名），您可以这样做：

```
 mydf[,'ID'] <- ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:01:06.137

不是一个完整的答案，而是一个起点。

对于数据框，您可以通过以下方式添加 id 列：

```
data <- data.frame(x=rnorm(100), y=rnorm(100))

data$ID <- "id" 
```

数据框的一列将填充 id。

所以，我会尝试在 lapply 的函数（x）中添加这样的列。

# iphone - Xcode iphone 格子效果图

> ID：16186454
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:53:55.327
> 
> 标签：iphone, xcode

我有 1 个 imageView 和 2 个 pickerView，里面有数字 1-9。例如，如果用户在第一个选择器上选择 3，在第二个选择器上选择 4，我想展示如何剪切 imageView 中的图像。这个选择 3 和 4 表示 3 列和 4 行，我想在我的 imageView 上绘制 2 条垂直线和 3 条水平线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:19:54.497

aaaa ...在ImageView的drawRect方法中...根据选择器中的数字拆分宽度和高度，然后执行以下操作：（伪代码）

```
float widthSplit=imageview.width/widthPiker.value;
float heightSplit=imageview.height/heightPiker.value;

for (int i=0; i<widthPiker.value; i++){
draw line (CGPointMake(0,i*widthSplit) , CGPointMake(imageview.height,i*widthSplit))
} 
```

身高也一样

您可以自己设置您喜欢的宽度、颜色和所有这些，只需查看核心图形绘图教程

# javascript - ember 数据设置内容类型为 application/html 而不是 json

> ID：16186455
> 
> 赞同：1
> 
> 时间：2013-04-24T07:54:01.110
> 
> 标签：javascript, ember.js, ember-data

我已经声明了一个 ObjectController 来编辑帖子

```
App.PostsEditController = Ember.ObjectController.extend 
  updatePost: (event)->
    @store.commit() 
```

但我看到发送的是 html 请求而不是 json 请求，这是来自我的 chrome 控制台：![ember 数据设置内容类型为 text/html](https://i.stack.imgur.com/A9T0b.jpg)

有没有办法将内容类型强制为 json 用于 ember 数据中的 PUT 请求？

我通过了 ember-data 代码，它正在命中这段代码，但 PUT 请求的内容类型仍然设置为 text/html（如 chrome 控制台中所示）

```
ajax: function(url, type, hash) {
    hash.url = url;
    hash.type = type;
    hash.dataType = 'json';
    hash.contentType = 'application/json; charset=utf-8';
    hash.context = this;

    if (hash.data && type !== 'GET') {
      hash.data = JSON.stringify(hash.data);
    }

    jQuery.ajax(hash);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:33:48.443

看起来您正在获取 HTML，因为您的服务器返回了错误页面。

我可以看到 2 个选项：

*   请求正常，但服务器出现问题。
*   该请求还可以，但缺少 Accepts 标头（请参阅[无法使用 jQuery 正确设置 Accept HTTP 标头](https://stackoverflow.com/questions/1145588/cannot-properly-set-the-accept-http-header-with-jquery)）。服务器不使用内容/类型，然后返回此入口点的 html 版本。

# opengl - 我的情况是使用 GL_STATIC_DRAW 的好案例吗？

> ID：16186456
> 
> 赞同：2
> 
> 时间：2013-04-24T07:54:07.580
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我有一个纹理多边形网格，我计划根据用户的各种输入进行移动。例如：用户可以在各个方向上移动顶点。但是顶点的数量和纹理坐标将始终保持不变。

这是使用 GL_STATIC_DRAW 的好情况，还是我应该使用其他东西，比如 GL_STREAM_DRAW？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-31T20:26:08.990

我建议不要在每次移动顶点时都更新 VBO，而是建议使用转换。使用变换，您可以通过简单地将变换矩阵乘以位置向量来创建一个可以平移、旋转或缩放顶点的矩阵。这种乘法可以在带有 GLSL 着色器的显卡上完成。使用此方法，您的顶点缓冲区将永远不必更改。

我建议阅读这篇文章以获取有关如何在 OpenGL 中使用转换的更多信息：[https ://open.gl/transformations](https://open.gl/transformations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:55:42.430

不，您的情况不是使用 GL_STATIC_DRAW 的好案例。正如 h4lcOn 的链接建议您应该使用动态或流。尽管如果我正确理解您要做什么，我什至根本不会使用 VBO。如果您在每个绘制调用中为简单多边形推送坐标，则不会有太多开销（如果有的话）。如果您有大量多边形或在单个帧中使用相同的顶点数据进行大量绘制调用，请使用 VBO。

# python - Scrapy 在第一页上不抓取，规则遵循下一页

> ID：16186468
> 
> 赞同：1
> 
> 时间：2013-04-24T07:54:39.630
> 
> 标签：python, scrapy, rule, web-crawler

我用递归规则制作了一个蜘蛛来跟随下一页的链接。它工作正常。
蜘蛛爬取除“start_urls”中定义的第一页之外的所有页面（999）。有人遇到过问题吗？

示例代码：

```
class example(CrawlSpider):
    name = "example"
    allowed_domains = ["example.ndd"]
    start_urls = ["http://example.ndd/startnum=1"] #first page  

    rules = (Rule(SgmlLinkExtractor(allow=("nextPage\.htm", ),
                            restrict_xpaths=('//div[@class="paging"]/p[@class="nav"]',)), 
                            callback="parse_items", follow= True),)

    def parse_items(self, response):
        hxs = HtmlXPathSelector(response)
        links= hxs.select('//td[@class="desc"]/h3/a/@href').extract()
        list = []
        for link in links:
            yield link
        return 
```

编辑：搜索后，爬虫seeams直接跟随规则限制路径的结果。同样，如果从 startnum=1 开始，它会爬取 startnum=11，它位于 startnum=1 的页面内。
我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T19:01:01.593

你需要使用：`def parse_start_url(self, response):`

看到这个答案：[Scrapy CrawlSpider 不会抓取第一个目标网页](https://stackoverflow.com/questions/15836062/scrapy-crawlspider-doesnt-crawl-the-first-landing-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:38:00.083

您的意思是要抓取`start_urls`并提取它以及其他页面吗？

`CrawlSpider`不会从中提取项目`start_urls`。如果需要，请重载**parse**方法。

# java - 接口中的 Java 强制转换

> ID：16186474
> 
> 赞同：79
> 
> 时间：2013-04-24T07:54:54.847
> 
> 标签：java, interface, casting

有人可以向我解释一下编译器如何在第一次转换时不抱怨，但在第二次转换时抱怨吗？

```
interface I1 { }
interface I2 { }
class C1 implements I1 { }
class C2 implements I2 { }

public class Test{
     public static void main(String[] args){
        C1 o1 = new C1();
        C2 o2 = new C2();
        Integer o3 = new Integer(4);

        I2 x = (I2)o1; //compiler does not complain
        I2 y = (I2)o3; //compiler complains here !!
     }
} 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-04-24T08:01:02.230

当你转换`o1`和`o3`with 时`(I2)`，你告诉编译器对象的类实际上是它声明的类型的子类，并且这个子类实现了`I2`。

该类`Integer`是**final**，因此`o3`不能是 的子类的实例`Integer`：编译器知道您在撒谎。`C1`然而不是最终的，因此`o1` *可能*`C1`是该 implements的子类型的一个实例`I2`。

如果你 make `C1`final，编译器也会抱怨：

```
interface I1 { }
interface I2 { }
final class C1 implements I1 { }
class C2 implements I2 { }

public class Test{
     public static void main(){
        C1 o1 = new C1();
        C2 o2 = new C2();
        Integer o3 = new Integer(4);

        I2 y = (I2)o3; //compiler complains here !!
        I2 x = (I2)o1; //compiler complains too
     }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-24T08:06:53.883

根据[JLS 第 5 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5)

### 5.5.1。引用类型转换

> 给定一个编译时引用类型 S（源）和一个编译时引用类型 T（目标），如果由于以下规则没有发生编译时错误，则存在从 S 到 T 的强制转换。如果 T 是接口类型：
> 
> 如果 S 不是最终类（第 8.1.1 节），那么，如果存在 T 的超类型 X 和 S 的超类型 Y，则 X 和 Y 都是可证明不同的参数化类型，并且 X 的擦除和 Y 相同，就会发生编译时错误。
> 
> 否则，转换在编译时总是合法的（因为即使 S 没有实现 T，S 的子类也可能）。
> 
> 如果 S 是最终类（第 8.1.1 节），则 S 必须实现 T，否则会发生编译时错误。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-24T08:03:50.710

那是因为 class`Integer`是 final 而`C1`不是。因此，Integer 对象不能实现 I2，而 C1 对象如果它是实现 I2 的 C1 子类的实例则可以。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-24T08:06:37.107

根据[JLS 5.5.1 - Reference Type cast](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)，规则适用：

*   **如果 T 是类类型，那么 |S| <: |T|，或 |T| <: |S|。否则，会发生编译时错误。**

    `I2 y = (I2)o3; //compiler complains here !!`

在这种情况下，`Integer`and在任何方面`I2`都不**相关**，因此会发生编译时错误。此外，因为`Integer`is ，和`final`之间没有关系。`Integer``I2`

`I2`并且`I1`可以是相关的，因为两者都是标记接口（没有合同）。

至于编译后的代码，规则如下：

*   **如果 S 不是最终类（第 8.1.1 节），那么，如果存在 T 的超类型 X 和 S 的超类型 Y，则 X 和 Y 都是可证明不同的参数化类型，并且 X 的擦除和 Y 相同，就会发生编译时错误。**

`S`是`o1`和`T`是`I2`。

希望这可以帮助。

# jquery - 如何生成文本框的“实时预览”？

> ID：16186475
> 
> 赞同：0
> 
> 时间：2013-04-24T07:54:59.057
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

就像在 SO 上输入问题时一样，我看到文本框下方的框中包含实时版本 - 或者在 Github 上，我可以简单地转到“预览”而不保存记录，我如何使用 Rails 实现这一点？

假设我有一个`Question`模型，它具有`body`我想查看实时预览的属性（逐个字符或按下`preview`显示它的按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:10:14.207

在 HTML 中你可以这样写：

```
<% if params[:preview_button] %>
 <%= textilize @project.description %>
<% end %> 
```

...

```
<%= submit_tag 'Create' %>
<%= submit_tag 'Preview', :name => 'preview_button' %> 
```

*# => params = { “preview_button” => “Preview” ....* - 你会看到；

```
def create
 @project = Project.new(params[:project])
 if params[:preview_button] || !@project.save
   render :action => 'new'
 else
   flash[:notice] = "Successfully created project."
   redirect_to project_path(@project)
 end
end 
```

您可以重写创建操作，将 ajax 添加到表单预览，方法是放置 remote: true

我试图展示主要思想。

# php - FOSRestBundle 视图注释不起作用

> ID：16186476
> 
> 赞同：0
> 
> 时间：2013-04-24T07:54:59.207
> 
> 标签：php, rest, symfony-2.1, fosrestbundle

`config.yml:`

```
fos_rest:
    param_fetcher_listener: true
    body_listener: true
    format_listener: 
        default_priorities: [json, xml]
    view:
        view_response_listener: 'force'  

sensio_framework_extra:
    view:    { annotations: false }
    router:  { annotations: true } 
```

`annotated controller:`

```
/**
 * @Rest\View(statusCode=204)
 * @param \Symfony\Component\HttpFoundation\Request $request
 */
public function signUpAction(Request $request)
{
    return $this->get('%%%.response_generator')->generateResponse(array('test'), true, 'test'); 
    // returns a simple Object with some public properties
} 
```

`.json`如果我使用它返回的格式访问路由：

```
{"status":1,"message":"test","data":["test"]} 
```

但它不会将状态代码更改为注释中的状态代码。

同样没有指定格式，它不会回退到默认`.json`格式，它仍然会搜索模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:50:27.837

尝试这个：

```
use FOS\RestBundle\View\View; 
```

然后在行动中：

```
$view = View::create($response, 204);
return $view; 
```

# ios - 如何在两种横向模式下使我的模态对话框靠近顶部objective-c

> ID：16186477
> 
> 赞同：0
> 
> 时间：2013-04-24T07:54:59.183
> 
> 标签：ios, objective-c, modal-dialog, transformation

我正在使用它来更改模态对话框的宽度和高度

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterface {
     if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {

            self.view.superview.frame = CGRectMake(74, 170, 380.0f, 712.0f);

        }
} 
```

作品将`self.view.superview.frame = CGRectMake(74, 170, 380.0f, 712.0f);`在一个景观上，但当您将 iPad 转动时，y 位置太低。对于两个景观，它需要位于相同的 y 位置。

**编辑**

这看起来很有效。不确定它是否是最佳答案。将接受更好的答案。

```
if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {

            self.view.superview.frame = CGRectMake(174, 170, 380.0f, 712.0f);
            self.view.superview.transform = CGAffineTransformTranslate(self.view.superview.transform,0,-72);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:08:28.673

如果我们在这里谈论的是在 PresentModalViewcontroller 的帮助下呈现的 UIVIewcontroller。我们不应该改变视图控制器的高度和宽度。演示样式由苹果提供：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/c/econst/UIModalPresentationFormSheet](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/c/econst/UIModalPresentationFormSheet)

此外，如果您想创建自定义模式，您可以通过在简单 UIView 上使用 CATransition 进行转换来创建。

# ios - 使用 NSURLConnection 下载

> ID：16186478
> 
> 赞同：0
> 
> 时间：2013-04-24T07:55:01.013
> 
> 标签：ios, objective-c, nsurlconnection

我有一个 UIImageView，它使用 URL 显示图像，我有一个下载按钮，它会打开一个 UIActionSheet，然后使用 URL 下载文件我想知道如何使用 NSURLConnection 对其下载部分进行编码。

```
- (IBAction)DownloadClick:(id)sender {

    UIActionSheet *Action = [[UIActionSheet alloc]
                         initWithTitle:@"Options" 
                         delegate:self 
                         cancelButtonTitle:@"Cancel" 
                         destructiveButtonTitle:nil
                         otherButtonTitles:@"Download", nil];

    [Action showInView:self.view];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 0) {  //The Download code will go here This is where i need ur help

          } 
```

Url 保存在名为“Url”的字符串中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:18:09.013

利用异步请求进行图像下载。它还可以帮助您识别图像下载过程中的错误（如果有）。

```
 NSURL* url = [NSURL URLWithString:@"http://imageAddress.com"];
 NSURLRequest* request = [NSURLRequest requestWithURL:url];

[NSURLConnection sendAsynchronousRequest:request
queue:[NSOperationQueue mainQueue]
completionHandler:^(NSURLResponse * response,
    NSData * data,
    NSError * error) {
if (!error){
            UIImage* image = [[UIImage alloc] initWithData:data];
           // do whatever you want with image
           }

}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:21:32.717

我认为您没有为此尝试过 Google。无论如何，这是您的代码，不要忘记添加*NSURLConnectionDataDelegate*，

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
if (buttonIndex == 0) {  //The Download code will go here This is where i need ur help

    //-------------------------------------------------------
    NSURL *url = [NSURL URLWithString:@"your_data_url"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url
                                             cachePolicy:NSURLRequestUseProtocolCachePolicy
                                         timeoutInterval:60.0];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (connection) {
        NSLog(@"succeed...");
    } else {
        NSLog(@"Failed...");
    }
    //-------------------------------------------------------------------
  }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:10:12.890

如果您需要同步下载，您可以尝试以下代码：

```
NSURL *imageUrl = [NSURL URLWithString:@"http://site.com/imageName.ext"];
NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

现在您有了可以使用的图像。

如果您需要异步请求，我建议您阅读[NSURLConnectionDataDelegate](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)，它可以帮助您处理文件的下载。

# scala - 在scala中获取google搜索结果的数量

> ID：16186485
> 
> 赞同：0
> 
> 时间：2013-04-24T07:55:35.177
> 
> 标签：scala, search, count

我正在寻找一种方法来捕获在谷歌上搜索的结果总数（“关于 **** 结果”字段）。我在 google API 上进行了搜索，但您似乎无法获得总数。有没有人有这样的信息？如何在 Scala（或任何其他语言......）中实现它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:19:40.090

您可以使用 HTML 敏捷包。只需导航到 *“ [https://www.google.com/search?q=](https://www.google.com/search?q=) ” + WhatYouWantToSearch* 并获取它的内容。获得该 urlcontent 后，您可以使用下面的代码

```
 htmlDoc.LoadHtml(urlcontent);
    HtmlAgilityPack.HtmlNode hnc = htmlDoc.DocumentNode.SelectSingleNode("//div[@id='resultStats']");
    string[] text = hnc.InnerHtml.Split(' ');
    return Convert.ToInt32(text[1].Replace(",", "").Replace(".", "").Trim()); 
```

# haskell - GHC 垃圾收集器是否对大型对象有任何特殊优化？

> ID：16186488
> 
> 赞同：22
> 
> 时间：2013-04-24T07:55:44.773
> 
> 标签：haskell, ghc

GHC 垃圾收集器是否专门处理“大”对象？或者它是否将它们与任何其他对象完全相同？

一些 GC 引擎将大对象放在一个单独的区域中，该区域的扫描频率较低，并且可能具有不同的收集算法（例如，压缩而不是复制，或者甚至可能使用空闲列表而不是尝试进行碎片整理）。GHC会做这样的事情吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-24T09:18:20.317

是的。GHC 堆没有保存在一段连续的内存中；相反，它被[组织成块](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/BlockAlloc)。

当分配的对象的大小高于特定阈值（block_size*8/10，其中block_size为4k，因此大约为3.2k）时，持有该对象的块被标记为大（BF_LARGE）。现在，当垃圾回收发生时，不是将大对象从这个块复制到一个新的块中，而是将块本身添加到新一代的块集中；这涉及摆弄一个链表（准确地说是一个大对象列表）。

由于这意味着我们可能需要一段时间才能回收大块内的死空间，这确实意味着大对象可能会遭受碎片化，如错误[7831](http://hackage.haskell.org/trac/ghc/ticket/7831)所示。但是，这通常不会发生，直到单个分配达到兆块大小的一半，即 1M。

# php - 字符串替换多个值

> ID：16186492
> 
> 赞同：3
> 
> 时间：2013-04-24T07:56:14.463
> 
> 标签：php, string

我有一个看起来像这样的字符串：

> 布拉布拉％亚达亚达％布拉布拉％亚达亚达％

有没有办法只替换前两个“%”（或最后两个），这样我就可以获得下一个输出：

```
Bla bla <a href='link1'>yada yada</a> bla bla %yada yada% 
```

并且，如有必要，最后两个“%”，因此它输出：

```
Bla bla <a href='link1'>yada yada</a> bla bla <a href='link2'>yada yada</a> 
```

我不知道如何区分前两个和后两个，所以如果我愿意，我可以用链接替换第一个或最后两个标记“%”。我正在使用 php。提前致谢

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:06:01.363

使用正则表达式**（需要 PHP 5.3+）**：

```
$string = 'Bla bla %yada yada% bla bla %yada yada%';
echo preg_replace('/%([^%]*)%/', '<a href="http://example.com">$1</a>', $string, 1) . '<br>'; // to replace the first instance.
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
$links = array('http://example.com', 'http://stackoverflow.com', 'http://google.com');
$index = 0;
echo preg_replace_callback('/%([^%]*)%/', function($m) use($links, &$index){
    $m[1] = '<a href="'.$links[$index].'">'.$m[1].'</a>';
    $index++;
    // reset the index if it exceeds (N links - 1)
    if($index >= count($links)){
        $index = 0;
    }
    return $m[1];
}, $string).'<br>'; // to replace according to your array
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// To test with a string that contains more %% than the links
$string2 = 'Bla bla %yada yada% bla bla %yada yada% wuuut dsfsf %yada yada% sjnfsf %yada yada% jnsfds';
$links = array('http://example.com', 'http://stackoverflow.com', 'http://google.com');
$index = 0;
echo preg_replace_callback('/%([^%]*)%/', function($m) use($links, &$index){
    $m[1] = '<a href="'.$links[$index].'">'.$m[1].'</a>';
    $index++;
    // reset the index if it exceeds (N links - 1)
    if($index >= count($links)){
        $index = 0;
    }
    return $m[1];
}, $string2).'<br>'; // to replace according to your array 
```

[在线演示](http://codepad.viper-7.com/fIitVS)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:03:56.337

试试这个
***对 PHP 4 和 PHP 5 的支持***

* * *

**解决方案：**

```
$string ='Bla bla %yada yada% bla bla %yada yada%';

// Count no of %
$count = substr_count($string,'%');

// Valid string pattern
if ( 0 == ($count % 2) ) {

    $urlString = $string;

    // Iterate for each pair of % to make it link
    for ( $i=1; $i <= $count/2 ; $i++  ) {

        $urlString = preg_replace('/%/', "<a href='link$i'>", $urlString, 1);
        $urlString = preg_replace('/%/', "</a>", $urlString, 1);
    }
}
// Invalid string pattern
else {
    echo "Invalid string pattern";
}

// Display generated link 
echo $urlString; 
```

* * *

**preg_replace 函数的工作**

*   **删除前两个 %**

```
 $str ='Bla bla %yada yada% bla bla %yada yada%';
    $newStr = preg_replace('/%/', '', $str, 2);

    echo $newStr;

    // Output => Bla bla yada yada bla bla %yada yada% 
```

* * *

*   **删除最后两个 %**

```
 $str ='Bla bla %yada yada% bla bla %yada yada%';
    $newStr = preg_replace('/%/', '', strrev($str), 2);
    $newStr =  strrev($newStr);

    echo $newStr;

    // Output => Bla bla %yada yada% bla bla yada yada 
```

* * *

*   **移除所有 ％**

```
 $str ='Bla bla %yada yada% bla bla %yada yada%';
    $newStr = preg_replace('/%/', '', $str);

    echo $newStr;

    // Output => Bla bla yada yada bla bla yada yada 
```

* * *

参考
[http://in1.php.net/preg%5Freplace](http://in1.php.net/preg%5Freplace)

# actionscript-3 - 是否可以将 Flex UI 组件与 Starling 一起使用？

> ID：16186497
> 
> 赞同：0
> 
> 时间：2013-04-24T07:56:24.673
> 
> 标签：actionscript-3, apache-flex, starling-framework

我正在使用 Flex 构建一个基于 Web 的查看器，虽然我可以在纯 actionscript 3.0 项目中构建它，但我认为使用 Flex 将节省我们构建复杂 UI 组件的时间..

那么，正如问题所暗示的那样，我们可以将那些 Flex UI 组件与 starling 一起使用吗？是否像将 UI 组件添加到 Starling ex .. starling.display.Sprite 而不是传统的显示列表一样简单？这就是全部？

我希望我能在这里找到一个明确的答案，否则作为一个选项的 Flex 将有问题或被取消..

出色地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:07:58.227

Flex 组件继承了与 Starling 的 sprite 不同的 Flash sprites。所以答案是否定的，Starling 不会让您添加 Flex 组件。Flex 组件是使用原生 Flash 显示列表编码的，您必须完全使用 Starling 重新编码它们。

# c# - WPF 图像控件和媒体元素

> ID：16186498
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:56:26.237
> 
> 标签：c#, wpf, image, desktop, mediaelement

我想将媒体元素放在图像控件中。例如像这样；

```
 <Image>
      <MediaElement
    </Image> 
```

完成此操作后，我想将此图像作为图像保存到我的计算机中。这可能适合你吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:17:18.780

你试图做的事情在很多层面上都是不可能的。首先，[图像](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)控件不支持直接内容，因此您不能将任何其他控件放入其中。而这个控件是用来显示一些图像的，它不是图像本身。

其次，[MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)用于包含视频或音频。如何将音频或视频保存为图像（无论如何都有意义的图像）？

所以你的问题的答案是：**不**，这是不可能的。

# c# - 从代码中设置 SSRS 报告变量

> ID：16186500
> 
> 赞同：2
> 
> 时间：2013-04-24T07:56:27.530
> 
> 标签：c#, ssrs-2008, reporting-services

我构建了一个 SSIS 报告，并通过 ReportViewer asp 控件显示它。我已经知道如何通过代码传递参数：

```
reportViewer1.ServerReport.SetParameters(parameters); 
```

我怎样才能对报告的变量做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:58:26.683

AFAIK 这是不可能的。

请注意，变量不用于输入，它们用于[其他](http://msdn.microsoft.com/en-us/library/dd255208.aspx)用途：

> 当您有一个在报表的表达式中多次使用的复杂计算时，您可能需要创建一个变量。

当然，您可以根据输入参数进行计算。

如果您在查看报表时发现需要为*变量*设置值，那么您实际上可能需要一个*参数*。也许您遇到了[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T08:12:11.677

有可能的

请参考以下链接

[在 Reporting service 2008 R2 中修改报表变量](http://blogs.msdn.com/b/selvar/archive/2012/02/03/modifying-report-variables-in-reporting-service-2008-r2.aspx)

# ios - 在 sqlite 数据库中插入数据的问题

> ID：16186503
> 
> 赞同：4
> 
> 时间：2013-04-24T07:56:31.320
> 
> 标签：ios, sqlite

这就是我尝试在sqlite数据库中添加数据的方式，一切正常，但数据没有被添加到数据库中我不明白为什么你能参考代码并告诉我我做错了什么

```
 sqlite3_stmt *stmt;
    int x;

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Phonenumber,Email,Profilepic) values(?,?,?,?,?);";
    x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

    if (x == SQLITE_OK)
    {
        NSLog(@"PersonName is -->%@",[NSString stringWithFormat:@"%@",[_Namebarray objectAtIndex:0]]);
        NSLog(@"BirthDates is -->%@",[NSString stringWithFormat:@"%@",[_Birthdatebarray objectAtIndex:0]]);
        NSLog(@"BirthDates is -->%@",[NSString stringWithFormat:@"%@",[_Phonearray objectAtIndex:0]]);
        NSLog(@"BirthDates is -->%@",[NSString stringWithFormat:@"%@",[_Emailarray objectAtIndex:0]]);
        // if else will come here for checking weather images has added or not if added then store Yes Image if not then simply No image for default image.

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_Namebarray objectAtIndex:0]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_Birthdatebarray objectAtIndex:0]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 3, [[NSString stringWithFormat:@"%@",[_Phonearray objectAtIndex:0]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 4, [[NSString stringWithFormat:@"%@",[_Emailarray objectAtIndex:0]] UTF8String],-1, NULL);
        if(selectImage.image)
        {
            sqlite3_bind_text(stmt, 5, [[NSString stringWithFormat:@"%@",[_arrayOfPaths objectAtIndex:0]] UTF8String],-1, NULL);
        }
        else{
            sqlite3_bind_text(stmt, 5, [[NSString stringWithFormat:@"%@",@"No Image"] UTF8String],-1, NULL);
        }
    }
    if (sqlite3_step(stmt) != SQLITE_DONE){}
    NSLog(@"Error: ");
    sqlite3_finalize(stmt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:09:49.180

我在您的代码中没有看到任何错误，请检查您的数据库是否像这样打开

```
if (sqlite3_open(dbpath, &database1) == SQLITE_OK) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:45:41.920

这里有一个使用 SQLite 的示例项目：[https ://github.com/AaronBratcher/ABSQLite](https://github.com/AaronBratcher/ABSQLite)

它有用于添加和读取数据的代码。

# javascript - 无法在 jquery 中发送电子邮件变量

> ID：16186506
> 
> 赞同：-1
> 
> 时间：2013-04-24T07:56:39.150
> 
> 标签：javascript, jquery

我正在生成以下关于 jquery oncliick 事件的数据。

```
 $('<tr class="row-drop">'+
                '<td colspan="'+tr.children().length+'">'+
                     '<div class="float-right">'+
                       '<button type="submit" class="button glossy mid-margin-right with-tooltip" title="This feature is currently not available ">'+
                        '<span class="button-icon"><span class="icon-mail"></span></span>'+
                        'Send mail'+
                    '</button>'+
                    '<button type="submit" class="button glossy with-tooltip" onclick="callnow('+pname+'+,'+pemail+','+pnumber+','+pcode+','+pdelay+')"     title="This feature is currently disabled">'+                         '<span onclick="callnow(pname,pemail,pnumber,pcode,pdelay);" class="button-icon green-gradient"><span class="icon-phone"></span></span>'+
                        'Call Now'+
                    '</button>'+
                    '</div>'+
      '<div class="float-left">'+
  //              '<strong>Prospect Name:&nbsp;&nbsp;</strong><span style="color:white;">'+date+'</span><br>'+
                '<strong>Prospect Title:&nbsp;&nbsp;</strong>'+title+'<br>'+
                '<strong>Prospect Company:&nbsp;&nbsp;</strong>'+company+'<br>'+

                '<strong>Track id:&nbsp;&nbsp;</strong>'+ trackid +'<br>'+

            '</td>'+

        '</tr>').insertAfter(tr); 
```

现在正确显示代码中有a行

```
onclick="callnow('+pname+','+pemail+',+pnumber+,+pcode+,+pdelay+') >' 
```

其中 pname 和 pemail 是 javacsript 变量，我从之前生成的相同函数中填充这些变量

我的问题是在单击`call now`按钮时出现 javascript 错误，即

```
SyntaxError: missing ) after argument list
[Break On This Error]   

callnow(Naveen,nma@srdia.com.au,+pnumber+,+pcode+,+pdelay+); 
```

请帮我解决这个问题。

我试过把 pemail 放进去，`encodeURI` 但还是一样，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:59:50.960

错误。你需要 " 字符

```
onclick="callnow('+pname+','+pemail+',+pnumber+,+pcode+,+pdelay+')" >' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:00:56.293

```
onclick="callnow('+pname+','+pemail+',+pnumber+,+pcode+,+pdelay+') >' 
```

在 >> onclick << 之后，您以 " 而不是 ' 开始，就像您在其余代码中习惯的那样。我建议您将此代码带入更好、更易读的结构。祝您愉快！

# java - 由于surefire插件的forkmode，单元测试失败

> ID：16186509
> 
> 赞同：2
> 
> 时间：2013-04-24T07:56:57.043
> 
> 标签：java, maven, maven-surefire-plugin

我的代码中有一个测试，它创建一个目录，然后在其中创建一个文件。

但是，此测试失败，因为写入文件的测试部分无法找到创建的目录。唯一解决它的是将surefire插件设置为永远不会像这样分叉：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <forkMode>never</forkMode>
    </configuration>
</plugin> 
```

我会将此修复解释为目录是在一个 JVM 进程中创建的，而文件是在另一个 JVM 进程/线程中创建的？

此测试失败与最近才开始失败的单台机器隔离。

我尝试过的几件事是：

1.  系统上有许多 JDK 版本，所以除了在许多其他系统上工作的版本（ 1.6.0_19 ）之外，所有版本都被删除了。
2.  尝试从管理员 cmd 提示符对该项目运行“mvn 测试”。
3.  检查父目录的权限是否正常。
4.  尝试从头开始检查整个项目并做同样的事情。
5.  检查发生这种情况的目录是否已从 AntiVirus 的 On-Access-Scanner 中排除。

以上似乎都没有任何效果。唯一不同的是`<forkMode>`配置。我无法弄清楚为什么该测试在它周围绝对没有代码更改或它正在测试的功能中突然停止工作。

使用的 maven-surefire-plugin 版本是[2.12.4](http://search.maven.org/#artifactdetails%7Corg.apache.maven.plugins%7Cmaven-surefire-plugin%7C2.12.4%7Cmaven-plugin)。如果缺少“从不”配置，则更新到最新版本 (2.14.1) 不会修复测试。

`<forkMode>`已[弃用](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#forkMode)，但仅从 2.14 版开始。

我对潜在的问题可能是什么很感兴趣。我希望最终的结论不会像 HDD 或硬件问题那么简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T08:17:05.163

tl;博士：固定！

为用户制造了另一台全新的机器。它工作了一个小时左右，然后，你瞧，完全相同的问题。

普遍的共识是它必须是流氓 Windows 更新。所以我们尝试了几件事，比如将机器恢复到以前的状态。手动卸载 Windows 更新等。没有任何效果。

然后机器的主人顿悟了。显然，他已经习惯了**[这个](http://www.microcenter.com/random_access/newsletters/09_newsletters/0809/toolbox_tip.html)**注册表黑客，这就是这个超级神秘错误的原因。我们取消了那个，瞧，mvn clean install 工作正常！

我仍然很好奇它为什么会影响 java 进程，所以这里有一个后续问题：[为什么这个 autorun-cmd 注册表黑客会影响 java/maven 进程？](https://stackoverflow.com/questions/16249872/why-does-this-autorun-cmd-registry-hack-affect-a-java-maven-process) （完成一个 gihub 存储库以隔离有问题的代码。）

感谢所有有用的评论。

# android - FFMPEG & JNI：如何从 URL 解码

> ID：16186510
> 
> 赞同：2
> 
> 时间：2013-04-24T07:56:58.120
> 
> 标签：android, ffmpeg, java-native-interface, mpeg2-ts

我正在尝试制作一个使用 FFMPEG 解码 Android 不支持的视频的 Android 应用程序（至少不是在所有设备上）：MPEG-TS & h264 Main Profile。因此，到目前为止，我能够使用来自 JNI 的 FFMPEG 来解码具有上述规格的一些本地视频，但我的目标是让 FFMPEG 解码来自流式 URL ( `http://127.0.0.1:1666/`) 的数据，我将从 android 服务 (出于某些原因）

所以，基本上，我有两个问题：

*   由于找不到任何好的示例，我将如何从流式 URL 进行解码？

*   在解码我的本地 MPEG-TS 视频时，我注意到播放速度很慢，并且视频会冻结一段时间，即使是海豚播放器（基于 FFMPEG）也有相同的行为，我没有不知道是否有解决方案。有什么建议吗？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:17:03.777

你可以以此为例，你可以遵循

```
iobuffer                  = (unsigned char*) av_malloc(bufferSize);               
pFormatCtx                = avformat_alloc_context();   
pFormatCtx->pb            = avio_alloc_context(iobuffer, bufferSize, 0,receiver,    IORead, NULL, ); 
```

错误 = avformat_open_input(&pFormatCtx, "", NULL, NULL);

其中 pFormatCtx 是 AvFormatContext 并且 ioread 是从接收器填充缓冲区的函数

对于您的第二个问题，我也遇到了同样的问题，不幸的是我没有找到解决方案希望您找到并分享

# date - Mediawiki 中的高级搜索

> ID：16186511
> 
> 赞同：0
> 
> 时间：2013-04-24T07:57:00.287
> 
> 标签：date, search, mediawiki

我如何找到文章的日期或尺寸？

```
For example, from 24/04/2013 to 04/01/2013 and the size of 12800 bytes 
```

Mediawiki中有这样的扩展吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:06:49.207

我不知道扩展名，但您可以使用[`allpages`API](http://www.mediawiki.org/wiki/API%3aAllpages)按大小查找页面，然后通过[检索修订时间戳来](http://www.mediawiki.org/wiki/API%3aProperties#revisions_.2F_rv)[嵌套查询](http://www.mediawiki.org/wiki/API%3aQuery#Generators)，您可以通过这些时间戳过滤结果。

# qt - 分配 65536 字节的内存不足

> ID：16186514
> 
> 赞同：2
> 
> 时间：2013-04-24T07:57:13.980
> 
> 标签：qt, compiler-errors

当我尝试调试我的 Qt 应用程序时，我收到以下错误：

*   *内存不足分配 65536 字节* **cc1plus.exe**

我在 qrc 资源中有一个大于 10 MB 的 .exe 文件。

我在 .pro 文件中尝试**了 QMAKE_CXXFLAGS += -O0**，但仍然出现内存错误。

*   Qt 4.8.4 静态编译
*   视窗 7 x64
*   16 GB 内存

# php - 使用 php curl 将 zip 文件上传到远程服务器

> ID：16186517
> 
> 赞同：0
> 
> 时间：2013-04-24T07:57:26.163
> 
> 标签：php, curl, upload, zip, sfx

正在完成以下工作： 1) 客户端使用 API 调用从我们的服务器请求一个 ZIP 文件。2）他在API请求中提供了一个回调url，它是一个aspx程序。3）我们创建ZIP文件，使用php CURL脚本将ZIP文件上传到他的aspx程序中。

问题是，当文件上传到他的服务器上时，ZIP 文件格式会更改（到 SFX Zip 存档）。如果使用简单的 php 脚本将相同的文件上传到我们的服务器，则格式保持不变。我们不确定问题是否与我们使用 CURL 上传文件的方式有关，或者是否与客户端在其服务器上保存 ZIP 文件的方式有关。

CURL 代码如下：

```
$download_file = "/tmp/test.zip";
$callBackUrl = "http://www.remoteurl/theclients_uploadcode.aspx";
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('file' => "@$download_file"));
curl_setopt($ch, CURLOPT_URL, $callBackUrl);
curl_exec($ch);
curl_close($ch); 
```

客户端提供了保存数据的aspx代码：

```
private void SavePost()
{
   HttpPostedData = ReadFully(this.Page.Request.InputStream);
   Timestamp = DateTime.Now.ToString("MMddyyyy-hhmmss");
   Timestamp = Timestamp.Replace("-", "").Replace(" ", "").Replace(":", "");                      
   if (FileName.ToString() == string.Empty)
   {
    FileName = Timestamp;
   }
   if (FileName.Contains(".zip") == false)
   {
    FileName = FileName + ".zip";
   }
   tempFilePath = (tempFilePath + FileName);
   Response.Write((tempFilePath + ("  HttpPostedData:" + HttpPostedData)));
}

 public static byte[] ReadFully(Stream input)
    {

        byte[] buffer = new byte[16 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:56:56.753

你保存`SavePost`不保存任何东西？您尝试从 this.Page.Request.InputStream 中读取，请参阅[FileUpload to FileStream](https://stackoverflow.com/questions/3068303/fileupload-to-filestream)如何转换它。

btw 另请参阅[如何在不使用 ASP.NET 服务器端控件的情况下从 C# ASP.NET 中的 HTML 文件类型读取输入流](https://stackoverflow.com/questions/3736477/how-to-read-inputstream-from-html-file-type-in-c-sharp-asp-net-without-using-asp)。这表明您也可以使用 (c#)：

```
HttpPostedFile file = Request.Files["file"];
if (file != null && file.ContentLength )
{
    string fname = Path.GetFileName(file.FileName);
    file.SaveAs(Server.MapPath(Path.Combine("~/App_Data/", fname)));
} 
```

# android - 具有翻转效果的 Android CoverFlow 作为 IOS 的coverflow

> ID：16186522
> 
> 赞同：1
> 
> 时间：2013-04-24T07:57:45.353
> 
> 标签：android, carousel, coverflow

[有人可以向我推荐任何适用于 Android 的 CoverFlow 示例或库，它们可以实现与IOS CoverFlow](http://www.youtube.com/watch?v=oTXtO5KXalE)相同的效果，并在选择时具有封面翻转效果。我浏览了几个 android 库和示例，但没有一个可以达到我需要的效果，所以如果你们中的任何人遇到过这样的库，请提出建议。一些示例：

1.  [轮播安卓](http://developer.digitalaria.com/devguide/gama/en/gama/carousel_android.php)

2.  [安卓覆盖流](https://code.google.com/p/android-coverflow/)

    提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:59:24.803

您可以使用[此库](http://code.google.com/p/android-coverflow/)进行封面流效果。

# angularjs - 对不可达资源的资源调用冻结 UI

> ID：16186523
> 
> 赞同：0
> 
> 时间：2013-04-24T07:57:48.300
> 
> 标签：angularjs

我们有以下服务：

```
app.factory('myService', function($resource) {
   return $resource("resources/myServiceUri", {param1: "foo"}, {
      get: {method: "GET", isArray: true}
    });
}); 
```

在页面加载时，我们的应用程序会像这样调用服务：

```
myService.get({},function(result) {
    model.myServicesModel = result;
    console.log("if there are network problems the control goes here");
}); 
```

当后台运行并且连接正常时，这非常有效。但是，如果由于某种原因或其他后台服务无法连接到数据库，它正在使用资源调用将返回错误代码 500 的响应。这仍然可以，但似乎此服务调用返回大量资源对象，每个资源对象都包含一个字符从后台服务抛出的异常。

如您所见，我们根本没有使用错误回调，但即使我们使用了控件，也会在发生此问题时转到成功回调。

有没有好的方法来处理这个？我们能以某种方式绕过返回错误代码 500 的响应吗？

可以通过进行仅返回同一调用的 http 标头的“预资源调用”来解决问题，但是有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:10:11.640

我不确定这是否是正确的解决方案，但添加一个空的错误回调应该可以解决问题。

```
myService.get({},function(result) {
  model.myServicesModel = result;
  console.log("if there are network problems the control goes here");
}, function() {
  //error
}); 
```

使用此回调，您的结果将不会分配给您的模型。如果您在回调函数中添加参数，您还可以了解错误状态和标头，并向用户显示有关错误的有用信息。

# c# - 来自远程服务器的 WCF 服务代理创建错误

> ID：16186526
> 
> 赞同：2
> 
> 时间：2013-04-24T07:57:59.363
> 
> 标签：c#, wcf, iis

我在装有 Visual Studio 2008 的 Windows XP 机器上托管了一个 WCF 服务。当我尝试从本地机器浏览 wcf 服务时，它的表现非常好。当我尝试将 wcfservice 引用添加到同一 LAN 连接中不同机器中的应用程序中时，WCF 页面正常打开但 wcf?wsdl 抛出错误：

“*URL xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc 处的文档未被识别为已知文档类型。来自每种已知类型的错误消息可能会帮助您解决问题： - 来自“DISCO 文档”的报告是“下载 'er01dsk40612560.cmcportal.com/WcfGenericService/GenericService.svc?disco' 时出错。”。- 请求失败，HTTP 状态为 404：未找到。- 来自“WSDL 文档”的报告是“无法识别文档格式（内容类型为 'text/html; charset=UTF-8'）。”。- 来自“xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc”的报告是“无法识别文档格式（内容类型为 'text/html; charset=UTF-8'）。”。- 来自“XML Schema”的报告是“无法识别文档格式（内容类型是” 文本/html；字符集=UTF-8').'。元数据包含无法解析的引用：“xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc”。内容类型应用程序/soap+xml；服务 xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc 不支持 charset=utf-8。客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'.. 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。” 服务 xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc 不支持 charset=utf-8。客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'.. 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。” 服务 xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc 不支持 charset=utf-8。客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'.. 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。”*

托管在同一台机器上的其他 WCF 服务，比如我正在谈论的 WCF 服务，运行良好。供您参考，我附上了上述 WCF 服务的 web.config

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <!--STARTWORKFLOW-->
    <section name="WorkflowRuntime" type="System.Workflow.Runtime.Configuration.WorkflowRuntimeSection, System.Workflow.Runtime, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <section name="WorkflowRuntimeConfig" type="System.Workflow.Runtime.Configuration.WorkflowRuntimeSection, System.Workflow.Runtime, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <!--ENDWORKFLOW-->
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="EnvType" value="UAT" />
    <add key="con" value="Password=cnfg;User ID=cnfg;Data Source=conf; max pool size=1"/>
    <!--SA v4.16.0.0-->
    <add key="maxpool" value="100"></add>
    <!--EA v4.16.0.0-->
    <!-- STARTWORKFLOW -->
    <add key="UWCustomWorkflowForAll" value="0"></add>
    <add key="UWClsRequestObjectStatus" value="0"></add>
    <add key="ClaimProcessingThruWF" value="1"></add>
    <add key="ClaimApprovalThruWF" value="1"></add>
    <add key="ApprovalCondition" value="1"></add>
    <!-- ENDWORKFLOW -->
    <!--valid values GenRemote,WcfLocal,WcfRemote-->
    <add key="MailSMSServerType" value="WcfLocal"/>
    <!--valid values GenRemote,WcfLocal,WcfRemote-->
    <add key="ServicePath" value=""/>
    <add key="systemMailSender" value="abcinsuranceonline@cmcltd.com"/>
    <add key="systemMailServer" value="172.16.11.11"/>
    <add key="systemSMSServer" value="209.160.65.107"/>
    <add key="systemSMSUserID" value="cmc"/>
    <add key="systemSMSUserPWD" value="cmc567"/>
    <add key="UseEncryptedPassword" value="N"></add>
    <add key="Secretkey1" value="fgfgfgkk"></add>
    <add key="Secretkey2" value="ylkghjfr"></add>
    <add key="ConPwdServiceURL" value=""/>
    <add key="Secretfilepath" value="C:\GenisysPassword.txt"></add>
    <add key="SecretkeyDefualt1" value="fgfgfgkk"></add>
    <add key="SecretkeyDefualt2" value="ylkghjfr"></add>
    <add key="SecretfilepathDefualt" value="C:\GenisysDefaultPassword.txt"></add>
    <add key="EscalationMailSender" value="abcinsuranceonline@cmcltd.com" />
    <add key="ClusterSize" value="*" />
    <!--SA v4.16.0.0 key must be of exact 8 characters-->
    <!--Note: changing key will invalidate running batch jobs.-->
    <!--Note: After key change batch must be re-registered.-->
    <add key="BatchSecretKey1" value="s!a^lo1~"/>
    <!--EA v4.16.0.0 key must be of exact 8 characters-->
    <!--Changes made on 15072009 V4.16.0.0(36088)-->
    <add key="ExceptionSystem" value="Y"/>
    <!--Changes made on 15072009 V4.16.0.0(36088)-->

    <!-- Start: added By Dipen 22/12/2009 For GenericServiceBL(AuthenticationBL.vb) to implement timeout for authenticated user LoggedUserTimeOut-->
    <add key="LoggedUserTimeOut" value="1440"/>
    <!--End: -->
  </appSettings>
  <connectionStrings/>
  <system.web>
    <!--
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.

            Visual Basic options:
            Set strict="true" to disallow all data type conversions 
            where data loss can occur. 
            Set explicit="true" to force declaration of all variables.
    -->
    <compilation debug="true" strict="false" explicit="true">
      <assemblies>
        <!--STARTWORKFLOW-->
        <add assembly="System.Workflow.Activities, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Workflow.ComponentModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Workflow.Runtime, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <!--ENDWORKFLOW-->
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <pages>
      <namespaces>
        <clear/>
        <add namespace="System"/>
        <add namespace="System.Collections"/>
        <add namespace="System.Collections.Specialized"/>
        <add namespace="System.Configuration"/>
        <add namespace="System.Text"/>
        <add namespace="System.Text.RegularExpressions"/>
        <add namespace="System.Linq"/>
        <add namespace="System.Web"/>
        <add namespace="System.Web.Caching"/>
        <add namespace="System.Web.SessionState"/>
        <add namespace="System.Web.Security"/>
        <add namespace="System.Web.Profile"/>
        <add namespace="System.Web.UI"/>
        <add namespace="System.Web.UI.WebControls"/>
        <add namespace="System.Web.UI.WebControls.WebParts"/>
        <add namespace="System.Web.UI.HtmlControls"/>
      </namespaces>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
    -->
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="OptionInfer" value="true"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!--
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>

  <system.serviceModel>
    <services>
      <service behaviorConfiguration="WcfGenericService.Service1Behavior" name="WcfGenericService.GenericService">
        <!--
        <endpoint address="net.tcp://xxx.xxx.xxx.xxx/WcfGenConfService/GenConfService.svc" binding="netTcpBinding" bindingConfiguration="EndPointHTTPGen"
          name="EndPointTCP" contract="WcfGenConfService.IGenConfService" >
        </endpoint>
        -->
        <endpoint address="" binding="basicHttpBinding" name="EndPointHTTPGeneric" contract="WcfGenericService.IGenericService" bindingConfiguration ="EndPointHTTPGeneric">
          <identity>
            <dns  value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfGenericService.Service1Behavior" >
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <!--SA arun for sending mail/sms thru remote WcfGenConfService-->
    <bindings>
      <basicHttpBinding>
        <binding name="EndPointHTTPGeneric" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="xxx.xxx.xxx.xxx/WcfGenericService/GenericService.svc"
          binding="basicHttpBinding" bindingConfiguration="EndPointHTTPGeneric"
          contract="GenericService.IGenericService" name="EndPointHTTPGeneric" />
    </client>
    <!--SA arun for sending mail/sms thru remote WcfGenConfService-->
  </system.serviceModel>

  <!--STARTWORKFLOW-->
  <WorkflowRuntime Name="WorkflowServiceContainer">
    <Services>
      <add type="System.Workflow.Runtime.Hosting.ManualWorkflowSchedulerService, System.Workflow.Runtime, Version=3.0.00000.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" useActiveTimers="true"/>
      <!--<add type="System.Workflow.Runtime.Hosting.DefaultWorkflowTransactionService, System.Workflow.Runtime, Version=3.0.00000.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>-->
      <add type="System.Workflow.Activities.ExternalDataExchangeService, System.Workflow.Activities, Version=3.0.00000.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </Services>
  </WorkflowRuntime>
  <WorkflowRuntimeConfig>
    <Services>
      <!--v4.24.0.0 useActiveTimers added as per Microsoft Recommendation-->
      <add type="System.Workflow.Runtime.Hosting.ManualWorkflowSchedulerService, System.Workflow.Runtime, Version=3.0.00000.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" useActiveTimers="true" />
      <add type="System.Workflow.Activities.ExternalDataExchangeService, System.Workflow.Activities, Version=3.0.00000.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </Services>
  </WorkflowRuntimeConfig>
  <!--ENDWORKFLOW-->

</configuration> 
```

你能告诉我如何解决这个问题吗？提前致谢。

# javascript - 为什么显示/隐藏表格的计算量如此之大？

> ID：16186530
> 
> 赞同：0
> 
> 时间：2013-04-24T07:58:12.437
> 
> 标签：javascript, performance, css-tables

我正在使用相当大的表格，并且因为在表格下载后我正在用 Javascript 进行一些格式化，所以我想隐藏表格 ( `display:none`) 直到它准备好（而不是更改为 ("display","")） . 它工作正常，唯一的问题是它在 IE8 中超级慢，但如果我不隐藏表格，它超级快，为什么？有没有办法避免这种情况？（我的问题是我向用户展示了一张丑陋的桌子，而不是我在他面前改变它，我不喜欢这样）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:02:49.157

尝试将 设置`style.visibility`为隐藏/可见而不是设置显示。这将允许表格保持其位置，从而无需重新绘制页面。

# spring - @Transactional 和 HibernateTransactionManager 的关系

> ID：16186534
> 
> 赞同：0
> 
> 时间：2013-04-24T07:58:20.540
> 
> 标签：spring, hibernate, transactions

（对 Hibernate 很陌生）大家好，

我已经配置了一个 HibernateTransactionManager

*   如果我在没有任何参数的情况下离开@Transactional，那么在 HibernateTransactionManager 中设置的值会被保留，对吧？
*   如果我填充@transactional 属性，HibernateTransactionManager 属性将被覆盖，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:50:07.507

我认为你错了。@Transactional 参数只是为 TransactionDefenition 对象设置参数，它们不会导致 HibernateTransactionManager。

# python - 在 python 字典中将 '\n' 替换为 ''

> ID：16186536
> 
> 赞同：0
> 
> 时间：2013-04-24T07:58:32.363
> 
> 标签：python, json

我正在从带有 json 对象的数据集中读取数据，在数据集中，一些值具有 abcd\nabdc 格式。我使用了以下代码：

```
for line in open("c:\\dataset","r+").readlines():
       d= json.loads(line)
       str1 = d['strkey1']
       str1.replace('\n' , '') 
```

但它无法取代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:58:57.317

```
d['strkey1'] = d['strkey1'].replace('\n', '') 
```

字符串是不可变的，因此字符串方法返回新字符串，**而不是**修改原始字符串。

还：

```
for line in open("c:\\dataset","r+"): 
```

就足够了，您不需要`.readlines()`在遍历每一行之前将整个文件放入内存。但这还不够，您需要记住关闭文件，一条`with`语句会为您处理：

```
with open("c:\\dataset","r+") as f:
    for line in f:
        # do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:12:45.570

只需将您的代码更改为：

```
for line in open("c:\\dataset","r+").readlines():
       dict = json.loads(line)
       dict['strkey1'] = dict['strkey1'].replace('\n','') 
```

这行得通，你的不是，因为字符串是不可变的（它们不能被改变），所以字符串方法返回一个新的字符串，（在这里你需要存储）

# javascript - Facebook 发送对话框出现和消失

> ID：16186538
> 
> 赞同：0
> 
> 时间：2013-04-24T07:58:34.090
> 
> 标签：javascript, dialog, facebook-javascript-sdk

我正在开发一个 facebook 应用程序，我正在尝试向我的应用程序用户发送一条私人消息，但是下次弹出窗口会出现并消失，我使用了[https://developers.facebook.com/docs/reference/dialogs中的这个脚本/send/](https://developers.facebook.com/docs/reference/dialogs/send/)，当我在链接上单击 2 到 3 次（在下面指定）然后出现一个弹出窗口，请记住我包括 all.js 和一个 id =“fb-root”的 div 由 facebook

```
FB.init({
    appId: '<?=$this->facebook->getAppID()?>', 
    xfbml: true, 
    cookie: true
});
function send_message(user_id) {
    FB.ui({
        to: user_id,
        method: 'send',
        name: 'name',
        link: 'http://www.something.com'
    });
} 
```

链接是，

```
<a href="" onclick="send_message('<?=user_id?>')">send msg</a> 
```

请提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:05:25.560

您的控制台是否打印了其他内容？检查控制台中的 Facebook 对象。可能是缺少了什么。您确定 appId 是否正确设置，并且 user_id 也是如此。Facebook 对此可能非常讨厌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:11:20.003

```
<a href="" onclick="send_message('<?=user_id?>')">send msg</a> 
```

空`href`属性被解释为指向您当前所在的同一个 URL。

而且由于您*没有*禁止该链接的默认操作，我假设您的浏览器只是在单击该链接时重新加载页面 - 从那以后，您会看到对话框一小会儿，直到您的浏览器重新加载并呈现页面再次。

做那个

```
<a href="#" onclick="send_message('<?=user_id?>');return false;">send msg</a> 
```

相反，它应该可以工作。

# conflict - RPM 规范中冲突“提供”的解决方案

> ID：16186539
> 
> 赞同：1
> 
> 时间：2013-04-24T07:58:34.767
> 
> 标签：conflict, rpm, yum, rpm-spec, package-management

考虑一种情况，其中有不同的 rpm 提供相同的功能。一个假设的例子是让 Oracle JDK rpm、Oracle JRE rpm 和 OpenJDK rpm 在其 SPEC 文件的“Provides”字段中都列出了“java-env”。现在我们有了像 ant、groovy、maven 这样的 rpm，它们的 SPEC 文件中都将“Requires”字段设置为“java-env”。尝试安装 groovy 或 maven 时会安装什么？我们可以通过哪些方式控制安装哪些依赖项？我认为一种方法是将 Oracle JDK rpm、Oracle JRE rpm 和 OpenJDK 都放在不同的存储库中并在存储库上设置优先级，但是这样一来，由于我有几种此类冲突，存储库的数量可能会继续增长.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:08:17.893

如果多个包提供相同的功能，则可以安装它们中的每一个。这主要是用户选择。正确完成软件包后，应该可以安装每个软件包（一次只能安装一个）。

需要环境的包甚至不会注意到安装或使用了哪一个。

在没有用户交互的情况下安装哪个包取决于包管理器。有的询问用户，有的选择首选，...

如果您需要一个特殊的 Java 版本，那么您应该需要该特定包，而不是需要通用包。这里的问题是另一个包可能需要另一个包，然后你就会遇到无法解决的冲突。所以最好总是使用 generic `Requires`。

对于大多数系统，还可以安装多个 java 包。然后安装过程会选择最好的一个作为默认值（通过`/etc/alternatives`机制）。

# blackberry-webworks - 试图将 bbm 与我正在开发的应用程序集成

> ID：16186543
> 
> 赞同：0
> 
> 时间：2013-04-24T07:58:44.047
> 
> 标签：blackberry-webworks, bb-messenger

我目前正在开发一个需要登录的 bb 应用程序，我想知道如何使用 bbwork 示例 sdk 让拥有 bbm 的用户仅使用他们的 bbm id 登录。我无法找到有关此的任何具体信息。我知道 bbm sdk 在 webworks 上可用，但我不确定如何使用提供的示例并将其与我的应用程序集成以登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:54:23.803

您可以在开发人员站点 @ [https://developer.blackberry.com/html5/apis/blackberry.bbm.platform.html上找到在 WebWorks 应用程序中使用 BlackBerry Messenger 所需的所有信息](https://developer.blackberry.com/html5/apis/blackberry.bbm.platform.html)

# c# - 如果 AcceptsReturn=True 则不遵守 TextBox 中的 MaxLength

> ID：16186551
> 
> 赞同：1
> 
> 时间：2013-04-24T07:59:01.927
> 
> 标签：c#, xaml, winrt-xaml

有没有人找到解决 TextBox 字段问题的方法，它的定义如下所示：

```
<TextBox MaxLength="10" AcceptsReturn="True"/> 
```

在上述情况下，用户不能输入超过 10 个字符，只要他不使用“Enter”，它就可以工作。一旦他使用 enter 来刹车线，那么 TextBox 将让他每行再输入 +2 个字符。所以看起来负责尊重“MaxLength”属性的方法忽略了“CR LF”:(任何关于如何克服这个问题的建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:13:13.863

找到了解决该问题的方法。它并不完美，但可以完成工作。

我使用的是一个转换器，它使用用户输入从文本中删除“\r”字符：

```
public class RemoveLineFeedCharConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return value; //do not convert in that direction
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        var text = (string) value;
        return text.Replace("\r", ""); //remove line feed character
    }
} 
```

如前所述，这并不完美，但至少使输入的文本比 MaxLength 短。

希望这会对某人有所帮助

关于MG

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T14:25:53.830

我在没有转换器的情况下做到了这一点。如果您使用双向绑定，如下所示：

```
<TextBox Text="{Binding TextBoxText, Mode=TwoWay}" MaxLength="10" AcceptsReturns="True"/> 
```

然后你可以将类似的想法应用于绑定属性的 set 函数：

```
private string _textboxtext;
public string TextBoxText 
{
    get{return _textboxtext;} 
    set
    {
        _textboxtext=value.Replace("\r",""); 
        OnPropertyChanged();
    }
} 
```

# magento - 带有可配置产品的 Magmi Datapump api

> ID：16186552
> 
> 赞同：1
> 
> 时间：2013-04-24T07:59:01.790
> 
> 标签：magento, magento-1.7, magmi

我正在尝试使用 datapump api 创建可配置的产品。我可以创建简单的产品。但我无法创建/链接可配置产品。这是我的数据数组。我错过了什么吗？

```
Array(['type'] => 'simple',['sku'] => 'A001-2',['price'] => 10,['color'] => 'Blue',['qty'] => 100,['is_in_stock'] => 1,['name'] => 'A001-2',['tax_class_id'] => 1,['store'] => 'admin',)

Array(['type'] => 'simple',['sku'] => 'A001-1',['price'] => 10,['color'] => 'Indigo',['qty'] => 100,['is_in_stock'] => 1,['name'] => A001-1,['tax_class_id'] => 1,['store'] => admin,)

Array(['type'] => 'configurable', ['sku'] => 'A001',['name'] => 'TREAD JEANS',['description'] => 'Latest Edition of gunshot jeans',['price'] => 55.5,['simples_skus'] => 'A001-2,A001-1',['configurable_attributes'] => 'color',['qty'] => 100,['is_in_stock'] => 1,['tax_class_id'] => 1,) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:17:54.847

据我所知，您缺少强制性`attribute_set`数据。尝试为您的项目定义属性集并重新导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:48:41.553

最后我自己找到了解决方案。由于我不使用 csv 文件导入，我不得不从“plugins.conf”文件中删除 Magmi_CSVDataSource。现在我的数据源是这样的

```
[PLUGINS_DATASOURCES]
class = "" 
```

以前是这样的

```
[PLUGINS_DATASOURCES]
class = "Magmi_CSVDataSource" 
```

这对我有用。现在我可以使用数据泵导入可配置产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T20:08:44.013

我看到你已经实现了它的修改`plugins.conf`。你也可以在没有修改的情况下做到这一点。这是一个示例代码：

```
<?php
// assuming that your script file is located in magmi/integration/datapump/product.php,
// include "magmi_defs.php" , once done, you will be able to use any magmi includes without specific path.
require_once("../../inc/magmi_defs.php");
//Datapump include
require_once("../inc/magmi_datapump.php");

// create a Product import Datapump using Magmi_DatapumpFactory
$dp=Magmi_DataPumpFactory::getDataPumpInstance("productimport");

$dp->beginImportSession("default","create");
$newProductData = array(
    'type'          => 'simple',
    'sku'           => "A001-2",
    'qty'           => 1000,
    'color'         => 'Blue',
    'price'         => 10,
    'name'          => 'A001-2',
    'tax_class_id'  => 1,
    'is_in_stock'   => 1,
    'store'         => 'admin'
);
$dp->ingest($newProductData);

$newProductData = array(
    'type'          => 'simple',
    'sku'           => "A001-1",
    'qty'           => 1000,
    'color'         => 'Indigo',
    'price'         => 10,
    'name'          => 'A001-1',
    'tax_class_id'  => 1,
    'is_in_stock'   => 1,
    'store'         => 'admin'
);
$dp->ingest($newProductData);

$newProductData = array(
    'type'          => 'configurable',
    'sku'           => "A001",
    'qty'           => 1000,
    'price'         => 10,
    'simples_skus'  => 'A001-2,A001-1',
    'configurable_attributes' => 'color',
    'name'          => 'TREAD JEANS',
    'tax_class_id'  => 1,
    'is_in_stock'   => 1,
    'store'         => 'admin'
);
$dp->ingest($newProductData);
$dp->endImportSession();
?> 
```

不要忘记启用`Configurable Item processor`使用 magmi UI。

# python - 使用 paramiko 将文件夹传输到远程机器

> ID：16186558
> 
> 赞同：0
> 
> 时间：2013-04-24T07:59:39.060
> 
> 标签：python, paramiko

我正在尝试将一些文件夹复制到都在 linux 上运行的远程机器上。以下是我使用的代码，我不确定需要添加什么才能进行复制

```
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(
    paramiko.AutoAddPolicy())
ssh.connect('xxx.xxx.xx.xx', username='root', 
    password='xxxxxxx')
#scp -r /mnt/hgfs/windows-D-drive/Testing/ root@xxx.xxx.xx.xx:/home # equivalent code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:16:45.073

这里最简单的方法是压缩文件并使用 sftp.put 将文件放在远程机器上并在远程机器上解压：

```
tar = tarfile.open("Tests.tar.gz", "w:gz")
path_me = os.path.dirname(os.path.realpath(sys.argv[0]))
tar.add(path_me, arcname="Tests")
tar.close()

transport = paramiko.Transport((SERVER_IP, 22))
transport.connect(username = 'root', password = 'xxxxx')

sftp = paramiko.SFTPClient.from_transport(transport)
remotepath='/home/Tests.tar.gz'
localpath=os.path.join(path_me+"/Tests.tar.gz")
#print(localpath)
sftp.put(localpath, remotepath)
sftp.close()
transport.close()

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(SERVER_IP, username='root', password='philips')
stdin, stdout, stderr = ssh.exec_command("tar -C /home -xzf /home/Tests.tar.gz") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T18:44:08.503

# 我通过在目的地一个一个地发送具有相同树结构的文件来做到这一点。

```
import paramiko
import os

client=paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
with open ("/home/vikas/Desktop/password.txt" ) as a:
    ip,username,password=a.readline().split(" ")
client.connect(hostname=ip,username=username ,password=password)
sftp_client=client.open_sftp()

#client.exec_command("cd") 
# LETS make 'aaaa' folder sync with server 
#/root/ is home for remote server 

localfolder="/home/vikas/Desktop/aaaa/"
basefolder="/".join(localfolder.split("/")[:-2])

for path,dirs,files in os.walk(localfolder):
    if path.lstrip(localfolder)!=None:       
        extrapath=path.split(basefolder)[-1]   
        command="mkdir /root/{}".format(extrapath)   
        client.exec_command(command)

    for file in files:  
        filepath=os.path.join(path,file)
        extrapath=path.split(basefolder)[-1]
        sftp_client.put(filepath,"/root/{}/{}".format(extrapath,file))
sftp_client.close()
client.close() 
```

# uibinder - 我想使用 uibinder 获得相对于页面大小的 tablayoutpanelcontent 滚动条。有可能吗？

> ID：16186565
> 
> 赞同：1
> 
> 时间：2013-04-24T08:00:01.147
> 
> 标签：uibinder

我想使用 uibinder 获得相对于页面大小的 tablayoutpanelcontent 滚动条。可能吗？

# java - 如何查找所有 assertTrue 是否通过或任何人失败？

> ID：16186570
> 
> 赞同：0
> 
> 时间：2013-04-24T08:00:16.990
> 
> 标签：java, junit

我有一个像身体一样的测试方法

```
{
    assertTrue("Login failed", somecondition);
    assertTrue("Page not browsing", somecondition);
    assertTrue("Button not found", somecondition);
    //here I want to found whether any assertTrue failed or all are passed
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:04:03.933

好吧，我不确定我是否理解，但是这样的事情会起作用

```
assertTrue("are my conditions true? {}",condition1 && condition2 && condition3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:04:39.680

如果你已经到达这条线

```
//here I want to found whether any assertTrue failed or all are passed 
```

那么你肯定知道你已经通过了所有的 assertTrue 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:05:10.993

您都必须使用“assertTrue”方法在 JUnit 报告中记录一个条目，并使用您自己的变量来计算您想要的

```
{
   allPassed = True;

   assertTrue("Login failed", somecondition);
   allPassed = allPassed && somecondition;

   assertTrue("Page not browsing", somecondition);
   allPassed = allPassed && somecondition;

   // ...

   assertTrue("All tests succeeded", allPassed);
} 
```

# perl - 查找两个不同的模式和匹配计数

> ID：16186575
> 
> 赞同：-1
> 
> 时间：2013-04-24T08:00:23.267
> 
> 标签：perl

我需要找出刺痛中有多少个 10 和 01 。例如： 10101 在这个，有两个 10 和两个 01 像那样使用 reg ex 并找到它？并打印 10 匹配 2 次， 01 匹配 2 次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:06:32.190

使用[goatse 运算符](http://search.cpan.org/dist/perlsecret/lib/perlsecret.pod#Goatse__=%28_%29=) `=()=`：

```
$string = '10101';

$a =()= $string =~ m/10/g;
$b =()= $string =~ m/01/g;

print "a: $a\nb: $b\n"; 
```

输出是：

```
a: 2
b: 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:09:07.637

这是我的解决方案：

```
use strict;
use warnings;

my $test = "101010";

my @matches_10 = $test =~ m!10!g;
my @matches_01 = $test =~ m!01!g;
print "matches 10: ", scalar(@matches_10), "\n"; #<-- prints: 3
print "matches 01: ", scalar(@matches_01), "\n"; #<-- prints: 2 
```

# maven - 描述 pom.xml 中的部分？

> ID：16186576
> 
> 赞同：2
> 
> 时间：2013-04-24T08:00:23.853
> 
> 标签：maven

以下是 pom.xml 的一部分：

```
<build>
    <plugins>
        <plugin>
            <groupId>test.group</groupId>
            <artifactId>test-artifact</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </plugin>
    </plugins>
</build> 
```

这是为了什么？这是否意味着当我部署这个项目时，groupId、artifactId 和 version 参数将是本节中设置的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:19:03.633

三个元素`groupId`++作为 maven 中工件的唯一标识符`artifactId`。`version`在您的情况下，他们指定名为 test-artifact 的插件。为了知道这个插件在做什么，你必须阅读这个特定插件的文档。

大多数插件都会向 maven 注册某种关键字，您可以使用它来执行此插件，其他插件作为阶段的一部分执行。例如，您可以将此插件绑定到测试阶段

```
<phase>test</phase> 
```

除非此插件默认绑定到某个阶段，否则在您部署项目时可能不会执行它。

有关插件向 maven 注册的关键字类型的示例，请查看 maven-exec-plugin [1]，它将`exec:exec`和`exec:java`关键字注册到 maven，以便您可以运行

```
mvn exec:exec 
```

[1] [http://mojo.codehaus.org/exec-maven-plugin/usage.html](http://mojo.codehaus.org/exec-maven-plugin/usage.html)

# jquery - 在 JPlayer 无法播放 flv 文件

> ID：16186577
> 
> 赞同：0
> 
> 时间：2013-04-24T08:00:25.377
> 
> 标签：jquery, jplayer

```
$("#jquery_jplayer_1").jPlayer( {

      ready: function () {

        jQuery(this).jPlayer("setMedia", {
          m4v: url, // Defines the m4v url
        }).jPlayer("play"); // Attempts to Auto-Play the media
      },
      volume: 0.5,
      wmode:"window",
      swfPath: "js/libs/plugins/jQuery.jPlayer.2.1.0/Jplayer.swf",
      supplied: "m4v",

    }); 
```

我可以播放除 .flv 之外的所有视频。任何人都可以根据这个向我推荐一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:13:39.357

您的代码未显示 .flv。您如何配置“setMedia”和“supplied”来处理 .flv 文件。

您是否可以在 jPlayer 中配置错误处理程序以确定错误原因：

```
error: function(e) {
  alert( e.jPlayer.error.type );
} 
```

# c# - 建议通用服务的架构模式

> ID：16186579
> 
> 赞同：0
> 
> 时间：2013-04-24T08:00:30.830
> 
> 标签：c#, design-patterns

我们正在连接到描述一些 Stock Tase 信息的不同服务。目前提供三种服务。每个服务以不同的方式返回信息：XML、Json、管道分隔的字符串。服务的数量在不久的将来可能会增加。

我想以最灵活的方式实现这一点，并具有最大的抽象性。唯一的模式（我熟悉的模式）是工厂模式或抽象工厂。也许甚至策略模式也是一种选择。

也许您可以提出更好的实施方式？

概括：

```
StockInformationParser 
-> Connects to Service 1 || Service 2 || or Service N 
-> Parses and analyses information
-> returns StockInformationInfo. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:09:36.653

关于你的情况，我建议你应该应用更多的设计模式，它应该结合在一起来解决你的问题，如下所示： 1\. 外观模式：它作为一个接触点类来减少连接多个服务时的复杂性。

1.  对于每个返回每个服务的结果，您可能需要一个具有相同方法但每种格式的解析引擎 Json、Xml、rss、...相同的方法但不同的格式，因此您应该应用策略模式来解决。

2.  每个服务都需要一个方案工厂来连接，因此抽象工厂或工厂设计模式是合适的。

3.  最后一件事，您将希望结果是易于更改或扩展的抽象，稍后您可以在此处应用代理模式。

希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:21:43.670

我会有一点不同的方法。如何创建一个数据库并用这些服务填充它，然后您可以轻松地在最喜欢的 SQL 中查询数据库并使用 Group By、Order 和 Joins。

优点是，

*   无需重新发明查询适配器，毕竟您需要查询。
*   无需担心不同的格式，一旦获取的数据在数据库中保持为行。
*   改进的缓存在服务失败或连接问题的情况下，您仍然可以看到过去的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T08:28:20.973

我假设所有这些外部服务最终都映射到同一个域模型。

在这种情况下，您可以：

*   创建一个内部服务，其操作可由您的客户端使用，并为这些客户端优化数据合约。
*   内部服务使用底层存储库和域模型。
*   存储库负责抽象检索数据的方式。在内部，他们从外部提供者那里获取数据并将这些数据映射到您的域对象。您可以为每个外部服务编写一个提供程序并在您的存储库中使用它们。如果添加了外部服务，您只需添加一个新的提供者并将其添加到存储库逻辑中。

我个人喜欢 IoC，所以我会为每个组件创建接口并注入具体实例；这使得它更加灵活和可测试。

# c++ - 使用时出现 C++ 分段错误 和

> ID：16186580
> 
> 赞同：1
> 
> 时间：2013-04-24T08:00:35.010
> 
> 标签：c++, vector, segmentation-fault, fstream, ostream

我正在使用 3D 矢量，一切都很完美。当我添加并使用 ofstream 文件时，出现了分段错误。我根本不明白这个问题。以下代码不起作用：

```
#include <iostream>
#include <vector>
#include <fstream>

std::vector < std::vector < std::vector <float> > > hand;

int main(){

//First Part
std::ofstream file;
file.open("test.csv");
file << "Hello World!";
file.close();

//Second Part
hand.reserve(20);
for (int i=0; i<hand.capacity(); i++){
    hand[i].reserve(4);
}

return 0;
} 
```

如果您评论其中一个部分，则代码将完美运行。当您想同时使用它们时，会出现分段错误。

同样重要的是要注意代码可以在以下情况下工作：

```
hand.reserve(20); 
```

我们使用低于 8 的数字：

```
hand.reserve(7); //or lower 
```

我的问题是：为什么当我同时使用它们时代码不起作用？我能做些什么来修复它？你对这个特殊情况有什么解释吗？

我必须在更大的代码中实现这一点，所以最好知道根本原因并在接下来的情况下避免它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:02:12.447

改变

```
hand.reserve(20); 
```

至

```
hand.resize(20); 
```

`reserve`只会改变向量*容量*来存储数据，而不会创建任何实际对象。因此使用`reserve`你将得到仍然是空向量，它能够接受 20 个新值而无需重新分配。`capacity()`与`size()`返回向量已经为其分配内存的元素数量不同，它可能大于`size()`返回的实际元素数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:02:57.990

你不能`hand[i].`仅仅因为你已经为它们保留了空间就开始使用元素（即）......它们还没有被构造。您不仅应该使用它`resize(20)`来请求内存，而且还应该初始化 的元素`hand`，之后您可以`reserve`或`resize`包含的容器......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:02:48.063

`reserve`只会增加向量的容量，而不是它的实际大小。

然而，在你的循环中，当你`hand[i]`访问向量的项目时，就好像它实际上已经调整了大小一样，但实际上这些项目还不存在。因此出现了段错误。

您可能希望将第一个`reserve`调用替换为`resize`（可能还有其他后续`reserve`调用）。

# java - 切换 JPanel - 单击按钮时不切换

> ID：16186581
> 
> 赞同：0
> 
> 时间：2013-04-24T08:00:41.837
> 
> 标签：java, swing, jpanel, actionlistener, cardlayout

我制作了一个程序，但在单击按钮时切换 JPanel 时遇到了困难。

有四个按钮>“时间”“酒店菜单”“价格”和“退出”

退出很简单。

其余的需要将 JPanel 更改为另一个 Panel。我有工作的价格和时间。但是时间停止工作，我无法更改酒店菜单。

```
 import javax.swing.*;

    import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

        public class TravelAgentSystem {

    public static void main(String[] args){
        final Flights flightObject = new Flights();

        // Creates the main JFrame where all the panels will be situated.

        final JFrame mainFrame = new JFrame();
        mainFrame.setLayout(new BorderLayout());
        mainFrame.setTitle("Main Menu");
        mainFrame.setVisible(true);
        mainFrame.setSize(500,500);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // This is for the options Menu.

        final JPanel flightPanel = new JPanel();
        flightPanel.setLayout(new GridLayout(2,2));

        JButton timeb, priceb, hotelb, exitb;
        timeb = new JButton("Time");
        priceb = new JButton ("Price");
        hotelb = new JButton ("Hotels Menu");
        exitb = new JButton ("Exit Program");

        flightPanel.add(timeb);
        flightPanel.add(priceb);
        flightPanel.add(hotelb);
        flightPanel.add(exitb);

        mainFrame.add(flightPanel, BorderLayout.EAST);

        // There will be 2 panels on the left hand side for options travelPanel
        // and timePanel. These will be in another panel named leftPanel.

        JPanel travelPanel = new JPanel();
        travelPanel.setLayout(new GridLayout(2,2));
        travelPanel.setVisible(true);

        JPanel timePanel = new JPanel();
        timePanel = new JPanel();
        timePanel.setLayout(new GridLayout(2,1));
        timePanel.setVisible(true);

        JPanel leftPanel = new JPanel();
        leftPanel.setLayout(new GridLayout(2,1));
        leftPanel.setVisible(true);

        JLabel Lfrom, Lto, LDeparture;
        Lfrom = new JLabel("From");
        Lto = new JLabel("To");
        LDeparture = new JLabel("Departure Date (DD/MM/YY)");

        String[] fromOptions = {"East Midlands","Birmingham","Heathrow","Manchester"};
        String[] toOptions = {"New York", "Dahab", "Rome", "Sydney", "Tokyo"};

        final JComboBox fromDest = new JComboBox(fromOptions);
        final JComboBox toDest = new JComboBox(toOptions);

        // This is for the date textbox.

        JPanel datePanel = new JPanel();
        datePanel.setLayout(new FlowLayout());   
        JTextField dateField = new JTextField();
        dateField.setPreferredSize(new Dimension(100,20));
        datePanel.add(dateField);

        travelPanel.add(Lfrom);
        travelPanel.add(fromDest);
        travelPanel.add(Lto);
        travelPanel.add(toDest);

        timePanel.add(LDeparture);
        timePanel.add(datePanel);

        leftPanel.add(travelPanel);
        leftPanel.add(timePanel);

        mainFrame.add(leftPanel, BorderLayout.CENTER);
        mainFrame.pack();
        mainFrame.setVisible(true);

        // This creates the panel where the Time duration of the flight is output.

        final JPanel showTimePanel = new JPanel();
        showTimePanel.setLayout(new FlowLayout());
        showTimePanel.setVisible(false);

        mainFrame.add(showTimePanel, BorderLayout.EAST);

        final JPanel showPricePanel = new JPanel();
        showPricePanel.setLayout(new FlowLayout());
        showPricePanel.setVisible(false);

        mainFrame.add(showPricePanel, BorderLayout.EAST);

        // Creates the Panel for the Hotels Menu.

        final JPanel hotelPanel = new JPanel();
        hotelPanel.setVisible(false);
        hotelPanel.setLayout(new GridLayout(3,3));
        JButton hView,hAdd,hSort,hSave,hRetrieve,hExit;
        hView = new JButton("View");
        hAdd = new JButton ("Add");
        hSort = new JButton("Sort");
        hSave = new JButton ("Save");
        hRetrieve = new JButton ("Retrieve");
        hExit = new JButton ("Exit");

        hotelPanel.add(hView);
        hotelPanel.add(hAdd);
        hotelPanel.add(hSort);
        hotelPanel.add(hSave);
        hotelPanel.add(hRetrieve);
        hotelPanel.add(hExit);

        // buttonHandler class does all the eventhandling for the buttons.
        class buttonHandler implements ActionListener{

            public void actionPerformed(ActionEvent event) {
                JButton clickedButton = (JButton)event.getSource();
                String buttonText = clickedButton.getText();
                if (buttonText.equals("Exit Program")) {System.exit(0);}

                else if (buttonText.equals("Hotels Menu")){
                    flightPanel.setVisible(false);
                    hotelPanel.setVisible(true);
                }
                else if (buttonText.equals("Time")){
                    int fromDestination = fromDest.getSelectedIndex();
                    int toDestination = toDest.getSelectedIndex();
                    flightObject.setTime(fromDestination, toDestination);
                    String timeTaken = flightObject.getTime();
                    JLabel timeLabel = new JLabel("The Duration of the Flight is: " + timeTaken);

                    showTimePanel.add(timeLabel);
                    flightPanel.setVisible(false);
                    showTimePanel.setVisible(true);

                }
                else if(buttonText.equals("Price")){
                    int fromDestination = fromDest.getSelectedIndex();
                    int toDestination = toDest.getSelectedIndex();
                    flightObject.setPrice(fromDestination, toDestination);
                    int Price = flightObject.getPrice();
                    JLabel priceLabel = new JLabel ("The Price of the Flight is: " + Price + " GBP");

                    showPricePanel.add(priceLabel);
                    flightPanel.setVisible(false);
                    showPricePanel.setVisible(true);
                }
            }

        }

        buttonHandler handler = new buttonHandler();

        exitb.addActionListener(handler);
        timeb.addActionListener(handler);
        hotelb.addActionListener(handler);
        priceb.addActionListener(handler);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:19:07.617

`BorderLayout`当您将另一个组件添加到同一位置时替换组件。

`mainFrame.add(showTimePanel, BorderLayout.EAST);`

`mainFrame.add(showPricePanel, BorderLayout.EAST);`

# python - 在 Google AppEngine 中检索 .txt 文件内容

> ID：16186583
> 
> 赞同：4
> 
> 时间：2013-04-24T08:00:51.683
> 
> 标签：python, google-app-engine, text, blobstore

我正在尝试使用以下方式上传文本文件：

```
<input type="file" name="file"> 
```

并使用以下方法检索此文件：

```
class UploadHandler(webapp2.RequestHandler):
  def post(self):
    file=self.request.POST['file']
    self.response.headers['Content-Type'] = "text/plain"
    self.response.write(file.value) 
```

我的输出是：

```
Content-Type: text/plain MIME-Version: 1.0 Content-Length: 312 Content-MD5: MDIzYzM5YmNmOWRmMzY5Zjk2MTYzZTUzNjYwMTg5YjM= content-type: text/plain content-disposition: form-data; name="file"; filename="blah.txt" X-AppEngine-Upload-Creation: 2013-04-24 07:57:23.729774 
```

有什么办法可以检索文件内容而不是上面的标题。??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:07:08.657

以下似乎有效，因此必须发生其他事情（[现场示例](http://form.gae-init.appspot.com/)）：

```
import webapp2

class MainHandler(webapp2.RequestHandler):
  def get(self):
    self.response.headers['Content-Type'] = "text/html"
    self.response.write('''
      <form action="/upload" enctype="multipart/form-data" method="post">
        <input type="file" name="file">
        <input type="submit">
      </form>
    ''')

class UploadHandler(webapp2.RequestHandler):
  def post(self):
    file = self.request.POST['file']
    self.response.headers['Content-Type'] = "text/plain"
    self.response.write(file.value)

app = webapp2.WSGIApplication([
    ('/', MainHandler),
    ('/upload', UploadHandler)
  ], debug=True) 
```

# design-patterns - 应用领域设计

> ID：16186586
> 
> 赞同：0
> 
> 时间：2013-04-24T08:00:57.180
> 
> 标签：design-patterns

我有一个设计级别的问题，我不知道如何解决这个问题，但基本上我想要实现的是，我有一个基于控制台的应用程序，它基于输入作业执行某些任务（这是一个 XML 文件，由执行作业的所有详细信息），并且有一个基于 Web 的应用程序可以创建作业。

目前，我们手动复制 XML 文件并通过将 XML 文件作为参数传递来调用基于控制台的应用程序。

无论如何我可以设计一个应用程序，其中在基于 Web 的应用程序中创建的所有作业都传递到队列。

可能有 2 个饥饿的基于控制台的应用程序等待作业排队（以循环方式），一旦它们找到作业，它将开始执行作业。

还有一件事，我在想的是有什么方法可以从技术上控制网站上基于控制台的应用程序的数量，假设我有 50 个工作在排队，我可以启动 10 个基于控制台的应用程序来处理50 个工作而不是 2 个，所以这样可以完成工作。

如果您需要更多信息，请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:06:15.880

我做了如下的事情。

我有一个 Windows 服务，它是编排器，这意味着它使用 Quartz.NET 来安排任务。有 4 种类型的任务定期运行：

*   文件注册任务：获取新的 xml 文件并将它们注册到数据库中
*   批处理加载器：为注册文件创建批处理
*   批次提取器：为新批次创建作业
*   作业执行者：执行作业。

此 Windows 服务除了调度这些任务之外没有其他逻辑。作业执行器任务甚至可以并行运行多次。

实际逻辑位于从 Windows 服务中调用的（批量导入）WCF 服务中。这样，管理网站等其他应用程序能够使用批量导入 WCF 服务，以便他们可以获得文件、批次、进度等的列表，并允许对其进行操作。

作为 oj 作业执行结果执行的典型域逻辑是在专用域服务中完成的，从批量导入服务调用。

还可以设置属性以指示步骤应该是自动的还是手动的，批次是否是事务性的，等等。这种方式非常灵活，并且可以在出现问题时恢复，因为所有内容都保存在具有各种状态的数据库中。它还具有可扩展性：您可以将所有内容放在多台机器上，对 WCF 服务进行负载平衡并并行执行作业。

# html - 压缩图像能提高画布性能吗

> ID：16186594
> 
> 赞同：1
> 
> 时间：2013-04-24T08:01:09.990
> 
> 标签：html, image, canvas, compression, image-compression

我想知道，压缩图像（jpg，png）是否会提高基于 html5 画布的 Web 应用程序的性能，或者它是否只会改善用户体验，因为加载时间更少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T18:14:21.590

它提高了加载时间并在缓存中消耗更少的空间，但不会直接影响画布性能。

图像必须先解压缩并转换为正确的像素格式，然后才能在画布上使用，因此在解压缩完成后（一次），它没有任何区别。

# c# - SelectCommand.Connection 未初始化

> ID：16186596
> 
> 赞同：0
> 
> 时间：2013-04-24T08:01:12.363
> 
> 标签：c#, .net, sql, connection-string, sqldatareader

我正在尝试从我的 DataBaseOptions 类中的此方法访问我的数据库。我将它与 ASP.NET 一起用于 Web 开发。

每当我运行此方法时，在另一个类中，我都会收到以下错误：

> SelectCommand.Connection 未初始化

它说错误在第 40 行。这是我的代码：

（带有“adapter.Fill(dt);”的行是第 40 行。

```
private string connectionString = "oop_string"; // Global Variable
private static SqlConnection mycon = new SqlConnection(); // Global Variable
private static SqlCommand mycmd = new SqlCommand(); // Global Variable

public void setupConnection() {
    mycon.ConnectionString = ConfigurationManager.ConnectionStrings[connectionString].ToString();
    mycmd.Connection = mycon;
}

public bool UserExists(string username, string password) {
    setupConnection();

    mycmd.CommandText = "SELECT user_id FROM users WHERE user_username = @username AND user_password = @password";
    mycmd.Parameters.Add("@username", SqlDbType.VarChar).Value = username;
    mycmd.Parameters.Add("@password", SqlDbType.VarChar).Value = password;

    DataTable dt = new DataTable();
    SqlDataAdapter adapter = new SqlDataAdapter(mycmd);

    adapter.Fill(dt);

    if(dt.Rows.Count == 0) {
        return false;
    } else {
        return true;
    }
}

public int getUserID(string username, string password) {
        setupConnection();

        mycmd.CommandText = "SELECT user_id FROM users WHERE user_username = @username AND user_password = @password";
        mycmd.Parameters.Add("@username", SqlDbType.VarChar).Value = username;
        mycmd.Parameters.Add("@password", SqlDbType.VarChar).Value = password;

        SqlDataReader reader = mycmd.ExecuteReader();

        if(reader.Read()) {
            return Convert.ToInt32(reader["user_id"]);
        }

        mycon.Close();
        return 0;
} 
```

如果我尝试将所有内容从 setupConnection(); 到 UserExists() 的开头；和 getUserID(); 我收到以下错误：

> ConnectionString 属性尚未初始化。

它现在声称，错误在第 51 行。“SqlDataReader reader = mycmd.ExecuteReader();”。

我和老师，什么都试过了，google，其他同学，老师。我们无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:02:49.000

您没有在代码中的任何地方**打开连接。**[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)还要考虑在语句中丢失您的命令和那些实现 IDisposable 的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:17:19.713

你没有打开连接

```
 public void setupConnection() {
    mycon.ConnectionString = ConfigurationManager.ConnectionStrings[connectionString].ToString();
    mycon.Open()
    mycmd.Connection = mycon;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:19:53.590

在执行未给出的查询时，您必须给出连接对象。

如下：

```
 DataTable dt = new DataTable();
    SqlDataAdapter adapter = new SqlDataAdapter(mycmd,mycon); 
```

# iphone - AVCaptureSession : 添加/删除 DeviceInput

> ID：16186598
> 
> 赞同：5
> 
> 时间：2013-04-24T08:01:21.213
> 
> 标签：iphone, ios

我正在尝试实现一个功能，您可以在 AVCaptureSession 期间启用或禁用麦克风。这就是我启用设备的方式（初始化）

```
-(void)initMicrophoneInput:(AVCaptureSession*)session{
    AVCaptureDevice *audioDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
    _microphoneInput = [[AVCaptureDeviceInput alloc] initWithDevice:audioDevice error:nil];
    if ([session canAddInput:_microphoneInput]){
        [session addInput:_microphoneInput];
    } else {
        NSLog(@"can't add input");
    }
} 
```

这是我禁用/启用麦克风的功能：

```
- (IBAction)manageMicrophone:(id)sender {
    [_captureSession beginConfiguration];
    if(_microphoneMuted == NO){
        [_captureSession removeInput:_microphoneInput];
    }else{
        [self initMicrophoneInput:_captureSession];
    }
    [_captureSession commitConfiguration];
    _microphoneMuted = !_microphoneMuted;
} 
```

初始化和移除麦克风效果很好，但是我无法再次启用麦克风。我的 _captureSession.inputs 包含“微型”设备，但我不再从`- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection;`

# smtp - PMTA 连接槽错误

> ID：16186600
> 
> 赞同：0
> 
> 时间：2013-04-24T08:01:26.530
> 
> 标签：smtp

我们为电子邮件营销安装了一个 PMTA 服务器，我们正在使用 interspire 连接到该服务器以发送客户通讯。

有时，当有太多邮件同时发出时，我们会看到这个错误

无法处理到 127.0.0.1:2525 的传入 SMTP 连接：连接插槽不足

显然，它一次不允许超过 30 个传入连接。

我想知道 PMTA 配置中是否有允许我们增加此连接限制甚至使其无限制的设置？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:01:42.093

您可以使用以下配置行。

总最大 smtp-in 1000

你也可以使用

最大 smtp 输入 10

保留-smtp-in 5

如果您确实使用 Source 指令。例如，

```
<source-group localSources></source-group> 
```

# java - 在网页中显示 Quartz Scheduler 详细信息

> ID：16186603
> 
> 赞同：0
> 
> 时间：2013-04-24T08:01:39.107
> 
> 标签：java, jsp, servlets, quartz-scheduler

我的要求 - 在网页上显示计划作业列表。

到目前为止我所取得的成就——

1) 我正在使用 servlet 初始化调度程序并在 web.xml 中进行适当的条目。

**小服务程序**

```
public class QuartzTest extends HttpServlet implements Job {
    public static Scheduler scheduler = null;
    public void doGet(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {
    // Get details from web form and schedule a job accordingly.
    }
} 
```

2) 我成功地将作业、触发器和计划详细信息存储在 Sybase 数据库中。

**石英属性**

```
org.quartz.scheduler.instanceName = MyJobScheduler
org.quartz.scheduler.instanceId = 1
org.quartz.scheduler.rmi.export = false
org.quartz.scheduler.rmi.proxy = false

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
########################################
########### SYBASE CONNECTION ##########
org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.SybaseDelegate
org.quartz.jobStore.dataSource = SybaseDS
org.quartz.jobStore.useProperties = true
org.quartz.dataSource.SybaseDS.driver = com.sybase.jdbc3.jdbc.SybDriver
.
.
. 
```

**我的问题**我正在尝试在网页上显示调度程序详细信息。下面是我为此编写的 Java 类，我试图从 JSP 页面访问这个类，但我得到 NullPointerException-

**我的课**

```
public class JSPtest {
    // Method to get scheduler name
    public ArrayList<String> getSchedulerName() {
        ArrayList<String> jobList = new ArrayList<String>();
        String name = null;
        try{
            name = QuartzTest.scheduler.getSchedulerName();
            jobList.add(name);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        return jobList;
    }
} 
```

**JSP**

```
<%! 
JSPtest jsp = new JSPtest();
ArrayList<String> jobList = new ArrayList<String>();
int count = 0;
%>
<%
jobList = jsp.getSchedulerName();
for(count = 0; count < jobList.size(); count++){
    out.println("<p>"+jobList.get(count)+"</p>");
}
%> 
```

**错误**

```
java.lang.NullPointerException
    at com.globeop.quartztrials.JSPtest.getSchedulerName(JSPtest.java:32)
    at org.apache.jsp.viewSchedule_jsp._jspService(viewSchedule_jsp.java:72)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 
```

**那么如何在网页上显示调度程序详细信息？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:02:38.700

查看[jwatch](http://code.google.com/p/jwatch/)，它具有显示作业所需的一切。

# asterisk - 拨入星号后立即挂断电话

> ID：16186607
> 
> 赞同：2
> 
> 时间：2013-04-24T08:01:44.170
> 
> 标签：asterisk, centos6, agi

我在拨号命令后使用星号 11 和我的呼叫挂断并显示以下错误

> 传输时达到重传超时

Mydial 命令是

> AGI 脚本执行应用程序：(DIAL) 选项：(SIP/112233@202.174.211.30:8060)

在这种情况下，调用在默认端口 (5060) 上工作正常，在给定端口 8060 上不起作用。

完整调试：

```
Everyone is busy/congested at this time (1:0/0/1)
[Apr 23 17:27:42] WARNING[9213]: chan_sip.c:4169 retrans_pkt: Retransmission timeout reached on transmission 03993f2a3d90ec4f7260711836681fd0@88.208.208.34:5060 for seqno 102 (Critical Request) -- See https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions
Packet timed out after 31999ms with no response
[Apr 23 17:27:42] WARNING[9213]: chan_sip.c:4198 retrans_pkt: Hanging up call 03993f2a3d90ec4f7260711836681fd0@88.208.208.34:5060 - no reply to our critical packet (see https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions).
  == Everyone is busy/congested at this time (1:0/0/1)
[Apr 23 17:27:43] WARNING[9213]: chan_sip.c:4169 retrans_pkt: Retransmission timeout reached on transmission 2b2effa966c193e32440ebd945173521@88.208.208.34:5060 for seqno 102 (Critical Request) -- See https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions
Packet timed out after 32000ms with no response
[Apr 23 17:27:43] WARNING[9213]: chan_sip.c:4198 retrans_pkt: Hanging up call 2b2effa966c193e32440ebd945173521@88.208.208.34:5060 - no reply to our critical packet (see https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions).
    -- SIP/80.231.23.240-000000e4 is circuit-busy
  == Everyone is busy/congested at this time (1:0/1/0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T01:46:29.290

检查`/etc/asterisk/sip_nat.conf`并确保您的 LAN 网络设置如下：

```
localnet=192.168.1.0/255.255.255.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:54:05.403

如果您的 SIP 中继上没有启用 NAT，请将其打开并告诉我是否可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:48:43.287

很可能您有 nat 或防火墙问题。对于 nat 检查这篇文章：

[http://www.voip-info.org/wiki/view/Asterisk+SIP+NAT+solutions](http://www.voip-info.org/wiki/view/Asterisk+SIP+NAT+solutions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T07:44:29.307

确保在 /etc/asterisk 下的 sip.conf 中的“externip=”中有正确的 IP 地址。

# c++ - 双调度和模板类

> ID：16186608
> 
> 赞同：6
> 
> 时间：2013-04-24T08:01:46.763
> 
> 标签：c++, templates, double-dispatch

我有一个 C++ 代码，我在其中比较了从一个共同的母类派生的不同类，`Foo` . 如果两个类的类型不同，则比较始终为`false`。否则，它会比较特定于类的一些内部数据。

我的代码如下所示：

```
class Bar;
class Baz;

class Foo
{
public:
    virtual bool isSame( Foo* ) = 0;
    virtual bool isSameSpecific( Bar* ){ return false; }
    virtual bool isSameSpecific( Baz* ){ return false; }
};

class Bar : public Foo
{
public:
    bool isSame( Foo* foo){ return foo->isSameSpecific(this); }
    bool isSameSpecific( Bar* bar){ return bar->identifier == identifier; }

    int identifier;
};

// and the same for Baz... 
```

这很好用（我认为这是一个双重调度），我可以比较`Bar`和`Baz`只有指向`Foo`.

但现在问题来了。我必须添加一个模板类：

```
template< typename T>
class Qux : public Foo
{
//...
}; 
```

问题是`Foo`，我无法声明该方法`isSameSpecific`，`Qux*`因为它是虚拟的和模板的。

**问题**：有没有什么巧妙的方法来克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:25:10.420

这个问题并没有真正的解决方案：您需要`isSameSpecific`为您使用的模板的每个实例化一个函数。（换句话说，在`Foo`：

```
template <typename T>
virtual bool isSameSpecific( Qux<T>* ); 
```

是非法的，但是：

```
virtual bool isSameSpecific( Qux<int>* );
virtual bool isSameSpecific( Qux<double>* );
//  etc. 
```

不是。）

您可能可以通过创建一个 abstract `QuxBase`并`Qux<T>`从中派生而侥幸逃脱。最有可能的是，这只会将问题转移到`QuxBase`，但如果 `isSameSpecific`不依赖于 的类型`T`，例如因为您可以定义一些规范的包含类型，那么它可能是可行的。如果不知道更多关于`Qux`and `isSameSpecific`，很难说。（如果 实例化类型不同，if`Qux<T>::isSameSpecific`应该总是返回`false`，例如，您可以键入 check in `QuxBase::isSameSpecific`，如果类型相同，则转发到另一个虚函数。）

请注意，类似的问题也会影响实现多分派的所有替代方法。最后，您要求在一组开放的类型上进行调度，这意味着可能有无限数量的不同函数。

## 编辑：

明确一点：我假设您`isSame`只是一个示例，实际操作可能更复杂。您显示的实际代码显然属于我在第二段中的建议；实际上，即使没有多次调度也可以实现。只需定义一个规范的“标识符”类型，定义一个虚`getCanonicalIdentifier`函数，然后使用它`isSame`：

```
bool Foo::isSame( Foo const* other ) const
{
    return getCanonicalIdentifier() 
        == other->getCanonicalIdentifier(); 
} 
```

就此而言，如果不同的类型意味着`isSame` 返回 false（通常是这种情况，如果`isSame`意味着它的样子），那么您也不需要双重调度：

```
bool Foo::isSame( Foo const* other ) const
{
    return typeid( *this ) == typeid( *other )
        && isSameSpecific( other );
} 
```

派生`isSameSpecific`将不得不转换指针的类型，但由于它们保证它与 的类型相同`this`，这是一个简单而安全的操作。

最后：如果类没有值语义（如果涉及多态性几乎肯定不应该），那么简单的事情就是：

```
bool Foo::isSame( Foo const* other ) const
{
    return this == other;
} 
```

可能就足够了。

然而，所有这些仅适用*于*类似的东西`isSame`。如果您有其他功能受到影响，您将回到我最初所说的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:12:53.133

`isSameSpecific`编译器在解析`class Foo`定义时必须知道（有限的）虚拟集合。虚拟对象都在 vtable 中保留了条目。模板`Qux`可以被无限次覆盖，需要无限数量的虚拟`Foo`。显然，即使不尝试描述一种定义它们的方法，这也是行不通的。

您可能可以使用 typeinfo 来做您想做的事，但它不会与类型多态性一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:21:44.293

你是对的，这是双重调度，你是对的，不幸的是，一个方法不能同时是`virtual`和`template`（后者是一个实现问题）。

恐怕*纯*设计不可能做到这一点；但是你可以作弊`Qux`。

```
template <typename T>
class Qux: public Foo {
    virtual bool isSame( Foo* foo ) {
        if (Qux* q = dynamic_cast<Qux*>(foo)) {
            return *this == *q;
        }
        return false;
    }
}; // class Qux 
```

当然，`dynamic_cast`这有点作弊（就像所有针对儿童的演员一样），但是嘿*，它有效*！

Nota Bene：`isSame`方法应该是`const`并且接受`const`参数，又名`virtual bool isSame(Foo const* foo) const;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T08:22:17.220

如何使用 RTTI：

```
#include <typeinfo>

struct Foo
{
    virtual ~Foo() { }
    virtual bool compare_with_same(Foo const & rhs) = 0;
};

struct Bar : Foo
{
    int thing;

    virtual bool compare_with_same(Foo const & rhs)
    {
        assert(dynamic_cast<Bar const *>(&rhs) != nullptr);

        return static_cast<Bar const &>(rhs).thing == thing;
    }
}

bool operator==(Foo const & lhs Foo const & rhs)
{
    return typeid(lhs) == typeid(rhs) && lhs.compare_with_same(rhs);
} 
```

或者，您可以将`typeid`代码放入每个`compare_with_same`覆盖中。那可能会更安全一些。

# ios - iOS 应用中的广告

> ID：16186610
> 
> 赞同：3
> 
> 时间：2013-04-24T08:01:57.890
> 
> 标签：ios, ads

我想知道是否有可能在我的应用程序的主页上有一个 UIImageView，其中 ImageView 将显示某家公司的徽标，我将在我的应用程序中做广告，并与该公司“背后”签订合同。

我搜索了一些论坛和广告指南，但都是关于 iAd 的。所以我想知道苹果是否会批准这个应用程序？

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:07:26.203

考虑到 Apple 允许 Admob 等其他广告框架，您的应用似乎不会因此而被拒绝。

您应该牢记的有关广告的唯一审核指南是：

> 人为增加广告展示次数或点击次数的应用将被拒绝
> 
> 包含空 iAd 横幅的应用程序将被拒绝
> 
> 主要用于展示广告的应用程序将被拒绝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:07:22.610

我认为不会有问题，毕竟应用程序一直在推广其他应用程序，为什么不是公司。

您的广告就像任何广告网络一样，但不是在本地拥有服务器，就是这样。

# c# - HttpUtility.UrlEncode 方法未解决

> ID：16186611
> 
> 赞同：0
> 
> 时间：2013-04-24T08:02:08.323
> 
> 标签：c#, .net-4.0

我在 .net 3.5 中使用了此代码

```
HttpUtility.UrlEncode("", new UTF8Encoding()).Replace('+', ' '); 
```

效果很好，但我已经在 .NET 4.0 下编译了项目，它给了我这个错误： `"The name 'HttpUtility' does not exist in the current context."`.

我添加了`System.Web`和`System.Web.Extensions`引用。这还没有解决![在此处输入图像描述](https://i.stack.imgur.com/9fMNJ.png)这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:04:24.117

将目标框架形式更改`.Net Framework 4 Client Profile`为`.Net Framework 4`

# python - 没有名为 djangoapp.app.context_processors 的模块

> ID：16186612
> 
> 赞同：0
> 
> 时间：2013-04-24T08:02:08.780
> 
> 标签：python, django

我已将以下模块添加到我的 default_settings.py 中，并且在将 pdf 应用程序添加到我的站点时出现以下错误，允许用户将网页打印为 pdf。

```
`Exception Value:   

Error importing request processor module djangoapp.app.context_processors: "No module named djangoapp.app.context_processors"` 
```

`Exception Location: /usr/local/lib/python2.7/dist-packages/django/template/context.py in get_standard_processors, line 84`

这是我的默认设置

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.request',
    'djangoapp.app.context_processors.media_url',
    'convergedsecurity.core.UserMessages.userMessageList',
    'convergedsecurity.core.context_processors.standard_navigation_data',
    'convergedsecurity.core.context_processors.application_info',

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:24:36.857

你的意思是说不`djangoapp.context_processors.media_url`小心加了`djangoapp.app.context_processors.media_url`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:01:08.797

从您的评论来看，您似乎在遵循一些鼓励您编写自己的上下文处理器的指令（可能将某种与媒体相关的信息添加到上下文中）。

通常在文章中，它们将`djangoapp`用作项目名称的占位符，这里建议在项目中的应用程序中使用 context_processor。

然而，正如 Aldarund 所指出的，在 django_pdf 文档中似乎没有提到这个上下文处理器。

尝试删除它，看看是否一切正常。如果没有，您可能必须编写自定义上下文处理器。不过，它们实际上非常容易编写。

以下是 Django 源代码中的一些内容，因此您可以查看它们是如何编写的：[Django's Context Processors](https://github.com/django/django/blob/master/django/core/context_processors.py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:12:43.930

看起来您的 django 项目中有一个自定义的 djangoapp 应用程序。它应该包含 media_url 上下文处理器，但在那个应用程序中没有找到它（或者没有找到整个应用程序）。

# c# - C#: DateTime - 经历几天？

> ID：16186614
> 
> 赞同：4
> 
> 时间：2013-04-24T08:02:17.310
> 
> 标签：c#, date, datetime, coding-style, days

我有一段时间，我想通过它并在每个日期执行相同的代码。

**begin**和**end**是**DateTime**格式，至少相差一个月

```
while ( !(begin.Equals(end)) )
        {
           ...some code here...              
           begin = begin.AddDays(1);
        } 
```

1.  我不确定当 Day 值到达确切月份（确切年份）的末尾时它是否会自动升级 Month 值 - 例如，二月的天数并不总是相同，所以......

2.  有没有更好/更短/更好的方法将日期增加一天？例如这样的事情：`begin.Day++`; 或者这个：`begin++;`？

我不习惯 C#，但很抱歉提出这个蹩脚的问题，并提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:04:33.803

1) 是的。所有日期算术都为您正确处理。

2) 是的。你可以做：

```
var oneDay = TimeSpan.FromDays(1);
...
begin += oneDay; 
```

您还可以使用`for`循环：

```
var oneDay = TimeSpan.FromDays(1);

for (DateTime currentDay = begin; currentDay < end; currentDay += oneDay)
{
    // Some code here.
} 
```

最后一件事：如果您想确保忽略时间组件，您可以确保将开始日期和结束日期的时间部分设置为午夜，如下所示：

```
begin = begin.Date;
end   = end.Date; 
```

确保你的界限是正确的。循环进行 while `currentDay < end`- 但`currentDay <= end`如果您的时间范围是包容性的而不是独占性的，您可能需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:06:13.220

这样做（不要比较是否相等，因为时间可能不同并且循环会永远进行）。

```
 while ( begin <= end )
    {
       ...some code here...              
       begin = begin.AddDays(1);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:05:45.997

您发布的代码是正确的，应该可以正常工作。不用担心，[AddDays 方法](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)会在必要时自动增加月份和年份。

如果您发现它更具可读性，也可以使用 for 循环：

```
for (DateTime date = startDate; date < endDate; date = date.AddDays(1))
{
    // Your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:07:42.097

你可以试试这个，我认为它更简洁一点：

```
while (DateTime.Compare(begin, end) < 0)
{
    /* Some code here */
    begin = begin.AddDays(1);
} 
```

DateTime 对象知道如何适当地增加月数、年数等，因此您不必担心。

# jquery - jQuery函数：发送表单并停留在当前页面

> ID：16186619
> 
> 赞同：0
> 
> 时间：2013-04-24T08:02:33.980
> 
> 标签：jquery, ajax, forms, function

我想发送一个表单并留在同一个互联网页面上，为此我使用 jQuery 和 ajax，我的代码是：

```
$(document).on('submit', '.commentSubmit', function() {
        var el = $(this);
        var message = el.children('textarea').val();
        if(message == '') {
            alert('you can\'t send an empty message');
            return false;
        } else {
            $.ajax({
                url: el.attr('action'),
                type: el.attr('method'),
                data: el.serialize(),
                success: function() {
                    alert('ok');
                }
            });
            return false;
        }

}); 
```

所以它运行良好，但现在我想使用一个函数，所以我正在做：

```
sendMess = function(el){
        var message = el.children('textarea').val();
        if(message == '') {
            alert('you can\'t send an empty message');
            return false;
        } else {
            $.ajax({
                url: el.attr('action'),
                type: el.attr('method'),
                data: el.serialize(),
                success: function() {
                    alert('ok');
                }
            });
            return false;
        }
}

$(document).on('submit', '.commentSubmit', function() {
    sendMess($(this));
}); 
```

但是现在当我提交表单时，我将离开当前页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:03:34.630

通过在处理程序中返回 false 来取消默认提交操作。

```
$(document).on('submit', '.commentSubmit', function() {
    sendMess($(this));
    return false;
    // can also do "return sendMess($(this));", but less clear
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:04:59.980

```
$(document).on('submit', '.commentSubmit', function(event) {
    sendMess($(this));
    event.preventDefault()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:05:09.230

尝试 ：

```
$(document).on('submit', '.commentSubmit', function() {
    return sendMess($(this));
    //Or return false;
}); 
```

# url - 如何用“-”或“_”替换URL“”？

> ID：16186620
> 
> 赞同：4
> 
> 时间：2013-04-24T08:02:40.470
> 
> 标签：url, url-rewriting, yii

在 YII 中，如果标题中有用于 url 的空格，则默认情况下空格将替换为“+”号。像这样的东西：

> www.domain.com/event/view/id/ **Dj+Robag+Ruhme**

我想要做的是，我想用“-”（破折号）或“_”（下划线）替换“+”号。像这样的东西：

> www.domain.com/event/view/id/ **Dj-Robag-Ruhme**

或者

> www.domain.com/event/view/id/ **Dj_Robag_Ruhme**

现在我的 urlManager 是：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
    'caseSensitive'=>false,
    'rules'=>array(
        //'<controller:\w+>/<id:\d+>'=>'<controller>/view',
        //'<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        //'<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
), 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T14:33:49.783

好吧，没有什么奇怪的，因为 Yii 使用[`urlencode`](http://php.net/manual/function.urlencode.php)编码 url 参数。

**第一种方法**

你可以在你的模型中处理这个，例如：

```
public function getUrl()
{
  return Yii::app()->createUrl('/model/view', array(
    'id'=>str_replace(' ', '-', $this->id),
  ));
} 
```

不要忘记：

*   替换`model`为您的模型名称，
*   使用此方法获取您的模型网址，
*   修改控制器中的视图操作：

    ```
    public actionView($id)
    {
        $id = str_replace('-', ' ', $id);
        // .....
    } 
    ```

**第二种方法**

您可以使用自己的[`CUrlRule`](http://www.yiiframework.com/doc/api/1.1/CUrlRule)课程：

[http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)

# drupal - Drupal 6.x Ubercart 2.x 更改管理员订单电子邮件模板

> ID：16186621
> 
> 赞同：0
> 
> 时间：2013-04-24T08:02:42.093
> 
> 标签：drupal, themes, customization, ubercart

我在修改管理模板时遇到了一些问题，通常它位于路径 /sites/all/modules/ubercart/uc_order/templates 但我在多站点安装站点上工作，我无法访问那里，我只能看到三个目录*模块*、*主题*和*文件*。问题是*模块*目录中只有那些我已经安装以自定义我的页面（看不到 ubercart）。

有没有办法自定义这个主题来添加更多信息而不直接更改文件*uc_order-admin.tpl.php*。

提前致谢！

# javascript - 在 HTML 标记中压缩嵌入的 Javascript

> ID：16186637
> 
> 赞同：0
> 
> 时间：2013-04-24T08:03:25.220
> 
> 标签：javascript, compression, minify, yui-compressor

如果您有单独的`.js`文件，您可以简单地使用[Yahoo YUI Compressor 等工具对其进行压缩。](http://yui.github.io/yuicompressor/)

但是，如何在项目的每个页面中压缩嵌入的 Javascript？

（将 Javascript 复制到单独的文件，然后压缩，然后复制回我的页面不是专业的解决方案，原因很明显，对于中型或大型项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:32:45.090

您通常会有一个构建过程，它将源代码转换为可部署的形式。这将包括任何编译、单元测试、压缩等。

[YUI 压缩器有一个专门用于http://yuilibrary.com/download/builder/](http://yuilibrary.com/download/builder/)的构建工具

另请查看 ANT [http://ant.apache.org/](http://ant.apache.org/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T08:08:26.820

你可以运行一个后端进程来解析你的 html 文件，提取 javascript 代码并插入压缩的。但无论如何，我建议您将所有 js 分成 js 文件。这将使您将来更容易维护。

# ios - 将相同的 UI 更改应用于许多元素

> ID：16186642
> 
> 赞同：0
> 
> 时间：2013-04-24T08:03:40.693
> 
> 标签：ios, objective-c, user-interface, interface-builder

我经常面临的一个问题是如何将相同的更改应用于同一视图中的许多 UI 元素。

我正在寻找的是可以像这个 Python 伪代码一样工作的东西：

```
def stylize(element): 
    # apply all the UI changes to an element
elements = [button1, button2, button3]
map(stylize,elements) 
```

什么是正确的 Objective-C 方法来做到这一点（假设我不想要/不能子类化这样的 UI 元素）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:12:06.347

我不知道 Python，我也不完全理解你的问题。我不清楚。

可能您正在寻找`IBOutletCollection`.

> **IBOutletCollection**
> 
> ```
> Identifier used to qualify a one-to-many instance-variable declaration so that Interface Builder can synchronize the display and connection of outlets with Xcode. You can insert this macro only in front of variables typed as NSArray or NSMutableArray.
> 
> This macro takes an optional ClassName parameter. If specified, Interface Builder requires all objects added to the array to be instances of that class. For example, to define a property that stores only UIView objects, you could use a declaration similar to the following:
> 
> @property (nonatomic, retain) IBOutletCollection(UIView) NSArray *views;
> 
> For additional examples of how to declare outlets, including how to create outlets with the @property syntax, see “Xcode Integration”.
> 
> Available in iOS 4.0 and later.
> 
> Declared in UINibDeclarations.h. 
> ```
> 
> 讨论
> 
> 有关如何使用这些常量的更多信息，请参阅“与对象通信”。有关在 Interface Builder 中定义和使用操作和出口的信息，请参阅 Interface Builder 用户指南。

检查这些链接：

1.  [UIKit 常量参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitConstantsReference/Reference/reference.html)
2.  [使用 iOS 4 的 IBOutletCollection](http://www.bobmccune.com/2011/01/31/using-ios-4s-iboutletcollection/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:19:37.160

对于全局应用样式，请考虑使用`UIAppearance`.

对于特定的视图控制器，`IBOutletCollection`这是最直接的方法——如果您使用的是 IB，那就是。如果不是，您可以创建一个`NSArray`包含所有要自定义的按钮的变量或属性，然后对其进行迭代。

你的 Python 代码最直接的翻译是

1.  使用类别向 UIButton 添加方法，例如`-[UIButton(YMStyling) ym_stylize]`
2.  然后调用`[@[button1, button2, button3] makeObjectsPerformSelector:@selector(ym_stylize)]`.

这在 Cocoa/Obj-C 世界中是相当不自然的，所以我建议坚持使用上述更惯用的方法。在罗马时，等等……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:22:59.080

我想您可以简单地使用带有视图的 NSMutableArray。这是我为展示我的想法而制作的一个示例：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 20, 40)];
    [view1 setBackgroundColor:[UIColor blackColor]];
    UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake(150, 100, 20, 40)];
    [view2 setBackgroundColor:[UIColor whiteColor]];
    UIView *view3 = [[UIView alloc] initWithFrame:CGRectMake(200, 100, 20, 40)];
    [view3 setBackgroundColor:[UIColor redColor]];

    [self.view addSubview:view1];
    [self.view addSubview:view2];
    [self.view addSubview:view3];

    NSMutableArray *views = [NSMutableArray arrayWithObjects:view1, view2, view3, nil];

    [self changeViews:views];
}

-(void)changeViews:(NSMutableArray *)viewsArray {
    for (UIView *view in viewsArray) {
        [view setBackgroundColor:[UIColor blueColor]];//any changes you want to perform
    }
} 
```

# javascript - 跨域 cookie - 一个可能的新想法

> ID：16186645
> 
> 赞同：22
> 
> 时间：2013-04-24T08:03:55.117
> 
> 标签：javascript, cookies, cross-domain

我的好友 Carsten Lau 提出了一个关于如何读取跨域 cookie 的有趣想法。

情况：您想从域“A”中读取在域“B”上设置的 cookie。想法：从域“A”上的客户端，您对域“B”上的动态资源执行获取请求 - fe 图像或 javascript，在服务器“B”上实际上是一种能够读取 cookie 的编程语言像 PHP、Java 等。通过该请求，您发送一个唯一标识符，如会话 ID。因此，查看域“A”上的站点的客户端上的代码可能如下所示：

```
<img src="www.domainB.com/?getCookie.php?sessionID=1234"> 
```

现在到了有趣的部分，服务器 B 在服务器端读取域“B”设置的 cookie，并使用提供的 session-id 将结果写入域“A”可访问的 DB 或返回包含 cookie 信息的响应到域“A”上的客户端，然后通过 AJAX 将其发送到服务器“A”。

我很确定有一个我们还没有发现的缺陷。我个人认为服务器“B”将无法读取 cookie 信息，因为客户端浏览器 URL 指向域“A”，但当然上面解释的“getCookie”请求指向“B”。

请告诉我们您对它的看法，它为什么有效或为什么无效。让我大吃一惊的是，一个小小的概念证明是成功的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T13:49:00.083

这是正常的，因为您可以控制 2 个域。顺便说一句，大多数网站都是这样实现跨域单点登录的。但是，如果您无法控制第二个域，则无法从中读取 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-30T22:45:01.690

我整理了一个 NPM 包来帮助跨域 cookie/localStorage 的使用。我知道这篇文章有点老了，但我想我会分享一下，以防其他人需要帮助：

*   [https://www.npmjs.com/package/cookie-toss](https://www.npmjs.com/package/cookie-toss)

通过使用托管在域 A 上的 iframe，您可以将所有用户数据存储在域 A 上，并通过向域 A iframe 发布请求来引用该数据。

因此，域 B、C 等可以注入 iframe 并向其发布请求以存储和访问所需的数据。域 A 成为所有共享数据的中心。

通过域 A 内的域白名单，您可以确保只有您的依赖站点才能访问域 A 上的数据。

诀窍是将代码放在域 A 上的 iframe 内，该代码能够识别正在请求的数据。上述 NPM 模块中的自述文件更深入地介绍了该过程。

希望这可以帮助！

# .htaccess - 使用 htaccess 部分 URL 重写 URL

> ID：16186648
> 
> 赞同：0
> 
> 时间：2013-04-24T08:03:59.130
> 
> 标签：.htaccess

我被一个很长的代码困住了，代码生成的 url 类似于

[http://cultbrands.com.au/cultbrands.com.au_images/500w_C/F1FA150.jpg](http://cultbrands.com.au/cultbrands.com.au_images/500w_C/F1FA150.jpg)

而它必须生成[http://cultbrands.com.au/_images/500w_C/F1FA150.jpg](http://cultbrands.com.au/_images/500w_C/F1FA150.jpg)

所以问题是在域名之后再次打印域名。

我无法为此搜索实际代码，因为有很多代码。

有没有办法我可以重写而[http://cultbrands.com.au/cultbrands.com.au_images](http://cultbrands.com.au/cultbrands.com.au_images)只是[http://cultbrands.com.au/_images](http://cultbrands.com.au/_images)

# asp.net - 无法加载文件或程序集“Oracle.DataAccess”64 位 ODP.NET

> ID：16186661
> 
> 赞同：3
> 
> 时间：2013-04-24T08:04:53.460
> 
> 标签：asp.net, oracle, odp.net

我`ODP.NET`在我的 asp.net 项目中使用，以便应用程序与 Windows 2008 服务器（32 位）上的 oracle 11 g Express 通信。在开发机器上，我有 Windows 7（32 位）。我在开发机器上安装了 Windows 8（64 位）并尝试从 Visual Studio 2012 运行应用程序，它给出了错误“无法加载文件或程序集 'Oracle.DataAccess'”。经过一番搜索，我意识到我必须安装`ODP.NET`（64 位）才能在 64 位机器上使用它，所以我卸载了 32 位版本并安装了 64 位 ODP.NET。删除了对旧的引用，`Oracle.DataAccess`但仍然面临同样的问题。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-01T15:32:43.230

我遇到了同样的问题，经过反复试验，我发现问题出在 32 位和 64 位平台上。

1.  当我们在 64 位环境中部署 32 位 Oracle.DataAccess.dll 以及 Web 应用程序并在服务器上安装 ODP.net 时，将发生此错误。
2.  一种解决方案是从 bin 文件夹中删除 Oracle.DataAccess.dll 并自动解析正确的引用。
3.  第二种解决方案是为 Oracle.DataAccess.dll 设置引用属性 CopyToLocal=false，因此当您在 IIS 上部署时它不会与构建一起使用，并且不会发生错误。
4.  我更喜欢的第三个解决方案是为您的应用程序池启用 32 位应用程序，无论 Oracle.DataAccess.dll 是否存在于 bin 文件夹中，您都不会再次遇到此问题。

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T10:50:34.610

要安装 ODP.NET，我使用[64 位 ODAC](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html "64 位 Oracle 数据访问组件 (ODAC)")
安装后，检查 Oracle.DataAccess 64 位程序集是否正确安装，转到文件夹：`c:\Windows\Microsoft.NET\assembly\GAC_64`并检查 Oracle.DataAccess 文件夹是否存在。
在文件夹中应该有一个包含您正在使用的 Oracle.DataAccess dll 版本的子文件夹。

在 Visual Studio 中，您必须通过查看 Assemblies->Extensions（而不是使用浏览）来添加引用。此外，
还要检查 Visual Studio 中的构建配置，以确保您的应用程序的活动解决方案平台是 64 位的。

要运行您的网站，您必须使用 IIS，因为 Visual Studio 的开发服务器仅在 32 位模式下运行。
在 IIS 应用程序池中，将您的应用程序设置为以 64 位运行。（设置在高级设置中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T21:06:42.630

机器的位数无关紧要 - 托管应用程序的位数很重要。Visual Studio 附带的开发 Web 服务器是 32 位的，因此您需要安装 odp.net 的 32 位版本。如果您想使用 64 位版本进行测试，您可以在 IIS 中运行它。我都安装了。

在这种情况下，我猜问题更可能是版本号——您的应用程序最初引用的版本与您安装的版本不同。简单的做法是删除/重新添加对新安装的 Oracle.DataAccess.dll 的引用。但是，您必须这样做的事实在某种程度上表明您正在安装完整的客户端，而不仅仅是[ODP.net install](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)。出于某种原因（除了 oracle 通用安装程序完全是垃圾），完整客户端不包括发布者策略（这将重定向引用），但 odp.net 安装包含。

# iphone - iOS 日志文本中针对项目名称的数字

> ID：16186662
> 
> 赞同：2
> 
> 时间：2013-04-24T08:04:54.713
> 
> 标签：iphone, ios, xcode, logging, nslog

我真的需要知道日志文本中项目名称的数字是什么意思。例如：

```
2013-04-24  12:00:00:000  ProjectName[xxxxx:xxx]  Some Log Text 
```

这里 [xxxxx:xxx] 是我需要知道的一些数字..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:16:04.857

第一个是**Process ID**，第二个是**Thread ID**。

```
xxxxx = Process ID
xxx   = Thread ID. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:37:03.753

这些是线程ID和线程端口，甚至在下面的帖子中解释得很清楚

[NSLog() 输出中方括号中的数字是什么？](https://stackoverflow.com/questions/3968679/what-are-the-numbers-in-the-square-brackets-in-nslog-output)

# ios - Google Maps SDK for iOS v1.2 标记不可点击

> ID：16186670
> 
> 赞同：1
> 
> 时间：2013-04-24T08:05:14.733
> 
> 标签：ios, xcode, google-maps, google-maps-sdk-ios

我一直在使用 Google Maps SDK for iOS v1.1 没有任何问题，但刚刚更新到 v1.2（和 v1.2.1，今天发布）。现在，当我创建 GMSMarker 时，无法点击它来打开信息窗口。同样的情况也发生在与 SDK 捆绑在一起的演示应用程序中，所以我相信不只是我。

我正在使用以下代码：

```
GMSMarker* marker = [GMSMarker markerWithPosition:CLLocationCoordinate2DMake(result.lat, result.lng)];
marker.title = result.shortName;
marker.tappable = YES;
marker.animated = YES;
marker.map = self.mapView; 
```

我看不出我做错了什么——这似乎是更新后的 SDK 的一个主要问题。我已经在 GMSMapViewDelegate 上实现了所有的委托方法，当点击标记时我什么也没调用。

谷歌地图团队的任何人都可以提供帮助吗？谢谢。

编辑：我做了一些进一步的测试，我相信这取决于设备的方向！

1.  打开 SDK 测试应用程序，设备处于纵向模式的“标记事件”演示 > 标记可点击。
2.  打开 SDK 测试应用程序，设备处于倒置纵向模式的“标记事件”演示 > 标记不可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T13:29:47.920

此问题自 1.2.2 版起已修复

# mysql - MYSQL 语法不评估不等于存在 NULL

> ID：16186674
> 
> 赞同：75
> 
> 时间：2013-04-24T08:05:22.150
> 
> 标签：mysql, sql

我在使用 mysql 查询时遇到问题。我想排除 2 的值。所以我想我会做以下事情：

```
table products

id | name     | backorder
-------------------
1  | product1 | NULL
2  | product2 | NULL
3  | product3 | 2

SELECT name from `products` p
WHERE backorder <> '2' 
```

但是，这并没有给出 product1 的预期结果，product 2 它给出了一个空的结果表。

另一方面，如果我使用

```
SELECT name from `products` p
WHERE backorder = '2' 
```

然后它产生：`product3`. 但我想得到那些不等于的记录`2`。

某些东西无法与`<> '2'`. 难道是`NULL`价值观把它扔掉了？任何人都可以建议修复。

提前致谢！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-04-24T08:06:05.873

使用`IS NULL`or`IS NOT NULL`来比较`NULL`值，因为它们只是未知的。

```
SELECT name 
from   products p
WHERE  backorder IS NULL OR backorder <> 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/22a6a/3)
*   [SQLFiddle Demo（*添加了一些记录*）](http://www.sqlfiddle.com/#!2/e0e57/2)

*   [使用 NULL 值](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-06-23T13:50:21.833

## 使用[`<=>`](https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_equal-to)运算符。

您可以使用：

```
SELECT `name` FROM `products` `p`
WHERE NOT `backorder` <=> '2' 
```

或者

```
SELECT `name` FROM `products` `p`
WHERE !(`backorder` <=> '2') 
```

有关操作员的更多信息，请参阅此答案`<=>`：

[MySQL 中的这个运算符 <=> 是什么？](https://stackoverflow.com/a/21928508/293280)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-07T09:26:40.307

抱歉打开这个

我们也可以用这个

```
SELECT name 
from   products p
WHERE  COALESCE(backorder,1)  <> 2 
```

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2013-04-24T08:06:49.700

试试这个，看看。

```
SELECT name from `products` p
WHERE backorder != '2' 
```

# java - 如何解决私有 String readText() 问题？

> ID：16186678
> 
> 赞同：-6
> 
> 时间：2013-04-24T08:05:36.747
> 
> 标签：java, android, sqlite

这段代码给我带来了问题。问题是：`dummyTextID`

```
InputStream inputStream = getResources().openRawResource(dummyTextID); 
```

我已经`dummyTextID`在**@override protected void**下定义了，但是必须将读取方法放在单独的下面`private String`，这会创建问题

我正在提供我的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.word);

    Uri uri = getIntent().getData();
    Cursor cursor = managedQuery(uri, null, null, null, null);

    if (cursor == null) {
        finish();
    } else {
        cursor.moveToFirst();

        TextView word = (TextView) findViewById(R.id.word);
        word.setMovementMethod(new ScrollingMovementMethod());
        TextView definition = (TextView) findViewById(R.id.definition);
        definition.setMovementMethod(new ScrollingMovementMethod());

        TextView details = (TextView) findViewById(R.id.details);
        details.setText(readText());

        int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
        int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);
        int Index = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DETAILS);
        int dummyTextID = getResources().
        getIdentifier(cursor.getString(Index), "raw", getPackageName());

        word.setText(cursor.getString(wIndex));
        definition.setText(cursor.getString(dIndex));
        definition.setText(Html.fromHtml(cursor.getString(dIndex)));
        details.setText(cursor.getString(Index));
        details.setText(Html.fromHtml(cursor.getString(Index)));
    }
}

private String readText() {
    InputStream inputStream = getResources().openRawResource(dummyTextID);

    ByteArrayOutputStream byteArrayOutputStream = new 

    ByteArrayOutputStream();

    int i;
    try {
        i = inputStream.read();
        while (i != -1) {
            byteArrayOutputStream.write(i);
            i= inputStream.read();
        }
        inputStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return byteArrayOutputStream.toString();
}

public void onBackPressed() {
    onSearchRequested();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:21:41.533

您应该能够使用`openRawResource`将二进制文件从原始资源文件夹复制到设备。

请参阅下面的 API：

```
InputStream ins = getResources().openRawResource(R.raw.my_db_file); 
```

但是你正在做的是：

```
int dummyTextID = getResources().getIdentifier(cursor.getString(Index), "raw", getPackageName());
InputStream inputStream = getResources().openRawResource(dummyTextID); 
```

您的虚拟文本 id 不是二进制的，它是一个 int 。将其转换为二进制，然后传递。这应该工作。

# c# - 未调用 CheckBox.IsChecked 中的 MultiBinding 转换器

> ID：16186682
> 
> 赞同：0
> 
> 时间：2013-04-24T08:05:54.763
> 
> 标签：c#, wpf, binding, multibinding, imultivalueconverter

如果你愿意，我有一个自定义组合框一个多选组合框，

问题是选择取决于其他集合。我尝试将 ComboBox.IsChecked 属性绑定到 MultiBinding Converter，但未调用该转换器。

```
<DataTemplate>
<StackPanel Orientation="Horizontal" x:Name="ItemStack" VirtualizingStackPanel.IsVirtualizing="False">
    <CheckBox x:Name="CheckBoxItem"
        Command="{Binding SelectItem, RelativeSource={RelativeSource AncestorType={x:Type MultiSelectionComboBox}}}"
        CommandParameter="{Binding Key}"
              >
        <CheckBox.IsChecked>
            <MultiBinding Converter="{StaticResource MultiSelectionCommandConverter}" Mode="OneWay">
                <Binding Path="Key"/>
                <Binding Path="SelectedItem"
                         RelativeSource="{RelativeSource AncestorType={x:Type MultiSelectionComboBox}}" />
            </MultiBinding>
        </CheckBox.IsChecked>
    </CheckBox>
    <TextBlock Text="{Binding DisplayText}"></TextBlock>
</StackPanel>
</DataTemplate> 
```

转换器是，

```
public class MultiSelectionCommandConverter : IMultiValueConverter 
{      
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {   
            ///stuff to do...
    }

    public object[] ConvertBack(object values, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:31:14.943

After trying out possibilities, I've found a work around. Still I'm not quite sure why this might work and the other won't.

I've changed my xaml to pass the whole object instead of the property. So the code looked liked this,

```
<DataTemplate>
<StackPanel Orientation="Horizontal" x:Name="ItemStack" VirtualizingStackPanel.IsVirtualizing="False">
    <CheckBox x:Name="CheckBoxItem"
        Command="{Binding SelectItem, RelativeSource={RelativeSource AncestorType={x:Type MultiSelectionComboBox}}}"
        CommandParameter="{Binding Key}"
              >
        <CheckBox.IsChecked>
            <MultiBinding Converter="{StaticResource MultiSelectionCommandConverter}" Mode="OneWay">
                <Binding Path="Key"/>
                <Binding 
                         RelativeSource="{RelativeSource AncestorType={x:Type MultiSelectionComboBox}}" />
            </MultiBinding>
        </CheckBox.IsChecked>
    </CheckBox>
    <TextBlock Text="{Binding DisplayText}"></TextBlock>
</StackPanel>
</DataTemplate> 
```

and the converter is

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    string key = (string)values[0];
    ObservableCollection<ListItem> selectedItems = (values[1] as MultiSelectionComboBox).SelectedItem;
    //do stuff
    return false;
} 
```

This is definitely not a desired solution but, this will do until i figure out the other reason.

# c# - 想要在 listbox.items.clear() 上执行代码

> ID：16186683
> 
> 赞同：0
> 
> 时间：2013-04-24T08:05:58.187
> 
> 标签：c#, .net, winforms

我有一个列表框和一个复选框（全选），在我正在调用的代码`listbox.items.clear()`中，现在我想订阅这个事件，所以每当我的列表框变得清晰时，selectAll 复选框也应该处于取消选中状态。

目前我在我的列表框 SelectedIndexChanged 事件中处理这个，我在我的列表框事件列表中找不到 ItemsClear 类型的事件。

我真的很想使用事件处理取消选中我的复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:10:24.420

这听起来像是一次往返。当您调用您的`Clear`方法时，您知道您正在代码中清除它。在代码中反应，不需要往返。

例如，创建一个清除列表框的辅助方法，然后在清除列表框后执行您想要的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:10:16.417

你是对的，这没有任何事件。但是为什么要这么复杂呢？给自己定义一个方法，比如

```
private void ClearAndUncheck(){
    listbox.Items.Clear();
    selectAll.Checked = false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T08:12:05.343

据我所知，没有任何事件是**直接**因`ListBox.Items.Clear`被调用而引发的。您可以实现自己的行为：

```
public class CustomListBox : ListBox
{
    public event EventHandler ItemsCleared;

    public void ClearItems()
    {
        Items.Clear();
        if(this.ItemsCleared != null)
        {
            this.ItemsCleared(this, EventArgs.Empty);
        }
    }
} 
```

只需在 Windows 窗体应用程序中声明上述类。而不是使用标准`ListBox`使用您的扩展`CustomListBox`并订阅`ItemsCleared`事件。

而不是`CustomListBox.Items.Clear`打电话`CustomListBox.ClearItems`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T08:26:53.120

如果事件对您很重要，我建议使用[BindingList](http://msdn.microsoft.com/en-us/library/ms132679%28v=vs.80%29.aspx)并绑定`ListBox`到，如果您的场景允许的话。这种方法可能会给你一些新的想法。

```
BindingList<string> myList;

myList = new BindingList<string>(...);
listBox1.DataSource = myList;
myList.ListChanged += new ListChangedEventHandler(myList_ListChanged); 
```

然后，通过使用`ListChanged`BindingList 的事件（以及许多其他事件），当您的 ListBox 被清除时，您可以对“全选”复选框进行操作`ListBox1.Items.Clear().`

```
void myList_ListChanged(object sender, ListChangedEventArgs e)
{
    if (e.ListChangedType == ListChangedType.Reset)
    {
        ... // Do what you need here
    }
} 
```

# internet-explorer - JavaScript 错误仅选择一个单选按钮并且在 ie 7 上工作正常，但现在在 ie 9 上运行正常

> ID：16186684
> 
> 赞同：0
> 
> 时间：2013-04-24T08:05:59.250
> 
> 标签：internet-explorer

我有 javascript 函数，它是从 datagrid 调用的关于只选择一个单选按钮并且在 IE 7 上工作正常但现在 IE 9 抛出错误 Microsoft JScript 运行时错误：对象不支持属性或方法“getElementsByTagName”请建议如何修复它

```
function SelectSingleRadioButton(gridViewId) {
   var grid = document.getElementById(gridViewId);
   var RadioButtonObj = window.event.srcElement;
   for (i = 0; i < grid.rows.length; i++) {
      var tr = grid.rows[i];
      var td = tr.childNodes[0];
      var items = tr.childNodes[0].getElementsByTagName("input") // the point where error is occuring
      for (j = 0; j < items.length; j++) {
         if (items[j].type == "radio") {
            if (RadioButtonObj.id == items[j].id) {
                items[j].checked = true;
            }
            else {
                items[j].checked = false;
            }
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:15:35.170

最近对 clone() 方法的优化引入了这个错误。

由于变量`elem`和`clone`两者都可以是 DocumentFragments，因此在它们上调用 getElementsByTagName 是不安全的。因为根据规范 DocumentFragements 不实现此方法。较旧的 IE 版本不会遇到此问题的原因是它们也在 DocumentFragments 上实现了此方法，尽管它们不应该这样做。IE9 似乎已经修复了这个问题（成为更多规范之后）并删除了该方法，现在在点击这个分支时会中断。

一个可能的解决方法是检查是否`elem/clone are nodeType === 11`然后检查是否`elem/clone.getElementsByTagName`可用，如果是则使用它。如果没有求助`elem/clone.querySelectorAll("*")`。这应该没问题，因为旧 IE 版本`getElementsByTagName`和新版本都有`querySelectorAll`.

所以你可以使用`getElementsByTagName`旧版本的 IE(IE<9) 和`querySelectorAll`IE 9。

# genetic-algorithm - 处理负适应值的遗传算法

> ID：16186686
> 
> 赞同：9
> 
> 时间：2013-04-24T08:06:02.177
> 
> 标签：genetic-algorithm

我正在尝试实现遗传算法以最大化 n 个变量的函数。然而问题是适应度值可能是负数，我不确定在进行选择时如何处理负值。我阅读了这篇文章[遗传算法中的线性适应度缩放会产生负适应度值](https://stackoverflow.com/questions/6660069/linear-fitness-scaling-in-genetic-algorithm-produces-negative-fitness-values) ，但我不清楚如何处理负适应度值以及如何计算缩放因子 a 和 b。

另外，从文章中我知道轮盘赌选择只适用于正适应值。锦标赛选择也一样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T08:16:02.723

当您有负值时，您可以尝试在您的群体中找到最小的适应度值，并将其相反的值添加到每个值中。这样，您将不再有负值，而适应度值之间的差异将保持不变。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T10:59:10.937

比赛选择不受此问题的影响。它只是比较总体大小为 n 的均匀采样子集的适应度值，并取具有最佳值的那个。当然，这仍然意味着，如果您不重复抽样，那么最差的 n-1 个人将永远不会被选中。如果您重复采样，他们就有机会被选中。

与比例选择一样：它不适用于负适应度值。您只能应用健身值的“窗口化”或“缩放”，在这种情况下它们会再次起作用。

我曾经编写了一些[采样方法](http://dev.heuristiclab.com/trac/hl/core/browser/trunk/sources/HeuristicLab.Random/3.3/RandomEnumerable.cs)作为 C# 的 IEnumerable 的扩展方法，其中有一个 SampleProportional 和 SampleProportionalWithoutRepetition 扩展方法。它们是 GPL 许可下 HeuristicLab 的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-30T17:23:01.520

好的，现在回答已经很晚了，但仍然有人可以谷歌它。

首先 - 是的，您可以使用负适应度。但是我完全不建议你这样做，因为我已经这样做了并且遇到了很多问题（仍然可行，但完全不推荐）。所以这里是解释：

假设你有 N 个生物的种群。经过模拟，它们都有一些适应度值 f(n)，其中 f(n) 是适应度，n 是生物数量。在此之后，您想要建立一些概率分布来确定应该杀死哪些生物（当然您可以删除 40% 的最差生物，但如果您使用分布会更好）。你如何建立这样的分布？假设 f(a) = 50，并且 f(b) = 100，所以生物 b 比生物 a 好 2 倍，所以可能你想让生物 a 的生存概率比生物 b 高 2 倍（如果你的健身值是线性的）。如果您想知道如何操作：

假设 sum( f (n) ) 是所有适应度值的总和。那么生物 a 的生存概率 p(a) 为：

p(a) = f(a) / sum( f(n) )

这会成功的。

但是现在让我们允许负适应度。假设 f(a) = 50，f(b) = 100，f(c) = -1000。b 再次比 a 好 2 倍，这是有道理的，但它比 c 好 -10 倍？没有意义。上面的绅士建议你添加最差健身值的反对，这有点可以“解决”你的情况，但实际上并没有（我之前犯过同样的错误）。好的，让我们将所有健身值加 1000：

f(a) = 1050, f(b) = 1100, f(c) = 0，所以现在c的生存概率为零，好吧，我们可以接受。但是现在让我们比较 a 和 b：

b现在比a好1.05，这意味着a和b的适应度几乎相同，这是完全不能接受的，因为它**显然**比a好2倍（当然假设适应度是线性的，但这会搞砸非线性适应度）！你无法逃避这个问题，它会不断地妨碍你，因为概率不可能是负数，所以你可以从进化中移除概率（这不是很好的事情）或者你可以做一些例外和技巧。

由于在我的场景中消除负面适应性为时已晚，因此这是我解决问题的方法：

再一次，你有 N 个生物的种群。假设 neg(N) 为您提供所有负适应度生物和 pos(N) 正适应度生物（在这种情况下，您可以选择将零设为负数或正数，这无关紧要）。假设你需要 D 个生物去死。现在这是诀窍：

f( c ) ( c 是 pos 生物) 值越高，生物越好，所以我们可以用它的适应度来确定生存的概率。但是 f( m ) 越低（负数越大）（m 是 neg 生物），生物越差，因此我们可以使用它的适应度来确定死亡的概率。

现在，如果 D > neg(N) 那么所有 neg(N) 都会死亡，并且 pos(N) 的 (D-neg(N)) 将使用基于所有正生物适应度的概率分布（生存概率 p (a) = f(a) / sum(pos(n)))。但是如果 D < neg(N)，那么所有 pos(N) 都将存活，并且使用基于所有负生物适应度的概率分布（**死亡**概率p(a) = f( a) / sum( neg(n) ) (f(a) 将是负数，但 sum( neg(n) ) 也将是负数，因此概率将为正数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-22T12:23:16.613

我知道这个问题已经存在很长时间了，但是如果新人想知道处理负值的最佳方法，那么你的问题也是最小的。这是它的代码。

```
from numpy import min, sum, ptp, array 
from numpy.random import uniform 

list_fitness1 = array([-12, -45, 0, 72.1, -32.3])
list_fitness2 = array([0.5, 6.32, 988.2, 1.23])

def get_index_roulette_wheel_selection(list_fitness=None):
    """ It can handle negative also. Make sure your list fitness is 1D-numpy array"""
    scaled_fitness = (list_fitness - min(list_fitness)) / ptp(list_fitness)
    minimized_fitness = 1.0 - scaled_fitness
    total_sum = sum(minimized_fitness)
    r = uniform(low=0, high=total_sum)
    for idx, f in enumerate(minimized_fitness):
        r = r + f
        if r > total_sum:
            return idx

get_index_roulette_wheel_selection(list_fitness1)
get_index_roulette_wheel_selection(list_fitness2) 
```

1.  确保您的健身列表是 1D-numpy 数组
2.  将适应度列表缩放到范围 [0, 1]
3.  将最大问题转换为最小问题 1.0 - scaled_fitness_list
4.  随机一个介于 0 和 sum(minimizzed_fitness_list) 之间的数字
5.  继续在最小化适应度列表中添加元素，直到我们得到大于总和的值
6.  你可以看到适应度是否小 --> 它在最小化的适应度中具有更大的价值 --> 它有更大的机会相加并使值大于总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-10T16:38:59.090

我认为人们在这里遇到的主要问题是他们对健身分数的处理不当。让我们考虑一个示例健身分数，例如运输冷冻货物的卡车内部的温度。卡车的内部温度应该是 -2 摄氏度……但这也是 28.4 华氏度。相对于保持冷冻的食物，它们的适合度完全相同，但是 2 * -2 = -4，而 2 * 28.4 是 56.8。“冷两倍”在这里没有任何意义（-4 C！= 14.2 F）。与健身分数相同。

在[Volot 的例子](https://stackoverflow.com/a/55433915/3501461)中 -1000 的情况下，50 和 100 之间的差异实际上是相对较低的：重要的是你会选择 -1000 以上的任何一个/两个，如果你只是减去 - 你肯定会这样做 - 1000 从一切。那么下一代孩子的体能分数可能是 50、100、200 和 10，比方说。现在 50 和 100 之间的差异更加明显，50 被选中的机会要低得多。请记住，遗传算法是迭代的。这也让我想起了一句话：你不必跑得比熊还快。你只需要跑得比你旁边的人快。50只需要超过-1000就可以生存繁殖。

也可以避免减去最小值导致 0 的问题。在估计概率分布时，人们会在每个（已知的）可能结果中添加 1 次，这样仍然可以捕获极其罕见的事件。健身分数变得有些棘手。你不能只加 1。如果你的健康分数是 0.01、0.02 和 -0.01 怎么办？1.03、1.02 和 1.00 将导致选择低相对适应度。您可以改为将最低的非零值添加到所有内容中，得到 0.04、0.05 和 0.02。对于 -1000 的情况，它会产生 2150、2100 和 1050（因此，以前为 0 的所有内容将始终是被选中的下一个最低适应度的一半）

尽管如此，为了使事情尽可能与更典型的 GA 采样方法保持一致，我只会在存在负值时减去最小值并添加少量的适应度。当一切都是积极的，没有理由这样做。

# django - Ubuntu 11.10 上用于 django 的 GEOS

> ID：16186692
> 
> 赞同：0
> 
> 时间：2013-04-24T08:06:14.230
> 
> 标签：django, ubuntu-11.10, geodjango, geos

一直在尝试运行 Django MySQL Nginx Stack 以运行 GIS 支持，但无法成功编译 GEOS 依赖项。

我得到一个 make 错误 1

如果我能得到一些具体的步骤，那就太好了。

# .net - ParameterInfo.IsOptional 和 ParameterInfo.HasDefaultValue 之间的区别？

> ID：16186694
> 
> 赞同：14
> 
> 时间：2013-04-24T08:06:23.627
> 
> 标签：.net, reflection, default-value, optional-parameters, parameterinfo

它们听起来很相似。来自 msdn：

[ParameterInfo.IsOptional](http://msdn.microsoft.com/en-IN/library/system.reflection.parameterinfo.isoptional.aspx)

> 获取一个值，该值指示此参数是否可选。
> 
> 此方法取决于可选的元数据标志。该标志可以由编译器插入，但编译器没有义务这样做。
> 
> 此方法利用 ParameterAttributes 枚举器的 Optional 标志。

[ParameterInfo.HasDefaultValue](http://msdn.microsoft.com/en-IN/library/system.reflection.parameterinfo.hasdefaultvalue.aspx)（.NET 4.5 中的新功能）

> 获取一个值，该值指示此参数是否具有默认值。

他们不一样吗？我做了快速测试：

```
public void A(string value)
{

}
public void B(string value, int i = -1)
{

} 
```

我写：

```
var a = AInfo.GetParameters().Select(p => p.HasDefaultValue).ToArray();
var b = AInfo.GetParameters().Select(p => p.IsOptional).ToArray();

var c = BInfo.GetParameters().Select(p => p.HasDefaultValue).ToArray();
var d = BInfo.GetParameters().Select(p => p.IsOptional).ToArray();

//a equals b; and c equals d 
```

那么它们在哪些情况下不同呢？为什么`HasDefaultValue`在.NET 4.5 中新引入了BCL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T09:03:20.093

如果我们看一下实现，`IsOptional`我们会看到：

```
public bool IsOptional
{
  [__DynamicallyInvokable] get
  {
    return (this.Attributes & ParameterAttributes.Optional) != ParameterAttributes.None;
  }
} 
```

它取决于元数据标志，但正如它在 msdn 中所写的那样：

> 此方法取决于可选的元数据标志。该标志可以由编译器插入，但编译器没有义务这样做。

这意味着它取决于编译器，如果我们使用其他编译器，我们可以获得具有默认值的参数将没有`IsOptional`标志。现在让我们看看 HasDefaultValue 属性是如何实现的：

```
public override bool HasDefaultValue
{
  get
  {
    if (this.m_noMetadata || this.m_noDefaultValue)
      return false;
    else
      return this.GetDefaultValueInternal(false) != DBNull.Value;
  }
} 
```

它始终检查参数是否具有默认值，并且不依赖于编译器。这可能不是一个 100% 正确的答案，只是我的想法。

**更新 0**

这是参数没有默认值但`IsOptional`为 true 的示例：

```
public static void Method([Optional]string parameter)
{
}

ParameterInfo parameterInfo = typeof(Program).GetMethod("Method").GetParameters()[0];
//Is true
bool isOptional = parameterInfo.IsOptional;
//Is false
bool hasDefaultValue = parameterInfo.HasDefaultValue; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T10:58:12.707

Danny Chen 和 vvs0205 准确地说明了区别，即`IsOptional`始终依赖于编译器，并检查参数是否*是指定默认值*的可选参数use `HasDefaultValue`。

```
bool isOptional = parameterInfo.IsOptional;

bool isOptionalWithADefaultValue = parameterInfo.HasDefaultValue; //.NET 4.5

bool isOptionalWithADefaultValue = (p.Attributes & ParameterAttributes.HasDefault) == ParameterAttributes.HasDefault; //.NET 4 and below 
```

[取自这里](https://stackoverflow.com/questions/9977530/default-parameters-and-reflection-if-parameterinfo-isoptional-then-is-defaultva)（*捕捉其他一些未记录的技术以在该线程中获得相同*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:32:47.523

您无法使用“a 等于 b；c 等于 d”得出“它们相同”的结论，例如：

```
int[] a = new[] { 0, 1, 5 };
var c = a.Where(n => n < 2).ToArray();
var d = a.Where(n => n < 3).ToArray();  
//you can't say "2 == 3" even c equals to d in sequence 
```

好的，回到主题，*目前*可选参数总是有一个默认值，这个结论“现在”是正确的。但是 AFAIK 它是未记录的行为，这意味着编译器可能会将其行为/实现更改为可选参数。因此，如果您想检查（通过反射）参数是否是可选参数，请使用`.IsOptional`属性。如果您想检查它是否具有默认值（可能由某些属性标记，例如 DefaultValue？只是可能），请使用`.HasDefaultValue`属性。听起来像是多余的话，但这是真的。

# javascript - 通过 Javascript 而不是内联解析链接

> ID：16186701
> 
> 赞同：0
> 
> 时间：2013-04-24T08:06:45.503
> 
> 标签：javascript, html, hyperlink, popup, modal-dialog

我有许多社交媒体网站链接，我想通过弹出框解析它们。以下是其中一个链接的示例：

```
<li>
    <a class="sprite_reddit" href="http://www.reddit.com/submit" onclick="window.open('http://www.reddit.com/submit?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'reddit','toolbar=no,width=840,height=750'); return false;"></a>
</li> 
```

而不是在 html 中包含 window.open 我希望此链接通过以下 javascript 进行解析，该 javascript 在屏幕中居中弹出框。

```
function MyPopUpWin(url, width, height) {
    var leftPosition, topPosition;
    //Allow for borders.
    leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
    //Allow for title and status bars.
    topPosition = (window.screen.height / 2) - ((height / 2) + 50);
    //Open the window.
    window.open(url, "Window2", "status=no,height=" + height + ",width=" + width + ",resizable=yes,left=" + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY=" + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");
} 
```

为了实现这一点，我需要改变什么，或者这种链接不可能？

多谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:11:59.693

每个主要浏览器版本都支持打开功能，但并非每个浏览器都支持您设置的所有参数。我猜不再支持像 screenX 和 Y 这样的东西。查看此链接以获取更多信息：

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# internet-explorer - 为什么我不能上钩ie

> ID：16186704
> 
> 赞同：2
> 
> 时间：2013-04-24T08:06:51.237
> 
> 标签：internet-explorer, windows-7, windows-xp, hook

我想跟踪 IE 中的所有鼠标和键盘操作。于是写了一个hook，但是发现hook不行。当我挂钩 IE 并对 IE 进行任何操作时，IE 崩溃了。

步骤如下。

步骤1：

```
g_hHook = ::SetWindowsHookEx(WH_CALLWNDPROC, (HOOKPROC)CallWndProcHtmlHook, g_hInstHookDll, id); 
```

第2步：

```
LRESULT CallWndProcHtmlHook(int nCode, WPARAM wParam, LPARAM lParam)
{
    return CallNextHookEx(g_hHook, nCode, wParam, lParam);
} 
```

在winxp中，有时还可以。但它从未在win7中工作（win7,32bits，带有IE8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:21:47.533

我有点取决于你想做什么。如果您想要一个工具来跟踪用户与某种基于浏览器的实验（如行为实验或市场研究）的交互，那么您可能不适合使用通过钩子与 IE 交互的本机 C++ 应用程序，而是使用使用 WebBrowser 控件的 .NET（C# 或 C++/CLI）程序。所有 Windows 窗体功能都触手可及 - 轻松 - 您可以订阅控件引发的所有事件，例如 MouseMove、MouseDown、MouseUp、MouseClick、MouseDoubleClick、KeyDown、KeyUp、KeyPress - 任何您可能想要的.

当然，如果您想秘密跟踪用户交互，这可能不是您想要的，因为用户不太可能更喜欢您的浏览器而不是任何已知的浏览器。

# javascript - 接收元素在 CSS 过渡中间的位置

> ID：16186708
> 
> 赞同：3
> 
> 时间：2013-04-24T08:07:00.953
> 
> 标签：javascript, jquery, css, transition

我需要在 CSS 转换中间接收元素 left 和 top 属性。目前我使用 jQuery 位置方法，它似乎在某种程度上起作用。

我做了两个例子来更清楚地展示我的问题：

1）这是非**工作**示例，其中元素的位置打印到控制台。接收到正确的位置，直到元素转换更改为其原始位置。在变换值第一次更改后，位置不再更新。jsFiddle 链接：http: [//jsfiddle.net/PCWDa/8/](http://jsfiddle.net/PCWDa/8/)

2）这是一个**工作**示例，只有向我们报告元素位置的方式有所不同：位置被输出到输入（类型=文本）元素值。jsFiddle 链接：http: [//jsfiddle.net/PCWDa/9/](http://jsfiddle.net/PCWDa/9/)

**结论**：当 dom 元素属性没有收到任何更新（如更新文本元素的值等）时，jQuerys position() 方法似乎没有收到正确的位置。

**漏洞？**这可能是 jQuery、css 或浏览器本身的错误？是否有任何解决方法可以让第一个示例正常工作 - 随时在过渡中间获得正确的位置，而无需像第二个示例中那样更改 dom 元素属性。

* * *

jsFiddle 代码：

要获取示例 1 代码，请将 variable working 更改为 false 并将示例 2 更改为 true。

css

```
.box{
    width: 100px;
    height: 100px;
    background-color: red;
    position: relative;
    -webkit-transition: all 5000ms ease;
}
.box_moved{
    -webkit-transform: translateX(300px);
} 
```

html

```
<div class="box"></div>
<input type="text" class="val"> 
```

javascript

```
var direction = false;
var working = false; 

window.forward = function(){$('.box').addClass('box_moved')}
window.backward = function(){$('.box').removeClass('box_moved')}

window.swap = function(){
if( direction = !direction )
        forward()
    else
        backward();
}

window.getlocation = function(){
    if(working)
        $('.val').val( $('.box').position().left );
    else
        console.log($('.box').position().left);
    }

window.setInterval("swap()",3000);
window.setInterval("getlocation()",200); 
```

# workflow - 用于从存储库外上传任务中文件的 alfresco 工作流模型

> ID：16186709
> 
> 赞同：1
> 
> 时间：2013-04-24T08:07:07.790
> 
> 标签：workflow, alfresco, activiti, bpmn, alfresco-share

我正在设计一个在户外上传和修改文档的工作流程。我需要设计一个包含类型和文件上传器的任务。它应该可以从露天存储库上传文件，并且应该具有版本控制方面（类似于临时任务项选择，但我需要从露天存储库外部选择我的文件）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T08:52:59.453

在alfrescofroums 工作[期间上传文件](https://forums.alfresco.com/forum/developer-discussions/workflow/upload-file-during-wofklow-12072011-0823#p128862)可能很有用。

# django - 如何使用带有phonegap的django框架？

> ID：16186712
> 
> 赞同：1
> 
> 时间：2013-04-24T08:07:19.483
> 
> 标签：django, cordova

我一直在网上看，有一些关于人们使用 Django Web 框架和 Phonegap 构建移动应用程序的文章。

但是，它在 phonegap 上说要将您的 HTML、JS 和 CSS 文件上传到构建中。这是否意味着您不能使用 django 来构建带有 phonegap 的移动应用程序？

关于如何构建的任何澄清或步骤都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:01:21.590

将 PhoneGap 视为 WebKit 视图中预加载的静态网页。您可以添加 JavaScript（大多数人使用 JQuery/JQueryMobile）使其动态化，并使用 AJAX 调用从服务器加载数据，但渲染模板不是它的作用。你可以做片段，但它与 Django 模板不同。

我正在开发一个项目，该项目通过运行 Django 的服务器的 API 处理数据加载。该应用程序是在 PhoneGap 中编写的，并使用 AJAX 调用来获取额外数据。我想说看看像 TastyPie 这样的 django 应用程序来帮助获取数据。使用 PhoneGap 的主要目标是 1) 更好的 HTML 加载时间，因为它是本地的，2) 通过仅发送 API 数据来减少流量，从而更好地用于蜂窝网络和 3) 访问您无法访问的硬件中的本机功能在网页中使用 JS。

# .net - .NET 的 JAAS 等效项

> ID：16186714
> 
> 赞同：1
> 
> 时间：2013-04-24T08:07:22.787
> 
> 标签：.net, security, equivalent

.NET 是否有 JAAS 等价物？我们有几个带有 JAAS 的 Java EE 产品。它工作得很好。我们已经编写了几个自己的模块。除了 Java EE 产品，我们还想开发另一个 .NET/REST/JSON/Dojotoolkit 产品。有没有类似于 .NET 的 JAAS 的东西？我希望能够做到以下几点：

1.  透明处理 HTTP/REST 会话的安全性。我想要求一个基于 URL 的角色。
2.  访问 .NET 业务层中的角色和用户信息。
3.  可以在数据库中为 AD/LDAP 和用户/密码使用标准模块。
4.  可以编写自己的登录模块。
5.  无需手动处理 HTTP 会话或用户对象。

# c# - 多线程 WPF/Silverlight/WP 应用程序中的并发性

> ID：16186716
> 
> 赞同：0
> 
> 时间：2013-04-24T08:07:29.653
> 
> 标签：c#, wpf, multithreading, concurrency, windows-phone-8

考虑以下代码：

```
int lastItemIndex = m_listbox.ItemsSource.Count - 1;
var groupItem = m_listbox.ItemsSource[lastItemIndex] as GroupedObservableCollection<ScheduleItem, DateTime>; 
```

在像 WPF/Silverlight/WP 这样的多线程环境中，有没有办法确保 lastItemIndex 真的是第二行的最后一个项目索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:20:30.120

WPF 以及大多数其他 UI 框架默认是单线程的。多线程只有在您明确执行时才会发生。

通常，您不应修改其他线程中 UI 控件可访问的集合 - 您可以使用 Invoke 将您的修改请求编组到主线程并在那里执行。这样，集合将始终仅从主线程访问和修改，并且您不会遇到并发问题。

# image-processing - 改变 DCT 系数

> ID：16186717
> 
> 赞同：2
> 
> 时间：2013-04-24T08:07:32.660
> 
> 标签：image-processing, libjpeg

我决定使用 libjpeg 作为处理 jpeg 文件的主库。我已经阅读了 libjpg.txt 文件。我很高兴该库允许以方便的方式读取/写入 DCT 系数。由于编写自己的解码器需要很长时间。

我的工作与无损嵌入有关。目前我需要从文件中读取 DCT 系数，然后修改其中一些并将更改后的系数写入同一个文件中。

好吧，我找到了`jpeg_write_coefficients()`功能。我天真地认为我可以将其应用于减压对象（`struct jpeg_decompress_struct`）。但它不起作用，需要一个压缩对象。

我无法相信如此强大的图书馆无法做到这一点。我认为我很可能错过了一些东西。尽管我试图保持专注。也许写系数可以做更复杂的方式。但我不知道该怎么做。

如果您提出您的想法，我将非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-10T11:36:58.880

您可以使用 jpeg_write_coefficients 来编写更改后的 DCT。

以下信息可在`libjpeg.txt`

```
To write the contents of a JPEG file as DCT coefficients, you must provide
the DCT coefficients stored in virtual block arrays.  You can either pass
block arrays read from an input JPEG file by jpeg_read_coefficients(), or
allocate virtual arrays from the JPEG compression object and fill them
yourself.  In either case, jpeg_write_coefficients() is substituted for
jpeg_start_compress() and jpeg_write_scanlines().  Thus the sequence is
  * Create compression object
  * Set all compression parameters as necessary
  * Request virtual arrays if needed
  * jpeg_write_coefficients()
  * jpeg_finish_compress()
  * Destroy or re-use compression object
jpeg_write_coefficients() is passed a pointer to an array of virtual block
array descriptors; the number of arrays is equal to cinfo.num_components.

The virtual arrays need only have been requested, not realized, before
jpeg_write_coefficients() is called.  A side-effect of
jpeg_write_coefficients() is to realize any virtual arrays that have been
requested from the compression object's memory manager.  Thus, when obtaining
the virtual arrays from the compression object, you should fill the arrays
after calling jpeg_write_coefficients().  The data is actually written out
when you call jpeg_finish_compress(); jpeg_write_coefficients() only writes
the file header.

When writing raw DCT coefficients, it is crucial that the JPEG quantization
tables and sampling factors match the way the data was encoded, or the
resulting file will be invalid.  For transcoding from an existing JPEG file,
we recommend using jpeg_copy_critical_parameters().  This routine initializes
all the compression parameters to default values (like jpeg_set_defaults()),
then copies the critical information from a source decompression object.
The decompression object should have just been used to read the entire
JPEG input file --- that is, it should be awaiting jpeg_finish_decompress().

jpeg_write_coefficients() marks all tables stored in the compression object
as needing to be written to the output file (thus, it acts like
jpeg_start_compress(cinfo, TRUE)).  This is for safety's sake, to avoid
emitting abbreviated JPEG files by accident.  If you really want to emit an
abbreviated JPEG file, call jpeg_suppress_tables(), or set the tables'
individual sent_table flags, between calling jpeg_write_coefficients() and
jpeg_finish_compress(). 
```

所以要改变单个dct，可以使用下面的简单代码： 要访问任何dct coeff，需要改变四个index，cx，bx，by，bi。在我的代码中，我曾经`blockptr_one[bi]++;`增加一个 dct Coeff

```
#include <stdio.h>
#include <jpeglib.h>
#include <stdlib.h>
#include <iostream>
#include <string>    

int write_jpeg_file(std::string outname,jpeg_decompress_struct in_cinfo, jvirt_barray_ptr *coeffs_array ){

    struct jpeg_compress_struct cinfo;
    struct jpeg_error_mgr jerr;
    FILE * infile;

    if ((infile = fopen(outname.c_str(), "wb")) == NULL) {
      fprintf(stderr, "can't open %s\n", outname.c_str());
      return 0;
    }

    cinfo.err = jpeg_std_error(&jerr);
    jpeg_create_compress(&cinfo);
    jpeg_stdio_dest(&cinfo, infile);

    j_compress_ptr cinfo_ptr = &cinfo;
    jpeg_copy_critical_parameters((j_decompress_ptr)&in_cinfo,cinfo_ptr);
    jpeg_write_coefficients(cinfo_ptr, coeffs_array);

    jpeg_finish_compress( &cinfo );
    jpeg_destroy_compress( &cinfo );
    fclose( infile );

    return 1;
}

int read_jpeg_file( std::string filename, std::string outname )
{
    struct jpeg_decompress_struct cinfo;
    struct jpeg_error_mgr jerr;
    FILE * infile;

    if ((infile = fopen(filename.c_str(), "rb")) == NULL) {
      fprintf(stderr, "can't open %s\n", filename.c_str());
      return 0;
    }

    cinfo.err = jpeg_std_error(&jerr);
    jpeg_create_decompress(&cinfo);
    jpeg_stdio_src(&cinfo, infile);
    (void) jpeg_read_header(&cinfo, TRUE);

    jvirt_barray_ptr *coeffs_array = jpeg_read_coefficients(&cinfo);

    //change one dct:
    int ci = 0; // between 0 and number of image component
    int by = 0; // between 0 and compptr_one->height_in_blocks
    int bx = 0; // between 0 and compptr_one->width_in_blocks
    int bi = 0; // between 0 and 64 (8x8)
    JBLOCKARRAY buffer_one;
    JCOEFPTR blockptr_one;
    jpeg_component_info* compptr_one;
    compptr_one = cinfo.comp_info + ci;
    buffer_one = (cinfo.mem->access_virt_barray)((j_common_ptr)&cinfo, coeffs_array[ci], by, (JDIMENSION)1, FALSE);
    blockptr_one = buffer_one[0][bx];
    blockptr_one[bi]++;

    write_jpeg_file(outname, cinfo, coeffs_array);

    jpeg_finish_decompress( &cinfo );
    jpeg_destroy_decompress( &cinfo );
    fclose( infile );

    return 1;

}

int main()
{
    std::string infilename = "you_image.jpg", outfilename = "out_image.jpg";

    /* Try opening a jpeg*/
    if( read_jpeg_file( infilename, outfilename ) > 0 )
    {
        std::cout << "It's Okay..." << std::endl;
    }
    else return -1;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T10:24:26.027

你真的应该看看库附带的*transupp.h*和 jpegtran 的源代码*。*无论如何，这是我的带有注释的脏代码，部分来自*jpegtran*。它使您可以一一操作 DCT 系数。

```
#include "jpeglib.h"             /* Common decls for cjpeg/djpeg applications */
#include "transupp.h"            /* Support routines for jpegtran */

struct jpeg_decompress_struct srcinfo;
struct jpeg_compress_struct dstinfo;
struct jpeg_error_mgr jsrcerr, jdsterr;

static jpeg_transform_info transformoption; /* image transformation options */
transformoption.transform = JXFORM_NONE;
transformoption.trim = FALSE;
transformoption.force_grayscale = FALSE;

jvirt_barray_ptr * src_coef_arrays;
jvirt_barray_ptr * dst_coef_arrays;

/* Initialize the JPEG decompression object with default error handling. */
srcinfo.err = jpeg_std_error(&jsrcerr);
jpeg_create_decompress(&srcinfo);
/* Initialize the JPEG compression object with default error handling. */
dstinfo.err = jpeg_std_error(&jdsterr);
jpeg_create_compress(&dstinfo);

FILE *fp;

if((fp = fopen(filePath], "rb")) == NULL) {
    //Throw an error
} else {
    //Continue
}

/* Specify data source for decompression */
jpeg_stdio_src(&srcinfo, fp);

/* Enable saving of extra markers that we want to copy */
jcopy_markers_setup(&srcinfo, JCOPYOPT_ALL);

/* Read file header */
(void) jpeg_read_header(&srcinfo, TRUE);

jtransform_request_workspace(&srcinfo, &transformoption);
src_coef_arrays = jpeg_read_coefficients(&srcinfo);
jpeg_copy_critical_parameters(&srcinfo, &dstinfo);

/* Do your DCT shenanigans here on src_coef_arrays like this (I've moved it into a separate function): */

moveDCTAround(&srcinfo, &dstinfo, 0, src_coef_arrays);

/* ..when done with DCT, do this: */
dst_coef_arrays = jtransform_adjust_parameters(&srcinfo, &dstinfo, src_coef_arrays, &transformoption);
fclose(fp);

//And write everything back
fp = fopen(filePath, "wb");

/* Specify data destination for compression */
jpeg_stdio_dest(&dstinfo, fp);

/* Start compressor (note no image data is actually written here) */
jpeg_write_coefficients(&dstinfo, dst_coef_arrays);

/* Copy to the output file any extra markers that we want to preserve */
jcopy_markers_execute(&srcinfo, &dstinfo, JCOPYOPT_ALL);

jpeg_finish_compress(&dstinfo);
jpeg_destroy_compress(&dstinfo);
(void) jpeg_finish_decompress(&srcinfo);
jpeg_destroy_decompress(&srcinfo);

fclose(fp); 
```

以及函数本身：

```
void moveDCTAround (j_decompress_ptr srcinfo, j_compress_ptr dstinfo, JDIMENSION x_crop_offset, jvirt_barray_ptr *src_coef_arrays)
{
    size_t block_row_size;
    JBLOCKARRAY coef_buffers[MAX_COMPONENTS];
    JBLOCKARRAY row_ptrs[MAX_COMPONENTS];

    //Allocate DCT array buffers
    for (JDIMENSION compnum=0; compnum<srcinfo->num_components; compnum++)
    {
        coef_buffers[compnum] = (dstinfo->mem->alloc_barray)((j_common_ptr) dstinfo, JPOOL_IMAGE, srcinfo->comp_info[compnum].width_in_blocks,
         srcinfo->comp_info[compnum].height_in_blocks);
    }

    //For each component,
    for (JDIMENSION compnum=0; compnum<srcinfo->num_components; compnum++)
    {
        block_row_size = (size_t) sizeof(JCOEF)*DCTSIZE2*srcinfo->comp_info[compnum].width_in_blocks;
        //...iterate over rows,
        for (JDIMENSION rownum=0; rownum<srcinfo->comp_info[compnum].height_in_blocks; rownum++)
        {
            row_ptrs[compnum] = ((dstinfo)->mem->access_virt_barray)((j_common_ptr) &dstinfo, src_coef_arrays[compnum], rownum, (JDIMENSION) 1, FALSE);
            //...and for each block in a row,
            for (JDIMENSION blocknum=0; blocknum<srcinfo->comp_info[compnum].width_in_blocks; blocknum++)
                //...iterate over DCT coefficients
                for (JDIMENSION i=0; i<DCTSIZE2; i++)
                {
                        //Manipulate your DCT coefficients here. For instance, the code here inverts the image.
                        coef_buffers[compnum][rownum][blocknum][i] = -row_ptrs[compnum][0][blocknum][i];
                }
        }
    }

    //Save the changes
    //For each component,
    for (JDIMENSION compnum=0; compnum<srcinfo->num_components; compnum++)
    {
        block_row_size = (size_t) sizeof(JCOEF)*DCTSIZE2 * srcinfo->comp_info[compnum].width_in_blocks;
        //...iterate over rows
        for (JDIMENSION rownum=0; rownum < srcinfo->comp_info[compnum].height_in_blocks; rownum++)
        {
            //Copy the whole rows
            row_ptrs[compnum] = (dstinfo->mem->access_virt_barray)((j_common_ptr) dstinfo, src_coef_arrays[compnum], rownum, (JDIMENSION) 1, TRUE);
            memcpy(row_ptrs[compnum][0][0], coef_buffers[compnum][rownum][0], block_row_size);
        }
    } 
```

# .htaccess - .htaccess 重写多个 url 而无需重定向

> ID：16186721
> 
> 赞同：1
> 
> 时间：2013-04-24T08:07:43.210
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, seo

好的，所以我有这些 demo1.domain.net、demo2.domain.net、demo3.domain.net 之类的 url，并且都需要显示子文件夹的内容，例如这个示例 demo1.domain.net 将显示 domain.net 的内容/websites/demo1 我需要以将所有域（如 $whatever.domain.net）转换为 domain.net/websites/$whatever.domain.net 的方式进行操作，我已经启用了通配符 dns，但我似乎无法解决它出来，请记住我不希望它重定向。

这是我尝试过的

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?[^.]+\.domain\.net.*$
RewriteRule /websites/$1 [L] 
```

我只是用这个获得了 domain.net 的主页。

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:18:04.797

关闭，试试这个：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !^/websites/
RewriteCond %{HTTP_HOST} ^(www\.)?([^.]+\.domain\.net.*)$ [NC]
RewriteRule ^(.*)$ /websites/%2/$1 [L] 
```

请注意，这仅在所有**demo*.domain.net指向与主域（** **domain.net** ）相同的文档根目录时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:37:52.910

我想，我可以做到这一点！您能否再次尝试这些*.htaccess*指令：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www\.)?domain\.net$
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.domain\.net$
RewriteRule ^/?$ http://domain.net/websites/%2 [P] 
```

它会将***$whatever*** *.domain.net*重写为*domain.net/websites/ **$whatever***。

现在，如果假设是***$whatever*** *.domain.net*到*domain.net/websites/ **$whatever** .domain.net*那么你可以试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www\.)?domain\.net$
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.domain\.net$
RewriteRule ^/?$ http://domain.net/websites/%2.domain.net [P] 
```

或者也许下面的这段代码是你将来想要的：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www\.)?domain\.net$
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.domain\.net$
RewriteRule ^(.*)$ http://domain.net/websites/%2.domain.net/$1 [P] 
```

# excel - Excel 锁定和网格错误

> ID：16186736
> 
> 赞同：-1
> 
> 时间：2013-04-24T08:08:30.197
> 
> 标签：excel, excel-formula, excel-2010, vba

我得到了我在谷歌找到的这段代码。（[http://msgroups.net/microsoft.public.excel.misc/locking-cells-automatically-after/45998](http://msgroups.net/microsoft.public.excel.misc/locking-cells-automatically-after/45998)）我的工作需要这个。-编辑：我对 Excel 的了解为零

网格中的所有单元格目前都未锁定。我想要做的是在输入数据后自动锁定单元格。

我需要让代码最多可用于列“J”并且对于行是无限的。我在谷歌得到的这段代码最多只能是 25x25：如果单元格是空白或空白，密码保护应该不起作用，即使之前有数据也可以自由输入。

```
Option Explicit
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim myRng As Range
    Dim myCell As Range
    Dim myIntersect As Range
    Dim myPassword As String

    myPassword = "hi there"

    With Me 'the worksheet with the code
        '25 rows by 25 columns starting in A1
        Set myRng = .Range("a1").Resize(25, 25)

        Set myIntersect = Intersect(Target, myRng)

        If myIntersect Is Nothing Then
            Exit Sub
        End If

        .Unprotect Password:=myPassword
        For Each myCell In myIntersect.Cells
            myCell.Locked = True
        Next myCell
        .Protect Password:=myPassword
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:17:23.393

实际上你的代码不会工作，我已经测试过了。最好设置默认锁定它。然后为这些单元格制作了一个表格来更改。每次点击更改，都会解锁，更改后会自动锁定。不是更安全吗。你最好试试你的逻辑。如果发现您根本没有努力，请从您的代码中获取！它只是从该链接复制粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:22:55.480

如果问题是您对 Excel VBA 一无所知，那么以下站点应该可以帮助您：

*   这是一个可以帮助您的教程网站：[Excel VBA 教程](http://www.excelfunctions.net/Excel-VBA-Tutorial.html)
*   要了解 VBA 中的 Excel 对象模型，请参阅
    *   [MSDN 库：Excel 对象模型的超级简单指南](http://msdn.microsoft.com/en-us/library/office/aa203714%28v=office.11%29.aspx)
*   要了解如何在 Excel VBA 中使用单元格和范围，请参阅
    *   [MSDN 库：使用单元格和范围](http://msdn.microsoft.com/en-us/library/office/aa221536%28v=office.11%29.aspx)
    *   [Excel 2003 VBA 语言参考](http://msdn.microsoft.com/en-us/library/office/aa272254(v=office.11).aspx)
*   要了解 Excel VBA 中的用户窗体和控件，请参阅
    *   [MSDN 库：Excel VBA 中的用户窗体](http://support.microsoft.com/kb/829070)
    *   [Chandoo.org：VBA 中的用户表单和控件](http://chandoo.org/wp/excel-vba/user-forms/)
    *   [Excel VBA Easy - Excel VBA 用户窗体](http://www.excel-vba-easy.com/vba-userform-excel-vba.html)

以下是一些其他网站供您阅读：

*   Excel MVP 站点：[上下文 Excel](http://www.contextures.com/tiptech.html)
*   Excel VBA 网站：[Chip Pearson](http://www.cpearson.com/Excel/Topic.aspx)
*   Excel MVP 网站：[Ron De Bruin](http://www.rondebruin.nl/win/section9.htm)
*   电子表格先生 (John Walkenbach)：[电子表格页面](http://spreadsheetpage.com/index.php/tips)
*   Excel先生：[Excel先生网站](http://www.mrexcel.com/)
*   Charley Kydd Excel MVP: [Excel User dot Com](http://exceluser.com/explore/index.htm)
*   McGimpsey & Associates Excel MVP 网站[J.E. McGimpsey 的 XL 页面](http://www.mcgimpsey.com/excel/index.html)

祝你好运

菲利普

# c# - 自动缩放在 winform 应用程序中不起作用

> ID：16186740
> 
> 赞同：0
> 
> 时间：2013-04-24T08:08:51.960
> 
> 标签：c#, .net, winforms

自动缩放属性无法正常工作。WinForm 以高分辨率开发。但是当我们在低版本的windows XP中部署时，有些按钮是不显示的。

我尝试了谷歌建议的几个修改，但似乎没有任何效果。这是我的winform配置。

```
this.AutoScaleDimensions = new System.Drawing.SizeF(grap.DpiX, grap.DpiY);
           // this.AutoScaleDimensions = new System.Drawing.SizeF(96F, 96F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Dpi;
            this.AutoSize = true;
            this.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
            this.BackColor = System.Drawing.SystemColors.ControlLight;
            this.ClientSize = new System.Drawing.Size(1366, 50);
            this.DockTop = true;
            this.Font = new System.Drawing.Font("MS Reference Sans Serif", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0))); 
```

关于如何解决这个问题的建议可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:33:53.403

这是由于控制的流动性造成的问题。

要解决这个问题，您需要以低分辨率设计表单（意味着在进行表单设计时，您必须将其宽度和高度保持在 1024*768 以下）。然后，您必须设置表单中每个控件的**Anchor**属性以定位其正确位置。

例如：假设您的表单中有一个 Datagridview，那么您必须将其 Anchor 属性设置为 **Top, Bottom, Left, Right**。

为每个控件适当设置 Anchor 属性将使窗体中的控件在窗体调整大小时被拉伸。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T19:47:01.450

在设置表单尺寸的过程中，表单大小受**Screen.GetWorkingArea**限制，不考虑**AutoScale**。

我解决了这个问题，存储在**InitializeComponent()**中设置的原始**ClientSize**并在**HandleCreated**事件上自动调整它。

 ****```
 private SizeF _autoScaleFactor;
    private Size _originalClientSize;

    protected override void SetClientSizeCore(int x, int y)
    {
        base.SetClientSizeCore(x, y);

        _autoScaleFactor = AutoScaleFactor;
        _originalClientSize = new Size(x, y);
    }

    protected override void OnHandleCreated(EventArgs e)
    {
        AutoScaleClientSize();

        base.OnHandleCreated(e);
    }

    private void AutoScaleClientSize()
    {
        var dx = _autoScaleFactor.Width;
        if (!dx.Equals(1.0F))
        {
            _originalClientSize.Width = (int)Math.Round(_originalClientSize.Width * dx);
        }

        var dy = _autoScaleFactor.Height;
        if (!dy.Equals(1.0F))
        {
            _originalClientSize.Height = (int)Math.Round(_originalClientSize.Height * dy);
        }

        ClientSize = _originalClientSize;
    } 
```****

# sql-server-2008 - 使用派生列转换编辑器验证日期列

> ID：16186747
> 
> 赞同：1
> 
> 时间：2013-04-24T08:09:20.480
> 
> 标签：sql-server-2008, ssis

我有一个来自文本文件的列，它应该是一个日期，但可以是其他任何东西。

有时它以“ **NULL** ”的形式出现，有时以日期的形式出现。

我想在派生列转换编辑器中编写一个表达式来验证：

*   当它是“NULL”时——> DT_DATE 中的 NULL
*   当它是日期 - >转换为日期
*   当它不是 NULL 或日期时 --> 添加到错误表

到目前为止，我有：

```
MyColumn == "NULL" ? (DT_STR,255,1252)NULL(DT_DATE) : MyColumn 
```

我添加了一个脚本组件来捕获导出列错误输出，但它不能正常工作。当 1 行通过时，它不会将错误提交到错误表，其余的不会提交到输出表（以输出错误结束）。

不知道做什么。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:15:08.300

尝试这个 ：-

```
(MyColumn=="NULL")|| (ISNULL(MyColumn)) ? NULL(DT_DATE) : MyColumn 
```

更新1：-

```
(MyColumn=="NULL") ||  (MyColumn(Name))  ? NULL(DT_DATE) :(DT_DATE)MyColumn 
```

# cordova - 未捕获的类型错误：无法设置未定义的属性“移动”

> ID：16186748
> 
> 赞同：19
> 
> 时间：2013-04-24T08:09:32.227
> 
> 标签：cordova, jquery-mobile

我正在开发一个带有 angular js 和 phonegap 的应用程序。

我在指令中使用 jquery mobile，它用于向通知栏添加一些动画。它适用于 jquery 1.8.1 但是当我使用 jquery mobile

```
<script src="scripts/vendor/jquery/jquery.mobile-1.3.1.js"></script> 
```

我收到以下错误：

```
Uncaught TypeError: Cannot set property 'mobile' of undefined jquery.mobile-1.3.1.js:26

(anonymous function) jquery.mobile-1.3.1.js:26
(anonymous function) jquery.mobile-1.3.1.js:27
(anonymous function) jquery.mobile-1.3.1.js:22
(anonymous function) jquery.mobile-1.3.1.js:24 
```

![在此处输入图像描述](https://i.stack.imgur.com/CFq4W.png)

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T08:54:48.790

对于*jQuery-Mobile 版本 1.3.1*，请使用*jQuery 版本 1.8.3*或更高版本。推荐使用**jQuery 版本 1.9.1**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T08:22:53.720

@Omar 实际上，您通过您的评论让我解决了这个问题，我留下了评论：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

谢谢！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-24T16:04:44.783

包括第一个 Jquery，然后是 Jquery-mobile，如下所示：

```
 <script src="js/libs/jquery/jquery.js" type="text/javascript"></script>
    <script src="js/libs/jquery-mobile/jquery.mobile.js" type="text/javascript"></script> 
```

此外，正如其他人所说，使用 jquery 1.9.1 或更高版本。

# php - TCPDF 对齐标头

> ID：16186751
> 
> 赞同：2
> 
> 时间：2013-04-24T08:09:45.813
> 
> 标签：php, tcpdf

这是我第一次使用 TCPDF，非常好的库，但我不确定如何`SetHeaderData`与我的设计保持一致

![在此处输入图像描述](https://i.stack.imgur.com/AN7h0.jpg)

这是我的代码：

```
define ('PDF_HEADER_STRING', "No. A-3-2, Kompleks Industri Puchong, No.1 Jalan TPP 1/6, Taman Perindustrian Puchong Seksyen 1, 47100 Puchong, Selangor Darul Ehsan, Malaysia.\nTel: (603) 8068 6119    Fax: (603) 8051 8119    Website: www.projectormalaysia.com\n\nQuotation No: ".$quo_quotationNo."          Date: ".$_POST['date']);

// create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('AV Tech Solution Sdn Bhd');
$pdf->SetTitle('PDF Quotation');
$pdf->SetSubject('PDF Quotation');
$pdf->SetKeywords('');
$pdf->SetHeaderData('avs-logo.png', '30', 'AV Tech Solution Sdn. Bhd. (958788-U)'.' ', PDF_HEADER_STRING);
$pdf->setHeaderFont(Array('times', '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);
$tagvs = array('p' => array(0 => array('h' => 0.5, 'n' => 0.5), 1 => array('h' => 0.5, 'n' => 0.5)), 'br' => array(0 => array('h' => 1, 'n' => 1), 1 => array('h' => 1, 'n' => 1)));
$pdf->setHtmlVSpace($tagvs);
$pdf->setLanguageArray($l);
$pdf->SetFont('helvetica', '', 8);
$pdf->AddPage(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T14:03:36.333

当我的自定义标题非常小并且根本不在我想要的位置时，我遇到了类似的问题。

它应该在 TCPDF 网站上的示例之一，[自定义页眉和页脚](http://www.tcpdf.org/examples/example_003.phps)

只要遵循这一点，你应该（希望）没有问题..如果你还在努力解决这个问题，哈哈。

它基本上说您需要编写一个新函数 Header() 来覆盖默认标头的现有属性。

希望这有帮助，祝你好运。

# python - IOError：[Errno 套接字错误] [Errno 11004] getaddrinfo 在可访问的地址上失败

> ID：16186752
> 
> 赞同：2
> 
> 时间：2013-04-24T08:09:47.310
> 
> 标签：python, getaddrinfo

我可以在我的浏览器中打开网址：[http](http://www.bloomberg.com/markets/chart/data/1M/AAPL:AR) ://www.bloomberg.com/markets/chart/data/1M/AAPL: AR，但我的代码在这里得到了结果`I/O error(socket error):[Errno 11004] getaddrinfo failed` ：：

```
import urllib
import json
url='http://www.bloomberg.com/markets/chart/data/1M/AAPL:AR'
try:
    html_file=urllib.urlopen(url)
    html_text=html_file.read()
    data=json.load(html_text)
    data_points=data['data_values']
    for i in range(len(data_points)):
        print data_points[i]
except IOError as (errno,strerror):
    print "I/O error({0}):{1}".format(errno,strerror) 
```

# java - 为什么以下行会使我的 Android 应用程序崩溃？

> ID：16186756
> 
> 赞同：-2
> 
> 时间：2013-04-24T08:09:54.750
> 
> 标签：java, android

以下行，无论放在哪里都会使我的 Android 程序崩溃。

```
EditText editText1;
double pro = Double.parseDouble(editText1.getText().toString()); 
```

附加代码：

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btsub"
        android:layout_marginTop="58dp"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText> 
```

我究竟做错了什么？我没有调试经验。

编辑 -

下面将显示一个包含：“Something is real wrong”的吐司

```
try {
                    if(editText1 != null) {
                        pro = Double.parseDouble(editText1.getText().toString());
                    } else {
                        Context context = getApplicationContext();
                        CharSequence text = "Something real wrong";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    }
                } catch(NumberFormatException e) {
                    Context context = getApplicationContext();
                    CharSequence text = "Empty";
                    int duration = Toast.LENGTH_SHORT;

                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:16:10.180

首先，您应该检查是否`editText1`是`null`（这是您的实际问题！*），而不是检查是否`NumberFormatException`抛出了 a。

*）您的问题是您刚刚定义了对控件的未初始化*引用*。您需要获得该`findViewById()`功能的参考：

```
EditText editText1 = (EditText)findViewById(R.id.editText1);
double pro;
try {
    if(editText1 != null) {
        pro = Double.parseDouble(editText1.getText().toString());
    } else {
        // you have an coding problem ;-)
        // this should now just happen if you change the id in your xml
    }
} catch(NumberFormatException e) {
    // input was no number or an empty string
} 
```

# java - 未找到文件：MANIFEST.MF

> ID：16186758
> 
> 赞同：-1
> 
> 时间：2013-04-24T08:10:02.723
> 
> 标签：java, maven, jboss

当我在 JBoss 4.2.3 上部署我的项目时，出现此错误 File not found: C:\Dev\workspace\MyProject\target\classes\META-INF\MANIFEST.MF。你对这个错误有什么想法吗？我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:18:59.150

您似乎正在您的应用程序中寻找此文件。由于路径是硬编码的并且仅在您的工作空间中有效，因此在部署应用程序时无法找到它。

因此，要解决此问题，请不要查找此文件。

这里有很多问题。

1.  你为什么要找这个文件？
2.  如果您需要清单，则应将其作为资源而不是文件打开：`getClass().getResourceAsStream("META-INF/MANIFEST.MF")`

# samsung-smart-tv - TypeError：'undefined' 不是函数（评估 'ime.registIMEKey()'）

> ID：16186773
> 
> 赞同：1
> 
> 时间：2013-04-24T08:11:06.777
> 
> 标签：samsung-smart-tv

尽管在三星智能电视 SDK 4.0 中设置和定义了所有内容，但我收到了这个错误：

```
TypeError: 'undefined' is not a function (evaluating 'ime.registIMEKey()') 
```

请帮忙！

```
CODE:

var widgetAPI = new Common.API.Widget();
var tvKey = new Common.API.TVKeyValue();

var wapal_magic =
{
    elementIds: new Array(),
    inputs: new Array(),
    ready: new Array()
};
/////////////////////////
var Input = function (id, previousId, nextId) {
    var previousElement = document.getElementById(previousId),
    nextElement = document.getElementById(nextId);

    var installFocusKeyCallbacks = function () {
    ime.setKeyFunc(tvKey.KEY_UP, function (keyCode) {
        previousElement.focus();
        return false;
    });
    ime.setKeyFunc(tvKey.KEY_DOWN, function (keyCode) {
        nextElement.focus();
        return false;
    });
    ime.setKeyFunc(tvKey.KEY_RETURN, function (keyCode) {
        widgetAPI.blockNavigation();
        return false;
    });
    ime.setKeyFunc(tvKey.KEY_EXIT, function (keyCode) {
        widgetAPI.blockNavigation();
        return false;
    });
}

    var imeReady = function (imeObject) {
        installFocusKeyCallbacks();
        wapal_magic.ready(id);
    },
    ime = new IMEShell(id, imeReady, 'en'),
    element = document.getElementById(id);
}

wapal_magic.createInputObjects = function () {
    var index,
        previousIndex,
        nextIndex;

    for (index in this.elementIds) {
        previousIndex = index - 1;
        if (previousIndex < 0) {
            previousIndex = wapal_magic.inputs.length - 1;
        }
        nextIndex = (index + 1) % wapal_magic.inputs.length;
        wapal_magic.inputs[index] = new Input(this.elementIds[index],
                this.elementIds[previousIndex], this.elementIds[nextIndex]);
    }
};

wapal_magic.ready = function (id) {
    var ready = true,
    i;

    for (i in wapal_magic.elementIds) {
        if (wapal_magic.elementIds[i] == id) {
            wapal_magic.ready[i] = true;
        }

        if (wapal_magic.ready[i] == false) {
            ready = false;
        }
    }
    if (ready) {
        document.getElementById("txtInp1").focus();
    }
};
////////////////////////
wapal_magic.onLoad = function()
{
    // Enable key event processing
    //this.enableKeys();
   // widgetAPI.sendReadyEvent();

    this.initTextBoxes(new Array("txtInp1", "txtInp2"));

};
wapal_magic.initTextBoxes = function(textboxes){
    this.elementIds = textboxes;
    for(i=0;i<this.elementIds.length;i++){
        this.inputs[i]=false;
        this.ready[i]=null;
    }

        this.createInputObjects();
    widgetAPI.registIMEKey();
};
wapal_magic.onUnload = function()
{

};

wapal_magic.enableKeys = function()
{
    document.getElementById("anchor").focus();
};

wapal_magic.keyDown = function()
{
    var keyCode = event.keyCode;
    alert("Key pressed: " + keyCode);

    switch(keyCode)
    {
        case tvKey.KEY_RETURN:
        case tvKey.KEY_PANEL_RETURN:
            alert("RETURN");
            widgetAPI.sendReturnEvent();
            break;
        case tvKey.KEY_LEFT:
            alert("LEFT");
            break;
        case tvKey.KEY_RIGHT:
            alert("RIGHT");
            break;
        case tvKey.KEY_UP:
            alert("UP");
            break;
        case tvKey.KEY_DOWN:
            alert("DOWN");
            break;
        case tvKey.KEY_ENTER:
        case tvKey.KEY_PANEL_ENTER:
            alert("ENTER");
            break;
        default:
            alert("Unhandled key");
            break;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T00:37:42.107

registIMEKey 方法是插件 API 的一部分。

```
var pluginAPI = new Common.API.Plugin();
pluginAPI.registIMEKey(); 
```

请参阅： http: [//www.samsungdforum.com/Guide/ref00006/common_module_plugin_object.html#ref00006-common-module-plugin-object-registimekey](http://www.samsungdforum.com/Guide/ref00006/common_module_plugin_object.html#ref00006-common-module-plugin-object-registimekey)

编辑：更新以添加代码解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T14:13:08.437

widgetAPI 没有包含方法 registIMEKey();，它包含在 IMEShell 中。

# python - 在 python 中评估用户输入字符串时出错

> ID：16186778
> 
> 赞同：1
> 
> 时间：2013-04-24T08:11:19.853
> 
> 标签：python, powershell, python-3.x, notepad++, python-idle

我正在使用 notepad++ 和 windows powershell 来编辑和执行 python 3.2 程序。这里有两个案例

1.  情况1

    ```
    w = 'a'
    u = 'a'
    print (u == w) 
    ```

    输出：`True`

2.  案例2

    ```
    w = "a"
    u = input('enter string ') #user enters a
    print (u == w) 
    ```

    输出：`False`

我无法弄清楚是什么导致了这个错误。
这两种情况的 OUTPUT 在 IDLE 中为 True，但在 notepad++ 和 powershell 组合的情况下不匹配。谁能帮帮我？

# c# - ThreadStart 和 ParameterizedThreadStart 之间的调用不明确

> ID：16186779
> 
> 赞同：0
> 
> 时间：2013-04-24T08:11:19.880
> 
> 标签：c#, wpf, multithreading

我试图编译以下代码：

```
public class SplashScreenManager
{
    private static readonly object mutex = new object();
    public static ISplashScreen CreateSplashScreen(Stream imageStream, Size imageSize)
    {
        object obj;
        Monitor.Enter(obj = SplashScreenManager.mutex);
        ISplashScreen vm2;
        try
        {
            SplashScreenWindowViewModel vm = new SplashScreenWindowViewModel();
            AutoResetEvent ev = new AutoResetEvent(false);
            Thread thread = new Thread(delegate
            {
                vm.Dispatcher = Dispatcher.CurrentDispatcher;
                ev.Set();
                Dispatcher.CurrentDispatcher.BeginInvoke(delegate //<- Error 2 here
                {
                    SplashForm splashForm = new SplashForm(imageStream, imageSize)
                    {
                        DataContext = vm
                    };
                    splashForm.Show();
                }, new object[0]);
                Dispatcher.Run();
            });
            thread.SetApartmentState(ApartmentState.STA);
            thread.IsBackground = true;
            thread.Start();
            ev.WaitOne();
            vm2 = vm;
        }
        finally
        {
            Monitor.Exit(obj);
        }
        return vm2;
    }
} 
```

并得到错误：

> 以下方法或属性之间的调用不明确：“System.Threading.Thread.Thread(System.Threading.ThreadStart)”和“System.Threading.Thread.Thread(System.Threading.ParameterizedThreadStart)”

**Edit1：** 我更正了代码并得到错误 2：

**无法将匿名方法转换为类型“System.Windows.Threading.DispatcherPriority”，因为它不是委托类型**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T08:12:41.250

您可以尝试替换`delegate{...}`为`delegate(){...}`. 这样编译器就会知道你想要一个没有参数的重载动作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:15:31.647

BeginInvoke 有很多不同的方法调用，根据您使用的框架而有所不同。看看[http://msdn.microsoft.com/en-us/library/ms604730(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms604730(v=vs.100).aspx)和[http://msdn.microsoft.com/en-us/library/ms604730(v =vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms604730(v=vs.90).aspx)或您正在使用的任何版本的 .NET 框架以获取更多信息。

试试这个以获得 .NET 3.5 和 4 的兼容性；这应该可以解决您的第一个和第二个问题；您遇到的第二个错误的线索在错误消息中；您正在使用的方法需要一个`DispatcherPriority`没有对象参数的方法，并且您正在向它传递一个委托，这实际上是第二个参数所必需的。

```
Thread thread = new Thread(new ThreadStart(() =>
        {
            vm.Dispatcher = Dispatcher.CurrentDispatcher;
            ev.Set();
            Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Normal, new MethodInvoker(() =>
            {
                SplashForm splashForm = new SplashForm(imageStream, imageSize)
                {
                    DataContext = vm
                };
                splashForm.Show();
            }));
            Dispatcher.Run();
        })); 
```

请参阅[MethodInvoker vs Action for Control.BeginInvoke](https://stackoverflow.com/questions/1167771/methodinvoker-vs-action-for-control-begininvoke)了解为什么 MethodInvoker 是更有效的选择

# php - 如何制作 Pinterest pinit 按钮

> ID：16186780
> 
> 赞同：0
> 
> 时间：2013-04-24T08:11:27.177
> 
> 标签：php, wordpress, pinterest

我正在考虑开发一个创建 Pinterest pinit 按钮的插件。我找不到 Pinterest 按钮的 API。谁能告诉如何找到 pinit 按钮代码？pinterest 是否公开提供 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:16:55.557

试试这个代码

```
<a href="http://pinterest.com/pin/create/button/?url=YOUR_PAGE_URl&amp;media=IMAGE_URL&amp;description=Spinach Artichoke Meatballs on MyRecipeMagic.com" count-layout="none" target="_blank" onclick="rewards('pin_it')" class="pin-it-button"><img border="0" title="Pin It" src="http://assets.pinterest.com/images/PinExt.png"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T11:15:05.693

我最好的解决方案，我将代码与其他社交分享

```
<div class="si-share noborder clearfix">

<div>
    <a href="http://www.facebook.com/sharer.php?u=$AbsoluteLink" class="social-icon si-borderless si-facebook" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
        <i class="icon-facebook"></i>
        <i class="icon-facebook"></i>
    </a>
    <a href="https://twitter.com/share" class="social-icon si-borderless si-twitter" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
        <i class="icon-twitter"></i>
        <i class="icon-twitter"></i>
    </a>
    <a href="javascript:void(0)" id="pinit" class="social-icon si-borderless si-pinterest" >
        <i class="icon-pinterest"></i>
        <i class="icon-pinterest"></i>
    </a>
    <a href="https://plus.google.com/share?url=$AbsoluteLink" class="social-icon si-borderless si-gplus" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');return false;">
        <i class="icon-gplus"></i>
        <i class="icon-gplus"></i>
    </a>
</div>
<span style="float: right">Share :</span> 
```

和相关的javascript

```
<script type="text/javascript" >
$(document).ready(function(){
    $("#pinit").click(function(){
        $("#pinmarklet").remove();
        var e = document.createElement('script');
        e.setAttribute('type','text/javascript');
        e.setAttribute('charset','UTF-8');
        e.setAttribute('id','pinmarklet');
        e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e);
    });
}); 
```

# entity-framework - count = 0 的虚拟属性为空

> ID：16186784
> 
> 赞同：1
> 
> 时间：2013-04-24T08:11:34.693
> 
> 标签：entity-framework, unit-testing, entity-framework-5, in-memory-database

我正在使用 Effort ( [https://effort.codeplex.com/](https://effort.codeplex.com/) )，它是一个“ADO.NET 提供程序，它在轻量级进程内主内存数据库而不是传统的外部数据库上执行所有数据操作”以及 Nmemory .

不幸的是，如果我努力执行我的单元测试，我的模型的 count = 0 的所有虚拟集合属性都是空的。

让我给你一个调试器的例子：

这是我的模型对象在单元测试中使用 Effort 加载后的样子： ![具有 Effort 属性的模型对象为空](https://i.stack.imgur.com/EjrMT.jpg) 这是在没有 Effort 的实际应用程序之外的样子： ![实际应用程序中的模型对象-属性不为空](https://i.stack.imgur.com/Wd0xj.jpg)

这就是我在单元测试中使用 Effort 初始化“数据库连接”的方式：

```
DbConnection connection = Effort.DbConnectionFactory.CreateTransient();
unitOfWork = new SqlUnitOfWork(connection); 
```

在上面的代码中调用了我的 SqlUnitOfWork 构造函数：

```
public SqlUnitOfWork(DbConnection connection)
{
    this.SetConnectionString();
    this.Context = new SqlContext(connection);
} 
```

上面代码中调用了我的 SqlContext 构造函数：

```
public SqlContext(DbConnection connection) : base(connection, true)
{
    this.Configuration.LazyLoadingEnabled = true;
} 
```

这是测试运行时我的 DbContextConfiguration 的样子：

![数据库上下文配置](https://i.stack.imgur.com/0ZoTJ.jpg)

因此启用了延迟加载。但不能正常工作。

# mysql - MySQL比较两列中的相同值

> ID：16186786
> 
> 赞同：5
> 
> 时间：2013-04-24T08:11:45.490
> 
> 标签：mysql, sql, database

我的数据库中有这样的数据：

```
jamu_a | jamu_b | khasiat

A      | B      | Z
A      | B      | X
A      | B      | C 
```

然后，我想要这样的输出：

```
jamu_a | jamu_b | khasiat | total

A      | B      | Z, X, C | 3 
```

我不是 MySQL 专家，什么样的查询可以产生这样的输出？告诉我 MySQL 是否不能做到这一点并需要一些编程语言。提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T08:13:01.057

```
SELECT  jamu_a,
        jamu_b,
        GROUP_CONCAT(khasiat) khasiat,
        COUNT(*) total
FROM    TableName
GROUP   BY  jamu_a, jamu_b 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e3976/1)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔════════╦════════╦═════════╦═══════╗
║ JAMU_A ║ JAMU_B ║ KHASIAT ║ TOTAL ║
╠════════╬════════╬═════════╬═══════╣
║ A      ║ B      ║ Z,X,C   ║     3 ║
╚════════╩════════╩═════════╩═══════╝ 
```

如果列上有重复值`KHASIAT`并且您希望它是唯一的，您可以添加`DISTINCT``GROUP_CONCAT()`

```
SELECT  jamu_a,
        jamu_b,
        GROUP_CONCAT(DISTINCT khasiat) khasiat,
        COUNT(*) total
FROM    TableName
GROUP   BY  jamu_a, jamu_b 
```

# php - 哪种方法最适合在 mysql 中存储稍后用于统计的单词列表？

> ID：16186787
> 
> 赞同：7
> 
> 时间：2013-04-24T08:11:48.980
> 
> 标签：php, mysql, database

**细节**

我有一个测验（我们称之为 quiz1）。Quiz1 每次生成时都使用相同的词表。如果用户需要，他们可以跳过单词来完成测验。我想将那些跳过的单词存储在 mysql 中，然后对它们进行统计。

起初我打算将错过的单词作为字符串存储在一列中。每个单词都用逗号分隔。

```
|testid |       missedwords                     | score     |   userid  |
*************************************************************************
| quiz1 | wordlist,missed,skipped,words         |  59       |   1       |
| quiz2 | different,quiz,list                   |  65       |   1       | 
```

这种方法的问题是，我想在每次测验结束时显示参加测验的用户最常错过哪些单词的统计数据。
我假设将遗漏的单词存储在上面的一列中为此目的是低效的，因为我需要提取信息然后对其进行计数-（可能使用 php 进行计数-除非我将已计数的数据存储在单独的表中）。

然后我想也许我需要为遗漏的单词创建一个单独的表格下表的优点是应该很容易从下表中计算单词。

```
|Instance|  missed word     |
*****************************
|   1    |  wordlist        |
|   1    |  missed          |
|   1    |  skipped         | 
```

另一种方法是我可以创建一个带有计数的表，并在每次进行 quiz1 时更新它。

```
Testid  |   wordlist|   missed| skipped| otherword|
**************************************************
Quiz1   |        1  |        1|       1| 0        | 
```

这种方法的问题是我需要为每个测验使用不同的表格，因为每个测验将使用不同的单词。信息也丢失了，因为只保留了计数，而不是用户错过了哪些单词的相关数据。

**问题**

你会使用哪种方法？为什么？欢迎使用替代方法来完成此任务。如果您发现我的逻辑中有任何缺陷，请随时指出。

**编辑** 用户将能够根据需要多次重新参加测验。他们的信息不会更新，而是会为他们重新进行的每个测验创建一个新实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:26:39.530

最好的方法是让单词集合完全标准化。这样，分析将变得简单快捷。

```
quiz_words with wordID, word
quiz_skipped_words with quizID, userID, wordID 
```

要获取用户的所有跳过的单词：

```
SELECT wordID, word 
FROM quiz_words 
JOIN quiz_skipped_words USING (wordID) 
WHERE userID = ?; 
```

您可以添加一个 group by 子句来获得相同单词的组计数。

要获取特定单词的计数：

```
SELECT COUNT(*) 
FROM quiz_words 
WHERE word LIKE '?'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:19:55.537

根据[*数据库规范化理论*](https://en.wikipedia.org/wiki/Database_normalization)，第二种方法更好，因为理想情况下，一个关系表单元格应该只存储一个值，它是原子的且不可拆分的。每个单词都是一个实体实例。

另外，我可能建议不要创建`Quiz-Word`表，而是在表中保留另一列`Missed-Word`用于测验，为此指定了这个词，然后将此列用作`Quiz`表的外键。那么您可能会避免实时表生成（这是数据库设计中的“坏习惯”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:20:46.790

为什么没有 quiz 表和 quiz_words 表，quiz_words 表会将 id、quizID、word 存储为列。然后为每个测验实例在 quiz_words 表中为用户使用的每个单词创建记录。

然后，您可以根据 quizID 和/或测验类型在 quiz_words 表上运行 mysql counts

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T08:22:30.003

您要实现的最佳解决方案（来自我的观点）是标准化方法：

*   `test`具有`test_id`列和其他列的表
*   `missed_words`具有`id`(AI PK) 和`word`(UQ) 的表，**在这里您还可以有一个列，每次在表`hits`中建立与该单词的关联时，该列都应该增加，`test_missed_words`** 这样您就拥有了您想要已经编译的统计信息并且您没有不需要从选择查询中计算它们
*   `test_missed_words`这是一个具有`test_id`和`missed_word_id`（复合PK）的链接表

这样您就没有多余的数据（遗漏的单词），并且您可以轻松提取所需的统计信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T08:35:58.550

保留尽可能多的信息（并且能够在以后编译特定于用户的统计信息以及现在的整体统计信息），我将创建一个类似于以下内容的表结构：

```
 Stats
quizId  |   userId  |     type|    wordId|
******************************************
1       |        1  |   missed|         4|
1       |        1  |  skipped|         7| 
```

Where`type`可以是`int`定义不同类型的操作，也可以是字符串表示 - 取决于您是否认为它可以更多。^^

然后：

```
 Quizzes
quizId  |  quizName|
********************
       1|    Quiz 1| 
```

使用为每个测验制作的单词列表，例如：

```
 WordList (pk: wordId)
quizId  |   wordId|   word|
***************************
      1 |       1 |    Cat|
      1 |       2 |    Dog| 
```

您可以随心所欲地拥有您的`user`桌子，我们只是将其链接`id`到该系统。

这样，所有`id`字段都将是表中的非唯一键`stats`。当用户跳过或遗漏一个词时，您会将`id`该词的`stats`与相关的`quizId`和一起添加到表中`type`。以这种方式获取统计数据将使作为`per-user`基础、`per-word`基础或`per-type`基础——或三者的组合变得容易。它还将使每个测验的单词列表以及用于制作测验的容易获得。^^

希望这可以帮助！

# c# - 下拉菜单的 C# 寻呼机问题

> ID：16186796
> 
> 赞同：3
> 
> 时间：2013-04-24T08:12:23.860
> 
> 标签：c#, asp.net

我已经创建了一个带有上一个和下一个链接的 ajax 页面自定义控件，现在当我向控件添加一个下拉列表时，它无法按预期工作..

我使用了代码形式[http://www.flixon.com/Articles/Custom-ASPNET-Data-Pager-Control-22.aspx](http://www.flixon.com/Articles/Custom-ASPNET-Data-Pager-Control-22.aspx)

当我添加下拉菜单时，在选定的索引上更改上一个和下一个按钮会消失。我相信这是因为我在预渲染事件中绑定了下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T03:19:33.993

除了在预渲染事件中为分页绑定下拉列表，您还可以在绑定网格时绑定它。

```
if (gridView.BottomPagerRow != null)
{
  GridViewRow myGridViewRow = gridView.BottomPagerRow;
                DropDownList ddCurrentPage = (DropDownList)myGridViewRow.Cells[0].FindControl("ddCurrentPage");

//To do to bind Drop down
} 
```

并且您还可以显式调用下拉选定的索引更改事件

这是寻呼机模板的代码

```
<PagerTemplate>                                           
    <asp:Button runat="server" ID="imgPagePrevious" CssClass="Pagingbutton" Text="<"CommandArgument="Prev" CommandName="Page" OnCommand="imgPagePrevious_Command" />
    <asp:DropDownList ID="ddCurrentPage" runat="server" CssClass="PagingDrop" AutoPostBack="True" OnSelectedIndexChanged="ddCurrentPage_SelectedIndexChanged">
    </asp:DropDownList>
     <asp:Button runat="server" ID="imgPageNext" CssClass="Pagingbutton" Text=">" CommandArgument="Next" CommandName="Page" OnCommand="imgPageNext_Command"/>                                          
  </PagerTemplate> 
```

尝试这个。

# sql-server - SQL Server如何将ID等表列传递给同一数据库中的标量函数

> ID：16186808
> 
> 赞同：0
> 
> 时间：2013-04-24T08:13:12.167
> 
> 标签：sql-server, tsql

我需要将所有 id 值传递给函数。我怎样才能做到这一点？

就像我可以循环所有 id 并为这些有趣的标量函数传递所有 id

```
empFn(emp.[id]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:24:24.100

您可以使用表值参数来执行此操作：

[http://msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

网上有很多很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:15:01.957

如果我的问题正确，您应该使用[CROSS APPLY](http://explainextended.com/2009/07/16/inner-join-vs-cross-apply/)

```
SELECT *
FROM dbo.employees emp
CROSS APPLY (SELECT * FROM dbo.empFn(emp.[id])) 
```

# batch-file - 如何用 .bat 文件控制 .exe 文件？

> ID：16186809
> 
> 赞同：0
> 
> 时间：2013-04-24T08:13:14.073
> 
> 标签：batch-file, cmd

嗨，我有程序 Program.exe，它有一些 3 个参数。我正在尝试通过 .bat 文件控制该程序。我可以毫无问题地使用参数运行这个程序，这很容易。但是如果这个程序成功启动，那么有两个选择要做什么。例如，如果用户键入“a”，则该程序将在控制台“hi”上写入。如果用户键入“b”，则程序将写入控制台“hello”。我想以某种方式仅在启动后将“a”选项发送到此 Program.exe。不幸的是，我无法添加另一个参数。有谁知道该怎么做？所以这是我非常简单的 .bat 文件。

```
Program %1 %2 %3 
```

我试图将此命令添加到 .bat 文件中，但它不起作用。

```
echo a > Program 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:57:22.623

尝试：

```
Echo a| Program %1 %2 %3 
```

这是大多数 CLI 应用程序的已知方法，但不适用于所有应用程序，如果管道不适用于您的应用程序，则忘记使用本机 Batch 并尝试使用 nircmd sendkey 命令或其他 CLI 应用程序发送密钥。

管道：[http ://ss64.com/nt/syntax-redirection.html](http://ss64.com/nt/syntax-redirection.html)

NirCMD：[http ://www.nirsoft.net/utils/nircmd.html](http://www.nirsoft.net/utils/nircmd.html)

# android - 使用后退按钮取消异步任务

> ID：16186810
> 
> 赞同：0
> 
> 时间：2013-04-24T08:13:15.957
> 
> 标签：android, android-asynctask, progressdialog, android-alertdialog

我正在尝试在后台执行一些任务`AsynTask`。如下：

```
class CheckTypesTask extends AsyncTask<Void, Void, Void> {

        ProgressDialog Asycdialog = new ProgressDialog(Home.this);
        String typeStatus;

        @Override
        protected void onPreExecute() {

            super.onPreExecute();

            Asycdialog.setMessage("First time initialization. Please wait...");
            Asycdialog.show();
        }

        @Override
        protected Void doInBackground(Void... arg0) {

            create_database_and_tables();
            insert_in_questions();
            insert_in_answer_option();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // hide the dialog

            super.onPostExecute(result);

            database.close();
            Asycdialog.dismiss();
        } 
```

现在的问题是，如果我在`ProgressDialog`可见时按下硬返回键，它只会关闭`ProgressDialog`. 但是当我检查时`Database`，我发现我所有要插入的记录都插入成功。我不明白为什么`ProgressDialog`即使`doInBackground()`完成了它的工作也会继续显示，不管`ProgressDialog`一段时间后消失，但为什么会这样？

我的下一个问题是，如果要插入的数据集不够大，那为什么`ProgressDialog`还会出现。实际上，我是这样测试的。两秒钟后，我立即按下了硬返回键。并检查了数据库，我发现所有的记录都被插入了。为什么`onPostExecute()`不在`doInBackground()`完成工作后立即调用？

最后一个问题是，我想在仍然可见的情况下按下硬返回键时显示`AlertDialog`yes 和 no 。然后，如果按下是，则应该消失并且应该停止工作。如果没有按下，那么只有应该被解除，并且应该仍然可见。`Button``ProgressDialog``ProgressDialog``doInBackground()``AlertDialog``ProgressDialog`

请帮我解决我的疑惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:18:59.050

如果您将某行代码放在`doInBackground`只执行一次而不是循环中，则在执行任务后无法取消它。但是如果您在其中有循环或其他定期运行的命令，您可以将`setCancel(true)`其用于您的任务和`isCanceled()`在循环执行语句之前检查任务的值。

我猜当您关闭对话框时，检查数据库记录需要一些时间，并且在此期间`doInBackground`一直持续到所有记录都插入到数据库中。所以当您检查数据库时，请查看所有记录都已插入。

在doInBackground `onPostExecute()`(Object[]) 返回后也会立即在 UI 线程上调用（如果任务未取消）。例如执行此 AsyncTask：

```
class Test extends AsyncTask<Void, Void, Void>{

        @Override
        protected Void doInBackground(Void... params) {
            System.out.println("End doInBackground");
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            System.out.println("Start onPostExecute");
        }

    } 
```

但是您在关闭对话框之前添加了一些命令，这些命令可能会消耗很少的时间，并且活动转换（关闭对话框和前台活动）本身也会消耗一些时间。

**编辑：**

> 最后一个问题是，我想显示一个带有是和否按钮的 AlertDialog，...

您必须向 AsyncTask 类添加一个方法，该方法显示具有所需功能的警报对话框并存储对任务的引用并覆盖`onBackPressed()`Activity 的方法。执行 onBackPressed() 时，调用 Task 实例的该方法。尽管您知道您不能以这种方式取消`inserting progress`。如果您希望没有记录插入到数据库中，您可以在插入后在后台将它们删除！

# android - 将 GPS 数据从数据库导出到 android 中的 GPX 或 KML

> ID：16186816
> 
> 赞同：3
> 
> 时间：2013-04-24T08:13:40.747
> 
> 标签：android, gps, kml, gpx

我正在开发一个应用程序来跟踪 gps 坐标并将它们存储到数据库中的单独表中。我想将表格中的 gps 数据导出为 GPX 或 KML 格式。我真的找不到任何教程或解释如何做到这一点。我应该将纬度和经度坐标写入标签之间的文件吗？或者我的文件需要满足什么要求？

我实现的代码：

```
 File directory = Environment.getExternalStorageDirectory();
        if (directory.canWrite()){
            File kmlFile = new File(directory, "" + table + ".kml");
            FileWriter fileWriter = new FileWriter(kmlFile);
            BufferedWriter outWriter = new BufferedWriter(fileWriter);

            outWriter.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
                    "\n <kml xmlns=\"http://www.opengis.net/kml/2.2\">" +
                    "\n <Document>" + "\n");
                    for (int i = 0; i<latArrayList.size();i++){
                        outWriter.write("<Placemark>" + 
                                        "\n <name>" + i + "</name>" +
                                        "\n <description> </description>" +
                                        "\n <Point>" +
                                        "\n <coordinates>" + latArrayList.get(i) + "," + lonArrayList.get(i) + "</coordinates>" +
                                        "\n </Point>" +
                                        "\n </Placemark>" + "\n");
                    }
            outWriter.write("</Document>" + 
                            "\n </kml>");
            outWriter.close(); 
```

以及我加载到谷歌地图并显示错误坐标的 kml 文件示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
<Placemark>
<name>0</name>
<description> </description>
<Point>
<coordinates>46.09312,18.22501
</coordinates>
</Point>
</Placemark>
<Placemark>
<name>1</name>
<description> </description>
<Point>
<coordinates>46.09317333333333,18.22474833333333
</coordinates>
</Point>
</Placemark>
<Placemark>
<name>2</name>
<description> </description>
<Point>
<coordinates>46.093138333333336,18.22449
 </coordinates>
</Point>
</Placemark> </Placemark>
</Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:25:43.557

不知道你是否还有问题...

可以在此处找到 KML 文件的要求： [https ://developers.google.com/kml/documentation/kmlreference](https://developers.google.com/kml/documentation/kmlreference)

以及 GPX 的 xml 架构： [http ://www.topografix.com/GPX/1/1/gpx.xsd](http://www.topografix.com/GPX/1/1/gpx.xsd)

我没有“否定”你，但我猜有些人这样做了，因为这些搜索很容易；）

您确实是对的，您必须将其写入文件，然后您可以通过意图将其发布到 Google 地球。

祝你好运

# objective-c - 在标签栏项目中添加视图 - xcode

> ID：16186817
> 
> 赞同：0
> 
> 时间：2013-04-24T08:13:42.247
> 
> 标签：objective-c, xcode, view, tabs, tabbar

我有一个由标签栏制作的 x-code 项目。在`AppDelegate.m`我为每个视图创建三个按钮：

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
UIViewController *viewController3=[[[ThirdViewController alloc]initWithNibName:@"ThirdViewController" bundle:nil]autorelease];
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = @[viewController1, viewController2,viewController3];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES; 
```

当我在第一个视图上时，我想创建一个调用另一个视图的按钮：

```
-(IBAction)btnPush{
 [[self navigationController] pushViewController:newView animated:YES];
} 
```

但是当新视图出现时，它会覆盖底部的标签栏。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:20:42.603

`UIViewController`而不是`UITabBarController`添加`UINavigationController`如下

```
UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
UIViewController *viewController3=[[[ThirdViewController alloc]initWithNibName:@"ThirdViewController" bundle:nil]autorelease]; 
```

现在将您的 ViewController 添加到 NavigationController

```
UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:viewController2];
UINavigationController *navController3 = [[UINavigationController alloc] initWithRootViewController:viewController3];

self.tabBarController.viewControllers = @[navController1, navController2,navController3]; 
```

它将在 TabBarController 中添加导航控制器

# android - 在android中将透明背景设置为alertdialog

> ID：16186818
> 
> 赞同：43
> 
> 时间：2013-04-24T08:13:44.903
> 
> 标签：android, android-alertdialog

![在此处输入图像描述](https://i.stack.imgur.com/xcagf.png)

我想显示具有透明背景的警报对话框。我的警报对话框代码是：

```
AlertDialog.Builder imageDialog = new AlertDialog.Builder(SubProducts.this);
LayoutInflater inflater = (LayoutInflater)SubProducts.this.getSystemService(LAYOUT_INFLATER_SERVICE);

View layout = inflater.inflate(R.layout.cust_toast_layout,(ViewGroup)findViewById(R.id.linearLayout2));

ImageView image = (ImageView)layout.findViewById(R.id.imageView1);
image.setPadding(0, 20, 0, 0);
imgLoader.DisplayImage(image_url, loader, image);

TextView tprice=(TextView)layout.findViewById(R.id.pricetext);
tprice.setText("$ "+pricedouble);

TextView tvdprh=(TextView)layout.findViewById(R.id.textView1);

tvdprh.setText(prohd);

WebView wv=(WebView)layout.findViewById(R.id.webview);

Spanned sub=Html.fromHtml(descp);
String s = "<html><head><style type='text/css' >@font-face {font-family:'myfont';src: url('file:///android_asset/fonts/ABeeZee-Regular.ttf');}body {margin:0px;color:000000;font-family: myfont;"
        + "text-align: justify;}</style></head><body>"
        + sub
        + "</body></html>";

wv.loadDataWithBaseURL("", s, "text/html", "utf-8", null);
wv.setVerticalScrollBarEnabled(true);
wv.setBackgroundColor(Color.TRANSPARENT);
wv.setPadding(5, 25, 5, 0);

ImageView imgcartl=(ImageView)layout.findViewById(R.id.imageView2);
imgcartl.setBackgroundResource(R.drawable.cartlines);

ImageView brobutton=(ImageView)layout.findViewById(R.id.imageView3);
brobutton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {

        Intent intentlabl = new Intent(getBaseContext(), Label.class);
Bundle b=new Bundle();
b.putString("url", image_urlpdf);
b.putBoolean("isDialog", true);
intentlabl.putExtras(b);
startActivity(intentlabl);

}
        });

ImageView shobutton=(ImageView)layout.findViewById(R.id.imageView4);

shobutton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
        // TODO Auto-generated method stub
//intent code
        }
        });

ImageView addbutton=(ImageView)layout.findViewById(R.id.imageView5);
addbutton.setBackgroundResource(R.drawable.addicon);
addbutton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
        // TODO Auto-generated method stub

        passingid.add(prodid);

Product prodobj=new Product();
prodobj.setId(passingid);

new LongRunningGetIO4().execute(pricedouble, prodid);
}
        });

imageDialog.setView(layout);

imageDialog.create();
imageDialog.show(); 
```

我的背景图像包含圆角。但不幸的是，pop 出现在矩形白色背景上。任何身体请给我建议。提前谢谢。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-04-24T08:24:31.350

定义文件后面的`styles.xml`内容

```
<style name="CustomDialog" parent="android:Theme.Dialog">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

并将其作为参数传递给`AlertDialog`构造函数

```
AlertDialog.Builder imageDialog = new AlertDialog.Builder(SubProducts.this, R.style.CustomDialog); 
```

或者以编程方式，通过`Dialog`您可以调用的实例

```
myDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-11-25T09:53:28.453

另一种解决方案：

使用时`Alertdialog.builder`- 它没有提供`getwindow()`选项。所以我们可以让它像这样工作：

```
AlertDialog dialog = builderScan.create();
            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
            dialog.show(); 
```

并且您的背景`AlertDialog`将是透明的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-24T08:19:05.783

而不是这个：

```
imageDialog.create();
imageDialog.show(); 
```

你可以尝试做这样的事情：

```
AlertDialog imageDialogAlert = imageDialog.create();
imageDialogAlert.show();
imageDialogAlert.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-01T14:31:48.467

叫这个，

```
customDialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

就在之前

```
customDialog.show(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-26T12:39:40.437

如果您只想从对话框布局中删除白色背景，则只需添加：

```
dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

如果您还想删除对话框的窗口背景半透明颜色，则需要添加两行：

```
dialog.getWindow().setDimAmount(0f);    
dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T08:26:09.953

```
protected AlertDialog(Context context) {
    this(context, com.android.internal.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
}

public Builder(Context context) {
    this(context, com.android.internal.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-07T23:31:12.153

下面的代码更改了背景布局。

```
LayoutInflater inflater = MainActivity.this.getLayoutInflater();

View layout = inflater.inflate(R.layout.your_layout, null);

final AlertDialog alertDio = new AlertDialog.Builder(MainActivity.this)
                        .setView(layout)
                        .show();

alertDio.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.parseColor("#801b5e20"))); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-23T14:48:50.470

```
val dialog: AlertDialog = builder.create()
      dialog.window!!.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))
        dialog.setView(view)
        dialog.show()``` 
```

# c# - 使用 Action<> 和 Func<> 的命令

> ID：16186828
> 
> 赞同：1
> 
> 时间：2013-04-24T08:14:33.500
> 
> 标签：c#, wpf, mvvm, icommand, relaycommand

我正在研究[Silverlight 和 WPF 中企业架构的 MVVM 生存指南，](http://www.packtpub.com/mvvm-survival-guide-for-enterprise-architectures-in-silverlight-and-wpf/book)并在命令部分遇到了障碍。具体来说，它基于 Action<object> 和 Func<object, bool> 创建一个命令。在我应该“构建和运行应用程序”的时候，我却得到了编译错误。

命令内容：

```
public class Command : ICommand
{
  private readonly Action<object> _execute;
  private readonly Func<object, bool> _canExecute;
  public Command(Action<object> execute, Func<object, bool> canExecute)
  {
    _execute = execute;
    _canExecute = canExecute;
  }
 public void Execute(object parameter)
  {
    _execute(parameter);
  }
  public bool CanExecute(object parameter)
  {
    return (_canExecute == null) || _canExecute(parameter);
  }
  ...
} 
```

方法调用的东西：

```
private Command _showDetailsCommand;
public Command ShowDetailsCommand
{
  get 
  { 
      return _showDetailsCommand 
             ?? (_showDetailsCommand 
                = new Command(ShowCustomerDetails, IsCustomerSelected));
   }
}
public void ShowCustomerDetails()
{
  if (!IsCustomerSelected()){
    throw new InvalidOperationException("Unable to display customer details. "
                + "No customer selected.");
  }
  CustomerDetailsTabViewModel customerDetailsViewModel = 
            GetCustomerDetailsTab(SelectedCustomerID);
  if (customerDetailsViewModel == null)
  {
    customerDetailsViewModel 
         = new CustomerDetailsTabViewModel
               (_dataProvider, 
                SelectedCustomerID);
    Tabs.Add(customerDetailsViewModel);
  }
  SetCurrentTab(customerDetailsViewModel);
}
private bool IsCustomerSelected()
{
  return !string.IsNullOrEmpty(SelectedCustomerID);
} 
```

我在位下方出现波浪状的蓝线，`new Command(ShowCustomerDetails, IsCustomerSelected))`并带有“最佳重载匹配`Northwind.Application.Command.Command(System.Action<object>, System.Func<object, bool>)`具有一些无效参数”。

当我尝试编译时，我收到上述错误，以及两条消息：

```
Argument 1: Cannot convert from method group to System.Action<object>
Argument 2: Cannot convert from method group to System.Func<object, bool> 
```

现在，我对 Actions 和 Funcs 的了解比昨天*更多，并且几乎可以通过将命令声明更改为：*

```
private readonly Action _execute;
private readonly Func<bool> _canExecute; 
```

并在整个代码中做类似的事情，但后来我收到一个错误，说我没有`ICommand`正确实现。

为了节省我的前额/最近的墙，有人可以告诉我我做错了什么以便我可以修复它，或者给定的（书）代码让我出错，所以我可以继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:26:04.617

那是因为

```
private bool IsCustomerSelected()
{
    return !string.IsNullOrEmpty(SelectedCustomerID);
} 
```

不是 type`Func<object, bool>`而是`Func<bool>`. 它应该看起来像

```
private bool IsCustomerSelected(object param)
{
    return !string.IsNullOrEmpty(SelectedCustomerID);
} 
```

您可以使用`Predicate<object>`instead ，至少对我来说，更清楚的是签名应该是什么样子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:30:12.487

将您的`Command`课程替换为下面的代码 后，它应该是最重要的

```
public class Command : ICommand
{   //private readonly Action<object> _execute;
    private readonly Action _execute;

    //private readonly Func<object, bool> _canExecute;
    private readonly Func<bool> _canExecute;//instead of prev line 

    //public Command(Action<object> execute) 
    public Command(Action execute)//instead of prev line
      : this(execute, null)
    { }

    //public Command(Action<object> execute,
    public Command(Action execute,//instead of prev line 
    Func<bool> canExecute)//added instead of next line 
    //Func<object, bool> canExecute)
    {   _execute = execute;
        _canExecute = canExecute;
    }

    public void Execute(object parameter)
    {
        //_execute(parameter);
        _execute();//added instead of prev line 
    }
    public bool CanExecute(object parameter)
    {   return (_canExecute == null)
        //|| _canExecute(parameter);
        || _canExecute();//added instead of prev line 
    }
    public event EventHandler CanExecuteChanged = delegate { };
    public void RaiseCanExecuteChanged()
    {   CanExecuteChanged(this, new EventArgs());     }
} 
```

在上述书中的代码上检查了这一点（第 205 页，第 5 章）

*   Vice R., Shujaat Siddiqi M. - Silverlight 和 WPF 中企业架构的 MVVM 生存指南，PACKT Publishing，ISBN 978-1-84968-342-5，2012

这是书本中的错误/错字

真的，在本书的随附代码中，任何人都可以从[下载本书的支持文件中获得](http://www.packtpub.com/support/8120)，使用正确`RelayCommand`的类而不是`Command`书中的类，据此我在上面对`Command`类 进行了更改

顺便说一句，这[本书的在线勘误表中没有](http://www.packtpub.com/support/8120)

* * *

# 回复[@DHN 评论](https://stackoverflow.com/questions/16186828/commands-using-action-and-func/16187043#comment23146817_16187043)

改变`IsCustomerSelected()`方法`IsCustomerSelected(object param)`会带来

在`ShowCustomerDetails`下面的片段中（它在“方法调用的东西：”之后）：

```
private Command _showDetailsCommand;

public Command ShowDetailsCommand
{
    get
    {
        return _showDetailsCommand ??
                (_showDetailsCommand =
                    new Command
                        (
                           ShowCustomerDetails,//error
                           IsCustomerSelected
                         )
                );
    }
} 
```

错误：

> 需要一个带有“void ShowCustomerDetails(object)”签名的方法

因为`ShowCustomerDetails()`是：

```
public void ShowCustomerDetails()
{
  if (!IsCustomerSelected())
     throw new InvalidOperationException("Unable to display customer details. "
     + "No customer selected.");
} 
```

如果要更改后者，`ShowCustomerDetails(object param)`这会带来更多的变化和更多的必要性，以便在每次连续更改时更改代码。

只需运行代码并尝试合并您的更改，看看它会调用什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:28:23.013

Action, Func 是 C# 设计实现闭包的方式。Action 意味着你有参数对象的闭包并返回**System.Void**类型。Func 是用参数对象实现闭包并返回**System.Bool**类型的方式。

有关 C# 中闭包的更多详细信息，请参阅[Jon Skeet 的闭包之美](http://csharpindepth.com/articles/chapter5/closures.aspx)

# html - HTML CSS - 在 Windows 手机上显示时字体过大

> ID：16186829
> 
> 赞同：4
> 
> 时间：2013-04-24T08:14:38.940
> 
> 标签：html, css, windows-phone-8

我实际上正在创建一个时事通讯。当我将电子邮件打开到 Outlook，Outlook Web Access 时，布局与我构建的完全相同。然而，当我在我的 windows phone 8 中打开同一封电子邮件时，字体大小不受尊重，并且电子邮件不再具有相同的布局。

你有什么建议吗？我的标签中有这个 css 指令。（-ms-文本大小调整：无；）

```
body {
            background-color: #f9fbf4;
            margin: 0;
            padding: 0;
            -ms-text-size-adjust: none;
        } 
```

我也将这种 CSS 放在样式跨度中，但它不起作用

```
<span style='font-size: 8.5pt; font-family: Georgia,"sans-serif"; color: white; font-size-adjust: none;'>Hello</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:38:20.327

这可能与设备上的视口大小有关。您可以尝试设置初始比例以查看是否可以解决问题。

```
<meta name="viewport" content="width=device-width; initial-scale=1.0;> 
```

# objective-c - 查看 QTMovie 持续时间属性？

> ID：16186831
> 
> 赞同：0
> 
> 时间：2013-04-24T08:14:41.543
> 
> 标签：objective-c, cocoa, quicktime

在过去的两周里，我可能一直在搜索 Apple Quicktime 文档，以解决看似非常基本的问题，但无济于事。这里的问题...

我有几个简短的 QTMovie 文件，每个文件都包含三个轨道——通常两个包含声音和视频，加上一个额外的视频轨道，其中包含字幕文本图像（总共制作两个视频轨道）。如果我在 Quicktime Pro 中选择其中一个轨道并将其导出为“电影到图像序列”，我可能会发现，142 个静止图像分布在整个电影期间。我的搜索方法还报告了正确的总帧数。

现在，我了解到您可以拍摄单帧图像，将它们添加到 QTMovie 中，并使用“attributeForKey:QTMovieDurationAttribute”设置它们各自的屏幕显示时间，无论您想要多长时间。但是我到底要如何再次**访问**这些数据呢？（本质上似乎与此过程相反）。

在伪代码中，我想做的是：

```
{
select video track #2 ...
call up the first image in the sequence ...
access and note its on-screen duration setting ...
call up the second image ...
access and note its duration ...
... repeat until done. 
```

}

我不是在编辑这些数据或任何东西之后——只是想知道如何访问视频轨道中的各个帧……以及**HECK**这个时间信息隐藏在 QT 内部的什么地方。

作为一名老年人，我认为我对这类事情开始变得太老了，而 Quicktime 是一个庞大的、通常复杂且令人困惑的框架，所以如果有人可以帮助我提供一些建议或（理想情况下）只需几行这里的示例代码我真的很感激。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:51:19.940

好的。经过几天的挖掘和实验，我终于找到了自己问题的答案。要获得我使用的（下一个）字幕图像：

```
// access the subtitle track
Track theTrack = [self getVideoSubtitleTrack];

// set flags to find NEXT image (ignoring the current one)...
myFlags = nextTimeStep;
// ... and search forward from current position.
GetTrackNextInterestingTime(theTrack, myFlags, playheadPos, fixed1, &nextInterestingTime, NULL); 
```

**不过，这只会找到图像对象的开始，并且遍历轨道会找到每个连续**图像的前沿。但我也想要当前文本的结束时间。

获得开始时间后，我尝试了七个可用标志，发现将标志设置为“nextTimeTrackEdit”可以获得结束时间。

# c# - 使用全局 CloudStorageAccount 变量

> ID：16186832
> 
> 赞同：0
> 
> 时间：2013-04-24T08:14:49.610
> 
> 标签：c#, .net, azure, global-variables

我对 CloudStorageAccount 变量有疑问。我一直在我的代码中经常使用和声明它，我想知道将它声明为全局变量并在每个函数中使用它是否会导致冲突。我将用一个简单的例子来证明我的问题。

```
public class AzureQueueSvc : IQueueSvc
{
    DoclQueue _queue;

    public AzureQueueSvc(DoclQueue queue)
    {
        _queue = queue;
        _queue.Connectionstring = ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
    }

    public CloudQueue GetQueue { get; }

    public void CreateQueue()
    {
        CloudStorageAccount account = CloudStorageAccount.Parse(_queue.Connectionstring);
        CloudQueueClient queueClient = account.CreateCloudQueueClient();
        CloudQueue queue = queueClient.GetQueueReference(_queue.Name);
        queue.CreateIfNotExists();
    }

    public bool QueueExists()
    {
        CloudStorageAccount account = CloudStorageAccount.Parse(_queue.Connectionstring);
        CloudQueueClient queueClient = account.CreateCloudQueueClient();
        CloudQueue queue = queueClient.GetQueueReference(_queue.Name);

        if (queue.Exists())
            return true;
        else
            return false;
    }

    public void SendMessage(DoclMessage message)
    {
        CloudStorageAccount account = CloudStorageAccount.Parse(_queue.Connectionstring);
        CloudQueueClient queueClient = account.CreateCloudQueueClient();
        CloudQueue queue = queueClient.GetQueueReference(_queue.Name);
        queue.CreateIfNotExists();

        CloudQueueMessage msg = new CloudQueueMessage(string.Format(message.ToString()));
        queue.AddMessage(msg);

    }
} 
```

如您所见，我必须声明 CloudStorageAccount、CloudQueueClient 和 CloudQueue 3 次。将它们声明为全局变量并在我的方法中共享它们的用法会导致冲突吗？

# spring - Spring Security中Realm是什么意思

> ID：16186834
> 
> 赞同：20
> 
> 时间：2013-04-24T08:15:06.783
> 
> 标签：spring, http, spring-security

在我的应用程序中，我使用了 Spring Security，我只想知道 HTTP 配置中的“领域”是什么意思。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T09:22:45.807

领域是启用基于身份或角色的访问控制的凭据存储。

[Java 文档](http://docs.oracle.com/javaee/5/tutorial/doc/bnbxj.html#bnbxm)

> **什么是境界？**
> 
> 对于 Web 应用程序，领域是一个完整的用户和组数据库，用于识别 Web 应用程序（或一组 Web 应用程序）的有效用户，并由相同的身份验证策略控制。
> 
> Java EE 服务器身份验证服务可以管理多个领域中的用户。在此版本的 Application Server 中，已为 Application Server 预配置了文件、管理领域和证书领域。
> 
> 在文件领域中，服务器将用户凭据本地存储在名为 keyfile 的文件中。您可以使用管理控制台来管理文件领域中的用户。
> 
> 使用文件领域时，服务器身份验证服务通过检查文件领域来验证用户身份。此领域用于对所有客户端进行身份验证，但使用 HTTPS 协议和证书的 Web 浏览器客户端除外。
> 
> 在证书领域中，服务器将用户凭据存储在证书数据库中。使用证书领域时，服务器使用带有 HTTPS 协议的证书来验证 Web 客户端。为了验证证书领域中用户的身份，身份验证服务会验证 X.509 证书。有关创建此类证书的分步说明，请参阅使用数字证书。X.509 证书的公用名字段用作主体名称。
> 
> admin-realm 也是一个 FileRealm，并将管理员用户凭据本地存储在名为 admin-keyfile 的文件中。您可以使用管理控制台管理此领域中的用户，就像管理文件领域中的用户一样。有关更多信息，请参阅管理应用程序服务器上的用户和组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-24T18:44:25.880

领域是为 Web 或应用程序服务器定义的安全策略域。一个领域包含一组用户，这些用户可能被分配到一个组，也可能不被分配到一个组。

> 领域是为 Web 或应用程序服务器定义的安全策略域。服务器上的受保护资源可以划分为一组保护空间，每个保护空间都有自己的身份验证方案和/或包含用户和组集合的授权数据库。对于 Web 应用程序，领域是一个完整的用户和组数据库，这些用户和组被标识为 Web 应用程序或一组 Web 应用程序的有效用户，并由相同的身份验证策略控制。Java EE 服务器身份验证服务可以管理多个领域中的用户。

[https://docs.oracle.com/cd/E19798-01/821-1841/bnbxk/index.html](https://docs.oracle.com/cd/E19798-01/821-1841/bnbxk/index.html)

# math - 面试：使用random2实现random3函数

> ID：16186837
> 
> 赞同：2
> 
> 时间：2013-04-24T08:15:10.967
> 
> 标签：math, random, statistics

在最近的采访中，我被问到以下问题。有一个函数`random2()`，它以相等的概率（0.5）返回 0 或 1。编写实现`random4()`和`random3()`使用`random2()`. `random4()`像这样很容易实现

```
if(random2())
  return random2();
return random2() + 2; 
```

但我遇到了困难`random3()`。我能代表的唯一认识：

```
uint32_t sum = 0;
for (uint32_t i = 0; i != N; ++i)
  sum += random2();
return sum % 3; 
```

这种实现`random4()`仅基于我的直觉。我不确定它实际上是否正确，因为我无法从数学上证明它的正确性。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:30:33.660

**随机3：**

不确定这是否是最有效的方法，但这是我的看法：

x = 随机2 + 2*随机2

会发生什么：

```
0 + 0 = 0
0 + 2 = 2
1 + 0 = 1
1 + 2 = 3 
```

以上是可能发生的所有可能性，因此每个可能性都相等，所以...

(`p(x=c)`是 x = c 的概率)

```
p(x=0) = 0.25
p(x=1) = 0.25
p(x=2) = 0.25
p(x=3) = 0.25 
```

现在当 x = 3 时，我们只是继续生成另一个数字，因此给 0、1、2 等概率。从技术上讲，您可以将 x=3 的概率重复分配给所有这些，使得 p(x=3) 趋于 0，因此其他的概率将趋于 0.33。

代码：

```
do
  val = random2() + 2*random2();
while (val != 3);
return val; 
```

**随机4：**

让我们运行您的代码：

```
if(random2())
  return random2();
return random2() + 2; 
```

第一次调用有 50% 的机会 1 (true) => 以 50% * 50% 的概率返回 0 或 1，因此每个 25%

第一次调用有 50% 的机会为 0（假）=> 以 50% * 50% 的概率返回 2 或 3，因此每个 25%

因此，您的代码以相等的概率生成 0,1,2,3。

**受 e4e5f4 的回答启发的更新：**

对于比我上面提供的答案更确定的答案...

通过多次调用生成一些大数字，`random2`然后将结果修改为所需的数字。

对于每个人来说，这并不是完全正确的概率，但它会很接近。

因此，对于一个 32 位整数，调用`random2`32 次，target = 3：

Total numbers: 4294967296
Number of x's such that x%3 = 1 or 2: 1431655765
Number of x's such that x%3 = 0: 1431655766
Probability of 1 or 2 (each): 0.33333333325572311878204345703125
Probability of 0: 0.3333333334885537624359130859375

因此，在正确概率的 0.00000002% 以内，似乎非常接近。

代码：

```
sum = 0;
for (int i = 0; i < 32; i++)
  sum = 2*sum + random2();
return sum % N; 
```

**笔记：**

正如 pjr 所指出的，这通常远低于上述拒绝方法的效率。使用拒绝方法获得相同数量的调用`random2`（即 32）（假设这是最慢的操作）的概率是`0.25^(32/2) = 0.0000000002 = 0.00000002%`。再加上这种方法不精确的事实，让我们更倾向于拒绝方法。降低这个数字会减少运行时间，但会增加错误，并且可能需要降低很多（从而达到高错误）才能接近拒绝方法的平均运行时间。

值得注意的是，上述算法有一个*最大*运行时间。拒绝方法没有。如果您的随机数生成器由于某种原因完全损坏，它可能会继续生成被拒绝的数字并使用拒绝方法运行一段时间或永​​远，但上面的 for 循环将运行 32 次，无论发生什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T08:52:46.607

`%`不推荐使用 modulo( )，因为它会引入偏差。只有当是 的力量时，映射才会*很好*。否则，正如其他答案所建议的那样，会涉及某种拒绝。`n``2`

另一种通用方法是通过以下方式模拟内置 PRNG -

*   生成 32`random2()`并将其映射为 32 位整数
*   `(0,1)`通过将其除以最大整数值来获取范围内的随机数
*   只需将此数字乘以`n`（=3,4...73 依此类推）`floor`即可获得所需的输出

# ios - 无法将我的 managedObjectContext 从我的视图连接到我的委托

> ID：16186838
> 
> 赞同：0
> 
> 时间：2013-04-24T08:15:11.690
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我在我的应用程序上使用核心数据，我知道我需要连接我的`managedObjectContext`throw 委托，但我不知道如何......我有一个委托 -

**AppDelegate.h**

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (strong, nonatomic) UINavigationController *nav;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

* * *

**AppDelegate.m:**

```
#import "AppDelegate.h"
#import "mainViewController.h"
#import "addViewController.h"

@implementation AppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;
@synthesize nav;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    //----------------------------------nav-------------------------------------------------
    mainViewController*mainView=[[mainViewController alloc]init];
    nav=[[UINavigationController alloc]initWithRootViewController:mainView];
    mainView.manageObjectContext=self.managedObjectContext;
    [self.window addSubview:nav.view];
    //----------------------------------nav-end---------------------------------------------
    [self.window makeKeyAndVisible];
    return YES;

} 
```

MainVeiw 不是我要保存实体的页面（所以我无法匹配委托本身的对象），这是另一个页面，我认为我的问题是我不知道如何导入委托 id 对象所以我可以与`managedObjectContext`我的委托人进行比较。

**addViewController.h：**

```
 #import <UIKit/UIKit.h>

@interface addViewController : UIViewController  <UIPickerViewAccessibilityDelegate,UIPickerViewDataSource,UITextFieldDelegate>
{
    NSDictionary *allSubjects;
    NSArray* arrSubject;
    NSArray* arrSubSubjects;
    NSManagedObjectContext*manageObjectContext;
}
@property(nonatomic,strong)NSManagedObjectContext*manageObjectContext;
//@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
//@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

@property (strong, nonatomic) NSDictionary *allSubjects;
@property (strong, nonatomic) NSArray* arrSubject;
@property (strong, nonatomic) NSArray* arrSubSubjects;

@property (weak, nonatomic) IBOutlet UIScrollView *scrolladdview;
@property (weak, nonatomic) IBOutlet UIPickerView *pickerSubjects;
@property (weak, nonatomic) IBOutlet UITextField *txtDesc;
@property (weak, nonatomic) IBOutlet UITextField *txtUserName;
@property (weak, nonatomic) IBOutlet UITextField *txtPassword;

-(IBAction)createPassword:(id)sender;

@end 
```

**添加视图控制器.m**

```
#import "addViewController.h"

@interface addViewController ()

@end

@implementation addViewController
@synthesize allSubjects,arrSubject,arrSubSubjects,pickerSubjects;
@synthesize txtDesc,txtPassword,txtUserName,scrolladdview,manageObjectContext;

-(IBAction)createPassword:(id)sender
{
    NSInteger row;
    NSString*subTypeSelectd=[[NSString alloc]init];

    row = [pickerSubjects selectedRowInComponent:0];
    subTypeSelectd = [arrSubSubjects objectAtIndex:row];

    NSInteger row2;
    NSString*TypeSelectd=[[NSString alloc]init];

    row2 = [pickerSubjects selectedRowInComponent:1];
    TypeSelectd = [arrSubSubjects objectAtIndex:row2];

//here is the error: no visible @interface for 'addViewController' declares the selector 'NSManagedObject' 
    NSManagedObject*password=[NSEntityDescription insertNewObjectForEntityForName:@"Password" inManagedObjectContext:[self managedObjectContext]];

    [password setValue:self.txtDesc.text forKey:@"desc"];
    [password setValue:self.txtUserName.text forKey:@"userName"];
    [password setValue:self.txtPassword.text forKey:@"password"];
    [password setValue:subTypeSelectd forKey:@"subType"];
    [password setValue:TypeSelectd forKey:@"type"];

    NSError*error;
    if(![[self manageObjectContext]save:&error])
        NSLog(@"input %@",error);
    else NSLog(@"saved");

    [self.navigationController popViewControllerAnimated:YES];

} 
```

我会喜欢一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:21:51.127

您可以从 AppDelegate 本身获得它：

```
#import "AppDelegate.h"

//...

-(IBAction)createPassword:(id)sender
{
//...
NSManagedObjectContext* context = ((AppDelegate*)[[UIApplication sharedApplication] delegate]). managedObjectContext;
//...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:48:41.517

在我看到的这里，您在 AppDelegate 中创建了一个上下文，在 Addviewcontroller 中创建了一个。由于您只有一个商店和一个线程，因此您应该从 AddviewController 中删除托管对象上下文的属性。还应该通过以下代码从 addViewController 中的委托分配 managedobjectcontext：

{ AppDelegate *delegate = [UIApplication sharedApplication].delegate; NSManagedObjectContext *addViewcontrollerLocalContext = delegate.managedObjectContext; }

通过这样做，所有对象都将保存在您在 AppDelegate 文件中创建的 MainObjectContext 中。

# json - 解析没有标签的Json来绑定赢得8格

> ID：16186839
> 
> 赞同：0
> 
> 时间：2013-04-24T08:15:22.777
> 
> 标签：json, windows-runtime, windows-store-apps

我正在尝试解析这个 json 脚本。

```
{
    "Component1": {
        "Parameter1": "A",
        "Parameter2": "12.00"
    },
    "Component2": {
        "Parameter1": "B",
        "Parameter2": "13.00"
    },
    "Component3": {
        "Parameter1": "C",
        "Parameter2": "14.00"
    },
    "Component4": {
        "Parameter1": "D",
        "Parameter2": "15.00"
    },
    "Component5": {
        "Parameter1": "E",
        "Parameter2": "16.00"
    },
    "Component6": {
        "Parameter1": "F",
        "Parameter2": "17.00"
    },
    "Component7": {
        "Parameter1": "G",
        "Parameter2": "18.00"
    },
    "Component8": {
        "Parameter1": "H",
        "Parameter2": "17.00"
    },
    "Component9": {
        "Parameter1": "I",
        "Parameter2": "17.00"
    },
    "Component10": {
        "Parameter1": "J",
        "Parameter2": "17.00"
    },
    "Component11": {
        "Parameter1": "K",
        "Parameter2": "18.00"
    }
} 
```

现在该组件有 2 个值。关于该片段的奇怪之处在于该组件没有标签，但它的值有一个标签，并且每个组件在 gridview 中由一个图块表示。

我可以使用 switch 解析参数 1 和参数 2，但是如何在没有标签的情况下解析组件名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T00:21:05.713

您可以使用[Web 扩展](http://procbits.com/2011/04/21/quick-json-serializationdeserialization-in-c)和 JavaScriptSerializer 将其转换为类型（字符串，动态）的字典，因此基本上您将获得 KeyValuePair< string,dynamic> 的列表，您可以这样做：

```
foreach(KeyValuePair<string, dynamic> kvp in deserializedDictionary)
{
    kvp.Key //this is your "ComponentX"
    kvp.Value.Parameter1 //this is the value in Parameter1
    kvp.Value.Parameter2 //this is the value in Parameter2
} 
```

然后你可以对他们做任何你想做的事情。

# jquery - 基于 URL 的 jQuery addClass 到菜单项（WordPress 持久网络菜单）

> ID：16186841
> 
> 赞同：1
> 
> 时间：2013-04-24T08:15:23.630
> 
> 标签：jquery, wordpress, menu, addclass

我正在尝试在 WordPress 多站点安装上设置一个持久的网络范围菜单。这是使用[网络范围的菜单插件](http://wpmututorials.com/plugins/networkwide-menu/)实现的，并且效果很好。唯一的问题是样式，因为自动“当前菜单项”类仅在主博客上嵌入到适当的菜单链接中。

因此，我研究了 .addClass() 函数，以根据当前 URL 将类添加到菜单项中，这就是我迄今为止提出的。请记住，我也试图突出显示父项，这就是我还使用 .parentsUntil() 类的原因。

**这是我的网络设置（每个域对应一个 WordPress 实例）：**

```
domain.com  
blog1.domain.com  
blog1.domain.com  
blog1.domain.com 
```

**这是我的 jQuery 代码：**

```
jQuery(function() {
jQuery('#megaUber ul li').removeClass('activeMenu');
var href = window.location.href;
if (href.indexOf('http://domain.com) != -1) {
    jQuery('#megaUber a').parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu');
} else if (href.indexOf("http://blog1.domain.com") != -1) {
    jQuery('#megaUber li a[href="'+href+'"]').parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu');
} else if (href.indexOf("http://blog2.domain.com") != -1) {
    jQuery('#megaUber li a[href="'+href+'"]').parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu');
} else if (href.indexOf("http://blog3.domain.com") != -1) {
    jQuery('#megaUber li a[href="'+href+'"]').parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu');
}
}); 
```

**HTML 菜单标记**

```
<div id="megaMenu">
<ul id="megaUber" class="megaMenu" data-theme-location="primary">
 <li id="menu-item-20" class="nav-cgroupe menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor mega-with-sub ss-nav-menu-item-1 ss-nav-menu-item-depth-0 ss-nav-menu-mega ss-nav-menu-mega-alignCenter ss-nav-menu-with-desc">
  <a href="http://domain.com">domain.com</a>
   <ul class="sub-menu sub-menu-1" style="display: none;">
    <li id="menu-item-25" class="menu-item menu-item-type-post_type menu-item-object-page ss-nav-menu-item-depth-1">
     <a href="http://domain.com/link1">Link1</a>
    </li>
    <li id="menu-item-24" class="menu-item menu-item-type-post_type menu-item-object-page ss-nav-menu-item-depth-1">
     <a href="http://domain.com/link2">Link2</a>
    </li>
    <li id="menu-item-23" class="menu-item menu-item-type-post_type menu-item-object-page ss-nav-menu-item-depth-1">
     <a href="http://domain.com/link3">Link3</a>
    </li>
   </ul>
  </li>
  <li id="menu-item-26" class="nav-cconseil menu-item menu-item-type-custom menu-item-object-custom mega-with-sub ss-nav-menu-item-2 ss-nav-menu-item-depth-0 ss-nav-menu-mega ss-nav-menu-mega-alignCenter ss-nav-menu-with-desc">
   <a href="http://blog1.domain.com">blog1.domain.com</a>
    <ul class="sub-menu sub-menu-1" style="display: none;">
     <li id="menu-item-53" class="menu-item menu-item-type-custom menu-item-object-custom ss-nav-menu-item-depth-1">
      <a href="http://blog1.domain.com/link1">Link1</a>
     </li>
     <li id="menu-item-54" class="menu-item menu-item-type-custom menu-item-object-custom ss-nav-menu-item-depth-1">
      <a href="http://blog1.domain.com/link2">Link2</a>
     </li>
     <li id="menu-item-55" class="menu-item menu-item-type-custom menu-item-object-custom ss-nav-menu-item-depth-1">
      <a href="http://blog1.domain.com/link3">Link3</a>
     </li>
    </ul>
   </li>
  </ul>
</div> 
```

我已经扭曲了很多不同的方式，但无法做到正确......有人知道如何实现这一目标吗？

谢谢你，C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:18:05.897

尝试这个：

```
$('#megaUber li a').filter(function () {
    return this.href && this.href == location.href;
}).parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu'); 
```

第二行通过两个标准过滤元素集：

1.  它们必须具有带域名 (this.hostname) 的 href 属性。

2.  他们链接到的域名（同样，this.hostname）必须匹配（==）当前页面的域名（location.hostname）。

**更新**

```
$('#megaUber > li > a').filter(function () {
    return this.href && this.href == location.href.slice(0, -1);
}).parentsUntil('.ss-nav-menu-item-depth-0').addClass('activeMenu'); 
```

# emacs - Inline code in org-mode

> ID：16186843
> 
> 赞同：124
> 
> 时间：2013-04-24T08:15:25.370
> 
> 标签：emacs, markdown, org-mode

Markdown allows for `embedded code`. How can this be done in `org-mode`?

I know about source-code blocks:

```
#+begin_example
blah-blah
#+end_example 
```

But what I want is something like this (obviously, with the right syntax, which I do not know):

```
This is `embeded code`. 
```

Can this be done in `org-mode`? Not possible to find that in the documentation ...

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-04-24T08:49:42.897

You can enclose the text within `=` or `~` signs to have it typeset in monospaced font and export it verbatim (which means it is not processed for org-specific syntax):

```
This is =verbatim text= or ~code~. 
```

You'll find all information about org-mode markup elements in the relevant section of the [manual](http://orgmode.org/org.html#Emphasis-and-monospace).

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2013-04-24T13:38:20.210

While monospaced is good enough for most cases, inline code blocks have the form `src_LANG[headers]{your code}`. For example, `src_xml[:exports code]{<tag>text</tag>}`.

**Edit:** Code highlighting of inline code is certainly possible, albeit with patching org.el itself: The answer given here [https://stackoverflow.com/a/20652913/594138](https://stackoverflow.com/a/20652913/594138) works as advertised, turning

```
- Inline code src_sh[:exports code]{echo -e "test"} 
```

Into

[![enter image description here](https://i.stack.imgur.com/WEEyW.png)](https://i.stack.imgur.com/WEEyW.png)

in html-export. And the winning answer in this post, [https://stackoverflow.com/a/28059832/594138](https://stackoverflow.com/a/28059832/594138), achieves the same without the need to patch org.el, but you will have to adapt it if you don't like the optics during editing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-21T20:52:33.963

I wrote a function which I hope will be useful to help manage the code inline.

1.  You put this code in your init file

```
(defun org-insert-inline-code()
  "This function insert inline code `src_lang{inline code}' \nYour buffer must contain  '#+PROPERTY: header-args:lang    :exports code' where `lang` can be python or an other programming language."
  (interactive  (if (use-region-p)
            (progn
              (setq start (region-beginning))
              (setq end (region-end))
              (goto-char start)
                      (if (re-search-backward "^#\\+PROPERTY: header-args:[^[:blank:]]*" 1 t 1)
                          (progn
                            (forward-char 24)
                            (setq org-inline-lang (word-at-point))
                    (goto-char start)
                    (insert (concat "src_" org-inline-lang "{"))
                    (goto-char (+ 11 end))
                    (insert "}")                            
                            )))
          (progn
                    (setq start (point))
                    (if (re-search-backward "^#\\+PROPERTY: header-args:[^[:blank:]]*" 1 t 1)
                        (progn
                          (forward-char 24)
                          (setq org-inline-lang (word-at-point))
                  (goto-char start)
                  (insert (concat "src_" org-inline-lang "{} "))
                  (backward-char 2)
                            ))))))

(define-key org-mode-map (kbd "C-M-,") 'org-insert-inline-code) 
```

2.  You put this kind of PROPERTY in the org-file

```
#+PROPERTY: header-args:python    :exports code 
```

The required [:exports code] is given that way and the programming language can be identify by the function too.

3.  Insert the code in line with `C-M-,` (the function then search back to read the language in the PROPERTY line and insert the correct command).

# php - 不带变量发送的 PHP 邮件

> ID：16186844
> 
> 赞同：0
> 
> 时间：2013-04-24T08:15:30.583
> 
> 标签：php, email, variables

我正在设置支付页面，我是设计师而不是开发人员。所以我一直遇到一些问题。付款后，它会经过几个阶段并生成响应。在返回的 response.php 文件中，我有机会注入一些代码以向客户发送电子邮件，通知他已收到付款。

邮件确实已发送到客户端，但缺少变量。我收到文本信息。任何可以提供帮助的人将不胜感激。

```
$name = $_POST['name'];
$email = $_POST['email'];
$client = $_POST['CUST_NUM'];
$amount = $_POST['AMOUNT'];

$email_from = 'payments@rcehholidaytrust.com';//<== update the email address
$email_subject = "RCEH Website Payment Activity";
$email_body = "You have received a payment from a client $name.\n".
"Account Number:\n $client".
$to = "patrick@patrickmchugh.com";//<== update the email address
$headers = "From: $email_from \r\n";
$headers .= "Reply-To: $email \r\n";
//Send the email!
mail($to,$email_subject,$email_body,$headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:07:31.310

**我根据您的描述更改了答案**

因此，如果您没有检索 $_POST 变量，那么问题不在于 PHP 代码，而在于您的 HTML 表单页面*：

```
$name = $_POST['name'];       
$email = $_POST['email'];
$client = $_POST['CUST_NUM'];
$amount = $_POST['AMOUNT']; 
```

您能否检查您的表单字段是否包含与 $_POST 中的上述列表相同的名称。例如：

$_POST['name'] 将从具有 name='name' 的文本框/字段中获取它的值：

```
<input type="textbox" name="name"> 
```

$_POST['CUST_NUM'] 将从具有 name='CUST_NUM' 的文本框/字段中获取它的值：

```
<input type="textbox" name="CUST_NUM"> 
```

**现在，如果您仍然无法获取这些变量：**

这可能是因为您没有在正确的 url 中传递它

如果您的 php 代码 your_php_code.php nd 您的 html 位于同一目录中：

```
<form method="POST" action="your_php_code.php">
... your other codes here ...
</form> 
```

# javascript - 评估对 img 加载事件的 html 评论

> ID：16186846
> 
> 赞同：1
> 
> 时间：2013-04-24T08:15:32.300
> 
> 标签：javascript

有没有人有想法，为什么别人会写类似下面这样的html代码：

```
<html>
  <body>
    <span id="onloadscript"><!-- function bla(){/*stripped*/}()--><span>moep</span></span>
    <img src="1x1.gif" onload="eval(document.getElementById('onloadscript').childNodes[0].nodeValue)">
  </body>
<html> 
```

我不知道它做了什么，唯一的问题是，为什么有人应该这样做。更快的页面加载？浏览器工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T13:24:10.270

当然你可以有这样的：`onloadscript`元素内的脚本将在图像加载**后** `1x1.gif`加载。

我认为这是一种“完整加载脚本”的解决方法。也许伪装在元素内的评论上。

您可以使用 jQuery ready 安全轻松地替换此解决方法：

> $(文档).ready(bla);

# python - 获取已保存网页的原始 URL

> ID：16186847
> 
> 赞同：0
> 
> 时间：2013-04-24T08:15:33.363
> 
> 标签：python, url, python-3.x, web-scraping, lxml

我正在使用 Python 和 lxml 库来解析保存的网页。

已保存网页的 docinfo 显示已保存网页的磁盘位置。

```
storedHtmlDoc.docinfo.URL 
```

有没有办法从保存的页面中提取原始 URl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:20:28.507

如果您自己没有将下载页面的 URL 存储在某个地方，那么您将无法使用它。

如果您可以控制下载过程，您可以将下载页面的 URL 放在页面的 META 标记中。

# html - 如何创建圆形图像包装

> ID：16186852
> 
> 赞同：0
> 
> 时间：2013-04-24T08:15:39.810
> 
> 标签：html, css

如下图，如何用css创建，如果用户将图像保存到他/她的机器上，图像应该是正方形的，并且与原始图片一样宽和高。

![在此处输入图像描述](https://i.stack.imgur.com/rJlRl.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:26:47.643

您可以通过设置图像容器的边框半径并应用隐藏的溢出值来实现此效果。一个例子在这里 - [http://jsfiddle.net/8jbD5/1](http://jsfiddle.net/8jbD5/1)

您的 html 将类似于：

```
<div id="imgCont">
    <img src="theimage.jpg" />
</div> 
```

和CSS：

```
#imgCont{border:8px solid #f00;border-radius:50%;overflow:hidden;width:200px;height:200px}
#imgCont img{width:100%;height:100%;} 
```

我希望这有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:37:06.410

请参阅此示例：[http](http://dabblet.com/gist/5450624) ://dabblet.com/gist/5450624 （在 Firefox 20/Chrome 上测试）。
我使用了 400x400 jpg 图像，并调整了它的上/左偏移。

相关的 CSS

```
div {
  position: relative;
  width: 0;
  height: 0;
  border: 180px silver solid;
  -webkit-border-radius: 180px;
  -moz-border-radius: 180px;
  border-radius: 180px;
}

figure {
    position: absolute;
    top: -120px;
    left: -180px;
    width: 200px;
    height: 200px;
    border: 10px red solid;
    overflow: hidden;
    -webkit-border-radius: 120px;
    -moz-border-radius: 120px;
    border-radius: 120px;
}

img {
   position: absolute;
   z-index: 1;
   left: -100px;
   top: -100px;
} 
```

标记

```
<div>
  <figure>
    <img src="...">
  </figure>
</div> 
```

* * *

样本输出

![输出](https://i.stack.imgur.com/bpxLi.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:28:28.393

你有几个选择。

首先，你可以有一个元素（比如一个 div），它的背景图像作为你的原始图像。然后在那个 div 里面，你有一个内圈内部有部分透明度的图像，这样原始图像就会从下面显示出来。

其次，您可以执行与上述类似的操作，但您可以使用 CSS 和 HTML 的混合创建圆圈，而不是使用透明图像。这里有一些不错的[演示](http://davidwalsh.name/demo/css-circles.php)。

第三，可能是最老套的方法，就是将所有内容都放入一个图像中（就像您的问题一样），并用于`.htaccess`在直接访问时提供不同的文件。但是，您可能不会得到非常可靠的结果。这是一个[很好的答案](https://stackoverflow.com/a/10556237/601299)，可以解释。

# django - Testing Django email backend

> ID：16186866
> 
> 赞同：12
> 
> 时间：2013-04-24T08:16:40.030
> 
> 标签：django, unit-testing, testing, django-mailer

In my settings.py, I put:

```
EMAIL_BACKEND = 'mailer.backend.DbBackend' 
```

So even when importing from `from django.core.mail import send_mail`, the `send_mail` function still queues up the email in the database instead of sending it immediately.

It works just fine when actually running the website, but when testing the website, and accessing some webpages that trigger emails, emails are no longer queued anymore:

```
def test_something(self):
    ...
    # Check no emails are actually sent yet
    self.assertEquals(len(mail.outbox), 0) # test fails here -- 2 != 0

    # Check queued emails.
    messages = Message.objects.all()
    self.assertEquals(messages.count(), 2) # test would also fail here -- 0 != 2
    ... 
```

How come it doesn't seem to be using the backend when it is testing? (importing `send_mail` from `mailer` itself gets the tests to pass, but I can't really change the imports of other mailing apps like `django-templated-email`)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-26T12:15:59.563

According to this [question](https://stackoverflow.com/questions/13848938/django-test-framework-with-file-based-email-backend-server) django overrides the `setting.EMAIL_BACKEND` when testing to `'django.core.mail.backends.locmem.EmailBackend'`. It's also in the django docs [here](https://docs.djangoproject.com/en/dev/topics/testing/tools/#email-services).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-25T15:28:21.110

To properly test email with django-mailer, you need to override two settings:

1.  Make the tests to use the django-mailer backend
2.  Make the djano-mailer backend to use the test backend

If you don't set the django-mailer backend (number 2), your tests will try to send the email for real.

You also need to simulate running django-mailer's send_mail management command so that you can check mail.outbox for the correct email.

Here's an example of how to setup a test method:

```
from mailer.engine import send_all

@override_settings(EMAIL_BACKEND='mailer.backend.DbBackend')
@override_settings(MAILER_EMAIL_BACKEND='django.core.mail.backends.locmem.EmailBackend')
def test_email(self):
    # Code that generates email goes here.

    send_all()  # Simulates running django-mailer's send_mail management command.

    # Code to check the email in mail.outbox goes here. 
```

This strategy makes your tests specific to django-mailer which you don't always want or need. I personally only use this setup when I'm testing specific functionality enabled by django-mailer. Otherwise, I use the default test email backend setup by django.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-18T21:43:40.980

If you really want have sending of emails (like default) via SMTP in django tests use the decorator:

```
from django.test.utils import override_settings    

@override_settings(EMAIL_BACKEND='django.core.mail.backends.smtp.EmailBackend')
class TestEmailVerification(TestCase):
   ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-18T11:20:24.060

Try the following:

```
django.core.mail.backends.console.EmailBackend 
```

# php - 如何在url中获取变量

> ID：16186869
> 
> 赞同：0
> 
> 时间：2013-04-24T08:16:56.277
> 
> 标签：php, query-string

我在将变量从一个 PHP 页面获取到另一个 PHP 页面时遇到问题。问题是我无法获取变量。我使用此代码移动到另一个页面：

```
$updateGoTo = "closeticketscs.php";
if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
} 
```

我尝试了下面的代码来获取变量：

```
$updateGoTo = "closeticketscs.php?id=echo $row_searchreslt['ID'];";
if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
} 
```

但是，这不起作用。任何帮助将不胜感激。这是正确的代码：

```
$updateGoTo = "closeticketscs.php?id=".$_POST['ID_Pelanggan'];
  if (isset($_SERVER['QUERY_STRING'])) 
  {
    $updateGoTo .= ((strpos($updateGoTo, '?') > -1) ? "&" : "?" ).
    $_SERVER['QUERY_STRING'];
  } 
```

header(sprintf("位置: %s", $updateGoTo));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:20:50.993

你试过 $_GET 吗？

```
if (isset($_GET['id']) {
    $id = $_GET['id']
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:19:45.990

```
if (isset($_SERVER['QUERY_STRING'])) {
   $updateGoTo .= ( (strpos($updateGoTo, '?') > -1) ? "&" : "?" ) . $_SERVER['QUERY_STRING'];
} 
```

如果你想用 strpos 检查问号，你必须使用 > -1 :) 你可以 .= 在 1 行中，无需在 2 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:21:41.950

//如果你的链接是closeticketscs.php?id=12345

```
if (isset($_REQUEST['id']){
   $id= $_REQUEST['id'];
   echo $id;
} 
```

[在 $_REQUEST、$_GET 和 $_POST 中，哪一个最快？](https://stackoverflow.com/questions/1924939/php-request-vs-get-and-post)这更多是关于请求获取和发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:29:27.343

在你的第二个代码中，我认为你有一个错误。当您将一个变量声明为另一个变量时，您不需要回显一个 php 变量文件。

改变

```
 $updateGoTo = "closeticketscs.php?id=echo $row_searchreslt['ID'];"; 
```

至

```
 $updateGoTo = "closeticketscs.php?id=".$row_searchreslt['ID']; 
```

如果你想从一个页面获取一个变量到另一个页面，只需使用 $_GET。例子，

在 index.php 中

```
 <?php
 $updateGoTo = "closeticketscs.php?id=".$row_searchreslt['ID'];
 echo '<a href="'.$updateGoTo.'">Go Here</a>';
 ?> 
```

在 closeticketscs.php 中

```
 <?php
 $new_variable = $_GET['id'];
 //now you get the variable 'id' from the url closeticketscs.php?id=value
 ?> 
```

如果使用表格：

```
 <form method="get" action="closeticketscs.php">
 <input type="text" name="id" value="123" >
 <input type="submit" value="Click Here" name="click">
 </form> 
```

# python - 烧瓶相当于 Sinatra 的“传球”

> ID：16186878
> 
> 赞同：4
> 
> 时间：2013-04-24T08:17:53.077
> 
> 标签：python, sinatra, flask

在我的 Flask 应用程序中，我想公开一个这样的 URI：

`http://<base_uri>/some_string`

我希望根据是否`some_string`是整数来不同地处理对它的请求。

使用 Sinatra，我可以通过“[传递](http://www.sinatrarb.com/intro.html#Passing)”来实现，如下所示：

```
get '/:some_string' do
  if is_integer(:some_string)
    'Your URI contains an integer'
  else 
    pass # This will pass the request on the the method below which can handle it
end

get '/*' do
  'Your URI contains some string'
end 
```

如果不是整数，第一个路由中的调用`pass`让第二个路由处理请求。`:some_string`

我在 Flask 中找不到任何等效的功能。有人可以在 Flask 中提出解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:38:59.533

[url 路由中的类型​​转换](http://flask.pocoo.org/docs/api/#url-route-registrations)可以为您执行此操作：

```
from flask import Flask
import unittest

app = Flask(__name__)
app.debug = True

@app.route('/<int:thing>')
def num(thing):
    return 'INT'

@app.route('/<thing>')
def string(thing):
    return 'STR'

class TestDispatch(unittest.TestCase):

    def setUp(self):
        self.client = app.test_client()

    def test_int(self):
        resp = self.client.get('/10')
        self.assertEqual("INT", resp.data)

    def test_str(self):
        resp = self.client.get('/hello')
        self.assertEqual("STR", resp.data)

if __name__ == '__main__':
    unittest.main() 
```

# mysql - 数据库连接 Yii 框架

> ID：16186879
> 
> 赞同：0
> 
> 时间：2013-04-24T08:17:56.740
> 
> 标签：mysql, yii

我有一个新的域和主机，但我无法连接到新的数据库。

我尝试了什么：

```
'db'=>array(
    'connectionString' => 'mysql:host=ascodcurro.com.mysql;dbname=ascodcurro_com',
    'emulatePrepare' => true,
    'username' => 'ascodcurro_com',
    'password' => 'xxxx',
    'charset' => 'utf8',
    ), 
```

如果我像往常一样尝试 localhost 它工作正常。来自主机的用户信息：

```
MySQL   
server: ascodcurro.com.mysql
DB: ascodcurro_com
user:   ascodcurro_com
pw: *****

PhpMyAdmin  
PhpMyAdmin: https://dbadmin.one.com/
user:   ascodcurro_com
pw: ****** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:24:26.320

在最初的启动和使用 Yii 的过程中，我遇到的第一个问题是连接到数据库。

我遇到了一个非常奇怪的错误，我无法在我的 XAMPP 堆栈上连接到我的 Mac OSX Mountain Lion 上的数据库。经过无数次的搜索，我终于想出了一个有效的方法。这是我能够连接到我的 Yii 数据库的唯一方法。

1.  首先通过取消注释 main.php 文件中的“db”配置来检查您是否可以使用默认配置正常连接到数据库。例子 ：

    ```
    'db'=>array(

                'connectionString' => 'mysql:host=localhost;dbname=ascodcurro_com',
                'emulatePrepare' => true,
                'username' => 'username',
                'password' => 'pass',
                'charset' => 'utf8',
                'tablePrefix'=>'',
                'enableProfiling'=>true,
                'enableParamLogging'=>true,

            ), 
    ```

但是，如果即使在此之后您仍然无法连接到数据库，因为我无法连接到我的，请尝试采用这种方法：创建一个新的 php 文件并键入：

```
<?php phpinfo() ?> 
```

检查该页面，找出“ *mysql* ”的位置并找出其中的“ **MYSQL_SOCKET** ”并记下位置。

记下位置后，试试这个作为你的“db”连接字符串（例如，对我来说，位置是“ */Applications/XAMPP/xamppfiles/var/mysql/mysql.sock* ”）：

```
 'connectionString' => 'mysql:unix_socket=/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock;dbname=practice', 
```

其余的作为您使用的基本参数。然后再次尝试连接。

希望这应该将您连接到您的数据库。

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:27:01.603

```
'db'=>array(

            'connectionString' => 'mysql:host=localhost;dbname=basename',
            'emulatePrepare' => true,
            'username' => 'username',
            'password' => 'pass',
            'charset' => 'utf8',
            'tablePrefix'=>'',
            'enableProfiling'=>true,
            'enableParamLogging'=>true,

        ), 
```

它是我的配置。你有什么错误吗？

# windows - 如何使用 JpegTran 递归处理所有图像，覆盖它们，在使用 Windows 的目录中？

> ID：16186885
> 
> 赞同：3
> 
> 时间：2013-04-24T08:18:28.063
> 
> 标签：windows, image-processing, command-line, batch-file

现在我有以下用于处理图像的批处理文件：

```
@echo none 
cd %1 
md "%~1\ProcessedJPEGS"
for %%i in (*.jpg) do "C:\Program Files\Image Optimization\jpegtran.exe" -optimize -progressive -copy none "%%i" "%~1\ProcessedJPEGS\%%i" 
move /Y "%~1\ProcessedJPEGS\*.*" "%~1" 
rd "%~1\ProcessedJPEGS" 
pause 
```

正如你所看到的，这并不理想，但我的技能充其量是可笑的，所以我需要一些帮助:)

我想要完成的是在一个目录中运行这个批处理并递归处理所有图像并覆盖它们。

提前致谢， 方舟

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T11:00:47.630

根据您的命令行，这应该处理当前文件夹及以下文件夹中的所有 JPG 文件。在一组示例文件/文件夹上对其进行测试，以确保它适合您。

```
@echo none 
for /f "delims=" %%a in ('dir "*.jpg" /b /s /a-d') do (
echo processing "%%a"
"C:\Program Files\Image Optimization\jpegtran.exe" -optimize -progressive -copy none "%%a" "%%a.tmp"
move /Y "%%a.tmp" "%%a" >nul
)
pause 
```

# ruby-on-rails - 在 RSpec 中检查 URL 方向的规范方法是什么？

> ID：16186886
> 
> 赞同：0
> 
> 时间：2013-04-24T08:18:40.627
> 
> 标签：ruby-on-rails, rspec, routing

我在我的 Ruby on Rails 开发中做 TDD。我的代码如下所示：

```
require "spec_helper"

describe "Schedule routing" do

  it "by default should redirect /schedule to 'schedule/dateview'" do
    visit("/schedule")
    current_path.should == "/schedule/dateview"                                                                                      
  end

end 
```

这是检查路由的更简洁的方法吗？

编辑：添加我的 routes.rb 以获得更多上下文：

```
 get "schedule/dateview", to: "events#dateview"
 get "schedule/courseview", to: "events#courseview"
 match "/schedule" => redirect("/schedule/dateview"), via: :get 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:17:07.497

如果你在一个控制器规范中，这样的东西应该可以工作

```
it "by default should redirect /schedule to schedule/dateview'" do
  visit schedule_path
  response.should redirect_to schedule_dateview_path
end 
```

# javascript - AngularJS：创建映射到 REST 资源的对象（ORM 样式）

> ID：16186887
> 
> 赞同：64
> 
> 时间：2013-04-24T08:18:41.220
> 
> 标签：javascript, web-applications, orm, angularjs

我对 AngularJS 很陌生，但我不清楚如何将它与我的服务器的 REST Api 后端绑定。

例如，假设我有一个通过 GET-ing 获得的“图像”资源：myApi/image/1/。这将返回一个带有各种字段的 json 对象。让我们这样说：

```
{url: "some/url", date_created: 1235845} 
```

现在，我想在我的 AngularJS 应用程序中对这个“图像”对象进行某种表示。这种表示不仅仅是字段的映射 - 我想添加“帮助”函数，例如将`date_create`字段转换为人类可读内容的函数。

我知道 $resource 服务，但我不清楚我需要做什么才能在 Angular 中创建一个基本的“类”，它使用 Resource 来获取 JSON 对象，然后通过添加各种帮助函数来增强它。

**奖励积分：**

我也不清楚如何在模型之间添加“关系”。例如，我可能有一个“用户”资源，其中嵌入了一个“图像”资源，我想要获取用户资源，但能够在“图像”部分调用“图像”辅助函数该模型。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-28T14:20:06.580

**JSData**
一个以 angular-data 开始的项目现在是“一个与框架无关的数据存储，为易于使用和安心而构建。” 它具有出色的文档，并支持关系、多个后端（http、localStorage、firebase）、验证，当然还有角度集成。
[http://www.js-data.io/](http://www.js-data.io/)

**BreezeJS** [AngularJS YouTube 频道](http://www.youtube.com/user/angularjs)[使用](http://www.youtube.com/watch?v=P2ErSQj3SN8)BreezeJS[播放](http://breezejs.com/)
此视频

这是一个高级 ORM，它甚至支持客户端过滤和其他很酷的东西。它最适合支持[OData](http://www.odata.org/)的后端，但也可以用于其他类型的后端。

**ngResource**
另一种选择是使用[ngResource](https://docs.angularjs.org/api/ngResource)，这是一个关于如何使用您自己的函数扩展它的示例：

```
module.factory('Task', function ($resource) {
    var Task = $resource(WEBROOT + 'api/tasks/:id', {id: '@id'}, {update: { method: 'PUT'}});
    angular.extend(Task.prototype, {

        anExampleMethod: function () {
            return 4;
        },

        /**
         * Backbone-style save() that inserts or updated the record based on the presence of an id.
         */
        save: function (values) {
            if (values) {
                angular.extend(this, values);
            }
            if (this.id) {
                return this.$update();
            }
            return this.$save();
        }
    });
    return Task;
}); 
```

我发现 ngResource 非常有限，即使与具有以下功能的**Backbone.Model**相比也是如此：

*   通过 Model.parse 自定义 JSON 解析
*   可以扩展 BaseModel（ngResource 中没有 baseUrl）
*   其他钩子，例如启用 LocalStorage 的 Backbone.sync 等。

**Restangular**
“AngularJS 服务可以正确轻松地处理 Rest API Restful 资源”
[https://github.com/mgonto/restangular](https://github.com/mgonto/restangular)

**或者尝试一些其他 ORM 的**
[https://stackoverflow.com/questions/6786307/which-javascript-orm-to-use](https://stackoverflow.com/questions/6786307/which-javascript-orm-to-use)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-09T22:57:43.140

我是 Restangular 的创建者，所以我的意见可能有偏见。

但正如 Bob 所说，您可以使用 Restangular。

Restangular 使用你的 Restful API 资源来遍历树。您还可以为此添加新方法。

这是编码示例：[https ://github.com/mgonto/restangular#lets-code](https://github.com/mgonto/restangular#lets-code)

通过这种方式，您可以向对象添加新方法（奖励积分:)）[https://github.com/mgonto/restangular#creating-new-restangular-methods](https://github.com/mgonto/restangular#creating-new-restangular-methods)

希望这对你有用:)。

否则，您也可以为此使用 ngResource ($resource)，但在我看来，它需要一些“爱”和“糖”。

最好的

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-24T08:49:29.837

对于简单的交互，您可以使用 Angular-Resource ( [http://docs.angularjs.org/api/ngResource](http://docs.angularjs.org/api/ngResource) .$resource)，这对于简单的 REST 交互非常方便（要下载它，请访问[http://code.angularjs. org/1.0.6/](http://code.angularjs.org/1.0.6/) )

遗憾的是，您在使用 Angular 资源时只能获得有限的控制权，对于任何更高级的东西，您需要基于 Angularjs $http 服务创建自己的服务 - [http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$http。

希望有帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-19T14:13:24.570

经过大量研究，以下是所有可用解决方案的完整列表：

*   [休息模式](https://github.com/platanus/angular-restmod)

*   [建模器](https://github.com/VasilioRuzanni/angular-modelizer)

*   [模型核心](https://github.com/klederson/ModelCore/)

*   [角度观察资源](https://github.com/marmorkuchen-net/angular-watch-resource)

*   [角度宁静的](http://esdrasedu.github.io/angular-restful/#/)

*   [资源](https://docs.angularjs.org/api/ngResource/service/$resource)

*   [angularjs-rails-资源](https://github.com/FineLinePrototyping/angularjs-rails-resource)

*   [角度嵌套资源](https://github.com/roypeled/angular-nested-resource)

*   [Aar.js](http://aarjs.com/)

*   [角活动记录](https://github.com/bfanger/angular-activerecord)

*   [角度数据](http://angular-data.pseudobry.com/)

*   [ngActiveResource](https://github.com/FacultyCreative/ngActiveResource)

*   [斜角](https://github.com/mgonto/restangular)

*   [微风JS](http://www.breezejs.com/)

*   [ng-骨干网](https://github.com/adrianlee44/ng-backbone)

但老实说我不是很高兴，所以我决定将我自己的解决方案添加到列表中哈哈。在这里查看：[$modelFactory](https://github.com/phxdatasec/modelFactory)。

您的最终结果代码最终看起来像：

```
var module = angular.module('services.zoo', ['modelFactory']);

module.factory('AnimalModel', function($modelFactory){
  return $modelFactory('api/zoo');
});

return module; 
```

我相信这是一个比其他解决方案更好的解决方案，因为主要是模型定义与 Angular 的非常相似`ngResource`，只添加了它所缺乏的低级功能。它的超轻量级（1.45k gzip/min）并且只有几个小的依赖项（没有 lodash、jquery 等）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-21T14:31:15.760

ModelCore ( [https://github.com/klederson/ModelCore](https://github.com/klederson/ModelCore) ) 的工作方式与此类似，并且非常容易实现：

```
var ExampleApp = angular.module('ExampleApp', ['ModelCore']); //injecting ModelCore

ExampleApp.factory("Users",function(ModelCore) {
  return ModelCore.instance({
    $type : "Users", //Define the Object type
    $pkField : "idUser", //Define the Object primary key
    $settings : {
      urls : {
        base : "http://myapi.com/users/:idUser",
      }
    },
    $myCustomMethod : function(info) { //yes you can create and apply your own custom methods
        console.log(info);
    }
  });
});

//Controller
function MainCrtl($scope, Users) {
  //Setup a model to example a $find() call
  $scope.AllUsers = new Users();

  //Get All Users from the API
  $scope.AllUsers.$find();

  //Setup a model to example a $get(id) call
  $scope.OneUser = new Users();

  //Hey look there are promisses =)
  //Get the user with idUser 1 - look at $pkField
  $scope.OneUser.$get(1).success(function() {
    console.log("Done!",$scope.OneUser.$fetch());
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-11T17:48:33.213

[Angular Rest-Mod](https://github.com/platanus/angular-restmod)是基于 Angular 的模型/ORM 的另一个不错的选择。

Restmod 创建对象，您可以在 Angular 中使用这些对象与您的 RESTful API 进行交互。它还支持集合、关系、生命周期挂钩、属性重命名等等。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-26T19:26:04.370

另一个 ngResource 助手的例子。这依赖于绝大多数服务都是这样的事实：

```
http://host/api/posts
http://host/api/posts/123
http://host/api/posts/123/comments
http://host/api/posts/123/comments/456 
```

因此，任务是创建一个帮助器来创建映射到此类服务的 AngularJS 资源对象。这里是：

```
'use strict';

var api = angular.module('api', ['ngResource']);

// RESTful API helper
api.addService = function (serviceNameComponents) {
    var serviceName = "";
    var resource = "/api"; // Root for REST services
    var params = {};

    serviceNameComponents.forEach(function (serviceNameComponent) {
        serviceName += serviceNameComponent;

        var lowerCaseServiceNameComponent = serviceNameComponent.toLowerCase();
        var collection = lowerCaseServiceNameComponent + 's';
        var id = lowerCaseServiceNameComponent + 'Id';

        resource += "/" + collection + "/:" + id;
        params[id] = '@' + id;
    });

    this.factory(serviceName, ['$resource',
        function ($resource) {
            return $resource(resource, {}, {
                    query: {
                        method: 'GET',
                        params: params,
                        isArray: true
                    },
                    save: {
                        method: 'POST',
                    },
                    update: {
                        method: 'PUT',
                        params: params,
                    },
                    remove: {
                        method: 'DELETE',
                        params: params,
                    }
                }
            );
        }
    ]);
} 
```

所以，要使用它，只需调用这个助手

```
api.addService(["Post"]);
api.addService(["Post", "Comment"]); 
```

然后您可以在代码中使用 Post 和 PostComment 以及所需的参数，例如 :post_id

# javascript - 将网址/链接粘贴到文本框时预览小图片

> ID：16186894
> 
> 赞同：2
> 
> 时间：2013-04-24T08:19:02.487
> 
> 标签：javascript, jquery, asp.net, url, hyperlink

我想让一些人像 facebook 一样思考，当人们将链接粘贴到文本框时，在文本框下会显示一个小图像，显示视频的外观。他们是如何做到的呢？是否有任何 jquery 插件或任何东西？我找不到任何相关的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:23:43.680

你可以试试`jQuery Preview`

jQuery Preview 是一个插件，它允许用户在提交 URL 以供应用程序保存之前预览它们。Facebook、Google+ 和 Yammer 都是具有此功能的工具示例。

这是[**演示**](http://embedly.github.io/jquery-preview/demo/)页面。

这里解释了从基本设置、工作原理到选项、事件的所有内容。

# cisco - 关于 JTAPI 的 Cisco Mobility

> ID：16186899
> 
> 赞同：3
> 
> 时间：2013-04-24T08:19:18.243
> 
> 标签：cisco, jtapi, cisco-jtapi, cisco-axl

我正在使用 Cisco JTAPI API 开发应用程序。但我面临的一个问题是当用户在他的 VoIP 电话上启用移动性时。然后我无法通过 JTAPI API 控制移动呼叫（转移到用户手机的呼叫），因为它没有被跟踪。

有人知道我如何控制通话吗？基本上我只是想挂断移动电话，以便让电话返回终端，以便我可以控制它。

万分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T16:57:02.183

一旦呼叫转到移动电话或任何 pstn 网关，Cisco JTAPI 就无法控制它。JTAPI 仅对已注册的设备进行细粒度控制。我建议从 Cisco 语音网关中查看 Cayuga API，以对流动电话的呼叫进行类似的控制。这些是集成服务路由器 (ISR) 本身的一部分。

# algorithm - 具有无限属性的 C4.5 算法

> ID：16186900
> 
> 赞同：0
> 
> 时间：2013-04-24T08:19:18.413
> 
> 标签：algorithm, machine-learning

VFDT 中 C4.5 的当前实现 ( [http://www.cs.washington.edu/dm/vfml/vfdt.html](http://www.cs.washington.edu/dm/vfml/vfdt.html) ) 或任何其他实现都使用 C4.5 格式的文件来为构建决策树。据此，属性可以具有以下格式：

**连续** 如果属性具有连续值。

**离散** 单词“离散”后跟一个整数，表示属性可以取多少个值。

**标识符列表** 这是一个具有枚举值的离散属性（这是离散属性的首选方法）。标识符应以逗号分隔。

**ignore** 意味着该属性应该被忽略 - 它不会被使用。

有谁知道我们如何指定离散值属性，其完整的可能值集太大而无法列出？

例如“IP-Address”属性可以有 Math.Pow(255,4) 可能的离散值；“QueryString”属性可以有无数个可能的值……等等。

C4.5 算法能否处理属性具有 100,000 个离散不同值的情况，或者不知道确切界限但只知道近似值的情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:02:51.910

通常的选择是枚举训练集中出现的离散特征的所有值。由于该算法永远无法为训练期间未看到的值收集足够的统计信息，因此无论您如何实现它们都会被忽略。

请注意，无论如何收集此类功能的统计数据非常困难，因此您可能需要考虑不同的表示。特别是，多词的文本字符串可以被标记化并被视为词[袋](https://en.wikipedia.org/wiki/Bag-of-words_model)。

# c# - 时间：2019-05-10 标签：c#windows 8 selected comboboxitem

> ID：16186904
> 
> 赞同：0
> 
> 时间：2013-04-24T08:19:34.393
> 
> 标签：c#, windows-8, combobox

我正在开发一个 Windows 8 应用商店应用程序 (c#)。我有一个从存储库中获取项目的组合框（cboTeam1）。

```
private static List<TeamItem> JPLItems = new List<TeamItem>();

public static List<TeamItem> getJPLItems()
    {
        if (JPLItems.Count == 0)
        {
            JPLItems.Add(new TeamItem() { Id = 1, Description = "Anderlecht", Image = "Jpl/Anderlecht.png", ItemType = ItemType.JPL });
            JPLItems.Add(new TeamItem() { Id = 1, Description = "Beerschot", Image = "Jpl/Beerschot.png", ItemType = ItemType.JPL });
            JPLItems.Add(new TeamItem() { Id = 1, Description = "Cercle Brugge", Image = "Jpl/Cercle.png", ItemType = ItemType.JPL });
            JPLItems.Add(new TeamItem() { Id = 1, Description = "Charleroi", Image = "Jpl/Charleroi.png", ItemType = ItemType.JPL });
        }
        return JPLItems;
    } 
```

我在 cboTeam1 的 ItemsSource 中加载项目：

```
cboTeam1.ItemsSource = ItemRepository.getJPLItems(); 
```

当 cboTeam1 selectionchanged 我这样做：

```
 private void cboTeam1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Ploeg1.Text = cboTeam1.SelectedValue.ToString();               
    } 
```

这导致：**SportsBetting.Model.TeamItem**

任何人都可以帮我在我的文本块（Ploeg1.Text）中获取组合框 selectedvalue 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:24:23.350

你几乎已经为自己回答了这个问题。

```
private void cboTeam1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
        // cast the selected item to the correct type.
    var selected = cboTeam.SelectedValue as TeamItem;
        //then access the appropriate property on the object, in this case "Description"
        // note that checking for null would be a good idea, too.
    Ploeg1.Text = selected.Description;               
} 
```

另一种选择是覆盖 TeamItem 类中的 ToString() 以返回描述。在这种情况下，您的原始代码应该可以正常工作。

```
public override string ToString()
{
    return this._description;  // assumes you have a backing store of this name
} 
```

# nsmutablearray - Iphone - 你如何按升序对 NSMutableArray 进行排序？

> ID：16186920
> 
> 赞同：0
> 
> 时间：2013-04-24T08:20:18.287
> 
> 标签：nsmutablearray, nsarray, int

在 Xcode 中，我试图制作一个图表，其中一些点（X，Y）由用户给出。用户可以选择他或她想在图表上绘制多少点。我已将 X 轴点存储在 NSMutableArray 中，将 Y 轴点存储在 NSMutableArray 中，但现在我需要将它们按升序排序，这样当两个点具有相同的 x 或 y 轴图时，我可以修复图形的错误。NSMutableArrays 包含原始 int。我需要做的一个例子是，如果给我一个轴的 4 个坐标，例如 4,8,5,3，我需要将数组排序为 3,4,5,8

下面的代码不包括图形生成，因为它很长

谢谢您的帮助！-

```
int userInputCount;

printf("How many coordinates would you like to plot? ");
scanf("%i", &userInputCount);
printf("\n");

NSMutableArray * xCoordArray = [[NSMutableArray alloc] init];
NSMutableArray * yCoordArray = [[NSMutableArray alloc] init];

for (int i = 1; i <= userInputCount; i++){
        int xCoord;
        int yCoord;

        printf("(%i) Enter coordinates [X,Y]: ", i);

        scanf("%i,%i", &xCoord, &yCoord);

        NSNumber *xCoordinate =  [[NSNumber alloc] initWithInt:xCoord];
        NSNumber *yCoordinate =  [[NSNumber alloc] initWithInt:yCoord];

        [xCoordArray addObject:xCoordinate];
        [yCoordArray addObject:yCoordinate];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:50:59.767

在研究了一段时间后，我想知道是否有人在尝试同样的事情

```
for (int j = 0; j < 2; j++){
            for (int i = 0; i < [yCoordArray count] - 1; i++){

                int yExchangeIntOne = [[yCoordArray objectAtIndex:i] intValue];
                int yExchangeIntTwo = [[yCoordArray objectAtIndex:i +1] intValue];
                if (yExchangeIntOne > yExchangeIntTwo){
                    [yCoordArray exchangeObjectAtIndex:i+1 withObjectAtIndex:i];
                    i = 0;
                }

                int xExchangeIntOne = [[xCoordArray objectAtIndex:i] intValue];
                int xExchangeIntTwo = [[xCoordArray objectAtIndex:i +1] intValue];
                if (xExchangeIntOne > xExchangeIntTwo){
                    [xCoordArray exchangeObjectAtIndex:i+1 withObjectAtIndex:i];
                    i = 0;
                }

            }
        } 
```

这紧随 [xCoordArray addObject:xCoordinate]; 和 [yCoordArray addObject:yCoordinate]; 在循环

# android - 无法使用 Android 2.2 编译

> ID：16186922
> 
> 赞同：0
> 
> 时间：2013-04-24T08:20:19.633
> 
> 标签：android, eclipse, sdk, compilation, apk

我正在努力编译我的 Android 项目。每当我尝试创建一个 Android 项目时，我似乎都无法为 Android 2.2/2.3.3 编译它。我将所需的最低 SDK 设置为 API 8，目标是 10。但是当我想为 2.2/2.3.3 编译它时，它只是不在列表中，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/LC87I.png)

现在我在互联网上搜索解决方案，但似乎找不到。我从 android 网站下载了 android 包，其中包括所有需要的文件等。

我使用 SDK Manager 安装了 2.2 和 2.3.3：

![在此处输入图像描述](https://i.stack.imgur.com/nKEZe.png)

我可以让项目在我的 4.0.3 模拟器上运行，因为也无法制作 2.2 或 2.3.3 模拟器。我将项目编译到`.apk`并在 2.2 手机上进行了测试，但无法安装。

有人对此有解决方案吗？你会成为英雄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:34:07.547

你需要更新你的`sdk`. 你这样做非常重要。SDK 管理器将向您显示尚未安装的组件。标记它们并安装。现在检查`java`和的路径是否`SDK`设置正确。完成所有这些后，再次尝试编译。我认为应该。如果不发布您收到的错误以及您的清单文件。

# php - 用php生成PDF

> ID：16186926
> 
> 赞同：-2
> 
> 时间：2013-04-24T08:20:33.353
> 
> 标签：php, pdf, fpdf

我正在使用以下代码在 php 中生成 pdf，但是当我打开文件时它显示`corrupted or damaged file`错误。

```
$FileName = date("d-m-y") . '.pdf';
$Content = "";

# Titlte of the CSV
$Content = "Name,Address,Age,Phone \n";

# fill data in the CSV
$Content .= "\"John Doe\",\"New York, USA\",15,65465464 \n";

header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename="' . $FileName . '"');
echo $Content;
exit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:25:38.980

PDF是一个二进制文件，你不能这样做。我建议使用一些 PDF 框架，例如[mPDF](https://mpdf.github.io/)。PHP 本身也有[PDF 库](http://php.net/manual/en/book.pdf.php)，但使用框架仍然要好得多（而且工作量更少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:42:58.310

我以前用过[http://www.tcpdf.org/](http://www.tcpdf.org/)，效果很好，非常完整，而且FLOSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:33:31.173

尝试使用 MPDF 库 [http://www.mpdf1.com/mpdf/download](http://www.mpdf1.com/mpdf/download)

这个库很健壮，可以直接将html转换为pdf

# ruby-on-rails - 学习 Ruby on Rails。语法问题

> ID：16186927
> 
> 赞同：-2
> 
> 时间：2013-04-24T08:20:36.077
> 
> 标签：ruby-on-rails, ruby, syntax

我是 Ruby、Rails 和一般编程的新手，所以如果问题非常琐碎，请原谅我。我有这样的看法：

```
<h1>Listing products</h1>

<table>
  <tr>
    <th>\</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @products.each do |product| %>
  <tr>
    <td><%= product.\ %></td>
    <td><%= link_to 'Show', product %></td>
    <td><%= link_to 'Edit', edit_product_path(product) %></td>
    <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Product', new_product_path %> 
```

当我尝试访问该链接时，`http://localhost:3000/products`我收到一个错误：

```
 SyntaxError in Products#index

Showing C:/Sites/depot/app/views/products/index.html.erb where line #13 raised:

C:/Sites/depot/app/views/products/index.html.erb:13: syntax error, unexpected $undefined
...tput_buffer.append= ( product.\ );@output_buffer.safe_concat...
...                               ^
C:/Sites/depot/app/views/products/index.html.erb:18: syntax error, unexpected keyword_end, expecting ')'
'); end 
       ^
C:/Sites/depot/app/views/products/index.html.erb:25: syntax error, unexpected keyword_ensure, expecting ')'
C:/Sites/depot/app/views/products/index.html.erb:27: syntax error, unexpected keyword_end, expecting ')'

Extracted source (around line #13):

10: 
11: <% @products.each do |product| %>
12:   <tr>
13:     <td><%= product.\ %></td>
14:     <td><%= link_to 'Show', product %></td>
15:     <td><%= link_to 'Edit', edit_product_path(product) %></td>
16:     <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>

Trace of template inclusion: app/views/products/index.html.erb 
```

我只是按照书中的一个例子来学习 Rails，所以基本上我没有做任何事情来编写这个视图。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:30:30.110

您需要放置`<%= product.name %>`（替换所需的属性）而不是`<%= product.\ %>`

错误语法下的小插入符号可以指示导致错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T11:31:02.137

重写代码#app\views\products\index.html.erb”如下：

```
 <h1>Listing products</h1>

<table>
<% @products.each do |product| %>
  <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">

    <td>
      <%= image_tag(product.image_url, class: 'list_image') %>
    </td>

    <td class="list_description">
      <dl>
        <dt><%= product.title %></dt>
        <dd><%= truncate(strip_tags(product.description),
               length: 80) %></dd>
      </dl>
    </td>

    <td class="list_actions">
      <%= link_to 'Show', product %><br/>
      <%= link_to 'Edit', edit_product_path(product) %><br/>
      <%= link_to 'Destroy', product, method: :delete,
                  data: { confirm: 'Are you sure?' } %>
    </td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New product', new_product_path %> 
```

重写代码#app\controllers\products_controller.rb 如下：

```
class ProductsController < ApplicationController
  # GET /products
  # GET /products.json
  def index
    @products = Product.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end

  # GET /products/1
  # GET /products/1.json
  def show
    @product = Product.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @product }
    end
  end

  # GET /products/new
  # GET /products/new.json
  def new
    @product = Product.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @product }
    end
  end

  # GET /products/1/edit
  def edit
    @product = Product.find(params[:id])
  end

  # POST /products
  # POST /products.json
  def create
    @product = Product.new(params[:product])
    respond_to do |format|
      if @product.save
        format.html { redirect_to @product,
          notice: 'Product was successfully created.' }
        format.json { render json: @product, status: :created,
          location: @product }
      else
        format.html { render action: "new" }
        format.json { render json: @product.errors,
          status: :unprocessable_entity }
      end
    end
  end

  # PUT /products/1
  # PUT /products/1.json
  def update
    @product = Product.find(params[:id])

    respond_to do |format|
      if @product.update_attributes(params[:product])
        format.html { redirect_to @product,
          notice: 'Product was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @product.errors,
          status: :unprocessable_entity }
      end
    end
  end

  # DELETE /products/1
  # DELETE /products/1.json
  def destroy
    @product = Product.find(params[:id])
    @product.destroy

    respond_to do |format|
      format.html { redirect_to products_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:52:51.623

rails 会生成非常有用的日志。一旦它为您提供行号和文件名，请阅读它。

将 <%= product.\%> 替换为 <%= product.name %> 其中 name 是产品的属性。

# javascript - Jquery - .forEach() 在 IE8 中不起作用

> ID：16186930
> 
> 赞同：27
> 
> 时间：2013-04-24T08:20:38.687
> 
> 标签：javascript, jquery, html, internet-explorer-8

我为其中一个工作平台创建了这个小交互 - [http://jsfiddle.net/S79qp/426/](http://jsfiddle.net/S79qp/426/)

它在除 IE8 之外的所有浏览器中都能正常工作。当我运行控制台时，似乎是这部分有问题......

```
Array.prototype.forEach.call(l, function(item) {
        a.push(jQuery(item).text());
   }); 
```

有人可以向我展示一个 IE8 友好的替代方案，以便我可以使其与所需的版本兼容吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-03-23T23:14:12.633

如果你想要的只是`forEach()`在 IE8 中：

```
if (typeof Array.prototype.forEach != 'function') {
    Array.prototype.forEach = function(callback){
      for (var i = 0; i < this.length; i++){
        callback.apply(this, [this[i], i, this]);
      }
    };
} 
```

这将在任何没有内置它的浏览器中[按预期运行。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-24T08:23:44.013

使用[`jQuery.each`方法](http://api.jquery.com/jQuery.each/)：

```
jQuery.each(l, function(index, item){
  a.push(jQuery(item).text());
}); 
```

如果目标数组从一开始就为空，则可以使用以下[`jQuery.map`方法](http://api.jquery.com/jQuery.map/)：

```
var a = jQuery.map(l, function(item){
  return jQuery(item).text();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-08T21:24:20.540

IE 8 不支持 forEach，您可以使用常规循环：

```
for ( var i = 0; i < myArray.length; i++ ) {
   // code
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T08:24:56.820

实际上，forEach 方法仅适用于 IE9。您应该使用 jQuery 版本“each()”以便为旧浏览器提供支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-21T09:06:28.337

我在 IE8 上遇到了同样的问题，这就是我解决它的方法！

首先想要循环并从**JSON 数组**对象中获取数据。看看在 Firex、chrome 和最新的 IE 中运行良好但在 IE8 中运行良好的原始版本

```
 data.children.forEach(function(item) {
              //javascript: console.log(item);
              console.log(data.children);
              attachRel(item, '1' + (data.children.length > 1 ? 1 : 0));
            });
```

**这是我经过一整天的奋斗后开发的解决方案**

```
 $.each(data.children, function () {

                attachRel(this, '1' + (data.children.length > 1 ? 1 : 0));
            });
```

# java - 在java中显示curentdate和最近5天的日期

> ID：16186938
> 
> 赞同：1
> 
> 时间：2013-04-24T08:21:00.060
> 
> 标签：java, date

我想显示当前日期和最近 5 天的日期

```
2013/04/24
2013/04/23
2013/04/22
2013/04/21
2013/04/20 
```

我有如下代码..

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
    Calendar cal = Calendar.getInstance();
    Date date=cal.getTime();
for (int i=0;i<5;i++){
                   cal.add(Calendar.DAY_OF_MONTH,-1);
                   date=cal.getTime();
                   String reportDate = sdf.format(date);
                   System.out.println("reportDate :" + reportDate);
} 
```

在这里我得到如下输出..

```
reportDate :2013/04/23
reportDate :2013/04/22
reportDate :2013/04/21
reportDate :2013/04/20
reportDate :2013/04/19 
```

但我想要最后五天的日期，包括当前日期......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:45:45.013

试试这个！！

```
public static void getDate(){
    GregorianCalendar cal = new GregorianCalendar();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");

    int day = cal.get(GregorianCalendar.DAY_OF_MONTH);

        for(int i=day; i > (day-5); i--){
            cal.set(GregorianCalendar.DAY_OF_MONTH, i);

            Date date = cal.getTime();
            System.out.println(sdf.format(date));   
        }

} 
```

v 2.0

```
public static void getDate1(){
    GregorianCalendar cal = new GregorianCalendar();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");

    cal.set(2013, 0, 1); // this is extreme case!!!

    int day = cal.get(GregorianCalendar.DAY_OF_MONTH);
    int month = cal.get(GregorianCalendar.MONTH);
    int year = cal.get(GregorianCalendar.YEAR);

        for(int i=day; i > (day-5); i--){
            cal.set(year, month, i);

            Date date = cal.getTime();
            System.out.println(sdf.format(date));   
        }

} 
```

这是输出：

`2013/01/01 2012/12/31 2012/12/30 2012/12/29 2012/12/28`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:24:12.090

`i`您在每次迭代中减去 的值。并`i`随着`1`每次迭代而增加。您可能只想减去`1`，而不管`i`.

```
cal.add(Calendar.DAY_OF_MONTH, -1); 
```

**编辑**

或者甚至是更好的解决方案

```
cal.roll(Calendar.DAY_OF_MONTH, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:24:28.210

问题是这一行：

```
cal.add(Calendar.DAY_OF_MONTH,-i); 
```

具体`-i`部分。在第一次迭代`i`中，`0`您不会减去任何天数。接下来减去一天，得到第 23 天。接下来，减去两天，得到第 21 天，以此类推。

你想打印出初始日期，然后循环四次，每次迭代减去一天，所以：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
Calendar cal = Calendar.getInstance();
Date date = cal.getTime();
String reportDate = sdf.format(date);
System.out.println("reportDate :" + reportDate);
for (int i = 0; i < 4; i++) {
    cal.add(Calendar.DAY_OF_MONTH, -1);
    date = cal.getTime();
    reportDate = sdf.format(date);
    System.out.println("reportDate :" + reportDate);
} 
```

# c# - 是否有可能阻止文件在指定目录中删除？

> ID：16186939
> 
> 赞同：0
> 
> 时间：2013-04-24T08:21:03.610
> 
> 标签：c#, windows, winapi, filesystems, hook

我有以下情况：我正在监视一个带有`FileSystemWatcher`.NET (C#) 类的文件夹。通过这个类，我可以知道文件是否被删除，但我想要以下行为：通过取消删除来防止文件被删除并将文件移动到我自己的临时目录，以便用户可以恢复文件。

是否有可能实现这种行为？我必须走的路是什么？我可以参与一些全球性事件吗？是否只能使用自己的文件系统驱动程序？还是在知道文件被我自己用 WinAPI 功能删除后是否要恢复文件`CreateFile`？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:53:32.523

FileSystemWatcher 不提供任何机制来拦截文件删除，只向您报告发生了什么。

有问题的文件有多大？根据这些文件的大小，实现（即破解）的一种方法是将文件缓存在其他地方，看不见，例如在内存或磁盘上。当您的应用程序启动时，运行文件并缓存它们（将它们复制到临时文件夹或将它们加载到内存中）。当文件被更改或创建时更新缓存，并提供一种在文件被删除时恢复它们的方法。它不漂亮，但它会完成工作。

# hadoop - Oozie/Hadoop：当输入数据集比静态文件更复杂时，如何定义它？

> ID：16186940
> 
> 赞同：0
> 
> 时间：2013-04-24T08:21:08.917
> 
> 标签：hadoop, mapreduce, oozie

我正在尝试使用 Oozie 运行现有的 Hadoop 作业（我正在从 AWS 迁移）。

在 AWS Mapreduce 中，我以编程方式提交作业，因此在提交作业之前，我的代码以编程方式查找输入。

我的输入恰好是另一项工作的最后一次成功运行。要查找最后一次成功运行，我需要扫描 HDFS 文件夹，按文件夹命名约定中嵌入的时间戳排序，然后找到其中包含 _SUCCESS 文件的最新文件夹。

如何做到这一点超出了我的 oozie-newbie 理解。

有人可以简单地为我描述一下我需要在 Oozie 中配置什么，以便我知道我在这里试图达到的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T16:47:41.707

查看 oozie 的以下配置：[https ://github.com/cloudera/cdh-twitter-example/blob/master/oozie-workflows/coord-app.xml](https://github.com/cloudera/cdh-twitter-example/blob/master/oozie-workflows/coord-app.xml)

有一个名为“done-flag”的标签，您可以在其中放置 _SUCCESS 文件以触发工作流程或针对您的情况进行地图缩减作业。还有用于调度作业的参数

${coord:current(1 + (coord:tzOffset() / 60))} ....

# asp.net - 一个带有 3 个搜索选项的 dataGrid

> ID：16186941
> 
> 赞同：1
> 
> 时间：2013-04-24T08:21:11.620
> 
> 标签：asp.net

我的场景是：我有一个 5-6 列的 dataGrid。我有 3 个过滤器，它们在 codeBehind 中使用 3 个 SQL 查询方法：SearchByName()、SearchByValue()、SearchByDate()。我有第四个方法 show DefaultShow()，它显示所有数据而没有任何过滤器。基本上我希望在加载 Page 时加载 DefaultShow() 方法，然后用户可以选择使用 RadioButtonList 进行搜索的选项

DefaultShow() 代码是：

```
 public void DefaultShow()
        {
            string connectionString = cs.getConnection();
            string query = "select Id ,name,value,Description,DateCreate from AllCostView where  IdUser = '" + cui.getCurrentId() + "'";
            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                myConnection.Open();

                SqlCommand command = new SqlCommand(query, myConnection);

                SqlDataAdapter mySqlAdapter = new SqlDataAdapter(command);
                using (DataTable myDataTable = new DataTable())
                {
                    mySqlAdapter.Fill(myDataTable);
                    GridViewCost.DataSource = myDataTable;
                    GridViewCost.DataBind();
                }

            }
        }

protected void Page_Load(object sender, EventArgs e)
        {

                DefaultShow();

        } 
```

**但这不起作用我想念什么？**

我的 gridViewCode 是这样的：

```
<div class ="gridView">
    <asp:GridView ID="GridViewCost" runat="server" AutoGenerateColumns="False" CaptionAlign="Top" 
        ShowFooter="True" ShowHeaderWhenEmpty="True" Font-Overline="False" 
        Font-Strikeout="False" Font-Underline="False" 
         AllowPaging="true"
        PageSize="5"
        CssClass="mGrid"  
    PagerStyle-CssClass="pgr"  
    AlternatingRowStyle-CssClass="alt" OnPageIndexChanging="GridViewCost_PageIndexChanging" OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged" >
        <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
        <Columns>

            <asp:BoundField DataField="Id" HeaderText="Номер" />
            <asp:TemplateField HeaderText="Име">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
                </ItemTemplate>
                <ControlStyle Width="100px" />
            </asp:TemplateField>
            <asp:BoundField DataField="Value" HeaderText="Стойност" />
            <asp:BoundField DataField="Description" HeaderText="Описание" />
            <asp:BoundField DataField="DateCreate" HeaderText="Дата"   />

        </Columns>
        <AlternatingRowStyle />
        <HeaderStyle  HorizontalAlign="Right"/>
        <PagerStyle />
        <RowStyle BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" HorizontalAlign="Center" />

    </asp:GridView> 
```

如果需要，我会发布更多代码。谢谢。

# c - 标识符“snprintf”未定义

> ID：16186946
> 
> 赞同：3
> 
> 时间：2013-04-24T08:21:39.810
> 
> 标签：c, hp-ux, acc

我正在尝试使用 aCC 编译器 [HP C/aC++ B3910B A.06.26] 在 HP-UX 机器上编译控制台 C 应用程序。编译总是失败并出现以下错误：

```
******"Common/Common.c", line 153: error #2020: identifier "snprintf" is undefined
          snprintf( BufferMessage, MSG_SIZE,
          ^
1 error detected in the compilation of "Common/Common.c".
gmake: *****[Common/Common.o] Error 2******** 
```

然而，Common.C 文件已经包含通常包含方法 snprintf 的库。有什么想法可以解决这个问题吗？提前感谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:24:49.230

[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)在 C99 中引入，并在 中定义`<stdio.h>`，因此您的编译器必须支持该版本的 C 标准。如果它不支持 C99，请`sprintf()`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:36:32.400

HPUX C 编译器的版本 6 与 C99 兼容，但您可能需要开关才能启用它。

6.20 版本说明指出，下一个版本应该将默认模式从 C89 切换到 C90，并且您正在运行 6.26。看来它确实发生在 6.25 中，这是 6.20 之后的版本。

您可以通过使用（或者现在 C99 是默认设置）来*强制C99 模式，看看是否有帮助。*可能的是，即使默认的*C*编译模式是 C99，您仍然必须指定它是 C 而不是 C++。`cc -AC99``cc -Ae`

 *其他一些需要检查的事情：

*   看看你是否包含了`stdio.h`标题。
*   看看你是否遇到了与 just 类似的问题`printf`，它也在该标题中。
*   运行生成预处理器输出 ( `cc -E`) 的编译器并检查它是否在某处定义。*

# maven - Sonatype Nexus：出乎意料的价值 “maven-metadata.xml”中的标记

> ID：16186947
> 
> 赞同：2
> 
> 时间：2013-04-24T08:21:39.953
> 
> 标签：maven, nexus, sonatype, maven-metadata

我正在使用 Sonatype Nexus v2.3.1-01，但`<latest>`标签的值有问题。我认为每次我上传一个新版本的工件时，这个值都会更新。

现在，我查看了**昨天已将新版本部署到 Nexus**`<latest>`的几个工件的值。结果：

 ***   `<latest>`**一些**工件的字段包含昨天的版本值（我所期望的）
*   `<latest>`**一些**工件的字段值稍早一些（几天）
*   `<latest>`**一些**工件的字段保存一个月或更早的值

所以我想要么是我对这个标签的理解有问题，要么是设置/配置有问题。有任何想法吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T18:04:35.523

“最新”仅适用于组回购。见 - [http://www.blackpepper.co.uk/posts/nexus-support-for-latest-version](http://www.blackpepper.co.uk/posts/nexus-support-for-latest-version)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:26:17.950

[Nexus FAQ](https://docs.sonatype.com/display/SPRTNXOSS/Nexus+FAQ#NexusFAQ-Q.The%22latest%22and%22release%22tagsinmavenmetadata.xmlarenotbeingupdatedafterdeployingartifacts)描述了何时设置 LATEST/RELEASE。最新仅用于（和更新）maven 插件。**

# java - Java 重用套接字

> ID：16186952
> 
> 赞同：0
> 
> 时间：2013-04-24T08:21:45.013
> 
> 标签：java, sockets, http, stream

我有一个通过 HTTP 到服务的套接字连接。该服务仅支持 HTTP/1.0，默认情况下在发送响应时关闭连接。此版本的协议中添加了一个参数 - Connection: Keep-alive - 使其成为可能。该标准定义服务也应该将此参数附加到标头。这不会发生，响应标头不包含它。

当我从套接字获取 inputStream 时，它不支持标记。那么，我可以安全地假设我将无法重用相同的连接来发送/接收多个请求/响应吗？

**更新** 我无法控制服务，我手动构建请求。

```
Socket socket = new Socket("server.com", 11111);

BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream(), "UTF-8"));

writer.write("POST HTTP/1.0\r\n");
writer.write("Host: " + socket.getInetAddress().getHostName() + "\r\n");
writer.write("Content-Length: " + length + "\r\n");
writer.write("Content-Type: text/xml; charset=\"utf-8\"\r\n");
writer.write("Connection: Keep-alive\r\n");
writer.write("\r\n");

writer.write(xmldata);
writer.flush();

List<String> lines = IOUtils.readLines(socket.getInputStream()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:32:16.067

HTTP 1.0 标准（[RFC 1945](http://www.ietf.org/rfc/rfc1945.txt)）实际上并没有定义任何这样的东西。这是一个后期添加的功能，服务器没有义务支持它。

# objective-c - iOS 正确使用带有 SDWebImage 的缓存图像

> ID：16186955
> 
> 赞同：0
> 
> 时间：2013-04-24T08:21:51.877
> 
> 标签：objective-c, ios6, sdwebimage

我正在使用 SDWebImage 来获取图片。

假设我有两个视图控制器 A 和 B。B 是 A 的下一个视图。它们需要显示相同的图像：

```
[iconIamgeView setImageWithURL:[NSURL URLWithString:@"http://www.example.com/icon.jpg"]; 
```

我以为 SDWebImage 会`http://www.example.com/icon.jpg`在 A 中的这段代码之后缓存，所以 B 将使用缓存。因此，当我使用此代码在 B 中显示相同的图像时，不应该有可检测的延迟。但是，似乎我错了。当我想在 B 中显示此图像时，存在明显的延迟。

如何正确使用缓存？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T06:15:05.077

```
NSURL *imageURL = [NSURL URLWithString:[linkImageArray objectAtIndex:index]];
UIImage *placeholderImage = [UIImage imageNamed : [linkImageArray objectAtIndex: index]];

[imageView setImageWithURL:imageURL
          placeholderImage:placeholderImage
                   options:SDWebImageRefreshCached
                 completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
                   {
                       NSLog(@"image loaded");
                   }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:12:56.407

很抱歉，我在问题中提到的问题不是真正的问题。

```
[iconIamgeView setImageWithURL:[NSURL URLWithString:@"http://www.example.com/icon.jpg"]; 
```

**此代码使缓存运行良好。**

真正的问题是我设置图像的代码不在主线程上，所以我无法立即显示图像。我曾经`dispatch_async`解决这个问题：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [iconIamgeView setImageWithURL:[NSURLURLWithString:@"http://www.example.com/icon.jpg"];
}); 
```

希望这个答案可以帮助面临同样问题的人。

# google-chrome - 如何在所有 Google（国际）页面上加载内容脚本？

> ID：16186956
> 
> 赞同：9
> 
> 时间：2013-04-24T08:21:52.673
> 
> 标签：google-chrome, google-chrome-extension, internationalization, manifest, content-script

对于 Google-Chrome 扩展，我想在所有 Google 页面上加载内容脚本。做这个的最好方式是什么？

我在 中试过这个，`manifest.json`但它不起作用：

```
"matches": ["http://www.google.*/*", "https://www.google.*/*"], 
```

这“有效”，但写起来有点长，我认为这不是最佳做法：

```
"matches": ["http://www.google.com/*", "https://www.google.com/*", "http://www.google.fr/*", "https://www.google.fr/*", "http://www.google.de/*", "https://www.google.de/*", etc..."], 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T08:53:28.737

请参阅[*匹配模式和 glob*](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)。`matches`不幸的是，Google-Chrome 在其规范中没有一个很好的顶级域 (TLD) 机制。因此，`http://www.google.*/*`引发错误并且`http://www.google.tld/*`（[Greasemonkey 语法](http://wiki.greasespot.net/Magic_TLD)）不受支持。

要解决此问题，请扩大`matches`参数并使用参数过滤结果`include_globs`。
像这样：

```
"matches":        ["http://*/*", "https://*/*"],
"include_globs":  ["http://www.google.*/*", "https://www.google.*/*"], 
```

# networking - Windows 7 / 2008 及更高版本的注册表中缺少 NTEContextList 键

> ID：16186960
> 
> 赞同：0
> 
> 时间：2013-04-24T08:22:10.050
> 
> 标签：networking, registry, ip-address, tcp-ip, network-interface

我有一个代码，它使用远程注册表获取计算机上配置的所有 IP。
我正在使用以下密钥： `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\{GUID}\NTEContextList`确定接口的 IP 是否已启用。

如果值为 0，我假设当前接口不相关/已禁用，并且不包含计算机上配置的 IP 地址列表。
如果值不为 0，我取`IPAddress`value 或`DhcpIPAddress`value 中列出的 ips（取决于`DhcpEnabled`value.

我面临的问题是在具有 Windows 7 / Server 2008 及更高版本的计算机上，缺少此密钥。您是否知道它隐藏在哪里/我可以使用其他什么键来确定接口的 IP 是否相关？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T07:58:53.750

如果有人有这个问题 - 您可以使用 NetEnabled == True 从 Vista/2008 开始对 NIC 使用 WMI 查询 - 不要忘记需要管理员凭据：

```
 $enabledNICs = @()
        try 
        {
            $enabledNICs = Get-WmiObject win32_networkadapter -ComputerName $ComputerName -Credential $Credential -Filter "netenabled=true" 
        }
        catch
        {
            Write-Error "The computer $ComputerName is not accessible for WMI query"
            continue
        } 
```

# java - 在 Java 中使用 this() 会创建对象的更多递归实例吗？

> ID：16186961
> 
> 赞同：1
> 
> 时间：2013-04-24T08:22:10.963
> 
> 标签：java, recursion, constructor, this

如果我有一个构造函数

```
public class Sample {

    public static StackOverflowQuestion puzzled;
    public static void main(String[] args) {

        puzzled = new StackOverflowQuestion(4);
    }
} 
```

在我拥有的程序的主要方法中

```
public class StackOverflowQuestion {

    public StackOverflowQuestion(){
    //does code
    }

    public StackOverflowQuestion(int a){
    this();
   }
} 
```

这是通过constructor2创建一个StackOverflowQuestion实例，然后通过constructor 1创建另一个StackOverflowQuestion实例，因此我现在有两个StackOverflowQuestion实例直接在彼此内部？

或者在这种情况下，constructor2 是否会横向调整，然后通过 constructor1 创建 StackOverflowQuestion 的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:26:11.787

我想你的意思是：

```
public class StackOverflowQuestion
{

    public StackOverflowQuestion(){ // constructor
       //does code
    }

    public StackOverflowQuestion(int a){ // another constructor
       this();
    }
} 
```

并称它为：

```
StackOverflowQuestion puzzled = new StackOverflowQuestion(4); 
```

这只会创建一个对象，因为`new`只执行一次。该调用`this()`将执行另一个构造函数中的代码，而不创建新对象。该构造函数中的代码能够修改当前创建的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T08:25:36.357

它只创建一个实例。它的一种用例是为构造函数参数提供默认值：

```
public class StackOverflowQuestion
{
    public StackOverflowQuestion(int a) {
        /* initialize something using a */
    }

    public StackOverflowQuestion() {
        this(10); // Default: a = 10
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:37:25.823

`this()`不一样`new StackOverflowQuestion()`

`this(5)`不一样`new StackOverflowQuestion(5)`

`this()`并`this(5)`调用同一类中的另一个构造函数。

因此在本例中：

```
public class StackOverflowQuestion
{
    private int x;
    private int y;
    private int a;

    public StackOverflowQuestion(){
       this.x = 1;
       this.y = 2;
    }

    public StackOverflowQuestion(int a){
       this();
       this.a = a;
    }
} 
```

调用`this()`只会初始化对象而不创建新实例。记住`new StackOverflowQuestion(5)`已经调用了构造函数，该构造函数实际上创建了`StackOverflowQuestion`对象的新实例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T08:30:53.600

A`constructor`不创建对象。它只是初始化对象的状态。它是`new`创建对象的操作员。通读[创建新类实例 - JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)。现在这是什么意思：

```
public class StackOverflowQuestion
{

   public StackOverflowQuestion(){ // constructor
      //does code
  }

  public StackOverflowQuestion(int a){ // another constructor
     this();
  }
}

 StackOverflowQuestion puzzled = new StackOverflowQuestion(4); 
```

一个新对象`StackOverflowQuestion`由`new`操作员创建，就在对新创建对象的引用作为结果返回并分配给`StackOverflowQuestion puzzled`引用变量之前，构造函数`StackOverflowQuestion(int a)`调用`this()`即`public StackOverflowQuestion()`，默认构造函数内的代码（如果有）运行并且控件回到 ``StackOverflowQuestion(int a)`，内部的剩余代码（如果有）被处理以初始化新对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T08:31:32.267

类的实例是在您使用“new”运算符时创建的。创建一个没有构造函数的类是完全可能的，因为在这种情况下，默认情况下，没有参数的构造函数是可用的。

“this”关键字只是指向这个特定的对象，所以调用“this()”意味着“调用我自己的构造函数，没有参数并执行里面的东西”

# sql - 就像在 SQL 中搜索数字列一样

> ID：16186962
> 
> 赞同：3
> 
> 时间：2013-04-24T08:22:13.000
> 
> 标签：sql, oracle

如何`like`对 SQL 中的数字列进行搜索？

我想要的数字是`like '0.0000%'`.

我试过了

```
select * from emp where emp_id & '' like '123%'
select * from emp where CONVERT(varchar(20), emp_id) like '123%' 
```

但徒劳无功。

请帮我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:12:10.447

无论您使用哪种 DBMS 并假设您有正当理由这样做，您都有多种方法可以解决此类问题。我现在能想到三个：

1.  将数字转换为字符串并在此使用 LIKE 运算符：

    ```
    select *
    from emp
    where to_char(emp_id) like '123%'; 
    ```

2.  直接使用数学运算符（如 Andrey 建议的那样），例如：

    ```
    select *
    from table
    where num between 0 and 0.0001; 
    ```

3.  构造一个数学表达式（其实这只是方法2的另一种情况），例如：

    ```
    select *
    from table
    where abs(num - round(num, 5)) < 0.00001; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:24:28.300

使用比较运算符（> 和 <）：

```
select * from table where num > 0 and num < 0.00001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:01:38.613

select 0.0001*1000 from dual 如果 <1 表示 0.0001 有 3 个或更多零。所以我确实喜欢 select * from emp where emp_id*10000<1

# java - SmartGWT：将自定义小部件动态添加到 VStack

> ID：16186964
> 
> 赞同：1
> 
> 时间：2013-04-24T08:22:16.597
> 
> 标签：java, gwt, smartgwt

我需要一些共享相同代码库的小部件，因此我引入了一个提供这些共享成员和方法的抽象类，并创建了一个添加额外功能的实现。但每次我想将它添加到 VStack 时，我都会收到以下错误：

```
java.lang.AssertionError: A widget that has an existing parent widget may not be added to the detach list 
```

为了验证这是否是类层次结构的 b/c，我在方法中创建了相同的，但我仍然收到相同的错误。下面的代码应该描述我想要实现的目标。

```
public class Test extends VStack {
  // constructor that adds button and a clickhandler for the button 
  // that will call addComplex()
  public void addComplex() {
    HStack stack = new HStack();
    stack.setHeight("22px");
    stack.addMember(new IButton("remove"));
    stack.addMember(new ListBox());
    DynamicForm form = new DynamicForm();
    form.setFields(new TextItem());
    stack.addMember(form);
    addMember(stack);
  }
} 
```

当我打电话时

```
addMember(new Label("")); 
```

我没有错误。

此外，考虑到方法 addComplex 中的东西在一个单独的类中，我在这个 Test-class 的构造函数中添加了一个新实例，没有抛出错误。仅当我想通过单击按钮添加 HStack 时才会引发错误

为什么我不能将此 HStack 添加到我的 VStack 中？

**更新**

它是*ListBox*的 b/c ，它是一个 GWT 组件，而不是 SmartGWT 组件。这是我错过的细节。

谁能告诉我：为什么 GWT 小部件有一个现有的父级，而 SmartGWT 小部件没有？还是错误消息只是伪造的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:28:43.800

问题是*ListBox*来自 GWT，而不是 SmartGWT。用适当的 SmartGWT 小部件替换它，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T17:28:36.623

我发现，作为一般规则：

**如果您寻求超出小部件基本显示功能的功能，则不应混合使用 GWT 和 SmartGWT。**

`DynamicForm`我在尝试隐藏/显示包含一些普通 GWT 小部件的 a或 a时遇到了同样的异常`VLayout`......页面加载正常，但是当我尝试添加一些隐藏/显示交互功能时遇到了麻烦......

# delphi - 我的应用程序如何知道是否有默认打印机更改通知

> ID：16186966
> 
> 赞同：0
> 
> 时间：2013-04-24T08:22:17.610
> 
> 标签：delphi, delphi-xe3, printers

我正在使用 Delphi XE3，下面是我的示例应用程序：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

uses Vcl.Printers;

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(Printer.Printers[Printer.PrinterIndex]);
end;

end. 
```

窗下| 控制面板 | 设备和打印机，有 3 台打印机：

1.  CutePDF Writer（默认打印机）
2.  我的传真
3.  Microsoft XPS 文档编写器

当我运行示例应用程序并单击 Button1 时，它显示“CutePDF Writer”作为默认打印机。在不关闭示例应用程序的情况下，我转到 Windows | 控制面板 | 设备和打印机将“我的传真”设置为默认打印机，然后我返回示例应用程序并再次单击 Button1，它仍然显示“CutePDF Writer”作为默认打印机（它应该显示“我的传真”）。在学习了单元 Vcl.Printers 中的 TPrinter 类之后，我可以编写如下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  if not Printer.Printing then
    Printer.PrinterIndex := -1;
  ShowMessage(Printer.Printers[Printer.PrinterIndex]);
end; 
```

对于每次需要将 PrinterIndex 设置为 -1 来说，这不是一个好方法。我的问题是我的应用程序如何知道是否有默认打印机更改通知？因此，如果有默认打印机更改通知，我只会将 PrinterIndex 设置为 -1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:02:52.800

您可以收听`WM_SETTINGCHANGE`通知消息。MSDN 文档有点稀疏，但是文档中的示例代码[`SetDefaultPrinter`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd162971.aspx)清楚地表明`WM_SETTINGCHANGE`，修改默认打印机的任何一方都应该广播一条消息。

遗憾的是，其中`WM_SETTINGCHANGE`不包含任何可让您确定默认打印机是否已更改的信息。您无法知道特定`WM_SETTINGCHANGE`消息是表示更改了默认打印机还是表示更改了某些其他设置。

但是，我会质疑您认为您应该回应此消息的信念。考虑以下场景：

*   您有一台带有两台打印机 A 和 B 的机器。
*   打印机 A 是默认打印机。
*   应用程序启动。
*   用户打印，但选择打印机 B。
*   用户再次打印。程序记得上一次用户想要打印机 B。但是这次用户想要打印机 A，因此更改了该打印机。
*   然后用户在控制面板中将默认打印机更改为打印机 B。
*   用户再次打印。应该向用户提供哪种打印机？

问题是应用程序有历史。用户上次打印时，他们明确选择了打印机 A。为什么更改默认打印机意味着下一轮应用程序应该提供新的默认打印机，而不是用户选择使用的最后一台打印机？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-12T11:50:06.713

只需添加：Printer.Refresh;

像这样 ：

`procedure TForm1.Button1Click(Sender: TObject); begin Printer.Refresh; ShowMessage(Printer.Printers[Printer.PrinterIndex]); end;`

# java - sourcepath 和仅指定源文件之间的区别？

> ID：16186967
> 
> 赞同：3
> 
> 时间：2013-04-24T08:22:24.753
> 
> 标签：java

javac -sourcepath 选项的意义何在？

假设你有一个文件 Ball.java，和文件 Eight.java，运行起来似乎没有区别：

```
javac Eight.java lib/pool/Ball.java 
```

和

```
javac Eight.java -sourcepath lib 
```

类路径对我来说很有意义，因为这意味着您只需要将类文件分发给不需要弄乱源代码的开发人员，但我认为只有当它是您自己的源代码时，您才有可能拥有/需要源代码。内部项目，所以无法理解为什么需要它。

人们是否拥有大型源代码存储库而不是类？

通过进一步的测试，我已经确认 -sourcepath 甚至没有像类路径那样考虑源的最后修改日期，因此甚至无法在构建过程中节省时间。与使用 -classpath 时一样，如果 .class 文件不存在而源文件存在，或者 .java 文件比 .class 文件新，这将构建 .class 文件，而不管源路径上的任何源文件都将再次构建他们是多么新。当同时指定 -sourcepath 和 -classpath 时，只有在源文件较新时才会重建类路径，因此指定源路径和类路径似乎完全没有意义。我还进行了测试，以确保 -sourcepath 和 -classpath 都只构建解析所需的必要源文件。

那么 -sourcepath 的重点是由于懒惰（不想提取和指定所有源文件）吗？使用 -sourcepath 而不是 -classpath 有什么好处吗？因为它们似乎做同样的事情，但类路径通过在源不需要重建时节省时间来更好地执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:48:22.160

源路径用于查找您要求编译的文件（在您的示例中为 8.java）中引用的类的 .java 文件，这些文件不存在 .class 文件。编译器也会自动编译这些。我不确定它是否比较了 .java 和相应的 .class 文件的修改时间，如果 .java 较新，则重新编译它，但我认为可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T14:36:43.097

我从开发中的其他同事那里发现，如果他们想构建项目或子项目的一部分，他们通常会在开发过程中使用它。他们不是从头开始构建所有东西（这可能需要几个小时），而是只想构建几个项目，然后他们可以在 -sourcepath 中指定整个项目的其他目录，这样就可以解析类。这意味着它可以自动找到它需要的依赖项，并在需要时构建它们。

我还被告知这在 maven 构建期间可能会有所帮助，因为依赖项收集的顺序可能非常无组织。您可以将整个代码树指定为源路径，而不是因为构建时 jar 不存在而丢失依赖项。虽然我认为这不是最好的建议，但当有人在构建时遇到问题时它会很有帮助。

# html - 在 td 内叠加会将表格单元格向外推

> ID：16186976
> 
> 赞同：0
> 
> 时间：2013-04-24T08:22:48.520
> 
> 标签：html, css

在 td 中使用叠加层时，我遇到了布局问题。让我展示我的html。

```
 <!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="theme.css">
    <script type="text/javascript" src="jquery-1.7.1.js">
    </script>
    <script type="text/javascript">
        function alterControl() {
            var $visibleCtrl = $("#servicesTable tbody").find("#ID1").find(".divOverlayVisible");
            var $hiddenCtrl = $("#servicesTable tbody").find("#ID1").find(".divOverlayHidden");
            $visibleCtrl.removeClass("divOverlayVisible").addClass("divOverlayHidden");
            $hiddenCtrl.removeClass("divOverlayHidden").addClass("divOverlayVisible");
        }
    </script>
</head>
<body>
    <table id="servicesTable">
        <thead>
            <tr>
                <th>
                    <label id="lblServiceName">
                        Name</label>
                </th>
                <th>
                    <label id="lblResult">
                        Result</label>
                </th>
            </tr>
        </thead>
        <tr id="ID1">
            <td>
                <input style="width: 100px;" id="txtName1" name="txtName1" type="text" value="Service1" />
            </td>
            <td>
                <div class="overlayOuter">
                    <div id="ServiceTestResult1" class="divOverlayVisible">
                        <input type="text" value="This is static text" id="Testresult1" style="width: 40px;
                            height: 16px;" />
                    </div>
                    <div id="ServiceTestResultTestImage1" class="divOverlayHidden">
                        <img src="Validated_16.png" alt="Image not found" style="width: 16px; height: 16px;" />
                    </div>
                </div>
            </td>
        </tr>
    </table>
    <input type="button" id="btnToggle" value="Alter" onclick="alterControl()" />
</body>
</html> 
```

我的 CSS 如下所示

```
.overlayOuter
{
    position:relative;
    height:100%;
    width:100%;
}

.divOverlayHidden 
{
    top:0px; 
    left:0px;
    position:absolute; 
    visibility:hidden; 
    z-index:101;
}

.divOverlayVisible 
{
    top:0px; 
    left:0px; 
    position:absolute; 
    visibility:visible; 
    z-index:100;
} 
```

我面临的问题是，我的第二列中的表格单元格超出了行。我的想法是根据输入一次显示文本框或图像。请在 skydrive [https://skydrive.live.com/#cid=EAA26C1BAE3050B8&id=EAA26C1BAE3050B8!130](https://skydrive.live.com/#cid=EAA26C1BAE3050B8&id=EAA26C1BAE3050B8!130) [https://skydrive.live.com/#cid=EAA26C1BAE3050B8&id=EAA26C1BAE3050B8!131中找到截图](https://skydrive.live.com/#cid=EAA26C1BAE3050B8&id=EAA26C1BAE3050B8!131)

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:48:52.603

因为我不是会员，所以看不到图片，抱歉。但是我已经在 jsFiddle 中[重新创建了问题](http://jsfiddle.net/Arkana/4JZsp/)`position:absolute;`，并且，如果我从中删除`.divOverlayVisible`它似乎可以正常工作：[示例](http://jsfiddle.net/Arkana/4JZsp/1/)

```
.divOverlayVisible {
    top:0px;
    left:0px;
    /*position:absolute; I have removed this line */
    visibility:visible;
    z-index:100;
} 
```

编辑：如果您需要该职位来`z_index`工作，您可以将值更改`absolute`为`relative`而不是删除它。

# java - Runtime.exec 命令不起作用

> ID：16186978
> 
> 赞同：0
> 
> 时间：2013-04-24T08:22:54.287
> 
> 标签：java, wget, runtime.exec

我有一个使用 wget 从 Web 服务下载文件的 Java 应用程序。通过java执行命令时，它返回：“wget：不是http或ftp url：”当我直接执行命令时，它运行没有问题。这是我的代码：

```
try {
        Debug.println("Starting copy of "+srcFile+" to "+destFile);
        String command = "wget -O " + destFile + " \""+ srcFile +"\"";
        Process p = Runtime.getRuntime().exec(command);
        int exitCode = p.waitFor();

        if(Debug.isDebugMode())
        {
            Debug.println(command);
            BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getErrorStream()));

            String s;
            while((s = stdInput.readLine()) != null)
            {
                Debug.println(s);
            }
        }
        Debug.println("Finished with code: " + String.valueOf(exitCode));
    } 
    catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false; 
```

这是输出：

```
24/04/2013 10:11:05 Starting copy of stoppenmetroken.webcolors.local/service/track?track=3b1ac68a288345c183a08c714901a398&mac=089000A09090 to /opt/byato/data/song/3b1ac68a288345c183a08c714901a398
24/04/2013 10:11:05 wget -O /opt/byato/data/song/3b1ac68a288345c183a08c714901a398 "stoppenmetroken.webcolors.local/service/track?track=3b1ac68a288345c183a08c714901a398&mac=089000A09090"
24/04/2013 10:11:05 wget: not an http or ftp url: "http://stoppenmetroken.webcolors.local/service/track?track=3b1ac68a288345c183a08c714901a398&mac=089000A09090"
24/04/2013 10:11:05 Finished with code: 1 
```

ps：我删除了输出的 http:// 部分，因为我没有足够的声望点 -.-

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:40:42.243

您可以尝试执行这样的命令吗：

**进程 p = Runtime.getRuntime().exec("/bin/bash -c "+command); //对于Linux**

或者

**进程 p = Runtime.getRuntime().exec("cmd.exe /c "+command); //对于 Windows**

有时我们需要显式调用 Linux shell 或命令提示符。

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:25:17.573

我怀疑这一点：

```
String command = "wget -O " + destFile + " \""+ srcFile +"\""; 
```

是问题所在。在 shell 中运行时，URL 周围的引号将被删除。但是，当您通过 Java 运行时，您不是通过 shell 运行的，并且您的 URL 以`"http...`（仔细查看错误消息）开头。

如果您不想`Runtime.exec() t`解析和拆分您的参数，那么您可以考虑[采用单个参数的变体](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)。更有效的解决方案仍然是使用[HttpComponents](http://hc.apache.org/)进行下载。

# c# - 从静态基类方法调用静态派生类方法

> ID：16186981
> 
> 赞同：-1
> 
> 时间：2013-04-24T08:23:17.550
> 
> 标签：c#

问题：我有一个实体类（基类），我从中继承了多次。现在我在所有派生类中都有一个`Add`-method 和一个-method。`Validate`这些函数在所有派生类中都是相同的，它们是`static`.

这是我的`Add`方法

```
public static long Add(DBData[] UserData)
{
    SortedDictionary<string, DBData> Data = new SortedDictionary<string, DBData>();

    foreach (DBData d in UserData)
    {
        Data.Add(d.FieldName, d);
    }

    if (Project.Validate(Data, OperationMode.Add))
    {
        return DBUtility.Insert("Project", VSCommon.Serialise(Data));
    }
    else
    {
        return -1;
    }
} 
```

现在我`Project`在上面的函数中有“”（2个地方，一个如果`Project`这个函数类型的对象也属于，另一个是数据库表名）。这些是我所有派生类的唯一区别。我想把这个`Add`方法放在我的基类中，这样我就可以跳过在每个派生类中多次编写它。

我搜索并发现有些人尝试使用泛型，但我似乎没有像使用泛型声明时那样选择它。当我调用`Validate`-method 时出现编译错误。另外，我需要类的名称`string`来获取相关的表名。

不确定我是否能够定义我的问题，感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:13:15.683

我使用 ADD 函数中的以下更改解决了我的问题

```
public static long Add<T>(DBData[] UserData)
    {
        SortedDictionary<string, DBData> Data = new SortedDictionary<string, DBData>();
        foreach (DBData d in UserData)
        {
            Data.Add(d.FieldName, d);
        }
        MethodInfo m = typeof(T).GetMethod("Validate");
        bool r = (bool)m.Invoke(null, new object[] { Data, OperationMode.Add });
        if (r)
        {
            return DBUtility.Insert(typeof(T).Name, VSCommon.Serialise(Data));
        }
        else
        {
            return -1;
        }
    } 
```

然后我必须更改对 Project.Add<Project>(...); 的调用 或 Client.Add<Client>(...); 而不是 Project.Add(...) 之前。但这最终为我省去了很多麻烦:)。

编辑：我刚刚意识到 Project.Add<Client>(...) 也可以被调用，这将插入到 Client 对象中。这不好，所以我的问题实际上并没有解决:(。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:34:44.267

您可以添加一个（基类和虚拟中的抽象）方法，该方法为此类返回“Project”，为其他类返回一些其他字符串。然后只需从静态 Add 方法中引用它。

如果需要，我认为您也可以使用反射来获取“项目”字符串。但是我建议不要这样做，因为它会在数据库和代码之间增加不必要的耦合。

# math - 从 GLM 中的轴角度在所有 3 个轴上旋转四元数

> ID：16186982
> 
> 赞同：1
> 
> 时间：2013-04-24T08:23:28.427
> 
> 标签：math, opengl, quaternions

我在 OpenGL 引擎中使用四元数进行旋转。目前，为了为 x、y 和 z 旋转创建旋转矩阵，我为每个轴旋转创建一个四元数。然后我将它们相乘以获得最终的四元数：

```
 void RotateTo3(const float xr ,const float yr ,const float zr){

    quat qRotX=angleAxis(xr, X_AXIS); 
    quat qRotY=angleAxis(yr, Y_AXIS);
    quat qRotZ=angleAxis(zr, Z_AXIS);

    quat resQuat=normalize(qRotX * qRotY * qRotZ);
    resQuat=normalize(resQuat);
    _rotMatrix= mat4_cast(resQuat);

 } 
```

现在一切都很好，但我只想从所有 3 个轴角创建一个四元数并跳过最后的乘法。quat 构造函数之一具有欧拉角向量的参数，如下所示：

```
quat resQuat(vec3(yr,xr,zr)) 
```

因此，如果我尝试此操作，则最终旋转是错误的。（还尝试了 quat(vec3(xr,yr,zr)) ）。GLM 中没有办法在一个实例中从所有 3 个轴填充最终四元数吗？

**现在，还有一件事：** 正如 Nicol Bolas 建议的那样，我可以使用 glm::eulerAngleYXZ() 立即填充旋转矩阵，因为他认为执行中间四元数步骤是没有意义的。但我发现该函数至少对我来说不能正常工作。例如：

这 ：

```
 mat4 ex=  eulerAngleX(radians(xr));
      mat4 ey=  eulerAngleY(radians(yr));
      mat4 ez=  eulerAngleZ(radians(zr));

       rotMatrix= ex * ey * ez; 
```

不返回与此相同的内容：

```
 rotMatrix= eulerAngleYXZ(radians(yr),radians(xr),radians(zr)); 
```

从我对正确旋转状态的比较来看，第一种方式给出了正确的旋转，而第二种方式是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:37:48.580

与流行的看法相反，四元数并不是神奇的“解决万向节锁定”装置，因此四元数的任何使用都会使欧拉角在某种程度上不是欧拉角。

您的`RotateTo3`函数采用 3 个欧拉角并将它们转换为旋转矩阵。*您如何*执行此过程并不重要。无论您使用 3 个矩阵、3 个四元数还是[`glm::eulerAngleYXZ`](http://glm.g-truc.net/api-0.9.4/a00168.html#gab2c29b80a86caa83f6b550de31e6889f). 结果仍然是由 3 个轴向旋转组成的矩阵。它将具有欧拉角的所有特性和*缺点*。因为*是*欧拉角。

在这里使用四元数作为中介是没有意义的。它一无所获；您也可以只使用由连续`glm::rotate`调用构建的矩阵。

如果您想在没有万向节锁定或其他欧拉角问题的情况下进行定向，那么您需要[停止将您的方向表示为欧拉角](https://stackoverflow.com/a/9716268/734069)。

在回答您实际提出的问题时，您可以使用`glm::eulerAngleYXZ`来计算

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T16:48:41.470

你的意思是这样的：

```
quat formQuaternion(double x, double y, double z, double angle){
     quat out;
     //x, y, and z form a normalized vector which is now the axis of rotation.
     out.w  = cosf( fAngle/2)
     out.x = x * sinf( fAngle/2 )
     out.y = y * sinf( fAngle/2 )
     out.z = z * sinf( fAngle/2 )
     return out;
} 
```

抱歉，我实际上并不知道您正在使用的 quat 类，但它仍然应该有一些方法来设置 4 个维度。来源：[四元数教程](http://www.cprogramming.com/tutorial/3d/quaternions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-15T12:14:11.027

eulerAngleYXZ 给出了一组可能的欧拉角，如果按照 api 名称指示的顺序重新组合，将产生与给定四元数相同的方向。这不是一个错误的结果——它是几个正确的结果之一。

使用四元数在内部存储您的方向 - 旋转它，将您的方向 quat 乘以另一个表示旋转量的 quat，可以从角度/轴构建以实现您想要的。

# android - 添加包含其他依赖项的模块依赖项

> ID：16186984
> 
> 赞同：3
> 
> 时间：2013-04-24T08:23:34.147
> 
> 标签：android, intellij-idea

我正在使用 IntelliJ 12 。
我有一个`Module A`模块依赖于 github 项目。我在我的主要`Module B`项目中添加了对`Module A`.
`Module A`取决于`module1`, `module2`, `module3`, ...
`Module B`取决于`Module A`

但`Module B`没有找到任何对`module1`, `module2`, ...
现在，如果我添加到`Module B`, `module1`...`module2`它将影响`Module B`project.properties 与 Eclipse 混淆。我可以从 Eclipse 得到这个

> [Dex Loader] 无法执行 dex：多个 dex 文件定义
> 模块 B] 转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件

IntelliJ 中从本身包含多个依赖项的模块添加依赖项的正确方法是什么？

**编辑** 我遵循 CrazyCoder 的指示。然后 IntelliJ 告诉

> Android Dex：[Module B] UNEXPECTED TOP-LEVEL EXCEPTION：Android Dex：[Module B] java.lang.IllegalArgumentException：已添加：Landroid/support/v4/app/ShareCompat$ShareCompatImplJB; Android Dex: [Module B] at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123) Android Dex: [Module B] at com.android.dx.dex.file.DexFile.add( DexFile.java:163)

一些`module1`, `module2`... 在 libs 文件夹中包含 android-support-v4.jar。jar 依赖项已添加但未导出。仅`Module A`导出其库（包含 libs 文件夹中的所有 jar）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:34:11.537

感谢 CrazyCoder，我从`Module A`

![在此处输入图像描述](https://i.stack.imgur.com/GrYcV.png)

对于同一个 .jar 的多个依赖项。我只是将 android-support-v4.jar 设置为`Project Library`. 阅读 Intellij 后[： android-support-v4.jar 包含在 actionBarSherlock 和 Project => IllegalArgumentException](https://stackoverflow.com/questions/14099291/intellij-android-support-v4-jar-in-included-in-actionbarsherlock-and-project)中。我在引用它的所有模块中将范围从 android-support-v4 更改为`Compile`。`Provided`

# java - 在XML java中添加内容而不删除原始内容

> ID：16186990
> 
> 赞同：0
> 
> 时间：2013-04-24T08:23:52.900
> 
> 标签：java, xml, dom, transformer

我想在 XML 文件中添加新内容，而不删除原始内容。我怎样才能做到这一点。

原始 XML：

```
<collection>
<data>
<type>CHD</type>
<values>
<entry key="LOGICALCARDID">0000000</entry>
<entry key="PRIMARYKEYVALUE">001490499026060000000</entry>
<entry key="PRIMARYKEYOFFSET">53</entry>
</values></data>
<data>
<type>RECORD</type>
<values>
<entry key="LOGICALCARDID">0000000</entry>
<entry key="MAP_DP_EMV_SR">DDA_411</entry>
<entry key="MAP_SK_SVC_PERSO_SR">9864591</entry>
<entry key="MAP_DP_GRAPH_SR">GRAPH_PROFILE_1</entry>
</values></data>
<data>
<type>LOTPACK</type>
<values>
<entry key="LOT_PACK_GROUP">1</entry>
<entry key="GROUP_ID">GRP001</entry>
<entry key="GROUP_INDEX">1</entry>
<entry key="GROUP_QTY">3</entry>
<entry key="LOTPACKTYPE">64</entry>
</values></data>
</collection> 
```

爪哇：

```
public class program {

/**
 * @param args
 */
public static void main(String[] args) {
    try {
        String xmlFile = "order.xml";
        String xmlFile2 = "order2.xml";
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(xmlFile);

        Node LOGICALCARDID = doc.getElementsByTagName("entry").item(0);
        Node PRIMARYKEYVALUE = doc.getElementsByTagName("entry").item(1);
        Node LOGICALCARDID1 = doc.getElementsByTagName("entry").item(3);

        for(int i = 1; i < 20; i++){
            String number = Integer.toString(i);
            int length = number.length();
            if(length == 1){
                String digit = "000000"+number;
                LOGICALCARDID.setTextContent(digit);
                PRIMARYKEYVALUE.setTextContent("00149049902606"+digit);
                LOGICALCARDID1.setTextContent(digit);
            }else if (length == 2){
                String digit = "00000"+number;
                LOGICALCARDID.setTextContent(digit);
                PRIMARYKEYVALUE.setTextContent("00149049902606"+digit);
                LOGICALCARDID1.setTextContent(digit);
            }else if (length == 3){
                String digit = "0000"+number;
                LOGICALCARDID.setTextContent(digit);
                PRIMARYKEYVALUE.setTextContent("00149049902606"+digit);
                LOGICALCARDID1.setTextContent(digit);
            }else if (length == 4){
                String digit = "000"+number;
                LOGICALCARDID.setTextContent(digit);
                PRIMARYKEYVALUE.setTextContent("00149049902606"+digit);
                LOGICALCARDID1.setTextContent(digit);
            }

        }
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("order2.xml"));
    transformer.transform(source, result);

}catch (SAXParseException err) {
        System.out.println("** Parsing error" + ", line "
                + err.getLineNumber() + ", uri " + err.getSystemId());
        System.out.println(" " + err.getMessage());

    } catch (SAXException e) {
        Exception x = e.getException();
        ((x == null) ? e : x).printStackTrace();

    } catch (Throwable t) {
        t.printStackTrace();
    }

} 
```

预期的 XML：

```
<collection>
<data>
<type>CHD</type>
<values>
<entry key="LOGICALCARDID">0000000</entry>
<entry key="PRIMARYKEYVALUE">001490499026060000000</entry>
<entry key="PRIMARYKEYOFFSET">53</entry>
</values></data>
<data>
<type>RECORD</type>
<values>
<entry key="LOGICALCARDID">0000000</entry>
<entry key="MAP_DP_EMV_SR">DDA_411</entry>
<entry key="MAP_SK_SVC_PERSO_SR">9864591</entry>
<entry key="MAP_DP_GRAPH_SR">GRAPH_PROFILE_1</entry>
</values></data>
<data>
<type>LOTPACK</type>
<values>
<entry key="LOT_PACK_GROUP">1</entry>
<entry key="GROUP_ID">GRP001</entry>
<entry key="GROUP_INDEX">1</entry>
<entry key="GROUP_QTY">3</entry>
<entry key="LOTPACKTYPE">64</entry>
</values></data>
</collection>

<collection>
<data>
<type>CHD</type>
<values>
<entry key="LOGICALCARDID">0000001</entry>
<entry key="PRIMARYKEYVALUE">001490499026060000001</entry>
<entry key="PRIMARYKEYOFFSET">53</entry>
</values></data>
<data>
<type>RECORD</type>
<values>
<entry key="LOGICALCARDID">0000001</entry>
<entry key="MAP_DP_EMV_SR">DDA_411</entry>
<entry key="MAP_SK_SVC_PERSO_SR">9864591</entry>
<entry key="MAP_DP_GRAPH_SR">GRAPH_PROFILE_1</entry>
</values></data>
<data>
<type>LOTPACK</type>
<values>
<entry key="LOT_PACK_GROUP">1</entry>
<entry key="GROUP_ID">GRP001</entry>
<entry key="GROUP_INDEX">1</entry>
<entry key="GROUP_QTY">3</entry>
<entry key="LOTPACKTYPE">64</entry>
</values></data>
</collection> 
```

直到 0000019 .. 但我不知道如何在不删除原始内容的情况下添加 XML。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:51:14.923

**1)**获取根元素

```
Node Collection = doc.getElementsByTagName("Collection").item(0); 
```

**2)**创建其他元素

```
Node data = doc.createElement("data");

Node type = doc.createElement("type");

Node values = doc.createElement("values"); 
```

对剩余的元素重复这些

**3）**然后将子元素附加到其直接父元素。

```
Collection.appendChild(data)

data.appendChild("type");

type.appendChild("values"); 
```

对剩余的子元素重复这些操作

# scala - 添加未在其 URL 中指定 SBT 版本的 SBT 插件

> ID：16186993
> 
> 赞同：4
> 
> 时间：2013-04-24T08:24:08.173
> 
> 标签：scala, sbt, specs2

Specs2 没有在其 URL 中定义 SBT 版本： [https ://oss.sonatype.org/content/repositories/releases/org/specs2/specs2_2.9.2/1.12.3/](https://oss.sonatype.org/content/repositories/releases/org/specs2/specs2_2.9.2/1.12.3/)

在尝试解决它时，这会导致 SBT 出现问题......

```
[warn] ==== sonatype-snapshots: tried
[warn]   https://oss.sonatype.org/content/repositories/snapshots/org/specs2/specs2_2.9.2_0.12/1.12.3/specs2-1.12.3.pom
[warn] ==== sonatype-releases: tried
[warn]   https://oss.sonatype.org/content/repositories/releases/org/specs2/specs2_2.9.2_0.12/1.12.3/specs2-1.12.3.pom 
```

如何让 SBT 解析正确的 URL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-09T01:50:21.110

specs2 不是 sbt 插件，它是[用于编写可执行软件规范的 Scala 库](http://etorreborre.github.io/specs2/)。

有两个级别的 sbt 项目。您自己的项目（现在称为“应用程序”）和构建项目定义本身（称为“构建”）。

## 库依赖

当应用程序在编译或测试期间使用其他库时，它们被称为库依赖项（或简称“deps”）。这些 dep 在`build.sbt`（或`*.sbt`或`project/*.scala`）中声明如下：

```
libraryDependencies += "org.specs2" %% "specs2" % "2.2" % "test" 
```

也就是说，使用sbt`%%`发布的工件会自动附加 Scala 二进制版本的后缀，例如`_2.10`在 Maven 上。这是因为（与 Java 不同）并非所有 Scala 版本都是二进制兼容的。Scala 2.9.1 和 2.9.2 不兼容，所以它们都有不同的后缀`_2.9.1`和`_2.9.2`，但是 Scala 2.10.x 在系列之间都是兼容的，所以它们都给出了`_2.10`。

然而不幸的是，Scala 版本需要不同版本的 Specs2，您可能需要执行以下操作：

```
libraryDependencies <+= scalaVersion({
  case "2.9.2"                  => "org.specs2" %% "specs2" % "1.12.3" % "test"
  case x if x startsWith "2.10" => "org.specs2" %% "specs2" % "2.2" % "test"
}) 
```

有关更多详细信息，请查看[入门](http://www.scala-sbt.org/release/docs/Getting-Started/index.html)指南。

## sbt 插件

构建可以依赖于特殊类型的库来扩展其功能，它们是 sbt 插件。这些在`project/plugins.sbt`（或`project/*.sbt`）中声明如下：

```
addSbtPlugin("com.eed3si9n" % "sbt-buildinfo" % "0.2.5") 
```

由于 sbt 插件依赖于 sbt 版本和构建使用的 Scala 版本，因此这两个信息都以某种方式编码到已发布的工件路径中。在 Ivy 上，它们表示为文件夹名称，但在 Maven 上，它们表示为后缀：

*   [http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/com.eed3si9n/sbt-buildinfo/scala_2.9.2/sbt_0.12/0.2.5/](http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/com.eed3si9n/sbt-buildinfo/scala_2.9.2/sbt_0.12/0.2.5/)
*   [https://oss.sonatype.org/content/repositories/public/org/scalaxb/sbt-scalaxb_2.10_0.13/1.1.2/](https://oss.sonatype.org/content/repositories/public/org/scalaxb/sbt-scalaxb_2.10_0.13/1.1.2/)

# ios - 仅每 5 分钟获取一次 GPS 位置

> ID：16186996
> 
> 赞同：0
> 
> 时间：2013-04-24T08:24:13.893
> 
> 标签：ios

在我的位置应用程序实现的`didUpdateToLocation`方法中。此方法每秒调用一次并提供位置数据。但我不需要每秒获取位置，我只需要每 5 分钟触发一次此方法。是否有可能做到这一点？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //initialize location lisetener on Application startup
    self.myLocationManager = [[CLLocationManager alloc]init];
    self.myLocationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.myLocationManager.delegate = self;
    [self.myLocationManager startUpdatingLocation];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[INNOViewController alloc] initWithNibName:@"INNOViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[INNOViewController alloc] initWithNibName:@"INNOViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    /*
    if(self.executingInBackground)
    {
        NSLog(@"Aplication running in background");
    }
    else
    {
        NSLog(@"Aplication NOT running in background");
    }
     */

    //NSLog(@"new location->%@ and old location -> %@",newLocation,oldLocation);

    NSString *urlAsString = @"http://www.apple.com";

    NSURL *url=[NSURL URLWithString:urlAsString];

    NSURLRequest *urlRequest=[NSURLRequest requestWithURL:url];

    NSOperationQueue *queue = [[NSOperationQueue alloc]init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

        if ([data length] > 0 && error == nil) {
            NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
            NSLog(@"Downloaded html -> %@",html);
            //NSLog(@"Downloaded successfully");
        }
        else if([data length] == 0 && error == nil)
        {
            NSLog(@"Nothing downloaded");
        }
        else
        {
            NSLog(@"Error occured -> %@",error);
        }

    }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:30:59.190

它之所以这么快被调用是因为您要求`kCLLocationAccuracyBest`. 后退一点。它不是基于时间，而是基于增量距离。在该精度下，即使距离的微小变化也会在接收良好的区域触发更新。使用不同的值。

同样，这些方法并不意味着基于时间使用。它们旨在基于*delta distance*使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T08:30:37.733

降低准确率和距离过滤器，这将降低调用该方法的频率
如果您希望在 5 分钟后调用它，那么您可以强制每五分钟调用一次方法 stopupdating 和 startupdating

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T08:31:07.897

代替：

```
[self.myLocationManager startUpdatingLocation]; 
```

利用：

```
[self.myLocationManager startMonitoringSignificantLocationChanges]; 
```

如果您使用：`startUpdatingLocation`它将每秒调用委托方法。当您使用`startMonitoringSignificantLocationChanges`它时，当位置发生重大变化时或在 5 分钟间隔后调用委托方法。

* * *

> **startMonitoringSignificantLocationChanges**
> 
> 根据重大的位置变化开始生成更新。 `- (void)startMonitoringSignificantLocationChanges`
> 
> **讨论**
> 
> 此方法以异步方式启动位置事件的传递，并在您调用它后立即返回。位置事件被传递到您的委托的 locationManager:didUpdateLocations: 方法。要传递的第一个事件通常是最近缓存的位置事件（如果有），但在某些情况下可能是较新的事件。获取当前位置修复可能需要几秒钟的时间，因此请务必检查委托方法中位置事件的时间戳。
> 
> 在返回当前位置定位后，接收器仅在检测到用户位置发生重大变化时才生成更新事件。例如，当设备与不同的蜂窝塔相关联时，它可能会生成一个新事件。它不依赖 distanceFilter 属性中的值来生成事件。连续多次调用此方法不会自动生成新事件。但是，在两者之间调用 stopMonitoringSignificantLocationChanges 确实会导致在您下次调用此方法时发送一个新的初始事件。
> 
> 如果您启动此服务并且您的应用程序随后终止，则系统会在新事件到达时自动将应用程序重新启动到后台。在这种情况下，传递给应用程序委托的 locationManager:didUpdateLocations: 方法的选项字典包含键 UIApplicationLaunchOptionsLocationKey 以指示您的应用程序是由于位置事件而启动的。重新启动后，您仍然必须配置位置管理器对象并调用此方法以继续接收位置事件。当您重新启动位置服务时，当前事件会立即传递给您的委托。此外，即使在您启动位置服务之前，您的位置管理器对象的位置属性也会填充最新的位置对象。
> 
> 除了实现 locationManager:didUpdateLocations: 方法的委托对象之外，它还应该实现 locationManager:didFailWithError: 方法来响应潜在的错误。
> 
> **注意：只要设备从之前的通知移动 500 米或更远，应用程序就会收到通知。它不应期望通知的频率超过每五分钟一次。如果设备能够从网络检索数据，则位置管理器更有可能及时传递通知。**
> 
> 在 CLLocationManager.h 中声明

参考[CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T08:32:21.073

您可以使用`startMonitoringSignificantLocationChanges`而不是`startUpdatingLocation`. 只有当用户从最后一个位置移动约 500 米时，您才会更新