# StackOverflow 问答 16061000-16061999

# ios - 如何在加载之前在中心设置宽度和位置 ModalDialog？

> ID：16061000
> 
> 赞同：0
> 
> 时间：2013-04-17T13:11:46.370
> 
> 标签：ios, objective-c, modal-dialog

我在我的 viewController 中创建了一个模式对话框。

```
dialogViewController *dialog = [[dialogViewController alloc] init];

dialog.modalPresentationStyle = UIModalPresentationFormSheet;
dialog.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
dialog.indexPath = indexPath;
dialog.campaignArray = self.campaignArray;

dialog.view.superview.frame = CGRectMake(dialog.view.superview.frame.origin.x+250, dialog.view.superview.frame.origin.y, dialog.view.superview.frame.size.width-250, dialog.view.superview.frame.size.height);

[self presentViewController:dialog animated:YES completion:nil]; 
```

以上更改了模态对话框的宽度，但不更改 x 位置。它在 modalDialog 中工作，但随后用户可以看到它正在调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:24:35.173

如果你想使用

```
UIModalPresentationFormSheet 
```

控制器将居中。其中包含非常具体的格式。如果你想要任何不同的东西，你将不得不建立自己的。

> 呈现的视图的宽度和高度小于屏幕的宽度和高度，并且视图在屏幕上居中。如果设备处于横向且键盘可见，则视图的位置会向上调整，以便视图保持可见。所有未覆盖的区域都变暗，以防止用户与其交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:30:34.850

尝试这个：

```
dialogViewController *dialog = [[dialogViewController alloc] init];

dialog.modalPresentationStyle = UIModalPresentationFormSheet;
dialog.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
dialog.indexPath = indexPath;
dialog.campaignArray = self.campaignArray;

[self presentViewController:dialog animated:YES completion:nil];

CGRect dlgFrame  = dialog.view.superview.frame;
dlgFrame.size.width -= 250.0;
dialog.view.superview.frame = dlgFrame; 
```

# c# - 如何在两个 DataGridView 控件之间画线

> ID：16061001
> 
> 赞同：2
> 
> 时间：2013-04-17T13:11:47.097
> 
> 标签：c#, winforms

我在窗口窗体上有两个网格，当用户单击第一个网格单元格时，我需要通过单元格之间的线从一个网格到另一个网格显示映射，并且此功能适用于滚动条，这意味着行位置将根据单元格位置而改变当用户移动垂直滚动条时。

请使用下面的链接查看图像以获得更多说明。

[http://s8.postimg.org/49s7i2lvp/Mapping.png](http://s8.postimg.org/49s7i2lvp/Mapping.png)

感谢您提供任何帮助，并在此先感谢您 向Shailesh 致以最诚挚的
问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:00:00.473

好的。我将其发布为答案，因为 OP 要求它。

这是我的 WPF 对此的看法：

```
<Window x:Class="MiscSamples.DataGridConnectors"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DataGridConnectors" Height="300" Width="300">
    <Grid x:Name="Root">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <ItemsControl ItemsSource="{Binding VisibleConnectors}" Grid.ColumnSpan="3">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Line X1="{Binding StartPoint.X}"
                          Y1="{Binding StartPoint.Y}"
                          X2="{Binding EndPoint.X}"
                          Y2="{Binding EndPoint.Y}"
                          Stroke="Black"
                          StrokeThickness="2"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <DataGrid ItemsSource="{Binding Items1}" x:Name="DG1" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Path=.}"/>
            </DataGrid.Columns>
        </DataGrid>

        <DataGrid ItemsSource="{Binding Items2}" x:Name="DG2" AutoGenerateColumns="False" Grid.Column="2">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Path=.}"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Column="1">
            <Button Content="Sequential" Click="Sequential_Click"/>
            <Button Content="Random" Click="Random_Click"/>
        </StackPanel>
    </Grid>
</Window> 
```

代码背后：

```
 public partial class DataGridConnectors : Window
    {
        public List<string> Items1 { get; set; }

        public List<string> Items2 { get; set; }

        public List<DataItemConnector> Connectors { get; set; }

        private ObservableCollection<DataItemConnector> _visibleConnectors;
        public ObservableCollection<DataItemConnector> VisibleConnectors
        {
            get { return _visibleConnectors ?? (_visibleConnectors = new ObservableCollection<DataItemConnector>()); }
        }

        public DataGridConnectors()
        {
            Connectors = new List<DataItemConnector>();

            InitializeComponent();
            Loaded += OnLoaded;

            Items1 = Enumerable.Range(0, 1000).Select(x => "Item1 - " + x.ToString()).ToList();
            Items2 = Enumerable.Range(0, 1000).Select(x => "Item2 - " + x.ToString()).ToList();

            DataContext = this;
        }

        private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
        {
            var scrollviewer1 = FindDescendent<ScrollViewer>(DG1).FirstOrDefault();
            var scrollviewer2 = FindDescendent<ScrollViewer>(DG2).FirstOrDefault();

            if (scrollviewer1 != null)
                scrollviewer1.ScrollChanged += scrollviewer_ScrollChanged;

            if (scrollviewer2 != null)
                scrollviewer2.ScrollChanged += scrollviewer_ScrollChanged;
        }

        private void scrollviewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
        {
            var visiblerows1 = GetVisibleContainers(Items1, DG1.ItemContainerGenerator);
            var visiblerows2 = GetVisibleContainers(Items2, DG2.ItemContainerGenerator);

            var visibleitems1 = visiblerows1.Select(x => x.DataContext);
            var visibleitems2 = visiblerows2.Select(x => x.DataContext);

            var visibleconnectors = Connectors.Where(x => visibleitems1.Contains(x.Start) &&
                                                          visibleitems2.Contains(x.End));

            VisibleConnectors.Where(x => !visibleconnectors.Contains(x))
                             .ToList()
                             .ForEach(x => VisibleConnectors.Remove(x));

            visibleconnectors.Where(x => !VisibleConnectors.Contains(x))
                             .ToList()
                             .ForEach(x => VisibleConnectors.Add(x));

            foreach(var connector in VisibleConnectors)
            {
                var startrow = visiblerows1.FirstOrDefault(x => x.DataContext == connector.Start);
                var endrow = visiblerows2.FirstOrDefault(x => x.DataContext == connector.End);

                if (startrow != null)
                    connector.StartPoint = Point.Add(startrow.TransformToAncestor(Root).Transform(new Point(0, 0)), 
                                                     new Vector(startrow.ActualWidth + 5, (startrow.ActualHeight / 2)*-1));

                if (endrow != null)
                    connector.EndPoint = Point.Add(endrow.TransformToAncestor(Root).Transform(new Point(0, 0)),
                                                   new Vector(-5,(endrow.ActualHeight / 2 ) * -1));

            }

        }

        private static List<FrameworkElement> GetVisibleContainers(IEnumerable<object> source, ItemContainerGenerator generator)
        {
            return source.Select(generator.ContainerFromItem).Where(x => x != null).OfType<FrameworkElement>().ToList();
        }

        public static List<T> FindDescendent<T>(DependencyObject element) where T : DependencyObject
        {
            var f = new List<T>();
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(element); i++)
            {
                var child = VisualTreeHelper.GetChild(element, i);

                if (child is T)
                    f.Add((T)child);

                f.AddRange(FindDescendent<T>(child));
            }
            return f;
        }

        private void Sequential_Click(object sender, RoutedEventArgs e)
        {
            Connectors.Clear();
            Enumerable.Range(0, 1000).Select(x => new DataItemConnector() { Start = Items1[x], End = Items2[x] })
                                    .ToList()
                                    .ForEach(x => Connectors.Add(x));

            scrollviewer_ScrollChanged(null, null);
        }

        private void Random_Click(object sender, RoutedEventArgs e)
        {
            Connectors.Clear();
            var random = new Random();

            Enumerable.Range(500, random.Next(600, 1000))
                      .Select(x => new DataItemConnector()
                                    {
                                        Start = Items1[random.Next(0, 999)],
                                        End = Items2[random.Next(0, 999)]
                                    })
                      .ToList()
                      .ForEach(Connectors.Add);

            scrollviewer_ScrollChanged(null, null);
        }
    } 
```

连接器：

```
 public class DataItemConnector: PropertyChangedBase
    {
        public object Start { get; set; }
        public object End { get; set; }

        private Point _startPoint;
        public Point StartPoint
        {
            get { return _startPoint; }
            set
            {
                _startPoint = value;
                OnPropertyChanged("StartPoint");
            }
        }

        private Point _endPoint;
        public Point EndPoint
        {
            get { return _endPoint; }
            set
            {
                _endPoint = value;
                OnPropertyChanged("EndPoint");
            }
        }
    } 
```

支持两种方式绑定的基类：

```
public class PropertyChangedBase:INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            Application.Current.Dispatcher.BeginInvoke((Action) (() =>
                {
                    PropertyChangedEventHandler handler = PropertyChanged;
                    if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
                }));
        }
    } 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/Omxvo.png)

*   分辨率独立。尝试调整窗口大小并亲自查看。
*   代码真的很简单。后面的大部分代码实际上是支持示例的样板文件（生成随机值等）。
*   没有“所有者抽奖”，没有 P/Invoke。只是简单，简单的属性和`INotifyPropertyChanged`.
*   WPF 规则。只需将我的代码复制并粘贴到 a 中`File -> New Project -> WPF Application`，然后自己查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:24:45.303

就像是 ：

```
foreach (DataGridViewRow row in dataGrid.Rows)
{
    var cellValue = row.Cells["field"].Value;

    if (cellValue != null && cellValue.ToString() == "something")
    {
        dataGrid.Rows[row.Index].Selected = true;
        try
        {
            dataGrid.FirstDisplayedScrollingRowIndex = row.Index - 4;

        }
        catch (Exception execc)
        {
            dataGrid.FirstDisplayedScrollingRowIndex = row.Index;
        }
    }
} 
```

这个？

然后对我想的另一个网格使用相同的

# javascript - window.prompt 多行输入 JavaScript CSS

> ID：16061005
> 
> 赞同：7
> 
> 时间：2013-04-17T13:12:00.427
> 
> 标签：javascript, jquery, html, css

我正在尝试找到一种方法来制作等效于 的东西`window.prompt`，但它允许多行输入。

`z-index`我可以使用包含 a的 div 创建自己的`textArea`，但我希望 jQuery 或插件中有一些更优雅的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T13:27:10.837

您可以使用[jQuery 对话框](http://jqueryui.com/dialog/)来执行此操作。

这是一个例子：http: [//jsfiddle.net/RBKaZ/](http://jsfiddle.net/RBKaZ/)

使用这个 HTML

```
<div id="dialog">
    <p>Please enter your name</p>
    <textarea id="name"></textarea>
</div>
<label>Name entered: </label>
<label id="nameentered"></label>
<br />
<input type="button" id="open" value="Open Dialog" /> 
```

而这个jQuery：

```
$("#dialog").dialog({
    autoOpen: false,
    buttons: { 
        Ok: function() {
            $("#nameentered").text($("#name").val());
            $(this).dialog("close");
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    }
});

$("#open").click(function () {
    $("#dialog").dialog("open");
}); 
```

# jquery-ui - Json不显示建议的jQuery UI自动完成

> ID：16061009
> 
> 赞同：0
> 
> 时间：2013-04-17T13:12:05.877
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-ui-autocomplete

我在使用 jQueryUi 的自动完成组件时遇到了一些问题。不显示带有自动完成建议的列表。

我已经测试了以下代码（来自[jQuery UI](http://jqueryui.com/autocomplete/#remote-jsonp "jQuery 用户界面")），尽管 servlet 正在发送一个 JSON 对象并且“数据”变量正在讲述它，但组件仍然没有显示建议列表。

我还尝试了使用简单列表作为源的组件（[如这里](http://jqueryui.com/autocomplete/#default)），它运行良好。

你知道会发生什么吗？

```
<script>
$(function() {
         var cache = {};
            $( "#bear" ).autocomplete({
                minLength: 2,
                source: function( request, response ) {

                var term = request.term;                
                if ( term in cache ) {
                     response( cache[ term ] );
                     return;
                }

                $.getJSON( "/animals/MaintainMamals?operation=14", request, function( data, status, xhr ) {
                  cache[ term ] = data;
                  response( data );
                });

              }
            });
          });
</script>

<form>
    <div class="ui-widget">
       <label for="bear">Bear name (type a piece of name): </label>
       <input id="bear" name="bear" class="text ui-widget-content ui-corner-all"/>
    </div>
</form> 
```

测试中使用的 Json 对象（我尝试了一个简单的 json 构建的东西，它只使用一个引用“name”属性的字符串，具有相同的 [bad] 结果）：

```
[
  {
    "id": 1234567,
    "name": "Yogi Bear",
    "activity": {
      "handler": {
        "interfaces": [
          {}
        ],
        "constructed": true,
        "persistentClass": {},
        "getIdentifierMethod": {
          "clazz": {},
          "slot": 2,
          "name": "getCod",
          "returnType": {},
          "parameterTypes": [],
          "exceptionTypes": [],
          "modifiers": 1,
          "root": {
            "clazz": {},
            "slot": 2,
            "name": "getId",
            "returnType": {},
            "parameterTypes": [],
            "exceptionTypes": [],
            "modifiers": 1,
            "override": false
          },
          "override": false
        },
        "setIdentifierMethod": {
          "clazz": {},
          "slot": 3,
          "name": "setId",
          "returnType": {},
          "parameterTypes": [
            {}
          ],
          "exceptionTypes": [],
          "modifiers": 1,
          "root": {
            "clazz": {},
            "slot": 3,
            "name": "setId",
            "returnType": {},
            "parameterTypes": [
              {}
            ],
            "exceptionTypes": [],
            "modifiers": 1,
            "override": false
          },
          "override": false
        },
        "overridesEquals": false,
        "entityName": "com.zoo.Activity",
        "id": 7105,
        "initialized": false,
        "readOnly": false,
        "unwrap": false
      }
    }
  }
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:26:57.277

自动完成小部件希望数组中的每个项目都有一个**`label`**属性、一个**`value`**属性或两者兼有。由于您的数据都没有，您可以：

1.  调整您的服务器端数据源以返回满足该条件的项目，或者
2.  发出请求后，转换服务器端代码中的数据以匹配条件。

我只能提供#2 的答案，因为我没有看到您的服务器端代码，所以您可以这样做：

```
$(function() {
    var cache = {};

    $( "#bear" ).autocomplete({
        minLength: 2,
        source: function( request, response ) {
            var term = request.term;                
            if (term in cache) {
                 response(cache[ term ]);
                 return;
            }

            $.getJSON("/animals/MaintainMamals?operation=14", request, function (data, status, xhr) {
                /* Add a `label` property to each item */
                $.each(data, function (_, item) {
                    item.label = item.name;
                });

                cache[term] = data;
                response(data);
            });
        }
    });
}); 
```

[这是一个伪造 AJAX 请求的示例](http://jsfiddle.net/Aa5nK/39/)——除了它应该与您的情况类似。

# php - preRemove 永远不会被称为学说事件侦听器

> ID：16061013
> 
> 赞同：4
> 
> 时间：2013-04-17T13:12:32.623
> 
> 标签：php, symfony, doctrine, symfony-2.1, event-listener

我有一个事件订阅者，但是 preRemove 函数永远不会被调用，而是会调用其他事件。有什么我做错了吗？

```
class DocumentSubscriber implements EventSubscriber
{
    private $serviceContainer;

    public function getSubscribedEvents()
    {
        return array(
            'postUpdate',
            'preRemove',
        );
    }

    public function setServiceContainer($serviceContainer) {
        $this->serviceContainer = $serviceContainer;
    }

    public function preRemove(LifecycleEventArgs $args)
    {

    }

    public function postUpdate(LifecycleEventArgs $args)
    {

    }
} 
```

# c++ - 纹理 openGl。C++, qt

> ID：16061016
> 
> 赞同：2
> 
> 时间：2013-04-17T13:12:40.577
> 
> 标签：c++, qt, opengl

我正在尝试用草纹理覆盖我的地形（由高度图制成），但它不能正常工作。我什至无法在简单的 GL_QUAD 上获得纹理，结果是多色网。

```
void GLWidget::initializeGL()
{
//
    glEnable(GL_TEXTURE_2D);
//
} 
```

在 QGLwidget 我打电话

```
openTextureImg(); 
```

openTextureImg() 的代码：

```
bool GLWidget::openTextureImg()
{

QString fileName = QFileDialog::getOpenFileName(this,tr("Open Image"),QDir::homePath(), tr("Image Files (*.png *.tga *.bmp)"));
QImage textureImg;

if (!fileName.isEmpty())
{

    textureImg = QImage(fileName, "PNG");
    qDebug()<<"image loaded";

    textureImg = QGLWidget::convertToGLFormat( textureImg );
    glGenTextures( 1, &texHandle );
    glBindTexture( GL_TEXTURE_2D, texHandle );

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, textureImg.width(), textureImg.height(), 0, GL_RGB,
                 GL_UNSIGNED_BYTE, textureImg.bits());
    //glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glBindTexture( GL_TEXTURE_2D, 0 );

    return true;
}
return false;

} 
```

在这里，我正在尝试绘制一个四边形：

```
 void GLWidget::drawRect()
{
    glColor3f(0.5,0.5,1.0);
    glBindTexture(GL_TEXTURE_2D,texHandle);
glBegin(GL_QUADS);
    glTexCoord2d(0.0,0.0); glVertex2d(0.0,0.0);
    glTexCoord2d(1.0,0.0); glVertex2d(1000.0,0.0);
    glTexCoord2d(1.0,1.0); glVertex2d(1000.0,1000.0);
    glTexCoord2d(0.0,1.0); glVertex2d(0.0,1000.0);

    glEnd();

} 
```

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:37:02.950

从文档：

> `QImage QGLWidget::convertToGLFormat ( const QImage & img ) [static]`
> 
> 将图像 img 转换为 OpenGL 函数（例如 glTexImage2D()）所期望的未命名格式。返回的图像不能用作 QImage，但 QImage::width()、QImage::height() 和 QImage::bits() 可以与 OpenGL 一起使用。使用的 GL 格式是**GL_RGBA** [强调我的]。

在您调用`glTexImage2D`使用`GL_RGBA`而不是`GL_RGB`.

# sql - 将数据从 Excel 移动到 SQL Server 表

> ID：16061019
> 
> 赞同：9
> 
> 时间：2013-04-17T13:12:55.727
> 
> 标签：sql, sql-server, excel, date

我有一个非常简单的 excel 表：

![在此处输入图像描述](https://i.stack.imgur.com/i3YOl.png)

我想将此数据放入 SQL Server 中的表中。我还想添加一个包含日期的字段。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T14:02:09.543

Create a table in SQL server with the same number of fields that you have in the spreadsheet.

In SQL Server Management Studio Object Explorer you can right click the table you created and select "Edit top 200 rows". Highlight the data you want to copy in Excel and right click -> copy. Right click the space to the left of the first row in the SSMS edit tabe widow and paste.

After the import check the SQL table to make sure it has the same amount of rows as the spreadsheet.

You can add the date column to the SQL table after you do the data import. Or add it in the spreadsheet before you do the import.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T13:23:42.637

您可以先在 SQL Server 中使用添加的字段创建表，然后使用 Mangement Studio 中的导入向导导入 excel 文件。或者您在导入任务期间创建表，稍后添加新字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:21:55.910

选项1：

读取 IDataReader 中的数据，然后调用存储过程插入数据。

[http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/](http://granadacoder.wordpress.com/2009/01/27/bulk-insert-example-using-an-idatareader-to-strong-dataset-to-sql-server-xml/)

当我有~~很多~~要导入的行并且我想在数据库之外验证它们时，我会使用上述方法。

选项 2：

[http://support.microsoft.com/kb/321686](http://support.microsoft.com/kb/321686)

或搜索：

```
Select  FROM OPENDATASOURCE Excel 
```

选项 N：

还有其他选择。

这取决于你喜欢什么，你想投入多少时间，是“一次性”还是你必须每天为 333 个文件做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-27T18:26:55.323

我的解决方案是将 .xlsx 转换为 .csv，然后使用[此站点](http://www.convertcsv.com/csv-to-sql.htm)将 .csv 转换为 .sql。然后我在 sql server 中运行 sql 文件并生成我的表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T10:38:23.570

It can be also be done by creating a batch file.

For this you already need to have a table created on server with the same data structure as you have in excel.

Now using BCP you can import that data from the excel file and insert it into sql table.

BCP utility function

```
sqlcmd -S IP -d databasename -U username -P passwd -Q "SQL query mostly it should be truncate query to truncate the created table"
bcp databasename.dbo.tablename in "Excel file path from where you need to input the data" -c -t, -S Server_IP -U Username -P passwd -b provide batch size 
```

You can refer to the link below for more options on the bcp utility:

[https://msdn.microsoft.com/en-IN/library/ms162802.aspx](https://msdn.microsoft.com/en-IN/library/ms162802.aspx)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-17T13:20:16.087

打开您的 SQL Server 界面软件，将日期字段添加到表中。

转到excel，添加日期列，复制excel数据。

转到您的 SQL 服务器界面软件并使用该功能从剪贴板导入数据。（具有此功能的 SQL 服务器接口软件例如 Database4.net，但如果您有另一个具有该功能的软件包，请使用它。）

* * *

或者使用带有 DOA 或 ADO 的 VBA 与 SQL 服务器数据库交互，并使用 SQL 语句添加字段并将数据复制到表中

# .net-4.0 - 适用于 Sybase DB 的 .Net 1.1 和 .Net 4.0 中的 IDataReader 问题

> ID：16061021
> 
> 赞同：0
> 
> 时间：2013-04-17T13:13:09.143
> 
> 标签：.net-4.0, sybase, .net-1.1, oledbconnection, idatareader

我有一个 sybase 数据库，它可以正确获取查询结果，如下所示......

```
select   
    S.ipoInternalID,  
    clientAccount,  
    clientPrice,  
    clientAccountType,  
    interestOnLoan = 
               CASE WHEN useHIBOR = 1 then  
                    ROUND(financingAmount * (fixedRate + spreadRate) * 
                            I.noOfDaysForInterest/365/100,2)
               ELSE 
                    ROUND(financingAmount * (I.fundingRate+ spreadRate) * 
                           I.noOfDaysForInterest/365/100,2) END,
    useHIBORSTR = 
               CASE WHEN useHIBOR = 1 then
                    "LOCK-IN RATE + SPREAD" 
               ELSE
                    "COST OF FUNDING + SPREAD" END,
from subscription S, iPO I, allocation A  
where   
            S.ipoInternalID = @ipoInternalID  and  
            I.ipoInternalID = @ipoInternalID  and  
            A.ipoInternalID = @ipoInternalID  and
            S.ccassID *= A.ccassID  
order by  S.ccassID 
```

`interestOnLoan`请注意上面计算字段的方式。

现在，当我在 SQL Advantage 工具中运行此查询时，它运行良好并为我提供了`interestOnLoan`. 当我使用通过 OleDB 加载此查询的 .Net 1.1 API 运行此查询时，它运行良好...

```
myCommand.CommandText = myQuery;
myAdapter.SelectCommand = myCommand;
int i = myAdapter.Fill(resultSet); 
```

我的结果集填充正常。

但是当我在 .net 4.0 中执行上述代码时，结果集错误为

> **“对于 Decimal，值要么太大要么太小。”**

它存在问题的值是因为我还通过如下方式`interestOnLoan`执行了命令...`IDataReader`

```
 using (var dr = myCommand.ExecuteReader())
  {
         resultSet.Tables.Add(ConvertDataReaderToTableManually(dr));
  }

private static DataTable ConvertDataReaderToTableManually(IDataReader dr) {
    var dt = new DataTable();
    var dtSchema = dr.GetSchemaTable();
    var listCols = new List<DataColumn>();

    if (dtSchema != null) {
        foreach (DataRow drow in dtSchema.Rows) {
        var columnName = Convert.ToString(drow["ColumnName"]);
        var t = (Type) (drow["DataType"]);
        var column = new DataColumn(columnName, t);
        column.Unique = (bool) drow["IsUnique"];
        column.AllowDBNull = (bool) drow["AllowDBNull"];
        column.AutoIncrement = (bool) drow["IsAutoIncrement"];
        listCols.Add(column);
        dt.Columns.Add(column);
        }
    }

    // Read rows from DataReader and populate the DataTable
    int j = 0;

    while (dr.Read()) {
        j++;
        var dataRow = dt.NewRow();
        for (int i = 0; i < listCols.Count; i++) {
        try {
            dataRow[((DataColumn)listCols[i])] = dr[i];
        } catch (Exception ex1) { }         
        }
        dt.Rows.Add(dataRow);
    }

    return dt;
    } 
```

**在这里，它在从 dr[i] 读取**`dataRow[((DataColumn)listCols[i])] = dr[i]`问题的地方出错；

 **观察到`i`第 th 列不过是**interestOnLoan**。

所以不知何故.Net 4.0 无法读取这个值。它可以正确读取其他十进制值，例如`clientPrice`.

为什么会出现这种情况......

另外我想问一下，有什么方法可以默认加载`DataReader`as `Double`（而不是`Decimal`）中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:46:52.003

我没有得到 .NET 4.0 对上述查询有问题的原因，但是当我如下更改查询时，它在（.Net 1.1 和 4.0）中都有效

```
select   
  S.ipoInternalID,  
  clientAccount,  
  clientPrice,  
  clientAccountType,  
  interestOnLoan = ROUND(
     (CASE WHEN useHIBOR = 1 THEN
           ((financingAmount*(fixedRate + spreadRate) * .noOfDaysForInterest)/365.0)
           ELSE 
           ((financingAmount*(I.fundingRate+spreadRate)*I.noOfDaysForInterest)/365.0)
     END) / 100.0, 2),
  useHIBORSTR = 
                   CASE WHEN useHIBOR = 1 then
                   "LOCK-IN RATE + SPREAD" 
                   ELSE
                  "COST OF FUNDING + SPREAD" END,
 from subscription S, iPO I , allocation A  
 where   
                S.ipoInternalID = @ipoInternalID  and  
                I.ipoInternalID = @ipoInternalID  and  
                A.ipoInternalID = @ipoInternalID  and
                S.ccassID *= A.ccassID  
 order by  S.ccassID 
```**

# vba - 如何以编程方式从 word 文件中提取列表项并生成其他一些项？

> ID：16061023
> 
> 赞同：2
> 
> 时间：2013-04-17T13:13:16.877
> 
> 标签：vba, ms-office, ms-word

我不太了解 MS Office VBA。我在 word 文件中有大量（字面意思）测验问题。

任务是为学生创建试卷。Word 文件包含按章节分类的 900 个测验问题。下面是一个word文件的结构：

```
H1: Chapter Name
H2: Level-1 questions
li: Questsions (numbered list)
H3: Answer key to Level-1 questions
li: Answers to level-1 questions (numbered list)
H2: Level-2 questions
H3: Answer key to level-2 questions
li: Answers to level-2 questions (numbered list)

H1: Another Chapter Name
...
... 
```

我想从我的问题库中随机生成测试（其他单词文件）。几个条件是：

1.  必须从每个章节和每个级别中选择至少 1 个问题。
2.  已经选择的问题不能被选择到任何其他测试中。

此外，必须为生成的测试生成答案键。

**问题：**

1.  对 Office VBA 的期望是否过高？或者可以做到吗？
2.  怎么做？我需要调查什么？

我不知道该做什么或如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T19:48:13.087

老实说……在 MS Word 中使用 VBA 会很折磨人…… ;(

还有更高效的工具……你需要有一个数据库来存储问题、用户的答案和正确的答案。然后你需要编写提供伪随机抽奖系统的应用程序（见第二个条件：*已经选择的问题不能被选择到任何其他测试中。*）

示例代码：

*   [由 Azure 云提供支持的测验引擎](http://www.codeproject.com/Articles/584185/Quiz-Engine-powered-by-Azure-cloud)
*   [在线测验](http://www.codeproject.com/Articles/2786/Online-Quiz)

当然，您可以将 MS Word 文档视为“数据库”，但代码实现会非常困难。我是这样看的：

1.  逐段阅读
2.  检测格式

*   如果格式为标题 1，则将文本添加到章节的集合（或者数组或字典）中
*   如果格式为标题 2，则将文本添加到问题集合中
*   等等...对于答案和正确答案

*   遍历章节集合并随机选择问题*   将章节和问题保存到其他文件中，直到未达到问题数*   返回点号。3 直到测验/考试计数未达到

**结论：**忘记 VBA，选择 .NET 编程语言（C#、VB.NET）或使用免费的在线解决方案（例如：[互联网测验数据库](http://www.quizdatabase.com/)）。

# .net - 属性属性取决于 Windows 版本

> ID：16061025
> 
> 赞同：1
> 
> 时间：2013-04-17T13:13:23.223
> 
> 标签：.net, winforms, windows-8, character-encoding, propertygrid

我有一个奇怪的问题。

Win8 中的 WinForms 有一些关于 Encoding 1252 的错误（已确认）。

我有一个具有编码类公共属性的用户控件（用户可以在设计时选择编码）。

目前，当用户在 Win8 环境中使用我的控件的 dll 时，我想从属性网格中隐藏该属性。

我想基于：[操作系统版本](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx)

并希望通过 DesignerVisibility 属性隐藏属性。

所以我的问题是：当我通过 Environment.OSVersion 查找 Windows 版本时如何隐藏属性？

PS Idea 可能看起来很难看，我可以使用其他类或您可以建议的任何东西，我只需要在 Windows 8 的情况下将此属性隐藏在属性网格中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:24:45.247

在显示属性网格对象之前，您可以尝试这样的事情：

```
if (IsWindows8()
{
    TypeDescriptor.AddAttributes(typeof(Encoding), new BrowsableAttribute(false));
}
propertyGrid1.SelectedObject = myObject; 
```

# javascript - 循环生成JS函数

> ID：16061028
> 
> 赞同：0
> 
> 时间：2013-04-17T13:13:28.257
> 
> 标签：javascript, jquery, loops

我想在循环中生成 js 函数，但我有问题。拜托，谁能告诉我我的想法是对的？可以循环生成函数吗？

```
var sortItems =
                    ["sortable11","sortable12","sortable13","sortable14","sortable15",
                    "sortable21","sortable22","sortable23","sortable24","sortable25",
                    "sortable31","sortable32","sortable33","sortable34","sortable35",
                    "sortable41","sortable42","sortable43","sortable44","sortable45",
                    "sortable51","sortable52","sortable53","sortable54","sortable55"];
                for ( key in sortItems) {
                    $(function(){
                        $('#' + sortItems[key]).sortable({
                            update: function(event, ui)
                            {
                                $.ajax({
                                    type: "POST",
                                    url: "fun/saveOrder.php",
                                    dataType: "text",
                                    data: 
                                        {
                                        key:$(this).sortable('toArray')
                                    },
                                    cache: false,
                                    beforeSend: function(){$('#updateResult').html('updating');},
                                    success: function(data){$('#updateResult').html(data);},
                                    error: function(data){$('#updateResult').html(data);}
                                })
                                recalculate();
                            }
                        })
                    })
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:25:10.837

如果您首先生成一个 DOM 元素数组，则可以删除 for 循环：

```
var sortItems = ["sortable11","sortable12","sortable13","sortable14","sortable15",
                    "sortable21","sortable22","sortable23","sortable24","sortable25",
                    "sortable31","sortable32","sortable33","sortable34","sortable35",
                    "sortable41","sortable42","sortable43","sortable44","sortable45",
                    "sortable51","sortable52","sortable53","sortable54","sortable55"],
sortElements = $.map(sortItems, function(id) {
    return document.getElementById(id);
});

$(sortElements).sortable({
   // your options here
}); 
```

此外，您的循环`$(function() { ... }`在每次迭代时都在执行；它只需要一次，因此您可以将其包装在上面的代码中（或将此代码移动到`<body>`元素的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:32.333

可以在循环中生成/创建函数。可以做到的方法之一：

```
var test = ['name','phone','address'];
var test2 = [];
$.each(test,function(k,v){ test2[k] = function(){alert(v)}});

test2[0]; //alerts 'name'
test2[1]; //alerts 'phone'
test2[2]; //alerts 'address' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:19:13.587

从语法上讲，在 JavaScript 中循环生成函数是非常好的。

但不建议这样做：如果您有大量对象，生成大量闭包（这就是您正在创建的匿名函数的调用方式）可能会很慢。但我怀疑你会遇到这种情况。

不推荐它的另一个原因是，`key`您在函数内部使用的变量是对闭包之外完全相同的变量的引用，*因此*`var`在*实践*中使您的循环完全无用。也许检查一下[这个问题](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)，它可能会有所帮助。

 **在不了解您所面临的问题的情况下，很难说更多。**

# c# - Picturebox 变大红色 X 但我无法检测或修复它

> ID：16061029
> 
> 赞同：10
> 
> 时间：2013-04-17T13:13:28.143
> 
> 标签：c#, winforms, thread-safety, picturebox, aforge

我目前正在使用 AForge，并且有一个 on new frame 事件将帧作为位图发布到图片框中。90% 的时间它工作得很好......除非我在 winform 上摆弄一些东西。更改组合框、移动窗口或任何类似的操作都有可能导致图片框从视频切换到大红色 X。代码示例如下：

```
 private void connectButton_Click(object sender, EventArgs e)
    {
        try
        {
            cam = new VideoCaptureDevice(captureDevices[CameraSelectComboBox.SelectedIndex].MonikerString);
            cam.NewFrame -= Handle_New_Frame; //Just to avoid the possibility of a second event handler being put on
            cam.NewFrame += new AForge.Video.NewFrameEventHandler(Handle_New_Frame);
            cam.Start();
        }
        catch
        {
            MessageBox.Show("An error has occured with connecting to the specified webcam. The application will now close!");
            Application.Exit();
        }
    }

    private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
    {

        try
        {
            if (bitmap != null)
                bitmap.Dispose(); //Without this, memory goes nuts
            bitmap = new Bitmap(eventArgs.Frame);
        }
        catch { }

        //Draw some stuff on the images
        bitmap = AdjustBrightness(bitmap, brightnessMeter);
        bitmap = ApplyContrast(contrastMeter, bitmap);
        bitmap = Draw_Top_Line(bitmap);
        bitmap = Draw_Bottom_Line(bitmap);

        //Set the image into the picturebox
        this.Invoke((MethodInvoker)delegate
        {
            videoPictureBox1.Image = bitmap;
            frameRate++; //Keep track of the frame rate
        });

        GC.Collect(); //Without this, memory goes nuts

        this.Invoke((MethodInvoker)delegate {
            videoPictureBox1.Refresh(); //NOT NECESSARY. JUST TRYING TO FIX THE BIG RED X!
        });

        if (videoPictureBox1.Image == videoPictureBox1.ErrorImage)
        {
            cam.Stop(); //ALSO NOT NECESSARY> AGAIN, JUST TRYING TO FIX THE BIG RED X!
            cam.Start();
        }
    } 
```

我在 if (videoPictureBox1.Image == videoPictureBox1.ErrorImage) 上放了一个中断，它评估为假，即使大红色 X 向上，因为图像实际上被设置为位图。所以 cam.Stop() 和 cam.Start() 永远不会运行（不确定这是否会有所帮助，但我想我会试一试）。

videoPictureBox1.Refresh() 每次都在运行，但同样 - 它没有任何区别。还是有大红色的X。

正如我之前所说：如果我开始播放视频并且什么都不触摸，那么大红色 X 将永远不会发生。但是，当我开始更改组合框或拖动表单本身时，出现大红色 X 的机会呈指数级增长。有时我可以在组合框发生之前翻阅 10-12 次，其他时候它会在我单击组合框的第二次发生。:-\

任何人都可以解释这里发生了什么，并可能就修复它的最佳方法提供建议吗？我对线程仍然很陌生，所以我一直在努力弄清楚这里发生了什么以及解决问题的最佳方法！朝着正确方向的任何推动都将是一个巨大的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:41:57.873

最后，我在调用中将所有内容都包含在 Handle_New_Frame 中。它完全永久地消除了大红色 X 问题。>_>

```
private void Handle_New_Frame(object sender, NewFrameEventArgs eventArgs)
{
  this.Invoke((MethodInvoker)delegate
  {
    try
    {
        if (bitmap != null)
        {
            bitmap.Dispose(); //Without this, memory goes nuts
        }

        bitmap = new Bitmap(eventArgs.Frame);
    }
    catch { }

    //Draw some stuff on the images
    bitmap = AdjustBrightness(bitmap, brightnessMeter);
    bitmap = ApplyContrast(contrastMeter, bitmap);
    bitmap = Draw_Top_Line(bitmap);
    bitmap = Draw_Bottom_Line(bitmap);

    //Set the image into the picturebox
    this.Invoke((MethodInvoker)delegate
    {
        videoPictureBox1.Image = bitmap;
        frameRate++; //Keep track of the frame rate
    });

    GC.Collect(); //Without this, memory goes nuts
  });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-22T21:26:00.053

[肖恩·哈格里夫斯 (Shawn Hargreaves](http://www.shawnhargreaves.com/blog/winforms-and-the-big-red-x-of-doom.html) )对“厄运的大红色 X”有出色而简洁的描述。我发现它在处理突然显示红色“X”的 WinForm 组件的一般情况下非常有用。

总之：

*   这是由控件从`OnPaint`事件中抛出异常引起的。
*   一旦被抛出，该控件将继续显示红色 X 并跳过射击`OnPaint.`
*   要进行调试，请将调试器设置为捕获公共语言运行时异常，然后执行您通常执行的任何操作以获取红色 X。调试器将在它发生的地方停止，让您进行调查并希望找到防止它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T19:37:16.507

尝试在使用位图的地方使用克隆。 **例如**：

```
videoPictureBox1.Image = (Bitmap)bitmap.Clone(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T19:44:28.360

总结一下，这是一个经过测试的最低限度，即使在调整大小、开始、停止或分辨率改变时，对我来说也没有红叉。

```
 public partial class PictureBoxVideo : Form
   {
      public PictureBoxVideo()
      {
         InitializeComponent();
         var videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
         var videoSource = new VideoCaptureDevice(videoDevices[0].MonikerString);
         videoSource.NewFrame += Handle_Very_New_Frame;
         videoSource.Start();
      }

      private void Handle_Very_New_Frame(object sender, NewFrameEventArgs eventArgs)
      {
         this.Invoke((MethodInvoker)delegate {
            pictureBox.Image = new Bitmap(eventArgs.Frame);
         });
      }
   } 
```

请注意，我们调用 videoSource.Start(); 来自 GUI-（创建）线程，但回调处理程序（Handle_Very_New_Frame）是从视频（工作）线程调用的。

我认为这就是我们需要调用和新位图的原因，因此新的 bmp 也将从 gui 线程生成。但我只是在这里猜测，因为我无法拿出证据。

# java - 不可变对象的所有属性都必须是最终的吗？

> ID：16061030
> 
> 赞同：51
> 
> 时间：2013-04-17T13:13:29.567
> 
> 标签：java, immutability, final, java-memory-model

不可变对象必须具有所有属性`final`吗？

据我说不是。但我不知道，我是否正确。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-17T13:15:53.347

不可变对象（所有属性最终）和有效不可变对象（属性不是最终但不能更改）之间的主要区别是安全发布。

您可以在多线程上下文中安全地发布不可变对象，而不必担心添加同步，这要归功于[Java 内存模型为 final 字段提供的保证](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5-110)：

> final 字段还允许程序员在不同步的情况下实现线程安全的不可变对象。线程安全的不可变对象被所有线程视为不可变的，即使使用数据竞争在线程之间传递对不可变对象的引用也是如此。这可以提供安全保证，防止错误或恶意代码滥用不可变类。必须正确使用 final 字段以保证不变性。

附带说明一下，它还可以强制执行不可变性（如果您因为忘记了它应该是不可变的而尝试在未来版本的类中改变这些字段，它将无法编译）。

* * *

**澄清**

*   将对象的所有字段设为 final 并不会使其不可变 - 您还需要确保 (i) 它的状态不能改变（例如，如果对象包含 a `final List`，则没有变异操作（添加、删除... ) 必须在施工后完成) 和 (ii) 在施工期间不要让`this`逃跑
*   一个有效的不可变对象在安全发布后是线程安全的
*   不安全发布示例：

    ```
    class EffectivelyImmutable {
        static EffectivelyImmutable unsafe;
        private int i;
        public EffectivelyImmutable (int i) { this.i = i; }
        public int get() { return i; }
    }

    // in some thread
    EffectivelyImmutable.unsafe = new EffectivelyImmutable(1);

    //in some other thread
    if (EffectivelyImmutable.unsafe != null
        && EffectivelyImmutable.unsafe.get() != 1)
        System.out.println("What???"); 
    ```

    这个程序理论上可以打印`What???`。如果`i`是最终结果，那将不是法律结果。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-17T13:19:46.483

您可以仅通过封装轻松保证不变性，因此没有*必要*：

```
// This is trivially immutable.
public class Foo {
    private String bar;
    public Foo(String bar) {
        this.bar = bar;
    }
    public String getBar() {
        return bar;
    }
} 
```

但是，在某些情况下，您还*必须*通过封装来保证它，所以这还*不够*：

```
public class Womble {
    private final List<String> cabbages;
    public Womble(List<String> cabbages) {
        this.cabbages = cabbages;
    }
    public List<String> getCabbages() {
        return cabbages;
    }
}
// ...
Womble w = new Womble(...);
// This might count as mutation in your design. (Or it might not.)
w.getCabbages().add("cabbage"); 
```

这样做是为了捕捉一些微不足道的错误，并清楚地展示你的意图，但“所有字段都是最终的”和“类是不可变的”不是等价的陈述。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-17T13:15:08.993

不可变 = 不变。所以使属性最终是一个好主意。如果不是一个对象的所有属性都受到保护而不会被更改，我不会说该对象是不可变的。

但是，如果一个对象不为其私有属性提供任何设置器，它也是不可变的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-17T13:19:29.603

简单地声明一个对象`final`并不会使其本质上是不可变的。以这个[类](http://www.javapractices.com/topic/TopicAction.do?Id=29)为例：

```
import java.util.Date;

/**
* Planet is an immutable class, since there is no way to change
* its state after construction.
*/
public final class Planet {

  public Planet (double aMass, String aName, Date aDateOfDiscovery) {
     fMass = aMass;
     fName = aName;
     //make a private copy of aDateOfDiscovery
     //this is the only way to keep the fDateOfDiscovery
     //field private, and shields this class from any changes that 
     //the caller may make to the original aDateOfDiscovery object
     fDateOfDiscovery = new Date(aDateOfDiscovery.getTime());
  }

  /**
  * Returns a primitive value.
  *
  * The caller can do whatever they want with the return value, without 
  * affecting the internals of this class. Why? Because this is a primitive 
  * value. The caller sees its "own" double that simply has the
  * same value as fMass.
  */
  public double getMass() {
    return fMass;
  }

  /**
  * Returns an immutable object.
  *
  * The caller gets a direct reference to the internal field. But this is not 
  * dangerous, since String is immutable and cannot be changed.
  */
  public String getName() {
    return fName;
  }

//  /**
//  * Returns a mutable object - likely bad style.
//  *
//  * The caller gets a direct reference to the internal field. This is usually dangerous, 
//  * since the Date object state can be changed both by this class and its caller.
//  * That is, this class is no longer in complete control of fDate.
//  */
//  public Date getDateOfDiscovery() {
//    return fDateOfDiscovery;
//  }

  /**
  * Returns a mutable object - good style.
  * 
  * Returns a defensive copy of the field.
  * The caller of this method can do anything they want with the
  * returned Date object, without affecting the internals of this
  * class in any way. Why? Because they do not have a reference to 
  * fDate. Rather, they are playing with a second Date that initially has the 
  * same data as fDate.
  */
  public Date getDateOfDiscovery() {
    return new Date(fDateOfDiscovery.getTime());
  }

  // PRIVATE //

  /**
  * Final primitive data is always immutable.
  */
  private final double fMass;

  /**
  * An immutable object field. (String objects never change state.)
  */
  private final String fName;

  /**
  * A mutable object field. In this case, the state of this mutable field
  * is to be changed only by this class. (In other cases, it makes perfect
  * sense to allow the state of a field to be changed outside the native
  * class; this is the case when a field acts as a "pointer" to an object
  * created elsewhere.)
  */
  private final Date fDateOfDiscovery;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-17T13:16:44.960

不可变对象在创建后不得以任何方式修改。final 当然有助于实现这一目标。您保证它们永远不会改变。**但是**如果你的对象中有一个最终的数组怎么办？当然，参考是不可变的，但元素是可变的。看看我也给出的几乎相同的问题：

[关联](https://stackoverflow.com/questions/12053945/is-guavas-immutablexxx-really-immutable)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-24T10:54:35.263

不。

例如，请参阅`java.lang.String`. 字符串在 Java 中是不可变的，但该字段`hash`不是*最终*的（它在第一次`hashCode`被调用时被延迟计算，然后被缓存）。但这是可行的，因为`hash`每次计算时只能采用一个相同的非默认值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-22T11:29:48.347

字符串类是不可变的，但属性哈希不是最终的

好吧，这是可能的，但有一些规则/限制，即访问可变属性/字段必须在我们每次访问它时提供相同的结果。

在 String 类中，哈希码实际上是根据最终的字符数组计算的，如果 String 已构造，则不会更改。因此，不可变类可以包含可变字段/属性，但它必须确保每次访问字段/属性时都会产生相同的结果。

要回答您的问题，不必将所有字段都放在不可变类中。

如需进一步阅读，请访问此处 [博客]：http: [//javaunturnedtopics.blogspot.in/2016/07/string-is-immutable-and-property-hash.html](http://javaunturnedtopics.blogspot.in/2016/07/string-is-immutable-and-property-hash.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-24T22:23:59.367

没有必要，您可以通过将成员设为非最终但私有并且除了在构造函数中之外不修改它们来实现相同的功能。不要为他们提供 setter 方法，如果它是一个可变对象，那么永远不要泄漏该成员的任何引用。

请记住将引用变量设置为 final，仅确保不会重新分配不同的值，但您仍然可以更改该引用变量指向的对象的各个属性。这是关键点之一。

# javascript - Highcharts 系列数据数组

> ID：16061032
> 
> 赞同：7
> 
> 时间：2013-04-17T13:13:36.227
> 
> 标签：javascript, arrays, json, highcharts

从 ajax 调用中，我得到以下数据：

```
18,635,21,177,20,165,22,163,24,162,25,145,19,143,23,139,26,112,27,110,28,104,30,91,29,88,31,68,32,57,36,55,34,53,33,51,35,46,37,44,39,42,43,39,42,39,41,38,38,37,44,36,45,34,48,31,40,31,47,27,49,23,46,21,50,21,52,17,55,17,53,16,51,15,54,12,58,6,57,6,59,4,63,4,56,3,62,2,64,2,100,2,68,1,78,1,60,1,97,1,70,1,65,1,69,1,71,1 
```

其中每个偶数应该是关键，每个奇数应该是值。但我不知道如何将其解析为 highcharts 数据。不知何故，如果我使用 JSON.parse，我最终得到的键是“切片”，我可以让它正常工作的唯一方法是将它直接放入这样的系列数据中（在将奇数和偶数分隔成单独的数组之后） ：

```
[names[0] + ' years old', parseFloat(values[0])] 
```

这是伟大的。但后来我需要以某种方式遍历数组，将所有内容推入系列数据，我不知道该怎么做。如果我用这些数据创建一个 for 循环，我如何插入到 highcharts 系列数据中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T13:56:16.903

如果您在数组中有该系列数据，则可以按如下方式处理它：

```
var myData = [18, 635, 21, 177, 20, 165, 22, 163, 24, 162, 25, 145, 19, 143,
             23, 139, 26, 112, 27, 110, 28, 104, 30, 91, 29, 88, 31, 68, 32,
             57, 36, 55, 34, 53, 33, 51, 35, 46, 37, 44, 39, 42, 43, 39, 42, 
             39, 41, 38, 38, 37, 44, 36, 45, 34, 48, 31, 40, 31, 47, 27, 49,
             23, 46, 21, 50, 21, 52, 17, 55, 17, 53, 16, 51, 15, 54, 12, 58, 6,
             57, 6, 59, 4, 63, 4, 56, 3, 62, 2, 64, 2, 100, 2, 68, 1, 78, 1, 60,
             1, 97, 1, 70, 1, 65, 1, 69, 1, 71, 1];
var mySeries = [];
    for (var i = 0; i < myData.length; i++) {
        mySeries.push([myData[i], myData[i + 1]]);
        i++
    } 
```

在“mySeries”中获得系列数据后，您可以使用以下方法设置图表数据：

```
series:[{
    data: mySeries
}] 
```

或者，如果要在渲染图表后添加数据，可以使用以下方法动态添加系列数据：

```
chart.series[0].setData(mySeries); 
```

[http://jsfiddle.net/Cm3Ps/](http://jsfiddle.net/Cm3Ps/)（按“添加我的数据”按钮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T17:45:24.680

实际上，该函数需要参数作为 int 数组。

假设你得到一个函数

```
drawChartFunction(data) {
    // some code here
    series: [{ data: data}]
} 
```

你可以试试：

```
array = {9,8,7,6}
var series = [];
for (var i = 0; i < array.length; i++) {
    series.push([i, array.[i]]); 
} 
```

执行后`for`，你的`series`喜欢

```
0,9
1,8
2,7
3,6 
```

然后，你打电话`drawChartFunction(series)`

因此，您的图表是使用 4 个点`0 1 2 3`及其值绘制的`9 8 7 6`

# c# - 无法在 XNA 游戏工作室游戏中更改图像

> ID：16061033
> 
> 赞同：0
> 
> 时间：2013-04-17T13:13:40.600
> 
> 标签：c#, visual-studio-2010, xna

对于一个大学项目，我必须下载一个名为[Platformer](http://code.msdn.microsoft.com/Platformer-68643e63)的现有 2D XNA 游戏并更改其中的各种内容，例如角色渲染、背景图像和一些变量（每个项目拾取点数、剩余时间等）。

在我的游戏中，我试图用我自己的替换可玩的角色图像。我已经更改了游戏内容文件夹中的图像，确保它是相同的文件类型和尺寸。

换了这张图：

`Platformer > Content > Sprites > Player > Idle.png`

有了这个：

`Platformer > Content > Sprites > Player > Gorilla.png`

在 Visual Studios 的 player.cs 文件中，有一个名为的类`LoadContent()`，它似乎加载了所有播放器动画和声音等。

```
public void LoadContent()
    {
        // Load animated textures.
        idleAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Gorilla"), 0.1f, true);
        runAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Run"), 0.1f, true);
        jumpAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Jump"), 0.1f, false);
        celebrateAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Celebrate"), 0.1f, false);
        dieAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Die"), 0.1f, false);

        // Calculate bounds within texture size.            
        int width = (int)(idleAnimation.FrameWidth * 0.4);
        int left = (idleAnimation.FrameWidth - width) / 2;
        int height = (int)(idleAnimation.FrameWidth * 0.8);
        int top = idleAnimation.FrameHeight - height;
        localBounds = new Rectangle(left, top, width, height);

        // Load sounds.            
        killedSound = Level.Content.Load<SoundEffect>("Sounds/PlayerKilled");
        jumpSound = Level.Content.Load<SoundEffect>("Sounds/PlayerJump");
        fallSound = Level.Content.Load<SoundEffect>("Sounds/PlayerFall");
    } 
```

更改`Sprites`文件夹中的图像并尝试运行项目（F5）后，出现以下错误：

`Error loading "Sprites\Player\Gorilla". File not found.`

参考这行代码：

`idleAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/Gorilla"), 0.1f, true);`

在`IntelliTrace`右侧的窗口中，我得到：

`Exception Thrown: Could not find file: Platformer\bin\x86\Debug\Content\Sprites\Player\Gorilla.xnb`

所以我假设我必须制作一个 Gorilla.xnb 和一个 Gorilla.png 文件？但是我该怎么做呢？这是我可以在 Visual Studio 中做的事情吗？

我已经从上面的网站构建并运行了项目，所以不确定如何将新的内容图像添加到此类项目中。

谢谢

# text - 使用 GREP 删除文本文件中字符 * 或 # 或 & 之后的所有内容

> ID：16061035
> 
> 赞同：1
> 
> 时间：2013-04-17T13:13:44.557
> 
> 标签：text, grep

我有这样的文本文件：

```
word1    & wordff 39 0: sgfdgggg, sgdgsd
word23   & sgfdgsdgsdgdg 44 0: sgdggfg, sfgdgdg
word45   * 
```

我需要这个：

```
word1    & 
word23   & 
word45   * 
```

我怎样才能在 GREP 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:19:49.223

```
grep -Eo '.*?[&*#]' 
```

例如：

```
kent$  echo "word1    & wordff 39 0: sgfdgggg, sgdgsd
word23   & sgfdgsdgsdgdg 44 0: sgdggfg, sfgdgdg
word45   *"|grep -Eo '.*?[&*#]'
word1    &
word23   &
word45   * 
```

# javascript - iFrame 引用父级中的 JavaScript 代码想将其设置为 null

> ID：16061037
> 
> 赞同：0
> 
> 时间：2013-04-17T13:13:52.973
> 
> 标签：javascript, iframe, cross-domain

我有一个页面，其中包含另一个使用 iframe 的网页。它位于不同的域中。iframe 网页包含一些查看部分的 JavaScript 代码：

> parent.window.scrollTo(0,0)

由于代码位于不同的域中，因此我被拒绝访问。无论如何，我可以将父级为空的 iframe 传递到以停止错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:21:11.653

请参阅同源策略。您无法从`iframe`其他域访问父级，反之亦然。

# python - 用于将其他类的项目作为属性访问的代理类（__getitem__ 无限递归）

> ID：16061041
> 
> 赞同：2
> 
> 时间：2013-04-17T13:14:09.053
> 
> 标签：python, proxy-classes

我有一个类`LabelMapper`（一个`boost::python`类），它实现了字典协议。我想要一个代理类，它将使用属性来访问该字典。我看过很多关于覆盖的帖子`__setitem__`，`__getitem__`但我似乎无法做到这一点。

`self.mapper`天真的方法（如下）由于调用而导致无限递归`LabelMapperProxy.__getattr__`，这反过来又需要`self.mapper`等等。

```
class LabelMapper(object):
   def __init__(self): self.map={}
   def __getitem__(self,key): return self.map[key]
   def __setitem__(self,key,val): self.map[key]=val
   def __delitem__(self,key): del self.map[key]

class LabelMapperProxy(object):
   def __init__(self,mapper): self.mapper=mapper
   def __getattr__(self,key): return self.mapper[key]
   def __setattr__(self,key,val): self.mapper[key]=val
   def __delattr__(self,key): del self.mapper[key]

lm=LabelMapper()
lm['foo']=123

# construct the proxy
lmp=LabelMapperProxy(mapper=lm)
print lmp.foo                    # !!! recursion
lmp.bar=456
print lmp.bar,lm['bar'] 
```

解决办法是什么？也许标准库中有这样的代理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:24:51.277

您正在尝试在您的实例上*设置*一个新属性：`Proxy`

```
class LabelMapperProxy(object):
    def __init__(self, mapper): self.mapper = mapper 
```

这会触发 a `__setattr__`，它会尝试访问不存在的`self.mapper`属性，因此`__getattr__`会被查询（所有缺失的属性都会调用它）。并`__getattr__`尝试访问`self.mapper`....

解决方法是`mapper`直接设置`self.__dict__`：

```
class LabelMapperProxy(object):
    def __init__(self, mapper): self.__dict__['mapper'] = mapper 
```

或者，仅将原始基类`__setattr__`用于`mapper`属性：

```
class LabelMapperProxy(object):
   def __init__(self, mapper): self.mapper = mapper

   def __setattr__(self, key, val):
       if key == 'mapper':
           return super(LabelMapperProxy, self).__setattr__(key, val)
       self.mapper[key] = val 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:25:13.213

这是陷阱：

```
class LabelMapperProxy(object):
   def __init__(self, mapper):
       # This will not assign this object's attribute 
       # since __setattr__ is overriden.
       # Instead, it will do self.mapper['mapper'] = mapper
       self.mapper=mapper

   def __getattr__(self, key): 
       # And this won't find `self.mapper` and resort to __getattr__
       # (which is itself)
       return self.mapper[key]  

   def __setattr__(self, key, val): 
       self.mapper[key]=val

   def __delattr__(self, key): 
       del self.mapper[key] 
```

# visual-studio-2012 - 用于 vs2012 的 Infragistics CodedUI 扩展

> ID：16061042
> 
> 赞同：1
> 
> 时间：2013-04-17T13:14:09.443
> 
> 标签：visual-studio-2012, infragistics, coded-ui-tests

由于 CodedUI 默认不支持 Infragistics winforms，因此必须安装一个修补程序，该修补程序会导入特定程序集，使 codedUI 能够与 infragistics 控件一起使用。[此修补程序](http://support.microsoft.com/kb/2696646/en-us)适用于 vs2010 非常好，但实际上不适用于 vs2012。[他们的网站](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.2/CLR4.0/html/Coded_UI_Test_Extension_Overview.html#_System_Requirements)说这个修补程序应该适用于 vs2012，但由于兼容性问题我无法安装这个修补程序。当我尝试安装它时，这是我收到的错误消息：

```
KB2696646 does not apply, or is blocked by another condition on your computer.  Please see http://go.microsoft.com/fwlink/?LinkId=225649 for more details. 
```

有没有办法在不安装此修补程序的情况下获取程序集？或者有人可以分享它吗？这是我需要的：`Infragistics4.Win.CodedUITest.UIA.VS11.v12.2.dl`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:01:47.277

请查看： http: [//www.infragistics.com/community/forums/p/79850/402667.aspx#402667](http://www.infragistics.com/community/forums/p/79850/402667.aspx#402667) 了解更多详情。您还可以在那里找到提到的程序集。

# c# - 在 .NET Framework 4.0 上将 XML 转换为 PDF

> ID：16061046
> 
> 赞同：0
> 
> 时间：2013-04-17T13:14:18.810
> 
> 标签：c#, .net, xml, pdf, nfop

任何人都可以帮助解决这个问题。

我可以使用 NFOP 从 xml 生成 pdf 文件，NFOP 是从 Apache XML 项目的 FOP Java 源到 .NET 的 Visual J# 的一个端口。

但它不适用于 .NET Framework 4.0。

有谁知道替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T12:09:45.513

我这样解决了这个问题：

1.  创建了一个 XSLT，它使用 .NET XslCompiledTransform 类将我的 XML 转换为 HTML。
2.  我使用了**wkhtmltopdf**（你可以在[这里](https://wkhtmltopdf.org/)找到它）并且我的 PDF 文件已经准备好了。

PS **wkhtmltopdf**是一个基于**iText**库的工具。

# python - 包括来自 Jinja 模板的块

> ID：16061051
> 
> 赞同：2
> 
> 时间：2013-04-17T13:14:41.307
> 
> 标签：python, jinja2

我想包含模板中的块而不是宏，因为许多模板将包含许多其他模板的内容，所以`extends`不是一个选项。

我已经阅读了很多关于此的答案，包括[包含文件中的块](https://stackoverflow.com/questions/13050009/jinja2-blocks-in-included-files)，但用例似乎总是不同。我怀疑这是做不到的。

`template1.html`

```
{% block description %}
   <p> Here is a description </p>
{% endblock %} 
```

而在`template2.html`

```
{% from 'template1.html' import description %} <- doesnt work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:22:43.397

您在这里有两个选择。

1.  使用宏，这听起来像是您不想做的事情。
2.  使用模板过滤器。

假设您使用的是 Flask，这很简单：

```
@app.template_filter('get_block')
def template_filter(block, file):
    html = render_template(file)
    # Then use regex or something to parse
    # or even simple splits (better with named blocks), like...
    content = html.split('{%% block %s %%}'%(block))[-1]
    content = content.split('{%% endblock %%}')[0]
    return content 
```

并使用它：

```
{% 'description'|get_block('template1.html') %} 
```

# groovy - 为什么 Groovy 的地图没有 metaClass？

> ID：16061053
> 
> 赞同：7
> 
> 时间：2013-04-17T13:14:44.217
> 
> 标签：groovy, metaclass

为什么 Groovy 的文字映射没有元类？

```
// lists work as expected:
aList = []
println aList.class // class java.util.ArrayList
println aList.metaClass  // gives the full blown metaclass
          //     org.codehaus.groovy.runtime.HandleMetaClass@3de6696c
          //     [groovy.lang.MetaClassImpl@3de6696c[class java.util.ArrayList]]

// string and numbers too:
println ''.metaClass
println 12.metaClass

// map does not:
aMap = [:]
println myMap.metaClass // gives null
println myMap.class // also gives null 
```

经测试：

```
Groovy Version: 1.8.6 JVM: 1.6.0_31 Vendor: Sun Microsystems Inc. OS: Linux 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T13:17:00.643

你必须使用：

```
[:].getMetaClass() 
```

就像你想得到`class`a一样`Map`，即：

```
[:].getClass() 
```

这是因为当您在地图上进行属性查找时，地图会返回由给定键表示的值。否则你不能有钥匙`class`或`metaClass`

# java - 将多个文档提供给 Java PrintService 打印作业？

> ID：16061057
> 
> 赞同：1
> 
> 时间：2013-04-17T13:14:54.310
> 
> 标签：java, printing

我正在使用以下方法将 pdf 文档打印到我的打印机。如果我只想打印一次，它工作得很好，但是多次打印需要更长的时间。

```
public static void print() 
{
    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    PrintService[] services = PrintServiceLookup.lookupPrintServices(flavor, null);
    FileInputStream psStream = null;
    try 
    {
        psStream = new FileInputStream(System.getProperty("user.home")+"\\My Documents\\document.txt");
    } 
    catch (FileNotFoundException e)
    {
        System.out.println(e);
    }
    if (psStream == null) 
        return;

    if (services.length > 0) 
    {
        PrintService myService = null;
        for (PrintService service : services) 
        {
            System.out.println(service.getName());
            if (service.getName().contains("printer_name")) 
            {
                myService = service;
                break;
            }
        }
        DocPrintJob printJob = myService.createPrintJob();
        Doc document = new SimpleDoc(psStream, flavor, null);

        try 
        {
            printJob.print(document, null);
        } catch (PrintException e) 
        {
            System.out.println(e);
        }
    } else 
    {
        System.out.println("No PDF printer available.");
    }
} 
```

因此，如果我想将一个文档打印五次并`print()`循环，那么每次打印文档之间都会有相当长的延迟。这对我来说很有意义，因为必须为每个文档重新建立与打印机的连接，并且必须重新发送文档。有没有办法使用这个 API 多次给同一个文档打印作业？

我想值得注意的是，我已经尝试将`printJob.print(document,null)`命令放入一个生成`PrintException: already printing`. 也许如果有办法让它等到当前文档完成后再发送下一个它可以工作？在这里不知所措。谢谢。

@mthmulders：我尝试了以下内容，但只打印了一份。我做错什么了吗？

```
 Doc document = new SimpleDoc(psStream, flavor, null);
    PrintRequestAttributeSet set = new HashPrintRequestAttributeSet();
    set.add(new Copies(5));

    try 
    {
        printJob.print(document, set);
    } catch (PrintException e) 
    {   
        System.out.println(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:23:37.830

如果您想打印五次文档，我想您必须创建一个[`PrintRequestAttributeSet`](http://docs.oracle.com/javase/7/docs/api/javax/print/attribute/PrintRequestAttributeSet.html)并在其中添加一个[`Copies`](http://docs.oracle.com/javase/7/docs/api/javax/print/attribute/standard/Copies.html)属性，其中包含您想要的副本数。

将此`PrintRequestAttributeSet`作为第二个属性提供给您的`printJob.print(...)`通话，应该没问题。

我现在无法尝试，但遵循 Javadoc 这似乎是这样做的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:37:27.127

> 也许如果有办法让它等到当前文档完成后再发送下一个它可以工作？

我不知道这是否是最好的方法，但如果没有其他方法，您可以尝试添加一个 printJobListener ：

```
printJob.addPrintJobListener(new MyPrintJobListener()); 
```

MyPrintJobListenr 类为：

```
public class MyPrintJobListener implements PrintJobListener{
    public void printDataTransferCompleted(PrintJobEvent pje) {
        System.out.println("printDataTransferCompleted");
    }

    public void printJobCanceled(PrintJobEvent pje) {
        System.out.println("The print job was cancelled"); 
    }

    public void printJobCompleted(PrintJobEvent pje) {
        System.out.println("The print job was completed"); 
    }

    public void printJobFailed(PrintJobEvent pje) {
        System.out.println("The print job has failed");
    }

    public void printJobNoMoreEvents(PrintJobEvent pje) {
        System.out.println("No more events");
    }

    public void printJobRequiresAttention(PrintJobEvent pje) {
        System.out.println("The print job require attention");
    }
} 
```

# ios - 模拟器的 xmppframework 链接器错误

> ID：16061058
> 
> 赞同：0
> 
> 时间：2013-04-17T13:14:54.790
> 
> 标签：ios, xmppframework

我在我的项目中使用 XMPPFramework。我可以用真实设备编译我的项目，但是当我尝试为 iOS 模拟器编译它时，它给了我链接器错误。可能是什么问题？

![在此处输入图像描述](https://i.stack.imgur.com/VsUeX.png)

# gdb - mips gdb 没有自动加载共享库信息

> ID：16061060
> 
> 赞同：1
> 
> 时间：2013-04-17T13:15:00.167
> 
> 标签：gdb, mips, backtrace

我已经看到`gdb`自动读取和加载符号。（就像下面的代码读取`ld-linux-x86-64.so.2`）

```
----------

gdb 86exec 86core
...
Reading symbols from 86exec...done.

Illegal process-id: 86core.

[New Thread 14983]

[New Thread 14978]

[New Thread 14980]

[New Thread 14981]

[New Thread 14982]
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.

Loaded symbols for /lib64/ld-linux-x86-64.so.2

Core was generated by `./86exec'.

Program terminated with signal 11, Segmentation fault.

---------- 
```

**但在我的`mips`平台上，我没有完成自动阅读。**

```
---------

Reading symbols from /mipsexec...done.

[New LWP 1333]

[New LWP 1328]

[New LWP 1330]

[New LWP 1331]

[New LWP 1332]

Core was generated by `./mipsexec'.

Program terminated with signal 11, Segmentation fault.

---------- 
```

我想知道，这些信息是从哪里来的。

如果它来自核心文件，我如何分析我`mipscore`是否有具体信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T09:42:22.697

我怀疑 mips gdb 不能很好地支持 PIE。据我所知，在 PIC 中，mips 使用`rld_map`但不`DE_DEBUG`用于动态信息，但在 PIE 模式下，mips 喜欢其他架构，使用`DT_DEBUG`.

在动态链接器中，有这样的语句：

```
#if !defined __mips__
        /* we disable for mips because normally this page is readonly
         * and modifying the value here needlessly dirties a page.
         * see this post for more info:
         * http://uclibc.org/lists/uclibc/2006-April/015224.html */
        if (dpnt->d_tag == DT_DEBUG)
            dpnt->d_un.d_val = (unsigned long)debug_addr;
#endif 
```

PIC 中的这个语句是可以的，但在 PIE 中不起作用。如果你删除这个`#ifdef`，你会得到一个段错误，因为`.dynamic`mips 中的部分是只读的。`.dynamic`arm 和 x86 等中的部分是可写的。

如果您将`.dynamic`mips 的部分更改为可写，并`DT_DEBUG`在动态链接器中打开处理，它可以工作，但仍然存在一些问题。例如，只读的 VMA 是可写的，并且在 fork 子进程时需要更多的页面副本。

几周前我遇到了这个问题，我不知道 mips gdb 是否在 Android 4.2 中运行良好。在 Android 4.2 中，所有 c/c++ 文件都是使用 PIE 构建的。

# itextsharp - XMLWorkerHelper output to PDFCell

> ID：16061062
> 
> 赞同：0
> 
> 时间：2013-04-17T13:15:02.563
> 
> 标签：itextsharp

I am trying to set the HTML output from the `XMLWorkerHelper` into a `PdfPCell` instead of the `Document`. What am I doing wrong?

```
string html = "<h1>Test h1 Heading</h1><ul><li>html 1</li><li>html 2</li><li>html 3</li></ul>";

XMLWorkerHelper.GetInstance().ParseXHtml(writer, document, new StringReader(html));

PdfPCell P4Type1 = new PdfPCell();
P4Tabel.AddCell(P4Type1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:15:32.740

Instead of working with an individual `Chunk` work with the parent `IElement` which is where most of the formatting is applied. Not all `IElements` can be added so you'll need to check the `IsContent()` boolean property:

```
PdfPCell P4Type1 = new PdfPCell();
foreach (var element in mh.elements) {
    if (element.IsContent()) {
        P4Type1.AddElement(element);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-20T10:06:25.497

This code is tested ok, that giving html string into PdfPCell to write in pdf document

```
string htmlFolioNotice = " <P align=center ><B> Thank you for your stay with us.Please visit us again.</B></P> " + "<P align=justify>NOTICE TO GUESTS: This property is privately owned and the management reserves the right to refuse service to anyone. Management will not be responsible for accidents or injury to guests or for loss of money, jewelry or valuables of any kind. Management will not be responsible for any item left in the room.<BR>&nbsp;<BR>CHECKOUT TIME: 11:00 AM SELF REGISTRATION ONLY I AGREE that my liability for this bill is not waived and agree to be held personally liable in the event that the indicated person or company failed to pay for any part or full amount of these charges including any missing/damaged items, etc.. I agreee that if an attorney is retained to collect these charges, I will pay all reasonable attorney's fees and costs incurred. If payment is by credit card you are authorized to charge my account for all charges incurred, including any and all damages/missing items, etc.. I agree that the sole purpose of renting this room is for my own residency only. Damge to property,Disturbance to guest or employees or Law Enforcement comes to your room. Immediate check out with no refund</P>";`enter code here`
PdfPTable tblNotise = new PdfPTable(1) { WidthPercentage = 100, HorizontalAlignment = 1, SpacingBefore = 20f };
    int[] tblNotisewidth = { 100 };
    tblNotise.SetWidths(tblNotisewidth);

    PdfPCell contentCell = new PdfPCell();
    contentCell.Border = 0;
    var htmlarraylist = HTMLWorker.ParseToList(new StringReader(htmlFolioNotice), null);
    for (int k = 0; k < htmlarraylist.Count; k++)
    {
        var ele = (IElement)htmlarraylist[k];
        contentCell.AddElement(ele);
    }
    tblNotise.AddCell(contentCell);
    docPDF.Add(tblNotise); 
```

# php - 使用 PHP 自动打印网页

> ID：16061064
> 
> 赞同：1
> 
> 时间：2013-04-17T13:15:06.010
> 
> 标签：php, python, printing, web

我有一个 php 脚本，它获取发票编号并生成包含所有相关信息的 PDF 发票，当脚本完成后，PDF 将显示在用户浏览器的屏幕上。我很想知道如何自动打印 PDF？我意识到由于安全/垃圾邮件问题，可能无法使用 php 或 javascript。

不幸的是，手动打印页面并不是一个真正的选择，因为用户目前有两台打印机，在当前基于 Access 的系统中，一张发票被发送到彩色打印机，两张发票被发送到黑白打印机。这一切都是自动完成的，但现在由于某些情况我想使用 PHP，因为系统的很大一部分已经基于 PHP。

我曾考虑过使用基于 Linux 的机器并尝试使用 python 网络服务器来获取 PDF 并打印它，但我不知道这需要什么或如何去做。任何反馈都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:47:23.930

鉴于你所说的，IMO 你最好的选择是使用 Linux 来打印它。

```
wget http://1.2.3.4/invoice.pdf
pdf2ps invoice.pdf invoice.ps
lpr -Pcolor invoice.ps
lpr -Pbw -#2 invoice.ps 
```

像这样的东西，也许，应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:18:50.417

你可以用 vbscript 试试这个

```
<OBJECT ID="WebBrowser1" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>
              <form>
              Printing webpage without prompt window. As of now it's possible with VBScript(IE).
              <br/>
              <button onclick="Print()">Print Now</button>
              <br/>

              </form>
              <script language="VBScript">
                Sub Print()
                  OLECMDID_PRINT = 6
                  OLECMDEXECOPT_DONTPROMPTUSER = 2
                  OLECMDEXECOPT_PROMPTUSER = 1
                  If DA Then
                    call WebBrowser1.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
                  Else
                    call WebBrowser1.IOleCommandTarget.Exec _
                        (OLECMDID_PRINT ,OLECMDEXECOPT_DONTPROMPTUSER,"","","")
                  End If
                End Sub
              </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:34:30.320

尝试在 java 脚本上使用此代码

```
<A HREF="javascript:window.print()">Click to Print This Page</A>

 You can set it to print off of an image:
   <A HREF="javascript:window.print()">
  <IMG SRC="print_image.gif" BORDER="0"</A>

  And yes, you can set it to trigger off a button:
<FORM>
 <INPUT TYPE="button" onClick="window.print()">
  </FORM> 
```

你不知道查看这个网站

```
http://www.htmlgoodies.com/beyond/javascript/article.php/3471121/Print-a-Web-Page-  Using-JavaScript.htm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:20:20.207

尝试这个

php pdf 库可用

[http://php.net/manual/en/pdf.examples-basic.php](http://php.net/manual/en/pdf.examples-basic.php)

[http://sanjoyinfoworld.blogspot.in/2012/03/how-to-generate-pdf-in-php.html](http://sanjoyinfoworld.blogspot.in/2012/03/how-to-generate-pdf-in-php.html)

参考这个网站

# java - h:inputText - jsf 不呈现占位符

> ID：16061072
> 
> 赞同：7
> 
> 时间：2013-04-17T13:15:27.733
> 
> 标签：java, html, css, jsf, primefaces

我想创建一个landingPage，我想通过jsf 2.0和Primefaces 3.5将数据保存在我的数据库中

我的页面 *.xhtml 页面如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/z0MFB.png)

但是，我想让它看起来像我的 HTML 页面：

![在此处输入图像描述](https://i.stack.imgur.com/vKjRf.png)

除了 CSS 我的 h:inputText 应该包含一个占位符。我的代码如下所示：

```
<h:form class="homepage_invitee_form" action="" method="POST">
    <h:inputText name="email" placeholder="Email Address"
                 id="email_address_new" type="text placeholder" />
    <br />
    <h:inputText name="firstName" placeholder="First Name"
                 id="firstname_new" type="text placeholder" />
    <h:inputText name="lastName" placeholder="Last Name"
                 id="lastname_new" type="text placeholder" />
    <br />
    <h:button value="Request Invitation" type="submit" class="btn btn-primary opal_btn"
              id="submit_form_new" />
</h:form> 
```

如您所见，占位符属性没有被渲染。我真的很感激任何关于如何正确渲染的想法。

**更新**

我的 HTML 代码如下所示：

```
<form class="homepage_invitee_form" action="" method="POST">
    <input name="email" placeholder="Email Address" id="email_address_new" type="text placeholder"><br>
    <input name="firstName" placeholder="First Name" id="firstname_new" type="text placeholder">
    <input name="lastName" placeholder="Last Name" id="lastname_new" type="text placeholder"><br> 
    <button type="submit" class="btn btn-primary opal_btn" id="submit_form_new">Request Invitation</button>
</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T13:28:14.760

在 xhtml 中使用**p:watermark**而不是占位符。其他视觉设计完全是关于你的 CSS。

这里看看这个[primefaces展示](http://www.primefaces.org/showcase/ui/misc/watermark.xhtml)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-19T11:27:05.603

对于 JSF **2.2** (JEE 7)，您可以使用命名空间

`xmlns:p="http://xmlns.jcp.org/jsf/passthrough"`

然后使用它，例如：

`<h:inputText value="#{bean.field}" p:placeholder="supply value"/>`

这会将其传递给生成的 HTML（注意：HTML **5**属性）。

请参阅[http://www.adam-bien.com/roller/abien/entry/jsf_2_2_and_html](http://www.adam-bien.com/roller/abien/entry/jsf_2_2_and_html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T16:07:39.860

我遇到了同样的问题并修复了它。您可能没有在该标记上使用正确的 xmln 命名空间。

确保“h”xmln 命名空间映射到 PrimeFaces。通常这映射到“ [http://java.sun.com/jsf/html](http://java.sun.com/jsf/html) ”，而 xmln 命名空间“p”通常映射到 PrimeFaces，“ [http://primefaces.org/ui](http://primefaces.org/ui) ”。如果您有正常的映射，那么您需要将该代码上的 xmln 更改为“p”而不是“h”：

```
    <h:form class="homepage_invitee_form" action="" method="POST">
       < p :inputText name="email" placeholder="Email 地址"
       id="email_address_new" type="文本占位符" />
       <br />
       ...

```

# php - 用于日期的 PHP 问题的 Excel 文件读取器/写入器库

> ID：16061075
> 
> 赞同：0
> 
> 时间：2013-04-17T13:15:36.167
> 
> 标签：php, date, xls

我正在使用 simplexlsx.class.php 来读取 xlsx 文件类型。当文件在 excel 文件中包含日期字段时，它会出现问题。

这是我的编码

```
require_once "simplexlsx.class.php";
$xlsx = new SimpleXLSX( $_FILES['file']['tmp_name'] );
list($cols,) = $xlsx->dimension();
     foreach( $xlsx->rows() as $k => $r) {
   echo $r[42];
 } 
```

当我回显这个 echo $r[41]; 它打印 41378... 日期格式是 m/d/Y，我想将其更改为 Ymd，但它不起作用。

```
date("Y-m-d", strtotime($r[42])); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:23:34.693

您正在检索 Excel 时间戳，该时间戳基于自 1900 年 1 月 1 日或 1904 年 1 月 1 日序列化以来的天数。

您可以使用以下函数将该值转换为 unix 时间戳（然后您可以使用 PHP 日期函数对其进行操作）或 PHP DateTime 对象：

```
function ExcelToPHP($dateValue = 0, $ExcelBaseDate = 1900) {
    if ($ExcelBaseDate == 1900) {
        $myExcelBaseDate = 25569;
        //    Adjust for the spurious 29-Feb-1900 (Day 60)
        if ($dateValue < 60) {
            --$myExcelBaseDate;
        }
    } else {
        $myExcelBaseDate = 24107;
    }

    // Perform conversion
    if ($dateValue >= 1) {
        $utcDays = $dateValue - $myExcelBaseDate;
        $returnValue = round($utcDays * 86400);
        if (($returnValue <= PHP_INT_MAX) && ($returnValue >= -PHP_INT_MAX)) {
            $returnValue = (integer) $returnValue;
        }
    } else {
        $hours = round($dateValue * 24);
        $mins = round($dateValue * 1440) - round($hours * 60);
        $secs = round($dateValue * 86400) - round($hours * 3600) - round($mins * 60);
        $returnValue = (integer) gmmktime($hours, $mins, $secs);
    }

    // Return
    return $returnValue;
} 
```

根据需要设置 $ExcelBaseDate 以指示您正在使用的 Excel 基准日历：Windows 1900 或 Mac 1904

如果你想要一个 PHP DateTime 对象：

```
function ExcelToPHPObject($dateValue = 0, $ExcelBaseDate = 1900) {
    $dateTime = ExcelToPHP($dateValue, $ExcelBaseDate);
    $days = floor($dateTime / 86400);
    $time = round((($dateTime / 86400) - $days) * 86400);
    $hours = round($time / 3600);
    $minutes = round($time / 60) - ($hours * 60);
    $seconds = round($time) - ($hours * 3600) - ($minutes * 60);

    $dateObj = date_create('1-Jan-1970+'.$days.' days');
    $dateObj->setTime($hours,$minutes,$seconds);

    return $dateObj;
} 
```

我很惊讶 SimpleXLSX 没有处理这种转换的方法，尽管日期通常不会作为 OfficeOpenXML 格式 (xlsx) 工作簿中的这个序列化值保存

# java - 分布式组件生命周期管理

> ID：16061076
> 
> 赞同：0
> 
> 时间：2013-04-17T13:15:42.237
> 
> 标签：java, spring, distributed

我的公司计划实施一个包含大量服务的集群系统，这些服务将自动部署在不同的机器上并相互互连（SOA 风格）。有时服务会相互依赖。

例如：服务 B（应用程序）只有在服务 A（数据库）启动并运行时才能启动。

每个服务都计划作为不同的 java 进程运行，可能部署为 WAR（在专用 tomcat 内部），甚至根本没有 web。

现在，我们在同一个 WAR 中拥有所有服务，并且只有一个部署 WAR 的 tomcat。所有的服务都是通过 Spring 定义的，Spring 为我们管理依赖关系。

所以我问自己是否存在一些框架可以帮助管理分布式环境中的服务，就像我上面描述的那样？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:46:02.543

**Netflix**发布了他们的开源工具[——Asgard](http://techblog.netflix.com/2012/06/asgard-web-based-cloud-management-and.html)，它可以管理实例并将其部署到云中。它与 EC2 紧密耦合（我最后一次检查）。根据您是否部署到亚马逊云，您可能会发现这很有用。我不知道它是否支持依赖项，但它确实管理分布式环境上的部署。Netflix 确实在他们的博客上讨论了很多服务依赖关系，所以部署解决方案*可能*有一个功能可以解决这个问题。

我不知道有任何其他服务/框架可以做到这一点。如果您要自己编写此代码，我想您可以配置几个部署服务的**Jenkins**任务。一项任务可以依赖另一项任务来模拟服务依赖性。Pinging URL 端点可以在部署 B 之前检查服务 A 是否存在。

还有另一种看待这个的方式。如果您确保您的服务都正常运行，则无需检查依赖性。**像Nagios**这样的监控工具可以在这里提供帮助。立即排除故障服务可以帮助您专注于部署服务 A，而不是检查您对每个部署的依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T13:27:48.070

使用**动物园管理员**。

更正，使用 Netflix 的**Curator**，这是一个基于 zookeeper 的框架，可以简化使用它的工作。

在我工作的地方，我最近实现了一个`Coordinator`有两种方法的类：

`waitForDependencies`- 一种同步方法，用于检查当前服务的依赖项的活动性并阻塞当前线程，直到通知所有依赖项服务都处于活动状态。活跃度检查是通过验证依赖服务创建的节点的存在来完成的，在它们的初始化过程结束时，通过调用`notifyUp`

`notifyUp`- 一种同步方法，通知世界调用该方法的当前服务是活动的。通知是通过在 zk 集群中创建一个临时（临时，只要创建它的连接处于活动状态时保持活动状态）节点来完成的，依赖它的其他服务会使用它来查找该节点，使用`waitForDependencies`

# c++ - 在 OMNET 模拟期间中止执行

> ID：16061078
> 
> 赞同：0
> 
> 时间：2013-04-17T13:15:45.613
> 
> 标签：c++, simulation, omnet++

我的模拟中有 4 个节点，在代码中我检查了一个**标志**。

如果它在***任何节点***的运行期间变为真，那么>>我想停止***所有节点***的执行并去执行***每个节点的完成方法。***

我尝试执行以下操作，但它不调用完成方法！

```
if(flag == true)
{ finish();
 abort();
} 
```

我该怎么做？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-22T14:35:48.280

你试过这个命令吗？结束模拟（）；

它结束了模拟，但是我不确定它是否运行完成方法..

# c# - 根据数据表值更改 Datagrid 行的背景

> ID：16061079
> 
> 赞同：2
> 
> 时间：2013-04-17T13:15:46.707
> 
> 标签：c#, wpf, datagrid, caliburn

我正在努力解决一个看似简单的问题：我有一个绑定到数据表的数据网格。此数据表包含一个名为“COLORSTATUS”的列（一个枚举值） - 我想根据 ColorStatus 绘制数据表的每一行。我试图构建一个值转换器 - 但我无法将它传递给整个行和/或数据表。我有关于用 Caliburns 消息连接死 DataGridRow 事件的想法——但是如何在 XAML 中做到这一点——我能访问的只是 DataGrid.RowStyle 元素。

```
<DataGrid x:Name="excelDataTable_ExcelData"  cal:Message.Attach="[Event AutoGeneratedColumns] = [Action HideTheColorColumn($source)]">
           ?? What to do here
 </DataGrid> 
```

我选择了这个解决方案：

```
 <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="{Binding Row, Converter={StaticResource ExcelRowColorConverter}}"></Setter>
        </Style>
    </DataGrid.RowStyle> 
```

我有点惊讶，你可以通过“Row”。作为转换器的提示：传递的对象是实际的 DataRow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:32:49.233

转换器应该可以正常工作，但您需要确保将其应用在正确的位置。

只需传递它`DataRow`，从中获取“COLORSTATUS”列值，然后返回适当的颜色画笔。

例如，

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridRow }">
        <!-- DataContext will be your DataRow -->
        <Setter Property="Background" 
                Value="{Binding Converter={StaticResource MyColorConverter}}" />
    </Style>
</DataGrid.Resources> 
```

# heroku - Heroku 工人工作。如何设置工作进程以及播放框架网络

> ID：16061082
> 
> 赞同：2
> 
> 时间：2013-04-17T13:15:49.187
> 
> 标签：heroku, playframework, procfile

如果这已经得到回答，我很抱歉；我的搜索没有发现任何人。

我在 Heroku 上部署了一个播放应用程序。我在同一个版本中还有另一个带有 main 方法的 Worker 类。我想以工人而不是网络的身份运行该课程。当我尝试运行它时，它给了我 ClassDefNotFound 异常，这很明显，因为我没有为此过程提供类路径。

我如何弄清楚类路径应该是什么（jars 和 classes）？或者有没有其他方法可以做到这一点？

将该类独立于工作进程的原因是为了使其独立于 Web 应用程序进行扩展。

这里有更多细节。我的 Procfile 有以下条目，

```
web: target/start -Dhttp.port=$PORT -DapplyEvolutions.default=true -DapplyDownEvolutions.default=true -Ddb.default.url=$DATABASE_URL ${JAVA_OPTS}
worker: target/start com/company/test/worker/WorkerApplication ${JAVA_OPTS} 
```

worker 条目只有需要运行的类“WorkerApplication”的名称，但 Heroku 无法找到这些类文件和其他依赖项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:42:20.610

您需要在项目中为每个入口点创建多个具有不同名称的[全局对象](http://www.playframework.com/documentation/2.0/ScalaGlobal)。然后在你的 Procfile 中，你指定你从哪个`application.global`属性开始，像这样：

```
web:     target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dapplication.global=Web
worker:  target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dapplication.global=Worker 
```

我还没有在 Play 项目中尝试过这个，但您也可以让它与[sbt-start-script 插件](https://github.com/sbt/sbt-start-script)一起使用，以创建`target/start`具有正确类路径的自定义脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:13:10.940

好的，我想通了。target/start 是针对 web 而不是 worker。我在 target/stage 文件夹中找到了所有 jar。将工人改为跟随工作正常。

工人：java -cp "target/staged/*" com/company/test/worker/WorkerApplication

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-30T17:14:52.383

我们最近为 Heroku 上的 Playframework开源了我们的延迟作业框架[Moonlight 。](https://github.com/GIVESocialMovement/moonlight)

延迟的工作通常需要某种协调。例如，您可能需要一个队列，以便工作人员可以从队列中获取作业并进行处理。[月光](https://github.com/GIVESocialMovement/moonlight)为你处理。

对于您的具体问题`Procfile`，我们在这里有一个工作示例：[https ://github.com/GIVESocialMovement/moonlight/blob/master/test-project/Procfile](https://github.com/GIVESocialMovement/moonlight/blob/master/test-project/Procfile)

你的类路径不应该包含`/`，我认为你需要这个论点`-main`。

# jquery - Jquery Autocomplete 未按应有的方式显示

> ID：16061084
> 
> 赞同：0
> 
> 时间：2013-04-17T13:15:50.887
> 
> 标签：jquery, css, jquery-ui, themes

我有一个 JQuery 自动完成框，但是它不能正常工作。搜索工作正常，但是当我显示结果（在自动完成框内）时，我看不到文本，只有一个非常薄的水平蓝色滑块，没有文本。

我正在使用 JQuery Theme Redmond，并有以下 js 调用：-

```
<head id="Head1" runat="server">
<link href="Content/Redmond/jquery-ui-1.10.2.custom.css" rel="stylesheet">
<script src="Scripts/jquery-1.9.1.js"></script>
<script src="Scripts/jquery-ui-1.10.2.custom.js"></script> 
```

JQuery如下： -

```
 //reports Navbar AutoComplete
    $("#reports-textSearch").autocomplete({
        source: function (request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "Dashboard.aspx/FetchReports",
                data: "{'reportName':'" + document.getElementById('reports-textSearch').value + "'}",
                dataType: "json",
                success: function (data) {
                    response(data.d);
                    var val = $("#reports-textSearch").val();
                    //__doPostBack('div#UPMainMenu', val);
                },
                error: function (result) {
                    alert("Error");
                }
            });
        },
        messages: {
            noResults: '', results: function () {
            }
        }

    }); 
```

HTML如下：-

```
 <div id="navbar-reportsSearch">
      <div class="navbar-reportsAutoSearchBar">
          <input id="reports-textSearch"   />
      </div>
  </div> 
```

我还为自动完成添加了一些样式，但似乎没有任何效果：-

```
#reports-textSearch {
width: 235px;
z-index: 100; 
position: relative
}

#reports-textSearch > li {
border: #000000;

} 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:17:45.023

尝试更换

```
<input id="reports-textSearch"   /> 
```

和

```
<input type="text" id="reports-textSearch"   /> 
```

您还需要提及输入的类型

# javascript - html的执行顺序

> ID：16061085
> 
> 赞同：1
> 
> 时间：2013-04-17T13:15:51.780
> 
> 标签：javascript, html, parsing, iframe, web

我想知道 HTML 解析器的解析顺序。

给定两个 html 文件：

page1.html

```
<html>
<body>
<iframe id="x" src="page2.html"></iframe>
<div id="z"></div>
<--! something that need to be parsed -->
</body>
</html> 
```

page2.html

```
<html>
<body>
<div id="y">
<body>
</html> 
```

我知道 iframe 标记会并行下载 src（即，虽然 iframe src（在示例中为 page2.html）尚未下载，但 HTML 解析器会解析 iframe 标记的后续行）。所以，问题是，**什么时候解析 page2.html**？换句话说，当 div 元素 (id=y) 添加到 DOM 树时？是**在解析page1.html中的代码**后完成还是在通过blockinig page1.html解析**完成page2.html下载后立即完成？**或者，HTML 解析器是否并行（同时）解析 page1.html 和 page2.html？

任何评论和链接将不胜感激。谢谢！

（如果有错误的问题，请告诉我。实际上，我是 JavaScript 和 HTML 的新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:18:45.627

确切的时间取决于浏览器。`page1`应该先下载并准备好，然后才`page2`准备好。但是，`page1`在开始下载和解析之前还没有准备好`page2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:20:37.547

实际完成的顺序取决于浏览器，但在典型的浏览器中，它首先在您正在访问的页面中构建 HTML 树，然后对其进行处理。当它开始处理 iframe 时，它​​将去请求该页面。

现在，由于 HTML 是从服务器以块的形式下载的，因此这很复杂，因此从部分树中，它可能会在看到第 1 页的一半之前就开始从 iframe 下载内容。

不过，要点是您不应该依赖这种行为。

# wix - 如何在wix中复制文件夹

> ID：16061092
> 
> 赞同：13
> 
> 时间：2013-04-17T13:16:05.987
> 
> 标签：wix

我正在使用 Wix Installer 复制程序文件文件夹下的文件夹。但我无法为整个文件夹执行此操作。我只能逐个文件地做到这一点。

我将不胜感激这方面的任何帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T13:21:37.330

```
<Directory Id="CopyTestDir"...>

<Property Id="SOURCEDIRECTORY" Value="c:\doc\bin\path" />

<Component Guid="A7C42303-1D77-4C70-8D5C-0FD0F9158EB4" Id="CopyComponent">
    <CopyFile Id="SomeId" SourceProperty="SOURCEDIRECTORY"
      DestinationDirectory="CopyTestDir" SourceName="*" />
 </Component> 
```

但它不处理子目录。如果您没有源文件的已知目录结构，那么您将需要采用半自定义操作方法，将条目写入每个目录的 MoveFile 表。

[来源](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Copy-Folder-td7291438.html)

# jquery - jQuery成功删除随机数组函数

> ID：16061093
> 
> 赞同：2
> 
> 时间：2013-04-17T13:16:08.187
> 
> 标签：jquery

我有这段脚本，但我无法弄清楚如何成功删除随机函数，以便数组一次流过每个数组项，而不是随机显示每个项。

```
$(window).ready(function() {
    var helloArray = ["hello", "bonjour", "hola", "konnichiwa", "hujambo", "czesc", "hei", "ciao"];
    $('#page_title').loadText( helloArray, 5000 ); // ( array, interval )
});

$.fn.loadText = function( textArray, interval ) {
    return this.each( function() {
        var obj = $(this);
        obj.fadeOut( 'slow', function() { 
            obj.empty().html( random_array( textArray ) );    
            obj.fadeIn( 'fast' );
        });
        timeOut = setTimeout( function(){
            obj.loadText( textArray, interval )
        }, interval );
        $("#text-reload").click( function(){ 
            if( !obj.is(':animated') ) {
                clearTimeout( timeOut );
                // animation check prevents "too much recursion" error in jQuery
                obj.loadText( textArray, interval );
            } 
        });
    });
}

//public function
function random_array( aArray ) {
    var rand = Math.floor( Math.random() * aArray.length + aArray.length );
    console.log(randArray);
    var randArray = aArray[ rand - aArray.length ];
    return randArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:23:14.843

创建一个变量来保存您上次加载的索引。`%`每次调用时递增和 mod ( ) 变量`loadText()`

我还建议您阅读 jQuery 的[`.data()`](http://api.jquery.com/data/)功能，因为看起来您正在尝试创建一个 jQuery 插件。这将帮助您在不污染全局变量空间的情况下跟踪当前索引。

最后，看起来您正试图每 5 秒加载一次文本，但您通过调用`setTimeout`来实现，这会迫使您添加一堆代码来防止无限递归。您应该查看该[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数，该函数每 X 毫秒触发一次回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:44:10.710

尝试

```
$(document).ready(function() {
    var helloArray = ["hello", "bonjour", "hola", "konnichiwa", "hujambo",
            "cześć", "hei", "ciao"];
    $('#page_title').loadText(helloArray, 1000); // ( array, interval )
    document.title = $('#page_title').text();
});
// custom jquery plugin loadText()
$.fn.loadText = function(textArray, interval) {
    return this.each(function() {
        var obj = $(this), intervalId, counter = 0;

        function change() {
            obj.fadeOut('slow', function() {
                var text = textArray[counter++];
                obj.html(text).fadeIn('fast');
                document.title = text;

                counter = counter >= textArray.length ? 0 : counter;
            });
        }

        function start() {
            intervalId = setInterval(change, interval);
        };

        start();

        $("#text-reload").click(function() {
            if (!obj.is(':animated')) {
                clearInterval(intervalId);
                start();
            }
        });
    });
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/uKY6A/2/)

# java - java.security.AccessControlException：访问被拒绝（“java.util.PropertyPermission”“jna.boot.library.path”“读取”）

> ID：16061100
> 
> 赞同：1
> 
> 时间：2013-04-17T13:16:37.627
> 
> 标签：java, security, sandbox, access-control, accesscontrolexception

我在运行已签名的 Web 小程序时遇到了一些问题，

它在 Eclipse 中运行良好，但是一旦我上传到网页，我就会收到以下错误日志：

```
Exception in thread "AWT-EventQueue-2" java.lang.ExceptionInInitializerError
at com.dermalog.imaging.capturing.cwrap.vc.DermalogvcLibrary.<clinit>(DermalogvcLibrary.java:30)
at com.dermalog.imaging.capturing.DeviceManager.<clinit>(DeviceManager.java:33)
at MyPackage.Bio.GetDevice(Bio.java:218)
at MyPackage.Bio.StartDevice(Bio.java:150)
at MyPackage.Bio.access$0(Bio.java:144)
at MyPackage.Bio$1.run(Bio.java:80)
at java.security.AccessController.doPrivileged(Native Method)
at MyPackage.Bio.<init>(Bio.java:76)
at MyPackage.Test$2.actionPerformed(Test.java:45)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.security.AccessControlException: access denied("java.util.PropertyPermission" "jna.boot.library.path" "read")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
at java.lang.System.getProperty(Unknown Source)
at com.sun.jna.Native.loadNativeLibrary(Native.java:650)
at com.sun.jna.Native.<clinit>(Native.java:109)
... 44 more 
```

我相信这是突破沙箱并与计算机通信的问题。

可以使用**AccessController.doPrivileged**解决问题吗？除了修改策略文件，我还有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:19:12.123

事实证明，我遇到的问题是我引用的 Jar 文件（在主 Jar 之外）没有签名，在签名后问题就消失了。

# android - FFmpeg 音视频同步

> ID：16061101
> 
> 赞同：0
> 
> 时间：2013-04-17T13:16:42.193
> 
> 标签：android, ffmpeg, android-camera

我一直在尝试使用来自 Android 相机的视频源创建视频...

捕获来自相机的预览帧并通过管道传输到`ffmpeg`输入，并使用`AudioRecord`（采样率：44100，通道：单声道）捕获音频并`ffmpeg`使用相同的技术馈送...视频按预期成功生成...但是音频和视频似乎不同步...

音频最初似乎落后于视频，在某些时候它等于视频，然后随着视频的进行而领先于视频，这清楚地表明音频流的播放速度比视频的播放速度更快......

使用的命令如下：

```
ffmpeg -f image2pipe -vcodec mjpeg -i - -i audioPipe -b:v 1024k -f flv -vcodec libx264 -minrate 512k -maxrate 1024k -bufsize 8092k -acodec copy -preset ultrafast -g:v 3 -acodec copy out.flv 
```

我什至尝试过同样的方法，`-async 1`但结果与上述相同......

有什么办法可以完美同步地混合这两个流......？

谢谢...

# python - wkhtmltopdf 和一个文档中的不同方向

> ID：16061102
> 
> 赞同：0
> 
> 时间：2013-04-17T13:16:44.000
> 
> 标签：python, wkhtmltopdf

是否可以使用[wkhtmltopdf 制作](https://code.google.com/p/wkhtmltopdf/)具有不同页面方向的 pdf：例如，一页应该是纵向的，并且应该是横向的。我知道什么方向是 GLOBAL 选项，但我听说过可以直接嵌入到我的 html 中的元标记，它们对我的目的有用吗？

# php - 预填充登录到贝宝系统

> ID：16061104
> 
> 赞同：0
> 
> 时间：2013-04-17T13:16:45.227
> 
> 标签：php, paypal

我正在使用 PayPal 标准和 Buynow 按钮。按钮提交后如何将登录电子邮件预填充到PayPal系统中是否存在任何可能性？例如任何隐藏字段，如“业务”？如果我知道用户使用电子邮件登录到贝宝，这将很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:23:15.737

您可以使用一个名为“电子邮件”的隐藏字段，但这仅在客户还没有 PayPal 帐户时使用。否则，电子邮件字段将预先填写客户的登录信息。

[https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_xclick_prepopulate_outside](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_xclick_prepopulate_outside)

# java - 从excel文件读取后将数据存储在mysql中

> ID：16061105
> 
> 赞同：0
> 
> 时间：2013-04-17T13:16:46.070
> 
> 标签：java, mysql, jdbc

我正在尝试制作一个程序，我将从excel文件中读取数据并将它们存储在数据库中。我使用 eclipse 作为编辑器和 mySQL。我正在使用 APACHE POI 读取 excel 文件和 JDBC 进行连接。excel文件的结构如下图所示：

```
ID    NAME   SALARY   STREET
---   ----   ------   -------------
321   TIM    1254     14 avenue
121   PAUL   1265     28h oktovriou
432   NICK   4521     papaflessa 
```

我当然有很多这样的文件，其中包含更多的行和列。我的程序的目的是读取数据，创建名为 excel 文件名称的表，并将每个表的字段作为 excel 文件的第一行。之后这些值将是 excel 文件的其余数据。在下面的代码中，我设法阅读了它们，在控制台中显示数据。Afterwrds 我尝试使用 JDBC 调用数据库，但是在创建表时出现问题。

```
try
            {
                String[] allFields;
                String createTableStr = "CREATE TABLE" + createTableStr
                   + "(" + org.apache.commons.lang3.StringUtils.join(allFields,
                   ",") + ")"; 
```

有人可以帮我吗？

先感谢您！：）

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.commons.lang3.StringUtils;
import org.apache.poi.ss.usermodel.Cell;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class exam1 {

    @SuppressWarnings({ "unchecked", "unchecked" })
    static void main (String[] args) throws Exception {

        String filename = "C:\\Users\\Efi\\Documents\\test5.xls";

        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(filename);
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);

            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();

                List data = new ArrayList();
                   while (cells.hasNext()) {
                   HSSFCell cell = (HSSFCell) cells.next();
                   data.add(cell);
                   }
                   sheetData.add(data);
            }

                   } catch (IOException e) {
                   e.printStackTrace();
                   } finally {
                   if (fis != null) {
                   fis.close();
                   }
                   }

    showExcelData(sheetData);

    @SuppressWarnings("unused")
    HashMap<String, String> tableFields = new HashMap();
          for (int i=0; i<sheetData.size();i++){
          List list = (List) sheetData.get(i);
              for (int j=0; j<list.size(); j++){
                Cell cell = (Cell) list.get(j);
                 if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
                System.out.print(cell.getNumericCellValue());

                  }else if(cell.getCellType()==Cell.CELL_TYPE_STRING) {

                  System.out.print(cell.getRichStringCellValue());
              } else if(cell.getCellType()==Cell.CELL_TYPE_BOOLEAN) {
            System.out.print(cell.getBooleanCellValue());
                    }
                if (j < list.size() - 1) {
            System.out.print(", ");
                    }}}
                    }

    private static void showExcelData(List sheetData) {

        }

    @SuppressWarnings("unchecked")
    private HashMap parseExcelData (List sheetData){

            HashMap<String,Integer> tableFields = new HashMap();
            List list = (List) sheetData.get(0);
            for (int j=0; j<list.size(); j++){
                Cell cell=(Cell) list.get(j);
                tableFields.put(cell.getStringCellValue(),cell.getCellType());
        }

            return tableFields;

        }

    @SuppressWarnings({ "unchecked", "unchecked", "unchecked", "unchecked", "unused" })
    private String getCreateTable(String tablename, HashMap<String, Integer> tableFields){
        Iterator iter = tableFields.keySet().iterator();
        String str="";
        String[] allFields = new String[tableFields.size()];
        int i = 0;
        while (iter.hasNext()){
        String fieldName = (String) iter.next();
        Integer fieldType=(Integer)tableFields.get(fieldName);

        switch (fieldType){
        case Cell.CELL_TYPE_NUMERIC:
        str=fieldName + "INTEGER";
        break;
        case Cell.CELL_TYPE_STRING:
        str= fieldName + "VARCHAR(255)";
        break;
        case Cell.CELL_TYPE_BOOLEAN:
        str=fieldName + "INTEGER";
        break;
            }
        allFields[i++]= str;
        }
        return str; 
    }

    public Connection getConnection() throws SQLException {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/kainourgia","root", "root");
            Statement  stmt = con.createStatement();
            try
            {
            System.out.println( "Use the database..." );
            stmt.executeUpdate( "USE kainourgia;" );
            }
            catch( SQLException e )
            {
            System.out.println( "SQLException: " + e.getMessage() );
            System.out.println( "SQLState:     " + e.getSQLState() );
            System.out.println( "VendorError:  " + e.getErrorCode() );
            }
            try
            {
                String[] allFields;
                String createTableStr = "CREATE TABLE" + createTableStr
                   + "(" + org.apache.commons.lang3.StringUtils.join(allFields,
                   ",") + ")";

                System.out.println( "Create a new table in the database" );
                stmt.executeUpdate( createTableStr );
                }
            catch( SQLException e )
            {
            System.out.println( "SQLException: " + e.getMessage() );
            System.out.println( "SQLState:     " + e.getSQLState() );
            System.out.println( "VendorError:  " + e.getErrorCode() );
            }
            }
            catch( Exception e )
            {
            System.out.println( ((SQLException) e).getSQLState() );
            System.out.println( e.getMessage() );
            e.printStackTrace();
            }
        return null;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:33:28.220

您一定会在这里遇到编译错误：

```
 String[] allFields;
            String createTableStr = "CREATE TABLE" + createTableStr
               + "(" + org.apache.commons.lang3.StringUtils.join(allFields,
               ",") + ")"; 
```

您收到此错误是因为您在`allFields`未初始化的情况下使用了它。如果不先初始化，就不能使用局部引用变量。先初始化，再使用。此外，您应该使用从 Excel 文件中读取的列名值对其进行初始化，以便正确创建表。

另外，我看到您将 e 投射到`SQLException`此处：

```
 catch( Exception e )
        {
        System.out.println( ((SQLException) e).getSQLState() );
        System.out.println( e.getMessage() );
        e.printStackTrace();
        } 
```

您不应该这样做，因为如果 e 是 的实例`SQLException`，它将被第一个 catch 块捕获。它已到达第二个 catch 块，表明它不是`SQLException`. 因此，`ClassCastException`当您尝试将其转换为`SQLException`.

# javascript - JQPlot 显示堆叠条水平错误

> ID：16061110
> 
> 赞同：0
> 
> 时间：2013-04-17T13:16:57.020
> 
> 标签：javascript, jquery, html, css, jqplot

我在水平显示 JQPlot 堆叠条时遇到问题。

我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Vertical Graph</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="script/jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="script/jqplot.barRenderer.min.js"></script>
    <script type="text/javascript" src="script/jqplot.categoryAxisRenderer.min.js"></script>
    <script type="text/javascript" src="script/jqplot.pointLabels.min.js"></script>
    <link rel="Stylesheet" type="text/css" href="css/jquery.jqplot.min.css" />
</head>
<body>
    <div id="test" style="width:auto; height:auto;"></div>
    <script type="text/javascript">
        $(document).ready(function () {
            var s1 = [1, 6, 7, 10];
            var s2 = [3, 5, 3, 4];
            var s3 = [14, 9, 3, 8];
            plot3 = $.jqplot('test', [s1, s2, s3], {
                // Tell the plot to stack the bars.
                stackSeries: true,
                captureRightClick: true,
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    rendererOptions: {
                        barDirection: 'horizontal',
                        // Put a 30 pixel margin between bars.
                        barMargin: 30,
                        // Highlight bars when mouse button pressed.
                        // Disables default highlighting on mouse over.
                        highlightMouseDown: true
                    },
                    pointLabels: { show: true }
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer
                    },
                    yaxis: {
                        // Don't pad out the bottom of the data range.  By default,
                        // axes scaled as if data extended 10% above and below the
                        // actual range to prevent data points right on grid boundaries.
                        // Don't want to do that here.
                        padMin: 0
                    }
                },
                legend: {
                    show: true,
                    location: 'nw',
                    placement: 'inside'
                }
            });
            // Bind a listener to the "jqplotDataClick" event.  Here, simply change
            // the text of the info3 element to show what series and ponit were
            // clicked along with the data for that point.
            $('#chart3').bind('jqplotDataClick',
                function (ev, seriesIndex, pointIndex, data) {
                    $('#info3').html('series: ' + seriesIndex + ', point: ' + pointIndex + ', data: ' + data);
                }
            );
            $(window).resize(function () {
                plot3.replot({ resetAxes: true });
            });
        });
    </script>
</body>
</html> 
```

抱歉，我不能发布图片，但我没有足够的声誉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:42:58.083

谢谢，但我用另一种方式解决了。

这是我的代码：

```
 axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                },
                yaxis: {
                    // Don't pad out the bottom of the data range.  By default,
                    // axes scaled as if data extended 10% above and below the
                    // actual range to prevent data points right on grid boundaries.
                    // Don't want to do that here.
                    padMin: 0
                }
            }, 
```

在此更改：

```
axes: {
                yaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                    }
            }, 
```

所以它有效;）

# php - 如果数据不在表中，mysql查询不返回结果

> ID：16061115
> 
> 赞同：0
> 
> 时间：2013-04-17T13:17:11.167
> 
> 标签：php, select, mysqli

这是几乎有效的查询：

```
$query  = '';
$query .= ' SELECT highway_code.charge_id, 
        highway_code.act_abbr, 
        highway_code.short_form_wording, 
        highway_code.section, 
        highway_code.set_fine,  
        highway_code_arrest_jail_tow.demerits
        ';
$query .= ' FROM highway_code, highway_code_arrest_jail_tow ';
$query .= ' WHERE highway_code.charge_id = ? ';
$query .= ' AND highway_code.section = highway_code_arrest_jail_tow.section ';
$query .= ' AND highway_code.act_abbr = highway_code_arrest_jail_tow.act_abbr '; 
```

问题是并非所有高速公路代码收费都有记过，因此即使所有其他字段都适用，任何没有记过的费用都不会退回。我希望退回所有费用，无论`highway_code_arrest_jail_tow`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:25:43.500

在子句中使用逗号分隔的表，`FROM`相关列之间的相等条件意味着`INNER JOIN`. 要强制从主表返回所有记录，而不管相关表中是否存在相关记录，请改用 a `LEFT JOIN`。

我将用显式替换您的隐式内部连接`LEFT JOIN`：

```
SELECT
  highway_code.charge_id, 
  highway_code.act_abbr, 
  highway_code.short_form_wording, 
  highway_code.section, 
  highway_code.set_fine,  
  highway_code_arrest_jail_tow.demerits
FROM
  highway_code
  LEFT JOIN highway_code_arrest_jail_tow
     /* Two relating conditions belong in the ON clause */
     ON highway_code.section = highway_code_arrest_jail_tow.section
     AND highway_code.act_abbr = highway_code_arrest_jail_tow.act_abbr
WHERE
  /* and the filtering condition remains in the WHERE */
  highway_code.charge_id = ? 
```

# android - Android：相对于屏幕尺寸缩放可绘制对象

> ID：16061116
> 
> 赞同：2
> 
> 时间：2013-04-17T13:17:12.027
> 
> 标签：android, image, drawable, scaling, percentage

新手Android程序员在这里。

我正在尝试制作一张由几张图像组成的地图。我的布局工作正常，但我在缩放这些图像时遇到了很多麻烦。我已经用谷歌搜索并尝试了几种解决方案，但都没有解决我的问题，所以我求助于你们。

如果我想要一个图像，例如其宽度为屏幕宽度的 10%，高度为屏幕高度的 5%，我该如何实现呢？

# jquery-ui - JQuery UI 1.10.2 - 如何让调整大小的句柄在对话框中可见？

> ID：16061117
> 
> 赞同：6
> 
> 时间：2013-04-17T13:17:12.287
> 
> 标签：jquery-ui, jquery-ui-resizable

调整大小手柄不会显示在对话框或我尝试在对话框内调整大小的任何内容中。我知道[这是设计](http://bugs.jqueryui.com/ticket/4575)使它们在主题中被禁用，但我如何让它们可见？我需要在对话内容中看到它们，而对话内容也不会受到伤害。

```
<p><a href="#dialog">Dialog</a>
<div id="dialog" style="display:none;">
  <p>foobar</p>
    <div style="width:100px; height:100px; border:1px solid;" id="bar">BAR</div>
</div>
<script>
    $(function(){
      $('a[href=#dialog]').click( function(e) {   
        e.preventDefault(); 
          $('#dialog').dialog({
              open: function() {
                   $('#bar').resizable({handles:'sw,se,e'});   
              }
          });
      });
    });
</script> 
```

同样在 JSFiddle：http: [//jsfiddle.net/s22nx/](http://jsfiddle.net/s22nx/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:41:55.163

这里有几件事导致了这个问题，其中之一*可能*是一个错误。

首先，您是正确的，故意隐藏了*东南*手柄，但是所有[8 个手柄](http://api.jqueryui.com/resizable/#option-handles)仍然作为对话框中的元素存在。这是个好消息，因为您可以添加以下 CSS 来恢复`se`手柄。绕过故意隐藏有点麻烦，您可能需要调整`right`和`bottom`定位以满足您的需求。

```
.ui-dialog .ui-resizable-se {
    right:0 !important;
    bottom:0 !important;
    background-position: -64px -224px !important;
} 
```

其他抓取器似乎在设计上没有与之相关的风格。我检查的所有主题都没有任何可见[的](http://jqueryui.com/themeroller)*样式*（除了`cursor`）。`.ui-resizable-`在[jquery-ui.css](http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css)中搜索以查看此内容。

[这在文档](http://api.jqueryui.com/resizable/#option-handles)中有所涵盖，但仅在生成您自己的句柄的上下文中提及。现有的主题支持没有任何明确的内容。幸运的是，所有句柄共享一个类，因此我们可以通过添加使它们全部可见：

```
.ui-resizable-handle {
    background-color:lightblue;
} 
```

或者只是一侧，例如：

```
.ui-resizable-s {
    background-color:lightblue;
} 
```

我提到的可能的错误与控制句柄元素的生成有关。有问题的代码`$('#bar').resizable({handles:'sw,se,e'});`应该是正确的，并且只产生 3 个句柄元素，但总是出现所有 8 个。

在 (v1.10.2) 的`_makeResizable`函数中，[`jquery-ui.js`](http://code.jquery.com/ui/1.10.2/jquery-ui.js)该行：

```
resizeHandles = typeof handles === "string" ? handles : "n,e,s,w,se,sw,ne,nw"; 
```

应该将正确的 resizeHandles 设置为您作为选项参数提供的值，但`typeof handles = 'object'`对我来说，所以 jQueryUI 使用的是三元组的 else 部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T19:27:44.860

在css文件中，我不得不改变：

```
.ui-dialog .ui-resizable-se {
    width: 12px;
    height: 12px;
    right: -5px;
    bottom: -5px;
    background-position: 16px 16px;
} 
```

至：

```
.ui-dialog .ui-resizable-se {
    width: 12px;
    height: 12px;
    right: 3px;
    bottom: 3px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T15:02:54.040

或者您只是忘记包含所需的 css

```
<script src="js/jquery-ui.min.js"></script> 
```

检查[这个](https://code.jquery.com/ui/)

**UPD** [他们确实有句柄，只是在默认主题下不可见。这不是特定于 jQuery UI 的东西。许多可调整大小的窗口都以这种方式工作。](https://bugs.jqueryui.com/ticket/9217#comment:3)

# android - PowerBuilder 上的 Android 应用程序开发

> ID：16061121
> 
> 赞同：0
> 
> 时间：2013-04-17T13:17:29.160
> 
> 标签：android, powerbuilder

任何人都知道是否可以使用 PowerBuilder 开发 android 应用程序。在 Google 上没有找到太多关于此的信息，这可能意味着它不是，但仍然想在 stackoverflow 上听到 ppl 的意见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:54:08.343

现在我认为唯一的可能性是 Appeon Mobile for PowerBuilder。这是一个测试版，它现在支持 iOS，但几个月后它也将能够构建原生 android 和 Windows Phone 应用程序。

[http://www.appeon.com/list.do?fid-60-page-1.htm](http://www.appeon.com/list.do?fid-60-page-1.htm)

我也几乎等不及了:)

兄弟。加博尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:30:39.287

我考虑过的另一种可能的解决方案，但这不是一个简单的解决方案。查看 MSDN 中的 IIS 模块和处理程序。基本上，您可以在 PB.NET 中编写一个处理程序，该处理程序将在 IIS 中用于创建几乎可以在包括移动设备在内的任何浏览器中运行的 HTML5。

然后，您可以分配特定的文件类型（例如 .powerbuilder ），该文件类型将由您用 PB.NET 编写的自定义处理程序处理。

可能是一个很好的开源项目。

# objective-c - 正确更新 tableview 中的 JSON 数据

> ID：16061122
> 
> 赞同：0
> 
> 时间：2013-04-17T13:17:31.823
> 
> 标签：objective-c, json

当用户滑动更新（UIRefreshControl）时，我很难用新结果更新我的表格视图。控制器工作正常，但数据永远不会更新。我试图擦除原始数据变量和保存所有数据的 NSArray，但它似乎不起作用。我是 iPhone 编程的新手，所以请原谅我这是一个愚蠢的问题。

如果我设法修复它，删除我已经提取的所有数据会不会是错误的？考虑到我的大多数用户将使用 3G/Edge 连接，是否有一种简单的方法来追加更改。这是我的 TableViewController 实现类：

```
#import "Nyhetsfane.h"

@interface Nyhetsfane ()

@end

@implementation Nyhetsfane

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Kaller på slide to update.
    [self updateTable];

    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];

    [refreshControl addTarget:self action:@selector(updateTable) forControlEvents:UIControlEventValueChanged];
    [refreshControl setAttributedTitle:[[NSAttributedString alloc] initWithString:@"Dra for å oppdatere"]];

    self.refreshControl = refreshControl;
}

- (void)updateTable{

    // Viser "spinner" for å symbolisere nettverkstrafikk.
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    // URL til JSON filen
    NSURL *newsUrl = [NSURL URLWithString:@"http://localhost:7192/fadderapp/events.json"];

    //URL Requestobjekt for å kontrollere tilkobling
    NSURLRequest *newsRequest = [NSURLRequest requestWithURL:newsUrl];
    [[NSURLConnection alloc]initWithRequest:newsRequest delegate:self];

    [self.tableView reloadData];
    [self.refreshControl endRefreshing];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [newsRawData setLength:0];
    newsRawData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [newsRawData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    newsCases = [NSJSONSerialization JSONObjectWithData:newsRawData options:0 error:0];
    [self.tableView reloadData];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    UIAlertView *errorView = [[UIAlertView alloc]initWithTitle:@"Feil" message:@"Det har oppstått en feil ved nedlastingen av data. Dobbeltsjekk at du er koblet til internett" delegate:nil cancelButtonTitle:@"Fortsett" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [newsCases count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if(cell == nil){

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cell"];
    }

     cell.textLabel.text = [[newsCases objectAtIndex:indexPath.row]objectForKey:@"navn"];

    return cell;
}
    ... 
```

无论如何，这是我的 JSON 提要：

```
 [ 
{"navn": "Registration", "tidspunkt": "Monday 15:05", "beskrivelse": "Demo!"},
{"navn": "Party!", "tidspunkt": "Monday 19:30", "beskrivelse": "Demo"}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:24:27.750

尝试使用此代码

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    newCases = [NSArray array];
    newsCases = [NSJSONSerialization JSONObjectWithData:newsRawData options:0 error:0];
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T13:20:35.300

更新表格视图的正确方法是调用

```
[self.tableView reloadData]; 
```

它应该自动再次调用其所有数据源方法。

# c# - 蛮力 7z 密码测试

> ID：16061126
> 
> 赞同：6
> 
> 时间：2013-04-17T13:17:46.003
> 
> 标签：c#, 7zip, brute-force, password-recovery

在 7-zip 没有“确认密码”字段的日子里，我的密码打错了。所以现在我有一个受密码保护的 7-zip 文件。我编写了一些软件来生成密码最可能的拼写错误（5500 万），并将它们存储在每 25k 的文件中。现在我正在一个接一个地尝试它们。使用 Macbook 上的 unar 命令行工具，我可以在一小时内完成大约 25k pwd。

它有效，但仍然需要 100 天（24/7）才能通过所有 5500 万 pwd。现在我想知道，是否有一些库（c# mono/dotnet）支持解码受密码保护的 7z 文件？

也欢迎任何其他有关解决我的问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:31:36.477

要加速蛮力，请考虑使用 CUDA 或 OpenCL。这些将让您利用主机的 GPU 来执行您的处理，并将更快地产生结果。

每小时 25K 个密码是相当低的——当哈希破解（例如）时，一个使用 GPU 的好工具将能够在中高端 GPU 上每分钟达到 95 亿个密码。

虽然在尝试突破 7z 时不太可能达到该数字，但您肯定会看到速度增加。

此外 - PC 越好，结果就越好。在许多情况下，Linux 机器是您最好的选择。如果您可以使用计算机集群 - 那就更好了。

# android - 在按钮单击时打开一个新活动

> ID：16061127
> 
> 赞同：0
> 
> 时间：2013-04-17T13:17:46.897
> 
> 标签：android, class, android-intent, android-activity

我查看了在活动之间切换的每个示例，并且总是得到相同的结果。该应用程序炸弹。

据我所知，如果您有一个填充布局内容的 java 类，那么为了切换到另一个布局，您必须“链接”到 java 文件，该文件反过来将打开 setContentView(R.layout.任何）;

当我尝试这样做时，就像我说我的应用程序爆炸一样。我的代码如下： -

来自Java类：-

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.activity_main);

    Button next = (Button) findViewById(R.id.goesnews);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), ac2.class);
            startActivityForResult(myIntent, 0);
        }

    });

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);   

} 
```

到 java 文件 (ac2)

```
 public class ac2 extends Activity {

     /** Called when the activity is first created. */
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main2);

     }} 
```

任何人都可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:53:10.907

解决方案很简单，基于 VSK（谢谢）的响应，稍作调整。

所需的 ImageButton ：-

```
 <Button 
    android:id="@+id/previous" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="click"
    android:onClick="move" /> 
```

需要Java：-

```
 public void move(View v)
    {
    Intent myIntent = new Intent(yourclass.this, ac2.class);
    startActivityForResult(myIntent, 0);
    } 
```

VSK - 请注意 startActivityForResult 的“0”属性

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:26.663

试试这个方法

像这样将 onclick 函数添加到 xml 文件中的按钮

```
<Button 
        android:id="@+id/previous" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="click"
        android:onClick="move" /> 
```

并在你的java文件中像这样移动一个函数

```
public void move(View v)
{
         Intent myIntent = new Intent(yourclass.this, ac2.class);
        startActivityForResult(myIntent,0);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:23:10.650

尝试从此行中删除零：

```
startActivityForResult(myIntent, 0); 
```

像这样并将其更改为：

```
startActivity(myIntent); 
```

并更改此行：

```
Intent myIntent = new Intent(view.getContext(), ac2.class); 
```

对此：

```
Intent myIntent = new Intent(firstActivityName.this, ac2.class); 
```

因为您在这里获得的是按钮的上下文而不是活动的上下文。

# sharepoint - ECMAScript 中的外部内容类型方法

> ID：16061129
> 
> 赞同：1
> 
> 时间：2013-04-17T13:17:51.730
> 
> 标签：sharepoint, sharepoint-2013, office365

目前我正在处理 SharePoint Online (Office 365) 项目。我根据业务需求为我的项目使用了沙盒解决方案和 WCF 服务。

我使用 WCF 服务创建了一个外部内容类型 (BCS)，并从中定义了外部列表。WCF 服务的某些操作没有配置任何外部列表。

如何使用 ECMAScript 在我的可视化 Web 部件中调用这些操作？有没有其他相同的解决方案？

请帮助我，我对 SharePoint 开发非常陌生。感谢您的帮助。

# php - 为什么 echo $this->uri->segment(3) 输出与我在 url 中看到的不同

> ID：16061131
> 
> 赞同：2
> 
> 时间：2013-04-17T13:17:56.223
> 
> 标签：php, codeigniter

所以我有这样的网址：

```
http://localhost/testproject/data/getData/幻想 
```

然后在函数 getData 我有：

```
public function getData($title){
    echo $title;
} 
```

在输出中我看到：

```
%E5%B9%BB%E6%83%B3 
```

如果我尝试 $this->uri->segment(3) 也是如此。为什么会这样，以及如何解决它？我还注意到，如果我在这里粘贴整个网址，我会得到：

```
 http://localhost/testproject/data/getData/%E5%B9%BB%E6%83%B3 
```

我这里真的走投无路了...

顺便提一句。文件以 UTF8 编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:21:01.960

```
Use this

site_url('data/getData/'.urlencode('幻想')); 
```

在 php 端使用这个

```
$segment = $this->uri->segment(3);
$value = urldecode($segment); 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:21:07.400

你可以使用 urldecode 看看这个[http://php.net/manual/fr/function.urldecode.php](http://php.net/manual/fr/function.urldecode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:21:56.760

由于空格字符，空格。

尝试对您的网址进行编码或解码以查看正确的网址，您可以使用 urldecode() 函数或 urlencode() 取决于您要显示的方式...

[http://www.php.net/manual/en/function.urlencode.php](http://www.php.net/manual/en/function.urlencode.php)

[http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

# java - 在 Java EE Web 应用程序中计算用户数的最佳方法

> ID：16061133
> 
> 赞同：1
> 
> 时间：2013-04-17T13:17:59.450
> 
> 标签：java, jakarta-ee, monitoring

计算使用特定 java EE JSF Web 应用程序的活跃用户数量的最佳方式/模式是什么？

我知道的两种方法是 HttpSessionListener 和使用 JMX Web bean，如果有第三种更好的方法，我愿意接受建议。我只是想找出最优雅的解决方案。

非常感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:23:21.487

如果您想在不使用任何框架构建的简单 Java Web 应用程序中同时跟踪活跃用户的数量，那么执行此操作的标准方法是实现`HttpSessionListener`。下面的代码只是对您可以实现它的方式的参考。

```
import java.util.concurrent.atomic.AtomicInteger;

import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class ActiveUserCounter implements HttpSessionListener {  

      private static AtomicInteger activeSessions = new AtomicInteger();    

      public void sessionCreated(HttpSessionEvent se) {  
              activeSessions.incrementAndGet();  
      }  

      public void sessionDestroyed(HttpSessionEvent se) {  
                if(activeSessions.get() > 0)  
                       activeSessions.decrementAndGet();  
      }  

     public static int getActiveSessions() {  
             return activeSessions.get();  
      }   
} 
```

在 web.xml 中定义侦听器类。

# ruby-on-rails - 设计 ginjo-rfm

> ID：16061134
> 
> 赞同：2
> 
> 时间：2013-04-17T13:18:05.140
> 
> 标签：ruby-on-rails, rails-activerecord, filemaker

我正在使用 ginjo-RFM gem 连接到 Filemaker 数据库，并希望使用 Devise 进行身份验证。问题在于，Devise 要求我的用户模型从 ActiveRecord::Base 继承 - 而 RFM 要求它完全访问数据库，从 Rfm::Base 继承。是否可以让我的 User 类同时继承 Rfm::Base 和 ActiveRecord::Base？

**用户.rb**（模型）

```
class User < Rfm::Base
require 'rfm'
rolify
config :layout => 'XXXXXX' #Connecting Rails to the FileMaker layout
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

attr_accessible :role_ids, :as => :admin
attr_accessible :name, :email, :password, :password_confirmation, :remember_me

end 
```

这将失败，因为设计依赖于 ActiveRecord::Base，反之亦然。有任何想法吗？

**Ginjo-rfm：** [http ://rubygems.org/gems/ginjo-rfm](http://rubygems.org/gems/ginjo-rfm)

**设计：** [https ://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T06:59:05.380

Devise 实际上依赖于[orm_adapter](https://github.com/ianwhite/orm_adapter)而不是直接依赖于 ActiveRecord。（看[这里](https://github.com/plataformatec/devise/tree/master/lib/devise/orm)。）所以理论上，将 Devise 与任何实现了 OrmAdapter 的类一起使用是微不足道的。

由于[ginjo-rfm 实现了 ActiveModel](https://github.com/ginjo/rfm#data-modeling-with-activemodel)，因此为其编写 OrmAdapter 可能不会太难。（查看[ActiveRecord OrmAdapter](https://github.com/ianwhite/orm_adapter/blob/master/lib/orm_adapter/adapters/active_record.rb) - 它几乎适合一个屏幕。）

总结一下我的方法：

1.为 ginjo-rfm 编写一个 OrmAdapter（并希望将其作为 gem 开源！）。

2.然后将以下内容添加到您的应用程序中（或将其作为 gem 发布，以便其他人受益）：

```
require 'orm_adapter/adapters/rfm'

Rfm::Base.extend Devise::Models 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:40:00.640

您最好的选择可能是创建一个新类，您可以将文件制作者调用委托给该类。

User 类是他们对您的网站进行身份验证以及您管理角色的方式。

```
class User < ActiveRecord::Base
  rolify

  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me

end 
```

FileMakerUser 类用于访问 Filemaker

```
class FileMakerUser < Rfm::Base
 require 'rfm'
 config :layout => 'XXXXXX' #Connecting Rails to the FileMaker layout
 # other filemaker stuff
end 
```

您可以使用 file_maker_user 吗？用户中的列表示他们有一个文件制作者帐户。（如果这是有道理的，比如不是您的网络应用程序的所有用户都必须拥有文件制作者帐户才能使用系统）

# excel - Excel 中的 VLOOKUP 问题

> ID：16061136
> 
> 赞同：0
> 
> 时间：2013-04-17T13:18:05.443
> 
> 标签：excel, vlookup

我在一张包含税值列表的表格中有一个税表。例如：

```
Sheet1:  Tax Tables
    A      B      C
1  Min    Max    Taxed
   -------------------
2  50     100    10
3  100    200    20
4  200    300    30 
```

在另一张表中，我在单元格 A1 中的总收入值为 120。我想要做的是有一个 vlookup（我假设这是我应该使用的）检查单元格 A1 以查看它是否在最小值和最大值之间，然后在 B1 中输出应税金额。

```
Sheet2:  Income
    A      B
1  Gross FedTax
   -----------
2  120   Value from Column C goes here 
```

我已经在税表中设置了命名空间 A:C=Min 和 B:C=Max 我尝试这样做：

```
=AND(VLOOKUP(<A1,Min,3,False),VLOOKUP(>A1,Max,2,FALSE)) 
```

但甚至没有关闭......我只想检查第一张表中的A列，看看它是否小于第二张表中的值，并检查第一张表中的B列与第二张表中的值是否更多，然后将第一张表中 C 列中的值放入第二张表中值旁边的单元格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:32:07.480

要使用 VLOOKUP，请将您的最大值和最小值放在同一列中。

![在此处输入图像描述](https://i.stack.imgur.com/fgIk3.jpg)

然后使用 TRUE 参数，这意味着它会查找下一个匹配的值。假设您在 D2 中查找的值，您将在 E2 中放置这样的公式：

```
=VLOOKUP(D2,$A$2:$B$5,2,TRUE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/brQ91.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:59.963

首先，不清楚当金额正好是 50/100/200/300/... 时您将应用什么...所以我决定在区间中包含下限并排除上限。

对于这个问题，我会使用这样的 sumifs（你必须决定在哪一侧放置等号： `=SUMIFS(Sheet1!C:C;Sheet1!A:A;"<="&A1;Sheet1!B:B;">"&A1)`

这只会取 C 列中 A 列中的值小于或等于 120 且 B 列中的值大于 120 的元素

# batch-file - 批处理文件替换某些字符

> ID：16061140
> 
> 赞同：0
> 
> 时间：2013-04-17T13:18:27.650
> 
> 标签：batch-file

我只是要完成我的脚本，为文本文件中的每一行复制文件夹结构。我们想要一个包含每个客户的子文件夹的文件夹。客户“Test”文件夹应放在\path\e$\Relaties\T\Test 中。因此，对于每个 beginletter，一个特定的文件夹，对于其余的数字或字符，一个“_Overig”（其他）文件夹。

这一切都很好，但我有特殊字符的问题，如 %* / \ ' " 等等。在下面的示例中，我想删除*文件夹名称中的所有 '，因为 Windows 不支持。我这样做set var=!var2:* =! 但它不起作用。此外，当文本文件中的一行包含 ! 时，脚本也会崩溃。我可以通过将 ^! instedad of ! 放入批处理文件中来逃避它，但是因为它是由我们的 Intranet 生成的，我希望下面的批处理文件只是为了处理 ! 并自行转义它。

请帮帮我。

```
setlocal EnableDelayedExpansion
set file=E:\list.txt

FOR /F "delims=~" %%i IN (!file!) DO (

echo %%i

set var2=%%i
set var=!var2:*=!

set str=!var:~0,1!
IF /i !str!==A ( set letter=1&&set str=A)
IF /i !str!==B ( set letter=1&&set str=B)
IF /i !str!==C ( set letter=1&&set str=C)
IF /i !str!==D ( set letter=1&&set str=D)
IF /i !str!==E ( set letter=1&&set str=E)
IF /i !str!==F ( set letter=1&&set str=F)
IF /i !str!==G ( set letter=1&&set str=G)
IF /i !str!==H ( set letter=1&&set str=H)
IF /i !str!==I ( set letter=1&&set str=I)
IF /i !str!==J ( set letter=1&&set str=J)
IF /i !str!==K ( set letter=1&&set str=K)
IF /i !str!==L ( set letter=1&&set str=L)
IF /i !str!==M ( set letter=1&&set str=M)
IF /i !str!==N ( set letter=1&&set str=N)
IF /i !str!==O ( set letter=1&&set str=O)
IF /i !str!==P ( set letter=1&&set str=P)
IF /i !str!==Q ( set letter=1&&set str=Q)
IF /i !str!==R ( set letter=1&&set str=R)
IF /i !str!==S ( set letter=1&&set str=S)
IF /i !str!==T ( set letter=1&&set str=T)
IF /i !str!==U ( set letter=1&&set str=U)
IF /i !str!==V ( set letter=1&&set str=V)
IF /i !str!==W ( set letter=1&&set str=W)
IF /i !str!==X ( set letter=1&&set str=X)
IF /i !str!==Y ( set letter=1&&set str=Y)
IF /i !str!==Z ( set letter=1&&set str=Z)

IF !letter!==1 ( set pad=\\fs1\e$\Data\Relaties\!str!\!var!) ELSE (set pad=\\fs1\e$\Data\Relaties\_Overig\!var!)
set oudpad=\\fs1\e$\Data\Klanten\!var!
xcopy "\\fs1\e$\Data\Relaties\_template\_template" "!pad!" /T /E /O /I

robocopy "!oudpad!\adviesrapporten" "!pad!\Documentatie\Adviesrapporten" /ZB /COPY:DAT /R:3 /W:1

set letter=0

) 
```

编辑：

使用 set var=!var:**=! 修复了星号问题

但是，如果我想要一个带有 ! 在其中，脚本会忽略它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:50:22.757

Ok - try this:

```
@ECHO OFF
SETLOCAL
FOR /f "delims=" %%i IN (E:\list.txt) DO (
 ECHO "%%i"|FINDSTR /i /b /r .[a-z] >nul
IF ERRORLEVEL 1 (set letter=_Overig) ELSE (SET letter=%%i&CALL SET letter=%%letter:~0,1%%)
SET var=%%~i
CALL :transmute
)
GOTO :eof

:transmute
SETLOCAL enabledelayedexpansion
SET var=!var:^|=!
SET var=!var:^>=!
SET var=!var:^<=!
SET var=!var:%%=!
SET var=!var:^&=!
endlocal&SET var=%var%
SET var=%var:?=%
SET var=%var::=%
SET var=%var:[=%
SET var=%var:]=%
SET var=%var:`=%
SET var=%var:'=%
SET var=%var:{=%
SET var=%var:}=%
SET var=%var:/=%
SET var=%var:\=%
SET nvar=%var:"=%
SET "var="
:tmlp
IF NOT "%nvar:~0,1%"=="*" IF NOT "%nvar:~0,1%"=="=" SET var=%var%%nvar:~0,1%
SET nvar=%nvar:~1%
IF DEFINED nvar GOTO tmlp
SET pad=\\fs1\e$\Data\Relaties\%letter%\%var%
set oudpad=\\fs1\e$\Data\Klanten\%var%
ECHO XCOPY "\\fs1\e$\Data\Relaties\_template\_template" "%pad%" /T /E /O /I
ECHO robocopy "%oudpad%\adviesrapporten" "%pad%\Documentatie\Adviesrapporten" /ZB /COPY:DAT /R:3 /W:1

GOTO :eof 
```

which at least doesn't crash on data file

```
name 1
allo! allo!
"good grief!"
@last!
%percents-problem or not?%
how about ^carets?
NOT carrots
(what does this do?)
)and what about this?
;semi to start?
-dash
^caret?
^^double-caret?
&ampersand schmooze
!now this is a test!!
=can be skipped
:colon, of course
    and ever-loving spaces
*s fell on stockton
9" nails
|pipe?
?question mark??
>greater?
<less??
.dot
,comma
12345
`that's all
o'connor
]close-square
[open-square
{and brace-open
}or close
/slash
\slosh 
```

Essentially, after checking that the line starts with a letter, each name is massaged to remove awkward characters and eventually the name and directory are displayed.

Neither the `XCOPY` nor the `ROBOCOPY` is activated; you'd need to remove the preceding `ECHO` after checking...

# c# - 为什么使用 HttpContext 的 MVC 4 会话助手工作而 HttpContextBase 不工作？

> ID：16061150
> 
> 赞同：2
> 
> 时间：2013-04-17T13:18:56.393
> 
> 标签：c#, asp.net-mvc-4

我根据以下示例实现了一个会话助手来保存和检索会话变量：（我尽量减少会话变量的使用） [Stackoverflow 问题](https://stackoverflow.com/questions/1424681/helper-class-to-wrap-the-session-for-mvc-net-web-development)

我在 Visual Studio 2012 上使用 MVC 4 和目标 .NET 4.5。

我实现了一个设置器。这个使用HttpContextBase（即controller.HttpContext）：

```
public class HttpContextBaseSessionHelper : ISessionHelper
{
    private readonly HttpContextBase _context;

    public HttpContextBaseSessionHelper(HttpContextBase context)
    {
        _context = context;
    }

    public T Get<T>(string key)
    {
        object value = _context.Session[key];
        return value == null ? default(T) : (T)value;
    }

    public void Set<T>(string key, T value)
    {
        _context.Session[key] = value;
    }
} 
```

此实现使用 HttpContext（即 System.Web.HttpContext.Current）：

```
public class HttpContextSessionHelper : ISessionHelper
{
    private readonly HttpContext _context;

    public HttpContextSessionHelper(HttpContext context)
    {
        _context = context;
    }

    public T Get<T>(string key)
    {
        object value = _context.Session[key];
        return value == null ? default(T) : (T)value;
    }

    public void Set<T>(string key, T value)
    {
        _context.Session[key] = value;
    }
} 
```

在控制器中，HttpContext 属性的类型为 HttpContextBase (Controller.HttpContext)。我可以模拟（使用 Moq）基于 HttpContextBase 的 ISessionHelper。

如果设置和检索了正确的值，我使用以下两个控制器操作在正在运行的应用程序（而不是单元测试）中查看：

```
public ActionResult SessionSet()
{
    _sessionHelper.Set<string>("TestKey", "TestValue");
    ViewBag.SessionValue = (string)HttpContext.Session["TestKey"];
    return View();
}

public ActionResult SessionGet()
{
    HttpContext.Session["TestKey"] = "TestValue";
    ViewBag.SessionValue = _sessionHelper.Get<string>("TestKey");
    return View();
} 
```

使用上述操作时，此实现会引发 NullReference 异常：

```
_sessionHelper = new HttpContextBaseSessionHelper(HttpContext); 
```

但是这个实现工作得很好：

```
_sessionHelper = new HttpContextSessionHelper(System.Web.HttpContext.Current); 
```

我的问题是为什么会发生这种情况？使用 HttpContextBase 的实现不应该工作，而使用 HttpContext 的实现不应该看到 Controller.HttpContext 返回一个 HttpContextBase 类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:23:02.623

> 使用上述操作时，此实现会引发 NullReference 异常：
> 
> _sessionHelper = new HttpContextBaseSessionHelper(HttpContext);

您已将此代码放在控制器的构造函数中，不是吗？这[`HttpContext`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.httpcontext%28v=vs.108%29.aspx)是行不通的，因为该属性在此阶段尚未初始化。[`Initialize`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.initialize%28v=vs.98%29.aspx)如果要访问任何 HttpContext 相关属性，则应将此代码放入方法中：

```
protected override void Initialize(RequestContext requestContext)
{
    base.Initialize(requestContext);
    _sessionHelper = new HttpContextBaseSessionHelper(HttpContext);
} 
```

从您的问题中评论以下句子：

> 我尽量减少会话变量的使用

您不应该尝试尽量减少会话变量的使用。您应该尝试完全摆脱应用程序中的任何 ASP.NET 会话。

# android - 获取片段窗口令牌

> ID：16061155
> 
> 赞同：0
> 
> 时间：2013-04-17T13:19:10.797
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个 FragmentActivity，其中包含一些包含 EditText 的片段。如果我打开键盘并使用我的自定义导航（切换片段），键盘不会关闭。

我在活动 onCreate 中调用该方法：

```
private void initKeyboardHandler(){
        getSupportFragmentManager().addOnBackStackChangedListener(new OnBackStackChangedListener() {

            @Override
            public void onBackStackChanged() {
                InputMethodManager imm = (InputMethodManager)getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(findViewById(android.R.id.content).getWindowToken(), 0);
            }
        });
    } 
```

调试后我认为问题出在窗口令牌中。还是别的什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:44:18.103

试试这个来关闭键盘，获取它的一个实例：

```
 InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
```

然后关闭它：

```
imm.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS); 
```

**编辑：**

如果 imm 不为空，则在此行之前检查会怎样：

```
if(imm != null)
{
    imm.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT);
} 
```

# algorithm - 渐近符号

> ID：16061157
> 
> 赞同：0
> 
> 时间：2013-04-17T13:19:13.837
> 
> 标签：algorithm, complexity-theory

根据我的研究：我被要求确定一个函数相对于另一个函数的复杂性。即给定`f(n)`和`g(n)`，确定`O(f(n()`。在这种情况下，我会替换值，比较它们并得出复杂度 - 使用`O(), Theta and Omega notations`.

但是，在 中`substitution method for solving recurrences`，每个标准文档都有以下几行：

`• [Assume that T(1) = Θ(1).]`

•`Guess O(n3) . (Prove O and Ω separately.)`

•`Assume that T(k) ≤ ck3 for k < n .`

•`Prove T(n) ≤ cn3 by induction.`

当没有给出其他（除了 f（n））时，我应该如何找到 O 和 Ω？我可能是错的（我，绝对是），欢迎提供上述任何信息。

上面的一些假设是针对这个问题的：`T(n) = 4T(n/2) + n` ，而步骤的基本轮廓是针对所有此类问题的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:10:47.527

这种特定的重复可以通过主定理解决，但您可以从替换方法中获得一些反馈。让我们试试你最初的猜测`cn^3`。

```
T(n)  = 4T(n/2) + n
     <= 4c(n/2)^3 + n
      = cn^3/2 + n 
```

假设我们选择`c`这样`n <= cn^3/2`对于所有相关`n`的，

```
T(n) <= cn^3/2 + n
     <= cn^3/2 + cn^3/2
      = cn^3, 
```

`T`也是`O(n^3)`。_ 这个推导的有趣部分是我们使用三次项来消除线性项。像这样的矫枉过正通常是我们可以猜测得更低的迹象。让我们试试`cn`。

```
T(n)  = 4T(n/2) + n
     <= 4cn/2 + n
      = 2cn + n 
```

这行不通。右手边和我们想要的界限之间的差距是`cn + n`，这是我们想要的界限的大 Theta。这通常意味着我们需要猜测得更高。让我们试试`cn^2`。

```
T(n)  = 4T(n/2) + n
     <= 4c(n/2)^2 + n
      = cn^2 + n 
```

起初，这看起来也很失败。然而，与我们对 的猜测不同`n`，赤字与界限本身相差不大。我们也许可以通过考虑形式的边界来关闭它`cn^2 - h(n)`， where `h`is `o(n^2)`。为什么要减法？如果我们用作`h`候选边界，我们会出现赤字；通过减去`h`，我们就有了盈余。的常见选择`h`是低阶多项式或`log n`。让我们试试`cn^2 - n`。

```
T(n)  = 4T(n/2) + n
     <= 4(c(n/2)^2 - n/2) + n
      = cn^2 - 2n + n
      = cn^2 - n 
```

这恰好是复发的确切解决方案，这对我来说是相当幸运的。如果我们猜到`cn^2 - 2n`了，我们就会剩下一点信用。

```
T(n)  = 4T(n/2) + n
     <= 4(c(n/2)^2 - 2n/2) + n
      = cn^2 - 4n + n
      = cn^2 - 3n, 
```

略小于`cn^2 - 2n`。

# c - 使用 C 语言的 HTTP Web Service 调用

> ID：16061158
> 
> 赞同：0
> 
> 时间：2013-04-17T13:19:15.893
> 
> 标签：c, web-services, http

哪些库可用于使用 C/C++ 语言获取 URL 响应？

目前我正在寻找 C/C++ 的 GSOAP 库，但找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:48:02.710

如果您只是要检索 URL 响应，curl 库将完成这项工作。如果您专门处理 SOAP，则需要另一个库来解析响应（或者可以使用一个独立的库来一次完成检索 + 响应解析）。

# unix - 在 FFmpeg 中启用 rtmp_swfurl 选项

> ID：16061167
> 
> 赞同：1
> 
> 时间：2013-04-17T13:19:33.810
> 
> 标签：unix, ffmpeg

在 Unix 中，为了处理 RTMP 直播流 URL `swfurl`，一些直播流需要`pageurl`额外的。我们能够将此参数传递`RtmpDump`给 FFmpeg 并将其通过管道传递给 FFmpeg。

然而，一些 FFmpeg 有`rtmp_swfurl`它自己的。我们如何在 FFmpeg 中启用此选项，并非所有选项都有。虽然我有最新版本，但我没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:50:55.263

我通过在从其网站下载最后一个版本后首先删除 libav-tools 并手动安装 ffmpeg 解决了这个问题。当我尝试在不删除 libav-tools 的情况下安装 ffmpeg 时，它不起作用，因此您应该删除然后安装 ffmpeg 并再次安装 libav-tools

```
sudo apt-get --purge remove libav-tools
sudo apt-get --purge autoremove 
```

# excel - 在粘贴非空白行时保持行完整性

> ID：16061168
> 
> 赞同：2
> 
> 时间：2013-04-17T13:19:37.590
> 
> 标签：excel, row, nonblank, vba

这是一个困难的 Visual Basic 问题，所以我不确定这个论坛中是否有人能提供帮助。但值得一试。

我用 Visual Basic 编写了一个程序，用作 Excel 中的宏。

在宏中，我在 sheet1（最终）中获取数据并将值复制并粘贴到 sheet2（数据）中。我在 sheet1 中的数据范围有很多空白单元格，所以我想创建一个程序，它只会粘贴带有值的行（而不是只有空白单元格的行）。

我的程序现在在粘贴到 sheet2 之前修改了表 1 中的数据范围，我不希望这样……..我的格式也因此被搞砸了。相反，我希望 sheet1 中的数据保持完全相同，并且在粘贴操作中删除空白行进入 sheet2。

我在 sheet1 中的数据从 AL 列开始，然后到 CD 列。

保持行的完整性非常重要。我不希望在粘贴过程中删除空白单元格，而是希望在粘贴过程中删除范围中的空白行。因此，如果列 AL 和 CD 之间有一行甚至只有一个数据点，则该行作为一个整体必须保留在粘贴中。但是对于列 AL 和 CD 之间完全空白的任何行，需要在进入 sheet2 的粘贴操作中将其删除。

我现有的程序如下。任何帮助将不胜感激。

```
Dim ws As Worksheet

Set ws1 = Worksheets("FINAL")
Set ws2 = Worksheets("Data")

With ws1.UsedRange
lastcolumn = .Cells(1, 1).Column + .Columns.Count - 1
lastrow = .Cells(1, 1).Row + .Rows.Count - 1
End With

ws1.Range(Cells(1, 38), Cells(lastrow, lastcolumn)).AutoFilter field:=1, Criteria1:="<>"
ws1.Range(Cells(1, 38), Cells(lastrow, lastcolumn)).Copy

ws2.Range("A1").PasteSpecial xlPasteValues

Application.CutCopyMode = False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:05:03.813

> 这是一个困难的 Visual Basic 问题，所以我不确定这个论坛中是否有人能提供帮助。但值得一试。

希望值得一试：P

这是你正在尝试的吗？

```
Sub Sample()
    Dim wsInput As Worksheet, wsOutput As Worksheet
    Dim rng As Range, CellsTobeCopied As Range, aCell As Range

    '~~> Sheet which has range that you want to copy
    Set wsInput = ThisWorkbook.Sheets("Sheet1")

    '~~> Set range that you would like to copy
    Set rng = wsInput.Range("A1:E4")

    '~~> Output Sheet where you want to paste
    Set wsOutput = ThisWorkbook.Sheets("Sheet2")

    For Each aCell In rng.Rows
        '~~> Check if the entire row is blank
        If Application.WorksheetFunction.CountA(aCell) <> 0 Then
            '~~> Construct your range to be copied
            If CellsTobeCopied Is Nothing Then
                Set CellsTobeCopied = aCell
            Else
                Set CellsTobeCopied = Union(CellsTobeCopied, aCell)
            End If
        End If
    Next

    '~~> Copy final range
    If Not CellsTobeCopied Is Nothing Then
        CellsTobeCopied.Copy
        '~~> In case you want to preserve formats
        wsOutput.Range("A1").PasteSpecial xlPasteAll

        '~~> If you wan tto paste values then comment the above and use this
        ' CellsTobeCopied.Copy wsOutput.Range("A1")
    End If
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/YkpNc.png)

# c# - 检查datagridview单元格值是否为空时出错

> ID：16061171
> 
> 赞同：0
> 
> 时间：2013-04-17T13:19:41.840
> 
> 标签：c#, winforms

此代码是错误的：

> 给定的 ColumnMapping 与源或目标中的任何列都不匹配。

我有检查列是否为空，但不起作用。

```
using (var bulkCopy = new SqlBulkCopy(destinationConnection))
{

    //THIS A MAPPING REPLACET WITH YOUR NEED
    for (int i = 0; i <18; i++)
    {
        if (datagridaddfield.Rows[i].Cells[1].Value != null)
        {
            bulkCopy.ColumnMappings.Add(datagridaddfield.Rows[i].Cells[0].Value.ToString(), datagridaddfield.Rows[i].Cells[1].Value.ToString());
            bulkCopy.DestinationTableName = "profile2";
            [...] 
```

我要程序检查这一行`if (datagridaddfield.Rows[i].Cells[1].Value != null)` ，但程序不检查！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:37:49.307

问题是您将错误的参数传递给`ColumnMappings.Add`. 您现在正在做的是传递对列映射没有意义的单元格值。应将其中一个重载传递给映射的列索引。您也可以使用列名。查看[SqlBulkCopyColumnMappingCollection.Add 方法](http://msdn.microsoft.com/en-us/library/84x0sax1.aspx)。

# android - 在android中连接到外部数据库

> ID：16061179
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:19:59.630
> 
> 标签：android, database, json, connection

我正在尝试通过我的 android 应用程序连接到我的本地主机上的数据库。我创建了一个 php 文件并将其存储在我的 wamp/www/myfolder 中，当我运行它时它工作正常，所以它一定是我的 android 类的问题。

```
 public void getData(){
    String result ="";
    InputStream isr = null;
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new        HttpPost("http://localhost/testdata/getAllCustomers.php");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        isr = entity.getContent();
    }catch(Exception e){
        Log.e("log_tag", "Error in http connection");
        resultView.setText("Couldnt connect to database"); 
```

我已经检查了我的代码很多次，但我找不到问题所在。我在此方法中创建了两个 morw try 捕获，用于转换结果，另一个解析数据，但是当我运行它时，会出现第一个日志，因此它不会连接到数据库。

Ps 我正在使用 eclipse，我需要一个 json 插件，我知道 eclipse IDE 支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:30:47.490

当您尝试从模拟器连接时，android 的环回地址是 10.0.2.2

即代替 localhost 使用 10.0.2.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:50:29.543

`NetworkOnMainThreadException`表示您正试图在主线程上执行网络操作，这是被禁止的。只需从另一个线程执行此操作。这主要是通过创建一个 AsyncTask 来完成的。[这是](https://stackoverflow.com/a/6343299/645270)一个例子。这[是](https://stackoverflow.com/a/8829321/645270)另一个。

值得注意的是，[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出，但始终强烈反对这种行为。

# matlab - 如何逐个元素地操作矩阵

> ID：16061181
> 
> 赞同：2
> 
> 时间：2013-04-17T13:20:02.727
> 
> 标签：matlab, matrix

我有以下向量：

```
a = [1 2];
b = [0.25 0.5]; 
```

我想获得一个 2x2 矩阵 c：

```
c = [1/0.25+1/0.5  2/0.25+1/0.5  

     1/0.25+2/0.5  2/0.25+2/0.5]; 
```

我将如何基于 a 和 b 实现矩阵 d

```
d= [ 1/0.25  2/0.25
     1/0.5   2/0.5] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:36:21.810

How about

```
A = repmat(a, numel(a),1);  
A/b(1) + A.'/b(2) 
```

for the second part of your question, try

```
d = bsxfun(@rdivide, a, b.') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:08:58.870

您可以这样计算 d：

```
d = (1./b)'*a 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T13:31:28.287

```
c = [ a(1)/b(1)+a(1)/b(2) a(2)/b(1)+a(1)/b(2) a(1)/b(1)+a(2)/b(2) a(2)/b(1)+a(2)/b(2)]; 
```

# javascript - onclick 下载函数是空字符串？

> ID：16061191
> 
> 赞同：0
> 
> 时间：2013-04-17T13:20:16.937
> 
> 标签：javascript, onclick

我的 onclick 处理程序有一个奇怪的问题。

我在 . 这已在生产网站上使用多年。最近，在 Firefox 或 Chrome 中单击按钮时，我收到一个奇怪的 javascript 错误（在 IE8 中不是问题）。Firefox 说“TypeError：下载不是函数”，Chrome 说“TypeError：字符串不是函数”。

HTML：

```
<a onclick="download('position','container','ids');return false;" href="#">Run download</a> 
```

JS：

```
function download(position, container, ids) {
  alert('in download');
} 
```

您可以在这个[Fiddle](http://jsfiddle.net/ttD3r/3/)中看到这一点。

首先，我想知道为什么这不起作用（其他功能工作正常）。看起来如果我重命名函数或使用按钮而不是链接，问题也会得到解决，但部署这样的更改将是一场噩梦。如果有必要，那很好，但我想知道为什么下载功能不再起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:26:37.377

似乎在 HTML5 中，`<a>`标签支持名为“download”的新属性（例如，请参阅[此链接](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)），默认情况下该属性为空值。

如果您将代码更改为：

```
<a onclick="self.download('position','container','ids');return false;" href="#">Run download</a> 
```

事实上，事件（在本例中为 onclick）在它们绑定到的元素范围内运行（`<a>`此处），因此“下载”表示 this.download（如果存在）。

# c# - 无法分配操作 行动

> ID：16061198
> 
> 赞同：2
> 
> 时间：2013-04-17T13:20:24.637
> 
> 标签：c#

我有以下类定义：

```
public class Registry
{
     private List<Action<IThing>> _thingActions = new List<Action<IThing>>();

     public Register<TDerivedThing>(Action<TDerivedThing> thingAction)
          where TDerivedThing : IThing
     {
        // this line causes compilation issue
        _thingActions.Add(thingAction);
     }     
} 
```

为什么这抱怨它不能分配`Action<TDerivedThing>`给`Action<IThing>`，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T13:26:11.637

如果 C# 允许您这样做，则这样的代码将是有效的：

```
interface IFruit {
    void Eat();
}

class Apple : IFruit {
    // ...
    void EatApple();
}

class Pear : IFruit {
    // ...
    void EatPear();
}

void EatApple(Apple a) {
    a.EatApple();
}

void EatPear(Pear p) {
    p.EatPear();
}

Action<IFruit> fruitAction = EatApple;
fruitAction(new Pear()); // Calls EatApple(new Pear()) 
```

演员表是无效的，因为它不应该是，你不应该首先尝试这样做。你的`IThing`行动清单都**必须**是接受**任何**果实的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:27:24.243

当然不是，`List<EventArgs>`也不能赋值`List<object>`，即使 EventArgs 是一个对象。

```
 public void Register<TDerivedThing>(Action<TDerivedThing> thingAction)
      where TDerivedThing : IThing
 {
    _thingActions.Add(t => thingAction(t as TDerivedThing));
 } 
```

可能是一个解决方案，但我不知道你的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:33:50.083

这是一个协方差和逆变问题。我建议您阅读有关它的[msdn 文章](http://msdn.microsoft.com/en-us/library/dd799517.aspx)。它对您的问题有完整的答案。

# javascript - 我按键盘上的 ENTER 键并刷新页面。如何防止这种情况并仍然使用键盘进行搜索？

> ID：16061202
> 
> 赞同：2
> 
> 时间：2013-04-17T13:20:55.243
> 
> 标签：javascript, jquery, html

我们以前可以在搜索框中输入搜索字段、地址，然后按键盘上的 ENTER 键并获得搜索结果。

我做了几处更改，但无法确定导致 ENTER 键行为异常的更改。它不是提交，而是刷新页面。

我已尝试以下各项来停止页面刷新：

```
<form onSubmit="return false;">

<form onkeypress="return event.keyCode != 13"> 
```

每个作品。

但是，我不能再按 ENTER 键并显示结果。

我需要做什么来解决这个问题？

下面是js：

```
function getData()
{

     dijit.byId("advanceSearchDialog").hide(); 
    var form = document.getElementById("searchForm");
    var form2 = document.getElementById("featuresForm")
    var searchText = form.searchBox.value.replace(/-/g,"");
    form.searchBox.value = searchText;

    if (searchText != "") 
    {
        // collect features to search for:
        var features = [ ];
        var featTypes = form2.featType;
        for ( var f = 0; f < featTypes.length; ++f )
        {
            if ( featTypes[f].checked ) features.push( featTypes[f].value );
        }
        featureList = "'" + features.join("','") + "'";

        searchMsg("Searching for '" + searchText + "' ...");
        featureID = "";
        var accord = dijit.byId("accordianContainer");
        var resultsPane = dijit.byId("resultsPane");
        accord.selectChild(resultsPane,true);
        doGlobalSearch( searchText, featureList );
    }
    else
    {
      searchMsg("No search criteria entered, enter search text");
    }   
}

function searchKey(e){
    // special case for IE to capture <enter> in the search box
    var key = window.event ? e.keyCode : e.which;
    var keychar = String.fromCharCode(key);
    if (key == 13)
      getData();
}

<form id="searchForm" class="search_field" method="get" action="">
   <input name="searchBox" id="searchBox" value="" />
  <button type="button" onclick="getData()"><img src="images/magnifying_glass.png" alt="Search" /></button>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:23:15.863

仅使用以下简单的 jQuery

```
if(event.keyCode == 13){ 
   event.preventDefault();
} 
```

...将它绑定到你的表单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:23:37.283

无论您调用什么函数来显示搜索结果都需要

*   返回假；

或者

*   调用 event.preventDefault();

这将避免执行默认的表单操作（导致整页刷新）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T14:55:51.203

删除 onkeypress 并改用 onsubmit ，因为当在表单的输入字段上按下 enter 键时会自动调用它。

```
<form onsubmit="return getData()">
   <input name="searchBox" id="searchBox" value="" />
   <button type="submit"><img src="images/magnifying_glass.png" alt="Search" /></button>
</form> 
```

js

```
function getData() {
    dijit.byId("advanceSearchDialog").hide(); 
    var form = document.getElementById("searchForm");
    var form2 = document.getElementById("featuresForm")
    var searchText = form.searchBox.value.replace(/-/g,"");
    form.searchBox.value = searchText;

    if (searchText != "") 
    {
        // collect features to search for:
        var features = [ ];
        var featTypes = form2.featType;
        for ( var f = 0; f < featTypes.length; ++f )
        {
            if ( featTypes[f].checked ) features.push( featTypes[f].value );
        }
        featureList = "'" + features.join("','") + "'";

        searchMsg("Searching for '" + searchText + "' ...");
        featureID = "";
        var accord = dijit.byId("accordianContainer");
        var resultsPane = dijit.byId("resultsPane");
        accord.selectChild(resultsPane,true);
        doGlobalSearch( searchText, featureList );
    }
    else
    {
      searchMsg("No search criteria entered, enter search text");
    }
    return false;
} 
```

# php - PHP 文件上传返回扩展名 false

> ID：16061213
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:21:28.797
> 
> 标签：php, file-upload, mysqli

我有一个表单，用于在此表单中将文章上传到我的数据库我有一个文件上传字段，我的文件上传目标如下：

1.  将文件扩展名限制为图像格式
2.  将文件重命名为随机的东西
3.  根据条目的ID创建一个新目录进入数据库
4.  保留上传文件的扩展名

每次我点击提交按钮时，表单似乎认为我已尝试上传不在允许扩展名列表中的文件，它会打印此错误（但字段已上传到数据库）：

```
wrong files format , allowed only "Array" 
```

我不太清楚为什么会这样，因为我知道我输入了正确的文件格式。

```
 public function insert ($field) {

            if ($stmt = $this->mysqli->prepare("INSERT INTO articles (title, story, storyb, storyc, author, date_created, section, youtubeid) VALUES (?, ?, ?, ?, ?, ?, ?, ?)")) {

                        /* Set our params */

                         $title = isset($_POST['title']) ? $this->mysqli->real_escape_string($_POST['title']) : '';
                         $story = isset($_POST['story']) ? $this->mysqli->real_escape_string($_POST['story']) : '';
                         $storyb = isset($_POST['storyb']) ? $this->mysqli->real_escape_string($_POST['storyb']) : '';
                         $storyc = isset($_POST['storyc']) ? $this->mysqli->real_escape_string($_POST['storyc']) : '';
                         $author = isset($_POST['author']) ? $this->mysqli->real_escape_string($_POST['author']) : '';
                         $date_created = isset($_POST['date_created']) ? $this->mysqli->real_escape_string($_POST['date_created']) : '';
                         $section = isset($_POST['section']) ? $this->mysqli->real_escape_string($_POST['section']) : '';
                         $youtubeid = isset($_POST['youtubeid']) ? $this->mysqli->real_escape_string($_POST['youtubeid']) : '';

                        /* Bind our params */
                        $stmt->bind_param('ssssssss', $title, $story, $storyb, $storyc, $author, $date_created, $section, $youtubeid);

                        /* Execute the prepared Statement */
                        $stmt->execute();

                        /* Echo results */
                        echo "Inserted {$title} into database\n";

                        /* Close the statement */
                        $stmt->close();
                        }
                        else {
                        /* Error */
                        printf("Prepared Statement Error: %s\n", $mysqli->error);
                        }

            // Handling file upload

            $extensions = array(".jpg",".jpeg",".gif",".png", ".JPG", ".JPEG", ".PNG", ".GIF");
            $extension = strrchr($_FILES['uploadImage']['name'], '.');

            $path =  "../files/uploads/articles_gallery/" . $this->mysqli->insert_id;
            $filename = uniqid(rand(), true);            

                if (!in_array($extension, $extensions))
                    {
                        echo'<center>wrong files format , allowed only <strong>"'.$extensions.'"</strong></center>';
                    }  else {

                            if (!is_dir($path))
                          {
                            die('Error: ' . $mysqli->error());
                          }

                                    echo "<h3>1 record added</h3>";
                                    mkdir($path, 0777);
                                    move_uploaded_file($_FILES['uploadImage']['tmp_name'], $path, $filename);
                    } // File Upload End

        } 
```

插入.php

```
<div id="form">
<form action="insert.php" method="post" name="insert" id="articleform">
            <input type="input" name="title" id="title" class="detail" id="title"/>
            <textarea name="story" id="story" class="detail" placeholder="Insert article here"></textarea>
            <input id="uploadImage" type="file" name="uploadImage" onchange="PreviewImage();" class="" />
    <img id="uploadPreview" style="width: 250px; height: 200px;" />
            <textarea name="storyb" id="storyb" class="detail" spellcheck="true" placeholder="Insert article here"></textarea>        
            <textarea name="storyc" id="storyc" class="detail" spellcheck="true" placeholder="Insert article here"></textarea>
            <input type="input" name="author" id="author" class="detail"/>
            <? $today = date("l j M Y");  // Monday 13 April 2013 ?>
    <input type="hidden" name="date_created" id="date_created" class="detail" value="<? echo $today;?>" />            
            <input type="hidden" name="section" id="section" class="detail" value="game"/>           
            <input type="input" name="youtubeid" class="detail" id="youtubeid" />
            <input type="submit" id="submit" name="submit" value="Submit Article    " />
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:25:16.813

从以下位置更新您的表格：

```
<form action="insert.php" method="post" name="insert" id="articleform"> 
```

至 ：

```
<form action="insert.php" method="post" name="insert" id="articleform" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:28:57.343

如果字符串中存在字符（在您的情况下为“.”），[strchr()将为您提供真/假。](http://php.net/strchr)因此，要获取文件扩展名，您可以使用以下内容：

```
$extension = end(explode('.', $filename)); 
```

.. 但也许像[pathinfo()](http://php.net/pathinfo)这样的函数在这种情况下也很有用。

此外，在您的错误消息中，您使用`$extensions`. 这是一个类型为“array”的 var，因此字符串表示为“Array”。我想你`$extension`的意思是（没有 S）那里。或者，也许您想以这种方式列出所有正确的扩展名：`implode(',', $extensions)`.

请注意，检查扩展程序并不是检查存在何种内容的安全方法。我可以轻松上传 .exe，只需将其重命名为 .jpg。

哦，出于安全原因，强烈建议不要将目录/文件 chmod 到模式 777。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:29:06.663

如果您想显示可用的扩展名，您不能只将您的数组与您的消息连接起来。您必须迭代所有值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:29:07.633

获取扩展名的代码是错误的。

```
$extension = strrchr($_FILES['uploadImage']['name'], '.'); 
```

将其更改为

```
$extension = strtolower(substr($_FILES['uploadImage']['name'],-3,3)); 
```

如果扩展名是 3 个字符长或explode() 并获取最后一个参数。无论如何这不是好方法，我更喜欢检查 MIME 类型

```
$extension = strtolower(end(explode('.', $_FILES['uploadImage']['name']))); 
```

将您的扩展数组更改为

```
$extensions = array("jpg","jpeg","gif","png"); 
```

也添加到您的表格

```
enctype="multipart/form-data" 
```

您的错误消息是错误的，因为您想回显数组而不是字符串使用 implode() 加入数组

```
implode(";",$extensions) 
```

# vim - 用于匹配括号的 vim 连接行

> ID：16061216
> 
> 赞同：5
> 
> 时间：2013-04-17T13:21:42.430
> 
> 标签：vim

我有一个工具可以产生这样的输出 -

```
(check (= Start
   (+ (if (<= takeA giveA) 0 1)
      (if (<= takeB giveB) 0 1)
      (if (<= takeC giveC) 0 1)
      (if (<= takeD giveD) 0 1))))
(check (and (>= takenBefore_A 0) (<= takenBefore_A 4)))
(check (and (>= givenBefore_A 0) (<= givenBefore_A 4)))
(check (= risk_A
   (+ Start 1 (- takenBefore_A givenBefore_A))))
(check (= takenBefore_A
   (+ (if (<= takeB takeA) 1 0)
      (if (<= takeC takeA) 1 0)
      (if (<= takeD takeA) 1 0))))
(check (= givenBefore_A
   (+ (if (<= giveA takeA) 1 0)
      (if (<= giveB takeA) 1 0)
      (if (<= giveC takeA) 1 0)
      (if (<= giveD takeA) 1 0))))
(check (and (>= takenBefore_B 0) (<= takenBefore_B 4)))
(check (and (>= givenBefore_B 0) (<= givenBefore_B 4)))
(check (= risk_B
   (+ Start 1 (- takenBefore_B givenBefore_B))))
(check (= takenBefore_B
   (+ (if (<= takeA takeB) 1 0)
      (if (<= takeC takeB) 1 0)
      (if (<= takeD takeB) 1 0))))
(check (= givenBefore_B
   (+ (if (<= giveA takeB) 1 0)
      (if (<= giveB takeB) 1 0)
      (if (<= giveC takeB) 1 0)
      (if (<= giveD takeB) 1 0))))
(check (and (>= takenBefore_C 0) (<= takenBefore_C 4)))
(check (and (>= givenBefore_C 0) (<= givenBefore_C 4)))
(check (= risk_C
   (+ Start 1 (- takenBefore_C givenBefore_C)))) 
```

我想有这样的输出 -

```
(check (= Start (+ (if (<= takeA giveA) 0 1) (if (<= takeB giveB) 0 1) (if (<= takeC giveC) 0 1) (if (<= takeD giveD) 0 1))))
(check (and (>= takenBefore_A 0) (<= takenBefore_A 4)))
(check (and (>= givenBefore_A 0) (<= givenBefore_A 4)))
(check (= risk_A (+ Start 1 (- takenBefore_A givenBefore_A))))
(check (= takenBefore_A (+ (if (<= takeB takeA) 1 0) (if (<= takeC takeA) 1 0) (if (<= takeD takeA) 1 0))))
(check (= givenBefore_A (+ (if (<= giveA takeA) 1 0) (if (<= giveB takeA) 1 0) (if (<= giveC takeA) 1 0) (if (<= giveD takeA) 1 0))))
(check (and (>= takenBefore_B 0) (<= takenBefore_B 4)))
(check (and (>= givenBefore_B 0) (<= givenBefore_B 4)))
(check (= risk_B (+ Start 1 (- takenBefore_B givenBefore_B))))
(check (= takenBefore_B (+ (if (<= takeA takeB) 1 0) (if (<= takeC takeB) 1 0) (if (<= takeD takeB) 1 0))))
(check (= givenBefore_B (+ (if (<= giveA takeB) 1 0) (if (<= giveB takeB) 1 0) (if (<= giveC takeB) 1 0) (if (<= giveD takeB) 1 0))))
(check (and (>= takenBefore_C 0) (<= takenBefore_C 4)))
(check (and (>= givenBefore_C 0) (<= givenBefore_C 4)))
(check (= risk_C (+ Start 1 (- takenBefore_C givenBefore_C)))) 
```

我使用以下命令`VIM`生成必要的输出，具体取决于我要加入的行数 -

```
:.,+3join 
```

我想知道，如果我可以自动执行此操作而不是手动执行此操作。这里的关键点是，在每一行上，打开的括号数将等于关闭的括号数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T13:45:05.500

我的看法：

```
 qqqqqv%:join
 j@qq@q 
```

使用`join`代替`J`解决了大安答案中单行的问题。

一步步：

*   `qqq`清除“q”宏（避免与之前的宏定义纠缠不清）
*   `q`开始录制
*   `q`声明这是我们正在录制的“q”宏
*   `v`用于视觉标记
*   `%`跳到匹配的大括号
*   `:`对于命令模式，作用于当前标记的区域
*   `join`（加 ENTER）用于加入行
*   `j`走下一条线
*   `@q`调用'q'宏（递归）（如果我们没有先清除它，我们会在这里调用旧定义，这不是我们想要的）
*   `q`结束录制
*   `@q`执行宏，它将在文件末尾停止（当`j`移动错误时）

`q`原谅's的丰富。我承认戴上它`j`会更直观，但我总是使用`q`这样的即发即弃宏，因为它使最初的 clear-and-record ( `qqqqq`) 很容易记住（而且因为大多数其他键已经有宏他们）。:-)

**编辑：**划掉最后一段。我就像疯子一样反复敲击同一个键。;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:34:25.177

这将是使用宏的一种方法：

```
qjo<ESC>k0v%Jjq100@j 
```

这里的基本思想是您可以使用它`v%J`来选择和连接该`(...)`区域中的所有线。唯一需要注意的是它不适用于单行语句，因此我们确保始终添加额外的行 ( `o<ESC>`)。最后，我们将它全部包装在一个宏中，它就可以工作了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T14:34:29.007

我认为这`:s`条线对你有用：

```
:%s/\v\n\s+(\()/\1/ 
```

同样对于您问题中的示例，这也有效..（但将第一行留空）

```
:%j|s/(check/\r&/g 
```

**编辑**

刚才我没有把它放在`1d`那里。现在它来了：

如果你想删除第一个空行，试试这个：

```
:%j|s/(check/\r&/g|1d 
```

**编辑2**

感谢 Nikita Kouevda 指出空白问题。也是修复（见下面的评论）我只是忽略了由 :join 创建的空间。

我会添加另一条短线，它也可以，而不用担心空格：

```
:g/^(/.,/\n\ze(\|\%$/j 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-13T11:26:12.590

如果文件的最后一行是空白的，那么您可以使用：

```
:g/^(/,/^(\|^$/-1j 
```

它由以下部分组成：

搜索以括号开头的行：

```
g/^(/ 
```

从那里到以括号或空行开头的下一行

```
,/^(\|^$/ 
```

回到之前的那一行

```
-1 
```

加入这些行：

```
j 
```

如果你想一次做一个然后去第一个开括号和 v%j （输入视觉，选择匹配的括号，加入选定的块）

# oracle - Oracle 连接管理器

> ID：16061219
> 
> 赞同：0
> 
> 时间：2013-04-17T13:21:55.223
> 
> 标签：oracle

我正在考虑将 Oracle Connection Manager 引入我的网络架构。这应该允许我管理特定主机对数据库的访问。有经验的用户可以说连接管理器是否被广泛使用？或者它的声誉不佳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:26:59.257

实际上，您似乎正在考虑为您的项目添加一个用户管理模块。它与 Oracle 没有严格的关系，当您设计用户管理模块时，您可以允许或阻止项目中任何用户的任何操作。

# javascript - JavaScript 新手 - 使用 MathRandom() 显示随机图像

> ID：16061224
> 
> 赞同：0
> 
> 时间：2013-04-17T13:22:05.073
> 
> 标签：javascript

我目前正在尝试在我正在处理的 html 页面上显示一个随机图像我的图像都保存在与我的网页名为 1-6 的同一文件夹中，但它似乎不起作用

这是我正在使用的代码：

```
 script type ="text/javascript">
    <!--
    document.write("<img src =\"" + Math.foor( 1 + Math.random() * 6 ) + ".jpg\" />");

    // --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:26:39.107

我不认为数学有一个功能。我猜你的意思是地板；）

```
document.write("<img src =\"" + Math.floor( 1 + Math.random() * 6 ) + ".jpg\" />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:23:54.057

```
Math.foor => Math.floor 
```

尝试在浏览器中使用 javascript 控制台查看错误。

# javascript - Internet Explorer 7/8 中带有 isEmpty 的 jQuery 1.7.1 错误

> ID：16061228
> 
> 赞同：0
> 
> 时间：2013-04-17T13:22:16.010
> 
> 标签：javascript, jquery, debugging

我的一个网站在 Internet Explorer 7 或 8 中无法正常运行（在现代浏览器中很好）。

网站上有一个部分以 jQuery lightview 模式启动预订引擎，但控制台中返回以下错误 - 有什么想法吗？

```
SCRIPT5007: The value of the property 'isEmpty' is null or undefined, not a Function
object jquery.min.js, line 3 character 4295 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:05:07.917

您应该使用[jQuery.isEmptyObject()](http://api.jquery.com/jQuery.isEmptyObject/)来检查对象或使用[空选择器](http://api.jquery.com/empty-selector/)，例如

```
$("p:empty"); 
```

如果你还没有声明一个“isEmpty”函数，那么你可以使用这个：

```
function isEmpty(aString) { 
    return (aString === null || aString === "" || typeof aString === 'undefined');
} 
```

# java - 无法理解管道输入流

> ID：16061230
> 
> 赞同：0
> 
> 时间：2013-04-17T13:22:34.653
> 
> 标签：java, io

我正在尝试理解管道流。为什么我们不能使用其他流来相互管道而不是管道流？如下所示：

```
final ByteArrayOutputStream pos = new ByteArrayOutputStream();

final ByteArrayInputStream pis = new ByteArrayInputStream(pos.toByteArray()); 
```

我们什么时候会在管道流中出现死锁？我尝试使用单个主线程进行读写，但它执行顺利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:52:05.047

这里的困难在于该进程必须在多个线程中实现，因为写入管道的一端必须与另一端的读取相匹配。

创建一个线程来监控一个管道末端的到达并将它们推回另一个管道当然不难，但不能用单个线程来完成。

你看过[这个](https://stackoverflow.com/q/364936/823393)问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:01:27.847

管道流允许以**最小的努力进行****高效**的逐字节处理。

 **我很可能是错的，但我相信`toByteArray()`可能不会像你认为的那样做。它只是复制当前内容，而不是将来的任何内容。

所以这里唯一真正的问题是对此的管理，这会有点困难。您必须不断地轮询输出流。更不用说每次调用的数组的内存分配（为每次调用`toByteArray`“[创建一个新分配的字节数组”](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#toByteArray%28%29)）。

**我如何怀疑死锁可能发生在单个线程中：**

如果您尝试（阻塞）从还没有数据的输入流中读取。它永远无法获取数据，因为只能从必须在同一个线程中写入的输出流中获取数据，而这在您等待数据时不会发生。

因此，在单个线程中，如果您不是很小心就会发生这种情况，但是应该可以在同一个线程中成功使用它们而不会出现死锁，但是您为什么要这样做呢？我认为另一种数据结构可能更适合，例如链表或简单的循环数组。**

# matlab - 如何在 Matlab 中手动分割和标记图像中的 ROI？

> ID：16061236
> 
> 赞同：2
> 
> 时间：2013-04-17T13:23:03.557
> 
> 标签：matlab, image-processing, matlab-figure, image-segmentation

我是 Matlab 的新手。我基本上是在尝试手动分割一组图像，然后也手动标记这些段。我查看了 imfreehand()，但我无法使用 imfreehand() 执行此操作。

基本上，我想遵循以下步骤：

1.  手动分割图像上的各种 ROI（imfreehand 只让我画一个我认为的片段？）

2.  为所有这些段分配标签

3.  保存段和相应的标签以供进一步使用（不确定它们将以什么格式存储，我认为 imfreehand 会给我位置，我可以将其与标签一起存储？）

4.  希望使用图像中的这些标记片段来形成神经网络的训练数据集。

如果有其他工具或软件可以帮助我做到这一点，那么任何指针都会非常感激。（我也是stackoverflow的新手，所以如果有什么方法可以改进问题以使其更清晰，请告诉我！）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:43:11.000

伊利诺伊大学计算机视觉研究人员 Derek Hoiem 编写了一个对象标记工具，它几乎完全符合您的要求。你可以从他的页面下载：

[http://www.cs.illinois.edu/homes/dhoiem/software/index.html](http://www.cs.illinois.edu/homes/dhoiem/software/index.html)

# c# - Directory.GetFiles(path, ".txt", SearchOption.AllDirectories); 不提供文件

> ID：16061237
> 
> 赞同：0
> 
> 时间：2013-04-17T13:23:10.370
> 
> 标签：c#

如何在目录及其所有子目录中搜索特定扩展名的所有文件

```
Directory.GetFiles(path, ".txt", SearchOption.AllDirectories); 
```

上面的代码不返回任何文件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T13:25:22.617

您需要使用通配符表示法

```
Directory.GetFiles(path, "*.txt", SearchOption.AllDirectories); 
```

在您的情况下，您正在搜索文件“.txt”名称，而不是您需要告诉 API 来检索所有具有`txt`扩展名的文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T13:25:09.587

因为您正在逐字搜索名为`.txt`

像这样使用通配符：`*.txt`它应该拉出任何`.txt`文件。

请参阅文档：http: [//msdn.microsoft.com/en-us/library/ms143316.aspx](http://msdn.microsoft.com/en-us/library/ms143316.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-17T13:26:20.463

我相信它是您的搜索模式或第二个参数。应该是“*.txt”。

```
Directory.GetFiles(path, "*.txt", SearchOption.AllDirectories); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T13:26:19.123

过滤器需要是“*.txt”：

```
Directory.GetFiles(path, "*.txt", SearchOption.AllDirectories); 
```

# android - 无法从广播接收器多次打开活动

> ID：16061241
> 
> 赞同：0
> 
> 时间：2013-04-17T13:23:12.240
> 
> 标签：android

我想制作一个显示 Flash 消息的应用程序。我在听`android.provider.Telephony.SMS_RECEIVED`。当 onReceive() 被调用时，我正在开始一项活动。第一次调用 onReceive() 时它会启动活动，但下次不会。这是我的代码

```
public class MyReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context arg0, Intent arg1) {
            this.abortBroadcast();
        Intent intent = new Intent(arg0,Start.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        arg0.startActivity(intent);
    }
} 
```

我正在中止广播，因此消息不会进入收件箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:30:42.583

它取决于“开始”活动的 AndroidManifest 文件中的“launchMode”。在您的活动中使用 launchMode = "standart" 或处理 onNewIntent 方法。

# python - Python JSON模块不会为无效的JSON抛出异常

> ID：16061242
> 
> 赞同：1
> 
> 时间：2013-04-17T13:23:12.873
> 
> 标签：python, json

那么，有效的 JSON 必须是对象或数组，对吗？我期待以下代码引发异常，但事实并非如此：

```
>>> import json
>>> json.loads("245235")
245235 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T13:24:53.890

这不是无效的 JSON*。Number 是一个有效的 JSON 类型，就像 object。[http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)这些类型中的任何一个都可以单独出现，尽管对象和数组可能是最常见的顶级类型。

*根据python实现

编辑：

正如在已删除（不确定为什么）的答案中指出的那样，python 文档建议 JSON RFC 确实要求顶级对象为数组或对象类型，但该`json`模块不强制执行此操作。由于我对 JSON 的很多了解都来自使用 python`json`模块，因此我不知道这种行为的可移植性如何。

根据要求，这在[http://docs.python.org/2/library/json.html#standard-compliance](http://docs.python.org/2/library/json.html#standard-compliance)中注明：

> 该模块不以严格的方式遵守 RFC，实现了一些有效 JavaScript 但无效 JSON 的扩展。尤其：
> 
> *   接受并输出顶级非对象、非数组值；
> *   接受并输出无穷大和 NaN 数值；
> *   接受对象内的重复名称，并且仅使用最后一个名称-值对的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:26:02.223

JSON 数据可以有[多种类型](http://json.org/)，包括字符串、数字和布尔值

# sql-server - 如何优化 SQL Server 全文搜索

> ID：16061248
> 
> 赞同：2
> 
> 时间：2013-04-17T13:23:22.407
> 
> 标签：sql-server, full-text-search, freetexttable

我想将全文搜索用于自动完成服务，这意味着我需要它快速工作！最多两秒。

搜索结果来自不同的表，因此我创建了一个将它们连接在一起的视图。我使用的 SQL 函数是 FREETEXTTABLE()。

查询运行非常缓慢，有时长达 40 秒。

为了优化查询执行时间，我确保基表有一个聚集索引列，它是整数数据类型（而不是 GUID）

我有两个问题：首先，关于如何使全文搜索更快的任何其他想法？（不包括升级硬件...）其次，为什么每次我重建全文目录后，搜索查询都非常快（不到一秒），但仅适用于第一次运行。我第二次运行查询需要几秒钟的时间，而且一切都从那里开始下降......知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-26T06:39:24.963

重建目录后第一次查询非常快的原因可能很简单：

当您删除目录并重建它时，必须重建索引，这需要一些时间。如果您在重建完成之前进行查询，他们查询会更快，仅仅是因为**数据较少**。您还应该注意到，您的查询结果包含较少的行。

因此，只有在索引重建完成*后*测试查询速度才有意义。

以下选择可能会方便检查索引的大小（以及碎片）。当大小停止增长时，索引的重建就完成了；）

```
-- Compute fragmentation information for all full-text indexes on the database
SELECT c.fulltext_catalog_id, c.name AS fulltext_catalog_name, i.change_tracking_state,
    i.object_id, OBJECT_SCHEMA_NAME(i.object_id) + '.' + OBJECT_NAME(i.object_id) AS object_name,
    f.num_fragments, f.fulltext_mb, f.largest_fragment_mb,
    100.0 * (f.fulltext_mb - f.largest_fragment_mb) / NULLIF(f.fulltext_mb, 0)  AS fulltext_fragmentation_in_percent
FROM sys.fulltext_catalogs c
JOIN sys.fulltext_indexes i
    ON i.fulltext_catalog_id = c.fulltext_catalog_id
JOIN (
    -- Compute fragment data for each table with a full-text index
    SELECT table_id,
        COUNT(*) AS num_fragments,
        CONVERT(DECIMAL(9,2), SUM(data_size/(1024.*1024.))) AS fulltext_mb,
        CONVERT(DECIMAL(9,2), MAX(data_size/(1024.*1024.))) AS largest_fragment_mb
    FROM sys.fulltext_index_fragments
    GROUP BY table_id
) f
    ON f.table_id = i.object_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T17:56:51.183

[这是一个很好](http://msdn.microsoft.com/en-us/library/ms142560%28v=sql.110%29.aspx)的检查资源。但是，如果您真的想提高性能，则必须考虑升级硬件。（通过将我的数据和全文索引文件移动到单独的读取优化磁盘以及将日志和 tempdb 移动到单独的写入优化磁盘，我看到了显着的性能提升——总共 4 个额外的磁盘加上 1 个用于操作系统和 SQL服务器二进制文件。）

我推荐的其他一些非硬件解决方案：

1.  自定义内置停用词列表以定义更多停用词，从而减少全文索引的大小。
2.  更改 tempdb 的文件结构。见[这里](http://msdn.microsoft.com/en-us/library/ms175527%28v=sql.105%29.aspx)和[这里](http://www.sqlskills.com/blogs/paul/a-sql-server-dba-myth-a-day-1230-tempdb-should-always-have-one-data-file-per-processor-core/)。
3.  如果您的视图对 FREETEXTTABLE 执行超过 1 次调用，则考虑更改您的数据结构，以便视图只需进行 1 次调用。

然而，这些都不是您正在寻找的加快速度的灵丹妙药。我怀疑这里可能还有其他因素（可能是性能不佳的服务器、网络延迟、服务器上的资源争用......）特别是因为你说每次执行全文搜索都会变慢，这与我所看到的相反我的经验。

# php - 如何在数组中运行 php 代码？

> ID：16061250
> 
> 赞同：0
> 
> 时间：2013-04-17T13:23:30.057
> 
> 标签：php, arrays, while-loop

我正在使用这个 php 代码（来自这里的一个问题）：

```
<?php

define(TEMPLATES_LOCATION, 'templates/');

function TemplateFunction ($template, $replaces) {
    $template = file_get_contents(TEMPLATES_LOCATION . $template);
    if (is_array($replaces)) {
        foreach($replaces as $replacekey => $replacevalue){
            $template = str_replace('{$' . $replacekey . '}', $replacevalue, $template);
        }
    }
    return $template;
}

$keys = array(
    'TITLE' => 'This is page title',
    'HEADER' => 'This is some header',
    'GALLERY' => 'php while loop here'
);

echo TemplateFunction('body.tpl', $keys);

?> 
```

我的模板文件的设置方式是以下 HTML：

```
<body>
<div id="gallery">{GALLERY}</div>
</body> 
```

所以{GALLERY}在哪里，php脚本应该用我自动生成的替换它，`<li><img src="images/'.$filename.'"/></li>`它正在从mysql请求生成的while循环中运行

我认为可能有用的是：

```
$keys = array(
        'TITLE' => 'This is page title',
        'HEADER' => 'This is some header',
        'GALLERY' => 'while($row = mysql_fetch_array($result)){<li><img src="'.$row['filename'].'"/></li>})'
); 
```

但它没有:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:52:42.593

重新您的代码：

```
$keys = array(
        'TITLE' => 'This is page title',
        'HEADER' => 'This is some header',
        'GALLERY' => 'while($row = mysql_fetch_array($result)){<li><img src="'.$row['filename'].'"/></li>})'
); 
```

我认为以这种方式将 PHP 代码嵌入到模板数据中是非常糟糕的做法。请允许我为您提供一个完全不同的解决方案...

首先，我们需要封装代码。您上面显示的代码试图从`$result`变量中获取数据，但`$result`其本身显然已在其他地方设置。这不好，因为如果我们想改变画廊功能的工作方式，我们需要搜索整个代码以找到它的不同部分。

相反，您应该将该功能编写为一个独立的函数（或者如果它对于单个函数来说太复杂，则为一个类），它将加载数据并对其进行处理。

让我们调用那个函数`loadGallery()`。它可能看起来像这样：

```
function loadGallery() {
    $output = '';
    $result = mysql_query('...gallery query here...');
    while($row = mysql_fetch_array($result)) {
        $output .= "<li><img src='{$row['filename']}'/></li>";
    }
    return '<ul>'.$output.'</ul>';
} 
```

显然，它可能比这复杂得多（例如，您可能想要对其进行分页，或提供类别选项；这些将被写为函数的参数）。为简洁起见，我也没有在这里写任何错误检查等。

现在您已经获得了该功能，您可以将其插入模板引擎。您需要在模板中引用该函数。

您目前有这样的模板标记`{TITLE}`。在您的代码中，这些标记使用纯文本交换`str_replace()`。没关系。但是在这种情况下，我们现在想要调用一个函数，所以我们需要有一种不同的标记。

让我们像这样写画廊标记：`{FUNCTION:loadGallery}`而不是`{GALLERY}`像你现在拥有的那样。

现在，您可以在模板引擎中添加一些代码来查看这些`{function:}`标记并用函数调用替换它们。（当然你也可以保留现有的简单`str_replace()`方法）

```
$funcReplaces = array(   //similar to your existing $keys array, but for allowed functions
    'loadGallery'
);

foreach($funcReplaces as $replaceFunc){
    $template = str_replace('{function:' . $replaceFunc . '}', $replaceFunc(), $template);
} 
```

这将运行该函数并将输出放入模板中。

所以这回答了你的问题。

然而，我应该指出的是，在编写模板引擎时，从技术和安全角度来看，您还需要考虑*许多其他问题。*以上描述了解决手头特定问题的基本方法，但它*并不是*一个出色的全唱全舞模板引擎。它仍然只是一个非常基本的。

没关系，如果这就是你所需要的，但如果你期望这个系统会增长，值得注意的是，整个领域都是这个问题，其他人已经解决了，而且解决得很好。有几个非常好的可用于 PHP 的模板引擎。我建议您最好的做法是调查其中的一些，也许使用其中之一而不是自己编写。

一些你可以尝试的：

*   [聪明的](http://www.smarty.net/)
*   [枝条](http://twig.sensiolabs.org/)
*   [胡子](https://github.com/bobthecow/mustache.php)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:07.493

您不能“在数组中执行 PHP 代码”。您只需以编程方式构建数组：

```
while (/* something */) {
    $keys['GALLERY'][] = $something;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:39:27.240

我发现我编写的以下代码是解决我的问题的正确方法：

```
$gallery = array();
while($row = mysql_fetch_assoc($result))
{
   $gallery[] = '<li><a href="'.$row['gallery_image_filename'].'" target="_blank"><img src="'.$row['gallery_image_filename'].'" width="'.$final_image_width.'" height="auto" style="margin: '.$other_margin.'px '.$gallery_image_margin.'px '.$other_margin.'px 0px"/></a></li>';
}
$gallery = implode(' ', $gallery); 
```

然后我可以将我的 $gallery 变量连接到`'GALLERY' => 'value'`值中，并根据需要输出所有数据库结果。感谢大家的帮助 ：）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-17T13:30:23.050

好吧，您可以创建一个`class`带有[`__toString`](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)魔法的方法，该方法将处理您画廊中的所有图像，然后返回字符串。

```
 class TemplateGallery{
       private $images = array();

       public function addImage($src){
           $images[] = $src;
       }

       public function __toString(){
           $str = "";
           foreach($images as $image){
               $str .= sprintf('<li><img src="%s"></li>',$image);
           }
           return $str;
       }
   } 
```

好吧，正如评论中的人所说，这太“难”了，所以，你可以使用一个“预处理”函数，它会处理你的图像数组，然后返回你的模板字符串。

```
$images = array(/* Put images src here */);
function processGallery($images){
    $str = "";
    foreach($images as $image){
        $str .= sprintf('<li><img src="%s"></li>',$image);
    }
    return $str;
} 
```

然后在你的`array`.

# c++ - 字符串。TCHAR LPWCS LPCTSTR CString。这是什么，简单快速

> ID：16061264
> 
> 赞同：2
> 
> 时间：2013-04-17T13:24:03.060
> 
> 标签：c++, string, winapi

```
TCHAR szExeFileName[MAX_PATH]; 
GetModuleFileName(NULL, szExeFileName, MAX_PATH);

CString tmp;
lstrcpy(szExeFileName, tmp);
CString out;
out.Format("\nInstall32 at %s\n", tmp);
TRACE(tmp); 
```

错误（在格式）：

```
error C2664: 'void ATL::CStringT<BaseType,StringTraits>::Format(const wchar_t 
*,...)' : cannot convert parameter 1 from 'const char [15]' to 'const wchar_t 
```

我只想获取启动该程序的当前路径并将其复制到 CString 中，以便我可以在其他地方使用它。我目前只是试图通过追踪它来查看路径。但是字符串、字符、字符数组，我永远都搞不定。有人可以给我指点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T18:11:36.637

接受的答案解决了这个问题。但该问题还要求更好地了解 Windows 上所有字符类型之间的差异。

**编码**

Windows（以及几乎所有其他系统）上的A`char`是单个字节。一个字节通常被解释为无符号值 [0..255] 或有符号值 [-128..127]。（旧的 C++ 标准保证有符号范围仅 [-127..127]，但大多数实现给出 [-128..127]。我相信 C++11 保证更大的范围。）

ASCII 是 [0..127] 范围内的值到特定字符的字符映射，因此您可以将 ASCII 字符存储在有符号字节或无符号字节中，因此它将始终适合`char`.

但是 ASCII 没有大多数语言所需的所有字符，因此通常通过使用字节中可用的其余值来扩展字符集，以表示某些语言（或语言系列）所需的附加字符。因此，虽然 [0..127] 几乎总是意味着相同的东西，但像 150 这样的值只能在特定编码的上下文中解释。对于单字节字母，这些编码称为代码页。

代码页有所帮助，但它们并没有解决所有问题。您总是必须知道特定文档使用哪个代码页才能正确解释它。此外，您通常无法编写使用不同语言的单个文档。

此外，某些语言的字符数超过 256 个，因此无法一对一地映射`char`字符。这导致了多字节字符编码的发展，其中 [0..127] 仍然是 ASCII，但其他一些值是“转义”，这意味着您必须查看一些后续`char`的 s 才能确定什么字符你真的有。（最好将多字节视为*可变*字节，因为有些字符只需要一个字节，而另一些则需要两个或更多。）多字节有效，但编写代码很痛苦。

与此同时，内存变得越来越充裕，因此许多组织聚集在一起创建了 Unicode，其目标是进行值到字符的通用映射（对于“字符”的适当模糊定义）。最初，人们认为所有字符（或至少任何人会使用的所有字符）都适合 16 位值，这很好，因为您不必处理多字节编码——您只需每个字符使用两个字节而不是一个。大约在这个时候，微软决定采用 Unicode 作为 Windows 中文本的内部表示。

**WCHAR**

所以 Windows 有一个类型叫做`WCHAR`，一个两字节的值，代表一个“Unicode”“字符”。我在这里使用引号是因为 Unicode 是从最初的两字节编码演变而来的，所以 Windows 所称的“Unicode”在今天并不是真正的 Unicode——它实际上是一种特殊的 Unicode 编码，称为 UTF-16。并且“字符”在 Unicode 中并不像在 ASCII 中那样简单，因为在某些语言中，字符以有趣的方式组合或以其他方式影响相邻字符。

较新版本的 Windows 在内部将这些 16 位`WCHAR`值用于文本，但仍有很多代码是为单字节代码页编写的，甚至还有一些是为多字节编码编写的。那些程序仍然使用`char`s 而不是`WCHAR`s。并且其中许多程序必须与使用旧版本 Windows 的人一起工作，这些旧版本的 Windows 仍然`char`在内部使用 s 以及新版本的使用`WCHAR`. 因此，设计了一种使用 C 宏和 typedef 的技术，这样您就可以在大多数情况下以一种方式编写代码，并且 - 在编译时 - 选择让它使用`char`或`WCHAR`.

**TCHAR**

为了实现这种灵活性，您可以使用 a`TCHAR`作为“文本字符”。在某些头文件（通常是`<tchar.h>`）中，`TCHAR`将根据编译时环境将类型定义为`char`或。`WCHAR`Windows 标头采用如下约定：

*   `LPTSTR`是一个指向`TCHAR`s 字符串的（长）指针。
*   `LPWSTR`是一个指向`WCHAR`s 字符串的（长）指针。
*   `LPSTR`是一个指向`char`s 字符串的（长）指针。

（`L`for“long”是 16 位时代的遗留物，当时我们有 long、far 和 near 指针。今天这些都已经过时了，但`L`前缀往往会保留下来。）

大多数接受和返回字符串的 Windows API 函数实际上都替换为两个版本：`A`版本（用于“ANSI”字符）和`W`版本（用于宽字符）。（同样，这些历史遗留问题。代码页方案通常被称为 ANSI 代码页，尽管我一直不清楚它们是否真的由 ANSI 标准统治。）

因此，当您像这样调用 Windows API 时：

```
SetWindowText(hwnd, lptszTitle); 
```

你真正在做的是调用一个扩展为`SetWindowTextA`or的预处理器宏`SetWindowTextW`。它应该与但是`TCHAR`定义一致。也就是说，如果你想要`char`s 的字符串，你会得到`A`版本，如果你想要`WCHAR`s 的字符串，你会得到`W`版本。

但由于字符串文字，它有点复杂。如果你这样写：

```
SetWindowText(hwnd, "Hello World");  // works only in "ANSI" mode 
```

那么只有当你以`char`版本为目标时才会编译，因为`"Hello World"`它是一个 s 字符串`char`，所以它只与`SetWindowTextA`版本兼容。如果你想要这个`WCHAR`版本，你必须写：

```
SetWindowText(hwnd, L"Hello World");  // only works in "Unicode" mode 
```

这里的`L`意思是你想要宽字符。（the`L`实际上代表 long，但它与上面的 long 指针的 long 含义不同。）当编译器看到`L`字符串上的前缀时，它知道字符串应该被编码为一系列`wchar_t`s 而不是`char`s。

（针对 Windows 的编译器使用 2 字节的值`wchar_t`，这恰好与 Windows 定义的 a 相同`WCHAR`。针对其他系统的编译器通常使用 4 字节的值`wchar_t`，这是保存单个 Unicode 代码点所需要的。 )

因此，如果您想要可以以任何一种方式编译的代码，您需要另一个宏来包装字符串文字。有两种可供选择： `_T()`和`TEXT()`。它们的工作方式完全相同。第一个来自编译器的库，第二个来自操作系统的库。所以你写你的代码是这样的：

```
SetWindowText(hwnd, TEXT("Hello World"));  // compiles in either mode 
```

如果您以`char`s 为目标，则该宏是一个只返回常规字符串文字的无操作。如果您以`WCHAR`s 为目标，则宏会在`L`.

那么你如何告诉编译器你想要定位`WCHAR`？您定义`UNICODE`和`_UNICODE`。前者用于 Windows API，后者用于编译器库。确保你永远不会定义一个没有另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:25:57.887

我的猜测是您正在以 Unicode 模式编译。

尝试将格式字符串包含在 _T 宏中，该宏旨在提供始终正确的方法来提供常量字符串参数，无论您是在 Unicode 还是 ANSI 模式下编译：

```
out.Format(_T("\nInstall32 at %s\n"), tmp); 
```

# java - 尝试编译 AspectJ 教程应用程序时的问题

> ID：16061281
> 
> 赞同：3
> 
> 时间：2013-04-17T13:24:53.547
> 
> 标签：java, aspectj

我试图按照本教程进行操作：

[http://andrewclement.blogspot.pt/2009/02/load-time-weaving-basics.html](http://andrewclement.blogspot.pt/2009/02/load-time-weaving-basics.html)

但我偶然发现了几个问题：

首先，我的系统没有设置`javac`和`ajc`PATH 变量，所以我将`bin/`JDK7 的目录以及 AspectJ 的`bin/`目录添加到了 PATH 变量中。

但是在运行时`ajc WhereDoesTheTimeGo.java Simple.java`出现以下错误：

```
[warning] couldn't find aspectjrt.jar on classpath, checked: C:\Program Files\Ja
va\jre7\lib\resources.jar;C:\Program Files\Java\jre7\lib\rt.jar;C:\Program Files
\Java\jre7\lib\sunrsasign.jar;C:\Program Files\Java\jre7\lib\jsse.jar;C:\Program
 Files\Java\jre7\lib\jce.jar;C:\Program Files\Java\jre7\lib\charsets.jar;C:\Prog
ram Files\Java\jre7\lib\jfr.jar;C:\Program Files\Java\jre7\classes;C:\Program Fi
les\Java\jre7\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jre7\lib\ext\dn
sns.jar;C:\Program Files\Java\jre7\lib\ext\jaccess.jar;C:\Program Files\Java\jre
7\lib\ext\localedata.jar;C:\Program Files\Java\jre7\lib\ext\sunec.jar;C:\Program
 Files\Java\jre7\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jre7\lib\ext\
sunmscapi.jar;C:\Program Files\Java\jre7\lib\ext\zipfs.jar;C:\Program Files\Java
\jre7\lib\tools.jar

[error] classpath error: unable to find org.aspectj.lang.JoinPoint (check that a
spectjrt.jar is in your classpath) 
```

所以我手动将引用的文件添加到类路径中：

```
ajc -cp ajc -cp C:\aspectj1.7\lib\aspectjrt.jar Simple.java WhereDoesTheTimeGo.java 
```

然后执行显然没问题，因为创建了两个 .class 文件。但是之后...：

```
ajtests>java Simple
Exception in thread "main" java.lang.NoClassDefFoundError: org/aspectj/lang/Sign
ature
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.aspectj.lang.Signature
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 6 more 
```

所以我再次将 AspectJ 的 jars 添加到类路径中：

```
java -cp C:\aspectj1.7\lib\aspectjrt.jar;C:\aspectj1.7\lib\aspectjtools.jar;C:\aspectj1.7\lib\aspectjweaver.jar;C:\aspectj1.7\lib\org.aspectj.matcher.jar Simple 
```

但这只会产生

```
Error: Could not find or load main class Simple 
```

这里出了什么问题？为什么这给我带来的痛苦比教程让我相信我必须拥有的痛苦还要多？

## 编辑

我注意到我只需要写

```
aj -cp .;;C:\aspectj1.7\lib\aspectjweaver.jar Simple 
```

这将起作用。我发现奇怪的是，这`aspectjweaver.jar`似乎已经被`aj`脚本传递了：

```
@echo off
REM This file generated by AspectJ installer
REM Created on Tue Apr 16 19:02:36 BST 2013 by top_secret

if "%JAVA_HOME%" == "" set JAVA_HOME=C:\Program Files\Java\jre7
if "%ASPECTJ_HOME%" == "" set ASPECTJ_HOME=c:\aspectj1.7

if exist "%JAVA_HOME%\bin\java.exe" goto haveJava
if exist "%JAVA_HOME%\bin\java.bat" goto haveJava
if exist "%JAVA_HOME%\bin\java" goto haveJava
echo java does not exist as %JAVA_HOME%\bin\java
echo please fix the JAVA_HOME environment variable
:haveJava
"%JAVA_HOME%\bin\java" -classpath "%ASPECTJ_HOME%\lib\aspectjweaver.jar" "-Djava.system.class.loader=org.aspectj.weaver.loadtime.WeavingURLClassLoader" "-Daj.class.path=%ASPECTPATH%;%CLASSPATH%" "-Daj.aspect.path=%ASPECTPATH%" %* 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:29:25.670

试试这个，对于你的 java 命令：

```
java -cp .;C:\aspectj1.7\lib\aspectjrt.jar;C:\aspectj1.7\lib\aspectjtools.jar;C:\aspectj1.7\lib\aspectjweaver.jar;C:\aspectj1.7\lib\org.aspectj.matcher.jar Simple 
```

您需要在类路径中包含当前目录（将源文件编译到的位置）。

# android - 制作Custome UI（通过扩展视图）

> ID：16061284
> 
> 赞同：0
> 
> 时间：2013-04-17T13:25:06.737
> 
> 标签：android, android-layout, user-interface, custom-controls, custom-component

我制作了 CustomUI.java 文件

```
public class CustomUI extends View {

    Bitmap icon;
    float left=0;

    public CustomUI(Context context) {
        super(context);
        icon=BitmapFactory.decodeResource(getResources(), R.drawable.icon);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        canvas.drawBitmap(icon, left, 0, null);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
           setMeasuredDimension(250, 100);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        if(event.getAction()==event.ACTION_SCROLL){
            left=event.getX();
        }
        if(left>=200){
            //do some activity;
        }
        return true;
    }
} 
```

我制作了布局 custom_ui.xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".CustomUI" >

    <com.example.missedcall.CustomUI
        android:id="@+id/single_spinner"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </com.example.missedcall.CustomUI>

</RelativeLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.missedcall"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.missedcall.CustomUI"
            android:label="@string/title_activity_custom_ui" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

当我显示图形布局时，它显示得很好，但是当我运行它时，它的运行 n 显示空白布局并在第二个 n 关闭应用程序后显示错误。请帮我解决这个问题并在 android 中制作自定义 UI。

日志文件：http: [//i.stack.imgur.com/o4L6o.jpg](http://i.stack.imgur.com/o4L6o.jpg) 或[https://dl.dropboxusercontent.com/u/6608612/log.JPG](https://dl.dropboxusercontent.com/u/6608612/log.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:32:51.453

问题在这里：

```
<activity
        android:name="com.example.missedcall.CustomUI" 
```

您需要在此处提供活动类。我猜你提供的是你的 CustomView 的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:39:55.230

您需要`AttributeSet`在 CustomUi 类中创建一个具有参数和上下文的构造函数。

```
public CustomUi(Context context, AttributeSet attrs) {
    super(context, attrs);
    icon=BitmapFactory.decodeResource(getResources(), R.drawable.icon);
} 
```

然后在您的主类中将 CustomUi 声明为

```
CustomUi customUi = (CustomUi) findViewById(R.id.single_spinner); 
```

希望能帮助到你..

# ruby - Ruby：读取未保存的文本文件

> ID：16061291
> 
> 赞同：1
> 
> 时间：2013-04-17T13:25:13.663
> 
> 标签：ruby, windows, file, filesystems

我在 Windows 中有一个 RFID 扫描仪程序，将其结果写入示例文本文件。但是程序不保存文件。Ruby 中是否有任何方法可以读取对文本文件所做的这些更改，即使它们尚未提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:40:36.013

. 你不能 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T14:17:31.763

可以设置 RFID 程序将其数据发送到任意程序吗？因为如果是这样，那么我会说你最好的选择是首先编写一个可以发送到该程序的程序，该程序可以对数据执行一些明智的操作（例如将其写入文件），而不是使用记事本作为过程的一部分.

# javascript - 由“。”组成的子字符串 在 HTML 中

> ID：16061299
> 
> 赞同：-8
> 
> 时间：2013-04-17T13:25:20.553
> 
> 标签：javascript, html

我有一个由“apple.jpg”组成的字符串，我正在尝试执行一个子字符串，以便它将返回“。”之前的值。这是苹果。

下面是我的代码，但它没有返回任何值：

```
 str="apple.jpg";
 $subString = document.write(str.substring(".");
 echo ($subString); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:28:10.873

您可以尝试拆分字符串并获取数组的第一个元素：

```
myArray = str.split(".");
name = myArray[0]; 
```

以上是*伪代码*，因为我不确定您使用的是哪种语言...（您在示例中结合了 JavaScript 和 PHP！）

注意是`str`类似`some.word.jpg`的，上面的代码只会返回`some`。

如果这是一个问题，请尝试使用`lastIndexOf()`，如下所示：

```
name = str.substring(0, str.lastIndexOf(".")); 
```

请注意，上面现在是 JavaScript，因为 PHP 中没有`lastIndexOf`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:29:47.673

你可以使用 str.indexOf("."); 然后使用 substring 函数

也许像这样`str.substring(0,str.indexOf("."));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:30:00.800

即使你正在混合 php 和 js。尝试寻找一个名为 lastIndexOf() 的函数。

找到给定字符串的 las 位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:30:32.643

`substring()`想要返回的子字符串的起始位置和长度（参见 参考资料[`substring()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)）。您需要添加`indexOf()`以获得所需的结果：

```
$subString = document.write(str.substring(0,indexOf(str, "."))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:32:34.277

从混合信息中，有一种在 javascript 和 php 中的方法

javascript:

```
str="apple.jpg";
 $subString = str.split(".");
document.write($substring[0]); 
```

php:

```
$str="apple.jpg";
 $subString = explode(".", $str);
echo $substring[0]; 
```

虽然最好不要在javascript中的变量中使用$符号。

# wordpress - Wordpress is_page() 用于博客文章列表页面

> ID：16061306
> 
> 赞同：1
> 
> 时间：2013-04-17T13:25:50.847
> 
> 标签：wordpress, conditional

我正在尝试在 Wordpress 中使用 is_page() 条件来检测当前页面是否是博客列表页面（或实际上是博客文章页面）。条件适用于任何其他页面（联系人、最新消息等），但由于某种原因，它不适用于博客页面。

加上实际的博客文章页面 - URL 是 www.domain.com/the-post-title 格式，所以我无法从 $_SERVER 或任何东西检查 URL 中的“博客”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-25T17:25:08.367

我们需要检查：

*   如果此页面是博客页面。
*   如果此页面是“帖子页面”

    ```
    function is_page_for_posts() {
        $result = false;

        if ( is_home() && ! is_front_page() ) {
            $page = get_queried_object();

            $result = ! is_null( $page ) && $page->ID == get_option( 'page_for_posts' );
        }

        return $result;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:57:54.917

根据[这篇](http://www.wpexplorer.com/wordpress-homepage-conditional/)文章，这就是你如何使用这些条件函数：

```
if ( is_front_page() && is_home() ){
    // Default homepage
} elseif ( is_front_page()){
    //Static homepage
} elseif ( is_home()){
    //Blog page
} else {
    //everything else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:33:30.060

您可能需要结合使用 is_home() - 如果您的主页是博客

或 is_single() 基于博客文章的类型

参考：[http ://codex.wordpress.org/Conditional_Tags#A_Single_Post_Page](http://codex.wordpress.org/Conditional_Tags#A_Single_Post_Page)

# php - 如何选择所有条件为空的？

> ID：16061316
> 
> 赞同：0
> 
> 时间：2013-04-17T13:26:12.240
> 
> 标签：php, mysql, sql

我有一个带有查询的 php 代码：

```
$query = "SELECT * FROM TDdb WHERE status = $status AND occupation =$occupation"; 
```

我正在使用客户端应用程序将值状态和职业发送到此 php 代码。这在我发送状态和职业时有效。但是如果我只发送状态而不是职业，我希望它返回行（我的意思是不管职业是什么）。

有没有人有什么建议？我将不胜感激任何帮助。

PS：我想在没有 if 语句的情况下做到这一点，而只是改变查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:39:35.420

就个人而言，我会创建一个基本查询并在任何有条件的地方附加条件，如下所示：

```
$sql = 'SELECT * FROM TDdb';
$conditions = array();
$args = array();

if ($action) {
    $conditions[] = 'status = :status';
    $args[':status'] = $status;
}

if ($occupation) {
    $conditions[] = 'occupation = :occupation';
    $args[':occupation'] = $occupation;
}

if ($conditions) {
    $sql .= ' WHERE ' . join(' AND ', $conditions);
}

$stmt = $db->prepare($sql);
$stmt->execute($args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:03:29.243

看起来您有一些不错的选择，可用于如何在 SQL 中执行此操作，或者如何在 PHP 中创建 SQL 字符串变量。

考虑在 PHP 代码中使用“if”来提高数据库访问性能的原因之一。

当您在 SQL 中引入类似的“或”条件时，您将无法获得索引访问权限。与 PHP 代码相比，数据库更难确定它应该采用的路径，因为 SQL 引擎在不知道变量在执行时将解析为什么的情况下优化查询。

您已经在 PHP 中知道您真正想要的查询版本。如果您在那里做出选择，这将表现得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:28:58.477

如果您传递职业或 NULL 值，这将起作用。

```
SELECT * 
FROM   TDdb 
WHERE  status = $status 
       AND ($occupation IS NULL OR occupation = $occupation) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:30:31.097

```
"SELECT * FROM TDdb WHERE status = '$status' AND (occupation = '$occupation' OR occupation IS NULL)"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:42:11.953

除了@Tom 和@Damien Legros 提供的解决方案外，您还可以创建两个查询字符串，一个有职业，一个没有职业。就像是：

```
$query = "SELECT * FROM TDdb WHERE status = $status";
if ($occupation != "") { 
   /*When you have value for occupation*/
   $query .= " AND occupation =$occupation";
} 
```

因此，在这种情况下，如果您只有状态字段，则将返回数据。其次，请检查表中的状态和职业字段是否为varchar，然后您必须将它们括在单引号（'）中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T14:31:49.420

感谢大家的帮助。特别是杰克。最后我像这样创建了我的查询：

```
$query = 'SELECT * FROM TDdb';

if ($status) {
    $query = $query." WHERE status = '".$status."'";
}

if ($occupation) {
    $query = $query." AND occupation = '".$occupation."'";
} 
```

# php - 在谷歌地图中插入可变 GPS 坐标

> ID：16061317
> 
> 赞同：0
> 
> 时间：2013-04-17T13:26:18.220
> 
> 标签：php, google-maps, gps

我希望我的脚本从 GPS（手机）获取纬度和经度坐标，然后将它们插入谷歌地图并显示手机的位置。好吧，我能够从 GPS 中检索经纬度坐标，但它不会将它们作为显示的地图的中心插入。我的代码：

```
<script>
    $(document).ready(function(){
        navigator.geolocation.getCurrentPosition(useposition); 
    });
                function useposition(position){  
            lat = position.coords.latitude;
            lon = position.coords.longitude;   
            $("#location").html('Lat: ' + lat + '<br />Lon: ' + lon);

        }
</script><meta name="viewport" content="initial-scale=1.0, user-scalable=no"<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script><script type="text/javascript">
function initialize() {
    var latlng = new google.maps.LatLng(54,-1);
    var settings = {
        zoom: 15,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP }; var map = new google.maps.Map(document.getElementById("map"), settings);
var marker = new google.maps.Marker({      position: latlng,      map: map,      title:"Yeah buddy!"  })};

                </script> 
```

如您所见，我获取了 GPs 坐标，我想将它们插入到我加载的地图中：`<body onload="initialize ()" > </body>` 我只是不知道如何从 lat、lon 生成变量以及如何在 gogle 地图中正确插入它。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:56:19.843

我假设“将坐标插入地图”是指在该位置添加标记？

您将遇到的第一个问题是您的`map`变量是初始化函数的局部变量。所以你可以把它变成一个全局变量。然后在您的 useposition 函数中，您可以简单地创建一个新标记。

```
<script>
    var map;

    $(document).ready(function(){
        navigator.geolocation.getCurrentPosition(useposition); 
    });

    function useposition(position){  
            lat = position.coords.latitude;
            lon = position.coords.longitude;   
            $("#location").html('Lat: ' + lat + '<br />Lon: ' + lon);
            var marker = new google.maps.Marker({      
                position: new google.maps.LatLng(lat,lon),      
                map: map,      
                title:"Your Mobile"  });
        }

function initialize() {
    var latlng = new google.maps.LatLng(54,-1);
    var settings = {
        zoom: 15,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP 
    }; 

    map = new google.maps.Map(document.getElementById("map"), settings);
    var marker = new google.maps.Marker({      position: latlng,      map: map,      title:"Yeah buddy!"  })
};
</script> 
```

# r - 在 nlme 中施加相关结构会突然终止 R 会话

> ID：16061319
> 
> 赞同：1
> 
> 时间：2013-04-17T13:26:19.843
> 
> 标签：r, mixed-models

使用 R 包 nlme 中的函数 gls() 进行模拟时遇到问题。我想对装有 gls() 的线性模型强加一个 AR(1) 相关结构。当我在模拟框架中执行此操作时（例如，将整个事情重复 10,000 次），R 通常（但并非总是）在某个时候突然崩溃。我在 R 中没有收到错误消息，但 R 突然终止并且 Windows 报告“R for Windows GUI 前端已停止工作”。我正在使用 OS Windows 7 和 R 版本 3.0.0 以及最新版本的 nlme (3.1-109)。

这是我的（简化的）代码：

```
library(nlme)

group <- rep(c("A", "B", "C", "D"), each=5)
person <- as.factor(rep(c(1:5), times=4))
value <- c(8.50, 11.69, 9.07, 8.82, 10.63, 10.87, 10.02, 9.84, 9.82, 9.68,
           7.55, 12.19, 9.16, 8.59, 9.98, 11.16, 9.63, 9.73, 10.15, 9.06)
dat <- data.frame(group, person, value)

xyz <- numeric(1)

runs <- 1E4

for(r in 1:runs){
  model <-  gls(value ~ group - 1, data=dat, corAR1(form=~1|person))
  if(summary(model)$corBeta[1,2] < 0.9){xyz <- xyz + 1}
}

xyz 
```

不同的数据集也会出现问题，而不仅仅是本例中的特定数据集。此外，我在不同（但相同）的工作站和不同的 R 会话中反复运行上述代码。R 在大约 50% 的情况下会崩溃。不幸的是，我不知道是什么导致了这种情况发生（或没有发生），如果你能帮助我，我将不胜感激。

# javascript - 返回一个变量以在 JQuery 中的另一个函数中使用

> ID：16061320
> 
> 赞同：0
> 
> 时间：2013-04-17T13:26:19.990
> 
> 标签：javascript, jquery, scroll, global, increment

我正在制作一个图片库，当我点击一个按钮时，我可以滚动到下一张图片。

我还可以选择“跳转”到特定图像。这一切都很好。

但是，如果我定期滚动到图像 3，然后跳转到图像 7。一旦我单击下一个按钮，我不会像我想的那样转到图像 8 - 我会转到图像 4。因为有两个单独的功能，而且我不能/不知道如何在它们之间传递变量。我知道我可以在两个函数之外使用全局变量，但这似乎不鼓励。

这是一个例子：

```
var i = 0;
// i is a global variable

$("#next_button").click(function(){
   $(".all_images").eq(i).show();
   i++;
}); 
```

这将正确地增加我所有的图像。

```
$(".thumbnails").click(function(){
    var x = $(this).index();
    $(".all_images:visible").hide();
    $(".all_images").eq(x).show();

i = x;
}); 
```

这显示了相对于我单击的缩略图的图像。

那么，如何在第二个函数中使用第一个函数中的“i”变量？这一直让我感到困惑。使用全局变量似乎更简单，因此每个函数都可以更改 i 的值并在必要时使用它。请赐教。

此外，据我了解，可以将 JQuery 代码包装在常规 JavaScript 函数中。但是，当我将 JQuery .click 包装在常规 JavaScript 函数中时，我的代码似乎不起作用（即 my_Function(){ ....$("#something").click.... }

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:48:32.353

与大多数编程语言一样，您有两种选择：

1.  使用全局变量（更高范围），
2.  通过参考。

但是，您不能真正避免创建某种全局变量（对象或原语），因此我建议您创建一个包含所有程序参数的对象（甚至可能是键值）。

为此，您可以使用这样的 .data 方法将数据分配给任意元素：

```
setter : 
$('body').data('myvar','value');

getter:
$('body').data('myvar'); 
```

见：[http ://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

为了通过引用传递，您需要传递一个对象而不是原始数据。有关详细信息，请参阅以下链接：

*   [在 Javascript 中通过引用传递变量](https://stackoverflow.com/questions/7744611/pass-variables-by-reference-in-javascript)
*   [http://snook.ca/archives/javascript/javascript_pass](http://snook.ca/archives/javascript/javascript_pass)
*   [jQuery 的 .click - 将参数传递给用户函数](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)

# php - 使用 ajax 插入数据库，不起作用

> ID：16061322
> 
> 赞同：0
> 
> 时间：2013-04-17T13:26:29.827
> 
> 标签：php, html, ajax, postgresql

我正在尝试使用 ajax 和 php 将数据插入数据库，但这不起作用。与数据库的连接正在工作（仅使用 php 进行了尝试）。我的代码的 ajax 部分正在发布并且值是有效的（用 firebug 检查）。我使用 postgresql 作为我的数据库我不知道为什么它不起作用。当我按下评论按钮时它可以工作（我没有错误），但字段中的文本不会进入数据库

这是代码：

```
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.6.2.min.js">
</script>
<script type="text/javascript">
$(document).ready(function(){

$("#submit").click(function(event) {
var name = $("#name").val();
var title= $('#title').val();
var comment= $('#comment').val();
$.post("comment.php", {name: name, title: title, comment: comment},

function (data) {
if (!data) {
$("#submit").append("Failed to reach server. Login Error.");
} else {
alert(data);
        }
});
return false; 
});
});
</script> 
<div class='comments'>
<!--<form action="scripts/comment.php" method="POST"> -->
<form action="" method="POST">
<label>Name:  </label><br /><input id="name"type="text" name="name" /><br /><br />
<label>Title: </label><br /><input id="title"type="text" name="title" /><br /><br />
<label>Comment:  </label><br /><textarea id="comment" name="comment" cols="90" rows="7">       </textarea><br /><br /><br />
<input id="submit" type="submit" name="submit" value="Comment" /><br />

</form>
<hr width=auto size="5px" />
</div> 
```

和用于插入的 php：

```
<?php
if (isset($_POST['name'])) {
// attempt a connection
$conn_string = "host= port= dbname= user= password=";
$dbh = pg_connect($conn_string);
if (!$dbh)  {
die("Error in connection: " . pg_last_error());
}

$name =pg_escape_string($_POST['name']);
$title= pg_escape_string($_POST['title']);
$comment =pg_escape_string($_POST['comment']);
$today=pg_escape_string(date('d-m-y'));
$sql = "INSERT INTO comments VALUES  ('$name','$comment','$today','$title',nextval('comments_id_seq'::regclass))";
$result = pg_query($dbh, $sql);
if (!$result) {

die("Error in SQL query: " . pg_last_error());
} 
pg_close($dbh);
//   $page='../index.php';
//header('Location:'.$page);
}
?> 
```

任何帮助，将不胜感激 ：） 。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:38:54.317

您的 $.post() 调用无视服务器的响应，这使得故障排除变得困难。您可以采取一些措施来纠正此问题：

首先，确保您已打开 PHP 错误报告。如果您的配置中没有打开它，请在脚本开头附近启用它，如下所示：

```
error_reporting(E_ALL); 
```

接下来，找到一种查看 PHP 脚本输出的方法。您可以修改您的`post`调用以接收和处理响应，但更简单的方法是暂时将您的 HTML 表单直接发布到脚本，绕过 AJAX 调用。查看当您将表单直接发布到脚本时脚本产生的输出。

# php - 谷歌加网络共享按钮不共享动态 og 标签

> ID：16061327
> 
> 赞同：0
> 
> 时间：2013-04-17T13:26:42.343
> 
> 标签：php, google-plus

我正在尝试使用谷歌加分享按钮分享一些事件。我面临的问题是，当我尝试使用 og 标签共享特定事件时，其中的内容是硬编码的，例如：

```
<meta property="og:title"  content="My Title">
<meta property="og:image" content="Awesome event">
<meta property="og:description" content="http://exqlusiv.com/wp-content/uploads/2012/08/tomorrowland-2012-video-live-sets-aftermovie.png"> 
```

然后使用[https://developers.google.com/+/web/share/](https://developers.google.com/+/web/share/)给出的代码来分享它，它可以正常工作，但问题是当我将变量传递给 og 标签的内容时

```
<meta property="og:title" content="<?php echo $title?>" />
<meta property="og:image" content="<?php echo $image?>" />
<meta property="og:description" content="<?php echo $description?>" /> 
```

谷歌分享按钮未检测到标签，无法正确分享内容。我真的被困在这个..

任何建议，

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:13:40.150

确保您已通过直接访问页面和使用[Google 富数据测试工具](http://www.google.com/webmasters/tools/richsnippets)验证数据是否正确填写。虽然 Google 共享通常可以识别 og 数据，但您可能还需要考虑添加[Schema。](https://developers.google.com/+/web/snippet/) Google 似乎更擅长处理的[org 微数据。](https://developers.google.com/+/web/snippet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T18:22:07.313

对于 Google+，附加`?v=random_string`到 URL。如果您将此想法与 Facebook 分享一起使用，请确保`og:url`响应中的参数与您分享的 URL 匹配。

对于 Facebook，您还可以通过向[https://graph.facebook.com](https://graph.facebook.com)发出发布请求来强制重新抓取

```
{id: url,
scrape: true} 
```

# delphi - 如何在delphi中一次将具有不同字体格式的文本绘制到画布上？

> ID：16061328
> 
> 赞同：9
> 
> 时间：2013-04-17T13:26:43.367
> 
> 标签：delphi

我一直在使用`DrawText`对于我所有的“矩形文本”输出需求，但是我看不到绘制字符串的方法，例如，每隔一个单词加粗或颜色不同，或者更糟糕的是，随机选择的单词的背景不同. 据我所知，可能没有单一的程序可以做到这一点，我可能错了，这就是这个问题的重点。有人可以指出试图达到这种效果的人可能感兴趣的程序吗？此外，如果我是正确的并且没有简单的方法可以做到这一点，那么推荐的路径是什么？当你开始思考可能由此产生的问题时，我脑海中浮现出每一个单词，然后试图将所有这些单词粘合在一起，这似乎是一场噩梦：

我有delphi xe3；如果有人可以改进我的问题和/或文本的措辞，请这样做。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T13:38:33.963

您可以从 VCL 获得一些帮助，因为该`TCanvas.TextOut`方法`x`将笔 pos 的坐标增加了输出字符串的宽度：

```
procedure TForm1.FormPaint(Sender: TObject);
begin
  Canvas.MoveTo(20, 100);

  Canvas.Font.Name := 'Segoe UI';
  Canvas.Font.Color := clMaroon;
  Canvas.Font.Style := [];
  Canvas.Font.Height := 64;
  Canvas.TextOut(Canvas.PenPos.X, Canvas.PenPos.Y, 'This ');

  Canvas.Font.Color := clNavy;
  Canvas.Font.Style := [fsBold];
  Canvas.Font.Height := 64;
  Canvas.TextOut(Canvas.PenPos.X, Canvas.PenPos.Y, 'is ');

  Canvas.Font.Name := 'Bookman Old Style';
  Canvas.Font.Color := clBlack;
  Canvas.Font.Style := [fsItalic];
  Canvas.Font.Height := 64;
  Canvas.TextOut(Canvas.PenPos.X, Canvas.PenPos.Y, 'a ');

  Canvas.Font.Name := 'Courier New';
  Canvas.Font.Color := clSilver;
  Canvas.Font.Style := [];
  Canvas.Font.Height := 64;
  Canvas.TextOut(Canvas.PenPos.X, Canvas.PenPos.Y, 'test!');
end; 
```

![截屏](https://privat.rejbrand.se/canvastextpos.png)

无论如何，如果您需要更高级的文本输出例程，为什么不看看[DirectWrite](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368038(v=vs.85).aspx)呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:38:02.997

Have you considered using Richedit with it's rather rich formatting abilities? If you need to draw text on canvas, not in window, then EM_FORMATRANGE message allows to copy graphical representation of formatted text.

# php - 用有效的 ID 替换 URL

> ID：16061330
> 
> 赞同：3
> 
> 时间：2013-04-17T13:26:45.140
> 
> 标签：php, regex

我有一个带有很多链接的**PHP**字符串**$menu 。**我需要用基于链接的 ID 替换 href。

我需要

*   删除域
*   删除开头和结尾的斜线
*   用'-'替换中间的斜线

这是我所拥有的：

```
<a href="http://www.test.de/start/">Link</a>
<a href="http://www.test.de/contact/">Another Link</a>
<a href="http://www.test.de/contact/sub/">Sub Link</a> 
```

这就是我想要的：

```
<a href="#start">Link</a> 
<a href="#contact">Another Link</a>
<a href="#contact-sub">Another Link</a> 
```

我用**preg_replace 试过了**

```
$search = array(
    "/http:\/\/www.test.de/",
    "/".preg_quote('/">', '/')."/"
);
$replacement = array('#','">');
$menu = preg_replace($search,$replacement,$menu); 
```

我的解决方案看起来有点“脏”，并没有取代中间的斜线。**任何关于“真实”模式的想法来完成这个？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:31:35.633

这可以通过 DOM 解析轻松完成：

```
$html = <<<EOM
<a href="http://www.test.de/start/">Link</a>
<a href="http://www.test.de/contact/">Another Link</a>
<a href="http://www.test.de/contact/sub/">Sub Link</a>
EOM;

$dom = new DOMDocument;
$dom->loadHTML($html);

foreach ($dom->getElementsByTagName('a') as $anchor) {
    $href = $anchor->getAttribute('href');
    if (strpos($href, 'http://www.test.de/') === 0) {
        $href = '#' . strtr(trim(parse_url($href, PHP_URL_PATH), '/'), '/', '-');
        $anchor->setAttribute('href', $href);
    }
}

echo $dom->saveHTML(); 
```

[**演示**](http://codepad.viper-7.com/Oi3aWK)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:35:35.697

You could use the php function [parse_url()](http://php.net/manual/en/function.parse-url.php); to create an array of the url segments.

ie:

```
$url = 'http://www.test.de/contact/';
$urlinfo    = parse_url($url);

echo "<h2>URL INFO</h2><pre>";
print_r($urlinfo);
echo "</pre>";
// create the id to be used
$linkID = "#".str_replace('/','',$urlinfo['path']);
echo $linkID;

// OUTPUT
<h2>URL INFO</h2>
Array
(
    [scheme] => http
    [host] => www.test.de
    [path] => /contact/
)
#contact 
```

M

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:31:35.660

如果域始终相同，请尝试：

```
str_replace("http://www.test.de/","#", $menu); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:32:15.223

```
// Remove the domain
$menu = str_replace("http://www.text.de","",$menu);

// Remove the beginning / and add #
$menu = str_replace("\"/","\"#",$menu);

// Remove the trailing /
$menu = str_replace("/\"","\"",$menu);

// Replace all remaining / with -
$menu = str_replace("/","-",$menu); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:34:49.300

*   将固定名称域更改为#
*   从末端修剪/
*   用。。。来代替 -

    ```
    $domain = "http://www.test.de/"
    str_replace('/','-',trim(str_replace($domain, '#', $menu),'/'); 
    ```

# java - 在 Java 中读取 bin 文件

> ID：16061332
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:26:48.727
> 
> 标签：java, file, filereader

我知道网站上有一些类似的问题，但他们无法为我提供有用的答案。在Java中逐行读取.bin文件的最佳/最有效方法是什么？应该使用哪些类和方法来打开它并获取数据？Bufferedreader 可以完成这项工作还是仅适用于文本文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:32:46.187

二进制文件没有行，但您必须知道文件的格式才能知道存在什么结构（标题、结构等）并编写解析器。

您可以使用 BufferedInputStream，请参阅以下内容：

*   [http://www.javapractices.com/topic/TopicAction.do?Id=245](http://www.javapractices.com/topic/TopicAction.do?Id=245)
*   [从二进制文件中读取结构化数据-？](https://stackoverflow.com/questions/3243441/read-structured-data-from-binary-file)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T13:46:01.980

这应该这样做。

```
public byte[] readFromStream(InputStream inputStream) throws Exception
{
ByteArrayOutputStream baos = new ByteArrayOutputStream();
DataOutputStream dos = new DataOutputStream(baos);
byte[] data = new byte[4096];
int count = inputStream.read(data);
while(count != -1)
{
    dos.write(data, 0, count);
    count = inputStream.read(data);
}

return baos.toByteArray();
} 
```

# java - 如何在静态方法中使用“runOnUiThread(runnable)”？

> ID：16061333
> 
> 赞同：4
> 
> 时间：2013-04-17T13:26:51.900
> 
> 标签：java, android, eclipse, multithreading, static

我正在两个不同的类中编写代码。第一个运行 IOIO 线程，它读取 IOIO 板的引脚状态；当这个线程运行时，它将更新另一个类（Tab3Activity.java）上的几个 TextView。

我调用了更新 UI 的方法，就像下面的代码一样。

```
Tab3Activity.setText(index,"string here"); 
```

以上需要是静态的`setText()`，否则会出错

> 无法从 Tab3Activity 类型对非静态方法 setText(int, String) 进行静态引用

问题出在 Tab3Activity.java 上。

```
public static void setText(final int idx,final String str) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            _textview[idx].setText(str);
        }
    });
} 
```

以上给出了`runOnUiThread`一个错误。

> 无法从 Activity 类型对非静态方法 runOnUiThread(Runnable) 进行静态引用

这是用 Globalioio.java 编写的 IOIO 线程代码，我正在尝试更新 Tab3Activity.java 上的 UI。看`Loop()`方法。

```
class Looper extends BaseIOIOLooper {

    @Override
    public void setup() throws ConnectionLostException {
        //setup DigitalOutputs, AnalogInputs etc here.
        if(Tab2Activity.isOpened==true){
            led_ = ioio_.openDigitalOutput(0, true);

            pwm1S = ioio_.openPwmOutput(10, 100);
            pwm1S.setDutyCycle((float)Tab2Activity.pwm1Speed.getProgress()/100);
            pwm1Move = ioio_.openDigitalOutput(11, false);

            pwm2S = ioio_.openPwmOutput(12, 100);
            pwm2S.setDutyCycle((float)Tab2Activity.pwm2Speed.getProgress()/100);
            pwm2Move = ioio_.openDigitalOutput(13, false);

            pwmSrvo1 = ioio_.openPwmOutput(26, 100);
            pwmSrvo1.setDutyCycle((float)Tab2Activity.servo1.getProgress()/100);
            pwmSrvo2 = ioio_.openPwmOutput(27, 100);
            pwmSrvo2.setDutyCycle((float)Tab2Activity.servo2.getProgress()/100);
        }
        if(Tab3Activity.isOpened==true){
            sensor1 = ioio_.openAnalogInput(41);
            sensor2 = ioio_.openAnalogInput(42);
            for(int i = 0;i<30;i++){
                    dInput[i] = ioio_.openDigitalInput(DIGITAL_SENSOR_PIN[i]);
            }
            for(int i = 0; i<10;i++){
                aInput[i] = ioio_.openAnalogInput(ANALOG_SENSOR_PIN[i]);
            }
        }

        connStatus=true;
    }

    @Override
    public void loop() throws ConnectionLostException {
        try {
            if(Tab3Activity.slideDrawer2.isOpened()==true){
                final float range1 = (float)(2914/(sensor1.read() * 675.18+5))-1;
                Tab3Activity.setSeekBarSensor(0,(int) (range1));
                Tab3Activity.setTextSensor(0,Float.toString((range1)));
                final float range2 = (float)(2914/(sensor2.read() * 675.18+5))-1;
                Tab3Activity.setSeekBarSensor(1,(int) (range2));
                Tab3Activity.setTextSensor(1,Float.toString(range2));

            }
            if(Tab3Activity.slideDrawer1.isOpened()==true){
                if(Tab3Activity.pinsGroup==0){
                    int idx =0;
                    for(int i = 0;i<10;i++){
                       final boolean readingD = dInput[i].read();
                       if(readingD==true){
                           Tab3Activity.setSeekBar(idx,(int) (100));
                       }else{
                           Tab3Activity.setSeekBar(idx,(int) (0));
                       }
                       Tab3Activity.setText(idx,Boolean.toString(readingD));
                       idx++;
                    }
                }else if(Tab3Activity.pinsGroup==1){
                    int idx =0;
                    for(int i = 10;i<20;i++){
                          final boolean readingD = dInput[i].read();
                            if(readingD==true){
                                Tab3Activity.setSeekBar(idx,(int) (100));
                            }else{
                                Tab3Activity.setSeekBar(idx,(int) (0));
                           }
                            Tab3Activity.setText(idx,Boolean.toString(readingD));
                            idx++;
                        }
                }else if(Tab3Activity.pinsGroup==2){
                    int idx=0;
                    for(int i = 20;i<30;i++){
                          final boolean readingD = dInput[i].read();
                            if(readingD==true){
                                Tab3Activity.setSeekBar(idx,(int) (100));
                            }else{
                                Tab3Activity.setSeekBar(idx,(int) (0));
                           }
                            Tab3Activity.setText(idx,Boolean.toString(readingD));
                            idx++;
                    }
                }else if(Tab3Activity.pinsGroup==3){
                    int idx=0;
                    for(int i = 0;i<10;i++){
                        final float readingA = aInput[i].read();
                        Tab3Activity.setSeekBar(idx,(int) (readingA * 100));
                        Tab3Activity.setText(idx,Float.toString((readingA * 100)));
                        idx++;
                    }
                }
            }
            Thread.sleep(10);
        } catch (InterruptedException e) {
            ioio_.disconnect();
        } catch (ConnectionLostException e) {
            throw e;
        }
    }
}

@Override
public IOIOLooper createIOIOLooper(String arg0, Object arg1) {
    // TODO Auto-generated method stub
    return new Looper();
} 
```

有没有其他方法可以做到这一点？请给一个简单的，我对android很陌生。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T14:28:27.423

> 如果这个线程是从同一个活动开始的

然后您可以将活动的引用传递给线程，并从该方法中删除静态。

```
YourThread thread = new YourThread(yourActivity);
thread.start();

//YourThread
public class YourThread extends Thread
{
    Tab3Activity activity;
    public YourThread(Tab3Activity activity)
    {
       Tab3Activity.activity = activity;
    }

...
    activity.setText(index,"string here");
...
} 
```

**注意：**确保您的活动具有 android:configChanges="orientation|keyboardHidden|screenSize"。否则，当您旋转设备时，将启动一个新的活动实例。

> 如果您的活动没有启动该线程

那么您不应该尝试通过静态方法直接访问活动。

如果你确定你的实现并且它不会导致内存泄漏或崩溃，那么试试这个

在您的活动或任何地方创建一个静态 MainLooper 处理程序。

```
public static Handler UIHandler = new Handler(Looper.getMainLooper()); 
```

现在您可以使用此处理程序在 ui 线程上运行。

```
public static void setText(final int idx,final String str) {
    UIHandler.post(new Runnable() {
        @Override
        public void run() {
            _textview[idx].setText(str);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:31:05.163

就在这里，

`Thread`你在你的和你的之间耦合，`Activity`这不是一个好的设计，

而是`Intent`在线程完成 I/O 触发 Intent 并在活动中捕获它时使用

# java - 如何从 Java Web Start 应用程序设置默认 HTTP 用户代理？

> ID：16061336
> 
> 赞同：7
> 
> 时间：2013-04-17T13:26:58.707
> 
> 标签：java, http, user-agent, java-web-start

我们在 Java 应用程序中定义了一个自定义 HTTP 用户代理，其中包含以下内容：

1.  软件版本
2.  用户语言
3.  平台信息（操作系统系列+版本名称）
4.  爪哇版

我们希望将此用户代理应用于应用程序创建的所有 HTTP 连接，包括我们手动打开的连接，以及 JRE 自动创建的连接，例如当`JEditorPane`解析 HTML 代码中引用的外部图像时。

为此，我们在应用程序启动时将`"http.agent"`系统属性设置为点 1/2/3（让[JRE 自己添加 Java 版本](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#MiscHTTP)）：

```
System.setProperty("http.agent", Version.getAgentString()); 
```

当我们从 jar 中运行应用程序时，这很有效，而不是从 Java Web Start 中运行。

作为一种解决方法，我们手动将完整的用户代理设置为我们手动创建的连接：

```
public static HttpURLConnection openHttpConnection(URL httpURL) throws IOException {
    HttpURLConnection connection = (HttpURLConnection) httpURL.openConnection();
    connection.setRequestProperty("User-Agent", Version.getFullAgentString());
    return connection;
} 
```

但这不处理由 JRE 创建连接的情况（JEditorPane 示例）。

在这种情况下我们如何设置用户代理？

我们试图通过[在这个例子](https://stackoverflow.com/a/3301720/2257172)`sun.net.www.protocol.http.HttpURLConnection.userAgent`中使用反射来改变 的值，但它不起作用，我们正面临一个.`IllegalAccessException`

我们也不能在 JNLP 文件中设置 User-Agent，因为无法确定客户端信息（用户语言 + 平台）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:58:26.683

您只能从 JNLP 文件设置系统属性，而不是启动的应用程序。有关如何执行此操作的说明，请参阅[http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html 。](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html)

不幸的是，您感兴趣的数据当时似乎不可用，因此这很可能不会如您所愿。

您可以使用一些较新的代理功能来获取连接，具体取决于您的应用程序。 [http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)。

一个极端的解决方案可能是在您的应用程序中携带您自己的 http 代理，然后告诉您的应用程序使用它，然后代理代码作为唯一知道如何退出的人，以及您添加的标头字段。

# highcharts - 在 highstock 中显示 yaxis

> ID：16061340
> 
> 赞同：0
> 
> 时间：2013-04-17T13:27:08.837
> 
> 标签：highcharts, highstock

我希望 yAxis 和它们在位于[http://contenidopremium.estrategiasdeinversion.com/modulos/indicadores/framework_indicadores.php?t=BBVA&k=msdgv8IUDfviuqweRH9snsdvu7wsaeuvc87awer43sdney](http://contenidopremium.estrategiasdeinversion.com/modulos/indicadores/framework_indicadores.php?t=BBVA&k=msdgv8IUDfviuqweRH9snsdvu7wsaeuvc87awer43sdney)的图表中的标签都显示出图表（图表中没有溢出）请参阅此图表[http://www.highcharts.com/demo/spline-symbols](http://www.highcharts.com/demo/spline-symbols)但我没有找到差异或正确的选项。我认为不同之处在于 demo 是 highchart 而我的是 highstock 但我不确定。

有人可以帮助我吗？

提前感谢ins，txetxu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:59:39.400

您可以使用 'align' 和 'verticalAlign' 选项更改图例的位置。尝试这样的事情：

```
legend: {
    enabled: true,
    verticalAlign: 'bottom'
}, 
```

这适用于 highstock [http://jsfiddle.net/PZzYR/](http://jsfiddle.net/PZzYR/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:41:21.837

设置[`yAxis.labels.align`](http://api.highcharts.com/highcharts#yAxis.labels.align)为正确，并操作 x/y 值，请参阅：http: [//jsfiddle.net/JJLBp/](http://jsfiddle.net/JJLBp/)

# c++ - 线程和堆栈跟踪中的异常显示对 _endthreadex 的调用

> ID：16061341
> 
> 赞同：3
> 
> 时间：2013-04-17T13:27:09.953
> 
> 标签：c++, windows, multithreading, exception, stack-trace

我目前正在调试我的一个应用程序中的崩溃，并偶然发现了一些对我来说有点奇怪的东西。在我的应用程序中，我使用 _beginthreadex 函数启动了几个线程。在某个随机时间点（有时在几个小时后），其中一个线程由于未知原因而崩溃。崩溃时的堆栈跟踪如下所示：

```
my.dll!thread(void * p=0x241e0140)  Line 792 + 0xf bytes    C
msvcr90.dll!__endthreadex()  + 0x44 bytes   
msvcr90.dll!__endthreadex()  + 0xd8 bytes   
kernel32.dll!_BaseThreadStart@8()  + 0x37 bytes 
```

其中 thread 是我的线程的主循环函数。我在这里省略了线程函数上方的堆栈帧。崩溃是访问冲突，并且每次都发生在具有完全相同的错误指针值的相同位置。

现在让我想到的是 __endthreadex 出现在堆栈跟踪中。我试图在一个小示例程序中重现这一点，并在那里也造成了访问冲突。但是堆栈跟踪看起来不同：

```
test.exe!thread(void * vpb=0x00000000)  Line 9 + 0x3 bytes  C++
test.exe!_callthreadstartex()  Line 348 + 0x6 bytes C
test.exe!_threadstartex(void * ptd=0x000328e8)  Line 326 + 0x5 bytes    C
kernel32.dll!_BaseThreadStart@8()  + 0x37 bytes 
```

对应的代码是这样的：

```
static unsigned __stdcall thread( void * vpb )
{
    int *a = (int*)0xdeadbeef;
    *a = 0;

    return 1;
}

int main()
{
    HANDLE th = (HANDLE)_beginthreadex( NULL, 0, thread, 0, CREATE_SUSPENDED, NULL );

    for(int i=0; i<INT_MAX;)
    {
        ++i;
    }

    ResumeThread(th);

    for(int i=0; i<INT_MAX;)
    {
        ++i;
    }

    return 0;
} 
```

原始代码看起来与此类似，但显然更复杂。所以我不知道堆栈跟踪中的差异是否可能是由于我在实现小示例时对代码的修改造成的，或者这一切是否表明堆栈损坏存在问题。

所以我的问题基本上是： _BaseThreadStart 是否有可能调用 __endthreadex 再次调用线程函数本身？如果是这样，有人可以解释为什么会这样，因为对我来说这看起来很奇怪，我在想这是否指出了一些可能与我最初的线程崩溃问题有关的问题。

提前感谢您的建议。

# python - matplotlib 3D 绘图的刻度标签位置

> ID：16061349
> 
> 赞同：11
> 
> 时间：2013-04-17T13:27:30.647
> 
> 标签：python, matplotlib

我正在尝试研究如何设置/更正 3D matplotlib 图的刻度标签的位置。刻度标签不与刻度对齐。当需要许多刻度标签时，这个问题似乎特别突出。

我修改了 matplotlib 文档中的一个示例（[http://matplotlib.org/examples/mplot3d/polys3d_demo.html](http://matplotlib.org/examples/mplot3d/polys3d_demo.html)）来说明我的问题。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.collections import PolyCollection
from matplotlib.colors import colorConverter
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure(figsize=(10,10))
ax = fig.gca(projection='3d')

cc = lambda arg: colorConverter.to_rgba(arg, alpha=0.6)

xs = np.arange(0, 10, 0.4)
verts = []
zs = np.arange(50)
for z in zs:
    ys = np.ones(len(xs))*z
    ys[0], ys[-1] = 0, 0
    verts.append(list(zip(xs, ys)))

poly = PolyCollection(verts,facecolor='c')
poly.set_alpha(0.7)
ax.add_collection3d(poly, zs=zs, zdir='y')

ax.set_xlabel('X')
ax.set_xlim3d(0, 10)
ax.set_ylabel('Y')
ax.set_ylim3d(-1, len(zs))
ax.set_yticks(np.arange(len(zs)))
labels = {}
for l_c in zs:
    labels[l_c] = 'This Looks Bad'
ax.set_yticklabels(labels,rotation=-15)
ax.set_zlabel('Z')
ax.set_zlim3d(0, ys.max())

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/rK6tD.png)

所以问题是：如何让刻度标签与刻度位置对齐？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T14:07:40.370

通过使用这些对齐方式，我得到了更好的展示位置：

```
ax.set_yticklabels(labels,rotation=-15,
                   verticalalignment='baseline',
                   horizontalalignment='left') 
```

我用较少的刻度标记修改了示例，以便您可以看到位置：

![在此处输入图像描述](https://i.stack.imgur.com/2Ttd4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T14:04:58.413

它们确实对齐，但水平位置以刻度为中心。由于是 3D 视图，这使得它们看起来比您期望它们的位置略低。效果与刻度的数量无关，而与宽度有关。

专门设置对齐方式会有所帮助。尝试添加：

```
ax.set_yticklabels(labels,rotation=-15, va='center', ha='left') 
```

玩一下不同的对齐方式，看看你喜欢哪个，我想你在 ha='left' 之后。

减少填充，即与刻度线的距离，也可能有所帮助。

![在此处输入图像描述](https://i.stack.imgur.com/Ly5vL.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-11T18:10:17.943

您还可以在每个轴的 tick_params 选项中将 pad 参数设置为负数。像这样：

```
 ax.tick_params(axis='x', which='major', pad=-3) 
```

这可能有助于调整刻度标签和轴之间的距离。

# java - 如何让一个 Alfresco 任务在 Activiti 工作流程中向另一个 Alfresco 任务发出信号？

> ID：16061352
> 
> 赞同：0
> 
> 时间：2013-04-17T13:27:36.460
> 
> 标签：java, alfresco, activiti

假设您有一堆单独的任务在您的工作流程中移动。这些任务通过它们的属性进行高级分组。当任务到达工作流中的特定 ReceiveTask 时，侦听器会检查其组中的所有任务是否都在 ReceiveTask 中。如果没有，监听器什么也不做。如果是，则向该组中的所有任务发出信号以继续进行工作流的下一步。

示例：每个任务代表一本书中的一页。当页面任务到达 ReceiveTask 时，会检查书籍中的所有页面是否都在那里。如果是，他们都可以继续前进。如果没有，他们就坐在那里。

ReceiveTask 上的 Java 侦听器向书中的其他页面发出信号以继续工作流的正确方法是什么？代码示例将非常有帮助。

似乎每个页面都在自己的工作流实例中，并且 WorkflowService.signal( pathID, transitionID ) 可能是使其他页面任务移动的方法，但是当我这样做时，我会遇到各种工作流异常这个。

`SEVERE: Error while closing command context org.activiti.engine.ActivitiException: org.alfresco.repo.workflow.activiti.tasklistener.ScriptTaskListener doesn't implement interface org.activiti.engine.delegate.ExecutionListener nor interface org.activiti.engine.delegate.JavaDelegate`

对我来说没有多大意义。我是否遇到了某种 Activit 事务问题？

使用 Alfresco 社区版 4.2c

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:00:09.317

我没有直接得到答案，但我在 Alfresco Enterprise 4.1.2 上得到了完全相同的异常，我发现的几乎唯一的参考资料是你在 Alfresco 论坛上的问题，现在在这里。

在我看来，Activiti 设计器中存在一个错误，它将任务侦听器放在执行侦听器应该去的地方。我直接转到 XML 并将 org.alfresco.repo.workflow.activiti.tasklistener.ScriptTaskListener 更改为 org.alfresco.repo.workflow.activiti.listener.ScriptExecutionListener 并且该特定错误消失了。

# solr - 为magento安装solr的目录

> ID：16061354
> 
> 赞同：0
> 
> 时间：2013-04-17T13:27:44.663
> 
> 标签：solr, magento-1.4

我想在我的服务器上为 magento 安装 solr。是否有一个特定的目录我应该安装它？

我的 java 版本

```
java版本“1.6.0_24”
OpenJDK 运行时环境 (IcedTea6 1.11.9) (rhel-1.36.1.11.9.el5_9-x86_64)
OpenJDK 64 位服务器 VM（内部版本 20.0-b12，混合模式）

```

我去了 [http://www.magentocommerce.com/knowledge-base/entry/how-to-use-the-solr-search-engine-with-magento-enterprise-edition](http://www.magentocommerce.com/knowledge-base/entry/how-to-use-the-solr-search-engine-with-magento-enterprise-edition)

它说我应该输入以下代码

```
cd 空目录
wget http://archive.apache.org/dist/lucene/solr/3.5.0/apache-solr-3.5.0.tgz

```

但我不知道它将安装在哪个目录中

后来它说“例如，如果 Solr 安装在 /etc/solr/apache-solr-3.5.0 中，Magento 安装在 /var/www/magento 中，请输入：”

所以我应该在“/etc”下创建一个目录“solr”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:10:38.073

在哪里安装 Solr 并不重要。但是 /opt 或 /var/opt 目录可能是比 /etc 更好的安装位置。

# php - 我如何使用 mod-rewrite (iirf) 仅重定向 php 文件

> ID：16061355
> 
> 赞同：3
> 
> 时间：2013-04-17T13:27:44.993
> 
> 标签：php, .htaccess, mod-rewrite, rewrite, iirf

我目前设置了重定向（使用 IIRF，但我相信这与 .htaccess 规则相同），这样所有文件都不会被重定向，而是直接转到 URL 中的文件路径，但其他所有文件都会被重定向到/index.php 使用下面的代码：

```
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ /index.php?request=$1 [L,QSA] 
```

我还需要它来将任何 .php 文件（但只有 .php 文件）重定向到 index.php （与第二条规则相同）

综上所述，'www.example.com/foo' AND 'www.example.com/foo.php' 都需要进入索引页面，但 'www.example.com/foo.js' 和 'www.example .com/foo.css'（等等！）没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T13:39:39.870

尝试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php?request=$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !index\.php
RewriteCond %{REQUEST_FILENAME} \.php$
RewriteRule ^(.*)$ /index.php?request=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:34:04.800

我想，你需要这样的东西

```
RewriteCond %{REQUEST_FILENAME} *.php$ 
```

# mongodb - MonoDb 在集合上的每一个操作都创建连接

> ID：16061359
> 
> 赞同：2
> 
> 时间：2013-04-17T13:27:49.220
> 
> 标签：mongodb, ejb, mongodb-java, nosql

我正在使用 mongodb-java-driver，除此之外别无其他。我创建了与 Mongo 连接的单态 EJB。

```
@Singleton
public class MongoConnection {

private DB db = null;
private MongoClient mongoClient = null;

@PostConstruct
public void init() {
  try {
    mongoClient = new MongoClient("localhost", 27017);
    db = mongoClient.getDB("mydb");
  } catch (UnknownHostException e) {
    e.printStackTrace();
}
}

public MongoConnection() {
}

public DB getDb() {
  return db;
}
public DBCollection getCollectionInDatabase(String collection) {
  DBCollection coll;
  coll = db.getCollection(collection);
  return coll;
}
} 
```

我在 ApplicationScoped bean (JSF) 中得到了这个 ejb（只是为了确定，我只有一个 DB 连接实例）。

```
@Named("appMongo")
@ApplicationScoped
public class MongoApplicationScope implements Serializable{

private static final long serialVersionUID = 1L;
@EJB MongoConnection mu;

public MongoConnection getMu() {
return mu;
}

public void setMu(MongoConnection mu) {
this.mu = mu;
}
} 
```

然后在请求范围的 bean 中，我从 db 获取数据

```
@Named("mongoBean")
@SessionScoped
public class MongoBean implements Serializable {

private static final long serialVersionUID = 1L;
@Inject MongoApplicationScope mongoAccess;
public void mongoDzialanie() {
DBCollection coll = mongoAccess.getMu().getDb().getCollection("oko"); //at this step everything is correct  
System.out.println(coll.getCount()); //new connection is created text from mongoDB console -> connection accepted from 127.0.0.1:57700 #2 (2 connections now open)

} 
```

为什么即使我有相同的“db”对象实例，我也无法在不创建新连接的情况下获取数据，为什么我不能共享这个连接，因为它应该是由于池化？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-11T21:55:45.503

每次使用集合时，MongoDB 驱动程序都会在后台打开新连接。司机决定什么时候开一个新的。我相信这取决于驱动程序的实现。

您可以通过设置 poolSize 值来控制打开的最大连接数（Node.JS MongoDb 驱动程序[http://mongodb.github.io/node-mongodb-native/2.2/api/MongoClient.html#connect](http://mongodb.github.io/node-mongodb-native/2.2/api/MongoClient.html#connect)默认为 5 ）它Java 或其他语言可能会有所不同。检查您的文档。

如果您将拥有多个 db 对象，则每个对象都将拥有自己的连接池。就我而言，我有 mainDb 和 logsDb。每个池有 10 个。因此，最多将打开 20 个并发连接。

最后，如果您使用的是 node.js 驱动程序，请确保将 Number 作为值而不是字符串传递（即 poolSize:10）。这将为您节省数小时/数天的故障排除时间:)

# c++ - 在 for 循环中使用 if 语句时程序崩溃

> ID：16061360
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:27:50.173
> 
> 标签：c++, if-statement, for-loop, codeblocks

我正在尝试解决 Project Euler 问题 3，直到代码块或任何导致`pissed`我失望的原因。这是我的代码，它有什么问题？我想更多的是一个错误？

```
#include <iostream>
using namespace std;

int main()
{
    int x=0;

    for(int y=0;y<=10;y++)
    {
        if(13195%x==0)
        {
            cout<<"I don't know why the program crashes!";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:30:54.990

`/`在执行or时，您不能使用 0 作为第二个操作数`%`。你本质上说的是“嘿，除以 0 并给我余数。” 请参阅以下内容：

[不能修改零吗？](https://stackoverflow.com/questions/7370154/cant-mod-zero)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:33:05.250

模运算符将其除以零，然后找到余数，因此您将得到除以零错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:30:34.193

x 不能等于 0，否则除以零。

试想一下 13195 中有多少个零？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:30:31.170

`x = 0`. 将数字除以零会使您的代码崩溃。确保`x`不在`0`之前`13195 % x`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:32:37.413

该操作`A modulo B`定义为：A 除以 B 的余数。在您的代码中，您有 B=0，这意味着您试图除以零。

# c++ - 如何在 C++ 中存根/模拟非指针成员变量？

> ID：16061361
> 
> 赞同：4
> 
> 时间：2013-04-17T13:27:54.160
> 
> 标签：c++, unit-testing, mocking, googlemock

许多关于单元测试的网站都说要提取接口和接口代码（这是有道理的），但这需要通过指针使用多态性。是否可以在没有指针的情况下完成此操作，因此我不必修改生产代码？我宁愿不使用指针和管理内存。

*   允许条件编译。
*   我专门为我的存根/模拟使用 gmock。

我研究过的一些事情是：

*   使用参考
    *   涉及编写特殊的复制构造函数或使其不可复制
    *   仍然需要用 new/delete 来管理内存
    *   不确定这是否会导致不可预见的问题
*   通过代码生成创建指针包装类的集合。界面保持不变，但添加了一些测试方法。
    *   似乎它会工作，但需要保养
    *   我在下面的意思的例子

**请注意 gmock 模拟对象是不可复制**的，因此我不能构造函数注入它们。（[https://groups.google.com/forum/#!topic/googlemock/GD73UXjQowE/discussion](https://groups.google.com/forum/#!topic/googlemock/GD73UXjQowE/discussion)）

# 问题示例

```
class Example
{
public:
   Example();
   ~Example();

private:
   // I want to stub out _foo.
   Dependency _foo;
}; 
```

# 指针包装类示例

```
#ifndef UNIT_TEST
   Foo _foo;
#else
   PtrWrapFoo _foo;
#endif 
```

**...**

```
_foo.setImpl(StubFoo *aStubFoo); 
```

**...**

```
void PtrWrapFoo::doSomething()
{
   _impl->doSomething();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:47:32.287

在过去，我`Dependency`在一个单独的编译单元中实现并链接到它而不是原来的。

这就是 Michael Feathers 所说的[Link Seam](http://www.informit.com/articles/printerfriendly.aspx?p=359417)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T02:08:12.513

经过深思熟虑，我决定放弃这个想法。给定测试场景，尝试和管理依赖项应该使用特定实现（例如真实、模拟、假）的情况变得太困难了。

所有需要测试的依赖项现在都有接口，它们是无成员的。我的生产代码使用依赖项指针，如果我想要可测试的代码，这是我必须忍受的现实。*在阅读了 Roy Osherove 的书《单元测试的艺术》*后，我被说服了这个概念。我的常规构造函数实例化了真正的具体类。我还有额外的构造函数/设置器，它们为单元测试有条件地编译，因此我可以使用存根/模拟正确地设置依赖关系。

通过使用工具从类中提取接口，我减少了编写额外代码的需要。

总体而言，新设计很好，并且以最小的开销充分回避了模拟非指针成员变量的问题。

# ruby - 由于目标机器主动拒绝，无法建立连接。- 连接（2）

> ID：16061362
> 
> 赞同：3
> 
> 时间：2013-04-17T13:27:54.477
> 
> 标签：ruby, watir, watir-webdriver

```
require 'watir-webdriver'    
begin
  url='http://localhost/test/test.php'
  ie =Watir::Browser.new:chrome
  ie.goto url
rescue Timeout::Error
  puts "time out"
  ie.close
  retry
end 
```

这是我的 php 文件：http://localhost/test/test.php

```
<?php 
set_time_limit(90);
sleep(60);
echo "hello"
?> 
```

输出->超时，然后出错：

> Errno::ECONNREFUSED（无法建立连接，因为目标机器主动拒绝了它。- connect(2)）。

基本上它应该在超时后关闭ie然后再次打开ie等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:48:42.467

这可能不是服务员的问题。从这个答案（[https://stackoverflow.com/a/2972662/131051](https://stackoverflow.com/a/2972662/131051)）

> 如果这种情况**总是**发生，它的字面意思是机器存在，但它没有在指定端口上侦听的服务，或者有防火墙阻止你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:47:24.650

当您尝试连接到任何盒子时，可以通过多种方式处理连接。如果您有防火墙阻止连接，它可以 DROP（如 netfilter 的 DROP 目标）或 REJECT 传入连接。

区别：

*   DROP 意味着传入的数据包被丢弃（如在地板上）。目标没有回复。源没有得到关于数据包发生了什么的任何信息。它只能做出假设，但不能肯定地说数据包没有在途中被网络组件吞下。
*   REJECT 意味着对于传入的数据包（如打开连接的 SYN 请求）将生成一个回复，说明在目标服务器的端口上没有应用程序正在侦听。这意味着数据包已到达目的地并已成功处理（解释），但没有应用程序可以控制该数据包。

您收到连接被拒绝，这意味着目标回复了，但表示无法或不会建立连接（主动拒绝）。预期的超时仅在目标机器没有应答并丢弃数据包时发生。

您可以[在此处查看](http://www.faqs.org/docs/iptables/tcpconnections.html)连接是如何建立、建立或拒绝的。

# python - Python AttributeError: 'tuple' 对象没有属性 'lower'

> ID：16061369
> 
> 赞同：1
> 
> 时间：2013-04-17T13:28:08.513
> 
> 标签：python

我正在尝试做一个干净的文档操作来删除停用词，下面的 pos 标记和词干是我的代码

```
 def cleanDoc(doc):
    stopset = set(stopwords.words('english'))
    stemmer = nltk.PorterStemmer()
    #Remove punctuation,convert lower case and split into seperate words
    tokens = re.findall(r"<a.*?/a>|<[^\>]*>|[\w'@#]+", doc.lower() ,flags = re.UNICODE | re.LOCALE)
    #Remove stopwords and words < 2
    clean = [token for token in tokens if token not in stopset and len(token) > 2]
    #POS Tagging
    pos = nltk.pos_tag(clean)
    #Stemming
    final = [stemmer.stem(word) for word in pos]
    return final 
```

我收到了这个错误：

```
Traceback (most recent call last):
  File "C:\Users\USer\Desktop\tutorial\main.py", line 38, in <module>
    final = cleanDoc(doc)
  File "C:\Users\USer\Desktop\tutorial\main.py", line 30, in cleanDoc
    final = [stemmer.stem(word) for word in pos]
  File "C:\Python27\lib\site-packages\nltk\stem\porter.py", line 556, in stem
    stem = self.stem_word(word.lower(), 0, len(word) - 1)
AttributeError: 'tuple' object has no attribute 'lower' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:32:08.303

在这一行：

```
pos = nltk.pos_tag(clean) 
```

`nltk.pos_tag()`返回元组列表`(word, tag)`，而不是字符串。使用它来获取单词：

```
pos = nltk.pos_tag(clean)
final = [stemmer.stem(tagged_word[0]) for tagged_word in pos] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:31:12.447

`nltk.pos_tag`返回元组列表，而不是字符串列表。也许你想要

```
final = [stemmer.stem(word) for word, _ in pos] 
```

# android - 我想在 10 秒后播放媒体播放器

> ID：16061371
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:12.137
> 
> 标签：android

我想在 android 延迟 10 秒后播放媒体播放器。

播放器 = MediaPlayer.create(getApplicationContext(), R.raw.sleep); 播放器.start();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:29:09.047

您可以尝试以下方法： 诀窍是在 10 秒后使用`CountDownTimer`

```
player = MediaPlayer.create(getApplicationContext(), R.raw.beepsound);

CountDownTimer timer = new CountDownTimer(10000, 1000) {

    @Override
    public void onTick(long millisUntilFinished) {                       
    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub

        player.start();
    }
};
timer.start(); 
```

完成后不要忘记停止并释放播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:40:08.097

另一种方法是使用 Handler

```
Handler h = new Handler();
h.postDelayed(new Runnable() {
  public void run(){
    player.start();
  }
}, 10 * 1000); 
```

# hadoop - 在 Hadoop 中读取分布式文件

> ID：16061373
> 
> 赞同：1
> 
> 时间：2013-04-17T13:28:16.763
> 
> 标签：hadoop

我正在尝试在 hadoop 中执行以下操作：

1.  我已经实现了一个将文件输出到目录“foo”的 map-reduce 作业。
2.  foo 文件采用 key=IntWriteable, value=IntWriteable 格式（使用 SequenceFileOutputFormat）。
3.  现在，我想开始另一个 map-reduce 工作。映射器很好，但每个减速器都需要在启动时读取整个“foo”文件（我正在使用 HDFS 在减速器之间共享数据）。

我在“public void configure(JobConf conf)”上使用了这段代码：

```
String uri = "out/foo";
FileSystem fs = FileSystem.get(URI.create(uri), conf);
FileStatus[] status = fs.listStatus(new Path(uri));
for (int i=0; i<status.length; ++i) {
    Path currFile = status[i].getPath();
    System.out.println("status: " + i + " " + currFile.toString());
    try {
        SequenceFile.Reader reader = null;
        reader = new SequenceFile.Reader(fs, currFile, conf);
        IntWritable key = (IntWritable) ReflectionUtils.newInstance(reader.getKeyClass(), conf);
        IntWritable value = (IntWritable ) ReflectionUtils.newInstance(reader.getValueClass(), conf);
        while (reader.next(key, value)) {
        // do the code for all the pairs.
        }
    }
} 
```

该代码在单台机器上运行良好，但我不确定它是否会在集群上运行。换句话说，这段代码是从当前机器读取文件还是从分布式系统读取 id？

我正在尝试做的事情有更好的解决方案吗？

提前致谢，

阿里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:31:43.270

The URI for the FileSystem.get() does not have scheme defined and hence, the File System used depends on the configuration parameter fs.defaultFS. If none set, the default setting i.e LocalFile system will be used.

Your program writes to the Local file system under the workingDir/out/foo. It should work in the cluster as well but looks for the local file system.

With the above said, I'm not sure why you need the entire files from foo directory. You may have consider other designs. If needed, these files should copied to HDFS first and read the files from the overridden setup method of your reducer. Needless to say, to close the files opened in the overridden closeup method of your reducer. While the files can be read in reducers, the map/reduce programs are not designed for this kind of functionality.

# c# - 为什么我会得到：“错误 2 参数 1：无法从 'int' 转换为 'TRAINING1.Node ' “ 错误？

> ID：16061375
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:28:19.077
> 
> 标签：c#, list, class, stack

这是一个应该获取列表并将其反转的函数。我不知道为什么我会收到这个错误。

```
 public static void What(List<int> lst)
    {
        Stack<int> st1 = new Stack<int>();
        while (!lst.IsEmpty())
        {
            **st1.Push(lst.Remove(lst.GetFirst().GetInfo());**
        }
        Node<int> pos = lst.GetFirst();
        while (!st1.IsEmpty())
        {
            pos = lst.Insert(pos, st1.Pop());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:35:26.570

`st1`是 a `Stack<int>`，这意味着它是一个强类型的整数堆栈。如果 没有从到的隐式转换，则不能添加`Node<int>` 到此列表中。无论如何，尝试使用下一个代码作为使用堆栈的示例：`Node<int>``int`

```
public static void Reverse(List<int> lst)
{
   Stack<int> st1 = new Stack<int>();
   while (lst.Count != 0)
   {
        var item = lst[0];
        lst.RemoveAt(0);
        st1.Push(item);
   }
   while (st1.Count != 0)
   {
       lst.Add(st1.Pop());
   }
} 
```

这不是一个有效的解决方案，并且有很多缺点。我只想说明使用堆栈的正确反转方法尽可能接近您的情况。

您可以使方法`Reverse`通用，但在 Linq 中已经实现了行为。

考虑使用[反向](http://msdn.microsoft.com/en-us/library/bb358497.aspx)Linq 方法。如果您只想反转`List<int>`，请使用`myList.Reverse().ToList()`. 它将返回相同`List<int>`但顺序相反。

# javascript - 如何用左括号替换子字符串 (

> ID：16061376
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:28:19.090
> 
> 标签：javascript, regex, string, replace

我是一个正则表达式新手，并试图实现正则表达式来替换字符串中的匹配模式，只有当它有一个 ( - 使用 Javascript 的开括号。例如，如果我有一个字符串

```
IN(INTERM_LEVEL_IN + (int)X_ID) 
```

我只想突出显示字符串中的第一个 IN(。不是 INTERM_LEVEL_IN (这里是 2 个) 和 int。

实现此目的的正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:32:28.043

要匹配左括号，您只需将其转义：`IN\(`.

例如，在 Firebug 控制台中运行它：

`enter code here`"IN(INTERM_LEVEL_IN + (int)X_ID)".replace(/(IN()/, 'test');`

将导致：

```
>>> "IN(INTERM_LEVEL_IN + (int)X_ID)".replace(/(IN\()/, 'test');
"testINTERM_LEVEL_IN + (int)X_ID)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:37:13.377

The following should only match IN( at the beginning of a line:

```
/^IN\(/ 
```

The following would match IN( that is not preceded by any alphanumeric character or underscore:

```
/[a-zA-Z0-9_]IN\(/ 
```

And finally, the following would match any instance of IN( no matter what precedes it:

```
/IN\(/ 
```

So, take your pick. If you're interested in learning more about regex, here's a good tutorial: [http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:32:22.993

正则表达式中的括号具有特殊含义（子捕获组），因此当您希望它们被逐字解释时，您必须在它们`\`之前使用 a 来转义它们。正则表达式`IN\(`将匹配字符串`IN(`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:35:22.517

您可以只使用常规的旧 Javascript 进行正则表达式，一个简单`IN\(`的示例适用于您提供的示例（[请参见此处](http://rubular.com/r/GKT7Fh9Llg)），但我怀疑您的情况比这更复杂。在这种情况下，您需要*准确*定义要匹配的内容和不想匹配的内容。

# jsf - 从更新的 selectOneMenu 中选择后，值未反映在 bean 类中

> ID：16061377
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:22.977
> 
> 标签：jsf, primefaces

我正在使用primefaces的selectOneMenu，并且我正在尝试在从其他selectOneMenu的销售值之后更新一个selectOneMenu。使用此代码，一切正常，我在 selectOnemenu 中获得了更新值。但是问题是，当我从更新的 selectOneMenu 中选择值时，单击按钮后未反映在 bean 菜单中，我
在此代码中的 bean 类中得到空值，我试图在从 selectOneMenu 中选择值后更新 id 为“deviceosName”的 selectOneMenu id 为“manufectureName”。但是在从 id 为“deviceosName”的 selectOneMenu 中选择值后，没有反映在 bean 类中。我无法弄清楚问题所在。有人可以帮助我吗？

```
<h:form>
        <p:growl id="messages" showDetail="true" autoUpdate="true" />

        <p:panel id="os_version_panel" header="Os Version">
            <h:panelGrid columns="3" title="Os Version"
                style="width:40%;height:20%;padding:10%;padding-left:30%">

                <h:outputLabel for="manufectureName" value="Manufecture Name:*"
                    style="float:right;font-size:15px;width:200px" />
                <p:spacer width="20" height="50" />

                <p:selectOneMenu id="manufectureName"
                    value="#{deviceRegistration.selectedManufacture}" effect="fade"
                    converter="deviceManufactureConverter" style="width:200px">
                    <f:selectItem itemLabel="Select One" itemValue="" />
                    <f:selectItems value="#{deviceRegistration.manufactureNameList}"
                        var="manufacturer" itemLabel="#{manufacturer.manufacturersName}"
                        itemValue="#{manufacturer}" />

                    <p:ajax update="deviceosName"
                        listener="#{deviceRegistration.updateOSName}" />
                </p:selectOneMenu>

                <h:outputLabel for="deviceosName" value="Device OS Name:*"
                    style="float:right;font-size:15px;width:200px" />
                <p:spacer width="20" height="50" />

                <p:selectOneMenu id="deviceosName"
                    value="#{deviceRegistration.selectedOsName}" effect="fade"
                    converter="deviceOsNameConverter" style="width:200px">
                    <f:selectItem itemLabel="Select One" itemValue="" />
                    <f:selectItems value="#{deviceRegistration.osNamesList}"
                        var="name" itemLabel="#{name.osName}" itemValue="#{name}" />
                </p:selectOneMenu>

                <f:facet name="footer">
                    <p:spacer width="20" height="80" />
                    <p:commandButton id="addOsVersion" value="Add OS Version"
                        update="messages" process="os_version_panel"                    
                        actionListener="#{deviceRegistration.addOsVersion}"
                        style="float:right;" />
                </f:facet>
            </h:panelGrid>
        </p:panel>
    </h:form> 
```

# javascript - 无法循环通过集合 - 主干

> ID：16061383
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:28:34.947
> 
> 标签：javascript, backbone.js

下面是我的 json 结构，在收集获取后我无法循环遍历它。

JSON：

```
{ "science":[{},{},{},...{}], "maths":[{},{},{},...{}], "english":[{},{},{},...{}], }

this.collection.each(function(m) {
    //returns me only only single child object named "r"
    //screenshot attached below
}); 
```

我怎样才能循环 3 次，即 3 个 diff 数组对象？

![在此处输入图像描述](https://i.stack.imgur.com/KZsYj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:34:10.130

您必须更改包含您的数据的 JSON。一个集合将解析你给它的 JSON：

```
[{...}, {...}, {...}] 
```

这里我们有一个包含 3 个对象的数组。这将被解析为 3 个模型。所以你想要这样的东西：

```
[
  {course: 'science', data: [...]},
  {course: 'maths', data: [...]},
  {course: 'aviation', data: [...]}
] 
```

这将为您提供一个包含 3 个模型的集合，每个模型都有 2 个属性：一个属性`course`和一个`data`. 现在，遍历它们：

```
this.collection.each(function(m) {
  console.log(m.get('course')); // will be science, maths or aviation
  console.log(m.get('data')); // will be the corresponding array
}); 
```

# c++ - STL 容器上的 C++ 模板函数

> ID：16061384
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:42.803
> 
> 标签：c++, stl, iterator, containers

我想编写一个通用函数来计算 STL 容器中元素的总和。我的做法如下（`t`是一个容器）：

```
template <typename T> double Sum(const T& t){
    typename T::reverse_iterator rit  = t.rbegin();
    double dSum = 0.;
    while( rit != t.rend() ){
        dSum += (*rit);
            ++rit;
    }
    return dSum;
} 
```

但我遇到了很多错误。我想问题是关于我定义迭代器的第二行？将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:32:31.323

应该

```
typename T::const_reverse_iterator rit  = t.rbegin(); 
```

因为`t`is`const`和`rbegin`for`const`容器返回`const_reverse_iterator`，所以不能转换为`reverse_iterator`.

会更好用`std::accumulate`，而不是你自己的函数，像这样

```
double result = std::accumulate(c.rbegin(), c.rend(), 0.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:42:09.027

> 将不胜感激任何帮助:)

如果您在生产代码中执行此操作，请`std::accumulate`改用：它是标准的生产质量代码，应该已经实施和测试。

如果您将其编写为练习，请考虑以下事项：

*   根据迭代器定义函数接口，而不是容器。std:: 库的最大优势之一是将容器逻辑（如何获取迭代器并推进它们）与应用于迭代器的算法（在本例中为 ）分开`Sum`。

例如（使用 std::accumulate）您可以将其称为`std::accumulate(t.begin(), t.end(), 0)`or`std::accumulate(t.rbegin(), t.rend(), 0)`或`std::accumulate(t.cbegin(), t.cend(), 0)`。

*   通过值接收开始迭代器并直接递增它（它将节省您在内部声明 rit 的需要；通过 const 引用接收结束迭代器。

*   可选：设置总和的默认值（默认值应为零）。

# sed - awk 显示 x 不是 y

> ID：16061386
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:47.433
> 
> 标签：sed, awk

是否可以将这些组合在一行中以提高效率。

```
awk '$4 ~/^[x]/' raw.txt > x_raw.txt
awk '!/y/' x_raw.txt > xy_raw.txt 
```

这可能与perl有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:32:36.043

您不需要切换到 perl 来执行逻辑 AND 只需使用 operator `&&`。以下打印第四个字段以开头`x`且该行不包含的行`y`：

```
awk '$4~/^x/&&!/y/' raw.txt > xy_raw.txt 
```

# forms - 如何在具有区域属性的表单中使用表单验证？

> ID：16061389
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:52.423
> 
> 标签：forms, validation, tapestry, zone

我对 Tapestry 5.3.6 有一个大问题。

我有一个带有自定义简单混合的表单，这意味着无法修改表单的 ID：/

所以我有这个：

```
<form t:type="form" t:id="formId" t:mixins="aMixins" t:zone="zoneID">
    <t:errors/>
    <input t:type="TextField"/>
    <a t:type="LinkSubmit" t:id="linkId"/>
</form>

<t:zone t:id="zoneID">
      Something....
</t:type> 
```

当我使用区域表单属性时，不显示验证错误，如何使验证错误显示错误而不将表单包含到区域中？

我不能将这个表单包含到一个区域中，因为当我的 mixin 被初始化时，它会在一些 DOM 元素上放置一些监听器，当我提交我的表单时，表单会被重新加载（因为 zone）并重新加载 mixin，这添加在新的 DOM 元素上增加了一些侦听器，并且在提交之后触发了一个事件，该事件被相应的侦听器捕获，但是一些侦听器链接到不存在的元素并且 js 崩溃。

非常感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:24:10.367

1.

> 我有一个带有自定义简单混合的表单，这意味着表单的 ID 不能被修改

这不是暗示。也许，这是你的要求？

如果不是，那么要将你的 mixin 插入到 ajax 渲染中，你需要使 mixin 更灵活一些。

在 YourMixin 类中：

```
@InjectContainer
private ClientElement element;

void afterRender() {

    String elementId = element.getClientId();

    JSONObject spec = new JSONObject();
    spec.put("elementId", elementId);

    jsSupport.addScript("new MixinHandler(%s)", spec.toString());
} 
```

这只是一个提示，请查看 Autocomplete implementation (class, javascript) 以获取完整示例。

2.

> 当我使用区域表单属性时，验证不起作用

这听起来很可疑。我猜验证错误是不可见的，因为您没有更新表单本身及其`<t:errors/>`标签。

如果您在页面中的表单的 FAILURE 和 SUCCESS 事件处理程序中设置断点，则可以验证这一点（请参阅 org.apache.tapestry5.EventConstants）。

# facebook - Chrome 扩展 - 让 facebook 在消息中阻止“看到”

> ID：16061391
> 
> 赞同：0
> 
> 时间：2013-04-17T13:28:55.210
> 
> 标签：facebook, google-chrome-extension

我正在浏览一些声称禁用 facebook 消息的“Seen At”功能的 Chrome 扩展程序。

[![见于](https://i.stack.imgur.com/dnp1C.png)](https://i.stack.imgur.com/dnp1C.png)
[（来源：[thetecnica.com](http://thetecnica.com/wp-content/uploads/2013/01/Capture.png)）]

考虑到扩展程序在其自己的孤立世界中执行这一事实，如何从 Chrome 扩展程序中实现这一点？

我知道这可以使用 Graph API 来实现，但想知道这如何仅与 UI 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-12T18:52:37.457

如果你想从扩展中禁用“seen”，你必须只阻止一个 URL：[https](https://www.facebook.com/ajax/mercury/change_read_status.php)
://www.facebook.com/ajax/mercury/change_read_status.php 所以之后读取状态将被阻止。

你必须在后台运行脚本：

```
"background": {
      "scripts": [ "background.js" ]
} 
```

background.js 文件如下：

```
chrome.webRequest.onBeforeRequest.addListener(function(details) {
  return {
    cancel: true
  }
}, { urls: ['*://*.facebook.com/*change_read_status.php*'] }, ['blocking']) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-18T13:11:33.667

您可以为您的
浏览器使用 adblock 或 adblock plus 插件或扩展程序（或任何其他可以阻止脚本文件的扩展程序）
假设如果您将使用 adblock
然后转到 adblock 图标
过滤器首选项
自定义过滤器 -> 添加过滤器组 -> 显示/隐藏过滤器
然后添加两个新过滤器
1)
ajax/mercury/change_read_status.php$xmlhttprequest
2)
/ajax/mercury/change_read_status.php$domain=facebook.com
现在发件人无法看到您阅读了他或她的消息:)

此外，还可以尝试这个视频，它有分步指南隐藏 Facebook 消息的“已看到”功能或聊天 [https://www.youtube.com/watch?v=QtG75oISKkA](https://www.youtube.com/watch?v=QtG75oISKkA) 之后，您将能够了解如何阅读任何人私下发消息，这样发件人就无法看到您阅读了他或她的消息 :)

# facebook - 带有 SSL 链接的 Facebook 个人资料图片

> ID：16061395
> 
> 赞同：0
> 
> 时间：2013-04-17T13:29:05.853
> 
> 标签：facebook, ssl

我有包含 FB 个人资料图片/clicable 等的 html 代码。

使用

```
 fb:profile-pic and FB.XFBML.parse 
```

我收到带有 HTTP 的图像 url。要拥有 HTTPS，我正在使用：

```
https://graph.facebook.com/user_id/picture?return_ssl_resources=1 
```

但必须生成代码以使图像可点击并添加 fb-profile-pic 中存在的其他属性。

我在 4 个月前写了这段代码。现在我看到 fb:profile-pic 正在将 HTTPS 链接返回到图像。FB 文档中没有提及行为/HTTP 或 HTTPS/ 的变化。

有人知道当前状态 FB.XFBML.parse - 安全链接还是非安全链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:01:46.970

默认情况下，返回的个人资料图片 URL 的协议与用于请求图像的协议相同。

因此[https://graph.facebook.com/zuck/picture](https://graph.facebook.com/zuck/picture)将返回 Mark 个人资料图片的 SSL 版本，而[http://graph.facebook.com/zuck/picture](http://graph.facebook.com/zuck/picture)将返回一个 HTTP URL。

`return_ssl_resources`可以同时用于`0`HTTP 和`1`HTTPS URL 的值。

> 有人知道当前状态 FB.XFBML.parse - 安全链接还是非安全链接？

我认为 JS SDK 应该能够根据请求嵌入页面的协议自动决定这一点。

# c# - 验证一种方法 C#

> ID：16061399
> 
> 赞同：0
> 
> 时间：2013-04-17T13:29:07.937
> 
> 标签：c#, validation

如果我有一个`Method1`返回 e.Cancel 真或假的验证方法，它看起来像这样：

```
private void textBox1_Validating_1(object sender, CancelEventArgs e)
{
    ErrorProvider errorProvider = new ErrorProvider();

    bool isEmpty = String.IsNullOrEmpty(textBox1.Text);
    if (isEmpty)
    {
        e.Cancel = true;
        errorProvider.SetError(textBox1, "txt");
    }
    else
    {
        e.Cancel = false;
        errorProvider.SetError(textBox1, "");
    }
} 
```

我想在我的另一种方法中获得验证结果：

```
private void button4_Click(object sender, EventArgs e)
{
    //bool passed = this.Validate(textBox1_Validating_1);
    if (passed == false) return; 
```

我想要这样的东西：

```
bool passed = this.Validate(textBox1_Validating_1); 
```

仅验证这一种方法。我该怎么做？

我可以这样做：

```
 bool passed = this.ValidateChildren();
        if (passed == false) return; 
```

但是如果我这样做，那么我会验证我所有的方法，但我只想验证这个`Method1` 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:36:31.587

我建议创建一个单独的验证方法并在提交时调用它。尝试这个 ：

```
 private void SubmitButton_Click(object sender, EventArgs e)
    {
        if (ValidateControls()==0)
        {
           //Form is validated
        }
    }

int ValidateControls()
{
    int flag = 0;
    errorProvider1.Clear();
    if (txtAge.Text.Trim() == String.Empty)
    {
        errorProvider1.SetError(txtAge, "Age is required");
        flag = 1;
    }
    ............................................
    ............................................
   // validate all controls
    ............................................
    ............................................

    if (txtSalary.Text.Trim() == String.Empty)
    {
        errorProvider1.SetError(txtSalary, "Salary is required");
        flag = 1;
    }

    return flag;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:33:50.723

```
 public bool IsValidated()
    {
    return !String.IsNullOrEmpty(textBox1.Text);
    }
private void button4_Click(object sender, EventArgs e)
{
        bool passed = IsValidated();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:36:33.047

像这样的东西？

```
var cnclEvent = new CancelEventArgs();

textBox1_Validating_1(null, cnclEvent);
if (cnclEvent.Cancel) return; 
```

# doctrine-orm - ZF2 + Doctrine2 + DoctrineObject Hydrator：ManyToOne 关系的 Null 值

> ID：16061402
> 
> 赞同：2
> 
> 时间：2013-04-17T13:29:14.403
> 
> 标签：doctrine-orm, zend-framework2, zend-form

对于我的项目中的类别结构，我正在构建一个实体。对于添加表单，我使用 DoctrineObject hydrator。当 $parent 有一个值时，这可以正常工作，但是如果没有父级，它会给我一个错误，因为没有 id 可以选择父级。在这种情况下，父属性的值应该为 null。

我会为此创建一个过滤器。此过滤器已执行，但水合器似乎没有达到我想要的效果。

有谁知道如何解决这个问题？

我的实体：

```
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Flex\Entity\Entity;

/**
 * @Gedmo\Tree(type="materializedPath")
 * @ORM\Table(name="categories")
 * @ORM\Entity(repositoryClass="Gedmo\Tree\Entity\Repository\MaterializedPathRepository")
 */
class Category extends Entity
{
    /**
     * @ORM\OneToMany(mappedBy="parent", targetEntity="FlexCategories\Entity\Category")
     */
    protected $children;

    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue
     */
    protected $id;

    /**
     * @Gedmo\TreeLevel
     * @ORM\Column(nullable=true, type="integer")
     */
    protected $level;

    /**
     * @ORM\Column(length=64, type="string")
     */
    protected $name;

    /**
     * @Gedmo\TreeParent
     * @ORM\ManyToOne(inversedBy="children", targetEntity="FlexCategories\Entity\Category")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(onDelete="SET NULL", referencedColumnName="id")
     * })
     */
    protected $parent;

    /**
     * @Gedmo\TreePath(appendId=false, endsWithSeparator=false, separator="/", startsWithSeparator=true)
     * @ORM\Column(length=255, nullable=true, type="string", unique=true)
     */
    protected $path;

    /**
     * @Gedmo\Slug(fields={"name"}, unique=false)
     * @Gedmo\TreePathSource
     * @ORM\Column(length=64)
     */
    protected $slug;

    public function setId($value)
    {
        $this->id = $value;
    }    
    public function setName($value)
    {
        $this->name = $value;
    }
    public function setParent($value)
    {
        $this->parent = $value;
    }
} 
```

我的表格：

```
use DoctrineModule\Stdlib\Hydrator\DoctrineObject;
use Zend\Form\Form;
use Zend\InputFilter\InputFilterProviderInterface;
use Zend\ServiceManager\ServiceManager;
use Zend\ServiceManager\ServiceManagerAwareInterface;

class CategoryForm extends Form implements InputFilterProviderInterface, ServiceManagerAwareInterface
{
    private $_serviceManager;

    public function init()
    {
        // Init hydrator
        $hydrator        = new DoctrineObject($this->_serviceManager->get('doctrine.entitymanager.orm_default'),
                                              'FlexCategories\Entity\Category');

        // Set form basic configurations
        $this->setAttribute('method', 'post')
             ->setHydrator($hydrator);

        // Add parent field
        $this->add(array(
            'name'        => 'parent',
            'type'        => 'Zend\Form\Element\Hidden',
        ));

        // Add name field
        $this->add(array(
            'attributes'  => array(
                'required' => 'required',
            ),
            'name'        => 'name',
            'options'     => array(
                'label'       => 'Name',
            ),
            'type'        => 'Zend\Form\Element\Text',
        ));

        // Add description field
        $this->add(array(
            'name'       => 'description',
            'options'    => array(
                'label'       => 'Description',
            ),
            'type'       => 'Zend\Form\Element\Textarea',
        ));

        // Add CSRF element
        $this->add(array(
            'name'        => 'csrf',
            'type'        => 'Zend\Form\Element\Csrf',
        ));

        // Add submit button
        $this->add(array(
            'attributes'  => array(
                'type'    => 'submit',
                'value'   => 'Save',
            ),
            'name'        => 'submit',
        ));
    }
    public function getInputFilterSpecification()
    {
        return array(
            'description'  => array(
                'filters'     => array(
                    array(
                        'name'    => 'Zend\Filter\StringTrim'
                    ),
                ),
                'required'    => false,
            ),
            'name'         => array(
                'filters'     => array(
                    array(
                        'name'    => 'Zend\Filter\StringTrim'
                    ),
                ),
                'required'    => true,
                'validators'  => array(
                    array(
                        'name'    => 'Flex\Validator\EntityUnique',
                        'options' => array(
                            'entity'    => 'FlexCategories\Entity\Category',
                            'filter'   => array(
                                array('property'     => 'parent',
                                      'value'        => array('_context', 'parent')),
                            ),
                            'property'  => 'name',
                            'serviceLocator'    => $this->_serviceManager,
                        ),
                    ),
                ),
            ),
            'parent'       => array(
                'filters'     => array(
                    array(
                        'name'    => 'Flex\Filter\NullIfEmpty'
                    ),
                ),
                'required'    => false,
            ),
        );
    }

    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this->_serviceManager = $serviceManager;
        $this->init();

        return $this;
    }
} 
```

我的控制器：

```
use Flex\Controller\AbstractController;
use FlexCategories\Entity\Category;
use FlexCategories\Form\CategoryForm;

class AdminController extends AbstractController
{
    public function addAction()
    {
        // Load form
        $form                = $this->getServiceLocator()->get('FlexCategories\Form\CategoryForm');

        // Create and bind new entity
        $category            = new Category();
        $form->bind($category);

        // Load parent category if present
        $parentId            = $this->params()->fromRoute('id', null);
        if ($parentId !== null)
        {
            if (!is_numeric($parentId))
                throw new \InvalidArgumentException('Invalid parent id specified');

            $entityManager   = $this->getEntityManager();
            $repository      = $entityManager->getRepository('FlexCategories\Entity\Category');
            $parent          = $repository->find($parentId);

            if (!$parent)
                throw new \InvalidArgumentException('Invalid parent id specified');

            $form->get('parent')->setValue($parent->getId());
        }

        // Process request
        $request             = $this->getRequest();
        if ($request->isPost())
        {
            $form->setData($request->getPost());

            if ($form->isValid())
            {                
                $entityManager    = $this->getEntityManager();
                $entityManager->persist($category);
                $entityManager->flush();

                $this->flashMessenger()->addSuccessMessage(sprintf('The category "%1$s" has succesfully been added.', $category->getName()));
                return $this->redirect()->toRoute($this->getEvent()->getRouteMatch()->getMatchedRouteName());
            }
        }

        // Return form
        return array(
            'form'           => $form,
        );
    }
    public function indexAction()
    {
        // Load all categories
        $entityManager        = $this->getEntityManager();
        $repository           = $entityManager->getRepository('FlexCategories\Entity\Category');
        $categories           = $repository->findBy(array(), array('path' => 'asc'));

        return array(
            'categories'      => $categories,
        );
    }
} 
```

我的数据库：

```
CREATE TABLE `categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) DEFAULT NULL,
  `level` int(11) DEFAULT NULL,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `path` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `slug` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_3AF34668B548B0F` (`path`),
  KEY `IDX_3AF34668727ACA70` (`parent_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

ALTER TABLE `categories`
  ADD CONSTRAINT `FK_3AF34668727ACA70` FOREIGN KEY (`parent_id`) REFERENCES `categories` (`id`) ON DELETE SET NULL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:55:30.700

我将通过基于“DoctrineModule\Form\ElementObjectSelect”创建一个“HiddenElement”元素并将其用作输入类型来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T03:02:57.313

您需要一个处理 '' 值的策略。('' != null) 因为 ocramius 指出它可能有一个带有 '' 的主键。

你一使用“empty_option”就遇到了这个问题，目前你不能只将它设置为null，表单帖子将始终传输''。

见[https://github.com/doctrine/DoctrineModule/pull/119](https://github.com/doctrine/DoctrineModule/pull/119)

见[https://github.com/doctrine/DoctrineModule/pull/106](https://github.com/doctrine/DoctrineModule/pull/106)

因此，将此字段的策略添加到 hydrator 以将 '' 转换为 null。

这可能看起来像：

```
use Zend\Stdlib\Hydrator\Strategy\DefaultStrategy;

class ForeignKey extends DefaultStrategy
{
    public function hydrate($value)
    {
        if($value == '') {
            return NULL;
        }

        return $value;
    }
} 
```

# c++ - 我应该分配还是重置一个 unique_ptr？

> ID：16061407
> 
> 赞同：78
> 
> 时间：2013-04-17T13:29:29.547
> 
> 标签：c++, c++11, smart-pointers, unique-ptr

鉴于拥有对象的生命周期与其所有者相关联的常见情况，我可以使用以下两种方式之一的唯一指针。.

**它可以分配：**

```
class owner
{
    std::unique_ptr<someObject> owned;    
public:
    owner()
    {
        owned=std::unique_ptr<someObject>(new someObject());        
    }
}; 
```

**可以使用reset方法：**

```
class owner
{
    std::unique_ptr<someObject> owned;    
public:
    owner()
    {
        owned.reset(new someObject());
    }
}; 
```

为了最佳实践，我应该更喜欢一种形式而不是另一种形式吗？

**编辑：**对不起，伙计们。我过度简化了这一点。堆分配发生在初始化方法中，而不是在 ctor 中。因此，我不能使用初始化列表。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-17T13:40:36.417

来自['s](http://en.cppreference.com/w/cpp/memory/unique_ptr/operator%3D)[的文档`unique_ptr``operator=`](http://en.cppreference.com/w/cpp/memory/unique_ptr/operator%3D)：

> 将 r 指向的对象的所有权转移到 *this，就像通过调用`reset(r.release())`后跟来自 的赋值一样`std::forward<E>(r.get_deleter())`。

而你所需要的就是`reset`调用，所以直接调用它更简单

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-17T13:33:50.220

执行此操作的正确方法（您没有列出）是使用以下构造函数`owned`：

```
owner() : owned(new someObject())
{} 
```

除此之外，我更喜欢`reset`在这种情况下不要创建无用的中间实例（即使在机器级别上可能没有区别，因为优化器可以在那里做很多事情）。

# for-loop - SQLCMD 在 for 循环中

> ID：16061408
> 
> 赞同：1
> 
> 时间：2013-04-17T13:29:32.750
> 
> 标签：for-loop, batch-file, iteration, sqlcmd

我最近发现我无法从批处理文件中触发以下命令：

```
for %%G in (%path%) do sqlcmd /S <my-server> /d <my-database> /E /i "%%G" -b 
```

它告诉我，它找不到命令“sqlcmd”。但是，如果我直接在命令提示符下运行此命令（通过删除每对的 1%），它就可以工作！

为什么会这样，我怎样才能使它与我的批处理文件一起工作？

**更新：**

这是我在批处理文件中得到的以下代码：

```
@echo off
set mypath=%~dp0
set mypath=%mypath%sql

for %%G in ("%mypath%") do echo %%G & sqlcmd /S sample-server /d sample-database /E /i "%%G" -b

pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:43:06.580

这是你的问题：

```
set path=%~dp0
set path="%path%sql\" 
```

PATH 是 Windows 用于搜索可执行文件的目录序列，因此当您更改它时，`sqlcmd`将无法再找到。

只需使用另一个变量名。`Mypath`好像不错……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:49:51.650

尝试这个：

```
for %%i in ("sqlcmd.exe") do "%%~$path:i" /S "my-server" /d "my-database" /E /i "%%~dp$path:i" -b 
```

要检查您的路径设置，您可以使用以下代码：

```
@echo off&setlocal
set "temppath=%path:;=";"%"
for %%i in ("%temppath%") do echo %%~i 
```

# c# - ASP.NET MVC 4 具有一个用于多个应用程序和缓存的域模型

> ID：16061413
> 
> 赞同：1
> 
> 时间：2013-04-17T13:29:51.707
> 
> 标签：c#, asp.net, asp.net-mvc, oracle

我正在将 ASP.Net Web Forms 应用程序转换为 MVC 4。这些应用程序显示常见项目，并且可以为大多数需要显示的项目使用一个域模型。应用程序只显示数据，不修改数据。

目前，当用户访问页面时，数据是从 Oracle 数据库中检索的。该页面每 30 秒更新一次更新面板。因此，如果几个用户打开他们的页面（这很常见），每个用户都会访问数据库大约。每 30 秒。

数据库数据每 3 分钟更新一次。

我想做的是让域模型每 30 秒更新一次，应用程序从模型中获取数据。因此，每次发出页面请求时，都会从模型中获取数据。由于应用程序的所有数据都是从同一个域模型中检索的，因此它们都是相同的。这也应该减少访问数据库的次数，并有望加快页面重新加载（和 Ajax 调用）。

所以， - 如果这是第一次使用域模型，请从数据库中填充它。- 如果小于或等于 30 秒，应用程序使用域模型 - 如果已经超过 30 秒，模型从数据库重新填充，应用程序从模型中获取数据。

是否可以让这些多个应用程序使用一个域模型？而且，如果有可能以某种方式缓存域模型，那该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:24:05.507

您可以在控制器中缓存数据库调用的结果。

```
public ActionResult MyController()
{
    var cache = HttpContext.Cache;
    var model = cache["key"];
    if (model == null) {
        model = GetData();
        cache.Insert(
           "key", 
           model, 
           null, 
           DateTime.Now.AddSeconds(30), 
           System.Web.Caching.Cache.NoSlidingExpiration);
    }

    return View(model);
} 
```

[或者，您可以通过向控制器添加OutputCache](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.100%29.aspx)属性来缓存整个视图。

```
[OutputCache(Duration = 30, VaryByParam = "none")]
public ActionResult MyController()
{        
    var model = GetData();
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:38:27.390

`UpdatePanel`您可以在 jQuery AJAX 中通过使用超时轮询服务器来模拟该功能，同时还将您的模型发送到服务器。

基本上，您的页面加载，您的`HttpGet`操作方法将从数据库中填充您的模型，然后将其发送到您的视图。

首先，你必须有一个 Partial 视图作为你的`UpdatePanel`，包装在一个我们可以在 jQuery 中引用的容器中：

```
<div id="stateContainer">
    @Html.Partial("YourPartial", Model)
</div> 
```

然后你的 jQuery 会做类似的事情：

```
setInterval("pollServer()", 30000);

function pollServer() {
    $.ajax({
        url: '@Url.Action("PollForUpdate")',
        type: "POST",
        datatype: 'json',
        data: $("form").serialize(),
        success: function (result) {
            $("#stateContainer").html(result);
        }
    });
} 
```

然后您的操作方法`PollForUpdate`将类似于：

```
public ActionResult PollForUpdate(YourModel Model)
{
    ModelState.Clear();

    //fill your Model object with your database stuff

    return View("YourPartial", Model);
} 
```

# sharepoint-2010 - 如何创建一个简单的“过期”工作流以在 Sharepoint 2010 中重复

> ID：16061418
> 
> 赞同：1
> 
> 时间：2013-04-17T13:30:13.437
> 
> 标签：sharepoint-2010

我注意到“公告”Web 部件具有“过期”功能，但我创建的任何其他链接 Web 部件都没有。我想将“过期”添加到我的自定义链接 Web 部件。到目前为止，我用一个简单的方法把它自己删除了

如果 Current Item:Expires 小于 Today Delete item in Current Item 然后暂停 0 天 0 小时 1 分钟

但意识到它不会重复自己，只会在创建项目时运行。我如何让这个工作流作为后台进程每天运行？

更新：我正在尝试的工作流程

步骤 1 如果 Current Item:Expires 小于 Today 删除当前项目中的项目

第 2 步暂停直到当前项目：过期然后暂停 1 天 0 小时 0 分钟，然后删除当前项目中的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:20:57.083

为此，我认为您可以将其放置在创建项目时运行工作流的位置。由于您有一个字段表示何时应删除此项目，因此您可以在工作流中执行此操作：

![在此处输入图像描述](https://i.stack.imgur.com/ZvNfD.png)

如果到期日期

我不确定这个条件是否是最佳实践，我这样做是为了让它每次都采取行动

在“此时间”值中，放入“过期”字段，然后它将继续删除该项目

这里发生的情况是，该项目一直处于待处理状态，直到您在“过期”字段中指定的日期，然后它会自动删除该项目。

# c++ - 持久的 ASIO 连接

> ID：16061420
> 
> 赞同：1
> 
> 时间：2013-04-17T13:30:14.437
> 
> 标签：c++, http, tcp, boost-asio

我正在做一个项目，我需要能够使用一些持久性来长时间与不同的服务器通信。该服务器将具有相当高的吞吐量。我无法找到正确设置持久连接的方法。我能想到的最好方法是创建一个持久连接类。理想情况下，我会连接到服务器一次，并在信息进入我时执行 async_writes。并在信息返回给我时阅读信息。不过，我认为我的课程结构不正确。

这是我现在构建的：

```
persistent_connection::persistent_connection(std::string ip, std::string port):
    io_service_(), socket_(io_service_), strand_(io_service_), is_setup_(false), outbox_()
{
    boost::asio::ip::tcp::resolver resolver(io_service_);
    boost::asio::ip::tcp::resolver::query query(ip,port);
    boost::asio::ip::tcp::resolver::iterator iterator = resolver.resolve(query);
    boost::asio::ip::tcp::endpoint endpoint = *iterator;
    socket_.async_connect(endpoint, boost::bind(&persistent_connection::handler_connect, this, boost::asio::placeholders::error, iterator));
    io_service_.poll();
}

void persistent_connection::handler_connect(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
{
    if(ec)
    {
        std::cout << "Couldn't connect" << ec << std::endl;
        return;
    }
    else
    {
        boost::asio::socket_base::keep_alive option(true);
        socket_.set_option(option);
        boost::asio::async_read_until(socket_, buf_ ,"\r\n\r\n", boost::bind(&persistent_connection::handle_read_headers, this, boost::asio::placeholders::error));
    }
}

void persistent_connection::write(const std::string &message)
{
    write_impl(message);
    //strand_.post(boost::bind(&persistent_connection::write_impl, this, message));
}

void persistent_connection::write_impl(const std::string &message)
{
    outbox_.push_back(message);
    if(outbox_.size() > 1)
    {
        return;
    }
    this->write_to_socket();
}

void persistent_connection::write_to_socket()
{
    std::string message = "GET /"+ outbox_[0] +" HTTP/1.0\r\n";
    message += "Host: 10.1.10.120\r\n";
    message += "Accept: */*\r\n";
    boost::asio::async_write(socket_, boost::asio::buffer(message.c_str(), message.size()), strand_.wrap(
                             boost::bind(&persistent_connection::handle_write, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));

}

void persistent_connection::handle_write(const boost::system::error_code& ec, std::size_t bytes_transfered)
{
    outbox_.pop_front();
    if(ec)
    {
        std::cout << "Send error" << boost::system::system_error(ec).what() << std::endl;
    }
    if(!outbox_.empty())
    {
        this->write_to_socket();
    }
    boost::asio::async_read_until(socket_, buf_ ,"\r\n\r\n",boost::bind(&persistent_connection::handle_read_headers, this, boost::asio::placeholders::error));
} 
```

我将从这里发送的第一条消息似乎可以正常发送，服务器得到它，并以有效的响应进行响应。不幸的是，我看到了两个问题：

1）在执行 async_write 命令后，我的 handle_write 永远不会被调用，我不知道为什么。2）程序从不读取响应，我猜这与＃1有关，因为在该函数发生之前不会调用 asyn_read_until 。3）我还想知道是否有人可以告诉我为什么我注释掉的 strand_.post 调用不起作用。

我猜这大部分是由于我不知道应该如何使用我的 io_service，所以如果有人能给我任何指针，我将不胜感激。如果您需要任何其他信息，我很乐意提供更多信息。

谢谢

编辑调用写入：

```
int main()
{
    persistent_connection p("10.1.10.220", "80");
    p.write("100");
    p.write("200");
    barrier b(1,30000); //Timed mutex, waits for 300 seconds.
    b.wait();
} 
```

和

```
void persistent_connection::handle_read_headers(const boost::system::error_code &ec)
{
    std::istream is(&buf_);
    std::string read_stuff;
    std::getline(is,read_stuff);
    std::cout << read_stuff << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:48:12.480

所描述的行为是`io_service_`不再处理的事件循环的结果。

构造函数调用[`io_service::poll()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/poll/overload1.html)which 将运行准备好运行的处理程序，并且不会阻塞等待工作完成，而 as[`io_service::run()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/run/overload1.html)将阻塞直到所有工作完成。因此，在轮询时，如果连接的另一端没有写入任何数据，则可能没有处理程序准备好运行，并且执行将从`poll()`.

关于线程，如果每个连接都有自己的线程，并且通信是半双工协议，比如HTTP，那么同步编写应用程序代码可能会更简单。另一方面，如果每个连接都有自己的线程，但代码是异步编写的，那么请考虑处理从事件循环中抛出的异常。[Boost.Asio对 handlers 抛出异常](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service.html#boost_asio.reference.io_service.effect_of_exceptions_thrown_from_handlers)的影响可能值得一读 。

此外，还`persistent_connection::write_to_socket()`引入了未定义的行为。调用[`boost::asio::async_write()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/async_write/overload1.html)时，记录了调用者保留缓冲区的所有权，并且必须保证缓冲区在调用处理程序之前保持有效。在这种情况下，`message`缓冲区是一个自动变量，其生命周期可能在`persistent_connection::handle_write`调用处理程序之前结束。一种解决方案可能是通过使其成为成员变量来更改 的寿命`message`以匹配的寿命。`persistent_connection`

# javascript - Javascript: reference an array with a variable, instead of duplicating it

> ID：16061422
> 
> 赞同：0
> 
> 时间：2013-04-17T13:30:21.397
> 
> 标签：javascript, arrays, pointers, reference

let's say I have two javascript arrays, like this:

```
arrA = [1,2,3]
arrB = [4,5,6] 
```

Is there a way I can reference them with different variable names down then road? If I do this:

```
arrC = arrA
arrD = arrB 
```

it makes *copies* of the initial arrays, instead of making a pointer/reference to them. So, if I mess with the value of `arrC`, `arrA` isn't updated. Is there a way to get around this?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:31:22.657

不，它不会复制。如果你改变`arrC`，它也会改变`arrA`。

尝试这个 ：

```
var arrA = [1,2,3];
var arrC = arrA;
arrC.push(26);
console.log(arrA); 
```

您将`[1, 2, 3, 26]`在控制台中看到。

恰恰相反：如果你*想*复制，你必须明确地做，例如

```
var arrC = arrA.slice(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:35:26.510

按照这篇文章并在对象中创建一个数组，这是一种简单的方法。

[javascript变量引用/别名](https://stackoverflow.com/questions/1686990/javascript-variable-reference-alias)

# build - 如何在 MultiJob 插件中传递内部版本号？

> ID：16061427
> 
> 赞同：11
> 
> 时间：2013-04-17T13:30:31.240
> 
> 标签：build, jenkins, continuous-integration, hudson, jenkins-plugins

MultiJob[插件](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)很棒，我想在我的构建过程中使用它，但是我之前必须解决一个问题：有三个作业 A、B 和 C。SVN 触发作业 A 和 B（并行执行）和作业 C当 A 和 B 完成时开始。作业 C 需要作业 A 和 B 的工件作为输入。

```
 -> Job A (with A.zip) 
Trigger                          -> Job C (use artifacts A.zip and B.zip)
          -> Job B (with B.zip) 
```

[使用MultiJob 插件](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)设计工作流程很容易，但我不知道如何从作业 C 中的作业 A 和 B 获取相应的工件。我可以将内部版本号传递给作业 C (buildNr(A) != buildNr(B ））？或者有没有更聪明的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-09T13:05:37.960

[multijob 插件为每个作业（代码](https://github.com/jenkinsci/tikal-multijob-plugin/blob/0ce0d48edc7d1aa1824bf9b62b2366a02fdda014/src/main/java/com/tikal/jenkins/plugins/multijob/MultiJobBuilder.java#L822-L826)）设置以下环境变量：

*   `<JOBNAME>_BUILD_NUMBER`
*   `<JOBNAME>_BUILD_RESULT`

where`JOBNAME`由作业名称创建，所有非字符和数字替换为`_`. 因此，您可以将内部版本号作为参数传递给 Job C：

![使用 Jenkins MultiJob 插件配置作业 C](https://i.stack.imgur.com/UkvKz.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T11:32:31.847

有一种使用 EnvInject 和 groovy 脚本的解决方法： [https ://issues.jenkins-ci.org/browse/JENKINS-20241](https://issues.jenkins-ci.org/browse/JENKINS-20241)

# apache - Mac 上的 Apache - 找不到本地主机服务器

> ID：16061438
> 
> 赞同：0
> 
> 时间：2013-04-17T13:30:54.740
> 
> 标签：apache

在我的 Mac (10.8) 上修改 Apache 的配置时，我做了一些我不应该做的事情，现在我什至无法加载页面 localhost。

我试图解决这个问题的方法是在 /etc/apache2/ 中恢复 httpd.conf 的原始版本，并在 /etc 中恢复配置文件 hosts。我以为这已经足够了，但事实并非如此。

奇怪的是，我可以通过寻址 127.0.0.1 或 0.0.0.0 来加载 index.html。本地主机没有回答！

有任何想法吗？我忘记恢复文件了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:34:00.677

你修改了hosts文件吗？

`/etc/hosts`

这应该设置为

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0 localhost 
```

# asp.net - ASP.NET 页面不断刷新（VB.NET）

> ID：16061440
> 
> 赞同：0
> 
> 时间：2013-04-17T13:30:57.443
> 
> 标签：asp.net, vb.net, refresh, sqlconnection, datareader

每当我尝试此代码时，页面都会保持刷新。

```
Imports System.Data.SqlClient
Imports System.Data

Partial Class ProjectReport
    Inherits System.Web.UI.Page

    Private myTotal As Decimal = 0

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load, Chart1.Load

        Dim ProjectID As Integer = Session("project_id")
        Session("ProjectID") = ProjectID

        lblProjNameHeading.Text = "[ " + ProjectID.ToString + " ]"

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim projComm As String = "SELECT project_id, project_start, project_finish, project_budget, project_cost FROM projects WHERE project_id=@parameter"

        Dim projSQL As New SqlCommand

        conn.Open()

        projSQL = New SqlCommand(projComm, conn)
        projSQL.Parameters.AddWithValue("@parameter", ProjectID.ToString)

        Dim datareader As SqlDataReader = projSQL.ExecuteReader()

        While datareader.Read

            lblProjectCode.Text = datareader("project_id").ToString
            lblProjectStart.Text = datareader("project_start").ToString
            lblProjectStart2.Text = datareader("project_start").ToString
            lblProjectEnd.Text = datareader("project_finish").ToString
            lblProjectEnd2.Text = datareader("project_finish").ToString
            lblProjectBudget.Text = datareader("project_budget").ToString
            lblProjectBudget2.Text = datareader("project_budget").ToString
            lblProjectCost.Text = datareader("project_cost").ToString
            lblProjectCost2.Text = datareader("project_cost").ToString
            ' lblProjectLeader.Text = datareader("project_cost").ToString
            'lblProjectExpenditures.Text = agdgssag

            Dim StartDate As DateTime = datareader("project_start")

            Dim FinishDate As DateTime = datareader("project_finish")

            Dim today As DateTime = DateTime.Now

            Dim sumDays = (FinishDate - StartDate).TotalDays
            Dim daysToNow = (today - StartDate).TotalDays

            Dim percentage = daysToNow / sumDays * 100

            Dim percentageLeft = 100 - percentage

            Session("PercentageCompleted") = percentage
            Session("PercentageLeft") = percentageLeft

            GetTable()

            Expenditures()
            lblProjectPercentage.Text = percentage.ToString("N2") + "%"

        End While

        datareader.Close()
        conn.Close()

        If Not Page.IsPostBack Then
            BindData()
        End If

    End Sub

    Private Sub BindData()

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim query As New SqlCommand("SELECT Items.item_name, Items.item_cost, project_items.item_quantity FROM Items INNER JOIN project_items ON items.item_id = project_items.item_id WHERE project_items.project_id = @parameter", conn)

        conn.Open()

        query.Parameters.AddWithValue("@parameter", Convert.ToInt32(Session("ProjectID")))
        Dim da As New SqlDataAdapter(query)

        da.SelectCommand = query

        Dim table As New DataTable()

        da.Fill(table)

        grdItems.DataSource = table
        conn.Close()
        grdItems.DataBind()

    End Sub

    Protected Sub grdItems_RowDataBound(sender As Object, e As GridViewRowEventArgs)

        If e.Row.RowType = DataControlRowType.DataRow Then
            Dim rowView As DataRowView = CType(e.Row.DataItem, DataRowView)
            myTotal += (CDec(rowView("item_cost")) * CDec(rowView("item_quantity")))

        End If

        If e.Row.RowType = DataControlRowType.Footer Then
            Dim lblTotalPrice As Label = DirectCast(e.Row.FindControl("lblTotalPrice"), Label)
            lblTotalPrice.Text = myTotal.ToString()

        End If
    End Sub

    Function GetTable() As DataTable

        Dim table As New DataTable

        table.Columns.Add("Percentage Completed", GetType(Double))
        table.Columns.Add("Percentage Not-Completed", GetType(Double))

        table.Rows.Add(Session("PercentageCompleted"))
        table.Rows.Add(Session("PercentageLeft"))

        Chart1.DataSource = table
        Chart1.Series("Series1").XValueMember = "Percentage Not-Completed"
        Chart1.Series("Series1").YValueMembers = "Percentage Completed"
        Chart1.DataBind()

        Return table
    End Function

    Private Sub Expenditures()

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim projExpComm As String = "SELECT Items.item_cost, project_items.item_quantity FROM Items INNER JOIN project_items ON items.item_id = project_items.item_id WHERE project_items.project_id = @parameter"

        Dim projExpSQL As New SqlCommand

        conn.Open()

        projExpSQL = New SqlCommand(projExpComm, conn)
        projExpSQL.Parameters.AddWithValue("@parameter", Session("project_id"))

        Dim datareader As SqlDataReader = projExpSQL.ExecuteReader()

        datareader.Read()

        While datareader.Read

            While datareader.HasRows

                Dim ItemsTotal As Double = 0

                For Each row In datareader

                    Dim ItemCost = datareader("item_cost")
                    Dim ItemQuantity = datareader("item_quantity")
                    Dim ItemsSubTotal As Double = ItemCost * ItemQuantity

                    ItemsTotal = ItemsSubTotal
                Next

                ItemsTotal = ItemsTotal + ItemsTotal
                lblProjectExpenditures.Text = ItemsTotal.ToString

            End While

        End While

        datareader.Close()
        conn.Close()

    End Sub

End Class 
```

为什么会这样？

我检查了未关闭的连接/数据读取器，但一切正常。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:34:36.860

每次回发时，您的页面加载方法都会完全执行。您应该查看 !isPostBack 以防止完全执行该代码。

# c# - 我只需要实现接口一些方法

> ID：16061441
> 
> 赞同：3
> 
> 时间：2013-04-17T13:31:01.547
> 
> 标签：c#, asp.net, oop, interface

在我的项目中有一个界面。在接口中有很多方法。我们公司的其他开发人员将接口继承到某些类中，并实现我需要的所有方法天气只实现某些方法。那一次我遇到了一些错误。“不实现接口成员”。我怎么解决这个问题？例如：-

```
public interface IComplianceRepository
    {
        IList<ComplianceModel> LoadComplianceModel(Guid userId);
        bool CreateCompliance(ComplianceModel complianceModel);
        IList<ComplianceType> LoadComplianceType();
        IList<ComplianceStatu> LoadComplianceStatus();
        IList<UserDetails> LoadUsersBySchoolId(int schoolId);
        Compliance GetComplianceByComplianceId(int complianceId);
        bool UpdateCompliance(ComplianceModel complianceModel);
        UserProfile GetUserProfileDetails(Guid userId);
        FinancialCompliance GetFinancialComplianceByComplianceId(int ComplianceId);
        void GetComplianceModelByComplianceId(ComplianceModel complianceModel, int complianceId);
    } 
```

更多的开发人员使用了上述接口并实现了 all 方法。但我不想实现以下方法

```
 IList<ComplianceModel> LoadComplianceModel(Guid userId);
    bool CreateCompliance(ComplianceModel complianceModel); 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:32:28.183

你不能。存在的**唯一**原因`Interface`是整个契约必须在实现它的类中实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T13:33:46.723

如果您不能或不想更改接口，则应实现这些方法并抛出`NotSupportedException`. 我建议为此使用显式接口继承，这样虚拟方法就不会出现在类中。

```
void IList<ComplianceModel> IComplianceRepository.LoadComplianceModel(Guid userId)
{
    throw new NotSupportedException();
} 
```

作为 BCL 中的示例，您可以查看[ReadOnlyCollection.ICollection.Add Method](http://msdn.microsoft.com/en-us/library/cc672239.aspx)。这是一个显式接口实现，它会抛出`NotSupportedException`. 这也是糟糕设计的一个例子，证明了`IReadOnlyList<T>`.net 4.0 中缺少接口。

* * *

真正的解决方案是重构您的代码。具有您完全实现的较小接口。看一下[接口隔离原理](http://en.wikipedia.org/wiki/Interface_segregation_principle)：

> 接口隔离原则 (ISP) 指出不应强迫任何客户端依赖它不使用的方法。ISP 将非常大的接口拆分为更小、更具体的接口，以便客户端只需了解他们感兴趣的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:35:42.967

Create two interface, parent and child. Parent will have exactly what you want, and child will have others.

```
public interface Parent {
    // parent methods here
}

public interface Child : Parent{
    // child methods here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T13:38:45.737

如果一个类实现了一个接口，它必须实现该接口上的*所有*功能。接口是一种功能契约，因此任何声称满足该契约的东西都必须实际这样做。现在，您不必*有意义地*实施该合同中的所有内容。例如，对于您知道不会使用的方法，执行此操作的标准方法是：

```
public void SomeMethodIKnowIWontUse()
{
    throw new NotSupportedException();
} 
```

因此，如果实际使用过该方法，那么它将引发异常。（当您认为它不会被使用时，这表明您错了，您应该实施它。）

请记住，这会很快导致“代码异味”。如果您有很多不需要实现的对象成员，那么显然设计是错误的......

这里的另一种可能性是界面设计不正确。也许它试图为太多人提供太多东西？这可能违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。以这个接口为例：

```
public interface CatchAll
{
    void FunctionForOneResponsibility();
    void FunctionForCompletelyDifferentResponsibility();
} 
```

使用非常做作的名称，很明显这个接口有太多的责任。应该是这样的：

```
public interface OneResponsibilitySatisfier
{
    void FunctionForThisResponsibility();
}

public interface AnotherResponsibilitySatisfier
{
    void FunctionForThisOtherResponsibility();
} 
```

没有规则说你需要有几个接口，或者一个接口需要有很多成员。每个人都应该为其职责提供一个有意义的功能合同，仅此而已。如果碰巧你有一个类可以同时满足这两个职责，它可以实现两个接口：

```
public class CrossCuttingObject : OneResponsibilitySatisfier, AnotherResponsibilitySatisfier
{
    public void FunctionForThisResponsibility() { }
    public void FunctionForThisOtherResponsibility() { }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:36:36.553

Interfaces exist as a contract between implementers and users of the interface. The users/consumers require that all the methods be implemented. First, ask yourself if your implementation without these methods is still useful. If so, ask yourself if you need to inherit from this interface at all.

If after this reflection, you still have valid reasons to implement this interface without implementing all the methods, you can create stub methods:

```
IList<ComplianceModel> LoadComplianceModel(Guid userId)
{
   throw NotSupportedException();
} 
```

or, more dangerously, but possibly less disruptively:

```
IList<ComplianceModel> LoadComplianceModel(Guid userId)
{
   return null;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T14:05:33.430

这是接口隔离的理想方案。请在此处参考此设计原则 (oodesign.com/interface-segregation-principle.html) 您需要隔离合约，不要将所有鸡蛋放在一个篮子里。

# .net - 异常后继续使用订阅

> ID：16061443
> 
> 赞同：1
> 
> 时间：2013-04-17T13:31:07.850
> 
> 标签：.net, exception, system.reactive, observer-pattern

我正在尝试一个“类型到搜索”的 Reactive-Extensions 示例，该示例从文本框（WPF 应用程序，如果它重要的话）中获取一个字符串，并进行可能冗长的服务器端搜索（在我的情况下使用 Thread.Sleep 进行模拟) 并在列表框中显示结果。

这个特定“模块”的主要特点是：

*   异步搜索；搜索时 UI 未冻结
*   节流；快速键入不会为每次击键生成服务器端搜索
*   不同的搜索；在搜索“asd”并显示结果后快速键入 [退格]，d（即删除最后一个字符并快速重新键入）不会重做服务器端搜索
*   下降中介结果；如果我键入“asd”并短暂等待（导致启动服务器端搜索），然后在显示 asd 的结果之前完成搜索字符串，那些中间/特定结果将被删除

**问题是，在重型方法（执行“服务器端搜索”的方法）出现一个异常之后，订阅被终止并且无法使用**

到目前为止，我只是通过重新订阅 IObservable 对象找到了一种解决方法，但这感觉不对。我也尝试过 .Retry() 但尽管我可以重用订阅，但我的`OnError`处理程序不再被调用。

代码如下所示：

```
 private IObservable<object> _resultsFromTypeToSearch;

    private void SetupObserver()
    {
        var throttledUserInput =
            (from evt in Observable.FromEventPattern<TextChangedEventArgs>(TxtSearch, "TextChanged")
             select ((TextBox)evt.Sender).Text)
                .Throttle(TimeSpan.FromSeconds(0.6)) // this ensures that only after 0.6 seconds the user input is taken into consideration
                .DistinctUntilChanged();             // this ensures only changed input is taken into consideration

        var getDataFunc = new Func<string, object>(GetExpensiveData);
        var searchAsync = Observable.FromAsyncPattern<string, object>(getDataFunc.BeginInvoke, getDataFunc.EndInvoke);

        var z = from text in throttledUserInput
                from word in searchAsync(text).TakeUntil(throttledUserInput)
                select word;  // TakeUntil will drop an ongoing search if a new search is requested in the meantime
        _resultsFromTypeToSearch = z.ObserveOn(TxtSearch); // this ensures that we'll get notified on the UI thread
        _resultsFromTypeToSearch.Subscribe(PresentResults, OnError);
    }

    private void OnError(Exception obj)
    {
        ClearUI();
        MessageBox.Show("Error");

        _resultsFromTypeToSearch.Subscribe(PresentResults, OnError); // THIS IS MY WORKAROUND WHICH FEELS BAD
    }

    private void ClearUI()
    {
        IsBusy = false;
        Results.Clear();
    }

    private void PresentResults(object result)
    {
        ClearUI();
        Results.Add(result.ToString());
    }

    private object GetExpensiveData(string searchString)
    {
        IsBusy = true;
        if (DateTime.Now.Millisecond % 3 == 0) throw new ServerException();
        Thread.Sleep(2000);
        return "Data for " + searchString;
    } 
```

**有没有更好的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:15:52.563

操作员在这里提供`Catch`帮助。

在您的代码中，我认为您可以这样做以防止订阅在 searchAsync 失败时结束：

```
var searchAsync = Observable
    .FromAsyncPattern<string, object>(getDataFunc.BeginInvoke, getDataFunc.EndInvoke)
    .Catch(e => Observable.Empty<object>()) // eat the error and return "no results" for this search. 
```

你可以返回任何你想要的新的 observable。您可以记录错误并返回另一个搜索尝试。在这种情况下，我只返回一个空的 observable，它使整个订阅的行为就好像该搜索尝试从未发生过一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T18:14:15.890

我误解了 Rx。一个序列一旦出现故障就不能被重用。简单的解决方案是重新创建订阅，即：再次调用 SetupObserver()

# c# - TFS 签入失败后获取冲突文件列表

> ID：16061447
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:31:16.897
> 
> 标签：c#, visual-studio-2010

我制作了一个自定义工具，可以将文件列表签入 TFS 团队项目。我正在尝试做的是尝试签入文件。如果有问题，我会尝试输出导致问题的文件。原因可能是文件上存在未决更改，而另一个用户正在锁定该项目。另一个原因可能是另一个用户签入了相同的服务器项目并进行了更改。

所以基本上，

workspace.CheckIn(PendingChanges);

如果（失败）
列表更改=新列表（）；. . .

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:54:07.947

根据[Workspace.CheckIn 的文档，](http://msdn.microsoft.com/en-us/library/ff732574%28v=vs.110%29.aspx)它将返回 0 或负整数或抛出异常。“正常”签入问题引发的异常是[CheckinException](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.checkinexception.aspx)和[VersionControlException](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolexception.aspx)。

```
int changesetId = 0;
try {
    changesetId = workspace.CheckIn(PendingChanges);
} catch(CheckinException exception) {
    Console.WriteLine(exception);
    return;
} catch(VersionControlException exception) {
    Console.WriteLine(exception);
    return;
}

if(changesetId <= 0) {
    Console.WriteLine("Unknown CheckIn error. Changeset id 0 returned");
    return;
} 
```

# mysql - MySQL将传统十进制转换为毫秒

> ID：16061453
> 
> 赞同：1
> 
> 时间：2013-04-17T13:31:27.883
> 
> 标签：mysql, sql, math

我正在使用一些将时间表示为十进制表示时间的旧表，如下所示：

```
74447.548  = 7:44:47.548 
```

我将其移动到时间存储为 (int) 毫秒的表中。我想为此转换创建一个函数..以下工作，但有没有更有效的方法？

```
CREATE FUNCTION `test`.`decimalToMilli` (bigTime decimal)
RETURNS INTEGER
BEGIN
return (floor(mod(bigTime,floor(bigTime))*1000)  -- milliseconds
  + (floor(bigTime) MOD 100)  * 1000 -- seconds
  + ((((floor(bigTime) - floor(bigTime) MOD 100) MOD 10000))/100) * 1000*60  -- minutes
  + ((((floor(bigTime) - floor(bigTime) MOD 10000) MOD 1000000))/10000) * 1000*60*60 --hrs
);
END 
```

建议更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:59:13.407

那这个呢？

```
CREATE FUNCTION `test`.`decimalToMilli` (bigTime decimal)
RETURNS INTEGER
BEGIN
  return ((bigTime * 1000) MOD 100000  -- seconds and milliseconds
         + (floor(bigTime / 100) MOD 100) * 60000 --minutes
         + (floor(bigTime / 10000)) * 3600000 -- hours
         );
END 
```

# javascript - Visual Studio 2010-intellisense 和 javascript 中的突出显示不起作用

> ID：16061458
> 
> 赞同：2
> 
> 时间：2013-04-17T13:31:37.643
> 
> 标签：javascript, visual-studio-2010, syntax-highlighting, javascript-intellisense

在我的 javascripts 文件中的一个解决方案中，智能感知突然停止工作。所有功能都被禁用 - ctrl+space 不会带来列表 - 像这样我从另一个解决方案中获取了打印屏幕![在此处输入图像描述](https://i.stack.imgur.com/Zzp5H.png)

而且文件看起来像是纯文本 - 关键字没有颜色。 ![在此处输入图像描述](https://i.stack.imgur.com/r497f.png)

我试图打开新的解决方案并将文件移到那里 - 还是一样。只有在我调试时，文件才具有智能感知功能。感觉VS2010看到那些文件是文本文件而不是js文件。它与 tfs 有关，因为它首先发生在团队的另一位成员身上，并且在我采用最新版本的解决方案时 - 它发生在我身上。当我创建新的 js 文件时 - 它看起来很好，但是在保存文件、关闭并重新打开之后 - 再次没有颜色我发现问题出在一个特定的项目中 - 如果我将 js 文件添加到同一解决方案中的另一个项目似乎没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:35:47.260

After some research and tests. This problem could be a couple of things:

1.  Your file's extension is not .JS.
2.  You are using an express edition.
3.  You have not installed the Web Developer component on your installation (or removed it).

Let me know if this help you, If not I will look forward something else.

The complete reference about the JScript Intellisense on msdn:

[http://msdn.microsoft.com/en-us/library/vstudio/bb385682(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb385682(v=vs.100).aspx)

As you can see in the image below, I just created a single javascript file in my Visual Studio 2010 *with Web developers components* and it is working:

![enter image description here](https://i.stack.imgur.com/YOl9i.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T12:43:45.123

所以我解决了这个问题......我想用 QuickWatch (Shift+F9) 观察一些值我收到消息“无法评估表达式。调用的对象已与其客户端断开连接。” 我按下绿色图标来刷新值。关闭 QuickWatch 窗口后，我意识到我得到了智能感知和高亮显示。签入 TFS 后，我的同事提取了解决方案并获得了智能感知和高亮显示。可能是VS2010中的一些奇怪的错误。

# java - 限制 Java EE 应用程序中的并发资源使用

> ID：16061460
> 
> 赞同：2
> 
> 时间：2013-04-17T13:31:41.057
> 
> 标签：java, ejb, threadpool

有一个 Java EE 应用程序，我们可以在其中处理成批的作业。处理涉及调用具有限制的外部服务，因此我们只能同时发送 N 个请求。这个瓶颈必须在我们的应用程序逻辑中实现，我想知道我们怎样才能以最好的方式实现这一点。幸运的是，集群不是必需的，因此我们可以将问题限制在单个服务器实例上。

*   我的第一个想法是使用`ExecutorService`由 `ThreadPool`具有 N 个工作线程的 a 支持的对象，以便该`ThreadPool`对象充当调节器。当然，这不是 EE 解决方案。

*   我的第二个想法是以某种方式`ThreadPool`在容器中配置这样一个并使用它，但到目前为止我还没有找到任何这样的功能。

*   第三个想法是在EJB中使用`Semaphore(N)`对象。`@Singleton`

*   第四个想法是以某种方式创建一个有限的无状态会话 bean 池，并将有限资源访问权放入其中。由于 bean 编号由容器管理，因此资源使用也会受到限制

（澄清一下：一般的解决方案是最好的，但众所周知，我们在 Glassfish 3.1.1 上运行，可能稍后在 JBoss 6.x 上运行）

您能否为这个问题推荐一个好的架构和/或评论我的想法以帮助我做出决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:34:35.663

你为什么不使用**Works**？[在这里](http://danielveselka.blogspot.it/2012/03/schedule-jobs-with-workmanager.html)查看有关如何在 JBoss 和 Weblogic 中使用 Works 的概述。我不了解 Glasshfish，我现在将研究留给您；）
简而言之，Works 是符合 EE 的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:49:01.540

Java EE 中并发消息处理的规范解决方案是使用 MDB。您可以通过限制 MDB 池大小来限制并发运行的任务数。

*   [在 Glassfish 中设置 MDB 池大小](http://docs.oracle.com/cd/E18930_01/html/821-2431/abebw.html#abedk)
*   [JBoss 7 EJB3 子系统配置指南](https://docs.jboss.org/author/display/AS71/EJB3+subsystem+configuration+guide)

# c - c中全局声明数组的大小是多少？

> ID：16061461
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:31:52.133
> 
> 标签：c, arrays

```
#include <stdio.h>

char A[];

int main()
{
    printf("%c\n",A[1]);
    return 0;

} 
```

我可以使用 index 访问任何元素。它从不出错。对于 32 位机器，我可以访问的最大元素的索引是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:39:14.310

当声明`char A[];`出现在文件范围内时，它声明了一个数组。数组的定义应该出现在其他地方。如果定义没有出现在同一个文件（翻译单元）中，那么行为就像一个定义出现了一个值为 0 的初始值设定项，就好像你写了`char A[] = { 0 };`.

声明可见的代码可以使用数组。但是，如果数组的定义不可见，则编译器不知道数组的大小。代码作者有责任仅使用实际定义的元素。他们必须通过事先安排或在程序中传递一些信息来知道数组的大小。

如果代码使用了一个不存在的数组元素，或者甚至计算了一个元素的地址超过数组末尾的一个以上，那么行为是未定义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:41:02.610

它的大小为 1。超出索引 0 的访问（包括访问的代码`A[1]`）具有未定义的行为。

这是 C99 标准中的 6.9.2。`char A[];`是一个“暂定定义”，粗略地说，如果同一个翻译单元包含一个正确的定义，那么它只是一个`A`未知大小的 char 数组的声明。如果没有正确的定义，那么无论如何都会定义对象，就好像在翻译单元的末尾有一个定义一样，带有一个默认的初始化程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:34:51.820

`A[1]`将被翻译为`*(A+1)`基本上是一个内存地址。因此，`printf`可以打印该内存位置的任何内容。我假设您可以继续引用该数组，直到该位置存在任何内容（这会给您带来垃圾）[并且您被允许访问该位置]。

**编辑：** *GCC 4.6.3*给出`warning: array ‘A’ assumed to have one element [enabled by default]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:54:26.007

> 我可以使用 index 访问任何元素。它从不出错。对于 32 位机器，我可以访问的最大元素的索引是多少？

*在 C 中你可以*做很多你不*应该*做的事情。访问数组的越界元素通常就是其中之一。

当我使用 gcc 编译您的代码时，我得到：

```
warning: array ‘A’ assumed to have one element 
```

这应该足以告诉您不应该访问除`A[0]`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T13:34:13.660

它只是一个指针，表中没有元素。你不应该尝试索引任何东西。

# xml - XML 模式和实例错误

> ID：16061463
> 
> 赞同：0
> 
> 时间：2013-04-17T13:31:58.163
> 
> 标签：xml

我尝试以下 xml 架构

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        targetNamespace="http://your_namespace"
        xmlns="http://your_namespace">
    <xsd:element name="person">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="firstname" type="xsd:string"/>
                <xsd:element name="lastname" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

我把它分配给这个文件

```
<?xml version="1.0"?>
<person xmlns="http://your_namespace"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://your_namespace
                C:\Program%20Files%20(x86)\Wattle%20Software\XMLwriter%202\Projects\ex.xsd">
    <firstname>aaa</firstname>
    <lastname>bbb</lastname>
</person> 
```

但我总是收到意外元素名字的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:33:38.117

请参阅[这个](https://stackoverflow.com/questions/6485955/error-while-validating-xml-against-xsd)重复的问题。您需要添加 elementFormDefault="qualified" ：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
        targetNamespace="http://your_namespace"
        xmlns="http://your_namespace">
    <xsd:element name="person">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="firstname" type="xsd:string"/>
                <xsd:element name="lastname" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

# extjs - 尝试使用 dom 选择器捕捉控制器中的点击

> ID：16061470
> 
> 赞同：0
> 
> 时间：2013-04-17T13:32:16.340
> 
> 标签：extjs

我的问题很复杂，所以如果您有问题，请不要犹豫，我会更具体。

我想通过我的控制器捕捉一个事件。

我有一个只包含一个模板的简单视图。这个模板包含很多链接。

这是我的观点的代码：

```
Ext.define('Application.view.suiviItems.suiviMenu', {

extend: 'Ext.panel.Panel',

alias: 'widget.suiviMenu',

id: 'suiviMenu',

layout: {
    type: 'border'
},

bodyCls: 'bodyMenu',

bodyPadding: '10 10 10 10',

title: 'Suivi',

tpl: [
    '<tpl for=".">',
    '    <div class="Main">',
    '        <div class="Gestion">',
    '            <ul>  ',
    '                <li>',
    '                    <span>',
    '                        <a id="pfp" href="#">Valeur du point FP</a><br/>',
    '                        <a href="#">Référentiels</a><br/>',
    '                        <a href="#">Valeur du taux de CAS</a><br/>',
    '                        <b>Paramètrage nationaux, ministériels et référentiels</b>',
    '                    </span>',
    '                </li>  ',
    '                <li>',
    '                    <span>',
    '                        <a href="#">Plafond d\'emploi</a><br/>',
    '                        <a href="#">Plafond de crédit</a><br/>',
    '                        <a href="#">Enveloppes</a><br/>',
    '                        <a href="#">Mode de gestion des mouvements</a><br/>',
    '                        <a href="#">Calcul des ratios</a><br/>',
    '                        <a href="#">Corrections de consommation</a><br/>',
    '                        <a href="#">Provisions pour mouvement</a><br/>',
    '                        <b>Paramètrage des exercices budgétaires</b>',
    '                    </span>',
    '                </li> ',
    '                <li>',
    '                    <span>',
    '                        <a href="#">Liste des mouvements</a><br/>',
    '                        <a href="#">Prévoir un mouvement</a><br/>',
    '                        <a href="#">Import en masse de mouvements</a><br/>',
    '                        <a href="#">Rapprochement des mouvements prévus / constatés</a><br/>',
    '                        <b>Gestion des mouvements</b>',
    '                    </span>',
    '                </li>',
    '                <li>',
    '                    <span>',
    '                        <a href="#">Importer des dossiers de paye</a><br/>',
    '                        <b>Imports</b>',
    '                    </span>',
    '                </li>',
    '            </ul>',
    '        </div>',
    '        <div class="Restitution">',
    '            <ul>  ',
    '                <li>',
    '                    <span>',
    '                        <a href="#">RP-01: Suivi N ETPT</a><br/>',
    '                        <a href="#">RP-03: Liste et impacts des mouvements</a><br/>',
    '                        <a href="#">RP-05: Suivi N</a><br/>',
    '                        <a href="#">RP-08: Suivi N agrégé</a><br/>',
    '                        <a href="#">RP-22: Prévisions, consommations et soldes des dépenses hors PSOP</a><br/>',
    '                        <b>Restitutions</b>',
    '                    </span>',
    '                </li>     ',
    '                                <li>',
    '                    <span>',
    '                        <a href="#">RP-02: Vue agrégée de la dépense constatée</a><br/>',
    '                        <a href="#">RP-07: Vue agrégée de la consommation d\'emplois</a><br/>',
    '                        <a href="#">RP-04: Consommation constatée du plafond d\'emploi par catégorie statutaire</a><br/>',
    '                        <a href="#">RP-06: Consommation constatée du plafond d\'emploi par catégorie d\'emploi</a><br/>',
    '                        <a href="#">RP-13: Suivi de la dépense constatée par imputation budgétaire et par catégorie d\'emploi</a><br/>',
    '                        <a href="#">RP-14: Suivi de la dépense constatée par imputation budgétaire et par catégorie statutaire</a><br/>',
    '                        <a href="#">RP-15: Suivi de la dépense constatée par code élément et par catégorie d\'emploi</a><br/>',
    '                        <a href="#">RP-16: Suivi de la dépense constatée par code élément et par catégorie statutaire</a><br/>',
    '                        <a href="#">RP-20: Ratios</a><br/>',
    '                        <a href="#">RP-21: Données individuelles de paye par catégorie budgétaire</a><br/>',
    '                        <a href="#">RP-23: Coûts moyens</a><br/>',
    '                        <a href="#">RP-24: Restitution individuelle de paye</a><br/>',
    '                        <a href="#">RP-25: Suivi des codes éléments par agent</a><br/>',
    '                        <a href="#">RP-28: Consommations des crédits sous enveloppes</a><br/>',
    '                        <a href="#">RP-38: Consommations des provisions pour mouvements</a><br/>',
    '                        <b>Payes constatées</b>',
    '                    </span>',
    '                </li>',
    '            </ul>',
    '        </div>',
    '    </div>',
    '</tpl>',

], 
```

});

现在我想在每个链接上插入一个事件，所以我认为将它们放在我的控制器中会很有用。

这是我的控制器的代码：

```
Ext.define('Application.controller.suivi.suiviMenu', {
/**
 *
 */
extend: 'Ext.app.Controller',

views: [
    'Application.view.suiviItems.suiviMenu'
],

models: [

],

stores: [

],

init: function(){

    this.control({

        'pfp':{
            click: function(){
                console.log("Click 1");
            }
        },

        'span a': {
            click: function(c){
                console.log('Click 2')
            },
        },
    });
} 
```

});

你知道为什么我的事件永远不会被触发吗？如果我以错误的方式做这件事，谁能对我好一点并解释我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:50:40.650

如果您阅读了[control](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.app.Controller-method-control)的文档，您会看到它接受的选择器必须是可用的，`Ext.ComponentQuery`这涉及到选择 Ext 组件。您正在使用 dom 选择器尝试选择不起作用的实际 HTML 元素。

如果您想聆听对这些元素的点击，则必须使用不同的方法来获取对它们的引用。例如，您可以在“afterrender”侦听器中使用`panel.el.select('span a')`来获取对所有链接的引用并将点击侦听器附加到每个链接元素。

# java - Android UIAutomator 长按设备

> ID：16061478
> 
> 赞同：6
> 
> 时间：2013-04-17T13:32:32.793
> 
> 标签：java, android, testing, android-uiautomator

我想在指定时间长按指定点。不幸的是，在类中没有像 long click 这样的方法：[UiDevice](http://developer.android.com/tools/help/uiautomator/UiDevice.html) 我可能可以编写自己的方法，如下所示：

```
private void longClick(int x, int y, long time) {
    android.graphics.Point point = new android.graphics.Point(x, y);
    android.graphics.Point[] points = new android.graphics.Point[2];
    points[0] = point;
    points[1] = point;
    getUiDevice().swipe(points, time / 5); // according to documentation, each step lasts 5ms
} 
```

或使用反射并调用 longTap：

```
private void longClick(int x, int y) {
    Field mUiAutomationBridgeField = getUiDevice().getClass().getDeclaredField("mUiAutomationBridge");
    mUiAutomationBridgeField.setAccessible(true);
    Object mUiAutomationBridge = mUiAutomationBridgeField.get(getUiDevice());
    Field mInteractionControllerField = mUiAutomationBridge.getClass().getDeclaredField("mInteractionController");
    mInteractionControllerField.setAccessible(true);
    Object mInteractionController = mInteractionControllerField.get(mUiAutomationBridge);
    Method longTap = mInteractionController.getClass().getDeclaredMethod("longTap", int.class, int.class);
    longTap.setAccessible(true);
    longTap.invoke(mInteractionController, x, y);
} 
```

但是它不满意的解决方案，知道如何做得更好吗？他们为什么会错过这种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-01T07:57:31.890

```
getUiDevice().getInstance().swipe(x, y, x, y, 400); 
```

起点和终点相同。然后就可以模拟uiDevice longclick了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T12:20:06.920

我认为刷一个 UiObject 更好。

```
yourUiObject.swipeRight(int steps);
yourUiObject.swipeLeft(int steps);
yourUiObject.swipeDown(int steps);
yourUiObject.swipeUp(int steps); 
```

他们中的任何一个对我都很好。请注意，文档说一步大约需要 5 毫秒，但我发现这不是真的。

# svg - 使用 d3.js 将鼠标悬停在 svg 折线图上时，如何显示带有值的工具提示？

> ID：16061483
> 
> 赞同：7
> 
> 时间：2013-04-17T13:32:40.513
> 
> 标签：svg, d3.js

我正在使用 D3.js。当我将鼠标悬停在 d3.svg.line() 上时，我想显示一个带有相应 Y 轴值的工具提示。

我尝试使用此代码：

```
d3.svg.line().append("title")
    .text(function(d) { return d; });` 
```

但它抛出错误**has no method 'append'**。还有其他方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T19:35:19.263

d3.svg.line() 是一个线生成器；它不是实际的线元素。此功能旨在与区域生成器一起使用，但您可以使用“fill:none”禁用其中的形状外观。有关更多详细信息，请参阅其文档的链接：[https](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line) ://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line 。

下面的代码使用 d3.svg.line() 生成器创建一个路径元素，然后将工具提示添加到它生成的路径中。此标题的文本属性显示鼠标所在位置的 y 值。这是通过使用鼠标事件“mousemove”完成的，这似乎是您想要的，而不是使用“mouseover”。（鼠标悬停需要您移入和移出形状以更新文本值，而即使您的鼠标沿线移动，mousemove 也会更改该值。）

```
var data = [[{x:100, y:200}, {x:0,y:400}, {x:2, y:300}]];

var line = d3.svg.line()
    .x(function(d) { return d.x; })
    .y(function(d) { return d.y; })
    .interpolate("basis"); 

var svg = d3.select("body").append("svg:svg")
            .attr("width", 400)
            .attr("height", 400);

var g = svg.selectAll("g").data(data).enter().append("svg:g")
                          .attr("width", 400)
                          .attr("height", 400);

g.append("path")
    .attr("d", line)
    .attr("id", "myPath")
    .attr("stroke", "black")
    .attr("stroke-width", 5)
    .attr("fill", "none")    // Remove this part to color the 
                             // shape this path produces
    .on("mousemove", mMove)
    .append("title");

function mMove(){

     var m = d3.svg.mouse(this);
     d3.select("#myPath").select("title").text(m[1]);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-20T16:34:40.900

你的回答有一点错误。

```
d3.svg.mouse(this) 
```

不起作用。

正确答案是

```
d3.mouse(this) 
```

# matlab - MATLAB：以矩阵作为函数输入的 fzero？

> ID：16061486
> 
> 赞同：0
> 
> 时间：2013-04-17T13:32:49.387
> 
> 标签：matlab

我试图找到函数 f(x,y) 的值 x，它为给定的 y 生成函数值 0。在 Matlab 中，我编写了一个小函数句柄，例如

```
minme = @(y,x) y-x.^2; 
```

并使用 fzero 函数找到 x 的值，称之为 x*。

所以例如

```
fzero(@(x) minme(5,x),1) 
```

效果很好。但是，现在我想为一个大的 y 值向量（称为 Y）找到 x*。

```
minme(Y,x) 
```

对于 x 的某些值有效。

现在我正在尝试类似的东西

```
fzero(@(x) minme((3:1:5),x),1) 
```

和 fzero(@(x) minme(Y,x),1)

但这会产生错误： *??? || 的操作数 和 && 运算符必须可转换为逻辑标量值。==> fzero 中的错误 333 elseif ~isfinite(fx) || 〜现实（外汇）*

有谁知道是否有办法做到这一点？

谢谢，伊莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:41:10.937

看一下这个

```
arrayfun(@(i) fzero(@(x) minme(y(i),x),1),1:numel(y)) 
```

# c# - 在 IValueConverter 的 Type targetType 参数中放入什么

> ID：16061489
> 
> 赞同：2
> 
> 时间：2013-04-17T13:32:51.620
> 
> 标签：c#, types, windows-phone-8, ivalueconverter

我正在通过后面的代码调用 IValueConverter 类，但我不确定要在`Type targetType`参数中放入什么。该对象是`string`但使用它给我'无效的表达式术语'字符串'`

我调用转换器的代码

```
secondConverter.Convert(score, string, null, CultureInfo.CurrentCulture); 
```

转换器类

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        TimeSpan ts = new TimeSpan(0, 0, (int)value);

        return String.Format("{0:D2}:{1:D2}:{2:D2}",
                        ts.Hours,
                        ts.Minutes,
                        ts.Seconds);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:34:03.693

您可以放置`typeof(string)`​​字符串而不是字符串，但您的转换器似乎没有使用或验证目标类型，因此您可以在其中放置任何内容，包括 null。

通常，您的转换器至少应该验证目标类型是字符串，如果不是则抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:35:20.820

你会想要

```
secondConverter.Convert(score, typeof(string), null, CultureInfo.CurrentCulture); 
```

实际上使它成为 type 的参数`Type`。

# android - android MultiAutoCompleteTextView 检测建议列表项点击

> ID：16061494
> 
> 赞同：3
> 
> 时间：2013-04-17T13:33:08.553
> 
> 标签：android, autocompletetextview

在应用程序中，我使用 MultiAutoCompleteTextView 从本地数据库中选择联系人。当用户单击自动建议列表项时，我必须中止在 MultiAutoCompleteTextView 中添加文本吗？

基本上，如果已经添加，我不想将相同的联系人添加到 MultiAutoCompleteTextView 中。

请尽快帮助我。

# c++ - 返回指向局部变量的指针？？（警告 C4172）

> ID：16061502
> 
> 赞同：1
> 
> 时间：2013-04-17T13:33:42.627
> 
> 标签：c++, scope, return-by-reference

好吧，视觉工作室给了我一个警告。我确实理解警告并且我知道这不是错误。但是我不明白为什么我会看到警告 - 更糟糕的是，我因此不明白如何预防/它会带来哪些潜在问题。

代码写在下面，一个函数应该通过在容器中查找给定的“id”来返回对`std::function<>`( ) 的 (const) 引用。 容器成对存储。`fun_type_cref`
`[id, fun_type]`

```
Handler::fun_type_cref Handler::Overwrite() const
{
    auto i(container.find(OVERWRITE));
    if (i != container.end()) {
        return *i;
    } else {
        return nullptr;
    }
} 
```

两个返回语句都出现的确切警告是

> 警告 C4172：返回局部变量或临时地址

是什么导致了这个错误？我只是返回对包含对象的引用，对吗？`*i`不会创建对象的副本，对吗？我在任何地方都看不到自己在获取某物的地址？

我可以理解第二个，因为我返回了对本地创建的函数对象的引用，但是没有特定情况可以返回对编译时常量的引用或类似的东西吗？

* * *

编辑：很好地解决了第一个问题，一个简单的类型不匹配似乎因为我忘记实际返回返回的迭代器的正确部分 - 应该是`return i->second`. 奇怪的视觉工作室没有给我一个类型不匹配的错误，编译器可以将 a 转换`std::pair<std::string, std::function<...> >`为 a`std::function<...>`

现在问题变成了关于第二个返回部分的问题——我希望函数在“OVERWRITE”id 不在包含的函数表中时返回一个“默认值”（这将是一个 NO-OP）......定义这样的事情？因为我不想返回迭代器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:39:11.483

尝试将 return i 替换为：

`return (*i).second`

# javascript - 使用 javascript 函数将 HTML 表单写入网页

> ID：16061505
> 
> 赞同：0
> 
> 时间：2013-04-17T13:33:47.993
> 
> 标签：javascript, jquery, html, function

我正在编写一个 javascript 库，我需要制作一个 javascript 函数，您可以调用它来在您的网页上创建一个表单（调度程序）。

这是表单的 html 代码：

```
 <form>
    <table border="1" cellpadding="5">
    <tr><td id="schedulename" colspan="10">Time Schedule</td></tr>
    <tr>
        <td width="50">hours</td>
        <td></td>
        <td width="50">minutes</td>
        <td>Mon</td>
        <td>Tue</td>
        <td>Wed</td>
        <td>Thu</td>
        <td>Fri</td>
        <td>Sat</td>
        <td>Sun</td>
    </tr>
    <tr>
        <td width="50"><input type="text" id="hours" maxlength="2" size="1"></td> 
        <td width="2"> : </td> 
        <td width="50"><input type="text" id="minutes" maxlength="2" size="1"></td>
        <td> <input type="checkbox" id="mon"></td>
        <td> <input type="checkbox" id="tue"></td>
        <td> <input type="checkbox" id="wed"></td>
        <td> <input type="checkbox" id="thu"></td>
        <td> <input type="checkbox" id="fri"></td>
        <td> <input type="checkbox" id="sat"></td>
        <td> <input type="checkbox" id="sun"></td>
    </tr>

    <tr>
        <td colspan="10"> <input type="button" id="setbutton" value="Set schedule"></td>
    </table>
    </form> 
```

我对结果的想法是，用户只需要在他的网页中创建一个 div，然后在 javascript 中，使用正确的参数调用我的函数，从而显示我的预定义表单。但我还需要向“设置按钮”添加一些功能，它需要将数据写入我的 PLC（可编程逻辑控制器）中的地址

我希望函数调用看起来像什么：showScheduler(id, adres); id 是部门的 id，adres 是我需要写入的可编程逻辑控制器中的地址。

从 javascript 函数中将表单写入我的网页的最佳方法是什么？

我希望你们能理解，但如果需要，我很乐意给你更多的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:40:05.690

您可以执行以下操作：

```
<div id="placeholder">
</div>

<script type="text/javascript">
    function createForm(divId) {
        var formHtml = "<form><table border='1' cellpadding='5'>...</table></form>";
        document.getElementById(divId).innerHTML = formHtml;
    }
</script> 
```

例如`createForm("placeholder")`，当你想要的时候打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:46:11.747

听起来您特别希望用户**只有**他们的 html 和一个`<script>`加载到您的 js 文件中的标签。您将需要一个特定的`id`或自定义的 css 类来用作选择器。然后用户的 html 部分看起来就像：

```
<html>
...
<body>
...
<div id="customID"></div>
...
</body>
</html> 
```

然后在您的 javascript 文件中，您需要创建要写入内容的函数，并将该函数与`window.load()`. 就像是：

```
$( //note, this causes execution when the dom is loaded, using jQuery's .ready()
   function(){ showScheduler("customID"); }
);

function showScheduler(id)
{
    var contents = '<form><table border="1" cellpadding="5">...</table></form>'; //the ... needs to have the rest of your html with no single quotes anywhere inside
    $("#"+id).html(contents);
} 
```

我不确定您正在寻找的关于该`adress`部分的确切内容，但您可以轻松扩展该`showScheduler()`函数以包含该`adress`值的第二个参数，然后将其粘贴到其余`contents`值的中间。就像是：

```
function showScheduler(id, adress)
{
    var contents = '<form><table border="1" cellpadding="5">...' + adress + '...</table></form>'; //the ... needs to have the rest of your html with no single quotes anywhere inside
    $("#"+id).html(contents);
} 
```

此外，如果您希望用户从他们的页面调用该函数，您可以跳过将 this 与 this 绑定到 dom 执行的部分（即`$( function(){ showScheduler("customID"); } );`完全删除该部分

# python - Pylint - Pylint unable to import flask.ext.wtf?

> ID：16061514
> 
> 赞同：17
> 
> 时间：2013-04-17T13:34:07.497
> 
> 标签：python, flask, wtforms, pylint

I've got my Pylint install importing flask just fine. And with that same installation of flask, I have wtforms running just fine in my application. However, when I run Pylint on a file importing wtforms:

```
from flask.ext import wtf
from flask.ext.wtf import validators

class PostForm(wtf.Form):
    content = wtf.TextAreaField('Content', validators=[validators.Required()]) 
```

From Pylint I get:

```
E:  1,0: No name 'wtf' in module 'flask.ext'
E:  2,0: No name 'wtf' in module 'flask.ext'
F:  2,0: Unable to import 'flask.ext.wtf' 
```

While searching around I found [this discussion](https://github.com/mitsuhiko/flask/issues/674) suggesting it may be because flask.ext libraries are actually just "shortcuts" to libraries.

Any idea of how I can fix this? Thank you much!

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T14:41:06.460

So `flask.ext` is actually a custom importer written by [Armin](http://lucumr.pocoo.org/) in an awesome way. It allows people install extensions to flask in separate packages but import them in one consistent way. (Really you should go read the code for it. It is fantastic.) That said, apparently pylint doesn't appreciate the elegance (and this is actually a bug, in my opinion) but you're in luck. The easy way around this is to do the following

```
import flask_wtf as wtf
# The above is the equivalent line as:
# from flask.ext import wtf
from flask_wtf import validators
# This is the same as:
# from flask.ext.wtf import validators 
```

This should make pylint happy. It isn't as nice as using `flask.ext` but you have to pick shutting up pylint or using elegant code, but you can't have both (right now).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-28T22:17:33.027

Having been annoyed by this bug for a while, I created a pylint plugin to solve this issue. Code is at [https://github.com/jschaf/pylint-flask](https://github.com/jschaf/pylint-flask)

To enable pylint to 'see' the flask.ext modules do the following:

1.  `pip install pylint-flask`
2.  run `pylint --load-plugins=pylint_flask <your module>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T11:54:50.217

Use flask_<> instead of flask.ext.<>

Instead of "from flask.ext.wtf import validators" use "**from flask_wtf import validators**"

Faced the same problem for Mail and Message module. Had to use "**from flask_mail import Message, Mail**" instead of "from flask.ext.mail import Message, Mail"

# php - 出现致命错误：调用未定义的函数 pg_connect

> ID：16061517
> 
> 赞同：1
> 
> 时间：2013-04-17T13:34:19.460
> 
> 标签：php, postgresql

我正在用 php 开发我的第一个程序。我搜索了很多论坛，大约 3 或 4 个小时，但一无所获。

这是我的 index.php 代码：

```
<html>
<head>
   <title>first program</title>
</head>
<body>
    <h1> program loaded successfully</h1>
    <?php
        echo extension_loaded('pgsql') ? 'yes':'no';
        echo pg_connect("host=localhost port=5432 dbname=test user=postgres password=root");
    ?>
</body> 
```

当我加载此页面时，我看到：

```
program loaded successfully

no

Fatal error: Call to undefined function pg_connect() in D:\courses\web programing\hw2\cinema\index.php on line 9 
```

我在 Windows 上安装了 php-5.4.14-Win32-VC9-x86 并使用以下注释运行我的项目：

```
php.exe" -S localhost:80 -t "D:\courses\web programing\hw2\cinema" 
```

我在 php 文件夹中有 php.ini-development 和 php.ini-production ，在两个文件中有未注释的 extension=php_pgsql.dll, extension=php_pdo_pgsql.dll 。我正在使用 postgresql 9.2

那么我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:37:48.257

postgreSQL 应该在 php.ini 中激活以激活这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:06:46.037

**已解决** ，但问题是 php 尝试从 Windows 文件夹加载 php.ini，但那里不存在 php.ini。所以我在 Windows 文件夹中复制了我的一个 php.ini 文件并解决了问题。这似乎是一个错误。

# ios - 异步启动某些东西，然后仅在需要时等待

> ID：16061518
> 
> 赞同：1
> 
> 时间：2013-04-17T13:34:21.443
> 
> 标签：ios, objective-c, asynchronous

我想启动一个在另一个线程上运行的任务“以防万一”，以尽量减少用户稍后必须等待的时间。如果有时间完成，则用户不必等待，但如果尚未完成，则需要等待。

例如，`viewDidLoad:`当用户按下屏幕上的按钮时，将需要在其中打开一个数据库。如果我等到用户实际按下按钮才打开数据库，则会出现延迟。所以我想早点打开它。由于我不知道打开需要多长时间，也不知道用户点击按钮需要多长时间，所以我需要一种说法，*如果其他任务尚未完成，则等待，否则继续*.

例如：

```
@implementation aViewController
- (void) viewDidLoad {
    [self.dbManager openOrCreateDbWithCompletionHandler: ^(NSError *err) {
        if( err ) NSLog( @"There was a problem opening the database" );
    }];
}

- (IBAction) goButtonTouched: (id) sender {
    // Wait here until the database is open and ready to use.
    if( ???DatabaseNotAvailableYet??? ) {
        [self putSpinnerOnScreen];
        ???BlockProgressHereUntilDatabaseAvailable???
        [self takeSpinnerOffScreen];
    }
    // Use the database...
    NSManagedObjectContext *context = [self theDatabaseContext];

    // Build the search request for the attribute desired
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName: NSStringFromClass([Destinations class])];
    request.predicate = [NSPredicate predicateWithFormat: @"dId == %@", sender.tag];
    request.sortDescriptors = nil;

    // Perform the search
    NSError *error = nil;
    NSArray *matches = [context executeFetchRequest: request error: &error];

    // Use the search results
    if( !matches || matches.count < 1 ) {
        NSLog( @"Uh oh, got a nil back from my Destination fetch request!" );
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"No Info"
                    message: @"The database did not have information for this selection"
                   delegate: nil
          cancelButtonTitle: @"OK"
          otherButtonTitles: nil];
        [alert show];
    } else {
        MyOtherViewController *movc = [[MyOtherViewContoller alloc] init];
        movc.destDetails = [matches lastObject];
        [self.navigationController pushViewController: movc animated: YES];
    }
}
@end 
```

我希望屏幕上永远不会出现微调器，也不会给用户带来任何延迟，但是，由于我不知道建立数据库连接需要多长时间，所以我必须为它没有准备好做好准备当用户按下按钮时。

我不能在完成时使用回调，`openOrCreateDbWithCompletionHandler:`因为那时我不想做任何事情，只有当用户按下按钮时。

我考虑过使用信号量，但似乎我只会发出一次信号（在`openOrCreateDbWithCompletionHandler:`调用的完成处理程序中），但每次按下按钮时都会等待它。这似乎只适用于第一次按下按钮。

我考虑过使用`dispatch_group_async()`for `openOrCreateDbWithCompletionHandler:`then `dispatch_group_wait()`in`goButtonTouched:`但由于`openOrCreateDbWithCompletionHandler:`它在另一个线程上工作并立即返回，我认为不会设置等待状态。

我可以简单地设置一个我自己的标志，比如在 , 之前`openOrCreateDbWithCompletionHandler:`，`self.notOpenYet = YES;`然后在它的完成处理程序中做`self.notOpenYet = NO;`，然后在`goButtonTouched:`替换*???DatabaseNotAvailableYet???* ，`self.notOpenYet`但是我如何阻止其状态的进展？放入循环和计时器似乎很笨拙，因为我不知道等待是纳秒还是秒。

这似乎是一个很常见的情况，我相信你们都经常做这种事情，而且我的教育很差，但是我搜索了 stackOverflow 和网络，并没有找到一个令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:36:24.127

我认为，除非您正在构建自己的事件循环，否则阻塞执行是一个坏习惯，这很少需要。你也不需要在你的情况下做任何 GCD 的事情。感受一下异步。

以下应该有效：

```
@implementation aViewController
- (void) viewDidLoad {
    self.waitingForDB = NO;
    self.databaseReady = NO;
    [self.dbManager openOrCreateDbWithCompletionHandler: ^(NSError *err) {
            if( err ){ 
                NSLog( @"There was a problem opening the database" )
            }else{
                [self performSelectorOnMainThread:@selector(handleDatabaseReady) withObject:nil waitUntilDone:NO];
            };
    }];
}

- (void)handleDatabaseReady{
    self.databaseReady = YES;
    if(self.waitingForDB){
        [self takeSpinnerOffScreen];
        [self go];
    }

}

- (IBAction) goButtonTouched: (id) sender {
    // Wait here until the database is open and ready to use.
    if( !self.databaseReady ) {
        self.waitingForDB = YES;
        [self putSpinnerOnScreen];
    else{
        [self go];
    }
}

-(void)go{
    // Use the database...
    NSManagedObjectContext *context = [self theDatabaseContext];

    // Build the search request for the attribute desired
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName: NSStringFromClass([Destinations class])];
    request.predicate = [NSPredicate predicateWithFormat: @"dId == %@", sender.tag];
    request.sortDescriptors = nil;

    // Perform the search
    NSError *error = nil;
    NSArray *matches = [context executeFetchRequest: request error: &error];

    // Use the search results
    if( !matches || matches.count < 1 ) {
        NSLog( @"Uh oh, got a nil back from my Destination fetch request!" );
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"No Info"
                    message: @"The database did not have information for this selection"
                   delegate: nil
          cancelButtonTitle: @"OK"
          otherButtonTitles: nil];
        [alert show];
    } else {
        MyOtherViewController *movc = [[MyOtherViewContoller alloc] init];
        movc.destDetails = [matches lastObject];
        [self.navigationController pushViewController: movc animated: YES];
    }
}
@end 
```

在主线程上执行调用可以`handleDatabaseReady`保证在设置/读取新属性时不会出现竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:46:20.277

我会带着国旗去。您不想阻止 UI，只需显示微调器并从 goButtonTouched 返回。但是，您确实需要在 openOrCreateDbWithCompletionHandler: 中取消微调器（如果它处于活动状态）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T13:50:23.860

这是一个相当简单的场景。你制作了一个方法来做这些事情。让我们称之为`doStuff`。从主线程，您调用`performSelectorInBackgroundThread:@selector(doStuff)`. 默认情况下不启用该按钮。在结束时启用它，`doStuff`以便用户在您准备好之前不会点击它。为了使其更具吸引力，您可以在按钮的位置放置一个微调器，然后在完成时将其替换为按钮`doStuff`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T13:52:34.787

您可以使用许多类和 API 来实现这种事情。您可以`NSThread`与信号量和事件等同步原语一起使用，以在用户实际按下按钮时等待它完成。您可以使用`NSOperation`子类（带有`NSOperationQueue`），并且可以使用 GCD 队列。

我建议您查看Apple的[并发编程指南中的一些信息。](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

在您的情况下，您可能最好将操作添加到 GCD 后台队列`dispatch_async`，并结合使用信号量，您可以在用户点击按钮时等待。您可以查看问题[“我如何等待异步调度的块完成？”](https://stackoverflow.com/questions/4326350/how-do-i-wait-for-an-asynchronously-dispatched-block-to-finish) 例如。

# javascript - 为什么我的函数在 HTML 中调用 .js 文件时不起作用

> ID：16061519
> 
> 赞同：0
> 
> 时间：2013-04-17T13:34:23.127
> 
> 标签：javascript, html

嘿伙计们，我对代码感到非常沮丧..我正在尝试在我的 html 上调用 .js 文件，但它目前无法正常工作:(我知道代码和一切都是正确的，但它不会执行该功能。你们能看看我的代码是否正确吗？

这是我的 HTML 代码。

```
<button type="button" onclick="myFunction1()"> Press Me!! </button>
<script type="text/javascript" src="Test2.js"></script> 
```

这是我试图在 html 上调用的 JS 代码：

```
<!DOCTYPE HTML>
<html>
<head> 
<title> Lab 4 - Task 2.2</title>
<script type = "text/javaScript"> </script>
<p id="demo"</p>
<button onclick="myFunction1()"> Press </button>
<script>
function myFunction1()
{
var x;
var number1=prompt("Please Enter a Number", "");
var number2=prompt("Please Enter a Second Number", "");
var number3=prompt("Please Enter a Third Number", "");
var number4=prompt("Please Enter a Fourth Number", "");
document.getElementById("demo").innerHTML= Math.max (number1, number2, number3, number4);
}
</script>
</body> 
```

当我在网络浏览器上将代码作为 html 文件运行时，该代码可以工作，但是当我将文件转换为 .js 时，它在从 HTML 调用时不起作用。我在这里做错了吗？

援助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:36:32.830

If you want to create a `.js` file, *all* of the code in that file must be javascript. You would want to create the function like so:

```
function myFunction1()
{
var x;
var number1=prompt("Please Enter a Number", "");
var number2=prompt("Please Enter a Second Number", "");
var number3=prompt("Please Enter a Third Number", "");
var number4=prompt("Please Enter a Fourth Number", "");
document.getElementById("demo").innerHTML= Math.max (number1, number2, number3, number4);
} 
```

**And then, you would include the script in your HTML document**

```
<script type="text/javascript" src="path_to_script.js"></script> 
```

And from here you will be able to use the function as if it were part of your HTML page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:37:16.207

> This is my JS Code that i am trying to call on html

That's an HTML document. A `.js` file should contain only JS. It shouldn't even have `<script>` tags in it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:39:21.310

我在 Webmatrix 上运行时遇到了这个问题。所以我不得不像这样更改 .js 文件的路径：

```
<script type="text/javascript" src="../Test2.js"></script> 
```

O 和 .js 文件应该只包含 javascript 代码：

```
function myFunction1()
{
var x;
var number1=prompt("Please Enter a Number", "");
var number2=prompt("Please Enter a Second Number", "");
var number3=prompt("Please Enter a Third Number", "");
var number4=prompt("Please Enter a Fourth Number", "");
document.getElementById("demo").innerHTML= Math.max (number1, number2, number3, number4);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:44:48.870

检查以下内容：

1.  检查 HTML、JS 文件是否在同一目录中或指定正确的位置。
2.  JS 文件不需要任何 HTML 标头。
3.  在 HTML 文档的头部包含您的 JS 文件。
4.  从 JS 文件中删除脚本和其他标签。

（对于 JS 文件，您甚至不需要添加文件类型，只需 src 就足够了）。

# angularjs - 在 AngularJS 中的工厂无法提供的服务中，我可以做什么？

> ID：16061520
> 
> 赞同：0
> 
> 时间：2013-04-17T13:34:24.583
> 
> 标签：angularjs

我见过许多类似的问题，但没有一个真正给出一个简单的例子。这是一个与其他一些非常相似的示例类似的如何做某事的示例：

```
//service style, probably the simplest one
myApp.service('helloWorldFromService', function() {
    this.sayHello = function() {
        return "Hello, World!"
    };
});

//factory style, more involved but more sophisticated
myApp.factory('helloWorldFromFactory', function() {
    return {
        sayHello: function() {
            return "Hello, World!"
        }
    };
}); 
```

但两者都做同样的事情。有人可以通过使此示例显示一些我可以通过使用一种方法而不是另一种方法获得的附加功能来向我展示为什么我会使用上述一种或另一种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:32:32.290

服务和工厂略有不同。服务是您使用“new”调用的构造函数，其中工厂返回单例对象。

# php - Wordpress 后端，无法编辑帖子状态

> ID：16061526
> 
> 赞同：0
> 
> 时间：2013-04-17T13:34:36.817
> 
> 标签：php, wordpress, content-management-system

我正在实习的公司的一位前程序员现在在编辑帖子时禁用了编辑 post_status 的功能，并使用屏幕右上角的选项。我已经搜索了一段时间，但我没有选择。

过了一会儿，我注意到当我选择另一个主题（21 个）时，它又可以工作了。所以它必须在主题文件夹中，但我找不到在哪里。

是否有某种我在谷歌上找不到的命令禁用它？

PS：编辑链接还在，只是失效了。我可以使用选项下拉菜单获取 div 以使用谷歌检查器显示，因此它只是隐藏起来。

这是它得到的html：

```
<a href="#post_status" class="edit-post-status hide-if-no-js">Edit</a> 
```

编辑：好的，我发现它不是被关闭的东西，而是一个 jQuery 包含错误。有人在这段代码中包含了一个 jQuery 文件：

```
add_action('admin_print_styles', 'admin_scripts');
function admin_scripts(){
    wp_register_script('jquery_ui', get_bloginfo('template_directory').'/js/jquery-ui-1.8.21.custom.min.js');
    wp_enqueue_script('jquery_ui');
} 
```

[这个](http://codex.wordpress.org/Function_Reference/wp_register_script)页面告诉我它已经使用了那个（几乎完全正确的）jQuery 版本。所以因为我最近更新了安装，不需要双脚本了。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:55:58.763

查看主题中的functions.php。这可能是他们禁用元框和编辑选项的地方。

或者，在 wp-content 中查找 mu-plugins 文件夹，看看是否有一个“必须使用”的插件禁用任何东西。

# c# - 从启用 AJAX 的 WCF 服务加载 Handsontable

> ID：16061532
> 
> 赞同：0
> 
> 时间：2013-04-17T13:34:52.133
> 
> 标签：c#, jquery, ajax, json, handsontable

我试图在支持 AJAX 的 WCF 服务的 Handsontable 中显示数据，但它没有显示任何内容。

```
CarsService.svc:

    [DataContract]
    public class Car
    {
        [DataMember]
        public string Name { get; set; }

        [DataMember]
        public string Year { get; set; }
    }

    [ServiceContract(Namespace = "")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class CarsService
    {
        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public IEnumerable<Car> GetCars()
        {
            var cars = new List<Car>();
            var car1 = new Car()
            {
                Name = "Kia",
                Year = "2008"
            };
            var car2 = new Car()
            {
                Name = "Nissan",
                Year = "2009"
            };
            cars.Add(car1);
            cars.Add(car2);
            return cars;
        }
    }

WebPage:

<head runat="server">
    <title></title>
    <script type='text/javascript' src='/Scripts/jquery-1.8.3.js'></script>
    <script type='text/javascript' src="/Scripts/Handsontable/jquery.handsontable.js"></script>
    <script type='text/javascript' src="/Scripts/Handsontable/bootstrap-typeahead.js"></script>
    <script type='text/javascript' src="/Scripts/jquery.contextMenu.js"></script>
    <script type='text/javascript' src="/Scripts/jquery.ui.position.js"></script>
    <link rel="stylesheet" type="text/css" href="/Styles/jquery.contextMenu.css"/>
    <link rel="stylesheet" type="text/css" href="/Styles/Handsontable/jquery.handsontable.css"/>
</head>
<body>
    <form id="form1" runat="server">
        <script type='text/javascript'>

        $(window).load(function () {

            $.ajax({
                url: "/CarsService.svc/GetCars",
                type: "GET",
                dataType: "json"
            })
            .success(function (result) {
                $("#exampleGrid").handsontable("loadData", result);
            })
            .fail(function (r, o) {
                alert("Failed : " + r.responseText);
            });
        });
        </script> 

        <div id="exampleGrid" class="dataTable"></div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T23:42:02.600

以下对我有用：

我使用 newtonsoft 的 [Json.net：http://json.codeplex.com/](http://json.codeplex.com/)

服务合同：

```
[WebInvoke(Method = "GET")]
[OperationContract]
string GetAllData(); 
```

wcf 服务返回：

```
return JsonConvert.SerializeObject(data); 
```

和 javascript ...（“数据”是我的 Ajax 调用返回的内容）

```
var myData = JSON.parse(data.d);

var config = {
    data: myData,
    columns: [
        //I had to set 'data' of each column
        { data: "OtherParty" },
        { data: "Reference" }
    ]
};

$container.handsontable(config); 
```

我希望这是有帮助的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T09:00:45.680

> 加密工具

```
import java.security.Security;
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEParameterSpec;
import sun.misc.BASE64Decoder;

public class EncryptionUtils
{
  private Cipher decryptCipher;
  private BASE64Decoder decoder = new BASE64Decoder();

  public EncryptionUtils() throws SecurityException {
    Security.addProvider(new com.sun.crypto.provider.SunJCE());

    char[] pass = "edurixkey".toCharArray();
    byte[] salt = {
      -93, 33, 36, 44, 
      -14, -46, 62, 25 };

    int iterations = 3;

    init(pass, salt, iterations);
  }

  public void init(char[] pass, byte[] salt, int iterations) throws SecurityException {
    try {
      PBEParameterSpec ps = new PBEParameterSpec(salt, 20);
      SecretKeyFactory kf = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
      SecretKey k = kf.generateSecret(new javax.crypto.spec.PBEKeySpec(pass));

      decryptCipher = Cipher.getInstance("PBEWithMD5AndDES/CBC/PKCS5Padding");
      decryptCipher.init(2, k, ps);
    }
    catch (Exception e) {
      throw new SecurityException("Could not initialize Encryption: " + e.getMessage());
    }
  }

  public synchronized String decrypt(String str) throws SecurityException {
    try {
      byte[] dec = decoder.decodeBuffer(str);
      byte[] utf8 = decryptCipher.doFinal(dec);
      return new String(utf8, "UTF8");
    }
    catch (Exception e) {
      throw new SecurityException("Could not decrypt: " + e.getMessage());
    }
  }
} 
```

# java - Java 和 HTMLUnit：如何点击提交按钮？

> ID：16061533
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:02.007
> 
> 标签：java, eclipse, htmlunit, submit-button

我是 Java 新手，需要编写各种 Java 应用程序来进行网页抓取和网页交互。

我开始使用 Selenium，但因为它直接与浏览器交互，所以对我来说并不实用。

我需要执行以下任务： 1\. 转到特定 URL 2\. 在输入字段中输入邮政编码 3\. 单击提交按钮 4\. 从特定 div 标签或重新查询页面解析并保存结果。

我正在使用 HTMLUnit 和 Eclipse。我可以通过引用表单和输入名称来访问网页并在输入中输入邮政编码。但是，当我尝试单击提交按钮时，出现 ElementNotFoundException 错误。

下面是如何在页面上实现提交按钮的示例：

```
type="submit" value="submit" name="submit">输入邮编

```

这是我的代码的样子：

```
package htmlunittest;

import java.io.IOException;
import java.net.URL;
import junit.framework.TestCase;
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.Page;
import com.gargoylesoftware.htmlunit.RefreshHandler;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlDivision;
import com.gargoylesoftware.htmlunit.html.HtmlButtonInput;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlImage;
import com.gargoylesoftware.htmlunit.html.HtmlInput;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;
import com.gargoylesoftware.htmlunit.html.HtmlTextInput;

public class htmlunittest extends TestCase{

@SuppressWarnings("deprecation")
public static void main(String[] args) throws Exception 
{

    final WebClient webClient = new WebClient();            
    final HtmlPage startPage = webClient.getPage("http://www.testpage.com");

    final HtmlForm form = (HtmlForm) startPage.getForms().get(2);

 final HtmlTextInput textField = form.getInputByName("address");
  textField.setValueAttribute("my post code");

//throws ElementNotFoundException
  final HtmlSubmitInput button = form.getInputByName("submit");

// Now submit the form by clicking the button and get back the second page.
final HtmlPage page2 = button.click();
System.out.println(page2.getHtmlElementById("mainContent"));

webClient.closeAllWindows();

}
} 
```

有人可以指出我应该如何通过 HTMLUNIT 单击提交按钮的正确方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:49:26.537

如果没有您尝试获取的整个页面，很难找出为什么它不起作用。

我敢打赌，你没有得到正确的表单，`.get(2)`顺便说一句，以这种方式获取表单通常是一个坏主意，因为如果目标页面稍微更改其源代码只是为了在该表单之上添加一个表单，你的抓取工具不会再次工作，因为索引会有所不同。

# android - Android Nullpointerexception 并从 sqlite retun 0 中删除行

> ID：16061536
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:06.430
> 
> 标签：android, sqlite

我通过长按 ListView 项编写了一个带有 SQLite ADD 和 DELETE 功能的简单 APP。但是执行DELETE时有错误。

Logcat（已解决）

```
04-17 21:19:42.433: E/AndroidRuntime(4067): FATAL EXCEPTION: main
04-17 21:19:42.433: E/AndroidRuntime(4067): java.lang.NullPointerException
04-17 21:19:42.433: E/AndroidRuntime(4067):     at tw.danny.idcc_hw2.savedHeadlinesFragment$1.onItemLongClick(savedHeadlinesFragment.java:91)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.widget.AbsListView.performLongPress(AbsListView.java:2921)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2871)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.os.Handler.handleCallback(Handler.java:615)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.os.Looper.loop(Looper.java:137)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at java.lang.reflect.Method.invoke(Method.java:511)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-17 21:19:42.433: E/AndroidRuntime(4067):     at dalvik.system.NativeStart.main(Native Method) 
```

**我的 APP 是使用 ListView 片段显示数据（标题）和 longClick 项目将其添加到数据库中。在activity2中，以相同的布局显示数据库中的所有数据（标题）。从现在开始，所有功能都运行良好。当我想在activity2中使用与activity1中的ADD相同的操作来实现DELETE时，问题就出现了。**

onItemLongClick 监听器（用于删除的活动 2）

```
@Override
public void onActivityCreated(Bundle savedState) {
    super.onActivityCreated(savedState);

    getListView().setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {

            //Long press to delete article from db
            int rnumber =  dbHlp.DELETEColumData(RSSData.Headlines.get(position));

            if(rnumber==1)
                Toast.makeText(getActivity(), "Deleted.", Toast.LENGTH_LONG).show();
            else if(rnumber==0)
                Toast.makeText(getActivity(), "Delete Error!", Toast.LENGTH_LONG).show();

            return true;
        }
    });
} 
```

onItemLongClick 侦听器（用于添加的活动 1）

```
@Override
public void onActivityCreated(Bundle savedState) {
    super.onActivityCreated(savedState);

    getListView().setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            //Long press to add article to db
            long rowID =  dbHlp.ADDColumData(RSSData.Headlines.get(position), RSSData.Articles.get(position));

            Toast.makeText(getActivity(), "Add to list. id:"+rowID, Toast.LENGTH_LONG).show();

            return true;
        }
    });
} 
```

SQLiteOpenHelper 中的函数

```
public class RSSDBHlp extends SQLiteOpenHelper {
private static final String DATABASE_NAME = "ReadLater";
private static final int DATABASE_VERSION = 1;
private static final String TABLE_NAME = "article";
private static final String TABLE_CREATE = 
                "CREATE TABLE " + TABLE_NAME + " ( " +
                " id integer primary key autoincrement, " +
                " title TEXT NOT NULL, " +
                " detail TEXT );";

public RSSDBHlp(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(TABLE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(db);
}

public long ADDColumData(String Title,String Detail) {
    SQLiteDatabase db = getWritableDatabase();      
    ContentValues values =new ContentValues();
    values.put("title", Title);
    values.put("detail", Detail);
    long rowID =db.insert(TABLE_NAME, null, values);

    db.close();
    return rowID;
}

public int DELETEColumData(String Title) {
    SQLiteDatabase db = getWritableDatabase();
    Log.d("MSG","DELETE:"+Title);
    String whereClause = "title='" + Title + "'";
    int rnumber = db.delete(TABLE_NAME, whereClause, null);

    //0:error 1:all row delete

    db.close();
    return rnumber;
} 
```

有什么问题，我只在 ADD 函数上复制和修改一些代码，效果很好。

删除返回

```
 Returns
the number of rows affected if a whereClause is passed in, 0 otherwise. To remove all rows and get a count pass "1" as the whereClause. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:38:50.947

**空指针异常**

您尚未初始化变量`dbHlp`。所以它的投掷`NullPointerException`。

`dbHlp`在第一次使用之前进行初始化。IE，

`dbHlp = new RSSDBHlp();`

**从 sqllite 中删除行返回 0**

修改语句

```
String whereClause = "title='" + Title + "'";
int rnumber = db.delete(TABLE_NAME, whereClause, null); 
```

如下

```
int rnumber = db.delete(TABLE_NAME, "title=?", new String[] {Title}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:59:26.513

它看起来像是一个调试的东西，与在你面前的调试器相比，在没有工作的情况下查看代码有时并不容易。

我最好的猜测是，假设您 100% 确定 dbHlp 变量已被初始化，那么 RSSData.Headlines 或 RSSData 为空。我将开始朝这个方向进行调试，但是很难通过所提供的信息来提供 100% 有用的答案。

问候

# c - 从bmp文件中获取每个像素的RGB值

> ID：16061538
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:35:12.370
> 
> 标签：c, image-processing, bmp

所以我有一个bmp文件，我想为图像的每个像素提取rgb的细节。

我在某处读到以下内容会为我做这件事

```
int main(){
int image[100][3]; // first number here is 100 pixels in my image, 3 is for RGB     values
 FILE *streamIn;
 int i;
 streamIn = fopen("./t.bmp", "r");
 if (streamIn == (FILE *)0){
    printf("File opening error ocurred. Exiting program.\n");
    return 0;
 }

  int byte;
  int count = 0;
  for(i=0;i<54;i++) byte = getc(streamIn);  // strip out BMP header

  for(i=0;i<100;i++){    // foreach pixel
     image[i][2] = getc(streamIn);  // use BMP 24bit with no alpha channel
     image[i][1] = getc(streamIn);  // BMP uses BGR but we want RGB, grab byte-by-byte
     image[i][0] = getc(streamIn);  // reverse-order array indexing fixes RGB issue...
     //printf("[%d,%d,%d] ",image[i][0],image[i][1],image[i][2]);
     if(image[i][0]==255 && image[i][1]==255 && image[i][2]==255)
        printf("B");
     else if(image[i][0]==0 && image[i][1]==0 && image[i][2]==0)
        printf("W");
     else{
        printf("[%d,%d,%d]",image[i][0],image[i][1],image[i][2]);
        //return 0;
     }
  }

  fclose(streamIn);
  return 0;
 } 
```

现在考虑到我的 bmp 文件是 10*10 像素，上述方法可以工作吗？

**编辑**我添加了一个答案，也许这可以帮助某人。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:35:20.077

此代码示例非常粗糙，我不建议这样做。

但是，如果您坚持，您需要了解一条规则：每一行都填充到 4 个字节的精确倍数。在您的情况下，一行是 10*3 或 30 个字节，因此它会获得 2 个额外字节的填充。如果你在阅读文件时没有考虑到这一点，你就会离开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:48:27.730

所以我从三个不同的 jpg 创建了三个不同的 bmp 文件，每个文件都有不同的像素数，这就是我发现的。

1.  标题信息，或者基本上是每个像素的颜色，在 138 字节数据之后开始出现。
2.  Mark Random 正确地建议了填充，每行的字节数必须是 4 的倍数。
3.  填充字节，获取值 0。

以上结论是基于我所举的实例，绝不是一概而论。希望能帮助到你。

# javascript - 如何在此脚本中添加 mouseenter 函数的延迟

> ID：16061547
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:26.240
> 
> 标签：javascript, jquery, html

我有一个下拉菜单，它将整个宽度延伸到页面顶部，因此当您将鼠标从页面顶部移开时，会快速打开浏览器菜单/地址栏。我想稍微延迟一下，所以鼠标必须在打开前 1/2 秒停留在菜单上。这将允许我每次将鼠标滑离页面顶部时都不会打开这个该死的菜单。

```
$(function(){
       $(window).resize();
       $('#navigation_horiz ul li').bind('mouseenter',function(e){
    timer = setTimeout(function(){
        $('#navigation_horiz ul li').removeClass('active');
        $(this).addClass('active');
        if($(this).children('.dropdown').length>0){
            $('#navigation_horiz ul').next('.dropdown').attr('id',$(this).children('.dropdown').attr('id'));    
            $('#navigation_horiz ul').next('.dropdown').html($(this).children('.dropdown').html());
            $('#navigation_horiz ul').next('.dropdown').slideDown(500);
            $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
            $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:0},0).animate({opacity:1},800,'linear');
        }
    }, 500);
    });

    jQuery.expr[':'].focus = function( elem ) {
      return elem === document.activeElement && ( elem.type || elem.href );
    };  

    $('#navigation_horiz').bind('mouseleave',function(){
        if($('#navigation_horiz ul').next('.dropdown').children().length > 0 && $('#navigation_horiz ul').next('.dropdown').attr('id')=='dropdown_login' && ($('#navigation_horiz ul').next('.dropdown').find('input').is(":focus") || $('#navigation_horiz ul').next('.dropdown').find('select').is(":focus") )){
        }else{
            $('#navigation_horiz ul li').removeClass('active');
            $('#navigation_horiz ul').next('.dropdown').delay(600).slideUp(500);
            $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
            $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:1},0).animate({opacity:0},1000,'linear');
        }
    });

    $('#TabbedPanels1 .TabbedPanelsContentGroup').children().hide();
    $('#TabbedPanels1 .TabbedPanelsContentGroup').children(":eq(0)").show();    
    $("#TabbedPanels1 .TabbedPanelsTabGroup li").live('click',function(){
        $(this).parent('ul').next('.TabbedPanelsContentGroup').children().hide();
        $(this).parent('ul').next('.TabbedPanelsContentGroup').children(":eq("+$(this).attr('tabindex')+")").show();
    }); 
    <!--

    //-->

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:38:50.390

利用`setTimeout()`

```
 var timer;
 $('#navigation_horiz ul li').bind('mouseenter',function(e){
      timer =  setTimeout(function(){
            $('#navigation_horiz ul li').removeClass('active');
            $(this).addClass('active');
            if($(this).children('.dropdown').length>0){
                $('#navigation_horiz ul').next('.dropdown').attr('id',$(this).children('.dropdown').attr('id'));    
                $('#navigation_horiz ul').next('.dropdown').html($(this).children('.dropdown').html());
                $('#navigation_horiz ul').next('.dropdown').slideDown(500);
                $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
                $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:0},0).animate({opacity:1},800,'linear');
             }
           },1000);// 1 second delay
      } 
```

在鼠标离开时清除计时器

```
$('#navigation_horiz').bind('mouseleave',function(){
 clearTimeout(timer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:39:04.433

有一个简单的解决方案：将鼠标输入函数的内容包装在超时中：

```
var timer;
$('#navigation_horiz ul li').bind('mouseenter',function(e){
    that = this; //'this' becomes the window when inside the setTimeout callback, so I store it in a variable 'that'
    timer = window.setTimeout(function(){ //Wrap the contents of the mouse enter function in a timeout.
        $('#navigation_horiz ul li').removeClass('active');
        $(that).addClass('active'); // I have replace all "$(this)"'s with "$(that)"'s
        if($(that).children('.dropdown').length>0){
            $('#navigation_horiz ul').next('.dropdown').attr('id',$(this).children('.dropdown').attr('id'));    
            $('#navigation_horiz ul').next('.dropdown').html($(this).children('.dropdown').html());
            $('#navigation_horiz ul').next('.dropdown').slideDown(500);
            $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
            $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:0},0).animate({opacity:1},800,'linear');
        }
    }, 500);
}); 
```

您应该清除 mouseleave 的超时：

```
$('#navigation_horiz').bind('mouseleave',function(){
    window.clearTimeout(timer);
}); 
```

**来源**

[MDN - window.setTimeout()](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)

# ios - 在 ios sdk 中同时下载多个视频文件

> ID：16061548
> 
> 赞同：-1
> 
> 时间：2013-04-17T13:35:33.010
> 
> 标签：ios, ipad

我必须同时从服务器下载多个文件。目前我一次下载一个视频，它的工作完全正常。下面是相同的代码。现在我需要同时下载多个视频并为所有正在进行的下载维护单独的进度条。并且这个代码可以下载大视频还是有更好的方法。

谢谢

//全局头变量

```
float contentSize;
NSMutableData *responseAsyncData;
UIProgressView *progressBar; 
```

//创建连接的代码

```
NSString *requestString = [NSMutableString stringWithString:VIDEO_LINK];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:requestString] cachePolicy:NO timeoutInterval:15.0];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES]; 
```

并处理这样的回调..

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    if ([response isKindOfClass:[NSHTTPURLResponse class]])
    {
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
        contentSize = [httpResponse expectedContentLength];
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    if(responseAsyncData==nil)
    {
        responseAsyncData = [[NSMutableData alloc] initWithLength:0];
    }
    [responseAsyncData appendData:data];
    float progress = (float)[responseAsyncData length] / (float)contentSize;
    [progressBar setProgress:progress];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Error: %@", [error localizedDescription]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSError* error;

    if(responseAsyncData)
    {
       //filepath = Path to my location where i am storing
        BOOL pass = [responseAsyncData writeToFile:filepath atomically:YES];
        if (pass) {
            NSLog(@"Saved to file: %@", filepath);
        } else {
            NSLog(@"Video not saved.");
        }
        [progressBar setProgress:0];
    }
    responseAsyncData = nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:20:28.987

将您的下载代码封装到`NSOperation`. 然后您可以使用 an`NSOperationQueue`异步运行下载，允许并行完成一定数量的下载，等等。

我没有读过这个教程，但它看起来很透彻：[http ://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

# c - 循环队列中的数组未初始化

> ID：16061549
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:34.557
> 
> 标签：c, data-structures, queue

我在循环队列的 c 实现中遇到问题。入队操作无法正常工作。该值未在数组中初始化。

队列的结构是：

```
typedef struct
{   
    int a[5];
    int tail;
    int head;
    int cap;
 }Que; 
```

入队函数：

```
 int enque(Que *q,int num) 
 {
    if((q->head)==(q->tail ))
        return -1;
    if(q->head==-1)
        q->head=0;
    q->a[q->tail]=num;
    (q->tail) ++;
    if(q->tail ==q->cap)
    q->tail=0;
    return 0;
} 
```

出队功能：

```
 int deque(Que *q)
{
    if((q->head)==-1)
     return -1;

    int b= q->a[q->head];
    (q->head)++;
    if(q->head==q->cap)
        q->head=0;
    if(q->head==q->tail)
        q->head=-1;

    return b;
} 
```

head 是要出列的索引的位置，tail 是必须添加元素的索引。head 的初始值为 -1，tail 为 0，cap 为 5。这些值已由另一个函数设置。

@Klas Lindbäck 这是完整的代码：

```
#include <stdlib.h>
#include <stdio.h>
typedef struct
{   
int a[5];
    int tail;
    int head;
    int cap;
}Que;
int deque(Que *q)
{
    if((q->head)==-1)
     return -1;

    int b= q->a[q->head];
    (q->head)++;
    if(q->head==q->cap)
        q->head=0;
    if(q->head==q->tail)
        q->head=-1;

    return b;
}
void initialize(Que *q)
{
    q->head=-1;
    q->tail=0;
    q->cap=5;
}
int enque(Que *q,int num) 
{
    if((q->head)==(q->tail ))
        return -1;
    if(q->head==-1)
        q->head=0;
    q->a[q->tail]=num;
    printf("%d \n",q->a[q->tail]);
    (q->tail) ++;
    if(q->tail ==q->cap)
    q->tail=0;
    return 0;
}
int main()
{
    Que q;
    initialize(&q);
    int i=1;
    for(;i<=5;i++)
    {
        int num;
        printf("input a number: ");
        scanf("%d",num);
        enque(&q,num);
    }
    int c=q.a[0];
    printf("%d  %d  %d\n",q.a[2],c,q.a[3]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:53:42.443

我在您的 enque/deque 函数中找不到任何问题。问题出在其他地方。

我使用以下主要代码测试了您的代码：

```
int main(int argc, char**argv) {
  int var = 7456;
  Que q;
  q.head=-1; q.tail=0; q.cap=5;

  enque(&q, 12);
  enque(&q, 6);
  printf("First queue value =%d\n", deque(&q));
  return 0;
} 
```

输出是

```
First queue value =12 
```

**编辑：**

错误在这里：

```
 scanf("%d",num); 
```

将其更改为：

```
 scanf("%d", &num); 
```

# ruby - 返回块的整数#times 替代方案？

> ID：16061552
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:39.447
> 
> 标签：ruby

我想创建以下文本：

```
"text0text1text2text3text4text5" 
```

所以我尝试用 来做`.times`，但是我需要一个辅助变量来保存金额，因为`.times`返回它被执行的次数。

我可以这样做：

```
(0..5).inject(''){|a,b| a+"text#{b}"}
 => "text0text1text2text3text4text5" 
```

但是我觉得这段代码应该更简单。

那么，我必须完成哪些可读的替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:02:24.943

*请注意，要拥有从`0`to的数字范围，`5`您将需要一个`6-times`循环，而不是`5`.*

您不需要任何辅助变量：

```
6.times do |i|
    print "text#{i}"
end 
```

会工作得很好。该[`Integer#times`](http://ruby-doc.org/core-1.9.3/Integer.html#method-i-times)方法将块执行的次数传递给附加`0`块`n-1`。该类`Fixnum` [甚至没有](http://www.ruby-doc.org/core-2.0/Fixnum.html)（从 2.0 开始）`times`方法。

* * *

> 谢谢。[...]。但是，我不想打印文本，我想创建一个字符串。

那么最简单的方法是使用`::new`构造函数方法`Array`来创建一个临时的`5`字符串数组，然后将它们连接在一起：

```
string = Array.new(6) { |i| "text#{i}" }.join 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T11:45:20.863

最佳答案在@LeeJarvis 的评论中

```
5.times.map { |x| "text#{x}" }.join 
```

# sql - 如果 SQL Server 2008 上的链接服务器之间的连接失败

> ID：16061556
> 
> 赞同：1
> 
> 时间：2013-04-17T13:35:48.980
> 
> 标签：sql, sql-server-2008, tsql, linked-server

我在 2 个不同的 SQL Server 实例上有 2 个数据库，它们不在同一个本地网络区域中。

我需要的是当我对数据库 A 中的表 A 进行更改时，我想更新数据库 B 中的表 B。

所以我决定链接这些服务器，但我的问题是，如果服务器之间的连接丢失并且我在数据库 A 上获得更新/插入/删除，那么当连接再次可用时，如何在数据库 B 上应用这些更改？我会为此获得任何自动生成的日志吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:42:06.623

您应该将更新分成两部分（1-st - 用于第一台服务器，2-nd - 用于链接的服务器）并在单个事务中执行每个部分。如果第二个事务失败，请将您的更新参数插入到一些失败更新表中。安排此表每小时（或每天）尝试执行 UPDATE，并在成功时从失败更新表中删除更新记录。

**更新**

```
BEGIN TRANSACTION
BEGIN TRY
    --UPDATE
    COMMIT TRANSACTION
END TRY
BEGIN CATCH
    --INSERT INTO UpdateFail TABLE
    ROLLBACK TRANSACTION 
END CATCH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:43:09.743

这被称为离线应用程序...最近我做了这样的应用程序，如果没有与其他数据库的连接，它将离线运行，这意味着它将保存在本地数据库中，稍后当连接恢复时，我正在使用 openrowset 在其他数据库上传输数据作为表结构的一侧在两侧是相同的

我正在检查另一边是否存在该行然后我插入，否则我将更新我已经为我正在暂停连接参数的存储过程创建了存储过程

# c# - 如何以编程方式获取正在使用的仿真器模型

> ID：16061558
> 
> 赞同：0
> 
> 时间：2013-04-17T13:35:59.687
> 
> 标签：c#, visual-studio-2008, mobile, windows-mobile, compact-framework

我正在开发一个应用程序来处理不同分辨率的许多设备和模拟器，所以我有代码知道是真实设备还是模拟器，但我想知道正在执行什么模拟器（型号、类型）以正确的分辨率显示应用程序。

实际上，我使用的代码方法 GetOemInfo() 返回一个值为“Emulator”或设备型号的字符串，我只知道它是一个模拟器，而不是什么。

```
private static string GetOemInfo()
    {
        string oemInfo = new string(' ', 50);
        int result = SystemParametersInfo(SPI_GETOEMINFO, 50, oemInfo, 0);
        oemInfo = oemInfo.Substring(0, oemInfo.IndexOf('\0'));
        return oemInfo;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:15:01.167

模拟器没有任何“OEM 信息”，可以为您提供您所追求的东西。您必须通过检查操作系统版本、屏幕分辨率甚至可能某些 API 的可用性来推断它（如果您正在寻找区分 Pro 和 Standard 目标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:23:47.053

If screen size is not all you are after, here is a method I use to get the info for the device. It reads some data from the registry and some data from... well, you'll see.

```
private static string getName() {
  string name = null;
  using (RegistryKey key = Registry.LocalMachine.OpenSubKey("Ident", true)) {
    var name = key.GetValue("Name", [Unnamed]) as string;
  }
  if (String.IsNullOrEmpty(name)) {
    name = getDeviceID();
  }
  return name;
} 
```

So, now you need my `getDeviceID()`. Ugh. OK.

```
private const string COREDLL = "coredll.dll";
[DllImport(COREDLL)]
private static extern bool KernelIoControl(Int32 IoControlCode, IntPtr InputBuffer, Int32 InputBufferSize, byte[] OutputBuffer, Int32 OutputBufferSize, ref Int32 BytesReturned);

private static string getDeviceID() {
  // Reference: http://msdn.microsoft.com/en-us/library/aa446562.aspx
  byte[] data = new byte[256];
  Int32 OutputBufferSize = data.Length;
  Int32 BytesReturned = 0;
  // Call KernelIoControl passing the previously defined IOCTL_HAL_GET_DEVICEID parameter
  // We don’t need to pass any input buffers to this call
  // so InputBuffer and InputBufferSize are set to their null values
  bool retVal = KernelIoControl(IOCTL_HAL_GET_DEVICEID, IntPtr.Zero, 0, data, OutputBufferSize, ref BytesReturned);
  // If the request failed, exit the method now
  if (retVal) {
    // Examine the OutputBuffer byte array to find the start of the 
    // Preset ID and Platform ID, as well as the size of the PlatformID. 
    // PresetIDOffset – The number of bytes the preset ID is offset from the beginning of the structure
    // PlatformIDOffset - The number of bytes the platform ID is offset from the beginning of the structure
    // PlatformIDSize - The number of bytes used to store the platform ID
    // Use BitConverter.ToInt32() to convert from byte[] to int
    Int32 PresetIDOffset = BitConverter.ToInt32(data, 4);
    Int32 PlatformIDOffset = BitConverter.ToInt32(data, 0xc);
    Int32 PlatformIDSize = BitConverter.ToInt32(data, 0x10);

    // Convert the Preset ID segments into a string so they can be 
    // displayed easily.
    StringBuilder sb = new StringBuilder();
    sb.Append(String.Format("{0:X8}-{1:X4}-{2:X4}-{3:X4}-",
         BitConverter.ToInt32(data, PresetIDOffset),
         BitConverter.ToInt16(data, PresetIDOffset + 4),
         BitConverter.ToInt16(data, PresetIDOffset + 6),
         BitConverter.ToInt16(data, PresetIDOffset + 8)));

    // Break the Platform ID down into 2-digit hexadecimal numbers
    // and append them to the Preset ID. This will result in a 
    // string-formatted Device ID
    for (int i = PlatformIDOffset; i < PlatformIDOffset + PlatformIDSize; i++) {
      sb.Append(String.Format("{0:X2}", data[i]));
    }
    // return the Device ID string
    return sb.ToString();
  }
  return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:04:11.727

有几种方法可以获得屏幕尺寸，如果这就是你所追求的。

最完整的方法是使用`SystemMetrics`，它必须从“coredll.dll”中P/Invoked。

```
[DllImport("coredll.dll")]
public static extern int GetSystemMetrics(SYSTEM_METRICS nIndex); 
```

接下来，创建一个枚举类型，如下所示：

```
public enum SYSTEM_METRICS : int
{
  SM_CXSCREEN = 0,
  SM_CYSCREEN = 1,
  SM_CXVSCROLL = 2,
  SM_CYHSCROLL = 3,
  SM_CYCAPTION = 4,
  SM_CXBORDER = 5,
  SM_CYBORDER = 6,
  SM_CXDLGFRAME = 7,
  SM_CYDLGFRAME = 8,
  SM_CXICON = 11,
  SM_CYICON = 12,
  SM_CYMENU = 15,
  SM_CXFULLSCREEN = 16,
  SM_CYFULLSCREEN = 17,
  SM_MOUSEPRESENT = 19,
  SM_CYVSCROLL = 20,
  SM_CXHSCROLL = 21,
  SM_DEBUG = 22,
  SM_CXDOUBLECLK = 36,
  SM_CYDOUBLECLK = 37,
  SM_CXICONSPACING = 38,
  SM_CYICONSPACING = 39,
  SM_CXEDGE = 45,
  SM_CYEDGE = 46,
  SM_CXSMICON = 49,
  SM_CYSMICON = 50,
  SM_XVIRTUALSCREEN = 76,
  SM_YVIRTUALSCREEN = 77,
  SM_CXVIRTUALSCREEN = 78,
  SM_CYVIRTUALSCREEN = 79,
  SM_CMONITORS = 80,
  SM_SAMEDISPLAYFORMAT = 81,
  SM_CXFIXEDFRAME = 7,
  SM_CYFIXEDFRAME = 8
} 
```

有了这个框架，你可以简单地得到宽度，例如，如下：

```
int screenWidth = GetSystemMetrics(SYSTEM_METRICS.SM_CXSCREEN);
Console.WriteLine(String.Format("Screen X-res is {0}", screenWidth)); 
```

如果您想偷懒，简单的解决方案是在项目加载时简单地读取主窗体的宽度和高度。

当然，如果你所做的只是在调整表单之前读取宽度和高度，那么屏幕上显然会有一些闪烁。

# performance - 选择字段然后加入或加入然后选择字段？

> ID：16061559
> 
> 赞同：1
> 
> 时间：2013-04-17T13:36:09.617
> 
> 标签：performance, oracle, select, join

假设我需要加入 3 个表（`T1`, `T2`, `T3`），并且可以说这些表中的每一个都有 30 列和数百万条记录。获取相关字段然后加入结果或加入3个表然后获取相关字段会更快吗？

我将简化（假设 a、b、c 中的值是唯一的）：

（请，代码可能看起来不像我的意思，如果有人可以修复它，我将不胜感激）

选项1：

```
SELECT
  T1.a,
  T2.c
FROM
  T1,T2,T3
WHERE
  T1.a = T2.b
  AND T2.b = T3.c 
```

或者，选项 2：

```
SELECT 
  t_T1.a,
  t_T2.c
FROM
  (SELECT a FROM T1) t_T1,
  (SELECT b FROM T2) t_T2,
  (SELECT c FROM T3) t_T3
WHERE
  t_T1.a = t_T2.b
  AND t_T2.b = t_T3.c 
```

请假设在我正在处理的桌子上，每一秒都很重要，所以这可能看起来像一个愚蠢的例子，但我真的需要知道哪一个会更快。

顺便说一句，将 ORACLE 与 PLSQL 开发人员 10.0.2 一起使用。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:38:22.387

They probably resolve to the same optimised query, so there would be no difference.

SQL is a [fourth generation language](http://en.wikipedia.org/wiki/Fourth-generation_programming_language) so you should assume that forcing evaluation order is generally not going to work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:42:27.433

我会选择选项1。

通常，在 SQL 中，您希望对查询使用最紧凑的表示。这为优化器提供了重构查询的最大“自由度”。虽然您的选项 2 对大多数优化器来说可能不会有太大的麻烦，但在某些情况下，如果您将其发挥到极致，优化器将无法选择与您实际说明的路径不同的执行路径。

正如大卫所提到的，您不必指定执行顺序；选择选项 1 的另一个原因。

最后，人类必须能够维护 SQL，所以选择最简单的表示，在这种情况下也是选项 1。

# ms-access - 输入框的问题

> ID：16061562
> 
> 赞同：7
> 
> 时间：2013-04-17T13:36:24.883
> 
> 标签：ms-access, vba, ms-access-2007

我目前正在使用 MS Access VBA 中的 InputBoxes。我正在检查验证并处理用户如何通过按 OK 或 Cancel 按钮与 InputBox 交互。

如果我错了，请纠正我，但 InputBoxes 可以返回任何数据类型并默认返回一个字符串？例如：

```
Dim userInputValue As String

'Text to display, Title, Default Value
userInputValue = InputBox("Please enter a #", "Determine Limit", 10000)

If userInputValue = "" Then
    MsgBox ("You pressed the cancel button...")
End If 
```

如果用户按下取消按钮，这将运行良好。

但是当我把它换成这样的整数值时：

```
Dim userInputValue As Integer
'Text to display, Title, Default Value
userInputValue = InputBox("Please enter a #", "Determine Limit", 10000)

If userInputValue = 0 Then
    MsgBox ("You pressed the cancel button...")
End If 
```

我收到一个`Type Mismatch: Runtime Error '13'`为什么会这样？当我调试代码并查看返回的内容时，我发现`userInputValue`实际是 0，这就是我要检查的内容。那么 InputBox 实际上返回一个字符串的问题是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-17T15:19:26.407

这是一种捕获与对话交互的大多数结果的方法；

```
Dim value As String
value = InputBox("Please enter a #", "Determine Limit", 10000)

If (StrPtr(value) = 0) Then
    MsgBox "You pressed cancel or [X]"

ElseIf (value = "") Then
    MsgBox "You did not enter anything"

ElseIf (Val(value) = 0 And value <> "0") Then
    MsgBox "Invalid number"

Else
    MsgBox "You entered " & value

End If 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T13:43:19.313

如有疑问，请查看内置的 VBA 帮助 ;)

`InputBox()`返回一个字符串

你可以试试这个整数

```
Sub Sample()
    Dim Ret As String, userInputValue As Integer

    'Text to display, Title, Default Value
    Ret = InputBox("Please enter a #", "Determine Limit", 10000)

    If Ret = "" Then
        MsgBox ("You pressed the cancel button... or you pressed OK without entering anything")
    Else
        If IsNumeric(Ret) Then
            userInputValue = Val(Ret)
        Else
            MsgBox ("Incorrect Value")
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T13:43:19.400

`InputBox`无论用户输入的数字如何，都返回一个字符串。如果他们单击取消，它会返回一个空字符串。

在立即窗口中尝试此操作。

```
? TypeName(InputBox("Please enter a #", "Determine Limit", 10000))
String 
```

对于代码中的测试，请检查 的数值等价物是否`userInputValue`等于零。

```
If Val(userInputValue) = 0 Then
    MsgBox ("You pressed the cancel button...")
End If 
```

请注意，`InputBox`您无法区分用户是单击了取消还是删除了起始值 (10000) 并单击了确定。无论哪种方式，`InputBox`都返回一个空字符串 ("")。并且`Val("")`还返回零。如果这将是一个问题，请替换自定义表单来收集用户输入......这不像`InputBox`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-06T11:42:51.723

**注意：以下内容仅适用于 Excel。Application.InputBox 函数在 Access 中不可用：**

**如果用户单击取消，**Application.InputBox**将返回**“False” 。****

 **```
Dim userInputString As String
Dim userInputValue As Integer
'Text to display, Title, Default Value
userInputString = Application.InputBox("Please enter a #", "Determine Limit", 10000)
If userInputString = "False" Then
    MsgBox ("You pressed the cancel button...")
Else
    userInputValue = CInt(Trim(userInputString))
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-27T18:22:50.810

与其从 InputString 取回一个数字，不如将默认字符串设置为“_______________”。然后我可以测试是否输入了任何内容，并且“取消”键将返回一个空字符串。

我还添加了一个测试值“Allow_Empty_String”（真/假），因为有时我想要一个空字符串。

必须将“Flag_Msg_Err”重置为 False，因为“Msg_Err”将其设置为 true 以捕获来自循环的调用。

例程需要以 3 种方式之一响应： 1\. 如果按下“取消”按钮，则程序结束。2\. 如果按下“OK”按钮，IF ALLOW_EMPTY_STRING THEN 会给出一条消息并重新开始输入 ELSE 返回一个空字符串 END IF 3\. 该字符串已输入，然后返回 TRIM(STRING)。

# 代码：

`Function Input_String(Prog, Message, Optional Allow_Empty_String = False) ' 返回一个字符串或单词“Cancal”。' 2/28/19 创建。WML

```
If Trace Then Prog = Prog & "(*)"
Call Name_Put("Flag_Msg_Err", False)

Do
    Test_String = "_____________"
    Input_String = InputBox(Prompt:=Message, _
                            Default:=Test_String, Title:=Prog)

    Select Case Input_String

        Case "TRACE"
            ' for Debugging
            Old_Trace = Named("Flag_Trace")
            New_Trace = Not Old_Trace
            Call Name_Put("Flag_Trace", New_Trace)
            Msg = "TRACE is now set to " & New_Trace & "."
            Call Name_Put("Flag_Msg_Err", False)

        Case Test_String
            If Allow_Empty_String Then
                Msg = "You must enter something,|" & _
                      " or select CANCEL."
                Call Msg_Err(Prog, Msg, , True)
                Call Name_Put("Flag_Msg_Err", False)
            Else
                Input_String = ""
                Finished = True
            End If

        Case ""
            If Trace Then
               Stop: Exit Function
            Else
               End
            End

        Case Else
            ' If entered a space or clicked "Ok".
            Input_String = Trim(Input_String)
            Finished = True

    End Select

 Loop 
```

结束函数“输入字符串”**

# java - Cycle is detected in the object graph this will cause infinitely deep xml

> ID：16061563
> 
> 赞同：3
> 
> 时间：2013-04-17T13:36:26.420
> 
> 标签：java, jpa, jaxb, wsdl

enter code hereHi Guys me and some classmates are working on a project for school and are stuck with this error: a cycle is detected in the object graph this will cause infinitely deep xml.

This is our code

```
@Entity
public class Client extends User implements Serializable {
    @Temporal(javax.persistence.TemporalType.DATE)
    private Date birthdate;
    private String address;
    private String zipcode;
    private String city;
    private String phone;
    private String info;
    private boolean active;
    @OneToMany(mappedBy = "client")
    private List<Cartrack> cartrac 
```

And this is our cartrack object:

```
@Entity
public class Cartrack implements Serializable {

    @Id
    private String id;
    @OneToOne(  mappedBy = "cartrack", 
                cascade = CascadeType.ALL,
                fetch = FetchType.EAGER
            )
    private Vehicle vehicle;
    @ManyToOne
    private Client client; 
```

And last but not least the vehicle object:

```
@Entity
public class Vehicle implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String licenseNr;
    private boolean stolen;
    @OneToOne
    private Cartrack cartrack; 
```

All object have their setters and getters, and still after hours of research and reading tons of documentation we're still unable to fix the problem.

Our last hope is Stackoverflow!

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:19:34.210

问题解决了。

我们有一个双向关系，显然 XML 无法以我们需要的正确方式处理。因此，这可能更多地被视为人为错误，因为不需要这种关系。

通过删除这种关系，SOAP 能够再次发送数据。

感谢您与我们一起思考！

# solr - Apache Solr: Can I use solr stats component?

> ID：16061569
> 
> 赞同：0
> 
> 时间：2013-04-17T13:36:33.993
> 
> 标签：solr

I am using solr for indexing data. I need some statistics information like "max , min , stddev" from indexed data. I read about `SolrStatsComponent` and I used this too.

I read this line on `apache_solr_4_cookbook.pdf`

"Please be careful when using this component on the multivalued fields as it can be a performance bottleneck."

**My Solr Query**

```
http://localhost:8080/solr/daycore/select?q=*:*&stats=true&stats.field=login_attempts&rows=0 
```

Can I use this query?

**`schema.xml`**

```
<field name="login_attempts" type="long" indexed="true" stored="false"/> 
```

Is it affect solr performance?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:59:40.710

`login_attempts`您可以针对您定义的字段使用您指定的查询。它不是一个多值字段。多值字段将具有`multiValued="true"`架构中指定的属性，您没有该属性并定义为

> 字段可能包含每个文档的多个值，即如果它可以在文档中出现多次

有关更多信息，请参阅Solr wiki 上的[SchemaXml 。](http://wiki.apache.org/solr/SchemaXml)

# java - java中的无效字符常量

> ID：16061578
> 
> 赞同：8
> 
> 时间：2013-04-17T13:36:59.293
> 
> 标签：java

```
return (int) (feetPart) + '\' ' + inchesPart + '\''+'\''; 
```

为什么上述无效字符常量，这在 JavaScript 中完美运行。我想以英尺和英寸为单位显示高度，并且正在使用这个客户端，但是当我在服务器端使用它时，它会显示`Invalid character constant`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-17T13:38:52.037

> 为什么上面的无效字符常量

因为这部分：

```
'\' ' 
```

这是试图指定一个实际上是两个字符（撇号和空格）的*字符文字。*字符文字必须恰好是一个字符。

如果要指定“撇号空间”，则应改用字符串文字-此时不必转义撇号：

```
"' " 
```

你的整个陈述会更好：

```
return (int) (feetPart) + "' " + inchesPart + "''"; 
```

或`"`代替`''`英寸：

```
return (int) feetPart + "' " + inchesPart + "\""; 
```

请注意，我什至不清楚原始代码是否会*在*编译后执行您想要的操作，因为我怀疑它会对`feetPart`字符执行整数运算......

您的代码在 Javascript 中本来可以的，因为单引号和双引号都用于字符串文字。

# java - 未处理的异常类型 ParseException - Parse.com 示例实现

> ID：16061579
> 
> 赞同：0
> 
> 时间：2013-04-17T13:36:59.610
> 
> 标签：java, android, parsing, rest

我正在尝试扩展我当前的源代码以包含其他数据行（仅使用 textview:empty 可以正常工作）但是当我尝试添加 empty2 以允许显示更多数据时 - 我遇到了错误：

“Empty2 无法解析或不是字段”

即使我创建了一个名为 empty2 的文本视图

知道为什么会发生这种情况吗？

todo_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5sp"
    android:textSize="25sp" >
    <TextView
        android:id="@+id/android:empty2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />

<TextView
        android:id="@+id/android:empty3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
<TextView
        android:id="@+id/android:empty4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
<TextView
        android:id="@+id/android:empty5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />

</TextView>

package com.parse.demo;

import java.util.List;

import android.app.Dialog;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class ToDoListActivity extends ListActivity {
    private static final int ACTIVITY_CREATE = 0;
    private static final int ACTIVITY_EDIT = 1;

    public static final int INSERT_ID = Menu.FIRST;
    private static final int DELETE_ID = Menu.FIRST + 1;

    private List<ParseObject> todos;
    private Dialog progressDialog;

    private class RemoteDataTask extends AsyncTask<Void, Void, Void> {
        // Override this method to do custom remote calls
        protected Void doInBackground(Void... params) {
            // Gets the current list of todos in sorted order
            ParseQuery query = new ParseQuery("TestObject");
            query.orderByDescending("_created_at");

            try {
                todos = query.find();
            } catch (ParseException e) {

            }
            return null;
        }

        @Override
        protected void onPreExecute() {
            ToDoListActivity.this.progressDialog = ProgressDialog.show(ToDoListActivity.this, "",
                    "Loading...", true);
            super.onPreExecute();
        }

        @Override
        protected void onProgressUpdate(Void... values) {

            super.onProgressUpdate(values);
        }

        @Override
        protected void onPostExecute(Void result) {
            // Put the list of todos into the list view
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(ToDoListActivity.this,
                    R.layout.todo_row);
            for (ParseObject todo : todos) {
                adapter.add((String) todo.get("DataI"));
                adapter.add((String) todo.get("DataO"));
            }
            setListAdapter(adapter);
            ToDoListActivity.this.progressDialog.dismiss();
            TextView empty = (TextView) findViewById(android.R.id.empty);
            TextView empty2 = (TextView) findViewById(android.R.id.empty2);
            empty.setVisibility(View.VISIBLE);
            empty2.setVisibility(View.VISIBLE);
        }
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView empty = (TextView) findViewById(android.R.id.empty);
        empty.setVisibility(View.INVISIBLE);
        TextView empty2 = (TextView) findViewById(android.R.id.empty2);
        empty2.setVisibility(View.INVISIBLE);

        new RemoteDataTask().execute();
        registerForContextMenu(getListView());
    }

    private void createTodo() {
        Intent i = new Intent(this, CreateTodo.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);
        if (intent == null) {
            return;
        }
        final Bundle extras = intent.getExtras();

        switch (requestCode) {
        case ACTIVITY_CREATE:
            new RemoteDataTask() {
                protected Void doInBackground(Void... params) {
                    String DataI = extras.getString("DataI");
                    String DataO = extras.getString("DataO");
                    ParseObject todo = new ParseObject("Todo");
                    todo.put("DataI", DataI);
                    todo.put("DataO", DataO);
                    try {
                        todo.save();
                    } catch (ParseException e) {
                    }

                    super.doInBackground();
                    return null;
                }
            }.execute();
            break;
        case ACTIVITY_EDIT:
            // Edit the remote object
            final ParseObject todo;
            todo = todos.get(extras.getInt("position"));
            todo.put("DataI", extras.getString("DataI"));
            todo.put("DataO", extras.getString("DataO"));

            new RemoteDataTask() {
                protected Void doInBackground(Void... params) {
                    try {
                        todo.save();
                    } catch (ParseException e) {
                    }
                    super.doInBackground();
                    return null;
                }
            }.execute();
            break;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        boolean result = super.onCreateOptionsMenu(menu);
        menu.add(0, INSERT_ID, 0, R.string.menu_insert);
        return result;
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, DELETE_ID, 0, R.string.menu_delete);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case DELETE_ID:
            AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

            // Delete the remote object
            final ParseObject todo = todos.get(info.position);

            new RemoteDataTask() {
                protected Void doInBackground(Void... params) {
                    try {
                        todo.delete();
                    } catch (ParseException e) {
                    }
                    super.doInBackground();
                    return null;
                }
            }.execute();
            return true;
        }
        return super.onContextItemSelected(item);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case INSERT_ID:
            createTodo();
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Intent i = new Intent(this, CreateTodo.class);

        i.putExtra("DataI", todos.get(position).getString("DataI").toString());
        i.putExtra("DataO", todos.get(position).getString("DataO").toString());
        i.putExtra("position", position);

        startActivityForResult(i, ACTIVITY_EDIT);
    }

} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@+id/android:list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/android:empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
<TextView
        android:id="@+id/android:empty2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />

<TextView
        android:id="@+id/android:empty3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
<TextView
        android:id="@+id/android:empty4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
<TextView
        android:id="@+id/android:empty5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty" />
</LinearLayout> 
```

答案编辑后的来源：

```
import java.util.List;

import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

import android.app.Dialog;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class ToDoListActivity extends ListActivity {

    TextView empty;
    TextView empty2;
    private static final int ACTIVITY_CREATE = 0;
    private static final int ACTIVITY_EDIT = 1;

    public static final int INSERT_ID = Menu.FIRST;
    private static final int DELETE_ID = Menu.FIRST + 1;

    private List<ParseObject> todos;
    private Dialog progressDialog;

    private class RemoteDataTask extends AsyncTask<Void, Void, Void> {
        // Override this method to do custom remote calls
        public void setVisibility() {
               empty.setVisibility(View.VISIBLE);
               empty2.setVisibility(View.VISIBLE);  

        }
        protected void doInBackground(Void... params) {
            // Gets the current list of todos in sorted order
            ParseQuery query = new ParseQuery("TestObject");
            query.orderByDescending("_created_at");

            try {
                todos = query.find();
            } catch (ParseException e) {

                return;

            }

            runOnUiThread(new Runnable() {
                   public void run() {

            //      
                   }});
        }

        @Override
        protected void onPreExecute() {
            ToDoListActivity.this.progressDialog = ProgressDialog.show(ToDoListActivity.this, "",
                    "Loading...", true);
            super.onPreExecute();
        }

        @Override
        protected void onProgressUpdate(Void... values) {

            super.onProgressUpdate(values);
        }

        @Override
        protected void onPostExecute(Void result) {
            // Put the list of todos into the list view
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(ToDoListActivity.this,
                    R.layout.todo_row);
            for (ParseObject todo : todos) {
                adapter.add((String) todo.get("DataI"));
                adapter.add((String) todo.get("DataO"));
                adapter.add((String) todo.get("DataRSSI"));
                adapter.add((String) todo.get("DataSSID"));
                adapter.add((String) todo.get("DataTIME"));
                adapter.add((String) todo.get("DataRESTRICTED"));
            }
            setListAdapter(adapter);
            ToDoListActivity.this.progressDialog.dismiss();
        //  TextView empty = (TextView) findViewById(android.R.id.empty);
    //      empty.setVisibility(View.VISIBLE);

        }
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_new);

            empty = (TextView) findViewById(android.R.id.empty);
            empty.setVisibility(View.INVISIBLE);
        //    empty2 = (TextView) findViewById(android.R.id.empty2);
         //   empty2.setVisibility(View.INVISIBLE);

        new RemoteDataTask().execute();
        registerForContextMenu(getListView());
    }

    private void createTodo() {
        Intent i = new Intent(this, CreateTodo.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);
        if (intent == null) {
            return;
        }
        final Bundle extras = intent.getExtras();

        switch (requestCode) {
        case ACTIVITY_CREATE:
            new RemoteDataTask() {
                protected void doInBackground(Void... params) {
                    String DataI = extras.getString("DataI");
                    String DataO = extras.getString("DataO");
                    String DataRSSI = extras.getString("DataRSSI");
                    String DataSSID = extras.getString("DataSSID");
                    String DataTIME = extras.getString("DataTIME");
                    String DataRESTRICTED = extras.getString("DataRESTRICTED");
                    ParseObject todo = new ParseObject("Todo");
                    todo.put("DataI", DataI);
                    todo.put("DataO", DataO);
                    todo.put("DataRSSI", DataRSSI);
                    todo.put("DataSSID", DataSSID);
                    todo.put("DataTIME", DataTIME);
                    todo.put("DataRESTRICTED", DataRESTRICTED);
                    try { todo.save(); } catch (ParseException e) {
                    }

                    super.doInBackground();
                    return;
                }
            }.execute();
            break;
        case ACTIVITY_EDIT:
            // Edit the remote object
            final ParseObject todo;
            todo = todos.get(extras.getInt("position"));
            todo.put("DataI", extras.getString("DataI"));
            todo.put("DataO", extras.getString("DataO"));
            todo.put("DataRSSI", extras.getString("DataRSSI"));
            todo.put("DataSSID", extras.getString("DataSSID"));
            todo.put("DataTIME", extras.getString("DataTIME"));
            todo.put("DataRESTRICTED", extras.getString("DataRESTRICTED"));

            new RemoteDataTask() {
                protected void doInBackground(Void... params) {
                    try {
                        todo.save();
                    } catch (ParseException e) {
                    }
                    super.doInBackground();
                    return;
                }
            }.execute();
            break;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        boolean result = super.onCreateOptionsMenu(menu);
        menu.add(0, INSERT_ID, 0, R.string.menu_insert);
        return result;
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, DELETE_ID, 0, R.string.menu_delete);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case DELETE_ID:
            AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

            // Delete the remote object
            final ParseObject todo = todos.get(info.position);

            new RemoteDataTask() {
                protected void doInBackground(Void... params) {
                    try {
                        todo.delete();
                    } catch (ParseException e) {
                    }
                    super.doInBackground();
                    return;
                }
            }.execute();
            return true;
        }
        return super.onContextItemSelected(item);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case INSERT_ID:
            createTodo();
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Intent i = new Intent(this, CreateTodo.class);

        i.putExtra("DataI", todos.get(position).getString("DataI").toString());
        i.putExtra("DataO", todos.get(position).getString("DataO").toString());
        i.putExtra("DataRSSI", todos.get(position).getString("DataRSSI").toString());
        i.putExtra("DataSSID", todos.get(position).getString("DataSSID").toString());
        i.putExtra("DataTIME", todos.get(position).getString("DataTIME").toString());
        i.putExtra("DataRESTRICTED", todos.get(position).getString("DataRESTRICTED").toString());
        i.putExtra("position", position);

        startActivityForResult(i, ACTIVITY_EDIT);
    }

} 
```

问题

```
Description Resource    Path    Location    Type
Void methods cannot return a value  ToDoListActivity.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 56 Java Problem
The return type is incompatible with AsyncTask<Void,Void,Void>.doInBackground(Void[])   ToDoListActivity.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 47 Java Problem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:31:44.140

由于您正在更新 UI，因此您需要`runOnUiThread(...)`使用`AsyncTask`.

```
runOnUiThread(new Runnable() {
   public void run() {
      setVisibility();
   }
}); 
```

您需要在Activity中定义`setVisibility()`方法的位置。`ToDoListActivity`例如。

```
setVisibility() {
   empty.setVisibility(View.VISIBLE);
   empty2.setVisibility(View.VISIBLE);
} 
```

此外，最好在全局范围内声明 UI 对象，然后在`onCreate(...)`方法中实例化。例如。

```
public class ToDoListActivity extends ListActivity {
   ...
   TextView empty;
   TextView empty2;
   ...
   @Override
   public void onCreate(Bundle savedInstanceState) {
    ...
    empty = (TextView) findViewById(android.R.id.empty);
    empty.setVisibility(View.INVISIBLE);
    empty2 = (TextView) findViewById(android.R.id.empty2);
    empty2.setVisibility(View.INVISIBLE);
    ...
} 
```

**编辑**

您需要修改`onPostExecute(...)`AsyncTask 中的方法，如下所示：

```
protected void onPostExecute(Void result) {
// Put the list of todos into the list view
ArrayAdapter<String> adapter = new ArrayAdapter<String>(ToDoListActivity.this,
        R.layout.todo_row);
for (ParseObject todo : todos) {
    adapter.add((String) todo.get("DataI"));
    adapter.add((String) todo.get("DataO"));
    adapter.add((String) todo.get("DataRSSI"));
    adapter.add((String) todo.get("DataSSID"));
    adapter.add((String) todo.get("DataTIME"));
    adapter.add((String) todo.get("DataRESTRICTED"));
}
setListAdapter(adapter);
ToDoListActivity.this.progressDialog.dismiss();
/* REMOVE BELOW LINES */
//TextView empty = (TextView) findViewById(android.R.id.empty);
//empty.setVisibility(View.VISIBLE);
//TextView empty2 = (TextView) findViewById(android.R.id.empty2);
//empty2.setVisibility(View.VISIBLE); 
```

}

以及`runOnUiThread(...)`方法

```
runOnUiThread(new Runnable() {
   public void run() {
  setVisibility();
  /* REMOVE BELOW LINES */
  //empty.setVisibility(View.VISIBLE);
  //empty2.setVisibility(View.VISIBLE);
}
}); 
```

而且我在您的课堂上看不到该`setVisibility()`方法。`ToDoListActivity`

**更新**

```
protected Void doInBackground(Void... params) {
        // Gets the current list of todos in sorted order
        ParseQuery query = new ParseQuery("TestObject");
        query.orderByDescending("_created_at");

        try {
            todos = query.find();
        } catch (ParseException e) {

        }

        runOnUiThread(new Runnable() {
               public void run() {
                  setVisibility();
               }});

        return null; // RETURN STATEMENT HERE
    } 
```

# java - 自己的声纳插件 - 如何设置语言？

> ID：16061581
> 
> 赞同：2
> 
> 时间：2013-04-17T13:37:06.173
> 
> 标签：java, plugins, sonarqube, analysis, sonar-runner

我对 Sonar 比较陌生——尤其是在编写我自己的 Sonar 插件方面。经过一些成功的试验后，我现在陷入了困境。我编写了一个简单的插件，它只应该将源文件（*.abap -Files）传输到声纳服务器。

在我的插件中，我有一个 AbapLangauge（从 AbstractLangauge 扩展）

```
package sonarplugin;

import org.apache.commons.lang.StringUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.sonar.api.resources.AbstractLanguage;

public class AbapLanguage extends AbstractLanguage {
  public static final String DEFAULT_SOURCE_SUFFIXES = "abap";
  public static final String KEY = "sap";

  private String[] fileSuffixes;
  private static final Logger LOG = LoggerFactory.getLogger(AbapLanguage.class);

  public AbapLanguage() {   
    super(KEY, "sap");
    LOG.info("SETTING LANGUAGE TO SAP: " + KEY);
    fileSuffixes = createStringArray(null, DEFAULT_SOURCE_SUFFIXES);
  }

  public String[] getFileSuffixes() {
      return fileSuffixes;
  }

  private String[] createStringArray(String[] values, String defaultValues) {
    if (values == null || values.length == 0) {
      return StringUtils.split(defaultValues, ",");
    }
    return values;
  }

} 
```

我也有一个 SourceImporter

```
package sonarplugin;

import org.sonar.api.batch.AbstractSourceImporter;

public final class AbapSourceImporter extends AbstractSourceImporter {

public AbapSourceImporter(AbapLanguage language) {
    super(language);
}
} 
```

我将这两个类注册为扩展点。在我想用我在 sonar-project.properties 中设置的 sonar-runner 分析的测试项目中

```
sonar.language=sap 
```

但是当我启动声纳跑步者时，我得到了以下错误：

```
15:11:36.148 INFO  - -------------  Executing Project Scan
15:11:36.386 INFO  - ABAPIMPORTGERPLUGIN has just started.
15:11:36.924 INFO  - Install JDBC driver
15:11:36.929 INFO  - Apply project exclusions
15:11:36.937 WARN  - H2 database should be used for evaluation purpose only
15:11:36.937 INFO  - Create JDBC datasource for jdbc:h2:tcp://localhost:9092/sonar
15:11:37.051 INFO  - Initializing Hibernate
15:11:42.669 INFO  - -------------  Inspecting MeinTestprojekt
15:11:42.683 INFO  - Load module settings
15:11:43.062 INFO  - ABAPIMPORTGERPLUGIN has just started.
15:11:43.244 INFO  - SETTING LANGUAGE TO SAP: sap
INFO: ------------------------------------------------------------------------
INFO: EXECUTION FAILURE
INFO: ------------------------------------------------------------------------
INFO: Total time: 15.544s
INFO: Final Memory: 10M/158M
INFO: ------------------------------------------------------------------------
ERROR: Error during Sonar runner execution
ERROR: Unable to execute Sonar
ERROR: Caused by: You must install a plugin that supports the language 'sap' 
```

有人可以帮助我吗？为什么 sonar-runner 说没有支持语言“sap”的插件？我的插件配置不对吗？

感谢高级伯恩哈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:00:31.090

在您的具体情况下，问题来自您没有为新语言定义任何规则存储库（甚至是空的），因此 Sonar 认为您的新语言不受支持。

更一般地说，对您来说最好的选择是查看我们为 Sonar 开发的一些开源语言插件。例如，你可以去看看[Javascript 插件](https://github.com/SonarCommunity/sonar-javascript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T14:48:34.200

可能发生此错误的其他一些原因：

1.  您没有在插件类的 getExtensions() 方法中定义您的语言类
2.  在您的 SonarQube 网站中，没有为您的语言创建配置文件。单击 Quality-Profiles --> 选择您的语言旁边的创建按钮 --> 单击创建。然后，单击“设置为默认值”。（注意：只有当 getExtensions() 已按照 1 中的描述正确实施时，您的语言才会出现。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T19:44:28.213

刚刚经历了同样的过程，似乎需要的粗略的东西（并由您的插件的`getExtensions()`方法宣传）是：

*   的子类`org.sonar.api.resources.AbstractLanguage`- 您的构造函数对 super 的调用将语言代码及其名称作为两个参数提供
*   一个实现`org.sonar.api.server.rule.RulesDefinition`
*   它的子类`org.sonar.api.profiles..ProfileDefinition`返回一个 RulesProfile 对象，其中引用了您的语言代码
*   加上您的插件需要实际执行任何有用工作的其他扩展点的任何实现——`org.sonar.api.batch.Sensor`至少可能是一个实现

# java - Jackson - 将 JSON 字符串字段映射到只有一个字段（字符串）的类/pojo

> ID：16061587
> 
> 赞同：1
> 
> 时间：2013-04-17T13:37:17.563
> 
> 标签：java, json, jackson

我正在编写一个 JSON 接口/库来使用 Bugzilla 的 web 服务。

这可能使用注释或其他东西吗？还是我要为每个这样的实例编写一个自定义反序列化器？

我试过做一些研究，发现了一些关于 Value Instantiator 或使用构造函数的信息，但是使用构造函数是不是像反 bean 一样？我发现使用新功能的文档很少或难以理解。

例子：

```
public class Bug{
  // Bug info, strings, ints, yadda yadda.
 private User creator;   // creator of the bug, json is like   {"creator":"blahblah@email.com"}
}

public class User{
 private String username;
}
//insert setter/getter. 
```

我对 One 字段使用 pojo 的原因是因为这个 User 类被另一个具有更多字段的类扩展。虽然我可以实现一个构造函数来实现这种效果，但这样做意味着我必须为所有其他子类实现相同的构造函数。我觉得有一些类似于 @JsonValue 的东西，但用于设置（我在我的 setter 上尝试了 JsonCreator，但仍然遇到与我在下面遇到的相同的错误）。

“无法从字符串值实例化类型 [简单类型，用户类] 的值；没有单字符串构造函数/工厂方法”

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:45:37.587

使用@JsonCreator 进行反序列化，使用@JsonValue 进行序列化。已经测试了代码。请确保 getJsonString() 是公共方法。

例如：

```
public class User{
    private String username;

    @JsonValue
    public String getJsonString() {
         return username;
    }

    @JsonCreator
    private static User parseJson(String jsonStr) {
        User u = new User();
        u.username = jsonStr;
        return u;
    }

    public static void main(String[] args) {
        User u = new User();
        u.userName = "Niraj";

        ObjectMapper m = new ObjectMapper();
        String jsonString = m.writeValueAsString(u);
        User u1 = m.readValue(jsonString, User.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:08:24.270

您不需要使用 @JsonCreator 或 @JsonValue 或构造函数，Jackson 将使用 javabean 方法处理 OTTB：试试这个：

```
public class User{
    private String username;

    public void setUsername(String username) {
        this.username = username;
    }

    public String getUsername() {
        return username;
    }

    public static void main(String[] args) throws Exception {
        User u = new User();
        u.setUsername("name");

        ObjectMapper m = new ObjectMapper();
        String userString = m.writeValueAsString(u);
        System.out.println(userString);
        User u1 = m.readValue(userString, User.class);
        System.out.println(u1.getUsername());
    }
} 
```

# javascript - Javascript onSubmit 函数自动执行

> ID：16061588
> 
> 赞同：2
> 
> 时间：2013-04-17T13:37:20.433
> 
> 标签：javascript, jquery, html

我的验证代码有问题......我得到了一个包含两个字段（用户、密码）和一个 jQuery 函数的表单，该函数在提交时执行一个函数：

```
jQuery(document).ready(function($) {
    $('#login-form').on('submit', validateData());

    function validateData() {
        userInput = $('#in-user');
        userCntrl = userInput.closest('.control-group');
        passInput = $('#in-pass');
        passCntrl = passInput.closest('.control-group');

        userCntrl.addClass('error'); // This executes on page load, not on submit

        formSubmit = false;

        console.log( userInput.val() ); // This logs on page load, not on submit

        return formSubmit;
    }
}); 
```

事实是这段代码在页面加载时运行，但 onSubmit 没有任何反应......

我确定这很容易，但我看不到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:38:56.370

你需要：

```
$('#login-form').on('submit', validateData); 
```

注意后面没有括号`validateData`。

正如您所拥有的那样，您在页面加载时**调用**该函数并将其返回值 ( `false`)设置`submit`为表单的处理程序。

（你应该在定义函数*之后这样做。）*`validateData`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:38:36.230

应该：

```
$('#login-form').on('submit', validateData); 
```

# eclipse - Remote debug in Tomcat 6

> ID：16061590
> 
> 赞同：7
> 
> 时间：2013-04-17T13:37:28.830
> 
> 标签：eclipse, gwt, tomcat6

Does anyone know the steps to configure remote debugging in Tomcat 6 for GWT applications?

IDE - Eclipse

Sever - Tomcat6

Tech - GWT

I have gone through the following link, but it was not clear for me.

[http://wiki.apache.org/tomcat/FAQ/Developing](http://wiki.apache.org/tomcat/FAQ/Developing)

**I have done the following things:**

1.  Placed the project war in 'Catalina_Home/webapps/project' which I wanted to debug remotely.
2.  Opened tomcat6w.exe and pasted java option under java tab as follows:

    `-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n`

3.  Clicked on start. After starting the server, I have opened eclipse the configure the remote debugging with port 8000 and click on Debug.

4.  I have got the error message back saying that `Failed to connect to remote VM. Connection refused`.

Is there anything else that I am missing here. Please correct me if I am wrong any where.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T21:34:33.697

使用命令行，转到您的 Tomcat 文件夹`..\Tomcat6\bin`并编写命令：

```
catalina jpda start 
```

等到 Tomcat 运行（你会看到类似的东西）：

![tomcat 启动](https://i.stack.imgur.com/03b0L.png)

然后在日食中：`Debug -> Debug configuration -> Remote Java Application -> New`

![调试配置](https://i.stack.imgur.com/1L3CG.png)浏览项目并调试！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-24T10:55:29.950

使用以下内容：

`"-Xdebug"`在两个不同的行中，`"-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n"`在 tomcat6w.exe > Java 选项卡 > Java 选项（在其他所有内容之前）中没有 qoutes 并应用。

然后，您只需在 Eclipse 的调试配置中为您的项目配置一个远程 Java 应用程序配置文件，并将其指向相同的 jpda 端口。

# c# - Ajax 和 MVC 4（发布请求）

> ID：16061594
> 
> 赞同：1
> 
> 时间：2013-04-17T13:37:47.873
> 
> 标签：c#, jquery

我想向控制器发送一个简单的字符串（即 xml ）。我不知道为什么没有命中 Visual Studio 中的断点。

这是jQuery代码：

```
$.ajax({
            type: "POST",
            url: "BasicWizard/show",
            data: "xml="+xmlResult,
            success: function (data) {
                console.log("Oh yeah !");
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log(textStatus, errorThrown);
            }

            }); 
```

这是我在控制器中的方法：

```
 [HttpPost]
    public ActionResult show(string xml)

   {
       try
       {
           ViewBag.xml = xml;
           return PartialView("showXML");
       }
       catch (Exception)
       {
           return Content("error");
       }

    } 
```

我在控制台中只有一个 500 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:40:57.973

尝试这个 ：-

```
data: "{'xml':'" + xmlResult+ "'}", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:41:58.963

帖子数据格式不正确。尝试传入`encodeURIComponent(xmlResult)`而不是仅仅传入`xmlResult`. 这将转义`=`在 post 值中无法正常工作的字符和其他字符。

# c# - Warning and Extending User Session

> ID：16061597
> 
> 赞同：0
> 
> 时间：2013-04-17T13:37:53.083
> 
> 标签：c#, javascript, asp.net, .net, session

I use basic authentication for my website and there is an issue when the user is on a form that takes a while to fill out, their session may end and upon clicking "save" the work will disappear because their session is no longer valid.

I tried the following:

set the session timeout to 1 minute in web.config:

> ```
> <system.web>
> <sessionState timeout="1"></sessionState> 
> ```

added the following javascript to my page, which is supposed to extend the session every 30 seconds:

```
AlertTimeOut = 30000; // Milliseconds, Alert Message       
WarnTimeOut = 30000; //  Warn Message before 30 sec of session out
setTimeout("WarnUser();", WarnTimeOut);
//setTimeout("AlertUser();", AlertTimeOut);
function AlertUser() {
    alert('Your session has been expired, please save your data outside the system [copy the data in word document].');
}
function WarnUser() {
    var currentTime = new Date()
    var hours = currentTime.getHours()
    var minutes = currentTime.getMinutes()
    if (minutes < 10) {
        minutes = "0" + minutes
    }
    if (hours > 11) {
        var tempTime = hours + ":" + minutes + "PM"
    } else {
        var tempTime = hours + ":" + minutes + "AM"
    }
    var ans = confirm("Your login session is about to expire in 5 minutes.Do you want to extend it? - Date: " + tempTime);

    if (ans) {
        var oImage = new Image;
        oImage.src = "tempdummy.gif" + Math.random();
        setTimeout("WarnUser();", WarnTimeOut);
    }
    else {
        setTimeout("AlertUser();", AlertTimeOut);
    }
} 
```

here is a snippet of my main.aspx.cs page, after waiting for the javascript pop up to come up 2 times, i refresh the page, and yes, the `session["userid"]` is `null`. I debugged the javascript and it does hit every line of code like it should.

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (Session["userid"] == null)
        {
           // the session is no longer valid, i guess the javascript didn't work :(
            //redirect user to an error page
        }
        else
         {
                username = (string)Session["userid"];
                // check user permission, and populate the form here
         }
     } 
```

i found quiet a few example online that use similar code to:

```
var oImage = new Image;
oImage.src = "tempdummy.gif" + Math.random(); 
```

to extend session, but i guess i'm just not understanding how it works. is this an image i'm supposed to have somewhere eon my aspx page? how does it work? because it doesn't for me

---- || ---- || ---- || ---- || ---- || ---- || ---- ||

Update:

I also tried the following:

created a refresh_session.aspx page with only 1 line of code in it:

```
protected void Page_Load(object sender, EventArgs e)
    {
        Response.Write("success");
    } 
```

I then try to POST to that page to refresh the seesion (as per this article:[http://naspinski.net/post/Automatically-refresh-your-users-Session-behind-the-scenes-using-jQuery-and-AspNet.aspx](http://naspinski.net/post/Automatically-refresh-your-users-Session-behind-the-scenes-using-jQuery-and-AspNet.aspx))

my updated javascript looks like:

```
 AlertTimeOut = 30000; // Milliseconds, Alert Message       
    WarnTimeOut = 30000; //  Warn Message before 30 sec of session out
    setTimeout("WarnUser();", WarnTimeOut);

    function TimedOut() {
        $.post("refresh_session.aspx", null,
        function (data) {
            if (data == "success") {
               setTimeout("TimedOut();", WarnTimeOut);
alert('refreshed');
            }
            else { alert('not refreshed'); }
        }
      );
    }

    function AlertUser() {
        alert('Your session has been expired, please save your data outside the system [copy the data in word document].');
    }
    function WarnUser() {

        var ans = confirm("Your login session is about to expire in 5 minutes.Do you want to extend it? ");

        if (ans) {
            var oImage = new Image;
            oImage.src = "tempdummy.gif";
            TimedOut() ;
            setTimeout("WarnUser();", WarnTimeOut);
        }
        else {
            setTimeout("AlertUser();", AlertTimeOut);
        }
    } 
```

the breakpoint in frefresh_session is hit, but then when I refresh my page it is still NULL in my default.aspx :((((((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:55:10.547

这个想法是，每次用户在弹出窗口中单击“确定”时，您都会从网络服务器获取图像文件，从而扩展会话。

您的网络服务器上有图像“tempdummy.gif”吗？

我仍然对片段有点困惑：

```
var oImage = new Image;
oImage.src = "tempdummy.gif" + Math.random(); 
```

我不明白他们为什么在虚拟图像名称后面放一个随机数。在尝试获取图像时，您可能会遇到 404。据我所知，进行导致 404 的 http 调用不会延长会话超时。

我会尝试从网络服务器获取一个真实的（非常小的）小图像，看看这是否能让你的会话保持打开状态。

# php - Order posts by last comment date

> ID：16061598
> 
> 赞同：0
> 
> 时间：2013-04-17T13:38:00.497
> 
> 标签：php, codeigniter

I'm trying to developed some sort of ticket system, but I'm having trouble with a small part.

So, we have discussions, stored in the "discussions" table which are order by UNIX timestamp column "created_at"

Then, I have "comments" table, which has the tickets responses.

What I want to do is order the tickets by the recent activity basically.

I'm not that good at joining tables in queries, this is what I tried but it doesn't work sadly: /

```
SELECT *
FROM (`discussions`)
JOIN `comments` ON `comments`.`object_id` = `discussions`.`id`
WHERE `project_id` = '2'
  AND `comments`.`type` = 'discussion'
ORDER BY `comments`.`created_at` ASC,
         `discussions`.`created_at` DESC 
```

I'm using CodeIgniter and this is the Active Record code

```
$query = $this->db->where('project_id', $id)
                        ->join('comments', 'comments.object_id = discussions.id')
                        ->where('comments.type', 'discussion')
                        ->order_by('comments.created_at', 'asc')
                        ->order_by('discussions.created_at', 'desc')
                        ->get('discussions'); 
```

Thanks a lot for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:06:24.797

试试这个查询

```
SELECT * FROM discussions d, comments c
where c.object_id = d.id
and project_id = '2' 
AND c.type = 'discussion' 
ORDER BY c.created_at,d.created_at desc 
```

# vba - 使用变量作为工作表名称

> ID：16061599
> 
> 赞同：1
> 
> 时间：2013-04-17T13:38:02.927
> 
> 标签：vba, excel

尝试将变量用于工作表名称时，我收到 RunTime 13 错误，如下所示：

```
Sub inputdata()

Set asheet1 = ThisWorkbook.Worksheets("input").Range("D12")
Set rangeDate = ThisWorkbook.Worksheets("input").Range("inputdate")

Range("F12:M12").Copy
Sheets(asheet1).Select 
```

它在 Sheets(asheet1).Select 行上出错

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:43:00.720

asheet1 不是字符串，您正在为它分配一个范围对象。您应该将 asheet1 声明为字符串并将此行更改为

```
Dim asheet1 as string
asheet1 = ThisWorkbook.Worksheets("input").Range("D12").Value 
```

那应该使它起作用！

编辑

从字符串 var 中删除了 Set 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:42:23.627

```
Option Explicit

Sub inputdata()
dim inputSheet as WorkSheet
dim aCellOnInputSheet as Range
dim inputDateCell as Range
dim userSheetName as String

Set inputSheet = ThisWorkbook.Worksheets("input") 

Set aCellOnInputSheet = inputSheet.Range("D12")
userSheetName = aCellOnInputSheet.Value
Set inputDateCell = inputSheet.Range("inputdate")

Range("F12:M12").Copy
Sheets(userSheetName).Select

End Sub 
```

编辑：几点
1）`Option Explicit`是必须的。
2) 定义变量并适当命名。即定义变量，该变量引用名称为范围的单元格/范围，而不是`aSheet`- 它使读者感到困惑

# ios - 如何以编程方式获取 ios 中的默认登录邮件 ID？

> ID：16061610
> 
> 赞同：1
> 
> 时间：2013-04-17T13:38:28.053
> 
> 标签：ios, email, default

我想从 iOS 设备中默认设置的电子邮件 ID 发送图像。通过该电子邮件 ID，我想将图像发送给其他人。这可能吗？请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:56:34.850

抱歉，iOS SDK 不会公开该信息。您必须使用自定义界面来询问用户的电子邮件。或者使用[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/)类。

# google-apps-script - 如何在电子表格而不是工作表上设置触发器“onOpen”？（关注最后一行）

> ID：16061612
> 
> 赞同：1
> 
> 时间：2013-04-17T13:38:29.537
> 
> 标签：google-apps-script, google-sheets, triggers, google-sheets-api

我想将最后一行集中在特定的工作表上（或者如果可能的话，集中在每个工作表上）所以这是我在工作`onOpen`表上触发的函数：

```
function FocusLastRows() {
var spsheet = SpreadsheetApp.getActiveSpreadsheet();
var sheet = spsheet.getSheetByName("Usuelle_2013");
var rowInt = sheet.getLastRow();
var colInt = sheet.getLastColumn();
var range = sheet.getRange(rowInt, colInt)
sheet.setActiveRange(range)
} 
```

此事件有效，但如果我的第一个加载的工作表与我希望它关注的工作表不同，它只会传送到另一张工作表。最好`.onOpen`在电子表格上设置一个。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:32:12.710

我找到了一个很好的选择。它是带有功能链接的自定义菜单。

```
 //Pierre-luc Des. Script

//Build your menu 
function setMenu() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var menubuttons = [ {name: "Dernière ligne usuelle", functionName:  "GOTOLastRow}];
    ss.addMenu("Outils", menubuttons);
} 

function GOTOLastRow() { 
var spsheet = SpreadsheetApp.getActiveSpreadsheet();
var currentTime = new Date();
var sheet = spsheet.getSheetByName("Usuelle_" + currentTime.getFullYear());
var rowInt = sheet.getLastRow();
var colInt = sheet.getLastColumn();
var range = sheet.getRange(rowInt, colInt);
sheet.setActiveRange(range);

} 
```

现在我将有一个可点击的菜单“Outils”，它可以让我执行该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:08:47.960

这相当不雅，但也许尝试检查激活的工作表是否是目标工作表？像这样的东西：

```
function FocusLastRows() {
var spsheet = SpreadsheetApp.getActiveSpreadsheet();
var sheet = spsheet.getSheetByName("Usuelle_2013");
  if (sheet == spsheet) {
    var rowInt = sheet.getLastRow();
    var colInt = sheet.getLastColumn();
    var range = sheet.getRange(rowInt, colInt);
    sheet.setActiveRange(range);
  }
} 
```

[Google Apps 脚本文档](https://developers.google.com/apps-script/overview)似乎表明您需要自定义库来获取除提供的触发事件之外的任何其他触发事件，而且我不确定它是否在原则上仅在激活某个特定工作表时才可能触发。

我认为使用 if 比较检查工作表是下一个最简单的解决方案。

# python - 如何使用 python 从任意字符串创建 CSS 标识符？

> ID：16061617
> 
> 赞同：0
> 
> 时间：2013-04-17T13:38:45.407
> 
> 标签：python, regex, django

在处理 Django 模板标签时，我发现自己需要获取一个字符串并将其转换为 CSS 标识符，以便它可以成为 html 元素的类属性的一部分。问题是字符串可以包含空格，这使得它无法用作 CSS 标识符，并且它也可以包含标点符号。

我的想法是使用正则表达式撕掉好的部分，然后将它们重新组合在一起，但我不知道如何表达重复的组模式。这是我所拥有的

```
to_css = re.compile(r"[^a-z_-]*([a-z0-9_-]+[^a-z0-9_]*)+", re.IGNORECASE)
@register.filter(name='as_css_class')
def as_css_class(value):
    matches = to_css.match(value)
    if matches:
        return '-'.join(matches.groups())
    return "" 
```

问题来与你这样做：

```
as_css_class("Something with a space in it") 
```

你得到

```
'it' 
```

我希望 + 将适用于（组），但显然它没有做我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:49:54.907

您可以[`slugify`](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.text.slugify)为此使用：

```
from django.template.defaultfilters import slugify
slugify("Something with a space in it") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:50:01.893

您的正则表达式将匹配整个字符串，并且捕获的唯一组将是“它”（因此是结果）。捕获组将只保留它捕获的最后一个字符串。您无法使用一个正则表达式捕获任意数量的字符串。

但是，您可以做的是使用全局修饰符`g`（或者`re.findall`我相信只是在 Python 中）。就像是：

```
re.findall(r'[\w-]+'); 
```

然后加入结果（或多或少，我的 Python 有点生锈了）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T13:42:47.907

它需要是一个CSS类吗？

```
<div data-something="Anything you like provided it's HTML escaped"> ... </div> 
```

```
div[data-something="Anything you like provided it's HTML escaped"] {
    background: red;
} 
```

可以说，您不应该将任意数据硬塞到课程中，因为您可能会与现有课程发生冲突。数据属性允许您指定具有名称冲突的信息。

# ruby-on-rails - 如何填充设计用户

> ID：16061623
> 
> 赞同：4
> 
> 时间：2013-04-17T13:39:01.120
> 
> 标签：ruby-on-rails, devise

我想用假数据填充数据库，使用 faker 和 populator gem。使用 Devise 生成了一个模型用户。

这是我的 rake 文件

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    [User, Article].each(&:delete_all)
    password = "password"

    User.populate 20 do |user|
      user.name = Faker::Name.name
      user.email = Faker::Internet.email
      user.password = password
      user.password_confirmation = password
      Article.populate 5 do |article|
        article.user_id = user.id
        article.title = Populator.words(1..3).titleize
        article.content = Populator.sentences(2..10)
        article.created_at = 2.years.ago..Time.now
      end
    end

  end
end 
```

当我运行 rake db:populate 会引发以下问题

```
rake aborted!
undefined method `password=' for #<Populator::Record:0xa179d14>
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/record.rb:64:in `method_missing'
    /home/sunloverz/RubymineProjects/socialnews/lib/tasks/sample_date.rake:10:in `block (3 levels) in <top (required)>'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:53:in `call'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:53:in `block in build_records'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:50:in `times'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:50:in `build_records'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:43:in `block in populate'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:29:in `remember_depth'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/factory.rb:42:in `populate'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/populator-1.0.0/lib/populator/model_additions.rb:25:in `populate'
    /home/sunloverz/RubymineProjects/socialnews/lib/tasks/sample_date.rake:6:in `block (2 levels) in <top (required)>'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
    Tasks: TOP => db:populate
    (See full trace by running task with --trace) 
```

怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-22T01:57:11.940

Populator 不加载 ActiveRecord 实例；所以任何验证、回调、嵌入式方法都不起作用。相反，它加载自己的[Record](http://populator.rubyforge.org/classes/Populator/Record.html)对象，使用列属性和纯 SQL 来提高性能。

另一方面，Devise 不会创建 :password 列，它会创建 encrypted_pa​​ssword 列并执行幕后的所有逻辑，如果您想深入了解设计代码，请查看此[链接。](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable#valid_password?-instance_method)

解决方法：我们需要调用password_digest对给定的密码进行加密，然后直接设置encrypted_pa​​ssword，但是这个[方法](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable#password_digest-instance_method)是受保护的，不能在rake内部调用。相反，我们将使用“新”方法来触发 password_digest，因此您的代码将是这样的：

```
password = "password"

User.populate 20 do |user|
  user.name = Faker::Name.name
  user.email = Faker::Internet.email
  user.encrypted_password = User.new(:password => password).encrypted_password
  # rest of your code here      
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:55:07.367

确保您的模型（在您的情况下为表）`actually`有一个名为`"password"`.

如果是这样，那么，尝试检查它是否有`attr_accessible :password`

# ios - 识别 UIStoryboard

> ID：16061624
> 
> 赞同：6
> 
> 时间：2013-04-17T13:39:03.107
> 
> 标签：ios, uistoryboard

你如何识别 UIStoryboard？

该类具有创建和实例化的方法，但我没有看到带有类似`name`. 例如

获取故事板对象

```
+ storyboardWithName:bundle: 
```

实例化 Storyboard 视图控制器

```
– instantiateInitialViewController
– instantiateViewControllerWithIdentifier: 
```

有什么建议么？

==== 更新

我希望有类似`self.storyboard.name`or的东西`[self.storyboard description]`，例如：

```
NSLog(@"This Storyboard is: %@", self.storyboard.name); 
```

也许这不是注定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:19:04.797

您可以在项目导航器中通过名称来识别故事板：

![在此处输入图像描述](https://i.stack.imgur.com/w71a5.png)

您可以通过在界面构建器的身份检查器中设置其故事板 ID 来从故事板中识别视图控制器：

![在此处输入图像描述](https://i.stack.imgur.com/Myr8e.png)

一旦你有了这些，你就可以通过你的代码访问它们：

```
UIStoryboard *iPhoneStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
ViewController *firstViewController = [iPhoneStoryboard instantiateViewControllerWithIdentifier:@"FirstViewController"]; 
```

# java - Android cocos2d 将精灵适配到屏幕上

> ID：16061626
> 
> 赞同：0
> 
> 时间：2013-04-17T13:39:08.043
> 
> 标签：java, android, cocos2d-iphone, ccsprite

我用在 android 上移植的 cocos2d 制作了一个游戏，我正在尝试拉伸 CCSprite 以适应屏幕。[我在 cocos2d android 中](https://stackoverflow.com/questions/15024927/images-handling-in-cocos2d-android/15085820#15085820)创建了图像处理的答案？但这种方式对应用程序的大小造成了很大的打击。你还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:48:39.570

您是否尝试过更改精灵的比例？您可以计算精灵和屏幕尺寸之间的因子，并将其应用于精灵比例。

# android - 是函数 tcsetattr() 映射到文件描述符或物理端口

> ID：16061628
> 
> 赞同：0
> 
> 时间：2013-04-17T13:39:13.180
> 
> 标签：android, linux, serial-port

我在我的android设备和232设备之间开发232通信时遇到了一个非常奇怪的问题。我想在我的 MCU 和 232 设备之间建立通信，232 设备的波特率为 115200。

我所做的如下：我`open()`一个端口`ttyO0`并获得了一个文件描述符`fd1`。我`tcsetattr(fd1,TCSAFLUSH,termiosA)`用来映射`termiosA`到`fd1`. `termiosA`波特率 9600 所以它与我的 232 设备不兼容。

后来我破坏了之前创建的内容，并通过更改`fd1`为`fd2`和`termiosA`来再次执行上述过程`termiosB`。`termiosB`波特率115200 。

但是，我发现它仍然无法正常工作。我猜原因是该`tcsetattr()`函数实际上是在物理端口和设置之间进行映射，而不是在文件描述符和设置之间进行映射。所以我的 CPU 中的实际物理端口被映射到 first 的设置，并且由于某种原因`termiosA`没有再次更改。`termiosB`因此 MCU 和 232 设备之间的通信失败。

# opencv - 需要帮助安装 GNU Scientific Library for Lisp(GSLL)

> ID：16061633
> 
> 赞同：3
> 
> 时间：2013-04-17T13:39:24.573
> 
> 标签：opencv, common-lisp, neural-network, sbcl, gsl

我使用 Emacs\Slime\SBCL\QuickLisp\Cygwin（Cywgin 的新手，我对此一无所知）我，根据这个 GNU 链接[http://common-lisp.net/project/gsll/](http://common-lisp.net/project/gsll/)，尝试按照以下说明进行操作下载和安装部分：

“您需要确保安装了与 GNU Scientific Library (GSL) 和 libffi 相关的库和头文件；您的发行版可能将这些命名为 libgsl0-dev 和 libffi-dev。一旦安装它们并加载了 quicklisp 文件：运行（ql：快速加载“gsll”）“

但它不工作。运行时我在 emacs 中收到此错误消息 (ql:quickload "gsll") Unable to load any of the alternatives: ("libffi-6.dll" "libffi-5.dll" "libffi.dll") [Condition of type CFFI：加载外国图书馆错误]

我已经正确安装了 quicklisp，我一直在使用它，所以我知道它不是那个....我不太了解上述网站摘录的这一部分（上图）

“您的发行版可能将这些命名为 libgsl0-dev 和 libffi-dev。” 一旦它们被安装并且你已经加载了 quicklisp 文件”

好吧，我确实有点，quicklisp似乎无法用“（ql：system-apropos“libffi”）”或“（ql：system-apropos“libffi”）”找到它们，网站（上面的链接）也命名了这些依赖项，我认为在这段摘录中：

“要求

GSLL 应该在任何支持以下功能的 Common Lisp 实现和平台组合中工作：

```
GSL
CFFI and cffi-grovel, version 0.11.0 or newer; callbacks and foreign-funcall must be supported.
trivial-garbage
Antik
ASDF
Osicat
lisp-unit, (Optional) necessary to run the tests
FSBV, (Optional) necessary for functions using complex scalars or simulated annealing
iterate and asdf-system-connnections, (Optional) provides a convenient way to iterate over elements or indices of vectors or matrices." 
```

以上我有 CFFI CFFI-Grovel，琐碎垃圾，asdf，迭代，Antik（全部来自 quicklisp）但仍然无法弄清楚请帮助我逐步说明 Windows 8 64 位与完美运行的 Emacs\ Slime\SBCL\QuickLisp\Cygwin 已安装并可用...我将不胜感激任何和所有建议..谢谢

注意：现在这些 - 摘自网站[http://comments.gmane.org/gmane.lisp.gsll/257](http://comments.gmane.org/gmane.lisp.gsll/257) “

```
To load "gsll":
Load 3 ASDF systems:
alexandria cl-ppcre split-sequence
Install 20 Quicklisp releases:
antik asdf-system-connections babel bordeaux-threads
cffi chunga cl+ssl cl-base64 drakma flexi-streams fsbv
gsll iterate osicat puri static-vectors
trivial-features trivial-garbage trivial-gray-streams
usocket" 
```

除了奥西卡特，我什么都有。GSLL 和 fsbv。当我尝试使用 (ql:quickload "gsll") 加载 GSLL 时，我得到：

```
Error while trying to load definition for system gsll from pathname
D:/Users/W/AppData/Roaming/quicklisp/dists/quicklisp/software/gsll-20130312-git/gsll.asd:
Unable to load any of the alternatives:
("libffi-6.dll" "libffi-5.dll" "libffi.dll")
[Condition of type ASDF:LOAD-SYSTEM-DEFINITION     ERROR] 
```

当我尝试加载 Osicat 时

```
(ql:quickload "osicat") 
```

我得到：

```
Error while invoking <COMPILE-OP (:VERBOSE NIL) {26FB8F59}> on
<CL-SOURCE-FILE "osicat" "src" "osicat">
[Condition of type ASDF:COMPILE-ERROR] 
```

并且 quicklisp 没有 FSBV ......任何帮助将不胜感激。

;;;;;;;;;;;;;;;;编辑;;;;;;;;;;;;;;;;;;; @Nelson 在这方面取得了新的进展......我通过了：

“尝试从路径名 D:/Users/W/AppData/Roaming/quicklisp/dists/quicklisp/software/gsll-20130312-git/gsll.asd 加载系统 gsll 的定义时出错：无法加载任何替代方案：（ "libffi-6.dll" "libffi-5.dll" "libffi.dll") [ASDF 类型的条件：LOAD-SYSTEM-DEFINITION ERROR]"

我在 Emacs 中运行 (ql:quickload "gsll") 时出现错误消息。我通过从这里下载 LIBFFI tarball 来做到这一点：

[http://sourceware.org/libffi/](http://sourceware.org/libffi/) ..页面顶部的链接。

然后我按照本教程[http://phosphor-escence.blogspot.com/2011/08/build-libffi-and-libyaml-on-mingw-for.html](http://phosphor-escence.blogspot.com/2011/08/build-libffi-and-libyaml-on-mingw-for.html) 使用正确安装的 MinGW 构建 LIBFFI（安装在 C:\ MinGW）我在这里学会了正确安装 MinGw：http: [//www.mingw.org/wiki/Getting_Started](http://www.mingw.org/wiki/Getting_Started)

在构建 LIBFFI 之后，我将它的路径 - D:\libffi-3.0.13 - 添加到我的“系统”环境变量“路径”变量中：D: 是我的根驱动器。

我通过将 *.dll 放在搜索栏中搜索 Windows Explorer 中的 D:\libffi-3.0.13 文件夹，找到 libffi-6.dll 并将其放在 D:\Program Files (x86)\Steel Bank Common Lisp\1.1 中。 4 以便 SBCL 可以访问它，libffi-6.dll 在前面的错误消息中命名：

尝试从路径名 D:/Users/W/AppData/Roaming/quicklisp/dists/quicklisp/software/gsll-20130312-git/gsll.asd 加载系统 gsll 的定义时出错：无法加载任何替代方案：（“ libffi-6.dll" "libffi-5.dll" "libffi.dll") [ASDF 类型的条件：LOAD-SYSTEM-DEFINITION ERROR]

虽然工作尚未完成......现在我收到此错误消息，我将从明天开始：

“尝试从路径名 D:/Users/W/AppData/Roaming/quicklisp/dists/quicklisp/software/gsll-20130312-git/gsll.asd 加载系统 gsll 的定义时出错：

外部进程以代码 1 退出。命令为：“C:/MinGW/bin/gcc.exe”“-m32”“-I/Program Files (x86)/Steel Bank Common Lisp/1.1.4/site/cffi/” "-o" "D:\Program Files (x86)\Steel Bank Common Lisp\1.1.4\site\cffi\libffi\libffi-win32.exe" "D:\Program Files (x86)\Steel Bank Common Lisp\ 1.1.4\site\cffi\libffi\libffi-win32.c" 输出为：

[ASDF 类型的条件：LOAD-SYSTEM-DEFINITION-ERROR]"

在此期间的任何帮助将不胜感激：

;;;;;;;;;;解决了;;;;;;;;;; 它的教程链接即将推出，并将在这*一点*下发布<-----here。

这里是 Lispers 同学 ..我在 Windows 7 和 8 上为您提供 GSLL：[https ://wnetai.wordpress.com/how-to-install-gsll_the-gnu-scientific-library-for-lisp-on-windows-7 -and-windows-8/](https://wnetai.wordpress.com/how-to-install-gsll_the-gnu-scientific-library-for-lisp-on-windows-7-and-windows-8/)

这是 GSLL 错误消息及其解决方案的链接：[https ://wnetai.wordpress.com/how-to-install-gsll_the-gnu-scientific-library-for-lisp-on-windows-7-and-windows -8/错误消息-您可能会在安装时获得-gsll-and-their-solutions/](https://wnetai.wordpress.com/how-to-install-gsll_the-gnu-scientific-library-for-lisp-on-windows-7-and-windows-8/error-message-you-may-get-when-installing-gsll-and-their-solutions/)

我正在为 GSLL 开发一个代码片段数据库，从线性代数开始，它将与上面两个链接在同一个博客上，所以请继续关注这里和我的 Lisp 博客。它基本上是使用代码片段、片段描述和示例制作的如何使用 GSLL 教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T00:56:20.343

您的问题是未安装 libffi 的开发版本（带有头文件）。cffi-devel 邮件列表中可能有 Windows 用户可以帮助您；我建议你在那里发布你的问题。就 lisp 库而言，quicklisp 应该解决这个问题，它们与您的问题无关。（而且，FSBV 已过时且不需要；感谢您指出需要更新文档。）（此外，emacs 和 slime 与问题无关，应删除标签。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:07:58.603

让 GSLL 在 Windows 7 上运行有什么运气吗？我一直在尝试安装该软件，甚至使用 Dependency Walker 来跟踪可能需要但仍无法使其运行的任何丢失的 DLL。我确实让它在 Linux 上运行良好，但我希望它在 Window 7 下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:16:20.590

似乎您需要将这些库安装到您的系统中，您必须找到 Windows 等效项。

对于 debian/ubuntu： http: [//pkgs.org/download/libffi-dev](http://pkgs.org/download/libffi-dev)

这些不是通过 quicklisp 安装的，而是通过系统包管理器安装的，在您的情况下，您必须找到与 Windows 兼容的版本并安装它。

# android - 如何处理 ListView 中最后一项下方的单击？

> ID：16061634
> 
> 赞同：1
> 
> 时间：2013-04-17T13:39:24.787
> 
> 标签：android, listview, click, handle

我有一个包含一些项目的 listView。如何处理单击 ListView 中最后一项下方的区域“A”？ *-------------------------*

项目1

*-------------------------*

项目2

*-------------------------*

第 3 项

*-------------------------*

A区

*-------------------------*

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#000000">
    <ListView 
        android:id="@+id/lvMainLeft" 
        android:layout_width="match_parent" 
        android:layout_height="fill_parent"
        android:choiceMode="multipleChoice"
        style="@style/list_view">
    </ListView>
</RelativeLayout> 
```

# perl - 催化剂：Log4perl 和 Apache

> ID：16061636
> 
> 赞同：1
> 
> 时间：2013-04-17T13:39:25.233
> 
> 标签：perl, apache, web-applications, catalyst, log4perl

我使用 Apache2 和 ModPerl 托管我的 Catalyst Web 应用程序。Web 应用程序使用 Log4perl 模块来生成日志文件。

问题是 apache 服务启动时只生成日志条目。之后没有生成新条目。

如果我改用催化剂的集成开发服务器，日志条目会正常生成。

我已经检查了访问权限，这些似乎没问题：apache 进程是所有者并且可以写入。

任何人都知道是什么导致了这个问题？？？

这是我的 log4perl 配置：

> log4perl.logger.myapp=信息，日志文件
> 
> log4perl.appender.LOGFILE=日志::Log4perl::Appender::文件
> 
> log4perl.appender.LOGFILE.filename=myapp.log
> 
> log4perl.appender.LOGFILE.mode=追加
> 
> log4perl.appender.LOGFILE.layout=模式布局
> 
> log4perl.appender.LOGFILE.layout.ConversionPattern=[%d] [%p] %m%n

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:48:19.670

我设置了一个在 Apache2 和 mod_perl 上运行的测试应用程序，我让它工作了。这是我做的笔记。

我使用 Log::Log4perl::Catalyst 在 Catalyst 中进行日志记录。您提到使用 Log4perl，但我不知道您是否使用 Catalyst 扩展。在我的主包中，我有以下几行：

```
use Log::Log4perl::Catalyst;
...
__PACKAGE__->log(Log::Log4perl::Catalyst->new('/full/path/to/l4p.conf')); 
```

我确实必须指定日志配置文件的完整路径。我添加了一些日志记录语句以确保它有效。

我在上面使用了你的示例，但我确实改变了一件事。我不得不再次指定日志位置的完整路径：

```
log4perl.appender.LOGFILE.filename=/full/path/to/myapp.log 
```

一旦我做了这些事情，点击主站点就会更新日志文件。

# c# - 通过 PHP 将数据从 MySQL 传递到 C# 应用程序

> ID：16061637
> 
> 赞同：0
> 
> 时间：2013-04-17T13:39:25.647
> 
> 标签：c#, php, mysql, ssl

我的网站与 PHP 会话一起使用 SSL 连接。我创建了自己的连接类来提供单点登录，然后允许我的用户与我的网站的 php 脚本输出进行交互。不过我有一个问题，目前我使用我的 PHP 脚本来查询数据库并将数据格式化为 HTML 页面，然后我的程序通过 SSL 连接读取该页面。我的程序必须解析对于大数据量可能会很慢的数据。我的问题是：

无需从根本上改变我的系统架构，有没有办法让服务器和 C# 应用程序之间的数据传递更加高效。目前我正在使用字符串分隔符解析以类似于命令分隔值 (CSR) 的方式提取数据。

我听说过很多JSON这个词，但我认为我还不如使用XML。

服务器：MySQL、PHP、APACHE

谢谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:17:30.347

您要研究的是 c# web 应用程序和 SOA 架构。JSON 或 SOAP 将是您的 PHP 与您的 C# 对话的传输协议。如果您决定使用soap，您需要做的是将ac# web 服务作为PHP 和数据库之间的端点，c# 将与数据库通信并将数据传递给PHP。您可能还想研究缓存，但这仅在您需要可扩展性时才这样做。PHP 5 的一个优点是它有一个内置的方法来与soap 协议对话，它只是把它变成一个从你的C# 传递的值的数组，这使得它很容易做到。你需要用你的 PHP 做的是你需要用 SOAP 连接替换 SQL 查询。要考虑的另一件事是 WCF 服务，因为 web 服务在 .net 3.5 以上的任何内容中都已“弃用”。

[http://php.net/manual/en/class.soapclient.php](http://php.net/manual/en/class.soapclient.php)

在此页面上向下滚动一点，它有一些很好的示例供您调用。

JSON 被认为是一个比 SOAP 更快的协议，我只是自己没有很多经验。

[处理 PHP JSON 对象中的数据](https://stackoverflow.com/questions/263392/handling-data-in-a-php-json-object)

SOA 的主要概念也适用于 c# [http://www.javaworld.com/javaworld/jw-06-2005/jw-0613-soa.html](http://www.javaworld.com/javaworld/jw-06-2005/jw-0613-soa.html)

我不是 100% 确定 c# 和 mysql 连接我敢肯定那里有它的东西。我认为您可能遇到的最大问题是在 apache 服务器上托管 C# 服务。

也许检查一下使用 JAVA Web 服务，我知道它与 apache 和 mysql 配合得很好，并且被许多主要网站使用。

# android - Android：GPS 距离测量 - 未正确计算公里

> ID：16061639
> 
> 赞同：0
> 
> 时间：2013-04-17T13:39:27.010
> 
> 标签：android, gps, distance, measure

我有一个计算行驶公里数的应用程序。但是当我在前 1 或 2 公里内开车时。一切都很好，之后我的应用程序变慢了。例如，当我行驶 2 公里时。我的应用程序是 1.93 或当我旅行 70 公里时。我的应用程序是 48 公里。

我还有一个小问题。当我第一次启动应用程序时，我得到很大的值（例如 5536 公里。）当我重新启动程序时，我得到正常值 0.0 公里。这只是我第一次启动 GPS 时如果我关闭 GPS 之后打开我会再次遇到同样的问题。

对不起，我的英语不好。

提前致谢。

```
public class Gps extends Activity   {

 TextView display;

  double km;
  double currentLon=0 ;
  double currentLat=0 ;
  double lastLon = 0;
  double lastLat = 0;
  double distance;
  double distanceMeters;
  double distanceKm;
  double distanceKm1;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gps);

   display = (TextView) findViewById(R.id.info);       

                LocationManager lm =(LocationManager) getSystemService(LOCATION_SERVICE); 
                lm.requestLocationUpdates(lm.GPS_PROVIDER, 0,0, Loclist);
                Location loc = lm.getLastKnownLocation(lm.GPS_PROVIDER);

                display.setText("GPS not found");

                if(loc==null){
                    display.setText("GPS not found");
                    }
                    else{
                        //Get the last latitude and longitude
                        lastLon=loc.getLongitude();
                        lastLat=loc.getLatitude();
                        }

   }

 LocationListener Loclist = new LocationListener(){

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

     //start location manager
     LocationManager lm =(LocationManager) getSystemService(LOCATION_SERVICE);

     //Get last location
      location = lm.getLastKnownLocation(lm.GPS_PROVIDER);

    //Request new location
     lm.requestLocationUpdates(lm.GPS_PROVIDER, 0,0, Loclist);

      //get the current lat and long
     currentLat = location.getLatitude();
     currentLon = location.getLongitude();

Location locationA = new Location("point A");
    locationA.setLatitude(lastLat);
    locationA.setLongitude(lastLon);

Location locationB = new Location("point B");
        locationB.setLatitude(currentLat);
        locationB.setLongitude(currentLon);

        distanceMeters = locationA.distanceTo(locationB);

        distanceKm = distanceMeters / 1000f;

        display.setText(String.format("traveled km.\n%.2f km.",distanceKm));

  }

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

 };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:19:21.577

我可以回答你的第二个问题：

> 当我第一次启动应用程序时，我获得了很大的价值（例如 5536 公里。）

这是从 (0,0)（赤道）到您当前位置的距离。
貌似lastLon和lastLat的初始值都是0。所以一定要避免lastLon和lastLat无效。明确检查未初始化。

# python - 在 stdout 和 stderr 之间划分 Python 日志记录

> ID：16061641
> 
> 赞同：29
> 
> 时间：2013-04-17T13:39:33.263
> 
> 标签：python, logging, stderr

是否有可能将信息或调试的 python 日志消息转到标准输出，将警告或更高级别的消息转到标准错误？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-17T17:36:07.567

这似乎做我想要的：

```
#!/usr/bin/python
import sys
import logging

class InfoFilter(logging.Filter):
    def filter(self, rec):
        return rec.levelno in (logging.DEBUG, logging.INFO)

logger = logging.getLogger("__name__")
logger.setLevel(logging.DEBUG)

h1 = logging.StreamHandler(sys.stdout)
h1.setLevel(logging.DEBUG)
h1.addFilter(InfoFilter())
h2 = logging.StreamHandler()
h2.setLevel(logging.WARNING)

logger.addHandler(h1)
logger.addHandler(h2) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T13:45:43.270

我认为这会有所帮助：[`Handler.setLevel(lvl)`](http://docs.python.org/2/library/logging.html#logging.Handler.setLevel)

*将此处理程序的阈值设置为 lvl。比 lvl 严重程度低的日志消息将被忽略。创建处理程序时，级别设置为 NOTSET（这会导致处理所有消息）。*

但现在我看到它不会做你想要的（从警告/错误中分离信息/调试）

话虽如此，您可以编写自定义处理程序（`logging.StreamHandler`例如扩展类），并覆盖该[`Handler.handle()`](http://docs.python.org/2/library/logging.html#logging.Handler.handle)方法。

# java - 无法修复数组索引越界错误

> ID：16061649
> 
> 赞同：0
> 
> 时间：2013-04-17T13:39:46.380
> 
> 标签：java

错误指向的代码是：

```
letters[addr(tmp.charAt(0))] = Integer.parseInt(tmp.substring(2,tmp.length())) 
```

它在 main 中初始化：

```
int letters[] = new int[26]; //holds variables
for(int i = 0; i < 26; i++)
    {
    letters[i] = i+1;
    } 
```

该错误表示字符串索引超出范围：-1。我很确定不是控件在这样做，因为当我注释掉控件时它做了同样的事情。我正试图弄清楚如何解决这个问题，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:48:47.883

只需在之前放置一个 if 条件，如下所示

```
String tmp = scanner.next();

if(!tmp.length()<=1)
{
letters[addr(tmp.charAt(0))] = Integer.parseInt(tmp.substring(2,tmp.length()))\
}

else
{
    //do something to handle ArrayOutOfBondsException
} 
```

# html - 如何禁用下拉列表中的默认选项

> ID：16061650
> 
> 赞同：2
> 
> 时间：2013-04-17T13:39:47.687
> 
> 标签：html, ruby-on-rails-3

我想禁用下拉列表中给出的默认选项。例如下拉列表中有三个值

```
["Select a status", "Processing", "Completed"] 
```

我想在“选择状态”上应用禁用和选定的属性。

你能告诉我怎么做吗？我无法在相同的值上使用这两个属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:46:59.983

您是否尝试过使用`options_for_select`

```
<%= select_tag(:city_id, options_for_select(["Free", "Basic", "Advanced", "Super Platinum"], :disabled => "Super Platinum", :selected => "Super Platinum")) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:07:26.083

以下对我有用

```
<%= select("post", "person_id", options_for_select(["Free", "Basic", "Advanced", "Super Platinum"], :disabled => "Super Platinum", :selected => "Super Platinum" ))  %> 
```

# activiti - Activiti 用户任务候选组属性字段删除未发生

> ID：16061653
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:02.180
> 
> 标签：activiti, bpmn

我创建了一个新的流程图，它包含一个用户任务。我已经为用户任务编写了属性，并提到了一个候选组值。

[Activiti 用户指南](http://www.activiti.org/userguide/index.html)

现在我试图删除候选组字段的该值，但我无法做到这一点。每次我更改并保存时，它不会反映下次我打开它时的删除。

每次创建新流程图时，我都必须删除流程图。

更新：举个例子，我必须添加几张图片，因为这都是关于 activiti BPMN 流程的图表。

![流程图](https://i.stack.imgur.com/f69sd.jpg)

我添加了 EmployeeTask 的属性，如图所示：

![员工任务属性](https://i.stack.imgur.com/jQ1PB.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:19:32.933

我尝试了很多次但都失败了，然后我写信给 Activiti 小组的一个人讨论这个问题。他告诉它在这个版本的 Activiti ie 中有一个错误，`Activiti 5.12`他们将在下一个版本中修复这个“错误”。为了提供确切的细节，他们已经解决了`JIRA`我提出的任务。

让我们等待下一个版本来解决这个问题。

# php - 如何在不修改其内容的情况下忽略 phpunit 中的测试方法？

> ID：16061659
> 
> 赞同：25
> 
> 时间：2013-04-17T13:40:16.970
> 
> 标签：php, unit-testing, symfony, nunit, phpunit

为了忽略使用 PHPUnit 的测试，应该放在 PHP 测试方法旁边的属性是什么？

我知道对于 NUnit，属性是：

```
[Test]
[Ignore]
public void IgnoredTest() 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-10-31T17:56:42.780

[您可以使用组注释](http://phpunit.de/manual/3.7/en/appendixes.annotations.html#appendixes.annotations.group)标记测试并从运行中排除这些测试。

```
/**
 * @group ignore
 */
public void ignoredTest() {
    ...
} 
```

然后您可以运行所有测试但忽略测试，如下所示：

```
phpunit --exclude-group ignore 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-17T18:00:48.620

最简单的方法是只更改测试方法的名称并避免名称以“test”开头。这样，除非您告诉 PHPUnit 使用 执行它`@test`，否则它不会执行该测试。

此外，您可以告诉 PHPUnit[跳过特定测试](https://phpunit.de/manual/current/en/incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.skipping-tests)：

```
<?php
class ClassTest extends PHPUnit_Framework_TestCase
{     
    public function testThatWontBeExecuted()
    {
        $this->markTestSkipped( 'PHPUnit will skip this test method' );
    }
    public function testThatWillBeExecuted()
    {
        // Test something
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-17T13:45:01.377

您可以使用该方法`markTestIncomplete()`忽略 PHPUnit 中的测试：

```
<?php
require_once 'PHPUnit/Framework.php';

class SampleTest extends PHPUnit_Framework_TestCase
{
    public function testSomething()
    {
        // Optional: Test anything here, if you want.
        $this->assertTrue(TRUE, 'This should already work.');

        // Stop here and mark this test as incomplete.
        $this->markTestIncomplete(
            'This test has not been implemented yet.'
        );
    }
}
?> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-25T08:42:29.950

如果您`test`在开始时没有为您的方法命名，那么 PHPUnit 将不会执行该方法（请参见[此处](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html)）。

```
public function willBeIgnored() {
    ...
}

public function testWillBeExecuted() {
    ...
} 
```

如果你想执行一个不以你开头的方法，`test`你可以添加注释`@test`来执行它。

```
/**
 * @test
 */
public function willBeExecuted() {
    ...
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-16T15:42:59.107

由于您在其中一条评论中建议您不想更改测试的内容，如果您愿意添加或调整注释，您可以滥用`@requires`注释来忽略测试：

```
<?php

use PHPUnit\Framework\TestCase;

class FooTest extends TestCase
{
    /**
     * @requires PHP 9000
     */
    public function testThatShouldBeSkipped()
    {
        $this->assertFalse(true);
    }
} 
```

**注意**这只会在 PHP 9000 发布之前有效，并且运行测试的输出也会有点误导：

```
There was 1 skipped test:

1) FooTest::testThatShouldBeSkipped
PHP >= 9000 is required. 
```

供参考，请参阅：

*   [https://phpunit.de/manual/current/en/incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.skipping-tests-using-requires](https://phpunit.de/manual/current/en/incomplete-and-skipped-tests.html#incomplete-and-skipped-tests.skipping-tests-using-requires)

# php - 使用对象翻译单词

> ID：16061661
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:18.643
> 
> 标签：php, object, translation

我只是想翻译一些单词。那就是我想我会使用对象来翻译像Javascript

在javascript中我可以这样做

```
var data = {"one":"en","two":"to"};
console.log(data["one"]); 
```

但是在 PHP 中为什么我不能这样做..

```
$text = (object)array(
                "one"=>"en",
                "two"=>"to"
            );
echo $text["one"]; 
```

？？？

还是其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:41:31.667

只需删除`(object)`演员表，因为在 PHP 中，数组可以按照您的意愿工作：

```
$text = array('one' => 'en', 'two' => 'to');

echo $text['one']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:42:20.443

尝试`echo $text->one;`使用`->`运算符访问标准类对象数组的 json 解码数组

# html - 如何在我的 PC/笔记本电脑上测试移动网站

> ID：16061662
> 
> 赞同：6
> 
> 时间：2013-04-17T13:40:32.327
> 
> 标签：html

我正在构建一个检测目标浏览器的网站，无论它是移动浏览器还是 PC 浏览器。它根据内容选择主题。我想问的是。有没有可以在我的电脑上下载的移动浏览器来测试我的网站而不是在手机上多次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:58:06.667

您可以从移动浏览器将用户代理更改为用户代理。[Chrome 上的扩展程序](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:03:28.040

You don't need any extensions, you can just change the User Agent manually on Chrome's Developer tools, just click on the settings Icon and then refresh the page (as you can see this page's look changes):

![enter image description here](https://i.stack.imgur.com/6vyfr.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:10:55.640

[这](http://bjango.com/mac/skalapreview/)是我平时用的。我认为这不是您要找的东西，但物有所值！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:20:43.263

坚持使用 webkit 浏览器进行移动测试，无 Windows Phone。不要忽视 Android SDK 的模拟器，如果你使用的是 Mac，iOS 模拟器，因为你可能会遇到浏览器中不存在的渲染问题。

# database - CRUD Web 服务的 Web 服务编排

> ID：16061663
> 
> 赞同：1
> 
> 时间：2013-04-17T13:40:32.867
> 
> 标签：database, web-services, crud, esb, orchestration

我有 4 个 Web 服务，为 4 个不同的简单数据库（1 个数据库表）提供 CRUD 方法。我想做的是创建另一个 Web 服务，它调用上述服务来收集一些特定的数据，请求的数据可能在一个数据库中或四个数据库中。我尝试使用编排（ow2 Orchestra），但我发现这是针对业务流程的，在我的情况下，我只有代表数据库的 CRUD 应用程序的服务。我也考虑过使用 ESB，但对于我的简单案例研究来说，这似乎是一项艰巨的任务。我必须手动创建此 Web 服务还是有其他方法？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:13:35.423

我在 Mule ESB 上做了很多工作——开发、设计、在生产中运行等等。我想说 ESB 对你来说太过分了。如果您需要做的只是拥有一个调用 1-4 个其他 Web 服务的包装 Web 服务，我会保持简单并手动实现它。

ESB 需要一台服务器来运行您的项目，并且有相当长的学习曲线。

与学习 ESB 相比，学习如何自己制作 Web 服务会更容易。与 ESB 相比，维护 Web 服务也更容易。

但是，如果您要让 Web 服务遍地开花，那么 ESB 可能是有意义的。

# php - SQL 字符串给了我所有具有类别的帖子，但不是那些没有类别的帖子

> ID：16061664
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:35.567
> 
> 标签：php, sql, wordpress

我正在运行一个 Wordpress 站点，并且正在制作一个小部件，它可以为我提供过去 8 天内阅读次数最多的所有帖子。

当我运行这个 SQL 字符串时，我得到了所有带有类别的帖子，但是当帖子不在一个类别中时，我不明白。

如何获取属于某个类别的所有帖子**，以及****所有****不在**某个类别中的帖子？

 ******我的 sql 字符串**

```
$sql ="SELECT wp_posts.post_date, wp_posts.post_title, wp_posts.post_name, wp_posts.post_content, wp_terms.name, wp_terms.slug, wp_postmeta.meta_value FROM wp_posts
        INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
        INNER JOIN wp_term_taxonomy ON (wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id)
        INNER JOIN wp_terms ON (wp_term_taxonomy.term_id = wp_terms.term_id)
        INNER JOIN wp_postmeta ON (wp_postmeta.post_id = wp_posts.ID)
        WHERE (wp_term_taxonomy.taxonomy = 'category'
           AND wp_postmeta.meta_key = 'readCount'
           AND wp_posts.post_type = 'post'
           AND DATE(wp_posts.post_date) >= '$eight_days_ago'
           AND wp_posts.post_status = 'publish')
           GROUP BY wp_posts.ID
           ORDER BY wp_postmeta.meta_value DESC
           LIMIT 5"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:01:59.423

I think this will work. You need to change the joins to `left outer join`s and then check for `NULL` in the `where` clause:

```
SELECT wp_posts.post_date, wp_posts.post_title, wp_posts.post_name, wp_posts.post_content, wp_terms.name, wp_terms.slug, wp_postmeta.meta_value FROM wp_posts
        LEFT JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
        LEFT JOIN wp_term_taxonomy ON (wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id)
        LEFT JOIN wp_terms ON (wp_term_taxonomy.term_id = wp_terms.term_id)
        LEFT JOIN wp_postmeta ON (wp_postmeta.post_id = wp_posts.ID)
        WHERE ((wp_term_taxonomy.taxonomy = 'category') or (wp_term_taxonomy.taxonomy is NULL))
           AND wp_postmeta.meta_key = 'readCount'
           AND wp_posts.post_type = 'post'
           AND DATE(wp_posts.post_date) >= '$eight_days_ago'
           AND wp_posts.post_status = 'publish')
           GROUP BY wp_posts.ID
           ORDER BY wp_postmeta.meta_value DESC
           LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:44:31.810

让数据库，无论它是什么，检查类别列中的空值：

```
SELECT wp_posts.post_date, wp_posts.post_title, wp_posts.post_name, wp_posts.post_content, wp_terms.name, wp_terms.slug, wp_postmeta.meta_value FROM wp_posts
        INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
        INNER JOIN wp_term_taxonomy ON (wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id)
        INNER JOIN wp_terms ON (wp_term_taxonomy.term_id = wp_terms.term_id)
        INNER JOIN wp_postmeta ON (wp_postmeta.post_id = wp_posts.ID)
        WHERE ((wp_term_taxonomy.taxonomy = 'category' OR wp_term_taxonomy.taxonomy IS NULL)
           AND wp_postmeta.meta_key = 'readCount'
           AND wp_posts.post_type = 'post'
           AND DATE(wp_posts.post_date) >= '$eight_days_ago'
           AND wp_posts.post_status = 'publish')
           GROUP BY wp_posts.ID
           ORDER BY wp_postmeta.meta_value DESC
           LIMIT 5 
```****

# java - 表格标题未显示在表格顶部

> ID：16061668
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:42.740
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

我正在制作 JTable，但遇到了 2 个问题。#1 表格标题显示在表格的一侧，而 #2 滚动窗格未显示。这是我现在的一些代码。

```
String [] data = {"a", "b", "c", "d", "e"};
JFrame frame = new JFrame("String Table");
JPanel middlePanel = new JPanel();              
DefaultTableModel model = new DefaultTableModel();
model.addColumn("String", data);
JTable table = new JTable(model);
JScrollPane scrollPane = new JScrollPane(table);    

frame.getContentPane().add(middlePanel, BorderLayout.CENTER);
middlePanel.add(scrollPane);
middlePanel.add(table.getTableHeader());
middlePanel.add(table);

frame.setSize(400, 200);
frame.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:45:06.473

1.  仅使用代码行`middlePanel.add(scrollPane);`

2.  `JPanel (middlePanel)`应由`GridLayout`或`BorderLayout`

3.  删除代码行`middlePanel.add(table.getTableHeader());`和`middlePanel.add(table);`

4.  `frame.getContentPane().add(middlePanel, BorderLayout.CENTER);`在 之后移动代码行`middlePanel.add(scrollPane);`，并且可能是if`frame.add(middlePanel);`没有更改`LayoutManager``JFrame`

5.  删除`frame.setSize(400, 200);`替换为并通过覆盖`frame.pack()`确定正确`PreferredSize``getPreferredSize``JScrollPane`

# php - 正则表达式字符串，直到未转义的逗号

> ID：16061669
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:43.473
> 
> 标签：php, regex

我有以下字符串：

```
{lorum=Vestibulum id ligula porta felis euismod semper. Sed posuere\, consectetur est at lobortis.,ipsum= Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue.} 
```

现在，我想要得到的是：

```
array (
    array( 
        'operator' => 'lorum',
        'value' => 'Vestibulum id ligula porta felis euismod semper. Sed posuere\, consectetur est at lobortis.'
    ),
    array(
        'operator' => 'ipsum',
        'value' => 'Cras mattis consectetur purus sit amet fermentum. Nulla vitae elit libero, a pharetra augue.'
    )
) 
```

最大的问题是我不能让我的正则表达式在 a 上做一个回顾`.*`，我正在尝试这样的事情（顺便说一句，没有命名组）。

```
[{,]?([a-zA-Z_]*)=((?<!\\).*)[(?<!\\),}] 
```

我正在使用 Gskinner 的[RegExr](http://gskinner.com/RegExr/)引擎来尝试我的正则表达式，我也尝试了很多其他变体，但直到现在都没有成功......

最终，这个正则表达式应该在 PHP 脚本中使用。当然，我不介意完全重建上述正则表达式，尽管我想将其保持在正则表达式级别。如果不是为了速度，那只是为了正则表达式的教育目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:57:13.007

正如stema 在评论中所说，在.NET 之外的所有正则表达式引擎中，lookbehinds 必须是固定长度（或至少是有限长度）。也`[(?<!\\),}]`没有什么真正的意思。它只匹配方括号内的任何字符。您可以反转您的尝试并使用除未转义的逗号和右大括号之外的任何内容：

```
([a-zA-Z_]*)=((?:[^\\,}]|\\.)*) 
```

在自由间距模式下有一些解释：

```
([a-zA-Z_]*)=    # match and capture the key (as in your own regex)
(                # capture the value
  (?:            # non-capturing group for allowed sequences for the value
    [^\\,}]      # any character except backslash, comma and closing brace
  |              # OR
    \\.          # a backslash followed by anything
  )
  *              # repeat as long as possible
)                # end of capturing group 
```

请注意，这允许转义任何字符（包括其他反斜杠和右大括号）。

请注意，PHP`preg_match_all`将以与您需要的结构略有不同的结构返回数组（但很容易根据您的需要进行转换）。此外，在 PHP 字符串中，您不会绕过所有反斜杠的双重转义，因此每次都会有四个。喜欢：

```
$pattern = '/([a-zA-Z_]*)=((?:[^\\\\,}]|\\\\.)*)/'; 
```

[工作演示。](http://ideone.com/0MSV2g)

另请注意，在大多数情况下，无法超过您想要匹配的内容末尾的贪婪模式比试图找到第一个被禁止的非贪婪解决方案更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:05:25.947

像这样的东西： [http ://rubular.com/r/XLI9euNcL5](http://rubular.com/r/XLI9euNcL5)

`[{,]?([a-zA-Z_]*?)=(.*?)(?:[^\\][,]|})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:52:43.503

.* 是贪婪的并阻止了比赛。尝试

`[{,]?([a-zA-Z_]*?)=((?<!\\).*?)[(?<!\\),}]`

Rubular：[http: //rubular.com/r/l8R3GCmalw](http://rubular.com/r/l8R3GCmalw)

# c++ - 没有正确读取字符串

> ID：16061671
> 
> 赞同：7
> 
> 时间：2013-04-17T13:40:50.140
> 
> 标签：c++, string

我正在练习用户输入处理。我的目标是让用户输入一行由空格（“”）分隔的整数，将它们作为整数读取，存储它们并稍后处理它们。我偶然发现了一个有趣的问题（至少在我看来），我这样做的方式似乎总是没有读取用户输入的最后一个数字。我将在此处发布整个程序（因为其中包含一些额外的库）。我在程序中留下了一些评论

```
#include <iostream>
#include <string>
#include <vector>
#include <stdlib.h>

using namespace std;

int main()
{
    //this vector will store the integers
    vector<int> a;
    // this will store the user input
    string inp;
    getline(cin, inp);
    // this string will temporarily store the digits
    string tmp;
    //be sure that the reading part is okay
    cout << inp << endl;
     //until you meet something different than a digit, read char by char and add to string
     for(int i = 0; i < inp.length(); i++)
    {
        if(isdigit(inp[i]))
        {
            tmp +=inp[i];
        }
        else
        {
            // when it is not a character, turn to integer, empty string
            int value = atoi(tmp.c_str());
            a.push_back(value);
            tmp = "";
        }
    }
    // paste the entire vector of integers
    for(int i = 0; i < a.size(); i++)
    {
        cout << a[i] << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:50:31.910

替换此行

`for(int i = 0; i <inp.length(); i++)`

经过

```
for(int i = 0; i <= inp.length(); i++) 
```

**演示[IDEONE](http://ideone.com/8Paxpd)**

您的代码的问题是：例如`25 30 46`每当**i=7**，**tmp=46**。**您没有**像`inp[8]`换行符那样在向量中推动 46，因此您的 for 循环在 i 变为 7 后终止。

**请注意**：*i <= inp.length() 在大多数编译器中都能完美运行，因为 \0 被用作/视为哨兵。但是，很少有编译器（如 Microsoft Visual C++）可能显示断言错误：字符串下标超出范围。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:46:57.927

如果该行的最末端是一个数字，那么您不会`else`在最后一次迭代中点击 ，并且最后一个数字永远不会被推入`vector`. 最简单的解决方案是在循环之后复制非数字逻辑：

```
 if (!tmp.empty()) // If tmp has content, we need to put it in the vector.
 {
        int value = atoi(tmp.c_str());
        a.push_back(value);
        tmp = "";
 } 
```

尽管我相信您可以想到一种更好的构建方式。

这是我想出的一个版本`std::stringstream`，它也避免了`atoi`：

```
int main()
{
    std::vector<int> ints;
    std::string line;
    std::getline (std::cin, line);
    std::cout << "Read \"" << line << "\"\n";
    std::stringstream ss(line);

    int remaining = line.size();
    while (remaining)
    {
        if(std::isdigit(ss.peek())) // Read straight into an int
        {
            int tmp;
            ss >> tmp;
            ints.push_back(tmp);
        }
        else
        {
            ss.get(); // Eat useless characters
        }

        remaining = line.size()-ss.tellg();
    }

    for (auto i : ints)
        std::cout << i << '\n';

    return 0;
} 
```

跑步：

```
$ ./a.out <<< "12 34 56"
Read "12 34 56"
12
34
56 
```

请注意，这专门用于处理数字之间的任何旧乱码：

```
$ ./a.out <<< "12-abc34-56"
Read "12-abc34-56"
12
34
56 
```

如果只有空格，这就更容易了，因为`int`从 a 读取 s`stringstream`会自动忽略它。在这种情况下，您只需要：

```
int tmp;
while (ss >> tmp)
{
    ints.push_back(tmp);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:49:14.723

在开始循环之前，在字符串中添加一个空格以确保压入最后一个数字：`inp.push_back(' ')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T13:47:14.303

您的程序需要一个以非数字字符结尾的字符串才能正常工作。试试这个字符串“1 12 14587 15”，因为在您的算法中，当您忘记最后一个空格时，您的程序会将数字存储到 tmp 字符串中，但不将其保存到向量中。要纠正这一点，您需要在第一个循环之后添加最后一个 push_back。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T13:47:20.867

`a`仅在找到非数字时才使用新值进行更新。因此，如果您有以数字结尾的字符串，`tmp`则将包含数字字符串，但您永远不会到达应该执行 push_back 的 else。您可以通过在 for 循环后添加以下代码来解决此问题

```
if(!tmp.empty()){
    // when it is not a character, turn to integer, empty string
    int value = atoi(tmp.c_str());
    a.push_back(value);
    tmp = "";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T13:50:24.277

您的循环在读取最后一位数字后完成，因此最后一位数字永远不会变成整数。只需在原始 for 循环之后添加一些代码。

```
for(int i = 0; i < inp.length(); i++)
{
    /* ...... */
}
// add this to read the last digit
if(tmp.length() > 0){
    int value = atoi(tmp.c_str());
    a.push_back(value);
    tmp = "";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T13:52:19.713

当最后一个数字的最后一个数字存储在 tmp 中时，循环结束，因为您已经读取了整个字符串的最后一个字符。当循环结束时 tmp 仍然包含最后一个数字。

1）您可以在循环后将最后一个数字转换并添加到向量。最后一个数字在 tmp 中仍然可用。

2）或者您可以在循环之前在字符串末尾显式添加非数字字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T13:57:04.737

你省略输入。更改您的代码以反映此：

```
 //this vector will store the integers
    vector<int> a;
    // this will store the user input
    string inp;
    getline(cin, inp);
    // this string will temporarily store the digits
    string tmp;
    //be sure that the reading part is okay
    cout << inp << endl;
     //until you meet something different than a digit, read char by char and add to string
     for(int i = 0; i < inp.length(); i++)
    {
        if(isdigit(inp[i]))
        {
            tmp =inp[i];
            int value = atoi(tmp.c_str());
            a.push_back(value);
        }
        else
        {
            tmp = "";
        }
    }
    // paste the entire vector of integers
    for(int i = 0; i < a.size(); i++)
    {
        cout << a[i] << endl;
    }
    return 0; 
```

或循环替换： `for(int i = 0; i <inp.length(); i++)`

经过

```
for(int i = 0; i <= inp.length(); i++) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T13:48:31.820

你永远不会推回你的最后一个价值。例如，考虑这个输入

```
40 36 
```

然后，当您阅读时，您会在第一个空格处向后推。但是你永远不会推动 36，因为没有更多的字符。

循环结束后，`for()`您可以尝试以下操作：

```
if(!tmp.empty()) {
  a.push_back(tmp);
} 
```

# c# - 如何在 C# 中从字符串解析为浮点数？

> ID：16061673
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:51.277
> 
> 标签：c#, parsing

这个问题应该很简单，但我找不到让它工作的方法。我有以下代码：

```
string yeah = "0.5";
float yeahFloat = float.Parse(yeah);
MessageBox.Show(yeahFloat.ToString()); 
```

但是 MessageBox 显示“5”而不是“0.5”。如何使用浮点数解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:43:07.787

```
float yeahFloat = float.Parse(yeah, CultureInfo.InvariantCulture); 
```

请参阅文档：http: [//msdn.microsoft.com/en-us/library/bh4863by.aspx](http://msdn.microsoft.com/en-us/library/bh4863by.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:44:08.940

`0.5`是某些国家/地区书写十进制数的方式，例如在美国。在法国，十进制数更多地用逗号书写：`0,5`。
通常，您提供的代码会在我的计算机上引发异常。

您需要指定要从哪种文化中解析字符串。如果没有，这将需要您的计算机文化设置，这很糟糕，因为您的代码可以在不同的国家/地区运行。

所以，通过指定一个不变的文化，你对 Parse 函数说：好的，让我们尝试解析点或逗号，尽你所能：

```
string yeah = "0.5";
float yeahFloat = float.Parse(yeah, CultureInfo.InvariantCulture);
Console.Write(yeahFloat); 
```

关于这个主题已经有很多问题：

*   [将字符串解析为浮点数 C#](https://stackoverflow.com/questions/5365566/parse-string-to-float-number-c-sharp)
*   [解析浮点数的最佳方法？](https://stackoverflow.com/questions/147801/best-way-to-parse-float)
*   [C# 从字符串中解析浮点数](https://stackoverflow.com/questions/6171202/c-sharp-parsing-float-from-string)
*   ETC..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:45:52.480

你可以用[float.TryParse()](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/701df7da-17d8-41b5-b2d2-94b2be9c0191)试试这个：

```
string yeah = "0.5";
float yeahFloat;
 if (float.TryParse(yeah,System.Globalization.NumberStyles.Any,
     System.Globalization.CultureInfo.InvariantCulture,out yeahFloat))
   {
     MessageBox.Show(yeahFloat.ToString());    
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T13:43:12.737

默认情况下，`Single.Parse(String)`根据您的本地化设置进行解析。如果要使用特定的方法，则必须使用该方法的适当重载和所需的文化设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:45:54.780

尝试在 ToString() 方法中传递您需要的格式

```
MessageBox.Show(yeahFloat.ToString("0.0")); // 1 decimal place 
```

# sql - 如何更新与其他表连接的表中的列？

> ID：16061675
> 
> 赞同：1
> 
> 时间：2013-04-17T13:40:53.800
> 
> 标签：sql, oracle, sql-update

我想参考其他表来更新表的两列。执行脚本时显示错误。

**错误：**从命令的第 1 行开始出错：

```
UPDATE wb_costing_work_items,
       sa_sales_documents,
       sa_sales_document_items
   SET cwi_price_per_hour = sdi_price,
       cwi_amount = sdi_price * cwi_hours
 WHERE cwi_lo_id = sad_lo_id
   AND sdi_sad_id = sad_id
   AND sdi_wit_id = cwi_wit_id
   AND cwi_id = 1650833 
```

> 命令行错误：1 列：28 错误报告：SQL 错误：ORA-00971：缺少 SET 关键字 00971。00000 -“缺少 SET 关键字”

**SQL 语句**

```
UPDATE wb_costing_work_items cwi,
       sa_sales_documents sad, 
       sa_sales_document_items sdi
   SET cwi.cwi_price_per_hour = sdi.sdi_price,
       cwi.cwi_amount = sdi.sdi_price * cwi.cwi_hours
 WHERE cwi.cwi_lo_id = sad.sad_lo_id
   AND sdi.sdi_sad_id = sad.sad_id
   AND sdi.sdi_wit_id = cwi.cwi_wit_id
   AND cwi.cwi_id = 1650855 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:45:54.860

这绝对应该有效。

```
 UPDATE (SELECT cwi_price_per_hour,
                           sdi_price,
                           cwi_amount,
                           sdi_price,
                           cwi_hours
                      FROM wb_costing_work_items,
                           sa_sales_documents,
                           sa_sales_document_items
                     WHERE     cwi_lo_id = sad_lo_id
                           AND sdi_sad_id = sad_id
                           AND sdi_wit_id = cwi_wit_id
                           AND cwi_id = 1650833)
               SET cwi_price_per_hour = sdi_price, cwi_amount = sdi_price * cwi_hours 
```

请为使用的表和前缀列设置别名，以便可以轻松阅读您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:08:35.543

可能是这样的。

请注意，我不得不对哪个列属于哪个表进行一些疯狂的猜测，因为您没有包含有关如何定义表的任何信息。

所以很可能我没有做对，您需要将查询调整为您的实际表结构。

```
merge into wb_costing_work_items  
using 
(
    select cwi.pk_column,  -- don't know what the PK of the wb_costing_work_items is due to lack of information
           sdi.sdi_price,  -- don't know if this column really belong to this table
           sdi.sdi_price * cwi.cwi_hours as total-- again unsure about column names due to lack of information
    FROM wb_costing_work_items cwi
      JOIN sa_sales_documents sad ON sad.sad_lo_id = cwi.cwi_lo_id -- not sure about these, due to lack of information
      JOIN sa_sales_document_items sdi 
        ON sdi.sad_id = sad.sdi_sad_id     -- not sure about these, due to lack of information
       AND sdi.sdi_wit_id = cwi.cwi_wit_id -- not sure about these, due to lack of information

) t ON (t.pk_column = w.pk_column) -- not sure about this, due to lack of information
when matched then 
 update 
    set cwi_price_per_hour = t.sdi_price,
        cwi_amount = t.total; 
```

# sql - sql查询更新所有行而不仅仅是where子句

> ID：16061677
> 
> 赞同：0
> 
> 时间：2013-04-17T13:40:58.640
> 
> 标签：sql, sql-server

我在执行此查询时遇到问题：

```
update public.fortune_companies 
set industry_id = (select id 
                   from public.industries 
                   where name = 'Agriculture, Forestry and Fishing') 
from Temp_Sic_Fortune_Companies as temp 
left join public.fortune_companies as fc on fc.account_name = temp.account_name
where temp.sic between '0' and '499'; 
```

我认为这应该只为 sic 编号为 0-499 的那些设置行业 ID，但它实际上将每条记录设置为相同的 ID。不管 sic 数是否在 0-499 之间。

为什么是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:48:51.947

```
DECLARE @id INT;

SELECT @id = id 
  FROM public.industries 
  WHERE name = 'Agriculture, Forestry and Fishing';

UPDATE fc
  SET industry_id = @id
  FROM public.fortune_companies AS fc
  WHERE EXISTS
  (
    SELECT 1 
      FROM dbo.Temp_Sic_Fortune_Companies
      WHERE account_name = fc.account_name
      AND sic BETWEEN '0' and '499'
  ); 
```

当然，如果`temp.sic`= `'3000'`，它将成为集合的一部分。这是使用错误数据类型（或错误运算符）的危险之一。您可以通过以下方式解决此问题：

```
AND sic BETWEEN '0' and '499'
AND LEN(sic) <= 3 
```

或者说：

```
AND CASE WHEN ISNUMERIC(sic) = 1 THEN 
  CONVERT(INT, sic) ELSE -1 END BETWEEN 0 AND 499 
```

（这可以避免错误——因为你已经让他们——有人在列中输入了一个非数字值。）

或者首先使用正确的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:43:01.640

更改`left join`为`inner join`

# node.js - 模型操作的 Sails.js 身份验证

> ID：16061678
> 
> 赞同：6
> 
> 时间：2013-04-17T13:41:01.203
> 
> 标签：node.js, mongodb, authentication, sails.js

我正在制作一个具有不同访问级别的 API，“客户端”可能只能读取。但“管理员”必须具有写入权限。每次检查不同的角色作为 Sails.js 中的策略，并在 req.session 中设置权限。

我只需要让“客户端”无法访问创建、更新和删除操作，因此我创建了一个具有这些 CRUD 操作的控制器并检查用户是否具有正确的角色。所有访问受限的操作都通过 routes.js 重定向到此控制器。

现在我的问题是，当我删除如下条目时： Category.destroy(req.param('id')); 给我 undefined 并且没有 done 方法。与文档中提到的不同，我设法通过创建这个来解决问题：

```
 var deleted = Category.destroy(req.param('id'), function(err, status) { 
    if (status == 1){
      res.json({message: 'Category is deleted'});
    } else {
      res.json({message: 'Oops, something went wrong'});
    }
  }); 
```

但是必须有另一种方法来将身份验证应用于这些基本操作。因为现在我必须编写所有动作。

我写的删除函数的代码有问题吗？是否可以应用策略并重定向到默认模型操作，就好像根本没有身份验证一样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-08T02:05:44.727

您可以在`Models`or`Controllers`级别定义策略。这是来自`/config/policies.js`.

```
module.exports.policies = {
    // Default policy (allow public access)
    '*': true,
    'events': 'eventsPolicy', // Policy for a Model

    someController: { // Policy for a Controller
        // Apply the "authenticated" policy to all actions
        '*': 'authenticated',

        // For someAction, apply 'somePolicy' instead
        someAction: 'somePolicy'
    }
}; 
```

在下面`api/policies`是您可以定义访问级别的地方。

```
module.exports = function (req, res, next) {
    if (req.session.user) {
        var action = req.param('action');
        if (action == "create") {
            req.body.userId = req.session.user.id;
            req.body.username = req.session.user.username;
        }
        next();
    } else {
        res.send("You're not authenticated.", 403);
    }
}; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:56:23.753

刚刚修改了所有策略并重命名了控制器，如 de CLI 中所述：'sails generate model example' 提供有关控制器被命名为单数的通知。所以我不需要将所有模型动作重定向到复数控制器（示例）。现在所有基本的 CRUD 操作都在正常工作。

Sails.js 视频教程对我帮助很大：[http ://www.youtube.com/watch?feature=player_embedded&v=GK-​​tFvpIR7c](http://www.youtube.com/watch?feature=player_embedded&v=GK-tFvpIR7c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:46:33.513

我的猜测（我自己不是 Sails 用户）是你*要么*传递一个回调，*要么*你会得到一个有`done()`方法的对象：

```
Category.destroy(id, function(...) {...});      // method 1
Category.destroy(id).done(function(...) {...}); // method 2 
```

# modernizr - Modernizr.load() 与 Yepnope 混淆

> ID：16061680
> 
> 赞同：0
> 
> 时间：2013-04-17T13:41:04.287
> 
> 标签：modernizr, yepnope, prefixes

我对 Modernizr 及其与 Yepnope.js 的关系感到有点困惑。据我了解，Modernizr 带有 Yepnope.js（假设您选择 Modernizr.load() 选项）。根据 Yepnope 文档，可以使用可选的前缀插件。例如，您可以测试 IE 的版本（假设您还加载了 yepnope.ie-prefix.js 脚本）。但是，当我尝试运行以下命令时，会收到“未定义”警报：

```
Modernizr.load({
   load: 'ie!my-ie-specific.js',
   complete : function (url, result, key){
     alert(url, result, key);
 }
}); 
```

我究竟做错了什么？Modernizr 是完全包含 Yepnope 还是仅包含零碎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T21:25:33.730

我也陷入了困境。挣扎了一个小时。

`complete`回调不支持测试。将其更改`callback`为加载外部脚本时触发的内容。

`complete`在加载所有脚本时运行，或者如果没有加载任何脚本。

我希望`complete`得到结果变量。我可以用那个。

# powershell - 从事件日志中的消息中提取帐户名称 - powershell

> ID：16061681
> 
> 赞同：4
> 
> 时间：2013-04-17T13:41:04.390
> 
> 标签：powershell, powershell-2.0

我想`account name`从事件日志中的消息属性中提取。例如，我正在运行以下命令：

```
get-eventlog -computername dc-01 -logname security | ?{$_.eventid -eq "4674"} | convertto-html -property machinename,eventid,entrytype,message | out-file c:\test.html 
```

我希望能够`account name`退出消息，但对于特定用户来说不是必需的。理想情况下，它会创建另一个名为`Account Name`我们可以排序的列

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:05:04.680

查看每个事件的 ReplacementStrings 属性的第二项。它包含嵌入在消息中的值。

```
get-eventlog -computername dc-01 -logname security | ?{$_.eventid -eq "4674"} | 
select machinename,eventid,@{n='AccountName';e={$_.ReplacementStrings[1]}},entrytype,message | 
convertto-html | out-file c:\test.html 
```

# gwt - GWT 按钮点击事件

> ID：16061683
> 
> 赞同：1
> 
> 时间：2013-04-17T13:41:07.617
> 
> 标签：gwt

我的项目中有一个窗口面板。我给它加了一个按钮。当我单击按钮时，我希望触发两个事件。一个事件是隐藏那个窗口，我通过

```
 Button button = new Button("click");
button.addListener(new ButtonListenerAdapter(){
        @Override
        public void onClick(Button button, EventObject e) {
            hide();
            super.onClick(button, e);
        }

    });
Window.add(button); 
```

第二个我想在同一个按钮点击时同时弹出另一个窗口..怎么办？帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:47:10.287

我认为这应该可以解决您的问题：

```
 final boolean evenClick = false;
   Button button = new Button("click");
   button.addListener(new ButtonListenerAdapter(){
   @Override
   public void onClick(Button button, EventObject e) {

        if (!evenClick) {
            hide();
        super.onClick(button, e);
                         }
         else {
       //DO YOUR SECOND CLICK STUFF
                }
        evenClick = !evenClick;     

    }

});
Window.add(button); 
```

# d3.js - 将文本添加到新添加的元素

> ID：16061686
> 
> 赞同：0
> 
> 时间：2013-04-17T13:41:12.483
> 
> 标签：d3.js

这是您需要的全部代码：

[https://raw.github.com/alignedleft/d3-book/master/chapter_09/25_adding_values.html](https://raw.github.com/alignedleft/d3-book/master/chapter_09/25_adding_values.html)

它在`D3`本地引用，但为了更快地工作，您可以像这样从其网站上引用它：

```
<script src="http://d3js.org/d3.v3.min.js"></script> 
```

它将创建一些这样的图表：

![在此处输入图像描述](https://i.stack.imgur.com/0pV0o.png)

注意那些没有文本标签的新添加的图表。

添加标签的部分代码位于代码的最后，是这样的：

```
 svg.selectAll("text")
               .data(dataset)
               .transition()
               .duration(500)
               .text(function(d) {
                    return d;
               })
               .attr("x", function(d, i) {
                    return xScale(i) + xScale.rangeBand() / 2;
               })
               .attr("y", function(d) {
                    return h - yScale(d) + 14;
               }); 
```

作为练习，我正在尝试修改代码，以便我也可以使用它们的文本数据更新新栏，但仍然无法弄清楚。你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:09:21.700

您需要处理`.enter()`选择。代码看起来像这样。

```
svg.selectAll("text")
           .data(dataset)
           .enter()
           .append("text")
           .text(function(d) {
                return d;
           })
           .attr("x", function(d, i) {
                return xScale(i) + xScale.rangeBand() / 2;
           })
           .attr("y", function(d) {
                return h - yScale(d) + 14;
           }); 
```

查看[本教程](http://mbostock.github.io/d3/tutorial/bar-2.html)以获取更多信息。

# java - 我想在 Java Swing 中制作一个 DJ 音乐混音软件（如 Virtual DJ），可以吗？

> ID：16061688
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:41:14.850
> 
> 标签：java, c++, audio

这是我计划的大学项目，我有 2 个月的时间。

下面列出了我需要的四件事。

1.  Virtual DJ 软件的交叉渐变功能。

    基本上，将有 2 个卡座（音乐播放器），并且两个卡座都有一个共同的音量槽口。音量缺口的功能，如下所示。

    考虑一下，左边有甲板 A，右边有甲板 B

    如果从左到右拖动音量槽口

    { 左卡座 A 的音量慢慢淡出，右卡座 B 的音量平行地淡入 }

2.  识别歌曲的 BPM（每分钟节拍数）。

3.  根据 BPM，可以使用音量类型按钮调整歌曲的速度。

4.  创建歌曲的视觉波形。

希望你明白我想说什么。所以，如果可以在 2 个月内完成，那么请帮助我找到合适的音频库，这可以帮助我完成所有这 4 件事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:24:52.013

是的，理论上你可以在 Java 中完成所有这些工作，但你会发现这并不容易。没有很多图书馆可以帮助您，如果您刚刚开始，我认为您会发现两个月的截止日期很棘手：

1.  交叉淡化是一个简单的操作。你可以学会自己做这件事。

2.  识别歌曲的节奏可能是最棘手的事情。我不知道可以做到这一点的Java库。您可以通过启动单独的进程或使用 JNI来使用 C 库[Aubio 。](http://aubio.org/)

3.  可以使用 SoundTouch 调整音高偏移和速度。我相信周围有几个 Java 实现。

4.  你必须自己做这件事。SO上有关于此的其他问题。例如，请参阅我对这个问题的回答：[如何从我的 wav 文件中绘制声音数据？](https://stackoverflow.com/questions/12879210/how-can-i-draw-sound-data-from-my-wav-file)

对于简单的大学项目，这些任务中的任何一项都可能被认为足够好，特别是如果这是入门或中级课程。

# javascript - 如何更改故事信息（打开图表）？

> ID：16061690
> 
> 赞同：0
> 
> 时间：2013-04-17T13:41:17.120
> 
> 标签：javascript, facebook, facebook-opengraph

![在此处输入图像描述](https://i.stack.imgur.com/BwnBJ.jpg)

我创造了新的故事。但正如你所见，它看起来并不好。如何删除（更改）文本（“样本分数”）和链接（samples.ogp.me/23512374_______）并添加其他图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:21:00.117

要更改故事内容，您需要在页面中放置 opengraph 元标记，例如

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/> 
```

这些元标记定义您的故事项目内容。例如...

**如何删除（更改）文本（“样本分数”）？**

ANS：你可以在这里改变它：

```
<meta property="og:title" content="YOUR TEXT"/> 
```

**添加其他图片？**

ANS：你可以在这里改变它：

```
<meta property="og:image" content="YOUR TEXT"/> 
```

有关详细信息，请参阅 [http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

然后它应该可以正常工作:)

* * *

要调试您的页面并查看您是否正确实现了 opengraph 标签，请使用此处的调试器工具：http: [//developers.facebook.com/tools/debug/](http://developers.facebook.com/tools/debug/)

希望有帮助

# permissions - 使用通过 Jenkins 调用的 Msbuild 中的 PsExec 在远程计算机上运行命令

> ID：16061692
> 
> 赞同：0
> 
> 时间：2013-04-17T13:41:26.307
> 
> 标签：permissions, msbuild, jenkins, hudson, psexec

我正在使用 psexec（带有 MSbuild 脚本）在 Jenkins（Hudson）的服务器上运行 xCopy。该命令在通过命令提示符（作为系统用户）运行时运行正常，但在尝试使用 Jenkins 时会出现以下错误。这是我在 Msbuild 脚本中使用的命令：

```
psexec \\<RemoteMachine> /accepteula -i -u <Domian\User> -p <Pass> -s cmd /c xcopy <Path1> <Path2> /e /i 
```

PsExec v1.98 - 远程执行进程 版权所有 (C) 2001-2010 Mark Russinovich Sysinternals - www.sysinternals.com

句柄无效。连接到..

无法访问：正在连接...

```
**error MSB3073: The command "psexec \\<RemoteMachine> /accepteula -i -u <Domian\User> -p <Pass> -s cmd /c xcopy <Path1> <Path2> /e /i  " exited with code 6.** 
```

我尝试了太多选择，但到目前为止没有运气。

有人用詹金斯尝试过同样的事情吗？帮助将不胜感激。有没有其他方法可以使用其他一些工具来实现这一点而没有任何问题。请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:34:02.760

只是想在这里发布解决方案，一段时间后我想通了。

远程计算机应将此用户添加到管理员组中。

这将解决连接问题。:)

# c# - LocalReport 收据打印

> ID：16061697
> 
> 赞同：0
> 
> 时间：2013-04-17T13:41:38.557
> 
> 标签：c#, reporting-services

我正在使用 LocalReport 打印一张 3 英寸的收据，其中的代码来自“[演练：打印没有预览的本地报告](http://msdn.microsoft.com/en-us/library/ms252091.aspx)”

有些打印机要求 DeviceInfo PageWidth 为 8.5 英寸才能正常工作，有些打印机需要 3.0 英寸。似乎报告正在被拉伸以填充错误大小的页面。我尝试调整报告纸张大小和打印机纸张大小，但似乎无法获得正确的组合。

有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T09:05:08.290

我想通了。您需要考虑打印机 dpi。

获取打印机默认页面设置：

```
 PrinterSettings ps = new PrinterSettings();
        ps.PrinterName = printerName;
        this.defaultPageSettings = ps.DefaultPageSettings; 
```

使用该信息构建 DeviceInfo Xml：

```
 private string BuildDeviceInfo()
    {
        StringBuilder returnValue;
        System.Xml.XmlWriter writer;

        returnValue = new StringBuilder(1024);
        writer = System.Xml.XmlWriter.Create(returnValue);

        writer.WriteStartElement("DeviceInfo");
        writer.WriteElementString("OutputFormat", "EMF");

        if (defaultPageSettings != null)
        {
            // DPI will keep the output from scaling in weird ways
            writer.WriteElementString("PrintDpiX", defaultPageSettings.PrinterResolution.X.ToString());
            writer.WriteElementString("PrintDpiY", defaultPageSettings.PrinterResolution.Y.ToString());

            writer.WriteElementString("PageWidth", (defaultPageSettings.PaperSize.Width / 100m).ToString("F2") + "in");
            writer.WriteElementString("PageHeight", (defaultPageSettings.PaperSize.Height / 100m).ToString("F2") + "in");
       }
        writer.Close();

        return returnValue.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T11:42:26.970

这对我有用。我正在从 WPF 应用程序打印到 STAR TSP100 收据打印机。当我自己设置页边距和页面大小时，它会很大，但是当我计算最小页边距和页面大小以及从默认打印机设置中设置 dpi 时，收据打印正确。

我用它来计算最小边距：（H/T [http://www.dreamincode.net/forums/topic/135864-printing-with-minimum-margins-specified-by-the-printer/](http://www.dreamincode.net/forums/topic/135864-printing-with-minimum-margins-specified-by-the-printer/)）

```
Dim minimumMarginLeft, minimumMarginRight, minimumMarginTop,
 minimumMarginBottom As Single

minimumMarginLeft = PrintDialog1.PrinterSettings.DefaultPageSettings.PrintableArea.Left

minimumMarginRight = PrintDialog1.PrinterSettings.DefaultPageSettings.PaperSize.Width - _
                                  PrintDialog1.PrinterSettings.DefaultPageSettings.PrintableArea.Right

minimumMarginTop = PrintDialog1.PrinterSettings.DefaultPageSettings.PrintableArea.Top

minimumMarginBottom =  PrintDialog1.PrinterSettings.DefaultPageSettings.PaperSize.Height - _
                                      PrintDialog1.PrinterSettings.DefaultPageSettings.PrintableArea.Bottom

-I figured this out. You need to account for the printer dpi.

-Get the Printer Default Page Settings:

        PrinterSettings ps = new PrinterSettings();
        ps.PrinterName = printerName;
        this.defaultPageSettings = ps.DefaultPageSettings; The Build the DeviceInfo Xml with that info:

    private string BuildDeviceInfo()
    {
        StringBuilder returnValue;
        System.Xml.XmlWriter writer;

        returnValue = new StringBuilder(1024);
        writer = System.Xml.XmlWriter.Create(returnValue);

        writer.WriteStartElement("DeviceInfo");
        writer.WriteElementString("OutputFormat", "EMF");

        if (defaultPageSettings != null)
        {
            // DPI will keep the output from scaling in weird ways
            writer.WriteElementString("PrintDpiX", defaultPageSettings.PrinterResolution.X.ToString());
            writer.WriteElementString("PrintDpiY", defaultPageSettings.PrinterResolution.Y.ToString());

            writer.WriteElementString("PageWidth", (defaultPageSettings.PaperSize.Width / 100m).ToString("F2") + "in");
            writer.WriteElementString("PageHeight", (defaultPageSettings.PaperSize.Height / 100m).ToString("F2") + "in");
       }
        writer.Close();

        return returnValue.ToString();
    } 
```

# php - 将 rss 发布日期插入 MySQL 数据库

> ID：16061698
> 
> 赞同：2
> 
> 时间：2013-04-17T13:41:45.170
> 
> 标签：php, mysql, rss

我尝试将 rss 发布日期插入我的 MySQL 数据库。日期格式为：

```
Tue, 16 apr 2013 17:04:08 UT 
```

我尝试了不同的函数来格式化这个发布日期，但我在日期中的时区 UT 上有问题。我试过的功能：

```
strftime("%a, %d %b %G %H %M %S", strtotime($pubdate));
date_create_from_format('D, d M Y G:i:s U', $pubdate); 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-29T07:22:06.110

您可以这样做将来自 RSS 提要的 pubdate 插入 mysql DateTime 字段

```
<?php
function pubDateToMySql($str) {
    return date('Y-m-d H:i:s', strtotime($str));
}

$pubDate = 'Wed, 29 Jul 2015 06:59:41 +0000';

$mysql_datetime = pubDateToMySql($pubDate);

echo $mysql_datetime ; 
```

**输出**

```
2015-07-28 23:59:41 
```

参考：[http ://www.timwickstrom.com/server-side-code/php/convert-rss-pubdate-to-mysql-datetime/](http://www.timwickstrom.com/server-side-code/php/convert-rss-pubdate-to-mysql-datetime/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:12:34.460

您正在尝试插入到 mySQL DateTime 字段中吗？所以你的目标是让它采用这种格式（YYYY-MM-DD HH:MM:SS）

您可以使用[strptime](http://php.net/manual/en/function.strptime.php)尝试此操作：

```
$rssdate = "Tue, 16 apr 2013 17:04:08 UT";
$parsed = strptime($rssdate,'%a, %d %b %Y %H:%M:%S %Z'); 
$sqldate = date("Y-m-d H:i:s", mktime($parsed['tm_hour'], $parsed['tm_min'], $parsed['tm_sec'], $parsed['tm_mon']+1, $parsed['tm_mday'], 1900+$parsed['tm_year'])); 
```

之后你应该得到 $sqldate 的值

```
2013-04-16 17:04:08 
```

请注意，`UT`由于 DateTime 字段无法处理它，它将被丢弃。如果您真的需要它，那么如果可以的话，只需将您的行更改为 String 类型。

另一件事，我也尝试使用，`date_create_from_format`但它似乎无法将四月识别为“apr”，因为在格式中它需要像“Apr”一样大写。

# jquery - 仅在特定 div 中运行 jQuery 代码

> ID：16061702
> 
> 赞同：4
> 
> 时间：2013-04-17T13:41:56.330
> 
> 标签：jquery

我在正文中有一个带有 id component-homepage 的主页。此页面在页脚、导航和另一个元素中有一些动画。这些元素在所有其他页面上具有相同的名称。

当元素位于#component-homepage 中时，我想执行 jQuery 代码（js 文件将包含更多的代码）。

```
// This could should be on all the pages
$("nav li:last-child").addClass('last-child');

// This code should only be used when the id #component-homepage is in the body

// Homepage navigatie fadeIn + contentblok animatie
$('#content_home').hide();
$('nav').hide().fadeIn(1200, function(){
    var result = $("#content_home").outerHeight();

$('#content_home_container').css({"margin-top": -Math.abs(result), "height": (result)});

    $('#content_home').css({"margin-top": (result),"display":"block"}).animate({marginTop: '0px'},1000);
});

// Homepage navigatie animatie + url click event
$('nav a').click(function(event){
    event.preventDefault();
    var href = this.href;

    $('nav').animate({
        marginTop: '-635px'}, 
        1000,
        function(){
            window.location = href;
        });
    $('footer').fadeOut(200);
}); 
```

我尝试将代码包装在此：

```
$('#component-homepage').ready(function(){
    // code
}); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T13:42:59.577

将代码包装在此：

```
if ( $('#component-homepage').length ) {
    // code
} 
```

该`.length`方法返回 jQuery 对象中元素的数量，因此只要有多个具有此 ID 的元素，就会转换为 的布尔值`true`，从而运行代码。

**来源**

[.length - jQuery API](http://api.jquery.com/length/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:43:54.647

您可以将上下文传递给您的 jQuery 选择器，它们只能在该范围内工作：

```
$('nav a', someDOMNode) 
```

如果我正确地假设这就是你所追求的......

# sql-server - 在 Azure 上从 IaaS 迁移到 PaaS 有多难

> ID：16061705
> 
> 赞同：2
> 
> 时间：2013-04-17T13:42:04.753
> 
> 标签：sql-server, azure, paas, iaas

所以我正在考虑在 Azure 池中试一试

我们的 Web App Suite 很快就会成为纯 ASP.Net + SQL Server 的事情

由于各种原因，最初创建 SQL VM 并从那里运行所有内容会更简单。

**会有多难...**

*   **...将 SQL 从 VM 迁移到“云服务”或“数据管理”？**
*   **...将 WebApps 套件从 VM 迁移到“网站”？**

据我了解，在实现了此迁移后，操作系统级别的更新将不再是我关心的问题，因为它们将由服务处理。因此，在这一点上，我将能够扔掉原来的 VM :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T20:09:49.440

这并不能完全回答您的问题，但它可能会帮助您了解更多要问的问题，并为您提供动力。这些都是我们将系统迁移到 Azure 之前、期间或之后的经验教训。现在我们已经到了那里，我们有一个约 50GB 的数据库，其中有约 6 个服务在约 30 个实例上运行。只要我们的数据库备份正常运行，升级*所有这些*的总工作量不到一个小时（如果我们没有很多保护措施来迫使我们了解迁移过程中发生的事情，那么可能会少得多过程——我们不希望它*太*容易部署，只是为了保护我们自己）。

**准备将系统迁移到 Azure：**

如果你计划使用 Azure，首先需要确保你的体系结构和技术是兼容的。这并不是说您必须编写所有特定于 Azure 的代码。这意味着以下一些事情：

*   **您应该意识到“高可用性”并不*意味着*“无错误”。**事实上，高可用性环境通常有*更多*您必须处理和管理的错误。例如，如果您有一个请求通过网络发送到刚刚出现主板故障并离线的服务器，则该网络请求将不成功。这通常不是您在“标准”服务器应用程序中编码的问题。更进一步，如果失败的网络是用于被放回连接池的数据库连接怎么办？这将导致该连接在下次有人将其拔出时被毒化并中断，而不管该服务器的未来状态如何！这里有一些额外的事情需要担心，因为您不再依赖于仅具有 4 个服务器的 1 个网络，而是现在依赖于具有数千个服务器的数百个网络。那个0。
*   **您应该使用依赖注入**来轻松地改变周围的事物。适当的关注点分离将使看起来非常困难的更改在 Azure 中变得非常容易。
*   **您应该使用“高可用性”架构**。例如，在 Web 场中运行时会中断的 Web 应用程序也会在 Azure 中中断，但设计为在 Web 场中工作的 Web 应用程序在 Azure 中运行起来非常容易。
*   **您应该**对所有应用程序进行自动化部署和配置转换。其他任何东西都是不可持续的，除非它只不过是一个小网站或类似的东西。
*   根据您的需要，**您可以分阶段进行**。如果数据库延迟不是什么大问题，也许可以采用混合方法（通过从 Azure 到数据中心的 VPN）先在 Azure 中获取应用程序，然后再迁移数据库。或者也许相反。我们所做的是将主要应用程序和数据库保留在我们的数据中心，但首先将辅助应用程序放在 Azure 中。然后是一些主要应用程序（直到一个月的性能受到影响）后来我们的数据库和关键应用程序。最后的迁移确实让我们度过了一个很长的周末，而且睡眠时间也不长，但是现在我们完成了，感觉好多了！

**将应用程序迁移到 Azure：**

这最终在很大程度上取决于您的应用程序是什么或做什么，并且每个场景都有不同的步骤/问题/好处。除了说：“使用 Google，它是你的朋友！”之外，我不会深入讨论这个问题。除此之外，对我们而言，与我们的数据相比，将我们的应用程序放到 Azure 中是最大的回报。在托管成本、许可和管理工作之间，我们的应用迁移的投资回报率不到一个月。与其花几天时间来设置服务器，我现在可以花一天时间来设置我们所有 SaaS 应用程序/数据库/等的全新且重复的环境，并让它们在大约 25 个不同的云实例上运行！

与其试图告诉您如何迁移这些，不如让我提醒您几句警告，以便您早日知道：

*   如果您在 Windows 2012 中遇到应用程序问题，请幽默并在 Windows 2008 R2 中尝试。他们准备的一些 2012 图像中有几个错误。来回切换非常简单！
*   让你的日志记录比现在好 1000 倍。如果你现在不这样做，你会后悔的。
*   不要 100% 依赖于易于实现的“Azure 日志记录”。它工作得很好，但它或多或少需要您的应用程序成功启动，并且在调试启动问题时绝对没用。如果您没有其他选择，那么当您的应用程序启动时，您将浪费很多很多时间来调试愚蠢的小问题。当你完成它时，你可以轻松添加 5 个其他日志框架，并拥有一个非常棒的日志系统以及一个正在运行的应用程序，而不仅仅是一个正在运行的应用程序来显示相同​​的时间。真的，这样做！（分析也是一个好主意，尽管如果您有多个实例，Mini-Profiler 会出现负载平衡问题。）
*   如果您将新端点添加到您的部署（端口等），您**不能**简单地“升级”现有部署。您必须删除它（部署，而不是服务）并从头开始安装。您可以删除 Staging 一个，部署到 Staging，然后交换。
*   如果您有 WCF 应用程序，请假装您不了解 Windows 激活服务。默认情况下，它们在 Azure 中被禁用。您可以破解它们以打开它们（启动脚本）或创建自己的自托管应用程序。我们自托管，因此我们可以在部署后更轻松地调整服务配置（以固定在 Azure 中的方式编辑 web.config 文件并不容易）。Web 服务在 Azure 中的“IIS”中工作，但 TCP、命名管道等不能。
*   去了解并将瞬态错误应用程序块（或等效的东西）添加到您与之通信的任何东西中。如果你现在不这样做，你会后悔的。
*   去让你的日志记录更好！真的，真的，真的要这样做！

**将 SQL Server 数据库迁移到 Azure：**

将数据库放入 Azure 是一个痛苦的过程。没有一种快速简便的方法可以将其安装到那里并使其工作。有些人必须做出一些重大改变，而另一些人只需要在这里和那里调整一些可忽略的事情。然而，无论你的数据库有多大或多小，你真的必须花很多时间来测试它。测试您的迁移过程。测试您的脚本以准备您的数据库。在云端测试数据库的性能和稳定性。测试您的备份程序。测试您的升级程序。测试您的备份恢复程序。测试所有这些，因为我向您保证，您会发现一些惊喜！

架构：

*   **去了解 SQL Azure 的所有限制**。没有堆等。在开始之前学习它们！现在就去学习吧！他们大多都非常合理。
*   **请注意 2GB T-Log 限制**！这意味着一些非常大的索引永远无法重建！（也就是说，我们的 30GB 表还没有达到这个目标）
*   要部署您的架构，请进入本地数据库的 SSMS 并使用“任务 -> 提取数据层应用程序...”功能（它位于不同版本 SSMS 的菜单的不同区域）。获取此文件并进入 Azure 数据库的 SSMS 并使用“部署数据层应用程序”功能。（如果此过程失败，这将帮助您了解*一些*您不遵守的 Azure 限制。）到目前为止，这是将数据库的空版本导入 Azure 的最简单方法。
*   使用 Redgate SQL Compare 之类的工具来验证您的工作（您必须调整几个选项，例如`WITH NOCHECK`获得清晰的比较）。
*   在您成功之前，您必须清理用户、模式、损坏的存储过程等。（这是一件好事！）

数据：

*   **去了解 SQL Azure 的所有限制**。在开始之前学习它们！现在就去学习吧！他们大多都非常合理。
*   从 Codeplex（或最新版本所在的位置）下载 Azure 数据库迁移向导。它不是最棒的软件（有点不稳定），但即使它在您身上崩溃一两次，它仍然可以为您节省大量时间！
*   我**强烈**推荐 RedGate 的 SQL 数据比较。前面提到的迁移向导将帮助您识别问题（由您来解决这些问题），并将让您迁移大约 98%，但您需要在它之后回来清理。它有一些错误会遗漏可空的 BIT 字段（和大写 ascii 字符）以及 SQL 数据比较等工具可以轻松识别和修复的其他一些问题。它还可以让您高枕无忧，您可以依赖您的数据库。
*   如果您的数据库很大，请考虑在 Azure 中启动一个临时 VM（他们预装了 SQL Server 并在大约 20 分钟内可用）来进行迁移。如果您这样做，最好将压缩的数据库备份上传到 Blob 存储（Cerebrata 的存储也非常适合此操作），然后将其抓取并还原到该 VM 中的 SQL Server。然后从那里开始您的迁移！

测试，测试，测试！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:59:04.060

小心在 VM 上运行 SQL，它不是高可用性解决方案。Azure VM 很容易不时重新启动。除非您在可用性组中有多个运行 SQL Server 的 VM，或者您有某种镜像和负载平衡设置，否则您将没有高可用性解决方案。我最初也赞成从 IaaS 到 PaaS 的路线，最后它似乎是一种虚假的经济，因为将 IaaS 迁移到 PaaS 的工作量与将本地迁移到 PaaS 的工作量差不多。最后我决定花时间优化我的 PaaS 应用程序，即将持久存储移动到 blob，实现瞬态错误处理和重试逻辑等。

您提出的建议当然是可能的，但是使用多 VM 安排来提供高可用性 SQL 需要一些工作并且很昂贵！阅读以下指南，当我开始迁移过程时，它对我非常有帮助：

[将 .NET 应用程序迁移到 Azure 的 7 大问题](http://blogs.msdn.com/b/peterlau/archive/2012/04/25/top-7-concerns-of-migrating-an-asp-net-application-to-windows-azure.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:45:52.000

就在昨天，微软宣布了他们计划在其 Azure 平台上托管 Iaas 解决方案，而不仅仅是 Saas 解决方案。 [http://weblogs.asp.net/scottgu/archive/2013/04/16/windows-azure-general-availability-of-infrastructure-as-a-service-iaas.aspx](http://weblogs.asp.net/scottgu/archive/2013/04/16/windows-azure-general-availability-of-infrastructure-as-a-service-iaas.aspx)

关于迁移，这真的取决于。我们使用一种分发机制：TFS + Octopus，因此部署非常简单，它可以在 Iaas 或 SQL Azure 上运行，这并不重要。进入 Saas 时，还需要考虑其他事项。如果您的代码不是面向 Saas 的，或者您的应用程序可能在 Azure 上具有非常高的托管成本，则可能应该重构您的代码。

# automation - 厨师模板通过参数覆盖变量

> ID：16061709
> 
> 赞同：1
> 
> 时间：2013-04-17T13:42:06.563
> 
> 标签：automation, chef-infra, chef-recipe, chef-solo

我是 chef-solo opscode 的新手，没有找到以下方法

我正在编写一个模板并将 data_bag json 作为变量传递给它

### - 食谱

```
HOME = ""

app_config = data_bag_item("config","app")

template "#{HOME}/app/config/database.yml" do
  local true
  source "#{HOME}/app/config/database.yml.erb"
  variables app_config["database.yml"]
endt 
```

### -erb

```
development:
  adapter: <%= @development["adapter"] %>
  database: <%= @development["database"] %>
  username: <%= @development["username"] %>
  password: <%= @development["password"] %>
  encoding: <%= @development["encoding"] %>
  host: <%= @development["host"] %>

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: <%= @test["adapter"] %>
  database: <%= @test["database"] %>
  username: <%= @test["username"] %>
  password: <%= @test["password"] %>
  encoding: <%= @test["encoding"] %>
  host: <%= @test["host"] %>

production:
  adapter: <%= @production["adapter"] %>
  database: <%= @production["database"] %>
  username: <%= @production["username"] %>
  password: <%= @production["password"] %>
  encoding: <%= @production["encoding"] %>
  host: <%= @production["host"] %> 
```

### - 数据包

```
{
  "id" : "app",

   "database.yml" : {
    "development": {
      "adapter"   : "mysql2",
      "database"  : "app_site",
      "username"  : "root",
      "password"  : "",
      "encoding"  : "utf8",
      "host"      : "localhost"
    } ,
    "production" : {
      "adapter"   : "mysql2",
      "database"  : "app_site",
      "username"  : "root",
      "password"  : "",
      "encoding"  : "utf8",
      "host"      : "localhost"
    } ,
    "test": {
      "adapter"   : "mysql2",
      "database"  : "app_site_test",
      "username"  : "root",
      "password"  : "",
      "encoding"  : "utf8",
      "host"      : "localhost"
    }
  },

  "config.yml":{
     "development":{},
     "production" :{},
     "test":{}
  }
} 
```

它一切正常，我想要进一步的是，当我执行它时，如下所示

```
sudo chef-solo -c solo.rb -j solo.json @development["password"]=my_new_passwd 
```

`@development["password"]`应该被覆盖为我传递的新值，而不是来自数据包

任何提示？

或者关于合并两个数据包的任何想法？

编辑：

我想将[http://apidock.com/rails/Hash/deep_merge](http://apidock.com/rails/Hash/deep_merge)添加到 Chef init 的某个地方，因此 Hash 类将提供 deep_merge 方法，知道该放在哪里吗？我尝试在recipe 和solo.rb 的顶部，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:19:14.697

[https://github.com/sensu/sensu-chef/pull/14#issuecomment-16521845](https://github.com/sensu/sensu-chef/pull/14#issuecomment-16521845)

```
HOME = "#{ENV['HOME']}"

app_config = data_bag_item("config","app")
override_config = data_bag_item("config","override")

# merging override into app
Chef::Mixin::DeepMerge.deep_merge! override_config["database.yml"], app_config["database.yml"]

template "#{HOME}/app/config/database.yml" do
  local true
  source "#{HOME}/app/config/database.yml.erb"
  variables app_config["database.yml"]
end 
```

# css - 使用 CSS 突出显示鼠标按下时的 div

> ID：16061714
> 
> 赞同：12
> 
> 时间：2013-04-17T13:42:19.857
> 
> 标签：css

是否可以使用鼠标按下事件突出显示 div（更改其背景颜色）并在鼠标按钮上升时取消突出显示，仅使用 CSS？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T13:44:32.183

我不确定它的支持范围有多广，但这似乎至少有效（在 chrome FF 和 Safari 中）

[http://jsfiddle.net/sQU2V/](http://jsfiddle.net/sQU2V/)

```
 <style>div:active{background:red}</style>
  <div>test</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T13:44:48.163

尝试使用伪类`:active`：

```
yourselector:active {
    background: #F00; // Or whatever
} 
```

演示：http: [//jsfiddle.net/darkajax/JEy9f/](http://jsfiddle.net/darkajax/JEy9f/)

根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/%3aactive)，它应该与 Chrome、Firefox 和 IE 8+ 等兼容...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:46:07.153

是的，您可以使用`:active`选择器。

[这是一个带有示例的 jsFiddle](http://jsfiddle.net/urDhp/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:45:22.797

您是否尝试过 :active 伪选择器？

所以

```
.class:active{
     background:red;
} 
```

# c# - 将数据表添加到动态 PDF

> ID：16061717
> 
> 赞同：0
> 
> 时间：2013-04-17T13:42:23.790
> 
> 标签：c#, dynamicpdf

[动态 PDF 示例](http://www.dynamicpdf.com/Support/NET_Help_Library_12_07/ceTe.DynamicPDF~ceTe.DynamicPDF.PageElements.Row2.html)

我希望能够在 C# 中读取 DataTable 并将其添加到 PDF 文件中。该示例显示了如何一次执行一行，但似乎您必须定义表中的每一行。我无法弄清楚如何将完整的 DataTable 动态添加到网格中。我有循环设置，但是因为每次它不起作用时我都必须添加一个新行。我在下面找到的尝试示例。

```
 DataTable myDT = new DataTable();
        myDT = dbAccessObject.GetDTValues();//just filling DataTable

        // Create a PDF Document
        Document document = new Document();

        // Create a Page and add it to the document
        Page page = new Page();
        document.Pages.Add(page);

        // add Table to PDF
        // Create a table 
        Table table = new Table(20, 100, 600, 600);
        table.Columns.Add(100);
        table.Columns.Add(100);

        Row headers = table.Rows.Add(20, Font.Helvetica, 12);
        string colStr = "name";
        string colStr1 = "desc";
        headers.Cells.Add(colStr);
        headers.Cells.Add(colStr1);
        Row row = table.Rows.Add(20, Font.Helvetica, 12);
        Row row2 = table.Rows.Add(20, Font.Helvetica, 12);
        int i, j;
        i = j = 0;
        while (i < myDT.Rows.Count)
        {
            while(j<myDT.Columns.Count)
            {
            row.Cells.Add(myDT.Rows[i][j].ToString());//need a default row here or way to add directly to the table
                j++;}
            j = 0;
            i++;}

        // Add the table to the page
        page.Elements.Add(table);    

        // Add a label to the page 
        page.Elements.Add(new Label("New PDF Document", 0, 0, 512, 40, Font.Helvetica, 30, TextAlign.Center));

        // Save the PDF document
        document.DrawToWeb("MyDocument.pdf", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:04:09.340

您必须专门构建必要的元素并将其添加到您在 DynamicPDF 中使用的当前页面实例。同样适用于表。您创建了一个 Table 实例，并且对于要添加到表中的每一行，您必须创建一个 Row 实例并相应地填充它。否则，您的循环代码只是一遍又一遍地更新同一行。

例如：

```
while (i < myDT.Rows.Count)
{
    while (j < myDT.Columns.Count)
    {
        Row newRow = table.Rows.Add(20, Font.Helvetica, 12);
        newRow.Cells.Add(myDT.Rows[i][j].ToString());//need a default row here or way to add directly to the table
        j++;
    }
    j = 0;
    i++;
} 
```

# mysql - MYSQL 玩家累计总和

> ID：16061718
> 
> 赞同：2
> 
> 时间：2013-04-17T13:42:24.660
> 
> 标签：mysql

我有一张桌子，上面有球员和他们的分数。我设法创建了一个查询来获取累积总和。我希望查询按玩家对这个累积总和进行分组，以便不包括以前玩家的累积总和，以新玩家的累积总和开始。我使用当前查询获得的结果示例：

```
+--------+--------+-------+
| player | total  | cumul |
+--------+--------+-------+
| Arne   |     16 |    16 |
| Arne   |    -48 |   -32 |
| Arne   |     13 |   -19 |
| Arne   |    -17 |   -36 |
| Arne   |      7 |   -29 |
| Arne   |     41 |    12 |
| Arne   |    -30 |   -18 |
| Arne   |     -6 |   -24 |
| Arne   |     18 |    -6 |
| Bjorg  |     -5 |   -11 |
| Bjorg  |      9 |    -2 |
| Bjorg  |    -38 |   -40 |
| Bjorg  |    -12 |   -52 |
| Bjorg  |     11 |   -41 |
| Bjorg  |      3 |   -38 |
+--------+--------+-------+ 
```

它应该是什么样子：

```
 +--------+--------+-------+
 | speler | total  | cumul |
 +--------+--------+-------+
 | Arne   |     16 |    16 |
 | Arne   |    -48 |   -32 |
 | Arne   |     13 |   -19 |
 | Arne   |    -17 |   -36 |
 | Arne   |      7 |   -29 |
 | Arne   |     41 |    12 |
 | Arne   |    -30 |   -18 |
 | Arne   |     -6 |   -24 |
 | Arne   |     18 |    -6 |
 | Bjorg  |     -5 |    -5 |
 | Bjorg  |      9 |     4 |
 | Bjorg  |    -38 |   -34 |
 | Bjorg  |    -12 |   -46 |
 | Bjorg  |     11 |   -35 |
 | Bjorg  |      3 |   -32 |
 +--------+--------+-------+ 
```

第一个表的问题是第二个玩家使用前一个玩家的累积开始。我应该如何更改我的查询以便在玩家之间切换？

这是我的查询：

```
SELECT t.player,
     t.total,
     @running_total := @running_total + t.total AS cumul
FROM ( SELECT player, id, sum(punten) as total FROM `whiteboard_games` 
WHERE 1 group by player, id) t
JOIN (SELECT @running_total := 0) table1
ORDER BY t.player, id 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:53:01.840

试试这个查询

```
select 
    @score:=if(@prevPlayer = player, @score+total, total) as cumil,
    total, 
    @prevPlayer:=player as player 
from
    (select * from tbl order by player) a join 
    (select @score:=0, @prevPlayer:='') b 
```

**结果**：

```
| CUMIL | TOTAL | PLAYER |
--------------------------
|    16 |    16 |   Arne |
|    34 |    18 |   Arne |
|    28 |    -6 |   Arne |
|    -2 |   -30 |   Arne |
|    39 |    41 |   Arne |
|    46 |     7 |   Arne |
|    29 |   -17 |   Arne |
|    42 |    13 |   Arne |
|    -6 |   -48 |   Arne |
|    11 |    11 |  Bjorg |
|    -1 |   -12 |  Bjorg |
|   -39 |   -38 |  Bjorg |
|   -30 |     9 |  Bjorg |
|   -35 |    -5 |  Bjorg |
|   -32 |     3 |  Bjorg | 
```

## **[小提琴](http://sqlfiddle.com/#!2/e1d62/3)**

# android - 如何在android中使用datepicker设置日期后隐藏editetext的光标

> ID：16061721
> 
> 赞同：0
> 
> 时间：2013-04-17T13:42:34.143
> 
> 标签：android, datepicker, android-edittext

在edittext中设置日期（使用datepicker）后光标不会消失。我希望在设置日期后光标将移动到下一个edittext。这是我设置日期的代码

编辑文本时；静态最终 int DATE_DIALOG_ID = 0;

```
 private int mYear;
    private int mMonth;
    private int mDay;
//in oncreate
when = (EditText) findViewById(R.id.etDate);
final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        when.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                showDialog(DATE_DIALOG_ID);
                return false;
            }
        });
//outside oncreate
@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, mYear, mMonth, mDay);
        }
        return null;
    }

    // updates the date in the EditText

    private void updateDisplay() {
        when.setText(new StringBuilder()
        // Month is 0 based so add 1
                .append(mDay).append("-").append(mMonth + 1).append("-").append(mYear));
    }

    // the callback received when the user "sets" the date in the dialog
    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            updateDisplay();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:09:43.307

在编辑文本中设置日期后，使用以下一个

当.SetFocusable(False);

# c# - 如何在搜索中排除受保护的操作系统文件

> ID：16061724
> 
> 赞同：4
> 
> 时间：2013-04-17T13:42:44.817
> 
> 标签：c#, file, search, directory

（使用 Windows 7 64 位和 C#）

有什么方法可以从搜索中排除这些受保护的文件？

这是显示文件夹中的所有文件，包括“系统文件”

```
string[] files = Directory.GetFiles(directory); 
```

![在此处输入图像描述](https://i.stack.imgur.com/7dqso.png) ![在此处输入图像描述](https://i.stack.imgur.com/PBksJ.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T13:48:29.947

```
var list = new DirectoryInfo(@"C:\").GetFiles()
                .Where(f => !f.Attributes.HasFlag(FileAttributes.System))
                .Select(f => f.FullName)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:48:04.087

您可以使用[FileInfo](http://msdn.microsoft.com/de-de/library/system.io.fileinfo.aspx)。

```
var fileInfo = new FileInfo(path);
if((fileInfo.Attributes & FileAttributes.System) != FileAttributes.System))
{
    // path is not a system file
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:45:33.370

Directory.GetFiles 与所有其他适用于文件系统的 .Net 框架方法一样，不使用资源管理器设置。您可以通过路径获取 FileInfo，然后检查属性以自行过滤掉隐藏文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:52:33.310

对于每个文件，您必须检查文件属性，如下所示

```
FileAttributes att = File.GetAttributes(@"c:\samplefile.dll"); 
```

然后使用以下测试

```
if ((att & FileAttributes.System) == FileAttributes.System)
{
    // the file is system
} 
```

# javascript - 动态嵌套对象数组的递归迭代

> ID：16061736
> 
> 赞同：7
> 
> 时间：2013-04-17T13:43:15.160
> 
> 标签：javascript, jquery, angularjs

我正在使用 Angular JS 及其示例之一：http: [//jsfiddle.net/furf/EJGHX/](http://jsfiddle.net/furf/EJGHX/)

我需要在更新功能发生时获取数据并在发送到服务器之前为其添加一些值。（如果用 Angular 而不是 js 来做这个会更好让我知道）

我正在尝试获取“parentid”和“index”并更新孩子。

**这是我正在循环的数据**

```
{
    "children": [{
        "id": "5",
        "parentid": "0",
        "text": "Device Guides",
        "index": "1",
        "children": [{
            "id": "10",
            "index": "0",
            "text": "Grandstream GXP-21XX"
        }, {
            "id": "11",
            "index": "1",
            "text": "Polycom Soundstation/Soundpoint"
        }, {
            "id": "23",
            "index": "2",
            "text": "New Polycom"
        }]
    }, {
        "id": "6",
        "parentid": "0",
        "text": "Pre-Sales Evaluation",
        "index": "0",
        "children": []
    }, {
        "id": "7",
        "parentid": "0",
        "text": "Router Setup Guides",
        "index": "2",
        "children": [{
            "id": "9",
            "index": "0",
            "text": "Sonicwall"
        }, {
            "id": "12",
            "index": "1",
            "text": "Cisco"
        }]
    }, {
        "id": "9",
        "parentid": "7",
        "text": "Sonicwall",
        "index": "0",
        "children": []
    }, {
        "id": "10",
        "parentid": "5",
        "text": "Grandstream GXP-21XX",
        "index": "0",
        "children": []
    }, {
        "id": "11",
        "parentid": "5",
        "text": "Polycom Soundstation/Soundpoint",
        "index": "1",
        "children": []
    }, {
        "id": "12",
        "parentid": "7",
        "text": "Cisco",
        "index": "1",
        "children": []
    }, {
        "id": "15",
        "parentid": "0",
        "text": "Post-Sales Implementation Check List",
        "index": "7",
        "children": [{
            "id": "16",
            "index": "0",
            "text": "Porting and New Number Details"
        }, {
            "id": "18",
            "index": "1",
            "text": "Partner Setup"
        }, {
            "id": "19",
            "index": "2",
            "text": "test"
        }, {
            "id": "21",
            "index": "3",
            "text": "test"
        }]
    }, {
        "id": "16",
        "parentid": "15",
        "text": "Porting and New Number Details",
        "index": "0",
        "children": []
    }, {
        "id": "18",
        "parentid": "15",
        "text": "Partner Setup",
        "index": "1",
        "children": []
    }, {
        "id": "19",
        "parentid": "15",
        "text": "test",
        "index": "2",
        "children": []
    }, {
        "id": "20",
        "parentid": "0",
        "text": "test",
        "index": "11",
        "children": []
    }, {
        "id": "21",
        "parentid": "15",
        "text": "test",
        "index": "3",
        "children": []
    }, {
        "id": "23",
        "parentid": "5",
        "text": "New Polycom",
        "index": "2",
        "children": []
    }, {
        "id": "24",
        "parentid": "0",
        "text": "Test Markup",
        "index": "14",
        "children": []
    }, {
        "id": "25",
        "parentid": "0",
        "text": "test",
        "index": "15",
        "children": []
    }]
} 
```

* * *

**这就是我目前循环遍历它的方式，但它只获得第一个维度**

```
for (i = 0, l = data.length; i < l; i++) {
    parentid = data[i].id == null ? '0' : data[i].id;
    data[i].index = i;
    if (data[i].children) {
        if (data[i].children.length > 0) {
            for (q = 0, r = data[i].children.length; q < r; q++) {
                data[i].children[q].parentid = parentid;
                data[i].children[q].index = q;
            }
        }
    }
} 
```

**我在另一个小提琴上找到了这个，但我不知道如何获取 parentid 或索引**

```
$.each(target.children, function(key, val) { recursiveFunction(key, val) });

    function recursiveFunction(key, val) {
        actualFunction(key, val);
        var value = val['children'];
        if (value instanceof Object) {
            $.each(value, function(key, val) {
                recursiveFunction(key, val)
            });
        }

    }

function actualFunction(key, val) {} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T14:05:50.280

如果我对您的理解正确，您希望每个“孩子”都有一个`parentID`（由其父级定义；`0`否则）和一个`index`（基于其在同级集中的位置）。

```
function normalize(parent) {
    if (parent && parent.children) {
        for (var i = 0, l = parent.children.length; i < l; ++i) {
            var child = parent.children[i];
            child.index = i;
            if (!child.parentId) child.parentId = parent.id || '0';
            normalize(child);
        }
    }
}

normalize(data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:02:10.723

Recursion is calling function inside the same function. Your sample is not a recursion at all;

```
function runRecursive(input) {
    for (var i = 0, l = input.length; i < l; i++) {
        var current = input[i];

        parentid = current.id == null ? '0' : current.id;
        current.index = i;
        if (current.children && current.children.length > 0) {
            runRecursive(current.children);
        };
    };
};

runRecursive(data.children); 
```

Also you should define i and l with `var` keyword, otherwise it will be located in window context and recursion logic will broken. Though I don't get what is `parentid` variable for and why it defined outside visible code.

# mongodb - mongoDB可以比较字段名而不是字段值吗？

> ID：16061742
> 
> 赞同：4
> 
> 时间：2013-04-17T13:43:24.843
> 
> 标签：mongodb, mongo-java

在定义要返回的字段时`(collection.find(q, fields))`，mongoDB 是否（如何）支持比较字段名称（而不是值）？

例如，根据名称选择一系列字段，而不考虑它们的值。

假设文档中有以下字段（无论值可能是什么）：

```
fieldA000 fieldA001 fieldA002 fieldB000 fieldB001 fieldC000 ... 
```

并且我想限制返回的字段以匹配任何字段名称`fieldA000 to fieldA999`（无需明确定义任何字段名称）或`fieldA.*`（reg ex）或类似名称。

PS：我目前正在评估我们是否可以使用 mongoDB 代替 Cassandra，其中以非常易于使用的方式提供 column-range/slice-select。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:00:02.420

Mongo 没有办法在键名上使用正则表达式来匹配文档。

但是，您可以这样做[`$where`](http://docs.mongodb.org/manual/reference/operator/where/)，让您使用执行 JavaScript 来选择每个文档。的缺点`$where`是它不能利用索引，所以它需要反序列化集合中的每个文档，这对于大多数应用程序来说太慢了。

在 Mongo 中执行此操作的另一种方法是使用`$exists`，`$or`但它需要显式的键名。

对于这种类型的查询，这样的模式会更有效，并且还有助于使用以下方法在服务器上进行切片[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)：

```
{
    dataFields: [
        { id: 'A000', value: 'whatevs' },
        { id: 'A001', value: 'whatevs' },
        { id: 'A002', value: 'whatevs' },
        { id: 'B000', value: 'whatevs' },
        { id: 'B001', value: 'whatevs' },
        { id: 'C000', value: 'whatevs' },
    ]
} 
```

或者：

```
{
    dataFields: [
        { lettter: 'A', number: 0, value: 'whatevs' },
        { lettter: 'A', number: 1, value: 'whatevs' },
        { lettter: 'A', number: 2, value: 'whatevs' },
        { lettter: 'B', number: 0, value: 'whatevs' },
        { lettter: 'B', number: 1, value: 'whatevs' },
        { lettter: 'C', number: 0, value: 'whatevs' },
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:40:45.903

MongoDB 确实允许您为每个查询操作提供一个*投影*，它指定要返回哪些字段。

您不能基于模式包含或排除字段。您可以做的是标记要包含的字段：

db.foo.find({}, {'A000': 1, 'A001': 1, 'B000': 1})

（此查询将返回 _id、A000、A001 和 B000 字段）。

或者，标记要排除的特定字段：

db.foo.find({}, {'B000': 0})

（此查询将返回除 B000 之外的所有字段）。

有关更多信息，请参阅[此链接](http://docs.mongodb.org/manual/core/read-operations/)。

一般来说，使用这样的投影来模拟列切片对于文档数据库来说并不是一个很好的用例——虽然数据不会从数据库服务器返回到客户端（节省网络和客户端解析开销），但它仍然会从磁盘读取（除非覆盖索引可用于返回所有字段），并且必须解析文档以确定要排除哪些部分。

# mongoose - Mongoose：如何将字段组合定义为唯一？

> ID：16061744
> 
> 赞同：71
> 
> 时间：2013-04-17T13:43:33.620
> 
> 标签：mongoose

如果我有这样的架构：

```
var person = new Schema({
  firstName:  String,
  lastName: String,
}); 
```

我想确保只有一个文件具有相同的名字和姓氏。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-17T18:21:04.017

`index`您可以使用对架构的调用来定义唯一的复合索引：

```
person.index({ firstName: 1, lastName: 1}, { unique: true }); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-03-22T04:22:35.487

我最近才通过对 Mongoose 的实验发现的有趣的小东西。例如，我有以下架构：

```
const ShapesSchema = new mongoose.Schema({
  name: { type: String, required: true },
  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' }
})

ShapesSchema.index({ name: 1, user: 1 }, { unique: true })

mongoose.model('Shapes', ShapesSchema) 
```

这个想法是创建一个独一无二的复合`name`索引`user`。这样，只要每个形状都有一个不同的名称，用户就可以创建任意数量的形状。反过来也应该是正确的——形状可以有相同的名称，只要它们有不同的用户。对我来说不是这样。

我注意到除了 on 的索引之外`_id`，还创建了其他三个索引条目。, ,各有一个`name`，`user`并且`name_user`都设置为唯一。我对架构进行了修改，并将其包含`unique: false`在我用于复合索引的每个字段中，突然间一切都按预期工作了。我最终得到的是：

```
const ShapesSchema = new mongoose.Schema({
  name: { type: String, required: true, unique: false },
  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', unique: false }
})

ShapesSchema.index({ name: 1, user: 1 }, { unique: true })

mongoose.model('Shapes', ShapesSchema) 
```

查看结果创建的索引，我仍然看到三个索引 - `name`、`user`和`name_user`。但不同之处在于，前两个不是唯一的，而最后一个是化合物。现在我的每个用户使用多个不同形状的用例，或者具有不同用户的同名形状就像一个冠军。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-27T18:11:13.387

像这样定义你的架构

```
 var person = new Schema({
firstName:  String,
lastName: String,
index: true,
unique: true, 

}); 
```

或者

```
 person.index({ firstName: 1, lastName: 1}, { unique: true }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-08T07:58:21.093

```
const personSchema = new Schema({ firstName:  String, lastName: String });
const person = mongoose.model('recipients', personSchema);
person.createIndexes(); 
```

您可能需要删除集合中的所有重复项，或者以更快更简单的方式进行操作：

> 编辑您的代码，删除集合，然后重新启动 Mongo。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:51:23.463

我还没有尝试过，但是使用唯一索引应该可以解决问题。

```
db.person.ensureIndex( { "firstname": 1, "lastname": 1 }, { unique: true } ) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-12-15T10:31:36.480

您可以像这样定义您的架构。

```
const mongoose = require("mongoose");
const Schema = mongoose.Schema;
const bcrypt = require("bcryptjs");

    const userSchema = new Schema({
      firstName: {
        trim: true,
        type: String,
        required: [true, "firstName is required!"],
        validate(value) {
          if (value.length < 2) {
            throw new Error("firstName is invalid!");
          }
        }
      },
      lastName: {
        trim: true,
        type: String,
        required: [true, "lastName is required!"],
        validate(value) {
          if (value.length < 2) {
            throw new Error("lastName is invalid!");
          }
        }
      },
      username: {
        unique: [true, "Username already available"],
        type: String,
        required: [true, "Username is required"],
        validate(value) {
          if (value.length < 10) {
            throw new Error("Username is invalid!");
          }
        }
      },
      mobile: {
        unique: [true, "Mobile Number alraedy available"],
        type: String,
        required: [true, "Mobile Number is required"],
        validate(value) {
          if (value.length !== 10) {
            throw new Error("Mobile Number is invalid!");
          }
        }
      },
      password: {
        type: String,
        required: [true, "Password is required"],
        validate(value) {
          if (value.length < 8) {
            throw new Error("Password is invalid!");
          }
        }
      },
      gender: {
        type: String
      },
      dob: {
        type: Date,
        default: Date.now()
      },
      address: {
        street: {
          type: String
        },
        city: {
          trim: true,
          type: String
        },
        pin: {
          trim: true,
          type: Number,
          validate(value) {
            if (!(value >= 100000 && value <= 999999)) {
              throw new Error("Pin is invalid!");
            }
          }
        }
      }
      date: { type: Date, default: Date.now }
    }); 
```

# ios - 防止橡皮筋滚动而不禁用 iOS 上的滚动

> ID：16061746
> 
> 赞同：0
> 
> 时间：2013-04-17T13:43:40.160
> 
> 标签：ios, scroll, rubber-band

到目前为止，我所看到的解决 iOS 设备上的橡皮筋滚动问题的当前解决方案完全禁用了滚动。

是否有一个简洁的解决方案可以在不使用标记的情况下禁用效果？

# java - IF语句或其他我没有想到的东西？

> ID：16061750
> 
> 赞同：1
> 
> 时间：2013-04-17T13:43:48.623
> 
> 标签：java, android

我正在制作一个长时间曝光计算器，这允许用户输入他们当前的快门速度，选择一个 EV（曝光值），然后单击计算以计算出等效曝光。

当前快门速度和所需的 EV 变化均从微调器中选择，您可以在此处看到： [https ://dl.dropboxusercontent.com/u/14064960/2013-04-17%2011.31.47.png](https://dl.dropboxusercontent.com/u/14064960/2013-04-17%2011.31.47.png)

由此产生的等效暴露取决于这两个变量。

例如：

当前快门速度：1/100 EV：+1 等效快门速度 = 1/50

当前快门速度：1/100 EV：+2 等效快门速度 = 1/25

我想出如何对所有变量执行此操作的唯一方法是列出所有可能的组合的**MASSIVE** IF 语句：

```
If shutter speed is 1/100 and EV is +2, then equivalent shutter speed is 1/25. 
```

有 20 种不同的快门速度和 10 种不同的 EV 值，所以这将是 IF 的负载。

有人对我怎么可能做到这一点有更好的想法吗？

我不是在追求完整的代码，而是在追求伪代码或一种方法，这样我就可以自己解决了，谢谢。

任何帮助将不胜感激！

***编辑：***

计算公式是，对于每个 EV 增量，快门速度必须加倍，但这很复杂，因为快门速度的格式会发生变化。

1/4000、1/2000、1/1000、1/500、1/250、1/125、1/60、1/30、1/15、1/8、1/4、1/2、1秒、2秒、 4 秒、8 秒、15 秒、30 秒、1 分钟、2 分钟、4 分钟、8 分钟等

**编辑：**

现有代码按要求：

**布局：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/fabricc"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ExpCalc" >

            <ImageView
                android:id="@+id/apertureexample"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:contentDescription="Aperture Example Image"
                android:padding="5dp"
                android:adjustViewBounds="true"
                android:src="@drawable/longexpcalc" />

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Current Shutter Speed:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
            android:id="@+id/Locationspinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:entries="@array/shutterspeeds_array"
            android:padding="10dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="5dp" >

    <LinearLayout
        android:id="@+id/LinearLayout0f4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="EV Adjustment:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView1233"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="2dp"
            android:text="(+6 = 6-stop ND Filter)"
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </LinearLayout>

        <Spinner
            android:id="@+id/evLocationspinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:entries="@array/ev_array"
            android:padding="10dp" />
    </LinearLayout>

        <Button
        android:id="@+id/CalculateEquivExposure"
        style="@style/sub_menu"
        android:background="@drawable/blue_menu_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="5dp"
        android:text="Calculate Equivelent Exposure" />

        <TextView
            android:id="@+id/equivexp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="40dp"
            android:textSize="35sp"
            android:text="1/8000" />
</LinearLayout> 
```

爪哇：

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class ExpCalc extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.expcalc);
        // Show the Up button in the action bar.
        setupActionBar();
    }

    //Sets up Action Bar
    private void setupActionBar() {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.home, menu);
        return true;
    }

    public boolean onPrepareOptionsMenu(Menu menu) {
        return super.onPrepareOptionsMenu(menu);
    }

    //Sets up buttons in the quick menu
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        if (item.getItemId() == R.id.LessonsTutorials) {
            startActivity(new Intent(this, Lessons.class));
        }
        if (item.getItemId() == R.id.PhotoTools) {
            startActivity(new Intent(this, Tools.class));
        }
        if (item.getItemId() == R.id.Glossary) {
            startActivity(new Intent(this, Glossary.class));
        }
        if (item.getItemId() == R.id.Help) {
            startActivity(new Intent(this, Help.class));
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

字符串数组：

```
<string-array name="shutterspeeds_array">
    <item>1/8000</item>
    <item>1/4000</item>
    <item>1/2000</item>
    <item>1/1000</item>
    <item>1/500</item>
    <item>1/250</item>
    <item>1/125</item>
    <item>1/60</item>
    <item>1/30</item>
    <item>1/15</item>
    <item>1/8</item>
    <item>1/4</item>
    <item>1/2</item>
    <item>1 sec</item>
    <item>2 sec</item>
    <item>4 sec</item>
    <item>8 sec</item>
    <item>15 sec</item>
    <item>30 sec</item>
    <item>1 min</item>
</string-array>

<string-array name="ev_array">
    <item>0</item>
    <item>+1</item>
    <item>+2</item>
    <item>+3</item>
    <item>+4</item>
    <item>+5</item>
    <item>+6</item>
    <item>+7</item>
    <item>+8</item>
    <item>+9</item>
    <item>+10</item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:53:24.627

我不想提供完整的代码来复制，因为如果您是为学校项目执行此操作，我宁愿帮助您在我们的帮助下开发答案。

这是一个非常简单的解决方案：

由于您只需要这些确切的值，您就可以在字符串数组中增加一个计数器。此解决方案仅在有明确的最大快门速度时才有效。

```
String[] shutterSpeedValues={"1/4000", "1/2000", etc. } 
```

然后你可以设置第一个 spinner 的 SpinnerAdapter 来使用这个 Array。

对于第二个 Spinner，只需执行相同操作，但将 [0] 映射到 0 并将 [1] 映射到 +1 等。

所以你最终得到：

```
shutterSpeedValues[]
eVValues[] 
```

当用户按下计算按钮时，获取 Spinner 中所选值的项目 ID。你最终得到例如

```
shutterSpeedItemId="3"
evValueItemId="4" 
```

这将对应于选择“1/500”和“+4”的用户

现在你要做的是：

```
 int eqExposureItemId = shutterSpeedItemId+evValueItemId;
   String eqExposure = shutterSpeedValues[eqExposureItemId];
   mySolutionTextView.setText(eqExposure); 
```

*4+3=7 --> 1/30*

您仍然需要解决两个 Spinner 中的高值（不要得到 ArrayOutOfBoundsError）。对此有修复，但首先尝试让它像这样工作。

**编辑：**下面是这个解决方案的完整代码。

**活动**

```
 package com.yallatschikowski.exposurecalculator;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;

public class ExposureCalculatorActivity extends Activity {

    Spinner shutterSpinner;
    Spinner evSpinner;
    String[] shutterValues;
    String[] evValues;
    Button calcButton;
    TextView resultTextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_exposure_calculator);

        // connect the variables to the layout
        shutterSpinner = (Spinner) findViewById(R.id.shutterSpinner);
        evSpinner = (Spinner) findViewById(R.id.evSpinner);
        shutterValues = getResources().getStringArray(
                R.array.shutterspeeds_array);
        evValues = getResources().getStringArray(R.array.ev_array);
        calcButton = (Button) findViewById(R.id.calcBT);
        resultTextView = (TextView) findViewById(R.id.resultTV);

        addItemsOnSpinner();
        addListenerOnButton();
    }

    private void addListenerOnButton() {
        calcButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                int resultID = calculatExposure();

                // check if the resultID is too big
                if (resultID < shutterValues.length) {
                    resultTextView.setText(shutterValues[resultID]);
                } else {
                    resultTextView.setText("Value > 1min");
                }
            }
        });

    }

    protected int calculatExposure() {

        long shutterID = shutterSpinner.getSelectedItemId();
        long evID = evSpinner.getSelectedItemId();
        return (int) (shutterID + evID);
    }

    private void addItemsOnSpinner() {

        ArrayAdapter<String> shutterAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, shutterValues);
        shutterAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        shutterSpinner.setAdapter(shutterAdapter);

        ArrayAdapter<String> evAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, evValues);
        evAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        evSpinner.setAdapter(evAdapter);
    }

} 
```

**我还更改了布局中的一些内容（主要是 ID），将其发布为完整**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@color/grey"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ExpCalc" >

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:padding="5dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:padding="10dp"
            android:text="Current Shutter Speed:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
            android:id="@+id/shutterSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:padding="10dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:padding="5dp" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:padding="10dp"
            android:text="EV Adjustment:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Spinner
            android:id="@+id/evSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"

            android:gravity="right"
            android:padding="10dp" />

    </LinearLayout>

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:padding="2dp"
        android:text="(+6 = 6-stop ND Filter)"
        android:textAppearance="?android:attr/textAppearanceSmall" />

        <Button
        android:id="@+id/calcBT"

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="5dp"
        android:text="Calculate Equivelent Exposure" />

        <TextView
            android:id="@+id/resultTV"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="40dp"
            android:textSize="35sp"
             />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:12:04.080

1.  将快门速度存储在列表中。

2.  获取正确快门速度的索引。

3.  将您的 EV 值添加到索引中。

4.  在该新索引处将正确的速度从列表中拉出。

ymmv

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:48:58.637

你考虑过桌子吗？

```
currentShutterSpeed = table[evID][eqShutterSpeedID]; 
```

其中 和 是对应于表中索引的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:53:42.970

如果您想考虑将数据集存储在数据库中的替代方案，sqllite 是 Android 的答案。为了不将教程复制粘贴到站点中，这里有一个很好的指南链接，您可以使用它来实现一些基本的数据库访问：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

希望这有助于万一你不能只计算价值。我知道有公式，但有时您使用标准表中的四舍五入或近似值，并且在某些数据库中使用这些表可能更容易。

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T13:58:06.003

嵌套的 Switch 语句可以成为减少 if else 阶梯的一种方式。就像有一个用于当前快门速度的 Switch Case，然后在这种情况下使用 Switch 以获得等效的快门速度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T14:16:38.970

您也可以尝试使用装饰器模式。这样您就可以将行为添加到单个对象。所以你用 EV 来装饰快门速度。更多信息[在这里](http://en.wikipedia.org/wiki/Decorator_pattern)。

# opencv - 在 OpenCV 中重新训练 HOG 导致没有命中

> ID：16061760
> 
> 赞同：3
> 
> 时间：2013-04-17T13:44:16.037
> 
> 标签：opencv, detection, svm, training-data

我目前正在尝试使用带有 HOG 描述符的 OpenCV 2.4.4 来计算汽车。因为汽车检测模型在 OpenCV 中不可用（与已经有检测器模型的人员检测器不同），我正在使用 SVMLight 和来自 INRIA 汽车数据集的汽车数据集创建我自己的模型[（](http://lear.inrialpes.fr/data)正样本和负样本）。

然后我使用带有 SVMLight 的正负样本创建模型（将图像大小调整为 128 * 104，因为 HOG 图像必须是 2 的幂），遵循[本](http://opencv.willowgarage.com/wiki/trainHOG)教程和代码。我将模型应用于我的程序，它可以正确检测汽车，但也有很多误报（每张图像 3-8 个误报）

我阅读了 HOG Detector 的 Dalal 论文，发现需要使用通过将初步模型应用于负样本而发现的误报来重新训练模型。生成的补丁大小不同，所以我再次将其调整为 128*104 像素。

我像初步运行一样使用正负样本重新运行 HOG 训练程序，但是这次在负样本上添加了误报（这是我根据 Dalal 的论文认为的重新训练）。然后我有重新训练的模型。

不幸的是，我使用新模型运行汽车检测程序，但是尽管我使用了正样本图像和其他包含汽车的图像，但所有图像都没有检测到汽车。

这很有趣，我很好奇你们是否能指出我做错了什么。任何讨论或问题也值得赞赏！

我尝试了同样的事情，现在使用行人图像。结果还是一样，初步模型导致很多误报。再训练后，结果是没有命中（0.0命中阈值）。如果我将命中阈值降低到 -0.1 到 -0.5，则检测到正面图像，但命中率很低（50-70%）。好吧，我想这最终是关于命中率和误报之间的权衡，但是，再训练可以让模型更准确

**编辑** 在这个论坛搜索后，我认为对于我的相机是静态的系统，如果我使用背景分割和斑点跟踪会更好。我目前不再探索 HOG，但是对于任何知道 HOG 训练和检测问题出在哪里的人，也许您想在这里发布答案以帮助其他有相同问题的人

# groovy - XmlSlurper：如何更改动态节点的文本

> ID：16061762
> 
> 赞同：6
> 
> 时间：2013-04-17T13:44:17.120
> 
> 标签：groovy, xmlslurper

```
<Messdaten>
  <EL_NR>NAYP99</EL_NR>
  <EL_NR_Original/>
  <Erfassungsdatum>2012-12-12 11:58:54.000</Erfassungsdatum>
  <Massnahme>Lot_Hold</Massnahme>
  <Anzahl_x0020_R>50</Anzahl_x0020_R>
  <FEHLER>OK</FEHLER>
  <SEQ>72</SEQ>
</Messdaten> 
```

那是我的 XML，我想更改节点“Anzahl_x0020_R”的值。问题是，在运行时我不知道确切的名称。我只知道要更改的节点将以'Anzahl'开头。所以我这样做了：

```
messdatenXML.childNodes().each { merkmal ->
    if (merkmal.name.contains('Anzahl')) {
        messdatenXML.merkmal = "my_new_value";
    }
} 
```

问题是，它不起作用，价值将保持不变。如果我做：

```
messdatenXML.Anzahl_x0020_R = "my_new_value" 
```

它会起作用，但正如我之前所说，我不知道运行时的确切名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T13:50:18.300

我相信你需要`replaceBody`像这样使用：

```
messdatenXML.'**'.findAll { it.name().startsWith 'Anzahl' }.each { node ->
  node.replaceBody 'my new value'
}
println groovy.xml.XmlUtil.serialize( messdatenXML ) 
```

# r - ggplot2堆积面积图上的误差线

> ID：16061780
> 
> 赞同：2
> 
> 时间：2013-04-17T13:45:05.570
> 
> 标签：r, ggplot2, stacked-area-chart

我想在使用`ggplot2`.

我的 csv 文件如下所示：

```
Day  Cat  Val   Error  
0    A    0     0.00  
0    B   44.77  1.16  
0    C   54.64  0.88  
13   A   1.34   0.32  
13   B   22.78  0.45  
13   C   38.33  2.12  
19   A   1.95   0.35  
19   B   24.00  2.25  
19   C   40.30  3.86 
```

我试过这个：

```
ggplot(data=mydata, aes(x=Day,y=Val, group=Cat, fill=Cat,colour=Cat, ymax=Val + Error,   ymin= Val - Error)) +
 geom_area() +
 geom_errorbar(width=.5, color="black") 
```

我有这个：

![在此处输入图像描述](https://i.stack.imgur.com/bFqBT.png)

我对图表的面积图部分感到满意​​，但误差条没有堆叠在数据点上。

我刚刚开始，`R`我真的不知道问题是什么。

此外，我发现这个[技巧](https://stackoverflow.com/questions/10417003/stacked-barplot-with-errorbars-using-ggplot2)可以`geom_segment`用来避免条形之间的重叠，但我没有在这段代码中使用它。

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:37:33.630

您正在堆叠您的数据，但不是您的错误栏。要计算错误栏和错误栏的堆叠版本，`ymin`您`ymax`可以使用包的`ddply`功能`plyr`。

```
library(plyr) 
mydata2 <- ddply(mydata,.(Day),transform,ybegin = cumsum(Val) - Error,yend = cumsum(Val) + Error)   

ggplot(data=mydata2, aes(x=Day,y=Val, fill=Cat)) +
     geom_area() +
     geom_errorbar(aes(ymax=ybegin , ymin= yend ),width=.5, color="black") 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/fnYp8.png)

# jquery - 切换布局时的jquery同位素容器高度宽度

> ID：16061790
> 
> 赞同：3
> 
> 时间：2013-04-17T13:45:38.670
> 
> 标签：jquery, layout, styles, responsive-design, jquery-isotope

我有一个脚本，允许在 masonryHorizo​​ntal 和 masonry 之间切换布局。切换功能似乎正常工作。

但是我对容器同位素尺寸有疑问。

使用水平砌体布局，我希望容器高度始终等于 3 个项目的高度。它工作正常，但是当我切换时一切都会中断。是马车。

当我在砌体布局上调整 Windows 浏览器的大小时，行为非常奇怪。容器似乎比窗户的宽度更大。该行为看起来像砌体水平。

我认为部分错误来自切换点击功能：

```
$('.toggle-view').click( function() {
    $('.prev').toggleClass('hidden');
    $('.next').toggleClass('hidden');
    $('.scrollable').toggleClass('hidden');
    $('#container-scroll').toggleClass('horizontal');
    $('#container-scroll').toggleClass('vertical');
    $('#container').toggleClass('vertical');
    isVertical = !isVertical;
    var sizeStyle = isVertical ?
       { width: '100%', maxWidth: '100%', height:  height } :
       { width: '100%', maxWidth: '100%', height: '100%' };
    var redraw = $container[0].offsetHeight;
    $container.removeClass('no-transition')
    .isotope({
        layoutMode: isVertical ? 'masonryHorizontal' : 'perfectMasonry' 
    });
}); 
```

这里有一个小提琴：http: [//jsfiddle.net/bB9WC/1/](http://jsfiddle.net/bB9WC/1/)

我花了大约 15 个小时来解决这个问题，但没有成功。

我认为这是 jquery 样式宽度和高度容器的问题。这里允许计算两个布局的容器高度的脚本。

```
function checkContainerHeight() {
if ($('#container-scroll').hasClass('horizontal')) {
    height = Math.round(colW*ratio)*HIsotopeRows+20;
    $('#container-scroll').css({ minHeight: height });
    $('#container').css({ minHeight: height });
    }
if ($('#container-scroll').hasClass('vertical')) {
    $('#container-scroll').css({ minHeight: '100%' });
    $('#container').css({ minHeight: '100%' });
    }
}

$(window).smartresize(function() {
    checkContainerHeight();
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:48:02.973

您没有正确设置容器的高度样式。不要在切换点击功能中应用任何样式。

您必须添加 minHeight、maxHeight 和 height。并在切换布局时清除所有内容。

这里的小提琴正常工作：http: [//jsfiddle.net/e5YMf/1/](http://jsfiddle.net/e5YMf/1/)

```
function checkContainerHeight() {
if ($('#container-scroll').hasClass('horizontal')) {
    height = Math.round(colW*ratio)*HIsotopeRows+20;
    $('#container-scroll').css({ height: '' });
    $('#container').css({ height: '' });
    $('#container-scroll').css({ minHeight: height });
    $('#container').css({ minHeight: height });
    $('#container-scroll').css({ maxHeight: height });
    $('#container').css({ maxHeight: height });
    }
if ($('#container-scroll').hasClass('vertical')) {
    $('#container-scroll').css({ maxHeight: '' });
    $('#container').css({ maxHeight: '' });
    $('#container-scroll').css({ height: '100%' });
    $('#container').css({ height: '100%' });
    }
}

function InitializeIsotope() {
$('#container').isotope({
    layoutMode: 'masonryHorizontal',
    masonryHorizontal: {
    rowHeight:  Math.round(colW*ratio),
    }
});
}

function checkIsotope() {   
if ($('#container-scroll').hasClass('horizontal')) {
    $container.isotope({
        layoutMode: 'masonryHorizontal',
        masonryHorizontal: {
        rowHeight:  Math.round(colW*ratio),
        }
    });
}
if ($('#container-scroll').hasClass('vertical')) {
    $container.isotope({
        layoutMode: 'perfectMasonry',
        perfectMasonry: {
        columnWidth: colW,
        rowHeight:  Math.round(colW*ratio),
            },
        });
        }
}

$(window).smartresize(function() {
    checkWidth();
    checkContainerHeight();
    checkIsotope(); 
})

checkWidth();
checkContainerHeight();
checkIsotope();
InitializeIsotope();

$('.toggle-view').click( function() {
$('.prev').toggleClass('hidden');
$('.next').toggleClass('hidden');
$('.scrollable').toggleClass('hidden');
$('#container-scroll').toggleClass('horizontal');
$('#container-scroll').toggleClass('vertical');
$('#container').toggleClass('horizontal');
$('#container').toggleClass('vertical');
checkWidth();   
checkContainerHeight(); 
checkIsotope();
$('#container').isotope( 'reLayout', $items, callback );
}); 
```

# javascript - Localstorage IE10 javascript FirstRun 上的就绪代码

> ID：16061795
> 
> 赞同：0
> 
> 时间：2013-04-17T13:45:46.517
> 
> 标签：javascript, local-storage, internet-explorer-10

这在 IE10 中中断我认为可能所有 IE 版本不仅仅是 10，但尝试编写 Windows 应用程序可能会让人头疼。

```
var firstRun = (localStorage['firstRun'] == 'true');

if (!firstRun) {
  localStorage['firstRun'] = 'true';
  localStorage.money = 100;
} 
```

我不确定我是否能弄清楚如何重写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T20:36:12.067

我想你正在使用文件协议。不要使用文件 URI 方案，因为本地存储不能以这种方式在 ie10 中工作。安装一些服务器并通过 localhost 访问。

# jenkins - 在 Jenkins CI 中，如何将项目的构建触发器设置为可选

> ID：16061800
> 
> 赞同：0
> 
> 时间：2013-04-17T13:45:56.843
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

我正在运行 Jenkins 1.51 并且有一个项目，一旦完成，它将触发一堆其他构建。有没有办法让这些触发器成为可选的，以便它们只在用户想要它们时运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:09:42.203

考虑使用[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)或[条件构建步骤插件等插件](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)。

# iphone - UICollectionview 中的不同单元格大小

> ID：16061804
> 
> 赞同：24
> 
> 时间：2013-04-17T13:46:07.017
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell

在我的 iphone 应用程序中，我在集合视图上显示图像。我从 url 获取图像，使用 url 我也得到图像大小。例如：-假设有风景和肖像两种图像。肖像图像的值是P，风景图像的值是L

如何自定义 collectionView 单元格的大小？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-17T13:55:20.670

使用此`UICollectionViewDelegateFlowLayout`方法

```
 - (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-19T12:24:52.763

1) You could maintain and swap out multiple layout objects, but there's a simpler way. Just add the following to your UICollectionViewController subclass and adjust the sizes as required:

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{    
    // Adjust cell size for orientation
    if (UIDeviceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
        return CGSizeMake(170.f, 170.f);
    }
    return CGSizeMake(192.f, 192.f);
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self.collectionView performBatchUpdates:nil completion:nil];
} 
```

Calling `-performBatchUpdates:completion:` will invalidate the layout and resize the cells with animation (you can just pass nil to both block params if you've no extra adjustments to perform).

2) Instead of hardcoding the item sizes in `-collectionView:layout:sizeForItemAtIndexPath`, just divide the height or width of the collectionView's bounds by the number of cells you want to fit on screen. Use the height if your `UICollectionView` scrolls horizontally or the width if it scrolls vertically.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-06T23:48:06.520

这就是我所做的。我首先根据屏幕的大小设置单元格的大小（这样我们就可以在每一行上获得最佳的图像数量）。您可能需要更改数字以适合您的原因。

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath{
CGFloat widthOfCell =(self.view.frame.size.width-30)/2;
CGFloat heightOfCell =widthOfCell * 1.33;
CGSize returnValue = CGSizeMake(widthOfCell, heightOfCell);
returnValue.height += 5; 
returnValue.width += 5; 
return returnValue;

} 
```

然后我使用图像处理方法来确定横向或纵向状态，并且（对于我的应用程序）我决定将每张图片都设为纵向：

```
 if (sourceImage.size.width>sourceImage.size.height) {
    sourceImage = [[UIImage alloc] initWithCGImage: sourceImage.CGImage
                                             scale: 1.0
                                       orientation: UIImageOrientationRight];
    } 
```

如果你想反过来，换`>`用`<`

注意：我的旋转方法没有考虑图片是指向左还是右。换句话说，如果图像是倒置的横向，我的代码将无法识别。我希望其他人可以帮助你，我希望我没有偏离轨道！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-09T14:24:51.177

为了快速将流程布局扩展到您的视图控制器，如果您需要在单元格上显示动态图像，请制作变量，该变量将图像名称保存到您的视图控制器中并使用：

```
let imageData = ["image1","image2","image3","image4"]

extension yourViewController: UICollectionViewDataSource,UICollectionViewDelegate,UICollectionViewDelegateFlowLayout{
  func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {

    let photo = UIImage(named: imageData[indexPath.row])
        return CGSize(width: (photo?.size.width)!, height: (photo?.size.height)!)

} 
```

}

# sql - 在返回一行结果的 SELECT 中创建一个子查询

> ID：16061810
> 
> 赞同：0
> 
> 时间：2013-04-17T13:46:13.530
> 
> 标签：sql, optimization

我们可以在返回一行结果的 SELECT 中创建一个子查询吗？

例如，我必须使用如下查询：

```
SELECT columnA as aliasA, columnB as aliasB,
(SELECT columnC FROM table2
WHERE clause2) as aliasC,
(SELECT  columnD FROM table2
WHERE clause2) as  aliasD
FROM table1
WHERE clause1 
```

我想改进它，因为它需要太多时间来执行。有什么方法可以创建查询，例如：

```
SELECT columnA as aliasA, columnB as aliasB,
(SELECT columnC, columnD FROM table2
WHERE clause2) as (aliasC, aliasD)
FROM table1
WHERE clause1 
```

谢谢

注意：更具体地说，我举一个例子：我需要在第一季度的每个月获得学生的最佳和最差成绩。如果我加入表格，我将为同一个学生提供不止一行（每个月一个）但我需要：

```
SELECT firstname, lastname, 
(SELECT MAX(value) FROM results WHERE results.student_id = student.id AND results.date
BETWEEN 'JAN-01' AND 'JAN-31') AS best_result_of_jan,
(SELECT MIN(value) FROM results WHERE results.student_id = student.id AND results.date
BETWEEN 'JAN-01' AND 'JAN-31') AS worst_result_of_jan,
 ..., 
(SELECT MIN(value) FROM results WHERE results.student_id = student.id 
AND results.date BETWEEN 'MAR-01' AND 'MAR-31') AS worst_result_of_mar 
FROM student 
WHERE student.has_maths = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:48:49.823

**编辑**

```
SELECT s.firstname, s.lastname,
       t.best_result_of_jan, t.worst_result_of_mar
FROM student s 
LEFT JOIN (
    (SELECT student_id,
            MAX(CASE WHEN results.date BETWEEN 'JAN-01' AND 'JAN-31'
                     THEN value ELSE NULL END) best_result_of_jan,
            MIN(CASE WHEN results.date BETWEEN 'MAR-01' AND 'MAR-31'
                     THEN value ELSE NULL END) worst_result_of_mar
     FROM results
     GROUP BY student_id
    ) t ON t.student_id = s.id
WHERE s.has_maths = 1 
```

子查询将数据透视到每个学生所需的列中。然后，外部查询将这些列添加到学生表列中。

* * *

首先，只有当子查询返回标量结果（即单行或无）时，您的原始查询才会起作用。这样可以安全地转换为 LEFT JOIN 表单，这也可能导致单行（无笛卡尔积）或无行（fizzed join）。

```
 SELECT a.columnA as aliasA, a.columnB as aliasB,
          b.columnC as aliasC, b.columnD as aliasD
     FROM table1 a
LEFT JOIN table2 b ON clause2
    WHERE clause1; 
```

确保为第 1 和 2 条中的列设置别名。

注意：此类查询的计划将导致 table2 被处理一次，并且 columnC/D 被解析。您的原始查询可能会导致子查询逐行执行，并导致两次启动，因此缺乏性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:48:20.730

您想要加入，例如：

```
SELECT table1.columnA as aliasA, table1.columnB as aliasB, 
       table2.columnC as aliasC,
       table2.columnD as aliasD
FROM table1 left outer join
     table2
     on clause2
WHERE clause1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:17:18.043

在您的查询中，如果数据范围参数相同，那么您可以编写一个带有最小值和最大值字段的单个选择语句。在您当前的情况下，除了其他解决方案之外，您可以尝试使用 UNION ALL 语句并组合两组查询。这可能比子查询方法更快。例子：

```
Select A.FirstName,
   A.LastName,
   Sum(A.Best_JAN) as BEST_JAN,
   sum(A.Worst_MAR) as WORST_MAR
From (

    Select student.FirstName,
            student.LastName,
            MAX(result.value) as Best_JAN,
            0 as Worst_MAR
      From Student, Results
     Where Student.Studentid = Results.studentid
       and results.date BETWEEN 'JAN-01' AND 'JAN-31'
     Group By student.FirstName, student.LastName

    Union ALL

    Select student.FirstName,
           student.LastName,
           0 as Best_JAN,
           MIN(result.value) as Worst_MAR
      From Student, Results
     Where Student.Studentid = Results.studentid
       And results.date BETWEEN 'MAR-01' AND 'MAR-31'
     Group By student.FirstName, student.LastName

  ) as A

  Group By A.FirstName, A.LastName 
```

# node.js - 与护照、mongodb 和 express 的持久会话

> ID：16061811
> 
> 赞同：19
> 
> 时间：2013-04-17T13:46:17.377
> 
> 标签：node.js, mongodb, express, passport.js

我正在使用护照来处理我的应用程序中的身份验证和会话。我正在使用 mongostore 将会话持久化到 mongodb。

该设置通常工作正常。但是，当我重新启动服务器时，所有用户都已注销，因此显然会话保留在内存中，而不是仅保留到 mongodb。我正在尝试实现重新启动服务器时用户仍然登录的设置。

基本配置如下

# 中间件

```
 app.use(express.cookieParser('your secret here'));
    app.use(express.session());
    app.use(passport.initialize());
    app.use(passport.session({
        maxAge: new Date(Date.now() + 3600000),
        store: new MongoStore(
            {
                db: mongodb.Db(
                    conf.mongodbName,
                    new mongodb.Server(
                        'localhost',
                        27017,
                        {
                            auto_reconnect: true,
                            native_parser: true
                        }
                    ),
                    {
                        journal: true
                    }
                )
            },
            function(error) {
                if(error) {
                    return console.error('Failed connecting mongostore for storing session data. %s', error.stack);
                }
                return console.log('Connected mongostore for storing session data');
            }
        )
    })); 
```

# 护照

```
passport.use(new LocalStrategy(
    {
        usernameField: 'email',
        passwordField: 'password'
    },
    function(email, password, done) {
        console.log('user %s attempting to authenticated', email);
        return User.findOne({email:email}, function(error, user) {
            if(error) {
                console.error('Failed saving user %s. %s', user.id, error.stack);
                return done(error);
            }
            if(!user) {
                return done(null, false);
            }
            console.log('user %s logged in successfully', user.id);
            return done(null, { //passed to callback of passport.serializeUser
                id : user.id
            });
        });
    }
));

passport.serializeUser(function(user, done) {
    return done(null, user.id); //this is the 'user' property saved in req.session.passport.user
});

passport.deserializeUser(function (id, done) {
    return User.findOne({ id: id }, function (error, user) {
        return done(error, user);
    });
}); 
```

# github repo（包括运行代码所需的所有代码）

我创建了一个准系统 github 存储库，包括[此处的代码](https://github.com/forste/passport-persistent-sessions)

只需使用您的 mongodb 凭据（即 mongodbURL 和 mongodbName）在根目录中创建一个 conf.js 文件，运行 npm install 和 node app.js 即可开始。

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-17T13:49:16.633

`passport.session()`不需要任何配置，从 Express 版本 4.X 开始，`session()`您需要配置：

```
app.use(session({
  cookie : {
    maxAge: 3600000 // see below
  },
  store : new MongoStore(...)
});
...
app.use(passport.session()); 
```

此外，`maxAge`（应该是 的属性`cookie`）不带`Date`参数，而只是会话应该有效的毫秒数。

有关使用 express 中间件模块会话的说明，您可以在[此处](https://github.com/expressjs/session)找到更多信息。

# java - for循环遍历java中的偶数

> ID：16061812
> 
> 赞同：1
> 
> 时间：2013-04-17T13:46:18.800
> 
> 标签：java, arrays

我认为以下应该这样做 - 但似乎并非如此。

```
int[] jokes=new int[]{5,7,8,9,3,4,6,1,7};
        for(int k=0;k<jokes.length && jokes[k]%2==0;k++){
            System.out.println(jokes[k]);
        } 
```

无论如何，在函数内进行评估都会起作用 - 但想检查是否有办法在 for 循环定义本身中过滤搜索（也许通过在循环定义本身中调用函数？）如果我们能实现那将非常酷.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:50:01.003

尝试这个：

```
 for(int k=0; k< jokes.length; k+=2){ 
     System.out.println(items[k]); 
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:53:33.883

试试看

```
int[] jokes = new int[] { 5, 7, 8, 9, 3, 4, 6, 1, 7 };

for (int k = 0; k < jokes.length ; k++) {
    if (jokes[k] % 2 == 0) {
        System.out.println(jokes[k]);
    }           
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:49:04.287

您的循环将持续到`k < jokes.length && jokes[k] % 2 == 0`错误为止。
因此，对于您的示例输入，它将立即退出。

您需要将检查放入循环中：

```
int[] jokes = new int[] { 5, 7, 8, 9, 3, 4, 6, 1, 7 };
for (int k = 0; k < jokes.length; k++) {
    if (jokes[k] % 2 == 0) {
        System.out.println(jokes[k]);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T13:48:18.783

没有理由把事情复杂化。

```
int[] jokes = new int[]{5,7,8,9,3,4,6,1,7}
for(int k = 0; k < jokes.length; k++){
    if(jokes[k] % 2 == 0){
        System.out.println(jokes[k]);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T13:50:58.137

也许您想在`k`每个迭代步骤中增加 2？

```
for(int k=0; k<jokes.length; k+=2){
    System.out.println(items[k]);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T13:49:21.373

```
int[] jokes=new int[]{5,7,8,9,3,4,6,1,7};
for(int k=0; k<jokes.length; k++){
    if(jokes[k]%2 == 0){
        System.out.println(jokes[k]);
    }
} 
```

在循环内进行检查以允许`for`语句遍历整个数组。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T13:49:25.247

循环中的第二个条件`for`将在循环中看到笑话[k] 中的奇数时立即停止。所以我会将其重写为：

```
 int[] jokes=new int[]{5,7,8,9,3,4,6,1,7};
    for(int k=0;k<jokes.length;k++){
        if (jokes[k]%2 == 0)
        {
            System.out.println(items[k]);
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T13:50:59.933

您正在遍历`jokes`数组，但打印完全`items[k]`是**另一个数组**。这应该做。

```
 int[] jokes=new int[]{5,7,8,9,3,4,6,1,7,2,10,-2,-1};
        for(int k=0;k <jokes.length ;k++){
            if(jokes[k] % 2 == 0)
            {
                System.out.println(jokes[k]);
            }
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T13:51:12.367

我不确定您要做什么，但下面的代码可以解决问题。请注意， System.out.println 应该有笑话[k] 而不是 items[k]

```
 int[] jokes=new int[]{5,7,8,9,3,4,6,1,7};
        for(int k=0;k<jokes.length;k++){
            if (jokes[k]%2==0)
                System.out.println(jokes[k]);
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-17T13:48:51.443

这是固定代码。

```
 int[] jokes=new int[]{5,7,8,9,3,4,6,1,7};
    for(int k=0;k<jokes.length;k++){
        if (jokes[k]%2==0) {
               System.out.println(items[k]);
        }
    } 
```

检查它。这很容易理解。

# visual-studio - Visual Studio 2008 中的主报告预览停止工作“一个或多个字段不计数...”

> ID：16061818
> 
> 赞同：0
> 
> 时间：2013-04-17T13:46:43.553
> 
> 标签：visual-studio, visual-studio-2008, crystal-reports

当我在 Visual Studio 中从主报告切换到主报告预览时，出现以下错误：

> 在结果集中找不到一个或多个字段。使用验证数据库更新报告。

我运行验证数据库，它说数据库是最新的。此外，当我运行应用程序时，报告工作。只是主报告预览有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T14:12:51.860

我有同样的问题，并收到此错误消息：

在结果集中找不到一个或多个字段。使用验证数据库更新报告。文件文件名 {9FEE6406-1613-409A-B9BD-C5FDA24E3DEE}.rpt 中的错误：

找不到行集列。

我使用存储过程为报告收集数据，果然我为 SP 传递了一个无效参数。如果您使用 SP 填充报告数据，请仔细检查参数的类型和值。

祝你好运！

# c# - Winform Trackbar 值

> ID：16061822
> 
> 赞同：0
> 
> 时间：2013-04-17T13:46:58.953
> 
> 标签：c#, winforms, trackbar

我正在尝试在winform中制作一个滑块。但是我需要我的滑块在整数以外的值之间移动。

例如，我已将我的轨迹栏设置为 0 - 2 的比例，但它只允许我设置为 0、1 或 2，当我需要将其设置为 0.01、0.02、0.03、0.04 等时。

这甚至可以通过轨迹栏实现吗？如果是这样，这怎么可能？我的谷歌搜索没有出现任何东西。

# asp.net - ASP.NET MVC3 - 如何配置 Url 以在 Url 中用破折号（-）替换空格？

> ID：16061826
> 
> 赞同：2
> 
> 时间：2013-04-17T13:47:07.623
> 
> 标签：asp.net, asp.net-mvc-3

我想问如何在我的网址中用破折号（-）替换空格。我的详细信息操作有一个标题 url，问题是单词之间出现空格而不是破折号（-）。

例如：

我的网址：~/khoa-hoc/1/Lớp Luyện Thi

但我想要：
step1-> 1\. ~/khoa-hoc/1/Lớp-Luyện-Thi step2-> 2\. ~/khoa-hoc/1/lop-luyen-thi

我的路线

```
 my route routes.MapRoute( null,
      "khoa-hoc/{id}/{title}",
      new { controller = "Course", action = "Details", id = "", title=""},
      new { id = @"\d+" } ); 
```

我的观点：@Html.ActionLink(item.Name, "Details", new { id = item.CourseID, title=item.Title })

我已经搜索了一些关于此的主题，但直到现在我仍然没有解决这个问题，希望有人可以帮助我，提前感谢，对不起我的英语语言不完美。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:54:47.587

在 url 的路径部分中包含任意文本是您可能会遇到的问题。Scott Hanselman 详细解释了如果您尝试在[`following blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx). 在他的帖子末尾，这是他针对这种情况提出的建议：

> 在为在请求路径中获得疯狂的东西所做的所有努力之后，值得一提的是，简单地将值保留为查询字符串的一部分（还记得本文开头的 WAY 吗？）更容易、更清洁、更灵活，而且更多安全的。

话虽如此，您可能想要反对此建议，并且仍然尝试在您的 url 的路径部分中使用此类任意文本。就像 StackOverflow 在这里的问题标题一样。在构建 slug 时，您可以使用过滤功能来替换所有危险字符。他们是这样的[`generate those SEO friendly urls`](https://stackoverflow.com/a/25486/29407)。

# yii - Cgridview 列中的下拉列表，将 ajax 加载到数据库

> ID：16061828
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:16.740
> 
> 标签：yii

我有一些问题。所以基本上我试图在 CGridView 列中创建下拉列表来管理状态。我想将 onchange 加载到数据库。这是网格列：

```
array(
        'name'=>'status',
        'type'=>'raw',
        'value'=>'CHtml::dropDownlist(\'status\',\'\',array(\'1\'=>\'Complete\',
                        \'2\'=>\'Paid\',
        \'3\'=>\'Not paid\'),array(
                                    \'class\'=>\'status\',
                                    \'options\'=>array($data->status=>array(\'selected\'=>\'selected\')),
                                    \'ajax\'=>array(
                                        \'type\' => \'POST\',
                                        \'url\'=>Yii::app()->createUrl(\'user/orders/status\'),                        
                                        \'data\'=>array(\'status\'=>\'js:this.value\',\'order\'=>$data->id),
        )
        ));',
        ), 
```

这是控制器操作代码

```
public function actionStatus()
    {
    if (isset($_POST['order'])){
        $model=$this->loadModel($_POST['order']);
        $model->status=$_POST['status'];        
    $model->save();

    }    
    } 
```

那么问题是什么。我得到最后一个 $data->id 而不是下拉更改的元素的 id 。所有其他工作正常。

也许这很容易，但我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:52:19.843

第一：如果您在模型类中使用 getter，则可以避免所有这些丑陋的转义代码：

```
public function getStatusDropdown()
{
    $stats = array(
        1 => 'Complete',
        2 => 'Paid',
        3 => 'Not paid',
    );
    return CHtml::dropDownlist('status',$this->status,$stats, array(
        'class'     => 'status',
        'data-id'   => $this->id,
    ));
} 
```

现在添加一个网格列，如

```
array(
    'name'  => 'Status',
    'type'  => 'raw',
    'value' => '$data->statusDropdown',
), 
```

现在剩下的就是添加一些 Javascript。如果您注册一个片段来统治所有按钮，而不是为每个按钮添加脚本，效率会更高。您必须收听`change`所有下拉菜单的事件。因此，您可以使用 gridview 在页面上注册一个内联代码段，如下所示：

```
$url = $this->createUrl('user/orders/status');
Yii::app()->clientScript->registerScript('initStatus',
    "$('select.status').on('change','body',function() {
        el = $(this);
        $.ajaxPost('$url', {status: el.val(), id: el.data('id')}
    });",
    CClientScript::POS_READY
); 
```

我添加了一个`body`选择器以确保如果您的 GridView 通过 AJAX 更新，该事件仍然会触发。您可能还想在`ajaxPost()`调用中添加成功处理程序。

请注意，上面可能包含拼写错误，因此不要只是复制和粘贴，而是要尝试了解它是如何工作的。它应该让你走上正确的轨道。

# android - 如何解析嵌套的json对象

> ID：16061833
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:28.003
> 
> 标签：android, json, parsing, object, nested

我有这个json：

`{"data": [{"name" "category" "id" "picture":{"data":{"url":}}}]`

我的困难是如何解析图片字段。我试过这段代码：

```
 public class JSONParser {
        public List<HashMap<String,Object>> parse(JSONObject jObject){      
            JSONArray jGames = null;
                try {       
                    jGames = jObject.getJSONArray("data");
                } catch (JSONException e) {
                    e.printStackTrace();
                }
                return getGames(jGames);
            }       
            private List<HashMap<String, Object>> getGames(JSONArray jGames){
                int gameCount = jGames.length();
                List<HashMap<String, Object>> gameList = new ArrayList<HashMap<String,Object>>();
                HashMap<String, Object> game = null;    
                for(int i=0; i<gameCount;i++){
                    try {
                        game = getGame((JSONObject)jGames.get(i));
                        gameList.add(game);

                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
                return gameList;
            }
            private HashMap<String, Object> getGame(JSONObject jGame){
                HashMap<String, Object> game = new HashMap<String, Object>();
                String gameName = "";
                String logo="";
                String user = "";           
                try {
                    gameName = jGame.getString("name");
                    logo = jGame.getString("logo_url");
                    user = jGame.getString("daily_active_users");
                    String details ="Utenti attivi : " + user + "\n";
                    game.put("name", gameName);
                    game.put("logo_url", R.drawable.icon);
                    game.put("logo_path", logo);
                    game.put("details", details);
                } catch (JSONException e) {         
                    e.printStackTrace();
                }       
                return game;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:00:12.270

本教程将帮助你[Android JSON 解析教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# c# - 为什么文本框的自动完成功能不添加新条目？

> ID：16061838
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:35.937
> 
> 标签：c#, asp.net, autocomplete

我在一个自动存储以前条目的 asp.net 网站中有一个文本框。但是，它似乎不再存储任何新条目。这很烦人，因为我正在使用新文件夹进行重复测试，并且不想每次运行时都手动重新输入路径。

![在此处输入图像描述](https://i.stack.imgur.com/3HO72.jpg)

从我在网上阅读的内容来看，这似乎与[自动完成](http://www.w3schools.com/aspnet/prop_webcontrol_textbox_autocompletetype.asp)功能有关。我只是想知道为什么它不再添加新条目？它可以存储/显示的最大数量吗？有没有办法可以编辑弹出的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:50:29.917

好的，答案是自动完成功能仅显示已存储的前六个条目。感谢[这篇文章](http://lifehacker.com/5893908/how-to-banish-embarrassing-or-annoying-autocomplete-suggestions-from-your-browser)，我能够通过突出显示值并按 Shift+Delete 手动删除值（适用于 Chrome，显然也适用于 Firefox）。这允许显示新条目。

![在此处输入图像描述](https://i.stack.imgur.com/z6beE.jpg)

**编辑：**实际上只需要删除。Shift+Delete 显然只适用于 Mac。

参考： http: [//kb.mozillazine.org/Deleting_autocomplete_entries](http://kb.mozillazine.org/Deleting_autocomplete_entries)

# android - Android 数据库-游标返回错误

> ID：16061842
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:46.120
> 
> 标签：android, database, android-cursor

我对 Android 和 java 完全陌生。以前在 vb.net 工作过。我正在尝试创建 vb.net 应用程序的 Android 版本。Android中的数据库功能让我很生气。这是我需要做的事情的简短描述。- 创建一个“项目”数据库，其中包含项目的单独记录。我需要从这些记录中添加、更新、删除和检索数据。- 创建一个“环境”数据库，其中包含环境变量（温度、海拔等，以及“项目”数据库中当前正在使用的项目。我需要更新此记录。

我看过几个教程，并试图模仿它们。在我的代码中一切似乎都是正确的，但我在光标函数上遇到了错误（也有其他错误，但这似乎是它的根源）。

为了让我开始解决这个问题，让我们从环境数据库开始。我创建了一个 SQLHelper、数据库管理器和一个与之交互的 Activity。三个人都在这里合影。

我想有一个更具体的问题，但是在尝试将其与其他帖子等进行比较 3 天之后，我完全迷失了。感谢任何可以帮助我的人！

```
HELPER
package com.becrs.becrsmobile;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class EnvironmentSQLiteHelper extends SQLiteOpenHelper {

    public static final String TABLE_Environment = "envVar";
    public static final String ENV_COLUMN_ID = "_id";   
    public static final String COLUMN_elevation = "elevation";
  public static final String COLUMN_temperature = "temperature";
  public static final String COLUMN_ScopeIncrement = "ScopeIncrement";
  public static final String COLUMN_R1_Var = "R1_Var";
  public static final String COLUMN_R2_Var = "R2_Var";
  public static final String COLUMN_R3_Var = "R3_Var";
  public static final String COLUMN_R4_Var = "R4_Var";
  public static final String COLUMN_R5_Var = "R5_Var";
  public static final String COLUMN_R6_Var = "R6_Var";
  public static final String COLUMN_R7_Var = "R7_Var";
  public static final String COLUMN_R8_Var = "R8_Var";
  public static final String COLUMN_R9_Var = "R9_Var";
  public static final String COLUMN_MaxRange_Var = "MaxRange_Var";
  public static final String COLUMN_currentCartridge = "currentCartridge";

  private static final String DATABASE_NAME = "environmentdb.db";
  private static final int DATABASE_VERSION = 1;

  // Database creation sql statement
  private static final String DATABASE_CREATE = "create table "
      + TABLE_Environment + " (" + ENV_COLUMN_ID + " integer primary key autoincrement not null," 
      + COLUMN_elevation + " INTEGER, "
      + COLUMN_ScopeIncrement  + " REAL, "
      + COLUMN_R1_Var  + " INTEGER, "
      + COLUMN_R2_Var  + " INTEGER, "
      + COLUMN_R3_Var  + " INTEGER, "
      + COLUMN_R4_Var  + " INTEGER, "
      + COLUMN_R5_Var  + " INTEGER, "
      + COLUMN_R6_Var  + " INTEGER, "
      + COLUMN_R7_Var  + " INTEGER, "
      + COLUMN_R8_Var  + " INTEGER, "
      + COLUMN_R9_Var  + " INTEGER, "
      + COLUMN_MaxRange_Var  + " INTEGER, "
      + COLUMN_currentCartridge  + " INTEGER"
      + ");";

  public EnvironmentSQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(EnvironmentSQLiteHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_Environment);
    onCreate(db);
  }

} 

DATABASE MANAGER
package com.becrs.becrsmobile;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class EnvironmentDataSource {

  // Database fields
  private SQLiteDatabase database;
  private EnvironmentSQLiteHelper dbHelper;
  private String[] allColumns = { 
      EnvironmentSQLiteHelper.ENV_COLUMN_ID,
      EnvironmentSQLiteHelper.COLUMN_elevation,
      EnvironmentSQLiteHelper.COLUMN_temperature,
      EnvironmentSQLiteHelper.COLUMN_ScopeIncrement,
      EnvironmentSQLiteHelper.COLUMN_R1_Var,
      EnvironmentSQLiteHelper.COLUMN_R2_Var,
      EnvironmentSQLiteHelper.COLUMN_R3_Var,
      EnvironmentSQLiteHelper.COLUMN_R4_Var,
      EnvironmentSQLiteHelper.COLUMN_R5_Var,
      EnvironmentSQLiteHelper.COLUMN_R6_Var,
      EnvironmentSQLiteHelper.COLUMN_R7_Var,
      EnvironmentSQLiteHelper.COLUMN_R8_Var,
      EnvironmentSQLiteHelper.COLUMN_R9_Var,
      EnvironmentSQLiteHelper.COLUMN_MaxRange_Var,
      EnvironmentSQLiteHelper.COLUMN_currentCartridge,
      };

  public EnvironmentDataSource(Context context) {
    dbHelper = new EnvironmentSQLiteHelper(context);
  }

  public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
  }

  public void close() {
    dbHelper.close();
  }
  public Environment updateEnvironment(int elevation, int temperature, Double ScopeIncrement, int R1, int R2, int R3, int R4, int R5, int R6, int R7, int R8, int R9, int MaxRng, int currentCartridge) {
        ContentValues values = new ContentValues();
        values.put(EnvironmentSQLiteHelper.COLUMN_elevation, elevation);
        values.put(EnvironmentSQLiteHelper.COLUMN_temperature, temperature);
        values.put(EnvironmentSQLiteHelper.COLUMN_ScopeIncrement, ScopeIncrement);
        values.put(EnvironmentSQLiteHelper.COLUMN_R1_Var, R1);
        values.put(EnvironmentSQLiteHelper.COLUMN_R2_Var, R2);
        values.put(EnvironmentSQLiteHelper.COLUMN_R3_Var, R3);
        values.put(EnvironmentSQLiteHelper.COLUMN_R4_Var, R4);
        values.put(EnvironmentSQLiteHelper.COLUMN_R5_Var, R5);
        values.put(EnvironmentSQLiteHelper.COLUMN_R6_Var, R6);
        values.put(EnvironmentSQLiteHelper.COLUMN_R7_Var, R7);
        values.put(EnvironmentSQLiteHelper.COLUMN_R8_Var, R8);
        values.put(EnvironmentSQLiteHelper.COLUMN_R9_Var, R9);
        values.put(EnvironmentSQLiteHelper.COLUMN_MaxRange_Var, MaxRng);
        values.put(EnvironmentSQLiteHelper.COLUMN_currentCartridge, currentCartridge);
        long insertID;
        try {
            database.update(EnvironmentSQLiteHelper.TABLE_Environment, values, "_id = 0 ", allColumns);
            insertID = 0;
        } 
        catch (Exception e){
            insertID = database.insert(EnvironmentSQLiteHelper.TABLE_Environment, null, values);
        }
        Cursor cursor = database.query(EnvironmentSQLiteHelper.TABLE_Environment,
                allColumns, EnvironmentSQLiteHelper.ENV_COLUMN_ID + " = " + insertID, null,
                null, null, null, null);
        cursor.moveToFirst();
        Environment newEnvironment = cursorToEnvironment(cursor); 
        cursor.close();
        return newEnvironment;
      }

  public Environment getEnvironment() {
      Cursor cursor = null;
      try {  
          cursor = database.query(EnvironmentSQLiteHelper.TABLE_Environment,
                allColumns, EnvironmentSQLiteHelper.ENV_COLUMN_ID + " = 0", allColumns, null, null, null, null);
      }
      catch (SQLException e) 
    {
        Log.e("DB ERROR", e.toString());
        e.printStackTrace();
    }
        Environment environment = null;
        if (cursor.moveToFirst()){
            environment =  cursorToEnvironment(cursor);
        }
        cursor.close();
        return environment;
      }
  private Environment cursorToEnvironment(Cursor cursor) {
    Environment environment = new Environment();
    environment.setelevation(cursor.getInt(0));
    environment.settemperature(cursor.getInt(1));
    environment.setlongRangeScopeIncrement(cursor.getDouble(2));
    environment.setR1_Var(cursor.getInt(3));
    environment.setR2_Var(cursor.getInt(4));
    environment.setR3_Var(cursor.getInt(5));
    environment.setR4_Var(cursor.getInt(6));
    environment.setR5_Var(cursor.getInt(7));
    environment.setR6_Var(cursor.getInt(8));
    environment.setR7_Var(cursor.getInt(9));
    environment.setR8_Var(cursor.getInt(10));
    environment.setR9_Var(cursor.getInt(11));
    environment.setMaxRange_Var(cursor.getInt(12));
    environment.setcurrentCartridge(cursor.getString(13));
    return environment;
  }
} 

INTERFACE ACTIVITY
package com.becrs.becrsmobile;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class EnvironmentEditActivity extends Activity 
{
    private EnvironmentDataSource datasource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_editenvironment);   
        datasource = new EnvironmentDataSource(this);
        datasource.open();
        Button save = (Button)findViewById(R.id.ButtonSaveEnvironment);       
        save.setOnClickListener(startsaveListener);
        Environment environment = datasource.getEnvironment();
        String TempVal;
        TextView mTextView;
        TempVal = Integer.toString(environment.getelevation());
        mTextView = (TextView) findViewById(R.id.input_Elevation);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.gettemperature());
        mTextView = (TextView) findViewById(R.id.input_Temperature);
        mTextView.setText(TempVal);
        TempVal = Double.toString(environment.getlongRangeScopeIncrement());
        mTextView = (TextView) findViewById(R.id.input_ClickIncrement);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR1_Var());
        mTextView = (TextView) findViewById(R.id.input_R1);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR2_Var());
        mTextView = (TextView) findViewById(R.id.input_R2);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR3_Var());
        mTextView = (TextView) findViewById(R.id.input_R3);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR4_Var());
        mTextView = (TextView) findViewById(R.id.input_R4);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR5_Var());
        mTextView = (TextView) findViewById(R.id.input_R5);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR6_Var());
        mTextView = (TextView) findViewById(R.id.input_R6);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR7_Var());
        mTextView = (TextView) findViewById(R.id.input_R7);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR8_Var());
        mTextView = (TextView) findViewById(R.id.input_R8);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getR9_Var());
        mTextView = (TextView) findViewById(R.id.input_R9);
        mTextView.setText(TempVal);
        TempVal = Integer.toString(environment.getMaxRange_Var());
        mTextView = (TextView) findViewById(R.id.input_MaxRng);
        mTextView.setText(TempVal);
    }    
        private OnClickListener startsaveListener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                EditText elevation = (EditText)findViewById(R.id.input_Elevation);
                int elevationVal = Integer.parseInt(elevation.getText().toString());
                EditText temperature = (EditText)findViewById(R.id.input_Temperature);
                int temperatureVal = Integer.parseInt(temperature.getText().toString());
                EditText clickIncrement = (EditText)findViewById(R.id.input_ClickIncrement);
                Double clickIncrementVal = Double.parseDouble(clickIncrement.getText().toString());
                EditText R1 = (EditText)findViewById(R.id.input_R1);
                int R1Val = Integer.parseInt(R1.getText().toString());
                EditText R2 = (EditText)findViewById(R.id.input_R2);
                int R2Val = Integer.parseInt(R2.getText().toString());
                EditText R3 = (EditText)findViewById(R.id.input_R3);
                int R3Val = Integer.parseInt(R3.getText().toString());
                EditText R4 = (EditText)findViewById(R.id.input_R4);
                int R4Val = Integer.parseInt(R4.getText().toString());
                EditText R5 = (EditText)findViewById(R.id.input_R5);
                int R5Val = Integer.parseInt(R5.getText().toString());
                EditText R6 = (EditText)findViewById(R.id.input_R6);
                int R6Val = Integer.parseInt(R6.getText().toString());
                EditText R7 = (EditText)findViewById(R.id.input_R7);
                int R7Val = Integer.parseInt(R7.getText().toString());
                EditText R8 = (EditText)findViewById(R.id.input_R8);
                int R8Val = Integer.parseInt(R8.getText().toString());
                EditText R9 = (EditText)findViewById(R.id.input_R9);
                int R9Val = Integer.parseInt(R9.getText().toString());
                EditText MaxRng = (EditText)findViewById(R.id.input_MaxRng);
                int MaxRngVal = Integer.parseInt(MaxRng.getText().toString());
                int RecordNum = 0;
                datasource.updateEnvironment(elevationVal, temperatureVal, clickIncrementVal, R1Val, R2Val, R3Val, R4Val, R5Val, R6Val, R7Val, R8Val, R9Val, MaxRngVal, RecordNum);
                setResult(RESULT_OK);
                finish();
            }
        };

    @Override
    protected void onResume() {
      datasource.open();
      super.onResume();
    }

    @Override
    protected void onPause() {
      datasource.close();
      super.onPause();
    }

} 
```

环境对象

```
package com.becrs.becrsmobile;

public class Environment {
    private static int elevation;
    private static int temperature;
    private static Double longRangeScopeIncrement;
    private static int R0_Var;
    private static int R1_Var;
    private static int R2_Var;
    private static int R3_Var;
    private static int R4_Var;
    private static int R5_Var;
    private static int R6_Var;
    private static int R7_Var;
    private static int R8_Var;
    private static int R9_Var;
    private static int MaxRange_Var;
    private static int currentCartridge;
    public static int getelevation()  {
        return elevation;
    }
    public void setelevation(int elevation) {
        Environment.elevation = elevation;
    }
    public static int gettemperature()  {
        return temperature;
    }
    public void settemperature(int temperature) {
        Environment.temperature = temperature;
    }
    public static double getlongRangeScopeIncrement()  {
        return longRangeScopeIncrement;
    }
    public void setlongRangeScopeIncrement(Double longRangeScopeIncrement) {
        Environment.longRangeScopeIncrement = longRangeScopeIncrement;
    }
    public static int getR0_Var()  {
        return R0_Var;
    }
    public void setR0_Var(int R0_Var) {
        Environment.R0_Var = R0_Var;
    }
    public static int getR1_Var()  {
        return R1_Var;
    }
    public void setR1_Var(int R1_Var) {
        Environment.R1_Var =R1_Var;
    }
    public static int getR2_Var()  {
        return R2_Var;
    }
    public void setR2_Var(int R2_Var) {
        Environment.R2_Var = R2_Var;
    }
    public static int getR3_Var()  {
        return R3_Var;
    }
    public void setR3_Var(int R3_Var) {
        Environment.R3_Var = R3_Var;
    }
    public static int getR4_Var()  {
        return R4_Var;
    }
    public void setR4_Var(int R4_Var) {
        Environment.R4_Var = R4_Var;
    }
    public static int getR5_Var()  {
        return R5_Var;
    }
    public void setR5_Var(int R5_Var) {
        Environment.R5_Var = R5_Var;
    }
    public static int getR6_Var()  {
        return R6_Var;
    }
    public void setR6_Var(int R6_Var) {
        Environment.R6_Var = R6_Var;
    }
    public static int getR7_Var()  {
        return R7_Var;
    }
    public void setR7_Var(int R7_Var) {
        Environment.R7_Var = R7_Var;
    }
    public static int getR8_Var()  {
        return R8_Var;
    }
    public void setR8_Var(int R8_Var) {
        Environment.R8_Var = R8_Var;
    }
    public static int getR9_Var()  {
        return R9_Var;
    }
    public void setR9_Var(int R9_Var) {
        Environment.R9_Var = R9_Var;
    }
    public static int getMaxRange_Var()  {
        return MaxRange_Var;
    }
    public void setMaxRange_Var(int MaxRange_Var) {
        Environment.MaxRange_Var = MaxRange_Var;
    }
    public static int getcurrentCartridge()  {
        return currentCartridge;
    }
    public void setcurrentCartridge(int currentCartridge) {
        Environment.currentCartridge = currentCartridge;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:55:54.033

首先创建环境对象，因为它是您的 sqlliteopen 助手使用上下文实例化的地方

```
Environment environment=new Environment(context); 
```

接着

```
 Environment env= environment.getEnvironment(); 
```

# javascript - 更改数据包请求 Rails 中的 IP

> ID：16061843
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:46.197
> 
> 标签：javascript, ruby, ruby-on-rails-3, html-parsing, spoofing

我正在创建一个解析不同网站的 Web 应用程序，例如，如果您在应用程序上搜索“stackoverflow”，我们将搜索多个网站、google、yahoo、bing、stackoverflow 等。为了解决我需要使用我决定通过 HTML 解析的每个网站的 api，到目前为止它工作正常。但是我确实知道，如果像谷歌这样的网站从同一个 IP 地址收到几个异常快速的请求，他们只会阻止该 IP，所以我想做的是使用用户 IP 并将其以数据包的形式发送到像谷歌这样的应用程序认为用户发起了请求。我想到了几种方法，例如：让javascript发起请求，然后发回html，但是看到我已经用 ruby​​ 编写了解析器，我真的觉得这两个单独的调用不会那么有效。因此，如果有人对如何通过 ip 欺骗或其他 hack 来实现这一点有任何想法，我将永远感激不尽。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:43:15.843

您可以使用代理服务器银行，但成本很高。

就个人而言，我会使用 API，因为我知道我正在按照批准的方式做事，而不用担心试图绕过他们的会话嗅探算法。

您正在采取可能比使用他们的 API 更慢的“捷径”，尤其是当您考虑到重写代码所花费的时间时。试图处理 HTML 抓取是一场持续的战斗，因为他们都会改变他们的 HTML 布局，破坏你的抓取器。如果有的话，他们的 API 会更慢更频繁地改变，所以你的代码会嗡嗡作响。

# asp.net - Visual Studio 2012 部署到单个程序集

> ID：16061844
> 
> 赞同：0
> 
> 时间：2013-04-17T13:47:46.803
> 
> 标签：asp.net, visual-studio, deployment

我如何配置 Visual Studio 2012 以发布网站并将 IL 合并到一个程序集。在visual studio 2010中我们有部署项目，在vs 2012中它们不受支持......

编辑：我有一个网站项目，而不是网络应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T07:24:38.987

右键单击网站项目并启动“发布网站”。这会弹出一个对话框来启动/配置发布过程。向导的第一步允许您选择现有的发布配置文件或创建一个新配置文件。第二步让您选择发布方法。真正有趣的步骤是第三步，“设置”步骤。它有一个名为“文件发布选项”的可扩展部分。展开它会显示三个选项，其中第二个选项（“发布期间的预编译”）有一个可点击的链接，可将您带到另一个对话框，允许您进行高级预编译设置。此对话框的第二部分处理合并选项。

# javascript - 如何在 JavaScript 中滑动 Range Slider 后更改窗口位置

> ID：16061847
> 
> 赞同：1
> 
> 时间：2013-04-17T13:48:04.197
> 
> 标签：javascript, asp.net-mvc

我在我的 MVC3 应用程序中使用 Range Slider，

我想在通过 JavaScript 更改滑块后更改窗口位置

这该怎么做？

我的代码

```
 <script type="text/javascript">
                    $(function () {
                        $("#slider-range").slider({
                            range: true,
                            min: "0",
                            max: "@To",
                            values: ['@from', '@To'],
                            slide: function (event, ui) {
                                $("#amount").val("Rs. " + ui.values[0] + " - Rs. " + ui.values[1]);
                            }
                        });
                        $("#amount").val("Rs. " + $("#slider-range").slider("values", 0) + " - Rs. " + $("#slider-range").slider("values", 1));
                    });   

 slide: function (event, ui) {
           var url = '@Url.RouteUrl("Category", new { categoryId = "_documentId_" })';
           var finalUrl = url.replace('_documentId_', '@catId' + "?price=1000-1200");
           window.location.href = finalUrl;
                    }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:49:05.720

```
<script type="text/javascript">
                $(function () {
                    $("#slider-range").slider({
                        range: true,
                        min: "0",
                        max: "@To",
                        values: ['@from', '@To'],
                        slide: function (event, ui) {
                            $("#amount").val("Rs. " + ui.values[0] + " - Rs. " + ui.values[1]);
                            var url = '@Url.RouteUrl("Category", new { categoryId = "_documentId_" })';
                            var finalUrl = url.replace('_documentId_', '@catId' + "?price=1000-1200");
                            window.location.href = finalUrl;
                        }
                    });
                    $("#amount").val("Rs. " + $("#slider-range").slider("values", 0) + " - Rs. " + $("#slider-range").slider("values", 1));
                });   

slide: function (event, ui) {

                }
    </script> 
```

# java - 在数组中搜索字符串

> ID：16061849
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:09.997
> 
> 标签：java, arrays, methods

下面我尝试创建一个方法，该方法在数组中搜索某个字符串并返回它的位置，如果不存在则 -1 应该是返回的数字。下面我使用该方法搜索一个单词，即使该单词在数组中，它也会返回 -1。为什么是这样？

```
 String answer = "";

    System.out.println("Enter word to search within array");
    answer = in.next();

       public static int search(String[] theWords, String answer) {
         int a = -1;
         for(int i = 0; i < theWords.length; i++) {
             if (answer.equals(theWords[i])){
                 a = i;
                 break;
             }
         } 
         return a;
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:57:18.540

我看不出代码有什么问题，但我建议消除保存返回值的局部变量：

```
 public static int Search(String[] thewords, String answer) {
     for (int i = 0; i < thewords.length; i++) {
         if (answer.equals(thewords[i])){
             return i;
         }
     } 
     return -1;
 } 
```

使用这种简化的逻辑，此代码中几乎没有或根本没有机会出现错误。

* * *

我认为这是课程作业，并且不允许您使用库方法。如果您被允许，您的方法可以是一行：

```
return Arrays.asList(theWords).indexOf(answer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:51:03.647

您可以选择制作数组的副本，因为该方法的使用者可能不需要排序

```
public static int Search(String[] thewords, String answer) {  
     if(thewords == null) {  
        throw new NullPointerException();  
     }  
     String[] copy = new String[thewords.length];  
     System.arraycopy(thewords,0,copy,0,copy.length);  
     Arrays.sort(thewords);    
     return Arrays.binarySearch(thewords, answer);  
} 
```

注意：它返回`-pos`而不是`-1`

如果您需要`-1`：

```
public static int Search(String[] thewords, String answer) {  
     if(thewords == null) {  
        throw new NullPointerException();  
     }  
     String[] copy = new String[thewords.length];  
     System.arraycopy(thewords,0,copy,0,copy.length);  
     Arrays.sort(thewords);  
     int idx = Arrays.binarySearch(thewords, answer);  
     return idx < 0? -1:idx;  
} 
```

**关于您的代码：**我相信问题与大小写或间距有关：
替换为：`if (answer.equalsIgnoreCase(theWords[i].trim())){`

对于大型数组，请使用二进制搜索。

# bash - 如何使用 bash 脚本仅将文本或 tsv 文件中句子的单词之间的制表符转换为空格

> ID：16061851
> 
> 赞同：-2
> 
> 时间：2013-04-17T13:48:12.003
> 
> 标签：bash, bash4

我有以下内容的文本或 tsv 文件：

**文件：sample_txt.txt：**

```
 1   0x0001  ram_var2    int                                                                                                 
                                            test.c  func2   63      Y                                               "The expression '          ram_var2=e;
   ' at line no 63 has been modified in file test.c. Hence all read checks are applied
 "                                                      test.c  func2   68      Y   
                                        "The expression '           h=ram_var2;' at line no 68 has been modified in file test.c. Hence all read checks are applied 
```

现在我想删除单词或完整句子之间的所有不必要的标签。例如，我希望句子应如下所示：

```
"The expression 'ram_var2=e; ' at line no 63 has been modified in file test.c. Hence all read checks are applied" 
```

如何使用 Linux bash 脚本来实现这一点。实际上，脚本应该能够处理脚本中所有句子之间的所有此类选项卡，并且还应该注意其他选项卡不应该受到影响。如何实现这一点。请指导我。我对 bash 脚本非常陌生。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:59:43.637

```
sed -i "s/\t/ /g" $1 
```

这告诉 sed 查找制表符，并将它们全部替换为空格。

# windows - 胡金 CreateProcessEx

> ID：16061856
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:24.690
> 
> 标签：windows, winapi

我想在系统范围内挂钩`CreateProcessEx` ，它将所有 Windows 调用重定向到我的包装函数
中，我将在其中将名称记录到文本文件，然后调用 oruginal`CreateProcessEx`

可以轻松安全地完成吗？

我想钩住所有系统范围的调用，但不是永远只在一段时间内..怎么做？

如果我会在 ram 中找到这个 api 调用的地址，然后通过调用我的程序来覆盖它，那么如果原始函数有些损坏，我将如何调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:37:41.427

由于几个原因，挂钩`CreateProcess`是错误的方法。有一种经过批准的机制可以执行此类操作，但您需要加载驱动程序。然后，您的驱动程序可以简单地利用该[`PsSetCreateProcessNotifyRoutine`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559951%28v=vs.85%29.aspx)功能。

话虽如此，使用 Windows 内置的审核功能是否不能满足您的需求？打开进程创建审计将导致系统在创建进程时写入事件日志条目，详细说明有关正在启动的进程的大量信息，包括图像路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:05:18.777

`CreateProcessEx()`是用户模式功能。您必须在每个进程的基础上对其进行修补。这意味着创建一个 DLL 注入到每个正在运行的进程中，例如通过使用`SetWindowsHookEx()`或`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows\AppInit_DLLs`注册表项，然后让该 DLL 修补它加载到的每个进程的 PE Imports 表。

# php - 用户数据的具体使用

> ID：16061858
> 
> 赞同：-4
> 
> 时间：2013-04-17T13:48:26.930
> 
> 标签：php, facebook, facebook-opengraph

哎呀，

我想创建一个简单的商业 Web 应用程序来分析粉丝页面上的流量。生成最活跃用户的列表以及他们的名字和姓氏是否可以接受？当然，这些数据将来自 Facebook Graph。

我已经阅读了 Facebook 平台政策，但我仍然不确定:(

最好的，文学士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:22:37.367

在葡萄牙，我看到很多大型注册商标这样做，但通常它们确实通过某人明确允许将来使用这些数据的应用程序检索人的“姓名”。

根据Facebook规则，一旦用户将他们的数据插入他们的平台，它就可以被系统使用，而一旦你使用系统......你可能会使用数据？

这是一种有争议的讨论。

在 Facebook 的部分，我认为你可以得到一个是的。在真正合法的情况下，您应该向律师询问您所在国家/地区的法律。

# xcode - 在类扩展中使用代码片段 - 快捷方式不起作用

> ID：16061859
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:29.947
> 
> 标签：xcode, code-snippets

我有一个我制作的代码片段，在向我的 .h 文件添加属性时可以完美运行。 ![在此处输入图像描述](https://i.stack.imgur.com/r0Pxj.png)

但我不希望我的 .h 中有很多属性，因为它们应该只是内部的。所以我进入 .m 并进行类扩展。在这里，我的代码片段不适用于我的快捷方式，我不知道为什么。好的，“范围”似乎是问题，但它设置为“全部”（见上图）。

这是一个例子

**.m**

```
@interface Foo()
// if I type in 'pps' I won't get snippet completion
@property (strong, nonatomic) NSArray *bar;
@end

@implementation Foo 
```

那么如何让这些东西在这里工作呢？我真的厌倦了一遍又一遍地错误输入这条线。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:13:52.663

我无法告诉你为什么，但它（仅）在你将代码片段的“语言”设置为“Objective-C”而不是“Objective-C++”时才有效。

# build - 为什么我的自定义 yeoman phpwebapp 中的构建块会导致 grunt 构建失败？

> ID：16061861
> 
> 赞同：1
> 
> 时间：2013-04-17T13:48:30.133
> 
> 标签：build, yeoman, gruntjs

我正在使用新的 Yeoman 生成器[phpwebapp](https://github.com/nickhartjes/generator-phpwebapp)。我已经调整了我的`Gruntfile`和`index`一点，以便我可以将它与 CMS 一起使用。

索引中应该丑化（连接和缩小）脚本的块会导致`grunt build`失败。

uglify 任务`grunt.initConfig`成功，只有块失败。

## 错误

```
Running "uglify:dist" (uglify) task
File "dist/_themes/cb/js/cb.js" created.
Uncompressed size: 48 bytes.
Compressed size: 31 bytes gzipped (16 bytes minified).

Running "uglify:dist/scripts/plugins.js" (uglify) task
Warning: Uglification failed. Use --force to continue. 
```

## 导致构建失败的块示例。

```
<!-- build:js scripts/plugins.js -->
<script src="components/sass-bootstrap/js/bootstrap-affix.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-alert.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-dropdown.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-tooltip.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-modal.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-transition.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-button.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-popover.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-typeahead.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-carousel.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-scrollspy.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-collapse.js"></script>
<script src="components/sass-bootstrap/js/bootstrap-tab.js"></script>
<!-- endbuild --> 
```

## 我的 Gruntfile

```
'use strict';
var lrSnippet = require('grunt-contrib-livereload/lib/utils').livereloadSnippet;
var mountFolder = function (connect, dir) {
    return connect.static(require('path').resolve(dir));
};

module.exports = function (grunt) {
    // load all grunt tasks
    require('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);

    // configurable paths
    var yeomanConfig = {
        app: 'app',
        dist: 'dist'
    };

    // Statamic Vars
    var theme_name = 'cb',
        theme_path = '_themes/' + theme_name; // cssmin and uglify settings don't accept vars

    grunt.initConfig({
        yeoman: yeomanConfig,
        watch: {
            coffee: {
                files: ['<%= yeoman.app %>/' + theme_path + '/coffee/*.coffee'],
                tasks: ['coffee:dist']
            },
            coffeeTest: {
                files: ['test/spec/*.coffee'],
                tasks: ['coffee:test']
            },
            compass: {
                files: ['<%= yeoman.app %>/' + theme_path + '/scss/*.{scss,sass}'],
                tasks: ['compass']
            },
            livereload: {
                files: [
                    '<%= yeoman.app %>/' + theme_path + '/{layouts,partials,templates}/*.html',
                    '<%= yeoman.app %>/*.php',
                    '{.tmp,<%= yeoman.app %>}/' + theme_path + '/css/*.css',
                    '{.tmp,<%= yeoman.app %>}/' + theme_path + '/js/*.js',
                    '<%= yeoman.app %>/' + theme_path + '/img/*.{png,jpg,jpeg,webp}'
                ],
                tasks: ['livereload']
            }
        },
        connect: {
            options: {
                port: 9000,
                // change this to '0.0.0.0' to access the server from outside
                hostname: 'localhost'
            },
            livereload: {
                options: {
                    middleware: function (connect) {
                        return [
                            lrSnippet,
                            mountFolder(connect, '.tmp'),
                            mountFolder(connect, 'app')
                        ];
                    }
                }
            },
            test: {
                options: {
                    middleware: function (connect) {
                        return [
                            mountFolder(connect, '.tmp'),
                            mountFolder(connect, 'test')
                        ];
                    }
                }
            },
            dist: {
                options: {
                    middleware: function (connect) {
                        return [
                            mountFolder(connect, 'dist')
                        ];
                    }
                }
            }
        },
        open: {
            server: {
                url: 'http://localhost.curtisblackwell.com'
            }
        },
        clean: {
            dist: ['.tmp', '<%= yeoman.dist %>/*'],
            server: '.tmp',
            build: '<%= yeoman.dist %>/scripts/remove-me-on-build.js'
        },
        jshint: {
            options: {
                jshintrc: '.jshintrc'
            },
            all: [
                'Gruntfile.js',
                '<%= yeoman.app %>/' + theme_path + '/js/*.js',
                'test/spec/*.js'
            ]
        },
        mocha: {
            all: {
                options: {
                    run: true,
                    urls: ['http://localhost:<%= connect.options.port %>/index.html']
                }
            }
        },
        coffee: {
            dist: {
                files: [{
                    expand: true,
                    cwd: '<%= yeoman.app %>/' + theme_path + '/js',
                    src: '*.coffee',
                    dest: '.tmp/' + theme_path + '/js',
                    ext: '.js'
                }]
            },
            test: {
                files: [{
                    expand: true,
                    cwd: '.tmp/spec',
                    src: '*.coffee',
                    dest: 'test/spec'
                }]
            }
        },
        compass: {
            options: {
                sassDir: '<%= yeoman.app %>/' + theme_path + '/scss',
                cssDir: '.tmp/' + theme_path + '/css',
                imagesDir: '<%= yeoman.app %>/' + theme_path + '/img',
                javascriptsDir: '<%= yeoman.app %>/' + theme_path + '/js',
                fontsDir: '<%= yeoman.app %>/' + theme_path + '/css/fonts',
                importPath: 'app/components',
                relativeAssets: true
            },
            dist: {},
            server: {
                options: {
                    debugInfo: true
                }
            }
        },
        // not used since Uglify task does concat,
        // but still available if needed
        /*concat: {
            dist: {}
        },*/

        uglify: {
            dist: {
                files: {
                    '<%= yeoman.dist %>/_themes/cb/js/cb.js': [
                        '<%= yeoman.app %>/' + theme_path + '/js/*.js'
                    ],
                }
            }
        },
        useminPrepare: {
            html: '<%= yeoman.app %>/' + theme_path + '/{layouts,partials,templates}/**',
            options: {
                dest: '<%= yeoman.dist %>'
            }
        },
        usemin: {
            html: ['<%= yeoman.dist %>/' + theme_path + '/{layouts,partials,templates}/**'],
            css: ['<%= yeoman.dist %>/' + theme_path + '/css/*.css'],
            options: {
                dirs: ['<%= yeoman.dist %>']
            }
        },
        imagemin: {
            dist: {
                files: [{
                    expand: true,
                    cwd: '<%= yeoman.app %>',
                    src: '{assets/img/**,' + theme_path + '/img/*.{png,jpg,jpeg}}',
                    dest: '<%= yeoman.dist %>'
                }]
            }
        },
        cssmin: {
            dist: {
                files: {
                    '<%= yeoman.dist %>/_themes/cb/css/cb.css': [
                        '.tmp/' + theme_path + '/css/*.css',
                        '<%= yeoman.app %>/' + theme_path + '/css/*.css'
                    ]
                }
            }
        },
        htmlmin: {
            dist: {
                options: {
                    /*removeCommentsFromCDATA: true,
                    // https://github.com/yeoman/grunt-usemin/issues/44
                    //collapseWhitespace: true,
                    collapseBooleanAttributes: true,
                    removeAttributeQuotes: true,
                    removeRedundantAttributes: true,
                    useShortDoctype: true,
                    removeEmptyAttributes: true,
                    removeOptionalTags: true*/
                },
                files: [{
                    expand: true,
                    cwd: '<%= yeoman.app %>',
                    src: '/' + theme_path + '/templates/' + '*.html',
                    dest: '<%= yeoman.dist %>'
                }]
            }
        },
        copy: {
            dist: {
                files: [{
                    expand: true,
                    dot: true,
                    cwd: '<%= yeoman.app %>',
                    dest: '<%= yeoman.dist %>',
                    src: [
                        '*.{ico,txt,php}',
                        '.htaccess',
                        '_{add-ons,app,cache,config,content,cp,logs}/**'
                    ]
                }]
            }
        },
        bower: {
            all: {
                rjsConfig: '<%= yeoman.app %>/' + theme_path + '/js/' + theme_name + '.js'
            }
        }
    });

    grunt.renameTask('regarde', 'watch');

    grunt.registerTask('server', function (target) {
        if (target === 'dist') {
            return grunt.task.run(['build', 'open', 'connect:dist:keepalive']);
        }

        grunt.task.run([
            'clean:server',
            'coffee:dist',
            'compass:server',
            'livereload-start',
            'connect:livereload',
            'open',
            'watch'
        ]);
    });

    grunt.registerTask('test', [
        'clean:server',
        'coffee',
        'compass',
        'connect:test',
        'mocha'
    ]);

    grunt.registerTask('build', [
        'clean:dist',
        'coffee',
        'compass:dist',
        'useminPrepare',
        'imagemin',
        'cssmin',
        'htmlmin',
        // 'concat',
        'uglify',
        'copy',
        'usemin',
        'clean:build'
    ]);

    grunt.registerTask('default', [
        'jshint',
        'test',
        'build'
    ]);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T14:21:40.627

正如我已经评论过的，我想这是因为没有文件可以被丑化。在我的项目中，我通过将 uglify-config 更改为此来解决它：

```
 uglify: {
        dist: {
            files: [{
                expand: true,
                cwd: '<%= yeoman.dist %>/scripts',
                src: ['**/*.js'],
                dest: '<%= yeoman.dist %>/scripts'
            }]
        }
    }, 
```

这只是循环遍历 dist/scripts 文件夹中的所有可用文件，并在那里将它们丑化。可能有更复杂的解决方案，但在我的情况下它有效。

# android - Android xml：相对布局页脚隐藏的最后一行

> ID：16061868
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:45.913
> 
> 标签：android, android-layout

我正在为我的 android 应用程序设计布局。有一个页眉和一个页脚固定。我在它们之间放了一个滚动视图，一切正常，除了内容的最后一行被页脚隐藏，我不知道如何修复它！

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#EEEEEE">
<!-- HEADER -->
    <LinearLayout
        android:id="@+id/headerr"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <ImageView
            android:src="@drawable/header"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/imageViewHeader" />
    </LinearLayout>
<!-- CONTENT LAYOUT -->
    <LinearLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingTop="40dip">
    <!-- BEGIN CONTENT -->
        <ScrollView
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/scrollView1"
            android:background="#EEEEEE">
            <LinearLayout
                android:orientation="vertical"
                android:minWidth="25px"
                android:minHeight="50px"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@+id/linearLayout1"
                android:background="#EEEEEE">
                <TextView
                    android:text="MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText MediumText"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/textView"
                    android:textColor="#000000" />
            </LinearLayout>
        </ScrollView>
    <!-- END CONTENT -->
    </LinearLayout>
<!-- FOOTER -->
    <RelativeLayout
        android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal">
        <ImageView
            android:src="@drawable/footer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@id/footer"
            android:id="@+id/imageViewFooter"
            android:adjustViewBounds="true" />
    </RelativeLayout>
</RelativeLayout> 
```

感谢帮助我:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:54:10.190

您可以使用`layout_below`and`layout_above`将内容保留在页眉和页脚之间（无需手动设置`paddingTop`）。-

```
<LinearLayout
    android:id="@+id/content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/headerr"
    android:layout_above="@+id/footer"
    android:orientation="horizontal"> 
```

顺便说一句，您的标头 id ( `@+id/headerr`)中有错字

# android - 复选框未选中

> ID：16061869
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:46.897
> 
> 标签：android

当我从 xml 更改复选框按钮时，复选框不会反映已选中。我的xml文件是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<TextView
    android:id="@+id/memberName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="57.56"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" 
    android:textColor="#000000"/>

<CheckBox
    android:id="@+id/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:button="@drawable/checkbox"   <----- change button of checkbox
     /> 
```

@drawable/checkbox 是 png 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:07:13.737

为了工作`android:button`，需要设置一个选择器 xml 文件，该文件为选中和未选中状态定义可绘制对象。尝试这样设置：

**checkbox_selector.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/checkbox_checked" />
    <item android:state_checked="false" android:drawable="@drawable/checkbox_unchecked" />
</selector> 
```

`checkbox_checked.png`选中该框时要使用的图像在哪里。并且`checkbox_unchecked.png`是未勾选时的图像。

然后在您的主布局中设置按钮，如下所示：

```
<CheckBox
android:id="@+id/checkbox"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:button="@drawable/checkbox_selector"
 /> 
```

# .net - 我可以使用 Razor/.NET 强制将 .css 或 .js 文件缓存一周或一个月吗？

> ID：16061871
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:48.247
> 
> 标签：.net, c#-4.0, http-headers, browser-cache, razor-2

我想一定有某种 HTTP 标头代码控制浏览器中的缓存，但是如何使用 Razor 引擎语法从 c# 设置这个“时间”？

输出缓存持续时间？不知何故有用吗？

希望最大限度地减少大型网站上的带宽，这些网站不会一直使用某些 javascripts 和 css，因此缓存时间为例如。30 天或更长时间将非常有用 + 我希望能够从服务器端为每个文件指定这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:53:19.250

您可以将 IIS 配置为在 web.config中[缓存静态内容。](http://www.iis.net/configreference/system.webserver/staticcontent/clientcache)[请参阅此问题](https://stackoverflow.com/questions/642954/iis7-cache-control)以获取示例：

```
<configuration>
  <system.webServer>
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" />
    </staticContent>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:53:21.373

一种选择是将文件分解为不同的文件夹（基于缓存需求或仅按类型）。完成后，您可以在目录级别实现缓存。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00" />
    </staticContent>
  </system.webServer>
</configuration> 
```

`cacheControlMaxAge`来自 IIS 文档的默认值（如果未指定） ：

`The default value is 1.00:00:00 (1 day)`

# java - Android Java 定时器（）

> ID：16061874
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:49.957
> 
> 标签：java, android, timer, timertask

由于 Timer() 的准确性，我正在使用它，但它的工作原理与 PostDelayed Handler 相同。它只被调用一次。这是定时器代码：

```
 public void setWFT() {
        WFT = new Timer();
        WFT.schedule(new TimerTask() {          
            @Override
            public void run() {
                WFTTimerMethod();
            }
        }, 60000); // 60 seconds delay
    }

    private void WFTTimerMethod() {
        this.runOnUiThread(Timer_Tick);
    }

    private Runnable Timer_Tick = new Runnable() {
        public void run() {
            // My commands here
        }
    }; 
```

一旦 Timer 启动，这只会在 60 秒后调用 run() 一次。有时，我必须取消定时器以更新延迟（替换“60000”值）。要再次启动计时器，我只需使用新的延迟值再次调用 WFT() 来重新创建计时器。

问题是，当我使用以下方法取消计时器时：

```
WFT.cancel();
WFT.purge(); 
```

定时器不启动。run() 没有在它应该执行的时候执行。所以我的问题是我使用 cancel() 和 purge() 还是只使用 cancel()？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:52:55.037

[从 Java API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#purge%28%29)开始`purge()`：

> 大多数程序不需要调用这个方法。它专为取消大量任务的罕见应用程序而设计。调用此方法是以时间换空间：该方法的运行时间可能与 n + c log n 成正比，其中 n 是队列中的任务数，c 是取消的任务数。

所以你只需要打电话`cancel()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:54:15.150

来自`cancel()`文档：

> 不能在此计时器上安排更多任务。

# c++ - 更新 Qlabel Document 矩形调用的标签不是文本标签。为什么？

> ID：16061875
> 
> 赞同：0
> 
> 时间：2013-04-17T13:48:50.903
> 
> 标签：c++, qt

在我的代码中，我有以下更新 qlabel 的函数。qlabel 的更新非常频繁。代码是

```
void foo::someMethod(std:atring a)
{
     {//begin
     boost::lock_guard<boost::mutex> lock(mutex_label);
     frm->mylabel->setText(a.c_str());
     }//end lock
} 
```

然后过了一会儿我得到一个断言错误：

```
assert failure in documentRect: "document rect called for label that is not a text label! , file widgets\qlabel.cpp 
```

有什么建议可能导致它吗？有时也从未显示该值。我必须移动表单才能更新值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:00:49.127

您不能从另一个线程触摸 GUI。再多的互斥体也无济于事，Qt 不支持。正确的方法是通过信号和插槽来做到这一点。

您可以阅读更多[关于跨线程的 Qt 信号，一个是 GUI 线程？](https://stackoverflow.com/questions/2086142/qt-signaling-across-threads-one-is-gui-thread).

# c# - WCF 服务中的 IoC 冲突

> ID：16061886
> 
> 赞同：0
> 
> 时间：2013-04-17T13:49:07.230
> 
> 标签：c#, wcf, ioc-container, appdomain, application-lifecycle

我们创建了几个处理异步请求的 WCF 服务。我们正在使用`basicHttpBinding`，因此我们的`InstanceContextMode`is `PerCall`，这就是造成一些混乱的原因。我们看到使用 Microsoft`Unity`容器注入的应用程序的这些部分出现异常行为。

我们正在解析下面的参考，以创建一个`Foo`在整个应用程序中使用的单例。但是，当服务快速连续命中时，`Foo`偶尔会抛出异常，表明它正被多个线程访问，并因此以意想不到的方式改变了它的状态。

```
Container.RegisterType<IFoo, Foo>(new ContainerControlledLifetimeManager()); 
```

现在，如果我们将生命周期管理器更改为`TransientLifetimeManager`- 本质上是告诉容器在每次解决该类时注入一个新实例，问题就得到了纠正。

```
Container.RegisterType<IFoo, Foo>(new TransientLifetimeManager()); 
```

据我了解，WCF 不控制 AppDomain 的生命周期，主机控制。在我们的例子中，就是 IIS。因此，鉴于此信息，我们的`PerCall`WCF 请求是否可能正常工作，但由于 AppDomain 的管理方式，我们是否可以访问同一个注入对象，因为它的单例实现？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:13:04.843

看看 UnityWcf。我尝试了几种不同的方法来将 Unity 中对象的生命周期与 WCF 中的 InstanceContextMode 对齐。这很好用：

[http://unitywcf.codeplex.com](http://unitywcf.codeplex.com)

# jquery - jQuery EasyUI - 添加到单元格的链接

> ID：16061894
> 
> 赞同：1
> 
> 时间：2013-04-17T13:49:23.200
> 
> 标签：jquery

我有 2 张桌子：客户联系人。表联系人有一个指向客户表的外键。

```
<table id="dgContactSearch" title="Suche" class="easyui-datagrid" style="height:160px" 
                            url="getContacts.php"
                            toolbar="#toolbarContactSearch" pagination="true"
                            rownumbers="true" fitColumns="true" singleSelect="true">
                        <thead>
                            <tr>
                                <th field="customer_id" width="50">Customer</th>
                                <th field="name" width="50">Name</th>
                                <th field="function" width="50">Funktion</th>
                                <th field="phone" width="50">Phone</th>
                                <th field="mobile" width="50">Mobile</th>
                                <th field="fax" width="50">Fax</th>
                                <th field="email" width="50">Email</th>
                                <th field="comment" width="50">Commnent</th>
                            </tr>
                        </thead>
                    </table> 
```

这是php文件

```
$page = isset($_POST['page']) ? intval($_POST['page']) : 1;
    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
    $searchItemContact = isset($_POST['searchItemContact']) ? mysql_real_escape_string($_POST['searchItemContact']) : '';

    $searchItemContact = htmlentities($searchItemContact, ENT_QUOTES, 'UTF-8');

    $offset = ($page-1)*$rows;

    $result = array();

    $where = "name like '%$searchItemContact%' OR function like '%$searchItemContact%' OR email like '%$searchItemContact%' OR comment like '%$searchItemContact%'";
    $rs = mysql_query("select count(*) from contact where " . $where);
    $row = mysql_fetch_row($rs);
    $result["total"] = $row[0];

    $rs = mysql_query("select * from contact where " . $where . " limit $offset,$rows");

    $items = array();
    while($row = mysql_fetch_object($rs)){
        array_push($items, $row);
    }
    $result["rows"] = $items;
    echo json_encode($result); 
```

我想使`<th field="customer_id" width="50">Customer</th>`可链接的 . 即`<a href="customerView.php?id=$customer_id>#</a>` ，所以当我加载表格时，我看到客户名称代替了 id 并链接到客户页面！请帮忙。

**更新**

我设法以某种方式解决了一些问题：

```
<th data-options="field:'name',width:100,align:'left',formatter:formatCustomerId">Name</th> 
```

然后是随之而来的Javascript函数：

```
function formatCustomerId(val,row){
    var url = "customerView.php?id=";
    return '<a href="'+url + row.customer_id+'">'+val+'</a>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:51:00.090

最终解决方案是所有先前答案的混合:)。

```
<table id="dgContactSearch" title="Benutzer Suche" class="easyui-datagrid" style="height:160px" 
                            url="getContacts.php"
                            toolbar="#toolbarContactSearch" pagination="true"
                            rownumbers="true" fitColumns="true" singleSelect="true">
                        <thead>
                            <tr>
                                <th data-options="field:'firma',width:80,align:'left',formatter:formatCustomerId">Kunde</th>
                                <th data-options="field:'name',width:50,align:'left',formatter:formatContactUrl">Name</th>
                                <th field="function" width="50">Funktion</th>
                                <th field="phone" width="50">Phone</th>
                                <th field="email" width="50">Email</th>
                                <th field="mobile" width="50">Mobile</th>
                                <th field="fax" width="50">Fax</th>

                                <th field="comment" width="120">Kommentare</th>
                            </tr>
                        </thead>
</table> 
```

剧本：

```
<script>
function formatCustomerId(val,row){
    var url = "customerView.php?id=";
    return '<a href="'+url + row.customer_id+'">'+val+'</a>';
}

function formatContactUrl(val,row){
    var url = "contactView.php?id=";
    return '<a href="'+url + row.id+'">'+val+'</a>';
}
</script> 
```

和 getContacts.php

```
<?php
    include 'includes/db_functions.php';
    db_link();

    $page = isset($_POST['page']) ? intval($_POST['page']) : 1;
    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
    $searchItemContact = isset($_POST['searchItemContact']) ? mysql_real_escape_string($_POST['searchItemContact']) : '';

    $searchItemContact = htmlentities($searchItemContact, ENT_QUOTES, 'UTF-8');

    $offset = ($page-1)*$rows;

    $result = array();

    $where = "name like '%$searchItemContact%' OR function like '%$searchItemContact%' OR customer.name like '%$searchItemContact%' OR email like '%$searchItemContact%' OR comment like '%$searchItemContact%'";
    $rs = mysql_query("select count(*) from contact where " . $where);
    $row = mysql_fetch_row($rs);
    $result["total"] = $row[0];

    $sql = "SELECT contact.*, customer.name
    FROM `contact`
    INNER JOIN `kunden` on contact.customer_id = kunden.id ";

    $rs = mysql_query($sql . "where " . $where . " limit $offset,$rows");

    $items = array();
    while($row = mysql_fetch_object($rs)){
        array_push($items, $row);
    }
    $result["rows"] = $items;
    echo json_encode($result);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:22:15.700

对于那种链接，我使用 data-url 属性来保存我想要重定向的 url，然后使用 jquery 来重定向用户，例如：

在您生成表时的服务器端，将 data-url 属性写入要关联链接的位置：

```
<td class='customer_whatever' data-url='<?= $customer_page_url ?>'> Customer Name</td> 
```

在 jQuery 中全部捕获并添加 onclick 事件：

```
$('td').each(function(){
  if($(this).data('url')){
      $(this).click(function(){

        $(location).attr('href',$(this).data('url'));
      });
  }
}); 
```

在 css 中不要忘记输入：

```
.customer_whatever{ cursor:pointer;} 
```

这是一个小的工作示例：http: [//jsfiddle.net/9XA3k/1/](http://jsfiddle.net/9XA3k/1/)

# javascript - Chrome 中的 Javascript 控制台错误

> ID：16061898
> 
> 赞同：1
> 
> 时间：2013-04-17T13:49:28.030
> 
> 标签：javascript, mp3

我想知道是什么导致了附加的 javascript 控制台中的错误。![控制台截图](https://i.stack.imgur.com/9GU4N.png)

一个文件（mp3 文件 /soundcap/soundR8OE41366206103418.mp3）物理上存在于服务器上，加载了相同的文件，但在另一个加载中也突出显示了红色。这会阻止文件在浏览器上播放。请问有什么见解吗？

=============

这是我正在运行的代码：

首先，我显示了从服务器获取的文件名

```
<%= filename %> 
```

其次，我现在想播放文件，我正在使用 jquery 在单击 playBt 时播放文件。

```
<input type="button" id="playBt" value="Play Now"  >
<audio id="sound" preload="auto">
    <!--source src="snd/music.ogg" type="audio/ogg" /-->
    <source src="sound/R8OE41366206103418.mp3" type="audio/mpeg" />
Your browser does not support the audio element.
</audio> 
```

# dynamics-crm-2011 - CRM 2011 - 将仪表板的电子邮件快照发送给特定用户

> ID：16061899
> 
> 赞同：3
> 
> 时间：2013-04-17T13:49:31.507
> 
> 标签：dynamics-crm-2011, crm, dashboard, snapshot, dynamics-crm-online

我有一个客户的请求，他希望每周/每天通过电子邮件（PDF 或 IMAGE）向他发送仪表板。我已经搜索了几个小时以找到一个体面的解决方案，但我似乎找不到一个。这应该适用于“CRM Online”和“IFD”。

我找到了一些可以拍摄网页快照的代码，但是我遇到了“登录”问题。每次执行该页面时，您都会看到一个带有“MICROSOFT PASSPORT”或“ADFS”登录框的页面。我尝试了“wkhtmltopdf”方法和“WebBrowser”方法以及第 3 方工具。

也没有能够从当前页面生成屏幕截图的“JavaScript”或“JQuery”。我在 CRM 2011 中使用 iFrame 创建了一个 Web 资源，并且在该 iFrame 中我能够显示“仪表板”。如果我能够拍摄该页面的快照，我可以创建一个附件并放入 CRM。

我认为我这样做是正确的，但我似乎无法克服最后的困难。我希望论坛上的某个人已经做过类似的事情。我几乎可以肯定这一定是可能的，因为我们的一个合作伙伴能够截取仪表板的屏幕截图并将其放入他们的应用程序中。他们当然不想和我分享那段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:25:38.597

我不相信有一种方法可以实现所请求的功能，而不需要一些主要的“黑客”，这些“黑客”很脆弱，很可能会因任何类型的 CRM/浏览器更新而中断。我会与客户合作，并建议他们从成本/维护的角度来看，他们的要求确实没有意义。我会尝试看看他们是否愿意接受这些解决方法：

1.  每周发送一封包含 CRM 链接的电子邮件。缺点是用户必须有权登录并查看数据，但这将非常容易。
2.  创建重新创建仪表板数据的自定义报告。您应该可以[通过 SSRS 安排电子邮件](http://www.powerobjects.com/blog/2011/06/29/report-scheduling-and-email-subscription-in-crm-2011/)

祝你好运！

# ms-access - Access 2003：使用拖放重新排序列表？

> ID：16061904
> 
> 赞同：0
> 
> 时间：2013-04-17T13:49:46.767
> 
> 标签：ms-access, drag-and-drop

这应该是简单的或不可能的。

在 Access 2003 数据库中，Project 表中的条目具有字段 Designer 和 Priority（以及其他）。我想在列表框或其他控件中按优先级顺序列出一个设计师的所有项目（这很容易），然后让设计师或她的经理使用拖放重新排列优先级。这部分更难，因为原生拖放支持不是非常强大。

我知道 VBA for Access 确实允许我为拖动开始、拖动停止等定义事件。

我不会添加任何自定义 OLE 对象或任何其他不随 Access 提供的东西——过去我们在自定义控件方面遇到过巨大的部署问题。

谢谢。

# hibernate - SQL 查询在休眠中不起作用：ORA-00923：在预期的地方找不到 FROM 关键字

> ID：16061905
> 
> 赞同：0
> 
> 时间：2013-04-17T13:49:49.313
> 
> 标签：hibernate

这是我正在使用 hiberante 运行的查询：

```
String sqlStr = "SELECT {User.*}," +
                           "{Address.*}  from T_USER_DETAILS2 US,T_ADDRESS_DETAILS AD where US.ADDRESS_ID = AD.ADDRESS_ID" +
                           " AND US.USER_FIRSTNAME = :firstname";

    SQLQuery sql =  session.createSQLQuery(sqlStr).addEntity("User",User.class).addEntity("Address",Address.class);
    sql.setParameter("firstname", firstname);

    System.out.println("Query created, now executing the query in the database");

    List<Object[]> list = sql.list(); 
```

这是hibernate生成的查询：

```
Hibernate: 
    /* dynamic native SQL query */ SELECT
        User.USER_ID as USER1_1_0_,
        User.ADDRESS_ID as ADDRESS9_1_0_,
        User.USER_AGE as USER2_1_0_,
        User.USER_EMAIL as USER3_1_0_,
        User.USER_FIRSTNAME as USER4_1_0_,
        User.USER_LASTNAME as USER5_1_0_,
        User.USER_PASSWORD as USER6_1_0_,
        User.USER_COUNTRY_CODE as USER7_1_0_,
        User.USER_PHONE as USER8_1_0_,
        Address.ADDRESS_ID as ADDRESS1_0_1_,
        Address.ADDRESS_LINE1 as ADDRESS2_0_1_,
        Address.ADDRESS_LINE2 as ADDRESS3_0_1_,
        Address.CITY as CITY0_1_,
        Address.COUNTRY as COUNTRY0_1_,
        Address.STATE as STATE0_1_  
    from
        T_USER_DETAILS2 US,
        T_ADDRESS_DETAILS AD 
    where
        US.ADDRESS_ID = AD.ADDRESS_ID 
        AND US.USER_FIRSTNAME = ? 
```

我收到此错误：

捕获：org.hibernate.exception.SQLGrammarException：ORA-00923：FROM 关键字未在预期的位置找到

我知道当我们错过 select 子句中的一些逗号时会出现此错误。但我可以看到选择中的一切都很完美。任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T15:40:56.057

当我`<property name="validationQuery" value="SELECT 1"/>`从数据源 bean 中删除时，它对我有用。您也可以将其更改为`SELECT 1 from DUAL`.

# templates - 如何在没有 Internet 的情况下安装模板 SQL Server Compact 4.0 本地数据库？

> ID：16061913
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:01.480
> 
> 标签：templates, asp.net-mvc-4

我的电脑没有连接到 Internet。但是，我想在我的 VS 2010 中使用一个模板（SQL Server Compact 4.0 本地数据库）。是否可以在没有 Internet 的情况下安装此模板？怎么做？我有一张抽认卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T20:17:39.787

简而言之; 您将需要连接到互联网。建立后，您可以安装 Web 组件（包括 SQL Server Compact 4.0 本地数据库和工具包）。

# ruby - Watir Webdriver：输入文本 iframe 中的标记

> ID：16061919
> 
> 赞同：1
> 
> 时间：2013-04-17T13:50:11.493
> 
> 标签：ruby, watir, watir-webdriver

我现在真的被困住了。我有一个 iframe，其中有一个 <p> 标签，我想在其中发送一些文本，但我就是做不到。

HTML：

```
<iframe id="edit-field-verdict-0-value_ifr" frameborder="0" src="javascript:""" style="width: 100%; height: 100px;">
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
  <html>
    <head xmlns="http://www.w3.org/1999/xhtml">
    <body id="tinymce" class="mceContentBody " spellcheck="false" dir="ltr">
      <p>
        <br mce_bogus="1">
      </p>
    </body>
    </html>
</iframe> 
```

我尝试过的代码是：

```
@browser.elements(:xpath => '//*[@id="tinymce"]').p.send_keys [:control, 'a'] 
```

我得到的错误是：

```
undefined method `elements' for #<String:0x24ba570> (NoMethodError) 
```

我也试过

```
$browser.frame(:id,'edit-field-verdict-0-value_ifr').html.body(:id,'tinymce').p.send_keys [:control, 'a'] 
```

但由于 Watir 无法识别身体，我也尝试`elements_by_xpath`过。它没有用。

我怎样才能使这件事起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:12:27.543

对于第一次尝试，错误消息说这`@browser`是一个字符串而不是 Watir::Browser 对象。您应该验证`@browser`设置是否正确。根据您的第二个示例，它可能是全局变量`$browser`。

对于第二次尝试，`body`Watir 支持。但是，`html`将返回页面的 html 而不是 html 元素。鉴于应该只有一个 body 元素，该`html`元素可以省略。

```
$browser.frame(:id,'edit-field-verdict-0-value_ifr').body(:id,'tinymce').p.send_keys [:control, 'a'] 
```

但也请记住，您只需要包含 frame 方法（告诉 watir 查看框架内部），并且只需包含可靠地找到您正在与之交互的元素所需的量。任何额外的东西只会让代码更冗长，也可能让事情变得更脆弱、更容易被破解。所以上面可以缩短到只是

```
$browser.frame(:id,'edit-field-verdict-0-value_ifr').p.send_keys [:control, 'a'] 
```

根据您正在测试的元素的 id，我假设它是 WYSIMYG 编辑器。您应该查看 Watir-Webdriver 页面以获取示例 - [http://watirwebdriver.com/wysiwyg-editors/](http://watirwebdriver.com/wysiwyg-editors/)。网页中的 TinyMCE 编辑器示例：

```
require 'watir-webdriver'
b = Watir::Browser.new
b.goto 'http://tinymce.moxiecode.com/tryit/full.php'
b.execute_script("tinyMCE.get('content').execCommand('mceSetContent',false, 'hello world' );")
b.frame(:id => "content_ifr").send_keys 'hello world again' 
```

# c# - 单点触控尺寸没有意义

> ID：16061920
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:16.823
> 
> 标签：c#, xamarin.ios

我的 AppDelegate 中有以下内容：

```
 const string fileName = "Content/tandc.html";
        window = new UIWindow(UIScreen.MainScreen.Bounds);

        var webView = new UIWebView(new RectangleF(0,-20, 300, 300));
        string localHtmlUrl = Path.Combine(NSBundle.MainBundle.BundlePath, fileName);
        webView.LoadRequest(new NSUrlRequest(new NSUrl(localHtmlUrl, false)));
        webView.ScalesPageToFit = false;
        webView.Opaque = false;
        webView.BackgroundColor = UIColor.Clear;

        var webelement = new UIViewElement("", webView, true);

        var agree = new StyledStringElement("Agree", () => Console.WriteLine("test"));
        var noAgree = new StyledStringElement("Whatever", () => Console.WriteLine("test"));

        var headerView = new UIImageView(new RectangleF(0, 0, 640, 85))
                              {
                                  Image = UIImage.FromFile("Images/SafeWork_TandC_640_165.png")
                              };

        var section = new Section()
        {
            HeaderView = headerView
        };

      window.RootViewController = new DialogViewController(new RootElement("Login") {
               section,
               new Section()
                   {
                     webelement
                   },
                   new Section()
                       {
                          agree, noAgree
                       }
            });

        window.MakeKeyAndVisible();
        return true; 
```

我的问题是 - 为什么 WebView 的尺寸与实际窗口的尺寸完全不相关？标题图像的宽度为 640 像素，使其与 iPhone 的宽度相同，而 webview 的宽度为 300 以使其适合 - 400 对屏幕来说太大了，如果设置为它实际上会离开屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:56:37.963

简短的回答：视网膜。

窗口尺寸以非视网膜像素为单位，以使旧版应用程序能够正常工作。因此，如果您的设备支持视网膜显示，则 640 像素宽的图像将占用 320 像素的屏幕单位。

# javascript - 使用 jQuery lavalamp 的导航悬停元素

> ID：16061922
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:22.067
> 
> 标签：javascript, jquery

如果你看到[这个网站](http://cavc.ac.uk)

当您将鼠标悬停在子无序列表上时，底部边框不会正确对齐。只有在 14-19 才会发生这种情况。

这是代码：

```
(function($) {
$.fn.lavaLamp = function(o) {
    o = $.extend({ fx: "linear", speed: 500, click: function(){} }, o || {});
    return this.each(function() {
        var me = $(this), noop = function(){},
            $back = $('<li class="back"><div class="left"></div></li>').appendTo(me),
            $li = $("li", this), 
            curr = $("li.active", this)[0] || $($li[0]).addClass("active")[0];

        $li.not(".back").hover(function() {
            move(this);
        }, noop);

        $(this).hover(noop, function() {
            move(curr);
        });

        $li.click(function(e) {
            setCurr(this);
            return o.click.apply(this, [e, this]);
        });

       setCurr(curr);

        function setCurr(el) {
            $back.css({ "left": el.offsetLeft+"px", "width": el.offsetWidth+"px", "border-bottom-color": $(el).css("border-bottom-color") });
            curr = el;
        };
        function move(el) {
            $back.each(function() {
                $(this).dequeue(); }
            ).animate({
                width: el.offsetWidth,
                left: el.offsetLeft
            }, o.speed, o.fx).css({"border-bottom-color": $(el).css("border-bottom-color")});
        };
    });
};
})(jQuery); 
```

有人可以解释一下这里发生了什么以及我如何修改上述内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:53:59.980

你可以试试这个：

```
function move(el) {
  $el=$(el);
  $back.each(function() {
    $(this).dequeue(); 
 }).animate({
   width: $el.width(),
   left: $el.offset().left
   }, o.speed, o.fx).css({"border-bottom-color": $el.css("border-bottom-color")});
}; 
```

# c# - 实体框架 InvalidOperationException

> ID：16061925
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:25.940
> 
> 标签：c#, linq, entity-framework

好的，这是我解释我的问题的最佳方法。

使用实体框架，通过我的数据上下文的一个实例，我使用 LINQ 在我的模型中获取一个名为“Marketing”的实体的实例。该实体与其他实体有关系，如下图所示。请注意，与“HospitalistSurvey”的扩展关系有一个错误。后来，我尝试设置一个属性的值（即，marketing.HospitalistSurvey.[HospitalistSurveyProperty]），当时我收到一条错误消息，提示“无法将空值分配给 System.Int32 类型的成员，该成员不可为空值类型。”

![调试器代码](https://i.stack.imgur.com/as7XA.png)

我应该怎么做才能开始调查这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:19:28.637

我认为您在这里遇到的是以下情况：

**实体模型**

```
public class MyEntity
{
    [Key]
    public int Id { get; set; }

    public int Value { get; set; } // note that this is non nullable
} 
```

**数据库模型**

```
CREATE TABLE [dbo].[MyEntities](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Value] [int] NULL,
) 
```

EF 将处理此设置，直到`MyEntities`出现行，`Value IS NULL`在这种情况下，它会抛出您所看到的异常，因为它试图将空值放入不可为空的类型中。

一种解决方案是更改模型：

```
public class MyEntity
{
    [Key]
    public int Id { get; set; }

    public int? Value { get; set; } // this is now nullable
} 
```

另一种是更改数据库：

```
CREATE TABLE [dbo].[MyEntities](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Value] [int] NOT NULL,
) 
```

# ios - Core-Plot 弄乱了散点图 - 这里有什么问题？

> ID：16061930
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:40.773
> 
> 标签：ios, graph, plot, core-plot

在 iOS 项目中使用 Core-Plot 绘制散点图，我突然开始遇到最奇怪的事情。

此图中添加了 5 个图，每个图都有单独的颜色（我用 allPlots 一次又一次地检查过）。无论出于何种原因，上面似乎都有“幽灵”情节，并且并非所有记录都显示出来。

![带有奇怪问题的核心图散点图](https://i.stack.imgur.com/wQdpP.png)

有人知道这里可能出了什么问题吗？这以前工作得很好。过去 2 小时一直在尝试找出问题所在，但我检查的所有内容似乎都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:55:39.343

好的，事实证明我在 doublesForPlot 中返回了一个混乱的 C 数组，导致了这种情况。

# coldfusion - 在 CF9 的 cfselect 中绑定 CFC 时出现“未找到方法 onRequest”错误。在 CF8 中运行良好

> ID：16061931
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:43.177
> 
> 标签：coldfusion, coldfusion-9

我收到错误消息“调用 CFC componentname.cfc 时出错：在组件 ..\filepath\Application.cfc 中找不到 onRequest 方法”。

这适用于 CF8，但不适用于具有相同代码的 CF9。两种环境都使用 Apache 和 Fusebox 5。onRequest 方法存在于 application.cfc 中。

请帮忙。

## CFC 绑定代码：

```
<cfselect name="officeNum" id="officeNum" bind="cfc: userYODSU.GetOfficeList({empID},{fy})" display="officeNameTxt" value="officeNum" bindOnLoad="true"><option value="">---</option></cfselect> 
```

## APPLICATION.CFC 中的代码

```
<cfcomponent output="false">
    <cfprocessingdirective suppresswhitespace="true">
<!---
Copyright 2006-2007 TeraTech, Inc. http://teratech.com/

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--->

    <!--- code that must execute at the very start of every single request --->
    <!--- FB5: allow "" default - FB41 required this variable: --->
    <cfparam name="variables.FUSEBOX_APPLICATION_PATH" default="" />
    <!--- FB5: application key - FB41 always uses 'fusebox': --->
    <cfparam name="variables.FUSEBOX_APPLICATION_KEY" default="fusebox" />
    <!--- FB51: allow application to be included from other directories: --->
    <cfparam name="variables.FUSEBOX_CALLER_PATH" default="#replace(getDirectoryFromPath(getBaseTemplatePath()),"\","/","all")#" />
    <!--- FB55: easy way to override fusebox.xml parameters programmatically: --->
    <cfparam name="variables.FUSEBOX_PARAMETERS" default="#structNew()#" />

    <cfparam name="variables.attributes" default="#structNew()#" />
    <cfset structAppend(attributes,URL,true) />
    <cfset structAppend(attributes,form,true) />

    <!--- FB5: uses request.__fusebox for internal tracking of compiler / runtime operations: --->
    <cfset request.__fusebox = structNew() />

    <!--- FB55: bleeding variables scope back and forth between fusebox5.cfm and this CFC for backward compatibility --->
    <cfset variables.exposed = structNew() />

    <!--- FB55: scaffolder integration --->
    <cfif structKeyExists(attributes,"scaffolding.go")>
        <!--- if we're not already executing the scaffolder, branch to it --->
        <cfif findNoCase("/scaffolder/",CGI.SCRIPT_NAME) eq 0>
            <cftry>
                <cfinclude template="/scaffolder/manager.cfm" />
                <cfcatch type="missinginclude">
                    <cfif structKeyExists(attributes,"scaffolding.debug")>
                        <cfrethrow />
                    </cfif>
                    <cfthrow type="fusebox.noScaffolder" message="Scaffolder not found" detail="You requested the scaffolder but /scaffolder/index.cfm does not exist." />
                </cfcatch>
            </cftry>
        </cfif>
    </cfif>

    <cffunction name="bleed" returntype="any" access="public" output="false">
        <cfargument name="outerVariables" type="any" required="true" />

        <cfset variables.exposed = arguments.outerVariables />
        <!--- expose known variables: --->
        <cfset variables.exposed.attributes = variables.attributes />

        <cfreturn this />

    </cffunction>

    <cffunction name="onApplicationStart" output="false">

        <!--- FB5: myFusebox is an object but has FB41-compatible public properties --->
        <cfset variables.myFusebox = createObject("component","myFusebox").init(variables.FUSEBOX_APPLICATION_KEY,variables.attributes,variables) />
        <!--- expose known variables: --->
        <cfset variables.exposed.myFusebox = variables.myFusebox />

        <!--- FB55: guarantee XFA struct exists --->
        <cfparam name="variables.xfa" default="#structNew()#" />
        <!--- FB51: ticket 164: add OO synonym for attributes scope --->
        <cfparam name="variables.event" default="#createObject('component','fuseboxEvent').init(attributes,xfa,myFusebox)#" />
        <!--- expose known variables: --->
        <cfset variables.exposed.xfa = variables.xfa />
        <cfset variables.exposed.event = variables.event />

        <cfset loadFusebox() />

    </cffunction>

    <cffunction name="onSessionStart" output="false">
    </cffunction>

    <cffunction name="onRequestStart" output="false">
        <cfargument name="targetPage" type="string" required="true" />

        <cfset var doCompile = true />

        <!--- ensure CFC / Web Service / Flex Remoting calls are not intercepted --->
        <cfif right(arguments.targetPage,4) is ".cfc">
            <cfset doCompile = false />
            <cfset structDelete(variables,"onRequest") />
            <cfset structDelete(this,"onRequest") />
        </cfif>

        <!--- onApplicationStart() may create this (on first request) --->
        <cfif not structKeyExists(variables,"myFusebox")>
            <!--- FB5: myFusebox is an object but has FB41-compatible public properties --->
            <cfset variables.myFusebox = createObject("component","myFusebox").init(variables.FUSEBOX_APPLICATION_KEY,variables.attributes,variables) />
            <!--- expose known variables: --->
            <cfset variables.exposed.myFusebox = variables.myFusebox />
        </cfif>

        <!--- FB55: guarantee XFA struct exists --->
        <cfparam name="variables.xfa" default="#structNew()#" />
        <!--- FB51: ticket 164: add OO synonym for attributes scope --->
        <cfparam name="variables.event" default="#createObject('component','fuseboxEvent').init(variables.attributes,variables.xfa,variables.myFusebox)#" />
        <!--- expose known variables: --->
        <cfset variables.exposed.xfa = variables.xfa />
        <cfset variables.exposed.event = variables.event />

        <cfif variables.myFusebox.parameters.load>
            <cflock name="#application.ApplicationName#_fusebox_#variables.FUSEBOX_APPLICATION_KEY#" type="exclusive" timeout="300">
                <cfif variables.myFusebox.parameters.load>
                    <cfset loadFusebox() />
                <cfelse>
                    <!--- _fba should *not* be exposed --->
                    <cfset _fba = application[variables.FUSEBOX_APPLICATION_KEY] />
                    <!--- fix attributes precedence --->
                    <cfif _fba.precedenceFormOrURL is "URL">
                        <cfset structAppend(variables.attributes,URL,true) />
                    </cfif>
                    <!--- set the default fuseaction if necessary --->
                    <cfif not structKeyExists(variables.attributes,_fba.fuseactionVariable) or trim(variables.attributes[_fba.fuseactionVariable]) is "">
                        <cfset variables.attributes[_fba.fuseactionVariable] = _fba.defaultFuseaction />
                    </cfif>
                    <cfset variables.attributes[_fba.fuseactionVariable] = trim(variables.attributes[_fba.fuseactionVariable]) />
                    <cfset variables.attributes.fuseaction = variables.attributes[_fba.fuseactionVariable] />
                </cfif>
            </cflock>
        <cfelse>
            <cfset _fba = application[variables.FUSEBOX_APPLICATION_KEY] />
            <!--- fix attributes precedence --->
            <cfif _fba.precedenceFormOrURL is "URL">
                <cfset structAppend(variables.attributes,URL,true) />
            </cfif>
            <!--- set the default fuseaction if necessary --->
            <cfif not structKeyExists(variables.attributes,_fba.fuseactionVariable) or trim(variables.attributes[_fba.fuseactionVariable]) is "">
                <cfset variables.attributes[_fba.fuseactionVariable] = _fba.defaultFuseaction />
            </cfif>
            <cfset variables.attributes[_fba.fuseactionVariable] = trim(variables.attributes[_fba.fuseactionVariable]) />
            <cfset variables.attributes.fuseaction = variables.attributes[_fba.fuseactionVariable] />
        </cfif>

        <!---
            Fusebox 4.1 did not set attributes.fuseaction or default the fuseaction variable until
            *after* fusebox.init.cfm had run. This made it hard for fusebox.init.cfm to do URL
            rewriting. For Fusebox 5, we default the fuseaction variable and set attributes.fuseaction
            before fusebox.init.cfm so it can rely on attributes.fuseaction and rewrite that. However,
            in order to maintain backward compatibility, we need to allow fusebox.init.cfm to set
            attributes[_fba.fuseactionVariable] and still have that reflected in attributes.fuseaction
            and for that to actually be the request that gets processed.
        --->
        <cfif _fba.debug>
            <cfset variables.myFusebox.trace("Fusebox","Including fusebox.init.cfm") />
        </cfif>
        <cftry>
            <!--- _fba_ttr_fav and _ba_attr_fa should *not* be exposed --->
            <cfset _fba_attr_fav = variables.attributes[_fba.fuseactionVariable] />
            <cfset _fba_attr_fa = variables.attributes.fuseaction />
            <cfinclude template="#_fba.getCoreToAppRootPath()#fusebox.init.cfm" />
            <cfif variables.attributes.fuseaction is not _fba_attr_fa>
                <cfif variables.attributes.fuseaction is not variables.attributes[_fba.fuseactionVariable]>
                    <cfif variables.attributes[_fba.fuseactionVariable] is not _fba_attr_fav>
                        <!--- inconsistent modification of both variables?!? --->
                        <cfthrow type="fusebox.inconsistentFuseaction"
                                message="Inconsistent fuseaction variables"
                                detail="Both attributes.fuseaction and attributes[{fusebox}.fuseactionVariable] changed in fusebox.init.cfm so Fusebox doesn't know what to do with the values!" />
                    <cfelse>
                        <!--- ok, only attributes.fuseaction changed --->
                        <cfset variables.attributes[_fba.fuseactionVariable] = variables.attributes.fuseaction />
                    </cfif>
                <cfelse>
                    <!--- ok, they were both changed and they match --->
                </cfif>
            <cfelse>
                <!--- attributes.fuseaction did not change --->
                <cfif variables.attributes[_fba.fuseactionVariable] is not _fba_attr_fav>
                    <!--- make attributes.fuseaction match the other changed variable --->
                    <cfset variables.attributes.fuseaction = variables.attributes[_fba.fuseactionVariable] />
                <cfelse>
                    <!--- ok, neither variable changed --->
                </cfif>
            </cfif>
        <cfcatch type="missinginclude" />
        </cftry>
        <cfif doCompile>
            <!---
                must special case development-circuit-load mode since it causes circuits to reload during
                the compile (post-load) phase and therefore must be exclusive
            --->
            <cfif _fba.debug>
                <cfset variables.myFusebox.trace("Fusebox","Compiling requested fuseaction '#variables.attributes.fuseaction#'") />
            </cfif>
            <!--- _parsedFileData should *not* be exposed --->
            <cfif _fba.mode is "development-circuit-load">
                <cflock name="#application.ApplicationName#_fusebox_#variables.FUSEBOX_APPLICATION_KEY#" type="exclusive" timeout="300">
                    <cfset _parsedFileData = _fba.compileRequest(attributes.fuseaction,myFusebox) />
                </cflock>
            <cfelse>
                <cflock name="#application.ApplicationName#_fusebox_#variables.FUSEBOX_APPLICATION_KEY#" type="readonly" timeout="300">
                    <cfset _parsedFileData = _fba.compileRequest(attributes.fuseaction,myFusebox) />
                </cflock>
            </cfif>
        </cfif>

    </cffunction>

    <!--- excuse the formatting here - it is done to completely suppress whitespace --->
    <cffunction name="onRequest"><cfargument 
                name="targetPage" type="string" required="true" /><cfsetting 
                            enablecfoutputonly="true">

        <cfif variables.myFusebox.parameters.execute>
            <cfif _fba.debug>
                <cfset myFusebox.trace("Fusebox","Including parsed file for '#variables.attributes.fuseaction#'") />
            </cfif>
            <cftry>
                <!---
                    readonly lock protects against including the parsed file while
                    another threading is writing it...
                --->
                <cflock name="#_parsedFileData.lockName#" type="readonly" timeout="30">
                    <cfinclude template="#_parsedFileData.parsedFile#" />
                </cflock>
            <cfcatch type="missinginclude">
                <cfif right(cfcatch.missingFileName, len(_parsedFileData.parsedName)) is _parsedFileData.parsedName>
                    <cfthrow type="fusebox.missingParsedFile" 
                            message="Parsed File or Directory not found."
                            detail="Attempting to execute the parsed file '#_parsedFileData.parsedName#' threw an error. This can occur if the parsed file does not exist in the parsed directory or if the parsed directory itself is missing." />
                <cfelse>
                    <cfrethrow />
                </cfif>
            </cfcatch>
            </cftry>
        </cfif>

        <cfsetting enablecfoutputonly="false">
    </cffunction>

    <cffunction name="onRequestEnd" output="true">
        <cfargument name="targetPage" type="string" required="true" />

        <cfif structKeyExists(variables,"myFusebox")>
            <cfset variables.myFusebox.trace("Fusebox","Request completed") />
        </cfif>
        <cfif isDefined("_fba.debug") and _fba.debug and structKeyExists(variables,"myFusebox") and right(arguments.targetPage,4) is not ".cfc">
            <cfoutput>#variables.myFusebox.renderTrace()#</cfoutput>
        </cfif>

    </cffunction>

    <cffunction name="onSessionEnd" output="false">
    </cffunction>

    <cffunction name="onApplicationEnd" output="false">
    </cffunction>

    <cffunction name="onError">
        <cfargument name="exception" />

        <cfset var stack = 0 />
        <cfset var prefix = "Raised at " />

        <!--- top-level exception is always event name / expression for Application.cfc (but not fusebox5.cfm) --->
        <cfset var caughtException = arguments.exception />

        <cfif structKeyExists(caughtException,"rootcause")>
            <cfset caughtException = caughtException.rootcause />
        </cfif>

        <cfif listFirst(caughtException.type,".") is "fusebox">
            <cfif isDefined("_fba.debug") and _fba.debug and structKeyExists(variables,"myFusebox")>
                <cfset variables.myFusebox.trace("Fusebox","Caught Fusebox exception '#caughtException.type#'") />
                <cfif structKeyExists(caughtException,"tagcontext")>
                    <cfloop index="stack" from="1" to="#arrayLen(caughtException.tagContext)#">
                        <cfset variables.myFusebox.trace("Fusebox",prefix & 
                                caughtException.tagContext[stack].template & ":" & 
                                caughtException.tagContext[stack].line) />
                        <cfset prefix = "Called from " />
                    </cfloop>
                </cfif>
            </cfif>
            <cfif not isDefined("_fba.errortemplatesPath") or (
                    structKeyExists(variables,"attributes") and structKeyExists(variables,"myFusebox") and
                    not _fba.handleFuseboxException(caughtException,variables.attributes,variables.myFusebox,variables.FUSEBOX_APPLICATION_KEY)
                    )>
                <cfif isDefined("_fba.debug") and _fba.debug and structKeyExists(variables,"myFusebox")>
                    <cfoutput>#variables.myFusebox.renderTrace()#</cfoutput>
                </cfif>
                <cfthrow object="#caughtException#" />
            </cfif>
        <cfelse>
            <cfif isDefined("_fba.debug") and _fba.debug and structKeyExists(variables,"myFusebox")>
                <cfset variables.myFusebox.trace("Fusebox","Request failed with exception '#caughtException.type#' (#caughtException.message#)") />
                <cfif structKeyExists(caughtException,"tagcontext")>
                    <cfloop index="stack" from="1" to="#arrayLen(caughtException.tagContext)#">
                        <cfset variables.myFusebox.trace("Fusebox",prefix & 
                                caughtException.tagContext[stack].template & ":" & 
                                caughtException.tagContext[stack].line) />
                        <cfset prefix = "Called from " />
                    </cfloop>
                </cfif>
                <cfoutput>#variables.myFusebox.renderTrace()#</cfoutput>
            </cfif>
            <cfthrow object="#caughtException#" />
        </cfif>

        <!--- if we hit an error before starting the request, prevent the request from running --->
        <cfset myFusebox.parameters.execute = false />

    </cffunction>

    <cffunction name="override" returntype="void" access="public" output="false">
        <cfargument name="name" type="string" required="true" />
        <cfargument name="value" type="any" required="true" />
        <cfargument name="useThisScope" type="boolean" default="false" />

        <cfif arguments.useThisScope>
            <cfset this[arguments.name] = arguments.value />
        <cfelse>
            <cfset variables[arguments.name] = arguments.value />
        </cfif>

    </cffunction>

    <cffunction name="onFuseboxApplicationStart">
    </cffunction>

    <cffunction name="loadFusebox" access="private" output="false">
        <!--- ticket 232: extend request timeout value on framework load --->
        <cfsetting requesttimeout="600" />
        <cfif not structKeyExists(application,variables.FUSEBOX_APPLICATION_KEY) or variables.myFusebox.parameters.userProvidedLoadParameter>
            <!--- can't be conditional: we don't know the state of the debug flag yet --->
            <cfset variables.myFusebox.trace("Fusebox","Creating Fusebox application object") />
            <cfset _fba = createObject("component","fuseboxApplication") />
            <cfset application[variables.FUSEBOX_APPLICATION_KEY] = _fba.init(variables.FUSEBOX_APPLICATION_KEY,variables.FUSEBOX_APPLICATION_PATH,variables.myFusebox,variables.FUSEBOX_CALLER_PATH,variables.FUSEBOX_PARAMETERS) />
        <cfelse>
            <!--- can't be conditional: we don't know the state of the debug flag yet --->
            <cfset variables.myFusebox.trace("Fusebox","Reloading Fusebox application object") />
            <cfset _fba = application[variables.FUSEBOX_APPLICATION_KEY] />
            <!--- it exists and the load is implicit, not explicit (via user) so just reload XML --->
            <cfset _fba.reload(variables.FUSEBOX_APPLICATION_KEY,variables.FUSEBOX_APPLICATION_PATH,variables.myFusebox,variables.FUSEBOX_PARAMETERS) />
        </cfif>
        <!--- fix attributes precedence --->
        <cfif _fba.precedenceFormOrURL is "URL">
            <cfset structAppend(variables.attributes,URL,true) />
        </cfif>
        <!--- set the default fuseaction if necessary --->
        <cfif not structKeyExists(variables.attributes,_fba.fuseactionVariable) or variables.attributes[_fba.fuseactionVariable] is "">
            <cfset variables.attributes[_fba.fuseactionVariable] = _fba.defaultFuseaction />
        </cfif>
        <!--- set this up for fusebox.appinit.cfm --->
        <cfset variables.attributes.fuseaction = variables.attributes[_fba.fuseactionVariable] />
        <!--- flag this as the first request for the application --->
        <cfset variables.myFusebox.applicationStart = true />
        <!--- force parse after reload for consistency in development modes --->
        <cfif _fba.mode is not "production" or variables.myFusebox.parameters.userProvidedLoadParameter>
            <cfset variables.myFusebox.parameters.parse = true />
        </cfif>
        <!--- need all of the above set before we attempt any compiles! --->
        <cfif variables.myFusebox.parameters.parseall>
            <cfset _fba.compileAll(variables.myFusebox) />
        </cfif>
        <!--- FB55: template method to allow no-XML application initialization --->
        <cfif _fba.debug>
            <cfset variables.myFusebox.trace("Fusebox","Executing onFuseboxApplicationStart()") />
        </cfif>
        <cfset onFuseboxApplicationStart() />
        <!--- FB5: new appinit include file --->
        <cfif _fba.debug>
            <cfset variables.myFusebox.trace("Fusebox","Including fusebox.appinit.cfm") />
        </cfif>
        <cftry>
            <cfinclude template="#_fba.getCoreToAppRootPath()#fusebox.appinit.cfm" />
        <cfcatch type="missinginclude" />
        </cftry>
        <!--- ticket 269 ensure there is no double reload at CF startup --->
        <cfset variables.myFusebox.parameters.load = false />
    </cffunction>

    </cfprocessingdirective>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:43:07.923

我不知道为什么你会得到你所看到的错误，但是在 CF9 中你不需要在 delete 周围做所有的事情`onRequest()`，你可以简单地[`onCfcRequest()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSe821657cd7d6f83f6daaa733122cf6931bb-8000.html)在那里有一个方法，它会被调用而不是`onRequest()`在请求时调用制造氟氯化碳。这样做可以消除出现错误情况的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T20:12:49.853

最后我能够解决这个问题。我认为该错误仅显示在本地主机中，但未显示在任何服务器上。另外，发现问题只出在带有bind cfc的cfselect上。我没有看到 localhost 和其他服务器中的设置有任何区别。所以我尝试对保险丝盒代码进行一些更改并修复它。在 fusebox5.cfm 更改后使其工作。

```
<cftry>
    <cfset __fuseboxAppCfc.onRequest(CGI.SCRIPT_NAME) />
    <cfset __fuseboxAppCfc.onRequestEnd(CGI.SCRIPT_NAME) />
    <cfcatch type="any">
        <cfset __fuseboxAppCfc.onError(cfcatch)>
    </cfcatch>
</cftry> 
```

将其更改为：

```
<cftry>
    <cfif right(CGI.SCRIPT_NAME,"4") NEQ ".cfc">
        <cfset __fuseboxAppCfc.onRequest(CGI.SCRIPT_NAME) />
    </cfif>
    <cfset __fuseboxAppCfc.onRequestEnd(CGI.SCRIPT_NAME) />
    <cfcatch type="any">
        <cfset __fuseboxAppCfc.onError(cfcatch)>
    </cfcatch>
</cftry> 
```

# java - 在 weblogic 上登录 web 服务

> ID：16061939
> 
> 赞同：3
> 
> 时间：2013-04-17T13:50:57.583
> 
> 标签：java, web-services, logging, log4j, weblogic

我一直在尝试在 Weblogic 服务器上部署 JAX-WS 服务，如此链接中所示，[创建一个简单的 HelloWorld Web 服务](http://docs.oracle.com/cd/E23943_01/web.1111/e13758/use_cases.htm#autoId0)。我已经部署了它，发现它工作得很好。

现在，每当调用此服务时，我还想将数据写入日志文件。为此，我正在使用 log4j。这就是我尝试修改链接中的代码的方式。

```
package examples.webservices.hello_world;

import javax.jws.WebService;
import org.apache.log4j.Logger; 

@WebService(name="HelloWorldPortType", serviceName="HelloWorldService")
public class HelloWorldImpl {

    public static Logger log = Logger.getLogger(HelloWorldImpl.class);

    public String sayHelloWorld(String message) {
    try {
        log.info("Start");
        System.out.println("sayHelloWorld:" + message);
    } catch (Exception ex) { ex.printStackTrace(); }
        return "Here is the message: '" + message + "'";
    }
} 
```

我已经在变量中设置了`log4j-1.2.8.jar`文件的路径。`CLASSPATH`但是当我尝试构建 Web 服务时，它会说，`java.lang.ClassNotFoundException: org.apache.log4j.Logger`.

我正在使用与`build.xml`链接中给出的相同文件。文件中是否需要任何修改`build.xml`？我应该将 log4j.properties 文件放在哪里？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T10:16:39.300

即使设置了类路径，这个问题**也必须是**因为 weblogic 无法在运行时找到 log4j。具体来说，war的Classloader是找不到log4j的。

以下是解决问题的方法：

1.  如果您实际上捆绑`log4j`在您的 WAR 中，请检查您的 build.xml。
2.  转到 autodeploy 目录，将 war 文件复制到其他位置，将其放气并`WEB-INF/lib`检查 log4j 是否确实存在
3.  检查您的类路径中是否有多个 log4j 版本。

最后，在 weblogic 中部署一组可重用 jar 的首选方法是通过[共享库](http://docs.oracle.com/cd/E13222_01/wls/docs92/programming/libraries.html)并通过`weblogic.xml`.

它有助于：

*   避免在不同的战争中重复捆绑 jar 文件。
*   确保您的所有部署都简化为首选版本的库。

# maven - 从父 POM 中定义的配置文件调用子模块的配置文件

> ID：16061941
> 
> 赞同：0
> 
> 时间：2013-04-17T13:50:59.593
> 
> 标签：maven, pom.xml

我在父 POM 中有以下个人资料：

```
<profile>
    <id>myprofile</id>
    <activation>
       <activeByDefault>false</activeByDefault>
    </activation>
    <modules>
        <module>module1</module>
        <module>module2</module>
    </modules>
</profile> 
```

现在在我的模块 2 的子 POM 中，我有以下配置文件：

```
<profiles>
    <profile>
        <id>module2profile</id>
        <build>
            <finalName>mywar</finalName>
            <plugins>
            ....
            </plugins>
        </build>
    </profile>
</profiles> 
```

我的要求是从父 POM 配置文件中，而不是引用“module2”，我想引用配置文件“module2profile”。我需要这个，因为在我的 module2 中，我创建了 2 个不同的 war 文件（一个是正常创建的，另一个是由“module2profile”创建的）。

# python - 根据 XY 坐标创建直方图

> ID：16061943
> 
> 赞同：0
> 
> 时间：2013-04-17T13:51:00.400
> 
> 标签：python, r, plot

我希望能够让用户在 XY 平面上拖动点，从而生成直方图（在 Python 3.3 中）。

考虑下图，其中红色显示鼠标的动作（箭头开始是 CLICK，箭头结束是用户 LETS GO）：

有没有可以完成的包，或者你认为会有很大的帮助？目标是能够创建具有这种形状的离散直方图。

我想我需要的是能够记录拖动路径？

![在此处输入图像描述](https://i.stack.imgur.com/3Fbsl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:10:05.523

[http://pygooglechart.slowchop.com/](http://pygooglechart.slowchop.com/)

是 Google Chart API 的 Python 包装器。只需查看文档。

特别是检查来自 github [https://github.com/gak/pygooglechart/tree/master/examples的示例](https://github.com/gak/pygooglechart/tree/master/examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:07:04.223

在 R 中，您可以使用`locator()`在当前设备上注册鼠标左键单击。您可以获取这些位置并从中构建直方图。我很确定这只适用于离散的点击，而不是平滑的拖动动作。`?locator()`有关此功能的更多详细信息，请参阅。

# c++ - 在win32中绘制像素的最快方法是什么

> ID：16061948
> 
> 赞同：0
> 
> 时间：2013-04-17T13:51:18.687
> 
> 标签：c++, winapi, 3d, renderer, doublebuffered

我正在编写一个简单的软件渲染器，加载 3d 模型，处理顶点，光栅化，纹理，照明，所有这些都完成了。我使用 SDL（不使用 OpenGL 模式）在其 SDL_Surface 上绘制像素，并调用 SDL_Flip，因此出现一帧。

出于某种原因，现在我不想使用 SDL，我只需要一个双缓冲区来绘制像素。

我知道有办法做到这一点，OpenGL，Direct3D，gdi，也许它们对于这个项目来说太“先进”了，在 win32 上将像素绘制到后缓冲区的直接（或最快）方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:39:20.840

我建议为此使用图形 API（OpenGL 或 Direct3D），但 GDI 将是最简单的选择。`CreateDIBSection`您可以使用返回指向位图内存的指针的函数创建 DIB（设备独立位图） 。然后，您可以随意修改位图的像素并将其绘制到窗口的客户区。有关该技术的源代码和解释，请参阅 Charles Petzold的*Programming Windows* (5th)第 15 章。

# php - 一直打印，除了数据库中的那些

> ID：16061952
> 
> 赞同：-5
> 
> 时间：2013-04-17T13:51:24.397
> 
> 标签：php, html, mysql, forms, date

我需要关于如何制作 HTML/PHP 表单的建议。我需要制作一个带有一些选项的列表框。目前我有这样的选择：

```
<option value="17:00:00">17:00</option>
<option value="18:00:00">18:00</option>
<option value="19:00:00">19:00</option> 
```

在我的数据库中，我有两列：ID 和时间。

假设我有一行 ID：1，时间：18:00:00。

我怎样才能让它不出现在我的列表框中？当然，我已经打开了与数据库的连接。

感谢您的任何建议！

编辑：为什么投反对票？我的问题有什么问题？有时候我真的不了解这个社区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:57:10.440

```
<?php
$all_times = array('17:00:00', '18:00:00' ...) ;
$times_in_db = fetchTimes($your_db); // expected to return an array of all 'times' in your DB
$diff = array_diff($all_times, $times_in_db);

foreach ($diff as $time) {
    echo "<option value=\"$time\">$time</option>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:58:21.180

1.  使用数据库查询获取值，以便您获得类似`$blacklist = array('18:00','19:00')`
2.  检查时间是否被列入黑名单`if(!in_array('18:00', $blacklist)){...}`

如果您将列入白名单的值作为数组，并且您不想签入查看部分，那么最好使用 array_diff 作为@YaK 回答

# python - 带有代理的 wxpython httplib 显示 400 错误请求

> ID：16061956
> 
> 赞同：0
> 
> 时间：2013-04-17T13:51:30.273
> 
> 标签：python, wxpython, httplib

看看其他线程，但无法从中构建任何东西。

我有一个 URL 列表，我正在尝试获取其 HEAD 状态并在进一步操作之前进行检查。我当前使用 httplib 的代码工作正常（其他部分），但是我需要确保代码在代理后面工作，这是我遇到问题的地方。

该代码工作并产生一个输出（如果是部分），但来自 URL 的输出状态是“400 bad request”，这似乎是它没有被正确代理。

```
dlg = wx.MessageDialog(self, "Are you connected to a proxy?", "LAN check", wx.YES | wx.NO | wx.ICON_INFORMATION)
    if dlg.ShowModal() == wx.ID_YES:
        self.urlFld.SetValue("")
        for line in self.myList:
            url = urlparse.urlparse(line)
            conn = httplib.HTTPConnection("myproxy.com", 8080)
            conn.request("HEAD", url.path)
            r1 = conn.getresponse()
            r1 = r1.status, r1.reason
            r1 = str(r1)
            self.urlFld.AppendText(url.scheme + "://" + url.hostname + url.path + "\t\t\t" + r1 + "\r")
    else:
        self.urlFld.SetValue("")
        for line in self.myList:
                url = urlparse.urlparse(line)
                conn = httplib.HTTPConnection(url.hostname)
                conn.request("HEAD", url.path)
                r1 = conn.getresponse()
                r1 = r1.status, r1.reason
                r1 = str(r1)
                self.urlFld.AppendText(url.scheme + "://" + url.hostname + url.path + "\t\t\t" + r1 + "\r") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:02:41.810

IIRC，如果您使用的是代理服务器，则必须将完整的 URL 传递给该`HEAD`方法...

```
if dlg.ShowModal() == wx.ID_YES:
    self.urlFld.SetValue("")
    for line in self.myList:
        conn = httplib.HTTPConnection("myproxy.com", 8080)
        conn.request("HEAD", line)
        r1 = conn.getresponse() 
```

...否则它无法知道要连接到哪个主机。

# android - 在android中终止正在运行的应用程序

> ID：16061958
> 
> 赞同：1
> 
> 时间：2013-04-17T13:51:35.483
> 
> 标签：android, kill-process

我正在使用以下代码来终止后台应用程序（计算器）。为此，我在运行应用程序时创建了一项服务。它没有杀死后台进程（计算器）我也给予许可的代码有什么问题。`"android.permission.KILL_BACKGROUND_PROCESSES"`

```
 ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(Activity.ACTIVITY_SERVICE);
                    List<ActivityManager.RunningTaskInfo> packageName = am.getRunningTasks(10);
                    // String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
                    for (RunningTaskInfo appinfo : packageName) 
                    {
                        if((appinfo.topActivity.getPackageName().toString()).indexOf("calculator2")!= -1)
                        {
                        Log.i(Tag,""+ appinfo.topActivity.getPackageName());
                        Toast.makeText(MyService.this, ""+appinfo.topActivity.getPackageName(), Toast.LENGTH_SHORT).show();
                        am.killBackgroundProcesses(appinfo.topActivity.getPackageName());
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T06:51:35.527

参考这个[答案](https://stackoverflow.com/a/45706718/7067558)

当我们使用它时，我们也不需要“android.permission.KILL_BACKGROUND_PROCESSES”权限

# jquery - Jquery对话框href变量未在按钮中更新

> ID：16061961
> 
> 赞同：1
> 
> 时间：2013-04-17T13:52:00.087
> 
> 标签：jquery, jquery-dialog

我有一个带有三个按钮的 jquery 对话框。当用户单击链接时，我想将 href 抓取到变量中，阻止链接执行，并显示带有保存、丢弃或取消选项的对话框。在保存或丢弃时，我想导航到他们单击的链接。我正在使用 php/jquery。

一切都很好，除了如果用户单击链接“A”，然后单击对话框上的取消，然后单击链接“B”并在对话框上选择丢弃，浏览器导航到链接“A”而不是“B” “！

我究竟做错了什么？

这是我的代码，我将在下面详细解释：

```
 function myFunction(href) {
        if (check == false) {
          alert (href);
          $('#replaceSave').hide();
          $( "#tabWarn" ).dialog( "open" );
           $(function() {
             alert (href);
              $( "#tabWarn" ).dialog({
                  resizable: false,
                  height:240,
                  width:400,
                  modal: true,
                  buttons: {
                    Cancel: function() {
                      check = false;
                      setConfirmUnload(true);
                      $( this ).dialog( "close" );
                    },
                    "Discard": function() {
                            alert(href);
                            check = true;
                            setConfirmUnload(false);
                            alert(href);
                            if (href != 'no') {
                              window.location.href = href;
                            }
                            $( this ).dialog( "close" );
                    },
                    "Save": function() {
                            saveFunction();
                            if (href != 'no') {
                              setTimeout(function() { window.location.href = href; }, 2000);
                            }
                            $('#replaceSave').show();
                            setTimeout(function() { $( '#tabWarn' ).dialog( "close" ); }, 2000);
                    },
                  }
              });
          });
        }
    } 
```

href 的第一个警报始终显示正确的地址。当我单击链接“A”然后选择取消时，所有警报都显示“A”。但是当我返回并单击链接“B”并选择丢弃时，所有警报都显示链接“B”，除了丢弃按钮内的警报 - 它们显示链接“A”。因此，即使我点击了“B”，页面也会导航到链接“A”。

如果我先单击链接“B”并选择丢弃，则它可以正常工作。只有当我选择取消然后再次单击并选择另一个链接时，它才能正常工作。

仅供参考，href 始终设置。死链接当前将“否”传递给该函数。但是，我上面的所有问题都与活动链接和死链接有关。

下面是调用该函数的代码：

```
 $('a.chk').click(function (event) {
          if (check == false) {
                var addressValue = $(this).attr("href");
                //alert(addressValue);
                setConfirmUnload(false);
                event.preventDefault();
                return myFunction(addressValue);
          }
        }); 
```

我会很感激你的意见！

我搜索了类似的问题，但没有找到任何东西，但我可能错过了一个，因为我不知道如何搜索这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:20:50.037

尝试动态生成和销毁对话框

```
function customConfirm(msg, href) {
  var container = $("<div/>").append(msg);

  $( container ).dialog({
    // your dialog stuff
    close: function () {
       $(this).remove();
    }                
  }); 
}

// If you want to keep your #tabWarn
customConfirm($("#tabWarn").html(),href);

// If you want some custom msg
customConfirm("Are you sure you want to do that?",href); 
```

至于它发生的原因：jquery ui 对话框的默认行为是在对话框附加到它后显示或隐藏对话框 Div。您可以使用旧方法（不破坏）进行测试，将其打开一次，然后检查 DOM，您应该会在正文末尾看到一个隐藏的 div。

结果，您第二次单击链接时，您使用第一次创建的对话框以及第一个链接的配置。

# objective-c - NSString 发现符号崩溃了

> ID：16061964
> 
> 赞同：0
> 
> 时间：2013-04-17T13:52:07.560
> 
> 标签：objective-c, xcode, nsstring, nsregularexpression

每次我都会从我的服务器上得到一个字符串：

> "&abc;123:342:431:234& &xyz;232:2344:433:434& &pqr;234:453:534:3445&"

但有时我会得到

> "&pqr;234:453:534:3445& &abc;123:342:431 &xyz;232:2344:433:434&"

我想丢弃这些消息（不以“&”结尾）例如：`&abc;123:342:431`。我试过了，但我不知道我在哪里犯错误。

这是我的代码：

```
- (BOOL)ashCheckandsemiclonCheck:(NSString *)string {
    if([string rangeOfString:@"&abc"].location != NSNotFound) {
        NSLog(@"is here");
        NSString *pattern = @"&abc[^&]+&";
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                                                               options:0 error:NULL];

        [regex enumerateMatchesInString:string options:0 range:NSMakeRange(0, [string length])
                             usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                                 NSRange range = [result range];
                                 matched = [string substringWithRange:range];

                                 NSLog(@"%@", matched);
                             }];
        NSLog(@"filtered Message :%@", matched);
        int times = [[matched componentsSeparatedByString:@"&"] count] - 1;
        NSLog(@"counted times :%i", times);

        if (times == 2) {
            return TRUE;
        } else {
            return FALSE;
        }       
    } else {   
        return FALSE;
    }
} 
```

* * *

如果我有两个参数，我想调用此参数，`&`但在我的代码中出现错误`NSLog(@"is here");`。正如我所说，有时我会收到一半的消息。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:47:34.350

如果我正确阅读了您的问题，您似乎只需要通过检查消息字符串是否以“&”开头和结尾来测试它是否有效。我这样做的方法是写这样的东西：

```
 NSString* testMessage = @"&bfjhfbgfjhb&";
 NSString* firstCharacter = [testMessage substringToIndex:1];
 NSString* lastCharacter  = [testMessage substringFromIndex:testMessage.length - 1];

 if (([firstCharacter isEqualToString:@"&"]) &&
      [lastCharacter isEqualToString:@"&"]){

    //This is a valid message. Proceed.

 }else{

   //This is not a valid message. Discard.

 } 
```

# 更新

好的，根据您的问题编辑/更新，我编辑了您的代码 - 特别是您的正则表达式模式字符串 - 以执行我*认为*您想要的操作，即检查您的消息的“&abc ...”小节是否开始并以 '&' 字符结尾：

```
-(BOOL) ashCheckandsemiclonCheck :(NSString *)string;
{

    if([string rangeOfString:@"&abc"].location !=NSNotFound)
    {
        NSLog(@"is here");

        NSString *pattern = @"&abc[^&\\s]+[^\\s]";

        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                                                           options:0 error:NULL];
        NSString* __block matched;
        [regex enumerateMatchesInString:string options:0 range:NSMakeRange(0, [string length])
                         usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                             NSRange range = [result range];
                             matched = [string substringWithRange:range];

                             NSLog(@"Matched: %@", matched);

                         }];

        NSLog(@"filtered Message :%@", matched);
        int times =[[matched componentsSeparatedByString:@"&"]count]-1;
        NSLog(@"counted times :%i",times);

        if(times ==2){
            return YES;
        }else  
        {
            return NO;
        }       
    }
    else
    {   
        return NO;
    }
} 
```

还将您的 BOOL 返回更改为 Objective-C 标准的 YES 和 NO，而不是 TRUE 和 FALSE。

希望这能满足您的需要。

# c++ - 派生类比基类大，即使它包含引用变量

> ID：16061976
> 
> 赞同：3
> 
> 时间：2013-04-17T13:52:37.217
> 
> 标签：c++

从我到目前为止所读到的，似乎引用变量根本不应该占用任何内存。相反，它们被视为它们引用的完全相同的变量，但名称不同。

但是，当我运行以下代码时，似乎并非总是如此：

```
#include <cstdio>
struct A
{
    int m[3];
};
struct B: A
{
    B():x(m[0]), y(m[1]), z(m[2]){}
    int& x;
    int& y;
    int& z;
};
int main(){
    printf("%u, %u\n", sizeof(A), sizeof(B));
    return 0;
} 
```

输出：

```
12, 40 
```

为什么B比A大那么多？

有没有其他方法可以访问，例如使用 Bx 访问 Bm[0]？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T14:07:46.270

> 从我到目前为止所读到的，似乎引用变量根本不应该占用任何内存。

您应该进一步阅读；）说真的，引用不是魔术。所以在现实世界中，对象必须以某种方式存储有关引用绑定到哪个对象的信息。因此，虽然从概念上讲，引用没有大小，但实际上它非常像指针，通常编译器只使用指针。与指针不同的行为（非空，不可重新分配，无需取消引用）由编译器在编译时强制执行。

所以你看到的基本上是 A 的大小加上 padding 加上三个指针的大小。我猜你在一个`sizeof(int)`4 和`sizeof(void*)`8 的 64 位系统上：

```
 12 bytes for the A subobject (4 for each int)
+ 4 bytes padding (to get to a multiple of 8 bytes)
+24 bytes for the 3 references/pointers in B (8 for each one)
--------------
 40 bytes total 
```

对于您的另一个问题，给定一个`b`类型的对象`B`，您可以`b.m[0]`直接访问它，因为它是公开的`A`并且是公开继承的。在没有您遇到的引用开销的情况下给它另一个名称是不可能的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:06:13.480

你解释错了。纯粹在本地使用的*[引用可以并且经常被优化器消除](https://stackoverflow.com/questions/2323189/how-is-a-reference-different-from-a-pointer-in-implementation)*。请注意，在它的生命周期内，我们仍然需要将它存储在某个地方（比如在寄存器中）。

编译器不能像局部变量那样容易地预测对象的生命周期，因此，成员引用实际上不能被替换和丢弃：有必要保存指向实际内容的指针（4 字节或 8 字节）在对象生命周期内保持成员一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T14:05:20.990

引用就像一个指针，它不能为空，也不能被“重新定位”（指向它最初指向的东西以外的东西）。因此，我们可能期望引用占用与指针相同的空间量（尽管不能保证）。所以三个整数，4 个字节用于对齐，然后三个 8 字节指针将是 40 个字节，使您的示例完全合理。

你可以让一个方法像`B.x()`返回一个值而不占用更多空间。但是由于 C++ 缺少“属性”，因此您无法`B.x`返回不占用空间的内容（即，您无法创建看起来像成员变量访问但行为类似于方法调用的内容）。

# f# - F# 引用对任何事情都有用吗？

> ID：16061977
> 
> 赞同：5
> 
> 时间：2013-04-17T13:52:39.060
> 
> 标签：f#, functional-programming, metaprogramming

我认为我可以使用引号来完成我正在尝试做的事情（创建一个表达式树，我可以将其存储在数据库中并稍后执行）。然而，令我沮丧的是，我了解到引用不可序列化且无法编译（我想避免使用 F# PowerPack，因为性能很差）。

所以我很想知道，F# 引用对任何事情都有用吗？如果不能将表示代码的数据结构重新编译回代码，那么它有什么用呢？我在这里想念什么？

相关： [F# 引用的另一个限制？](https://stackoverflow.com/questions/6418000/another-limitation-of-f-quotations) [什么是 F# 引号？](https://stackoverflow.com/questions/3548395/what-are-f-quotations)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:45:20.613

是的，它们对某些东西很有用。

维基百科说

> F# 引用用于各种目的，包括将 F# 代码编译为 JavaScript 和 GPU 代码。

我已经对它们进行了试验，并创建了一个 F#-Code 到 ActionScript 编译器。

# javascript - 如何使用 jQuery 和 HTML 选择元素访问对象？

> ID：16061988
> 
> 赞同：2
> 
> 时间：2013-04-17T13:53:02.403
> 
> 标签：javascript, jquery

我有这个结构：

```
var data = {
    'horizontal':{
         'static':[1,3,5,7,9],
         'dynamic':[2,4,6,8]
    },
    'vertical':{
         'static':[1,3,5,7,9],
         'dynamic':[2,4,6,8]
    }
}; 
```

我有这个 HTML 对象：

```
Direction:
<select id="direction">
    <option value="horizontal">Horizontal</option>
    <option value="vertictal">Vertictal</option>
</select>

Type:
<select id="mytype">
    <option value="static">Static</option>
    <option value="dynamic">Dynamic</option>
</select> 
```

我可以`data.horizontal.static[2]`像这样访问吗？

```
var result = data.[ $('#direction').val() ].[ $('#mytype').val() ][2]; 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:56:21.967

你的语法很接近......你需要：

```
var result = data[ $('#direction').val() ][ $('#mytype').val() ][2]; 
```

注意（方括号之间没有句点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:57:27.783

尝试删除点

```
var result = data[ $('#direction').val() ][ $('#mytype').val() ][2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:56:58.323

不确定您在这里想要什么值，但这是您访问值的方式：

```
console.log(data['horizontal']);
console.log(data['horizontal']['static']);
console.log(data['horizontal']['static'][2]); 
```

小提琴：

[http://jsfiddle.net/jj49G/](http://jsfiddle.net/jj49G/)

# jquery - 动态加载的图像返回outerHeight为0（jQuery）

> ID：16061991
> 
> 赞同：1
> 
> 时间：2013-04-17T13:53:12.300
> 
> 标签：jquery, html, dynamic, dynamic-data

似乎由于某种原因该`.load`方法不起作用。在我的jQuery中：

```
$(document).ready(function() {
    var imgHeight;
    $('body').prepend('<img src="http://farm9.staticflickr.com/8266/8653931785_4a8d43164f.jpg" class="select" />');
    if($('img.select').prop('complete')) {
       imgHeight = $('img.select').outerHeight();
    }else{
        $('img.select').load(function() {
            imgHeight = $('img.select').outerHeight();
        });    
    }
    $('body').prepend('<p>Image Height: ' + imgHeight + '</p>');
}); 
```

和一个[jsfiddle的链接](http://jsfiddle.net/hcarleton/2Dx5t/)

示例运行几次后（我假设图像已缓存），它将成功检索正确的高度。这告诉我`if($('img.select').prop('complete'))`工作正常。

我在这里想念什么？

（在 Chrome 和 FF 中测试）

编辑：好的，现在如果我想检查多个图像（如果它们已加载）怎么办？ `$('img.select').prop('complete')`仅测试与选择器匹配的第一个元素。 [http://jsfiddle.net/hcarleton/2Dx5t/6/](http://jsfiddle.net/hcarleton/2Dx5t/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:00:45.543

**编辑**更新为使用[one()](http://api.jquery.com/one/)而不是弃用`load()`

`load()`是异步的，因此不会`imgHeight`在调用`$('body').prepend('<p>Image Height: ' + imgHeight + '</p>');`. 从 jQuery 1.8 开始，`load()`事件处理函数也被弃用了。

最好将委托的负载侦听器附加到具有`.select`该类的任何图像的主体上。在该事件处理程序的回调中，您可以检测图像高度。

```
$(document).ready(function() {
    $('body').one('load', 'img.select', function(e) {
        var imgHeight = $('img.select').outerHeight();
        $('body').prepend('<p>Image Height: ' + imgHeight + '</p>');
    });    

    $('body').prepend('<img src="http://farm9.staticflickr.com/8266/8653931785_4a8d43164f.jpg" class="select" />');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:59:27.760

改用这个：

[看演示](http://jsfiddle.net/2Dx5t/1/)

```
$(document).ready(function () {
    var imgHeight;
    $('body').prepend('<img src="http://farm9.staticflickr.com/8266/8653931785_4a8d43164f.jpg" class="select" />');
    $("img").one('load', function () {
        imgHeight = $(this).outerHeight();
        $('body').prepend('<p>Image Height: ' + imgHeight + '</p>');
    }).each(function () {
        if (this.complete) $(this).load();
    });

}); 
```

# c++ - 从临时类型中对类型的非常量引用的初始化无效

> ID：16061992
> 
> 赞同：1
> 
> 时间：2013-04-17T13:53:15.687
> 
> 标签：c++

我的班级结构如下：

Test_Camera.h：

```
class Test_Camera : public Camera_Interface {
public:
   Test_Camera (string const& aName);
   ... 
```

Test_Camera.cpp

```
Test_Camera::Test_Camera(string const& aName) : Camera_Interface(0, 0, 0, 0), name(aName) 
```

在我实例化`Test_Camera`对象的代码中，我有 2 个场景。第一个编译得很好，但第二个没有，我不知道为什么。

```
Test_Camera cam ("cam"); // This compiles

Test_Camera& cam ("cam"); // This does not compile 
```

当我尝试编译第二个示例时，出现错误：

> 错误：从“const char *”类型的临时对象对“Test_Camera&”类型的非常量引用无效初始化

我也试过：

```
string name = "cam";
Test_Camera& cam (name); //does not compile 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T13:56:14.417

引用应引用现有对象：

```
Test_Camera cam ("cam");
Test_Camera &cam_ref = cam; 
```

# javascript - 在条件下将 XSL 属性保存到 JavaScript 数组

> ID：16061994
> 
> 赞同：1
> 
> 时间：2013-04-17T13:53:18.343
> 
> 标签：javascript, arrays, xslt

我是 XSL 的新手，花了几个小时寻找从 XSLT 中提取属性值的解决方案。

我的 XML 看起来像：

```
<itemList>
  <item id="1" name="mydoc1"  showItem="option1">My documents1</item>
  <item id="2" name="mydoc1"  showItem="option2">My documents2</item>
  <item id="2" name="mydoc1"  showItem="option1">My documents3</item>
  ...
  <item id="k" name="mydocWhatever"  showItem="option1">My documents Whatever</item>
  ...

  <item id="n" name="mydocN"  showItem="optionN">My documentsN</item>
</itemList> 
```

我想获取所有`item.name`时间`showItem="option1"`并将其存储到 JavaScript 数组或对象中。

我试过这个，但它不起作用。

```
<xsl:for-each select="itemList/item[@showItem = 'option1']"> 
  myItem='<xsl:value-of select="//itemList/item/@name"/>');
</xsl:for-each> 
```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:28:20.907

```
<xsl:text>var myItem = [</xsl:text>
<xsl:for-each select="itemList/item[@showItem = 'option1']">
  <xsl:if test="position() &gt; 1">, </xsl:if>
  <xsl:value-of select="concat(&quot;'&quot;, @name, &quot;'&quot;)"/>
</xsl:for-each>
<xsl:text>];</xsl:text> 
```

应该输出`var myItem = ['mydoc1', 'mydoc1', 'mydocWhatever'];`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:06:38.867

您的上下文在 内部发生变化`<xsl:for-each>`，并且由于没有后代`<itemlist>`s，因此您的选择是空的。

```
<xsl:for-each select="itemList/item[@showItem = 'option1']"> 
    myItem = '<xsl:value-of select="@name" />' ; 
</xsl:for-each> 
```