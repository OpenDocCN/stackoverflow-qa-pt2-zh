# StackOverflow 问答 15172000-15172999

# android - 具有后台处理的 ShareActionProvider

> ID：15172003
> 
> 赞同：1
> 
> 时间：2013-03-02T07:30:41.697
> 
> 标签：android, android-actionbar, actionbarsherlock, share

我有一个图库应用程序，它可以处理比 Android 更多的图像格式。我想添加一个共享选项，允许用户将任何选定的图像共享为 jpeg。我更喜欢使用 ShareActionProvider，因为它与 UI 很好地集成在一起。

这就是问题所在。要输出 jpeg，需要一个可以转换图像的后台进程。每次用户添加选择时，我都不能简单地转换，因为它会使应用程序陷入困境，他们最终可能不想分享。据我所知，一旦单击操作，就无法拦截 ShareProvider 。此时，它似乎必须填充任何必要的 URI。

有没有人想出在 ShareActionProvider 执行之前处理必要的后台处理的方法？

我已经用尽了很多想法：

1.  onShareTargetSelected(ShareActionProvider, Intent)，但这不允许对意图进行任何修改，甚至是 URI 包。
2.  触发 AsyncTask 然后是共享意图的自定义 Intent，但无法访问用户选择的处理程序。

在这一点上，我相当肯定我需要使用共享选择器实现一个经典的操作项，但我想看看是否有人提出了一个聪明的解决方案。多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T23:16:39.833

您提供给 ShareActionProvider 的 URI 也可以引用自定义 ContentProvider。您只需将所有转换参数编码到 URI 中并覆盖 ContentProvider 中的 openFile() 方法。通过这种方式，您可以推迟转换，直到用户实际分享。

此解决方案似乎不需要使用任何后台进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:51:23.100

**我重新审视了这个问题并实现了上面的 ContentProvider 答案。到目前为止，这是一个优越的解决方案。**

我想出了一个相当有趣的解决方案。我使用`onShareTargetSelected`并返回 true 表示我正在处理意图。

这引起了一个小问题，因为`ShareActionProvider`如果您处理意图，则不会存储历史数据（将最喜欢的应用程序放在列表顶部）。

由于我正在使用`ActionBarSherlock`，我能够修改`ActivityChooserModel`以存储历史数据，无论意图是否使用`onShareTargetSelected`.

最后，我添加了几个布尔检查，用于管理共享意图是否处于挂起状态，以询问用户是否希望在更改活动之前等待它完成，或者取消它。

我不完全确定我所做的是否符合犹太教规，而且它非常复杂，所以我不想发布代码，但请随时与我联系以获取更多信息。

# stack - 作用域局部变量的堆栈消耗

> ID：15172005
> 
> 赞同：0
> 
> 时间：2013-03-02T07:30:46.910
> 
> 标签：stack

我在驱动程序中具有以下功能：

```
function MyFilter( )
{
    bool PassThrough = true;

    if ( <some condition> )
    { 
         PassThrough = false;
    }  

    if ( PassThrough )
    {
        // some local stack variables  //Locals #1
        IofCallDriver( );
    }
    else 
    {
        // more local stack variables  //Locals #2
        NonPassThroughWork( );
    }
} 
```

我的查询：

编译上述驱动函数时（使用 MSFT C++ 编译器），由于局部变量，堆栈消耗是多少？'MyFilter' 的局部变量堆栈大小是否会反映内部范围中定义的大小（即 Locals #1、#2）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:43:36.370

可能最好检查生成的程序集。我原以为本地人占用的最坏情况堆栈大小是`MAX(sizeof(#1),sizeof(#2)) + sizeof(PassThrough)`. 虽然取决于优化，但可能会更少。例如，如果`PassThrough`在第一次使用它之后不是“活”的`if`，那么它可能只是驻留在寄存器中等等......对于其他变量和寄存器着色也是如此。也许编译器也会进行其他优化......

查看以下内容以查看程序集

[如何使用 Visual C++ 查看代码背后的程序集？](https://stackoverflow.com/questions/1020498/how-to-view-the-assembly-behind-the-code-using-visual-c)

我认为通过大会将为您的问题提供最准确的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T06:57:15.340

局部变量的堆栈空间和函数执行所需的所有其他内容在编译时保留，因此该空间是否实际需要，即相应的条件评估为真，并不重要（此时实际上并不知道）。编译器通常在函数入口处分配函数堆栈消耗所需的完整内存空间，包括所有局部变量的空间和函数调用的空间，即输入参数、返回地址和返回值。

查看反汇编代码应该会给您相同的答案，您通常会在函数的开头某处发现单个操作将堆栈帧扩展特定数量的字节。在使用 gcc 的 32 位机器上，它类似于`sub esp, 32`.

# ios - 在 Objective-C 中创建自定义动画？

> ID：15172017
> 
> 赞同：0
> 
> 时间：2013-03-02T07:31:47.993
> 
> 标签：ios

我想在 iOS 中创建自定义动画。假设，我有一个 UIView 显示它的子视图。我想截取它的屏幕截图并将它分成四个部分，应该是左上、右上、左下、右下从中间并将每个部分移动到它们的角落。因为左上应该向左移动UIView 的上角和右上角应该移动到右上角等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:38:47.630

可能这个对你有帮助但不确定，首先设置你的框架位置，然后改变你想要的框架位置，默认情况下我正在采取

```
 top.frame=CGRectMake(0,0,320,120);
                 bottom.frame=CGRectMake(0,315,320,145);
                 left.frame=CGRectMake(0,113,151,202);
                 right.frame=CGRectMake(175,113,151,202);

[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(tranform) userInfo:nil repeats:NO]; 
```

3秒后此方法将调用，

```
-(void)tranform{
     [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationTransitionCurlUp
                     animations:^{
                         top.frame=CGRectMake(0,-120,320,120);
                         bottom.frame=CGRectMake(0,480,320,145);
                         left.frame=CGRectMake(-151,113,151,202);
                         right.frame=CGRectMake(320,113,151,202);

                     }
                     completion:nil];
} 
```

在上面的代码中，顶部、底部、左侧、右侧是四个视图，我将所有这些添加到 self.view 中，当单击特定时，动画会发生在它们各自的帧上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:35:38.387

这是我的答案，它将截取当前屏幕显示的屏幕截图，将其从中心分成四个相等的部分，并将其动画移动到各自的角落。

```
- (IBAction)animate:(id)sender
{
    NSLog(@"animation called ");
    UIGraphicsBeginImageContext(self.view.window.bounds.size);
    [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGImageRef imgref=[image CGImage];
    NSArray *arrayOfImages= [[NSArray alloc]initWithArray:[self splitImageIntoRects:imgref]];

    NSLog(@"array of images are %@",arrayOfImages);

    for (CALayer *layer in arrayOfImages) {
        [self.view.layer addSublayer:layer];
    }

    [self animateLayers:arrayOfImages];
}

-(void)animateLayers:(NSArray*)array
{
    for (int i=0;i<array.count;i++)
    {
        CALayer *layer=[array objectAtIndex:i];
        CGRect rect=[layer frame];
        CGPoint newPt;

        switch (i) {
            case 0:
                newPt=CGPointMake(-rect.size.width, -rect.size.height);
                break;
            case 1:
                newPt=CGPointMake(rect.origin.x-rect.size.width, rect.origin.y+rect.size.height);
                break;
            case 2:
                newPt=CGPointMake(rect.origin.x+rect.size.width, rect.origin.y-rect.size.height);
                break;
            case 3:
                newPt=CGPointMake(rect.origin.x+rect.size.width, rect.origin.y+rect.size.height);
                break;
        }
        [self moveLayer:layer to:newPt];
    }
}

-(void)moveLayer:(CALayer*)layer to:(CGPoint)point
{
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.duration=1;
    animation.fromValue = [layer valueForKey:@"position"];

    animation.toValue = [NSValue valueWithCGPoint:point];
    layer.position = point;
    [layer addAnimation:animation forKey:@"position"];
}

- (NSArray*)splitImageIntoRects:(CGImageRef)anImage{

    CGSize imageSize = CGSizeMake(CGImageGetWidth(anImage), CGImageGetHeight(anImage));

    NSMutableArray *splitLayers = [NSMutableArray array];

    int kXSlices = 2;
    int kYSlices = 2;

    for(int x = 0;x < kXSlices;x++) {
        for(int y = 0;y < kYSlices;y++) {
            CGRect frame = CGRectMake((imageSize.width / kXSlices) * x,
                                      (imageSize.height / kYSlices) * y,
                                      (imageSize.width / kXSlices),
                                      (imageSize.height / kYSlices));

            CALayer *layer = [CALayer layer];
            layer.frame = frame;
            CGImageRef subimage = CGImageCreateWithImageInRect(anImage, frame);
            layer.contents = (__bridge id)subimage;
            CFRelease(subimage);
            [splitLayers addObject:layer];
        }
    }

    return splitLayers;
} 
```

# three.js - 使用样条曲线制作填充多边形

> ID：15172018
> 
> 赞同：0
> 
> 时间：2013-03-02T07:31:56.637
> 
> 标签：three.js

如何在 Three.js 中使用 SplineCurve 制作填充多边形

我曾尝试输入点列表来制作 Three.Shape，但由于三角测量“无法三角测量多边形”的一些问题，它不起作用。我知道样条曲线充当曲线而不是可以闭合的路径。那么有什么方法可以用不同的颜色填充样条曲线的下部，如下图所示![带样条的框](../Images/b5794a2edff29246d6406d1998c29677.png)。

我希望在盒子的背面切割样条线。无论如何我可以用不同的材料或颜色填充曲线的下部和上部。

我不知道样条方法在这里很好。如果不是请纠正我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:37:49.750

曲线 ：

```
var line = new THREE.SplineCurve( 
                [

                  new THREE.Vector2( 30, 12),
                  new THREE.Vector2( 40, 20),
                  new THREE.Vector2( 60, 40),
                  new THREE.Vector2( 10, 60),
                  new THREE.Vector2( 25, 80)

                ]); 
```

形状 ：

```
var shape = new THREE.Shape(line.getSpacedPoints(100)); 
```

形状几何和网格：

```
var geometry = new THREE.ShapeGeometry( shape );

var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [ new THREE.MeshLambertMaterial( { color: 0xeeeeee } )] ); 
```

第二种可能的方法是创建自定义几何和彩色面。您可以使用[Blender](http://www.blender.org/)创建自定义几何图形，并自己导出或添加顶点和面。

# internet-explorer - 页面无法在 IE 10 中正确加载

> ID：15172020
> 
> 赞同：1
> 
> 时间：2013-03-02T07:32:06.507
> 
> 标签：internet-explorer

我的网页在 Windows 8 上运行的 IE 10 上没有完全加载。这种情况总是发生。部分脚本、图像、css 等似乎无法正常工作。谁能帮我这个...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:12:52.153

你能在桌面的IE10里面按F12吗？检查浏览器模式和标准模式，他们应该阅读IE10和标准模式。查看控制台选项卡，看看是否有任何错误消息。然后转到网络选项卡，按“开始捕获”重新加载页面，查看任何文件是否有任何 404 或服务器错误。这可能会给我们一些东西。

如果这没有任何结果。转到工具 > 更改用户代理字符串。将其切换到 Chrome。刷新站点，如果站点开始工作，那么您有一些浏览器嗅探正在进行。

# batch-file - Dos 批处理 - 基本 if/else 不起作用

> ID：15172021
> 
> 赞同：5
> 
> 时间：2013-03-02T07:32:07.370
> 
> 标签：batch-file, dos

我有：

```
@echo off
echo before
IF 1 == 1 (
    echo got it
) ELSE (
    echo missed
}
echo done 
```

这段代码只打印“之前”，没有别的。我不知道我错过了什么......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T07:34:15.793

您在 ELSE 末尾使用了错误的括号 - 您`}`使用的是`)`. 将其更改为：

```
@echo off
echo before
IF 1 == 1 (
    echo got it
) ELSE (
    echo missed
)
echo done 
```

输出是：

```
before
got it
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T12:16:29.843

这就像嵌套样式中的 if else

```
IF %CHUSEL%==0 (
  SET IP=10.148.24.1
) ELSE (
  IF %CHUSEL%==1 (
      SET IP=10.148.24.2
  ) ELSE (
      IF %CHUSEL%==2 (
          SET IP=10.148.24.3
      ) ELSE (
          IF %CHUSEL%==3 (
             SET IP=10.148.24.4
          )
      )
   )
) 
```

# javascript - 未经授权在 Google Cloud Storage 的 javascript 中列出存储桶中的文件

> ID：15172022
> 
> 赞同：3
> 
> 时间：2013-03-02T07:32:09.583
> 
> 标签：javascript, ajax, google-cloud-storage

我有一个在 Google Cloud Storage 中同步文件的后端应用程序，并且想在 javascript 中列出存储中的所有文件，而不需要从后端请求它们。我已经设置了 CORS，所有文件的 acl 都是公开的。API 有一段关于身份验证的内容：

> 您使用 Google Cloud Storage API 执行的大多数操作都必须经过身份验证。唯一的例外是对允许匿名访问的对象的操作。如果 AllUsers 组具有 READ 权限，则可以匿名访问对象。AllUsers 组包括 Internet 上的任何人。

如何设置 AllUsers 的权限？那只是将acl设置为公开阅读吗？

存储桶列表 API 调用是否属于需要进行身份验证的操作，或者是否可以这样做？

这是我想要实现的目标：

```
$.ajax({
    url: "http://storage.googleapis.com/" + BUCKET_NAME,
    method: "GET",
    headers: {
        "x-goog-project-id": PROJECT_ID
    }
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:51:13.393

您可以使用[JSON API](https://developers.google.com/storage/docs/json_api/)从 JavaScript 获取存储桶的内容。

GitHub 上的 s [torage-metabucket-javascript](https://github.com/GoogleCloudPlatform/storage-metabucket-javascript)项目就是一个如何做到这一点的例子。桶清单代码在[这里](https://github.com/GoogleCloudPlatform/storage-metabucket-javascript/blob/master/js/metabucket.js#L96-L116)。有关工作解决方案，请参阅[现场演示](http://jterrace-jstree.storage.googleapis.com/index.html)。

作为替代方案，您可以使用[google-api-javascript-client 库](https://code.google.com/p/google-api-javascript-client/)。GitHub 上的[storage-getting-started-javascript 存储库](https://github.com/GoogleCloudPlatform/storage-getting-started-javascript)显示了如何使用它的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:17:26.403

您需要在存储桶上（而不是仅在所有对象上）拥有公共读取 acl，以便在未经授权的情况下列出存储桶。但是，您应该谨慎使用公共阅读存储桶，因为您可能会在月底收到令人惊讶的账单 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T10:02:37.793

为了列出存储桶中的对象，您必须使存储桶匿名可读。转到开发人员控制台存储-> 浏览器。在编辑权限中选择/写入**User - allUsers - Read**。存储桶内的文件可以有任何 ACL。

之后可以列出文件如下：

```
Storage.bucket = 'mybucket';

Storage.listObjectsItems = function(prefix, delimiter, callback) {
  var request = gapi.client.storage.objects.list({
    'bucket' : Storage.bucket,
    'prefix' : prefix,
    'delimiter' : delimiter
  });
  request.execute(function(resp) {
    console.log(resp);
    callback(resp.items);
  });
 };

Storage.listObjectsPrefixes = function(prefix, delimiter, callback) {
var request = gapi.client.storage.objects.list({
    'bucket' : Storage.bucket,
    'prefix' : prefix,
    'delimiter' : delimiter
});
request.execute(function(resp) {
    console.log(resp);
    callback(resp.prefixes);
});
 }; 
```

您可以在此处阅读有关前缀和分隔符的更多信息：[https ://cloud.google.com/storage/docs/json_api/v1/objects/list](https://cloud.google.com/storage/docs/json_api/v1/objects/list)

具体示例：假设我们在控制台->存储->浏览器中有下一个存储桶结构：

```
mybucket/folder1/folder11/..
                 folder12/..
                 folder13/..
                   ...
                 folder1n/.. 
```

称呼

```
Storage.listObjectsPrefixes('folder1/', '/',callback ); 
```

它将返回（作为回调的参数）folder1 中的所有文件夹。

我没有看到（可能是错误的？）使存储桶匿名可读的财务危险。它只能从有限的域访问，为什么有人会浏览我的存储桶的内容，即使他发现（如何？）这样的存储桶存在。

# sql - SAS Proc SQL 获取与特定日期最近的记录

> ID：15172024
> 
> 赞同：2
> 
> 时间：2013-03-02T07:32:15.477
> 
> 标签：sql, date, sas, proc-sql

我有2个表如下：

表1、用户列表表：

```
Year  Month Id Type 
2010  3     1  A
2010  5     2  B
2010  10    1  A
2010  12    1  A 
```

表 2 描述了用户升级历史：

```
Promote Date Id
2/20/2010    1
5/20/2010    1     (4/2010 the user got demoted, and after 1 month he got promote again) 
```

从这 2 个表中，我需要生成一个与表 1 类似的结果表，但添加一个列，该列对过去 3 个月或特定日期 3 个月以上的 A 类型用户进行分类。例如，结果将是：

```
Year  Month Id | Duration
2010  3     1  | A < 3 months
2010  10    1  | A > 3 months
2010  12    1  | A > 3 months 
```

一般的想法是：

*   我需要将表 1 中的月份列和年份列转换为日期格式，如 3/2010
*   减去与上述日期（2/2010）最接近的促销日期的新转换值，以获得用户被提升的天数
*   比较 90 天来对他的晋升持续时间进行分类

我目前遇到了两个问题。

我不知道将月列和年列转换为月/年日期格式的最佳方法。

假设我已经从 table1 转换了月/年列，我使用 Max 函数从 table2 获取最近的日期。据我所知，max函数对性能不好，那么除了使用max之外，还有其他解决方案吗？在mysql中，使用Limit 1很容易解决，但是SAS proc-sql不支持Limit。proc-sql中是否有任何等效的限制？以下是我目前正在考虑的代码。

```
PROC SQL;
Create table Result as SELECT table1.Year, table1.Month, table1.Code, 
(Case When table1.Type = "B" then "B"
When table1.Type = "A" AND (table1.Date - (Select MAX(table2.Date) From table2 Where table2.Date <= table1.Date AND table2.Id = table1.Id ) < 90) THEN "A < 3 months"
When table1.Type = "A" AND (table1.Date - (Select MAX(table2.Date) From table2 Where table2.Date <= table1.Date AND table2.Id = table1.Id ) >= 90) THEN "A > 3 months"
When table1.Type = "C" then "C"
end) as NewType
From table1
LEFT JOIN
// .... 
;
QUIT; 
```

如您所见，我需要将 table1 与其他表左连接，因此我使用子查询，这也是一个糟糕的性能，但我不知道是否有其他方法。帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:15:43.357

您可以从其 using`mdy()`函数创建日期值，如下所示：

```
data have;
input Year  Month Id Type $;
datalines;
2010  3     1  A
2010  5     2  B
2010  10    1  A
2010  12    1  A
;
run;

data have;
set have;
format date date9.;
date = mdy(Month, 1, Year);
run; 
```

您没有日期值，所以我只使用了 1（创建的每个日期都是本月的第一天）。

现在，您可以通过 ID 连接两个表，并计算第一个表中的日期和第二个表中的促销日期的差异：

```
proc sql;
    create table want as
    select *
          ,abs(date - promote) as diff
    from have as a
           left join
         prom as b
           on a.id = b.id;
quit; 
```

之后，您按 id、date 和 diff 对结果表进行排序：

```
proc sort data=want;
by id date diff; 
run; 
```

排序后的数据集如下所示：

```
Year  Month  Id  Type   date       Promote    diff
---------------------------------------------------
2010  3      1   A      01MAR2010  20FEB2010  9
2010  3      1   A      01MAR2010  20MAY2010  80
2010  5      2   B      01MAY2010  .          .
2010  10     1   A      01OCT2010  20MAY2010  134
2010  10     1   A      01OCT2010  20FEB2010  223
2010  12     1   A      01DEC2010  20MAY2010  195
2010  12     1   A      01DEC2010  20FEB2010  284 
```

最后一步，遍历数据集并检查`diff`每个 ID 和日期值的第一个值是否小于或大于 3 个月（我刚刚检查了 90 天，您也可以使用`intck`函数）。因为我们按 id、date 和 diff 对数据集进行了排序，所以第一行应该是最接近日期的，所以你`output`只有第一行。

```
data want2(keep = year month id type duration);
set want;
by date;

if first.date and Type = 'A' then do;

if diff lt 90 then do;
    duration = 'A < 3 months';
    output want2;
end;
if diff gt 90 then do;
    duration = 'A > 3 months';
    output want2;

    end;
end;
else if first.date  then do;
    duration = type;
    output want2;
end;

run; 
```

`output`使用语句是因为我们只想保留一些行（每组的第一个）。最后一个`output`在那里，因此类型值与 A 不同的行也保留在最终结果中。

这是最终结果：

```
Year    Month    Id    Type    duration
--------------------------------------------
2010    3        1     A       A < 3 months
2010    5        2     B       B
2010    10       1     A       A > 3 months
2010    12       1     A       A > 3 months 
```

# groovy - 如何从“执行系统 Groovy 脚本”调用位于 jenkins slave 中的批处理/groovy 脚本？

> ID：15172048
> 
> 赞同：1
> 
> 时间：2013-03-02T07:34:56.287
> 
> 标签：groovy, jenkins, hudson, jenkins-plugins, hudson-plugins

**问题：** 我有一个 groovy 脚本，使用它可以获取 SVN 更改集列表。我在**Execute system Groovy script**上执行此操作，因为我可以访问帮助我获取更改集的 Hudson 对象。现在我只想检查我的从机上设置的更改。我准备了一个批处理脚本（位于从站中）并尝试通过一个一个地从更改集中传递 SVN URL 来调用它，这对我不起作用。

```
import hudson.model.*
import hudson.util.*
import hudson.scm.*

// work with current build
def build = Thread.currentThread()?.executable
def changeItems = build.changeSet.items
def changes = []
changes += changeItems as List
changes.each { item ->
println("changes")
item.paths.each{ fileEntry ->
fileEntry.value ---->Pass this to script so It can be checked out in slave m/c.
}
} 
```

**问题**： -- 有没有办法解决上述问题？- 至少我可以将 SVN URL 从更改集传递到詹金斯的命令行控制台吗？ ***请帮我***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:04:16.010

某些事情正在触发您的 Jenkins 工作 - 您轮询您的 SVN 存储库，或者您有一个 SVN 触发器，如此[处](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)所述。

在这两种方式中，您都可以使用已配置的

*   源代码管理：颠覆
*   退房策略：尽可能使用'svn update'

然后启动 Groovy 系统脚本：

```
import hudson.model.*
import hudson.util.*
import hudson.scm.*

// work with current build
// (does only work as groovy system script, not in the Jenkins shell)
def build = Thread.currentThread()?.executable

// for testing, comment the line above and uncomment the job line
// and one of the build lines - use specific build (last build or build by number)
//def job = hudson.model.Hudson.instance.getItem("<your job name>") 
//def build = job.getLastBuild()   
//def build = job.getBuildByNumber(162)   

// get ChangesSets with all changed items
def changeSet= build.getChangeSet()
def items = changeSet.getItems() 
```

但是在这个阶段，文件已经在你的构建机器上了！changeSet 包含所有已在 svn update 中的项目。所以只需使用路径来处理它们。例如，您可以使用以下方法为每个更改的文件启动 Jenkins 作业：

```
void startJenkinsJob(jobName, param)
{
    // Start another job
    def job = Hudson.instance.getJob(jobName)
    def anotherBuild
    try {
        def params = [
            new StringParameterValue('StringParam', param),
        ]
        def future = job.scheduleBuild2(0, new Cause.UpstreamCause(build), new ParametersAction(params))
        println "Waiting for the completion of " + HyperlinkNote.encodeTo('/' + job.url, job.fullDisplayName)
        anotherBuild = future.get()
    } catch (CancellationException x) {
        throw new AbortException("${job.fullDisplayName} aborted.")
    }
    println HyperlinkNote.encodeTo('/' + anotherBuild.url, anotherBuild.fullDisplayName) + " completed. Result was " + anotherBuild.result

    // Check that it succeeded
    build.result = anotherBuild.result
    if (anotherBuild.result != SUCCESS && anotherBuild.result != UNSTABLE) {
        // We abort this build right here and now.
        throw new AbortException("${anotherBuild.fullDisplayName} failed.")
    }
} 
```

# javascript - Javascript函数未返回所需结果

> ID：15172049
> 
> 赞同：1
> 
> 时间：2013-03-02T07:35:17.917
> 
> 标签：javascript, ajax, undefined

我有一个函数，其中包含一个 switch 语句，用于根据输入的整数返回一个字符串。为了简洁起见，我将其缩短了。过去的案例`1`无关紧要，因为案例整数只是递增并返回不同的字符串值。设置是一样的。

`function idToGame(id) { switch (id) { case 1: return 'loz';break; } }`

每当我使用 Google Chrome 控制台对其进行测试时，它都能正常工作。

`idToGame(1)`返回*loz*

所以让我们以变量`game`为例。下面，我们假设“pm_game”的值为 1。

`var game = document.getElementById('pm_game').value;`

因此，`game`设置为*1*。

这是奇怪的部分。每当我尝试使用它时：（*注意：下面的值为 1*）

`var game = idToGame(document.getElementById('pm_game').value);`

它设置`game`为*undefined*。

我错过了什么吗？当它真的应该是*loz*时，为什么它变得*未定义*？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:50:39.097

当您获取任何输入字段的值时，如下所示：

```
var game = document.getElementById('pm_game').value; 
```

返回的结果始终是一个字符串，而不是您期望的数字。因此，为了使其工作，您需要将字符串转换为数字。例如使用`parseInt`：

```
var game = parseInt(document.getElementById('pm_game').value, 10);
// or game = + document.getElementById('pm_game').value;
// or game = Number(document.getElementById('pm_game').value); 
```

或者在切换之前将`parseInt`转换移动到`id2game`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:45:49.427

javascript 中的开关使用严格的类型检查 ( `===`)，因此`1`(Number) 被认为不等于`'1'`(String)。两种选择：

*   尝试`switch(parseInt(id))`执行从字符串到整数的转换。
*   如果您不想执行转换，只需在每个案例值周围添加引号，如下所示：`case '1'`。

另外，出于调试目的，您可以使用[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)在控制台中打印类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T07:49:43.843

Switch 使用 === 运算符。其中 1 不等于“1”。

刚刚在控制台中尝试过，您需要尝试解析它。下面是一个例子。

```
var f = function(id) { 
   switch (parseInt(id)) 
   { 
      case 1: 
         return 'loz';
         break; 
   } 
} 
```

使用旧函数： f(1) 将返回 'loz'，但 f('1') 没有。

我宁愿与 '1' 而不是 1 进行比较 - 以避免解析。但我不确定这是否是您想要的：

```
var f = function(id) { 
   switch (id) 
   { 
      case '1': 
         return 'loz';
         break; 
   } 
} 
```*

# .net - 使用 VB.NET 在 Metro 应用程序中保存用户设置

> ID：15172050
> 
> 赞同：0
> 
> 时间：2013-03-02T07:35:28.200
> 
> 标签：.net, vb.net, windows-8, microsoft-metro, settings

如何使用 VB.NET 在 Metro 应用程序中保存用户设置？我想在第一次打开地铁应用程序时保存密码。打开地铁应用程序需要密码才能访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:48:47.597

有关所有存储选项的概述，请参阅[使用 Windows 运行时访问应用数据。](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)

更具体地说，如果您确实需要在客户端设备上存储安全信息（总是存在风险），那么请使用[PasswordVault API](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx)

[Credential Locker 示例](http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a)应该会有所帮助。

# asp.net-mvc-3 - 使用 Jquery 单击按钮时弹出来

> ID：15172051
> 
> 赞同：-2
> 
> 时间：2013-03-02T07:35:33.780
> 
> 标签：asp.net-mvc-3, jquery

我正在使用 razor html 。当我单击一个按钮时，我需要 divResults div 需要出现在弹出窗口中。我喜欢使用 Jquery.pls 帮助弹出窗口

```
 <div id="divResults ">
       <div class="HeadBold">
            Results
        </div>
       <div class="row MarginTop">
           <div class="col1">
              <label>
                Test
              </label>
               <label id="lblPjtEligible">
                     Test</label>
            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:40:22.163

采用`jQuery dialog`

[http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

我在这里找到了一个例子-http [://jsfiddle.net/rniemeyer/hnm2n/](http://jsfiddle.net/rniemeyer/hnm2n/)

```
$(element).dialog({
    close: function() {
        if (ko.isWriteableObservable(value)) {
           value(null);   
        }
    }
}); 
```

作为 MVC 开发人员，我更喜欢引导 UI 主题的模型窗口。

[链接](http://getbootstrap.com/2.3.2/javascript.html#modals)- http://getbootstrap.com/2.3.2/javascript.html#modals

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:43:44.307

```
 <div id="resultsOuterDiv">
<div id="resultsInnerDiv"></div>
  </div>

<script>

  function buttonClick()
  {
   $('#resultsOuterDiv ').dialog();
   $('#resultsInnerDiv').html('Your result here');
  }
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:49:56.270

如果你用谷歌搜索那个弹出窗口，你会得到很多例子，那么你可以根据你的要求自定义，下面是一些演示链接

[演示 1](http://www.alessioatzeni.com/wp-content/tutorials/jquery/login-box-modal-dialog-window/index.html)

[演示 2](http://www.ezzylearning.com/tutorials/demos/Popup_Dialog_Windows_using_JQuery.aspx)

[演示 3](http://www.htmldrive.net/items/demo/650/jQuery-Custom-PopUp-Window)

# ruby-on-rails-3 - 查找包含特定问题的类？

> ID：15172052
> 
> 赞同：1
> 
> 时间：2013-03-02T07:35:37.337
> 
> 标签：ruby-on-rails-3

我刚刚创建了一个名为 Statable 的关注点，它包含在几个不同的模型中。如果我的 StatsController#index 可以自动循环遍历所有包含 Statable 的模型，那就太酷了。有没有办法做到这一点？

# regex - 在 OS X 中自动化正则表达式

> ID：15172054
> 
> 赞同：1
> 
> 时间：2013-03-02T07:35:59.703
> 
> 标签：regex, macos, markdown, automator

我经常使用 TextWrangler 对文件运行 RegEx 复制替换操作，我想使用 OS X 中的 Automator 自动执行此操作。例如，在以下场景中，我从 Pinboard.in 获取 TEXT 输出，然后运行一些在保存为文件之前，在 TextEdit 中进行正则表达式搜索/替换操作。

1.  [从http://feeds.pinboard.in/text/t:tag/](http://feeds.pinboard.in/text/t:tag/)开始
2.  在 TextWranger 中运行以下搜索替换（以大纲形式转换为 Markdown 链接）：
    *   寻找：`^\[(.*)\]\r(.*)\r`
    *   用。。。来代替：`* [\2](\1)\r`
3.  然后去掉所有没有开头的行`*`
    *   寻找：`^[^\*].*\r`
    *   替换：[留空]

我的目标是将这一切保存为可以在 pinboard URL 上运行并保存为文件的脚本。有任何想法吗？谢谢！

# jboss7.x - 如何在 jbossAS7 中配置 logback db appender

> ID：15172058
> 
> 赞同：0
> 
> 时间：2013-03-02T07:36:23.267
> 
> 标签：jboss7.x, logback

我正在使用 Jboss AS7 并执行了文件中的日志。现在我想使用 logback 从文件迁移到数据库。如何为 logback 配置standalone.xml？

提前致谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:49:39.737

没有特定的记录器实现支持开箱即用地记录到数据库。您需要的是自定义日志处理程序。

[这里](https://community.jboss.org/wiki/CustomLogHandlersOn701) 有一个自定义日志处理程序实现供参考[https://community.jboss.org/wiki/CustomLogHandlersOn701](https://community.jboss.org/wiki/CustomLogHandlersOn701)

希望这有帮助！

# node.js - node.js 从另一个网络服务器连接到节点

> ID：15172069
> 
> 赞同：0
> 
> 时间：2013-03-02T07:38:10.733
> 
> 标签：node.js, cross-domain

嘿，我有一个在（例如）80.80.80.80:3000 上运行 node.js 的网站

我想从另一个网络服务器[http://example.com/访问我的节点](http://example.com/)

当我添加

```
script(src='http://80.80.80.80:3000/socket.io/socket.io.js)
script
    var socket = io.connect(); 
```

我收到一条错误消息“未捕获的 ReferenceError：io 未定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:57:07.060

这似乎在 URL 下找不到 socket.io 脚本`http://80.80.80.80:3000/socket.io/socket.io.js`。如果从 URL 返回 javascript 文件，请从浏览器检查此 URL。

[您可以在socket.io 页面](http://socket.io/#how-to-use)上找到几个如何将 socket.io 与 connect、express 或纯 http node.js 服务器一起使用的示例。

# javascript - Jscript：是否可以动态设置变量？

> ID：15172073
> 
> 赞同：0
> 
> 时间：2013-03-02T07:39:16.943
> 
> 标签：javascript, jscript, wsh

在**config.txt**中，我有以下字符串：

```
Dispatcher=argo
Address=10.5.23.14
User=joe 
```

在我的**script.js**中，我有变量：

```
var Dispatcher, Address, User; 
```

在 script.js 中，我读取 config.txt，解析字符串并获取名称/值对：

```
ConfigPair = ConfigString.split("=");
VarName = ConfigPair[0];
VarValue = ConfigPair[1]; 
```

我想要的是将 VarValue 分配给 VarName 变量。比如说，如果我在 VarName 中获得“Address”，在 VarValue 中获得“10.5.23.14”，我想将 Address 变量设置为 10.5.23.14。

我**不想**做这样的事情：

```
if (VarName == "Dispatcher") {
    Dispatcher = VarValue;
} else if (VarName == "Address") {
    Address = VarValue;
} else if bla-bla-bla 
```

我想以某种方式“**读取**” VarName 的值并将 VarValue 分配给相应的变量。是否可以在 Windows 脚本主机 (JScript) 中执行此操作？我玩过**eval**，但没能成功。有任何想法吗？

谢谢，浣熊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:15:25.620

如果您在浏览器中工作，则可以`window`像这样使用全局对象：

```
// VarName = "User"
// VarValue = "joe"
window[VarName] = VarValue;
alert(User); // prints "joe"
User = 'jack';
alert(User); // prints "jack" 
```

* * *

## 编辑

经 WSH 和 Windows 7 测试：

```
(function () {
    var VarName = 'User'; // ConfigPair[0]
    var VarValue = 'joe'; // ConfigPair[1]
    this[VarName] = VarValue;
})();
WSH.Echo(User); // prints "joe"
WSH.Quit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:44:25.273

您可以创建对象并动态分配属性，

```
var VarHolder = {};

VarHolder[VarName] = VarValue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:09:32.750

如果我的问题是正确的，那么[这个话题](https://stackoverflow.com/q/4670805)可能会有所帮助。

```
(function() { eval.apply(this, arguments); }("x=1;y=2"));
WScript.Echo("x=" + x, "y=" + y); // x=1 y=2 
```

# git - 找不到自制软件安装的应用程序

> ID：15172076
> 
> 赞同：2
> 
> 时间：2013-03-02T07:39:40.360
> 
> 标签：git, homebrew

我刚刚在带有 Snow Lion 的新 Mac 上安装了自制软件。Mac 已经在 /usr/bin/git 中安装了 git（大概是在我安装 Xcode 命令行工具时）。

无论如何我跑了：

```
$ brew install git 
```

该命令似乎运行成功，将 git 安装在：

```
/usr/local/Cellar/git/1.8.1.5/bin/git 
```

但是在终端，我得到的是旧的 git，而不是 homebew git：

```
$ which git
/usr/bin/git 
```

我错过了什么？我需要在我的 PATH 之前添加 /usr/local/Cellar/git/1.8.1.5/bin 吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:45:23.177

Brew Doctor 进行救援：

```
$ brew doctor
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

    git
    git-cvsserver
    git-receive-pack
    git-shell
    git-upload-archive
    git-upload-pack

Consider amending your PATH so that /usr/local/bin
occurs before /usr/bin in your PATH. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:04:20.540

当您在终端中键入命令时，它会在名为`PATH`. 您需要在`PATH`. 运行此命令：

```
echo 'export PATH=/usr/local/bin:$PATH' >> ~/.bash_profile 
```

并重新启动您的终端。

# html - 图像缩放在 Internet Explorer 中不起作用

> ID：15172078
> 
> 赞同：0
> 
> 时间：2013-03-02T07:39:51.197
> 
> 标签：html, internet-explorer

我正在开发一个简单的 HTML 网站，但遇到了一个问题。Twitter 或 LinkedIn 之类的徽标在 Internet Explorer（它是最新版本）中没有被缩放——但其他浏览器工作正常。这是我的代码片段：

```
<td>&nbsp;<a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=<;url>">
<img src="images/linkedin.gif" height="28" width="28" border="0"/> 
```

如何在 Internet Explorer 中缩放这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:10:24.403

尝试`<img src="images/linkedin.gif" style="height:28px; width:28px; border:none;"/>`

如果失败，请尝试`!important`在所有样式后面添加

可能有些东西会覆盖你的风格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T17:07:48.680

至少在使用 HTML5 时，我发现 Internet Explorer 似乎将 img 标签上的宽度和高度参数解释为裁剪尺寸。要获得正确缩放的图像，您需要将其包含在图形标签中，如下所示：

```
<figure style="width: 28; height: 28; margin: 0">
    <img src="images/linkedin.gif" style="max-width: 100%; max-height: 100%"/>
</figure> 
```

这在其他浏览器中也可以正常工作。

# javascript - WebRTC DataChannel 不符合规范？

> ID：15172079
> 
> 赞同：0
> 
> 时间：2013-03-02T07:39:51.510
> 
> 标签：javascript, html, real-time, webrtc

浏览器主要是 Nightly 和 Canary 使用 SCTP 流进行数据通道吗？至少在[http://simpl.info/rtcdatachannel/](http://simpl.info/rtcdatachannel/)我看不到 SCTP 流，甚至[http://mozilla.github.com/webrtc-landing/data_test.html](http://mozilla.github.com/webrtc-landing/data_test.html)也不起作用？他们最近有没有改变什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:19:34.647

Firefox 使用**SCTP**流和 Chrome **RTP**。*这是当今主要的互操作性问题。*

[您可以在此处](https://webrtc-experiment.appspot.com/)找到一些有效的文本聊天/文件共享演示。

# apache - 更改 documentroot 后 Wamp Apache 不会重新启动

> ID：15172083
> 
> 赞同：0
> 
> 时间：2013-03-02T07:40:35.740
> 
> 标签：apache, windows-7, wamp

我想改变documentroot如下

```
#DocumentRoot "c:/wamp/www/"
DocumentRoot "d:/home/development/web/"
<Directory   "d:/home/development/web/"> 
```

注释掉的 Documentroot 是原始的。当我按照上面显示的方式更改它时，重新启动所有服务后，wamp 图标会从绿色变为红色，然后变为橙色，再也不会变成绿色。退出和重新启动也无济于事。找不到本地主机，所以我认为 Apache 没有（充分）启动。目录确实存在，大小写正确。Apache 错误日志文件似乎没问题。将 DocumentRoot 点更改为其原始位置会使一切恢复正常。我究竟做错了什么？？

使用 64 位 wamp，apache 2.4.2。

**更新**

我发现 documentroot 放在一个映射的网络驱动器上，在我的例子中是驱动器 D:。让documentroot指向硬盘上的目录一切都很好。有人知道如何让 documentroot 映射到映射驱动器吗？

# node.js - TypeScript 或 CoffeeScript

> ID：15172089
> 
> 赞同：24
> 
> 时间：2013-03-02T07:41:27.703
> 
> 标签：node.js, coffeescript, typescript

开始使用 node.js 构建 Web 应用程序。

我的一位同事询问了 TypeScript，它是 Microsoft 的一种新语言。我们计划使用 node.js 和 TypeScript 作为脚本引擎来启动我们的新 Web 应用程序。

我只想知道现在是使用 TypeScript 开发应用程序的合适时机吗？TypeScript 的未来如何？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-02T07:54:52.240

TypeScript 和 CoffeeScript 都有自己的优势。但是，如果您想构建一个大型应用程序，我建议您使用 CoffeeScript，因为您最终会编写更少的代码。[这是一个比较 TypeScript 和 CoffeeScript 的漂亮幻灯片](http://prezi.com/zkhsz49ownaw/coffeescript-vs-typescript/)。这可能是题外话，但 TypeScript 的开发很明显，至少部分 MS 对开源非常认真。

*   TypeScript 在 Apache 2.0 许可下
*   源代码可通过 Codeplex 上的 git 获得
*   安装就像 npm install -g typescript 一样简单

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-02T07:51:38.780

所有浏览器都将支持 TypeScript。你可以说它只是另一个 javascript。我发现 TypeScript 易于编码并且更易于调试。微软没有心情像他们通过发布 Silverlight 来挑战 Flash 那样挑战旧的 JavaScript。

每当你觉得你想切换回旧的 JavaScript 并且不想使用 TypeScript 时，将你的 ts 转换为 Js 就更容易了。

[试试这个](http://www.typescriptlang.org/Playground/)，看看js和ts的区别。

# python - Python：kernel32.CreateProcessA() 它在做什么？

> ID：15172093
> 
> 赞同：4
> 
> 时间：2013-03-02T07:42:29.260
> 
> 标签：python, ctypes

我目前正在学习调试器以及它们如何停止进程。

这是我的代码：

```
 from ctypes import *
    WORD = c_ushort
    DWORD = c_ulong
    LPBYTE = POINTER(c_ubyte)
    LPTSTR = POINTER(c_char)
    HANDLE = c_void_p
    DEBUG_PROCESS = 0x00000001
    CREATE_NEW_CONSOLE = 0x00000010
    class STARTUPINFO(Structure):
        _fields_ = [
        ("cb", DWORD),
        ("lpReserved", LPTSTR),
        ("lpDesktop", LPTSTR),
        ("lpTitle", LPTSTR),
        ("dwX", DWORD),
        ("dwY", DWORD),
        ("dwXSize", DWORD),
        ("dwYSize", DWORD),
        ("dwXCountChars", DWORD),
        ("dwYCountChars", DWORD),
        ("dwFillAttribute",DWORD),
        ("dwFlags", DWORD),
        ("wShowWindow", WORD),
        ("cbReserved2", WORD),
        ("lpReserved2", LPBYTE),
        ("hStdInput", HANDLE),
        ("hStdOutput", HANDLE),
        ("hStdError", HANDLE),
        ]
    class PROCESS_INFORMATION(Structure):
        _fields_ = [
        ("hProcess", HANDLE),
        ("hThread", HANDLE),
        ("dwProcessId", DWORD),
        ("dwThreadId", DWORD),
        ]

    kernel32 = windll.kernel32
    class debugger():
        def __init__(self):
            pass

        def load(path_to_exe):
            creation_flags = DEBUG_PROCESS
            startupinfo = STARTUPINFO()
            processinfo = PROCESS_INFORMATION()
            startupinfo.dwFlags = 0x1
            startupinfo.wShowWindow = 0x0
            startupinfo.cb = sizeof(startupinfo)
            if kernel32.CreateProcessA(path_to_exe,None,None,None,None,creation_flags,None,None,byref(startupinfo),byref(processinfo)):
                print("[*] Process launched")
                print("[*] PID: %d" % (PROCESS_INFORMATION.dwProcessId))
            else:
                print("[*] Error: 0x%08x." % (kernel32.GetLastError()))

    debugger.load("C:\\WINDOWS\\system32\\calc.exe") 
```

每当我运行它时，它都会出错。:( 我发现它出现该错误的原因是因为 kernel32.CreateProcessA 返回错误。我现在实际上正在跟随 Gray hat python，并且在阅读时我正在将此代码转换为 python 3它。

我的问题是， kernel32.CreateProcessA 在做什么，为什么它返回 false，我怎样才能防止它返回 false？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-02T07:48:15.467

您的代码中有几个错误：

第一个错误是类定义错误的`load`方法。`debugger`在您的情况下，最有可能的是静态方法：

```
# . . .

# This decorator required to make method static
@staticmethod
def load(path_to_exe):
    creation_flags = DEBUG_PROCESS
    startupinfo = STARTUPINFO()
    processinfo = PROCESS_INFORMATION()
    startupinfo.dwFlags = 0x1

# . . . 
```

第二个错误是在`print`创建进程时：

```
if kernel32.CreateProcessA(path_to_exe,None,None,None,None,
                           creation_flags,None,None,
                           byref(startupinfo),byref(processinfo)):
    print("[*] Process launched")

    # ERROR AT THE LINE BELOW
    # Your variant: print("[*] PID: %d" % (PROCESS_INFORMATION.dwProcessId))
    # But it should be the structure itself not it "type"
    print("[*] PID: %d" % (processinfo.dwProcessId))  
else:
    print("[*] Error: 0x%08x." % (kernel32.GetLastError())) 
```

就我而言，它可以工作（Windows XP）。如果您的进程没有真正开始并且您收到类似这样的控制台消息：

```
[*] Error: 0x00000002 
```

然后，如果您使用 Python 3.x，则应该使用 not `CreateProcessA`but `CreateProcessW`function，因为 Python 3.x 中的所有字符串都是 unicode（在 WinAPI 中，所有函数都以 'A' 结尾接受 asci-strings，以 'W' 结尾接受 unicode-strings） . 如果您写下您的案例中发生了什么错误或异常，则更准确的答案可能是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T07:53:10.670

我在win64上运行像你这样的程序时遇到问题。但是当我将kernel32.CreateProcessA更改为kernel32.CreateProcessW时，程序运行成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T07:18:46.903

您应该调用**GetLastError**函数来了解错误的真正含义。

ctypes.windll.kernel32.GetLastError

我发现这篇详细的帖子解释了如何调试和修复由 CreateProcessA 引起的错误：[Python CreateProcessA 返回 FALSE](http://redino.net/blog/2013/07/python-createprocessa-returns-0/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-07T23:52:50.013

切换你的前两个参数，这样你就有了类似的东西：

```
kernel32.CreateProcessA(c_char_p(0),c_char_p(path_to_exe),0,0,0,creation_flags,0,0,bytef(startupinfo),byref(processinfo)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T19:01:54.893

1.  此行必须是括号： debugger().load("C:\WINDOWS\system32\calc.exe")

2.  此行必须包含 self: def load(self,path_to_exe)

3.  如果静态不能包含 self ：@staticmethod def load(path_to_exe)

4.  此行必须是： print("[*] PID: %d" % processinfo.dwProcessId)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-23T03:17:18.010

1.  According to [a quick sum-up of differences between Python 2xx vs 3xx](http://sebastianraschka.com/Articles/2014_python_2_3_key_diff.html) : Python 2 has separated ASCII str() types and unicode()type. Python 3 **has only Unicode (utf-8) string type**.

2.  According to [WinAPI](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx) docs, CreateProcess() has an **unicode version** which is defined as CreateProcessW() with the same params.

So if you use Python 2xx, using **CreateProcessA()** . In case of python 3xx, using **CreateProcessW()**.

# android - 无法解析目标“索尼爱立信移动通信：X10:4”

> ID：15172094
> 
> 赞同：0
> 
> 时间：2013-03-02T07:42:36.370
> 
> 标签：android, eclipse

将 android 项目导入 Eclipse 时出现一个奇怪的错误。 **无法解析目标“索尼爱立信移动通信：X10:4”**。尝试清理项目，但后来我的资源文件丢失，我试图修复项目没有使用相同的错误。我在想这是 Android 目标问题。以前有人遇到过这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:57:41.037

您尚未安装项目所需的目标。

转到 Project Properties -> Android，您将看到一个包含已安装目标的表。检查其中之一，应用更改，然后清理项目。

希望这可以帮助。

# android - 地图 api 密钥未在 android 手机上加载地图

> ID：15172095
> 
> 赞同：1
> 
> 时间：2013-03-02T07:42:42.177
> 
> 标签：android, google-maps, map, api-key

我正在尝试将多个坐标放在一张地图上。我搜索并知道它需要`map API key`在地图视图上显示。但是在按照[`https://developers.google.com/console/help/#generatingdevkeys`](https://developers.google.com/console/help/#generatingdevkeys)我生成地图 API 密钥的所有说明后，它不起作用。此键未加载显示在复选框上的地图。

日志猫：-

```
03-02 14:57:30.855: W/System.err(20520): IOException processing: 26
03-02 14:57:30.855: W/System.err(20520): java.io.IOException: Server returned: 3
03-02 14:57:30.855: W/System.err(20520):    at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
03-02 14:57:30.855: W/System.err(20520):    at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
03-02 14:57:30.855: W/System.err(20520):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
03-02 14:57:30.855: W/System.err(20520):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
03-02 14:57:30.855: W/System.err(20520):    at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
03-02 14:57:30.855: W/System.err(20520):    at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:50:15.690

发布您的代码并澄清您使用的是哪个 Google 地图库，因为 v1 已被弃用，您应该使用 GoogleMaps V2，它需要 SH1 密钥才能从 Google 地图 API 控制台生成 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:52:36.110

原因可能是您在调试模式下运行应用程序，而 api 密钥用于密钥库创建项目安装的 apk，然后尝试运行它如果您已正确完成其他所有操作，您应该能够看到地图。

[这个获取Key的教程也](http://mobiforge.com/developing/story/using-google-maps-android)很棒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:55:02.597

该教程很好，但它引用了 MD5 哈希。Google 不使用 MD5 哈希来生成 API 密钥，他们使用 SHA-1 哈希。本教程对我很有效....

[Sue Smith 在 mobile tuts+ 上的教程](http://mobile.tutsplus.com/tutorials/android/android-sdk-working-with-google-maps-application-setup/)

# postgresql - postgis st_distance 返回不正确的结果

> ID：15172097
> 
> 赞同：5
> 
> 时间：2013-03-02T07:43:14.650
> 
> 标签：postgresql, postgis, postgresql-9.1

我正在使用 postgis 计算 2 个地理坐标之间的距离。

```
select st_distance(
  'POINT(15.651955 73.712769)'::geography, 
  'POINT(14.806993 74.131451)'::geography) AS d; 
```

它返回我 53536.743496517 米，大约等于 54 公里，但实际距离是 103 公里，我通过[http://boulter.com/gps/distance/计算得出](http://boulter.com/gps/distance/)

我在查询中做错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T11:35:32.860

POINT() 以经度、纬度为参数。交换你的论点。

```
select st_distance(
  'POINT(73.712769 15.651955)'::geography, 
  'POINT(74.131451 14.806993)'::geography) AS d;

st_distance
--
103753.197677054 
```

我经常犯这个错误，因为我考虑的是经纬度，而不是经度和纬度。

# asp.net - Visual Studio 2010 中的 MVC4 WEB API 项目

> ID：15172098
> 
> 赞同：1
> 
> 时间：2013-03-02T07:43:28.307
> 
> 标签：asp.net, .net, visual-studio-2010, asp.net-mvc-4, asp.net-web-api

我有一个 WEB API MVC 4 项目。当我在 vs 2010 中运行这个项目时，它说这个项目与当前版本的 Visual Studio 不兼容。我已经在 vs 2012 中成功了，但现在我需要在 vs 2010 中运行这个项目以用于其他目的。请指导我如何使这成为可能。提前谢谢。

![在此处输入图像描述](../Images/f3df9873a65c839e772259daa7a3b260.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:13:28.020

在 VS2012 中创建新的 Web API 项目时，请确保在“新建项目”对话框中选择 .NET Framework 4 而不是 .NET Framework 4.5

![新项目下拉菜单](../Images/c1325c91e97ff147558343d7ac22238d.png)

# c - 使用 C/Intel 汇编，测试 128 字节内存块是否包含全零的最快方法是什么？

> ID：15172102
> 
> 赞同：15
> 
> 时间：2013-03-02T07:43:45.037
> 
> 标签：c, performance, optimization, assembly, intel-vtune

继续我的第一个问题，我正在尝试优化通过 VTune 分析 64 位 C 程序发现的内存热点。

特别是，我想找到最快的方法来测试一个 128 字节的内存块是否包含全零。您可以为内存块假设任何所需的内存对齐；我使用了 64 字节对齐。

我正在使用带有 Intel Ivy Bridge Core i7 3770 处理器、32 GB 内存和 Microsoft vs2010 C 编译器的免费版本的 PC。

我的第一次尝试是：

```
const char* bytevecM;    // 4 GB block of memory, 64-byte aligned
size_t* psz;             // size_t is 64-bits
// ...
// "m7 & 0xffffff80" selects the 128 byte block to test for all zeros
psz = (size_t*)&bytevecM[(unsigned int)m7 & 0xffffff80];
if (psz[0]  == 0 && psz[1]  == 0
&&  psz[2]  == 0 && psz[3]  == 0
&&  psz[4]  == 0 && psz[5]  == 0
&&  psz[6]  == 0 && psz[7]  == 0
&&  psz[8]  == 0 && psz[9]  == 0
&&  psz[10] == 0 && psz[11] == 0
&&  psz[12] == 0 && psz[13] == 0
&&  psz[14] == 0 && psz[15] == 0) continue;
// ... 
```

对应程序集的 VTune 分析如下：

```
cmp    qword ptr [rax],      0x0       0.171s
jnz    0x14000222                     42.426s
cmp    qword ptr [rax+0x8],  0x0       0.498s
jnz    0x14000222                      0.358s
cmp    qword ptr [rax+0x10], 0x0       0.124s
jnz    0x14000222                      0.031s
cmp    qword ptr [rax+0x18], 0x0       0.171s
jnz    0x14000222                      0.031s
cmp    qword ptr [rax+0x20], 0x0       0.233s
jnz    0x14000222                      0.560s
cmp    qword ptr [rax+0x28], 0x0       0.498s
jnz    0x14000222                      0.358s
cmp    qword ptr [rax+0x30], 0x0       0.140s
jnz    0x14000222
cmp    qword ptr [rax+0x38], 0x0       0.124s
jnz    0x14000222
cmp    qword ptr [rax+0x40], 0x0       0.156s
jnz    0x14000222                      2.550s
cmp    qword ptr [rax+0x48], 0x0       0.109s
jnz    0x14000222                      0.124s
cmp    qword ptr [rax+0x50], 0x0       0.078s
jnz    0x14000222                      0.016s
cmp    qword ptr [rax+0x58], 0x0       0.078s
jnz    0x14000222                      0.062s
cmp    qword ptr [rax+0x60], 0x0       0.093s
jnz    0x14000222                      0.467s
cmp    qword ptr [rax+0x68], 0x0       0.047s
jnz    0x14000222                      0.016s
cmp    qword ptr [rax+0x70], 0x0       0.109s
jnz    0x14000222                      0.047s
cmp    qword ptr [rax+0x78], 0x0       0.093s
jnz    0x14000222                      0.016s 
```

我能够通过 Intel instrinsics 对此进行改进：

```
const char* bytevecM;                        // 4 GB block of memory
__m128i* psz;                                // __m128i is 128-bits
__m128i one = _mm_set1_epi32(0xffffffff);    // all bits one
// ...
psz = (__m128i*)&bytevecM[(unsigned int)m7 & 0xffffff80];
if (_mm_testz_si128(psz[0], one) && _mm_testz_si128(psz[1], one)
&&  _mm_testz_si128(psz[2], one) && _mm_testz_si128(psz[3], one)
&&  _mm_testz_si128(psz[4], one) && _mm_testz_si128(psz[5], one)
&&  _mm_testz_si128(psz[6], one) && _mm_testz_si128(psz[7], one)) continue;
// ... 
```

对应程序集的 VTune 分析如下：

```
movdqa xmm0, xmmword ptr [rax]         0.218s
ptest  xmm0, xmm2                     35.425s
jnz    0x14000ddd                      0.700s
movdqa xmm0, xmmword ptr [rax+0x10]    0.124s
ptest  xmm0, xmm2                      0.078s
jnz    0x14000ddd                      0.218s
movdqa xmm0, xmmword ptr [rax+0x20]    0.155s
ptest  xmm0, xmm2                      0.498s
jnz    0x14000ddd                      0.296s
movdqa xmm0, xmmword ptr [rax+0x30]    0.187s
ptest  xmm0, xmm2                      0.031s
jnz    0x14000ddd
movdqa xmm0, xmmword ptr [rax+0x40]    0.093s
ptest  xmm0, xmm2                      2.162s
jnz    0x14000ddd                      0.280s
movdqa xmm0, xmmword ptr [rax+0x50]    0.109s
ptest  xmm0, xmm2                      0.031s
jnz    0x14000ddd                      0.124s
movdqa xmm0, xmmword ptr [rax+0x60]    0.109s
ptest  xmm0, xmm2                      0.404s
jnz    0x14000ddd                      0.124s
movdqa xmm0, xmmword ptr [rax+0x70]    0.093s
ptest  xmm0, xmm2                      0.078s
jnz    0x14000ddd                      0.016s 
```

如您所见，汇编指令较少，并且此版本进一步证明在时序测试中更快。

由于我在英特尔 SSE/AVX 指令领域相当薄弱，我欢迎就如何更好地使用它们来加速此代码提出建议。

虽然我搜索了数百种可用的内在因素，但我可能错过了理想的那些。特别是，我无法有效地使用 _mm_cmpeq_epi64(); 我寻找了这个内在的“不相等”版本（这似乎更适合这个问题），但没有找到。虽然下面的代码“有效”：

```
if (_mm_testz_si128(_mm_andnot_si128(_mm_cmpeq_epi64(psz[7], _mm_andnot_si128(_mm_cmpeq_epi64(psz[6], _mm_andnot_si128(_mm_cmpeq_epi64(psz[5], _mm_andnot_si128(_mm_cmpeq_epi64(psz[4], _mm_andnot_si128(_mm_cmpeq_epi64(psz[3], _mm_andnot_si128(_mm_cmpeq_epi64(psz[2], _mm_andnot_si128(_mm_cmpeq_epi64(psz[1], _mm_andnot_si128(_mm_cmpeq_epi64(psz[0], zero), one)), one)), one)), one)), one)), one)), one)), one), one)) continue; 
```

它是不可读的，并且（不出所料）被证明比上面给出的两个版本要慢得多。我确信必须有一种更优雅的方式来使用 _mm_cmpeq_epi64() 并欢迎就如何实现这一点提出建议。

除了使用 C 中的内部函数外，还欢迎针对此问题的原始英特尔汇编语言解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-02T15:51:56.610

正如其他人指出的那样，主要问题是您正在检查的 128 字节数据缺少数据缓存和/或[TLB](http://en.wikipedia.org/wiki/Translation_lookaside_buffer#TLB_miss_handling)并进入 DRAM，这很慢。VTune 告诉你这个

```
cmp    qword ptr [rax],      0x0       0.171s
jnz    0x14000222                     42.426s 
```

你有另一个较小的热点在中途

```
cmp    qword ptr [rax+0x40], 0x0       0.156s
jnz    0x14000222                      2.550s 
```

JNZ 指令所占用的 42.4 + 2.5 秒实际上是由先前的内存负载引起的停顿……在您分析程序的时间里，处理器无所事事总共 45 秒……在 DRAM 上等待。

您可能会问中途的第二个热点是什么。好吧，您正在访问 128 字节并且缓存行是 64 字节，CPU 在读取前 64 字节后就开始为您预取......但是您没有对前 64 字节做足够的工作完全重叠进入内存的延迟。

Ivy Bridge 的内存带宽非常高（这取决于您的系统，但我猜测超过 10 GB/秒）。您的内存块是 4GB，如果您按顺序访问它并让 CPU 提前为您预取数据，您应该能够在不到 1 秒的时间内完成压缩。

我的猜测是您通过以非连续方式访问 128 字节块来阻止 CPU 数据预取器。

将您的访问模式更改为顺序的，您会惊讶于它的运行速度有多快。然后，您可以担心下一级优化，这将确保分支预测运行良好。

要考虑的另一件事是`TLB misses`。这些成本很高，尤其是在 64 位系统中。而不是使用 4KB 页面考虑使用 2MB `huge pages`。请参阅此链接以了解 Windows 对这些内容的支持：[大页面支持 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366720%28v=vs.85%29.aspx)

如果您必须以某种随机的方式访问 4GB 数据，但您提前知道`m7`值的序列（您的索引），那么您可以`pipeline`在使用之前显式获取内存（它需要提前几个 100 个 CPU 周期）您将使用它来有效）。看

*   [_mm_prefetch](http://msdn.microsoft.com/en-us/library/84szxsww%28v=vs.80%29.aspx)
*   [“_mm_prefetch(...)”的用法](http://software.intel.com/en-us/forums/topic/311348)
*   [MM_PREFETCH](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/fortran-lin/GUID-AF42A867-B796-4D29-8FED-C20193FD87E0.htm)

以下是一些可能对内存优化主题有帮助的链接

Ulrich Drepper 每个程序员都应该知道的关于内存的知识

[http://www.akkadia.org/drepper/cpumemory.pdf](http://www.akkadia.org/drepper/cpumemory.pdf)

机器架构：你的编程语言从未告诉过你的事情，作者 Herb Sutter

[http://www.gotw.ca/publications/concurrency-ddj.htm](http://www.gotw.ca/publications/concurrency-ddj.htm)

[http://nwcpp.org/static/talks/2007/Machine_Architecture_-_NWCPP.pdf](http://nwcpp.org/static/talks/2007/Machine_Architecture_-_NWCPP.pdf)

[http://video.google.com/videoplay?docid=-4714369049736584770#](http://video.google.com/videoplay?docid=-4714369049736584770#)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T08:22:43.743

抱歉，我没有足够的评论声誉。
如果您使用以下内容作为测试会发生什么？

```
if( (psz[0]  | psz[1]  | psz[2]  | psz[3]  |
     psz[4]  | psz[5]  | psz[6]  | psz[7]  |
     psz[8]  | psz[9]  | psz[10] | psz[11] |
     psz[12] | psz[13] | psz[14] | psz[15] ) == 0) continue; 
```

不幸的是，我没有用于编译它的 64 位系统，而且我不熟悉编译器对 c 代码的确切作用，但在我看来，二进制文件或比单独的 == 比较更快. 我也不知道 Intel 内在函数是什么，但可以以类似于您已经完成的方式优化上述代码。
我希望我的回答有帮助。
马斯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T17:09:23.560

在 98% 的 128 字节块全为零时，您平均每 4K 页不到一个非零字节。对于稀疏的数组，您是否尝试将其存储为稀疏数组？您将节省大量内存和随之而来的缓存未命中延迟；如果一个普通的 std::map 结果更快，我不会感到惊讶。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T17:19:38.717

您是否考虑过英特尔字符串扫描指令？这些往往具有非常高的数据速率，并且处理器知道数据访问是顺序的。

```
 mov      rdi, <blockaddress>
     cld
     xor      rax, rax
     mov      rcx, 128/8
     repe     scasq
     jne      ... 
```

这无助于您的数据不在缓存中的问题。如果您提前知道要考虑哪个块，您可以使用 Intel 的预取指令来解决这个问题。请参阅[http://software.intel.com/en-us/articles/use-software-data-prefetch-on-32-bit-intel-architecture](http://software.intel.com/en-us/articles/use-software-data-prefetch-on-32-bit-intel-architecture)

[编辑代码以整合评论中指出的小问题]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T11:56:32.007

感谢您迄今为止收到的出色提示。

我相信 Mmarss 的“mega or”方法会提高性能，因为它生成的汇编语言指令更少。然而，当我运行我的基准程序时，我原来的笨拙 && 解决方案需要 163 秒，而我原来笨拙的英特尔 instrinsics 解决方案需要 145 秒（这两个在我原来的帖子中有描述）。

为了完整起见，这里是我用于“mega or”方法的 C 代码：

```
if ((psz[0]  | psz[1]  | psz[2]  | psz[3]
|    psz[4]  | psz[5]  | psz[6]  | psz[7]
|    psz[8]  | psz[9]  | psz[10] | psz[11]
|    psz[12] | psz[13] | psz[14] | psz[15]) == 0) continue; 
```

VTune 程序集是：

```
mov    rax, qword ptr [rcx+0x78]    0.155s
or     rax, qword ptr [rcx+0x70]   80.972s
or     rax, qword ptr [rcx+0x68]    1.292s
or     rax, qword ptr [rcx+0x60]    0.311s
or     rax, qword ptr [rcx+0x58]    0.249s
or     rax, qword ptr [rcx+0x50]    1.229s
or     rax, qword ptr [rcx+0x48]    0.187s
or     rax, qword ptr [rcx+0x40]    0.233s
or     rax, qword ptr [rcx+0x38]    0.218s
or     rax, qword ptr [rcx+0x30]    1.742s
or     rax, qword ptr [rcx+0x28]    0.529s
or     rax, qword ptr [rcx+0x20]    0.233s
or     rax, qword ptr [rcx+0x18]    0.187s
or     rax, qword ptr [rcx+0x10]    1.244s
or     rax, qword ptr [rcx+0x8]     0.155s
or     rax, qword ptr [rcx]         0.124s
jz     0x1400070b9                  0.342s 
```

然后，我尝试通过以下方式将“大或”的想法翻译成英特尔的内在学：

```
__m128i tt7;
// ...
tt7 = _mm_or_si128(_mm_or_si128(_mm_or_si128(psz[0], psz[1]),
      _mm_or_si128(psz[2], psz[3])),
      _mm_or_si128(_mm_or_si128(psz[4], psz[5]),
      _mm_or_si128(psz[6], psz[7])));
if ( (tt7.m128i_i64[0] | tt7.m128i_i64[1]) == 0) continue; 
```

虽然结果也更慢，需要 155 秒。它的 VTune 组件是：

```
movdqa xmm2, xmmword ptr [rax]         0.047s
movdqa xmm0, xmmword ptr [rax+0x20]   75.461s
movdqa xmm1, xmmword ptr [rax+0x40]    2.567s
por    xmm0, xmmword ptr [rax+0x30]    1.867s
por    xmm2, xmmword ptr [rax+0x10]    0.078s
por    xmm1, xmmword ptr [rax+0x50]    0.047s
por    xmm2, xmm0                      0.684s
movdqa xmm0, xmmword ptr [rax+0x60]    0.093s
por    xmm0, xmmword ptr [rax+0x70]    1.214s
por    xmm1, xmm0                      0.420s
por    xmm2, xmm1                      0.109s
movdqa xmmword ptr tt7$[rsp], xmm2     0.140s
mov    rax, qword ptr [rsp+0x28]       0.233s
or     rax, qword ptr [rsp+0x20]       1.027s
jz     0x1400070e2                     0.498s 
```

上面的英特尔内在方法非常粗糙。欢迎提出改进建议。

这再次表明测量的重要性。几乎每次我都猜到哪个会更快我错了。也就是说，只要你仔细衡量每一个变化，你就不会变得更糟，只会变得更好。虽然我倒退（如上）的次数多于前进，但在过去的一周里，我已经能够将小测试程序的运行时间从 221 秒减少到 145 秒。鉴于真正的程序将运行几个月，这将节省几天。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-30T21:50:23.097

建议：将您的阵列对齐到 128B，因此空间预取器将始终希望填充正确的高速缓存行以形成一对 128B 的高速缓存行。 [英特尔优化手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)，第 2-30 页（PDF 第 60 页），描述了 Sandybridge/Ivybridge：

> 空间预取器：此预取器力求使用将其完成为 128 字节对齐块的对线来完成提取到 L2 高速缓存的每个高速缓存行。

由于您的阵列仅与 64B 对齐，读取 128B 可以触及两对缓存线，导致 L2 空间预取器为您可能永远不会使用的数据发出更多负载。

* * *

您的答案有正确的想法：或将块与向量一起，然后测试它是否为全零。使用单个分支可能比每 8 个字节单独分支更好。

但是您测试向量的策略很糟糕：不要存储它然后标量加载+或两半。这是[SSE4 PTEST](https://hjlebbink.github.io/x86doc/html/PTEST.html)的完美用例，它让我们避免[了通常的`pcmpeqb / pmovmskb`](https://stackoverflow.com/questions/26623050/checking-if-two-sse-registers-are-not-both-zero-without-destroying-them)情况：

```
ptest   xmm0,xmm0      ; 2 uops, and Agner Fog lists it as 1c latency for SnB/IvB, but this is probably bogus.  2c is more likely
jz    vector_is_all_zero
; 3 uops, but shorter latency and smaller code-size than pmovmskb 
```

通常，分支可以很好地预测，生成其标志输入的延迟并不重要。但在这种情况下，主要瓶颈是分支错误预测。因此，花更多的微指令（如有必要）来减少延迟可能是值得的。

* * *

我不确定在加载第二个缓存行之前测试第一个缓存行是否更好，以防您找到一个非零字节而不会遭受第二个缓存未命中。空间预取器无法立即加载第二个缓存行，因此可能会在加载第二个 64B 缓存行之前尝试提前退出，除非这会导致大量额外的分支错误预测。

所以我可能会这样做：

```
allzero_128B(const char *buf)
{
    const __m128i *buf128 = (const __m128i*)buf;  // dereferencing produces 128b aligned-load instructions

    __m128i or0 = _mm_or_si128(buf[0], buf[2]);
    __m128i or2 = _mm_or_si128(buf[1], buf[3]);
    __m128i first64 = _mm_or_si128(or0, or2);
    // A chain of load + 3 OR instructions would be fewer fused-domain uops
    //  than load+or, load+or, or(xmm,xmm).  But resolving the branch faster is probably the most important thing.

    if (_mm_testz_si128(first64, first64)
        return 0;

    __m128i or4 = _mm_or_si128(buf[4], buf[6]);
    __m128i or6 = _mm_or_si128(buf[5], buf[7]);
    __m128i first64 = _mm_or_si128(or4, or6);

} 
```

在 IvyBrige 上，使用 256b AVX 操作并没有什么好处。Vector-FP 256b VORPS ymm 每个 uop 的工作量是原来的两倍，但仅在端口 5 上运行。（POR xmm 在 p015 上运行）。256b 加载作为两个 128b 一半完成，但它们仍然只有 1 uop。

我看不到使用单个 CMPEQPS 来检查 256b 向量是否为全零的方法。+0.0 比较等于 -0.0，因此符号位位置的 1 位在与零的比较中不会被检测到。我也不认为任何 CMPPS 谓词都有帮助，因为它们都没有实现比较 -0.0 与 +0.0 不同的处理方式。（有关浮点相等性的更多信息，请参阅[SIMD 指令以进行浮点相等性比较（NaN == NaN）](https://stackoverflow.com/questions/34951714/simd-instructions-for-floating-point-equality-comparison-with-nan-nan)）。

```
; First 32B arrives in L1D (and load buffers) on cycle n
vmovaps  ymm0,   [rdi+64]              ; ready on cycle n+1  (256b loads take 2 cycles)
vorps    ymm0,   ymm0, [rdi+96]        ; ready on cycle n+3  (the load uop is executing on cycles n+1 and n+2)
vextractf128 xmm1, ymm0, 1           ; 2c latency on IvB, 3c on Haswell
                                     ; xmm1 ready on cycle n+5
vpor     xmm0,   xmm0, xmm1          ; ready on n+6 (should be no bypass delay for a shuffle (vextractf128) -> integer booleans)
vptest   xmm0,   xmm0
jz   second_cacheline_all_zero 
```

不，这并不比

```
; First 32B of the cache-line arrives in L1D on cycle n (IvB has a 32B data path from L2->L1)
vmovaps  xmm0,   [rdi+64]              ; result ready on cycle n
vmovaps  xmm1,   [rdi+64 + 16]         ; result ready on cycle n  (data should be forwarded to outstanding load buffers, I think?)
vpor     xmm0,   xmm0, [rdi+64 + 32]   ; ready on cycle n+1
vpor     xmm1,   xmm1, [rdi+64 + 48]   ; ready on cycle n+1, assuming the load uops get their data the cycle after the first pair.
vpor     xmm0,   xmm1                  ; ready on cycle n+2
vptest   xmm0,   xmm0
jz   second_cacheline_all_zero 
```

使用 AVX2，256b 操作将是有意义的，包括 VPTEST ymm,ymm。

# c# - 水晶报表不显示数据

> ID：15172105
> 
> 赞同：1
> 
> 时间：2013-03-02T07:44:24.837
> 
> 标签：c#, winforms, ado.net, crystal-reports

我在用

```
Report.Bill objRpt = new Report.Bill();
        objRpt.Database.Tables[0].SetDataSource(DT1);
        objRpt.Database.Tables[1].SetDataSource(DT2);
        crystalReportViewer1.ReportSource = objRpt;
        crystalReportViewer1.Refresh(); 
```

打印具有两个数据表但调试成功的水晶报表。但是在加载水晶报表查看器时，它没有显示水晶报表上的数据。在水晶报表数据源上，它具有具有两个数据表的单个数据集。

# c - 这个程序如何打印印度地图？

> ID：15172106
> 
> 赞同：0
> 
> 时间：2013-03-02T07:44:25.010
> 
> 标签：c, algorithm

需要澄清它是如何工作的。

```
#include "stdio.h"
main()
{
    int a,b,c;
    int count = 1;
    for (b=c=10;a="- FIGURE?, UMKC,XYZHello Folks,\
        TFy!QJu ROo TNn(ROo)SLq SLq ULo+\
        UHs UJq TNn*RPn/QPbEWS_JSWQAIJO^\
        NBELPeHBFHT}TnALVlBLOFAkHFOuFETp\
        HCStHAUFAgcEAelclcn^r^r\\tZvYxXy\
        T|S~Pn SPm SOn TNn ULo0ULo#ULo-W\
        Hq!WFs XDt!" [b+++21]; )

        for(; a-- > 64 ; )
            putchar ( ++c=='Z' ? c = c/ 9:33^b&1);
    return 0;
} 
```

自己尝试一下，如果您知道该程序如何打印该地图，请向我解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:12:28.927

**编辑：**对不起，没看到骗子...

* * *

去除各种不可读、不必要和未使用的代码以及其他类型的混淆后，代码等效于：

```
 #include "stdio.h"

int main()
{
    int curr_char, b, c;

    const char *data = "\
    TFy!QJu ROo TNn(ROo)SLq SLq ULo+\
    UHs UJq TNn*RPn/QPbEWS_JSWQAIJO^\
    NBELPeHBFHT}TnALVlBLOFAkHFOuFETp\
    HCStHAUFAgcEAelclcn^r^r\\tZvYxXy\
    T|S~Pn SPm SOn TNn ULo0ULo#ULo-W\
    Hq!WFs XDt!";

    for (b = 0, c = 10; curr_char = data[b]; ) {
        b++;
        for(; curr_char-- > 64 ; ) {
            putchar(++c == 'Z' ? c = c / 9 : 33 ^ b & 1);
        }
    }

    return 0;
} 
```

基本上，程序将地图数据存储在字符串中（每行对应于 4 个字符），逐个字符地遍历字符串，“解码”它（使用一些我没有费心进行逆向工程的数学），然后打印一个空格或“！” 在行尾标记或换行。

# java - 字符串数组的UML类图

> ID：15172108
> 
> 赞同：2
> 
> 时间：2013-03-02T07:44:26.580
> 
> 标签：java, uml, ocl

在 UML 中，我们应该如何显示一个在 UML 方法中返回字符串数组的方法，如下所示

```
public String[] delete(int col, int row){} 
```

这种表示是否正确？

```
+delete(col: int; row: int): String[] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:23:37.593

没关系，但理想情况下，您应该在 OCL 中包含边界。例如

> +删除（列：整数，行：整数）：字符串[0..*]

这不是一个数组，而是一个“边界”，所以 [0.. *] 是零到无限的字符串。[0..1] 零个或一个字符串。[1..* ] 1 到无限的字符串。

在这种情况下，字符串是 OCL 类型而不是 Java 字符串对象，其他是 Bag、Set 等。

# c# - 有什么方法可以让 ClientHttp 堆栈使用浏览器 cookie？

> ID：15172110
> 
> 赞同：1
> 
> 时间：2013-03-02T07:44:27.453
> 
> 标签：c#, silverlight, cookies, httpwebrequest, clienthttpstack

假设用户已经登录到远程系统，所以他有一个与他的用户名相关联的会话并可以访问他的私人数据。现在有一个 Silverlight 应用程序，它尝试通过`HttpWebRequest`（ClientHttp 堆栈）与服务器通信。有没有办法将用户会话传递给 Silverlight 应用程序？也许以某种方式与浏览器共享cookie？

**更新：**

在网络和 SO 上都有代码片段，它们显示了如何将 HttpOnly cookie 从`WebBrowser`控件传输到`WebRequest`via `InternetGetCookieEx`（例如[，使用 WebBrowser 登录到使用 HttpOnly cookie 的站点](http://www.codewrecks.com/blog/index.php/2011/04/12/use-a-webbrowser-to-login-into-a-site-that-use-httponly-cookie/)）。我还不明白的两件事是 - 如果这可以在浏览器 silverlight 应用程序中使用，以及 cookie 是否可以类似地从运行 silverlight 应用程序的浏览器传输到 silverlight 应用程序本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:54:18.557

您无法访问表单身份验证 cookie 或 ASP.NET 会话 cookie，因为这些 cookie 是仅会话 cookie（使用 HttpOnly 标志发出），这意味着客户端脚本无法访问它们。如果您想实现这一点，您可以让服务器将 cookie 的值作为生成标记中的参数显式传递给 SL 应用程序。

# android - PreferenceActivity 操作栏主页图标不会返回主页（不像 ET :)

> ID：15172111
> 
> 赞同：10
> 
> 时间：2013-03-02T07:44:38.913
> 
> 标签：android, android-actionbar, preferenceactivity

我的 PreferenceActivity 效果很好，除了一件事。在我的所有其他活动中完美地将用户返回到上一个活动的 ActionBar 图标在 PreferenceActivity 中不起作用。当我单击该图标时，它会闪烁，就好像它要返回到上一个活动一样，但 PreferenceActivity 仍留在屏幕上。有趣的是，后退按钮确实将用户返回到上一个活动。有没有办法让 ActionBar 的 Home 图标在 PreferenceActivity 中“正常”工作？

这是代码：

```
public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  // Set actionBar controls for Settings
    TextView actionBarTitle = (TextView) findViewById(Resources.getSystem().getIdentifier("action_bar_title", "id", "android"));
    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);  
    actionBar.setIcon(R.drawable.ic_launcher); 
    actionBar.setDisplayShowTitleEnabled(true); 
    actionBarTitle.setTextColor(Color.WHITE);
    actionBarTitle.setTextSize(16); 
    actionBar.setTitle(R.string.settings_menu_title);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {  //Build.VERSION_CODES.ICE_CREAM_SANDWICH
        actionBar.setHomeButtonEnabled(true); 
        actionBar.setDisplayHomeAsUpEnabled(true); // show back arrow on title icon
        actionBar.setDisplayShowHomeEnabled(true);
    }
...... Handle prefs (all working fine).....
   } 
```

}

//////和调用代码 ////////

```
 //Use menu button to access settings screen
    @Override
   public boolean onKeyDown(int keycode, KeyEvent e) {
       switch(keycode) {
        case KeyEvent.KEYCODE_MENU:
            Intent intent = new Intent(this, SettingsActivity.class);
            startActivity(intent);
            return true;
       }
       return super.onKeyDown(keycode, e);
    }  // [END onKeyDown (for menu click capture) ] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T21:10:16.160

感谢@Axarydax 为我指明了正确的方向。我开始意识到 PreferenceActivity*与*我的其他活动不同，因为 Home 按钮返回到*调用*活动而不是 MainActivity。因此，解决方案需要（1）使用 startActivityForResult（而不是 startActivity）来调用 PreferenceActivity 和（2）在 PreferenceActivity 中使用 onOptionsItemSelected 来管理返回（根据@Axarydax 的回答）。(1) 和 (2) 均如下所示：

```
 // (1) Menu button used to access PreferenceActivity
 @Override
  public boolean onKeyDown(int keycode, KeyEvent e) {
      switch(keycode) {
        case KeyEvent.KEYCODE_MENU:
          Intent intent = new Intent(this, SettingsActivity.class);
          startActivityForResult(intent, 1);  //enables return to here
          return true;
        }
      return super.onKeyDown(keycode, e);
  }  

 // (2) Return to calling activity from PreferenceActivity
   @Override
 public boolean onOptionsItemSelected(MenuItem item) {
     if (item.getItemId() == android.R.id.home) {
         int SUCCESS_RESULT=1;
         setResult(SUCCESS_RESULT, new Intent());
         finish();  //return to caller
         return true;
     }
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T07:52:45.750

在您的活动中覆盖`onOptionsItemSelected`，它将在单击图标时调用，其 ID 值为`android.R.id.menu`

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
        //do your code
        return true;
    }
    return false;
} 
```

# r - 如何将 Excel 表格矩阵输入到 R

> ID：15172112
> 
> 赞同：-3
> 
> 时间：2013-03-02T07:44:44.460
> 
> 标签：r, input, matrix

我有一个包含 300 个变量（列）和 400 个观察值（行）的 Excel 表。我想将该表输入到 R 中保持相同的设置，并且我想将其保留为矩阵，希望之后执行回归分析。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T08:04:14.623

将 Excel 文件另存为逗号分隔的 CSV 文件，然后在 R 中导入：`read.csv("(path of file)",header=T)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T08:09:25.990

有多种方法可以将 Excel 文件读入 R。

R手册在这方面给出了一些提示：http: [//cran.r-project.org/doc/manuals/R-data.html#Reading-Excel-spreadsheets](http://cran.r-project.org/doc/manuals/R-data.html#Reading-Excel-spreadsheets)

例如，您可以使用`RODBC`包或`xlsReadWrite`包。

但是，我同意@shirleywu 的观点，即保存为 csv 是一个更好的选择，并且提供了更大的兼容性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T08:48:50.487

如果您是 R 新手并且遇到了这样的挑战，您可能需要考虑使用 RStudio (www.rstudio.org)。RStudio 是 R 的前端用户界面，右侧有一个简洁的功能，可以帮助您上传上传的 CSV 文件，以便您可以在分析中使用它们。在下面的屏幕截图中，您可以看到函数所在的位置。我假设您知道如何制作 Excel 文档的 CSV 文件。

![在此处输入图像描述](../Images/ec175628d1e7a03aacbf2e35dd9093a5.png)

# types - 为什么 *id* 函数只有一种可能的实现？

> ID：15172114
> 
> 赞同：1
> 
> 时间：2013-03-02T07:45:42.400
> 
> 标签：types, language-agnostic, proof

我多次看到有人声称可以证明具有类型签名的函数

```
α → α 
```

只能通过返回参数来实现，因为我们对参数的类型一无所知。

```
id :: α → α
id a = a 
```

可以在[http://blog.precog.com/?p=431找到该声明的示例](http://blog.precog.com/?p=431)

但是是什么阻止我们做出这样的 if 语句（伪代码）？

```
id :: α → α
id a = if ( a is_a_String) a + "hello"
       else a 
```

有没有我失踪的先决条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:24:06.883

像这样的定理只适用于具有*参数*属性的语言。这意味着代码不能在运行时检查类型，因此，执行永远不能依赖类型信息。大多数函数式语言都具有此属性，而 OO 语言通常需要提供向下转换和类似功能，这会破坏参数化。

参数化是一个非常强大的属性。它确保了某些抽象属性，即您提到的所谓的[*“自由定理”*](http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf) *，并且它是可以在运行时擦除*类型的高效实现的推动者。

另请参阅[我的答案](https://stackoverflow.com/questions/10811657/why-is-function-definition-for-all-types-at-once-not-allowed-in-haskell/10813898#10813898)。

# php - 如何在 PHP 中获取图像的像素值？

> ID：15172115
> 
> 赞同：15
> 
> 时间：2013-03-02T07:45:45.650
> 
> 标签：php

我需要使用 PHP 来读取图像中的每个像素。它用于图形密码项目。当用户选择密码时，他们将选择图像上的某个区域。我试图通过像素值来做到这一点。是否可以？？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-02T07:48:33.813

是的，您可以使用[`imagecolorat()`](http://php.net/manual/en/function.imagecolorat.php).

```
$color = imagecolorat($resource, $x, $y); 
```

`$resource`您的图像资源在哪里`$x`，并且`$y`是您想要获取颜色的像素的坐标。

您可以像这样遍历所有像素。请注意，这可能是一项昂贵的任务，具体取决于图像的大小。

```
$width = imagesx($resource);
$height = imagesy($resource);

for($x = 0; $x < $width; $x++) {
    for($y = 0; $y < $height; $y++) {
        // pixel color at (x, y)
        $color = imagecolorat($resource, $x, $y);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T03:38:57.270

@GintareStatkute 如果您将图像内容作为字符串，您可以使用：

```
<?php
$data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
   . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
   . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
   . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$data = base64_decode($data);
$im = imagecreatefromstring($data); 
```

如果您有文件路径，则使用任何创建函数，例如 imagecreatefromgif()、imagecreatefromjpeg()、imagecreatefrompng()。

# c++ - 从搅拌机的特定内存位置读取数据（结构）

> ID：15172116
> 
> 赞同：0
> 
> 时间：2013-03-02T07:45:48.753
> 
> 标签：c++, c, memory, blender

我正在尝试为搅拌机（免费 3d 程序）做一个插件，该插件是一个 python 插件，我会将数据传递给 c++ 以对其进行大量计算

在python中，方法是这样的：

```
data.as_pointer()
#.. method:: as_pointer()
#Returns the memory address which holds a pointer to blenders internal data
#:return: int (memory address).
#:rtype: int
#.. note:: This is intended only for advanced script writers who need to
#pass blender data to their own C/Python modules. 
```

我读的数据是一个列表

```
>>>>data[0].as_pointer()
152884792
>>>>data[1].as_pointer()
152884992
>>>>data[2].as_pointer()
152885192 
```

依此类推，项目大小为 200 字节，结构未知

如何在 C++ 中读取这些数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:50:02.183

你必须知道格式。一旦你这样做了，你可能可以创建一个`struct`并将这个指针类型转换为`struct`类型并读取它。

编辑：我确信搅拌机有一个 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:39:09.570

到目前为止我做了什么，以及它如何很好地确定哪些数据是哪个，+ 将数据与 python 内部数据进行比较

C++代码：

```
unsigned int p = imported_data; /*mypointer address*/

float* value_float;
unsigned int* value_int;
double* value_double;
char* value_char;
bool* value_bool;

for (int looper = 0;looper <200;looper +=4)
{
    value_float = reinterpret_cast<float *>(p + looper);
    if(*value_float != 0.0f){
        printf("%i value_float = %f\n", looper, *value_float);
        continue;
    }
    value_int = reinterpret_cast<unsigned int *>(p + looper);
    if(*value_int != 0){
        printf("%i value_int = %u\n", looper, *value_int);
        continue;
    }
    value_double = reinterpret_cast<double *>(p + looper);
    if(*value_double != 0.0){
        printf("%i value_double = %f\n", looper, *value_double);
        continue;
    }
    value_char = reinterpret_cast<char *>(p + looper);
    if(*value_char != NULL){
        printf("%i value_char = %c\n", looper, *value_char);
        continue;
    }
    value_bool = reinterpret_cast<bool *>(p + looper);
    if(*value_bool != 0){
        printf("%i value_char = %i\n", looper, *value_bool);
        continue;
    }
} 
```

结果如下：

```
0 value_float = 2.784583
4 value_float = 2.088116
8 value_float = -3.057968
16 value_double = -15656.531250
20 value_float = -6.455599
24 value_float = 1.000000
48 value_double = 134217728.000000
52 value_float = 20.000000
56 value_float = 2.784583
60 value_float = 2.088116
64 value_float = -2.807592
72 value_double = -9227.453125
76 value_float = -6.063199
80 value_float = 1.000000
104 value_double = 100663296.000000
108 value_float = 19.000000
136 value_double = 0.007813
140 value_float = 1.000000
144 value_float = 50.000000
148 value_float = 51.000000
152 value_float = 0.000000
156 value_float = -1.#QNAN0
160 value_float = 0.713105
164 value_float = 0.023383
168 value_float = 0.014281
172 value_float = 0.249231
176 value_double = 0.000000
180 value_float = 0.050000
192 value_double = 0.000000
196 value_float = 0.000000 
```

# java - 使用透明Bitmap时如何防止ImageView透明

> ID：15172119
> 
> 赞同：0
> 
> 时间：2013-03-02T07:46:00.330
> 
> 标签：java, android, user-interface, background, transparency

可能不值得问这么愚蠢的问题。所以我一开始就道歉。我想要做的是我有一个透明的位图要与 ImageView 一起显示。我不希望用户看到 ImageView 后台提示的内容。现在我怎么能防止 ImageView 是透明的？

如果我设置 ImageView-backgroundColor 那么它将显示背景中的颜色和位图中可能无法正确显示。

任何人都可以帮我解决这个问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:49:38.247

将 ImageView 添加到任何可以设置背景颜色的布局 - 例如 FrameLayout、RelativeLayout 或 LinearLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:57:50.077

您可以将 ImageView 的背景设置为 #00000000，这会将 ImageView 的背景设置为透明。

# java - MySQL 听起来像是对 Hibernate 的查询

> ID：15172123
> 
> 赞同：3
> 
> 时间：2013-03-02T07:46:39.330
> 
> 标签：java, mysql, hibernate

我对 Hibernate 很陌生，有没有办法可以将以下 MySQL 查询转换为 HQL 或 Criteria 查询：

```
SELECT * FROM items WHERE itemname SOUNDS LIKE 'some name' 
```

如果没有，是否有任何解决方法可以使用 Hibernate 实现类似的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:05:09.657

来自[mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#operator_sounds-like)：

> expr1 听起来像 expr2
> 
> 这与 SOUNDEX(expr1) = SOUNDEX(expr2) 相同

并且`soundex`似乎受[MySQLDialect](http://www.docjar.com/html/api/org/hibernate/dialect/MySQLDialect.java.html)支持。所以做这样的事情：

```
SELECT * FROM items WHERE soundex(itemname) = soundex('some name') 
```

或在 HQL 中

```
Query q = session.createQuery
   ("from items  e where soundex(e.itemname)  =  soundex('%some name%') "); 
```

应该管用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T07:58:37.493

您可以使用[本机 SQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#querysql-cud)。在您的情况下，只需：

```
sess.createSQLQuery
    ("SELECT * FROM items WHERE itemname SOUNDS LIKE 'some name'").list(); 
```

# c# - 如何在 Silverlight 4 中为所有用户缓存数据

> ID：15172124
> 
> 赞同：1
> 
> 时间：2013-03-02T07:46:39.707
> 
> 标签：c#, asp.net, silverlight

我想在打开应用程序后从数据库中检索一次数据并将它们保存在应用程序中的某个位置。我阅读了有关 Silverlight 中的隔离存储、内存缓存的信息。我也读过这个： [我可以在所有用户使用的silverlight中缓存数据吗？](https://stackoverflow.com/questions/5111081/can-i-cache-data-in-silverlight-that-is-used-by-all-users) 但是我不能选择我必须使用的东西。我正在使用 Silverlight 4。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:51:57.767

这真的取决于。

如果您的所有用户都使用一台机器，那么将内容放在隔离存储上可能是有意义的。隔离存储位于用户请求应用程序的计算机上，并且该数据无法与其他计算机上的其他用户共享。

在服务器上缓存可能会起作用，但我看不到好处，除非在数据不经常更改并且您试图避免过于频繁地访问数据库的情况下。

# sql - 如何使用休眠中的条件将子查询与投影一起使用

> ID：15172125
> 
> 赞同：0
> 
> 时间：2013-03-02T07:46:54.617
> 
> 标签：sql, spring-mvc, subquery, hibernate-criteria, detachedcriteria

我在sql中写了一个查询，就像......

```
SELECT c.clientfirstname, 
       c.clientlastname, 
       c.clientage, 
       c.status, 
       Sum(i.annualamount) AS amount, 
       p.planname, 
       c.clientid 
FROM   client c, 
       income i, 
       plan p 
WHERE  c.clientid = i.clientid 
       AND planid = (SELECT Max(p.planid) 
                     FROM   plan p 
                     WHERE  c.clientid = p.clientid 
                     GROUP  BY p.clientid) 
       AND ( c.clientfirstname LIKE 'rahul' ) 
GROUP  BY i.clientid 
```

这个查询很好并且工作正常，但我想使用休眠的条件查询代替上面的 SQL 查询，因为我在我的应用程序中使用休眠。我在添加条件时遇到问题，例如`planId=(SELECT MAX(p.planId) FROM plan p WHERE c.clientId=p.clientId GROUP BY p.clientId)`如何在休眠条件中编写上述 sql 查询。我试过这个查询

```
DetachedCriteria dc = DetachedCriteria.forClass(Client.class);
    dc.createAlias("plans", "pla");
    ProjectionList proj = Projections.projectionList();
    proj.add(Projections.max("pla.planId"));
        proj.add(Projections.groupProperty("clientId"));
    dc.setProjection(proj);

    Criteria criteria =      sessionFactory.getCurrentSession().createCriteria(Client.class);
    criteria.createAlias("incoms", "inco");
    criteria.createAlias("plans", "plan");

    Criterion firstname = Restrictions.like("clientFirstName", searchValue+"%");

    criteria.setProjection(
            Projections.projectionList()            
            .add(Projections.property("clientFirstName"))
            .add(Projections.property("clientLastName"))
            .add(Projections.property("clientAge"))
            .add(Projections.property("status"))
            .add(Projections.sum("inco.annualAmount"))
                .add(Projections.property("plan.planName"))
            .add(Projections.groupProperty("clientId"))
            );

    criteria.add(Subqueries.propertyEq("plan.planId", dc));

    Disjunction disjunction = Restrictions.disjunction();

    disjunction.add(firstname);

    criteria.add(disjunction);

    return criteria.list();
} 
```

但我收到这样的错误.....

```
Hibernate: 
select this_.clientFirstName as y0_, this_.clientLastName as y1_,
  this_.clientAge as y2_, this_.status as y3_, sum(inco1_.annualAmount) as y4_,
  plan2_.planName as y5_, this_.clientId as y6_ 
from Client this_ inner join Income inco1_ on this_.clientId=inco1_.clientId
  inner join Plan plan2_ on this_.clientId=plan2_.clientId 
where plan2_.planId = 
    (select max(pla1_.planId) as y0_, this_.clientId as y1_ 
     from Client this_ inner join Plan pla1_ on this_.clientId=pla1_.clientId
     group by this_.clientId
    ) 
  and (this_.clientFirstName like ? 
  or this_.clientLastName like ? 
  or this_.clientPhoneNo like ? 
  or this_.clientEmail like ?)
group by this_.clientId 
```

错误：无法执行查询

有三个表收入计划和客户，客户 ID 是计划和收入表中的外键，并且在计划表中有许多计划名称可用于一个客户 ID，我想从计划表中按 clientId 获取最后一个计划组.. .

我上面的（顶部）SQL 查询很好，所以我想要使用休眠条件的相同查询。

# java - 即使在显示全屏 Flash 视频时也始终位于顶部的窗口

> ID：15172126
> 
> 赞同：4
> 
> 时间：2013-03-02T07:46:55.710
> 
> 标签：java, linux, swing, user-interface, ubuntu

我正在尝试`subtitle player application`为 Ubuntu 12.04 编写一个简单的程序，即使在全屏播放 Flash 视频时也能保持领先。此应用程序类似于在 Windows 中运行良好的[Greenfish 字幕播放器。](http://www.softpedia.com/get/Multimedia/Video/Other-VIDEO-Tools/Greenfish-Subtitle-Player.shtml)

我的问题是我该怎么做？我正在尝试使用 Java 的片段（下面列出，我从这个[链接](https://stackoverflow.com/a/11845513/951640)得到它并修改为包含`setAlwaysOnTop()`），它使 JFrame 保持在顶部，但当 flash 视频全屏显示时不会。我的代码：

```
import java.awt.*; //Graphics2D, LinearGradientPaint, Point, Window, Window.Type;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

/**
 * From JavaMagazine May/June 2012
 * @author josh
 */
public class ShapedAboutWindowDemo {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        //switch to the right thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("About box");
                //turn of window decorations
                frame.setUndecorated(true);
                frame.setAlwaysOnTop(true);
                //turn off the background
                frame.setBackground(new Color(0,0,0,0));
                frame.setContentPane(new AboutComponent());
                frame.pack();
                //size the window
                frame.setSize(500, 200);
                frame.setVisible(true);
                //center on screen
                frame.setLocationRelativeTo(null);
            }
        }
        );
    }

    private static class AboutComponent extends JComponent {
        public void paintComponent(Graphics graphics) {
            Graphics2D g = (Graphics2D) graphics;

            //create a translucent gradient
            Color[] colors = new Color[]{
                           new Color(0,0,0,0)
                            ,new Color(0.3f,0.3f,0.3f,1f)
                            ,new Color(0.3f,0.3f,0.3f,1f)
                            ,new Color(0,0,0,0)};
            float[] stops = new float[]{0,0.2f,0.8f,1f};
            LinearGradientPaint paint = new LinearGradientPaint(
                                        new Point(0,0), new Point(500,0),
                                        stops,colors);
            //fill a rect then paint with text
            g.setPaint(paint);
            g.fillRect(0, 0, 500, 200);
            g.setPaint(Color.WHITE);
            g.drawString("My Killer App", 200, 100);
        }
    }
} 
```

请告诉我这在 Ubuntu/Linux 中是否可行，如果可以，如何。如果无法使用 Java，我愿意切换到任何其他语言。

# php - javascript什么都不做

> ID：15172130
> 
> 赞同：0
> 
> 时间：2013-03-02T07:48:17.613
> 
> 标签：php, javascript

我正在尝试根据在下拉框中选择的相对于开始时间的时间长度来更新一行文本中的完成时间。

因此，如果开始时间是 13:00 并且用户选择 1 小时，则完成时间将更新为 14:00

我不知道我在做什么对或错，因为我不知道关于 javascript 的第一件事。

```
 <script type='text/javascript'>
         function changeText(){
            var option=document.getElementById('time').value;
               if(option=='30'){
                     document.getElementById('field').value='".date(strtotime("$finishtime + 30 minutes"))."';
                               }

              else if(option=='60'){
                     document.getElementById('field').value='".date(strtotime("$finishtime + 60 minutes"))."';
                               }
             }
  </script> 
```

我似乎在调试器中没有收到任何错误，脚本什么也不做。

```
<a>Booking For ".$start." - </a><a id='field'>".$finishtime."</a><a> on ".$date."</a>

         <form enctype='multipart/form-data' method='post'>
                 <a class='1'>Session Length</a>
                       <select name='time' id='time' onchange='changeText();'>
                             <option selected='selected'></option>
                             <option id='30' value='30'>30 mins</option>
                             <option id='60' value='60'>1 Hour</option>
                       </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:54:24.183

利用

```
document.getElementById('field').text 
```

代替

```
 document.getElementById('field').value 
```

# php - 使用 postgres 和 zend 时，nextval 参数不接受超过 60 个字符

> ID：15172134
> 
> 赞同：0
> 
> 时间：2013-03-02T07:48:32.773
> 
> 标签：php, postgresql, zend-framework

在 zend 中，我为特定模块创建了映射器和模型。我正在尝试将数据从 zend 控制器文件保存到表中

我使用 postgresql 作为数据库。我已经设置了一个带有主键的表来自动递增

表名和对应的主键如下：

```
tbl_user_group_business_prmission       --table

pk_bint_user_group_business_prmission_id   --primary key 
```

主键生成如下

```
 nextval('tbl_user_group_business_prmission_pk_bint_user_group_business_prmission_id_seq'::regclass) 
```

可以看到 nextval() 里面的参数在 count(character) 中超过了 60。这就是我面临的问题。即我无法将数据插入此表，因为此参数在计数（字符）中超过 60

我收到类似“主键不生成”的错误。

仅当 nextval() 中的字符超过 60 时才会出现此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:08:14.043

postgres 系统使用不超过 63 个字节的标识符；较长的名称可以写在命令中，但它们会被截断。检查本手册[SQL-SYNTAX-IDENTIFIERS](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)。

但是您可以通过创建自定义`CREATE SEQUENCE`或通过 phppgadmin 或 pgAdmin 接口来更新序列的名称。

在这种情况下，最好更改`table name`或`primary key column name`缩短，因为在 zend 中，通过连接 tableName+columnName+ 来硬编码创建序列...您可以在此处查看代码`/Zend/Db/Adapter/Pdo/Pgsql.php`函数`lastInsertId`

**编辑：这个**[SO 帖子](https://stackoverflow.com/questions/8213127/maximum-characters-in-labels-table-names-columns-etc)
中还有另一个建议

# magento - 在 Magento 1.7 中向销售订单网格添加列的正确方法

> ID：15172137
> 
> 赞同：1
> 
> 时间：2013-03-02T07:48:36.067
> 
> 标签：magento, magento-1.7

我正在寻找一种将列添加到 Magento 中的销售/订单网格的方法。有很多教程，但我发现它们涉及通过将核心文件放置在本地代码池中来覆盖核心文件，这并不总是好的做法。

我正在尝试添加：

邮政编码、地址、电子邮件、电话、OrderID、CustomerID

如果有人可以分享一个解决方案或扩展，我可以在没有核心覆盖的情况下实现这一目标，我将非常感激。

```
<?xml version="1.0"?>
<gridcontrol>
    <grids>
        <!-- grid id -->
        <sales_order_grid>
            <shipping_description>
                <add>
                    <header>Shipping Description</header>
                    <!-- join shipping description from sales/order table -->
                    <join table="sales/order" condition="main_table.entity_id={{table}}.entity_id" field="shipping_description"/>
                </add>
               <after>status</after>
            </shipping_description>
            <shipping_address>
                <add>
                    <header>Shipping Address</header>
                    <!-- join shipping description from sales/order table -->
                    <join table="sales/order" condition="main_table.entity_id={{table}}.entity_id" field="shipping_address"/>
                </add>
                <after>status</after>
            </shipping_address>
            <Billing_address>
                <add>
                    <header>Billing Address</header>
                    <!-- join shipping description from sales/order table -->
                    <join table="sales/order" condition="main_table.entity_id={{table}}.entity_id" field="billing_address"/>
                </add>
                <after>status</after>
            </Billing_address>
            <Telephone>
                <add>
                    <header>Telephone</header>
                    <!-- join shipping description from sales/order table -->
                    <join table="sales/order" condition="main_table.entity_id={{table}}.entity_id" field="telephone"/>
                </add>
                <after>status</after>
            </Telephone>
            <CustomerID>
                <add>
                    <header>Customer ID</header>
                    <!-- join shipping description from sales/order table -->
                    <join table="sales/order" condition="main_table.entity_id={{table}}.entity_id" field="customer_id"/>
                </add>
                <after>status</after>
            </CustomerID>
        </sales_order_grid>
    </grids>
</gridcontrol> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:10:35.113

我同意覆盖不好，但您可以创建一个新模块并扩展订单网格的功能并添加新属性。这样，您只需停用模块即可禁用其功能。

如果你不知道怎么做，这里是 inchoo 博客的一个很好的教程：http: [//inchoo.net/ecommerce/magento/how-to-extend-magento-order-grid/](http://inchoo.net/ecommerce/magento/how-to-extend-magento-order-grid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:35:37.157

我为此推荐[https://github.com/magento-hackathon/GridControl 。](https://github.com/magento-hackathon/GridControl)只需安装扩展程序并使用带有所需内容的 gridcontrol.xml 编写第二个扩展程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-26T11:37:03.520

```
copy and past code 
app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Mage
 * @package     Mage_Adminhtml
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/**
 * Adminhtml sales orders grid
 *
 * @category   Mage
 * @package    Mage_Adminhtml
 * @author      Magento Core Team <core@magentocommerce.com>
 */
class Mage_Adminhtml_Block_Sales_Order_Grid extends Mage_Adminhtml_Block_Widget_Grid
{

    public function __construct()
    {
        parent::__construct();
        $this->setId('sales_order_grid');
        $this->setUseAjax(true);
        $this->setDefaultSort('created_at');
        $this->setDefaultDir('DESC');
        $this->setSaveParametersInSession(true);
    }

    /**
     * Retrieve collection class
     *
     * @return string
     */
    protected function _getCollectionClass()
    {
        return 'sales/order_grid_collection';
    }

    protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());
        $collection->getSelect()->joinLeft('sales_flat_order_address', 'main_table.entity_id = sales_flat_order_address.parent_id',array('telephone','city','postcode' ) )->where("sales_flat_order_address.address_type = 'billing'");
        $collection->getSelect()->joinLeft('sales_flat_order', 'main_table.entity_id = sales_flat_order.entity_id',array('total_qty_ordered'));
         $collection->getSelect()->joinLeft(array('sfoa' => 'sales_flat_order_address'), 'main_table.entity_id = sfoa.parent_id AND sfoa.address_type="shipping"', array('sfoa.street', 'sfoa.city', 'sfoa.region', 'sfoa.postcode', 'sfoa.telephone'));
        $collection->getSelect()->joinLeft('sales_flat_order_payment', 'main_table.entity_id = sales_flat_order_payment.parent_id',array('method'));
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }
    protected function _getAttributeOptions($attribute_code)
        {
            $attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', $attribute_code);
            $options = array();
            foreach( $attribute->getSource()->getAllOptions(true, true) as $option ) {
                $options[$option['value']] = $option['label'];
            }
            return $options;
        }
        protected function _prepareColumns()
        {
        $this->addColumn('created_at', array(
        'header' => Mage::helper('sales')->__('Date'),//Date=Purchased On
        'index' => 'created_at',
        'type' => 'datetime',
        'width' => '100px',
        'filter_index' => 'main_table.created_at',//
        ));
        $this->addColumn('real_order_id', array(
        'header'=> Mage::helper('sales')->__('Order Id'), //Order #=order id
        'width' => '80px',
        'type'=> 'text',
        'index' => 'increment_id',
        'filter_index' => 'main_table.increment_id',
        ));
        if (!Mage::app()->isSingleStoreMode()) {
        $this->addColumn('store_id', array(
        'header'=> Mage::helper('sales')->__('Purchased From (Store)'),
        'index'=> 'store_id',
        'type'=> 'store',
        'filter_index' => 'main_table.store_id',
        'store_view'=> true,
        'display_deleted' => true,
        ));
        }
        $this->addColumn('billing_name', array(
        'header' => Mage::helper('sales')->__('Customer Name'), //Bill to Name=Customer Name
        'index' => 'billing_name',
        'filter_index' => 'main_table.billing_name',
        ));
        $this->addColumn('telephone', array(
        'header' => Mage::helper('sales')->__('Mobile'),
        'index' => 'telephone',
        'filter_index' => 'sales_flat_order_address.telephone',
        ));
        $this->addColumn('city', array(
        'header' => Mage::helper('sales')->__('City'),
        'index' => 'city',
        'filter_index' => 'sales_flat_order_address.city',
        ));
        $this->addColumn('postcode', array(
        'header' => Mage::helper('sales')->__('Pincode'),
        'index' => 'postcode',
        'filter_index' => 'sales_flat_order_address.postcode',
        ));
         $this->addColumn('city', array(
               'header' => Mage::helper('sales')->__('City'),
               'index' => 'city', 'filter_condition_callback' => array($this, '_addEGColumnFilter'),
           ));
           $this->addColumn('street', array(
               'header' => Mage::helper('sales')->__('Street'),
               'index' => 'street',
               'filter_condition_callback' => array($this, '_addEGColumnFilter'),
           ));
           $this->addColumn('postcode', array(
               'header' => Mage::helper('sales')->__('Postcode'),
               'index' => 'postcode',
               'filter_condition_callback' => array($this, '_addEGColumnFilter'),
           ));
           $this->addColumn('telephone', array(
               'header' => Mage::helper('sales')->__('Telephone'),
               'index' => 'telephone',
               'filter_condition_callback' => array($this, '_ customColumnFilter'),
           ));
        $this->addColumn('method', array(
        'header' => Mage::helper('sales')->__('Payment method'),
        'index' => 'method',
        'filter_index' => 'sales_flat_order_payment.method',
        ));
        $this->addColumn('total_qty_ordered', array(
        'header' => Mage::helper('sales')->__('Qty'),
        'index' => 'total_qty_ordered',
        'filter_index' => 'sales_flat_order.total_qty_ordered',
        ));
        $this->addColumn('color', array(
        'header' => Mage::helper('sales')->__('Color'),
        'index' => 'color',
        'filter_index' => 'sales_flat_order.color',
        ));
        $this->addColumn('grand_total', array(
        'header' => Mage::helper('sales')->__('Order amount'),//G.T. (Purchased)=Order amount
        'index' => 'grand_total',
        'type'=> 'currency',
        'currency'=> 'order_currency_code',
        'filter_index' => 'main_table.grand_total',
        ));
        $this->addColumn('status', array(
        'header' => Mage::helper('sales')->__('Status'),
        'index' => 'status',
        'filter_index' => 'main_table.status',
        'type' => 'options',
        'width' => '70px',
        'options' => Mage::getSingleton('sales/order_config')->getStatuses(),
        ));
        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
        $this->addColumn('action',
        array(
        'header'=> Mage::helper('sales')->__('Action'),
        'width'=> '50px',
        'type'=> 'action',
        'getter' => 'getId',
        'actions'=> array(
        array(
        'caption' => Mage::helper('sales')->__('View'),
        'url' => array('base'=>'*/sales_order/view'),
        'field' => 'order_id'
        )
        ),
        'filter'=> false,
        'sortable'=> false,
        'index' => 'stores',
        'is_system' => true,
        ));
        }
        $this->addRssList('rss/order/new', Mage::helper('sales')->__('New Order RSS'));
        $this->addExportType('*/*/exportCsv', Mage::helper('sales')->__('CSV'));
        $this->addExportType('*/*/exportExcel', Mage::helper('sales')->__('Excel'));
        return parent::_prepareColumns();
        }

    protected function _prepareMassaction()
    {
        $this->setMassactionIdField('entity_id');
        $this->getMassactionBlock()->setFormFieldName('order_ids');
        $this->getMassactionBlock()->setUseSelectAll(false);

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/cancel')) {
            $this->getMassactionBlock()->addItem('cancel_order', array(
                 'label'=> Mage::helper('sales')->__('Cancel'),
                 'url'  => $this->getUrl('*/sales_order/massCancel'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/hold')) {
            $this->getMassactionBlock()->addItem('hold_order', array(
                 'label'=> Mage::helper('sales')->__('Hold'),
                 'url'  => $this->getUrl('*/sales_order/massHold'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/unhold')) {
            $this->getMassactionBlock()->addItem('unhold_order', array(
                 'label'=> Mage::helper('sales')->__('Unhold'),
                 'url'  => $this->getUrl('*/sales_order/massUnhold'),
            ));
        }

        $this->getMassactionBlock()->addItem('pdfinvoices_order', array(
             'label'=> Mage::helper('sales')->__('Print Invoices'),
             'url'  => $this->getUrl('*/sales_order/pdfinvoices'),
        ));

        $this->getMassactionBlock()->addItem('pdfshipments_order', array(
             'label'=> Mage::helper('sales')->__('Print Packingslips'),
             'url'  => $this->getUrl('*/sales_order/pdfshipments'),
        ));

        $this->getMassactionBlock()->addItem('pdfcreditmemos_order', array(
             'label'=> Mage::helper('sales')->__('Print Credit Memos'),
             'url'  => $this->getUrl('*/sales_order/pdfcreditmemos'),
        ));

        $this->getMassactionBlock()->addItem('pdfdocs_order', array(
             'label'=> Mage::helper('sales')->__('Print All'),
             'url'  => $this->getUrl('*/sales_order/pdfdocs'),
        ));

        $this->getMassactionBlock()->addItem('print_shipping_label', array(
             'label'=> Mage::helper('sales')->__('Print Shipping Labels'),
             'url'  => $this->getUrl('*/sales_order_shipment/massPrintShippingLabel'),
        ));

        return $this;
    }

    public function getRowUrl($row)
    {
        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
            return $this->getUrl('*/sales_order/view', array('order_id' => $row->getId()));
        }
        return false;
    }

    public function getGridUrl()
    {
        return $this->getUrl('*/*/grid', array('_current'=>true));
    }

} 
```

# c# - 将文件从电脑复制到windows phone

> ID：15172138
> 
> 赞同：0
> 
> 时间：2013-03-02T07:48:39.593
> 
> 标签：c#, wifi, windows-phone

我正在开发一个 Windows 应用程序，用于通过 Wi-Fi 将文件从 PC 传输到 Windows Phone。

如果 Windows Phone 通过 Wi-Fi 连接到 PC，我是否可以获取 Windows Phone IP 地址，以便我可以使用复制功能将文件从 PC 复制到使用其 IP 地址的设备？

如果除了 USB 之外还有其他方法，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:27:05.323

You are looking for [Sockets](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.105%29.aspx). You will need a desktop client for that too.

# sdl - Tridion Schema 字段的正则表达式验证并显示警报消息

> ID：15172141
> 
> 赞同：0
> 
> 时间：2013-03-02T07:48:59.643
> 
> 标签：sdl, tridion, tridion-2011

创建了一个具有字段名称“电子邮件”的模式。现在我需要验证字段是否有效？如果不是，我想显示一条错误消息。我编辑源如下：

```
<xsd:element name="email" minOccurs="0" maxOccurs="50">
<xsd:simpleType>
<xsd:restriction base="xsd:normalizedString">
<xsd:pattern value="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"/>
</xsd:restriction>
</xsd:simpleType>
</xsd:element> 
```

如何显示错误消息？或任何其他更好的方法请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T08:17:31.553

看看其中一些链接，它们应该会让你走上正确的轨道：

*   上一篇 SF 帖子 - [如何在 SDL Tridion 消息栏中显示自定义消息？](https://stackoverflow.com/questions/12263827/how-to-display-the-custom-message-in-sdl-tridion-message-bar)

*   验证 Tridion 内容第 1 部分 - [http://nunolinhares.blogspot.co.uk/2012/07/validating-content-on-save-part-1-of.html](http://nunolinhares.blogspot.co.uk/2012/07/validating-content-on-save-part-1-of.html)

*   验证 Tridion 内容第 2 部分 - [http://www.curlette.com/?p=913](http://www.curlette.com/?p=913)

干杯

# javascript - 停止 twitter bootstrap 下拉菜单的传播

> ID：15172143
> 
> 赞同：0
> 
> 时间：2013-03-02T07:49:12.993
> 
> 标签：javascript, twitter-bootstrap

我想防止在单击菜单项后关闭下拉菜单。这是我正在做的事情：

```
 $(document).ready(function() {
      $(document).on("click", ".dropdown-menu li", function(event){
        debugger; // it stops here though
        event.stopPropagation();
      });
 }); 
```

但是在单击任何菜单项后，下拉菜单将关闭。我究竟做错了什么？

**PS**我必须使用`$(document).on("click", ".dropdown-menu li"`，因为这个下拉列表是由ajax动态构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:54:55.483

如果您在 上绑定处理程序`document`，则事件将一直向上移动到顶部，并且已经触发关闭菜单的事件处理程序。如果您想在它到达 Bootstrap 处理程序之前捕获它，您需要将处理程序绑定到被单击的元素并阻止它传播。

```
$('.dropdown-menu li').on('click', ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:56:55.907

你可以这样写：

```
$(".dropdown-menu li").on("click", function(event){
 event.stopPropagation();

 }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T08:11:02.157

出于某种原因，只有这个解决方案有效

```
$(document).ready(function() {
  $(".dropdown-menu").on("click", "li", function(e){
    e.stopPropagation();
    });
  }); 
```

有人知道为什么吗？

# ajax - 如何使用 ajax 更新 JSF 数据表

> ID：15172156
> 
> 赞同：1
> 
> 时间：2013-03-02T07:51:20.040
> 
> 标签：ajax, jsf-2, primefaces

我通过按命令按钮使用数据表动态添加输入文本，但是每次添加行时页面都会刷新，如何在不使用 ajax 刷新页面的情况下在数据表中添加一行。这是代码

```
<h:form>

    <h:dataTable id="table" value="#{dataTableBean.cities}" var="city">
        <h:column>
            <f:facet name="header">
                <h:outputText value="City name" />
            </f:facet>
            <h:inputText value="#{city}" />
        </h:column>
    </h:dataTable>

    <h:commandButton value="Add one more city" id="ajax" update="table"
        actionListener="#{dataTableBean.enlargeList}" />
    <h:commandButton value="Submit" actionListener="#{dataTableBean.processList}" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:43:46.313

就应该是一项*工作练习*而言，发布任何接近答案的内容都会损害 OP 对该主题的理解。

所以，我会给出一些*提示*，以便 OP 可以自己解决问题。

1.  您正在混淆**Primefaces** UI 组件，其标签以`<p:...>`标准**JSF** UI 组件开头`<h:...>`。关于你的例子，有[`<h:commandButton>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/commandButton.html)and [`<p:commandButton>`](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/commandButton.html)。至于 Primefaces 组件旨在为用户提供更方便的界面，在 Primefaces 对应的标准命令按钮中还有**一些附加属性。**发现它们并注意 AJAX 规范。仔细看看`ajax`和`update`属性。
2.  [`<f:ajax>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)`UIComponent`标签为实现`ClientBehaviorHolder`接口的 s 启用 ajax 行为。同样，[`<p:ajax>`](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/ajax.html)标签在一些增强方面基本相同，并被 Primefaces 组件使用。例如，可以在`<h:commandButton>`/内使用这些标签，`<p:commandButton>`并指定该组件的 ajax 行为。注意`execute`/`render`的属性`<f:ajax>`和 / 或`process`/`update`的属性`<p:ajax>`。这样命令按钮不会触发标准表单提交，但会触发 AJAX 调用。
3.  请务必了解命令按钮的**动作**和**动作侦听器之间的区别。**后者旨在执行一些*小的调整*（记录/访问调用者的属性/调整某些属性等），而前者用于执行*业务操作*（保存/删除/更新等）。优秀的开始是阅读 [action 和 actionListener 之间](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)的差异。

最后，请确保**不要混淆**代码中的输入和输出组件。

最后，咨询一个好的信息来源是一个非常好的主意。您可以从官方文档（[Primefaces 文档](http://primefaces.org/documentation.html)、[Oracle 关于 Java EE 6 的教程](http://docs.oracle.com/javaee/6/tutorial/doc/)）开始，然后继续使用***可靠的信息来源***。我的个人偏好转到以下（出色的）来源：[BalusC 教程一般 Java EE 和 JSF 特别是](http://balusc.blogspot.com/)，[Marty Hall 的关于 Java 中广泛主题](http://coreservlets.com/)的教程和[Mkyong 的教程，涵盖了 Java EE 中的具体问题](http://www.mkyong.com/)，以备不时之需一个具体的例子。

# java - Spring MVC Async 任务同步运行

> ID：15172159
> 
> 赞同：3
> 
> 时间：2013-03-02T07:51:45.433
> 
> 标签：java, spring, spring-mvc, asynchronous

我想实现一个异步任务，以及一个立即返回并在后台启动任务的页面。但是，该页面会等待后台任务完成，然后才返回。当我访问`/start`时，加载页面需要 15 秒。我正在使用 Spring 3.2.0。`<task:annotation-driven/>`我的test-servlet.xml 中有一行。

奇怪的是，即使我用@Async("this_bean_does_not_exist") 替换@Async，应用程序也会做同样的事情（尽管我希望引用不存在的bean 时会出现异常）。

```
public interface AsyncTestService {
    void startSlowProcess();
} 
```

* * *

```
@Service
public class AsyncTestServiceImpl implements AsyncTestService {

    @Override
    @Async
    public void startSlowProcess() {
        try {
            Thread.sleep(15000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
} 
```

* * *

```
@Controller
public class TestController {

    @Autowired
    AsyncTestService asyncTestService;

    @RequestMapping("/start")
    @ResponseBody
    public String startSlowProcess() {
        asyncTestService.startSlowProcess(); // It takes 15s to complete
        return "STARTED"; // should return immediately
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:12:48.677

你可能需要一个[executor](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)。试试这个：

```
<task:annotation-driven executor="myExecutor" />    
<task:executor id="myExecutor" pool-size="5"/> 
```

**编辑：**另一种可能的解决方案：改用[EnableAsync](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html)（自 Spring 3.1 起可用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T13:02:26.907

首先让你的`.xml`配置看起来像：

```
<task:scheduler id="myScheduler" pool-size="10" />
<task:executor id="myExecutor" pool-size="10" />
<task:annotation-driven executor="myExecutor" scheduler="myScheduler" proxy-target-class="true" /> 
```

（是的，调度器计数和执行器线程池大小是可配置的）

或者只使用默认值：

```
<!-- enable task annotation to support @Async, @Scheduled, ... -->
<task:annotation-driven /> 
```

其次，确保`@Async`方法是公开的。

# matlab - 混淆矩阵中的真阴性和假阴性 ero

> ID：15172160
> 
> 赞同：0
> 
> 时间：2013-03-02T07:51:54.423
> 
> 标签：matlab, machine-learning, svm, libsvm

我正在 matlab 中使用 libsvm 进行蛋白质结构类预测。使用我的不同维度特征集，我做了 7 折交叉验证并得到了很好的结果。但是当我尝试测试数据并获取混淆矩阵时，我得到的只是真阳性和假阴性的值，而没有得到真阴性和假阳性的任何值。

我真的很困惑，如果有人通过提供解决方案来帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:52:42.910

那你为什么不自己计算呢？准确度为您提供预测“错误”的总数，因此如果您有 1000 个测试项目并且准确度为 80%，则`false negatives`+ `false positives`= 200。由于您有 的数量`false negatives`，您可以计算`false positives`= 200 - `false negatives`。同样，鉴于上述精度，这意味着`true negatives`+ `true positives`= 800，因此您可以计算`true negatives`= 800 - `true positives`。

上述基本原理应该很容易推广到更多维度，但我可能在这里遗漏了一些东西，所以请澄清你的问题。

# javascript - ng-过滤器不适用

> ID：15172165
> 
> 赞同：0
> 
> 时间：2013-03-02T07:52:25.700
> 
> 标签：javascript, angularjs

```
<div ng-app="streams">
    <div ng-controller="streamsList">
        <ul class="streamsList">
            <li class="streamsListItem" ng-repeat="(streamer, viewers) in streamerItems | limitTo:5">
                <h2>{{streamer | uppercase}}</h2>
                <span>{{viewers}}</span>
            </li>
        </ul>
    </div>
</div> 
```

大写字母有效，但 LimitTo 无效。有人帮忙吗？也许它在（流媒体，观众）有问题？

这里是 JSON：

```
{
    "Liquidixmike88": 1721,
    "DotaCinema": 746,
    "EternaLEnVyy": 649,
    "starladder1": 562,
    "Anuxinamoon": 165,
    "glhf_Reaves": 157,
    "Anzecha": 135
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:14:03.380

因为*limitTo*过滤器仅适用于数组：

CTRL：

```
function($scope) {
  $scope.streamerItems = [
    {nick: "TopGun", viewers: 1822},
    {nick: "Liquidixmike88", viewers: 1721},
    {nick: "DotaCinema", viewers: 746},
    {nick: "DotaCinema1", viewers:732},
    {nick: "EternaLEnVyy", viewers: 649},
    {nick: "starladder1", viewers: 562},
    {nick: "Anuxinamoon", viewers: 165},
    {nick: "glhf_Reaves", viewers: 157},
    {nick: "Anzecha", viewers: 135}
  ];

} 
```

看法：

```
<ul class="streamsList">
  <li class="streamsListItem" ng-repeat="streamer in streamerItems | limitTo:5">
    <h2>{{streamer.nick | uppercase}}</h2>
    <span>{{streamer.viewers}}</span>
  </li>
</ul> 
```

[演示 plunker](http://embed.plnkr.co/0WNwdrAZZRB2CiXoI15E/preview)。

# javascript - 将头像添加到 Google plus 徽章的最佳方式是什么？

> ID：15172169
> 
> 赞同：0
> 
> 时间：2013-03-02T07:52:48.370
> 
> 标签：javascript, google-plus, badge

我想在我的博客中添加一个 Google+ 徽章。目前我在我的博客中添加了一个 google plus 徽章，并尝试通过以下代码向其中添加图像：

```
<div class="g-plus" data-width="208" data-height="69" style="float:left; direction:ltr;text-align:left" data-href="//plus.google.com/116527224364668694256" data-rel="author"></div>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); 
    po.type = 'text/javascript'; 
    po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; 
    s.parentNode.insertBefore(po, s);
    var iab = document.getElementsByClassName("iab")[0];
    iab.style.backgroundimage = "url('https://googledrive.com/host/0B7YvaD77pFw9cDczZnBRanFFVWs/img/avatar.jpg')";
  })();
</script> 
```

输出是这样的：
![我的 Google+ 徽章](../Images/bb27c402a9f6991a9f07262e4d0e59c7.png)

我想在其中添加我自己的头像，但它无法正常工作。这段代码有什么问题，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:44:12.337

无法在 Google+ 徽章上显示您的头像。这里的文档：

[https://developers.google.com/+/web/badge/](https://developers.google.com/+/web/badge/)

具有可在徽章上配置的内容的最新信息。高级选项将让您设置可以显示更多或更少信息的徽章的宽度，但目前没有显示您的头像的选项。

徽章呈现代码将覆盖您在其上设置的任何样式，这就是为什么您的附加设置不会改变徽章的显示方式。

如果你只是想渲染你的头像，你可以使用谷歌 API 来完成它，如下面的谷歌 API 资源管理器所示：

[https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get?userId=109716647623830091721&_h=1&](https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get?userId=109716647623830091721&_h=1&)

然后从返回的人员对象中检索个人资料照片。

# java - 如何为列表视图中的每个项目添加复选框

> ID：15172170
> 
> 赞同：0
> 
> 时间：2013-03-02T07:52:51.770
> 
> 标签：java, android, checkbox

我正在开发一个日历应用程序。显示所有可用日历的列表视图。如何向它添加一个复选框，并且之前选择的日历也应该显示为选中状态。

我想要这样的列表视图。

文本视图 cb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:55:46.663

将列表视图适配器设置为“simple_list_item_multiple_choice”

```
ArrayAdapter<String> adapter;

List<String> values; // put values in this

//Put in listview
adapter = new ArrayAdapter<UserProfile>(
this,
android.R.layout.simple_list_item_multiple_choice, 
values);
setListAdapter(adapter);   //Set the adpter to list View 
```

第二种方法是通过扩展 Base 适配器类来创建自定义适配器：

查看链接中的示例：

[http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html](http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:01:39.293

您可以为您的 ListView 行使用 checkedTextView（使用自定义适配器）并指定 android:choiceMode="multipleChoice" 到您的列表视图

这是我的代码中的一个示例：

```
<CheckedTextView
    android:id="@+id/member_name"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:drawableRight="?android:attr/listChoiceIndicatorMultiple"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:gravity="center_vertical"
    android:paddingLeft="20dp"
    android:textColor="@color/dark_grey_txt" /> 
```

在这里，当您点击 CheckedTextView 时，它将添加选中的可绘制对象

现在，将所选项目存储在 List<> 中，您可以在单击时添加和删除

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    CheckedTextView ctv = (CheckedTextView) view.findViewById(R.id.member_name);
    if (ctv != null) {
        if (ctv.isChecked()) {
            ctv.setChecked(false);
            listAdapter.removeSelectedMembers(position);
        } else {
            ctv.setChecked(true);
            listAdapter.setSelectedMembers(position);
        }
    }
} 
```

//adapter 添加和删除Item的方法

```
public void setSelectedMembers(int position) {
    if (!selectedMembersList.contains(String.valueOf(position))) {
        selectedMembersList.add(String.valueOf(position));
    }
}

public void removeSelectedMembers(int position) {
    selectedMembersList.remove(String.valueOf(position));
} 
```

# asp.net - 网格视图创建

> ID：15172172
> 
> 赞同：1
> 
> 时间：2013-03-02T07:53:05.513
> 
> 标签：asp.net, gridview, datatable, viewstate

在 asp.net`Grid View`中，我想通过编辑文本输入值来添加行，即不使用数据库。
最初，一个空行将与“添加”按钮一起显示为一列。
当我单击“添加”按钮时，文本框将显示在所有列中以输入值，并且“添加”按钮字段包含“保存”和“取消”按钮。
当我单击“保存”时，值必须作为标签显示在下一行中。

有人可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:46:05.273

当然。我会做这样的事情：

1) 设置您的 GridView 模板

2）当用户填写空文本框并单击“添加”按钮时，捕获事件，在 DataTable 中创建新行并存储值

3）在位置零创建一个新行并添加空字符串

```
table.Rows.InsertAt(row, 0); 
```

4) 将 DataTable 数据绑定到 GridView

6）每次添加一行时，GridView 都会增长，只需​​在零位置重新插入一个空白行（加上您的“添加”链接）。

您可能应该尝试一下，如果您没有达到您正在寻找的结果，请发布您的代码。有人会为你指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:14:01.510

您可以将数据源设置为数据表，您可以使用任何您喜欢的代码构建该数据表。

这是一个链接，显示如何在代码中构建数据表...

[http://www.aspnettutorials.com/tutorials/controls/data-table-csharp.aspx](http://www.aspnettutorials.com/tutorials/controls/data-table-csharp.aspx)

然后，您将向表中添加行并将其设置为您的 gridview 的数据源。

您还可以使用列表设置 gridview 的数据源：

[http://www.aspnettutorials.com/tutorials/advanced/ilist-interface-aspnet2-vb.aspx](http://www.aspnettutorials.com/tutorials/advanced/ilist-interface-aspnet2-vb.aspx)

## 编辑 1

很少有有用的链接
[如何使用没有数据库的 asp.net 将数据插入到网格视图中](https://stackoverflow.com/questions/7934065/how-to-insert-data-in-to-grid-view-using-asp-net-without-database)

# drupal - 如何在 custom_comment_form_submit 中获取评论 ID

> ID：15172176
> 
> 赞同：0
> 
> 时间：2013-03-02T07:53:59.050
> 
> 标签：drupal, drupal-6, drupal-hooks, drupal-comments

如何获得评论ID `comment_form_submit`？

我构建了一个自定义模块来发送包含评论详细信息的电子邮件，例如**评论 ID**、***网址***和**用户名**。但没有获得评论 id 来生成评论 url。

```
function custom_comment_form_submit($form, &$form_state) {
  //code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:21:31.443

最简单的方法是安装这两个模块。使用令牌，您将可以访问可在电子邮件模板中使用[的令牌列表，包括评论 ID。](http://drupal.org/node/390482)如需教程，请访问此处（适用于 Drupal 7，但也可用于 Drupal 6）：[如何在 Drupal 7 中使用操作和触发器（或规则模块）发送评论的电子邮件通知](http://adellefrank.com/blog/how-to-email-notifications-comments-drupal7)

*   [令牌](http://drupal.org/project/token)
*   [规则](http://drupal.org/project/rules)

更不用说提供这种功能的一整套已经构建的模块了。不要把时间浪费在重新发明轮子上。有关可用模块的比较，请参阅此列表：[评论通知比较](http://groups.drupal.org/node/15928)

# selenium - SeleniumException：30000 毫秒错误后超时

> ID：15172177
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:53:59.200
> 
> 标签：selenium, junit, rc

我遇到同样的错误，它只是打开提及的 URL 并关闭浏览器并显示以下错误 com.thoughtworks.selenium.SeleniumException: Timed out after 30000ms

以下是我尝试使用 Selenium RC 和 junit 的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:11:37.497

该页面的加载时间超过 30000 毫秒。

试着改变时间。

```
selenium.waitforPagetoLoad(60000) 
```

代替

```
selenium.waitforPagetoLoad(30000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T09:35:42.447

您可以使用循环和内部循环，您可以检查页面上的特定元素是否已加载。这样计数器将等到该元素被加载，这样您就可以在代码中应用动态等待控制。

```
for (int second = 0;; second++) {
        if (second >= 160) fail("timeout");
        try { if (selenium.isTextPresent("add element on the page here")) break; } catch (Exception e) {}
        Thread.sleep(1000);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T10:57:23.580

尝试这个

```
 selenium.setTimeout("0");

    selenium.waitForPageToLoad("0"); 
```

# highcharts - 如何根据悬停事件更新Highcharts组合图表

> ID：15172181
> 
> 赞同：0
> 
> 时间：2013-03-02T07:54:27.500
> 
> 标签：highcharts

我正在使用类似于[http://www.highcharts.com/demo/combo](http://www.highcharts.com/demo/combo)的 Highchart 。

**当柱形图中的列**系列悬停在上方时，我想更新组合图中的饼图中的数据。

有没有办法做到这一点？我还没有找到可能有帮助的关于 highcharts 事件的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:06:27.710

系列中的数据点可以附加一个 mouseOver 事件处理程序。然后，此处理程序可以更新饼图中的系列数据。

```
Series.data.events 
```

这是使用 mouseOver 事件的示例：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-mouseover/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-mouseover/)

在事件处理程序中，您需要为饼图设置系列数据。

# mysql - 这个数据库模式好吗？（同一张表有多个关系）

> ID：15172193
> 
> 赞同：0
> 
> 时间：2013-03-02T07:55:53.717
> 
> 标签：mysql, nhibernate, database-design, relational-database, castle-activerecord

```
Blog
    Id
    ...
    List of Posts
    Last Post           <---
    Most Viewed Post    <---

Post
    Id
    ...
    Blog (the blog it belongs to) 
```

`List of Posts`我曾经在实体中只有一个`Blog`，但后来我不得不显示一些博客表，如下所示：

```
Blog Id  | ... |  Last Post  | Most Viewed Post
----------------------------------------------
   1     | ... |  Something  |     Post 1
   1     | ... |  Something  |     Post 10
   1     | ... |  Something  |     Post 5
   1     | ... |  Something  |     Post 4 
```

并仅使用,并将`List of Posts`其他字段作为 中的属性，`Blog`从， ETC。）`List of Posts``Last Post``Most Viewed Post`

我正在使用`NHibernate`with `Active Record`with`MySQL`以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:52:50.477

将计算的属性映射为公式

```
Refernce(x => x.LastPost).Formula("(Select Max(p.Id) FROM post p WHERE p.BlogId = Id)"); 
```

那么您可以在查询中使用它们

# c - 输出奇怪的c程序

> ID：15172195
> 
> 赞同：1
> 
> 时间：2013-03-02T07:56:28.347
> 
> 标签：c, arrays

我在 c 编程方面有比较好的经验。它一直是我最喜欢的语言之一。今天在学习 shell 编程时，偶然发现了我在 Linux 系统上执行的 ac 程序（Backtrack 5 r2）。该程序有一个奇怪的输出，我真的想不通。

这是代码...

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    char array[] = { 0x25, 115, 0 };
    char array2[] = { 68, 0x61, 118, 0x69, 0144, 040,
                      0107, 97, 0x74, 119, 0157, 0x6f,
                      100, 0x20, 0x72, 117, 'l', 0x65,
                      115, 041, 012, 0 };

    printf(array, array2);
} 
```

使用 gcc 编译此代码并在执行时得到输出为

> 大卫盖特伍德规则！

无法真正理解我是如何以及为什么得到这个输出的。据我所知，将数组的名称传递给“printf”只会打印数组的基地址，即数组第 0 个元素的地址。只有在“printf”语句中使用了正确的格式说明符时，它才会正确显示。

那么我哪里出错了，或者我忽略了一些重要的事情，还是因为 gcc？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T07:57:48.053

认为`array`作为`"%s"`。因此`printf`打印一个字符串。

```
ASCII 0x25: %
ASCII 115:  s 
```

也一样`array2`。我不确定为什么作者混合了十进制十六进制和八进制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T08:42:26.450

这个程序只是一种混淆的写法

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    char array[] = { '%', 's', '\0' };
    char array2[] = { 'D', 'a', 'v', 'i', 'd', ' ', ..., '\0' };

    printf(array, array2);
} 
```

由于 printf 期望格式为字符串，并且在这样的表达式中使用的数组名称被视为（“衰减”，尽管该术语不是官方标准术语）指向其第一个元素的指针，所以一切都是正确的。事实上，初始化等价于

```
char *array = "%s";
char *array2 = "David ..."; 
```

除了后者不可写（因为字符串文字在 C 中是只读的）。

不，将数组传递给 printf （到底在哪里？）不会*打印*它的地址。打印数组地址（或指针）只能使用`%p`转换说明符：

```
printf ("array/ptr address = %p\n", (void *)array); 
```

请注意，*需要*`(void *)`强制转换以避免未定义的行为。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:43:02.197

当您这样做时，您还期望什么`printf("%s", "David Gatwood rules!");` 正如您所写的，您有使用 c 的经验，您还应该看到指向 char 数组的指针，其中字符用作 c 字符串。*

# .net - Post Web 服务在本地运行良好，但不在服务器上

> ID：15172201
> 
> 赞同：0
> 
> 时间：2013-03-02T07:57:02.433
> 
> 标签：.net, wcf, bad-request

我创建了两个 WCF Web 服务。第一个服务是返回 JSON 字符串的获取服务，第二个服务是接受此 JSON 字符串作为输入并将这些数据存储在数据库中的后期服务。

这两项服务在本地工作正常，但是当我在服务器上上传我的代码时，第一个服务继续正常工作，但第二个服务，即发布服务，返回一个错误：

> 错误 400 错误请求。

据我所知，我在 Web.config 文件中遗漏了一些东西。

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <!--
    <add name="Conn" connectionString="Data Source=*.*.*.*;Initial Catalog=*;User ID=*;Password=*" providerName="System.Data.SqlClient" />
    <add name="connString" connectionString="Data Source=*.*.*.*;Initial Catalog=*;User ID=*;Password=*" providerName="System.Data.SqlClient" />
    -->
    <add name="Conn" connectionString="Data Source=*;Initial Catalog=SunshineDB;Integrated Security=True"/>
  </connectionStrings>
  <system.serviceModel>
    <bindings>
  <webHttpBinding>
    <binding name="NetTcpBinding_IClaims" 
                       closeTimeout="00:01:00" 
                       openTimeout="00:01:00" 
                       receiveTimeout="00:10:00" 
                       sendTimeout="00:01:00" 
                       transferMode="Buffered" 
                       hostNameComparisonMode="StrongWildcard" 
                       maxBufferPoolSize="2147483647" 
                       maxBufferSize="2147483647" 
                       maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" 
                        maxStringContentLength="2147483647" 
                        maxArrayLength="2147483647" 
                        maxBytesPerRead="2147483647" 
                        maxNameTableCharCount="16384"/>
          <security mode="None">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </webHttpBinding>
      <wsHttpBinding>
        <binding name="wsBufferedHttpsBinding" 
                 messageEncoding="Mtom"
                 maxReceivedMessageSize="11534336" 
                 maxBufferPoolSize="524288"
                 sendTimeout="00:05:00" 
                 receiveTimeout="00:05:00" 
                 openTimeout="00:05:00" 
                 closeTimeout="00:05:00" >
          <readerQuotas maxDepth="64" 
                        maxStringContentLength="11534336" 
                        maxArrayLength="11534336"
                        maxBytesPerRead="11534336" 
                        maxNameTableCharCount="16384" />
        </binding>
      </wsHttpBinding>
      <customBinding>
        <binding name="basicConfig">
          <binaryMessageEncoding/>
          <httpTransport transferMode="Streamed" 
                         maxReceivedMessageSize="67108864"/>
        </binding>
      </customBinding>
    </bindings>
    <services>
      <service name="SunShineServices.Service1">
        <endpoint address="" 
                  binding="webHttpBinding" 
                  behaviorConfiguration="EndBehave"
                  contract="SunShineServices.ISunShineServices">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="EndBehave">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:46:22.287

The difference could be the security settings, that you have no security locally but windows authentication on the server.

A combination of IE and NTLM would work for a http get, but give a bad request for a http POST.

Se this link: [http://blogs.msdn.com/b/asiatech/archive/2012/01/30/400-bad-request-when-posting-webservice-or-wcf-request-from-ie.aspx](http://blogs.msdn.com/b/asiatech/archive/2012/01/30/400-bad-request-when-posting-webservice-or-wcf-request-from-ie.aspx)

# c - 从c中的文件中读取字符串

> ID：15172209
> 
> 赞同：1
> 
> 时间：2013-03-02T07:57:52.917
> 
> 标签：c, string, file

我有一个这样的输入文件：

```
1 2 2 Medium 
1 2 0 Medium
2 1 0 Medium
2 0 2 Medium 
```

我正在使用 fscanf() 读取整数值，并且工作正常。有谁知道如何读取字符串并将其放入字符串变量中？？？

```
int x,y,z; 
char* cs; 
fscanf(fp3,"%d",&x); 
fscanf(fp3,"%d",&y); 
fscanf(fp3,"%d",&z); 
fscanf(fp3,"%s",&cs); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:21:23.617

您需要已经分配的空间来存储字符串。尝试这样的事情：

```
int x,y,z; 
char cs[20];
fscanf(fp3,"%d",&x); 
fscanf(fp3,"%d",&y); 
fscanf(fp3,"%d",&z); 
fscanf(fp3,"%19s",cs); 
```

您还可以一次扫描所有值：

```
fscanf(fp3,"%d %d %d %19s", &x, &y, &z, cs); 
```

注意：始终`%<length>s`在 scanf 模式中使用以防止缓冲区溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:27:22.770

2话想说：

1.  使用**一种**格式字符串时看起来更好
2.  你应该使用循环

这是一些代码：

```
int a,b,c;
char str[256];
while(fscanf(fd, "%d %d %d %s ", &a, &b, &c, str) == 4){
    //get some coffee
} 
```

这是标准而不是文件结束循环。此外，`str`不需要，`&`因为它已经是一个指针，不需要像`a`,`b`或`c`. 格式字符串末尾的空格，之后`%s`，意味着一旦读取一个空格，它将停止。这样它就不会包含在字符串中`str`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:53:38.017

注意两点：

*   您需要保留一个缓冲区来将字符串复制到其中。
*   也永远不要使用普通的“%s”scanf 模式。应该禁止。而是插入缓冲区的长度，在`%`和之间减去 1 `s`。例如，“%7s”表示 8 字节缓冲区。

# winapi - winapi上的触摸滚动

> ID：15172210
> 
> 赞同：1
> 
> 时间：2013-03-02T07:57:59.117
> 
> 标签：winapi, scroll, touch, hook, mouseevent

我想为纯 WinAPI 程序实现类似触摸滚动的行为。我已经花了几天了。

到目前为止，我尝试了几种方法。最成功的是使用 EnableWindow(hwnd, false) 禁用整个窗口，然后捕获所有鼠标事件并将它们分派给子级。我可以使用 GetCursorPos/GetTopWindow/GetNextWindow 找到所有孩子。但现在它只适用于按钮和其他简单的东西。EDIT 控件不会响应，因为它处于禁用状态（因为整个窗口都被禁用）。

我也试过 WM_PARENTNOTIFY。但这不起作用，因为当您收到此消息时，您无法阻止孩子立即收到它。对于触摸滚动，您需要它。

这令人沮丧。我认为唯一的选择是对鼠标消息进行一些低级拦截。能够将它们排队，然后在实际滚动发生时发送给子级或丢弃。但是如何做到这一点呢？我需要的是在它进入子树之前在主窗口中获取鼠标事件，并且如果我想进入子树，则能够在某些条件下停止此事件。

没有它我只能考虑使用键盘修饰符。因此，当用户按下 CONTROL（例如）时，整个窗口将被暂时禁用，所有鼠标事件都将进入滚动状态。但这是最后的手段。我希望有准确的“电话”行为，这样如果您按下鼠标按钮并在 100 毫秒内开始移动 - 它会滚动，如果在 100 毫秒内没有检测到移动，那么事件就会正常进行。

我的跨平台库需要这个，我希望它在包括 Windows XP 在内的所有平台上都能正常工作。

谢谢你。

# javascript - 是否可以在 javascript 中真正快速地连续刷新浏览器窗口 1000 次？

> ID：15172215
> 
> 赞同：-4
> 
> 时间：2013-03-02T07:58:31.287
> 
> 标签：javascript

我试过了，但似乎没有用。对于我正在做的事情，需要大量刷新，但不要太快以至于它会明显停止浏览器。

```
<script>

for (var i=0; i < 10000; i++)
{ 
     window.location.reload(); 
}           
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:28:17.203

不，那是不可能的，刷新完整的页面！由于它在刷新时丢失了状态，因此进入无限循环，是的，您可以使用 ajax 调用刷新页面的特定部分。

`Truly speaking don't know why someone need to do this`.

# sql - postgres 中的聚合

> ID：15172217
> 
> 赞同：1
> 
> 时间：2013-03-02T07:58:39.290
> 
> 标签：sql, postgresql, postgresql-9.1, postgresql-9.2

我在 postgres 中有 3 个表，其中包含以下形式的信息：

```
<id, column1, column2, column3> 
```

现在我打算根据 id 聚合这 3 个表，这样所有具有相同 id 的行一起出现。在具有 3 个表的 postgres 中执行此操作是否可行。我还打算将集群 ID 存储在单独的文本文件中。

我知道如何用 1 个表进行聚类..但我不知道如何在 postgres 中用 3 个表进行聚类。另外我不确定我们是否可以将聚合的行放入文件中。我用“postgres 将聚合行放入文本文件”之类的关键字进行了谷歌搜索，但没有得到适当的结果。

有人可以帮我解决这个问题。我也是postgres的新手，所以请原谅。

例如我的输入是：

```
 #@<id1> <moon> <diamter> <x>
 #@<id1> <moon> <closest_to> earth> 
```

现在我想做以下事情：

```
 #@<id1> <moon> <diameter> <x>, <moon> <closest_to> <earth> 
```

那就是我想 GROUPBY id 并将上述按结果分组的结果存储在一个文件中。在postgres中这样做是否可行。如果是..那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:44:02.097

如果您想从三个表中获取所有值，但不知道每个 id 有多少行，您可以`UNION`：

```
 SELECT id, col1, col2, col3
    FROM tab1
    UNION
    SELECT id, col1, col2, col3
    FROM tab2
    UNION
    SELECT id, col1, col2, col3
    FROM tab3 
```

有了它，您可以使用`string_agg`连接结果并几乎读取到您的文件：

```
SELECT id, string_agg(col1 || ' ' || col2 || ' ' || col3, ', ')
FROM (
        SELECT id, col1, col2, col3
        FROM tab1
        UNION
        SELECT id, col1, col2, col3
        FROM tab2
        UNION
        SELECT id, col1, col2, col3
        FROM tab3
) AS tbls
GROUP BY id; 
```

至少，您可以将结果复制到文件中。基本上有两种方法。第一个是从您的应用程序中执行此操作，这很好，因为它很容易发送给用户（有用户吗？）。另一种是使用`COPY`命令，它的问题是它将结果保存在数据库服务器上，并且`postgres`SO 的用户应该有权在所需的路径上写入（或者您可以使用 psql`\copy`或您的应用程序包装权限）。

该副本将类似于：

```
COPY (
    SELECT '#@' || id || ' ' || string_agg(col1 || ' ' || col2 || ' ' || col3, ', ')
    FROM (
            SELECT id, col1, col2, col3
            FROM tab1
            UNION
            SELECT id, col1, col2, col3
            FROM tab2
            UNION
            SELECT id, col1, col2, col3
            FROM tab3
    ) AS tbls
    GROUP BY id
) TO '/tmp/yourfile.txt'; 
```

OBS：请注意，我使用了`UNION`，这将使表之间的重复值被抑制。如果您不希望这样或没有重复值（肯定） ，请`UNION ALL`改用（这也具有更好的性能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:30:19.113

你可以`join`把桌子放在一起：

```
select  coalesce(t1.id,t2.id,t3.id) as id
,       t1.col1
,       t1.col2
,       t2.col3
,       t3.col4
from    Table1 t1
full outer join
        Table2 t2
on      t1.id = t2.id
full outer join
        Table3 t3
on      t3.id = coalesce(t1.id, t2.id) 
```

至于写入文件，看起来 Postgres 的[COPY](http://www.postgresql.org/docs/current/static/sql-copy.html)命令可以做到这一点。您可能必须将查询结果存储在表中。

# jquery - 谷歌地图类型错误与 jquery

> ID：15172219
> 
> 赞同：1
> 
> 时间：2013-03-02T07:58:48.167
> 
> 标签：jquery, google-maps-api-3

我的地图出现类型错误

```
TypeError: google is undefined
var marker = new google.maps.Marker( 
line:280 
```

和

```
TypeError: google is undefined
... new google.maps.LatLng(
line:270 
```

好像我失去了范围？我在 jquery 之外进行初始化，但我想调用一个在 jquery 代码中创建这些对象的函数。

有什么建议么？

[http://jareddlc.com/map.php](http://jareddlc.com/map.php)

要触发案例，请在框中输入城市并单击提交。确保您已启用控制台，因为我通过 console.log 输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:50:11.170

您可以在多个地方创建“语言环境”谷歌变量：

第 78 行和第 289 行：

```
var windows=0,osx=0,linux=0,hotmail=0,yahoomail=0,gmail=0,bing=0,yahoo=0, google=0 
//------------ -------------------------------------------------- ---------^
```

第 101 行：

```
google += 1; 
```

为这些局部变量使用不同的名称，或者在需要时通过前置显式引用全局 google 变量`window.`，例如：

```
新窗口。google.maps.Marker(/*....*/);
```

# java - 从方法返回一个数组（似乎不起作用）

> ID：15172220
> 
> 赞同：0
> 
> 时间：2013-03-02T07:59:01.433
> 
> 标签：java, methods

导入 java.util.*；

公共类 test2 {

```
public static void main(String[] args){
int[] list = {1,2,3,4,5,6,7};
int[] list2 = reverse(list);
 System.out.print(list2);
}

public static int[] reverse(int[] list){
    int[] result = new int[list.length];

    for(int i=0, j=list.length-1; i<list.length; i++,j--){
        result[j] = list[i];}

    return result;  }

} 
```

这是我教科书中的代码。但是当我打印 list2 时，它显示了这个奇怪的消息：[I@7b963273 我不知道代码有什么问题。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:00:23.020

原始类型数组本身就是一个对象。当您使用 System.out.print() 打印它时，它会调用Object 类的[toString()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Object.java#Object.toString%28%29)方法。在 Object 类中是这样定义的：

```
public String  toString() {
        return getClass().getName() + "@" + Integer.toHexString(hashCode());
    } 
```

打印您使用的返回数组：

```
System.out.println(Arrays.toString(list2)); 
```

**编辑**
如果你想从方法返回一个数组，你应该完全按照你在代码中的做法。

> 假设“合并”是一种方法，而 arr1 和 arr2 是数组，那么您可以这样做：

```
public static int[] merge(int arr1[], int arr2[])
{
  int[] result = new int[arr1.length + arr2.length];
  int counter = 0 ;
  for ( int i =0 ;i < result.length ; i++)
  {
    if ( i >= arr1.length)
    {
      result[i] = arr2[counter++];
    }
    else
    {
      result[i] = arr1[i];
    }
  }
 return result;
} 
```

然后您可以将合并打印为：

```
System.out.println(Arrays.toString(merge(arr1,arr2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:00:57.390

您`toString()`直接在数组上调用（隐式）。数组不会覆盖`toString()`，因此您可以[从以下位置获取默认实现`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)：

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

因此，在您的输出中，该`[I`部分是`int[]`类的“名称”（打印`int[].class.getName()`，它将显示相同的内容），数字是十六进制数组的哈希码。（这又没有被覆盖 - 它没有考虑 tha 数组的内容。）

这与数组的来源无关 - 如果您调用以下命令，您将获得相同类型的输出（具有不同的数字）：

```
System.out.print(list); 
```

通话前`reverse`。

你应该使用[`Arrays.toString(int\[\])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)：

```
System.out.println(Arrays.toString(list2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:01:12.583

`System.out.println(list2);`调用`Object#toString()`返回组合的方法`Classname+@+Hex_Number_Of_Hashcode`。

你必须使用重载[`Arrays.toString(list2)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)；打印数组的字符串表示形式。

# c - 分叉的进程执行睡眠

> ID：15172221
> 
> 赞同：0
> 
> 时间：2013-03-02T07:59:02.313
> 
> 标签：c, unix, signals, fork, parent-child

我有一个程序在整个程序的各个检查点之间同时顺序和并行执行相同的代码。为此，初始程序派生出一个顺序运行的子进程，而父进程并行运行。无论哪个进程首先到达下一个检查点，然后终止另一个进程，并重复此过程直到执行结束，从而尽可能快地执行（忽略分叉和复制开销）。

我已经实现了这一点，当只有顺序执行最快或只有并行执行最快时一切正常，但是当前几个部分并行执行最快，然后接下来的几个部分按顺序执行最快时，程序会在两个进程都处于休眠状态时停止。我看不出是什么原因造成的。我是否达到了对分叉进程施加的一些限制？杀死父进程是否会影响分叉子进程的执行，反之亦然？

下面的代码给出了我的函数`checkPoint()`，该函数在每个检查点执行，一些自定义代码处理最后一部分的末尾。并行代码是使用 OpenMP 实现的，顺序代码永远不会遇到 OpenMP pragma 语句。

```
pid_t parent = 0;
pid_t child = 0;

void checkPoint() {

    if (parent == 0) {

        // First Time
        parent = getpid();

    } else if (child == 0) {

        // Child Process
        kill(parent, SIGKILL);
        parent = getpid();

    } else {

        // Parent Process
        kill(child, SIGKILL);

    }

    child = fork();

} 
```

谢谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:38:00.483

事实证明，这是使用 gcc、OpenMP 和 forks 时出现的错误。

取自[http://bisqwit.iki.fi/story/howto/openmp/#OpenmpAndFork](http://bisqwit.iki.fi/story/howto/openmp/#OpenmpAndFork)

> 如果您的程序打算使用 daemonize() 或其他类似方式成为后台进程，则不得在 fork 之前使用 OpenMP 功能。使用 OpenMP 功能后，仅当子进程不使用 OpenMP 功能或作为全新进程（例如在 exec() 之后）使用时才允许分叉。

# android - p2p连接参数

> ID：15172223
> 
> 赞同：1
> 
> 时间：2013-03-02T07:59:25.073
> 
> 标签：android, android-wifi, wifimanager

以下是与已发现的 P2P 对等体的开始 P2P 组形成。这包括可选的组所有者协商、组接口设置、配置和建立数据连接。

```
p2p_connect <peer device address> <pbc|pin|PIN#> [label|display|keypad
[persistent] [join|auth] [go_intent=<0..15>] [freq=<in MHz>] 
```

该参数指定 WPS 配置方法。

我想在 android.net.wifi.p2p 中达到这个规范 我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:18:38.090

安卓源代码可以在这里找到：

[https://android.googlesource.com/platform/frameworks/base/](https://android.googlesource.com/platform/frameworks/base/)

您正在寻找的包似乎位于 wifi.p2p （所以没有 android.net 前缀）。

# javascript - 如何仅显示 foreach 循环绑定中的第一个元素？

> ID：15172234
> 
> 赞同：6
> 
> 时间：2013-03-02T08:01:07.283
> 
> 标签：javascript, jquery, knockout.js

我正在使用淘汰赛-2.2.0.js。我在 observableArray 上创建了一个 foreach 循环绑定，我只想显示数组中的第一个元素。为此，我尝试了：（均无效）

第一的

```
 <!-- ko foreach: myArray -->
          <span data-bind="text: $data, visible: $index == 0"></span>
        <!-- /ko --> 
```

第二

```
 <span data-bind="text: myArray[0]"></span> 
```

我知道有一个`_destroy`属性，如果在任何数组元素上设置而不是该元素，则该属性将从 UI 中的 foreach 循环绑定中排除。但我不想在我的情况下使用它。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T08:27:32.673

你在正确的轨道上。但是你忘了`()`在你的两个例子中都给出。

`myArray`一个可观察的数组并且`$index`是一个可观察的，因此它们是函数，因此您需要将它们作为函数调用，`()`以在表达式中获取它们的值。

所以正确的绑定是：

```
<!-- ko foreach: myArray -->
    <span data-bind="text: $data, visible: $index() == 0"></span>
<!-- /ko --> 
```

和

```
<span data-bind="text: myArray()[0]"></span> 
```

演示[JSFiddle](http://jsfiddle.net/mTkyX/)。

注意：如果你真的只想显示第一个项目，那么你应该更喜欢这个`text: myArray()[0]`版本，因为它在那里你想要做的事情更清晰。

# ruby-on-rails-3 - Redmine 检索文件

> ID：15172240
> 
> 赞同：0
> 
> 时间：2013-03-02T08:01:26.520
> 
> 标签：ruby-on-rails-3, git, redmine

我在`http://redmine.pcwallpapergirl.com`

我会告诉我到底做了什么..

1.  连接到 ssh

2.  为项目创建了一个目录（home/account/public_html/somefolder/projectname/）

3.  使用这个命令我从 github 下载项目

    混帐克隆（网址）

4.  登录 redmine.mydomain.com

5.  创建了一个名为 transload 的项目，在设置>存储库中我选择了 SCM git 并指定了项目绝对路径

6.  为项目添加用户

7.  ??

现在我想从事那个项目并想对这些文件进行更改..我想使用哪个软件..相信我，我花了超过 8 个小时试图弄清楚 redmine.. 还有一个我必须使用哪个链接给检索文件我的意思是存储库的 url

我试过了

> [http://redmine.mydomain.coom/svn/projectname](http://redmine.mydomain.coom/svn/projectname) ,
> 
> [http://redmine.mydomain.coom/projectname/svn](http://redmine.mydomain.coom/projectname/svn)

他们都没有工作......请纠正我我认为redmine是一个项目管理，我们可以上传我们的本地文件并跟踪我们按日期，花费时间，diff通过使用像乌龟这样的SVN工具所做的所有更改......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:26:32.913

您的问题有点难以理解，但我会尽力提供帮助。我目前在我的工作地点使用 Redmine 进行各种实施。

您是正确的，Redmine 可以用作项目管理工具，是的，您可以上传文件等。就我个人而言，我认为您最好使用[TortoiseSVN](http://tortoisesvn.net/)（或类似的）作为您的版本控制系统，并且只使用 Redmine 来跟踪错误、新功能、客户投诉等，即为各种项目创建票证，您的团队可以在这些票证上进行协作。

创建 wiki 以支持您的各种项目也很方便。

如果您真的想使用 Redmine 作为存储库的接口，也许这会有所帮助。

[http://www.redmine.org/projects/redmine/wiki/HowTo_Automate_repository_creation](http://www.redmine.org/projects/redmine/wiki/HowTo_Automate_repository_creation)

[http://www.redmine.org/projects/redmine/wiki/HowTo_to_handle_SVN_repositories_creation_and_access_control_with_Redmine](http://www.redmine.org/projects/redmine/wiki/HowTo_to_handle_SVN_repositories_creation_and_access_control_with_Redmine)

我个人建议使用[TortoiseSVN](http://tortoisesvn.net/)。它的伟大软件和广泛支持。

# java - 在 Tomcat6 中将类导入 JSP

> ID：15172244
> 
> 赞同：0
> 
> 时间：2013-03-02T08:01:56.233
> 
> 标签：java, jsp, tomcat, import

我正在处理一项要求在 Tomcat6 服务器上实现 webapps 的任务

在jsp文件中

```
<%@ 
page language = "java" 
import = "org.me.webapps.Bookstore.TitlesBean, java.util.*" 
session = "true"
%>
<!-- begin document -->
<html xmlns = "http://www.w3.org/1999/xhtml">

<body>
<%-- begin JSP scriptlet to create list of books --%>
<%
  TitlesBean titlesBean = new TitlesBean();
  List titles = titlesBean.getTitles();
  BookBean currentBook;

  // store titles in session for further use
  session.setAttribute( "titles", titles );

 .... 
```

我已经运行了 ant build，它在 /WEB-INF/classes/org/me/webapps/bookstore/ 下生成 TitlesBean.class 文件

但是，当我浏览 jsp 页面时，出现如下错误，看起来服务器找不到或导入 .class 文件

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 6 in the generated java file
Only a type can be imported. org.me.webapps.bookstore.TitlesBean resolves to a package

An error occurred at line: 32 in the jsp file: /war/books2.jsp
TitlesBean cannot be resolved to a type
29:       
30:    <%-- begin JSP scriptlet to create list of books --%>
31:    <%
32:       TitlesBean titlesBean = new TitlesBean();
33:       List titles = titlesBean.getTitles();
34:       BookBean currentBook;
..... 
```

TitlesBean.java

```
// TitlesBean.java
// Class TitlesBean makes a database connection and retrieves
// the books from the database.
package org.me.webapps.bookstore;

// Java core packages
import java.io.*;
import java.sql.*;
import java.util.*;
import java.net.*;

public class TitlesBean implements Serializable {
private static final long serialVersionUID = 6723471178342776147L;
private Connection connection;
private PreparedStatement titlesQuery;

// construct TitlesBean object
public TitlesBean() {
    // attempt database connection and setup SQL statements
    try {
        URL myUrl = getClass().getResource("TitlesBean.class");

        System.out.println(getDatabasePath(myUrl.toString()));

        Class.forName("org.hsqldb.jdbcDriver");
        connection = DriverManager.getConnection( "jdbc:hsqldb:hsql://localhost/bookdb", "sa", "" );

        titlesQuery = connection
                .prepareStatement("SELECT isbn, title, editionNumber, "
                        + "copyright, publisherID, imageFile, price "
                        + "FROM titles ORDER BY title");
    }

    // process exceptions during database setup
    catch (SQLException sqlException) {
        sqlException.printStackTrace();
    }

    // process problems locating data source
    catch (Exception exception) {
        exception.printStackTrace();
    }
}

// return a List of BookBeans
public List<BookBean> getTitles() {
    List<BookBean> titlesList = new ArrayList<BookBean>();

    // obtain list of titles
    try {
        ResultSet results = titlesQuery.executeQuery();

        // get row data
        while (results.next()) {
            BookBean book = new BookBean();

            book.setISBN(results.getString("isbn"));
            book.setTitle(results.getString("title"));
            book.setEditionNumber(results.getInt("editionNumber"));
            book.setCopyright(results.getString("copyright"));
            book.setPublisherID(results.getInt("publisherID"));
            book.setImageFile(results.getString("imageFile"));
            book.setPrice(results.getDouble("price"));

            titlesList.add(book);
        }
    } catch (SQLException exception) {
        exception.printStackTrace();
    }

    return titlesList;
}

private String getDatabasePath(String classPath) {
    String path = "";
    String crtToken;

    StringTokenizer tokens = new StringTokenizer(classPath, "/");
    int num = tokens.countTokens();
    tokens.nextToken();

    for (int i = 1; i < num; i++) {
        crtToken = tokens.nextToken();
        if (crtToken.equals("classes")) {
            break;
        }
        path = path + crtToken + "\\";
    }

    return path;
}

// close statements and terminate database connection
protected void finalize() {
    // attempt to close database connection
    try {
        connection.close();
    }

    // process SQLException on close operation
    catch (SQLException sqlException) {
        sqlException.printStackTrace();
    }
}
} 
```

tomcat 的设置应该没问题，因为我可以运行一些带有循环或条件的简单 jsp 文件，只要它们不需要导入。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:03:10.353

`TitlesBean`位于 `org.me.webapps.bookstore`您的 jsp 导入处，您已将其声明为`org.me.webapps.Bookstore.TitlesBean`，您的 jsp 导入声明中有一个大写字母 B。像这样声明它

```
<%@ 
      page language = "java" 
      import = "org.me.webapps.bookstore.TitlesBean, java.util.*" 
      session = "true"
%> 
```

# android - View Android 上的错误处理触摸

> ID：15172248
> 
> 赞同：0
> 
> 时间：2013-03-02T08:02:11.737
> 
> 标签：android, android-view

我使用Bitmap绘制菜单图片，当我尝试使用TouchEvent在我的MenuLoading Activity中加载另一个Activity时它不起作用。

请问有人能解决这个问题吗？提前谢谢你。

这是我使用的代码：

菜单视图：

```
public class MenuView extends View{
    private Bitmap menu;
    boolean result = false;

    public MenuView(Context context) {
        super(context);
        menu = BitmapFactory.decodeResource(getResources(), R.drawable.menu2);
  }
  @Override
  protected void onDraw(Canvas canvas) {
      canvas.drawBitmap(menu, 0, 0, null);
  }

  @Override
  public boolean onTouchEvent(MotionEvent ev) {
      switch (ev.getAction()) {
      case MotionEvent.ACTION_DOWN: {
          // Code on finger down
          float posX = ev.getX();
          float posY = ev.getY();
          float x1 = 296, x2 = 528, y1 = 246, y2 = 304;
          if ((posX >= x1 && posX <= x2) && (posY >= y1 && posY <= y2)) {
              // we are in the square
              result = true;
          }
          else {
              // we are somewhere else
          }
          break;
      }
      case MotionEvent.ACTION_UP: {
          // Code on finger up
          break;
      }
      case MotionEvent.ACTION_MOVE: {
          // Code on finger move
          break;
      }
      }
      invalidate();
      return result;
  }
} 
```

和 MenuLoading 活动：

```
public class MenuLoading extends Activity {
    MenuView View;
     @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            View = new MenuView(this);
            setContentView(View);
            if (View.result == true){
                Intent i = new Intent (this, GameLoading.class);
                startActivity(i);
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:20:57.827

将此代码放在以下代码中是没有意义的`onCreate`：

```
if (View.result == true){
            Intent i = new Intent (this, GameLoading.class);
            startActivity(i);
} 
```

在事件处理程序中移动它：

```
// we are in the square
Intent i = new Intent (getContext(), GameLoading.class);
((Activity)getContext()).startActivity(i);
return true; 
```

# javascript - JavaScript 原型属性和原型链接

> ID：15172249
> 
> 赞同：2
> 
> 时间：2013-03-02T08:02:21.433
> 
> 标签：javascript, jquery, prototype, prototypal-inheritance

我了解 JavaScript 原型。但是对原型属性和隐藏原型链接之间的区别感到困惑。对象原型链接和函数原型链接之间还有区别吗？

有人可以提供一个非常基本的示例来演示相同的内容（主要是原型链接/链接......就像它如何根据对象原型链接和函数原型链接查找属性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:22:23.137

文档对象模型（DOM）是 JavaScript 中继承的一个很好的例子。

想象一下你有一个`div`. 它是 的一个实例`HTMLDivElement`。

```
var div = document.createElement('div');

div instanceof HTMLDivElement; // -> true

div instanceof HTMLElement; // -> true

div instanceof Element; // -> true

div instanceof Object; // -> true 
```

`div`是一个*对象*，包括 . 中的所有方法和属性`HTMLDivElement.prototype`。它在`__proto___`财产之下，但这并不意味着您应该`div.__proto__.insertBefore`访问`insertBefore`. 这就像其他语言中的包含。

换句话说`div.__proto__`就是指向`HTMLDivElement.prototype`。

`prototype`是一个对象。因此，它可以拥有自己的`__proto__`指针。在这种情况下`HTMLDivElement`'s`prototype`是一个 Object 并且有 a`__proto__`指向`HTMLElement.prototype`，因此它包括所有方法和属性。它沿着这条路走，直到`Object.prototype`没有`__proto__`指针和查找桩。

我试图避免使用`new`关键字来解释这一点。我希望它有帮助...

# ssh - ssh的标准错误和标准输出？

> ID：15172250
> 
> 赞同：2
> 
> 时间：2013-03-02T08:02:27.827
> 
> 标签：ssh, expect, output

如果我执行say，我不清楚ssh的stdout和stderr：

ssh user@remotemachine_ip "some command" 我立即在屏幕上得到输出或者可能是一些错误

1.用ssh登录

2.远程命令在远程机器上执行

3.输出显示在我可以看到的远程机器（stderr 或 stdout）上。然后它回到本地机器。

或者

输出返回到本地机器的标准输出，可以附加到本地机器上的文件中。

所以如果我在本地机器上有一个 for 循环

```
for i in ip1 ip2
do
ssh user@remotemachine_ip  "some command" 
done 
```

错误重定向的最佳方法是什么，它是否依赖于 for、while、until 循环

如果我使用一些期望脚本而不是 ssh 怎么办

`expectscript.exp user@remotemachine_ip "some command"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:10:37.053

```
for ip in ip1 ip2
do
  ssh user@$ip "some command" > output.$ip 2>&1
done 
```

将为每个 IP 将输出放在单独的文件中。

```
for ip in ip1 ip2
do
  ssh user@$ip "some command"
done > output 2>&1 
```

将所有输出放在一个文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T08:11:59.827

`SSH`是一种协议，可让您像登录本地机器一样登录远程机器。

在本地机器上，如果你运行一个登录 shell（比如其中一个 `Ctrl + Alt + F1~6`），它会为用户启动一个新的 shell，并且输出（`stdout`和`stderr`）会直接出现在你的监视器上。

现在让我们看一下您的 SSH 案例，步骤与上次相似，只有一个区别，服务器不是将输出（再次`stdout`和`stderr`）发送到监视器，而是将数据发送回您登录的机器 -到`SSH client`. 客户端在您的本地机器上运行，因此只在本地机器的监视器上显示相同的输出。

但是，如果您要将`stdout`和/或重定向`stderr`到一个文件，当您在远程机器上的 shell 中时，该文件将在远程机器上，因为您正在运行的实际程序是在远程机器上执行的机器。

顺便说一句`SSH`，不仅仅是向远程机器发送/接收数据，它还加密数据等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-08T04:41:54.513

> 错误重定向的最佳方法是什么

如果我只关注 stderr 重定向，则以下可能是解决方案之一：

```
for ip in ip1 ip2
do
  ssh user@$ip "some command" >output.$ip 2>output.$ip.err
done 
```

ssh 看起来支持远程标准输出到本地标准输出和远程标准错误到本地标准错误，这样上面的脚本就可以按我的预期运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-11T21:50:47.473

如果你把

```
ssh user@$ip "some command" >output.$ip 2>output.$ip.err 
```

在**期望**脚本中，重定向`stdout`和`stderr`将被忽略（**期望**将拦截重定向的输出。在**期望**脚本中，您可以添加**log_user 0**并使用重定向调用脚本，`stdout`这将起作用（尽管`stderr`无处可去）

# c - 从多个 .c 文件生成多个 .so 和 .o 文件

> ID：15172251
> 
> 赞同：1
> 
> 时间：2013-03-02T08:02:31.263
> 
> 标签：c, makefile

我正在尝试将我的[程序](https://github.com/facetoe/terminote2)转换为使用插件，但我在使用 Makefile 时遇到了一些问题。我希望 Makefile 在目录插件中查找，编译在那里找到的所有具有两个不同扩展名 .so 和 .o 的 .c 文件，最好将其编译到一个单独的文件夹中。基本上和这个一样：

```
gcc -shared -lc -o testPugin.so testPugin.o
gcc -c -fpic testPugin.c 
gcc Cprogram.c -ldl 
```

但是对于不确定数量的 .c 文件。

到目前为止，我已经设法查看插件目录并找到所有文件，但我坚持按照上面的第二步编译它们并输出 .so 和 .o 文件。这是我到目前为止所拥有的：

```
TOP := $(dir $(lastword $(CURDIR)))
PLUGDIR = $(TOP)src/plugins
PLUGSRC = $(PLUGDIR)/*.c
OBJ = $(PLUGSRC:.c=.o)
SRCS = Cprogram.c 
CFLAGS = -shared -lc
BINARY = testProg

$(BINARY): $(SRCS)
    echo $(OBJ) 
```

但这只是输出：

```
⇒ make
echo /Users/fragmachine/eclipse-workspace/Cprogram/src/plugins/*.o
/Users/fragmachine/eclipse-workspace/Cprogram/src/plugins/*.o 
```

如果我`OBJ = $(PLUGSRC:.c=.o)`改为`OBJ = $(SRCS:.c=.o)`我得到：

```
⇒ make
echo Cprogram.o
Cprogram.o 
```

这是我想要的，但它只适用于一个文件。我想我一定是缺少某种通配符，但我尝试使用 % 和 * 却没有运气。

如果不清楚我要做什么，这里有一些奇怪的 make 伪代码：

```
$(BINARY): $(SRCS)
  gcc -shared -lc $(All plugin.c files) -o $(OBJ) #Output .o files for each plugin.c file
  gcc -shared -lc $(All plugin.c files) -o $(OBJ2) #Output .so files for each plugin.c file
  gcc -c -fpic $(All plugin.c files) # I'm not 100% sure what this does
  gcc Cprogram.c -ldl # Compile the main program 
```

我根本没有太多经验`make`。我以前只做过非常简单的，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:19:15.843

这里有一些让你开始的东西：

```
PLUGDIR = src/plugins
PLUGSRC = $(PLUGDIR)/*.c
SRCS = $(wildcard $(PLUGSRC))
OBJ = $(SRCS:.c=.o)
SOBJ = $(SRCS:.c=.so)
CFLAGS = -shared -lc
BINARY = testProg

all: $(BINARY)
    @echo "make is fun!"

$(BINARY): $(OBJ) $(SOBJ)
    @echo "build the binary $@ which depends on $^"

%.o: $(SRCS)
    @echo $@

%.so: $(SRCS)
    @echo $@ 
```

首先，这使用 $(wildcard) 函数来收集 src/plugins 目录中的所有 *.c 名称。

其次，这使用了一个依赖于所有 .o 文件和 .so 文件的目标。

第三，从 .c 文件构建 .so 和 .o 文件有两个模式规则。

第四，您的源路径使用了 $(TOP)src/plugins，但您正在构建 $(TOP)，因此这不是正确的相对路径……您只需要 src/plugins。

所以当你运行它时，输出是（假设有一个名为 src/plugins/Cprogram.c 的文件）：

```
$ make
src/plugins/Cprogram.o
src/plugins/Cprogram.so
build the binary testProg which depends on src/plugins/Cprogram.o src/plugins/Cprogram.so
make is fun! 
```

希望从这里你应该能够弄清楚其余的。

有关更多信息，请参阅我的项目模板： [https ://github.com/cdesjardins/makefiles](https://github.com/cdesjardins/makefiles)

每当我开始一个新项目时，我都会使用该 repo 作为起点。

# c++ - 为什么浮点数不被视为整数类型？

> ID：15172253
> 
> 赞同：6
> 
> 时间：2013-03-02T08:03:09.967
> 
> 标签：c++, templates, typetraits

我正在监视`type_traits`，并且偶然发现了一个事实，即`float`它不被认为是一个整数类型。这对我来说有点意外。

我浏览了网络以找到适当的信息，但找不到与该事实有关的任何信息。我能找到的是[这样](http://en.cppreference.com/w/cpp/types/is_integral)的：

> 如果 T 是整数类型（bool、char、char16_t、char32_t、wchar_t、short、int、long、long long，包括任何有符号、无符号和 cv 限定的变体），则提供等于 true 的成员常量值。对于任何其他类型，值为 false。

所以这里的问题是：为什么 C++ 标准委员会决定 float**不是**整数类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T08:04:21.040

整数类型是只有整数的类型 - 整数。浮点类型的目的也是表示非整数。

从[关于整数（计算机科学）的维基百科页面](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)：

> 在计算机科学中，整数是整数数据类型的数据，表示数学整数的某个有限子集的数据类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T08:07:53.410

我怀疑你的困惑是*积分*的含义是什么：

> 积分的定义
> 
> 1 a：对完整性至关重要：构成“课程的组成部分”
> 
> b (1) :**存在、包含或与一个或多个数学整数**有关 (2) : 与数学积分或数学积分的结果有关或有关

它不是（1a）对完整性（这`float`将是）必不可少的，而是（1b）与整数有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-02T08:47:34.463

Jon 的回答是正确的，但这里简要概述了*一些可能对您有所帮助的* [类型特征](http://en.cppreference.com/w/cpp/types)：

*   `is_integral`检查类型是否为整型
*   `is_floating_point`检查类型是否为浮点类型
*   [`is_arithmetic`](http://en.cppreference.com/w/cpp/types/is_arithmetic)检查类型是整数类型还是浮点类型

这是 Howard [Hinnant](http://home.roadrunner.com/~hinnant/TypeHiearchy.pdf)的一个很好的图表，它显示了类型类别之间的关系。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-07T17:08:21.370

这些是整数类型，因为在 c++ 中存储整数类型或字符时，它以整数格式存储（甚至字符，即 ASCII 格式）。但是浮点数不是这样存储的，我们没有任何方法可以将浮点数转换为二进制格式

# form-submit - 一键提交两张表格

> ID：15172254
> 
> 赞同：2
> 
> 时间：2013-03-02T08:03:13.557
> 
> 标签：form-submit

如何一键提交两份表格？我的网页中有两种形式：其中一种显示出来并有一个提交按钮。另一个是隐藏的。如下所示：

```
<form id="form1" action="/url1" method="post">
  ...
  <input type="submit" value="Submit">
</form>

<!-- Hidden form -->
<form id="form2" action="/url2" method="post">
  <input type="hidden" ...>
  <input type="hidden" ...>
  ...
</form> 
```

如何仅通过单击第一个表单中的按钮来提交它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:45:57.350

您必须使用 jQuery 或普通的 JavaScript。这是一个工作示例：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#submitButton").click(function () {
                $.post($("#form1").attr("action"), $("#form1").serialize(),
                  function () {
                      alert('Form 1 submitted');
                  });

                $.post($("#form2").attr("action"), $("#form1").serialize(),
                  function () {
                      alert('Form 2 submitted');
                  });
            });
        });
    </script>
</head>
<body>
    <form id="form1" action="PostPage1.aspx" method="post">
        <input type="button" id="submitButton" value="Submit" />
    </form>

    <!-- Hidden form -->
    <form id="form2" action="PostPage2.aspx" method="post">
        <input type="hidden" id="data1" value="testing1" />
        <input type="hidden" id="data2" value="testing2" />
    </form>
</body>
</html> 
```

# winsock - winsock recv 数据块

> ID：15172255
> 
> 赞同：0
> 
> 时间：2013-03-02T08:03:17.130
> 
> 标签：winsock, recv

我用 C# 编写了一个 Tcp 客户端，用 C++ 编写了一个 Tcp 服务器在 TCP 服务器端，我通过循环接收数据：

```
unsigned char* buffer = new unsigned char[BUFFERSIZE];
   int pLen =0;
   int recievedLen = 0;
   do{
          recievedLen = OnReadData(0, clientSock,buffer,&pLen,1000);
          printBytes(buffer,recievedLen);
   }while(recievedLen>0); 
```

在 TCP 客户端，我发送一些数据并收到响应：

```
 private void Send(string data)
    {
        NetworkStream stream = tcpClient.GetStream();
        byte[] writeBuffer = Encoding.ASCII.GetBytes(data);
        stream.Write(writeBuffer, 0, writeBuffer.Length);
        Console.WriteLine("写入数据:" + Encoding.ASCII.GetString(writeBuffer));
    }

    private void Receive()
    {
        NetworkStream stream = tcpClient.GetStream();
        var readBuffer = new byte[2048];
        while (!stream.DataAvailable)
        {
            Thread.Sleep(1);
        }

        int writeCount = stream.Read(readBuffer, 0, readBuffer.Length);
        String content = Encoding.ASCII.GetString(readBuffer, 0, writeCount);
        Console.WriteLine("读取数据:" + content);
    } 
```

Q：当我只是在TCP Client 端发送数据而不调用Recieve 数据时，TCP Server 端接收数据的循环可以和谐的完成。但是当在 TCP Client 端调用 Send 函数然后调用 Receive 函数时，TCP Server 端的**recv**函数会在第二次被阻塞（预期结果是接收 0 字节）。任何人都可以解释一下吗？谢谢

# windows - 免费的 Windows 64 位 C++11 编译器

> ID：15172256
> 
> 赞同：4
> 
> 时间：2013-03-02T08:03:25.587
> 
> 标签：windows, visual-c++, c++11, 64-bit, mingw

我正在寻找一个免费的编译器，它可以从使用某些 C++11 功能的代码生成 64 位 Windows 二进制文件。

Visual C++ Express 不附带 64 位编译器。经典的解决方法是下载 Windows SDK。但是，SDK 7 似乎与不支持 C++11 的 Visual C++ 2010 是同时代的，并且 SDK 8 表示它不再包含编译器。我的印象是微软基本上不再提供免费的 64 位 C++ 编译器。这个对吗？

有 64 位版本的 MinGW，虽然我觉得它们落后于最新的 GCC；最新的可用版本是什么？

还有其他我忽略的选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T08:20:07.517

所有免费提供的主流编译器都能满足你的需求：

*   VS 2012 Desktop Express 附带一个 x64 编译器。
*   Mingw 是开源的，而且很容易构建。因此，如果您找不到满足您需求的二进制发行版，您可以随心所欲地更新。
*   Clang 也是开源的，我上面对 Mingw 所说的同样适用。

# opencv - 冲浪算法应用后opencv的vido流性能低

> ID：15172259
> 
> 赞同：0
> 
> 时间：2013-03-02T08:03:38.327
> 
> 标签：opencv, camera, object-detection

我已经应用了 SURF 算法来检测相机流上的对象。但是，我注意到流媒体有点慢。当我使用 windows API`GetTickCount()`时，我发现这两条指令

```
detector.detect( image, kp_image );
extractor.compute( image, kp_image, des_image ); 
```

每帧耗时近 1200 毫秒。

有没有办法解决这样的问题？提前致谢

这是整个代码：

```
#include "stdafx.h"
#include <windows.h>
#include <stdio.h>
#include <iostream>
#include <fstream>
#include <string>
#include "opencv2/core/core.hpp"
#include "opencv2/nonfree/features2d.hpp"
#include "opencv2/features2d/features2d.hpp"
//#include "opencv2/legacy/legacy.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"

using namespace cv;
using namespace std;

int main()
{             
    //reference image
    Mat object = imread( "jus.png", CV_LOAD_IMAGE_GRAYSCALE );
    if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }

    char key = 'a';
    int framecount = 0;

    SurfFeatureDetector detector( 400 );
    SurfDescriptorExtractor extractor;
    FlannBasedMatcher matcher;

    Mat frame, des_object, image;
    Mat des_image, img_matches, H;

    std::vector<KeyPoint> kp_object;
    std::vector<Point2f> obj_corners(4);
    std::vector<KeyPoint> kp_image;
    std::vector<vector<DMatch > > matches;
    std::vector<DMatch > good_matches;
    std::vector<Point2f> obj;
    std::vector<Point2f> scene;
    std::vector<Point2f> scene_corners(4);

    //compute detectors and descriptors of reference image
    detector.detect( object, kp_object );
    extractor.compute( object, kp_object, des_object );   
    //cout<<"Info de lobjet: "<<object.dims<<" des_object, "<<des_object.dims<<" and kp_object: "<<kp_object.size()<<endl;

    //create video capture object
    VideoCapture cap(1);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( object.cols, 0 );
    obj_corners[2] = cvPoint( object.cols, object.rows );
    obj_corners[3] = cvPoint( 0, object.rows );

    int before, after;
    //wile loop for real time detection
    while (1)
    {
        //capture one frame from video and store it into image object name 'frame'
        cap >> frame;
         if (framecount < 5)
        {
            framecount++;
            continue;
        }  

        //converting captured frame into gray scale
        cvtColor(frame, image, CV_RGB2GRAY);

        //extract detectors and descriptors of captured frame
        before = GetTickCount();
        detector.detect( image, kp_image );
        extractor.compute( image, kp_image, des_image );
        after = GetTickCount();

        cout<<"Time of detection and extraction is: "<< after-before<<endl;
        //cout<<"Info de limage: "<<image.dims<<" des_image, "<<des_image.dims<<" and kp_image: "<<kp_image.size()<<endl;

        //find matching descriptors of reference and captured image
        matcher.knnMatch(des_object, des_image, matches, 2);

        //finding matching keypoints with Euclidean distance 0.6 times the distance of next keypoint
        //used to find right matches
        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++)
        {
            if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }    

        //drawKeypoints(object, kp_object, object);

        //Draw only "good" matches
        //drawMatches( object, kp_object, frame, kp_image, good_matches, img_matches,
            //Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

        //3 good matches are enough to describe an object as a right match.
        if (good_matches.size() >= 4)
        {                                     
            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
            }
            try
            {
                H = findHomography( obj, scene, CV_RANSAC );
            }
            catch(Exception e){}

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( frame, scene_corners[0] /*+ Point2f( object.cols, 0)*/, scene_corners[1] /*+ Point2f( object.cols, 0)*/, Scalar(100, 0, 0), 4 );
            line( frame, scene_corners[1] /*+ Point2f( object.cols, 0)*/, scene_corners[2] /*+ Point2f( object.cols, 0)*/, Scalar( 100, 0, 0), 4 );
            line( frame, scene_corners[2] /*+ Point2f( object.cols, 0)*/, scene_corners[3] /*+ Point2f( object.cols, 0)*/, Scalar( 100, 0, 0), 4 );
            line( frame, scene_corners[3] /*+ Point2f( object.cols, 0)*/, scene_corners[0] /*+ Point2f( object.cols, 0)*/, Scalar( 100, 0, 0), 4 );
        }

        //Show detected matches
        imshow( "Good Matches", frame );

        //clear array
        good_matches.clear();

        key = waitKey(33);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:26:48.470

1.  在调用特征检测之前将框架调整为更小的尺寸。例如，将图像在每个维度上缩放 0.5 倍，将使您的函数运行速度提高 4 倍。
2.  请注意，SURF 检测器有一些可选参数：[http](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#surf-surf) ://docs.opencv.org/modules/nonfree/doc/feature_detection.html#surf-surf 。您可以减少八度音程的数量和八度音程内的层数以提高速度，但您可能必须权衡目标检测性能。

# android - 无法显示多个对话框

> ID：15172261
> 
> 赞同：0
> 
> 时间：2013-03-02T08:04:01.150
> 
> 标签：android, android-alertdialog

我需要在android中显示`'n'`自定义对话框。我在while循环外创建了对话框，并在循环内设置了消息。我需要根据循环显示带有不同消息的对话框。但它在 dialog.show() 行中显示 android.view.WindowLeaked 异常。谁能帮我解决我的问题。

我的代码是这样的：

```
//notif_count is the row count
if(notif_count>0)
{
 dialog = new Dialog[notif_count];
 for(ct=0;ct<notif_count;ct++)
 {
  dialog[ct] = new Dialog(this);
  dialog[ct].requestWindowFeature(Window.FEATURE_NO_TITLE);
  dialog[ct].setContentView(R.layout.custom_dialog_alert);
 }

  cursor.moveToFirst();
  ct = 0;
  do
  {
     dec_name =cursor.getString(cursor.getColumnIndex(Database_Handler.name));

     TextView tv_alert = (TextView)dialog[ct].findViewById(R.id.txt_alert);
     tv_alert.setText( dec_name );

     Button yes = (Button) dialog[ct].findViewById(R.id.btn_yes);
     Button no = (Button) dialog[ct].findViewById(R.id.btn_no);

     yes.setOnClickListener(new OnClickListener()
     {
       public void onClick(View v) 
       {
             Intent intent = new Intent(Intent.ACTION_VIEW);
             intent.setData(Uri.parse(donateurl));
             startActivity(intent);
             ct--;
             dialog[ct].dismiss();
             cursor.close();
             sqldb.close();
             finish();
        }
     });

      no.setOnClickListener(new OnClickListener()
      {
        public void onClick(View v)
        {
           ct--;
           dialog[ct].dismiss();
           cursor.close();
           sqldb.close();
           finish();
        }
      });
      dialog[ct].show();
      ct ++;
     }while(cursor.moveToNext());
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:19:19.867

我认为同时进行多个对话是不可能的。

如果要显示一系列对话框，可以使用 onclick 侦听器。从一个对话框中，打开以下一个。（[监听器的对话框界面](http://developer.android.com/reference/android/content/DialogInterface.html)），如果你想阻止你的程序，所以用户必须点击对话框，设置对话框不可取消（[setCancelable](http://developer.android.com/reference/android/app/Dialog.html#setCancelable%28boolean%29)）

# ajax - Ajax.BeginForm 与 Html.BeginForm

> ID：15172263
> 
> 赞同：1
> 
> 时间：2013-03-02T08:04:07.900
> 
> 标签：ajax, jquery, asp.net-mvc-4

我正在尝试通过 ajax 提交表单，我可以在其中看到使用 ajax 的两个选项。

**方法1**

```
@{
    ViewBag.Title = "Index";
    var options = new AjaxOptions()
    {
      Url = Url.Action("Index", "Add"),
      LoadingElementId = "saving",
      LoadingElementDuration = 2000,
      Confirm = "Are you sure you want to submit?"
    };  
 }

@using (Ajax.BeginForm(options))
{
    <div id="saving">Loading...</div>
    <input type="submit" />
} 
```

**方法2**

```
@using (Html.BeginForm(options))
{
    <input type="submit" />
}

    $.ajax({
        type: 'POST',
        url: 'Add',
        dataType: 'json',
        data: { $(form).serialize() },
        success: function (data) {
            if (data != null) {
                console.log(data);
            }
        }
    }); 
```

1.  Method1 和 Method2 都使用 AJAX 有什么区别？
2.  如果表单包含大量输入元素，哪种方法最优化？
3.  哪一种被认为是通过 AJAX 发布的标准做法？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T12:42:43.863

Ajax.Form 使一切变得简单，或者简单地说，使大部分事情自动化。像 ModelBinder 一样，使我们的模型输入控件之间的绑定变得容易。

$.ajax 让您可以完全控制您的代码。一切都是手动的

这完全取决于情况选择什么。如果我想直接将值传递给控制器​​操作，我更喜欢 Ajax.BeginForm。当我想传递一些复杂的东西（比如解析整个 html 表并创建一些东西并最终传递它）我会更喜欢 $.jQuery

例子 -

我有一个带有一些控件的表单，例如 CustomerName、Address、Phone 不，我更喜欢 mvc ajax

我有一个包含许多客户记录的表（网格），我想传递 Json 数组，我更喜欢 jQuery

希望它有所帮助

# sql-server - sql SUM 结果过滤器（不想要 null 或 0）

> ID：15172268
> 
> 赞同：3
> 
> 时间：2013-03-02T08:04:42.007
> 
> 标签：sql-server, if-statement, sum

我想要`CASE STHAR_GCKOD when 'G' THEN STHAR_GCMIK >=1` 所以我不想要 null 或 0 这可能吗？谢谢..

```
SELECT
   STOK_KODU,
   SUM(CASE STHAR_GCKOD WHEN 'G' THEN STHAR_GCMIK ELSE 0 END) // INCOMING,
   SUM(CASE STHAR_GCKOD WHEN 'C' THEN STHAR_GCMIK ELSE 0 END) // OUTGOING,
   SUM(CASE STHAR_GCKOD WHEN 'G' THEN STHAR_GCMIK ELSE -STHAR_GCMIK END) // TOTAL
FROM 
   STOKCEK
GROUP BY 
   STOK_KODU 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:11:12.523

Use `having`，它是一个`where`应用 after 而不是 before `group by`：

```
Select STOK_KODU,
sum(CASE STHAR_GCKOD WHEN 'G' THEN STHAR_GCMIK ELSE -STHAR_GCMIK end) 
FROM STOKCEK
GROUP BY STOK_KODU
having sum(CASE STHAR_GCKOD WHEN 'G' THEN STHAR_GCMIK ELSE -STHAR_GCMIK end) > 0 
```

# java - Java 字节码操作“invokevirtual”不保持 Object 继承的方法的一致性

> ID：15172269
> 
> 赞同：5
> 
> 时间：2013-03-02T08:04:53.183
> 
> 标签：java, jvm, bytecode, invokevirtual

我有以下代码。

```
public class Parent {

    @Override
    public int hashCode() {
         return 0;
    }

}

public class Child extends Parent {

    public void test() {
        this.toString();
        this.hashCode();
    }

} 
```

正如您在上面的代码中看到的，Child 从 Object 继承 toString()，从 Parent 继承 hashCode()。Child#test 的字节码操作如下。

```
ALOAD 0: this
INVOKEVIRTUAL Object.toString() : String
ALOAD 0: this
INVOKEVIRTUAL Child.hashCode() : int
RETURN 
```

我认为如果invokevirtual 调用Object.toString()，它应该调用Parent.hashCode() 以保持一致性。或者，调用 Child.hashCode()，然后调用 Child.toString()。

但是，当且仅当目标方法被 Object 继承时，invokevirtual 才保持其一致性。

只有在这种情况下，invokevirtual 才会调用 Object 中的方法。对于其他情况，invokevirtual 调用当前类中的方法。

我想知道为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T09:52:14.797

根据[JVM规范p。3.7](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.7)：

> 编译器不知道类实例的内部布局。相反，它生成对实例方法的符号引用，这些方法存储在运行时常量池中。**这些运行时常量池项在运行时解析以确定实际的方法位置。**

这意味着所有这些符号`Child.hashCode()`只是常量，并没有指定JVM如何调用这些方法。似乎，`toString()`方法编译器知道，该方法在`Object`类中有其基本实现，因此它将符号常量`Object`放入常量池中的类 - 这是某种优化，它使编译器适用于 JVM：

```
 Constant pool:
const #2 = Method   #24.#25;    //  java/lang/Object.toString:()Ljava/lang/String;
...
const #24 = class   #34;    //  java/lang/Object
const #25 = NameAndType #35:#36;//  toString:()Ljava/lang/String; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T08:59:26.827

您是正确的，编译器的行为不合逻辑。但是此代码的效果与您建议的两种变体的效果相同。所以这可能不是故意的行为，而是编译器代码长期演变的结果。其他编译器可能会产生不同的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T17:32:41.320

我的理论：`toString()`使用非常频繁，所以javac使用common`Object.toString()`来保存常量池条目。

例如，如果代码包含`foo.toString() and bar.toString()`，则容器池只需要一个`Object.toString`，而不是两个条目。`Foo.toString and Bar.toString`

Javac 可能对这种优化进行了硬编码，而不是分析代码以查看它是否真的需要。

# java - 最好的编码方式

> ID：15172272
> 
> 赞同：0
> 
> 时间：2013-03-02T08:05:41.563
> 
> 标签：java, file, base64, bytearray, encode

我有一个包含负数的字节数组，我需要将其写入文件并读回字节数组。

想象一下，我有 10 个长度为 128 的字节数组，包括负数。

将十个数组写入同一个文件的最佳方法是什么，以便我可以读取文件并再次创建相同的十字节数组？我知道总会有 128 的长度，所以这不是问题。

我目前尝试将它们全部放入一个字符串中，使用 base 64 对其进行编码，然后将其写入文件。但是，当我读取文件并对其进行解码时，它似乎没有正确解释它（第一个数组是有序的，另一个不是）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:11:03.607

只需将它们直接写出`OutputStream`- 无需对它们进行编码：

```
// Or wherever you get them from
byte[][] arrays = new byte[10][128];
...

for (byte[] array : arrays) {
    outputStream.write(array);
} 
```

然后在阅读时（带有`InputStream`）：

```
byte[][] arrays = new byte[10][];
for (int i = 0; i < arrays.length; i++) {
    arrays[i] = readExactly(inputStream, 128);
}

...

private static byte[] readExactly(InputStream input, int size) throws IOException {
    byte[] ret = new byte[size];
    int bytesRemaining = size;
    while (bytesRemaining > 0) {
        int bytesRead = input.read(ret, size - bytesRemaining, bytesRemaining);
        if (bytesRead == -1) {
            throw new IOException("Ran out of data");
        }
    }
    return ret;
} 
```

请注意，您*不能*只发出 10 次调用`InputStream.read`并假设它每次都会读取 128 个字节。

# extjs - 如何在鼠标悬停时将 Extjs 4 绘制组件精灵带到顶部？

> ID：15172274
> 
> 赞同：3
> 
> 时间：2013-03-02T08:06:19.273
> 
> 标签：extjs

如果我将路径添加到 drawComponent 并且它们重叠，则路径会按照添加的顺序堆叠。我可以为每个精灵添加一个事件侦听器，以便在鼠标悬停时改变颜色和笔触宽度，但是如何将重叠的路径带到前面？

这是一组改变颜色的监听器：

```
listeners: {
    mouseover: function(line) {
        line.setAttributes({ stroke: "red", "stroke-width": 8}, true );
    },
    mouseout: function(line) {
        line.setAttributes({ stroke: "black", "stroke-width": 4 }, true );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:20:25.843

好的，以下工作，但我必须相信有更好的方法。您可以通过移除某物并将其添加回来将其移动到前面。但是，删除它会删除 mouse* 侦听器，因此我必须将侦听器向上移动一个档次，就像这样（这是在具有 drawComponent 属性的组件内部（此时是“我”）。

```
var pathout = function(line,target,opts) {
    line.setAttributes({ stroke: "blue", "stroke-width": 2 }, true );
    line.on('mouseover',pathover, this,opts);
};
var pathover = function(line,target,opts) {
    me.drawComponent.surface.remove(line,true);
    me.drawComponent.surface.add( line ).show(true);
    line.setAttributes({ stroke: "red", "stroke-width": 4}, true );
    line.on('mouseout',pathout,this,opts);

};
this.paths[pathName] = { 
    type: "path", 
    path: "M" + path.join(" L"), 
    stroke: next_color, 
    "stroke-width": 2,
    listeners: {
        mouseover: pathover,
        mouseout: pathout,
        scope: this
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-25T18:57:50.383

这也是可能的，而不是重新添加。

```
 var marker = Ext.create('Ext.draw.Sprite',{
                    type: 'circle',
                    fill: 'red',
                    surface : me.surface,
                    radius: 2,
                    x : sprite.x,
                    y : sprite.y
                });

                marker.show(true); 
```

# android - 数字格式异常错误

> ID：15172279
> 
> 赞同：-1
> 
> 时间：2013-03-02T08:06:46.753
> 
> 标签：android

我收到数字格式异常错误..必须将存储在数据库中的值作为字符串值进行比较..下面代码中“百分比”的值将类似于 +10.05% 或 -10.05%，“百分比以上”值将类似于 11.05和“percentbelow”值将是 10.00..

代码：

```
percentabove = cursor.getString(cursor.getColumnIndex(DBConstants.PERCENTABOVE));
 percentbelow = cursor.getString(cursor.getColumnIndex(DBConstants.PERCENTBELOW));
        }while(cursor.moveToNext());

        double newprice= Double.parseDouble(percent);
        double maxprice = Double.parseDouble(percentabove);
        double minprice = Double.parseDouble(percentbelow);

        if(newprice>maxprice || newprice<minprice)
        {

            String status="";
            if(newprice>maxprice)
            {
                status="Up";
            }
            else if(newprice<minprice)
            {
                status="Down";
            } 
```

必须将格式 double 更改为其他数据类型格式..我们可以使用 Decimalformat 吗？任何建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:17:16.270

[NumberFormatException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)明确指出此异常是：

*抛出以指示应用程序已尝试将字符串转换为其中一种数字类型，但该字符串没有适当的格式。*

就像评论中指出的那样，您是否尝试过探索价值观`percent`, `perceabove`, `percentbelow`? 也许这些值需要一些清理（修剪值，删除额外的逗号等）

# cocos2d-iphone - cocos2dx "ParticleSystem" 移动时效果不对？

> ID：15172282
> 
> 赞同：0
> 
> 时间：2013-03-02T08:07:55.217
> 
> 标签：cocos2d-iphone, cocos2d-x, particles

我使用“CCParticleSystemQuad”来创建一个粒子并将其添加到一个精灵中。当我使用“CCMove”移动精灵时，粒子效果会发生变化。它不动。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T03:07:37.987

尝试将粒子作为子项添加到要移动的精灵中。

# java - 如何获取匹配这些字符串的正则表达式

> ID：15172285
> 
> 赞同：1
> 
> 时间：2013-03-02T08:08:55.497
> 
> 标签：java, regex

我正在尝试为`String`通过 TCP/IP 套接字进入的所示打击制作正则表达式。

```
$AVSYS,99999999,V1.17,SN0000103,32768*16 
```

每个字符串应以`$` 5 到 6 位数字之间的美元符号和大写字母字符开头。它们以`*`2 位字母数字校验和结尾。每个字段以逗号分隔`,`，可以是任何字符串。

我为它创建了一个正则表达式。

```
^\$[A-Z]{5,6}(\,.*)(\,.*)(\,.*)(\,.*)(\,.*)\*[\d\w]{2}$ 
```

我预计它会匹配，但它没有。即使我已经阅读了 Java 文档，我仍然不熟悉正则表达式。请帮助我获得正确的正则表达式。

# 已编辑

根据回复修复正则表达式后，我尝试了这两个。

```
^\$[A-Z]{5,6}(\,.*)(\,.*)(\,.*)(\,.*)(\,.*)\*[\d\w]{2}$
^\$[A-Z]{5,6}(\,.*?)(\,.*?)(\,.*?)(\,.*?)\*[\d\w]{2}$ 
```

但我得到的结果比我预期的要多。

```
$AVSYS,99999999,V1.17,SN0000103,32768*16
$AVRMC,80000551,144811,A,4351.3789,N,07923.4712,W,0.00,153.45,091107,A,,161,1*64
$AVRMC,80000551,144811,A,4351.3789,N,07923.4712,W,0.00,153.45,091107,A,,161,1,0,0*64
$EAVSYS,99999999,12345678901234567890,9057621228,,,*0B 
```

以上句子都与正则表达式匹配。但我只想得到1）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:21:37.547

要匹配任意数量的逗号分隔组，您可以使用以下表达式：

```
^\$[A-Z]{5,6}(,[^,*]*)*\*[\da-zA-Z]{2}$ 
```

数据部分由以下表达式匹配：

```
(,[^,*]*)* 
```

它匹配零个或多个以逗号开头的字符组，后跟除逗号或星号以外的任意数量的字符。一旦到达逗号或星号，表达式引擎就会检查它是新值还是最后的校验和。

如果校验和不允许小写字母，则替换`a-zA-Z`为`A-Z`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:45:14.580

您的正则表达式有一个额外的子组。这应该有效：

```
^\$[A-Z]{5,6}(\,.*)(\,.*)(\,.*)(\,.*)\*[\d\w]{2}$ 
```

附带说明一下，这也应该有效，但效率更高，因为它可以消除大量回溯；这 '？' 添加使正则表达式以非贪婪的方式匹配。

```
^\$[A-Z]{5,6}(\,.*?)(\,.*?)(\,.*?)(\,.*?)\*[\d\w]{2}$ 
```

至于您的新编辑，您可以使用以下内容：

```
^\$[A-Z]{5,6}(\,[^\,]+?)(\,[^\,]+?)(\,[^\,]+?)(\,[^\,]+?)\*[\d\w]{2}$ 
```

IE，

1.  更换 '。' 用 '[^\,]' 匹配除逗号以外的任何字符，而不仅仅是任何字符；和
2.  将 '*' 替换为 '+' 以避免长度为零的匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:31:09.800

为避免空组，只需替换`*`为`+`：

```
^\$[A-Z]{5,6}(,.+?)(,.+?)(,.+?)(,.+?)\*\w{2}$ 
```

不需要转义逗号和`\w`包含`\d`，实际上它相当于`[a-zA-Z0-9_]`

# asp.net-mvc-3 - 使用modelstate空验证错误

> ID：15172289
> 
> 赞同：0
> 
> 时间：2013-03-02T08:09:28.910
> 
> 标签：asp.net-mvc-3, jquery, razor

我在 mvc razor 中有一个表单，它有两个文本框和一个用于保存电子邮件的按钮。当我在浏览器中使用带有 onclick 事件的提交按钮时，通过单击它，它会检查电子邮件文本框是否为空，在我的 mvc 模型中显示验证错误以填充它，但是当我填充文本框并单击发送按钮时，它不会去到我的 SaveEmailForNewsletter() 函数，然后刷新页面。

```
 <input type="submit" id="submitBtn" value="send" onclick="javascript:SaveEmailForNewsletter();" class="ButtonStyle"/>

$("#myform").submit(
    function SaveEmailForNewsletter(e) {
    e.PreventDefault();
        var newsLetter = { Email: $("#Email").val(),Name:$("#Name").val(), LanguageId: "1" };
        $.ajax({
            url: '/Newsletter/Index',
            type: 'POST',
            dataType: 'json',
            data: JSON.stringify(newsLetter),
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                if (result.success) {
                    // We have a JSON object in case of success
                    alert('register successfuly!');
                    $('#Email').val("");
                    $("#Name").val("");
                } else {
                    // We have the partial with errors in case of failure
                    // so all we have to do is update the DOM
                    alert('This email registered previosly.');
                    $("#Email").val("");
                    $("#Name").val("");    
                 }
               }
             });
            }); 
```

我将 onclick 更改为：

```
OnClick="return SaveEmailForNewsletter();" 
```

它不起作用。两种方式都显示此错误：

> 'javascript 未定义'或'返回 SaveEmailForNewsletter() 未定义'

当我在浏览器中使用带有“type = button”和onclick事件的输入时，通过单击“发送按钮”它不会检查空文本框并且不会显示任何错误。当我看到萤火虫的控制台时，它只是张贴没有任何东西。

```
 <input type="button" id="submitBtn" value="send" 
       onclick="SaveEmailForNewsletter();" class="ButtonStyle"/>

    function SaveEmailForNewsletter() {    
    //Code above
       }); 
```

我想检查文本框，如果它们为空，则显示模型状态验证错误，然后转到我的函数，执行并显示警报。我应该怎么办？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:11:04.100

您的刷新问题与您的`<form>`. 您正在使用 a`<form>`并提交它，然后覆盖实际提交，但我认为您目前没有这样做。更好的选择是使用常规按钮。

还要尽量保持 JavaScript 文件中事件的连接，没有它你的标记会更干净。

请参阅[JSFiddle上的示例](http://jsfiddle.net/KExz2/1/)

```
$(document).ready(function () {
    $('#submitBtn').click(saveEmailForNewsletter);
});

function saveEmailForNewsletter() {
    alert('I\'m here!');
} 
```

编辑2：

尝试将您的函数从 $("#myform").submit() 函数中拉出，使其位于“全局命名空间”中。

[JSFiddle](http://jsfiddle.net/vbBMe/1/)

```
$("#submitBtn").click(SaveEmailForNewsletter);

function SaveEmailForNewsletter(e) {

    // Use lowercase on preventDefault()
    e.preventDefault();

    var newsLetter = {
        Email: $("#Email").val(),
        Name: $("#Name").val(),
        LanguageId: "1"
    };
    $.ajax({
        url: '/Newsletter/Index',
        type: 'POST',
        dataType: 'json',
        data: JSON.stringify(newsLetter),
        contentType: 'application/json; charset=utf-8',
        success: function (result) {
            if (result.success) {
                // We have a JSON object in case of success
                alert('register successfuly!');
                $('#Email').val("");
                $("#Name").val("");
            } else {
                // We have the partial with errors in case of failure
                // so all we have to do is update the DOM
                alert('This email registered previosly.');
                $("#Email").val("");
                $("#Name").val("");
            }
        }
    });

    // Will stop the submit
    return false;
} 
```

# c - C - popen() 和 fread() 导致 accept() 抛出错误

> ID：15172293
> 
> 赞同：1
> 
> 时间：2013-03-02T08:09:46.920
> 
> 标签：c, popen, fread

如果我真的很困惑，我对 C 很陌生，很抱歉。

我试图让一个服务器进程 fork() 另一个进程通过 popen() 运行 C 程序。但是，一旦我尝试读取字节，我的主服务器进程中的 accept() 就会收到错误消息。这是我得到错误的地方。

有人可以帮忙吗。

```
 pipe_pointer = popen(cgi_command, "r");

                if(pipe_pointer != NULL) {
                    while(!feof(pipe_pointer)) {
                        bytes_read = fread(buf, 1, sizeof(buf), pipe_pointer);

                        send(clientSock, buf, bytes_read, 0);

                    }
                }

                pclose(pipe_pointer); 
```

这是整个代码

```
/**
 * This method processes the first line of the HTTP request and stores it in the variable that the pointer
 * buffer points to. In this case that variable is the request variable in the request_handler method. Returns 0 if nothing was received.
 **/
int process_request(int clientSock, char *buffer) {
    #define EOL "\r\n"
    #define EOL_SIZE 2

    char *bufferPointer = buffer;
    int eol_matched = 0;

    while(recv(clientSock, bufferPointer, 1, 0) != 0) {
        if(*bufferPointer == EOL[eol_matched]) {
            ++eol_matched;

            if(eol_matched == EOL_SIZE) {
                *(bufferPointer+1-EOL_SIZE) = '\0';
                return(strlen(buffer));
            }
        }
        else {
            eol_matched = 0;
        }
        bufferPointer++;
    }
    return(0);
}

int validate_get_request(char *buffer) {
    char get_string[5] = "GET /";
    if(strncasecmp(buffer, get_string, 5) != 0) {
        return(-1);
    }
    else {
        return(1);
    }
}

/**
 *This method takes a valid request and a pointer to a empty path variable, then fills out the path variable with the path of the requested file. Also it stores the requested filename in the filename variable
 **/
void get_path(char *request, char *path, char *filename) {
    char buf[1024];
    int i = 0;
    char *pointer = request;
    pointer += 4;
    while(!ISspace(pointer[i]) && pointer[i] != '\0') {
        filename[i] = pointer[i];
        i++;
    }
    filename[i] = '\0';

    if(strcmp(filename, "/") == 0) {
        strcpy(filename, "/index.html");
    }

    if(strstr(filename, ".cgi") != NULL) {
        strcpy(path, CGIROOT);
    }
    else {
        strcpy(path, DOCROOT);
    }
    strcat(path, filename);
}

void send_ok_header(int clientSock, char *mime) {
    char buf[1024];
    //Create OK Header, then add the file

    strcpy(buf, "HTTP/1.0 200 OK\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, SERVER);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "Content-Type: ");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, mime);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "\r\n\r\n");
    send(clientSock, buf, strlen(buf), 0);
}

void send_not_found(int clientSock, char *mime) {
    char buf[1024];
    //Create not found Header, then add the file
    strcpy(buf, "HTTP/1.0 404 NOT FOUND\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, SERVER);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "Content-Type: ");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, mime);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "\r\n\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "404 Sorry this webpage cannot be found\n");
    send(clientSock, buf, strlen(buf), 0);
}

void send_unsupported(int clientSock, char *mime) {
    char buf[1024];
    //Create not found Header, then add the file
    strcpy(buf, "HTTP/1.0 415 UNSUPPORTED MEDIA TYPE\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, SERVER);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "Content-Type: ");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, mime);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "\r\n\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "415 Sorry this media type is not supported!!!\n");
    send(clientSock, buf, strlen(buf), 0);
}

void send_unimplemented(int clientSock, char *mime) {
    char buf[1024];
    //Create not found Header, then add the file
    strcpy(buf, "HTTP/1.0 501 UNIMPLEMENTED\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, SERVER);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "Content-Type: ");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, mime);
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "\r\n\r\n");
    send(clientSock, buf, strlen(buf), 0);
    strcpy(buf, "501 Sorry this server only implements valid GET request\n");
    send(clientSock, buf, strlen(buf), 0);
}

/**
 This method takes the filename and fills the variable mime with its appropriate MIME type. Returns -1 if there is an unrecognized filename
 **/
int get_mime_type(char *filename, char *mime, int *is_cgi) {
    //WHY DOES THIS START WITH SOME WEIRD INITIAL VALUE ON THE 2ND TIME A REQUEST IS MADE?????
    char extension[50] = "";
    int return_val = -1;
    char *pointer;
    int filename_len = sizeof(filename);
    int i = 0;

    pointer = strstr(filename, ".");
    if(pointer != NULL) {
        while(pointer[i] != '\0') {
            extension[i] = pointer[i];
            i++;
        }
    }

    if(strcasecmp(extension, ".html") == 0 || strcasecmp(extension, ".htm") == 0) {
        strcpy(mime, "text/html");
        return_val = 1;
    }

    else if(strcasecmp(extension, ".jpeg") == 0 || strcasecmp(extension, ".jpg") == 0) {
        strcpy(mime, "image/jpeg");
        return_val = 1;
    }

    else if(strcasecmp(extension, ".gif") == 0) {
        strcpy(mime, "image/gif");
        return_val = 1;
    }

    else if(strcasecmp(extension, ".txt") == 0) {
        strcpy(mime, "text/plain");
        return_val = 1;
    }

    //set the cgi variable to 1
    else if(strcasecmp(extension, ".cgi") == 0) {
        strcpy(mime, "text/html");
        *is_cgi = 1;
        return_val = 1;
    }

    return(return_val);
}

/**
 * This is the function that the handler thread executes to handle each request
 */
void request_handler(int clientSock) {
    FILE *pipe_pointer = NULL;
    int i = 0;
    int is_cgi = 0;
    char buf[1024], path[1024], request[1024], mime[20], filename[50], *query_string[50] = {NULL}, *query_pointer, cgi_command[1024], cgibuf[1024];
    long bytes_read;

    //Send the actual html file with header
    FILE *requestedfile = NULL;

    //Take a request and fill it in the request variable
    if(process_request(clientSock, request) != 0) {
        //If it is a get request
        if(validate_get_request(request) != -1) {

            query_pointer = strtok(request, " ?=&");
            strcpy(request, query_pointer);
            while(query_pointer != NULL) {
                query_string[i] = malloc(strlen(query_pointer) + 1);
                strcpy(query_string[i], query_pointer);
                query_pointer = strtok(NULL, " ?=&");
                i++;
            }
            query_string[i] = NULL;

            get_path(request, path, filename);

            access(path, R_OK);

            //if the file extension is unsupported throw a 415 code
            if(get_mime_type(filename, mime, &is_cgi) != 1) {
                send_unsupported(clientSock, mime);
            }
            else if(errno == ENOENT) { //filetype is recognized, but file cannot be found
                send_not_found(clientSock, mime);
            }
            else if(errno == EACCES) { //filetype and file found, but no read access to the file
                //fix this to a 403 error
                perror("no access");
            }
            else { //PUT THE CGI code somewhere in this else statement

                if(is_cgi == 1) {
                    i = 1;
                    //Create command to open cgi script
                    strcpy(cgi_command, "(cd ");
                    strcat(cgi_command, CGIROOT);
                    strcat(cgi_command, "; .");
                    strcat(cgi_command, filename);
                    strcat(cgi_command, " ");

                    while(query_string[2*i + 1] != NULL) {
                        strcat(cgi_command, query_string[2*i + 1]);
                        i++;
                    }
                    strcat(cgi_command, ")");

                    free(*query_string);

                    pipe_pointer = popen(cgi_command, "r");

                    if(pipe_pointer != NULL) {
                        while(!feof(pipe_pointer)) {

                            bytes_read = fread(cgibuf, 1, sizeof(cgibuf), pipe_pointer);

                            send(clientSock, cgibuf, bytes_read, 0);

                        }
                    }

                    pclose(pipe_pointer);
                }
                else {
                    //Open the file and start to send it
                    requestedfile = fopen(path, "rb");

                    //Send header
                    send_ok_header(clientSock, mime);

                    //Read the file by 1024 byte increments and send it
                    while(!feof(requestedfile)) {
                        bytes_read = fread(buf, 1, sizeof(buf), requestedfile);
                        send(clientSock, buf, bytes_read, 0);

                    }
                }
            }

        }
        else { //not a get request

            send_unimplemented(clientSock, mime);

        }
    }
    //Close the client socket when the request is fulfilled
    //thread will die after this
    close(clientSock);
}

int main(int argc, const char * argv[])
{
    int server_sock_desc;
    struct sockaddr_in name;

    int client_sock_desc;
    struct sockaddr_in client_name;
    socklen_t addr_size;

    pthread_t handler_thread;

    //connection setup
    server_sock_desc = socket(PF_INET, SOCK_STREAM, 0);
    if(server_sock_desc != -1) {
        memset(&name, 0, sizeof(name));
        name.sin_family = AF_INET;
        name.sin_port = htons(PORTNUMBER);
        name.sin_addr.s_addr = htonl(INADDR_ANY);
        int bind_result = bind(server_sock_desc, (struct sockaddr *) &name, sizeof(name));
        if(bind_result == 0) {
            if(listen(server_sock_desc, BACKLOG) < 0) {
                perror("listen failed");
            }

            addr_size = sizeof(client_name);

            //Server Loop will continue to run listening for clients connecting to the server
            while(1) {

                //new client attempting to connect to the server
                client_sock_desc = accept(server_sock_desc, (struct sockaddr *) &client_name, &addr_size);
                if(client_sock_desc == -1) {
                    perror("accept failed");
                }

                //connection starts here

                //create a thread for the new clients request to be handled
                if(pthread_create(&handler_thread, NULL, request_handler, client_sock_desc) != 0) {
                    perror("pthread_create failed");
                }
            }
        }
        else {
            perror("bind failed");
        }
    }
    else {
        perror("socket failed");
    }

} 
```

fread() 执行后

程序执行立即跳转到这个循环并卡在第二行

```
while(recv(clientSock, bufferPointer, 1, 0) != 0) {
        if(*bufferPointer == EOL[eol_matched]) {
            ++eol_matched;

            if(eol_matched == EOL_SIZE) {
                *(bufferPointer+1-EOL_SIZE) = '\0';
                return(strlen(buffer));
            }
        }
        else {
            eol_matched = 0;
        }
        bufferPointer++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:44:18.540

改变：

```
 if(client_sock_desc == -1) {
                perror("accept failed");
            } 
```

到：

```
 if(client_sock_desc == -1) {
                if (errno == EINTR) {
                    continue;
                }
                perror("accept failed");
                exit(1);
            } 
```

在中断的情况下返回`accept()`。如果出现任何其他错误，您需要终止 -`request_handler`无论如何您只是失败并启动线程。

# c++ - 调用没有命名空间的方法

> ID：15172300
> 
> 赞同：1
> 
> 时间：2013-03-02T08:10:41.457
> 
> 标签：c++

我只是在浏览一个 C++ 代码，我注意到了一些东西。在源文件 main.cpp

```
std::cout << converter(); 
```

然后我寻找转换器定义。没有命名空间和类名。然后我在tool.cpp中看到了

```
using namespace Ccon::converter; 
```

该定义位于 Ccon.cpp 文件中。

为什么 main.cpp 可以调用`converter()`？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-02T08:20:10.480

请参阅此链接以查找依赖于参数的名称：[http ://en.wikipedia.org/wiki/Argument-dependent_name_lookup](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)

当编译器无法找到不合格`converter()`的名称时，它将寻找可用的名称空间并在名称和签名匹配时使用它们。

在这种情况下， main.cpp 包括我想的 Ccon.h 头文件，它定义了这个命名空间，所以它会查找`converter()`带有 void 参数的 a 。

# c++ - C++ 解决 istream::tellg 警告

> ID：15172315
> 
> 赞同：11
> 
> 时间：2013-03-02T08:12:30.593
> 
> 标签：c++

警告：

```
warning C4244: 'initializing' : conversion from 'std::streamoff' to 'unsigned int', possible loss of data 
```

造成的：

```
unsigned int FileSize = File.tellg( ); // WARNING
std::cout << "Size = " << FileSize << std::endl; 
```

可能的解决方案？这样做可以吗：

```
// No more warnings but, is it safe?
unsigned int FileSize = (unsigned int)File.tellg( ); // OK?
std::cout << "Size = " << FileSize << std::endl; 
```

这个怎么样？

```
// No more warnings but, is it safe?
unsigned int FileSize = static_cast< unsigned int >( File.tellg( ) ); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T08:19:00.277

`streamoff`是由 C++ 标准库实现定义的有符号整数类型，并且足够大以适应最大可能的文件大小。例如，在我的 x86_64 stdlibc++ 中，它是一个`int64_t`.

为了避免潜在的数据丢失，请使用更大的类型或......只需让您的变量为 type `streamoff`。

# java - java程序运行困难

> ID：15172319
> 
> 赞同：-2
> 
> 时间：2013-03-02T08:12:54.000
> 
> 标签：java

每次使用 cmd 时，我都无法运行 helloworldapp java 程序。这是程序的原始执行。

* * *

```
C:\Users\char>cd\

C:\>cd program files

C:\Program Files>cd java

C:\Program Files\Java>cd helloworldapp

C:\Program Files\Java\HelloWorldApp>path=c:\\program files\java\jdk1.7.0_11\bin

C:\Program Files\Java\HelloWorldApp>javac helloworldapp
error: Class names, 'helloworldapp', are only accepted if annotation processing
is explicitly requested
1 error

C:\Program Files\Java\HelloWorldApp> >> 
```

每次我尝试更正班级名称时，它都在说同样的事情。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:15:22.650

像这样编译它：

```
C:\Program Files\Java\HelloWorldApp>javac helloworldapp.java 
```

来源：[http ://docs.oracle.com/javase/tutorial/getStarted/problems/index.html](http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html)

> 如果您收到此错误，您在编译程序时忘记包含 .java 后缀。请记住，命令是 javac HelloWorldApp.java 而不是 javac HelloWorldApp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:16:49.437

利用：

```
C:\Program Files\Java\HelloWorldApp>javac helloworldapp.java 
```

反而：

```
C:\Program Files\Java\HelloWorldApp>javac helloworldapp 
```

参考：[课程：常见问题（及其解决方案）](http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T08:22:54.727

该错误是由于您没有指定 .java 文件扩展名。

**正确用法：**

```
C:\Program Files\Java\HelloWorldApp>javac helloworldapp.java 
```

现在将生成 .class 文件。要运行它，请使用（这次没有扩展）：

```
C:\Program Files\Java\HelloWorldApp>java helloworldapp 
```

在此处使用 .class 扩展名将再次给您带来问题。

**以下用法不正确：**

```
C:\Program Files\Java\HelloWorldApp>java helloworldapp.class 
```

# android - 无法从 Dialog 过渡到 Activity

> ID：15172320
> 
> 赞同：0
> 
> 时间：2013-03-02T08:13:18.063
> 
> 标签：android, eclipse, android-intent, android-activity

我似乎无法从 Dialog 转换为 Activity，我想知道是否有人足够聪明地找出原因！

这是我在提交此项目之前需要修复的最后一个错误。

包 com.mkyong.android;

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AppActivity extends Activity {

final Context context = this;
private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.button1);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);

        // set title
        alertDialogBuilder.setTitle("Settings Menu");

        // set dialog message
        alertDialogBuilder
            .setMessage("Link or Delete?")
            .setCancelable(false)
            .setPositiveButton("Link",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            //start new activity

            Intent intentApp2Activity = new Intent(AppActivity.this, App2Activity.class);
            startActivity(intentApp2Activity);

            // if this button is clicked, close
            // current activity
            AppActivity.this.finish();
        }
      })
            .setNegativeButton("Delete",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    });
} 
```

}

```
03-02 08:16:32.219: E/AndroidRuntime(5484): FATAL EXCEPTION: main
03-02 08:16:32.219: E/AndroidRuntime(5484): java.lang.Error: Unresolved compilation problems: 
03-02 08:16:32.219: E/AndroidRuntime(5484): Intent cannot be resolved to a type
03-02 08:16:32.219: E/AndroidRuntime(5484): Intent cannot be resolved to a type
03-02 08:16:32.219: E/AndroidRuntime(5484): at com.mkyong.android.AppActivity$1$1.onClick(AppActivity.java:44)
03-02 08:16:32.219: E/AndroidRuntime(5484): at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
03-02 08:16:32.219: E/AndroidRuntime(5484): at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 08:16:32.219: E/AndroidRuntime(5484): at android.os.Looper.loop(Looper.java:137)
03-02 08:16:32.219: E/AndroidRuntime(5484): at android.app.ActivityThread.main(ActivityThread.java:5041)
03-02 08:16:32.219: E/AndroidRuntime(5484): at java.lang.reflect.Method.invokeNative(Native Method)
03-02 08:16:32.219: E/AndroidRuntime(5484): at java.lang.reflect.Method.invoke(Method.java:511)
03-02 08:16:32.219: E/AndroidRuntime(5484): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 08:16:32.219: E/AndroidRuntime(5484): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 08:16:32.219: E/AndroidRuntime(5484): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:30:38.213

确保你已经导入了 android.content.Intent，清理你的项目并重建。

这是一个片状的Android。作为异常提示，您有一个未解决的编译时问题，*应该*会产生编译时错误。对我来说，闻起来像是 ADT 或 Eclipse（我假设您使用的是 Eclipse）中的错误。

# eclipse - eclipse 的什么附加组件可以使它充当dreamweaver 或像ftp 一样的filezilla？

> ID：15172324
> 
> 赞同：1
> 
> 时间：2013-03-02T08:13:52.823
> 
> 标签：eclipse, eclipse-plugin, ftp, dreamweaver, filezilla

日食让我更不安的一件事是对 ftp 的非“明显”处理。我可以导入 ftp 插件，对我来说这应该是“默认情况下”，但在我的版本版本：4.2.1 构建 id：M20120914-1800，我看不到 ftp 连接到我的远程文件系统，我必须说我从一个 zip 本地创建了我的项目，在我的工作区文件夹中解压缩，然后我创建了项目，并为其命名了已解压缩的文件夹的名称，现在这是可悲的部分，我必须使用 filezilla 上传我的所有更改为我无法弄清楚如何设置像 ftp 这样的 filezilla 从现有工作区插入到远程服务器。

我会错过dreamweaver（请不要发表有趣的评论）向您提示消息的能力，以防万一导入文件（来自我的PC的文件）与服务器端的不同，不仅在大小上，而且在日期，但如果您使用 ftp 本身下载（我梦寐以求的）下载，则不会提示，因此我可以选择是否覆盖...

有人可以指出一个教程，一个插件或创建一个（相信我你很快就会变得富有）的行为，因为我没有发现任何可能充当 Eclipse 的 filezilla 或 dreamweaver ftp 的东西？

我无法想象有多少新奇的程序员因为这个事实而被困在 Dreamweaver 上（没有冒犯）......

# php - crontabs 中的标志是什么意思？

> ID：15172326
> 
> 赞同：2
> 
> 时间：2013-03-02T08:14:07.877
> 
> 标签：php

我的 crontab 中有这一行：

```
0 0 * * * /usr/local/bin/php5 -d allow_url_fopen=on -f /path/to/file.php 
```

我找不到任何关于“-d”和“-f”标志含义的全面参考。他们的意思是什么？是否有解释这些和其他标志的页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:16:22.097

这些标志与 php5 命令有关。

-d 定义一个变量 -f 设置要执行的文件

[http://www.manpagez.com/man/1/php/](http://www.manpagez.com/man/1/php/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T08:19:46.367

来自[PHP 手册](http://php.net/manual/en/features.commandline.options.php)：

```
-d foo[=bar]     Define INI entry foo with value 'bar'
-f <file>        Parse and execute <file>. 
```

所以这意味着文件`/path/to/file.php`应该在`allow_url_fopen`选项集的情况下执行。

# facebook - 从我的信息流中获得评论

> ID：15172329
> 
> 赞同：0
> 
> 时间：2013-03-02T08:14:41.213
> 
> 标签：facebook, facebook-fql

我怎样才能获得完整的帖子/评论？和

```
SELECT post_id,  message, message_tags, description, description_tags FROM stream WHERE source_id = me() 
```

我得到了我发布的评论的“剪切”版本（在消息字段中）。

使用带有 post_id 的图表给我带来了与结果相同的修剪消息。是否有其他“表”可以通过 post_id 查询评论？

可以在下面找到一个示例。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:40:49.427

你需要得到这个`comments`领域

`SELECT post_id, comments FROM stream WHERE source_id = me()`

您应该阅读[FQL - 流](https://developers.facebook.com/docs/reference/fql/stream)文档页面

# hash - 快速从存档中提取所选文件

> ID：15172330
> 
> 赞同：0
> 
> 时间：2013-03-02T08:14:45.493
> 
> 标签：hash, zip, extract, archive, tar

随着项目的增长，旧数据应该被归档以节省磁盘空间，但是 xxx.tar.gz 提取选定的文件以供以后使用似乎很慢。是否有存档格式和软件可以生成压缩文件以便快速浏览和解压缩某些文件？

谢谢。

这个问题与[https://superuser.com/questions/484075/archive-software-for-big-files-and-fast-index有关](https://superuser.com/questions/484075/archive-software-for-big-files-and-fast-index)

答案是[http://dar.linux.free.fr/](http://dar.linux.free.fr/) 我现在正在尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:31:09.597

对于 tar 和 gzip 文件，(*.tar.gz)，命令

```
tar xzf archivefile.tar.gz list-of-files-to-extract 
```

应该这样做。

您必须确保要提取的文件列表具有存档文件中指定的确切路径名。

# c++ - 如何有效地处理 C++ 容器对象？

> ID：15172331
> 
> 赞同：3
> 
> 时间：2013-03-02T08:14:52.550
> 
> 标签：c++, performance, copy

假设我有很大的多级向量。（这只是多级包含对象树的示例）

```
vector<vector<vector<int>>> vec1 = getBigVector(); 
```

如果我需要传递一个元素，我认为它会导致某种复制。

```
vector<vector<int>> vec2 = vec1[2];
vector<vector<int>> vec3 = vec1[3]; 
```

看起来并不比引用更有效。据我所知，通常选择 C++ 是因为它的效率，而且我听说 C++ 被设计为更喜欢值类型对象。但是，对于具有许多元素的容器来说仍然如此吗？容器包含另一个容器怎么样？

有没有什么隐藏的秘密可以让操作变得高效？或者我应该只是引用它而不是复制它？

**更新**

整个对象树需要频繁的变异。甚至树本身也需要变异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:32:27.727

一般来说，是的，使用参考而不是副本。如果您*不需要*复制整个对象（如果引用也可以），请使用引用。

但是，有时您只想移动或重命名现有对象。对于这种情况，您可以使用该`std::move`函数（C++11 中的新功能），它基本上告诉 STL，如果这有助于更快地创建新对象，则可以丢弃旧对象。

例子：

```
vector<vector<int>> vec2 = vec1[2]; 
```

意思是“创建一个全新的对象，所以现在有两个对象。” 这是非常缓慢的。

```
vector<vector<int>> &vec2 = vec1[2]; 
```

意思是“仍然只有一个对象，但现在有两个对它的引用。” 这是最快的选择。

```
vector<vector<int>> vec2 = std::move(vec1[2]);  // C++11 
```

意思是“有两个物体，但`vec2`偷了 的内脏`vec1[2]`，所以`vec1[2]`只是一个空壳。” 这通常也是一个非常快的操作，当然，虽然不如创建引用那么快。`vec1[2]`在它被`std::move`淘汰后尝试做任何事情是错误的；您唯一可以合法做的就是调用它的析构函数。

有关 C++11 的更多信息，请`std::move`参阅 Google“右值引用”。

# android - 如何在 android 的 facebook 上上传大视频

> ID：15172334
> 
> 赞同：3
> 
> 时间：2013-03-02T08:15:32.227
> 
> 标签：android, facebook

我想通过我的应用在 facebook 上上传视频，我可以上传 5 MB 的小视频。但我无法上传大视频。

```
CODE:
    byte[] data = null;
            InputStream  is;
        String dataMsg = "Your video description here.";
        String dataName=".mp4";
        Bundle param;
       // FakeX509TrustManager.allowAllSSL();
        mFacebook = new Facebook(APP_ID);
        AsyncFacebookRunner mAsyncRunner = new   AsyncFacebookRunner(mFacebook);
       // System.setProperty("http.keepAlive", "false");
        //file = new File(videoPath);
      //  System.gc();
        try {
              is = new FileInputStream(videoPath);
           data = readBytes(is); 

//         data = IOUtils.toByteArray(is);
           param = new Bundle();
           param.putString(Facebook.TOKEN, AG.access_token);
           param.putString("message", dataMsg);
           param.putString("filename", dataName);
           param.putString("method", "me/videos"); 
           param.putString("contentType", "video/quicktime");
           param.putByteArray("video.mp4", data);
        //   param.putByteArray("video", data);
           mAsyncRunner.request("me/videos", param, "POST", new fbRequestListener(), null);

Thanks in advance 
```

# django - Django - {{ STATIC_URL }} 错误

> ID：15172335
> 
> 赞同：0
> 
> 时间：2013-03-02T08:16:06.293
> 
> 标签：django

我正在尝试将一些功能添加到我现有的名为 school 的应用程序中。目前我正在尝试将图片添加到我的模板中，但所有模板都只是显示一个空框。

我正在阅读管理静态文件，但我不知道如何显示硬编码的图片，但是当我尝试显示这样的图片时。它似乎不起作用。

```
 <img src="{{ STATIC_URL }}images/Crater.jpg" /> 
```

这是我的设置：在这里发布太长了

[http://pastebin.com/ePw1h1aX](http://pastebin.com/ePw1h1aX)

和我的 index.html 模板

```
 {% if students %}
 <ul>        
    {% for student in students %}    
<li><a href="{% url school:cat student.id %}">{{student.id}} {{student.First_name}}</li>    
{% endfor %}
 </ul>
 {% endif %}

 <img src="{{ STATIC_URL }}images/Crater.jpg" /> 
```

![在此处输入图像描述](../Images/8b2a53aa0cecd51e1bf2239ca805667c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:18:40.327

需要注意的一件事是确保您`{% load staticfiles %}`在模板的开头有假设您使用的是 Django 1.4+，如果您使用的是 1.3，`{% load static %}`我猜是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:22:04.100

您应该在设置中指定静态文件的路径并运行“收集静态文件”。仔细阅读文档。这是您的设置文件的摘录：

```
# Additional locations of static files
STATICFILES_DIRS = (
   # Put strings here, like "/home/html/static" or "C:/www/django/static".
   # Always use forward slashes, even on Windows.
   # Don't forget to use absolute paths, not relative paths.
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:42:28.310

```
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(SITE_ROOT, 'staticfiles'),
)

//Or try in your template

{% load static %}
<img src="{% static 'images/Crater.jpg' %}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T08:24:33.013

你能试试这个吗？

设置.py

```
MEDIA_URL = '/static_media/'
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/' 
```

现在在 urls.py

```
if settings.DEBUG:
    urlpatterns += patterns('django.views.static',
    (r'^static_media/(?P<path>.*)$', 
        'serve', {
        'document_root': '/your/static/folder/path/',
        'show_indexes': True }),) 
```

在模板中尝试这样

将您的图像放在静态目录中

并像访问

```
 <img src="{{MEDIA_URL}}your.jpeg"> 
```

我只是给你和 css 例子，你也可以尝试使用图像

# c# - 如何获取整个月所选日期的日期？

> ID：15172342
> 
> 赞同：-1
> 
> 时间：2013-03-02T08:16:53.813
> 
> 标签：c#, asp.net

我想选择一天，比如星期一。现在我想获取该月或两个选定日期之间的所有星期一的日期（甚至更好）。例如。

> 选择日期：星期一
> 
> 开始日期：3月1日
> 
> 结束日期：4月30日

这必须让我知道这两个日期之间的所有 8 个星期一的日期。我准备好使用 DropDownList 或日历或任何必要的东西来做到这一点。我正在使用 C#、Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:33:14.223

试试这个

```
DateTime d1 = DateTime.Parse("03/01/2013");
DateTime d2 = DateTime.Parse("04/01/2013");

int days = (d2 - d1).TotalDays;

for (i = 0; i <= days; i++) {
    DateTime d = d1.AddDays(i);
    if ((d.DayOfWeek == DayOfWeek.Monday)) {
        Console.WriteLine(d);   //dateList.Add(d);   <------ this could be a List<DateTime> or List<string>
    }
}

Output - M/dd/yyyy format
-------
3/04/2013
3/11/2013
3/18/2013
3/25/2013
4/01/2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:42:22.810

这是非常简单的算法：

```
 public static List<DateTime> GetDayOccurrences(DayOfWeek day, DateTime from, DateTime to)
    {
        var results = new List<DateTime>();

        while (from <= to)
        {
            if (from.DayOfWeek == day)
            {
                results.Add(from);
                from = from.AddDays(7);
            }
            else
            {
                from = from.AddDays(1);
            }

        }
        return results;
    } 
```

为了让它更快一点，如果选择当前日期是星期几，我会向前移动 7 天。

以及该方法的用法：

```
 var from = new DateTime(2013, 3, 1);
        var to = new DateTime(2013, 4, 30);

        List<DateTime> mondays = GetDayOccurrences(DayOfWeek.Monday, from, to); 
```

顺便说一句：2013 年 1 月 3 日至 2013 年 4 月 30 日之间有 9 个星期一：

```
2013-03-04
2013-03-11
2013-03-18
2013-03-25
2013-04-01
2013-04-08
2013-04-15
2013-04-22
2013-04-29 
```

***更新***

也可以这样做，以删除`if`循环中的语句：

```
 public static List<DateTime> GetDayOccurrences(DayOfWeek day, DateTime from, DateTime to)
    {
        var results = new List<DateTime>();

        while(from <= to && from.DayOfWeek != day)
            from = from.AddDays(1);

        while (from <= to)
        {
            results.Add(from);
            from = from.AddDays(7);
        }

        return results;
    } 
```

# sitecore - 如何将新项目标记为未发布项目？

> ID：15172346
> 
> 赞同：6
> 
> 时间：2013-03-02T08:17:30.403
> 
> 标签：sitecore

在 sitecore 中，如果我将新项目添加到主数据库（未发布），它不会显示有关已发布状态的任何指示。

例如，如果用户添加了 10 个项目，他可能会混淆以找出​​他添加的待发布的项目。

有没有办法将新添加的项目标识为未发布或新项目并在“快速操作栏”中显示验证？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T10:46:29.510

从来没有想过这个，但它实际上很容易修复。

我创建了一个`GutterRenderer`指示项目是否已发布到至少一个、所有或没有发布目标的一个。

编辑：添加点击行为。当您单击装订线图标时，将为该项目显示“发布”对话框。

首先，我将向您展示我为此编写的代码，然后我将向您展示设置和结果的屏幕截图。

这是代码：

```
using System.Collections.Generic;
using System.Linq;
using Sitecore;
using Sitecore.Data;
using Sitecore.Data.Items;
using Sitecore.Globalization;
using Sitecore.Shell.Applications.ContentEditor.Gutters;

namespace ParTech.Library.Gutters
{
  public class PublicationStatus : GutterRenderer
  {
    private readonly ID publishingTargetsFolderId = new ID("{D9E44555-02A6-407A-B4FC-96B9026CAADD}");
    private readonly ID targetDatabaseFieldId = new ID("{39ECFD90-55D2-49D8-B513-99D15573DE41}");

    protected override GutterIconDescriptor GetIconDescriptor(Item item)
    {
      bool existsInAll = true;
      bool existsInOne = false;

      // Find the publishing targets item folder
      Item publishingTargetsFolder = Context.ContentDatabase.GetItem(publishingTargetsFolderId);

      if (publishingTargetsFolder == null)
      {
        return null;
      }

      // Retrieve the publishing targets database names
      List<string> publishingTargetsDatabases = publishingTargetsFolder.GetChildren()
        .Select(x => x[targetDatabaseFieldId])
        .ToList();

      // Check for item existance in publishing targets
      publishingTargetsDatabases.ForEach(delegate(string databaseName)
      {
        if (Database.GetDatabase(databaseName).GetItem(item.ID) != null)
        {
          existsInOne = true;
        }
        else
        {
          existsInAll = false;
        }
      });

      // Return descriptor with tooltip and icon
      string tooltip = Translate.Text("This item has not yet been published");
      string icon = "People/16x16/flag_red.png";

      if (existsInAll)
      {
        tooltip = Translate.Text("This item has been published to all targets");
        icon = "People/16x16/flag_green.png";
      }
      else if (existsInOne)
      {
        tooltip = Translate.Text("This item has been published to at least one target");
        icon = "People/16x16/flag_yellow.png";
      }

      return new GutterIconDescriptor()
      {
        Icon = icon,
        Tooltip = tooltip,
        Click = string.Format("item:publish(id={0})", item.ID)
      };
    }
  }
} 
```

这就是它的设置方式以及运行后的外观：

`Core`图 1：在数据库 中创建一个新的 Gutter 项：![在此处输入图像描述](../Images/964f3517e24fbe5fb2ef44530ed82c6d.png)

图 2：切换回您的`Master`数据库并通过右键单击装订线区域来激活装订线。 ![在此处输入图像描述](../Images/3f5645b77b8ef2d42ef913adc73333ff.png)

图 3：Gutter 现在指示项目的发布状态 ![在此处输入图像描述](../Images/626e67fd5df202150b226dfbc68beee1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:47:53.487

从我的头上看，它不是开箱即用的。然而，在核心数据库中，有排水沟的定义等。您可以创建自己的。

虽然项目上有“已发布”字段，但我不确定这是否考虑了不同的版本。也许你可以检查一下master和web中的item之间的差异（即item不存在或者web中的版本不同，然后等待发布）。

或者，阅读以下内容：[http](http://webcmd.wordpress.com/2011/08/31/sitecore-ribbon-that-displays-published-state-of-an-item/) ://webcmd.wordpress.com/2011/08/31/sitecore-ribbon-that-displays-published-state-of-an-item/ 它会解释如何检查是否项目作为功能区发布。

# android - 如何选择 GPS 和网络提供 Android

> ID：15172348
> 
> 赞同：1
> 
> 时间：2013-03-02T08:17:30.997
> 
> 标签：android, locationlistener

我正在开发一个使用用户当前位置的应用程序。如果`GPS`其他`NETWORK`提供商应用程序可用，我想使用 GPS 位置。我面临的问题是当我的应用程序正在收听网络提供并且用户从通知区域 gps 开启其 GPS 并且网络提供商没有被切换时我试图实现`GpsStatus.Listener`

并捕获gpsstatus

```
@Override
public void onGpsStatusChanged(int event)
{
} 
```

但是当位置侦听器向网络提供商注册时，它似乎没有被调用。

注意：我已经看到`google MapActivity's` `MyLocationOverlay`它使用了我正在尝试的相同概念。

请提出任何优雅的方式来实现我正在尝试的目标。

# java - 在 Java 中创建文件时遇到问题

> ID：15172350
> 
> 赞同：0
> 
> 时间：2013-03-02T08:18:20.133
> 
> 标签：java, ioexception

```
import javax.swing.*;
import java.io.*;
import java.util.*;
class Buns {
    public static void main(String[] args) {
        File f= new File("Buns.dat");
            f.createNewFile();
   }
} 
```

该程序在 createNewFile 调用上引发 IOException 谁能告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:20:07.140

将其包裹起来，`try/catch block`因为[**File#createNewFile()**](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)**可能会在IOError**的情况下抛出**IOException** .IOException 是已**检查的异常**，并且在 java 编译器中将强制您自己检查代码中的异常。****`handle/declare`****

 ****```
try {
File f= new File("Buns.dat");
f.createNewFile();
}
catch(IOException ex){
ex.printStacktrace();
} 
```

从**java 1.7 开始使用[try-with-resource 语句](http://download.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)：**

```
try(File f= new File("Buns.dat")) {
    f.createNewFile();
    }
    catch(IOException ex){
    ex.printStacktrace();
    } 
```

如果您选择使用 try-with-resource 语句，唯一的区别是您不需要使用`finally block. To use try-with-resource though the object which you use inside the try-with-resource statement must implement`java.lang.AutoCloseable 显式关闭您的资源。

您还可以通过`throws clause`在方法签名中使用来传播异常。

```
public static void main(String[] args) throws IOException { 
```

**有关的：**

*   [**Java：已检查与未检查的异常解释**](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)
*   [**官方异常图**](http://docs.oracle.com/javase/tutorial/essential/exceptions/)
*   [**Java 7's Try With Resource 语句**](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:21:15.257

```
public static void main (String [] args) throws IOException
{
    File f= new File ("Buns.dat");
    f.createNewFile ();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T08:22:03.637

检查您是否有权在您正在运行的目录中创建文件。****

# r - R中矩阵的命名行和列

> ID：15172356
> 
> 赞同：1
> 
> 时间：2013-03-02T08:19:08.280
> 
> 标签：r, matrix

是否可以在中命名行和列`Matrices`？

例如：

```
 [,a] [,b]
[a,]  1 ,  2
[b,]  3 ,  4 
```

有这样的东西来探索数据是否合理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:25:15.850

当然。使用`dimnames`：

```
> a <- matrix(1:4, nrow = 2)
> a
     [,1] [,2]
[1,]    1    3
[2,]    2    4
> dimnames(a) <- list(c("A", "B"), c("AA", "BB"))
> a
  AA BB
A  1  3
B  2  4 
```

使用，您可以为您的矩阵`dimnames`提供 (first)`rownames`和 (second)的列表。`colnames`或者，您可以指定`rownames(x) <- whatever`和`colnames(x) <- whatever`。

# ruby-on-rails - 删除后重定向到删除请求来自的页面

> ID：15172360
> 
> 赞同：0
> 
> 时间：2013-03-02T08:19:47.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个非常简单的用例：-

如果“角色”的删除请求来自“users/show”，则删除该角色并重定向到 users_show

如果“角色”的删除请求来自“xyz/show”，则删除该角色并重定向到 xyz_show

我不想通过 link_to 传递参数，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:38:23.437

尝试

```
redirect_to request.env['HTTP_REFERER'] 
```

见[http://apidock.com/rails/ActionController/Base/redirect_to](http://apidock.com/rails/ActionController/Base/redirect_to)

# facebook - Facebook - 显示所有事件

> ID：15172362
> 
> 赞同：1
> 
> 时间：2013-03-02T08:20:05.177
> 
> 标签：facebook, facebook-graph-api

我是大学最后一年的计算机专业学生，几乎没有编程经验。如果有人可以帮助我，我将非常感激。我正在尝试列出单个 Facebook 用户登录时的所有 Facebook 事件，但下面的数组返回为空且没有错误。

```
<h1>events</h1>

<?php

$me='MY-FACEBOOK-ID';

$accesstoken='MY-ACCESS-TOKEN';

//include the Facebook PHP SDK
include_once 'facebook-php-sdk-master/src/facebook.php';

//instantiate the Facebook library with the APP ID and APP SECRET
$facebook = new Facebook(array(   
'appId' => 'MY-APP-ID',   
'secret' => 'MY-FACEBOOK-SECRET',  
'cookie' => true));

$user= $facebook->getUser();
$user_profile=$facebook->api('/me');;
print$user;

$multiQuery = '{
         "attending":"SELECT name, start_time, end_time, location, description FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = '.$user.' AND rsvp_status=\'attending\')",
         "maybe":"SELECT name, start_time, end_time, location, description FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = '.$user.' AND rsvp_status=\'unsure\')",
         "declined":"SELECT name, start_time, end_time, location, description FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = '.$user.' AND rsvp_status=\'declined\')",
         "not_replied":"SELECT name, start_time, end_time, location, description FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = '.$user.' AND rsvp_status=\'not_replied\')",
         }';

$param = array(      
     'method' => 'fql.multiquery',      
     'queries' => $multiQuery,      
     'callback' => '');

try{      
    $events = $facebook->api($param);
    var_dump($events);
    $event2=$facebook->api("/$user/events?limit=1000");
    var_dump($event2);
}catch(Exception $e){echo $e->getMessage();}

?> 
```

# java - if(null check)-else 与 try catch(NullPointerException) 哪个更有效？

> ID：15172367
> 
> 赞同：18
> 
> 时间：2013-03-02T08:20:28.787
> 
> 标签：java, performance, performance-testing

以下三个功能哪个更高效；

```
 public String getmConnectedDeviceName1() {
        if(null != mServerDevice) {
            return mServerDevice.getName();
        }
        else {
            return null;
        }
    }

  public String getmConnectedDeviceName2() {
        return mServerDevice == null ? null : mServerDevice.getName();
    }

  public String getmConnectedDeviceName3() {
        try{
            return mServerDevice.getName();
        }
        catch(NullPointerException e) {
            return null;
        }
    } 
```

请以具体可接受的逻辑回复。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-02T08:23:11.683

`mServerDevice`前者在is时效率更高`null`。什么时候`mServerDevice`不是`null`两者都差不多。比较`null`只是比较两个 32 位整数，这是非常快速的操作。抛出异常代价高昂，因为应该创建新对象并填充堆栈跟踪。

三元运算符与语句`... ? ... : ...`一样有效`if (...) ... else ...`，因为两者都被翻译成相同的字节码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-02T08:21:32.537

好吧，不需要“向后”比较（主要是 C 的保留，如果您使用的是糟糕的编译器或忽略的警告，则可能无法检测到拼写错误） - 条件运算符使事情变得更简单：

```
return mServerDevice != null ? mServerDevice.getName() : null; 
```

或者：

```
 return mServerDevice == null ? null : mServerDevice.getName(); 
```

这比 catch 更具可读性*和*效率`NullPointerException`。

在更复杂的场景中，只需使用`if`版本即可。除非你调用一个错误的库，否则你*永远不*应该抓住它，它会以一种你无法避免的方式抛出它。`NullPointerException`异常并不意味着以这种方式使用。它们用于检测编程错误和异常的外部条件（例如 IO 故障）。

与其他控制流构造相比，异常*相对昂贵。*但是，不要在另一个方向上走得太远：有些人即使在*应该*使用异常时也避免异常，因为他们误入歧途地希望避免它们的成本。如果使用*得当*，异常不应成为性能配置文件的重要组成部分：如果您发现它们占用了您很多时间，则说明您的环境中存在严重错误（例如，您一直在尝试连接到您无权访问的数据库）或者您正在滥用异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T08:47:51.123

我绝对同意其余的答案。为了不完全一样，我只会告诉你，现在我正在介绍一个已经编写了大约3年的相当大的商业源代码，我还没有看到任何使用`try-catch`你提到的方法的声明；虽然有很多检查`null`;）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T08:24:28.070

使用 try-catch 子句绝对不是更好的方法。

try-catch 也会导致新对象的实例化（异常）。如果 else 也提高了可读性。因此，如果您有很多 n == null 的情况，我会说 (n!=null) 更快。n!=null 也是超快的构造。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T08:24:00.807

在可以的情况下使用`if-else`。抛出和捕获异常可能很昂贵，应该用于处理错误情况（不适用于逻辑分支）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T08:26:27.550

不管性能如何，我更喜欢 if-else 形式。假设 mServerDevice 不为 null，但在 getName() 调用期间出现严重错误，并引发 NullPointerException。基于异常的版本将静默返回 null，而不记录错误。

# events - Corona - 表格对象中的触摸事件？

> ID：15172369
> 
> 赞同：0
> 
> 时间：2013-03-02T08:20:40.130
> 
> 标签：events, lua, listener, coronasdk, lua-table

我正在尝试在项目中使用它，但我无法弄清楚如何为轮播中的每个图标/对象放置一个触摸事件侦听器，如果有人可以提供如何做到这一点的快速答案，我将不胜感激.

```
 local NUM_ITEMS=20;  
    local radiusX= 200;  
    local radiusY= 40;  
    local centerX = 240;  
    local centerY = 160;  
    local speed = 0.05;  
    local perspective = 3;    

    local carousel = display.newGroup()
    local icons = {}

    local function zSort(myTable, myGroup)

            table.sort(myTable,  
                    function(a, b)
                        return a.depth < b.depth -- depth is your custom field
                    end
            )
            for i = 1, #myTable do
                    myGroup:insert(myTable[i].img)
            end

    end

function Icon(i)
        local this = {}
        local icon = display.newImage(carousel, "images/icon"..i..".png")
        this.angle = (i-1) * math.rad(360/NUM_ITEMS);  
        this.img = icon
        return this
end

function update(event)

        local icon
        local sin = math.sin
        local cos = math.cos

        for i=1, NUM_ITEMS, 1 do

                icon = icons[i]
                local img = icon.img

                img.x = cos(icon.angle) * radiusX + centerX
                img.y = sin(icon.angle) * radiusY + centerY

                local s = (img.y - perspective) / (centerX + radiusY - perspective)
                img.xScale = s*0.25
                img.yScale = s*0.25

                icon.angle = (icon.angle  + speed) --%math.rad(360)

                icon.depth = s

        end

        zSort(icons, carousel)

end

for i=1, NUM_ITEMS, 1 do
        local icon = Icon(i)
        icons[i] = icon 
end

function onTouch(event)
        if(event.phase=="moved") then
                speed = (event.x - centerX) / 2000;  
        end
end

Runtime:addEventListener("enterFrame",update)
Runtime:addEventListener("touch", onTouch) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:00:54.267

我不能完全理解你真正需要什么。但是，如果您想为 localGroup 中的所有相同图标添加单独的触摸，则可以将图标添加为图标数组并赋予`specific tag`每个图标，并且可以单独触摸，如下所示：

```
 local icons = {}
 for i=1,10 do
   icons[i] = display.newImage(i..".png")
   icons[i].tag = i
 end

 local function touchIt(e)
   print(e.target.tag) 
   --[[ icons[e.target.tag] can be used to identify 
        and set properties to the touched icon --]]
 end
 for i=1,10 do
   icons[i]:addEventListener("touch",touchIt)
 end 
```

**或者**

如果要将所有组元素标识为相同并进行触摸，则可以对所有图标使用`same tag`/赋予`userdata`，并且可以对所有组元素进行相同的触摸动作（如下）。

```
 local icons = {}
 for i=1,10 do
   icons[i] = display.newImage(i..".png")
   icons[i].tag = 1 --[[ you can also use icons[i].userdata = "icons" 
                         (or any string)--]]
 end

 local function touchIt(e)
   print(e.target.tag) -- It willo be 1 for all icons
                       --[[ icons[e.target.tag] can be used to identify 
                            whether if it is under 'icons' --]]

  --[[ or use userdata as follows --]]
  print(e.target.userdata)--[[ out put is a string 
                             identifying the group/element--]]
 end
 for i=1,10 do
   icons[i]:addEventListener("touch",touchIt)
 end 
```

# ios - 通过 lldb 访问超类上的 getter 方法 - 在对象上找不到预期的 getter 方法

> ID：15172370
> 
> 赞同：2
> 
> 时间：2013-03-02T08:20:44.950
> 
> 标签：ios, uiview, uibutton, lldb

我有这个属性：

```
@property (retain, nonatomic) IBOutlet UIButton *dismissKeyboardButton; 
```

和此行之后的断点：

```
self.dismissKeyboardButton.hidden = NO; 
```

代码在此断点后停止。在 lldb 控制台中，我使用以下命令检查按钮：

```
(lldb) po self.dismissKeyboardButton
$2 = 0x0966b240 <UIButton: 0x966b240; frame = (431 234; 49 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0x966b300>> 
```

但是，我无法检查其 UIView 超类的属性，例如

```
(lldb) po self.dismissKeyboardButton.hidden
error: expected getter method not found on object of type 'UIButton *'
error: 1 errors parsing expression 
```

您可以通过 lldb 访问超类上的 getter 方法吗？如果可以，如何访问？

# browser - 关于如何编辑浏览器以仅允许 2-3 个选项卡并且不允许多个实例的任何想法

> ID：15172373
> 
> 赞同：0
> 
> 时间：2013-03-02T08:21:12.380
> 
> 标签：browser, configuration

在菲律宾，互联网商店/咖啡馆老板担心互联网连接，因为这里的互联网服务供应商在互联网连接方面提供昂贵的价格，现在的问题是如何让客户在互联网连接中公平使用. 主要是用户加载 facebook 和 youtube，Youtube 的带宽成本很高，而且一些用户加载了很多。店主正在使用缓存服务器/系统来协助连接，但 youtube 仍然是一个拖累。现在，任何机会.. 有没有办法编辑浏览器，即 chrome、firefox 等只运行一次并且只允许 2-3 个选项卡？取决于商店所有者将如何允许标签或至少 youtube 将在浏览器中仅运行一次？

这对我来说很复杂，我一直在寻找。任何建议、意见或帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:28:42.710

经过非常快速的谷歌搜索，我找到[了这个插件](http://www.chromestory.com/2010/04/how-to-limit-the-number-of-tabs-that-you-can-open-on-chrome/)，它可以让你限制在 Chrome 中打开的标签数量。

# command-line - 是否有工具可以直接运行带有参数的程序？

> ID：15172379
> 
> 赞同：-2
> 
> 时间：2013-03-02T08:21:24.050
> 
> 标签：command-line, arguments, executable

我正在寻找一种工具，我可以使用它直接启动一个在 Windows 下提供命令行参数的程序。在 Visual Studio 中，我可以选择设置启动参数，但调试起来不太方便。我也使用没有此内置选项的其他 IDE。有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:24:56.400

有一个名为**Args[]**的工具，它是基于上下文菜单的。当您右键单击一个 exe 文件时，您可以选择“从参数开始”。[您可以在此处](http://uploaded.net/file/cjjsqi78)下载该工具的最新版本作为安装程序。

# pear - 没有找到 PEAR Mailer？- 未能打开所需的“Mail.php”

> ID：15172383
> 
> 赞同：0
> 
> 时间：2013-03-02T08:21:41.900
> 
> 标签：pear, php, fatal-error, include-path

好的，我不知道为什么它不能包含这个文件；我已按照此页面上的说明进行操作：http: [//pear.php.net/manual/en/installation.checking.php](http://pear.php.net/manual/en/installation.checking.php)

PEAR 安装路径是：`/usr/local/lib/php`

我的包含路径是：

```
include_path = ".:/usr/lib/php:/usr/local/lib/php" 
```

据我所知，PEAR Mail 已安装 - `Mail.php`PEAR 安装路径和`mail`目录中都有一个。

添加包含路径后，我已重新启动服务；完整的错误是：

```
Fatal error: require_once() [function.require]: Failed opening required 'Mail.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/username/public_html/includes/functions.php on line 3290 
```

我在我的其他服务器上使用它很好，不知道为什么它在这里不起作用！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:43:05.423

它是由使用`suPHP`处理程序引起的；显然，这对 PEAR Mailer 不太适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:33:31.777

所以你可以确认文件`/usr/local/lib/php/Mail.php`存在吗？如果是这种情况，您可能会遇到权限问题，导致您的 Web 服务器无法读取该文件。

检查权限`ls -l`：

```
$ ls -l /usr/local/lib/php|grep Mail
drwxr-xr-x  3 root root   4096 Sep  5  2011 Mail
-rw-r--r--  1 root root   9903 Sep 26  2010 Mail.php 
```

应该有三个“r” `Mail.php`。如果不是这种情况，请使用

```
$ chmod og+r /usr/local/lib/php/Mail.php 
```

# c++ - 在标准 C++ 中创建动态位 集？

> ID：15172385
> 
> 赞同：3
> 
> 时间：2013-03-02T08:21:56.590
> 
> 标签：c++, vector, boolean, bitset

我觉得我只是希望他们可以，但是向量可以访问位集成员函数吗？

例如，我可以做类似的事情。

```
vector<bool> myvector;
myvector.count();
myvector.test(1); 
```

如果没有，是否可以使用标准 C++ 库动态创建位集？

编辑：

我想使用某些位集函数（测试、计数）并想使用构造函数`bitset (unsigned long val)`。

基本上我想为一些任意创建一个位集，`val`然后用测试和计数做一些操作。然后我想用递减的 val 释放并重新创建位集。我想继续这样做，直到 val 小于 8。

但是，创建动态位​​集似乎是不可能的，并且使用动态的向量意味着我可以使用一些不错的位集函数。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-28T16:39:55.710

我已经回答了类似的问题，所以我建议[BITSCAN](https://github.com/psanse/bitscan)，一个专门针对快速位扫描的动态位集框架。它已经在 Linux 和 Windows 上进行了测试。可以[在此处](http://blog.biicode.com/bitscan-efficiency-at-glance/)获得与 STL *bitset*和 Boost 的*dynamic_bitset*的比较。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-02T13:17:23.863

听起来您实际上并不需要动态位集。`std::bitset`是可复制分配的，因此您可以执行以下操作：

```
const size_t size = sizeof(unsigned long) * CHAR_BIT;
typedef std::bitset<size> my_bitset;

unsigned long val = 42;
my_bitset bs(val);

/* do work */

bs = my_bitset(--val); // assign with new, decremented val 
```

# libtiff - 安装 tiff-3.8.2 时出错

> ID：15172387
> 
> 赞同：3
> 
> 时间：2013-03-02T08:22:02.713
> 
> 标签：libtiff

```
pranav@pranav-Inspiron-1545:~/dependency/tiff-3.8.2$ make
Making all in port
make[1]: Entering directory `/home/pranav/dependency/tiff-3.8.2/port'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/home/pranav/dependency/tiff-3.8.2/port'
Making all in libtiff
make[1]: Entering directory `/home/pranav/dependency/tiff-3.8.2/libtiff'
make  all-am
make[2]: Entering directory `/home/pranav/dependency/tiff-3.8.2/libtiff'
if /bin/bash ../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I. -I.     -g -O2 -Wall -W -MT tif_jpeg.lo -MD -MP -MF ".deps/tif_jpeg.Tpo" -c -o tif_jpeg.lo tif_jpeg.c; \
    then mv -f ".deps/tif_jpeg.Tpo" ".deps/tif_jpeg.Plo"; else rm -f ".deps/tif_jpeg.Tpo"; exit 1; fi
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I. -I. -g -O2 -Wall -W -MT tif_jpeg.lo -MD -MP -MF .deps/tif_jpeg.Tpo -c tif_jpeg.c  -fPIC -DPIC -o .libs/tif_jpeg.o
In file included from /usr/local/include/jpeglib.h:27:0,
                 from tif_jpeg.c:87:
/usr/local/include/jmorecfg.h:263:16: error: expected identifier before numeric constant
tif_jpeg.c: In function 'JPEGVSetField':
tif_jpeg.c:1578:8: warning: suggest braces around empty body in an 'if' statement [-Wempty-body]
make[2]: *** [tif_jpeg.lo] Error 1
make[2]: Leaving directory `/home/pranav/dependency/tiff-3.8.2/libtiff'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/pranav/dependency/tiff-3.8.2/libtiff'
make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T17:38:20.690

编辑文件：`/usr/local/include/jmorecfg.h`

换行：

```
typedef enum { FALSE = 0 , TRUE = 1 } boolean; 
```

至：

```
typedef enum { false= 0 , true= 1 } boolean; 
```

然后，使成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T11:09:31.230

我在编译安装 emacs 时遇到了这个错误，我认为这不是一个完美的解决方案，我的解决方案是在更改之前更改名为 jpeglib.h 的源文件：

```
# include <jpeglib.h> 
```

后：

```
#define HAVE_BOOLEAN
typedef unsigned char boolean;
# include <jpeglib.h>
#undef HAVE_BOOLEAN 
```

这个解决方案工作正常。

# redirect - DNS 将 domain.com 重定向到 www.domain.com

> ID：15172394
> 
> 赞同：73
> 
> 时间：2013-03-02T08:22:22.023
> 
> 标签：redirect, dns, cname

我已经对该问题进行了网络搜索，但对结果完全失望。案例是将所有对 domain.com 的请求重定向到子域 www.domain.com。

所以我有什么：

1.  **www.domain.com** - 主网站域，所有客户端请求都应重定向到此处
2.  **domain.com** - 另一个不使用 www 前缀的人的网站入口点，所有请求都应重定向到 www.domain.com
3.  **mydomain.com** - 替代网站别名，所有请求都应重定向到 www.domain.com
4.  **www.mydomain.com** - 对于使用 www 前缀的人，所有请求都应重定向到 www.domain.com

我知道使用 .htaccess 和 PHP 可以做到这一点。但我想弄清楚如何仅使用 DNS 来完成。我也知道 DNS 查询的结果不会改变 HTTP 层中发生的情况，因此最初输入的域名将始终是发送到主机中的 Web 服务器的域名。因此，要将 domain.com 重写为 www.domain.com，我仍然需要 Apache mod_rewrite。但我想用 DNS（CNAME 和 A 记录）做主要工作。

所以主要的问题是上面的每个域应该有什么 CNAME 和 A 记录？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-02T08:28:06.190

您可以将 www.domain.com 设为 A 记录，并将 www.domain.com 的所有其他域名 CNAME。但这只能“解决”如果 www.domain.com 的 IP 地址发生更改，您不必更改其他 DNS 实体，因为它们是别名。

因此，在 DNS 级别上，无法强制执行重定向。并且有一个很好的理由，因为 DNS 不仅仅用于 HTTP。例如，如果对 domain.com 的所有请求都将重定向到 www.domain.com，您的电子邮件地址将更改为 user@www.domain.com。

因此，对于 HTTP 重定向，您将不得不使用 HTTP 解决方案。这可以在网络服务器级别（mod_rewrite、代码、javascript（呃）等），但您也可以在网络服务器前面有一个代理来处理这个问题。

# hadoop - Hive 中的奇怪异常：语义分析中的错误

> ID：15172397
> 
> 赞同：3
> 
> 时间：2013-03-02T08:22:35.757
> 
> 标签：hadoop, hive, thrift

也许当您在标题中看到“语义错误”时，您认为它是语法错误？当然不是，我会告诉你发生了什么。

```
hive> use android;
OK
Time taken: 0.223 seconds
hive> desc tb_user_basics;
OK
col_datetime    string  
col_is_day_new  string  
col_is_hour_new string  
col_ch  string  
...
p_date  string  
p_hourmin   string  
Time taken: 0.189 seconds
hive> select count(distinct col_udid) from android.tb_user_basics where p_date>='20121001' and p_date<='20121231';
FAILED: Error in semantic analysis: org.apache.thrift.transport.TTransportException: java.net.SocketTimeoutException: Read timed out
hive> 
> 
> select count(distinct col_udid) from android.tb_user_basics where p_date>='20121001' and p_date<='20121231';
FAILED: Error in semantic analysis: Unable to fetch table tb_user_basics 
```

我很确定该表确实存在于数据库 android 中。第一条语句失败后，似乎表丢失了。（即使我在表名中添加了db前缀）

我想知道是不是因为数据量很大，也许你注意到时间范围是[20121001, 20121231]。我之前多次运行该命令，总是引发此错误。但是如果我把条件改成“p_date='20121001'”，语句就可以正常运行了。（因为体积更小？）

期待你的回答，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:54:34.553

可能您处于严格模式。严格模式功能之一是必须指定分区，所以这就是为什么使用“p_date='20121001'”的查询在哪里起作用的原因。

请尝试非严格模式：

```
set hive.mapred.mode=nonstrict; 
```

# .net - DevExpress 日期编辑自定义以仅允许特定日期

> ID：15172413
> 
> 赞同：1
> 
> 时间：2013-03-02T08:25:08.193
> 
> 标签：.net, vb.net, winforms, devexpress, .net-2.0

我在这里使用了示例[How to create a DateEdit descendant that will allow date unit selection, and multiple dates and period selection](http://www.devexpress.com/Support/Center/Example/Details/E2007?currentProgrammingLanguage=VB.NET&version=v2009%20vol%202.9%20-%20v2012%20vol%201.9)。我想再添加一个功能，我将提供一组日期，只有那些日期才可见。我已经修改了代码并包含了一个属性来接受日期范围，如果提供它只会允许查看和选择这些日期，但我无法理解我应该重写哪个函数来完成任务。行为应该类似于提供编辑器时的行为，`MaxValue`并且`MinValue`

[这是我的代码](http://pastebin.com/jcbyYeXS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:17:49.070

查看 VistaDateEditInfoArgs 类的（标准）实现。您可以使用 .NET 程序集反编译器，例如 .NET Reflector 或 ILSpy。如果相关的日期时间不可见/不允许，则可以覆盖几个虚拟方法并返回 null。以下是这些方法的源代码（请注意“标准”基于 MinValue / MaxValue 的检查）：

**[DevExpress.XtraEditors.ViewInfo.VistaDateEditInfoArgs]**

```
protected virtual DayNumberCellInfo CreateMonthCellInfo(int row, int col)
{
    DayNumberCellInfo info;
    DateTime date = new DateTime(this.DateTime.Year, (1 + (row * 4)) + col, 1);
    if (date > this.Calendar.MaxValue)
    {
        return null;
    }
    if ((date < this.Calendar.MinValue) && (date.Month < this.Calendar.MinValue.Month))
    {
        return null;
    }

    return new DayNumberCellInfo(date) { Text = this.Calendar.DateFormat.GetAbbreviatedMonthName    (info.Date.Month) };
}

protected virtual DayNumberCellInfo CreateYearCellInfo(int row, int col)
{
    int num = ((this.DateTime.Year / 10) * 10) - 1;
    int year = (num + (row * 4)) + col;
    if ((year <= 0) || (year >= 0x2710))
    {
        return null;
    }
    DateTime date = new DateTime(year, 1, 1);
    if (date > this.Calendar.MaxValue)
    {
        return null;
    }
    if ((date < this.Calendar.MinValue) && (date.Year < this.Calendar.MinValue.Year))
    {
        return null;
    }
    DayNumberCellInfo info = new DayNumberCellInfo(date) {
        Text = year.ToString()
    };
    if ((year < ((this.DateTime.Year / 10) * 10)) || (year > (((this.DateTime.Year / 10) * 10) + 1)))
    {
        info.State = ObjectState.Disabled;
    }
    return info;
}

protected virtual DayNumberCellInfo CreateYearsGroupCellInfo(int row, int col)
{
    int num = ((this.DateTime.Year / 100) * 100) - 10;
    int year = num + (((row * 4) + col) * 10);
    if ((year < 0) || (year >= 0x2710))
    {
        return null;
    }
    int num3 = year + 9;
    if (year == 0)
    {
        year = 1;
    }
    DateTime date = new DateTime(year, 1, 1);
    if (date > this.Calendar.MaxValue)
    {
        return null;
    }
    if ((date < this.Calendar.MinValue) && (num3 < this.Calendar.MinValue.Year))
    {
        return null;
    }
    return new DayNumberCellInfo(date) { Text = year.ToString() + "-\n" + num3.ToString() };
} 
```

我建议您在后代类中覆盖这些方法并添加您的自定义检查。例如，您可以像这样重写 CreateMonthCellInfo 方法：

```
protected override DayNumberCellInfo CreateMonthCellInfo(int row, int col)
{
    DateTime date = new DateTime(this.DateTime.Year, (1 + (row * 4)) + col, 1);

    if (!IsDateAvailable(date))
    {
        return null;
    }

    return base.CreateMonthCellInfo(row, col);
}

// Your date availibility check implementation here
private bool IsDateAvailable(DateTime date)
{
    // TODO provide implementation
    throw new NotImplementedException();
} 
```

# java - 在 Spring 中存储 bean 实例

> ID：15172414
> 
> 赞同：0
> 
> 时间：2013-03-02T08:25:11.807
> 
> 标签：java, spring, tomcat, spring-mvc, spring-webflow

我的 Web 应用程序中有一个身份验证方法，它从另一个应用程序获取 http 参数。我从数据库加载我的用户并将其存储在 spring bean 中。在我的登录控制器中它被实例化了，但是当我将它注入另一个控制器时，它会丢失它的属性，并且当我想联系我的用户时我会得到“null”。如何使 bean 的属性在所有其他控制器中可用？我不想使用静态属性...我试图使 bean 成为“会话范围”，但它不起作用。

超级豆：

```
 @Service
@SessionScoped
public class SessionUserBean {

    public Dolgozo user;

    public Boolean userIsDolgozo;
    public Boolean userIsIranyito;
    public Boolean userIsVezeto;
    public Boolean userIsOsztalyVezeto;

    public void setUser(Dolgozo user) {
        this.user = user;
    }

    public Dolgozo getUser() {
        return user;
    }
} 
```

我设置了用户属性的值：

```
@Autowired
    private SessionUser sessionUser;
    @Autowired
    private SessionUserBean user;

    @Autowired
    private HttpServletRequest request;

    @RequestMapping("index.htm")
    public String doLogin(@RequestParam String token) {

        if (login.isUserAuthanticated(token)) {

            user.setUser(sessionUser.getDolgozo()); 

            return "sikeresBelepes";
        }

        return "sikertelenBelepes";
    } 
```

这就是我想使用它的地方：

```
@Autowired
    private SessionUserBean user;

    public void setUp() {
        employees = drp.findByCsoportID(user.getUser().getCsoportid().getId());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:20:26.170

真是一团糟！

为什么不使用[Spring Security](http://static.springsource.org/spring-security/site/)？它通过设置一组过滤器自动为您管理[安全上下文。](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/context/SecurityContext.html)您可以在应用程序的任何位置访问用户信息。

如果不是，您必须在代码中的某处设置会话中的用户，您不能只是自动装配它。像这样：

```
@RequestMapping("index.htm")
public String doLogin(@RequestParam String token) {
    if (login.isUserAuthanticated(token)) {
        user.setUser(sessionUser.getDolgozo()); 
        return "sikeresBelepes";

       session.addAttribute("securityUser", user);
    }

    return "sikertelenBelepes";
} 
```

然后从会话中获取它`getAttribute()`

# c - C 未能包括

> ID：15172419
> 
> 赞同：0
> 
> 时间：2013-03-02T08:25:43.197
> 
> 标签：c, include

我们需要对下载的大包做一些增强。假设主文件夹就像

.../项目

并且有

.../项目/Makefile

这将用于编译项目。

我添加了一个新文件夹

.../proj/feature1/file1.h .../proj/feature1/file1.c

file1.c 是包含 file1.h

所以

#include "feature1/file1.h"

然后在执行 Makefile 时，它​​停止在类似的命令处

gcc -c feature1/file1.c -I。...

错误消息读取为未能包含 file1.h

可以在另一个实例中编译相同的代码而不会触发错误。这两个实例都是 ubuntu 10.04。我不会说它们是相同的，但应该非常相似。知道出了什么问题吗？谢谢。

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:27:46.207

这取决于[gcc 的“-I”参数](http://tigcc.ticalc.org/doc/comopts.html#SEC14)。如果文件夹“feature1”在其中而不是其父文件夹 - 它将失败。如果它的父母在其中 - 它会成功。

在您的情况下（“-I.”），它是搜索路径中的“feature1”，而不是其父级。

此外，正如其他人所提到的，由于两个文件都在同一个目录中，因此您不需要“ `include`”指令中的目录名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:29:33.673

```
file1.c is to include file1.h 
```

在这种情况下，两个文件都在同一个文件夹中，所以我认为它必须是：

```
#include "file1.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T08:29:34.630

如果 .h 和 .c 文件位于同一目录中，我希望包含为：

```
#include "file1.h" 
```

# javascript - 使用 Cytoscape.js 添加边缘标签

> ID：15172427
> 
> 赞同：28
> 
> 时间：2013-03-02T08:26:54.483
> 
> 标签：javascript, graph, cytoscape.js

如何使用 Cytoscape.js 在边缘添加标签？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-04T16:47:28.573

`label`将样式属性映射到数据字段：

例如在初始化的样式表中

```
...

{
  selector: 'edge',
  style: {
    'label': 'data(label)' // maps to data.label
  }
} 

... 
```

[http://cytoscape.github.com/cytoscape.js/#style/properties](http://cytoscape.github.com/cytoscape.js/#style/properties)

旧版本使用`content:`. `label:`较新版本的 2.x 允许`label`并且还`content`用于向后兼容。

# mysql - 如何找到计数最高的对象的数量？

> ID：15172432
> 
> 赞同：-1
> 
> 时间：2013-03-02T08:28:04.303
> 
> 标签：mysql

```
create table foos (id, val1, ...)

create table bars (id, foo_id, val2\. ...) 
```

* * *

```
insert into foos (1, 1, ..)

insert into foos (2, 2, ..)

insert into foos (3, 3, ..) 
```

* * *

```
insert into bars (1, 1, 1, ..)

insert into bars (2, 1, 1, ..)

insert into bars (3, 1, 1, ..)

insert into bars (4, 2, 1, ..)

insert into bars (5, 2, 1, ..)

insert into bars (6, 2, 1, ..)

insert into bars (7, 2, 1, ..)

insert into bars (8, 3, 1, ..) 
```

我想计算这样的条数，我应该如何以递减的计数顺序来计算

```
2, 4 (foo 2 has 4 bars)

1, 3 (foo 1 has 3 bars)

3, 1 (foo 3 has a bar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:32:43.640

```
SELECT `foo_id`, COUNT(1) AS `count`
FROM `bars`
GROUP BY `foo_id`
ORDER BY `count` DESC 
```

这是[SQLfiddle](http://sqlfiddle.com/#!2/5b91d3/1)链接。

# ruby-on-rails-3 - 回形针和 Phusion 乘客 NoHandlerError

> ID：15172439
> 
> 赞同：2
> 
> 时间：2013-03-02T08:28:42.593
> 
> 标签：ruby-on-rails-3, rack, passenger

我按照本指南通过 AJAX 获取拖放文件上传：http: [//dannemanne.com/posts/drag-n-drop_upload_that_works_with_ror_and_paperclip](http://dannemanne.com/posts/drag-n-drop_upload_that_works_with_ror_and_paperclip)

使用 WebBrick 在我的开发环境中一切正常，但如果我部署到 PhusionPassenger，我会得到：

```
Paperclip::AdapterRegistry::NoHandlerError (No handler found for #<PhusionPassenger::Utils::RewindableInput:0x000000041aef38 @io=#<PhusionPassen... 
```

我在我的控制器中使用它：

```
before_filter :parse_raw_upload, :only => :bulk_submissions

def bulk_submissions
    ...
    @submission = Submission.create!(url: "", file: @raw_file, description: "Please edit this description", work_type: "other", date_completed: DateTime.now.to_date)  

    ...      
end

private
def parse_raw_upload

  if env['HTTP_X_FILE_UPLOAD'] == 'true'
     @raw_file = env['rack.input']
     @raw_file.class.class_eval { attr_accessor :original_filename, :content_type }
     @raw_file.original_filename = env['HTTP_X_FILE_NAME']
     @raw_file.content_type = env['HTTP_X_MIME_TYPE']
  end
end 
```

查看请求本身，所有标头都已设置（X_MIME_TYPE，X_FILE_NAME）等。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:07:26.523

您引用的示例期望文件流是一个 StringIO 对象，但Passenger 给您的是一个 PhusionPassenger::Utils::RewindableInput 对象。

幸运的是，在这种情况下，RewindableInput 类似于 StringIO，因此 Paperclip 的 StringioAdapter 可用于包装您的上传流。

在 parse_raw_upload 的 if 块中，最后，执行以下操作：

```
if @raw_file.class.name == 'PhusionPassenger::Utils::RewindableInput'
  @raw_file = Paperclip::StringioAdapter.new(@raw_file)
end 
```

# php - 如何向新注册用户发送确认电子邮件？

> ID：15172441
> 
> 赞同：1
> 
> 时间：2013-03-02T08:28:47.437
> 
> 标签：php, mysql

我想用他们的用户名向新注册用户发送确认电子邮件我有代码并且所有详细信息都插入到 mysql 数据库中我正在处理它但它不会向注册用户发送电子邮件

```
<?php
$email=$_SESSION['email'];
if(!$_SESSION['email'] || $_SESSION['email']){
header('Location:login.php');
}
if(isset($_REQUEST['signup'])){
$signup=$_POST['signup'];   
$username=$_POST['username'];
$password=$_POST['password'];
$fname=$_POST['fname'];
$lname=$_POST['lname'];
$gender=$_POST['gender'];
$datepicker=$_POST['datepicker'];
$email=$_POST['email'];
$phone=$_POST['phone'];
$address=$_POST['address'];
$country=$_POST['country'];
$city=$_POST['city'];

$validemail = eregi("^[a-z0-9_-]+(\.[a-z0-9_-]+)*@([a-z0-9_-]+\.)*[a-z0-9_-]+\.[a-z]{2,}$", $email); //VALID EMAIL PATTERN

 //CHECKS IF ALL FIELDS HAVE BEEN FILLED
 if($username&&$password&&$fname&&$lname){
 //CHECKS IF EMAIL IS VALID
 if($validemail){
 $q = mysql_query("SELECT * FROM customers WHERE email='$email'");
 $r = mysql_fetch_assoc($q);
 $n = mysql_num_rows($q);
//CHECKS IF EMAIL ALREADY EXISTS IN THE DATABASE
if(!$n){
$q = mysql_query("SELECT * FROM customers WHERE username='$username'");
$r = mysql_fetch_assoc($q);
$n = mysql_num_rows($q);
//CHECKS IF USERNAME ALREADY EXISTS IN THE DATABASE
if(!$n){
//CHECKS IF THE PASSWORD AND CONFIRMATION PASSWORD MATCH
if($password){
//IF ALL CONDITIONS ARE TRUE, THE USER IS REGISTERED AND AN ACTIVATION KEY IS PROCESSED   AND SENT VIA EMAIL
$alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
$length = 11;
for($i=0; $i<$length; $i++){
$ran = rand(0, strlen($alpha)-1);
$key .= substr($alpha, $ran, 1);
}
//SENDS EMAIL THAT TELLS THE USER TO ACTIVATE THE ACCOUNT
$activation = 'activation.php?key='.$key;
$your_email = 'non-reply@mydomain.com'; //CHANGE TO YOUR SETTINGS
$domain = $_SERVER["HTTP_HOST"]; //YOUR DOMAIN AND EXTENSION
$to = $email;
$subject = 'Activate Account';
$message = 'Welcome, '.$_POST['username'].'. You must activate your account via this message to log in. Click the following link to do so: http://'.$domain.'/'.$activation;
$headers = 'From: My Domain <'.$your_email.'@'.$domain.'>\r\n'; //MODIFY TO YOUR SETTINGS
$headers .= 'Content-type: text/html\r\n';
mail($to, $subject, $message, $headers);
}
}}}}

$sqlquery=mysql_query("INSERT INTO customers   VALUE('','$username','$password','$fname','$lname',
'$gender','$datepicker','$email','$phone','$address','$country','$city','','$key','')")or  die("Error");

 if ($sqlquery)
 {

 header('location:index.php?id=signup-confirmation');
 }
 else {
 header('location:signup.php');
 }
 } 

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:34:55.520

首先，$to 是否像您期望的那样回显？

要检查的第二件事是查看您的服务器上的 php.ini 文件中的 mail() 设置是否正确设置，或者在执行 mail() 之前为各种 mail() 参数调用 ini_set。

如果您不拥有服务器，请联系所有者并询问是否启用了 mail()。

一些主机禁用它以防止垃圾邮件等。PEAR Mail 比 mail() 更受欢迎，因为它支持身份验证等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:35:04.403

两个问题：

首先，您的标题中有太多`@`字符。`From:`你做：

```
$your_email = 'non-reply@mydomain.com'; 
```

然后你做

```
$headers = 'From: My Domain <'.$your_email.'@'.$domain'>\r\n' 
```

所以这将导致`non-reply@mydomain.com@$domain`.

其次，分配时需要使用双引号`$headers`，因为`\r\n`转义序列不会用单引号解释。

# drupal - Drupal7 在提交时将文件字段复制到另一个节点

> ID：15172442
> 
> 赞同：1
> 
> 时间：2013-03-02T08:28:57.453
> 
> 标签：drupal, drupal-7, drupal-files

我有一个内容类型，除了其他字段外，它还具有无限的文件字段字段。在节点保存/提交时，我想为字段中的每个文件创建一个附加节点，并将该文件字段分配给它。我对 nodeapi 挂钩并以编程方式创建节点很好，但我无法从节点访问文件字段的内容。当我从 hook_node_insert 中打印文件字段内容时，我得到： ...

```
 (
    [fid] => 38
    [display] => 1
    [description] => 
    [upload_button] => Upload
    [remove_button] => Remove
    [upload] => 
    ) 
```

……

不是我通常会看到的格式化和继续字段。我怀疑我可以从表单中以某种方式访问​​它并在修改后提交表单，但我不确定如何执行此操作，它可能不是最好的方法。如果您对此有任何提示，请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:23:28.277

因为我们已经`[fid]`填充了，我们可以使用[file_load($fid)](http://api.drupal.org/api/drupal/includes!file.inc/function/file_load/7)来加载文件对象。然后您可以将此文件对象转换为数组，然后将其附加到新创建节点的文件字段。

循环遍历数组并为`$fid`您遇到的每个..

```
$file = file_load($fid);    
$new_node= new StdClass();
$new_node->type = 'image';
$new_node->language = LANGUAGE_NONE;
node_object_prepare($new_node);

// add additional data about new node.

$new_node->field_custom_files[LANGUAGE_NONE][] = array($file);

node_submit($new_node);
node_save($new_node); 
```

*我没有对此进行测试，但是如果您遇到任何问题，请告诉我。*

# ios - 当我应用旋转和变换时，iOS 上的图像变得狭窄和挤压

> ID：15172449
> 
> 赞同：1
> 
> 时间：2013-03-02T08:29:38.187
> 
> 标签：ios, core-graphics

我正在使用以下代码来旋转和转换图像视图：

```
myImageView.transform = CGAffineTransformMakeRotation(45); // rotation

CGRect frame = myImageView.frame;
frame.origin.x = x_position;
frame.origin.y = y_position;
myImageView.frame = frame; // transformation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:37:42.180

**tl; dr：**`frame`当你有一个 non-identity 时，这是假的`transform`。改为`center`改为。

* * *

从[文档中](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)：

> **警告**如果该`transform`属性不是恒等变换，则该属性的值是未定义的，因此应该被忽略。

当您在第一行设置转换，然后在未定义帧之后读取您实际返回的内容。

```
// Setting a non-identity transform (1)
myImageView.transform = CGAffineTransformMakeRotation(45); 

CGRect frame = myImageView.frame; // At this point the frame is undefined (2)
// You are modifying something which is undefined from now on ... 
```

此外，您不仅不应该因为未定义而读取框架，也不应该设置它。

> 如果`transform`属性包含非恒等变换，则 frame 属性的值未定义且不应修改。

该问题的解决方案出现在文档的下一句中

> 在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

由于您只是更改位置，我建议您不要触摸框架，而是读取`center`图像视图并将其设置为新值。与框架一样，`center`它不受变换的影响。

```
CGPoint center = myImageView.center; 
center.x = x_center_position; // Note that the `center` is not the same as the frame origin.
center.y = y_center_position; // Note that the `center` is not the same as the frame origin.
myImageView.center = center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:35:27.680

尝试删除 ImageView 的自动调整大小掩码

```
imageView.autoresizingMask = UIViewAutoresizingNone; 
```

这可能会解决您的问题

# php - 如何使用 htaccess 创建一个虚假的子域？

> ID：15172451
> 
> 赞同：-1
> 
> 时间：2013-03-02T08:30:07.123
> 
> 标签：php, .htaccess, subdomain

这可能与 htaccess

[http://domain.com/index.php?u=userone](http://domain.com/index.php?u=userone)

转向这个？

[http://userone.domain.com](http://userone.domain.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:36:17.963

对于动态子域，您实际上并不需要 .htaccess。
不知道为什么每个人都这么坚持。一旦您将所有 *.example.com 请求定向到您的文档根目录，您就可以使用`HTTP_HOST`env 变量来区分它们。

您真正需要的是设置您的 DNS 记录。没有 .htaccess 可以帮助你。

# php - 通过具有相同结果的两个变量过滤sql搜索

> ID：15172454
> 
> 赞同：0
> 
> 时间：2013-03-02T08:30:50.163
> 
> 标签：php, sql

我不确定我该怎么做，但我有两张桌子：

```
--users--
id_users (index)
name_users

--friend--
id_friend (index)
id_user (connects to id_users)
linked_friend (also links to id_users as this is the id of the requested friend) 
```

对于请求的友谊，在friend.id_user col中请求的用户和他们请求在friend.linked_friend col中的用户存在一行。为了确认友谊链接，将创建另一行信息反转，以便每个友谊有两行，每个用户都在friend.id_user和friend.linked_friend列中。（如果我能以更好的方式做到这一点，请告诉我）

所以我需要为每个用户列出系统上所有已确认的友谊（两行）而不是他们自己的用户。

```
SELECT id_user, name_user FROM user WHERE id_user <> $userId 
```

显然将自己从列表中删除，但我不知道如何选择具有两行的用户。

我希望这足够清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:51:37.077

如果要从两个或多个表中获取数据，则必须使用 Join。

尝试这个

```
select * from users left join friend on users.id_users = friend.id_user 
```

// 你还为特定的 user_id 提供了 where 条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:32:52.610

您可以`join`两次使用朋友表来要求存在两个方向的行：

```
select  u1.name
,       u2.name
from    users u1
join    friend f1
on      u1.id_users = f1.id_user
join    friend f2
on      f2.id_user = f1.linked_friend 
        and f2.linked_friend = f1.id_user
join    users u2
on      u2.is_users = f2.id_user
        and u1.id_users < u2.id_users -- Display friends once 
```

我同意 Jack Pettinger 的观点，即这种设计相当笨拙。对于每个关系，friends 表中应该只有一行。它应该有一个独特的约束来强制执行，例如：

```
alter table Friends add constraint CHK_Friend check (friend1_id < friend2_id);
create index UX_Friends on Friends (friend1_id, friend2_id); 
```

# php - 在 rss 提要中使用一次而不是 foreach？

> ID：15172457
> 
> 赞同：-4
> 
> 时间：2013-03-02T08:31:18.290
> 
> 标签：php, foreach, rss

这会输出提要的所有图像，但我只想显示第一个，我必须在标签中而不是 foreach 中放入什么？

```
 <?php foreach ($feed->get_items() as $item): ?>

        <?php $media_group = $item->get_item_tags('', 'enclosure');
        $file = $media_group[0]['attribs']['']['url'];
         ?>  

       <?php echo '

    <img width="200" src="' .$file. '"/>'; ?>

       <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:35:45.667

```
<?php $items = $feed->get_items(); $item = $items [0]; ?>
<?php $media_group = $item->get_item_tags('', 'enclosure');
      $file = $media_group[0]['attribs']['']['url'];
?>  
<?php echo '<img width="200" src="' .$file. '"/>'; ?> 
```

# c# - Chrome 中 RSS 源的空白页

> ID：15172459
> 
> 赞同：0
> 
> 时间：2013-03-02T08:31:31.780
> 
> 标签：c#, xml, google-chrome, rss

我的站点支持 RSS Feed，所以站点生成的 xml 如下：

![在此处输入图像描述](../Images/995217ec0c7f7dbee8920dcdcd2a0eb0.png)

所以，在 IE 中一切都很好： ![在此处输入图像描述](../Images/a0b23bfa7db19e86951c542b26bc19d1.png)

但在 Chrome 中我得到空白页。哪里有问题？

有人对此有任何想法吗？生成的 xml 中是否有任何我必须更正的设置？有什么建议吗？

**更新 ：**

我发现[Google Chrome 将 XML 渲染为 RSS 提要的文本](https://stackoverflow.com/questions/1656574/google-chrome-rendering-xml-as-text-for-rss-feed)是[已知错误](http://code.google.com/p/chromium/issues/detail?id=84)，据我了解，我们无法在 Chrome 中支持 RSS 提要的 xml 格式。如果我是对的那么还有其他选择吗？如何为包括 Chrome 在内的所有浏览器支持 RSS？

而且我（和客户）不想在 chrome 上安装任何附加组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:49:03.657

OK，Chrome 无法解析没有样式的 xml 文件，所以如果我们要使用 xml 格式，我们需要使用 xslt 文件。解决方案是编写自己的 xslt 文件并将所需的路径添加到 xml 文件：

```
<?xml-stylesheet type="text/xsl" href="myxsltfilepath.xslt" media="screen" ?> 
```

# javascript - 为什么这个脚本不起作用？[JS]

> ID：15172461
> 
> 赞同：-2
> 
> 时间：2013-03-02T08:31:36.733
> 
> 标签：javascript, arrays

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>

<script type="text/javascript">
    spreadSheet= new Array(9),summary="";
    for(var i=0; i<spreadSheet.length; i++)
        spreadSheet[i]=0;

    document.writeln("<h1>Poll<\/h1><form method='get' id='tally' action=''>");
    document.writeln("<p>Enter Sales Amount:<br/><input type='text' id='cash'/><input type='button' value='calculate' onclick='calculateSalary()'/><\/p>");
    document.writeln("<\/form>");

    function calculateSalary(){
            var value=document.getElementById("cash").value;
            switch(value){
                case (value<300):++spreadSheet[0]; break;
                case (value<400):++spreadSheet[1]; break;
                case (value<500):++spreadSheet[2]; break;
                case (value<600):++spreadSheet[3]; break;
                case (value<700):++spreadSheet[4]; break;
                case (value<800):++spreadSheet[5]; break;
                case (value<900):++spreadSheet[6]; break;
                case (value<1000):++spreadSheet[7];break;
                default:++spreadSheet[8];break;
            }
    }
    function display(){
        summary="Number of People who earned salaries in the following ranges: \n\n";
        summary+="$200 – 299:\t" + spreadSheet[0] + "\n";
        summary+="$300 – 399:\t" + spreadSheet[1] + "\n";
        summary+="$400 – 499:\t" + spreadSheet[2] + "\n";
        summary+="$500 – 599:\t" + spreadSheet[3] + "\n";
        summary+="$600 – 699:\t" + spreadSheet[4] + "\n";
        summary+="$700 – 799:\t" + spreadSheet[5] + "\n";
        summary+="$800 – 899:\t" + spreadSheet[6] + "\n";
        summary+="$900 – 999:\t" + spreadSheet[7] + "\n";
        summary+="$1000 and over\t" + spreadSheet[8] + "\n";
        return summary;
    }
    document.writeln("<textarea cols='80' rows='15'>"+display()+"<\/textarea>");

</script>
</head>
<body>
</body>
</html> 
```

我是一个 javascript 新手，是的，我在发帖前确实尝试过帮助自己。

我只想制作一个简单的程序，从按钮接收用户输入，然后根据用户输入的值递增一个全局数组元素。问题是我无法让全局数组正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:50:52.550

正如评论中所确定的，问题在于您增加了值，但随后什么也不做。textarea 的内容已经设置好了，当最初用于构建它的变量发生变化时，不会自动重新构建它。

在创建 textarea 时给它一个 id：

```
document.writeln("<textarea cols='80' rows='15' id='results'>"+display()+"<\/textarea>"); 
```

将此添加到`calculateSalary()`函数中，以便更新 textarea：

```
document.getElementById( 'results' ).value = display(); 
```

还要将 switch 语句更改为`switch( true )`，使其递增正确的变量。

演示：http: [//jsfiddle.net/QkQ5v/](http://jsfiddle.net/QkQ5v/)

# cocos2d-iphone - 移动时精灵不跳跃

> ID：15172466
> 
> 赞同：1
> 
> 时间：2013-03-02T08:31:48.223
> 
> 标签：cocos2d-iphone

我正在制作一款平台游戏，一切都很棒。当我触摸屏幕左侧时，我的精灵会移动，而当我触摸右侧时，我的精灵会跳跃。但后来我决定让它自己移动。所以我添加了 ccmoveto 功能，但现在它没有跳转！我是 cocos2d 的新手，但一切正常，除了这个，已经搜索但找不到答案有人可以帮我吗？我尝试了一切，但只有当我删除 ccmoveto 操作时它才会跳转。我用的是cocos2d 2.0 谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:43:02.160

CcMoveTo 将覆盖任何手动位置更改，包括来自其他操作（如 CCJump）的更改。无论如何，您的角色都会直线移动到目的地。

这就是为什么我总是建议不要将动作用于游戏逻辑的原因。特别是位置，你需要保持对它的完全控制。使用方向向量并在每次更新时整合位置：您可以自由地做您需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:38:38.037

我的建议是使用 cocos2d 提供的物理引擎之一：Box2D 和 Chipmunk 物理。多亏了这个引擎，您可以为您的精灵定义世界的特征（即重力矢量）形状和质量（即带有权重的矩形）。然后，当您需要它跳跃时，您只需创建一个具有您需要的特征（即角度等）的力矢量，并使用其物理身体保持更新您的精灵。这将使您的精灵跳跃和着陆非常逼真。

# visual-studio - 从 bash 脚本调用 vcvars

> ID：15172470
> 
> 赞同：7
> 
> 时间：2013-03-02T08:32:44.063
> 
> 标签：visual-studio, bash, batch-file

我需要从构建不同版本的应用程序的同一 bash 脚本 (msys) 中调用 vcvars32.bat 和 vcvars64.bat。

问题是，即使我能够使用 cmd.exe 命令调用批处理文件，一旦它返回 Visual Studio 变量显然没有设置。

我无法从调用 bash 脚本的外部批处理文件（如 msys.bat）调用 vcvars，因为我需要在同一个脚本中按顺序调用它们。

那么，有没有办法调用 vcvars 以便在运行时正确设置 bash 脚本中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-12T16:15:31.783

解决此问题的一种方法是从 vcvars 环境中运行命令，而不是尝试将其导出回 bash 端。这就是我们为项目选择的方法。

主要问题是它`vcvars*.bat`不接受在环境中执行的命令，因此需要使用 cmd 进行一些技巧。所以我想出了一个简单的 Bash 脚本`vcvars_env_run.sh`，它接受任意参数并将它们转发到`vcvars64.bat`已调用的 cmd.exe。大部分工作是弄清楚如何正确转发带引号的参数，以及 &&、||、返回码等。

我已经在[https://github.com/kromain/wsl-utils上传了脚本和一些示例](https://github.com/kromain/wsl-utils)

您可能需要稍微调整一下才能在 和 之间切换`vcvars32.bat`，`vcvars64.bat`但希望它对您尝试做的事情有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T11:01:43.807

POSIX shell`export -p`打印所有环境变量的值，`eval`以便输出重新创建这些值。这个想法是在`vcvars*.bat`运行后从子shell调用它并`eval`在顶级脚本中捕获输出。

一个 Cygwin 环境变量设置脚本可以获得`vcvars*.bat`如下结果：

```
eval "$($(cygpath "$COMSPEC") /c vcvars_export "$vcvars_bat" "$(
                cygpath -w "$SHELL")")" 
```

其中`vcvars_bat`包含相关`vcvars*.bat`文件的路径。例如，您会在文件的目标中找到此值`x64 Native Tools Command Prompt for VS 2019.lnk`，可以使用`readlink -t`. （另请注意，该`vcvarsall.bat`脚本允许使用编译器和 SDK 版本的规范，在需要精确控制时很有用）。

本地`vcvars_export.bat`文件包含

```
@echo off
call %1 > nul
"%2" -c "export -p" 
```

Cygwin 本机进程调用子系统的限制（参数引用是启发式完成的）使得这个辅助文件是必要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:02:38.743

您需要做的是在批处理脚本中使用命令：“call”。所以它可能看起来像：

```
call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\vcvars32.bat"
echo DevEnvDir set to: %DevEnvDir% 
```

如果您不使用“调用”，则脚本将在 vcvars32.bat 退出后退出，并且不会运行任何其他命令。

# angularjs - 我可以从指令内部观察控制器范围属性吗？

> ID：15172472
> 
> 赞同：2
> 
> 时间：2013-03-02T08:32:52.300
> 
> 标签：angularjs, angularjs-scope

假设这个手表在一个指令中，是否可以像这样从主控制器观察一个变量？这是整个指令。当它看起来像这样时，手表确实会在第一页加载时触发，但之后再也不会触发。我没有将 questionNumber 传递给指令。这就是它不知道的原因吗？

```
 .directive('videoLoader', function () {
return function (scope, element, attrs) {
    scope.$watch(attrs.videoLoader, function () {
        element[0].load();
        element[0].play();
        $(scope.video).bind('ended', function () {
            $(this).unbind('ended');
            if (!this.ended) {
                return;
            }
            scope.tutorialNumber++;
            scope.$apply();
            scope.loadFromMenu();
        });
    });
    scope.$watch(scope.questionNumber, function(){
        if (scope.sectionNumber === 0 && scope.tutorialNumber === 0) { //if first video play congratulations etc
            if (scope.questionNumber === 1) {
                start(164.15);
                pause(166.8);
            } else if (scope.questionNumber === 2) {
                start(167.1);
                pause(170);
            } else if (scope.questionNumber === 3) {
                start(171.1);
            }
        }
    });
} 
```

})

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:41:43.273

`scope.$watch('questionNumber', function(newValue, oldValue){//something}`. 在发布这个之前我没有尝试过一个例子，但我记得以前试过这样。

请注意，`scope.$watch(scope.questionNumber...`现在`scope.$watch('questionNumber'...`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T00:08:28.667

由于您的指令没有创建新范围或隔离范围，因此它使用在 HTML 中使用该指令的位置受到影响的范围。如果`controls`是一个指令并且它创建了一个新的或隔离的范围，那么 video-loader 指令也将使用该范围。这可以解释为什么@rajkamal 的答案对您不起作用。

如果`controls`不是指令，那么 video-loader 将使用控制器的作用域（除非您在 ng-repeat 或其他创建子作用域的指令中有 video-loader。）如果不向我们展示更多 HTML，这是不可能的以确定您的指令将获得什么范围。

这是[一个 plunker](http://plnkr.co/edit/qPk51fR0kLBqV7xTXDME?p=preview)，显示了在控制器范围内使用的 video-loader 指令如何访问该范围（特别是`questionNumber`属性）。

尽管习惯 jsfiddle 和 plunker 可能需要一些时间，但我强烈建议您花时间。如果您有 jsfiddle 或 plunker，人们可以更快地帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T18:51:03.237

哈利路亚我做到了！答案是否定的，显然指令无法进入其他控制器的范围，它们必须通过 HTML 中的属性传递，这对只有一个属性很好，但我很难获得 2，结果它可以这样做

```
<video video-loader class="video-js vjs-default-skin" id="myvideo" congrats="questionNumber" video-loader="tutorialNumber" id="video" controls>
    <source type="video/mp4" src="{{videoURLs[tutorialNumber]}}.mp4"></source>
    <source type="video/webm" src="{{videoURLs[tutorialNumber]}}.webm"></source>
    Your browser does not support the video tag.
</video> 
```

然后使用第二个 $watch 在指令内部访问，如下所示：

```
directive('videoLoader', function () {
    return function (scope, element, attrs) {
        scope.$watch(attrs.videoLoader, function () {
            element[0].load();
            element[0].play();
            $(scope.video).bind('ended', function () {
                $(this).unbind('ended');
                if (!this.ended) {
                    return;
                }
                scope.tutorialNumber++;
                scope.$apply();
                scope.loadFromMenu();
            });
        });
        scope.$watch(attrs.congrats, function(){    
            scope.questionNumber;
            if (scope.sectionNumber === 0 && scope.tutorialNumber === 0) { //if first video play congratulations etc
                if (scope.questionNumber === 1) {
                    start(164.15);
                    pause(166.8);
                } else if (scope.questionNumber === 2) {
                    start(167.1);
                    pause(170);
                } else if (scope.questionNumber === 3) {
                    start(171.1);
                }
            }
        });
    };
}) 
```

# jquery - Jquery ontextchange 事件

> ID：15172478
> 
> 赞同：0
> 
> 时间：2013-03-02T08:34:28.337
> 
> 标签：jquery, textbox

无论如何，当 TextBox 的文本被更改时，我可以调用一个函数吗？

`change`只有在文本框失去焦点后，该功能才会起作用。我需要类似于`keyup`函数的东西：

```
$('.TextBox1').keyup(function(e) {
            setTimeout(function() {
            //
            }, 100);
        }); 
```

但是，只有通过键盘填充数据时才会调用此函数，我需要一个更通用的解决方案。一些情况是：

1.  用户通过键盘输入数据
2.  用户粘贴他之前复制的数据
3.  用户双击文本框并从浏览器自动完成菜单中选择一个值。
4.  用户从网站的某些部分拖动文本并将其放入 TextBox
5.  条码扫描器
6.  ？？？（我想不到的任何其他填充文本框的方法）

是否有任何 Jquery“ontextchang”事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:46:51.520

```
$('input').bind('keyup keypress blur change cut copy paste ', function() {
   setTimeout(function() {
        alert('here');
        }, 100);

}); 
```

拖放示例：http: [//jsfiddle.net/5DCZw/2/](http://jsfiddle.net/5DCZw/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:14:47.830

我找到了答案：

```
function monitor() {
    // Your code
}

var timer = '';

$('.TextBox1').on('focus', function() {
    timer = setInterval(monitor, 100);
}).on('blur', function() {
    clearInterval(timer);
}); 
```

它在对焦时基本上`TextBox1`每 0.1 秒监控一次。这就是我一直在寻找的。

# c# - 如何为果园特殊区域中的特殊小部件创建替代视图？

> ID：15172480
> 
> 赞同：2
> 
> 时间：2013-03-02T08:34:43.743
> 
> 标签：c#, asp.net-mvc, orchardcms

我如何`View`为我创建一个替代品，`Widget`以便它在不同的地方以不同的方式出现`Zone`？目前我只能使用这种模式：

```
 Parts.Widget-Id.cshtml 
```

谁能帮我创建这样的模式：

```
Parts.Widget-ZoneName.cshtml 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:38:35.633

首先启用 Widget Alters 功能。

# c# - DbGeography.PointFromText 错误调用的目标已引发异常

> ID：15172492
> 
> 赞同：4
> 
> 时间：2013-03-02T08:36:32.247
> 
> 标签：c#, asp.net, geocoding, spatial

我正在使用空间数据开始我的第一个项目。我使用 VS 2012 和 SQL 2012 我已经引用了 System.Data.Entity 并且可以在我的代码中使用 DbGeography 但是当我尝试创建一个点时，我得到了上述错误并且不明白为什么

这是我的代码

```
var text = string.Format(CultureInfo.InvariantCulture.NumberFormat,
                "POINT({0} {1})", submitted.Long, submitted.Lat);
            // 4326 is most common coordinate system used by GPS/Maps
            try
            {
                var wkb = DbGeography.PointFromText(text, 4226);
            }
            catch (Exception exc)
            {
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-19T00:10:00.543

OP 使用的语法是正确的，导致此错误的实际问题是 SRID，4226 不是已知的 SRID，但您已经知道这一点。因为它在您的评论中:)

在您的场景中正确使用的一个示例是：

```
var wkb = DbGeography.PointFromText($"POINT({submitted.Long} {submitted.Lat})", 4326); 
```

不过你哪里做错了？每当你得到一个

> System.Reflection.TargetInvocationException

带有一条消息

> 调用的目标已抛出异常

您必须立即检查内部异常以获取有关实际错误的详细信息，在这种情况下，它会为您清楚地概述：

> 24204: 空间参考标识符 (SRID) 无效。指定的 SRID 必须与 sys.spatial_reference_systems 目录视图中显示的支持的 SRID 之一匹配。

我意识到这是一个旧线程，但 IMO 这是人们不断在 SO 上发布的第二个最常见的 .Net 开发人员问题的示例。在拔头发之前，请通读完整的异常堆栈。

我只是猜测，但我认为 NullReferenceException 问题将是最常见的:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-08-11T16:01:35.383

```
is wrong to order the lat and long 
```

正确的是：

```
DbGeography.PointFromText(POINT(lat long), 4226); 
```

**完整类：**

```
public static DbGeography CreatePoint(double latitude, double longetude, int srid = 4326)
    {
        var lon = longetude.ToString(CultureInfo.InvariantCulture);
        var lat = latitude.ToString(CultureInfo.InvariantCulture);

        var geo = $"POINT({lat} {lon})";

        return DbGeography.PointFromText(geo, srid);
    } 
```

**称呼：**

```
CreatePoint(-46.55377, 23.11817) 
```

# php - �（问号）在从 mysql 数据库 php 获取文本时显示在引号的位置

> ID：15172495
> 
> 赞同：2
> 
> 时间：2013-03-02T08:37:16.923
> 
> 标签：php, mysql, text

每次我使用 php echo 在页面上显示一些文本时，所有的引号都会被一些愚蠢的问号代替，如下所示：

有人知道为什么会这样吗？

编码：Page- charset=utf-8 Database- MySQL 字符集：UTF-8 Unicode (utf8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:55:55.553

刚刚匹配了我的页面和数据库的编码。他们是不同的。使它们相同并且效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T03:32:55.970

虽然数据库的排序规则是“utf8-unicode-ci”，但PHP端建立的连接可能使用latin1字符集。所以你最好检查一下

```
echo $mysqli->character_set_name(); 
```

或者

```
echo mysqli_character_set_name ($conn); 
```

要将字符集设置为 utf8，请执行

```
mysql_query("SET NAMES 'utf8′", $conn); 
```

或者

```
$mysqli->set_charset("utf8"); 
```

希望能帮助到你。

# git - Yii - 云控制 - Git

> ID：15172497
> 
> 赞同：0
> 
> 时间：2013-03-02T08:37:51.450
> 
> 标签：git

当我使用 cloudcontrol 创建应用程序时，我得到了这个重复的答案，无法创建我通过 Git 存储库使用过的应用程序名称

> $ cctrlapp ayiitest3 create php "Git 似乎已安装！使用 "Git 作为存储库类型。名称：具有此名称的应用程序已存在。

所以我使用了不同的应用程序名称，我也得到了相同的答案，比如

> $ cctrlapp abcd create php Git 好像已经安装好了！使用“Git”作为存储库类型。名称：具有此名称的应用程序已存在。

我直接在cloudcontrol站点中尝试过，我收到了这个错误

> 添加应用程序 ayiitest 失败。已存在同名的应用

谁能帮忙？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:19:47.387

这不是一个普遍的错误。我检查了，您使用的所有三个应用程序名称都已经存在：ayiitest3 ayiitest abcd。尤其是所有带有“ayiitest”的东西似乎都很受欢迎。

您可以尝试使用其他名称吗？

# php - 表单提交后重定向到所需的查询字符串

> ID：15172501
> 
> 赞同：0
> 
> 时间：2013-03-02T08:38:25.310
> 
> 标签：php, html, forms

一个上传表单，其输入的数据不应存储在数据库中，在一个动态启动的页面上提交，查询字符串如下：

```
www.site.com/test?id=1 
```

表单的作用如下：

```
<form id="test" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data"> 
```

标题位置如下：

```
 header('Location: '. basename($_SERVER['PHP_SELF']). '?file=xyz'); 
```

我应该如何修改标题和/或表单的操作，以便将其重定向到

```
www.site.com/test?file=xyz&id=1 
```

或者

```
www.site.com/test?id=1&file=xyz 
```

提交后？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:41:25.993

将 ID 放入隐藏字段：

```
<form id="test" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">
  <input type="hidden" name="id" value="<?php echo $_GET['id']; ?>"/>
  ...
</form> 
```

然后它可以在重定向中传递 ID：

```
header('Location: ' basename($_Server['PHP_SELF']). '?file=xyz&id=' . $_POST['id']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:40:33.260

```
header ('Location: ' . basename ($_SERVER ['PHP_SELF']) . '?file=xyz&id=1'); 
```

# mono - 将 Mono Runtime 3.0.4 与 MonoDevelop 3.x 合并失败

> ID：15172504
> 
> 赞同：0
> 
> 时间：2013-03-02T08:38:51.663
> 
> 标签：mono, monodevelop, monomac

我正在尝试将 Mono Runtime (v 3.0.4) 与 MonoMac 应用程序合并，但由于升级到 3.0.4（从 2.10.11），因此失败并出现以下错误：

```
Merging Mono Runtime into app bundle
/Applications/MonoDevelop-old.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/mmp 
-nolink "-minos=10.6.6" 
-o "/Users/ted/Documents/XCode/Mac/StageTimer/StageTimer/bin/Release" 
-n "StageTimer" 
-a "/Library/Frameworks/Mono.framework/Versions/3.0.4/lib/mono/4.0/System.dll"
-a "/Library/Frameworks/Mono.framework/Versions/3.0.4/lib/mono/4.0/System.Xml.dll"
-a "/Library/Frameworks/Mono.framework/Versions/3.0.4/lib/mono/4.0/System.Core.dll"
-a "/Library/Frameworks/Mono.framework/Versions/3.0.4/lib/mono/4.0/System.Xml.Linq.dll"
-a "/Library/Frameworks/Mono.framework/Versions/3.0.4/lib/mono/4.0/System.Drawing.dll"
-a "/Applications/MonoDevelop-old.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/MonoMac.dll"
"/Users/ted/Documents/XCode/Mac/StageTimer/StageTimer/bin/Release/StageTimer.exe"

Process exited with code 1, command:
pkg-config --variable=prefix mono-2

Unhandled Exception: System.IO.DirectoryNotFoundException: Directory '/lib/mono/4.0' not found. 
```

即使我将 MonoDevelop 配置为使用 Mono 2.10.11 而不是 3.0.4，它也会失败并出现相同的错误（和路径：'/lib/mono/4.0'）。接下来我还尝试修改 /Library/Frameworks/Mono.framework/Versions/Current 中的符号链接以指向 2.10.11 但仍然是相同的错误和路径。

任何具有单声道和 pkg-config 技能的人都知道如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:43:31.600

当 F# 编译器尝试与 Mono 3.0.4（而不是 3.0.3）一起运行时，类似的问题也发生了。该问题归结为 Mono 中的一个错误修复，该错误修复可防止与 homebrew pkg-config 设置发生冲突。F# 源代码中采用的[解决方法](https://github.com/fsharp/fsharp/commit/19643d967ba814a1871694ede5f0696b928ac70d)是硬编码 Mono 的 pkg-config 的路径。

通过在启动 MonoDevelop 时重写环境变量 PKG_CONFIG_PATH，您可能会得到与此相同的结果，这样：

```
PKG_CONFIG_PATH=/path/were/mono/pc/files/are/in/Mac:$PKG_CONFIG_PATH monodevelop 
```

确切的路径必须在 /Library/Frameworks/Mono.framework/Versions/Current/ 下面的某个地方，只需注意扩展名为 .pc 的文件。

# php - 使用 AJAX 更改图像

> ID：15172506
> 
> 赞同：0
> 
> 时间：2013-03-02T08:39:18.080
> 
> 标签：php, ajax, image

我想创建一个登录页面。因此，我使用以下 html 代码在登录表单中放置了一张验证码图片：

```
<img name="captcha" id="captcha" src="captcha/CaptchaSecurityImages.php?width=90&height=28&characters=5"/> 
```

我放了一个按钮，如果验证码不可读，用户可以单击该按钮更改验证码，如下所示：

```
<input type="button" name="new_Captcha_button" onClick="new_captcha()"/> 
```

我写了一个脚本如下，它只在 chrome 中工作：

```
<script type="text/javascript">
function new_captcha()
    {   
        document.images["captcha"].src = "captcha/CaptchaSecurityImages.php?width=90&height=28&characters=5";
    }
</script> 
```

但它在其他浏览器中不起作用，因此我将之前的代码替换为以下代码：

```
<script type="text/javascript">
function new_captcha()
    {
        var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("captcha").src = xmlhttp.responseText;
            }
          }
        xmlhttp.open("GET","captcha/CaptchaSecurityImages.php?width=90&height=28&characters=5",true);
        xmlhttp.send();
    } 
```

所以请告诉我我需要对代码进行哪些更改才能使其正确。我想我需要更改以下行：

```
document.getElementById("captcha").src = xmlhttp.responseText; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:05:41.647

```
<script type="text/javascript">
function new_captcha()
    {   
        document.getElementById('captcha').src = 'captcha/CaptchaSecurityImages.php?width=90&height=28&characters=5&_t=' + Math.random(1);
    }
</script> 
```

不需要使用 ajax，函数 new_captcha() 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:53:25.003

你可以尝试这样做

登录.php

```
<div id="captcha_container"></div>
<input type="button" id="btn_recaptcha" value="Recaptcha">

<script>
function ajax_loadpage(loadUrl,output_container)
    {
        $.post
        (
            loadUrl,
            {language: "php", version: 5},function(responseText){$(output_container).html(responseText);},"html"
        );
    }

ajax_loadpage("captcha_page.php","#captcha_container");

$('#btn_recaptcha').click(function(){
   ajax_loadpage("captcha_page.php","#captcha_container");
})
</script>
______________________________________________________________________________________
captcha_page.php
<img width="212" height="53" src="captcha.php"> 
```

captcha.php 包含我的验证码，它包含一个`header ("Content-type: image/gif");`代码，所以我需要一个额外的 php 文件，我可以在其中保存图像文件，从而使用我的 captcha_page.php。为我工作:)

# css - 如何使外部 div 继承内部非浮动 div 的高度？

> ID：15172507
> 
> 赞同：1
> 
> 时间：2013-03-02T08:39:30.787
> 
> 标签：css, html, height, footer

当浏览器窗口高度减小时，我试图防止我的页脚重叠到它上面的元素上。我意识到这是因为另一个 div`container`没有继承内部 div 的高度，即`#cart`.

**如何让外部 div 继承内部非浮动 div 的高度？**

这是它发生的页面：

[http://fine-grain-2.myshopify.com/cart](http://fine-grain-2.myshopify.com/cart)

请参阅下面的屏幕截图以获取说明：

我希望它是怎样的：

![在此处输入图像描述](../Images/6e106857793e53e72f282b6d5b6e7c1c.png)

当前浏览器窗口高度太短时的情况。

![在此处输入图像描述](../Images/31f563fde76a7402e6e65a8f20a3a35f.png)

HTML：

```
<div class="container">
    <div id="cart" class="cart clearfix">
</div>

<footer class="clearfix">
    <div class="additional-info"> Copyright © 2013 fine grain </div>
</footer> 
```

CSS：

```
.container:after {
    clear: both;
    content: " ";
    display: block;
    height: 0;
    visibility: hidden;
}
.container {
    height: 100%;
    margin: 0 auto;
    padding: 0;
    position: relative;
    width: 960px;
}

.row:after, .clearfix:after {
    clear: both;
}
.clearfix:before, .clearfix:after, .row:before, .row:after {
    content: " ";
    display: block;
    height: 0;
    overflow: hidden;
    visibility: hidden;
    width: 0;
}
.clearfix:before, .clearfix:after, .row:before, .row:after {
    content: " ";
    display: block;
    height: 0;
    overflow: hidden;
    visibility: hidden;
    width: 0;
}
#cart {
    margin: 20px auto 0;
}

footer {
    clear: both;
    margin: 0 auto;
    padding: 0 0 1em;
    position: relative;
    text-align: center;
}

.additional-info {
    font-size: 0.8em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:11:56.720

@novicePrgrmr 像这样更改容器类

```
.container {
    min-height: 100%;//min-height
    margin: 0 auto;
    padding: 0;
    position: relative;
    width: 960px;
} 
```

# javascript - 将json对象从一个js文件传递到另一个js文件

> ID：15172513
> 
> 赞同：0
> 
> 时间：2013-03-02T08:40:38.973
> 
> 标签：javascript, jquery, json

我有一个 js 文件 X，它有一个 json 对象，我想在其中将对象传递给另一个 js 文件 Y 并根据对象的值执行。这两个js文件引用到同一个html页面。

json对象是这样的

```
var displayDetails = {
    "A" :   {
                data : "1",
                display : "A1"
        },
    "B" :   {
                data : "2",
                display : "B2"
        }
}; 
```

之后解析json对象

```
var cachedOptions = JSON.parse(JSON.stringify(displayDetails)); 
```

所有这些都在 js 文件 X 中。那么如何访问 js B 上的 cachedOptions 或 displayDetails 呢？我是 json 新手，因此不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:47:36.030

只要您不使用名称间距，您就可以简单地引用在脚本 Y 中声明的脚本 X 中的变量。HTML 页面将编译页面上列出的所有脚本文件，因此“全局”变量将能够'看到对方。

当然，单独编写这些文件时，代码没有意义，但它可以在浏览器中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:47:56.970

您可以创建一个`global namespace`并将对象和函数附加到它，以便它可以在您的应用程序的任何地方使用。

文件 X：

```
window.scope = {};
scope.displayDetails = {
    "A" :   {
            data : "1",
            display : "A1"
    },
    "B" :   {
            data : "2",
            display : "B2"
    }
};
scope.cachedOptions = JSON.parse(JSON.stringify(scope.displayDetails)); 
```

文件 Y：

```
/** Use the object from another file. */
console.log(scope.displayDetails.A);

console.log(scope.cachedOptions); 
```

# android - 在 SearchView 打开的情况下启动 Activity

> ID：15172517
> 
> 赞同：5
> 
> 时间：2013-03-02T08:40:59.120
> 
> 标签：android, searchview

如何在打开文本字段的情况下使用 SearchView 启动活动。通过这种方式，我无需点击望远镜就可以进行搜索。我正在使用 Sherlock 操作栏。

这是我的代码：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {

     final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
        searchView.setQueryHint("Cerca domande");

        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

            @Override
            public boolean onQueryTextSubmit(String query) {
                if (query.length() != 0) {

                    // handle search here
                    return true;
                }
                return false;
            }

            @Override
            public boolean onQueryTextChange(String newText) {

                 if (newText.length()>=3) {
                     new PostTask().execute(newText);   

                     Util.setSharedPreferences(SearchActivity.this, "lastsearch", newText);
                 }
                return false;
            }
        });

        menu.add("Search")
            .setIcon(ic_search_inverse)
            .setActionView(searchView)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

        listsearch.setOnItemClickListener(this);

     return true;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T09:15:58.097

试过这个？

```
searchMenu.expandActionView(); 
```

在`OnCreateOptionsMenu()`

```
menu.add("Search")
            .setIcon(ic_search_inverse)
            .setActionView(searchView)
            .expandActionView();
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

您可以添加焦点，打开软键盘。因此，一切都已准备好供用户输入和搜索。

但这不是标准行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T10:40:51.080

你可以试试这个：

```
mSearchView.setIconifiedByDefault(false); 
```

# movabletype - 可移动类型：HASH 输出问题

> ID：15172518
> 
> 赞同：1
> 
> 时间：2013-03-02T08:41:03.383
> 
> 标签：movabletype

我正在尝试将两个不同的条目提要列表与哈希组合并按日期排序，但似乎不起作用。

```
<mt:entries blog_id="1">
<$mt:entrydate format="%Y:%m:%d:%H:%M:%S" setvar="DateStart"$>
<mt:setvarBlock name="item{title}"><mt:entryTitle></mt:setvarBlock>
<mt:setvarBlock name="item{url}"><mt:entryPermalink></mt:setvarBlock>
<mt:setvarBlock name="items" key="$DateStart"><mt:var name="item"></mt:setvarBlock>
</mt:entries>

<mt:entries blog_id="2">
<$mt:entrydate format="%Y:%m:%d:%H:%M:%S" setvar="DateStart"$>
<mt:setvarBlock name="item{title}"><mt:entryTitle></mt:setvarBlock>
<mt:setvarBlock name="item{url}"><mt:entryPermalink></mt:setvarBlock>
<mt:setvarBlock name="items" key="$DateStart"><mt:var name="item"></mt:setvarBlock>
</mt:entries>

<mt:loop name="items" sort_by="key numeric reverse">
<$mt:Var name="__value__"$><br />
</mt:loop> 
```

输出：

```
HASH(0x7fb66e8284a8)
HASH(0x7fb66e8284a8)
HASH(0x7fb66e8284a8) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:29:59.340

这对我有用：

```
<mt:entries blog_id="9">
    <$mt:entrydate format="%Y%m%d%H%M%S" setvar="DateStart"$>
    <mt:SetHashVar name="myhash">
        <mt:SetHashVar name="$DateStart">
            <mt:entryTitle setvar="title">
            <mt:entryPermalink setvar="url">
        </mt:SetHashVar>
    </mt:SetHashVar>
</mt:entries>

<mt:entries blog_id="8">
    <$mt:entrydate format="%Y%m%d%H%M%S" setvar="DateStart"$>
    <mt:SetHashVar name="myhash">
        <mt:SetHashVar name="$DateStart">
            <mt:entryTitle setvar="title">
            <mt:entryPermalink setvar="url">
        </mt:SetHashVar>
    </mt:SetHashVar>
</mt:entries>

<mt:loop name="myhash" sort_by="key numeric reverse">
    Key: <$mt:Var name="__key__"$> — Values: <br>
    <mt:loop name="__value__">
        — Key: <$mt:Var name="__key__"$> — Value: <$mt:Var name="__value__"$><br>
    </mt:loop>
    <br>
</mt:loop> 
```

它删除了对我来说看起来不必要的“项目”键。

PS我还将日期键更改为实数（因为您想按数值排序）。

# django - 限制记录数

> ID：15172519
> 
> 赞同：0
> 
> 时间：2013-03-02T08:41:11.977
> 
> 标签：django

我有一个问题，我在谷歌上找不到答案。

所以，我有汽车的模型（只有字符字段）和汽车的图片模型：

```
class Pictures(models.Model):
    car = models.ForeignKey(Car,related_name='pictures')
    path = models.CharField(max_length=255)
    about = models.CharField(max_length=32)
    main = models.BooleanField('Main Picture')
    def __unicode__(self):
         return str(self.id) 
```

可以执行以下操作：我只想要一辆车的 4 张照片。例如，BMW X5 - 只有 4 张图片，我无法添加 5​​ 张图片（来自管理界面）。一辆车 - 4 张图片（最多）。这是可能的？如您所见，我有 field `main`，此 field=1 的图片将出现在画廊中，就像幻灯片中的起始图片一样。但我可以`main=1`为所有图片添加，这是错误的。因此，它可能执行以下操作：

```
1 car = 3 pictures(main=0) + 1 picture(main=1) 
```

一辆车在图片表（4张图片）中有4个位置（最大），其中只有一张图片的main = 1。在管理界面中，我可以为一辆车添加多张图片，并为所有图片添加 main=1。怎么能被限制？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:50:04.993

```
class MyModelAdmin(admin.ModelAdmin):
    ...........

    def has_add_permission(self, request):
        count = Pictures.objects.filter(main=True).count()
        if count <= 4:
            return True
        return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T09:01:58.100

使用自定义表单和 clean 方法验证您的模型。

模型.py：

```
class Image(models.Model):
    image = models.ImageField(upload_to='images/%Y/%m/%d', ...)
    main = models.BooleanField()

    # Distinguish between main and normal images
    def __unicode__(self):
        if self.main:
            return "%s (main)" %self.image
        else:
            return self.image

class Car(models.Model):
    ...
    images = models.ManyToManyField(Image, blank=True, null=True, 
             related_name="%(app_label)s_%(class)s_related", 
             help_text="Max 1 main image and max 4 images total.") 
```

然后在您的 admin.py 中使用自定义 clean 方法创建一个 ModelForm：

```
from django import forms
from django.contrib import admin
from models import Image, Car

class CarAdminForm(forms.ModelForm):
    class Meta:
        model = Car

    def clean_images(self):
        data = self.cleaned_data['images']
        if data.count() > 4:
            raise forms.ValidationError("Max 4 images.")
        if data.filter(main=True).count() > 1:
            raise forms.ValidationError("Max 1 main image.")
        return data

class CarAdmin(admin.ModelAdmin):
    form = CarAdminForm
    filter_horizontal = ['images', ]
    ...

admin.site.register(Car, CarAdmin) 
```

奖励：制作所需的主图像：

```
 if not data.filter(main=True).count() == 1:
            raise forms.ValidationError("Exact 1 main image required!") 
```

# css - 在 CSS 中使用 display:inline-block 与 float:left 的优点

> ID：15172520
> 
> 赞同：129
> 
> 时间：2013-03-02T08:41:11.947
> 
> 标签：css, css-float, html

通常，当我们想要`DIVs`连续使用多个时，我们会使用`float: left`，但现在我发现了`display:inline-block`

示例链接[在这里](http://updel.com/demos/inline-block/articles.html)。在我看来，这`display:inline-block`是一种更好`align` `DIVs`的连续方式，但有什么缺点吗？`float`为什么这种方法不如诀窍那么受欢迎？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-03-02T18:27:39.180

三个字：`inline-block`更好。

**内联块**

该方法的唯一缺点是，在 IE7 及以下版本中，只有默认情况下才能`display: inline-block`显示元素。这意味着你必须使用一个元素，而不是使用一个元素。这根本不是一个巨大的缺点，因为语义上 a用于划分页面，而 a仅用于覆盖页面的跨度，因此没有很大的语义差异。一个巨大的好处是，当其他开发人员稍后维护您的代码时，与or语句相比，要完成的内容和 尝试完成的内容要明显得多。我最喜欢这种方法的好处是它易于使用，并且`inline-block``inline``<div>``<span>``<div>``<span>``display:inline-block``display:inline-block``text-align:right``float:left``float:right``inline-block``vertical-align: middle``line-height``text-align: center`以一种直观的方式完美地居中元素。[我在Mozilla 博客](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)上找到了一篇关于如何实现跨浏览器内联块的精彩博文。这里是[浏览器兼容性](http://caniuse.com/#feat=inline-block)。

**漂浮**

使用该`float`方法不适合您的页面布局的原因是因为`float`CSS 属性[最初只是为了让文本环绕图像（杂志样式）](http://www.w3.org/wiki/Floats_and_clearing)，并且从设计上讲，它不适合一般页面布局目的。稍后更改浮动元素时，有时您会遇到定位问题，因为它们[不在页面流](http://www.w3.org/TR/CSS2/visuren.html#floats)中。另一个缺点是它通常需要一个 clearfix 否则它可能会破坏页面的某些方面。clearfix 需要在浮动元素之后添加一个元素，以阻止[其父元素在它们周围折叠](https://stackoverflow.com/questions/218760/how-do-you-keep-parents-of-floated-elements-from-collapsing)，这跨越了将样式与内容分离的语义界限，因此[是 Web 开发中的一种反模式](http://webstandardstips.com/2010/03/08/the-empty-div-clearfix-anti-pattern/)。

上面链接中提到的任何空白问题都可以通过`white-space`CSS 属性轻松修复。

## 编辑：

[SitePoint](http://www.sitepoint.com/)是一个非常可靠的网页设计建议来源，他们似乎和我有同样的看法：

> 如果你是 CSS 布局的新手，你会认为以富有想象力的方式使用 CSS 浮动是技能的高度，这是可以原谅的。如果您已经阅读了尽可能多的 CSS 布局教程，您可能会认为掌握浮动是一种通过仪式。你会为它的独创性而眼花缭乱，为它的复杂性惊叹不已，当你最终了解花车的工作原理时，你会获得一种成就感。
> 
> 不要被愚弄。你被洗脑了

[http://www.sitepoint.com/give-floats-the-flick-in-css-layouts/](http://www.sitepoint.com/give-floats-the-flick-in-css-layouts/)

**2015 更新 - Flexbox 是[现代浏览器](http://caniuse.com/#feat=flexbox)**的不错选择：

```
.container {
  display: flex; /* or inline-flex */
}

.item {
  flex: none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]
} 
```

[更多信息](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)

**2016 年 12 月 21 日更新**

Bootstrap 4 正在移除对 IE9 的支持，因此摆脱了行中的浮点数并使用了完整的 Flexbox。

[拉取请求 #21389](https://github.com/twbs/bootstrap/pull/21389)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-04-28T15:38:02.353

虽然我同意一般来说更好，但**如果您使用百分比宽度**来创建响应式网格（或者如果您想要像素完美的宽度）`inline-block`，还需要考虑一件事：

 **如果您使用`inline-block`总宽度为 100% 或接近 100% 的网格，则需要确保 HTML 标记**在列之间不包含空白**。

使用浮动，这不是您需要担心的事情 - 列浮动在列之间的任何空白或其他内容上。[This question's answers 有一些关于如何删除 HTML 空白而不使您的代码丑陋的好技巧](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements/5078297#5078297)。

如果由于任何原因您无法控制 HTML 标记（例如，限制性 CMS），您可以尝试这里描述的技巧，或者您可能需要妥协并使用浮动而不是内联块。还有一些丑陋的 CSS 技巧只能在极端情况下使用，比如[`font-size:0;`在列容器上然后在每列中重新应用字体大小](https://css-tricks.com/fighting-the-space-between-inline-block-elements/)。

例如：

*   [这是一个 33.3% 宽度的 3 列网格，带有`float: left`](http://jsbin.com/dedagedige/1/edit). 它“正常工作”（但需要清除包装器）。
*   [这是完全相同的网格，带有`inline-block`](http://jsbin.com/yihegaxedi/1/edit). 块之间的空白创建了一个固定宽度的空间，它将总宽度推到了 100% 以上，破坏了布局并导致最后一列下降了一行。
*   [这是同一个网格，`inline-block`在 HTML 中的列之间有和没有空格](http://jsbin.com/bibucuyoga/1/edit)。它再次“正常工作” - 但 HTML 更丑陋，您的 CMS 可能会强制对其 HTML 输出进行某种美化或缩进，这使得这在现实中难以实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-17T03:45:37.320

如果要`div`精确对齐像素，请使用浮点数。`inline-block`似乎总是需要你砍掉几个像素（至少在 IE 中）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T08:55:38.877

[你可以在这里](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)找到深入的答案。

但总的来说，`float`您需要注意并照顾周围的元素和`inline-block`线条元素的简单方法。

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-20T17:42:36.163

内联块有一个特性，但它可能不是直截了当的。也就是CSS中vertical-align的默认值是baseline。这可能会导致一些意外的对齐行为。看看这篇文章。

[http://www.brunildo.org/test/inline-block.html](http://www.brunildo.org/test/inline-block.html)

相反，当您执行 float:left 时，div 彼此独立，您可以使用边距轻松对齐它们。**

# perl - 带有 Moo 的 Perl ORM

> ID：15172526
> 
> 赞同：2
> 
> 时间：2013-03-02T08:41:44.950
> 
> 标签：perl, orm, cpan, dbix-class, moo

我想使用 Moo 作为我的应用程序的面向对象方法（使用关系数据库）。我过去曾使用过[DBIx::Class](http://search.cpan.org/~abraxxa/DBIx-Class-0.08209/lib/DBIx/Class.pm)和[Rose::DB::Object](http://search.cpan.org/~jsiracusa/Rose-DB-Object-0.804/lib/Rose/DB/Object.pm)，但这些分布与 Moo（既不是 Moose）无关。我正在寻找一个带有 Moo 集成的 ORM（或类似的），你知道这是否存在，或者有人有相关计划吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:36:27.967

**我不知道Moo 集成**是什么意思，但我刚刚安装了最新版本，`DBIx::Class`并看到它`Moo`是作为依赖项安装的。因此，在 0.08209 版本中，`DBIx::Class`作为`Moo`依赖项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T12:12:36.120

看看[DBIx::Mint](http://search.cpan.org/~jfraire/DBIx-Mint-0.04/lib/DBIx/Mint.pm) 你需要在你的 Moo 类中添加一个角色

```
with 'DBIx::Mint::Table'; 
```

并且还要写一个模式文件。该模式文件应该包含您将要使用的类的所有信息（类到表的映射、与其他表/类的关系）。无需为每个 Moo 类编写模式文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:51:04.780

实际上，我正在做一些非常相似的事情——我也想要一种基于 Moo 的方法。从技术上讲，我写它是为了了解更多关于 Moo 的信息，并不是为了任何严肃的事情，但如果你愿意的话，你可以在它的基础上进行构建 :-)

[https://github.com/bradhaywood/DBIx-Moo](https://github.com/bradhaywood/DBIx-Moo)

# titanium - Titanium Mobile 3.0 导航控制器在窗口之间传递变量

> ID：15172529
> 
> 赞同：1
> 
> 时间：2013-03-02T08:41:51.080
> 
> 标签：titanium, titanium-mobile

我正在为部署在 Android 设备中的应用程序使用 swanify 的 Titanium Navigation Controller [https://github.com/swanify/Titanium-Navigation-Controller 。](https://github.com/swanify/Titanium-Navigation-Controller)

我正在尝试将我从此处的表行中选择的数据传递回上一页并在那里填充一个文本字段。

任何人有任何想法如何做到这一点？我正在研究使用事件，但它似乎对我不起作用。

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:05:53.310

这是我在这种情况下所做的，它利用了 JavaScript 和 Titanium 的事件方面，一般原则是拥有自己的自定义事件，在控件上触发它们，然后在其他地方监听。

首先假设我们有一个名为`NextWindow.js`CommonJS 模块的文件，它封装了一个窗口和一个表格视图，每次单击一行时，我们都会捕获该事件，然后*在窗口上*触发我们自己的自定义事件：

```
function NextWindow() {
    var self = Ti.UI.createWindow();
    var tableView = Ti.UI.createTableView();
    // Other initialization
    ....
    ....
    tableView.addEventListener('click', function(e) {
        // You may have to use e.rowData.title depending on how you created the table view
        var rowTitle = e.row.title;
        // Now fire a custom event on the window whenever a row is selected
        // send the title through as data
        self.fireEvent('table_row_selected', {title : rowTitle});

    });

    return self;
}
module.exports = NextWindow; 
```

当您创建一个`NextWindow`推送到导航堆栈上时，为它添加一个自定义事件的侦听器，这是在带有文本框的前一个窗口内：

```
var NextWindow = require('NextWindow');
var nextWindow = new NextWindow();
nextWindow.addEventListener('table_row_selected', function(e) {
    // Do what you want here with the passed back data 
    var title = e.title;
    some_label.text = title;
});
// Open the next window on the NavigationController stack
nav.open(nextWindow); 
```

现在正在侦听附加到`nextWindow`. 假设你有一个 TableView `nextWindow`，监听 TableView 点击，然后触发自定义事件：

# java - 使用Java从网页中抓取数据？

> ID：15172530
> 
> 赞同：1
> 
> 时间：2013-03-02T08:41:51.277
> 
> 标签：java, twitter, web-scraping, bots, headless-browser

我正在为我的一个班级创建一个 twitter 机器人来练习使用队列并建立我的简历。

我希望机器人从 paper.li 时事通讯中抓取 Twitter 句柄，然后向用户发送推文。

这是一个示例网页。 [http://paper.li/profkane/1335985326](http://paper.li/profkane/1335985326)

我的推理，最初是抓取网页的链接，然后获取页面源，浏览它以找到@twitterhandle，然后将它们添加到队列中，以便稍后在构造消息时使用。

我查找了页面源，但在网页上的任何地方都找不到推特名称。这在Java中仍然可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:04:46.830

您需要使用支持 javascript 的库。我为此使用**HtmlUnit**，这是一个用于复制浏览器行为的出色库！

有关如何使用 javascript 访问页面的简单示例，请参阅下面[这个问题](https://stackoverflow.com/questions/14740801/easiest-way-to-browse-to-a-page-and-submit-form-in-java/14905070#14905070 "从这个问题")的修改后的答案。

**首先**，查看他们的网页 ( [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) ) 以启动和运行 htmlunit。确保使用最新的快照（写这篇文章时是 2.12）

尝试这些设置几乎可以忽略任何障碍：

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_17);
webClient.getOptions().setRedirectEnabled(true);
webClient.getOptions().setCssEnabled(false);
webClient.getOptions().setThrowExceptionOnScriptError(false);
webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
webClient.getOptions().setUseInsecureSSL(true);
webClient.getOptions().setJavaScriptEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true); 
```

然后在获取页面时，请确保在对页面执行任何操作之前等待后台 Javascript，例如等待后台 javascript。

```
//Get Page
HtmlPage page1 = webClient.getPage("https://login-url/");

//Wait for background Javascript
webClient.waitForBackgroundJavaScript(10000);

//Get full page _after_ javascript has rendered it fully
System.out.println(page1.asXml()); 
```

我希望这个基本示例对您有所帮助！

您可以使用 HtmlUnit 执行浏览器可以执行的几乎所有操作，但以编程方式执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:07:35.593

就抓取而言，您可以抓取整个页面并查找 twitter id（或句柄）。当我检查示例页面时，我找不到这样的句柄，但在 Twitter 图标中有指向用户帐户的链接。您可以使用它来获取句柄。如果你正在寻找 Java 中的抓取库，你可以试试 JSOUP。

# ruby-on-rails - 无法在 ruby 中转储匿名类 Class

> ID：15172540
> 
> 赞同：3
> 
> 时间：2013-03-02T08:42:57.803
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

谁能解释这个异常在红宝石中的含义。

> TypeError 异常：无法转储匿名类 Class

代码示例

```
 Class X_controller
     before filer: validate, :only => [:meth1]
     def meth1
      y.new.send_later(:issue1) #throws me exception
     end
     def meth2
      y.new.send_later(:issue1) #works
     end
     private
     def valiadate
      y.new.send_later(:issue1) #throws me exception
     end
    end
    class y
     include x::z
     def issue1
     end

    end
    module x::z
     def send_later(meth,*args)
     end
    end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T08:52:45.620

当您尝试直接在类上调用`to_yaml`或`to_json`或任何其他表示而不是在实例上调用它时，就会发生这种情况。例如

```
User.to_json 
```

会转储，但是

```
user = User.first
user.to_json 
```

会工作得很好。

**编辑：**

这个问题似乎也是旧版 Rails 中的一个错误，（至少）在 Rails 3 中已修复。

# boolean - 应用逻辑和

> ID：15172543
> 
> 赞同：2
> 
> 时间：2013-03-02T08:43:13.530
> 
> 标签：boolean, racket, logical-operators

我有一个表达式：`(map some-proc some-list)` 它的计算结果为`'(#f #f #f)`.

我想检查此列表中的所有布尔值是否为真。然而， `(and '(#f #f #f))`回报`'(#f #f #f)`，而我注意到了`#f`。

现在，如果我`(apply and '(#f #f #f))`，我得到错误： `and: bad syntax in: and`在 DrRacket 环境中。这令人困惑，因为 Racket Reference 给出的示例`(apply + '(1 2 3))`似乎与我的问题相同。

我做错了什么以及如何`#f`摆脱`'(#f #f #f)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T08:47:24.490

您可以使用 andmap ：

```
> (andmap (lambda (x) x) '(#f #f #f))
#f 
```

问题源于这样一个事实，*并且*不是一个过程，而是一个宏，以避免对其所有参数的评估。

但是，它可以在 Lazy Racket 中工作，*并且*是一个过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:15:37.833

只是另一种方式：

```
(foldr (lambda(x y) (and x y)) #t '(#f #f #f)) 
```

或者我将重写uselpa的解决方案（andmap）：

```
(andmap identity '(#f #f #f)) 
```

# github - github新手。叉子还是分支？

> ID：15172545
> 
> 赞同：0
> 
> 时间：2013-03-02T08:44:01.483
> 
> 标签：github, github-for-windows

我是 github 的新手。我刚刚下载了 Windows GUI github 版本。我想为某人的项目做出贡献。我应该将原始存储库分叉到我的存储库并从那里开始还是应该从原始存储库分支？以后如何将其合并回原始仓库？如何在 GUI 上执行此操作，还是我需要使用 Git shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:51:15.170

除非原作者允许你推送到他的仓库，否则你将不被允许这样做。为您不拥有的项目做出贡献的通常过程是：

*   创建回购的一个分支
*   克隆您刚刚创建的 fork 以在本地处理它
*   创建一个分支来添加你的贡献
*   向该分支添加提交
*   将其推送到您在 github 上的分叉存储库
*   向 github 上的原始存储库发送拉取请求，以便作者可以从您的存储库中获取分支，对其进行测试，并在他喜欢时集成它。

这在您单击Github 主页上[的巨人*3 - Fork a repository*链接时进行了解释](https://help.github.com/articles/fork-a-repo)

# c++ - 如何读取和写入文件

> ID：15172548
> 
> 赞同：2
> 
> 时间：2013-03-02T08:44:43.443
> 
> 标签：c++, stdvector, readfile

我有一个名为 read.txt 的文件`E:\My_project\dictionary database\read.txt`，它看起来像

```
1245
15
12
454564
122
.... 
```

我想逐行读取 read.txt 并将这些值保存到向量中，最后输出向量并将向量的值写入另一个名为 write.txt 的 txt 文件，该文件看起来与 read.txt 相同？我怎么能在 C++ 中做到这一点？？？

我试图从这样的文件中读取值：

```
 ifstream ifs("read.txt", ifstream::in); 
```

但我不明白 read.txt 文件保存在哪里。 read.txt 和 write.txt 的位置应该是什么？

编辑：如果我使用向量来保存来自文本的输入，我会收到错误：

```
int textLine;
  vector<int> input;

  ifstream ifs("C:\\Users\\Imon-Bayazid\\Desktop\\k\\read.txt", ifstream::in);

  if (ifs.good())   {

        while (!ifs.eof()) {
              getline(ifs, textLine);
              input.push_back(textLine);
        }

        ifs.close();

  } else
      cout << "ERROR: can't open file." << endl;

        for(int i=0;i<input.size();i++)
          cout<<input.at(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:49:29.013

如果您的二进制文件位于 中`E:\My_project`，那么您需要调整要打开的文件的路径： `ifstream ifs("./dictionary database/read.txt", ifstream::in);`

请参阅[此](https://stackoverflow.com/questions/8068921/relative-path-for-fstream)相关问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:50:11.560

由于文件名被硬编码为`"read.txt"`，因此该文件必须与可执行文件位于同一文件夹中。如果文件的位置不会改变，您可以硬编码完整路径：

```
ifstream ifs("E:\\My_project\\dictionary database\\read.txt", ifstream::in); 
```

（注意双反斜杠：这是 C++ 编译器将它们视为常规斜杠）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:50:19.793

您可以在打开文件时给出文件的绝对路径：

```
ifstream ifs("E:\\My_project\\dictionary database\\read.txt", ifstream::in); 
```

或者，您可以将读取文件的可执行程序移动到文件所在的同一目录中。

编辑：

通过像这样声明你的向量：`vector<int> input;`你创建了一个向量，你只能在其中存储整数值，但是你从 file( `textLine`) 中读取的是一个字符串。如果您只想将文件中的数字解释为整数值，则必须使用

```
input.push_back(atoi(textLine.c_str())); 
```

# lucene.net - 如何对 Lucene.Net 搜索的结果进行分组？

> ID：15172552
> 
> 赞同：3
> 
> 时间：2013-03-02T08:45:07.830
> 
> 标签：lucene.net

我已经设法创建文档并进行了一些复杂的搜索，但是在对一些搜索结果进行分组时遇到了问题。

搜索后显示的书籍很好。随着这个`Author`分组计数需要完成，这将基于相同的搜索查询。

例子，

```
Author Name      | Count
A                | 12
B                | 2 
```

我正在使用不支持分组的 Lucene.Net 3.0.3.0，但可能有一些解决方法。我也需要价格范围相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T08:24:59.950

[如果您编写自定义Collector](http://lucenenet.apache.org/docs/3.0.3/d4/d93/class_lucene_1_1_net_1_1_search_1_1_collector.html) ，一切皆有可能。您描述的是方面，可以通过自己计算文档值来轻松解决。核心部分是调用[IndexSearcher.Search](http://lucenenet.apache.org/docs/3.0.3/df/dbe/class_lucene_1_1_net_1_1_search_1_1_index_searcher.html#afec19567d857370aeb009824239eee90)重载接受收集器。收集器应该读取值，通常使用字段缓存实现并进行所需的计算。

这是一个简短的演示，使用了我的演示项目[Corelicious.Lucene](https://github.com/devhost/Corelicious/tree/master/Corelicious.Lucene)中的一些类。

```
var postTypes = new Dictionary<Int32, Int32>();
searcher.Search(query, new DelegatingCollector((reader, doc, scorer) => {
    var score = scorer.Score();
    if (score > 0) {
        var postType = SingleFieldCache.Default.GetInt32(reader, "PostTypeId", doc);
        if (postType.HasValue) {
            if (postTypes.ContainsKey(postType.Value)) {
                postTypes[postType.Value]++;
            } else {
                postTypes[postType.Value] = 1;
            }
        }
    }
})); 
```

完整代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text.RegularExpressions;
using System.Xml;
using Corelicious.Lucene;
using Lucene.Net.Analysis;
using Lucene.Net.Analysis.Standard;
using Lucene.Net.Documents;
using Lucene.Net.Index;
using Lucene.Net.QueryParsers;
using Lucene.Net.Search;
using Lucene.Net.Store;
using Directory = Lucene.Net.Store.Directory;
using Version = Lucene.Net.Util.Version;

namespace ConsoleApplication {
    public static class Program {
        public static void Main(string[] args) {
            Console.WriteLine ("Creating directory...");
            var directory = new RAMDirectory();
            var analyzer = new StandardAnalyzer(Version.LUCENE_30);
            CreateIndex(directory, analyzer);

            var userQuery = "calculate pi";
            var queryParser = new QueryParser(Version.LUCENE_30, "Body", analyzer);
            var query = queryParser.Parse(userQuery);
            Console.WriteLine("Query: '{0}'", query);

            var indexReader = IndexReader.Open(directory, readOnly: true);
            var searcher = new IndexSearcher(indexReader);

            var postTypes = new Dictionary<Int32, Int32>();
            searcher.Search(query, new DelegatingCollector((reader, doc, scorer) => {
                var score = scorer.Score();
                if (score > 0) {
                    var postType = SingleFieldCache.Default.GetInt32(reader, "PostTypeId", doc);
                    if (postType.HasValue) {
                        if (postTypes.ContainsKey(postType.Value)) {
                            postTypes[postType.Value]++;
                        } else {
                            postTypes[postType.Value] = 1;
                        }
                    }
                }
            }));

            Console.WriteLine("Post type summary");
            Console.WriteLine("Post type  | Count");

            foreach(var pair in postTypes.OrderByDescending(x => x.Value)) {
                var postType = (PostType)pair.Key;
                Console.WriteLine("{0,-10} | {1}", postType, pair.Value);
            }

            Console.ReadLine ();
        }

        public enum PostType {
            Question = 1,
            Answer = 2,
            Tag = 4
        }

        public static void CreateIndex(Directory directory, Analyzer analyzer) {
            using (var writer = new IndexWriter(directory, analyzer, true, IndexWriter.MaxFieldLength.UNLIMITED))
            using (var xmlStream = File.OpenRead("/Users/sisve/Downloads/Stack Exchange Data Dump - Sept 2011/Content/092011 Mathematics/posts.xml"))
            using (var xmlReader = XmlReader.Create(xmlStream)) {
                while (xmlReader.ReadToFollowing("row")) {
                    var tags = xmlReader.GetAttribute("Tags") ?? String.Empty;
                    var title = xmlReader.GetAttribute("Title") ?? String.Empty;
                    var body = xmlReader.GetAttribute("Body");

                    var doc = new Document();

                    // tags are stored as <tag1><tag2>
                    foreach (Match match in Regex.Matches(tags, "<(.*?)>")) {
                        doc.Add(new Field("Tags", match.Groups[1].Value, Field.Store.NO, Field.Index.NOT_ANALYZED));
                    }

                    doc.Add(new Field("Title", title, Field.Store.NO, Field.Index.ANALYZED));
                    doc.Add(new Field("Body", body, Field.Store.NO, Field.Index.ANALYZED));
                    doc.Add(new Field("PostTypeId", xmlReader.GetAttribute("PostTypeId"), Field.Store.NO, Field.Index.NOT_ANALYZED));

                    writer.AddDocument(doc);
                }

                writer.Optimize();
                writer.Commit();
            }
        }
    }
} 
```

# redis - 仅当 SCARD 低于某个值时才 SADD

> ID：15172556
> 
> 赞同：1
> 
> 时间：2013-03-02T08:45:28.413
> 
> 标签：redis, atomic, multiplayer

Node.js 和 Redis：

我有一个 LIST (users:waiting) 存储等待加入游戏的用户队列。

我有 SORTED SET（游戏：等待）等待用户的游戏。服务器每 30 秒更新一次新日期。这样我可以确保如果服务器崩溃，游戏将不再使用。如果服务器正在运行并填满，它将从排序集中删除自己。

每个游戏都有一个包含其中用户的 SET (game:id:users)。每场比赛最多可容纳 6 名玩家。

多个服务器正在使用 BRPOP 从 LIST 中提取用户（用户：等待）。

一旦服务器有了用户 id，它就会获取等待的游戏 id，然后继续在他们的 game:id:users SET 上运行 SCARD。如果此结果小于 6，则将它们添加到集合中。

问题：

如果多台服务器同时执行此操作，我们最终可能会一次将超过 6 个用户添加到一个集合中。例如，如果一个服务器请求 SCARD，而另一个服务器立即运行 SADD，则集合中的数量将会增加，但第一个服务器不会知道。

有没有办法阻止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:50:00.977

你需要redis支持的事务：[http ://redis.io/topics/transactions](http://redis.io/topics/transactions)

特别是在您的情况下，您需要注意 watch 命令：[http ://redis.io/topics/transactions#cas](http://redis.io/topics/transactions#cas)

# android - 如何更改Android的Shell

> ID：15172557
> 
> 赞同：-3
> 
> 时间：2013-03-02T08:45:42.860
> 
> 标签：android

我问这个问题是因为，有太多的命令在 Android 中不起作用。

比如，谁/哪个/找到（特别是我想要的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:03:08.747

找到这些命令的源代码，用交叉编译工具链编译它们。并将二进制文件推送到目标设备中。

通常这些命​​令在`/system/bin`文件夹下。

更好的做法是把源码放到Android源码中，编译好Android镜像后，生成的system.img就会包含你想要的。

在`/system/core/toolbox`Android 源代码中，有一些工具已经包含在 AOSP 中。

```
$ ls
alarm.c     cmp.c   dmesg.c       getevent.c   id.c        kill.c         lsof.c              mv.c           printenv.c  restorecon.c  runcon.c      setprop.c    sync.c     uptime.c
Android.mk  cp      du.c          getevent.h   ifconfig.c  ln.c           lsusb.c             nandread.c     ps.c        rm.c          schedtop.c    setsebool.c  syren.c    vmstat.c
cat.c       date.c  dynarray.c    getprop.c    iftop.c     load_policy.c  md5.c               netstat.c      r.c         rmdir.c       sendevent.c   sleep.c      toolbox.c  watchprops.c
chcon.c     dd.c    dynarray.h    getsebool.c  insmod.c    log.c          mkdir.c             newfs_msdos.c  readtty.c   rmmod.c       setconsole.c  smd.c        top.c      wipe.c
chmod.c     dd.h    exists.c      grep         ioctl.c     ls.c           MODULE_LICENSE_BSD  NOTICE         reboot.c    rotatefb.c    setenforce.c  start.c      touch.c
chown.c     df.c    getenforce.c  hd.c         ionice.c    lsmod.c        mount.c             notify.c       renice.c    route.c       setkey.c      stop.c       umount.c 
```

添加 .c 文件后，如 who.c、find.c，不要忘记修改 Android.mk。

# asp.net-mvc-4 - 使用从业务对象继承的视图模型进行模型验证

> ID：15172559
> 
> 赞同：1
> 
> 时间：2013-03-02T08:45:52.793
> 
> 标签：asp.net-mvc-4

在 MVC4 应用程序中，我有一些作为视图模型继承的业务对象。我想`DataAnnotations`在视图模型中使用而不是在业务对象中指定它。那可能吗。

**业务对象**

```
 public class Country
    {
        [Display(Name = "Country")]
        public virtual int CountryId { get; set; }
        public virtual string CountryName { get; set; }
        public virtual string CountryCode { get; set; }
    }

    public class State : Country
    {
        [Display(Name = "State")]
        public virtual int StateId { get; set; }
        public virtual string StateName { get; set; }
        public virtual string StateCode { get; set; }
    }

    public class City : State
    {
        public virtual int CityId { get; set; }

        [Display(Name = "City")]
        public virtual string CityName { get; set; }
    } 
```

**查看模型**

```
public class Regional
{
    public Regional()
    {
        Countries = new Collection<Country>();
        States = new Collection<State>();
        City = new City();
    }
    public Collection<Country> Countries { get; set; }

    public Collection<State> States { get; set; }

    [Required(ErrorMessage = "Required")]
    public City City { get; set; }
} 
```

在上面的代码中，我使用了 City Property 的数据注释。

1.  这里面临的问题是，即使我没有这个必需的注释，表单也得到了国家和州的验证，但没有验证城市名称。
2.  当我添加所需的注释时，它仍然只针对国家和州而不是城市名称进行验证。

有任何想法吗？

**我的观点**

```
@using (Html.BeginForm(Actions.AddCity, Controllers.AdminUtility, FormMethod.Post))
{
    <div class="alert-error">
        @Html.ValidationSummary()
    </div>
    <div class="row-fluid">
        <fieldset class="form-horizontal">
            <legend class="header">Add City</legend>
            <div class="control-group">
                @Html.LabelFor(m => m.City.CountryId, new { @class = "control-label" })
                <div class="controls">
                    @Html.DropDownListFor(m => m.City.CountryId, new SelectList(Model.Countries, "CountryId", "CountryName"),"", new { @class = "chosen", data_placeholder = "Choose Country..." })
                </div>
            </div>
            <div class="control-group">
                @Html.LabelFor(m => m.City.StateId, new { @class = "control-label" })
                <div class="controls">
                    @Html.DropDownListFor(m => m.City.StateId,new SelectList(Model.States, "StateId","StateName"), "",new { @class = "chosen", data_placeholder = "Choose State..." })
                </div>
            </div>
            <div class="control-group">
                @Html.LabelFor(m => m.City.CityName, new { @class = "control-label" })
                <div class="controls">
                    @Html.TextBoxFor(m => m.City.CityName)
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input type="submit" />
                </div>
            </div>
        </fieldset>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:12:45.407

您的验证是说该课程是必需的。您希望 CityName 是必需的，因此在您的场景中，不，您必须在域模型上指定属性。

请注意 - 我认为您的域模型不是很清楚。City、State 和 Country 不会相互继承，它们只是相关的。一个国家在一个国家，它不是一个国家......此外，您应该始终验证您的域对象，因为它们可能来自多个来源。然后，您的 ViewModel 将具有特定于该视图的额外验证——也许它有一些用于 ui 处理的额外数据，这些数据不需要传递到您的域等。

# jquery - 使用 JavaScript 和 CSS 切换内容在 Kirby 中不起作用

> ID：15172562
> 
> 赞同：2
> 
> 时间：2013-03-02T08:46:05.570
> 
> 标签：jquery, kirby

我正在尝试使用在这里找到的切换代码：http: [//jsfiddle.net/wGbh5/](http://jsfiddle.net/wGbh5/)。这似乎很简单，并且完全按照我的意愿行事。

所以我的**style.css**文件中有以下代码：

```
.clickme {
background-color: #eee;
border-radius: 4px;
color: #666;
display: block;
margin-bottom: 5px;
padding: 5px 10px;
text-decoration: none;}

.clickme:hover {
    text-decoration: underline;
} 
```

然后我创建了一个包含以下代码的**toggle.js**文件：

```
// Hide all the elements in the DOM that have a class of "box"
$('.box').hide();
// Make sure all the elements with a class of "clickme" are visible and bound
// with a click event to toggle the "box" state
$('.clickme').each(function() {
    $(this).show(0).on('click', function(e) {
        // This is only needed if your using an anchor to target the "box" elements
        e.preventDefault();

        // Find the next "box" element in the DOM
        $(this).next('.box').slideToggle('fast');
    });
}); 
```

我在我的 html 中调用了这两个文件，在**header**中使用了这些行

```
<link rel="stylesheet" href="http://localhost:8888/kirby/assets/styles/styles.css" />
<script src="http://localhost:8888/kirby/assets/js/toggle.js"></script> 
```

正如您在链接中看到的，我正在使用 MAMP 在本地工作并试用 CMS [Kirby](http://getkirby.com/)。

在**HTML 文件**中，代码如下所示：

```
<a href="#" class="clickme">Click Me</a>
<div class="box">
    Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
    Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
    when an unknown printer took a galley of type and scrambled it to make a type
</div> 
```

问题是，当我在浏览器中加载 html 文件时，它不起作用（如果它工作正常，我会在这里？）。“clickme”和“box”内容都会显示，当我单击它们时没有任何附加内容。

谁能帮我解决我的问题？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-06T10:19:53.677

这很可能是您调用 css 和 js 文件的方式，这就是问题所在。用 kirby 调用 css 文件的正确方法是 css

```
<?php echo css('assets/styles/styles.css') ?> 
```

对于 js

```
<?php echo js('assets/js/toogle.js') ?> 
```

# jquery - jQuery Mobile 函数不返回 (OO)

> ID：15172566
> 
> 赞同：0
> 
> 时间：2013-03-02T08:46:30.957
> 
> 标签：jquery, oop, jquery-mobile

我正在尝试一些面向对象的 jQuery，但我还没有走远。我创建了两种方法；

*   `DoConnect`-> AJAX 请求检查 URL 是否可用。 `callback(true)`如果连接成功，`callback(false)`如果失败。
*   `Connect`-> 从需要调用的任何地方调用。

**什么有效？**

`DoConnect`尝试连接到主机并发送一个`callback`. 这工作得很好。 `Connect`读到这个`callback`，也工作正常。（我通过添加`alert`返回`callback`的布尔值对此进行了测试）

**什么没有？**

好吧，`Connect`读取`callback`and has to`return`一个值到它首先被调用的地方。

**我到目前为止的代码**

*类和`Connect`方法*

```
var Class = 
{
    Connect : function(host, apikey)
    {
        var returnVal;

        DoConnect(host, apikey, function(res)
        {
            if (res)
            {
                // alert('TRUE');
                returnVal = true;
            }
            else
            {
                // alert('FALSE');
                returnVal = false;
            }
        });

        return returnVal;
    }
} 
```

*`DoConnect`方法_*

```
var DoConnect = function(host, apikey, callback)
{
    $.ajax({
        type: 'GET',
        url: host + "/api?do=ping&" + apikey,
        dataType: 'jsonp',
        success: function(e)
        {
            if (e.status != undefined)
            {
                callback(false);
            }
            else
            {
                callback(true);
            }
        }
    });
} 
```

*我这样称呼它；*

```
var IsConnected = Class.Connect(host, apikey);
alert(IsConnected) // Returns undefined. 
```

Chrome 的调试控制台不返回任何错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:50:43.137

`returnVal`在答案出现之前您的回报。返回值是异步的，你必须在整个链中保持异步。

您还需要向`Connect`函数添加回调，例如：

```
Connect : function(host, apikey, callback) 
```

然后在 DoConnect 函数的回调中调用回调：

```
 if (res)
        {
            // alert('TRUE');
            return callback(true);
        }
        else
        {
            // alert('FALSE');
            return callback(false);
        } 
```

您可以调用您的函数，然后像：

```
Class.Connect(host, apikey, function(returnValue) {
    alert(returnValue);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:08:33.083

在返回值之前，您需要等待 ajax 调用完成。这可以通过将`async`选项设置为 false 来完成，例如……哦等等，不，它不能。

从[文档](http://api.jquery.com/jQuery.ajax/)：

> 跨域请求和 dataType: "jsonp" 请求不支持同步操作。

好的，所以我们必须做一个好的老式轮询循环：

```
... // after $.ajax call
while(typeof(returnVal) === "undefined");

return returnVal; 
```

它专门破坏了 jquery 调用的异步特性（“AJAX”中的第一个“A”），但如果这是您需要的功能，这将让您到达那里。

# android - ImageView + ListView + GridView - 滚动仅适用于 ListView

> ID：15172570
> 
> 赞同：1
> 
> 时间：2013-03-02T08:47:01.180
> 
> 标签：android, listview, gridview, uiimageview, scrollview

我写了 xml 文件显示 imageview 然后 listview 然后 gridview .. imageview 不向上滚动 .. 只有 listView 滚动和 gridview 根本不出现

我尝试使用 ScrollView .. 但它也不起作用它显示高度非常小的 listView 和 GridView 并且 imageView 不滚动

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="20dp"
    android:scrollbars="vertical"
         >

<RelativeLayout 
    android:id= "@+id/child"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    >
    <ImageView 
        android:id="@+id/car_image"
        android:layout_width="wrap_content"
        android:layout_height="150dp"
        android:padding="50dp"
        android:background="@drawable/fortuner_2011"
        android:scaleType="centerCrop"
        />

    <ListView 
        android:id="@+id/car_info"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/car_image"
        ></ListView>

    <GridView 
        android:id="@+id/carPics"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:numColumns="3"
        android:layout_below="@+id/car_info"
        ></GridView>
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:40:53.273

将 your`ImageView`作为页眉添加到 the`ListView`和 your`GridView`作为页脚。

# android - 在android的listview中更改baseadapter中linearlayout的高度和宽度运行时间？

> ID：15172578
> 
> 赞同：2
> 
> 时间：2013-03-02T08:48:01.300
> 
> 标签：android, height, width, android-linearlayout

我想更改列表视图中使用的线性布局的高度我如何更改该布局的高度和宽度我将把我的代码放在这里但不更改线性布局的高度如何做到这一点

***主页.xml***

```
 <LinearLayout    
       android:id="@+id/homelistlayout1"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_weight="1"
                                          >
             <ListView
            android:id="@+id/listadd1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                >
         </ListView>

</LinearLayout> 
```

***主列表.xml***

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="5"
    android:background="@color/color_advertise"
     >
       <LinearLayout   android:id="@+id/layoutadvertise"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:layout_weight="3"
                       android:padding="2dp"
                     >

                    <ImageView
                            android:id="@+id/imageadvertise"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:scaleType="fitXY"
                            android:src="@drawable/adv" />      

      </LinearLayout>

    <LinearLayout   android:id="@+id/layoutpromotional"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:padding="1dp"
                     >

                     <TextView
                             android:id="@+id/textpromotional"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:text="Medium Text"
                             android:textColor="@android:color/white"
                             android:textSize="12sp" />   

    </LinearLayout>

    <RelativeLayout     android:id="@+id/layoutdistance"   
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_weight="1"
                     >
                    <TextView
                             android:id="@+id/textdistance"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentLeft="true"
                             android:text="Distance :"
                             android:textColor="@color/color_orange" 
                             android:textSize="12sp" />   

                    <TextView
                             android:id="@+id/textkm"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:text="15km"
                             android:textColor="@color/color_orange" 
                             android:layout_toRightOf="@id/textdistance"
                             android:textSize="12sp" />

                    <ImageView
                            android:id="@+id/imagestipciate"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:src="@drawable/stipciate" />    

    </RelativeLayout>     

</LinearLayout> 
```

***适配器类.java***

```
public class LazyAdapterHomeAdvertise extends BaseAdapter {

    private static final String TAG_SHOWTEXT="showtext";
    String showtext;
    private static final String TAG_PRODUCTINFO="product_info";
    String productinfo;

    private static final String TAG_THUMBIMAGE="thumbsrc";
    String thumbimage;

    private static final String TAG_DISTANCE="distance";

    private Activity activity;
    private ArrayList<HashMap<String, String>> result; 
    private static LayoutInflater inflater=null;
    public GridImageLoader gridimageLoader; 
    int imageWidth;
    int imageheight;
    Context context; 
    int width;
    int height;

    public LazyAdapterHomeAdvertise(Activity a, ArrayList<HashMap<String, String>> r) {
        activity = a;
        result=r;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        gridimageLoader=new GridImageLoader(activity.getApplicationContext());

        width = a.getWindowManager().getDefaultDisplay().getWidth();
        height=a.getWindowManager().getDefaultDisplay().getHeight();
        imageWidth = ((width/2)-5);
        imageheight=(height*25)/100;

    }

    public int getCount() {
        return result.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder
    {
        public TextView textpromotional;
        public TextView textkm;
        public ImageView imageadvertise;

    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;

        LinearLayout main =(LinearLayout)vi.findViewById(R.id.mainlayout);
        main.setLayoutParams(new LinearLayout.LayoutParams(imageWidth, imageheight));
        ViewHolder holder;
        if(convertView==null)
        {
            vi = inflater.inflate(R.layout.homelist, null);
            holder=new ViewHolder();
            holder.textpromotional=(TextView)vi.findViewById(R.id.textpromotional);
            holder.textkm=(TextView)vi.findViewById(R.id.textkm);
            holder.imageadvertise=(ImageView)vi.findViewById(R.id.imageadvertise);
            vi.setTag(holder);
        }
        else

            holder=(ViewHolder)vi.getTag();

        holder.textpromotional.setText(result.get(position).get(TAG_SHOWTEXT));
        holder.textkm.setText(result.get(position).get(TAG_DISTANCE));
        holder.imageadvertise.setTag(result.get(position).get(TAG_THUMBIMAGE));
        gridimageLoader.DisplayImage(result.get(position).get(TAG_THUMBIMAGE), activity, holder.imageadvertise);
        return vi;
    }

    public static float convertDpToPixel(float dp, Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi/160f);
        return px;
    }

} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-04T10:48:00.527

从你的 xml 中删除 android_weight 属性使用 android:layout_height="120dp" 你的愿望

例子：

```
 <LinearLayout   android:id="@+id/layoutadvertise"
                   android:layout_width="fill_parent"
                   android:layout_height="wrap_content"
                   android:padding="2dp"
                 >

  </LinearLayout> 
```

# c++ - 维基百科的线交点公式不能处理大数？

> ID：15172582
> 
> 赞同：1
> 
> 时间：2013-03-02T08:48:13.137
> 
> 标签：c++, numbers, lines

我正在开发一个小游戏，它需要一个函数来计算两条线的交点。所以我从维基百科（[http://en.wikipedia.org/wiki/Line-line_intersection](http://en.wikipedia.org/wiki/Line-line_intersection)）中得到了这个公式，并将它变成了一个函数。

```
bool lineline(int L1X1, int L1Y1, int L1X2, int L1Y2, int L2X1, int L2Y1, int L2X2, int L2Y2, int* X, int* Y) { // Returns the point of intersection of two lines
    int D = (L1X1 - L1X2) * (L2Y1 - L2Y2) - (L1Y1 - L1Y2) * (L2X1 - L2X2); // Denominator. If zero then no intersection

    if (D == 0) { // Parallel and possibly overlapping
        return false;
    } else {
        *X = ( (L1X1 * L1Y2 - L1Y1 * L1X2) * (L2X1 - L2X2) - (L1X1 - L1X2) * (L2X1 * L2Y2 - L2Y1 * L2X2) ) / D; // Calculate x
        *Y = ( (L1X1 * L1Y2 - L1Y1 * L1X2) * (L2Y1 - L2Y2) - (L1Y1 - L1Y2) * (L2X1 * L2Y2 - L2Y1 * L2X2) ) / D; // Calculate y

        std::cout << D << " | " << *X << " | " << *Y << "\n";

        if (*X >= Bmin(L1X1, L1X2) && *X <= Bmax(L1X1, L1X2) && *Y >= Bmin(L1Y1, L1Y2) && *Y <= Bmax(L1Y1, L1Y2)) {
            // Intersection is on first line
            if (*X >= Bmin(L2X1, L2X2) && *X <= Bmax(L2X1, L2X2) && *Y >= Bmin(L2Y1, L2Y2) && *Y <= Bmax(L2Y1, L2Y2)) {
                // Intersection is on second line
                return true;
            } else {
                // Intersection is on first, but not on second line
                return false;
            }
        } else {
            // Intersection is not on first line.
            return false;
        }

        return true;
    }
} 
```

它工作得很好，例如当我用这些参数调用它时它返回 true

```
lineline(400, 0, 400, 2000, 0, 400, 2000, 400, &x, &y); 
```

但是，当我将第二条线向上移动 1300 个单位时......

```
lineline(400, 0, 400, 2000, 0, 1700, 2000, 1700, &x, &y) == false; 
```

它返回假。虽然第二个函数调用的两条线应该相交，对吧？它使用这些参数计算的值是：

```
D = -4000000
*X = 400;
*Y = -447; 
```

谁能帮我解决这个问题？我已经坚持了一天，我可能只是错过了一些简单的东西，就像上次一样，但我看不到它。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:56:11.807

该公式将输入数字之间的差异提高到三度，因此如果差异大约为三位数，您应该小心溢出一个`int`，它有九位数字，而且第一个数字可以上升到 2。一旦你溢出一个`int`，由于乘以正数，您开始看到负数，因此您的其余计算变得不正确。

要提高范围，请使用 64 位整数（即`long long`）作为中间结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:11:19.753

不是 100% 确定，但你不能重新调整值吗？例如，除以最大的并使用浮动结果，您将拥有相同的大小，只是不同的比例。由于您不需要精确的交叉点，这应该可以工作，只记住平行线不会得到 0，因此您必须使用非常小的值 alpha 来定义范围 0 +/- alpha 来定义 D 值平行线。

# javascript - 加载数据时，Angular 的 Resource Promise 不会重新渲染

> ID：15172590
> 
> 赞同：1
> 
> 时间：2013-03-02T08:49:33.820
> 
> 标签：javascript, binding, angularjs, promise, angularjs-scope

我是 AngularJS 的新手，在加载数据时无法获得资源承诺重新渲染视图。这导致 {{}} 被替换为空白（来自承诺），但视图保持不变。

我已经看到了很多使用 $apply、$digest、$watch 等解决 promise 的问题的例子，并且对这些建议持开放态度，我很想知道我的方法的根本问题。这是我的控制器代码

```
<div ng-controller='pook'>
<p>There are {{posts.length}} posts</p>
<div ng-repeat='post in posts'>
    <h3>{{post.title}}</h3>
    <div>{{post.text}}</div>
    <a href='/readPost/{{post.id}}'>More</a>
    |  -
    <a href='/editPost/{{post.id}}'>Edit</a>
    |  -
    <a href='/deletePost/{{post.id}}'>Delete</a>
</div>
</div>
<script type='text/javascript'>function pook($scope, $http, $route, $routeParams, $resource)
{
/*Approach #1 does work
$http.post('/').success(function(data, status, headers, config)
{
  $scope.posts = data.posts;
});
*/

var User = $resource('/');

/*Approach #2 does work
User.save('', function(data)
{
  $scope.posts = data.posts;
})
*/

//Approach #3 does NOT work -> renders blanks and never re-renders on loaded data
$scope.posts = User.save().posts
}
</script> 
```

我加载的脚本是

//ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js' //ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular-resource.min.js'

我想要的承诺行为的描述在这里 [http://docs.angularjs.org/api/ngResource](http://docs.angularjs.org/api/ngResource) .$resource

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:28:00.227

将您的 fetch 更改为：

```
var User = $resource('/');
$scope.postsResponse = User.$save(); 
```

并且您绑定到：

```
<div ng-repeat='post in posts'>
  <h3>{{postResponse.post.title}}</h3>
  <div>{{postResponse.post.text}}</div>
</div> 
```

由于 Angular 基于 Promise，因此可以将 $http 或 $resource 操作的响应直接绑定到 HTML，当它被解析时，angular 会更改属性。

如果可能，请从服务器响应（`{posts: []}`to `[]`）中删除包装器。如果你这样做，你需要提示资源响应是一个数组。查看[文档](http://docs.angularjs.org/api/ngResource.$resource)以获取更多信息。

发生错误是因为当您在资源上调用方法时，它返回一个空心对象，因此没有`.posts`它。但是如果你将它绑定到你的代码，angular会等到它到达那里。

这就是您在前端应该做的所有事情，**您确定服务器会回答预期的内容**吗？**你确定你需要一个帖子来检索数据**吗？

# javascript - 通过 Html 将信息发送到 IP

> ID：15172591
> 
> 赞同：-2
> 
> 时间：2013-03-02T08:49:55.013
> 
> 标签：javascript, html

我正在使用基于 Web 的微控制器，现在我想通过 Html 页面向我的微控制器发送某种数据。我可以在原始 Html 文件中执行此操作，还是应该使用其他程序，例如 javascript 或者 php，每个人都可以给我一些简单的源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:02:02.730

我能想象的最简单的方法是制作一个按钮，附加一个 PHP 脚本，然后 PHP 执行一个编译的二进制文件，在你的微控制器中做一些事情。示例：index.html

```
<html>    
  <body>
    <Form Name ="form1" Method ="POST" ACTION = "send.php">
    First name: <input type="text" name="fname"><br>
    <INPUT TYPE = "Submit" Name = "Submit1" VALUE = "Login">
  </body>
</html> 
```

发送.php：

```
<?php 
    echo "<html><body>";
    echo "The microcontroller say:"+exec('microcontrollerbinary $_POST['fname']');
    echo "</body></html>";
?> 
```

你的微控制器应该有一个二进制文件，它从命令行“fname”读取第一个参数并打印出一些东西

# android - Google Maps API V2 在模拟器中不起作用

> ID：15172597
> 
> 赞同：0
> 
> 时间：2013-03-02T08:50:34.800
> 
> 标签：android, google-maps

我正在开发 android 中的 Googl Maps API v2。

MapExample.java 代码

```
 public class MapExample extends FragmentActivity {  
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);             
} 
```

main.xml 代码

```
<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

清单文件代码

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-feature android:glEsVersion="0x00020000" 
                android:required="true" />

<permission
    android:name="com.example.android.mapexample.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>

                                                                                                                                                                                                                                                                         <uses_permission                                                                                 android:name="com.example.android.mapexample.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission  android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />    
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="My API_KEY"/>

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

我在模拟器中运行此代码它在模拟器中显示一条消息并在 LogCat 中显示警告

消息：您的某些应用程序所依赖的 Google Play 服务不受您的设备支持。请联系制造商以获取有关确定按钮的帮助。警告：Google Play 签名无效。

每当单击该按钮时，我都会收到错误

```
03-02 13:17:30.746: D/AndroidRuntime(905): Shutting down VM
03-02 13:17:30.746: W/dalvikvm(905): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-02 13:17:30.776: E/AndroidRuntime(905): FATAL EXCEPTION: main
03-02 13:17:30.776: E/AndroidRuntime(905): java.lang.NullPointerException
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1409)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.Activity.startActivityForResult(Activity.java:3351)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.Activity.startActivityForResult(Activity.java:3312)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:817)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.Activity.startActivity(Activity.java:3522)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.Activity.startActivity(Activity.java:3490)
03-02 13:17:30.776: E/AndroidRuntime(905):  at com.google.android.gms.internal.e$2.onClick(Unknown Source)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.view.View.performClick(View.java:4084)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.view.View$PerformClick.run(View.java:16966)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.os.Handler.handleCallback(Handler.java:615)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.os.Looper.loop(Looper.java:137)
03-02 13:17:30.776: E/AndroidRuntime(905):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-02 13:17:30.776: E/AndroidRuntime(905):  at java.lang.reflect.Method.invokeNative(Native Method)
03-02 13:17:30.776: E/AndroidRuntime(905):  at java.lang.reflect.Method.invoke(Method.java:511)
03-02 13:17:30.776: E/AndroidRuntime(905):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-02 13:17:30.776: E/AndroidRuntime(905):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-02 13:17:30.776: E/AndroidRuntime(905):  at dalvik.system.NativeStart.main(Native Method) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:06:35.417

在关于堆栈溢出的一篇文章中，我偶然发现了一组包含 2 个文件的文件：

**com.android.vending.apk**

和：

**com.google.android.gms.apk**

以下是我为自己保存的链接：

[http://www.filedropper.com/comandroidvending-1](http://www.filedropper.com/comandroidvending-1)

[http://www.filedropper.com/comgoogleandroidgms-1](http://www.filedropper.com/comgoogleandroidgms-1)

或者：

[https://www.dropbox.com/s/u3blse4z3l2et96/com.google.android.gms-6413100ccfca460007fdc988b1363db8.apk](https://www.dropbox.com/s/u3blse4z3l2et96/com.google.android.gms-6413100ccfca460007fdc988b1363db8.apk)

[https://www.dropbox.com/s/8jiban3pq2cgkvo/com.android.vending-108b71f4793186b8fd1768a9cd19bbd5.apk](https://www.dropbox.com/s/8jiban3pq2cgkvo/com.android.vending-108b71f4793186b8fd1768a9cd19bbd5.apk)

两种都试一下，我不记得哪个有效，但肯定有一个。

您应该做的是创建具有以下属性的 AVD：

![在此处输入图像描述](../Images/46dc658379f65544a5383abdb8589c76.png)

启动它，当它完成启动后，打开命令提示符并前往这两个文件所在的文件夹，然后使用 install 命令将它们安装到 avd，

例子：

**c:\Users\Downloads\adb install com.android.vending.apk**

安装这两个文件并收到**成功**消息后，重新启动模拟器并尝试在此 AVD 中运行您的地图应用程序，它现在应该可以工作了。

**更新：**

这是我使用的文件，在我的两个工作站上工作，配置如屏幕截图所示，请尝试它们并告诉我你的想法。

[http://www.mediafire.com/download.php?pxpjfkveemq29qk](http://www.mediafire.com/download.php?pxpjfkveemq29qk)

[http://www.mediafire.com/download.php?zn8wna5wf4ek5le](http://www.mediafire.com/download.php?zn8wna5wf4ek5le)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:57:08.720

正如错误消息所说，您需要 Google Play 服务，该服务在模拟器上不可用（以及在没有 Google Play 商店的设备上 - 例如 Amazon Kindle）。您必须[在手机上进行测试](http://www.vogella.com/articles/AndroidGoogleMaps/article.html#maps_device)，但也有一些[技巧](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T05:52:54.683

我创建了一个（德语）描述如何让它工作：

[http://linuxchef.blogspot.de/2013/05/google-maps-api-v2-im-android-emulator.html](http://linuxchef.blogspot.de/2013/05/google-maps-api-v2-im-android-emulator.html)

您基本上需要一个至少具有 API 级别 9 且没有 Google API 的模拟器。然后，您必须从有根设备中获取 APK：

adb -d 拉 /data/app/com.android.vending-2.apk adb -d 拉 /data/app/com.google.android.gms-2.apk

并将它们安装在模拟器中：

adb -e 安装 com.android.vending-2.apk adb -e 安装 com.google.android.gms-2.apk

如果您的模拟器至少具有 API 级别 14 并另外安装 com.google.android.apps.maps-1.apk，您甚至可以运行本机 Google Maps 应用程序

玩得开心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T09:11:44.370

根据 Android 官方文档，您无法在模拟器上测试 google maps v2，您需要安装了 google play 的 android 设备...

# ajax - asp.net mvc 4 使用 Datepicker 过滤表

> ID：15172605
> 
> 赞同：1
> 
> 时间：2013-03-02T08:51:30.607
> 
> 标签：ajax, asp.net-mvc, datepicker

单击日期选择器中的日期时，我正在尝试过滤表。我所做的是使用 $.get 将单击的日期作为 JSON 发送到我的控制器，然后使用 linq 过滤表，然后返回带有过滤表的视图作为我的模型。我使用 firebug 来检查响应，它向我显示了正确的 html，其中的表格与单击的日期匹配，但它没有显示在浏览器中。我该如何解决？

```
$("#adminCalendar").datepicker({
    onSelect: function (date) {
        $.get("/Administrator/DateFilter", { "date": date }, null);
    }
}); 
```

控制器：

```
 public ActionResult DateFilter(string date)
    {
        var dateTime = Convert.ToDateTime(date).ToShortDateString();

        var transactions = (from transaction in db.Transactions
                           select transaction).ToList();

        var tran = from transaction in transactions
                   where transaction.OccassionDate.ToShortDateString() == dateTime
                   select transaction;

        return View("Index", tran);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:12:52.513

当您通过 AJAX 请求某些内容时，您应该做一些响应。在您的情况下，您可以执行以下操作：

```
$.get("/Administrator/DateFilter", { "date": date }).done(function (result) {
    $('#myDiv').html(result);
}); 
```

或者

```
$('#myDiv').load("/Administrator/DateFilter", { date: date }); 
```

您还应该添加带有`myDiv`显示请求结果的 id 元素。

```
<div id="myDiv"></div> 
```

并将控制器中的结果从 View 更改为 PartialView 以避免发送带有布局的结果。

您还可以将 ajax 请求更改为`window.location = '/Administrator/DateFilter?date=' + date`. 在这种情况下，您保留操作方法的查看结果，并且不需要添加`myDiv`元素。

# asp.net-mvc-4 - 使用 MVC4 和 EF5 应用更改的最佳实践

> ID：15172609
> 
> 赞同：1
> 
> 时间：2013-03-02T08:52:32.507
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有一个 CustomerOrder 视图，我想在其中更改现有的 CustomerOrder。

我有一个非常简化的视图模型，看起来像这样：

```
 public class CustomerOrderViewModel
    {
        public int ID { get; set; }
        public Customer Customer { get; set; }
        public DateTime Date { get; set; }
        public IEnumerable<OrderRow> OrderRows { get; set; } 

    }

    public class OrderRow
    {
        public int id { get; set; }
        public int price { get; set; }
    }

    public class Customer
    {
        public string Name { get; set; }    
    } 
```

我还有一个带有映射表/字段的数据库。

在我的 GET 操作方法中，我在 Automapper 的帮助下加载订单，如下所示：

```
 var customerOrder =  using (var ctx = new My_Entities()) {
                return ctx.CustomerOrders.
                    Include("Orderrows").
                    Include("Customer").
                    Single(o => o.CustomerOrderID == id); 
            }
  var model= AutoMapper.Mapper.DynamicMap<DataAccessLayer.CustomerOrder, CustomerOrderViewModel>(customerOrder); 
```

在视图中，我使用 Knockout 绑定到那里的视图模型，用户可以在其中更新 CustomerOrder。这包括编辑客户信息和添加新的订单行等。

然后在回帖中将 ViewModel 映射回 ObjectContext CustomerOrder：

```
var customerOrderToBeSaved =
            AutoMapper.Mapper.DynamicMap<CustomerOrderViewModel, CustomerOrder>(
                customerOrderViewModel);
        try
        {
            using (var ctx = new MyEntities())
            {

                ctx.CustomerOrders.Attach(customerOrderToBeSaved);
                ctx.CustomerOrders.ApplyCurrentValues(customerOrderToBeSaved);
                ...
                ctx.SaveChanges();

            }
        } 
```

我收到错误消息：**ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。**

好的，我能理解。但是我该怎么做呢？我可以获取现有对象并将更改应用于该对象吗，因为这确实是我想要的。我试图查找旧的并将其分离，但我没有得到它。也许我以完全错误的方式这样做。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:49:41.227

您不应该附加`customerOrderToBeSaved`，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd466205.aspx)关于 的论点`ApplyCurrentValues`。

> 具有属性更新以应用于原始对象的*分离对象。*

因此，您必须将实体从数据库加载到上下文中，然后`ApplyCurrentValues`使用具有新值的分离对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:07:21.583

您不必从数据库中加载行来更新它**。**

你可以这样做：

```
var entity = ctx.CustomerOrders.Attach(customerOrderToBeSaved);
ctx.Entry( entity ).State = EntityState.Modified;
ctx.SaveChanges(); 
```

这将告诉 EF 发出覆盖记录中**所有**列的 UPDATE SQL 语句。

您可以像这样选择要更新的列：

```
var entity = ctx.CustomerOrders.Attach(customerOrderToBeSaved);

var entry = ctx.Entry( entity );
entry.Property( o => o.<ColumnPropertyToUpdate> ).IsModified = true;
entry.Property( o => o.<ColumnPropertyToUpdate> ).IsModified = true;
...

ctx.SaveChanges(); 
```

如果您这样做，EF 将仅包含您在 UPDATE 语句中标记为已修改的列。

# android - Android：将设备 USB 插头插入 USB 端口/从 USB 端口拔出时的 BroadcastReceiver

> ID：15172611
> 
> 赞同：8
> 
> 时间：2013-03-02T08:53:35.260
> 
> 标签：android, usb, broadcastreceiver, host

我的应用程序没有捕获“ACTION_USB_DEVICE_ATTACHED”，但“ACTION_USB_DEVICE_DETACHED”工作正常。如果我连接 USB 设备但我在执行过程中断开连接`BroadcastReceiver`正确捕获“ACTION_USB_DEVICE_DETACHED”，应用程序将正确启动。如果我再次附加，`BroadcastReceiver`则什么也抓不到。

```
 IntentFilter filter = new IntentFilter();
filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);
filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
rocrailService.registerReceiver(mUsbReceiver, filter);

  // BroadcastReceiver when insert/remove the device USB plug into/from a USB port  
  BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
  public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    System.out.println("BroadcastReceiver Event");
    if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
        mSerial.usbAttached(intent);
        mSerial.begin(mBaudrate);
        loadDefaultSettingValues();
        Run=true;
        start();
        System.out.println("BroadcastReceiver USB Connected");

    } else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
        mSerial.usbDetached(intent);
        mSerial.end();
        Run=false;
        System.out.println("BroadcastReceiver USB Disconnected");
    }
  } 
```

并体现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="net.DCCWLocoDisplay"
android:versionCode="0"
android:versionName="0" >

<uses-sdk android:targetSdkVersion="12"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

<application
    android:icon="@drawable/dccw"
    android:label="@string/app_name" >
    <activity android:icon="@drawable/cab_64" android:name="net.DCCWLocoDisplay.activities.ActRCCab" android:theme="@style/FullHeightMainDialog" android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter>
            <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" 
               android:resource="@xml/device_filter" />      
    </activity>
    <activity android:name="net.DCCWLocoDisplay.activities.ActPreferences" android:theme="@style/FullHeightDialog" />
    <activity android:name="net.DCCWLocoDisplay.activities.ActAccessory" android:theme="@style/FullHeightDialog" />
    <activity android:name="net.DCCWLocoDisplay.activities.ActAbout" android:theme="@style/FullHeightDialog" />
    <activity android:name="net.DCCWLocoDisplay.activities.ActProgramming" android:theme="@style/FullHeightDialog" />
    <activity android:name="net.DCCWLocoDisplay.activities.ActSteps" android:theme="@style/FullHeightDialog" />
    <service android:name="net.DCCWLocoDisplay.DCCWLocoDisplay"/>
    </application>

 </manifest> 
```

设备过滤器（我检查供应商和产品 ID）：

```
<resources>
<!-- 0x0403 / 0x6001: FTDI FT232R UART -->
<usb-device vendor-id="1027" product-id="24577" /> <!-- FT232RL -->
</resources> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-16T09:49:56.423

一切都像上面描述的那样工作，除了一点点变化！在我的研究中，应用程序标签中的 singleTask 没有帮助，但是当我把它放在活动标签中时有帮助

```
<activity
...
android:launchMode="singleTask"> 
```

它为我提供了 ANDROID 开始发送 onNewIntent 到活动。在 onNewIntent 上，我只需要从意图中获取设备，而无需任何权限请求：

```
@Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);
    if(intent.getAction().equals(UsbManager.ACTION_USB_DEVICE_ATTACHED))
    {
        UsbDevice device  = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:21:31.043

也添加此权限:)

```
<uses-feature android:name="android.hardware.usb.host" />
<uses-permission android:name="android.permission.USB_PERMISSION" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:56:02.753

也尝试添加`<application android:launchMode="singleTask">`. 这对我有用`USB_ACCESSORY_ATTACHED`，也可能对你有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T06:35:10.347

我能够通过以下方式解决此问题：

1.  在 Launcher Activity 中添加`android:launchMode="singleTask"`属性
2.  在您的启动器活动中添加此意图过滤器

    ```
    <intent-filter>
        <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
    </intent-filter> 
    ```

3.  将元数据添加到您的 Launcher Activity

    ```
    <meta-data
        android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
        android:resource="@xml/device_filter" 
    /> 
    ```

4.  在启动器活动中覆盖 OnNewIntent 方法

    ```
    protected void onNewIntent(Intent intent) {
        if(intent.getAction().equals(UsbManager.ACTION_USB_DEVICE_ATTACHED)){
            getPermission();
        }
    }; 
    ```

    5.  现在，如果您要分离 -> 再次附加 USB 设备，`onNewIntent()`将调用方法..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-29T09:48:44.137

Android Reference for Activity 说使用 onNewIntent()：

“对于在其包中将 launchMode 设置为“singleTop”的活动，或者如果客户端在调用 startActivity(intent) 时使用了 FLAG_ACTIVITY_SINGLE_TOP 标志，则调用此方法。

那么launchMode singleTop == singleTask？

# java - 反射不在类中打印构造函数名称

> ID：15172612
> 
> 赞同：-1
> 
> 时间：2013-03-02T08:53:35.890
> 
> 标签：java, reflection

我正在尝试使用反射打印构造函数名称，但是它跳过了用于打印循环名称的循环。

```
package reflection.com;

import java.lang.*;
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.lang.reflect.Modifier;

abstract interface FirstInterface {

    void showFirstInterface();
}

abstract interface SecondInterface {

    void showSecondInterface();
}

abstract interface ThirdInterface {

    void showThirdinterface();
}

class SuperClass implements FirstInterface {

    int x, y, z;

    SuperClass() {
        System.out.println("Super Class Constructor...");
    }

    public void showFirstInterface() {
        System.out.println("In class Super Class....");
    }
}

public class SubClass extends SuperClass implements SecondInterface, ThirdInterface {

    int a, b, c;

    SubClass() {
    }

    SubClass(int a, int b, int c) {

    }

    public void showSecondInterface() {
        System.out.println("In class Sub Class implementing Second Interface...");

    }

    public void showThirdinterface() {

        System.out.println("In class Sub Class implementing Third Interface...");
    }
}

class ReflectionTest {

    public static void main(String[] args) {
        Class class1 = SubClass.class;
        int modifier = class1.getModifiers();
        Class superClass = class1.getSuperclass();
        Class[] interfaces = class1.getInterfaces();
        Constructor[] constructor = class1.getConstructors();
        Method[] method = class1.getMethods();
        Field[] field = class1.getFields();
        System.out.println("Fully Qualified Class Name..." + class1.getName());
        System.out.println("Class Name..." + class1.getSimpleName());
        System.out.println("Class Modifier...." + Modifier.isPublic(modifier));
        System.out.println("Class Super Class....." + superClass.getName());
        System.out.println("Following are the interfaces.....");
        for (int i = 0; i < interfaces.length; i++) {
            System.out.println(interfaces[i].getName());
        }
        System.out.println("Following are the Constructor.....");
        for (int i = 0; i < constructor.length; i++) {
            System.out.println(constructor[i].getName());
        }
        System.out.println("Following are the Fields.....");
        for (int i = 0; i < field.length; i++) {
            System.out.println(field[i].getName());
        }
        System.out.println("Following are the Methods.....");
        for (int i = 0; i < method.length; i++) {
            System.out.println(method[i].getName());
        }
        for (Method method1 : method) {
            System.out.println(method1.getName());
        }
    }
} 
```

我试图调试应用程序，但没有使用它不进入 for 循环本身。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T08:56:24.883

从[`getConstructors()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructors%28%29)[强调我的]的文档中：

> 返回一个包含对象的数组，这些对象反映了此对象表示的类的`Constructor`所有**公共**构造函数。`Class`

您的类没有任何公共构造函数。这两个构造函数是包私有的：

```
public class SubClass ... {
    SubClass() {}
    SubClass(int a, int b, int c) {} 
```

# c# - Pivot/Panorama Wp8 上的标题标题

> ID：15172621
> 
> 赞同：2
> 
> 时间：2013-03-02T08:55:24.650
> 
> 标签：c#, windows, windows-phone-8

![推特示例](../Images/ddd162969321258279dd16f0bded26e2.png)

我如何在标题标题旁边获取图标。示例是上面 WP8 上的 twitter 应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:18:30.127

创建自定义[`HeaderTemplate`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.pivot.headertemplate%28v=vs.105%29.aspx)，它将显示一个图标而不是标题文本：

```
<controls:Pivot Title="Altered Styles">
    <controls:Pivot.HeaderTemplate>  
        <!-- This changes to look of the items headers -->
        <DataTemplate>
            <!-- show image here -->
        </DataTemplate>
    </controls:Pivot.HeaderTemplate>
</controls:Pivot> 
```

你也可以通过控制来做到这一点`Panorama`。

# jquery - Codeigniter 和 Jquery Mobile 提交表单的正确方法

> ID：15172624
> 
> 赞同：1
> 
> 时间：2013-03-02T08:55:46.130
> 
> 标签：jquery, forms, codeigniter, mobile

我正在使用 jquery mobile 和 codeigniter 创建一个网站。我仍然是一个 jquery 移动新手，并且在提交表单时遇到了困难。我有一个如下表格：

```
<form action="<?=base_url().index_page()?>main/register" method="post">
    <div data-role="fieldcontain">
        <label for="txtEmail" id="labelEmail">Email:</label>
        <input type="text" name="txtEmail" id="txtEmail" value="" data-mini="true" />
    </div>
    <div data-role="fieldcontain" style="text-align: center;">
        <input type="submit" name="btnRegister" value="Register Now" />
    </div>
</form> 
```

问题是，我没有在 main.php 中注册函数，而是出现了一个错误框，上面写着“加载页面错误”。无论如何提交此表格的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T09:14:53.370

不确定问题是否已解决，但尝试将以下属性添加到您的表单元素

```
data-ajax="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:50:01.873

我隐约记得遇到过类似的问题。我认为这是因为提交表单时它会尝试进行 AJAX 调用。尝试将其添加到页面中，看看它是否有效。

```
<script type="text/javascript">
    $(document).bind('mobileinit', function ()
    {
        $.mobile.ajaxEnabled = false;
    });
</script> 
```

# android - 我可以在不点亮屏幕的情况下唤醒手机并运行活动吗？

> ID：15172626
> 
> 赞同：0
> 
> 时间：2013-03-02T08:56:00.870
> 
> 标签：android, android-activity

如果我使用 BroadcastReceiver 触发 Activity 并唤醒手机，该 Activity 是否可以在不点亮屏幕的情况下完成其工作？我无法使用服务，因为在我的应用程序中有一些仅在活动中支持的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:01:16.660

这是不可能的。活动被暂停或停止，这意味着它不能运行任何东西。您想使用哪些功能？也许它是另一种方式。

# c# - 如何使用带有序列号和电子邮件验证的 C# 创建 Windows 安装程序文件

> ID：15172629
> 
> 赞同：1
> 
> 时间：2013-03-02T08:56:15.107
> 
> 标签：c#, .net, installation

我想使用 c#.net 创建一个 msi 文件。应用程序是这样的

当安装自定义框的应用程序将出现显示序列号和电子邮件地址时。这些值通过数据库进行检查。如果电子邮件地址和序列号匹配，则安装开始。

请帮忙....

# ajax - AjaxForm使用后如何更改表单的提交值

> ID：15172632
> 
> 赞同：0
> 
> 时间：2013-03-02T08:56:44.713
> 
> 标签：ajax, jquery, ajaxform

我正在使用 AjaxForm 扩展来提交带有 ajax 的表单，如下所示

```
var options = 
        {
            url:'<?php echo site_url('user/ajaximage')?>',
            dataType: 'json',
            success:   function(data)
            {
                if(data.messagecode==1)
                {
                    $(".wrap label").hide();
                    $("#preview").html("<img src='"+data.content+"'class='preview'>");
                    $("#errormessagepic").hide();
                }
                else if(data.messagecode==0)
                {
                    $("#errormessagepic").html(data.content);
                    $("#preview").html('<img width="100" height="100" src="<?php echo base_url();?>/images/avatar_generic.png" />');        
                }
                //$('#SignupForm').resetForm();
                //$("#SignupForm").attr('action','<?php echo site_url('user/individualprofile')?>');
            } ,
        }; 
        $("#SignupForm").ajaxForm(options);
        $("#SignupForm").submit(); 
```

但是在这个 ajax 提交之后，我想将表单重新发送到“”以外的另一个 URL，但它不起作用。任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:36:59.640

好的，所以您想使用 ajax 将表单发布到两个不同的 url。我不知道你的扩展，但我可以告诉你如何做到这一点。

1-创建一个函数并在用户点击提交时运行这个函数 <-input type="button" name="submit" value="Submit" onclick="post_form()"-/>

2- 创建函数体，该函数会将数据提交到两个url

```
 function post_form(){

    // save the values in text boxes in variable

    var val1=$("#text1").val();
    var val2=$("#text2").val();

    var data={name:val1,age:val2};

    var url1="savedata.php";
    var url2="updatedata.php";

    $.post(url1,data, function(response){ 

    alert(response);

    // so when the form is submited to ur1 this callback function runs and here you can submit it to another url

    $.post(url1,data,function(response){alert(response)});

    });

    }

</script> 
```

# android - 创建比默认值小的 SeekBar？

> ID：15172633
> 
> 赞同：1
> 
> 时间：2013-03-02T08:56:50.167
> 
> 标签：android, height, seekbar

在我的应用程序中，我有一个非常繁忙的布局，我必须添加一些`SeekBars`。所以我需要减少搜索栏。我`height`在 Google 和 stackoverflow 中的其他问题中搜索，但我找不到任何解决方案，除了使用`android:padding = "0dp"`，但这还不够。我在我的布局中使用它：

```
<SeekBar
                android:id="@+id/seekbar"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:padding="0dp"
                android:minHeight="0dip"
                android:maxHeight="2dip" /> 
```

您可以看到我使用了`maxHeight`and `minHeight`，但似乎受布局管理器的影响。如何检索较小的 SeekBar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:59:24.877

您可以使用这两个属性来制作您想要的搜索栏

```
 android:progressDrawable="@android:color/transparent"
 android:thumb="@drawable/ic_launcher" 
```

并为这两个属性使用小图像。

# c# - 使用signleR时如何获取连接的用户ID

> ID：15172634
> 
> 赞同：0
> 
> 时间：2013-03-02T08:56:51.560
> 
> 标签：c#, javascript

我正在尝试在我的 signleR 应用程序中获取连接的用户 ID，但我没有设法找到它。有什么办法可以得到它，因为我希望当两个用户聊天时，只有他们两个会收到彼此的消息，而不是他们连接到的整个组，或者连接到 signleR 集线器的所有客户端。我的主要目标是在两个连接的客户端之间发送私人消息。

我的代码非常复杂，但我发现的只是如何将我的消息广播给所有客户或特定组，但我无法发送私人消息。我这样做是为了发送用户输入消息：

```
public void UserTyping(string msg, int ToClient) { // display User is Typing Msg
  Clients.Others.OtherUserIsTyping(msg, ToClient);
} 
```

客户端：

```
var keyPressCount = 0;

$("#<%=MsgToSend.ClientID %>").keypress(function () {

  // Throttle the server call with some logic
  // Don't want to call the server on every keypress

  var ToClientID = $("#ToClientID").val();
  if (keyPressCount++ % 10 == 0) {
    chat.server.userTyping("Is typing...", ToClientID); // call the server side function
  }
});

chat.client.OtherUserIsTyping = function (msg, ToClient) { // declare the function on the chat hub so the server can invoke it
  $("#UserTyping").html(msg);
} 
```

# php - PHP从获取数组中添加引用到数组

> ID：15172640
> 
> 赞同：0
> 
> 时间：2013-03-02T08:58:05.687
> 
> 标签：php, arrays, fetch

我从代码中的变量 $query 中得到错误：“'where 子句'中的未知列 'Array'”。

这是我的代码：

```
$zzz = mysql_query("SELECT alias FROM table WHERE ColumnA = 'yes'");
while($aaa = mysql_fetch_array($zzz)){
    $array[] = $aaa['alias'];
}
$query = mysql_query("SELECT * FROM table2 WHERE alias NOT IN ($array) ORDER BY Column1 DESC, Column2 DESC"); 
```

我想在 table2 中进行 SELECT 查询 WHERE 'alias' 不等于 $array 中来自提取数组 $aaa 的任何数据。

我得到了一个线索，可以从 fetch 数组中创建一个数组： [SQL Query 中的数组？](https://stackoverflow.com/questions/5295714/array-in-sql-query)

但是，我不知道如何为由 $aaa 制作的数组中的每个数据添加“报价”。

谁能告诉我该怎么做？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:04:33.833

为什么不使用嵌套查询？例子：

```
$query = mysql_query("SELECT * FROM table2 WHERE alias NOT IN (SELECT alias FROM table WHERE ColumnA = 'yes') ORDER BY Column1 DESC, Column2 DESC"); 
```

但是，正如我在下面的评论中所指出的，您的交互似乎容易受到注入攻击。正如其他人所说，这可以在某种程度上避免，但正如我也说过的，更好的方法之一是使用 PDO。例子：

```
try {
    $dbh = new PDO("mysql:host=localhost;dbname=dbname", "user", "password");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $dbh->prepare("SELECT * FROM table2 WHERE alias NOT IN (SELECT alias FROM table WHERE ColumnA = :bool) ORDER BY Column1 DESC, Column2 DESC");
    $stmt->bindValue(":bool","yes");
    $stmt->execute();
} catch (\PDOException $e) {
    // Something went wrong
}

while ($row = $stmt->fetch()) {
    // do stuff with query
} 
```

PDO 附带 php 5.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:02:27.177

您正在尝试`$array`直接使用，它不会按照您需要的方式自行打印。按照链接问题中的建议，您可以使用`implode`：

```
$newarray = implode(", ", $array);
$query = mysql_query("SELECT * FROM table2 WHERE alias NOT IN ($newarray) ORDER BY Column1 DESC, Column2 DESC"); 
```

至于添加引号，您可以将它们连接在一起。但是，我也会在引用之前[转义](http://www.php.net/manual/en/mysqli.real-escape-string.php)这些值，以避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞：

```
while($aaa = mysql_fetch_array($ambilLarikAkunTerlindungi)){
    $array[] = "'" . mysqli_real_escape_string($aaa['alias']) . "'";
} 
```

# php - php 外部 js 仅适用于登录用户

> ID：15172641
> 
> 赞同：0
> 
> 时间：2013-03-02T08:58:12.807
> 
> 标签：php, javascript, security, external

我有一个 php 文件，它检查用户是否通过会话登录。

```
@session_start(); 
(@$_SESSION['loggedIn'] ? '' : die('')); 
```

如果是这样输出很多 JS 和 HTML。为了保持概述，我想排除文件中的所有 JS。我的问题是，JS 将 AJAX 发送到查询数据库内容的 PHP 文件。出于安全原因，我希望只有登录用户才能访问此 JS。如果我只是将它放入 .js 文件并链接到它，情况就不会如此。

我现在的解决方法是将所有 JS 代码放在一个 php 文件中，并在开头进行 Session 检查，然后是 JS 代码。

```
<?php
@session_start(); 
(@$_SESSION['loggedIn'] ? '' : die(''));
?>

<script type="text/javascript">

        jQuery(document).ready(function () {

    //Start configuration
        jQuery("#menu").tabify();
    ... 
```

然后包括这个

```
<?php include_once('js/script.func.php');  ?> 
```

这是你会做的方式，还是有更好的解决方案？（意味着防止打开安全漏洞或错误。）

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:33:40.103

是的，没关系。但是您可能想在服务器端验证用户是否也已登录（JS 发送请求的地方）。

# c# - XAML 中的资源转换

> ID：15172644
> 
> 赞同：1
> 
> 时间：2013-03-02T08:58:46.440
> 
> 标签：c#, wpf, xaml, resourcedictionary

我正在寻找一种`SolidColorBrush`在 XAML 中修改颜色（'s）的方法。我已经使用 CSS / less 有一段时间了（[less@github](https://github.com/cloudhead/less.js)），并且喜欢它允许我将一种颜色保存为 RGB 并说`darken(@color1, 15%)`获得相同的颜色，但更暗的方式。

有没有办法在 XAML / C#.Net 中应用此类转换器？类似（伪xaml）的东西：

```
<SolidColorBrush x:Key="darkRed" 
                 Color="{StaticResource Red, Converter=Darken}" /> 
```

**编辑：** sa_ddam 的回答几乎就是我所需要的。但是 - 在`ResourceDictionary`.

sa_ddam 的代码有效 - 但以下代码无效：

```
<Window.Resources>

    <cnv:DarkenColorConverter x:Key="Darken" />

    <SolidColorBrush x:Key="blue"
                     Color="Blue" />

    <SolidColorBrush x:Key="darkblue"
                     Color="{Binding Source={StaticResource blue}, Converter={StaticResource Darken}}" />

</Window.Resources> 
```

**编辑：** 发现我的错误-转换器的返回类型必须是`Color`，而不是`SolidColorBrush`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:50:34.800

您可以创建一个`IValueConverter`使颜色更深

像这样的东西应该可以解决问题

```
public class DarkenColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        double percentage = 0.8; // Default 
        if (value is SolidColorBrush)
        {
            if (parameter != null)
            {
                double.TryParse(parameter.ToString(), out percentage);
            }
            Color color = (value as SolidColorBrush).Color;
            return new SolidColorBrush(Color.FromRgb((byte)(color.R * percentage), (byte)(color.G * percentage), (byte)(color.B * percentage)));
        }
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

这是一个使用示例

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication13"
        Title="MainWindow" x:Name="UI" Width="124" Height="336"
    >
    <Window.Resources>
        <!-- Converter -->
        <local:DarkenColorConverter x:Key="Darken" />

        <!-- Brush to manipulate -->
        <SolidColorBrush x:Key="red" Color="{Binding Source=Red}"  />
    </Window.Resources>

    <StackPanel>
        <!-- Original color -->
        <Rectangle Fill="{StaticResource red}" Width="100" Height="100" />

         <!-- Darken with Converter -->
        <Rectangle Fill="{Binding Source={StaticResource red}, Converter={StaticResource Darken}}" Width="100" Height="100"/>

        <!-- Using ConverterParameter to select how dark (0.0 - 1.0) -->
        <Rectangle Fill="{Binding Source={StaticResource red}, Converter={StaticResource Darken}, ConverterParameter=0.5}" Width="100" Height="100"/>
    </StackPanel>
</Window> 
```

结果：

![在此处输入图像描述](../Images/5c4526a27006f8c6df133d7e1d5c1938.png)

# c# - AccessViolationException 从 C# 调用 Fortran

> ID：15172645
> 
> 赞同：0
> 
> 时间：2013-03-02T08:59:07.743
> 
> 标签：c#, fortran, pinvoke, marshalling, access-violation

我正在尝试包装 glmnet 库（[http://cran.r-project.org/web/packages/glmnet/index.html](http://cran.r-project.org/web/packages/glmnet/index.html)），以便我可以在 C# 中解决~~模型~~稀疏的一般线性模型。然而，原始函数有大约 20 个参数，所以我开始（对于 Fortran 来说是全新的）用一个很小的子例程来测试如何传递数据。不幸的是，我总是得到一个 AccessViolationException。

这是代码：

Fortran 子例程。我使用 Rtools 附带的 gfortran 编译器（[http://cran.r-project.org/bin/windows/Rtools/](http://cran.r-project.org/bin/windows/Rtools/)），使用 -m64 选项将它编译成 dll（是的，64 位是必需的，因为我处理得很好大块数据）。是的，使用 i 可能会导致越界......但这只是为了测试。

```
subroutine testaaa  (f,i,fa,ia)
real fa(i)                                                      
integer ia(i)
ia(1) = 1337
ia(i) = 666
fa(1) = 8.15
fa(i) = 333
end subroutine testaaa 
```

C# PInvoke 代码：

```
[DllImport("ftest.dll", EntryPoint = "testaaa_", CallingConvention = CallingConvention.StdCall)]
public static extern void Test(
    [MarshalAs(UnmanagedType.R4)] float f,
    [MarshalAs(UnmanagedType.I4)] int i,
    IntPtr fa,
    IntPtr ia); 
```

这就是它的名称：

```
var fa = new float[4];
var ia = new int[4];
IntPtr faPtr = Marshal.AllocHGlobal(fa.Length * sizeof(float));
Marshal.Copy(fa, 0, faPtr, fa.Length);

IntPtr iaPtr = Marshal.AllocHGlobal(ia.Length * sizeof(float));
Marshal.Copy(ia, 0, iaPtr, ia.Length);

GlmnetDllWrapper.Test(0.4f, 4,faPtr,iaPtr); 
```

我还尝试直接传递数组并赋予它们 [MarshalAs(UnmanagedType.LPArray)] 属性。没有什么对我有用。

你有什么建议从哪里开始或改变什么？

更新 1：即使只传递 float 和 int 已经导致异常：

```
subroutine testbbb  (f,i)
i = 815
f = 8.15
return
end subroutine testbbb 
```

C# Pinvoke 和 call 相应更改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:49:51.490

主要问题是您的 Fortran 库需要通过引用传递标量参数。所以你需要声明你的 p/invoke 来匹配。

数组参数可以非常简单地作为数组传递，p/invoke marshaller 将为您固定它们。

所以，你的 p/invoke 声明应该是这样的：

```
[DllImport("ftest.dll", EntryPoint = "testaaa_")]
public static extern void Test(
    ref float f,
    ref int i,
    [In, Out] float[] fa,
    [In, Out] int[] ia
); 
```

您可以调整`[In, Out]`属性以满足您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T09:31:56.127

请查看 [http://msdn.microsoft.com/en-en/library/chfa2zb8%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-en/library/chfa2zb8%28v=VS.80%29.aspx)（不安全代码）并使用您的项目设置 Project/Properties/Build:allow不安全的代码。但要注意后果。:)

更新：不要“玩弄”-我的意思是：“检查“不安全”的功能”。“不安全”并不意味着“危险”。

# blackberry - java.io.File 是否有可用的 jar 文件？

> ID：15172646
> 
> 赞同：1
> 
> 时间：2013-03-02T08:59:20.087
> 
> 标签：blackberry, java-me

我正在研究黑莓，我有一个`Jar`文件`jaudiotagger`，但在黑莓中`java.io.File`不可用。有没有`Jar`可用的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:04:48.267

通常`java.io.File`的 Java API 不适用于 BB。

请参阅 BB API 文档以了解[`javax.microedition.io.Connector`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/io/Connector.html)和[`javax.microedition.io.file.FileConnection`](http://www.developer.nokia.com/document/Java_Developers_Library_v2/GUID-D69FC49D-783E-45CE-80D4-7A9F3EE08B2A/javax/microedition/io/file/FileConnection.html)。

您将需要执行以下操作：

```
FileConnection fconn = (FileConnection) Connector.open("file:///CFCard/newfile.txt");

// If no exception is thrown, then the URI is valid, but the file may or may not exist.
if (!fconn.exists()) fconn.create(); // create the file if it doesn't exist

OutputStream os = fconn.openOutputStream();

//...

fconn.close(); 
```

# android - 如何在 android 的 android 设备上从 USB 设备读取数据？

> ID：15172651
> 
> 赞同：4
> 
> 时间：2013-03-02T08:59:34.327
> 
> 标签：android, usb

我想设计一个 android 应用程序，它应该按照标准时间从连接到它的 USB 设备中读取数据。我可以吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T09:04:16.847

您可以使用[USB HOST 或 ACCESSORY MODE](http://developer.android.com/guide/topics/connectivity/usb/index.html)与 USB 设备进行通信：

> **Android 通过USB 附件**和**USB 主机**两种模式支持多种 USB 外设和 Android USB 附件。
> 
> ![在此处输入图像描述](../Images/c343b9d238ce11b7c118d1097f39765b.png)
> 
> 在 USB 附件模式下，外部 USB 硬件充当 USB 主机。配件示例可能包括机器人控制器；坞站；诊断和音乐设备；售货亭；读卡器；以及更多。
> 
> 在 USB 主机模式下，Android 供电设备充当主机。设备示例包括数码相机、键盘、鼠标和游戏控制器。为广泛的应用程序和环境设计的 USB 设备仍然可以与可以与设备正确通信的 Android 应用程序进行交互。

就像通过此[链接](http://developer.android.com/guide/topics/connectivity/usb/host.html)与主机模式下的设备进行通信一样。

# cocos2d-iphone - 如何防止我的子节点与其父节点一起旋转？

> ID：15172653
> 
> 赞同：0
> 
> 时间：2013-03-02T09:00:24.500
> 
> 标签：cocos2d-iphone

既然 Cocos2d v2.0 不再有honorParentTransform，那我们应该用什么呢？

反向旋转不适用于粒子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:46:02.973

不要将其添加为子项，而是添加到同一个父项。然后在每次更新时同步位置。

PS：honorParentTransform 可能仍以不同的名称存在，请查看 API 参考以了解 CCNode 属性。

# assembly - 划分溢出 ASM

> ID：15172656
> 
> 赞同：1
> 
> 时间：2013-03-02T09:01:03.243
> 
> 标签：assembly, overflow, calculator, modulo, divide

我正在为学校做一个计算器项目，所有的东西都很好，但是 Divide 和 Mod(%) 给了我一个“Divide Overflow”错误，我该如何解决？

完整代码： http: [//pastebin.com/a9cuL0LJ](http://pastebin.com/a9cuL0LJ)

除法是第 158 行

Mod是第166行

Num1Int 和 Num2Int 都是 0-255 之间的数字

或者：

```
DivideDo:
push ax
mov ax , word ptr Num1Int
div Num2Int
mov ResultInt , al
pop ax
ret

ModDo:
push ax
mov ax , word ptr Num1Int
div Num2Int
mov ResultInt , ah
pop ax
ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:04:23.130

一个明显的问题是，while`Num1Int`是 8 位宽：

```
 Num1Int db ? 
```

您将其视为 16 位宽：

```
 mov ax , word ptr Num1Int 
```

# javascript - 我想在 JavaScript 中启用自动滑块和无限循环

> ID：15172659
> 
> 赞同：-2
> 
> 时间：2013-03-02T09:01:13.947
> 
> 标签：javascript, jquery, html, slider

```
<script type="text/javascript">
$(document).ready(function() {

var acch = 1;
$('.controls ul a').click(function() {
    var chno = $('.slider-container li').length;
    switch($(this).attr('data-gallery')){
        case 'slide-left': 
            if (acch < chno){
                acch++;
                startSlide(acch);
            }       
        break;
        case 'slide-right':
            if (acch <= 1){
                acch = 1;   
            }else{
                acch--;
                startSlide(acch);
            }
        break;  
    }
})

function startSlide(itemNo){
    var sTo = '#slider-item-' + itemNo;
    $('#home-top-content').scrollTo($(sTo), 300);   
}

$('.backToTop').click(function() {
     $('html, body').animate({scrollTop:0}, 'slow');
})

})
</script> 
```

这是上面列出的脚本，我需要启用自动滑动功能和无限循环 [http://aphex.fresh-pixel.com/](http://aphex.fresh-pixel.com/) 这是我正在使用的主题的链接，您可以在滑块中看到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:51:04.800

我认为这种实现更好，因为您可以在设计中添加任意数量的 sildes，而无需对代码进行任何修改。

```
<script type="text/javascript">
$(document).ready(function() {

    $('.controls ul a').click(function() {
        moveSliders($(this));
    })

    function startSlide(element){
        $('#home-top-content').scrollTo(element, 300);   
    }

    $('.backToTop').click(function() {
         $('html, body').animate({scrollTop:0}, 'slow');
    })

    setInterval(function(){
        moveSliders($('.controls ul').find('a.arrow-right'));
        },6000);

    function moveSliders(clickElement)
    {
        //Get li with class active if that count is zero put it as the first li
        var currentActive = $('.slider-container li.slide-active');
        var firstElement = $('.slider-container li:first');
        var lastElement = $('.slider-container li:last');
        if(currentActive.length == 0){
            firstElement.addClass('slide-active');
            currentActive = firstElement;
        }

        switch(clickElement.attr('data-gallery')){
            case 'slide-left': 
                //Next
                var nextElement = currentActive.next();
                if(nextElement.length == 0)nextElement = firstElement;
                $('.slider-container li.slide-active').removeClass('slide-active');
                nextElement.addClass('slide-active');
                startSlide(nextElement);
            break;
            case 'slide-right':
                //previous
                var previousElement = $('.slider-container li.slide-active').prev();
                if(previousElement.length == 0)previousElement = lastElement;
                $('.slider-container li.slide-active').removeClass('slide-active');
                previousElement.addClass('slide-active');
                startSlide(previousElement);
            break;  
        }
    }

})
</script> 
```

# iphone - 如果内容已经第一次加载，则在按钮单击时更改 UIViewController 而无需重新加载内容

> ID：15172663
> 
> 赞同：0
> 
> 时间：2013-03-02T09:01:41.370
> 
> 标签：iphone, xcode, ipad, uiviewcontroller

我正在创建一个 ipad 应用程序，上面有四个按钮。我必须在每个按钮上加载不同的`UIViewController`( `oneViewController`, `twoViewController`, `ThreeViewController`..) 在`UIView`Control 中单击。所有这些控制器都会显示来自网站的 RSS 提要。现在我的问题是每次单击按钮时，所有数据都是从第一次加载的。我只是想知道有什么方法可以第一次`UIViewController`加载数据，然后一次又一次地更改而不从 Rss 加载数据。我有下面的代码来改变`UIViewController`按钮点击。

`- (IBAction)clickbtnComment:(id)sender {
oneViewController *aViewController = [[oneViewController alloc] initWithNibName:@"oneViewController" bundle:nil]; [self.NewsScrollView addSubview:aViewController.view]; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:23:29.533

每次单击按钮时，您都会创建一个新的视图控制器。如果您第一次将新创建的视图控制器存储在一个属性中，并且在视图控制器已经存在的情况下只显示它，则您不需要再次加载提要。

# java - 对象的不同状态是什么？

> ID：15172664
> 
> 赞同：2
> 
> 时间：2013-03-02T09:01:43.913
> 
> 标签：java

最近我接受了一次采访，有人问我“物体的不同状态是什么？” 我无法理解这个问题，我要求面试官重复一遍。同样的问题是“对象的不同/不同阶段（以前是有问题的状态）是什么？” 仍然我不明白，面试官再次解释说“你知道对象的不同状态，比如***create***和 all”吗？

我的回答是，当我们创建对象时，它会进入堆内存，使用完成后它就有资格进行垃圾收集。面试官仍然对这个答案不满意。我再次被问到“对象的不同阶段是什么？”

请解释我对这个问题的解释。

当你回答这个问题时，还有一件事，尝试从***创建***开始并继续，因为面试官已经给出了对象的至少一个阶段/状态。如果不是，那么确切的答案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:06:10.480

我认为他所指的阶段如下：

```
 1\. Declaration: 
 2\. Instantiation
 3\. Initialization 
```

声明是您声明一个对象并为其分配一个引用变量的地方。

```
Object obj; 
```

实例化是您使用`new`创建对象的运算符的地方。

```
 Object obj = new object(); 
```

初始化发生在调用 Object 的构造函数调用时。

```
Object obj = new object(); 
```

# symfony - Symfony2 - 不要从像 ZF setNoRender 这样的控制器渲染视图

> ID：15172665
> 
> 赞同：0
> 
> 时间：2013-03-02T09:01:45.053
> 
> 标签：symfony

从 ZF1 到 Symfony2 的相对较新的转换。

我用谷歌搜索，似乎找不到答案。只是想知道是否有办法不从 Symfony2 中的控制器操作渲染视图。

在 ZF 控制器中，我可以使用：

```
$this->_helper->viewRenderer->setNoRender(true); 
```

Symfony2 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:37:05.833

在 Symfony 中，不会自动为您呈现任何内容。如果你需要渲染一些东西，你必须明确地去做。如果您不想渲染，就不要这样做:) 只需返回一个响应：

```
return new Response(); 
```

Symfony 控制器的唯一工作就是返回响应。渲染模板实际上也会创建一个响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T10:17:15.107

想发表我的意见：仅仅因为可以在模板中**渲染（ControllerMethod，{ params}）** 并不意味着您必须使用它。

这样做几乎总是会导致糟糕的架构，项目开始难以调试的转折点，因为您将 VIEW（表示层）与 CONTROLLER 混合在一起，这反过来又渲染了另一个 VIEW。你明白了。

然后，当您在 ControllerMethod 中遇到错误时，您会收到模板错误，不是很好吗？

我保证软件项目中有强大的架构。这种廉价的解决方案，比如使用这种商品，会导致糟糕的开始。我建议尽可能避免它，除非没有其他可能的方法。当然有！这就是使用 MVC 的原因。要将代码与表示层分离，请开始混合两者，您的架构将会泄漏。

# iphone - 我如何在 ios 中使用 NSXMLParser 解析这个 xml？

> ID：15172669
> 
> 赞同：7
> 
> 时间：2013-03-02T09:02:16.330
> 
> 标签：iphone, ios, nsxmlparser

```
<root>
    <table name="radios">
        <column name="nameradio">Radio1</column>
        <column name="logo">http://app.syndicationradio.fr/demo/logo1.png</column>
        <column name="stream">http://cloud2.syndicationradio.fr:8020</column>
        <column name="twitter">http://www.twitter.com/#syndicationradio</column>
        <column name="facebook">http://www.facebook.com/syndicationradio</column>
        <column name="titre">http://app.syndicationradio.fr/demo/title.xml</column>
    </table>
    <table name="radios">
        <column name="nameradio">Radio2</column>
        <column name="logo">http://app.syndicationradio.fr/demo/logo1.png</column>
        <column name="stream">http://cloud2.syndicationradio.fr:8020</column>
        <column name="twitter">http://www.twitter.com/#syndicationradio</column>
        <column name="facebook">http://www.facebook.com/syndicationradio</column>
        <column name="titre">http://app.syndicationradio.fr/demo/title.xml</column>
    </table>
</root> 
```

现在请有没有人帮忙找出来，我怎样才能从 xml 数据中获取这些 url 使用`NSXMLParser`或任何其他 xml 解析器假设`TBXML`在 IOS 中？

编辑：您还可以给我`libxml`这个 xml 的解析器示例。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-02T10:33:43.563

试试这个：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSURL *url = [[NSURL alloc] initWithString:@"yourURL"];
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    [parser setDelegate:self];
    BOOL result = [parser parse];
    // Do whatever with the result
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    NSLog(@"Did start element");
    if ([elementName isEqualToString:@"root"]) {
        NSLog(@"found rootElement");
        return;
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    NSLog(@"Did end element");
    if ([elementName isEqualToString:@"root"]) {
        NSLog(@"rootelement end");
    }           
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    NSString *tagName = @"column";
    if ([tagName isEqualToString:@"column"]) {
        NSLog(@"Value %@",string);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T10:19:14.743

好的，你问了一个`libxml`例子。我在一个项目中使用了它，但是用`TBXML`而不是`NSXMLParser`因为这个导致了编码和数据检索的重要问题。

首先，您必须从网上下载文件`TBXML.m`并将`TBXML.h`它们导入您的项目。然后，您还必须在**Link Binary with Libraries**`libxml2.dylib`中链接到您的项目。

 **完成此操作后，您必须执行此操作以检索数据（基于您的 XML 源）：

```
NSData *xmlData = [NSData dataWithContentsOfURL:yourURL];
TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];
[self getData:tbxml.rootXMLElement];

- (void) getData : (TBXMLElement *) element
{
    do {
        if([[TBXML elementName:element] isEqualToString:@"table"])
        {
            if([[TBXML elementName:element] isEqualToString:@"column"])
            { 
                if([[TBXML attributeName:element] isEqualToString:@"nameradio"])
                {
                    // You decide what to do here
                }
            }
        }
        if (element->firstChild) [self getData:element->firstChild];
    } while(element = element->nextSibling);
} 
```

您可能必须更改此代码，但在这里您拥有所需的所有基本内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T09:22:24.123

这是您可以使用 NSXMLParser 的方式：

在您的 .h 文件中声明：

```
NSMutableData       *webPortFolio;
NSMutableString     *soapResultsPortFolio;
NSURLConnection     *conn;

//---xml parsing---

NSXMLParser         *xmlParserPortFolio;
BOOL                elementFoundPortFolio;
NSMutableURLRequest *req;

NSString            *theXMLPortFolio;
NSString            *strSoapMsg;
UIAlertView         *alertView; 
```

在您的 .m 文件中使用以下代码：

```
-(void)callURL
{

     //Your logic to call URL.

     conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
     if (conn)
     {
         webPortFolio = [[NSMutableData data] retain];
     }
}
And to handle the response you can use following functions :

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webPortFolio setLength:0];     
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webPortFolio appendData:data];
}

-(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error
{

    NSLog(@"error...................%@",[error description]);
    [webPortFolio release];
    [connection release];
}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection
{

    //Check the request and returns the response.

    NSLog(@"DONE. Received Bytes: %d", [webPortFolio length]);

    theXMLPortFolio = [[NSString alloc] 
                      initWithBytes: [webPortFolio mutableBytes] 
                      length:[webPortFolio length] 
                      encoding:NSUTF8StringEncoding];

    //---shows the XML---

    NSLog(@"shows the XML %@",theXMLPortFolio);
    [theXMLPortFolio release];    

    if(xmlParserPortFolio)
    {
        [xmlParserPortFolio release];
    }
    xmlParserPortFolio = [[NSXMLParser alloc] initWithData: webPortFolio];
    [xmlParserPortFolio setDelegate: self];
    [xmlParserPortFolio setShouldResolveExternalEntities:YES];
    [xmlParserPortFolio parse];
    [webPortFolio release];
    [connection release];
}

//---when the start of an element is found---
-(void)  parser:(NSXMLParser *) parser 
didStartElement:(NSString *) elementName 
   namespaceURI:(NSString *) namespaceURI 
  qualifiedName:(NSString *) qName
     attributes:(NSDictionary *) attributeDict
{

    if( [elementName isEqualToString:@"your_tag_name"])
    {
        if (!soapResultsPortFolio)
        {
            soapResultsPortFolio = [[NSMutableString alloc] init];
        }
        elementFoundPortFolio = TRUE;
        NSLog(@"Registration...%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }

}

-(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
{
    if (elementFoundPortFolio)
    {
        [soapResultsPortFolio appendString: string];
    }      
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"Parser error %@ ",[parseError description]);
}

//---when the end of element is found---
-(void)parser:(NSXMLParser *)parser 
didEndElement:(NSString *)elementName 
 namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"your_tag_name"])
    {          
        NSLog(@"display the soap results%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {          
        //Perform required action
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        //Perform required action
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        //Perform required action
    }

    [soapResultsPortFolio setString:@""];
    elementFoundPortFolio = FALSE;
} 
```**

# android - 运行我的应用程序后奇怪的键盘布局

> ID：15172671
> 
> 赞同：1
> 
> 时间：2013-03-02T09:02:26.767
> 
> 标签：android, android-layout

目前我正在开发 android 应用程序使用相机、SurfaceView、GMaps、GPS 和全屏模式，但无法旋转。

令我惊讶的是，有时在启动我的应用程序后，我看到我的 HTC Desire 手机的 cifiral 键盘布局损坏。

这是一个屏幕：

![奇怪的](../Images/cf5e116531c5dcf3fd52986d8fd18029.png)

如果可以，这就是它的样子：

![在此处输入图像描述](../Images/81fe7bcf4e3694ecfcd6ed6118c81a47.png)

您能否解释一下这种奇怪的电话行为的原因是什么？

# git - git的工作顺序

> ID：15172673
> 
> 赞同：0
> 
> 时间：2013-03-02T09:02:45.023
> 
> 标签：git, repository

我想问一下 GIT 的正确工作顺序。首先我正在使用`git clone <url>`，接下来我在存储库上做我的工作，我的问题是关于“完成”。我正在做`git add <files>`，`git commit -m <comment>`我想把它推送到远程仓库。那么我应该首先做什么，`git pull`或者别的什么？首先`git pull`然后`git push?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:07:28.633

`git push`如果您上次收到远程提交后，您将无法做到这一点`git pull`。所以，是的，`git pull`在你之前`git push`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:05:08.220

与此同时，可能有人进行了更改并将其推送到存储库。在这种情况下，您可以将更改与您的合并。因此，首先从远程存储库中提取更改并合并，然后提交并推送合并的修订。

但是，如果没有其他人将新的更改推送到远程存储库（所有远程头在本地都是已知的），您应该能够只推送您的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:28:52.933

是的，您必须`git pull`或`git pull --rebase`之前可以`git push`。

一般来说，`git pull --rebase`应该是首选，因为它会创建线性历史。Naked`git pull`会自动创建合并提交，这往往会使大多数人感到困惑（这也被称为“菱形”历史）。如果不止一个人这样做，就很难分析到底发生了什么。

两者`git pull`或`git pull --rebase`都可以创建合并冲突，可以使用`git mergetool`.

# android - 如何在android中不使用imageview缩放图像？

> ID：15172678
> 
> 赞同：2
> 
> 时间：2013-03-02T09:03:28.370
> 
> 标签：android, zooming

我正在开发 android 中的客户端服务器应用程序，并希望缩放从客户端发送到服务器上的图像并取回缩放后的图像。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:09:12.183

如果您不想要 ImageView，可以使用 WebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T04:42:48.830

试试这个，如果你不想使用 imageview

使用 TouchImageView [https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)

```
<com.luminous.pick.TouchImageView
                android:id="@+id/img2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" /> 
```

我希望它会帮助你..

# vb6 - How to load a PDF file with browser control in VB6.0

> ID：15172684
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:04:25.780
> 
> 标签：vb6

I have a VB 6.0 application that has an web browser control to load PDF file. I get the "There is a problem with Adobe Acrobat/Reader. If it is running, please exit and try again.
Please any one help me to overcome the problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:53:18.380

I'm not 100% aware of your current web browser control (you don't say which web browser it regards). `webbrowswer1` is IE I guess?

If I was You I would have tried a really simple solution first (as mentioned in a link I provided you with) before digging too deep:

> **Issue**
> 
> When you try to view a PDF in Internet Explorer, you see the error message, "There is a problem With Adobe Acrobat/Reader. Please exit Adobe Acrobat/Reader and try again." When you click OK to the error, the PDF opens outside the browser.
> 
> **Solution**
> 
> Create a transform and redeploy Acrobat or Adobe Reader.
> 
> Start the Adobe Customization wizard 8 or the Adobe Customization wizard 9 depending on the software version you are installing. Open your previously created .mst file. Under Installation Options, select "Installer will decide which product will be the default." Save the transform. Redeploy Acrobat or Adobe Reader.

Source: [Error viewing PDF in browser](http://helpx.adobe.com/acrobat/kb/error-viewing-pdf-browser-acrobat.html)

# php - 如何通过 Window.open 在弹出窗口中显示图像

> ID：15172686
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:04:28.483
> 
> 标签：php, html, window.open

我正在尝试使用以下 javascript 在弹出窗口中显示图像

```
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes')
} 
```

在 Html 代码中，我使用 php 目录迭代器来查找 jpeg 图像并将其传递给 javascript。但是弹出窗口没有打开。

```
echo '<td width="150"><a href="JavaScript:newPopup('.$file_name.');">ScreenShot</a></td>'; 
```

我在这里做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T17:40:37.843

我认为您在`$filename`

```
echo '<td width="150"><a href="javascript:void(0);" onclick="newPopup(\''.$file_name.'\');">ScreenShot</a></td>'; 
```

[http://jsbin.com/aqurem/1/edit](http://jsbin.com/aqurem/1/edit)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T09:13:00.490

```
<script>
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes')
}
</script>
<a href="javascript:void(0);" onClick="newPopup('https://www.cs.washington.edu/education/courses/cse455/12au/projects/project1/students/chantalm/artifact/images/flowers.jpg');">ScreenShot</a> 
```

# gwt - 零剪贴板在 gwt 中不起作用

> ID：15172687
> 
> 赞同：0
> 
> 时间：2013-03-02T09:04:29.570
> 
> 标签：gwt, gxt, jsni, zeroclipboard

我一直在尝试将零剪贴板库与 gwt 代码集成如下。

**测试.html**

```
<script type="text/javascript" language="javascript" src="test/test.nocache.js"></script>
    <script type="text/javascript" src="ZeroClipboard.js"></script>
<script language="text/javascript">

     function initZeroClipboard() {
                   ZeroClipboard.setMoviePath('ZeroClipboard.swf');
       }

</script>

 .....................................
  //Intial body load instantiating 'Moviepath'

  <body onload="initZeroClipboard();"> 
```

**TestWidget.java**

```
Anchor copy = new Anchor("Copy");
......................
 //setting id to refer the movie
copy.getElement().setId("copyId");
glueCopy("Hello World");
 ...........
 //Native method
public static native void glueCopy(String text) /*-{
 var clip = new $wnd.ZeroClipboard.Client();
 clip.setText(text);
 clip.glue('copyId');
}-*/; 
```

**但是在初始加载本身时，我在 IE 和 FF 中收到以下错误。**

**码头服务器 IE 错误** ![在此处输入图像描述](../Images/9f597f527178d003969be7f8ca90df3a.png)

**码头服务器FF错误** ![在此处输入图像描述](../Images/6616c2a8853ea2dbb54e6db50d5038e8.png)

**[我从以下https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)**下载了“ZeroClipboard.swf”和“ZeroClipboard.js”文件

任何人都可以遇到这个问题，如果是这样，请建议我如何摆脱这个问题。

# linux - 使用 wget 获取谷歌翻译的结果

> ID：15172690
> 
> 赞同：2
> 
> 时间：2013-03-02T09:04:34.130
> 
> 标签：linux, bash, wget

大家。我想编写一个 bash 脚本来使用终端的谷歌翻译并将英文翻译成中文。我的计划是先用 wget 翻译英文，然后用 sed 得到结果。所以我用
`wget -qO- --header="Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" --header="Accept-Charset:GBK,utf-8;q=0.7,*;q=0.3" --header="Accept-Encoding:gzip,deflate,sdch" --header="Accept-Language:en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4" -U "Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.27 Safari/536.11" http://translate.google.cn/#en/zh-CN/hello | gunzip > out.html`.
我也刚试过`wget -U "Mozilla/5.0" http://translate.google.cn/#en/zh-CN/hello`。
他们的两个结果似乎都不是我想要的，因为我无法`你好`从结果中找到中文。
我有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T09:48:15.927

你做错的是你实际上只是从服务器请求[http://translate.google.cn/而不是](http://translate.google.cn/)[http://translate.google.cn/#en/zh-CN/hello](http://translate.google.cn/#en/zh-CN/hello)。这是因为[散列后的部分](http://en.wikipedia.org/wiki/Fragment_identifier)不会发送到服务器，只应该由浏览器使用。谷歌使用这部分使用 Javascript 提出翻译请求。

要获得翻译，您需要向该页面上的 Javascript 使用的 URL 发出请求。像这样的东西会起作用：

```
curl -A "Mozilla/5.0" 'http://translate.google.com/translate_a/t?client=t&text=hello&hl=en&sl=en&tl=zh-CN&ie=UTF-8&oe=UTF-8&multires=1&prev=btn&ssel=0&tsel=0&sc=1' 
```

前面的命令将打印以下结果：

```
[[["你好","hello","Nǐ hǎo",""]],[["interjection",["喂"],[["喂",["hello","hey"],,0.0087879393]]]],"en",,[["你好",[5],0,0,1000,0,1,0]],[["hello",4,,,""],["hello",5,[["你好",1000,0,0],["招呼",0,0,0],["打招呼",0,0,0],["个招呼",0,0,0],["喂",0,0,0]],[[0,5]],"hello"]],,,[["en"]],6] 
```

然后您可以使用 sed 获取结果，如下所示：

```
curl -A "Mozilla/5.0" 'http://translate.google.com/translate_a/t?client=t&text=hello&hl=en&sl=en&tl=zh-CN&ie=UTF-8&oe=UTF-8&multires=1&prev=btn&ssel=0&tsel=0&sc=1' | sed 's/\[\[\["\([^"]*\).*/\1/' 
```

但是，正如其他人所提到的，您不应该使用它来滥用翻译服务，并且对于任何超出实验或 CLI 坏事的事情，您应该（并且可能必须）使用[Google Translate API](https://developers.google.com/translate/)以避免给自己带来麻烦。Google 会监控使用情况，并且肯定会检测到任何滥用其服务的企图。

PS：本人不具备提供法律意见的资格，以上我所认为的“不滥用服务”是100%个人意见，请勿以此为最终决定权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:12:40.237

您无权提出这些要求。谷歌翻译服务有一个你必须付费的[API 。](https://developers.google.com/translate/)如果我尝试使用您的请求，`curl`我会得到以下内容：

```
<!-- Headers... -->
<ins>That’s an error.</ins>
<p>Your client does not have permission to get URL <code>/</code> from this server.
(Client IP address: xx.xxx.xx.xx)<br><br>

<ins>That’s all we know.</ins> 
```

# windows-runtime - 我什么时候应该在 C++/CX 中使用 ref 类？

> ID：15172701
> 
> 赞同：3
> 
> 时间：2013-03-02T09:05:28.230
> 
> 标签：windows-runtime, c++-cx

我正在为一个项目涉足 C++ 世界，在花费大量时间使用 C# 和 C++/CX 中的新东西之间，我有点生疏了。

什么时候适合使用`ref class`C++/CX 中引入的类型？

内置的引用计数句柄看起来不错，并且似乎是尽可能使用 ref 类的好理由（忽略可移植性问题）。但是，我不确定这些类型是否会增加任何额外的开销？或者是否有其他原因限制其使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T12:25:46.390

请记住，C++/CX 是一种语言扩展，可以轻松处理 WinRT 类型。当你想让你的类型被另一种语言使用时，你只需要声明你自己的*ref 类，比如 Javascript 或 C#。*换句话说，当您创建 WinRT 组件时。

对于其他应该是绝大多数代码的其他内容，请使用标准 C++11 语法和正常的主力 C++ 标准库类。声明一个不向其他语言公开的 ref 类只会产生不必要的开销。

# android - 为什么我的画布背景不是全屏（Android）？

> ID：15172703
> 
> 赞同：1
> 
> 时间：2013-03-02T09:05:42.473
> 
> 标签：android, android-layout, android-canvas, android-xml

我在我的活动中复制粘贴了教程 Rocketscissorpaper 的方法，但问题是当我运行我的代码时，画布背景不会全屏显示，我发现这两个项目之间没有区别，即使 xml 也是相同的。我错过了什么，这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/linearLayout"
>

  <FrameLayout

android:layout_width="match_parent"

android:layout_height="match_parent"

>

 <com.show.showhidebutton.Game
     android:id="@+id/surfaceView" 
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent"

     />

     </FrameLayout> 
```

```
and here is the manifest file:
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.show.showhidebutton"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="Show Hide Button"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Logo"></activity>
    <activity android:name=".Story"></activity>
    <activity android:name=".Survival"></activity>
    <activity android:name=".Store"></activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:26:30.830

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

> android:theme="@android:style/Theme.NoTitleBar.Fullscreen"

添加这段代码将使您的应用程序全屏显示，隐藏通知栏。

希望能帮助到你。

# jquery - 一个一个地加载 jQuery 函数

> ID：15172711
> 
> 赞同：0
> 
> 时间：2013-03-02T09:06:28.270
> 
> 标签：jquery

我有两个不同`function()`的，一个隐藏加载消息。

```
function functionOne(){
   $.get(baseURL + 'xml/', function(one) {
      ...
   });
}

function functionTwo(){
   $.get(baseURL + 'xml/', function(one) {
      ...
   });
}

function hideLoading(){
   $('#loading').fadeOut('slow', function() {
      $('#loading').hide();
   });  
} 
```

现在，我要做的是一一加载它们。所以我想`functionTwo`在`functionOne`加载和加载`hideLoading`之后调用`functionTwo`。这段代码不起作用，因为它隐藏了之前的加载消息`functionOne`并被`functionTwo`加载：

```
$('.featuredImage').live('click', function()  {
   functionOne();
   functionTwo();
   hideLoading();
}); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:10:32.350

将下一个函数添加到回调的末尾

```
function functionOne(){
   $.get(baseURL + 'xml/', function(one) {
      ...
     functionTwo();
   });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:11:36.037

那是因为 Ajax 是*异步*的，你应该在 Ajax 的回调函数中调用这些函数。另请注意，`live`不推荐使用方法，您可以改用`on`方法。

```
$(document).on('click', '.featuredImage', functionOne);

function functionOne(){
   $.get(baseURL + 'xml/', function(one) {
      functionTwo();
   });
}

function functionTwo(){
   $.get(baseURL + 'xml/', function(one) {
      hideLoading();
   });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T10:39:05.297

`$.get()`返回一个符合 Promise 的 jqXHR 对象。

`functionOne()`从和返回 jqXHR`functionTwo()`将允许您形成一个`.then()`链，如下所示：

```
function functionOne(){
   return $.get(baseURL + 'xml/');//returns a jqXHR object
}

function functionTwo(){
   return $.get(baseURL + 'xml/');//returns a jqXHR object
}

function hideLoading() {
   $('#loading').fadeOut('slow');  
}

$(document).on('click', '.featuredImage', function() {
   functionOne().then(functionTwo).then(hideLoading);
}); 
```

这样做可以避免对接下来会发生什么的假设`functionOne()`。`functionTwo()`所有的排序逻辑都在调用函数中。

回调可以重新插入到`$.get()`表达式中。如果它们不会导致抛出未捕获的错误，它们将不会抑制序列。

# css - 如何让 div 适应动态屏幕分辨率？

> ID：15172713
> 
> 赞同：1
> 
> 时间：2013-03-02T09:06:50.987
> 
> 标签：css, width, screen, resolution

我需要 3 个 div，其中 1 个设置为 1000px 的宽度并位于页面中间，另外 2 个应该从主 div 的左右填充屏幕宽度。我希望这适用于所有屏幕分辨率，但我找不到方法。

到目前为止我的代码（我使用颜色作为视觉辅助）-

CSS：

```
#leftside { background: red; float: left; width: 100%; position: relative; width: 100%; }
#rightside { background: blue; float: left; width: 100%; position: relative; }
#container { background: yellow; float: left; width: 1000px; position: relative; } 
```

html:

```
<html>
<body>
<div id="leftside">&nbsp;</div>
<div id="container">the content</div>
<div id="rightside">&nbsp;</div>
... 
```

到目前为止，它不起作用。如何使“左侧”和“右侧” div 自动调整为屏幕分辨率中剩余的内容 - 对于任何屏幕分辨率？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:53:12.660

您可以通过使用 css 来实现

```
 #maindiv{

    width:1000px;
    }

    #rightdiv, #leftdiv{ 

    width:calc((100%-1000)/2);
    }
    #rightdiv{

    //other styles
    }
    #leftdiv{

    //other styles
    } 
```

测试浏览器对[calc()的支持](http://caniuse.com/calc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:19:39.163

您必须注入一些 javascript 代码：

```
$content = $('.content');
$sidebar = ($(window).width() - $content.width()) / 2;
$('.leftside').css('width', $sidebar);
$('.rightside').css('width', $sidebar); 
```

[看演示](http://jsfiddle.net/CwjxF/1/)

然后在屏幕变小时使用[媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)来改变中间的宽度。`div`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:09:49.137

一种方法是将 div 放在一个包含一行和 3 个单元格的表格中。表格的宽度为 100%，您可以设置中心 td 的宽度。

我相信有人会在 CSS 中提出更好的方法。

# android - Android中使用翻译的文本动画

> ID：15172714
> 
> 赞同：1
> 
> 时间：2013-03-02T09:07:09.167
> 
> 标签：android, textview, translate-animation

我想在android中为textview的文本设置动画，我有一个textview，其中的文本超过了textview的宽度。我正在水平使用翻译动画。它正在为整个文本视图控件设置动画。在文本视图中使用 marquee 属性为我完成了这项工作，但与我想要实现的目标相比，它的速度很慢。我需要知道有什么方法可以平滑地为 textview 的文本（不是整个控件）设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:47:03.603

我认为您的意思是，当 TextView 的文本过多时，您需要一个文本“选框”。如果是这种情况，请尝试以下链接：

[安卓字幕](https://stackoverflow.com/questions/4344349/android-marquee)

[文本视图选取框不起作用](https://stackoverflow.com/questions/3332924/textview-marquee-not-working)

# android - 如何在前台和后台进程之间同步对 sqlite db 的访问？

> ID：15172715
> 
> 赞同：4
> 
> 时间：2013-03-02T09:07:12.750
> 
> 标签：android, database, sqlite, synchronization

我有一个在后台运行的服务，它可以访问（读取和写入）sqlite 数据库。相应的前台进程（主应用程序）也可以访问（读取和写入）我的 android 应用程序中的 sqlite 数据库。

如何防止与尝试同时访问/保存/读取sqlite db相关的问题，正确的方法应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T11:21:55.510

有两种简单的方法可以做到这一点，第一种是 ChirstopheCVB 所写的： 创建一个同步方法。一个同步方法只能被一个线程访问，其他线程被阻塞。

这是推荐的方法，因为它将所有与数据库访问相关的代码保存在一个地方。当您更改数据库的表布局时，您无需搜索所有代码并进行调整。您从主线程中“隐藏”详细信息。

如果要将数据库代码保留在主线程中，请使用信号量。在 Java 中有对此的支持：http: [//developer.android.com/reference/java/util/concurrent/Semaphore.html](http://developer.android.com/reference/java/util/concurrent/Semaphore.html)

信号量是（简化的）单个对象，指示是否有人正在访问共享资源（例如您的数据库）。在访问数据库之前，请检查您是否被允许，如果允许，则设置对象以阻止其他对象。做你的事情并重置对象，以便其他人可以尝试访问该资源。

一个简单的例子，假设你有线程 A 和线程 B，以及一个全局变量可以使用。

```
Init: canUse = true;

Thread A:
while (!canUse) wait;   // busy waiting, your thread is blocked
canUse = false;         // canUse was true, now we grab access.
do our thing;
canUse = true;          // Others are allowed to use the resource again. 
```

线程 B 看起来一样。

这可行，但有两个问题。首先，您正在阻塞线程，因为您正在等待资源可用。这是有风险的，因为它可能永远不会变得可用并且你会陷入僵局。

第二个问题更严重。假设您有 3 个线程：A、B 和 C。C 已获取锁，并且 A 和 B 都在等待。以下是可能的

```
A: while (!canUse) wait;
B: while (!canUse) wait;
C: canUse = true;
A: Hooray, we can grab the resource
B: Hooray, we can grab the resource
A: canUse = false;
B: canUse = false; 
```

上面的示例显示了检查变量并以原子方式进行更改的重要性。换句话说，没有其他事情会发生。

Fortunately, java provides you with semaphores. It is not easy to understand in the beginning, but a must to understand if you want to do what you are asking for without using synchronized methods (such methods act as semaphores for you without extra coding effort).

# php - 文体搜索

> ID：15172716
> 
> 赞同：7
> 
> 时间：2013-03-02T09:07:12.983
> 
> 标签：php, mysql, levenshtein-distance

我在一个网站上工作，该网站销售让我们说的*东西*并提供“供应商搜索”。在此搜索中，您输入您的城市、邮政编码、地区和距离（以公里或英里为单位），然后该网站会为您提供供应商列表。

为此，我有一个供应商数据库。在保存这些供应商的表格中，您输入他们的完整地址，当您单击保存按钮时，会向谷歌地图发出请求以获取他们的纬度和经度。

当有人进行搜索时，我会查看存储所有搜索词及其 lat/lng 的表格。这张桌子看起来像

```
+--------+-------+------+
| term   | lat   | lng  |
+--------+-------+------+ 
```

所以第一个查询很简单

```
select lat, lng from my_search_table where term = "the term" 
```

如果我找到结果，然后我会用一种很好的方法搜索访问者想要的范围内的所有供应商，并将结果打印在地图上。

如果我没有找到结果，我会使用 levenshtein 函数进行搜索，因为人们写 bruxelle 或 bruxeles 而不是 bruxelles 很常见，我不想一直请求谷歌地图（我也有一个“在我的表中搜索了多少次”列以获取一些统计信息）

所以我请求没有 where 子句的 my_search_time 并遍历所有结果以获得最小的 levensthein 距离。如果最小的结果大于 2，我从谷歌地图请求坐标。

这是我的问题。对于某些国家/地区（我们在世界各地有多个站点），my_search_table 有 15-20k+ 个条目......并且 php（真的）不喜欢循环使用这些数据（我完全理解）并且我的请求属于 php 超时. 我可以增加这个超时时间，但几个月后问题会一样。

所以我尝试了一个 levensthein MySQL 函数（在[stackoverflow](https://stackoverflow.com/questions/12617348/mysql-levenshtein "堆栈溢出")上找到），但它也很慢。

所以我的问题是“即使在非常大的数据集上，有没有办法让这个搜索快速？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T09:12:15.477

我的建议基于三点：

*   首先，您的数据集*很大*。这意味着 - 它：*大到足以*拒绝“全选”+“[`levenshtein()`](http://php.net/levenshtein)在 PHP 应用程序中运行”的想法
*   其次，您可以控制您的数据库。所以你可以调整一些架构相关的东西
*   最后，`SELECT`查询的性能是最重要的，而添加新数据的性能**并不重要**。

问题是**您不能**执行*快速*的 levenshtein 搜索，因为*levenshtein 本身*非常慢。我的意思是，计算 levenshtein 距离是一件很慢的事情。因此，您将无法仅通过“智能搜索”解决问题。你必须准备一些数据。

可能的解决方案是：创建一些组索引并*在添加/更新*数据期间分配它。这意味着 - 您将存储额外的列，该列将存储一些哈希（例如数字）。添加新数据时，您将：

*   使用 levenshtein 距离执行搜索（因为您可以使用您的应用程序或您已经（已经提到）在表中的所有记录上针对插入数据的功能
*   将新行的组索引设置为上一步中找到的行所具有的索引值。
*   如果没有找到，设置一些新的组索引值（它是第一行并且还没有类似的行） - 这将不同于表中已经存在的任何组索引值

要搜索所需的行，您只需选择具有相同组索引值的行。这意味着：您的*选择*查询将非常快。但是 - 是的，这将在添加/更改数据时造成极其巨大的开销。因此，它不适用于更新/插入的性能很重要的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:17:37.450

你可以试试 MySQL 函数[**SOUNDS LIKE**](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#operator_sounds-like)

```
SELECT lat, lng FROM my_search_table WHERE term SOUNDS LIKE "the term" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:27:01.927

您可以使用 kd-tree 或三叉树来加快搜索速度。这个想法是使用二进制搜索。

# c# - C# 错误：运算符 '!=' 不能应用于 'char' 和 'string' 类型的操作数

> ID：15172723
> 
> 赞同：2
> 
> 时间：2013-03-02T09:07:46.757
> 
> 标签：c#, string, char, operators

今天，按照一本书的教程（字面意思），我遇到了一个意想不到的错误：

```
operator '!=' cannot be applied to operands of type 'char' and 'string' 
```

在这部分代码中：

```
public void displayFullName()
{
    StringBuilder FullName = new StringBuilder();

    FullName.Append(firstName);
    FullName.Append(" ");
    if (middleName[0] != "") //ERROR occurs here
    {
        FullName.Append(middleName[0]);
        FullName.Append(". ");
    }
    FullName.Append(lastName);

    Console.WriteLine(FullName);
} 
```

当然 middleName 被声明为：

```
 class Person
{
    private string firstName;
    private string middleName; //obiously declared as string
    private string lastName;
    private int age;
(...the rest of code...) 
```

那么，问题是您将如何解决此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T09:10:36.253

> 那么，问题是您将如何解决此错误？

这取决于您要达到的目标。让我们看看有问题的行：

```
if (middleName[0] != "") 
```

你真的想在这里确定什么？询问`middleName`（`middleName[0]`返回的内容）的第一个字符是否是空字符串是没有意义的。如果您一直在检查它是否等于“X”（或其他单字符串），那么我可能认为您想要`if (middleName.StartsWith(...))`.

但是，如果您*实际上*只是想找出是否`middleName`不为空，则可以使用：

```
if (middleName != "") 
```

或者如果`middleName`也可以为 null 并且您想要检测它，您可能想要：

```
if (!string.IsNullOrEmpty(middleName)) 
```

事实上，如果`middleName`是空的，那么`middleName[0]`会抛出一个`IndexOutOfRangeException`.

作为一个附带问题 - 除非这真的是一次性的，否则它建议你应该找一本不同的书。虽然错误可能会漏掉，但你真的，真的应该能够期望书中的代码能够编译（除非它试图证明失败）。您可能想要编辑您的问题以命名和羞辱有问题的书:)（它在 C# 中使用方法名称`displayFullName`和变量名称的事实`FullName`也有点诅咒。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:10:41.747

虽然`middleName`是`string`，`middleName[0]`但不是：它是 的单个字符`middleName`，它的初始字符。您不能将其与空字符串进行比较，但可以比较整个中间名，如下所示：

```
if (middleName != "") 
```

查看字符串是否为空的更好方法是使用for 它的[`IsNullOrEmpty`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)方法：`System.String`

```
if (!string.IsNullOrEmpty(middleName)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:10:53.607

使用 middleName[0] 您将获得该字符串的第一个字符，因此是一个字符。

如果要比较字符串的第一个字符，请使用：

```
middleName[0] != '' 
```

如果要比较完整的字符串，则：

```
middleName != "" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T09:11:16.540

代码应该是这样的：

```
if (middleName[0] != ' ')
{
    FullName.Append(middleName[0]);
    FullName.Append(". ");
} 
```

甚至更好（假设这是代码的目的）：

```
if (!String.IsNullOrWhiteSpace(middleName))
{
    FullName.Append(middleName[0]);
    FullName.Append(". ");
} 
```

问题是代码试图将 a`char`与 a进行比较`string`

`middleName[0]`是类型`char`

`""`是类型`string`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T09:12:11.063

middleName 被声明为字符串，这是真的。但是字符串由字符组成。您正在尝试访问字符串的第一个元素，即 char。所以只需将其更改为

```
middleName != "" 
```

或者

```
middleName[0] != 'a' 
```

如果您只想检查第一个字符

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-02T09:13:02.250

您正在尝试将一个字符（它总是一些东西，任何符号并且不能为空）与一个空字符串（不包含字符）进行比较。改用[String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)：

```
if(!String.IsNullOrEmpty(middleName[0])) 
```

如果你想检查你的 middleName 是否为空

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-02T09:30:52.883

看来是书上的代码错误，

无论如何，当我将其更改为：

```
if( middleName != "" ) 
```

代码完美无缺。

或者，为了额外检查 middleName 是否为 NULL（如果之前的程序逻辑跳过检查），解决方案可能是：

```
if (!string.IsNullOrEmpty(middleName)) 
```

# java - 如何写（如果，如果，如果） else if none

> ID：15172729
> 
> 赞同：0
> 
> 时间：2013-03-02T09:08:48.497
> 
> 标签：java, boolean, if-statement

我正在尝试制作一组`if`​​语句，其中每个语句都`if`将打印给定的某些参数为真，但`else`只打印`if`没有`if`返回任何 s 的语句。我认为`else if`在这种情况下不会起作用。

我有一些代码（颜色仅作为示例）：

```
boolean any=false;

if(redStage==2)
{ any=true; System.out.print(redComplete); }

if(blueStage==2)
{ any=true; System.out.print(blueComplete); }

if(greenStage==2)
{ any=true; System.out.print(greenComplete); }

if(any==false)
    System.out.print(noneComplete); 
```

我能做些什么来消除对单独的布尔值来检查 if 的任何论点是否为真的需要吗？

编辑：（我刚刚注意到可能令人困惑的地方。我使用的代码实际上并没有使用返回。相反，它打印出结果，这意味着可以返回不止一件事。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T09:10:04.920

由于您需要彼此独立地处理各个阶段，并且可以同时完成多个阶段，因此您的代码尽可能好。

*以下是我对您原始问题的回答：*

你不需要布尔值。您的代码相当于：

```
if (redStage   == 2) { return redComplete; }
if (blueStage  == 2) { return blueComplete; }
if (greenStage == 2) { return greenComplete; }
return noneComplete; 
```

这利用了每个`if`主体都包含一个无条件的事实`return`。如果不是这种情况，您可以像这样描述构造：

```
if (redStage == 2) {
   // redComplete
} else if (blueStage == 2) {
   // blueComplete
} else if (greenStage == 2) {
   // greenComplete
} else {
   // noneComplete
} 
```

# linux - 使用 wmcrtl 循环浏览同一应用程序的窗口

> ID：15172735
> 
> 赞同：6
> 
> 时间：2013-03-02T09:09:48.870
> 
> 标签：linux, focus, keyboard-shortcuts, console-application, window-managers

我正在配置 xbindkeys 以使用快捷方式更改窗口焦点。例如，我设法创建了一个专注于应用程序窗口的快捷方式，比如说一个终结器窗口：

```
wmctrl -xa terminator 
```

不幸的是，它总是聚焦在同一个终结器窗口，阻止我循环浏览终结器窗口。

你能建议我一个专注于终结者窗口的命令，如果再次按下，将循环浏览所有终结者窗口，好吗？

**2013 年 3 月 30 日更新**

我修改了这个脚本 [http://lars.st0ne.at/blog/switch%20between%20windows%20within%20the%20same%20application](http://lars.st0ne.at/blog/switch%20between%20windows%20within%20the%20same%20application) 来制作这样一个脚本

```
script.sh NAME 
```

关注应用程序 NAME 或循环浏览 NAME 的所有窗口，如果它的一个窗口已经获得焦点，但它不能正常工作。

这是脚本

```
win_class=$1 # 'terminator' # $1

# get list of all windows matching with the class above
win_list=$(wmctrl -x -l | grep -i $win_class | awk '{print $1}' )

# get id of the focused window
active_win_id=$(xprop -root | grep '^_NET_ACTIVE_W' | awk -F'# 0x' '{print $2}')

# get next window to focus on, removing id active
switch_to=$(echo $win_list | sed s/.*$active_win_id// | awk '{print $1}')

# if the current window is the last in the list ... take the first one
if [ "$switch_to" == '' ];then
   switch_to=$(echo $win_list | awk '{print $1}')
fi

# switch to window
wmctrl -i -a $switch_to 
```

该脚本确实专注于应用程序的一个窗口，并在它们之间循环，直到它到达一个窗口，我猜是最后创建的。到那时，骑自行车不再起作用了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T10:16:13.193

如果没有窗口有焦点，我在脚本中发现了一个问题。

您可以尝试以下修改后的脚本：

```
#!/bin/bash
win_class=$1 # 'terminator' # $1

# get list of all windows matching with the class above
win_list=$(wmctrl -x -l | grep -i $win_class | awk '{print $1}' )

# get id of the focused window
active_win_id=$(xprop -root | grep '^_NET_ACTIVE_W' | awk -F'# 0x' '{print $2}')
if [ "$active_win_id" == "0" ]; then
    active_win_id=""
fi

# get next window to focus on, removing id active
switch_to=$(echo $win_list | sed s/.*$active_win_id// | awk '{print $1}')

# if the current window is the last in the list ... take the first one
if [ "$switch_to" == '' ];then
   switch_to=$(echo $win_list | awk '{print $1}')
fi

# switch to window
wmctrl -i -a $switch_to 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:31:45.607

该脚本对我有用。

无论如何，在您的情况下，脚本似乎找不到活动窗口。因此，它设法切换到您的应用程序，但无法循环通过。它切换到 $win_list 中的第一个窗口，因为 sed 命令无法从 $win_list 中删除活动窗口（以及之前的所有列表条目）。

尝试以下命令：

```
xprop -root _NET_ACTIVE_WINDOW 
```

输出应该是这样的：

```
_NET_ACTIVE_WINDOW(WINDOW): window id # 0x2400005 
```

属性“_NET_ACTIVE_WINDOW”是**EWMH**标准的一部分。见：[http ://standards.freedesktop.org/wm-spec/wm-spec-1.3.html](http://standards.freedesktop.org/wm-spec/wm-spec-1.3.html)

也许您正在使用不**符合 EWMH**（扩展窗口管理器提示）的窗口管理器！你用的是哪个WM？

...一些窗口管理器允许通过配置或插件启用 EWMH 兼容性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T11:11:10.923

通过 st0ne 调整脚本后，我有了一个通用的版本（不需要指定 app_name）。希望这对某人有用。:)

```
#!/bin/bash
active_win_id=`xprop -root | grep '^_NET_ACTIVE_W' | awk -F'# 0x' '{print $2}' | awk -F', ' '{print $1}'`
if [ "$active_win_id" == "0" ]; then
    active_win_id=""
fi

app_name=`wmctrl -lx | grep $active_win_id | awk '{print $3}'`
workspace_number=`wmctrl -d | grep '\*' | cut -d' ' -f 1`
win_list=`wmctrl -lx | grep -ri $app_name | grep " $workspace_number " | awk '{print $1}'`

# get next window to focus on, removing id active
switch_to=`echo $win_list | sed s/.*$active_win_id// | awk '{print $1}'`
# if the current window is the last in the list ... take the first one
if [ "$switch_to" == "" ];then
    switch_to=`echo $win_list | awk '{print $1}'`
fi

if [[ -n "${switch_to}" ]]
    then
        (wmctrl -ia "$switch_to") &
    else
        if [[ -n "$2" ]]
            then
                ($2) &
        fi
fi

exit 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T23:46:07.277

[我在tkt028 的回答](https://stackoverflow.com/a/33607859/2124447)中遇到了一个小问题¹，但我喜欢他们在处理任何通用应用程序方面所做的工作。但我也喜欢[st0ne 的答案](https://stackoverflow.com/a/15808431/2124447)如何处理在一个特别命名的应用程序的窗口中循环。所以我结合了这些方法。

我的脚本采用可选的第一个参数来指定应循环其窗口的应用程序。如果没有找到这样的窗口，并且如果提供了可选的第二个参数，它将回退到启动第二个参数指定的命令。

如果根本没有提供任何参数，那么它只会在当前活动应用程序的窗口中循环。

```
#!/bin/bash

if [[ "$1" == "-h" || "$1" == "--help" ]]; then
    echo "Cycle through windows of the active, or specified, application."
    echo ""
    echo "Usage: $(basename $0) [window_class_name [application_launcher]]"
    echo ""
    echo "  window_class_name:    regex string specifying an application's window name,"
    echo "                        as specified by the third column of"
    echo "                        'wmctrl -l -x'"
    echo "  application_launcher: application to optionally launch if no windows"
    echo "                        matching window_class_name are found"
    echo ""
    echo "If no arguments are specified, cycles through the windows of the active application."
    exit
fi

# get ID of active window
active_win_id=`xprop -root | grep '^_NET_ACTIVE_W' | awk -F'# 0x' '{print $2}' | awk -F', ' '{print $1}'`
if [ "$active_win_id" == "0" ]; then
    active_win_id=""
fi

if [[ -n "$1" ]]; then
    # get app name from input argument
    app_name="$1"
else
    # get corresponding app name
    app_name="${app_name:-$(wmctrl -lx | grep $active_win_id | awk '{print $3}')}"
fi

# get active workspace number
workspace_number=`wmctrl -d | grep '\*' | cut -d' ' -f 1`

# get list of windows corresponding to the desired app
win_list=`wmctrl -lx | grep -i $app_name | grep " $workspace_number " | awk '{print $1}'`

# get next window of app to focus on
#
# (Parses $win_list as a single string, removing everything except the token
# after the active ID. If active ID is sole token or last token, string will be
# left unmodified, producing an array from which we'll extract the first element.)
# Note: If active window was not of class app_name, then this will end up
#       selecting the first window of app_name, if running. Otherwise, we'll fall
#       through to launching a new instance of the app in the else of the next block.
switch_to=($(echo $win_list | sed "s/.*\<\(0x0\+\)\?$active_win_id\>\s*\(\<0x[0-9a-f]\+\>\).*/\2/"))

# if we have a valid window to switch to, do so
if [[ -n "${switch_to}" ]]; then
    wmctrl -ia "${switch_to[0]}"
    exit $?
else
    # if the user specified a fallback application to run if target window
    # was not found, try to launch it
    if [[ -n "$2" ]]; then
        $2 &
        # check whether process corresponding to PID of background
        # process we just launched is still running
        ps -p $! > /dev/null
        exit $?
    else
        exit $?
    fi
fi 
```

* * *

¹ tkt028 答案中这一行的递归 grep 在我的环境中不起作用。也许这取决于您的 grep 版本。

```
win_list=`wmctrl -lx | grep -ri $app_name | grep " $workspace_number " | awk '{print $1}'` 
```

我只是`r`从 中删除了参数`grep`，然后他们的脚本就如宣传的那样工作。

```
win_list=`wmctrl -lx | grep -i $app_name | grep " $workspace_number " | awk '{print $1}'` 
```

# r - 在模型列表上使用 lapply

> ID：15172738
> 
> 赞同：3
> 
> 时间：2013-03-02T09:10:06.890
> 
> 标签：r, lapply

我已经生成了一个模型列表，并想创建一个汇总表。

例如，这里有两个模型：

```
x <- seq(1:10)
y <- sin(x)^2
model1 <- lm(y ~ x)
model2 <- lm(y ~ x + I(x^2) + I(x^3)) 
```

和两个公式，第一个从公式的组件生成方程

```
get.model.equation <- function(x) {
  x <- as.character((x$call)$formula)
  x <- paste(x[2],x[1],x[3])
} 
```

第二个将模型名称生成为字符串

```
get.model.name <- function(x) {
  x <- deparse(substitute(x))
} 
```

有了这些，我创建了一个汇总表

```
model.list <- list(model1, model2)
AIC.data <- lapply(X = model.list, FUN = AIC)
AIC.data <- as.numeric(AIC.data)
model.models <- lapply(X = model.list, FUN = get.model)
model.summary <- cbind(model.models, AIC.data)
model.summary <- as.data.frame(model.summary)
names(model.summary) <- c("Model", "AIC")
model.summary$AIC <- unlist(model.summary$AIC)
rm(AIC.data)
model.summary[order(model.summary$AIC),] 
```

这一切都很好。我想使用 get.model.name 将模型名称添加到表中

```
x <- get.model.name(model1) 
```

这给了我想要的“model1”。

所以现在我将该函数应用于模型列表

```
model.names <- lapply(X = model.list, FUN = get.model.name) 
```

但现在我得到*X[[1L]]*而不是*model1*

 *如何获得*model1*而不是*X[[1L]]*？

我想要一张看起来像这样的桌子：

```
 Model                Formula       AIC
model1                  y ~ x  11.89136
model2 y ~ x + I(x^2) + I(x^3) 15.03888 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T09:20:02.903

你想要这样的东西吗？

```
model.list <- list(model1 = lm(y ~ x), 
                   model2 = lm(y ~ x + I(x^2) + I(x^3)))
sapply(X = model.list, FUN = AIC) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:14:45.467

我会做这样的事情：

```
model.list <- list(model1 = lm(y ~ x),
                   model2 = lm(y ~ x + I(x^2) + I(x^3)))
# changed Reduce('rbind', ...) to do.call(rbind, ...) (Hadley's comment)
do.call(rbind, 
        lapply(names(model.list), function(x) 
          data.frame(model = x, 
          formula = get.model.equation(model.list[[x]]), 
          AIC = AIC(model.list[[x]])
          )
        )
      )

#    model                 formula      AIC
# 1 model1                   y ~ x 11.89136
# 2 model2 y ~ x + I(x^2) + I(x^3) 15.03888 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T17:13:43.227

另一种选择，使用`ldply`，**但请参阅下面的 hadley 评论以更有效地使用`ldply`**：

```
 # prepare data
    x <- seq(1:10)
    y <- sin(x)^2
    dat <- data.frame(x,y)

# create list of named models obviously these are not suited to the data here, just to make the workflow work...
models <- list(model1=lm(y~x, data = dat), 
               model2=lm(y~I(1/x), data=dat),
               model3=lm(y ~ log(x), data = dat),
               model4=nls(y ~ I(1/x*a) + b*x, data = dat, start = list(a = 1, b = 1)), 
               model5=nls(y ~ (a + b*log(x)), data=dat, start = setNames(coef(lm(y ~ log(x), data=dat)), c("a", "b"))),
               model6=nls(y ~ I(exp(1)^(a + b * x)), data=dat, start = list(a=0,b=0)),
               model7=nls(y ~ I(1/x*a)+b, data=dat, start = list(a=1,b=1))
)

library(plyr)
library(AICcmodavg) # for small sample sizes
# build table with model names, function, AIC and AICc
data.frame(cbind(ldply(models, function(x) cbind(AICc = AICc(x), AIC = AIC(x))), 
                 model = sapply(1:length(models), function(x) deparse(formula(models[[x]])))
                      ))

     .id     AICc      AIC                     model
1 model1 15.89136 11.89136                     y ~ x
2 model2 15.78480 11.78480                y ~ I(1/x)
3 model3 15.80406 11.80406                y ~ log(x)
4 model4 16.62157 12.62157    y ~ I(1/x * a) + b * x
5 model5 15.80406 11.80406      y ~ (a + b * log(x))
6 model6 15.88937 11.88937 y ~ I(exp(1)^(a + b * x))
7 model7 15.78480 11.78480        y ~ I(1/x * a) + b 
```

对我来说，如何用函数`.id`中的列名替换它并不是很明显`ldply`，有什么提示吗？*

# eclipse - 使用 Eclipse 和 tomcat 问题运行 java web 项目

> ID：15172740
> 
> 赞同：0
> 
> 时间：2013-03-02T09:10:19.227
> 
> 标签：eclipse, tomcat

我已经在 ubuntu 12.10 上安装了 tomcat 7.0.37 和 Eclipse juno，并构建了我的第一个基于 jsp 的 Web 应用程序。但是当我点击 run as -> 在服务器上运行时，eclipse 会关闭。一个问题是，在重新启动时，tomcat 无法启动并弹出错误：

> Tomcat v7.0 服务器在 localhost (2) 所需的几个端口（8005、8081、8009）已经在使用中。服务器可能已经在另一个进程中运行，或者系统进程可能正在使用该端口。要启动此服务器，您需要停止其他进程或更改>端口号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:18:26.217

在 Tomcat 安装文件夹中，您可以找到一个名为的文件夹，`conf`并在其中找到一个 XML 文件`server.xml`。

该文件包含 Tomcat 必须使用的端口。使用不同的端口号更新该文件，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:08:47.057

好的，最后我解决了。首先，我将默认浏览器从内部更改为系统默认值，它解决了 eclipse 关闭的问题。其次，我将文件移动到项目结构下的 Web Content 文件夹中。现在我有一个正在运行的 JSP 应用程序。感谢网络上的所有极客。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T09:54:23.290

如果您使用 eclipse 然后双击服务器并双击 tomcat 服务器然后将打开一个文件。将 HTTP 端口更改为其他端口号并保存（ctrl+s），然后再次启动服务器。它可能工作正常

# ruby-on-rails - 在rails中设置导航栏/链接的好方法

> ID：15172743
> 
> 赞同：1
> 
> 时间：2013-03-02T09:10:33.280
> 
> 标签：ruby-on-rails, ruby

我想知道在 rails 中为不同页面设置导航链接的好方法是什么？现在我有什么休息。这是代码

```
_nav.html.erb

<ul class="nav nav-pills pull-right">
    <%if current_page?(:action => 'new') %>
    <li><%= link_to "Home", root_path%></li>
    <%elsif current_page?(:controller => 'home', :action => 'index') %>
    <li><%= link_to "Contact", home_contact_path%></li>
    <%end%>
</ul> 
```

所以当我做一个`<%= render :partial => 'layouts/nav' %>`under`/views/home/index.html.erb`它给我一个错误

```
No route matches {:action=>"new", :controller=>"home"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:57:50.410

您的家庭控制器中没有新操作...查看您的路线，唯一可用的操作是联系...

尝试使用助手 ( `current_page?(helper)`) 而不是`action`+ `controller`。检查`rake routes`以查看帮助程序。

```
_nav.html.erb

<ul class="nav nav-pills pull-right">
  <%if current_page?(new_user_registration) %> #check the path helper by `rake routes`
    <li><%= link_to "Home", root_path%></li>
  <%elsif current_page?(root_path) %>
    <li><%= link_to "Contact", home_contact_path%></li>
  <%end%>
</ul> 
```

# python - 使用两个字符串填充字典以生成键值对

> ID：15172745
> 
> 赞同：0
> 
> 时间：2013-03-02T09:10:36.487
> 
> 标签：python

我有两个字符串（长度相同），我想创建一个字典，其中键是一个字符串中的字符，其值对应于另一个字符串中的字符。

```
x='qwert'
y='asdfg' 
```

然后，字典应该包含

```
d[q]='a'
d[w]='s'
d[e]='d'
d[r]='f'
d[t]='g' 
```

我试着做这样的事情

```
for i,j in x,y:
   d[i]=j 
```

但这似乎在 python 中不起作用（就像在 C 中那样）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T09:13:45.287

```
d = dict(zip(x, y)) 
```

相当简单的解决方案，你只需要将`zip`两个字符串放在一起，然后将它们传递给`dict`构造函数。

分解：

*   `zip(x, y)`创建一个元组列表，将字符串中“相同位置”的字母分组。

    ```
    [('q', 'a'), ('w', 's'), ('e', 'd'), ('r', 'f'), ('t', 'g')] 
    ```

*   `dict()`接受两个元素元组的列表，并使它们成为字典中的键值对。

    ```
    {'q': 'a', 'r': 'f', 'e': 'd', 't': 'g', 'w': 's'} 
    ```

    请注意，字典没有按元组的顺序出现 - 这是因为字典不是有序的容器，而是它们只是将一个值映射到另一个。

# database-design - 我应该如何在 Strut2 中构建？

> ID：15172748
> 
> 赞同：1
> 
> 时间：2013-03-02T09:10:43.720
> 
> 标签：database-design, data-structures, struts2

我刚刚使用过 Struts2，所以我有很多问题。

在 JSP 上：`<s:text name="account"/>`.

在动作课上：

```
 public String getAccount() {
            return account;
    }

    public void setAccount(String account) {
    this.account = account;
    } 
```

1/ 帐户是学生的一个属性。当我提交到服务器时，getter 和 setter 是否会接收并将信息发送给客户端？

2/ 我想插入一个具有两个属性的新学生：帐户和电子邮件。插入完成后，用户将被重定向一个显示学生表的jsp。如果action类要从jsp获取account和email参数，action类是否需要两个字段account，email，getter和setter？如果需要，是否需要只包含 gettter 和 setter 方法的 Student 类？

实际上，它有 4 个字段。动作类：

```
public class TraineeLogin {
      private String account;
      private String fName;
      private String lName;
      private String email;
      private Vector<Trainee> listTrainee; //Should I use 4 lists or 1 list to contain infomation?

      public String execute(){
              DBTraineesManager manager  = new DBTraineesManager();
              ...//valid
              manager.addOrUpdate(account, fName, lName, email);
              return "success";
          }

        public String getAccount() {
            return account;
        }
        public void setAccount(String account) {
            this.account = account;
        }
        public String getfName() {
            return fName;
        }
        public void setfName(String fName) {
            this.fName = fName;
        }
        public String getlName() {
            return lName;
        }
        public void setlName(String lName) {
            this.lName = lName;
        }
        public String getEmail() {
            return email;
        }
        public void setEmail(String email) {
            this.email = email;
        }
        public Vector<Trainee> getListTrainee() {
            return listTrainee;
        }
        public void setListTrainee(Vector<Trainee> listTrainee) {
            this.listTrainee = listTrainee;
        }

        } 
```

实体类：

```
public class Trainee {
    private String account;
    private String fName;
    private String lName;
    private String email;

    constructor();   
    getter();     //That same as DBTraineesManager class.
    setter();     // The code is same. It wasted time.
} 
```

3/ 我应该使用两个列表：listAccount 和 listEmail 来显示表格吗？或者我应该使用listStudent？

4/ 维护数据库以在 Strut2 中查询和更新对象的最佳结构是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:23:02.220

首先，您不需要将**getter 和 Setter**都放在两个类中。你可以把它放在动作类或单独的 Bean 类中，它接受表单输入。在我看来，您应该只使用一个列表来管理所有属性。

你问题的第三部分是关于数据库设计模式。因为最好遵循**DAO**设计模式

[http://en.wikipedia.org/wiki/Data_access_object](http://en.wikipedia.org/wiki/Data_access_object)

[http://www.tutorials4u.net/struts2-tutorial/struts2_crud_example.html](http://www.tutorials4u.net/struts2-tutorial/struts2_crud_example.html)

# java - 索引容器 Vaadin 上的空指针异常

> ID：15172751
> 
> 赞同：1
> 
> 时间：2013-03-02T09:11:06.883
> 
> 标签：java, hibernate, vaadin

我正在使用 vaadin 的 FilterTable 插件。我在以下代码中收到 NullPointerException，但找不到原因。

```
 cont = new IndexedContainer()
  cont.addContainerProperty("Patient", String.class, null);
  cont.addContainerProperty("Date Of Service", String.class,null);
  cont.addContainerProperty("Provider", String.class, null);

    Session session = HibernateUtil.getSessionFactory().openSession();
        Iterator<?> iterator = session.createQuery("FROM ConvertVisitToBillingV WHERE ready_for_billing = '0'").list().iterator();

        while(iterator.hasNext()){

                ConvertVisitToBillingV var = (ConvertVisitToBillingV) iterator.next();

                Visits v = (Visits) session.load(Visits.class, var.getVisitId());
                Appointments app = (Appointments)session.load(Appointments.class, v.getAppointmentId());
                t_id= var.getVisitId();
                cont.addItem(t_id);
                Resources res = (Resources)session.load(Resources.class, v.getReferredBy());
                cont.getContainerProperty(t_id, "Patient").setValue(var.getFirstName() + " " + var.getLastName());
                cont.getContainerProperty(t_id, "Date Of Service").setValue(new SimpleDateFormat("MM/dd/yyyy").format(v.getVisitDt()));
                cont.getContainerProperty(t_id, "Provider").setValue(res.getResourceFirstName()+" "+res.getResourceLastName());

            } 
```

当它执行“cont.getContainerProperty(t_id,property).setValue() 行时，它偶尔会抛出 NullPointerException。没有得到它背后的原因。

这可能是什么原因，任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:25:46.430

如果没有更多细节，我会说：

*   `v.getVisitDt()`对于某些 `v` 为空
*   `session.load(Resources.class, v.getReferredBy());`为某些返回 null `v`，因此`res`为 null。

这可能会解决问题：

```
 cont.getContainerProperty(t_id, "Patient").setValue(var.getFirstName() + " " + var.getLastName());
 if(v.getVisitDt()!=null){
   cont.getContainerProperty(t_id, "Date Of Service").setValue(new SimpleDateFormat("MM/dd/yyyy").format(v.getVisitDt()));
 } else {
   cont.getContainerProperty(t_id, "Date Of Service").setValue("?");
 }
 if(res!=null){
    cont.getContainerProperty(t_id, "Provider").setValue(res.getResourceFirstName()+" "+res.getResourceLastName());
 else{
    cont.getContainerProperty(t_id, "Provider").setValue("?");
 } 
```

# java - Google App 引擎中的 @SessionScoped JSF bean 丢失状态

> ID：15172759
> 
> 赞同：2
> 
> 时间：2013-03-02T09:11:39.117
> 
> 标签：java, google-app-engine, jsf-2

我正在尝试在 Google App Engine 上使用 JSF，但是在使用 Sessionscoped bean 时遇到了一些麻烦。我有一个注释为@Sessionscoped 的类，并且只有一个页面，表单中只有一个下一步按钮。当我在 Eclipse 中单击此按钮时， currentNumber 的值每次都会更新，这是我所期望的。但是，当它部署在 App Engine 上时，每个请求的数字都会重置为 0，因此它永远不会超过 1。无论我做什么，我似乎都无法获得会话行为，它总是表现得好像它是 requestscoped 一样。它在本地运行良好，但在部署时却不行。有什么想法吗？

```
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name = "controller")
@SessionScoped
public class Controller implements Serializable {

        private int currentNumber;

    public Controller() {

    }

    public int getCurrentNumber() {
        return currentNumber;
    }

    public void setCurrentNumber(int currentNumber) {
        this.currentNumber = currentNumber;
    }

    public void next() {
        currentNumber++;
    }
} 
```

在 appengine.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <version>1</version>

    <!-- Allows App Engine to send multiple requests to one instance in parallel: -->
    <threadsafe>true</threadsafe>

    <!-- Configure java.util.logging -->
    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties" />
    </system-properties>
    <sessions-enabled>true</sessions-enabled>

</appengine-web-app> 
```

最后是 web.xml：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
   <!-- ***** Designate client-side state saving. *****  -->
   <context-param>
      <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
      <param-value>client</param-value>
   </context-param>
   <!-- Set the default suffix for JSF pages to .xhtml -->
   <context-param>
      <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
      <param-value>.xhtml</param-value>
   </context-param>
   <!-- Disable use of threading for single-threaded environments such as
        the Google AppEngine. -->
   <context-param>
      <param-name>com.sun.faces.enableThreading</param-name>
      <param-value>false</param-value>
   </context-param>
   <!-- ***** Specify JBoss Expression Language Over Default -->
   <context-param>     
      <param-name>com.sun.faces.expressionFactory</param-name>
      <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>   
   </context-param> 
   <!-- ***** Load the JavaServer Faces Servlet ***** -->
   <servlet>
      <servlet-name>Faces Servlet</servlet-name>
      <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>
   <servlet-mapping>
      <servlet-name>Faces Servlet</servlet-name>
      <url-pattern>/faces/*</url-pattern>
      <url-pattern>*.jsf</url-pattern>
   </servlet-mapping>
   <!-- ***** Specify session timeout of thirty (30) minutes. ***** -->
   <session-config>
      <session-timeout>30</session-timeout>
   </session-config>
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
</web-app> 
```

**更新：**

将 Mykongs 教程中提到的 jsf 实现更改为 Mojarra 的 2.0.3 版本神秘地成功了。如果有人知道为什么会发生这种情况，我很想知道，因为我没有看到任何地方提到过。

# jquery - 从复选框中获取值

> ID：15172767
> 
> 赞同：0
> 
> 时间：2013-03-02T09:13:42.997
> 
> 标签：jquery, checkbox

我有复选框，它的值是从数据库中填充的。我可以选择和取消选择所有复选框，但我无法获取单个选中复选框的值。这是我到目前为止所做的，用于从数据库填充的复选框：

```
<form>

<br>
<input type="checkbox" id="All"> <b>Select/DeSelect All</b><br>

<?php
$sql = 'SELECT Subject_Category from {extdb_subjects} where level=1 ';
$res = db_query($sql);

foreach ($res as $row)
{
 echo "<input type='checkbox' id='sub_names' name='{$row->Subject_Category}'
    value='{$row->Subject_Category}'";

  echo ">{$row->Subject_Category}";
  echo "<br>";
}
?>

</form> 
```

用于选择取消选中所有复选框和选中复选框的单独显示的 JQuery 脚本：

```
jQuery(function(){

 jQuery('#All').change(function() {

    var checkboxes = jQuery(this).closest('form').find(':checkbox');

    if(jQuery(this).is(':checked')) {
        checkboxes.attr('checked', 'checked');

    } else {
        checkboxes.removeAttr('checked');

    }

    });

  jQuery('#sub_names').change(function() { //This is not able to get the values

    if(jQuery(this).is(':checked')) {
      alert(jQuery("input[type=checkbox]:checked").val());

    } 

    });

}); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:25:46.180

这对我来说似乎很奇怪。你检查它是否*被*选中，然后你尝试获取一些任意的复选框值。试试这个。

```
jQuery('#sub_names').change(function() { //This is not able to get the values
  if(jQuery(this).is(':checked')) {
    alert(jQuery("input[type=checkbox]:checked").val());
  } 
} 
```

尝试：

```
 jQuery('input[type=checkbox]').click(function(){
      if(jQuery(this).is(':checked')){
         console.log( $(this).val() )
       }
   }) 
```

# r - 更改 Ecdf 图的轴标签中的文本大小

> ID：15172771
> 
> 赞同：1
> 
> 时间：2013-03-02T09:14:01.790
> 
> 标签：r, ecdf, hmisc

我通过以下调用`Ecdf`从包中构建了一个图：`Hmisc`

```
require(Hmisc)
Ecdf(latency_targ1, group = CONDITION, lty = c(1, 2, 3, 4), 
        lwd = 4, label.curves = list(method = 'arrow', 
        keys = "lines", lwd = 2), xlim = c(0,500), 
        subtitles = FALSE, xlab = "Latency", 
        ylab = "Proportion latency <= x") 
```

我一直无法找到如何更改绘图轴标签的大小，并且默认大小相当小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:44:10.460

试试这个：

```
Ecdf(latency_targ1, group = CONDITION, lty = c(1, 2, 3, 4), 
    lwd = 4, label.curves = list(method = 'arrow', 
    keys = "lines", lwd = 2), xlim = c(0,500), 
    subtitles = FALSE, xlab = "Latency", 
    ylab = "Proportion latency <= x", 
    cex.lab=1.5, xaxt="n", yaxt="n")
axis(2, cex.axis=1.5)
axis(1, cex.axis=1.5) 
```

# vhdl - 无符号操作需要有符号变量或VHDL中的内容

> ID：15172772
> 
> 赞同：0
> 
> 时间：2013-03-02T09:14:44.183
> 
> 标签：vhdl

我面临一个问题......其中 p3,p6,p9 ,p1,p4 p7 是 8 位 std_logic_vector。

我想做 (p3+2*p6+p9)-(p1+2*p4+p7) 之类的操作，没有乘数，而是通过移位操作。（通过两个=>左移 1），其结果可能是 + 或 -五。

所以我想要签名一个。如果它超过 255，则结果为 255，否则为 8 位值。第一个 h1 给出了错误的结果。

您可以在下面找到代码

-

```
- Company: 
-- Engineer: 
-- 
-- Create Date:    21:01:45 01/11/2013 
-- Design Name: 
-- Module Name:    HRZ - Behavioral 
-- Project Name: 
-- Target Devices: 
-- Tool versions: 
-- Description: 
--
-- Dependencies: 
--
-- Revision: 
-- Revision 0.01 - File Created
-- Additional Comments: 
--
----------------------------------------------------------------------------------
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

---- Uncomment the following library declaration if instantiating
---- any Xilinx primitives in this code.
--library UNISIM;
--use UNISIM.VComponents.all;

entity HRZ is
PORT ( CLK     : IN  STD_LOGIC;
             RST     : IN  STD_LOGIC;
             P1,P3,P4,P6,P7,P9 : IN  STD_LOGIC_VECTOR(7 DOWNTO 0);
             MAG_HRZ : OUT  STD_LOGIC_VECTOR(7 DOWNTO 0) );
end HRZ;

architecture Behavioral of HRZ is
SIGNAL H1: signed(17 DOWNTO 0) ;

SIGNAL THRESHOLD: signed(17 DOWNTO 0):="000000000011111111";
begin
P :  PROCESS(CLK)

BEGIN

H1<=SIGNED(('0'&P3+'0'&P6(7 DOWNTO 0)&'0'+'0'&P9)-('0'&P1+'0'&P4(7 DOWNTO 0)&'0'+'0'&P7));
IF(H1>=THRESHOLD) THEN
MAG_HRZ<="11111111";
ELSE
 IF H1(17)='0' THEN
  MAG_HRZ<=H1(7)&H1(6)&H1(5)&H1(4)&H1(3)&H1(2)&H1(1)&H1(0);
  ELSE
 MAG_HRZ<=NOT(H1(7)&H1(6)&H1(5)&H1(4)&H1(3)&H1(2)&H1(1)&H1(0))+'1';

  END IF;
END IF;
END PROCESS P;
end Behavioral;
vh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:47:22.167

使用库 IEEE.STD_LOGIC_ARITH 和 IEEE.STD_LOGIC_UNSIGNED 被认为已弃用。您应该改用 IEEE.NUMERIC_STD。
除此之外，我认为您不需要给出明确的范围`P4(7 downto 0)`，`P4`应该就可以了。也一样`P6`。
我没有测试它，但尝试`SIGNED('0'&(('0'&P3+'0'&P6&'0'+'0'&P9)-('0'&P1+'0'&P4&'0'+'0'&P7)));`. 我认为这里的问题是转换为有符号时的符号扩展，因此在前面添加一个额外的零应该可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:26:13.877

我会使用整数，然后生活会容易得多......限制输入：

```
variable p1,p2,... : integer range 0 to 255; 
```

您的两个中间值也是无符号的（或`natural`在整数世界中）：

```
variable i1, i2 : natural;

i1 := p3 + p6*2 + p9;
i2 := p1 + p4*2 + p7; 
```

最终值需要是有符号值，因此`integer`类型为：

```
variable final : integer;

final := i1 - i2; 
```

这不是 80 年代，合成器非常聪明 - 让合成器弄清楚。如果

*   它不只是为`*2`
*   它不会将范围缩小`final`到正确的位数，因为它应该计算出需要多少位。即便如此，映射器可能会在以后解决它并优化不需要的位

# regex - 使用 SED 删除数据库中 html 中的特定锚标记

> ID：15172774
> 
> 赞同：0
> 
> 时间：2013-03-02T09:15:05.697
> 
> 标签：regex, sed

我有一个表格，其中包含数百个带有屏幕截图的指南。屏幕截图图像被锚标签包围，因为它们以前是可点击的，但现在我需要删除锚标签。所有要删除的锚标记都有一个`href=#screenshot`后跟一个数字，如下例所示。我的计划是使用 mysqldump 转储表，然后使用**sed**查找和替换正确的字符串。

```
<p>Choose <a href="/components">components</a> to install and click next.</p>
<div class="screen">
<a href="#screenshot3"><img src="/images/screens/install/step3.jpg" alt="Step 3"></a>
</div> 
```

应该

```
<p>Choose <a href="/components">components</a> to install and click next.</p>
<div class="screen">
<img src="/images/screens/install/step3.jpg" alt="Step 3">
</div> 
```

我可以使用匹配第一个标签，`<a\shref\=\"#screenshot\d+\"\>`但我还需要匹配它的第二个结束标签，以便可以删除两者，同时不删除其他锚标签。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:19:32.243

您可以尝试更换

```
<a\shref\=\"#screenshot\d+\"\>(.*)<\/a> 
```

与`\1`.

括号将捕获它们之间的所有内容，因此您可以使用`\1`, `\2`...

请记住，虽然正则表达式不是尝试修改 HTML 时使用的正确武器。阅读[本文](https://stackoverflow.com/a/1732454/1225541)（及其周围的评论）以获得解释。

# android - Android：启动共享意图会关闭我的活动

> ID：15172775
> 
> 赞同：4
> 
> 时间：2013-03-02T09:15:15.673
> 
> 标签：android, android-intent, android-fragments, android-activity

在我的片段中，当我尝试分享一个共享意图时，它会关闭我的应用程序。我希望意图出现在我的应用程序顶部，当用户完成共享并按下后退按钮时，我希望我的应用程序出现。这是我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.joyfm.activity"
    android:versionCode="5"
    android:versionName="1.4" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="17" />

   <uses-permission android:name="android.permission.INTERNET"/>
   <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:theme="@style/Theme.Sherlock"
        android:allowBackup="true"
        android:label="@string/app_name"
        android:icon="@drawable/logo_launcher">
        <activity
            android:theme="@style/Theme.Sherlock"
            android:name="com.joyfm.activity.MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/app_name" >
        </activity>
         <activity
            android:name="com.joyfm.activity.SplashActivity"
            android:theme="@style/Theme.Sherlock"
            android:launchMode="singleTask"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我**编辑**片段中的代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    String authorInformation = "<i><BR>" + news.getAuthorInfo() + "<BR>\u00A9 www.myjoyonline.com</i>";

    ScrollView layout = (ScrollView) inflater.inflate(R.layout.news_viewer, container, false);
    TextView title = (TextView) layout.findViewById(R.id.txtTitle);
    TextView summaryDetails = (TextView) layout.findViewById(R.id.summaryDetails);
    TextView date = (TextView) layout.findViewById(R.id.txtNewsDate);
    TextView copyRight = (TextView) layout.findViewById(R.id.txtCopyRight);
    TextView newsDetails = (TextView) layout.findViewById(R.id.txtNewsDetails);
    ImageViewSpinner image = (ImageViewSpinner) layout.findViewById(R.id.thumbNail);

    title.setText(Html.fromHtml(news.getTitle()));
    summaryDetails.setText(Html.fromHtml(ITALIC_START + news.getDescription() + ITALICS_END));
    date.setText(Html.fromHtml(ITALIC_START + news.getDate() + ITALICS_END));
    newsDetails.setText(Html.fromHtml(news.getNewsItem()));
    copyRight.setText(Html.fromHtml(authorInformation));
    if(news.getThumbnailUrl().trim().length() > 0)
    {
        imageDownloader.download(image, news.getThumbnailUrl(), null);
    }else
    {
        image.setVisibility(View.GONE);
    }

    shareContentSubject = title.getText();
    shareContentDetails = newsDetails.getText();
    image.setClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {

                try
                {
                    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
                     sharingIntent.setType("text/plain");
                     sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, SHARED_SUBJECT + shareContentSubject);
                     sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareContentDetails);
                     startActivity(Intent.createChooser(sharingIntent, "Share with"));          
                }catch(Exception ex)
                {
                    ex.printStackTrace();
                }
        }
    });
    return layout;
} 
```

请帮忙，我一直在努力解决这个问题并尝试了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:05:50.603

问题解决了。我的活动中有这个，所以当意图弹出时它正在破坏它。

```
@Override
protected void onUserLeaveHint()
{
    super.onUserLeaveHint();
    finish();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T09:24:18.090

在 Android Mainfest 文件中为 Share Intent 注册您的 Activity 并检查一次

```
 <activity
   android:name=".ActivityTest"
   android:label="@string/app_name" >
   <intent-filter>
     <action android:name="android.intent.action.SEND" />      
     <category android:name="android.intent.category.DEFAULT" />
      <data android:mimeType="text/plain" />    
   </intent-filter>
 </activity> 
```

# javascript - Javascript 变量作为 html 标记名称

> ID：15172783
> 
> 赞同：0
> 
> 时间：2013-03-02T09:16:14.643
> 
> 标签：javascript, html

这是我的代码..

```
<!DOCTYPE html>
<html>
<script>
function genbox()
{
var i;
var myarray = new Array();
myarray[0] = "name";
myarray[1] = "dob";
myarray[2] = "email";
for (i=0;i<myarray.length;i++)
{
document.write('<input name="' + myarray[i] + '"/>');
}
}
</script>
<body>
<input type="button"  value="create" onclick="genbox();">
</body>
</html> 
```

旧：我希望文本框名称作为数组的值，例如名称、dob 等，但我得到的只是 3 个具有相同名称“myarray [i]”的文本框。请帮我。

好的，我们开始吧，我对 js 很陌生。单击按钮后，它会创建 3 个文本框，但是，按钮消失了，我应该怎么做才能使按钮保持活动状态？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T09:17:57.333

您不能在字符串中插入 JavaScript 变量并期望解释器提取其值（就像某些语言一样，如 PHP）。改为使用连接构建您的字符串：

```
"<input name='" + myArray[i] + "'/>" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T09:20:21.567

在循环中尝试这一行：

```
document.write('<input name="' + myarray[i] + '"/>'); 
```

工作 jsfiddle 在[这里](http://jsfiddle.net/8uPVT/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:22:52.563

你应该阅读一些关于 javascript 的基本教程，试试[http://www.codecademy.com/](http://www.codecademy.com/)

这是代码，但是您不应该使用 document.write 添加 html，还有其他更好的方法可以做到这一点。

```
 var i,
        myarray = ["name", "dob", "email"];

    for (i = 0, ilen = myarray.length; i < ilen; i++) {
        document.write('<input name="' + myarray[i] + '"/>');
    } 
```

# listview - 具有翻转动画效果的 Kendo ui listview

> ID：15172791
> 
> 赞同：1
> 
> 时间：2013-03-02T09:17:05.407
> 
> 标签：listview, kendo-ui, flip

我有一组使用 Kendo UI 列表视图显示的产品图像。当用户单击图像时，我希望图像翻转并显示用户可以填写和提交的可编辑表单。

通过[将此演示](http://demos.kendoui.com/web/fx/combined.html)用于单个图像和表单，我能够成功地做到这一点。但是，当我尝试使用模板元素对 listView 中的所有元素执行此操作时，转换仅适用于列表中的第一个元素（即使我单击任何其他元素）。我怎样才能使这项工作？

# java - 异常和日志记录

> ID：15172801
> 
> 赞同：0
> 
> 时间：2013-03-02T09:18:15.890
> 
> 标签：java, exception-handling

我有一个父类“DownloadManagerWrapper.java”，我正在调用“DownloadManager.java”中存在的方法。如果出现异常，我想抛出异常并停止程序执行，同时我想使用 log4j 在日志文件中记录错误。

我`cacheUploadLog(intfcode,bankId)`从方法调用`downloadDataCore()`方法。所以我觉得我在两个地方记录了相同的错误：

*   从`cacheUploadLog()`方法
*   在`downloadDataCore()`捕获方法抛出的异常之后`cacheUploadLog()`。

是否需要拥有`try`并`catch`阻止内部`downloadDataCore()`方法？

请提供您的建议并帮助我处理这里的异常和处理。

## 下载ManagerWrapper.java

```
 public static void readInterfaceConfig(String intfCode, String bankId,String downloadId) {
        DownloadManager manager = new DownloadManager();
        manager.downloadDataFromCore(intfCodeFromDB, bankId, downloadId);
    } 
```

## 下载管理器.java

```
 public String downloadDataFromCore(String intfcode, String bankId, String downloadId) throws DownloadCoreDataException {
        try
        {
            // here it contain some other code. formatting code, splitting, and other logic. may be  a chance there might exception arise here.                
            cacheUploadLog(intfcode, bankId);
            cacheDownloadConfig(intfcode, bankId);
        } catch (DownloadCoreDataException exception) {
            errorLogger.error("Error in downloaddatafromcore method", exception);
            throw new DownloadCoreDataException("Error in downloaddatafromcore method", exception);
        }
    }

    private void cacheUploadLog(String intfcode, String bankId) throws DownloadCoreDataException {
        try{
            String lastDownloadedTime = getLastDownloadedTime(intfcode, bankId);
        } catch (Exception exception) {
            errorLogger.error("Error in getting primary_key from update_log table",exception);
            throw new DownloadCoreDataException("Error in getting primary_key " + 
                "from update_log table",exception);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:23:21.787

如果**要记录参数值以进行调试**，可以在内部有一个**try-catch**块`downloadDataFromCore`并记录这些参数并抛出异常。否则不需要，因为该方法已经抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:26:26.917

首先，尝试解决这个问题：-

```
DownloadManager manager = new DownloadManager().downloadDataFromCore(intfCodeFromDB, bankId, downloadId); 
```

这是我见过的最奇怪的方法调用，具有这样的签名。

```
public String downloadDataFromCore(String intfcode, String bankId,
                            String downloadId) 
```

接下来，来回答你的问题。由于您想同时记录错误，然后出于某种原因再次抛出它，您需要`try-catch`在方法中包含它。否则，它不是必需的，因为该方法已经具有`throws`抛出异常的子句。

# php - 数据映射器依赖项

> ID：15172805
> 
> 赞同：2
> 
> 时间：2013-03-02T09:18:59.807
> 
> 标签：php, zend-framework, dependencies, datamapper

我有一个快速的问题。我正在使用 Zend Framework 1，并且正在使用 Data Mapper。这是我的代码：

```
<?php

// application/model/Pos.php
class Application_Model_Pos extends Zend_Db_Table_Abstract
{
    protected $_name = 'pos';
}

// application/model/MapperAbstract.php
abstract class Application_Model_MapperAbstract
{
    private $_dbTable;

    public function __construct(Zend_Db_Table_Abstract $dbTable)
    {
        $this->_dbTable = $dbTable;
    }

    public function findById($id)
    {
        $select = $this->_dbTable()->select()->where('id = ?', $id)->limit(1);
        $row = $this->_dbTable()->fetchAll($select)->toArray();

        if(!empty($row))
        {
            $this->_createEntity($row);
        }
    }

    protected function _createEntity(array $row);
}

// application/model/PosMapper.php
class Application_Model_PosMapper extends Application_Model_MapperAbstract
{
    public function __construct()
    {
        parent::__construct(new Application_Model_Pos());
    }

    protected function _createEntity(array $row)
    {
       return new Sb_Pos($row['name']);
    }

// application/library/Sb/Pos.php
class Sb_Pos
{
    public function __construct($name)
    {
        $this->_name = $name;
    }
}

?> 
```

有了这段代码，我应该在哪里处理表依赖关系？一个映射器应该知道另一个映射器吗？我需要服务层吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:43:22.973

你好，很好的问题。我最近在 MidwestPHP 2013 上做了一个关于这个确切主题的演讲 - 幻灯片在[这里](http://www.slideshare.net/aaronsaray/midwest-php-2013)（好的 - 对自我宣传感到抱歉！）

基本上，对您的问题的简短回答是，我认为需要一个服务层。当使用具有多种填充和映射方式的对象时，该服务将所有映射器绘制在一起。请记住，映射器可以填充所有或部分数据对象......但它不能“跳转”数据源。因此，如果您的特定对象需要多个数据源来获取其数据，则必须将该对象从映射器传递到映射器。

另一种选择——假设你只是在这里使用 ZF 中的数据库——将获取基本数据库连接，忽略你的表数据访问对象依赖关系，并构建一个复杂的连接来检索所有数据。有些人会不同意这一点 - 但这是一个非常滑的斜坡：你什么时候开始忽略这些单独的表并开始组合你的 sql（为了性能）。希望这可以帮助！

# c++ - 这是模板专业化吗？

> ID：15172806
> 
> 赞同：1
> 
> 时间：2013-03-02T09:19:11.760
> 
> 标签：c++, templates

```
template <int parameter> class MyClass 
```

以上是模板专业化吗？我不这么认为，但我不确定，我不知道模板可以将参数作为函数接收。它们的参数存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:24:07.553

模板参数不一定需要是类型名称：它们也可以是数字。例如，采用数组大小[`std::array`](http://en.cppreference.com/w/cpp/container/array)​​的类型参数。`size_t`

在您的情况下，类模板采用 type 的参数`int`，这完全可以。以下是如何使用此类参数的示例：

```
template <int param> struct MyClass {
    int array[param]; // param is a compile-time constant.
};
int main() {
    MyClass<5> m;
    m.array[3] = 8; // indexes 0..4 are allowed.
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:21:42.593

它们的参数存储在它们的类型信息中。

不，这不是模板专业化。看看这个：

```
template <int, int> class MyClass;         // <-- primary template
template <int>      class MyClass<int, 4>; // <-- partial specialization
template <>         class MyClass<5, 4>;   // <-- specialization 
```

# apache-flex - Flex Mate - 将具有 id 属性的对象发送到服务器

> ID：15172819
> 
> 赞同：0
> 
> 时间：2013-03-02T09:20:18.470
> 
> 标签：apache-flex, amf, mate

有没有办法使用绑定到另一个值的 id 属性的 ObjectBuilder 创建对象？

由于保留了“id”，因此以下内容不起作用：

```
<ObjectBuilder generator="{Object}" cache="none">
    <Properties id="{event.list}" />
</ObjectBuilder> 
```

由于 event.list 应该绑定，因此以下内容也不起作用：

```
<RemoteObjectInvoker instance="{jobService}" method="DeleteJob"
    arguments="{{id:event.list}}"> 
```

有没有其他方法可以将“id”发送到服务器 API？

澄清一下：这段代码在映射文件的 EventHandler 中：

```
<EventHandlers type="{JobEvent.DELETE}">
    <ObjectBuilder .../>
    <RemoteObjectInvoker instance="{jobService}" method="DeleteJob" arguments="{{id:event.list}}">
        <resultHandlers>
        ...
        </resultHandlers>
    </RemoteObjectInvoker>
</EventHandlers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:20:10.160

我的记忆是 arguments 参数正在寻找一个数组。你有没有尝试过

论据="{[argument1]}"

当我更多地使用 Mate 时，我会使用带有 id 参数的自定义事件（你就是）。从它的编写方式来看，我假设事件的列表参数实际上是 id，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:08:50.677

查看第一个 ObjectBuilder，这是在预初始化时调用的，还是您为 id 引用的事件是什么？

在 RemoteObjectInvoker 上，这是地图中一系列处理程序的一部分，还是触发地图应捕获的事件？

# javascript - JavaScript 只工作一次

> ID：15172823
> 
> 赞同：2
> 
> 时间：2013-03-02T09:20:25.617
> 
> 标签：javascript

我有以下脚本。它在用户单击搜索按钮时起作用，但它只起作用一次。请指导我如何使其获得更多点击。谢谢，

```
 <form action="" method="get" id="searchform">
   <input name="q" type="text" id="search" size="32" maxlength="128" class="txt">
   <input type="button" id="hit" value="Search"  class="btn">
 </form>

<script type="text/javascript">
  var nexturl ="";
  var lastid ="";
  var param;
  $(document).ready(function () {
    $("#hit").on("click", function myFunction() {
      param = $('#search').val();
      alert("I am an alert box!");
      if (param != "") {
        $("#status").show();
        var u = 'https://graph.facebook.com/search/?callback=&limit=100&q='+param;
        getResults(u);
      }

      $("#more").click(function () { 
        $("#status").show();
        $("#more").hide();  
        pageTracker._trackPageview('/?q=/more');
        var u = nexturl;
        getResults(u);
      });
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:23:15.213

我知道这已经被问过很多次了，但这里是：

```
$(document).on("click", "#hit", function() {
  ...
}); 
```

您需要让事件冒泡到文档中，以便对 DOM 的更改不会消除您的事件处理。

这是在[jsFiddle](http://jsfiddle.net/amullins/KzmN4/)中。让我知道你看到了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:33:36.367

如果您实际上并没有提交表单而只是运行 JavaScript，则应该将其作为表单上的 onsubmit 运行，而不是像这样：

```
<form id="searchform" onsubmit='return submitForm()'>
  <input name="q" type="text" id="search" size="32" maxlength="128" class="txt"  >
  <input type="button" id="hit" value="Search"  class="btn">
</form>

<script type="text/javascript">
  var nexturl ="";

  function submitForm(){
    var lastid ="";
    var param = $('#search').val();

    alert("I am an alert box!");
    if (param != "") {
      $("#status").show();
      var u = 'https://graph.facebook.com/search/?callback=&limit=100&q='+param;
      getResults(u);
    }

    //Prevents the form submitting
    return false;
  }

  $("#more").click(function () { 
    $("#status").show();
    $("#more").hide();  
    pageTracker._trackPageview('/?q=/more');
    var u = nexturl;
    getResults(u);
  });
</script> 
```

更多按钮总是存在还是动态添加/删除？如果是这样，您可能需要执行类似的操作

```
$("body").on("click", "#more", function () { 
  $("#status").show();
  $("#more").hide();  
  pageTracker._trackPageview('/?q=/more');
  var u = nexturl;
  getResults(u);
}); 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:41:56.267

它也适用于第二次搜索。第二次搜索的项目只是被附加到搜索结果列表中，也许这就是你看不到它们的原因。试试 $("#data").empty(); 在开始附加新搜索查询的结果之前。

# python - Heroku Python 应用程序 - CSS 仅在 iPhone 上不加载

> ID：15172826
> 
> 赞同：0
> 
> 时间：2013-03-02T09:21:18.977
> 
> 标签：python, css, heroku, responsive-design, flask

第一个问题发布到 Stack Overflow，但在这里花了很多时间阅读答案:)。

我正在创建一个 Heroku Python 应用程序，并在我的 css 中使用响应式设计媒体查询。我将我的应用程序部署到 Heroku 并访问*myherokuapp* .herokuapp.com。网站在笔记本电脑浏览器上看起来不错……响应式设计元素也能正常工作。然而，在我的 iPhone 上访问相同的 url 似乎显示了一个页面，其中我的一个 css 文件（媒体查询）正在加载，但另一个（主 css 文件）没有。

Heroku 是否缓存 css 文件？我在某处读到，如果您有 Django 应用程序，您必须在其他地方托管静态文件，但不确定这是否适用于我。我也在使用 Flask 函数`<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">`。这有什么关系吗？

编辑：有谁知道如何在移动设备上运行相当于 Firefox/Google Inspector 的功能？这真的可以帮助我弄清楚哪些文件在那里，哪些不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:30:01.030

发现错误。这是一个非常非常模糊的文本缩进 css 属性渲染问题，似乎只影响 iPhone 5。

此外，如果您需要调试适用于 iPhone 的 Google Chrome，如果您不从多任务菜单中删除应用程序（双击主页按钮时出现的栏），清除缓存将无济于事。这确实花了我半个小时才弄清楚。

# java - 无法将 JTextField 添加到 JFrame

> ID：15172831
> 
> 赞同：8
> 
> 时间：2013-03-02T09:21:43.077
> 
> 标签：java, swing, jframe, jtextfield, layout-manager

我无法添加`JTextField`到`JFrame`. 我的`JFrame`包含 a`JLabel`和 a `JTextField`。首先，我添加了`JLabel`，它正在工作。这是代码。

```
private static void createandshowGUI()
     {

    JFrame frame =new JFrame("HelloSwing");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setBackground(Color.red);
    frame.setSize(200,200);

    JLabel label=new JLabel("New To Java!!");
    frame.getContentPane().add(label);
    frame.setVisible(true);
}
public static void main(String[] args) {
    createandshowGUI();}   //and it shows the output like below . 
```

![具有 JLabel 的框架](../Images/c0fb011c581ac16713f0f034d7e64e94.png)

然后我添加了 JTextField 。

```
 JLabel label=new JLabel("New To Java!!");
    frame.getContentPane().add(label);

   JTextField jtf=new JTextField();
   frame.getContentPane().add(jtf);

    frame.setVisible(true); 
```

但随后它显示这样的输出。

![具有 JLabel 和 JTextField 的框架  ](../Images/0a2ef42b606c481dccad1feeb00464ee.png)

请有人帮我解决这个问题。我可以向 JFrame 添加多个组件吗？由于我是 Java 新手，我在框架、ContentPane 和布局之间感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T09:25:26.043

实际上，您已成功添加`JTextField`. 您遇到的问题源于布局管理器将其延伸到整个框架。

的内容窗格默认`JFrame`使用`BorderLayout`管理器。（请参阅[*如何使用 BorderLayout*](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)）

在我的应用程序中，a 总是最终使用[**MigLayout**](http://www.miglayout.com/whitepaper.html)管理器，但首先您可能想熟悉一下布局管理器。（请参阅[*布局管理器的视觉指南*](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:25:49.230

默认情况下，您`ContentPane`有一个[`BorderLayout`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/BorderLayout.html)，它只接受一个元素（在默认位置 - 中心）。添加第二个元素 (the `JTextField`) 后，它替换了最后一个元素 (the `JLabel`)。

当您`Container`使用 single-argument将元素添加到 a 时`add`，您并没有指定您想要它们的位置，因此布局管理器会随意选择一个位置。OTOH 如果您指定约束（使用[重载的 add](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Container.html#add%28java.awt.Component,%20java.lang.Object%29)），那么您可以更好地控制元素的放置位置。检查每个布局管理器的文档以了解它们是如何工作的以及它支持哪些约束。

对于您当前的情况，您可以使用中间体`JPanel`（[`FlowLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)默认情况下`LayoutManager`- 对于仍在学习的人来说，这是最简单的恕我直言），而不是直接将元素添加到内容窗格，或者只是将其布局更改为其他内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T10:17:23.007

A`JFrame`只能有一个组件（除非您使用它有一个`BorderLayout`）。解决方案是使用`JPanel`. 您将对象添加到 JPanel，然后`JPanel`将`JFrame`. 你也需要添加`import javax.swing.JPanel;`。你可以这样做：

```
private static void createandshowGUI()
{
    JFrame frame =new JFrame("HelloSwing");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setBackground(Color.red);
    frame.setSize(200,200);

    JPanel panel = new JPanel(); //Create a JPanel

    JLabel label=new JLabel("New To Java!!");
    panel.add(label); // Add the label to the panel

    JTextField jtf = new JTextField();
    panel.add(jtf); // Add the JTextField to the panel

    frame.getContentPane().add(panel); // Add the panel to the JFrame
    frame.setVisible(true);
}
public static void main(String[] args) {
    createandshowGUI();} 
```

这应该有效。

# machine-learning - 使用 Weka 进行参数优化和属性选择

> ID：15172833
> 
> 赞同：0
> 
> 时间：2013-03-02T09:21:47.630
> 
> 标签：machine-learning, classification, weka, text-mining

我想`-C`在 J48 中设置参数并运行三个存储在哈希表中的特征选择算法。我想比较准确性、真阳性、真阴性、F1 等三者的性能。但是当我运行所有特征选择算法时，它们返回给我相同的输出......我做错了什么吗？

```
 Hashtable<String, ASEvaluation> search=new Hashtable<String, ASEvaluation>();

    Instances training_data = new Instances(new BufferedReader(
            new FileReader("test.arff")));
    training_data.setClassIndex(training_data.numAttributes() - 1);
    topAttributes = new int[training_data.numAttributes()];

    AttributeSelectedClassifier classifier = new AttributeSelectedClassifier();
 AttributeSelection attsel = new AttributeSelection();

    search.put("Infogain", new InfoGainAttributeEval());
    search.put("SymmetricalUncertAttribute",new SymmetricalUncertAttributeEval());
    search.put("Chisquared",new ChiSquaredAttributeEval());

    for(String key : search.keySet()) {

        try{
            Ranker attribute_search = new Ranker();
                J48 base = new J48();
            CVParameterSelection ps = new CVParameterSelection();
                ps.setClassifier(base); 
                ps.setNumFolds(5);
                ps.addCVParameter("C 0.1 0.5 5");
                ps.buildClassifier(training_data);

                System.out.println("---------------- " + search.get(key).toString() + " ----------------");

                classifier.setClassifier(ps);                       
            classifier.setEvaluator(search.get(key));
            classifier.setSearch(attribute_search);

                  attsel.setEvaluator(search.get(key));
                  attsel.setSearch(attribute_search);
                  attsel.setInputFormat(training_data);

            Evaluation evaluation = new Evaluation(training_data);
            evaluation.crossValidateModel(ps, training_data, 10, new Random(1));
            System.out.println("\nevaluation ->");          
            System.out.println(evaluation.toSummaryString());
            System.out.println("MAE: " + evaluation.meanAbsoluteError());

        } catch(Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T22:00:10.017

我不确定你是怎么做的。但是您是否尝试过使用网格搜索？

# ruby-on-rails - 如何将引导 css 应用于 rails 中的 simple_form_for 表单？

> ID：15172836
> 
> 赞同：0
> 
> 时间：2013-03-02T09:22:09.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我有一个这样的 simple_form

```
<%= simple_form_for(@name) do |f| %>
  <%= f.error_notification %>
  <div class="form-inputs">
    <%= f.input :fname %>
    <%= f.input :lname  %>
    <%= f.input :body %>        
  </div>

  <%= f.button :submit, 'submit' %>
<% end %> 
```

我想使标签水平并对其应用其他引导代码，但我无法弄清楚如何做到这一点，因为 simple_form_for 没有像 form_for 这样的任何 div。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:06:47.993

它在 gem 网站上得到了很好的解释：[https ://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)

1) 通过运行以下命令为 simpleform 生成 twitter 引导配置：

```
rails generate simple_form:install --bootstrap 
```

2）按照示例应用程序中的示例：[https ://github.com/rafaelfranca/simple_form-b​​ootstrap/blob/master/app/views/articles/_form.html.erb](https://github.com/rafaelfranca/simple_form-bootstrap/blob/master/app/views/articles/_form.html.erb)

```
<%= simple_form_for @name, :html => { :class => 'form-horizontal' } do |f| %>

  <%- if f.error_notification %>
    <div class="alert alert-error fade in">
      <a class="close" data-dismiss="alert" href="#">&times;</a>
      <%= f.error_notification %>
    </div>
  <%- end %>

  <div class="form-inputs">
    <%= f.input :fname %>
    <%= f.input :lname  %>
    <%= f.input :body %>        
  </div>

<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:05:37.137

来自[simple_form 文档](https://github.com/plataformatec/simple_form#twitter-bootstrap)

> SimpleForm 可以轻松集成到 Twitter Bootstrap。为此，您必须使用安装生成器中的引导选项，如下所示：
> 
> rails 生成 simple_form:install --bootstrap
> 
> 您必须确保在您的应用程序中添加了 Twitter Bootstrap 资产的副本。
> 
> 有关更多信息，请参阅生成器输出、我们的示例应用程序代码和实时示例应用程序。
> 
> **注意：** SimpleForm 集成需要 Twitter Bootstrap 2.0 或更高版本。

# vb.net - VB 文本框只接受数字概率

> ID：15172839
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:22:26.920
> 
> 标签：vb.net, winforms

```
Private Sub TextBox1_textChange(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

    Dim intValue As Integer
    If Not Integer.TryParse(TextBox1.Text, intValue) OrElse intValue < 1 OrElse intValue > 10 Then
        TextBox1.Text = ""
    Else
        MsgBox(intValue)

    End If

End Sub 
```

这是我的代码，文本框已经只接受数字，当我按下`"1"`时`textbox1.text = "1"`，但是当我按下 AGAIN 时，`"1"`第一个`"1"`被覆盖..与我按下`"2"`textbox1.text 时相同。文本现在只等于`"2"`..

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:30:13.297

更好地处理`KeyPress`事件以实现所需的功能

```
Private Sub DigitTextBox_KeyPress(sender As Object, e As KeyPressEventArgs)
    If Not Char.IsDigit(e.KeyChar) Then
        e.Handled = True
    End If
    'Just Digits
    If e.KeyChar = ChrW(8) Then
        e.Handled = False
    End If
    'Allow Backspace
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:51:39.257

就像代码正在检查文本框的值是否为 1-10 一样。如果是这样，这将起作用

```
 Dim intValue As Integer
    If Integer.TryParse(TextBox1.Text, intValue) AndAlso intValue > 0 AndAlso intValue < 11 Then
        Debug.WriteLine(intValue) 'good value
    Else
        TextBox1.Text = "" 'bad value
    End If 
```

# php - 如何在超链接codeigniter中应用“活动”类

> ID：15172841
> 
> 赞同：1
> 
> 时间：2013-03-02T09:22:53.417
> 
> 标签：php, jquery, css, ajax, codeigniter

我将我的模板分为三个部分，包括页眉、页脚和内容。主菜单链接在头文件中...所以我想将 CSS 类“活动”应用于选中的超链接...我也编写了 jquery 代码，即：

```
<script type="text/javascript">

  $('#emp').click(function() {
    $(this).closest('li').addClass('active');
  });

</script> 
```

这段代码的问题是每当我单击链接时，它都会附加 CSS 类，然后将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:28:17.897

> 每当我单击链接时，它都会附加 css 类，然后将其删除...

`addClass`没有删除类，看来您的页面已重新加载。阻止事件的默认动作：

```
$('#emp').click(function(eventObject) {
    eventObject.preventDefault();
    $(this).closest('li').addClass('active');
}); 
```

更新：

当你点击你的`<a>`元素时，页面被重定向并且你添加的类被删除，如果你想使用 JavaScript 添加类，你可以编码：

```
// relative
var path = document.location.pathname;
// absolute
var path = document.location.href;

$('#myMenu a').filter(function(){
    return this.href === path;
}).closest('li').addClass('active');

// Or:
$('#myMenu li').has('a[href='+path+']').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T09:30:57.780

我用这个方法来解决这类问题

```
<?php $self= $_SERVER['PHP_SELF']; ?>

<ul class="dropdown dropdown-horizontal">

     <li <?php
     if (eregi("index", $self))
        echo "class=\"selected\"";
     ?>><a href="index" >HOME</a>
    </li>

    <li><img  style="height:28px" src="images/newsletter-divider.gif" alt="Divider"/></li>

     <li
     <?php
     if (eregi("logout", $self))
        echo "class=\"selected\"";
     ?>
     ><a href="logout">Logout</a>
    </li>
</ul> 
```

# android - 在自定义布局中回收视图

> ID：15172849
> 
> 赞同：3
> 
> 时间：2013-03-02T09:23:31.310
> 
> 标签：android, android-layout

我正在实现自定义布局。这是一个异构网格，看起来像下面的网格，除了瓷砖将是带有一些文本的图像。此外，它具有动画效果 - 每次更改基础数据（添加、删除、重新排序项目）时，都会有一个动画，每个图块都会移动到它的新位置。这非常有效。

整件事都在一个`ScrollView`. 当用户启动应用程序时，会出现一些磁贴（最多 20 个）。当他到达卷轴的底部时，会加载新的图块。瓷砖是`RelativeLayouts`。

**我的问题涉及观点的回收。**接受多个子视图的典型布局，例如`ListView`或`GridView`具有回收机制。在滚动时，当视图不可见时，它会被回收，并在用户再次看到它时返回。

我需要实现这样的行为吗？如果我不这样做会发生什么？是否有可能实现它，因为当新数据到达时，我可能必须将子视图（以及那些不会在布局的可见部分中的子视图）动画到它们的新位置。

或者也许我应该在位图位于可见区域之外时回收它们？这可能是我可以达到 OutOfMemory 的地方，不是吗？

![异构网格](../Images/be6f0e278351ac919f789a0c322dffe0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:39:41.440

我肯定会推荐回收，特别是如果物品的数量实际上是无限的。

除了内存问题，就像你说的，很大程度上取决于位图的处理，当你加载更多的项目时，不回收会导致更多的抖动机会。这是因为需要创建更多视图，而不是回收。

鉴于您使用的是自定义布局，实现视图回收应该非常简单，只需保留视图缓存并遵循类似于 Android 的适配器类的模式（即`getView(int position, View convertView ..)`。当您需要从屏幕外为视图设置动画时，您将`getView()`使用一个未使用的视图并更新它以包含您的模型数据（如果您没有为此使用 MVC，我会推荐它）。

# php - twitter bootstrap 是否有任何解耦的 PHP 绑定或 PHP 实现？

> ID：15172860
> 
> 赞同：2
> 
> 时间：2013-03-02T09:24:34.230
> 
> 标签：php, twitter-bootstrap, implementation

我只是想知道在 PHP 中是否有针对 twitter 引导框架的**解耦实现？**我在 laravel [http://bootstrapper.aws.af.cm/components中找到了一个边界](http://bootstrapper.aws.af.cm/components)

但这与 laravel 集成得太紧密了。

在我开始构建自己的之前，是否有任何我现在通过 github / google 搜索缺少的库？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:49:11.820

据我所知，没有一个提供解耦方法和与 Twitter Bootstrap 的集成。我目前在 Bootstrap 上开发并使用 PHP 模板继承（[http://phpti.com/](http://phpti.com/)）作为我的模板引擎。您可以从那里开始，然后寻找您需要的其他 CMS 组件。

# android - 关闭 Sqlite 安卓

> ID：15172861
> 
> 赞同：0
> 
> 时间：2013-03-02T09:24:47.570
> 
> 标签：android, sqlite

我正在尝试关闭数据库，但它给了我错误。

```
private SQLiteDatabase sq;

//cardDatabase name of my class.

public void close_DB(){

CardDatabase data_open=new CardDatabase(MyContext);

sq.close();

data_open.close_DB();

} 
```

> 03-02 09:13:03.841: D/java.lang.NullPointerException(2447): java.lang.NullPointerException 03-02 09:13:03.841: D/java.lang.NullPointerException(2447): java.lang.NullPointerException 03-02 09:13:03.841: D/java.lang.NullPointerException(2447): 在 com.livecards.beta.CardDatabase.close_DB(CardDatabase.java:52)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:28:22.480

可能您的`sq`变量为空。

您可以在关闭数据库之前添加空检查。

```
if(sq != null)
   sq.close(); 
```

# objective-c - 为什么需要声明 ivar 和 property 同名？

> ID：15172863
> 
> 赞同：5
> 
> 时间：2013-03-02T09:25:13.950
> 
> 标签：objective-c, ivar

在 Xcode 4.4 之前的大多数项目中，我意识到开发人员同时声明了一个 ivar 和一个具有相同名称的属性。例子

```
@interface SecondViewController : UIViewController
{
     NSString *string;
}

@property (strong, retain) NSString *string; 
```

所以我不知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T09:30:16.183

只是风格问题，习惯于过去编译器的行为。

现在在较新的编译器中，这不是必需的。一旦您创建了一个属性，就会在后台创建一个 ivar 并对其进行合成。

编译器使用别名作为 _propertyName 进行综合，即使您可以选择更改此默认行为。

```
@interface AppDelegate : NSObject <NSApplicationDelegate>{
    NSString *bigString;
}
@property(strong)NSString *smallString;
@end 
```

* * *

```
@implementation AppDelegate
@synthesize smallString=bigString;
-(void)awakeFromNib{
    self.smallString=@"hello";
    NSLog(@"%@",self.smallString);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:29:16.990

我不能为别人说话，但我不使用相同的名字。如果我确实声明了一个实例变量，它带有一个前导下划线，所以如果我指的是实例变量或 setter/getter 方法，这很明显。

使用 Xcode 4.4+ 你不需要声明实例变量或调用`@synthesize`，编译器会自动创建一个实例变量，带有前导下划线，并为你提供 setter/getter 方法。

但是我不认为这种机制是一个很好的主意，因为它鼓励开发人员公开不应公开的类的属性。

例如，这是*从 iOS 6 Development 开始*的：

```
@interface BIDViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton *button;
- (IBAction)buttonPressed:(UIButton *)sender;
@end 
```

现在，虽然我知道您不想一次用太多概念混淆初学者，但您通过`UIButton`向该视图控制器的用户公开对象和操作方法立即违反了面向对象封装，并且两者都不应该公开.

例如，如果使用类这样做会发生什么：

```
BIDViewController *vc = ...;
vc.button = nil; 
```

或者

```
vc.buttonPressed(mySegmentedControl); 
```

所有的地狱都崩溃了。现在，虽然有 1000 种方法可以破坏程序，但我们无法防御所有这些方法，但我们不想制作一个已经很弱的系统（Objective-C 在定义谁可以调用和不能调用一个方面提供的很少你的方法）较弱。

上面的实现最好使用私有实例变量和方法来完成，这两者都被 Interface Builder 尊重：

```
@implementation BIDViewController ()
{
    IBOutlet UIButton *_button;
}
- (IBAction)_buttonPressed:(UIButton *)sender;

@end 
```

并且任何使用类都将很难打破该模型。

但当然，这对于开发人员来说需要更多的思考和打字，因此 Apple 推出了新功能，以便他们可以在更短的时间内完成他们想要完成的工作（当您简单地将插座拖到头文件时，打字很少，两者都为您提供了声明和实现框架）。

# button - Google Maps API v3 自定义按钮

> ID：15172864
> 
> 赞同：1
> 
> 时间：2013-03-02T09:25:17.577
> 
> 标签：button, google-maps-api-3

在查看了以下问题和答案（[从自定义按钮启动多边形绘图](https://stackoverflow.com/questions/8187758/initiate-polygon-drawing-from-custom-button?rq=1)）后，尝试代码并没有得到任何结果，我不确定我做错了什么。我的代码如下：

```
//button function
$(".btn > .icon-circle-blank").click(function(event){
    //stub for gmap radius drawing
    drawingManager.setDrawingMode(google.maps.drawing.OverlayType.CIRCLE);
}) 
```

我能够初始化绘图工具

```
 var drawingManager = new google.maps.drawing.DrawingManager({
      drawingControl: true,
      drawingControlOptions: {
        drawingModes: [
          google.maps.drawing.OverlayType.CIRCLE,
          google.maps.drawing.OverlayType.POLYGON,
          google.maps.drawing.OverlayType.RECTANGLE
        ]
      }
    }); 
```

通常我将drawingControl设置为false，并且我的自定义按钮不在地图上。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:45:39.767

您的点击功能是否被调用？看起来它在单击图标而不是按钮时被设置为触发。

**更新**：`drawingManager`超出您的`click`职能范围。由于这些事件处理程序是页面初始化的一部分，我建议将它们移动到`initialize`函数中。

# javascript - 使用粘性页脚的内容的 100% 高度

> ID：15172866
> 
> 赞同：0
> 
> 时间：2013-03-02T09:25:23.303
> 
> 标签：javascript, jquery, css

## 编辑

我在这里更新了一个[小提琴](http://jsfiddle.net/Sydney_o9/kqhyr/1/)供人们尝试。@Aspiring Aqib 提出了一个使用 javascript 的工作解决方案。（仅限 CSS）解决方案仍然非常受欢迎。

## 原帖

我设法使用以下[描述创建了一个](http://ryanfait.com/sticky-footer/)**粘性页脚**。页脚完美运行。我在创建一个恰好位于页眉和页脚之间的内容 div 时遇到问题。`.content`

* * *

> *到目前为止我有这个*（`.content`黄色）：

![在此处输入图像描述](../Images/dcddb82ba129d55e0e491deb839992fb.png)

> *而且我无法做到这一点*（`.content`正好包含在页眉和页脚之间）：

![在此处输入图像描述](../Images/14d2205ab11d78563c7552e1df94abab.png)

我已经生成了以下[小提琴](http://jsfiddle.net/Sydney_o9/kqhyr/1/)。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:34:29.633

`content`是那个 div 的类名。从div 中删除`min-height`和`height`属性。`.wrapper`并使用：

```
.content {
    min-height:85%; // <--- 85% will be better.
    height:auto !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:35:13.600

您忘记设置*内容*div 的高度。只需添加：

```
.content {
  height: 85%
} 
```

有小提琴：[http ://cssdesk.com/xNFEB](http://cssdesk.com/xNFEB)

# javascript - 如何销毁数据表？

> ID：15172873
> 
> 赞同：22
> 
> 时间：2013-03-02T09:25:53.597
> 
> 标签：javascript, jquery, datatables

我正在使用数据表并使用[bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)[来](http://www.datatables.net/)选择数据将显示在数据表中的范围。

它工作正常。

问题是当我在 daterangepicker 中选择一个新范围时，它为我提供了一个回调函数，我可以在其中做我的事情。在那个回调函数中，我再次调用 Datatables。但是既然表已经被创建了，我怎么能破坏以前的表并在它的位置显示一个新表呢？

请帮忙。我被困住了。:(

编辑：我有以下代码：

```
$(element).daterangepicker({options},
function (startDate, endDate) { //This is the callback function that will get called each time
$('#feedback-datatable').dataTable({
                        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                        "sPaginationType": "bootstrap",
                        "oLanguage": {
                            "sLengthMenu": "_MENU_ records per page",
                            "oPaginate": {
                                "sPrevious": "Prev",
                                "sNext": "Next"
                            }
                        },
                        "aoColumnDefs": [{
                            'bSortable': false,
                            'aTargets': [2,4]
                        }],
                        "bAutoWidth": false,
                        "aoColumns": [
                                      {"sWidth": "20%"},
                                      {"sWidth": "15%"},
                                      {"sWidth": "45%"},
                                      {"sWidth": "15%"},
                                      {"sWidth": "5%"}
                                      ]
                    });
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-02T10:09:11.337

要完全删除和移除带有 DOM 元素的数据表对象，您需要：

```
//Delete the datable object first
if(oTable != null)oTable.fnDestroy();
//Remove all the DOM elements
$('#feedback-datatable').empty(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-22T15:17:21.973

只需将此参数添加到您的声明中：

```
“bDestroy”：是的，
```

然后，每当您想“重新创建”表时，它都不会出错

PS您可以创建一个函数来获取所需的参数，然后在运行时使用不同的选项重新初始化表。

例如，我在我的程序中使用这个，如果它可以帮助你适应你的需要

```
initDataTable($('#tbl1'), 2, 'asc', 假, 假, 25, 假, 假, 假, '风景', rptHdr); /* 初始化表 */
```

```
/*------------------------ 数据表初始化 ------------------------ --- */
/*
 * @$table 被初始化的表id
 * @sortCol 初始排序的列号
 * @sorOrder 上升 (asc) 或下降 (desc)
 * @enFilter 布尔值是否启用过滤器选项
 * @enPaginate 布尔值是否启用过滤器选项
 * @dplyLength 启用分页时每页包含的记录数
 * @enInfo 布尔值是否显示记录信息
 * @autoWidth 布尔值是否启用表格自动宽度
 * @enTblTools 布尔值是否启用表格工具插件
 * @pdfOrientation pdf 文档的页面方向（横向、纵向）（需要 enTblTools == 已启用）
 * @fileName 输出文件命名（需要 enTblTools == 启用）

  /*------------------------------------------------ ------------------------------*/  
函数 initDataTable($table, sortCol, sortOrder, enFilter, enPagnate, dplyLength, enInfo, autoWidth, enTblTools, pdfOrientation, fileName) {

    var dom = (enTblTools) ？'T' : '';

    var oTable = $table.dataTable({
        “命令”： [
            [sortCol，排序顺序]
        ],
        “bDestroy”：是的，
        “bProcessing”：是的，
        “dom”：dom，
        “bFilter”：enFilter，
        “bSort”：是的，
        “bSortClasses”：是的，
        “bPaginate”：enPaginate，
        "sPaginationType": "full_numbers",
        “iDisplayLength”：dplyLength，
        “bInfo”：enInfo，
        “bAutoWidth”：自动宽度，
        “表格工具”：{
            “按钮”：[{
                    "sExtends": "复制",
                    "sButtonText": "复制",
                    “bHeader”：是的，
                    “bFooter”：是的，
                    “fnComplete”：函数（nButton，oConfig，oFlash，sFlash）{
                        $().shownotify('showNotify', {
                            text: '表格复制到剪贴板（无格式）',
                            粘性：假，
                            位置：'中间中心'，
                            类型：'成功'，
                            关闭文本：''
                        });
                    }
                }, {
                    "sExtends": "csv",
                    "sButtonText": "Excel (CSV)",
                    "sToolTip": "另存为 CSV 文件（无格式）",
                    “bHeader”：是的，
                    “bFooter”：是的，
                    “sTitle”：文件名，
                    "sFileName": 文件名 + ".csv",
                    “fnComplete”：函数（nButton，oConfig，oFlash，sFlash）{
                        $().shownotify('showNotify', {
                            text: 'CSV 文件保存在选定的位置。',
                            粘性：假，
                            位置：'中间中心'，
                            类型：'成功'，
                            关闭文本：''
                        });
                    }
                }, {
                    "sExtends": "pdf",
                    “sPdfOrientation”：pdf方向，
                    “bFooter”：是的，
                    “sTitle”：文件名，
                    "sFileName": 文件名 + ".pdf",
                    “fnComplete”：函数（nButton，oConfig，oFlash，sFlash）{
                        $().shownotify('showNotify', {
                            text: '保存在选定位置的 PDF 文件。',
                            粘性：假，
                            位置：'中间中心'，
                            类型：'成功'，
                            关闭文本：''
                        });
                    }
                },
                {
                   "sExtends": "其他",
                   “bShowAll”：是的，
                   “sMessage”：文件名，
                   "sInfo": "完成后请按escape"
                }
            ]
        }
        /*"fnDrawCallback": function(oSettings) {alert('DataTables 已重绘表格');}*/
    });
    /* 如果是 IE 则避免设置粘性标头 */
    if (!navigator.userAgent.match(/msie/i) && enPaginate == false) {
        新 $.fn.dataTable.FixedHeader(oTable);
    }

    返回表
}

```

伊万。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-26T21:38:46.947

我知道这是一个老问题，但是因为我遇到了类似的问题并解决了它。

以下应该可以解决问题（评论来自[DataTable API doc](http://legacy.datatables.net/api)）。

```
// Quickly and simply clear a table
$('#feedback-datatable').dataTable().fnClearTable();

// Restore the table to it's original state in the DOM by removing all of DataTables enhancements, alterations to the DOM structure of the table and event listeners
$('#feedback-datatable').dataTable().fnDestroy(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-01T14:28:53.007

对于 DataTables 1.10，调用是：

```
// Destroy dataTable
$('#feedback-datatable').DataTable.destroy();

// Remove DOM elements
$('#feedback-datatable').empty(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-29T06:23:06.063

**对于谷歌搜索者**

`Datatable`在加载新数据并通过这样做重新初始化 Datatable 之前，我几乎没有设法销毁所有以前的数据，

```
if ($.fn.DataTable.isDataTable("#myTbl")) {
      ("#myTbl").DataTable().destroy();
}
$('#myTbl tbody > tr').remove();

...

// Load table with new data and re-initialize Datatable 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-05T14:57:11.240

在 DataTables 1.10 及更高版本上，您可以使用`"destroy": true`

[在此处](https://datatables.net/reference/api/destroy())阅读更多详细信息

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-24T07:10:19.120

从[数据表](https://datatables.net/reference/api/destroy())

```
var table = $('#myTable').DataTable();
$('#tableDestroy').on( 'click', function () {
table.destroy();
}); 
```

从服务器重新加载完整的表描述，包括列：

```
var table = $('#myTable').DataTable();
$('#submit').on( 'click', function () {
    $.getJSON( 'newTable', null, function ( json ) {
        table.destroy();
        $('#myTable').empty(); // empty in case the columns change

        table = $('#myTable').DataTable( {
            columns: json.columns,
            data:    json.rows
        } );
    } );
}); 
```

希望它会有所帮助

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-06-17T09:51:43.260

```
$('#feedback-datatable').dataTable().fnDestroy(); 
```

这应该破坏数据表，然后你将不得不重新初始化数据表。

# java - Java - 如何使 JButton “取消选择”

> ID：15172874
> 
> 赞同：0
> 
> 时间：2013-03-02T09:26:04.970
> 
> 标签：java, swing, jbutton

当我制作一个 JFrame 时，JFrame 顶部的东西会自动“选中”。

JFrame/JDialog 顶部的所有内容都将被“选中”，例如 JButton、JTextField、...。如何在不使用鼠标单击其他区域的情况下取消选择（使用一些代码）它。

![这是JDialog](../Images/dfb590aaa7ad92778542acbd2eac4c9e.png)

jButton1 表示 JFrame 顶部的东西（我使用 Snagit 捕获它，但按钮自动“取消选择”）

请帮我。谢谢

![蓝色的 one jbutton 表示](../Images/227db54349f795e7c07ee3ff364dd091.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:47:27.043

在您使用`setVisible(true)`. 使用此行在 JFrame 上设置焦点请求：

`frame.requestFocus()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:38:18.303

`requestFocus`在您要在启动应用程序后选择的对象的主函数调用方法中。

# c# - 带有一些奇怪代码的 SqlConnection 和 TPL

> ID：15172884
> 
> 赞同：0
> 
> 时间：2013-03-02T09:26:58.590
> 
> 标签：c#, sql-server, ado.net, task-parallel-library

我必须将一些使用 ADO.NET 的现有代码转换为并行处理方案。原始代码使用静态连接对象和事务，因此需要进行一些相当大的重组。

作为概念证明，我一直在尝试使用任务并行库让一些简单的插入以稳定的方式工作。我发现我必须编写一些奇怪的代码才能做到这一点。首先，我的控制台应用程序中的 Main 方法：

```
class Program
{
    private static Db db1;
    private static Db db2;

    static void Main(string[] args)
    {
        db1 = new Db();
        db2 = new Db();

        Task task1 = Task.Factory.StartNew(() =>
           {
               db1.BeginTransaction("Transaction1");
               decimal p = AddNewProject(db1, "Project 1");
               AddNewTask(db1, p, "Task1");
           });

        Task task2 = Task.Factory.StartNew(() =>
            {
                db2.BeginTransaction("Transaction1");
                decimal p = AddNewProject(db2, "Project 2");
                AddNewTask(db2, p, "Task1");
            });

        db1.Dispose();
        db2.Dispose();

        Console.ReadLine();
    }

    static decimal AddNewProject(Db db, string name)
    {
        return db.InsertNewProject(name);
    }

    static void AddNewTask(Db db, decimal project, string name)
    {
        db.InsertNewTask(project, name);
    }
} 
```

重要的是，带有奇怪代码的 Db 类：

```
public class Db : IDisposable
{
    private SqlConnection connection;
    private String connString;
    private SqlTransaction transaction;

    public Db()
    {
        connString = ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString;
        this.connection = new SqlConnection();
        this.connection.StateChange += new StateChangeEventHandler(connection_StateChange);
        this.connection.ConnectionString = connString;
        this.connection.Open();
    }

    void connection_StateChange(object sender, StateChangeEventArgs e)
    {
        if (e.CurrentState != ConnectionState.Open)
        {
            this.connection.ConnectionString = this.connString;
            this.connection.Open();
        }
    }

    public void BeginTransaction(string vendorName)
    {
        while (this.connection.State != ConnectionState.Open)
        {
            Thread.Sleep(10);
        }

        this.transaction = this.connection.BeginTransaction(IsolationLevel.ReadUncommitted, vendorName);
    }

    public decimal InsertNewProject(string name)
    {
        SqlCommand command = new SqlCommand();
        command.Connection = this.connection;
        command.CommandType = CommandType.Text;

        if (this.connection.State != ConnectionState.Open)
        {
            this.connection.ConnectionString = this.connString;
            this.connection.Open();
        }

        command.CommandText = "INSERT INTO Project VALUES('" + name + "', 'true');SELECT SCOPE_IDENTITY();";
        command.Transaction = this.transaction;

        Object pk = command.ExecuteScalar();

        return (decimal)pk;
    }

    public int InsertNewTask(decimal project, string name)
    {
        SqlCommand command = new SqlCommand();
        command.Connection = this.connection;
        command.CommandType = CommandType.Text;

        if (this.connection.State != ConnectionState.Open)
        {
            this.connection.ConnectionString = this.connString;
            this.connection.Open();
        }

        command.CommandText = "INSERT INTO Task([TaskName], [Project], [Visible], [Estimate]) VALUES('" + name + "', '" + (int)project + "', 'true', 0);SELECT SCOPE_IDENTITY();";
        command.Transaction = this.transaction;

        Object pk = command.ExecuteScalar();
        this.transaction.Commit();
        //this.transaction.Rollback();
        return Convert.ToInt32((decimal)pk);
    }

    public void Dispose()
    {
        this.connection.Close();
        //this.transaction.Dispose();
        this.connection.Dispose();
    }
} 
```

完成这项工作所需的两个奇怪的位是：

1.  StateChange 处理程序（以及为什么我必须处理这个？！）
2.  BeginTransaction 方法，以及该类的方法中对连接的不断检查和打开

为什么连接不保持打开状态？曾经那么奇怪。这段代码让我很紧张，我并不急于将它放入 UAT（然后是生产）。

连接字符串是：

```
<connectionStrings>
    <add name="MyConn" connectionString="Data Source=PLAGUIS;Initial Catalog=TimeTracker;Pooling=false;MultipleActiveResultSets=True;Integrated Security=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我发现我必须关闭连接池。

如果有人可以解释使用连接和不同线程（任务）的最佳方式，我将非常感激。

# yii - CMultiFileUpload 在 CJuiDialog 小部件 Yii 中不起作用

> ID：15172886
> 
> 赞同：0
> 
> 时间：2013-03-02T09:27:22.360
> 
> 标签：yii, cjuidialog, cmultifileupload

我正在使用带有 ajaxlink 的 CJuiDialog 小部件用于弹出表单..效果很好..

但是现在我需要从该弹出表单上传多个文件..所以我使用 CMultiFileUpload 作为上传选项，但我的行为就像一个普通的单个文件按钮..请帮我解决这个问题..这是我的代码：

```
 <?php echo CHtml::ajaxLink(Yii::t('image','Upload'),array('gallery/create'),array(
    'success'=>'js:function(data){
    $("#gallery-form").dialog("open");
    document.getElementById("add_images").innerHTML=data;}'));
$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
            'id'=>'gallery-form',
            'options'=>array(
                'title'=>Yii::t('image','Upload'),
                'autoOpen'=>false,
                'model'=>'true',
                'width'=>'auto',
                'height'=>'auto',
            ),
            ));
echo "<div id='add_images'></div>";
$this->endWidget('zii.widgets.jui.CJuiDialog');  ?> 
```

这是我的控制器动作：

```
 if(isset($_FILES['image']))
    {
        $model->attributes=$_POST['Photo'];
        $images = CUploadedFile::getInstancesByName('image');
        if(isset($images) && count($images)> 0) 
        {
            foreach ($images as $image=>$pic) 
            {
                               if (!is_dir(Yii::getPathOfAlias('webroot').'/gallery/'.$user->username===true) ){
                                   mkdir(Yii::getPathOfAlias('webroot').'/gallery/'.$user->username, 0777);
            }

                            if ($pic->saveAs(Yii::getPathOfAlias('webroot').'/gallery/'.$user->username.'/'.$pic->name))    
                {   
                    $model->setIsNewRecord(true);
                    $model->id = null;
                                $model->image = $pic->name;
                                            $model->setAttribute('user_id',$id);
                                $model->save();
                }               
            }
                    $this->redirect(array('admin','id'=>$model->id));
        }
    }
 Ajax Popup Request
                if( Yii::app()->request->isAjaxRequest )
                             {
                    Yii::app()->clientScript->scriptMap['jquery.js'] = false;
                    $this->renderPartial('create',array(
                                        'model'=>$model,
                                ));}else{} 
```

这是我渲染的部分视图文件，它适用于多重上传文件，无需使用 cjuidialog 调用，但是当我使用 cjuidialog 调用它时，它只支持单个文件上传..请帮助。

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'gallery-form',
'enableAjaxValidation'=>true,
 'htmlOptions' => array(
        'enctype' => 'multipart/form-data',),
)); ?>

<?php echo $form->errorSummary($model); ?>
<div class="row">
    <?php echo $form->labelEx($model,'image'); ?>
     <?php
      $this->widget('CMultiFileUpload', array(
         'model'=>$model,
         'name'=>'image',
         'attribute'=>'image',
         'accept'=>'jpg|gif|png',

      ));
    ?>

    <?php echo $form->error($model,'image'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Upload' : 'Save'); ?>
</div>

<?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:25:36.120

renderPartial 默认不加载脚本，CMultiFileUpload 小部件使用脚本，因此您需要制作 renderPartial 加载脚本。您可以通过更改您的 renderPartial 以包含两个额外参数来做到这一点：

```
$this->renderPartial('viewName', 
    array('variable' => $variable), false, true
); 
```

注意`false, true`添加到最后？false 表示“不返回视图，显示它”，true 表示“后处理”，这将添加脚本。

更多信息：[http ://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)

[编辑]

这是加载对话框的另一种方式。它仍然需要 renderPartial 中的“false, true”：

```
Yii::app()->clientScript->registerScript('uploadDialog', "
$(function(){
    $('#upload-image').click(function(){
        $('#gallery-form').load('".Yii::app()->createUrl('gallery/create')."', function(){
            $('#gallery-form').dialog('open');
        });
        return false;
    });
});");

echo CHtml::link('Upload', '#', array('id' => 'upload-image'));

$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
    'id'=>'gallery-form',
    'options'=>array(
        'title'=>Yii::t('image','Upload'),
        'autoOpen'=>false,
        'model'=>'true',
        'width'=>'auto',
        'height'=>'auto',
    ),
));

$this->endWidget('zii.widgets.jui.CJuiDialog'); 
```

然后，从控制器中删除以下行：

```
Yii::app()->clientScript->scriptMap['jquery.js'] = false; 
```

如果这仍然不起作用，我建议直接在 CJuiDialog 小部件标签之间添加您的 renderPartial，而不是通过 ajax 加载内容。

# java - 网格视图问题

> ID：15172887
> 
> 赞同：0
> 
> 时间：2013-03-02T09:27:36.303
> 
> 标签：java, android

我有一个网格视图布局。我也有一些图像，我将把它们作为图像视图放在网格视图中。我想挑选哪些图像将放在哪一行。也就是说，我可能有 5 张图像进入第 1 行，而 5 张图像可能进入屏幕末尾的行，而中间的所有行都是空白的。不幸的是，现在它只能逐行插入图片，您无法选择要将其添加到哪一行。我正在尝试在gridview中做的事情可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:32:51.310

出于您的目的使用gridview可能会变得有点复杂，您应该使用动态视图为行膨胀创建一个xml视图并将其动态添加到您的父布局中。

[像这样](https://stackoverflow.com/questions/4588912/how-to-inflate-extended-linearlayout-from-xml)

将其添加到您的主布局中。

# sql - 检查约束以检查插入的日期

> ID：15172897
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:29:31.843
> 
> 标签：sql, oracle, check-constraints

我想检查用户的生日应该大于 18 岁。我使用了下面提到的检查约束。

```
(FLOOR((MONTHS_BETWEEN(DOB,SYSDATE))/12))>=18 
```

DOB：表中的字段用于生日。

但发生了以下错误：

> DOB 是无效的标识符。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:21:02.350

在 Oracle 中，您不能在 CHECK 约束中引用系统变量。事实上，如果*任何*SQL dbms 允许这样做，我会感到有点惊讶，因为它使约束变得不确定。

我可以想到几种在数据库级别解决它的方法。

*   使用触发器。
*   对至少比今天早 18 年的日期表使用外键引用。你需要一份每天插入一行的工作。不过，时区可能会给您带来一些麻烦。
*   存储用户声称至少 18 岁的事实。

[CHECK 约束的限制](http://docs.oracle.com/cd/E11882_01/server.112/e26088/clauses002.htm#SQLRF52205)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:01:23.103

Oracle 文档明确指出，在检查约束上只允许使用确定性函数；`sysdate`等`systimestamp`是明确禁止的。 [了解更多。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/clauses002.htm#sthref2067)

解决此限制的一种常见方法是利用数据模型。例如，您的 USERS 表是否有 REGISTRATION_DATE ？它当然应该有这样的东西。自然 REGISTRATION_DATE 将默认为`sysdate`and，lo！您的约束变得合法：

```
(FLOOR((MONTHS_BETWEEN(REGISTRATION_DATE, DOB))/12))>=18 
```

顺便说一下，注意参数的顺序`MONTHS_BETWEEN()`是（later_date，更早的日期）。 [检查出来](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions102.htm#sthref1257)。

# asp.net-mvc - ASP.NET MVC - 如何在自定义授权过滤器中获取命名空间？

> ID：15172899
> 
> 赞同：1
> 
> 时间：2013-03-02T09:29:49.087
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authorization, action-filter, authorize-attribute

我必须实现自定义授权过滤器。

（检查Is Authorized，需要Namespace、Controller Name和Action Name）

我没有设法获取命名空间。这是我的代码：

**示例控制器.cs：**

```
namespace ExampleProject.Controllers 
{
    public class ExampleController : Controller 
    {
        [CustomAuth()]              
        public string Index() 
        {        
            return "OK";
        }
    }
} 
```

**CustomAuthFilter.cs：**

```
namespace ExampleProject.Infrastructure.Filters
{
     public class CustomAuthAttribute : AuthorizeAttribute 
     {
          protected override bool AuthorizeCore(HttpContextBase httpContext) 
          {
              string currentNamespace = string.Empty;
              string currentController = string.Empty;
              string currentAction = string.Empty;

              var routeData = httpContext.Request.RequestContext.RouteData;

              currentController = routeData.GetRequiredString("controller"); //Example
              currentAction = routeData.GetRequiredString("action");         //Index

              currentNamespace = How???????   // ExampleProject.Controllers

              ...
          }
     }
} 
```

如何获得命名空间？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:03:15.277

约定优于配置

如果您遵守这一点，您可以轻松获得 `ExampleProject.Controllers`，因为 Controllers 文件夹中的所有控制器，如果您不手动更改此约定，您可以安全地获取控制器的命名空间，但如果您更改命名空间

```
 public class CustomAuthAttribute : AuthorizeAttribute
    {
        public string controllerFullName { get; set; }
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            string currentNamespace = string.Empty;
            string currentController = string.Empty;
            string currentAction = string.Empty;

            var routeData = httpContext.Request.RequestContext.RouteData;

            currentController = routeData.GetRequiredString("controller"); //Example
            currentAction = routeData.GetRequiredString("action"); //Index
             currentNamespace = controllerFullName.Substring(0, controllerFullName.IndexOf("." + currentController, System.StringComparison.Ordinal));

            return false;
        }
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            controllerFullName = filterContext.Controller.ToString();
            base.OnAuthorization(filterContext);
        }

    } 
```

# php - 将 php 变量传递给 Javascript 函数

> ID：15172900
> 
> 赞同：-2
> 
> 时间：2013-03-02T09:30:08.817
> 
> 标签：php, javascript

这是我的例子，它不起作用。

```
 return ' 
<div onmousedown="displayDate('.$linkurl.')">
<embed src="'.$thead->image_url.'" allowScriptAccess="always"></embed>
</div>
       '; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:44:20.163

单引号双引号下的某些 Times 单引号可能会出现板条箱问题，试试这个。

```
$data =  "<div onmousedown= 'displayDate('" . $linkurl . " ')'>";

$data .=  "<embed src='" .$thead->image_url. " ' allowScriptAccess='always'></embed></div>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:34:41.120

由于缺乏信息，我无法确定，但据我所知，您的代码看起来是正确的。不能正确传递变量的唯一原因是它们是否为空。

在将变量分配给 JS 之前，添加一些调试以确保变量中有值。您可以通过`echo`预先设置变量来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:44:44.940

如果你想传递一个字符串，它必须像这样被引用：

```
return ' 
<div onmousedown="displayDate(\''.$linkurl.'\')">
<embed src="'.$thead->image_url.'" allowScriptAccess="always"></embed>
</div>
       '; 
```

# python - 如何配置 HTML 表单以使用 django 模型？

> ID：15172903
> 
> 赞同：2
> 
> 时间：2013-03-02T09:30:32.033
> 
> 标签：python, html, django

我正在尝试配置`HTML form`为使用`Django Models`而不是使用框架中的内置`Forms`。我使用下面的表格制作了表格，并`Html`粘贴了 和 的代码。问题是当我单击按钮时，它没有执行任何操作。我可以查看表格，但它没有达到目的。我知道这个问题很蹩脚，但是如何配置 HTML 以使用 django 模型以便将数据保存到数据库中？`Model``View``Urls.py``submit`

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
</head>
<body style="font-family:Courier New">
    <h1>Add / Edit Book</h1>
    <hr/>
    <form id="formHook" action="/istreetapp/addbook" method="post">
        <p style="font-family:Courier New">Name <input type="text" placeholder="Name of the book"></input></p>
        <p style="font-family:Courier New">Author <input type="text" placeholder="Author of the book"></input></p>
        <p style="font-family:Courier New"> Status
            <select>
                <option value="Read">Read</option>
                <option value="Unread">Unread</option>
            </select>
        </p>
    <input type="submit" id="booksubmit" value="Submit"></input>
</form>
</body>
</html> 
```

**看法**

```
from django.shortcuts import HttpResponse
from istreetapp.models import bookInfo
from django.template import Context, loader
from django.shortcuts import render_to_response

def index(request):
    booklist = bookInfo.objects.all().order_by('Author')[:10]
    temp = loader.get_template('app/index.html')
    contxt = Context({
        'booklist' : booklist,
    })
return HttpResponse(temp.render(contxt)) 
```

**模型**

```
from django.db import models

class bookInfo(models.Model):
    Name = models.CharField(max_length=100)
    Author = models.CharField(max_length=100)
    Status = models.IntegerField(default=0) # status is 1 if book has been read

def addbook(request, Name, Author):
    book = bookInfo(Name = Name, Author=Author)
    book.save
    return render(request, 'templates/index.html', {'Name': Name, 'Author': Author}) 
```

**网址.py**

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()
urlpatterns = patterns('app.views',
    url(r'^$', 'index'),
    url(r'^addbook/$', 'addbook'),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:36:27.187

您需要在 html 表单中添加名称属性，然后在视图中处理表单提交。就像是 -

```
from django.http import HttpResponseRedirect
from django.shortcuts import render

def book_view(request):
    if request.method == 'POST':
        name = request.POST['name']
        author = request.POST['author']
        book = BookInfo(name=name, author=author)
        if book.is_valid():
            book.save()
            return HttpResponseRedirect('your_redirect_url')
    else:
        return render(request, 'your_form_page.html') 
```

查看request.POST 字典上的[文档。](https://docs.djangoproject.com/en/1.5/ref/request-response/#django.http.HttpRequest.POST)

但是，您真的会更好地使用 django ModelForm 来执行此操作 -

```
class BookForm(ModelForm):
    class Meta:
        model = BookInfo # I know you've called it bookInfo, but it should be BookInfo 
```

那么在你看来——

```
from django.http import HttpResponseRedirect
from django.shortcuts import render

def book_view(request, pk=None):
    if pk:
        book = get_object_or_404(BookInfo, pk=pk)
    else:
        book = BookInfo()
    if request.method == 'POST':
        form = BookForm(request.POST, instance=book)
        if form.is_valid():
            book = form.save()
            return HttpResponseRedirect('thanks_page')
    else:
        form = BookForm(instance=book)
    return render(request, 'your_form_page.html', {'form': form) 
```

并且`your_form_page.html`可以很简单 -

```
<form action="{% url book_view %}" method="post">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form> 
```

查看有关使用表单的[文档。](https://docs.djangoproject.com/en/1.5/topics/forms/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:00:17.097

您忘记在每个输入中定义**名称**

```
<form id="formHook" action="/addbook/" method="post">
    {% csrf_token %}
    <p style="font-family:Courier New">
        Name <input type="text" name="name" placeholder="Name of the book"></input>
    </p>

    <p style="font-family:Courier New">
        Author <input type="text" name="author" placeholder="Author of the book"></input>
    </p>

    <p style="font-family:Courier New"> 
        Status
        <select name="status">
            <option value="Read">Read</option>
            <option value="Unread">Unread</option>
        </select>
    </p>
    <input type="submit" id="booksubmit" value="Submit"></input>
</form> 
```

您的**addbook 必须在 views.py 中，**而不是在您的 models.py 中。您不必在渲染中定义 templates/index.html，在您的设置中可以理解

```
def addbook(request):
    if request.method == 'POST':
        name = request.POST['name']
        author = request.POST['author']
        bookInfo.objects.create(Name = name, Author=author)
        return render(request, 'index.html', {'Name': name, 'Author': author}) 
```

**主 urlconf**

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', 'project_name.views.index'),
    url(r'^addbook/$', 'project_name.views.addbook'),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

# objective-c - 应用程序在 Mac 上崩溃

> ID：15172906
> 
> 赞同：1
> 
> 时间：2013-03-02T09:30:39.703
> 
> 标签：objective-c, macos, cocoa, crash

我写了一个应用程序，它对一个用户来说崩溃了。（满分 50 分）。他收到一条消息，上面写着“应用程序意外退出”，这是消息：

根据要求更新了完整报告

```
 Thread 0 Crashed: Dispatch queue: com.apple.main-thread
            0 ??? 000000000000000000 0 + 0
            1 com.apple.AppKit 0x0000000100def22e -[NSCustomObject nibInstantiate] + 416
            2 com.apple.AppKit 0x0000000100def01b -[NSIBObjectData instantiateObject:] + 259
            3 com.apple.AppKit 0x0000000100dee406 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 336
            4 com.apple.AppKit 0x0000000100deca91 loadNib + 226
            5 com.apple.AppKit 0x0000000100debfa1 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
            6 com.apple.AppKit 0x0000000100debdd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
            7 com.apple.AppKit 0x0000000100de935b NSApplicationMain + 279
            8 mad-sharky.com.Stockuploader 0x0000000100001194 0x100000000 + 4500

            Thread 1: Dispatch queue: com.apple.libdispatch-manager
            0 libSystem.B.dylib 0x0000000100747c0a kevent + 10
            1 libSystem.B.dylib 0x0000000100749add _dispatch_mgr_invoke + 154
            2 libSystem.B.dylib 0x00000001007497b4 _dispatch_queue_invoke + 185
            3 libSystem.B.dylib 0x00000001007492de _dispatch_worker_thread2 + 252
            4 libSystem.B.dylib 0x0000000100748c08 _pthread_wqthread + 353
            5 libSystem.B.dylib 0x0000000100748aa5 start_wqthread + 13

            Thread 2:
            0 libSystem.B.dylib 0x0000000100748a2a __workq_kernreturn + 10
            1 libSystem.B.dylib 0x0000000100748e3c _pthread_wqthread + 917
            2 libSystem.B.dylib 0x0000000100748aa5 start_wqthread + 13

            Thread 0 crashed with X86 Thread State (64-bit):
             rax: 0x0000000108a1b7d0 rbx: 0x0000000108a1b7d0 rcx: 0x000003ffffffffff rdx: 0x00000000ffffffff
             rdi: 0x0000000108a1b7d0 rsi: 0x0000000108a240c0 rbp: 0x00007fff5fbff620 rsp: 0x00007fff5fbff5b8
             r8: 0x0000000100cdb2a0 r9: 0x0000000000000000 r10: 0x0000000107e16480 r11: 0x00007fff5fbff4d0
             r12: 0x0000000000000010 r13: 0x0000000108a1b770 r14: 0x000000010000d6b0 r15: 0x0000000100cdd630
             rip: 0x0000000000000000 rfl: 0x0000000000010202 cr2: 0x0000000000000000

            Binary Images:
             0x100000000 - 0x10000afff +mad-sharky.com.Stockuploader 1.0 (1) <0A7D614F-C5B3-3627-8C1D-0CF16DA91644> /Users/adamdale/Desktop/Stockuploader_4_MAC_V1.0 2.app/Contents/MacOS/Stockuploader
             0x100011000 - 0x100011ff7 com.apple.CoreServices 44 (44) <DC7400FB-851E-7B8A-5BF6-6F50094302FB> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
             0x100014000 - 0x100192ff7 com.apple.WebKit 6533.21 (6533.21.1) <C89E93DE-3BFD-2E7A-2A49-356885FA1CDE> /System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
             0x100267000 - 0x100267ff7 com.apple.Cocoa 6.6 (???) <68B0BE46-6E24-C96F-B341-054CF9E8F3B6> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
             0x10026a000 - 0x1004ecfff com.apple.Foundation 6.6.8 (751.63) <E10E4DB4-9D5E-54A8-3FB6-2A82426066E4> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
             0x100664000 - 0x10071aff7 libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <03140531-3B2D-1EBA-DA7F-E12CC8F63969> /usr/lib/libobjc.A.dylib
             0x10072e000 - 0x1008effef libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib
             0x100981000 - 0x100abffff com.apple.CoreData 102.1 (251) <9DFE798D-AA52-6A9A-924A-DA73CB94D81A> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
             0x100b57000 - 0x100ccefe7 com.apple.CoreFoundation 6.6.6 (550.44) <BB4E5158-E47A-39D3-2561-96CB49FA82D4> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
             0x100de7000 - 0x1017e1ff7 com.apple.AppKit 6.6.8 (1038.36) <4CFBE04C-8FB3-B0EA-8DDB-7E7D10E9D251> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
             0x101dd9000 - 0x101dddff7 libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <95718673-FEEE-B6ED-B127-BCDBDB60D4E5> /usr/lib/system/libmathCommon.A.dylib
             0x101de0000 - 0x102114fef com.apple.CoreServices.CarbonCore 861.39 (861.39) <1386A24D-DD15-5903-057E-4A224FAF580B> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
             0x10218e000 - 0x102262fe7 com.apple.CFNetwork 454.12.4 (454.12.4) <C83E2BA1-1818-B3E8-5334-860AD21D1C80> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
             0x1022d6000 - 0x102320ff7 com.apple.Metadata 10.6.3 (507.15) <2EF19055-D7AE-4D77-E589-7B71B0BC1E59> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
             0x10234a000 - 0x102407fff com.apple.CoreServices.OSServices 359 (359) <DAAB42A1-89A6-9644-CB21-50BA66417F12> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
             0x102461000 - 0x1024f1fff com.apple.SearchKit 1.3.0 (1.3.0) <3403E658-A54E-A79A-12EB-E090E8743984> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
             0x10252f000 - 0x10256afff com.apple.AE 496.5 (496.5) <208DF391-4DE6-81ED-C697-14A2930D1BC6> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
             0x102584000 - 0x102624fff com.apple.LaunchServices 362.3 (362.3) <B90B7C31-FEF8-3C26-BFB3-D8A48BD2C0DA> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
             0x10266a000 - 0x102692fff com.apple.DictionaryServices 1.1.2 (1.1.2) <E9269069-93FA-2B71-F9BA-FDDD23C4A65E> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
             0x1026ac000 - 0x10270cfe7 com.apple.framework.IOKit 2.0 (???) <4F071EF0-8260-01E9-C641-830E582FA416> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
             0x102730000 - 0x1028eefff libicucore.A.dylib 40.0.0 (compatibility 1.0.0) <4274FC73-A257-3A56-4293-5968F3428854> /usr/lib/libicucore.A.dylib
             0x10295d000 - 0x102963ff7 com.apple.DiskArbitration 2.3 (2.3) <857F6E43-1EF4-7D53-351B-10DE0A8F992A> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
             0x10296c000 - 0x102982fef libbsm.0.dylib ??? (???) <83676D2E-23CD-45CD-BE5C-35FCFFBBBDBB> /usr/lib/libbsm.0.dylib
             0x10298b000 - 0x10299afff com.apple.NetFS 3.2.2 (3.2.2) <7CCBD70E-BF31-A7A7-DB98-230687773145> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
             0x1029a3000 - 0x102a20fef libstdc++.6.dylib 7.9.0 (compatibility 7.0.0) <35ECA411-2C08-FD7D-11B1-1B7A04921A5C> /usr/lib/libstdc++.6.dylib
             0x102a81000 - 0x102a92ff7 libz.1.dylib 1.2.3 (compatibility 1.0.0) <97019C74-161A-3488-41EC-A6CA8738418C> /usr/lib/libz.1.dylib
             0x102a97000 - 0x102aa5ff7 libkxld.dylib ??? (???) <8145A534-95CC-9F3C-B78B-AC9898F38C6F> /usr/lib/system/libkxld.dylib
             0x102aa9000 - 0x102af5fff libauto.dylib ??? (???) <F7221B46-DC4F-3153-CE61-7F52C8C293CF> /usr/lib/libauto.dylib
             0x102b02000 - 0x102d8afef com.apple.security 6.1.2 (55002) <015C9A08-3D07-9462-8E91-DB1924349621> /System/Library/Frameworks/Security.framework/Versions/A/Security
             0x102e82000 - 0x102f3bfff libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <2C5ED312-E646-9ADE-73A9-6199A2A43150> /usr/lib/libsqlite3.dylib
             0x102f4b000 - 0x102f8cfff com.apple.SystemConfiguration 1.10.8 (1.10.2) <78D48D27-A9C4-62CA-2803-D0BBED82855A> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
             0x102fb0000 - 0x102fdbff7 libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <8AB4CA9E-435A-33DA-7041-904BA7FA11D5> /usr/lib/libxslt.1.dylib
             0x102fe6000 - 0x1030fdfef libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <1B27AFDD-DF87-2009-170E-C129E1572E8B> /usr/lib/libxml2.2.dylib
             0x103126000 - 0x103126ff7 com.apple.Carbon 150 (152) <FA427C37-CF97-6773-775D-4F752ED68581> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
             0x103129000 - 0x103319fef com.apple.JavaScriptCore 6533.20 (6533.20.20) <5626170D-00AE-33B1-03FF-256E9794150D> /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
             0x10338e000 - 0x10339dfef com.apple.opengl 1.6.13 (1.6.13) <516098B3-4517-8A55-64BB-195CDAA5334D> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
             0x1033a6000 - 0x103743fe7 com.apple.QuartzCore 1.6.3 (227.37) <16DFF6CD-EA58-CE62-A1D7-5F6CE3D066DD> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
             0x103871000 - 0x1044ecfef com.apple.WebCore 6533.21 (6533.21.1) <15CE3700-C6DC-7F94-5394-4CF78040A40D> /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
             0x104acb000 - 0x104acbff7 com.apple.ApplicationServices 38 (38) <10A0B9E9-4988-03D4-FC56-DDE231A02C63> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
             0x104ace000 - 0x104ad3ff7 com.apple.CommonPanels 1.2.4 (91) <4D84803B-BD06-D80E-15AE-EFBE43F93605> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
             0x104adb000 - 0x104adefff com.apple.help 1.3.2 (41.1) <BD1B0A22-1CB8-263E-FF85-5BBFDE3660B9> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
             0x104ae4000 - 0x104de2fff com.apple.HIToolbox 1.6.5 (???) <AD1C18F6-51CB-7E39-35DD-F16B1EB978A8> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
             0x104f0e000 - 0x104f25fff com.apple.ImageCapture 6.1 (6.1) <79AB2131-2A6C-F351-38A9-ED58B25534FD> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
             0x104f3f000 - 0x104ff4fe7 com.apple.ink.framework 1.3.3 (107) <8C36373C-5473-3A6A-4972-BC29D504250F> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
             0x105027000 - 0x105042ff7 com.apple.openscripting 1.3.1 (???) <9D50701D-54AC-405B-CC65-026FCB28258B> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
             0x105053000 - 0x105055fff com.apple.print.framework.Print 6.1 (237.1) <CA8564FB-B366-7413-B12E-9892DA3C6157> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
             0x10505a000 - 0x10505dff7 com.apple.securityhi 4.0 (36638) <AEF55AF1-54D3-DB8D-27A7-E16192E0045A> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
             0x105062000 - 0x10506dff7 com.apple.speech.recognition.framework 3.11.1 (3.11.1) <3D65E89B-FFC6-4AAF-D5CC-104F967C8131> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
             0x105077000 - 0x105773ff7 com.apple.CoreGraphics 1.545.0 (???) <58D597B1-EB3B-710E-0B8C-EC114D54E11B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
             0x105865000 - 0x105a23ff7 com.apple.ImageIO.framework 3.0.4 (3.0.4) <6212CA66-7B18-2AED-6AA8-45185F5D9A03> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
             0x105a8f000 - 0x105b0dff7 com.apple.CoreText 151.10 (???) <54961997-55D8-DC0F-2634-674E452D5A8E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
             0x105b4b000 - 0x105be5fff com.apple.ApplicationServices.ATS 275.19 (???) <FBC907AF-C3EF-CAF1-3705-13DC91B29114> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
             0x105c0e000 - 0x105ccffef com.apple.ColorSync 4.6.6 (4.6.6) <BB2C5813-C61D-3CBA-A8F7-0E59E46EBEE8> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
             0x105d0c000 - 0x105d5fff7 com.apple.HIServices 1.8.3 (???) <F6E0C7A7-C11D-0096-4DDA-2C77793AA6CD> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
             0x105d8b000 - 0x105da0ff7 com.apple.LangAnalysis 1.6.6 (1.6.6) <1AE1FE8F-2204-4410-C94E-0E93B003BEDA> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
             0x105dae000 - 0x105e33ff7 com.apple.print.framework.PrintCore 6.3 (312.7) <CDFE82DD-D811-A091-179F-6E76069B432D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
             0x105e69000 - 0x105eaafef com.apple.QD 3.36 (???) <5DC41E81-32C9-65B2-5528-B33E934D5BB4> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
             0x105ec2000 - 0x105ed6ff7 com.apple.speech.synthesis.framework 3.10.35 (3.10.35) <63C87CF7-56B3-4038-8136-8C26E96AD42F> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
             0x105ee7000 - 0x105ee7ff7 com.apple.Accelerate 1.6 (Accelerate 1.6) <15DF8B4A-96B2-CB4E-368D-DEC7DF6B62BB> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
             0x105eea000 - 0x105f39fef libTIFF.dylib ??? (???) <5DE9F066-9B64-CBE4-976A-CC7B8DD3C31A> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
             0x105f46000 - 0x105f4bfff libGIF.dylib ??? (???) <95443F88-7D4C-1DEE-A323-A70F7A1B4B0F> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
             0x105f50000 - 0x105f6dff7 libPng.dylib ??? (???) <4815A8F2-24A0-E783-8A5A-7B4959F562D7> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
             0x105f75000 - 0x105f77fff libRadiance.dylib ??? (???) <76C1B129-6F25-E43C-1498-B1B88B37163B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
             0x105f7b000 - 0x105fa2ff7 libJPEG.dylib ??? (???) <B9AA5816-8CCB-AFCB-61FD-3820C6E8219D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
             0x105faa000 - 0x106087fff com.apple.vImage 4.1 (4.1) <C3F44AA9-6F71-0684-2686-D3BBC903F020> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
             0x106096000 - 0x106096ff7 com.apple.Accelerate.vecLib 3.6 (vecLib 3.6) <4CCE5D69-F1B3-8FD3-1483-E0271DB2CCF3> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
             0x106099000 - 0x1060e1ff7 libvDSP.dylib 268.0.1 (compatibility 1.0.0) <98FC4457-F405-0262-00F7-56119CA107B6> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
             0x1060e9000 - 0x106153fe7 libvMisc.dylib 268.0.1 (compatibility 1.0.0) <AF0EA96D-000F-8C12-B952-CB7E00566E08> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
             0x10615d000 - 0x106967fe7 libBLAS.dylib 219.0.0 (compatibility 1.0.0) <EEE5CE62-9155-6559-2AEA-05CED0F5B0F1> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
             0x1069b0000 - 0x106df4fef libLAPACK.dylib 219.0.0 (compatibility 1.0.0) <E14EC4C6-B055-A4AC-B971-42AB644E4A7C> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
             0x106f81000 - 0x1070a0fe7 libcrypto.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <14115D29-432B-CF02-6B24-A60CC533A09E> /usr/lib/libcrypto.0.9.8.dylib
             0x107108000 - 0x107109ff7 com.apple.TrustEvaluationAgent 1.1 (1) <5952A9FA-BC2B-16EF-91A7-43902A5C07B6> /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
             0x10710d000 - 0x1071cefff libFontParser.dylib ??? (???) <A00BB0A7-E46C-1D07-1391-194745566C7E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
             0x1072c5000 - 0x1072fffff libcups.2.dylib 2.8.0 (compatibility 2.0.0) <7982734A-B66B-44AA-DEEC-364D2C10009B> /usr/lib/libcups.2.dylib
             0x10730e000 - 0x1073befff edu.mit.Kerberos 6.5.11 (6.5.11) <085D80F5-C9DC-E252-C21B-03295E660C91> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
             0x1073e4000 - 0x107405fff libresolv.9.dylib 41.0.0 (compatibility 1.0.0) <9F322F47-0584-CB7D-5B73-9EBD670851CD> /usr/lib/libresolv.9.dylib
             0x10740f000 - 0x107456ff7 com.apple.coreui 2 (114) <923E33CC-83FC-7D35-5603-FB8F348EE34B> /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
             0x10747b000 - 0x107560fef com.apple.DesktopServices 1.5.11 (1.5.11) <39FAA3D2-6863-B5AB-AED9-92D878EA2438> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
             0x1075af000 - 0x1076e4fff com.apple.audio.toolbox.AudioToolbox 1.6.7 (1.6.7) <E5D7DBDB-6DDF-E6F9-C71C-86F4520EE5A3> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
             0x10775e000 - 0x1077b3ff7 com.apple.framework.familycontrols 2.0.2 (2020) <8807EB96-D12D-8601-2E74-25784A0DE4FF> /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
             0x1077d1000 - 0x1077e7fe7 com.apple.MultitouchSupport.framework 207.11 (207.11) <8233CE71-6F8D-8B3C-A0E1-E123F6406163> /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
             0x1077f4000 - 0x107819ff7 com.apple.CoreVideo 1.6.2 (45.6) <E138C8E7-3CB6-55A9-0A2C-B73FE63EA288> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
             0x107832000 - 0x107863fff libGLImage.dylib ??? (???) <7F102A07-E4FB-9F52-B2F6-4E2D2383CA13> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
             0x10786a000 - 0x10788dfff com.apple.opencl 12.3.6 (12.3.6) <42FA5783-EB80-1168-4015-B8C68F55842F> /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
             0x107896000 - 0x10789cff7 IOSurface ??? (???) <8E302BB2-0704-C6AB-BD2F-C2A6C6A2E2C3> /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
             0x1078a5000 - 0x1078eefef libGLU.dylib ??? (???) <1C050088-4AB2-2BC2-62E6-C969F925A945> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
             0x1078fd000 - 0x107911fff libGL.dylib ??? (???) <2ECE3B0F-39E1-3938-BF27-7205C6D0358B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
             0x107921000 - 0x107a3bfef libGLProgrammability.dylib ??? (???) <8A4B86E3-0FA7-8684-2EF2-C5F8079428DB> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
             0x107a5c000 - 0x107a5fff7 libCoreVMClient.dylib ??? (???) <E03D7C81-A3DA-D44A-A88A-DDBB98AF910B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
             0x107a64000 - 0x107a69fff libGFXShared.dylib ??? (???) <1D0D3531-9561-632C-D620-1A8652BEF5BC> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
             0x107a6e000 - 0x107aedfe7 com.apple.audio.CoreAudio 3.2.6 (3.2.6) <79E256EB-43F1-C7AA-6436-124A4FFB02D0> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
             0x107b23000 - 0x107b24ff7 com.apple.audio.units.AudioUnit 1.6.7 (1.6.7) <53299948-2554-0F8F-7501-04B34E49F6CF> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
             0x107b29000 - 0x107b29ff7 com.apple.vecLib 3.6 (vecLib 3.6) <96FB6BAD-5568-C4E0-6FA7-02791A58B584> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
             0x107b2c000 - 0x107bb8fef SecurityFoundation ??? (???) <3F1F2727-C508-3630-E2C1-38361841FCE4> /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
             0x107bfc000 - 0x107c03fff com.apple.OpenDirectory 10.6 (10.6) <4FF6AD25-0916-B21C-9E88-2CC42D90EAC7> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory
             0x107c0c000 - 0x107c12ff7 com.apple.CommerceCore 1.0 (9.1) <3691E9BA-BCF4-98C7-EFEC-78DA6825004E> /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
             0x107c1a000 - 0x107c33fff com.apple.CFOpenDirectory 10.6 (10.6) <401557B1-C6D1-7E1A-0D7E-941715C37BFA> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
             0x107c48000 - 0x107c97ff7 com.apple.DirectoryService.PasswordServerFramework 6.1 (6.1) <0731C40D-71EF-B417-C83B-54C3527A36EA> /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
             0x107cb8000 - 0x107cd8ff7 com.apple.DirectoryService.Framework 3.6 (621.12) <A4685F06-5881-35F5-764D-C380304C1CE8> /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
             0x107ce2000 - 0x107cf4fe7 libsasl2.2.dylib 3.15.0 (compatibility 3.0.0) <76B83C8D-8EFE-4467-0F75-275648AFED97> /usr/lib/libsasl2.2.dylib
             0x107cfb000 - 0x107cfcfff liblangid.dylib ??? (???) <EA4D1607-2BD5-2EE2-2A3B-632EEE5A444D> /usr/lib/liblangid.dylib
             0x107de7000 - 0x107df4fe7 libCSync.A.dylib 545.0.0 (compatibility 64.0.0) <1C35FA50-9C70-48DC-9E8D-2054F7A266B1> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
             0x7fff5fc00000 - 0x7fff5fc3be0f dyld 132.1 (???) <29DECB19-0193-2575-D838-CF743F0400B2> /usr/lib/dyld
             0x7fffffe00000 - 0x7fffffe01fff libSystem.B.dylib ??? (???) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib 
```

这种问题通常与mac或应用程序有关吗？奇怪的是它正在所有其他mac上工作。操作系统版本与我的构建设置兼容。

- -编辑 - -

一个用户，今天变成了三个用户。问题开始大了。。

- -更新 - -

根据[这个视频](http://www.youtube.com/watch?annotation_id=annotation_900148&feature=iv&src_vid=srbdMHivkpo&v=akjVaF09mSY)，他们在 32 位处理器上运行 64 位系统。我的程序是为 64 位系统编译的。这可能是原因吗？如果是这样，我如何将我的应用程序转换为也可以为 32 位系统编译的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:20:26.957

这里没有足够的信息来帮助你。

在从应用程序的 nib 文件实例化对象时，您正在崩溃，出现空指针错误。最有可能的是，您的异常用户 (a) 缺少库，或者 (b) 以其他方式取消引用 nil 指针，可能在其构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:51:50.200

问题是这些用户使用的是 32 位处理器，而 64 位应用程序不起作用。我禁用了 ARC 并将代码设置为为 86_64 编译，它现在可以工作了。仍然有很多错误消息和代码要适应，但是当所有红色的都消失时，它会编译并运行。无论如何感谢所有帮助过的人，支持每一个帖子！

# ios - 如何使用 ios 将音频歌曲上传到服务器？

> ID：15172910
> 
> 赞同：1
> 
> 时间：2013-03-02T09:30:52.623
> 
> 标签：ios, objective-c, audio, mpmediapickercontroller

我是初学者 iOS 应用程序开发人员。我尝试了以下链接代码。它播放得很好，但我需要选择音频文件路径以及如何以选定的音频上传到服务器，请帮忙。[音频代码参考网址](http://oleb.net/blog/2009/07/the-music-player-framework-in-the-iphone-sdk/)

```
 -(IBAction)clickFileuploadbtn:(id)sender;
{
    NSLog(@"2");
    picker1 =
    [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];

    picker1.delegate      = self;
    picker1.allowsPickingMultipleItems = YES;
    picker1.prompt      = NSLocalizedString (@"Add songs to play", "Prompt in media item picker");

    // The media item picker uses the default UI style, so it needs a default-style
    //  status bar to match it visually
    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleDefault animated: YES];

    [self presentModalViewController: picker1 animated: YES];
    [picker1 release];
    // [Uploads FileUpload];
}
- (void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{

    [self dismissModalViewControllerAnimated: YES];

    NSLog(@"%@ %d",mediaItemCollection,mediaItemCollection.count);

    NSArray *newMediaItem= [mediaItemCollection items];

    MPMediaItem *item=[[newMediaItem objectAtIndex:0] retain];

    [self uploadMusicFile:item];
}
- (void)mediaPickerDidCancel:(MPMediaPickerController *)mediaPicker
{
    [self dismissModalViewControllerAnimated: YES];

    NSLog(@"cancel");

}

- (void) uploadMusicFile:(MPMediaItem *)song
{
    NSURL *url = [song valueForProperty: MPMediaItemPropertyAssetURL];

    // Given some file path URL: NSURL *pathURL
    // Note: [pathURL isFileURL] must return YES
    NSString *path = [NSString stringWithFormat:@"%@",url];
    NSLog(@"path %@",path);
    NSData *data = [[NSFileManager defaultManager] contentsAtPath:path];
    NSLog(@"data %@" ,data);
    NSString *audioName = @"myAudio.caf";
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://192.168.1.176:1001/api?type=iphoneupload"]];
    [request addData:data withFileName:audioName andContentType:@"audio/caf" forKey:@"audioFile"];
    [request setDelegate:self];
    [request setTimeOutSeconds:500];
    [request setDidFinishSelector:@selector(uploadRequestFinished:)];
    [request setDidFailSelector:@selector(uploadRequestFailed:)];
    [request startAsynchronous];

}

- (void)uploadRequestFinished:(ASIHTTPRequest *)request
{
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = NO;
    NSData *webData = [[NSData alloc] initWithData:[request responseData]];
    NSString *strEr =  [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding];
    NSLog(@"strEr %@",strEr);
}

- (void) uploadRequestFailed:(ASIHTTPRequest *)request
{
    NSLog(@"responseStatusCode %i",[request responseStatusCode]);
    NSLog(@"responseString %@",[request responseString]);
    NSError *error = [request error];
    NSLog(@"error %@",error);
    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = NO;
} 
```

# memory-management - 内存管理分配

> ID：15172914
> 
> 赞同：0
> 
> 时间：2013-03-02T09:30:58.123
> 
> 标签：memory-management, ram

我不明白内存管理是如何工作的。有人可以解释/画出我如何正确吗？谢谢你的任何建议。

1.  分配一块连续的内存区域

    *   我们有任务 P1 和 P2 连续出现。
    *   P1 需要 123kB 的内存，P2 需要 240kB 的内存。

    b) 随着 P1 的出现，绘制到状态 2 位置存储器

    c) 随着 P2 的出现，拉到状态 3 位置记忆！

图片：http: [//i.imgur.com/OpfucGA.png](http://i.imgur.com/OpfucGA.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T11:22:35.487

通常当任何操作系统完成内存分配时，它通常首先完成分配较小值的任务，因为这样的位置很容易找到。

而在请求大空间的情况下，操作系统会首先尝试在物理 RAM 上找到这样的空间。如果失败，则操作系统会求助于分页或其他虚拟内存方法。这通常需要更多时间，因此分配较小的空间首先完成。

因此，在您的情况下，任务 P1 将被赋予更高的优先级，并首先为其分配 123kB，然后是任务 P2。

但是程序的进程优先级会有所不同，即如果任务P2的执行优先级高于任务P1，则任务P2将被赋予更高的优先级，首先为其分配240kB，然后是任务P1。

# ruby-on-rails - 使用查询调用中的对象调用部分

> ID：15172915
> 
> 赞同：1
> 
> 时间：2013-03-02T09:31:20.643
> 
> 标签：ruby-on-rails, partial-views

我有一个问题要让我的部分工作。

我想通过局部变量将对象传递给部分，但我得到了

```
undefined method `model_name' for NilClass:Class 
```

一直出错。但是该变量被传递了，因为我可以使用 .to_yaml 在部分中调用它，这为我提供了所有变量属性。

但是当我尝试在 form_for 中使用它时，我得到了那个错误。

也许它与我的数据库查询有关。因为当我尝试用另一个局部变量调用它时没有错误。但是我的查询应该产生一个对象，还是我错了？

这是我的 show.html.erb：

```
<%= @partneroffer = Partneroffer.where(:partner_id => @partner.id, :yearname_id => year.id).first  %>
<%= render :partial => "form2", :locals => { :partneroffer => @partneroffer } %> 
```

这是我的部分（_form2.html.erb）：

```
<%= form_for partneroffer , :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.label :partnerstatus_id, :class => 'control-label' %>
  <%= f.collection_select(:partnerstatus_id, Partnerstatus.all, :id, :name) %>
  <%= f.submit nil, :class => 'btn btn-primary' %>
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
 partner_year_terms_path, :class => 'btn' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:59:39.747

可能在您的部分中，*partneroffer*是一个 nil 对象，因此它没有方法“model_name”。

您以正确的方式呈现视图，并且以正确的方式传递当地人，但是，您确定 Partneroffer.where(:partner_id => @partner.id, :yearname_id => year.id).first 不是获得零值？在 show.html.erb 中试试这个代码：

```
<%- @partneroffer = Partneroffer.where(:partner_id => @partner.id, :yearname_id => year.id).first  %>
<%- if @partneroffer %>
  <%= render :partial => "form2", :locals => { :partneroffer => @partneroffer } %>
<%- else %>
   @partneroffer is nil!!!!
<%- end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:02:46.580

我找到了基于相关主题之一的解决方案（[Render :partial a random object from DB by id, in custom form](https://stackoverflow.com/questions/12411052/render-partial-a-random-object-from-db-by-id-in-custom-form?rq=1)）！问题是我必须调用部分四次。但仅在一种情况下，我的查询结果中有记录。每次没有记录时，rails 都会抛出此错误消息。我知道其中一个部分调用至少有一个结果，但不知道每个结果中都必须有一个。感谢我们[期待这个](https://stackoverflow.com/users/792445/weexpectedthis)！

# git - 将 Git 与网站一起使用

> ID：15172922
> 
> 赞同：3
> 
> 时间：2013-03-02T09:32:13.497
> 
> 标签：git, version-control, web

我正在开发一个到目前为止非常简单的网站，我的方法可能不被认为是专业的，但我这样做没有任何问题：

1.  在家用电脑上写脚本
2.  FTP到服务器位置
3.  在浏览器中加载网站并检查页面是否按我希望的那样工作。
4.  重复

现在，其他人会帮助我，所以我想添加一些版本控制，因为网站的“简单”部分已经完成，我们将做更多有趣的事情。无论好坏，我都选择了 Git 作为 DVCS。我已经在服务器上安装了 git，但不确定在服务器上的哪里初始化 git 存储库。

我的意思是，我应该在我的网站的基本目录中初始化 git 存储库吗？如果是这样，假设存在各种开放，这会是一个问题吗？

我在其他项目中使用过 git，但不用于网站，除了使用 RedHat Openshift 做一些教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:16:17.373

这是一个可能的工作流程：

1.  在基本文件夹中初始化计算机上的 Git 存储库
2.  创建一个`develop`分支。这是所有发展将发生的地方
3.  让您的合作者克隆您的存储库
4.  任何时候提交，都在`develop`分支上进行。任何时候你的合作者提交，让他们提交`develop`，然后推送给你
5.  准备好部署到实际的 Web 服务器后，切换到`master`分支并合并`develop`到其中
6.  rsync/ftp 到服务器

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T10:22:03.093

使用 git 托管服务（例如[github](http://github.com/)或[gitorious](http://www.gitorious.com/) ）会容易得多。存储库管理不是一件容易的事，尤其是对于新手 git 用户。

Once you have a repository set up, cloning it is the same on all machines (development machines and server).

The tricky part is deciding how to deploy to server, but that a completely different topic.

# windows-phone-7 - 如何在 bingmap 图钉中应用弹出窗口

> ID：15172932
> 
> 赞同：0
> 
> 时间：2013-03-02T09:33:09.630
> 
> 标签：windows-phone-7, bing-maps, pushpin

我有 bing 地图控件，其中有很多地图播放器

我想在我的图钉点击事件中显示弹出窗口，就像这样

[Bing Maps 为图钉、弹出窗口和 Transit 带来新外观 - 更多信息请访问：http://wmpoweruser.com/bing-maps-gets-new-look-for-pushpins-popups-and-transit/#sthash.ApL3q6bA。 dpuf](http://wmpoweruser.com/bing-maps-gets-new-look-for-pushpins-popups-and-transit/)

我怎么能做到这一点。

给我一些关于在 bing 地图控件中开发弹出窗口的建议，是的，我想在这个弹出窗口中显示纬度、经纬度和地址

穆推码

```
 void _ClsGetDeviceMap_WorkFinished(bool success)
        {
            try
            {
                if (ClsGetDeviceMap.lstresponsecode.ElementAt<string>(0).Trim() == "1")
                {
                    MessageBox.Show(ClsGetDeviceMap.lstresponsemsg.ElementAt<string>(0));

                    for (int i = 0; i <= ClsGetDeviceMap.lstLongLatitude.Count - 1; i++)
                    {
                        string lat, lon;
                        lat = ClsGetDeviceMap.lstLatitude.ElementAt<string>(i).Trim();
                        lon = ClsGetDeviceMap.lstLongLatitude.ElementAt<string>(i).Trim();
                        Latitude = Convert.ToDouble(lat);
                        LongLatitude = Convert.ToDouble(lon);
                        GpsSpeed = 44.21811;

                        map1.Center = new GeoCoordinate(Latitude, LongLatitude, GpsSpeed);
                        map1.ZoomLevel = 17;
                        map1.ZoomBarVisibility = Visibility.Visible;

                        imglayer[i] = new MapLayer();
                        Image img = new Image();
                        img.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri("/ReachMe;component/Images/mappinicn.png", UriKind.Relative));
                        img.Opacity = 0.8;
                        img.Stretch = System.Windows.Media.Stretch.None;
                        GeoCoordinate location = new GeoCoordinate() { Latitude = Latitude, Longitude = LongLatitude };
                        PositionOrigin position = PositionOrigin.Center;                        
                        imglayer[i].AddChild(img, location, position);

                        Pushpin pin = new Pushpin();

                        ToolTipService.SetToolTip(pin, "Pushpin 1\r\nThis is the first pushpin infobox.");
                        imglayer[i].Children.Add(pin);

                        map1.Children.Add(imglayer[i]);
                        myCoorditeWatcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
                        myCoorditeWatcher.MovementThreshold = 20;

                        var g1 = GestureService.GetGestureListener(imglayer[i]);
                        g1.Tap += new EventHandler<GestureEventArgs>(g1_Tap);

                    }

                }
                else// if error
                {
                    MessageBox.Show("No Data Between This data");
                   // NavigationService.Navigate(new Uri("/ReachMeView/Login.xaml", UriKind.RelativeOrAbsolute));
                }
            }
            catch (Exception ex)
            {
                Error.WriteErrorLog(ex.ToString(), "MainPage.xaml", "Data_WorkFinished");
            }
        }

        void g1_Tap(object sender, GestureEventArgs e)
        {
            for (int i = 0; i <= ClsGetDeviceMap.lstLongLatitude.Count - 1; i++)
            {
                if (sender.Equals(imglayer[i]))
                {
                    MessageBox.Show(ClsGetDeviceMap.lstLocationName.ElementAt<string>(i).Trim());
                    MessageBox.Show(ClsGetDeviceMap.lstLatitude.ElementAt<string>(i).Trim());
                    MessageBox.Show(ClsGetDeviceMap.lstLongLatitude.ElementAt<string>(i).Trim());
                    MessageBox.Show(ClsGetDeviceMap.lstDate.ElementAt<string>(i).Trim());                   
                }
            }
        } 
```

# javascript - 尝试在线加载 CSS 和 JS，如果失败则在本地加载

> ID：15172933
> 
> 赞同：0
> 
> 时间：2013-03-02T09:33:16.173
> 
> 标签：javascript, css, dynamic, load

我有一个网页要托管在支持 Wi-Fi 和 3G 的移动设备上。

由于 3G 数据可能要花钱并且通常是有限的，我想尽量减少设备上传的数据量。所以我基本上想做的是以下几点：

尝试在线加载 jquery 脚本：

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.8.13/jquery-ui.min.js"></script> 
```

**只有**当它无法正确加载时（例如，如果用户没有连接到互联网，只是连接到手机），从本地副本加载它：

```
<script type="text/javascript" src="js/jquery-copy.js"></script> 
```

这同样适用于 css 文件。

我考虑过`<script id="loadable"></script>`先使用然后使用`$("#loadable").load("url");`，但显然我依赖于首先加载 jquery，这是要最小化的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:35:37.317

```
 <script src="http://code.jquery.com/ui/1.8.13/jquery-ui.min.js"></script>
 <script>!window.jQuery && document.write(unescape('%3Cscript src="js/jquery-copy.js"%3E%3C/script%3E'))</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:37:18.947

我编辑了答案。我认为波纹管是最优雅的解决方案。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="path/to/your/jquery"><\/script>')</script> 
```

[使用 Google 托管 jQuery 的最佳方式，但退回到我在 Google 上的托管库失败](https://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:41:57.807

看看他们是如何在[HTML5 样板文件中做到这一点的。](http://html5boilerplate.com/)

如果您查看GitHub存储库[中 index.html 文件的底部，您将看到以下内容...](https://github.com/h5bp/html5-boilerplate/blob/master/index.html#L27)

```
 <script src="http://code.jquery.com/ui/1.8.13/jquery-ui.min.js"></script>
     <script>!window.jQuery && document.write(unescape('%3Cscript src="js/jquery-copy.js"%3E%3C/script%3E'))</script> 
```

**它是如何工作的？**

*   首先，尝试获取 CDN 版本（上面使用了 Google 的 CDN url，但当然您可以链接到任何您喜欢的来源）。

*   紧接着，我们检查 jQuery 全局对象。

*   如果 jQuery 不存在，显而易见的假设是我们没有设法从 CDN 中获取代码，因此我们 document.write 一个脚本标签来代替从本地源获取副本。

# c++ - 无符号下溢机制

> ID：15172936
> 
> 赞同：4
> 
> 时间：2013-03-02T09:33:40.127
> 
> 标签：c++, c

我知道以下

```
unsigned short b=-5u; 
```

由于下溢，计算 b 为 65531，但我不明白 5u 在转换为 -5 之前是否转换为有符号整数，然后重新转换回无符号以存储在 b 中或 -5u 等于 0 - 5u （应该不是这样，-x 是一元运算符）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T09:43:05.307

`5u`是一个文字无符号整数，`-5u`是它的否定。对无符号整数的否定定义为从 2**n 中减去，其结果与从零包装减法的结果相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:45:54.417

`5u`是一个单一的标记，一个具有类型的右值表达式`unsigned int`。`-`根据无符号算术规则（算术模 2^n，其中*n*是无符号类型的位数）对其应用一元运算符。结果转换为`unsigned short`; 如果它们不适合（并且它们不会 if `sizeof(int) > sizeof(short)`），则转换也将使用模算术完成（模 2^n，其中*n*是目标类型中的位数）。

可能值得注意的是，如果原始参数具有 type `unsigned short`，则实际步骤是不同的（尽管结果总是相同的）。因此，如果你写过：

```
unsigned short k = 5;
unsigned short b = -k; 
```

第一次操作将取决于短的大小。如果短裤小于整数（通常，但并非总是如此），第一步是提升 `k`为`int`. （如果 short 和 int 的大小相同，则第一步是提升`k`为`unsigned int`；从那时起，一切都如上所示。）根据有符号整数算术的规则，一元`-`将应用于 this `int`（因此，导致值为 -5)。结果 -5 将`unsigned short`使用模算术隐式转换为 ，如上所述。

一般来说，这些区别没有什么区别，但在你可能有一个整数值的情况下`INT_MIN`，它们可以；在 2 的补码机器上`-i`，其中`i`的类型`int`和值`INT_MIN`是实现定义的，并且在以后转换为无符号时可能会导致奇怪的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:56:40.950

ISO/IEC 14882-2003 第 4.7 节说：

"If the destination type is unsigned, the resulting value is the least unsigned integer congruent to the source integer (modulo 2^n where n is the number of bits used to represent the unsigned type). [ Note: In a two’s complement representation, this conversion is conceptual and there is no change in the bit pattern (if there is no truncation). —end note ]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T09:47:07.303

技术上不是下溢，只是`-5`当显示为无符号数时有符号值的表示。请注意，有符号和无符号数字具有相同的“位”——它们只是显示方式不同。如果要将值打印为有符号值[假设它使用符号位扩展以填充剩余位]，它将显示 -5。[这里假设它是使用 2s 补码的典型机器。C 标准不需要这样，`signed`并且`unsigned`类型是相同的位数，也不是计算机使用 2s 补码来表示有符号数 - 显然，如果它不使用 2s 补码，它将与您显示的值不匹配，所以我假设您的是一个 2s 补码机——它是所有常见的处理器，例如 x86、68K、6502、Z80、PDP-11、VAX、29K、8051、ARM、MIPS。但从技术上讲，C 没有必要正常运行]

当您使用一元运算符`-x`时，它的效果与`0-x`[这适用于计算机和数学 - 它具有相同的结果] 相同。

# javascript - 在 jqgrid 的寻呼机中重新定位 pagenumber 字段

> ID：15172937
> 
> 赞同：1
> 
> 时间：2013-03-02T09:33:55.783
> 
> 标签：javascript, jquery, jqgrid

我 在我的 cshtml 页面中使用**jqgrid 。**问题是网格区域很窄，所以我希望网格寻呼机中的页码字段出现在网格附近页面的其他位置。我只需要重新定位页码字段，而不是寻呼机本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T19:20:20.803

***页码***字段是​​寻呼机本身的一部分，因此不能与之分开。但是有一个解决方法。您可以将变量设置为[链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)`pginput`上给出的 false 。它确定用户可以在其中更改所请求页面的编号的输入框是否应该可用。因此，在设置为 false 时，它​​不会出现在用户面前。使用下面给出的代码，您可以获得网格的当前页码并设置到您在页面上定义的任何文本框中。

```
$('#your_grid').getGridParam('page'); // get current page 
```

当用户更改页码时，您需要做的就是使用下面的代码设置页码。

```
$('#your_grid').setGridParam({page:value}).trigger('reloadGrid'); // set page to grid and reload. value is the page number to be set 
```

此代码应在您定义的文本框的 keydown 函数中处理以保存页码。

# php - 如何防止 javascript 代码被盗？

> ID：15172939
> 
> 赞同：19
> 
> 时间：2013-03-02T09:34:13.150
> 
> 标签：php, javascript

实际上，我正在开发一个 Chrome 扩展程序和一个 jQuery 插件来上传它并在 Codecanyon 上出售它。当我“检查源”页面并单击“资源”选项卡时，javascript 文件看起来是空的。Codecanyon 如何做到这一点？我也想在自己的网站上进行文件防盗，但我不知道该怎么做。我知道 php 和 javascript，但没有办法做到这一点，因为浏览器会下载文件来执行它。

[您可以在此处](http://demos.pixelworkshop.fr/circular_countdown_cc/)查看示例。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-02T09:41:16.203

您无法隐藏它，因为您的浏览器需要它来执行它。就那么简单。

您需要了解它是在客户端执行的脚本。它没有被编译（意味着它不是二进制文件（0 和 1 机器语言））。所以它可以自由阅读。

不过，您可以使用[YUI 压缩器等工具对其进行混淆](http://yui.github.com/yuicompressor/)

基本上这种工具去除了额外的间距、标签行返回和重命名方法（如方法“a”代表“MyShinyMethodWhoMakesNiceStuff”）和变量。这使得阅读和理解代码变得非常困难。因此逆向工程更难实现。

有些人使用一些技巧，如 base64 或其他使用函数编码和解码部分代码的技巧，但这只是技巧，不会愚弄敏锐的眼睛。

通过混淆，你让人们花更多的时间来分析你的代码，因此窃取更加复杂，并且需要时间。假设您制作了一个不错的 javascript 插件，它使每个白色背景都变成紫色（好吧，不是很好的例子，但它只是用于制作图像示例）。有人可能想偷它，把它变成蓝色而不是紫色。如果代码被混淆了，他可能会认为复制你的想法更容易，并用他自己的代码和蓝色背景自己重写它，这将比逆向工程师花费更少的时间，并且理解你的井，也更容易在时间上维护。最后，他将“仅”“窃取”您的想法，但不会“窃取”您的代码。

我认为最终，这只是时间问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-02T09:39:16.510

如果你看到它是空的，这意味着它是空的。无法向必须执行代码的客户端隐藏您的 javascript 代码。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-02T09:40:45.870

您只能尝试降低其可读性（通过小型化和混淆），但代码仍会被转移，并且可以进行逆向工程。

您示例中的实际代码与 jquery.js 文件一起下载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T05:26:05.143

关于 JavaScript 的“保护”——基本上是其他人所说的。

解释[您提供的示例](http://demos.pixelworkshop.fr/circular_countdown_cc/)：

实际上，[http://demos.pixelworkshop.fr/circular_countdown_cc/js/countdown.min.js](http://demos.pixelworkshop.fr/circular_countdown_cc/js/countdown.min.js)似乎是空的，但是实际的插件代码附加到 jquery.js 文件中，从第 58 行开始：

[http://demos.pixelworkshop.fr/circular_countdown_cc/js/jquery.js](http://demos.pixelworkshop.fr/circular_countdown_cc/js/jquery.js)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T06:20:13.877

您可以使用这个**javascript 混淆器工具：**

[http://www.javascriptobfuscator.com](http://www.javascriptobfuscator.com)
[http://www.daftlogic.com/projects-online-javascript-obfuscator.htm](http://www.daftlogic.com/projects-online-javascript-obfuscator.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-11T14:05:14.833

如果您是按站点许可代码，我建议您也锁定您的 javascript 域。

您可以通过简单地检查加密文件中某处的 window.location 来自己执行此操作。这不会很安全，但对于 90% 的用户来说，他们只是将脚本放到目录中并希望它能正常工作，它会提供一定程度的威慑。

您还可以使用[https://domainlockjs.com](https://domainlockjs.com)（免费）轻松地将脚本锁定到域。这是一个稍微好一点的解决方案，因为 DomainLockJS 会抛出难以跟踪的错误并且更难调试。

更复杂的方法是使用 Ajax 脚本注入，并允许特定域访问脚本/不触发 XSS 错误。这是最难设置的，但是如果你注入大量的js，它可能是最难绕过的。

但是，所有这些都可以通过熟练的编码器来规避……您只是让事情变得困难，而不是不可能。

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2013-03-15T16:53:16.667

Liblock 是我自己搭建的一个小工具。它加密你的 JS 源——它不是简单的混淆，而是加密的良好安全性。

当您检查客户端中的 DOM 时，您将看到的只是：绑定到 HTML 头中的每个脚本的 nplreq(url)。

在这里查看它是如何工作的[liblock-demo](http://ec2-176-34-64-10.eu-west-1.compute.amazonaws.com/nopro/xscroll) - 这是一个仅用于将脚本隐藏在“nopro_lib”和“xscroll.js”中的演示。

加密和解密对浏览器是完全透明的。它在 PC 上使用 Firefox、Chrome、Opera、Konqueror、IE8-10 以及在 Android 平板电脑上使用 Dolphin 和 Safari 进行了测试。

源头被安全地隐藏起来，只有付出巨大的努力才能再次打开它们。使用 AES (Rijndael 256) 使用一次性密钥完成加密，该密钥在客户端和（liblock-）服务器之间使用 Diffie-Hellman 协商。

# android - Android：如何在真实设备中永远运行android服务？

> ID：15172952
> 
> 赞同：1
> 
> 时间：2013-03-02T09:36:19.297
> 
> 标签：android

我创建了一个提供用户位置的活动，并使用 Web 服务将此信息发送到服务器。到此为止，项目运行成功。但我想将此活动作为服务运行，因此我创建了服务并复制了活动代码并将其粘贴到服务代码中。但它不起作用？我对此进行了研究，但无法弄清楚。

```
GPSTracker.java

package com.example.meragps;

import java.io.IOException;
import java.util.Date;
import java.util.List;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.telephony.TelephonyManager;
import android.text.format.DateFormat;
import android.util.Log;

public class GPSTracker extends Service implements LocationListener 
{

String imei="";
String simSerialNumber="";
String stAdd="";
String currentTime="";
String resultData="";

private static final String SOAP_ACTION = "http://tempuri.org/GetCurrentLocation";
private static final String METHOD_NAME = "GetCurrentLocation";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://"my static ip"/GPSTracker/Service1.asmx";

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

 // The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 1000; // 1000 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 20; // 20 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) 
{
    this.mContext = context;
    getLocation();

}
@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
  //TODO do something useful
    gpsTraking();
    passing();

  return Service.START_NOT_STICKY;
}

public Location getLocation() 
    {

    try 
    {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) 
    {
            // no network provider is enabled
    } 
        else 
    {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) 
    {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) 
    {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) 
    {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
    }
    }
    }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) 
    {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) 
    {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) 
    {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
    }
    }
    }
    }
    }

    } catch (Exception e) 
    {
        e.printStackTrace();
    }

    return location;
    }

public void gpsTraking()
{
      // create class object

    // check if GPS enabled
    if(true)
    {

        double latitude = getLatitude();
        double longitude = getLongitude();
        Geocoder gc=new Geocoder(getBaseContext());
        try 
        {
            stAdd="";
            List<Address> list= gc.getFromLocation(latitude, longitude, 2);

            Address a= list.get(0);

            for(int i=0;i<=a.getMaxAddressLineIndex();i++)
            {
                    stAdd=stAdd+"\n "+a.getAddressLine(i);
            }
            stAdd=stAdd+" "+a.getLocality()+"\n"+a.getFeatureName();

        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    // \n is for new line
        CharSequence d = DateFormat.format("dd-MM-yyyy hh:mm:ss", new Date());
        currentTime= d.toString();
       Log.d("currentTime",currentTime);

        TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
     // get IMEI
     imei = tm.getDeviceId();
     // get SimSerialNumber
   simSerialNumber = tm.getSimSerialNumber();

    }

    else
    {
        /* can't get location
        GPS or Network is not enabled
        Ask user to enable GPS/network in settings*/
        showSettingsAlert();
    }

    }

public void passing()
{
      SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

       request.addProperty("strIMEINumber",imei);
       request.addProperty("strSIMNumber",simSerialNumber);
       //request.addProperty("strAddress","Rajasthan 400031");
       request.addProperty("strAddress",stAdd);
       request.addProperty("strTime",currentTime);

           SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
           envelope.dotNet = true;
           envelope.encodingStyle=SoapSerializationEnvelope.ENC;
           envelope.setOutputSoapObject(request);
           System.setProperty("http.keepAlive", "false");

            try 
            {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                androidHttpTransport.call(SOAP_ACTION, envelope);
                //SoapObject response = (SoapObject) envelope.getResponse();
                SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
                resultData= result.toString();              
                //editText.setText(resultData);
                Log.d("response", resultData);
            }
           catch (Exception e) 
            {
                // TODO Auto-generated catch block

                Log.d("My Error", ""+e.getMessage());

            }

    } 

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null)
{
        locationManager.removeUpdates(GPSTracker.this);
}
}

/**
 * Function to get latitude
 * */
public double getLatitude()
{
    if(location != null)
{
        latitude = location.getLatitude();
}

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude()
{
    if(location != null)
{
        longitude = location.getLongitude();
}

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() 
{
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will launch Settings Options
 * */
public void showSettingsAlert()
{
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() 
{
        public void onClick(DialogInterface dialog,int which) 
{
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
}
});

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() 
{
        public void onClick(DialogInterface dialog, int which) 
{
        dialog.cancel();
}
});

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) 
{
}

@Override
public void onProviderDisabled(String provider) 
{
}

@Override
public void onProviderEnabled(String provider) 
{
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) 
{
}

@Override
public IBinder onBind(Intent arg0) 
{
    return null;
}
} 
```

MyReceiver.java

```
 package com.example.meragps;

    package com.example.meragps;

    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.util.Log;

    public class MyReceiver extends BroadcastReceiver {

     public static final String TAG = "com.example.meragps";
     @Override
     public void onReceive(Context context, Intent intent) {
      // just make sure we are getting the right intent (better safe than sorry)
      /*if( "android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) 
      {
       ComponentName comp = new ComponentName(context.getPackageName(),
       LocationLoggerServiceManager.class.getName());
       ComponentName service = context.startService(new Intent().setComponent(comp));
       if (null == service){
        // something really wrong here
        Log.e(TAG, "Could not start service " + comp.toString());
       }
      } else {
       Log.e(TAG, "Received unexpected intent " + intent.toString());   
      }*/
         try
         { 
             Intent serviceIntent = new Intent(context, GPSTracker.class);
            context.startService(serviceIntent);     
         }
         catch(Exception e)
         {
             Log.e("My Service Error",e.getMessage());
         }

    }

    } 
```

MeraGPS Manifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.meragps"
  android:versionCode="1"
  android:versionName="1.0" >
     <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" /> 
      <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
      <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
       <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
      <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
      <uses-permission android:name="android.permission.INTERNET" /> 
        <application
    android:allowBackup="true">

   <receiver android:name=".MyReceiver" 
     android:enabled="true" 
     android:exported="false"
     android:label="MyReceiver">
  <intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
  </intent-filter>
    </receiver>

  <intent-filter>

    <action android:name="android.intent.action.MAIN" />
      <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter> 

      </application>

      </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:47:51.693

服务始终运行模式...否则您需要创建广播接收器..然后服务将在您启动设备时启动.. [BroadCastReciever的链接](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# html - KineticJS Image Sprite 作为画布中的工具栏按钮图像

> ID：15172958
> 
> 赞同：3
> 
> 时间：2013-03-02T09:36:46.327
> 
> 标签：html, canvas, sprite, toolbar, kineticjs

我正在尝试使用 KineticJS 在画布（无 div 元素）中创建一个工具栏。我有一个由 10 个图像组成的图像精灵，我需要将单个精灵图像映射为工具栏中的按钮。如何使用 KineticJS.Sprite 做到这一点。

编辑：

事件处理不正确（我从最后一个精灵索引（即 7）获取订阅，我是否应该创建单独的对象来存储每个精灵事件）。？

编辑 2：链接已删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:24:58.193

经过Kinetic JS代码库终于找到了解决上述问题的方法，最终实现分享如下：

```
var buttons = {
        button: [{
            //button1
            x: 0,
            y: 0,
            width: 28,
            height: 28
        }, {
            //button2
            x: 29,
            y: 0,
            width: 28,
            height: 28
        }, {
            //button3
            x: 58,
            y: 0,
            width: 28,
            height: 28
        }]};
var imageObj = new Image();
imageObj.onload = function () {
        for (var i = 0; i < 12; i++) {
            var blob = new Kinetic.Sprite({
                x: 50 + i * 30,
                y: 40,
                name: i,
                image: imageObj,
                index: i,
                animation: 'button',
                animations: buttons
            });
            toolbarbuttonGroup.add(blob);
        }

        toolbarbuttonGroup.on('click', function (evt) {
            var buttonId= evt.shape;
            alert('Clicked on \"' + buttonId.getName() + '\"');
        }); 
```

# android - 如何在 ExpandableListView 中为子项放置不同的布局？

> ID：15172959
> 
> 赞同：2
> 
> 时间：2013-03-02T09:36:58.323
> 
> 标签：android, android-layout, expandablelistview, expandablelistadapter, get-childitem

我开发了一个 Android 应用程序，因此我尝试使用`ExpandableListView`为每个孩子使用两种不同的布局。但我有一个问题，似乎无法解决。我认为问题是我没有得到合适的孩子。两个孩子同时显示两个布局。

这是我的**班级适配器**！

```
public class ExpandListAdapter extends BaseExpandableListAdapter {

private Context context;
private ArrayList<ExpandListGroup> groups;
public ExpandListAdapter(Context context, ArrayList<ExpandListGroup> groups) {
this.context = context;
this.groups = groups;
}

public void addItem(ExpandListChild item, ExpandListGroup group) {
if (!groups.contains(group)) {
groups.add(group);
}
int index = groups.indexOf(group);
ArrayList<ExpandListChild> ch = groups.get(index).getItems();
ch.add(item);
groups.get(index).setItems(ch);
}
public Object getChild(int groupPosition, int childPosition) {
//TODO Auto-generated method stub
ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();
return chList.get(childPosition);
}
@Override
public int getChildTypeCount() {
return 2;
}

public long getChildId(int groupPosition, int childPosition) {
//TODO Auto-generated method stub
//return childPosition;
return (long)( groupPosition*50+childPosition );
}
@Override
public int getChildType(int groupPosition, int childPosition)
{
int result = 0;
if (childPosition == getChildrenCount(groupPosition)-1)
result = 1;

return result;
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
ViewGroup parent) {
TextView textView = null;
ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);
/*  if (view == null) {
if(childPosition == 0){
LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
view = infalInflater.inflate(R.layout.expandlist_child_item, null);}
else if (childPosition == 1){
LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
view = infalInflater.inflate(R.layout.child2, null);

}
}*/

if (view == null) {
int itemType = getChildType(groupPosition,childPosition);
LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
//view = infalInflater.inflate(R.layout.expandlist_child_item, null);

if(itemType == 0)
{

view = infalInflater.inflate(R.layout.expandlist_child_item, null);
textView = (TextView) view.findViewById(R.id.tvChild);
textView.setText("0");
//textView.setTag(child.getTag());
}
else
{ view = infalInflater.inflate(R.layout.child2, null);
textView  = (TextView) view.findViewById(R.id.tvChild1);
textView.setText("1");
textView.setTag(child.getTag());}
/*
switch (itemType) {
case 0:
{    view = infalInflater.inflate(R.layout.expandlist_child_item, null);
textView = (TextView) view.findViewById(R.id.tvChild);
textView.setText("0");
//textView.setTag(child.getTag());
break;}
case 1:
{   view = infalInflater.inflate(R.layout.child2, null);
textView  = (TextView) view.findViewById(R.id.tvChild1);
textView.setText("1");
textView.setTag(child.getTag());
break;}
}
*/

//textView.setPadding(30,20,30,20);

}

//TODO Auto-generated method stub
return view;
}

public int getChildrenCount(int groupPosition) {
//TODO Auto-generated method stub
ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();

return chList.size();

}

public Object getGroup(int groupPosition) {
//TODO Auto-generated method stub
return groups.get(groupPosition);
}

public int getGroupCount() {
//TODO Auto-generated method stub
return groups.size();
}

public long getGroupId(int groupPosition) {
//TODO Auto-generated method stub
return groupPosition;
}

public View getGroupView(int groupPosition, boolean isLastChild, View view,
ViewGroup parent) {
ExpandListGroup group = (ExpandListGroup) getGroup(groupPosition);
if (view == null) {
LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
view = inf.inflate(R.layout.expandlist_group_item, null);
}
TextView tv = (TextView) view.findViewById(R.id.tvGroup);
tv.setText(group.getName());
//TODO Auto-generated method stub
return view;
}

public boolean hasStableIds() {
//TODO Auto-generated method stub
return true;
}

public boolean isChildSelectable(int arg0, int arg1) {
//TODO Auto-generated method stub
return true;
} 
```

**child2.xml** _

 **```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

      <TextView
        android:id="@+id/tvChild1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/Black"
        android:textSize="17sp" >
  </TextView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/b1" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/checkboxh" />

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />

</LinearLayout> 
```

**expandablelist_child_item.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="55dip"
    android:background="@color/ExpandChildBackground"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvChild"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/Black"
        android:textSize="17sp" >
   </TextView>
    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/b1" />
</LinearLayout> 
```

下面你可以看到第一个和第二个孩子的奔跑。

![](../Images/4e421c4b32d4914a0650bc338aa80c9c.png)

![](../Images/ce9be3f9107c557dcc8f3c2041a2c72a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T21:10:46.283

```
int result = 0;
if (childPosition == getChildrenCount(groupPosition)-1)//logical fail ?
result = 1; 
```

尝试返回“child_pos”

getChildrenCount 会给你每次相同的值。你有 2 个孩子 -1 = 1

顺便提一句。检查这个初始化

```
ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-19T08:22:12.030

只有在 view 为 null 的情况下才执行以下代码片段，这是错误的，并且无论 view 是否为 null / 不为 null 都应该这样做。

```
if(itemType == 0)
{

view = infalInflater.inflate(R.layout.expandlist_child_item, null);
textView = (TextView) view.findViewById(R.id.tvChild);
textView.setText("0");
//textView.setTag(child.getTag());
}
else
{ view = infalInflater.inflate(R.layout.child2, null);
textView  = (TextView) view.findViewById(R.id.tvChild1);
textView.setText("1");
} 
```**

# mysql - 将数据库从 WebMatrix 迁移到 1and1 服务器

> ID：15172962
> 
> 赞同：1
> 
> 时间：2013-03-02T09:37:10.910
> 
> 标签：mysql, wordpress, webmatrix, migrate

我已经在我的计算机上创建了一个带有 WordPress 和 WebMatrix 的网站，现在我想让它在 1&1 的服务器上运行和托管。我可以使用 ftp 传输文件，但不能传输数据库及其内容。如何从 WebMatrix 中提取数据库？请注意，迁移按钮不适用于我的 MySql 数据库！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:12:24.433

您需要在本地转储数据库，然后通过 phpMyAdmin 在主机上运行生成的脚本。最简单的方法是连接到本地 MySQL 数据库并运行 mysqldump。检查 WebMatrix 中的数据库工作区以获取数据库的名称（我的是 wordpress960）。然后打开命令提示符，并运行以下命令：

`mysqldump -u root -p[root_password] [database_name] > [database_name].sql`

获得 *.sql 文件后，您需要将其上传到主机上的数据库。通常，您主机上的 cpanel 将通过 phpMyAdmin 提供一些访问权限。这是一个解释如何进行数据库还原的链接：

[http://web-kreation.com/tutorials/migrating-a-wordpress-site-ftp-phpmyadmin-and-sql-queries/](http://web-kreation.com/tutorials/migrating-a-wordpress-site-ftp-phpmyadmin-and-sql-queries/)

希望这会有所帮助！

# python - 从相关文件夹导入 Python 模块

> ID：15172965
> 
> 赞同：0
> 
> 时间：2013-03-02T09:37:20.693
> 
> 标签：python

我正在创建一个 python 程序，我想把它分成单独的文件。我正在使用 import 来执行此操作，但它不起作用（具体来说，一个变量存储在一个 python 文件中，并且它没有被主文件读取。

```
program /

     main.py

     lib /

          __init__.py

          config.py

          functions.py 
```

我在 main.py 中有：

```
import lib.config
import lib.functions
print(main) 
```

和 config.py 有

```
 main = "hello" 
```

当我执行文件 main.py 时，我应该得到输出“hello”，但我没有。我对存储在functions.py中的函数有同样的问题

任何帮助都会很棒，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:41:29.553

使用简单`import`语句导入模块不会*将该*模块中的名称复制到您自己的全局命名空间中。

`main`通过属性访问引用名称：

```
print(lib.config.main) 
```

或使用以下`from ... import ...`语法：

```
from lib.config import main 
```

反而。

[您可以在 Python 教程的模块部分](http://docs.python.org/3/tutorial/modules.html)了解有关导入工作原理的更多信息。

# javascript - 预计算 SVG 文本坐标和宽度

> ID：15172967
> 
> 赞同：0
> 
> 时间：2013-03-02T09:37:29.993
> 
> 标签：javascript, d3.js

我想编写一个程序，它将根据一些数据自动构建一个带有 SVG 的图表。图表中有几个带文字的箭头。

现在我面临一个问题：如何提前知道文本的长度？箭必须有多长？完整的文本必须放在箭头上方。

有人有想法吗？？我怎么知道文本在 SVG 中需要多少位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:05:59.717

看一下测量文本元素[边界框](http://www.w3.org/TR/SVG/types.html#InterfaceSVGLocatable)的尺寸。如果要预先计算，可以考虑使元素不可见。

# objective-c - 附加到 NSTextView 并滚动

> ID：15172971
> 
> 赞同：25
> 
> 时间：2013-03-02T09:37:41.190
> 
> 标签：objective-c, macos, cocoa, nstextview

好的，我需要的*应该*很简单。然而，我到处寻找，我不确定我是否找到了 100% 有效的东西（这也是过去困扰我的东西）。

所以，我们在这里：

*   我希望能够**附加**到`NSTextView`
*   附加后，`NSTextView`应该向下滚动（以便最新附加的内容可见）

比较直白吧？

所以......有什么想法吗？（一个完全执行这个简单“技巧”的代码示例将非常理想......）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-02T09:47:55.343

在交叉引用了几个答案和来源（进行了一些调整）之后，这里的答案*确实*有效（假设 `_myTextView`是一个`NSTextView`出口）：

```
- (void)appendToMyTextView:(NSString*)text
{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSAttributedString* attr = [[NSAttributedString alloc] initWithString:text];

        [[_myTextView textStorage] appendAttributedString:attr];
        [_myTextView scrollRangeToVisible:NSMakeRange([[_myTextView string] length], 0)];
    });
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-09T21:52:54.870

和分别从 OS X [10.0](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableAttributedString_Class/index.html#//apple_ref/occ/instm/NSMutableAttributedString/appendAttributedString:)`appendAttributedString`和[10.6](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/index.html#//apple_ref/occ/instm/NSResponder/scrollToEndOfDocument:)开始可用`scrollToEndOfDocument`

```
extension NSTextView {
    func append(string: String) {
        self.textStorage?.appendAttributedString(NSAttributedString(string: string))
        self.scrollToEndOfDocument(nil)
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-02T09:51:45.430

只需使用这种方式：

```
for (NSInteger i=1; i<=100; i++) {
    [self.textView setString:[NSString stringWithFormat:@"%@\n%@",[self.textView string],@(i)]];
}

[self.textView scrollRangeToVisible:NSMakeRange([[self.textView string] length], 0)]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-06T11:22:14.070

这是 Anoop Vaidya 答案的 Swift 版本

```
extension NSTextView {
    func append(string: String) {
        let oldString = self.string == nil ? "" : self.string!
        let newString = NSString(format: "%@%@", oldString, string)
        self.string = newString
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-10-25T09:13:01.127

这是一个更快捷的*解决*方案：

```
extension NSTextView {
    func appendString(string:String) {
        self.string! += string
        self.scrollRangeToVisible(NSRange(location:countElements(self.string!), length: 0))
    }
} 
```

# sql - SQL Query，如何返回不在其他 2 个表中的元素

> ID：15172979
> 
> 赞同：1
> 
> 时间：2013-03-02T09:38:44.493
> 
> 标签：sql, join

这是我的数据

电影表：

```
id title
10 Promise Land
13 Alive
14 Bruce Almighty
15 Decay
19 Malcom X 
```

用户表：

```
id username
1  Franck
2  Matt 
```

存档表：

```
userid movieid
1      13
2      14
1      14 
```

我想获取所有不在用户 id = 1 的存档表中的 movies.id、movies.title。我想使用 JOINS（我不想选择 select）

结果应该是：

```
id title
10 Promise Land
15 Decay
19 Malcom X 
```

以下 SQL 失败：

```
SELECT a.id,a.title 
FROM db.movies AS a
LEFT JOIN db.archive AS b ON a.id = b.movieid
LEFT JOIN db.users AS c ON c.id = b.userid
WHERE b.movieid IS NULL OR b.userid !=1; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:43:08.920

使用联接。您将 userid 过滤器放入 JOIN

```
SELECT
    a.id,a.title 
FROM
    binews.movies AS a
    LEFT JOIN
    binews.archive AS b ON a.id = b.movieid AND b.userid <> 1
WHERE
    b.movieid IS NULL; 
```

但是，您实际上是在问“在存档表中为该用户提供不存在的电影）

```
SELECT
    a.id,a.title 
FROM
    binews.movies AS a
WHERE
    NOT EXISTS (SELECT *
          FROM
             binews.archive AS b
          WHERE
             a.id = b.movieid AND b.userid <> 1); 
```

这通常更正确。在某些情况下，您将从 LEFT JOIN 中获得多行，其中用户 ID 多次使用相同的行。要更正此问题，您需要添加处理的 DISTINCT。

但是，EXISTS 删除了这个多行输出。

有关更多信息，请参见：http: [//explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:50:55.673

在 SQLServer2005+ 中，您可以将选项与 EXISTS 和[EXCEPT](http://msdn.microsoft.com/ru-ru/library/ms188055.aspx)运算符一起使用

```
SELECT *
FROM dbo.movies
WHERE EXISTS (
              SELECT id
              EXCEPT
              SELECT movieid
              FROM archive
              WHERE userid = 1
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/91f48/1)上的演示[](http://sqlfiddle.com/#!3/91f48/1)

 ****带有 NOT EXISTS AND [INTERSECT](http://msdn.microsoft.com/ru-ru/library/ms188055.aspx)运算符的**OR选项****

 **```
SELECT *
FROM dbo.movies
WHERE NOT EXISTS (                            
                  SELECT movieid
                  FROM archive
                  WHERE userid = 1
                  INTERSECT 
                  SELECT id
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/91f48/2)上的演示[](http://sqlfiddle.com/#!3/91f48/2)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:43:11.813

```
select * from binews.movies 
      where id not in(select movieid from binews.archive where userid<>1 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T10:13:46.163

感谢GBN。这是带有更正“AND b.userid = 1”的解决方案

```
SELECT
    a.id,a.title 
FROM
    binews.movies AS a
    LEFT JOIN
    binews.archive AS b ON a.id = b.movieid AND b.userid=1
WHERE
b.movieid IS NULL 
```******

# java - 问题返回数组

> ID：15172983
> 
> 赞同：0
> 
> 时间：2013-03-02T09:38:57.963
> 
> 标签：java, arrays

我有一个驾驶执照测试程序，其中用户在主方法中输入答案，然后在一个单独的类中需要有一个方法来查看用户是否通过了一个方法来判断有多少是错的和正确的，并且一个方法会输入数字将错误的答案放入数组中，然后主要方法需要打印出每个方法的结果。我的问题是错误的问题编号数组。我相信我正确地创建了它，但我无法获得将其打印出来的主要方法。谢谢

```
 public class DriverExam
   {
      static String[] correctAnswers={"b","d","a","a","c","a","b","a","c","d","b","c","d","a","d","c","c","b","d","a"};
      static String[] userAnswers=new String[20];

   //constructer
      public  DriverExam(String[] user)
      {
         userAnswers=user;
      }

   //method to see if you passed
      public static boolean passed()
      {
         boolean pass=false;
         int correctCount=0;
         int incorrectCount=0;
         for(int i=0;i<userAnswers.length;i++)
         {
            if(userAnswers[i].equals(correctAnswers[i]))
            {
               correctCount++;
            }
            else
            {
               incorrectCount++;
            }
         }

         if(correctCount>14)
         {pass=true;}
         return pass;

      }

      //method to find number correct
      public static int totalCorrect()
      {
         boolean pass=false;
         int correctCount=0;
         int incorrectCount=0;
         for(int i=0;i<userAnswers.length;i++)
         {
            if(userAnswers[i].equals(correctAnswers[i]))
            {
               correctCount++;
            }
            else
            {
               incorrectCount++;
            }
         }

         return correctCount;

      }

      //method to tell how many were not correct
      public static int totalIncorrect()
      {
         boolean pass=false;
         int correctCount=0;
         int incorrectCount=0;
         for(int i=0;i<userAnswers.length;i++)
         {
            if(userAnswers[i].equals(correctAnswers[i]))
            {
               correctCount++;
            }
            else
            {
               incorrectCount++;
            }
         }

         return incorrectCount;

      }

      public static int[] questionsMissed()
      {

         boolean pass=false;
         int correctCount=0;
         int incorrectCount=0;
         for(int i=0;i<userAnswers.length;i++)
         {
            if(userAnswers[i].equals(correctAnswers[i]))
            {
               correctCount++;
            }
            else
            {
               incorrectCount++;
            }
         }
      int[] questionWrong=new int[incorrectCount];

      for(int i=0;i<questionWrong.length;i++)
      {
      if(!userAnswers[i].equals(correctAnswers[i]))
      {i=questionWrong[i];
      }
      }
      return questionWrong;
      }
      }

import java.util.Scanner;
public class DriverExamDemo
{
public static void main(String[] args)
{
String[] userAnswers=new String[20];
String answer;

System.out.println("please enter the testee's answers as the correspond with the question number");

for(int i=0;i<userAnswers.length;i++)
{
Scanner input=new Scanner(System.in);
System.out.println("Q."+(i+1));
answer=input.next();
userAnswers[i]=answer;
}
// constructor to send the users answers
DriverExam exam1 = new DriverExam(userAnswers);

//Check passed boolean to see if the user passed or failed
if(DriverExam.passed())
System.out.println("you passed your driving exam");
else
System.out.println("you failed your driving exam");

//check how many answers were correct and incorrect
System.out.println("you answered "+DriverExam.totalCorrect()+" questions correctly");
System.out.println("you answered "+DriverExam.totalIncorrect()+" questions incorrectly");

int[] questionsWrong=DriverExam.questionsMissed();
for (int i=0;i<questionsWrong.length;i++)
{
System.out.println("you got question " +questionsWrong[i]+"incorrect");

}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:31:19.587

检查以下行，因为它没有意义，您正在为循环控制变量分配一个空数组的值。

```
i = questionWrong[i]; 
```

但是，你用来检查错误问题数字的整个算法是错误的，你应该尝试另一个。使用您的实现，您只需要解决整个问题的一个子集，您应该遍历所有问题，并获得不正确问题的数量。

顺便说一句，我认为您正在大量使用静态方法。从广义上讲，最好使用实例方法，并且对于您的情况是完全有效的。在您的情况下使用实例方法，允许在构造函数中进行所有计算，或者由构造函数调用方法，并避免在整个代码中重复相同的代码（循环）。

# xslt - 使用 XSL FO 的 HTML 到 PDF 存在分页问题 - 仅显示第一页

> ID：15172987
> 
> 赞同：1
> 
> 时间：2013-03-02T09:39:25.763
> 
> 标签：xslt, xsl-fo, apache-fop, html-to-pdf

我正在使用一个 Java 类（[http://pastebin.com/KhSGPmCV](http://pastebin.com/KhSGPmCV)），它接收一个 HTML 文档并尝试通过以下步骤将其转换为 PDF 文档：

1.  使用 Tidy 将其解析为 XML 文档。
2.  使用 XSLT 样式表 ( [http://pastebin.com/s45gRTKy](http://pastebin.com/s45gRTKy) ) 将 xml 转换为 FO 文档
3.  使用 Apache FoP 将 FO 转换为 PDF 文档。

我面临的问题只是我的 HTML 文档的第一页被转换为 PDF。我看到的警告信息是 -

`Mar 2, 2013 2:53:06 PM org.apache.fop.events.LoggingEventListener processEvent WARNING: Content overflows the viewport of an fo:block-container in block-progression direction by 350 millipoints. Content will be clipped. (See position 51:261)`

我很确定问题出在我正在使用的 XSL FO 样式表中。但是，即使在此样式表中添加/修改了很多变量之后，我也无法使第二页可见。有人可以帮我吗？

链接到我尝试转换为 PDF 的 HTML - [pastebin.com/iBLw8Pbv](http://pastebin.com/iBLw8Pbv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:45:12.220

您正在使用 Apache FOP 构建 PDF。在 xsl 中阅读这个非常重要的注释：

> 由于此样式表最初是由 Antenna House 开发的，用于与 XSL Formatter 一起使用，**因此它可能与其他 XSL-FO 处理器不兼容**。

如果您期望一个不错的输出，您可能会被迫使用 Antenna。如果您可以获得二进制文件，下面的脚本可能会有所帮助（Ubuntu）。如果您仍然使用 xsl: `<nobr>`is not in that xsl... 在您的 HTML 中，您必须将其替换为`<pre>`. 另一个问题是 tidy 似乎没有修复结束引号，并且会生成很多关于错误@ids 的警告（一些@ids 将包含@class）。

我不知道如何解决这个问题。我的类路径上没有 fop，所以我需要这个：

```
javac -cp .:/usr/share/java/fop.jar:/usr/share/java/jtidy.jar Html2PDF.java 
java -cp .:/usr/share/java/fop.jar:/usr/share/java/jtidy.jar Html2PDF samplehtml.txt xhtml2fo.xsl 
```

我编写了这个简单的脚本，它对您的调试有很大帮助：

```
# remove broken IDs
sed "s/id=\"[^\"]* //g" samplehtml.txt > samplehtml.txt.fixedID

# use tidy
tidy -utf8 -w 255 -indent -quiet -asxhtml < samplehtml.txt.fixedID > samplehtml.txt.tidy

# change 
#   -  &nbsp; to &$160;
#   -  remove xmlns declaration
#   -  <nobr to <pre ;; </nobr to </pre
sed -e "s/nbsp/#160/g;s/<html [^>]*/<html/;s/<nobr/<pre/g;s/<\/nobr/<\/pre/g" samplehtml.txt.tidy > samplehtml.txt.tidy2
xalan -xsl xhtml2fo.xsl -in samplehtml.txt.tidy2 -out res.fo
fop res.fo res.pdf 
```

编辑：我找到了一个可以满足您需要的简洁项目，并且输出看起来很棒。[https://code.google.com/p/wkhtmltopdf/](https://code.google.com/p/wkhtmltopdf/)

# algorithm - 排序以找到目标对

> ID：15172988
> 
> 赞同：0
> 
> 时间：2013-03-02T09:39:26.117
> 
> 标签：algorithm, sorting

大家好，我在一本书中发现了这个有趣的排序应用：

> 寻找目标对 - 我们如何测试集合 S 中是否存在两个整数 x、y 成员，使得某个目标 z 的 x+y=z？不要测试所有可能的配对，而是按递增顺序对数字进行排序并扫描。当 S[i] 随 i 增加时，其可能的伙伴 j 使得 S[j]=zS[i] 减少。因此，随着 i 的增加，适当地减小 j 可以得到一个很好的解决方案。

我花了很多时间试图弄清楚这种排序应用程序是如何工作的，但无法做到。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:45:17.743

想象一下这组：

```
[1, 2, 4, 6, 7, 8, 10, 13, 14, 17] 
```

你必须在这个集合中找到一对`x, y`数字，使得`x+y = 17`.

如果你的集合是未排序的，你可以检查每个可能的对，它们很长（具有 O(n2) 复杂度）。

如果你的集合是排序的，你可以从第一个和最后一个数字作为`x`和开始`y`，然后通过增加`x`和减少来移动集合`y`：

```
1 + 17 --> Too big --> Decrease y
1 + 14 --> Too small --> Increase x
2 + 14 --> Too small --> Increase x
4 + 14 --> Too big --> Decrease y
4 + 13 = 17\. STOP, you found a pair! 
```

这对于排序具有 O(nlogn) 复杂度，对于查找该对具有 O(n) 复杂度。

# android - android中画布上的位图闪烁

> ID：15172990
> 
> 赞同：2
> 
> 时间：2013-03-02T09:39:38.010
> 
> 标签：android, bitmap, android-canvas

在画布上绘图时如何避免图像闪烁。下面的代码继续运行图像。下一个图像从顶部滑动，但前一个图像一直在后面闪烁。我只是希望前一个图像变为静态。

```
void drawscreen()
{
    SurfaceHolder holder = getSurfaceHolder();
    try
    {
        Backgroundcanvas = holder.lockCanvas();
        if (Backgroundcanvas != null)
        {
            if (top == true)
            { slide_from_top(); }
        }
    }
    finally
    {
        if (Backgroundcanvas != null)
            holder.unlockCanvasAndPost(Backgroundcanvas);
    }

    mHandler.removeCallbacks(mUpdateDisplay);
    if (mVisible && count)
    {
        mHandler.postDelayed(mUpdateDisplay, interval);
        count = false;
    }
    else
    {
        mHandler.postDelayed(mUpdateDisplay, 100);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T19:16:35.787

我也遇到了同样的问题， **在画布上绘图时图像闪烁**。

我所做的是每次使用画布绘图后让我的工作线程（不是 UI 线程）**睡眠 10mlsec**，这次闪烁消失了，

你可以试试这个技巧...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:56:00.493

每个线程结束后清除画布。

只需调用`Canvas.drawColor(Color.BLACK),`或任何您想要清除画布的颜色。

# mysql - 如何在mysql中找到与年份无关的特定月份的所有行

> ID：15172993
> 
> 赞同：1
> 
> 时间：2013-03-02T09:40:02.880
> 
> 标签：mysql, sql

我有一个包含 3 列的用户表说

> 身份证姓名 dateOfBirth

其中 dateOfBirth 是 DATE 类型。现在我想找到所有在三月庆祝生日的人，无论他们出生在哪一年。如何做呢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:43:57.357

SELECT * FROM table_name WHERE MONTH(date_column) = 3;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T09:42:44.313

使用月份功能

```
Where month(dateofbirth) = 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T09:42:40.073

`MySql`有[`Month`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)功能：

```
WHERE MONTH(dateOfBirth) = 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T09:43:08.103

我认为这会有所帮助。

```
SELECT * FROM table WHERE MONTH(date) = 3 
```

问候。

# c# - 在 Azure 移动服务的 WHERE 子句中放置多个值

> ID：15172995
> 
> 赞同：1
> 
> 时间：2013-03-02T09:40:26.347
> 
> 标签：c#, .net, linq, azure, azure-mobile-services

我试图弄清楚如何将多个值放入一个`WHERE`子句中；`IN`这是您在 SQL 中使用子句的那种事情。

我当前的代码：

```
if (Log.Count() == 1)
{
    items = itemTable
        .Where(Item => Item.id == Log[0].i_id)
        .ToCollectionView();
}
else if (Log.Count() == 2)
{
    items = itemTable
        .Where(Item => Item.id == Log[0].i_id || Item.id == Log[1].i_id)
        .ToCollectionView();
}
else if (Log.Count() == 3)
{
    items = itemTable
        .Where(Item => Item.id == Log[0].i_id || Item.id == Log[1].i_id || Item.id == Log[2].i_id)
        .ToCollectionView();
} 
```

这很讨厌。`WHERE`如果没有大的 if 语句，我找不到将多个值放入该子句的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:44:10.593

试试这个：

```
items = itemTable
    .Where(Item => Log.Any(logItem => logItem.i_id == Item.id))
    .ToCollectionView(); 
```

**编辑：（**响应“不支持的异常”）

你可以试试这个替代方案，看看后端是否支持它：

```
var ids = Log.Select(logItem => logItem.i_id).ToList();
var items = itemTable
    .Where(Item => ids.Contains(Item.id))
    .ToCollectionView(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:43:55.500

```
items = itemTable.Where(Item => Log.Any(i => i.i_id == Item.id)).ToCollectionView(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T04:36:43.600

我遇到了同样的问题。像其他人建议的那样使用 Any 或 Contains 给了我一个不支持的异常。我在 Azure 移动服务论坛上发帖，被告知尚不支持 IN。他们建议我使用一种非常适合我的扩展方法。下面是我使用的代码。

```
 public static class Extensions
{
    public async static Task<List<T>> In<T>(this IMobileServiceTable<T> table, List<int> ids)
    {
        var query = new StringBuilder("$filter=(");
        for (int i = 0; i < ids.Count; i++)
        {
            query.AppendFormat("id eq {0}", ids[i]); //don't forget to url escape and 'quote' strings
            if (i < ids.Count - 1)
            {
                query.Append(" or ");
            }
        }
        query.Append(")");
        var list = await table.ReadAsync(query.ToString());
        var items = list.Select(i => MobileServiceTableSerializer.Deserialize<T>(i)).ToList();
        return items;
    }
} 
```

您的列表可以通过调用扩展方法来填充，如下所示：

```
FavoriteJokesList = await jokeItemTable.In(favoriteJokeIds); 
```

资料来源：[http ://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/b573ff6c-1f6b-4846-b44d-4678e3d26f66](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/b573ff6c-1f6b-4846-b44d-4678e3d26f66)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T16:22:04.020

仅作记录，在最新版本的 Azure 移动服务 SDK (1.0) 中，这有效：

```
var ids = Log.Select(logItem => logItem.i_id).ToList();
var items = await itemTable
.Where(Item => ids.Contains(Item.id))
.ToCollectionAsync(); 
```