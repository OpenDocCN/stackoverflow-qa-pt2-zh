# StackOverflow 问答 15398000-15398999

# asp.net - 上传大文件时出错

> ID：15398002
> 
> 赞同：0
> 
> 时间：2013-03-13T22:46:19.933
> 
> 标签：asp.net, file-upload, upload, size

我正在使用.net 4.5。我将最大请求长度和`maxAllowedContentLength`配置文件设置为 100 mb。当我尝试上传大于 100 mb 的文件（如 200 mb 到 1000 mb）时出现错误

```
The request filtering module is configured to deny a request that exceeds the request content length 
```

这是正常且预期的错误，但是当我尝试大于 1 GB 时，我收到错误“Internet Explorer 无法显示页面”。

我认为这是由于超时问题，但我真的无法弄清楚这个错误的实际原因。

感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:03:25.413

这已经在 StackOverflow 上被问过很多次了。我将继续传统 :) 对于大型上传，您需要设置两个参数：

*   ***maxAllowedContentLength*****以字节**为，因此请确保您已正确设置它。要允许 1GB 上传，它应该是 134217728。

*   您还需要配置***maxRequestLength***和 maxAllowedContentLength。请注意，虽然它**以千字节**为单位，但它会有所不同。

例如：

```
<configuration>
    <system.web>
        <httpRuntime maxRequestLength="1048576" />
    </system.web>
</configuration>

<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="1073741824" />
        </requestFiltering>
    </security>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:58:44.450

有点不清楚，但我认为您遇到的是 IIS 的正常行为保护异常：请求的任何问题都会返回 500 服务器错误响应。

为了查看异常，您可以在配置文件 ( [MSDN Link](http://www.iis.net/configreference/system.webserver/httperrors) ) 中禁用此行为，或者在登录到服务器时传输文件（`localhost`默认情况下，来自的连接绕过此行为）。

# django - 如何在 Django 中使用 Spyne 的基本身份验证？

> ID：15398006
> 
> 赞同：3
> 
> 时间：2013-03-13T22:46:37.007
> 
> 标签：django, basic-authentication, spyne

如何在 Django 中使用 Spyne 的基本身份验证？我尝试了以下方法，但它不起作用。我可以很好地查看 WSDL 页面文件，但是每当我实际尝试将 SayHello 作为 Web 服务调用时，我都会收到 403 FORBIDDEN 响应。我相信 403 与 CSRF 相关，但 csrf_exempt 不应该让我解决这个问题吗？顺便说一句，logged_in_or_basicauth 来自这个片段：[http](http://djangosnippets.org/snippets/243/) ://djangosnippets.org/snippets/243/ 。

```
class CapsWebService(ServiceBase):
    @rpc(String, Integer, _returns=Iterable(String))
    def SayHello(ctx, name, times):
        for i in xrange(times):
            yield 'Hello, %s' % name

caps_web_service = csrf_exempt(DjangoApplication(Application(
    [CapsWebService], 'solutions.sfcs', in_protocol=Soap11(), out_protocol=Soap11(), interface=Wsdl11(),
)))

@logged_in_or_basicauth()
def foo_view(request):
    logger.debug('views.foo_view()')
    return caps_web_service(request) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:36:13.750

你可以试试

```
foo_view = csrf_exempt(foo_view) 
```

在 foo_view 的定义之下。那么你就不需要 crsf_exempt 了

```
caps_web_service = DjangoApplication(Application(
    [CapsWebService], 'solutions.sfcs', in_protocol=Soap11(), out_protocol=Soap11(),         interface=Wsdl11(),
)) 
```

# html - 纯CSS下拉导航下拉到左侧

> ID：15398007
> 
> 赞同：0
> 
> 时间：2013-03-13T22:46:37.617
> 
> 标签：html, css, drop-down-menu, menu

我有这样的CSS代码：

```
.nav {
    background: #5d2c2c;
    background-repeat: repeat-x;
    height: 30px;
    margin: 0;
    padding: 0 10px;
    list-style: none;
    text-align: right;
}

.nav li {
    position: relative;
    margin: 0;
    padding: 0;
    display: inline;
    padding: 5px;
}

.nav li a {
    color: #b89885;
    text-decoration: none;
    line-height: 30px;
}

.nav li ul {
    display: none;
    position: absolute;
    top: 1em;
    left: 0;
    text-align: left;
    background: #5d2c2c;
}

.nav li > ul {
    top: auto;
    left: auto;
}

.nav li:hover ul {
    display: block;
} 
```

HTML 部分如下所示：

```
<ul class="nav">
    <li>
        <a href="#introduction">Introduction</a>
    </li>
    <li>
        <a href="#history">History</a>
    </li>
    <li>
        <a href="#national-flags">National Flags</a>
    </li>
    <li>
        <a href="#signal-flags">International Maritime Signal Flags</a>
        <ul>
            <li>
                <a href="#letters">Maritime Signals: Letters</a>
            </li>
            <li>
                <a href="#numbers">Maritime Signals: Numbers</a>
            </li>
        </ul>
    </li>
</ul> 
```

一切正常，希望子菜单上的导航在中间更靠右，但它应该在左边。

它应该如何的图像：

![啊啊啊](../Images/df24c56629b4f8e0d469c71aeca74278.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:50:57.687

将填充设置`.nav li ul`为 0（或根据您的喜好）。

```
nav li ul {
    display: none;
    position: absolute;
    top: 1em;
    left: 0;
    text-align: left;
    background: #5d2c2c;
    padding: 0;
} 
```

[http://jsfiddle.net/mppwY/](http://jsfiddle.net/mppwY/)

# wordpress - 有没有办法将附件更改为 wordpress 中的常规页面？

> ID：15398010
> 
> 赞同：0
> 
> 时间：2013-03-13T22:47:01.337
> 
> 标签：wordpress, gallery

我正在 wordpress 中建立一个网站，我们想将画廊用于产品部分。问题是，画廊似乎只指向图像的附件文件，我似乎无法更改任何内容（添加元关键字、desc 等。）

有没有办法让画廊图像指向一个页面？或者有没有办法为预先生成的“附件”页面编辑 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:54:10.207

短`[gallery]`代码[可以被操纵](https://wordpress.stackexchange.com/search?q=%2Bgallery+%2Bshortcode)。但是如果你想要一个自定义的附件页面，你只需要[**`attachment.php`**](http://codex.wordpress.org/Template_Hierarchy#Attachment_display)你的主题文件中的模板。

这是一个关于它的教程：[如何在 WordPress 中创建自定义单个附件模板](http://www.wpbeginner.com/wp-themes/how-to-create-a-custom-single-attachments-template-in-wordpress/)。

> 在本文中，我们将向您展示如何使用媒体上传器中的附加字段并将它们显示在自定义的单个附件模板中。

# event-sourcing - 只写流

> ID：15398014
> 
> 赞同：1
> 
> 时间：2013-03-13T22:47:33.973
> 
> 标签：event-sourcing, neventstore

我正在使用 joliver/EventStore 库并试图找到一种方法来获取流而不从中读取任何事件。

原因是我只想为特定流写入一些事件到该存储中，而无需从中加载所有 10k 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:23:00.773

您使用商店的方式是您总是先做`GetById`。即使您新建了一个 Aggregate 和`Save`它，您也会在 CommonDomain`EventStoreRepository`中看到它将首先将它与现有数据相关联。

首先需要读取的关键原因是基础架构需要计算出之前发生了多少事件来计算新的提交序列号。

关于您引用的示例阈值，这使您想要优化它...如果您真的要进行该级别的事件，那么您已经进入快照领域，因为您需要有一个适当有效的方法做盲写以外的事情。

即使您不打算依赖快照，使用`EventStore`该工具的一半好处是该工具可以在您需要时内置。

# java - 什么可能导致 Sun 的 JavaKeyStore.engineStore() 方法中出现 NullPointerException？

> ID：15398020
> 
> 赞同：4
> 
> 时间：2013-03-13T22:47:48.317
> 
> 标签：java, nullpointerexception, keystore

我们有一个以编程方式创建的应用`KeyStore`程序。我们`KeyStore`以以下方式创建（示例代码，为简洁起见抑制异常处理），

```
KeyStore ks = KeyStore.getInstance( "JKS" );
ks.load( null, null );
... // Add crypto material here
keystore.store( new FileOutputStream( "keystore.ks" ), "password" ); 
```

方法`store(OutputStream stream, char[] password)`抛出以下异常，

```
java.lang.NullPointerException
 at sun.security.provider.JavaKeyStore.engineStore(Unknown Source)
 at sun.security.provider.JavaKeyStore$JKS.engineStore(Unknown Source)
 at java.security.KeyStore.store(Unknown Source) 
```

该`keystore.ks`文件是在文件系统中创建的。但是当我们尝试检查它时，`keytool`我们得到，

```
keytool -list -keystore nms.keystore
keytool error: java.io.EOFException 
```

有趣的是，相同的代码在我们测试过的所有其他机器上都能完美运行。在实际代码中，传递给`store`方法的参数都不是`null`，我们已经对其进行了三重检查。

关于行为不端的机器的一些细节，

*   CentOS 5.8 32 位
*   Sun 的 JRE 1.6.0_43

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:25:44.283

到目前为止，对所发生事情的最佳解释是，保存到密钥库的证书中的某些内容触发了方法内部的 NPE

`sun.security.provider.JavaKeyStore.engineStore()`.

正在生成的证书与其完整的信任链一起保存在密钥库中。例如，证书的条目`A`将是以下形式，

`Cert A alias : Cert A -> Intermediate CA Trust -> Root CA Trust`

重新创建整个信任链后，错误消失了。这与我们之前的观察结果一致，因为信任链是正常运行的系统和未运行的系统之间唯一不同的地方。

我已经查看`sun.security.provider.JavaKeyStore`了[Grep 代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/provider/JavaKeyStore.java#JavaKeyStore.engineStore%28java.io.OutputStream,char%5B%5D%29)和[Java 源代码](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/security/provider/JavaKeyStore.java.html)中的类源代码，但我无法确定是什么导致了该代码中的 NPE。

最后我们有一个解决方案，但我们实际上并不知道根本原因。

# bash - 导出 Bash 命令行参数变量以在嵌入式 Expect 中使用

> ID：15398022
> 
> 赞同：4
> 
> 时间：2013-03-13T22:47:55.477
> 
> 标签：bash, variables, command-line-arguments, expect

`echo`测试显示我的命令行变量正在工作，但我如何传递它们、导出它们以用于嵌入式`expect`？

```
#!/bin/bash

echo name of script is $0
echo host is $1
echo hostusername is $2
echo hostpassword is $3

expect -c 'spawn ssh -l $2 $1 < ./sf-wall_scp_bash.sh
sleep 2

expect {
"(yes/no)? " {send "yes\n"}
    exp_continue
}

expect {
"?assword" {send "$3\r"}
}
sleep 1
' 
```

`expect`如果使用shebang调用，它的工作方式类似于

```
#!/usr/bin/expect

set host [lindex $argv 0]
set hostusername [lindex $argv 1]
set hostpassword [lindex $argv 2]

spawn ssh -l $hostusername $host
sleep 2

expect {
"(yes/no)? " {send "yes\n"}
    exp_continue
}

expect {
"?assword" {send "$hostpassword\r"}
}
sleep 1 
```

...按预期工作。我需要使用`bash`并嵌入`expect`，因为脚本需要调用 bash 特定的命令、函数、内置变量……否则简单地使用第二个示例将是一个可行的选项，但事实并非如此。

我尝试过声明和导出命令行参数变量，并将上面第一个示例中的 $1、$2、$3 分别更改为声明和导出的变量名，这在我拥有的另一个脚本中有效，我实际上在其中声明了变量脚本......不同之处在于它们不是命令行参数。

```
host=$1
export host
hostusername=$2
export hostusername
hostpassword=$3
export hostpassword 
```

以及只是导出它们

```
export host
export hostusername
export hostpassword 
```

并尝试上面的第一个示例。没有变化，`expect`继续索赔

> 无法读取“X”：没有这样的变量

在另一个 bash 脚本中，我能够通过 BOTH 声明变量然后像上面的示例中那样导出它们来成功导出变量。但是我无法通过将`bash`命令行参数变量传递给`expect`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:25:08.400

带有嵌套引号的代码不容易编写和阅读。我推荐你使用 shell 的*here-document*语法。例如（演示 2 种将`bash`vars 传递给的方法`expect`）：

```
$ cat foo.sh
arg1=$1
export arg2=$2

expect << END
puts $arg1
puts \$env(arg2)
END
$ bash foo.sh hello world
hello
world
$ 
```

我更喜欢`export var`从 shell 中引用它，并`$env(var)`在 expect 中引用它，因为您不必担心其中是否`var`有一些特殊字符（如`'`或`"`空格）。

# email - fosUserBundle 发送电子邮件注册为空

> ID：15398024
> 
> 赞同：7
> 
> 时间：2013-03-13T22:47:59.347
> 
> 标签：email, symfony, twig, fosuserbundle, swiftmailer

因此，当我在生产环境中通过 fosUserBundle 表单注册时，它会向我的 gmail 发送一封电子邮件，但电子邮件中没有确认链接，只有这个

```
registration.email.message 
```

在电子邮件的标题和正文中，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T23:08:35.760

这是因为电子邮件是使用翻译器获得的内容，并且您的配置错误。

确保您启用了翻译器：

```
# app/config/config.yml
framework:
    translator: { fallback: %locale% }

# app/config/parameters.yml
parameters:
    locale: en # default locale 
```

此外，如果您使用与英语不同的语言编写应用程序，请确保将密钥`registration.email.message`翻译成它。如果不是，您可以通过编写以下文件来覆盖翻译：

```
# app/Resources/FOSUserBundle/translations/FOSUserBundle.{your_locale}.yml
registration:
    email:
        subject: Registration email subject
        message: |
            Here you can place the content of the email.
            It can be multiline and you even have access to
            variables %username% and %confirmationUrl%. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T21:03:16.430

这是 FOSUser 默认邮件：

```
{% block subject %}
{% autoescape false %}
{{ 'registration.email.subject'|trans({'%username%': user.username, '%confirmationUrl%': confirmationUrl}, 'FOSUserBundle') }}
{% endautoescape %}
{% endblock %}
{% block body_text %}
{% autoescape false %}
{{ 'registration.email.message'|trans({'%username%': user.username, '%confirmationUrl%': confirmationUrl}, 'FOSUserBundle') }}
{% endautoescape %}
{% endblock %}
{% block body_html %}{% endblock %} 
```

在第 8 行，“registration.email.message”是电子邮件内容。并且`trans`是替换过滤器。尝试这样的事情：

```
 {% block subject %}
    {% autoescape false %}
    {{ 'Confirmez votre inscription sur blabla.com'|trans({'%username%': user.username, '%confirmationUrl%': confirmationUrl}, 'FOSUserBundle') }}
    {% endautoescape %}
    {% endblock %}
    {% block body_text %}
    {% autoescape false %}
    {{ 'Bonjour %username%

    Merci de cliquer sur le lien suivant afin de confirmer votre inscription sur blabla.com:

    %confirmationUrl%'|trans({'%username%': user.username, '%confirmationUrl%': confirmationUrl}, 'FOSUserBundle') }}

{% endautoescape %}
{% endblock %}
{% block body_html %}{% endblock %} 
```

# matlab - MATLAB：如何改变图形的颜色？

> ID：15398037
> 
> 赞同：0
> 
> 时间：2013-03-13T22:48:46.707
> 
> 标签：matlab, bar-chart

这是我需要回答的问题：

![在此处输入图像描述](../Images/5b02bfb61a2544e1b2063122652cc1da.png)

到目前为止，我的功能仅显示：

```
function eval = plotupc(x)
    bar(x, 'histc')
end 
```

当我尝试更改图表的颜色时，它会阻止我的图表成为直方图。另外，我怎样才能使我的图表从 0 而不是 1 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:26:53.880

该[`bar`文件](http://www.mathworks.nl/help/matlab/ref/bar.html)指出

> **注意：**使用 hist 或 histc 选项时不能指定名称和值。

相反，您可以手动设置 x 轴位置和条形宽度：

```
bar(0.5:numel(x)-0.5, x, 1, 'k');   
axis tight; 
```

第一个参数给出了条的 x 位置；[这里](http://www.mathworks.nl/help/matlab/ref/bar.html#btj3hs7-1)的另一个例子。在这里，条形图向右移动了一半。

第二个参数当然是您的输入。

第三个参数指定条的宽度，宽度为 1 确保它们接触。

最后一个参数，'k' 是[key](http://en.wikipedia.org/wiki/CMYK_color_model)，即黑色。

最后，`axis tight`确保绘图边缘没有剩余的空白。

![结果](../Images/f5fe364544e7a0362b02124b5d50ff97.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:31:33.030

```
t=bar(0:1:length(x)-1,x,'histc');
set(t,'facecolor','k');
xlim([0 length(x)-1]); 
```

# css - Retina-Sprite CSS 不工作

> ID：15398038
> 
> 赞同：0
> 
> 时间：2013-03-13T22:48:52.563
> 
> 标签：css, sprite

我的精灵有问题。我的问题是我有一个菜单精灵，以及一个视网膜菜单精灵。但由于某种原因，视网膜精灵的 Css 不起作用。这是我的代码：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2.0),
   only screen and (min--moz-device-pixel-ratio: 2.0),
   only screen and (-o-min-device-pixel-ratio: 200/100),
   only screen and (min-device-pixel-ratio: 2.0) {
.menu li a,
   background-image:url('images/sprite@2x.png');
  -webkit-background-size: 110px 55px;
  -moz-background-size: 110px 55px;
   background-size: 110px 55px;
    } 
```

现在这是常规的导航精灵：

```
.menu li a{background: url('images/sprite-nav.png') no-repeat;width: 100%;height: 100%;display:block;}
.menu li.services{width: 110px;height: 55px;}
.menu li.services a{background-position: 0px -300px;}
.menu li.services a:hover{background-position: 0px 0px;} 
```

顺便说一句，菜单有不止一个图像，（例如，我只是添加了更多的菜单 li's 并将“服务”替换为下一个菜单项。）

抱歉，我不熟悉它，所以无法上传到 jfiddle。所有答案表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:43:35.500

操作，

您的媒体查询语法有错误。媒体查询应该环绕`{}`CSS 定义。你也是一个失踪的`{`后`.menu li a`。看起来你有一个逗号。

这是更正后的版本：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2.0),
       only screen and (min--moz-device-pixel-ratio: 2.0),
       only screen and (-o-min-device-pixel-ratio: 200/100),
       only screen and (min-device-pixel-ratio: 2.0) {
           .menu li a {
              background-image:url('images/sprite@2x.png');
              -webkit-background-size: 110px 55px;
              -moz-background-size: 110px 55px;
              background-size: 110px 55px;
          }
      } 
```

# mysql - 加入前 3 个兴趣字段以及每个用户行

> ID：15398040
> 
> 赞同：4
> 
> 时间：2013-03-13T22:48:55.943
> 
> 标签：mysql, sql, greatest-n-per-group, group-concat

我正在尝试获取每个用户的前 3 个兴趣，可能作为 LEFT JOIN 查询。

该应用程序的设计方式是，每个用户都有一组兴趣，这些兴趣只不过是表格的“孩子”（没有 的行`parent`） 。`categories`

以下是一些带有模拟数据的简化表模式（请参阅**[SQL Fiddle 演示](http://sqlfiddle.com/#!2/de815/1)**）

```
-- Users table

| ID |  NAME |
--------------
|  1 |  John |
|  2 |  Mary |
|  3 | Chris |

-- Categories table                           -- Interests table

| ID |                 NAME | PARENT |        | ID | USER_ID | CATEGORY_ID |
--------------------------------------        ------------------------------
|  1 |      Web Development | (null) |        |  1 |       1 |           1 |
|  2 |          Mobile Apps | (null) |        |  2 |       1 |           1 |
|  3 | Software Development | (null) |        |  3 |       1 |           1 |
|  4 |    Marketing & Sales | (null) |        |  4 |       2 |           1 |
|  5 |             Web Apps |      1 |        |  5 |       2 |           1 |
|  6 |                  CSS |      1 |        |  6 |       3 |           1 |
|  7 |                  iOS |      2 |        |  7 |       3 |           1 |
|  8 |      Streaming Media |      3 |        |  8 |       3 |           1 |
|  9 |                  SEO |      4 |        
| 10 |                  SEM |      4 | 
```

为了获得给定用户的前 3 个兴趣，我通常执行以下查询：

```
SELECT `c`.`parent` as `category_id` 
FROM `interests` `i` LEFT JOIN `categories` `c` ON `c`.`id` = `i`.`category_id` 
WHERE `i`.`user_id` = '2' 
GROUP BY `c`.`parent` 
ORDER BY count(`c`.`parent`) DESC LIMIT 3 
```

此查询返回`categories`id = 2 的用户的前 3 个（父母）

我想了解如何查询 users 表并在 3 个不同的字段（首选）或`group_concat(..)`一个字段中获取他们的前 3 个类别

```
SELECT id, name, top_categories FROM users, (...) WHERE id IN ('1', '2', '3'); 
```

有什么想法我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:07:54.607

在 MYSQL 中为每个用户获取前 3 条记录是一种非常粗略的方法

```
 SELECT u.id, c.name 
 FROM 
     users u, 
     categories c, 
     (SELECT i.id, 
         i.user_id, 
         i.category_id, 
         @running:=if(@previous=i.user_id,@running,0) + 1 as rId,
         @previous:=i.user_id
     FROM 
         (SELECT * FROM intersect ORDER BY user_id) i JOIN 
         (SELECT @running=0, @previous=0 ) r) i
 WHERE 
     u.id = i.USER_ID AND
     i.CATEGORY_ID = c.id AND 
     i.rId <= 3
 group by u.id, c.name ; 
```

希望能帮助到你

[**小提琴**](http://sqlfiddle.com/#!2/44ca6/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:06:11.860

首先构建一个在不同行上列出每个用户的前三项技能的摸索查询。然后将其转入以将每个用户的三个技能拉到右侧。您需要对每个技能列中的技能使用 Max(isnull(skill,'')) 表达式。

# logging - 在 Heroku 上支持 Unicorn 并且不会丢失日志记录的“官方”方式是什么？

> ID：15398045
> 
> 赞同：1
> 
> 时间：2013-03-13T22:49:24.757
> 
> 标签：logging, heroku, ruby-on-rails-3.2, unicorn

我们切换到 Unicorn，但在 Heroku 上丢失了所有应用程序登录。我用谷歌搜索了一下，了解到 Heroku 的 Ruby buildpack 安装了一个插件“rails_log_stdout”，它不能很好地与 Unicorn 配合使用。我的猜测是这与 Unicorn 的分叉性质有关，但我没有证实这一点。

各种解决方法，如建议的[https://gist.github.com/jamiew/2227268](https://gist.github.com/jamiew/2227268)。这些让我感到不满意，因为它们不会使用 Rails 应用程序中定义的日志级别或任何标签，或记录器格式覆盖等。这对我来说似乎有点暴力。正确执行此操作的“官方”方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T00:55:52.880

这就是我重新实例化记录器以避免丢失记录级别或登录标记的方式。我必须在每个环境文件中单独执行此操作`production.rb`，，`staging.rb`（如果有的话）等。

```
MyApp::Application.configure do

  # ...

  logger = Logger.new(STDOUT)
  logger = ActiveSupport::TaggedLogging.new(logger) if defined?(ActiveSupport::TaggedLogging)
  config.logger = logger
  log_level_env_override = Logger.const_get(ENV['LOG_LEVEL'].try(:upcase)) rescue nil
  config.logger.level = log_level_env_override || Logger.const_get(Rails.configuration.log_level.to_s.upcase)

  # ...

end 
```

我不喜欢这个。我希望独角兽能有更优雅的东西。

# jsf-2 - 如何在使用表达式语言中调用托管 bean 方法

> ID：15398046
> 
> 赞同：1
> 
> 时间：2013-03-13T22:49:28.643
> 
> 标签：jsf-2

我正在开发一个实用程序类，使用它我们需要调用在 EL 表达式中定义的托管 bean 方法。是否有任何示例，例如如何使用 EL 表达式调用托管 bean 方法。

这里我不知道托管bean的类型。但我知道 EL 表达式。所以我不能将类型转换为特定的托管 bean。

表达式为：`#{phaseListenerBean.compListener}`

我的代码如何调用该`compListener`方法`phaseListenerBean`？我的实用程序类。它在 Jar 文件中可用。

`public void beforePhase(PhaseEvent event) { if(PhaseId.RENDER_RESPONSE.equals(event.getPhaseId())){ SystemListLoaderHelper.populateSelectOneValidValues();

```
 SystemListLoaderHelper.populateSelectManyCheckboxValidValues();
        FacesContext context = FacesContext.getCurrentInstance();
        ExpressionFactory factory =context.getApplication().getExpressionFactory();
        MethodExpression methodExpression = factory.createMethodExpression(
                context.getELContext(), "#{phaseListenerBean.callModuleSpecificServiceCalls}", 
                Void.class.getClass(),  null);
        methodExpression.invoke(context.getELContext(), null); 
```

// callModuleSpecificServiceCalls(); } }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:18:37.563

您可以尝试使用 Faces 上下文调用 bean，例如，如果您想要 bean，您可以使用：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
Object o = facesContext.getApplication().evaluateExpressionGet(facesContext,
                    "#{phaseListenerBean}", Object.class); 
```

稍后使用反射调用方法，或者，您可以使用表达式调用方法，如下所示：

```
FacesContext fc = getContext();
ExpressionFactory factory = getExpressionFactory();
methodExpression = factory.createMethodExpression(
        fc.getELContext(), "#{phaseListenerBean.compListener}", 
                    Void.class, (Class<?>) null);
methodExpression.invoke(fc.getELContext(), null); 
```

请显示“compListener”和实用程序类的一些代码。对不起，我的英语不好，

干杯

# java - Java Swing中的垂直对齐

> ID：15398051
> 
> 赞同：-1
> 
> 时间：2013-03-13T22:50:16.217
> 
> 标签：java, swing

我怎样才能制作这样的按钮？

![在此处输入图像描述](../Images/9fe9194e1960748c262d7d782160347c.png)

```
 JPanel jp = new JPanel();
        JPanel jpB1 = new JPanel();
        JPanel jpB2 = new JPanel();
        JPanel jpB3 = new JPanel();
        JButton jb1 = new JButton("button1");
        JButton jb2 = new JButton("button2");
        JButton jb3 = new JButton("button3");
            ...
        JLabel jl = new JLabel("label");
        ...
        jp.setLayout(new BorderLayout());
        ...
        jpB1.add(jb1);
        jpB2.add(jb2);
        jpB3.add(jb3);
        ...
        jp.add(jpB1, BorderLayout.NORTH);
        jp.add(jpB2, BorderLayout.CENTER);
        jp.add(jpB3, BorderLayout.SOUTH);
            ... 
```

我在创建 3 个面板并将它们添加到主面板时尝试了此代码。它在北方显示两个按钮，在南方显示一个按钮！有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:48:15.653

注意，默认布局`JPanel`是`FlowLayout`; 具有`GridBagLayout`默认约束的 a 位于框架的`BorderLayout.CENTER`. 此外，最后`pack()`封闭`Window`并显示它。使用剩余的[*初始线程*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)作为练习。

附录：解决布局问题的一个有用技巧是将封闭容器的背景颜色设置为对比色，例如

```
jpB2.setBackground(Color.blue); 
```

![图片](../Images/05145e43495bceec92a15db5f363f374.png)

```
import java.awt.BorderLayout;
import java.awt.GridBagLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Bouton2 {

    public static void main(String[] args) {

        final int LARGEUR = 400;
        final int HAUTEUR = 300;

        JFrame jf = new JFrame();
        JPanel jp = new JPanel();
        JPanel jpB1 = new JPanel();
        JPanel jpB2 = new JPanel(new GridBagLayout());
        JPanel jpB3 = new JPanel();
        JButton jb1 = new JButton("Cliquez ici");
        JButton jb2 = new JButton("Je compte");
        JButton jb3 = new JButton("J'agrandis");

        JLabel jl = new JLabel("0 clic");

        jp.setLayout(new BorderLayout());

        jpB1.add(jb1);
        jpB2.add(jb2);
        jpB3.add(jb3);

        jp.add(jpB1, BorderLayout.NORTH);
        jp.add(jpB2, BorderLayout.CENTER);
        jp.add(jpB3, BorderLayout.SOUTH);

        jf.setTitle("Fenêtre Bouton2");
        jf.setContentPane(jp);
        jf.pack();
        jf.setSize(LARGEUR, HAUTEUR);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.setLocationRelativeTo(null);
        jf.setVisible(true);

    }
} 
```

# javascript - 从字符串中获取对象的值

> ID：15398054
> 
> 赞同：0
> 
> 时间：2013-03-13T22:50:34.823
> 
> 标签：javascript

我有这个对象：

```
var mallData = {
    StLouis: {
        Region: "CentralRegion",
        Mall: "BaybrookMall"
    },
    Woodlands: {
        Region: "CentralRegion",
        Mall: "WoodlandsMall"
    }
} 
```

为了简化，这个变量：

```
var legalMallName = "StLouis"; 
```

我希望能够得到，

```
console.log(mallData.legalMallName.Region); 
```

但是显然这不起作用，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:52:05.483

写吧 ：`mallData[legalMallName].Region`

`legalMallName`这样做您将访问以对象的值命名的属性`mallData`，然后获取其属性 Region。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:52:28.277

使用变量作为键：

```
var region = mallData[legalMallName].Region 
```

# python - 如何进行这样的复杂查找？

> ID：15398055
> 
> 赞同：1
> 
> 时间：2013-03-13T22:50:36.533
> 
> 标签：python, django, lookup, django-queryset

好的，也许它并不复杂，但我坚持这一点。我有这个模型架构：

```
Evento(models.Model):
    aprobado = models.BooleanField()
    mod = models.ForeignKey(model=Mod, null=True)
    [...]

Mod(models.Model):
    activo = models.BooleanField()
    [...] 
```

我想用*and* *or (if mod != None)检索**对象`aprobado == True``mod == None``mod.activo == False`*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:55:18.447

使用[“Q”对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)和按位 OR 运算符（为 Q 对象重载以表示 SQL OR）。

```
from django.db.models import Q

queryset = Evento.objects.filter(Q(mod__isnull=True, aprobado=True) | Q(mod__isnull=False, mod__activo=False)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:57:04.150

您可以冗长并使用[`Q`对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)：

```
Evento \
    .objects \
    .filter(
        Q(aprobado==True, mod__isnull=True) |
        Q(mod__isnull=False, mod__activo=False) 
```

# windows - GetAsyncKeyState() 无法返回键盘/鼠标的状态，而 WM_KEYDOWN 消息似乎工作正常

> ID：15398056
> 
> 赞同：0
> 
> 时间：2013-03-13T22:50:39.930
> 
> 标签：windows, input, msdn

我正在编写一个游戏，其中我使用 GetAsyncKeyState() 进行字符控制，如 WASD 和鼠标按钮，并使用 Windows 消息系统进行菜单内容，如文本输入和光标控制。

每隔一段时间，我的计算机似乎就会进入 GetAsyncKeyState() 不返回任何内容的奇怪状态。这似乎与我的游戏崩溃的时间有关。一旦计算机处于这种状态，除非我重新启动计算机，否则我不知道如何将其取出。

在这种情况下，Windows 消息传递系统仍然可以正常工作 - 如果我键入“W”键，我仍然会收到 WM_KEYDOWN 消息，并且该字母可以显示在我的菜单系统中，但是以下通常有效的方法将失败：

```
bool result = (GetAsyncKeyState(vkey) & 0x8000) != 0; 
```

据我所知，这是由外部程序（例如 Synergy+，我用来在计算机之间共享鼠标/键盘输入）引起的，但是我还不能证明这一点。

不管是什么原因，我都不希望最终用户出现这个问题。是否有任何技术可以诊断和修复这样的状态？

编辑：也许这是某种驱动程序问题？我刚刚注意到，当我的计算机进入这种状态时，我的鼠标不再处理我分配给其额外按钮的快捷方式。我不知道这一切是如何运作的，不知道在这种情况下应该责备什么。

# javascript - 用于移动设备的 Javascript 图像库

> ID：15398064
> 
> 赞同：0
> 
> 时间：2013-03-13T22:51:26.703
> 
> 标签：javascript, mobile, image-gallery, touch-event

我想为移动设备制作一个与 Flickr 功能相似的图片库。

我希望它根据您的手指移动的方向在 touchmove 上移动图像，如果您做出一个小的滑动手势，我希望它一直移动图像，或者如果没有滑动足够大，将 div 移回 x 轴上的起始位置。

我知道逻辑会是什么样子，我只是不确定要使用的语法。

我认为它会是这样的：

在 touchstart - 为 touchstart 的 x 位置分配变量

在 touchmove - 为 touchmove 的 x 位置分配变量 - 为 touchmove 减去 touchstart 分配一个变量 - 将（touchmove 减去 touchstart）添加到 div 的当前 x 位置

在 touchend - 如果 touchmove => touchstart + 50px 然后将 1000px - (touchmove-touchstart) 添加到 divs x 位置

-else if touchmove =< touchstart - 50px 然后从 div x 位置减去 1000px + (touchmove - touchstart)

Else Minus (touchmove - touchstart) 从 div 的 x 位置开始

谁能把这个^^^翻译成javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:45:21.933

如果你真的能接受挑战，有很多事情需要考虑。您需要使其独立于平台，决定是否使用 JavaScript、CSS3 动画或两者兼而有之。它需要响应并允许按需加载图像等。向后兼容性怎么样？

您还需要采用一些巧妙的逻辑，不仅检测 touchstart 和 touchmove 之间的距离，还检测完成的速度。例如，用户可以非常快速地轻弹他们的手指一小段距离，从而导致转换发生，或者可以非常缓慢地将他们的手指移动很长距离，导致不发生转换（在限制内）。

**因此，要回答您的问题**，不，这不仅会自行制作动画。[如果没有一些巧妙而高效的 JavaScript 或CSS3 动画](http://www.w3schools.com/css3/css3_animations.asp)，它就不会流畅地移动。

我建议使用已经存在的许多 JQuery 库之一来为您执行此操作。那里有许多免费的图书馆，它们都很好用。经过快速搜索，我找到了这个：

[http://www.photoswipe.com/](http://www.photoswipe.com/)，这似乎正是您想要实现的目标。

# apache - url 重写 - 将图像路径重写到内部文件夹

> ID：15398065
> 
> 赞同：0
> 
> 时间：2013-03-13T22:51:50.983
> 
> 标签：apache, mod-rewrite, url-rewriting

我想添加一条规则，将 jpg 文件重定向到文档根目录之外的目录。我已经使用以下内容重写任何没有文件扩展名的内容。

```
Options Indexes FollowSymLinks Includes ExecCGI
RewriteEngine On
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule ^[^.]+$ /index.php/$1 [L] 
```

我想实现

`http://www.mysite.com/i/image_type/12345.jpg`

`=>` `/internal_path/image_type/12345.jpg`

编辑在这种情况下，我最终使用了符号链接。我不确定这是否是最好的解决方案，但它满足了我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:10:54.897

对于您的图像路径，请使用此规则（将其放在您的末尾`.htaccess`）：

```
RewriteRule ^i/(.*)$ /internal_path/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:18:01.607

只需检查一下：

```
RewriteRule ^i/([a-z0-9-_]+)/([a-z0-9-_]+)\.([a-z0-9-_]+)$ /internal_path/$1/$2.$3 
```

# sql - SQL子选择是否存在

> ID：15398069
> 
> 赞同：3
> 
> 时间：2013-03-13T22:51:59.833
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我正在使用 SQL Server 2012。我有两个表来保存产品订单。具有接收日期的订单和具有价格和订单 ID fk 的 OrderItem。

我正在尝试编写一个查询来获取日期范围内的所有订单，按日期对它们进行分组，然后对所有订单商品的价格求和以获得该日期所有订单的总数。

我有这个工作。现在我想添加另一列来选择当天总价与 7 天前之间的差额。如果 7 天前没有订单，则该列应为空。

所以目前我有以下查询：

```
select cast(o.ReceivedDate as date) as OrderDate, 
coalesce(count(orderItems.orderId), 0) as Orders,
coalesce(sum(orderItems.Price), 0) as Price
from [Order] o

left outer join (
        select o.Id as orderId, sum(ot.Price) as Price
        from OrderItem ot
        join [Order] o on ot.OrderId = o.Id
        where o.ReceivedDate >= @DateFrom and o.ReceivedDate <= @DateTo
        group by o.Id
) as orderItems on o.Id = orderItems.orderId

where o.ReceivedDate >= @DateFrom and o.ReceivedDate <= @DateTo
group by cast(o.ReceivedDate as date)
order by cast(o.ReceivedDate as date) desc 
```

那么如何将我的其他列添加到此查询中？我需要做类似的事情：

```
//pseudo 
if o.RecievedDate - 7 exists then orderItems.Price - Price from 7 days ago else null 
```

但我不知道该怎么做？我创建了一个 sqlfiddle 来帮助解释[http://sqlfiddle.com/#!6/8b837/1](http://sqlfiddle.com/#!6/8b837/1)

因此，从我的示例数据中，我想要实现的是这样的结果：

```
|  ORDERDATE | ORDERS | PRICE |  DIFF7DAYS  |
---------------------------------------------
| 2013-01-25 |      3 |    38 |          28 |
| 2013-01-24 |      1 |    12 |        null |
| 2013-01-23 |      1 |    10 |        null |
| 2013-01-22 |      1 |    33 |        null |
| 2013-01-18 |      1 |    10 |        null |
| 2013-01-10 |      1 |     3 |         -43 |
| 2013-01-08 |      2 |    11 |        null |
| 2013-01-04 |      1 |     1 |        null |
| 2013-01-03 |      3 |    46 |        null | 
```

如您所见，25 日有 7 天前的订单，因此显示了差异。24 号显示的不是那么空。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:13:51.870

不知道为什么要使用`left outer join`between`[Orders]`表，`the subquery`因为没有订单项就不能有订单（通常）：

要获得结果，您可以使用以下简化版本进行操作`CTE`

[SQL-FIDDLE-DEMO](http://sqlfiddle.com/#!6/8b837/31)

```
;with cte as (
  select convert(date,o.ReceivedDate) orderDate,
       count(distinct o.Id) as Orders,
       coalesce(sum(ot.Price),0) as Price
  from OrderItem ot
        join [Order] o on ot.OrderId = o.Id
  where o.ReceivedDate >= @DateFrom and o.ReceivedDate <= @DateTo
  group by convert(date,o.ReceivedDate)
)
select c1.orderDate, c1.Orders, c1.Price, c1.Price-c2.Price DIFF7DAYS
from cte c1 left join cte c2 on dateadd(day,-7,c1.orderdate) = c2.orderdate
order by c1.orderdate desc

|  ORDERDATE | ORDERS | PRICE | DIFF7DAYS |
-------------------------------------------
| 2013-01-25 |      3 |    38 |        28 |
| 2013-01-24 |      1 |    12 |    (null) |
| 2013-01-23 |      1 |    10 |    (null) |
| 2013-01-22 |      1 |    33 |    (null) |
| 2013-01-18 |      1 |    10 |    (null) |
| 2013-01-10 |      1 |     3 |       -43 |
| 2013-01-08 |      2 |    11 |    (null) |
| 2013-01-04 |      1 |     1 |    (null) |
| 2013-01-03 |      3 |    46 |    (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:07:39.897

使用临时表并将其加入日期差异。

```
DECLARE @DateFrom datetime
SET @DateFrom = '2012-12-02'

DECLARE @DateTo datetime
SET @DateTo = '2013-03-13'

CREATE TABLE #temp ( orderdate date, orders int, price money)
INSERT INTO #temp
SELECT cast(o.ReceivedDate AS date) AS OrderDate,
coalesce(count(orderItems.orderId), 0) AS Orders,
coalesce(sum(orderItems.Price), 0) AS Price
FROM [Order] o

LEFT OUTER JOIN (
SELECT o.Id AS orderId, sum(ot.Price) AS Price
FROM OrderItem ot
JOIN [Order] o ON ot.OrderId = o.Id
WHERE o.ReceivedDate >= @DateFrom AND o.ReceivedDate <= @DateTo
GROUP BY o.Id
) AS orderItems ON o.Id = orderItems.orderId

WHERE o.ReceivedDate >= @DateFrom AND o.ReceivedDate <= @DateTo
GROUP BY cast(o.ReceivedDate AS date)

SELECT t1.orderdate, t1.orders, t1.price, 
t1.price - t2.price AS diff7days
FROM #temp t1 LEFT JOIN #temp t2
ON datediff(DAY, t2.orderdate, t1.orderdate) = 7
ORDER BY t1.orderdate DESC 
```

[http://sqlfiddle.com/#!6/8b837/34](http://sqlfiddle.com/#!6/8b837/34)

# javascript - 我应该将我的 javascript 拆分为多个文件吗？

> ID：15398072
> 
> 赞同：44
> 
> 时间：2013-03-13T22:52:12.583
> 
> 标签：javascript, html

我习惯于使用 Java，其中（我们知道）每个对象都定义在自己的文件中（一般来说）。我喜欢这个。我认为它使代码更易于使用和管理。

我开始使用 javascript，我发现自己想为我在单个页面上使用的不同脚本使用单独的文件。我目前将自己限制在几个 .js 文件中，因为我担心如果我使用的更多，我将来会因为我目前无法预见的事情而感到不便。也许是循环引用？

简而言之，将我的脚本分成多个文件是不好的做法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T22:55:22.100

2020 年更新：按照互联网标准，这个答案已经很老了，远非今天的全貌，但仍然偶尔会看到投票，所以我觉得有必要提供一些关于自发布以来发生的变化的提示。多年来对脚本加载的良好支持`async`、HTTP/2 的服务器推送功能以及对加载过程的一般浏览器优化，都对将 Javascript 分解为多个文件如何影响加载性能产生了影响。

对于那些刚开始使用 Javascript 的人，我的建议保持不变（使用捆绑器 / 缩小器并相信它默认做正确的事情），但对于任何找到这个问题的有更多经验的人，我会邀请他们调查`async`加载和服务器推送带来的新功能。

2013-ish的原始答案：

* * *

由于下载时间的原因，您应该始终尝试使您的脚本成为一个单一的大文件。但是，如果您使用缩小器（您*应该*这样做），它们可以为您将多个源文件合并为一个。因此，您可以继续处理多个文件，然后将它们缩小为单个文件以进行分发。

主要的例外是公共库，例如 jQuery，您应该始终从公共 CDN 加载它们（用户很可能已经加载了它们，因此不需要再次加载它们）。如果您确实使用公共 CDN，则*始终*在失败时从您自己的服务器加载备用。

正如评论中所指出的，真实的故事要复杂一些。

脚本可以同步 ( `<script src="blah"></script>`) 或异步 ( `s=document.createElement('script');s.async=true;...`) 加载。同步脚本会阻止加载其他资源，直到它们被加载。例如：

```
<script src="a.js"></script>
<script src="b.js"></script> 
```

将请求 a.js，等待它加载，然后加载 b.js。在这种情况下，将 a.js 与 b.js 结合起来并一举加载它们显然会更好。

同样，如果 a.js 有加载 b.js 的代码，无论它们是否异步，您都会遇到相同的情况。

但是，如果您同时加载它们*并且*异步加载它们，并且取决于客户端与服务器的连接状态，以及只能通过分析才能真正确定的一大堆考虑因素，它可以更快。

```
(function(d){
    var s=d.getElementsByTagName('script')[0],f=d.createElement('script');
    f.type='text/javascript';
    f.async=true;
    f.src='a.js';
    s.parentNode.insertBefore(f,s);
    f=d.createElement('script');
    f.type='text/javascript';
    f.async=true;
    f.src='b.js';
    s.parentNode.insertBefore(f,s);
})(document) 
```

它要复杂得多，但会同时加载 a.js 和 b.js 而不会相互阻塞或其他任何东西。最终，该`async`属性将被正确支持，并且您将能够像同步加载一样轻松地做到这一点。最终。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-13T23:11:35.280

这里有很多正确的答案，这取决于您的应用程序的大小以及您将其交付给谁（由谁，我的意思是预期的设备等），以及您可以在服务器端做多少工作来确保您的目标是正确的设备（对于大多数非企业凡人来说，这距离 100% 可行还有很长的路要走）。

在构建您的应用程序时，“类”可以愉快地驻留在它们自己的文件中。
在跨文件拆分应用程序时，或者在处理具有过多假设的构造函数的类时（例如实例化其他类），循环引用或死端引用*是*一个大问题。
有多种模式可以解决这个问题，但最好的模式当然是让您的应用程序考虑到 DI/IoC，这样就不会发生循环引用。
您还可以查看 require.js 或其他依赖加载程序。您需要获得的复杂程度取决于您的应用程序有多大，以及您希望所有内容有多私密。

在为您的应用程序提供服务时，提供 JS 的基线是连接您需要的所有脚本（以正确的顺序，如果您要实例化假设其他东西存在的东西），并将它们作为一个文件提供在底部这页纸。

但这是基线。
其他方法可能包括“延迟/延迟”加载。
加载所有你需要的东西来让页面提前工作。
同时，如果您的小程序或小部件在页面加载时不需要 100% 的功能，事实上，它们需要用户交互，或者在执行任何操作之前需要延迟，然后为这些加载脚本小部件延迟事件。在用户在选项卡上点击 mousedown 的位置加载选项卡式小部件的脚本。现在您只加载了您需要的脚本，并且仅在需要时加载，没有人会真正注意到下载的微小延迟。

将此与试图将 40,000 行应用程序填充到一个文件中的人进行比较。
只有一个 HTTP 请求，只有一个下载，但是解析/编译时间现在变成了明显的几分之一秒。

当然，延迟加载并不是将每个类留在自己的文件中的借口。
那时，您应该将它们打包成模块，并提供将运行整个小部件/小程序/任何东西的文件（除非有其他逻辑位置，直到以后才需要功能，并且它隐藏在进一步的交互之后）。

您还可以将这些模块的加载放在计时器上。
预先加载基线应用程序的东西（同样在页面底部，在一个文件中），然后设置半秒左右的超时时间，然后加载其他 JS 文件。
您现在不会妨碍页面的操作或用户移动的能力。这当然是最重要的部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T22:55:10.240

这里有两个问题：a）易于开发 b）下载 JS 资产时的客户端性能

就开发而言，模块化从来都不是一件坏事。还有 Javascript 自动加载框架（如[requireJS](http://requirejs.org/)和[AMD](http://requirejs.org/docs/whyamd.html)）可用于帮助您管理模块及其依赖项。

但是，为了解决第二点，最好将所有 Javascript 合并到一个文件中并缩小它，这样客户端就不会花费太多时间下载所有资源。有一些工具 (requireJS) 也可以让您执行此操作（即，将所有依赖项组合到一个文件中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-25T09:18:36.163

这取决于您现在使用的协议。如果您使用的是[http2](https://http2.github.io/)，我建议您拆分 js 文件。如果您使用 http，我建议您使用缩小的 js 文件。

这是使用[http](https://www.webpagetest.org/result/161125_7R_F03/1/details/cached/#waterfall_view_step1)和[http2的网站示例](https://www.webpagetest.org/result/161125_VM_EY7/1/details/#waterfall_view_step1)

谢谢，希望对您有所帮助。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-13T22:56:39.643

这真的不要紧。如果您在多个文件中使用相同的 JavaScript，那么最好有一个包含 JavaScript 的文件可以从中获取。所以你只需要从一个地方更新脚本。

# javascript - 链接未在 iframe 中加载

> ID：15398078
> 
> 赞同：0
> 
> 时间：2013-03-13T22:52:46.140
> 
> 标签：javascript, iframe, hyperlink, load

我有这段代码可以在 iframe 中打开链接并隐藏 iframe，直到单击链接然后在单击链接后隐藏链接

```
<script>

$(document).ready(function(){
    $("#iframe1").hide();
    $("#theLink").click(function(){
        $("#iframe1").show();
        $("#linkDiv").hide();
        return false;
    });
});

</script>

<div id="linkDiv">
    <a href="http://www.example.com" id="theLink" target="iframe1">Link</a>
</div>
<br/><br/>
<iframe id="iframe1" name="iframe1" src="#"></iframe> 
```

链接未在 iframe 中加载

请问有人能解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:53:40.630

`return false`取消默认操作，因此不遵循链接。把它拿出来。

# security - XSS 漏洞脚本标签编码

> ID：15398082
> 
> 赞同：-2
> 
> 时间：2013-03-13T22:53:15.777
> 
> 标签：security, xss

当将 http 参数设置为以下值时，我有一个安全扫描报告 XSS 漏洞。它呈现一个脚本标签

```
'1234'"/><img%20src%3D%26%23x6a;%26%23x61;%26%23x76;%26%23x61;%26%23x73;%26%23x63;%26%23x72;%26% 23x69;%26%23x70;%
26%23x74;%26%23x3a;警报%26%23x28;5846%26%23x29;>'

```

它看起来不像 html 编码或 url 编码，脚本标签是哪种编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:08:31.937

如果“HTTP 参数”是指 URL 参数，则 URL 编码的八位字节`%hh`被解码为：

```
'1234'"/><img src=&#x6a;&#x61;&#x76;&#x61;&#x73;&#x63;&#x72;&#x69;&#x70;&#x74;&#x3a;alert&#x28;5846&#x29;>' 
```

如果该值被打印到将其解释为 HTML 的上下文中，`&#xhh;`则属性值中的字符引用将被解码为：

```
'1234'"/><img src=javascript:alert(5846)>' 
```

# class - Laravel 4 使用供应商类

> ID：15398087
> 
> 赞同：6
> 
> 时间：2013-03-13T22:53:50.163
> 
> 标签：class, laravel, laravel-4, vendor

我在使用 3 后安装了 Laravel 4，喜欢它。我曾经能够像这样使用 Zend 框架：

```
 $yt = new Zend_Gdata_YouTube(); 
```

例如

我使用 composer 安装 Zend 并且所有东西都安装在 Vendor 文件夹中。

问题：

如何处理各个类，即 Zend Gdata 等。

我在 L4 中找不到任何关于从供应商处调用类的文档。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-04T21:56:19.283

查看您的 vendor\composer\autoload_classmap.php 文件。在那里，您将找到正在自动加载的所有供应商类的列表。我认为所有类都必须使用它们的完整命名空间名称来调用。

例如

我正在使用 Zizaco 的 Entrust 包。这就是 vendor\composer\autoload_classmap.php 文件中的样子。

```
'Zizaco\\Entrust\\Entrust' => $vendorDir . /zizaco/entrust/src/Zizaco/Entrust/Entrust.php', 
```

如果我想访问 Entrust.php 类，我必须调用

```
$en = new Zizaco\Entrust\Entrust(); 
```

或者，您可以在 app\config\app.php 文件中为某些类设置别名。

例如

```
'Ent'         => 'Zizaco\Entrust\Entrust' 
```

在您的情况下，您需要执行以下操作：

```
$yt = new Zend\namespace\Zend_Gdata_YouTube(); 
```

# c# - 选择 ListBox Winform 控件中的所有项目

> ID：15398091
> 
> 赞同：3
> 
> 时间：2013-03-13T22:54:10.177
> 
> 标签：c#, .net, winforms

我正在尝试选择 ListBox 中的所有项目并为此目的制作了此扩展方法：

```
 public static void SetSelectedAllItems(this ListBox ctl)
    {
        for (int i = 0; i < ctl.Items.Count; i++)
        {
            ctl.SetSelected(i, true);
        }
    } 
```

问题是如果我在 ListBox 中有很多项目，完成这项任务需要很长时间，我可以看到 ListBox 如何自动向下滚动并选择项目。

有没有办法暂时暂停控件的更新，以便任务更快地完成？我尝试使用：

```
ctl.SuspendLayout();
  for (int i = 0; i < ctl.Items.Count; i++)
  ...
ctl.ResumeLayout(); 
```

但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T23:28:04.020

调用[`BeginUpdate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.beginupdate.aspx)和[`EndUpdate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.endupdate.aspx)方法以防止在设置该控件的属性时绘制/呈现该控件。

这是修改后的代码：

```
public static void SetSelectedAllItems(this ListBox ctl)
{
    ctl.BeginUpdate();

    for (int i = 0; i < ctl.Items.Count; i++)
    {
        ctl.SetSelected(i, true);
    }

    ctl.EndUpdate();
} 
```

您说您尝试过调用[`SuspendLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)and [`ResumeLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resumelayout.aspx)，但这只会影响控件的布局事件。当您想要更改控件相对于其他控件的位置时，可以使用这对方法，例如设置`Size`、`Location`、`Anchor`或`Dock`属性时。

# django - Gunicorn+eventlet 超时

> ID：15398092
> 
> 赞同：2
> 
> 时间：2013-03-13T22:54:14.720
> 
> 标签：django, gevent, gunicorn, eventlet

我尝试使用 eventlet worker (django app) 运行 gunicorn：

```
python manage.py run_gunicorn -k eventlet -t 5 
```

如果我有两个不好的看法：

```
def view1(request):
    while 1:
        time.sleep(0.001) #same as eventlet.sleep
    return HttpResponse('ok')

def view2(request):
    while 1:
        pass
    return HttpResponse('ok') 
```

选项 -t (--timeout) 仅对 view2 有意义（因为工人挂起并且 gunicorn 可以理解它）。但是 gunicorn 不能处理不好的 view2。

在实际情况中，似乎我们有一些无限循环，其中包含 time.sleep() 或其他猴子修补方法，一段时间后，我们的应用程序不会挂起，但会有许多无限绿色线程并开始缓慢工作。

我的问题是我如何设置 gunicorn 以了解 view1 有什么问题并重新启动工作人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:41:10.877

您想限制执行任何请求的最长时间吗？好主意啊。截至 2013 年 2 月，Gunicorn 不支持此功能。

您可以使用[eventlet.Timeout](http://eventlet.net/doc/modules/timeout.html)来实现它。根据您是想要快速还是共享，您可以将超时仅添加到您的应用程序中或作为 Gunicorn 的一项功能。他们的[代码](https://github.com/benoitc/gunicorn)很容易理解。

# django - 使用 celery 导入 CSV

> ID：15398094
> 
> 赞同：0
> 
> 时间：2013-03-13T22:54:30.880
> 
> 标签：django, django-celery

我想允许我的用户上传联系人数据的 CSV，这些数据将填充一个名为联系人的模型。我使用了[django-csv-importer](http://django-csv-importer.readthedocs.org/en/latest/index.html#installation)，这似乎工作正常。但是，我想使用像 celery 这样的东西，这样用户就可以上传并且忘记等待（目前可能需要 5 分钟）。

他们是否有任何项目可以做 django-csv-importer 所做的但与 celery 集成部分？如果是这样，如果有更好的方法，有人能给我举个例子吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:37:10.593

很高兴我与 django-csv-importer 的作者合作过，并且可以报告 django-adaptors ( [https://github.com/anthony-tresontani/django-adaptors](https://github.com/anthony-tresontani/django-adaptors) ) 形式的更新版本，它是一样的项目，但重命名，所以它可能有一些新的东西。

至于你的具体问题，约书亚的回答是正确的。但是，如果您想要一个包含审计跟踪的极其丰富的实现，请查看以下内容：[http ://codeinthehole.com/writing/use-models-for-uploads/](http://codeinthehole.com/writing/use-models-for-uploads/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:21:34.003

在任务.py

```
from celery.task import task

@task
def import_csv(filename):
    my_csv_list = MyCsvModel.import_data(data = open(filename))
    ... 
```

然后只需在您的视图中调用 import_csv.delay(filename) 即可。

# javascript - 简单的 javascript in_array 递归函数

> ID：15398095
> 
> 赞同：1
> 
> 时间：2013-03-13T22:54:31.840
> 
> 标签：javascript, arrays, recursion

因此，对于 PHP，我有一组方便的函数用于在多暗淡数组上执行 in_array：

```
function in_array_r($needle, $haystack, $strict = false) {
    foreach ($haystack as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
            return true;
        }
    }
    return false;
} 
```

但是我试图在javascript中重新创建一个类似的，但我似乎无法让它工作..这就是我所拥有的：

```
function in_array_r(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle){
            return true;
        }
        if(typeof haystack[i]=='object'){
            if(in_array_r(needle, haystack[i])){
                return true;
            }
        } 
    }   
    return false;
} 
```

任何人都可以发现它为什么不起作用，因为我看不出它为什么不起作用..

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:03:57.893

这有效..数字和非数字键.. doh！

```
function in_array_r(needle, haystack) {
    var length = haystack.length;
    for(var key in haystack) {
        if(haystack[key] == needle){
            return true;
        }
        if(typeof haystack[key]=='object'){
            if(in_array_r(needle, haystack[key])){
                return true;
            }
        } 
    }
    return false;
} 
```

# compiler-construction - 关于 flex 匹配的奇怪情况

> ID：15398098
> 
> 赞同：-2
> 
> 时间：2013-03-13T22:54:47.960
> 
> 标签：compiler-construction, flex-lexer, lexical-analysis

我正在用 flex 编写扫描仪，我有以下两个定义：

```
%%
"int" printf("JUST_INT");
"int"[ \t\n]+"matrix" printf("MATRIX_INT");
[A-Za-z][A-Za-z0-9]*  printf("IDENTIFIER");
%% 
```

当扫描仪的输入是`int matrixM = 3;`输出时`MATRIX_INT IDENTIFIER`。它将输入视为`int matrix M=3`。但实际上，这不是一个`matrix`，标识符的名称是`matrixM`。输出应该是`JUST_INT IDENTIFIER`. 为什么会这样？是因为我的定义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:19:52.403

拥有跨空间扫描的规则（如`"int"[ \t\n]+"matrix"`. 只需将“int”、“matrix”和 IDENTIFIER 作为三个单独的标记返回，然后让解析器对其进行排序。这比现在好多了`flex`。`flex`只做第一个最长的匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:35:03.870

如果你真的想在扫描仪级别解决这个问题，你可以匹配

```
"int"[ \t\n]+"matrix"/($|[ \t\n]|;|whateverelsedelimitsanidentifier) 
```

这确保`matrix`只有在后面跟着“非单词”时才匹配。正如 EJP 所说，这不是一个好主意，您应该在解析器级别执行此操作。

# php - Pocket API：如何获取访问令牌

> ID：15398101
> 
> 赞同：5
> 
> 时间：2013-03-13T22:55:02.033
> 
> 标签：php, jquery, api, pocket

我正在尝试制作一个网页，显示我存储在 Pocket 中的“稍后阅读”文章列表，使用他们的 API，并按照[他们的 Documentation 上发布的说明进行操作](http://getpocket.com/developer/docs/authentication)。

第 1 步：拥有一个消费者密钥。我创建了袖珍应用程序，并拥有 consumer_key。

第 2 步：获取访问令牌。这就是我卡住的地方。我应该使用 和 发送 POST 请求`consumer_key`，`redirect_uri`但我无法理解。我的脚本位于 domain.com/pocket/index.php，这是我希望发送令牌的地方，所以我假设`redirect_uri`是那个 url。但是在文档中，他们使用了类似“ `pocketapp12388:authorizationFinished`”的东西，这对我来说看起来不像一个 url。

无论如何，无论我使用哪个，我都会收到“400 Bad Request”，这意味着 redirect_uri 不正确。我究竟做错了什么？

[这是jsfiddle.net](http://jsfiddle.net/pixeline/6DHyP/)上的一个小演示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:13:50.447

如果您需要访问令牌，请使用[https://github.com/jshawl/pocket-oauth-php](https://github.com/jshawl/pocket-oauth-php) 打开 config.php 将您的 consumer_key 和 redirect_uri (path.to/callback.php) 并启动 path.to/connect.php 抱歉我的英文））

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-27T02:02:25.103

好吧，您的查询没有任何问题。它在 JSFiddle 上不起作用，因为 JSFiddle 将**XMLHttpRequest**从不同的域发送到另一个域，这是不允许的。

如果您检查控制台，以下是您收到的错误消息：

```
XMLHttpRequest cannot load https://getpocket.com/v3/oauth/request. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://fiddle.jshell.net' is therefore not allowed access. 
```

更多信息在这里：[https ://stackoverflow.com/a/20035319/800387](https://stackoverflow.com/a/20035319/800387)

要测试您的查询，您可以使用**POSTMan REST Client**等 Chrome 扩展程序：[https ://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)

# visual-c++ - Visual Studio 2012 可以进行自定义构建，例如：编译项目 A > 编译和链接项目 B > 链接项目 A？

> ID：15398109
> 
> 赞同：0
> 
> 时间：2013-03-13T22:55:37.153
> 
> 标签：visual-c++, visual-studio-2012, msbuild, build-process

我正在寻找一种使用 Visual Studio 2012（C++ 但可能是一个普遍问题）按此顺序构建项目的方法：

*   编译 ProjectA（我只需要 .objs）
*   编译链接ProjectB
*   链接项目A

我不能简单地在 ProjectB 中使用 ProjectA 的引用/依赖项，因为它会过早地执行 ProjectA 的链接。

我曾经以这种方式使用 VS 2008 执行此操作：

*   ProjectB 上的 PreBuild 事件：`vcbuild /pass0 /pass1`ProjectA
*   编译并链接 ProjectB（它是 ProjectA 的依赖项）
*   编译（实际上什么都不做，因为它已经构建好了）并链接 ProjectA

但是 vcbuild 从 VS 2012 中消失了，我将命令替换为：

`msbuild /t:BuildGenerateSources /t:BuildCompile`

这里的问题是，在第三步它应该只链接（因为 msbuild 已经编译）它现在**再次编译 ProjectA**然后链接它。使用 msbuild 启用诊断详细程度向我展示了这一点：*由于自上次构建以来命令行发生变化，强制重建所有源文件。*. 几乎没有人（包括[Visual Studio 2010 随机说命令行更改和重建](https://stackoverflow.com/questions/7559972/visual-studio-2010-randomly-says-the-command-line-changed-and-rebuilds)）对此有解决方案，因为无法查看正在比较的 2 个命令。

直接使用 Visual Studio（没有在命令行中启动 msbuild 的预构建事件）执行我正在寻找的另一个好处是将编译错误报告到错误列表并在输出窗口中单击。

也许在幕后，这将使用 vcxprojs 中指定的 msbuild 和 Targets，但我想知道它是否可行。

编辑：我已经尝试用 devenv 替换调用 msbuild 的命令，但是 devenv 没有可以指定仅编译（无链接）的开关，因此它也不能使用。

Edit2：听起来有人已经在这里问过类似的问题（没有解决方案）[Visual Studio C++ 是否可以在不链接的情况下编译对象](https://stackoverflow.com/questions/11347927/is-it-possible-for-visual-studio-c-to-compile-objects-without-linking)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:33:39.513

好的，因此可以通过覆盖**.vcxproj**中的 BuildSteps 并删除目标 BuildLink 来完成。

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'" Label="Configuration">
      <BuildSteps Condition="'$(BuildSteps)' == '' or '$(SkipLink)'!='false'">
            ResolveReferences;
            PrepareForBuild;
            InitializeBuildStatus;
            BuildGenerateSources;
            BuildCompile;
            <!-- BuildLink; -->
      </BuildSteps>
</PropertyGroup> 
```

当 VS 构建时，它不会执行链接步骤。原始 BuildSteps 定义在*C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.BuildSteps.target*

为了稍后在命令行上最终链接项目（例如，从另一个项目上的构建事件），我们调用：

```
msbuild /t:BuildLink /p:VisualStudioVersion=11.0 /p:Configuration=Debug /p:Platform=x64 /p:SkipLink=false "ProjectA.vcxproj" 
```

请注意，条件 SkipLink 已添加到 BuildSteps 覆盖中，因此我们可以指定何时执行 BuildLink 以及何时不执行。

# jquery - 用ajax和jquery加载文件不起作用

> ID：15398110
> 
> 赞同：1
> 
> 时间：2013-03-13T22:55:38.690
> 
> 标签：jquery, ajax, file, updating

我使用 jquery 和 ajax 来更新我的网页的一部分，但它不起作用：这是页面：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Insertion, copie et suppression de données</title>
  </head>
  <body>
  <!----------------------------------------------------------------- -------------------->
<style type="text/css">
  div { width: 400px; height: 300px; float: left; margin: 5px; }
  #premier { background-color: #F6E497; }
  #troisieme { background-color: #CAF1EC; }
  #quatrieme { background-color: #F1DBCA; }
</style>
<button id="majPremier">Mise à jour première zone</button>
<button id="majDeuxieme">Mise à jour deuxième zone</button><br /><br />
<div id="premier">
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do 
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim 
ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut 
aliquip ex ea commodo consequat.
</div>
<div id="deuxieme">
  <img src="image.png">
</div>
<script src="jquery.js"></script>
<script>
  $(function() {
    $('#majPremier').click(function() {
      $('#premier').load('maj1.html', function() {
        alert('La première zone a été mise à jour');
      });
    });
    $('#majDeuxieme').click(function() {
          $('#deuxieme').load('maj2.html', function() {
        alert('La deuxième zone a été mise à jour');
      });
    });
  });
</script>
    <!-- - ---------------------------------------------------------------------------------------------------------->
   </body>
</html> 
```

这是我用来用 ajax 更新我的页面的文件 maj1.html ：

```
<html>
  <head>
    <meta charset="UTF-8">
  </head>

  <body>
    Ut enim ad minima veniam, quis nostrum exercitationem ullam 
corporis suscipit laboriosam, nisi ut aliquid ex ea commodi 
consequatur? Quis autem vel eum iure reprehenderit qui in ea 
voluptate velit esse quam nihil molestiae consequatur, vel illum qui 
dolorem eum fugiat quo voluptas nulla pariatur?
  </body>
</html> 
```

我从一个法语教程中得到了这些，当我使用谷歌浏览器中的检查元素时，我看到了这个错误： xmlhttprequest cannot load file ... origin null is not allowed by access control allow origin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:00:17.457

`.load()`如果您在本地访问文件，则不起作用，您需要将文件放在 Web 服务器上。

# node.js - 堆外的 Node.js 内存泄漏？

> ID：15398111
> 
> 赞同：9
> 
> 时间：2013-03-13T22:55:39.657
> 
> 标签：node.js, socket.io, memory-leaks, heap-memory

我刚刚修复了节点堆中的节点应用程序中的内存泄漏。我已经使用 Google 的 Profiler 对其进行了分析，并设法修复了内存泄漏。

现在我的应用程序再次运行了一段时间，我发现堆大小相当稳定。没有内存泄漏了。但是当我检查我的服务器的可用 RAM 时，我看到减少了……当我重新启动我的节点服务器时，RAM 达到了正常的可用 RAM。现在我听说 Node.js 可以在堆外保存对象和东西。我认为这就是导致内存泄漏的原因。

我怎样才能看到是什么占用了内存？不能真正描述任何东西，或者我可以吗？

我在用着：

node.js：v0.8.18 和 socket.io：v0.9.13

我正在使用的其他一些节点模块是：nodetime、heapdump（不过会删除它）、jquery、crypto、request 和 querystring。

一些图表：

[可用的操作系统内存](http://prntscr.com/w7nnk)和 [节点 RSS](http://prntscr.com/w7nse)和[堆已使用](http://prntscr.com/w7nxy)

# assembly - 使用 $ 登录变量

> ID：15398113
> 
> 赞同：1
> 
> 时间：2013-03-13T22:55:52.627
> 
> 标签：assembly

```
DATA SEGMENT
  T DB 0FFH,255,-5,251,'8'
  LEN=$-T
DATA ENDS 
```

$ 符号是什么意思？它将如何影响 LEN 值，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:07:34.823

变量是偏移量，它们是地址。您的 T 变量是 5 个字节长。LEN 也有一个地址，$ 符号的作用是在汇编期间，获取 LEN 的地址并减去 T 的地址，结果将等于 T 的长度。现在，当您在代码中需要 T 的长度时，你可以用LEN，改变T的值吗？LEN 将反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:05:55.003

我不确定这是什么风格的组装（我已经很久没有做过任何组装了，我只熟悉摩托罗拉那种），但我会冒险猜测是`$`指当前地址。因此，当您在段内创建条目时（使用`DB`，我假设它代表“定义字节”）， 的值`$`会根据您定义的大小进行更新。因此，当您这样做时`$-T`，您将减去`T`from的地址`$`，从而得出该段的大小。

# android - 使用 WHERE 子句在 Android 中选择 SQLite 中的特定值

> ID：15398114
> 
> 赞同：0
> 
> 时间：2013-03-13T22:55:57.137
> 
> 标签：android, sqlite, where

我试图获取标题等于我传入的字符串的行 ID。

我在语法上很不稳定，我一直在这个网站上冲浪，试图找到一个 Eclipse 喜欢的例子。通常它告诉我我提供的论点是无效的，但我似乎无法理解它。我尝试添加空值来填充其他参数，例如 groupBy，但它一直告诉我这些参数是错误的。

这是我的代码

```
private String[] folderID = {MySQLiteHelper.COLUMN_FOLDERID};
private String[] folderTitle = {MySQLiteHelper.COLUMN_FOLDERNAME};

public Cursor findFolderId(String i){
String[] select = {i + "=" + folderTitle};
Cursor cursor = database.query(MySQLiteHelper.TABLE_FOLDERS, folderID, "WHERE", select);
return cursor; 
```

编辑：

这是典型的错误

SQLiteDatabase 类型中的方法 query(String, String[], String, String[], String, String, String) 不适用于参数 (String, String[], String, String[])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:59:29.770

你需要改变你的：

```
String[] columns = {"Column1", "Column2"}; // columns to select
String selection = "someCol = ?";
String[] args = {i}; // value added into where clause --> column = i
Cursor c = database.query(TABLE, columns, selection, args, null, null, null); 
```

通常，列是您要获取的列，选择相当于 where 子句，args 是将被替换而不是**`?`**（这称为占位符）以相同顺序替换的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:59:38.947

```
public Cursor findFolderId(String i){
String[] select = {i};
Cursor cursor = database.query(MySQLiteHelper.TABLE_FOLDERS, folderID, folderTitle + "=?", select);
return cursor; 
```

# c# - 将 xml 文档保存到数据表中

> ID：15398116
> 
> 赞同：0
> 
> 时间：2013-03-13T22:56:10.863
> 
> 标签：c#, asp.net, datatable

我有一个 asp.net 页面，我在其中使用 c# 读取 xml 文档并将每个条目添加到列表视图中。

然后，我拥有让用户向列表视图添加新条目的功能，但我不知道如何将其保存在按钮事件中。

这是我必须加载的文件。

```
protected void Button6_Click(object sender, EventArgs e)
         {
             XmlDocument xmlDocument = new XmlDocument();
        using (DataTable tabListView1 = new DataTable())
        {
            tabListView1.Columns.Add("value", Type.GetType("System.String"));
            xmlDocument.Load(AppDomain.CurrentDomain.BaseDirectory + "/XmlFile/ListView1.xml");
            XmlNodeList xmlNodeList = xmlDocument.SelectNodes("root/data[@open='1']");
            foreach (XmlNode xmlNode in xmlNodeList)
            {
                DataRow dr = tabListView1.NewRow();
                dr["value"] = xmlNode.InnerText;
                tabListView1.Rows.Add(dr);
            }
            ListView1.DataSource = tabListView1;
            ListView1.DataBind();
        }
        TextBox3.Text = "Microsoft";

    } 
```

如何让它将更改保存回 ListView1.xml？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:52:54.017

假设您可以从您管理它的控件中将数据源作为 DataTable 取回，这应该会有所帮助。

`private static void SaveXml(string pathAndFileName, DataTable source)
{
XmlDocument xmlDoc = new XmlDocument();
var root = xmlDoc.CreateElement("root");
xmlDoc.AppendChild(root);`

 ````
 foreach (DataRow row in source.Rows)  
     {
        var dataElement = xmlDoc.CreateElement("data");
        var openAttribute = xmlDoc.CreateAttribute("open");
        openAttribute.Value = "1";
        dataElement.Attributes.Append(openAttribute);
        dataElement.InnerText = row["value"].ToString();
        root.AppendChild(dataElement);
     }
     xmlDoc.Save(pathAndFileName);
  } 
````

# assembly - 来自nasm编译器的jmp指令的奇怪机器码

> ID：15398117
> 
> 赞同：1
> 
> 时间：2013-03-13T22:56:19.170
> 
> 标签：assembly, x86, nasm

当我遇到这种情况时，我一直在玩弄 NASM 并研究它是如何编译 asm 代码的。我使用以下命令行编译了我的汇编代码

```
nasm -f bin crash_test_172.asm -o crash_test -l crash_test_172.lst 
```

它是一个非常简单的 asm 文件，其内容是

```
bits 16
org 0x7c00

jmp main

Message db "Hello World", 0x0

main:
   cli
   mov ax,cs
   mov ds,ax
   mov es,ax
   mov ss,ax
   sti 
```

当我打开列表文件**crash_test_172.lst 时**，我发现了这个相当有趣的观察结果。这是列表文件的内容。

```
 1                                  bits 16
 2                                  org 0x7c00
 3
 4 00000000 EB0C                    jmp main
 5
 6 00000002 48656C6C6F20576F72-     Message db "Hello World", 0x0
 7 0000000B 6C6400
 8
 9                                  main:
10 0000000E FA                         cli
11 0000000F 8CC8                       mov ax,cs
12 00000011 8ED8                       mov ds,ax
13 00000013 8EC0                       mov es,ax
14 00000015 8ED0                       mov ss,ax
15 00000017 FB                         sti
16 
```

如果我没有正确理解这一点，在第 4 行，**jmp**指令指向字节`0C`，而根据清单， main 中的第一条指令从`0E`.

我还注意到我一直在玩弄的所有其他 asm 代码中的这种差异。令人惊讶的是，他们每个人都有效。

我错过了什么吗？有人可以帮我理解为什么会这样吗？第 4 行不应该是`EB0E`; 指向 byte `0E`，main 下的第一条指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:59:32.210

0xEB 是一个短的相对跳转，因此它是跳转后的 IP (0x2) 加上偏移量 (0xC)，使其成为 0xE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:07:39.207

`EB`是一个短暂的相对跳跃...

> JMP SHORT imm 的最大范围为 128 字节，因为位移仅指定为 8 位，但占用的代码空间更少。

这意味着操作数不是绝对地址，而是与当前地址的正偏移或负偏移，如[500 - Internal Server Error](https://stackoverflow.com/a/15398152/31671) 所述。

# javascript - 使功能适用于任何一种相同类型的元素

> ID：15398119
> 
> 赞同：1
> 
> 时间：2013-03-13T22:56:20.360
> 
> 标签：javascript, jquery

我正在尝试创建一个文件上传系统。这个文件上传系统非常适合 mosot 部分。问题出现是因为页面上有多个 HTML 元素具有类`file`和多个 HTML 元素是`upload-buttons`. 现在文件上传仅适用于仅包含上传文本字段和上传按钮的第一个 HTML 元素，所有其他元素都无法正常工作（由于 Javascript 每次都选择 [0] 对象）。

我的问题是，如何调整下面的功能以适应使用的任何上传容器/按钮？

本质上需要发生的是，如果用户单击第 n 个上传按钮，则函数数组插槽需要以某种方式等于 n-1。

我感谢任何有关此问题的帮助。

提前谢谢了！

```
$(document).on('click','.upload-button', function(){
        var data = new FormData();

        jQuery.each($('.file')[0].files, function(i, file) {
            data.append('file-'+i, file);
        });
            //Some more code...
}); 
```

HTML

```
 <div class="input-text-field">
         <input name="userfile" class="file" type="file" />
         <input class="submit upload-button" type="submit" value="Upload" />
     </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:03:49.873

用于`prev()`仅针对前一个`.file`元素，并注意您的代码没有`.file`元素，它有一个#file 元素，并且多个 ID 是无效的。

```
$(document).on('click','.upload-button', function(){
        var data = new FormData();

        jQuery.each($(this).prev('.file')[0].files, function(i, file) {
            data.append('file-'+i, file);
        });
            //Some more code...
}); 
```

html

```
<div class="input-text-field">
     <input name="userfile" class="file" type="file" />
     <input class="submit upload-button" type="submit" value="Upload" />
 </div> 
```

# jquery - 未捕获的 SyntaxError：意外的令牌 jquery

> ID：15398121
> 
> 赞同：0
> 
> 时间：2013-03-13T22:56:20.597
> 
> 标签：jquery, html, ajax

为什么我会收到此错误：

未捕获的 SyntaxError：意外的令牌

第 25 行的错误。

```
$('form.ajax').on('submit', function() {
    var that = $(this),
        url = that.attr('action'),
        type = that.attr('method'),
        id = that.attr('id'),
        data = {};

    that.find('[name]').each(function(index, value) {   
        var that = $(this),
            name = that.attr('name'),
            value = that.val();

        data[name] = value; 
    });

    $.ajax({    
        url: url,
        type: type,
        id: id,
        data: data,
        error: function(response){
        $(document).ready(function() { $("div").append("<div id='error'>Error</div>"); });
        },
        success: function(response) {
            //Error on this line -> //   $(".comContainer " + id +   ).load(location.href+" .comContainer " + id + ">*","");
        }   
    });

    return false;
}); 
```

这里有什么问题吗？我看不到

这是获取代码的html代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="js/main.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:00:34.987

你有一个额外的`+`：

```
$(".comContainer " + id +   ) 
```

应该

```
$(".comContainer " + id) 
```

# php - php空对象与默认空值

> ID：15398123
> 
> 赞同：1
> 
> 时间：2013-03-13T22:56:27.667
> 
> 标签：php, oop

我刚刚阅读了一篇关于空对象模式的精彩文章（[http://phpmaster.com/the-null-object-pattern-polymorphism-in-domain-models/](http://phpmaster.com/the-null-object-pattern-polymorphism-in-domain-models/)），我正计划将它实现到一些现有代码中。

我的问题是，一个全新的“空类”会是最好的方法吗？以前我在构造函数中将默认值设置为 NULL。然后我可以创建类的空壳。例如：

```
class person{

    private $_personId;
    private $_name;
    private $_email;
    private $_phone;

    public function __construct($_personId, $_name, $_email, $_phone = NULL){
        //set the vars here
    }

} 
```

然后，如果我想要一个真实的对象，我会这样做：

```
$person = new person(1, 'John Doe', 'doe@gmail.com'); 
```

如果我想要一个“空”对象，我会这样做：

```
$person = new person(NULL, NULL, NULL); 
```

这种方法有什么陷阱吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-27T17:59:48.623

您没有遵循本文中讨论的模式。*Null Object*的原理是扩展您的主要域对象。会是这样的：

```
class Person {
    // atributes and methods...
}

class PersonNull extends Person {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:01:01.363

我鼓励您考虑探索工厂模式——也就是说，在 Person 内部创建几个静态方法，这些方法可以根据传递的参数返回一个 Person 对象。例如：

```
class Person {
 public static createWithName($name) {
   $obj = new Person();
   $obj->_name = $name;
   return $obj;
 }

 public static createWithNameAndEmail($name, $email) {
   $obj = new Person();
   $obj->_email = $name;
   $obj->_name = $email;
   return $obj;    
 }

 ....
}

/* 
   And then instead of $objPerson = new Person('Bob', null, null, null)
   you would instantiate an object like this:
*/
$objPerson = Person::createWithName('Bob') 
```

这将允许您进行所需的所有验证，并帮助您通过方法声明记录有效类型的参数。更多关于工厂模式： http: [//phpmaster.com/understanding-the-factory-method-design-pattern/](http://phpmaster.com/understanding-the-factory-method-design-pattern/)

# offline - 离线 kmz 文件

> ID：15398127
> 
> 赞同：0
> 
> 时间：2013-03-13T22:56:42.433
> 
> 标签：offline, kmz

创建 kmz 文件以供离线使用的最佳方法是什么？

我需要可以放在 CD 上的文件，并且推销员可以在没有 Internet 连接的情况下提取所有 Google 地球数据——地图、地标、气球、文本和照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:02:29.667

您可以在 KMZ 文件中包含任何级别的嵌套 KML 或 KMZ 文件。KMZ 文件可以在弹出气球中显示嵌入的图像，并从一个地标链接到另一个地标。您还可以通过气球描述中的 iframe 显示一些内容，例如 HTML 文件。

这是 KML 描述片段，用于显示嵌入在 KMZ 文件中的文件的内联图像和外部 HTML（通过 iframe）。

```
 <description>
 <![CDATA[
  Here is an image:<BR>
  <img src="image.gif"/>
  <BR>
  Here is html:
  <BR>
  <iframe src="test.html">
  <p>Your browser does not support iframes.</p>
  </iframe>
  ]]>
  </description> 
```

[以下是KMZ 教程](https://developers.google.com/kml/documentation/kmzarchives)`<iframe>`中对内容的一些限制

> `<src>`元素内的元素`<iframe>`不能指向磁盘上的本地文件，也不能指向KMZ文件内的文件；它必须指向浏览器可以访问的 Internet 上的 URL。

如果您想链接到非 KML 文档（例如 HTML、PDF 等），那么将它们嵌入到 KMZ 文件中会有一些进一步的限制。如果本地文件（HTML、PDF、图像等）在 KMZ 文件中，则无法从 Google 地球直接链接到这些文件。

如果您的目标是离线 CD 或 DVD（没有 Internet 连接），那么您可以轻松地创建 KML 文件，其中包含子文件夹中的媒体内容（例如视频、图像、html 等）。要链接到非 KML 文件，Google 地球中该 KML 的用户需要启用“工具/选项/常规”菜单面板中的“*允许访问本地文件和个人数据*”选项，然后您就可以访问这些链接：你会从一个网络浏览器。

CD/DVD 和 KML/KMZ 文件的结构和布局取决于几件事：1) 您想要提供的数据量以及它是否适合压缩或未压缩形式的 CD 或 DVD，以及 2)只想在 KML 描述气球中显示内容，或者想要链接到完整浏览器窗口中的内容。您可能有混合内容——其中一些内容仅显示在 KML 气球描述中，在这种情况下，如果需要压缩，则可以将其放置在 KMZ 文件中，而其他内容需要在外部链接和访问。

# javascript - 您会为“javascript 枚举”选择哪三个值？

> ID：15398129
> 
> 赞同：0
> 
> 时间：2013-03-13T22:56:57.467
> 
> 标签：javascript, optimization

在 JavaScript 中，我正在构建类似井字游戏（但更复杂）的东西。任何给定的字段都可以有三个值：黑色块、白色块或什么都没有。你会用什么来表示这些值？考虑到你一次要经过大约 300 多个。

我首先想到的是“B”、“W”和“N”。然后我想到了 0、1 和 2，现在我在考虑真、假和空。就 JavaScript 而言，哪个是更好的选择？快点？更地道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:01:32.130

它不会产生速度差异。

就个人而言，我会选择 0,1,2。

一般来说，我会避免在 undefined、null 和 false 之间做出区分。这只会在某个条件下导致一些错误。在您的情况下，无论如何， undefined 似乎是一个非常糟糕的选择，因为该字段的内容不是未定义/未知的，它被明确定义为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:07:49.727

正如 Thilo 指出的那样，您希望避免有多个值可以使语句`if(position)`评估`position`为真。不过，我可能会使用 using`null`作为空值，因为这对我来说似乎更有意义。

对于其他价值观，我肯定会选择难以混淆的东西。字符串不是很好，因为您最终会使用`B`而不是沿线`W` *某处*`1`并得到烦人的错误，因此并且`2`可能不是坏的选择。

但是，另一种选择是为此目的制作自己的“枚举” - 只需拥有`var black = new Object()`并`var white = new Object()`使用它们。这样一来，您所指的内容就比`1`和更清楚`2`。很多，不过。

# iphone - How Do I Implement If-Statement within Method?

> ID：15398131
> 
> 赞同：0
> 
> 时间：2013-03-13T22:57:05.737
> 
> 标签：iphone, if-statement, methods, indexing, conditional

Im a noob to iphone development and I am having trouble implementing an if-statement within the didSelectIndex method of AwesomeMenu. The method fires and returns the value of the index selected, but it doesn't respond when I attempt to use the index in a conditional statement within the method. For example, my log only prints "Select the index : 0", but not "Index 0". This is very frustrating to say the least. Any help is greatly appreciated.

MY CODE:

```
- (void)AwesomeMenu:(AwesomeMenu *)menu didSelectIndex:(NSInteger)idx{

  if (idx==0) {

    NSLog(@"Index 0"); //Doesn't print

  }else if(idx==1){

    NSLog(@"Index 1"); //Doesn't print

  }else{

      NSLog(@"Else Block test"); //Doesn't print

  } 

NSLog(@"Select the index : %d",idx); //<--This Works.

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:17:10.620

**The delegate is simply set incorrectly.**

The boilerplate code for Awesome Menu includes the NSLog statement that is being called. Your above code is fine. You are simply not setting the delegate for the menu to the appropriate object. As a result, **your above code never runs.**

If you need assistance in this matter, please post the code demonstrating how you initialize your AwesomeMenu.

In any case, search your entire project for the phrase "Select the index" and you will find the delegate method ***that is actually being executed instead of your current code.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:10:02.113

You can try:

```
NSInteger i = 2;
NSInteger j = 2;
if (i == j) { 
 NSLog(@"equal")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:11:19.500

There is no problem with your `If - else` statement. check your `(NSInteger)idx` closely.

Its working fine

`[self AwesomeMenu:nil didSelectIndex:1]`;

```
- (void)AwesomeMenu:(id )menu didSelectIndex:(NSInteger)idx{

    if (idx==0) {

        NSLog(@"Index 0"); //Doesn't work

    }else if(idx==1){

        NSLog(@"Index 1"); //Doesn't work

    }

    NSLog(@"Select the index : %d",idx); //<--This Works.

} 
```

**Output**

```
Index 1
Select the index : 1 
```

# c# - Kendo Grid 内联编辑日期格式问题

> ID：15398134
> 
> 赞同：4
> 
> 时间：2013-03-13T22:57:25.723
> 
> 标签：c#, asp.net, kendo-ui

我已经研究了好几天，但运气不佳。我走了多条路，但似乎找不到有效的解决方案。任何帮助将不胜感激。

我有一个用于 CRUD 的 Kendo MVC Grid

```
@(Html.Kendo().Grid<Games.Models.Game>()    
.Name("Grid")    
.Columns(columns => {        
    columns.Bound(p => p.GameName).Width(100);
    columns.Bound(p => p.Publisher).Width(75);
    columns.Bound(p => p.MaxPlayers).Width(75);
    columns.Bound(p => p.DateAdded).Width(100).Format("{0:MM/dd/yyyy}"); 
```

当我尝试编辑 DateAdded 字段时，它将日期从我格式良好的 05/01/2003 更改为 Thu May 1 17:00:00 CDT 2003，并在您尝试更新数据时抛出错误（我的任何数据enter 转换为日、月、时间、时区年格式）。

网格抛出“字段 DateAdded 必须是日期错误”。

我尝试使用 Kendo 日期选择器使用编辑器模板，但数据没有更新到我的模型中。

```
columns.Bound(p => p.DateAdded).Width(100).Format("{0:MM/dd/yyyy}").EditorTemplateName("DateTime"); 
```

编辑器模板：

```
@(Html.Kendo().DatePicker()
                .Name("datepicker")
                .Format("M/d/yyyy")
) 
```

关于我做错了什么的任何想法？如果我可以更新内联日期，我可以跳过使用日期选择器，但我无法让任何一种方法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:49:55.470

日期时间根据客户端上指定的**文化**（剑道文化）进行验证。请记住，编辑器的验证和格式是两件不同的事情。您应该将文化更改为日期/月份顺序是您用作格式的文化。类似的情况[在这里](http://gerardbeckerleg.wordpress.com/2012/06/25/kendo-ui-mvc-grid-datepicker-in-line-and-in-cell-edit-validation-error-the-value-is-not-valid/)。

有关剑道文化以及如何改变它的更多信息，请参阅[文档](http://docs.kendoui.com/getting-started/framework/globalization/definecultureinfo)。

# ios - 应用程序在任何 UI 滚动操作期间停止接收 NSTimer 选择器回调

> ID：15398138
> 
> 赞同：0
> 
> 时间：2013-03-13T22:57:39.250
> 
> 标签：ios, animation, scroll, nstimer, cadisplaylink

我在 NSTimer 触发的主窗口上有一个 OpenGL 动画绘图。如果我打开一个带有可滚动 UITableView 菜单的弹出窗口，动画会在滚动过程中冻结。一旦滚动动画停止，计时器回调就会重新开始。只有当用户主动尝试滚动时，主窗口才会停止更新。

似乎 Apple 的滚动动画以某种方式阻止了主循环上的调度。这是真的吗？有办法解决吗？

如果我能提供帮助，我真的不想引入多线程，因为这会成倍地增加我的代码的复杂性。

我也尝试使用 CADisplayLink 而不是 NSTimer 并且显示链接调用也被滚动动画阻止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T20:43:41.127

NSTimer 与运行循环和模式相关联。在事件跟踪期间，模式为`UITrackingRunLoopMode`。默认情况下，由创建的计时器`scheduledTimerWithTimeInterval`被添加，`NSDefaultRunLoopMode`因此在跟踪期间不会触发。

```
[[NSRunLoop currentRunLoop] addTimer:yourTimer forMode:UITrackingRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T21:40:52.600

正如 bdesham 所回答的，“Apple 的第一要务是 UI 响应能力，因此在这种情况下，UI 操作会阻塞代码的其他部分。您需要将计时器移至另一个线程。”

# list - 删除存储在列表中的一些元素以及其他列表中存在的索引

> ID：15398142
> 
> 赞同：1
> 
> 时间：2013-03-13T22:58:25.087
> 
> 标签：list, arraylist

问：删除列表中存储的某些元素，而其他列表中存在索引？例如。列表 1 有 a、b、c、d、e 和列表 2 有 0,2 那么 a 和 c 应该被删除。

我已经完成了这个，不知道这是多么有效\无效

```
public class RemoveByIndexFromOtherList {

    public static void main(String[] args) {
        List<String> lOriginal = new ArrayList<String>();
        lOriginal.add("a");
        lOriginal.add("b");
        lOriginal.add("c");
        lOriginal.add("d");
        lOriginal.add("e");

        List<Integer> indexes = new ArrayList<Integer>();
        indexes.add(0);
        indexes.add(2);
        List<String> elemToRemove = new ArrayList<String>();

        for (Integer index : indexes) {
            String b = lOriginal.get(index.intValue());
            elemToRemove.add(b);
        }

        for (String s : lOriginal) {
            if (elemToRemove.contains(s)) {} 
            else {
                System.out.println(s);
            }
        }
    }
} 
```

请提出建议，如何将其改进到相当好的有效水平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:50:18.157

不确定您是否仍需要答案/建议。

您可以创建一个新列表并添加第二个列表中不存在的索引，而不是删除。然后只需更改参考。在您的情况下，如果列表中有多个“a”，它们都将被删除。

建议：

```
import java.util.ArrayList;
import java.util.List;

public class RemoveByIndexFromOtherList {

    public static void main(String[] args) {
        List<String> lOriginal = new ArrayList<String>();
        lOriginal.add("a");
        lOriginal.add("b");
        lOriginal.add("c");
        lOriginal.add("d");
        lOriginal.add("e");
        lOriginal.add("a");

        List<Integer> indexes = new ArrayList<Integer>();
        indexes.add(0);
        indexes.add(2);

        List<String> newListOriginal = new ArrayList<String>();

        for(int i = 0; i<lOriginal.size(); i++){
            if(!indexes.contains(i)){
                newListOriginal.add(lOriginal.get(i));
            }           
        }
        lOriginal = newListOriginal;

        for(String str: lOriginal){
            System.out.println(str);
        }

    }
} 
```

# .htaccess - .htaccess 需要检查空白参数

> ID：15398150
> 
> 赞同：1
> 
> 时间：2013-03-13T22:59:24.103
> 
> 标签：.htaccess, mod-rewrite

目前，我位于 olddomain.com 的 .htaccess 包含：

```
RewriteEngine On
RewriteRule ^([^/]+)/?  http://newdomain.com/?d=$1 [L] 
```

所以如果一个人去：
**olddomain.com/docu443**
它被重定向到：
**newdomain.com/?d=docu443**

这工作正常，除非有一个空白参数：
**olddomain.com**
被重定向到：
**newdomain.com/?d=default.asp**

相反，我需要它去：没有参数的
**newdomain.com**
。

是的，我是一个完整的 Apache 菜鸟，所以请拼出你的答案，否则我不会明白你在说什么。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:38:26.223

您可以尝试添加条件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?  http://newdomain.com/?d=$1 [L] 
```

或检查异常：

```
RewriteEngine On
RewriteRule ^default.asp$ http://newdomain.com/ [L]
RewriteRule ^([^/]+)/?  http://newdomain.com/?d=$1 [L] 
```

# spring - Spring Batch 添加 Roo 原生

> ID：15398155
> 
> 赞同：0
> 
> 时间：2013-03-13T22:59:37.227
> 
> 标签：spring, maven, spring-roo, spring-batch

当我尝试将 Roo 本机添加到 Simply Spring Batch 项目时.. Roo 控制台返回：

org.springframework.batch:spring-batch-test 需要版本

但我在 pom.xml 中包含了这个库：

```
<dependency>
            <groupId>org.springframework.batch</groupId>
            <artifactId>spring-batch-test</artifactId>
            <version>2.1.9.RELEASE</version>
        </dependency> 
```

请帮助，如何在这个项目中添加 Roo 本机。谢谢！在这里你可以看到截图[http://s41.radikal.ru/i092/1303/8b/b20c0ca4505f.jpg](http://s41.radikal.ru/i092/1303/8b/b20c0ca4505f.jpg)

# javascript - Javascript 验证错误

> ID：15398158
> 
> 赞同：0
> 
> 时间：2013-03-13T22:59:45.410
> 
> 标签：javascript, validation

我在 html 中编写了以下代码，并且 javascript 文件也嵌入在下面

```
<!DOCTYPE html>
<meta charset="utf-8">
<HTML>
<head>
<link rel="stylesheet" href="admin.css"/>
<script type="text/javascript" src="common.js"></script>
</head>
<BODY>
<div class="adminnav" id="adminnav">
<ul>
<li><a href="#">Insert</a>
<ul>
<li><a href="addcourse.html">Insert Course</a></li>
<li><a href="addstudent.html">Insert Student</a></li>
<li><a href="addteacher.html">Insert Teacher</a></li>
<li><a href="addsubject.html">Insert Subject</a></li>
</ul>
</li>
</ul>
</div>
<div class="addcourse" >
<form name="course" onSubmit='return validcourse()' method="POST">
Course Name:
  <input type="text" name="coursename" id="cname" /><br>
Duration:<input type="text" name="cd"/>
<br>
Course Id:<input name="cid" type="text" /><br>
<input  type="submit" value="submit" name="submit"><input type="reset" name="coursereset">
</form>
</div>
</BODY>
</HTML> 
```

common.js

```
function validcourse()
{
    var course_name=document.course.coursename;
    var course_duration=document.course.cd;
    var course_id=document.course.cid;

    if(course_name_valid(course_name))
    {
        {
            if(course_duration_valid(course_duration))
            {
                if(course_id_valid(cid))
                {
                }
            }
        }
    }

}

function course_name_valid(course_name)
{
    var letters=/^[A-Za-z]+$/;
    if(course_name.value.match(letters))
    {
        return true;
    }
    else
    {
        alert("Course name must have alphabets only");
        course_name.focus();
        return false;

    }
}

function course_duration_valid(course_duration)
{
    var letters=/^[1-9]+$/;
    if(cd.value.match(letters))
    {
        return true;
    }
    else
    {   
        alert("Course Duration can have numbers only");
        course_duration.focus();    
        retun false;
    }   

}

function course_id_valid(course_id)
{
    var letters=/^[0-9a-zA-z]+$/;
    if(course_id.value.match(letters))
    {
        return true;
    }
    else
    {
        alert('Course ID must have character and numeric values only');
        course_id.focus();
        return false;           
    }
} 
```

我的问题是什么都没有发生，没有给出错误消息。错误消息仅针对课程名称而不针对课程持续时间和课程 ID？

这是 jsfiddle [http://jsfiddle.net/amolkarale/aTfq6/1/的链接](http://jsfiddle.net/amolkarale/aTfq6/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:04:57.550

您没有从`validcourse`. 在其中添加一个`return true;`and`return false;`以让提交继续或停止提交：

```
function validcourse()
{
    var course_name=document.course.coursename;
    var course_duration=document.course.cd;
    var course_id=document.course.cid;

    if(course_name_valid(course_name))
    {
        {
            if(course_duration_valid(course_duration))
            {
                if(course_id_valid(cid))
                {
                    return true;
                }
            }
        }
    }
    return false;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:19:58.080

看起来您的第三个函数中有语法错误`course_duration_valid(course_duration)`

```
retrun false; 
```

应该：

```
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:40:03.530

好的，所以我让你的东西工作了。以下是所需的更改：

首先，对象引用需要在你的 DOM 中更清晰

```
var course_name=document.getElementById("cname");
var course_duration=document.getElementById("cd");
var course_id=document.getElementById("cid"); 
```

如您所见，元素需要有各自的 id。

```
Course Name:
<input type="text" name="coursename" id="cname" /><br>
Duration:
<input type="text" name="cd" id="cd"/><br>
Course Id:
<input name="cid" type="text" id="cid" /><br> 
```

最后，`retrun`正如@Steve 已经指出的那样，需要纠正

# android - 为 android 生成谷歌地图密钥 - 一步一步

> ID：15398159
> 
> 赞同：2
> 
> 时间：2013-03-13T22:59:45.277
> 
> 标签：android, google-maps, android-layout

这些是我为 android 生成地图密钥的步骤：

1-) 我执行这个命令：

`keytool -list -v -alias androiddebugkey -keystore ~/.android/debug.keystore -storepass android -keypass android`

该命令将具有如下输出：

```
Alias name: androiddebugkey
Creation date: Mar 13, 2013
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=Android Debug, O=Android, C=US
Issuer: CN=Android Debug, O=Android, C=US
Serial number: 51401a0b
Valid from: Wed Mar 13 02:17:47 EDT 2013 until: Fri Mar 06 01:17:47 EST 2043
Certificate fingerprints:
     MD5:  XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX
     SHA1: XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX
     Signature algorithm name: SHA1withRSA
     Version: 3 
```

2-) 获得 SHA1 后，我将其复制，然后打开此链接：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

我设置了这个功能：

![在此处输入图像描述](../Images/9c0cde9163d933e162aacf6a955fdeb6.png)

3-) 之后我生成一个新密钥：

where `XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX`（是上面获得的 SHA1）并且`edu.osu.cse5326.busstopapp`是我项目的单个包。

![在此处输入图像描述](../Images/18a5b22594a0c2941418c2cb96aa8ed7.png)

4-) 最后，我复制生成的地图 API 密钥：

![在此处输入图像描述](../Images/98ebe689a8eba37bef58ada47bc56087.png)

5-) 然后我粘贴到我的一个布局中：

```
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/mapViewBusStopLocation"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:clickable="true"
                    android:apiKey="the_api_key"

                /> 
```

6-）我从相应的活动加载地图。

7-) 这是我的 manifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="edu.osu.cse5326.busstopapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <permission
        android:name="edu.osu.cse5326.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <application
        android:name="edu.osu.cse5326.busstopapp.AppState"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="edu.osu.cse5326.busstopapp.LoginActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

      Many other activities
    </application>

</manifest> 
```

**问题**是我只看到灰色区域，没有地图信息。

这是我在尝试运行项目时遇到的异常：

```
03-13 16:48:28.045: W/System.err(375): IOException processing: 26
03-13 16:48:28.045: W/System.err(375): java.io.IOException: Server returned: 3
03-13 16:48:28.045: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
03-13 16:48:28.045: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
03-13 16:48:28.045: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
03-13 16:48:28.055: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
03-13 16:48:28.055: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
03-13 16:48:28.055: W/System.err(375):  at java.lang.Thread.run(Thread.java:1019)
03-13 16:48:28.365: W/System.err(375): IOException processing: 26
03-13 16:48:28.365: W/System.err(375): java.io.IOException: Server returned: 3
03-13 16:48:28.365: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
03-13 16:48:28.375: W/System.err(375):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473) 
```

我读了很多书，我认为这是 Map API Key 的问题，但我找不到我做错了什么。

**我尝试过但没有奏效的事情：**

1.  删除 debug.keystore 并重新生成。
2.  我尝试在真正的设备上运行，而不是在模拟器上运行。
3.  重新生成地图 api 密钥并等待几个小时，看看是否需要时间来工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:24:09.900

我不明白，您在所有设置中都使用了**Google Map API V2**，包括您从控制台获取的密钥，但您使用的`MapView`是**Google Map API V1**对象。

您应该将`MapFragment`或`SupportMapFragment`对象与`android-support-v4`库一起使用，具体取决于您为其编写应用程序的 minSDK。

这是我写的关于如何将 Google Map API V2 添加到您的应用程序的博客文章，我想您会发现它很方便：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:17:24.197

我搜索了一下，发现[了这个](https://stackoverflow.com/questions/7296467/google-map-signed-api-key-errors-in-android)问题，这个答案：

> 使用签名的 API 密钥时，仅当从 Android 市场安装应用程序时才会显示 MapView。因此，从 Eclipse（运行方式、调试方式等）或命令行（adb 安装）安装应用程序不会显示 MapView。请放心，一旦应用程序进入市场 - 您下载它，MapView 就会出现。

这有点奇怪，但我希望它会对你有所帮助。

# json - JSONPath 表达式在不同的树枝中搜索具有特定属性的对象

> ID：15398161
> 
> 赞同：0
> 
> 时间：2013-03-13T22:59:53.760
> 
> 标签：json, jsonpath

我正在寻找一个 JSONPath 表达式，它返回所有 zoneType 为“big”的区域对象。

输入 JSON：

```
{
  "board" : {
     "zones" : {
          "1": {
              "zoneID": 1, 
              "zoneType":"big" 
           },
           "2": {
              "zoneID": 2, 
              "zoneType":"small"
           },
           "3": { 
             "zoneID": 3,
             "zoneType":"small" 
           },
          "4": {
              "zoneID": 4, 
              "zoneType":"big" 
           },
       }
   }
} 
```

预期输出：[{“zoneID”：1，“zoneType”：“big”}，{“zoneID”：4，“zoneType”：“big”}]

我试过： $..zones.[?(@.zoneType='big')] $..zones.*[?(@.zoneType='big')]

和许多其他人，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:57:52.033

我最初也使用过 jsonpath，后来遇到了一些问题，所以决定使用循环数据。所以你可以试试下面的代码。

var json = 你的 json 数据；

var输出=（函数（数据）{

```
var keys = (function (obj) {
    var keys = [];
    for (var key in obj) {
        keys.push(key);
    }
    return keys;
})(data["board"]["zones"]);
var categoryFilter = new Function('data,keys',
        "obj=[];" +
        "for(var i=0;i<keys.length;i++){" +
            "if (data[keys[i]].zoneType == 'big') {" +
               "obj.push(data[keys[i]]);" +

            "}" +
        "}" +
        "return obj;"
        );
return JSON.stringify(categoryFilter(data["board"]["zones"], keys)); 
```

})(json);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T23:31:29.280

JSONPath 是非标准化的“查询语言”，但 XPath 是。使用 DefiantJS，您可以使用 XPath 表达式查询 JSON 结构。该库使用“搜索”方法扩展了全局对象 JSON，并将匹配项作为类似对象的数组返回。

下面是示例代码（这里是小提琴[http://jsfiddle.net/hbi99/DQ9CJ/](http://jsfiddle.net/hbi99/DQ9CJ/)）：

```
var data = {
       "board": {
          "zones": {
             "1": {
                "zoneID": 1,
                "zoneType": "big"
             },
             "2": {
                "zoneID": 2,
                "zoneType": "small"
             },
             "3": {
                "zoneID": 3,
                "zoneType": "small"
             },
             "4": {
                "zoneID": 4,
                "zoneType": "big"
             }
          }
       }
    },
    found = JSON.search(data, '//*[zoneType="big"]'),
    str = '';

for (var i=0; i<found.length; i++) {
    str += found[i].zoneID +'<br/>';
}

document.getElementById('output').innerHTML = str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T08:45:16.780

答案应该是：$..zones[?(@.zoneType=="big")]

以下作品：-

JsonPath.on(json_hash, '$..zones[?(@.zoneType=="big")]')

返回：-

[{"zoneID"=>1, "zoneType"=>"big"}, {"zoneID"=>4, "zoneType"=>"big"}]

# android - 如何让Android webview打开iframe中目标“_blank”的链接

> ID：15398162
> 
> 赞同：9
> 
> 时间：2013-03-13T23:00:09.120
> 
> 标签：android, iframe, webview, target

解决了

只需将它放在 oncreate 中：奇怪的是只会在“android 浏览器”中打开

```
 //webview settings
        myWebView = (WebView) findViewById(R.id.calwebview);
        myWebView.setBackgroundColor(Color.BLACK);
        myWebView.setWebViewClient(new MyWebViewClient());
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setSupportMultipleWindows(true);
        myWebView.loadUrl("www.google.com");    
        myWebView.setWebChromeClient(new WebChromeClient() {
                @Override public boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg)
                {
                    WebView newWebView = new WebView(view.getContext());
                    WebView.WebViewTransport transport = (WebView.WebViewTransport) resultMsg.obj;
                    transport.setWebView(newWebView);
                    resultMsg.sendToTarget();
                    return true;
                }
            }); 
```

# twitter-bootstrap - Twitterboostrap popover on a button

> ID：15398167
> 
> 赞同：1
> 
> 时间：2013-03-13T23:00:31.213
> 
> 标签：twitter-bootstrap

is it possible to put a popover on a button (submit button) so when over over you get the pop over and when clicked it still does its job of submitting a form? all the examples I have seen require it to be a link.

does any one have any js fiddels of a pop over on a button, not a link styled to be a button.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:38:10.957

Here is a simple example: [http://jsbin.com/akuhun/1](http://jsbin.com/akuhun/1)

HTML:

```
<form id="aform" action="http://google.com/">
    <input type="submit" class="btn" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. right?" data-original-title="A Title">
</form> 
```

JS:

```
$("[data-toggle=popover]").hover(function () {
    $(this).popover('show');
},function () {
    $(this).popover('hide');
}); 
```

# javascript - 查找所有具有负顶部属性的 html DIV 元素

> ID：15398169
> 
> 赞同：2
> 
> 时间：2013-03-13T23:00:39.490
> 
> 标签：javascript, jquery, html

此 jquery 代码应返回所有具有负顶部属性的 DIV，但它不起作用

```
$('div').filter(function(){return parseInt(($(this).css('top')) <0 )}) 
```

有人知道其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:06:25.370

尝试使用`position().top`而不是`css('top')`

```
$('div').filter(function(){return parseInt(($(this).position().top) <0 )}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:06:28.110

你有一些额外的括号， parseInt 被包裹在你的条件周围。试试这个：

```
$('div').filter(function() {
    return parseInt($(this).css('top')) < 0;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T23:07:19.280

```
$('div').filter(function(){
    return parseInt( getComputedStyle(this, null).top, 10 ) < 0);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:15:20.407

这对我有用：

```
$('div').filter(function(index,element){
    if (parseInt(($(element).css('top'))) < 0) return element;
}); 
```

小提琴：http: [//jsfiddle.net/ZFgk8/](http://jsfiddle.net/ZFgk8/)

# c++ - 'XcvData' 未在此范围内声明

> ID：15398170
> 
> 赞同：0
> 
> 时间：2013-03-13T23:00:49.700
> 
> 标签：c++, qt

我正在尝试使用 Ghostscript 和 RedMon 安装一个虚拟打印机，它使用 c++ 打印到 PDF 文件，但是当我尝试编译我的代码时，我得到`'XcvData' was not declared in this scope`了以下功能：

```
#include <windows.h>
#include <winspool.h>
BOOL AddPort()
{
    DWORD cbneed,cbstate;
    PBYTE pOutputData;
    HANDLE hXcv = INVALID_HANDLE_VALUE;
    PRINTER_DEFAULTS Defaults = { NULL,NULL,SERVER_ACCESS_ADMINISTER };

    WCHAR pszPortName[]=L"UTReportPDFPort:";
    pOutputData=(PBYTE)malloc(MAX_PATH);

    if(!OpenPrinter((WCHAR*)",XcvMonitor Redirected Port",&hXcv,&Defaults ))
    {
        LPVOID lpMsgBuf;
        GetLastError();
        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
            NULL, GetLastError(), NULL,(LPTSTR) &lpMsgBuf, 0, NULL );
        ::MessageBox(0,(LPCTSTR)lpMsgBuf,(WCHAR*)"ERROR",MB_OK|MB_ICONINFORMATION);
        free(pOutputData);
        LocalFree( lpMsgBuf );
        return FALSE;

    }
    if(!XcvData(hXcv,L"AddPort",(PBYTE)pszPortName,sizeof(pszPortName),(PBYTE)pOutputData,MAX_PATH,&cbneed,&cbstate))
    {
        LPVOID lpMsgBuf;
        SetLastError(cbstate);
        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
              NULL, GetLastError(), NULL,(LPTSTR) &lpMsgBuf, 0, NULL );
        ::MessageBox(0,(LPCTSTR)lpMsgBuf,(WCHAR*)"ERROR",MB_OK|MB_ICONINFORMATION);
        LocalFree( lpMsgBuf );
        free(pOutputData);
    }

    free(pOutputData);
    ClosePrinter(hXcv);

    return TRUE;

} 
```

我可以做些什么来在我的 Qt 应用程序上使用 XcvData 函数？

# android - Android：创建自定义 2D 头像

> ID：15398176
> 
> 赞同：1
> 
> 时间：2013-03-13T23:01:32.363
> 
> 标签：android, imageview, android-relativelayout, offset, avatar

我正在创建一个应用程序，该应用程序允许用户通过指定鞋子、袜子、肤色等内容来构建自定义 2D 头像......

目前，我的解决方案是为每个项目创建一个 .PNG，然后在 RelativeLayout 中将它们全部“堆叠”在一起。所以举个例子，我创建了两个鞋子的 ImageView，并将 ImageView 对齐到相对布局的中心和相对布局的底部。接下来，我将袜子的底部边缘“堆叠”到鞋子的顶部边缘。不断地。

这种方法有效，但我觉得我对零件的位置没有太多控制权，更愿意能够在运行时计算 x,y 坐标并以这种方式放置图像。例如，如果所有的 ImageViews 都堆叠起来，这很好用，但是如果我需要将一个 ImageView 放置在另一个 ImageView 的顶部边缘下方 10 像素处，我不能这样做（或者至少我还没有弄清楚怎么做） .

**我正在寻找一种解决方案，可以让我控制 ImageViews 的 x、y 位置并允许 ImageView 相互偏移。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:23:56.403

如果您希望通过 x,y 坐标放置图像，那么您应该考虑使用单个视图并简单地将图像绘制在顶部。[请参阅自定义绘图上的](http://developer.android.com/training/custom-views/custom-drawing.html)此文档。你会发现[`drawBitmap`](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28int%5B%5D,%20int,%20int,%20float,%20float,%20int,%20int,%20boolean,%20android.graphics.Paint%29)它的一些重载很有用。

# c# - ASP.Net MVC：从视图调用方法

> ID：15398177
> 
> 赞同：62
> 
> 时间：2013-03-13T23:01:32.457
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在我的 MVC 应用程序中，控制器从外部 API 获取数据（模型）（因此没有使用模型类）并将其传递给视图。数据（模型）有一个容器，其中有几个对象和几个字段（字符串值）。一个视图遍历每个对象并调用另一个视图来绘制它们中的每一个。此视图遍历字段（字符串值）并绘制它们。

这对我来说很棘手。有时我想对字段（字符串值）进行一些特殊的格式化。我可以为格式编写 20 行代码，但是我必须为每个字段都这样做，这将是愚蠢的，哦，太丑陋了。相反，我想获取该字段（字符串值），将其传递给一个方法并返回另一个字符串值。然后对每个领域都这样做。

所以，这是我的问题：

**如何从视图调用方法？**

我意识到我可能在这里问错了问题。答案可能是我没有，我应该使用本地模型并将我从外部 API 获得的对象反序列化为本地模型，然后在我的本地模型中，在我通过之前执行“特殊格式”它的视图。但我希望有某种方法可以从视图中调用方法。主要是因为将我从 API 获得的自定义对象（又包含许多其他自定义对象）转换为我构建的本地自定义对象似乎需要很多开销。而且，我不确定最好的方法是什么。

免责声明：我知道类似的线程“ASP.NET MVC：从视图调用控制器方法”（[ASP.NET MVC：从视图调用控制器方法](https://stackoverflow.com/questions/2473025/asp-net-mvc-calling-a-controller-method-from-view)）但我不明白这如何回答我的问题。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-13T23:08:07.577

这是在 Controller 上调用实例方法的方式：

```
@{
  ((HomeController)this.ViewContext.Controller).Method1();
} 
```

这就是在任何类中调用静态方法的方式

```
@{
    SomeClass.Method();
} 
```

假设该方法是公共的并且对视图可见，这将起作用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-13T23:31:52.347

在 Amine 的答案的基础上，创建一个助手，如：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString CurrencyFormat(this HtmlHelper helper, string value)
    {
        var result = string.Format("{0:C2}", value);
        return new MvcHtmlString(result);
    }
} 
```

在您看来：使用`@Html.CurrencyFormat(model.value)`

如果您正在执行像[Standard Numeric Formats](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)这样的简单格式化，那么在您的视图中简单地使用[string.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)，就像上面的帮助器示例一样：

```
@string.Format("{0:C2}", model.value) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T23:10:14.427

您可以实现静态格式化方法或 HTML 助手，然后使用以下语法：

```
@using class_of_method_namespace
...
// HTML page here
@className.MethodName() 
```

或者在 HTML Helper 的情况下

```
@Html.MehtodName() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-19T04:32:00.553

不应该从视图中调用控制器。这就是 MVC 的全部理念——清晰的关注点分离。

如果您需要从 View 调用控制器 - 您做错了。重构的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-04T11:16:32.563

为什么你`Ajax`不习惯

它很简单，不需要`page refresh`并且有`success and error`回调

看看我的样品

```
<a id="ResendVerificationCode" >@Resource_en.ResendVerificationCode</a> 
```

在 JQuery 中

```
 $("#ResendVerificationCode").on("click", function() {
                getUserbyPhoneIfNotRegisterd($("#phone").val());
 }); 
```

这是我的ajax，它调用我的控制器和我的控制器并从数据库返回对象

```
function getUserbyPhoneIfNotRegisterd(userphone) {

              $.ajax({
                    type: "GET",
                    dataType: "Json",
                    url: '@Url.Action("GetUserByPhone", "User")' + '?phone=' + userphone,
                    async: false,
                    success: function(data) {
                        if (data == null || data.data == null) {
                            ErrorMessage("", "@Resource_en.YourPhoneDoesNotExistInOurDatabase");
                        } else {
                            user = data[Object.keys(data)[0]];
                                AddVereCode(user.ID);// anather Ajax call 
                                SuccessMessage("Done", "@Resource_en.VerificationCodeSentSuccessfully", "Done");
                        }
                    },
                    error: function() {
                        ErrorMessage("", '@Resource_en.ErrorOccourd');
                    }
                });
            } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T23:17:59.413

除了使用控制器调用之外，您应该创建自定义帮助程序以仅更改字符串格式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-03T13:12:41.950

我尝试了 lashrah 的答案，在稍微改变语法后它就起作用了。这对我有用：

```
@(
  ((HomeController)this.ViewContext.Controller).Method1();
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-26T18:56:34.500

您不应该从视图中调用控制器。

向视图模型添加一个属性，在控制器中设置它，然后在视图中使用它。

这是一个例子：

MyViewModel.cs：

```
public class MyViewModel
{   ...
    public bool ShowAdmin { get; set; }
} 
```

MyController.cs：

```
public ViewResult GetAdminMenu()
    {
        MyViewModelmodel = new MyViewModel();            

        model.ShowAdmin = userHasPermission("Admin"); 

        return View(model);
    } 
```

MyView.cshtml：

```
@model MyProj.ViewModels.MyViewModel

@if (@Model.ShowAdmin)
{
   <!-- admin links here-->
} 
```

..\Views\Shared\ _Layout.cshtml：

```
 @using MyProj.ViewModels.Common;
....
    <div>    
        @Html.Action("GetAdminMenu", "Layout")
    </div> 
```

# python - 在 python webapp2 中，如何将 __init__ 放入处理程序（用于获取和发布）

> ID：15398179
> 
> 赞同：9
> 
> 时间：2013-03-13T23:01:45.133
> 
> 标签：python, webapp2

如何创建初始化代码？当我把`__init__`constructor总是告诉我参数是错误的。另外请举一个例子也使用`__new__`和一个使用`super()`以及我们为什么要使用或不使用它们。

```
import webapp2

class MainHandler( webapp2.RequestHandler ):
    def __init__( self ):
        #initialization code/vars
        x = 1

    def get( self ):
        #code for get here
        self.response.write( x+1 )

    def post( self ):
        #code for post here
        self.response.write( x+2 ) 
```

app = webapp2.WSGIApplication ( [ ('/', MainHandler) ], debug=True )

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T21:00:36.627

终于明白了...问题是覆盖“webapp2.RequestHandler”需要特殊的特殊处理

来自 webapp2 手册：

如果要覆盖 webapp2.RequestHandler。**init** () 方法，必须在方法开头调用 webapp2.RequestHandler.initialize()。它将设置当前请求、响应和应用程序对象作为处理程序的属性。例子：

```
class MyHandler(webapp2.RequestHandler):
    def __init__(self, request, response):
    # Set self.request, self.response and self.app.
    self.initialize(request, response)
    # ... add your custom initializations here ...
    # ... 
```

...就是这样...现在按预期工作;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T23:07:03.307

如果您没有传递任何参数或在`__init__`方法中包含任何您自己的代码，那么通常甚至不需要创建一个。您只需使用`webapp2.RequestHandler`'`__init__`方法。

如果您*确实*需要制作一个，您仍然需要致电`webapp2.RequestHandler.__init__`：

```
class theHandler(webapp2.RequestHandler):
    def __init__(self, your_arg, *args, **kwargs):
        super(theHandler, self).__init__(*args, **kwargs)

        self.your_arg = your_arg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:03:53.583

您需要`self`在类中的所有函数中都有一个变量。您需要包含此变量才能使函数在您的类中工作。

`self`可以在[此处](https://stackoverflow.com/questions/2709821/python-self-explained)找到对类中每个函数中需要变量的一个很好的解释。

# javascript - 全局范围不起作用？

> ID：15398182
> 
> 赞同：1
> 
> 时间：2013-03-13T23:02:19.873
> 
> 标签：javascript, node.js

我目前正在尝试将特定文件夹中每个 JSON 文件的数据添加到字符串，然后将该字符串记录到控制台 - 但它不起作用。有没有人能够阐明我哪里出错了？

```
global.article = "";
for(i=0;i<posts.length;i++){
  fs.readFile('posts/' + posts[i], 'utf8', function(err, json){
    var post = JSON.parse(json);
    article += "<article>";
    article += "<blockquote>";
    article += "<h3>" + post.title + "</h3>";
    article += "<small>" + post.date + "</small>";
    article += post.content;
    article += "</blockquote>";
    article += "</article>";
  });
}
console.log(article); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:25:34.173

您应该为文章声明一个新变量，而不是“global.article”。

```
var article = ""; 
```

如果您在循环中完成构造字符串后需要更新 global.article，您可以在循环退出时重新分配给它。

```
global.article = article; 
```

如果出于某种原因您想直接更新 global.article，则可以改为更新 global.article，如此 JSFiddle 所示：

[http://jsfiddle.net/Lkpe4/](http://jsfiddle.net/Lkpe4/)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:33:38.930

`fs.readFile`是异步的，所以`console.log(article);`底部的将在您的任何`fs.readFile`回调之前运行，并使用填充的 JSON 处理`article`。

看看使用该[`async`](https://github.com/caolan/async)库提供异步流控制，但一个简单的解决方案说明了问题的本质是跟踪回调计数，并且仅`article`在它们全部完成后处理：

```
global.article = "";
var count = 0;
for(i=0;i<posts.length;i++){
    fs.readFile('posts/' + posts[i], 'utf8', function(err, json){
        var post = JSON.parse(json);
        article += "<article>";
        article += "<blockquote>";
        article += "<h3>" + post.title + "</h3>";
        article += "<small>" + post.date + "</small>";
        article += post.content;
        article += "</blockquote>";
        article += "</article>";
        if (++count === posts.length) {
            // All callbacks are now complete.
            console.log(article);
        }
   });
} 
```

# java - 着色器/矩阵问题 - 看不到对象

> ID：15398184
> 
> 赞同：6
> 
> 时间：2013-03-13T23:02:51.263
> 
> 标签：java, opengl, opengl-es, matrix, libgdx

我正在尝试在屏幕上放置一个立方体并点亮它。我想要立方体上的 phong 阴影。

当我运行我的代码时，我可以看到背景图像，但看不到立方体。

我相当确定立方体本身是正确的，因为我已经设法用纯色着色器显示它。

我已经设法编译着色器程序，但我根本看不到立方体。我不知道 GLES/LibGdx 是否有运行时异常机制，但我在日志中看不到任何内容。

我假设

*   模型不在视野范围内
*   模型被渲染为透明
*   两个都

我试图将我的代码削减到我*认为*问题所在的位置。如果您需要查看其他内容，请询问。

### 设置

```
shader = new ShaderProgram(
        Gdx.files.internal("shaders/phongVertexShader.glsl"),
        Gdx.files.internal("shaders/phongFragmentShader.glsl"));
if (!shader.isCompiled()) {
    throw new IllegalStateException(shader.getLog());
}
mesh = Shapes.genCube();
mesh.getVertexAttribute(Usage.Position).alias = "a_position";
mesh.getVertexAttribute(Usage.Normal).alias = "a_normal"; 
```

### 使成为

```
public void onRender() {
    Gdx.gl.glClearColor(0, 0, 0, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    batch.setProjectionMatrix(camera.combined);

    angle += Gdx.graphics.getDeltaTime() * 40.0f;
    float aspect = Gdx.graphics.getWidth()
            / (float) Gdx.graphics.getHeight();
    projection.setToProjection(1.0f, 20.0f, 60.0f, aspect);
    view.idt().trn(0, 0, -2.0f);
    model.setToRotation(axis, angle);
    combined.set(projection).mul(view).mul(model);

    Gdx.gl20.glViewport(0, 0, Gdx.graphics.getWidth(),
        Gdx.graphics.getHeight());

    shader.begin();

    float[] light = {10, 10, 10};

    shader.setUniformMatrix("mvpMatrix", combined);
    shader.setUniformMatrix("mvMatrix", new Matrix4().translate(0, 0, -10));
    shader.setUniform3fv("vLightPosition", light, 0, 3);

    mesh.render(shader, GL20.GL_TRIANGLES);
    shader.end();
} 
```

### 顶点着色器

```
#version 330
in vec4 vVertex;
in vec3 vNormal;
uniform mat4 mvpMatrix;  // mvp = ModelViewProjection
uniform mat4 mvMatrix; // mv = ModelView
uniform mat3 normalMatrix;
uniform vec3 vLightPosition;
smooth out vec3 vVaryingNormal;
smooth out vec3 vVaryingLightDir;

void main(void) {
    vVaryingNormal = normalMatrix * vNormal;
    vec4 vPosition4 = mvMatrix * vVertex;
    vec3 vPosition3 = vPosition4.xyz / vPosition4.w;
    vVaryingLightDir = normalize(vLightPosition - vPosition3);
    gl_Position = mvpMatrix * vVertex;
} 
```

### 片段着色器

```
#version 330
out vec4 vFragColor;
uniform vec4 ambientColor;
uniform vec4 diffuseColor;
uniform vec4 specularColor;
smooth in vec3 vVaryingNormal;
smooth in vec3 vVaryingLightDir;

void main(void) {
    float diff = max(0.0, dot(normalize(vVaryingNormal), normalize(vVaryingLightDir)));
    vFragColor = diff * diffuseColor;
    vFragColor += ambientColor;
    vec3 vReflection = normalize(reflect(-normalize(vVaryingLightDir),normalize(vVaryingNormal)));
    float spec = max(0.0, dot(normalize(vVaryingNormal), vReflection));

    if(diff != 0) {
        float fSpec = pow(spec, 32.0);
        vFragColor.rgb += vec3(fSpec, fSpec, fSpec);
    }
} 
```

* * *

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:17:10.577

要回答这个问题，需要大量的解释和代码。我将首先从代码开始：

LibGDX 代码：

```
public class Test extends Game {
    private final FPSLogger fpsLogger = new FPSLogger();
    private ShaderProgram shader;
    private Mesh mesh;
    Matrix4 projection = new Matrix4();
    Matrix4 view = new Matrix4();
    Matrix4 model = new Matrix4();
    Matrix4 combined = new Matrix4();
    Matrix4 modelView = new Matrix4();
    Matrix3 normalMatrix = new Matrix3();
    Vector3 axis = new Vector3(1, 0, 1).nor();
    float angle = 45;

    private static final float[] light = { 20, 20, 20 };

    private static final float[] amb = { 0.2f, 0.2f, 0.2f, 1.0f };
    private static final float[] dif = { 0.5f, 0.5f, 0.5f, 1.0f };
    private static final float[] spec = { 0.7f, 0.7f, 0.7f, 1.0f };

    public Test() {}

    @Override public void create() {
        this.mesh = Shapes.genCube();
        ShaderProgram.pedantic = false;
        final String location = "shaders/phong";
        this.shader = new ShaderProgram(Gdx.files.internal(location + ".vsh").readString(), Gdx.files.internal(location + ".fsh").readString());
        if (!this.shader.isCompiled()) {
            Gdx.app.log("Problem loading shader:", this.shader.getLog());
        }

        Gdx.gl20.glEnable(GL20.GL_DEPTH_TEST);
    }

    @Override public void render() {
        super.render();
        this.fpsLogger.log();

        this.angle += Gdx.graphics.getDeltaTime() * 40.0f;
        final float aspect = Gdx.graphics.getWidth() / (float) Gdx.graphics.getHeight();
        this.projection.setToProjection(1.0f, 20.0f, 60.0f, aspect);
        this.view.idt().trn(0, 0, -2.0f);
        this.model.setToRotation(this.axis, this.angle);
        this.combined.set(this.projection).mul(this.view).mul(this.model);
        this.modelView.set(this.view).mul(this.model);

        Gdx.gl20.glViewport(0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());
        Gdx.gl20.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);
        this.shader.begin();

        this.shader.setUniformMatrix("mvpMatrix", this.combined);
        this.shader.setUniformMatrix("mvMatrix", this.modelView);
        this.shader.setUniformMatrix("normalMatrix", this.normalMatrix.set(this.modelView).inv().transpose());
        this.shader.setUniform4fv("ambientColor", amb, 0, 4);
        this.shader.setUniform4fv("diffuseColor", dif, 0, 4);
        this.shader.setUniform4fv("specularColor", spec, 0, 4);
        this.shader.setUniform3fv("vLightPosition", light, 0, 3);

        this.mesh.render(this.shader, GL20.GL_TRIANGLES);

        this.shader.end();
    }

    @Override public void dispose() {
        if (this.mesh != null) {
            this.mesh.dispose();
        }
        if (this.shader != null) {
            this.shader.dispose();
        }
    }
} 
```

顶点着色器 (phong.vsh)

```
attribute vec3 a_position;
attribute vec3 a_normal;
uniform mat4 mvpMatrix;  // mvp = ModelViewProjection
uniform mat4 mvMatrix; // mv = ModelView
uniform mat3 normalMatrix;
uniform vec3 vLightPosition;

varying vec3 vVaryingNormal;
varying vec3 vVaryingLightDir;

void main(void) {
    vVaryingNormal = normalMatrix * a_normal;
    vec4 vPosValue = vec4(a_position.x, a_position.y, a_position.z, 1.0);
    vec4 vPosition4 = mvMatrix * vPosValue;
    vec3 vPosition3 = a_position;
    vVaryingLightDir = normalize(vLightPosition - vPosition3);
    gl_Position = mvpMatrix * vPosValue;
} 
```

片段着色器 (phong.fsh)

```
#ifdef GL_ES
precision mediump float;
#endif

uniform vec4 ambientColor;
uniform vec4 diffuseColor;
uniform vec4 specularColor;
varying vec3 vVaryingNormal;
varying vec3 vVaryingLightDir;

void main(void) {
    float diff = max(0.0, dot(normalize(vVaryingNormal), normalize(vVaryingLightDir)));
    vec4 color = diff * diffuseColor;
    color += ambientColor;
    vec3 vReflection = normalize(reflect(-normalize(vVaryingLightDir),normalize(vVaryingNormal)));
    float spec = max(0.0, dot(normalize(vVaryingNormal), vReflection));

    if(diff != 0) {
        float fSpec = pow(spec, 128.0);
        color.rgb += vec3(fSpec, fSpec, fSpec);
    }

    gl_FragColor = color;
} 
```

解释：

它看起来不是一个很好的 Phong 着色器，因为没有正确计算立方体的法线。您可以在 Shapes.genCube() 中找到它，但我将把它留给您解决，因为我已经提供了其他所有内容。

请务必查看着色器代码，这是 OpenGL ES 2.0 GLSL，与您发布的 OpenGL 3.3 GLSL 不同。这些是版本之间的一些差异。

您需要做的是确保您提供给着色器的值与着色器的变量相匹配。您还需要确保正确设置矩阵并为灯光提供正确的值，以便正确显示。

# android - 检索附加到 GooglePlay URL 的所有广告系列参数

> ID：15398189
> 
> 赞同：3
> 
> 时间：2013-03-13T23:03:21.870
> 
> 标签：android, google-analytics, google-play

我找到了这个脚本来测试收到的 Google 广告系列参数：

```
adb shell am broadcast -a com.android.vending.INSTALL_REFERRER -n com.accuweather.android/com.accuweather.android.services.GoogleCampaignTrackingReceiver --es "referrer" "utm_source=test_androidlite_source&utm_medium=test_medium&utm_term=test_term&utm_content=test_content&utm_campaign=test_name" 
```

[在这里找到](https://stackoverflow.com/a/6966718/371778)

以下是我出于测试目的接收它的方式：

```
public class GoogleCampaignTrackingReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle extras = intent.getExtras();
        String referrerString = extras.getString("referrer");

        Logger.i(this, "referrer string is %s", referrerString);
}
} 
```

我想知道如何获得所有参数，而不仅仅是第一个？这是日志语句：

```
03-13 18:40:41.990: I/GoogleCampaignTrackingReceiver(30212): referrer string is utm_source=test_androidlite_source 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T06:49:45.010

我面临同样的问题，花了几个小时来找到答案。就我而言，我发送广播

> ./adb shell am broadcast -a com.android.vending.INSTALL_REFERRER --es "referrer" "traffic=test1&md=1t1&utm_source=test1&utm_medium=android&utm_campaign=test12&utm_term=t3&utm_content=t5

并且只有第一个参数

解决方法很简单——你需要先进入 adb shell

> ./adb 外壳

然后发送你的广播

> shell@android:/ $ am 广播 -a com.android.vending.INSTALL_REFERRER --es "referrer" "traffic=test1&md=1t1&utm_source=test1&utm_medium=android&utm_campaign=test12&utm_term=t3&utm_content=t5

所有参数都将正确接收。我希望它会有用，因为我还没有找到这样的解释

# c# - 如何在 Android 设备上读取 DES 加密文件内容（使用 C# 创建）

> ID：15398193
> 
> 赞同：0
> 
> 时间：2013-03-13T23:03:49.903
> 
> 标签：c#, android, encryption, des

我们有一堆内容已经在桌面端使用 C# 进行了 DES 加密。我们想在 android 应用程序上解密它们。尝试了几乎所有编码，我们无法在 android 端获得准确的解密值。你能告诉我们android方面有什么问题吗？顺便说一句，我们知道 DES 不是加密的最佳解决方案。但是，内容是先前创建的，我们无法选择使用其他机制。

**这是用 C# 编写的加密代码。**

```
using (FileStream outputStream = new FileStream(strOutputFileName, FileMode.OpenOrCreate, FileAccess.ReadWrite))
{
    DESCryptoServiceProvider cryptic = new DESCryptoServiceProvider();
    cryptic.Key = ASCIIEncoding.ASCII.GetBytes(passKey);
    cryptic.IV = ASCIIEncoding.ASCII.GetBytes(passKey);
    CryptoStream crStream = new CryptoStream(outputStream, cryptic.CreateEncryptor(), CryptoStreamMode.Write);
    crStream.Write(fileBuffer, 0, fileBuffer.Length);
    crStream.Close();
} 
```

**这里是安卓端的解密部分**

```
String CIPHER_ALGORITHM = "DES/CFB8/NoPadding";
SecretKeySpec key5= new SecretKeySpec("passkey*".getBytes("UTF-8"), 
    CIPHER_ALGORITHM);

String ivString = "passkey*";
byte[] ivByte = ivString.getBytes("UTF-8");
IvParameterSpec iv5 = new IvParameterSpec(ivByte);  

Cipher c = Cipher.getInstance(CIPHER_ALGORITHM);
c.init(Cipher.DECRYPT_MODE, key5, iv5);

CipherInputStream cis = new CipherInputStream(
    new FileInputStream("/sdcard/test_folder/test.file"), c);

BufferedReader br = new BufferedReader(new InputStreamReader(cis));
Log.d("SONUC2", " " +br.readLine()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:06:00.533

“感谢您的帮助。将 CIPHER_ALGORITHM 更改为“DES/CBC/NoPadding 解决了我的问题。

# ruby-on-rails - rails 3.2 删除对象 url 顺序

> ID：15398195
> 
> 赞同：0
> 
> 时间：2013-03-13T23:03:51.333
> 
> 标签：ruby-on-rails, activerecord, rails-routing

当我在我的 index.html.erb 图像页面上调用我的删除操作时，它引用了正确的 id 等，但它没有正确地在 url 中对它们进行排序。url 应该看起来像`http://localhost:3000/admin/albums/33/images/1`，但它显示为`http://localhost:3000/admin/albums/33/images.1`。我知道它与 .:format 有关，但我不确定如何修复它。当我把它放在删除操作中时`admin_album_images_path([@album, image])`，它会导致`http://localhost:3000/admin/albums/33/1/images.`

**路线**

```
Admin::Application.routes.draw do
  get "albums/index"

  get "dashboard/index"

  namespace :admin do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
      resources :images
     end
    get "admin/album"
    end
    get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
    # resources :users
  resources :basic
    root :to => "basic#index" 
```

**控制器**

```
class Admin::ImagesController < ApplicationController
    def index
        @album = Album.find(params[:album_id])
        @image = @album.images(params[:id])
        @images = Image.all
    end
    def new
        @album = Album.find(params[:album_id])
        @image = @album.images.new
    end
    def create
        @album = Album.find(params[:album_id])
        @image = @album.images.build(params[:image])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, :albums]
        else
            render :action => 'new'
        end
    end
    def show
        @album = Album.find(params[:id])
        @image = @album.images(params[:id])
    end
    def destroy
        @album = Album.find(params[:album_id])
        @image = @album.images(params[:id])
        @image.destroy
        redirect_to admin_albums_path
    end

end 
```

**看法**

```
<% @images.each do |image|%>
    <%= image.title %> </br>
    <%= image.description %> </br>
    <%= image.image_name %> </br>
    <%= button_to "Delete", admin_album_images_path(@album, image), :method => :delete, :style => "display: block; float: left;" %>
    <%= debug @image %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:04:39.387

你应该使用

```
admin_album_image_path(@album, image) 
```

请注意，两者都是单数。您也可以将其更改为，`[:admin, @album, image]`这样您就不必担心路线的名称

默认情况下，附加参数将成为格式，因此

```
admin_album_image_path(@album, image, :csv) 
```

将转换为

```
/admin/albums/1/images/1.csv 
```

# php - php查询，价格根据一天中的时间变化

> ID：15398199
> 
> 赞同：0
> 
> 时间：2013-03-13T23:03:59.670
> 
> 标签：php

我有下表，其中包含来自 sql 查询的值： ![在此处输入图像描述](../Images/a2373f5450d277d62c6653256fdaaf52.png)

现在取决于一天中的时间，我希望能够更改值。例如，在下午晚些时候，我选择选项 3 dagen EUR 20.00。由于现在这一天已经快结束了，我应该为 1 dag（例如 4 欧元）支付较小的金额，然后为 2 dagen 支付 14.00 欧元的价格，因此在一天中的这个时间框 3 dagen 应该显示为 18.00 欧元

所以我知道如何获取当前时间，但是如何更改我的查询以反映这一点？这是我用来获取此表的查询：

```
<?php
        echo "<h2>".$lang['pagina3_dagen']."</h2>";

        $number=="0";
        echo "<table class='prijs'>";
        echo "<tr>";

            $query="SELECT * FROM $tabel WHERE fietstype='$fietskeuze'";
            $result=mysql_query($query) or die ("Ophalen prijzen mislukt: ".mysql_error());

            while ($row=mysql_fetch_array($result)) {
            $days=$row[days];
            $price=$row[price];

            if ($days=="1") $writeday=$lang['pagina3_1dag'];
            if ($days >="2") $writeday=$lang['pagina3_meerderedagen'];

            echo "<td class='prijs'><h2><a href='framemaat.php?lang=".$_SESSION['lang']."&naam=".$naam."&postcodehuisnummer=".$postcodehuisnummer."&fietskeuze=".$fietskeuze."&opties=".$opties."&optieid=".$optieid."&days=".$days."'>".$days." ".$writeday."<br>EUR ".$price."</a><br>";
            $number++;
            if ($number=="5") {echo "<tr>"; $number="0";}   
            } 
        echo "</tr>";
        echo "</table>"; 
?> 
```

我在想类似这样的伪代码：

```
$currenthour = date("H", time());
if (($currenthour >="13") && ($currenthour <"15"))
    {
    $pricedag1=($pricedag1-3eurodiscount);
    price in table result for 3 dagen=($pricedag1+$priceofdag2)
    } 
```

但是如何获得前一天的价格呢？那么来自查询的倒数第二个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T23:56:06.940

我不完全确定我了解您的表格的详细信息，但这里有一个镜头：

为什么没有一个单独的表格来保存您的产品（dagens？）的折扣？这样，您可以查询您的产品并将其加入折扣表。

```
// you can decide the data type
CREATE TABLE Discounts (discount_id, product_id, start, end, discount); 
```

然后你可以离开加入你的产品表

```
 SELECT p.*, d.discount 
      FROM products p
 LEFT JOIN discounts d ON d.product_id = p.product_id 
       AND start <= ? AND end >= ?; 
```

因此，在您收到结果集后，您可以检查折扣是否为空。如果不是，请应用必要的折扣。

```
if (!empty($row['discount']) {
   $price = $price - $row['discount'];
} 
```

当然，您可以更进一步，确定折扣类型 - 百分比折扣、美元折扣等。

# ios - touchesBegan 没有被 UIbutton 调用

> ID：15398200
> 
> 赞同：3
> 
> 时间：2013-03-13T23:04:01.207
> 
> 标签：ios, cocoa-touch, uibutton, touches

没有通过我的 UIButton 调用 touchBegan 方法。我希望 UIButton 和 touchesBegan 方法都可以共享触摸。那可能吗？现在，当我单击按钮时，仅调用了按钮方法，并且似乎“覆盖”了 touches 方法。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
 // not called over button
} 
```

您将如何启用这两种方法？

# replace - 逐字查找并用“\n”替换行尾

> ID：15398202
> 
> 赞同：10
> 
> 时间：2013-03-13T23:04:05.857
> 
> 标签：replace, notepad++, textpad

我希望使用一些文本编辑器来查找文档中的所有“行尾”，并将它们替换为仅写入的序列“\n”（以便于转换为另一种文件类型）。我一直在尝试使用 Notepad++ 和 textpad，但运气不佳。

例如，在 Notepad++ 上使用正则表达式模式时，我将在查找字段中输入 [Find: \n]（它将成功找到）并在替换字段中输入 [Replace: \Q\n\E]（\Q据我所知， \E 是逐字搜索修饰符），没有令人鼓舞的效果。

有没有简单的方法来完成这个替换？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T23:07:58.500

在 notepad++ 搜索和替换对话框 (Ctrl-H) 中，进入“扩展”模式。

从那里，替换`\r\n`应该`\\n`这样做 - 如果我正确理解你的问题。

例如，我输入...

```
something
something else
blah 
```

...然后用“全部替换”完成上述操作，这给我留下了：

```
something\nsomething else\nblah 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-10T20:20:31.920

我知道这是一个相当古老的问题，但如果其他人有兴趣，这是另一种更简单的方法来做同样的事情。

如果您进入 Notepad++ 并进入 Edit>EOL Conversion，如果允许您从当前 EOL 转换为 Unix 样式、Windows 样式或 Mac 样式。

*   Unix`\n`只是
*   窗户是`\r\n`
*   麦克`\r`只是

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-28T06:31:49.257

[![在此处输入图像描述](../Images/e787987befac341d8c22aa3de72c223f.png)](https://i.stack.imgur.com/1IHJy.jpg)

打开查找和替换 -> 查找“$”并替换为“任何字符”。在搜索模式中选择正则表达式。参考图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T07:03:17.080

试试 bluefish 编辑器[http://bluefish.openoffice.nl/index.html](http://bluefish.openoffice.nl/index.html) 只需复制粘贴，不用担心 \r 或 \n

# php - 将 PHP 数组解析为 JavaScript 数组

> ID：15398203
> 
> 赞同：0
> 
> 时间：2013-03-13T23:04:13.150
> 
> 标签：php, javascript, arrays

我正在尝试将 PHP 多维数组解析为 Javascript 数组。

到目前为止，我有：

```
<?php
 foreach ($array as $key => $userArray){

 echo "array[] = array['{$userArray['name']}', {$userArray['count']}, {$userArray['userId']}]; \n";
 }
?> 
```

from 和数组看起来像：

```
$array[] = array(
'name' => 'John Doe',
'userId' => '12',
'count' => '31'
); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:06:51.953

你为什么不直接使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php)？

```
<?php

  echo 'var array = ' . json_encode( $array );

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:10:45.530

你要`json_encode()`

```
<?php 
    $jsonArray = json_encode($array);
    echo $jsonArray; //outputs {"name": 'John Doe',"userId" : 12, "count" : 31}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:12:15.633

利用 json_encode 和 array_map 函数来做你需要的事情：

```
echo json_encode(array_map(function($user) 
  return array(
     'name' => $user['name'],
     'userId' => $user['userId'],
     'count' => $user['age']
),$userArray)); 
```

# d3.js - 使用 selection.datum 替换基准？它是如何工作的？

> ID：15398205
> 
> 赞同：0
> 
> 时间：2013-03-13T23:04:32.050
> 
> 标签：d3.js

我有一些 d3 代码可以选择并附加一个“网关”对象数组，如下所示：

```
var gwList = chart.selectAll('.gw')
             .data(gateways);

gwList
  .enter()
  .append('svg:g')
  .attr('class', 'gw')  // the CSS class to use. Change this!
  .append("svg:path")   // append a path only for each new object, with class 'line'
  .attr("class", "line")
  .attr("clip-path", "url(#clip)")
  .datum(function(d, i) {
      return {object: d, timeValues:null};
  }); 
```

注意 .datum() 调用。我希望条目选择元素用具有 2 个属性的对象替换它们的网关对象。

然后我做：

```
gwList
    .selectAll('path.line')
    .data(function(d) {
        // stuff
    }); 
```

我无法弄清楚的是，即使我对入口节点进行了“datum()”调用，较低的 .data() 函数中“d”的值始终是原始网关对象，而不是修改后的内部对象. 'this' 的值是路径元素的选择数组，它们确实具有正确的**数据**值。我如何检索它，为什么它不在 (d) 中？

```
d[0].__data__ // gives the right answer
d.data() is an error about object [object Array] has no method 'data'
d[0].data() Object #<SVGPathElement> has no method 'data' 
```

我试过找到一个 selection.datum 的例子，但还没有看到一个可以解释这一点的例子。有人可以告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:26:16.787

弄清楚了。而不是在selectAll（'path.line'）之后的部分中调用'data（）'，我需要调用'each'或'call'。正确地将子选择的数据传递给函数。

# c# - 在 C# 中存储和索引常量

> ID：15398215
> 
> 赞同：2
> 
> 时间：2013-03-13T23:05:58.837
> 
> 标签：c#, arrays, constants

我猜这是一个哲学问题。

我们正在启动一个视频游戏项目，并在进行过程中发现 C#。我们需要的第一件事是将常量存储在一堆数组中，以便任何人都可以轻松访问这些值，因此我们可以在定义新角色或武器类型时快速添加或修改值。

现在在 C++ 中，这就是我学会的方法：

*   在一些 constants.h 文件中声明一个枚举，其最后一个元素是 "WHATEVER_TYPE_END" ；
*   声明大小为“WHATEVER_TYPE_END”的常量数组，因为枚举和数组索引在 C++ 中运行良好；
*   在 constants.cpp 中用不同类型的各种值填充这些数组。

一个例子：

```
enum FoulType {
    FOUL_TYPE_NONE,
    FOUL_TYPE_OUT_OF_PLAY,
    FOUL_TYPE_OFFSIDE,
    FOUL_TYPE_VIOLENCE,
    FOUL_TYPE_RETENTION,
    FOUL_TYPE_END
};

extern const char* FoulTypeNames[FOUL_TYPE_END];

extern const float FoulSanctionChances[FOUL_TYPE_END];

extern const ushort FoulSanctionSeconds[FOUL_TYPE_END];

extern const uchar FoulSanctions[FOUL_TYPE_END]; 
```

它很简洁，因为它让程序员可以毫不费力地检索修饰符。如果我想计算我的角色会造成多少伤害，我会做类似的事情

```
CharacterType charType = myCharacter.getType();
WeaponType weapType = myCharacter.getWeapon().getType();
damage = CharacterDamages[ charType ] * WeaponModifiers[ weapType ]; 
```

现在在 C# 中，我一直在努力思考如何获得类似的结果。经过三个小时的游历，我终于有了一些功能性的东西，但它看起来有点骇人听闻。

我拥有的是一个静态类（名为常量），其中声明了公共枚举，并定义了大小为 (int)SomeEnum.END 的公共静态只读数组。声明如下所示：

```
public enum WeaponType
{
    Gun = 0,
    Shotgun,
    Assault,
    End
};

public static readonly int[] WeapDamage = new int[ (int)WeaponType.End]
{
    10,
    50,
    10
}; 
```

由于[CS0134](http://msdn.microsoft.com/en-us/library/ms228606.aspx) ，数组是只读的而不是 const 。枚举必须显式转换为 int，否则它可以正常工作。现在，我知道那些“常量”并不是真正的常量，这些数组的值可能会改变；对于这个问题，我找到了两种可能的解决方案：

*   保护数组，并使用 getter，如果有人真的需要整个东西而不仅仅是一个值，则返回数组的副本；
*   使用 ReadOnlyCollection

由于我偏向于我的旧 C++ 方式（它们本身可能不像我想象的那么干净），这些解决方案都没有吸引我（尤其是 ReadOnlyCollection，因为我（我猜主要是迷信... ）害怕时间和/或内存开销（我们正在处理实时多人游戏））。

大多数情况下，我想，我担心我所付出的努力只是为了用另一种语言实现我所知道的几乎像但不完全一样的东西，这只是我做事不正确的迹象。那么，对于比我有更多 C# 和/或视频游戏制作经验的人来说，在这里存储一堆常量的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:30:28.403

它真的必须是常数吗？我的意思是你可以把它包装在一个类中。我不喜欢使用大量依赖于其他常量的常量。您的代码不是很面向对象或可读性。当然，如果内存使用等是一个问题，也有例外。

但是做这样的事情的 C# 方式是做 OO。

```
public class Weapon {
  public string Name { get; private set; }
  public WeaponType Type { get; private set; }
}

public class WeaponType {
  public string Name { get; private set; }
  public int Damage { get; private set; }
} 
```

等等

然后有一个工厂方法在开始游戏时初始化你的武器/角色等。实际数据可以像文件一样存储在任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:09:43.743

我建议使用某种“数据存储”：数据库、文本文件、电子表格，无论您喜欢什么，都在启动时加载。这使得测试各种参数组合就像在数据库或文本文件等中编辑一行一样容易，无需重新编译。一旦游戏变得稳定，然后将这些作为资源存储在 EXE 中。

# javascript - 应用 JavaScript“计数器”对象

> ID：15398216
> 
> 赞同：1
> 
> 时间：2013-03-13T23:06:01.267
> 
> 标签：javascript, html, google-chrome, firefox, webkit

这个问题源自上一个问题。 [JavaScript“计数器”对象，它是什么？](https://stackoverflow.com/questions/15383846/javascript-counter-object-what-is-it/15384966?noredirect=1#comment21763396_15384966) @Gyum Fox 注意到 Webkit、Firefox 和 Chrome 在窗口中定义了一个名为“Counter”的全局变量。

经过大量研究和很少的信息，我被引导相信“计数器变量”是用于垃圾收集的；计算对任何给定数据的引用次数，并返回指向它仍然绑定的任何对象的准确指针。基于此链接。

[http://blog.peschla.net/doxygen/v8_chromium_r157275/v8-counters_8h.html](http://blog.peschla.net/doxygen/v8_chromium_r157275/v8-counters_8h.html)

我太绿了，无法完全理解。我的问题是，他们为什么选择公开这个全局“计数器”对象，这个对象比替代方法有什么好处？？？

# c# - ?= 运算符有哪些优点或缺点？

> ID：15398220
> 
> 赞同：3
> 
> 时间：2013-03-13T23:06:17.727
> 
> 标签：c#, language-features

我在想而不是

```
result = result ?? defaultValue; 
```

你可以写

```
result ?= defaultValue; 
```

我并不是说这是个好主意。
这个运营商有什么优势？
这个运营商会有什么劣势？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T23:15:12.670

我看到的最大潜在优势是它能够提供与其他复合运算符（如`+=`. 考虑以下

```
Method().Field = Method().Field ?? someValue; 
```

如果`Method()`价格昂贵或有副作用，则此语句将出现两次。为了防止这种情况发生，您需要将其分成两行

```
var temp = Method();
temp.Field = temp.Field ?? someValue; 
```

如果你被困在这个位置，这可能会有点乏味。如果`?=`同样保证`+=`左侧的副作用只发生一次，那么这条额外的行就没有必要了。

```
Method().Field += someValue; // Method() happens once
Method().Field ?= someValue; // Method() happens once 
```

恕我直言，这是`?=`通过简单的操作员提供的关键优势`??`。这将是有价值的，但我认为它不值得添加到语言中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T06:46:54.420

This has been suggested before, and I based my 2011 April Fool's Day blog post on taking this idea to the extreme:

[http://blogs.msdn.com/b/ericlippert/archive/2011/04/01/compound-assignment-part-two.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/04/01/compound-assignment-part-two.aspx)

Unlike all the other operators mentioned in that post, `??=` would actually be a little bit useful. It would not be useful enough to justify its "direct" costs -- designing and implementing and documenting and all that costs time and effort and money. And it certainly would not justify its "opportunity" costs -- the time, effort and money spent on doing a rather silly and not particularly useful operator could be spent on features that directly address real problems that developers actually have.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:11:57.853

我不认为这是值得的。通常，您几乎总是会执行以下操作：

```
result = someSourceValue ?? defaultValue; 
```

您的第二种形式是一种特殊情况，很少使用。

当从某个源（如 Web 服务）读取值并且您希望将缺失值强制为零或其他默认值时，null 合并运算符最有用。数据几乎总是来自某个地方，然后去另一个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:12:01.357

可能不是。我在 C# 中只使用过几次空合并运算符，但从来没有这样。C# 做事的方式是编写显式的空检查，而不是随意分配。（没有冒犯的意思）

我相信很多人都希望有这个运算符，但我认为这对语言没有任何好处。

这只是我的意见。

# android - 单选按钮 Android

> ID：15398221
> 
> 赞同：0
> 
> 时间：2013-03-13T23:06:21.827
> 
> 标签：android, radio-button

我创建了一个活动，在选择单选按钮的情况下，将信息发送到数据库。一切正常，没有错误，但是当我编译并单击按钮时，应用程序崩溃了。找不到问题。这是我的代码

```
public class Mlo extends Activity {
private RadioButton vincinq, cinq;
private EditText num;
private RadioGroup tupe;

HttpPost httppost;
StringBuffer buffer;
HttpClient httpclient ;
private void createDialog(String title, String text)
{
    // Création d'une popup affichant un message
    AlertDialog ad = new AlertDialog.Builder(this)
            .setPositiveButton("Ok", null).setTitle(title).setMessage(text)
            .create();
    ad.show();

}
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mlo);
    vincinq = (RadioButton) findViewById(R.id.conv1);
    cinq = (RadioButton) findViewById(R.id.conv2);
    Button button1 = (Button) findViewById(R.id.button1);
    tupe = (RadioGroup) findViewById(R.id.radioGroup1);
    // Définition du listener du bouton
    button1.setOnClickListener(new View.OnClickListener()
    {

        public void onClick(View v) {
            final String nb = num.getText().toString();

 if (vincinq.isChecked()) {
    final String type ="25";
        final String nbnum = num.getText().toString();
        try {
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://forma-fun.comli.com/cheq.php");
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
         postParameters.add(new BasicNameValuePair("numcompte", nbnum));
         postParameters.add(new BasicNameValuePair("type", type));

         httppost.setEntity(new UrlEncodedFormEntity(postParameters));                   
         HttpResponse response = httpclient.execute(httppost);
         Log.i("postData", response.getStatusLine().toString());

         createDialog("Merci ", "Votre demande a été effectuée");
         Intent i = new Intent(Mlo.this,VotreCompte.class);
         startActivity(i);
        }
             catch(Exception e)
             {
                 Log.e("log_tag", "Error:  "+e.toString());
             } 
 }
 else 
     if (cinq.isChecked()){ 
         final String type1 ="50";
            final String nbnum = num.getText().toString();
            try {
                httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://forma-fun.comli.com/cheq.php");
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
             postParameters.add(new BasicNameValuePair("numcompte", nbnum));
             postParameters.add(new BasicNameValuePair("type", type1));

             httppost.setEntity(new UrlEncodedFormEntity(postParameters));                   
             HttpResponse response = httpclient.execute(httppost);
             Log.i("postData", response.getStatusLine().toString());

             createDialog("Merci ", "Votre demande a été effectuée");
             Intent i = new Intent(Mlo.this,VotreCompte.class);
             startActivity(i);
            }
                 catch(Exception e)
                 {
                     Log.e("log_tag", "Error:  "+e.toString());
                 }
 }

        }

    });

  }
} 
```

日志猫

```
03-13 12:13:05.282: E/AndroidRuntime(363): FATAL EXCEPTION: main
03-13 12:13:05.282: E/AndroidRuntime(363): java.lang.NullPointerException
03-13 12:13:05.282: E/AndroidRuntime(363):  at    

com.example.attijaribank2.Mlo$1.onClick(Mlo.java:56)
03-13 12:13:05.282: E/AndroidRuntime(363):  at   
android.view.View.performClick(View.java:2485)
03-13 12:13:05.282: E/AndroidRuntime(363):  at   

android.view.View$PerformClick.run(View.java:9080)
03-13 12:13:05.282: E/AndroidRuntime(363):  at   

android.os.Handler.handleCallback(Handler.java:587)
03-13 12:13:05.282: E/AndroidRuntime(363):  at   
android.os.Handler.dispatchMessage(Handler.java:92)
03-13 12:13:05.282: E/AndroidRuntime(363):  at android.os.Looper.loop(Looper.java:130)

03-13 12:13:05.282: E/AndroidRuntime(363):  at    
android.app.ActivityThread.main(ActivityThread.java:3683)
03-13 12:13:05.282: E/AndroidRuntime(363):  at   
java.lang.reflect.Method.invokeNative(Native Method)
03-13 12:13:05.282: E/AndroidRuntime(363):  at  
java.lang.reflect.Method.invoke(Method.java:507)
03-13 12:13:05.282: E/AndroidRuntime(363):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-13 12:13:05.282: E/AndroidRuntime(363):  at  
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-13 12:13:05.282: E/AndroidRuntime(363):  at dalvik.system.NativeStart.main(Native  
Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:18:01.760

`num`每当您尝试引用它时，您忘记实例化抛出 NullPointerException ：

```
final String nb = num.getText().toString(); 
```

在`onCreate()`（或您尝试访问之前的任何时间`num`）您需要使用：

```
num = (EditText) findViewById(R.id.xxx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:40:43.110

您不应该在主线程上进行任何网络通信。您必须实现异步调用。要实现这样的异步调用，您必须扩展 AsyncTask 类。也许你可以从这样的事情开始：

```
private class HttpTask extends AsyncTask<String, Void, String> {
    private ArrayList<NameValuePair> params;

    public void setParams(ArrayList<NameValuePair> params){
        this.params = params;
    }
    protected String doInBackground(String... urls) {
        int count = requestStrings.length;
        String result = "";
        for (String url : urls) {
            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://forma-fun.comli.com/cheq.php");
            httppost.setEntity(new UrlEncodedFormEntity(params));                   
            HttpResponse response = httpclient.execute(httppost);

            Log.i("postData", response.getStatusLine().toString());

            InputStream content = response.getEntity().getContent();
            BufferedReader buffer = new BufferedReader(
                new InputStreamReader(content));
            String s = "";
            while ((s = buffer.readLine()) != null) {
                result += s;
            }
        }
        return result;
    }

    protected void onProgressUpdate(Integer... progress) {
// TODO You are on the GUI thread, and the first element in 
// the progress parameter contains the last progress
// published from doInBackground, so update your GUI
    }

    protected void onPostExecute(int result) {
// Processing is complete, result contains the result string 
    }
} 
```

然后你可以像这样修改你的 onClick 监听器：

```
// Définition du listener du bouton
button1.setOnClickListener(new View.OnClickListener()
{

    public void onClick(View v) {
        final String nb = num.getText().toString();

        if (vincinq.isChecked()) {
            final String type ="25";
            final String nbnum = num.getText().toString();
            try {
                HttpTask task = new HttpTask();
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("numcompte", nbnum));
                postParameters.add(new BasicNameValuePair("type", type1));
                task.setParams(postParameters);
                task.execute("http://forma-fun.comli.com/cheq.php");

                createDialog("Merci ", "Votre demande a été effectuée");
                Intent i = new Intent(Mlo.this,VotreCompte.class);
                startActivity(i);
            }
            catch(Exception e)
            {
                Log.e("log_tag", "Error:  "+e.toString());
            } 
        }
    }
} 
```

# github - 是否有适用于 Linux 操作系统的 GitHub GUI 客户端？

> ID：15398229
> 
> 赞同：68
> 
> 时间：2013-03-13T23:06:54.737
> 
> 标签：github

有没有类似于[GitHub for Windows](http://windows.github.com/)或[GitHub for Mac](http://mac.github.com/) for Linux 系统的东西？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T23:09:58.273

试试[SmartGitHg](https://www.syntevo.com/smartgit/download/)。它是一个支持 Windows 和 Linux 的 Git GUI。并且对 GitHub 的支持非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:36:18.067

我假设[git-cola 可以满足](http://git-cola.github.com/downloads.html)您的需求。它不是专门针对 GitHub 的，但它通常允许使用 Git 及其存储库。它是基于[Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)的，应该可以在任何 Linux 桌面上运行。

# javascript - 如何将数据传递到jquery done()？

> ID：15398230
> 
> 赞同：1
> 
> 时间：2013-03-13T23:06:56.607
> 
> 标签：javascript, jquery, ajax

我有一个显示多条记录的页面，我正在尝试编写一个单击处理程序来处理通过 ajax 帖子提交对单个记录的更改。我正在使用 done()、fail() 和 always() 来管理结果。

当 ajax 调用返回时，我想对提交的记录进行一些更新——例如，放置一条保存的消息，重新启用该记录的提交按钮等——但除非我知道提交的特定记录的 ID。

我想做的是将目标记录的 ID 传递到 done() 中，以便 done() 中的代码可以对最初调用它的记录进行必要的更改。

这是我的代码，它显示了我在做什么，但它不起作用，因为变量`target_id`在这些函数中没有值。如何将该变量传递给这些函数？

```
$("#container").on("click", ".save-button", function(e) {

  if ($(this).hasClass('disabled')) {return;}

  var button_html = $(this).html();
  $(this).html('Please wait...');
  $(this).addClass('disabled');

  var target_id = $(this).parents(".record-form").find("#record-id").val();

  var form_poster = $.post("user_form_submit.php", target_form.serialize());

  form_poster.done(function(response_object) {

    var result = response_object['result'];

    if (result=='success') {
      var alert_area = $("#" + target_id + " .alert-area").html("Record Updated");
    } else {
      var alert_area = $("#" + target_id + " .alert-area").html("Record Not Found");
    }

  });

  form_poster.fail(function() {
    var alert_area = $("#" + target_id + " .alert-area").html("An Error Occurred");
  });

  form_poster.always(function() {
    $("#" + target_id + " .save-button").removeClass('disabled');
    $("#" + target_id + " .save-button").html(button_html);
  });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:13:27.500

这应该可行，我认为问题出在您的`id`属性上，它们必须是唯一的。这整行：

```
var target_id = $(this).parents(".record-form").find("#record-id").val(); 
```

可能只是：

```
var target_id = $("#record-id").val(); 
```

但我的猜测是你有几个带有 id 的元素`record-id`，你应该使用一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:27:41.783

这是您的代码的简化版本。你做了太多无用的样板。

```
$("#container").on("click", ".save-button", function(e) {
  var $saveButton = $(this),
      $recordForm = $saveButton.closest(".record-form"),
      $alertArea = $recordForm.find(".alert-area");

  $saveButton.addClass('disabled').html('Please wait...');

  e.preventDefault();

  $.post("user_form_submit.php", $recordForm.serialize())
  .done(function(response_object) {
    var result = response_object['result'];
    if (result == "success") {
      $alertArea.html("Record Updated");
    } else {
      $alertArea.html("Record Not Found");
    }
  })
  .fail(function() {
    $alertArea.html("An Error Occurred");
  })
  .always(function() {
    $saveButon.removeClass('disabled').html(button_html);
  });
}); 
```

注意

*   您设置的变量保存在闭包中，因此您的回调函数可以访问它们（比较`$alertArea`and的使用`$saveButon`）。首先，您不需要“传递任何东西”。
*   `.record-id`现在是 CSS 类，文档中不能有多个具有相同 HMTL ID 的元素
*   无论如何，您都不需要从 ID 构建选择器，总有可以使用的结构上下文（通过`closest()`和`find()`）。
*   使用`preventDefault()`这样表单就不会意外提交两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:16:58.637

这是在黑暗中拍摄，因为我无法测试

只需将变量设置`var context`为`this`

```
$("#container").on("click", ".save-button", function(e) {
  var context = this;

  if ($(this).hasClass('disabled')) {return;}

  this.button_html = $(this).html();
  $(this).html('Please wait...');
  $(this).addClass('disabled');

  this.target_id = $("#record-id").val();

  this.form_poster = $.post("user_form_submit.php", target_form.serialize());

  this.form_poster.done(function(response_object) {

    var result = response_object['result'];

    if (result=='success') {
      var alert_area = $("#" + context.target_id + " .alert-area").html("Record Updated");
    } else {
      var alert_area = $("#" + context.target_id + " .alert-area").html("Record Not Found");
    }

  });

  this.form_poster.fail(function() {
    var alert_area = $("#" + context.target_id + " .alert-area").html("An Error Occurred");
  });

  this.form_poster.always(function() {
    $("#" + context.target_id + " .save-button").removeClass('disabled');
    $("#" + context.target_id + " .save-button").html(button_html);
  }); 
```

这是一个概念证明：[jsFiddle](http://jsfiddle.net/68a8K/)

此方法可能更快，因为您只需调用 jQuery 一次即可获取`target_id`

# ruby-on-rails - 在rails中验证重置密码

> ID：15398234
> 
> 赞同：2
> 
> 时间：2013-03-13T23:07:32.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication

我试图确保用户在重置时的新密码不等于当前密码，但我在这里遇到了一个小问题。
在将确认链接发送到电子邮件 bla bla 后，我让重置表单向此方法发送发布请求

```
def password_reset
        @user = UserVerificationToken.token_valid(params[:format])
        new_pass = params[:user][:password]
        if User.unique_reset_password(new_pass)
            redirect_to recover_password_path :notice => "You need to choose a different password"
        elsif @user.update_attributes(password: new_pass)
            redirect_to root_url, :notice => "Password has been reset"
        else
            redirect_to recover_password_path
        end

    end 
```

在用户模型中我有这个方法。

```
def self.unique_reset_password(new_pass)
    return true unless :password == new_pass
end 
```

在试图弄清楚为什么这不起作用 10 分钟后，我打了自己一巴掌。呃，new_pass 还没有散列。
我的问题是，我该怎么做，我在正确的道路上吗？在将 new_pass 与当前散列通行证进行比较之前，是否有散列它的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:14:06.553

`authenticate`通过方法尝试：

```
@user = UserVerificationToken.token_valid(params[:format])
new_pass = params[:user][:password]
if @user.authenticate(new_pass)
    #no good, same as old
    else
    #continue
end 
```

登录时使用的方法（不是 100% 确定，但它用于我通过 RoR Twitter 教程构建的应用程序）

# objective-c - 在mac中检测硬件耳机按压

> ID：15398237
> 
> 赞同：16
> 
> 时间：2013-03-13T23:07:39.587
> 
> 标签：objective-c, cocoa, osx-mountain-lion

这个问题是关于这个问题的代码：[Detect headphone button presses in OS X](https://stackoverflow.com/questions/7772976/detect-headphone-button-presses-in-os-x)

他们的答案被标记为正确，但是我无法让他们的代码正常工作（这可能是因为我对 Objective-c 缺乏了解）。我按照他们的指示，修改了三个文件。这是我尝试过的（我还查看了 Apple 的 IOKit 文档，但找不到任何耳机硬件按钮文档）：

真棒类.h

```
#import <Cocoa/Cocoa.h>
#include "KeyboardPaneController.h"

@interface AwesomeClass : KeyboardPaneController
+ (NSArray *) allKeyboards;
- (void) initKeyboardElements: (NSArray *) elements;
- (void) ddhidQueueHasEvents: (DDHidQueue *) hidQueue;
@end 
```

真棒类.m

```
#import "AwesomeClass.h"
#import "DDHidLib.h"

@implementation AwesomeClass

+ (NSArray *) allKeyboards;
{
    NSArray *array = [DDHidDevice allDevicesMatchingUsagePage: kHIDPage_Consumer
                                                      usageId: kHIDUsage_GD_Pointer
                                                    withClass: self
                                            skipZeroLocations: NO];

    //Only return "Apple Mikey HID Driver", if not found, return nil.
    for (DDHidDevice *device in array) {
        if ([[device productName] isEqualToString:@"Apple Mikey HID Driver"]) {
            return [NSArray arrayWithObject:device];
        }
    }
    return nil;
}

- (void) initKeyboardElements: (NSArray *) elements;
{
    NSEnumerator * e = [elements objectEnumerator];
    DDHidElement * element;
    while (element = [e nextObject])
    {
        unsigned usagePage = [[element usage] usagePage];
        unsigned usageId = [[element usage] usageId];
        if (usagePage == kHIDPage_GenericDesktop)
        {
            if ((usageId >= 0x89) && (usageId <= 0x8D))
            {
                [mKeyElements addObject: element];
            }
        }
        NSArray * subElements = [element elements];
        if (subElements != nil)
            [self initKeyboardElements: subElements];
    }
}

- (void) ddhidQueueHasEvents: (DDHidQueue *) hidQueue;
{
    DDHidEvent * event;
    while ((event = [hidQueue nextEvent]))
    {
        DDHidElement * element = [self elementForCookie: [event elementCookie]];
        unsigned usageId = [[element usage] usageId];
        SInt32 value = [event value];
        if (value == 1)
            [self ddhidKeyboard: self keyDown: usageId];
    }
}
@end 
```

...以及修改 KeyboardPaneController.m 中的一行（如说明中所示）。由于缺乏关于框架的文档，真的很难找到答案（发帖人已经下线一年多了，所以我假设我可能不会得到回复）。该代码在狮子上进行了测试，我有山狮，所以这可能是问题所在。

我知道这绝对可以实现，因为 iTunes 对我的耳机按键反应非常敏感（这有点细微差别）。我希望能够使用耳机上的按钮而不是 iTunes 来控制 Spotify。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T11:21:12.027

测试表明它不再作为键盘实现：

```
 id array = [[DDHidDevice allDevices] filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"productName == \"Apple Mikey HID Driver\""]];
    DDHidDevice *mic = [array count] ? [array objectAtIndex:0] : nil;
    // it isn't a keyboard
    NSLog(@"%@", mic.primaryUsage);
    assert(mic.usage==1 && mic.usagePage==12); 
```

您也不能将其视为 HIDKeyboard（尝试过，它不会发送按键），也不能将其视为 HIDMouse 或 HID 操纵杆。

我深入研究了 HIDQueue 类并检查了 mikey 是否触发了任何低级别事件并且它确实触发了低级别事件！`queueCallbackFunction`按下时调用（如果您不过滤特定事件的队列。要过滤它，请参阅DDHidKeyboard `initWithKeyboardEvents`。

现在您所要做的就是将低级别事件映射到正确的按钮，然后您就完成了。也许也可以将它们全部包装在一个不错的类中。[这是GitHub 上](https://github.com/Daij-Djan/DDHidLib)的类示例和相关代码。

# google-chrome-extension - 如何关闭 chrome.extension.Port？

> ID：15398239
> 
> 赞同：3
> 
> 时间：2013-03-13T23:07:41.207
> 
> 标签：google-chrome-extension

在从背景页面转换为[事件页面](http://developer.chrome.com/extensions/event_pages.html)的清单中，[#9](http://developer.chrome.com/extensions/event_pages.html#transition)说：

> 如果您使用[消息传递](http://developer.chrome.com/extensions/messaging.html#connect)，请务必关闭未使用的消息端口。在关闭所有消息端口之前，事件页面不会关闭。

[`chrome.extension.Port`](https://developer.chrome.com/extensions/extension.html#type-Port)封闭式是怎样的？

# sql - 有没有办法禁用 SSIS 包来读取源数据类型？

> ID：15398241
> 
> 赞同：0
> 
> 时间：2013-03-13T23:07:44.630
> 
> 标签：sql, tsql, ssis

我正在尝试将 Excel 文件加载到 SQL 中。问题在于转换。

我不想处理转换。我想简单地将所有列视为字符串，因为它们将作为字符串转储到 SQL 表中。

在不必处理所有转换问题的情况下，将其放入 SQL 表的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:10:19.820

正如[Excel Source 的 MSDN 条目所](http://msdn.microsoft.com/en-us/library/ms141683.aspx)警告的那样：

> Excel 驱动程序读取指定源中的一定数量的行（默认为 8 行）来猜测每列的数据类型。当一列似乎包含混合数据类型，尤其是数字数据与文本数据混合时，驱动程序决定支持多数数据类型，并为包含其他类型数据的单元格返回空值。（在平局中，数字类型获胜。）

添加`IMEX=1`到连接字符串会使 Excel 源处于“导入模式”；前几行中具有混合数据类型的列将被视为文本数据。但是，没有任何方法可以关闭 Excel 源代码的类型猜测“功能”。如果前几行都包含数字，则源**会将**列视为数字并适当地强制转换。

如果您可以说服提供此文件的任何人以 .CSV 格式将其发送给您，则可以使用常规平面文件源来加载它。或者，您可以将脚本组件配置为源并使用 Excel 对象模型循环遍历电子表格并输出行——但这并不符合“简单”的条件，除非您**真的**知道自己在做什么。

# arraylist - ArrayList 更新值

> ID：15398242
> 
> 赞同：1
> 
> 时间：2013-03-13T23:07:46.990
> 
> 标签：arraylist, compare, compare-and-swap

我在更改 ArrayList 中特定位置的值时遇到问题。更清楚地说，情况如下：

我想在一个列表中添加产品 ID，并在另一个列表中添加它们的计数。但是，如果用户选择了已经在 productList 中的产品，我想在 countList 更新中使用新选择的计数器进行计数。

这是代码：

```
public void compareArrays(){
    if(Variables.productsList.size()==0){
        Variables.productsList.add(product.id);
        Variables.countList.add(count.toString());
    }
    for(int index=0; index<Variables.productsList.size(); index++){
        if(Variables.productsList.get(index).equals(product.id)){

            Integer a = Integer.parseInt(Variables.countList.get(index))+count;
            Variables.countList.set(index, a.toString());

        }

    }
        Variables.productsList.add(product.id);
        Variables.countList.add(count.toString());
} 
```

问题是它没有进入 for 循环，没有进行检查。只需将项目放入列表中。请帮忙。先谢谢了！！！

# drag-and-drop - Z-ordering 对 QtQuick 2.0 中的拖放操作没有影响

> ID：15398248
> 
> 赞同：1
> 
> 时间：2013-03-13T23:08:06.810
> 
> 标签：drag-and-drop, z-order, qtquick2

我在 qt-quick 2.0 中遇到了一个有趣的 z 顺序问题。我有一个由 64 个项目（棋盘）组成的 8x8 网格，每个方块都是一个拖动目标。这些片段是动态创建的。我想出了如何在方块之间拖放碎片；但是，如果在第 9 格（第 1 行，第 1 列）上创建了一块，则在拖动它时，它将出现在/后面/第 10-63 格。改变“z”的值没有区别。我已将所有部分的“z”设置为 1000，并将“z: 0”放在所有其他可以具有 z 值的小部件中，没有区别。

// 找到了一个无原则的解决方法 //

qt-quick 2.0 中似乎没有绝对的 z 排序。（我觉得很难相信，但找不到这样的。）这是一个 hackish 解决方法。

拖动棋子的 z 顺序（似乎？）相对于棋子所在的正方形。因此，当棋子的正方形具有最高的 z 顺序时，棋子正确拖动（即，在棋盘上方的 z 轴）。所以我在广场上创建了一个 MouseArea，其中包含在拖动操作开始之前调整 z 顺序的 Entered 和 Exited 事件：

```
DropArea
{
    id: square

    // ...

    Rectangle {
        id: rect
        anchors { fill: parent }
        color: isLightSquare() ? light_square_color : dark_square_color

        MouseArea {
            anchors.fill: parent
            hoverEnabled: true
            onEntered: square.z = 2
            onExited: square.z = 1
        }
    }
} 
```

# php - 希腊字符编码在 HTML 中有效，但在 PHP 中无效

> ID：15398251
> 
> 赞同：2
> 
> 时间：2013-03-13T23:08:15.217
> 
> 标签：php, html, mysql, encoding, utf-8

我有一个非常奇怪的问题，无法弄清楚。我正在使用记事本++，如果我将文件保存为带有希腊字符（不是来自数据库的字符）的 .php，它会在 Web 浏览器中将希腊字符显示为问号，但如果我将相同的字符文件保存为 .html，它会正确显示字符。

如果从数据库中显示希腊字符，它会正确显示它们而不会出现问题。它在我的共享主机上也不能正常工作，但在我的本地主机上工作正常。

我试图以不同的编码保存 .php 文件，但仍然是同样的问题。我还尝试使用 utf-8 添加 php header() 和元标记，但没有运气。

可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T16:11:17.800

尽管您的 mysql 数据正确输出而 php 字符串在编码时失败，这听起来真的很奇怪，但我尝试解决您的问题的方法是将问题分解为尝试识别错误编码的生成位置的步骤！

首先，您应该尝试在 php.ini 文件中设置您的`default_charset`to `utf-8`，如下所示：

```
default_charset = "utf-8"; 
```

如果由于提供者限制而无法这样做，您仍然可以使用[ini_set](http://php.net/manual/en/function.ini-set.php)函数在运行时更改值！

您还需要确保网络服务器也设置为输出 utf-8 编码文件！在 Apache 中，这可以在 httpd.conf 或使用 htaccess 文件中完成：

```
AddDefaultCharset UTF-8 
```

此时如果一切都失败了，仍然......尝试使用 php 标头和相关 html 字符集：

```
<?php header("content-type: text/html;charset=utf-8") ?>
<!doctype>
<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <?php echo "α β γ δ ε ϝ ϛ ζ η θ ι κ λ μ ν ξ ο π ϟ ϙ ρ σ τ υ φ χ ψ ω ϡ" ?>
    </body>
</html> 
```

非常重要的是，您的文件也使用适当的编码保存（utf-8 几乎总是更好的选择，它有助于防止很多问题）。如果您使用不同于 utf-8 的编码保存文件，请销毁它们并从旧内容中创建新文件。有时编辑器在创建文件后并不能真正正确地切换编码，尽管 notepad++ 通常在这方面做得很好；只是`converto to`不使用该`encode in`功能！

如果它仍然不工作，虽然我希望它现在可以工作，你可以检查一些其他的 php 替代品，如[mb_detect_encoding](http://www.php.net/manual/en/function.mb-detect-encoding.php)、[mb_convert_encoding](http://php.net/manual/en/function.mb-convert-encoding.php)、[htmlentities](http://php.net/manual/en/function.htmlentities.php)和[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php)以解决问题！

# javascript - Angular 自定义表单验证和指令

> ID：15398259
> 
> 赞同：2
> 
> 时间：2013-03-13T23:08:46.970
> 
> 标签：javascript, forms, validation, angularjs, customvalidator

我有一个自定义验证指令，我将其归因于表单

```
<form myValidations>

app.directive('myValidations', function(){
return{
    //require: 'ngModel', note its commented out

    link: function(s,e,a,ctrl){//note the emphasis on the ctrl

    }
}
}); 
```

现在，如果我没有'require：ngModel'来为我做这件事，我将如何掌握这个 ctrl.$parsers。

我可以找到一个元素，然后在某个函数中调用它的 ng-model 以返回一个 ng-model-controller 吗？这样我就可以从那里#$parsers？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:50:19.540

回答你的问题，你可以打电话`angular.element('elementSelector').controller('ngModel')`。它将以与 a 相同的方式返回 ngModel `require`。

问题是：**如果你正在创建一个新指令，为什么不使用它的 require 特性呢？**您很有可能没有为您的问题使用正确的解决方案。因此，更多的代码将使我们有机会进一步启发您的问题。

# java - 泽西没有发布 json

> ID：15398260
> 
> 赞同：0
> 
> 时间：2013-03-13T23:08:51.800
> 
> 标签：java, json, web-services, jersey

我正在尝试使用球衣将 json 发布到远程 php 应用程序。php 应用程序似乎没有收到该帖子。当我查看标题时，它似乎在那里。有人会碰巧知道我可能做错了什么吗？

Java 泽西代码

```
 String url = "http://support.mydomain.co/remoteapi/mydomain/index.php";

    WebResource webResource = client.resource(url);
    webResource.queryParam("action", Constant.CREATE_TICKET.name());

    Company company = companyDAO.findCompanyById(1);

    client.addFilter(new LoggingFilter(System.out));

    ClientResponse response = webResource.accept("application/json")
            .entity(company, MediaType.APPLICATION_JSON)
            .post(ClientResponse.class);

    if (response.getStatus() != 200) {
        throw new RuntimeException("Failed : HTTP error code : "
                + response.getStatus());
    }

    String output = response.getEntity(String.class); 
```

标题

```
1 * Client out-bound request
1 > POST http://support.mydomain.co/remoteapi/mydomain/index.php?action=CREATE_TICKET
1 > Accept: application/json
1 > Content-Type: application/json
{"name":"Test Company","phones":[],"street1":null,"street2":null,"city":null,"stateName":{"name":"Florida"},"companyCategory":{"name":"hotel"},"zip":"12095","accountNumber":"00000002"}
1 * Client in-bound response
1 < 200
1 < Date: Wed, 13 Mar 2013 22:51:06 GMT
1 < Transfer-Encoding: chunked
1 < Keep-Alive: timeout=5, max=100
1 < Connection: Keep-Alive
1 < Content-Type: application/json
1 < Server: Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/0.9.8e-fips-rhel5 mod_mono/2.6.3 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635
1 < X-Powered-By: PHP/5.3.17
1 < 
```

PHP

```
print_r($_REQUEST); 
```

# extjs - EXTJS：在网格单元格上显示自定义工具提示

> ID：15398264
> 
> 赞同：1
> 
> 时间：2013-03-13T23:08:58.563
> 
> 标签：extjs, menu, tooltip

当鼠标悬停在网格单元上时，如何在网格单元上显示自定义工具提示（如菜单）？它必须是动态的，因为每个单元格在工具提示中可以有不同的菜单项。我需要知道要监听的事件以及如何使用自定义菜单而不是典型的文本字符串或基于 HTML 模板的工具提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T10:07:55.853

以下代码为每个网格行提供了一个提示对象以及关联的记录。

```
listeners: {
      render: function(grid) {
            grid.view.tip = Ext.create('Ext.tip.ToolTip', {
            target: grid.getEl(),
            // Each grid row causes its own seperate show and hide.
            delegate: ".x-grid-cell-last",
            items: [], // add items later based on the record
            // Render immediately so that tip.body can be referenced prior to the first show.
            listeners: {
                // Change content dynamically depending on which element triggered the show.
                beforeshow: function updateTipBody(tip) {
                        var rec = grid.view.getRecord(Ext.get(tip.triggerElement).findParentNode('.x-grid-row'));                        
                        grid.fireEvent('rowhover', tip, rec);
                        return true;
                }}
        });
     }} 
```

然后在您的控制器类中，您可以监听悬停事件并将您喜欢的任何内容添加到提示容器中。在您的情况下，您可以从传递的记录中配置自定义菜单`rec`并将其添加到提示中。`rowhover`在事件上调用此函数：

```
function onHover(tip, rec) {
    var me = this,
    tip.removeAll(true) // autodestroy
    tip.add(Ext.create('Ext.menu.Menu',{
        items:[/* your config here */]              
       );
} 
```

我想您也可以直接在网格的侦听器中配置菜单对象，而不是提示对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:49:14.943

获取要在其中添加工具提示的网格。

```
var grid = Ext.componentQuery.query('grid[itemId=name_of_grid]')[0]; 
```

在创建工具提示时，传递类名和要在其中显示工具提示的目标。

```
grid.tip = Ext.Create('Ext.tip.Tooltip',{
title : 'title',
itemId : 'itemId',
target : grid.el,
delegate : 'x-grid-cell' // the cell class in which the tooltip has to be triggered
trackMouse : true,
renderTo : Ext.getBody()}); 
```

现在创建一个处理工具提示渲染的函数

```
var tipRenderer = function (e, t, grid){
e.stopEvent();
var tipbody = '<h5> helo </h5>';
grid.tip.update(tipbody);
grid.tip.show();
}); 
```

现在，在鼠标悬停事件上提出提示。

```
grid.getEl().on('mouseover', function(e,t,a){
    tipRenderer(e,t,grid);
}, null, {delegate:targetClass}); 
```

**注意**：所有这些代码都必须在网格渲染后执行。

* * *

沙克蒂

# java - 在两个不同的类上运行同一组测试的最佳解决方案

> ID：15398273
> 
> 赞同：1
> 
> 时间：2013-03-13T23:10:14.850
> 
> 标签：java, junit

我有两个类是同一接口的不同实现。还有一组相当大且复杂的单元测试来测试实现的正确性。

我正在寻找针对两个或更多类运行同一组测试的最佳方法。不幸的是，由于外部限制，我仅限于使用 JUnit4。所以花哨的新奇测试框架对我不起作用。

您能否建议您最喜欢的方法，而不是盲目地将测试复制到单独的文件中并导致保持两个文件同步的维护头痛。

*澄清*：两个类必须保持完全独立，目标是测试两个类对于完全相同的输入是否产生完全相同的输出。这些类被写入公共接口。所以问题是如何针对同一接口的两个不同实现运行相同的测试用例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:16:22.933

这个怎么样：

```
public abstract class TestBase {
    private TheInterface unitToTest;

    protected abstract TheInterface getInterfaceImplementation();

    @Before
    public void setImplementation() {
         unitToTest = getInterfaceImplementation();
    }

    @Test
    public void test1 {
         //excercise and assert unitToTest
    }
}

public class ImplementationOneTest extends TestBase {
    protected TheInterface getInterfaceImplementation() {
        return new ImplementationOne();
    }
}

public class ImplementationTwoTest extends TestBase {
    protected TheInterface getInterfaceImplementation() {
        return new ImplementationTwo();
    }
}

etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:13:21.503

您可以使用接收您的接口（和内部的测试方法）的构造函数创建基本测试类。并将一些接口实现传递给具体类`super()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:15:03.357

1.  将通用实现重构为单个类（基类或委托）。
2.  在测试重构的通用实现时重用当前单元测试。
3.  提供实现不同的特定测试。

如果没有共同的实现细节，那么你必须为每个实现有不同的单元测试。

# ruby-on-rails - 使用葡萄和rails 3限制访问json数据

> ID：15398275
> 
> 赞同：1
> 
> 时间：2013-03-13T23:10:16.373
> 
> 标签：ruby-on-rails, ruby, json, api, grape

我在这个地址中有一个 json 数据：

```
http://localhost:3000/api/v1/apisearch 
```

这些 json 数据是用葡萄 gem [https://github.com/intridea/grape](https://github.com/intridea/grape)生成的：

```
class API_v1 < Grape::API
  version 'v1', :using => :path, :vendor => 'myapp', :format => :json
    get :apisearch do
      Object.search({query: "*#{params[:q]}*"}).map{ |object| {id: object.title, text: object.description } }
    end
 end 
```

[我有一个使用select2](http://ivaynberg.github.com/select2/)从这个地址获取数据的搜索引擎

这是我的咖啡脚本文件：

```
jQuery ->
  $('#query_txt').select2
    width: 'resolve'
    allowClear: true
    minimumInputLength: 2
    ajax:
      url: "api/v1/apisearch"
      dataType: 'json'
      data: (term, page) -> {q: term}
      results: (data, page) ->
        results: data 
```

该脚本运行良好，但我想保护这个外部请求的地址。

`http://localhost:3000/api/v1/apisearch`如果类型可以访问这些数据，我不想允许用户。只能从我自己的应用程序访问我的内部搜索引擎的这些数据。

**我怎样才能限制从葡萄只访问我自己的应用程序的数据？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:59:32.940

我是葡萄和 Rails 的新手，但如果你不必使用 grappa 并且可以使用 Rails，我会想到这里。

您可以使用 Rails 检查“请求者”URL，如果它来自 yourapplication.com，则允许访问，否则拒绝。

# linq - 阻止实体框架执行属性或扩展方法

> ID：15398276
> 
> 赞同：1
> 
> 时间：2013-03-13T23:10:22.110
> 
> 标签：linq, entity-framework-5

我正在使用 EF5 Code First 模型。考虑以下实体框架查询：

```
var results = from i in context.Table1
            where i.ID == Id // passed in
            select new TableInfo()
            {
                Name = i.Name,
                ActionDate = i.Action.ActionDate,
                CreatedDate = i.Action.CreatedDate,
                CreatedBy = i.Action.CreatedBy.FullName
            }; 
```

FullName 属性是这样定义的：

```
[NotMapped]
[Display(Name = "Full Name")]
public string FullName
{
    get
    {
        string ret = string.Empty;
        if (String.IsNullOrEmpty(LAST_NAME) || String.IsNullOrEmpty(FIRST_NAME))
        {
            return "";
        }
        else
        {
            return string.Format("{0}, {1}", LAST_NAME, FIRST_NAME);
        }

    }
} 
```

我得到错误：

> LINQ to Entities 不支持指定的类型成员“FullName”。仅支持初始化程序、实体成员和实体导航属性。

如果我创建一个扩展方法来做同样的事情，我会得到类似的错误。所以问题是如何防止 EF 尝试在数据存储上运行这些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:45:15.933

问题是 select 子句的初始化程序中的表达式：

```
CreatedBy = i.Action.CreatedBy.FullName 
```

这导致 Linq-to-Entity 提供程序尝试为名为“FullName”的属性查找映射。如果您尝试使用扩展方法，这同样适用。

你可以这样做：

```
var results = 
    from i in context.Table1
    where i.ID == Id // passed in
    select new TableInfo()
    {
        Name = i.Name,
        ActionDate = i.Action.ActionDate,
        CreatedDate = i.Action.CreatedDate,
        CreatedBy = i.Action.CreatedBy
    }; 
```

然后使用`item.CreatedBy.FullName`通过您的自定义属性访问名称

# android - 你如何用opengl es（android）显示fps

> ID：15398285
> 
> 赞同：5
> 
> 时间：2013-03-13T23:11:24.937
> 
> 标签：android, opengl-es, frame-rate

我是java和opengl的新手，还在学习，所以请原谅我的无知。我制作了一个迫在眉睫的对象 apk 文件。现在我想在我的设备上播放应用程序时查看 fps。我一直在关注本教程[http://www.youtube.com/watch?v=1MYgP8Oj5RY&list=UUKwypsRGgHj1mrlQXhLXsvg&index=67](http://www.youtube.com/watch?v=1MYgP8Oj5RY&list=UUKwypsRGgHj1mrlQXhLXsvg&index=67)并尝试为 android 修改它，但我无法让它工作。

谁能告诉我如何在角落或标题页上添加一个简单的 fps 指示器以及如何控制 fps 的示例。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T23:16:12.777

如果您使用此类并调用 logFrame() ，它将告诉您 logcat 日志中的 fps：

```
import android.util.Log;

public class FPSCounter {
    long startTime = System.nanoTime();
    int frames = 0;

    public void logFrame() {
        frames++;
        if(System.nanoTime() - startTime >= 1000000000) {
            Log.d("FPSCounter", "fps: " + frames);
            frames = 0;
            startTime = System.nanoTime();
        }
    }
} 
```

从我读到的内容中，您可以通过最小化对 gl 状态的调用来优化代码以获得更好的帧速率

[这是 drawText() 的链接](https://stackoverflow.com/questions/15370748/displaying-text-like-score-which-changes-on-each-frame/15370887?noredirect=1#comment21730537_15370887)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-25T23:22:12.550

我知道已经晚了，但这是 Google 的第一个建议。所以我只想让它变得更好：

为什么要计算一秒钟经过的帧数？我在我的应用程序中需要一个实时的 FPS 值（你也应该使用它）。到目前为止我知道它说

```
Frames/Second 
```

这意味着您可以测量一帧和下一帧之间的时间并说：

```
Second/Frame 
```

要达到 FPS 很简单

```
1/(Second/Frame). 
```

这是代码。我使用上面的代码并对其进行了编辑以得到我的结果：

```
public class FPSCounter {
    private long lastFrame = System.nanoTime();
    public float FPS = 0;

    public void logFrame() {
        long time = (System.nanoTime() - lastFrame);
        FPS = 1/(time/1000000000.0f);
        lastFrame = System.nanoTime();
    }
} 
```

# jquery - jquery与fancybox的jquery循环滑块冲突

> ID：15398286
> 
> 赞同：1
> 
> 时间：2013-03-13T23:11:30.600
> 
> 标签：jquery

我有一个使用名为“循环”的 jQuery 滑块的网站。当您单击幻灯片时，会弹出一个花式框。然后滑块暂停，这是正确的，但我需要的是在花式框关闭后滑块恢复。本质上，我无法让这段代码的第二部分起作用。

```
$('.fancy-box').click(function(){
console.log('pause is working')
$('.hero-carousel').cycle('pause');
});

$('.fancybox-close').click(function(){
console.log('resume is working');               
$('.hero-carousel').cycle('resume');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:20:34.787

尝试为关闭按钮使用事件委托，以防它即时构建（因此在页面加载中还不存在）：

```
$("body").on("click", ".fancybox-close", function(event){
    console.log('resume is working');               
    $('.hero-carousel').cycle('resume');
}); 
```

更新：

由于这似乎已经解决了这个问题，我想解释一下这个问题稍微好一点（以防将来有人遇到同样的问题）。

加载页面时，没有类名为`fancybox-close`. 因此，点击处理程序永远不会附加到任何东西。

`$("body").on("click", ".fancybox-close", function(event){...});`将监听 body 标记内发生的任何点击（几乎是每次点击），如果该点击源自类名为 的元素`fancybox-close`，那么它将执行该函数。因此，我们现在不再依赖于页面加载时是否存在元素。

# arrays - BASH 问题，为 FOR 循环计算数组中的变量

> ID：15398289
> 
> 赞同：0
> 
> 时间：2013-03-13T23:11:40.310
> 
> 标签：arrays, bash, variables, for-loop, count

我对以下脚本有疑问。由于我对 BASH 缺乏了解，我不能 100% 确定如何创建一个循环，该循环使用“for”来计算数组中变量的数量并循环遍历每个变量。基本上我想要做的是让脚本计算变量 $sqldumps 中的变量数量，然后为每个变量运行一个 MySQL Dump（也将它们记录到数据库中）。脚本的长版本发布在底部，但下面是一个短版本：

```
#! /usr/bin/env bash
echo -ne '\033]0;World of Clucky - Backup\007'
BINDIR="$(dirname "$(readlink -fn "$0")")"
cd "$BINDIR"
sqldumps=("lwc" "bans" "frisnuk_permissions" "jail" "imonies" "GriefP" "permissions" "showcase" "simpleclans")
#Copy MySQL Databases
echo "[`date '+%H:%M'`] Starting MySQL Backup" >> /home/clucky/MinecraftServers/backup.log
for i in ${#sqldumps[*]}
    do
        echo "     ${sqldumps[i]}" >> /home/clucky/MinecraftServers/backup.log;
        /opt/lampp/bin/mysqldump -u'root' -p'CENSORED' --skip-lock-tables ${sqldumps[i]} > /home/clucky/MinecraftServers/.backups/$timedate/MySQL/${sqldumps[i]}.sql;
    done
echo "     forum";
/opt/lampp/bin/mysqldump -u'root' -p'CENSORED' forum >> /home/clucky/MinecraftServers/.backups/$timedate/MySQL/forum.sql;
echo "[`date '+%H:%M'`] MySQL Backup Complete" >> /home/clucky/MinecraftServers/backup.log 
```

我遇到的问题尤其是：

```
for i in ${#sqldumps[*]} 
```

我假设我为此使用了错误的语法，所以如果有人能给我正确的语法，将不胜感激。谢谢！

```
#! /usr/bin/env bash
echo -ne '\033]0;World of Clucky - Backup\007'
BINDIR="$(dirname "$(readlink -fn "$0")")"
cd "$BINDIR"
timedate=`date '+%m.%d.%Y-%H:%M'`
sqldumps=("lwc" "bans" "frisnuk_permissions" "jail" "imonies" "GriefP" "permissions" "showcase" "simpleclans")
echo "-------------- `date '+%d-%B-%Y %H:%M'` --------------" >> /home/clucky/MinecraftServers/backup.log
echo "[`date '+%H:%M'`] Starting Minecraft Backup" >> /home/clucky/MinecraftServers/backup.log
mkdir -p /home/clucky/MinecraftServers/.backups/$timedate
mkdir -p /home/clucky/MinecraftServers/.backups/$timedate/MySQL
nice --adjustment=19 tar -zcpf /home/clucky/MinecraftServers/.backups/$timedate/Minecraft.tar.gz \
    --directory /home/clucky/MinecraftServers/ \
    --exclude=SkyBlockkit \
    --exclude=Tekkit \
    --exclude=Vanilla \
    --exclude=test \
    --exclude=Zflocco_LP \
    --exclude=Mortuus/plugins/dynmap/web --exclude=Mortuus/plugins/AutoSaveWorld/backups --exclude Mortuus/CraftBukkitVersion --exclude=Mortuus/orebfuscator_cache --exclude=Mortuus/plugins/#Removed --exclude=Mortuus/server.log \
    --exclude=Frisnuk/plugins/dynmap/web --exclude=Frisnuk/plugins/AutoSaveWorld/backups --exclude Frisnuk/CraftBukkitVersion --exclude=Frisnuk/orebfuscator_cache --exclude=Frisnuk/plugins/#Removed --exclude=Frisnuk/plugins/#AwaitingUpdate --exclude=Frisnuk/server.log --exclude=Frisnuk/Suwako_Moriya100 --exclude=Frisnuk/Uk_Shadow --exclude=Frisnuk/Whiteghost99 --exclude=Frisnuk/greenrangermatt \
    --exclude=dailybackup.log \
    --exclude=.backups \
    --exclude=backup.log \
    --exclude=backups.log \
    --exclude=backupscript.sh \
    --exclude=dailybackup.sh \
    --exclude=.keptbackups .
echo "[`date '+%H:%M'`] Minecraft Backup Complete" >> /home/clucky/MinecraftServers/backup.log
#Purge files 3 days old
echo "[`date '+%H:%M'`] Purging Old Backups" >> /home/clucky/MinecraftServers/backup.log
find /home/clucky/MinecraftServers/.backups* -mmin +4320 -exec rm --recursive {} \;
echo "[`date '+%H:%M'`] Purging Complete" >> /home/clucky/MinecraftServers/backup.log
#Copy MySQL Databases
echo "[`date '+%H:%M'`] Starting MySQL Backup" >> /home/clucky/MinecraftServers/backup.log
for i in ${#sqldumps[*]}
    do
        echo "     ${sqldumps[i]}" >> /home/clucky/MinecraftServers/backup.log;
        /opt/lampp/bin/mysqldump -u'root' -p'CENSORED' --skip-lock-tables ${sqldumps[i]} > /home/clucky/MinecraftServers/.backups/$timedate/MySQL/${sqldumps[i]}.sql;
    done
echo "     forum";
/opt/lampp/bin/mysqldump -u'root' -p'CENSORED' forum >> /home/clucky/MinecraftServers/.backups/$timedate/MySQL/forum.sql;
echo "[`date '+%H:%M'`] MySQL Backup Complete" >> /home/clucky/MinecraftServers/backup.log
echo "[`date '+%H:%M'`] Daily Backup Complete" >> /home/clucky/MinecraftServers/backup.log
#Read back file size
filesize=$(ls -lah /home/clucky/MinecraftServers/.backups/$timedate | awk '{ print $5}')
echo "     Total Compression Size: $filesize\n" >> /home/clucky/MinecraftServers/backup.log 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:24:03.703

不要索引数组，只需使用值：

```
for value in "${sqldumps[@]}"; do echo $value; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:24:16.483

该语法`${#varname[*]}`返回数组的大小，但`for`您使用的语法希望得到一个元素列表。所以，要么你想要：

```
for elem in "${varname[@]}"; do
    ... something with ${elem} ...
done 
```

或者

```
for (( i = 0; i < ${#varname[@]}; i++ )); do
    ... something with ${varname[$i]} ...
done 
```

请注意，我使用`@`而不是，`*`因为这通常可以很好地预防包含空格的元素（即使在这种情况下它可能不是绝对必要的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:26:49.290

我冒昧地重新组织了您的脚本以使其更具可读性。

```
#!/usr/bin/env bash

# Script starts here.
main() {
    backup_dir=~clucky/MinecraftServers
    dbs=(lwc bans frisnuk_permissions jail imonies GriefP permissions showcase simpleclans forum)

    echo -ne '\033]0;World of Clucky - Backup\007'

    log 'Starting MySQL Backup'
    dump_dbs "${dbs[@]}"
    log 'MySQL Backup Complete'
}

# Write a timestamped message to the log file.
log() {
    echo "[$(date '+%H:%M')] $*" >> "$backup_dir/backup.log"
}

# Dump each of the databases passed as an argument. The list of databases is "$@".
dump_dbs() {
    for db in "$@"; do
        # Use --skip-lock-tables for every database except "forum".
        local options=(--skip-lock-tables)
        [[ $db = forum ]] && options=()

        log "     $db"
        /opt/lampp/bin/mysqldump -u root -p CENSORED "${options[@]}" "$db" \
            > "$backup_dir/.backups/$timedate/MySQL/$db.sql"
    done
}

main "$@" 
```

以下是我所做的一些事情：

1.  像这样的循环将直接遍历每个值，而不是遍历数组索引：

    ```
    for value in "${array[@]}"; do ...; done 
    ```

2.  `~user`用来指代用户的主目录会更短。它也更安全，因为用户的主目录不一定在`/home`.

3.  将代码分解为单独的函数有助于消除一些冗余，例如`backup.log`重复编写完整路径。log() 函数将带时间戳的消息行放在一个位置。

4.  该`forum`表没有`--skip-lock-tables`选项，所以我更明确地说明了这使得摆脱重复`mysqldump`行成为可能。

5.  我从不需要的地方删除了引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:44:39.427

`$i`将每个项目保存在一个数组中，直到它到达末尾。因此，您不必每次在`for`循环中需要它时都引用该数组。我也不喜欢硬编码`echo`，这是个人喜好，所以我把它换成了`printf`.

```
for i in ${#sqldumps[@]}
  do
    printf "     %s" "$i" >> /home/clucky/MinecraftServers/backup.log;
    /opt/lampp/bin/mysqldump -u'root' -p'CENSORED' --skip-lock-tables $i > /home/clucky/MinecraftServers/.backups/$timedate/MySQL/${sqldumps[i]}.sql;
done 
```

如果您只想找到可以使用的数组的大小。

```
Length=${#sqldumps[@]} 
```

然后`$Length`将等于数组中的位置数

# eclipse - Erlang：在 Eclipse IDE 中突出显示 erlide 语法？

> ID：15398298
> 
> 赞同：1
> 
> 时间：2013-03-13T23:12:37.947
> 
> 标签：eclipse, erlang, syntax-highlighting, erlide

我在 window->preferences->erlang （在树中）->editor->syntax coloring 下尝试更改语法着色，类似于 Java，但即使 erlide 0.20.2 表示它支持它也没有选项他们的[网站](http://erlide.org/)（在编辑支持下）。我正在使用 Eclipse Juno 和 erlide 0.20.3。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:58:02.193

我不确定你所说的“没有选择”是什么意思——我们有这个功能很长时间了。您在该偏好页面上看到了什么？

预览没有更新，我看到如果您在编辑器中打开了文件，则需要关闭并重新打开它们才能看到更改。我为此创建了一张票，这确实令人困惑。

# git - Git：从历史记录中删除替换文件的提交

> ID：15398301
> 
> 赞同：3
> 
> 时间：2013-03-13T23:13:04.523
> 
> 标签：git

我对 git 很陌生，所以我的存储库中积累了一些杂物和错误。现在我想再次清理它。

我的情况如下。我已将图片添加到我的存储库，但分辨率太高。后来我用较小的版本替换了它们，但它们仍然存在于我的历史中。我是唯一一个曾经在那个仓库工作过的人，所以重写历史的问题是可以容忍的。我的问题是我在添加图片和替换它们之间做了其他提交。这可能吗？如果是，那怎么办？

为了进一步说明我所拥有的：

```
04f9ac3 replace big pictures with small pictures
503c2b6 make a useful commit
8ab463d add big picutres
3d2a5a5 initial commit 
```

以及我想要实现的目标：

```
XXXXXXX combined commit of the "add big pictures" and "replace with small pictures"
503c2b6 make a useful commit
3d2a5a5 initial commit 
```

我发现了很多关于“挤压”提交的信息，但如果我理解正确的话，它会将“相邻”提交结合在一起。我想做的更多的是选择某些提交并将它们组合起来。我希望这对任何人都有意义。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:17:13.400

您可以使用`git rebase --interactive`来获取交互式 rebase，您可以在其中重新排序提交并压缩它们。你会像这样调用它`git rebase -i 3d2a5a5`，你可能会看到类似的东西

```
pick 8ab463d add big picutres
pick 503c2b6 make a useful commit
pick 04f9ac3 replace big pictures with small pictures 
```

您现在可以编辑此列表，因此它看起来像

```
pick 8ab463d add big picutres
squash 04f9ac3 replace big pictures with small pictures
pick 503c2b6 make a useful commit 
```

当你保存这个文件并让 rebase 启动时，它会添加“big picutres”提交，然后在“replace”提交中压缩，并给你一个编辑器来重写这个压缩提交的提交信息。保存该消息后，它将在此之上添加“进行有用的提交”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:20:40.213

你想打壁球，你是对的。但是，您不能压缩变基中的第一个提交。:(

```
$ git log
04f9ac3 replace big pictures with small pictures
503c2b6 make a useful commit
8ab463d add big picutres
3d2a5a5 initial commit

$ git rebase -i 3d2a5a5    <--- Choose a commit BEFORE the one you don't want
squash 8ab463d             <--- First commit in rebase cannot be squashed :(
pick 503c2b6
pick 04f9ac3 
```

# excel - 提取单元格内的行

> ID：15398306
> 
> 赞同：0
> 
> 时间：2013-03-13T23:13:25.733
> 
> 标签：excel, extract, cell, vba

我在一个单元格中有信息，我只想提取其中的某些部分。单元格内有由 CR 分隔的行。

例如。：

```
This is line 1
This is line 2
How Are you??
That is line 3
---------------------------
this is line 4
that is line 8
I want this line too 
```

以上都在一个单元格内。我想只提取不以 THIS 或 ----- 或 How 开头的行

那是第 3 行 那是第 8 行 我也想要这条线

所以当我运行 VBA 或宏时，我会得到 3 行。

每个句子都不是一成不变的。即它可以是任何长度的单词，但我想要截断的单词中的第一个单词是不变的，即以This 或That 开头。我想保留的那些通常不是恒定的，因为它是用户所关注的开放领域。

所以我想截断以 --- 或 This 或 That 开头的行，但保留其他任何内容。

这是针对整个细胞范围的，例如。从 A1 到 A100。

希望我提供的信息足够。

干杯杰弗里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:34:22.947

```
 Dim Arr(), FinalResult,count
range("A1").Select

for count=1 to 100
      Arr = Split(ActiveCell, vbLf)

      Dim i ,j
      For each i in Arr
          j=Mid(i,1,4)
           if Not ( j="This" or j= "this" or j= "That" or j="that" or j="----") then
              FinalResult=FinalResult & i & VbLf
           End If

      Next

      MsgBox FinalResult
Activecell.offset(1,0).select
next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:33:43.623

这是一个单元格的示例。如第二条评论中所述，您可以循环到目标范围内的每个单元格。您如何处理结果字符串也取决于您。

```
Public Sub GetThisAndThatLines()

  Dim sText() As String
  Dim sResult As String

  sText = Split(Selection.Text, vbLf)

  Dim i As Integer
  For i = 0 To UBound(sText)

      If LCase(Left(sText(i), 4)) = "this" Then
          sResult = sResult + sText(i) & vbCrLf
      ElseIf LCase(Left(sText(i), 4)) = "that" Then
          sResult = sResult + sText(i) & vbCrLf
      End If

  Next

  MsgBox sResult

End Sub 
```

# java - 您如何检测用户输入的 URL 以连接到您的服务器？

> ID：15398307
> 
> 赞同：0
> 
> 时间：2013-03-13T23:13:25.837
> 
> 标签：java, networking, telnet

我正在使用 Java 制作 telnet 服务器，并且我想检测用户从哪个域连接。就我而言，我有 3 个域（`example.com`、`example.net`和`example.org`）都指向我的 IP，我想为所有这些域托管不同的服务器。我需要检测他们连接到哪个域，以便发送不同的消息。

我知道 Apache 网络服务器与 VirtualHosts 做类似的事情，并且想知道如何在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:20:46.613

你真的不能。

Apache 能够使用虚拟主机支持这一点，因为 HTTP 协议在请求内容中包含主机标头，浏览器用 URL 的主机部分填充该主机标头。（参见[rfc-2616的第 14.23 节](http://www.ietf.org/rfc/rfc2616.txt)

据我所知，Telnet 不包含这样的标头。最好的检查位置是[rfc-854](https://www.rfc-editor.org/rfc/rfc854)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:33:28.883

*HTTP 协议*与域名密切相关，如果您正在构建服务器，则更有可能满足您的需求`Telnet`。这是一个坚如磐石且经过良好改进的协议。

在这种情况下，为什么不使用`HTTP`而不是弃用的`Telnet`协议呢？

这里的优点是：

*   HTTP 处理您需要的所有数据。您将能够轻松构建更复杂的应用程序，并访问更广泛的元数据。

*   使用大量可用于 Java 的 HTTP 堆栈的能力，例如[Apache common 的 HTTP Components](http://hc.apache.org/)

*   兼容性，因为许多应用程序已经能够向您的服务器发送/接收请求。

*   可扩展性，因为可以根据您的需求变化扩展您的服务器。以您需要保护服务器和客户端之间的流的情况为例。HTTPS 支持嵌入在大多数 Java 的 HTTP 堆栈中。

*   最后，它会让您知道客户从哪个域提出请求。

# c#-4.0 - EXE 从服务器运行

> ID：15398309
> 
> 赞同：1
> 
> 时间：2013-03-13T23:13:35.393
> 
> 标签：c#-4.0, thin-client

我们目前正在开发一个多用户 WPF 应用程序。我们不想在每个客户端上安装此应用程序，而是希望从服务器运行 EXE。我们不一定要使用 ClickOnce 部署，而且我们肯定不会做基于 Web 的应用程序。

为了设计和开发这种类型的应用程序，我需要研究和教育自己有什么特别的吗？这可以使用.NET 和 C# 吗？

目标是不必在客户端上安装任何东西。再说一次，仅仅因为我知道这将是给出的答案之一，所以不会有 ASP.NET 也不会涉及任何基于 Web 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:05:30.287

非常有趣的方法。这些天来，我发现自己正在处理一个类似但安静不同的困境。

我正在处理用 WinForms 编写的富（智能）客户端应用程序，并且要求非常相似（无需安装，也没有基于 Web 的解决方案），因此该应用程序发现它在大量 CITRIX 机器上自行运行以正常服务，不这么多的用户。

正如我所说，尝试使用 citrix，您的 WPF 应用程序将在远程计算机上运行，​​而用户通过 Web 浏览器使用“RemoteControl”连接到它，如果您愿意，请提醒 msdtc 或 teamViewer。

但是，经过几年的生产，相反的解决方案再次被测试。ClickOnce 接缝是非常合理的方法。您可以定义应用程序只有在用户机器上安装了最新版本时才会运行，这样就不需要保持向后兼容性。

如果您能分享所选择的方法以及支持该决定的技术原因，我将不胜感激。

# coldfusion - Coldfusion (Solr) 搜索行为

> ID：15398316
> 
> 赞同：0
> 
> 时间：2013-03-13T23:13:57.330
> 
> 标签：coldfusion, solr, cfquery, cfsearch, cfindex

我有这个“索引器”模板：

```
<cfquery name="LOCAL.modelli" datasource="xxx">
    SELECT id, name, brand FROM products 
</cfquery>
<cfindex action="refresh" 
         collection="mycoll"
         key="id"
         type="custom"
         title="nome"
         query="LOCAL.modelli"
         body="nome" /> 
```

我正在使用此代码进行搜索（#t# 来自搜索表单字段）：

```
<cfsearch collection="mycoll" name="LOCAL.ricerca" criteria="#t#" status="LOCAL.searchStatus" suggestions="always" /> 
```

想象一下我在数据库中有这个“产品”表：

身份证 | 姓名 |

1 | 碎片 13 |

2 | 餐吧 |

3 | 蛙皮 |

搜索“青蛙”找不到“蛙皮”！

相反，它暗示“碎片”。

这种行为正常吗？你能给我解释一下吗？

如何让我的搜索引擎以“frog”为条件找到“frogskin”？（我想避免对“产品”进行 SQL 查询以增强结果）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:15:19.080

在不使用通配符的情况下，引擎将查找确切的单词“frog”

您需要使用通配符`?`或`*`. 请注意，SOLR 不支持前导通配符，因此 `*frog`不会找到`bullfrog`但`frog*`应该找到`frogskin`

有关使用 SOLR 和 ColdFusion 进行搜索的更多信息，请参阅[Solr 搜索示例](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WS82937B1B-240F-4850-B376-5FD9F911E5E5.html)。

# node-gyp - node-gyp build 如何变得冗长？

> ID：15398319
> 
> 赞同：10
> 
> 时间：2013-03-13T23:14:22.560
> 
> 标签：node-gyp

我希望在构建节点绑定时看到正在使用的编译器和链接器标志。我怎样才能`node-gyp build`在详细模式下运行来实现这一点。（类似于`make VERBOSE=1`for `cmake`）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-27T18:19:58.850

尝试

```
node-gyp rebuild --verbose 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-29T03:44:27.320

`make V=1`帮助我进行详细的`V8`构建。我没有尝试`node.js`。

我不太`gyp`清楚，但我知道它写信给`out/Makefile`，请求`Makefile`

```
# The V=1 flag on command line makes us verbosely print command lines.
ifdef V
  quiet=
else
  quiet=quiet_
endif 
```

# javascript - Node/Javascript 将对象属性设置为数组不起作用？

> ID：15398321
> 
> 赞同：1
> 
> 时间：2013-03-13T23:14:37.600
> 
> 标签：javascript, node.js

```
var arr = new Array();
arr[0] = "a";
var ob = new Object();
ob.prop = arr;
ob.prop[0] = "b";
//Console log arr[0] returns b 
```

出于某种原因，当我更改 ob.prop 时，arr 数组正在更改？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:27:38.783

正如**系统**所指出的，`ob.prop = arr`基本上只是为访问`arr`. 因此，当您修改时，`ob.prop`您正在修改同样`arr`引用的对象。

**编辑**：要复制数组，请看一下[这个问题](https://stackoverflow.com/questions/7486085/copying-array-by-value-in-javascript)：

```
var arrCopy = arr.slice(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:37:32.987

正如 Jorge 所提到的，发生这种情况是因为`obj.prop`只是对 , 的引用`arr`，所以`arr`并且`obj.prop`将指向内存中的同一个地方。因此，如果您更改其中任何一个，内存中的值（另一个指向）都会更改，从而同时更改两者。

如果你想避免这种情况，你需要做一个**深拷贝**。这会将数组的值复制到一个新数组中，该数组`obj.prop`将指向。

[这里](http://james.padolsey.com/javascript/deep-copying-of-objects-and-arrays/)有一个如何在 javascript 中执行此操作的演练。

# sitecore - Sitecore 管道处理器弄乱了 CMS

> ID：15398322
> 
> 赞同：0
> 
> 时间：2013-03-13T23:14:43.793
> 
> 标签：sitecore, pipeline, processor

我有一个管道处理器，它在站点上按预期工作，但是当您进入 CMS 时会造成严重破坏。

确定请求是否发往 CMS 的正确方法是什么？最好我想要一些比检查 URL 是否包含“/sitecore/”更强大的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:48:25.620

站点上下文是执行此操作的好方法。您可以使用标准的 Sitecore 配置工厂方法来输入应该使用扩展的站点名称，然后忽略其他名称，包括“shell”。

cf [https://community.sitecore.net/technical_blogs/b/sitecorejohn_blog/posts/the-sitecore-asp-net-cms-configuration-factory](https://community.sitecore.net/technical_blogs/b/sitecorejohn_blog/posts/the-sitecore-asp-net-cms-configuration-factory)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T14:56:12.867

如果您在“shell”站点中，您可以优雅地退出...

```
if (Sitecore.Context.Site.Name.Equals("shell", StringComparison.InvariantCultureIgnoreCase))
{
    // Exit here if we're avoiding the sitecore shell altogether
    return;
} 
```

这取决于导致代码崩溃的情况。您可以检查页面模式以避免出现问题模式...

```
if (Sitecore.Context.PageMode.IsPageEditorEditing)
{
    // Exit here if we're avoiding someone editing the page.
    return;
} 
```

# math - 为什么我的计算器对 2^34 == 2^34 - 1 返回 true？

> ID：15398324
> 
> 赞同：1
> 
> 时间：2013-03-13T23:14:50.283
> 
> 标签：math, floating-point, decimal

*我在这里问这个问题是因为我相信这更像是一个程序问题而不是其他任何事情。*

我正在使用 TI-84 Plus Sliver Edition 计算器，其中包含可以测试小于、大于和相等的逻辑运算符。我发现当我输入表达式时：

```
2^34 == 2^34 - 1 
```

它给了我一个令人惊讶的 1。值得一提的是，我的计算器无法精确输出 2^34 的结果。相反，它使用指数符号和任何其他大于 33 的幂。这是布尔输出中的潜在因素吗？

此外，只有当第二个表达式减去 1 到 9 时，相等性测试才会返回 true。当数字 >= 10 时，它会正确返回 false。

会不会是舍入误差？为什么这个表达式返回真？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:48:51.443

您的计算器无法跟踪这么大的数字。

每个计算器都有一定的精度（比如说 10 位）。计算器给出的每个答案都会四舍五入，以便答案有那么多位数，然后它会根据需要移动小数位，以使数字变大或变小（在您的情况下非常大）。

您的数字非常大，以至于当您减去 1 时，会导致第 10 位之后发生变化。然后将其四舍五入回到您开始的位置，然后进行比较。所以很自然地，它认为它们是相同的数字（达到它能够做到的精度）。

# ruby-on-rails - 自定义 JSON 的输出

> ID：15398325
> 
> 赞同：4
> 
> 时间：2013-03-13T23:14:51.093
> 
> 标签：ruby-on-rails

在控制器中，我有一个像这样的 respond_with：

```
respond_with(@layer1 , @layer2) 
```

我需要的 JSON 输出是这样的：

```
{
   "LayerOne": [
      {
         "name": "haha",
         "number":"44"
      }, // more .... 
   ],
  "LayerTwo": [
     {
        "name": "James Bond",
        "score": 20
     } // , ....
  ]
} 
```

因此，为了获得第一部分，我编写了这样的序列化程序：

```
class Layer1Serializer < ActiveModel::Serializer

  attributes :number, :name

  def name
    object.person.name
  end

end 
```

我将控制器更改为这样，所以我可以传递一个 ROOT，以便它在 JSON 中显示为“LayerOne”

```
respond_with(@Layer1, root: 'LayerOne') 
```

但请记住，一开始我有两件事要传递给控制器​​，所以现在我不知道如何为 JSON 的第二部分“Layer2”执行此操作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T21:08:40.750

您可以创建以下中间类：

```
class BothLayers
  include ActiveModel
  def initialize(layer1,layer2)
    @layer1 = layer1
    @layer2 = layer2
  end
  attr_accessor :layer1, :layer2
end 
```

和以下序列化程序：

```
class BothLayersSerializer < ActiveModel::Serializer
  root false
  has_many :layer1, key: "LayerOne"
  has_many :layer2, key: "LayerTwo"
end 
```

然后在你的控制器中：

```
 both_layers = BothLayers.new(@layer1,@layer2)
    respond_with( both_layers, serializer: BothLayersSerializer ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:57:16.337

创建一个新的哈希并将您的数组值传递给它。

```
respond_with({:LayerOne => @layer1.as_json(:only => [:name, :percentage]), :LayerTwo => @layer2.as_json(:only => [:name, :off_target_by])}) 
```

我得到了这个json：

```
{
    "LayerOne": [
        {
            "name": "layer1",
            "percentage": "10.11"
        },
        {
            "name": "layer 1 bis",
            "percentage": "1212.0"
        }
    ],
    "LayerTwo": [
        {
            "name": "layer 2",
            "off_target_by": 2
        },
        {
            "name": "layer 2 bis",
            "off_target_by": 9
        }
    ]
} 
```

希望能帮助到你 ：）

编辑 2：

您可以创建一个数组序列化程序来传递您的变量：

```
class LayerArraySerializer < ActiveModel::ArraySerializer
  self.root = false
end 
```

在你看来：

```
respond_with({:LayerOne => @layer1 , :LayerTwo => @layer2}, :serializer => LayerArraySerializer) 
```

json打印：

```
[
    [
        "LayerOne",
        [
            {
                "percentage": "10.11",
                "name": "layer1"
            },
            {
                "percentage": "1212.0",
                "name": "layer 1 bis"
            }
        ]
    ],
    [
        "LayerTwo",
        [
            {
                "off_target_by": 2,
                "name": "layer 2"
            },
            {
                "off_target_by": 9,
                "name": "layer 2 bis"
            }
        ]
    ]
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T12:45:31.620

使用 JBuilder DSL 是解决问题的好方法。

[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)

您想要的 JSON 响应被实现为一个视图，让您可以完全控制它的呈现方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:52:54.530

Railcasts 有一个关于 AR Serializer 的优秀视频+文本教程，我相信你会在那里找到答案

[http://railscasts.com/episodes/409-active-model-serializers](http://railscasts.com/episodes/409-active-model-serializers)

# c# - 使用 C# 提交 HTML 表单

> ID：15398327
> 
> 赞同：0
> 
> 时间：2013-03-13T23:15:09.993
> 
> 标签：c#, html, httpwebrequest

我正在尝试使用以下网页中的以下代码通过 C# 提交 HTML 表单：

[http://liga.record.xl.pt/User/Login.aspx](http://liga.record.xl.pt/User/Login.aspx)

我无法进入页面。那是因为它使用javascript登录吗？

```
private String readHtmlPage(string url)
    {
        String email = "email";
        String password = "password";

        String result = "";
        String strPost = "email=" + email + "&password=" + password; 
        StreamWriter myWriter = null;

        HttpWebRequest objRequest = (HttpWebRequest)WebRequest.Create(url);
        objRequest.Method = "POST";
        objRequest.ContentLength = strPost.Length;
        objRequest.ContentType = "application/x-www-form-urlencoded";

        try
        {
            myWriter = new StreamWriter(objRequest.GetRequestStream());
            myWriter.Write(strPost);
        }
        catch (Exception e)
        {
            return e.Message;
        }
        finally
        {
            myWriter.Close();
        }

        HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
        using (StreamReader sr =
           new StreamReader(objResponse.GetResponseStream()))
        {
            result = sr.ReadToEnd();

            // Close and clean up the StreamReader
            sr.Close();
        }
        return result;
    } 
```

# javascript - Jquery 加载未正确加载

> ID：15398335
> 
> 赞同：2
> 
> 时间：2013-03-13T23:15:56.003
> 
> 标签：javascript, jquery

我希望有人能帮助我。我创建了许多纯文本 apsx 页面，它们将在 html 网页中填充不同的 div。我使用 jquery 加载函数将数据提取到 html 页面 div 中。html 页面是通过艺术家构建的，而即时加载的页面是 aspx 文件。我有使用艺术家布局的问题，所以我尝试让我“轻松”地填充 html 页面并在页面中加载不同的 aspx 文本。

页面工作正常，但加载不正确！如果不按几次刷新按钮，该页面不会将所有页面加载到 div 中。是否有更好的方法来处理这个问题，以便在第一次加载页面时自动加载所有页面 tetx。

请帮我！！

```
 <ol id="result1"></ol>

<script type="text/javascript">
$('#result1').load('textpages/firstpage_1_pic.aspx');
</script>
                      </div>

         <o2 id="result2"></o2>

<script type="text/javascript">
$('#result2').load('textpages/firstpage_1.aspx');
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:23:26.953

确保您的请求正确完成。

```
$("#result1").load("textpages/firstpage_1_pic.aspx", function(response, status, xhr) {
  if (status == "error") {
    var msg = "An error occured: ";
    alert(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

# c++ - 带有 int 的 SendMessage 作为 lParam 或 wParam 的参数？

> ID：15398337
> 
> 赞同：2
> 
> 时间：2013-03-13T23:16:12.903
> 
> 标签：c++, function, wndproc, lparam

假设我想向我的 WndProc 发送一条消息，但我还想发送一个整数。

```
SendMessage (m_hWnd, WM_DISPLAYCHANGE, NULL, int?); 
```

我的 WndProc 会收到它吗？然后我想将该 lParam(integer) 发送到一个函数。

```
case WM_DISPLAYCHANGE:
    {
         pD2DResources->OnRender(lParam);
    }
    break; 
```

如何将整数作为 lParam 或 wParam 发送，然后将该整数作为参数重新发送到函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:32:16.250

LPARAM 和 WPARAM 只是长期的 typedef。所以一个 int 可以按原样发送。

```
SendMessage(m_hWnd, WM_DISPLAYCHANGE, NULL, (LPARAM)yourInt) 
```

在你的 wnd 过程中你可以做

```
pD2DResource->Render((int)lParam) 
```

当您将这些自定义信息作为标准 Windows 消息（WM_USER 下面的消息号）的一部分发送时，您应该小心不要将您在窗口 proc 中收到的 LPARAM 值直接传递给 DefWindowProc（默认窗口 proc） - 因为 yourInt 可能有该特定标准 Windows 消息的特殊含义。您可以将一个固定值从您的窗口 proc 传递到 DefWindowProc，或者查看其他方法通过 LPARAM/WPARAM 传递超过 4 个字节的信息。由于 SendMessage 是同步的，您可以传递结构的地址 - 就像许多标准 Windows 消息一样。

# javascript - 每隔一段时间 IE 9 无法加载 javascript 资源

> ID：15398341
> 
> 赞同：5
> 
> 时间：2013-03-13T23:16:29.637
> 
> 标签：javascript, internet-explorer, internet-explorer-9, requirejs

每隔一段时间，当我加载我的网站大约五分之一时，它无法加载网站，并且在 IE 9 控制台中显示：

```
SCRIPT5007: Unable to get value of the property 'normalize': object is null or undefined 
require.js, line 929 character 25
SCRIPT5007: Unable to get value of the property 'normalize': object is null or undefined 
require.js, line 929 character 25
SCRIPT5007: Unable to get value of the property 'extend': object is null or undefined 
Module.js?ts=@@timestamp, line 52 character 3
SCRIPT5007: Unable to get value of the property 'normalize': object is null or undefined 
require.js, line 929 character 25
SCRIPT5007: Unable to get value of the property 'View': object is null or undefined 
View.js?ts=@@timestamp, line 8 character 3
SCRIPT5007: Unable to set value of the property 'Validation': object is null or undefined 
backbone.validation.js?ts=@@timestamp, line 15 character 3
SCRIPT5007: Unable to get value of the property 'extend': object is null or undefined 
Class.js?ts=@@timestamp, line 10 character 3
SCRIPT5007: Object expected 
hbs.js?ts=@@timestamp, line 143 character 15
SCRIPT5007: Object expected 
hbs.js?ts=@@timestamp, line 143 character 15
SCRIPT5007: Object expected 
hbs.js?ts=@@timestamp, line 143 character 15
SCRIPT5022: Load timeout for modules: css!lib/foundation/style_unnormalized2,css!lib/icon-font/fontcustom_unnormalized3,css!lib/icon-font/icon-font_unnormalized4,hbs!modules/header/HeaderTemplate_unnormalized5,css!modules/header/HeaderStyle_unnormalized6,hbs!lib/components/avatar/AvatarTemplate_unnormalized7,css!lib/components/avatar/AvatarStyle_unnormalized8,hbs!modules/login/LoginTemplate_unnormalized9,css!modules/login/LoginStyle_unnormalized10,hbs!modules/header/HeaderTemplate,hbs!lib/components/avatar/AvatarTemplate,hbs!modules/login/LoginTemplate
http://requirejs.org/docs/errors.html#timeout
require.js, line 1758 character 9 
```

令人困惑的是，它只是偶尔发生，这可能是我需要我的 javascript 文件的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T21:48:43.517

这似乎与[JQuery中发生的类似问题有关](http://bugs.jquery.com/ticket/12282#comment:1)

这完全是因为 DOM 没有准备好，并且由于 DOM 没有完全加载，所以会发生这个错误，这也解释了你提到的“随机”行为。

如果您还没有这样做，请尝试在页面末尾添加脚本或某种延迟加载：

*   [http://www.joezimjs.com/javascript/lazy-loading-javascript-with-requirejs/](http://www.joezimjs.com/javascript/lazy-loading-javascript-with-requirejs/)
*   [RequireJS如何实现延迟加载？](https://stackoverflow.com/questions/10911044/how-to-achieve-lazy-loading-with-requirejs)

顺便说一句，似乎微软拒绝了这方面的帖子，它并不认为这是一个错误：

[https://connect.microsoft.com/IE/feedback/details/792880/document-readystat](https://connect.microsoft.com/IE/feedback/details/792880/document-readystat)

# ruby-on-rails - 当且仅当查询不适用于 Rails 和 Postgres

> ID：15398342
> 
> 赞同：1
> 
> 时间：2013-03-13T23:16:29.540
> 
> 标签：ruby-on-rails, postgresql, join

我想要的是查询所有只有通过`habtm`关联关联的“fra”语言的媒体。目前，此查询返回`Media`包含“fra”的实例，例如 ["fra", "eng"]。我使用 Postgres。

因此，（1）我想找到完全具有语言“x”而没有其他语言的媒体，（2）找到完全具有语言“x”和“y”的媒体，（3）找到具有正是语言“x”、“y”和“z”等。

```
class Media < ActiveRecord::Base
    has_and_belongs_to_many :audio_language_records, :join_table => "audio_languages_media", :class_name => "Language"
end

class Language < ActiveRecord::Base
  attr_accessor :code
end 
```

我试过这个，但它返回所有包含“fra”的媒体，但不仅仅是“fra”

```
Media.joins(:audio_language_records).where("languages.code = ? AND languages.code != ?", "fra", "eng") 
```

以下不按预期工作并返回相同的结果

```
Media.joins(:audio_language_records).where("languages.code IN (?) AND languages.code NOT IN (?)", ["fra"], ["eng"]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:56:50.580

因此，您需要找到存在 language.code 为“eng”但在连接表中没有相同 media_id 但不同 language_id 的条目的媒体。

```
SELECT * FROM media m1
  JOIN audio_languages_media alm1 ON alm1.media_id = m1.id
  JOIN languages l1 ON alm1.language_id = l1.id 
  WHERE NOT EXISTS(
    SELECT 1 FROM audio_languages_media alm2
    WHERE alm1.language_id != alm2.language_id
    AND alm1.media_id = alm2.media_id
  )
  AND l1.code = 'eng'; 
```

让我们知道这是否是正确的数据库查询，以便我们可以帮助处理 AREL。

编辑：查询何时要查找至少在“eng”和“fra”中的媒体

```
SELECT * FROM media m1
  WHERE(
    SELECT count(*) FROM audio_languages_media alm2
    JOIN languages l2 ON alm2.language_id = l2.id
    WHERE l2.code in ('eng','fra')
    AND alm2.media_id = m1.id
  ) > 1; 
```

编辑：添加@chinshr 的查询

如果您想要只有“eng”和“fra”的媒体

```
SELECT * FROM media m1
  WHERE(
    SELECT count(*) FROM audio_languages_media alm2
    JOIN languages l2 ON alm2.language_id = l2.id
    WHERE l2.code IN ('eng','fra')
    AND alm2.media_id = m1.id
    AND (
      SELECT count(*) FROM audio_languages_media alm2 
      WHERE alm2.media_id = media.id
    ) = 2
  ) = 2; 
```

这个查询可以通过在 IN 数组中添加/删除来调整更多或更少的语言，并将末尾的计数调整为等于 IN 数组中的元素数。

为此，您必须在 audio_languages_media(media_id, language_id) 上有一个唯一索引；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:24:55.727

每行只有一个值，因此“fra”的每个值都不能是“eng”或任何其他值。你必须检查两行。它可以像这样在 SQL 中完成，例如：

```
SELECT * 
FROM languages t1
LEFT JOIN languages t2
    ON t1.id=t2.id AND t2.code="eng"
WHERE t1.code="fra" AND t2.code IS NULL; 
```

# ipad - 在文本区域上滚动

> ID：15398346
> 
> 赞同：1
> 
> 时间：2013-03-13T23:16:50.033
> 
> 标签：ipad, iscroll

在我拥有 iScoll 的 iPad 应用程序上，它应用于 div 并且效果很好。

我有一个包含长文本的文本区域。在桌面上，我们在长文本区域上有滚动条，但在 iPad 上没有。

如何在 textarea 上滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:12:32.307

我通过检测 textarea 的实际高度解决了这个问题： textaraElement.scrollHeight

然后将其分配给 textarea 高度： textaraElement.style.height = textaraElement.scrollHeight + "px";

通过这种方式，textarea 可以在 iscroll div 中滚动。请注意，您应该重复此操作并在 ipad 方向更改时刷新 iscroll。

如果你的 textarea 是可编辑的，那么在 keyup 上运行这一行：

textaraElement.style.height = textaraElement.scrollHeight + "px";

和滚动刷新。

# scala - 使用元组作为值类的单个参数有缺点吗？

> ID：15398350
> 
> 赞同：3
> 
> 时间：2013-03-13T23:17:12.060
> 
> 标签：scala

Scala 2.10 增加了对[值类](http://docs.scala-lang.org/overviews/core/value-classes.html)的支持。值类的限制之一是它“必须只有一个主构造函数，其中只有一个公共的 val 参数，其类型不是值类。”

对单个 val 参数使用元组有什么缺点吗？

例如，我想创建一个值类型来表示具有开始和结束的时间段。因为我不能有两个参数，所以我可以将该范围表示为`(Long, Long)`.

```
case class Period(timeRange: (Long, Long)) extends AnyVal {
  def start: Long = timeRange._1
  def end: Long = timeRange._2
  def contains(time: Long): Boolean = time >= start && time < end
} 
```

使用这种方法，我还能获得值类的内存分配优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:02:03.667

正如您所说，缺点是您将创建一个额外的`Tuple2`对象来存储两个`Long`s。然而，不会有拳击——`Tuple2`专门用于`Long`. 所以——你最好在这种情况下创建一个案例类。

以下内容与您的问题没有直接关系，但可能有用。在某些情况下，如果您的值类是通用的，则您需要一个类型类。例如，假设您想`!`为`Numeric`类型添加额外的阶乘方法。您必须执行以下操作：

```
implicit class IntegralOps[T: Numeric](val x: T) extends AnyVal {
  def ! = ???
} 
```

这是行不通的，因为 typeclass 约束被转换为一个额外的隐式参数，而值类只支持一个参数：

```
implicit class IntegralOps[T](val x: T)(implicit $evidence: Numeric[T]) extends AnyVal {
  def ! = ???
} 
```

在这种情况下，您可以避免的技巧是将 typeclass 参数移动到所有扩展方法：

```
implicit class IntegralOps[T](val x: T) extends AnyVal {
  def !(implicit $evidence: Numeric[T]) = ???
} 
```

由于对`IntegralOps`类的隐式转换和对扩展方法的调用相同的调用点相同，因此相同的类型类将适用于两种情况。

# jquery - jQuery/Ajax 没有获得提交按钮名称

> ID：15398355
> 
> 赞同：7
> 
> 时间：2013-03-13T23:17:25.523
> 
> 标签：jquery, ajax, forms, submit, serializearray

我正在努力使用表单中的多个提交按钮提交表单。我知道提交按钮名称未序列化，但我需要将该名称传递给处理脚本。

示例代码：

```
<form id='newqueryform' action='process-forms.php' method='post' >
    <input type='hidden' name='formname' value='newqueryform'>
    <div id='runit'><input type='submit' name='runit'  value='Run' /></div>
    <div id='saveit'><input type='submit' name='saveit' value='Save' /></div>
</form> 
```

这里有 2 个提交按钮，但是在 jQuery 代码中：

```
$('#workarea').on('submit','#newqueryform', function(e)
{           

  var formData = $(this).closest('#newqueryform').serializeArray();
  alert(JSON.stringify(formData));
  ... 
```

2个提交按钮不显示！！仅显示其他输入字段。我怎么知道按下了哪个按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T23:26:03.987

由于您依赖于单击的按钮，而不仅仅是提交的表单，因此将操作绑定到按钮。就像单击`$(this)`的`function(){}`按钮一样，您可以将其详细信息设置为 formData。

```
$('#workarea').on('click','#newqueryform input[type="submit"]', function(e){
    var formData = $(this).closest('#newqueryform').serializeArray();   
    formData.push({name: this.name, value: this.value});
    ... 
```

# java - '系统找不到指定的路径'在maven安装中的错误

> ID：15398361
> 
> 赞同：0
> 
> 时间：2013-03-13T23:17:45.777
> 
> 标签：java, windows-7, installation, environment-variables, maven-3

[遵循http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)上的所有说明

当我在cmd中运行'mvn --version'时，我得到............

Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)

Maven 主页：C:\Program Files\Apache Software Foundation\apache-maven-3.0.4\bin..

Java 版本：1.7.0_03，供应商：甲骨文公司

Java 主页：C:\Program Files\Java\jdk1.7.0_03\jre

默认语言环境：en_US，平台编码：Cp1252

操作系统名称：“windows 7”，版本：“6.1”，arch：“amd64”，家族：“windows”

**系统找不到指定的路径**。

我试图自己解决它。也按照这些说明 [在 Windows 7 64 位上安装 maven](https://stackoverflow.com/questions/7219628/installing-maven-on-windows-7-64bit)

1）在资源管理器中导航到 Maven 目录 2）转到 bin 中的目录 3）复制地址栏中的地址（必须以 bin 结尾） 4）转到开始并输入“env” 5）选择“编辑系统环境变量” 6) 找到 PATH 变量，该变量也必须具有 Java 的现有值，因为 Maven 需要 Java。7) 附加一个；+ 粘贴路径。

8) 重新启动以更新系统 9) 在 cli 中运行“mvn install”。

我仍然得到同样的错误。

PS：这是我的路径 %M2_HOME%\bin;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files\Apache Software Foundation\apache-maven-3.0.4\bin;C:\程序文件 (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files\Java\jdk1.7.0_03;C:\Program Files (x86)\Sony\VAIO 启动设置工具； C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Common Files\Roxio Shared\10.0\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\strawberry\c\bin;C:\strawberry\perl\bin;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\QuickTime \QT系统\;C:\Program Files\TortoiseSVN\bin;%M2%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T11:12:18.117

如果您在命令提示符中执行其他程序/命令时收到错误“系统找不到指定的路径”，则可能是设置为从 cmd.exe 自动运行的程序的路径已更改。您可以使用以下注册表位置跟踪自动运行程序：HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun

修改 RegEdit 中的 AutoRun 条目以更正路径，然后在新的 cmd 窗口中重试该命令。

# javascript - 按钮和选择的不同模糊行为

> ID：15398362
> 
> 赞同：0
> 
> 时间：2013-03-13T23:17:51.073
> 
> 标签：javascript, jquery, blur

按钮和选择上的“模糊”事件有不同的行为。1）在textarea中单击>展开textare 2b）在选择中单击>不要缩小textare>那是正确的！或2a）单击按钮>缩小文本区域>我该如何防止这种情况？

```
<table class="codeBlock">
<tr>
    <td>
        <button>Hallo</button>
        <select>
            <option>A</option>
            <option>B</option>
        </select>
        <textarea>Some text</textarea>
    </td>
</tr>
<tr class="codeBlock">
    <td>
        <textarea>Some text</textarea>
        <select>
            <option>A</option>
            <option>B</option>
        </select>
        <button>Hallo</button>
    </td>
</tr> 
```

```
 $(document).on("blur", ".codeBlock", function () {
        $("textarea", this).height("40px");
    });

    $(document).on("focus", ".codeBlock", function () {
        $("textarea", this).height("80px");
    }); 
```

你可以试试... [ysfiddle](http://jsfiddle.net/klwemu/qfvVG/)

# silverlight-5.0 - 如何从 Silverlight 应用程序在新浏览器中打开 URL

> ID：15398368
> 
> 赞同：2
> 
> 时间：2013-03-13T23:18:14.323
> 
> 标签：silverlight-5.0

我们有 MVVM Silverlight 应用程序。我正在尝试从客户端视图模型上发生的按钮单击事件打开 Web url，并且通过调用方法需要在新浏览器中打开 Web url。

我正在使用如下服务器端代码中描述的 Process.Start 方法。

```
 var URL = @"http://SiteSelect.aspx";
   SecureString secure = new SecureString();
   char[] passwordChars = Properties.Settings.Default.Password.ToCharArray();
   //converting string to securestring...found from internet
    foreach (char c in passwordChars)
           {
             secure.AppendChar(c);
           }
    Process.Start(URL,"",Properties.Settings.Default.User,secure,"agent"); 
```

这会引发与用户名和密码相关的错误。我检查了用户名和密码是否正确。任何人都有解决方案或我可以使用的任何其他方法？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:48:45.197

您创建一个助手类：

```
public static class CommonHelper
{
    private class HyperlinkButtonWrapper : HyperlinkButton
    {
        public void OpenURL(string navigateUri)
        {
            OpenURL(new Uri(navigateUri, UriKind.Absolute));
        }

        public void OpenURL(Uri navigateUri)
        {
            base.NavigateUri = navigateUri;
            base.TargetName = "_blank";
            base.OnClick();
        }
    }

    public static void OpenURL(string navigateUri)
    {
        new HyperlinkButtonWrapper().OpenURL(navigateUri);
    }
 } 
```

用法：

```
CommonHelper.OpenURL(@"http://SiteSelect.aspx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T09:45:20.727

您也可以使用它：

```
using System.Windows.Browser;
var uri = new Uri("http://foo.fr");
HtmlPage.Window.Navigate(uri, "_blank"); 
```

传递凭据的最简单方法是将它们放在 URL 中，但是它不是很安全。IE：

[http://user:password@foo.fr](http://user:password@foo.fr)

# c# - 带有按钮的 C# 表单和这些按钮旁边的动态表单

> ID：15398373
> 
> 赞同：-2
> 
> 时间：2013-03-13T23:18:39.027
> 
> 标签：c#, winforms, dynamic, dialog

我在 C# 中使用 Windows 表单，我正在尝试创建一个表单对话框，该对话框将负责在其对话框的边界内显示其他对话框。为此，我尝试了 Tab Control，它运行良好，我可以轻松地在选项卡控件中创建不同类型的表单，而无需打开任何单独的表单。

但问题是我不想使用 Tab 控件，我在左侧的主窗体上有一些按钮，单击这些按钮我想在这些按钮旁边显示单独的窗体。我搜索了谷歌，但没有找到任何这样的例子，我也找不到任何这样的控件。我的应用程序非常简单，带有左侧按钮的对话框，在右侧我想根据这些按钮显示不同的表单... C# 不是我的母语，但现在我必须处理它并需要帮助。

请查看附件图片以获取更多信息

![在此处输入图像描述](../Images/181a87390ed344f4d25c37b2663e1402.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:35:00.850

每个页面都可以是 Panel 的一个实例，然后根据单击的按钮显示/隐藏 Panel 实例....使它们的大小、形状和位置都相同；)

# ruby-on-rails-3 - rails spree has_many 通过关联

> ID：15398379
> 
> 赞同：1
> 
> 时间：2013-03-13T23:19:08.280
> 
> 标签：ruby-on-rails-3, has-many-through, spree

我正试图根据我的需要调整 Spree，但我遇到了一个障碍。我会尽量解释清楚而不粘贴太多代码，因为 Spree 有很多...

对于初学者。我已经`OptionType`这样扩展了

```
Spree::OptionType.class_eval do
  PRODUCT_TYPES = SuperMap.new( [:default, 0],
                            [:vehicle_bonnet, 1],
                            [:vehicle_images, 2])

  super_mapped_attr :product_type, PRODUCT_TYPES

  attr_accessible :product_type
end 
```

我想查看我正在处理的类型的`show`视图，如下所示：`ProductsController``product_type`

```
<% if @product.option_types.product_type_key == :vehicle_bonnet %>
   ...
<% end %> 
```

我明白了`undefined method ``product_type_key'`。由于`SuperMap`. 现在，`Product`and`OptionType`有一些奇怪的关联（至少对我来说）。

```
module Spree
  class Product < ActiveRecord::Base
    has_many :product_option_types, :dependent => :destroy
    has_many :option_types, :through => :product_option_types
  end
end 
```

到目前为止似乎还可以。

```
module Spree
  class ProductOptionType < ActiveRecord::Base
    belongs_to :product
    belongs_to :option_type
    acts_as_list :scope => :product
  end
end 
```

现在是奇怪的部分：

```
module Spree
  class OptionType < ActiveRecord::Base
    has_many :option_values, :order => :position, :dependent => :destroy
    has_many :product_option_types, :dependent => :destroy
    has_and_belongs_to_many :prototypes, :join_table => 'spree_option_types_prototypes'

    attr_accessible :name, :presentation, :option_values_attributes

    validates :name, :presentation, :presence => true
    default_scope :order => "#{self.table_name}.position"

    accepts_nested_attributes_for :option_values, :reject_if => lambda { |ov| ov[:name].blank? || ov[:presentation].blank? }, :allow_destroy => true
  end
end 
```

这实际上是整个`OptionType`模型。令我惊讶的是它没有`has_many :products, through: :product_option_types`。我试图将此行添加到我的扩展程序中，但没有帮助。我当然尝试过其他一些事情，但它让我回到这个版本变得如此混乱，因为我认为它最好地展示了我想要实现的目标。我错过了什么？

编辑（已解决，我希望如此......）：

原来在`Product`模型中有一个别名`alias :options :product_option_types`，它（恕我直言）在错误的地方，因为在一个相当长的模型中间的某个地方（我应该认为它应该更接近`has_many`，但这只是我） .

更何况，`options`竟然是一个阵法，没想到这么震惊。所以，我所做的是扩展产品模型，添加了一个方法，我正在检查`product_type_key`，如下所示：

```
def type_of_product?(type)
  options.each do |opts| 
    if opts.option_type.product_type_key == type
      return true
    end
  end
  false
end 
```

不是最漂亮的方法，但它可以像我期望的那样工作......

# activex - ActiveX 无法截屏托管在同一服务器上的页面

> ID：15398381
> 
> 赞同：2
> 
> 时间：2013-03-13T23:19:26.973
> 
> 标签：activex, screen-capture

我有一个应用程序可以截取网页并创建调整大小的图像。该应用程序基本上是加载一个网页，该网页调用一个 ActiveX 以使用 IE 资源加载网页并截取屏幕截图。这个应用程序已经在 Windows Server 2003 上运行了几年，没有出现任何问题。

但是现在我已经将服务器升级到 Windows Server 2008，屏幕截图操作超时。从测试中，我可以看到它成功地截取了 Internet 上托管的任何网页的屏幕截图……除了托管在同一服务器上的页面。

每当它尝试捕获与应用程序托管在同一服务器上的站点上加载的页面时，它就会超时。ESC 被禁用，似乎所有其他权限都可以，即：它适用于远程页面，但适用于主页。

关于什么可能导致这种情况以及如何解决它的任何想法？

在进一步测试之后，我缩小了失败的原因，因为页面是从与截屏相同的服务器上的 MS-SQL 数据库记录中填充的。在远程服务器上生成的相同页面捕获 ok。我进一步确定该错误并不是 ACASystems DLL 所特有的，因为它还会影响另一个用于从网页创建 MHT 文件的 DLL。此 DLL (Chilkat.MHT) 还使用 IE 即时加载和组装网页，然后将其保存为 .mht 文件。

所以这个问题更多地与 IE 在运行 ActiveX 时从 MS-SQL 组装网页有关。但是要解开这个谜团呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:09:54.263

也许是路由问题（DNS/hostfile ..）？页面是否在与 IE 的本地会话中加载？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:35:08.317

如果不编辑 ActiveX 代码，则无法解决此问题。由于有问题的 DLL 是第三方资源，因此无法进行此类编辑。

在测试了 3 种不同的 ActiveX 加载网页（截取屏幕截图或另存为 .mht）后，发现它们在加载同一服务器上查询 SQL 的页面时都失败了。在联系了 3 位 DLL 开发人员后，他们都告诉我们他们的 ActiveX 对 MS-SQL 没有影响。

不幸的是，我们的测试告诉我们并非如此。在这个阶段，我们只能猜测，但是这篇关于[进程内与进程外执行的](http://consultingblogs.emc.com/jamiethomson/archive/2005/05/16/1414.aspx)文章可能是相关的。

我们解决此问题的解决方法是组装要从传递给页面的请求查询中捕获的页面，而不是从 SQL 查询中填充。这个替代品完美地工作。

# javascript - 同一命名空间中的多个“类”，但在不同的文件中

> ID：15398382
> 
> 赞同：0
> 
> 时间：2013-03-13T23:19:26.943
> 
> 标签：javascript, module-pattern, revealing-module-pattern

我有一个命名空间：`Foo.Bar.Baz`在其中我有`Qux`类。这些是使用显示模块模式定义的：

```
Foo.Bar.Baz = (function ($) {  // the namespace/module

  function Qux() {             // the Qux "class" is contained in this namespace
  // ...
  }

  Qux.prototype.doStuff = function() {
  // ...
  }

  return {                     // public exports from this namespace
    Qux: Qux
  };

}(jQuery)); 
```

现在，在一个单独的文件中，我想将该`Quux`类添加到这个命名空间。我怎么做？当我使用与上面相同的模式时，它会被忽略，因为我猜一个正在覆盖另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:01:20.200

想通了：正如预期的那样，第二个文件的模块在加载后立即覆盖第一个。

在每个文件中，使用以下结构：

```
Foo.Bar.Baz = (function (module, $) { // redefine existing module

  function Qux() {                    // add Qux "class" to it
  // ...
  }

  var exports = {                     // revealing module pattern: define exports
    Qux: Qux,
    // etc.
  };
  $.extend(module, exports);          // merge modules
  return module;

}(Foo.Bar.Baz, jQuery));              // import existing module, and anything else 
```

对其他文件使用相同的结构（包含相同的模块但具有不同的类）。先定义哪个并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:53:06.053

由于您已经为 分配了一个对象`Baz`，您只需要创建一个新属性：

```
Foo.Bar.Baz.Quux = (function() {
    function private() {}
    var privateVar = 'whatever';

    return function() {
        // access private and privateVar
    };
}()); 
```

当然，Quux 无法访问 Qux 的私有成员，这是问题所在吗？

### 编辑

如果要传入对象引用，可以执行以下操作：

```
(function(module) {
    function private() {}
    var privateVar = 'whatever';

    module.Qux = function() {
      // whatever
    };

    module.Quux = function() {
      // different whatever
    };
}(Foo.Bar.Baz)); 
```

这两种方法在功能上是等效的。

# c++ - C++ 标准布尔值 - 开关

> ID：15398389
> 
> 赞同：1
> 
> 时间：2013-03-13T23:19:57.690
> 
> 标签：c++, boolean, switch-statement

在 switch 语句中使用标准的 'true' 和 'false' 是可以的，如下所示：

```
void handle_a_bool (bool value_to_be_handled)
{
    switch (value_to_be_handled)
    {
        case true:
        // Yay.
        break;
        case false:
        // @$#%.
        break;
    };
}; 
```

我想我真正想知道的是 C++ 中的标准“bool”类型是常量还是其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:21:08.393

是的，这是合法的，但你为什么要这样做？只需使用这个：

```
if (value_to_be_handled)
{
    // ...
}
else
{
    // ...
} 
```

基于的版本`switch`只是让代码更难阅读，并没有带来任何额外的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:21:28.697

您可以使用它，但对我而言，它非常难以阅读。

为什么不只使用

```
void handle_a_bool (bool value_to_be_handled) {
    if(value_to_be_handled) {

    }
    else{
    }
}; 
```

?

# visual-studio-2010 - 致命错误 LNK1104：无法打开文件 'libboost_date_time-vc100-mt-gd-1_53.lib' - 文件被忽略，无论我链接什么

> ID：15398392
> 
> 赞同：7
> 
> 时间：2013-03-13T23:20:02.927
> 
> 标签：visual-studio-2010, boost, bjam

我刚刚完成了`bjam`boost ，它似乎仍然会拒绝工作（我已经尝试并放弃了创建这个库）。我所做的是，我启动了 bjam.exe 并链接了：

> **包含目录：** C:\ ... \boost_1_53_0
> **库目录：** C:\ ... \boost_1_53_0\bin.v2\libs

但我仍然得到错误。所以我决定查看文件夹，这显示为所需库的路径：

> C:\ ... \boost_1_53_0\bin.v2\libs\date_time\build\msvc-10.0\debug\link-static\threading-multi\

如果我将此文件夹显式添加到**库目录**中，**则会找到**该库，但在 VCC 中会弹出另一个错误，要求我提供另一个库。
那么如何让bjam做一个**VCC能看懂的文件夹系统**呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T21:00:31.260

添加 C:...\boost_1_55_0\stage\lib 目录对我有用。添加到：

项目属性 -> 配置属性 -> VC++ 目录 -> 库目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T16:45:13.517

将以下链接添加到“配置属性 -> 链接器 -> 常规 -> 附加库目录”也对我有所帮助。'C:\Program Files\boost\boost_1_55_0\stage\lib'

# java - 在 NetBeans 中从 jar 包运行测试类

> ID：15398393
> 
> 赞同：0
> 
> 时间：2013-03-13T23:20:04.243
> 
> 标签：java, testing, netbeans, jar, package

我有 30 个 Java 类和 1 个用于在 jar 包中进行测试的类。

要运行测试类，我需要创建新的 NetBeans 项目，将所有这 30 个类导入 /src ，然后将 1 个测试类导入 /test 并可能向项目添加一些库......所以，毕竟我会能够运行测试类...

还有其他方法吗？

我在 NetBeans 中打开 jar 包并查看所有类，但它不允许我运行测试类，因为那里没有 main 方法..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T00:15:43.233

一堆办法。如果您在 NetBeans 中，并且该类有一个`public static void main()`方法，您只需右键单击它并选择 Run File。

但是您最好将测试编写为 JUnit 或 TestNG 测试 - 这样它就不会包含在您的生产位中，并且连续构建工具和其他东西将能够自动运行您的测试，因为它们看起来像那些工具预计。

# javascript - javascript：在 iframe 中显示表单

> ID：15398394
> 
> 赞同：0
> 
> 时间：2013-03-13T23:20:12.527
> 
> 标签：javascript

我是编程世界的新手（我的意思是非常新，比如 2 个月大）......所以我为这个非常基本的问题道歉。我已经为这个问题苦苦挣扎了整整两天，不知道该怎么做。

1.  有一个带有隐藏字段的表单的常规页面。选择一个选项后，会弹出字段（姓名、电子邮件等）。
2.  我在同一页面上有一个 iframe。
3.  **我想在 iframe 中显示实际的表单/字段（姓名、电子邮件等）。**
4.  提交表单并将数据发送到 mysql（执行传输的 php 文件）。（这部分做完了，全部在iframe之外，除了最后的消息）

尝试创建一个函数，尝试了 TARGET（这个显示了 iframe 内表单的实际结果 - 成功 - 数据发送到 mysql..等）。但是表单仍然在 iframe 之外。

任何建议将不胜感激！

# excel - 如果键入的唯一代码匹配，则将整行从另一张表复制到表 1

> ID：15398398
> 
> 赞同：0
> 
> 时间：2013-03-13T23:20:36.467
> 
> 标签：excel, copy, excel-2007, excel-2010, excel-2003

[https://www.dropbox.com/s/f83y17dedajbsz8/example.xls](https://www.dropbox.com/s/f83y17dedajbsz8/example.xls)

这是我希望它在其中工作的快速示例工作簿。

现在，工作表 1（主）需要手动将所有其他工作表中的数据复制到其中。目前，我正在做的是我有一个我需要的唯一代码的列表，然后我转到工作表并 ctrl+F 获取该代码，然后手动将该行复制+粘贴到工作表 1（主）中。这可能会有点耗时。

我想要做的只是简单地将任何唯一代码键入到工作表 1 上 D 列的任何单元格中，然后如果该代码与任何其他工作表上的代码匹配，那么整行将复制到工作表 1。

这很容易做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:26:11.610

下面的 VBA 应该可以解决问题，您需要将其复制到`Sheet1 (Main)`.

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim Sheet As Worksheet
Dim Index As Integer
Dim Count As Integer
Dim Match As Range

    If Target.Rows.Count > 1 Or Target.Columns.Count > 1 Then
        ' You've done something that has edited lots of cells. Cant handle this.
        Exit Sub
    End If

    Set Sheet = ThisWorkbook.Worksheets("Main")

    If Not Intersect(Sheet.Range("D:D"), Target) Is Nothing Then
        ' The edited cell falls in the range D:D
        Count = ThisWorkbook.Worksheets.Count

        For Index = 1 To Count
            If Not ThisWorkbook.Worksheets(Index).Name = Sheet.Name Then
                Set Match = ThisWorkbook.Worksheets(Index).Range("D:D").Find(What:=Target.Value, LookIn:=xlValues)
                If Not Match Is Nothing Then
                    'copy the line across
                    ThisWorkbook.Worksheets(Index).Range("A" & Match.Row & ":E" & Match.Row).Copy Sheet.Range("A" & Target.Row)
                    Exit For
                End If
            End If
        Next Index

    End If

    If Match Is Nothing Then
    ' optional, if the target string is  not found clear the line.
        Sheet.Range("A" & Target.Row & ":E" & Target.Row).ClearContents
    End If

End Sub 
```

# c# - 表达式中的编译错误

> ID：15398400
> 
> 赞同：1
> 
> 时间：2013-03-13T23:20:44.753
> 
> 标签：c#

所以我在当前代码中遇到了一个关于 BMI 计算器的小问题。我在这里搜索了其他 BMI 计算器主题，但似乎没有一个对我有帮助。请记住，我对 ASP.Net 还很陌生，还没有真正掌握任何东西！有人告诉我 JS 会让我的生活更轻松，但我**必须**在 ASP.net 中这样做。

对于 BMI 计算器，我使用英尺、英寸和磅的标准测量值。有三个文本框保存此信息。对于我的代码的计算部分，我希望事件处理程序检查是否仅在文本框中输入了数值，然后计算个人 BMI。计算结果应出现在标题为“结果”的第四个文本框中。下面的代码是据我所知。

```
//*************Event Handler for the calculation portion*****************

void calcUS_Click(object sender, EventArgs e)
{
    string Heightinfeet = heightus.Text;
    string Heightininches = heightus1.Text;
    string Weight = weightus.Text;

    double number;

    string bmi = resultus.Text;

    bool isHeightinfeet = Double.TryParse(Heightinfeet, out number);
    bool isHeightininches = Double.TryParse(Heightininches, out number);
    bool isWeight = Double.TryParse(Weight, out number);

    if (isHeightinfeet && isHeightininches && isWeight)
    {
        bmi = (Weight / ((Heightinfeet * 12) + Heightininches)) * ((Heightinfeet * 12) + Heightininches))) * 703);
    }

    else
    {
        Response.Write("Please type a numeric value into each of the text boxes.");
    }
}
//*****************End of calculation Event Handler******************* 
```

一切似乎都在工作，除了实际的计算部分

```
if (isHeightinfeet && isHeightininches && isWeight)
{
    bmi = (Weight / ((Heightinfeet * 12) + Heightininches)) * ((Heightinfeet * 12) + Heightininches))) * 703);
} 
```

在上面的公式中，当我将鼠标悬停在“Heightinfeet”和“Heightininches”上时，出现“运算符“*”不能应用于“字符串”或“整数”类型的操作数的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:26:50.793

这是我可以做的一点重构

```
int Heightinfeet;
double Heightininches;
double Weight;

if (int.TryParse(heightus.Text, out Heightinfeet) && 
    Double.TryParse(heightus1.Text, out Heightininches) && 
    Double.TryParse(weightus.Text, out Weight))
{
  bmi = (Weight / ((Heightinfeet * 12) + Heightininches)) * ((Heightinfeet * 12) + Heightininches))) * 703);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:28:01.217

是的，您不能`int`在这种情况下对数字“12”和在这种情况下的字符串进行“*”操作`Heightinfeet`

所以你应该首先将字符串解析成 int 或 double 来使用。

`(int.Parse(Heightinfeet) * 12)` 或者它是双 `(double.Parse(Heightinfeet) * 12)`

# z3 - 集合 z3 中的最大值

> ID：15398403
> 
> 赞同：2
> 
> 时间：2013-03-13T23:21:06.687
> 
> 标签：z3

我是使用 Z3 的新人。

想知道如何计算一个集合和两个不同集合的最大值。

例如： `[1, 6, 5]`- 更大的是 6 `[1, 6, 5]`e `[10, 7, 2]`- 更大的是 6

我使用以下代码进行设置：

```
 (declare-sort Set 0)

(declare-fun contains (Set Int) bool)

( declare-const set Set )
( declare-const distinct_set Set )

( declare-const A Int )
( declare-const B Int )
( declare-const C Int )

( assert ( =  A 0 ) )
( assert ( =  B 1 ) )
( assert ( =  C 2 ) )

( assert ( distinct A C) )
( assert ( distinct set distinct_set ) )

(assert
 (forall ((x Int))
         (= (contains set x) (or (= x A) (= x C))))) 
```

现在想知道如何计算集合（set）中的最大值和集合（set和distinct_set）中的最大值。

如果它适用于所有整数只是因为它很容易做到：

```
(define-fun max ((x Int) (y Int)) Int
  (ite (< x y) y x)) 
```

但是我不能通过它们的整数离开集合，即获取已设置的值。

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T02:13:50.183

以下编码对您的目的是否合理？它也可以[在这里](http://rise4fun.com/Z3/awiC)在线获得。

```
; We Enconde each set S of integers as a function S : Int -> Bool
(declare-fun S1 (Int) Bool)
; To assert that A and C are elements of S1, we just assert (S1 A) and (S1 C) 
(declare-const A Int)
(declare-const C Int)
(assert (S1 A))
(assert (S1 C))
; To say that B is not an element of S1, we just assert (not (S1 B))
(declare-const B Int)
(assert (not (S1 B)))

; Now, let max_S1 be the max value in S1
(declare-const max_S1 Int)
; Then, we now that max_S1 is an element of S1, that is
(assert (S1 max_S1))
; All elements in S1 are smaller than or equal to max_S1
(assert (forall ((x Int)) (=> (S1 x) (not (>= x (+ max_S1 1))))))

; Now, let us define a set S2 and S3
(declare-fun S2 (Int) Bool)
(declare-fun S3 (Int) Bool)
; To assert that S3 is equal to the union of S1 and S2, we just assert
(assert (forall ((x Int)) (= (S3 x) (or (S1 x) (S2 x)))))

; To assert that S3 is not equal to S1 we assert
(assert (exists ((x Int)) (not (= (S3 x) (S1 x)))))

(check-sat)

; Now let max_S3 be the maximal value of S3
(declare-const max_S3 Int)
(assert (S3 max_S3))
(assert (forall ((x Int)) (=> (S3 x) (not (>= x (+ max_S3 1))))))

; the set of constraints is still satisfiable
(check-sat)

; Now, let us assert that max_S3 < max_S1.
; It should be unsat, since S3 is a super set of S1
(assert (< max_S3 max_S1))
(check-sat) 
```

# servicestack - 如何使用 servicestack json 客户端将参数传递给发布请求

> ID：15398406
> 
> 赞同：1
> 
> 时间：2013-03-13T23:21:21.123
> 
> 标签：servicestack

我无法让我的 servicestack json 客户端格式化 REST Post 请求。

我正在尝试使用原始 json 正文发布到我的登录服务

```
{"Uname":"joe", "Password":"test"} 
```

但是 post 方法实际上是错误地发送了这个

```
{"login":""} 
```

这是我正在使用的代码。

```
 JsonServiceClient.HttpWebRequestFilter = filter =>
        {
            filter.Headers.Add(string.Format("X-API-Key: {0}", "test"));
        };

   var client = new JsonServiceClient(url);
   var url = "/login";
   var login = new LoginModel { Uname = uname, Password = pwd };
   return client.Post<UserCredentials>(url, login); 
```

我应该如何构造参数对象，以便它正确地序列化为 post 请求中的预期原始值？此外，我可以只传入一个字典或更通用的对象，这样我就不必创建一个 LoginModel 类或结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:52:31.860

事实证明，问题在于我在我的 LoginModel 中使用了公共字段而不是公共属性。将其更改为属性修复了它。

# ruby-on-rails - 在 Rails 输入和解析的 URL 之间，最后的斜杠被替换为逗号

> ID：15398414
> 
> 赞同：0
> 
> 时间：2013-03-13T23:22:28.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, shopify

我正在开发一个通过 Shopify API 处理数据的 Rails 应用程序，但是当通过代理请求某些资源（在 Shopify 中的应用程序设置中设置）时，它刚刚开始给我 500 个错误。

该请求大致如下：

```
/app/my-application/customers/1234.json 
```

但是 Heroku 上的错误日志显示了一个 GET 请求：

```
/app/my-application/cusotmers,1234.json 
```

我正在使用最近更新的[Shopify/shopify_api](https://github.com/Shopify/shopify_api) gem，否则自此错误开始发生以来，配置/路由中的其他任何内容都没有改变。

非常感谢任何帮助或指示！

*如果上面缺少任何相关信息，我会很乐意提供更多信息。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:54:07.193

这是 Shopify 将请求代理到应用程序的服务中的一个错误。

我刚刚为这个问题部署了一个修复程序。我对此问题负全部责任，并将努力改进我们的测试以避免将来出现类似问题。

# php - 转换 PHP 数组以在 Javascript 中使用

> ID：15398416
> 
> 赞同：0
> 
> 时间：2013-03-13T23:22:33.803
> 
> 标签：php, javascript, jquery

我有一个要插入到 Javascript 图形库中的多维 PHP 数组。如何将 PHP 数组插入到创建`Highcharts.Chart`对象的 JS 代码中？

我注意到 JS 变量`series`包含一个对象数组，而在 PHP 中一切都在数组中。

**Jsfiddle：http:** [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

**PHP 数组** *（的结果`print_r($array)`）*

```
Array
(
    [boston] => Array
        (
            [0] => 4623
            [1] => 18094
            [2] => 12176
            [3] => 6521
            [4] => 4559
            [5] => 6450
            [6] => 5814
        )

    [chicago] => Array
        (
            [0] => 1240
            [1] => 9923
            [2] => 9546
            [3] => 4568
            [4] => 3384
            [5] => 4797
            [6] => 4469
        )

    [philadelphia] => Array
        (
            [0] => 0
            [1] => 1529
            [2] => 4063
            [3] => 838
            [4] => 547
            [5] => 1443
            [6] => 1209
        )
) 
```

**Javascript 数组示例：**

```
chart = new Highcharts.Chart({
   series: [{
        name: 'boston',
        data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
    }, {
        name: 'chicago',
        data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
    }, {
        name: 'philadelphia',
        data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
    }]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:26:45.350

json_encode($array) 会给你一个 javascript 可解析数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:26:57.643

像这样的东西应该将您的数据转换为您在 js 中期望的格式：

```
<?php
$newData = array();
foreach($data as $city=>$values){
    $newData[] = array('name'=>$city,'data'=>$values)
}

echo json_encode($newData); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T23:31:59.240

这就是我开始组织一些数据的方式：

```
<?
$data[boston] = array(1,2,3,4);
$data[new_york] = array(6,12,18,24);
print_r($data);

foreach ($data as $key => &$value) {
  echo "name: $key \n";
  echo "data: [" . implode(",", $value) . "]\n";
}
?> 
```

# objective-c - NSOpenGLPixelFormat 的 NSOpenGLPFAColorSize 的含义

> ID：15398419
> 
> 赞同：2
> 
> 时间：2013-03-13T23:22:44.793
> 
> 标签：objective-c, macos, cocoa, opengl

我不清楚在创建 NSOpenGLPixelFormat 时为 NSOpenGLPFAColorSize 设置什么值。从文档中可以看出：

> 值是一个非负缓冲区大小规范。首选与指定大小最接近的颜色缓冲区。如果未指定，OpenGL 会选择与屏幕匹配的颜色大小。

但这是否意味着每个像素的位数？还是每个组件的位数？例如，如果将其设置为 24 并解释为**每像素位数，**则这意味着每种 RGBA 颜色的每个分量都有 6 位，整个 RGBA 像素总共有 24 位。

但是，如果将其解释为**每个分量的位数，**那么这将意味着每个红色、绿色、蓝色和 alpha 分量都有 24 位，以构成 96 位 RGBA 像素。

我倾向于认为这意味着**每个组件的位数，**因为我在示例代码中看到的值范围为 8、16、24、32 ，当解释为~~**每个组件的位数**~~~~时，除了 24 之外的所有值都是有意义的。~~**最好有一些明确的答案。**

 ****注意：**经过编辑以反映 OpenGL 中的像素是 RGBA 而不是 RGB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:09:33.347

After scouring the documentation further I came across the `NSOpenGLPFAColorFloat` attribute, which according to the [documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOpenGLPFAColorFloat):

> A Boolean attribute. If present, this attribute indicates that only renderers that are capable using buffers storing floating point pixels are considered. This should be accompanied by a NSOpenGLPFAColorSize of 64 (for half float pixel components) or 128 (for full float pixel components). Note, not all hardware supports floating point color buffers thus the returned pixel format could be NULL.

With that additional information it must mean **bits per pixel**.

I did some experimenting as well, setting `NSOpenGLPFAColorSize` to each of 8, 16, 24 & 32 and then checking what I got back. In each case I was returned a pixel format with `NSOpenGLPFAColorSize` set to 32 - meaning 32-bits per RGBA pixel. Just passing `NSOpenGLPFAColorFloat` with nothing set for the Color Size is enough to get back a pixel format with 64-bits per pixel.**

# java - Java + JNA：找不到指定的过程

> ID：15398422
> 
> 赞同：3
> 
> 时间：2013-03-13T23:23:01.487
> 
> 标签：java, dll, jna

我正在尝试使用 Visual Studio 创建一个 dll 文件并在 Java 项目中使用/访问它。该库似乎已加载，但总是抛出相同的异常：线程“主”java.lang.UnsatisfiedLinkError 中的异常：查找函数“函数”时出错：找不到指定的过程。我的 C/C++ 技能不是最好的，所以问题可能就在那里。我尝试使用网上找到的类、命名空间、静态方法和其他人员来编辑 h 和 cpp 文件，但无事可做。我还看到其他关于 Depency Walker Tool 的帖子，但它无法打开我的 dll，我还看到编译器在函数名称中添加了一些奇怪的后缀，因为我知道可以通过使用“estern”来避免它'C'”在 h 或 cpp 文件中，但我做不到。

我的界面：

```
import com.sun.jna.Library;
import com.sun.jna.Native;

public interface SimpleDll extends Library {

    SimpleDll instance = (SimpleDll) Native.loadLibrary("SimpleDll", SimpleDll.class);

    void function();

} 
```

我的主要课程：

```
public class Test_Dll {

    public static void main(String[] args) {
        SimpleDll simpleDll = SimpleDll.instance;

        simpleDll.function();
    }
} 
```

我的 h 文件：

```
#ifndef SIMPLEDLL
#define SIMPLEDLL

namespace simpeDll{

    static void function();

}
#endif 
```

我的 cpp 文件：

```
#include "stdafx.h"
#include "simpleDll.h"
#include <stdexcept>

using namespace simpeDll;

static void function(){

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:45:23.907

1.  确保在`simpleDll`命名空间之外声明你的函数。
2.  确保用/装饰它`extern "C"`
3.  确保公开您的功能`__declspec(dllexport) void __cdecl function();`或使用[模块定义文件](http://msdn.microsoft.com/en-us/library/hyx1zcd3%28v=vs.110%29.aspx)

# android - 没有使用 SQLite，但我收到“android.database.sqlite.SQLiteDiskIOException”异常

> ID：15398426
> 
> 赞同：0
> 
> 时间：2013-03-13T23:23:29.933
> 
> 标签：android, sqlite, exception, exception-handling

我正在使用 BugSense 来跟踪我的应用程序中的错误，它刚刚捕获了一个与 SQLite 相关的错误……问题是我不使用 SQLite。我虽然使用 sharedPreferences 和 ads，但根本没有 SQLite ......

为什么会这样？SD卡坏或没有空间？为了以防万一，我应该用 try catch 块包围 sharedPreferences 代码吗？

这是堆栈跟踪：

```
android.database.sqlite.SQLiteDiskIOException: disk I/O error
at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2074)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1014)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:962)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1043)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1036)
at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:771)
at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:215)
at android.webkit.WebViewDatabase.initDatabase(WebViewDatabase.java:227)
at android.webkit.WebViewDatabase.init(WebViewDatabase.java:209)
at android.webkit.WebViewDatabase.access$000(WebViewDatabase.java:38)
at android.webkit.WebViewDatabase$1.run(WebViewDatabase.java:190) 
```

还有来自 BugSense 的更多数据：

![在此处输入图像描述](../Images/8256ff70b4a054009c9e7c5c4617233d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:28:51.480

> 为什么会这样？

您正在使用`WebView`，并且它在幕后使用 SQLite（用于其缓存 IIRC）。至于为什么会出现磁盘 I/O 错误，鉴于您面前的信息，这很难确定。

> SD卡坏或没有空间？

`WebView`将其数据库存储在内部存储中，因此它不会是坏的 SD 卡。

内部存储空间不足当然是可能的。

> 为了以防万一，我应该用 try catch 块包围 sharedPreferences 代码吗？

由于这与您的 无关`SharedPreferences`，我怀疑它会有所帮助。

此外，除非您经常看到这种情况，否则我会认为这是特定于设备的问题（例如，内部存储不足）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T03:44:05.453

我发现如果您在同一个窗口中使用超过 2 个 webviews，可能会发生 SQLiteDiskIOException。所以建议在你的活动中只使用单个 webview

# python - 求解二次方程

> ID：15398427
> 
> 赞同：16
> 
> 时间：2013-03-13T23:23:37.027
> 
> 标签：python, python-2.7

我的程序似乎没有给我正确的解决方案。有时会，有时不会。我找不到我的错误。有什么建议么？

```
import math

a,b,c = input("Enter the coefficients of a, b and c separated by commas: ")

d = b**2-4*a*c # discriminant

if d < 0:
    print "This equation has no real solution"
elif d == 0:
    x = (-b+math.sqrt(b**2-4*a*c))/2*a
    print "This equation has one solutions: ", x
else:
    x1 = (-b+math.sqrt(b**2-4*a*c))/2*a
    x2 = (-b-math.sqrt(b**2-4*a*c))/2*a
    print "This equation has two solutions: ", x1, " and", x2 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T23:25:24.057

此行导致问题：

```
(-b+math.sqrt(b**2-4*a*c))/2*a 
```

`x/2*a`被解释为`(x/2)*a`。你需要更多的括号：

```
(-b + math.sqrt(b**2 - 4*a*c)) / (2 * a) 
```

另外，如果您已经存储了`d`，为什么不使用它呢？

```
x = (-b + math.sqrt(d)) / (2 * a) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-14T16:42:16.597

在这里，您应该每次都给您正确的答案！

```
a = int(input("Enter the coefficients of a: "))
b = int(input("Enter the coefficients of b: "))
c = int(input("Enter the coefficients of c: "))

d = b**2-4*a*c # discriminant

if d < 0:
    print ("This equation has no real solution")
elif d == 0:
    x = (-b+math.sqrt(b**2-4*a*c))/2*a
    print ("This equation has one solutions: "), x
else:
    x1 = (-b+math.sqrt((b**2)-(4*(a*c))))/(2*a)
    x2 = (-b-math.sqrt((b**2)-(4*(a*c))))/(2*a)
    print ("This equation has two solutions: ", x1, " or", x2) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-15T00:05:48.227

接受复杂的根作为解决方案怎么样？

```
import math

# User inserting the values of a, b and c

a = float(input("Insert coefficient a: "))
b = float(input("Insert coefficient b: "))
c = float(input("Insert coefficient c: "))

discriminant = b**2 - 4 * a * c

if discriminant >= 0:
    x_1=(-b+math.sqrt(discriminant))/2*a
    x_2=(-b-math.sqrt(discriminant))/2*a
else:
    x_1= complex((-b/(2*a)),math.sqrt(-discriminant)/(2*a))
    x_2= complex((-b/(2*a)),-math.sqrt(-discriminant)/(2*a))

if discriminant > 0:
    print("The function has two distinct real roots: ", x_1, " and ", x_2)
elif discriminant == 0:
    print("The function has one double root: ", x_1)
else:
    print("The function has two complex (conjugate) roots: ", x_1, " and ", x_2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-02T13:33:26.377

```
# syntaxis:2.7
# solution for quadratic equation
# a*x**2 + b*x + c = 0

d = b**2-4*a*c # discriminant

if d < 0:
    print 'No solutions'
elif d == 0:
    x1 = -b / (2*a)
    print 'The sole solution is',x1
else: # if d > 0
    x1 = (-b + math.sqrt(d)) / (2*a)
    x2 = (-b - math.sqrt(d)) / (2*a)
    print 'Solutions are',x1,'and',x2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-04T05:23:09.423

下面是求解二次方程的程序。

例如：求解 x2 + 3x – 4 = 0

这个二次方恰好是因数：

x2 + 3x – 4 = (x + 4)(x – 1) = 0

我们已经知道解是 x = –4 和 x = 1。

[![在此处输入图像描述](../Images/0113b206e3f96af84cc31e37eabd1097.png)](https://i.stack.imgur.com/3mqrR.png)

```
 # import complex math module
    import cmath

    a = 1
    b = 5
    c = 6

    # To take coefficient input from the users
    # a = float(input('Enter a: '))
    # b = float(input('Enter b: '))
    # c = float(input('Enter c: '))

    # calculate the discriminant
    d = (b**2) - (4*a*c)

    # find two solutions
    sol1 = (-b-cmath.sqrt(d))/(2*a)
    sol2 = (-b+cmath.sqrt(d))/(2*a)

    print('The solution are {0} and {1}'.format(sol1,sol2)) 
```

资料来源：[解二次方程的 Python 程序](https://coderforevers.com/python/python-program/quadratic-equation/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-18T14:33:13.783

```
import math   
a = int(input("Enter the coefficients of a: "))
b = int(input("Enter the coefficients of b: "))
c = int(input("Enter the coefficients of c: "))

d = b**2-4*a*c # discriminant

if d < 0:
    print ("This equation has no real solution")
elif d == 0:
    x = (-b+math.sqrt(b**2-4*a*c))/2*a
    print (("This equation has one solutions: "), x)
#add the extra () above or it does not show the answer just the text.
else:
    x1 = (-b+math.sqrt((b**2)-(4*(a*c))))/(2*a)
    x2 = (-b-math.sqrt((b**2)-(4*(a*c))))/(2*a)
    print ("This equation has two solutions: ", x1, " or", x2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-07T17:36:52.993

一个线性求解二次方程

```
from math import sqrt
s = lambda a,b,c: {(-b-sqrt(d))/2*a,(-b+sqrt(d))/2*a} if (d:=b**2-4*a*c)>=0 else {}
roots_set = s(int(input('a=')),int(input('b=')),int(input('c=')))
print(roots_set,f'number of roots {len(roots_set)}') 
```

[一行python求解二次方程视频](https://www.youtube.com/watch?v=AL-mfRRFyoI)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-21T16:00:38.857

**通过键盘输入**

```
a=float(input("enter the 1st number : "))
b=float(input("enter the 2nd number : "))
c=float(input("enter the 3rd number : ")) 
```

**计算判别式**

```
d = (b**2) - (4*a*c) 
```

**可能的解决方案是**

```
sol_1 = (-b-(0.5**d))/(2*a)
sol_2 = (-b+(0.5**d))/(2*a) 
```

**打印结果**

```
print('The solution are  %0.f,%0.f'%(sol_1,sol_2)) 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2017-03-19T21:12:38.390

```
<code>
import cmath
import math
print(" we are going to programming second grade equation in python")
print(" a^2 x + b x + c =0")

num1 = int(input(" enter A please : "))
num2 = int(input(" enter B please : "))
num3 = int(input(" enter c please : "))
v = num2*num2 - 4 *num1 * num3
print(v)
if v < 0 :
    print("wrong values")
else:
    print("root of delta =", v)
    k= math.sqrt(v)

def two_sol(x,y) :
    x_f= (-y + v)/(4*x)
    x_s =(-y - v)/(4*x)
    return x_f , x_s

def one_sol(x):
    x_f = (-y + v) / (4 * x)

if v >0 :
    print("we have two solution :" ,two_sol(num1,num2)) 
elif v == 0:
    print( "we have one solution :" , one_sol(y)) 
else:
    print(" there is no solution !!")
</code> 
```

# c# - Telerik 工具栏错误

> ID：15398430
> 
> 赞同：1
> 
> 时间：2013-03-13T23:23:45.637
> 
> 标签：c#, asp.net-mvc, telerik

我正在尝试从 Telerik 安装可编辑网格。我有一个错误：

> 错误 13
> “Telerik.Web.Mvc.UI.Fluent.GridDataKeyBuilder”不包含“ToolBar”的定义，并且没有扩展方法“ToolBar”接受“Telerik.Web.Mvc.UI.Fluent.GridDataKeyBuilder”类型的第一个参数可以找到（您是否缺少 using 指令或程序集引用？） c:\Users\dmccray11\Desktop\TheManhattanProject\Views\Home\PartialSlagView.cshtml 42 10 TheManhattanProject

这是呈现此错误的代码行：

```
.Grid(Model)
.Name("Grid")
.DataKeys(keys => keys.Add(c => c.analysisid)
.ToolBar(commands => commands.Insert().ButtonType(type).ImageHtmlAttributes(new { style = "margin-left:0" }))) 
```

有谁知道这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:25:38.023

确保您已调整`Views`目录 web.config 以包含 Telerik 程序集。

# biztalk - 如何从其他程序集/模式中引用 MSH_25_GLO_DEF 模式

> ID：15398432
> 
> 赞同：1
> 
> 时间：2013-03-13T23:23:57.127
> 
> 标签：biztalk, biztalk-2010, btahl7, biztalk-schemas

我已经使用 BTAHL7V2X 模式（MSH_25_GLO_DEF 等）构建了一个程序集。

在另一个程序集中，我需要创建一个模式，其中一个元素的类型为 MSH_25_GLO_DEF。

在我的 BTAHL7V2XCommon 程序集中，我有：

```
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns="http://microsoft.com/HealthCare/HL7/2X" targetNamespace="http://microsoft.com/HealthCare/HL7/2X" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:annotation>
    <xs:appinfo>
      <b:schemaInfo root_reference="MSH_25_GLO_DEF" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" />
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="MSH_25_GLO_DEF">
  ... 
```

在我的另一个程序集中，我有一个如下所示的架构：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns="http://mycompany.com/Custom/HL7/2X" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:ns0="http://microsoft.com/HealthCare/HL7/2X" targetNamespace="http://mycompany.com/Custom/HL7/2X" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import schemaLocation="BTAHL7Schemas.MSH_25_GLO_DEF" namespace="http://mycompany.com/Custom/HL7/2X"/>
  <xs:include schemaLocation="ORU_R01_23_GLO_DEF.xsd" />
  <xs:annotation>
    <xs:appinfo>
      <b:schemaInfo standards_version="HL7.DBVersion.1_5" document_type="HL7 2X Schema" version="2.0.0104.0.2.0" root_reference="ORU_R01_23_GLO_DEF" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" />
      <b:references>
        <b:reference targetNamespace="http://mycompany.com/Custom/HL7/2X/2.3/ORU/DataTypes" />
        <b:reference targetNamespace="http://microsoft.com/HealthCare/HL7/2X" />
        <b:reference targetNamespace="http://mycompany.com/Custom/HL7/2X/2.3/ORU/Segments" />
        <b:reference targetNamespace="http://mycompany.com/Custom/HL7/2X/2.3/ORU/Tables" />
      </b:references>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="ORU_R01_23_ALL">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="1" maxOccurs="1" name="MSH_25_GLO_DEF" type="ns0:MSH_25_GLO_DEF" />
        <xs:element minOccurs="1" maxOccurs="1" ref="ORU_R01_23_GLO_DEF" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我添加了对包含 MSH 标头的 BTAHL7V2X 程序集的引用，如果我在对象浏览器中查看引用的程序集，我可以看到 MSH_25_GLO_DEF，但我总是收到一条错误消息“ [http://microsoft.com/HealthCare/ HL7/2X:MSH_25_GLO_DEF](http://microsoft.com/HealthCare/HL7/2X:MSH_25_GLO_DEF)未声明，当我查看我的架构时。

我还尝试将导入引用更改为包含：

```
<xs:include schemaLocation="BTAHL7Schemas.MSH_25_GLO_DEF" /> 
```

但在查看架构时会出现不同的错误：

```
The targetNamespace 'http://microsoft.com/HealthCare/HL7/2X' of included/redefined schema should be the same as the targetNamespace 'http://mycompany.com/Custom/HL7/2X' of the including schema. 
```

是否有在另一个程序集中引用 BizTalk 架构的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:51:03.730

看看这个： [http ://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/d40d2c15-5c91-45c9-877d-2559802d1b1e](http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/d40d2c15-5c91-45c9-877d-2559802d1b1e)

希望有帮助

```
<xs:schema ... targetNamespace="http://mycompany.com/Custom/HL7/2X">
        <xs:import schemaLocation="BTAHL7Schemas.MSH_25_GLO_DEF" namespace="http://microsoft.com/HealthCare/HL7/2X"/>
    <b:schemaInfo ... root_reference="ORU_R01_23_ALL" ... /> 
```

# paypal-sandbox - 如何在新的贝宝沙盒中启用数字交付

> ID：15398442
> 
> 赞同：0
> 
> 时间：2013-03-13T23:24:49.880
> 
> 标签：paypal-sandbox

我正在重新创建我的测试环境。我创建了新的企业和买家帐户。我记得最好设置企业帐户，包括 IPN 信息。

我尝试使用 ExpressCheckOut 进行购买，但收到一条错误消息：

> 您未注册接受数字交付商品的付款。

我们正在销售订阅，因此我们实际上是在执行数字交付。好像我记得必须让 PayPal CS 人员在我们的真实账户上启用此功能。我需要在沙盒中做些什么特别的事情吗？

我开了一个新的 PayPal 账户来替换我的开发者账户。使用公司真实账户似乎不是一个好主意。这是出乎意料的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:04:53.410

该设置需要通过 PayPal 代理启用。继续并通过我的个人资料详细信息向我发送电子邮件，包括您的测试帐户电子邮件地址，我将为您启用此功能。

# php - 在 TideSDK 中不使用 php 将表单数据插入 sqlite3 查询

> ID：15398443
> 
> 赞同：0
> 
> 时间：2013-03-13T23:24:56.587
> 
> 标签：php, sqlite, tidesdk

我一直在寻找几个小时，这可能只是我是一个新手，但我很难弄清楚如何动态地将文本输入到 sqlite3 查询中，因为它们不接受变量（或者我相信）。

这是我正在尝试做的事情：

用户当前可以在我的 TideSDK 应用程序中查看食谱 - 食谱的内容是从名为 recipes.db 的文件生成的

此代码将单个配方加载到主屏幕中：

```
function doMainChange70() {
    var db = Ti.Database.openFile(Ti.Filesystem.getFile(Ti.Filesystem.getApplicationDataDirectory(), 'recipes.db'));
    var rows = db.execute("SELECT * FROM recipe WHERE number = '70'");
    while (rows.isValidRow()) {
    $('#foodFoto').empty();
    $('#titleArea').empty();
    $('#servings').empty();
    $('#tagline').empty();
    $('#ingredients').empty();
    $('#directions').empty();
    $('#nutrition').empty();
    $('#foodFoto').append("<img src='foodPics/r" + rows.fieldByName('number') + ".jpg' />");
    $('#titleArea').append("<p>" + rows.fieldByName('title') + '</p>');
    $('#servings').append("<p>" + rows.fieldByName('servings') + '</p>');
    $('#tagline').append("<p>" + rows.fieldByName('tagline') + '</p>');
    //$('#ingredients').
    $('#directions').append("<p>" + rows.fieldByName('directions') + '</p>');
    $('#nutrition').append("<p>" + rows.fieldByName('nutrition') + '</p>');
    $('#editBtn').remove();
    $('#mainBtns').append("<a href='#' id='editBtn'" + 'onclick=' + 'editRecipe' + rows.fieldByName('number') + "()><img src='RecipeButton5.png' /></a>");
    rows.next();
    rows.close();
    db.close();
    return false;
} 
```

}

我现在希望用户能够编辑配方。目前，当单击编辑按钮时，配方的所有字段都会更改为输入标签，用户可以编辑：

```
function editRecipe70() {
$('#editBtn').removeAttr('onclick');
var db = Ti.Database.openFile(Ti.Filesystem.getFile(Ti.Filesystem.getApplicationDataDirectory(), 'recipes.db'));
var rows = db.execute("SELECT * FROM recipe WHERE number = '70'");
while (rows.isValidRow()) {
$('#editBtn').html("<img src='saveRecipeButton.png' />");
$('#formContainer').empty();
$('#formContainer').append("<form id='sendEdit'><textarea type='text' name='title' id='title'>" + rows.fieldByName('title') + "</textarea><br>" + "<textarea type='text' name='servings'>" + rows.fieldByName('servings') + "</textarea><br>" + "<textarea type='text' name='tagline'>" + rows.fieldByName('tagline') + "</textarea><br>" + "<textarea type='text' name='directions'>" + rows.fieldByName('directions') + "</textarea><br>" + "<textarea type='text' name='nutrition'>" + rows.fieldByName('nutrition') + "</textarea><br>" + "<input type='submit'></form>"); 
```

}

我的问题是，此时我无法找到一种方法来捕获用户在输入字段（或更准确地说是文本区域）中放置的内容并将其放入 sqlite3 查询字符串中。

我可以用这样的东西查询 js 中的数据库：

```
UPDATE recipeTable SET title='best recipe ever' WHERE number='70'; 
```

但没有这样的（这是我需要的）：

```
UPDATE recipeTable SET title = '[formValueForTitle]' WHERE number = '70'; 
```

希望我是有道理的，我很抱歉这是我的第一个问题。我在网站上查看了很多帖子，直接的解决方案似乎是使用 php 预处理表单值，但我已经阅读了 TideSDK 中的 php 模块现在没有 sqlite3 支持，我无法将处理过的代码回到 index.html 以在 js 中运行。

这么长这么短，我想找到一种让用户编辑食谱的方法，但我完全被卡住了。任何方向将不胜感激！

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:41:04.253

这就是我的做法：

```
 var inputfromform = 'I got this back from the form';
  var number = 7;
  db = Ti.Database.open(dbname); // or openFile etc
  db.execute("BEGIN IMMEDIATE TRANSACTION;");
  db.execute("UPDATE recipeTable SET title = ? WHERE number = ?;", inputfromform, number);
  db.execute("COMMIT TRANSACTION;");
  db.close(); 
```

希望这可以帮助

# c++ - 三态复选框 Win32 运行时

> ID：15398445
> 
> 赞同：2
> 
> 时间：2013-03-13T23:25:01.323
> 
> 标签：c++, winapi

当我在运行时将 BS_AUTO3STATE 样式添加到对话框窗口上的默认样式复选框时；

```
this->Style |= BS_AUTO3STATE; // wrapper of Get/SetWindowLongPtr, ignore the specifics 
```

..它变成了一个组框，而不是一个三态复选框。我究竟做错了什么？

我有错误的控制方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T00:07:45.840

这个问题是由于这些`BS_Xxx`值实际上没有在标头中定义为位标志。相反，它们的值只是线性增加：

```
#define BS_PUSHBUTTON       0x00000000L
#define BS_DEFPUSHBUTTON    0x00000001L
#define BS_CHECKBOX         0x00000002L
#define BS_AUTOCHECKBOX     0x00000003L
#define BS_RADIOBUTTON      0x00000004L
#define BS_3STATE           0x00000005L
#define BS_AUTO3STATE       0x00000006L
#define BS_GROUPBOX         0x00000007L
#define BS_USERBUTTON       0x00000008L
#define BS_AUTORADIOBUTTON  0x00000009L
// ... and so on 
```

请注意，`BS_GROUPBOX`（这是您得到但不想要的样式）等于`0x7`. 您的控件最终设置了该样式标志，因为您设置的标志组合具有`0x7`. 不幸的是，您不能只是`OR`将标志放在一起并获得您想要的结果。

相反，您必须使用`BS_TYPEMASK`标志清除当前按钮样式，然后设置所需的单个`BS_Xxx`标志。对于普通的复选框，可能是`BS_AUTOCHECKBOX`; 对于三态复选框，即`BS_AUTO3STATE`.

工作示例代码：

```
void ToggleCheckboxCtrl(HWND hwndCheckBox)
{
    // Retrieve the control's current styles.
    LONG_PTR styles = GetWindowLongPtr(hwndCheckBox, GWL_STYLE);

    // Remove any button styles that may be set so they don't interfere
    // (but maintain any general window styles that are also set).
    styles &= ~BS_TYPEMASK;

    // Just for example purposes, we're maintain our last state as a static var.
    // In the real code, you probably have a better way of determining this!
    static bool isRegularCheckBox = true;
    if (isRegularCheckBox)
    {
        // If we're a regular checkbox, toggle us to a 3-state checkbox.
        styles |= BS_AUTO3STATE;
    }
    else
    {
        // Otherwise, we want to go back to being a regular checkbox.
        styles |= BS_AUTOCHECKBOX;
    }
    isSet = !isSet;

    // Update the control's styles.
    // (You'll also need to force a repaint to see your changes.)
    SetWindowLongPtr(hwndCheckBox, GWL_STYLE, styles);
} 
```

Spy++ 实用程序（与 Visual Studio 捆绑在一起）是一个不可或缺的小实用程序，用于找出切换窗口样式时出现的问题。运行您的应用程序，并使用 Spy++ 定位窗口并枚举其当前样式。然后更改样式，用 Spy++ 转储新样式，看看哪里出了问题。

# javascript - 带有 Javascript json 解析的程序

> ID：15398446
> 
> 赞同：0
> 
> 时间：2013-03-13T23:25:20.807
> 
> 标签：javascript, titanium

如果在 json 字符串中检测到特定单词，我正在尝试解析 json 对象并尝试在 js 中发出警报，

```
CloudPush.addEventListener('callback', function (evt) {
//alert(evt);
    alert(evt.payload);
    var jsonNotification = JSON.parse(evt.payload);
    for (var i = 0; i < jsonNotification.length; i++) {
                var text = new String(jsonNotification[i]);
                if (text ==  'Hello') {
                    alert('Hello');
                }else{
                    alert('Error');
                }
    } 
```

但是，我收到了一些错误，提示“你好”没有显示。不确定我是否做得正确。希望有人可以阐明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:38:21.973

```
CloudPush.addEventListener('callback', 
    function (evt) {

        // parse the desired data  
        var data= JSON.parse(evt.payload),
            key;

        // loop over all the keys of the JSON object
        for (key in data) {
            if(data.hasOwnProperty(key)){
                alert( data[key] ===  'Hello' ? 'Hello' : 'Error' );
            }
    }
); 
```

# regex - gsub 正则表达式模式

> ID：15398448
> 
> 赞同：0
> 
> 时间：2013-03-13T23:25:31.553
> 
> 标签：regex, shell, gsub

我正在使用 gsub 用逗号替换制表符

```
gsub(/\t/,\",\")

a\tb will be a,b 
```

在某些情况下，我有两个彼此紧随的选项卡例如

```
a/t/tb 
```

在这种情况下，gsub 将其转换为`a,,b` 我想要的，在这种情况下，字符串应转换为 a,-,b （中间的减号）。

我试着写两个单独的 gsub

```
gsub(/\t/,\",\") // for tab

gsub(/,,/,\"/,-,/\") // for consecutive commas 
```

第二个好像不行。

它出什么问题了。有没有办法，我可以将两者合二为一`gsub`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:56:02.500

我认为你在问awk？我不认为它可以用一个 gsub 来完成，事实上我需要三个：

```
$ abc=$(echo 'a.b..c...d....e.....f' | tr . '\t')

$ echo "$abc" | awk '{gsub(/\t/, ","); gsub(/,,/, ",-,"); gsub(/,,/, ",-,"); print}'
a,b,-,c,-,-,d,-,-,-,e,-,-,-,-,f 
```

问题是单个 gsub on`/,,/`将消耗两个逗号，因此如果有三个或更多连续的逗号，它将在下一对逗号之间留下间隙。在更强大的正则表达式引擎中，例如 Perl，它可以使用前瞻在单遍中完成：

```
$ echo "$abc" | perl -pe 's/\t/,/g; s/,(?=,)/,-/g;'
a,b,-,c,-,-,d,-,-,-,e,-,-,-,-,f 
```

# c++ - 带指针的函数

> ID：15398451
> 
> 赞同：0
> 
> 时间：2013-03-13T23:25:35.380
> 
> 标签：c++, function, pointers

我正在尝试解决一个要求数组并计算该数字等于两个数字邻居平均值的次数的练习。我遇到了一个我无法理解的愚蠢错误，这让我很头疼。

```
#include<stdlib.h>
#include<stdio.h>
#include<string.h>

#define N 5

void neighbors(int *arr, int dim, int *equal){

int *t;
int *equal=0;
int i;

for(i=1;t[i]<=5;i++){
    if(((t[i-1]+t[i+1])/2)==t[i])
        equal++;
    else
        continue;
}
printf("Elements -> %d", &equal);
}

int main(){

int array[N]={1,2,3,9,10};
int aux;

int neighbors(*array,N,&aux);     // here it says "expected a ')' and "too many                          //                                           initializers"

system("pause");
} 
```

你能给我一个提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:26:53.397

删除`int`at`int neighbors(*array,N,&aux);`并将其更改为，`neighbors(array,N,&aux);`因为您传递的是*指向数组*的指针，而不是该数组*的第一个成员的值*。

您还在第 11 行重新声明了 equal 。

并学习阅读您​​的编译器警告/错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:28:14.660

就这样就行了。

```
neighbors(array,N,&aux); 
```

请注意，这`aux`是未定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T23:42:23.747

There are many more errors in this code: `t[i+1] for i=5` will give you not the result you might expect. Redefining `equal` will also give you errors. And finally to increment the pointer `equal` but not the value. These are things you might want to rethink. I did not mention that your headers are not correct nor that you might want to use `std::cout` and not `printf` (btw: with the wrong parameter). Have a look at [http://codepad.org/MRh6ckbL](http://codepad.org/MRh6ckbL) it might help you.

# ember.js - 嵌入式 hasMany 使用 Ember 进行测试

> ID：15398455
> 
> 赞同：0
> 
> 时间：2013-03-13T23:25:51.570
> 
> 标签：ember.js, ember-data

我试图理解使用 Ember 的 hasMany。特别是，我希望能够抓取特定的对象。我试过抓住`firstObject`它，但这不起作用。而且我还尝试循环遍历每个对象。

[带有循环的jsBin](http://jsbin.com/agarat/5/edit)和[jsBin](http://jsbin.com/agarat/6/edit)

重要代码：

```
App.MyModel = DS.Model.extend({
  name: DS.attr('string'),
  myOthers: DS.hasMany('App.MyOtherModel')
});

DS.RESTAdapter.map('App.MyModel',{
  myOthers: { embedded: 'always' }
});

App.MyOtherModel = DS.Model.extend({
  name: DS.attr('string')
});

App.store.load(App.MyModel, {
  id: 2,
  name: "myModel",
  my_others: [
    { name: 'myOther1' },
    { name: 'myOther1' }
  ]
});

console.log(myModel.get("myOthers.firstObject.name")); 
```

我正在尝试为我的测试做这个，但我没有任何运气。

我将如何处理`hasMany`关系以获取特定对象并能够遍历它们？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:50:11.567

我发现你必须通过适配器，而不是商店。

[更新了 jsbin](http://jsbin.com/agarat/7/edit)

```
App.adapter = DS.RESTAdapter.create();
App.adapter.load(App.store, App.MyModel, {
  id: 2,
  name: "myModel",
  my_others: [
    { name: 'myOther1' },
    { name: 'myOther2' }
  ]
}); 
```

# php - 梨邮件错误

> ID：15398459
> 
> 赞同：3
> 
> 时间：2013-03-13T23:26:25.753
> 
> 标签：php, email, smtp, pear

好的。我使用了明显有效的代码（带有 136 个绿色勾号的主要最佳答案）： [Send email using the GMail SMTP server from a PHP page](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

在我的 php 邮件脚本中，替换 gmail 用户并用我自己的传递...起初我收到 PEAR 错误，然后找不到 PEAR5...所以我将这两个文件（我从 pear 站点下载）复制到脚本文件夹...

仍然，脚本没有工作。

我添加了一些回声来查看它停止的位置，并且它停止在这一行（我认为）：

```
$mail = $smtp->send($to, $headers, $body); 
```

我的 apache/php 错误日志这样说：

> PHP 致命错误：调用未定义的方法 PEAR_Error::send()`

我用谷歌搜索了这个错误，发现了十多页，但没有找到答案……大多数情况下，他们似乎都在说“安装梨库”。

我没有尝试在我的本地服务器上安装/配置 pear.... 因为我认为我不能在我的虚拟主机上安装新包，所以我需要一个更便携的解决方案：我的意思是这是一个工作脚本，以及任何相对类文件我可以将所有文件复制到一个文件夹中以使其正常工作.....所以我可以将此文件夹复制到任何 apache/php 服务器，它会自动工作（通过以 html 形式引用脚本），而无需在服务器上安装/配置一些第三方包。

我还尝试了 phpmailer，它给出了类似的问题，而且它似乎也需要 pear，所以如果我无法让 pear 工作，我真的看不出进一步尝试 phpmailer 的意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:25:00.603

> PHP 致命错误：调用未定义的方法 PEAR_Error::send()

这意味着你没有得到一个邮件对象，而是一个错误对象，可能是因为登录失败左右。将以下内容添加到您的代码中：

```
$mail = Mail::factory(..);
if (PEAR::isError($mail)) {
    echo $mail->getMessage() . "\n" . $mail->getUserInfo() . "\n";
    die();
}
$mail->send(...); 
```

顺便说一句，使用 $searchengine 来查找该错误消息会给您相同的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T00:25:55.523

正如@cweiske 所说，添加他提供的代码将给出详细的错误。就我而言，它是

**找不到驱动程序 smtp 的类**

**PHP 致命错误：调用未定义的方法 PEAR_Error::send()**

所以基本上它试图包含“Mail/smtp.php”并检查 Mail_smtp 类，但无法找到它。所以要么 Mail/smtp.php 不存在，要么包含它没有定义 Mail_smtp 类。

要解决这个问题，您需要做的就是从[这里](http://pear.php.net/package/Mail/download/)下载 Pear 邮件并将邮件文件夹复制到您的域中。而已。您的代码应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:46:12.187

感谢这让我遇到了这个错误：无法找到驱动程序 smtp 的类

这将我带到了这个页面： http: [//goonanism.com/blog/2010/06/08/using-pear-to-send-email-via-smtp/](http://goonanism.com/blog/2010/06/08/using-pear-to-send-email-via-smtp/)

这告诉我我需要其他文件。在我添加了它工作的文件之后。

问题解决了。但我认为对于像我这样想要便携式解决方案的人来说，应该更好地记录这些文件的要求:)

# javascript - 将 JSON 放入 Google 图表

> ID：15398463
> 
> 赞同：0
> 
> 时间：2013-03-13T23:26:40.590
> 
> 标签：javascript, google-visualization

我正在尝试建立一个谷歌图表。

目前，我正在使用 PHP 的`json_encode($array)`. 所以，我的数组变量如下所示：

```
var array = [{"name":"John Doe","userId":"12","count":"31"},{"name":"Catherine Cookson","userId":"212","count":"12"},{"name":"Lady Gaga","userId":"61","count":"20"}]; 
```

我将它传递给构建图表的函数：

```
drawRetChart(array); 
```

然后使用数据数组： `data.addRows(array);`

但是，当我尝试加载图表时，出现错误：错误：给定的每一行都必须为空或数组。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:32:50.337

你有一大堆对象，你需要的是一大堆数组。

```
var array = [[(key,val), (key,val), (key,val)],[array2], [array3]]; 
```

# php - 这是否是将两个 php 变量附加到 sql 语句而不覆盖已在 sql 字段中设置的数据的合适方法？

> ID：15398464
> 
> 赞同：0
> 
> 时间：2013-03-13T23:26:41.683
> 
> 标签：php, sql

我想将 $comment 变量附加到 $notes 变量并更新 LX 表，而不覆盖 LX 表的 note1 字段内的当前数据。所以我用当前的笔记数据（$notes）创建了一个变量，并在更新时为特定帐户设置了 $notes + $comments ......这实际上是正确的解决方案吗？

```
$patient_ids = $_POST['patient_ids'];
    $comment = strtoupper($_POST['comment']); 
    foreach($patient_ids as $id)
        {
        $patient = new patient($id);
        $patient->insertComment(array('note'=>$comment));

    $ltc_rx_event_id = sql::value ("SELECT id FROM ev.do.ent
                                  WHERE task_id = 'LX' and status = 1 and patient_id = $patient->hex");

    $notes = sql::value("Select note1 FROM ev.do.ent
                        Where task_id = 'LX' and status = 1 and patient_id = $patient->hex");

    sql::query("update ev.do.LX set $notes + $comment where event_id = $ltc_rx_event_id");      
    }

echo "<h3 class='passed'>Comment has been added to " . count($patient_ids) . " patient(s)</h3>"; 
```

我觉得它应该可以工作，我只是想知道是否有一些我遗漏或忽略的东西，以及我的语法是否正确，使用“+”号附加？另外，我必须连接吗？感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:30:30.697

你可能想读这个。它将为您节省一些代码。

[http://www.plus2net.com/sql_tutorial/concat.php](http://www.plus2net.com/sql_tutorial/concat.php)

# php - 在 OO PHP 中转义“值”

> ID：15398471
> 
> 赞同：1
> 
> 时间：2013-03-13T23:26:56.757
> 
> 标签：php, soap

我不确定如何命名这个问题，请随意重新措辞...

我正在处理一个 SOAP 响应，它有一个名为“值”的对象（我知道......不聪明，它是第三方，所以我无法更改它！）

```
$application = $result->return[$i]->extendedist[12]->value->displayValue;

[value] => stdClass Object
                    (
                        [displayValue] =>
                        [internal] =>
                        [id] =>
                    ) 
```

如您所见，这是一个问题，因为`PHP`想要使用其内置的值函数。我怎样才能逃避这个并使用响应中的值对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:34:52.053

您也可以访问对象属性，例如 as `$foo->value`as `$foo->{'value'}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:35:06.263

```
$result->{'return'} 
```

应该管用。

根据您阅读响应的方式，您可以将其解码为数组并使用

```
$result['return'] 
```

# php - 在 PHP 中查找现在和文件的最后更改时间之间的差异

> ID：15398474
> 
> 赞同：4
> 
> 时间：2013-03-13T23:27:04.633
> 
> 标签：php

我有一个名为“file.txt”的文件。我得到了它的最后一次更改时间：

```
$lastTime = filemtime("file.txt"); 
```

然后我做

```
$lastDate = date("Y-m-d",strtotime( $lastTime ));
$todaysDate = date("Y-m-d",strtotime('now')); 
```

然后我从 todaysDate 中减去 lastDate 并找出差异。有没有更快的方法来做到这一点？

我不想检查秒的差异是否> = 86400。

例如，这两个日期之间的差必须是“ **1** ”。

```
2013-03-31 10:00
2013-03-30 19:00 
```

如果我检查秒的差异，我将有 54K 秒，小于 86400 秒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T23:35:31.380

以秒为单位获取差异，然后转换为天数并对结果进行四舍五入。

```
$diff = time()-filemtime("file.txt");
$days = round($diff/86400); 
```

您也可以使用`floor`或`ceil`代替，`round`具体取决于您希望如何处理部分天数。

# nhibernate - NHibernate SaveOrUpdate() 不正确地使用 GeneratedBy.Assigned()

> ID：15398476
> 
> 赞同：0
> 
> 时间：2013-03-13T23:27:14.443
> 
> 标签：nhibernate, fluent-nhibernate, identifier

NHibernate 的文档特别说

> 5.1.4.7。分配的标识符
> 
> 如果您希望应用程序分配标识符（而不是让 NHibernate 生成它们），您可以使用分配的生成器。这个特殊的生成器将使用已经分配给对象的标识符属性的标识符值。使用此功能分配具有业务意义的键时要非常小心（几乎总是一个糟糕的设计决定）。
> 
> 由于其固有的性质，使用此生成器的实体无法通过 ISession 的 SaveOrUpdate() 方法保存。相反，您必须通过调用 ISession 的 Save() 或 Update() 方法来显式指定 NHibernate 是否应该保存或更新对象。

但是我正在使用分配的标识符和 session.SaveOrUpdate() 并且我没有收到任何类型的错误/警告。

我错过了什么？他们是否改变了 SaveOrUpdate 的行为方式，现在它可以与分配的标识符一起使用？

我也在使用 Fluent NHibernate 的自动映射。

这是代码：

```
 public class MyIDConvention : IIdConvention
 {
      public void Apply(IIdentityInstance instance)
        {
            instance.GeneratedBy.Assigned();
        }
 }

 private static ISessionFactory CreateSessionFactory()
 {
      return Fluently.Configure().Database(SQLiteConfiguration.Standard.UsingFile("testDB.db"))
      .Mappings(m => m.AutoMappings.Add(AutoMap.AssemblyOf<Product>(cfg).Conventions.Add<MyIDConvention>()
      .BuildSessionFactory();
 } 
```

当我这样做时，我期待一个错误：

```
 Product myProduct = new Product(presetID);
 session.SaveOrUpdate(myProduct);
 transaction.Commit(); 
```

但什么也没发生。

如果我遗漏了 myIDConvention，则会收到错误消息：NHibernate.StaleObjectStateException: Row is updated or deleted by another transaction（或未保存值映射不正确）。

谁能向我解释发生了什么事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T13:03:41.657

当使用分配的 id 时，NHibernate 可以通过将 id 与未保存的值设置进行比较来确定实体是否是持久的。我的理解是未保存的值设置允许使用 SaveOrUpdate 并且您引用的文档已过时/具有误导性。

例如，如果您的 id 是 int，则默认 unsaved-value 为 0。

[5.1.4](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-id)

> unsaved-value（可选 - 默认为“合理”值）：一个标识符属性值，指示实例是新实例化的（未保存），将其与在先前会话中保存或加载的瞬态实例区分开来。

# css - Rails - 如何将我的网站框架保持在中心？

> ID：15398479
> 
> 赞同：0
> 
> 时间：2013-03-13T23:27:26.720
> 
> 标签：css

如何使我的网站的显示区域居中，并在其后面加上背景颜色？现在一切都一直被推到左边。我想要什么可以通过在查看 stackoverflow.com 时更改浏览器窗口的大小来说明。一旦窗口达到一定宽度，我想模拟网站内容如何从窗口左侧拉开。

谢谢。

这就是我现在的样子（不要讨厌颜色，只是学习如何使用 css）：

![我的网站](../Images/b52a6a81aaa772687fdd739ac1ebf70b.png)

# mysql - Rails / MySQL中的无符号长

> ID：15398483
> 
> 赞同：0
> 
> 时间：2013-03-13T23:27:45.257
> 
> 标签：mysql, ruby-on-rails

我试图通过在 environment.rb 中插入以下内容来强制将主键（id）生成为 unsigned bigint：

```
ActiveRecord::ConnectionAdapters::MysqlAdapter::NATIVE_DATABASE_TYPES[:primary_key] = "BIGINT UNSIGNED DEFAULT NULL auto_increment PRIMARY KEY" 
```

但是当我尝试生成迁移时，我收到以下错误消息：

```
/.rvm/rubies/ruby-1.9.3-p125/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) "/projects/test/script/rails" generate migration Ball name:string last:string -s
/projects/test/config/environment.rb:7:in `<top (required)>': uninitialized constant ActiveRecord::ConnectionAdapters::MysqlAdapter (NameError)
    from /.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.12/lib/rails/application.rb:103:in `require_environment!'
    from /.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.12/lib/rails/commands.rb:25:in `<top (required)>'
    from /projects/test/script/rails:6:in `require'
    from /projects/test/script/rails:6:in `<top (required)>'
    from -e:1:in `load'
    from -e:1:in `<main>'

Process finished with exit code 1 
```

当我将该行从 environment.rb 中取出时，迁移工作，但显然主键设置为 int，而不是 unsigned bigint。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:48:03.607

尝试在您的环境文件顶部添加此 require 语句

```
require 'active_record/connection_adapters/mysql_adapter' 
```

# java - 迭代器抛出 NoSuchElementException 的问题

> ID：15398488
> 
> 赞同：0
> 
> 时间：2013-03-13T23:28:13.883
> 
> 标签：java, iterator, try-catch

我正在尝试编写一个随机分组人群的程序。我遇到了迭代器的问题。这是代码：

```
@SuppressWarnings("deprecation")
public static void results(List<String> nameslist) {

    Scanner scan = new Scanner(System.in);
    int groups = 0;
    int count = nameslist.size();
    int done=0; 

    do{
        System.out.println("How many people do you want per group?");
        groups = scan.nextInt();
    } while(groups == 0);
    Iterator itr = nameslist.listIterator();
    int peopledone=0;
    while(peopledone<count){    
    int groupsdone = 0;
    while (groupsdone <= groups){
        groupsdone++;
        peopledone = 0;
        System.out.println("Group "+groupsdone+":");
        while (peopledone <= groups){
            try{
                Object obj = itr.next();
                System.out.println(obj);
                peopledone++;
            }catch (NoSuchElementException e){
                System.out.println("Error");
                Thread.currentThread().stop();
            }
        }
    }   
} 
```

需要注意的几点：

*   nameslist 是我为测试目的而放在一起的字母 (af) 列表。通常，它们是班级中的人名。

*   我试图让它只列出名称，直到它用完为止。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:05:37.883

你得到 NoSuchElementException 因为由于嵌套循环，你做了太多的迭代。一旦到达列表的末尾，如果再次在迭代器上调用 next()，它就会抛出该异常。

除非我误解了您要执行的操作，否则这应该可以工作（可能有一种更优雅的方式，但至少可以解决您的问题）：

```
public static void results(List<String> namesList)
    {
        Scanner scan = new Scanner(System.in);
        int namesPerGroup = 0;
        while (namesPerGroup == 0)
            namesPerGroup = scan.nextInt();

        int group = 0;
        int namesInGroup = 0;
        System.out.println("Group " + group + ": ");
        for (String name : namesList)
        {
            if (namesInGroup == namesPerGroup)
            {
                group++;
                namesInGroup = 0;
                System.out.println("Group " + group + ": ");
            }
            System.out.println(name);
            namesInGroup++;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:11:25.747

您的迭代次数超过了列表元素的数量 - 确定您的循环将循环多少次。

您正在尝试做的事情可以而且应该分两行完成：

```
 Collections.shuffle(nameslist);
    List<String> result = nameslist.subList(0, Math.min(count, nameslist.size())); 
```

# ruby-on-rails - 生产服务器上的 Rails 没有记录任何内容

> ID：15398490
> 
> 赞同：0
> 
> 时间：2013-03-13T23:28:29.553
> 
> 标签：ruby-on-rails

当我的 Rails 应用程序遇到内部服务器错误时，它会提供 500 个页面，但它不会向日志文件输出任何内容。

从字面上看，我的整个 production.log 文件如下：

```
Connecting to database specified by database.yml
Migrating to CreateStates (20130221172503)
Migrating to CreateCarriers (20130225200710)
Migrating to DeviseCreateUsers (20130226212033)
Migrating to CreateAccounts (20130226221603)
Migrating to CreateAccountsUsers (20130226221735)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml 
```

谁能帮我诊断一下？我像往常一样运行 Apache 和 Passenger，Ruby 1.9.3，Rails 3.2.12。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:56:49.727

查看 Apache 全局错误日志。Phusion Passenger 将进程的标准错误重定向到该文件。

# jquery - 带有“损坏” HTML 的 jQuery appendTo

> ID：15398491
> 
> 赞同：0
> 
> 时间：2013-03-13T23:28:30.973
> 
> 标签：jquery

这是我的 HTML：

```
<table id="mytable">

</table> 
```

当我运行此代码时：

```
$('<tr>').appendTo('#mytable'); 
```

我得到：

```
<table id="mytable">
<tr></tr>
</table> 
```

如何避免 jQuery 的 appendTo 关闭我的标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:31:49.733

你不能。jQuery 在 DOM 上工作，它是原始 HTML 之上的一层。它由只能有效的节点组成。

如果要将内容附加到该行，请使用以下命令：

```
var myRow = $('<tr />').appendTo('#mytable');
for( whatever ) {
    $('<td />').appendTo(myRow).text( 'this is my cell! woo!' );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:35:48.093

正如我在上面的评论中提到的，您始终可以创建一个字符串，然后在您的`append()`:

```
var myString = "<tr><td>Hello World!</td></tr>";
$('.inner').append(myString); 
```

但是，我建议不要这样做，并始终单独创建有效元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:32:30.647

首先应该没有理由阻止 jQuery 关闭您的标签。

如果您尝试附加 a `<tr>`，然后添加标签内的任何内容，然后附加一个 close `</tr>`，您应该使用 clone 方法。

在 HTML 中：

```
<tr class="tr-template"></tr> 
```

在 jQuery 中：

```
$( 'tr-template' )
  .clone()
  .removeClass('tr-template')
  .html( 'whatever you want inside the tr' )
  .appendTo('#mytable'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:36:06.173

我想你想做更多这样的事情：

```
var tableData = '<tr>';

tableData += "<td>One</td>";
tableData += "<td>Two</td>";
tableData += "<td>Three</td>";

tableData += "</tr>";

$('#mytable').html(tableData); 
```

构造一个 HTML 字符串，将该字符串注入表中。

# vb.net - 程序将以调试模式运行，但一旦发布就不会运行

> ID：15398497
> 
> 赞同：1
> 
> 时间：2013-03-13T23:28:57.237
> 
> 标签：vb.net, visual-studio

出于某种原因，我现在尝试在 VB 2010 中制作的任何程序都将在 Visual Basic 的调试模式下运行，但一旦我将其发布到我的计算机上就不会运行，对此的任何帮助将不胜感激。

代码以备不时之需。

主要形式：

```
Public Class Form1
Dim locat As String = System.Reflection.Assembly.GetEntryAssembly.Location
Dim MyDirectory As String = System.IO.Path.GetDirectoryName(locat)

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim sfile As String
    Dim rfile As String
    sfile = IO.Directory.GetCurrentDirectory + "\Games\" + ListBox1.SelectedItem.ToString
    rfile = ListBox1.SelectedItem.ToString
    My.Computer.FileSystem.DeleteFile(sfile)
    ListBox1.Items.Remove(rfile)
End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Dim ddir As String
    ddir = My.Computer.FileSystem.CurrentDirectory + "\Games\"
    ListBox1.Items.Clear()
    My.Computer.FileSystem.DeleteDirectory(ddir, FileIO.DeleteDirectoryOption.DeleteAllContents)
    My.Computer.FileSystem.CreateDirectory(Application.StartupPath & "\Games\")
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    If IO.File.Exists(MyDirectory + "\" + Me.ProductName + ".old") Then
        IO.File.Delete(MyDirectory + "\" + Me.ProductName + ".old")
    End If

    Dim dir As New IO.DirectoryInfo(Application.StartupPath & "/Games/")
    Dim files As IO.FileInfo() = dir.GetFiles("*.swf")
    Dim fileName As IO.FileInfo
    For Each fileName In files
        ListBox1.Items.Add(fileName.Name)
    Next
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    AxShockwaveFlash1.Movie = Application.StartupPath & "\Games\" & ListBox1.SelectedItem.ToString()
End Sub

Private Sub AddGamesToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AddGamesToolStripMenuItem.Click
    Dim gd As New OpenFileDialog
    Dim dir As String
    dir = Application.StartupPath & "\Games\"
    gd.Title = "Pick a game to add to the game list"
    gd.Filter = "Shockwave Flash File (*.swf)|*.swf"
    gd.ShowDialog()
    ListBox1.Items.Add(gd.SafeFileName)
    My.Computer.FileSystem.CopyFile(gd.FileName, dir & gd.SafeFileName)
End Sub

Private Sub RefreshGameListToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RefreshGameListToolStripMenuItem.Click
    ListBox1.Items.Clear()
    Dim dir As New IO.DirectoryInfo(Application.StartupPath & "/Games/")
    Dim files As IO.FileInfo() = dir.GetFiles("*.swf")
    Dim fileName As IO.FileInfo
    For Each fileName In files
        ListBox1.Items.Add(fileName.Name)
    Next
End Sub

Private Sub RemoveGamesToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RemoveGamesToolStripMenuItem.Click
    Button2.PerformClick()
End Sub

Private Sub CheckForUpdateToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckForUpdateToolStripMenuItem.Click
    Updates.Show()
End Sub
End Class 
```

更新表格：

```
Imports System.IO
Imports System.Net

Public Class Updates
Dim locat As String = System.Reflection.Assembly.GetEntryAssembly.Location
Dim MyDirectory As String = System.IO.Path.GetDirectoryName(locat)
Public totalsize As String
Public link As String
Public Csize As String
Public amount As String

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    My.Computer.FileSystem.RenameFile(MyDirectory + "\" + Me.ProductName + ".exe", Me.ProductName + ".old")
    Timer1.Start()
    BackgroundWorker1.RunWorkerAsync()
    Button1.Enabled = False
End Sub

Private Sub Updates_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Label3.Text = Me.ProductVersion
    Try
        Dim instance As WebClient = New WebClient
        Dim address As String = "https://dl.dropbox.com/u/119965245/XtroPlayer_Version.txt"
        Dim returnValue As String
        returnValue = instance.DownloadString(address)
        Label4.Text = returnValue
        If Not Label4.Text >= Label3.Text Then
        Else
            Button1.Enabled = True
        End If
    Catch ex As Exception

    End Try
    Control.CheckForIllegalCrossThreadCalls = False
End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Try
        link = "https://dl.dropbox.com/u/119965245/Xtro%20Player.exe"
        Dim size1 As Integer
        Dim wr As WebRequest
        wr = WebRequest.Create(link)
        Dim webr As WebResponse = wr.GetResponse
        size1 = webr.ContentLength
        webr.Close()
        size1 = size1 / 1024
        ProgressBar1.Maximum = size1
        totalsize = size1
        My.Computer.Network.DownloadFile("https://dl.dropbox.com/u/119965245/Xtro%20Player.exe", MyDirectory + "\" + Me.ProductName + ".exe")
    Catch ex As Exception

    End Try
End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    If File.Exists(MyDirectory + "\" + Me.ProductName + ".exe") Then
        Dim o As New FileInfo(MyDirectory + "\" + Me.ProductName + ".exe")
        amount = o.Length
        amount = amount / 1024
        Csize = amount
        ProgressBar1.Value = amount
    End If
    Label1.Text = Csize + " kbs / " + totalsize + " kbs"
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As System.Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Try
        Shell(MyDirectory + "\" + Me.ProductName + ".exe")
        Me.Close()
    Catch ex As Exception

    End Try
End Sub
End Class 
```

我对它所做的唯一另一件事是更改装配信息的标题、公司、产品、版权和版本信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:39:43.660

尝试检查您的**/Games/**参考资料；他们中的一些人似乎把他们的斜线倒过来了。

# javascript - 要成为一名优秀的 AngularJS 开发人员，我需要了解哪五个 JavaScript 概念？

> ID：15398498
> 
> 赞同：10
> 
> 时间：2013-03-13T23:29:03.077
> 
> 标签：javascript, angularjs

假设我习惯于在服务器端编码（使用服务器端语言），现在我正在学习 AngularJS。这意味着我首先需要对 JavaScript 有一个很好的理解。

如果我现在没有时间完全学习 JavaScript，你会建议我首先/好学习哪五个 JavaScript 概念，以便成为一名有效的 AngularJS 开发人员？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T23:29:03.077

1.  类型系统：有两种根本不同的值：基元和对象。Number, string, boolean, `null`,`undefined`都是原语。
    数组（`[1,2,3]`）、对象（`{ prop1: value1, prop2: value2 }`）和函数都是对象。
2.  [原型继承](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)——当您尝试在 AngularJS 中将数据绑定到原始数​​据时，这一点尤其重要
3.  数组['syntax'] === array.syntax; 数组['$id'] === 数组.$id; array[ *someExpression* ] 没有等效的 "." 符号
4.  变量范围和赋值
    *   在函数内任意位置定义的变量在该函数内随处*可见*
    *   当一个变量被分配一个对象时，它被分配一个*引用*（而不是一个副本）。这在 AngularJS 中变得很重要，例如，当您从服务器获取 JSON 数据并将结果分配给变量时。这将重置参考。指向旧引用的其他变量（比如在您的控制器中）继续指向旧引用。（[示例](https://stackoverflow.com/questions/12265565/angularjs-promise-is-resolved-before-data-is-loaded/12287364#12287364)）
5.  [闭包——在定义 AngularJS 服务（示例](https://stackoverflow.com/a/14904891/215945)）和使用`this`（[示例](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers/14168699#14168699)）在控制器上定义方法时，这些非常有用

另请注意，JavaScript 是单线程的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-28T19:21:39.697

在我看来，您应该清楚以下主题

1）**在javascript中按值调用与按引用调用**

原因：因为在 angularJS 中我们处理了很多对象。一旦你了解了这一点，你就会清楚他们的行为

2）**作用域链和IIFE（立即可调用函数表达式）**

原因：当您使用 angularJS 在应用程序上工作时，IIFE 在操纵您的范围方面发挥着重要作用。

3)**闭包**

原因：最重要的javascript概念之一。如果您看到许多基于 javascript 构建的著名库和框架的源代码，它们会大量使用闭包。闭包还将帮助您深入了解工厂的运作方式。

4)**依赖注入**

原因：Angular JS 所基于的 javascript 概念

5) 你也可以阅读一些关于 AngularJS 的优秀风格指南。例如你可以参考这个：[https ://github.com/johnpapa/angular-styleguide](https://github.com/johnpapa/angular-styleguide)

# php - 注册后激活用户帐户

> ID：15398499
> 
> 赞同：3
> 
> 时间：2013-03-13T23:29:03.263
> 
> 标签：php, laravel, laravel-4

用户注册后，我发送了一封电子邮件激活帐户，但即使帐户尚未激活，用户也可以登录。如何验证用户帐户是否已激活？

```
if (Auth::attempt(array('email' => $email, 'password' => $password))) {
  // Success login
} else {
  // Login fail
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T15:38:48.763

```
if (Auth::attempt(array('email' => $email, 'password' => $password, 'active' => 1)))
{
    // The user is active, not suspended, and exists.
} 
```

[验证用户](http://laravel.com/docs/security#authenticating-users)

在 Laravel 5.3 中，您可能希望覆盖App\Http\Controllers\Auth\LoginController 中`Illuminate\Foundation\Auth\AuthenticatesUsers`的`credentials`方法以添加`'active' => 1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T23:53:42.257

您必须查询数据库。

如果您有以下数据库架构：

```
users
id     name    email    active
--     ----    -----    ------
1      alex    a@a.a    0 
```

您可以执行以下操作

```
if( ! User::where_email($email)->only('active')) // Adapt the where to your needs
   echo "User not active"
else
   echo "User active" 
```

我写了一个 Laravel REST API 演示服务（我使用它），它实际上有一个检查用户是否被激活的部分：在这里找到它[https://github.com/w0rldart/lRapi/blob/master/api /controllers/api/user.php](https://github.com/w0rldart/lRapi/blob/master/api/controllers/api/user.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:33:44.303

使用密钥向用户电子邮件发送链接，该密钥必须是唯一的，例如他们的电子邮件地址的哈希值，其中您的应用程序密钥作为盐。有一个此链接指向的端点，使用我上面提到的过程检查链接是否有效。如果您生成的密钥与电子邮件链接中的密钥匹配，那么您可以验证他们的帐户并将他们重定向到登录页面。

# matlab - matlab交互式等高线图

> ID：15398501
> 
> 赞同：1
> 
> 时间：2013-03-13T23:29:11.117
> 
> 标签：matlab, plot, interactive, contour

我有一组数据或光谱，用于各种 xy 坐标。

看起来像这样：

```
x       y       spectrum x              spectrum y
-14 -18 35.0286000000000    330.643000000000
-14 -18 33.6069000000000    311.247000000000
-14 -18 32.1849000000000    251.419000000000
-14 -18 30.7628000000000    205.673000000000
-14 -18 29.3404000000000    152.912000000000
-14 -18 27.9178000000000    144.101000000000
-14 -18 26.4949000000000    135.292000000000
-14 -18 25.0719000000000    133.514000000000
-14 -16 35.0286000000000    353.507000000000
-14 -16 33.6069000000000    320.039000000000
-14 -16 32.1849000000000    272.517000000000
-14 -16 30.7628000000000    198.642000000000
-14 -16 29.3404000000000    163.458000000000
-14 -16 27.9178000000000    135.314000000000
-14 -16 26.4949000000000    147.592000000000
-14 -16 25.0719000000000    114.190000000000 
```

等等。

我编写了一个程序，从每个光谱的一部分中取一个斜率，并制作一个如下所示的新矩阵：

```
x       y       slope
-14 -18 0.650084924302224
-14 -16 0.751250946346182
-14 -14 0.0666371921219543
-14 -12 0.703160656652351
-14 -10 1.04017251503861 
```

等等。

然后我从该矩阵制作 x、y 和 z 矩阵并使用`[C,h] = contourfm(x,y,z)`.

我感兴趣的是一个程序，我可以在其中单击等高线图并在离我单击的位置最近的点处拉出单个光谱的图。这在分析我的数据时会非常好。这远程可能吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:07:48.203

是的，有可能，您可能需要构建一个 GUI，但以下内容也可能会让您满意。从函数开始，如 [`ginput`](http://www.mathworks.com/help/matlab/ref/ginput.html). 例如，`[x,y] = ginput(n)` 使您能够识别当前坐标区中的 n 个点，并在 x 和 y 列向量中返回它们的 x 和 y 坐标。在输入 n 个点之前，按 Return 键将终止输入。然后从这些 x,y 坐标中，用于`find`绘制您拥有的数据的相关部分。

# jquery-isotope - 移除和重新布局后的同位素洗牌

> ID：15398507
> 
> 赞同：0
> 
> 时间：2013-03-13T23:29:54.223
> 
> 标签：jquery-isotope, shuffle

我有一个随机播放按钮，可以在我的 Isotope 设置上正常工作，直到我删除一些项目。尝试删除一个集团，然后洗牌：[http ://apany.com/assistants/](http://apany.com/assistants/)

```
 $('#shuffle').click(function(){
    $container.isotope('shuffle');
  });

  $('.delete').click(function(){
    $(this).parent().remove();
    $container.isotope('reLayout');
    return false;
  }); 
```

我在这里完全超出了我的深度。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:11:19.363

您使用的是 jQuery 删除函数而不是同位素删除函数。我相信您需要将删除行更改为：

```
$container.isotope( 'remove', $(this).parent() ); 
```

# javascript - 打开窗口自我并为新窗口执行javascript

> ID：15398509
> 
> 赞同：1
> 
> 时间：2013-03-13T23:30:07.263
> 
> 标签：javascript, html, window

单击按钮后，将打开一个新窗口，其中包含：

我在我的 javascript 中的代码是这样的：

```
$("#kitchen_menu a").bind('click',function(e){
    if(window.location.href = "products.html")
    {
        make_kitchen();
    }
}); 
```

它工作得很好。

我的问题是当我试图为我刚刚打开的这个新页面执行一些其他代码时，在这段代码之后。我意识到这一行下面的代码是在页面加载之前执行的。

我如何加载我的新页面并为新页面执行一些其他功能？有什么可以让其余代码等到页面加载完成的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T06:49:21.770

使用 jquery 函数 document.ready：

```
$(document).ready(function(){
    // enter the code that needs to bee xecuted after the page is loaded
}) 
```

# php - PHP 如果名称在 foreach 循环中出现多次

> ID：15398515
> 
> 赞同：1
> 
> 时间：2013-03-13T23:30:28.020
> 
> 标签：php, arrays, pdo

我想确定相同的团队名称（与变量`$home_team['team_name']`和一起输出`$away_team['team_name']`）是否在

```
if ($game_date_converted == $next_monday) 
```

陈述。

如果团队名称确实出现了不止一次（例如，如果它出现两次），我希望该文本以红色显示。

简而言之，对于比赛列表，如果球队名称（可能是主队或客队）出现两次，则以 RED 显示该球队名称。

感谢您的帮助！

```
<?php foreach ($games as $game) { ?>

<?php

$team_id = $game['home_team_id'];
$home_team = sw::shared()->teams->getForID($team_id); 

$away_team_id = $game['away_team_id'];
$away_team = sw::shared()->teams->getForID($away_team_id); 

$leagues = sw::shared()->packages->getAll(); 

$game_date = $game['date'];
$game_date_converted = date('Y-m-d', strtotime($game_date));

$date_converted = date('l', strtotime($game_date));
?>

<?php if ($game_date_converted == $next_monday) { ?>
    <tr>
        <td><?php echo $home_team['team_name']; ?></td>
        <td><?php echo $away_team['team_name']; ?></td>

    <!-- more HTML --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:45:55.513

如果您希望设置其显示方式的样式，您可能需要在团队的解析中添加一个类名（yourclass），然后应用 css。

```
<td><?php echo "<span class='home-team'>" . $home_team['team_name'] . "</span>"; ?></td>
<td><?php echo "<span class='away-team'>" . $away_team['team_name'] . "</span>"; ?></td> 
```

在 head 部分中，您可以添加您的 jquery 库：

然后添加jquery脚本：

```
 $(document).ready(function(){

        $(".home-team").not(":first").css("color","red");
        $(".away-team").not(":first").css("color","red");
   }); 
```

最好在现场情况下看到这一点，所以我创建了一个小提琴：http: [//jsfiddle.net/djwave28/TNAGr/13/](http://jsfiddle.net/djwave28/TNAGr/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:17:30.570

又调整了一下。没问题 ！！所有渲染的团队都有一个带类的跨度，因此可以使用 javascript 读取它们。然后我读取其中的文本内容并将其放入一个数组中，看看我是否有多个值。如果是，我会在 HTML 中查找所有给我双重内容的内容，并为它们添加一个类。

```
<?php echo "<td><span class='team'>" . $home_team['team_name'] . "</span></td>"; ?>
<?php echo "<td><span class='team'>" . $away_team['team_name'] . "</span></td>"; ?>

  $(document).ready(function () {
            var teams = Array();
            $(".team").each(function () {

                teams.push($(this).text());

            });
            teams.sort();

            for (var i = 0; i < teams.length; i++) {

                if (teams[i] === teams[i + 1]) {

                    $(".team").each(function () {

                        if ($(this).text() == teams[i]) {
                            $(this).addClass("doubleteam");
                        }
                    });
                }
            }

        }); 
```

见：http: [//jsfiddle.net/djwave28/TNAGr/37/](http://jsfiddle.net/djwave28/TNAGr/37/)

这将贯穿您当天的日程安排显示并寻找双打球队。如果找到它们，它将添加“doubleteam”类。您可以在 CSS 样式表中根据需要设置此类的样式。此外，您还可以在 CSS 表中整体设置团队名称的样式。我希望这正是你的样子

# java - 使用 Java ProcessBuilder 加载可执行文件

> ID：15398518
> 
> 赞同：0
> 
> 时间：2013-03-13T23:30:46.707
> 
> 标签：java, windows, executable, processbuilder

我正在尝试使用 ProcessBuilder 从我的 Java 应用程序加载可执行文件。

代码：

```
String [] cmdArray = new String[1];
cmdArray[0] = mPathToFile + mGameArrayList.get(i).Directory + mGameArrayList.get(i).Executable;

ProcessBuilder builder = new ProcessBuilder(cmdArray);
final Process process = builder.start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;
while ((line = br.readLine()) != null) {
  System.out.println(line);
} 
```

我要加载的 .exe 是我自己制作并在 VS 2010 中编译的一个小游戏。我已经将任何错误输出到 Java 程序使用 BufferedReader 拾取的控制台，然后是加载的 .exe崩溃。我收到错误消息，告诉我游戏找不到像网格和纹理这样的资源，这让我相信我加载它是错误的，因为通过双击它加载它可以正常工作。是否有另一种方法可以执行具有运行所需资源的程序？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:39:31.667

可执行文件可能期望它的工作目录是它存在的目录。默认情况下，根据[ProcessBuilder 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)：

> *一个工作目录*。默认值为当前进程的当前工作目录，通常是系统属性user.dir命名的目录。

在您构建您`ProcessBuilder`的设置当前工作目录后添加一行：

```
builder.directory(new File(mPathToFile + mGameArrayList.get(i).Directory)); 
```

（假设连接为您提供了可执行文件所在的目录）

# firefox - 如果元素在屏幕上不可见，则 WebElement getText() 是 Firefox 中的空字符串

> ID：15398520
> 
> 赞同：1
> 
> 时间：2013-03-13T23:30:58.500
> 
> 标签：firefox, selenium, webdriver, selenium-webdriver

在将 Firefox 升级到版本 19 后，我的 Selenium Webdriver 测试最近中断了。在我的几个测试中，我需要检索页面上但在浏览器窗口中不可见的元素，即我必须向右滚动才能看到它们。自从升级到 Firefox 19（我从 15 升级，所以这可能是自 16 以来的问题）我只能检索我可以在浏览器窗口上看到的元素的文本。我的 xpaths 正确检索所有元素，例如在我的以下代码中：

```
 private void buildColumnsMap(){
    allColumnHeaders = new HashMap<String,Integer>();
    positionToColumnName = new ArrayList<String>();

    WebElement columnsRoot = driver.findElement(By.xpath(COLUMNS_ROOT_XPATH));
    List <WebElement> columns = columnsRoot.findElements(By.xpath("./td/div/span"));
    System.out.println("Number of columns found: " + columns.size());

    for(int i = 0; i < columns.size(); ++i){
        String columnName = columns.get(i).getText();
        System.out.println("Column been inserted: " + columnName);
        allColumnHeaders.put(columnName, i);
        positionToColumnName.add(columnName);
    }
} 
```

列表“列”的大小为 38，但在我的浏览器窗口中，我只能看到 10 列而无需滚动，因此当我将列名放入对象时，我得到 10 个列名，然后全部为空白。

```
Number of columns found: 38
Column been inserted: Date/Time
Column been inserted: Endpoint1
Column been inserted: Endpoint2
Column been inserted: Duration
Column been inserted: Codec1
Column been inserted: Codec2
Column been inserted: Avg MOS1
Column been inserted: Avg MOS2
Column been inserted: Avg Latency1 (ms)
Column been inserted: Avg Latency2 (ms)
Column been inserted: Avg Jitter1 (ms)
Column been inserted: 
Column been inserted: 
...
... 
```

这在 Firefox 15 中对我来说非常好，但现在已经坏了。有没有人遇到过类似的事情并找到了解决方法？或者有没有办法“滚动到一个元素”以强制滚动并因此使其在屏幕上可见？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:41:53.090

对于 WebDriver 和/或 Firefox 的行为方式，我找不到答案。在我的 AUT 中，我有一个显示报告的网格以及我能够在 Html 中看到的屏幕上不可见的任何单元格/WebElement，它们似乎没有被隐藏，WebDriver 会承认它可以看到它们但是我无法检索任何元素的值，即 getText、getAttribute 等。所以为了解决这个限制（不确定它是错误还是它的行为方式），我使用了以下一点点 JavaScript，它似乎已经解决了我的问题：

```
private void scrollToElement(WebElement element){

((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", element);
} 
```

这绝对是 Firefox 从 v16+ 开始的行为变化。希望其他人也能发现这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:50:58.823

通过禁用下面的原生事件来尝试同样的事情

```
FirefoxProfile profile=new FirefoxProfile();
profile.setEnableNativeEvents(false);
DesiredCapabilities dc = DesiredCapabilities.firefox(); 
dc.setCapability(FirefoxDriver.PROFILE, profile); 
driver = new FirefoxDriver(dc); 
```

这是一些解决方法来向下翻页

```
driver.findElement(By.tagName("body")).sendKeys(Keys.PAGE_DOWN); 
```

你升级到 selenium-server-standalone-2.31.0 了吗？

# java - 如何使用 getElementsByTagName 有选择地检索元素

> ID：15398525
> 
> 赞同：0
> 
> 时间：2013-03-13T23:31:29.450
> 
> 标签：java, xml, dom

我有一个 DOM XML - org.w3c.dom.Document

我只想选择 MAIN 中第一次出现的 PARENT。IE。不检索带有 Unwanted in 的第二个 PARENT 元素。

所以我正在使用

```
NodeList nodeList = document.getElementsByTagName("PARENT"); 
```

这是 XML 的示例。

```
<MAIN>
<PARENT>
     <CHILD>Billy</CHILD>
     <CHILD>Allen</CHILD>
</PARENT>
<PARENT>
     <CHILD>Unwanted</CHILD>
     <CHILD>Unwanted</CHILD>
</PARENT>
</MAIN> 
```

但是，我尝试过的解决方案将检索所有 PARENT 元素。

有没有一种只选择第一个 PARENT 元素的好方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:45:05.730

```
document.getChileNodes().item(0); 
```

或者

```
document.getFirstChild(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:54:41.043

From [`Document`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html)，您只能使用`getElementsByTagName`然后检索第一个 with[`NodeList.item(0)`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NodeList.html#item%28int%29)

```
NodeList nodeList = document.getElementsByTagName("PARENT");
Node parent = nodeList.item(0); 
```

或者，如果您知道它`PARENT`始终是文档节点的第一个孩子，您可以检索`getDocumentElement()`然后检索第一个孩子[`getFirstChild()`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getFirstChild%28%29)

```
Element main = document.getDocumentElement();
Node parent = main.getFirstChild(); 
```

# jasper-reports - 在不同的数据源中运行 jasperserver 报告

> ID：15398526
> 
> 赞同：2
> 
> 时间：2013-03-13T23:31:30.297
> 
> 标签：jasper-reports, jasperserver

有没有办法针对不同的数据源运行单个 jasperserver 报告？我希望能够在 jasperserver 上使用单个报告，并且只需从 Rails 应用程序中指定数据源。我的临时解决方案是上传相同的报告，附加环境名称，并使用适当的数据源。我找到[了这个](https://stackoverflow.com/questions/9637791/jasperserver-using-rest-to-run-a-report-with-data-source-specified-at-run-time)stackoverflow 问题，但没有任何答案。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:01:12.773

我没有明确的答案，但这是一个非常好的问题，因为他们的一本手册指出多个数据源是一项功能。听起来 Subreports 是首选方法 - 这是我看到的一条线索。

[http://community.jaspersoft.com/questions/523748/multiple-database-connection-subreport](http://community.jaspersoft.com/questions/523748/multiple-database-connection-subreport)

# matlab - 在 Matlab 中预分配字符串大小

> ID：15398529
> 
> 赞同：2
> 
> 时间：2013-03-13T23:31:39.700
> 
> 标签：matlab

我非常清楚如何使用一、零和单元格命令预分配矩阵大小，但是 String 呢？

假设我现在有一个名为 Matrix `data`，其每个值都在 1-255 之间，如果我想打印这些数字的 ASCII 字符而不是它本身的数字，我会这样做，

```
msg='';

    for i = 1 : length(data)
        msg=horzcat(msg,floor(data(i))); % horzcat doesn't ignore spaces
    end

msg 
```

在上面的代码中，Matlab 不知道`msg`循环结束前的大小，我真正想做的是`msg`在循环开始之前声明变量的大小。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:41:22.290

您可以像使用`char`矩阵一样预分配字符串（字符串只是一个 char 数组）：

```
msg = char(zeros(100,1)); 
```

但是，这可能不是您需要的（我还没有看到任何人为任何东西预先分配字符串）。鉴于这是您想要做的

> 假设我现在有一个名为 data 的矩阵，如果我想打印这些数字的 ASCII 字符而不是它本身的数字，它的每个值都在 1-255 之间

您可以简单`char(data)`地显示 ASCII/Unicode 值。

# javascript - GET / POST node.js（跨域）

> ID：15398530
> 
> 赞同：2
> 
> 时间：2013-03-13T23:31:46.333
> 
> 标签：javascript, node.js, post, get, cross-domain

我们的服务器已经可以从客户端接收字符串。

我们希望客户得到回复并在文本区域中显示它。

应用程序.js：

```
var sys = require ('util'),
    url = require('url'),
    http = require('http'),
    qs = require('querystring');
var stringforfirefox = 'hi man!';
http.createServer(function (req, res) {  

    if(req.method=='POST') {
        var body='';
        req.on('data', function (data) {
            body +=data;
        });
        req.on('end',function(){

            var POST =  qs.parse(body);
            console.log(POST);
        });

    }
    else if(req.method=='GET') {
        var url_parts = url.parse(req.url,true);
        console.log(url_parts.query);

    }

}).listen(1337, "127.0.0.1"); 
```

对于测试，我们使用 localhost url。稍后它将是跨域的。这是网站

索引.html：

```
<!DOCTYPE html>
<html>
<head>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>

        document.onkeypress = function keypressed(e){

            if (e.keyCode == 112) {

                httpGet('http://localhost:1337/index77?title=message_for_server')  ;
            }

            if (e.keyCode == 113) {

                var xmlhttp;

                xmlhttp=new XMLHttpRequest();

                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        document.getElementById("textarea1").innerHTML=xmlhttp.responseText;
                    }
                }
                xmlhttp.open("POST","http://localhost:1337/index77",true);
                xmlhttp.send("fname=Henry&lname=Ford");
            }
        }

        function httpGet(theUrl)
        {
            var xmlHttp = null;

            xmlHttp = new XMLHttpRequest();

            xmlHttp.open( "GET", theUrl, false );
            xmlHttp.send( "fname=Henry&lname=Ford" );

            alert( xmlHttp.responseText);
        }
    </script>

</head>
<body>

<form>
    <p>
        <textarea id="textarea1"  cols="25" rows="25" name="textfeld"></textarea>
           </p>
</form>
</body>
</html> 
```

我们想扩展我们这里的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:57:53.380

You need to send the response (res).

```
if(req.method=='POST') {
    var body='';
    req.on('data', function (data) {
        body +=data;
    });
    req.on('end',function(){
        res.send(200, "The request's body: " + body);
        var POST =  qs.parse(body);
        console.log(POST);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:59:28.497

`XMLHttpRequest()` for obvious security reasons cannot be used to post or fetch information cross-domainly. On some browser it might work while you are in a localhost environment, but when the site is launched from the Web this is not acceptable.

To workaround this, you will have to submit the AJAX request to the same domain, and process the cross-domain operation on server-side.

JavaScript tools like the Google News RSS Feeds use this method to workaround those security barriers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:19:36.173

这里客户端和服务器之间的字符串交换完美地工作：

应用程序.js：

```
var sys = require ('util'),
    url = require('url'),
    http = require('http'),
    qs = require('querystring');
var stringforfirefox = 'hi man!';
http.createServer(function (req, res) {

    if(req.method=='GET') {

        res.statusCode = 200;

        var url_parts = url.parse(req.url,true);
        var query = url_parts.query["title"];
        console.log(query);

        stringforfirefox = 'your input:  '+query;

        res.end("__stringexchange(" + JSON.stringify( stringforfirefox) + ");");
    }

}).listen(1337, "127.0.0.1"); 
```

索引.html：

```
<!DOCTYPE html>
<html>
<head>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>

        function __stringexchange(data) {

            document.getElementById('textarea1').value= data;}

        document.onkeypress = function keypressed(e){

            if (e.keyCode == 112) {
                var keyword =  document.getElementById('edit1').value   ;
                var script = document.createElement('script');
                script.src = 'http://localhost:1337/?title='+keyword;
                document.body.appendChild(script); // triggers a GET request
            }

        }

    </script>

</head>
<body>

<form>
    <input id="edit1" type="text" name="keyword"><br>
    <br>
    <textarea id="textarea1"  cols="25" rows="25" name="textfeld"></textarea>

</form>
</body>
</html> 
```

（我们其他[问题](https://stackoverflow.com/questions/15382423/triggering-a-get-request-with-document-body-appendchild)的代码组合。）

# python - 使用基于函数输出的值创建栅格

> ID：15398532
> 
> 赞同：0
> 
> 时间：2013-03-13T23:31:50.013
> 
> 标签：python, r, function, raster, arcmap

我有一个根据输入斜率和距离计算价格的函数。我想将价格作为栅格值写入栅格。我怎么做？OpenSource 和 ArcMap 解决方案可以工作。

```
slopeRaster = "slope.tif"
emptyRaster = "emptyraster.tif" # How do I create an empty raster?
road = "road.shp"

for cell in emptyraster:
    # get slope from sloperaster at cell location
    ...
    slope = ...

    # get distance to nearest road from center of cell
    ...
    distance = ...

    # calculate price for cell
    price = pricefunc(slope, distance)

    # write price to cell as value  # How do I write a value to a raster 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:06:40.330

您可以在`R`. 我建议您[下载并安装它](http://cran.ma.imperial.ac.uk/)（它是免费且开源的）。您唯一需要做的就是弄清楚如何在 R 中编写价格函数，这就是我建议您发布该代码的原因。一旦你定义了价格函数，你就可以从 R 命令行运行这些命令。

```
# Install required packages
install.packages( c("raster" , "spatstat" , "sp" , "rgdal") , dep = TRUE )

# Load required packages
require( raster )
require( spatstat )
require( sp )
require( rgdal )

# Read in your data files (you might have to alter the directory paths here, the R default is to look in your $USERHOME$ directory R uses / not \ to delimit directories
slp <- raster( "slope.tif" )
roads <- readShapeLines( "road.shp" )

# Create point segment pattern from Spatial Lines
distPSP <- as.psp( roads )

#   Create point pattern from slope raster values
slpPPP <- as.ppp( values(slp) )

#   Calculate distances from lines for each cell
distances <- nncross( slpPPP , distPSP )

# Create raster with calcualted distances
rDist <- raster( slp )
values( rDist ) <- distances

# Define your princefunc() here. It should take two input values, slope and distance and return one value, which I have called price
pricefunc <- function( slp , dist ){
    ...my code
        ... more code
    ...more code
    return( price )
}

# Calculate price raster using your price function and save as output.tif
rPrice <- overlay( slp , rDist , fun = function( x , y ){ pricefunc( x , y ) } , filename = "output.tif" ) 
```

# c# - 在运行时使用类型变量创建类型列表

> ID：15398543
> 
> 赞同：3
> 
> 时间：2013-03-13T23:33:05.153
> 
> 标签：c#, list, generics, dynamic, types

我试图简化我的方法，在一个函数中创建多个变量，这些变量针对不同的类型和不同的动作重复，最终我将迁移到一个可以处理多种类型的函数，但我分阶段进行。我希望能够在其类型中而不是 List 中创建对象列表，而不必在任何地方复制/粘贴对象类型。我曾希望通过一些非常简单的事情来实现这一点

```
Type t = typeof(LinkAddy);
var x = List<t>(); 
```

但这不会编译。

然后我尝试了以下答案提供的不同解决方案：[Storing variable type and using it to create collections at runtime](https://stackoverflow.com/questions/6629941/storing-variable-type-and-using-it-to-create-collections-at-runtime)

```
static IList createGenericList(Type typeInList) {
    var genericListType = typeof(List<>).MakeGenericType(new[] { typeInList });
    return (IList)Activator.CreateInstance(genericListType);
} 
```

和

```
static List<T> createGenericList<T>() {
    List<T> genericListType = new List<T>();
    return genericListType;
} 
```

所以这里是不同的方法及其结果：

```
Type ThisType = typeof(LinkAddy);
// The normal list method, means I have to copy/paste LinkAddy everywhere
var fromQuery = new List<LinkAddy>();
// Makes a List, but I still have to put LinkAddy
var fromQuery_IsNew = createGenericList<LinkAddy>();
// Provides a List, I don't have to place LinkAddy
// but its a List<object> and not List<LinkAddy> so wherever I use
// the objects, I'll have to cast the object like
// string title = (fromQuery_IsDiff[0] as LinkAddy).Title;
var fromQuery_IsDiff = createGenericList(ThisType); 
```

**编辑：**最终，我不会在运行时知道类型，该函数将成为通用函数，因此我可以将 LinkAddy 作为类型或其他类型传递，它会根据需要生成列表。第一步只是在整个函数中使用泛型，然后检查类型是否需要更具体。这是一个包含大约 200 行代码的大型函数的一部分，这些代码与数据库同步的列表验证检查有关（它确定缓存和服务器版本中的哪个更新，无论哪个更新，如果您有权这样做）。我有多个类似于 LinkAddy 的类，它们使用 WCF RIA 服务和 SilverLight 同步到服务器上的 SQL 数据库。这些条目还存储在一个执行 XML 序列化并将 XML 文件保存给用户的类中 s 系统（缓存）。这使我在现场的代理可以在没有互联网连接的情况下访问我的大部分站点数据，就像他们在客户面前经常遇到的情况一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:38:28.173

目前还不清楚你期望这可能如何工作，特别是考虑到评论：

```
// Provides a List, I don't have to place LinkAddy
// but its a List<object> and not List<LinkAddy> so wherever I use
// the objects, I'll have to cast the object like
// string title = (fromQuery_IsDiff[0] as LinkAddy).Title; 
```

如果您足够了解要转换为`LinkAddy`（*作为*转换比使用`as`IMO 更好），那么您在编译时就清楚地知道类型。如果您在编译时知道类型，只需将其作为类型参数提供。

*当您不*知道编译时涉及的类型时，类似的东西`MakeGenericType`很有用，这意味着您*不能*强制转换......并且无论如何您都不能使用您所知道的有关该类型的任何其他东西。

 **您可能会使用动态类型来代替......但是如果您知道会有一个`Title`属性，那么您*真正*想要的也许是一个接口，而不是表达共性。然后，您可能会使用对该接口有约束的泛型方法。

无论如何，您应该考虑在编译时您知道哪些事情，以及哪些事情仅在执行时才知道。在大多数情况下，泛型针对的是在编译时已知的类型......虽然在执行时通过反射使用泛型是可能的，但它有点违背设计，所以当它令人沮丧时你不应该感到惊讶。**

# java - 无法为 RatingBar 设置评级

> ID：15398545
> 
> 赞同：0
> 
> 时间：2013-03-13T23:33:14.010
> 
> 标签：java, android, nullpointerexception, ratingbar

我正在尝试创建一个`RatingBar`，但它似乎不起作用。似乎有两个问题。首先，当我不​​尝试在 Java 中对它做任何事情时，例如`setRating()`出现评级星，但出现超过 20 颗星，有 5 组。另一方面，当我尝试调用`setRating()`它时，它会以`NullPointerException`. 如果这有什么不同，我会在弹出窗口中显示评级和其他信息。

这是xml。注意difficultPopup和terrainPopup：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableLayout
        android:id="@+id/add_spot_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="1"
        android:stretchColumns="1" >

       <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >
            <TextView android:text="Distance:" />
            <TextView android:id="@+id/distancePopup" />
        </TableRow>

       <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >
            <TextView android:text="Address:" />
            <TextView android:id="@+id/addrPopup" />
        </TableRow>

       <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >
            <TextView android:text="Type:" />
            <TextView android:id="@+id/typePopup" />
        </TableRow>

       <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >
            <TextView android:text="Terrain:" />
            <RatingBar
                android:id="@+id/terrainPopup"
                style="?android:attr/ratingBarStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:isIndicator="true"
                android:numStars="5"
                android:rating="1"
                android:stepSize="1"/>
        </TableRow>

        <TableRow>
            <TextView android:text="Difficulty:" />
            <RatingBar
                android:id="@+id/difficultyPopup"
                style="?android:attr/ratingBarStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:isIndicator="true"
                android:numStars="5"
                android:rating="1" 
                android:stepSize="1"/>

        </TableRow>

       <TableRow
            android:layout_marginBottom="2sp"
            android:layout_marginTop="2sp" >
            <TextView android:text="Description:" />
            <TextView
                android:id="@+id/descPopup"
                android:gravity="top"
                android:lines="2"
                android:maxLines="2"
                android:scrollHorizontally="false" />
        </TableRow>

    </TableLayout>

</ScrollView> 
```

这是Java：

```
public boolean onMarkerClick(Marker marker)
{
    HashMap<String, String> details = markerMap.get(marker.getId());

    Dialog dialog = new Dialog(MainActivity.this);
    dialog.setContentView(R.layout.popup);
    dialog.setTitle(details.get("name"));
    dialog.setCancelable(true);
    //there are a lot of settings, for dialog, check them all out!

    //set up text
    TextView textName = (TextView) dialog.findViewById(R.id.distancePopup);
    textName.setText(details.get("distance"));

    TextView textAddress= (TextView) dialog.findViewById(R.id.addrPopup);
    String addr = details.get("address").equals("null") ? "" : details.get("address");
    textAddress.setText(addr);

    TextView textType = (TextView) dialog.findViewById(R.id.typePopup);
    textType.setText(details.get("type"));

    TextView textDesc = (TextView) dialog.findViewById(R.id.descPopup);
    textDesc.setMovementMethod(new ScrollingMovementMethod());
    textDesc.setText(details.get("description"));

    RatingBar terrainRatingBar = (RatingBar) findViewById(R.id.terrainPopup); //No error here
    System.out.println("Terrain: "  + details.get("terrain"));//This works
    terrainRatingBar.setRating(Float.parseFloat(details.get("terrain"))); //This does not work

    float poo = difficultyRatingBar.getRating();
    System.out.println("poo: "  + poo); 

    //now that the dialog is set up, it's time to show it    
    dialog.show();
    return false;
} 
```

这是错误日志：

```
03-13 23:39:55.937: D/dalvikvm(19197): GC_CONCURRENT freed 2251K, 18% free 11141K/13447K, paused 1ms+2ms
03-13 23:39:56.047: D/dalvikvm(19197): GC_CONCURRENT freed 738K, 18% free 11099K/13447K, paused 2ms+2ms
03-13 23:40:01.717: D/CLIPBOARD(19197): Hide Clipboard dialog at Starting input: finished by someone else... !
03-13 23:40:04.027: D/AndroidRuntime(19197): Shutting down VM
03-13 23:40:04.027: W/dalvikvm(19197): threadid=1: thread exiting with uncaught exception (group=0x40c3f1f8)
03-13 23:40:04.032: E/AndroidRuntime(19197): FATAL EXCEPTION: main
03-13 23:40:04.032: E/AndroidRuntime(19197): java.lang.NullPointerException
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.example.neatspots.MainActivity.onMarkerClick(MainActivity.java:461)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.google.android.gms.maps.GoogleMap$4.f(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.google.android.gms.internal.an$a.onTransact(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at android.os.Binder.transact(Binder.java:297)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.google.android.gms.maps.internal.IOnMarkerClickListener$Stub$Proxy.onMarkerClick(IOnMarkerClickListener.java:84)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.z.by.a(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.y.ba.a(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.y.d.c(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.y.bj.a(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.y.v.c(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.y.bf.onSingleTapConfirmed(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.d.v.onSingleTapConfirmed(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at maps.d.j.handleMessage(Unknown Source)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at android.os.Looper.loop(Looper.java:137)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at android.app.ActivityThread.main(ActivityThread.java:4507)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at java.lang.reflect.Method.invokeNative(Native Method)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at java.lang.reflect.Method.invoke(Method.java:511)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-13 23:40:04.032: E/AndroidRuntime(19197):    at dalvik.system.NativeStart.main(Native Method) 
```

**更新**

看来terrainRatingBar.getRating() 也会引发相同的错误。

**更新 2** Cristian 修复了 NPE，但布局问题仍然存在：

![在此处输入图像描述](../Images/7e3d906a485dcf90823af1b4d53b704b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:04:04.557

改用这个：

```
RatingBar terrainRatingBar = (RatingBar) dialog.findViewById(R.id. terrainPopup); 
```

代替：

```
RatingBar terrainRatingBar = (RatingBar) findViewById(R.id. terrainPopup); 
```

# html - HTML5 验证：使用 element.validity.typeMismatch 和 element.validity.tooLong

> ID：15398547
> 
> 赞同：5
> 
> 时间：2013-03-13T23:33:33.840
> 
> 标签：html, validation, constraints, html5-validation

我有一个我创建的[Javascript 验证框架](https://github.com/vivin/regula)，我正在尝试向它添加 HTML5 验证。在我的框架中，验证是通过使用`data-`属性将验证约束绑定到元素来完成的。这有点类似于使用 、 、 等属性进行 HTML5 验证`required`的`min`方式`max`。

我现在有两个问题。好吧，它们可能不一定是问题，但我想更好地了解情况，以便我可以决定如何前进。

我遇到的第一个问题，如果元素的值与元素的类型不匹配`element.validity.typeMismatch`，则设置为。`true`例如，如果您的元素的 URL 值无效，`type="url"`或者元素的电子邮件无效`type="email"`。但是，这种行为对于`type="number"`. 行为不一致的原因是浏览器*不允许您*向`input`with添加无效值`type="number"`（通过 UI 甚至通过 DOM）。因此，`element.validity.typeMismatch`永远不会设置为`true`并且`element.checkValidity()`总是返回`true`。此行为与您可以在`type="url"`其中`type="email"`输入*无效*值的行为不一致，`element.validity.typeMismatch`并且`element.checkValidity()`返回预期值。

我在使用`maxlength`. 有一个`ValidityState`名为`tooLong`at的属性`element.validity.tooLong`。当直接从浏览器与 an 交互时，这个值似乎*永远不会*设置为，因为您永远不能输入比 * 值更长的值。此外，即使您可以设置比*DOM**更长*的值，也永远不会设置为. 所以我想知道如果这个属性或多或少没用，为什么它仍然存在。`true``input``maxlength` *`maxlength` *`element.validity.tooLong``true`**

 **目前，HTML5 验证在这些约束下的表现如何？如果浏览器不允许您输入无效值，如何为这些约束违规生成错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:17:49.310

我能够找到有关此问题的更多说明。W3C和[WHATWG](http://www.w3.org/html/wg/drafts/html/master/forms.html#suffering-from-a-type-mismatch)[都说](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#suffering-from-a-type-mismatch)：

> ***`typeMismatch`***
> 
> 控件存在类型不匹配。
> 
> [...]
> 
> ***遭受类型不匹配的困扰***
> 
> 当允许任意用户输入的控件具有不正确语法（电子邮件、URL）的值时。

所以看起来这个值只在`type`设置为`url`or的情况下设置`email`。在所有其他情况下，它不会被设置，因为`input`元素不允许用户将其值设置为无效值（手动或编程）。

不幸的是，这并不能解决问题`tooLong`；规范说如果输入值太长，就会设置这个，但似乎不是这样。**

# ruby-on-rails-3 - has_many：通过

> ID：15398549
> 
> 赞同：0
> 
> 时间：2013-03-13T23:33:40.307
> 
> 标签：ruby-on-rails-3, has-many-through

我有一个留言板。A`User`可以创建一个新的`Discussion`. A`User`也可以为 a 创建一个新`Post`的`Discussion`。

**用户.rb**

```
has_many :discussions 
has_many :replies, through: :discussions, source: :posts 
```

所以一个`Discussion`有很多`Posts`属于很多不同的`Users`。在我的`show`页面上，我想显示所有`Posts`和它们对应的`Users`. 我知道我可以`User's`通过`user.replies`. 但我不知道如何做相反的事情：`User`如果我有`Post`?

这是我到目前为止所拥有的：

```
<% @posts.each do |post| %>
  <div class="discussion_right">
    <div class="discussion_head">
      <% t = post.created_at %>
      <%= t.strftime("Posted on %b %-d, %Y %l:%M %P") %>
    </div>
    <div class="discussion_body">
      <%= post.body %>
    </div>
  </div>
  <div class="discussion_left">
    <div class="discussion_head">
      <%= post.user.first_name %>
    </div>
  </div>
<% end %> 
```

**讨论.rb**

```
belongs_to :user
has_many :posts 
```

**post.rb**

```
belongs_to :discussion 
```

显然这条线`post.user.first_name`不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:41:36.767

如果用户可以创建帖子，那么您需要添加`user_id`到帖子并添加`belongs_to`关系

```
rails g migration add_user_id_to_posts user_id:references
rake db:migrate

# post.rb
belongs_to :user 
```

那么你应该能够查询`post.user`

# c# - 使用 .net 自动执行 Google Chrome 打印到 PDF 功能

> ID：15398550
> 
> 赞同：2
> 
> 时间：2013-03-13T23:33:41.523
> 
> 标签：c#, .net, google-chrome, pdf

我正在创建一个处理一些 XML 数据的小型 .Net 应用程序，使用 XSLT 将 XML 转换为 HTML。

谷歌浏览器在它的打印选项下有一个很棒的功能来保存到 PDF。我可以查看我的 HTML 文件并将其保存为分页 PDF 文档。

我想通过我的.Net 应用程序以编程方式使用 Google Chrome 的 PDF 功能并从转换后的 XML 自动生成 PDF？

如何使用我的 .Net 代码执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:37:36.077

听起来有点矫枉过正。我会为您编写一个小查看器来查看结果 HTML（使用 Internet Explorer API 或 WebKit）。然后 API 到 PDFCreator COM 库，只需单击一个按钮即可将其转换为 PDF...

[http://pdfcreator.svn.sourceforge.net/viewvc/pdfcreator/trunk/COM/Samples/Dot%20Net/VS2005/C%23/Sample1/Form1.cs?revision=1276&view=markup](http://pdfcreator.svn.sourceforge.net/viewvc/pdfcreator/trunk/COM/Samples/Dot%20Net/VS2005/C%23/Sample1/Form1.cs?revision=1276&view=markup)

[http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

祝你好运！

# c - 使用 SIGALRM 切换线程上下文

> ID：15398556
> 
> 赞同：0
> 
> 时间：2013-03-13T23:34:41.373
> 
> 标签：c, multithreading, race-condition, ucontext

我有个问题。我需要实现一个使用计时器和 SIGALRM 切换 ucontext 线程的程序，但是当我使用 evict_thread 函数切换线程时出现分段错误。我相信这是竞争条件的结果，因为它发生在程序执行期间的不同时间。这是我的 evict_thread

```
void evict_thread(int signal)
{   
// Check that there is more than one thread in the queue
if ((int)list_length(runqueue) > 1)
{
    // Remove the currently executing thread from the runqueue and store its id
    int evict_thread_id = list_shift_int(runqueue);

    // Place the thread at the back of the run queue
    list_append_int(runqueue, evict_thread_id);

    // Get the id of the thread that is now at the head of the run queue
    int exec_thread_id = list_item_int(runqueue, 0);

    // Set the start time for new thread to the current time
    clock_gettime(CLOCK_REALTIME, &thread_table[exec_thread_id]->start);

    printf("Switching context from %s to %s\n",
        thread_table[evict_thread_id]->thread_name,
        thread_table[exec_thread_id]->thread_name);

    // Execute the thread at the head of the run queue
    if (swapcontext(&thread_table[evict_thread_id]->context, &thread_table[exec_thread_id]->context) == -1)
    {
        perror("swapcontext failed\n");
        printf("errno: %d.\n", errno);
        return;
    }   
}
return;     
} 
```

上述函数的调用方式如下

```
// Set the SIGALRM
if (sigset(SIGALRM, evict_thread) == -1)
{
    perror("sigset failed\n");
    printf("errno: %d.\n", errno);
    return;
}

// Initialize timer
thread_switcher.it_interval.tv_sec  = 0;
thread_switcher.it_interval.tv_usec = quantum_size;
thread_switcher.it_value.tv_sec = 0;
thread_switcher.it_value.tv_usec =  quantum_size;
setitimer(ITIMER_REAL, &thread_switcher, 0); 
```

运行队列只是一个全局整数列表，它们是指向 ucontext 线程的全局指针表的索引。该列表是使用来自 libslack.org 的 C 通用实用程序库中的列表数据结构实现的

当我禁用计时器并让每个线程在切换上下文之前运行完成时，程序会正常运行，但是当线程在执行期间切换时，大约 80% 的时间会出现分段错误。

此外，当我尝试使用 gdb 回溯分段错误时，它说它发生在系统调用中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:04:24.660

我不能就如何让它发挥作用给你任何建议，但这里有几点关于什么不起作用：

信号处理程序与您的其他代码异步运行。例如，当某些代码正在更新您`runqueue`的 `list_append_int(runqueue, evict_thread_id);` .

`printf()`不应在信号处理程序中调用，它可能会死锁或更糟。 [这](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)是在信号处理程序中可以安全调用的函数列表。没有提到在信号处理程序中调用 setcontext/swapcontext 是安全的，尽管它的 linux 手册页说您可以在信号处理程序中调用 setcontext() - 我不确定这有什么权威性。

另请注意 setcontext() 的联机帮助页中所说的内容：

> 当信号发生时，当前的用户上下文被保存，内核为信号处理程序创建一个新的上下文。

因此，当您发出 swapcontext() 时，您可能会保存信号处理程序的上下文，而不是在信号启动之前运行的当前上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:04:32.923

请记住，信号处理程序与您的主代码异步运行。该`man 7 signal`页面值得仔细阅读，以确保您遵守指南。例如，在该部分`Async-signal-safe-functions`中没有提及`printf`或其他功能，例如`swapcontext`. 这意味着您不能从信号处理程序可靠地调用这些函数。

一般来说，尽量在信号处理程序中做尽可能少的工作。通常这只是意味着`sig_atomic_t`在信号处理程序中设置一个类型的标志，然后在你的主循环中检查这个标志的状态。

也许重新排列您的代码，以便上下文切换发生在主循环中，而不是来自信号处理程序。您也许可以`sigwait`在主循环中使用来等待计时器信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:10:35.320

作为猜测：您正在向内核传递一些从那里看不到的东西，因为您切换了上下文。您正在询问段错误，但您的代码正在做有趣的事情。

也许如果您考虑一个更标准的线程调度模型，您可以避免这些问题。除了尝试使用上下文切换来调度线程，还有其他方法可以做到这一点。您可以使用完全相同的当前程序模型从驱逐线程中调用它们。

其中一些建议是特定于系统的。如果您能告诉我们您的操作系统是什么，我们可以找到适合您情况的东西。或者你可以自己检查一下。

阅读有关 POSIX 线程调度的信息。请特别注意 SCHED_FIFO，它适用于您的模型。

[https://computing.llnl.gov/tutorials/pthreads/man/sched_setscheduler.txt](https://computing.llnl.gov/tutorials/pthreads/man/sched_setscheduler.txt)

这通常适用于使用 POSIX 线程库来调度线程，而不是你试图以艰难的方式去做。

# c++ - 私有基类和多重继承

> ID：15398558
> 
> 赞同：14
> 
> 时间：2013-03-13T23:34:44.320
> 
> 标签：c++

考虑 ：

```
struct A { int x;};
struct B : A {};
struct C : private A {}; 
```

现在，正如预期的那样，代码

```
struct D : C
{
    D () { C::x = 2; }
};

int main () { D d; } 
```

不编译：

```
test2.cc: In constructor ‘D::D()’:
test2.cc:1:16: error: ‘int A::x’ is inaccessible
test2.cc:7:12: error: within this context 
```

现在，如果我这样做

```
struct D : B, C
{
    D () { C::x = 2; }
};

int main () { D d; } 
```

然后错误消失！不`A::x`应该也无法访问吗？这里的解释是什么？

如果这很重要，我正在使用`gcc version 4.7.2 (GCC)`linux x86_64。

**编辑：**它不能与 Clang 3.2 一起编译：[clang 3.2](http://liveworkspace.org/code/188WMz$74)

但它适用于 gcc 4.7.2：[gcc 4.7.2](http://ideone.com/clone/VvWyUW)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T23:43:13.217

这肯定是一个**错误**。没有理由从 class 继承`B`也应该改变`C`'s 成员的可访问性。

甚至 GCC 4.8.0 (beta) 似乎都没有解决这个问题。另一方面，Clang 3.2 和 ICC 13.0.1[正确地拒绝编译此代码](http://liveworkspace.org/code/188WMz%2473)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T22:27:38.840

答案是clang是正确的。但是，根据标准，代码也可能因模棱两可而失败。

如果您查看 11.2p5，它有一个相关的注释（是的，我知道注释是非规范性的）：

> [ 注意：此类可以是显式的，例如，当使用限定 ID 时，也可以是隐式的，例如，当使用类成员访问运算符 (5.2.5) 时（包括添加隐式“this->”的情况）。**如果同时使用类成员访问运算符和限定 ID 来命名成员（如 中`p->T::m`），则命名成员的类是由限定 ID 的嵌套名称说明符表示的类（即 T）** . ——尾注]

这个注释的意思是，如果你添加`this->`到`C::x = 2;`then`C`是命名成员的类，并且[gcc 4.7.2 在这种情况下正确失败](http://liveworkspace.org/code/F2wWf%240)。

现在的问题是**为谁命名该成员的类** `C::x`？由`naming class`相同指定`11.2p5`：

> 对成员的访问受该成员所在的类的影响。**这个命名类是在其中查找和找到成员名称的类。**

现在，在 10.2 中指定了类成员的名称查找，在阅读完所有内容后，我得出的结论`x`是子对象集的并集，如下所示**：**

> 否则，新的 S(f, C) 是具有共享声明集和子对象集并集的查找集。

这意味着根据成员查找规则`x`可以是 from`B` *或* `A`! 这使得代码格式错误：`Name lookup can result in an ambiguity, in which case the program is ill-formed.` 但是，这种歧义**可以**根据 10.2p8 解决：

> 歧义通常可以通过使用类名限定名称来解决。

从[Clang 源代码](https://llvm.org/viewvc/llvm-project/cfe/trunk/lib/Sema/SemaExpr.cpp?sortby=rev&r1=97677&r2=97676&pathrev=97677)中，我们可以看到他们选择这样做：

```
// If the member was a qualified name and the qualified referred to a
// specific base subobject type, we'll cast to that intermediate type
// first and then to the object in which the member is declared. That allows
// one to resolve ambiguities in, e.g., a diamond-shaped hierarchy such as:
//
//   class Base { public: int x; };
//   class Derived1 : public Base { };
//   class Derived2 : public Base { };
//   class VeryDerived : public Derived1, public Derived2 { void f(); };
//   void VeryDerived::f() {
//     x = 17; // error: ambiguous base subobjects
//     Derived1::x = 17; // okay, pick the Base subobject of Derived1
//   } 
```

但是，请注意`can`上述引用的措辞：`often can be resolved`. 这意味着**它们不一定要解决**。所以，我认为根据标准，代码应该因为模棱两可或私有成员访问失败而失败。

**编辑**

`can`对于此处是否存在歧义的解释以及是否存在歧义，存在一些争论。我找到了[缺陷报告 39。冲突的歧义规则](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#39)讨论了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T23:45:01.313

我不确定确切的原因，但我知道这一点：

当您在像这样的菱形图案中使用多重继承时，您将在派生对象 D 中拥有基类 A 的多个副本。

在您的情况下，对象 D 有 2 个名为 A::x 的成员，这可能会导致编译器混淆。

这被称为[钻石问题](http://en.wikipedia.org/wiki/Diamond_inheritance#The_diamond_problem)

# json - 在 go 中出现 JSON 恐慌

> ID：15398559
> 
> 赞同：3
> 
> 时间：2013-03-13T23:34:48.760
> 
> 标签：json, go, mgo

我尝试运行以下代码

```
package main

import (
    "encoding/json"
    "fmt"
    /*"labix.org/v2/mgo"
    "labix.org/v2/mgo/bson"*/
)

func insertEntry(j *map[string]interface{}, entry string) {
    err := json.Unmarshal([]byte(entry), j)
    if err != nil {
        panic(err)
    }

}

func main() {
    c1 := "{" +
        `"mw" : 42.0922,` +
        `"ΔfH°gas" : {` +
        `   "value" : 372.38,` +
        `   "units" : "kJ/mol"` +
        `},` +
        `"S°gas" : {` +
        `   "value" : 216.81,` +
        `   "units" : "J/mol×K"` +
        `},` +
        `"index" : [` +
        `   {"name" : "mw", "value" : 42.0922},` +
        `   {"name" : "ΔfH°gas", "value" : 372.38},` +
        `   {"name" : "S°gas", "value" : 216.81}` +
        `]` +
        `}`

    c2 := "{" +
        `"name" : "silicon",` +
        `"mw" : 32.1173,` +
        `}` +
        `"index" : [` +
        `   {"name" : "mw", "value" : 32.1173}` +
        `]` +
        `}`

    var m map[string]interface{}

    insertEntry(&m, c1)
    insertEntry(&m, c2)
    chemical := m["ΔfH°gas"].(map[string]interface{})
    fmt.Println("value: %s\n", chemical["value"].(string))
    fmt.Println("units: %s\n", chemical["units"].(string)) 
```

但我收到以下错误消息：

```
 $ go run chemeo.go 
    panic: invalid character '}' looking for beginning of object key string

    goroutine 1 [running]:
    main.insertEntry(0xf840045100, 0x4badc4, 0x7f5e00000056, 0x20043115c)
            /media/mictadlo/projects/mgo/chemeo/chemeo.go:19 +0xd8
    main.main()
            /media/mictadlo/projects/mgo/chemeo/chemeo.go:54 +0xa3

    goroutine 2 [syscall]:
    created by runtime.main
            /usr/local/go/src/pkg/runtime/proc.c:221
    exit status 2 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T23:43:45.557

您的`c2`变量持有无效的 JSON：

```
c2 := "{" +
`"name" : "silicon",` +
`"mw" : 32.1173,` +
`}` +
`"index" : [` +
` {"name" : "mw", "value" : 32.1173}` +
`]` +
`}` 
```

清理干净后是这样的：

```
c2 := `{
    "name" : "silicon",
    "mw" : 32.1173,
}
"index" : [
    {"name" : "mw", "value" : 32.1173}
]
}` 
```

`}`你可以看到中间有一个额外的。

它应该如下所示：

```
c2 := `{
    "name": "silicon",
    "mw": 32.1173,
    "index": [
        {
            "name": "mw",
            "value": 32.1173
        }
    ]
}` 
```

# asp.net - 密码学 - 服务器的公钥

> ID：15398561
> 
> 赞同：0
> 
> 时间：2013-03-13T23:34:58.710
> 
> 标签：asp.net, cryptography, public-key-encryption

我是一个完整的初学者 asp.net 密码学。

我想从客户端向服务器发送经过数字签名的加密消息。

我发现的每个教程都指出“您获取其他人的（服务器？！？）公钥（从其证书），使用该密钥加密和签署您的消息，然后其他人收到您的消息后可以使用其私钥解密它.

我知道如何通过 asp.net 的 Request 对象访问客户端证书的属性。

我的问题是 - 我如何获得服务器的公钥以首先启动整个过程。

我错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T23:43:45.363

[正如您在加密和解密方法](http://www.c-sharpcorner.com/uploadfile/brij_mcn/public-key-encryption-rsa-method-for-encryption-and-decryption-in-Asp-Net/)中看到的，您可以使用 RSA。

# java - 复制 LinkedQueue

> ID：15398566
> 
> 赞同：1
> 
> 时间：2013-03-13T23:35:07.373
> 
> 标签：java, queue

我正在尝试复制原始队列并打印出队列的内容，然后再次运行副本并打印队列中的元素总数。当我在原始队列上运行 CopyQueue 方法并将其用作 ShowQueue 方法的输入时，它会更改原始队列。

```
public static void main(String[] args) {
    LinkedUnbndQueue test = new LinkedUnbndQueue();
    test.enqueue('a');
    test.enqueue('b');
    System.out.println( showQueue(CopyQueue(test)) );
    System.out.println( Count(CopyQueue(test)) );

}

public static LinkedUnbndQueue CopyQueue(LinkedUnbndQueue orig){
    LinkedUnbndQueue copy = orig;
    return copy;
}

public static int Count(LinkedUnbndQueue orig){
    int count = 0;
    while(!orig.isEmpty() ){
        orig.dequeue();
        count = count + 1;
    }       
    return count;
}

public static String showQueue(LinkedUnbndQueue orig){
    String str = "";
    while(!orig.isEmpty()){
        str = str + orig.dequeue() + " ";
    }
    return str;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T14:25:17.420

您的方法 CopyQueue 是完全错误的。您正在使用别名而不是复制队列的内容。

当你这样做时：

```
public static LinkedUnbndQueue CopyQueue(LinkedUnbndQueue orig){
  LinkedUnbndQueue copy = orig;
  return copy;
} 
```

您正在返回一个指向同一个原始队列的指针。如果要复制队列，则需要复制新结构中的所有元素，例如：

```
public static LinkedUnbndQueue CopyQueue(LinkedUnbndQueue orig){
  LinkedUnbndQueue copy = new LinkedUnbndQueue();
  for(Object o : orig){
     copy.add(o);
  }
  return copy;
} 
```

# php - 如何对两个 JSON 对象进行连接？

> ID：15398567
> 
> 赞同：0
> 
> 时间：2013-03-13T23:35:10.360
> 
> 标签：php, json

可以在 PHP 上加入两个不同列名称（id<->lid）上的两个 JSON 吗？JSON 看起来像这样：

```
 [{"id":504,"displayname":"Jack","idname":"Work"},{"id":505,"displayname":"Peter","idname":"Home"}]
[{"id":12,"role_id":1800,"prv":2,"lid":504},{"id":20,"role_id":1800,"prv":2,"lid":505}] 
```

输出应如下所示：

```
 [{"id":504,"displayname":"Jack","idname":"Work","id":12,"role_id":1800,"prv":2,"lid":504},{"id":505,"displayname":"Peter","idname":"Home","id":20,"role_id":1800,"prv":2,"lid":505}] 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:44:57.960

这里的问题是您的 JSON 中将有同名的键。理论上，这个答案就是你要找的：[答案](https://stackoverflow.com/questions/9241800/merging-two-complex-objects-in-php)

但是，如果您需要自定义合并算法，则可以使用以下方法：

```
$json1 = json_decode($json1String, true);
$json2 = json_decode($json2String, true);

$mergedJson = array();

foreach($json1 as $values)
{
    foreach($json2 as $values2)
    {
        if($values['id'] == $values2['lid'])
        {
            $mergedJson[] = array_merge_recursive($values, $values2);
            break;
        }
    }
}

$finalJsonString = json_encode($mergedJson); 
```

这是非常基本的。我正在使用数组合并递归函数，但您不需要使用它。您很可能需要更多代码来手动合并数组。但这应该是一个很好的起点。

# javascript - javascript 可以请求在没有 xdr 的情况下托管的域吗？

> ID：15398569
> 
> 赞同：0
> 
> 时间：2013-03-13T23:35:29.010
> 
> 标签：javascript, ajax, jquery

我制作了 .js 程序，它在我拥有的页面上制作baners（每个页面都发布在不同的服务器上）。我`<script src="sample.com"></script>`用来运行它。问题是，我的脚本请求主服务器（托管脚本的文件）获取一些变量，然后我收到消息：

> Access-Control-Allow-Origin 不允许来源[http://php.kotarbki.pl 。](http://php.kotarbki.pl)

我无法在我使用的服务器上打开 Access-Control-Allow-Origin，但这不是解决它的某种方法吗，我的意思是这个脚本托管在请求的服务器上！

-------------SERVER1---------------server-first.com---------------

script.js 文件：

```
var xmlhttp;
if (window.XMLHttpRequest)    {
   xmlhttp=new XMLHttpRequest();
}else{
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function(){
   if (xmlhttp.readyState==4 && xmlhttp.status==200){
      return xmlhttp.responseText.split("#");
   }
}
xmlhttp.open("GET","http://server-first.com/page.php?action=getVariables",true);
xmlhttp.send(); 
```

page.php 文件：

```
if($_GET['action']=='getVariables'){
    echo $var1 . "#" . $var2;
} 
```

-------------SERVER2---------------second-server.com---------------

```
<html>
<script src="server-first.com/script.js"></script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:00:54.660

Your next recourse is likely going to be JSONP.

I typically don't use it, but here's the idea:

```
// dosomething.js -- script that's already on page
var doSomething = function (obj) {
    doStuff(obj);
};

// getdata.js script that's on another server
doSomething({ name : "...", id : 1234 });

var script = document.createElement("script"),
    parent = document.getElementsByTagName("script")[0].parentNode,
    src = "//otherserver.com/getdata.js";

script.src = src;
parent.appendChild(script); 
```

You've now created another script file, set the source (where you can add whatever query data you want) and appended it to whatever element the first script element is a child of (usually head or body). When that script file loads, it's going to call `doSomething()` with whatever you put inside.

So to take this to its logical conclusion, you could either set your server to treat `.js` extensions as PHP (or selectively, if the file doesn't actually exist), or you could ask from the JavaScript side, for `"//otherserver.com/getdata.php"`. Then, you'll have access from the php side to do whatever you need to do. Just echo back `echo "doSomething(" . ... .");";`.

You can accept a "callback" parameter in the query string, so that you can tell the file what the name of the function is that needs to fire on the JS page.

Also, you should make sure that your `content-type` header is set to javascript, rather than text or html, if you're going to use the `.php` extension.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:38:12.803

如果域名不相同，则不能从一个站点向另一个站点发出请求。

# php - 未捕获的错误：InvalidStateError：带有 AJAX 的 DOM 异常 11？

> ID：15398571
> 
> 赞同：7
> 
> 时间：2013-03-13T23:35:44.720
> 
> 标签：php, javascript, ajax

我正在运行一个简单的 AJAX 请求：

```
function makePages(num) {

    var conn = new XMLHttpRequest();

    conn.onreadystatechange = function() {
        if (conn.status === 200 && conn.readyState === 4) {  //error here
            $('#oldPost').before(conn.responseText);
        }
        else{
            return
        }
    }

    conn.open('GET','includes/feedExtra.php?num=' + num);
    conn.send();
} 
```

代码运行正确，PHP 返回正确的内容。但是，Chrome 的控制台出现错误：

> 未捕获的错误：InvalidStateError：DOM 异常 11

它指向这一行：

> if (conn.status === 200 && conn.readyState === 4) {

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T19:30:52.037

错误：

```
Uncaught Error: InvalidStateError: DOM Exception 11 
```

表示您在错误状态下要求状态。在 readyState 为 0 或 1 期间 conn.status 不可用。

您的问题是您在 readyState 为 0 和 1 时使用 conn.status 。

您需要添加代码以确保在不适当的状态下不会查询 conn.status，如下所示：

```
if(conn.readyState === 4 && conn.status === 200){ 
```

那么你的代码只会在适当的时候查询 conn.status 。

参考：

[为什么这段js会抛出DOM Exception？](https://stackoverflow.com/questions/15622985/why-does-this-piece-of-js-throw-a-dom-exception)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T23:59:02.787

Try this:

```
conn.open('GET','includes/feedExtra.php?num=' + num, false); 
```

`false` makes the request synchronous, `true` / default is asynchronous.

In your case, it's defaulting to `true`, which means the properties in your conditional `(conn.status === 200 && conn.readyState === 4)` aren't available **yet**. They will be until after the call.

Hopefully that helps you some.

Also, checkout this discussion [here](https://stackoverflow.com/questions/3488698/invalid-state-err-dom-exception-11-webkit).

# c# - 在障碍物周围找到尽可能少的边数的最短路径

> ID：15398572
> 
> 赞同：1
> 
> 时间：2013-03-13T23:35:47.260
> 
> 标签：c#, path-finding

我需要一种算法，它可以为我提供有关两点之间最短路径的信息。路径应该有尽可能少的边缘，因为每个航路点，每个转弯都需要时间和时间 - 在我的情况下 - 是昂贵的。

应该计算路径以绕过某些形状（主要是圆形或矩形）的障碍物。

存储路径的信息应该是路径路径点的笛卡尔坐标或极坐标（这是我的单元执行的命令，如转向角度 alpha，移动距离 b）。但是，我更喜欢每个航点的笛卡尔坐标。

没有导航网或其他东西，只有坐标系和有关障碍物和其他禁区的信息，其中一些是固定的，有些可能（并且很可能会）移动。

啊，所有这些都应该以某种方式在 .NET 中可用。

谢谢

//编辑：为了让事情更清楚一点，这是我打算做的图片：[https ://dl.dropbox.com/u/8802336/path.png](https://dl.dropbox.com/u/8802336/path.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:57:42.113

Your question can be interpreted two ways.

* * *

**1\. I want to find the shortest path, breaking ties by choosing the one(s) with the least number of edges**

You can do this by adding some very small number ε to the weight of every edge of the graph. The number must satisfy `ε < 1/numberOfEdges`. This will increase the length of every path by edges*ε, meaning shorter paths will be preferred. This works even with negative-weight edges. Be careful of floating-point inaccuracies.

* * *

**2\. I want to find the path with the least number of turns, breaking ties by choosing the one(s) with the shortest path**

You can do this by adding some large number E to the weight of every edge on the graph. The number must satisfy `E > sumOfAllEdgeWeights`. This will ensure that only paths with the least possible number of edges are considered. This does **not** work with negative-weight edges. Be careful of integer overflows.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:53:39.080

如果目标是：

1) 最小化边数。

2) 最小化距离。

按照这个顺序，你可以尝试这样的一件事：

1) 从头到尾画一条线。

2）计算你的线碰撞的每个对象。

3) 对于这些对象中的每一个，计算垂直于对象的两个点，以便将路径分成两个路径段。您可以通过将线分成两段来对矩形执行此操作，对于段 A，查看它可以通过的四个角中的哪个，对于段 B，查看它可以通过的四个角中的哪个并尝试所有组合，直到找到位移最小的两个。对于圆圈，我忘记了怎么做，但是在两侧只有一个解决方案，两个路径段与圆圈齐平，所以你可以使用三角函数或其他东西来做（我会试着弄清楚:)）

对于两条新路径，以递归分支方式调用 4)。

4) 对于你生成的两条线段，重复计算直到没有碰撞。与 A* 类似，您应该首先计算看起来最好的路径（剩下的碰撞最少，或者如果太难，就先做最浅的碰撞）。

5）通过您喜欢的任何指标选择最佳路径。以 A* 方式，您应该对列表进行排序，以便通过您的指标的最佳路径位于顶部，因此您可以选择第一条路径来完成。

我无法在脑海中证明这将永远有效，但我以前见过类似的东西。

编辑

要计算两个线段在一个方向上绕圆的最近路径，请对每个线段执行

-A 面：从行首（或行尾）xs,ys 到圆心 xc,yc，长度 = a

-B 面：从中心 xc,yc 到圆周上的某处，所以长度 = r

-C 面：从 B 面的端点到 xs,ys（斜边）

A和B形成的角是直角，我们知道A和B的长度，所以我们可以计算C的长度为sqrt(A^2+B^2)

最后，我们知道 C 的长度 = A 的长度/sin(角度(B 到 C)) = B 的长度/sin(角度(A 到 C))，这意味着我们可以做三角函数来找出角度 A 到 C 和角度 B对 C。

这让我们可以完全构建路径段的一侧。对另一侧重复，我们将路径分成两部分，在两个部分上都与圆齐平 -> 最小化添加的距离。

# python - 有没有更简单的方法来从字符串构建字典然后向量化字符串？Python

> ID：15398576
> 
> 赞同：0
> 
> 时间：2013-03-13T23:36:07.083
> 
> 标签：python, dictionary, vector, nlp

我关于如何从字符串构建字典的问题比从字符串[创建字典更倾向于语言/NLP](https://stackoverflow.com/questions/4627981/creating-a-dictionary-from-a-string)

给定一个字符串句子列表，**有没有一种更简单的方法来构建一个唯一的字典，然后对字符串句子进行向量化？**我知道有外部库可以这样做，`gensim`但我想避免它们。我一直这样做：

```
from itertools import chain

def getKey(dic, value):
  return [k for k,v in sorted(dic.items()) if v == value]

# Vectorize will return a list of tuples and each tuple is made up of 
# (<position of word in dictionar>,<number of times it occurs in sentence>)
def vectorize(sentence, dictionary): # is there simpler way to do this?
  vector = []
  for word in sentence.split():
    word_count = sentence.lower().split().count(word)
    dic_pos = getKey(dictionary, word)[0]
    vector.append((dic_pos,word_count))
  return vector

s1 = "this is is a foo"
s2 = "this is a a bar"
s3 = "that 's a foobar"

uniq = list(set(chain(" ".join([s1,s2,s3]).split()))) # is there simpler way for this?
dictionary = {}
for i in range(len(uniq)): # can this be done with dict(list_comprehension)?
  dictionary[i] = uniq[i]

v1 = vectorize(s1, dictionary)
v2 = vectorize(s2, dictionary)
v3 = vectorize(s3, dictionary)

print v1
print v2
print v3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:19:41.497

这里：

```
from itertools import chain, count

s1 = "this is is a foo"
s2 = "this is a a bar"
s3 = "that 's a foobar"

# convert each sentence into a list of words, because the lists
# will be used twice, to build the dictionary and to vectorize
w1, w2, w3 = all_ws = [s.split() for s in [s1, s2, s3]]

# chain the lists and turn into a set, and then a list, of unique words
index_to_word = list(set(chain(*all_ws)))

# build the inverse mapping of index_to_word, by pairing it with a counter
word_to_index = dict(zip(index_to_word, count()))

# create the vectors of word indices and of word count for each sentence
v1 = [(word_to_index[word], w1.count(word)) for word in w1]
v2 = [(word_to_index[word], w2.count(word)) for word in w2]
v3 = [(word_to_index[word], w3.count(word)) for word in w3]

print v1
print v2
print v3 
```

要记住的事情：

*   字典只能从键到值；如果你需要做相反的事情，创建（并保持更新）两个字典，一个是另一个的逆映射，就像我上面做的那样；
*   如果您需要一个键是连续整数的字典，只需使用一个列表（感谢 Jeff）；
*   永远不要两次计算同一件事！（参见句子的 split() 版本）如果您以后需要它，请将其保存在变量中；
*   尽可能使用列表推导，以提高性能、简洁性和可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:58:01.507

如果您想计算一个单词在句子中出现的次数，请使用[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)

您的代码存在问题：

```
uniq = list(set(chain(" ".join([s1,s2,s3]).split()))) # is there simpler way for this?
dictionary = {}
for i in range(len(uniq)): # can this be done with dict(list_comprehension)?
  dictionary[i] = uniq[i] 
```

以上部分所做的只是创建一个由任意数字索引的字典（来自迭代`set`没有索引概念的 a）。然后使用上面的字典访问

```
def getKey(dic, value):
  return [k for k,v in sorted(dic.items()) if v == value] 
```

此功能也完全忽略了 dict 的精神：**您通过键而不是值进行查找。**

另外，这个想法`vectorize`也不清楚。你想通过这个功能实现什么？你要求一个更简单的版本`vectorize`，但没有告诉我们它的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:07:45.330

您的代码中有多个问题，所以让我们一一回答。

* * *

```
uniq = list(set(chain(" ".join([s1,s2,s3]).split()))) # is there simpler way for this? 
```

一方面，它可能在概念上更简单（尽管同样冗长）`split()`独立的字符串，而不是将它们连接在一起然后拆分结果。

```
uniq = list(set(chain(*map(str.split, (s1, s2, s3)))) 
```

除此之外：看起来你总是使用单词列表，而不是实际的句子，所以你在多个地方分裂。为什么不一次把它们全部分开，在顶部呢？

同时，与其明确地传递`s1`,`s2`和`s3`, 为什么不把它们放在一个集合中呢？您也可以将结果粘贴到集合中。

所以：

```
sentences = (s1, s2, s3)
wordlists = [sentence.split() for sentence in sentences]

uniq = list(set(chain.from_iterable(wordlists)))

# ...

vectors = [vectorize(sentence, dictionary) for sentence in sentences]
for vector in vectors:
    print vector 
```

* * *

```
dictionary = {}
for i in range(len(uniq)): # can this be done with dict(list_comprehension)?
  dictionary[i] = uniq[i] 
```

你可以像`dict()`在列表推导上那样做——但更简单的是，使用字典推导。而且，当您使用它时，请使用`enumerate`而不是`for i in range(len(uniq))`位。

```
dictionary = {idx: word for (idx, word) in enumerate(uniq)} 
```

这取代了上面的整个`# ...`部分。

* * *

同时，如果您想要反向字典查找，这不是这样做的方法：

```
def getKey(dic, value):
    return [k for k,v in sorted(dic.items()) if v == value] 
```

相反，创建一个逆字典，将值映射到键列表。

```
def invert_dict(dic):
    d = defaultdict(list)
    for k, v in dic.items():
        d[v].append(k)
    return d 
```

然后，而不是您的`getKey`函数，只需在倒置的字典中进行正常查找。

如果您需要交替修改和查找，您可能需要某种双向字典，它可以管理自己的逆字典。在 ActiveState 上有很多这样的东西的食谱，在 PyPI 上可能有一些模块，但自己构建并不难。无论如何，你在这里似乎不需要它。

* * *

最后，还有你的`vectorize`功能。

首先要做的是取一个词表而不是一个句子来拆分，如上所述。

并且没有理由在`lower`;之后重新拆分句子。只需在单词列表上使用地图或生成器表达式。

`lower`实际上，当您的字典是根据原始案例版本构建的时，我不确定您为什么要在这里做。我猜这是一个错误，您`lower`在构建字典时也想做。这就是在一个容易找到的地方预先制作单词列表的好处之一：你只需要改变那一行：

```
wordlists = [sentence.lower().split() for sentence in sentences] 
```

现在你已经有点简单了：

```
def vectorize(wordlist, dictionary):
    vector = []
    for word in wordlist:
        word_count = wordlist.count(word)
        dic_pos = getKey(dictionary, word)[0]
        vector.append((dic_pos,word_count))
    return vector 
```

同时，您可能会认识到这`vector = []… for word in wordlist… vector.append`正是列表推导的用途。但是如何将三行代码变成一个列表推导式呢？简单：将其重构为一个函数。所以：

```
def vectorize(wordlist, dictionary):
    def vectorize_word(word):
        word_count = wordlist.count(word)
        dic_pos = getKey(dictionary, word)[0]
        return (dic_pos,word_count)
    return [vectorize_word(word) for word in wordlist] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:24:56.440

好吧，看起来你想要：

*   返回每个标记的位置值的字典。
*   在一组中找到令牌的次数的计数。

你可以：

```
import bisect

uniq.sort() #Sort it since order didn't seem to matter

def getPosition(value):
    position = bisect.bisect_left(uniq, value) #Do a log(n) query
    if uniq[position] != value:
        raise IndexError 
```

要在 O(n) 时间内搜索，您可以改为创建您的设置并使用顺序键迭代地插入每个值。这在内存上的效率要低得多，但它通过哈希提供了 O(n) 搜索......并且 Tobia 在我编写时发布了一个很好的代码示例，所以请参阅那个答案。

# python - django-admin.py 和在 Dotcloud 上更改 PYTHONPATH 的正确方法？

> ID：15398577
> 
> 赞同：0
> 
> 时间：2013-03-13T23:36:14.030
> 
> 标签：python, django, pythonpath, dotcloud

我没有`manage.py`使用不同的设置来在开发`DJANGO_SETTINGS_MODULE`和`django-admin.py`生产环境之间切换。Django docs 和 pydanny 在“2 Scoops of Django”中都建议了这一点。

我的项目位于`/home/dotcloud/current/bipolar`. 我的设置在 中`/home/dotcloud/current/bipolar/bipolar/settings/dotcloud.py`，遵循 Django 1.5 目录结构。`DJANGO_SETTINGS_MODuLE`设置`dotcloud.yml`为`bipolar.settings.dotcloud`。

我在运行 Dotcloud 时遇到了麻烦。当我只是按照示例教程进行操作时，我已经必须`export PYTHONPATH=/home/dotcloud/current/(hellodjango|bipolar):$PYTHONPATH`在`postinstall`脚本中添加一个。

当使用主管启动 celery 时，事情变得非常棘手。我正在尝试运行命令`django-admin.py celery worker`。但无论我如何尝试让我的`PYTHONPATH`设置为`/home/dotcloud/current/bipolar`，它都没有被拾起。我都试过了

```
command = "PYTHONPATH=/home/dotcloud/current/bipolar:$PYTHONPATH django-admin.py celery worker --loglevel=INFO -E" 
```

和

```
environment=PYTHONPATH="/home/dotcloud/current/bipolar" 
```

在 supervisord.conf 无济于事。`postinstall`我已经尝试将东西移动到一个shell脚本，在运行它之前设置路径......毕竟这适用于！并且在shell上运行它确实可以工作，但是在机器部署时它就不起作用了。

所以建议任何帮助！

编辑：我已经尝试了多种方法。我重新添加了一个 manage.py ，它都设置了正确的`sys.path`and `DJANGO_SETTINGS_MODULE`，但无济于事。最后，我添加了一个`python-worker`服务，除了失败两倍之外什么也没做（supervisord.conf 在两个服务上都被读取，对吧？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:20:39.587

我知道这可能行不通，但您是否尝试过：

```
command = "cd /home/dotcloud/current/bipolar && django-admin.py celery worker --loglevel=INFO -E" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:52:27.700

结果证明[文档](http://docs.dotcloud.com/tutorials/python/django-celery/)是错误的。一个不能`directory = $HOME/current/`入`supervisord.conf`。替换它，`/home/dotcloud/current/`你就可以开始了。

我仍然无法`django-admin.py`上班；我假设它是用 virtualenv 之外的 Python 二进制文件调用的。我觉得`manage.py`有点老套；有没有更好的办法？

我的工作`supervisord.conf`：

```
[program:celery_beat]
directory = /home/dotcloud/current/bipolar/
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log
command = /home/dotcloud/env/bin/python manage.py celery beat --loglevel=INFO

[program:celery_worker]
directory = /home/dotcloud/current/bipolar/
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log
command = /home/dotcloud/env/bin/python manage.py celery worker -E --loglevel=INFO 
```

# c - 传递参数 1 会丢弃来自指针目标类型的限定符

> ID：15398580
> 
> 赞同：15
> 
> 时间：2013-03-13T23:36:24.920
> 
> 标签：c, main, argv

我的主要功能如下：

```
int main(int argc, char const *argv[])
{
    huffenc(argv[1]);
    return 0;
} 
```

编译器返回警告：

`huffenc.c:76: warning: passing argument 1 of ‘huffenc’ discards qualifiers from pointer target type`

作为参考，`huffenc`接受一个`char*`输入，然后执行函数，样本输入“无意义”通过`./huffenc senselessness`

这个警告可能意味着什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T23:50:07.430

这意味着您将一个`const`参数传递给一个接受非`const`参数的函数，由于显而易见的原因，这可能是不好的。

`huffenc`可能不需要非`const`参数，所以它应该带一个`const char*`. 但是，您的定义`main`是非标准的。

C99 标准第 5.1.2.2.1 节（程序启动）规定：

> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：

```
int main(void) { /* ... */ } 
```

> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：

```
int main(int argc, char *argv[]) { /* ... */ } 
```

> 或等价物；9) 或以其他实现定义的方式。

并接着说...

> ...参数 argc 和 argv 以及 argv 数组指向的字符串**应可由程序修改**，并在程序启动和程序终止之间保留它们最后存储的值。

# c++ - 平均大阵列

> ID：15398581
> 
> 赞同：-2
> 
> 时间：2013-03-13T23:36:33.020
> 
> 标签：c++, arrays, vector, average

我正在尝试平均一个大的（~1.000.000 数据集）向量。我已经有这样的数据：

```
struct data {
    std::string alias;
    double id;
    std::string timestamp;
    double value;
}; 
```

现在我想平均一天的所有值。时间戳是这样的：“20-NOV-12 10.52.21.260000000 AM”。我只关心 substr(0,8)，它包含描述这一天的字符串部分。目前我有这个：

```
typedef std::vector<std::tuple<std::string, size_t, double>> days; 
days&& average_days(const std::vector<data> _d)
{
  days ret;
  for(auto &d: _d) {
      bool found = false;
      int count = 0;
      double val= 0.0;
      for(size_t i = 0; i < ret.size(); i++) {
          std::string day = d.alias.substr(0,8);
          auto t = ret[i];
          if (std::get<0>(t) == day) {
             found = true;
             std::string ali = std::get<0>(t);
             size_t coun = std::get<1>(t) + 1;
             double val = std::get<2>(t) + d.value;
             ret[i] = std::make_tuple(ali, coun, val);
         }
         val = std::get<2>(t);
      }
      if (!found){
          ret.push_back(std::make_tuple(d.alias.substr(0,8) ,1, val));
      }
}
return std::move(ret);
} 
```

这给了我一个邪恶的例外（邪恶的例外=分段违规）。我只是无法理解这件事。最好和最快的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:51:02.077

您的程序很可能有**Undefined Behavior**。无论是什么导致您遇到的异常，这里：

```
 days&& average_days(const std::vector<data> _d)
//  ^^^^^^
    {
        days ret;
        // ...
        return std::move(ret);
    } 
```

您正在返回对本地对象的引用。到分配接收此返回引用的变量时，此引用绑定到的对象将因为超出范围而死亡。

因此，您基本上是在返回一个悬空引用，并且取消引用会将未定义的行为注入您的程序。

只需以这种方式返回您的对象（请注意，您可能希望**通过引用**而不是值传递包含一百万个条目的向量！）：

```
 days average_days(const std::vector<data>& _d)
//  ^^^^                                     ^ 
//  No rvalue reference!             Pass by reference!
    {
        days ret;
        // ...
        return ret;
    //         ^^^
    //         No std::move()!
    } 
```

# doxygen - 由于命名空间，Doxygen 无法注意到重复项

> ID：15398591
> 
> 赞同：0
> 
> 时间：2013-03-13T23:37:52.153
> 
> 标签：doxygen

当我对一些我想要记录的第 3 方库运行 Doxygen 时，它无法将某些条目识别为重复项。看起来好像一些代码使用了命名空间，而一些代码（已经在该命名空间中？）忽略了命名空间，这导致 Doxygen 感到困惑。

例如，当我查看类索引页面或类成员页面时，它生成的页面可能包括所有这些，就好像它们是 4 个不同的调用一样：

*   `foo::bar( aaa::bbb )`
*   `foo::bar( bbb )`
*   `bar( aaa::bbb )`
*   `bar( bbb )`

实际上，这些都是完全相同的方法，传入的参数也完全相同。这不仅会引起一些混乱，而且生成文档所需的时间比生成文档所需的时间要长，因为有很多重复项。

我希望在 Doxygen 配置文件中有一个我以某种方式错过的设置，我可以调整它以帮助 Doxygen 忽略重复项或更好地识别这些重复项？

我在 Ubuntu 12.04 上使用 Doxygen v1.8.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:15:01.150

还不是一个完整的答案，但我在 2013 年 3 月针对 Doxygen 创建了一个错误： [https ://bugzilla.gnome.org/show_bug.cgi?id=696925](https://bugzilla.gnome.org/show_bug.cgi?id=696925)

# python - 在 Python 中，如何检查一个数字在输入中出现的次数？

> ID：15398603
> 
> 赞同：0
> 
> 时间：2013-03-13T23:38:32.743
> 
> 标签：python, count, digits

例如让说

```
numbers=input("Enter numbers: ") 
```

如果有人输入 11234458881

我怎样才能使输出

1 出现 3 次

2 发生 1 次

3 发生 1 次

4 出现 2 次

等等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T23:42:50.067

为什么不使用计数器：

```
from collections import Counter
Counter("11234458881") 
```

返回：

```
Counter({'1': 3, '8': 3, '4': 2, '3': 1, '2': 1, '5': 1}) 
```

# ruby-on-rails - RABL - 自定义集合

> ID：15398605
> 
> 赞同：1
> 
> 时间：2013-03-13T23:38:55.113
> 
> 标签：ruby-on-rails, ruby, rabl

我正在尝试使用 RABL API 构建自定义集合。我有一个包含一系列idea_actions 的idea 模型。我需要使用 RABL 附加一个自定义的想法操作集合，但是我似乎无法使用 child :idea_actions 因为我需要了解当前的操作。下面的代码错误...任何解决方案如何获得我想要的自定义集合？

```
object @idea

attributes *Idea.column_names

# need access to current action
node :idea_actions do
  @idea.idea_actions.each do |action|
    { :id => action.id}
    { :custom_stuff => action.some_method } if action.something?
  end
end

# can't do that...
# child :idea_actions 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:47:18.437

我有一个类似的用例。这是我必须做的才能让它工作：

**解决方案 1**

*   引入部分渲染子属性（**_idea_action.rabl**）

    ```
    attributes :id 
    if root_object.something?
      :custom_stuff => root_object.some_method 
    end 
    ```

*   修改您的主视图以扩展新的局部视图

    ```
    child(:idea_actions) { 
      extends("_idea_action")
    } 
    ```

**解决方案 2**

```
node :idea_actions do
  @idea.idea_actions.map do |action|
    { :id => action.id}.tap do |hash|
      hash[:custom_stuff] = action.some_method if action.something?
    end
  end
end 
```

**解决方案 3**

```
child :idea_actions do
  attributes :id
  node(:custom_stuff, :if => lambda {|action| action.something?}) do |action|
    action.some_method
  end
end 
```

# rpc - 前后端双向通信

> ID：15398608
> 
> 赞同：2
> 
> 时间：2013-03-13T23:39:27.217
> 
> 标签：rpc, frontend, backend

我们目前有一个 django 应用程序通过 Apache 为用户提供我们的前端网站。前端查询我们的后端，这是一个单独的 Python 应用程序 (Flask)，服务于不同的服务器。到目前为止，前端需要向后端查询数据，而不是反过来。

我们现在引入数据警报，用户可以选择接收有关系统中数据更改的信息。检查是否发生警报的过程必须发生在后端，因为它与数据模型紧密耦合。因此，前端发送请求以在后端添加警报，然后后端将轮询并检查是否发生了触发器。

问题是，一旦在后端触发警报，前端需要得到通知，以便用户也可以得到通知。后端无法直接提醒用户，因为它不知道电子邮件等用户数据（此用户数据可能会更改，因此将其与添加警报的请求一起发送到后端过于简单）。

因此，我们正在寻找将警报通知从后端推送到前端的最佳方式。我们这样做的最佳方法是什么？我们可以在 django 应用程序上设置一个后端可以查询的视图，但我不喜欢前端查询后端的想法以及相反的方式。实现这一目标的最佳选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T23:41:26.917

有关一些可用方法的概述：[什么是长轮询、Websockets、服务器发送事件 (SSE) 和 Comet？](https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet).

由于您需要能够在不让客户端不断轮询的情况下与前端通信更新，因此听起来您需要设置 Web 套接字或服务器发送的事件，并且对于遗留系统长轮询或其他方法（也许尝试类似的服务pusher.io 如果需要缩放这些东西）。有许多关于将这些项目集成到烧瓶或 django 设置中的很棒的教程。这里有一些很棒的教程：[http](http://blog.jupo.org/2011/08/13/real-time-web-apps-with-django-and-websockets/) ://blog.jupo.org/2011/08/13/real-time-web-apps-with-django-and-websockets/和[http://dev.hasenj.org/post /38188152502](http://dev.hasenj.org/post/38188152502)。

为了让一个最小的解决方案启动并运行，我建议给 socket.io 看一下（[http://socket.io/](http://socket.io/)），然后使用 python 库（[Python 中的 Socket.IO 客户端库](https://stackoverflow.com/questions/4762086/socket-io-client-library-in-python)）。

如果您需要身份验证，当用户登录时，让前端发送一个新的 websockets 通道名称的请求，然后保持该通道打开，直到他们注销或他们的 cookie 过期。使用此频道向用户发送更新。

# c# - 如果条件将列表框选择的值与类中的值进行比较

> ID：15398613
> 
> 赞同：1
> 
> 时间：2013-03-13T23:39:49.440
> 
> 标签：c#, winforms, if-statement, listboxitem

我正在尝试创建一个 if 条件，其中我将所选值与我在另一个类中创建的名称值进行比较。

//我用以下代码填充列表：

```
module.Add(new Modules(code, name, semester, preReq, lSlot, tSlot, info)); 
```

//我用以下代码填充列表框：

```
foreach (object o in module)
        {
            Modules m = (Modules)o;
            selectionBox.Items.Add(m);
            //foreach statement loops for object in module and adds the name to the listbox
        } 
```

//条件是这样的：

```
if (selectionBox.SelectedItem.Equals(((Modules)selectionBox.Items[i]).mName)) 
```

所以我的问题是，如果条件对我有效，以便能够比较列表框选择的值和模块名称值的索引，该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:46:28.133

selectionBox 中的每个项目都是一个 Module 实例，您不能将整个对象与同一类的另一个或相同实例的单个属性进行比较。

尝试划分你的测试

```
 Modules m = selectionBox.SelectedItem as Modules;
 if(m.nName == (selectionBox.Items[i] as Modules).mName)
     ...... 
```

当然，如果您希望将 selectedItems 的 mName 属性与选择框中任意 [i] 项的 mName 属性进行比较，这是正确的。如果您想比较对象实例，那么比较应该是

```
 Modules selected = selectionBox.SelectedItem as Modules;
 Modules aModule = selectionBox.Items[i] as Modules;
 if (selected.Equals(aModule))
    ..... 
```

编辑：使用`List<Modules>`

```
List<Modules> modulesList = new List<Modules>();
modulesList.Add(new Modules(code, name, semester, preReq, lSlot, tSlot, info));
.....    
foreach(Modules m in modulesList)
{
     // No cast needed here...
     selectionBox.Items.Add(m);
}
.....
// Find an element....
if(modulesList.Contains(m))
    .... 
```

# jquery - 如何为不同的 Jquery 函数创建永久链接？

> ID：15398615
> 
> 赞同：1
> 
> 时间：2013-03-13T23:40:20.260
> 
> 标签：jquery, permalinks

我是 Jquery 的新手，并试图弄清楚一些简单的事情。我有几个 div 在单击各种链接时显示/隐藏。我希望能够为每个 div 设置永久链接，以便用户可以重新加载页面而不必导航回他们正在查看的 div。

这是迄今为止我所拥有的[***jsfiddle 。***](http://jsfiddle.net/Chiisanahime/FFFAj/5/)

（注意：小提琴的框架一直默认为 Mootools ......请重置为 JQuery UI。）

我的页面结构如下：

```
<div style="width:100%; height:40px; text-align:center;">
<a class="one" href="#">One</a>
<a class="two" href="#">Two</a>
<a class="three" href="#">Three</a>
<a class="four" href="#">Four</a> 
</div>
<div id="one">One</div>
<div id="two">Two</div>
<div id="three">Three</div>
<div id="four">Four</div> 
```

使用看起来像这样的 JQuery 脚本

```
$('a.one').click(function () {
$("#one").show('slide', {
    direction: 'right'});
$("#two:visible, #three:visible, #four:visible").hide('slide', {
    direction: 'left'});
});

$('a.two').click(function () {
$("#two:hidden").show('slide', {
    direction: 'right'});
$("#one:visible, #three:visible, #four:visible").hide('slide', {
    direction: 'left'});
});

$('a.three').click(function () {
$("#three:hidden").show('slide', {
    direction: 'right'});
$("#one:visible, #two:visible, #four:visible").hide('slide', {
    direction: 'left'});
});

$('a.four').click(function () {
$('#four:hidden').show('slide', {
    direction: 'right'});
$("#one:visible, #two:visible, #three:visible").hide('slide', {
    direction: 'left'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:01:47.497

介绍锚点：`<a class="one" href="#one">One</a>`

现在在 JS 中你可以这样做：

```
$(document).ready(function(){
    hash = location.hash
    if(hash) {
        name = hash.substr(1)
        $('a.'+name).click();
    }
}); 
```

这将执行以下操作：页面加载后，它会检查散列（例如`#one`）并从中取出名称（“one”）。现在它模拟[点击](http://api.jquery.com/click/)元素锚点（例如`a.one`）。当然，您在绑定事件**后执行此操作。**

*注意*：很多 jQuery 事件都有“getter”和“setter”行为：如果在没有参数的情况下调用，它将返回值/触发事件/等等。同时传递一个值将分配一个新的值/事件函数/等。有关详细信息，请参阅链接的文档。

# iphone - iCloud & UIDocument：有没有办法清理事务日志

> ID：15398619
> 
> 赞同：1
> 
> 时间：2013-03-13T23:41:02.843
> 
> 标签：iphone, ios, ipad, icloud, uidocument

在多个设备上密集使用 UIDocument 和 iCloud 时，大量事务日志将保存到 iCloud。这将导致长期使用 iCloud 上的可用空间减少。

我想知道是否有一种方法可以在不丢失数据的情况下清理这些日志，即设备应该仍然能够恢复当前的数据状态？某种日志合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:40:59.693

创建事务日志后，您将无法管理它们。它没有 API，也没有其他支持。它们**应该**被自动管理以防止过度增长。如果不是，请向 Apple 提交错误，因为他们应该这样做。

您可以稍微影响事务日志的创建——它们是在您保存更改时创建的。您保存的越频繁，您获得的事务日志就越多。如果您可以降低保存频率而不冒丢失更改或以其他方式干扰安全、合理操作的风险，那么您可以预先减少事务日志的数量。虽然它们存在，但它们不在你的手中。

# php - 向 json 条目添加更多属性

> ID：15398622
> 
> 赞同：2
> 
> 时间：2013-03-13T23:41:22.613
> 
> 标签：php, encoding, json

我有一个基于从 facebook 收集的数据的 json 文件，特别喜欢。现在，我这样做的方式是基本的：

```
 $likes = idx($facebook->api('/me/likes?limit=5000'), 'data', array());
 fwrite($fileout, json_encode($likes)); 
```

我生成的 json 文件的条目结构如下：

```
{"category":"Athlete","name":"Anatoly Karpov","id":"152323494906"} 
```

问题是在我的 json 中还会存储像“朋友”或“组”这样的数据，我想轻松区分它们，所以我想做的是在 json 文件中添加另一个属性，“type”=例如“喜欢”或“朋友”。有谁知道我怎样才能尽可能高效地做到这一点？
感谢用户 Wrikken，问题得到解决：

```
 foreach($likes as $key=>$like)
{$likes[$key]['type']='like';}   
fwrite($fileout,json_encode($likes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T13:22:49.850

最简单的方法是在 json_encode/write 之前将其添加到数组中，如下所示：

```
$likes = idx($facebook->api('/me/likes?limit=5000'), 'data', array());

foreach ($likes as $key => $like) {
    $likes[$key]['type'] = 'like';
}

fwrite($fileout, json_encode($likes)); 
```

# android - Android：公钥初始化

> ID：15398628
> 
> 赞同：1
> 
> 时间：2013-03-13T23:41:56.680
> 
> 标签：android, public-key-encryption, x509, encryption

我想用一个字符串初始化一个 PublicKey，例如`23441AB…2583DA==`

```
PublicKey publicKey=null;
Cipher publicKeyCipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
publicKeyCipher.init(Cipher.ENCRYPT_MODE, publicKey); 
```

当我传递一个空键时，我得到以下异常：

> java.security.InvalidKeyException：传递给 RSA 的未知密钥类型

即使我传递了一个 Key publicKey，表示密钥类型是未知的。

我已经看到初始化 PublicKey 的正确方法是：

```
kpg = KeyPairGenerator.getInstance("RSA");
kpg.initialize(1024);
kp = kpg.genKeyPair();
publicKey = kp.getPublic(); 
```

但我不想要随机密钥，我想要来自特定字符串的密钥。

**编辑**：我找到了将字节数组转换为 PublicKey 的方法，但我仍然遇到异常。

我想用一个存储其编码格式的 publicKey 字符串初始化一个 PublicKey `[B@41588dd0`：。它已经从 Base64 解码。PublicKey 是用 RSA 创建的，并用 128 位初始化。

```
byte [] pkArray=publicKey.getBytes();
X509EncodedKeySpec pubKeySpec = new X509EncodedKeySpec(pkArray);
KeyFactory keyFactory = KeyFactory.getInstance("RSA");
PublicKey pKey =keyFactory.generatePublic(pubKeySpec); //get the exception here
Cipher publicKeyCipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
publicKeyCipher.init(Cipher.ENCRYPT_MODE, publicKey); 
```

当我通过 EncodedKeySpec 时，我得到以下异常：

> java.security.InvalidKeySpecException: java.io.EOFException: DEF 长度 66 对象被 57 截断

# c - Using Autotools for a project with platform specific source code

> ID：15398632
> 
> 赞同：7
> 
> 时间：2013-03-13T23:42:33.787
> 
> 标签：c, assembly, autotools, autoconf, automake

I'm developing a project that is currently written in C but I plan to write some of the functions in ASM for at least two platforms (x86_64 and arm). So I might have some source files:

*   generic/one.c
*   generic/two.c
*   generic/three.c
*   arm/one.s
*   x86_64/two.s

I'd like it so that the configure script chooses the .s files over the .c files when possible. So building on arm will be one.s, two.c, three.c etc.

It seems difficult or impossible to do this nicely with Automake. But if I ditch Automake I'll have to track my own dependencies (ugh).

What's the best way to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:55:53.670

Here's what I do.

**configure.ac**

```
...
AC_CANONICAL_SYSTEM
AM_PROG_AS
AC_PROG_CC
...
PROC=""
AS_CASE([$host_cpu], [x86_64], [PROC="x86_64"], [arm*], [PROC="arm"])

AM_CONDITIONAL([CPU_X86_64], [test "$PROC" = "x86_64"])
AM_CONDITIONAL([CPU_ARM], [test "$PROC" = "arm"])
AM_CONDITIONAL([CPU_UNDEFINED], [test "x$PROC" = "x"]) 
```

**Makefile.am**

```
lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = \
$(top_srcdir)/generic/three.c

if CPU_ARM
libfoo_la_SOURCES += $(top_srcdir)/arm/one.s \
$(top_srcdir)/generic/two.c
endif

if CPU_X86_64
libfoo_la_SOURCES += $(top_srcdir)/generic/one.c \
$(top_srcdir)/x86_64/two.s
endif

if CPU_UNDEFINED
libfoo_la_SOURCES += $(top_srcdir)/generic/one.c \
$(top_srcdir)/generic/two.c
endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:13:46.173

The [Conditional Sources](http://www.gnu.org/software/automake/manual/html_node/Conditional-Sources.html#Conditional-Sources) section of the automake manual should point you in the right direction. You're going to want `AC_CANONICAL_HOST` in `configure.ac` and then make decisions based on the value of `$host`.

`automake` won't like it if two files can compile to the same object. If you can't rename the sources like in the linked part of the manual, you may want to try something like this (make sure you have `subdir-objects` in `AM_INIT_AUTOMAKE`:

```
# Note the $() isn't a shell command substitution.
# The quoting means it'll be expanded by `make'.
MODULE_ONE_OBJ='generic/one.$(OBJEXT)'
MODULE_TWO_OBJ='generic/two.$(OBJEXT)'
case $host in
  # ...
  arm*)
    MODULE_ONE='arm/one.$(OBJEXT)'
    ;;
  x86_64)
    MODULE_TWO='x86/two.$(OBJEXT)'
    ;;
esac
AC_SUBST([MODULE_ONE])
AC_SUBST([MODULE_TWO]) 
```

In `Makefile.am`:

```
bin_PROGRAMS = foo
foo_SOURCES = foo.c
EXTRA_foo_SOURCES = arm/one.s x86/two.c
foo_LDADD = $(MODULE_ONE) $(MODULE_TWO)
foo_DEPENDENCIES = $(MODULE_ONE) $(MODULE_TWO) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T08:49:29.080

You can use AC_CANONICAL_HOST and then conditionally select the correct subdirectory. For example, in `configure.ac`:

```
AC_CANONICAL_HOST
AC_SUBST([USE_DIR],[$host_cpu])
test -d $srcdir/$USE_DIR || USE_DIR=generic 
```

and then in `Makefile.am`:

```
SUBDIRS = $(USE_DIR) common 
```

and in `common/Makefile.am`:

```
LDADD = ../$(USE_DIR)/libfoo.a 
```

and in each `${host_cpu}/Makefile.am`:

```
noinst_LIBRARIES = libfoo.a
libfoo_a_SOURCES = one.s ../common/two.c 
```

This uses a slightly different directory structure than you describe. C files that are used on all platforms would go in `common` and be linked to a convenience library constructed in the platform specific directory. If some c files are used on only some platforms, you could put them in common and reference them explicitly in the Makefile.am for the platforms that need them.

# regex - 如何重新编码现有的文本过滤器以进行正则表达式搜索和替换？

> ID：15398638
> 
> 赞同：0
> 
> 时间：2013-03-13T23:43:26.173
> 
> 标签：regex, text, vbscript, replace

我能够拼凑下面的代码，以便它执行多个搜索和替换功能作为文本过滤器。该代码适用于 EditPlus 文本编辑器程序。

我想执行相同的想法，除了正则表达式搜索和替换。

在文本过滤器中为多个正则表达式搜索和替换编码的正确方法是什么？

`enter code here`

```
Option Explicit

Dim oWS, oFS

Set oWS = WScript.CreateObject("WScript.Shell")
Set oFS = WScript.CreateObject("Scripting.FileSystemObject")

'----------
' Script Setup
'----------
Dim oInStream, oOutStream, sInFile, sOutFile, nTotalLines, sArg

'----------
' Process File(s)
'----------
If Wscript.Arguments.Count = 0 Then
If InStr(LCase(WScript.FullName), "cscript.exe") <> 0 Then
sInFile = "StdIn"
sOutFile = "StdOut"
Set oInStream = WScript.StdIn
Set oOutStream = WScript.StdOut
Call ProcessFile()
Else
Call HelpMsg()
End If
Else
For sArg = 0 To Wscript.Arguments.Count -1
sInFile = Wscript.Arguments(sArg)
If IsFile(sInFile) Then
sOutFile = Left(sInFile, InStrRev(sInFile, ".") - 1) & ".lst"
Set oOutStream = oFS.OpenTextFile(sOutFile, 2, True, 0)
Set oInStream = oFS.OpenTextFile(sInFile, 1)
Call ProcessFile()
oWS.Run "NotePad.exe " & sOutFile
Else
Wscript.Echo "File Not Found: " & sInFile, , "Error"
End If
Next
End If

Call CleanUp(0)

'---------------------
' Subroutines
' ********************

'---------------------
Sub CleanUp(exitCode)
Set oInStream = Nothing
Set oOutStream = Nothing
Set oWS = Nothing
Set oWS = Nothing
WScript.Quit(exitCode)
End Sub

'---------------------
Sub ProcessFile()
'oOutStream.WriteLine "<DIV class='mesa'>"
nTotalLines = SeaRep()
'oOutStream.WriteLine "</DIV>"
End Sub

'---------------------

'---------------------
' Functions
' ********************
'---------------------
Function SeaRep()
Dim nLine, sLine, nCount, outPut1, outPut2, outPut3
nCount = 0
Do Until oInStream.AtEndOfStream
nLine = oInStream.Line
sLine = oInStream.ReadLine

outPut1 = Replace(sLine,"1a","foo")
outPut2 = Replace(outPut1,"2b","foobar")
outPut3 = Replace(outPut2,"3c","foosod")
oOutStream.WriteLine (Replace(outPut3,"4d","fooyard"))

nCount = nCount + 1
Loop
AddLineNum = nCount
End Function

'---------------------
'---------------------
Function IsFile (fName)
If oFS.FileExists(fName) Then IsFile = True Else IsFile = False
End Function

' ********************

' End code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:54:18.133

用正则表达式替换与“正常”替换没有什么不同。您只需准备正则表达式的附加步骤：

```
Set re = New RegExp
re.Pattern    = "1a"
re.IgnoreCase = True
re.Global     = True 
```

实际替换是这样完成的（没有搜索文本，因为该信息包含在正则表达式中）：

```
outPut1 = re.Replace(sLine, "foo") 
```

由于您可能需要几个正则表达式，因此最好将它们的创建封装在一个函数中：

```
Function CreateRegExp(str)
  Set re = New RegExp
  re.Pattern    = str
  re.IgnoreCase = True
  re.Global     = True

  Set CreateRegExp = re
End Function 
```

那么您的代码可能看起来像这样：

```
Set re1 = CreateRegExp("1a")
Set re2 = CreateRegExp("2b")
Set re3 = CreateRegExp("3c")
Set re4 = CreateRegExp("4d")

'...

Function SeaRep()
  Dim nLine, sLine, nCount, outPut1, outPut2, outPut3
  nCount = 0
  Do Until oInStream.AtEndOfStream
    nLine = oInStream.Line
    sLine = oInStream.ReadLine

    outPut1 = re1.Replace(sLine, "foo")
    outPut2 = re2.Replace(outPut1, "foobar")
    outPut3 = re3.Replace(outPut2, "foosod")
    oOutStream.WriteLine (re4.Replace(outPut3, "fooyard"))

    nCount = nCount + 1
  Loop
  AddLineNum = nCount
End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-16T16:02:10.127

抱歉，如果我现在看到了。看看你是否还不知道用 php cli 编写你的过滤器是很有可能的。如果您知道 php 并且想要编写自定义 EDITPLUS 过滤器（就像我所做的那样）：例如，我使用 xampp (apachefriends.org) 并且标准安装在 htdocs 中的 C:\xampp 我有一个名为 let say "x" 的文件夹那个文件夹我有 index.php

```
<?php 
//var_dump($argv);
//echo('daaaaaaaaaaa\r\n');
//echo "\n";
$cmd='';
if (isset($argc)) {
    for ($i = 0; $i < $argc; $i++) {

        //echo "\$argv[" . $i . "] - " . $argv[$i] . "\n";
        if($i>1) $cmd.=$argv[$i];
    }
}
else {
    echo "argc and argv disabled\n";
}
/*echo('da');*/
switch ($argv[1]) {
    case 'tool1':
        echo $argv[2].":from cmd tool 1\n";
        break;
    case 'tool2':
        echo $argv[2].":from cmd tool 2\n";
        break;
    case 'run':
        //echo $argv[2].":from cmd tool 2\n";

        echo $cmd.PHP_EOL.'//';
        eval($cmd);

        break;

    case 'bench':
        ob_start();
        $start= microtime(true);
        for($i=0;$i<1000;$i++)  eval($cmd);
        $stop= microtime(true);
        ob_clean ();
        echo $cmd.PHP_EOL.'//';
        echo $stop-$start;

        break;

}

?> 
```

在 Editplus 中，您在顶部有菜单：工具/首选项/用户工具，然后添加工具 .. 程序，所以现在您应该在底部有一个要填写的表格！把这些：

```
Menu text: bench ( <--- write something ,i put bench)
Command: "c:\xampp\php\php.exe"
Argument: "c:\xampp\htdocs\x\index.php" bench $(CurSel)
Initial:
Action: Run as Text FIlter(Replace) 
```

如果需要，请放置一个图标（我进行了一些更改，因此每次我打开 html、php、javascript 时，用户工具都会出现在我的编辑器中...所以我直接单击这就是我谈论图标的原因）。

所以现在有了你之前读过的设置，只需打开一个新的 php 文件并复制粘贴：

```
<?php 

echo 'hi from php!';

?> 
```

现在不需要保存文件只需选择 `echo 'hi from php!';` 现在单击用户工具栏上的“工作台”图标

如果一切都设置好（xampp，设置，并且不应该启动服务器，因为通过在 php cli 上执行 php 脚本来工作）你会得到这样的结果：

您选择的 php 代码将由 php 执行 1000 次，您将获得经过的时间

```
echo'hifromphp!';
//0.0016298294067383 
```

===================== 现在如果您更改 index.php 中的一些代码

```
case 'bench':
        ob_start();
        $start= microtime(true);
        for($i=0;$i<1000;$i++)  eval($cmd);
        $stop= microtime(true);
        ob_clean ();
        echo PHP_EOL.'//';
        echo $stop-$start;

        break; 
```

在 Editplus 中，Run As Text Filter (insert) 中的命令结果不会影响代码行（像以前一样）

```
echo 'hi from php!';
//0.0018229484558105
//0.0016310214996338
//0.0016298294067383 
```

为了更精确......

```
case 'bench':
        ob_start();
        $start= microtime(true);
        for($i=0;$i<10000;$i++) eval($cmd);
        $stop= microtime(true);
        ob_clean ();
        echo PHP_EOL.'//';

        echo number_format(($stop-$start)/10000, 8, '.', '');

        break; 
```

**因此，即使在 html 文件或 txt 选定的行中，您的用户工具栏处于活动状态，您也可以在该选定文本上执行 php**

以类似的方式，您可以重新编码您需要的内容或新内容。这只是简单的方法，但是如果您知道任何其他编译语言的编程，您可以编写一些带有 cmd 参数的可执行文件。及时其他人使用 c、c++、.. c 基于我使用 freebasic.net 或 purebasic.com（在如果我想隐藏一些我需要远离有害人的代码）。 **祝你好运 ！**

**这只是使用php cli编写您自己的正则表达式的方法：不要指望我们会为您编写它..您可以像真正的程序员一样尝试自己（无论您是谁：不适合lamers）**

# android - RelativeLayout 没有正确更新自定义视图的宽度

> ID：15398643
> 
> 赞同：10
> 
> 时间：2013-03-13T23:43:50.680
> 
> 标签：android, android-layout

我有这个容器类，用于制作其中一个维度（宽度或高度）与另一个维度的比率。例如，我想要一个宽度为“match_parent”的 16:9 布局容器。但是，当使用高度作为“match_parent”时，Android 似乎无法正确重新布局自身。当我将高度设置为宽度的比率时，一切都很好！反之亦然，它不起作用。这是怎么回事？

```
public class RatioLayout extends ViewGroup {

private float ratio = 1.6222f; // 4 x 3 default. 1.78 is 16 x 9
public float getRatio() { return ratio; }
public void setRatio(float ratio) {
    this.ratio = ratio;
    requestLayout();
}

public RatioLayout(Context context) {
    this(context, null);
}

public RatioLayout(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public RatioLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    Log.i("Ratio", "/onMeasure");
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);

//      int exactly = MeasureSpec.EXACTLY; // 1073741824    
//      int atMost = MeasureSpec.AT_MOST; // -2147483648
//      int unspec = MeasureSpec.UNSPECIFIED; // 0

    width = Math.round(height * ratio);
    widthMeasureSpec = MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY);
    heightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY);

    setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);

    int mw = getMeasuredWidth();
    int mh = getMeasuredHeight();
    Log.i("Ratio", "mw: " + mw + ", mh: " + mh);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    Log.i("Ratio", "/onLayout");
    Log.i("Ratio", "l: " + l + ", t: " + t + ", r:" + r + ", b:" + b);
    Log.i("Ratio", "mw: " + getMeasuredWidth() + ", mh:" + getMeasuredHeight());
    Log.i("Ratio", "w: " + getWidth() + ", mw:" + getHeight());
}

} 
```

要查看它的实际效果，请使用如下布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<com.example.RatioLayout
    android:id="@+id/image"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_marginBottom="100dp"
    android:layout_marginTop="100dp"
    android:background="#FFFF00FF" />

</RelativeLayout> 
```

这将是我的活动：

记录输出：

```
I/Ratio   (9445): /onMeasure
I/Ratio   (9445): mw: 1087, mh: 670
I/Ratio   (9445): /onMeasure
I/Ratio   (9445): mw: 655, mh: 404
I/Ratio   (9445): /onLayout
I/Ratio   (9445): l: 0, t: 133, r:1087, b:537
I/Ratio   (9445): mw: 655, mh:404
I/Ratio   (9445): w: 1087, mw:404 <--- NO reason this should not be 655 
```

为什么 Android 不尊重我最新的测量宽度，而是使用旧版本但使用最新的高度？

**编辑：**更新。使 RatioLayout 的父级**不是**RelativeLayout 而是 LinearLayout 或 FrameLayout 给我正确的行为。出于某种原因，RelativeLayout 正在“缓存”measuredWidth 而不是使用最新的。

**编辑 2：** RelativeLayout.onLayout 中的这条评论似乎证实了我的“它正在缓存”，我认为这是一个错误

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    //  The layout has actually already been performed and the positions
    //  cached.  Apply the cached values to the children.
    int count = getChildCount();

// TODO: we need to find another way to implement RelativeLayout
// This implementation cannot handle every case
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 
```

**最终编辑**好的。我放弃。这是RelativeLayout 中的一个合法错误。这种代码修复了它，但它会产生与 toRightOf 属性有关的问题。我发现的解决方法是将这个 RatioLayout 嵌套到另一个 ViewGroup 中，比如 LinerLayout。好奇者的代码

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    Log.i("Ratio", "/onMeasure");
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);

//      int exactly = MeasureSpec.EXACTLY; // 1073741824    
//      int atMost = MeasureSpec.AT_MOST; // -2147483648
//      int unspec = MeasureSpec.UNSPECIFIED; // 0

    width = Math.round(height * ratio);
    widthMeasureSpec = MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY);
    heightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY);

    setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);

    if (getParent() instanceof RelativeLayout) {
        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)getLayoutParams();
        Class<?> clazz = RelativeLayout.LayoutParams.class;
        try {
            Field left = clazz.getDeclaredField("mLeft");
            Field right = clazz.getDeclaredField("mRight");
            left.setAccessible(true);
            right.setAccessible(true);
            int l = left.getInt(params);
            if (l == -1) l = params.leftMargin; // if the value is uninitialized, set it to 0;
            if (l == -1) l = 0; // if the value is uninitialized, set it to 0;
            // setting this seems to break the layout_marginLeft properties.
            right.setInt(params, l + getMeasuredWidth());
        } catch (NoSuchFieldException e) {
            Log.e("Ration", "error", e);
        } catch (IllegalArgumentException e) {
            Log.e("Ration", "error", e);
        } catch (IllegalAccessException e) {
            Log.e("Ration", "error", e);
        }
    }

    int mw = getMeasuredWidth();
    int mh = getMeasuredHeight();
    lastWidth = mw;
    Log.i("Ratio", "mw: " + mw + ", mh: " + mh);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:32:55.787

实际上，我已经尝试过完全按照您之前尝试的方式进行操作，也就是说，`View`在保持一定纵横比（即正方形或 4:3 或类似的东西）的同时使 a 尽可能大。

我的问题是，当我的视图处于 a`ScrollView`中时，尺寸计算不正确。我无法弄清楚这一点，但我会在下面发布我的代码以防万一。它与您的代码非常相似，但我继承自`FrameLayout`并最终调用`super.onMeasure()`.

我仔细检查了我在其中使用它的项目，实际上我确实将它作为`RelativeLayout`.

爪哇：

```
/**
 * A FrameLayout which tries to be as big as possible while maintaining a given ratio between its width and height.
 * Formula: Height = Width / ratio;
 * Usage:
 * 1) Set layout_width and layout_height to "match_parent"
 * 2) For 4:3 for example, set ratio to 4/3 = 1.333333 etc. Or don't specify, and it will be square by default.
 */
public class RatioFrameLayout extends FrameLayout
{
    private final static float DEFAULT_RATIO = 1f;

    private float ratio;
    private boolean measured = false;

    public RatioFrameLayout(Context context)
    {
        super(context);
    }

    public RatioFrameLayout(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        readAttributes(context, attrs);
    }

    public RatioFrameLayout(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        readAttributes(context, attrs);
    }

    private void readAttributes(Context context, AttributeSet attrs)
    {
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.RatioFrameLayout);

        String value = a.getString(R.styleable.RatioFrameLayout_ratio);
        try
        {
            ratio = Float.parseFloat(value);
        }
        catch (Exception e)
        {
            ratio = DEFAULT_RATIO;
        }

        a.recycle();
    }

    public float getRatio()
    {
        return ratio;
    }

    public void setRatio(float ratio)
    {
        this.ratio = ratio;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        int targetWidth = getMeasuredWidth();
        int targetHeight = Math.round((float)getMeasuredWidth() / ratio);

        if (targetHeight > getMeasuredHeight() && getMeasuredHeight() != 0)
        {
            targetWidth = Math.round(getMeasuredHeight() * ratio);
            targetHeight = getMeasuredHeight();
        }

        super.onMeasure(MeasureSpec.makeMeasureSpec(targetWidth, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(targetHeight, MeasureSpec.EXACTLY));
    }

    private void printMeasureSpec(String description, int value)
    {
        int mode = MeasureSpec.getMode(value);
        String modeName = mode == MeasureSpec.AT_MOST ? "AT_MOST"
                : mode == MeasureSpec.EXACTLY ? "EXACTLY" : "UNSPECIFIED";
        DLog.d(String.format("Measure spec for %s, mode = %s, size = %d", description, modeName, MeasureSpec.getSize(value)));
    }
} 
```

`attrs.xml`：

```
<resources>
    <declare-styleable name="RatioFrameLayout">
        <attr name="ratio" format="string|reference" />
    </declare-styleable>
</resources> 
```

# sql-server-2008 - 我是否需要对从存储过程调用的函数授予 EXECUTE 权限？

> ID：15398644
> 
> 赞同：0
> 
> 时间：2013-03-13T23:43:53.770
> 
> 标签：sql-server-2008, database-permissions

我有一个*只能*从另一个存储过程内部调用的 SQL 函数。我已授予调用该函数的存储过程的 EXECUTE 权限。

我是否也需要授予该函数的 EXECUTE 权限？

**编辑**

*回应@AaronBertrand 的评论*

该函数不访问数据库中的任何其他对象。它用于构建字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:57:06.193

如果问题是您的用户无法执行它，请尝试删除并重新创建函数，并对函数本身及其引用的任何对象应用适当的权限。可能有一个`DENY`闲逛，这将永远王牌`GRANT`。

# php - 检索 Soundcloud 搜索结果和嵌入结果

> ID：15398646
> 
> 赞同：1
> 
> 时间：2013-03-13T23:43:58.210
> 
> 标签：php, soundcloud

使用 Soundcloud，我一直在研究 API，但我不太确定做我想做的最好的方法。

我正在构建一个站点，用于在 Soundcloud 上托管许多声音文件。我希望能够让人们搜索声音（它们将是教堂网站的讲道 mp3 文件），然后在我们的网站上列出结果，以及嵌入式播放器。

为每个返回的搜索结果显示播放器的最佳方法是什么？显然，速度是我们关心的问题——所以想以最好的方式解决这个问题。

只是一个通用的方法就可以了——如果有一两行示例代码，那就太棒了。我正在使用 PHP。

谢谢你的帮助，

托比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:21:46.293

一般方法可能如下：

1.  从用户那里获取搜索查询
2.  [向http://api.soundcloud.com/tracks.json?q=YOUR_QUERY&client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/tracks.json?q=YOUR_QUERY&client_id=YOUR_CLIENT_ID)发出请求^*
3.  获取将包含一组轨道的 JSON，您可以对其进行迭代和访问属性，如声音 ID 并解析它，将其存储在变量中（也许`tracks`）
4.  创建一个变量，一个空字符串（也许`html`）
5.  遍历`tracks`列表，获取 HTML5 小部件的模板^*`id`并在每次迭代时用当前曲目的声音 id替换声音的键( `currentTrack.id`)，将处理后的模板添加到`html`)
6.  打印`html`出来

^*备注：

*   作为字符串的 HTML5 小部件的模板（`{trackId}`在迭代时替换为当前声音 id，并且当然与`{widgetParams}`您`&color=ff6600&auto_play=false`自己的嵌入所需的参数相匹配）（更多信息可以在[这里](https://stackoverflow.com/a/14900820/236135)找到）：

    ```
    <iframe width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F{trackId}{widgetParams}"></iframe> 
    ```

*   当我说流程模板时，我的意思是你需要用其他一些字符串替换“键”，你可以用不同的语言轻松地做到这一点，无论`replace`是字符串类型的方法，还是谷歌的“变量插值”。

*   基本 API URL 可以不同——您可以使用`q=QUERY`不同的端点，例如

    *   `/users/USER_ID/tracks.json`
    *   `/groups/GROUP_ID/tracks.json`

    或者您可以组合过滤器，如标签`http://api.soundcloud.com/tracks.json?q=YOUR_QUERY&tags=sermon&client_id=YOUR_CLIENT_ID`

有关 API 响应和选项，请参阅[SoundCloud API 参考](http://developers.soundcloud.com/docs/api/reference)

# javascript - 使用带有 jquery 的 if 语句来限制动画

> ID：15398647
> 
> 赞同：2
> 
> 时间：2013-03-13T23:44:00.307
> 
> 标签：javascript, jquery, if-statement, jquery-animate

我想制作一个在点击链接时动画向上飞的 div，但前提是之前没有点击过链接，这意味着它仍处于原始位置。我的 if 语句目前看起来像这样：

```
$("#tutorialslink").click(function(){
 if($(".tab").position().top < "0px"){
$("#bottuts,.tab").animate({top : "-=350px"});
}

}); 
```

有人可以告诉我如何解决吗？我对 javascript 和 jquery 完全陌生，所以请原谅任何荒谬的语法错误！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:45:54.290

`.one()`一旦触发，我将使用该函数使单击事件处理程序分离：

```
$("#tutorialslink").one("click", function() {
    $("#bottuts, .tab").animate({
        top: "-=350px"
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:56:53.660

您正在尝试在字符串上使用 < 运算符。只需将顶部与整数 0 进行比较，如下所示：

```
$("#tutorialslink").click(function(){

   if($(".tab").position().top < 0){
      $("#bottuts,.tab").animate({top : "-=350px"});
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:02:29.917

这是一个例子：http: [//jsfiddle.net/3BSw7/](http://jsfiddle.net/3BSw7/)

```
var $tab = $(".tab");

$("#tutorialslink").click(function (e) {
  e.preventDefault(); // Prevent default so link isn't followed

    $tab.each(function () { // Loop through elements with 'tab' class
      var $this = $(this); // $(this) refers to each looped element

      if ($this.position().top <= 200) { // compare to a number and not a string
          $this.animate({top: "+=150px"});
      }        
    });
}); 
```

# javascript - 在复选框单击时获取 Fexigrid 中的表格行 id 值？

> ID：15398648
> 
> 赞同：1
> 
> 时间：2013-03-13T23:44:01.570
> 
> 标签：javascript, jquery, html, css, flexigrid

我正在研究 FlexiGrid，脚本编写问题很少。我已经成功创建了一个 FlexiGrid 并在其中添加了复选框。单击复选框时，我想选择所需的行。单击任何行时，它会将 class='trSelected' 设置为`<tr id="row101" class="trSelected">`. 我已经尝试了一些脚本来设置它复选框单击，但不工作。请让我知道如何解决此问题。

```
<script type="text/javascript"> 
function checkedCall() {
 if( $('#checkNote').is(':checked')){
   //$("#tblflex > tr:first").addClass("trSelected");
   //$(this).parents('tr:first').addClass('trSelected');
   alert('Selected' + $(this).parents('tr:first').attr('id')); //unable to find the ID
 }else{
  alert('NOTSelected');
  //$("#tblflex > tr:first").removeClass("trSelected");
  //$(this).parents('tr:first').removeClass('trSelected');
 }
} 
```

HTML 代码：

```
<table id="tblflex" class="flexCLS" style="display: table;" border="0">
 <tbody>
  <tr id="row101">
   <td align="left">
    <div style="text-align: left; width: 40px;">
     <input type="checkbox" id="checkNote" onclick="checkedCall();">
    </div>
   </td>
 </tr>
  <tr id="row187">
   <td align="left">
    <div style="text-align: left; width: 40px;">
     <input type="checkbox" id="checkNote" onclick="checkedCall();">
   </div>
 </td>
</tr> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:19:01.140

问题是您所有的复选框都具有相同的 ID“checkNote”。

这是一个建议的解决方案

HTML

```
<table id="tblflex" class="flexCLS" style="display: table;" border="0">
 <tbody>
  <tr id="row101">
   <td align="left">
    <div style="text-align: left; width: 40px;">
     <input type="checkbox" id="checkNote101" onclick="checkedCall(this);">
    </div>
   </td>
 </tr>
  <tr id="row187">
   <td align="left">
    <div style="text-align: left; width: 40px;">
     <input type="checkbox" id="checkNote187" onclick="checkedCall(this);">
   </div>
 </td>
</tr> 
```

和 JS 代码

```
<script type="text/javascript"> 
function checkedCall(this) {
 if( $(this).is(':checked')){
   //$("#tblflex > tr:first").addClass("trSelected");
   //$(this).parents('tr:first').addClass('trSelected');
   alert('Selected' + $(this).parents('tr:first').attr('id')); //unable to find the ID
 }else{
  alert('NOTSelected');
  //$("#tblflex > tr:first").removeClass("trSelected");
  //$(this).parents('tr:first').removeClass('trSelected');
 }
} 
```

# python - 将 return 语句作为另一个函数的参数传递

> ID：15398652
> 
> 赞同：2
> 
> 时间：2013-03-13T23:44:31.100
> 
> 标签：python

我已经查看了其中的 10 个答案，但找不到答案，也许我问错了问题，但我想做的是取一个在 fileToDict 中创建的字典并将其用作 dictValueTotal 的参数来添加的所有值字典并返回该值（将在第三个函数中使用）。是的，这确实是家庭作业，但我想理解它，因为我是 python 新手，真的不知道如何将返回值传递给另一个函数，也无法在线或在我们正在使用的书中找到答案我不想为它创建一个类，因为我们没有在课堂上介绍它（看看我在那里做了什么？）。提前致谢！

收到错误：首先我没有定义全局变量 'd'，所以我添加了 dictionary = fileToDict("words1.txt") 行，但现在我收到错误 TypeError: 'builtin_function_or_method' object is not iterable

差点忘了我的 words1.txt 看起来像这样，每个字符串/整数都在单独的一行：231049254

```
cat 120935
hat 910256
free 10141

one 9503490
we 102930
was 20951
#

going 48012
to 1029401
program 10293012
    he 5092309 
```

这是操作它的代码：

```
import sys

def dictValueTotal (dictionary):
    """dictValueTotal takes in a dictionary and outputs the sum of all the values of the different keys in the input dictionary"""
    valueTotal = sum(dictionary.values)
    return valueTotal

def fileToDict (inFile):
    """takes a name of a file as input and outputs a dictionary containing the contents of that file"""
    fileIn = open(inFile, "r")           #Open a file
    d = {}                           #create a dictionary
    for line in fileIn:
            line = line.strip()          #remove whitespace
            if line == "":               #disregard empty strings
                    continue
            if line[0] == '#':           #disregard lines starting with #
                    continue
            print line                   #debugging purposes
            line = line.split()          #remove duplicated spaces
            print line                   #debugging purposes
            line[1] = int(line[1])
            print line                   #debugging purposes
            key = line[0]
            value = line[1]
            d[key] = value
    print d
    return d
def main():
    fileToDict("words1.txt")
    dictionary = fileToDict("words1.txt")
    dictValueTotal(dictionary)

main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:46:10.327

`values`是一种方法。你需要调用它。使用`dictionary.values()`（注意括号），而不是`dictionary.values`.

# css - 如何在网页中使用精灵

> ID：15398655
> 
> 赞同：0
> 
> 时间：2013-03-13T23:44:47.613
> 
> 标签：css, sprite

我对使用精灵图像很感兴趣。

出于教育原因，我一直在研究 SO 的 CSS 并发现不是单独的图像，而是从整个 png 图像中获取诸如 up + down 投票之类的项目。

```
background-image:url('img/sprites.png?v=5') 
```

我将如何从组装的 png 中提取单个图像？所以我可以在我的网站中使用它，这似乎比在子目录中拥有大量图像更有效，而不是在 1 中收集主要图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:47:41.487

关键是`background-position`：您构建这样一个精灵图像，然后计算每个图像的偏移量。然后设置适当的值。您还必须为保持背景的元素指定正确的宽度和高度。

示例（从此处的向上箭头）：

```
background-position: 0 -265px;
height: 25px;
width: 41px; 
```

您设置相同`background-image`但不同的位置。

# arrays - 分段错误，将带有数组参数的函数传递给 Fortran 中的子例程

> ID：15398659
> 
> 赞同：1
> 
> 时间：2013-03-13T23:45:05.680
> 
> 标签：arrays, function, fortran, subroutine

我正在做一个项目（明天到期:/），当我尝试在我自己编写的函数上使用单纯形算法时遇到了一个问题。它没有用，经过 5 个小时的搜索和实验，我发现了以下内容：

当我将函数传递给子例程时，该函数不能有任何数组参数。这是真的？因为在我应该使用它的代码中显然应该工作。

我正在使用 ifort 编译器。请参阅下面的最小示例，我基本上取自[http://malayamaarutham.blogspot.de/2006/02/passing-function-names-as-arguments-in.html](http://malayamaarutham.blogspot.de/2006/02/passing-function-names-as-arguments-in.html)

```
 ! Author : Kamaraju S Kusumanchi
  ! Email  : kamaraju@gmail.com
  ! Last edited : Sun Feb  5 2006
  !
  ! Sample program demonstrating the use of external attribute.        This program
  ! shows how to pass function names as arguments in Fortran 90       programs.
  !
  ! Compilation and execution steps
  ! $gfortran passing_functions.f90 -o passing_functions
  ! $./passing_functions
  !  beta =    5.500000
  !  beta =    1.500000
  !
  ! I would appreciate any comments, feedback, criticism,       mistakes, errors etc.,
  !   (however minor they are)
  !
  module dummy
    implicit none
  contains
  !------------------------------------------------------------------------------
  function func1(a)
    implicit none
    real :: a
    real :: func1

    func1 = a+5
  end function func1
  !------------------------------------------------------------------------------
  function func2(b)
    implicit none
    real :: b(:)
    real :: func2

    func2 = b(1)
  end function func2
  !------------------------------------------------------------------------------
  function func3(dyn_func, c)
    implicit none
    real :: c
    real, external :: dyn_func
    real :: func3

    func3 = dyn_func(c)
  end function func3
  !------------------------------------------------------------------------------
  function func4(dyn_func, c)
    implicit none
    real :: c(*)
    real, external :: dyn_func
    real :: func4

    func4 = dyn_func(c)
  end function func4
  end module dummy
  !------------------------------------------------------------------------------

  program passing_functions
    use dummy
    implicit none

    real :: alpha=0.5, beta
    real :: gamma(2) = (/10,20/)

    beta = func3(func1, alpha)
    write(*,*) 'beta = ', beta
    beta = func4(func2, gamma)
    write(*,*) 'beta = ', beta
  end program passing_functions 
```

这是输出：

```
zeus$ passing.out
 beta =    5.500000    
forrtl: severe (174): SIGSEGV, segmentation fault occurred
Image              PC                Routine            Line        Source             
passing.out        0000000000402D44  Unknown               Unknown  Unknown
passing.out        0000000000402C7C  Unknown               Unknown  Unknown
libc.so.6          00002AFF7915D23D  Unknown               Unknown  Unknown
passing.out        0000000000402B79  Unknown               Unknown  Unknown
zeus$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T00:59:14.590

另一个答案可用于解决您的问题，但有更简单的方法而不使用指针。

几乎没有理由`external`在现代 Fortran 中使用。在我在 Stackoverflow 上看到的 Fortran 问题中，它几乎总是将人们引向错误的方法。除非你真的确定，否则不要使用`external`.

您要做的是在函数`func3`和`func4`with`interface`块中声明（即描述）函数参数。以下是如何做到这一点`func4`......你应该能够弄清楚`func3`：

```
 function func4(dyn_func, c)
    implicit none
    real, dimension (:) :: c
    interface
       function dyn_func (x)
          real :: dyn_func
          real, dimension (:) :: x
       end function dyn_func
    end interface
    real :: func4

    func4 = dyn_func(c)
  end function func4 
```

# html - 仅在不提供 DTD 时应用样式

> ID：15398661
> 
> 赞同：1
> 
> 时间：2013-03-13T23:45:12.297
> 
> 标签：html, css, styles, doctype

我正在尝试使用有效的文档类型，但是如果我使用下面的带有 URL 的文档类型，则链接拒绝保持`#ffffff`在 200 宽度表中分配的文本颜色（并且）背景颜色会擦除两行（两者谷歌和雅虎链接）。注释掉 Doctype URL，它工作正常......任何人都可以对此有所了解>

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01     Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>test.com</title>
<style type="text/css">
td.off{background: #223C66}
td.on{background: #2d2dff}
</style>
<style>
a{text-decoration:none}
a:hover{text-decoration:underline}
</style>
</head>

<table width="600" align="center" style="border:10px solid black; border-collapse:collapse;" cellpadding="10" cellspacing="0">

<tr>
<td>

<table width="200" cellpadding="0" cellspacing="10" border="0">
<tr>
<td height="40" class="off" onmouseover="this.className='on'" onmouseout="this.className='off'">
<a href="http:\\www.google.com"><font color=#ffffff size=2 face=arial>valid google link</font></a>
</td>
</tr>

<tr>
<td height="40" class="off" onmouseover="this.className='on'" onmouseout="this.className='off'">
<a href="http://www.yahoo.com" target="_blank"><font color=#ffffff size=2 face=arial>valid yahoo link</font></a>
</td>
</tr>

</table>

</td>

<td style="border:1px solid black; border-collapse:collapse;" cellpadding="0" cellspacing="0">
<a href="http:\\www.msn.com">valid msn.com link</a>
<p>plain test - no link</p>
</td>
</tr>

</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:48:59.143

您需要确保所有属性值都用`"`引号括起来才能有效。

例如：

```
<font color="#ffffff" size="2" face="arial"> 
```

此外，在标记上使用验证工具是一种很好的做法：[W3C 标记验证服务](http://validator.w3.org/check) [http://validator.w3.org/check](http://validator.w3.org/check)

**补充：**带有适当标记的完整版本，应验证为 HTML 4.01 过渡

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>test.com</title>
        <style type="text/css">
            td.off {
                background: #223C66;
            }
            td.on {
                background: #2d2dff;
            }
            a {
                text-decoration:none;
            }
            a:hover {
                text-decoration:underline;
            }
        </style>
    </head>
    <body>
        <table width="600" align="center" style="border:10px solid black; border-collapse:collapse;">
            <tr>
                <td>
                    <table width="200" border="0">
                        <tr>
                             <td height="40" class="off" onmouseover="this.className='on'" onmouseout="this.className='off'">
                                 <a href="http://www.google.com"><font color="#ffffff" size="2" face="arial">valid google link</font></a>
                             </td>
                        </tr>
                        <tr>
                             <td height="40" class="off" onmouseover="this.className='on'" onmouseout="this.className='off'">
                                 <a href="http://www.yahoo.com" target="_blank"><font color="#ffffff" size="2" face="arial">valid yahoo link</font></a>
                             </td>
                        </tr>
                    </table>
              </td>
              <td style="border:1px solid black; border-collapse:collapse;" >
                  <a href="http://www.msn.com">valid msn.com link</a>
                  <p>plain test - no link</p>
               </td>
            </tr>
        </table>
    </body>
</html> 
```

# servicebus - Windows 工作组上的 Microsoft 服务总线

> ID：15398665
> 
> 赞同：6
> 
> 时间：2013-03-13T23:45:31.897
> 
> 标签：servicebus

我刚开始玩微软服务总线。现在我个人的挑战是我在几个小时后，在我自己的时间等，这意味着我正在使用虚拟机和非域电脑。这些人都是工作组。

我已经取得了相当不错的成功，尤其是在我偶然发现这个链接之后：[Microsoft Service Bus 1.0 unable to communication with a server outside the client's domain](https://stackoverflow.com/questions/13179937/microsoft-service-bus-1-0-unable-to-communicate-with-a-server-outside-the-client)

这个家伙提供了一个非常需要的帮助，让我能够使用命名空间来创建队列等。

然而，我去 QueueClient.Send() 函数，我仍然得到（我解释了一下）。

```
"The token provider was unable to provide a security token while accessing 'https://Windows2008Server:9355/ServiceBusDefaultNamespace/$STS/Windows/'. Token provider returned message: ''. 
```

上面链接中的相同代码是我用于消息工厂的代码。所以我的问题变成了，有人对如何通过这个发送工作有任何想法吗？

如果我能解决这个小问题，那么我就可以开始了解 Service Bus 真正能做什么了。

非常感谢！

缺口

* * *

与以前相同的问题，将我的代码更改为：

```
 TokenProvider localUserTokenProvider = WindowsTokenProvider.CreateWindowsTokenProvider(connBuilder.StsEndpoints,new System.Net.NetworkCredential("LocalServer", "LocalPassword"));

        MessagingFactory messageFactory = MessagingFactory.Create(connBuilder.GetAbsoluteRuntimeEndpoints(), localUserTokenProvider);
        NamespaceManager namespaceManager = new NamespaceManager(connBuilder.GetAbsoluteManagementEndpoints(), localUserTokenProvider); 
```

所以，看起来我仍然需要在他们两个上拥有相同的帐户......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:49:22.503

如果您的客户端和服务器在不同的机器上，您可能会遇到证书信任问题。您必须使用已安装从服务器计算机导出服务总线服务器 CA，打开 Windows Server PowerShell 控制台的服务总线并使用*Get-SBAutoGeneratedCA* cmdlet，然后将其导入客户端计算机的受信任的根证书颁发机构存储中.

[此页面](http://msdn.microsoft.com/en-us/library/windowsazure/jj192993%28v=azure.10%29.aspx)包含有关如何导出/导入它们以启用远程客户端方案的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T21:21:14.447

我懂了。在这种情况下，由于您在两侧都使用窗口，因此不需要 OAuthTokenProvider。您可以使用 Windows 令牌提供程序，只需确保以下几点： - 您传递的凭据必须存在于服务器中 - 不要在凭据中包含任何域或工作组信息。

您需要像这样配置它（示例假设您正在为连接字符串使用配置文件）：

```
TokenProvider localUserTokenProvider = WindowsTokenProvider.CreateWindowsTokenProvider(
            connBuilder.StsEndpoints,
            new System.Net.NetworkCredential (userName, password)); 
```

[此页面](http://msdn.microsoft.com/en-us/library/jj714802%28v=azure.10%29.aspx#BMK_SBDev2)包含有关如何使用服务总线服务器“脱机”工作的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:19:49.437

我知道发生了什么，至少在某种程度上......

我必须使用与我登录到我的 Win8 框（开发）相同的凭据来访问 W2k8 服务器。

如果我尝试发送这样的参数：

```
//namespaceManager.Settings.TokenProvider = TokenProvider.CreateOAuthTokenProvider(new Uri[] { new Uri("https://ServerName:9355") }, new NetworkCredential("ServerLocalUser", "ServerLocalUserPwd", "ServerName"));
//messageFactory.GetSettings().TokenProvider = TokenProvider.CreateOAuthTokenProvider(new Uri[] { new Uri("https://ServerName:9355") }, new NetworkCredential("ServerLocalUser", "ServerLocalPWD", "ServerName")); 
```

然后就不行了。任何想法为什么它发送我的登录凭据而不使用 ServerLocalUser/Pwd/Name 组合？

我通过查看事件日志发现了这一点...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:52:10.473

这是我为使事情正常工作所做的。

我开始在我的开发机器（Win8/Studio2012）和我的服务器（Win2k8R2）上创建相同的本地用户帐户。我导出了上面引用的客户端证书（实际上是 2 或 3 次）并根据需要导入。一旦我建立了良好的连接工作，我就开始退出。删除了我的 Win8 机器上的本地帐户等。然后一切都开始神奇地工作。

关于我周围的一些事情。我正在使用 VMWare Fusion 完成所有这些工作。（是的融合）。VM 机器都在网络上配置了 NAT，没有静态 IP。

不知道如何，但它正在工作。我只是先发消息。我想如果我可以让消息正常工作，那么我可以关注 Pub/Sub 主题……接下来就是。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using Microsoft.ServiceBus;
    using Microsoft.ServiceBus.Messaging;
    using System.Net;
    using System.Security.Cryptography.X509Certificates;
    using System.Net.Security;
    using System.Diagnostics;
    using System.Security;

    namespace Test_Service_Bus
    {
        public static class Util
        {

            public static void SetCertificatePolicy()
            {
                ServicePointManager.ServerCertificateValidationCallback += RemoteCertificateValidate;
            }

            private static bool RemoteCertificateValidate(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors error)
            {
                System.Console.WriteLine("Warning, trust any certificate");
                return true;
            }
        }

        class Program
        {

            static string ServerFQDN = "SVRNICK"; //System.Net.Dns.GetHostEntry(string.Empty).HostName;
            static int HttpPort = 9355;
            static int TcpPort = 9354;
            static string ServiceNameSpace = "ServiceBusDefaultNamespace";
            const string QueueName = "ServiceBusQueueSample";

            static void Main(string[] args)
            {
                SDKVersion();

            }

            static void SDKVersion()
            {

                ServiceBusConnectionStringBuilder connBuilder = new ServiceBusConnectionStringBuilder();
                connBuilder.ManagementPort = HttpPort;
                connBuilder.RuntimePort = TcpPort;

                connBuilder.Endpoints.Add(new UriBuilder() { Scheme = "sb", Host = ServerFQDN, Path = ServiceNameSpace }.Uri);
                connBuilder.StsEndpoints.Add(new UriBuilder() { Scheme = "https", Host = ServerFQDN, Port = HttpPort, Path = ServiceNameSpace }.Uri);

                TokenProvider localUserTokenProvider = WindowsTokenProvider.CreateWindowsTokenProvider(connBuilder.StsEndpoints, new System.Net.NetworkCredential("ServerLocalAcct", "ServerLocalPassword"));

                MessagingFactory messageFactory = MessagingFactory.Create(connBuilder.GetAbsoluteRuntimeEndpoints(), localUserTokenProvider);
                NamespaceManager namespaceManager = new NamespaceManager(connBuilder.GetAbsoluteManagementEndpoints(), localUserTokenProvider);

                NamespaceManager.CreateFromConnectionString(connBuilder.ToString());

                if (namespaceManager == null)
                {
                    Console.WriteLine("\nUnexpected error: NamespaceManager is NULL");
                    return;
                }

                Console.WriteLine("Checking if queue exists");
                if (namespaceManager.QueueExists(QueueName))
                {
                    Console.WriteLine("Queue exists, let's delete it so we can start over again");
                    namespaceManager.DeleteQueue(QueueName);
                }

                Console.WriteLine("And create a new queue");
                namespaceManager.CreateQueue(QueueName);

                // create a message client
                QueueClient myQueueClient = messageFactory.CreateQueueClient(QueueName);

                Console.WriteLine("Feeding messages");
                for (int i = 0; i < 1000; i++)
                {
                    if (i % 100 == 0)
                        Console.WriteLine("Messages sent: {0}", i.ToString());

                    // send to message broker
                    using (BrokeredMessage sendMessage = new BrokeredMessage("Hello world. " + i.ToString()))
                    {
                        sendMessage.Label = "Label_" + i.ToString(); ;
                        myQueueClient.Send(sendMessage);
                    }

                }

                BrokeredMessage receivedMessage = myQueueClient.Receive(TimeSpan.FromSeconds(5));

                while (receivedMessage != null)
                {
                    Console.WriteLine(string.Format("Message Received: Body={0}", receivedMessage.GetBody<string>()));
                    receivedMessage.Complete();

                    receivedMessage = myQueueClient.Receive(TimeSpan.FromSeconds(5));
                }

                // Close things down.
                Console.WriteLine("Closing down message");
                if (messageFactory != null)
                {
                    messageFactory.Close();
                }
            }
        }
    } 
```

# parsing - 用于平衡同时分配的上下文无关语法

> ID：15398666
> 
> 赞同：1
> 
> 时间：2013-03-13T23:45:50.583
> 
> 标签：parsing, variable-assignment, grammar, context-free-grammar

我知道像 Python 这样的语言有同时（或“多路”）分配。今天在考试中遇到了一个类似的问题

> 为同时赋值编写一个语法的产生式，这样如果`a,b = 1, 1+0;`通过，它会很好地解析但`a,b,c = 1, 1+0`会返回错误（也就是说ids的数量需要与表达式相同）？错误应该是语法错误。

我是这样理解的：

> 您不需要为语法编写属性（因为它只是语法）。

我已经尝试并到处寻找可能对我有帮助的提示，但我仍然看不出用我被教导如何编写语法的方式来解决它。这是我到目前为止所拥有的：

```
P -> id Id_Tail = exp exp_Tail
Id_Tail -> , id Id_Tail
Id_Tail -> ε
exp_Tail -> , exp exp_Tail
exp_Tail -> ε
exp -> //assume this is is defined well enough to allow for all type of expressions that will generate/have a num (value) that is allowed to be assigned to the respective id 
```

但是，这绝不会产生所需的语法错误（它可能会继续生成比 id 更多的表达式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T18:44:47.943

这是一个简单的正则文法无法处理但上下文无关文法可以处理的文法示例。虽然标识符列表通常由一些类似于

```
ids = id
    | id ',' ids 
```

在这种情况下，您需要采取一种更像平衡标点符号的方法，例如，

```
expr = ... 
     | '(' expr ')' 
```

由于在规则的每次扩展处都添加了左右括号，因此实现了适当的平衡。您可以对多重赋值表达式执行类似的操作：

```
multiway-assignment = lvalue '=' rvalue                         
                    | lvalue ',' multiway-assignment ',' rvalue 
```

在这里，基本的多路赋值只是在赋值运算符的任一侧都有一个左值和右值。中心递归确保左侧左值上的每个值都必须与右侧的右值匹配，因此左值的数量始终等于右值的数量。

# r - R热图中的白色区域

> ID：15398667
> 
> 赞同：2
> 
> 时间：2013-03-13T23:45:51.883
> 
> 标签：r, heatmap

我的热图有一个奇怪的问题，它有白色区域，但我从未指定白色。

```
# cluster.in.da is my data
cluster.in.da <- t(scale(t(cluster.in.da)))
quantile.range <- quantile(cluster.in.da, probs = seq(0, 1, 0.01))
palette.breaks <- seq(quantile.range["5%"], quantile.range["95%"], 0.01)
color.palette  <- colorRampPalette(c("green", "black", "blue"))(length(palette.breaks) - 1)
heatmap(cluster.in.da,scale="none",breaks=palette.breaks,col=color.palette) 
```

白色区域是什么意思？我认为这与我的数据有关，可能是什么问题？

提前致谢。

![在此处输入图像描述](../Images/ee07f2393e747f1c46197d43851eac99.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:35:43.423

这很可能是因为您设置了 5-95% 分位数限制的中断。R 不知道在这个范围之外分配什么颜色。例子...

```
#No NA's in the data
m <- matrix( rnorm(100) , nrow = 10 )
quantile.range <- quantile( m , probs = seq(0, 1, 0.01) )
palette.all <- seq( quantile.range["0%"], quantile.range["100%"], 0.01 )
palette.half <- seq( quantile.range["50%"], quantile.range["100%"], 0.01 )

color.palette  <- colorRampPalette(c("green", "black", "blue"))(length(palette.all) -1)
h.all( m , scale="none",breaks=palette.all,col=color.palette) 
```

![在此处输入图像描述](../Images/0ae32e83c43189cb980cce133559429a.png)

```
color.palette  <- colorRampPalette(c("green", "black", "blue"))(length(palette.half) -1)
h.all( m , scale="none",breaks=palette.half,col=color.palette) 
```

![在此处输入图像描述](../Images/039db7c27fa270d9eee3ce87cf4edad8.png)

# c# - 我如何在参数中更改方法名称

> ID：15398670
> 
> 赞同：0
> 
> 时间：2013-03-13T23:45:58.587
> 
> 标签：c#, winforms, c#-4.0

我尝试在其他方法中动态调用一个方法，但是这段代码不起作用。我该怎么做 ？

```
#region Form1_Load()
private void Form1_Load(object sender, EventArgs e)
{
    Load();
    //this line 
    InitTimer(this.Form1_Load(sender,e));
}
#endregion

#region Timer()
public void InitTimer(dynamic _method)
{
    System.Windows.Forms.Timer timer1;
    timer1 = new System.Windows.Forms.Timer();
    timer1.Tick += new EventHandler(_method);
    timer1.Interval = 5000; // in miliseconds
    timer1.Start();
}
#endregion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:48:37.973

您正在寻找的是代表。委托本质上是一个可以稍后调用的方法指针。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Load();
        //this line 
        InitTimer(() => this.Form1_Load(sender,e));
    }

    public void InitTimer(Action target) 
    {
        System.Windows.Forms.Timer timer1;
        timer1 = new System.Windows.Forms.Timer();
        timer1.Tick += (sender, e) => target();
        timer1.Interval = 5000; // in miliseconds
        timer1.Start();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:54:47.260

```
#region Form1_Load()
private void Form1_Load(object sender, EventArgs e)
{
    Load();
    //this line 
    InitTimer(OtherLoad);
}
#endregion

#region Timer()

private void OtherLoad(object sender, EventArgs e)
{...}

public void InitTimer(EventHandler _method)
{
    System.Windows.Forms.Timer timer1;
    timer1 = new System.Windows.Forms.Timer();
    timer1.Tick += _method;
    timer1.Interval = 5000; // in miliseconds
    timer1.Start();
}
#endregion 
```

重要提示：让您的计时器调用不同的方法（我使用“OtherLoad”）以避免一遍又一遍地设置计时器！

# assembly - x86程序集中的嵌套循环？

> ID：15398672
> 
> 赞同：2
> 
> 时间：2013-03-13T23:46:13.873
> 
> 标签：assembly, x86, tasm

也许这很愚蠢，但我对汇编程序很陌生，所以请多多包涵。

有没有办法在汇编程序中实现嵌套循环？一个例子将不胜感激

我从一个示例中创建了这个简单的代码，它输出字母： WVUTSR 我对其进行了一些修改，以便像这样输出它：

```
W
VW
UVW
TUVW
STUVW
RSTUVW 
```

但相反，我得到了这个：

```
WW
VV
UU
TT
SS
RR 
```

这是代码：

```
.model small
.stack 100h
.data

M DB 'W'

.CODE

MAIN PROC FAR
MOV AX, @DATA
MOV DS, AX
MOV AX, 003H
INT 10H

; for (CX = 6; CX != 0; CX--) { // PSEUDO CODE
    ; for (BL = 0; BL != 7-CX; BL++) {
        ; putchar(M+BL);
    ; }
    ; M--;
    ; putchar(10);
    ; putchar(13);
; }

MOV CX, 6
OUTER:
INNER:
MOV AL, 7
SUB AL, CL
CMP BL, AL
JE INNEREQUAL
MOV AH, 02
MOV DL, M
INT 21H
MOV DL, AL
INT 21H
INC BL
JNE INNER

INNEREQUAL:
DEC M

MOV AH, 2
MOV DL, 10
INT 21H
MOV DL, 13
INT 21H
LOOP OUTER

MOV AH, 4CH
INT 21H

MAIN ENDP
END MAIN 
```

如果有帮助，我正在使用 tasm。我现在也要去拔头发了。

# sockets - 选择失败，错误代码 9

> ID：15398676
> 
> 赞同：1
> 
> 时间：2013-03-13T23:46:35.230
> 
> 标签：sockets, client-server

我在下面有这个服务器代码，当一些客户端尝试连接到这个时，这个代码中的选择函数会抛出一些错误的文件描述符错误以及错误代码 9，已经通过代码并且找不到任何问题，任何帮助将不胜感激，但这种行为并不是恒定的！

```
main()
{
    int server_fd, client_fd;
    socklen_t server_len, client_len;
    struct sockaddr_in server_address, client_address;
    fd_set readfds, testfds;
    char errorstr[128];
    char req_buf[REQ_BUF_LEN];
    int result;
    struct itimerspec time_period = {{10,0},{10,0}}; /* periodic timer */
    struct timeval sel_timeout = {0, 100000};
    int lines = 0;

    FD_ZERO(&readfds);
    FD_ZERO(&testfds);

    /* Create and name a socket for the server */
    server_fd = socket(AF_INET, SOCK_STREAM, 0);
    if( server_fd < 0 ) {
        printf("socket creation failed \n");
        exit(0);
    }
    int on = 1;
    /* Enable address reuse */
    int ret = setsockopt( server_fd, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on) );

    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = htonl(INADDR_ANY);
    server_address.sin_port = htons(BL_MANAGER_PORT);
    server_len = sizeof(server_address);

    result = bind(server_fd, (struct sockaddr *)&server_address, server_len);
    if( result < 0 ) {
        printf("Bind faield \n");
        exit(0);
    }

    /* Create a connection queue and wait for clients */
    result = listen(server_fd, MAX_CLIENTS);
    if( result < 0 ) {
        printf("Listen failed\n");
        exit(0);
    }

    FD_SET(server_fd, &readfds);

    /* create timer to fire every one second */
 int timer_fd  =  timerfd_create(CLOCK_MONOTONIC , 0);
    if( timer_fd < 0 ) {
        printf("Timer fd failed\n");
        exit(0);
    }

    result = timerfd_settime(timer_fd, 0, &time_period, NULL);
    if( result < 0 ) {
        printf("timer fd set time failed\n");
        exit(0);
    }
    FD_SET(timer_fd, &readfds);

    while(1) {
        int fd;
        int nread;
        int result;
        char *ptr;
        int len_read = 0;
        uint64_t expired = 0;

        testfds = readfds;

        result = select(FD_SETSIZE, &testfds, NULL, NULL, &sel_timeout);
        if( result < 0 ) {
           perror ("The following error occurred");
           printf("select failed");
           exit(0);
        }

        /* There is activity. Find the descriptor */
        for(fd = 0; fd < FD_SETSIZE; fd++) {
            if(FD_ISSET(fd, &testfds)) {
                if (fd == timer_fd) {
                        read(timer_fd, &expired, sizeof(uint64_t));
                        printf("rate = %d\n", (lines/(10 * (uint32_t)expired)));
                        lines = 0;
                } else if( fd == server_fd ) {         /* is this server fd? */
                    client_fd = accept(server_fd,
                                       (struct sockaddr *)&client_address,
                                       &client_len);
                    FD_SET(client_fd, &readfds);
                } else {                                 /* is this read fd? */
                    ioctl(fd, FIONREAD, &nread);
                    //assert(nread < REQ_BUF_LEN);
                    if( nread == 0 ) {
                        FD_CLR(fd, &readfds);
 close(fd);
                    } else {
                        nread = read(fd, req_buf, REQ_BUF_LEN-1);
                        //req_buf[nread] = '\0';
                        //printf("%s\n", req_buf);
                        ptr = req_buf;
                        while ((*ptr != EOF) && ++len_read < nread) {
                                if (*ptr == '\n') {
                                        ++lines;
                                }
                                ptr++;
                        }
                        //printf("num of lines: %d\n", lines);
                    }
                }
            } /* FD_ISSET(fd, &testfds)? */
        }
    } /* while(1) */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:41:37.647

你在滥用`select()`，所以你会从中得到随机结果。尝试更多类似的东西：

```
main()
{
    int server_fd, client_fd, max_fd = 0;
    socklen_t server_len, client_len;
    struct sockaddr_in server_address, client_address;
    fd_set readfds, testfds;
    char errorstr[128];
    char req_buf[REQ_BUF_LEN];
    int result;
    struct itimerspec time_period = {{10,0},{10,0}}; /* periodic timer */
    struct timeval sel_timeout;
    int lines = 0;

    FD_ZERO(&readfds);

    /* Create and name a socket for the server */
    server_fd = socket(AF_INET, SOCK_STREAM, 0);
    if( server_fd < 0 ) {
        printf("socket creation failed \n");
        exit(0);
    }
    int on = 1;
    /* Enable address reuse */
    int ret = setsockopt( server_fd, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on) );

    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = htonl(INADDR_ANY);
    server_address.sin_port = htons(BL_MANAGER_PORT);
    server_len = sizeof(server_address);

    result = bind(server_fd, (struct sockaddr *)&server_address, server_len);
    if( result < 0 ) {
        printf("Bind faield \n");
        exit(0);
    }

    /* Create a connection queue and wait for clients */
    result = listen(server_fd, MAX_CLIENTS);
    if( result < 0 ) {
        printf("Listen failed\n");
        exit(0);
    }

    FD_SET(server_fd, &readfds);
    max_fd = server_fd;

    /* create timer to fire every one second */
    int timer_fd  =  timerfd_create(CLOCK_MONOTONIC , 0);
    if( timer_fd < 0 ) {
        printf("Timer fd failed\n");
        exit(0);
    }

    result = timerfd_settime(timer_fd, 0, &time_period, NULL);
    if( result < 0 ) {
        printf("timer fd set time failed\n");
        exit(0);
    }

    FD_SET(timer_fd, &readfds);
    if (max_fd < timer_fd)
        max_fd = timer_fd;

    while(1) {
        int fd;
        int nread;
        int result;
        char *ptr;
        uint64_t expired = 0;

        FD_ZERO(&testfds);
        FD_COPY(&readfds, &testfds);

        sel_timeout.tv_sec = 0;
        sel_timeout.tv_usec = 100000;

        result = select(max_fd+1, &testfds, NULL, NULL, &sel_timeout);
        if( result < 0 ) {
           perror ("The following error occurred");
           printf("select failed");
           exit(0);
        }

        /* There is activity. Find the descriptor */
        for(fd = 0; fd <= max_fd; fd++) {
            if(FD_ISSET(fd, &testfds)) {
                if (fd == timer_fd) {
                    read(timer_fd, &expired, sizeof(uint64_t));
                    printf("rate = %d\n", (lines/(10 * (uint32_t)expired)));
                    lines = 0;
                } else if( fd == server_fd ) {         /* is this server fd? */
                    client_fd = accept(server_fd,
                                       (struct sockaddr *)&client_address,
                                       &client_len);
                    if (client_id < 0) {
                        perror ("The following error occurred");
                        printf("accept failed");
                    } else {
                        FD_SET(client_fd, &readfds);
                        if (max_fd < client_fd)
                            max_fd = client_fd;
                    }
                } else {                                 /* is this read fd? */
                    nread = read(fd, req_buf, REQ_BUF_LEN);
                    if( nread <= 0 ) {
                        FD_CLR(fd, &readfds);
                        close(fd);
                        if (fd == max_fd) {
                            max_fd = 0;
                            for (int fd2 = fd-1; fd2 >= 0; fd2--) {
                                if(FD_ISSET(fd2, &readfds)) {
                                    max_fd = fd2;
                                    break;
                                }
                            }
                        }
                    } else {
                        //printf("%.*s\n", nread, req_buf);
                        ptr = req_buf;
                        while ((nread > 0) && (*ptr != EOF)) {
                            if (*ptr == '\n') {
                                ++lines;
                            }
                            ptr++;
                            nread--;
                        }
                        //printf("num of lines: %d\n", lines);
                    }
                }
            } /* FD_ISSET(fd, &testfds)? */
        }
    } /* while(1) */
} 
```

话虽如此，最好使用`poll()`或`epoll()`在可用时，然后您根本不必处理`fd_set`。

# php - array_unshift 用于多维数组

> ID：15398678
> 
> 赞同：9
> 
> 时间：2013-03-13T23:47:20.267
> 
> 标签：php, arrays, multidimensional-array

我正在尝试将一个数组作为第一个元素插入到多维数组中。我的原始数组示例

```
Array (
    0 => array ( "point1.0" => "some data", "point2.0" => "some data" )
    1 => array ( "point1.1" => "some data", "point2.1" => "some data" )
) 
```

然后我有要插入的数组作为第一个元素

```
$newArray = array("point1.2" => "some data", "point2.2" => "some data" ) 
```

我的结果应该是

```
Array (
    0 => array ( "point1.2" => "some data", "point2.2" => "some data" )
    1 => array ( "point1.0" => "some data", "point2.0" => "some data" )
    2 => array ( "point1.1" => "some data", "point2.1" => "some data" )
) 
```

在这种情况下，array_unshift 似乎失败了。有没有比创建一个新数组并通过 foreach 循环插入每个子数组更好的解决方案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T23:52:07.070

[`array_unshift`](http://php.net/array_unshift)应该为你工作。应该注意的是，该函数修改了传递给它的数组并且不返回新数组，因此您**不**应该将返回值分配回数组变量。

正确的：

```
array_unshift($arr, $newArray); 
```

不正确：

```
$arr = array_unshift($arr, $newArray); 
```

# automapper - AutoMapper 根据条件映射到派生类

> ID：15398682
> 
> 赞同：3
> 
> 时间：2013-03-13T23:47:51.377
> 
> 标签：automapper

我想根据源中的属性值将基类映射到几个派生类之一。到目前为止，我有这个，但它似乎有点笨拙和丑陋。有没有更好的办法？

```
Mapper.CreateMap<DTO.BaseData, BaseData>()
                .ConstructUsing(src =>
                {
                    switch (src.Type)
                    {
                        case 0:
                            return new FtpData(src.Id, src.Content);

                        // many more case statements in here.....

                    }

                    return new NullData();
                }); 
```

# php - Wordpress：使用数组手动将类添加到 post_class？

> ID：15398683
> 
> 赞同：4
> 
> 时间：2013-03-13T23:47:56.080
> 
> 标签：php, wordpress, class

我目前正在使用以下代码行：

```
<li <?php post_class( $classes); ?>> 
```

我基本上希望手动将“缩略图”类添加到此列表项中。我尝试了以下操作，但它阻止了它检索任何类。

```
 <li <?php post_class( $classes, 'thumbnail' ); ?>> 
```

任何人都可以帮助我如何正确格式化它吗？我对 php 和 wordpress 有点陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T23:51:13.763

你可以简单地添加一个新成员来`$classes`喜欢这样：

`<li <?php $classes[] = 'thumbnail'; post_class( $classes ); ?>>`

# tiles - tiles.xml 中的 jsp 替换

> ID：15398686
> 
> 赞同：1
> 
> 时间：2013-03-13T23:48:09.100
> 
> 标签：tiles, tiles2, apache-tiles

我正在查看 Travel 演示项目，并注意到在酒店下的 tiles.xml 中有以下内容：

```
 <definition name="hotels/*" extends="standardLayout">
    <put-attribute name="body" value="/WEB-INF/views/hotels/{1}.jsp" />
</definition> 
```

据我所知，这允许控制器返回类似“hotels/list”的内容，然后将“list”映射到 {1} 和 /WEB-INF/views/hotels/{1}.jsp 变为

```
 /WEB-INF/views/hotels/list.jsp 
```

我正在查看 apache-tiles 文档，但找不到任何提及它或它适用于哪些版本。

有人可以指出我在文档中引用它的位置，还是其他任何地方？我想多学一点。

# css - CSS边框样式

> ID：15398690
> 
> 赞同：1
> 
> 时间：2013-03-13T23:48:28.757
> 
> 标签：css

在我的一个 wordpress 网站上，有一个`border: 1px solid #cccccc`. 我正在使用子主题，并且只希望包装器具有左右边框，而不是顶部和底部。我知道我可以使用左边框等，但它仍然会有一个完整的边框，因为父主题如上所述指定了边框。如何在不更改父 css 的情况下以我想要的方式获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:54:48.813

那么你可以做这样的事情并添加一个边框宽度：

```
#box {
    border: 1px solid #cccccc;
    border-width: 0px 1px 0px 1px;
} 
```

这可以在子级中声明以覆盖父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:54:55.123

有几个答案。

CSS 是按照加载 CSS 文件的顺序处理的，因此如果子主题在父主题之后加载，则子主题应该获胜。

如果这不是正在发生的事情，那么有一个 CSS 属性 !important 将 CSS 样式放在队列的顶部。这些仍然按顺序处理，因此冲突的 !important 属性以与加载相同的顺序进行评估。

如果 css 被乱序加载，您应该做的就是将子主题中的属性更改为：

```
border-width: 0 1px !important; 
```

# html - HTML 颜色中的 CSS

> ID：15398693
> 
> 赞同：2
> 
> 时间：2013-03-13T23:48:36.243
> 
> 标签：html, css

我想用某种颜色制作一个标题，但只有一个标题，没有别的，但它对我不起作用。

```
<html>
    <head>
    <title> website </title>
    <style type="text/css">
  body {
    color: #0066FF;
    background-color: #66FF33 }
  </style>
    </head>
    <body>
    <h1> heading </h1>
    <h3> sub heading </h3>
    <p> abcdefghijklmnopqrstuvwxyz

    </body>
</html> 
```

我只希望标题改变颜色。如果您还可以告诉我如何单独更改文本和子标题颜色，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:51:06.837

尝试这个：

```
<style type="text/css">
    h1 {
        color: #0066FF;
        background-color: #66FF33 }  /* this will change all h1 tags (heading) */

    h3 {
        color:red; } /* this will change all h3 tags (sub-heading) */

    p { 
        color:blue; } /* this will change all paragragh (P) tags */

    /* And a few more examples: */

    .someClass { color:green; } /* this will change all elements with the attribute class="someClass" to green */

    #someID { color: purple; } /* this will change an element with the id of someID to purple (there should only be one) */
</style> 
```

这将改变`<h1>`、`<h3>`和`<p>`标签的样式。此外，您还缺少一个结束段落标记 ( `</p>`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:55:12.667

```
<html>
    <head>
    <title> website </title>
    <style type="text/css">
  body {
    color: #0066FF;
    background-color: #66FF33 }
  #own_color {
    color: #FFFFFF;
  }
  </style>
    </head>
    <body>
    <h1 id="own_color"> heading </h1>
    <h3> sub heading </h3>
    <p> abcdefghijklmnopqrstuvwxyz

    </body>
</html> 
```

上面的代码仅适用于一个标头。如果您希望两个或多个标题具有相同的 CSS 样式，则需要将 # 更改为表示类的点 (.)。并输入例如：标题。

# core-animation - 检测 CAKeyframeAnimaton 中显示的帧

> ID：15398699
> 
> 赞同：0
> 
> 时间：2013-03-13T23:49:52.450
> 
> 标签：core-animation, cakeyframeanimation

我需要显示有关通过 CAKeyframeAnimation 显示的当前 fey 帧图像的信息。因此，当显示“值”索引 0 处的图像时，会在一些 NSTextField 中显示有关该图像的信息，并且当它动画到索引 1 时，会显示有关该图像的信息。是否有可能做到这一点？

```
CAKeyframeAnimation *theAnimation=[CAKeyframeAnimation animationWithKeyPath:@"contents"];
theAnimation.values = myView.productImages;
theAnimation.duration = 5.0;
theAnimation.repeatCount = HUGE_VALF;
theAnimation.calculationMode = kCAAnimationDiscrete;
theAnimation.fillMode = kCAFillModeRemoved;
[myView.exampleCALayer addAnimation:theAnimation forKey:@"contents"];
[myView.exampleCALayer setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:10:09.553

通常，您可以观察诸如位置之类的属性，例如，在动画运行时使用计时器或显示链接很容易，但是，由于它是您要监视的内容属性，所以事情就有点棘手了。我建议您为自己的自定义属性设置动画。然后，您可以将其与现有内容动画一起设置在一个组中，并在您的自定义属性更改时获取更新。

步骤如下：

1.  声明一个 CALayer 派生类
2.  覆盖这些方法：

    `- (id)initWithLayer:(id)layer`

    `+ (BOOL)needsDisplayForKey:(NSString*)key`

    `- (void)drawInContext:(CGContextRef)ctx`

3.  在标题中创建要覆盖的属性

4.  创建一个关键帧动画，为您的属性设置动画

以下是您的层在其实现中的样子：

```
@implementation MLImageLayer

- (id)initWithLayer:(id)layer
{
    if(self = [super initWithLayer:layer]) {
        if([layer isKindOfClass:[MLImageLayer class]]) {
            MLImageLayer *other = (MLImageLayer*)layer;
      [self setCounter:[other counter]];
        }
    }
    return self;
}

+ (BOOL)needsDisplayForKey:(NSString*)key
{
  if ([key isEqualToString:@"counter"]) {
    return YES;
  } else {
    return [super needsDisplayForKey:key];
  }
}

- (void)drawInContext:(CGContextRef)ctx
{
  DLog(@"Counter is: %d", _counter);
}

@end 
```

然后，要实际为属性设置动画，请执行以下操作：

```
 CAKeyframeAnimation *counterAnimation = [CAKeyframeAnimation 
                                              animationWithKeyPath:@"counter"];
  [counterAnimation setDelegate:self];
  NSArray *values = @[@(0), @(1), @(2), @(3), @(4), @(5)];
  [counterAnimation setValues:values];
  [counterAnimation setDuration:5.0];
  [counterAnimation setRepeatCount:HUGE_VALF];
  [counterAnimation setCalculationMode:kCAAnimationDiscrete]; 
```

现在，回到派生层的 -drawInContext: 方法中，您可以监控计数器值，然后做出相应的响应。

不过，这可能有点棘手，因为您要同时为两个属性设置动画。您必须使用一个组才能使其正常工作：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  _animationLayer = [MLImageLayer layer];
  [_animationLayer setBounds:CGRectMake(0.0f, 0.0f, 400.0f, 320.0f)];
  [_animationLayer setPosition:[[self view] center]];

  UIImage *image = [UIImage imageNamed:@"Countryside.jpg"];
  [_animationLayer setContents:(__bridge id)[image CGImage]];

  [[[self view] layer] addSublayer:_animationLayer];

  CAKeyframeAnimation *slideShowAnimation = [CAKeyframeAnimation animationWithKeyPath:@"contents"];
  [slideShowAnimation setValues:@[(id)[[UIImage imageNamed:@"Countryside.jpg"] CGImage],
   (id)[[UIImage imageNamed:@"Countryside-1.jpg"] CGImage],
   (id)[[UIImage imageNamed:@"Countryside-2.jpg"] CGImage],
   (id)[[UIImage imageNamed:@"Countryside-3.jpg"] CGImage],
   (id)[[UIImage imageNamed:@"Countryside-4.jpg"] CGImage],
   (id)[[UIImage imageNamed:@"Countryside-5.jpg"] CGImage]]];

  [slideShowAnimation setDuration:5.0];
  [slideShowAnimation setDelegate:self];
  [slideShowAnimation setRepeatCount:HUGE_VALF];
  [slideShowAnimation setCalculationMode:kCAAnimationDiscrete];

  CAKeyframeAnimation *counterAnimation = [CAKeyframeAnimation animationWithKeyPath:@"counter"];
  [counterAnimation setDelegate:self];
  NSArray *values = @[@(0), @(1), @(2), @(3), @(4), @(5)];
  [counterAnimation setValues:values];
  [counterAnimation setDuration:5.0];
  [counterAnimation setRepeatCount:HUGE_VALF];
  [counterAnimation setCalculationMode:kCAAnimationDiscrete];

  CAAnimationGroup *group = [CAAnimationGroup animation];
  [group setDuration:5.0];
  [group setRepeatCount:HUGE_VALF];
  [group setAnimations:@[slideShowAnimation, counterAnimation]];

  [_animationLayer addAnimation:group forKey:nil];
} 
```

[我在 github 上](https://github.com/perlmunger/CASlideShow)发布了一个项目。它是为 iOS 编写的，但您应该能够在 OSX 应用程序中调整 Core Animation 特定代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T16:27:44.690

哇，这是一个伟大的工作！！！我会用的……</p>

请注意，我在 Xcode 5 上，我注意到只有第一个动画“slideShowAnimation”被触发。

我可以通过添加这两行来解决它：

```
[slideShowAnimation setBeginTime:0];
[counterAnimation setBeginTime:0]; 
```

感谢分享。- 网卡

# java - 线程“主”java.util.NoSuchElementException 中的异常

> ID：15398703
> 
> 赞同：14
> 
> 时间：2013-03-13T23:50:27.823
> 
> 标签：java, exception, java.util.scanner

每当我运行它时，该`chooseCave()`功能都可以与`in.nextInt()`. 当我选择洞穴时，消息以 2 秒的间隔弹出，然后一旦超过该部分，它就会给我错误：

```
Exception in thread "main" java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Unknown Source)
    at Dragon.main(Dragon.java:81) 
```

我试过`hasNextLine()`and `hasNextInt()`，当我`while hasNextLine()`在`main`方法中使用时，我得到了更多的错误。当我`while hasNextInt()`在该`chooseCave()`方法中使用时，它不接受我的输入。

当我`if hasNextInt()`在该`chooseCave()`方法中使用时，它不接受我对`playAgain`字符串的输入，并直接进入另一个游戏，但随后`hasNextInt()`布尔值返回`false`并无限发送垃圾邮件“哪个洞穴......”。

我已经阅读了错误报告以及 Java-docs 和 Stack Overflow 的类似问题。请帮忙。

```
import java.util.Scanner;
public class Dragon {

public static void displayIntro() {
    System.out.println("You are in a land full of dragons. In front of you, ");
    System.out.println("You see two caves. In one cave, the dragon is friendly");
    System.out.println("and will share his treasure with you. The other dragon");
    System.out.println("is greedy and hungry, and will eat you on sight");
    System.out.println(' ');
}

public static int chooseCave() {
    Scanner in = new Scanner(System.in);
    int cave = 0;
    while (cave != 1 && cave != 2) {
        System.out.println("Which cave will you go into? (1 or 2)");

        cave = in.nextInt();

    }
    in.close();
    return cave;
} 

public static void checkCave(int chosenCave) {
    System.out.println("You approach the cave...");
    try
       {
       // Sleep at least n milliseconds.
       // 1 millisecond = 1/1000 of a second.
       Thread.sleep( 2000 );
       }
    catch ( InterruptedException e )
       {
       System.out.println( "awakened prematurely" );
       }
    System.out.println("It is dark and spooky...");
    try
       {
       // Sleep at least n milliseconds.
       // 1 millisecond = 1/1000 of a second.
       Thread.sleep( 2000 );
       }
    catch ( InterruptedException e )
       {
       System.out.println( "awakened prematurely" );
       }
    System.out.println("A large dragon jumps out in front of you! He opens his jaws and...");
    try
       {
       // Sleep at least n milliseconds.
       // 1 millisecond = 1/1000 of a second.
       Thread.sleep( 2000 );
       }
    catch ( InterruptedException e )
       {
       System.out.println( "awakened prematurely" );
       }

    double friendlyCave = Math.ceil(Math.random() * 2);

    if (chosenCave == friendlyCave) {
        System.out.println("Gives you his treasure!");
    }
    else {
        System.out.println("Gobbles you down in one bite!");
    }

}
public static void main(String[] args) {
    Scanner inner = new Scanner(System.in);
    String playAgain = "yes";
    boolean play = true;
    while (play) {
        displayIntro();
        int caveNumber = chooseCave();
        checkCave(caveNumber);
        System.out.println("Do you want to play again? (yes or no)");
        playAgain = inner.nextLine();
        if (playAgain == "yes") {
            play = true;
        }
        else {
            play = false;
        }
    }
    inner.close();

}

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T00:06:40.333

您关闭了`Scanner`关闭底层证券的第二个`InputStream`，因此第一个`Scanner`不能再从相同`InputStream`的`NoSuchElementException`结果中读取。

解决方案：对于控制台应用程序，使用单个`Scanner`从`System.in`.

*旁白：*如前所述，请注意`Scanner#nextInt`不使用换行符。在尝试使用 再次调用之前，确保这些已`nextLine`被使用`Scanner#newLine()`。

请参阅：[不要在单个 InputStream 上创建多个缓冲包装器](https://www.securecoding.cert.org/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+InputStream)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T23:54:55.590

该`nextInt()`方法离开`\n`（结束行）符号并立即被 拾取`nextLine()`，跳过下一个输入。你想要做的是使用`nextLine()`一切，并在以后解析它：

```
String nextIntString = keyboard.nextLine(); //get the number as a single line
int nextInt = Integer.parseInt(nextIntString); //convert the string to an int 
```

这是迄今为止避免问题的最简单方法——不要混合你的“下一个”方法。仅使用`nextLine()`，然后解析`int`s 或单独的单词。

* * *

`Scanner`此外，如果您只使用一个终端进行输入，请确保只使用一个。这可能是例外的另一个原因。

* * *

最后一点：将 a`String`与`.equals()`函数进行比较，而不是`==`运算符。

```
if (playAgain == "yes"); // Causes problems
if (playAgain.equals("yes")); // Works every time 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-30T17:09:09.507

根本不关闭

`in.close()`从您的代码中删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T00:15:24.967

Reimeus 是对的，您看到这一点是因为您的 chooseCave() 中**的****in.close**。另外，这是错误的。

```
if (playAgain == "yes") {
      play = true;
} 
```

您应该使用等于而不是“==”。

```
if (playAgain.equals("yes")) {
      play = true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-21T12:40:01.757

每个人都解释得很好。让我回答什么时候应该使用这个类。

**什么时候应该使用 NoSuchElementException？**

Java 包含几种不同的方法来遍历集合中的元素。这些类中的第一个，Enumeration，被引入`JDK1.0`并且通常被认为已弃用，以支持更新的迭代类，如 Iterator 和 ListIterator。

与大多数编程语言一样，Iterator 类包含一个`hasNext()`方法，该方法返回一个布尔值，指示迭代是否还有元素。如果`hasNext()`返回`true`，则该`next()`方法将返回迭代中的下一个元素。与 Enumeration 不同，Iterator 也有一个`remove()`方法，该方法删除通过 获得的最后一个元素`next()`。

虽然 Iterator 被泛化以用于 中的所有集合，但`Java Collections Framework`更`ListIterator`专业化并且仅适用于基于列表的集合，如`ArrayList`、`LinkedList`等。但是，通过允许迭代通过和方法`ListIterator`在两个方向上遍历来添加更多功能。`hasPrevious()``previous()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-09T15:25:21.040

根据其他人之前的评论：

> 您关闭了关闭底层 InputStream 的第二个 Scanner，因此第一个 Scanner 无法再从同一个 InputStream 中读取，并产生 NoSuchElementException 结果。
> 
> 解决方案：对于控制台应用程序，使用单个 Scanner 从 System.in 读取。
> 
> 旁白：如前所述，请注意 Scanner#nextInt 不使用换行符。在尝试使用 Scanner#newLine() 再次调用 nextLine 之前，请确保已使用这些内容。
> 
> 请参阅：不要在单个 InputStream 上创建多个缓冲包装器

我想出了这个解决方案。也许这会帮助某人：

以下代码有效：

```
import java.util.Scanner;

public class Main {

    private static String func(Scanner in) {
        String input = "";
        in = new Scanner(System.in).useDelimiter("\n");
        input = in.next();
        System.out.println("UserInput: " + input);

        return input;
    }

    public static void main(String[] args) {

        Scanner in = new Scanner(System.in);

        String s;
        s = func(in);
        System.out.println("Main: " + s);

        s = func(in);
        System.out.println("Main: " + s);
    }
} 
```

并且以下代码将不起作用。这输出与线程相同的问题：

```
import java.util.Scanner;

public class Main {

    private static String func() {
        String input = "";
        Scanner s = new Scanner(System.in);
        input = s.nextLine();
        System.out.println("UserInput: " + input);

        input = s.nextLine();
        System.out.println("UserInput: " + input);

        s.close();

        return input;
    }

    public static void main(String[] args) {

        String s;
        s = func();
        System.out.println("Main: " + s);

        s = func();
        System.out.println("Main: " + s);
    }
} 
```

# uiimageview - UIImageView 用户交互已启用，但仍要点击手势识别

> ID：15398704
> 
> 赞同：0
> 
> 时间：2013-03-13T23:50:42.387
> 
> 标签：uiimageview, uitapgesturerecognizer

我尝试使以下工作：

```
vw = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [ass.match.ch.shots intValue]*(50+spacer), 20)];

for(int i =index;i<index+[ass.match.ch.shots intValue];i++){
    Results *theRes = [[ass.mem.results allObjects] objectAtIndex:i];
    UIImageView *img = [[UIImageView alloc] initWithFrame:CGRectMake(a*(50+spacer), 0, 50, 50)];
    if([theRes.singleresult intValue] > 0){
        [img setImage:[UIImage imageNamed:@"hit.png"]];
        [img.layer setShadowColor:[[UIColor greenColor] CGColor]];
    }else{
        [img setImage:[UIImage imageNamed:@"nhit.png"]];
        [img.layer setShadowColor:[[UIColor redColor] CGColor]];
    }

    UITapGestureRecognizer *tap =
    [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];

    img.userInteractionEnabled = YES;
    [img setContentMode:UIViewContentModeCenter];
    [img.layer setShadowOffset:CGSizeMake(-1.0, -1.0)];
    [img.layer setShadowOpacity:0.5];
    [img addGestureRecognizer:tap];
    [vw addSubview:img];
    a++;
}

[vw setCenter:CGPointMake((self.view.frame.size.width-200)/2,150)];
[vw setUserInteractionEnabled:YES];

[self.view addSubview:vw]; 
```

但是当我点击任何创建的 ImageViews 时，这个函数没有被调用，我不知道为什么：

```
-(IBAction)imageTapped:(id)sender{
NSLog(@"Test"); } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:01:14.310

你必须改变你的功能，这是你的解决方案..

```
UIButton *btn = [[UIButton alloc]init];
btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(50,50,70,70);
btn.backgroundColor = [UIColor blackColor];
[btn addTarget:self action:@selector(nextview:)forControlEvents:UIControlEventTouchUpInside];

[self.view addSubview:btn]; 
```

}

```
-(void) nextview:(id)sender {
NSLog(@"tapped");
} 
```

工作完美。，希望这会有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:25:12.957

我自己发现的：

```
[vw bringSubviewToFront:img]; 
```

是解决方案。现在它正在工作。

# jquery - Django、Jquery、AJAX 和 JSON HTTP 500

> ID：15398708
> 
> 赞同：0
> 
> 时间：2013-03-13T23:51:12.853
> 
> 标签：jquery, ajax

我试图通过 AJAX/JSON 发布 POST，但服务器报告 HTTP 500 错误。

**看法**

```
url(r'^digajax$', 'digajax.views.main'),
url(r'^digajax_ajax$', 'digajax.views.ajax'), 
```

**模板**

```
<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8">
</head>
<body>
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

<script type="text/javascript">
        $(document).ready(function() {
                $("#button").click(function() {
                        var input_string = $("#digInput").val();
                        $.ajax({
                                url : "/digajax_ajax",
                                type : "POST",
                                data : {
                                        clientinput : input_string,
                                        csrfmiddlewaretoken: '{{ csrf_token }}'
                                },
                                success : function(data) {
                                        jQuery('#result').html(data).hide().fadeIn(1500);
                                },
                                error : function(xhr,errmsg,err) {
                                        alert(xhr.status + ": " + xhr.responseText);
                                }
                        });
                        return false;
                });
        });
</script>

                <form method="post" name="diginput form" action="/digajax_ajax">
                {% csrf_token %}
                                <input name="digInput" id="digInput" type="text">
                                <input id="button" type="button" value="lookup"></input>
                </form>

<p id="result">
</p>

</body>
</html> 
```

任何想法，firebug 输出只显示 500 HTTP 错误。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:52:09.077

在更改 jquery $.ajax 并从实际表单中删除帖子后，它现在可以工作了。

```
<html lang="en">
 <head>
    <meta charset="utf-8">
</head>
<body>
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

<script type="text/javascript">
        $(document).ready(function() {
                $("#button").click(function() {
                        var input_string = $("#digInput").val();
                        $.ajax({
                                url : "/digajax_ajax",
                                type : "POST",
                                dataType: "json",
                                data : {
                                        clientinput : input_string,
                                        csrfmiddlewaretoken: '{{ csrf_token }}'
                                },
                                success : function(json) {
                                        $('#result').append( 'Response Value: ' + json.clientinput1);
                                },
                                error : function(xhr,errmsg,err) {
                                        alert(xhr.status + ": " + xhr.responseText);
                                }
                        });
                        return false;
                });
        });
</script>

                <form method="post" name="diginput form" >
                {% csrf_token %}
                                <input name="digInput" id="digInput" type="text">
                                <input id="button" type="button" value="lookup"></input>
                </form>

<div id="result">
</div>

</body>
</html> 
```

# doxygen - 在 Doxygen 中引用参数的正确方法是什么？

> ID：15398711
> 
> 赞同：72
> 
> 时间：2013-03-13T23:51:24.310
> 
> 标签：doxygen

我有一个函数的以下 Doxygen 文档：

```
/**
  @brief Does interesting things

  @param[in]  pfirst The first parameter: a barrel full of monkeys

  @pre
    "pfirst" must have been previously passed through BarrelFiller()
*/ 
```

请注意，这`pfirst`是一个参数，并且在前提条件中引用了它。

我在这里用引号将它括起来，因为我想将它与文本的其余部分分开。但是最好以 Doxygen 突出显示命令的方式执行此操作，并且最好将其链接到参数定义。有没有办法做到这一点？

如果仅使用默认配置（或对其进行细微更改）会发生这种情况，那就太好了。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-16T22:16:55.510

Doxygen 提供了[`\p`](http://www.doxygen.nl/manual/commands.html#cmdp)指示下一个单词是函数参数的命令。你会像这样使用它：

```
... the \p x and \p y coordinates are used to ... 
```

我相信默认情况下这将使用打字机字体表示。我认为这目前不提供任何自动链接功能，但将来可能会提供。

有一个相关的命令，[`\a`](http://www.doxygen.nl/manual/commands.html#cmda)用于标记成员参数。默认情况下，在文本（`<em>arg</em>`）中强调显示

您可以找到有关各种 Doxygen[特殊命令参考](http://www.doxygen.nl/manual/commands.html)的更多信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-24T23:58:20.440

我知道你问的是`@param`eters，但谷歌搜索也在这里引导`@return`类型，所以这就是答案：

## `#`在返回值前面使用Doxygen来创建指向其定义的超链接：

使用`#`符号。

完整示例（**请参见`@return`下面的类型`#`，每个类型前面都有一个**）：

```
#include <stdarg.h> // for va_list, va_start, va_end
#include <stdio.h>  // for vsnprintf

// Function prototype:

int debug_printf(const char *format, ...) __attribute__((format(printf, 1, 2)));

// Function definition:

/// @brief      Function to print out data through serial UART for debugging.
/// @details    Feel free to add more details here,
///             perhaps
///             even
///             a
///             whole
///             paragraph.
/// @note       Optionally add a note too.
/// @param[in]  format  `printf`-like format string
/// @param[in]  ...     `printf`-like variadic list of arguments corresponding 
///                 to the format string
/// @return     Number of characters printed if OK, or < 0 if error:
///             - #DEBUG_ERR_ENCODING
///             - #DEBUG_ERR_OVERFLOW
///             - #DEBUG_ERR_UART
int debug_printf(const char *format, ...)
{
    int num_chars_printed;

    va_list args;
    va_start(args, format);

    // Use `vsnprintf()` now here to format everything into a single string
    // buffer, then send out over the UART
    // - num_chars_printed could be set to one of the error codes listed above
    //   here

    va_end(args);

    return num_chars_printed;
} 
```

Doxygen 输出现在将错误返回类型显示为行下的子项目符号列表`Number of characters printed if OK, or < 0 if error:`，并且由于**前面****的字符，每个错误类型都转换为它们各自定义的 URL`#`**。

## Doxygen 参考资料：

1.  请参阅[@Jeremy Sarao 的回答](https://stackoverflow.com/a/43813533/4561887)，以及在我脑海中萦绕的部落知识。
2.  部落知识。我不知道如何或在哪里可以找到此信息。在 Doxygen 文档中。
    *   也许这有用？[http://www.doxygen.nl/manual/autolink.html](http://www.doxygen.nl/manual/autolink.html)
3.  **在此处查看 Doxygen 的所有特殊命令的列表：http: [//www.doxygen.nl/manual/commands.html](http://www.doxygen.nl/manual/commands.html)（例如：`\brief`或`@brief`、`\note`或`@note`、`\details`或`@details`、`\example`等）。**
4.  请注意，可能的`param`值为**`param[in]`**、**`param[in,out]`**和**`param[out]`**。有关更多详细信息和官方文档，请参阅这些参考资料：
    1.  [这是一个输入或输入/输出参数吗？氧，C++](https://stackoverflow.com/questions/47732665/is-that-an-in-or-in-out-parameter-doxygen-c/47856215#47856215)
    2.  `param`特殊命令的官方 Doxygen 文档：http: [//www.doxygen.nl/manual/commands.html#cmdparam](http://www.doxygen.nl/manual/commands.html#cmdparam)
5.  其他演示 Doxygen 用法的代码示例：
    1.  [STM32如何获得最后的复位状态](https://stackoverflow.com/questions/34196663/stm32-how-to-get-last-reset-status/54728664#54728664)
    2.  [C 代码中的错误处理](https://stackoverflow.com/questions/385975/error-handling-in-c-code/59221452#59221452)

## 其他参考：

1.  GCC 超级有用的 printf 格式属性的文档：
    1.  [https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html) - 见“格式”部分
    2.  [如何在用户定义的函数中使用格式化字符串？](https://stackoverflow.com/questions/54878841/how-to-use-formatting-strings-in-user-defined-functions/54916870#54916870)
    3.  [我应该如何在 C++ 的类方法中正确使用 __attribute__ ((format (printf, x, y)))？](https://stackoverflow.com/questions/11621043/how-should-i-properly-use-attribute-format-printf-x-y-inside-a-class/54191459#54191459)
2.  基本`printf`包装器实现：[https ://github.com/adafruit/ArduinoCore-samd/blob/master/cores/arduino/Print.cpp#L189](https://github.com/adafruit/ArduinoCore-samd/blob/master/cores/arduino/Print.cpp#L189)

## 其他 Doxygen 示例：

（从[我的 eRCaGuy_dotfiles 项目](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/blob/master/git%20%26%20Linux%20cmds%2C%20help%2C%20tips%20%26%20tricks%20-%20Gabriel.txt)复制而来）

完整的 Doxygen 函数头示例：

```
/// \brief          A brief one or two line description of the function.
/// \note           An important note the user should be aware of--perhaps many 
///                 lines.
/// \details        Extra details.
///                 Perhaps
///                 even
///                 a long
///                 paragraph.
/// \param[in]      var1            Description of variable one, an input
/// \param[in]      var2            Description of variable two, an input
/// \param[out]     var3            Description of variable three, an output 
///                     (usu. via a pointer to a variable)
/// \param[in,out]  var4            Description of variable four, an 
///                     input/output (usu. via a pointer) since its initial 
///                     value is read and used, but then it is also updated by 
///                     the function at some point
/// \return         Description of return types. It may be an enum, with these
///                 possible values:
///                 - #ENUM_VALUE_1
///                 - #ENUM_VALUE_2
///                 - #ENUM_VALUE_3
my_enum_t myFunc(int var1, int var2, int* var3, int* var4)
{
    // function implementation here

    my_enum_t error = ENUM_VALUE_1;

    // Check for NULL pointers
    if (!var3 || !var4)
    {
        // var3 or var4 are NULL pointers, which means they can't be
        // dereferenced
        error = ENUM_VALUE_2;
        goto done;
    }

    if (something_else)
    {
        error = ENUM_VALUE_3;
        goto done;
    }

done:
    return error;
} 
```

您也可以使用`@`代替`\`：

```
/// @brief          A brief one or two line description of the function.
/// @param[in]      var1            Description of variable one, an input
/// @param[in]      var2            Description of variable two, an input
/// @param[out]     var3            Description of variable three, an output 
///                     (usu. via a pointer to a variable)
/// @param[in,out]  var4            Description of variable four, an 
///                     input/output (usu. via a pointer) since its initial 
///                     value is read and used, but then it is also updated by 
///                     the function at some point
/// @return         None
void myFunc(int var1, int var2, int* var3, int* var4)
{
    // function implementation here
} 
```

这是这个较短的版本，现在`\`再次使用而不是`@`：

```
/// \brief          A brief one or two line description of the function.
/// \param[in]      var1            Description of variable one, an input
/// \param[in]      var2            Description of variable two, an input
/// \param[out]     var3            Description of variable three, an output (
///                     usu. via a pointer to a variable)
/// \param[in,out]  var4            Description of variable four, an 
///                     input/output (usu. via a pointer) since its initial 
///                     value is read and used, but then it is also updated by 
///                     the function at some point
/// \return         None
void myFunc(int var1, int var2, int* var3, int* var4)
{
    // function implementation here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T20:48:43.460

在要引用的参数前使用“#”符号：

```
#pfirst must have been previously passed through BarrelFiller() 
```

（[在 doxygen 手册中](http://www.doxygen.nl/manual/autolink.html#linkother)）

# android - 启动画布作为意图

> ID：15398712
> 
> 赞同：0
> 
> 时间：2013-03-13T23:51:27.780
> 
> 标签：android, android-intent, canvas, manifest

朋友们，我有一个使用 setContentView(myCanvas) 的活动“myGame”。现在，每当我的 MainActivity 作为意图启动 myGame 时，游戏就会崩溃。任何人都可以帮我解决这个问题吗？

我应该在我的 AndroidManifest 中添加 myGame 活动吗？

为了清楚地理解这是我的行动。

MainActivity > myGame > myCanvas（扩展视图）

游戏活动：

```
 package com.krazy.androidplay;

    class GameView extends Activity {

    protected void onCreate(Bundle savedInstance){
        super.onCreate(savedInstance);
        setContentView(new myCanvas(this));
    }

    } 
```

画布代码：

```
package com.krazy.androidplay;

public class myCanvas extends View {
Paint paint = new Paint();

public myCanvas(Context context) {
    super(context);            
}

@Override
public void onDraw(Canvas canvas) {
    paint.setColor(Color.BLACK);
    paint.setStrokeWidth(3);
    canvas.drawRect(30, 30, 80, 80, paint);
    paint.setStrokeWidth(0);
    paint.setColor(Color.CYAN);
    canvas.drawRect(33, 60, 77, 77, paint );
    paint.setColor(Color.YELLOW);
    canvas.drawRect(33, 33, 77, 60, paint );

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:58:52.807

在 GameView 类中使用公共访问标识符，以便它可以作为意图启动。

```
public class GameView extends Activity {
........
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:52:55.023

> 我应该在我的 AndroidManifest 中添加 myGame 活动吗？

是的你应该。这就是您的应用程序崩溃的原因。

# postgresql - 成为数据库超级用户 - Engineyard

> ID：15398714
> 
> 赞同：1
> 
> 时间：2013-03-13T23:51:35.213
> 
> 标签：postgresql, engineyard

我正在尝试将数据库扩展添加到我的一个应用程序中，特别是 blurstrmatch 扩展。每当我尝试添加它时，我都会收到以下错误

```
-- execute("CREATE EXTENSION fuzzystrmatch") rake aborted! An error has occurred, this and all later migrations canceled:

PGError: ERROR:  permission denied to create extension "fuzzystrmatch" HINT:  Must be superuser to create this extension. : CREATE EXTENSION fuzzystrmatch 
```

关于成为超级用户，我发现的唯一一件事是：

[https://blog.engineyard.com/2012/postgresql-9-1-is-now-in-beta](https://blog.engineyard.com/2012/postgresql-9-1-is-now-in-beta) `

我不知道该怎么做？我 ssh 到数据库然后必须 sudo 执行命令吗？我发现的一切都非常无益。感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:54:36.540

免责声明：我是Engine Yard 的DBA 之一。

在 Engine Yard 上，您的应用程序的 DB 用户帐户不是超级用户。但是，您确实可以访问超级用户帐户 - 只需使用“postgres”用户即可。显然，您只想将其用于管理任务，而不是在您的应用程序中！

也就是说，Engine Yard 已经提供了一种为 Postgres 启用此扩展和其他扩展的方法，如您链接的博客文章末尾所述。您可以使用厨师食谱自定义您的环境，我们在位于以下位置的自定义厨师存储库中提供启用 postgres 扩展的食谱： [https ://github.com/engineyard/ey-cloud-recipes/tree/master/cookbooks/postgresql9_extensions](https://github.com/engineyard/ey-cloud-recipes/tree/master/cookbooks/postgresql9_extensions)

如果您已经在您的环境中使用自定义厨师食谱，那么设置应该很简单 - 如果没有，我建议您从这里的文档开始：https: [//support.cloud.engineyard.com/entries/21009867-使用厨师食谱定制您的环境](https://support.cloud.engineyard.com/entries/21009867-Customize-Your-Environment-with-Chef-Recipes)

如果您遇到任何问题，请开票，我们很乐意为您提供帮助！

# single-sign-on - 移动平台的单点登录和联合登录有什么区别

> ID：15398717
> 
> 赞同：3
> 
> 时间：2013-03-13T23:51:54.343
> 
> 标签：single-sign-on, identity

我有一个关于 SSO 和 Federated SO 的问题。这两者有什么区别？

我们试图完成的是让用户能够使用他们的 Facebook、Twitter 或 Linked In 帐户登录，但我们也希望将其保存在我们的公司 ID 中，以便我们知道他们是谁。我们希望将他们的公司 ID 与他们喜欢的任何社交平台相关联。在公司内部，我们还希望他们使用相同的身份登录其他公司的数字资产，如网站和其他应用程序。公司内部有各种软件系统，用户需要对其进行身份验证才能获得访问权限。这听起来像 SSO 还是联合 SO？我们需要外部供应商吗？这些供应商的标准是什么？

我找到了一篇关于两者之间差异的文章，但坦率地说仍然不明白，因为使用的语言超出了我的知识水平。

[http://technotes.khitrenovich.com/difference-sso-single-sign-on-identity-federation/](http://technotes.khitrenovich.com/difference-sso-single-sign-on-identity-federation/)

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:52:26.390

“身份联合”是指接受未在您的系统中进行身份验证的用户的能力（例如，他们使用 Twitter、FB、其他人的 Active Directory 等）

SSO 是一种登录一次，然后无需再次输入凭据即可访问许多应用程序的能力。

您经常通过联合实现 SSO。但是没有它你也可以拥有 SSO。（例如，一个 Active Directory 域和该域中的多个应用程序：您只需登录一次）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:06:54.510

文章和@Eugenio 都拥有它的权利。

既然你想实现这个，让我做一些可能对你有帮助的实际观察：

*   您希望提供多种方式来验证共同身份。
    *   用户 ID 和密码进入您自己的目录 (Active Directory)
    *   Facebook、Twitter、LinkedIn、Google、Yahoo、Live、百度等社交登录。
    *   公司内部的另一个身份系统
    *   来自公司外部的另一个身份系统，例如合作伙伴或客户公司
*   许多人使用 Active Directory 作为身份存储。
*   您需要考虑在此目录中配置用户：
    *   对于员工来说，这通常是发生雇用/终止/晋升事件的时候
    *   对于外部用户，您可以在首次使用时使用即时 (JIT) 注册。
    *   所有社交登录都会返回一个电子邮件地址。您可以使用它来检查使用此电子邮件的用户是否已经存在。如果是这样，您可以询问他们是否愿意关联这些帐户。如果是这样，您可以要求对该帐户进行身份验证，例如密码或已与该帐户关联的另一个社交登录。这将防止用户在不希望的情况下意外创建新帐户。
    *   您将希望支持多种单点登录协议。
        *   内部应用程序可能能够使用集成 Windows 身份验证 (IWA) 和 Kerberos。
        *   对于非 Windows 应用程序，对 Web 应用程序使用 SAML 或 WS-Federation，对 API 使用 OAuth2，对社交应用程序使用 OpenID 或 OpenID Connect。这些都支持在身份验证期间和随后的属性。这是一种将有关用户的信息（例如姓名和电子邮件、角色和首选项）传递给您的应用程序的方法。
*   当您添加移动和云应用程序 (SaaS) 时，您将希望拥有一个基于您渴望的标准的架构。这将使您能够随着社交、移动和云的趋势而发展。

有很多方法可以实现这一点。

*   您可以使用开源自行开发，尽管这些是具有许多选项的复杂、复杂的技术，当然，您永远拥有进化和维护的所有权。
*   Microsoft 提供免费产品 ADFSv2。这比开源稍微好一点，但是您仍然需要针对每种情况进行配置，它不支持所有协议，并且支持来自 Microsoft。（有点像“免费小狗”中的“免费”。）
*   最后是堆栈供应商和第三方提供更完整的产品和服务。

*** 插头类型=无耻** **我的公司 Ping Identity 做到了这一切，轻松自如，比任何人都好，并且拥有世界上最好的客户服务。我们的实现通常需要几个小时，有时需要几天。我们将其作为产品和服务提供。这就是我们所做的一切，我们已经为 1,000 名大大小小的客户做了这 10 年。[请访问http://www.pingidentity.com](http://www.pingidentity.com)查看我们* ****/插头 ******

# django - 姜戈生日盒子

> ID：15398718
> 
> 赞同：0
> 
> 时间：2013-03-13T23:51:56.113
> 
> 标签：django

我怎么能在我的 django 表单中实现一个生日框。我一直在研究 Django AgeField，目前没有结果。我将它用于我的注册页面

例如，当您注册一个站点时。您必须输入您的生日以验证您的年龄是否足够大。我怎么能做一个年龄场？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:03:53.900

[PositiveSmallIntegerField](https://docs.djangoproject.com/en/1.5/ref/models/fields/#positivesmallintegerfield)与您从 Django 本身获得的结果差不多。正如@dmitri 所说，Django 中没有任何东西可以验证用户的年龄。您可以使用[SelectDateWidget](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#selectdatewidget)让某人轻松输入他们的生日，因为它提供了月份、日期和年份的选择输入。它还允许您指定年份范围，这将允许您设置最小出生年份。

# c#-4.0 - Windows 8 辅助动态磁贴未使用本地通知队列进行更新

> ID：15398724
> 
> 赞同：0
> 
> 时间：2013-03-13T23:52:50.203
> 
> 标签：c#-4.0, windows-8, tiles

我正在尝试在我的应用程序中实现两个以上的辅助实时磁贴。我遵循了这个[样本](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)使用应用栏上的 pin-to-start 按钮创建辅助磁贴。我正在使用存在的 NotificationExtensions 库更新辅助磁贴。现在，我面临一个问题，我正在尝试使用通知队列在本地更新我的每个活动图块，但更新的整个行为充其量是不稳定的。3 个图块中只有一个持续更新（没有成功更新的固定图块），其余的只更新一次然后停止。恐怕这与通知没有正确排队有关，但我不知道我哪里出错了。最初，我所有的辅助磁贴创建和它们各自的通知逻辑都在单独的代码隐藏中。我什至试图将它们合并到一个页面中，但它仍然给出相同的结果。

```
 ITileWideText04 tileContent = TileContentFactory.CreateTileWideText04();
            tileContent.TextBodyWrap.Text = "1 secondary tile from NotificationsExtensions!";

            ITileSquareText04 squareContent = TileContentFactory.CreateTileSquareText04();
            squareContent.TextBodyWrap.Text = "1secondary tile from NotificationExtensions!";
            tileContent.SquareContent = squareContent;

            ITileWideText04 tileContent2 = TileContentFactory.CreateTileWideText04();
            tileContent2.TextBodyWrap.Text = "2c secondary tile from NotificationsExtensions!";

            ITileSquareText04 squareContent2 = TileContentFactory.CreateTileSquareText04();
            squareContent2.TextBodyWrap.Text = "2 secondary tile from NotificationExtensions!";
            tileContent2.SquareContent = squareContent;

            var tile1 = tileContent.CreateNotification();
            tile1.Tag = "a";
            var tile2 = tileContent2.CreateNotification();
            tile2.Tag = "b"; 
```

然后像这样更新图块： TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).EnableNotificationQueue(true); TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).Update(tile1); TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).Update(tile2);

其余的次要瓷砖依此类推。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:30:47.620

嗯。可能发生的情况是，每次在您引用的这些代码行上，它都会为您获取一个新的更新程序，并且仅在第一个代码行上启用通知队列：

```
TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).EnableNotificationQueue(true); 
TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).Update(tile1);
TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile).Update(tile2); 
```

在您的底部代码片段中，您可以尝试这样的事情吗？

```
var updater = TileUpdateManager.CreateTileUpdaterForSecondaryTile(Constants.ProfileAppTile);
updater.EnableNotificationQueue(true); 
updater.Update(tile1); 
updater.Update(tile2); 
```

此外，这些文章包含可以正常工作的示例代码，带有辅助磁贴和动态磁贴，欢迎您从中借阅：
[真实世界辅助磁贴：在 Windows 8 应用程序中使用辅助磁贴的三大技巧](http://blogs.msdn.com/b/jennifer/archive/2012/11/19/real-world-secondary-tiles-top-three-tips-for-working-with-secondary-tiles-in-windows-8-apps.aspx)
[Real-World Live Tiles : 在 Windows 8 应用程序中使用动态磁贴](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)

# c# - 比较地址的两个字符串时，如何获得百分比准确度匹配？

> ID：15398730
> 
> 赞同：5
> 
> 时间：2013-03-13T23:53:10.960
> 
> 标签：c#, vb.net, string, match

我正在尝试比较两个姓名和地址列表以查看唯一数据。我可以轻松地提取出两个列表中完全相同的字符串，然后我得到的名称和地址不同，但可能是同一个人。IE：

列表中的条目 1 Smith J Ph234567 34 Smith st

列表中的条目 2 Smith John Ph234567 34 Smith st

或者

列表中的条目 1 Smith J Ph234567 34 Smith Rd

列表中的条目 2 Smith J Ph234567 34 Smith Road

我想为看起来相似的条目添加一个标签，比如 80% 匹配。

嵌套的 Foreach 循环不起作用，因为它们匹配每个单词或字母（取决于您如何在字符串中与其他单词或字母一起编写它。

For 循环不起作用，因为一次更改 J vrs John 会在更改后为每个条目创建错误。

我在 vb.net 中编写它，但也可以从 C# 翻译

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T23:55:53.240

这类问题一般通过计算字符串之间的[编辑距离来解决。](http://en.wikipedia.org/wiki/Edit_distance)例如，从 Levenshtein 距离开始。

这会给你一个分数（将一个字符串转换为另一个字符串所需的“编辑操作”的数量）。要将其转换为百分比标识，您需要通过较大字符串的长度（类似于 的行`percent = (largerString.Length - editDistance) / largerString.Length`）对其进行规范化。

# c++ - static_cast 派生类的接口

> ID：15398733
> 
> 赞同：2
> 
> 时间：2013-03-13T23:53:38.477
> 
> 标签：c++, static-cast

我正在尝试将接口对象静态转换为继承该接口的派生类的对象。我收到一个错误

> “static_cast”：无法从“IInherit *”转换为“cDerived *”

派生类和接口的格式如下。

```
class cDerived: public IInherit
{
    Repo* p_Repos;
public:
    cDerived(Repo* pRepos)
    {
        p_Repos = pRepos;
    }
    Repo* GetRepo()
    {
            return p_Repos;
    }
    void doAction(ITok*& pTc)
    {
       ///some logic
    }

}

class IInherit
{
public:
    virtual ~IInherit() {}
    virtual void doAction(ITok*& pTc)=0;
}; 
```

我有一个`vector<IInherit*>`可通过 getInherit() 方法在代码中访问的对象，因此 getInherit()[0] 的类型是 cDerived* 我正在使用表达式执行静态转换：

```
Repo* pRep= static_cast<cDerived*>(getInherit()[0])->GetRepo(); 
```

我不确定是否可以将 static_cast 作为接口对象。有没有其他方法可以让我表演这个演员？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T00:05:14.253

您可以`static_cast`在您的示例中使用。

但是你必须同时包含它的*定义*和它才能工作。编译器必须看到，它继承自. 否则，它无法确定确实有效。`IInherit``cDerived``cDerived``IInherit``static_cast`

```
#include <vector>

struct R {};
struct B {};
struct D : public B {
    R *getR() { return new R(); }
};

void f()
{
    std::vector<B*> v;
    v.push_back(new D());
    D *d = static_cast<D*>(v[0]);
    R *r = d->getR();
} 
```

# php - 以编程方式过滤 Magento 站点地图

> ID：15398735
> 
> 赞同：0
> 
> 时间：2013-03-13T23:53:40.227
> 
> 标签：php, magento

目前，我们的站点地图显示了我们拥有的每个产品和类别。我希望能够过滤这些结果以仅显示具有“目录/搜索”可见性的产品以及包含具有“目录/搜索”可见性的产品的类别任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:47:23.137

有点宽泛的问题——你最好开始项目，然后在出现具体问题时提出具体问题。

您要针对重写的方法在`sitemap/sitemap`模型中。

```
public function generateXml()
{
    //...
} 
```

这是加载站点地图数据并生成 XML 的方法。过滤生成的内容没有优雅的入口点，所以我采取的两种方法是

*   `parent::generateXml()`像往常一样调用以生成地图，然后重新加载文件 ( `$this->getPath()`) 并转换文档，以便不包含您不想要的项目，并将新文件写入旧文件。

*   复制现有代码`generateXML`，但在 Magento CE 1.7 中的第 155 行周围的类别循环中添加条件

前者更干净——后者更快。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:24:19.670

$collection = Mage::getResourceModel('sitemap/catalog_product')->getCollection($storeId);

在类 Mage_Sitemap_Model_Sitemap 的函数 public function generateXml() 中更改此行并应用过滤器。修改后的行是这样的：

$collection = Mage::getModel('catalog/product')->getCollection($storeId)->addAttributeToFilter('visibility', 4);

这是一个建议，尽管不建议使用 Magento 标准修改核心文件，因此使用上述建议您可以覆盖上述类并在新创建的类中修改函数 generateXml()

# xcode - xcode 编辑器中的 T 和 # 符号

> ID：15398740
> 
> 赞同：0
> 
> 时间：2013-03-13T23:54:21.980
> 
> 标签：xcode, autocomplete

Xcode 编辑器的 C++ 代码自动完成中的 T 符号是什么意思？这会在编辑器中输入“INT_STAT”时出现。在输入“INT_LEAST64_MIN”时，我还看到一个哈希符号 coe，并且想知道这也是什么意思。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:25:13.703

T 代表`typedef`，我想 # 代表`#define`。

# actionscript-3 - 最佳实践 OO

> ID：15398741
> 
> 赞同：0
> 
> 时间：2013-03-13T23:54:23.860
> 
> 标签：actionscript-3, oop, flex4

好的，让我们看看下面的场景：

我有两节课。时间表和事件。

一个时间表有许多事件。这很简单。

那么，对于获取所有事件，我应该将 getAllEvents 方法留在哪里？安排课程或活动课程？最佳实践？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:57:18.170

If you'd like to get all events for a given schedule, define a method called getAllEvents() in the Schedule object.

If you'd like to get all events - globally, across all schedules - I would encourage you to create an EventCollection object, and add all events to it - besides registering them in the respective Schedule.

# c - 我怎样才能抑制 readline 打印一些东西然后恢复它？

> ID：15398742
> 
> 赞同：4
> 
> 时间：2013-03-13T23:54:25.600
> 
> 标签：c, readline, ansi-escape

我正在尝试仅使用*readline*和 ANSI 转义码编写控制台聊天客户端。

我的目标是让终端处理聊天历史记录的回滚和滚动，同时始终在消息后提供*readline*提示以供新输入。

我已经用我的两个线程尝试了以下操作。我的控制台输入线程：

```
printf("\x1B[s"); // Save cursor position
message = readline("Prompt > "); 
```

我的消息接收线程会：

```
message = receive_message(); // Blocks for next message
printf("\x1B[u"); // Restore cursor to before the prompt
printf("\x1B[J"); // Erase readline prompt and input (down to bottom of screen)
printf("%s\n", message); // Print the message (where readline was)
printf("\x1B[s"); // Save new cursor position
rl_forced_update_display(); // Restore readline 
```

只要*readline*输入不换行，上述方法就可以工作。当它包装恢复保存的光标位置时，它不能按预期工作，它似乎只恢复水平位置，而不是垂直位置。

即使输入行换行，我如何调整上述代码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:41:17.647

[事实证明，这个问题](https://stackoverflow.com/questions/8032418/stop-readline-printf-then-resume-readline)包含了一个更好的解决方案。我已经从引用的解决方案中复制了与在此处回答此问题相关的代码：

```
message = receive_message();

// Solution
int need_hack = (rl_readline_state & RL_STATE_READCMD) > 0;

int saved_point = rl_point;
char *saved_line = rl_copy_text(0, rl_end);
rl_save_prompt();
rl_replace_line("", 0);
rl_redisplay();

printf(message);

rl_restore_prompt();
rl_replace_line(saved_line, 0);
rl_point = saved_point;
rl_redisplay();
free(saved_line); 
```

为了完整起见，输入线程被清除光标保存并变得简单：

```
message = readline("Prompt > "); 
```

我不知道在发布我的问题之前我怎么没看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:32:12.453

我受到了如何[在 C 中获取终端宽度以](https://stackoverflow.com/questions/1022957/getting-terminal-width-in-c)手动确定我是否已包装的启发。

当我需要在*readline*提示之前打印一些东西时，我现在执行以下操作：

```
message = receive_message(); // Blocks for next message

/* Solution */
struct winsize w;
ioctl(STDOUT_FILENO, TIOCGWINSZ, &w); // Get terminal dimensions
printf("\r"); // Move cursor to the begining of the line
// Calculate the length of the prompt and cursor position
int readline_length = rl_point + strlen(rl_prompt);
// Integer divide cursor position by the terminal width
int wrapped_lines = readline_length/w.ws_col;
// If there are wraped lines
if (wrapped_lines > 0)
    // move the cursor up by that number of lines
    printf("\x1B[%dA", wrapped_lines);
printf("\r"); // Move cursor to the beginning of the line
printf("\x1B[J"); // Erase readline prompt and input (down to bottom of screen)

printf("%s\n", message); // Print the message (where readline was)
rl_forced_update_display(); // Restore readline 
```

为了完整起见，输入线程被清除光标保存并变得简单：

```
message = readline("Prompt > "); 
```

# wordpress - Wordpress 查询所需的最少代码

> ID：15398744
> 
> 赞同：1
> 
> 时间：2013-03-13T23:54:36.833
> 
> 标签：wordpress

我想知道是否有人知道使用最少代码进行 Wordpress 查询的最佳处理方式。例如：

我只想要一个空白的白页，它运行我创建的自定义 SELECT 查询，返回有多少帖子满足特定条件。我使用带有自定义参数的 WP_Query 来获取我的结果，在我的情况下，我不需要循环，只需要在空白屏幕上显示的结果数（用于我的演示目的）。

```
$my_query = new WP_Query($args);
$num = $my_query->post_count;
echo "# of posts is " . $num; 
```

我假设我需要在我的主题和 Wordpress 安装中访问 functions.php。而且我知道我可以调用 get_header() 来设置我的数据库连接，但也会渲染我不想要的部分和内容。

基本上只需打开数据库连接，运行 WP_Query 并回显帖子计数。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T00:08:18.943

您的测试页面是否在您的主题中（例如自定义页面模板）？如果是：此代码对我有用：

```
$my_query = new WP_Query('posts_per_page=-1&post_type=post');
echo $count = $my_query->post_count; 
```

“post_type”参数是必需的，“posts_per_page=-1”来处理所有结果

# javascript - 如何从鼠标悬停图像单击开始 youtube 视频？

> ID：15398745
> 
> 赞同：0
> 
> 时间：2013-03-13T23:54:37.263
> 
> 标签：javascript, html

我正在网站上工作，遇到了 JavaScript，需要帮助。

我有一个 Youtube 视频和两张图片。当我们显示站点时显示一个图像，然后在鼠标悬停后显示第二个图像。但这第二张图片也应该是视频的链接。一件主要的事情是我想将视频保留在同一页面中（没有弹出窗口）。图像的大小也很小，但应该调整视频的大小。

到目前为止，我知道如何进行鼠标悬停，但不知道如何使视频在同一页面中工作。谢谢

我的鼠标悬停代码---

```
<img src="1.png" onmouseover="this.src='2.png'" onmouseout="this.src='1.png'"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:57:55.790

Take a look at this answer: [start/play embedded (iframe) youtube-video on click of an image](https://stackoverflow.com/questions/6246939/start-play-embedded-iframe-youtube-video-on-click-of-an-image)

You can put your Youtube video inside of an iFrame and do the same thing except instead of a click() you'll be using mouseover/mouseout as you are.

# php - 根据变量值更改html选择中的选定选项

> ID：15398753
> 
> 赞同：0
> 
> 时间：2013-03-13T23:54:55.187
> 
> 标签：php, html, select, selected

我的代码就像

```
 echo("<td>$row[Status]</td>");
    echo("<td>
    <select name=\"choose\" id=\"Choose\" onChange=\"\">
    <option value=\"Unverified\">Unverified</option>
    <option value=\"Approved\">Approve</option>
    <option value=\"Decline\">Decline</option>
    <option value=\"Pending\">Pending</option>                   
    </select>
    </td>"); 
```

如果 ($row[Status] == Approved) 然后代码应该像这样更改，这就是我想要做的

```
.
.
<option value=\"Approved\" Selected>Approve</option>
.
. 
```

最简单的方法是为所有人创建一个简单的 if 条件，但必须有更聪明的方法来做到这一点。有任何想法吗？

我宁愿将它保存在 php 本身中。如果您要使用更复杂的符号，例如 a => b 请解释为什么使用它以及它的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:56:46.747

创建一个可能值的数组，然后在循环中创建选项。这样，您只需编写一个 if 条件，将当前值与所需（此处为已批准）值匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:22:44.083

试试这个！它将遍历整个数组，并在到达时选择选定的选项。这是你要找的吗？

（*尚未测试*）

```
echo ("<select name=\"choose\" id=\"Choose\" onChange=\"\">");

$sel["Unverified"] = "Unverified";
$sel["Approved"] = "Approve";
$sel["Decline"] = "Decline";
$sel["Pending"] = "Pending";

$selected = "Approved";

foreach($sel as $key => $value) {
    if ($selected == $key) {
        echo ("<option value=\"$key\">$value</option>");
    }
    else {
        echo ("<option value=\"$key\" selected>$value</option>");
    }
}

echo ("</select>");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:23:30.053

```
 echo("<td>$row[Status]</td>");
    $search= "$row[Status]\"";
    $replace= "$row[status]\" Selected";
    $subject="<td>
    <select name=\"choose\" id=\"Reason\" onChange=\"\">
         <option value=\"Unverified\">Unverified</option>
         <option value=\"Approved\">Approve</option>
         <option value=\"Decline\">Decline</option>
         <option value=\"Pending\">Pending</option>                     
         </select>
         </td>";
$subject=str_replace($search, $replace, $subject);
echo $subject; 
```

I used the above and got my desired result... wasted an hour not knowing that str_replace would return the edited value and not replace $subject. Thanks everyone.

# css - 3个具有百分比宽度的div

> ID：15398754
> 
> 赞同：4
> 
> 时间：2013-03-13T23:54:58.467
> 
> 标签：css, html

可以说，我有宽度为 65% 的 div，在该 div 内我需要再创建 3 个 div，它们在同一行，相同大小但大小应该以 % 为单位，并且侧 div 和中心 div 之间应该有 10px 的间隙。有什么建议么？

到目前为止，我有以下代码：

```
 <div style="width: 65%; margin: 0 auto; text-align:left; margin-bottom: 10px;">
<div style="float:left; margin-right: 10px;">1</div>
<div style="float:left; margin-right: 10px;">2</div>
<div style="float:left;">3</div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T00:17:50.073

这是更多的 HTML，但对我来说效果很好。

**HTML**

```
<div id="hold">
    <div class="innerHold"><div class="inner col1">
        Column won
    </div></div>
    <div class="innerHold"><div class="inner col2">
        Col Two
    </div></div>
    <div class="innerHold"><div class="inner col3">
        Col 3
    </div></div>
    <div class="clear"></div>
</div> 
```

**CSS**

```
#hold{
    width: 65%;
    margin: 0px auto;
}
.innerHold{
    float: left;
    width:33.33333%;
    /* make sure left/right margins or left/right padding are 0px here
            - it'll mess with the width otherwise*/
    margin-left:0px;
    margin-right:0px;
    padding-left:0px;
    padding-right:0px;
}
.inner{
    /* Here set your columns padding, borders, and margin 
            - or in the class names as I do below */
    margin:0px;
}
.col1, .col2{
    margin-right:10px;
}
.clear{
    clear:both;
} 
```

[http://jsfiddle.net/daCrosby/NR2kX/1/](http://jsfiddle.net/daCrosby/NR2kX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:09:21.330

这是我能想到的最接近的解决方案：[jsfiddle](http://jsfiddle.net/seE2F/1/)

HTML：

```
<div id="container">
  <div class="small">lorem ipsum dolor sit amet</div>
  <div class="small">lorem ipsum dolor sit amet</div>
  <div class="small">lorem ipsum dolor sit amet</div>
</div> 
```

CSS：

```
* {
  -webkit-box-sizing:border-box;
  -moz-box-sizing:border-box;
  -o-box-sizing:border-box;
  -ms-box-sizing:border-box;
  box-sizing:border-box;
}

#container {
  margin: 0 auto;
  width: 65%;
  height: 300px;
}

.small {
  float: left;
  width: 33.3%;
  padding-right: 10px;
  height: 100%;
}

.small:last-child {
  padding: 0;
} 
```

我用过

```
box-sizing: border-box 
```

在以百分比声明的宽度中包含填充。我还使用`:last-child`选择器从最后一个元素中删除填充。确保检查浏览器支持[`box-sizing`](http://caniuse.com/#feat=css3-boxsizing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:14:34.040

这将意味着您引用的 33% 宽度将包括所有填充等，并且无需更改宽度，因为边框框占了这一点....这里还有一些浏览器兼容性选项！

```
 box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */ 
```

[这是关于盒子尺寸的有用链接！](http://css-tricks.com/box-sizing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:03:05.000

如果我没看错，您希望 3 个 div 占其父 div 的 33%。33.3% x 3 = 100%（足够接近），但如果你想要填充，你必须减少 div 的百分比。例如，将 3 个 div 设置为 30% (30% x 3 = 90%) 允许您拥有 10% 的 le-way，因此您可以每个 div 拥有 3.33% 的填充，或者您想要分配它:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T00:11:49.943

这样做是这样的：

```
 <div style="width: 65%; margin: 0 auto; text-align:left; margin-bottom: 10px;">
<div style="float:left; width: 30%; background-color: #FFFFFF;">1</div>
<div style="float:left; width: 5%;">.</div>
<div style="float:left; width: 30%; background-color: #FFFFFF;">2</div>
<div style="float:left; width: 5%;">.</div>
<div style="float:left; width: 30%; background-color: #FFFFFF;">3</div>
</div> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-14T00:25:41.380

试试这不是完美的，但也许这有帮助

html

```
 <div class="wrapper">
    <div class="box">1</div>
    <div class="box">2</div>
    <div class="box noMarginRight">3</div>
</div> 
```

css

```
 .wrapper {
    float:left;
    width:65%;
    background-color:#555;
}
.box {
    float:left;
    width:31.4%;
    background-color:#000;
    margin:0 10px 0 0;
}
.noMarginRight {margin-right:0 !important} 
```

工作[**演示**](http://jsfiddle.net/seE2F/3/)

# php - 实现电子邮件解析器以从附件中抓取信息的最简单方法

> ID：15398757
> 
> 赞同：1
> 
> 时间：2013-03-13T23:55:15.210
> 
> 标签：php, email-parsing

我从附加 xml 文档的特定电子邮件地址收到电子邮件到我的网站地址。访问附件的最简单方法是什么，以便每当我收到来自该特定来源的电子邮件时，我就可以从 xml 文件中抓取数据？

一旦我打开附件，我就可以抓取我需要的任何信息并更新我的数据库，我只是不确定如何访问电子邮件和打开附件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:58:17.857

如果您使用 IMAP，您可以使用 PHP 的内置 imap 函数。这样，您就可以访问电子邮件的内容。

检查此站点以获取教程[http://davidwalsh.name/gmail-php-imap](http://davidwalsh.name/gmail-php-imap) （它适用于任何 IMAP 帐户，而不仅仅是 Gmail）。

这将帮助您加快速度。然后，当您了解基础知识后，请按照[本教程](http://www.electrictoolbox.com/php-imap-message-body-attachments/)了解如何通过 PHP 访问附件。

# xml - 使用 IBM Processor for XSLT 2.0 时遇到 XML 验证/命名空间问题

> ID：15398758
> 
> 赞同：1
> 
> 时间：2013-03-13T23:55:22.213
> 
> 标签：xml, xslt, xslt-2.0

我从第三方供应商处收到以下 XML 消息。我无法控制传入的消息。我已将其缩减为最简单的形式，同时仍会产生错误。XML 消息：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Header/>
    <soap:Body/>
</soap:Envelope> 
```

我正在使用的 xsl 文件是：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import-schema
        namespace="http://schemas.xmlsoap.org/soap/envelope/"
        schema-location="http://schemas.xmlsoap.org/soap/envelope/" />

    <xsl:template match="/">
        <xsl:text>Help</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

当我尝试使用用于 XSLT 2.0 的 IBM 处理器并选中“启用验证”框在 Eclipse 中运行转换时，在 xml 验证期间出现以下错误：

```
cvc-elt.1.a: Cannot find the declaration of element 'soap:Envelope' 
```

即使我无法控制传入的消息，是否有任何方法可以进行此通过验证？如果我确实可以控制传入的消息，我会这样做，它会很好地工作：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://schemas.xmlsoap.org/soap/envelope/
                            http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Header/>
    <soap:Body/>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:12:11.383

I don't know the details of the IBM XSLT 2.0 processor, but it seems clear from the symptoms that the validation phase on the source document doesn't have access to the schema declared using xsl:import-schema in the stylesheet; you will have to look in the documentation for some other way of telling the validation process where to find a suitable schema.

# vba - 如何在 VBA 中使用缩写月份格式化日期？

> ID：15398759
> 
> 赞同：-4
> 
> 时间：2013-03-13T23:55:30.593
> 
> 标签：vba, date

我正在使用的代码是：

```
Format(now(), "MMMM dd, yyyy") 
```

此代码返回如下内容：

> 2013 年 3 月 10 日

如何修改日期格式代码以输出缩写月份，如下所示？

> 2013 年 3 月 10 日

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T23:58:46.513

Use this:

```
Format(Now, "MMMM dd, yyyy") 
```

More: [Format Function](http://msdn.microsoft.com/en-us/library/office/gg251755.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T23:59:19.837

I'm using

```
Sheet1.Range("E2", "E3000").NumberFormat = "dd/mm/yyyy hh:mm:ss" 
```

to format a column

So I guess

```
Sheet1.Range("E2", "E3000").NumberFormat = "MMM dd yyyy" 
```

would do the trick for you.

More: [NumberFormat function](https://msdn.microsoft.com/en-us/library/office/ff196401.aspx).

# intellij-idea - IntelliJ，禁用泛型上的自动关闭尖括号

> ID：15398771
> 
> 赞同：1
> 
> 时间：2013-03-13T23:57:09.743
> 
> 标签：intellij-idea

在 IntelliJ 中，如果我输入以下内容：

```
ArrayList<MyType>( 
```

我明白了：

```
ArrayList<MyType>(>( 
```

因为 IntelliJ 太聪明了，会自动放入右尖括号和左圆括号。我发现输入我在想的东西比向右箭头更容易，标签任何东西都可以通过它。

它每次都抓住我，我很想能够关闭它，但找不到选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:28:22.813

它在 IntelliJ 11.5 中被破坏，在 12.0+ 中修复。

# asp.net - 网站错误 - 需要代理身份验证

> ID：15398775
> 
> 赞同：0
> 
> 时间：2013-03-13T23:57:21.840
> 
> 标签：asp.net

所以我正在尝试建立一个需要 Windows 身份验证的内部网站 - 以便将这些凭据用于代理服务器。

该代码正在调用传递代理服务器设置的 Rally API：

```
var webProxy = new WebProxy(WebConfigurationManager.AppSettings["WebProxyUrl"], Convert.ToInt32(WebConfigurationManager.AppSettings["WebProxyPort"])) { UseDefaultCredentials = true };

var restApi = new RallyRestApi(username, password, webServiceUrl, webServiceVersion, webProxy); 
```

将其部署到服务器后，我收到错误消息：

**远程服务器返回错误：(407) 需要代理身份验证。**

如果我将应用程序池更改为使用我的个人帐户，则该站点可以正常工作。但是我不希望我的帐户与之绑定。

它似乎并没有提示我使用我的 Windows 凭据登录，所以我想知道我是否已经把它填满了。我的 web.config 包含：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="RallyWebserviceUrl" value="https://rally1.rallydev.com" />
    <add key="RallyWebserviceVersion" value="1.39" />
    <add key="RallyUsername" value="REMOVED" />
    <add key="RallyPassword" value="REMOVED" />
    <add key="RallyPageSize" value="50" />
    <add key="WebProxyUrl" value="REMOVED" />
    <add key="WebProxyPort" value="8080" />
    <add key="BacklogRallyProject" value="REMOVED" />
    <add key="CurrentWorkRallyProject" value="REMOVED" />
  </appSettings>

  <system.web>
    <authentication mode="Windows"/>
    <pages>
      <namespaces>
        <add namespace="System.Web.Routing"/>
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/"/>
      </providers>
    </roleManager>
    <!--
            If you are deploying to a cloud environment that has multiple web server instances,
            you should change session state mode from "InProc" to "Custom". In addition,
            change the connection string named "DefaultConnection" to connect to an instance
            of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection"/>
      </providers>
    </sessionState>
    <compilation debug="true"/>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

</configuration> 
```

编辑-我还尝试按照此处的大多数步骤为该站点设置 Windows 身份验证： [http ://usa.autodesk.com/adsk/servlet/ps/dl/item?siteID=123112&id=15739768&linkID=9261340](http://usa.autodesk.com/adsk/servlet/ps/dl/item?siteID=123112&id=15739768&linkID=9261340)

dos 提示命令对我不起作用。然而，这些更改现在迫使我输入我的详细信息以进行身份​​验证 - 但尽管我正确输入了我的用户名和密码，但仍然失败（我也让其他人尝试过，但他们也失败了）。我认为也可能发生跨域问题。因为我无法使用我的用户名登录，但如果我在旧域上使用用户名（因为机器是旧域的一部分），那么该登录工作 - 但所有用户帐户都在新域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:57:02.443

所以事实证明服务器所在的域与第二个域不信任 - 所以无法验证用户。

第一个域用户是无权访问代理的系统帐户（因为它们被应用程序使用） - 结果表明服务器可以访问外部站点而无需通过代理。所以我更新了代码以不调用代理，重新启用匿名身份验证，网站开始工作。

这是一个有趣的练习——因为您需要在 IIS7 中做一些事情来设置 Windows 身份验证。我认为这是更新配置以使用 Windows 身份验证的问题，但由于该站点使用匿名身份验证，因此被忽略了。

学到了很多东西：）

# .net - .NET Micro Framework 解析双精度

> ID：15398783
> 
> 赞同：1
> 
> 时间：2013-03-13T23:58:14.637
> 
> 标签：.net, .net-micro-framework

我一直试图弄清楚如何以与普通 .NET 框架相同的精度解析[.NET Micro Framework (.NETMF) 中的双精度。](http://en.wikipedia.org/wiki/.NET_Micro_Framework)

当我在经典的 .NET 框架中执行此操作时：

```
Debug.Print(Double.Parse("4213238").ToString()); 
```

我得到预期的输出，4213238。

但是当我在 .NETMF 中做同样的事情时，我得到了非精确的输出 4213238.0000000009。在两个 .NET 框架实现中，double 的大小都是 8 个字节。我需要做什么才能使 .NETMF Double.Parse 以与普通 .NET 框架 Double.Parse 相同的方式工作？

有没有比为此编写解析器方法更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:37:22.890

> 我得到不精确的输出 4213238.0000000009

不，这很精确。Double 可以存储 15 位有效数字。数一数，你都得到了。其余的只是随机噪声数字，其值受浮点硬件实现的影响。您的 MF 目标具有不同的硬件。如果不选择另一种类型，就没有可用的魔法来获得更多，只是显示更少的数字没有魔法。Int 或 long 当然是一个很好的选择，它们非常精确。

# mongoose - 从库中创建新类

> ID：15398787
> 
> 赞同：2
> 
> 时间：2013-03-13T23:58:30.653
> 
> 标签：mongoose, typescript

我不知道如何正确描述这一点，所以让我举个例子。我有一个库，它返回一个用作构造函数的函数：

```
var userTemplate = lib.User;
var user = new userTemplate(); 
```

我想将其强烈键入`userTemplate`为一个类，因为我知道它将具有哪些属性。我还希望能够在应用程序的其他部分做一些事情，比如`var user = new userTemplate()`让`user`对象成为某种已知类型。

我觉得我需要在这里使用环境类声明，但我不确定如何将环境声明分配给实际构建器的引用？

例如，我想要这样的东西：

```
export class Storage{
    init(){

        // somehow define that when you 
        // new a User to call this function

        User = lib.User; 
     }
}

declare class User{
   public name:string;
} 
```

基本上我想以某种方式定义声明实际用户的代码在哪里。根据我对环境声明的了解，它们在“其他地方”被指定。我无法弄清楚这个“其他地方”实际上在哪里。我检查了一个[打字稿示例](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/imageboard/db.ts)，但我没有看到 mongodb 环境声明是如何映射到实际实现的。

我觉得我在这里错过了一块拼图。

## 编辑（带有细节）

让我在这里具体说一下：

我正在尝试使用强类型猫鼬。想象一下我有一个 Schema 类：

```
export class Schema{
    public UserData:User;

    constructor(){
        var mongoose:IMongooseBase = require("mongoose");
        var mongooseSchema = <MongooseSchema>mongoose.Schema;

        var user = new mongooseSchema({
            name: String
        });

        this.UserData = mongoose.model("User", user);
    }
}

export declare class User extends MongooseBase{
    constructor(item:any);
    public _id: string;
    public name: string;
}

declare class MongooseBase {
    findOne(item:any, callback:ICallback) : void;
    find(id:string, callback?:ICallback) : IChainable;
    save(item: IEmptyCallback) : void;
    remove(item:any, callback:IErrorCallback) : void;
    push(item:MongooseBase):void;
}

interface IMongooseSchema{
    ObjectId:String;
}

declare class MongooseSchema implements IMongooseSchema{
    constructor(item:any);
    public ObjectId:String;
}
interface IMongooseBase{
    model(name:String, ref:any):any;
    Schema():any;
} 
```

Mongoose 的模型函数为我提供了一个用作构造函数的函数。使用此对象创建任何新模型类型都将具有定义的属性`MongooseBase`（例如 find、findOne 等）。我还希望该用户将用户属性定义为环境类`User`（名称）中定义的架构的一部分。

因此，例如，在 javascript 中这类似于

```
var userProxy = mongoose.Schema("User", user);

var userData = new userProxy(); 
```

用户对象包含从猫鼬给你的任何东西（我已经映射到`MongooseBase`定义）继承的属性。它还为您提供了作为初始模式创建的一部分传入的属性（当我定义时`user`）。

我希望能够强类型这个代理，像这样

```
var user:UserData = new schema.UserData(); 
```

如果我这样做，打字稿编译器会崩溃并出现以下异常，这让我相信我正在做一些非常古怪且可能不正确的事情：

```
\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:24488
                throw err;
                      ^
TypeError: Cannot read property 'construct' of null
    at TypeFlow.typeCheckNew (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:20675:27)
    at CallExpression.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:1275:33)
    at TypeFlow.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:18505:28)
    at TypeChecker.typeCheckWithContextualType (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:15909:27)
    at TypeFlow.typeCheckBoundDecl (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:18647:38)
    at VarDecl.BoundDecl.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:1631:29)
    at ASTList.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:1016:55)
    at TypeFlow.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:18505:28)
    at TypeFlow.typeCheckFunction (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:19815:22)
    at FuncDecl.typeCheck (\AppData\Roaming\npm\node_modules\typescript\bin\tsc.js:1783:29) 
```

## 编辑 2

因此，我设置它的方式在 webstorm 中没有出现任何错误，并且为其他文件生成的代码确实可以正常工作（它与我自己编写的 javascript 匹配），但是 typescript 编译器崩溃并且不会更新了我使用参考的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:20:59.517

看起来您想在其中声明您的库和构造函数（建模为下面的类）。这是你想要的？

```
declare module lib {
  export class User {
    name: string;
    age: number;
    getChildren(): User[];
  }
}

var userTemplate = lib.User;
var user = new userTemplate();
user.name = "dave"; 
```

通常，您对库的声明将位于您引用的 .d.ts 文件中。

让我知道我是否正确理解了您的问题。

## 在进一步信息后编辑

好的。我对猫鼬不熟悉，但让我看看我在这里是否理解正确（在快速浏览[http://mongoosejs.com/docs/index.html](http://mongoosejs.com/docs/index.html)之后）

*   您有一个由属性包定义的模式，其中键是名称，值是类型，即 { name: String, age: Number}。
*   您将它传递给 mongoose.Schema，它会返回一个新文档“模式”。
*   您将其传递给 mongoose.model（连同名称）并取回与此模式匹配的新“文档”的构造函数
*   然后，您可以通过所概述模式的构造函数“新建”文档。
*   返回的对象还具有常见的 mongoose 文档方法，例如用于数据存储操作的“保存”和“查找”。

这很有趣，因为 Schema 归结为结构类型大纲，类似于 TypeScript 中的接口，以几乎类似于 JSON 的语法指定，传递原始构造函数来指定类型（数字、字符串、日期等）。但是，由于 TypeScript 类型是在发出的 JavaScript 中不存在的纯注释，因此您不能重用它们（并且它们具有不同的类型，例如 ObjectID）。

一旦我们在语言中获得了泛型，我们就会有更聪明的方法来做到这一点，并通过查找、保存等来处理文档类型，但下面是我目前能想到的最简单的输入方法。这更符合你的追求吗？

```
// Let's type it as any for now
declare var mongoose: any;

// Base interface that any 'document' will have
interface mongooseBase {
    find: (callback: { (err: any, items: any[]): void; }) => void;
    save: (hanlder: { (err: any): void; }) => void;
}

// This is the structure our 'person' document will have
interface person extends mongooseBase {
    name: string;
    age: number;
    children: { name: string; dependent: bool; }[];
};

// Need to provide the same structure in 'mongoose' style format to define.
var personSchema = mongoose.Schema({ name: String, age: Number, children: [{ name: String, dependent: Boolean }] });

// Get back a constructor function.  We assert that the type returned is a 'newable' Function (a constructor), and will return a 'person' type when called
var Person = <{ new (): person; }>mongoose.model('Person', personSchema);

// Let's create one
var p1 = new Person();

// Let's set a property
p1.name = "Dave";

// Let's save Dave
p1.save(function (err) { /*TODO*/ }); 
```

# internet-explorer - web app displaying blank screen in IE 7 - 9

> ID：15398788
> 
> 赞同：0
> 
> 时间：2013-03-13T23:58:32.490
> 
> 标签：internet-explorer, internet-explorer-9, requirejs

I'm working on a web app located at [http://app.voxtracker.com/](http://app.voxtracker.com/)

The issue I'm facing is I get a blank white screen in IE 7-9 with no error message in my console.

I'm using requirejs and loading my javascript dependencies within my tag. Any strategies for debugging IE nonsense?

I can also see from the IE9 console that after the initial get request for "/", no other assets are being loaded.

Here's my HTML output:

```
 <!DOCTYPE html>
<!--[if IE 8]><html lang="en" class="ie8"><![endif]-->
<!--[if IE 9]><html lang="en" class="ie9"><![endif]--><!--[if !IE]><!-->

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Vox Tracker | Vox Supply Chain</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/css?1363218849714" rel="stylesheet" type="text/css">
    <link href="/assets/img/favicon-vox.ico" rel="shortcut icon">
</head>

<body class="login">
    <div id="loading_indicator" style=
    "margin-top:-125px; position:absolute; top:50%; text-align:center; width:100%">
    <img src="/assets/img/loading_2.gif">

        <h2 id="status" style="font-style:italic">Loading...</h2>
    </div><script data-main="/source/client" src="/source/lib/require.js" type=
    "text/javascript"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:24:58.330

弄清楚了。我正在使用 nodejs 模块“html-minifier”来缩小我的 html 输出，它与页面顶部的 IE 注释块混淆了。

# javascript - 更改图像 src 添加到资源

> ID：15398791
> 
> 赞同：0
> 
> 时间：2013-03-13T23:58:46.810
> 
> 标签：javascript, jquery, html, coffeescript

我有两张图片 - 一张用作默认状态，另一张用作悬停状态。我像这样交换它们：

```
$('.close-project').hover (e) ->
  $(@).children().attr 'src', 'images/close-button-hover2.jpg'
, (e) ->
  $(@).children().attr 'src', 'images/close-button2.jpg' 
```

似乎每次我悬停时，都会有一个 GET 请求到服务器，并且这个图像的另一个副本到资源（根据 Chrome 的开发工具）。有没有办法防止这种情况发生？

提前感谢您查看这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:59:06.160

无需更改**img**源地址，而是创建两个图像元素，一个用于默认图像，一个用于隐藏图像，并且只需在悬停事件触发时切换哪个可见。

HTML：

```
<a href="#">
    <img id="default" alt="" src="default.jpg"/>
    <img id="hidden" style="display:none" alt="" src="hidden.jpg"/>
</a> 
```

和javascript：

```
$(function () {
    $('a').hover(function () {
        $('#default').hide();
        $('#hidden').show();
    }, function () {
        $('#default').show();
        $('#hidden').hide();
    });
}); 
```

[这是一个工作 jsfiddle](http://jsfiddle.net/82PCA/)。

顺便说一句，你也可以只使用**css**来做，[检查这个 jsfiddle](http://jsfiddle.net/4TPL2/)。

# php - 获取下周日之后的周六日期

> ID：15398796
> 
> 赞同：0
> 
> 时间：2013-03-13T23:59:13.137
> 
> 标签：php, date

我有以下代码，除了 $the_saturday_after_next_sunday 之外一切正常。它没有输出正确的日期。你能帮我正确显示日期吗？

谢谢您的帮助。

```
<?php
$today = date('m/d/Y');
$next_sunday = date('m/d/Y', strtotime("next Sunday"));
$the_saturday_after_next_sunday = date('m/d/Y', strtotime("next Saturday", $next_sunday));

echo "today is: " . $today . "<br>";
echo "next sunday is: " . $next_sunday . "<br>";
echo "the saturday after next sunday is: " . $the_saturday_after_next_sunday . "<br>";
?> 
```

我也试过

```
$the_saturday_after_next_sunday = strtotime("next Saturday", $next_sunday); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:12:05.730

```
$sunday   = strtotime("next Sunday");
$saturday = $sunday + 60 * 60 * 24 * 6;
echo date('m/d/Y', $saturday); 
```

这从 PHP 4.4 开始有效，请参阅[http://3v4l.org/SUnaR](http://3v4l.org/SUnaR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:13:57.847

试试这个：

```
strtotime("next Saturday", strtotime($next_sunday)) 
```

代替：

```
strtotime("next Saturday", $next_sunday) 
```

# wordpress - Wordpress + 多合一活动日历

> ID：15398797
> 
> 赞同：0
> 
> 时间：2013-03-13T23:59:13.510
> 
> 标签：wordpress

我安装了 wordpress，并且正在使用多合一的活动日历。我需要的是在查看事件时，我希望模板充满。但现在它显示了一些其他模板，比如有一个侧边栏，即使我只在主页上显示它。这是一个例子 - [http://veebimeedia.ee/seeder/ai1ec_event/event/?instance_id=13](http://veebimeedia.ee/seeder/ai1ec_event/event/?instance_id=13)

我需要以全宽模板显示的事件。我读过这个插件使用默认的帖子模板，但是我可以在哪里改变呢？我的主题中没有 single.php。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:09:37.040

在第 545 行附近的 CSS 中，您已设置：

```
#content { float: left; width: 595px; margin: 0; min-height: 180px; } 
```

#content 下的所有元素宽度不会超过 595px 宽度。

我会将页面的模板设置为没有侧边栏。或者在删除侧边栏的地方创建一个新模板，然后让它说出其他内容然后#content。（例如#content-full），然后设置CSS。

```
#content-full { float: left; width: 100%; margin: 0; min-height: 180px; } 
```

但仍然很难说这个主题是如何建立起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:02:54.213

通常，您在页面而不是帖子上设置全宽模板。大多数主题都有一个没有侧边栏的模板。如果不是，您可以通过复制 page.php 文件来创建一个，给它一个新名称和一个模板名称，然后删除侧边栏调用。

# .net - 我是否必须在 Azure 服务器上才能充分利用 Intuit 合作伙伴平台？

> ID：15398804
> 
> 赞同：0
> 
> 时间：2013-03-14T00:00:14.267
> 
> 标签：.net, sdk, quickbooks, intuit-partner-platform

我是一家小型软件开发公司的实习分析师。对以下问题的回答将帮助我收集对我们 Web 服务的需求：

我们将使用 Amazons 服务器来部署 Web 服务，并且我们想将 quickbooks 与该服务集成，我是否必须在 Azure 服务器上才能充分利用 Intuit 合作伙伴平台来使用 .NET 接口？

经过一番研究，Quickbooks SDK 似乎要过时了……这有什么道理吗？

每个人都倾向于 Frontrunner 和 IPP 吗？

我希望这些问题是准确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:26:10.340

> 我是否必须在 Azure 服务器上充分利用 Intuit 合作伙伴平台才能使用 .NET 接口？

不，绝对不是。

IPP 是一个基于 REST XML（很快也会有 JSON）的接口。它不依赖于任何编程语言或平台。您可以从任何服务器使用 .NET 访问它，也可以使用任何其他编程语言访问它（也有其他语言的库：[PHP QuickBooks DevKit](http://consolibyte.com/quickbooks-open-source/)、[Java](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/0200_IPP_Java_DevKit) QuickBooks DevKit等）

> 经过一番研究，Quickbooks SDK 似乎要过时了……这有什么道理吗？

对于*WINDOWS 的 QuickBooks*，Intuit 不断重申他们的立场，即 SDK 不会去任何地方。阅读他们的博客文章：http: [//ippblog.intuit.com/blog/2012/10/the-quickbooks-sdk.html](http://ippblog.intuit.com/blog/2012/10/the-quickbooks-sdk.html) 他们最近刚刚发布了 SDK 的一项新功能，其中包含用于功能的占位符在*下一*版本的 SDK 中也是如此。

*QuickBook ONLINE*的 QuickBooks SDK可能会过时。如果您是 SaaS 应用程序，IPP 是*QuickBooks ONLINE*的最佳选择。

认识到现在 Intuit 合作伙伴平台*依赖于*SDK 的功能也很重要。Sync Manager 适用于 Intuit 合作伙伴平台应用程序的方式是，它实际上打开了与 QuickBooks for Windows 的正常 SDK 连接，并发送 QuickBooks 正常、SDK、qbXML 请求以在 QuickBooks 中创建/更新数据，以及各种其他事物，如 void，删除等

*这意味着即使 Intuit 想要放弃 SDK，他们现在也不能。并非没有对 Intuit 合作伙伴平台进行大量重写。*

> 每个人都倾向于 Frontrunner 和 IPP 吗？

呃，没有。

现在 AppCenter 上的大量应用程序根本不是 .NET 应用程序。我知道我们已经帮助构建和发布了至少 10 个左右的 PHP 应用程序，并且我们已经与使用 Ruby、Python 或 Java 的许多其他人进行了交谈。

此外，重要的是要了解目前 IPP 并不适合所有人。

*   您必须是 SaaS 应用才能使用它（这意味着如果您不是 SaaS 应用，*则必须*立即使用 SDK）
*   用于 Intuit 合作伙伴平台的 WINDOWS 的 QuickBooks现在*很糟糕*（界面有问题、不可靠、不完整，而且只是一团糟）
*   Intuit 正在重写大数据服务（实际上它们在 v3 开发方面落后了大约 6 个月——如果您现在为 IPP 开发，计划在 v3 可用时在 6 个月内重写大量应用程序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:00:19.347

是的，QuickBooks SDK 已被弃用。尽管 SDK 支持团队仍在竭尽全力让事情继续下去，但在最近的 QuickBooks 版本（例如，增强的库存接收）中对 SDK 进行了重大更改，并且最新版本 (12) 尚未完全实施。

领跑者计划只是获得技术援助和营销帮助的工具。无需使用 Frontrunner 或 Azure 即可与 IPP 交互。

您现在应该注意的最重要的事情是针对 IPP 版本 3 宣布的重大更改。您可能已经在关注此主题，但如果您不是，我建议您研究一下。

# ios - UIMenuController Not showing from subview UITextView

> ID：15398805
> 
> 赞同：1
> 
> 时间：2013-03-14T00:00:19.590
> 
> 标签：ios, objective-c, uimenucontroller, autocorrect

I am using SLTextField+Autocomplete which I changed to use a textview instead of field in order to make it multiline. For some reason the default code works, but when I move over to TextView it no longer shows the UIMenuController in the superview. The code is attached below, the datasource is set in the superview on initialization and the finding of matches works correctly, the menu just will not display in the view. Assigning first responder to the UITextView is functioning as expected (as per the requirement of UIMenuController).

```
//
//  SLTextField+Autocomplete.m
//  TMSTaxi
//
//  Created by Laurent Spinelli on 13/08/12.
//  Copyright (c) 2012 Elemasoft. All rights reserved.
//

#import "SLTextField+Autocomplete.h"

@implementation SLTextField_Autocomplete
@synthesize completionMenu;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        completionMenu = [UIMenuController sharedMenuController];
    }
    return self;
}

- (void)dealloc
{

}

-(BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    NSString *sel = NSStringFromSelector(action);
    NSRange match = [sel rangeOfString:@"magic_"];
    if (match.location == 0) {
        return YES;
    }
    return NO;
}

- (BOOL) canBecomeFirstResponder
{
    NSLog(@"HERE");
    return YES;
}

- (void)showAutocompleteItems:(NSString*)_string
{
    [self becomeFirstResponder];
    NSMutableArray* menuItems = [[NSMutableArray alloc] init];
    NSInteger counter = 0;
    for (NSString* value in self.dataSource) {
        if ([value rangeOfString:_string options:NSCaseInsensitiveSearch].location == 0 ) {
            NSString *sel = [NSString stringWithFormat:@"magic_%@", value];
            [menuItems addObject:[[UIMenuItem alloc] initWithTitle:[value capitalizedString] action:NSSelectorFromString(sel)]];
            counter ++;
        }
        if (counter >= SLTextFieldMaxItemToDisplay) {
            break;
        }
    }

    [completionMenu setTargetRect:CGRectMake(self.bounds.origin.x,self.bounds.origin.y,70,70) inView:self.superview];
    [self becomeFirstResponder];
    [completionMenu setMenuItems:menuItems];
    [completionMenu setArrowDirection:UIMenuControllerArrowDown];
    NSAssert([self becomeFirstResponder], @"Sorry, UIMenuController will not work with %@ since it cannot become first responder", self);
    [completionMenu setMenuVisible:YES animated:YES];
    //[self performSelector:@selector(doShowMenu) withObject:nil afterDelay:0.5];
}

- (void)doShowMenu
{

}

- (void)tappedMenuItem:(NSString *)_string {
    self.text = [_string capitalizedString];
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)sel
{
    if ([super methodSignatureForSelector:sel]) {
        return [super methodSignatureForSelector:sel];
    }
    return [super methodSignatureForSelector:@selector(tappedMenuItem:)];
}

- (void)forwardInvocation:(NSInvocation *)invocation
{
    NSString *sel = NSStringFromSelector([invocation selector]);
    NSRange match = [sel rangeOfString:@"magic_"];
    if (match.location == 0) {
        [self tappedMenuItem:[sel substringFromIndex:6]];
    } else {
        [super forwardInvocation:invocation];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T08:44:22.603

目标矩形本质上应该是您希望在其上方/下方/旁边显示菜单的视图框架。如果您不为宽度和高度提供自定义值怎么办？

尝试改变这个：

`[completionMenu setTargetRect:CGRectMake(self.bounds.origin.x,self.bounds.origin.y,70,70) inView:self.superview];`

对此： `[completionMenu setTargetRect:self.frame inView:self.superview];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:09:27.600

改变这个

```
[completionMenu setTargetRect:CGRectMake(self.bounds.origin.x,self.bounds.origin.y,70,70) inView:self.superview];
[self becomeFirstResponder]; 
```

对此

```
[completionMenu setTargetRect:CGRectMake(self.frame.origin.x,self.frame.origin.y,70,70) inView:self]; 
```

# c++ - 将模板类初始化为基类的好方法

> ID：15398806
> 
> 赞同：3
> 
> 时间：2013-03-14T00:00:20.693
> 
> 标签：c++, visual-c++, c++11

我知道这个问题可能很模糊，它是对我在[这里](https://stackoverflow.com/questions/4225087/c-like-properties-in-native-c/4225302#4225302)给出的答案的扩展。基本上，作为一个个人项目，我一直在尝试复制“代码优先”的习语，这在 C# 程序员中很流行做数据库工作，但在 C++ 中。一切都很棒，而且运作良好。

C# 的一大优点是诸如属性之类的东西。我们在 C++ 中没有这种新颖性，所以我在数据库中构建的特定类的代码如下所示：

```
class User : public Record {
public:
    User(Model& m) : Record(L"_user", m)
                   , Username(L"_userName", 32, false)
                   , Nickname(L"_nickName", 32, false) {
        field(Username);
        field(Nickname);
    };  // eo ctor

    Field<String> Username;
    Field<String> Nickname;
};  // eo class User 
```

理想情况下，我想摆脱`field`构造函数中的调用。本质上，他们所做的只是向基类注册该字段，然后由基类完成真正的工作。我怎样才能完成这种事情，并将详细信息传递给基类，就像我在构造函数中指定的那样简单？

在[我回答](https://stackoverflow.com/questions/4179695/how-can-i-initialize-superclass-params-from-within-the-child-c-tor-in-c/4179711#4179711)的上一个问题中，由于 C++ 构造事物的方式，我能够提供基类信息。有没有办法可以在构造函数中利用它并摆脱`field`可能引入程序员错误的讨厌调用？

在这一点上，我很高兴一切都运行良好，但我很想减少混乱并消除构造函数中这种“注册”过程的需要，并以某种方式让它们自动注册到基类中。

欢迎所有意见:)

**编辑**

的实现`field`是这样的：

```
 void Record::field(detail::field_base& field) {
            field.owner_ = this;
            fields_.push_back(&field);
        };  // eo field** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:12:15.730

您可以让构造函数`Field<>`接受一个指向 a 的附加指针，并在构造函数的主体中`Record`调用该指针。`field(*this)`

```
template<typename T>
struct Field // Just guessing...
{
    Field(std::string s, int i, bool b, Record* pRecord) 
    // ...
    { 
        pRecord->field(*this); 
    }
    // ...
}; 
```

然后，在您的初始化列表中，`User`您将通过这种方式`this`作为附加`Record`指针传递：

```
User(Model& m) : Record(L"_user", m)
               , Username(L"_userName", 32, false, this)
               , Nickname(L"_nickName", 32, false, this)
{
};  // eo ctor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T00:11:21.450

只需将必要的信息（即您的`this`指针）传递给`Field`构造函数，然后让它完成工作

你甚至可以为此引入一个特殊的包装类

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T00:27:25.843

不要沉迷于属性语法。

您想要的是能够将`struct`s 视为具有运行时反射的有意义命名数据的聚合，对吗？

要引入新名称，请使用类型：

```
template<typename T> struct FieldTag {};
struct Username:FieldTag<Username> {} username;
struct Nickname:FieldTag<Nickname> {} nickname; 
```

要生成类型的聚合，请使用模板参数：

```
template<typename Child, typename Field>
struct FieldHandler {
  typedef typename Field::tag_type tag_type;
  typedef typename Field::value_type value_type;
  PsuedoRef<value_type> operator[]( tag_type ) { /* details */ }
  /* details */
};
template<typename... Fields>
struct Aggregate:
  Record,
  FieldHandler<Aggregate<Fields...>, Fields>...
{
  /* details */
};
template<typename Value, typename Tag>
struct Field {
  typedef Tag tag_type;
  typedef Value value_type;
}; 
```

上述所有样板的目标，加上一些运算符覆盖滥用，是我们可以从中获得一些漂亮的语法，最终程序员得到一个看起来很像没有样板的 C++ 的语法。

以下是如何创建`Data`具有两个字段的类型的最终目标：

```
struct Data:
  Aggregate<
    Field<std::string, Username>,
    Field<std::string, Nickname>
  >
{
  Data(): Aggregate(
    username|L"username" = L"Unknown Name",
    nickname|L"nickname" = L"Unknown NickName"
  {}
}; 
```

要访问字段，请使用适当覆盖的运算符：（我喜欢`^`，它绑定紧密，看起来有点像`->`）

```
Data d;
d^username= L"Bob";
d^nickname= L"Apples"; 
```

这在 C++11 中都是可能的，但并不是那么容易。

现在，将指向函数的指针作为模板参数的能力，以及可转换为函数的无状态 lambda，可能让我们将字符串存储在字段的类型中，从而无需在构造时传递它。另一方面，对未评估上下文的限制使这似乎值得怀疑。

所以剩下的就是丑陋的一点。另外，完成上述工作所需的努力使我认为您可能应该吞下每个字段上烦人的样板。

请注意，上面的代码只是伪代码，是您可以采取的路线的草图，并不是所有接近完成的地方。我建议不要尝试走这条路，除非你想迷失在学习 C++ 的模板元编程子语言的树林中，并且永远无法解决你的问题。

话说回来，学习模板元编程不是比你当前的项目更有趣吗？;)

# android - Capture video stream with FFmpeg

> ID：15398807
> 
> 赞同：2
> 
> 时间：2013-03-14T00:00:24.920
> 
> 标签：android, c++, ffmpeg, video-streaming, mpeg-4

I wrote an android app that sends a live video stream from the camera over a socket to my computer. Is it possible to use FFmpeg to decode the MPEG4 video stream and some how display what the camera is seeing in real time? I'm guessing I would have to create a bitmap from the latest information it had from the byte stream and display it on the computer at 20+ FPS.

How would I go about doing something like this? C++, C# or Java is fine. From my understanding FFmpeg is written in C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:49:29.040

首先，您是想自己创建一个视频播放器，还是只想看您的视频流？因为当您已经拥有视频流时，几乎所有现代视频播放器都可以播放流媒体。尝试使用[VLC](http://www.videolan.org/vlc/)（使用 FFmpeg）。在 VLC 中，只需单击“媒体”->“打开网络流...”并填写您的 URL。

其次，FFmpeg 是用 C (C99) 编写的。FFmpeg 本身只是一个转换媒体的工具。当您想创建自己的程序时，可以使用 FFmpeg 库（libavcodec、libavformat 等）。

# php - header redirect not working on server but working on localhost

> ID：15398808
> 
> 赞同：8
> 
> 时间：2013-03-14T00:00:28.277
> 
> 标签：php

I'm using bluehost as my webhost, I'm having a few problems. The code below is my point of confusion.

```
<?php
include '../init.php';
error_reporting(0);
?>
<div class='container'>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/bootstrap/css/responsive.css">    
<link rel="stylesheet" type="text/css" href="/bootstrap/css/responsive.min.css">
<script language="JavaScript" type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<link rel="stylesheet" type="text/css" href="SignIn.css">
<title>SoundBooth - Sign in</title>
<link rel="icon" href="../Images/Logo.png" type="image/x-icon"/>
</head>
<body  background="../Images/BGMain.png">
<div class='signinLabel'>Sign in</div>
<div class='bg'></div>
<div class='user'>Username</div>
<div class='pass'>Password</div>
<form action="index.php" method='POST'>
  <input name='Username' autocomplete="off"class='usr' type="text" style='height:34px;'/>
  <input name='Password' autocomplete="off"class='pas'type="password" style='height:34px;'/>

  <input type='submit' class='submit' value='Log in' ></input>
</form>
<a class='forgotPass' href="#">(Forgot password)</a>
<div class='no-account-label'>Don't have an account? |</div>
<a class='no-account-button' href="/signup">Sign up</a>
<?php
 if (empty($_POST) === false){
    $username = $_POST['Username'];
    $password = $_POST['Password'];

    if (empty($username) || empty($password)){ ?>
            <div style="float:left;margin:-415px 200px;width:500px;text-indent:100px;"class="alert alert-error">You need to enter a username and password!</div>
            <?php
        }elseif (user_exists($username) === false){?>
            <div style="float:left;margin:-415px 170px;width:500px;text-indent:100px;"class="alert alert-error">We can't find that username! Have you <a style='color: rgb(185, 74, 72);' href='../HTML/signup.html'>registered?</a></div>
            <?php
        }elseif (user_active($username) === false){ ?>
            <div style="float:left;margin:-415px 200px;width:500px;text-indent:100px;"class="alert alert-error">You haven't activated your account!</div> <!--Remove this-->
            <?php
        }else{

            $login = login($username, $password);
            if ($login === false){ ?>
            <div style="float:left;margin:-415px 200px;width:500px;text-indent:100px;"class="alert alert-error">The username or password you have entered is incorrect!</div>
            <?php
            }else{
                $errors[] = 'Logging In...';
                $_SESSION['user_id'] = $login;
                if (isset($_SESSION['user_id'])){
                mysql_query("UPDATE `users` SET `online_offline`='1' WHERE `user_id`='$_SESSION[user_id]'");
                }
                header("Location: http://sound-booth.com/");
                exit();
            } 
        }
    }
    echo output_errors($errors)
?>
</div>
</body>
</html> 
```

is the link to the script. It works in localhost, but not in my actual server. Not even the header() redirect works.

Could somebody please explain this?

**Solution:**

```
ob_start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-20T08:02:21.337

最好的选择是像这样使用。

```
// Use this line instead of header
echo "<script>location='your_url.com'</script>"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T00:09:03.190

Headers must be set before any output is sent. You are sending a lot of HTML to the user before doing that `header()` call. Perhaps its working in one environment but not in another because `output_buffering` is set on your localhost php.ini but not on the server.

You should rework your code to make sure `header()` is sent before any stuff, but if you want to just get it working append `ob_start()` to the beginning of your code, it will enforce the buffering.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-15T06:14:01.913

`ob_start();`紧随其后`<?php`并`ob_end_flush();`在文档末尾使用 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T00:07:25.093

HTTP headers must be sent before the HTTP response. I.e., you must call [`header`](http://www.php.net/manual/en/function.header.php) *before* echoing anything else or sending any HTML.

Chances are, the reason it works on your local server is because you have configured [output buffering](http://php.net/manual/en/book.outcontrol.php) there. You can insert a call to [`ob_start();`](http://www.php.net/manual/en/function.ob-start.php) at the top of the page to enable output buffering within the script. Then, since the HTML will be buffered until the script is done, the redirect header can get to the browser first, as it must. Or, you can rework the script to put the `header` call at the top.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T00:07:55.610

```
header("Location: http://sound-booth.com/"); 
```

it goes after text output.

Use OB_start() or change your code.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-09T12:06:48.197

一个页面使用的第一行

```
<php ob_start();?> 
```

然后在头文件下面使用

```
ob_end_flush(); 
```

例如像这样。

```
 <?php
ob_start();
?>
<?php
//Get values from the post Operation
require_once 'db/conn.php';

    if (isset($_POST['submit'])) {

        //extract values from the $_POST array
        $id = $_POST['id'];
        $fname = $_POST['firstName'];
        $lname = $_POST['lastName'];
        $dob = $_POST['dob'];
        $email = $_POST['email'];
        $contact = $_POST['phone'];
        $specialty = $_POST['specialty'];

        //call crud Funtion
        $result = $crud->editAttendees($id, $fname, $lname, $dob, $email, $contact, $specialty);
        //redirect  to index.php
        if ($result) {
        header("Location: viewrecords.php");
        ob_end_flush();

        } else {
            echo "error";
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-26T23:57:20.780

我一直面临同样的问题。最后一个答案对我有用。

*echo "location=' [https://mysiteurl.in](https://mysiteurl.in) '";*

感谢 Jon Surrell。它甚至还带有会话值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-14T00:06:09.757

You probably have your error reporting turned off which is why you won't get an error message.

header() does not work if you have even a white space before it. You would need to put it above all your string outputs in order for it to work.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-14T00:11:53.753

操作，

您在开始标签`<div class='container'>` **之前**`<html>`有（然后在`</body>`.

`<div class='container'>`打开`<body>`标签后尝试移动。

希望有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-25T07:41:54.380

```
$r=mysqli_query($con,$stmt);
if(!$r)
{
    die("Server failed" . mysqli_error($con));
}
else{
header("Location: index.html");
exit();
}?> 
```

上面的代码对我有用。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-02-16T13:35:01.617

我认为`ob_start()`函数调用是解决这个问题的最佳方法。头函数可以在逻辑语句之后调用他的属性。这是传递值，只是取它以前的值。

参考：[https ://www.php.net/manual/en/function.ob-start.php](https://www.php.net/manual/en/function.ob-start.php)

# php - 查找以“X”开头并以“Y”结尾的字符串，并替换其中的内容

> ID：15398809
> 
> 赞同：0
> 
> 时间：2013-03-14T00:00:35.373
> 
> 标签：php, regex

我正在尝试处理一些 html 并将所有 img 标签 src 替换为 base64。我编写了下面的函数来转换图像并以base64返回。我需要帮助的是以下内容：

我需要使用 str_replace、preg_replace 或某种正则表达式来扫描一些 html 并将所有“src”替换为图像的 base64 表示。html 存储为变量，而不是实际的 html 文档。例如，如果我有一些 html，例如：

```
$htmlSample =  "<div>Some text, yada yada and now and image <img src='image1.png' /></div>" 
```

我需要扫描它并将**src='image.png'**替换为 base64 等效项，例如**src="data:image/png;base64,/9j/4WvuRXhpZgAASUkqAAgAAAAIAA8BAgASAAAAbgAABAgAK"** ---（这不是实际的 base64 只是一些填充文本）。该函数需要能够对 html 中的多个图像执行此操作。如果你能指出我正确的方向，我会非常感激。多谢你们！

```
function convertImage($file)
{

    if($fp = fopen($file,"rb", 0))
    {
       $picture = fread($fp,filesize($file));
       fclose($fp);
       $base64 = base64_encode($picture);
       $tag = '<img ' . "" .
          'src="data:image/png;base64,' . $base64 .
          '"  />';
       return $tag;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:25:54.570

查看诸如 SimpleDOM 之类的 DOM 操纵器。这将让您以更加面向对象的方式解析 html 文档，而不是凌乱的正则表达式，因为库很可能会处理您可能没有想到的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:57:46.233

正如 Adam 建议的那样，我能够使用 SimpleDOM（链接：simplehtmldom.sourceforge.net）完成这项工作。

```
require_once('simple_html_dom.php');
$html = "This is some test code <img width='50' src='img/paddock1.jpg' /> And this is some additional text and an image: <img src='img/paddock2.jpg' />";

//uses function from simple_html_dom.php to make html parsable
$doc = str_get_html($html);

//finds each image in html and converts
foreach ($doc->find('img[src]') as $img) 
{

    //get src of image and assign to $src
    $src = $img->src;

    $imageBase = convertImage($src);

    $img->src = $imageBase;

}

$html = (string) $doc;

echo $html;

function convertImage($file)
{

    //finds file based on $src name from above and runs code if file exists
    if($fp = fopen($file,"rb", 0))
    {
       $picture = fread($fp,filesize($file));
       fclose($fp);
       //converts image file to base64
        $base64 = base64_encode($picture);

       //returns nessary data: + base64 code to $imageBase above to be inserted into html>img>src
       return 'data:image/png;base64,' . $base64;
    }
} 
```

# facebook - Notifications using Facebook Connect

> ID：15398811
> 
> 赞同：1
> 
> 时间：2013-03-14T00:00:41.910
> 
> 标签：facebook, facebook-javascript-sdk

I have a web app that uses Facebook Connect in order to log in users. With this, I have their FB id and the key for login purposes. I've seen a couple of apps that send notifications to users (just like you would about a wall post) which links them to the app.

Now, I have a feeling that they are able to do that because they're in-fb apps, unlike ours which is outside.

Has anyone been able to push notifications to users just by using Facebook Connect?

Thank you! -AF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:27:55.240

Facebook 将通知 API 限制为[Facebook 本身的应用程序](https://developers.facebook.com/docs/concepts/notifications/)：

> 注意：只有 Facebook.com 上的应用程序可以使用应用程序通知。此外，这些通知仅出现在 Facebook.com 的桌面版本上。

话虽如此，如果您在 Facebook 上有一个应用程序和一个不在 Facebook 上的网站，您可以使用 facebook 上的应用程序凭据发送通知。不过，在这种情况下，有两件事要记住：

1.  通知将返回您的 Facebook 应用程序。
2.  Facebook 本身可能不喜欢这种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:05:05.877

[https://developers.facebook.com/docs/concepts/notifications/](https://developers.facebook.com/docs/concepts/notifications/)

只有画布应用程序可以做到这一点。此外，随着 Facebook 的布局变化，我想知道这也会如何变化。

# javascript - 在 javascript 中替换或删除字符串中的字符不起作用

> ID：15398812
> 
> 赞同：0
> 
> 时间：2013-03-14T00:00:43.863
> 
> 标签：javascript, google-chrome-extension, replace

如果我选择一个单词并且它包含“'s”，我希望它被删除或替换为空格。例如，如果我有一个句子：“king's bed”并且我选择了“king's”，我希望它只在变量“king”中。

我试过这段代码，但没有用

```
 var word2 = selectedWord.split(' ');
  var word= word2.replace(/'s/g, ""); 
```

它给了我这个错误：

```
Error in event handler for 'undefined': Object [object Array] has no method 'replace'
TypeError: Object [object Array] has no method 'replace' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:05:30.680

反转函数的顺序：

```
var word = selectedWord.replace(/'s/g, '').split(' '); 
```

`.split()`返回一个没有`replace`方法的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:01:44.403

正如错误明确指出的那样，`word2`是一个**数组**，而不是一个字符串。
数组没有`replace`方法。

你可能不应该打电话`split()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:02:22.927

那是因为 split 方法返回一个数组。

# java - 如何使用递归来反转文本？

> ID：15398815
> 
> 赞同：-5
> 
> 时间：2013-03-14T00:01:11.803
> 
> 标签：java, recursion

```
import java.util.*;
public class RecursionProject {
  public static void main(String[]args) {
    getLine(); 
    useRecursion();
  }
  public static void getLine() {

    System.out.println("This program uses recursion.") ;
    System.out.println("Would you like to see how it works?") ;
    System.out.print("If yes, type yes, else type no -----> ");
    String userResponse = null;
    Scanner in = new Scanner(System.in);
    userResponse = in.next();
    System.out.println(userResponse);
    if (userResponse.equalsIgnoreCase("yes")) {
      System.out.println() ;
    }
    else {
      System.out.println("Thank you for using this program.");
      System.exit(0);
    }

  }
  private static void useRecursion(){
    System.out.println("Type in what you would like to see") ; 
    System.out.println("done recursively. (This program ") ;
    System.out.println("excludes white spaces):") ;
    String s = null ; 
    Scanner console = new Scanner(System.in) ;
    s = console.next() ; 
    if (s.isEmpty()) {
      System.out.print(" - ") ;

    }
    else {
      System.out.println("0") ;
    }
  } 
} 
```

所以这是我到目前为止的代码。我的任务是从控制台读取输入，然后使用递归反转相位。即，如果用户键入“动物”，它会在屏幕上打印出“slamina”。我知道我的基本情况是该行是否为空，而我的递归情况是该行是否包含文本。这是一个 Programming 2 类，在 Eclipse 4.2.2 上使用 Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:08:44.550

[`StringBuffer`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/StringBuffer.html)有一个内置`reverse()`方法，所以只需使用它。

以下是您将如何反转`String`诸如“Hello World”之类的内容：

```
String source = "Hello World";

    for (String word : source.split(" ")) {
        System.out.print(new StringBuffer(word).reverse().toString());
        System.out.print(" ");
    } 
```

输出：

```
olleH dlroW 
```

* * *

这是家庭作业，所以我不会为你做。基本上，要使其递归，您需要创建一个接受 a `String`（或`Strings`带有可变参数的多个）的方法，然后使用我的代码逻辑来反转`String`or`Strings`并返回它们。然后，您可以在每次需要`String`反转时调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:11:07.263

很难提供既有用又不为你做功课的东西。我会尝试，但我不会给你工作代码。

从这样的事情开始：

```
public static final String reverse ( String s ) {
  if ( s != null && s.length() > 1 ) {
    return (lastChar(s) + allButLastChar(s));
  }
  return s;
} 
```

编写`lastChar`and `allButLastChar`，运行代码，看看它做了什么。下一步取决于您，但应该很明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:17:30.107

通常通过递归，您将拥有一个调用自身的函数。你不需要递归来反转一个字符串，但我想你可以有一个函数来接受一个字符串，并将字符串的第一个字符附加到其余字符的反面。

我将尝试在不提供太多代码的情况下解释它是如何工作的。

所以说你有一个`reverse`反转字符串的函数。在里面你可以说：

```
return reverse(myString.substring(1)) + myString[0]; 
```

当您在 string 上调用它时`Hello`，它的工作方式如下：

```
reverse("Hello")
-> reverse("ello") + "H"
-> reverse("llo") + "e" + "H" 
-> reverse("lo") + "l" + "e" + "H" 
-> reverse("o") + "l" + "l" + "e" + "H" 
-> "o" + "l" + "l" + "e" + "H" 
```

当字符串为空时，它需要切断递归。

# css - CSS - 两个 div 固定并填充但绝对位置

> ID：15398820
> 
> 赞同：1
> 
> 时间：2013-03-14T00:01:52.487
> 
> 标签：css

我的问题很像这个：

[两个 div，一个固定宽度，另一个，其余的](https://stackoverflow.com/questions/6487085/two-divs-one-fixed-width-the-other-the-rest)

但有一些警告使答案有点不同。

如果不使用javascript，有没有办法让两个包含的div，一个以锁定的宽度浮动，另一个以设定的高度粘在容器底部并占据剩余的可用宽度？这里最困难的部分是两个 div 上方和周围的所有内容都必须保持可点击并与父 div 关联。

这是小提琴：http: [//jsfiddle.net/W7Ljd/](http://jsfiddle.net/W7Ljd/)

这是代码：

```
.box {
    position: relative;
    width: 200px;
    height: 200px;
    padding: 5px;
    background:lightcoral;
}

.left {
    position: absolute; /* ------ Get Rid of these lines */
    bottom: 5px;        /* ------ */
    width: 80px;        /* ------ */
    overflow:hidden;
    height: 20px;
    background: lightyellow; /* Take up rest of space */
 }

 .right {
    float: right;
    width: 100px;
    height: 100%;
    background: lightblue;
} 
```

红色区域需要是可访问的父 div，黄色需要在底部占据其余宽度，以调整窗口大小。

感谢您的考虑，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:28:30.937

[我对你的小提琴做了一些细微的改动。](http://jsfiddle.net/W7Ljd/2/)

通过删除宽度，而不是设置左右位置，div 将自动填充这两个点之间的空间。因为您的右侧 div 是固定宽度，您可以将左侧 div 上的右侧位置设置为该数字*加上*您想要的 div 之间的任何间隙（以及您在左侧创建的任何间隙）。

`position: absolute`不会否定元素与其父元素之间的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:20:22.693

您是否尝试使用`display: table`,`display: table-cell`和`display: table-row`？`left`如果你给容器一个 table 的显示值，然后每`right`一个`table-cell`你可以将容器分成两列。

然后添加`vertical-align: bottom`到左侧以将内容移动到底部。您必须添加另一个元素才能获得我认为的不同背景颜色。

看到这个[更新的小提琴](http://jsfiddle.net/Hedse/2/)。

由于您没有在问题中提及您需要在哪里填写内容，因此我不确定这是否完全符合您的需求。

# ruby-on-rails - 在rails中调用ajax的url

> ID：15398821
> 
> 赞同：0
> 
> 时间：2013-03-14T00:02:06.857
> 
> 标签：ruby-on-rails

我在我的 Rails 应用程序中单击用户页面 localhost:3000/users1 上的一个按钮，这会触发一个 ajax 调用。ajax 代码中指定的 url 是`game_start`. 但是，Rails 在该 url 上添加了“用户”前缀，就像`/users/game_start`它发出 ajax 请求时一样，所以在 routes.rb 中我必须这样做`match '/users/game_start' => 'gamecontroller#start'`才能使其工作。这是预期的行为吗？为什么它附加`/users/`到网址上？

```
$.ajax({
          url: "game_start",
          data: { user: data },  
          type: "POST",
          success: function(response) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:03:40.243

如果您手动进行 ajax 调用，我建议在 url 中添加一个斜杠，如下所示

```
url: "/game_start" 
```

# c# - 列表对象中的数据正在被最新值替换。

> ID：15398826
> 
> 赞同：0
> 
> 时间：2013-03-14T00:02:32.520
> 
> 标签：c#, list, collections

新添加到列表中的数据将替换 a 中的先前值`list<>`。在以下代码中， `listRM`包含`Address`信息中的所有项目。我究竟做错了什么？

```
 public void Assign(Rprts PrevItem, Rprts CurrentItem, List<Fields> listRM)
        {
            Fields field = new Fields();
            field.hding = "Name :";
            field.FName = PrevItem.fname;
            field.LName = PrevItem.lname;
            field.addrs1 = "";
            field.addrs2 = "";
            field.City = "";

            listRM.Add(field);

            field.hding = "Address :";
            field.Qty = "";
            field.Name = "";
            field.Dept = "";
            field.addrs1 = "ABC";
            field.addrs2 = "XYZ";
            field.City = "UVW";
            listRM.Add(field);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:04:23.347

`Field`您必须为要添加的每个条目创建一个新实例。

第一次调用时`listRM.Add(field)`，您传递了对对象的[引用](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)`field`（这也只是一个引用）。当您更改此对象时，列表指向的对象也会更改。

您可以通过在第二次调用之前放置一个断点来查看这一点，`listRM.Add(field)`并检查`field`' 和`listRM.Results`' 的值，例如但不一定使用[QuickWatch](http://msdn.microsoft.com/en-us/library/cyzbs7s2.aspx)。

现在开始创建一个新项目，只需执行以下操作：

```
field = new Field();
field. // set properties again
listRM.Add(field); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:07:51.070

You've created ONE instance of `Fields` class and added the same object to the list twice modifying that object in the middle. So your list, as expected, would contain that object twice, but both list items will point to the same modified instance `field`. Try creating brand new objects for every item you intend to add to the list: `Fields field = new Fields();`

# java - 拖动的 JDialog 落后于 Window

> ID：15398836
> 
> 赞同：0
> 
> 时间：2013-03-14T00:04:03.167
> 
> 标签：java, swing, jdialog

我创建了一个所有者为 null 的 JDialog（我可以从源代码中看到，如果提供的所有者为 null，Java 将获取我将用作所有者的 SwingUtilities.getSharedOwnerFrame()）。

问题是现在，当我拖动那个 JDialog 时，它会在主窗口后面。这非常令人抓狂，因为它偶尔会发生。

有人可以解释为什么会发生这种情况以及在什么条件下发生？（我使用的是 Java 7.17 x64 和 Windows 7）。

# assembly - 溢出寄存器

> ID：15398843
> 
> 赞同：0
> 
> 时间：2013-03-14T00:04:56.317
> 
> 标签：assembly

```
mov al,0ffh
add al,5 
```

我的问题是如何知道使用调试器在添加行之后 al 的值是多少？提醒在哪里？

仅作记录，这两行之后 al 的值为 0FEh

**编辑**值为 0x04h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:07:46.107

> 提醒在哪里

不确定您所说的提醒是什么意思，但有一个*进位*标志（您可以[在此处](https://stackoverflow.com/questions/791991/about-assembly-cfcarry-and-ofoverflow-flag)阅读更多信息）。

您可以检查是否发生进位，例如使用`JC`and`JNC`指令：

```
MOV AL,0FFh
ADD AL,5
JC there_was_carry  ; <-- this jump will be taken

MOV AL,0F0h
ADD AL,5
JC there_was_carry  ; <-- this jump will NOT be taken 
```

# c# - 我应该使用事件吗？

> ID：15398848
> 
> 赞同：1
> 
> 时间：2013-03-14T00:05:24.517
> 
> 标签：c#, winforms, visual-studio-2010, events

大家好，我需要一个建议，我正在使用 C# 开发一个桌面应用程序（Winform），我有一个表单，我有一个名为 OPC 的单独类（其他文件）

这是 OPC 类的一些代码

**OPC 类**

```
namespace BarCodePrint.Class
{   
public class OPC
{
    public OPCServer ConnectedOPCServer { get; set; }
    public OPCGroups ObjOPCGroup {get; set;}
    public OPCGroup ConnectedOPCGroup { get; set; }
    public int _numItems { get; set; }
    public string _nodeName { get; set; }

    Array _OPCItemIDs;
    Array _ItemServerHandles;
    Array _ItemServerErrors;
    Array _ClientHandles;
    Array _RequestedDataTypes;
    Array _AccessPaths;
    Array _WriteItems;

    public OPC()
    {
        //Code
    }

    public void OPCConnect()
    {
       //Code
    }

    public void OPCDisconnect()
    {
        //Code
    }

    public void AddGroupToOPC()
    {
       //Code
    }

    public void AddItemsToOPC()
    {
        //Code
    }

    public void Write()
    { 
        //Code
    }

    private void ConnectedOPCGroup_DataChange(int TransactionID, int NumItems, ref Array ClientHandles, ref Array ItemValues, ref Array Qualities, ref Array TimeStamps)
    {
        try
        {
            for (int i = 1; i <= NumItems; i++)
            {

                if ((Convert.ToInt32(ClientHandles.GetValue(i)) == 1))
                {
                   //Do something
                }
            }
        }
        catch (Exception exc)
        {
          //HandleException
        }

    }

}
} 
```

**ConnectedOPCGroup_DataChange**方法每次在设备中更改值时执行，我想做的是当值更改时将该值发送到表单，问题是：我应该使用事件吗？或将我的 OPC 类放在表单的同一个文件中？或者我可以用其他方式吗？

我希望能很好地解释我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:14:28.600

如果您要询问是使用事件还是直接调用某些东西，这取决于您的用例。事件是广播动作的好方法。如果不止一项需要了解使用事件更改的某些内容，则可以将您的代码解耦。也就是说，如果您只关心告诉另一段代码，那么您也可以这样做。事件在同一个线程上分派，因此无论您是直接调用订阅者还是使用事件分派它，执行代码都在同一个上下文中处理。

我个人喜欢使用事件来防止硬耦合。您的调度员代码不需要知道谁在订阅它。它只是说“嘿，事情发生了，现在你开始工作了”。

事件也很简洁，因为您可以将它们与 Rx 结合起来进行采样和节流，并执行各种其他很酷的事情。

如果你发现你正在添加一堆额外的代码来传播“发生了某事”，你应该使用一个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T15:42:10.777

从 OPC 服务器获取数据有两种方法：直接读取或使用 DataChange 事件。选择取决于您，不能将其中之一描述为“最佳实践”。如果您的问题只是关于实施，那么我可以告诉您，您在 ConnectedOPCGroup_DataChange 子的末尾缺少“Handles ConnectedGroup.DataChange”。您的 OPCAutomation 库将生成事件，您只需处理它。

为了解决您问题的第二部分，最好将您的 OPC 客户端类与您的主窗体分开。

# c - G-WAN 处理程序重写解决方案

> ID：15398849
> 
> 赞同：3
> 
> 时间：2013-03-14T00:05:28.607
> 
> 标签：c, url-rewriting, handler, restful-url, g-wan

这是我的脚本：

```
#include "gwan.h" // G-WAN exported functions
#include <string.h> // strstr()

int init(int argc, char *argv[])
{
    u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);
    *states = 1 << HDL_AFTER_READ;
    return 0;
}

void clean(int argc, char *argv[])
{}

int main(int argc, char *argv[])
{
    if((long)argv[0] == HDL_AFTER_READ)
    {
        xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
        if(strstr(read_xbuf->ptr, "GET / HTTP/1.1"))
        {
            xbuf_repl(read_xbuf, "GET / HTTP/1.1", "GET /?index HTTP/1.1");
        }
        else
        {
            if(strstr(read_xbuf->ptr, ".c HTTP/1.1"))
            {
                int *pHTTP_status = (int*)get_env(argv, HTTP_CODE);
                if(pHTTP_status)
                    *pHTTP_status = 404;
                return 255;
            }
            xbuf_repl(read_xbuf, "GET /", "GET /?");
        }
    }
    return(255);
} 
```

正如您可能理解的那样，我正在尝试将主页重定向到动态文件“hello.c”。我还将每个请求重定向到动态目录（不必使用字符“？”），同时防止在 url 中使用扩展名“.c”。

该脚本部分有效，但显然会导致内存分配问题。你有什么解决方案可以提出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:37:06.977

如果您担心性能，请不要使用 strstr。它将在整个请求中搜索匹配项。

根据您的脚本，您希望所有请求都是 GET，因此 strncmp 更好用，因为您只比较前 6 个字符。

```
int main(int argc, char *argv[])
{
    xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
    if(strncmp(read_xbuf->ptr, "GET / ", 6) == 0)
    {
        xbuf_repl(read_xbuf, " / ", " /?index ");
    }
    else
    {
        int pos = 5; // Start checking after '/' in "GET /"
        while(pos < 20) // Only check first 15 characters
        {               // Adjust depend on longest servlet name
            if(read_xbuf->ptr[pos] == '.' && read_xbuf->ptr[pos+1] == 'c')  // If request contains '.' return 404
            {
                int *pHTTP_status = (int*)get_env(argv, HTTP_CODE);
                if(pHTTP_status)
                    *pHTTP_status = 404;
                return 255;
            }
        }
        xbuf_repl(read_xbuf, "GET /", "GET /?");
    }
    return(255);
} 
```

再次检查“.c”。您只想检查前 N 个字符。

如果您担心添加“？”引起的内存分配 对于您需要设计您的 servlet 名称的每个请求，以便可以进行就地替换。这是一个链接，其中包含有关如何实现就地替换以获得更好性能的示例。

[G-WAN 中的 RESTful URI](http://mnd22.com/blog/restful_uri_in_g-wan)

我没有测试上面的代码，所以它可能不起作用，但至少你会知道如何去做。此外，该脚本不处理管道请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:12:15.887

首先，试图避免`*.c`脚本扩展是没有用的：默认情况下，G-WAN 接受`/?hello`自动重新映射到`/?hello.c`.

其次，这并不特定于 C，因为 G-WAN 允许您定义哪种编程语言（在支持的 16 种脚本语言中）将用作*“默认”*语言。

第三，如果你想避免'？'，你也可以定义另一个字符。在您的要求中。G-WAN 允许您在非保留字符中进行选择，从而可以使用`/'hello`或`/_hello`代替`/?hello.cpp`（请参阅下面的所有选项）。

而且，所有这些都可以在不为每个请求调用处理程序的情况下完成（因此它不会搅动内存）：

```
int init(int argc, char *argv[])
{
   // the QUERY_CHAR character can be chosen from the following set: 
   //  - _ . ! ~ * ' ( ) 
   // (see RFC 2396, section "2.3\. Unreserved Characters")
   //   
   u8 *query_char = (u8*)get_env(argv, QUERY_CHAR);
   *query_char = '!'; // use "/!hello.c" instead of "/?hello.c"

   // by default, DEFAULT_LANG = LG_C (ANSI C)
   // LG_C, LG_CPP, LG_JAVA, etc. are defined in /gwan/include/gwan.h
   // and in http://gwan.com/api#env
   //
   u8 *lang = (u8*)get_env(argv, DEFAULT_LANG);
   *lang = LG_CPP; // use "/!hello" instead of "/!hello.cpp"
   return 0;
}

// if, like above, init() does not define notification states with
// get_env(argv, US_HANDLER_STATES), then the main() and clean() 
// handler calls defined below will never be invoked
// (URL rewriting can't be done faster)
//
void clean(int argc, char *argv[]) { }
int  main (int argc, char *argv[]) { return 255; } 
```

所以，回到你的问题，你可以使用`/'hello`而不做任何重写。

# android - 调用 finish() 导致 startActivity() AndroidRuntimeException

> ID：15398854
> 
> 赞同：0
> 
> 时间：2013-03-14T00:06:00.727
> 
> 标签：android, android-intent, android-activity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:29:14.607

将 Override 方法添加`onDestroy();`到存在上述问题的活动中并在其中调用`super.onDestroy();`方法，在这种情况下，当您按下返回按钮到刚刚启动的活动时，它将完成维护其生命周期，只需执行如下：

```
@Override 
public void onDestroy(){
super.onDestroy();
} 
```

希望这有帮助

# c++ - using vectors with qsort()

> ID：15398855
> 
> 赞同：1
> 
> 时间：2013-03-14T00:06:01.630
> 
> 标签：c++, vector, qsort

I am working on a homework assignment involving vectors using qsort(). I am able to get the code to compile, but I am receiving an error saying `Expression: vector subscript is out of range` and `Expression: Standard C++ Libraries out of range &&0` Can anyone help as to where and why my vector subscript is out of range?

```
#include    <iostream>
#include    <fstream>
#include    <iomanip>
#include    <string>
#include    <vector>

using namespace std;

#include    "functions.h"

typedef vector< int >::size_type size_t;

int main( )
{
    ifstream ifs = get_ifs( );

    sort( ifs );

    return 0;
}

void sort( ifstream &ifs )
{
    vector< int > vi;
    int value;

    while( ifs >> value )
    {
        vi.push_back( value );
    }

    cout << "unsorted vi:\n" << vi << '\n';

    qsort( vi );

    cout << "\nsorted vi:\n" << vi << '\n';
}

void qsort( vector< int > &vi )
{
    int bot = 0;
    int top = vi.size() - 1;

    qsort(vi, bot, top);
}

void qsort( vector< int > &vi, size_t low, size_t high )
{

    if (low < high)
    {
        int split = partition(vi, low, high);
        qsort(vi, low, split-1);
        qsort(vi, split+1,high);
    }
    else
    {
        return ;
    }

}

size_t partition( vector<int>& vi, size_t low, size_t high )
{
    int pivot = vi[high];
    int bottom = low - 1;
    int top = high;

    bool notdone = true;
    while(notdone)
    {
        while(notdone)
        {
            bottom += 1;
            if (bottom == top)
            {
                notdone = false;
                break;
            }
            if (vi[bottom] > pivot)
            {
                vi[top] = vi[bottom];
                break;
            }
        }
        while (notdone)
        {
            top = top-1;

            if (top == bottom)
            {
                notdone = false;
                break;
            }
            if (vi[top] < pivot)
            {
                vi[bottom] = vi[top];
                break;
            }
        }
    }
    vi[top] = pivot;
    return top;
}

void print_vec( const vector< int > &vi, size_t n, size_t t )
{
    cout << vi;

    for( size_t i = 0; i < t; ++i )
    {
        cout << setw( 3 ) << vi[ i ] << ' ';
    }

}

ostream &operator <<( ostream &out, const vector< int > &vi )
{
    vector< int >::const_iterator iter;

    for( iter = vi.begin( ); iter != vi.end( ); ++iter )
    {
        out << setw( 3 ) << *iter << ' ';
    }

    return out;
}

ifstream get_ifs( )                             // get input file stream
{
    string filename;                            // input file name

    cerr << "name of file to read from? ";
    cin  >> filename;

    ifstream ifs( filename, ifstream::in );
    if( ! ifs )                                 // cannot open file infilen
    {
        cerr << "cannot open input file '" << filename << "'\n";
        exit( 1 );
    }

    return ifs;                                 // return input file stream
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:17:39.480

当您对元素进行分区直到每个分区中只剩下 1 个元素时，如果我理解正确，您将返回 0 作为顶部。

当您点击代码`qsort(vi, low, split-1);`拆分时将包含 0。

您需要处理特殊情况是您的分区有 1 个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:16:44.493

不要在 C++ 中使用 qsort。如果可能，请使用 std::sort()。

问题是您传递给 qsort 的基础不是 vi 而是 &vi[0] 因为容器可能有其他数据来管理向量。

另请[参阅 Using qsort() with class pointers](https://stackoverflow.com/questions/4925665/using-qsort-with-class-pointers)以获得更多答案和解释。

# interface - asp.net web api 控制器接口有什么好处吗？

> ID：15398858
> 
> 赞同：2
> 
> 时间：2013-03-14T00:06:10.810
> 
> 标签：interface, asp.net-web-api

我非常喜欢针对接口进行编码。在 WCF 世界中，这高度强调每一项服务。但是，我正在深入了解 ASP.NET Web Api，作为 MVC 4 的扩展，我很想知道是否有一些典型的理由可以让您的控制器实现从接口继承。

我知道 ASP.NET Web Api 的默认设置看起来像这样

```
public class TestsController : ApiController
{

    public IEnumerable<string> Get()
    {
        var testValues = new List<string>
            {
                "Something",
                "Welcome to the top of the world"
            };
        return testValues;
    }
} 
```

与此相反，有一个对应的接口（或多个接口）。

```
public class TestsController : ApiController, ITestsController 
{

    public IEnumerable<string> Get()
    {
        var testValues = new List<string>
            {
                "Something",
                "Welcome to the top of the world"
            };
        return testValues;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:14:58.060

我认为将这样的接口用于控制器没有任何价值。WCF 很大程度上依赖于接口，因为它是 SOAP 服务的常见事物，并且它用于在 WSDL 中生成合同。但是，HTTP Web API 没有这种约定，拥有它通常是一种不好的做法。此外，当您需要使用依赖注入和单元测试时，接口很常见，因为它们允许您轻松伪造依赖关系。但是，我认为您不会将控制器作为依赖项注入另一个类，因此在那里也没有意义。

# mysql - 在 MySQL 查询中创建和桥接表

> ID：15398859
> 
> 赞同：4
> 
> 时间：2013-03-14T00:06:15.330
> 
> 标签：mysql, database-design

我正在使用 MySQL 数据库的基本表设计。这个数据库项目是作为一个想法提出的，主要是为了教育目的。共有 11 个表，其中 2 个用于桥接目的。我试图正确设置主键和外键。我不确定如何编写将创建 11 个表并同时桥接它们的查询。 [在这里](http://webprolearner.ueuo.com/table_diagram/)，我附上了这些表格的可视化图表。

通过基本学习，我可以创建一张表，但不知道如何从这里推进：

```
CREATE TABLE Course (
          Course_ID INT,
          Course_Abbreviation VARCHAR(5),
      Course_Number INT,
      Section_Number INT,
      Professor_ID INT,
      Status VARCHAR(10)        
        ) TYPE=innodb; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:31:08.477

您快到了，您必须为表中的属性定义 PRIMARY 和 FOREIGN 键，Students、Course 和 Course_Br_Students 表的示例是：

```
CREATE TABLE Students(
PRIMARY KEY Student_ID SERIAL INTEGER,
Username VARCHAR(255),
First_name VARCHAR(255),
Email VARCHAR(255),
Phone number INTEGER,
Beginning_Date TIME,
Ending_Date TIME,
Max_hours INTEGER,
)

CREATE TABLE Student_Br_Course(
FOREIGN KEY Student_ID REFERENCES Students(Student_ID),
FOREIGN KEY Course_ID REFERENCES Courses(Course_ID),
Role VARCHAR(255),
Status BOOLEAN,
)

CREATE TABLE Courses(
PRIMARY KEY Course_ID INTEGER,
Course_Abbreviation VARCHAR(255),
Course_Number INTEGER,
Section_number INTEGER,
Professor_ID INTEGER,
) 
```

这是了解如何使用 PRIMARY 和 FOREIGN 键创建表的参考：

[http://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp)

# java - elasticsearch NodeBuilder vs TranportClient

> ID：15398861
> 
> 赞同：23
> 
> 时间：2013-03-14T00:06:35.390
> 
> 标签：java, elasticsearch

对于其他弹性搜索开发人员来说，这可能是一个非常简单（而且很愚蠢）的问题，这两者有什么区别？

我正在从 Java webapp 连接到远程弹性搜索服务器，到目前为止我一直在使用 TransportClient，但我想知道 NodeBuilder 是否可以用于，或者 NodeBuilder 是否应该仅用于嵌入式客户端？

如果两者中的任何一个都可以用来连接远程ES服务器，那么从内存和性能上来说，哪一个应该更好呢？

如果有人可以向我指出连接到远程 ES 服务器示例的 NodeBuilder，那就太好了，因为我没有幸运地找到一个。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T08:47:33.677

NodeBuilder 也可以用来连接集群。

```
Node node = nodeBuilder().clusterName("yourcluster").client(true).node();
Client client = node.client(); 
```

它将作为另一个节点加入集群，并将了解整个拓扑。使用节点，您可以使用多播来发现其他正在运行的节点。

我的观点是我更喜欢使用`TransportClient`而不是`NodeClient`因为当 TransportClient 停止时其他集群节点不会收到无用的信息。当 NodeClient 停止时，每个节点都必须知道这一点，即使他们不必管理它，因为它不保存任何数据。此外，我在调试模式下看到 NodeClient`Threads`比 TransportCLient 启动更多。所以我认为 TransportClient 的内存占用更少。

顺便说一句，如果您使用的是 Spring，则可以使用[spring-elasticsearch](https://github.com/dadoonet/spring-elasticsearch)工厂。如果没有，您可以随时查看源代码以了解我如何管理 NodeClient 与 TransportClient。

希望这可以帮助。

**编辑 2016-03-09**：`NodeClient`不应使用。如果需要，人们应该创建一个客户端节点（使用`node.data: false`and启动一个 elasticsearch 节点`node.master: false`）并使用 a`TransportClient`在本地连接到它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-22T12:11:39.613

如果我正确理解了文档，那么使用 Node Client 是有好处的，至少在你有分片的情况下：

> 使用 [Node] 客户端的好处是操作会自动路由到需要执行操作的节点，而无需执行“双跳”。例如，索引操作将在最终存在的分片上自动执行。

对比

> 它 [传输客户端] 不加入集群，而只是获取一个或多个初始传输地址并在每个操作上以循环方式与它们通信（尽管大多数操作可能是“两跳”操作）。

正如我所解释的那样，使用加入集群的节点（最好将客户端设置为 true）然后在该节点上使用客户端，您将直接向集群中的正确节点发送请求。

使用 TransportClient，您将连接到任何节点，然后该节点会将请求重定向（或可能转发请求，不确定）到正确的节点（“两跳”）

就网络流量和节点负载而言，使用 Node Client 应该更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T13:25:26.210

人们还应该知道 Node 客户端加入全网状集群并成为代理，因此其他客户端也可以连接到它并且还能够服务器插件站点，这在锁定集群时需要考虑。

节点客户端可用于进行分散收集，因此可以减轻数据节点的一些处理。

不确定传输客户端是否也分散收集。

# jquery - Removing or changing src of images by jQuery does not abort the loading request

> ID：15398863
> 
> 赞同：0
> 
> 时间：2013-03-14T00:06:58.637
> 
> 标签：jquery, image, loading, onload

I am working on a blog which will contain a lot of photos, for this reason I want to prevent the images to load until i say them to.

There are images in the HTML code (the preview images) and some that I will add later with jQuery (for example to enlarge the preview images).

I had no trouble with handling the images added by jQuery, because i stored the images for preloading in a seperated container and just added the "src" attribute with the **.on('load', function(){})** to the real image when the preload image finished loading.

For the images which are in the HTML code I tried the same. After DOM ready I iterate through them and remove the src-Tag by **.attr('src', '')** but which will not prevent the images from loading and blocks me all the traffic. I even tested removing every image on DOM ready with **$('img').remove()**, but Firebug and Chrome element inspector still show the network traffic caused by loading all these images.

So my question is: Does the removing src attribute hack not work on images defined in the HTML code? Is there a posibility to stop loading these images? Isn't the order of requests first loading the HTML, then applying the js code and then get the image requests?

Do I otherwise need to regulate this through ajax requests (what i want to avoid)?

The website I do refer to (Link to a post with images): [http://www.pablosichert.de/blog/#/UID17](http://www.pablosichert.de/blog/#/UID17)

# php - JQuery .append() 追加 PHP 代码

> ID：15398864
> 
> 赞同：-1
> 
> 时间：2013-03-14T00:07:00.177
> 
> 标签：php, jquery, append

我正在尝试将 php 附加到 div 使用

```
<script>
var values = {var1: 2, var2:"Hello"};
    $('#id').append($.get("phpfile.php", values));
</script> 
```

但是它似乎没有在 php 文件中附加基本回声

```
<?php
$var1 = $_GET['var1'];
$var2 = $_GET['var2'];
echo "var1= " . $var1 . " " . "var2= " . $var2; 
?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:08:44.703

Ajax 调用是异步的。这意味着`$.get()`函数的返回值*不会*是请求的结果，因为请求尚未执行。您需要使用`$.get()`调用的成功处理程序，该处理程序将在请求成功返回时调用，或者使用`$.get`函数返回的 jQuery 延迟对象（A 承诺）。

正确的语法 #1：

```
<script>
    var values = {var1: 2, var2:"Hello"};
    $.get("phpfile.php", values, function(data) {
        $('#id').append(data);
    });
</script> 
```

这是使用[promises](http://api.jquery.com/category/deferred-object/)的另一种语法：

```
<script>
    var values = {var1: 2, var2:"Hello"};
    $.get("phpfile.php", values).done(function(data) {
        $('#id').append(data);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:12:38.883

使用这个，**jQuery**：

```
<script>
    $.get("phpfile.php", { 'var1': 1, 'var2' : 2},
        function(data){ $('#id').append(data); }, "json");
    });
</script> 
```

**php**：

```
<?php    
    $var1 = $_GET['var1'];
    $var2 = $_GET['var2'];
    $data = "var1= " . $var1 . " " . "var2= " . $var2;

    echo json_encode($data);
    exit;
?> 
```

# python - PySide 下拉菜单

> ID：15398865
> 
> 赞同：0
> 
> 时间：2013-03-14T00:07:22.423
> 
> 标签：python, qt, pyside

我正在 PySide 中创建一个应用程序，我想单击一个工具按钮（具有自定义图像），这将触发一个下拉菜单，该菜单具有不同的选项。是否有某种小部件可以做到这一点，或者我必须制作一个自定义的。如果是，我将如何做到这一点。我还没有尝试过任何事情，我只需要知道如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:49:55.057

看来你正在使用 PySide.QtGui.QToolButton 小部件。

它有一个功能

```
YourToolButton.setMenu(menu) 
```

它将菜单与按钮相关联。您必须传递一个 QMenu 对象，您可以像创建任何其他小部件一样创建该对象。

采用

```
YourToolButton.setPopupMode(mode) 
```

并将模式设置为“InstantPopup”以获取即时菜单。

要添加您的选项，请使用

```
YourMenu.addAction(icon, text, receiver, member[, shortcut=0]) 
```

设置图标和文本。'receiver'是一个处理触发动作的函数。请参阅 Pyside 文档。

# jira - Dealing with bugs in Scrum via GreenHopper

> ID：15398868
> 
> 赞同：0
> 
> 时间：2013-03-14T00:07:43.847
> 
> 标签：jira, agile, scrum, jira-agile

We're re-organizing workflow in our team and one of the key decisions was to use Scrum process, provided with help of Jira and Greenhopper.

I've read various Scrum guides, documentation of Greenhopper and started Scrum process implementation in our team. After some corrections and changes it mostly good, but one thing doesn't let me sleep well: *bugs*.

[Different](https://stackoverflow.com/a/1593747/2070270) solutions are [proposed](https://stackoverflow.com/a/1381466/2070270) by [developers](https://stackoverflow.com/a/176132/2070270), but I still can't find my way here.

In our workflow any issue lives in 4 states: *Open -> In Testing -> Resolved -> Closed*

When **developer** is satisfied with his code he **puts** issue to **In Testing** state, and it becomes automatically assigned to QA lead. **QA** verifies the issue and, if everything is **ok** issue becomes **Resolved**. If **not** - **Open** again. In Resolved state **code review** is performed, and if code is secure, optimal and fits the developed structure, issue becomes **Closed**. If developer did something **wrong** - **Open** again.

The tricky part here is re-opening of an issue (story), because at same time **bugs** are raised, which land in **product backlog** - not sprint backlog, and due to Scrum-way developer can't work on issues, that are not in sprint backlog, but at same time story can't be closed, because code is buggy or written bad.

So, the question is: should a story be closed, even if it has some bugs, related to it, and these bugs are planned to be fixed in further sprints?

Or story can't be closed, until all related bugs are fixed, meaning that if a sprint is finished, but not all bugs are fixed for a story, story remains opened, excluded from finished sprint and moved to a next sprint, so it's story points are not burned in finished sprint?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:17:54.213

在遇到类似情况后，我们发现我们的故事中缺少（或不足）的关键之一是定义明确（并达成一致）的“完成的定义”（DoD）。如果你有明确的“完成”标准，那么当故事完成（符合国防部）时，它就完成了，当然诀窍在于如何定义一个不太模糊的完成的良好定义，确保质量好，每个人都同意并且实际上是可行的。对我来说，这也不是一次练习，我们会在每次回顾中不断地重新审视它，以确保它们仍然相关并根据需要进行更改。对于建立一个好的 DoD 的想法，试试[谷歌](https://www.google.co.nz/search?q=definition+of+done+exercise)，团队可以做很多很好的练习来定义它（比如[这个](http://www.tobiasfors.se/?p=575)）。

至于漏掉的错误什么时候完成，我想说它们应该被反馈到产品待办列表中，并按照正常情况进行优先级排序。冲刺期间出现的与冲刺工作相关的错误应该在冲刺中修复（避免管理/文书工作！）。还要记住很多错误（或越来越多的错误）通常意味着质量存在问题，也许有更大的问题需要处理（可能完成压力太大？）。

总而言之，看看获得一个坚实的 DoD（鼓励质量胜于数量）并不断改进它，放慢速度并做得更少而不是更多“有错误”，当错误确实出现时，将它们反馈到产品积压中并参与PO 尽快对其进行优先排序。

作为旁注，我们发现在处理大量错误时，像[看板](http://en.wikipedia.org/wiki/Kanban_%28development%29)这样更精益的方法比我们的 Scrum 流程的每周 2 次迭代方法效果更好。

希望这可以帮助？

# go - Is there a RETS package for the go language?

> ID：15398869
> 
> 赞同：0
> 
> 时间：2013-03-14T00:07:44.470
> 
> 标签：go, rets

I've searched for a RETS package for Go but could not find one yet. Did anyone had better luck than me finding that?

The librets c++ library has bindings for many languages but not for Go. Seems swig can't generate the binding for Go for that library. Maybe the solution is creating a native Go package?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T18:03:50.083

此时没有。Go 是一门年轻的语言，因此没有很多小众库。您可能需要自己编写。

有关该协议的所有信息都可以[在此处](http://en.wikipedia.org/wiki/SOAP)找到。据我所知，1.x 版本基于 XML（RPC？）并使用 HTTP 作为传输。版本 2.x 使用[SOAP](http://en.wikipedia.org/wiki/SOAP) 1.2，它也是基于 HTTP 传输的 XML。

不幸的是，Go 也没有任何 SOAP 库，因此无论哪种方式，您都需要使用`net/http`and`encoding/xml`包。您必须手动进行 SOAP 调用读取/写入 SOAP 信封。

请参阅[此答案](https://stackoverflow.com/a/17632770/867760)以在 Go 中使用 SOAP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T20:44:47.550

我找到了项目[go-rest](https://github.com/ungerik/go-rest)。我希望这可以帮助你。

# c# - InvalidOperationException was unhandled by user code, WPF

> ID：15398878
> 
> 赞同：1
> 
> 时间：2013-03-14T00:08:25.123
> 
> 标签：c#, wpf, checkbox, dispatcher, ivalueconverter

I have some WPF GUI (hosted in WinForm) which has multiple `CheckBoxes`. The default value of `IsChecked` of each `CheckBox` need come from different boolean fields in some background data. Each boolean field in the background data is mapped to a `CheckBox` in the `VisualTree`. So I bind the `IsChecked` property of each `CheckBox` to the `CheckBox` itself and use a Converter to fetch the corresponding boolean value in the background data. This way the `CheckBox` becomes an input to the Converter function so that the Converter can know its location in the `VisualTree` and query the correct boolean field in the background data. When the user changes the `CheckBox`, `Checked/Unchecked` event-handlers will set the value back to the boolean field in the background data. The XAML is like this:

```
 <DataTemplate x:Key="ModuleWithEnableControl">
        <WrapPanel>
            <CheckBox Content="Enable" 
                      IsChecked="{Binding Path=., RelativeSource={RelativeSource Mode=Self}, Mode=OneTime, 
                                  Converter={StaticResource moduleEnableDisableConverter}
                                  }"
                      Checked="ModuleEnabled" Unchecked="ModuleDisabled"
                />
        </WrapPanel>
    </DataTemplate> 
```

The Converter code is like this:

```
class ModuleEnableDisableConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      System.Windows.Controls.CheckBox theBox = (System.Windows.Controls.CheckBox)value;
      //Here suppose to get the default value of the CheckBox
      //but just return true for now
      return true;
    }
} 
```

The Checked handler code is like this:

```
 private void ModuleEnabled(object sender, RoutedEventArgs e)
    {
        MessageBoxResult result = MessageBox.Show("Enabled", "Confirmation", MessageBoxButton.YesNo, MessageBoxImage.Question);
        if (result == MessageBoxResult.Yes)
        {
          //Check the sender (CheckBox)'s location in the VisualTree,
          //Do set the boolean field in the background data
        }
        return;
    } 
```

When program starts, the Converter runs first, since it returns ture, then immediately the Checked handler `ModuleEnabled` runs. Then the problem happens when executing the `MessageBox.Show()` in the handler, a `Popup` window complains:

> InvalidOperationException was unhandled by user code

and

> Dispatcher processing has been suspended

but message are still being processed.

If I comment out the `MessageBox.Show()` line, the program executes as expected. If I don't bind the `IsChecked` to the `CheckBox` itself, no problem either, the `MessageBox` shows perfectly when user changes the `CheckBox`. I'm wondering why the `MessageBox.Show()` in the event-handler has conflict with the binding Converter? Also, is there a way to not trigger the Checked handler when setting the initial value using the binding?

# php - 我可以在整个 PHP 脚本中禁用/跳过某个功能吗？

> ID：15398882
> 
> 赞同：0
> 
> 时间：2013-03-14T00:08:43.207
> 
> 标签：php

`file_exists()`我想调试我的网站占用了多少时间。要对此进行调试，我想`file_exists()`暂时禁用 的所有实例，以尝试在没有它的情况下站点生成的速度。

有什么简单的方法可以做到这一点？我正在使用 PHP 5.3.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:15:35.837

您可以在 PHP 中[禁用函数](http://php.net/ini.core.php#ini.disable-functions)，但这正是它所暗示的：它完全禁用了该函数。您正在寻找的东西根本不可能，因为如果您“禁用”一个函数，但不希望脚本失败，该函数必须返回一些有用的东西。PHP 应该如何为每个内置函数和用户空间函数返回？特别是因为 PHP 无法知道，在*每个*上下文中哪个是正确的值：在某些情况下`file_exists()`应该 return `true`，在某些情况下`false`让脚本工作。当数组和对象发挥作用时，它（显然）会变得非常复杂。

另一种方法是用自定义函数覆盖函数：PHP 首先在当前名称空间中搜索不合格的函数名称，然后才使用全局名称。这意味着您可以创建`file_exists()`在每个命名空间中命名的函数。

但我最后的建议是：不要为了调试和分析而修改代码。**请改用调试器和分析器**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:24:02.063

尝试编写一个 uniqe 函数，并调用它而不是`file_exists()`例​​如：

```
<?php
function call_file_exists($file) {
$debug = true;
if($debug) {
$_SESSION["count"]++; //count all event when file_exist called
return false;
} else { //if no debug, normal function call and return the result
return file_exists($file);
}
}
?> 
```

因此，如果您打印`$_SESSION["count"];`，它将显示呼叫次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:45:42.577

安装[xdebug](http://xdebug.org/)，运行[分析器](http://xdebug.org/docs/profiler)，查看所有`file_exists`调用需要多长时间（或任何其他函数），调用频率等等。

# iphone - Does SKStoreProductViewController allow to update app?

> ID：15398886
> 
> 赞同：11
> 
> 时间：2013-03-14T00:08:53.270
> 
> 标签：iphone, itunes, storekit

Couldn't find any information regarding this... if I launch a `SKStoreProductViewController` instance from within my app, feeding it the iTunes URL of that app, does it allow for app updates? In other words I'd like to have an "Update" button within my app that shows a `SKStoreProductViewController` and allows the user to update the app from there.

This is hard to verify as `SKStoreProductViewController` is running a "sandboxed" version of the App Store, and that I'm not sure what determines whether it shows the "Open" or "Update" button.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:14:28.820

我可以验证更新确实在呈现拥有的应用程序时显示，该应用程序也安装了更新。

当然，它还会为您拥有但尚未安装的应用程序显示“安装”，并为已安装和最新的应用程序显示“打开”。

*这是在已发布的应用程序中使用生产代码，尽管我仍然无法在 Apple 的文档中找到任何验证。*

# 通过更新当前应用程序

如果您尝试更新当前打开的应用程序`SKStoreProductViewController`，它将在更高版本的 iOS 上抛出错误，因为无法安装。相反，您应该打开应用商店 URL 以强制打开应用商店。`itms-apps://itunes.apple.com/app/apple-store/id375380948?mt=8`

![在此处输入图像描述](../Images/e3de491f21f7ff162aeabf2a81d426d5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-10T17:56:35.070

这个问题已经有一段时间没有爱了，但似乎还没有完全解决。我将添加我发现的内容。

这是我进行测试的方式。我们刚刚开发了我们的应用程序的第一个版本，并且在应用程序商店中没有发布。所以我所做的是我从应用商店中的另一个应用中获取了一个捆绑 ID，将它放入我的 Xcode 8.3 中的新应用中，并测试了这个更新功能。我对以下问题感兴趣：app A 是否可以使用`SKStoreProductViewController`?

1) iPhone 上的 iOS 10.3。我已经运行了测试，它在我进行的 6 次左右的试验中都有效。发生的情况是，当我从内部进行安装时`SKStoreProductViewController`，它会使我的应用程序崩溃（不足为奇——我正在通过“相同”应用程序安装——具有相同捆绑 ID 的应用程序），但安装继续进行。您会看到通常从应用商店下载应用时看到的常规下载进度指示器。

2) iPad 上的 iOS 11（iOS11，beta 5，我相信——内部版本号是 15A5341f）。尝试更新（从应用程序 A 中更新应用程序 A）时，使用`SKStoreProductViewController`，这不起作用。按下“更新”按钮后，我收到以下警报。我已经试过好几次了。该应用程序不会崩溃。它只是不下载“更新”。我不确定这是否是典型的 iOS 测试版，或者是`SKStoreProductViewController`行为的改变。

[![应用更新失败](../Images/02b04b877d678b1763087df02c85dd8f.png)](https://i.stack.imgur.com/x9jCD.png)

`SKStoreProductViewController`3) iOS 11，同一设备：但尝试从应用程序 A 中更新应用程序 B。我运行此测试以查看问题是否是我在 beta 版本中根本无法下载。这行得通。在这种情况下，我能够进行下载。

一旦 iOS 11 发布，我将尝试报告测试 - 看看我的测试 2) 是否有效或保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T10:52:45.027

有趣的是，我对自己的应用程序进行了同样的尝试，通过检测应用程序的早期版本，我尝试在 SKStoreProductViewController 中显示我的应用程序 ID。屏幕是可见的，更新按钮在那里，但是，单击更新，并且仍然保留在应用程序的上下文中，使 SKStore 抛出错误“此时无法下载”。但是，我没有尝试在单击更新后立即退出应用程序应该可以工作

可能是因为必须先退出应用程序才能执行更新？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:58:48.907

是的，我`SKStoreProductViewController`在一个测试应用程序中实现，并加载了一个已经安装在我的设备上的应用程序。该课程显示“打开”按钮，当点击该按钮时，设备切换到另一个应用程序。我没有任何可用的应用程序更新，但类行为必须相同。随着按钮从“购买”变为“打开”，我们知道它的行为是动态的，并且应用程序更新是可能的。

![在此处输入图像描述](../Images/80a0d8df663bf639cb23f361161e6fde.png)

# python - 输入在python中不起作用

> ID：15398888
> 
> 赞同：2
> 
> 时间：2013-03-14T00:09:19.487
> 
> 标签：python

我是 Python 新手。

我在网上看一个教程，作者用了`str = input()`，然后他输入了一个句子。之后，他得到存储在 str 中的输入字符串。但是，当我在我的 python shell 中尝试`str = input()`时，它不起作用。这是错误：

```
>>> a = input()
test sentence

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    a = input()
  File "<string>", line 1
    test sentence
            ^
SyntaxError: unexpected EOF while parsing 
```

你能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:15:43.867

的含义`input`在 Python 2 和 Python 3 之间发生了变化。在 Python 2 中，`input`实际上评估了您作为 Python 代码输入的任何内容。因此，当您在 Python 中输入语法不正确的内容时，您会收到这样的错误。此外，`raw_input`它只接受任何输入并以字符串形式返回。

现在因为评估`input`并不是真的那么有用（并且 eval 是邪恶的），所以 Python 3 中的行为`input`被 Python 2 所取代`raw_input`。

您的教程的作者很可能使用了 Python 3，其`input`行为与`raw_input`Python 2 中的行为类似。如果您使用 Python 2，请`raw_input`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T00:10:03.657

`a = input() test sentence`不是有效代码。

`#`你可以用字符写评论。

编辑：你用的是什么版本的python？尝试`raw_input`而不是`input`.

`input`python 2和python 2的区别`raw_input`：

[`raw_input`](http://docs.python.org/2/library/functions.html#raw_input)：读取用户通过换行符写入的任何内容并将其存储到`str`

[`input`](http://docs.python.org/2/library/functions.html#input)：读取用户写的任何内容并**评估**该输入

`raw_input`变成`input`了python 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T00:14:01.873

因为您使用的是`input()`，所以它需要有效的 Python 代码。你得到一个`SyntaxError`因为`test sentence`不是有效的 Python。

因此，尝试使用`raw_input()`（返回一个字符串）或这样做：

```
>>> a = input()
'test sentence' # by entering it as a string, it is evaluable 
```

参考：

*   [`raw_input()`](http://docs.python.org/2/library/functions.html?highlight=raw_input#raw_input)
*   [`input()`](http://docs.python.org/2/library/functions.html?highlight=raw_input#input)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T00:16:52.320

在 Python 2 中，`raw_input(...)`将返回作为字符串输入的任何内容。`input(...)`相当于`eval(raw_input(...))`（**非常危险！！**）。`eval`将其参数评估为 Python 代码并返回结果，因此`input`需要格式正确的 Python 代码。你不应该**在**Python 2 中使用`input`or `eval`，因为它存在安全风险；改为使用`raw_input`。

在 Python 3 中，`input(...)`返回作为字符串输入的任何内容。

# sas - sas append 在宏中不起作用

> ID：15398891
> 
> 赞同：1
> 
> 时间：2013-03-14T00:09:25.313
> 
> 标签：sas

嗨，我对 SAS 中的附加推荐有疑问，

我试过

```
PROC APPEND BASE=SASUSER.mitsumjan12lag1
            DATA=SASUSER.mitsumjan12lag2;
RUN; 
```

它奏效了。但是当我在下面的宏中尝试同样的事情时，它不起作用。

```
%macro combineData(month=,part,datamonth=,datapart=);
  PROC APPEND BASE=SASUSER.mitsum&month.lag&part
              DATA=SASUSER.mitsum&datamonth.lag&datapart;
  RUN; 
%mend combineData;
%combineData(month=jan12,part=1,datamonth=jan12,datapart=2); 
```

有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:22:14.133

让我印象深刻的第一件事是你错过了一个`=`之后`part`

```
%macro combineData(month=,part,datamonth=,datapart=); 
```

位置参数（不带`=`）必须放在关键字参数（带`=`）之前。只需将`part`参数更改为关键字参数（在`=`其后添加），如下所示：

```
%macro combineData(month=,part=,datamonth=,datapart=); 
```

或者把它放在第一位，像这样：

```
%macro combineData(part, month=,datamonth=,datapart=); 
```

# css - 如何在css中制作像素完美字体？

> ID：15398893
> 
> 赞同：0
> 
> 时间：2013-03-14T00:09:34.953
> 
> 标签：css

您能否给我一些提示，如何将像素完美的字体从 PSD 转换为 HTML / CSS3？

目前我正在使用“

> 字体：300 1.231em/42px "Signika",sans-serif;

" 浏览器中的字体已经与 PSD 中的字体高度和宽度相同，但 PSD 中的字体颜色饱和度略高。

您能否帮助我提高 CSS 中字体的颜色饱和度或任何其他关于如何创建像素完美和颜色完美字体的想法？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-14T03:31:53.773

如果您尝试匹配颜色，请使用吸管在 Photoshop 中采样颜色。复制十六进制值并设置具有相同值的 CSS 属性。前任：

```
p.myText {
color: #000000; /* black */
} 
```

# internet-explorer - 为什么 `overflow-x` 会改变 Firefox 和 IE 中的行内块框的高度？

> ID：15398895
> 
> 赞同：1
> 
> 时间：2013-03-14T00:09:49.823
> 
> 标签：internet-explorer, css, firefox

看看这个 jsFiddle。

[http://jsfiddle.net/beatak/7UrGA/show/](http://jsfiddle.net/beatak/7UrGA/show/)

我想让文字看起来很直。通过更改`overflow-x:hidden`on `.boxless-select-text`，您可以看到基线移动。它不会发生在 Webkit 浏览器（Google Chrome 和 Safari）上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T01:47:26.977

Firefox 和 IE 行为是[规范](http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align)要求的行为：

> 'inline-block' 的基线是它在正常流中的最后一个行框的基线，除非它没有流入行框，或者如果它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

它没有在 WebKit 中发生的原因是因为[https://bugs.webkit.org/show_bug.cgi?id=36084](https://bugs.webkit.org/show_bug.cgi?id=36084)（他们没有修复它，因为它们具有取决于错误的各种 Apple 专有内容，据我所知）。该错误报告也有相关的规范文本和参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:20:19.943

试试这个：

```
.boxless-select-text {
    ...
    vertical-align: bottom;
} 
```

# linux - Linux command find usage confuse

> ID：15398897
> 
> 赞同：0
> 
> 时间：2013-03-14T00:10:03.210
> 
> 标签：linux, bash, find

Today when I was using the "find" command. It is a little bit confusing on the usage.

The problem: I want to count how many gz files under the main directory. However, the main dir also have sub directories. e.g. /mainDir/Dir1/1/ /mainDir/Dir2/1/2012\. Under each sub folder, there are several gz files.

I use command 1, it works fine.

First I go the the main directory:

```
ls -R . | find -name "*.gz" | wc -l 
```

However, if I use command 2, it return 0:

```
ls -R /home/user1/data1/2012/mainDir | find -name "*.gz" | wc -l 
```

What is the reason, Any one got some idea?

thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T00:12:02.350

你不需要`ls`。简单地`find . -name '*.gz' | wc -l`或`find /home/user1/data1/2012/mainDir -name '*.gz' | wc -l`。`find`命令中连字符选项之前的单词like`-name`是要搜索的目录的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:13:09.917

这个怎么样：

```
 find /home/user1/data1/2012/mainDir -name "*.gz" | wc -l 
```

这符合标准 find 语法并做你想做的事。

# java - Issue with updating table data in Swing UI view

> ID：15398899
> 
> 赞同：0
> 
> 时间：2013-03-14T00:10:13.463
> 
> 标签：java, swing

I am designing a UI in Netbeans and am having problems getting one of my tables to work. The data in it goes not get updated when I call this method:

```
public void UpdateTable() {
    DefaultTableModel TableModel = new DefaultTableModel();
    //(new Object[] { "ID", "Name", "Age" "Sex" "Address" "blah" }, 5)

    TableView.setModel(TableModel);

    for (Patient k : PatientList) {
        String TableID = String.valueOf(k.getAccountNumber());
        String TableName = k.getName();
        String TableAge = String.valueOf(k.getAge());
        String TableAddress = k.getAddress();
        String TableSex = k.getSex();
        String TablePhone = k.getPhone();

        Object[] Col = { "Name", "Code", "age", "blah", "Who", "ghg" };
        Object[] Data = { TableID, TableName, TableAge, TableAddress,
                TableSex, TablePhone };

        TableModel.addRow(Data, Col); //here
        JTableHeader header = TableView.getTableHeader();

        repaint();
    }

    System.out.println("Model Set");
    TableView.setModel(TableModel);
} 
```

The error is occurring on the line that I commented and I am totally confused as to how to solve this issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:40:57.167

从阅读[Java 文档开始](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)

使用创建“空”表模型的方法之一`DefaultTableModel`是执行类似...

```
DefaultTableModel model = new DefaultTableModel(
                                    new Object[]{"ID", "Name", "Age" "Sex" "Address" "blah"},
                                    0); 
```

这个很重要。您不希望模型中存在任何现有行。

只有两种`addRow`方法。

```
Object[] Data = { TableID, TableName, TableAge, TableAddress, TableSex, TablePhone };
model.addRow(data); 
```

摆脱第一个并且`TableView.setModel(TableModel);`因为它们没有增加任何价值`JTableHeader header = TableView.getTableHeader();``repaint();`

我强烈建议您阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以获取更多信息

# variables - 空查询传递给树枝后的symfony未定义变量

> ID：15398900
> 
> 赞同：1
> 
> 时间：2013-03-14T00:10:13.350
> 
> 标签：variables, symfony, undefined

我的存储库中有功能......当它们是一些数据时，一切都很好......但如果不是：

> 错误：出现未定义的变量 $followees_ids...

```
public function foreachFolloweesToFolloweesIds($followees)
{
    foreach ($followees as $followee) {
        $followees_ids[]=$followee['id'];
    } 

    if (empty($followees_ids)) {
        return NULL;
    } else {
        return $followees_ids;
    }
} 
```

它可以像我写的那样完成 if (empty ... bla bla 但它似乎写得不是很好......我会经常使用它，所以一些最佳实践会更好。我怎样才能更好地写它来捍卫变量未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:48:52.327

放一个

```
$followees_ids = array(); 
```

在 foreach 之前，即使您没有任何结果， $followees_ids 也不是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:34:02.490

所以基本上，你的方法返回一个数组（你称之为）followees_ids，

即使我不明白这个方法的用途，我还是建议使用[Early return](http://vocamus.net/dave/?p=1421)检查 $followees 是否包含元素。

所以，你必须在你的方法的顶部添加，

```
if (empty($followees)) {
    return array(); // or null
} 
```

**还，**

*   您必须首先初始化您的方法返回的数组。
*   当你早点回来时，你真的不需要 else 语句。

# php - htacess 重定向 - 更改 URL 的查询部分

> ID：15398902
> 
> 赞同：1
> 
> 时间：2013-03-14T00:10:40.040
> 
> 标签：php, .htaccess, mod-rewrite, redirect, url-rewriting

谷歌选择了以下网址并对其进行了排名：

*http://www.example.com/yyy/zzz-99.php?item_id=99&sort=1（item_id=99*部分不*应该*存在）。

由于我发现了错误并修复了它，我在我的 htaccess 中添加了以下行：

```
RedirectPermanent /yyy/zzz-99.php?item_id=99&sort=1 http://www.example.com/yyy/zzz-99.php?&sort=1 
```

但是，该重定向不起作用。关于我做错了什么的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:29:10.130

我认为您甚至需要 mod_rewrite 来实现单个替换，因为它包含一个查询字符串。

如果启用了 mod_rewrite，您可以在根目录的 .htaccess 文件中尝试此操作：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}   ^/yyy/zzz-99\.php  [NC]
RewriteCond %{QUERY_STRING}  item_id=99&sort=1  [NC]
RewriteRule .*        /yyy/zzz-99.php?&sort=1?  [NC,L,R=301] 
```

重定向

`http://www.example.com/yyy/zzz-99.php?item_id=99&sort=1`至

`http://www.example.com/yyy/zzz-99.php?&sort=1`

对于静默映射，从 [NC,L,R=301] 中删除 R=301。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T00:16:07.203

检查 .htaccess 文件的名称。确保它以句点开头。

```
redirect 301 /index.html http://www.domain.com/index.html 
redirect permanent /index.html http://www.domain.com/index.html 
redirectpermanent /index.html http://www.domain.com/index.html 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T00:21:06.627

在 .htaccess 中使用 301 重定向：

重定向 301 [http://www.example.com/yyy/zzz-99.php?item_id=99&sort=1](http://www.example.com/yyy/zzz-99.php?item_id=99&sort=1) [http://www.example.com/yyy/zzz-99.php?sort=1](http://www.example.com/yyy/zzz-99.php?sort=1)

重定向 301 (from) (to)

# python - 遍历 Python 列表，保留嵌入式列表的结构

> ID：15398904
> 
> 赞同：2
> 
> 时间：2013-03-14T00:11:12.560
> 
> 标签：python, list

Python新手在这里。我正在尝试对包含各种长度列表的列表执行基本功能。在这些列表中是包含我打算用作范围的元素对的元组。我想将这些元素转换为整数，然后用整数创建一个新元组，后跟`2`，它将表示迭代器。

我想要`l`：

```
l = [[('100', '200'), ('300', '400'), ('500', '600')], [('100', '200')], [('100', '200')]] 
```

被替换为`l_upd`

```
l_upd = [[(100, 200, 2), (300, 400, 2), (500, 600, 2)], [(100, 200, 2)], [(100, 200, 2)]] 
```

这显然是行不通的（而且我不知道如何将`2`放置的元素作为元素：

```
l1 = []
l2 = []

for pairs in l:
    for pair in pairs:
        l1.append(int(i[0]))
        l2.append(int(i[1]))

l_upd = zip(l1, l2) 
```

编辑：我宁愿不使用列表理解方法，因为我需要包含一个`if`,`else`语句。有些元素包含字母，有些是空的。

这些异常需要以下内容：

```
for pair in pairs:
    if pair[0].isdigit():
        addr_from.append(int(i[0]))
    elif pair[0].isalnum() is True and pair[0].isdigit is False:
        addr_from.append(re.sub(r'((?:[A-Z].*?)?(?:\d.*?)?[A-Z]+)(\d+)',r'\1%\2',pair[0]))
    else:
        addr_from.append(pair[0])
    if pair[1].isdigit():
        addr_to.append(int(i[1]) + 2)
    elif pair[1].isalnum() is True and pair[1].isdigit is False:
        addr_to.append(re.sub(r'((?:[A-Z].*?)?(?:\d.*?)?[A-Z]+)(\d+)',r'\1%\2',pair[1])) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:17:58.447

您可以编写一些递归函数来完成这项工作（这意味着该函数可以处理任何级别的嵌套列表，除非它达到最大递归深度）

```
def addtwo(lst):
   new_lst = []
   for item in lst:
     if isinstance(item, list):
       new_lst.append(addtwo(item))
     elif isinstance(item, tuple):
       new_lst.append(item + (2,))

   return new_lst

l = [[('100', '200'), ('300', '400'), ('500', '600')], [('100', '200')], [('100', '200')]]
print addtwo(l)

#[[('100', '200', 2), ('300', '400', 2), ('500', '600', 2)], [('100', '200', 2)], [('100', '200', 2)]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T00:18:58.090

使用列表推导：

```
>>> [[tuple(map(int, pair)) + (2,) for pair in pairs] for pairs in l]
[[(100, 200, 2), (300, 400, 2), (500, 600, 2)], [(100, 200, 2)], [(100, 200, 2)]] 
```

或者没有地图：

```
>>> [[(int(a), int(b), 2) for a, b in pairs] for pairs in l]
[[(100, 200, 2), (300, 400, 2), (500, 600, 2)], [(100, 200, 2)], [(100, 200, 2)]] 
```

### 编辑

即使进一步检查，您仍然可以使用列表推导。我假设您添加到问题中的 if/else 部分应该应用于每一对，然后生成的元组将是`(addr_from, addr_to, 2)`，对吗？

```
def processPair(a, b):
    if a.isdigit():
        a = int(a)
    elif a.isalnum():
        a = re.sub(r'((?:[A-Z].*?)?(?:\d.*?)?[A-Z]+)(\d+)', r'\1%\2', a)
    if b.isdigit():
        b = int(b) + 2
    elif b.isalnum():
        b = re.sub(r'((?:[A-Z].*?)?(?:\d.*?)?[A-Z]+)(\d+)', r'\1%\2', b)
    return (a, b, 2) 
```

在这里，我定义了一个处理元组的函数，`(a, b)`就像您在问题中所做的那样。请注意，我已将其更改为仅修改变量的值并返回一个完成的元组（添加了 2），而不是将其附加到某个全局列表中。

我也简化了一点。`a.isdigit() is True`与`a.isdigit()`已经返回布尔值相同。与 相同`a.isdigit() == False`，与 相同`not a.isdigit()`。在这种情况下，您还可以删除多余的检查。核对后`a.isdigit()`，`if`就不需要再核对它的反面了`elif`；它保证是假的，因为您之前已经检查过它。

话虽如此，当您说函数时，您可以再次使用列表推导来获取输出。当然，对于您的示例`l`，这有点无聊：

```
>>> [[processPair(*pair) for pair in pairs] for pairs in l]
[[(100, 202, 2), (300, 402, 2), (500, 602, 2)], [(100, 202, 2)], [(100, 202, 2)]] 
```

# android - 当旧活动不再存在时，PendingIntent.send 抛出异常

> ID：15398905
> 
> 赞同：1
> 
> 时间：2013-03-14T00:11:15.233
> 
> 标签：android, android-intent, android-pendingintent

我有一个 Activity 类，它正在调用 IntentService 类来做一些工作

```
Intent intent = new Intent(this, NetworkHandler.class);

PendingIntent pendingIntent = createPendingResult(1, intent, PendingIntent.FLAG_ONE_SHOT);
intent.putExtra(NetworkHandler.REFRESH_CONTENT, NetworkHandler.GRO);
intent.putExtra("pendingIntent", pendingIntent);

startService(intent); 
```

IntentService 完成后，我触发对 Activity 的回调

```
pendingIntent.send(); 
```

但是，如果用户在 IntentService 仍在后台运行时按下后退按钮，当待处理的意图尝试触发回调时，我会收到 NullPointException。

处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:13:28.203

我最终为这个问题使用了一个私有的 BroadcastReceiver 类。

```
private class RefreshStatusReceiver extends BroadcastReceiver {
    private RefreshStatusReceiver() {

    }

    @Override
    public void onReceive(Context context, Intent intent) {
        int requestType = intent.getBundleExtra("bundle").getInt(NetworkHandler.REQUEST_TYPE);

        if (requestType == NetworkHandler.FLY) {
            configHandler();
        }
    }
} 
```

并在我的 onPause 和 onResume 方法中注册和注销它们

```
@Override
protected void onResume() {
    super.onResume();
    mRefreshStatusReceiver = new RefreshStatusReceiver();
    IntentFilter mStatusIntentFilter = new IntentFilter(NetworkHandler.REFRESH_COMPLETED_ACTION);
    mStatusIntentFilter.addCategory(Intent.CATEGORY_DEFAULT);
    LocalBroadcastManager.getInstance(this).registerReceiver(mRefreshStatusReceiver, mStatusIntentFilter);
}

@Override
protected void onPause() {
    super.onPause();
    LocalBroadcastManager.getInstance(this).unregisterReceiver(mRefreshStatusReceiver);
} 
```

在我的 IntentService 我开始回调如下

```
 Bundle bundle = new Bundle();
    bundle.putInt(CONNECTION_STATE, connectionState);
    bundle.putInt(REQUEST_TYPE, requestType);
    Intent localIntent = new Intent(REFRESH_COMPLETED_ACTION).putExtra("bundle",bundle);
    LocalBroadcastManager.getInstance(this).sendBroadcast(localIntent); 
```

我不能使用 Otto 总线类，因为它仅在调用者和被调用者都在主线程上时才有效（如果你想要不同的线程，请使用 greenbot 的 Eventbus）。此外，回调是在不同的上下文中调用的，这不会让我从原始活动的上下文等中烤面包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:13:58.153

`createPendingResult()`，虽然很容易，但确实假设原件`Activity`仍然存在 - 它在那里支持`startActivityForResult()`. 我建议使用从服务到活动的其他一些通信路径，例如：

*   `LocalBroadcastManager`
*   [奥托](http://square.github.com/otto/)
*   `Messenger`

# php - PHP preg_replace() 的问题

> ID：15398909
> 
> 赞同：1
> 
> 时间：2013-03-14T00:11:49.523
> 
> 标签：php, regex, html-parsing

问这个问题我感觉像个业余爱好者，但我为此苦苦挣扎了很长时间，无法解决问题。

我正在制作一个包含嵌入式 YouTube 视频和富文本编辑器的论坛。我需要一个函数将 HTML 标签转换为 BBCode，另一个将 BBCode 转换回 HTML。

**BBCode 转 HTML**

```
$message = (get message from database);
$A = '/\[youtube](.*?)\[\/youtube\]/is';
$B = '<object type="application/x-shockwave-flash" data="http://www.youtube.com/v/$1" width="425" height="350"><param name="movie" value="http://www.youtube.com/v/$1"><param name="wmode" value="transparent"></object>';
preg_replace($A, $B, $message); 
```

我需要一个脚本来反转这个过程，将 HTML 转换为 BBCode。如果有人可以帮助我，我将非常感激，或者可能会建议一种更简单的方法（如果存在），或者甚至是可以提供对该问题的一些见解的链接。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:16:04.687

试试这个

```
$message = 'Some text
<object type="application/x-shockwave-flash" data="http://www.youtube.com/v/abcdefgh" width="425" height="350"><param name="movie" value="http://www.youtube.com/v/abcdefgh"><param name="wmode" value="transparent"></object>
More text
<object type="application/x-shockwave-flash" data="http://www.youtube.com/v/abcdefgh" width="425" height="350"><param name="movie" value="http://www.youtube.com/v/abcdefgh"><param name="wmode" value="transparent"></object>
Even more text';

echo preg_replace("/\<object.*?youtube\.com\/v\/(.*?)\".*?object\>/ims", "[youtube]$1[/youtube]", $message); 
```

# c# - 运行 Task<> 时出现 InvalidCast 错误

> ID：15398912
> 
> 赞同：0
> 
> 时间：2013-03-14T00:11:56.643
> 
> 标签：c#, .net, task

我遇到了一个问题，我编写了一个程序来抓取内部网站的数据。当前按顺序运行，但由于执行此操作的时间太长，我现在需要同时运行它们。我已经开始阅读将它们作为任务运行是最好的方法。所以示例代码看起来像这样。

我的抓取函数返回一个数据集

```
Task<DataSet> task = new Task<DataSet>(() => Scraper.Website1(IE_Object, dataset));
task.Start();

DataSet web1_ds = task.Result; 
```

当函数`Scraper.Website1()`运行时，它会在尝试在输入字段中键入文本时遇到 InvalidCast 异常。

当不作为任务运行时，此方法工作得很好。我哪里错了？

编辑：

错误发生在第一个 _ie.TextField().TypeText();

```
if (!Globals.CheckLogin(_ie))
{
    CLogger.WriteLog(ELogLevel.DEBUG, "Scraper: " + "Website1(): " + "Logging   Into Site");
    //enter login details
    _ie.TextField("_ctl0_dnnLOGIN_txtUsername").TypeText("username");
    _ie.TextField("_ctl0_dnnLOGIN_txtPassword").TypeText("password");
    _ie.Link("_ctl0_dnnLOGIN_btnLogin").Click();
    //confirm login
    _ie.WaitUntilContainsText("Logout");
    CLogger.WriteLog(ELogLevel.DEBUG, "Scrappy: " + "Synnex(): " + "Logged In");
} 
```

# css - 即使使用 box-sizing:border-box，Textarea 也会溢出 div

> ID：15398913
> 
> 赞同：0
> 
> 时间：2013-03-14T00:12:00.917
> 
> 标签：css, html, textarea

我正在尝试扩展 textarea 以适应其父 div 的 100%，但我在 IE9 中遇到问题。以下是整个页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style type="text/css">
    #wrap {
        width: 50%;
        height: 100px;
        background:#fee; border:3px double #f99;
    }

    textarea {
        background:#efe;
        width: 100%;
        height: 100%;
        padding: 10px;
        border:0; margin:0;
        box-sizing:border-box;
        overflow: auto;
        display: block;    
    }
    </style>
</head>
<body>
    <div id="wrap"><textarea>hello world</textarea></div>
</body>
</html> 
```

这张图片显示了结果。 [结果 http://polybemani.net/uploader/files/1/cssboxsizing.png](http://polybemani.net/uploader/files/1/cssboxsizing.png)

它在 Chrome 中显示良好，但在 IE9 和 IE10 中没有。我不明白的是，使用完全相同的代码，它在 jsfiddle 中运行良好。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:28:29.083

答案：

添加

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

到 head 标签解决了这个问题。显然 IE 处于怪癖模式。你学的越多！

希望这有助于下一个人遇到这个问题！

完整来源：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title></title>
    <style type="text/css">
        #wrap {
            width: 50%;
            height: 100px;
            background:#fee;
            border: 3px solid red;
        }

        textarea {
            background:#efe;
            padding: 10px;
            border:0; 
            margin:0;
            box-sizing:border-box;
            overflow: auto;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="wrap"><textarea>hello world</textarea></div>
</body>
</html> 
```

# php - PHP 和导入 pylab

> ID：15398920
> 
> 赞同：0
> 
> 时间：2013-03-14T00:12:38.880
> 
> 标签：php, macos, import, matplotlib, fgets

我有一个调用 python 程序的 PHP 脚本。这是php脚本：

```
<?php
    $last_line = popen('/Library/Frameworks/Python.framework/Versions/Current/bin/python test.py', 'r');
    $results = fgets($last_line);
    print $results;
?> 
```

这是 test.py 的内容：

```
test.py:

    import numpy as np
    from matplotlib.patches import Ellipse
    # import matplotlib.pyplot as plt
    # from matplotlib.pyplot import figure, show
    # import pylab 

    print "Hello World!" 
```

现在，这工作正常，我得到“Hello World！” 在浏览器中。但是，如果我取消注释任何导入（即，将 matplotlib.pyplot 导入为 plt，将 matplotlib.pyplot 导入为 plt 或导入 pylab），我不会从 PHP 获得结果。如果有人可以帮助我，那就太好了，因为我需要 Python 中的所有绘图功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T05:31:04.177

当通过 php 执行 python 脚本时，matplotlib 部分没有被执行。然后我只在我的 .py 文件中包含以下语句..

```
import os
os.environ[ 'MPLCONFIGDIR' ] = '/tmp/'

import matplotlib

matplotlib.use('agg') 
```

它奏效了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:57:18.433

感谢 Jan Kuiken 试用！经过艰苦的努力，我终于弄明白了。首先按照[此页面](http://texnological.blogspot.com/2013/01/how-to-execute-python-matplolib-pylab.html)中的建议，我将以下内容添加到`test.py`：

```
import os
os.environ[ 'MPLCONFIGDIR' ] = '/tmp/'
import matplotlib
matplotlib.use('agg') 
```

并导入`pylab`（即取消注释）。

这在命令行中有效，但在浏览器中无效。然后我做了一个*passthru*并在浏览器中得到以下错误：

```
dyld: Symbol not found: __cg_jpeg_resync_to_restart
Referenced from: /System/Library/Frameworks/ApplicationServices...
Expected in: /Applications/MAMP/Library/lib/libjpeg.62.dylib 
```

我发现这应该是 ImageMagick 的问题，并遵循以下页面中的建议： [Getting MAMP 1.9 to work with ImageMagick](http://mikepuchol.com/2010/08/26/getting-mamp-1-9-to-work-with-image-magick-imagick-so-and-other-flora/)

正确安装后，我能够继续运行 python 代码。python代码有一个命令来绘制和保存图形，我猜在这种情况下需要ImageMagick！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:42:28.020

没有完整的答案，但也许有帮助：

假设您使用的是 Mac OS，我已将您的`.php`文件更改为：

```
<br><br>==== Start ====<br><br>

<?php
    error_reporting(E_ALL);

    $handle = popen('python test.py 2>&1', 'r');
    while (($buffer = fgets($handle, 4096)) !== false) {
        echo $buffer."<br>";
    }
    pclose($handle);

?>

<br><br>==== End ====<br><br> 
```

并将`.py`文件发送到：

```
import numpy as np
import matplotlib.pyplot as plt

print "Hello World!" 
```

将`2>&1`程序的错误输出重定向到标准输出，这对于调试目的很有用。

浏览器页面上的结果包含：

> **_get_configdir**中的文件“/Library/Python/2.6/site-packages/matplotlib-0.91.1-py2.6-macosx-10.6-universal.egg/matplotlib/init .py”，第 403 行引发 RuntimeError（“创建失败%s/.matplotlib; 考虑将 MPLCONFIGDIR 设置为 matplotlib 配置数据的可写目录"%h) RuntimeError: Failed to create /Library/WebServer/.matplotlib; 考虑将 MPLCONFIGDIR 设置为 matplotlib 配置数据的可写目录

比我以 root 身份做的：

```
mkdir /Library/WebServer/.matplotlib
chown _www /Library/WebServer/.matplotlib/ 
```

并且浏览器中的页面包含为最后一个错误：

> 文件“/Library/Python/2.6/site-packages/matplotlib-0.91.1-py2.6-macosx-10.6-universal.egg/matplotlib/numerix/ma/init .py”，第 16 行，来自**numpy.core** .ma import * ImportError: 没有名为 ma 的模块

嗯，这仍然令人失望，但是您的里程可能会有所不同，问题可能与网络服务器用户（_www）的环境/权限有关。

# cocos2d-iphone - Cocos2d - 第二次运行场景不安排更新

> ID：15398926
> 
> 赞同：0
> 
> 时间：2013-03-14T00:13:06.267
> 
> 标签：cocos2d-iphone, cclayer

从 UIKit ViewController 我这样做是为了开始游戏：

```
if (director.runningScene == nil)
    {
        [director runWithScene:[MyGameLayer scene]];
    }
    [director startAnimation]; 
```

MyGameLayer 看起来像这样：

```
+(id) scene {
    CCScene *scene = [CCScene node];
    MyGameLayer* layer = [MyGameLayer node];
    [scene addChild:layer z:0 tag:GameSceneLayerTagGame];

    return scene;
}

-(id) init {
    if ((self=[super init]))
    {
        NSLog(@"init!");
        self.isTouchEnabled = YES;

        [self initPhysics];

        [self scheduleUpdate];
    }
    return self;
} 
```

我第一次玩游戏，一切正常。`-(void) update: (ccTime) dt`被调用，因为它应该。如果我退出游戏并执行此操作：

```
CCDirectorIOS* director = (CCDirectorIOS*)[CCDirector sharedDirector];
    [director stopAnimation];
    [director end]; 
```

然后再次玩游戏，`-(void) update: (ccTime) dt`没有被调用，即使我知道`-init()`正在被调用。游戏出现在屏幕上，但更新计划第二次不起作用。什么会导致 Cocos2d 不安排更新，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:32:21.870

您是否覆盖（实现）`onEnter*`/`onExit*`方法之一？如果是这样，请确保调用超级实现，否则调度和触摸输入可能不起作用。

**更新：** 除此之外，尽量不要调用 [director end]，因为它会完全关闭 cocos2d，这是已知的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:17:19.280

假设您正在做您正在做的事情以防止导演在后台工作时以 4 fps 更新，您可能应该尝试再次启动导演。

话虽如此，在您的 applicationDidBecomeActive 中，添加以下代码

```
[[CCDirector sharedDirector] stopAnimation]; // call this to make sure you don't start a second display link!
[[CCDirector sharedDirector] resume];
[[CCDirector sharedDirector] startAnimation]; 
```

摘自：[如何在 cocos2d 游戏中实现暂停/恢复？](https://stackoverflow.com/questions/3082718/how-to-implement-pause-resume-in-cocos2d-game)

如果我不正确，请告诉我您要如何处理您的主管电话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T00:12:23.303

终于想通了。在游戏中打开带有退出按钮的菜单时，我正在暂停游戏，如下所示：

```
[[self gameLayer] pause]; 
```

因此，当我开始一个新游戏时，Cocos2d 仍然处于暂停状态，即使场景和图层被释放并且我正在创建一个新的 glView。

如果我使用它，它会起作用：

```
[[self gameLayer] pauseSchedulerAndActions]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T08:09:48.543

当您使用此代码“暂停”游戏时：

```
[[CCDirector sharedDirector]pause]; 
```

在推送任何场景之前，您还必须在重启或菜单代码块中“恢复”您的导演：

```
[[CCDirector sharedDirector]resume]; 
```

# java - Request、Session、ServletContext中属性的区别

> ID：15398930
> 
> 赞同：14
> 
> 时间：2013-03-14T00:13:23.083
> 
> 标签：java, jsp, servlets, web

我无法理解这 3 种设置属性的方式之间的区别：

```
// String as attribute of request
req.setAttribute("name", "Sluggo");

// Integer as attribute of session
req.getSession().setAttribute("age", 10);

// Date as attribute of context
getServletContext().setAttribute("today", new Date()); 
```

1.  有什么区别？
2.  你应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T13:40:00.333

> **ServletContext**属性是通过该方法绑定到上下文中的对象，该对象可用于该上下文中的`ServletContext.setAttribute()`所有 Servlet（因此是 JSP），或通过该方法可用于其他上下文`getContext()`。根据定义，上下文属性本地存在于定义它们的 VM 中。因此，它们在分布式应用程序上不可用。
> 
> **会话**属性绑定到会话，作为向一组相关 HTTP 请求提供状态的一种手段。会话属性仅对加入会话的那些 Servlet 可用。在分布式场景中，不同的 JVM 也无法使用它们。`HttpSessionBindingListener`当对象绑定/解除绑定到实现接口的 Session 时，可以通知对象 。
> 
> **请求**属性被绑定到一个特定的请求对象，并且它们一直持续到请求被解析或者在它不断地从 Servlet 分派到 Servlet 时。它们更多地用作通过`RequestDispatcher`接口（因为您不能添加参数...）和容器之间的 Servlet 之间的通信通道。当您必须在信息提供者和绑定到特定请求且不再需要可用的信息表示层 (JSP) 之间提供设置信息时，请求属性在 Web 应用程序中非常有用，这通常发生在没有严格控制的会话中战略。
> 
> **总之**，我们可以说：
> 
> *   **上下文**属性适用于基础设施，例如共享连接池。
> *   **会话**属性用于上下文信息，例如用户标识。
> *   **请求**属性用于特定的请求信息，例如查询结果。

*资料来源：[Servlets 面试问题，作者 Krishna Srinivasan @ javabeat.net](http://javabeat.net/servlets-interview-questions/)*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-14T00:16:44.810

这三个有不同的范围：

*   请求属性在该请求/响应周期的生命周期内有效

*   该会话生命周期的会话属性

*   `ServletContext`跨越 servlet 上下文，它一直存在，直到上下文被破坏。

# sql - 如何根据不同的列值获取 COUNT 值？

> ID：15398932
> 
> 赞同：0
> 
> 时间：2013-03-14T00:13:41.413
> 
> 标签：sql, db2

这是我的查询：

```
Select DISTINCT YEAR(THEDELIVERY) as YR,
(Select COUNT(*) from CS462MCMT.vehiclev1 where THEMAKE='Audi') as "No of Audis",
(Select COUNT(*) from CS462MCMT.vehiclev1  where THEMAKE='Volvo') as "No of Volvos",
(Select COUNT(*) from CS462MCMT.vehiclev1  where THEMAKE='Porche') as "No of Porsches",
(Select COUNT(*) from CS462MCMT.vehiclev1  where THEMAKE <> 'Audi' and THEMAKE <> 'Volvo' and THEMAKE <> 'Porche') as "No of Other"
from CS462MCMT.vehiclev1; 
```

第一列显示了 2008 年和 2007 年之后的两个不同年份值。我试图根据两个不同年份值获取表中每个品牌汽车的计数。我希望我的输出如下所示（它目前在 2008 年和 2007 年具有相同的计数值）：

```
Year No of Audis No of Volvos etc.
---- ----------- ------------
2008 1700        3000
2007  300        100 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:17:16.203

`GROUP BY`与条件`SUM`（`SUM`with ）一起使用`CASE`：

```
SELECT YEAR(THEDELIVERY) AS "Year",
    SUM(CASE THEMAKE WHEN 'Audi' THEN 1 ELSE 0 END) AS "No of Audis",
    SUM(CASE THEMAKE WHEN 'Volvo' THEN 1 ELSE 0 END) AS "No of Volvos",
    SUM(CASE THEMAKE WHEN 'Porsche' THEN 1 ELSE 0 END) AS "No of Porsches",
    SUM(CASE WHEN THEMAKE NOT IN ('Audi','Volvo','Porsche') THEN 1 ELSE 0 END) 
        AS "No of Other"
FROM CS462MCMT.vehiclev1
GROUP BY YEAR(THEDELIVERY) 
```

# html - 居中没有宽度的 div 和流畅的响应式设计

> ID：15398933
> 
> 赞同：0
> 
> 时间：2013-03-14T00:13:45.433
> 
> 标签：html, css, responsive-design

我正在尝试使用 HTML 和 CSS 进行流畅的响应式设计。在这里查看布局和代码：http: **[//jsfiddle.net/arp6c/](http://jsfiddle.net/arp6c/)**

我想在网页的主要内容区域内使用上述布局。

1.  我已经使用`display:table`with`margin:auto`来使 div 居中而不指定宽度。这似乎工作正常。有没有更好的方法来实现这一点，或者我所做的很好？

2.  你会注意到在我的 CSS 中，左右部分被分配了一个固定的宽度。如果我尝试改用百分比，它似乎效果不佳。我需要做什么来确保整个布局是响应式的？

3.  在响应式设计中，我是否需要确保中间图像也随着浏览器的大小调整大小？我该如何解决这个问题？

# sql-server - SQL Server - 查询缺少命名空间的 XML 列

> ID：15398936
> 
> 赞同：1
> 
> 时间：2013-03-14T00:13:58.437
> 
> 标签：sql-server, xml, namespaces

这个问题看起来真的很恶心。我在名为“消息”的列中有以下小 XML，我想查询它。我遇到的问题是“ClaimData”元素。如您所见，它将其命名空间设置为空字符串。

```
<DataExchange xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://schemas.abc.com/library/DataExchange">
  <Data>
      <ClaimData xmlns="">
          <CurrentClaimNumber>TEST0000319001</CurrentClaimNumber>
      </ClaimData>
  </Data>
</DataExchange> 
```

下面的查询返回 XML 列的 NULL 值，因为 ClaimData 元素使用空命名空间，我不知道如何在 XML 列的查询中指出这一点。

有人可以给出一个工作（并希望经过测试）示例，说明如何在 XML 消息列中查询“CurrentClaimNumber”元素（它是“ClaimData”的子元素）？

非常非常感谢。

```
WITH XMLNAMESPACES (
     'http://www.w3.org/2001/XMLSchema' AS "xsd",
    'http://www.w3.org/2001/XMLSchema-instance' AS "xsi",
     DEFAULT 'http://schemas.rising.com/library/DataExchange'
) SELECT [StoredMessageID],
    Message.value('(/DataExchange/Data/ClaimData/CurrentClaimNumber)[1]', 'CHAR(750)')
  FROM [DataExchange].[dbo].[MessageStorage] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:56:29.360

将默认命名空间分配给前缀怎么样，这样您就可以在没有前缀的情况下使用空命名空间？这可能是唯一的选择：

```
WITH XMLNAMESPACES (
     'http://www.w3.org/2001/XMLSchema' AS "xsd",
    'http://www.w3.org/2001/XMLSchema-instance' AS "xsi",
     'http://schemas.abc.com/library/DataExchange' AS "de"
) SELECT [StoredMessageID],
    Message.value('(/de:DataExchange/de:Data/ClaimData/CurrentClaimNumber)[1]', 
                                                                         'CHAR(750)')
  FROM [DataExchange].[dbo].[MessageStorage] 
```

验证如下：

```
insert into MessageStorage values('
<DataExchange
   xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://schemas.abc.com/library/DataExchange">
  <Data>
      <ClaimData xmlns="">
          <CurrentClaimNumber>TEST0000319001</CurrentClaimNumber>
      </ClaimData>
  </Data>
</DataExchange>');

WITH XMLNAMESPACES (
     'http://www.w3.org/2001/XMLSchema' AS "xsd",
    'http://www.w3.org/2001/XMLSchema-instance' AS "xsi",
     'http://schemas.abc.com/library/DataExchange' AS "de"
) SELECT [StoredMessageID],
    Message.value('(/de:DataExchange/de:Data/ClaimData/CurrentClaimNumber)[1]', 
                                                                         'CHAR(750)')
  FROM [dbo].[MessageStorage] 
```

结果：

```
 1     TEST0000319001 
```

# css - 如何创建一个水平和垂直拉伸为单个图像的图像精灵？

> ID：15398939
> 
> 赞同：4
> 
> 时间：2013-03-14T00:14:25.510
> 
> 标签：css, sprite, css-sprites

我正在尝试为一个可以垂直和水平拉伸同时还具有悬停状态的框制作图像精灵。我通常创建一个仅垂直或水平拉伸的精灵。在这种情况下，我会让必须无限拉伸的盒子部分接触图像的顶部和底部以垂直循环或接触左侧和右侧以水平拉伸，但我坚持为两者制作一个精灵。

这是我正在使用的内容，它将包含链接链接列表 (<ul>)，这些链接链接将使用悬停状态的背景颜色。

![雪碧](../Images/7af9c24e4688673731b808464e7487a3.png)

**左侧：**常规状态。**右侧：**悬停状态

我不知道我是否可以只使用我现在拥有的 CSS 来完成我想要完成的事情，或者我是否必须将图像分解成单个文件的小部分。这是我为一侧进行成像的方式。

![切片示例](../Images/2bae8c54c8a82ff5ac85e171e0214601.png)

这是我在两个不同文件中的最终结果。仍然不完全高兴，因为我希望这个精灵是独立的，但也许我太挑剔了？

![在此处输入图像描述](../Images/90ae8f58767a0e473313a6330e372a7b.png) ![在此处输入图像描述](../Images/c284a25fd1e5653e2ead9dcb0829b1ae.png)

**问题：**

1.  我是否可以通过使用大多数标准浏览器支持的 CSS 代码来实现我的目标，这意味着不需要绝对最新版本的 Firefox、Chrome、Safari？我希望这是高度兼容的。
2.  如果问题 1 为否，那么如何为这个示例创建精灵布局？
3.  如果圆角的实现不明显，您能否提供示例 CSS（伪代码也可以）？

注意：我知道现在框中现在有列表项，但是想象一个菜单，当您将鼠标悬停在第一个或最后一个项目上时，角落以及页眉/页脚也应该变成白色以悬停在状态上。我可能可以自己解决这部分问题，但我只想提一下，以便精灵设计不缺少此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:04:48.193

这是对您的问题 #1 的回答：

不完全是，但非常接近它在 CSS 中是可以实现的。签出这个[小提琴](http://jsfiddle.net/r9Tec/)

有关兼容性，请参阅以下页面：

1.  [http://caniuse.com/border-radius](http://caniuse.com/border-radius)
2.  [http://caniuse.com/css-boxshadow](http://caniuse.com/css-boxshadow)
3.  [http://caniuse.com/css-gencontent](http://caniuse.com/css-gencontent)

总之，适用于大多数浏览器，除了：

1.  在 IE8 及以下版本中，缺少阴影和圆角边框
2.  在 IE7 及更低版本上，箭头和悬停状态也丢失了，所以只是一个框。:(

如果您不必支持IE7，我认为这是可用的。

CSS 代码：

```
.box {
    background-color: #ccc;
    display: inline-block;
    padding: 10px 20px;
    border-radius: 5px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    position: relative;
}
.box:hover {
    background: white;
}
.box:hover:after {    
    border-bottom: 20px solid white;
}
.box:before {
    content: ' ';
    display: block;
    position: absolute;
    top: -6px;
    right: 26px;
    width: 8px;
    height: 6px;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
}
.box:after {
    content: ' ';
    display: block;
    position: absolute;
    top: -10px;
    right: 10px;
    border-bottom: 20px solid #ccc;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:05:51.977

经过更多研究，我找到了答案。不幸的是，我的问题没有真正的答案，我也不打算让这个问题成为一个棘手的问题。尽管如此，我们开始吧。

答案：

1）不。这是不可能的。

2）注释框应该从宽度和高度无限延伸，这使得使用 1 个精灵是不可能的。如果这确实是需要，那么我必须按照 Jared Farrish 所说的链接来处理 2 个背景图像。

相反，我发现的最佳解决方案是将第一张图像和带有角的精灵组合在一起。想象一个精灵如下：

从左到右，但侧栏的顺序是右栏、左栏、右悬停栏、左悬停栏，即从顶部到底部。

其次抓住两个指针并将它们放在将放置评论框顶部的栏的右侧。这只是让以后用 CSS 对它们进行编程变得更容易。

最后，抓住我第一个图形中的两个评论框，并将悬停状态置于正常状态之下。我开始意识到，即使我说我希望盒子无限期地伸展，但这并不完全正确。永远不会出现盒子是 300,000 像素宽的情况，所以我只是将它们拉伸到 900 像素，因为这是我的内容的宽度，并且这些盒子的最大宽度为 900 像素，高度不受限制。

整个图像大约有 4kb，我能够实现让 1 张图像包含精灵。我不需要将角分别放在精灵的另一部分，因为我只是参考它们在评论气泡中的位置。:)

# string - 位置更改时如何从字符串中提取文本？(Visual Basic)

> ID：15398942
> 
> 赞同：0
> 
> 时间：2013-03-14T00:14:42.457
> 
> 标签：string, crystal-reports, report

我有一个字符串列表，其中有一个我希望提取的工作编号。这个数字的格式和位置总是不同的。

EG（粗体的工作编号）。

*   JC Co#：1 联系人：**20202。**月份：2012 年 1 月 1 日上午 12:00
*   JC Co#：1 联系人：**321。**月份：2012 年 1 月 1 日上午 12:00
*   JC Co#：1 联系人：**20093。**月份：2012 年 1 月 1 日上午 12:00
*   JC Co#：1 份工作：**OOSJ。**月份：2012 年 1 月 1 日 12:00AM
*   JC Co#：1 份工作：**O333J。**月份：2012 年 1 月 1 日 12:00AM
*   JC Co#：1 份工作：**323J。**ACO：2012 年 1 月 1 日上午 12:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:24:22.037

根据给出的示例，我建议以下策略：

1.  找到第二个冒号
2.  查找第二个冒号后的第一个句号/句点
3.  选择这两个之间的文本

我目前无法访问（任何变体）VB，但在 C# 中它看起来像：

```
var text = "JC Co#: 1 Job: OOSJ. Month: Jan 1 2012 12:00AM";
var firstColonPosition = text.IndexOf(":");
var secondColonPosition = text.IndexOf(":", firstColonPosition + 1);
var firstPeriodPosition = text.IndexOf(".", secondColonPosition);
var jobNumberText = text.Substring(secondColonPosition + 1, firstPeriodPosition - secondColonPosition - 1); 
```

我不确定间距，所以你可能想要修剪结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:09:49.977

使用可以将 substr 与 instr 一起使用。就像你的字段值是 `asdfg - itsnoteasy - whattod`

你不需要 -`whattodo`从现场 `substr(field,0, instr(field,'-',1,2)-1)`

看链接，

[http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=17842](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=17842) [http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=10231](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=10231)

# ruby-on-rails - Rails 3 - 控制器中的关联验证？

> ID：15398943
> 
> 赞同：0
> 
> 时间：2013-03-14T00:14:48.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我有一个带有用户模型、信用卡模型和付款模型的 Rails 3 程序。User has_many CreditCards，CreditCard has_many Payments。

在我的应用程序中，当用户进行新付款时，他会从他的卡列表中选择他想用来支付的信用卡。我想在代码中添加一个额外的验证，以确保提交给 Payment.create() 函数的 credit_card_id 实际上是当前用户拥有的。

感觉验证必须在控制器中进行，对吧？或者是否有处理这种情况的最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:22:21.397

添加付款验证。付款很可能与用户相关联，`belongs_to`因此我建议添加以下验证

```
# payment.rb
belongs_to :user
validate :validates_credit_card_belongs_to_user

private

def validates_credit_card_belongs_to_user
  unless user.credit_card.where(id: credit_card_id).exists?
    errors.add(:credit_card_id, 'is not owned by this user')
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:38:34.437

您肯定希望在您的模型中进行此验证。通常认为 Rails 的最佳实践是让[控制器保持苗条](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)并拥有胖模型。

假设付款属于用户并且付款属于信用卡（我假设这是因为您的付款上有一个 credit_card_id 字段），您可以执行类似的操作。

```
Class Payment < ActiveRecord::Base    
  belongs_to :user
  belongs_to :credit_card

  validate :credit_card_belongs_to_user

  def credit_card_belongs_to_user
    errors.add(:credit_card, 'does not belong to you') unless user == credit_card.user
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:42:12.963

您还可以在 PaymentsController 中获取这样的信用卡 [在之前的过滤器中]

@credit_card = current_user.credit_cards.find(params[:credit_card_id])

进而

@payment = @credit_card.payments.build(params[:payment])

这样您就可以确定它是 current_user 拥有的 credit_card。

# apache - cgi 查询上的 RedirectMatch 不起作用

> ID：15398946
> 
> 赞同：0
> 
> 时间：2013-03-14T00:15:01.397
> 
> 标签：apache, mod-alias

我正在尝试将 URL 重定向到符合某些条件的 cgi 脚本。即我不想将每个查询重定向到该脚本，只是那些具有特定参数的查询。但我无法让它工作。这是我的重定向：

```
RedirectMatch /cgi-bin/Pwebrecon.cgi?BBID=(.*) http://adelaide.hosted.exlibrisgroup.com:1701/primo_library/libweb/action/dlDisplay.do?vid=SUA\&docId=SUA$1 
```

我已经多次成功地使用了 RedirectMatch，但以前从未使用过 cgi 脚本。任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T23:52:59.673

`mod_alias`只处理 URL 的路径部分，而不是查询。

下面的指令将重定向`http://example.com/old.html?name=value`到`http://example.com/new.html?name=value`. 标记路径的`$`结尾，而不是 URL 的结尾。

```
RedirectMatch permanent ^/old\.html$ /new.html 
```

`mod_rewrite`是处理（即重写）查询所必需的。

# c - 警告：由于 gcc 4.1.2 中的数据类型范围有限，比较总是错误的

> ID：15398947
> 
> 赞同：6
> 
> 时间：2013-03-14T00:15:09.140
> 
> 标签：c, linux, gcc

我遇到了来自 gcc 4.1.2 的以下警告：

```
warning: comparison is always false due to limited range of data type 
```

相关的 C 代码如下：

```
if ( unlikely(count < 0) ) BUG(); 
```

其中“计数”是无符号的。

我试图禁用警告，因为我不允许修改源代码：

```
-Wno-type-limits 
```

但似乎 gcc 4.1.2 不支持它。

```
cc1: error: unrecognized command line option "-Wno-type-limits" 
```

还有其他方法可以消除此警告吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T00:21:46.127

一个`unsigned`值永远不会是负数——因此是警告。与其说是“不可能”，不如说是“不可能”。

这通常表明某种代码中存在错误；编写代码时需要一个可以允许负值的类型，但该类型不允许负值。因此，由于预期不匹配，代码很可能会出现异常。

请注意，在某些机器上，plain`char`是有符号的，而在其他机器上是无符号的（它是一种不同于两者的类型`signed char`，`unsigned char`即使它的值范围与一个或另一个重叠）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-10T07:32:26.907

options to fix this warning:

1.  remove condition which alway true

2.  **best:** remove condition which alway true + add [static_assert](http://en.cppreference.com/w/cpp/language/static_assert) to ensure type is unsigned. (for C version of static_assert look [here](https://stackoverflow.com/a/809465/751932))

3.  for gcc prior 4.3: remove compiler option: -Wextra

4.  for gcc 4.3+ add option: -Wno-type-limits

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T04:08:08.143

根据源代码的年龄，在编译器不像现在的 gcc 那样类型安全的时代，它可以以防御性的方式编写。

该警告看起来像是 -Wextra（又名 -W）警告选项集的一部分，因此如果您想要额外的警告，那将是其中之一。我个人使用-Wall，信不信由你不包括“额外”的东西。你会认为“全部”会包括“额外”，但我想不是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T11:33:03.677

比较中使用的变量被声明为 8 位无符号整数。当我将其更改为 32 位无符号时，警告被删除。旧：uint8_t 变量 = 0；修复：uint32_t 变量 = 0；

# android - 在 Android 上使用 CouchDB 时一定需要 SD 卡吗

> ID：15398952
> 
> 赞同：1
> 
> 时间：2013-03-14T00:15:36.657
> 
> 标签：android, couchdb, couchbase

我正在尝试在 Android 手机版本 >=2.2 上保存一些 json 数据，以供以后查询和离线使用。我发现 CouchDB 可以在 Android 上使用。但是有些帖子说，必须安装 SD 卡才能使用 CouchDB，例如：

[在 Android 上使用 CouchDB 有什么要求？](https://stackoverflow.com/questions/8399070/what-are-requirements-to-use-couchdb-on-android)[是否可以将 couchdb 直接复制到 android 设备上的 sdcard](https://stackoverflow.com/questions/9214545/is-it-possible-to-copy-couchdb-directly-to-sdcard-on-android-devices?rq=1) ？

并非我们所有的客户都在他们的 Android 手机上安装了 SD 卡，所以我想知道是否仍然需要在 Android 上使用 CouchDB，是否可以只使用本地存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:20:38.127

> 并非我们所有的客户都在他们的 Android 手机上安装了 SD 卡，所以我想知道是否仍然需要在 Android 上使用 CouchDB，是否可以只使用本地存储？

所以它取决于更多的因素，首先也是最重要的一个是数据库的大小。如果您的数据库将具有更大的大小，例如 10-100+ MB，则将 db 复制到内部存储或例如到 assets 文件夹并从那里读取不是很好和有效的。

我认为没有人不能给你正确的答案，但这取决于你会选择哪种方法。

还有另一种方法，例如您可以解析`JSON`然后将其序列化为具有较小大小的二进制文件，将其保存到内部存储/ sd卡中，如果您想读取，只需反序列化并获取数据。

# ios - 未在 UItableViewCell 中设置图像：

> ID：15398953
> 
> 赞同：0
> 
> 时间：2013-03-14T00:15:38.697
> 
> 标签：ios, uitableview, reloaddata, sdwebimage

我正在尝试将图像设置为 UITableViewCell 但除非滚动它才会显示。

如果重复，我深表歉意。但我尝试了 setNeedsDiplay、reloadRowsinIndexPAth 和所有其他重新加载方法。我正在使用 SDWebImageCache 下载图像和[RayWenderlich 的示例](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)来创建水平 Tableviewcells。我正在粘贴我的代码供您参考。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"ArticleCell";
__block ArticleCell_iPad *cell = (ArticleCell_iPad *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[ArticleCell_iPad alloc] initWithFrame:CGRectMake(0, 0, kCellWidth_iPad, kCellHeight_iPad)];
}
if ([self.articles count] == 0) {
    return cell;
}
__block Offer *offer = [self.articles objectAtIndex:indexPath.row];
dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(concurrentQueue, ^{
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 201, 201)];
    NSURL *imageURL = [NSURL URLWithString: [NSString stringWithFormat:@"%@", offer.image.url]];
    [imageView setImageWithURL:imageURL];
    dispatch_async(dispatch_get_main_queue(), ^{
        [cell.thumbnail setImage:imageView.image];
        cell.titleLabel.text = offer.title;
        cell.priceLabel.text = [NSString stringWithFormat:@"$%@", offer.regularprice];
    });
});
dispatch_release(concurrentQueue);
cell.selectionStyle = UITableViewCellSelectionStyleNone;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:48:48.180

与 UI 相关的所有内容都需要在主线程内处理，因此将

```
[imageView setImageWithURL:imageURL]; 
```

此代码位于 dispatch_get_main_queue() 块内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:13:49.217

回答我自己的问题。

我摆脱了中间的 UIImageview。将图像直接设置为缩略图就可以了。

# c++ - lParam 或 WCHAR[] 有问题

> ID：15398954
> 
> 赞同：0
> 
> 时间：2013-03-14T00:15:42.187
> 
> 标签：c++, arrays, string, pointers, lparam

首先，这个函数被多次调用。应该注意的是 wString[] 确实包含字符常量 '\n'。

```
void D2DResources::PutToLog(WCHAR wString[])
{
    int strLen=wcslen(wString);
    int logLen=wcslen(log);

    if(strLen+logLen>=MaxLogSize)
        wcsncpy(log, log, logLen-strLen);

    wcscat (log, wString);

    int nLines=0;

    for(int x=0; x<wcslen(log); x++)
    {
        if(log[x]=='\n')
        {
            nLines++;
            if(nLines>5)
            {
                log[x]='\0';
            }
        }
    }

    SendMessage (m_hWnd, WM_PAINT, NULL, (LPARAM)nLines);
} 
```

最后，发送一条 WM_PAINT 消息，而 nLines 应为非零，因为日志包含多个 '\n'。我的 WndProc 接收消息并处理它。

```
case WM_PAINT:
    {
        pD2DResources->OnRender((int)lParam);
        ValidateRect(hWnd, NULL);
    }
    break; 
```

之后，使用（假定的）非零 int 作为 lParam 调用 OnRender。

```
void D2DResources::OnRender(int nLogLines)
{
    D2D1_SIZE_F screenSize = pCurrentScreen->GetSize();

    D2D1_SIZE_F rTSize = pRT->GetSize();

    pRT->BeginDraw();

    pRT->DrawBitmap(
        pCurrentScreen,
        D2D1::RectF(0.0f, 0.0f, screenSize.width, screenSize.height)
        );

    pRT->DrawText(
        log,
        ARRAYSIZE(log) - 1,
        pTextFormat,
        D2D1::RectF(0, rTSize.height - ((nLogLines*textSize)+textSize) , rTSize.width, rTSize.height),
        pWhiteBrush
        );

    pRT->EndDraw();
} 
```

由于某种原因，在 OnRender 函数中，nLogLines 的值为 0。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:27:11.777

“怎么了？”

您正在处理的 WM_PAINT 很可能不是源自您的 SendMessage

一般建议：不要发送或发布 WM_PAINT，让系统生成该消息（当您从线程的消息队列中检索消息并且窗口需要重新绘制时，它会生成该消息）

# asp.net - 想在类上使用 XmlElement 属性？

> ID：15398955
> 
> 赞同：3
> 
> 时间：2013-03-14T00:15:42.060
> 
> 标签：asp.net, xml, serialization

我有以下课程：

```
[XmlElement("email-address")]
    public class EmailAddress
    {
        public string address { get; set; }
        public string location { get; set; }
    } 
```

XmlElement 属性在这里有效，但我确实想要这种行为 - 这可能吗？将此类的名称在 XML 中序列化为`email-address`而不是`EmailAddress`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T00:32:10.100

如果您想更改类的序列化方式，我认为您正在寻找[XmlTypeAttribute 。](http://msdn.microsoft.com/en-us/library/0th2hysa%28v=vs.85%29.aspx)

# css - css三重边框？

> ID：15398958
> 
> 赞同：0
> 
> 时间：2013-03-14T00:15:51.853
> 
> 标签：css, responsive-design, border

您好，我正在尝试使用 css 创建三重边框。现在我得到的是两个边框，但第二个边框并没有`div.container#main`完全绕过 element()。

我一直在关注这篇[博文](http://jaspreetchahal.org/pure-css-double-and-triple-borders/)。[JSF](http://goo.gl/3R4Qd)中。

任何关于让边框完全绕过元素的帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T00:37:03.020

所以本质上问题是你使用绝对位置并从磨损元素计算东西。

当某些东西被绝对定位时，只有在指定高度或元素有内容时才会增加高度。在这种情况下，一种解决方法是同时分配 a`top`和`bottom`value，这实际上会使元素扩展。你忘记了`bottom`价值。添加它给我们这个：

[http://jsfiddle.net/J3e9R/2/](http://jsfiddle.net/J3e9R/2/)

但是，您现在会注意到该元素位于视口的底部。这是因为没有定位的父级（相对、绝对、静态），它默认将顶级元素作为定位的上下文。

为了解决这个问题，我们可以添加一个额外的包装元素并为其提供相对位置，或者我们可以将边框样式移动到您的`div.row`; 无论哪种方式，技术都是相同的，只取决于您是否可以添加另一个包装器，或者它是否`div.row`适合您的情况。所以这给出了这个：

[http://jsfiddle.net/J3e9R/3/](http://jsfiddle.net/J3e9R/3/)

现在你可以看到我们实际上让内边框与盒子的尺寸协同工作。但是现在我们的位置已经关闭了。这是因为我们不是计算我们从外部元素的偏移量，而是`#main`从内向外工作，所以我们需要反转我们的测量：

[http://jsfiddle.net/J3e9R/4/](http://jsfiddle.net/J3e9R/4/)

好的，现在我们又回到了原始盒子外边缘的订单，所以我们只需要将它带到我们外边界的中间，所以我们只需将尺寸更改为大约一半，最后给我们我们想要的想：

[http://jsfiddle.net/J3e9R/1/](http://jsfiddle.net/J3e9R/1/)

# d3.js - 更新时的过渡圈和工具提示

> ID：15398962
> 
> 赞同：1
> 
> 时间：2013-03-14T00:16:09.327
> 
> 标签：d3.js, tooltip, geometry

我有这段代码可以将圆圈附加到折线图上的点上。

```
svg.selectAll("dot")
    .data(newdata)
   .enter()
    .append("circle")
    .attr("class", "dot")
    .attr("r", 4)
    .attr("cx", function(d) { return x(newdate(d.key)); })
    .attr("cy", function(d) { return y(d.values.mean); })
    .attr("fill", "#8cc13f")
    .on("mouseover", function(d) {
        div.transition()
            .duration(200)
            .style("opacity", .9);    
        div.html("Date taken:" + "  " + newdate(d.key) + "<br/>" + "<br/>" +
                 "Average Reading:" + "  " + d.values.mean + "<br/>" + "<br/>" +
                 "Parameter:" +  "  " + selectedParameter)
           .style("left", (d3.event.pageX) + "px")
           .style("top", (d3.event.pageY - 28) + "px");
    })
    .on("mouseout", function(d) {
        div.transition()
            .duration(500)
            .style("opacity", 0);
    }); 
```

..并在我使用以下内容更新图表时尝试转换这些圆圈：

```
var circle = svg.selectAll("dot")
    .data(newdata);

circle
    .enter()
    .append("circle")
    .data(newdata)
    .transition()
    .duration(750)
    .attr("cx", function(d) { return x(newdate(d.key)); })
    .attr("cy", function(d) { return y(d.values.mean); })
    .attr("r", 4)
    .attr("fill", "#8cc13f");

circle
    .exit()
    .transition()
    .duration(750)
    .attr('opacity',0)
    .remove(); 
```

随着新圈子的加入，加入正在发挥作用——但由于某种原因，旧圈子没有被删除？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:40:48.270

这里的问题是 D3 不知道如何将您的第一个数据绑定中的数据匹配到您的第二个数据（默认情况下它只使用数据数组的索引）向您的数据绑定添加一个键函数应该可以解决这个问题，它定义了 D3 将如何匹配数据。有关数据键的更多信息，请参阅 Mike Bostock 出色的[Object Constancy](http://bost.ocks.org/mike/constancy/#key-functions)教程。

# node.js - 如何让 nginx/1.3.14 与 nodejs 和 socket.io 一起作为代理工作

> ID：15398963
> 
> 赞同：0
> 
> 时间：2013-03-14T00:16:12.353
> 
> 标签：node.js, sockets, nginx, socket.io

我有一个 nginx 服务器为 webapp 提供我所有的静态内容。该应用程序使用在 node.js 中实现的 websockets unsing socket.io。node.js 后端正在侦听端口 8000。

如果我在静态交付的文档中通过端口 8000 包含 socket-io.js 文件，一切正常，但我已经阅读了一些关于使用 nginx 作为代理处理端口 8000 内部的内容

所以我#ve构建了一个像这样的配置：

```
server {

 server_name domain.com;
 access_log /var/log/nginx/domaim.com.log;
 location / {
    root /home/app/static/;
 }

 location /socket/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
 }
} 
```

然后可以通过 domain.com/socket/ 访问 socket.io（收到消息 Welcome to socket.io）。静态内容也已交付但我找不到任何方法通过端口 80 加载“socket.io/socket.io.js”文件。

这可能以干净的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:58:56.103

你可以使用`socket.connect(url, {resource:'socket'})`

默认资源是`socket.io`

[https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

# android-annotations - Android注释@UiThread竞争条件？

> ID：15398964
> 
> 赞同：2
> 
> 时间：2013-03-14T00:16:20.230
> 
> 标签：android-annotations

```
@UiThread
void foo() {
   ...some animations...
};

@UiThread
void bar() {
   xyz();
};

@UiThread
void xyz() {
   foo();
}; 
```

如果我在我的应用程序中使用许多这些嵌套的@UiThread 方法，我会遇到麻烦吗？

我可以因此获得一些比赛条件吗？

它只会影响性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:56:24.667

`@UIThread`将生成一个使用 a`Handler`执行代码的方法，如下所示：

```
private Handler handler_ = new Handler();
public void bar() {
    handler_.post(new Runnable() {
        ...
    }
} 
```

如果我们仔细查看[Handler 的 javadoc](http://developer.android.com/reference/android/os/Handler.html)，我们可以看到这一段：

> Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与单个线程和该线程的消息队列相关联。当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列——从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息中出来时执行它们队列。

处理程序是在类实例化时创建的，因此它将链接到主线程。并且由于对带注释的方法的每次调用`@UIThread`都将排入此处理程序的队列，因此每个方法将一个接一个地执行。

所以你不应该在这些方法中有任何竞争条件。由于这些方法将在主线程上执行，因此您必须只进行 UI 处理。

我希望我能回答你所有的问题。

# python - 如何在 python sysloghandler 中设置自定义应用程序名称

> ID：15398965
> 
> 赞同：8
> 
> 时间：2013-03-14T00:16:26.253
> 
> 标签：python, logging, formatting

我正在使用 python sysloghander 将日志发送到集中式系统日志服务器。该代码正在运行，但我在自定义格式时遇到了一些问题。下面是我写的代码。

```
#!/usr/bin/python

import logging
from logging.handlers import SysLogHandler
import subprocess

hostname = subprocess.check_output(['hostname', '-f'])
logger = logging.getLogger()
logger.setLevel(logging.INFO)
syslog = SysLogHandler(address=('log.central.log', 514))
formatter = logging.Formatter('%(asctime)s %(name)s: %(levelname)s %(message)s', '%b %e %H:%M:%S')
syslog.setFormatter(formatter)
logger.addHandler(syslog)
logger.info("My Message") 
```

是否可以在日志格式化程序中添加自定义标签/变量。我想在它们中添加主机名和 app_name，因为我已经设置了中央日志服务器以基于主机名和 app_name 创建日志文件。

app_name 可以是任何东西，比如我可以将 app_name 设置为“mysql_communication_log”或“wsgi_log”，然后在中央服务器上创建具有相同名称的单独文件。

我正在寻找的是类似的东西

```
formatter = logging.Formatter('%(asctime)s %(hostname)s %(app_name)s: %(message)s', '%b %e %H:%M:%S') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T19:57:35.190

您可以使用`$syslogfacility-text`（请参阅[文档](http://www.rsyslog.com/doc/rsyslog_conf_filter.html)）-它允许您通过谓词轻松过滤日志消息。

所以，在客户端，它会像：

```
hostname = "stage-server"
formatter = logging.Formatter('{}:%(asctime)s %(name)s: %(levelname)s %(message)s'.format(hostname), '%b %e %H:%M:%S') 
```

在你身上`rsyslog.conf`：

```
if $syslogfacility-text == 'stage-server' then /var/log/stage-server/my.log 
```

希望有帮助。

# python - 从列表中获取项目的函数

> ID：15398969
> 
> 赞同：0
> 
> 时间：2013-03-14T00:16:53.037
> 
> 标签：python, python-3.x

是否有从列表中获取项目的功能？例如`getitem(list, index)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T00:19:49.850

使用[`operator.getitem`](http://docs.python.org/2/library/operator.html#operator.getitem)：

```
import operator
operator.getitem(l, index) 
```

例子：

```
>>> operator.getitem([1,2,3], 1)
2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T00:20:35.403

我相信，尽管其他答案是正确的，但他可能需要使用可调用来检索它们。为此，这有效：

```
>>> from operator import itemgetter
>>> get1 = itemgetter(1)
>>> get1([0,1,2,3,4,5])
1
>>> get1('abcdefg')
'b' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:17:39.737

你不需要它使用这个：

```
lVals[index] 
```

或者自己做：

```
def itemAtPos(lVals, idx): 
    if ifx < len(lVals):
        return lVals[idx] 
```

# javascript - 一行文字

> ID：15398970
> 
> 赞同：0
> 
> 时间：2013-03-14T00:16:56.630
> 
> 标签：javascript, html

我真的很少有编程经验，但是，我愿意学习 - 我找到了倒计时时钟的代码，但文本没有按照我想要的方式排列。我希望它是：

```
 Only
       **1905**
Days Until June 1, 2018 
```

然后将其全部居中。它居中，但计数器的最后一部分会自行堆叠。这是我正在使用的代码：

```
<center>
    <font color="Turquoise"size="5">
    <b>
    Only
    <font color="red"size="6">
    <SCRIPT LANGUAGE = "JavaScript">
        var now = new Date();
        // set this value to the countdown date.
        var then = new Date("June 1, 2018");
        var gap = then.getTime() - now.getTime();
        gap = Math.floor(gap / (1000 * 60 * 60 * 24));
        document.write(gap); 
    </SCRIPT>
    <font color="turquoise"size="5">
    Days Until 
    <font color="6600FF"size="5">
    <br>June 1, 2018 </b>
</center>
</font> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:21:45.577

您发现的那段代码显然很古老，但问题在于`<br>`该行的标签：

```
<br>June 1, 2018 </b> 
```

这是一个 HTML 换行符。删除它，线路不会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:46:10.680

尝试这个：

```
<div style='text-align: center'>
    <div>Only</div>
    <div><span>**</span><span id='countdown'></span><span>**</span></div>
    <div><span>Days Until </span><span id='targetDate'></span></div>
</div>
<script type='text/javascript'>
    var countNode, targetDateNode, now, then, gap, monthNames;
monthNames = [];
monthNames.push('January');
monthNames.push('February');
monthNames.push('March');
monthNames.push('April');
monthNames.push('May');
monthNames.push('June');
monthNames.push('July');
monthNames.push('August');
monthNames.push('September');
monthNames.push('October');
monthNames.push('November');
monthNames.push('December');
countNode = document.getElementById('countdown');
targetDateNode = document.getElementById('targetDate');

now = new Date();
// set this value to the countdown date.
then = new Date('June 1, 2018');
gap = then.getTime() - now.getTime();
gap = Math.floor(gap / (1000 * 60 * 60 * 24));
countNode.innerHTML = gap;
targetDateNode.innerHTML = monthNames[then.getMonth()] + ' ' + then.getDay() + ', ' + then.getFullYear();
</script> 
```

# php - Wordpress 类别列表 2 列

> ID：15398971
> 
> 赞同：0
> 
> 时间：2013-03-14T00:16:57.500
> 
> 标签：php, wordpress, list, categories

我正在尝试在 2 列中显示我的类别和该类别下的帖子。

我确实尝试过用 CSS 解决它，但结果并不好。

这是我的代码：

```
<?php
    $cat_id = get_query_var('cat');
    $catlist = get_categories('hide_empty=0&child_of=' . $cat_id);

    foreach($catlist as $categories_item) {
        echo "<div class='half'>";
        $cat_title = get_field('category_title' , 'category_'  . $categories_item->term_id);
        echo "<ol>";
        echo '<h3><a href="' . get_category_link( $categories_item->term_id ) . '" ' . '>' . $cat_title .'</a> </h3> ';
        query_posts(array(
        'cat' => $categories_item->term_id,
        'posts_per_page' => 9999,
        'order' => 'ASC', //order ascending
        'orderby' => 'title' //order by title
        ));

    if (have_posts()) : while (have_posts()) : the_post(); ?>
    <li><a href="<?php the_permalink();?>">
      <?php the_title(); ?>
      </a></li>
    <?php endwhile; endif; ?>
    <?php echo "</ol>"; echo "</div>"; ?>
    <?php } ?> 
```

有任何想法吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:41:31.720

当您连续有 2 个类别时，请在您的 php 代码上添加一行，`<?php echo "<div class='clear'></div>"; ?>`然后使用计数器。`<?php echo "</ol>"; echo "</div>"; ?>`

您的最后四行将如下所示：

```
<?php
$cat_id = get_query_var('cat');
$catlist = get_categories('hide_empty=0&child_of=' . $cat_id);

$counter = 0; // set counter initial value
foreach($catlist as $categories_item) {
    $counter++; // counter increment
    echo "<div class='half'>";
    $cat_title = get_field('category_title' , 'category_'  . $categories_item->term_id);
    echo "<ol>";
    echo '<h3><a href="' . get_category_link( $categories_item->term_id ) . '" ' . '>' . $cat_title .'</a> </h3> ';
    query_posts(array(
    'cat' => $categories_item->term_id,
    'posts_per_page' => 9999,
    'order' => 'ASC', //order ascending
    'orderby' => 'title' //order by title
    ));

if (have_posts()) : while (have_posts()) : the_post(); ?>
<li><a href="<?php the_permalink();?>">
  <?php the_title(); ?>
  </a></li>
<?php endwhile; endif; ?>
<?php echo "</ol>"; echo "</div>"; ?>

<?php 
if($counter == 2){ // check is there two columns in a row
    echo "<div class='clear'></div>"; // this div will clear float here by css
    $counter = 0; // now reset the counter
}
?>
<?php } ?> 
```

现在将以下 css 代码添加到您的 css 文件中

```
.clear {
    clear: both;
} 
```

请检查。它可能会帮助你。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T18:56:33.760

我自己的非常简单但有效的解决方案

```
<div class="row-fluid">

            <?php
            $counter = 0;
            $counter2 = 0;

            $temp = $wp_query;
            $wp_query = null;
            $wp_query = new WP_Query();
            $wp_query->query('showposts=10&cat=2'.'&paged='.$paged);
            if ($wp_query->have_posts()) : while ($wp_query->have_posts()) : $wp_query->the_post(); ?>

            <!-- starting the loop -->
            <div class="span6">

                <p><?php the_title(); ?></p>

                <div class="row-fluid">
                    <div class="span5">
                        <?php $url = wp_get_attachment_url( get_post_thumbnail_id($post->ID, 'thumbnail') ); ?>
                        <p><img src="<?php echo $url; ?>" /></p>
                    </div>
                    <div class="span7">
                        <?php the_excerpt(); ?>
                        <p><a class="btn" href="<?php the_permalink(); ?>">more &raquo;</a></p>
                    </div>
                </div>

            </div>

            <?php
            $postperpage = 10;
            $counter++;
            $counter2++;
            if ($counter == 2 && $counter2 <= $postperpage-1) {
                echo '</div><div class="row-fluid">';
            $counter = 0;
            }

            if ($counter2 == $postperpage) {
            echo '</div> <!-- the last row -->';
            }
            ?>

            <!-- loop end -->
            <?php endwhile; ?> 
```

# javascript - Firefox 19 和 RequestAnimationFrame 不工作

> ID：15398973
> 
> 赞同：0
> 
> 时间：2013-03-14T00:17:06.270
> 
> 标签：javascript, firefox, animation, setinterval, requestanimationframe

我试图让这个演示在 Firefox 19 上运行，但看起来 RequestAnimationFrame 没有被正确调用。

[http://awardwinningfjords.com/projects/sequence/apple.html](http://awardwinningfjords.com/projects/sequence/apple.html)

所有其他浏览器和版本都可以正常工作，仅在 FF19 (Mac) 上

以前有人有这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:25:18.627

供应商对此功能有其特定的前缀。有些作品有或没有它。

所以对于 Firefox，你必须使用`mozRequestAnimationFrame`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:45:30.327

它的调用很好，但是调用发生在新图像有机会加载之前，因此每次您取消正在进行的图像加载并开始一个同样没有机会完成的新图像时。

您可能需要预先缓存图像。

# html - html 或 css - 垂直 hr 标签

> ID：15398985
> 
> 赞同：0
> 
> 时间：2013-03-14T00:18:20.853
> 
> 标签：html, css

我想在我的网站的侧面和中间有一条垂直线。是否有 `<hr />`可以做到这一点的标签，如果有，请以 css 或 html 形式提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:26:56.510

“在您希望线条出现在下一个标记的位置周围放置一个 div，并使用 CSS 对其进行样式设置：”来自[如何在 HTML 中制作垂直线](https://stackoverflow.com/questions/3148415/how-to-make-a-vertical-line)

```
 <div class="verticalLine">

some other content

</div> 
```

在 CSS 中：

```
.verticalLine {
    border-left:thick solid #ff0000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:25:40.240

一些现代浏览器支持`<hr style="display:inline" />`生成一个小的竖线，但一般来说`|`效果更好。

如果您想要一条跨越多行文本的行，则应使用边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:25:46.227

没有垂直版本的`<hr/>`. 您可以做的是使用 CSS 和样式`border-right`或`border-left`创建“垂直线”。这是一篇关于如何设置边框样式的综合文章：http: [//net.tutsplus.com/tutorials/html-css-techniques/css-refreshers-borders/](http://net.tutsplus.com/tutorials/html-css-techniques/css-refreshers-borders/)

# vb.net - 将事件添加到按钮数组

> ID：15398988
> 
> 赞同：0
> 
> 时间：2013-03-14T00:18:31.323
> 
> 标签：vb.net, visual-studio-2010, visual-studio

我在 vb.net 中动态创建了一些按钮，但我无法创建单击事件处理程序。

这是我的代码：

```
dim b(10) 
dim x=0
b(x) = New Button
b(x).width = 100
b(x).height = 25
b(x).location = New Point(500, pos + 24)
b(x).visible = True
b(x).text = "Remove"

AddHandler b(x).Click, AddressOf remove_click 
```

当我尝试编译“单击”不是“对象”事件时出现以下错误。

```
Public Sub remove_click(sender As Object, e As EventArgs)
' onclick code
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:21:06.210

问题是您从未为本地提供类型，`b`因此它被定义为`Object`. 该类型`Object`没有 Click 事件，因此`AddHandler`失败。`Button`您需要将其声明为值数组

```
dim b(10) as Button 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:25:21.323

您应该始终假设编译器是正确的，然后尝试发现这意味着什么。它说'Click'不是'Object'的事件，所以你必须引用*对象*.Click，这意味着它`b(x)`是一个对象，这意味着它`b`是一个对象数组。

你以为它是一个数组`Button`。

所以，

```
Dim b(10) As Button 
```

# apache-flex - Flex Air 应用程序 SQLStatement 返回 null

> ID：15398990
> 
> 赞同：0
> 
> 时间：2013-03-14T00:18:34.817
> 
> 标签：apache-flex, air, null, adobe

我的 SQL 语句查询返回 null。让我发疯的是我可以让 loadSchema 工作并打印出每个表的所有表和列。但我无法成功执行一个简单的查询。任何想法为什么会发生这种情况？

```
public function db():void {
    conn = new SQLConnection(); 
    conn.addEventListener(SQLEvent.OPEN, openHandler);
    dbFile = File.applicationStorageDirectory.resolvePath("DB.sql");
    conn.open(dbFile);
}

private function openHandler(event:SQLEvent):void { 
    trace("The database was created successfully"); 
    makeTables(); 
    trace("Make Tables Called");
} 
```

制作表格方法：

```
private function makeTables():void{
        var createGraduateTable:SQLStatement = new SQLStatement();
        createGraduateTable.sqlConnection = conn; 
        createGraduateTable.text = graduateLoader.data;

        var createGraduateAgeTable:SQLStatement = new SQLStatement();
        createGraduateAgeTable.sqlConnection = conn; 
        createGraduateAgeTable.text = graduateAgeLoader.data;

        var createMarathonTable:SQLStatement = new SQLStatement();
        createMarathonTable.sqlConnection = conn; 
        createMarathonTable.text = marathonLoader.data;

        try { 
            createGraduateTable.execute();
            createGraduateAgeTable.execute(); 
            createMarathonTable.execute();
            trace("Tables Created");
            // Describe Database
            conn.loadSchema(SQLTableSchema);
            for each(var SQLTableStmt:SQLTableSchema in conn.getSchemaResult().tables){
                trace("Table: " + SQLTableStmt.name );
                for each ( var SQLColm:SQLColumnSchema in SQLTableStmt.columns){
                    trace("Column name: " + SQLColm.name);
                }
            }
            queryDB();

        }catch(error:SQLError){
            trace("Error message:", error.message); 
            trace("Details:", error.details);  
        }
    } 
```

我尝试查询 using 侦听器并尝试 catch 块，但没有任何效果。

查询数据库方法：

```
public function queryDB(tableName:String = null):void{
        var query:SQLStatement = new SQLStatement(); 
        query.sqlConnection = conn;
        query.text = "SELECT * FROM GRADUATE";
              //query.addEventListener(SQLEvent.RESULT, queryResult); 
              //query.addEventListener(SQLErrorEvent.ERROR, queryError); 
        try{
            query.execute(); 
            var result:SQLResult = query.getResult(); 
            if (result != null){
                trace("Results: " +  result.data);  
            }else{
                trace("Result NULL");
            }

        }catch(e:SQLError){

        }
    }

    private function queryResult(e:SQLEvent):void{
        var result:SQLResult = e.target.getResult();
        trace("Results: " +  result.data);
        conn.close();
    }

    private function queryError(e:SQLErrorEvent):void{
        trace("Error message:", e.error.message);
        trace("Query Error: " + e.error.details);
    } 
```

就像我说的，奇怪的是，当我执行此操作时，它会正确打印出所有表名和列，但 result.data 始终为空。任何帮助是极大的赞赏。

这是用于创建 GRADUATE_AGE 表的graduate_age.sql 文件的前20 行。

```
-- DROP TABLE IF EXISTS GRADUATE_AGE; 
CREATE TABLE IF NOT EXISTS GRADUATE_AGE (
    GPA REAL,
    CREDITS_ATTEMPTED REAL,
    CREDITS_PASSED REAL,
    CURRENT_CREDITS REAL,
    AGE REAL,
    GENDER TEXT
);
INSERT INTO GRADUATE_AGE VALUES ( 2.7, 138.5, 138.5, 7, 25.74, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.57, 146, 78, 9, 22.09, 'F' );
INSERT INTO GRADUATE_AGE VALUES ( 3.63, 131, 131, 14, 23.21, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.86, 152, 119, 14, 26.56, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.03, 115.5, 115.5, 15, 26.3, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 2.25, 39, 39, 16, 23.8, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 0, 48, 0, 14, 22.45, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.02, 63.5, 51.5, 14.5, 25.4, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.14, 40, 40, 14, 32.93, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 2.73, 62, 62, 14, 21.35, 'M' );
INSERT INTO GRADUATE_AGE VALUES ( 3.39, 144, 81, 17, 24.32, 'M' ); 
```

作为对@crooksy88 的回应，我用 insert() 方法调用替换了 queryDB() 方法调用，并给出了以下声明：

```
private function insert():void{
        trace("Attempt Insert");
        var insert:SQLStatement = new SQLStatement(); 
        insert.sqlConnection = conn;
        var insertStr:String = "";
        insertStr += "INSERT INTO GRADUATE_AGE (GPA, CREDITS_ATTEMPTED, CREDITS_PASSED, CURRENT_CREDITS, AGE, GENDER) VALUES ( 2.7, 138.5, 138.5, 7, 25.74, 'M' );";
        insertStr += "INSERT INTO GRADUATE_AGE (GPA, CREDITS_ATTEMPTED, CREDITS_PASSED, CURRENT_CREDITS, AGE, GENDER) VALUES ( 3.57, 146, 78, 9, 22.09, 'F' );";
        insert.text = insertStr;
        insert.addEventListener(SQLEvent.RESULT, queryResult); 
        insert.addEventListener(SQLErrorEvent.ERROR, queryError);
        insert.execute();
    }

private function insertResult(e:SQLEvent):void{
        trace("Insert Complete: " + e.target.text);
        queryDB();
    } 
```

我的结果仍然为空。快把我逼疯了！它一定是愚蠢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:44:44.823

`GRADUATE_AGE`插入而不是插入可能会更好`GRADUATE`；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:49:37.573

也许要走的路是首先使用一个非常简单的 SQL 语句来创建表并插入一条记录。如果可行，您可以在此基础上进行构建。

我会首先尝试从您的 SQL 语句中删除所有下划线，并可能将您的表和列命名为小写，以便您可以更轻松地将它们与 SQL 关键字区分开来。

此外，您的 SQL 语句中的一些内容似乎不正确。

您正在创建一个名为 GRADUATE_AGE 的表，但正在尝试插入 GRADUATE。

```
CREATE TABLE IF NOT EXISTS graduate (id INTEGER PRIMARY KEY AUTOINCREMENT, gap REAL, creditsAttempted REAL, creditsPassed REAL, currentCredits REAL, age INTEGER, gender TEXT)

INSERT INTO graduate (gap, creditsAttempted, creditsPassed, currentCredits, age, gender) VALUES (2.7, 138.5, 138.5, 7, 25.74, 'M') 
```

# .net - 我可以在 Azure 上为常规网站设置 SSL 吗？（不是 WCF 或 MVC）

> ID：15398995
> 
> 赞同：0
> 
> 时间：2013-03-14T00:19:10.837
> 
> 标签：.net, ssl, azure, https

问题说明了一切：我可以在 Azure 上为常规 .net 网站设置 SSL 吗？（不是 WCF 或 MVC）？

我看到很多文章告诉我更新服务配置文件等。但我在常规网站上没有这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T20:54:02.990

SSL with Custom Domains 现在可以预览，如[网站](http://www.windowsazure.com/en-us/services/web-sites/)概述中所述。有关其状态的详细信息，请参阅有关重复问题的[此答案。](https://stackoverflow.com/a/16892150/145173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:33:07.247

如果您使用的是 Azure 网站，则当前不支持 SSL。据说那是“即将推出”所以不幸的是你必须等待。

查看这篇文章了解更多信息： [Windows Azure 网站的 SSL 证书](https://stackoverflow.com/questions/11766225/ssl-certificate-with-windows-azure-website)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T13:31:33.647

在正确支持自定义 SSL 证书之前，此 SSL 转发器可以提供帮助。

[http://www.bradygaster.com/running-ssl-with-windows-azure-web-sites](http://www.bradygaster.com/running-ssl-with-windows-azure-web-sites)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T00:34:35.597

您不能在 Azure 网站上使用 SSL，但可以在 Azure 内的 Web 角色上使用它们。