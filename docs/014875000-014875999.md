# StackOverflow 问答 14875000-14875999

# haskell - 在基本单子中将代理与不同的 EitherT 组合起来

> ID：14875000
> 
> 赞同：4
> 
> 时间：2013-02-14T12:34:06.067
> 
> 标签：haskell, proxies, haskell-pipes

例如，拥有...

```
consumer :: Proxy p => () -> Consumer p a (EitherT String IO) ()
producer :: Proxy p => () -> Producer p a (EitherT ByteString IO) r 
```

...我如何使这项工作？

```
session :: EitherT ByteString (EitherT String IO) ()
session = runProxy $ producer >-> consumer 
```

**注意**：我读过[*Mixing Base Monads*](http://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html#g:8) in `Control.Proxy.Tutorial`。我得到了第一个示例，但无法理解人为的示例。更多的例子，不是那么明显但不是那么做作，可能会阐明如何使用`hoist`和`lift`匹配基本单子的任何组合。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T15:09:34.183

假设你有一个单子变压器堆栈，比如基础单子`MT1 MT2 MT3 M a`在哪里`M`。

使用`lift`，您可以在左侧添加一个新的 monad 转换器。它可以是任何变压器，所以我们用 来表示它`?`。

`lift :: MT1 MT2 MT3 M a -> ? MT1 MT2 MT3 M a`

使用`hoist`，您可以操作最左侧元素右侧的 monad 堆栈。怎么操作？例如通过提供`lift`：

`hoist lift :: MT1 MT2 MT3 M a -> MT1 ? MT2 MT3 M a`

使用 和 的组合`hoist`，`lift`您可以在 monad 转换器堆栈中的任何位置插入这些“通配符”。

`hoist (hoist lift) :: MT1 MT2 MT3 M a -> MT1 MT2 ? MT3 M a`

`hoist (hoist (hoist lift)) :: MT1 MT2 MT3 M a -> MT1 MT2 MT3 ? M a`

此技术可用于均衡您示例中的两个 monad 堆栈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T17:14:52.023

实际上有两种解决方案。

第一个解决方案是 Daniel Wagner 提出的：修改两个基本单子以使用相同的`Left`类型。例如，我们可以将它们标准化为都使用`ByteString`. 为此，我们首先采用`ByteString`'s`pack`函数：

```
pack :: String -> ByteString 
```

然后我们将其提升以处理 an 的左值`EitherT`：

```
import Control.Error (fmapLT)  -- from the 'errors' package

fmapLT pack :: (Monad m) => EitherT String m r -> EitherT ByteString m r 
```

现在我们需要将该转换定位到您`Consumer`的基本 monad，使用`hoist`：

```
hoist (fmapLT pack)
 :: (Monad m, Proxy p)
 => Consumer p a (EitherT String m) r -> Consumer p a (EitherT ByteString m) r 
```

现在您可以直接与您的生产者组合您的消费者，因为它们具有相同的基本单子。

第二种解决方案是 Daniel Diaz Carrete 提出的解决方案。相反，您可以让您的两个管道就包含两个`EitherT`层的通用 monad 转换器堆栈达成一致。您所要做的就是决定以何种顺序嵌套这两层。

假设您选择将变压器分层放置在`EitherT String`变压器之外`EitherT ByteString`。这意味着您的最终目标 monad 转换器堆栈将是：

```
(Proxy p) => Session (EitherT String (EitherT ByteString p)) IO r 
```

现在您需要提升两个管道以针对该变压器堆栈。

对于您的`Consumer`，您需要`EitherT ByteString`在两者之间插入一个层，`EitherT String`如果`IO`您想匹配最终的 monad 转换器堆栈。创建层很容易：您只需使用`lift`，但您需要在这两个特定层之间定位提升，因此您使用`hoist`, 两次，因为您需要跳过代理单子转换器和`EitherT String`单子转换器：

```
hoist (hoist lift) . consumer
 :: Proxy p => () -> Consumer p a (EitherT String (EitherT ByteString IO)) () 
```

对于您的，如果要匹配最终的 monad 转换器堆栈，则需要在代理 monad 转换器和转换器之间`Producer`插入一个层。同样，创建层很容易：我们只使用，但您需要在这两个特定层之间定位该提升。你只是，但这次你只使用它一次，因为你只需要跳过代理 monad 转换器就可以将它放置在正确的位置：`EitherT String``EitherT ByteString``lift``hoist``lift`

```
hoist lift . producer
 :: Proxy p => () -> Producer p a (EitherT String (EitherT ByteString IO)) r 
```

现在您的生产者和消费者拥有相同的 monad 转换器堆栈，您可以直接组合它们。

现在，您可能想知道：这个`hoist`ing`lift`的过程是否在做“正确的事情”？答案是肯定的。范畴论的部分神奇之处在于，我们可以严格定义正确插入“空 monad 转换器层”的`lift`含义，并且我们可以类似地`hoist`通过指定几个理论启发的法律并验证`lift`并`hoist`遵守这些法律。

`lift`一旦我们满足了这些法则，我们就可以忽略所有关于具体做什么和做什么的细节`hoist`。类别理论让我们可以在非常高的抽象级别上工作，我们只需要考虑在 monad 转换器之间在空间上“插入升降机”，而代码神奇地将我们的空间直觉转化为严格正确的行为。

我的猜测是您可能想要第一个解决方案，因为您可以在单层中共享生产者和消费者之间的错误处理`EitherT`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-14T14:36:23.643

[任](http://hackage.haskell.org/packages/archive/either/3.4/doc/html/Control-Monad-Trans-Either.html)一包（我猜你的`EitherT`类型来自哪里）提供了几个用于修改第一个参数的函数，例如

```
bimapEitherT :: Functor m => (e -> f) -> (a -> b) -> EitherT e m a -> EitherT f m b 
```

您可以使用它以及一些适当的编码（或解码）将 an`EitherT String IO a`转换为 an `EitherT ByteString IO a`（反之亦然），然后`hoist`将该转换转换为`Consumer`or `Producer`monad 转换器。

# chef-infra - 如何在环境中覆盖 Chef 食谱版本约束？

> ID：14875004
> 
> 赞同：1
> 
> 时间：2013-02-14T12:34:30.423
> 
> 标签：chef-infra

在我的产品环境中，我为某个食谱设置了版本约束。

```
SampleCookbook = 1.1.4 
```

现在我想摆脱这个限制。我怎样才能逐步做到这一点？我不想做的只是删除约束，因为这将立即影响此环境中的所有机器。

在我在环境中禁用它之前，我宁愿禁用信号节点上的约束以检查更改是否安全。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:49:51.153

使用暂存环境。要么在暂存的单独节点上测试更新，要么暂时将一个节点移动到“暂存”环境 - 删除约束的生产副本 - 测试更新，在生产中删除约束，将节点移回。

似乎没有一种简单的方法可以覆盖单个节点的约束——环境是一个封闭的实体。可能有一些工具（刀插件）可以使这样的过程更容易，例如让您动态创建现有环境的克隆。

# floating-point - NE10 NEON 库不工作

> ID：14875006
> 
> 赞同：1
> 
> 时间：2013-02-14T12:34:38.937
> 
> 标签：floating-point, arm, signal-processing, neon

NE10 NEON 优化浮点库。

是否有任何参考输出可用于检查输出，我目前正在检查 NE10 中功能的输出有效性。我正在使用 GNU octave 来检查输入和输出。

团队是否已经检查了输出-输入对应关系？我对 FFT 做了一些初步分析，结果如下。 [https://docs.google.com/file/d/0B318pI7x2QVccXhNUWdiYlhmUWs/edit](https://docs.google.com/file/d/0B318pI7x2QVccXhNUWdiYlhmUWs/edit)请发表评论。

经过多次试验后，我的 Fir 过滤器最终变成了这样...... [https://docs.google.com/document/d/1c5ktcQ6VYlK2im3P2yGNNxRAZonssCApdLS7qkQwq6M/edit](https://docs.google.com/document/d/1c5ktcQ6VYlK2im3P2yGNNxRAZonssCApdLS7qkQwq6M/edit) 请告诉是否有人检查过代码的真实工作，而不是使用随机数进行模拟。我正在尽最大努力获得输出，但它总是失真。请帮忙！！！！！！-我需要使用这个库。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:53:59.047

他已经在 Ne10 Github 问题跟踪器和 ARM 网站上发布了这个。我已经在几个地方回应说，FFT（真实的和复杂的）和 FIR 都经过了全面的单元测试和一致性测试。一致性测试将我们函数的输出与 Matlab 函数的输出进行比较。我建议，也许，他的输入结构没有正确填充，他回顾了如何从 stackoverflow 上的示例中填充结构类型（这里没有重新发布相同的问题）。我将三重检查我们的输出，但如果您仍然遇到问题，请将对话保持在一个线程上。

[https://github.com/projectNe10/Ne10/issues/46I](https://github.com/projectNe10/Ne10/issues/46I)

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-30T10:17:47.047

我知道这个问题已经有一段时间了，但是当我尝试在 Android 的原生（ndk 的）jni 应用程序上使用 NE10 时遇到了类似的问题。

在我的情况下，当我运行与 NE10 捆绑的 NE10_dsp_unit_test_smoke 应用程序时一切正常，但是当将库链接到我的 jni 应用程序时，fft 函数返回了错误的结果（奇怪的 fft bin 值等......）。

事实证明，NE10 android 构建标志与 ndk 的 armeabi-v7a-hard 不兼容。

为了解决这个问题，我将 $(NE10_LIB_DIR)/build/modules/CMakeFiles/NE10.dir/flags.make 中 NE10 生成的构建标志替换为 ndk 生成的构建标志，一切都开始正常工作。

# php - 谷歌图表实时更新ajax

> ID：14875019
> 
> 赞同：2
> 
> 时间：2013-02-14T12:35:21.880
> 
> 标签：php, ajax, database, google-visualization

有谁知道是否可以向 Google 图表添加实时更新功能？我不想使用按钮来更新数据；相反，我希望图表在数据库数据更改时自动更改。这是我用来显示折线图的代码，它工作正常。

索引.php

```
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript">

google.load('visualization', '1', {'packages':['corechart']});
google.setOnLoadCallback(drawChart);

function drawChart() {
  var jsonData = $.ajax({
      url: "getData.php",
      dataType:"json",
      async: false
      }).responseText;

  var data = new google.visualization.DataTable(jsonData);

  var options = {
      width: '100%',
      height: 500,
      legend: 'none',
      colors: ['orange','red','green'],
      vAxis: {textStyle: {color: 'white'}},
      hAxis: {textStyle: {color: 'white'}}
    };

  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}

</script>
</head>

<body>
 <div id="chart_div"></div>
</body> 
```

getData.php 我以下列格式从我的数据库中获取数据：

```
$db_conn_pyr = connect();

function getOrderrader($datum){
 // gets order rows ...
}

$pastDate = date('Ymd', strtotime("-1 month"));

$sqlTrans = "SELECT DISTINCT D3611 FROM PUPROTRA WHERE D3625 = 'U' AND D3601 = 'O' AND
D3611 >= $pastDate ORDER BY D3611 ASC";

$resultTrans = odbc_exec($db_conn_pyr, $sqlTrans)or die(odbc_errormsg());

$data = array(
    'cols' => array(
            array('id' => '', 'label' => 'datum', 'type' => 'string'),
            array('id' => '', 'label' => 'Target', 'type' => 'number'),
            array('id' => '', 'label' => 'Target', 'type' => 'number'),
            array('id' => '', 'label' => 'Orderrader', 'type' => 'number')
    )
);
while($row = odbc_fetch_array($resultTrans)){
$datum = utf8_encode($row['D3611']);
$ordernr = getOrderrader($datum);

$data['rows'][] = array(
    'c' => array(
        array('v' => $datum),
            array('v' => 240),
            array('v' => 160),
            array('v' => $ordernr)
        )
);
}

$string = json_encode($data);
echo $string; 
```

非常感谢琳达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:49:58.373

使用 javascript 计时器在 xxx 秒后调用您的图形创建功能，它应该适合您。

# c# - 在datagridview中检测导航键按下

> ID：14875021
> 
> 赞同：0
> 
> 时间：2013-02-14T12:35:25.897
> 
> 标签：c#, visual-studio-2010, datagridview

我尝试使用 datagridview 的按键事件，但它不起作用。如何检测datagridview中的上下左右箭头键按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:38:16.453

尝试`KeyDown`事件：

```
private void dgv1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Up || e.KeyCode == Keys.Down || e.KeyCode == Keys.Left || e.KeyCode == Keys.Right)
    {
         //do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T22:15:32.950

有可能`PreviewKeyDown`：

```
public Form1()
{
    InitializeComponent();

    dgv.Columns.Add(new DataGridViewTextBoxColumn());

    dgv.Rows.Add("text");

    dgv.PreviewKeyDown += (sender, args) =>
    {
        Debug.Print(args.KeyCode.ToString());
    };
} 
```

# asp.net-mvc - AuthorizationServer.ReadAuthorizationRequest 返回 null

> ID：14875022
> 
> 赞同：1
> 
> 时间：2013-02-14T12:35:25.897
> 
> 标签：asp.net-mvc, oauth-2.0, dotnetopenauth

我正在使用 asp.net MVC 4.0 并使用**DotNetOpenAuth**库构建**OAuth**主机。我正在尝试在**OAuthController中实现****Authorize**方法：

 ******```
[Authorize, AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
public ActionResult Authorise()
{
    using (OAuth2AuthorizationServer server = (new OAuth2AuthorizationServer(new X509Certificate2(ConfigurationManager.AppSettings["AbsolutePathToPfx"], ConfigurationManager.AppSettings["CertificatePassword"]), new X509Certificate2(ConfigurationManager.AppSettings["AbsolutePathToCertificate"]))))
    {
        AuthorizationServer authorizationServer = new AuthorizationServer(server);

        EndUserAuthorizationRequest pendingRequest = authorizationServer.ReadAuthorizationRequest();
        if (pendingRequest == null)
        {
            throw new HttpException((int) HttpStatusCode.BadRequest, "Missing authorization request.");
        }
        //**
    }
} 
```

我得到了`pendingRequest == null`！

我确定应该调用 in`IClientDescription GetClient(string clientIdentifier)`方法- 但实际上在我的情况下它不会调用。`OAuth2AuthorizationServer``ReadAuthorizationRequest`

有没有人有任何猜测为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:05:09.680

我已经弄清楚了问题。长话短说 - 客户没有正确实施。客户负责包含以下信息：

*   client_id
*   重定向uri
*   状态
*   范围
*   响应类型

并没有设置所有字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T16:22:10.383

如果您正在使用此处描述的代码示例：[https ://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Security-scenarios](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Security-scenarios)

以下是调用 OAuthController Auth() 操作的一些示例值：

```
- client_id=RP
- response_type=code
- redirect_uri=https://localhost/RP/Secure4ownAuthSvr/OAuth
- scope=http://localhost/demo
- state="" 
```

您的电话将如下所示（使用 Fiddler）：

```
GET
http://localhost/OAuth2/Auth?client_id=RP&response_type=code&redirect_uri=https://localhost/RP/Secure4ownAuthSvr/OAuth&state=&scope=http://localhost/demo

POST
http://localhost/OAuth2/Auth
Content-Type: application/x-www-form-urlencoded; charset=utf-8
client_id=RP&response_type=code&redirect_uri=https://localhost/RP/Secure4ownAuthSvr/OAuth&state=&scope=http://localhost/demo 
```******

# jquery - jQuery stop() 弄乱了文本

> ID：14875023
> 
> 赞同：0
> 
> 时间：2013-02-14T12:35:31.303
> 
> 标签：jquery

示例：http: [//jsfiddle.net/V4Arr/5/](http://jsfiddle.net/V4Arr/5/)

我的目标是在将鼠标悬停在可见文本上时显示文本。为了防止动画堆积，我使用了 stop() 函数，但它开始弄乱其他元素（并且也弄乱了动画）！您可以在文本上悬停几下后看到它的外观。有什么解决办法吗？

```
$(document).ready(
      function () {
         $("#cont").hover(
             function () {
               $("#secret").stop().show("slide", "350");
            }, 
             function () {
               $("#secret").stop().hide("slide");
            }
          );
       }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:38:32.653

[`.stop` *^([docs])*](http://api.jquery.com/stop/)接受两个参数：

> `clearQueue`
>     类型：Boolean
>     一个布尔值，指示是否也删除排队的动画。默认为`false`.
> 
> `jumpToEnd`
>     类型：Boolean
>     一个布尔值，指示是否立即完成当前动画。默认为`false`.

采用：

```
.stop(true, true) 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:40:50.643

```
$(document).ready(function () {
    $("#cont").hover(function () {
        $("#secret").stop(true, true).show("slide", "350");
    }, function () {
        $("#secret").stop(true, true).hide("slide");
    }
  );
}); 
```

# android - Android Facebook remote_app_id 与存储的 id 不匹配错误

> ID：14875027
> 
> 赞同：8
> 
> 时间：2013-02-14T12:35:49.153
> 
> 标签：android, facebook

在我的应用程序中，用户必须通过 facebook 登录，但我收到此错误，

```
**my logcat error:**

02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988): Exception during service
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988): com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id 
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.protocol.base.ApiResponseChecker.b(ApiResponseChecker.java:74)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.protocol.base.ApiResponseChecker.a(ApiResponseChecker.java:103)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.protocol.base.ApiResponse.g(ApiResponse.java:208)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:267)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:28)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.protocol.base.SingleMethodRunner.a(SingleMethodRunner.java:125)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.katana.server.handler.PlatformOperationHandler.c(PlatformOperationHandler.java:274)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.katana.server.handler.PlatformOperationHandler.a(PlatformOperationHandler.java:175)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:218)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:38)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at com.facebook.orca.server.OrcaServiceQueue$3.run(OrcaServiceQueue.java:169)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at android.os.Handler.handleCallback(Handler.java:587)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at android.os.Looper.loop(Looper.java:123)
02-14 18:00:01.821: WARN/fb4a:fb:OrcaServiceQueue(10988):     at android.os.HandlerThread.run(HandlerThread.java:60)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988): Failed to send
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988): com.facebook.orca.ops.ServiceException: API_ERROR: API_ERROR
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at com.facebook.orca.ops.OrcaServiceOperation.c(OrcaServiceOperation.java:610)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at com.facebook.orca.ops.OrcaServiceOperation.c(OrcaServiceOperation.java:40)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at com.facebook.orca.ops.OrcaServiceOperation$2.run(OrcaServiceOperation.java:575)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at android.os.Handler.handleCallback(Handler.java:587)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at android.os.Looper.loop(Looper.java:123)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at java.lang.reflect.Method.invoke(Method.java:507)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
02-14 18:00:01.876: WARN/fb4a:fb:GDPDialog(10988):     at dalvik.system.NativeStart.main(Native Method) 
```

我正在创建这样的哈希键，

```
keytool -exportcert -alias androiddebugkey -keystore "C:\Users\rama\.android\debug.keystore" | "C:\openssl-0.9.8k_X64\bin\openssl" sha1 -binary | "C:\openssl-0.9.8k_X64\bin\openssl" base64 
```

我得到了密钥，然后添加到 facebook 设置中。

给我一些好主意，

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-14T12:44:43.010

在应用程序的主 Activity 中，在 onCreate() 中，放置此代码并运行应用程序。

这将为您提供 Facebook 所需的正确密钥哈希。显然，JRE 1.7 偶尔会这样做。

复制将显示在 logcat 跟踪中的结果并粘贴到应用程序的 Facebook 控制台中，您应该一切顺利。

```
try {
    PackageInfo info = getPackageManager().getPackageInfo(
            "ENTER.YOUR.PACKAGE.NAME", PackageManager.GET_SIGNATURES);
    for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.e("MY KEY HASH:",
                Base64.encodeToString(md.digest(), Base64.DEFAULT));
    }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) { 
```

**编辑：**差点忘了。**不要**忘记将 替换为`ENTER.YOUR.PACKAGE.NAME`您的应用程序包名称。;-)

**更新：**

**解决方案1：**

试试这个链接：[http](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1) ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1 。我发现使用 Facebook 获取哈希键的方法并不总是像宣传的那样有效。但是，此链接具有获取哈希键的不同方法，并且几乎总是有效。

**解决方案2：**

话虽如此，我总是发现最简单的事情就是*让 Facebook SDK 告诉你你的 Hash Key 是什么*。这要简单得多，不应该超过几分钟。

第 1 步：在您的 Facebook SDK 中，找到*Util.java*类。在那，改变这个：

```
private static boolean ENABLE_LOG = false; 
```

到：

```
private static boolean ENABLE_LOG = true; 
```

第 2 步：创建一个**新**的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。

第 3 步：在运行 DDMS (Logcat) 并将设备连接到计算机的情况下，运行应用程序并继续寻找*密钥不匹配*警告。该警告具有**实际**的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

# java - 如何在没有阴影插件的情况下打包 Dropwizard 项目？

> ID：14875028
> 
> 赞同：5
> 
> 时间：2013-02-14T12:35:51.253
> 
> 标签：java, maven, dropwizard

在每个站点中，我只能找到示例，其中 Dropwizard 项目是使用 Shade pluign 构建的。有没有办法在没有 shade 插件的情况下构建 Dropwizard 项目。如果是这样，请提供一些示例 pom.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:11:44.540

如果你的 pom 中没有包含 shade 插件，Dropwizard 将正确构建，Maven 会为你提供一个包含所有项目文件但不包含任何依赖项的 jar。

# java - 在 Netbeans 中将静态文件夹添加到 Tomcat

> ID：14875035
> 
> 赞同：1
> 
> 时间：2013-02-14T12:36:14.603
> 
> 标签：java, tomcat, netbeans

在 Eclipse 中配置 Maven 应用程序时，我可以向 Tomcat 服务器添加一个静态文件夹。此静态文件夹包含 Web 应用程序使用的属性和配置文件，甚至包括图像和 css 文件。

不幸的是，我无法将它移动到 Web 应用程序资源文件夹，因为它是一个遗留应用程序。

我的公司正在将 IDE 从 eclipse 更改为 Netbeans，我担心是否有办法在 Netbeans 的嵌入式 Tomcat 中添加这个静态文件夹。是否可以？

顺便说一句，我们使用 Netbeans 7.1.2 和 Apache Tomcat 7.0.22.0 和 java 1.6.0_26。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:27:52.923

尝试：工具 -> 选项 -> Java -> Ant 选项卡 -> 在“类路径”部分通过单击“添加目录”按钮添加您的静态文件夹。

昨天我遇到了类似的问题，这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:09:53.680

我通过打开 /conf/server.xml 文件并添加以下行来解决它：

```
<Context docBase="C:/static" path="/static" reloadable="true"/> 
```

现在，可以通过 localhost:8080/static/test.jpg 访问 C:/static 中名为 test.jpg 的文件。

谢谢。

# c# - 未将 ManualResetEvent 设置为 true

> ID：14875036
> 
> 赞同：0
> 
> 时间：2013-02-14T12:36:16.860
> 
> 标签：c#, .net, multithreading, c#-4.0

```
 List<ManualResetEvent> doneEventsList = new List<ManualResetEvent>();

 productBuilders.ForEach(productBuilder =>
            {
                doneEventsList.Add(productBuilder.GetDoneEvent());
                CustomThreadPool.getSingletonInstance.QueueUserWorkItem(productBuilder.GetAndMapProduct, new Object());
            });

            WaitHandle.WaitAll(doneEventsList.ToArray()); 
```

我对上面的代码有一点怀疑，

假设`CustomThreadPool`有 21 个`Thread`“类”实例的列表，而“ `productBuilders`”有 3 个构建器。在这种情况下，从 CustomThreadPool 获取的线程计数将为“3”。可以说，如果我在`ManualResetEvent`这 3 个“”调用中的任何一个中都没有在对象上设置“Set()/true” `GetAndMapProduct`，那么这 3 个线程会发生什么。我的意思是，如果我在代码上方循环 7 次并且每次获取 3 个线程而不设置`ManualResetEvent`，我就不能使用 CustomThreadPool 类吗？因为 CustomThreadPool 假设所有（7 * 3）线程都忙于工作并且它没有有任何空闲线程可以分配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:31:47.623

您没有提供任何代码来暗示这会以*任何*方式`ManualResetEvent`影响这 3 个线程。他们唯一会影响（基于您的代码）将是通过调用的*当前*线程，并且根据您提供和描述的内容，这将是一个死锁。**`WaitAll`**

 **如果您只在同一进程中管理不同的线程，我还建议您使用`ManualResetEventSlim`（[http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim.aspx)），特别是如果您'重新做的`GetAndMapProduct`相当快。但是，目前还不清楚您要完成什么。**

# sql-server-2008 - 通过排除 Null 进行分组 - tsql

> ID：14875039
> 
> 赞同：2
> 
> 时间：2013-02-14T12:36:19.713
> 
> 标签：sql-server-2008, tsql, group-by, common-table-expression

我在下面有一个脚本：

```
 ;;WITH CTE AS
    (
        SELECT 
                RANK() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC,MAX(SecurityName)) AS [Rank]
            ,   ReportingDate
            ,   PortfolioID
            ,   PortfolioNme
            ,   MAX(SecurityName)                               AS SecurityName
            ,   CAST(SUM(Percentage) AS DECIMAL(22,1))          AS [Weight]
            ,   SEDOL
            ,   MAX(ISIN)                                       AS ISIN
        FROM @Worktable as WT

        WHERE WT.IssueType2 <> '010' AND WT.IssueType2 <> '055' AND WT.IssueType1 <> '110' -- To remove CASH and FX and Collateral

        GROUP BY    WT.ReportingDate
                ,   WT.PortfolioID
                ,   WT.PortfolioNme
                ,   WT.SEDOL
    )

    SELECT 
          CONVERT(VARCHAR, ReportingDate, 103)  AS ReportingDate
        , PortfolioID                           AS FundCode
        , PortfolioNme                          AS FundName
        , SecurityName                          AS InstrumentName
        , [Rank]
        , [Weight]                              AS Percentage
        , SEDOL
        , ISIN
    FROM CTE

    WHERE [Rank] <= 10

    ORDER BY ReportingDate, PortfolioID, [Rank], [Weight] DESC 
```

我按 SEDOL 进行分组，因为我想将相同的 SEDOL 组合在一起，但这会导致 NULLS 组合在一起。我尝试通过在 SEDOL 周围添加一个 MAX 并放置：

```
CASE 
    WHEN SEDOL IS NULL THEN SecurityName 
    ELSE SEDOL
END 
```

在我的 GROUP BY 但没有成功。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:06:30.440

听起来您只想简单地添加`AND WT.SEDOL is not null`CTE`WHERE`子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:45:33.893

怎么样：

```
;;WITH CTE AS
    (
        SELECT 
                RANK() OVER (PARTITION BY PortfolioID ORDER BY SUM(Percentage) DESC,MAX(SecurityName)) AS [Rank]
            ,   ReportingDate
            ,   PortfolioID
            ,   PortfolioNme
            ,   MAX(SecurityName)                               AS SecurityName
            ,   CAST(SUM(Percentage) AS DECIMAL(22,1))          AS [Weight]
            ,   ISNULL(SEDOL, SecurityName) AS SEDOL
            ,   MAX(ISIN)                                       AS ISIN
        FROM @Worktable as WT

        WHERE WT.IssueType2 <> '010' AND WT.IssueType2 <> '055' AND WT.IssueType1 <> '110' -- To remove CASH and FX and Collateral

        GROUP BY    WT.ReportingDate
                ,   WT.PortfolioID
                ,   WT.PortfolioNme
                ,   ISNULL(WT.SEDOL, SecurityName)
    )

    SELECT 
          CONVERT(VARCHAR, ReportingDate, 103)  AS ReportingDate
        , PortfolioID                           AS FundCode
        , PortfolioNme                          AS FundName
        , SecurityName                          AS InstrumentName
        , [Rank]
        , [Weight]                              AS Percentage
        , SEDOL
        , ISIN
    FROM CTE

    WHERE [Rank] <= 10

    ORDER BY ReportingDate, PortfolioID, [Rank], [Weight] DESC 
```

# c# - 查找所有子控件 WPF

> ID：14875042
> 
> 赞同：12
> 
> 时间：2013-02-14T12:36:27.110
> 
> 标签：c#, wpf

我想找到 WPF 控件中的所有控件。我查看了很多示例，似乎它们都需要将名称作为参数传递，或者根本不起作用。

我有现有的代码，但它不能正常工作：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
  if (depObj != null)
  {
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
    {
      DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
      if (child != null && child is T)
      {
        yield return (T)child;
      }

      foreach (T childOfChild in FindVisualChildren<T>(child))
      {
        yield return childOfChild;
      }
    }
  }
} 
```

例如，它不会`DataGrid`在 a 中得到 a `TabItem`。

有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T13:12:11.367

你可以使用这些。

```
 public static List<T> GetLogicalChildCollection<T>(this DependencyObject parent) where T : DependencyObject
        {
            List<T> logicalCollection = new List<T>();
            GetLogicalChildCollection(parent, logicalCollection);
            return logicalCollection;
        }

 private static void GetLogicalChildCollection<T>(DependencyObject parent, List<T> logicalCollection) where T : DependencyObject
        {
            IEnumerable children = LogicalTreeHelper.GetChildren(parent);
            foreach (object child in children)
            {
                if (child is DependencyObject)
                {
                    DependencyObject depChild = child as DependencyObject;
                    if (child is T)
                    {
                        logicalCollection.Add(child as T);
                    }
                    GetLogicalChildCollection(depChild, logicalCollection);
                }
            }
        } 
```

您可以像这样在 RootGrid fe 中获取子按钮控件：

```
 List<Button> button = RootGrid.GetLogicalChildCollection<Button>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-21T12:27:03.730

您可以使用此示例：

```
public Void HideAllControl()
{ 
           /// casting the content into panel
           Panel mainContainer = (Panel)this.Content;
           /// GetAll UIElement
           UIElementCollection element = mainContainer.Children;
           /// casting the UIElementCollection into List
           List < FrameworkElement> lstElement =    element.Cast<FrameworkElement().ToList();

           /// Geting all Control from list
           var lstControl = lstElement.OfType<Control>();
           foreach (Control contol in lstControl)
           {
               ///Hide all Controls 
               contol.Visibility = System.Windows.Visibility.Hidden;
           }
} 
```

# c - 如何分配固定大小的数组？

> ID：14875043
> 
> 赞同：4
> 
> 时间：2013-02-14T12:36:27.510
> 
> 标签：c, struct

在 C 中，我有

```
struct a {
    int a;
    char b[16];
    int c;
}; 
```

的实例的内存如何`struct a`，它会与结构区域平齐，还是内部`struct a`有指针，例如，结构大小是 4+16+4 还是 4+4+4 ？

如果我有会发生什么

```
struct a A,B;
A->b = B->b; 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:38:17.567

> struct a 实例的内存如何，它会与 struct 区域平齐，还是在 struct a 内部有指针

平坦的。

数组成员是一个真正的数组，其大小`struct`将为

```
2*sizeof(int) + 16 (+ padding) 
```

> 如果我有会发生什么`struct a A,B A->b = B->b`

编译错误。数组不可赋值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T12:38:17.600

> 它会与结构区域平齐，还是在结构a内部有指针，

它将是平坦的。即数组将物理地在你的结构内

> 如果我有 struct a A,B A->b = B->b 会发生什么

结构与此无关，这将导致编译错误，因为数组不能作为结构成员相互分配。使用循环或`memcpy`.

但是，您可以分配整个结构，并且将复制数组

```
A = B; //the arrays inside will be copied. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T12:38:10.630

使用 a `for`，您不能分配给数组（数组名称不能用作左值）。

```
for (i = 0 ; i < 16; i++)
    A->b[i] = B->b[i]; 
```

至于尺寸，`sizeof`至少会返回`2 * sizeof(int) + 16 * sizeof(char)`. 由于填充，您可能有更高的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-29T04:04:23.270

要回答你的标题问题，你不能用你写的形式，但你可以在工会的帮助下：

```
struct A {
    int a;
    union {
        char b[16];
        struct { char b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, b13, b14, b15; }
    };
    int c;
}; 
```

现在您可以像这样分配和使用它：

```
const A test = {
    .a = 1,
    .b0 = 'a', .b1 = 'b', .b2 = 'c', .b3 = 'd', .b4 = 'e', .b5 = 'f', .b6 = 'g', .b7 = 'h', .b8 = 'i', .b9 = 'j', .b10 = 'k', .b11 ='l', .b12 ='m', .b13 ='n', .b14 ='o', .b15 = 'p',
    .c = 255
};

printf("The final b is >%c<.\n", test.b[15]); // prints: The final b is >p<. 
```

这是因为结构中固定大小数组的平面布局（其他人已经提到过），并且因为联合*（在本例中为[匿名联合](https://stackoverflow.com/questions/1972003/how-to-use-anonymous-structs-unions-in-c)）*允许您通过具有不同标识符的不同类型访问相同的内存位置。本质上，您只是在这里提前设置了一个类型转换。

# c# - 水平显示数据库列数据

> ID：14875044
> 
> 赞同：3
> 
> 时间：2013-02-14T12:36:34.067
> 
> 标签：c#, asp.net, sql

我有一个场景，我必须水平显示每个表字段的数据。

```
ID    1 2 3 4 5

Name  'Ahmad' 'Umar' 'Nadeem' 'Raza' 'Saquib'

City  'New York' 'Paris' 'London' 'New York' 'London' 
```

谁能告诉我如何在 ASP.NET C# 中完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:45:56.790

像这样的东西：

```
class Program
{
    static void Main(string[] args)
    {
        HumanDto humanDto = new HumanDto();
        List<Human> humans = new List<Human>();
        humans.Add(new Human(){city = "London", id = 1});
        humans.Add(new Human() { city = "London2", id = 2 });
        humans.Add(new Human() { city = "London3", id = 3 });
        humans.Add(new Human() { city = "London4", id = 4 });

        humans.ForEach(e => humanDto.Add(e.city, e.id));
    }
}

public class Human
{
    public Int32 id { get; set; }
    public String city { get; set; }
}
public class HumanDto
{
    public List<Int32> Ids { get; set; }
    public List<String> Cities { get; set; }
    public HumanDto()
    {
        Ids = new List<int>();
        Cities = new List<string>();
    }

    public void Add(String city, Int32 Id)
    {
        Ids.Add(Id);
        Cities.Add(city);
    }
} 
```

# objective-c - 关闭文档时在 document.m 中调用的方法

> ID：14875045
> 
> 赞同：1
> 
> 时间：2013-02-14T12:36:39.110
> 
> 标签：objective-c, cocoa, methods, nsdocument

我`- (void)windowControllerDidLoadNib:(NSWindowController *)aController`用来查看文档何时加载到基于文档的应用程序中。但是我应该使用什么方法来查看文档何时关闭？我想将文本框的内容保存到 NSUserDefaults 但我找不到在文档关闭时调用的方法。我搜索了网络，并通过在 xcode 中显示为提示但没有运气的方法！任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:42:15.453

我观察`NSApplicationWillTerminateNotification`并重写了`[NSDocument close]`执行文档清理的方法（`[NSDocument close]`应用程序终止时不调用！）

我的文档.h：

```
@interface MyDocument : NSDocument
{
    BOOL _cleanedUp;    // BOOL to avoid over-cleaning up
    ...
}

@end 
```

我的文档.m：

```
// Private Methods
@implementation MyDocument ()

- (void)_cleanup;

@end

@implementation MyDocument

- (id)init
{
    self = [super init];
    if (self != nil)
    {
        _cleanedUp = NO;

        // Observe NSApplication close notification
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(_cleanup)
                                                     name:NSApplicationWillTerminateNotification
                                                   object:nil];
    }
    return self;
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];

    // I'm using ARC so there is nothing else to do here
}

- (void)_cleanup
{
    if (!_cleanedUp)
    {
        _cleanedUp = YES;
        logdbg(@"Cleaning-up");

        // Do my clean-up
    }
}

- (void)close
{
    logdbg(@"Closing");

    [self _cleanup];

    [super close];
} 
```

# linker-errors - 链接错误：未定义对 icu_50::UnicodeString::UnicodeString() 的引用

> ID：14875047
> 
> 赞同：5
> 
> 时间：2013-02-14T12:36:46.223
> 
> 标签：linker-errors, static-linking, icu, unicode-string, gcc4.7

我正在尝试编译我已声明为类成员的项目：

```
icu::UnicodeString label;
icu::UnicodeString tags;
icu::UnicodeString domain;
icu::UnicodeString data; 
```

包含后（是的，找到了）

```
#include <unicode/unistr.h> 
```

在我的 CMakeLists.txt 中，它搜索、查找和链接： icuuc icudata (libicuuc, libicudata) 如输出所示，在抛出错误之前：

> -o icarus -rdynamic -lPocoNet -lPocoUtil -lPocoXML -licuuc -licudata

我已经从源 icu4c 50.1.2 构建和安装，并将其安装在 /usr/local/* cmake 正确找到库，因为我的错误来自链接阶段：

> `icu_50::UnicodeString::UnicodeString()' undefined reference to`对icu_50::UnicodeString::~UnicodeString()' 的未定义引用

我在 Debian Wheezy 上使用启用了 -std=c++0x 的 gcc-4.7.2。昨晚在 Debian Squeeze 上使用相同标志的 gcc-4.3.2 编译了完全相同的代码！

我不能为我的生活，弄清楚我做错了什么！请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T13:01:11.803

看来这是我在构建 ICU4C 时的错。我留下一个简短的解释，因为我已经看到了很多关于此的谷歌帖子，但没有答案。如果您在配置 icu 时仔细阅读文档，它指出您应该做一些事情：

1）将使用命名空间定义为false：

```
 #   ifndef U_USING_ICU_NAMESPACE
-#       define U_USING_ICU_NAMESPACE 1
+        // Set to 0 to force namespace declarations in ICU usage.
+#       define U_USING_ICU_NAMESPACE 0 
```

2) 在 linux 上构建时，我选择了一个非共享的静态库：

```
runConfigureICU Linux --enable-static --disable-shared 
```

3）这是导致我的错误的重要部分：

*默认情况下，ICU 库入口点名称具有 ICU 版本后缀。将其关闭以进行系统级安装，以在不破坏应用程序的情况下升级 ICU。例如：*

```
runConfigureICU Linux --disable-renaming 
```

*必须安装此配置中的公共头文件，应用程序才能包含并获取正确的入口点名称。*

我在 Squeeze 上确实这样做了，但在 Wheezy 上没有这样做，因此导致了系统范围安装中的所有链接错误。吸取教训，希望对其他人有所帮助。

# c++ - 纯虚函数和二进制兼容性

> ID：14875052
> 
> 赞同：8
> 
> 时间：2013-02-14T12:37:13.980
> 
> 标签：c++, inheritance, binary-compatibility

现在，我知道向非叶类添加新的虚函数通常是不好的，因为它破坏了任何尚未重新编译的派生类的二进制兼容性。但是，我的情况略有不同：

我有一个接口类和实现类编译成一个共享库，例如：

```
class Interface {
    public:
        static Interface* giveMeImplPtr();
        ...
        virtual void Foo( uint16_t arg ) = 0;
        ...
}

class Impl {
    public:
        ...
        void Foo( uint16_t arg );
        ....
} 
```

我的主应用程序使用这个共享库，基本上可以写成：

```
Interface* foo = Implementation::giveMeImplPtr();
foo->Foo( 0xff ); 
```

换句话说，应用程序没有任何派生自 的类`Interface`，它只是使用它。

现在，假设我想用 超载`Foo( uint16_t arg )`，`Foo( uint32_t arg )`我可以安全地做：

```
 class Interface {
    public:
        static Interface* giveMeImplPtr();
        ...
        virtual void Foo( uint16_t arg ) = 0;
        virtual void Foo( uint32_t arg ) = 0;
        ...
} 
```

并重新编译我的共享库而无需重新编译应用程序？

如果是这样，我需要注意任何不寻常的警告吗？如果没有，除了获取命中和升级库之外，我是否还有其他选择，从而破坏了向后兼容性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T12:41:41.307

简单回答是不。任何时候更改类定义，*都*可能失去二进制兼容性。添加非虚拟函数或静态成员在实践中通常是安全的，尽管仍然是形式上未定义的行为，但仅此而已。其他任何事情都可能会破坏二进制兼容性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T14:09:44.547

ABI 基本上取决于对象的大小和形状，包括 vtable。添加虚函数肯定会改变vtable，如何改变取决于编译器。

在这种情况下要考虑的其他事情是，您不仅提出了 ABI 重大更改，而且还提出了在编译时很难检测到的 API 中断。如果这些不是虚拟功能并且 ABI 兼容性不是问题，那么在您进行更改后，类似于：

```
void f(Interface * i) {
  i->Foo(1)
} 
```

将悄悄地最终调用您的新函数，但前提是重新编译该代码，这会使调试变得非常困难。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T09:28:38.813

您正在尝试描述流行的**“使类不可派生”**技术以保持二进制兼容性，例如，在*Symbian C++* API 中使用（查找*NewL*工厂方法）：

1.  提供工厂功能；
2.  将 C++ 构造函数声明为私有（并且非导出非内联，并且该类不应有友元类或函数），这使得该类不可派生，然后您可以：

    *   在类声明的末尾添加虚函数，
    *   添加数据成员并更改类的大小。

该技术仅适用于**GCC**编译器，因为它将虚函数的源代码顺序保存在二进制级别。

**解释**

虚函数是由对象的**v-table**中的偏移量调用的，而不是由损坏的名称调用的。如果您只能通过调用静态工厂方法来获取对象指针并保留所有虚函数的偏移量（通过保存源顺序，在末尾添加新方法），那么这将是向后二进制兼容的。

如果您的类具有公共构造函数（内联或非内联），则兼容性将被破坏：

*   **inline**：应用程序将复制一个旧的 v-table 和该类的旧内存布局，这将与新库中使用的不同；如果您调用任何导出的方法或将对象作为参数传递给此类方法，则可能会导致分段错误的内存损坏；

*   **non-inline**：情况更好，因为您可以通过在叶类声明的末尾添加新的虚拟方法来更改 v-table，因为如果您愿意，链接器将在客户端重新定位派生类的 v-table 布局加载新的库版本；但是您仍然无法更改类的大小（即添加新字段），因为大小在编译时是硬编码的，并且调用新版本的构造函数可能会破坏客户端堆栈或堆上相邻对象的内存。

**工具**

尝试使用[abi-compliance-checker](https://github.com/lvc/abi-compliance-checker)工具检查 Linux 上类库版本的向后二进制兼容性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T12:47:36.807

当我处于类似情况时，我发现 MSVC**颠倒**了重载函数的顺序，这让我感到非常惊讶。根据您的示例，MSVC 将像这样构造 v_table （二进制）：

```
virtual void Foo( uint32_t arg ) = 0;
virtual void Foo( uint16_t arg ) = 0; 
```

如果我们扩大一点你的例子，像这样：

```
class Interface {
    virtual void first() = 0;
    virtual void Foo( uint16_t arg ) = 0;
    virtual void Foo( uint32_t arg ) = 0;
    virtual void Foo( std::string arg ) = 0;
    virtual void final() = 0;
} 
```

MSVC 将构造以下 v_table：

```
 virtual void first() = 0;
    virtual void Foo( std::string arg ) = 0;
    virtual void Foo( uint32_t arg ) = 0;
    virtual void Foo( uint16_t arg ) = 0;
    virtual void final() = 0; 
```

Borland builder 和 GCC 不改变顺序，但是

1.  他们在我测试的那个版本中没有这个
2.  如果您的库由 GCC 编译（例如），而应用程序将由 MSVC 编译，那将是一个史诗般的失败

结束...永远不要依赖二进制兼容性。类的任何更改都必须使用它重新编译所有代码。

# css - 隐藏访问过的链接高亮css

> ID：14875053
> 
> 赞同：1
> 
> 时间：2013-02-14T12:37:15.847
> 
> 标签：css, image, hyperlink, visited

我一直在创建一个网站，在标题上我有一些 .png 图像用作按钮，我的问题是当我在 ie9 中打开该网站时，访问的图像有一个紫色的轮廓。我的问题是如何禁用图像上的已访问链接突出显示或使其透明以使其不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:05:41.660

如果我不想显示链接访问状态，我只需将其设置为与常规链接状态相同，如下所示：

```
a, a:visited {
    // my styles
} 
```

然后是悬停和聚焦的另一个规则：

```
a:hover, a:focus {
    // my styles
} 
```

如果需要，另一个用于活动：

```
a:active {
    // my styles
} 
```

如果您的图像作为链接或访问链接获得边框，并且您不希望这样做，则应将以下内容添加到您的 css 中：

```
img {
    border: 0;
} 
```

# c# - 如何控制 Datagridview 中的 SendKeys.Send{"tab"} 属性？

> ID：14875058
> 
> 赞同：5
> 
> 时间：2013-02-14T12:37:35.223
> 
> 标签：c#, datagridview, sendkeys

我正在 datagridview 单元格中编写代码输入事件为

```
private void dgvGoodsRecpt_CellEnter(object sender, DataGridViewCellEventArgs e)
{
    if (dgvGoodsRecpt.CurrentRow.Cells[e.ColumnIndex].ReadOnly)
    {
        SendKeys.Send("{tab}");
    }
} 
```

如果当前单元格是，此代码会将选项卡发送到下一个单元格`ReadOnly true`。

它运行良好，但这里我的问题是我的 datagridview 最后一列是`readonly true`，下一个控件是`txtAmount1.Text`and `txtAmount2.Text`。

当我继续按 Tab 键时，焦点将转到`txtAmount2.Text`. 但 datagridview 的下一个是`txtAmount1.Text`. 重点是datagridview之后的imidite控件的下一个控件。焦点应该转到`txtAmount1.Text`控件。我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-28T21:33:30.723

有一个非字母数字键的预定义字符串常量列表。例如，`{TAB}`用于 Tab 键。这是包含所有常量的 MSDN 文章：[https ://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)

您也可以考虑`SendKeys.SendWait`改用。此方法将确保目标应用程序进程在您的应用程序继续之前发送密钥。例如：

```
SendKeys.SendWait("{TAB}"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T10:49:15.887

用这个：

`SendKeys.Send("\t");`

# objective-c - 哪种设计模式适合从模块化子块创建对象？

> ID：14875059
> 
> 赞同：1
> 
> 时间：2013-02-14T12:37:40.487
> 
> 标签：objective-c, oop, design-patterns

假设我想从头开始制作一个自定义按钮：

*   **BasicButton : NSObject**
    所以我创建了一个类，它知道如何在单击按钮时处理鼠标事件并将消息转发给感兴趣的接收者（通过委托、目标/动作、通知等）。
*   **SolidColorButton : BasicButton : NSObject**
    我的按钮现在可以工作了，但它是不可见的，所以我决定画一个纯色背景来使按钮栩栩如生（在 UI 设计方面不是很好，但让我们假装吧）。
*   **LabelledButton : SolidColorButton : BasicButton : NSObject**
    现在假设我想在按钮上添加标签，所以我创建了另一个可以在按钮上绘制文本的子类。

所以现在我有一个可以处理鼠标事件、绘制纯色背景和绘制一些文本的按钮。但是，如果我决定需要一个带有背景图像而不是纯色的按钮，但它仍然知道如何绘制标签，现在会发生什么？这就是单继承子类方法失败的地方。我不能随意将鼠标处理、标签绘制和图像绘制结合起来，我只能选择继承链下游的细化级别。

所以我想我的问题是：**实现这些单独的模块的方法是什么，以便它们可以混合和匹配以创建某种*后代*对象，它具有所需模块的组合功能，没有别的？**

例如，我希望能够编写如下模块：

*   *鼠标处理*
*   *键盘处理*
*   *纯色背景*
*   *图像背景*
*   *标签*
*   等等

然后有能力制作一个特定的按钮：a）处理鼠标，b）绘制背景，c）有一个标签；没有别的了。

这个问题具体到如何在 Objective-C 或另一种单继承 OOP 语言中做到这一点。在 Ruby 中，一种方法是使用 mixins。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:50:23.473

你已经注意到继承在这里是个坏主意。[**装饰器模式**](http://en.wikipedia.org/wiki/Decorator_pattern)会派上用场：您将拥有一个按钮类和多个“装饰”按钮（包装并添加功能）并且可以任意组合的装饰器。

**类图：**

```
 +---------------+     innerButton
 |ButtonInterface+------------------------+
 +---------------+ 1                      |
        ^    ^                            |
        |    |                            |
        |    +-------------+              |
 +------+------+   +-------+-------+      |
 | BasicButton |   |ButtonDecorator+------+
 +-------------+   +---------------+
                     ^           ^
                     |           |  ...
                     |           |
+--------------------+----+ +----+------------------+
|SolidColorButtonDecorator| |LabelledButtonDecorator|  ...
+-------------------------+ +-----------------------+ 
```

**对象图（对于您的示例）：**

```
+----------------------------+
|MouseHandlingButtonDecorator|
+-----+----------------------+
      |
     1| innerButton
+-----+-------------------+
|BackgroundButtonDecorator|
+-----+-------------------+
      |
     1| innerButton
+-----+-----------------+
|LabelledButtonDecorator|
+-----+-----------------+
      |
     1| innerButton
+-----+-----+
|BasicButton|
+-----------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:14:07.613

另一种选择是组合设计模式，但是，它被修改为看起来像“装饰器模式”。

以下示例仅适用于绘图行为，不适用于鼠标或键盘行为。忽略下图中的点。

注意：它更像 C++ 或 C#，请忽略与 Objective-c 的细微差别。

首先，您需要一个按钮类，将“绘制”功能“委托”给成员或项目。让我们首先展示主类本身。

```
................................................................................
..+--------------------------------+..../|..+--------------------------------+..
..|        GraphicObjectClass      |.../.|..|      CompositeButtonClass      |..
..+--------------------------------*--<..|--*--------------------------------+..
..| [+]  void Draw(); <<virtual>>  |...\.|..| [+]  void Draw(); <<override>> |..
..+--------------------------------+....\|..+--------------------------------+..
................................................................................ 
```

假设您想要一个按钮，并且：

*   绘制边框的“模块类”
*   绘制背景、纯色或图案的“模块类”
*   绘制文本标签、粗体、斜体、字体名称的“模块类”

第二个图表显示了单独执行此操作的单独“模块”或类：

```
................................................................................
..+--------------------------------+............................................
..|        GraphicObjectClass      |............................................
..+--------------------------------+............................................
..| [+]  void Draw(); <<virtual>>  |............................................
..+---------------*----------------+............................................
..................|.............................................................
..................^.............................................................
................./.\............................................................
................/...\...........................................................
.............../--+--\..........................................................
..................|.............................................................
..+---------------*----------------+.../|...+--------------------------------+..
..|      ButtonComponentClass      |../.|...|      SolidColorButtonClass     |..
..+--------------------------------+-<..|-*.+--------------------------------+..
..| [+]  void Draw(); <<virtual>>  |..\.|.|.| [+]  void Draw(); <<override>> |..
..+--------------------------------+...\|.|.+--------------------------------+..    
..........................................|.....................................
..........................................|.+--------------------------------+..
..........................................|.|       LabeledButtonClass       |..
..........................................|.+--------------------------------+..
..........................................*-* [+]  void Draw(); <<override>> |..
..........................................|.+--------------------------------+..
..........................................|.....................................
..........................................|.+--------------------------------+..
..........................................|.|        BorderButtonClass       |..
..........................................|.+--------------------------------+..
..........................................*-* [+]  void Draw(); <<override>> |..
............................................+--------------------------------+..
................................................................................ 
```

让我们将组件集成到按钮中，注意我为继承关联制作了一个与其他关联不同的图表。

```
.......................................................................................
.+--------------------------------------------+.....+--------------------------------+.
.|              CompositeButtonClass          |.....|      SolidColorButtonClass     |.
.+--------------------------------------------+.....+--------------------------------+.
.| [+] ButtonComponentClass* Background       *-----* [+]  void Draw(); <<override>> |.
.|                                            |.....+--------------------------------+.
.| [+] ButtonComponentClass* Border           *---*....................................
.|                                            |...|.+--------------------------------+.
.| [+] ButtonComponentClass* Label            *-*.|.|       LabeledButtonClass       |.
.+--------------------------------------------+.|.|.+--------------------------------+.
.| [+] void Draw();               <<virtual>> |.|.+-* [+]  void Draw(); <<override>> |.
.+--------------------------------------------+.|...+--------------------------------+.
................................................|......................................
................................................|...+--------------------------------+.
................................................|...|        BorderButtonClass       |.
................................................|...+--------------------------------+.
................................................*---* [+]  void Draw(); <<override>> |.
....................................................+--------------------------------+.
....................................................................................... 
```

现在，您将拥有一个按钮类，它会将“绘制”功能“委托”给成员或项目。让我们首先展示主类本身。

```
virtual /* override */ void CompositeButtonClass::Draw()
{
   // [Background Draw]     
   this->Background->Draw();

   // [Border Draw]
   this->Border->Draw();

   // [Label Draw]
   this->Label->Draw();
} 
```

只是一个建议。

干杯。

# r - 从 ffdf 到常规数据框

> ID：14875070
> 
> 赞同：1
> 
> 时间：2013-02-14T12:38:21.987
> 
> 标签：r, dataframe, transformation

有没有办法将 ffdf 转换为普通数据帧？假设这个东西足够小，可以放入 ram 中。

例如：

```
library(ff)
library(ffbase)

data(trees)
Girth  <- ff(trees$Girth)
Height <- ff(trees$Height)
Volume <- ff(trees$Volume)
aktiv  <- ff(as.factor(sample(0:1,31,replace=T)))
#Create data frame with some added parameters.
data <- ffdf(Girth=Girth,Height=Height,Volume=Volume,aktiv=aktiv)
rm(Girth,Height,Volume,trees,aktiv)

aktiv <- subset.ffdf(data, data$aktiv== "1" ) 
```

然后将 aktiv 转换为数据框并保存 RData（遗憾的是，等待输出的人不想学习如何使用 ff 包，所以我别无选择）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:51:50.913

只需使用`as.data.frame`：

```
aktiv <- subset(as.data.frame(data), aktiv == 1)

   Girth Height Volume aktiv
2    8.6     65   10.3     1
7   11.0     66   15.6     1
9   11.1     80   22.6     1
12  11.4     76   21.0     1
13  11.4     76   21.4     1
15  12.0     75   19.1     1
17  12.9     85   33.8     1
20  13.8     64   24.9     1
21  14.0     78   34.5     1
23  14.5     74   36.3     1
26  17.3     81   55.4     1
27  17.5     82   55.7     1
28  17.9     80   58.3     1
31  20.6     87   77.0     1 
```

从这里您可以轻松地使用`save`or `write.csv`，例如：

```
save(aktiv, file="aktiv.RData") 
```

# automapper - AutoMapper：MapFrom 和 ResolveUsing 有什么区别？

> ID：14875075
> 
> 赞同：55
> 
> 时间：2013-02-14T12:38:46.173
> 
> 标签：automapper, automapper-2

忽略`ResolveUsing`采用 IValueResolver 的重载，仅查看以下 2 个方法：

```
void ResolveUsing(Func<TSource, object> resolver);
void MapFrom<TMember>(Expression<Func<TSource, TMember>> sourceMember); 
```

这两个之间的主要区别似乎是`ResolveUsing`需要一个`Func<TSource, object>`，而 MapFrom 需要一个`Expression<Func<TSource, TMember>>`。

然而，在实际使用这些方法之一和 lambda 表达式的客户端代码中，它们似乎是可以互换的：

```
Mapper.CreateMap<SourceType, DestType>() // uses ResolveUsing
   .ForMember(d => d.DestPropX, o => o.ResolveUsing(s => s.SourcePropY));

Mapper.CreateMap<SourceType, DestType>() // uses MapFrom
   .ForMember(d => d.DestPropX, o => o.MapFrom(s => s.SourcePropY)); 
```

那么上述两种选择之间的最终区别是什么？一个比另一个快吗？一个是比另一个更好的选择吗？如果是，什么时候/为什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-15T00:08:11.797

过去，我在邮件列表中与 Automapper 的作者进行了[长时间的电子邮件交流。](https://groups.google.com/forum/#!topic/automapper-users/zx9pd18vcVQ)MapFrom 将通过表达式一直执行 null 检查：

> 所以你可以这样做`opt => opt.MapFrom(src => src.SomeProp.Way.Down.Here.Somewhere)`，每个级别都会检查是否有空值（就像它已经为展平所做的那样）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-03-13T16:20:49.827

我刚刚使用新的 C# 6 [null 条件运算符做了一些基准测试](http://www.kunal-chowdhury.com/2014/12/csharp-6-null-conditional-operators.html#Od0vxZ2szcDFvc0y.97) `?.`

考虑以下场景：类`A`有一个子类`B`，它有一个子类，我们希望将`C`其`Name`属性展平为 DTO。我测试了两种变体：

```
// using mapfrom
CreateMap<MapFromA, MapFromADto>()
    .ForMember(dto => dto.Name, o => o.MapFrom(a => a.B.C.Name));

// using resolveusing with elvis
CreateMap<ResolveUsingX, ResolveUsingXDto>()
    .ForMember(dto => dto.Name, o => o.ResolveUsing(x => x.Y?.Z?.Name)); 
```

我打电话给`_mapper.Map<ResolveUsingXDto>(x);`or `_mapper.Map<MapFromADto>(a);`1000 个不同的电话`ResolveUsingX x`，`MapFromA a`并花时间使用`System.Diagnostics.StopWatch`. 这是我的结果：

```
Distinct elements per batch: 1000; # batches for average: 25

A->B->C.Name, C is never null.
MapForm - average time taken for 1000x: 5527,84 ticks = 1,44 ms.
ResolveUsing - average time taken for 1000x: 5479,76 ticks =  1,4 ms.

A->B->C.Name, C is null 1/3 of the time.
MapForm - average time taken for 1000x: 72924,4 ticks = 27,44 ms.
ResolveUsing - average time taken for 1000x: 5351,2 ticks =  1,48 ms.

A->B->C.Name, C is null 1/2 of the time.
MapForm - average time taken for 1000x: 107016,92 ticks = 40,52 ms.
ResolveUsing - average time taken for 1000x: 5835,32 ticks =  1,56 ms.

A->B->C.Name, C is null 2/3 of the time.
MapForm - average time taken for 1000x: 141437,96 ticks = 53,64 ms.
ResolveUsing - average time taken for 1000x: 5789,72 ticks =  1,56 ms. 
```

`MapFrom`必须捕获 NullReferenceExceptions，这比`ResolveUsing`使用 elvis 运算符要慢`?.`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-14T20:14:01.187

`MapFrom`有[一些额外的智慧](https://groups.google.com/forum/?fromgroups=#!topic/automapper-users/TO5Re0vpems)。例如（来自[邮件列表](https://groups.google.com/forum/#!msg/automapper-users/AekQJdepzU8/uwmsIhLTpZoJ)）：

> 在 MapFrom 中，我尽量聪明地挖掘子属性（就像正常的展平一样）。MapFrom 是一种模仿扁平化的尝试，增加了一点允许重定向。ResolveUsing 没有这种行为。

我不确定这是否在任何地方都有完整的[记录](https://github.com/AutoMapper/AutoMapper/wiki)（除了[源代码](https://github.com/AutoMapper/AutoMapper)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-07T11:09:12.317

尽管在许多情况下都可以使用任何一种，但根据[官方文档](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions)，在 LINQ 投影方面存在差异。详细解释可以在[这里](https://lostechies.com/jimmybogard/2014/12/30/automapper-3-3-feature-parameterized-projections/)找到。

长话短说：尽可能使用 MapFrom。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T09:18:12.323

根据源代码，`ResolveUsing`比较复杂。源值可以是任何对象；因此，您可以使用您想要填充目标成员的任何值，例如通过“解析”给定对象获得的 int 或 bool。但是，`MapFrom`仅使用成员进行映射。

```
/// <summary>
/// Resolve destination member using a custom value resolver callback. Used instead of MapFrom when not simply redirecting a source member
/// This method cannot be used in conjunction with LINQ query projection
/// </summary>
/// <param name="resolver">Callback function to resolve against source type</param>
void ResolveUsing(Func<TSource, object> resolver);

/// <summary>
/// Specify the source member to map from. Can only reference a member on the <typeparamref name="TSource"/> type
/// This method can be used in mapping to LINQ query projections, while ResolveUsing cannot.
/// Any null reference exceptions in this expression will be ignored (similar to flattening behavior)
/// </summary>
/// <typeparam name="TMember">Member type of the source member to use</typeparam>
/// <param name="sourceMember">Expression referencing the source member to map against</param>
void MapFrom<TMember>(Expression<Func<TSource, TMember>> sourceMember); 
```

# python - 正则表达式在单词中捕获至少 1 个标点符号

> ID：14875077
> 
> 赞同：0
> 
> 时间：2013-02-14T12:38:50.350
> 
> 标签：python, regex

我试图让所有在开头、中间和/或结尾处至少有 1 个标点符号（或任何非空格、非字母数字字符）的单词。例如，在这句话中

```
this is a wo!rd right !and| other| hello |other 
```

正则表达式将返回

```
wo!rd !and| other| |other 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T12:44:18.753

你可以使用这个：

```
>>> sentence = "this is a wo!rd right !and| other| hello |other"

>>> import re

>>> re.findall("\S*[^\w\s]\S*", sentence)
['wo!rd', '!and|', 'other|', '|other'] 
```

这将找到所有这些单词，至少包含`1 non-word, non-space`字符。`\S`与 相同`[^\s]`。

**正则表达式解释：**

```
\S*      # Match 0 or more non-space character
[^\w\s]  # Match 1 non-space non-word character
\S*      # Match 0 or more non-space character 
```

# php - 无法访问迭代器 php 中的私有保护成员

> ID：14875078
> 
> 赞同：1
> 
> 时间：2013-02-14T12:38:57.487
> 
> 标签：php, iterator

这是数据迭代器的实现

```
//Data Iterator 
    class DataIterator implements Iterator
    {
        public $data ;
        public function __construct(Data $obj)
        {
            $this->data = $obj;
        }
        public function rewind()
        {
            $this->properties = get_object_vars($this->data);                       
        }
        public function valid()
        {
            if (key($this->properties) === null )
            {
                return false;
            }   
            return true;
        }
        public function key()
        {
            return key($this->properties);
        }
        public function current()
        {
             return current($this->properties);
        }
        public function next()
        {
            next($this->properties);
        }

    } 
```

这是数据类

```
 /*Data Class*/
    class Data implements IteratorAggregate
    {
        public $name; 
        private $age;
        protected $address;
        public $country;
        public $state;

        public function __construct($name, $age, $address, $country = 'USA', $state = 'NH')
        {
            $this->name = $name;
            $this->age = $age;
            $this->address = $address;
            $this->country = $country;
            $this->state = $state;
        }
        function getIterator()
        {       
            return new DataIterator($this);
        }
    } 
```

这是调用部分

```
$data = new Data('Joker', '27', 'California');

    foreach($data->getIterator() as $key => $value)
    {
        echo $key , ' ', $value, '<br>';
    } 
```

输出

```
name Joker
country USA
state NH 
```

请注意，输出不包含我的私有和受保护属性（年龄、地址）输出。

我如何告诉 Iterator 也输出这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:04:33.653

public、private 和 protected 是访问修饰符。它们旨在限制类属性的可访问性。

*   **公共**意味着任何人都可以访问该属性，因此如果有人想要，他们可以更改值，而您并不知道。
*   **私有**意味着该属性只能在类内部访问，因此没有人可以从类外部“弄乱”这些属性。
*   **Protected**类似于 Private，但子类（从该类继承的类）可以访问它。

您正在制作`age`和`address`私有，所以您基本上是在说，不允许任何人访问这些属性。如果您想访问私有/受保护的属性，则必须创建 getter 和 setter 并调用这些函数，或者将属性设为公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:17:15.490

您不能告诉迭代器输出这些属性，因为它们根本无法从外部访问（即迭代器执行`get_object_vars($this->data)`.

有两种方法可以做到这一点：

1.  通过让数据对象将值传递给迭代器。
2.  使用反射 API 强行将它们拉出来（冗长，慢！）。

但在继续使用 #1 作为首选选项之前，请停下来问自己：**为什么迭代器会暴露数据对象的非公共成员？**

做某事`private`意味着“你们这些人真的不需要知道这件事；它可能会在未来消失，或者它可能会变得面目全非”。如果它是外界关心的东西，那为什么不`public`（直接或通过公共吸气剂暴露）？重新考虑这个迭代器的目的可能是为了。

也就是说，这就是你将如何做#1：

```
class DataIterator implements Iterator
{
    public $data;
    private $properties;
    public function __construct(Data $obj, array $propeties)
    {
        $this->data = $obj;
        $this->properties = $properties;
    }

    public function rewind()
    {
        // Arguably horrible trick to refresh the property map without
        // demanding that Data exposes a separate API just for this purpose
        $newIterator = $this->data->getIterator();
        $this->properties = $newIterator->properties;
    }
}

class Data implements IteratorAggregate
{
    function getIterator()
    {       
        return new DataIterator($this, get_object_vars($this));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:48:31.993

尝试 get_class_vars

```
$this->properties = get_class_vars(get_class($this->data)); 
```

而不是 $this->properties = get_object_vars($this->data);

# javascript - 包含 lib 时 BusterJS 冻结

> ID：14875080
> 
> 赞同：1
> 
> 时间：2013-02-14T12:39:16.770
> 
> 标签：javascript, web-testing, buster.js

我有以下设置：

破坏者.js：

```
var config = module.exports;

config["web-module"] = {
    autoRun: true,
    environment: "browser",
    rootPath: ".",
    libs: [
        //"app/webroot/src/lib/underscore.js"
    ],
    sources: [

    ],
    tests: [
        "buster_simpletest.js"
    ]
}; 
```

buster_simpletest.js：

```
buster.testCase("My thing", {

    "states the obvious": function () {
        console.log("TEST");
        assert(true);
    }

}); 
```

此设置运行良好，我得到了预期的控制台输出：

```
Chrome 24.0.1312.57, Windows Server 2008 R2 / 7:

Passed: Chrome 24.0.1312.57, Windows Server 2008 R2 / 7 My thing states the obvious
    [LOG] TEST

1 test case, 1 test, 1 assertion, 0 failures, 0 errors, 0 timeouts.
Finished in 0.004s 
```

但是，只要我包含任何库（我尝试过 underscore.js、jQuery 和其他几个库），它就不会立即生效。

我没有得到一行控制台输出。没有错误，什么都没有。它只是在那里冻结。

我也尝试禁用`autoRun`并包含`run.js`which calls `buster.run();`，但结果是一样的。

有谁知道这里有什么问题？

在此先感谢您的帮助。

**编辑：**

好的，我又测试了一些，似乎文件夹深度有问题。这是我的文件夹结构：

```
root
 - buster.js
 - buster_simpletest.js
 - underscore.js
 - a
   - underscore.js
   - b
     - underscore.js 
```

这是我的测试结果：

```
libs: [
    //"underscore.js"      // works
    //"a/underscore.js"    // works
    //"a/b/underscore.js"  // freezes
    //"a/b/xunderscore.js" // Error: "Failed loading configuration: "a/b/xunderscore.js" matched no files or resources"
] 
```

正如你所看到的，只要我有 2 个文件夹的深度，它就会冻结。尽管它能够找到该文件，但如果我尝试包含无效文件，则会出现错误。

**编辑2：**

似乎只是Windows的错误。相同的设置在我们的 linux 机器上运行良好。我想我们必须等待适当的 Windows 支持。

# php - 使用 PHP 将所有 POST 数据保存到数据库

> ID：14875081
> 
> 赞同：0
> 
> 时间：2013-02-14T12:39:17.893
> 
> 标签：php, mysql, post, insert

我在软件网关中注册，每次销售都会使用 IPN 向我的服务器发送许多数据，我想将它们全部保存在数据库中。有什么快速的方法可以在不使用 SQL 的情况下将所有 POST 数据保存在数据库中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T12:44:00.690

嗯......这是一种奇怪的做事方式。但是，如果您只是想存储“所有发布数据”，您也可以使用`serialize($_POST);` 并将其存储在您的数据库中（在 TEXT 列中）。

当您从数据库中读取它时，使用`unserialize()`将数据转回原始数组。

我不建议做这样的事情，但它是你问的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:44:43.043

使用[SafeMysql 抽象库](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)时，您只需列出一次字段

```
$allowed = array('title','url','body','rating','term','type');
$data = $db->filterArray($_POST,$allowed);
$sql = "INSERT INTO ?n SET ?u";
$db->query($sql,$table,$data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:44:00.543

```
$str = serialize ($_POST) 
```

现在您可以将 str 存储在数据库中，当您需要返回值时，只需再次反序列化它。

# sql - Postgres 中的高效时间序列查询

> ID：14875084
> 
> 赞同：10
> 
> 时间：2013-02-14T12:39:34.157
> 
> 标签：sql, postgresql

我的 PG 数据库中有一张表，看起来有点像这样：

```
id | widget_id | for_date | score | 
```

每个引用的小部件都有很多这些项目。每个小部件每天 1 个，但存在差距。

我想要得到的是一个结果，其中包含自 X 以来每个日期的所有小部件。日期是通过生成系列引入的：

```
 SELECT date.date::date
   FROM generate_series('2012-01-01'::timestamp with time zone,'now'::text::date::timestamp with time zone, '1 day') date(date)
 ORDER BY date.date DESC; 
```

如果给定的 widget_id 没有日期条目，我想使用前一个。所以说小部件 1337 在 2012-05-10 上没有条目，但在 2012-05-08 上没有条目，那么我希望结果集也显示 2012-05-10 上的 2012-05-08 条目：

```
Actual data:
widget_id | for_date   | score
1312      | 2012-05-07 | 20
1337      | 2012-05-07 | 12
1337      | 2012-05-08 | 41
1337      | 2012-05-11 | 500

Desired output based on generate series:
widget_id | for_date   | score
1336      | 2012-05-07 | 20
1337      | 2012-05-07 | 12
1336      | 2012-05-08 | 20
1337      | 2012-05-08 | 41
1336      | 2012-05-09 | 20
1337      | 2012-05-09 | 41
1336      | 2012-05-10 | 20
1337      | 2012-05-10 | 41
1336      | 2012-05-11 | 20
1337      | 2012-05-11 | 500 
```

最终我想把它归结为一个视图，这样我每天就有一致的数据集，我可以很容易地查询。

**编辑：**使示例数据和预期结果集更清晰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:34:08.603

[SQL小提琴](http://www.sqlfiddle.com/#!12/d76d0/2)

```
select
    widget_id,
    for_date,
    case
        when score is not null then score
        else first_value(score) over (partition by widget_id, c order by for_date)
        end score
from (
    select
        a.widget_id,
        a.for_date,
        s.score,
        count(score) over(partition by a.widget_id order by a.for_date) c
    from (
        select widget_id, g.d::date for_date
        from (
            select distinct widget_id
            from score
            ) s
            cross join
            generate_series(
                (select min(for_date) from score),
                (select max(for_date) from score),
                '1 day'
            ) g(d)
        ) a
        left join
        score s on a.widget_id = s.widget_id and a.for_date = s.for_date
) s
order by widget_id, for_date 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T14:51:05.523

*首先*，您可以有一个更简单的`generate_series()`表表达式。相当于你的（除了降序，这与你的问题的其余部分相矛盾）：

```
SELECT generate_series('2012-01-01'::date, now()::date, '1d')::date 
```

该类型在输入时`date`被强制转换为`timestamptz`自动。返回类型是`timestamptz`任何一种方式。我在下面使用了一个子查询，因此我可以立即将其转换为输出`date`。

*接下来*，`max()`作为窗口函数返回您需要的内容：自*框架*开始忽略值以来的最高`NULL`值。在此基础上，您会得到一个非常**简单**的查询。

### 对于给定的 widget_id

很可能比涉及`CROSS JOIN`or更快`WITH RECURSIVE`：

```
SELECT a.day, s.*
FROM  (
   SELECT d.day
         ,max(s.for_date) OVER (ORDER BY d.day) AS effective_date
   FROM  (
      SELECT generate_series('2012-01-01'::date, now()::date, '1d')::date
      ) d(day)
   LEFT   JOIN score s ON s.for_date = d.day
                      AND s.widget_id = 1337 -- "for a given widget_id"
   ) a
LEFT   JOIN score s ON s.for_date = a.effective_date
                   AND s.widget_id = 1337
ORDER  BY a.day; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/dd2f2/6)

使用此查询，您可以将任何`score`您喜欢的列放入最终`SELECT`列表。为了简单起见，我放了 s.*。选择你的列。

如果您想从实际*有*分数的第一天开始输出，只需将最后一天替换`LEFT JOIN`为`JOIN`.

### 所有 widget_id 的通用表单

在这里，我使用 a`CROSS JOIN`在每个日期为每个小部件生成一行..

```
SELECT a.day, a.widget_id, s.score
FROM  (
   SELECT d.day, w.widget_id
         ,max(s.for_date) OVER (PARTITION BY w.widget_id
                                ORDER BY d.day) AS effective_date
   FROM  (SELECT generate_series('2012-05-05'::date
                                ,'2012-05-15'::date, '1d')::date AS day) d
   CROSS  JOIN (SELECT DISTINCT widget_id FROM score) AS w
   LEFT   JOIN score s ON s.for_date = d.day AND s.widget_id = w.widget_id
   ) a
JOIN  score s ON s.for_date = a.effective_date
             AND s.widget_id = a.widget_id  -- instead of LEFT JOIN
ORDER BY a.day, a.widget_id; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/c3a22/3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T13:23:11.067

使用您的表结构，我创建了以下递归 CTE，它以您的 MIN(For_Date) 开始并递增，直到达到 MAX(For_Date)。不确定是否有更有效的方法，但这似乎运作良好：

```
WITH RECURSIVE nodes_cte(widgetid, for_date, score) AS (
-- First Widget Using Min Date
 SELECT 
    w.widgetId, 
    w.for_date, 
    w.score
 FROM widgets w 
  INNER JOIN ( 
      SELECT widgetId, Min(for_date) min_for_date
      FROM widgets
      GROUP BY widgetId
   ) minW ON w.widgetId = minW.widgetid 
        AND w.for_date = minW.min_for_date
UNION ALL
 SELECT 
    n.widgetId,
    n.for_date + 1 for_date,
    coalesce(w.score,n.score) score
 FROM nodes_cte n
  INNER JOIN (
      SELECT widgetId, Max(for_date) max_for_date
      FROM widgets 
      GROUP BY widgetId
   ) maxW ON n.widgetId = maxW.widgetId
  LEFT JOIN widgets w ON n.widgetid = w.widgetid 
    AND n.for_date + 1 = w.for_date
  WHERE n.for_date + 1 <= maxW.max_for_date
)
SELECT * 
FROM nodes_cte 
ORDER BY for_date 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!1/fee9a/1)。

以及返回的结果（根据需要格式化日期）：

```
WIDGETID   FOR_DATE                     SCORE
1337       May, 07 2012 00:00:00+0000   12
1337       May, 08 2012 00:00:00+0000   41
1337       May, 09 2012 00:00:00+0000   41
1337       May, 10 2012 00:00:00+0000   41
1337       May, 11 2012 00:00:00+0000   500 
```

请注意，这假设您的 For_Date 字段是一个日期——如果它包含一个时间——那么您可能需要在上面的查询中使用间隔“1 天”。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T19:42:44.317

数据：

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE widget
        ( widget_id INTEGER NOT NULL
        , for_date DATE NOT NULL
        , score INTEGER
         , PRIMARY KEY (widget_id,for_date)
        );
INSERT INTO widget(widget_id , for_date , score) VALUES
 (1312, '2012-05-07', 20)
, (1337, '2012-05-07', 12)
, (1337, '2012-05-08', 41)
, (1337, '2012-05-11', 500)
        ; 
```

查询：

```
SELECT w.widget_id AS widget_id
        , cal::date AS for_date
        -- , w.for_date AS org_date
        , w.score AS score
FROM generate_series( '2012-05-07'::timestamp , '2012-05-11'::timestamp
                 , '1day'::interval) AS cal
        -- "half cartesian" Join;
        -- will be restricted by the NOT EXISTS() below
LEFT JOIN widget w ON w.for_date <= cal
WHERE NOT EXISTS (
        SELECT * FROM widget nx
        WHERE nx.widget_id = w.widget_id
        AND nx.for_date <= cal
        AND nx.for_date > w.for_date
        )
ORDER BY cal, w.widget_id
        ; 
```

结果：

```
 widget_id |  for_date  | score 
-----------+------------+-------
      1312 | 2012-05-07 |    20
      1337 | 2012-05-07 |    12
      1312 | 2012-05-08 |    20
      1337 | 2012-05-08 |    41
      1312 | 2012-05-09 |    20
      1337 | 2012-05-09 |    41
      1312 | 2012-05-10 |    20
      1337 | 2012-05-10 |    41
      1312 | 2012-05-11 |    20
      1337 | 2012-05-11 |   500
(10 rows) 
```

# javascript - ContextMenu 中的树形视图

> ID：14875086
> 
> 赞同：0
> 
> 时间：2013-02-14T12:39:41.937
> 
> 标签：javascript, jquery, treeview, contextmenu

我有一个疯狂的想法，试图在上下文菜单中显示一棵树。我做了一个谷歌搜索，并没有找到任何相关的东西。这真的可以实现吗？我知道我没有发布任何代码，但想在开始编写代码部分之前获得您的所有指导。

问候， 尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:48:38.800

我想到的只有一个解决方法。您应该首先禁用默认的 conextmenu。然后您可以显示绝对定位的 div，其中包含光标旁边的树视图。

# asp.net-mvc-4 - 子文件夹中 ASP.NET MVC 4 应用程序中的 ELMAH

> ID：14875090
> 
> 赞同：1
> 
> 时间：2013-02-14T12:39:59.160
> 
> 标签：asp.net-mvc-4, elmah, subdirectory

## 设置：

我在根文件夹 (~/tracker) 的子文件夹中有一个 ASP.NET MVC 4 应用程序。

我使用 NuGet 在 MVC 应用程序中安装了 ELMAH。

## 开发机器：

在我的开发机器上，网站位于根目录。ELMAH 工作正常。

## 服务器上的问题：

在服务器上，我可以看到 ELMAH 页面，但尽管产生了错误，但没有记录任何错误。它只是说：“没有发现错误”。

它也没有任何样式出现。

## 服务器上的 Web.config：

服务器 web.config 上的 Elmah 相关位是：

**配置部分：**

```
<sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup> 
```

**应用设置：**

```
<appSettings>
    <add key="elmah.mvc.disableHandler" value="false" />
    <add key="elmah.mvc.requiresAuthentication" value="true" />
    <add key="elmah.mvc.allowedRoles" value="Admin" />
    <add key="elmah.mvc.route" value="tracker/elmah" />
  </appSettings> 
```

**http模块：**

```
<httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
    </httpModules> 
```

**系统.web服务器：**

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="true">
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
    </modules>
  </system.webServer> 
```

**最后：**

```
<elmah>
    <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data/Elmah" />
    <security allowRemoteAccess="yes" />
  </elmah> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:01:39.380

好的，解决了这个：

将写入权限添加到 ~/App_Data/Elmah 文件夹。

正如猫鼬所说，简单。

我通过找到以下 SO 答案解决了这个问题：

[Elmah.MVC 不会在生产环境中记录错误](https://stackoverflow.com/q/11682295/271087)

还有一个用于设置 ELMAH 文件夹权限的指南，或者更确切地说，是该问题的已接受答案中的指南链接。

我无法工作的是 ELMAH 页面的样式。有什么建议么？

# javascript - 国家/地区的 Google 地图缩放级别

> ID：14875092
> 
> 赞同：3
> 
> 时间：2013-02-14T12:40:05.467
> 
> 标签：javascript, google-maps, google-maps-api-3

我在确定如何为不同国家/地区设置缩放级别时遇到问题，我已设法使地图正常工作并显示该国家/地区，但似乎无法确定如何设置缩放级别。

任何帮助，将不胜感激。

谢谢

乔治

```
<script type="text/javascript">
                    var infowindow = null;
                    $(document).ready(function () { initialize(); });

                    function initialize() {

                        //var geocoder = new google.maps.Geocoder();
                        //geocoder.geocode({ 'address': address }, function (results, status) {
                        //    if (status == google.maps.GeocoderStatus.OK) {
                        //        map.setCenter(results[0].geometry.location);
                        //        map.fitBounds(results[0].geometry.viewport);
                        //    }
                        //});

                        var centerMap = new google.maps.LatLng(@Html.Raw(@item.strLatLong));

                        var myOptions = {
                            zoom: 4, //<<-------How can I chnage this
                            center: centerMap,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        }

                        var map = new google.maps.Map(document.getElementById("WeatherMapLocation"), myOptions);

                        setMarkers(map, sites);
                        infowindow = new google.maps.InfoWindow({
                            content: "loading..."
                        });

                        var bikeLayer = new google.maps.BicyclingLayer();
                        bikeLayer.setMap(map);
                    }

                    function setMarkers(map, markers) {

                        for (var i = 0; i < markers.length; i++) {
                            var sites = markers[i];
                            var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
                            var marker = new google.maps.Marker({
                                position: siteLatLng,
                                map: map,
                                title: sites[0],
                                zIndex: sites[3],
                                html: sites[4]
                            });

                            var contentString = "Some content";

                            google.maps.event.addListener(marker, "click", function () {
                                infowindow.setContent(this.html);
                                infowindow.open(map, this);
                            });
                        }
                    }
                </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:09:42.070

从地理编码器的[文档](https://developers.google.com/maps/documentation/javascript/geocoding)中，地理编码器的响应中返回了一个视口和一个边界，可用于在结果上居中和缩放地图。

```
 if (results && results[0] && results[0].geometry && results[0].geometry.viewport) 
      map.fitBounds(results[0].geometry.viewport); 
```

[工作示例](http://geocodezip.com/v3_zoom2countrySelectList.html)

# java - SSL 服务器套接字需要身份验证选项

> ID：14875094
> 
> 赞同：10
> 
> 时间：2013-02-14T12:40:15.203
> 
> 标签：java, security, sockets, ssl, jsse

关于[SSLServerSocket.setWantClientAuth](http://download.java.net/jdk7/archive/b123/docs/api/javax/net/ssl/SSLServerSocket.html#setWantClientAuth%28boolean%29)：
如果设置为`true`如果客户端选择不发送证书，则协商继续。
我还注意到，如果客户端发送证书**但**不是信任库的一部分，也会发生这种情况。在这种情况下，协商也不会失败。

那么这个设置的用例是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-14T14:05:26.613

*（多个编辑，遵循一些评论。）*

`setWantClientAuth`用于请求客户端证书认证，但如果没有提供认证，则保持连接。`setNeedClientAuth`用于请求和要求客户端证书身份验证：如果没有提供合适的客户端证书，连接将终止。

[您可以在 TLS 规范的客户端证书部分](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.6)找到有关此主题的更多信息。对于一点历史：

*   在 1.2 版中，它说“*如果没有合适的证书可用，客户端必须发送不包含证书的证书消息。* ”。在此之前，它只是一个“应该”，但 Sun JSSE 客户端无论如何都会发送一个空列表。

*   1.2 版还添加了：

```
> Also, if some aspect of the certificate chain was unacceptable (e.g.,
> it was not signed by a known, trusted CA), the server MAY at its
> discretion either continue the handshake (considering the client
> unauthenticated) or send a fatal alert.

This gives some flexibility regarding what to do when a unacceptable certificate is sent. The JSSE chooses to send a fatal alert. (`setWantAuth` could in principle carry on with invalid certificates, but not treat the peer as authenticated, as if no client certificate was sent, but this isn't the case.)

Previous versions of the TLS spec said "*If client authentication is required by the server for the handshake to continue, it may respond with a fatal handshake failure alert.*". This is the difference between need or want as implemented in the JSSE: using "need", the server responds with a fatal handshake failure, whereas using "want", the server carries on with the connection, but doesn't treat it as authenticated. 
```

我最初认为当您使用“需要”时您的客户没有发送其证书。实际上，如果大多数客户端找不到由服务器在其请求期间发送的 CA 名称中列出的颁发者之一颁发的客户端证书（或者如果客户端不能自己建立链，这是[一个常见的问题](https://stackoverflow.com/q/9299133/372643)）。默认情况下，JSSE 使用信任库中的 CA 来构建该列表。因此，如果合适的颁发者不在服务器的信任库中，您的客户端可能根本不会发送客户端证书。

您可以检查是否使用 Wireshark 发送了客户端证书。如果您没有在通常与 SSL/TLS 一起使用的端口上运行，则需要右键单击数据包并选择“解码为... -> 传输 -> SSL”。

在那里，您应该会看到`Certificate Request`来自服务器的消息。（出于某种原因，当我将默认的 JRE 信任库与 Wireshark 一起使用时，该消息显示为“加密握手消息”，就在“服务器密钥交换”消息之后。但是，它没有加密：您可以清楚地看到一个数字如果您在底部面板中查看数据包的 ASCII 呈现，则 CA 名称的数量。也许这是因为此消息太长，我不确定。）使用较短的列表，例如，具有单个 CA 的信任存储, Wireshark 您将其正确解码为`Certificate Request`消息，并且您应该在“可分辨名称”部分中看到接受的 CA 列表。

您还应该看到`Certificate`来自客户端的消息（当然不是来自服务器的消息）。如果服务器请求（需要或需要）证书，则无论如何您都应该始终看到来自客户端的此消息。

假设您可以访问测试 CA（使用该 CA 颁发的客户端证书），您可以尝试以下实验。

*   如果您使用该测试 CA 证书设置信任库，请使用`setWantClientAuth(true)`，客户端将发送其客户端证书，并且连接将继续。然后，服务器可以`SSLSession`按预期从 中获取客户端证书。

*   如果您使用默认信任库（不包含您的测试 CA 证书），请使用`setWantClientAuth(true)`，CA DN 将不在`Certificate Request`. 客户端将发送一条`Certificate`消息，但证书列表将为空（`Certificates Length: 0`在 Wireshark 中）。在这里，客户端实际上并没有发送客户端证书，即使它的密钥库被配置为这样做，只是因为它找不到合适的匹配项。连接将继续（如果您尝试从服务器上读取对等证书，您可能会遇到异常`SSLSession`，但这不是致命的）。这是`setWantClientAuth(true)`;的用例 `setNeedClientAuth(true)`会立即结束连接。

*   为了这个实验，你可以用 Java 伪造服务器发送的 DN 列表。

    ```
     KeyManagerFactory kmf = //... Initialise a KMF with your server's keystore

      TrustManagerFactory tmf = TrustManagerFactory
          .getInstance(TrustManagerFactory.getDefaultAlgorithm());
      tmf.init((KeyStore) null); // Use the default trust store
      TrustManager[] trustManagers = tmf.getTrustManagers();
      final X509TrustManager origTrustManager = (X509TrustManager) trustManagers[0];
      final X509Certificate caCert = // Load your test CA certificate here.
      X509TrustManager fakeTrustManager = new X509TrustManager() {
          public void checkClientTrusted(X509Certificate[] chain,
                  String authType) throws CertificateException {
              // Key the behaviour of the default trust manager.
              origTrustManager.checkClientTrusted(chain, authType);
          }

          public void checkServerTrusted(X509Certificate[] chain,
                  String authType) throws CertificateException {
              // Key the behaviour of the default trust manager.
              origTrustManager.checkServerTrusted(chain, authType);
          }

          public X509Certificate[] getAcceptedIssuers() {
              // This is only used for sending the list of acceptable CA DNs.
              return new X509Certificate[] { caCert };
          }
      };
      trustManagers = new X509TrustManager[] { fakeTrustManager };

      SSLContext sslContext = SSLContext.getInstance("TLS");
      sslContext.init(kmf.getKeyManagers(), trustManagers, null); 
    ```

    在这种情况下，`Certificate Request`服务器发送的消息应该包含您的测试 CA 的 DN。但是，信任管理器实际上并不信任该 CA，它仍然使用默认值。

    客户端将发送其证书，但服务器将拒绝它，并说“javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed”，这将结束连接。这至少是使用 SunJSSE 提供程序、使用 PKIX 或 SunX509 信任管理器的实现。这也与[信任管理器的 JSSE 规范](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#TrustManager)一致：“ *TrustManager 的主要职责是确定所提供的身份验证凭证是否应该被信任。如果凭证不被信任，则连接将被终止。* ”

这里的关键点是，如果您能够从 获取客户端证书，则`SSLSession`该证书应该已由信任管理器进行身份验证（我的意思是，`SSLSession`一旦握手完成，您将获得，而`SSLSocket.getSession()`不是您在握手过程中使用`getHandshakeSession()`，在 Java 7 中引入）。

您似乎在评论中指出您正在使用另一个 JSSE 提供程序，并且您的客户端无论如何都在发送客户端证书，无论 CA 证书是否在服务器的信任库中，因为您的信任中还有另一个不同的 CA 证书使用相同的主题 DN 存储。假设这两个 CA 证书具有不同的密钥（否则它们实际上是同一个 CA），这将是一个相当严重的错误：使用客户端证书身份验证的应用程序有权期望客户端证书已由信任管理器验证（如 JSSE 参考指南中所述）。如果您使用的是 Apache Tomcat，一旦它获得客户端证书，远程连接就被认为是通过此证书进行身份验证的。如果此时 servlet 能够使用可以'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:05:58.930

当您想知道客户端凭据是否发送它们时使用它，但如果他不发送，您又不想停止通信。与“needClientAuth”相比，如果他不发送握手将失败。

# objective-c - registerForRemoteNotificationTypes 减慢了我的应用程序！我可以只执行第一次吗？

> ID：14875103
> 
> 赞同：0
> 
> 时间：2013-02-14T12:40:59.957
> 
> 标签：objective-c, push-notification, ios6.1

我向我的应用程序添加了推送通知，并在 appdelegate 中执行 registerForRemoteNotificationTypes 以要求用户接受推送。我第一次打开应用程序时，它询问我是否要接收推送并且一切顺利，但是下一次执行 registerForRemoteNotificationTypes 会使应用程序挂起一些恼人的秒数，从而使应用程序减慢太多。如果用户已经回答了有关激活或不激活推送通知的问题，是否有办法不执行 registerForRemoteNotificationTypes？（我在 ios 6.1 中工作）

# javascript - 如何使用 Node.js + HBS + Express 将 JSON 传递给客户端？

> ID：14875112
> 
> 赞同：2
> 
> 时间：2013-02-14T12:41:49.010
> 
> 标签：javascript, json, node.js, express, handlebars.js

考虑一下，我在[Express](https://github.com/visionmedia/express)的渲染页面中按如下方式向客户端发送 JSON （使用[hbs](https://github.com/donpark/hbs)作为视图引擎）：

```
res.render('MyPage.html', { layout: false, PageTitle: 'Project Name', JSON_Data: {field1:'value',field2:'value2'}}); 
```

我可以使用 访问和设置 html 页面的标题`{{PageTitle}}`，以下是代码。

```
 <title>{{PageTitle}}</title> 
```

现在我想显示`JSON_data`在警报弹出窗口中。

我尝试了以下方式，但是`Uncaught SyntaxError: Unexpected token {`在 chrome 中调试时显示`var jsonobj = [object Object]`

```
 function fbOnBodyLoad() {
        var jsonobj = {{JSON_data}};
        alert(jsonobj);
    } 
```

任何机构都可以就如何访问`JSON_data`和显示警报提供一些想法

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:56:25.157

要访问 json 对象的内部元素，请尝试这样

```
var jsonobj = "{{JSON_data.field1}}"; 
```

可能这可能会解决问题。

参考

[Handlebars.js 解析对象而不是 [Object object]](https://stackoverflow.com/questions/10232574/handlebars-js-parse-object-instead-of-object-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:59:48.030

您始终可以注册一个 Handlebars 助手以将对象格式化为字符串格式（例如通过使用 JSON.stringify），然后在您的视图中使用该助手。[http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T15:50:01.657

对我来说，它通过在服务器中执行：

```
res.render('pages/register', {
                title: 'Register Form',
                messages: req.flash('error'),
                countries:JSON.stringify(countries)
        }); 
```

然后我使用这个国家变量来分配角度控制器，如下所示：

```
angular.module('languagesApp', []).controller('DemoController', function($scope) {

    $scope.algo = {{-countries}};
... 
```

# c# - 在 list<> 中拆分字符串值

> ID：14875117
> 
> 赞同：2
> 
> 时间：2013-02-14T12:42:02.333
> 
> 标签：c#, list, split

我有一个包含在包含以下值的字典中的列表

```
value a
value b
value c
value 1, value 2, value3
value d 
```

我想要的最终结果是

```
value a
value b
value c
value 1
value 2
value 3
value d 
```

问题是遍历字典并尝试更改集合将不起作用，因为我试图在循环遍历它时对其进行修改

```
string[] ar;
        foreach (var kvp in dict)
        {
            if (kvp.Key == "STAR-016")
            {
                foreach (var v in kvp.Value)
                {
                    if (v.Contains(','))
                    {
                        ar = v.Split(',');
                        foreach (var a in ar)
                        {
                            kvp.Value.Add(a);
                        }
                    }
                }
            }
        } 
```

我怎样才能得到想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:56:54.110

尝试使用 LINQ：

```
var list = new List<string>()
{
    "value a",
    "value b",
    "value 1, value 2, value 3",
    "value c"
};

/* THIS IS THE IMPORTANT PART: */
/* Replace list with kvp.Value */
list = list.SelectMany( 
         i => i.Split( ',' ).Select( v => v.Trim() ) 
       ).ToList();

foreach ( var item in list )
    Console.WriteLine( item ); 
```

输出：

> 值 a
> 值 b
> 值 1
> 值 2
> 值 3
> 值 c

要在您的代码中使用它：

```
foreach (var kvp in dict)
{
    if (kvp.Key == "STAR-016")
    {
        var newList = 
            kvp.Value.SelectMany(
                i => i.Split( ',' ).Select( v => v.Trim() )
            );
        kvp.Value.Clear();
        kvp.Value.AddRange(newList);
    }
} 
```

*感谢@Mudu 指出更简单的`i =>`语法*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:50:18.887

您可以循环`List`使用`for`而不是`foreach`修改项目

```
for (int i = 0; i < kvp.Value.Count; i++)
{
    if (kvp.Value[i].Contains(','))
        ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T12:53:30.340

假设这只是一个示例，并且您实际上不仅想要一个键`STAR-016`，而且想要所有值（即 a `List<string>`）包含逗号的地方：

```
Dictionary<string, List<String>> dict = new Dictionary<string, List<String>>();
dict.Add("STAR-016", new List<string>() { 
    "value a", "value b", "value c", "value 1, value 2, value 3", "value d"
});

foreach (var kvp in dict)
{
    for (int i = kvp.Value.Count - 1; i >= 0; i--)
    {
        string str = kvp.Value[i];
        if (str.Contains(','))
        {
            var parts = str.Split(',').Select(p => p.Trim());
            kvp.Value.RemoveAt(i);
            kvp.Value.InsertRange(i, parts);
        }
    }
} 
```

[**演示**](http://ideone.com/adOERu)

我从结尾循环到开头以避免并发症，因为`InsertRange`会添加新的字符串，这会增加`Count`.
我正在使用`RemoveAt`添加的新字符串（用逗号分隔的每个部分一个）用逗号替换字符串。我使用`InsertRange`而不是`AddRange`因为你想保持订单。

结果：

```
value a
value b
value c
value 1
value 2
value 3
value d 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T13:04:14.913

您应该能够使用`SelectMany`.

```
dict["STAR-016"] = dict["STAR-016"].SelectMany(s=>s.Split(',')).ToList(); 
```

这会将您的密钥列表替换为以逗号分隔字符串的列表，如果字符串不包含逗号，它只会返回字符串。`StringSplitOptions.RemoveEmptyEntries`如果您不希望连续逗号产生空字符串，您也可以考虑使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T12:58:03.610

*（编辑：juharr 的[https://stackoverflow.com/a/14875503/17713](https://stackoverflow.com/a/14875503/17713)与内置 LINQ 功能和更多功能风格基本相同，这在描述实际问题时通常更具表现力）*

我会采用一种`yield`不会*修改原始集合*的方法。`List<string> orig`下面是一个对也可能在字典中的 a 进行操作的示例代码：

```
public static void Main()
{
    List<string> orig = new List<string>()
    {
        "value a",
        "value b",
        "value c",
        "value 1, value 2, value 3",
        "value d"
    };

    var result = Flatten(orig).ToList();

    foreach(string s in result)
    {
        Console.WriteLine(s);
    }
}

private static IEnumerable<string> Flatten(IList<string> orig)
{
    foreach(string s in orig)
    {
        // split anyway, if there's no colon you just get a one-element
        // array containing s, see
        // http://msdn.microsoft.com/en-us/library/b873y76a.aspx
        foreach(string v in s.Split(','))
        {
            yield return v.Trim();
        }
    }
} 
```

在字典中，您可以将结果替换为原始值：

```
dict["STAR-016"] = Flatten(dict["STAR-016"]).ToList() 
```

旁注：上面的代码`STAR-016`直接找到而不是使用`foreach`更慢的 a 。如果您没有缩短代码并且实际上只是在查找，`STAR-016`我建议您使用这种字典查找方式。

# jquery - 非特定数量的 CSS3 jQuery 动画

> ID：14875118
> 
> 赞同：0
> 
> 时间：2013-02-14T12:42:02.283
> 
> 标签：jquery, css, rotation

当我使用 jQuery 动画时，我经常使用 += 来告诉元素改变一定的量。例如：

```
$('div').animate({top, '+=100px'}, 1000, 'linear'); 
```

我在动画中使用 CSS3 的旋转功能。有没有办法做类似 jQuery 的 += 功能的事情？

例如，如果我有 3 个 div 最初都以不同的角度旋转并悬停，我希望它们都再旋转 10 度。我不能在所有这些上设置 rotate(10deg) 因为这只会将它们全部旋转到同一点。

# html - HTML5 / kineticJS getIntersection 函数实现

> ID：14875119
> 
> 赞同：4
> 
> 时间：2013-02-14T12:42:02.407
> 
> 标签：html, collision-detection, kineticjs

我正在通过[http://www.html5canvastutorials.com](http://www.html5canvastutorials.com)`kineticjs`提供的教程进行学习，事情很好且易于理解，但是，我在理解我想在不同对象之间使用的功能时遇到问题，同时检测对象。`getIntersection``dragging``collision / overlapping`

据我了解该示例，该`getIntersection`函数需要一个位置并检查它是否与任何其他对象相交..

虽然我得到了它们，但有一些问题。

我无法做到这一点..

以下是我到目前为止尝试过的代码..

```
<script>

var stage = new Kinetic.Stage({
    container: 'container',
    width: 1000,
    height: 500,
    opacity: 0.5
});

var layer = new Kinetic.Layer();
var previous_position;
var new_position;
var collision = false;
var colors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple'];
var yellowBox = null;
for(var n = 0; n < 6; n++) {
    // anonymous function to induce scope
    (function() {
        var i = n;
        if(n < 3){
            y = 50;
            x = i * 100 + i * 10;
        }else{
            y = 150;
            x = (i - 3) * 100 + (i - 3) * 10 ;
            if(n == 3){
                x = 0;
            }

        }
        var box = new Kinetic.Rect({
            x: x,
            y: y,
            width: 100,
            height: 50,
            fill: colors[i],
            stroke: 'black',
            strokeWidth: 4,
            draggable: true,
            name: colors[i]
        });

        box.on('dragstart', function() {
            previous_position =     {
                                        x: this.attrs.x,
                                        y: this.attrs.y 
                                    }; 
        });

        box.on('dragend', function() {
            if(collision){
                //this.setPosition(previous_position);
                layer.draw();
                collision = false;
            }else{
                //this.setPosition(new_position);
                layer.draw();
            }
        });

        box.on("dragmove", function(evt) {
            console.log(layer.children.length);
            if(layer.children.length > 1){
                console.log('dragging');
                new_position = {x: this.attrs.x,
                            y: this.attrs.y};
        //              var posBL = {x: this.attrs.x,
        //                          y: this.attrs.height + this.attrs.y};
        //              var posTR = {x: this.attrs.x    + this.attrs.width,
        //                          y: this.attrs.y};
                var posBR = {x: this.attrs.x    + this.attrs.width,
                            y: this.attrs.y + this.attrs.height };
                var collisionTL = this.getStage().getIntersections(new_position);
        //              var collisionBL = this.getStage().getIntersections(posBL);
        //              var collisionTR = this.getStage().getIntersections(posTR);
        //              var collisionBR = this.getStage().getIntersections(posBR);

                console.log(collisionTL);
                console.log(collisionTL.shapes);

        //              if(collisionTL.length > 1 || collisionBL.length > 0 || collisionTR.length > 0 || collisionBR.length > 0){
                if(collisionTL.length > 1){
                    console.log(collisionTL.shapes);
                    collision = true;
                }else{ //if(collisionBR.length > 0){
                    collision = true;
                }
        //              for(i=0; i < collision.length; i++){
        //              //  console.log(collision[i]._id);
        //              }
            }
        });

        if(colors[i] === 'yellow') {
            yellowBox = box;
        }

        layer.add(box);
    })();
}

stage.add(layer);

</script> 
```

如果`dragmove`你能看到我得到了拖动框的四个角位置{立即评论}，我能够检测到重叠/碰撞，但它有两个问题：

**1.**非常慢，我的测试中只有 3 个对象

**2.**如果没有角点相交，它不会触发碰撞的东西{因为这个盒子可以更大，所以它可以完全覆盖另一个}

如果有人可以帮助我完成这些工作，我将不胜感激。

**[A]**任何拖动的对象如果以任何方式与我希望它显示碰撞的任何其他对象重叠。

**[B]**如果可能，请在可能的特定图层组上工作 [C] 除了完成上述任务之外的`getIntersection`任何其他解决方法`kineticJS`

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:59:43.307

好的，KineticJS 的开发人员正在努力改进 .getIntersections() 函数……或者至少他说他是。但在功能改进之前，您必须制作自己的碰撞检测功能。假设您的对象是矩形或可以分成一系列点，您应该使用以下内容：

创建一个函数来确定一个点是否在一个形状中（如果一个矩形的角在另一个矩形内），如下所示：

```
 function checkCollide(pointX, pointY, objectx, objecty, objectw, objecth) { // pointX, pointY belong to one rectangle, while the object variables belong to another rectangle
      var oTop = objecty;
      var oLeft = objectx; 
      var oRight = objectx+objectw;
      var oBottom = objecty+objecth; 

      if(pointX > oLeft && pointX < oRight){
           if(pointY > oTop && pointY < oBottom ){
                return 1;
           }
      }
      else
           return 0;
 }; 
```

然后你可以做一个大循环，遍历层中的所有对象以检查碰撞，如下所示：

```
 var children = layer.getChildren();
 for( var i=0; i<children.length; i++){  // for each single shape
     for( var j=0; j<children.length; j++){ //check each other shape
         if(i != j){ //skip if shape is the same
            if(checkCollide(children[i].getX(), children[i].getY(), children[j].getX(), children[j].getY(), children[j].getWidth(), children[j].getHeight()))
                alert('top left corner collided');
         }
     }
 } 
```

我提供的 checkCollide 函数仅检查每个形状左上角的碰撞，因此您必须修改该函数以检查所有角，这不是很长的重写，即使在 stackoverflow 上也有很多教程处理“边界”矩形碰撞检测'

这似乎是一个非常繁重的函数，但令人惊讶的是它仍然比 .getIntersections() 快。此外，您应该添加额外的 if 语句，以便该函数不会一直运行所有检查。

我自己创建了一个游戏并使用 .intersects() 并且速度很慢。我切换到这种“更简单”的碰撞检测，现在我的游戏运行在 60FPS 左右。[http://cs.neiu.edu/~tsam/physics/index.phtml](http://cs.neiu.edu/~tsam/physics/index.phtml)（测试/测试）如果你想检查一下。您可以查看页面源代码以了解我如何将碰撞检测构造得更高效（例如在 checkIntersectsGoal() 函数中。

# wordpress - Wordpress + Prestashop 网站中的路径

> ID：14875120
> 
> 赞同：2
> 
> 时间：2013-02-14T12:42:03.173
> 
> 标签：wordpress, path, styling, prestashop

我有一个 wordpress 网站，在 wp 根文件夹中安装了 Prestashop (/shop)。两个站点之间的链接工作正常。

但是，在我将 prestashop 文件夹从旧网站移动到新的 wordpress 网站后，我的很多样式和图像都被破坏了。

Prestashop 本身工作正常，而且 Prestashop 后台包含的图像也在工作。对于我所看到的，我用于 prestashop 样式的自定义 css 以及我在 /img 中的图像都消失了。

我的问题是，也许我可以通过从我的 wp 主题表和 img 文件夹中添加样式和图像来扭转这个局面并优化我的网站 - 因为网站的结构无论如何都应该是相同的.. - 谁能给我一些指导如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:35:45.337

前段时间我在我网站的一个文件夹中安装了 Prestashop。

对于我的网站，我也使用了 Wordpress。

对我来说， [Prestashop 论坛](http://www.prestashop.com/forums/)非常适合指导。你可以在那里寻求帮助。

# jsf-2 - 在 JSF 中调用两个 Bean 方法

> ID：14875121
> 
> 赞同：0
> 
> 时间：2013-02-14T12:42:09.267
> 
> 标签：jsf-2, primefaces

是否可以在一个 primefaces 组件中从 Bean 调用两种方法到 JSF 页面？我在 Bean 中有`listOfNames()`和方法。`detailsOfName()`这两种方法返回`List`类型。

在 a`<p:dataGrid>`中，是否可以从这两种方法中获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:52:00.310

您不能调用多个属性。只需将两个列表合并为一个列表并返回即可。

例如

```
List<String> listOfEverything = new ArrayList<String>();
listOfEverything.addAll(listOfNames);
listOfEverything.addAll(detailsOfName); 
```

请记住，[您不应该在 getter 方法中做生意](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。在 bean 的 (post)constructor 或 (action)listener 方法中做准备工作，这取决于您在 GET 或 POST 请求中是否需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:10:10.330

我会按照 BalusC 建议的方式进行操作，但如果需要，我会在您的视图中或其他地方引入将两个列表分开的功能，从而返回`List<List<String>>`, 或`Map<String, List<String>>`, 即

```
 List<List<String>> unitedList = new ArrayList<List<String>>();
    unitedList.add(listOfNames);
    unitedList.add(detailsOfName); 
```

或者

```
 Map<String, List<String>> unitedMap = new HashMap<String, List<String>>();
    unitedMap.put("listOfNames", listOfNames);
    unitedList.add("detailsOfName", detailsOfName); 
```

# c++ - 如何使用 C++ 计算召回率和精度？

> ID：14875123
> 
> 赞同：2
> 
> 时间：2013-02-14T12:42:32.333
> 
> 标签：c++, opencv, boost, eigen

是否有任何可以计算召回率和精度的 c++ 库，如 Boost、Eigen、OpenCV？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:42:10.550

不需要用于精确度和召回率的库。它可以很容易地编码。

`precision = tp / (tp + fp)`和`recall = tp / (tp + fn)`

让，

N - 第一个图像中的关键点数，在第二个图像上也可见

N1 - 第一个图像中已匹配的关键点数。

n - 匹配器找到的正确匹配的数量

然后，

n/N1 - 精度

n/N - 召回

看看这里的功能：[https ://github.com/Itseez/opencv/blob/master/samples/cpp/detector_descriptor_matcher_evaluation.cpp](https://github.com/Itseez/opencv/blob/master/samples/cpp/detector_descriptor_matcher_evaluation.cpp)

# android - 支持的设备数量差异

> ID：14875126
> 
> 赞同：2
> 
> 时间：2013-02-14T12:42:44.807
> 
> 标签：android, manifest, google-play

我们有两个版本的应用程序（专业版/精简版）。Google play 显示了 pro 版本 2263 和 lite 版本 2496 支持的设备数量。这怎么可能？

这是清单上的差异：

## 专业版

```
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true"
/>

<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.location" android:required="false" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" />
<uses-feature android:name="android.hardware.wifi" android:required="false" />
<uses-feature android:name="android.hardware.bluetooth" android:required="false" />
<uses-feature android:name="android.hardware.screen.portrait" android:required="false" /> 
```

## 精简版

```
 <supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true" />

<uses-feature android:name="android.hardware.location" android:required="false" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" />
<uses-feature android:name="android.hardware.screen.portrait" android:required="false" /> 
```

谢谢回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:38:53.403

考虑到你所有的过滤器都设置为`required=false`我会假设 PRO 版本是付费的，在这里猜一个答案：

世界上有 2496 - 2263 台设备仅在不接受 Play 商店付费区的国家/地区发布。

# c# - 什么是参数名称规范（for）？

> ID：14875129
> 
> 赞同：3
> 
> 时间：2013-02-14T12:42:57.973
> 
> 标签：c#, syntax, parameters, coding-style, naming-conventions

Resharper 建议我添加参数名称规范，将方法调用从：

```
MyEvent(sender, e); 
```

至

```
MyEvent(sender: sender, e: e); 
```

以前从未见过这种语法，也无法通过谷歌搜索找到什么是参数名称规范以及为什么需要它们？

PS
有类似的讨论：

*   [应该添加还是删除这些论点？](https://stackoverflow.com/questions/10953507/should-these-arguments-be-added-or-removed)

但它没有解决我的问题

# javascript - 使用带有循环的 settimeout() 的 javascript

> ID：14875134
> 
> 赞同：1
> 
> 时间：2013-02-14T12:43:22.857
> 
> 标签：javascript, arrays, loops, multidimensional-array, settimeout

我有一个包含 8x10 单元格的表格.. 每个销售都有一个具有自己 id 的输入元素（11、12、...、21、22、23、...）现在我想在之后填充这些输入（让说0.5秒）我刚刚输入了一些测试值

```
 Betrag = new Array();
        Betrag[0] = new Array();
        Betrag[1] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","513.000,00");
        Betrag[2] = new Array("asd","adsd","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[3] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[4] = new Array("asd","uisgui","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[5] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[6] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[7] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","asd");
        Betrag[8] = new Array("asd","asd","asd","asd","asd","asd","asd","asd","asd","asd","asd");

          for(i=1; i<=8; i++){
            for(k=1; k<=10; k++){
              setTimeout(function schreiben(){document.getElementById(''+i+k+'').value= Betrag[i][k];}, 1000);
              //document.getElementById(''+i+k+'').value= Betrag[i][k];
            }
          } 
```

编译器说“TypeError：无法读取未定义的属性'11'”

如果我不使用 settimeout() 函数，整个循环工作正常，但是使用这个函数我得到了这个错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:17:04.427

你可以尝试这样的事情：

```
 var i = 1;
    var k = 1;
    var obj = setInterval( function () {
        document.getElementById(i + '' + k).value= Betrag[i][k];
        if(k <= 10)
           k++;
        else
        {
            k = 1;
            if(i<=8)
                 i++;
            else
                 clearInterval(obj);
        }
    }, 1000); 
```

[这是http://jsfiddle.net/Ex98V/](http://jsfiddle.net/Ex98V/)上的一个运行示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:19:44.540

这应该按照您想要的方式工作。

```
for(i=1; i<=8; i++){
    for(k=1; k<=10; k++){
        (function(i, k){
            setTimeout(function schreiben(){document.getElementById(''+i+k+'').value= Betrag[i][k];}, 1000*k + 10000*i);
            //document.getElementById(''+i+k+'').value= Betrag[i][k];
        })(i, k);
    }
} 
```

为了让事情更清楚一点，请考虑像这样重构：

```
for(i=1; i<=8; i++){
    for(k=1; k<=10; k++){
        setSchreibTimeout(i, k);
    }
}

function setSchreibTimeout(i, k){
    setTimeout(function schreiben(){document.getElementById(''+i+k+'').value= Betrag[i][k];}, 1000*k + 10000*i);
    //document.getElementById(''+i+k+'').value= Betrag[i][k];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:50:51.293

`k`并在循环结束**后**`i`读取（准确地说是 1 秒）。然后它们的值是 9 和 11，导致数组溢出问题。**`for`**

 **修复它的一种选择是创建一个完成工作的函数，并从`k`and`i`变量创建一个固定字符串来调用它：

```
function schreiben(__i, __k) {
   document.getElementById(''+__i+__k+'').value= Betrag[__i][__k];
} 
```

然后`setTimeout`像这样调用：

```
setTimeout("schreiben("+i+","+k+")", 1000); 
```

不是最优雅的方式，但它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:57:59.263

巴特弗里德里希斯是对​​的。不知道为什么要这样做，但是您可以在 schreiben 函数中声明几个 var 并在同一个 screiben 函数中递增它们。**

# java - Deployment Toolkit for Java applet：未安装 JVM 时如何避免重定向

> ID：14875135
> 
> 赞同：2
> 
> 时间：2013-02-14T12:43:26.960
> 
> 标签：java, javascript, applet, jnlp, java-deployment-toolkit

我创建了一个小程序；它使用如下[部署工具包](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/depltoolkit_index.html)进行部署（URL 是假的）：

```
<script type="text/javascript" 
             src="https://www.java.com/js/deployJava.js"></script>
<script>
var attributes = {
        code:'br.com.brandizzi.adam.applet.MyApplet.class',
        archive:'http://adam.brandizzi.com.br/html/applet.jar',
        width : 50,
        height : 1
    };
    var parameters = {
        fontSize : 1,
    };
    var version = '1.6';
    deployJava.runApplet(attributes, parameters, version);
</script> 
```

它运作良好。然而，幸运的是，我通过一台没有 JVM 的机器访问了我的站点，并且它总是被重定向到[http://www.java.com](http://www.java.com) - 正如[文档所述](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html)：

> 如果客户端没有所需的最低 JRE 软件版本，Deployment Toolkit 脚本会将浏览器重定向到[http://www.java.com](http://www.java.com)以允许用户下载最新的 JRE 软件。在某些平台上，用户可能会在查看包含小程序的网页之前被重定向。

有没有办法避免这种重定向？页面可以在没有 JVM 的情况下运行良好，小程序只是一点点改进。无论如何，我们的用户可能会对这种重定向感到非常困惑，他们甚至没有安装 JVM 的权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:28:38.473

如果你看一下 deployJava.js 脚本，runApplet 函数是这样说的：

> ```
>  /**
>      * Ensures that an appropriate JRE is installed and then runs an applet.
>      * minimumVersion is of the form #[.#[.#[_#]]], and is the minimum
>      * JRE version necessary to run this applet.  minimumVersion is optional,
>      * defaulting to the value "1.1" (which matches any JRE).
>      * If an equal or greater JRE is detected, runApplet() will call
>      * writeAppletTag(attributes, parameters) to output the applet tag,
>      * otherwise it will call installJRE(minimumVersion + '+'). 
> ```

所以如果你这样打电话

```
deployJava.runApplet(attributes, parameters, null); 
```

或者像这样

```
deployJava.runApplet(attributes, parameters, 'undefined'); 
```

或者像这样

```
deployJava.runApplet(attributes, parameters, '1.1'); 
```

它只会检查是否安装*了*Java ，然后才会重定向到 java.com 进行安装。既然你有一个小程序，你确实需要 Java :)

或者，您可以直接调用**deployJava.writeAppletTag(attributes, parameters)**：

> ```
>  /**
>      * Outputs an applet tag with the specified attributes and parameters, where
>      * both attributes and parameters are associative arrays.  Each key/value
>      * pair in attributes becomes an attribute of the applet tag itself, while
>      * key/value pairs in parameters become <PARAM> tags.  No version checking
>      * or other special behaviors are performed; the tag is simply written to
>      * the page using document.writeln().
>      *
>      * As document.writeln() is generally only safe to use while the page is
>      * being rendered, you should never call this function after the page
>      * has been completed.
>      */ 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:30:54.433

使用 Deployment Toolkit 的全部意义在于，如果用户没有 JVM，它会提示他们安装 JVM，以便您的 applet 可以运行。如果您不希望它们被提示，那么就不要使用部署工具包。

如果他们已经安装了合适的 JVM，那么您的小程序将运行。如果没有，页面的其余部分应该正常加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T20:10:51.800

您可以使用[deployJava.js](http://www.java.com/js/deployJava.txt)`getJREs`中的函数。

# jquery - jquery mouseenter 返回布尔值

> ID：14875139
> 
> 赞同：0
> 
> 时间：2013-02-14T12:43:37.757
> 
> 标签：jquery, hover

我在 jquery API Ref 中读到，mouseenter 和 mouseleave 返回 jQuery 对象。但它们实际上返回布尔值。所以 jquery 1.9.0 中的悬停并没有真正起作用，因为代码是：

```
return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver ); 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:51:29.083

您不能设置这样的事件处理程序。你应该像这样试一试：

```
return this.mouseenter( fnOver ).mouseleave( fnOut() || fnOver() ); 
```

您提供的示例与以下示例相同：

```
alert( true || false );
alert( false || true ); 
```

在这两个示例中，输出将在哪里，`true`因为它是一个布尔值。

但是，您可以尝试创建一个独特的处理程序，该处理程序将在其结构中包含`fnOut`和`fnOver`函数的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:17:32.503

找出为什么会发生这种情况。其中一个框架是覆盖 on() 函数。

# android - 在 Android 中，是否有更优雅的方式来检索内部类中的应用程序上下文？

> ID：14875145
> 
> 赞同：0
> 
> 时间：2013-02-14T12:44:20.377
> 
> 标签：android

在 Android 中，是否有一种更优雅的方式来**检索**内部类中的应用程序上下文，而不是将上下文作为参数传递？

```
public class MainActivity extends Activity {

    class SeekBarChangeListener implements SeekBar.OnSeekBarChangeListener
        {
            private Context context;
            private TextView distanceTextView;

            public SeekBarChangeListener(Context context, TextView distanceTextView) {
                this.context = context;
                this.distanceTextView = distanceTextView;
            }
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:46:26.367

将其视为 Activity 的内部类，您可以使用：

```
this.context = MainActivity.this.getApplicationContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:46:26.100

从内部类调用`MainActivity.this`，它将为您提供 Activity 上下文对象。

**除非你真的需要它，否则你不**应该使用`applicationContext`ie 调用`getApplicationContext()`，但从你的示例代码来看，`Activity context`应该足够了

# android - 在Android中单击按钮时将字符串数组传递给下一个活动

> ID：14875146
> 
> 赞同：0
> 
> 时间：2013-02-14T12:44:24.663
> 
> 标签：android, arrays, string, button, android-intent

朋友们。我是android开发的新手，请帮助我。我想将我的字符串数组arrayItemName 传递给下一个活动，并在单击按钮时将其显示在下一个活动上。

```
@Override
public void onClick(View v)
{
    // TODO Auto-generated method stub
  Intent intent = new Intent(MakeOrder.this,ConfirmOrder.class);
  String []arrayItemName=itemName.split("\\,");
  for(int i=0;i<arrayItemName.length;i++)
  {
   intent.putExtra("My_Array_ItemName",arrayItemName[i].toString());
  }
  startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:47:06.417

尝试：

```
Bundle bundle = new Bundle();
bundle.putStringArray(key, new String[]{value1, value2});
Intent mIntent = new Intent(context, Class);
mIntent.putExtras(bundle ); 
```

在接收方：

```
Bundle bundle = getIntent().getExtras();
String[] array = bundle.getStringArray(key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:48:28.157

尝试这个：

```
 intent.putExtra("My_Array_ItemName", arrayItemName);
 startActivity(intent);

 ....

 Bundle extras = getIntent().getExtras();
 String[] arr = extras.getStringArray("My_Array_ItemName"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:52:11.220

尝试这个：

```
Bundle b=new Bundle();
b.putStringArray(key, new String[]{value1, value2});
Intent i=new Intent(context, Class);
i.putExtras(b); 
```

希望这会帮助你。

为了阅读：

如果您需要在按钮单击后显示值。您将以下代码放入 onclick 方法中

```
Bundle b=this.getIntent().getExtras();
String[] array=b.getStringArray(key); 
```

# linq - linq（右）连接不返回正确数量的对象

> ID：14875149
> 
> 赞同：1
> 
> 时间：2013-02-14T12:44:37.393
> 
> 标签：linq, join, datatable, right-join

我对 LINQ 中的连接有疑问。我目前正在将访问应用程序转换为 .NET，其中数据是从两个不同服务器上的两个不同数据库中检索的。在旧应用程序中，可以通过一个查询来检索数据：

SELECT *, tbl2.Descr, tbl2.Form FROM tbl2 RIGHT JOIN tbl1 ON tbl2.proId2 = tbl1.proId

我发现在 .NET 中执行此操作的一种方法是分别检索两个表，然后使用 LINQ 将它们连接起来。我在 LINQ 方面没有经验，所以我的逻辑或代码可能完全错误，因为我似乎无法让它工作。

首先，我尝试进行普通连接（不对），但是当两个表包含近 2000 行时，只返回 18 行。我还检查了数据，它肯定会导致更多行，没有那么多空单元格。因此，我将右/左连接放在一起，但这实际上会导致错误。当我调试它时，执行 LINQ 语句时一切都很好，但是当我进入 foreach 时，会显示一个错误，并且错误实际上是在 linq 语句中指示的，说 table2 是空的。当我检查 table1 时，我也只看到 22 个数据行。

我究竟做错了什么？

```
DataTable dtTarget= data1.Clone();
var dt2Columns = data2.Columns.OfType<DataColumn>().Select(dc =>
     new DataColumn(dc.ColumnName, dc.DataType, dc.Expression, dc.ColumnMapping));
var dt2FinalColumns = from dc in dt2Columns.AsEnumerable()
                    where dtTarget.Columns.Contains(dc.ColumnName) == false
                              select dc;

dtTarget.Columns.AddRange(dt2FinalColumns.ToArray());

var results = from table1 in data1.AsEnumerable()
              join table2 in data2.AsEnumerable() 
              on table1.Field<String>("proId") equals table2.Field<String>("proId2")
              select table1.ItemArray.Concat(table2.ItemArray).ToArray();

foreach (object[] values in results)
            dtTarget.Rows.Add(values); 
```

外连接：

```
var results = from table1 in data1.AsEnumerable()
              join table2 in data2.AsEnumerable() on table1.Field<String>("proId")     equals table2.Field<String>("proId2") into t_join
              from table2 in t_join.DefaultIfEmpty(null) select table1.ItemArray.Concat(table2.ItemArray).ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:07:31.273

我注意到您使用字符串作为连接键。也许环境之间的字符串比较不同（访问与.net）。Access 可以使用不区分大小写的比较，而 .net 的默认值是区分大小写的。

为了让 .net 使用不区分大小写的比较，这里是第一个查询：

```
var results = data1.AsEnumerable()
  .Join(
    data2.AsEnumerable(),
    row1 => row1.Field<String>("proId"),
    row2 => row2.Field<String>("proId2"),
    (row1, row2) => row1.ItemArray.Concat(row2.ItemArray).ToArray(),
    StringComparer.InvariantCultureIgnoreCase); //and now caps are ignored. 
```

第二个查询：

```
var results = data1.AsEnumerable()
  .GroupJoin(
    data2.AsEnumerable(),
    row1 => row1.Field<String>("proId"),
    row2 => row2.Field<String>("proId2"),
    (row1, row2s) => new {Row1 = row1, Row2s = row2s},
    StringComparer.InvariantCultureIgnoreCase)
  .SelectMany(
    x => x.row2s.DefaultIfEmpty(null)),
    (x, row2) => row2 == null ? x.Row1.ItemArray : x.Row1.ItemArray.Concat(row2.ItemArray).ToArray()
  ); 
```

# actionscript-3 - 如何在 Flex 中处理事件？

> ID：14875150
> 
> 赞同：0
> 
> 时间：2013-02-14T12:44:37.523
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

```
 import flash.events.Event;

   public class RequestEvent extends Event
        {
    public static const REQUEST:String = "request";

    private var Results:Boolean;
    public function get Results():Boolean
    {
        return _Results;
    }

    public function RequestEvent(Results:Boolean=false)
    {
        super(REQUEST);
        Results = Results;
    }

    override public function clone():Event
    {
        return new RequestEvent(Results);
    }
} 
```

}

嗨，有人能解释一下为什么我们要进行`overridding`函数克隆并调用 super(request), new in flex ........所以不要介意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:29:34.643

关于在自定义事件中覆盖克隆方法的问题非常流行，这似乎是 Flex 奇怪的事情之一。你可以在[这里](http://manishjethani.com/archives/2008/04/04/why-its-important-to-override-clone-in-your-custom-event-class)阅读。

所以你必须重写这个方法，只有在这个方法中你才能定义自定义属性的值。该方法不常见，因此如果您尝试调试它，您将永远无法在其主体中获得调试器。

如果您尝试在构造函数中定义自定义属性的值，该值将被忽略。

使用常量字符串作为事件的类型值是不切实际的。在这种情况下，您的 RequestEvent 的所有实例都属于同一类型，您无法告诉它们在不同的情况下使用。正如您在下面的示例中所见，此字符串在动作侦听器中用于映射侦听器函数。

在此示例中，我有三个具有不同事件的按钮 - 普通事件、我的 RequestEvent 版本和您的版本。看看吧，希望对理解这个案子有帮助。

//应用

```
<fx:Script>
    <![CDATA[
        import fld02.com.customevent.RequestEvent;
        import fld02.com.customevent.RequestEvent2;

        import mx.controls.Alert;

        private function onCustomGroupBtn2Clicked(evt:RequestEvent):void
        {
            Alert.show('Btn2Clicked: results = ' + evt.results.toString(), 'This is RequestEvent');
        }

        private function onCustomGroupBtn3Clicked(evt:RequestEvent2):void
        {
            Alert.show('Btn3Clicked: Results = ' + evt.Results.toString(), 'This is your RequestEvent');
        }
    ]]>
</fx:Script>

<customevent:CustomGroup 
    BUTTON1_CLICKED="{Alert.show('Btn1Clicked', 'This is Event')}" 
    BUTTON2_CLICKED="onCustomGroupBtn2Clicked(event)"  
    request="onCustomGroupBtn3Clicked(event)"/>
</s:Application> 
```

//自定义组

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="346" height="144">

<fx:Metadata>
    [Event(name="BUTTON1_CLICKED", type="flash.events.Event")]
    [Event(name="BUTTON2_CLICKED", type="fld02.com.customevent.RequestEvent")]
    [Event(name="request", type="fld02.com.customevent.RequestEvent2")]
</fx:Metadata>

<fx:Script>
    <![CDATA[
        private function onBtn1Click():void
        {
            this.dispatchEvent(new Event("BUTTON1_CLICKED"));
        }

        private function onBtn2Click():void
        {
            var requestEvent:RequestEvent = new RequestEvent("BUTTON2_CLICKED");
            requestEvent.results = true;

            this.dispatchEvent(requestEvent);
        }

    ]]>
</fx:Script>

<s:Button x="43" y="31" width="183" label="Generate Event" click="onBtn1Click()"/>

<s:Button x="43" y="62" width="183" label="Generate RequestEvent" click="onBtn2Click()"/>

<s:Button x="43" y="93" width="183" label="Generate Your RequestEvent" click="{this.dispatchEvent(new RequestEvent2(true))}"/>
</s:Group> 
```

//我的请求事件

```
package fld02.com.customevent
{
import flash.events.Event;

public class RequestEvent extends Event
{
    private var _results:Boolean;

    public function RequestEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false)
    {
        super(type, bubbles, cancelable);
    }

    override public function clone():Event
    {
        var requestEvent:RequestEvent = new RequestEvent(this.type);
        requestEvent.results = this.results;

        return requestEvent;
    }

    public function get results():Boolean
    {
        return _results;
    }

    public function set results(value:Boolean):void
    {
        _results = value;
    }
}
} 
```

//你的请求事件

```
package fld02.com.customevent
{
import flash.events.Event;

public class RequestEvent2 extends Event
{
    public static const REQUEST:String = "request";

    public function RequestEvent2(Results:Boolean=false)
    {
        super(REQUEST);
        Results = Results;
    }

    private var _Results:Boolean;

    public function get Results():Boolean
    {
        return _Results;
    }

    override public function clone():Event
    {
        return new RequestEvent2(Results);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:28:16.460

需要实现 clone 方法，以便在事件处理程序希望再次分派相同事件时，Flex 可以重新克隆事件。Flex 确实提供了一种默认实现，但如果需要，可以覆盖该方法以不同方式克隆事件。

至于调用super方法，你必须调用super，因为你是在继承Event类。类型（在您的情况下为 REQUEST）必须是唯一的字符串，可以唯一地标识 Flex 平台的事件。

希望能帮助到你

问候。

# java - 将 Object 作为 JSTL 标记属性传递

> ID：14875155
> 
> 赞同：3
> 
> 时间：2013-02-14T12:44:45.133
> 
> 标签：java, exception, object, attributes, jstl

我正在尝试制作自定义标签。在这个标签中，我将传递一个对象作为属性，它应该返回一个数组列表。我已经尝试过了，但我遇到了一个例外。

```
org.apache.jasper.JasperException: java.lang.ClassCastException: java.lang.String cannot be cast to com.showtable.helper.ParentNode 
```

我认为我的参数是作为 String 发送到类的，并且它无法将对象转换为给定类型。我该如何解决它并传递对象本身并在类中对其进行类型转换（因为 String 本身是一个类，我认为它可能，但我不知道该怎么做）我的代码如下所示。内页

**内页**

```
<%@taglib prefix="test" uri="/WEB-INF/tlds/ShowTableCustomTag.tld"%>
<%
//the 'theMainObject' is of type ParentNode
request.setAttribute("mainobject", theMainObject);
%>
<test:getorder objectpara="mainobject"></test:getorder> 
```

**ShowTableCustomTag.tld 内部**

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
  <tlib-version>1.0</tlib-version>
  <short-name>showtablecustomtag</short-name>
  <uri>/WEB-INF/tlds/ShowTableCustomTag</uri>
 <tag>
    <name>getorder</name>
    <tagclass>cc.showtable.customtag.ParentNodeOrder</tagclass>
    <info>tag to return order as arraylist</info>
    <attribute>
      <name>objectpara</name>
      <required>true</required>
    </attribute>
</tag>
</taglib> 
```

**在 ParentNodeOrder 类内部**

```
package cc.showtable.customtag;
import java.io.IOException;
import javax.servlet.jsp.JspException;
import javax.servlet.jsp.JspWriter;
import javax.servlet.jsp.tagext.TagSupport;
import com.showtable.helper.ParentNode;
public class ParentNodeOrder extends TagSupport{

     private Object objectpara;

    @Override
    public int doStartTag() throws JspException {

        try {
            //Get the writer object for output.
            JspWriter out = pageContext.getOut();
            ParentNode parent=(ParentNode)objectpara;
            out.println(parent.getOrder());

        } catch (IOException e) {
            e.printStackTrace();
        }
        return SKIP_BODY;
    }
    public Object getObjectpara() {
        return objectpara;
    }
    public void setObjectpara(Object objectpara) {
        this.objectpara = objectpara;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:37:00.253

您遇到此异常是因为您在文件中的`<type>`标签内缺少标签。标签是可选的，没有标签的属性 被假定为数据类型。 此外，您需要设置. 代表**运行时表达式**值。您需要将其值设置为 true，以便可以在运行时动态计算属性的值。 所以你的声明在你的文件中应该是这样的：`<attribute>``.tld`
`<type>``<type>``String`
`rtexprvalue = true``rtexprvalue` **`attribute``.tld`**

 **```
<attribute>
    <name>objectpara</name>
    <required>true</required>
    <type>com.showtable.helper.ParentNode</type>
    <rtexprvalue>true</rtexprvalue>
</attribute> 
```

希望这可以帮助！**

# java - 如何在 javascript/ajax 中使用基于 Java 的 Soap Web 服务？

> ID：14875158
> 
> 赞同：-1
> 
> 时间：2013-02-14T12:44:50.157
> 
> 标签：java, javascript, ajax, web-services, soap-client

我必须提供一个 .jsp 页面（index.jsp）以及我的 Web 服务项目用于测试目的。基本上 .jsp 页面有一个文本区域，用于读取作为字符串的肥皂请求，并在提交时肥皂响应就会出现。

我尝试使用“javax.xml.ws.Service & Dispatch”类，它工作正常。但现在我被要求提供基于 javascript/ajax 的代码。

任何人都可以帮助我解决这个问题。

我在这里提供一个示例 .wsdl 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://zensar.com/greeting" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="Greeting"
    xmlns:grtng="http://zensar.com/greeting/schema"
    targetNamespace="http://zensar.com/greeting">
    <wsdl:types>
        <xsd:schema targetNamespace="http://zensar.com/greeting">
            <xsd:import namespace="http://zensar.com/greeting/schema"
                schemaLocation="Greeting.xsd"></xsd:import>
        </xsd:schema>
    </wsdl:types>
    <wsdl:message name="GreetingRequest">
        <wsdl:part element="grtng:GreetingRequest" name="GreetingRequest" />
    </wsdl:message>
    <wsdl:message name="GreetingResponse">
        <wsdl:part element="grtng:GreetingResponse" name="GreetingResponse" />
    </wsdl:message>
    <wsdl:portType name="GreetingPort">
        <wsdl:operation name="Greeting">
            <wsdl:input message="tns:GreetingRequest" />
            <wsdl:output message="tns:GreetingResponse" />
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="Greeting" type="tns:GreetingPort">
        <soap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="Greeting">
            <soap:operation soapAction="http://zensar.com/GreetingWS/Greeting" />
            <wsdl:input>
                <soap:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="Greeting">
        <wsdl:port binding="tns:Greeting" name="Greeting">
            <soap:address location="http://localhost:8085/Greeting/services" />
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions>** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:02:59.837

就个人而言，我会说直接通过 javascript 使用 Web 服务有点自虐。

在我看来，JavaScript 调用服务器端方法（使用任何可能的架构，c#、java、php 等）然后执行 CURL 请求并将响应发送回前端会容易得多。

当您可以在服务器端使用 Axis2 之类的东西来执行 SOAP 握手的样板重载时，用 javascript 手动编写一个肥皂端点似乎毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:52:32.697

你可以试试这个... [http://www.ibm.com/developerworks/webservices/library/ws-wsajax/](http://www.ibm.com/developerworks/webservices/library/ws-wsajax/) 这篇文章详细解释了一切。

# jquery - 如何模糊在 1 单击时单击另一个？当 .change() 选择选项时，我可以模糊 <select>但是当</select> 打开并单击另一个元素或 时，如何模糊 <select>？通常我们必须单击 2 次才能模糊</select> 元素，对吗？我怎样才能做到一键点击？$("select").focus(function () { $("code").html("focus"); }).b

> ID：14875159
> 
> 赞同：1
> 
> 时间：2013-02-14T12:44:56.313
> 
> 标签：jquery, select, focus, option, blur

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:50:26.317

问题是第一次点击只会关闭选择元素，它不会取消焦点。因此，要解决您的问题，您应该捕获关闭事件，然后执行以下操作：

```
$("select").blur(); // This will even call your event listener! 
```

但是如何捕捉 close 事件呢？不幸的是，没有这样的（官方）事件。但也许这个问题会有所帮助：[当 HTML 选择元素关闭时是否会触发 DOM 事件？](https://stackoverflow.com/questions/6207929/is-there-a-dom-event-that-fires-when-an-html-select-element-is-closed)

# android - 使用 facebook sdk 3.0 for android 登录问题

> ID：14875160
> 
> 赞同：4
> 
> 时间：2013-02-14T12:45:02.887
> 
> 标签：android, facebook, facebook-login

我使用的是 facebook sdk 2.0。今天我已将 facebook sdk 更新到 3.0。但是有登录问题。当我一次又一次地单击登录按钮时，一次或两次，在 10 到 12 个正确的登录对话框中打开，但其他尝试失败。这是我的代码：

```
 Util.clearCookies(getApplicationContext());
            String response = "";
            if (!response.contains("Error")) {
                SharedPreferences prefs = main.this.getSharedPreferences("userInformation", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = prefs.edit();
                editor.putString("ImageURL", null);
                editor.commit();
                //SessionStore.clear(main.this);

                loginSuccess = false;
                // do
                BLL_Friendlist chatFriendDataSource = new BLL_Friendlist(mActivity);
                chatFriendDataSource.deleteAllRecordsInFriendList();

                userImage.setImageUrl(null);
                dummy_user_Image_view.setVisibility(View.VISIBLE);

                /////////////////////////

                mFacebook = new Facebook(APP_ID);

                Session.waitForAuthCallback(mFacebook);

                mFacebook.authorize(main.this, PERMISSIONS, new AppLoginListener(mFacebook));

                mAsyncRunner = new AsyncFacebookRunner(mFacebook);

                SessionStore.restore(mFacebook, getApplicationContext());

                SessionEvents.addAuthListener(new SampleAuthListener());
                SessionEvents.addLogoutListener(new SampleLogoutListener()); 
```

代码有什么问题？

![在此处输入图像描述](../Images/5168942e5a1463ee510cd50509349a2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:04:21.663

首先，如果您的 Android 上没有 facebook 应用程序，登录屏幕需要一段时间。第二：SessionStore.restore(mFacebook, getApplicationContext()); 如果您之前没有连接，它无法工作。

# jquery - 在脚本中包含函数会在 Javascript 中引发对象未定义错误

> ID：14875165
> 
> 赞同：0
> 
> 时间：2013-02-14T12:45:17.800
> 
> 标签：jquery, properties, hide

我想知道如何根据 2 个标准（类型和值）隐藏表单元素。我有一个值为“保存”的按钮。所以输入是类型：按钮，值：保存。是否可以根据这两个标准隐藏按钮。我问的原因是页面上还有其他元素具有相同的值但类型不同。我正在使用这个（当然）不起作用：

```
 $("input[val='Save',type='button']").hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:50:25.970

你为什么不给那个特定的输入添加一个 id 呢？

```
<input id="button-id" type="button" value="Save" /> 
```

这样您就不必担心通过类型和值访问特定的输入标签，因为它在 DOM 中是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:20:56.367

你想要一个[多属性选择器](http://api.jquery.com/multiple-attribute-selector/)

尝试

```
$("input[val='Save'][type='button']").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:53:18.107

过滤器可以工作

```
$("input[type=button]").filter(function() {
 var buttonvalue = this.value;
;
 return buttonvalue === 'save';
}).hide(); 
```

# joomla - 从产品表中获取 Virtuemart 类别（Joomla / Virtuemart）

> ID：14875169
> 
> 赞同：0
> 
> 时间：2013-02-14T12:45:52.743
> 
> 标签：joomla, virtuemart

试图找出在典型的 Joomla / Virtuemart 安装中将 vm_product 和 vm_category 绑定在一起的内容。

想法是在administrator > components > com_virtuemart > html > basket.php 的$product_rows 数组中推送类别信息，并在basket_b2c.html.php 处回显。但为此，我需要了解这些关联。

Joomla 新手。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:11:39.607

好的，找到了。关联表是：vm_product_category_xref

# ruby-on-rails-3 - 在 Rails 3 上安装/运行瘦 Web 服务器

> ID：14875172
> 
> 赞同：1
> 
> 时间：2013-02-14T12:46:04.760
> 
> 标签：ruby-on-rails-3, gem, thin

运行“瘦”网络服务器时出现问题。看起来安装成功，但是当我运行“瘦启动”时，看起来好像瘦开始初始化，但找不到它需要的一些资源。

下面是我的终端会话的审计跟踪。有人可以帮忙吗？根据 Thin docs，安装已正确完成。谢谢

**导轨 3.2.12
红宝石 1.9.3**

```
root@pgateway:/var/www/testapp# gem install thin

Fetching: eventmachine-1.0.0.gem (100%)
Building native extensions.  This could take a while...
Fetching: daemons-1.1.9.gem (100%)
Fetching: thin-1.5.0.gem (100%)
Building native extensions.  This could take a while...
Successfully installed eventmachine-1.0.0
Successfully installed daemons-1.1.9
Successfully installed thin-1.5.0
3 gems installed

root@pgateway:/var/www/testapp# thin start
>> Using rack adapter
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop

/usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/backends   /tcp_server.rb:16:in `connect': cannot load such file -- thin/connection (LoadError)
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/backends/base.rb:55:in `block in start'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `call'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/controllers/controller.rb:86:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/bin/thin:19:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/bin/thin:19:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T16:22:05.500

您似乎安装了与导轨分开的薄

将它添加到您的 gemfile 中，您应该没问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-16T10:02:45.657

如果你想使用 gem，它必须在你的 Gemfile 中。您可以按以下方式解决您的问题：

*   将以下行添加到您的**Gemfile**：`gem 'thin'`
*   更新您当前应用的环境：`bundle install`
*   然后启动服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T08:22:03.167

尝试执行以下命令：

cd 到/你的/rails/app

echo 'gem "thin"' >> Gemfile

薄开始

此内容来自[https://github.com/macournoyer/thin/issues/115](https://github.com/macournoyer/thin/issues/115)

# objective-c - 列调整大小完成时的 NSTableView 通知？

> ID：14875175
> 
> 赞同：2
> 
> 时间：2013-02-14T12:46:08.877
> 
> 标签：objective-c, nstableview

使用 NSTableview 我可以订阅以`NSTableViewColumnDidResizeNotification`获取正在调整大小的列的事件：

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(tableColumnsResized)
                                             name: NSTableViewColumnDidResizeNotification
                                           object: dataTableView]; 
```

但是，我希望仅在调整大小完成后才收到通知（以便我可以保存一些细节）。如果我在每个通知中运行代码，那么调整大小的列会有点卡顿。这就是为什么我只想在调整大小完成时收到通知。

有什么建议我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:04:45.633

每当您收到调整大小通知时，您都应该设置一个短计时器，取消之前的任何计时器。*然后，您可以在计时器触发*方法中执行您的最终操作：

。H：

```
@interface MyClass : NSView
{
    NSTimer *_columnResizeTimer;
}

@end 
```

米：

```
// Private Methods
@implementation MyClass ()

- (void)_columnResized:(NSTimer *)timer;

@end

@implementation MyClass

- (void)dealloc
{
    [_columnResizeTimer invalidate];
    _columnResizeTimer = nil;

    // If using MRR:
    [super dealloc];
}

- (void)tableViewColumnDidResize:(NSNotification *)notification
{
    [_columnResizeTimer invalidate];
    _columnResizeTimer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                          target:self
                                                        selector:@selector(_columnResized:)
                                                        userInfo:nil
                                                         repeats:NO];
}

- (void)_columnResized:(NSTimer *)timer
{
    [_columnResizeTimer invalidate];
    _columnResizeTimer = nil;

    // Do stuff on column resize
}

@end 
```

（此代码未经测试，可能有问题）。

# html - URL 编码/解码 - Django Internet Explorer

> ID：14875180
> 
> 赞同：0
> 
> 时间：2013-02-14T12:46:27.907
> 
> 标签：html, django, forms, internet-explorer, urlencode

django 是如何自动对表单数据进行编码和解码的？说，我有以下表格。

```
 <form method="POST" action="MY_SERVER_URL">
    <p><label for="id_name">Name:</label> <input id="id_name" type="text" name="name"/></p>
    <button type="submit">Save</button>
 </form> 
```

当我尝试将此表单与名称值（如“这是名称值”）发布到我的服务器时，并且当我使用 Chrome 或 Firefox 或 Safari 时，我认为 request.POST['name'] 正确地给了我字符串但在Internet Explorer 它给了我“This+is+name+value”，我必须在其上运行 urllib.unquote_plus() 以获得适当的值（这是名称值，即！）。

简而言之，来自 Internet Explorer 的所有表单数据似乎都没有以不同的格式解码或编码。（哪一个？）我在 stackoverflow 上进行了广泛的搜索，但找不到任何有帮助的东西。欢迎学习意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:06:07.003

我认为您需要`enctype`在表单中添加一个属性。IE 应该默认为 application/x-www-form-urlencoded，但你永远不知道 IE。我知道 text/plain 的 enctype 会将空格转换为 +。

尝试：

```
<form action="." method="post" enctype="application/x-www-form-urlencoded"> 
```

或使用：`multiplart/form-data`如果您的表单需要支持文件字段。

# c# - 基于机会/重量返回随机值的容器

> ID：14875182
> 
> 赞同：0
> 
> 时间：2013-02-14T12:46:39.817
> 
> 标签：c#, algorithm, random, containers

我将如何最好地制作一个 Container 类，该类根据在添加元素期间输入的权重返回随机值？

理想情况下，它应该像这样使用：

```
var randomContainer = new RandomContainer<IThing>();
randomContainer.Add(new CoolThing(), 80);
randomContainer.Add(new AwesomeThing(), 20);
IThing thing = randomContainer.Get(); 
```

所以 thing 有 80% 的机会成为 CoolThing 和 20% 的机会成为 AwesomeThing。

但是该算法不应该要求权重加起来为 100，所以这也应该是可能的：

```
var randomContainer = new RandomContainer<IThing>();
randomContainer.Add(new CoolThing(), 398);
randomContainer.Add(new AwesomeThing(), 485);
randomContainer.Add(new SpecialThing(), 1);
IThing thing = randomContainer.Get(); 
```

任何想法如何实现这样的算法？类应该有哪些成员/属性？实现 ICollection 有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:53:25.493

该算法应该非常简单：

在 1 和所有权重之和之间选择一个随机值。该值将指示要返回的对象。

第二个示例的示例：

*   值 1 到 398 将返回`CoolThing`。
*   值 399 到 883 (= 398 + 485) 将返回`AwesomeThing`
*   值 884 将返回`SpecialThing`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:21:48.380

我将 Daniel Hilgarth 的回答标记为正确，因为他让我走上了正确的道路。

对于任何想要示例实现的人：

```
public class RandomContainer<T> 
{
    private Random _random = new Random();

    private Dictionary<T, int> _objects = new Dictionary<T, int>();
    private int _weightSum;

    public RandomContainer()
    {           
    }

    public void Add(T obj, int weight)
    {          
        _objects.Add(obj, weight);
        _weightSum += weight;
    }

    public T Get()
    {
        int sumExtra = 0;
        int rand = _random.Next(0, _weightSum);
        foreach(var kvp in _objects)
        {
            if(rand < kvp.Value + sumExtra)
                return kvp.Key;
            sumExtra += kvp.Value;
        }
        return default(T); // This shouldn't be reached
    }
} 
```

它不包含很多标准方法，但关键在于 Get() 函数，其余的应该很容易实现。

# sql - 找到有条件的不间断周期

> ID：14875184
> 
> 赞同：2
> 
> 时间：2013-02-14T12:46:46.007
> 
> 标签：sql, postgresql, postgresql-9.2

表中有每天酒店的配额。如何获得酒店每天可用的天数？

```
q_id    q_hotel q_date  q_value
1   1   2013-02-01  1
2   1   2013-02-02  1
3   1   2013-02-03  1
4   1   2013-02-04  0
5   1   2013-02-05  2
6   1   2013-02-06  3
7   1   2013-02-07  3
8   1   2013-02-08  2
9   1   2013-02-09  0
10  1   2013-02-10  0
11  1   2013-02-11  1
12  1   2013-02-12  1 
```

想要的输出：

```
q_hotel q_date  days_available
1   2013-02-01  3
1   2013-02-02  2
1   2013-02-03  1
1   2013-02-04  0
1   2013-02-05  4
1   2013-02-06  3
1   2013-02-07  2
1   2013-02-08  1
1   2013-02-09  0
1   2013-02-10  0
1   2013-02-11  2
1   2013-02-12  1 
```

现在，如果在需要的日期存在后报价为零，我可以获得天数 - 我找到最接近的不可用日期并计算日期差异。
[http://sqlfiddle.com/#!12/1a64c/14](http://sqlfiddle.com/#!12/1a64c/14)

```
 select q_hotel
  ,q_date
  ,(select extract(day from (min(B.q_date)-A.q_date)) from Table1 B where B.q_date>A.q_date
   and B.q_value=0 and A.q_value<>0)
from Table1 A 
```

但是，当我没有零截止日期时，就会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:53:57.240

这是一个解决方案：

```
select
    a.q_date
,   a.q_hotel
,   case
        when
            a.q_value = 0
        then
            0
        else
        (
            select
                extract
                ( day from
                    min ( b.q_date ) - a.q_date + interval '1 day'
                )
            from    table1 b
            where   b.q_date >= a.q_date
            and     b.q_hotel = a.q_hotel
            and not exists
            (
                select  1
                from    table1 c
                where   c.q_date = b.q_date + interval '1 day'
                and     b.q_hotel = a.q_hotel
                and     q_value <> 0
            )
        )
    end as days_available
from    table1 a 
```

# c# - Visual Studio Express SOAP 功能有限？

> ID：14875185
> 
> 赞同：2
> 
> 时间：2013-02-14T12:46:47.257
> 
> 标签：c#, visual-studio, zend-framework, soap

我在 Zend Framework 中实现了一个 SOAP 端点。

当我使用 Visual Studio Professional 2008 创建一个 C# 项目时，添加一个 Web 服务引用并使用该服务，它就像一个魅力。我还可以将项目导入 Visual Studion Express (C#) 2008 和 Visual Studio Express Desktop 2012。这些也可以。

如果我在 Visual Studio 的一个快速版本中创建相同的项目，它们将抛出 SoapHeaderException。相同的设置和一切。

显然，使用 VS 的 Express 版本创建的项目只能使用发送原语和一维数组的 Web 服务。

WSDL.exe 在没有错误或警告的情况下运行。

以前有人遇到过这些问题吗？

# java - AtomicBoolean 是否需要创建可取消的线程？

> ID：14875189
> 
> 赞同：1
> 
> 时间：2013-02-14T12:47:00.563
> 
> 标签：java, multithreading, atomic, volatile

我经常使用以下模式来创建一个可取消的线程：

```
public class CounterLoop implements Runnable {

    private volatile AtomicBoolean cancelPending = new AtomicBoolean(false);

    @Override
    public void run() {
        while (!cancelPending.get()) {
            //count
        }
    }

    public void cancel() {
        cancelPending.set(true);
    }
} 
```

但我不确定 cancelPending 必须是 AtomicBoolean。在这种情况下我们可以只使用普通的布尔值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:48:56.557

您可以使用 a`volatile boolean`而不是没有问题。

请注意，这仅适用于类似于这种情况的情况，即布尔值仅更改为特定值（`true`在本例中）。如果布尔值可能会更改为任一`true`或`false`任何时候，那么您可能需要`AtomicBoolean`检测并处理竞争条件。

但是 - 你描述的模式有一种与生俱来的气味。通过在布尔值（`volatile`或不）上循环，您可能会发现自己试图插入某种`sleep`机制或不得不中断您的线程。

更简洁的方法是将过程分解为更精细的步骤。我最近在[这里](https://stackoverflow.com/a/10669623/823393)发布了一个答案，涵盖了可能感兴趣的暂停线程的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:55:07.590

同时使用`volatile`and`AtomicBoolean`是不必要的。如果按如下方式声明`cancelPending`变量：`final`

```
private final AtomicBoolean cancelPending = new AtomicBoolean(false); 
```

字段的 JLS 语义`final`意味着`volatile`不需要同步（或）。所有线程都将看到正确的`cancelPending`参考值。[JLS 17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)规定：

> *“当一个对象的构造函数完成时，它被认为是完全初始化的。只有在对象完全初始化后才能看到对该对象的引用的线程，可以保证看到该对象的最终字段的正确初始化值。”*

...但是对于普通字段没有这样的保证；即不是`final`和不是`volatile`。

您也可以只声明`cancelPending`为`volatile boolean`... 因为您似乎没有使用`AtomicBoolean`.

但是，如果您使用非易失性，则`boolean`需要使用`synchronized`以确保所有线程都能看到`cancelPending`标志的最新副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:48:17.027

你不能。因为如果您将在没有适当同步的情况下从另一个线程更改布尔值，那么此更改对其他线程可能是不可见的。您可以`valotile boolean`在您的情况下使用任何修改对所有线程可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:49:38.887

是的你可以。您可以使用非 volatile AtomicBoolean（依赖于其内置的线程安全性），也可以使用任何其他 volatile 变量。

根据 Java 内存模型 ( [JMM](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html) )，这两个选项都会导致正确同步的程序，其中 cancelPending 变量的读取和写入不会产生数据竞争。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T12:52:53.863

在这种情况下使用 volatile 布尔变量是安全的，尽管有些人可能认为这是不好的做法。请参阅[此线程](https://stackoverflow.com/questions/7805192/is-a-volatile-int-in-java-thread-safe)以了解原因。

您使用 Atomic* 变量的解决方案似乎是最佳选择，即使与 volatile 变量相比，同步可能会引入不必要的开销。

您还可以使用关键部分

```
Object lock = new Object();

@Override
public void run() {
  synchronized (lock) {
    if (cancelPending) {
      return;
    }
  }
} 
```

或同步方法。

```
synchronized public boolean shouldStop() {
  return shouldStop;
}

synchronized public void setStop(boolean stop) {
  shouldStop = stop;
} 
```

# google-app-engine - 为什么通过简单的管理员批量删除达到了我的写入配额？

> ID：14875192
> 
> 赞同：1
> 
> 时间：2013-02-14T12:47:12.640
> 
> 标签：google-app-engine, google-cloud-datastore

这个奇怪的案例在过去的两天里已经发生了两次。

我使用 Datastore Admin 删除了不超过 100 个的所有实体，以便稍后使用重新上传 db，`remote_api_shell`但在请求后*Datastore 写入操作*达到限制：

![在此处输入图像描述](../Images/88a50241457293bd9b3218c903251148.png)

这是自上次 24 小时重置以来我所做的第一次也是唯一一次操作。

`remote_api_shell`当我尝试`put`新实体时也会报告错误。

欢迎任何建议。

* * *

## 编辑：

这里的模型，没什么大不了的......

```
class Brand(BaseModel):
    '''
    Brand class
    `Marca` in Etax db
    '''
    name = db.StringProperty()
    abbr = db.StringProperty()

    def __repr__(self):
        return ('<Brand {0} instance at {1}>'
                    .format(self.abbr.encode('utf-8'), hex(id(self))))

class Model(BaseModel):
    '''
    Model class
    `Gamma` in Etax db
    '''
    name = db.StringProperty()
    code = db.IntegerProperty()
    brand = db.ReferenceProperty(Brand, collection_name='models')

    def __repr__(self):
        return ('<Model {0} instance at {1}>'
                    .format(self.code, hex(id(self))))

class TrimLevel(BaseModel):
    '''
    Trim Level class
    `Modello` in Etax db
    '''
    name = db.StringProperty()
    etax_code = db.IntegerProperty()
    start_production_date = db.DateProperty()
    end_production_date = db.DateProperty()
    retail_buy_prices = db.ListProperty(int)
    retail_sell_prices = db.ListProperty(int)
    list_prices = db.ListProperty(int)
    model = db.ReferenceProperty(Model, collection_name='trim_levels')
    fuel_supply = db.StringProperty()
    gear_shift = db.StringProperty()
    gear_speeds = db.IntegerProperty()
    doors = db.IntegerProperty()
    seats = db.IntegerProperty()
    kw = db.IntegerProperty()

    def __repr__(self):
        return ('<TrimLevel {0} instance at {1}>'
                    .format(self.etax_code, hex(id(self)))) 
```

![在此处输入图像描述](../Images/fda1a80200c2a5d9f0a2bb37265d59f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:16:04.143

如果您查看[billing docs](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)，那么高级删除需要几个低级写入操作：

```
Entity Delete (per entity): 2 writes + 2 writes per indexed property value + 1 write per composite index value 
```

因此，如果 100 个实体删除使用了 50k 写入操作，则意味着您的每个实体都有 500 个索引条目。

当实体具有大型列表属性或具有跨越多个列表属性的复合索引（= 爆炸索引）时，可能会发生这种情况

您是否定义了任何复合索引？您的实体有哪些属性？

# java - 使用 Springframework MVC 跨 javascript 屏幕共享用户对象

> ID：14875196
> 
> 赞同：0
> 
> 时间：2013-02-14T12:47:40.497
> 
> 标签：java, spring, servlets, spring-mvc

我之前问了一个问题，如何使用 Webflow 做到这一点，但事实证明这对我的情况不切实际。

我正在尝试浏览 3 个屏幕，这些屏幕添加到对象信息中，然后需要确认最后添加到数据库中。[保持简单等]

例如，第一个屏幕输入用户名，然后下一个屏幕需要联系信息，然后第三个屏幕显示摘要并要求确认

我无法弄清楚如何通过多个屏幕传递同一个对象。我了解如何将信息从一个屏幕传递到下一个屏幕，但由于某种原因，相同的技术不适用于多个屏幕。

示例 3 页：

**添加用户.jsp**

```
<div id="form">
<h2 >Step 1</h2>
    <form action="AddUserContact" method="post">
        <table>
            <tr>
                <td>User Name:</td>
                <td><input type="text" id="username" name="username"/></td>
            </tr>
            <tr>
                <td><input type="submit" value="Next"/></td>
            </tr>
        </table>
    </form>
</div> 
```

**AddUserContact.jsp**

```
<div id="form">
<h2 >Step 2</h2>
    <form action="UserSummaryConfirm" method="post">
        <table>
            <tr>
                <td>${user.username}</td>
            </tr>
            <tr>
                <td>Address:</td>
                <td><input type="text" id="address" name="address"/></td>
            </tr>
            <tr>
                <td><input type="submit" value="Next"/></td>
            </tr>
        </table>
    </form>
</div> 
```

**UserSummaryConfirm.jsp**

```
<h2>Step 3</h2>
    <form action="home" method="post">
        <table>
            <tr>
                <td>User Name:</td>
                <td>${user.username}</td>
            </tr>
            <tr>
                <td>Address:</td>
                <td>${address}</td>
            </tr>
            <tr>
                <td><a href="home">Confirm</a></td>
            </tr>
        </table>
    </form> 
```

我的每个页面都有一个控制器 [它让我更好地理解发生了什么，稍后我会简化它]

**添加用户控制器.java**

```
@Controller
public class AddUserController{
@RequestMapping(value = "AddUser")
    public ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {
    User user = new User();
    ModelAndView mav = new ModelAndView("AddUser");
    user.setUserName(request.getParameter("username"));
    mav.addObject("user", user);
    return mav;
    }
} 
```

**AddUserContactController.java**

```
@Controller
public class AddUserContactController{
@RequestMapping(value = "AddUserContact")
    public ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {
        ModelAndView mav = new ModelAndView("AddUserContact");
        mav.addObject("user", request.getParameter("user"));
        return mav;
       }
  } 
```

**AddUserConfirm.java**

```
@Controller
public class AddUserConfirm{
    @RequestMapping(value = "UserSummaryConfirm")
    public ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {
        ModelAndView mav = new ModelAndView("UserSummaryConfirm");
        mav.addObject("user", request.getParameter("user"));
        mav.addObject("address", request.getParameter("address"));
        return mav;
    }
} 
```

然后 User 类只是一个带有 getter 和 setter 的简单类。我遇到的问题是无论我尝试传递对象是什么，我似乎都无法弄清楚为什么相同的技术不起作用。

第三个屏幕上的地址显示没有问题，但用户名没有显示在任何屏幕上。

使用 webflow，我按照我的方式创建了一个对所有 webflow 屏幕都是全局的 UserBean。从任何屏幕添加到同一个对象并显示任何信息都很容易。我怎样才能达到同样的结果呢？

谢谢你。

工作代码：

使用会话属性

**添加用户.jsp**

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<div id="form">
<h2 >Step 1</h2>
    <form:form action="AddUserContact" commandName="user" method="POST">
        <table>
            <tr>
                <td>User Name:</td>
                <td><form:input type="text" id="username" path="username"/></td>
            </tr>
            <tr>
                <td><input type="submit" value="Next"/></td>
            </tr>
        </table>
    </form:form>
</div> 
```

**AssUserContact.jsp**

```
<div id="form">
<h2 >Step 2</h2>
    <form:form action="UserSummaryConfirm" commandName="user" method="post">
        <table>
            <tr>
                <td>Address:</td>
                <td><input type="text" id="address" path="address"/></td>
            </tr>
            <tr>
                <td><input type="submit" value="Next"/></td>
            </tr>
        </table>
    </form>
</div> 
```

**UserSummaryConfirm.jsp**

```
<h2>Step 3</h2>
    <form:form action="home" method="get">
        <table>
            <tr>
                <td>User Name:</td>
                <td><%=session.getAttribute("username")%></td>
            </tr>
            <tr>
                <td>Address:</td>
                <td><%=session.getAttribute("address")%></td>
            </tr>
            <tr>
                <td><a href="home">Confirm</a></td>
            </tr>
        </table>
    </form:form> 
```

**添加用户控制器.java**

```
@Controller
@SessionAttributes({ "username", "address" })
public class AddUserController{
    User usr = new User();    

@RequestMapping(value = "AddUser")
   public String loadIndex(Model model, User user) {
    model.addAttribute("User", user);
    return "AddUser";
    }

@RequestMapping(value = "AddUserContact")
public String processUserName(Model model, User user) {
usr.setUsername(user.setUsername());
model.addAttribute("User", user);
return "AddUserContact";
}

@RequestMapping(value = "UserSummaryConfirm")
public String processUserContact(Model model, User user) {
usr.setAddress(user.getAddress());
model.addAttribute("username", usr.getUsername());
model.addAttribute("address", usr.getAddress());
return "UserSummaryConfirm";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:52:00.980

因为在第二个屏幕中您正在使用

```
 <tr>
        <td>${user.username}</td>
    </tr> 
```

用户输入未绑定到任何输入，因此它不会与表单数据一起传递给控制器​​。
当您使用地址作为

```
 <tr>
        <td>Address:</td>
        <td><input type="text" id="address" name="address"/></td>
    </tr> 
```

因为它绑定到输入（因为您已分配`name="address"`与 相同`path="name"`），所以它的值将被发送到控制器。

如果您想在 3 个屏幕上传递相同的对象，那么最好使用[@SessionAttribute](http://www.roseindia.net/tutorial/spring/session-attributes-annotation.html)而不是隐藏它并一次又一次地传递。

* * *

**编辑 ：**

当您现在使用会话属性时，请从第二个屏幕中删除输入元素 .（绑定到用户名）。改用

```
 <td>session.getAttribute("username")%></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:57:12.773

我以前做过这样的“向导式”表格。我的解决方案使用了一个表单bean，我们将它放入整个流程的会话中，并且只包含每个页面中需要添加的部分。除非您包含给定值的输入，否则 Spring 不会删除表单 bean 中的值。我们不使用 JSR-303，如果您使用它，我认为这种方法行不通。我们的验证使用 BindingErrors 和自定义验证代码的组合，所以我只是将代码设置为一次只验证部分，对应于表单刚刚提交的页面。

# java - 将交叉表列宽与 Jasperreports 中的图表同步

> ID：14875200
> 
> 赞同：1
> 
> 时间：2013-02-14T12:47:57.830
> 
> 标签：java, jasper-reports, reporting

我们在这里遇到了一个非常伤脑筋的问题：在 Jasperreports 中，我们有 MultiAxisCharts，它由折线图和 StackedBar 图表组成。在这些图表下方，客户希望我们绘制交叉表，显示交叉表上方图表的确切数字。

好吧，Jasperreports 没有提供一种将交叉表列的宽度与 StackedBar 图表中条形的宽度同步的方法。此外，交叉表列的宽度随着写入其单元格中的数字而减小。

我们在这样的交叉表中最多显示 54 个（每年 52 周，另外 2 个用于杂项信息）列。

如果您对这种情况有任何想法，有谁 - 除了粉碎这个邪恶的烂摊子;）

# android - 转码后的 MPEG-4 视频无法在 Android 的本机应用程序上播放

> ID：14875205
> 
> 赞同：2
> 
> 时间：2013-02-14T12:48:24.787
> 
> 标签：android, ios, android-mediaplayer, codec

我正在以编程方式进行一些转码并创建[了一个 mpeg4 视频](http://ppl.ug/LTFJExFuE3g/)。问题是它不能在 Android 的原生播放器（Galaxy Nexus 和 Nexus S）上播放。请参阅下面的错误和编解码器详细信息。

我有播放成功的文件和播放失败的文件。Android无法创建媒体播放器的这个文件到底有什么问题？

**问题：为什么没有播放文件？**

更多信息：转码是使用 iPhone 创建的。伪代码：`AVAssetExportSession->>exportAsynchronouslyWithCompletionHandler(AVFileTypeMPEG4)`

这是视频的编解码器： ![视频编解码器详细信息](../Images/c08e8b67746e7f2fb29ea927ec84e9b4.png)

这是错误：

```
02-14 12:39:33.243: E/MediaPlayerService(132):   error: -2147483648
02-14 12:39:33.243: E/MediaPlayer(25598): Unable to to create media player
02-14 12:39:33.251: W/VideoView(25598): Unable to open content: file:///storage/sdcard0/Download/IMG_0002.MOV-st.mp4
02-14 12:39:33.251: W/VideoView(25598): java.io.IOException: setDataSourceFD failed.: status=0x80000000
02-14 12:39:33.251: W/VideoView(25598):     at android.media.MediaPlayer.setDataSource(Native Method)
02-14 12:39:33.251: W/VideoView(25598):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:976)
02-14 12:39:33.251: W/VideoView(25598):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:955)
02-14 12:39:33.251: W/VideoView(25598):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:918)
02-14 12:39:33.251: W/VideoView(25598):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:870)
02-14 12:39:33.251: W/VideoView(25598):     at android.widget.VideoView.openVideo(VideoView.java:238)
02-14 12:39:33.251: W/VideoView(25598):     at android.widget.VideoView.access$2000(VideoView.java:52)
02-14 12:39:33.251: W/VideoView(25598):     at android.widget.VideoView$6.surfaceCreated(VideoView.java:492)
02-14 12:39:33.251: W/VideoView(25598):     at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
02-14 12:39:33.251: W/VideoView(25598):     at android.view.SurfaceView.setVisibility(SurfaceView.java:249)
02-14 12:39:33.251: W/VideoView(25598):     at com.android.gallery3d.app.MoviePlayer$4.run(MoviePlayer.java:147)
02-14 12:39:33.251: W/VideoView(25598):     at android.os.Handler.handleCallback(Handler.java:725)
02-14 12:39:33.251: W/VideoView(25598):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 12:39:33.251: W/VideoView(25598):     at android.os.Looper.loop(Looper.java:137)
02-14 12:39:33.251: W/VideoView(25598):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 12:39:33.251: W/VideoView(25598):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 12:39:33.251: W/VideoView(25598):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 12:39:33.251: W/VideoView(25598):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 12:39:33.251: W/VideoView(25598):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 12:39:33.251: W/VideoView(25598):     at dalvik.system.NativeStart.main(Native Method)
02-14 12:39:33.251: D/VideoView(25598): Error: 1,0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T18:35:45.497

在遇到同样的问题后，我做了很多挖掘并尝试了许多不同的技术来解决这个问题。许多其他同类型的 SO 问题都得到了“只需将 iPhone 创建的 .MOV 文件保存为 .mp4”的响应。从理论上讲，这会起作用，因为它们都是容器，但是，这（至少对我而言）会导致与此处提到的相同的“无法打开内容”错误（以及在我测试过的每台设备上）。我的解决方案确实最终使用了 AVAssetExportSession。这是我使用的代码：

```
AVURLAsset *avAsset = [AVURLAsset URLAssetWithURL:self.sharingMovieUrl options:nil];
NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:avAsset];
if ([compatiblePresets containsObject:AVAssetExportPresetLowQuality]) {
     AVAssetExportSession *exportSession = [[AVAssetExportSession alloc]initWithAsset:avAsset presetName:AVAssetExportPresetPassthrough];    
    NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"temp3.mp4"];    
    exportSession.outputURL = [NSURL fileURLWithPath:filePath];    
    exportSession.outputFileType = AVFileTypeMPEG4;
    [exportSession exportAsynchronouslyWithCompletionHandler:^{        
        switch ([exportSession status]) {

            case AVAssetExportSessionStatusFailed:
                //If this fails, it might be because the temorary
                //files weren't cleaned and this isn't overwriting
                //the temporary filename
                NSLog(@"Export failed: %@", [[exportSession error] localizedDescription]);
                //Perform any failed logic                
                break;                
            case AVAssetExportSessionStatusCancelled:                
                NSLog(@"Export canceled");
                //Perform any cancel logic                
                break;                
            default:
                //This should have been a success                                
                //File should be saved at filePath
                //Upload file from here
                break;                
        }        
    }];
} 
```

# shortest-path - 单对最短路径多个旅行者

> ID：14875206
> 
> 赞同：0
> 
> 时间：2013-02-14T12:48:26.923
> 
> 标签：shortest-path

我正在编写一个基于回合的策略游戏，我有一个特殊的单对最短路径问题。我有一个带有非负非零边权重的加权有向图，这里有多个旅行者，即具有不同运动类型的单元作为一个群体一起旅行。图表的每条边对不同的单位都有不同的权重，具体取决于移动类型。

通常人们会使用例如。Dijkstras算法解决最短路径问题。但是由于多个单元作为一个组一起移动并且每个单元的边权重不同，因此最佳路径可能与任何单个单元单独移动的最佳路径不同。从下面可以看出

[![示例图片](../Images/0404050f7544ced8dfdaffcb308be672.png)](https://i.stack.imgur.com/m87hu.png)

红色和绿色从 S 移动到 D。单独红色移动的最佳路径是成本为 2 的 SAD，单独绿色移动的最佳路径是成本为 2 的 SCD。然而，在这两种情况下，另一个单位移动成本为 5，因此单位一起移动的最佳路径是 SBD，最大移动成本为 4。

每个单位类型每转不同数量的移动点似乎不是问题，因为边缘权重可以标准化。这可以表述为线性程序并用单纯形算法解决吗？看起来我们会有多个目标函数，我们希望最小化最大值。但是可能有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:04:06.540

如果您真的希望多个旅行者在一个团队中旅行，那么您将需要使用某种优化算法并找到最佳算法，就像您建议的那样。

另一方面，如果您不需要整个组的*最优值*（这可能需要一些时间），您可以尝试使用启发式或近似优化算法。

由于我不知道你的游戏的细节，我不能说哪种启发式方法对你有用。您也许可以通过从每个组（飞行者、游泳者、地面单位...）中选择一个代表来最小化搜索空间，并找到所选单位的最佳组路径。

# c - 尝试编译 balsa 时的未知类型名称“gpgme_decrypt_result_t”

> ID：14875210
> 
> 赞同：2
> 
> 时间：2013-02-14T12:48:35.520
> 
> 标签：c, ubuntu, compilation, makefile

我一直在尝试在 ubuntu 上编译[balsa](http://balsa.gnome.org/git-help.html)电子邮件阅读器（我是直接从源代码编译开源项目的整个过程的新手。

所以我做了整个`configure`，`make`但后来我遇到了这个问题：

```
error: unknown type name 'gpgme_decrypt_result_t 
```

在对错误代码做了一些研究之后..事实证明它属于[gpgme](http://pyme.sourceforge.net/doc/gpgme/Getting-Started.html#Getting-Started)一个看起来很吓人的加密库..

在这种情况下我该怎么办？我希望我不应该进入代码和调试东西，是吗？

**更新：**

这个问题与ubuntu论坛上的另一个[问题有关](https://askubuntu.com/questions/255984/how-to-install-gnome-keyring-and-gmime)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:54:17.217

不幸的是，您可能需要深入研究代码以找出无法构建的原因！

然而，在这种情况下，答案可能很简单。我希望外部库中的符号未定义的主要原因是：

*   您的系统上不存在库头文件
*   您的系统上的库头文件版本错误
*   标头存在，但编译器没有在正确的位置查找

显然，解决方案是相似的：您需要在正确的位置为该软件安装正确版本的 gpgme 头文件。请注意，安装库本身与安装标头*不同*。在 Ubuntu 中，这是很明显的，因为存在作为`-dev`包头文件的包，如果你查看 repose，你会发现`libgpgme11-dev`. 我建议您从安装它开始，这将消除上面的第 1 点。如果它仍然不起作用，您将需要开始调查其他两种可能性。

# flash - AS2：右键检测

> ID：14875219
> 
> 赞同：2
> 
> 时间：2013-02-14T12:48:58.503
> 
> 标签：flash, actionscript-2, right-click

我在 AS2 中遇到了右键检测问题。我开发游戏，当用户右键单击时，一切都被冻结了。我想避免或检测到这一点。

我花了很多时间搜索，我发现的代码不起作用。我发现的更常见的脚本是：

```
onEnterFrame = function () {
    if (Key.isDown(2) || ASnative(800, 2)(2)) trace("right click");
} 
```

似乎它曾经可以工作，但不再工作了（即使在 MAC 或 PC 上）。

有人有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:46:30.947

我找到了一个解决方案：在 ContextMenu 创建中添加一个函数调用。

```
function onRightClick() {
    // Code here
}
// The detection is made by the function call in the brackets
var myMenu:ContextMenu = new ContextMenu(onRightClick);
_root.menu = myMenu; 
```

# xslt - XSLT 1.0：重命名具有相同内容的元素

> ID：14875221
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:04.223
> 
> 标签：xslt, key, rename, muenchian-grouping

这似乎是一项简单的任务，但我现在完全陷入困境。我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
<Item>
    <ITEM_CODE>ITEM_CODE</ITEM_CODE>
    <ITEM_NAME>ITEM_NAME</ITEM_NAME>
    <ITEM_ALTERNATE_NAME>ITEM_ALTERNATE_NAME</ITEM_ALTERNATE_NAME>
    <ITEM_CATEGORY_CODE>ITEM_CATEGORY_CODE</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>15031</ITEM_CODE>
    <ITEM_NAME>Outer Carton</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150529</ITEM_CODE>
    <ITEM_NAME>Outer Carton</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150999</ITEM_CODE>
    <ITEM_NAME>Outer Carton</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150988</ITEM_CODE>
    <ITEM_NAME>test</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
</Items> 
```

如果`<ITEM_NAME>`元素具有重复的内容，则应使用后缀重命名，例如计数器值。我想出了这个 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output encoding="UTF-8" method="xml" indent="yes"/>

<xsl:key name="keyItemName" match="Item" use="concat(ITEM_CODE , '|', ITEM_NAME)"/>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="Items">
    <Items>
        <xsl:apply-templates select="@*|node()"/>
    </Items>    
</xsl:template>

<xsl:template match="ITEM_NAME">

    <xsl:for-each select="parent::Item[generate-id()=generate-id(key('keyItemName',concat(ITEM_CODE , '|', ITEM_NAME))[1])]">
        <xsl:variable name="number">
            <xsl:number/>
        </xsl:variable>
        <ITEM_NAME>
            <xsl:value-of select="concat(ITEM_NAME,'-',$number)"/>
        </ITEM_NAME>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

它给了我这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
<Item>
    <ITEM_CODE>ITEM_CODE</ITEM_CODE>
    <ITEM_NAME>ITEM_NAME-1</ITEM_NAME>
    <ITEM_ALTERNATE_NAME>ITEM_ALTERNATE_NAME</ITEM_ALTERNATE_NAME>
    <ITEM_CATEGORY_CODE>ITEM_CATEGORY_CODE</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>15031</ITEM_CODE>
    <ITEM_NAME>Outer Carton-2</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150529</ITEM_CODE>
    <ITEM_NAME>Outer Carton-3</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150999</ITEM_CODE>
    <ITEM_NAME>Outer Carton-4</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150988</ITEM_CODE>
    <ITEM_NAME>test-5</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
</Items> 
```

但我希望这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
<Item>
    <ITEM_CODE>ITEM_CODE</ITEM_CODE>
    <ITEM_NAME>ITEM_NAME</ITEM_NAME>
    <ITEM_ALTERNATE_NAME>ITEM_ALTERNATE_NAME</ITEM_ALTERNATE_NAME>
    <ITEM_CATEGORY_CODE>ITEM_CATEGORY_CODE</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>15031</ITEM_CODE>
    <ITEM_NAME>Outer Carton-2</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150529</ITEM_CODE>
    <ITEM_NAME>Outer Carton-3</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150999</ITEM_CODE>
    <ITEM_NAME>Outer Carton-4</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
<Item>
    <ITEM_CODE>150988</ITEM_CODE>
    <ITEM_NAME>test</ITEM_NAME>
    <ITEM_ALTERNATE_NAME/>
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
</Item>
</Items> 
```

最后`<Item>`不`ITEM_NAME`应该重命名，因为它不叫“外纸箱”。同样在第一个`<Item>`元素中不应该发生重命名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:34:49.237

使用`preceding::`或`preceding-sibling::`计算先前的实例在计算上不是很有效，但我在这里看不到解决方法。下面的方法确实有一个好处，它只在检查（使用键，非常快）是否有其他同名项目之后才计算前面的实例：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output encoding="UTF-8" method="xml" indent="yes"/>

  <xsl:key name="keyItemName" match="ITEM_NAME" use="."/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Items">
    <Items>
      <xsl:apply-templates select="@*|node()"/>
    </Items>
  </xsl:template>

  <xsl:template match="ITEM_NAME">
    <xsl:copy>
      <xsl:value-of select="." />
      <xsl:if test="count(key('keyItemName', .)) > 1">
        <xsl:value-of select="concat('-', count(preceding::ITEM_NAME[. = current()]) + 2)"/>
      </xsl:if>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<Items>
  <Item>
    <ITEM_CODE>ITEM_CODE</ITEM_CODE>
    <ITEM_NAME>ITEM_NAME</ITEM_NAME>
    <ITEM_ALTERNATE_NAME>ITEM_ALTERNATE_NAME</ITEM_ALTERNATE_NAME>
    <ITEM_CATEGORY_CODE>ITEM_CATEGORY_CODE</ITEM_CATEGORY_CODE>
  </Item>
  <Item>
    <ITEM_CODE>15031</ITEM_CODE>
    <ITEM_NAME>Outer Carton-2</ITEM_NAME>
    <ITEM_ALTERNATE_NAME />
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
  </Item>
  <Item>
    <ITEM_CODE>150529</ITEM_CODE>
    <ITEM_NAME>Outer Carton-3</ITEM_NAME>
    <ITEM_ALTERNATE_NAME />
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
  </Item>
  <Item>
    <ITEM_CODE>150999</ITEM_CODE>
    <ITEM_NAME>Outer Carton-4</ITEM_NAME>
    <ITEM_ALTERNATE_NAME />
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
  </Item>
  <Item>
    <ITEM_CODE>150988</ITEM_CODE>
    <ITEM_NAME>test</ITEM_NAME>
    <ITEM_ALTERNATE_NAME />
    <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
  </Item>
</Items> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:42:03.030

您当前的密钥似乎加入了**ITEM_NAME**和**ITEM_CODE**，但看起来您只想要**ITEM_NAME**在这里

```
<xsl:key name="keyItemName" match="ITEM_NAME" use="."/> 
```

看起来您还希望后缀的编号基于父**项**元素的位置。实现这一点的一种方法是有一个模板来匹配**item**元素，然后将数字作为参数传递给后续的数学模板

```
<xsl:template match="Item">
   <Item>
      <xsl:apply-templates select="@*|node()">
          <xsl:with-param name="number">
            <xsl:number/>
         </xsl:with-param>
      </xsl:apply-templates>
   </Item>
</xsl:template> 
```

然后，您需要一个模板来匹配发生重复的**ITEM_NAME元素。**这可以简单地通过检查在组中为键定义的至少第二个元素来完成：

```
<xsl:template match="ITEM_NAME[key('keyItemName', .)[2]]">
   <xsl:param name="number"/> 
```

然后，您可以只输出带有后缀的元素。

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output encoding="UTF-8" method="xml" indent="yes"/>

   <xsl:key name="keyItemName" match="ITEM_NAME" use="."/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Item">
      <Item>
         <xsl:apply-templates select="@*|node()">
            <xsl:with-param name="number">
               <xsl:number/>
            </xsl:with-param>
         </xsl:apply-templates>
      </Item>
   </xsl:template>

   <xsl:template match="ITEM_NAME[key('keyItemName', .)[2]]">
      <xsl:param name="number"/>
      <ITEM_NAME>
         <xsl:value-of select="concat(.,'-',$number)"/>
      </ITEM_NAME>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Items>
   <Item>
      <ITEM_CODE>ITEM_CODE</ITEM_CODE>
      <ITEM_NAME>ITEM_NAME</ITEM_NAME>
      <ITEM_ALTERNATE_NAME>ITEM_ALTERNATE_NAME</ITEM_ALTERNATE_NAME>
      <ITEM_CATEGORY_CODE>ITEM_CATEGORY_CODE</ITEM_CATEGORY_CODE>
   </Item>
   <Item>
      <ITEM_CODE>15031</ITEM_CODE>
      <ITEM_NAME>Outer Carton-2</ITEM_NAME>
      <ITEM_ALTERNATE_NAME/>
      <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
   </Item>
   <Item>
      <ITEM_CODE>150529</ITEM_CODE>
      <ITEM_NAME>Outer Carton-3</ITEM_NAME>
      <ITEM_ALTERNATE_NAME/>
      <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
   </Item>
   <Item>
      <ITEM_CODE>150999</ITEM_CODE>
      <ITEM_NAME>Outer Carton-4</ITEM_NAME>
      <ITEM_ALTERNATE_NAME/>
      <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
   </Item>
   <Item>
      <ITEM_CODE>150988</ITEM_CODE>
      <ITEM_NAME>test</ITEM_NAME>
      <ITEM_ALTERNATE_NAME/>
      <ITEM_CATEGORY_CODE>52401</ITEM_CATEGORY_CODE>
   </Item>
</Items> 
```

# msbuild - MSBuild：（WebDeploy）为选定的 Web 项目创建 Web 包

> ID：14875222
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:06.260
> 
> 标签：msbuild, msdeploy, webdeploy

我设法让 TFS 2010 创建 Web 部署 ZIP (WebDeploy)。

现在的问题是我在解决方案中有多个 Web 项目，并且正在为所有 Web 项目创建包。

在我不想要包的项目中，我取消选中“将部署包创建为 zip”。我认为这会阻止 MSBuild 创建部署包。

顺便说一句，我将“/p:DeployOnBuild=true”传递给 MSBuild。

有没有办法让 MSBuild 只打包选定的项目而不是所有的 Web 项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:27:48.533

好的。找到了解决方案。非常感谢 Vishal Joshi 的这篇[文章](http://vishaljoshi.blogspot.com.br/2010/11/team-build-web-deployment-web-deploy-vs.html)。

从帖子中提取：

* * *

" Web 应用程序的部署在解决方案和项目构建级别都是可行的，尽管在解决方案构建方面，您可能希望确保您在解决方案级别传递的属性将适用于解决方案中的所有项目，这可能并不总是您想要的结果。在这种情况下，所有这些属性也可以在 .csproj 或 .vbproj 文件中设置。您可以通过卸载项目文件并在顶部`<PropertyGroup>`添加您喜欢的属性来做到这一点：

例如`/p:DeployOnBuild=True`可以添加为`<DeployOnBuild>True</DeployOnBuild>` “

* * *

因此，解决方案是`/p:DeployOnBuild=true`从 TFS 构建过程模板中删除并仅更新需要包的项目文件。

# iis-7 - 简单的斜杠 URL 重写

> ID：14875223
> 
> 赞同：3
> 
> 时间：2013-02-14T12:49:07.203
> 
> 标签：iis-7, url-rewriting

我从来没有做过 URL 重写（重定向）。我有一个网站[http://sub.sub.domain.ext/app/](http://sub.sub.domain.ext/app/)。“app”表示“应用程序”，而不是虚拟目录。当用户导航到[http://sub.sub.domain.ext/app](http://sub.sub.domain.ext/app)（无斜杠）时，我需要 IIS 7 将他重定向到带有斜杠的 URL。

问题是我希望*仅*在用户导航到应用程序时应用规则。我不希望将斜杠附加到每个文件名。

我曾尝试修改 IIS7 管理器中的预定义规则，但没有成功。我尝试过精确匹配整个 URL，限制条件，或者只是使用原始的预定义规则。但即使使用原始规则，它也会重写所有后续请求文件/dirs/URL，但*不会*将用户从[http://sub.sub.domain.ext/app](http://sub.sub.domain.ext/app)重定向到[http://sub.sub.domain .ext/app/](http://sub.sub.domain.ext/app/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:41:18.900

您正在寻找的规则可能很简单：

```
<rule name="Add trailing slash" stopProcessing="true">
    <match url="^app$" negate="false" />
    <action type="Redirect" url="{R:0}/" />
</rule> 
```

该`url="^app$"`模式仅匹配 url `http://www.yourwebsite.com/app`，不匹配其他内容。
如果您需要将此行为限制为 host `sub.sub.domain.ext`，您可以添加一个条件：

```
<rule name="test" stopProcessing="true">
    <match url="^app$" negate="false" />
    <action type="Redirect" url="{R:0}/" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="^sub.sub.domain.ext$" />
    </conditions>
</rule> 
```

# jquery - jquery 选项函数应该单独工作

> ID：14875224
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:10.820
> 
> 标签：jquery

我已经编写了这个 jquery 函数并希望单独工作。

```
$(function(){
    $('.otherreason').hide();
    $('.inqPurpose').change(function() {
        if($(this).find('option:selected').val() == "Other"){
            $('.otherreason').show();
        }else{
            $('.otherreason').hide();
        }
    });
}); 
```

此 html 代码在表单标记中重复 4 次，当我单击任何其他选项字段时，所有 html 一起工作，我想单独工作

```
<select class="inqPurpose formField" name="how2" id="how2">
    <option>Sales</option>
    <option>Services</option>
    <option>Corporate Partnership</option>
    <option>Corporate Trade Show</option>
    <option>Requesting Product Samples for Trade Show or Event</option>
    <option>Website Feedback</option>
    <option value="Other">Other (Please Specify)</option>
</select>

<input class="formField otherreason" type="text" placeholder="Other Reason" size="53" maxlength="300" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:51:21.773

如果您在选择选项后有其他原因，您可以使用 .nextAll() 并找到第一个 otherreason 类

```
$(function(){
    $('.otherreason').hide();
    $('.inqPurpose').change(function() {
        if($(this).val() == "Other"){
               $(this).nextAll('.otherreason:first').show();
        }else{
           $(this).nextAll('.otherreason:first').hide();
        }
    });
}); 
```

小提琴演示在这里[http://jsfiddle.net/kgPaY/1/](http://jsfiddle.net/kgPaY/1/)

# android - 如何制作这种类型的自定义标签？

> ID：14875225
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:11.090
> 
> 标签：android, android-tabhost

我想创建这种类型的自定义选项卡并在我的应用程序中实现..我想知道如何做到这一点..如果您有任何链接，请分享我...提前致谢..![在此处输入图像描述](../Images/affb48ff5ee3c2d3c301edae2f84b9d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:21:37.130

我在两个月前得到了同样的要求....我搜索了很多例子，但我找不到正确的解决方案。

实际上我为标签设计了两种类型的图像......相同的图像但两种不同的分辨率

最后我设计了如下的xml ......工作正常

```
<RelativeLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"    
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
>
<TabHost 
android:id="@android:id/tabhost" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">

    <FrameLayout android:id="@android:id/tabcontent"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:layout_weight="1">
    </FrameLayout>
     <TabWidget android:id="@android:id/tabs"
        android:layout_width="fill_parent" android:layout_height="55dp" 

          />
</LinearLayout>
</TabHost>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
>
<ImageView 
android:id="@+id/tab1"    
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:visibility="invisible"
android:background="@drawable/tab_mybars_on"
/>   
<ImageView 
android:id="@+id/tab2"    
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:visibility="invisible"
android:background="@drawable/tab_mybeers_on"
/>    
<ImageView
android:id="@+id/tab3" 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:visibility="invisible"
android:background="@drawable/tab_events_on"
/>    
<ImageView 
android:id="@+id/tab4"    
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:visibility="invisible"
android:background="@drawable/tab_coupons_on"
/>    
<ImageView 
android:id="@+id/tab5"    
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:visibility="invisible"
android:background="@drawable/tab_brewedlife_on"
 />     
</LinearLayout>

</RelativeLayout> 
```

最后是标签活动的代码：

```
public class DownTabActivity extends TabActivity implements OnClickListener
{   
public static TabHost host;
TabSpec spec;
static  int loadingcheck=0;
public static String tabTag;
ImageView tab[]=new ImageView[5];

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab);

    spec= null;
    host= getTabHost();
    host.setFocusable(false);
 //     host.getTabWidget().setDividerDrawable(R.drawable.tabbar_divider);

    host.addTab(createTab("My Bars","MyBars",R.drawable.tab_mybars,MyBarsTabActivity.class));

    host.addTab(createTab("My Beers","MyBeers",R.drawable.tab_mybeers, MyBeersTabActivity.class));

    host.addTab(createTab("Events","Events",R.drawable.tab_myevents, MyEventsTabActivity.class));

    host.addTab(createTab("Coupons","Coupons",R.drawable.tab_coupons, CouponsTabActivity.class));

    host.addTab(createTab("Brewed Life","BrewedLife",R.drawable.tab_brewedlife, BrewedLifeTabActivity.class));

    host.setOnClickListener(this);

    tab[0]=(ImageView)findViewById(R.id.tab1);
    tab[1]=(ImageView)findViewById(R.id.tab2);
    tab[2]=(ImageView)findViewById(R.id.tab3);
    tab[3]=(ImageView)findViewById(R.id.tab4);
    tab[4]=(ImageView)findViewById(R.id.tab5);      

    tabTag = host.getCurrentTabTag(); 
    Log.e("tab",tabTag);

    tab[host.getCurrentTab()].setVisibility(View.VISIBLE);

    host.setOnTabChangedListener(new TabHost.OnTabChangeListener()
    {
        public void onTabChanged(String arg0)
        {
            Log.e("tab argument is", arg0);

            for(int i=0;i<5;i++){
            if(i==host.getCurrentTab()) tab[i].setVisibility(View.VISIBLE);
            else tab[i].setVisibility(View.INVISIBLE);
            }
        }    
    });

}

private TabSpec createTab(final String title, final String tag,final int drawable,final Class<?> intentClass)
{
    final Intent intent = new Intent().setClass(this, intentClass);

    final View tab = LayoutInflater.from(getTabHost().getContext()).inflate(R.layout.tab_indicator, null);
    ((TextView)tab.findViewById(R.id.tab_text)).setText("");

    ((ImageView)tab.findViewById(R.id.tab_icon)).setBackgroundResource(drawable);
    return getTabHost().newTabSpec(tag).setIndicator(tab).setContent(intent);
}

public void onClick(View v) 
{
    Log.v("on click Down tab", "on click Down tab");
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:15:23.313

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

可能这会有所帮助。或者您也可以为自己创建一个自定义选项卡控件

# java - NoClassDefFoundError - Eclipse - Apache HTTPClient

> ID：14875231
> 
> 赞同：7
> 
> 时间：2013-02-14T12:49:39.500
> 
> 标签：java, eclipse, deployment

我正在尝试从 eclipse juno (jetty web-server) 运行一个简单的基于 REST 的应用程序（稍后将部署在 google 应用程序引擎上）

这是我的代码：

```
package co.suhas.live;

import java.io.IOException;
import javax.servlet.http.*;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

@SuppressWarnings("serial")
public class AppServlet extends HttpServlet {
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/plain");
    resp.getWriter().println("Hello, world");

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(
            "http://www.google.com/search?q=google");

    HttpResponse response = httpclient.execute(httpget);

    resp.getWriter().println(response.toString());
    }
} 
```

我已将**Apache HTTP 客户端**jar 文件添加到 BUILD PATH。

包含：

```
commons-codec-1.6.jar
commons-logging-1.1.1.jar
fluent-hc-4.2.3.jar
httpclient-4.2.3.jar
httpclient-cache-4.2.3.jar
httpcore-4.2.2.jar
httpmime-4.2.3.jar 
```

但是当我运行它时出现此错误`localhost`：

```
HTTP ERROR 500

Problem accessing /app. Reason:

org/apache/http/client/methods/HttpUriRequest

Caused by:

java.lang.NoClassDefFoundError: org/apache/http/client/methods/HttpUriRequest
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T12:27:08.180

从 Eclipse 插件的角度来看。我遇到了同样的问题并通过以下步骤解决了它：

1.  将 lib 文件夹添加到根目录。
2.  添加jar文件
3.  打开 MANIFEST.MF 文件，转到运行时选项卡
4.  将项目添加到类路径
5.  转到构建选项卡
6.  将文件添加到输出

![在此处输入图像描述](../Images/0d3dfa7de217998986c558e04b12a418.png)

![在此处输入图像描述](../Images/8614fbb28a30ac78e9c099a5db418068.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:07:28.353

由于它是在 Web 服务器上运行的项目，因此您需要将库部署在该服务器上。您可以尝试使用 eclipse 部署程序集为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T06:44:00.050

我通过从 eclipse 中删除这个项目来解决这个问题。重新启动eclipse后删除`.metadata`文件夹`workspace`并再次导入项目。我不知道可能是什么问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-25T03:20:13.583

对于 Intelli-J 12 用户：

1) 从项目结构->库中删除库。![在此处输入图像描述](../Images/94f998d23913a438d4785abad71ce34c.png)

2) 从 Maven 存储库重新添加项目（在项目结构中，单击“+”并选择“From Maven...”）。在接下来出现的对话框中，输入“com.amazonaws:aws-java-sdk”并开始搜索。搜索完成后，选择所需的版本![在此处输入图像描述](../Images/75d05b972606ff78e57fe00cc9dead6c.png)

3) 按照通常的提示“修复”IJ12 提醒您的损坏的东西。系统可能会提示您重新加载项目。

那为我修好了。感谢@user2032663 和@orberkov 指出这是一个IDE 问题。

笔记 ！！！：我正在使用 OpenDNS，而 IntelliJ12 中的 Maven 客户端找不到任何 > 1.4.1 的库，我切换到使用 Google DNS（8.8.8.8 和 8.8.4.4）并重试，然后它找到了我正在使用的版本1.5.8。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-10T20:36:48.747

当我遇到这个问题时，事实证明，当我将 Fluent API 添加为 Maven 依赖项时，它导入的 HTTPClient API 版本与我已经使用的版本不同。两个版本的 API 都打包在生成的 JAR 的 lib 文件夹中。版本冲突是导致此错误的原因。

将条目添加到您的类路径将解决问题，因为您只是手动指定要使用的版本。但是，为了解决根本问题，我只需要在重建之前删除我的目标文件夹（或运行 maven clean）。这删除了所有“缓存”的库 JAR，并且在下一次构建时，只重新下载了正确的 JAR。

希望对某人有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T13:20:40.430

查看生成的战争文件。您可以使用 7zip 之类的 zip 浏览器来执行此操作。查看哪些 jar 文件被打包到 war 文件的 /lib 中，并确保`httpclient-4.2.3.jar`包含在内。如果它丢失了，你可以接受我的 SatelliteSD 的建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-19T16:37:27.287

如果你使用GWT，要小心，因为gwt-dev.jar包含多个apache项目，所以你的程序可以在开发中编译运行，但是由于gwt-dev.jar没有部署，你需要部署所需的jar .

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-13T06:45:58.907

对照版本控制中的文件检查项目的 .classpath 文件。当您通过 IDE 更改项目依赖项/类路径时，Eclipse 擅长丢失与插件有关的位。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-28T13:51:37.783

这将起作用：

正如您在错误中看到的（如上所述），您缺少 jar/s - 更具体地说 - 您缺少一个**http-client** jar。

现在您可以选择手动查找此 jar 并将其添加到您的类路径/服务器的库中，或者使用码头现有的 jar；我更喜欢后者。

***在jetty.home***中运行以下命令将显示 Jetty 服务器在运行时加载的所有 jar：

```
C:\jetty-distribution-9.4.0.v20161208>java -jar start.jar --list-classpath 
```

输出如下所示：

```
Jetty Server Classpath:
-----------------------
Version Information on 34 entries in the classpath.
Note: order presented here is how they would appear on the classpath.
      changes to the --module=name command line options will be reflected here.
 0:                    (dir) | ${jetty.base}\resources
 1:                    3.1.0 | ${jetty.base}\lib\servlet-api-3.1.jar
 etc... 
```

您可以查看此列表，发现它缺少 http-client jar（**例如 jetty-client-9.4.0.v20161208.jar**）

Jetty 可以加载这个 jar（可以在其 lib 文件夹中找到），但需要明确提及。

为此，请转到您的 Jetty **start.ini**文件并添加相关模块：

```
module=client 
```

现在，再次检查加载的 jar 列表 - jetty-client jar 在那里；

服务器现在将根据需要启动。

# c# - 如何剪辑某些部分 TeeChart 图像

> ID：14875232
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:41.990
> 
> 标签：c#, teechart

我对 c# 没有那么深的了解。我正在使用 TeeChart 绘制图表。我可以将图表图像保存为 .jpg、.bmp 等格式 我需要做的是在保存之前我想剪辑图像的某些部分，然后按原样保存其余部分，而无需更改像素信息或任何其他内容。 ![在此处输入图像描述](../Images/a4c16a7ed5a579ffbfc749c1d3306d90.png)

我想夹在块框部分内。剩下的图表应该是原样。以同样的方式，如果我愿意，我也可以剪辑末端部分图。图像的像素或高度应该没有变化。剩下的图像也应该覆盖整个图表。是否可以。任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:52:44.160

```
var destBitmap = sourceBitmap.Clone(new Rect(0, 0, 100, 200), sourceBitmap.PixelFormat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:09:28.410

您可以从 tChart1.Chart.ChartRect 中获取图表绘制区域的坐标。这是一个将图表图例剪辑成图像的示例：

```
public Form1()
{
  InitializeComponent();
  InitializeChart();
}

private Bitmap chartBmp;

private void InitializeChart()
{
  tChart1.Series.Add(new Steema.TeeChart.Styles.Bar()).FillSampleValues();

  chartBmp = tChart1.Bitmap;

  tChart1.GetLegendRect += tChart1_GetLegendRect;
}

void tChart1_GetLegendRect(object sender, Steema.TeeChart.GetLegendRectEventArgs e)
{
  Rectangle cropRect = e.Rectangle;
  Bitmap legendImg = new Bitmap(cropRect.Width, cropRect.Height);

  using (Graphics g = Graphics.FromImage(legendImg))
  {
    g.DrawImage(chartBmp, new Rectangle(0, 0, legendImg.Width, legendImg.Height),
                     cropRect,
                     GraphicsUnit.Pixel);
  }

  legendImg.Save(@"c:\temp\legend.png");
} 
```

# ios - UITableViewCell 内容在滚动时移动其位置

> ID：14875234
> 
> 赞同：1
> 
> 时间：2013-02-14T12:49:53.303
> 
> 标签：ios, objective-c, uitableview, uiwebview

我只是显示一个`UITableView`with `UIWebView`s 而我的代码是

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath 
    *)indexPath

   {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;

        UILabel *lable = [[UILabel alloc]initWithFrame:CGRectMake(0, 5, 400, 30)];
        [lable setBackgroundColor:[UIColor clearColor]];
        [lable setTextColor:[UIColor darkGrayColor]];
        lable.tag = 333;
        [lable setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0f]];
        //[lable setText:[arrayOfSectionTitles objectAtIndex:indexPath.row]];
        [cell addSubview:lable];

        if (indexPath.row == 0) {

            UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 250)];
            webView.tag = 1001;
            [webView setBackgroundColor:[UIColor greenColor]];
            NSString *urlAddress = @"http://www.roseindia.net";
            NSURL *url = [NSURL URLWithString:urlAddress];
            NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
            [webView loadRequest:requestObj];
            [cell.contentView addSubview:webView];
            [webView setHidden:YES];

        }
        else if (indexPath.row == 1){

            UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 100)];
            webView.tag = 1002;
            [webView setBackgroundColor:[UIColor greenColor]];
            NSString *urlAddress = @"http://www.roseindia.net";
            NSURL *url = [NSURL URLWithString:urlAddress];
            NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
            [webView loadRequest:requestObj];
            [cell.contentView addSubview:webView];
            [webView setHidden:YES];

        }
        else if (indexPath.row == 2){

            UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 200)];
            webView.tag = 1003;
            [webView setBackgroundColor:[UIColor greenColor]];
            NSString *urlAddress = @"http://www.roseindia.net";
            NSURL *url = [NSURL URLWithString:urlAddress];
            NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
            [webView loadRequest:requestObj];
            [cell.contentView addSubview:webView];
            [webView setHidden:YES];

        }

    }

    UILabel* label = (UILabel*)[cell viewWithTag:333];

[label setText:[arrayOfSectionTitles objectAtIndex:indexPath.row]];

    tableview.separatorColor = [UIColor clearColor];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    BOOL isSelected = ![self cellIsSelected:indexPath];

    // Store cell 'selected' state keyed on indexPath
    NSNumber *selectedIndex = [NSNumber numberWithBool:isSelected];
    [selectedIndexes setObject:selectedIndex forKey:indexPath];

    UITableViewCell *cell = (UITableViewCell *)[tableview cellForRowAtIndexPath:indexPath];

    if (indexPath.row == 0) {
        UIWebView* webView = (UIWebView*)[cell viewWithTag:1001];

        if (!cellSelected1) {
            [webView setHidden:NO];
            cellSelected1 = YES;
        }
        else {
            [webView setHidden:YES];
            cellSelected1 = NO;
        }
    }
    else if (indexPath.row == 1) {
        UIWebView* webView = (UIWebView*)[cell viewWithTag:1002];

        if (!cellSelected2) {
            [webView setHidden:NO];
            cellSelected2 = YES;
        }
        else {
            [webView setHidden:YES];
            cellSelected2 = NO;
        }

    }
    else if (indexPath.row == 2) {
        UIWebView* webView = (UIWebView*)[cell viewWithTag:1003];

        if (!cellSelected3) {
            [webView setHidden:NO];
            cellSelected3 = YES;
        }
        else {
            [webView setHidden:YES];
            cellSelected3 = NO;
        }

    }

    [tableview reloadData];
} 
```

当我单击第一个单元格时，`UIWebView`应该显示，再次单击以隐藏...它正在工作。

但我的问题是，如果我滚动`UITableView`，内容（`UIWebView`）正在改变它`indexPath`并显示在最后`indexPath`一个`tableview`.

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:22:24.273

发生这种情况是因为一旦初始化了单元格，它们就会以不同的顺序出队。iOS 会自动执行此操作。如果您希望它们停止出队过程，请每次都初始化它们，或者单独处理它们。

### 编辑

这是我的意思的一个例子：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;

    UILabel *lable = [[UILabel alloc]initWithFrame:CGRectMake(0, 5, 400, 30)];
    [lable setBackgroundColor:[UIColor clearColor]];
    [lable setTextColor:[UIColor darkGrayColor]];
    lable.tag = 333;
    [lable setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16.0f]];
    //[lable setText:[arrayOfSectionTitles objectAtIndex:indexPath.row]];
    [cell addSubview:lable];

    if (indexPath.row == 0) {

        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 250)];
        webView.tag = 1001;
        [webView setBackgroundColor:[UIColor greenColor]];
        NSString *urlAddress = @"http://www.roseindia.net";
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webView loadRequest:requestObj];
        [cell.contentView addSubview:webView];
        [webView setHidden:YES];

    }
    else if (indexPath.row == 1){

        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 100)];
        webView.tag = 1002;
        [webView setBackgroundColor:[UIColor greenColor]];
        NSString *urlAddress = @"http://www.roseindia.net";
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webView loadRequest:requestObj];
        [cell.contentView addSubview:webView];
        [webView setHidden:YES];

    }
    else if (indexPath.row == 2){

        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(15, 45, 600, 200)];
        webView.tag = 1003;
        [webView setBackgroundColor:[UIColor greenColor]];
        NSString *urlAddress = @"http://www.roseindia.net";
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webView loadRequest:requestObj];
        [cell.contentView addSubview:webView];
        [webView setHidden:YES];

    }

}

UILabel* label = (UILabel*)[cell viewWithTag:333];

[label setText:[arrayOfSectionTitles objectAtIndex:indexPath.row]];

tableview.separatorColor = [UIColor clearColor];

return cell;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:01:40.260

我认为问题来自使用“dequeueReusableCellWithIdentifier”：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

您应该将所有访问过的单元格存储在 NSMutableDictionary 中，然后您可以使用它们：

```
NSNumber * cellKey = [NSNumber numberWithInt:indexPath.row];
UITableViewCell *cell = [allCells objectForKey:cellKey];
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    // add all you need to cell

    // save cell in dictionary
    [allCells setObject:cell forKey:cellKey];
} 
```

# iphone - 返回图像参数单个值的实例方法

> ID：14875237
> 
> 赞同：0
> 
> 时间：2013-02-14T12:49:59.863
> 
> 标签：iphone, methods

我想通过调用实例方法来获取图像参数 x 和 y 作为回报。我需要发送一个从 0 到 3 的整数值，根据该值获取相应的结果。下面是我尝试使用的代码。

```
-(int)imgSize:(int)y parameters:(int)m
{   
if(n == 0)
{

    return  y= 320;
    return m = 50;
}

if(n == 1)
{
    return  y= 728;
    return m = 90;
}

if(n == 2)
{
    return  y= 300;
    return m = 250;
}

if(n == 3)
{
    return  y= 468;
    return m = 60;
}
return 0;
} 
```

我没有得到的是如何发送 n 的值以便它可以提供所需的响应。请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:39:10.243

如果我理解正确，您会将输入与输出混淆，因此：

```
-(CGSize)imgSizeWithParameters:(int)n
{
CGSize m = CGSizeMake(0,0);   
if(n == 0)
{
    m = CGSizeMake(50,320); 
}
else if(n == 1)
{
    m = CGSizeMake(90,728); 
}
else if(n == 2)
{
    m = CGSizeMake(250,320);   
}
else if(n == 3)
{
    m = CGSizeMake(60,468);
}
return m;
} 
```

获取参数：

```
CGSize size = [self imgSizeWithParameters:x]; //where x is 0,1,2 or 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:08:34.723

```
-(NSMutableArray*)imgSize:(int)y parameters:(int)m
{   
if(n == 0)
{
    NSMutableArray *tmpArray=[[NSMutableArray alloc]initWithObjects:[NSNumber   numberWithInt:320],[NSNumber numberWithInt:50],nil];
    return tmpArray;
}

if(n == 1)
{
NSMutableArray *tmpArray=[[NSMutableArray alloc]initWithObjects:[NSNumber   numberWithInt:728],[NSNumber numberWithInt:90],nil];
return tmpArray;
}

if(n == 2)
{

NSMutableArray *tmpArray=[[NSMutableArray alloc]initWithObjects:[NSNumber   numberWithInt:300],[NSNumber numberWithInt:250],nil];
return tmpArray;
}

if(n == 3)
{

NSMutableArray *tmpArray=[[NSMutableArray alloc]initWithObjects:[NSNumber   numberWithInt:468],[NSNumber numberWithInt:60],nil];
return tmpArray;
}

} 
```

# google-app-engine - 为什么我更改托管的域后站点需要时间才能上线？

> ID：14875244
> 
> 赞同：0
> 
> 时间：2013-02-14T12:50:23.910
> 
> 标签：google-app-engine, hosting

我使用 appengine 托管了我的网站，在我将托管它的子域更改为另一个子域后，需要几个小时才能再次上线。为什么会这样，什么需要时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:04:49.820

[http://support.powerdnn.com/KB/a604/dns-propagation-and-why-it-takes-so-long-explained.aspx](http://support.powerdnn.com/KB/a604/dns-propagation-and-why-it-takes-so-long-explained.aspx)

> **为什么 DNS 需要这么长时间才能传播？**您已注册您的域名，将您的网站上传到我们的其中一台网络服务器，并要求您的注册商使用我们的名称服务器或将您的“A”记录指向您的网络服务器的 IP 地址。一旦这完成了，还有什么问题？
> 
> 当您的网站地址输入浏览器时，计算机会从您的 Internet 服务器提供商 (ISP) DNS 记录中请求包含您网站的服务器的 IP 地址。如果该站点未在记录中列出，它会向注册商查询您的网站的 DNS 授权开始 (SOA) 是谁。如果您使用注册商的名称服务器作为 SOA，它会查找您的域的“A”记录并返回列出的服务器的 IP 地址。如果您使用我们的名称服务器，注册商会将浏览器指向我们的 DNS 服务器，以确定您的域名的 IP 地址。从那里将请求发送到托管域的服务器，然后为浏览器提供网站。
> 
> 为了加快网站的加载速度，每个 ISP 都会将 DNS 记录的副本缓存一段时间，有时长达 48 小时。这意味着他们制作自己的注册商主 DNS 记录的副本，并在本地读取它们，而不是每次对您的站点发出请求时都直接向域注册商发出请求。这大大加快了网上冲浪的速度：减少了网络浏览器请求域查找并获得答案所需的返回时间，并减少了网络上的流量。缓存主 DNS 记录的缺点是因为每个公司或 ISP 仅每隔几天更新一次记录，您对 DNS 记录所做的任何更改都不会反映在这些更新之间。虽然我们的 DNS 服务器每 15 分钟更新一次，系统范围内更新之间的时间没有标准化，因此延迟可能从几个小时到几天不等。缓存记录的这种缓慢更新称为传播延迟，因为您网站的 DNS 信息正在网络上的所有 DNS 服务器中传播。完成后，每个人都可以访问您的新网站。

# java - 设置 GWT 生成的 js 文件的路径

> ID：14875247
> 
> 赞同：1
> 
> 时间：2013-02-14T12:50:34.710
> 
> 标签：java, gwt

我有 GWT 应用程序，我需要使用在不使用 GWT 的 Java EE 应用程序中为客户端生成的文件。实际上，我只想在一些 html 页面中包含 my_app.nocache.js 。

这部分工作正常，当 my_app.nocache.js 尝试加载由 GWT 生成的其他资源（其他 *.js 文件和 *.css 文件）时，问题就开始了。但是我在 /_resources/mypackage/ 中拥有所有资源，而 my_app.nocache.js 对此一无所知，并尝试仅加载 my_name.css 而不是 /_resources/mypackage/my_name.css

有没有办法为 GWT 设置路径以生成资源文件，所以它会和我在 Java 应用程序中使用的一样吗？

# python - Python，numpy排序数组

> ID：14875248
> 
> 赞同：6
> 
> 时间：2013-02-14T12:50:36.680
> 
> 标签：python, numpy

我正在使用 numpy 并且有一个包含一些值的数组（ndarray 类型）。此阵列的形状为 1000x1500。我重新塑造了它

```
brr = np.reshape(arr, arr.shape[0]*arr.shape[1]) 
```

当我尝试

```
brr.reverse()
AttributeError: ‘numpy.ndarray’ object has no attribute ‘reverse’ 
```

得到错误。我如何对这个数组进行排序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T12:57:06.987

如果您只想反转它：

```
brr[:] = brr[::-1] 
```

实际上，这会沿轴 0 反转。如果数组有多个轴，您也可以在任何其他轴上反转。

要以相反的顺序排序：

```
>>> arr = np.random.random((1000,1500))
>>> brr = np.reshape(arr, arr.shape[0]*arr.shape[1])
>>> brr.sort()
>>> brr = brr[::-1]
>>> brr
array([  9.99999960e-01,   9.99998167e-01,   9.99998114e-01, ...,
     3.79672182e-07,   3.23871190e-07,   8.34517810e-08]) 
```

或者，使用 argsort：

```
>>> arr = np.random.random((1000,1500))
>>> brr = np.reshape(arr, arr.shape[0]*arr.shape[1])
>>> sort_indices = np.argsort(brr)[::-1]
>>> brr[:] = brr[sort_indices]
>>> brr
array([  9.99999849e-01,   9.99998950e-01,   9.99998762e-01, ...,
         1.16993050e-06,   1.68760770e-07,   6.58422260e-08]) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-28T13:48:02.683

试试这个按降序排序，

```
import numpy as np
a = np.array([1,3,4,5,6])
print -np.sort(-a) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-11T17:36:14.620

要按降序对一维数组进行排序，请将 reverse=True 传递给`sorted`. 正如[@Erik](https://stackoverflow.com/users/832218/erik)指出的那样，`sorted`将首先制作列表的副本，然后对其进行反向排序。

```
import numpy as np
import random
x = np.arange(0, 10)
x_sorted_reverse = sorted(x, reverse=True) 
```

# linux - 为什么我的 bash shell scipt 中出现此错误

> ID：14875251
> 
> 赞同：0
> 
> 时间：2013-02-14T12:50:53.427
> 
> 标签：linux, git, bash

我一直在尝试向我的 bash shell 脚本添加一个选项，即有人执行“-r”我推送到 git 服务器但我收到以下错误

```
mirror.sh: line 8: conditional binary operator expected
mirror.sh: line 8: syntax error near `-e'
mirror.sh: line 8: `if [[ "$1" -e "-r" ]];then' 
```

下面是我的 bash 脚本：

```
#!/bin/bash
cd /home/joe/Documents/sourcecode/mirror.git
git svn rebase

#
# if option -r then push to master
#
if [[ "$1" -e "-r" ]];then
    git push origin master
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:53:14.030

尝试：

`if [[ "$1" = "-r" ]];then`

或者

`if [[ "$1" == "-r" ]];then`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:57:19.663

关于什么：

```
if [[ "$1" == "-r" ]]; then 
```

?

-e 在您的示例中测试文件是否存在。这是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:06:36.977

如前所述`-e`，确实是[文件存在测试](http://tldp.org/LDP/abs/html/fto.html)。我猜您想比较值并考虑使用`-eq`但那是[算术二元运算符](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)。您需要`==`将字符串比较为

```
if [[ "$1" == "-r" ]]; 
```

# objective-c - 使用带有命名空间映射的 [CXMLNode nodesForXPath] 内存崩溃

> ID：14875252
> 
> 赞同：0
> 
> 时间：2013-02-14T12:50:53.940
> 
> 标签：objective-c, xml-parsing, touchxml

我正在尝试使用[TouchXML library](https://github.com/TouchCode/TouchXML)在objective-c 中解析一些XML 。XML 在根元素中有一个命名空间，因此我在 CXMLNode 对象上使用 TouchXML 库中的方法，例如：

```
- (NSArray *)nodesForXPath:(NSString *)xpath namespaceMappings:(NSDictionary *)inNamespaceMappings error:(NSError **)error; 
```

我的代码使用这种方法来选择一组与 XPath 查询匹配的节点，然后为每个节点执行更多的 XPath 查询以读取一些属性。出于某种原因，第二组查询导致了一个`pointer being freed was not allocated`错误——我不知道这是从哪里来的。

好的，这是 XML 的片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
  <Placemark>
    <name>Place 1</name>
    <description><![CDATA[6-20 Luck Street Eltham 3095]]></description>
    <Point>
      <coordinates>145.151138,-37.712663,0.000000</coordinates>
    </Point>
  </Placemark>
  <Placemark>
    <name>Place 2</name>
    <description><![CDATA[The Pines Shopping Centre, Reynolds Road Doncaster East 3109]]></description>
    <Point>
      <coordinates>145.168620,-37.762135,0.000000</coordinates>
    </Point>
  </Placemark>
    <Placemark>
        <name>Place 3</name>
        <description><![CDATA[25 Main Street Greensborough 3088]]></description>
        <Point>
            <coordinates>145.102788,-37.702511,0.000000</coordinates>
        </Point>
    </Placemark>
</Document>
</kml> 
```

所以我把它读入一个 CMLXmlElement，然后我有这段代码来读出每个 <Placemark> 元素：

```
_locations = [NSMutableArray array];
NSDictionary *mappings = [NSDictionary dictionaryWithObjectsAndKeys:@"http://earth.google.com/kml/2.2", @"kmlns", nil];
NSError *error = nil;
for (CXMLNode *node in [element nodesForXPath@"//kmlns:kml/kmlns:Document/kmlns:Placemark" namespaceMappings:mappings error:&error])
{
    [_locations addObject:[[ONEMapLocation alloc] initWithXmlElement:(CXMLElement *)node]];
} 
```

此代码运行没有问题。但是，`initWithXmlElement`每个位置对象都会像这样初始化自己：

```
NSDictionary *namespaceMappings = [NSDictionary dictionaryWithObjectsAndKeys:@"http://earth.google.com/kml/2.2", @"kmlns", nil];
NSError *error = nil;
_name = ((CXMLNode*)[[xmlElement nodesForXPath:@"./kmlns:name/text()" namespaceMappings:namespaceMappings error:&error] lastObject]).stringValue;
_description = ((CXMLNode*)[[xmlElement nodesForXPath:@"./description/text()" namespaceMappings:namespaceMappings error:&error] lastObject]).stringValue;
NSString *rawCoordinates = _description = ((CXMLNode*)[[xmlElement nodesForXPath:@"./kmlns:Point/kmlns:coordinates/text()" namespaceMappings:namespaceMappings error:&error] lastObject]).stringValue;
NSArray *coordinateArray = [rawCoordinates componentsSeparatedByString:@","];
_latitude = [[coordinateArray objectAtIndex:1] floatValue];
_longitude = [[coordinateArray objectAtIndex:0] floatValue]; 
```

当这段代码运行时，它成功地解析了 XML 文档，但大约一秒钟后，应用程序因错误而崩溃`pointer being freed was not allocated`。如果我注释掉这些行并将`_name`,`_description`等设置为虚拟值，则一切正常。

我还尝试从 XML 中提取命名空间，并使用 TouchXML 库中的方法，这些方法不受命名空间的影响，并且工作正常（尽管我无法在现实世界的场景）。

我知道，很长，很复杂的问题，可能有很多其他可能的原因，但我肯定已经将问题隔离到这六行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T08:00:29.413

以防万一有人遇到这个或类似的问题 - 这听起来像这里描述的问题（[https://github.com/TouchCode/TouchXML/issues/11](https://github.com/TouchCode/TouchXML/issues/11)），我也碰巧遇到过。本质上，这是一个**EXC_BAD_ACCESS**错误，因为 xml 文档比其子节点更早地被释放，并且当子节点想要释放自己时，它们会崩溃。

我没有深入研究 TouchXML 代码，但是对**TouchXML**的以下更改似乎可以解决问题并且也不会导致任何内存泄漏（我在 Profiler 中检查过）：

在**CXMLDocument.m 中**：

```
-(void)dealloc
{
    // Fix for #35 http://code.google.com/p/touchcode/issues/detail?id=35 -- clear up the node objects first (inside a pool so I _know_ they're cleared) and then freeing the document

    @autoreleasepool {

        //### this is added ### fix for BAD_ACCESS on CXMLNode after releasing doc - get rid of all nodes in nodePool first to make sure they are released before the doc is released
        NSArray* allObjects = [nodePool allObjects];
        for(CXMLNode* child in allObjects)
        {
            [nodePool removeObject:child];
            [child invalidate];
        }
        //### until here ###

        nodePool = NULL;
    }
    //
    xmlFreeDoc((xmlDocPtr)_node);
    _node = NULL;
    //
} 
```

在**CXMLNode.h 中**：

```
//### add manual dealloc function ###
-(void)invalidate; // added to prevent BAD_ACCESS on doc release ... 
```

在**CXMLNode.m**中：

```
//### invalidate function added to be able to manually dealloc this node ###
-(void)invalidate {
    if (_node)
    {
        if (_node->_private == (__bridge void *)self)
            _node->_private = NULL;

        if (_freeNodeOnRelease)
        {
            xmlFreeNode(_node);
        }

        _node = NULL;
    }
} 
```

# unit-testing - 如何在不使用 Maven 的情况下为使用 apache-cxf 和 spring 开发的 REST Web 服务编写单元测试

> ID：14875254
> 
> 赞同：3
> 
> 时间：2013-02-14T12:50:58.657
> 
> 标签：unit-testing, jakarta-ee, cxf, jax-rs, embedded-jetty

我使用 apache cxf 库开发了一个 REST Web 应用程序。我可以使用浏览器访问它们并进行测试。我想为服务编写单元测试。

我尝试使用带有 cxf 的嵌入式 Jetty 服务器对其进行测试。启动 Jetty 服务器后，我使用 cxf 的 WebClient API 获取代理。相关代码是

`WebClient client = WebClient.create(ENDPOINT_ADDRESS);
client.accept("text/xml");
client.path("/studyservice/topimstudydetails");
client.replaceQuery("pnlId=3&lclId=30&indId=442&maxImStudies=99&rName=DEV"); TopIMStudyDetailsResponse resp = client.get(TopIMStudyDetailsResponse.class); assertEquals(resp.getStatus().getReturnCode(),0);`

对服务的调用是成功的，因为我可以看到日志，但是我得到了一个空指针，该服务正在尝试进行 dao 调用。dao 被声明为服务的依赖项。我们如何获得一个注入了所有依赖项的代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:27:32.747

可能您会发现以下帖子有帮助：

*   [http://tarlogonjava.blogspot.co.il/2011/12/running-integration-test-using-with.html](http://tarlogonjava.blogspot.co.il/2011/12/running-integration-test-using-with.html)
*   [http://tarlogonjava.blogspot.co.il/2011/12/running-integration-tests-using-with.html](http://tarlogonjava.blogspot.co.il/2011/12/running-integration-tests-using-with.html)

第二篇文章是关于用特殊的内存数据源替换数据源以进行测试。

# android - 在android中列出图像缩略图名称和图像大小

> ID：14875255
> 
> 赞同：0
> 
> 时间：2013-02-14T12:50:59.903
> 
> 标签：android, listview, imageview, adapter

在我的 android 应用程序中，我遇到了致命的异常。我列出了图像信息，如缩略图、图像名称和图像大小。但是当我尝试执行低于其给出异常的代码时。这是代码-

```
 public class ImportFile<Context> extends ListActivity {
 String names[];
 Bitmap bb[];
 long size1[];
 Intent i;
  private String myFile;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist); 

        File file = new File(Environment.getExternalStorageDirectory()
            + File.separator
            + "gallery" //folder name
        );
        if (!file.exists()) {
            file.mkdirs();
        }

        setListAdapter(new IconicAdapter());

    }

    class IconicAdapter extends ArrayAdapter<String> {
        IconicAdapter() {
            super(ImportFile.this, R.layout.row, R.id.lable, names);
        }

        public View getView(int position,View convertview,ViewGroup parent){
            View row=super.getView(position, convertview, parent);
            ImageView icon=(ImageView)row.findViewById(R.id.icon);

        icon.setImageBitmap(bb[position]);
        TextView size=(TextView) row.findViewById(R.id.size);

        size.setText(size1[position]+"");
        return row;
        }

    }

    //read from sdcard
    private void getSD() {
        List<String> item = new ArrayList<String>();
        File f = new File("/sdcard/download");
        File[] files = f.listFiles();

        int j=0;
        for(int i = 0; i < files.length; i++) {
            File file = files[i];
            //take the file name only
            long size = file.length()/1024;

            myFile = file.getPath().substring(file.getPath().lastIndexOf("/")+1,file.getPath().length()).toLowerCase(); 

            if(myFile.endsWith(".jpeg")||myFile.endsWith(".png")|| myFile.endsWith(".gif") || myFile.endsWith(".jpg"))
            {
                names[j]=myFile;

                size1[j]=size;

                Bitmap b=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(file.getPath()), 50,50);
                bb[j]=b;
                j++;
            item.add(b +myFile+"             "+"Size:"+size+" KB" );

            }

        }

    }
    } 
```

以下是例外 -

```
02-14 18:00:44.267: E/AndroidRuntime(909): FATAL EXCEPTION: main
02-14 18:00:44.267: E/AndroidRuntime(909): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.zproject/com.my.zproject.ImportFile}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.os.Looper.loop(Looper.java:123)
02-14 18:00:44.267: E/AndroidRuntime(909):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-1 4 18:00:44.267: E/AndroidRuntime(909):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 18:00:44.267: E/AndroidRuntime(909):  at java.lang.reflect.Method.invoke(Method.java:521)
02-14 18:00:44.267: E/AndroidRuntime(909):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-14 18:00:44.267: E/AndroidRuntime(909):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-14 18:00:44.267: E/AndroidRuntime(909):  at dalvik.system.NativeStart.main(Native Method)
  02-14 18:00:44.267: E/AndroidRuntime(909): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'

02-14 18:00:44.267: E/AndroidRuntime(909): at android.app.ListActivity.onContentChanged(ListActivity.java:245)
  02-14 18:00:44.267: E/AndroidRuntime(909): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
  02-14 18:00:44.267: E/AndroidRuntime(909): at   android.app.Activity.setContentView(Activity.java:1647)
  02-14 18:00:44.267: E/AndroidRuntime(909): at com.my.zproject.ImportFile.onCreate(ImportFile.java:33) 
```

这是row.xml-

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageView 
    android:id="@+id/icon"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_gravity="center_vertical"
  android:padding="2dip"

    />

<LinearLayout 
    android:layout_width="fill_parent"
 android:layout_height="wrap_content"
android:orientation="vertical"
    >
    <TextView 
        android:id="@+id/lable"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />
     <TextView 
        android:id="@+id/size"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
     </LinearLayout>
   </LinearLayout> 
```

这里是 mylist.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
   <ListView 
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
    android:id="@+id/list" >
  </ListView>
   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:59:14.897

尝试将 ListView 的 ID 更改为`@android:id/list`.

# sql - MS_Access 中单个查询中的多个操作

> ID：14875256
> 
> 赞同：4
> 
> 时间：2013-02-14T12:51:02.350
> 
> 标签：sql, ms-access, ms-access-2007

我是否可以在单个查询中执行多个操作，或者我是否必须对我想要进行的每项更改进行查询？

我有一个“类型”列，它可以包含字符串值“BOOL”、“WORD”或“DINT”

在一个查询中，我想：

*   将所有“BOOL”更改为“DIGITAL”
*   将所有“WORD”更改为“UINT”
*   将所有“DINT”更改为“LONG”

是否可以在 1 个单一查询中执行此操作（如果是，如何？）

或者我必须做几个这样的查询：

```
UPDATE DB_Total SET Type = 'DIGITAL'
WHERE Type='BOOL'; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:03:48.433

您可以使用嵌套`IIF`语句：

```
UPDATE  DB_Total
SET     Type = IIF(Type='BOOL','DIGITAL',
                    IIF(Type='WORD','UINT',
                        IIF(Type='DINT','LONG',Type)
                    )
                )
WHERE   Type IN ('BOOL', 'WORD', 'DINT'); 
```

*（我通常会将 IIF 部分全部写在一行上，但我已经做了换行符，这样更容易阅读）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:24:26.273

考虑`Switch()`作为嵌套`IIf()`表达式的替代方案。

有了这些数据`DB_Total`...

```
id Type
 1 BOOL
 2 abc
 3        <-- Type is Null
 4 WORD
 5 DINT 
```

...此查询更新`DB_Total`如下所示...

```
UPDATE DB_Total
SET [Type] = Switch(
    [Type]='BOOL','DIGITAL',
    [Type]='WORD','UINT',
    [Type]='DINT','LONG'
    )
WHERE [Type] IN ('BOOL', 'WORD', 'DINT'); 
```

`DB_Total`后：

```
id Type
 1 DIGITAL
 2 abc
 3 
 4 UINT
 5 LONG 
```

但是，您可能会发现另一种方法更方便。创建`replacements`表：

```
id old_type new_type
 1 BOOL     DIGITAL
 2 WORD     UINT
 3 DINT     LONG 
```

然后此语句将产生与版本`UPDATE`相同的更改。`DB_Total``Switch()`

```
UPDATE DB_Total AS d
INNER JOIN replacements AS r
ON d.Type = r.old_type
SET d.Type = [r].[new_type]; 
```

将来，如果您需要更改或添加/删除成对的单词替换，您只需要编辑`replacements`表格。这样您就不需要修改查询了。

# php - 优化多线程 PHP 应用程序的内存使用。APC 或其他内存缓存技术是否合适？

> ID：14875259
> 
> 赞同：0
> 
> 时间：2013-02-14T12:51:15.873
> 
> 标签：php, memory-management, apc

[我猜这个问题与PHP cli Memory usage optimization](https://stackoverflow.com/questions/1107262/php-cli-memory-usage-optimization)的主题相似，但是当发布者发现一个简单的编码错误时，这个问题就解决了。

我有一个连续运行的多线程 PHP (CLI) 应用程序。我正在尝试优化内存使用，因为每个线程使用的内存量限制了我在任何给定时间可以运行的线程数（因为我有有限的可用内存量）。经过一番调查，似乎每个线程进程使用的最小内存量约为 1.3MB。似乎有点高，但经过一番挖掘后，似乎 PHP 以大约 0.5MB 的块分配内存。我怀疑我的应用程序是否足够精简以使用不到 0.5MB，但我想尝试一下。如果可能的话，即使将占地面积减少 10-20% 也很好。

我正在考虑的一种选择是使用 APC 在内存中缓存一些数据。作为一种减少内存的技术，这似乎违反直觉，但目前我非常频繁地调用 MySQL 数据库来存储和检索数据。这是一个小例子：

```
<?php
function get_stored_token(){
    connect_db();

    $query_result = mysql_query("select token from tokens");
    if ($query_result == true){
           $query_result_array = mysql_fetch_row($query_result);
           $token = $query_result_array[0];
           unset($query_result, $query_result_array);
           return $token;
    }
    else {
           echo "Problem with query to get stored token!\n";
    }
} 
```

以这种方式使用 MySQL 似乎有很多内存开销。这可以通过调用 来确认`pmap -d PID | grep mysql`，尤其`libmysqlclient_r.so.16.0.0`是在使用大量内存的地方。那么，也许一种在内存中缓存键/值对的简单技术实际上在内存方面会更轻？然而，我没有这方面的经验，所以我想在尝试更多地使用 APC（或其他一些缓存技术）之前听到关于这个想法的反馈。

任何其他关于如何在 PHP 中优化内存使用的想法都将受到欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:03:33.580

为什么你不使用 WHERE 术语？在 SQL 中，这部分确定将加载到 php 的行数，如果您正在寻找数据库中的第一个/最后一个 id，请为此使用 SQL 函数。一般来说，将 SQL 数据传递给 php 会消耗内存。

我认为，如果这是一个仅为所有用户选择而不是由用户修改的表，Memcahe 将对此有用。[Memcash PHP](http://php.net/manual/en/book.memcache.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:58:37.620

就个人而言，我会使用 memcached 进行数据库交互，这将大大提高线程处理能力。它可能不会减少整体内存使用量，但会提高执行速度，因此您应该能够更快地打开和关闭线程或更好地交叉调度线程，而不是所有事情都同时进行。
如果两个进程每个花费 1 分钟，现在每个进程花费 30 秒，那么这两个进程的内存使用量可以翻倍，并且每个进程只使用 30 秒，现在总体上仍然是一分钟，但执行速度更快。

# c++ - 如何通过函数在 C++ 中设置私有静态数组？

> ID：14875260
> 
> 赞同：0
> 
> 时间：2013-02-14T12:51:21.787
> 
> 标签：c++, arrays, class, static

我有一个类，它作为成员包含一个大数组。

```
exampleclass{
public:
   ...
   static void set_array();
   static int somearray[1000];
}; 
```

（该数组应该是私有的，但为了快速和肮脏的测试目的，我将它设置为公共。见下文）

现在，数组初始化为：

```
int exampleclass::somearray[1000]; 
```

这意味着我所有的值都是 0。到目前为止，一切都很好

现在，我想用一个函数来初始化它，它的定义如下：

```
void exampleclass::set_array()
{
memset(somearray, 0, sizeof(somearray));
FILE* fin= fopen("myfile.dat", "rb");
size_t bytesread= fread(somearray, sizeof(somearray), 1, fin);
fclose(fin);
} 
```

所有这些都包含在头文件中

如果我在任何类之外使用它（即： somearray[1000] 是一个全局变量，并且我将上述函数称为主函数中的全局函数，那么一切都像一个魅力。

但是当我现在从主要功能中执行以下操作时：

```
int main()
{
  exampleclass::set_array();
  for (int i=0; i<20; i++)
  {
      std::cout << exampleclass::somearray[i] << std::endl;
  }
  return 0;
} 
```

我得到的输出是：

```
0
0
0
...
0 
```

即使我期望它输出从 myfile.dat 读取的值。

我究竟做错了什么？如何告诉班级使用我提供的函数修改静态成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T02:00:24.130

我认为 fread 从流中读取为一个字符（我的猜测），所以尝试将 somearray 更改为**static char somearray[1000]**，我认为它会起作用

***注意：** fread 甚至将“\0”读为单个字符*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:34:36.233

在数组上使用运算符 sizeof() 并不总是按照您预期的方式运行。根据上下文，数组可以解释为只是一个指针，如此[处](http://www.cplusplus.com/faq/sequences/arrays/sizeof-array/#basics)所述。

我认为您真正想要做的是将[fread](http://www.cplusplus.com/reference/cstdio/fread/?kw=fread)更改为：

```
size_t numread = fread(somearray, sizeof(int), 1000, fin); 
```

# asp.net-mvc - 仅上传 word/pdf 文件并通过 ASP.NET MVC 中的模型将链接存储在数据库中

> ID：14875262
> 
> 赞同：0
> 
> 时间：2013-02-14T12:51:28.387
> 
> 标签：asp.net-mvc, file-upload, web, model-binding

我有一个表格应该包含用户的凭据和他的简历。PDF/文档

我已经有一个数据库，我计划将上传文件的服务器路径存储为字符串

我生成了一个强类型视图，该视图通过

```
<%: Html.EditorFor(model => model.file, new { type = "file" })%> 
```

我在模型中创建了一个 HttpPostedFileBase 对象。并且 model.file 应该存储 HttpPostedFileBase 文件对象。

但是在控制器中，当我尝试获取 model.file 对象时，我得到 null 作为它的值。

我究竟做错了什么。为什么模型绑定不绑定文件上传？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:57:12.760

添加`enctype="multipart/form-data"`到表单选项

```
@using (Html.BeginForm("Action", 
    "Controller", 
    FormMethod.Post, 
    new 
    { 
        id = "form", enctype="multipart/form-data" 
    }))
{

} 
```

# android - 如何使用box2d在andengine中像弹跳球一样移动精灵

> ID：14875266
> 
> 赞同：2
> 
> 时间：2013-02-14T12:51:34.963
> 
> 标签：android, android-emulator

嗨，我在这里做一个应用程序，我需要用一些力量像弹跳球一样移动精灵。使用 box2d 如何施加力和速度以及如何像球一样移动精灵，我不知道。请任何人建议我...

```
 MainActivity.class: 

      public class MainActivity extends SimpleBaseGameActivity{

            private Camera mCamera;

    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion mFaceTextureRegion;

    private BitmapTextureAtlas mOnScreenControlTexture;
    private ITextureRegion mOnScreenControlBaseTextureRegion;
    private ITextureRegion mOnScreenControlKnobTextureRegion;

    @Override
    public EngineOptions onCreateEngineOptions() {
        Toast.makeText(this, "Also try tapping this AnalogOnScreenControl!", Toast.LENGTH_LONG).show();

        this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), this.mCamera);
    }

    @Override
    public void onCreateResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 32, 32, TextureOptions.BILINEAR);
        this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);
        this.mBitmapTextureAtlas.load();

    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

        final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
        final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;
        final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion, this.getVertexBufferObjectManager());
        final PhysicsHandler physicsHandler = new PhysicsHandler(face);
        face.registerUpdateHandler(physicsHandler);

        scene.attachChild(face);

        return scene;
    }

  } 
```

# java - 简单 AsyncTask - 返回值 null

> ID：14875267
> 
> 赞同：0
> 
> 时间：2013-02-14T12:51:37.467
> 
> 标签：java, android, multithreading

我已经阅读了 AsyncTask，我了解了大部分内容，但我还有一个小问题。

我基本上想使用线程从在线资源中检索数据，并将其返回给活动。下面是一个简单的伪代码。

```
public class register extends Activity implements OnClickListener{

public static String dbData;

     public static void setDBData(String data)
     {
         dbData = data;
     }

   //CALLED FROM ONCREATE()
 public void regPageTwo()
 {
     setContentView(R.layout.layout_register_two);
     new dataExchange().execute(1);
        Log.i("Data", dbData);

 }

}

public class dataExchange extends AsyncTask<Integer, Void, String>{

       @Override
    protected String doInBackground(Integer... params) {
      //EVENTUALLY DO OTHER COMPUTATION
        String test="aTest";
        return test;
    }

    @Override
    protected void onPostExecute(String result)
    {
        register.setDBData(result);
    }
} 
```

（很抱歉格式不好，还不太习惯使用它）。知道为什么 dbData 始终为 NULL 吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:59:50.040

```
 public void regPageTwo()
 {
    setContentView(R.layout.layout_register_two);
    new dataExchange().execute(1);
    Log.i("Data", dbData);
 } 
```

看了你上面的代码后，

该行`Log.i("Data", dbData);`应该在`onPostExecute()`AsyncTask..

实际上，您的代码行`Log.i("Data", dbData);`会在 AsyncTask 完成之前立即执行。所以它总是一个**NULL**你必须等待完成 AsyncTask。或者正如我建议的那样，将这一行放入`onPostExecute()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:59:59.413

因为这行会被执行：

```
Log.i("Data", dbData); 
```

之后立马

```
new dataExchange().execute(1); 
```

但是这条线将在将来的某个时间执行：

```
register.setDBData(result); 
```

发生这种情况是因为它在不同的线程上**[异步运行。](http://www.bisque.com/help/CCDSoft/asynchronous_vs._synchronous_execution.htm)**

# ruby-on-rails - 通过关系表获取值

> ID：14875271
> 
> 赞同：0
> 
> 时间：2013-02-14T12:51:56.810
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, relational-database

在我的应用程序中，我有一个页面可以呈现数据库中的所有项目。我想要的是能够过滤结果，例如只显示用户是成员的一次。

以下来自我的项目控制器，我想在其中执行此操作（仅显示用户是成员的项目）。首先从找到 user_id 的“ProjectUser”中获取所有项目。然后我想使用这个数组从表“项目”中检索所有相关项目，并使用@user_is_member.project_id。

这不起作用，因为它只给了我一个项目，而不是全部。

如何更改代码以完成我想要的？

**编码：**

```
@user_is_member = ProjectsUser.where(:user_id => current_user.id)

@user_is_member.each do |member|
    @projects = Project.where(:id => member.project_id)
end 
```

## 表：

**项目_用户：**

```
project_id
user_id 
```

**项目：**

```
id
...non relevant fields... 
```

## 楷模：

**用户型号：**

```
class User < ActiveRecord::Base
  has_many :project_users
  has_and_belongs_to_many :projects
end 
```

**项目型号：**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users # => , :class_name => 'User'

  belongs_to :user
end 
```

**项目用户模型：**

```
class ProjectsUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :project
end 
```

**注意：** current_user 是当前登录的用户（可以访问所有用户字段，例如“id”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:37:02.070

这不是关联模型的好方法。如果您想将用户关联到项目并使一个用户成为管理员/创建者，那么您应该将您的模型关联为：

用户

```
class User < ActiveRecord::Base
 attr_accessible :first_name, :last_name, :email, :password
 has_secure_password

 has_many :projects_users
 has_many :projects, :through => :projects_users
end 
```

项目

```
class Project < ActiveRecord::Base
 has_many :projects_users
 has_many :users, :through => :projects_users
end 
```

项目用户

```
class ProjectsUser < ActiveRecord::Base
 attr_accessible :role

 belongs_to :user
 belongs_to :project
end 
```

我已经向您的 ProjectsUser 模型添加了一个额外的列/属性，该模型将具有一个字符串值（管理员/成员）。现在你可以通过做`@project.users.where(:role => 'member')`和管理来获得一个项目的成员`@project.users.where(:role => 'admin').first`。

如果您不想改变自己的方式，那么在您的控制器中执行以下操作：

```
@user_is_member = ProjectsUser.where(:user_id => current_user.id)
project_ids = []

@user_is_member.each do |member|
  project_ids << member.project_id
end

@projects = Project.where(:id => project_ids) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:03:07.350

如果你想要所有的项目`current_user`，你可以这样做：

```
 @projects = current_user.projects 
```

我假设你有类似的东西：

```
class User < ActiveRecord::Base
  has_many :project_users
  has_many :projects, :through => :project_users
end

class ProjectUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :project
end

class Project < ActiveRecord::Base
  has_many :project_users
  has_many :users, :through => :project_users
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:04:57.630

问题是您没有`project_id`某些以某种方式被删除的用户。

通过将类似语句放入循环中`project_id`来检查您的数据库。`nil``puts`

或者，您可以使用`:dependent => :destroy`您的关系来摆脱这种不一致的数据。它通常发生在您测试并以某种方式删除任何记录但忘记删除其他表的外键关联关系时。

这可以像下面这样完成：

```
@user_is_member = ProjectsUser.where(:user_id => current_user.id)

@user_is_member.each do |member|

puts "Checking the project id existence for each user member"+member.project_id.to_s

end 
```

# php - Python 的 repr() 等价于 PHP

> ID：14875275
> 
> 赞同：3
> 
> 时间：2013-02-14T12:52:02.167
> 
> 标签：php, python, repr

我正在创建一个简单的数组包装类，并希望它的`__toString()`方法像 Python 列表一样格式化，例如：`["foo", "bar", 6, 21.00002351]`. 将每个元素转换为字符串是不够的，因为字符串对象实际上是在列表表示中引用的。

PHP 中是否有`repr()`等价物，如果没有，PHP 实现会是什么样子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T12:59:13.237

[Python 的 repr()](http://docs.python.org/2/reference/datamodel.html?highlight=repr#object.__repr__)返回一个输出，其中

```
eval(repr(object)) == object 
```

> 由 repr() 内置函数和字符串转换（反引号）调用，以计算对象的“官方”字符串表示。如果可能的话，这应该看起来像一个有效的 Python 表达式，可用于重新创建具有相同值的对象（给定适当的环境）。

所以PHP中最接近的东西是

*   [`var_export`— 输出或返回变量的可解析字符串表示](http://www.php.net/manual/en/function.var-export.php)

这里的关键字是*parseable*。虽然函数`print_r`和`var_dump`会给出传递给它们的数据的某种表示形式，但它们不容易解析，也不像 PHP 表达式，可以进行 eval 处理。

**例子：**

```
var_export(['foo', 'bar', 1,2,3]); 
```

会给

```
array (
  0 => 'foo',
  1 => 'bar',
  2 => 1,
  3 => 2,
  4 => 3,
) 
```

这是完全有效的 PHP 代码：

```
$data = ['foo', 'bar', 1, 2, 3];
$repr = var_export($data, true);

// have to use it with return though to eval it back into a var
$evald = eval("return $repr;");

var_dump($evald == $data); // true 
```

另一种选择是用于[`serialize`](http://php.net/serialize)获取数据类型的规范和可解析表示，例如

```
$data = ['foo', 'bar', 1, 2, 3];
$repr = serialize($data); 
// -> a:5:{i:0;s:3:"foo";i:1;s:3:"bar";i:2;i:1;i:3;i:2;i:4;i:3;}
var_dump( unserialize($repr) == $data ); // true 
```

与 不同`var_export`，生成的表示不是 PHP 表达式，而是指示类型及其属性/值（序列化）的压缩字符串。

但是您可能只是在寻找[`json_encode`](http://php.net/json_encode)其他地方指出的。

*将其设为社区 Wiki，因为我已经在给定的欺骗中回答了这个问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:57:01.913

我不知道 Python，但 PHP 数组可以包含任何数据类型和嵌套级别。我不知道这如何转化为您的格式。

有很多函数可以打印数组：

*   `print_r()`
*   `var_dump()`
*   `var_export()`

...但是你的格式让我想起了 JSON，所以你可以简单地这样做：

```
<?php

$foo = array (
  'foo',
  'bar',
  6,
  21.00002351,
);
echo json_encode($foo); // ["foo","bar",6,21.00002351] 
```

当然，这绝不是自动的，也就是说，这根本不会触发任何`toString()`方法：

```
echo $foo; // "Array" + PHP Notice:  Array to string conversion 
```

# ruby-on-rails-3 - ActiveRecord::AssociationTypeMismatch ruby 1.8 不使用 spork

> ID：14875278
> 
> 赞同：1
> 
> 时间：2013-02-14T12:52:06.540
> 
> 标签：ruby-on-rails-3, factory-bot, rails-activerecord, ruby-1.8

我有模型规格、控制器规格和请求规格。当我运行时：

```
 rspec spec 
```

首先运行模型规范，然后请求，然后在运行控制器规范时，第一个控制器的规范正常，但下一个失败。但是当我只运行控制器规范时，它们都通过了。我使用的是 rails 3.0.9、ruby 1.8、factory_girl 2.2.0。我有

```
 config.cache_classes = true 
```

在 test.rb 中，我无法更改 ruby​​ 或 factory_girl 的版本。有人能帮我吗？

**更新**：

这是错误：

```
 96) UsersController reset_password: as non-master_admin: does not reset a user's password
 Failure/Error: let!(:user) { Factory(:admin_user) }
 ActiveRecord::AssociationTypeMismatch:
   AdminUser(#-630697398) expected, got MerchantUser(#-629918188)
 # ./app/models/activity.rb:33:in `log'
 # ./config/initializers/add_activity_logging.rb:8:in `_callback_after_759'
 # ./spec/controllers/users_controller_spec.rb:8 
```

在规范/控制器/users_controller_spec.rb:8 中：

```
let!(:user) { Factory(:admin_user) } 
```

在活动.rb:33 中：

```
 create(:user => user, :title => title, :changeable_id => changeable.id,
      :changeable_type => changeable.class.to_s, :data => attributes) 
```

还有：

```
 belongs_to :user, :class_name => 'AdminUser' 
```

在 AdminUser 类中没有 has_many 活动，但是当我尝试添加它时，我猜我无法正确添加它。谢谢您的帮助

**更新**：AdminUser 和 MerchantUser 是 User 的后代

**POSIBLE FIX** 给出错误的行实际上是：

```
 admin_user = Factory(:tech_admin) 
```

我将其替换为：

```
 admin_user = FactoryGirl.build_stubbed(:tech_admin) 
```

这样文件activity.rb就没有到达

**最终修复** 显然问题出在工厂（：经销商）上。我用 FactoryGirl.create(:reseller) 替换了它，一切正常。虽然现在我想知道并搜索这两种用途之间的区别是什么

# jquery - 使用 jQuery 动态显示内容

> ID：14875293
> 
> 赞同：0
> 
> 时间：2013-02-14T12:52:56.783
> 
> 标签：jquery, css, html

我有一个有序的链接列表，我想在单击时在其下方显示其内容，然后在单击其他链接时折叠。这是我到目前为止所做的。显示有异常。[jsfiddle](http://jsfiddle.net/CCa7K/)

```
<html>
<head>
<title>Jquery Change content of Div</title>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script> 
<script type="text/javascript" language="javascript"> 

jQuery(document).ready(function(){
        var $j = jQuery;    

$j('.biocontent div:not(:first-child)').hide();
$j('.services li a').click(function(){
    var showclass = $j(this).attr('class');
    $j('.biocontent div').fadeOut('fast',function(){
        $j('.biocontent div.' + showclass).show();
        });
});
});
</script>
</head>
<body>
<ul class="services">
<li><a class="div1" href="#"><h2>Div 1</h2></a></li>
<div class="biocontent ">
<div class="div1">
<p>Content1</p>
</div>
</div>

<li><a class="div2" href="#"><h2>Div 2</h2></a></li>
<div class="biocontent ">
<div class="div2">
<p>Content 2</p>
</div>
</div>

<li><a class="div3" href="#"><h2>Div 3</h2></a></li>
<div class="biocontent ">
<div class="div3">
<p>Content 3</p>
</div>
</div>

<li><a class="div4" href="#"><h2>Div 4</h2></a></li>
<div class="biocontent ">
<div class="div4">
<p>Content 4</p>
</div>
</div>

 <li><a class="div5" href="#"><h2>Div 5</h2></a></li>
<div class="biocontent>
<div class="div5">
Content 5
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:14:11.500

这是解决方案：

```
<html>
<head>
<title>Jquery Change content of Div</title>
<style>
.servicescontent div{
    display:none;
}
</style>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script> 
<script type="text/javascript" language="javascript"> 
jQuery(document).ready(function(){
        var $j = jQuery;    

//services page
$j('.services li a').click(function(){
    var  showid= $j(this).attr('class');
    $j('.servicescontent div').hide();
   $('#'+showid).toggle('fast');
});
});
</script>
</head>
<body>
<ul class="services">
<li><a class="div1" href="#"><h2>Div 1</h2></a></li>
<div class="servicescontent">
<div id="div1" class="cont">
<p>Content1</p>
</div>
</div>

<li><a class="div2" href="#"><h2>Div 2</h2></a></li>
<div class="servicescontent">
<div id="div2"  class="cont">
<p>Content 2</p>
</div>
</div>

<li><a class="div3" href="#"><h2>Div 3</h2></a></li>
<div class="servicescontent">
<div id="div3"  class="cont">
<p>Content 3</p>
</div>
</div>

<li><a class="div4" href="#"><h2>Div 4</h2></a></li>
<div class="servicescontent">
<div id="div4"  class="cont">
<p>Content 4</p>
</div>
</div>

 <li><a class="div5" href="#"><h2>Div 5</h2></a></li>
<div class="servicescontent">
<div id="div5"  class="cont">
Content 5
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:05:42.463

你的 HTML 搞砸了，所以我删除了一个额外的 div.servicescontent 并重写了切换内容的功能 - [http://jsfiddle.net/CCa7K/2/](http://jsfiddle.net/CCa7K/2/)

```
$('a').click(function() {
    $(this).parent().next('.servicescontent').toggle();
}); 
```

# android - 网页视图中的 HTML 实体

> ID：14875295
> 
> 赞同：1
> 
> 时间：2013-02-14T12:52:57.873
> 
> 标签：android, html, character-encoding, android-webview

我有一个包含以下内容的字符串变量：

```
<p>
    <strong>N&amp;aacute;plň pr&amp;aacute;ce</strong></p>
<ul>
    <li>
        Komunikace se z&amp;aacute;kazn&amp;iacute;ky (email, telefon) &amp;ndash; ře&amp;scaron;en&amp;iacute; dotazů, &amp;uacute;prav v objedn&amp;aacute;vk&amp;aacute;ch</li>
    <li>
        Spr&amp;aacute;va soci&amp;aacute;ln&amp;iacute;ch s&amp;iacute;t&amp;iacute; &amp;ndash; Facebook</li>
    <li>
        Pr&amp;aacute;ce s software &amp;ndash; Zendesk, Basecamp, intern&amp;iacute; software pro spr&amp;aacute;vu objedn&amp;aacute;vek</li>
    <li>
        Komunikace s dal&amp;scaron;&amp;iacute;mi členy t&amp;yacute;mu (logistika, marketing)</li>
    <li>
        Koordinace a za&amp;scaron;kolov&amp;aacute;n&amp;iacute; dal&amp;scaron;ich kolegyň ze z&amp;aacute;kaznick&amp;eacute;ho servisu</li>
    <li>
        Administrativn&amp;iacute; činnost podle aktu&amp;aacute;ln&amp;iacute; potřeby.</li>
</ul> 
```

我尝试像这样在 WebView 中加载此内容：

```
mWebView.loadDataWithBaseURL("", content, "text/html", "UTF-8", ""); 
```

但这没有用。WebView 没有将该 html 实体转换为普通字符。我也尝试加载内容

```
mWebView.loadData(); 
```

但结果是一样的。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:19:15.190

因此，经过长时间的研究，我发现 Apache 库可以转义/取消转义 html 实体。您可以从 下载它`http://commons.apache.org/lang/download_lang.cgi`。

然后按如下方式使用它：

```
String unescaped = StringEscapeUtils.unescapeHtml4(escaped); 
```

# java - 将不同的类作为参数传递给函数 Java

> ID：14875296
> 
> 赞同：0
> 
> 时间：2013-02-14T12:53:01.390
> 
> 标签：java, class, parameter-passing

我有几个类都有*DoSomething()*方法。以及一个需要 Class 作为参数的单独函数：

```
public void DoStuff(Class c) {
     c.DoSomething();
} 
```

但是此代码会引发错误： **DoSomething() 未为 Class 类型定义。**我也尝试像这样实例化类：

```
public void DoStuff(Class c) {

Object o;

try {
   o = c.newInstance();
} catch (InstantiationException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} catch (IllegalAccessException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
}
} 
```

然后调用 DoSomething() 方法，但我得到了同样的错误。

将类作为参数传递的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:00:13.113

创建一个`interface`声明您的方法的方法`doSomething`，如下所示：

```
 public interface Something {
      void doSomething();   
   } 
```

然后让你的类实现这个接口，比如：

```
public class SomeClass implements Something {
    public void doSomething() {
        // do what?
    }
} 
```

然后你可以做

```
public void DoStuff(Something pInstance) {
   pInstance.doSomething();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:55:55.883

您的第一个代码示例不正确，因为**它**的`c`类型`Class`没有**`DoStuff()`**

 **您的第二个代码更合适，只需要将`cast`您的对象转换为具有`DoStuff()`方法的类型（例如`interface`，您的所有类都实现）

`DoSomething()`或者，您可以只使用反射调用该方法

例如，

```
Method method = c.getMethod("DoSomething");
Object obj = c.newInstance();
method.invoke(obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:02:11.600

我认为您将 type`Class`与 type混淆了`Object`。该类`Object`直接或间接地是您将在 Java 中创建的所有类的超类（至少在当前可用的 Java 版本中）。因为每个对象都扩展了类`Object`，所以您可以将每个对象传递给需要类型参数的方法`Object`。类型`Class`是完全不同的东西。该类型的对象`Class`（我几乎把自己弄糊涂了）是通过类文字（`myInstance.class`）或反射获得的。我怀疑您将一个类的实例传递给`DoStuff()`，因此编译器抱怨它不是该类型的对象`Class`。更改`Class`为`Object`你会没事的，除了你必须将该对象转换为实现的类`DoSomething`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:55:31.150

您可以创建一个具有方法的接口，`doSomething()`并使所有类都实现此接口。然后，您可以调用`doSomething()`所有课程。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-14T13:00:23.563

我认为你真正的意思是你将一个 Object 的*实例*传递给你的`doStuff()`方法，然后这个 Object 有一个`doSomething()`你应该能够调用的方法。除非您有继承层次结构，否则您需要使您的方法采用类型参数`Object`并强制转换为您的特定`Object`.

```
public void doStuff(Object o) {
  if(o instanceof Class1) {
     Class1 c1 = (Class1)o;
     c1.doSomething();
  } 
  else if(o instanceof Class2) {
     Class2 c2 = (Class2)o;
     c2.doSomething();
  }
  else {
     ....
  }
} 
```**

# perl - 如何在 Perl 中检查 Internet 连接的存在？

> ID：14875298
> 
> 赞同：7
> 
> 时间：2013-02-14T12:53:02.903
> 
> 标签：perl, networking, connection

我有一个简单的脚本，可以定期（每隔几秒一次）验证该服务器是否有互联网连接。需要明确的是，它不会检查外部站点/服务/服务器是否处于活动状态。作为可靠的互联网目的地，我使用谷歌、雅虎等网站的 IP。通常我使用 3 个目的地（LAN、ISP 网络、ISP 外部）

我当前负责这个的代码只是一个简单而肮脏的调用`ping`：

```
 my $pingResponse = `ping -c 1 -w 1 123.123.123.123`;
    my $isConnected = parsePingResponse($pingResponse); 
```

它似乎有效，但我确信这不是完成这项任务的正确/最佳方式。至少有3个缺点：外部系统调用，速度慢，*截止*时间比较长，1秒。

所以，我的问题是：如何以失败的方式简单有效地实现*ping**功能*，以验证互联网连接是否有效？

 *（我认为LWP是一种矫枉过正。站点或页面是否可用并不重要，只要可以访问一些外部IP即可。可能应该是涉及低级网络的简单事情）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T12:55:56.467

这样做的失败方法是[Net::Ping](http://perldoc.perl.org/Net/Ping.html)。

```
my $p = Net::Ping->new;
if ($p->ping("123.123.123.123", 1)) {
    print "Host is reachable\n";
} 
```

如果您希望命令运行得更快，超时可能是一个浮点数（例如 0.5）。您需要选择适合您需要的超时时间；较高的超时时间更可能对 Internet 连接正确，但需要更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T08:39:02.923

上面rjh给出的例子在很多情况下都不起作用，因为他没有正确初始化构造函数。下面的这个例子可能会有所帮助：

```
use Net::Ping;

my $p = Net::Ping->new("icmp");
while(1){
printf "Checking for internet\n";
    if ($p->ping("www.google.com")){
    printf "Internet connection is active!\n";
        sleep 1;
    last; #break out of while loop if connection found
    }
    else{
    printf "Internet connection not active! Sleeping..\n";
        sleep 60*60;
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T19:58:59.487

上面 ping 到 google 的答案（从 2013 年开始）的优点是它不依赖数字来检查互联网连接，因此可以说它更通用。但是，在 2019 年的典型环境中，它只有在修改某些部分以在连接未启动时捕获名称解析错误时才能工作。这是在 perl 中执行此操作的一种方法。在 Debian 上下文中，它可以从终端使用 'sudo perl program.pl' 启动：

```
use warnings;
use strict;
use Net::Ping;
my $p = Net::Ping->new("icmp");
my $netstatus = 1;
eval { $p->ping("www.wikipedia.org"); 1; }
or do { $netstatus = 0; };
if ($netstatus == 1 )
  { printf "Internet connection is active!\n"; }
else
  { printf "Internet connection not active.\n"; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-06T21:06:38.037

我刚才给出的答案是 ping 维基百科，需要启动 root 权限（例如，“sudo”）。为了避免授予程序 root 权限，可以通过命令行 ping 并读取其输出，或者安装实验性 perl 扩展 libnet_ping_external，例如 [https://launchpad.net/ubuntu/zesty/amd64/libnet-ping -external-perl/0.13-1](https://launchpad.net/ubuntu/zesty/amd64/libnet-ping-external-perl/0.13-1) （该页面上的 .deb 已保存，在您验证其真实性后，您可以打开它进行安装，例如通过文件管理器。）归功于[https://forums.gentoo.org/viewtopic- p-2920594.html](https://forums.gentoo.org/viewtopic-p-2920594.html)用于此方法。这是一个使用此模块在没有 root 权限的情况下在 perl 中 ping 的示例（虽然速度较慢）。

```
use warnings;
use strict;
use Net::Ping::External qw(ping);
my $connected = ping(host => "www.google.com");
if ($connected)
  { printf "Internet connection is active!\n"; }
else
  { printf "Internet connection not active.\n"; } 
```*

# ant - 在 javac ant 中为 fork 设置默认值

> ID：14875299
> 
> 赞同：1
> 
> 时间：2013-02-14T12:53:03.800
> 
> 标签：ant, task, javac

我需要在整个构建过程中使用 fork=true。我正在考虑全局设置它并在我的构建机器上使用它。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:35:09.360

Ant 的`<presetdef>`声明基于现有任务的新任务。

以下片段定义了一个具有属性集的`<javac>`任务：`fork`

```
<presetdef name="my-javac">
   <javac fork="yes"/>
</presetdef> 
```

`<my-javac>`可以使用任何`<javac>`属性调用：

```
<my-javac srcdir="${my.src}" deprecation="no"/> 
```

一个警告：`fork`在调用中指定属性`<my-javac>`将覆盖在`fork`中指定的属性`<presetdef>`：

```
<!-- Overrides my-javac's default fork attribute -->
<my-javac srcdir="${my.src}" deprecation="no" fork="no"/> 
```

`<presetdef>`仅对设置默认值有用，对强制要求无效。

*   [PreSetDef 文档](https://ant.apache.org/manual/Tasks/presetdef.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:55:45.367

不，没有这样的全局开关。

如果您`javac`的构建文件中有很多，请考虑：

解决方案1：

```
<property name="fork" value="yes" /> 
```

然后，在你打电话的任何地方`javac`，

```
<javac ... fork="${fork}" ....> 
```

解决方案2：

Netbeans项目自动生成的ant构建文件使用这个：`javac`使用a包裹`macrodef`，然后`macrodef`在构建文件中使用这个。

`build-impl.xml`您可以在`nbproject`文件夹中检查任何 Netbeans 项目。

# php - 使用 htaccess 将 url ?page=2 重写为 /page/2？

> ID：14875302
> 
> 赞同：0
> 
> 时间：2013-02-14T12:53:10.190
> 
> 标签：php, .htaccess, url-rewriting

我怎样才能重写我的网址，**只**为目录`photos`？

`http://www.abc.com/photos/index.php?page=2`至`http://www.abc.com/photos/page/2`

**我的 .htaccess**

```
# Turn mod_rewrite on
RewriteEngine on
RewriteBase /
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:57:04.633

```
RewriteRule ^photos/page/([0-9]+) index.php?page=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:46:53.650

你没有提到哪些字符串是动态的，所以我假设这个答案是可变的`page`。`2`

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !index\.php                 [NC]
RewriteCond %{REQUEST_URI} ^/photos/([^/]+)/([^/]+)/?  [NC]
RewriteRule .*      photos/index.php?%1=%2          [L,QSA] 
```

内部映射

`http://www.abc.com/photos/key/val` 带或不带斜杠

至：

`http://www.abc.com/photos/index.php?key=val`

字符串`key`和`val`假定是可变的，而`photos`假定是固定的。

对于永久且可见的重定向，请替换`[L,QSA]`为 `[R=301,L,QSA]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:56:46.527

```
RewriteRule ^photos/index.php?page=([0-9]*)$ /photos/page/$1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:06:44.200

```
RewriteEngine On
RewriteRule ^photos/page/([a-zA-Z0-9-/]+)$ photos/index.php?page=$1 [QSA]
RewriteRule ^photos/page/([a-zA-Z0-9-/]+)/$ photos/index.php?page=$1 [QSA] 
```

# c# - 使用分层数据模板和树视图进行数据绑定

> ID：14875308
> 
> 赞同：0
> 
> 时间：2013-02-14T12:53:26.150
> 
> 标签：c#, wpf, data-binding, treeview

我正在使用 Microsoft Access 和 WPF 开发 ERP 类型系统。我对如何将信息绑定到某些文本框和树视图选择有一些疑问。所以，在我问这个问题之前，让我提供一下我已经做过的事情的背景。

我的数据库中有以下表格：

```
Table: tbl_Vendors
Column: ID - Autonumber
Column: Name - string(75)

Table: tbl_Departments
Column: ID - Autonumber
Column: Name - string(100)

Table: tbl_Products
Column: ID - Autonumber
Column: Department - Number (linked to tbl_Departments.ID)
Column: Description - string(255)
Column: UPC - string(12)
Column: Price - currency

Table: tbl_Product_Vendor_Cost
Column: VendorID - number (linked to tbl_Vendors.ID)
Column: ProductID - number (linked to tbl_Products.ID)
Column: Cost - Currency 
```

在我的 XAML 窗口上，我有一个 Treeview，我使用 Hierarchal Data Template 来处理数据，它显示按部门排序的产品。以下是我使用的资源：

```
 <Window.Resources>
        <!-- The data template for the products-->
        <DataTemplate x:Key="productTemplate">
            <TextBlock Text="{Binding Name}"/>
        </DataTemplate>

        <!-- The data template for the departments-->
        <HierarchicalDataTemplate x:Key="treeViewTemplate" ItemsSource="{Binding Department2Product}" ItemTemplate="{StaticResource productTemplate}">
            <TextBlock Text="{Binding Name}"/>
        </HierarchicalDataTemplate>
    </Window.Resources> 
```

在窗口的 XAML 文件中，我有这样的树视图调用：

```
<TreeView Name="lstProducts" ItemsSource="{Binding tbl_Departments}" ItemTemplate="{StaticResource treeViewTemplate}" AlternationCount="2" SelectedValuePath="ID"/> 
```

在窗口的 .cs 文件中，我定义了以下方法：

```
Public void UpdateUI() {
    DataSet outResult;
    If (ProductsDatabase.TryToGetProductsDataset(out outResult)) {
        this.tvwProducts.DataContext = outResult;
    }
} 
```

每当对产品进行更改或运行 InitializeComponent 方法时，都会调用 UpdateUI 方法。所以，现在这一切都显示出来了，这是我的实际问题。我在窗口上有一些文本框，当我选择一个产品时，我希望文本框填充来自所选产品的数据。我要么想忽略任何选择的部门，要么完全阻止部门的实际选择，无论哪种方式都有效。我将尝试其他一些事情，并焦急地等待这里的任何答案。

感谢您的时间，我很感激可以给出的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:56:15.147

所以，我走了一个不同的方向。

树视图获取它自己的数据集作为它的数据上下文。然后我使用相同的数据模板和分层数据模板来显示信息。然后，在后面的代码中，我只是确保在调用 TreeView 的 SelectedValueChanged 事件时，我检查所选 DataRowView 的 DataRow 是否来自正确的表。如果是，那么我从数据库中提取产品信息，并在运行时将其放入控件的数据上下文中。

# android - 找不到让 ellipsize=“marquee” 始终使用 Fragments 滚动的方法？

> ID：14875313
> 
> 赞同：0
> 
> 时间：2013-02-14T12:53:31.763
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, marquee

我很难让我`TextView`的 to always `ellipsize="marquee"`。我正在使用`SherlockActionBar`标签和片段。以下是源代码：

**TabbedDataViewer.java**（这段代码取自ABS自带的例子）

```
public class TabbedDataViewer extends SherlockFragmentActivity{

    private TabHost mTabHost;
    private ViewPager mViewPager;
    private TabsAdapter mTabsAdapter;    

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tabbed_data_viewer_main);

        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mViewPager = (ViewPager) findViewById(R.id.pager);

        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

        mTabsAdapter.addTab(
                mTabHost.newTabSpec(Constants.TAB1_ID).setIndicator(
                        getString(R.string.personal_data)), PersonalDataTab.class, null);

        if(savedInstanceState != null){
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    public static class TabsAdapter extends FragmentPagerAdapter implements
            TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener{
        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo{
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(String _tag, Class<?> _class, Bundle _args){
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory{
            private final Context mContext;

            public DummyTabFactory(Context context){
                mContext = context;
            }

            @Override
            public View createTabContent(String tag){
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager){
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args){
            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);
            notifyDataSetChanged();
        }

        @Override
        public int getCount(){
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position){
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public void onTabChanged(String tabId){
            int position = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(position);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels){
        }

        @Override
        public void onPageSelected(int position){
            // Unfortunately when TabHost changes the current tab, it kindly
            // also takes care of putting focus on it when not in touch mode.
            // The jerk.
            // This hack tries to prevent this from pulling focus out of our
            // ViewPager.
            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        @Override
        public void onPageScrollStateChanged(int state){
        }
    }            
} 
```

**个人数据表.java**

```
public class PersonalDataTab extends SherlockFragment{

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View v = inflater.inflate(R.layout.activity_personal_data_tab, container, false);

        TextView tvFirstName = (TextView) v.findViewById(R.id.tv_first_name);
        tvFirstName.setText(TabbedDataViewer.sDataMap.get(Constants.TAG_FIRST_NAME));

        return v;
    }
} 
```

**activity_tabbed_data_viewer_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:orientation="horizontal" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>    
</TabHost> 
```

**activity_personal_data_tab.xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/first_name_c_s"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tv_first_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="marquee"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>    
</ScrollView> 
```

我已经尝试了这里描述的所有东西[有没有办法让 ellipsize="marquee" 总是滚动？](https://stackoverflow.com/questions/1827751/is-there-a-way-to-make-ellipsize-marquee-always-scroll)- 当我只使用`tabHost`（否`SherlockActionBar`或`Fragment`）时，这些解决方案对我有用。

顺便说一句，刚刚注意到在**PlayMarket 应用**程序中，太长而无法在屏幕上显示的应用程序名称根本不会滚动。

如果有人能给我一个关于如何`TextView`从课堂更新的提示，我将不胜感激，**`PersonalDataTab.java`**因为现在我只能从主课堂更新它，即`TabbedDataViewer`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:12:54.167

试试这个：

```
tvFirstName.setSelected(true); 
```

编辑：

在您的 TextView XML 上添加此参数：

```
 android:focusable="true"
            android:focusableInTouchMode="true"
            android:freezesText="true"
            android:gravity="left"
            android:marqueeRepeatLimit="marquee_forever"
            android:maxLines="1"
            android:scrollHorizontally="true"
            android:singleLine="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:01:09.577

通过将权重设置为 textViews 解决了滚动问题：

```
<TableRow
    android:id="@+id/tableRow5"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.3"
        android:text="@string/address_c"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tv_address"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:ellipsize="marquee"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</TableRow> 
```

...以及活动中的一行：`tvFirstName.setSelected(true);`

# php - 使用哈希处理数据

> ID：14875319
> 
> 赞同：0
> 
> 时间：2013-02-14T12:54:02.533
> 
> 标签：php, javascript

我一直在使用 jQuery 创建一个图像查看器，并且我设法通过使用 ajax 调用我的 PHP 代码来获取图像的新 id 来动态显示图像。当用户单击按钮时，图像会显示其相关信息，但是如果他们向后导航，则只会更改图像，因为其他信息不会保存在散列中。

我尝试使用 ajax post 调用来获取散列 id 的信息，但是当我这样做时，它会像外观一样循环图像，这不是我想要的。我的代码如下：

**HTML**

```
<img id="design" alt="" width="300" height="300"  /><br>
<span id="lblName" name="lblName"></span><br>
<input type="button" id="GetImage" value="Get Image" /> 
```

**jQuery**

```
$(document).ready(function(){

if (document.location.hash) {
     updateImage();
}

$("#GetImage").click(function() {

     $.ajax({ //Make the Ajax Request
         type: "POST",
         url: "testimagelook.php", //file name
         success: function(server_response){
            $.getJSON("testimagelook.php", function(data) {             
            var id = data.id;
            document.location.hash = id;
            $("#lblName").html(data.name);
            $("#lblRating").html(data.average + " (" + data.votes + ") (<a href='User.php?uid=" + data.userid + "'>" + data.username + "</a>)");

            });
         }
     });
});

$(window).bind('hashchange',function(){
       updateImage();
});

function updateImage() {
     var id = document.location.hash.substring(1); // remove #
     $('#design').attr('src','img/boxes/'+id+'.png');
}
}); 
```

PHP 文件以 JSON 格式从数据库中返回一个随机行。

**编辑**

以下函数 (updateImage()) 已更改但无法正常工作：

```
function updateImage() {
     var id = document.location.hash.substring(1); // remove #

     if(known_images[id]==null){
        $.ajax({ //Make the Ajax Request
             type: "POST",
             url: "testimagelook.php", //file name
             data: {boxid: id},
             success: function(server_response){
                $.getJSON("testimagelook.php", function(data) {             
                var id = data.id;

                known_images[id] = [];
                known_images[id] ['name'] = data.name;
                known_images[id] ['average'] = data.average;
                known_images[id] ['votes'] = data.votes;
                known_images[id] ['username'] = data.username;
                known_images[id] ['userid'] = data.userid;

                });
             }
         });
     }

     $('#design').attr('src','img/boxes/'+id+'.png');
     $("#lblName").html(known_images[id]['name']);
     $('#lblRating').html(known_images[id] ['average'] + " (" + known_images[id] ['votes'] + ") (<a href='User.php?uid=" + known_images[id] ['userid'] + "'>" + known_images[id] ['username'] + "</a>)");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:07:44.497

最简单的方法是添加

```
var known_images = []; 
```

到您的 javascript 和您添加的每个 ajax 请求：

```
// to be added at success: // at the end of your code!
known_images[id]= [];
known_images[id] ['lbl'] = data.name;
known_images[id] ['rating'] = data.average + " (" + data.votes + ") (<a href='User.php?uid=" + data.userid + "'>" + data.username + "</a>)";
// now all the information is chached in the browser 
```

现在在你的 updateImage 函数中你可以添加

```
$("#lblName").html(known_images[id]['lbl']);
$("#lblRating").html(known_images[id]['rating'); 
```

也从已知图像数组中更新这些信息

# [编辑]

减少存储在 known_images 中的数据量，您可以轻松使用

```
known_images.shift(); 
```

要从该数组中删除第一项，那么您是否想将数组限制为最大长度为 100 个条目，您可以添加以下内容：

```
if(known_images.length >100)
    known_images.shift(); 
```

在您的“成功：”中向所述数组添加新 ID 后立即 - 您的 ajax 调用的一部分

# [编辑二]

你仍然得到你的ajax请求错误，你用内部getJSON调用覆盖你的ajax请求

作为示例，这是您的 updateImage 函数，没有第二个请求：

```
function updateImage() {
    var id = document.location.hash.substring(1); // remove #

    if(known_images[id]==null){
        $.ajax({ //Make the Ajax Request
            type: "POST",
            url: "testimagelook.php", //file name
            data: {boxid: id},
            success: function(server_response)
            {
                // Now just parse server_response into data without requesting NEW data like you did in your code!
                var data = $.parseJSON(server_response);
                var id = data.id;

                known_images[id] = [];
                known_images[id] ['name'] = data.name;
                known_images[id] ['average'] = data.average;
                known_images[id] ['votes'] = data.votes;
                known_images[id] ['username'] = data.username;
                known_images[id] ['userid'] = data.userid;
                // mind the parentheses here
            }
        });
    }
    $('#design').attr('src','img/boxes/'+id+'.png');
    $("#lblName").html(known_images[id]['name']);
    $('#lblRating').html(known_images[id] ['average'] + " (" + known_images[id] ['votes'] + ") (<a href='User.php?uid=" + known_images[id] ['userid'] + "'>" + known_images[id] ['username'] + "</a>)");
} 
```

# c# - 为什么我的表单在显示时会调整大小？

> ID：14875325
> 
> 赞同：9
> 
> 时间：2013-02-14T12:54:36.897
> 
> 标签：c#, .net, winforms, windows-forms-designer

我有一个显示为模式对话框的表单。表单在设计器中如下所示：

![就像在 Visual Studio 中的设计视图中一样](../Images/5c95560b78766ce8f3081ddeda6bebb1.png) （宽度 = 360，高度 = 215）

当它显示在应用程序中时，它会比定义的高和宽 10 像素，在底部和左侧边缘留下很大的边距：

![与正在运行的应用程序一样](../Images/84fb9e61b71e3edb0af3743874b37288.png) （宽度 = 370，高度 = 225）

该表单的尺寸明确设置为 360x215 像素，边框样式为`FixedDialog`，继承自`System.Windows.Forms.Form`，并且其中没有用于操作尺寸的代码（自动生成的设计器文件除外）。如果我将边框样式更改为`FixedSingle`或`FixedToolWindow`显示正确的大小（但我希望它的样式为`FixedDialog`）。

知道是什么原因造成的吗？

* * *

我已通过删除`MinimumSize`表单上的设置来解决此问题。看来，如果将其设置为与`Size`属性相同的大小（或接近，但我还没有完全找到阈值），则会引入边距。由于表单不可调整大小，因此我不需要该`MinimumSize`设置，因此可以将其删除。

我仍然不明白***为什么***会这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-30T20:31:51.910

首先，您的表单似乎已`AutoScaleMode`设置为`Font`. 这会导致表单根据使用的字体调整大小。

其次，确保在创建主窗体之前有以下几行：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);  // Not using this - or using true - will cause a different font rendering
...
Application.Run(new Form1());                          // this creates your main form 
```

（通常这是静态`Main`方法的一部分`Program.cs`）

不使用这些行会导致使用不同的字体渲染（看看你的截图 - 字母看起来并不完全相同！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T13:21:58.547

我创建了一个表单，更改了字体并将其设置`FormBorderStyle`为`FixedDialog`，但我没有遇到任何问题。只需检查一下您在表单加载时到底设置了什么。

```
// this needs to be set as joe said is correct.
Application.SetCompatibleTextRenderingDefault(false); 
```

如果您可以提供您在 formLoad 方法上编写的代码。这样我就可以尝试纠正问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T07:20:39.533

我的表格也有类似的问题。最后我发现问题出在属性中表单的最大和最小大小。如果你想要一个固定的、不可调整大小的表单，你必须禁用它们。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T07:27:12.637

你为什么不暴力破解代码的问题：

```
protected override void SetClientSizeCore(int x, int y)
{
    base.SetClientSizeCore(360, 215);
} 
```

设置客户区。您需要计算您想要的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-03T12:33:10.183

通过进入表单“Form1.Designer.cs”，我取得了一些成功。然后我确保以下代码的最后一个单词是“Normal”：

```
 this.WindowState = System.Windows.Forms.FormWindowState.Normal; 
```

# c++ - 我的数组中突然出现了额外的索引值

> ID：14875327
> 
> 赞同：1
> 
> 时间：2013-02-14T12:54:48.283
> 
> 标签：c++, arrays

我的代码是：

```
char randomChar(int randMax) {
    return (65 + rand() % randMax);
}

int main() {

    srand(time(NULL));
    const int SIZE = 4;
    const int LETTERS = 6;
    char code[SIZE];

    for (int i = 0; i < SIZE; i++) {
        code[i] = randomChar(LETTERS);
    }

    cout << code;

    return 0;
} 
```

问题是即使我将代码数组的长度设置为 4，该`randomChar`函数也会返回 4 个字母 + 一些额外的随机符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:57:54.577

您应该在数组中放置一个终止零字符。否则，您可能会在数组结束后打印出垃圾信息。始终声明数组的大小比您需要的多 1，然后将最后一个元素设置为 0。

试试这个代码：

```
char randomChar(int randMax) {
    return (65 + rand() % randMax);
}

int main() {

    srand(time(NULL));
    const int SIZE = 4;
    const int LETTERS = 6;
    char code[SIZE + 1];

    for (int i = 0; i < SIZE; i++) {
        code[i] = randomChar(LETTERS);
    }

    code[SIZE] = 0; // or '\0'
    cout << code;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:11:17.973

正如其他人指出的那样，您不会以空值终止您的 char 数组。`std::string`如果您使用正确的 C++ 方式，即使用which 基本上是 char 数组的包装类，您可以忘记这类问题。以下是如何在 C++ 中实现相同的逻辑：

```
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <string>

char randomChar(const int randMax) // suggestion, not a necessity: mark randMax as const since you never intend to modify it here.
{
    return ( 65 + std::rand() % randMax );
}

int main()
{
   std::srand(std::time(NULL));
   const int SIZE = 4;
   const int LETTERS = 6;
   std::string code;
   for (int i = 0; i < SIZE; i++)
   {
       code.insert(code.end(), randomChar(LETTERS));
   }
   std::cout << code << std::endl;
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:12:34.383

在 C 中，字符串以零结尾，这是因为字符串的长度与它无关，因此需要某种方法来确定字符串的结束位置。C 和 C++ 通过在字符串末尾放置一个零字符来做到这一点。当您执行诸如`char* text = "simples";`编译器之类的操作时，编译器会为您执行此操作，但是当您生成自己的字符串时，您需要在您感兴趣的字符之后再留出一个字符并将该字符设置为`\0`.

最后得到虚假字符的原因`cout`是尽职尽责地打印出以数组开头的字符，直到它碰巧碰到一个零字节，它将解释为字符串的结尾。

因此你想`main()`用这个替换你的函数：

```
int main() {

    srand(time(NULL));
    const int SIZE = 4;
    const int LETTERS = 6;
    char code[SIZE + 1];

    for (int i = 0; i < SIZE; i++) {
        code[i] = randomChar(LETTERS);
    }

    // Need to zero-terminate the string
    code[SIZE] = '\0';
    cout << code;

    return 0;
} 
```

（你也可以这样做`code[SIZE] = 0`，但我更喜欢的表现力`\0`——两者都会产生完全相同的效果）

零终止也是 C 和 C++ 中字符串处理速度慢的主要原因之一：几乎每个字符串操作都需要从头到尾扫描字符串以找到空终止符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:58:58.387

您的字符串不是以零结尾的。

你可能必须这样做：

```
char randomChar(int randMax) {
    return (65 + rand() % randMax);
}

int main() {

srand(time(NULL));
const int SIZE = 4;
const int LETTERS = 6;
char code[SIZE + 1];

for (int i = 0; i < SIZE; i++) {
    code[i] = randomChar(LETTERS);
}

code[SIZE] = '\0';
cout << code;

return 0;
} 
```

或者，根据评论者@borisbn 的建议：

```
char randomChar(int randMax) {
    return (65 + rand() % randMax);
}

int main() {

srand(time(NULL));
const int SIZE = 4;
const int LETTERS = 6;
char code[SIZE + 1] = {0};

for (int i = 0; i < SIZE; i++) {
    code[i] = randomChar(LETTERS);
}

cout << code;

return 0;
} 
```

但是，如果存在 ('\0' != 0) 为真的任何宇宙，则后者将在那里失败。

# linux - 使用 Qt 将 linux 子窗口保持在父窗口之上

> ID：14875334
> 
> 赞同：2
> 
> 时间：2013-02-14T12:55:10.930
> 
> 标签：linux, qt

我正在使用 qt 编写一个 linux（这里：Ubuntu）应用程序。我将主窗口设置在顶部并全屏，然后制作其他子窗口。问题是一旦单击主窗口，这些窗口就会在主窗口后面。有什么办法可以避免这种情况并将子窗口保持在主窗口的顶部？预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T18:44:22.337

我试图用一个非常简单的设置来重现你的问题，但我失败了，因为我写的似乎完全符合你所描述的行为：全屏打开窗口，然后在我的示例中只有一个按钮主窗口，单击它时会生成一个子窗口，但对我来说，即使将焦点放在父窗口上，这个窗口也始终位于父窗口之上。你能检查一下这是否也有你想要的行为吗？

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "ui_MainWindow.h"

class MainWindow : public QMainWindow, public Ui::MainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);

private:
    Ui::MainWindow *ui;
    public slots:
    void on_pushButton_clicked();
};

#endif // MAINWINDOW_H 
```

**主窗口.cpp**

```
#include "MainWindow.h"

#include <QDialog>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    setupUi(this);
}

void MainWindow::on_pushButton_clicked()
{
  QDialog *dialog = new QDialog(this);
  dialog->show();
} 
```

**主文件**

```
#include "MainWindow.h"
#include <QApplication>

int main(int argc, char **argv)
{
    QApplication a(argc, argv);
    MainWindow w;
    w.showFullScreen();

    return a.exec();
} 
```

# c# - 如何使用javascript访问网格中单击的按钮行中的数据（由jquery动态绑定）？

> ID：14875339
> 
> 赞同：1
> 
> 时间：2013-02-14T12:55:28.243
> 
> 标签：c#, jquery, asp.net, ajax

```
function updateGrid(data) { // appending the retrieved data(user details) to the grid
        var i = 0;
        var content;
        $("#GridView1").html('');
        $("#GridView1").append("<tr><th>" + "Name" + "</th><th>" + "Gender" + "</th><th>" + "Date of Birth" + "</th><th>" + "Role" + "</th><th>" + "Password" + "</th><th>" + "Email" + "</th><th>" + "Edit" + "</th></tr>");
        while (data[i] != null)
        {
            $("#GridView1").append("<tr><td>" + data[i].name + "</td><td>" + data[i].gender + "</td><td>" + data[i].dob + "</td><td>" + data[i].role + "</td><td>" + data[i].password + "</td><td>" + data[i].email + "</td><td>" + "<button id=btnEdit  onclick='test()'>Edit</button>" + "</td></tr>");// HERE I M DYNAMICALLY CREATING A BUTTON IN THE LAST. WHEN I CLICK IT IT CALLS TEST().HOW CAN I SEND THE DATA IN THIS ROW TO THAT TEST() FUNCTION IN ORDER TO ACCES THEM
            i++;
        }
    }
    function test() {

        alert('edit button is clicked');
        // I NEED TO ACCESS THE ROW'S DATA WHERE THIS EDIT BUTTON IS CLICKED.
    } 
```

这是我的代码。使用 jquery ajax 我从数据库中获取数据并将动态添加到网格中，并且我还在行的末尾创建了一个编辑按钮。我在 buttonclick 上调用方法 test()。如何将当前行的值发送到该 test() 函数或如何在 test() 函数中访问它们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:00:42.910

像这样的东西：

```
$("#GridView1").append("<tr id="+data[i]+"><td>" + data[i].name + "</td><td>" + data[i].gender + "</td><td>" + data[i].dob + "</td><td>" + data[i].role + "</td><td>" + data[i].password + "</td><td>" + data[i].email + "</td><td>" + "<button id=btnEdit  onclick='test("+data[i].Id+")'>Edit</button>" + "</td></tr>");

function test(id) {

    Here use jquery selector to access the <tr> by id, then you can operate with the data in it.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:00:50.800

给 Edit 按钮一个类，然后使用 jquery 访问该类及其父类以获取数据

```
"<button id=btnEdit class='edit'>Edit</button>"

$('.edit').click(function(e){ // pass in e to find the button clicked

    var row = $(e.target).parents('tr'); // or var row = $(e.target).parent().parent();

}); 
```

这将最大限度地减少相同 ID 的使用

# wcf-data-services - 连接 MVVMCross Portable 连接到 WCF DataService。是否可以？

> ID：14875344
> 
> 赞同：1
> 
> 时间：2013-02-14T12:55:42.060
> 
> 标签：wcf-data-services, mvvmcross, portable-class-library

我需要你的建议。我正在 VS2012 中编写一个关于二手车经销商的工程工作项目。我有一个 SQL 数据库、WCF 数据服务、WPF 应用程序（已成功连接到 WCF），并且也想为其创建移动版本。我选择了 MVVMCross Portable 来为 Android 和 WP7 创建具有一个核心的 Mono。我在这里从移动便携式核心连接到我的 WCF DataService 时遇到问题，例如：

> 无法添加对指定 OData 源的服务引用，因为没有为此目标框架安装 WCF 数据服务。要安装受支持的 WCF 数据服务版本，请参阅 [http://go.microsoft.com/fwlink/?LinkId=253653](http://go.microsoft.com/fwlink/?LinkId=253653)。

我在互联网上搜索，似乎可移植类库还不支持 WCF 数据服务。我写这个问题给你，希望有任何解决方案。如果没有，我就等吗？

*   或者我可能需要将我的 WCF 数据服务更改为可以在 mvvmcross 便携式设备上运行的普通 WCF 服务，但是在应用程序中需要做很多工作来改变我在 WPF 中所做的工作，

*   或者我应该回到没有可移植类库的 MVVMCross Master，但不支持 Android 连接数据服务。

我读了一些关于 Simply.OData 的文章，但我不知道如何让它成功地工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:48:21.887

看看 Simple.OData.Client。它是一个可移植的类库（内部使用，但 Simple.Data OData 适配器）正是为此目的而编写的。我什至将它与 MvvmCross 一起使用。

它在 GitHub 上并且有一个 NuGet 包。确保使用“pre”选项安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:58:59.777

我已经将 MvvmCross 应用程序连接到来自所有 Droid、Touch 和 WinPhone 的 WCF Basic HTTP 数据服务（从未尝试过 WinRT 或 WPF - 但它们也应该可以工作）

但是，您是正确的，WCF 代码在不同平台上需要有所不同 - 这是因为 WCF 使用的代码不可移植。

我认为关于如何解决这个问题有两种基本选择：

1.  将 WCF 代码包装在可移植接口后面 - 一个处理可移植 DTO 类的接口，并为 Get/Send 提供一个接口。然后，您需要为每个平台编写一个小类，将便携式 DTO 映射到/从非便携式 DTO 映射。像 AutoMapper 这样的工具可能会对此有所帮助——不过我还没有在 MonoDroid 或 WinPhone 上尝试过。

2.  在您的核心中使用文件链接并为每个平台维护单独的库项目。有关此文件链接方法的示例，请查看[https://github.com/Redth/WshLst/](https://github.com/Redth/WshLst/) - 这是针对 Azure 移动服务而不是 WCF - 但适用相同的主体。

这两种方法都不是完美的——都在开发中增加了开销——但它们仍然希望为您提供一种共享代码和构建您的应用程序向前发展的方法。

我个人更喜欢方法 1 - 因为它提供了一个干净的接口，将当前网络堆栈与我的应用程序逻辑分开 - 它为我提供了删除 WCF 并在未来用 WebAPI 或服务堆栈之类的东西替换它的技术路线。

* * *

在不久的将来，可能会有一个共享的便携式类库配置文件，它支持跨 MonoTouch 和 MonoDroid 的一些 WCF 功能 - 但我怀疑这将很快在 Wp 或 WinRT 上可用：/

* * *

恐怕对 Simple.OData 一无所知（这是[https://github.com/simplefx/Simple.OData](https://github.com/simplefx/Simple.OData)） - 我相信写了很多的人，但我不知道他们有多好`dynamic`代码适用于 WP 和 MonoDroid。我相信它应该适用于两者 - 但任何依赖于`Reflection.Emit`.

* * *

最后一点 - 每当您在 WP 上执行任何与网络相关的操作时，如果可以，请始终尝试启用 GZip 压缩 - WP 默认不提供此功能。

# ruby-on-rails-3 - 为 API 后端选择应用服务器

> ID：14875345
> 
> 赞同：6
> 
> 时间：2013-02-14T12:55:44.597
> 
> 标签：ruby-on-rails-3, passenger, thin, application-server, rainbows

应用程序服务器有这么多选择（Passenger、Thin、Unicorn、Mongrel、Puma 和 Rainbows！），我想知道什么适合以下场景：

Rails 纯粹用于 API 后端（所有资产都由 Nginx 提供）。一些 API 调用依赖于其他 API 服务，因此有时它们需要一段时间才能完成。

响应式应用程序用于移动、平板电脑和桌面客户端，因此无法保证客户端的连接。

在这种情况下，您认为哪种应用服务器合适？选择时应该考虑哪些事项？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T15:13:13.447

如果您的应用程序对其他服务进行 API 调用，那么 Unicorn 是一个糟糕的选择。Unicorn 是一个单线程多进程应用程序服务器，专为快速、短期运行的 CPU 密集型工作负载而设计。进行 HTTP API 调用算作长时间运行的阻塞 I/O 请求。这不是限制，而是 Unicorn 的明确设计选择。[Unicorn 网站](http://unicorn.bogomips.org/PHILOSOPHY.html)“在某些情况下更糟”部分证实了这一点。

理论上，Thin 可以处理这种高并发工作负载，因为它使用事件 I/O。然而，这需要事件代码形式的显式框架和应用程序支持。很少有框架和应用程序这样做。Rails 和 Sinatra 没有。

所以这只剩下支持多线程的应用程序服务器。三个竞争者是 Puma、Rainbows 和[Phusion Passenger 4 Enterprise](https://www.phusionpassenger.com/enterprise)。

*   彪马相对较新。Rainbows 稍微老一点，但作者不保证它是否运作良好。Phusion Passenger 已经成熟，已经存在多年，目前已被超过 150000 个网站使用，包括皮克斯、纽约时报、AirBnB 等大型网站。
*   Puma 和 Rainbows 的使用模型与 Unicorn 和 Thin 类似，您启动一​​堆进程并通过反向代理配置将它们挂钩到 Nginx。另一方面，Phusion Passenger 被设计为直接集成到 Nginx 中，因此它需要的配置、流程管理和其他管理开销要少得多。
*   Phusion Passenger 4 Enterprise 不是严格意义上的多线程服务器，而是混合多进程/多线程的服务器。这意味着它可以运行多个进程（以提高稳定性和使用多个 CPU 内核的能力），每个进程都有多个线程（用于高 I/O 并发）。
*   Phusion Passenger 4 Enterprise 比 Puma 和 Rainbows 带来[了许多优势](http://www.reddit.com/r/ruby/comments/19peku/phusion_passenger_40_release_candidate_4/c8qowdc?context=3)：例如它具有带外垃圾收集，可以根据流量动态调整进程数，完全自动化滚动重启，因此您不需要脚本等.

您可能也对[这篇文章](http://www.reddit.com/r/rails/comments/19sqd0/unicorn_vs_thin/c8u5o6y?context=1)感兴趣以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:24:50.060

一种真正的了解方法是在真实条件下测试和测量性能。其他任何事情都是假设和猜测。

同时，你应该从一个你知道的足够好的开始（独角兽似乎是一个相当流行和体面的选择），一旦它成为瓶颈，就处理服务器性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T23:13:51.007

根据您的独立请求，我建议在 nginx 反向代理后面使用 Puma 或 Unicorn 服务器。将 sidekiq 用于工作队列。这是假设一个 Rails 应用程序，如果使用 Sinatra，thin 可能对你来说已经足够了。就像其他人说的那样，首先写稳定性而不是测试性能。

# django - Django REST：请求中不支持的媒体类型“application/xml”

> ID：14875346
> 
> 赞同：10
> 
> 时间：2013-02-14T12:55:53.133
> 
> 标签：django, django-rest-framework

我正在使用[http://django-rest-framework.org/](http://django-rest-framework.org/)令牌并尝试现在获取令牌。我已按照指南进行操作。然而，

当我尝试在 URL 上发帖时：

```
Request Url: http://127.0.0.1:8001/api-token-auth/
Request Method: POST
Status Code: 415
Params: {
    "username": "test",
    "password": "test123"
} 
```

我得到以下回复

```
{
    "detail": "Unsupported media type 'application/xml' in request."
} 
```

为什么是这样？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:25:31.020

看起来您正在使用 XML 内容发送请求。

如[文档](http://django-rest-framework.org/api-guide/authentication.html#tokenauthentication)所述，obtain_auth_token 视图需要 JSON 请求。

确保数据是 JSON 编码的，并且您正确地将“Content-Type”标头设置为`'application/json`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:24:14.563

这是因为 django-rest-framework 可以返回不止一种格式的数据。它显然通过查看请求中的“Accept:”HTTP 标头来决定哪种格式。例如，尝试将此标头的值更改为“application/json”之类的值。

# asp.net - 如何使用 MVC 4.0 将数据保存在数据库中

> ID：14875350
> 
> 赞同：1
> 
> 时间：2013-02-14T12:55:58.477
> 
> 标签：asp.net, authentication, entity-framework-4, asp.net-mvc-4

我创建了一个 ASP.Net MVC 4.0 应用程序，它已经默认实现了身份验证。我可以在不更改代码或数据库中的任何内容的情况下注册用户、更改密码。

现在我想在名为`ProductMaster`. 如何使用内置代码从该表中添加、更新和删除记录？

现在身份验证工作与例如

```
WebSecurity.CreateUserAndAccount
WebSecurity.CreateAccount
WebSecurity.ChangePassword 
```

请帮助我，因为我对 MVC 4 很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:58:14.187

创建一个新的示例 ASP.NET MVC 4 Web 应用程序并查看它是如何完成的。

转到`New Project`-> `ASP.NET MVC 4 Web Application`-> `Internet Application`。

该项目使用表单身份验证，您将清楚地看到关于 MVC 和表单身份验证/SQL Server 的流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:59:15.750

像任何其他 .Net 技术、ado.net 查询（插入）或使用实体框架

# php - 变量在 PHP 中被覆盖

> ID：14875352
> 
> 赞同：1
> 
> 时间：2013-02-14T12:56:07.730
> 
> 标签：php, variables

我有一个`$products`包含各种产品数据的数组，还有一个数组`$discounts`，其中键是产品项目编号。当我遍历时，`$products`我想定义一个局部变量，使访问特定折扣更容易，如下所示：

```
foreach ($products as $prod) {
    $discount = $discounts[$prod->item_number];
    // do stuff
} 
```

经过过多的调试，我确定由于某种原因，上面的代码导致最后一项`$discounts`被前一项的内容覆盖。

什么可能导致这种奇怪的现象，我怎么能给出`$discounts[$prod->item_number]`一个较短的名字而不引起它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:00:38.087

每当发生这种奇怪的事情时，我总是确保没有在服务器上“意外”启用[Register Globals 。](http://php.net/manual/en/security.globals.php)我看不出您引用的代码为什么会导致 $discounts 数组被修改。要么注册全局启用，要么你在其他地方搞砸了。

# mysql - 从不同的列中选择数据

> ID：14875360
> 
> 赞同：1
> 
> 时间：2013-02-14T12:56:47.133
> 
> 标签：mysql, sql, select, join

我有一张桌子：BID

```
Id_auction        bidder_1      winner_1    bidder_2    winner_2    item
  1                Alice           1          Ben         1          cup
  2               Charles          0          Alice       1          mug
  3                 Ben            1          Charles     1          pen 
```

如果投标人是赢家，则值为 1，如果不是赢家，则值为 0。因此，在第一次拍卖中，Alice 和 Ben 是赢家，在第二次拍卖中只有 Alice 获胜。我将需要一个 MySQL 查询，因此结果将如下所示：

```
Id_auction       bidder        item      bidder_number
1                Alice         cup            1
1                Ben           cup            2
2                Alice         mug            2
3                Ben           pen            1
3                Charles       pen            2 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:01:19.133

试试这个：

```
SELECT *
FROM
(
  SELECT 
    t1.id_auction,
    t2.bidder_1 AS bidder,
    t2.item
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_1 = 1
  UNION ALL
  SELECT 
    t1.id_auction,
    t2.bidder_2 AS bidder,
    t2.item
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_2 = 1
) AS sub
ORDER BY id_auction; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1990e/3)

这会给你：

```
| ID_AUCTION |  BIDDER | ITEM |
-------------------------------
|          1 |   Alice |  cup |
|          1 |     Ben |  cup |
|          2 |   Alice |  mug |
|          3 | Charles |  pen |
|          3 |     Ben |  pen | 
```

* * *

## 更新 1

只需在第一个查询中选择一个`bidder_number`值为 1 的新列，在第二个查询中选择一个值为 2 的新列，如下所示：

```
SELECT *
FROM
(
  SELECT 
    t1.id_auction,
    t2.bidder_1 AS bidder,
    t2.item,
    1 AS bidder_number        -- <---------- This is the new column
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_1 = 1
  UNION ALL
  SELECT 
    t1.id_auction,
    t2.bidder_2 AS bidder,
    t2.item,
    2                         -- < --------- with value 2 for bidders 2
  FROM table1 t1
  INNER JOIN table1 t2  ON t1.id_auction = t2.id_auction
                       AND t2.winner_2 = 1
) AS sub
ORDER BY id_auction, bidder; 
```

这会给你：

```
| ID_AUCTION |  BIDDER | ITEM | BIDDER_NUMBER |
-----------------------------------------------
|          1 |   Alice |  cup |             1 |
|          1 |     Ben |  cup |             2 |
|          2 |   Alice |  mug |             2 |
|          3 |     Ben |  pen |             1 |
|          3 | Charles |  pen |             2 | 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1990e/8)

# kineticjs - 使用 kineticjs 缩放（缩放）整个画布

> ID：14875365
> 
> 赞同：1
> 
> 时间：2013-02-14T12:57:06.063
> 
> 标签：kineticjs

我正在使用画布和 kineticjs 创建一个图像编辑器。在该过程结束时，我将整个画布导出为图像。

我的问题是我想缩小编辑器窗口，即使用 500x500 画布导出 1000x1000 图像。

到目前为止，我所做的是按比例因子缩小所有画布元素，然后在导出时将舞台大小设置为所需大小。问题是这会放大图像大小而不是画布中的元素。

关于如何缩小可见画布但导出全尺寸图像的任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:03:14.620

在玩耍并在@EliteOctagon 的帮助下，这是我的解决方案：

1.  设置具有比例因子的变量
2.  保存原始尺寸
3.  创建具有比例（用于内部元素）和按比例缩小的高度/宽度（用于画布本身）的舞台
4.  保存图像时，暂时将高度/宽度设置为原始值，并将比例因子设置为 1

# java - 双击启动 jar 在 32 位 JVM 中启动，但在 64 位 JVM 中从控制台启动

> ID：14875368
> 
> 赞同：4
> 
> 时间：2013-02-14T12:57:08.890
> 
> 标签：java, jar, console, 32bit-64bit, double-click

由于我使用的是本机库，因此我对 32 位和 64 位平台有不同的 JAR。现在，当系统上安装了两个 JVM，一个 32 位和一个 64 位时，我会遇到这种行为：

**双击 32 位 JAR** -> 工作

**双击 64 位 JAR** -> 应用程序无法启动

**从控制台启动 32 位 JAR** -> 错误：此 Java 实例不支持 32 位 JVM。请安装所需的版本。

**从控制台启动 64 位 JAR** -> 有效

在 Mac 上，在命令中添加 -d32 时，我可以从控制台启动 32 位 JAR。但在 Windows 上，这不起作用。

我希望，在安装了 64 位 JVM 的系统上，JAR 应该在 64 位 JVM 中启动，无论是通过双击还是通过控制台启动。

我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:04:29.337

检查`PATH`环境变量指向的位置。我想您会发现它指向您的 64 位 JVM，而不是与`.jar`文件关联的默认应用程序，后者可能是您系统上的 32 位 JVM。对齐这两个值，你应该没问题。

# wolfram-mathematica - 有没有办法让 Mathematica 将符号视为真实的？

> ID：14875374
> 
> 赞同：1
> 
> 时间：2013-02-14T12:57:24.997
> 
> 标签：wolfram-mathematica, symbols

是否可以在 Mathematica 中将符号 'a' 和 'b' 设置为实数，所以当我输入 'z = a+ **I** b;Conjugate[z]' 我得到 'a- **I** b' 而不是 'Conjugate[a]-**我**共轭[b]'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:08:40.910

您可以像这样使用 ^= 或 ^:= ：

```
Im[a] ^:= 0
Conjugate[a] ^:= a 
```

然后

```
Conjugate[a + I b] 
```

出来作为

```
a - I Conjugate[b] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:05:39.610

您可以将表达式包装在 中`ComplexExpand`，如下所示：

```
ComplexExapnd[Conjugate[z]] 
```

查看文档以`ComplexExpand`了解其工作原理的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-14T20:17:08.160

```
Simplify[Conjugate[z], Assumptions -> Element[{a, b}, Reals]] 
```

这不是很好，但这是我能找到的最好的

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-15T04:26:07.887

```
Refine[Conjugate[z], {a, b} \[Element] Reals] 
```

# osgi - 如何在后台 LotusScript 代码中使用 IBM SBT

> ID：14875386
> 
> 赞同：1
> 
> 时间：2013-02-14T12:57:59.147
> 
> 标签：osgi, xpages, lotusscript, ibm-sbt

**目标：**我们希望我们的工作流引擎完全用 LotusScript 编写，以将事件发送到 IBM Connections 服务器的 Activity 流。

**问题：**如何从 LotusScript 调用 IBM SBT API？

**约束：**

*   LS 后台代理代码作为专用用户（模板签名的 ID）运行，无法提示用户输入用户名/密码，并且无法进行 SSO。因此，我希望将基于表单的身份验证与 IC 的专用系统帐户一起使用；
*   SBT 安装在 OSGi 级别，因此 Java 代理需要将 JAR 放入代理主体（知道内存泄漏问题）或部署到服务器的 jvm/lib/ext 目录（重复部署）。所以首选不涉及Java代理的方案；
*   LotusScript 中对 Web 服务的调用应该是安全的（SSL，url 中没有密码）并且不依赖于操作系统（例如，[这种方法不可用](http://dev.kanngard.net/Permalinks/ID_20040311084546.html)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:06:30.033

查看您的问题，我建议您将 LS2J 用于无法通过 LotusScript 完成的事情。自 6.5 版以来，我一直使用 LS2J 将 web 服务引入 Notes/Domino - 它一直非常稳定且性能良好......

您应该创建一个 LotusScript“包装器”类来处理 LS2J 特定的调用和错误处理——将来自 Java 层的任何错误转换为正常的 LS 错误。这将使它易于在您的 LS 库中使用。

您应该能够使用 LotusScript 的内置 Webservice-support... - 如果没有，请考虑使用 LS2J。在这种情况下，您可能需要在类路径中添加一些 JAR 文件以供 Java 使用。您应该将这些 JAR 文件放在 jvm/lib/ext 库中 - 不要将它们附加到脚本库或代理，因为在使用它们之前在内部分离 jar 文件的代码中存在内存泄漏。它会在将来某个时候杀死你的服务器。

说了上面的话，我也同意其他人的观点——Java 是前进的道路，而 OSGi 从这个角度来看非常有趣......

/约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:16:16.883

LotusScript 没有发出网络请求的本机能力，因此您必须使用 LS2J（因此您无论如何都在编写 Java，没有 Java IDE 的好处）或调用特定于平台的 API（即 Windows DLL）。

此外，LotusScript 是一种遗留语言。它支持与现有应用程序的向后兼容性，但今后不太可能收到重大更新。如果您从头开始编写此代码，最好使用一种可以长期维护的语言，而不是在您的环境中引入额外的 LotusScript 代码。为此，我建议创建一个[DOTS](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=OSGI%20Tasklet%20Service%20for%20IBM%20Lotus%20Domino) tasklet，它与代理基本相同，没有代理的性能问题。由于 DOTS 中的 O 代表 OSGi，因此 tasklet 是 SBT 的部署兄弟，并且很可能是 Domino 平台的计划/触发任务的未来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:46:37.743

LS2J 在我们的 Legacy 代码中运行良好。这是相当稳定和精彩的表现。我们甚至使用 db2 jars（在服务器上）和用于 Web 服务的 Java EE 代码进行了 500k 次调用并且没有内存问题。

Java 类可以在 Eclipse 中编写为 Lotus 之外的一个真正的 IDE。一个简单的 LotusScript 类，用于带有错误处理的包装器代码，然后您就可以离开了。

# android - Download manager crashes on On DOWNLOAD COMPLETE

> ID：14875396
> 
> 赞同：0
> 
> 时间：2013-02-14T12:58:28.187
> 
> 标签：android, file, download, uri, download-manager

This is my broadcast receiver:

```
 BroadcastReceiver broadcast = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
            dwnId = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, 0);
            Cursor c = DownloadManagerWrapper.getInstance(getActivity()).getDownloadManager().query(new DownloadManager.Query().setFilterById(dwnId));
            c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS));
        } else {
            Toast.makeText(getActivity(), "ERROR!", Toast.LENGTH_SHORT).show();
        }

    }
}; 
```

On my onCreateView i register it:

```
(getActivity()).registerReceiver(broadcast, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

This is how my DownloadManagerWrapper looks like:

```
public class DownloadManagerWrapper {
private static final String DOWNLOAD_SERVICE = "download";

private DownloadManager mgr;

private static DownloadManagerWrapper i;

private DownloadManagerWrapper(Context c) {
    mgr = (DownloadManager) c.getSystemService(DOWNLOAD_SERVICE);
}

public static DownloadManagerWrapper getInstance(Context c) {
    if (i == null) {
        i = new DownloadManagerWrapper(c);
    }
    return i;
}

public DownloadManager getDownloadManager() {
    return mgr;
}

} 
```

This is what i do that makes it FC:

```
 if(Util.hasNetworkConnection(ctx)){
        Uri destination = Uri.parse("file://" + Environment.getExternalStorageDirectory().getAbsolutePath() + "/media/video.mp4");
        DownloadManagerWrapper.getInstance(ctx).getDownloadManager().enqueue(new DownloadManager.Request(uri).setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI | DownloadManager.Request.NETWORK_MOBILE).setAllowedOverRoaming(false).setDestinationUri(destination));
    }else{
        Toast.makeText(ctx, "No Internet Available!!", Toast.LENGTH_SHORT).show();
    } 
```

I get this error:

```
02-14 15:57:03.488: E/AndroidRuntime(4987): FATAL EXCEPTION: main
02-14 15:57:03.488: E/AndroidRuntime(4987): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.DOWNLOAD_COMPLETE flg=0x10 pkg=com.Red.medicalpaint (has extras) } in com.Red.Fragments.AppLibraryFragment$1@41a1f998
02-14 15:57:03.488: E/AndroidRuntime(4987):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:765)
02-14 15:57:03.488: E/AndroidRuntime(4987):     at android.os.Handler.handleCallback(Handler.java:615)
02-14 15:57:03.488: E/AndroidRuntime(4987):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 15:57:03.488: E/AndroidRuntime(4987):     at android.os.Looper.loop(Looper.java:137)
02-14 15:57:03.488: E/AndroidRuntime(4987):     at android.app.ActivityThread.main(ActivityThread.java:4978)
02-14 15:57:03.488: E/AndroidRuntime(4987):     at java.lang.reflect.Method.invokeNative(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:22:42.267

Commenting this line, made it work:

c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS));

# php - 使用 php 创建网站构建器

> ID：14875402
> 
> 赞同：2
> 
> 时间：2013-02-14T12:58:56.230
> 
> 标签：php, mysql, frameworks, web

我的任务是创建一个网站构建器，允许人们创建关于他们的业务等的网站。客户将是非技术性的，所以它应该简单易用，而且，我必须维护所有人的帐户信息客户，即个人资料、帐户详细信息、订阅等。我不知道该怎么做。我主要研究过 php、mysql 和一些 drupal，有人可以建议我前进的方向吗？我的意思是有我可以使用的 php 框架或 cms 吗？我发现了一个类似的问题，但这个问题和我的不同之处在于语言平台，因为我的问题查询与 php.ini 相关。

链接： [创建一个“网站建设者” - 我将如何构建它？](https://stackoverflow.com/questions/3059592/creating-a-website-builder-how-would-i-architect-it)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:17:28.823

根据网站所需的复杂性和要求，我将使用填充数据库信息的固定布局来解决此问题。

想想这样的事情：`mydomain.com/user_website_title`当用户在 mydomain.com 上创建他的个人资料时，会在服务器上创建一个文件夹来容纳默认文件/布局，如果您愿意，当然可以使用框架。还为此用户创建默认数据库条目，您可以通过控制面板显示表单，以便用户可以更改其特定内容。

我会首先将其作为一个单独的项目来处理，创建一个 Web 应用程序来复制用户在为其网站填写正确信息后会看到的内容。之后我会考虑更好地实现这个服务器端的方法。

# ruby-on-rails - 动态范围下的轨道可安装发动机

> ID：14875404
> 
> 赞同：1
> 
> 时间：2013-02-14T12:58:57.993
> 
> 标签：ruby-on-rails, routes

说我有这些路线：

```
scope '(:locale)', :locale => /en|de/ do
  mount Users::Engine => "users", as: 'users_engine'  
end 
```

在引擎看来：

```
<%= link_to 'new user', action: :new, controller: :users, locale: :de %> 
```

我明白了

```
/en/users/users/new?locale=de 
```

代替

```
/de/users/users/new 
```

我已经包含在应用程序控制器中：

```
def set_locale
  if params.include?('locale')
    I18n.locale = params[:locale]
    Rails.application.routes.default_url_options[:locale] = I18n.locale
  end
end 
```

它在主应用程序中运行良好

我找到了一种获取正确网址的方法

```
Users::Engine.routes.url_for controller: 'users/users', action: :new, only_path: true, locale: :de 
```

但我认为应该有更好的方法，如果我在布局中创建更改区域设置链接怎么办？

```
<%= link_to locale: :de %> 
```

我不知道这可能是哪个确切的引擎

谢谢vm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T14:16:07.753

我想我已经找到了解决方案......

只需在 application_controller.rb-File 中使用 url_options-method（参见下面的链接）

请参阅：[https ://stackoverflow.com/a/18299975/603126](https://stackoverflow.com/a/18299975/603126)

希望能帮助到你！

问候

菲利普

# mysql - MySQL 使用 IF 语句更新 2 列

> ID：14875406
> 
> 赞同：0
> 
> 时间：2013-02-14T12:59:00.823
> 
> 标签：mysql, sql, if-statement, sql-update

我想更新表中的 2 列。POST 值为 1 或 0。所以我有以下查询，我不确定它是否有效，但我正在寻找更好的方法来做到这一点。

如果 POST 值 ($yes_no) 等于 1，那么我需要增加 tableA.num_yes +1 并减少 tableA.num_yes -1。

因此，如果 POST 值 ($yes_no) 等于 0，则相同。

```
t.num_yes = IF($yes_no = 1, t.num_yes + 1, t.num_yes),
t.num_no = IF($yes_no = 1, t.num_no - 1, t.num_no),
t.num_no = IF($yes_no = 0, t.num_no + 1, t.num_no),
t.num_yes = IF($yes_no = 0, t.num_yes - 1, t.num_yes) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:03:01.083

您也可以`CASE`在此问题上使用。例子，

```
UPDATE  tableName
SET     num_yes = CASE  WHEN $yes_no = 1 
                        THEN num_yes + 1
                        ELSE num_yes - 1
                    END,
        num_no = CASE   WHEN $yes_no = 1 
                        THEN num_no - 1
                        ELSE num_no + 1
                    END 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/21763/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:07:48.800

试试这个

```
UPDATE  tableName as t
SET 
        t.num_yes = IF($yes_no = 1,t.num_yes + 1,t.num_yes - 1),
    t.num_no = IF($yes_no = 1,t.num_yes - 1,t.num_yes + 1) 
```

# jquery - “Jquery Tabs” - Asp.net mvc 中的导航菜单样式？

> ID：14875411
> 
> 赞同：1
> 
> 时间：2013-02-14T12:59:21.467
> 
> 标签：jquery, html, asp.net-mvc, css

我刚刚开始使用 jQuery 选项卡，它看起来很棒。我想将它们用作我的导航菜单`ASP.NET MVC`。我清理了`site.css`并在我的`_Layout.cshtml`. 我可以看到菜单，但它没有按我的意愿正常工作。无论我选择哪个链接，它每次都会加载主页（它也显示预期的页面，但在主页的内容下方）。

```
 <!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <title>@ViewBag.Title - My ASP.NET MVC Application</title>
            <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
            <meta name="viewport" content="width=device-width" />
           @Styles.Render("~/Content/themes/base/css")
        @Styles.Render("~/Content/bootstrap")
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/bootstrap")

 <script>
            $(function () {
                $("#tabs").tabs({ active: false });
            });
         </script>

        </head>
        <body>
            <header>
                <div >
                    <div >
                        <p >@Html.ActionLink("your logo here", "Index", "Home")</p>
                    </div>
                    <div >
                        <section>
                            Hello, <span >@User.Identity.Name</span>!
                        </section>
                        <nav>
                        <div id = "tabs">
                            <ul >
                                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                                <li>@Html.ActionLink("About", "About", "Home")</li>
                                <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                            </ul>
                        </div>
                        </nav>
                    </div>
                </div>
            </header>
            <div >
                @RenderSection("featured", required: false)
                <section class="content-wrapper main-content clear-fix">
                    @RenderBody()
                </section>
            </div>
            <footer>
                <div >
                    <div >
                        <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                    </div>
                </div>
            </footer>

            @RenderSection("scripts", required: false)
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:43:41.980

您似乎已经声明了 jquery 两次（一次在开头，一次在结尾），这显然是错误的。尝试修复您的脚本：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/themes/base/css")
        @Styles.Render("~/Content/bootstrap")
        @Styles.Render("~/Content/css")
    </head>
    <body>
        <header>
            <div>
                <div>
                    <p>@Html.ActionLink("your logo here", "Index", "Home")</p>
                </div>
                <div>
                    <section>
                        Hello, <span >@User.Identity.Name</span>!
                    </section>
                    <nav>
                    <div id="tabs">
                        <ul>
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("About", "About", "Home")</li>
                            <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                        </ul>
                    </div>
                    </nav>
                </div>
            </div>
        </header>
        <div>
            @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            <div>
                <div>
                    <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                </div>
            </div>
        </footer>

        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/bootstrap")
        @RenderSection("scripts", required: false)
        @Scripts.Render("~/bundles/modernizr")
        <script>
            $("#tabs").tabs({ active: false });
        </script>
    </body>
</html> 
```

# html - 如何以红色背景和白色字体获取 Reporter.log 错误消息

> ID：14875412
> 
> 赞同：0
> 
> 时间：2013-02-14T12:59:30.997
> 
> 标签：html, selenium, testng

现在我正在使用类似 Reporter.log("NO ELEMENT PRESENT in " + this.getClass() + " on "+ Thread.currentThread().getStackTrace()[2].getLineNumber() +": " +元素 + "");

我进行了 TestNG 更新..现在它显示错误消息（白色背景和黑色字体）但我想要 Bachground=Red 和 Font-White..

# javascript - 如何通过我的所有页面在 javascript 中加载动态更改的样式

> ID：14875417
> 
> 赞同：0
> 
> 时间：2013-02-14T12:59:51.770
> 
> 标签：javascript, html, colors, styles

到目前为止我的代码：http: [//pastebin.com/KTEF06Kf](http://pastebin.com/KTEF06Kf)

我创建了一个简单的脚本来更改页面的颜色。（文本背景和主徽标）当我导航到我网站的另一个页面时，如果颜色已更改，我希望加载它们而不是默认颜色。

我该怎么做？我尝试在其他页面的正文中创建一个 onLoad 函数来调用函数 loadCol()，它与 ​​changeColour 执行相同的操作，但使用预设颜色，而不是从单击的框颜色传入。

关于我如何实现这一点的任何线索。（抱歉，如果解释不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:14:38.253

当在一个页面上选择某些内容并使其在所有其他页面上持久存在时，您需要将该值存储在某处，作为无状态的 HTML，并且不知道在第一页上选择了什么。

您可以使用 cookie 或本地存储，或者两者都使用，[MDN](https://developer.mozilla.org/en-US/docs/DOM/Storage)有一个用于本地存储的 polyfill，它回退到 cookie。

您也可以使用散列或查询字符串将链接中的值传递给其他页面：

```
mysite.com/page2?color=blue

mysite.com/page2#color=blue 
```

选择颜色时使用 javascript 更改锚点的位置。

# c# - Listview无法正常工作c#

> ID：14875421
> 
> 赞同：0
> 
> 时间：2013-02-14T12:59:59.570
> 
> 标签：c#, visual-studio-2010, listview

我的项目中有 2 个 **ListView**控件，其中一个工作得很好，另一个直到最近才知道为什么它的行为非常奇怪。

有时它不会识别选中的属性，有时它会在我们获得选中的属性时返回 "" 有时工作正常并返回**True**或**False**。

访问 ListBox 的代码如下，请记住我有 2 个工作得非常好，它具有相同的代码来获取检查状态。

当其他人工作时，当获取中间列的子文本总是返回“”时，它也开始遇到问题，所以我必须更改代码以从数据表中获取所需的输出。

**更新**

**此外，当我处于调试模式并逐行运行时，它每次都能正常工作并获得价值**

```
for (int i = 0; i < listView1.Items.Count - 1; i++)
            {
                //  string tmpVal = string.Empty;
                bool tmpVal = false;
                if (listView1.InvokeRequired)
                {
                    listView1.BeginInvoke(new MethodInvoker(
                        () =>

                        tmpVal = listView1.Items[i].Checked

                            ));
                }
                else
                {
                    tmpVal = listView1.Items[i].Checked;
                }

                if (tmpVal == true)
                {
                    string senderEMail = string.Empty;

                    if (listView1.InvokeRequired)
                    {
                        listView1.BeginInvoke(new MethodInvoker(
                            () =>

                            senderEMail = listView1.Items[i].SubItems[1].Text.ToString()

                                ));
                    }
                    else
                    {
                        senderEMail = listView1.Items[i].SubItems[1].Text.ToString();
                    }

                    int rowNumber = 0;

                    string rNumber = string.Empty;

                    if (listView1.InvokeRequired)
                    {
                        listView1.BeginInvoke(new MethodInvoker(
                            () =>

                            rNumber = listView1.Items[i].SubItems[3].Text.ToString()

                                ));
                    }
                    else
                    {
                        rNumber = listView1.Items[i].SubItems[3].Text.ToString();

                    }

                    rowNumber = Convert.ToInt16(rNumber.Trim());

                    if (checkBox2.Checked)
                    {
                        //GET UNSUBSCRUBE URL IF ANY HIT IT AND ALSO SEND EMAIL

                        string unSubscribeUrl = resultSheet.Rows[rowNumber - 1]["UnsubscribeLink"].ToString();
                        string receiver = resultSheet.Rows[rowNumber - 1]["receiver"].ToString();
                        if (unSubscribeUrl != "")
                        {
                            unSubscribeUrl = unSubscribeUrl.Replace("amp;", "").Trim();

                            string html = getHtml(unSubscribeUrl);
                        }

                        //SENDING EMAIL
                        receiver = receiver.ToLower();

                        OutLook.Application oApp1 = new OutLook.Application();
                        OutLook.MailItem mail = oApp1.CreateItem(OutLook.OlItemType.olMailItem) as OutLook.MailItem;

                        mail.Subject = "unsubscribe | uitschrijven | gelieve geen mails te sturen";
                        mail.To = senderEMail;

                        SetAccount_2007_2010(mail, receiver);

                        Marshal.ReleaseComObject(oApp1);
                    }

                    if (checkBox3.Checked)
                    {
                        deleteSenderList.Add(senderEMail);
                    }

                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:38:18.593

将调用替换为调用`BeginInvoke`-`Invoke`将`BeginInvoke`异步处理，这可能会导致时间问题。

# firefox - Firefox 扩展：访问窗口元素

> ID：14875425
> 
> 赞同：2
> 
> 时间：2013-02-14T13:00:15.683
> 
> 标签：firefox, firefox-addon-sdk, add-on

Firefox 扩展如何读取 DOM/window 对象？即逆向：[内容脚本访问网页js](https://stackoverflow.com/questions/8844633/content-script-access-to-webpage-js)

我想在扩展中分配一个变量 - 使用 unsafeWindow 对象。但它不起作用。unsafeWindow 在 contentScript 之外是未定义的：

我尝试了许多其他方法，但我想避免需要任何丑陋的黑客..

例如[https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/guides/content-scripts/access.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/guides/content-scripts/access.html)说 unsafeWindow 是一个很好的代理：它看到实际的窗口对象（即使它被 jQuery 等库修改）。但是当我尝试访问 unsafeWindow 时，例如： var widgets = require("sdk/widget"); var tabs = require("sdk/tabs");

```
var widget = widgets.Widget({
  id: "mozilla-link",
  label: "Mozilla website",
  contentURL: "http://www.mozilla.org/favicon.ico",
  onClick: function() {
tabs.activeTab.attach({
      // native implementation of window.confirm will be used
      contentScript: "console.log(window.navigator.userAgent);"
    });
dump(unsafeWindow.navigator.userAgent);

  }
dump(unsafeWindow);
}); 
```

Console.log 工作并在 sdk 控制台中触发“信息：”。但转储没有，实际上那里存在参考错误。我真的需要从扩展访问窗口对象。那么是否存在 unsafeWindow 呢？如何访问窗口对象？我不会调用任何函数，所以它是安全的。

# java - read time from text file in java

> ID：14875428
> 
> 赞同：1
> 
> 时间：2013-02-14T13:00:21.190
> 
> 标签：java, simpledateformat

I am trying to write some codes in java to read a text file, but when it read a time in (hh:mm) formate as example below:

```
6:30 14:30 
```

and there is my java code to convert the string to Data formate

```
DateFormat formatter = new SimpleDateFormat("hh:mm");
strLine = br.readLine();
strLine = strLine.trim();
tokens2 = strLine.split(" ");
System.out.println((Date)formatter.parse(tokens2[0])); 
```

the output will be:

```
Thu Jan 01 06:30:00 AST 1970 
```

it will give in long formate Date , While I want just take timezone(06:30). what should I do ? Any advice.

edit: the problem solved by Joda time by this code:

```
LocalTime.parse(tokens2[0]); 
```

it is just take time

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:04:28.613

Firstly, your time pattern is wrong - you should be using `HH:mm` as you're using a 24-hour clock in your examples.

Secondly, you're parsing a `Date`. A `Date` is just an instant in time: it doesn't know about the time zone, calendar, whether you're interested in just the time, just the date etc.

Thirdly, you're seeing that output because you're basically just calling `Date.toString()`.

There's no type in Java to represent just "a time of day" (which isn't at all the same as a time zone, by the way). You could *format* a `Date` to just include the time part, but *if* you want to do that, I'd strongly recommend using a time zone of UTC to avoid any possible DST problems.

A better solution would be to use [Joda Time](http://joda-time.googlecode.com) which has a [`LocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html) type - ideal for your situation. You can parse that ([`DateTimeFormatter.parseLocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html#parseLocalTime%28java.lang.String%29)) and then work with it appropriately, formatting it (again to just a time) whenever you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:03:18.663

I assume you want to read and parse `6:30` and output it as `06:30`, right?

Well, a first step would be to use the formatter, to output the date again:

```
System.out.println(formatter.format((Date)formatter.parse(tokens2[0]))); 
```

Btw, your format would not be able to correctly format `14:30` since `h` means the hour in am/pm, e.g. 1-12\. Your format should be `HH:mm` instead, otherwise you'd get the output `02:30` instead of `14:30`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:04:39.503

You can use a `SimpledateFormatter` in two ways.

1.  to parse a String and create a Date
2.  to create a String aout of a Date

You want both in your example. First you want to parse a String and create a Date (even if you are only interestet in the time part). In the second step you want to create a String out of this Date and print it to System.out.

```
Date date=formatter.parse(tokens2[0]);     //use the 'formatter' to parse the String
Sytem.out.println(formatter.format(date)); //use the 'formatter' to define the format of the output. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T05:21:02.423

# Using java.time

The other answers are correct but now outdated.

The [`java.time.LocalTime`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html) class represents a time-of-day without a date and without a time zone. The class can directly parse a string in standard [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format using 24-hour clock: HH:MM or HH:MM:SS

```
LocalTime lt = LocalTime.parse( "14:30" );
String output = lt.toString();  // 14:30 
```

## Formatting

Use a `DateTimeFormatter` if you want other formats. Even localize automatically.

```
DateTimeFormatter f = DateTimeFormatter.ofLocalizedDateTime( FormatStyle.FULL );
f = f.withLocale( Locale.CANADA_FRENCH ); // Cultural norms & human language
String output = lt.format( f ); 
```

# About java.time

The [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the old troublesome date-time classes such as `java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`.

The [Joda-Time](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to java.time.

To learn more, see the [Oracle Tutorial](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations.

Much of the java.time functionality is back-ported to Java 6 & 7 in [ThreeTen-Backport](http://www.threeten.org/threetenbp/) and further adapted to [Android](https://en.wikipedia.org/wiki/Android_(operating_system)) in [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).

The [ThreeTen-Extra](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as `Interval`, `YearWeek`, `YearQuarter`, and more.

# php - 如果自定义字段 = true，则将图像插入 PHP 代码

> ID：14875432
> 
> 赞同：1
> 
> 时间：2013-02-14T13:00:24.657
> 
> 标签：php, image

我有以下代码，它正在拉入一个名为 phone 的自定义字段。

```
<?php echo get_post_meta( get_the_ID(), 'ecpt_phone', true ); ?> 
```

但是，我还想在它的左侧添加一个小图标。所以我意识到我必须在某处包含 src 链接，尝试了下面的方法，但没有任何乐趣。抱歉有点新...

```
<?php
$value = get_post_meta( get_the_ID(), 'ecpt_phone', true );
if( $value == 'True' ) { echo '<img src="/wp-content/uploads/2013/02/image.png">'; echo get_post_meta( get_the_ID(), 'ecpt_phone', true ); ?> 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:06:32.627

尝试在字符串定义中反转 ' 和 "。这会导致

```
"<img src='/wp-content/uploads/2013/02/image.png'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:11:44.850

`/`删除第一个`src`然后尝试..

```
echo '<img src="wp-content/uploads/2013/02/image.png">'; 
```

# php - 提交提示框时未建立post请求

> ID：14875433
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:00:32.143
> 
> 标签：php, javascript, ajax

每当我运行此代码时，都不会发送任何发布请求，它只会向我显示一个没有`alert();`. 基本上我想要的是当用户加载页面时，会出现一个提示框，当用户将 PW 放入框中时，它会发送一个 post 请求

提前谢谢你！

```
<?php // mac.php

$password = 'crVL5Hi/hjE/E';
if(isset($_POST['password'])) {
if($_POST['password'] == NULL) {
die('empty');
} else {
if(crypt($_POST['password'], 'cryptsalt') == $password) {
die('success');
} else {
die('fail');
}
}
}

?>
<span id="page"></span>
<script>
var pw = prompt("Please enter a password.","");
if(pw != "") {
  $.post("mac.php",
  {
    password:pw
  },
  function(data){
    alert(data);
  });

} else {
while(pw == "") {
var pw = prompt("Password was left blank.","");
}
}

</script> 
```

谢谢！

编辑：感谢您指出一些显而易见的事情，它现在可以工作了。

再次感谢。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:07:18.723

`$`未定义——包括 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:11:42.287

你还没有包括 Jquery.. 请包括它..

ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js

# git - 如何跨分支更改 Git 存储库中的文件路径，完全重写历史记录？

> ID：14875435
> 
> 赞同：1
> 
> 时间：2013-02-14T13:00:37.027
> 
> 标签：git

我之前也问过类似的问题，但是在对此事进行了相当彻底的分析之后，得出的结论`git filter-branch`是我正在寻找的主力。要么是那个，要么是一个自己做脏活的 shell 脚本`.git`（因为 git 无论如何都会把它的胆量作为其接口的一部分公开）。

我有一个项目目录，其中包括构建脚本和构建配置定义。更重要的是，它包含`src`文件夹，里面包含了项目的各种源代码，**是一个 git 仓库。**

我现在意识到整个项目文件夹应该是一个 git 存储库，而不仅仅是包含的源代码文件夹，但我希望保留我的源代码开发历史。事实上，我希望历史记录被完全重写，这样`main.c` 它就不会跟踪文件中的更改，而是跟踪文件中的相同内容更改`src/main.c`。然后我可以简单地从父文件夹（构建脚本所在的位置）移动文件并在 repo 中检查它们。

我不想打扰子树合并或 git 子模块，或者在存储库更改后必须合并或重置任何内容。我现在对 gits 内部有一些相当好的了解——提交指的是指与文件名配对的 blob 的树。

**有了这些知识，我认为应该可以重写我的历史，在所有路径前面加上`src/`**

我只是不想做额外的工作，这似乎`filter-branch`是要走的路，但我对示例和使用后的必要内务处理感到困惑。“原始参考”？另一个问题是我对“裸”回购完全没问题，我不需要任何工作树，我也完全不确定为什么我需要索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:42:56.143

它并不像你想的那么简单。您当前有两个存储库，每个存储库都有自己的历史记录。
每个提交都有一个明确定义的父级。

要获得单一的、按时间顺序正确的历史记录，您必须更改大量提交的父级。

一个简短的示例说明了这一点：

存储库“配置”：

```
A <- C <- E 
```

存储库“src”

```
B <- D <- F 
```

假设提交 B 发生在 A 之后，C 之后 B 等等，所以你想要这个结果：

```
A <- B' <- C' <- D' <- E' <- F' 
```

要实现这一点，您必须更改 to 的父`B'`级`A`。的父级`C'`必须从更改`A`为`B'`等。

这不是微不足道的。但有可能。

假设配置存储库位于“/usr/git/config”，src 存储库位于“/usr/git/config/src”。

首先，我们必须准备“src”存储库以包含“src”子文件夹中的所有文件：

1.  CD 到“/usr/git/config/src”
2.  执行这个怪物：

    ```
    git filter-branch --index-filter 'git ls-files -s | sed "s-\t\"*-&src/-" | GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info && mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' HEAD 
    ```

其余的现在将发生在“config”存储库中，因此 CD 到“/usr/git/config”。

1.  将“src”存储库添加为远程：`git remote add src /usr/git/config/src`
2.  获取“src”存储库的提交：`git fetch src`
3.  将来自“src/master”的提交与本地“master”合并：`git merge src/master master`
4.  找出两个存储库的初始提交：`git rev-list --max-parents=0 --pretty HEAD`
5.  注意两者中较旧的提交哈希
6.  执行完整存储库的变基以摆脱合并：`git rebase -f <hash from step 5>`
7.  移除遥控器：`git remote remove src`
8.  删除文件夹“/usr/git/config/src/src”和“/usr/git/config/src/.git”
9.  更新 .gitignore 以不再忽略“src”文件夹。

**请注意：**
这假设您在两个存储库中都只有一个主分支。

哦，并且：*请*在执行此操作之前进行备份。我只在一个小型测试存储库上对其进行了测试，每个存储库有两个提交......

* * *

如果你在 src 子文件夹中只有一个存储库，那就更简单了，只需执行以下命令：

1.  CD 到“/usr/git/config/src”
2.  从上面执行怪物
3.  将“/usr/git/config/src”重命名为“/usr/git/config/src_tmp”
4.  将“/usr/git/config/src_tmp”的完整内容移动到“/usr/git/config”，包括“.git”存储库
5.  删除现在为空的“/usr/git/config/src_tmp”

# android - 带有地图 v2 渲染错误的 Android 片段

> ID：14875440
> 
> 赞同：0
> 
> 时间：2013-02-14T13:00:50.667
> 
> 标签：android, android-layout, opengl-es, google-maps-api-2

我有一个全屏地图，上面有组件。

当我单击菜单按钮时，它也是全屏的一个 RelativeLayout 变得可见。

我的问题来了，而不是正确绘制此布局，它仅出现在屏幕中的其他组件（其他按钮和图像）上，但在只有地图的区域，地图继续。

如果我关闭屏幕并再次打开，则正确布局其绘制。

我尝试使用 DDMS 进行捕获，但 DDMS 显示正确的屏幕，出现问题 4.0.4 和 2.3.6

我认为问题来了，因为新地图使用opengl。在使我的布局可见以更改地图的渲染后，我需要调用一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:02:53.103

我用原始的 MapView 尝试了这个，每当我需要显示另一个全屏视图时，我都会将 mapview 的可见性设置为消失。

# c++ - 在数组c ++中减去两个长正整数

> ID：14875445
> 
> 赞同：2
> 
> 时间：2013-02-14T13:01:13.920
> 
> 标签：c++, arrays, math, subtraction

我对编程比较陌生:)。

假设我想创建一个程序，提示用户输入两个最长为 50 位的正数，然后从第一个数字中减去第二个数字。

*例如：*

**用户输入第一个正数：** 239834095803945862440385983452184985298358

**第二个号码：** 939542309853120721934217021372984729812

==================================================== ==========================

**程序输出差异：** 238894553494092741718901766430812000568564

或者，**如果为负：** -29837430045

==================================================== ==========================

数字的每个数字都将作为单独的元素存储在数组中。这是我目前接受用户输入的方式：

```
int read_array(int int_array[], int MAX_SIZE) {
    char number;
    int count = 0;
    //set all array entries to 0\. 
    for (int i = 0; i < MAX_SIZE; i++){
        int_array[i] = 0;
    }

    do { //processes each individual char in the istream
        cin.get(number);
        // puts char on to the array until it hits the
        // end of the number (end of the line)
        if(( number != '\n') && (count < MAX_SIZE) && (isdigit(number))) {
            int_array[count] = int(number) - int('0');
        }  
        count++; //increments count
    } while (number != '\n');

    //tests if number is too large
    int digitcount = count - 1;
    if (digitcount > MAX_SIZE) {
        cout << endl << "ERROR: The number is above 50 digits!" << endl;
        return 0;
    } 
```

**问题：**

**如何**做减法让我望而却步。我已经尝试解决这个问题两周了，这很可能是我错过的一些微不足道的事情。

我试过了：

1.  将元素数组转换回一个完整的 int
2.  编写我自己的程序来对数字进行长减法

ETC...

但是，只有在达到一定数量的数字和/或它们是正数/负数之前，输出才会成功。我很困惑，我不确定最好的方法是减去两个正数数组以获得可以容纳正数和负数的成功输出，如示例所示。非常感谢任何帮助:)。

编辑：我的尝试：

```
#include "long_sub.h"
#include <sstream>
#include <vector>

using namespace std;

int long_sub(int a[], int b[], const int size) {
    stringstream ss;
    int const sizes = 50;
    int c = 0; //borrow number
    int borrow = 1; // the '1' that gets carried to the borrowed number
    int r[sizes];

    for (int i = 0; i < size; i++) {
        r[i] = 0;
    }    
    //initialise answer array to 0.
    for (int i = size - 1; i >= 0; i--) {
        //handles zeros
        if (a[i] < b[i] && a[i]) {
            //takes the borrow from the next unit and appends to a.
            ss << borrow << a[i];
            ss >> c;
            ss.clear(); // clears stringstream for next potential borrow.

            int temp = c - b[i];
            r[i] = abs(temp);
        } else {
            int temp = a[i] - b[i];
            r[i] = abs(temp);
        }
    }

    for (int i = 0; i <= size - 1; i++ ) {
        cout << r[i];
    }
    cout << endl;
    return r[sizes];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:07:03.853

所以解决这个问题的方法和你手动做的差不多。

如果我们有：

```
 4321
-1234 
```

你会取两个数字的最后一位，从上面的一位中减去下面的一位，`1 - 4`这当然意味着你必须从下一位开始借用，所以我们记住这一点，然后得出 7。现在，取下一个数字[并记住“借位”]，然后从 2-1 = 8 中减去 3。

完全相同的事情是你如何在计算机中对大数进行减法 - 一次做一点，如果你“借”，那么你需要把它带到下一步。

# python - 如何训练单目标识别？

> ID：14875450
> 
> 赞同：0
> 
> 时间：2013-02-14T13:01:32.190
> 
> 标签：python, language-agnostic, machine-learning, object-recognition, pybrain

我正在考虑做一个小项目，涉及使用某种机器学习识别简单的二维对象。我认为最好让每个网络都专门用于识别一种类型的对象。所以这是我的两个问题：

1.  我应该使用什么样的网络？我能想到的两个可行的是简单的前馈网络和 Hopfield 网络。由于我还想知道输入看起来像目标多少，因此 Hopfield 网络可能不适合。

2.  如果我使用需要监督学习的东西并且我只想要一个输出单元来指示输入与目标的相似程度，那么在训练过程中我应该展示哪些反例？只是给它正面的例子，我很确定它不会起作用（网络只会学会总是说“是”）。

图像将是低分辨率和黑白的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:59:58.047

首先，关于要使用的分类方法的说明。如果您打算将图像像素本身用作特征，则神经网络可能是一种合适的分类方法。在这种情况下，我认为训练相同的网络来区分各种对象可能是一个更好的主意，而不是为每个对象使用单独的网络，因为它可以让网络专注于最具辨别力的特征。

但是，如果您打算从图像中提取合成特征并基于它们进行分类，我建议您考虑其他分类方法，例如 SVM。原因是神经网络通常有很多参数需要设置（例如网络大小和架构），使得构建分类器的过程更长更复杂。

特别是关于您与 NN 相关的问题，我建议使用前馈网络，该网络相对容易构建和训练，带有 softmax 输出层，允许为各种类分配概率。如果您使用单个网络进行分类，则有关反例的问题是无关紧要的；对于每个类，其他类将是它的反面例子。如果您决定使用不同的网络，您可以使用相同的反例（即其他类），但根据经验，我建议每个正例显示不超过 2-10 个负例。

编辑：根据下面的评论，问题似乎是确定给定图像（绘图）与给定概念的拟合程度，例如用户提供的树图与树的相似程度。

在这种情况下，我会建议一种完全不同的方法：从每张图纸中提取视觉特征，并根据所有过去用户提供的图纸及其分类（可能加上您生成的预定义集）执行 knn 分类。您可以通过与同类示例的名义距离或最接近匹配的类分布来对相似度进行评分。

我知道这不一定是您要问的，但在我看来，这似乎是一种更简单、更直接的方法，尤其是考虑到示例和类的数量预计会不断增长的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:25:21.323

玩一下[FindObject](http://code.google.com/p/find-object/)，看看您是否喜欢使用[OpenCV](http://opencv.org/)使用特征检测/描述进行对象检测。如果看起来很匹配，那么您可以尝试 opencv 包中包含的 find_obj.py 演示。

然而，我发现演示非常混乱，因为我还不熟悉底层概念。[我做了一个更线性的演示，如果你想在 github 上查看它，它会说明](https://github.com/kobejohn/python_brisk_demo)并指出一些陷阱。

# c# - WPF 中的多种变换效果

> ID：14875452
> 
> 赞同：12
> 
> 时间：2013-02-14T13:01:41.007
> 
> 标签：c#, .net, wpf, xaml, transform

我需要在 WPF 中通过 c# 应用多重变换效果。

我已经尝试了下面的代码，但我只看到了最后一个效果，而不是两者一起。

有什么线索可以吗？

**XAML**

```
<Grid>
   <Rectangle Fill="#FFF4F4F5" Name="rect" HorizontalAlignment="Left" Height="225" Margin="84,39,0,0" Stroke="Black" VerticalAlignment="Top" Width="299"/>
</Grid> 
```

**C＃**

```
SkewTransform skewTransform1 = new SkewTransform(45, 0, -50, 50);
rect.RenderTransform = skewTransform1;

RotateTransform rotateTransform  = new RotateTransform(30);
rect.RenderTransform = rotateTransform; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-14T13:03:13.737

您必须将两种效果组合在一起，`TransformGroup`而不是每次都覆盖它们：

```
var transformGroup = new TransformGroup(); 
var skewTransform = new SkewTransform(45, 0, -50, 50); 
var rotateTransform = new RotateTransform(30); 

transformGroup.Children.Add(skewTransform); 
transformGroup.Children.Add(rotateTransform); 

rect.RenderTransform = transformGroup; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-14T13:12:31.590

如果您不使用按钮或其他机制来应用转换，则可以仅在 XAML 中定义它

```
 <Rectangle Fill="#FFF4F4F5"
               Name="rect"
               HorizontalAlignment="Left"
               Height="225"
               Margin="84,39,0,0"
               Stroke="Black"
               VerticalAlignment="Top"
               Width="299">
        <Rectangle.RenderTransform>
            <TransformGroup>
                <SkewTransform AngleX="45"
                               AngleY="0"
                               CenterX="-50"
                               CenterY="50" />
                <RotateTransform Angle="30" />
            </TransformGroup>
        </Rectangle.RenderTransform>
    </Rectangle> 
```

如果添加触发器部分，则可以使其具有交互性。

```
 <Rectangle Fill="#FFF4F4F5"
               Name="rect"
               HorizontalAlignment="Left"
               Height="225"
               Margin="84,39,0,0"
               Stroke="Black"
               VerticalAlignment="Top"
               Width="299">
        <Rectangle.RenderTransform>
            <TransformGroup>
                <SkewTransform AngleX="45"
                               AngleY="0"
                               CenterX="-50"
                               CenterY="50" />
                <RotateTransform x:Name="RotateTransform"
                                 Angle="0" />
            </TransformGroup>
        </Rectangle.RenderTransform>
        <Rectangle.Triggers>
            <EventTrigger RoutedEvent="Rectangle.MouseDown">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="RotateTransform"
                                         Storyboard.TargetProperty="Angle"
                                         To="360"
                                         Duration="0:0:5"
                                         FillBehavior="Stop" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Rectangle.Triggers>
    </Rectangle> 
```

# sql - 如何限制oracle中的列只支持字符？

> ID：14875462
> 
> 赞同：2
> 
> 时间：2013-02-14T13:02:11.233
> 
> 标签：sql, oracle, oracle11g

我需要创建一个具有列数的表，其中一列是 varchar2 类型。现在问题是我需要设置该特定列应该只支持字母表。我已经尝试过这段代码，但是没有成功，任何人都可以帮助我！
提前致谢！

```
CREATE TABLE test_1
(
  test_id number,
  test_name varchar(50),
  CONSTRAINT name_test
  CHECK (test_name where regexp_like(test_name,'^([aA-zZ])+$'))
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:07:51.963

尝试：

```
CREATE TABLE test_1
(
  test_id number,
  test_name varchar(50),
  CONSTRAINT
    name_test
    CHECK (
      regexp_like(test_name,'^([aA-zZ])+$')
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:08:43.027

你很接近，只需使用函数（返回真/假）。

```
CREATE TABLE z_test_1
(
  test_id number,
  test_name varchar(50),
  CONSTRAINT name_test
  CHECK (regexp_like(test_name,'^([aA-zZ])+$'))
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:18:30.060

[http://www.dba-oracle.com/t_regular_expressions_constraints_updates_columns.htm](http://www.dba-oracle.com/t_regular_expressions_constraints_updates_columns.htm)

```
...CHECK (regexp_like(test_name,'^[[:alpha:]]+$') ) 
```

# jqgrid - 选择列表未在 jqgrid 4.4.4 中填充 dataurl

> ID：14875464
> 
> 赞同：1
> 
> 时间：2013-02-14T13:02:14.937
> 
> 标签：jqgrid, jqgrid-asp.net

我刚刚从 jqgrid 3.6.5 移动到网格的 4.4.4 版本。问题是我的选择列表没有填充 dataUrl 选项和 edittype 选择。请看下图 ![在此处输入图像描述](../Images/22ab3dd74cb3c1b69b37e36ed6fc9837.png)
从图中可以看到，grid 已经向 GetManager 和 GetTerritory 发送了两个 ajax 请求，但是结果数据没有显示在选择列表中。我添加了语言文件 jqgrid.min.js 和 grid.formedit.js。以下是其中一种列模型的代码

```
{ name: 'ManagerId',
                            //sortable: true,
                            index: 'ManagerId',
                            //width: 50,
                            hidden:true,
                            align: 'center',
                            formatter: 'mail',
                            editable: true,
                            edittype: 'select',
                            editoptions: {aysnc:false, dataUrl: '@Url.Action("GetManagers", "Employee")',
                                buildSelect: function (data) {
                                    var response = jQuery.parseJSON(data.responseText);

                                    var s = '<select>';
                                    s += '<option value="0">--No Manager--</option>';
                                    $($.parseJSON(data.responseText)).map(function () {

                                        s += '<option value="' + this.EmployeeId + '">' + this.EmployeeName + '</option>';
                                    });

                                    return s + "</select>";
                                }
                            },
                            editrules: { required: true,edithidden:true },
                            formoptions: { elmsuffix: ' *',label:'Manager' }
                        }, 
```

任何人都可以建议它有什么问题。

**编辑 1 个**
服务器响应

```
[{"EmployeeId":2,"EmployeeName":"Jack"},{"EmployeeId":4,"EmployeeName":"xe"},{"EmployeeId":1001,"EmployeeName":"John"},{"EmployeeId":2000,"EmployeeName":"Jack"},{"EmployeeId":2001,"EmployeeName":"Jill"}] 
```

响应标头

```
Cache-Control   private
Connection  Close
Content-Length  203
Content-Type    application/json; charset=utf-8
Date    Thu, 14 Feb 2013 13:20:09 GMT
Server  ASP.NET Development Server/10.0.0.0
X-AspNet-Version    4.0.30319
X-AspNetMvc-Version 3.0 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:03:32.693

首先，我建议您检查回调`data`内部的参数类型。`buildSelect`取决于其他一些因素，`data`可能已经是从 JSON 响应中解析的对象。你可以只包括`alert(typeof data.responseText);`在开头`buildSelect`。或者，您可以使用[jQuery.isArray](http://api.jquery.com/jQuery.isArray/)来验证`data`参数是否已经是数据数组或需要使用`jQuery.parseJSON`将输入数据转换为数组。

下一个问题是您使用[jQuery.map](http://api.jquery.com/jQuery.map/)而不是[jQuery.each](http://api.jquery.com/jQuery.each/)。所以代码可能是关于以下内容

```
buildSelect: function (response) {
    var data = typeof response === "string" ?
                   $.parseJSON(response.responseText) : response,
        s = "<select>";

    s += '<option value="0">--No Manager--</option>';
    $.each(data, function () {
        s += '<option value="' + this.EmployeeId + '">' + this.EmployeeName +
           '</option>';
    }
    return s + "</select>";
} 
```

您应该另外修复`aysnc:false`. `editoptions`这些选项是未知的，将被忽略。

# cmake - 预安装代码

> ID：14875465
> 
> 赞同：3
> 
> 时间：2013-02-14T13:02:20.973
> 
> 标签：cmake

有没有类比

```
install(CODE ...) # this code is executing AFTER install step 
```

cmake中的预安装步骤？

我想在 POST_BUILD 步骤中执行代码，但是如何运行此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:15:59.673

实际上，`install(CODE)`and`install(SCRIPT)`是按照它们在其他`install()`命令中出现的顺序执行的，所以如果您的调用`install(CODE)`是第一个`install()`调用，它将在所有其他安装命令之前执行。

请注意，上述顺序（`install()`按出现顺序执行的命令）适用于一个安装组件和一个 CMakeList 文件中的命令（感谢[@John](https://stackoverflow.com/users/2414411/john)在评论中指出这一点）。尽管如此，对于预期的“预安装”步骤，将命令放在第一个 CMakeList 中的第一位应该仍然有效。

# xamarin.ios - 无法识别的选择器发送到 UITableViewCell AccessoryView 中的实例

> ID：14875467
> 
> 赞同：0
> 
> 时间：2013-02-14T13:02:25.470
> 
> 标签：xamarin.ios, monotouch.dialog

我正在尝试向我的`UITableViewCell`.

我将一个 StringElement 子类化并添加一个`UIImageView`作为我的 Cell AccessoryView。

为了使它可触摸，我添加了一个，`UITapGestureRecognizer`但每次我尝试这个时，我都会遇到同样的异常。

我的 GestureRecognizer 和 ImageView 在 StringElement 的类级别声明。
我究竟做错了什么？

我的代码：

```
public class PrioritizeAndAddElement : StringElement
{
    NSAction Plus;
    UITapGestureRecognizer tap;
    UIImageView image;

    public PrioritizeAndAddElement (string caption, NSAction select, NSAction plus) : base(caption, select)
    {
        Plus = plus;
    }

    public override UITableViewCell GetCell (UITableView tv)
    {   
        UITableViewCell cell = base.GetCell(tv);
        image = new UIImageView(new UIImage("images/app/greenbutton.png"));
        image.UserInteractionEnabled = true;
        image.Frame = new RectangleF(cell.Frame.Width - 65, 14, 25, 25);
        cell.AccessoryView = image;
        tap = new UITapGestureRecognizer(image, new Selector("tapped"));
        image.AddGestureRecognizer(tap);
        return cell;
    }

    [Export("tapped")]
    public void tapped(UIGestureRecognizer sender){
        if(Plus != null)
            Plus();
    }
} 
```

就这样。我抓住单元格并将图像和识别器添加到它。在这种情况下，什么都不会发生。

当我将识别器添加到我的 TableView 时，我会得到异常。

我添加了我的元素的整个类。我希望这有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:48:22.197

问题在于

```
tap = new UITapGestureRecognizer(>>>image<<<, new Selector("tapped")); 
```

手势识别器的目标是图像，您在 PrioritizeAndAddElement 类中定义了 tapped。尝试这样的事情

```
public class TappableImageView : UIImageView
{
    NSAction Plus;

    public TappableImageView(NSAction plus, UIImage img) : base(img)
    {
        this.Plus = plus;
    }

    [Export("tapped:")]
    public void Tapped(UIGestureRecognizer sender)
    {
        if(Plus != null)
            Plus();
    }
}

...

image = new TappableImageView(new UIImage("images/brushTexture1.png")); 
```

# linux - 如何使用 lftp 的镜像命令下载隐藏的点目录

> ID：14875468
> 
> 赞同：2
> 
> 时间：2013-02-14T13:02:31.570
> 
> 标签：linux, lftp

我不知道如何使用 lftp 的镜像命令下载隐藏的点目录

我现在只能用 get 命令获取一个点文件，然后用 ls -a 命令列出隐藏文件。

这个可以配置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T19:40:05.357

lftp -u 用户名，密码 hostname.com -e "set ftp:list-options -a"

镜子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:04:43.267

从手册：

[http://linux.die.net/man/1/lftp](http://linux.die.net/man/1/lftp)

```
 ftp:list-options (string)
          sets options which are always appended to LIST command. 
          It can be useful to set this to `-a' if server does not
          show dot (hidden) files by default.  Default is empty. 
```

# c# - RegularExpressionValidator 中的 ValidationExpression

> ID：14875470
> 
> 赞同：1
> 
> 时间：2013-02-14T13:02:31.217
> 
> 标签：c#, javascript, asp.net

我有这样的电子邮件验证正则表达式

```
 <asp:TextBox ID="TxtEmail" runat="server"></asp:TextBox>
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server"
 ControlToValidate="TxtEmail" ErrorMessage="*" ForeColor="#007528" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([.]\w+)*">      </asp:RegularExpressionValidator> 
```

它不接受以下邮件地址：`test-1-@hotmail.com`

如何编辑正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:14:23.567

检查这个：[电子邮件正则表达式](http://regexlib.com/Search.aspx?k=email&c=-1&m=5&ps=20)

例如。

```
<asp:TextBox ID="TxtEmail" runat="server"></asp:TextBox>
 <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server"
 ControlToValidate="TxtEmail" ErrorMessage="*" ForeColor="#007528" 
 ValidationExpression="^[a-zA-Z0-9\\_\\-]+[a-zA-Z0-9\\.\\_\\-]*@([a-zA-Z0-9\\_\\-]+\.)+([a-zA-Z]{2,4}|travel|museum)$"></asp:RegularExpressionValidator> 
```

试试这个： **电子邮件正则表达式：**

```
^[a-zA-Z0-9\_\-]+[a-zA-Z0-9\.\_\-]*@([a-zA-Z0-9\_\-]+\.)+([a-zA-Z]{2,4}|travel|museum)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:22:27.057

我认为在 ASP.Net 中，Visual Studio 为您提供了一些常用正则表达式验证的选择，例如电话号码和电子邮件。对于电子邮件，我使用下面的正则表达式，它适用于您的示例：

```
^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:32:51.683

你的正则表达式的问题是不接受 -+。' 如果不伴随字母数字字符，再加上您接受其他内容，例如`asdf@asd.cl#safd`在 # 字符之前作为有效字符串，您可以使用表达式`^\w+([-+.']+\w*)*@\w+([-.]\w+)*\.\w+([.]\w+)+$`我在开头和结尾添加行首和行尾，并更改`([-+.']+\w+)`为`([-+.']+\w*)`接受零个或多个字母数字字符。我希望这会有所帮助。

# magento - MAGENTO - 按名称或品牌排序，以行分隔

> ID：14875473
> 
> 赞同：0
> 
> 时间：2013-02-14T13:02:39.130
> 
> 标签：magento

我想知道是否可以按品牌名称或其他属性对 MAGENTO 中的产品（而不是过滤器）进行排序，并以某种方式分隔（分隔），就像在这个例子中一样：

[http://www.fashionvictim.ro/barbati/imbracaminte/pulovere.html](http://www.fashionvictim.ro/barbati/imbracaminte/pulovere.html)

如果可能的话，这样做的代码是什么？

谢谢

# git - 来自linux的windows git克隆

> ID：14875476
> 
> 赞同：0
> 
> 时间：2013-02-14T13:02:52.407
> 
> 标签：git, cygwin, git-clone

我已经在我的 Windows 上安装了 Cygwin 终端。我尝试使用以下命令克隆我们在 linux 服务器上的 git 存储库：

```
$ git clone ssh://some.server.com/somename
Cloning into 'somename'...
ituser3@some.server.com's password: 
```

我知道服务器中有 SSL 证书。

没有密码怎么连接？它如何考虑服务器上的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:09:07.097

[从mathias kettner 的教程](http://linuxproblem.org/art_9.html)中复制并粘贴

首先以用户 a 登录 A 并生成一对认证密钥。不要输入密码：

```
a@A:~> ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/a/.ssh/id_rsa): 
Created directory '/home/a/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/a/.ssh/id_rsa.
Your public key has been saved in /home/a/.ssh/id_rsa.pub.
The key fingerprint is:
3e:4f:05:79:3a:9f:96:7c:3b:ad:e9:58:37:bc:37:e4 a@A 
```

现在使用 ssh 在 B 上以用户 b 的身份创建一个目录 ~/.ssh。（该目录可能已经存在，这很好）：

```
a@A:~> ssh b@B mkdir -p .ssh
b@B's password: 
```

最后将 a 的新公钥附加到 b@B:.ssh/authorized_keys 并最后一次输入 b 的密码：

```
a@A:~> cat .ssh/id_rsa.pub | ssh b@B 'cat >> .ssh/authorized_keys'
b@B's password: 
```

从现在开始，您可以从 A 以 b 身份登录 B，而无需密码：

```
a@A:~> ssh b@B hostname
B 
```

# arrays - 如何在 vba 函数中返回数组（）以在单元格中使用它 数组公式（矩阵公式）：用于在多个单元格中拆分文本

> ID：14875480
> 
> 赞同：4
> 
> 时间：2013-02-14T13:03:05.730
> 
> 标签：arrays, excel, split, excel-formula, vba

我正在用 VBA 编写一个函数以在 excel 公式中使用，如果我的函数返回单个值就可以了：

```
=MYVALUE(A1) 
```

现在我编写了另一个返回 Array(1,2,3,4,...) 的函数，并将我的 excel 公式替换为 Array 公式：

```
{=MYARRAY(A1)} 
```

但是当我拉伸公式时，所有单元格都会显示*我的数组的第一个值*。为什么 ？

这是我的 VBA 源代码（complement.xlam）：

```
Function MYVALUE(x as integer)
    MYVALUE = 123
End Eunction

Function MYARRAY(x as integer)
    MYARRAY = Array(10,20,30)
End Eunction 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T16:59:42.480

数组公式需要这样使用

我的 VBA 在多个单元格中拆分文本

```
Function EXPLODE_V(texte As String, delimiter As String)
    EXPLODE_V = Application.WorksheetFunction.Transpose(Split(texte, delimiter))
End Function
Function EXPLODE_H(texte As String, delimiter As String)
    EXPLODE_H = Split(texte, delimiter)
End Function 
```

1.  选择`C3:C7`定义矢量方向的区域。
2.  按下`F2`可现场编辑并键入以下公式：`=EXPLODE_V($B$3;" ")`
3.  按`CTRL`+ `SHIFT`+ `ENTER`（*而不是通常的`ENTER`*） - 这将定义一个 ARRAY 公式并在`{=EXPLODE_V($B$3;" ")}`其周围产生括号（但不要手动输入它们！）。

    ![拆分单元格文本样本](../Images/f8487c50a2cf9be04632a7b39b4ed9de.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T16:35:14.400

原因是你的向量实际上是水平显示的，如果你水平创建一个数组公式，你会得到你的数字。为了让你有一个垂直向量，请使用以下内容：

```
Function MYARRAY(x As Integer)

    MYARRAY = Application.WorksheetFunction.Transpose(Array(10, 20, 30))

End Function 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-14T13:33:45.267

单元格不会显示数组，您必须将该数组转换为工作表上的单元格范围/数组。或者，您可以尝试将数组转换为分隔字符串，只要您不使用非常大的数组，它就可以工作。

```
Public Function MYARRAY(x As Integer)

Dim tmpArray() As Variant
Dim i As Long
Dim arrayString As String

tmpArray = Array(10, 20, 30)

For i = LBound(tmpArray) To UBound(tmpArray)
    If arrayString = vbNullString Then
        arrayString = tmpArray(i)
    Else:
        arrayString = arrayString & ", " & tmpArray(i)
    End If
Next

MYARRAY = "{" & arrayString & "}"

End Function 
```

# sql-server - 我希望我的数据库 (SQL) 通知或推送更新到客户端应用程序

> ID：14875483
> 
> 赞同：23
> 
> 时间：2013-02-14T13:03:11.240
> 
> 标签：sql-server, push-notification, service-broker, sqldependency, query-notifications

`VB.net 2010`我在和上开发这个应用程序`SQL 2008`。
我希望通知客户端有关数据库的更新，并且应用程序用于使用计时器检查数据库在指定分钟内的更改，这确实效率不高。我阅读了有关`query notification`, `sqldependency`,的内容`service broker`，但后来我读到一些内容，说如果我有 100 个客户端并且我正在使用查询通知将通知推送到我的应用程序，它们可能效率不高。
有人会帮助我应该做什么，以及我该怎么做（如果有示例，那将非常有帮助）。提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T13:20:18.303

查询通知将推送到 Service Broker 服务，而不是直接推送到您的应用程序。请参阅[神秘通知](http://rusanu.com/2006/06/17/the-mysterious-notification/)以了解其工作原理。*您的应用程序正在通过在数据库上*[`WAITFOR(RECEIVE)`](http://msdn.microsoft.com/en-us/library/ms186963.aspx)发布语句来等待通知。这意味着 100 个客户端中的每一个都占用一个 SQL Server 工作线程（这是有限的，请参阅选项）。我已经看到这在生产中与 +1000 个客户一起工作（在提高了最大工作线程选项之后），但我建议*不*要这样做。*[`max worker threads`](http://msdn.microsoft.com/en-us/library/ms187024%28v=sql.105%29.aspx)*

 **我的建议是使用 SqlDependency/QueryNotifications 对更改进行**一项**服务监控。然后，该服务将使用 WCF 将通知推送到所有正在运行的应用程序。您将订阅通用更改 ( `the table Foo was changed`)，而不是特定更改 ( `the row x in table Foo was inserted`)。

作为一般规则，SqlDependency/Query Notifications 只能通知您数据已更改，但不会推送*新*数据。一旦收到通知，应用程序必须通过再次运行查询来刷新其本地数据集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-23T12:20:56.287

小心使用[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)类 - 它[存在](https://stackoverflow.com/questions/8511806/how-do-i-clean-sqldependency-from-sql-server-memory/)内存泄漏问题。但是，您可以使用 SqlDependency 类的开源实现 - [SqlDependencyEx](https://github.com/dyatchenko/ServiceBrokerListener/blob/master/ServiceBrokerListener/ServiceBrokerListener.Domain/SqlDependencyEx.cs)。它使用数据库触发器和本机 Service Broker 通知来接收有关表更改的事件。这是一个使用示例：

```
int changesReceived = 0;
using (SqlDependencyEx sqlDependency = new SqlDependencyEx(
          TEST_CONNECTION_STRING, TEST_DATABASE_NAME, TEST_TABLE_NAME)) 
{
    sqlDependency.TableChanged += (o, e) => changesReceived++;
    sqlDependency.Start();

    // Make table changes.
    MakeTableInsertDeleteChanges(changesCount);

    // Wait a little bit to receive all changes.
    Thread.Sleep(1000);
}

Assert.AreEqual(changesCount, changesReceived); 
```

使用 SqlDependecyEx，您可以只监控 UPDATE，避免 DELETE 和 INSERT。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T05:59:35.260

如果您不手动更新数据库并且所有数据操作都在您的应用程序中，您应该检测应用程序服务层或业务层而不是db的变化，以防您依赖数据库技术并且很难访问其他数据库。另一方面，如果您手动更新 db 或对 db 的依赖并不重要，您可以使用 CDC（chane 数据捕获）并将更改推送到服务代理，您的应用程序从服务代理弹出更改，然后通过双向 http 通信技术将它们发送到客户端与 SignalR 相同。**

# javascript - .动画到一个元素

> ID：14875488
> 
> 赞同：0
> 
> 时间：2013-02-14T13:03:28.567
> 
> 标签：javascript, jquery

我正在使用此功能进行动画悬停：

```
 function lookbookhover(){
        var lookbook = $('.lookbook_info')
        lookbook.bind({
            'mouseenter' : function(){
                lookbook_animate(200)
            },
            'mouseleave' : function(){
                lookbook_animate(30)
            }
        })
    }
    function lookbook_animate(h){
        $('.lookbook_info').animate({
            height: h
        }, 300 );
    } 
```

我遇到的问题是，当用户悬停一个项目（.lookbook_info）时，它会为页面上的所有其他 .lookbook_info 设置动画，我怎么能指向只为一个元素设置动画？

我知道它正在使用 $(this) 但我还没有得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:07:29.943

只需将元素传递给函数：

```
function lookbookhover(){
    $('.lookbook_info').on({
        mouseenter : function(){
            lookbook_animate(this, 200);
        },
        mouseleave : function(){
            lookbook_animate(this, 30);
        }
    });
}
function lookbook_animate(elem, h){
    $(elem).stop(true,true).animate({
        height: h
    }, 300 );
} 
```

[**示范**](http://jsfiddle.net/juxEG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:05:38.593

`$(this)`如果您想指向发生事件的元素，或者如果您想选择特定元素，例如可能是第一个、最后一个或第 n 个子元素，则可以使用：

```
$(element:first)

$(element:last)

$(element:nth-child(2)) 
```

您需要`this`作为参数传递给该函数。

# javascript - 在流星中实现更多负载的最佳实践

> ID：14875489
> 
> 赞同：4
> 
> 时间：2013-02-14T13:03:31.233
> 
> 标签：javascript, lazy-loading, meteor

我想要一个包含 10 个项目的列表，在列表的底部应该有一个加载更多按钮。单击时，它将另外十个项目添加到列表中。

我已经想出了一个跟踪限制属性的会话。但问题是流星然后重新加载完整列表，而不是仅仅添加另一个 10 ..

我会非常感谢一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T20:55:05.897

这个智能包提供了一种简单的分页方法：

[https://github.com/tmeasday/meteor-paginated-subscription](https://github.com/tmeasday/meteor-paginated-subscription)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T15:57:18.450

为了将来参考，Meteor 中最完整的分页解决方案看起来是**meteor-pages**：

[https://github.com/alethes/meteor-pages](https://github.com/alethes/meteor-pages)

它还提供 UI 组件和 Iron Router 集成。如果您只是在寻找没有页面导航的无限滚动，那么更简单的**流星分页订阅**可能非常适合您：

[https://github.com/tmeasday/meteor-paginated-subscription](https://github.com/tmeasday/meteor-paginated-subscription)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:42:56.770

你看过保护区吗？那应该这样做。

[http://docs.meteor.com/#template_preserve](http://docs.meteor.com/#template_preserve)

# batch-file - 删除 /F 末尾的空格

> ID：14875490
> 
> 赞同：4
> 
> 时间：2013-02-14T13:03:30.877
> 
> 标签：batch-file, command, dos

大家好，我正在尝试`FOR /F`在批处理文件中使用该命令，但遇到了问题。

我运行它....

```
rem finding model number
for /F "delims= skip=1 tokens=*" %%a in ('wmic csproduct get name') do if not defined model set model=%%a 
```

而且效果很好，我得到了我想要的结果

```
result: 637263G 
```

现在假设我在 c:\windows\ 下创建了一个名为“637263G”的文件夹

```
eg:c:\windows\637263G\test 
```

我创建了一批去路径......

```
for /F "skip=1 tokens=*" %%a in ('wmic csproduct get name') do if not defined model set model=%%a

cd windows\%model%\test 
```

...................................

这是因为 %model% 正在返回 `"c:\windows\637263G \test"`而不是`"c:\windows\637263G\test"`

它在模型名称后留下一个空格。

有谁知道怎么去掉后面的空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:23:54.757

您不应该像某些答案所建议的那样删除所有空格，因为某些计算机在值的中间有空格。请参阅[WMIC CSProduct 获取名称结果列表](http://www.faqshop.com/wp/misc/wmi/list-of-wmic-csproduct-get-name-results)。

我不仅得到多个尾随空格，而且还得到一个尾随回车符 ( `<CR>`)，这是 WMIC 的 unicode 输出自动转换为 ASCII 的产物。

`<CR>`可以通过将值传递给另一个 FOR /F 循环来删除尾随。这也删除了幻影“空白”行（实际上是 a `<CR>`），因此不再需要 IF 语句。

然后可以使用`~nx`修饰符删除尾随空格。这是有效的，因为文件名不能以空格或点结尾，并且会被操作系统自动删除。修饰符通过删除尾随的点和空格来规范化“文件名”。`\`如果该值包含、`/`、`*`或`?`，或者如果它以一个字母开头后跟 ，这将无法正常工作`:`。

```
for /F "skip=1 delims=" %%A in (
  'wmic csproduct get name'
) do for /f "delims=" %%B in ("%%A") do set "model=%%~nxB" 
```

另一种选择是使用 wmz 对 CSV 格式的建议，但我仍然必须删除结尾的`<CR>`.

```
for /F "skip=2 tokens=2 delims=," %%A in (
  'wmic csproduct get name /format:csv'
) do for /f "delims=" %%B in ("%%A") do set "model=%%B" 
```

**编辑 - 为什么 wmz 解决方案似乎可以工作，而无需剥离`<CR>`**

问题可能并不明显，这`<CR>`取决于您在`model`设置变量后如何访问该变量。正常扩展会剥离任何`<CR>`，但延迟扩展会保留它。

```
@echo off
setlocal enableDelayedExpansion
for /f "skip=2 tokens=2 delims=," %%A in (
  'wmic csproduct get name /format:csv'
) do set "model=%%A"
echo    Normal expansion strips ^<CR^>:     [%model%]
echo    Delayed expansion preserves ^<CR^>: [!model!] 
```

- - 输出 - -

```
 Normal expansion strips <CR>:     [LX4710-01]
]  Delayed expansion preserves <CR>: [LX4710-01 
```

**编辑 - 避免`<CR>`问题的另一种方法**

您可以使用 CSV 格式并请求出现在所需值之后的额外属性。当`<CR>`您解析出所需的令牌时，将与额外的值一起丢弃。

```
for /f "skip=2 tokens=2 delims=," %%A in (
  'wmic csproduct get name^,vendor /format:csv'
) do set "model=%%A" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:28:48.753

您可以使用替换来抑制 %%a 中的所有空间：

```
set a=%a: =% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T19:24:14.540

除了修剪返回字符串（如前所述）之外，您还可以重新格式化 wmic 输出，使其不返回填充（空格），例如：

`for /f "skip=2 tokens=2 delims=," %%a in ('wmic csproduct get name /format:csv')`

如果您想返回超过 1 列，这将特别方便。
*（它将按原样返回数据，因此如果包含尾随空格，它将被保留。如果要无条件修剪空格，请使用变量替换）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T13:40:39.487

就像 Kayasax 建议的那样，您可以使用变量替换。
但这仅适用于*普通*变量，不适用于 %1 或 for 循环参数。

```
set "model=%model: =%" 
```

或者，如果您确定 wmic 总是附加一个空格，您也可以使用

```
set "model=%model:~0,-1%" 
```

这仅删除最后一个字符

# r - LDA 与 topicmodels，我如何查看不同文档属于哪些主题？

> ID：14875493
> 
> 赞同：19
> 
> 时间：2013-02-14T12:22:32.600
> 
> 标签：r, lda, topic-modeling, tm

我正在使用 topicmodels 包中的 LDA，我已经在大约 30.000 个文档上运行它，获得了 30 个主题，并获得了主题的前 10 个单词，它们看起来非常好。但是我想看看哪些文档属于哪个主题的概率最高，我该怎么做？

```
myCorpus <- Corpus(VectorSource(userbios$bio))
docs <- userbios$twitter_id
myCorpus <- tm_map(myCorpus, tolower)
myCorpus <- tm_map(myCorpus, removePunctuation)
myCorpus <- tm_map(myCorpus, removeNumbers)
removeURL <- function(x) gsub("http[[:alnum:]]*", "", x)
myCorpus <- tm_map(myCorpus, removeURL)
myStopwords <- c("twitter", "tweets", "tweet", "tweeting", "account")

# remove stopwords from corpus
myCorpus <- tm_map(myCorpus, removeWords, stopwords('english'))
myCorpus <- tm_map(myCorpus, removeWords, myStopwords)

# stem words
# require(rJava) # needed for stemming function 
# library(Snowball) # also needed for stemming function 
# a <- tm_map(myCorpus, stemDocument, language = "english")

myDtm <- DocumentTermMatrix(myCorpus, control = list(wordLengths=c(2,Inf), weighting=weightTf))
myDtm2 <- removeSparseTerms(myDtm, sparse=0.85)
dtm <- myDtm2

library(topicmodels)

rowTotals <- apply(dtm, 1, sum)
dtm2 <- dtm[rowTotals>0]
dim(dtm2)
dtm_LDA <- LDA(dtm2, 30) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T21:39:58.397

这个怎么样，使用内置数据集。这将向您显示哪些文档属于哪个主题的概率最高。

```
library(topicmodels)
data("AssociatedPress", package = "topicmodels")

k <- 5 # set number of topics
# generate model
lda <- LDA(AssociatedPress[1:20,], control = list(alpha = 0.1), k)
# now we have a topic model with 20 docs and five topics

# make a data frame with topics as cols, docs as rows and
# cell values as posterior topic distribution for each document
gammaDF <- as.data.frame(lda@gamma) 
names(gammaDF) <- c(1:k)
# inspect...
gammaDF
              1            2            3            4            5
1  8.979807e-05 8.979807e-05 9.996408e-01 8.979807e-05 8.979807e-05
2  8.714836e-05 8.714836e-05 8.714836e-05 8.714836e-05 9.996514e-01
3  9.261396e-05 9.996295e-01 9.261396e-05 9.261396e-05 9.261396e-05
4  9.995437e-01 1.140774e-04 1.140774e-04 1.140774e-04 1.140774e-04
5  3.573528e-04 3.573528e-04 9.985706e-01 3.573528e-04 3.573528e-04
6  5.610659e-05 5.610659e-05 5.610659e-05 5.610659e-05 9.997756e-01
7  9.994345e-01 1.413820e-04 1.413820e-04 1.413820e-04 1.413820e-04
8  4.286702e-04 4.286702e-04 4.286702e-04 9.982853e-01 4.286702e-04
9  3.319338e-03 3.319338e-03 9.867226e-01 3.319338e-03 3.319338e-03
10 2.034781e-04 2.034781e-04 9.991861e-01 2.034781e-04 2.034781e-04
11 4.810342e-04 9.980759e-01 4.810342e-04 4.810342e-04 4.810342e-04
12 2.651256e-04 9.989395e-01 2.651256e-04 2.651256e-04 2.651256e-04
13 1.430945e-04 1.430945e-04 1.430945e-04 9.994276e-01 1.430945e-04
14 8.402940e-04 8.402940e-04 8.402940e-04 9.966388e-01 8.402940e-04
15 8.404830e-05 9.996638e-01 8.404830e-05 8.404830e-05 8.404830e-05
16 1.903630e-04 9.992385e-01 1.903630e-04 1.903630e-04 1.903630e-04
17 1.297372e-04 1.297372e-04 9.994811e-01 1.297372e-04 1.297372e-04
18 6.906241e-05 6.906241e-05 6.906241e-05 9.997238e-01 6.906241e-05
19 1.242780e-04 1.242780e-04 1.242780e-04 1.242780e-04 9.995029e-01
20 9.997361e-01 6.597684e-05 6.597684e-05 6.597684e-05 6.597684e-05

# Now for each doc, find just the top-ranked topic   
toptopics <- as.data.frame(cbind(document = row.names(gammaDF), 
  topic = apply(gammaDF,1,function(x) names(gammaDF)[which(x==max(x))])))
# inspect...
toptopics   
       document topic
1         1     2
2         2     5
3         3     1
4         4     4
5         5     4
6         6     5
7         7     2
8         8     4
9         9     1
10       10     2
11       11     3
12       12     1
13       13     1
14       14     2
15       15     1
16       16     4
17       17     4
18       18     3
19       19     4
20       20     3 
```

那是你想做的吗？

这个答案的提示：[https ://stat.ethz.ch/pipermail/r-help/2010-August/247706.html](https://stat.ethz.ch/pipermail/r-help/2010-August/247706.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-08T18:52:16.303

要查看哪些文档属于主题模型中概率最高的主题，只需使用：

```
topics(lda)
 1     2     3     4     5     6     7     8     9    10    11    12 
 60    41    64    19    94    93    12    64    12    33    59    28 
 13    14    15    16    17    18    19    20    21    22    23    24 
 87    19    98    69    61    18    27    18    87    96    44    65 
 25    26    27    28    29    30    31    32    33    34    35    36 
 98    77    19    56    76    51    47    38    55    38    92    96 
 37    38    39    40    41    42    43    44    45    46    47    48 
 19    19    19    38    79    21    17    21    59    24    49     2 
 49    50    51    52    53    54    55    56    57    58    59    60 
 66    65    41    36    68    19    70    50    54    37    27    77 
```

要查看从所有文档生成的主题，只需使用：

```
terms(lda)
Topic 1      Topic 2      Topic 3      Topic 4      Topic 5 
 "quite"       "food"       "lots"       "come"       "like" 
 Topic 6      Topic 7      Topic 8      Topic 9     Topic 10 
  "ever"     "around"        "bar"      "loved"        "new" 
```

我希望这回答了你的问题！

可能有帮助的外部阅读： [http ://www.rtexttools.com/1/post/2011/08/getting-started-with-latent-dirichlet-allocation-using-rtexttools-topicmodels.html](http://www.rtexttools.com/1/post/2011/08/getting-started-with-latent-dirichlet-allocation-using-rtexttools-topicmodels.html)

*王淑艳*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-21T19:11:56.150

```
ldaGibbs5 <- LDA(dtm,k,method="Gibbs")

#get topics
ldaGibbs5.topics <- as.matrix(topics(ldaGibbs5))
write.csv(ldaGibbs5.topics,file=paste("LDAGibbs",k,"DocsToTopics.csv"))

#get top 10 terms in each topic
ldaGibbs5.terms <- as.matrix(terms(ldaGibbs5,10))
write.csv(ldaGibbs5.terms,file=paste("LDAGibbs",k,"TopicsToTerms.csv"))

#get probability of each topic in each doc
topicProbabilities <- as.data.frame(ldaGibbs5@gamma)
write.csv(topicProbabilities,file=paste("LDAGibbs",k,"TopicProbabilities.csv")) 
```

# sql - 使用嵌套的 case 语句有点像循环？

> ID：14875494
> 
> 赞同：1
> 
> 时间：2013-02-14T13:03:41.350
> 
> 标签：sql, oracle, oracle10g, nested, case

```
TASKS         DATE
NOD 1 OUT     2/5/10
NOD 1 IN      NULL 
NOD 2 OUT     2/10/10
NOD 2 IN      2/11/10
NOD 3 OUT     2/15/10
NOD 3 IN      NULL 
```

我需要做的是找到最大的NOD，然后如果NOD有一个IN日期，在行中放置'NO NOD'，但是如果最大的NOD已经发送出去但没有收到回来IN，计算天数既然已经发出去了。我试图嵌套 case 语句，但发生的是它看到 NOD 2 OUT 然后 IN 并放置“No NOD”文本。我不知道如何让它找到最大的点头。这是我到目前为止所拥有的（我是 SQL 的新手，所以如果有什么问题我很抱歉，而且我知道我的格式不好，但我可以看到这种方式更好。）：

```
CASE 
             WHEN COUNT(DISTINCT DATE_NOD_TBL.COMPLETED_DATE) = '0' THEN 'No NOD Out'
             WHEN  MAX(DATE_NOD_TBL_2.COMPLETED_DATE) IS NOT NULL AND MAX(DATE_NOD_TBL_5.COMPLETED_DATE) IS NOT NULL 
             THEN    (CASE 
                      WHEN MAX(DATE_NOD_TBL_3.COMPLETED_DATE) IS NOT NULL AND MAX(DATE_NOD_TBL_6.COMPLETED_DATE) IS NOT NULL 
                      THEN    (CASE
                               WHEN MAX(DATE_NOD_TBL_4.COMPLETED_DATE) IS NOT NULL AND MAX(DATE_NOD_TBL_7.COMPLETED_DATE) IS NOT NULL 
                               THEN 'No NOD Out_3'
                               ELSE TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE)))) 
                               END)
                      ELSE TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE))))
                      END) 
             ELSE TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE))))
             END   AS "Days Since Last NOD", 
```

我为表格设置了别名，以便每个任务都触摸一次表格，如下所示：

```
DATE_NOD_TBL contains all OUT tasks
DATE_NOD_TBL_2 is NOD 1 OUT
DATE_NOD_TBL_3 is NOD 2 OUT
DATE_NOD_TBL_4 is NOD 3 OUT
DATE_NOD_TBL_5 is NOD 1 IN
DATE_NOD_TBL_6 is NOD 2 IN
DATE_NOD_TBL_7 is NOD 3 IN 
```

我正在使用 10g Oracle SQL。

整个查询：

```
SELECT DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL       AS "Project Type",
  MAX(DATE_ISSUED_TBL_3.ASSIGNED_STAFF_ID)                  AS "Project Manager",
  AGENCY_INTEREST_ALT.ALTERNATE_AI_ID                          AS "Farm ID #",
  MTB_PARISH_COUNTY.PARISH_OR_COUNTY_DESC             AS "County",
  MAX(DISTINCT AGENCY_INTEREST.MASTER_AI_NAME)        AS "Operation Name",
  MAX(DATE_RECEIVED_TBL.COMPLETED_DATE)                   AS "Date Received",
  MAX(DATE_NOD_TBL.COMPLETED_DATE)                            AS "NOD Date",
  COUNT(DISTINCT DATE_NOD_TBL.COMPLETED_DATE)         AS "# of NOD's",

--//days since last NOD
 CASE
    WHEN GREATEST(MAX(DATE_NOD_TBL_2.COMPLETED_DATE),
                  MAX(DATE_NOD_TBL_3.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_4.COMPLETED_DATE)) <
         GREATEST(MAX(DATE_NOD_TBL_5.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_6.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_7.COMPLETED_DATE)) 
         THEN TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE))))
    ELSE 'No NOD Out'
END AS "Days Since Last NOD",

  --//net time
  CASE WHEN 
    COUNT(DISTINCT DATE_NOD_TBL.COMPLETED_DATE) = '0' 
      THEN TRUNC(MAX(SYSDATE - DATE_RECEIVED_TBL.COMPLETED_DATE))
    ELSE
  TRUNC(MAX((SYSDATE - DATE_RECEIVED_TBL.COMPLETED_DATE) - 
  --//issued NOD #1/NOD #1 Information Received
  NVL(((CASE WHEN DATE_NOD_TBL_5.STATUS_CODE IS NULL THEN SYSDATE ELSE DATE_NOD_TBL_5.COMPLETED_DATE END) - DATE_NOD_TBL_2.COMPLETED_DATE),'0') -
  --//issued NOD #2/NOD #2 Information Received
  NVL(((CASE WHEN DATE_NOD_TBL_6.STATUS_CODE IS NULL THEN SYSDATE ELSE DATE_NOD_TBL_6.COMPLETED_DATE END) - DATE_NOD_TBL_3.COMPLETED_DATE),'0') -  
  --//issued NOD #3/NOD #3 Information Received
  NVL(((CASE WHEN DATE_NOD_TBL_7.STATUS_CODE IS NULL THEN SYSDATE ELSE DATE_NOD_TBL_7.COMPLETED_DATE END) - DATE_NOD_TBL_4.COMPLETED_DATE),'0')   
  )) END
  AS "Net Time",

  TRUNC(MAX(SysDate - DATE_RECEIVED_TBL.COMPLETED_DATE))  AS "Gross Time",
  MAX(DATE_SITEASSESSMENT_TBL.COMPLETED_DATE)             AS "Site Visit"
FROM DSK_CENTRAL_FILE
INNER JOIN ACTIVITY_TASK_LIST DATE_ISSUED_TBL
ON DATE_ISSUED_TBL.MASTER_AI_ID       = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_ISSUED_TBL.INT_DOC_ID        = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_ISSUED_TBL.REFERENCE_TASK_ID = '171'
AND DATE_ISSUED_TBL.STATUS_CODE      IS NULL
INNER JOIN ACTIVITY_TASK_LIST DATE_ISSUED_TBL_2
ON DATE_ISSUED_TBL_2.MASTER_AI_ID       = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_ISSUED_TBL_2.INT_DOC_ID        = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_ISSUED_TBL_2.REFERENCE_TASK_ID = '163'
AND DATE_ISSUED_TBL_2.STATUS_CODE      IS NULL
INNER JOIN ACTIVITY_TASK_LIST DATE_ISSUED_TBL_3
ON DATE_ISSUED_TBL_3.MASTER_AI_ID       = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_ISSUED_TBL_3.INT_DOC_ID        = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_ISSUED_TBL_3.REFERENCE_TASK_ID = '262'
INNER JOIN ACTIVITY_TASK_LIST DATE_RECEIVED_TBL
ON DATE_RECEIVED_TBL.MASTER_AI_ID       = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_RECEIVED_TBL.INT_DOC_ID        = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_RECEIVED_TBL.INT_DOC_ID        = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_RECEIVED_TBL.MASTER_AI_ID      = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_RECEIVED_TBL.REFERENCE_TASK_ID = '571'
AND DATE_RECEIVED_TBL.STATUS_CODE       = '001'
AND DATE_RECEIVED_TBL.COMPLETED_DATE   IS NOT NULL
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL
ON DATE_NOD_TBL.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL.REFERENCE_TASK_ID IN ( '393','394','395')
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_8
ON DATE_NOD_TBL_8.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_8.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_8.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_8.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_8.REFERENCE_TASK_ID  IN('602','603','608')
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_2
ON DATE_NOD_TBL_2.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_2.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_2.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_2.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_2.REFERENCE_TASK_ID = '393'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_3
ON DATE_NOD_TBL_3.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_3.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_3.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_3.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_3.REFERENCE_TASK_ID = '394'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_4
ON DATE_NOD_TBL_4.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_4.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_4.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_4.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_4.REFERENCE_TASK_ID = '395'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_5
ON DATE_NOD_TBL_5.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_5.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_5.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_5.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_5.REFERENCE_TASK_ID = '603'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_6
ON DATE_NOD_TBL_6.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_6.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_6.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_6.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_6.REFERENCE_TASK_ID = '602'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_NOD_TBL_7
ON DATE_NOD_TBL_7.MASTER_AI_ID        = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_NOD_TBL_7.INT_DOC_ID         = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_NOD_TBL_7.INT_DOC_ID         = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_NOD_TBL_7.MASTER_AI_ID       = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_NOD_TBL_7.REFERENCE_TASK_ID = '608'
LEFT OUTER JOIN ACTIVITY_TASK_LIST DATE_SITEASSESSMENT_TBL
ON DATE_SITEASSESSMENT_TBL.MASTER_AI_ID       = DSK_CENTRAL_FILE.MASTER_AI_ID
AND DATE_SITEASSESSMENT_TBL.INT_DOC_ID        = DSK_CENTRAL_FILE.INT_DOC_ID
AND DATE_SITEASSESSMENT_TBL.INT_DOC_ID        = DATE_ISSUED_TBL.INT_DOC_ID
AND DATE_SITEASSESSMENT_TBL.MASTER_AI_ID      = DATE_ISSUED_TBL.MASTER_AI_ID
AND DATE_SITEASSESSMENT_TBL.REFERENCE_TASK_ID = '201'
INNER JOIN DSKMTB_ACTIVITY_TYPE
ON DSKMTB_ACTIVITY_TYPE.ACTIVITY_CATEGORY_CODE  = DSK_CENTRAL_FILE.ACTIVITY_CATEGORY_CODE
AND DSKMTB_ACTIVITY_TYPE.ACTIVITY_CLASS_CODE    = DSK_CENTRAL_FILE.ACTIVITY_CLASS_CODE
AND DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_CODE     = DSK_CENTRAL_FILE.ACTIVITY_TYPE_CODE
AND DSKMTB_ACTIVITY_TYPE.PROGRAM_CODE           = DSK_CENTRAL_FILE.PROGRAM_CODE
AND DSKMTB_ACTIVITY_TYPE.PROGRAM_CODE           = 'CF'
AND DSKMTB_ACTIVITY_TYPE.ACTIVITY_CATEGORY_CODE = 'ATH'
LEFT OUTER JOIN AGENCY_INTEREST_ALT
ON AGENCY_INTEREST_ALT.MASTER_AI_ID   = DSK_CENTRAL_FILE.MASTER_AI_ID
AND AGENCY_INTEREST_ALT.END_DATE     IS NULL
AND AGENCY_INTEREST_ALT.USER_GROUP_ID = 'CFO'
INNER JOIN AGENCY_INTEREST
ON AGENCY_INTEREST.MASTER_AI_ID = AGENCY_INTEREST_ALT.MASTER_AI_ID
AND AGENCY_INTEREST.INT_DOC_ID  = AGENCY_INTEREST_ALT.INT_DOC_ID
INNER JOIN SUBJ_ITEM_LOC_GOV_WITHIN
ON SUBJ_ITEM_LOC_GOV_WITHIN.MASTER_AI_ID = DSK_CENTRAL_FILE.MASTER_AI_ID
AND SUBJ_ITEM_LOC_GOV_WITHIN.INT_DOC_ID  = AGENCY_INTEREST_ALT.INT_DOC_ID
INNER JOIN MTB_PARISH_COUNTY
ON MTB_PARISH_COUNTY.PARISH_OR_COUNTY_CODE = SUBJ_ITEM_LOC_GOV_WITHIN.PARISH_OR_COUNTY_CODE
WHERE DSK_CENTRAL_FILE.PROGRAM_CODE          = 'CF'
AND DSK_CENTRAL_FILE.INT_DOC_ID             != 0
AND AGENCY_INTEREST_ALT.INT_DOC_ID           = 0
GROUP BY DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL,
  AGENCY_INTEREST_ALT.ALTERNATE_AI_ID,
  MTB_PARISH_COUNTY.PARISH_OR_COUNTY_DESC
ORDER BY DSKMTB_ACTIVITY_TYPE.ACTIVITY_TYPE_LABEL,
MAX(DATE_RECEIVED_TBL.COMPLETED_DATE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:38:11.413

要将最大的 IN 日期与最大的 OUT 日期进行比较，请尝试：

```
CASE
    WHEN GREATEST(MAX(DATE_NOD_TBL_2.COMPLETED_DATE),
                  MAX(DATE_NOD_TBL_3.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_4.COMPLETED_DATE)) <
         GREATEST(MAX(DATE_NOD_TBL_5.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_6.COMPLETED_DATE), 
                  MAX(DATE_NOD_TBL_7.COMPLETED_DATE)) 
         THEN TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE))))
    ELSE 'No NOD Out'
END 
```

要依次比较成对的日期，请尝试：

```
DECODE(case
           when MAX(DATE_NOD_TBL_4.COMPLETED_DATE) is not null
               then case when MAX(DATE_NOD_TBL_7.COMPLETED_DATE) is null then 'T' end
           else
               case
                   when MAX(DATE_NOD_TBL_3.COMPLETED_DATE) is not null
                       then case when MAX(DATE_NOD_TBL_6.COMPLETED_DATE) is null then 'T' end
                   else
                       case
                           when MAX(DATE_NOD_TBL_2.COMPLETED_DATE) is not null
                               then case when MAX(DATE_NOD_TBL_5.COMPLETED_DATE) is null then 'T' end
                       end
               end
       end, 'T',TO_CHAR(TRUNC(SYSDATE - (MAX(DATE_NOD_TBL.COMPLETED_DATE)))), 'No NOD Out') 
```

# java - 比双重嵌套的 ArrayList 更高效？

> ID：14875498
> 
> 赞同：4
> 
> 时间：2013-02-14T13:03:57.183
> 
> 标签：java, performance, list, data-structures, hashmap

我正在构建一个每天处理适量数据的 Java 后端组件。我们有一个 POJO，我们称之为它`Widget`，它上面有大约 10 个属性。我的软件必须处理多组`Widget`列表：本质上还有其他进程（完全不同的系统）将它们自己组合在一起`List<Widget>`，然后将它们发送到我的软件。我的软件实际上收到了一个如下所示的包装 POJO：

```
public class Payload {
    private List<Widget> widgets; // <-- what I want
    private String guid; // GUID; my software doesn't need this
    private boolean fizz; // again, my software doesn't need this
    ... many other properties that I don't care about
} 
```

我的软件聚合了所有这些`List<Widget>`，每个都由不同的系统创建，然后将它们一起处理成一个大批量。

我已经初步选择了`ArrayList<ArrayList<Widget>>`作为保存这批`Widget`列表的数据结构。`List<Widget>`（外`ArrayList`）大约有500,000组，每组`List<Widget>`大约有5s `Widget`；内部总共有约 250 万`Widget`秒`ArrayList`。

在最近的一次代码审查中，一些技术负责人告诉我，我为这批 o' 小部件选择了错误的数据结构。他们告诉我我应该使用`HashMap<String,List<Widget>>`，因为它更高效且更易于使用。hashmap 键是包含在`Payload`我的软件提供的 GUID 中。并不是说我出于任何原因都需要 GUID，它只是作为将 ~500,000`List<Widget>`分开的关键——我确实需要这样做。

这让我想：谁是对的？！？我们在这个数据结构上做的唯一操作是“添加”（在 的情况下`ArrayList`，只是添加一个`Widget`或一个`List<Widget>`via `add(...)`）然后“读取”（在我的软件中，我必须遍历每一个`Widget`并检查它的东西。用我嵌套`ArrayList`的要点是：

```
for(List<Widget> widgetList : myDoublyNestedArrayOfWidgets) {
    for(Widget widget : widgetList) {
        ...
    }
} 
```

这些是我们需要的唯一操作：将不同`List<Widget>`的 s 添加到一些大的“批量”数据结构中，然后在稍后检查所有这些并处理每个 s `Widget`。该软件在一些具有大量内存和处理能力的增强型服务器上运行。

所以我问：**是`ArrayList<ArrayList<Widget>>`正确的选择`HashMap<String,List<Widget>>`，还是别的什么......为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:12:04.800

> 所以我问：是`ArrayList<ArrayList<Widget>>`正确的选择`HashMap<String,List<Widget>>`，还是别的什么……为什么？

最后，重要的是您的软件解决了它应该解决的问题。

HashMap 比 ArrayList 更昂贵，如果您不需要通过键访问数据，则 ArrayList 更可能是最佳选择。此外，在使用 ArrayList 时，您需要编写的处理代码似乎更加简单和高效。

顺便说一句，有`ArrayList<ArrayList<Widget>>`，或`HashMap<String,List<Widget>>`闻到一点点。也许您正在建模的是 a`ArrayList<WidgetGroup>`并且 a`WidgetGroup`包含 a `List<Widget>`（以及目前您可能不需要的所有其他属性）。但是，如果您的 WidgetGroup 只包含一个 ArrayList，请不要引入这个新类（使其更简单）。

> 这让我想：谁是对的？！？

在您的解决方案和同行评审者的解决方案之间，我个人非常喜欢您的解决方案。

但是，您可以自己保留它并遵循“技术领先”。如果这是他们的角色，那么重要的是他们的决定和提供这些选择的责任。（支付你支票的人总是对的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:14:35.303

有一个名词您一直在使用，但在您的数据模型中缺失：**Batch**。如果您真的关心将它们保存在批处理中并保持代码可读，那么将它们封装在 Batch 类中：

```
类批次{
    字符串向导；
    列出<Widget> 小部件；
}

```

而且，如果您不关心批次，那么您可以将它们全部展平成一个`List<Widget>`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:09:30.207

哈希映射并不比数组列表更有效或更容易使用。如果在某些时候您确实需要通过其 GUID 键查找批次，则该更改可能是合理的。

哈希映射比数组列表效率低，因为调整它的大小意味着必须重新评估哈希码并将数据重新分配到相当随机的内存位置。另一方面，调整数组大小会将内容从旧数组线性复制到新数组，这对 CPU 缓存更友好。

哈希映射也不容易使用。要访问条目，您必须通过地图的条目集，这违反[了得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:13:09.250

也许嵌入式（核心）数据库是您最终想要的。另一种可能性是类似于 JavaSpaces/NoSQL，将交付和处理解耦。依靠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T13:14:44.250

从您的问题可以清楚地看出您正在做这些事情。

1.  *从您的数据中读取。*
2.  *添加更多小部件。*

问题出现了，改变您的数据结构将如何`ArrayList<ArrayList<Widget>> to HashMap<String,List<Widget>>`影响上述两个活动。

**1）阅读**：您已将它们分为 4 个组，因此使用`hashmap`您将使用散列存储您的组，这对于少量数据（在您的情况下为组）确实没有意义，因此无需在此处使用 hashmap。

**2）添加更多小部件**：您将访问要添加的列表，因此同样您可以阅读。使用不会有什么坏处 `ArrayListObj.get(index)`。

现在使用`ArrayList`将始终`widgets`按顺序读取。哪个不会使用`Hashmap`，但无论如何我认为这不是你关心的问题，或者是吗？:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T13:18:26.407

如果您必须随机访问内部列表，Hashmap 会更有效，并且使用 hashmap 的代码对于看到嵌套循环时陷入困境的审阅者来说*看起来更优雅。*但是，如果您必须遍历并访问每个节点，您将不会比 On^2 做得更好。您可以将它们填充到数据库中，但这除了复杂性之外不会为您带来任何好处。它更优雅，就像 hashmap 一样。当然，所有这些都假设您有足够的内存一次保存所有 250 万个小部件。如果您必须对其进行分页，那么某种 DB SQL 或 NoSQL 可能会更好。

# delphi - Delphi XE3：复杂预构建事件的问题

> ID：14875499
> 
> 赞同：16
> 
> 时间：2013-02-14T13:04:01.960
> 
> 标签：delphi, delphi-xe3

我们目前正在从 Delphi XE 切换到 Delphi XE3，并且我们的预构建事件存在严重问题。

我们的预构建事件如下所示：

```
 SubWCRev "<SVN-Path>" "<InputFile>" VersionInfo.rc
  brcc32 -foProject.res VersionInfo.rc 
```

（请注意，这两个命令出现在不同的行中；并且在我们的“真实”命令中包含绝对路径）即我们首先从工作副本中提取当前 SVN 版本，将此信息写入 VersionInfo.rc，然后使用 Borland 资源编译器生成资源文件。

这在以前的 Delphi 版本中运行良好，但每当我们在 XE3 中打开项目选项时，XE3 会将其转换为：

```
 SubWCRev "<SVN-Path>" "<InputFile>" VersionInfo.rc &brcc32 -foProject.res VersionInfo.rc 
```

（请注意，这是一行，两个命令由一个 & 号分隔）。这会导致构建失败。

我们当前的解决方法是手动将其更改为

```
 SubWCRev "<SVN-Path>" "<InputFile>" VersionInfo.rc && brcc32 -foProject.res VersionInfo.rc 
```

即，如果第一个命令成功，我们使用两个与号来执行第二个命令。

这有效，但只有在我们再次编辑项目选项之前 - Delphi XE3 总是搞乱预构建事件:-(

有人知道解决方案/解决方法吗？我想我们可以编写一个简单的命令行工具来调用 SubWCRev 和 brcc32，但我更喜欢更简单的解决方案。

**更新**：轻松重现此错误的步骤

*IDE*

*   文件 -> 新建 -> VCL 表单应用程序 (Delphi)
*   构建项目1
*   文件 -> 全部保存，保留建议的名称 Unit1.pas / Project1.dpr
*   项目 -> 选项
*   选择目标“所有配置 - 所有平台”
*   Build Events -> Pre-build events，输入这个（两行，抱歉格式化）：

    回声一> out.txt

    回显二 >> out.txt

*   从 IDE 构建项目

*   保存并关闭项目

*RAD Studio command prompt*

*   Navigate to the project directory
*   msbuild Project1.dproj => OK

*IDE*

*   Project -> Options
    *   click into "Search path"
        *   Enter "a"
        *   delete the "a"
    *   click ok
*   Project -> Build project
*   Save & close the project

*RAD Studio command prompt*

*   msbuild Project1.dproj => ERROR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:08:52.707

We ended up using a workaround similar to what was proposed by David Heffernan:

*   combine all our calls into a single (Ruby) script PreBuild.rb
*   compile this Ruby script into a standalone executable (since not all developers have Ruby installed)
*   use a single pre-build event in Delphi

In case anyone's interested, here's our PreBuild event:

```
PreBuild "<path_to_SVN_working_copy>" "VersionInfo.rc.in" $(OUTPUTNAME).res 
```

and here's the script PreBuild.rb:

```
 #!/usr/bin/env ruby

  require 'tempfile'

  if ARGV.length < 3
    puts "usage: #{$0} <path> <infile> <outfile>"
    exit 1
  end
  # svnversion.exe is part of the SVN command line client
  svnversion = "svnversion.exe"
  path, infile, outfile = ARGV[0], ARGV[1], ARGV[2]
  # call svnversion executable, storing its output in rev
  rev_str = `#{svnversion} "#{path}"`.chop

  # extract the first number (get rid of M flag for modified source)
  rev = /^[0-9]+/.match(rev_str)[0]

  # get current date
  date = Time.new

  # remove old output file (ignore errors, e.g. if file didn't exist)
  begin
    File.delete(outfile)
  rescue
  end

  input = File.new(infile, "r")
  tmpname = "VersionInfo.rc"
  tmp = File.new(tmpname, "w+")
  input.each do |line|
    # replace $WCREV$ with revision from svnversion call
    outline = line.gsub(/\$WCREV\$/, rev) 
    # replace $WCDATE$ with current date + time
    outline = outline.gsub(/\$WCDATE\$/, date.to_s)
    # write modified line to output file
    tmp.puts(outline)
  end
  input.close
  tmp.close

  puts "SubWCRev: Revision: #{rev}, date: #{date}, written to #{tmpname}"

  call = "brcc32 -fo#{outfile} #{tmpname}"
  puts call
  system(call) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T19:41:19.900

I'm using Delphi XE4, and I had the same problem with almost the same commands. Our PreBuildEvent has 4 lines, I tried what is described here, put all on 1 line and separating my commands with &&, and it worked. I then tried to modify to see if XE4 will mess my prebuild, but after putting back my prebuild on 4 lines, it was still working.

I finally figured out with other projects where I was able to reproduce this error, that simply editing the script by removing the CRLF at the end of each line, and putting it back, from XE4 environment, it fixed the PreBuildEvent.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-05T04:35:49.847

I met this problem in recent weeks, and I solved it with Delphi by myself.

What caused this problem, is the format of dproj. Since dproj is XML format, and the pre-build/post-build events used "&" as the mark for new line, the dproj will save it as "&".

In somehow, Delphi will save it as "\n&&" when the project is saved. That cause MSBuild misunderstand the symbol and show "Syntax error".

Hence, what we do to solve this problem, is to detect if sLineBreak + '&&' exists in dproj which we will send to MSBuild.

With the modification, MSBuild will process the dproj perfectly. I share my code in the following block, the program can help us the change the version number, correct the pre/post build events:

```
program changeProjVer;

////////////////////////////////////////////////////////////////////////////////
/// Created by Dennies Chang dennies@ms4.hinet, dennies226@gmail.com
///
///   If you need to use this utility, please refer the original URL:
///   https://firemonkeylessons.blogspot.com/2019/04/delphiBuildCommandAndTools.html
///
///   And do not remve these lines.
///   The code is opened for all Delphi programmers, you can use it as
///   commercial/non-commercial usage, what you have to do, is to have a notice
///   for the original author.
///
///   And send an Email to dennies@ms4.hinet.net to me, thanks.

{$APPTYPE CONSOLE}
{$R *.res}

uses
   System.SysUtils, IdGlobal, Classes;

var
   currentFile, tmpStr, completeStr, tmpMajor, tmpMinor, tmpRelease,
       tmpBuild, configName: String;
   lineIdx: Integer;
   src: TStringList;
   bDebug : boolean;
begin
   try
      { TODO -oUser -cConsole Main : Insert code here }
      if ParamCount < 2 then begin
         writeln('Usage: changeProjVer.exe dprojFileFullPath versionNo [Debug|Release]');
         writeln('versionNo should be contain 3 dots, e.g.,: 107.1.108.321');
         writeln;
         Readln;
      end
      else begin
         currentFile := ParamStr(1);
         tmpBuild := ParamStr(2);

         bDebug := False;
         if ParamCount >= 3 then begin
            configName := ParamStr(3);
            bDebug := configName.ToLower = 'debug';
         end;

         tmpMajor := Trim(Fetch(tmpBuild, '.'));
         tmpMinor := Trim(Fetch(tmpBuild, '.'));
         tmpRelease := Trim(Fetch(tmpBuild, '.'));
         tmpBuild := Trim(Fetch(tmpBuild, '.'));

         if FileExists(currentFile) then begin
            src := TStringList.Create;
            try
               src.LoadFromFile(currentFile, TEncoding.UTF8);

               for lineIdx := 0 to src.Count - 1 do begin
                  completeStr := src.Strings[lineIdx];
                  tmpStr := '';

                  if Pos('<VerInfo_MajorVer>', completeStr) > 0 then begin
                     tmpStr := Fetch(completeStr, '<VerInfo_MajorVer>');
                     tmpStr := #9 + #9 + '<VerInfo_MajorVer>' + tmpMajor +
                         '</VerInfo_MajorVer>';
                     // completeStr := tmpStr;
                  end
                  else if Pos('<VerInfo_MinorVer>', completeStr) > 0 then begin
                     tmpStr := Fetch(completeStr, '<VerInfo_MinorVer>');
                     tmpStr := #9 + #9 + '<VerInfo_MinorVer>' + tmpMinor +
                         '</VerInfo_MinorVer>';
                     // completeStr := tmpStr;
                  end
                  else if Pos('<VerInfo_Release>', completeStr) > 0 then begin
                     tmpStr := Fetch(completeStr, '<VerInfo_Release>');
                     tmpStr := #9 + #9 + '<VerInfo_Release>' + tmpRelease +
                         '</VerInfo_Release>';
                     // completeStr := tmpStr;
                  end
                  else if Pos('<VerInfo_Build>', completeStr) > 0 then begin
                     tmpStr := Fetch(completeStr, '<VerInfo_Build>');
                     tmpStr := #9 + #9 + '<VerInfo_Build>' + tmpBuild +
                         '</VerInfo_Build>';
                     // completeStr := tmpStr;
                  end
                  else if Pos('FileVersion=', completeStr) > 0 then begin
                     // FileVersion
                     completeStr := src.Strings[lineIdx];
                     tmpStr := '';
                     while Pos('FileVersion=', completeStr) > 0 do begin
                        tmpStr := Fetch(completeStr, 'FileVersion=');
                        tmpStr := tmpStr + 'FileVersion=' +
                            StringReplace(ParamStr(2), ' ', '',
                            [rfReplaceAll]) + ';';
                        Fetch(completeStr, ';');
                     end;

                     if Length(completeStr) > 0 then begin
                        tmpStr := tmpStr + completeStr;
                     end;
                  end;

                  // 這兩個會出現在同一行, 不要加 else
                  if Pos('ProductVersion=', completeStr) > 0 then begin
                     completeStr := tmpStr;
                     tmpStr := '';
                     // ProductVersion
                     while Pos('ProductVersion=', completeStr) > 0 do begin
                        tmpStr := Fetch(completeStr, 'ProductVersion=');
                        tmpStr := tmpStr + 'ProductVersion=' +
                            StringReplace(ParamStr(2), ' ', '',
                            [rfReplaceAll]) + ';';
                        Fetch(completeStr, ';');
                     end;

                     if Length(completeStr) > 0 then begin
                        tmpStr := tmpStr + completeStr;
                     end;
                  end;

                  if (tmpStr = '') and (tmpStr <> completeStr) then
                     tmpStr := completeStr;

                  src.Strings[lineIdx] := tmpStr;
               end;

               src.Text := StringReplace(src.Text, sLineBreak + '&amp;&amp;', '&amp;', [rfReplaceAll]);
               src.SaveToFile(currentFile, TEncoding.UTF8);
            finally
               src.Free;
            end;
         end;
      end;
   except
      on E: Exception do
         writeln(E.ClassName, ': ', E.Message);
   end;

end. 
```

# jquery - Google Maps v3 下载/弹出操作可见性

> ID：14875501
> 
> 赞同：1
> 
> 时间：2013-02-14T13:04:13.867
> 
> 标签：jquery, maps

我根据谷歌地图 API 手册编写了一个小脚本，它在平面显示上运行良好。但是，如果我想将链接放在弹出窗口中打开它，它会部分加载。以下是源链接：

jsfiddle.net/haroutweb/WrvDm/1/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:19:15.713

这是您要实现的目标[http://jsfiddle.net/davidchase03/zJHAa/](http://jsfiddle.net/davidchase03/zJHAa/)吗？

您已初始化地图。

所以添加`initialize();`到您的点击功能会加载整个地图

让我知道。

-大卫

# java-me - 如何在 J2ME 中下载和播放视频

> ID：14875517
> 
> 赞同：1
> 
> 时间：2013-02-14T13:04:47.083
> 
> 标签：java-me, download, midp, mmapi, jsr75

如何在 j2me 中下载和播放视频？

我的代码可供下载

在三星中：下载完成为以相同字节写入但不支持文件格式的相同字节文件，

在nokia2690下载未完成，显示`NullpointerException`

我在下面添加了我的代码

```
 private void DownloadStreams(String url, String filepath) throws IOException {

    InputStream is = null;
    StringBuffer sb = new StringBuffer();
    HttpConnection http = null;
    try {
        Alert all = new Alert("url stream::");
        all.setString("download stream!!:");
        all.setTimeout(1000);
        display.setCurrent(all);
        URL = EncodeURL(videoURL);
        http = (HttpConnection) Connector.open(videoURL);
        http.setRequestMethod(HttpConnection.GET);
        if (http.getResponseCode() == HttpConnection.HTTP_OK) {
            DataInputStream dataIn = http.openDataInputStream();
            byte[] buffer = new byte[(int) http.getLength()];
            int read = -1;
            dataIn.readFully(buffer);
            dataIn.close();
            http.close();
            writeFile(buffer, filepath);
            Alert al = new Alert("RESPONSE::" + http.getResponseCode());
            al.setString("download complete!!:");
            al.setTimeout(3000);
            display.setCurrent(al, midp.diS);
        }

    } catch (Exception ex) {
        Alert al = new Alert("Downloading Failed:::" + ex.toString());
        al.setString("Download Failed" + ex.getMessage());
        al.setTimeout(Alert.FOREVER);
        display.setCurrent(al, midp.diS);
    }
}

public void writeFile(byte[] videoBuffer, String filepath) {
    Connection con = null;
    OutputStream os = null;
    try {
        con = Connector.open(filepath, Connector.READ_WRITE);
        FileConnection fc = (FileConnection) con;
        if (!fc.exists()) {
            fc.create();
        }
        os = fc.openOutputStream();
        os.write(videoBuffer);
        os.flush();
        Alert al = new Alert("file write Complete!!" + videoBuffer.length);
        al.setString("write complete!!:" + videoBuffer.length);
        al.setTimeout(3000);
        display.setCurrent(al, midp.diS);
    } catch (Exception e) {
    } finally {
        try {
            if (os != null) {
                os.close();
            }
            if (con != null) {
                con.close();
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

# solr - Solr 索引失败

> ID：14875521
> 
> 赞同：2
> 
> 时间：2013-02-14T13:04:57.650
> 
> 标签：solr, nutch

[我在本教程](http://wiki.apache.org/nutch/NutchTutorial#A4._Setup_Solr_for_search)中都喜欢，但有一些问题。`./nutch solrindex http://127.0.0.1:8080/solr/ crawl/crawldb -linkdb crawl/linkdb crawl/segments/*`当我在 nutch 爬行后尝试调用命令时，我得到下一个异常

```
> WARNING: job_local_0001 org.apache.solr.common.SolrException: Bad
> Request
> 
> Bad Request
> 
> request: http://127.0.0.1:8080/solr/update?wt=javabin&version=2
>         at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
>         at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
>         at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
>         at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:142)
>         at org.apache.nutch.indexer.IndexerOutputFormat$1.close(IndexerOutputFormat.java:48)
>         at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.close(ReduceTask.java:466)
>         at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:530)
>         at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
>         at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260) 
```

我应该怎么做才能解决这个问题？

Ps Solr 正在工作。我使用了 solr 4.1 和 nutch 1.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:39:18.853

当您遇到任何异常时，您应该打开日志并检查日志中的异常。在我的情况下，我修改`schema.xml`并插入了一些新字段`type="text"`，但在我的情况下`schema.xml`是另一种称为的类型，`text_general`在阅读日志后很容易修复。

# c# - 左右字符串检测算法和操作

> ID：14875524
> 
> 赞同：-2
> 
> 时间：2013-02-14T13:05:03.203
> 
> 标签：c#, java, regex, string

我正在寻找一种机制来检测给定字符串的**最小**和**唯一**左右字符串。考虑以下文本：

```
 <button id="allow" type="submit" class="button-big" name="allow" value="93db44648ab3607b10e600eaf796c794" tabindex="4"> 
```

我需要获得价值的*价值*。因此，如果我决定选择`substring`，我将使用`name="allow" value="`左字符串和`"`右字符串（基于整个 html 数据的唯一性）以及它们的相对索引。但是我正在使用的工具是检测唯一但足够小的左字符串是`w" value="`.

我的问题是如何找到这个？由于我没有工具的来源，我无法检测到它。

请不要向我推荐 C# 中的 HAP 或任何 html 库，因为上面的 html 代码只是一个易于理解的示例。我有其他类型的数据。

任何 C# 或 java 片段都会很好。

编辑：我正在处理的数据是非 html、非标准但团队描述的东西。而且由于其性质，它也需要用 Java 编码。因此我不能考虑 HtmlAgilityPack。

我想重视最少足够的字符串，而不是识别唯一模式的所有工作可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:07:33.517

从上面的示例中，看起来您正在尝试解析 HTML ...

为此，我建议使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)而不是自己尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:02:08.363

好的，从您的最新评论中，我尝试猜测您想要做什么，并希望可以为您指明正确的方向。

一些用户选择了一些文本并说“为我自动检测最小分隔符”。因此，您的输入是整个*文本*（类型`String`）以及用户选择的开始和结束索引（类型的*selectionStart*和*selectionEnd*`int`）。您的预期输出将是两个字符串，它们在整个文本中唯一标识选择的开始和结束（我们称它们为*startDelimiter*和*endDelimiter*），这样

```
text.indexOf(startDelimiter, 0) + startDelimiter.length() == selectionStart 
```

和

```
text.indexOf(endDelimiter, selectionStart) - 1 == selectionEnd 
```

两者都成立。

*然后，查找startDelimiter*的一般方法是构建从*selectionStart - n*到*selectionStart*的子字符串，从*n = 1*开始，然后增加*n*直到上面的第一个表达式为真。*endDelimiter*也可以这样做，但是您可以构建从*selectionEnd + 1*到*selectionEnd + n + 1*的子字符串并增加*n*直到第二个表达式为真。

如果分隔符很大，这可能会变慢。*在最坏的情况下， selectionStart*之前的输入文本的整个部分将是*startDelimiter*，您只能在*selectionStart - 1*次迭代之后找到。

因此，一种可能的改进是使用二分搜索方法并在每次迭代中将*n*加倍，直到找到有效的分隔符，然后以相同的方式继续减少分隔符，直到子字符串不再是有效的分隔符。之前的子字符串是您的最小分隔符。

# windows - 验证内部 Windows 数据结构的 API 或配置

> ID：14875526
> 
> 赞同：0
> 
> 时间：2013-02-14T13:05:09.173
> 
> 标签：windows, winapi, memory-leaks, crash

我需要找到影响 Windows API 的内存损坏错误。基本上，程序运行一段时间后，`CreateWindowEx`函数返回`NULL`句柄并`GetLastError()`返回1407，意思是“找不到窗口类”。我检查了`lpClassName`参数，没有问题，并且该类已经注册。事实上，程序正常创建了该类的多个窗口，然后突然`CreateWindowEx`拒绝创建新窗口并报错1407。这个程序只有一个线程，我们确定`UnregisterClass`问题窗口类注册后没有调用.

我们怀疑我们的程序正在破坏某些`USER32`或其他 Windows 数据结构。但是使用[Application Verifier](http://msdn.microsoft.com/en-us/library/ms220948%28v=vs.90%29.aspx "应用程序验证者")和[Visual Leak Detector for Visual C++](http://vld.codeplex.com/)运行它，没有发现泄漏或内存损坏。资源使用率也很低，窗口句柄的数量永远不会超过 2k，提交的内存永远不会超过 50mb。

这让我想到了这个问题的标题：是否有一些 Windows API 或 Windows 配置选项可以按需或连续检查给定进程的 Windows 数据结构的状态？我已经在使用带有许多启用检查的应用程序验证程序，但它根本没有发现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:22:17.877

我做了一个 hack，在调用失败后，我使用完全相同的参数执行了对 CreateWindowEx 的新调用。令我惊讶的是，第二次调用成功了！也许这与一些时间问题有关。

# uml - 如何在 Enterprise Architect 9.3 中添加决策分支标签？

> ID：14875529
> 
> 赞同：1
> 
> 时间：2013-02-14T12:41:31.573
> 
> 标签：uml

如何在 Enterprise Architect 9.3 中添加决策分支标签？

我想这是一个非常基本的事情。但是[这个帮助页面](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/decision.html%20Decision%20Element)解释了除了您对帮助页面的期望之外的所有内容，即描述如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:28:12.890

解决方案很简单，但除非您对使用 Enterprise Architect 有信心，否则术语并不明显。

双击连接器，选择“约束”选项卡，然后将标签文本放在“保护”字段中。

# git - GUI 公共 ssh 密钥生成器

> ID：14875530
> 
> 赞同：0
> 
> 时间：2013-02-14T13:05:38.407
> 
> 标签：git, user-interface, ssh-keys, tortoisegit

对于不愿意使用 CLI 允许他们生成公共 rsa 密钥的非精通技术的用户，是否有任何 GUI 工具？（[腻子法](https://stackoverflow.com/questions/11049510/how-i-can-create-sshkey-in-windows-8-through-puttygen-exe)除外）

当项目成员之一需要访问 repo（例如，通过 TortoiseGit，但很难强制他们生成密钥以授予他们访问权限）时，这是常见的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:20:30.283

[GitExtensions](http://code.google.com/p/gitextensions/)有一个相当简单的 UI 用于生成密钥。一般来说，对于 Windows 用户来说，这似乎是一个比 Tortoise Git 更有用的 UI。它位于遥控器菜单上。强迫他们很简单。如果远程服务器需要密钥（使用带有[GitLab](http://gitlab.org/)的 gitolite来提供基于 Web 的访问控制），那么用户就别无选择。我们发现，使用链接到本地​​ ActiveDirectory 的 gitlab 用户可以创建新项目并使用非常小的指南文档添加他们的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:14:32.730

有一种叫做[REBEX](http://www.rebex.net/sample/key-generation/default.aspx)的东西，但它几乎与[PuTTYgen相同](http://the.earth.li/~sgtatham/putty/latest/x86/puttygen.exe)

# django - Django 错误选择不显示

> ID：14875535
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:08.470
> 
> 标签：django

我正在制作这个 django 应用程序，它是一个投票应用程序，因此它会显示问题，当您单击问题时它会显示选择。我正在使用本教程[https://docs.djangoproject.com/en/1.4/intro/tutorial03 /](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)

我收到的错误是，当我点击问题时它不显示选项。 ![在此处输入图像描述](../Images/6f50f9fab88a8a9cb9b72a0fd96ceff7.png)

但它显示在我的管理页面中 ![在此处输入图像描述](../Images/c781ebebb67ba6e3899e57063af0311b.png)

我的 detail.html 模板是

```
<h1>{{ poll.question }}</h1>
<ul>
{% for choice in poll.choice_set.all %}
    <li>{{ choice.choice }}</li>
{% endfor %}
</ul> 
```

我的views.py是

```
from django.http import HttpResponse
from myapp.models import Poll ,choice
from django.template import Context, loader
from django.http import Http404
from django.shortcuts import render_to_response, get_object_or_404

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    return render_to_response('myapp/index.html', {'latest_poll_list':     latest_poll_list})

def results(request, poll_id):
    return HttpResponse("You're looking at the results of poll %s." % poll_id)

def vote(request, poll_id):
    return HttpResponse("You're voting on poll %s." % poll_id)

def detail(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('myapp/detail.html', {'poll': p}) 
```

我的模型是：

```
from django.db import models
from django.contrib import admin
class Poll(models.Model):
    question=models.CharField(max_length=200)
    pub_date=models.DateTimeField('date published')
    def __unicode__(self):
        return self.question

# Create your models here.
class choice(models.Model):
    poll=models.ForeignKey(Poll)
    choice_text=models.CharField(max_length=200)
    votes=models.IntegerField(default=0)
    def __unicode__(self):
        return self.choice_text
class ChoiceInline(admin.TabularInline):
    model = choice 
    extra = 3
class PollAdmin(admin.ModelAdmin):
    fields = ['pub_date','question']
    inlines=[ChoiceInline]
    list_display =('question','pub_date')
    list_filter=['pub_date']
    search_fields=['question']
    #date_hierarchy='pub_date' 
```

我不知道如何解决这个问题哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:13:08.427

更新模板中的这一行

```
<li>{{ choice.choice }}</li> 
```

到

```
<li>{{ choice.choice_text }}</li> 
```

因为你有`choice_text`领域而不是`choice`

# silverlight - 高度和最大/最小高度之间的差异

> ID：14875536
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:07.457
> 
> 标签：silverlight

在 Silverlight 中，Height 和 Max Height 或 Min Height 有什么区别，在 Width 情况下也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:09:03.357

设置高度值将简单地将任何对象固定到该高度。设置最大高度将允许对象增长，但只能增长到最大高度。

与宽度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:16:55.887

高度只会设置对象的高度，但最大或最小高度允许用户将控件拉伸到最大高度，如果不设置最大高度，则可以无限拉伸控件的高度，如 Width..

注意：所有控件都不能被拉伸，因此它们不需要设置最大最小高度或宽度，例如 - 按钮控件

# sql - Oracle 表分区

> ID：14875537
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:21.170
> 
> 标签：sql, oracle, database-design, partitioning

假设我有下表：

```
Table Name: ITEM
Columns: ID, ITEM_NUM, ITEM_COLOR, ITEM_SPEC, ITEM_STATUS 
```

并且 ITEM 表在 ITEM_STATUS 列上进行了 (LIST) 分区。
ITEM_STATUS 可以具有的唯一值是：*Active、Inactive、Suspended*
ID 是 PK，因此上面有索引。

现在，当我执行此查询时：

```
select * from ITEM where ITEM_COLOR="Green" 
```

请帮助我
1\. 由于分区不在 ITEM_COLOR 列上，Oracle 如何确定要转到哪个分区？
2\. 上面的 Query 会不会从 Partitioning 中受益？
3\. SQL 查询是否需要在 WHERE 子句中包含分区列才能从分区中受益。
4\. Partitions如何使用Indexes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:19:53.117

如果无法确定您的查询是否只需要来自特定分区的数据，Oracle 必须查看表的所有分区。

分区的概念不能用简单的答案来很好地解释，最好阅读文档以有一个很好的理解。

无论如何，在进入这个之前一定要先有性能问题，如果不是让表不分区。

去

[http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#CFAGCECI](http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#CFAGCECI) 或 [http://docs.oracle.com/cd/E11882_01/server.112/e25554/parpart.htm# i1007993](http://docs.oracle.com/cd/E11882_01/server.112/e25554/parpart.htm#i1007993) 或 [http://docs.oracle.com/cd/E11882_01/server.112/e16638/data_acc.htm#i21879](http://docs.oracle.com/cd/E11882_01/server.112/e16638/data_acc.htm#i21879)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:21:04.687

在您的示例中，它不会使用分区修剪（这是仅选择一个分区以知道从何处检索信息），并将进入所有分区。当然，如果不使用ITEM_STATUS，oracle就不能只使用一个分区。

您的查询不会从分区中受益。

您不需要将分区列放在 where 子句中，您可以使用`FROM table partition (ACTIVE)`.

您可以使用分区索引或普通索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:20:17.530

将您的分区表视为三个表。ITEM_active、ITEM_inactive、ITEM_suspended。物理上共有三张表。从逻辑上讲，您有一张桌子。

因此，当您要求一种颜色时，您需要扫描所有三个表，因为绿色项目可能处于活动状态或不处于活动状态，或者处于暂停状态。换句话说，您不会从此查询的分区中受益。

问题 3：不。分区模式应该对查询是透明的。我会指定：查询必须独立于分区（也就是说，不要指定分区名称，而是使用 where 子句过滤数据）。请求暂停项目的查询将隐含地从分区中受益：将仅扫描包含暂停项目的分区。

问题 4：索引可能是全局的（所有分区上的单个索引对象 - 更难维护）或本地的（每个分区的物理索引）。索引列有利于使用索引进行快速搜索。分区索引没有什么特别之处。

# java - 使用休眠验证器时出现 NoClassDefFoundError

> ID：14875540
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:27.253
> 
> 标签：java, maven, hibernate-validator

我有一个 mavenized 项目，我在其中使用 JSR 303（Bean 验证）。作为参考实现，我使用 Hibernate-validator。在项目中我指定了依赖项：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.1.0.Final</version>
    <scope>provided</scope>
</dependency> 
```

使用 4.1.0 版一切正常。但是当我把它改成 4.2.0\. 我在这一行得到运行时错误：

```
ValidatorFactory factory = Validation.buildDefaultValidatorFactory(); 
```

> java.lang.ClassFormatError：类文件 javax/persistence/Persistence 中非本机或抽象方法中的缺失代码属性
> 
> ......//更多堆栈跟踪
> 
> java.lang.NoClassDefFoundError：无法初始化类 com.andr.myproject.services.utils.ValidationUtils

问题出在哪里？

**UPD：我也使用 Java-ee-5 依赖**，而不是 6。

UPD2：此错误发生在 JUnit 测试中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:53:22.210

你的项目中是否碰巧有以下依赖：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency> 
```

如果是这样，您应该确保将其从运行时类路径中排除，因为此 JAR 只能用于编译，但不能在运行时使用（它的类已修改，因此它们不包含方法实现）。您可以改用 JBoss 提供的 API JAR：

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

可能添加 Hibernate Core 会有所帮助，因为它将 JPA API 引入到单独的 JAR 中。[您可以在此处](https://community.jboss.org/wiki/WhatsTheCauseOfThisExceptionJavalangClassFormatErrorAbsentCode)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:58:54.687

我找到了解决方案：

我需要添加休眠核心依赖项。没有它就行不通。

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.0.1.Final</version>
    </dependency> 
```

# math - 是否有构建更高阶贝塞尔曲线的工具？

> ID：14875546
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:40.983
> 
> 标签：math, bezier

是否有构建更高阶贝塞尔曲线的工具？我想获得一个球的弹跳效果，我现在能找到的只是立方体贝塞尔的工具（cubic-bezier.com）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:40:39.913

有，但你的理由并不能解释你的问题......为什么你认为更高阶的贝塞尔曲线有助于更好地绘制弹跳球？例如，如果您想通过一些弹跳点生成曲线，则需要 Catmull-Rom 样条，因为它通过点（两种样条形式可以互换，但它们具有不同的插值属性，与 Catmull- Rom 对于轨迹渲染之类的东西更有用）。

# c# - WPF 中的文本框选项

> ID：14875548
> 
> 赞同：2
> 
> 时间：2013-02-14T13:06:47.503
> 
> 标签：c#, wpf, textbox

在我的 WPF 应用程序中，我有一个文本框，我应该在其中插入一个大文本，然后在预览页面中显示该大文本。我关于文本框的问题是：

*   如何使文本框中的文字不会在水平方向上前进并显示水平滚动条？即我希望以垂直方式编写文本而不超过文本框的宽度。
*   这是文本框中的大文本，所以当我在预览页面中显示大文本时，我可以将大文本显示为段落吗？
*   如何为每个段落制作标题？这些标题应该单独写在其他文本框中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:09:34.470

您可以使用 Textbox.TextWrapping 属性。将其设置为 TextWrapping.Wrap。

```
textBox1.TextWrapping = TextWrapping.Wrap; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:25:02.977

我建议使用 RichTextBox。它的 Document 属性是一个 FlowDocument，您还可以在其中添加段落。

# php - 如何从php中的数组中删除元素？

> ID：14875549
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:48.467
> 
> 标签：php, arrays

我做了很多研究，但我不知道如何从 PHP 中的数组中删除元素。在 Java 中，如果你有一个`ArrayList<SomeObject> list`，你会说`list.remove(someObject);`.

你可以在 PHP 中做任何类似的事情吗？我找到`unset($array[$index]);`了，但它似乎不起作用。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:08:41.597

`unset($array[$index]);`确实有效。
我能想到的唯一问题是你迭代这个数组的方式。
只是使用`foreach`而不是`for`

还要确保 $index 包含正确的值

要测试您的阵列，您可以使用`var_dump()`：

```
$cars[0]="Volvo"; 
$cars[1]="BMW"; 
$cars[2]="Toyota"; 

unset($cars[0]);
var_dump($cars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:12:11.103

`unset`应该工作，你也可以试试这个：

```
$array = array_merge(
             array_slice($array, 0, $index),
             array_slice($array, $index+1)
         ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:16:09.583

您需要删除它并删除空数组：

```
function remove_empty($ar){
    $aar = array();
    while(list($key, $val) = each($ar)){
        if (is_array($val)){
            $val = remove_empty($val);
            if (count($val)!=0){
                $aar[$key] = $val;
            }
        }
        else {
            if (trim($val) != ""){
                $aar[$key] = $val;
            }
        }
    }
    unset($ar);
    return $aar;
} 
```

remove_empty(array(1,2,3, '', 5)) 返回数组(1,2,3,5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T12:06:50.840

如果您只想删除一个数组元素，您可以使用`unset()`或替代`array_splice()`

**未设置（）**
示例：

**代码**

```
<?php

    $array = array(0 => "x", 1 => "y", 2 => "z");
    unset($array[1]);
    //If you want to delete the second index ie, array[1]
?> 
```

**输出**

```
Array (
    [0] => a
    [2] => c
) 
```

# code-first - ADO.NET EF 在实体中使用 List<> 的目的是什么

> ID：14875550
> 
> 赞同：1
> 
> 时间：2013-02-14T13:06:50.037
> 
> 标签：code-first, ado.net-entity-data-model

现在我正在学习`ADO.NET Entity Framework`，有一件事我无法对自己解释。这是我最近一直在使用的教程的源代码：

```
public class Blog
    {
        public int BlogId { get; set; }
        public string Name { get; set; }
        public string Url { get; set; }
        public User UserId { get; set; }

        public virtual List<Post> Posts { get; set; }
    }

    public class Post
    {
        public int PostId { get; set; }
        public string Title { get; set; }
        public string Content { get; set; }

        public int BlogId { get; set; }
        public virtual Blog Blog { get; set; }
    }

    public class User
    {
        public int UserId { get; set; }
        public string Username { get; set; }
        public string DisplayName { get; set; }
    } 
```

首先，我认为使用 of`List<>`是实现类似外键的行为的方式，但现在知道这不是我们需要的原因以及我们在实体中使用`List<>`的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:12:42.907

为了表明博客有很多帖子，当您在 DB 中构建项目时，将是关系 1xBlog--->NxPost，其中 N=unlimited。这将表明每个人都`Blog`可以拥有无​​限数量的`Post`s

# out-of-memory - 流口水规则中的 NPE 导致 CYCLIC_DEPENDENCY 和 OOM

> ID：14875551
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:51.190
> 
> 标签：out-of-memory, drools, drools-guvnor

我们已经建立了一个基本的`Drools`框架`Guvnor UI`。规则是由半技术人员编写的，并且存在错误范围（范围总是存在的，无论是谁编写的 :)）

昨天，有人写了一个开始抛出的规则，`NullPoiterException`但 Drool 似乎将此异常包装到 CYCLIC_DEPENDENCY_ERROR 中并显示相同。

`java.lang.OutOfMemoryError: Java heap space`此外，我们在此问题后立即（3-4 分钟）结束了 OOM 。

堆栈跟踪以获取详细信息：

```
Feb 2013 08:06:55,447 [ERROR]  (SWF Activity  DroolsActivityTaskList-2.2 229) com.amazon.mobius.csi.workers.droolsengine.DroolsEngineActivitiesImpl:runRules:220 [CYCLIC_DEPENDENCY_ERROR]: Error
 while executing Rules, Please validate all rules against any cyclic dependency
Exception executing consequence for rule "final NON EC" in com.amazon.mobius.csi.workers.droolsengine: java.lang.NullPointerException
        at org.drools.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
        at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1101)
        at org.drools.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1029)
        at org.drools.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1251)
        at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:708)
        at org.drools.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:672)
        at org.drools.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:218)
        at org.drools.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:295)
        at com.amazon.mobius.csi.workers.droolsengine.DroolsEngineActivitiesImpl.runRules(DroolsEngineActivitiesImpl.java:216)
        at com.amazon.mobius.csi.workers.droolsengine.DroolsEngineActivitiesImpl.executeRules(DroolsEngineActivitiesImpl.java:145)
        at sun.reflect.GeneratedMethodAccessor173.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.amazonaws.services.simpleworkflow.flow.pojo.POJOActivityImplementation.execute(POJOActivityImplementation.java:63)
        at com.amazonaws.services.simpleworkflow.flow.generic.ActivityImplementationBase.execute(ActivityImplementationBase.java:46)
        at com.amazonaws.services.simpleworkflow.flow.worker.SynchronousActivityTaskPoller.execute(SynchronousActivityTaskPoller.java:214)
        at com.amazonaws.services.simpleworkflow.flow.worker.ActivityTaskPoller$2.run(ActivityTaskPoller.java:95)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
        at com.amazon.mobius.csi.workers.droolsengine.Rule_final_NON_EC.defaultConsequence(Unknown Source)
        at com.amazon.mobius.csi.workers.droolsengine.Rule_final_NON_ECDefaultConsequenceInvoker.evaluate(Unknown Source)
        at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1091)
        ... 18 more 
```

为什么 Drools 将其视为 CYCLIC_DEPENDENCY 并导致 OOM？我们能有其他问题吗？任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:45:07.770

我相信这是规则之间的循环依赖。一个规则的 RHS 导致另一个规则激活，而后者又具有一个 RHS 导致第一个规则激活。因此存在无限循环的规则激活。

在没有看到规则本身的情况下，我建议设置一个议程事件侦听器来记录正在触发的规则。这样，您应该能够看到以这种方式激活的 2 个规则。此类日志记录侦听器的示例如下：

[https://github.com/gratiartis/scattercode-drools-scenarios/blob/master/src/main/java/uk/co/scattercode/drools/util/TrackingAgendaEventListener.java](https://github.com/gratiartis/scattercode-drools-scenarios/blob/master/src/main/java/uk/co/scattercode/drools/util/TrackingAgendaEventListener.java)

# java-native-interface - 使用 OpenNI java 包装器时出现 JRE 致命错误

> ID：14875555
> 
> 赞同：0
> 
> 时间：2013-02-14T13:06:58.757
> 
> 标签：java-native-interface, java, openni

我正在尝试使用 Java 包装器将深度图记录到带有 OpenNI 的 .oni 文件中。这是我当前的代码：

```
Context context = new Context();

DepthGenerator depth = DepthGenerator.create(context);

Recorder recorder = Recorder.create(context, null); //null gives .oni.

recorder.addNodeToRecording(depth);

context.startGeneratingAll();

while(true){
    context.waitAnyUpdateAll();
    recorder.Record();
} 
```

当我运行它时，会产生这个错误：

```
A fatal error has been detected by the Java Runtime Environment:

EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000005b7bd579, pid=8048, tid=6784

JRE version: 7.0-b147
Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode windows-amd64 compressed oops)
Problematic frame:
V  [jvm.dll+0xed579]

Failed to write core dump. Minidumps are not enabled by default on client versions of Windows

An error report file with more information is saved as:

If you would like to submit a bug report, please visit:
http://bugreport.sun.com/bugreport/crash.jsp 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:11:56.230

我想到了。

```
Recorder recorder = Recorder.create(context, "oni"); 
```

我需要指定文件格式。传入一个空值显然不是最好的主意。

# c# - 无法将面板位置设置为 splitContainer 内的当前鼠标位置？

> ID：14875557
> 
> 赞同：1
> 
> 时间：2013-02-14T13:07:02.560
> 
> 标签：c#, .net, winforms

我的表单中有 panel1，我将 visible 属性设置为`panel1.Visible=false;`我想在单击屏幕的任何位置显示此面板。

我需要抓住当前鼠标位置，然后显示`panel1`左上角必须与鼠标光标在同一点的位置！

很抱歉这么初学者，但我真的坚持如何去做。

我试过的代码：

```
 private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
 {
     panel1.Location = e.Location;
     panel1.Show();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:59:50.137

这可能是您完成任务的指南，只需使用[`.PointToScreen`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.pointtoscreen.aspx)and[`.GetCellDisplayRectangle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.getcelldisplayrectangle%28v=vs.80%29.aspx)方法

```
 private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
    {
        if (e.ColumnIndex == -1) return;
        var cellRectangle = dataGridView1.PointToScreen(
            dataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, false).Location);
        panel1.Location = new Point(cellRectangle.X + 50, cellRectangle.Y - 175);
        panel1.Show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:21:48.427

据我所知，你应该使用 PointToScreen 函数 - 更多关于这个[here](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.pointtoscreen.aspx)

# ios - 在 UITableViewController 单元格中创建可编辑的 UITextView

> ID：14875558
> 
> 赞同：0
> 
> 时间：2013-02-14T13:07:02.090
> 
> 标签：ios, uitextview, uitableview

我以编程方式在 uitableviewcontroller 中创建了一个 uitextview，但我无法编辑 textview。这是我的表格布局的概述：

第 1 行：UILabel

第 2 行：不可编辑的 UITextview

第 3 行：UILabel

第 4 行：可编辑的 UITextview

这就是我正在做的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
UILabel *label = nil;
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(indexPath.row%2==0)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, cell.frame.size.width, 50)];
    [label setBackgroundColor:[self.cellBackgroundColor objectAtIndex:indexPath.row]];
    [label setText:[self.celltitle objectAtIndex:indexPath.row]];
    label.font=[UIFont fontWithName:[self.cellFontName objectAtIndex:indexPath.row] size:[[self.cellFontSize objectAtIndex:indexPath.row] integerValue]];

    label.textAlignment = NSTextAlignmentLeft;
    [[cell contentView] addSubview:label];
}
else{

    UITextView *messageBox= [[UITextView alloc] initWithFrame:CGRectMake(0, 0, cell.frame.size.width, 150)];
   cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.userInteractionEnabled=YES;
    if(indexPath.row==3)
    {
       [messageBox setEditable:YES];
[messageBox setUserInteractionEnabled:YES];
        messageBox.delegate=self;
        messageBox.editable=YES;
    }
     [cell.contentView addSubview: messageBox];

}
return cell;} 
```

我还在头文件中设置了 textviewdelegate 和 textviewshouldbeginediting 方法，但 row4 textview 仍然不可编辑......有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:24:14.133

除了使 messageBox 可设置编辑和设置用户交互启用之外，您还必须确保在 UITableViewController 中启用这些属性，因为 UITextView 嵌套在其中！

```
[tableView setUserInteractionEnabled:YES];
[cell setUserInteractionEnabled:YES];
[messageBox setEditable:YES];
[messageBox setUserInteractionEnabled:YES]; 
```

（*注意，您的 tableView 和 TableViewCell 在此函数中都具有相同的名称，因此我将该代码放在其他地方，但我将其添加到上面以防万一）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:15:59.733

试试这个..也许它会帮助你..它为我工作

```
 if(indexPath.row==3)
    {
        messageBox.delegate=self;
       [messageBox setEditable:YES];
       [messageBox setUserInteractionEnabled:YES];
        messageBox.editable=YES;
        [cell addSubview: messageBox];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:47:37.083

我试过你的代码..它对我有用..请参阅下面的更改

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UILabel *label = nil;
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if (nil == cell)
  {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    if(indexPath.row%2==0)
    {
        label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, cell.frame.size.width, 50)];
          [label setBackgroundColor:[self.cellBackgroundColor objectAtIndex:indexPath.row]];
         [label setText:[self.celltitle objectAtIndex:indexPath.row]];
         label.font=[UIFont fontWithName:[self.cellFontName objectAtIndex:indexPath.row] size:[[self.cellFontSize objectAtIndex:indexPath.row] integerValue]];

        label.textAlignment = NSTextAlignmentLeft;
        [[cell contentView] addSubview:label];
    }
    else{

        UITextView *messageBox= [[UITextView alloc] initWithFrame:CGRectMake(0, 0, cell.frame.size.width, 100)];

        cell.userInteractionEnabled=YES;
        if(indexPath.row==1)
        {
            // Uneditable UITextview
            messageBox.editable=NO;
        }
        [cell.contentView addSubview: messageBox];

    }
}
return cell;
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T13:29:06.063

您必须在使用之前初始化单元格的内容视图。尝试这个：

```
cell.contentView = [[UIView alloc] initWithFrame:CGRectMake(0,0,cell.frame.size.width, 150)]; 
```

# java - Android Emulator 在重新启动应用程序时总是抛出异常

> ID：14875575
> 
> 赞同：1
> 
> 时间：2013-02-14T13:07:46.787
> 
> 标签：java, android, android-emulator, nullreferenceexception

我创建了一个简单的 Android 应用程序，它可以在 Android Emulator 上正常运行。
但是，当我修改某些内容（例如添加变量）并按运行时，它会将 apk 文件发送到模拟器，并显示“不幸的是 MyApplication 已停止工作”，然后重新启动它并且它运行良好。
我检查了日志，它与我的应用程序无关，它抱怨 APK 加载器中有一些 NullException。我也重新启动了模拟器和 Eclipse，我使用最新的 SDK 来构建我的应用程序，我的 Min API 级别是 8，目标是 16。
我不使用本机代码。
我在这里粘贴错误日志：

```
02-14 12:55:43.541：E/AndroidRuntime(723)：致命异常：主要
02-14 12:55:43.541: E/AndroidRuntime(723): java.lang.RuntimeException: 无法实例化应用程序 android.app.Application: java.lang.NullPointerException
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.LoadedApk.makeApplication(LoadedApk.java:501)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:4124)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.ActivityThread.access$1300(ActivityThread.java:130)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.os.Handler.dispatchMessage(Handler.java:99)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.os.Looper.loop(Looper.java:137)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.ActivityThread.main(ActivityThread.java:4745)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 java.lang.reflect.Method.invokeNative(Native Method)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 java.lang.reflect.Method.invoke(Method.java:511)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-14 12:55:43.541: E/AndroidRuntime(723): at dalvik.system.NativeStart.main(Native Method)
02-14 12:55:43.541: E/AndroidRuntime(723): 由: java.lang.NullPointerException 引起
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:377)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.LoadedApk.getClassLoader(LoadedApk.java:320)
02-14 12:55:43.541: E/AndroidRuntime(723): 在 android.app.LoadedApk.makeApplication(LoadedApk.java:493)
02-14 12:55:43.541: E/AndroidRuntime(723): ... 11 更多

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:16:31.323

您需要在再次启动之前终止该应用程序。我不知道还有其他方法可以做到这一点。您不能同时运行两个相同的进程。我的猜测是，它的效果很好，但第二次，它没有。

您也许可以运行模拟器的另一个实例，但不建议这样做。

# r - 更改 ggplot 图例中的线型

> ID：14875582
> 
> 赞同：20
> 
> 时间：2013-02-14T13:08:09.277
> 
> 标签：r, ggplot2

我有一个df：

```
head(hej3)

  Year          variable  N   Sum      Mean        sd   Variance Median Min  Max
1 1901     Delägare.män. 85 18089 212.81176 365.39168 133511.083  110.0   5 2771
2 1901 Delägare.kvinnor. 48  3509  73.10417  97.84209   9573.074   34.5   1  414
3 1902     Delägare.män. 92 19783 215.03261 363.63529 132230.625  111.5   2 2827
4 1902 Delägare.kvinnor. 53  3872  73.05660  94.12827   8860.131   40.0   1  408
5 1903     Delägare.män. 99 21123 213.36364 366.58411 134383.907  109.0   2 2994
6 1903 Delägare.kvinnor. 55  4201  76.38182  93.85006   8807.833   40.0   1  390

dput(hej3)

structure(list(Year = c(1901L, 1901L, 1902L, 1902L, 1903L, 1903L, 
1904L, 1904L, 1905L, 1905L, 1906L, 1906L, 1907L, 1907L, 1908L, 
1908L, 1909L, 1909L, 1910L, 1910L, 1911L, 1911L, 1912L, 1912L, 
1915L, 1915L, 1921L, 1921L, 1924L, 1924L, 1927L, 1927L, 1930L, 
1930L), variable = structure(c(1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 
1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 
1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("Delägare.män.", 
"Delägare.kvinnor."), class = "factor"), N = c(85, 48, 92, 53, 
99, 55, 112, 63, 116, 69, 126, 76, 130, 78, 130, 80, 129, 83, 
125, 81, 118, 77, 97, 72, 50, 41, 42, 34, 42, 33, 26, 20, 29, 
29), Sum = c(18089, 3509, 19783, 3872, 21123, 4201, 23686, 5087, 
26751, 5652, 28198, 6493, 31638, 6934, 32611, 7194, 36133, 7025, 
30138, 6884, 26935, 6900, 20333, 8021, 18929, 5619, 11157, 4332, 
10778, 4437, 7974, 3416, 9270, 3793), Mean = c(212.811764705882, 
73.1041666666667, 215.032608695652, 73.0566037735849, 213.363636363636, 
76.3818181818182, 211.482142857143, 80.7460317460317, 230.612068965517, 
81.9130434782609, 223.793650793651, 85.4342105263158, 243.369230769231, 
88.8974358974359, 250.853846153846, 89.925, 280.100775193798, 
84.6385542168675, 241.104, 84.9876543209877, 228.262711864407, 
89.6103896103896, 209.618556701031, 111.402777777778, 378.58, 
137.048780487805, 265.642857142857, 127.411764705882, 256.619047619048, 
134.454545454545, 306.692307692308, 170.8, 319.655172413793, 
130.793103448276), sd = c(365.391684625249, 97.8420871855394, 
363.635291602196, 94.1282707255493, 366.5841066326, 93.8500559223754, 
373.650556559185, 106.929577104772, 405.688052605677, 109.41727188241, 
421.942750950132, 110.801123403007, 462.951922738037, 115.87931358968, 
502.602700547356, 117.741378786224, 642.043293966629, 114.535815924939, 
459.068496259615, 114.82317860815, 360.246791665663, 119.967995276389, 
293.702281347504, 224.695704072853, 460.551137890511, 162.282154166672, 
231.68690199813, 139.634830604701, 226.30617641151, 143.124310240498, 
343.058102277823, 181.389548819806, 410.53721563181, 192.111645239046
), Variance = c(133511.083193277, 9573.0740248227, 132230.625298614, 
8860.13134978229, 134383.907235622, 8807.832996633, 139614.738416988, 
11433.9344598054, 164582.796026986, 11972.1393861893, 178035.685079365, 
12276.8889473684, 214324.482766846, 13428.0153180153, 252609.474597496, 
13863.032278481, 412219.591327519, 13118.4531295915, 210743.884258065, 
13184.362345679, 129777.750905403, 14392.3198906357, 86261.0300687285, 
50488.159428795, 212107.350612245, 26335.4975609756, 53678.8205574913, 
19497.8859180036, 51214.4854819977, 20484.5681818182, 117688.861538462, 
32902.1684210526, 168540.805418719, 36906.8842364532), Median = c(110, 
34.5, 111.5, 40, 109, 40, 112, 47, 109.5, 34, 111.5, 35, 120.5, 
41.5, 124.5, 46.5, 125, 44, 124, 44, 121, 44, 112, 42.5, 251, 
85, 199.5, 93.5, 186, 88, 206, 111, 185, 50), Min = c(5, 1, 2, 
1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 
19, 1, 19, 1, 19, 1, 49, 5, 0, 0), Max = c(2771, 414, 2827, 408, 
2994, 390, 3196, 506, 3421, 524, 3680, 553, 3952, 570, 4271, 
581, 4585, 601, 3898, 602, 2603, 592, 1951, 1699, 2269, 675, 
1151, 576, 1122, 565, 1680, 652, 2086, 809)), .Names = c("Year", 
"variable", "N", "Sum", "Mean", "sd", "Variance", "Median", "Min", 
"Max"), row.names = c(NA, -34L), class = "data.frame") 
```

我做了一个情节：

```
theplot<- ggplot(subset(hej3,variable=="Delägare.män."), aes(x = Year)) + 

geom_line(aes(y = Mean, color = "Medelvärde"), 
size = 1.5, linetype = 1, alpha = 1) + 

geom_ribbon(aes(ymax = Max, 
ymin = Min, fill = "Delägare Män Max/Min"), linetype = 3, 
alpha = 0.4) + 

geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
colour = "grey50", linetype = 3, alpha = 0.8)+

#geom_line(aes(y = Sum, 
#color = "Sum Delägare Män"), size = 0.9, linetype = 1, alpha = 1) + 

geom_line(aes(y = N, 
                color = "Antal Kassor"), size = 0.9, linetype = 2, alpha = 1)+

scale_y_continuous(breaks = seq(-500, 4800, by = 100), limits = c(-500, 4800), 
                   labels = seq(-500, 4800, by = 100))+ 
  scale_x_continuous(breaks=seq(1901,1930,2))+
labs(title = "Manliga Delägare i Yrkeskassor") +

  scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde"),  
                     values = c("Antal Kassor" = "black", "Medelvärde" = "#6E6E6E")) + 
 scale_fill_manual(" Ribbons", breaks = c("Delägare Män Max/Min", "Mean +- sd"), 
                    values = c(`Delägare Män Max/Min` = "grey50", `Mean +- sd` = "#4E4E4E")) + 
  theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
        legend.background = element_rect(fill = "white", colour = "gray30")) + 
  guides(fill = guide_legend(keywidth = 0.9, keyheight = 1)) 
```

![在此处输入图像描述](../Images/489c7aec9fbdcae577f6926d8c14ece4.png)

我有`2 questions`：

1.  如何更改图例中的线型？我希望`"Antal Kassor`图例中的变量像图片中那样虚线（linetype = 2）。

2.  如何“放大” y 轴的一部分？我想在 y 轴上放大 -300 och 600 之间的区域。

我知道这里有很多 ggplot 向导:) 最好的问候！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-14T14:08:17.813

要使用原始数据框，您应该更改为行。在两个调用中`geom_line()`放入`linetype=`并将`aes()`类型设置为变量名。

```
 + geom_line(aes(y = Mean, color = "Medelvärde",linetype = "Medelvärde"), 
            size = 1.5, alpha = 1)  
 + geom_line(aes(y = N, 
                color = "Antal Kassor",linetype="Antal Kassor"), size = 0.9, alpha = 1) 
```

然后你应该添加`scale_linetype_manual()`与 for 相同的名称，`scale_colour_manual()`并设置你需要的线型。

```
+scale_linetype_manual("Variabler",values=c("Antal Kassor"=2,"Medelvärde"=1)) 
```

还`guides()`应该调整`linetype`并`colours`更好地显示图例中的线条。

```
+ guides(fill = guide_legend(keywidth = 1, keyheight = 1),
    linetype=guide_legend(keywidth = 3, keyheight = 1),
    colour=guide_legend(keywidth = 3, keyheight = 1)) 
```

![在此处输入图像描述](../Images/b477799dd096b0a3e36eb25eb32f97ae.png)

这是使用的完整代码：

```
theplot<- ggplot(subset(hej3,variable=="Delägare.män."), aes(x = Year)) + 

  geom_line(aes(y = Mean, color = "Medelvärde",linetype = "Medelvärde"), 
            size = 1.5, alpha = 1) + 

  geom_ribbon(aes(ymax = Max, 
                  ymin = Min, fill = "Delägare Män Max/Min"), linetype = 3, 
              alpha = 0.4) + 

  geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
              colour = "grey50", linetype = 3, alpha = 0.8)+

  #geom_line(aes(y = Sum, 
  #color = "Sum Delägare Män"), size = 0.9, linetype = 1, alpha = 1) + 

  geom_line(aes(y = N, 
                color = "Antal Kassor",linetype="Antal Kassor"), size = 0.9, alpha = 1)+

  scale_y_continuous(breaks = seq(-500, 4800, by = 100), limits = c(-500, 4800), 
                     labels = seq(-500, 4800, by = 100))+ 
  scale_x_continuous(breaks=seq(1901,1930,2))+
  labs(title = "Manliga Delägare i Yrkeskassor") +

  scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde"),  
                     values = c("Antal Kassor" = "black", "Medelvärde" = "#6E6E6E")) + 
  scale_fill_manual(" Ribbons", breaks = c("Delägare Män Max/Min", "Mean +- sd"), 
                    values = c(`Delägare Män Max/Min` = "grey50", `Mean +- sd` = "#4E4E4E")) + 
  scale_linetype_manual("Variabler",values=c("Antal Kassor"=2,"Medelvärde"=1))+
  theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
        legend.background = element_rect(fill = "white", colour = "gray30")) + 
  guides(fill = guide_legend(keywidth = 1, keyheight = 1), linetype=guide_legend(keywidth = 3, keyheight = 1),
         colour=guide_legend(keywidth = 3, keyheight = 1)) +
     coord_cartesian(ylim = c(-300, 600)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:35:28.663

1.  在这里，您要根据变量更改线型。所以，我们创建一个新的数据集：

    ```
    R> library(reshape2)
    R> dd = melt(hej3, colnames(hej3)[c(1:2, 4, 6:10)])
    R> dd = dd[dd$variable=="Delägare.män.",c(1, 9:10)]
    R> head(dd, 4)
       Year variable value
    1  1901        N    85
    3  1902        N    92
    5  1903        N    99
    7  1904        N   112 
    ```

    然后我们删除您的两个 geom_line 函数调用并替换为：

    ```
    + geom_line(data=dd, aes(x=Year, y = value, linetype=variable), 
              size = 1.5,  alpha = 1) + 
    ```

    线型根据您的变量而变化。

2.  放大绘图区域（[帮助页面](http://docs.ggplot2.org/0.9.2.1/coord_cartesian.html)）

    ```
    + coord_cartesian(ylim = c(-300, 600)) 
    ```

![在此处输入图像描述](../Images/7591b605161b28762092b0d1764411a5.png)

* * *

完整的ggplot2代码供参考：

```
ggplot(subset(hej3,variable=="Delägare.män."), aes(x = Year)) + 
geom_line(data=dd, aes(x=Year, y = value, linetype=variable), 
          size = 1.5,  alpha = 1) + 
geom_ribbon(aes(ymax = Max, 
                ymin = Min, fill = "Delägare Män Max/Min"), linetype = 3, 
            alpha = 0.4) + 
geom_ribbon(aes(ymax = Mean+sd, ymin = Mean-sd, fill = "Mean +- sd"), 
            colour = "grey50", linetype = 3, alpha = 0.8)+
scale_color_manual("Variabler", breaks = c("Antal Kassor","Medelvärde"),  
                   values = c("Antal Kassor" = "black", "Medelvärde" = "#6E6E6E")) + 
scale_fill_manual(" Ribbons", breaks = c("Delägare Män Max/Min", "Mean +- sd"), 
                  values = c(`Delägare Män Max/Min` = "grey50", `Mean +- sd` = "#4E4E4E")) + 
theme(legend.direction = "horizontal", legend.position = "bottom", legend.key = element_blank(), 
      legend.background = element_rect(fill = "white", colour = "gray30")) + 
guides(fill = guide_legend(keywidth = 0.9, keyheight = 1))    +
coord_cartesian(ylim = c(-300, 600)) 
```

# java - 方法 getResourceAsStream 在 ubuntu 上返回 null

> ID：14875583
> 
> 赞同：7
> 
> 时间：2013-02-14T13:08:10.537
> 
> 标签：java, eclipse, ubuntu, osgi

最近我遇到了 getResourceAsStream 方法的非常奇怪的行为。

我有一个在 Windows 上开发的应用程序。这个应用程序是一个基于 OSGI 框架的桌面应用程序。我创建了一个包，设置了所需的包并将一些数据文件添加到这些包中，以便它们包含在 jar 文件中。

我使用它加载数据：

```
this.getClass().getResourceAsStream("pl/com/myapp/resource.dat"); 
```

它在 Eclipse 中以及当我部署我的应用程序并在 IDE 外部的系统上运行它时都非常有效。

然后我将开发转移到 ubuntu 12.04。令我惊讶的是，上面提到的方法总是返回 null。数据在它应该在的地方。所有设置看起来都不错。任何配置文件中都没有绝对路径。

我尝试了很多不同的东西。我将路径更改为：

```
this.getClass().getResourceAsStream("/pl/com/myapp/resource.dat"); 
```

我试图不包含包根目录，但插入一个相对于类位置的路径（假设我的类是：pl.com.myapp.MyClass）：

```
this.getClass().getResourceAsStream("resource.dat"); 
```

我也试过：

```
this.getClass().getResourceAsStream("./resource.dat"); 
```

但没有任何效果:(

但是当我创建一个简单的 Java 应用程序时，一切都很顺利，并且该方法返回了正确的流。

有没有人遇到过这样的问题？

我在 ubuntu 12.04 上使用 eclipse-juno。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:12:32.087

请注意区分大小写，因为与 Windows 路径相比，Linux 路径是区分大小写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:39:07.077

只是一个猜测，但有可能`this.getClass()`不是你认为的那个类吗？例如，如果有人对您进行子类`this.getClass()`化，则将返回子类而不是您的基类，后者可能位于另一个捆绑包中，因此无法查看资源。

在进行此类资源查找时，您应该始终使用文字类名，例如：`MyClass.class.getResourceAsStream()`.

# wordpress - 谷歌是否知道 2 个网站使用相同的模板/wordpress 主题？

> ID：14875584
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:08:19.303
> 
> 标签：wordpress, wordpress-theming

我想知道谷歌是否知道 2 个网站使用相同的模板（在我的例子中是 wordpress 主题）以及如何。

它是否索引 html 结构并与其他站点、css 类、属性进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:24:50.760

Google 可以通过抓取主题中包含的 styles.css 文件来查看您使用的主题。

Google 不会因为您在多个网站上使用相同的主题而受到处罚。他们主要关心排名中使用的内容、反向链接和其他传统因素。

此规则的一个例外是，如果发现某个主题违反了他们的规则或准则，那么他们可能会因为您使用该主题而对您进行处罚。这方面的例子是用于人为增加 Adsense 点击的主题，非常努力地挤压访问者加入您的时事通讯，或者自动抓取内容等等。

更改 css 文件中的名称无济于事，因为 Google 在查看网站足迹方面非常复杂，因此需要更改一些 html 和 css 名称。最好只是避免使用任何可能给您带来麻烦的主题。

使用普通（免费或高级）主题并不需要担心谷歌携带它。

# php - 如何防止会话劫持？

> ID：14875585
> 
> 赞同：0
> 
> 时间：2013-02-14T13:08:20.940
> 
> 标签：php, session, pdo

我正在尝试制作一个防止会话劫持的登录脚本。我的问题是：我该怎么做？我真的不明白如何以安全的方式做到这一点。目前我有这个代码。

```
if (!empty($_POST["naam"]) && !empty($_POST["wachtwoord"]))
{
    $naam = $_POST["naam"];
    $wachtwoord = $_POST["wachtwoord"];
    $salt = "boterhammetkaas";
    $wachtwoord = sha1($wachtwoord.$salt);
    $query =$db->prepare("SELECT * FROM opdracht4 WHERE naam = :naam and wachtwoord = :wachtwoord");
    $query->bindParam(':naam', $naam, PDO::PARAM_STR);
    $query->bindParam(':wachtwoord', $wachtwoord, PDO::PARAM_STR);
    $query->execute();
    $rij = $query->rowCount();
    if($rij == 1) 
    {
    $result = $query->fetch(PDO::FETCH_OBJ);
    $status = $result->status;
    //setcookie("TestCookie", $status, time()+3600);
    //setcookie("ip", $ip, time()+3600);
    $_SESSION['status']= $status;
    $_SESSION['naam']= $naam;
    }
    else 
    {
       $antwoord = 'Deze gegevens zijn niet bekend';
    }

 if (!empty($_SESSION["status"]))
        {
            if ($_SESSION["status"] == 1)
            {
                include 'beheerder4.php';
                $page = 'overzicht';
            }
            if ($_SESSION["status"] == 2)
            {
                include 'projectleider4.php';
                $page = 'overzicht';
            }
            if ($_SESSION["status"] == 3)
            {
                include 'gebruiker4.php';
                $page = 'overzicht';
            }
        } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:17:44.970

只需对您的服务器使用适当的 SSL/TLS 加密，并将您的 cookie 保存为安全的（仅 https - 第 6 个参数到`setcookie`），就可以防止大多数会话劫持尝试。

这将阻止中间人攻击和浏览器扩展（如 firesheep）嗅探数据包以获取此信息。

没有什么可以阻止某人物理访问计算机。这是不可能的，也不值得保护（大多数人在他们的计算机上比他们的社交网络帐户更愿意丢失或掌握在其他人手中）。

# html - 在 Powershell 中的 html 标记之间查找字符串

> ID：14875586
> 
> 赞同：4
> 
> 时间：2013-02-14T13:08:24.287
> 
> 标签：html, powershell

我正在尝试编写一个 Powershell 脚本，该脚本将在 HTML 文件中的两个 HTML 标记之间提取一个字符串。我不知道值是什么，但我知道需要搜索哪些标签。此外，我知道标签*并不*总是出现在一行的开头（即，它们可以在一行文本的中间）。最后，我也知道标签和它们之间的字符串永远不会跨越一条线。

我将文件的路径存储在变量中

```
$filePath = "C:\Path\file.html" 
```

我试图找到和之间的任何值`<h6>`并将`</h6>`这些值存储在一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:21:40.110

尝试

```
$myarray = gc $filepath | 
% { [regex]::matches( $_ , '(?<=<h6>\s+)(.*?)(?=\s+</h6>)' ) } | 
select -expa value 
```

如果有的话，这会删除起始和尾随空格。如果您还需要此空格`\s+`，请从正则表达式模式中删除

# c# - 检查对象是否属于泛型类

> ID：14875590
> 
> 赞同：0
> 
> 时间：2013-02-14T13:08:36.587
> 
> 标签：c#, generics

我已经定义了一个泛型类`MultiSlot<T>`。

在某些时候，我想检查一个对象是否属于这种类型（即 type `MultiSlot`），但不是特定 type `T`。基本上，我想要的是`MultiSlotl<T>`输入某个`if`子句的所有对象，而不管它们的具体`T`情况（假设它们都属于 的某个子类`T`）。

指示性（但错误！）语法是：`if (obj is MultiSlot<>)`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:10:26.640

看看 [检查一个类是否派生自一个泛型类](https://stackoverflow.com/questions/457676/check-if-a-class-is-derived-from-a-generic-class)：

简短的回答：

```
 public static bool IsSubclassOfRawGeneric(Type generic, Type toCheck)
    {
        while (toCheck != null && toCheck != typeof(object))
        {

            var cur = toCheck.IsGenericType ? toCheck.GetGenericTypeDefinition() : toCheck;
            if (generic == cur)
                return true;
            toCheck = toCheck.BaseType;

        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:12:17.063

您可以使用该[`Type.GetGenericTypeDefinition()`](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)方法，如下所示：

```
public bool IsMultiSlot(object entity)
{
  Type type = entity.GetType();
  if (!type.IsGenericType)
    return false;
  if (type.GetGenericTypeDefinition() == typeof(MultiSlot<>))
    return true;
  return false;
} 
```

你可以像这样使用它：

```
var listOfPotentialMultiSlots = ...;
var multiSlots = listOfPotentialMultiSlots.Where(e => e.IsMultiSlot()); 
```

请注意，这将返回`false`子类的实例（即`StringMultiSlot : MultiSlot<string>`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:12:48.567

一个不那么复杂的方法：

```
var type = obj.GetType();
var isMultiSlot = type.IsGenericType && 
                  type.GetGenericTypeDefinition() == typeof (MultiSlot<>); 
```

但是，这不适用于从 继承的类型`MultiSlot<T>`。

# php - 在 mysql 查询中使用特殊字符会引发异常

> ID：14875591
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:08:39.853
> 
> 标签：php, mysql, sql

这是mysql查询

```
SELECT course_id
FROM course_master
WHERE year_id = '6'
AND course_name = ''What is Test?': Perspectives' 
```

当我运行查询时，由于特殊字符问题，它会引发语法错误。我正在使用 mysql_escape_string 转义，但它不起作用。如何转义这些字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:14:09.097

> 我正在使用 mysql_escape_string 进行转义，但它不起作用。

你用错了。您只需格式化字符串值，而不是整个查询

```
// here are your variables
$year = 6;
$name = "'What is Test?': Perspectives";

// let's format them
$year = intval($year);
$name = mysql_real_escape_string($name);

// and then insert in a query
$sql  = "SELECT course_id FROM course_master 
         WHERE year_id = $year AND course_name = '$name'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:09:48.713

当执行查询并且值有单引号时，将单引号加倍，这样就不会出错。

```
SELECT course_id
FROM course_master
WHERE year_id = '6'
AND course_name = '''What is Test?'': Perspectives' 
```

但是如果你是在 PHP 上做的，那就用`PreparedStatement`那个。这也将防止 `SQL Injection`. 下面的文章将告诉你如何使用`PHP Extensions.`

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:10:25.093

试试这个查询 -

```
SELECT course_id
FROM course_master
WHERE year_id = 6
AND course_name = '''What is Test?'': Perspectives' 
```

或使用转义 -

```
SELECT course_id
FROM course_master
WHERE year_id = 6
AND course_name = '\'What is Test?\': Perspectives' 
```

# php - 如何每天选择一个唯一的IP（每天1个唯一的IP）？

> ID：14875596
> 
> 赞同：0
> 
> 时间：2013-02-14T13:08:52.157
> 
> 标签：php, sql, select, mysqli

**结构表：**

```
date  (datetime)
ip    (varchat,50) 
```

**我有疑问：**

```
SELECT * FROM Table GROUP BY ip Order by date Desc 
```

请告诉我如何在几天内选择一个唯一的IP（每天1个唯一的IP）？

![数据](../Images/2ce358f80f08d9d40f181c47a85ee79e.png)

**我需要得到下一个结果：**

```
2013-02-14 17:14:25    31.132.154.142.
2013-02-14 17:15:01    31.132.154.142.
2013-02-13 16:40:47    31.132.154.142. 
```

*我每天都需要获得唯一的IP*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:14:20.093

```
SELECT DISTINCT(ip) FROM Table GROUP BY date Order by date Desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:36:28.213

```
SELECT MAX(`date`),`ip` FROM Table GROUP BY `ip`,DATE(`date`) 
```

**结尾**

# sdk - 开发 Windows Phone 应用程序需要安装什么？

> ID：14875601
> 
> 赞同：1
> 
> 时间：2013-02-14T13:09:26.317
> 
> 标签：sdk, windows-phone

这可能是一个愚蠢的问题。我的笔记本电脑装有 Windows 7。我安装了 Visual Studio 2012。但没有 Windows Phone 项目。我曾尝试安装 Windows Phone sdk 8，但它说我需要 Windows 8 来安装它。

我曾尝试安装 Windows Phone sdk 7，但它说我需要 Visual Studio 2010 服务包。我不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:56:49.283

你不能在 Windows 7 上安装 Windows Phone 8 SDK，所以如果你想在 Windows 7 上开发，你必须安装[**Windows Phone 7 SDK**](http://www.microsoft.com/en-us/download/details.aspx?id=27570)。

它包括适用于 Windows Phone 的 Visual Studio 2010 Express。如果您已经安装了 VS2010，则确实需要[**SP1 。**](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# android - 无法编译 Vitamio 演示

> ID：14875606
> 
> 赞同：1
> 
> 时间：2013-02-14T13:09:42.453
> 
> 标签：android, compilation, undefined, android-videoview, vitamio

我成功安装了 Zi 库和 VitamioBundle，但我无法编译 VitamioDemo 示例。

Eclipse 表示方法 setVideoPath、setVideoQuality、setMediaController 和 setVideoLayout 对于 VideoView 类型是未定义的。这很奇怪，因为 VitamioBundle 作为库正确链接到项目。任何想法？

别的东西：为什么我必须将整个 VitamionBundle 链接为一个库？vitamio.jar 文件不应该足够吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:44:19.450

如果您想使用 VitamioDemo，请查看[VitamioBundle V3.0](https://github.com/yixia/VitamioBundle/tree/v3.0)。不是大师

# vba - 使用脚本在 Outlook 中基于规则的电子邮件处理

> ID：14875610
> 
> 赞同：0
> 
> 时间：2013-02-14T13:10:19.880
> 
> 标签：vba, outlook

我有大约 8 组不同的电子邮件 ID 组，它们在我的 Outlook 客户端中分配了一个特定的类别。所有电子邮件 ID 都存在于 SQL Server 数据库实例的表中，并且可以根据它们所属的类别进行获取。

现在我希望将收到的邮件标记为一个类别，并自动将该邮件转发到使用数据库中的脚本获取的电子邮件 ID。

第一个问题 - 是否可以编写脚本并将其附加到规则中？

第二个问题 - 是否有必要让 Outlook 客户端始终开启才能使该系统保持活动状态？我的意思是这个基于脚本的规则系统是作为服务器规则工作还是作为客户端规则工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:03:56.097

您可以将 VBA 宏附加到邮件规则。它看起来如下：

```
Sub MyMessageRule(newMail As Outlook.mailItem)
....
End Sub 
```

可以在此宏中使用 SQL Server DB 连接。

也可以使用服务器端脚本。但这需要访问权限和更多技能。

# c# - 仅对网格中的 1 个单元格禁用行编辑

> ID：14875611
> 
> 赞同：1
> 
> 时间：2013-02-14T13:10:20.033
> 
> 标签：c#, wpf, vb.net, datagrid, xceed

我们有一个 Exceed DataGridControl。通过弹出窗口启用行编辑。
在我们的 WPF 视图后面的代码中，我们检查特定列并添加一个内联编辑器。

当我们单击该特定单元格时，行编辑器和单元格编辑器都已启用，这会导致一些不一致的数据。

我想禁用行编辑，但只有当使用它自己的内联编辑器单击单元格时。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:50:27.390

问题通过以下代码解决：

```
Public Sub PopupEditorMethod(ByVal sender As Object, ByVal e As ExecuteCommandEventArgs(Of OurObject))
    Dim row = CType(e.OriginalSource, Xceed.Wpf.DataGrid.DataRow)
    row.EndEdit()

    'popup implementation
End Sub 
```

我们取消单元格父行的行编辑。这确保我们没有任何不一致的值。

# c++ - eclipse CDT：搜索 /usr/lib 虽然不在 lib 搜索路径中

> ID：14875613
> 
> 赞同：1
> 
> 时间：2013-02-14T13:10:25.963
> 
> 标签：c++, ubuntu, linker, eclipse-cdt, dynamic-linking

我正在尝试运行一些 pcl 代码（来自他们的网站）。我目前在 ubuntu 上使用 boost 1_51（我构建的）和我的 Eclipse C++ Build->Settings 我 `/home/aly/libs/boost_1_51_0/stage/include`在包含路径和`/home/aly/libs/boost_1_51_0/stage/lib`库搜索路径中。我没有`/usr/include`或`/usr/lib`。

在运行时我遇到了一些 boost 错误，这让我认为它可能没有针对正确的库运行，因为 boost_1_46 是内置的`/usr/lib`（这是 ubuntu 存储库中的最新版本）。所以我`libboost_timer.so`从目录中删除了一个 lib 文件（）`/usr/lib`并重新编译（这很好）然后运行。在运行时我收到以下错误：

```
error while loading shared libraries: libboost_thread.so.1.46.1: cannot open shared object file: N 
```

我的问题是，为什么如果`/usr/include`并且`/usr/lib`不在我的包含路径和库搜索路径中，我的程序是否在寻找 1.46 版本？

附加信息：

编译 eclipse 正在做： Invoking: Cross G++ Linker

```
g++ -L/home/aly/libs/OpenCV-2.4.3/release/lib -L/home/aly/libs/boost_1_51_0/stage/lib -o "3DObjectDetection"  ./src/HFNodeSplitCalculator.o ./src/HFNodeUtils.o ./src/HFTreeNode.o ./src/HoughForest.o ./src/ImagePatch.o ./src/Main.o ./src/PatchGenerator.o ./src/utils.o   -lvtkmetaio -lvtkImaging -lvtkIO -lvtkViews -lvtkVolumeRendering -lvtkalglib -lvtkDICOMParser -lvtkInfovis -lvtkFiltering -lvtkGeovis -lGL -lopencv_core -lopencv_highgui -lopencv_imgproc -lpcl_io -lpcl_visualization -lpcl_common -lpcl_surface -lpcl_kdtree -lpcl_search -lpcl_geometry -lpcl_features -lvtkproj4 -lvtkParallel -lvtksys -lvtkRendering -lvtkCommon -lboost_serialization -lboost_timer -lpthread -lboost_context -lboost_date_time -lboost_system -lboost_thread -lboost_filesystem -lboost_random -lboost_regex -lglut -lvtkexoIIc -lvtkCharts -lvtkGenericFiltering
Finished building target: 3DObjectDetection 
```

而我`$LD_LIBRARY_PATH`的是

```
:/home/aly/libs/boost_1_51_0/stage/lib/:/home/aly/libs/OpenCV-2.4.2/build/lib/:/usr/lib/:/home/aly/libs/cuda-5.0/lib:/home/aly/libs/cuda-5.0/lib64 
```

如您所见， boost lib 目录出现在之前`/usr/lib`

# cordova - 如何在 GCM 和 Phonegap PushPlugin 中使用 collapse_key

> ID：14875623
> 
> 赞同：1
> 
> 时间：2013-02-14T13:10:58.410
> 
> 标签：cordova, push-notification, phonegap-plugins, google-cloud-messaging

我可以使用 PushPlugin for Phonegap 发送带有有效负载的 GCM 通知。但是我需要的只是一条发送到同步的消息。根据我的阅读和理解，没有有效负载和collapse_key的消息将是可行的方法。但是，我不知道如何通过 PushPlugin 实现和使用它。

如果我不更改插件的代码，我可以在设备中获取带有有效负载的属性消息。我期望不使用该属性并能够在设备中获取属性 collapse_key，但看起来它不能以这种方式工作或没有为 PushPlugin 实现。

我是对的还是有其他方法可以走？

谢谢你。

# python - 通过正则表达式获取列表中字典项的索引

> ID：14875628
> 
> 赞同：0
> 
> 时间：2013-02-14T13:11:19.437
> 
> 标签：python, regex, list, dictionary, indexing

我有一个清单：

```
[
  {
    'avail': 'blabla',
    'rep_main': 'qweqwe',
    ....
  },
  {
    'avail': 'asdasd',
    'rep_main': 'zxczxc',
    ....
  },
  ...
] 
```

我想通过正则表达式获取项目的索引，就像没有正则表达式的版本：

```
[list['rep_main'] for elem in list].index('qweqwe') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:14:21.790

如果`pattern`是模式[并且](http://docs.python.org/2/library/re.html)`re`是[模块](http://docs.python.org/2/library/re.html)：[`re`](http://docs.python.org/2/library/re.html)

```
[i for i, elem in enumerate(mylist) if re.match(pattern, elem['rep_main'])] 
```

您可以使用[`re.search`而不是`re.match`](http://docs.python.org/2/library/re.html#search-vs-match).

[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)是一个方便的内置函数，可让您使用索引而不会那么`for i in range(len(mylist))`难看。

注意：上面的表达式显然计算为一个列表。`.index()`方法返回第一个匹配的索引。为此，请编写：

```
next(i for i, elem in enumerate(mylist) if re.match(pattern, elem['rep_main'])) 
```

# javascript - 如何在两个字符之间拆分字符串？

> ID：14875630
> 
> 赞同：0
> 
> 时间：2013-02-14T13:11:32.497
> 
> 标签：javascript, jquery, regex, split

`/#/`如何在字符和字符之间拆分目标字符串`/`？

```
http://www.site.com/#/target/ 
```

输出应该是`target`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:14:45.073

这是匹配最后两个斜杠之间的文本所需的正则表达式的小提琴：

[http://jsfiddle.net/7BGP5/](http://jsfiddle.net/7BGP5/)

代码很简单：

```
var str = "http://www.site.com/#/target/";
var regexp = /.*\/(.*?)\//;
console.log(str.match(regexp)[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:57:54.533

我建议使用`replace`正则表达式：

```
"http://www.site.com/#/target/".replace(/.*#\/([^/]+).*/, "$1");
// >> "target" 
```

# android - TextView 内文本的偏离中心对齐

> ID：14875631
> 
> 赞同：2
> 
> 时间：2013-02-14T13:11:32.963
> 
> 标签：android, layout, textview, alignment

我有一个 TextView 的布局/对齐问题，我还没有找到解决方案，也就是说，我想在 TextView 内水平对齐文本偏离中心。

为了提供更多上下文，我有一个并排的 ImageView 和一个 TextView，ImageView 触摸屏幕的左边缘，而 TextView 水平填充屏幕的其余部分，如下所示：

```
[-img-|-----text-----] 
```

TextView 配置为 singleLine="true" 和 maxLines="1"，因此如果它的水平空间太长，它将被截断。我的目标是对齐屏幕中心的文本，而不是 TextView 的中心，因为屏幕上还有其他元素对齐到中心，我需要文本对齐来匹配它。

所以，如果我在 TextView 上使用gravity="center"，我会得到上面的图像，但我真正想要的是

```
[-img-|--text--------] 
```

我尝试将图像和文本放在RelativeLayout中，以便TextView实际上触及屏幕的两个边缘，这在对齐方面做了我想要的，除了如果文本足够长，第一个字符将被隐藏图像，因为 TextView 位于图像视图的后面。

我还尝试了边距、填充和可向左绘制的复合，但文本始终相对于可用空间居中（我认为这是预期的行为）。

是否有人对如何实现这种对齐有任何线索，即相对于与 TextView 不同的组件的中心，可能在运行时以编程方式？提前感谢您提供任何有用的建议。

**编辑：**用户 Budius 建议使用向右填充来实现居中对齐，该对齐有效但会导致长文本在到达 TextView 的右边缘之前被截断，我正在寻找一种避免这种情况的解决方案，即使用整个可用空间，如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:24:14.947

我相信它将居中并将 20dp 移到一边。

`gravity:centre` `padding:right=20dp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:21:15.123

尝试使用

```
 android:layout_weight="1" 
```

如果对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T03:53:07.413

我知道这不是正确的方法而不是尝试一下..

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight=".33"
    android:src="@drawable/ic_launcher" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight=".33"
    android:gravity="center"
    android:text="text" />

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight=".33"
    android:src="@drawable/ic_launcher"
    android:visibility="invisible" /> 
```

# sql - SQL - 如何在选择语句中使用列而不在 group by 子句中指定它

> ID：14875633
> 
> 赞同：0
> 
> 时间：2013-02-14T13:11:38.387
> 
> 标签：sql, oracle, plsql, oracle10g, oracle11g

我正在尝试运行此查询，但它失败了：

```
select p.product_id, p.product_name, 
 cast(collect(coalesce(product_type, decode(product_description,null,'DESCR' || '-' product_description) as my_type) as product_type,
 decode(product_source_location, null, 'NO_SOURCE', product_source_location)
from products
group by p.product_id, p.product_name 
```

它失败了，因为`product_source_location`它不是 group by 子句的一部分。

我不想包含`product_source_location`在`group by`子句中，因为我得到的结果变得不正确。有没有一种方法可以`product_source_location`在如上所示的 decode 函数中使用，而不必将其包含在 group by 子句中？

有趣的是，我在 coalesce 函数中使用 product_type，它不会强迫我将其包含`product_type`在 group by 子句中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:23:19.277

尝试这样做：

```
coalesce(max(product_source_location), 'NO_SOURCE') 
```

复杂的collect语句是正确的，因为collect是一个聚合函数。`group by`最终解码使用的是子句中未提及的列。这通过环绕`max()`它来解决问题。

而且，您可以使用以下方法执行此操作`decode()`：

```
decode(max(product_source_location), NULL, 'NO_SOURCE', max(product_source_location)) 
```

但我鼓励你学习更标准的`coalesce()`函数和`case`函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T13:30:51.490

你不能只使用 DISTINCT 吗？像这样：

```
select DISTINCT p.product_id, p.product_name, 
 cast(collect(coalesce(product_type, decode(product_description,null,'DESCR' || '-' product_description) as my_type) as product_type,
 decode(product_source_location, null, 'NO_SOURCE', product_source_location)
from products 
```

# maven - 如何禁用出现在 Java 编辑器中的 Intellij“启用自动同步”警告？

> ID：14875634
> 
> 赞同：3
> 
> 时间：2013-02-14T13:11:37.917
> 
> 标签：maven, intellij-idea

我有一个导入 Intellij 的 Maven 项目。由于项目使用的库正在更改，Intellij 在 Java 编辑器中通知我“项目中的某些库已更改。这可能已更改...”，然后是 2 个可单击选项“同步依赖项”和“启用自动同步” ”。通常，我会“启用自动同步”，但在单击“启用自动同步”后，这个特定项目不再能够解决 Java 编辑器中的任何依赖关系。问题是这个特定的项目没有遵循典型的 Maven 标准来获得正确的 pom 结构。

我最终希望能够禁用此消息，但我找不到这样做的偏好。有谁知道如何在 Intellij 中禁用此消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:44:56.913

您是否尝试过此设置（`Maven Import`在`Settings`|中`Notifications`）？

![行家导入](../Images/fcced799e1cf48bdd823c123a340ea51.png)

# actionscript-3 - 在 Action Script 3 中使用计时器需要帮助

> ID：14875638
> 
> 赞同：0
> 
> 时间：2013-02-14T13:11:41.740
> 
> 标签：actionscript-3, timer

好的，所以我对 AS3 还很陌生，我的游戏中有一个关卡，你必须保持 45 秒的生命。如果我使用类似的代码（或者如果有更好的代码，我会使用那个）

```
 var myTimer:Timer = new Timer(1000, 1); // 1 second
myTimer.addEventListener(TimerEvent.TIMER, runOnce);
myTimer.start();

function runOnce(event:TimerEvent):void {
trace("runOnce() called @ " + getTimer() + " ms");
} 
```

如果它们存活 45 秒，我如何使用它使我的游戏移至场景 6？我还想在动画上显示文本，记录他们活了多长时间，这样他们就知道他们还剩下多长时间了。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:25:19.543

```
private var startTime:int;
function startGame() {
    // this is called when your game starts
    startTime=getTimer();
    ... // rest of init code
} 
function onEnterFrame(e:Event):void {
    // main loop, whatever you need to do in here
    currentTime=getTimer()-startTime; // here we receive the elapsed time
    // pause handling is excluded from this example!!11
    if (weAreDead()) {
        survivalTime= currentTime;// here
        ...
    } else if (currentTime>45000) { 
        //advance to scene 6 here
    }
} 
```

将 Event.ENTER_FRAME 的监听器设置为`onEnterFrame`，通过设置存储的时间开始游戏，然后 pwn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:45:07.887

最简单的解决方案是继续使用计时器，但将值设置为 45000 并确保保留计时器的引用，否则它将被垃圾收集。另外，创建一个单独的函数，如果这个特定的东西需要“离开”而不完成，你可以从任何地方终止计时器。

```
public static const DELAY:int = 45;
private var _timer:Timer;

public function setTimer():void
{
    _timer = new Timer( DELAY * 1000, 1 );
    _timer.addEventListener( TimerEvent.TIMER_COMPLETE, timerCompleteHandler );
    _timer.start();
}

private function timerCompleteHandler( event:TimerEvent ):void
{
    disposeTimer();
    goDoTheThingThatYouNeededToDo();
}

public function disposeTimer():void
{
    _timer.stop();
    _timer.removeEventListener( TimerEvent.TIMER_COMPLETE, timerCompleteHandler );
    _timer = null;
} 
```

# wpf - 从 itemcontainerstyle 中查找命令参数的数据上下文

> ID：14875641
> 
> 赞同：0
> 
> 时间：2013-02-14T13:11:45.740
> 
> 标签：wpf

我有一个窗口，里面有一个树视图。窗口有一个视图模型，树视图项目来自我的视图模型。

我的树视图有一个上下文菜单，它是根据树视图上的选择动态生成的。我的视图模型中有一个属性，树视图上的所有选定节点都正确填充。

我动态生成的 contextmenuitems 绑定到一个命令，命令参数来自我的视图模型或我的主窗口数据上下文。我正在尝试在我的 contextmenu itemcontainerstyle 中设置命令参数绑定，但它一直抱怨它无法找到上下文。

这是位于我的 MainWindow 中的我的 xaml 代码。

```
<TreeView ItemsSource="{Binding Nodes}" x:Name="treeView">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <StackPanel>
                <TextBlock Text="{Binding Name}"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
    <TreeView.ContextMenu>
        <ContextMenu ItemsSource="{Binding MenuItems}">
            <ContextMenu.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Header" Value="{Binding Name}"/>
                    <Setter Property="Command" Value="{Binding MenuItemCommand}"/>
                    <Setter Property="CommandParameter" Value="{Binding Path=DataContext.SelectedModels}"/>
                </Style>
            </ContextMenu.ItemContainerStyle>
        </ContextMenu>
    </TreeView.ContextMenu>
</TreeView> 
```

现在我的视图模型：

```
public class MyViewModel:NotificationObject
{
    private readonly IMenuRepository _menuRepository;

    public MyViewModel(IMenuRepository menuRepository)
    {
        _menuRepository = menuRepository;
    }

    private ObservableCollection<string> _nodes;
    public ObservableCollection<string > Nodes
    {
        get { return _nodes; }
        set
        {
            _nodes = value;
            RaisePropertyChanged(() => Nodes);  
        }
    }

    private ObservableCollection<string> _selectedModels;
    public ObservableCollection<string> SelectedModels
    {
        get { return _selectedModels; }
        set
        {
            _selectedModels = value;
            RaisePropertyChanged(() => SelectedModels);
        }
    }

    public ObservableCollection<MyMenuItem> MenuItems
    {
        get {return  _menuRepository.GetAll(SelectedModels); }
    }
} 
```

..和我的 MenuItem 视图模型

```
public class MyMenuItem:NotificationObject
{
    private string _name;
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            RaisePropertyChanged(() => Name);   
        }
    }

    private DelegateCommand<IEnumerable<string>> _menuItemCommand;
    public DelegateCommand<IEnumerable<string>>  MenuItemCommand
    {
        get { return _menuItemCommand; }
        set
        {
            _menuItemCommand = value;
            RaisePropertyChanged(() => MenuItemCommand);    
        }
    }
} 
```

菜单项正确生成，命令也正确绑定。但是该命令是灰色的，我可以在我的输出窗口中看到一个错误，上面写着：

```
System.Windows.Data Error: 39 : BindingExpression path error: 'DataContext' property not found on 'object' ''DeleteMenuItem' (HashCode=20916652)'. BindingExpression:Path=DataContext.SelectedModels; DataItem='DeleteMenuItem' (HashCode=20916652); target element is 'MenuItem' (Name=''); target property is 'CommandParameter' (type 'Object') 
```

你能告诉我如何正确绑定它吗？

*注意*：我以为是绑定，但即使绑定设置得当，菜单项也是灰色的。你能帮忙吗？框架是.NET 3.5

谢谢，-迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:33:38.063

嗨，如果我没有误解你的问题，试试这个

```
<ContextMenu ItemsSource="{Binding MenuItems}" Tag="{Binding PlacementTarget, RelativeSource={RelativeSource Mode=Self}}">
        <ContextMenu.ItemContainerStyle>
            <Style TargetType="MenuItem">
                <Setter Property="Header" Value="{Binding Name}"/>
                <Setter Property="Command" Value="{Binding MenuItemCommand}"/>
                <Setter Property="CommandParameter" Value="{Binding Path=Tag.DataContext.SelectedModels}"/>
            </Style>
        </ContextMenu.ItemContainerStyle>
    </ContextMenu> 
```

由于您的其他绑定正在工作，所以不要打扰使用标签属性。我希望这会给您一个想法。

# android - Android：ListView，在旋转/配置更改后同时记住和忘记它的getCheckedItemPosition

> ID：14875642
> 
> 赞同：2
> 
> 时间：2013-02-14T13:11:48.353
> 
> 标签：android, android-listview, android-configchanges

我真的无法弥补，所以我会感谢任何提示。我必须在这里犯一些错误（4.1.2）。

我有一个which `Activity`, in为呈现为.`onCreate()``ArrayAdapter``ListView``Checkable` `ViewGroup`

`Activity`已经利用一种机制在`NonConfiguration`方向更改时重新构建适配器。但是，它目前没有存储`ListView`'s `getCheckedItemPosition()`，因为我觉得它不应该是必要的（详情如下）。

有趣的是，我观察到的是以下内容。

*   活动被渲染。
*   用户检查 ListView 项目。
*   ListView 项目以选中状态显示。
*   `onItemClickListener`调用and`getCheckedItemPosition()`得到正确的`ListView`结果。
*   用户改变屏幕方向。
*   `onCreate()`重新构建“ListView”并像之前一样显示（之后`onCreate()`；见下文）。
*   `onCreate()`尽管显示了正确检查的项目，但仍会调用`getCheckedItemPosition()`并获取`-1``ListView`

经过进一步检查，出现以下细节。

*   `onCreate()`：
    *   获取`ListView`资源
    *   建造`MyAdapter`
    *   设置`MyAdapter`为适配器`ListView`
    *   `getCheckedItemPosition()`返回`-1`
*   之后`onCreate()`：
    *   `MyAdapter.getView()`被调用
    *   `CheckableViewGroup.setChecked()`用正确的`checked`值调用
    *   将对所有项目重复最后两个步骤

如前所述，我依赖于 Android 功能，`View`如果对象分配了 ID，则对象会保存其状态。我会说是这种情况，因为那里必须有一些对象`checked`为所有列表条目设置正确的状态。（顺便说一句，`CheckableViewGroup`也覆盖`on{Save,Restore}InstanceState()`，但无论是否分配了 ID 都不会被调用（大概是因为它永远不会附加到布局根？）。

所以**看起来好像`ListView`既知道又不知道它的`getCheckedItemPosition()`**？还是我走错了路？

```
public final class MyActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);
        itemList = (ListView)findViewById(R.id.ma_list);
        listAdapter = new MyAdapter();
        itemList.setAdapter(listAdapter);
        itemList.setOnItemClickListener(
            new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> av, View v, int pos, long id) { checkForm(); }
            }
        );
        listAdapterSetup();
        // this is where itemList.getCheckedItemPosition() returns -1
        // when the listView has been re-built from NonConfiguration data:
        checkForm(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:28:12.943

在我发布我的问题后，我正在做另一个测试，因为我在描述我的观察时得到了一个想法。

事实上，我的怀疑得到了证实。

**时机**在这里很关键。

将在（但不是之前）`ListView`报告正确的`getCheckedItemPosition()`值。`onResume()`

所以解决方案很简单：在`onResume()`.

# python - Python 分组

> ID：14875649
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:07.747
> 
> 标签：python, sqlite

我使用以下代码来获得一张桌子的座位并将它们分组

```
 cur.execute("SELECT * FROM seats WHERE Day = 'S' AND Booked = 'N' AND Disabled = 'N'")
        for letter, rows in groupby(cur, key=lambda r: r[0][0]):
            print ' '.join([r[0] for r in rows]) 
```

我得到以下打印：

```
A2 A3 A4 A5 A6 A7 A8 A9 A10 A11 A12 A13
B2 B3 B4 B5 B6 B7 B8 B9 B10 B11 B12 B13 B14 B15
C2 C3 C4 C5 C6 C7 C8 C9 C10 C11 C12 C13 C14 C15 C16
D2 D3 D4 D5 D6 D7 D8 D9 D10 D11 D12 D13 D14 D15 D16 D17 D18
E2 E3 E4 E5 E6 E7 E8 E9 E10 E11 E12 E13 E14 E15 E16 E17 E18 E19
F2 F3 F4 F5 F6 F7 F8 F9 F10 F11 F12 F13 F14 F15 F16 F17 F18 F19
G2 G3 G4 G5 G6 G7 G8 G9 G10 G11 G12 G13 G14 G15 G16 G17 G18
H2 H3 H4 H5 H6 H7 H8 H9 H10 H11 H12 H13 H14 H15 H16 H17 H18
J2 J3 J4 J5 J6 J7 J8 J9 J10 J11 J12 J13 J14 J15 J16 J17 J18
K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14 K15 K16 K17 K18
L2 L3 L4 L5 L6 L7 L8 L9 L10 L11 L12 L13 L14 L15 
```

但是缺少 A1、B2 等 - 哪些是残疾人座位，我知道我输入了 'Disabled = N' 但我希望将残疾人座位打印在底部以提供如下内容：

```
A2 A3 A4 A5 A6 A7 A8 A9 A10 A11 A12 A13
B2 B3 B4 B5 B6 B7 B8 B9 B10 B11 B12 B13 B14 B15
C2 C3 C4 C5 C6 C7 C8 C9 C10 C11 C12 C13 C14 C15 C16
D2 D3 D4 D5 D6 D7 D8 D9 D10 D11 D12 D13 D14 D15 D16 D17 D18
E2 E3 E4 E5 E6 E7 E8 E9 E10 E11 E12 E13 E14 E15 E16 E17 E18 E19
F2 F3 F4 F5 F6 F7 F8 F9 F10 F11 F12 F13 F14 F15 F16 F17 F18 F19
G2 G3 G4 G5 G6 G7 G8 G9 G10 G11 G12 G13 G14 G15 G16 G17 G18
H2 H3 H4 H5 H6 H7 H8 H9 H10 H11 H12 H13 H14 H15 H16 H17 H18
J2 J3 J4 J5 J6 J7 J8 J9 J10 J11 J12 J13 J14 J15 J16 J17 J18
K2 K3 K4 K5 K6 K7 K8 K9 K10 K11 K12 K13 K14 K15 K16 K17 K18
L2 L3 L4 L5 L6 L7 L8 L9 L10 L11 L12 L13 L14 L15

Disabled seats available : A1, C1 , C17 
```

但我不知道如何很好地工作 groupby？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:41:29.617

既然你想以不同的方式输出禁用的座位，你为什么不简单地单独做：

```
 cur.execute("SELECT * FROM seats WHERE Day = 'S' AND Booked = 'N' AND Disabled = 'N'")
    for letter, rows in groupby(cur, key=lambda r: r[0][0]):
        print ' '.join([r[0] for r in rows])
    cur.execute("SELECT * FROM seats WHERE Day = 'S' AND Booked = 'N' AND Disabled = 'Y'")
    print 'Disabled seats available : ', ', '.join([r[0] for r in cur]) 
```

# php - 如何在 php 中使用图像提交表单

> ID：14875650
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:07.467
> 
> 标签：php, forms, imagebutton, isset

我想向数据库提交一个表单，我想使用精灵图像而不是常规的提交按钮。这是我正在使用的图像

```
<div class="cancel">
    <a href="#" id='cancel_btn' name=''><img src="../images/img_trans.gif"></a>
</div>

<div class="save_and_new">
    <a href="#" id='save_and_new_btn' name=''><img src="../images/img_trans.gif"></a>
</div>

<div class="save_and_quit">
    <a href="#" id='save_and_quit_btn' name=''><img src="../images/img_trans.gif"></a>
</div>

if(isset(......)){

} 
```

我不知道要在 isset 函数中放什么……我需要为图像设置名称吗？或者是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:17:59.140

你可以使用

```
<input type="image src="/your/button/image/here.gif" /> 
```

而不是嵌套在锚点内的图像。

唯一的问题是您无法直接感知确切按下了哪个按钮，因为`<input type="image" />`没有发布值。如果您确实需要多个同时发布值的发布按钮：

```
<button name="button" value="action1"><img src="/your/image/here.gif" alt="action 1" /></button>
<button name="button" value="action2"><img src="/your/image/here.gif" alt="action 2" /></button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:17:01.730

您可以在 Jquery 中执行此操作。尝试这个，

```
$("#save_and_new_btn").click(function() {

     $("#form").submit();

}); 
```

`#form`是表单的 id

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:17:09.797

通常，当用户按下提交按钮时，就会提交表单。但是，有时，您可能需要使用 JavaScript 以编程方式提交表单。

JavaScript 提供了包含 submit() 方法的表单对象。使用表单的“id”来获取表单对象。

例如，如果您的表单名称为“myform”，则提交调用的 JavaScript 代码为：

```
document.forms["myform"].submit(); 
```

但是，如何识别表格？在form标签中给出一个id属性

```
<form id='myform' action='formmail.pl'> 
```

这是单击超链接时提交表单的代码：

```
<form name="myform" action="handle-data.php">
Search: <input type='text' name='query' />
<a href="javascript: submitform()">Search</a>
</form>
<script type="text/javascript">
function submitform()
{
  document.myform.submit();
}
</script> 
```

来源：[如何使用 JavaScript 提交表单](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:15:08.527

您需要使用 javascript。

查找必须提交的表单。然后为每个元素添加动作。当他们被点击时，您正在提交（或取消）表单。

# javascript - 根据用户的选择隐藏/显示新菜单

> ID：14875654
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:15.197
> 
> 标签：javascript, html, css, cakephp-1.2

我有这个菜单：

```
Classificazione&nbsp;&nbsp;<select onchange="if(this.value == 'D'){ document.getElementById('menu2').style.display = 'block'; } else { document.getElementById('menu2').style.display = 'none'; }" style="margin-top: 5px;" name="classificazione">
            <option value="art0"></option>
            <option value="C" <?php if (isset($getParams['classificazione'])&&$getParams['classificazione']=="C") echo "selected"; ?> >Articoli</option>
            <option value="D" <?php if (isset($getParams['classificazione'])&&$getParams['classificazione']=="D") echo "selected"; ?> >Documentazione</option>
            <option value="A" <?php if (isset($getParams['classificazione'])&&$getParams['classificazione']=="A") echo "selected"; ?> >Libri</option>
            <option value="G" <?php if (isset($getParams['classificazione'])&&$getParams['classificazione']=="G") echo "selected"; ?> >Materiali</option>
            <option value="B" <?php if (isset($getParams['classificazione'])&&$getParams['classificazione']=="B") echo "selected"; ?> >Riviste</option>
      </select><br /> 
```

仅当用户选择值“Documentazione”时，我才想显示另一个（相等的）菜单，具有不同的选项。
我添加了这个子菜单：

```
<select style="margin-top: 5px;" name="menu2">
            <option value="art0"></option>
            <option value="C" >Corsi</option>
            <option value="D" >Incontri</option>
            <option value="A" >Convegni</option>
            <option value="G" >Gruppi</option>
            <option value="B" >Progetto</option>
</select><br /> 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:33:06.620

```
Classificazione&nbsp;&nbsp;<select onchange="if(this.value == 'D'){ document.getElementById('menu2').style.display = 'block'; } else { document.getElementById('menu2').style.display = 'none'; }" style="margin-top: 5px;" name="classificazione">
    <option value="art0"></option>
    <option value="C" <?php if ($getParams['classificazione']=="C") echo "selected"; ?> >Articoli</option>
    <option value="D" <?php if ($getParams['classificazione']=="D") echo "selected"; ?> >Documentazione</option>
    <option value="A" <?php if ($getParams['classificazione']=="A") echo "selected"; ?> >Libri</option>
    <option value="G" <?php if ($getParams['classificazione']=="G") echo "selected"; ?> >Materiali</option>
    <option value="B" <?php if ($getParams['classificazione']=="B") echo "selected"; ?> >Riviste</option>
</select> 
```

注意 onchange 事件。

```
<select style="margin-top: 5px; display: none;" id="menu2">
        <option value="art0"></option>
        <option value="C" >Corsi</option>
        <option value="D" >Incontri</option>
        <option value="A" >Convegni</option>
        <option value="G" >Gruppi</option>
        <option value="B" >Progetto</option></select> 
```

# asp.net - 在 ASPX 网页上显示大量数据的最佳方式（下拉列表，

> ID：14875656
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:22.057
> 
> 标签：asp.net, performance, usability

我正在做带有一点业务逻辑的简单 Web 应用程序。现在我有大约 25 000 种产品的下拉列表，用户可以选择它。

对于互联网速度较慢的用户，该应用程序可能会很慢。（在公司里没问题）是否有任何组件（在 Visual Studio 中）或者向用户提供这么多产品的最佳方式是什么？

我也尝试使用 ComboBox ajax，但在 IE 8 CPU 中无法处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:17:07.283

是否有理由需要一次显示所有 25,000 个项目？我想这将是一个可用性问题，即使它完美无缺。拥有如此庞大的列表，用户必须对他们选择的内容有所了解。

一个使用 ajax 下拉建议结果的简单文本框怎么样（类似于 google 搜索）？

*编辑* 您还可以将您的项目分成多个类别，然后有一个类别的下拉列表。一旦用户选择了一个类别，第二个下拉列表可以显示该类别中的所有项目，或者可能会进一步细分该类别。类似于：[http ://www.kbb.com/whats-my-car-worth/](http://www.kbb.com/whats-my-car-worth/)

# git - 如何使用 git-svn clone 仅从 Subversion 存储库获取 HEAD 修订版？

> ID：14875658
> 
> 赞同：8
> 
> 时间：2013-02-14T13:12:26.877
> 
> 标签：git, git-svn

如何使用`git svn clone`仅从 Subversion 存储库中获取 HEAD 修订版？

我一直在尝试

```
git svn clone -s http://svn/java/<projectname> 
```

但我得到了很多空目录，我尝试了一切。所以知道我想在颠覆中只克隆头部......可以这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T14:55:33.970

我认为这就是你想要的：

```
git svn clone -s -r HEAD http://svn/java/<projectname> 
```

您还可以指定一个范围`-r 2039:HEAD`，例如，您需要从 2039 年到最新的所有修订版。如果您反对的是 2039 年之前的历史，而不是当前版本之前的所有内容，您可能会这样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-26T13:53:33.160

```
git svn clone -r HEAD http://svn/java/<projectname> 
```

不要忘记“-r HEAD”。它获取最新版本。

# java - 将对象数组转换为 ArrayList 的问题

> ID：14875661
> 
> 赞同：1
> 
> 时间：2013-02-14T13:12:33.740
> 
> 标签：java, arrays, arraylist

我创建了一个对象，其中包含针对数据库运行的查询的所有结果。然后将这些结果存储在一个数组中。

我正在尝试将此数组转换为 ArrayList 以便可用于导入文档。

我努力了：

```
//trustSummary is the name of my array
ArrayList data = new ArrayList(Arrays.asList(trustSummary)); 
```

`ClassCastException`但是，当我尝试在应用程序的另一部分运行以下代码时，这似乎会导致问题 ( )。任何人都可以指出正确的方向来解决这个问题。

```
for (Iterator rows = data.iterator(); rows.hasNext();)
   ArrayList row = (ArrayList) rows.next(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:28:27.563

`ArrayList(Collection)`您在此处编写的部分中使用的构造函数使用源集合中的元素`new ArrayList(Arrays.asList(trustSummary));`创建一个`ArrayList`，它不会`ArrayList`使用另一个集合作为元素创建一个。

因此，您需要修复该行或更改该行

```
ArrayList row = (ArrayList) rows.next(); 
```

至

```
TrustSummary ts = (TrustSummary) rows.next(); 
```

一般来说，我会建议使用泛型，以避免对集合类型的那种混淆。

在您的情况下，例如

```
List<TrustSummary> summaries = new ArrayList<TrustSummary>(Arrays.asList(trustSummary)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:25:11.417

您的代码仅在以下情况下才有效`trustSummary`：

```
ArrayList[] trustSummary; 
```

或：（虽然这并没有真正的意义，因为这样数组将只有 1 个元素，因此您也可以直接使用该元素）

```
ArrayList trustSummary; 
```

以上两种方法都有效，因为`Arrays.asList`将数组或数组中所需的一堆项目作为参数。

trustSummary 需要像上面那样定义的原因（`ArrayList`作为元素）是因为迭代器一次抓取一个元素`data`（从数组转换而来）（所以返回类型`next()`是数组中使用的类型（`ArrayList`在这个案例））。

这会起作用：

```
String[] trustSummary = {"1", "2", "3"};
ArrayList<String> data = new ArrayList<String>(Arrays.asList(trustSummary));
for (Iterator rows = data.iterator(); rows.hasNext();)
  System.out.println((String)rows.next()); 
```

或这个：

```
String trustSummary = "1";
ArrayList<String> data = new ArrayList<String>(Arrays.asList(trustSummary));
for (Iterator rows = data.iterator(); rows.hasNext();)
  System.out.println((String)rows.next()); 
```

替换`String`为所需的类型并适当更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T13:15:10.457

```
for (Iterator rows = data.iterator(); rows.hasNext();) 
{
    Map.Entry entry = (Map.Entry) rows.next();
    ArrayList row = (ArrayList) entry.getValue(); 
} 
```

# windows - 如何在 Windows 上捕获 ICMPv6 邻居广告数据包（136）？

> ID：14875663
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:34.693
> 
> 标签：windows, sockets, icmp

我创建了一个 IPV6 SOCK_RAW 套接字来捕获 NA 数据包。为了启用混杂模式，我使用了函数 WSAIoctl 和 SIO_RCVALL 控制代码和 RCVALL_ON 作为选项值，但是这个函数返回 SOCKET_ERROR 和 10022（无效参数）错误代码。

经过一些研究，问题出在 Windows XP 上。我的代码适用于 Windows 7。Windows XP 不允许 IPv6 RAW 套接字绑定到其 IPv6 地址，因此 WSAIoctl 不会在接口上启用混杂模式。

# ruby-on-rails-3 - ActiveAdmin 仅下载为 csv 格式

> ID：14875664
> 
> 赞同：0
> 
> 时间：2013-02-14T13:12:42.630
> 
> 标签：ruby-on-rails-3, gem, activeadmin

我希望 ActiveAdmin gem 只允许将集合下载为 csv 文件。默认设置为下载为 xml、csv 和 json。我只想允许以 csv 格式下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T18:13:58.243

您可以传递具有您希望允许下载的格式的数组。例如，仅启用 csv 您可以执行以下操作：

```
index download_links: [:csv] do
  column :author
  column :title
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:21:21.900

我在该帖子的底部找到了链接。我没有看到日期，所以它可能不再起作用，或者可能有比猴子修补 ActiveAdmin 更好的方法......

[https://coderwall.com/p/qzlssg?i=1&p=1&q=author%3Adaviec85&t%5B%5D=daviec85](https://coderwall.com/p/qzlssg?i=1&p=1&q=author%3Adaviec85&t%5B%5D=daviec85)

# asp.net - 在 Internet Explorer 中加载时，我的 aspx 页面被击中了一半

> ID：14875672
> 
> 赞同：0
> 
> 时间：2013-02-14T13:13:10.690
> 
> 标签：asp.net, internet-explorer-8, performance

在我的项目（分类网站）中有很多 aspx 页面。因为我有发布页面，用户可以在其中发布广告..这个页面没有完全加载..只有一半的页面加载然后它停止。这只发生在 Internet Explorer 中（我使用的是 8.0 版）

浏览器返回以下错误：

```
Message: HTML Parsing Error: Unable to modify the parent container element before the child element is closed (KB927917)

Message: Object doesn't support this property or method
prototype.js 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:59:05.547

你检查过你的 JavaScript 或者 JQuery 代码吗？

尝试在页面加载时调用该代码。

另一个解决方案是：

**重置您的 Internet Explorer 设置并运行它**。您可以按照下面给出的步骤执行此操作。

如果问题是由损坏或不兼容的 Internet Explorer 设置或加载项引起的，您通常可以通过重置 Internet Explorer 设置来解决问题。

要使用“控制面板”中的“重置 Internet Explorer 设置”功能，请执行以下步骤：

1.  退出所有程序，包括 Internet Explorer（如果它正在运行）。

2.  如果您使用 Windows XP，请单击“开始”，然后单击“运行”。在“打开”框中键入以下命令，然后按 Enter：

inetcpl.cpl

如果您使用 Windows Vista，请单击开始 收起这个图片展开这个图片。在“开始搜索”框中键入以下命令，然后按 Enter：

inetcpl.cpl

出现 Internet 选项对话框。

1.  单击高级选项卡。

2.  在重置 Internet Explorer 设置下，单击重置。然后再次单击重置。

3.  Internet Explorer 完成重置设置后，单击“重置 Internet Explorer 设置”对话框中的“关闭”。

4.  再次启动 Internet Explorer。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-19T19:53:16.997

我遇到了一个类似的问题，这并没有帮助，但我确实发现客户端使用了 Ctl+Scroll 并且已经缩小到很远，导致页面顶部的菜单开始堆叠。尽管这篇文章较旧，但希望这会有所帮助。

JSB

# android - 如何为 LinearLayout 的背景图像赋予形状？

> ID：14875674
> 
> 赞同：2
> 
> 时间：2013-02-14T13:13:15.797
> 
> 标签：android, android-linearlayout, shape

我想*塑造*。`LinearLayout's` `backgroundimage`我正在使用以下 xml。但仅显示曲线时不显示图像。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <corners android:radius="7dp" />
    <stroke android:width="1dp"/>
    <item>
      <bitmap android:src="@drawable/locationlable" />
    </item>
</shape> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:54:26.817

您可以使用[图层列表drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)：

像这样 ：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@[package:]drawable/drawable_resource"
        android:id="@[+][package:]id/resource_name"
        android:top="dimension"
        android:right="dimension"
        android:bottom="dimension"
        android:left="dimension" />
</layer-list> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:58:22.677

试试这个

在您的布局中

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#FFF">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="5dip"
        android:background="@drawable/background"
        android:orientation="vertical" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@xml/shape_round_rect"
        android:orientation="vertical" />

</FrameLayout> 
```

& 在你的 xml 中用于形状

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners android:radius="15dip" />

    <stroke
        android:width="5dip"
        android:color="#FFF" />

</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:37:58.567

如果你想画圆形，那么你会使用不同的形状：

```
android:shape="ring" 
```

如果要绘制矩形，请使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<solid android:color="#ffffff" />

<stroke
    android:width="2dp"
    android:color="#000000" />

 </shape> 
```

有关更多信息，请访问此链接[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# javascript - 使用 RaphaelJS 确定图像何时在 svg 中加载

> ID：14875675
> 
> 赞同：6
> 
> 时间：2013-02-14T13:13:33.213
> 
> 标签：javascript, svg, raphael

我正在尝试弄清楚如何确定 svg 图像何时加载到浏览器中。我正在使用 Raphael JS 并且我尝试过：

```
var image = paper.image(path, 0,0,10,10);
image.node.addEventListener('load', function(){alert("test");}); 
```

和：

```
$('image').on('load') 
```

一切都无济于事。我还使用了“onload”和“onsvgload”，它们都不起作用。

是否可以确定是否实际加载了 svg 图像？

我什至尝试使用 Image() 对象加载图像，然后调用 paper.image() - 但我得到了两次对图像的调用（而不是使用预加载的图像）；IE：

```
var preload = new Image();
preload.src = imgPath;
preload.addEventListener('load', function () {
    image.path = preload.src;
    //Now load image in raphael - except this still forces the browser to make another call for the image
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T01:16:58.837

使用`onLoad`事件处理程序是可行的，只需增加一行代码：

```
var image = paper.image(path, 0,0,10,10);
var image_node = image.node;
image_node.setAttribute('externalResourcesRequired','true');
image_node.addEventListener("load", function() {
    console.log("image is loaded!");
}) 
```

您需要将该`externalResourcesRequired`属性设置为 true。您可以在这里阅读更多相关信息：http: [//www.w3.org/TR/SVG/struct.html#ExternalResourcesRequired](http://www.w3.org/TR/SVG/struct.html#ExternalResourcesRequired)

# android - 应用内计费问题

> ID：14875676
> 
> 赞同：0
> 
> 时间：2013-02-14T13:13:39.233
> 
> 标签：android, in-app-billing, google-play-services

我已经从开发人员那里下载了 v3 应用内计费的示例项目，并按照他们所说的所有程序进行操作。但它给出的消息是“您请求的项目无法购买”。

根据其他链接中给出的建议，我还将示例应用程序发布到 Play 商店，我从 Playstore 下载了该应用程序，但仍然出现相同的错误。

![在此处输入图像描述](../Images/8c2cdb06b8063d7c20d920a39c53d2df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:49:23.190

1.  如前所述，您不能购买自己的物品，但可以使用测试电子邮件地址。Play Store 菜单设置之一是选择要使用的电子邮件地址。
2.  尽管谷歌表示传播更改需要 2-3 个小时，但在最坏的情况下可能需要几天时间。

# sapui5 - 如何使用“sap.ui.table.DataTable”显示 JSONModel 数据？

> ID：14875678
> 
> 赞同：0
> 
> 时间：2013-02-14T13:13:56.740
> 
> 标签：sapui5

我正在尝试将 ABAP 程序中的内部表中的数据导入 SAPUI5 应用程序。

在 ABAP 方面，我已将所需数据转换为 JSON 格式，并像指南中提到的那样将其发送出去。

我在控制器的“读取”部分编写了以下代码

```
$.ajax({
  type: 'GET',
  url: 'http://socw3s1er67.solutions.glbsnet.com:8000/sap/bc/Z_tets_json?sap-client=950',
  success: function(data) {
    alert(data[1].PROJECT);
    alert(data[0].MANDT);
    var oModel_Projects = new sap.ui.model.json.JSONModel();
    oModel_Projects.setData({ modelData: data });
  }
}); 
```

来自服务器的示例 JSON 响应：

```
[
  {
    "MANDT": "PJ1",
    "PROJECT": "Test Project1",
    "DESCRIPTION": ""
  },
  {
    "MANDT": "PJ2",
    "PROJECT": "Test Project2",
    "DESCRIPTION": ""
  }
] 
```

警报似乎工作正常，并且正在从内部表返回预期数据。

我想知道：如何使用模型将此数据绑定到特定表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:45:04.413

澄清后更新了答案：试试这个解析器：

```
var html = "<table><tr><td>MANDT</td><td>PROJECT</td><td>DESCRIPTION</td></tr>";
    for(var index in data){
html+="<tr><td>"+data[index].MANDT+"</td><td>"+data[index].PROJECT+"   </td><td>"+data[index].DESCRIPTION+"</td></tr>";
    }
html+="</table>";
//now you can insert this html into some div like as follows: $("#div1").html(html); 
```

或者按照我在评论中的建议搜索一些 jquery gridview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:45:48.763

好吧，您的代码看起来不错，但是还有其他部分丢失了，并且那里可能存在问题...

您的桌子是如何构造的 - ？它应该是：

```
var table = new sap.ui.table.DataTable({
    title: 'My first table',
    width: '100%'
}); 
```

您是否进行以下调用以连接表和模型？

```
table.setModel(oModel_Projects);
table.bindRows("modelData"); 
```

您是否正确创建了表格的列？

```
label = new sap.ui.commons.Label({ text: 'Client' });
template = new sap.ui.commons.TextView({ text: '{MANDT}' });
col = new sap.ui.table.Column({ label: label, template: template });
table.addColumn(col); 
```

表格是否使用方法正确放置到 HTML 中`placeAt`？

# ruby-on-rails - 需要 .rabl 中的文件

> ID：14875679
> 
> 赞同：0
> 
> 时间：2013-02-14T13:14:01.313
> 
> 标签：ruby-on-rails, rabl

我正在使用 RABL 来构建我在 rails 中的 API，并且我有这个小函数，我在 .rabl 文件中使用了很多。有没有把它放在某个地方的 .rabl 或 .rb 文件中，而`require`该文件放在我所有的 .rabls 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:18:21.913

在我看来，您可以访问 RABL 中的视图助手。对你想要达到的目标来说还不够吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T08:56:20.647

您可以在`rabl`模板中使用助手。有关更多详细信息，请参见[此处](https://github.com/nesquena/rabl#template-scope)。

# c# - 如何旋转 4x4 矩阵 (C#/XNA)

> ID：14875698
> 
> 赞同：6
> 
> 时间：2013-02-14T13:14:52.420
> 
> 标签：c#, matrix, xna, rotation

我有一个 [4,4]
X 的数组是我“知道”的唯一一个，其余的都是用一个简单的双 for 循环计算的。

```
x 0 0 0
0 0 1 0
0 1 1 0
0 1 0 0 
```

我想要一个采用这个数组的函数，并将它旋转 90 度 + / - 而 x 的位置保持不变。（应该是俄罗斯方块）

```
x 0 0 0
1 1 0 0
0 1 1 0
0 0 0 0 
```

我知道一些对排列进行硬编码的方法，但是那不会让我学到任何东西，坦率地说，这很无聊。

将不胜感激：>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T13:21:36.067

我不确定您打算如何将矩阵旋转 90 度，但旋转版本的左上角仍然有左上角 X，但是要将某些东西旋转 90 度，我只需制作一个新数组，交换行和列并水平翻转。

```
int[][] start = new int[4][];
start[0] = new int[4] { x, 0, 0, 0 }
start[1] = new int[4] { 0, 0, 1, 0 }
start[2] = new int[4] { 0, 1, 1, 0 }
start[3] = new int[4] { 0, 1, 0, 0 }

int[][] rotate = new int[4][];
for (int i=0; i<4; i++) rotate[i] = new int[4];
for (int i=0; i<4; i++)
    for (int j=0; j<4; j++)
        rotate[i][j] = start[j][i]; 
```

旋转完成：

```
0, 0, 0, 0,
0, 0, 1, 1,
0, 1, 1, 0,
0, 0, 0, 0, 
```

现在这是一个对角翻转（编辑：我突然想到这将使 x 保持在同一位置：也许这就是你的意思？），但只需做一个水平翻转，它应该没问题：

```
for (int i=0; i<4; i++)
    for (int j=0; j<4; j++)
        rotate[i][3-j] = start[j][i]; 
```

旋转完成：

```
0, 0, 0, 0,
1, 1, 0, 0,
0, 1, 1, 0,
0, 0, 0, 0, 
```

（以其他方式倾斜`rotate[i][j] = start[j][3-i];`：）

:)

# c# - JSON反序列化列表 不管用

> ID：14875701
> 
> 赞同：1
> 
> 时间：2013-02-14T13:15:08.090
> 
> 标签：c#, json, c#-4.0

我们使用 C# System.Runtime.Serialization.Json.DataContractJsonSerializer 反序列化 JSON。它适用于普通对象，但不适用于列表。

例如，如果 json 字符串在下面，那么它可以正常工作：

```
{"CacheInsertDateTime":"\/Date(1360761324878)\/","Data":{"__type":"SomeObject:#ConsoleApplication1","Symbol":"some string"}} 
```

但如果 josn 在下面：

```
{"CacheInsertDateTime":"\/Date(1360761324878)\/","Data":[{"__type":"SomeObject:#ConsoleApplication1","Symbol":"some string"},{"__type":"SomeObject:#ConsoleApplication1","Symbol":"some other string"}]} 
```

数据`List<Object>`来之不易`List<SomeObject>`。我还附上了示例解决方案，显示了同样的问题。任何帮助或方向表示赞赏。

编辑：添加了代码

{

namespace ConsoleApplication1 { class Program { /* Someobject 类*/ [DataContract] public class SomeObject { public SomeObject(string sym) { this.Symbol = sym; } [DataMember] 公共字符串符号 { 获取；放; }

```
 }
    /* Cahe Data */
    [DataContract()]
    [KnownType("GetKnownTypes")]
    class CacheData
    {
        [DataMember()]
        public object Data { get; set; }

        [DataMember()]
        public DateTime CacheInsertDateTime { get; set; }

        public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider)
        {
            return GetKnownTypes();
        }
        public static IEnumerable<Type> GetKnownTypes()
        {
            if (knownTypes == null)
            {
                // Since reflection is costly, we will do the lookup once for the known types and persist the data in knownTypes variable
                knownTypes = new List<Type>();

                // first add types from DataModel assembly get types which are marked with DataContract attribute
                var typesInCurrentAssembly = Assembly.GetExecutingAssembly().GetTypes().Where
                    (t => t.GetCustomAttributes(false).Any(attrib => attrib is DataContractAttribute));
                foreach (var type in typesInCurrentAssembly)
                {
                    // add type and list<type> also to the known types list
                    knownTypes.Add(type);
                    knownTypes.Add(typeof(List<>).MakeGenericType(type));
                }

                knownTypes.Add(typeof(DataTable));
            }
            return knownTypes;
        }
        private static List<Type> knownTypes = null;
    }

    /*Cache Response Class*/
    class CacheResponse<T> where T : class
    {
        public CacheData CacheData { get; set; }
        public T Data
        {
            get{return (CacheData != null && CacheData.Data.GetType() == typeof(T)) ? CacheData.Data as T: null;}
        }
    }
    /* Main class */
    static void Main(string[] args)
    {   
        //1\. first with someobject, it works same as above
        string jsonString = "{\"CacheInsertDateTime\":\"\\/Date(1360761324878)\\/\",\"Data\":{\"__type\":\"SomeObject:#ConsoleApplication1\",\"Symbol\":\"some object 1\"}}";
        CacheData obj = null;
        byte[] byteData = Encoding.UTF8.GetBytes(jsonString);
        using (MemoryStream stream = new MemoryStream(byteData))
        {
            var serializer = new DataContractJsonSerializer(typeof(CacheData));
            obj = serializer.ReadObject(stream) as CacheData;
        }
        CacheResponse<SomeObject> response1 = new CacheResponse<SomeObject>();
        response1.CacheData = obj;
        SomeObject responseObj = response1.Data; //this response object is fine            

        //2\. with list<someobject>, it does not work
        jsonString = "{\"CacheInsertDateTime\":\"\\/Date(1360761324878)\\/\",\"Data\":[{\"__type\":\"SomeObject:#ConsoleApplication1\",\"Symbol\":\"some object 1\"},{\"__type\":\"SomeObject:#ConsoleApplication1\",\"Symbol\":\"some object 2\"}]}";
        byteData = Encoding.UTF8.GetBytes(jsonString);
        using (MemoryStream stream = new MemoryStream(byteData))
        {
            var serializer = new DataContractJsonSerializer(typeof(CacheData));
            obj = serializer.ReadObject(stream) as CacheData;
        }
        CacheResponse<List<SomeObject>> response2 = new CacheResponse<List<SomeObject>>();
        response2.CacheData = obj;
        List<SomeObject> responseList = response2.Data;//this is null            
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:30:26.483

确保让序列化程序知道列表中期望的类型，例如将其传递给`DataContractJsonSerializer`.

以下示例按预期工作：

```
namespace ConsoleApplication1
{
    using System;
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.IO;
    using System.Runtime.Serialization.Json;
    using System.Text;

    public class SomeObject
    {
        public string Symbol { get; set; }
    }

    public class MyClass
    {
        public DateTime CacheInsertTime { get; set; }
        public List<object> Data { get; set; }
    }

    public class Program
    {
        private const string JsonString = @"{""CacheInsertDateTime"":""\/Date(1360761324878)\/"",""Data"":[{""__type"":""SomeObject:#ConsoleApplication1"",""Symbol"":""some string""},{""__type"":""SomeObject:#ConsoleApplication1"",""Symbol"":""some other string""}]}";

        private static void Main()
        {
            var ser = new DataContractJsonSerializer(typeof (MyClass), new[] {typeof (SomeObject)});
            var ms = new MemoryStream(Encoding.ASCII.GetBytes(JsonString));

            var obj = (MyClass) ser.ReadObject(ms);
            Trace.Assert(obj.Data.Count == 2);
            Trace.Assert(((SomeObject) obj.Data[1]).Symbol == "some other string");
        }
    }
} 
```

请注意我如何将 typeof(SomeType) 传递给序列化程序的构造函数。

# asp.net-mvc-3 - Tablesorter VS PagedList

> ID：14875703
> 
> 赞同：1
> 
> 时间：2013-02-14T13:15:10.503
> 
> 标签：asp.net-mvc-3, entity-framework, tablesorter, pagedlist

我正在做一个项目，我必须从数据库中获取数据，然后将结果显示在至少 200 行直到 3000 行的表中。

我尝试了第一个 Pagedlist 并注意到每页只显示固定数量的记录在客户端，并且每次用户更改页面时，都会向服务器发出新请求。

对于tablesorter，我注意到所有结果都显示了，分页只是视觉的（只有表格的呈现），但一切都在客户端

我的理解正确吗？

我想知道哪种方法更好（及时执行）？

实际上我在本地主机上工作，只有我作为用户，所以我无法注意到差异，即使 tablesorter 第一次加载需要更多时间，但是在它非常快之后，同时 pagedlist 方法在加载页面时更快，但每次它请求服务器更改页面并加载相应的数据

完成后，应用程序将在服务器中，许多用户将有权访问应用程序以添加、搜索删除...

这两种方法中哪一种是更好的选择？

谢谢

# android - 如何将 imagebutton 中的图像拉伸到 imagebutton 的整个区域？

> ID：14875705
> 
> 赞同：25
> 
> 时间：2013-02-14T13:15:18.427
> 
> 标签：android, image, imagebutton, stretch

这是一张可以帮助您理解我的问题的图片：

![它是](../Images/7e184a0a0de76ba2e2822e5668f4bae3.png)

我想将里面显示的图像拉伸`ImageButton`到`ImageButton`. 如您所见，带有数字 1 的图片仅占 95% 左右`ImageButton`，您还可以看到`ImageButton`.

**我仍然想保持图像按钮样式**

这是我使用 ImageView 的方式：

```
<ImageButton
    android:id="@+id/secondActivityBbuttonDownRight"
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:scaleType="fitStart"
    android:src="@drawable/111" /> 
```

**我想我发现了我的问题。我需要一个自定义组件，它只能包含一个图像并具有点击效果。**

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-14T13:51:01.417

ImageButton 是 ImageView。
如果您希望您的图像填充按钮
而不是 set `android:scaleType="fitXY"`，那么您设置的图像`android:src`将被拉伸以填充整个图像按钮。

ImageButton 在您的图像和填充下有一个背景。
如果不想背景
设置`android:background="@android:color/transparent"`。
如果您不想
设置填充`android:padding="0"`或设置没有填充的背景。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-05T21:04:53.823

你也可以使用

```
android:scaleType="centerCrop"
android:padding="0dp" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-08T21:06:07.840

`android:scaleType="fitXY"`测试并正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T13:19:23.390

使用下面的代码： -

```
<ImageButton
        android:id="@+id/secondActivityBbuttonDownRight"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:scaleType="fitStart"
        android:background="@drawable/111" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T15:04:55.503

您应该考虑创建一个 9-patch 图像，以使图像`ImageButton`在需要拉伸时正确适合，但您不希望图像变形。

要拥有一个带有完全覆盖它的图像的按钮，您可以使用以下内容：

```
<ImageButton android:id="@+id/iconBtn"
  android:layout_width="64dip"
  android:layout_height="64dip"
  android:src="@drawable/icon_button"
  android:scaleType="fitCenter"
  android:background="#00000000"/> 
```

有关使用自定义外观创建按钮以及使用选择器管理其状态的完整教程，您可以查看我前段时间在此处编写的教程[（使用可调整大小的外观创建自定义 Android 按钮）](http://www.devahead.com/blog/2011/08/creating-a-custom-android-button-with-a-resizable-skin/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-17T19:46:19.963

只需在 上设置这两个属性`ImageButton`：

```
android:background="?attr/selectableItemBackgroundBorderless"
android:scaleType="centerCrop" 
```

有了这些，您将获得提供的 src 进行拉伸，并且如果您放置一些特定的`width`并且`height`在其上`ImageButton`您将不会得到一个矩形。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-27T05:18:21.420

如果您的图像“111”本身没有填充，那么只需使用 android:background"@drawable/111"

# jquery - 防止 JQuery Datepicker 的 OnSelect 函数重置 CSS

> ID：14875709
> 
> 赞同：0
> 
> 时间：2013-02-14T13:15:35.983
> 
> 标签：jquery, primefaces

我有一个 JQuery 函数，其中我使用“ **beforeShowDay** ”函数只启用了几个日期。我正在使用 onSelect 函数来获取选定的日期。幸运的是，他们俩都工作正常。但是这里有一个问题一旦我选择了一个日期，它的背景只会改变一小段时间，突出显示的背景又回到了当前日期。如果我删除 onSelect 函数，那么它工作正常。请帮助这是我的代码：

```
var dates = [[2013, 2, 1],[2013, 2, 9],[2013, 2, 25],[2013,3,15]];

$(function(){
      $('[id="form1:kix_inline"]').datepicker(
      {
    beforeShowDay: function (date)
        {

          var x= dates.length;
      var year = date.getFullYear(), month = date.getMonth(), day = date.getDate();
      for (var i=0; i < x; i++)
      {
         if (year == dates[i][0] && month == dates[i][1] - 1 &&  day == dates[i][2])
         {
            return [true, 'ui-state-highlight ui-state-active'];
         }
       }
      return [false];
    },

    onSelect: function(value, date) {

         var frm = document.getElementById("sendDateForm");
         frm.submit();

    }
    });
}); 
```

**问题：** 最初将启用仅有的几个日期（在“日期”上方的数组中提到）。一旦我单击这些日期中的任何一个，“当前日期样式”只会在那里停留几秒钟。它会再次反弹回当前日期。

请帮助[对不起，我的解释不清楚]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:19:43.853

看起来您正在 onSelect 函数中提交表单：

```
var frm = document.getElementById("sendDateForm");
    frm.submit(); 
```

提交重新加载页面，这就是为什么它只闪烁正确的颜色，然后恢复到原来的日期，页面已经重新加载！如果您需要发送表单而不是重新加载页面，则必须使用 ajax。

# gwt - GXT model.get() 返回错误类型的实例

> ID：14875713
> 
> 赞同：0
> 
> 时间：2013-02-14T13:15:46.537
> 
> 标签：gwt, casting, gxt

在我的应用程序中，我使用的是 gwt 2.5.0 和 gxt 2.2.5。所以，我的 ColumnConfig 列带有这个渲染器：

```
column.setRenderer(new GridCellRenderer() {

            @Override
            public Text render(ModelData model, String property, ColumnData config, int rowIndex, int colIndex, ListStore listStore, Grid grid) {
                List<AccountGroupDto> accountGroups  = model.get(property);
                // some stuff here

                return groupsText;
            }
        }); 
```

但是当我尝试对我的列表 emenetns 做某事时，我得到了某种类型转换错误。我使用了一个调试器，看起来我的列表元素的类型是`com.example.core.application.api.BeanModel_com_example_core_application_api_AccountGroupDto`并且它不能被强制转换为`com.example.core.application.api.AccountGroupDto`，它应该是。

当我从 1.7 升级 gwt 和从 2.0.1 升级 gxt 时出现此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:33:10.747

将类型添加到您的 GridCellRenderer（根据您的错误，我假设您正在使用 BeanModel），因此请使用此类型：

```
column.setRenderer(new GridCellRenderer<BeanModel>() {

            @Override
            public Object render(BeanModel model, String property, ColumnData config, int rowIndex, int colIndex, ListStore<BeanModel> store, Grid<BeanModel> grid) {
                // ... 
```

渲染事件返回的模型是一个 BeanModel，现在，要获取原始元素，请使用模型的*.getBean*属性。

```
OriginalObjectType myObj = model.getBean(); 
```

现在您可以从 myObj 获取您的对象：

```
List<AccountGroupDto> accountGroups  = myObj.get(property); 
```

希望这可以帮助。

# python - itertools.groupby：成对迭代组

> ID：14875714
> 
> 赞同：2
> 
> 时间：2013-02-14T13:15:47.260
> 
> 标签：python, itertools

如何`groupby`成对迭代结果？我尝试的不太奏效：

```
from itertools import groupby,izip

groups = groupby([(1,2,3),(1,2),(1,2),(3,4,5),(3,4)],key=len)

def grouped(iterable, n):    
    return izip(*[iterable]*n)

for g, gg in grouped(groups,2):
    print list(g[1]), list(gg[1]) 
```

我得到的输出：

```
[] [(1, 2), (1, 2)]
[] [(3, 4)] 
```

我想要的输出：

```
[(1, 2, 3)] [(1, 2), (1, 2)]
[(3, 4, 5)] [(3, 4)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:35:06.317

```
import itertools as IT

groups = IT.groupby([(1,2,3),(1,2),(1,2),(3,4,5),(3,4)], key=len)
groups = (list(group) for key, group in groups)

def grouped(iterable, n):
    return IT.izip(*[iterable]*n)

for p1, p2  in grouped(groups, 2):
    print p1, p2 
```

产量

```
[(1, 2, 3)] [(1, 2), (1, 2)]
[(3, 4, 5)] [(3, 4)] 
```

* * *

您发布的代码非常有趣。它有一个世俗的问题，也有一个微妙的问题。

普通的问题是 itertools.groupby 返回一个迭代器，它在每次迭代时都输出一个键和一个组。由于您只对组感兴趣，而不是键，因此您需要类似

```
groups = (group for key, group in groups) 
```

微妙的问题更难以解释——我不确定我是否完全理解它。这是我的猜测：返回的迭代器`groupby`已经改变了它的输入，

```
[(1,2,3),(1,2),(1,2),(3,4,5),(3,4)] 
```

进入一个迭代器。groupby 迭代器环绕底层数据迭代器类似于 a`csv.reader`环绕底层文件对象迭代器。您通过此迭代器获得一次通过，并且仅通过一次。itertools.izip 函数在配对项目的过程中`groups`，使`groups`迭代器从第一个项目前进到第二个项目。由于您只通过迭代器，因此第一个项目已被消耗，因此当您调用`list(g[1])`它时它是空的。

解决这个问题的一个~~不太令人满意~~的方法是将迭代器转换`groups`为列表：

```
groups = (list(group) for key, group in groups) 
```

所以`itertools.izip`不会过早地消耗它们。编辑：再想一想，这个修复还不错。`groups`仍然是一个迭代器，并且仅在使用时将其`group`转换为列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:44:11.700

当您尝试查看 中的第二个键时`groupby`，您会强制它迭代到源迭代器的那么远。由于通常没有地方可以存储第一组中的项目，因此它们被简单地丢弃。

所以现在我们明白了为什么在我们尝试查看第二组的密钥（或项目）之前，我们需要确保我们已经存储了第一组的项目。

有些人肯定会讨厌这个，但是

```
>>> groups = groupby([(1, 2, 3), (1, 2), (1, 2), (3, 4, 5), (3, 4)], key=len)
>>> for i, j in ((list(i[1]), list(next(groups)[1])) for i in groups):
...     print i, j
... 
[(1, 2, 3)] [(1, 2), (1, 2)]
[(3, 4, 5)] [(3, 4)] 
```

# c# - 将数组绑定到组合框

> ID：14875716
> 
> 赞同：0
> 
> 时间：2013-02-14T13:15:49.880
> 
> 标签：c#, datagridview

我`datagridviewComboboxColumn`想将数组作为数据源绑定到该列，在该数组中我有一些数据。我做了这个任务，但是每当控制离开`DGVCBX`单元格数据时将不可见，我看不到数据。那么我该怎么做呢？

我的任务是如何将数据数组绑定到`datagridviewComboboxColumn`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:29:22.817

```
 string[] arr = { "test", "let", "go" };
        yourComboboxColumn1.DataSource = arr.ToArray(); //or .ToList(); 
```

# java - 如何使用“ > ID：14875718
> 
> 赞同：1
> 
> 时间：2013-02-14T13:15:57.370
> 
> 标签：java, android, utf-8

我想在 webview 中显示颜色、跨度、字体等。所以数据来自 php webservice。由于解析数据时出现问题，我们使用 UTF-8 格式对其进行编码。我成功解析数据并插入数据库。但是这里的问题是，当我想在 webview 中显示该数据时，它包含一些特殊字符，例如`"&lt;span style=\&quot;color:#ff0000;\&quot;&gt;"`这意味着`<span color="#ff0000"/>"`。所以在这里我想解码它并希望得到格式“”的结果。

我只是想要 `String str = "&lt;span style=\&quot;color:#ff0000;\&quot;gt;";`

```
 public String  decodeMethodUtf(Str)
          {
             //do some coding and decode
                return str;
          } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-07T01:57:02.433

也许这就是你想要的

```
Html.fromHtml("YOUR TXT").toString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T08:10:50.347

实际上android没有提供任何直接的类或方法来解码和删除所有特殊字符。我花了很多时间在网上找到这个。所以现在当我找到答案时，我想与你分享这个答案。这可以通过使用不在 android 中的 org.apache.commons.lang 类来完成。所以首先你必须从这里下载 jar 文件 [http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3](http://mvnrepository.com/artifact/commons-lang/commons-lang/2.3)

下载 jar 文件后，将该文件包含在您的项目中。现在一行代码在这里 decoded_string = StringEscapeUtils.unescapeHtml(endoded_string); 解码后的字符串是没有特殊字符的最终字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:34:12.113

希望能帮助到你。

```
 public String decodeMethodUtf(Str)
   {
      return URLDecoder.decode(str, "UTF-8");
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-09T18:59:20.653

Thank you @DEVENDRA. From you post I was able to decode the returned JSON string that had been encoded

The magic was in your statement:

```
String decoded_string = decdecodeMethodUtf(response); 
```

==============================================

```
String path = Protocol.SERVER_URL + Protocol.kMyPhp  + "?userId=" + userId + "&firstLoad=" + isRefresh + "&taskId=" + taskId;

// Make call to .php file and get response from DB

String response = HttpApi.sendRequest(path, null, null);

if (response == null) return null;

// Decode the response to replace ASCII Encoding Reference with Special Characters

String decoded_string = decdecodeMethodUtf(response);
Log.e("", ""+decoded_string);
response = decoded_string;

Log.i("response", response);
return response; 
```

# android - go sms pro 和 android.provider.Telephony.SMS_RECEIVED 接收器

> ID：14875722
> 
> 赞同：0
> 
> 时间：2013-02-14T13:16:16.780
> 
> 标签：android

我正在使用广播接收器阅读短信，例如：

```
if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
...
} 
```

但现在我安装`go sms pro`了，我的接收器再也不会被解雇了。为什么？即使我使用的是 go sms pro，我怎么还能触发我的接收器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:18:34.037

在清单中，您声明您的意图侦听器。添加：

```
<intent-filter android:priority="1000"> 
```

GoSMSPro 的优先级可能高于您的听众

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T13:34:00.990

go sms pro 在它的 SmsReceiver 清单中设置了这些行：

```
<receiver android:name=".smspopup.SmsReceiver"     android:permission="android.permission.BROADCAST_SMS">
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.GSM_SMS_RECEIVED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" />
            <data android:mimeType="application/vnd.wap.mms-message" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.android.mms.transaction.MESSAGE_SENT" />
        </intent-filter>
    </receiver> 
```

即使您的接收者的优先级设置为 2147483647，所有这些意图过滤器都会使其优先级高于您的接收者。您可以通过以下方式查看所有应用程序的所有接收者的列表：

```
List<ResolveInfo> receivers = getPackageManager().queryBroadcastReceivers(new Intent("android.provider.Telephony.SMS_RECEIVED"), 0); 
```

列表中的第一个接收者，比其他接收者更早收到短信

# animation - ScrollView 动画

> ID：14875723
> 
> 赞同：1
> 
> 时间：2013-02-14T13:16:16.940
> 
> 标签：animation, while-loop, scrollview, move

（对不起我的英语不好）

当项目（在本例中为文本视图）不可见时，我正在寻找滚动视图的动画。当项目到达滚动视图的上方或下方时，或/和当它变得可见时，我想把它放在一个像fade_out 这样的动画。

这可能吗？有什么建议吗？我试图在谷歌搜索，但没有。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:31:28.143

一种好方法是使用从 0 到 1 的 alpha 渐变覆盖视图。滚动视图的内容，包括文本视图，然后似乎会向边缘淡出。

# java - 使用实现接口的抽象类（Java）

> ID：14875724
> 
> 赞同：2
> 
> 时间：2013-02-14T13:16:19.863
> 
> 标签：java, interface, abstract-class, implements

我有这个界面，

```
public interface IAnything {
  void m1();
  void m3();
} 
```

还有两个实现这个接口的抽象类：

```
public abstract class AbstractThing1 implements IAnything {
  public void m1() {}
  public void m3() {}
}

public abstract class AbstractThing2 implements IAnything {
  public void m1() {}
  public void m3() {}
} 
```

在我的代码中的某个地方，我想调用 a `function doSomething(kindOfAbstractClass)`that perfoms `m1()`and `m3()`，以及其他取决于 kindOfAbstractClass 的工作。

我该如何定义和调用`doSomething()`？我这样做了，但它不起作用。谢谢

```
private <T extends IAnything> void doSomething(T kindOfAbstractClass) {
...
kindOfAbstractClass.m1();
kindOfAbstractClass.m3();
...
}

doSomething(AbstractThing1.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:28:27.443

你的问题是你提供一个类类型而不是一个实例作为参数给 doSomething

看看下面的修改代码：

```
public class MyClass {

    void doIt(){
        doSomething(new ConcreteThing());       
    }

    private <T extends IAnything> void doSomething(T kindOfAbstractClass) {

            kindOfAbstractClass.m1();
            kindOfAbstractClass.m3();
    }

}

interface IAnything {
      void m1();
      void m3();
}

abstract class AbstractThing1 implements IAnything {
      public void m1() {}
      public void m3() {}
}

class ConcreteThing extends AbstractThing1{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:22:27.403

尝试这个：

```
private void doSomething(IAnything  kindOfAbstractClass) {
...
kindOfAbstractClass.m1();
kindOfAbstractClass.m3();
...
} 
```

# java - 如果不转换为迭代器就无法获取下一个元素，为什么 Java 会有一个链表？

> ID：14875725
> 
> 赞同：4
> 
> 时间：2013-02-14T13:16:21.590
> 
> 标签：java, collections

如果不使用迭代器就无法访问下一个元素，为什么 Java 会有一个链表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:22:10.820

您不会“将列表转换为迭代器”，而是“在列表上获得迭代器”。您会发现迭代器机制更容易及时使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T13:22:59.247

`LinkedList`是`List`接口的实现，也是`Collection`. 链表本身就是一个概念，链表的每个元素都包含在一个节点中，该节点知道下一个元素和前一个元素。这样做是为了保持元素的插入顺序。

另一个常见的实现不会发生这种情况：`ArrayList`每个元素都分配在底层数组中，在这种情况下，不能保证顺序。

An`iterator`是迭代列表的多种方法之一，该方法恰好在迭代时管理列表（例如，`remove`迭代器的方法不以 a 结尾`ConcurrentModificationException`）并且它与特定的无关遍历集合的实现。它不是集合，它只是以循环友好的方式“管理”它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:19:50.870

因为你想让你的代码与特定的实现无关。如果它具有“next”功能，并且稍后您想更改为 ArrayList 实现，那么您将遇到一个大问题...

还有更多解释： `LinkedList`只是`List`接口的另一种实现。`ArrayList`和之间的主要区别在于`LinkedList`数组使用可扩展数组来保存列表，当`LinkedList`保存对下一个对象的引用时。

您仍然具有`get(index)`在索引中获取对象的功能，但效率不高（O（n））。

当 ArrayList 更高效时，LinkedList 主要用于减少运行时间。

还有更多： [LinkedList VS ArrayList](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist/322742#322742)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T13:20:06.607

迭代器只是一种遍历列表的方法。之所以有`LinkedList`数据结构，与某些操作的效率有关。

有关如何在 a和 an之间进行选择的详细说明，请参阅[此答案](https://stackoverflow.com/a/322742/474189)。`LinkedList``ArrayList`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T13:26:07.980

如果您只想拥有下一个元素，则可以使用

```
list.get(Int index+1); 
```

并将索引设置为

```
index = list.indexOf(<The current object your are in>); 
```

如果您目前不知道自己在哪个对象中，则必须使用迭代器。这相当容易且非常快。

每个人都可以使用一个。

```
for(List l : o) 
```

# php - php / mysql如何从不同的表中删除具有相同名称的字段

> ID：14875729
> 
> 赞同：1
> 
> 时间：2013-02-14T13:16:46.740
> 
> 标签：php, mysql, sql, sql-delete

嗨，我正在建立我的第一个网站，需要一个语句来删除 2 个包含用户指定的 Patient_ID 的表中的任何记录：

我试过了

```
mysql_query("DELETE FROM appointment 
  WHERE Patient_ID='$patid'
  UNION
  DELETE FROM patient 
  WHERE Patient_ID='$patid'"); 
```

并且

```
 mysql_query("DELETE FROM appointment INNER JOIN patient 
  WHERE Patient_ID='$patid'"); 
```

非常感谢您对此的帮助！

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:19:35.940

我宁愿`StoredProcedure`为两个*删除*语句做一个。

```
DELIMITER $$
CREATE PROCEDURE DeletePatient(IN PatientID INT)
BEGIN
    DELETE FROM appointment WHERE Patient_ID = PatientID;
    DELETE FROM patient WHERE Patient_ID = PatientID;
END $$
DELIMITER ; 
```

在你的 php 脚本上，

```
mysql_query("CALL DeletePatient($patid)"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:19:25.070

简单的

```
mysql_query("DELETE FROM appointment WHERE Patient_ID='$patid'");
mysql_query("DELETE FROM patient WHERE Patient_ID='$patid'"); 
```

不要忘记首先格式化您的 $patid：

```
$patid = mysql_real_escape_string($patid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:21:22.587

可以在一个查询中执行：

```
$query = "DELETE FROM appointment, patient USING patient INNER JOIN appointment ON (patient.patient_id = appointment.patient_id) WHERE patient.patient_id = '" . intval($patid) . "'"; 
```

但是，为了保持数据完整性，最好的选择是在您的`appointment`表上定义一个外键约束，该约束引用您的`patient`表并包含一个`ON DELETE CASCADE`子句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:19:21.597

编辑：

正如马克贝克在上述声明中指出的那样，最好的方法是在表上正确定义外键。然而，假设它们不是，它们应该被包装到一个事务中。

```
$query1 = "DELETE FROM appointment WHERE Patient_ID='".intval($patid)."'";
$query2 = "DELETE FROM patient WHERE Patient_ID='".intval($patid)."'";

mysql_query("START TRANSACTION", $yourConnection); 
mysql_query("BEGIN", $yourConnection); 
mysql_query($query1, $yourConnection); 
mysql_query($query2, $yourConnection); 
mysql_query("COMMIT", $yourConnection); 
```

原答案：

执行此操作的唯一方法是运行两个单独的 DELETE 命令。

```
$query1 = "DELETE FROM appointment WHERE Patient_ID='".intval($patid)."'";
$query2 = "DELETE FROM patient WHERE Patient_ID='".intval($patid)."'"; 
```

# angularjs - 从 Backbone JS 迁移到 AngularJS

> ID：14875731
> 
> 赞同：0
> 
> 时间：2013-02-14T13:16:50.590
> 
> 标签：angularjs

我有一个主干应用程序。然而 AngularJS 看起来很棒，需要的代码少了很多，而且它似乎更容易管理，所以我想尝试移植它。

一件事我不清楚。

我有许多模型用于在 Backbone 中存储数据。例如`@model.set(foo: "bar")`，我发现它对我的应用程序非常有用，我可以比较模型等......覆盖。

在 Angular 中存储数据的最佳方式是什么？范围的行为是否像模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:35:48.223

Angular 与模型无关，您可以使用普通旧 JavaScript 对象。或者使用您想要的功能创建 .get .set 函数！

范围的行为不像模型，范围是模型所在的位置（实例化/更改/读取等）。

# perl - 如何通过外部 perl 文件对其进行操作，将新的键值对添加到原始哈希中我想要的任何位置？

> ID：14875732
> 
> 赞同：1
> 
> 时间：2013-02-14T13:16:54.187
> 
> 标签：perl

**将perl 任务模块**中的以下**哈希值**视为

 **```
package taskmoduleName; 
use vars qw( %hash);  
%hash = ( 
 'x1' => {  'fruits' => { 
               'candiedfruit' => {  
                   'sugarcoated' => {
                       'fruitname1' => 'grapes',  }, },   
                   'chocolatecoated' {  
                       'fruitname2' => 'cherries', }, },},    
            'vegetables' => {  
                 'fried' => {  
                    'salted' => {     
                       'veg1' => 'banana', }, }, },
'x2' => {    'xyz' => 
                  'xyz1 => 'hhh', },}, ); 
```

如何**通过外部 perl 文件对其进行操作，**将**新的键值对添加到****原始哈希**中我想要的任何位置？ PS我不想修改原始文件中的任何其他内容，除了添加新条目

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:04:04.457

在您的其他文件中，您可以执行以下操作：

```
use taskmoduleName;
$taskmoduleName{x1}{fruits}{long}{name} = 'rhubarb'; 
```

但是，这可能会导致代码脆弱且难以维护，因此不建议这样做。

为什么你需要做这样的事情？也许这里有人可以想到不同的方法。****

# vba - VBA Excel 导入

> ID：14875735
> 
> 赞同：0
> 
> 时间：2013-02-14T13:17:03.797
> 
> 标签：vba, excel

在过去的几个小时里，我一直在研究不同的解决方案和代码，但都没有奏效（VBA 的新手）。我从另一个使用俄语字符的站点收到文件，我需要将这些文件导入到最后使用的行下的现有电子表格中，并且数据使用 Windows 西里尔字符。

现有的电子表格确实有列，您知道我需要如何格式化数据以便在现有列标题下导入数据。

数据是选项卡，但目前在它们上方没有任何标题。

我设法找到了一些适用于导入的代码，但这会将其放在单元格 A1 中的工作表中，该工作表具有宏而不是另一个工作表且没有列。任何帮助，将不胜感激。

```
Sub DoThis()
Dim TxtArr() As String, I As Long
 'TxtArr = BrowseForFile("C:\Users\rjoss\Desktop\SVY")
TxtArr = Split(OpenMultipleFiles, vbCrLf)
For I = LBound(TxtArr, 1) To UBound(TxtArr, 1)
    Import_Extracts TxtArr(I)
Next
End Sub
Sub Import_Extracts(filename As String)
 '
Dim Tmp As String
Tmp = Replace(filename, ".txt", "")
Tmp = Mid(Tmp, InStrRev(Tmp, "\") + 1)
 '
Range("A50000").End(xlUp).Offset(1, 0).Select
With ActiveSheet.QueryTables.Add(Connection:= _
    "TEXT;" & filename _
    , Destination:=Range("A50000").End(xlUp).Offset(1, 0))
    .Name = Tmp
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .TextFilePromptOnRefresh = False
    .TextFilePlatform = 850
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileTextQualifier = xlTextQualifierDoubleQuote
    .TextFileConsecutiveDelimiter = False
    .TextFileTabDelimiter = True
    .TextFileSemicolonDelimiter = False
    .TextFileCommaDelimiter = False
    .TextFileSpaceDelimiter = False
    .TextFileOtherDelimiter = "~"
    .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
    .TextFileTrailingMinusNumbers = True
    .Refresh BackgroundQuery:=False
End With
ActiveCell.EntireRow.Delete
End Sub

 'code copied from here and modified to work
 'http://www.tek-tips.com/faqs.cfm?fid=4114
Function OpenMultipleFiles() As String
Dim Filter As String, Title As String, msg As String
Dim I As Integer, FilterIndex As Integer
Dim filename As Variant
 ' File filters
Filter = "Text Files (*.txt),*.txt"
 ' Set Dialog Caption
Title = "Select File(s) to Open"
 ' Select Start Drive & Path
ChDrive ("C")
 'ChDir ("c:\Files\Imports")
ChDir ("C:\Users\rjoss\Desktop\SVY")
With Application
     ' Set File Name Array to selected Files (allow multiple)
    filename = .GetOpenFilename(Filter, FilterIndex, Title, , True)
     ' Reset Start Drive/Path
    ChDrive (Left(.DefaultFilePath, 1))
    ChDir (.DefaultFilePath)
End With
 ' Exit on Cancel
If Not IsArray(filename) Then
    MsgBox "No file was selected."
    Exit Function
End If
msg = Join(filename, vbCrLf)
OpenMultipleFiles = msg
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:34:53.893

这是[我](https://superuser.com/questions/307496/how-can-i-set-excel-to-always-import-all-columns-of-csv-files-as-text/527894#527894)用于导入 CSV 的一个小插件。也许它会帮助你：

*   它开始在当前选定的单元格处导入数据。
    此时可以更改：`Destination:=ActiveCell)`.
*   由于您的 CSV 数据与现有 Excel 列的顺序相同，因此您无需更改任何内容。只需将所有内容作为文本导入，如代码示例中所示。
*   关于[西里尔字符集](http://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode)：`.TextFilePlatform = -535`表示使用了 Unicode 字符集。 `.TextFilePlatform = 855`（没有尾随减号）代表 OEM Cyrillic。

* * *

```
'=============================================== this code is placed in a new modul ==================================================================================
Function ImportCSV()                            'this function imports the CSV

    Dim ColumnsType() As Variant                'declares an empty zero-based array. This is the only variable which MUST be declared
    MyPath = Application.GetOpenFilename("CSV Files (*.csv), *.csv")        'asks the user which CSV file should be imported
    If MyPath = False Then Exit Function        'if the user aborts the previous question, then exit the whole function

    ReDim ColumnsType(16383)                    'expand the array since excel 2007 and higher has 16384 columns. Excel 2003 is fine with that
    For i = 0 To 16383                          'start a loop with 16383 iterations
        ColumnsType(i) = 2                      'every column should be treated as text (=2)
    Next i                                      'repeat the loop and count up variable i

    If ActiveCell Is Nothing Then
        Workbooks.Add
        Application.Wait DateAdd("s", 1, Now)
        ActiveWorkbook.Windows(1).Caption = Dir(MyPath)
    End If

    With ActiveWorkbook.ActiveSheet.QueryTables.Add(Connection:="TEXT;" & MyPath, Destination:=ActiveCell)     'creates the query to import the CSV. All following lines are properties of this
        .PreserveFormatting = True              'older cell formats are preserved
        .RefreshStyle = xlOverwriteCells        'existing cells should be overwritten - otherwise an error can occur when too many columns are inserted!
        .AdjustColumnWidth = True               'adjust the width of all used columns automatically
        .TextFilePlatform = -535                'import with Unicode charset
        .TextFileParseType = xlDelimited        'CSV has to be a delimited one - only one delimiter can be true!
        .TextFileOtherDelimiter = Application.International(xlListSeparator)                                'uses system setting => EU countries = ';' and US = ','
        .TextFileColumnDataTypes = ColumnsType  'all columns should be treted as pure text
        .Refresh BackgroundQuery:=False         'this is neccesary so a second import can be done - otherwise the macro can only called once per excel instanz
    End With                                    'on this line excel finally starts the import process

    ActiveWorkbook.ActiveSheet.QueryTables(1).Delete  'deletes the query (not the data)

End Function                                    'we are finished 
```

# database-design - 重新设计数据库以存储具有不同用途的相同项目

> ID：14875738
> 
> 赞同：2
> 
> 时间：2013-02-14T13:17:05.527
> 
> 标签：database-design

我有下表：

```
Product (Id, CategoryId, Description, Value) 
```

有一天，所有旧产品都不再销售，新产品到货。但是，我想保留旧的购买历史。我曾想过添加一个可用于区分新旧的字段并制作此表：

```
Product (Id, CategoryId, Description, Value, Available) 
```

或者

使用新表：

```
ProductVersionTwo (Id, CategoryId, Description, Value) 
```

相同的策略将应用于 table`ProductCategory`和可能正在使用的任何其他表`Product`。

我不知道这种变化会发生多少次，但肯定会非常罕见。

你会推荐什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:37:27.460

我会采用第一种方法，稍作改动。由于您不知道以后是否需要此信息，因此我将`available`使用时间戳列替换该列`validFrom`和`validTo`. `validTo`如果`NULL`它是现在可用的产品。为了不让您的用户感到困惑，我会创建一个视图`SELECT * /*except maybe validFrom and validTo*/ FROM Product WHERE validTo IS NULL;`

使用第二种方法，除了可能有更好的性能之外，您没有任何优势，以防您无法正确索引第一种方法并且确实有很多产品。相反，您只会得到丑陋的查询，`UNION`并且您必须即时创建一个额外的列来区分产品版本。另外，您必须在某处存储有关不同版本表的信息。一年后，您会想知道第 2 版和第 3 版有何特别之处？

第二种方法的另一个问题可能是加入其他表，以防您使用自动递增列。您必须从以前版本表中的 max(autoincrement) 开始，以免在对旧产品等进行分析时感到困惑。在我看来是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:53:37.620

If I were you, I would go with the first option. It is easier to do and when this change occurs again in the future, you just have to flag the old products as 'unavailable'.

# linq - 添加/更改 DataServiceQuery 在银光

> ID：14875742
> 
> 赞同：1
> 
> 时间：2013-02-14T13:17:10.980
> 
> 标签：linq, wcf-data-services, silverlight-5.0, caliburn.micro

我正在使用 Caliburn.Micro 开发一个 Silverlight 5 应用程序（对于那些不熟悉 Caliburn 的人不要担心，你不需要了解 Caliburn 的东西才能回答我的问题）作为一个 MVVM 框架，我需要从中读取一些数据SQL 表。我选择了 WCF 数据服务（原因不重要）。

为了使事物具有通用性和可重用性，我创建了一个视图模型，它采用服务的 a`DataServiceQuery<TEntity>`和a`URI`并加载数据。我还为此视图模型创建了一个视图，使用 Telerik RadGridView 来显示数据，使用 Caliburn IResult 来在子窗口中显示视图模型。我想在需要从表中选择某些内容时使用此视图模型和视图，因为在我的应用程序中，我有许多带有字段的表单，用户需要在这些字段上从一个大列表（SQL 表）中选择某些内容。

```
public class SelectDBEntitiesViewModel<TEntity, TContext> : DialogScreenBase, IAmClean
        where TEntity : class, new()
        where TContext : DataServiceContext
    {
        public SelectDBEntitiesViewModel()
        {
        }

        public void Load()
        {
            // load
        }

        public DataServiceQuery<TEntity> Query{ get; set; }

        public void Filter()
        {

            Query = _originalQuery.AddQueryOption("$filter", "startswith(" + _filterProperty + ",'" + FilterValue + "')");
            Load();
        }
    } 
```

因此，从协程中的其他一些视图模型中，我创建了这个 IResult 类，如下所示：

```
public IEnumerable<IResult> SelectInternalBeneficiary()
    {
        SelectDBEntitiesResult<InternalBeneficiary, QMSEntities> r = new SelectDBEntitiesResult<InternalBeneficiary, QMSEntities>(_oDataUri);
        r.Query = (from ib in r.DataContext.InternalBeneficiaries where (ib.Firma == Model.GroupCompany) select ib) as DataServiceQuery<InternalBeneficiary>;            r.PageSize = 2;
        r.ColumnSettingsName = UserSettings.SEL_INTERNALBENEFICIARIES_GRID;
        r.Header = "SELECT AN INTERNAL BENEFICIARY";
        r.Subtitle = "List of all departments";
        yield return r;
        Model.InternalBeneficiary = r.SelectedObject.DenumireDepartament;
    } 
```

因此，当此方法运行时，会打开一个子窗口，视图模型会加载数据并加载视图中的网格。

现在一切正常，但在视图中，我在右上角有一个文本框，我想通过向查询中添加一些新子句来过滤数据。我需要在我的一般情况下执行此操作，`SelectDBEntitiesViewModel`但问题是此视图模型正在使用的查询是从外部作为参数接收的。我在 Filter 方法中尝试了以下方法：

```
Query = _originalQuery.AddQueryOption("$filter", "startswith(" + _filterProperty + ",'" + FilterValue + "')"); 
```

但是当我运行应用程序时，我当然会得到这个错误：

```
Can't add query option '$filter' because it would conflict with the query options from the translated Linq expression. 
```

我了解发生了什么（我已经在查询中有一个 where 子句并且无法添加另一个过滤器）但我不知道如何解决它。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:29:11.813

没关系，我设法找出如何创建`Expressions`并将它们添加到`Query`：

此方法将过滤类型添加到开头`IQueryable<T>`

```
private IQueryable<T> StartsWithQuery<T>(IQueryable<T> query, string propertyValue, PropertyInfo propertyInfo)
        {
            ParameterExpression e = System.Linq.Expressions.Expression.Parameter(typeof(T), "e");
            MemberExpression m = System.Linq.Expressions.Expression.MakeMemberAccess(e, propertyInfo);
            ConstantExpression c = System.Linq.Expressions.Expression.Constant(propertyValue, typeof(string));
            MethodInfo mi = typeof(string).GetMethod("StartsWith", new Type[] { typeof(string) });
            System.Linq.Expressions.Expression call = System.Linq.Expressions.Expression.Call(m, mi, c);
            Expression<Func<T, bool>> lambda = System.Linq.Expressions.Expression.Lambda<Func<T, bool>>(call, e);
            return query.Where(lambda);
    } 
```

此方法将等于过滤类型添加到`IQueryable<T>`：

```
private IQueryable<T> EqualsQuery<T>(IQueryable<T> query, string propertyValue, PropertyInfo propertyInfo)
        {
            Expression<Func<T, bool>> additionalExpression =
               System.Linq.Expressions.Expression.Lambda<Func<T, bool>>(
                   System.Linq.Expressions.Expression.Equal(
                       System.Linq.Expressions.Expression.MakeMemberAccess(
                           System.Linq.Expressions.Expression.Parameter(typeof(TEntity), "te"),
                           typeof(TEntity).GetProperty(_filterProperty)),

               System.Linq.Expressions.Expression.Constant(FilterValue)),
                   System.Linq.Expressions.Expression.Parameter(typeof(TEntity), "te"));

            return query.Where(additionalExpression);
        } 
```

表达式树非常强大

# postgresql - pgAdmin III：如何查看 blob？

> ID：14875748
> 
> 赞同：16
> 
> 时间：2013-02-14T13:17:33.243
> 
> 标签：postgresql, pgadmin

我知道 PostgreSQL 将 BLOB 内容写入单独的表，但是有没有办法从 pgAdmin 内部以简单方便的方式查看 blob 内容？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-05-25T07:02:40.810

```
SELECT encode(blobdata::bytea, 'escape') FROM table as o where o.blobdata != '' 
```

在哪里

1.  blobdata 是 bytea 列 (blob)
2.  "table" 是包含 blobdata 列的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:52:54.367

我不确定你所说的“简单方便”是什么意思，但你能做的最好的就是`lo_read(...)`

这将`lob`作为`bytea`.

从获取数据的意义上说，这既简单又方便，但是您 pgAdmin 不会为您将转义字符串转换回原始二进制文件，因此您只能查看二进制文件的文本表示，因此它不是“简单且方便”，如果您想在 lob 中显示 png 格式或其他格式的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T07:45:09.553

如果我们需要通过 SQL 客户端（如 pgAdmin）对二进制列进行 SQL 操作，最好使用 base64 编码，如下所示

**获取 base64 格式的二进制数据**

```
select id, encode(blob_column::bytea, 'base64') as blob_column from blob_table where id=1; 
```

**通过提供 base64 格式的数据来更新二进制数据**

```
update blob_table set blob_column = decode('J0u0v1h4CulinCwUvk4dhw==', 'base64') where id=1; 
```

# elmah - ELMAH：Elmah 页面没有样式，难以阅读

> ID：14875750
> 
> 赞同：8
> 
> 时间：2013-02-14T13:17:40.507
> 
> 标签：elmah, elmah.mvc

## 设置：

我在 ASP.NET MVC 4 站点上通过 NuGet 安装了 ELMAH。

在开发机器上，应用程序安装在根目录下。这一切都有效，并且通常采用 ELMAH 页面的样式。它总是这样做，在我的意思是开发机器上工作，不是吗？

但在服务器上，该应用程序安装在子文件夹 (~/tracker) 中。尽管 ELMAH 工作正常，但页面没有样式，因此难以阅读。

## 问题：

我需要做什么才能使页面样式化？

据推测，样式来自可以在 web.config 中配置的资源。但是怎么做？

## 编辑：

我发现我收到了一个高度相关的错误：

```
System.Web.HttpException: A public action method 'stylesheet' was not found on controller 'Elmah.Mvc.ElmahController'. 
```

路径如下：

```
/tracker/elmah/stylesheet 
```

这显然与 ELMAH 页面源中的 Link 标签有关：

```
<link rel="stylesheet" type="text/css" href="/tracker/elmah/stylesheet" /> 
```

但是如何配置这个 url？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-18T15:04:21.837

你的“elmah.mvc.route”设置是什么？如果您从路径中删除“/tracker”，您能看到 elmah 屏幕吗？

开箱即用，elmah 的路由设置为：

```
<add key="elmah.mvc.route" value="elmah" /> 
```

你的需要是

```
<add key="elmah.mvc.route" value="tracker/elmah" /> 
```

您的路由配置正确地重定向了控制器操作的请求，但是 elmah 会在不使用您的路由配置的情况下打印样式表地址本身，因此您需要告诉它使用哪个路由/URL 来引用它。

# javascript - 如何从站点 A 上运行的 javascript 获取站点 B 的 cookie 值

> ID：14875751
> 
> 赞同：1
> 
> 时间：2013-02-14T13:17:41.600
> 
> 标签：javascript, jquery, cross-domain

想象一下连锁书店我有一个用户 ID cookie，当用户从一个站点跳转到另一个站点（或稍后到达一个站点）时，我想保留用户 ID。

我知道这听起来像是一个安全漏洞，因此无法完成，但是这两个站点都属于我的客户，因此它是合法的，我可以将静态文件添加到站点 B 服务器端的根目录。

如果我可以将动态文件添加到站点 B 根目录，那么它就像回显 cookie 值一样简单。但我只能添加一个静态文件。我正在考虑使用 iframe 来获取文件并在其中包含 javascript 来重定向到具有 cookie 值的 url。我可以从站点 A 读取 iframe 的 url 吗？

还有其他方法吗？

# git - Git rebase：找到要重新设置的“下一个”提交？

> ID：14875756
> 
> 赞同：4
> 
> 时间：2013-02-14T13:17:53.800
> 
> 标签：git, version-control, git-rebase

我们在 Git 中有两个分支`master`，`develop`. `master`一个合作伙伴组不断更新，我不断地将我们的`develop`分支重新定位到`master`，如下所示：

```
#(on develop)
$ git pull --rebase origin master #1
$ git rebase origin/develop       #2
$ git push origin develop         #3 
```

…但是昨天合作伙伴组的某个人`master`没有正确的电子邮件地址，所以我逐步遇到了一个问题`#2`：

```
git rebase origin/develop
First, rewinding head to replay your work on top of it...
Applying: <...>
<...>
Patch does not have a valid e-mail address. 
```

并`git status`显示：

```
$ git status
# Not currently on any branch.
# You are currently rebasing.
#   (all conflicts fixed: run "git rebase --continue")
#
nothing to commit, working directory clean 
```

我所做的是跳过没有地址的提交`git rebase --skip`，然后在 rebase 之后挑选这些提交。但我想知道这是正确的方法吗？我可以直接就地挑选提交而不跳过它吗？如果是，我如何才能真正找出这个有问题的提交（而不是在 中查找`git log`），因为它基本上是要重新基于当前提交顶部的*下*一个提交，所以 git 必须以某种方式知道它是哪一个...... ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-14T23:32:25.460

您可以尝试[在 Git 中更改多个提交的作者和提交者名称和电子邮件中的所有建议](https://stackoverflow.com/questions/750172/change-the-author-of-a-commit-in-git/33137355#33137355)

或者您可以在其中添加一个`-i`以继续进行（如果您有持续的自动工具提交问题或者只是想继续进行并让其他人最终解决他们的问题，这很有用）

所以，当我得到

```
> git rebase master
First, rewinding head to replay your work on top of it...
Patch does not have a valid e-mail address. 
```

我愿意`git rebase --abort`，然后

```
> git rebase master -i
Successfully rebased and updated refs/heads/mybranch. 
```

*这对于 git 2.1.4 是正确的。*

显然，它提供了一个要编辑的变基列表，但您只需保存未经编辑的内容并继续进行。

是的，它与“原作者<>”一起提交

# c# - OneNote，使用 UpdatePageContent 插入元素

> ID：14875760
> 
> 赞同：0
> 
> 时间：2013-02-14T13:18:13.893
> 
> 标签：c#, xml, visual-studio-2010, xsd, onenote

我试图查找是否可以通过 Microsoft.Office.Interop.OneNote 参考中的 UpdatePageContent 将内容添加到 oneNote 页面。

我想用我用 XML 制作的默认模板创建一个页面，但是 msdn 的文档说我这个函数只允许结构：

msdn 文档：

您必须在传递给 UpdatePageContent 方法的 XML 代码中包含的唯一对象是已更改的页面级对象（例如大纲、页面上的图像或页面上的墨迹）。此方法不会修改或删除您未在 bstrPageChangesXmlIn 参数中指定的页面级对象。该方法完全替换了页面级对象，例如大纲，其 ID 与您传递的对象的 ID 匹配。因此，您必须在代码中完全指定所有页面级对象，包括它们的现有内容和您想要对其进行的更改。

我的问题是：我可以使用这个库在页面中添加元素吗？如果是这样，如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:54:18.223

您可以使用[OMSpy](http://blogs.msdn.com/b/johnguin/archive/2011/07/28/onenote-spy-omspy-for-onenote-2010.aspx)工具来调查页面内容结构。以下是一些可帮助您入门的示例：

有 pageId 时设置页面标题

```
 private static void SePageTitle(string pageId, string pageTitle)
    {
        Microsoft.Office.Interop.OneNote.Application m_app = new Microsoft.Office.Interop.OneNote.Application();
        string strPagTitle = "<one:Page xmlns:one=\"http://schemas.microsoft.com/office/onenote/2010/onenote\" ID=\"{0}\" >" +
              "<one:Title selected=\"partial\" lang=\"en-US\">" +
                "<one:OE style=\"font-family:Calibri;font-size:17.0pt\">" +
                  "<one:T><![CDATA[{1}]]></one:T> " +
                "</one:OE>" +
              "</one:Title>" +
            "</one:Page>";
        strPagTitle = string.Format(strPagTitle, pageId, pageTitle);
        m_app.UpdatePageContent(strPagTitle);
    } 
```

当您拥有 pageId 时将元素添加到页面：

```
 private static void SetElementInPage(string pageId)
    {
        Microsoft.Office.Interop.OneNote.Application m_app = new Microsoft.Office.Interop.OneNote.Application();
        string strPageContent = "<one:Page xmlns:one=\"http://schemas.microsoft.com/office/onenote/2010/onenote\" ID=\"{0}\" >" +
            "<one:Outline>" +
                "<one:Position x=\"36.0\" y=\"86.4000015258789\" z=\"0\" />" + 
                "<one:Size width=\"117.001953125\" height=\"40.28314971923828\" />" + 
                "<one:OEChildren>" + 
                    "<one:OE>" +
                        "<one:T><![CDATA[This is a sample data added to test out OneNote API functionality.  Following is a list item.]]></one:T>" + 
                    "</one:OE>" +
                "</one:OEChildren>" +
                "<one:OEChildren indent=\"2\">" +
                    "<one:OE  alignment=\"left\">" +
                        "<one:List>" +
                            "<one:Bullet bullet=\"2\" fontSize=\"11.0\" />" +
                        "</one:List>" + 
                        "<one:T><![CDATA[A for Apple]]></one:T>" +
                    "</one:OE>" +
                    "<one:OE  alignment=\"left\">" +
                        "<one:List>" +
                            "<one:Bullet bullet=\"2\" fontSize=\"11.0\" />" +
                        "</one:List>" + 
                        "<one:T><![CDATA[B for Ball]]></one:T>" +
                    "</one:OE>" +
                    "<one:OE  alignment=\"left\">" +
                        "<one:List>" +
                            "<one:Bullet bullet=\"2\" fontSize=\"11.0\" />" +
                        "</one:List>" + 
                        "<one:T><![CDATA[C for Cat]]></one:T>" +
                    "</one:OE>" +
               "</one:OEChildren>" +
            "</one:Outline>" +
            "</one:Page>";
        strPageContent = string.Format(strPageContent, pageId);
        m_app.UpdatePageContent(strPageContent);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:26:54.717

请在您询问时发布下一部分的帖子，以便其他 SOF 成员正确理解问题。

有关使用 Onepagenote 的语法和解决问题的方法，请浏览以下链接。

[http://msdn.microsoft.com/en-us/magazine/ff796230.aspx](http://msdn.microsoft.com/en-us/magazine/ff796230.aspx)

[http://social.msdn.microsoft.com/Forums/pl-PL/officegeneral/thread/4596510a-6509-4e3a-be08-c11131fa4663](http://social.msdn.microsoft.com/Forums/pl-PL/officegeneral/thread/4596510a-6509-4e3a-be08-c11131fa4663)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T05:59:00.943

为什么要让自己这么难？您可以简单地在 OneNote 中创建模板，然后使用互操作来获取层次结构。所以之后你可以使用一个sectiongroup（这将是你的模板），这样你就可以在一个sectiongroup的每个部分中获取页面的内容。

我很难将元素从一个笔记本复制到另一个，但每个元素都有一个 ObjectID。这表明该元素是该特定页面已知的。删除此属性（因此不仅是属性的值），OneNote 会将元素视为新元素，并将 ObjectID 分配给元素。

我如何从页面中删除 ID 和 objectID 的代码示例：

```
string xml;
                    OneApplication.GetPageContent(page.Attributes["ID"].Value, out xml, PageInfo.piAll);
                    var doc = XDocument.Parse(xml);
                    var nodes = doc.Descendants();

                    foreach (var node in nodes)
                    {
                        if (node.Attribute("objectID") != null)
                        {
                            node.Attributes("objectID").Remove();
                        } else if (node.Attribute("ID") != null)
                        {
                            node.Attribute("ID").Value = "";
                        }
                    } 
```

当您将所有元素添加到另一个页面时。你会看到他们。这100％有效，因为我自己做过:)

希望这会有所帮助。

# python - Finding the modules where changes were checked with svn

> ID：14875763
> 
> 赞同：-3
> 
> 时间：2013-02-14T13:18:25.970
> 
> 标签：python, perl, parsing, svn, shell

I have a multi module maven project.

```
Project
    -Module1
    -Module2
    -Module3
    -Module4
    -Module5 
```

I want to find the modules to which files were checked in based on the revision number.

I know `svn log -v -r12345 -r12346 svn://repo-path.com/project` will get the log for the changed paths but I want only the module names.

For eg: from the following log I want

```
------------------------------------------------------------------------
r12345 | debajyoti.das@email.com | 2013-02-06 01:40:23 -0800 (Wed, 06 Feb 2013) | 1 line
Changed paths:
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/NamedExtensionPoint.java
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/PrePostExtensionPoint.java
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/helper/ExtensionConfigurationHelper.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/DocumentGeneratorExt.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/NamedExtensionPoint.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/SystemDateBll.java

BUG 12345678 - BLAH IMPLEMENTATION
------------------------------------------------------------------------
r12346 | debajyoti.das@email.com | 2013-02-06 01:40:23 -0800 (Wed, 06 Feb 2013) | 1 line
Changed paths:
   M /MODULE/CYCLE/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/FileCycle1.java
   M /MODULE/CYCLE/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/FileCycle2.java

BUG 12345679 - BLAH IMPLEMENTATION 
------------------------------------------------------------------------ 
```

I want `PROJECT.SHARED` , `PROJECT.SRE` and `MODULE.CYCLE` to be picked up maybe in a log file to use them later for a build process.

How can I do this when I want to manually pass multiple revision numbers and generate the list of modules where changes were checked into via svn.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:58:19.057

Three separate tasks:

1.  call `svn` properly to create the log
2.  parse the log
3.  Write the parsed values somewhere

1.

```
import subprocess as sp

svn_url = "svn://repo-path.com/project"
revisions = [12345, 12346]
revision_clargs = ["-r%i" % revision for revision in revisions]
popen = sp.Popen(["svn", "log", "-v"] + revision_clargs + [svn_url],stdout=sp.PIPE,stderr=sp.PIPE)
out,err = popen.communicate() 
```

2.

```
input_ = """
------------------------------------------------------------------------
r12345 | debajyoti.das@email.com | 2013-02-06 01:40:23 -0800 (Wed, 06 Feb 2013) | 1 line
Changed paths:
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/NamedExtensionPoint.java
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/PrePostExtensionPoint.java
   M /PROJECT/SHARED/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/helper/ExtensionConfigurationHelper.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/DocumentGeneratorExt.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/NamedExtensionPoint.java
   M /PROJECT/SRE/branches/DEV_Branch/ext/src/main/java/com/companyname/ext/SystemDateBll.java

BUG 12345678 - BLAH IMPLEMENTATION
------------------------------------------------------------------------
r12346 | debajyoti.das@email.com | 2013-02-06 01:40:23 -0800 (Wed, 06 Feb 2013) | 1 line
Changed paths:
   M /MODULE/CYCLE/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/FileCycle1.java
   M /MODULE/CYCLE/branches/DEV_Branch/extensibility/src/main/java/com/companyname/extensibility/FileCycle2.java

BUG 12345679 - BLAH IMPLEMENTATION 
------------------------------------------------------------------------
"""

modified_prefix = "   M "

projects = set(map(lambda x: ".".join(x.split("/")[1:3]),
               filter(lambda x: x.startswith(modified_prefix),
                      (input_.split("\n"))))) 
```

3\. Depends on what you want...

# android - Facebook SDK 3.0 - 如何强制 AUTH 对话？

> ID：14875767
> 
> 赞同：9
> 
> 时间：2013-02-14T13:18:29.357
> 
> 标签：android, facebook

我正在从 Facebook Android SDK 2.0 升级到 Facebook Android SDK 3.0，我正在寻找以下代码的替代品：

```
facebook.authorize(activity, FACEBOOK_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, facebookDialogListener); 
```

所以在 Facebook Android SDK 2.0 中有一个标志 FORCE_DIALOG_AUTH 强制显示 Facebook 登录对话框，即使用户在设备上的 Facebook 应用程序中有一个有效的 Facebook 会话。这个标志现在已被弃用，我还没有找到关于如何替换它的提示。

有什么建议么？

PS 我知道这个问题与单点登录 (SSO) 有关，但禁用 SSO 不是一种选择。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T15:19:53.900

好的，答案是：

```
facebookOpenRequest.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

# android - 如何在 AchartEngine 中删除条之间不必要的空间？

> ID：14875769
> 
> 赞同：3
> 
> 时间：2013-02-14T13:18:30.903
> 
> 标签：android, achartengine

它只是在每个条之间增加了不必要的空间。我如何减少或删除它？所有数据都是动态生成的..我尝试设置条形宽度但它不起作用..

请看附图。。

***更新代码***

```
 XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
        mRenderer.setXLabelsColor(Color.BLUE);
        mRenderer.setYLabelsColor(0, Color.BLUE);
        mRenderer.setScale(0.5f);
        mRenderer.setBarSpacing(0.5f);
        mRenderer.setBarWidth(75);
        mRenderer.setAxisTitleTextSize(10);

        mRenderer.setXLabelsAlign(Align.CENTER);
        mRenderer.setYLabelsAlign(Align.RIGHT);

        mRenderer.setMargins(new int[] { 20, 30, 20, 0 });
        mRenderer.setXTitle("Categories");
        mRenderer.setYTitle("Amount");

        for (int j = 0; j < availCatList.size(); j++) {

            mRenderer.addXTextLabel(j + 1, availCatList.get(j));
        }

        mRenderer.setXLabels(0);

        mRenderer.setChartTitle("Bar Chart");

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

        for (int i = 0; i < availCatList.size(); i++) {

            XYSeries series = new XYSeries(availCatList.get(i));

            series.add(i + 1, mTotal.get(i));

            dataset.addSeries(series);

            XYSeriesRenderer seriesRenderer = new XYSeriesRenderer();

            seriesRenderer.setChartValuesSpacing(0.5f);
            seriesRenderer.setChartValuesTextAlign(Align.CENTER);
            seriesRenderer.setChartValuesTextSize(10.0f);
            seriesRenderer.setDisplayChartValues(true);

            Random r = new Random();
            int color = Color.argb(255, r.nextInt(256), r.nextInt(256),
                    r.nextInt(256));

            seriesRenderer.setColor(color);

            mRenderer.addSeriesRenderer(seriesRenderer);
        }

           view = ChartFactory.getBarChartView(this, dataset, mRenderer,
                Type.DEFAULT);

          layout.addView(view); 
```

任何帮助将不胜感激..

![条形图](../Images/7b407c6320445f7a3069767368aa87ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:35:28.630

当每个系列只有一个项目时，您可以使用`renderer.setBarWidth(width)`，其中`value`可能是`(screenWidth - leftMargin - rightMargin) / seriesCount`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:25:26.583

尝试使用：

```
mRenderer.setBarSpacing(0.0f); 
```

# c# - 在 WPF 中将画布绑定到画布

> ID：14875771
> 
> 赞同：1
> 
> 时间：2013-02-14T13:18:37.990
> 
> 标签：c#, .net, wpf, data-binding, graphics

我有一个名为“WaferMap”的类，它在自己的画布上绘制矩形。主视图中也有一个画布。我希望能够将 WaferMap 类中画布的内容绑定到 GUI 上的画布。做这个的最好方式是什么？

我现在的做法是在 WaferMap 类中创建一个画布，然后使用画布的 ContentPresenter 属性将其绑定到 GUI 上的画布。

**WaferMap 类：**

```
public class WaferMap : ViewModelBase
{
#region Fields

    protected const int rows = 23;
    protected const int cols = 23;
    protected int currentRow;
    protected int currentCol;
    protected DiePrint diePrint;
    protected List<BlueTape> blueTapeList;
    protected Canvas canvasToMap;

#endregion

#region Constructor

    public WaferMap(List<BlueTape> btList)
    {
        blueTapeList = new List<BlueTape>();
        blueTapeList = btList;
    }

#endregion

#region Properties

    public Canvas WaferMapCanvas
    {
        get
        {
            return canvasToMap;
        }
    }
    public List<BlueTape> BlueTapeList
    {
        get
        {
            return blueTapeList;
        }
    }

#endregion

#region Methods

    public void DrawWaferMap()
    {
        if (blueTapeList.Count > 0)
        {
            canvasToMap = new Canvas();
            foreach (BlueTape bt in blueTapeList)
            {
                if (bt.DiePrintList.Count > 0)
                {
                    foreach (DiePrint print in bt.DiePrintList)
                    {
                        // Create a new DiePrintRectangle and get its
                        // row and column coordinates
                        DiePrintRectangle diePrintRect = new DiePrintRectangle(print);

                        // Add the print to the canvas
                        canvasToMap.Children.Add(diePrintRect);

                        // Set the properties
                        Thickness margin = new Thickness(0);
                        diePrintRect.Margin = margin;
                        diePrintRect.Height = 25;
                        diePrintRect.Width = diePrintRect.Height;
                        diePrintRect.HorizontalAlignment = HorizontalAlignment.Left;
                        diePrintRect.VerticalAlignment = VerticalAlignment.Top;
                        currentCol = Convert.ToInt32(print.Col * diePrintRect.Height);
                        currentRow = Convert.ToInt32(print.Row * diePrintRect.Height);
                        print.MapCol = currentCol;
                        print.MapRow = currentRow;
                        Canvas.SetLeft(diePrintRect, currentCol);
                        Canvas.SetTop(diePrintRect, currentRow);

                        // Get the color of the print fill and stroke
                        //diePrintRect.Stroke = GetDiePrintColor(bt);
                        diePrintRect.StrokeThickness = 12;
                        diePrintRect.Stroke = GetDiePrintColor(bt);
                        diePrintRect.Fill = Brushes.Transparent;
                        diePrintRect.MouseDown += diePrintRect_MouseDown;
                        diePrintRect.MouseEnter += diePrintRect_MouseEnter;
                    }
                }
            }
        }
    }
} 
```

这是我的 XAML：

```
 <DockPanel>
        <Canvas Name="mapCanvas">
            <ContentPresenter Content="{Binding WaferMap}"/>
        </Canvas>
    </DockPanel> 
```

**在后面的代码中：**

*注意*：我有这个用于调试绑定的设置。单击“btnDoStuff”按钮时，它将在 GUI 上设置画布的数据上下文。

```
public partial class WaferTrackerWindow : Window
{
    WaferTrackerWindowViewModel wtw;
    public WaferTrackerWindow()
    {
        InitializeComponent();

        SelectWaferButtonViewModel swbv = new SelectWaferButtonViewModel();
        wtw = new WaferTrackerWindowViewModel(tvwWaferList, txtFilter);            

        wtw.SelectWaferButtonViewModel = swbv;

        tvwDockPanel.DataContext = wtw.SelectWaferButtonViewModel;
        DataContext = wtw;
        btnChooseWafer.DataContext = wtw;
        btnSelectWafer.DataContext = wtw;
        btnExit.DataContext = wtw;
        tbkWafer.DataContext = wtw;

        btnDoStuff.Click += btnDoStuff_Click;
    }

    private void btnDoStuff_Click(object sender, RoutedEventArgs e)
    {
        mapCanvas.DataContext = wtw.WaferMap.WaferMapCanvas;
    } 
```

由于某种原因，这不起作用。任何帮助将不胜感激。

除了在类中创建画布并尝试将其绑定到视图中的画布之外，还有更好的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:35:24.420

您正在设置您`DataContext`的`mapCanvas`to `wtw.WaferMap.WaferMapCanvas`，这是一个类型的对象`Canvas`，并且`Canvas`没有名为`WaferMap`

您需要改为设置`DataContext`to`wtf.WaferMap`并绑定到`WaferMapCanvas`数据类型的属性`Canvas`

```
mapCanvas.DataContext = wtw.WaferMap; 
```

和

```
<ContentPresenter Content="{Binding WaferMapCanvas}"/> 
```

# javascript - 无法绑定到 document.ready 上的 JPlayer 事件

> ID：14875772
> 
> 赞同：0
> 
> 时间：2013-02-14T13:18:44.290
> 
> 标签：javascript, jquery, google-chrome, audio, jplayer

我正在使用 jplayer 在网页上播放音频，当页面加载时，检查器和播放器加载正常，但绑定功能不起作用。如果我稍后从控制台调用它，那么它工作正常。

```
$(document).ready(function(){
    myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
        { mp3: flatplaylist[0] },
        { supplied: "mp3", }
    );
    $("#jplayer_inspector").jPlayerInspector({jPlayer:$("#jquery_jplayer_1")});
    //does not work from here, but will work if I put this in the console.
    $(myCirclePlayer.audio).bind('ended',function (){ playNextFile(); }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:34:04.127

这是我的最终代码，效果很好。

```
var PlayerID = "#jquery_jplayer_1";
$(window).ready(function(){
    myCirclePlayer = new CirclePlayer(PlayerID,{mp3: 'audio/'+mypl.playlist[0]},{supplied: "mp3",});
    $("#jplayer_inspector").jPlayerInspector({jPlayer:$("#jquery_jplayer_1")});
    $(PlayerID).bind($.jPlayer.event.ended, function (){ playNextFile(); });
}); 
```

# jquery - jQuery UI 使用 :tabbable 来查找下一个和上一个 tabbable 元素

> ID：14875775
> 
> 赞同：4
> 
> 时间：2013-02-14T13:18:47.010
> 
> 标签：jquery, jquery-ui

我正在尝试使用 jQuery UI[`:tabbable`](http://api.jqueryui.com/tabbable-selector/)选择器来选择页面上的下一个和上一个输入元素。我有以下html

```
<div id="section1">1.
    <input type="text" />2.
    <input type="text" />
</div>
<div id="section2">3.
    <input type="text" />4.
    <input type="text" />5.
    <input type="text" />
</div> 
```

和下面的javascript

```
$(document).ready(function () {
    $("input").on("keyup", function (event) {
        if (event.keyCode == 40) $(this).next(":tabbable").focus();
        else if (event.keyCode == 38) $(this).prev(":tabbable").focus();
    });
}); 
```

选择器似乎在 div 中工作正常。例如，如果我在输入 3 中并按下它将转到输入 4。但是，如果我按下选择器，则无法找到输入 2。我似乎无法弄清楚如何在页面上找到上一个可选项卡元素。

[示例 jsfiddle](http://jsfiddle.net/v9w5J/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:54:07.253

您可以使用`.index()`输入元素的 来在它们之间切换。

```
$("input").on("keyup", function (event) {
    if (event.keyCode == 40) {
        $('input').eq(parseInt($('input').index($(this)), 10) + 1).focus();
    } else if (event.keyCode == 38) {
        $('input').eq(parseInt($('input').index($(this)), 10) - 1).focus();
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/v9w5J/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:20:38.867

这对你有用吗：

```
$(document).ready(function () {
    $("input").on("keyup", function (event) {
        if (event.keyCode == 40) {
            $nextTabbable = $(this).next(":tabbable").length
                ? $(this).next(":tabbable")
                : $(this).parent().next().find(":tabbable").first()
            ;
            $nextTabbable.focus();
        }
        else if (event.keyCode == 38) {
            $prevTabbable = $(this).prev(":tabbable").length
                ? $(this).prev(":tabbable")
                : $(this).parent().prev().find(":tabbable").last()
            ;
            $prevTabbable.focus();
        }
    });
}); 
```

这是一个[jsfiddle](http://jsfiddle.net/martyk/fR43G/)

# java - SyntaxError：缺少 ] 在 jquery 中的元素列表之后

> ID：14875776
> 
> 赞同：1
> 
> 时间：2013-02-14T13:18:49.193
> 
> 标签：java, javascript, jquery, list, pojo

我想为 StudentDetailsVo 列表项分配对象。

我不断收到此错误。

```
 $("#searchAtten").click(function(){
            $("#tablerows").empty();
            var sectionId=$("#selSection :selected").attr("id");
            var studid=$("#studentid").val();
            var datee = ${resultVO.monthEndDate}
            var reqD = ${resultVO.reqdEndDate}
            //I need to assign object here 
            var namem =${resultVO.studentList}
            alert("namem"+namem);
            var betweentDate=  reqD-datee;
            alert("betweentDate = "+betweentDate);
            for(var i=1;i<=datee;i++){
                alert(i);
                $("#tableRows tr").append('<th width="129" scope="col"  style="text-align: center;">'+i+'</th>'); 
            } 
             if(sectionId == undefined)
                {
                sectionId = "null";
                }
             if(studid == "")
            {
                studid = "null";
            } 
                fetch_atten(sectionId,studid);          
                });
    }); 
```

> 我从 VO 文件中获取这个值：

```
<% if (session.getAttribute("resultVO") != null){
     AttendanceResultVO resultVO= (AttendanceResultVO)session.getAttribute("resultVO");
         } 
%> 
```

**> 我的火灾错误错误是：

> ```
> SyntaxError: missing ] after element list
> [Break On This Error]     
> 
> var namem =[com.sfmfm.vo.StudentDetailsVO@487c5f]
> 
> myschool.jsp (line 53, col 43)** 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:25:04.080

如果您查看第 43 列，则您位于“@”处。利用

```
var namem = ['com.sfmfm.vo.StudentDetailsVO@487c5f']; 
```

虽然文本是一个无法使用的 toString，但我担心不再可以映射到对象本身。

为了缩小，删除不必要的空格/换行符，我会留下分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:37:23.327

我会建议你这样做

```
 var datee = <%=resultVO.monthEndDate}%>;
        var reqD = <%=resultVO.reqdEndDate%>
        var namem =<%=resultVO.studentList%> 
```

而不是这样

```
 var datee = ${resultVO.monthEndDate}
        var reqD = ${resultVO.reqdEndDate}
        //I need to assign object here 
        var namem =${resultVO.studentList} 
```

# ios - 通过 SMS 收到的重复消息

> ID：14875788
> 
> 赞同：1
> 
> 时间：2013-02-14T13:19:24.653
> 
> 标签：ios, sms, duplicates

我正在测试从我的应用程序（使用`MFMessageComposeViewController`）对消息应用程序的调用，当我选择自己作为收件人时，我注意到我收到了 4 次消息。

起初我以为我做错了什么，但在进一步测试 Messages 应用程序后，它似乎在发送给我自己时总是发送重复（随机 2 到 4 次）。

我试过研究这个问题，但我不断得到太多不相关的结果。这是一个已知问题`iOS`吗？我可以看出它可能与`iMessage`. 这是非常奇怪的行为，尤其是它的回复数量并不总是一致的。

无论如何，这是我应该担心我的应用程序的事情吗？似乎超出了我的范围，因为 Messages 正在处理它，我怀疑我的用户会自己发短信。

我正在使用的代码：

```
if(message.length > 160) {
    message = [message substringToIndex:157];
    message = [message stringByAppendingString:@"..."];
}

MFMessageComposeViewController *messageVC = [[MFMessageComposeViewController alloc] init];
[messageVC setMessageComposeDelegate:self];
[messageVC setBody:message];
[self presentViewController:messageVC animated:YES completion:nil]; 
```

# python - 日期和时间字符串解析

> ID：14875790
> 
> 赞同：1
> 
> 时间：2013-02-14T13:19:30.517
> 
> 标签：python

我有一个格式如下的日期时间字符串：

**2012-12-03T02:00:00Z**

我想拆分日期和时间并显示如下：03/12/2012 02:00:00

我怎样才能在 python 中以尽可能少的行做到这一点？（“T”和“Z”将被删除）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:24:33.447

这将通过`datetime`库，如果输入字符串的格式不正确或包含无效的日期时间信息（包括闰年！），则会引发异常。

```
from datetime import datetime
datetime.strptime("2012-12-03T02:00:00Z", "%Y-%m-%dT%H:%M:%SZ").strftime("%d/%m/%Y %H:%M:%S") 
```

# java - JPA + Hibernate：如何定义具有 ON DELETE CASCADE 的约束

> ID：14875793
> 
> 赞同：14
> 
> 时间：2013-02-14T13:19:42.530
> 
> 标签：java, mysql, hibernate, jpa, cascade

我只是想知道是否有这样一种方法可以构建我的 MySQL 表

```
ALTER TABLE `USERINFO`
  ADD CONSTRAINT `FK_USER_ID` FOREIGN KEY (`USERID`) REFERENCES `USERACCOUNT` (`USERID`) 
    ON DELETE CASCADE 
    ON UPDATE CASCADE; 
```

`<property name="hibernate.hbm2ddl.auto" value="create" />`但是，只有当 hibernate ++ jpa 开始构建具有“ ”的表时，我才在我的 DDL 中得到了这个

```
ALTER TABLE `USERINFO` ADD CONSTRAINT `FK_USER_ID` FOREIGN KEY (`USERID`) REFERENCES `USERACCOUNT` (`USERID`); 
```

在我的课堂上，我有这些注释设置，

```
// UserAcc.java
@Entity
@Table(name = "USERACC")
public class UserAcc implements Serializable {

private static final long serialVersionUID = -5527566248002296042L;

@Id
@Column(name = "USERID")
@GeneratedValue(strategy=GenerationType.AUTO)
private Integer userId;

@OneToOne(mappedBy = "userAcc")
private UserInfo userInfo;
....

public UserInfo getUserInfo() {
    return userInfo;
}
public void setUserInfo(UserInfo userInfo) {
    this.userInfo = userInfo;
}
... 
```

和，

```
// UserInfo.java
@Entity
@Table(name = "USERINFO")
public class UserInfo implements Serializable {

private static final long serialVersionUID = 5924361831551833717L;

@Id
@Column(name = "USERINFO_ID", nullable=false)
@GeneratedValue(strategy=GenerationType.AUTO)
private Integer userInfoId;

@OneToOne(cascade = {CascadeType.ALL})
@JoinColumn(name="USERID", nullable=false)
@ForeignKey(name = "FK_USER_ID")
private UserAcc userAcc;

public Integer getUserInfoId() {
    return userInfoId;
}

public void setUserInfoId(Integer userInfoId) {
    this.userInfoId = userInfoId;
}
... 
```

请注意，UserAccount 表是这里的父/主表，而 UserInfo 是规范化到另一个实体的扩展表。任何答案将不胜感激。我只是好奇它是如何完成的，因为我也喜欢在 MySQL 中工作。我真的习惯于从父表（USERACOUNT）中删除一条记录，这也将允许我根据父/主表中的特定记录级联删除到子记录。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T18:50:19.327

JPA 确实提供了将操作（合并、持久化、刷新、删除）[级联到关联实体的可能性。](http://docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html)逻辑在 JPA 中，不使用数据库级联。

```
@OneToMany(cascade=CascadeType.REMOVE) 
```

没有符合 JPA 标准的方式来使用数据库级联进行级联。如果喜欢这样的级联，我们必须回退到 Hibernate 特定的构造：[@OnDelete](http://docs.jboss.org/hibernate/core/3.6/javadocs/)。它`@OneToMany`至少适用于，但过去曾经存在一些问题`@OneToOne`和`@OnDelete`。

```
@OnDelete(action = OnDeleteAction.CASCADE) 
```

请注意，将此注释添加到现有约束不会更新它。您可能必须先手动删除它才能正确更新架构。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-31T01:26:23.457

在 JPA 中没有明确的方法可以做到这一点。以下将为您提供所需的内容...您可以使用`CascadeType.DELETE`，但是此注释仅适用于 中的对象`EntityManager`，而不适用于数据库。您要确保将`ON DELETE CASCADE`其添加到数据库约束中。要进行验证，您可以配置 JPA 以生成 ddl 文件。查看`ddl`文件，您会注意到它`ON DELETE CASCADE`不是约束的一部分。添加`ON DELETE CASCADE`到`ddl`文件中的实际 SQL，然后从 ddl 更新您的数据库架构。这将解决您的问题。

此[链接](http://dev.mysql.com/doc/refman/5.6/en/create-table-foreign-keys.html)显示如何在 MySQL中使用`ON DELETE CASCADE`on 。`CONSTRAINT`您在约束上执行此操作。您也可以在`CREATE TABLE`or`ALTER TABLE`语句中执行此操作。JPA 很可能在`ALTER TABLE`语句中创建了约束。只需添加`ON DELETE CASCADE`到该声明。

请注意，一些 JPA 实现者确实为此功能提供了一种方法。

最后，Hibernate 确实使用`OnDelete(action = OnDeleteAction.CASCADE)`注解提供了这个功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-21T13:32:01.650

`org.hibernate.annotations@OnDelete(action = OnDeleteAction.CASCADE)`您可以在以下位置使用 Hibernate 注释`UserAcc.userInfo`：

```
public class UserAcc implements Serializable {

...

@OneToOne(mappedBy = "userAcc")
@OnDelete(action = OnDeleteAction.CASCADE)
private UserInfo userInfo;

... 
```

这将在表中`ON DELETE CASCADE`的外键上生成 DDL 。`UserInfo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T01:25:04.403

您可以使用@JoinColumn( `foreignKey = @ForeignKey(...)`) 手动定义约束，如下所示：-

```
// UserInfo.java
@Entity
@Table(name = "USERINFO")
public class UserInfo implements Serializable {

private static final long serialVersionUID = 5924361831551833717L;

@Id
@Column(name = "USERINFO_ID", nullable=false)
@GeneratedValue(strategy=GenerationType.AUTO)
private Integer userInfoId;

@OneToOne(cascade = {CascadeType.ALL})
@JoinColumn(
        name="USERID", 
        nullable=false,
        foreignKey = @ForeignKey(
                name="FK_USER_ID",
                foreignKeyDefinition = "FOREIGN KEY (USERID) REFERENCES USERACCOUNT(USERID) ON UPDATE CASCADE ON DELETE CASCADE"
        )
)
private UserAcc userAcc;

public Integer getUserInfoId() {
    return userInfoId;
}

public void setUserInfoId(Integer userInfoId) {
    this.userInfoId = userInfoId;
}
... 
```

这将在生成 DDL 期间添加约束。

生成过程完成后，你可以查看`USERINFO`表的DDL，你会发现约束已经添加了级联动作，如下所示：-

```
create table USERINFO(
    ....,
    ....,
    ....,
    ....,
    constraint FK_USER_ID foreign key (USERID) references USERACCOUNT(USERID) on update cascade on delete cascade
); 
```

# jquery - jQuery reusable function

> ID：14875799
> 
> 赞同：0
> 
> 时间：2013-02-14T13:20:02.930
> 
> 标签：jquery

The following function works well. I would like, however, to reuse the same function by passing new parameters. What is the best way of doing that?

```
function overlay_f (clickable_link, current_link, overlay_content, overlay) {
    var clickable_link = $('.p_wrapper p'),
        overlay = $('#overlay'),
        close_overlay = $('.close_overlay');

    clickable_link.click(function (evt) {
        evt.preventDefault();

        current_link = $(this).attr('class');
        var overlay_content = $('#'+current_link);

        overlay.children().fadeOut(200).promise().done(function () {
            overlay_content.fadeIn();
        });

        overlay.fadeIn();
    });

    overlay.click(function () {
        overlay.fadeOut();
        overlay.children().fadeOut(500);
    });
}    

overlay_f(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:27:41.553

I think you might be looking for something like this:

```
function overlay_f(cl, o, co) {
    var clickable_link = $(cl),
    overlay = $(o),
    close_overlay = $(co);

    clickable_link.click(function(evt){
        evt.preventDefault();

        current_link = $(this).attr('class');
        var overlay_content = $('#'+current_link);

        overlay.children().fadeOut(200).promise().done(function () {
            overlay_content.fadeIn();
        });
        overlay.fadeIn();
    });

    overlay.click(function(){
        overlay.fadeOut();
        overlay.children().fadeOut(500);
    });
}   

overlay_f('.p_wrapper p', '#overlay', '.close_overlay'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:24:34.067

Where you're currently just declaring variables with the same names as the parameters (which you never pass arguments to when you call the function), instead check if a value has already been passed, and only initialise to the "default" values if they haven't.

```
function overlay_f(clickable_link, current_link, overlay_content, overlay) {
    var clickable_link = clickable_link || $('.p_wrapper p'),
        overlay = overlay || $('#overlay'),
        close_overlay = $('.close_overlay');

    clickable_link.click(function (evt) {
        evt.preventDefault();

        var current_link = current_link || $(this).attr('class'),
            overlay_content = overlay_content || $('#' + current_link);

        overlay.children().fadeOut(200).promise().done(function () {
            overlay_content.fadeIn();
        });
        overlay.fadeIn();
    });

    overlay.click(function () {
        overlay.fadeOut();
        overlay.children().fadeOut(500);
    });
} 
```

Then you either call it with no arguments:

```
overlay_f(); 
```

or pass arguments that are what you want to use inside:

```
overlay_f(arg1, arg2, arg3, arg4); 
```

# java - 如何在不使用 url 参数的情况下将参数传递到新选项卡

> ID：14875802
> 
> 赞同：0
> 
> 时间：2013-02-14T13:20:11.367
> 
> 标签：java, html, url, get, postmessage

我有一个类似的网站`www.mysite.com`，并且有一个如下所示的链接：

```
<a href="http://www.someOtherSite.com/myFeature" target="_blank">My link</a> 
```

我想将大量参数传递给新的 url，我尝试添加 url 参数，但它看起来不对。

**我的问题是 - 如何在不使用 url 参数的情况下传递参数（这是跨域）**

我必须使用它`window.open()`然后我才能使用`postMessage`吗？`postMessage`我需要它在新标签而不是新窗口中打开，所以据我所知我无法使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:21:55.787

为此使用 URL 参数没有任何问题。如果您要打开不同的域，这是您唯一的选择。URL 可以存储大约 2000 个字符。查看此处了解更多详细信息：[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

如果您需要传递更多字符，则需要查看替代选项，也许“someOtherDomain”可以对 mysite.com 或类似的东西进行 AJAX 调用。

如果您打开的链接在同一个域上，那么： 您唯一的其他选择是使用 cookie 或会话来存储参数。

如果您将参数保存在 cookie 中，cookie 将被发送到服务器，并在新选项卡中加载请求

# algorithm - 匹配数字的算法（一对多）

> ID：14875806
> 
> 赞同：3
> 
> 时间：2013-02-14T13:20:28.440
> 
> 标签：algorithm, match, financial

这是我在 stackoverflow 上的第一篇文章。

我需要为金融应用程序提供算法建议。假设我们有 2 个这样的数字列表（是的，它们是银行交易）：

```
List 1          | List 2
-------------------------------------
1000            | 200
7000            | 300
3000            | 10000
16000           | 500
                | 16000
                | 4100 
```

考虑到一些条件，我需要将数字相互匹配：

1.  匹配可以是一对一的、一对多的，甚至是多对多的。所以，这里两个 16000 匹配（一对一），列表 1 中的 1000 匹配列表 2 中的 200+300+500（一对三），列表 2 中的 10000 匹配列表 1 中的 7000+3000（一- to-two)，依此类推。

2.  一个人物可以在不止一场比赛中使用。

3.  两个列表中的数字数量可能相等，也可能不相等。

4.  一对多匹配中的最大图形数应该是可设置的。

5.  多对多匹配不是必须的。但如果我们也有它们那就太好了！

6.  有些数字可能无法匹配。没关系。

我正在做的是使用两个复杂的嵌套循环。它有效，但随着数字数量或每场比赛中允许的最大数字数量的增加，需要很长时间才能完成！

有没有更好的算法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:33:13.753

我认为我的断言是正确的，如果我错了，那么我会踢你的计算的*内核*是 NP 难的，这意味着你（非常）不太可能找到多项式时间的解决方案. 您的*内核*是，给定一个数字（例如`10000`）和一个其他数字的列表，找到列表中总和为单个数字的所有子集。

这个核是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的一种变体。

鉴于此，您可以找到更好的算法是有限制的，并且您对找到“快速”算法的期望可能会令人失望。

为了使您的算法更快，我建议您首先对两个列表进行排序。从列表 1 中取出第一个数字，从列表 2 中取出小于或等于列表 1 中的数字的所有数字，找出匹配项，重复...然后按数字向下处理列表 2 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:16:56.047

为此，您首先生成每个列表的组合。例如，对于列表 1，组合是：

1000
3000
7000
16000
1000
1000 1000 1000 1000 1000
1000 16000
3000 7000
3000 3000 16000
7000 16000
1000 1000 3000
1000 1000 1000 1000 16000
1000 1000 16000 16000
3000 7000 16000
1000 1000 1000 1000 7000 16000 16000

对于每个组合，您生成组合中项目的总和。现在你有两个总和列表。为了解决这个问题，你将两个列表相交。有多种算法可以执行交叉路口。一种简单的方法是将两个列表中较小的一个变成二叉树。然后，对于较大列表中的每个项目，您可以在二叉树中找到它。该算法具有 n*log(n) 时间复杂度。

# c# - 在这种情况下，在 Rx 和 .Net 之间应该使用什么来进行事件组合？

> ID：14875812
> 
> 赞同：1
> 
> 时间：2013-02-14T13:20:56.770
> 
> 标签：c#, c#-4.0, system.reactive, reactive-programming

当我学习 Rx（反应式扩展）时，我想知道给定的 2 段代码之间的区别：

**代码 1**

```
static void Main(string[] args)
{
FileSystemWatcher watcher = new FileSystemWatcher(@"C:\Logs", "*.*");
            watcher.EnableRaisingEvents = true;

            var source = Observable.FromEvent<FileSystemEventHandler, FileSystemEventArgs>(handler =>
                {
                    FileSystemEventHandler fsHandler = (sender, e) =>
                        {
                            handler(e);
                        };
                    return fsHandler;
                },

                fsHandler => watcher.Created += fsHandler,

                fsHandler => watcher.Created -= fsHandler
                    );

            source.Subscribe(x => Console.WriteLine(x.Name + "is created"));

            Console.Read();
} 
```

**代码 2**

```
static void Main(string[] args)
        {

            FileSystemWatcher watcher = new FileSystemWatcher(@"C:\Logs", "*.*");
            watcher.EnableRaisingEvents = true;

            watcher.Created += watcher_Created;

            Console.Read();
        }

        static void watcher_Created(object sender, FileSystemEventArgs e)
        {
            Console.WriteLine(e.Name.ToString());
        } 
```

上述 2 段代码产生相同的结果有什么不同？

即使我浏览了核心部分，发现这两个代码行都在单独的线程上执行，那么它们之间有什么区别，为什么我在这种情况下使用 Rx？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:41:40.217

在这个具体的例子中，使用 Rx 有两个潜在的好处（强调**潜力**）：

*   一种“取消连接”事件处理程序的便捷方法：调用`Dispose`订阅（调用返回的东西`Subscribe`）将具有与`watcher.Created -= handler`

*   一种将来自此来源的事件与其他（和，就此而言）来源*组合的方法。*例如，如果您的用例是“我需要知道何时创建文件，然后写入了 3 次，等等”，您可以从 上公开的各种事件创建多个“观察者” ，然后创建一个查询只有在正确的条件发生时才会触发`IObservable``IEnumerable``IObservable``FileSystemWatcher`

在伪 LINQ 中：

```
var createEvents = <get created event handler>;
var changeEvents = <get changed event handler>;
var createThenChangeThenChangeThenChange = 
    from create in createEvents
    where create.Name == "some file I care about"
    from firstChange in changeEvents
    from secondChange in changeEvents
    from thirdChange in changeEvents
    select new { create, firstChange, secondChange, thirdChange}; 
```

# svn - SVN：svn 更新 PHP 后的电子邮件通知

> ID：14875817
> 
> 赞同：0
> 
> 时间：2013-02-14T13:21:12.480
> 
> 标签：svn, notifications

`svn update`收到此消息后：

“*您在 /var/spool/mail/root 中有新邮件*”

如何删除此消息或停止此通知？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:29:59.653

你有一个提交后挂钩，听起来像。

在 subversion 发行版中有几个发送电子邮件的钩子脚本。在目录中查找

工具/钩子脚本和

贡献/钩子脚本

并根据您的需要修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:24:52.447

SVN 不应该发送邮件。该消息与您的最后一个命令无关 - 只是 bash 每次在发出命令提示符之前都会检查您的 UNIX 邮箱。

更新：

您可以`bash`修改配置以删除一个 revevant 自动命令，但您不应该这样做 - 否则您的 UNIX 邮箱将逐渐变得杂乱无章，并且/或者您可能会错过重要的自动通知。

相反，运行`mail`命令来查看您收到的内容并禁用发件人（通常是）或通过取消注释和编辑最后一行并在此之后运行`logwatch`将您的 UNIX 邮件重定向到外部电子邮件地址。`/etc/aliases``newaliases`

# c++ - g++ 4.7.2 和 Intel 13.0.1 与 clang++ 3.2 和 g++ 4.8 中的编译器差异

> ID：14875824
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:21:32.803
> 
> 标签：c++, compiler-construction, g++, clang, intel

**根据官方 C++ 标准**，有人可以解释为什么以下简单代码在使用不同的编译器运行时会出现不同的输出吗？

换句话说，标准是否对首先发生的事情保持开放，a++ 或 b 赋值？

这与函数参数无关，它是在**不同编译器上运行的****同一段**代码。这是示例代码：

 **```
#include <iostream>
using namespace std;

int main() {
    int a = 10, b;

    a = b = a+++a;
    cout << "a = " << a << ", b = " << b;

return 0;
} 
```

代码链接在[这里](http://liveworkspace.org/code/2UPk0g%240)。

使用**g++ 4.7.2**和**Intel C++ 13.0.1**，您可以获得：

```
stdout:
a = 21, b = 20 
```

而使用**g++ 4.8.0**和**Clang++ 3.2**你会得到：

```
stdout:
a = 21, b = 21 
```

哪一个是正确的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:27:10.897

所有的编译器都是正确的。

在行

```
a = b = a+++a; 
```

您调用[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，因为`a`在没有中间[序列点](http://en.wikipedia.org/wiki/Sequence_point)的情况下被修改了两次。如果你这样做，C++ 标准会授予编译器许可来做他们喜欢的任何事情。**

# java - 使用java在应用引擎中追加一个blob

> ID：14875833
> 
> 赞同：-2
> 
> 时间：2013-02-14T13:22:14.270
> 
> 标签：java, google-app-engine, blob

是否可以在应用引擎中关闭 blob 之前将两个文件发送到单个 blob？我们可以附加 blob 内容吗？我读到 blob 需要最终确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:07:05.040

是的，blob 是只写的，您可以将数据附加到它们（即使在单独的请求中），直到您调用 finalize。然后它们变成只读的。

# php - 变量在函数中的变量？

> ID：14875843
> 
> 赞同：0
> 
> 时间：2013-02-14T13:22:55.940
> 
> 标签：php

我需要帮助：

```
$foo = array ('Projects', 'Clients'); 
```

我需要从预装的库中运行函数

```
$bar->getProjects()->data
$bar->getClients()->data 
```

等等等等

但我在循环中有它。所以我想要类似的东西

```
foreach($foo as $value)
  $return_value = $bar->get  >>>>$value<<<<  ()->data 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:25:55.070

请参阅[如何从存储在变量中的字符串调用 PHP 函数](https://stackoverflow.com/questions/1005857/how-to-call-php-function-from-string-stored-in-a-variable)：

```
foreach ($foo as $value) {
  $method = 'get' . $value;
  $return_value = $bar->$method()->data
} 
```

或者

```
foreach ($foo as $value)
  $return_value = $bar->{'get' . $value}()->data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:28:49.353

我会使用反射，一个有据可查的，没有神奇的 API：

```
<?php

$foo = array ('Projects', 'Clients');
$bar = new MyAwesomeClass();

var_dump(invokeMultipleGetters($bar, $foo));

// could also make this a method on MyAwesomeClass...
function invokeMultipleGetters($object, $propertyNames)
{
    $results = array();
    $reflector = new ReflectionClass($object);

    foreach($propertyNames as $propertyName)
    {
        $method = $reflector->getMethod('get'.$propertyName);
        $result = $method->invoke($bar);
        array_push($results, $result)
    }

    return $results;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:28:18.133

有一个神奇的方法：[__call](http://php.net/__call)

```
function __call($method, $params) {

     $var = substr($method, 3);

     if (strncasecmp($method, "get", 3)) {
         return $this->$var;
     }
     if (strncasecmp($method, "set", 3)) {
         $this->$var = $params[0];
     }
} 
```

你也可以看看[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)

# vb.net - 在 4 张纸上打印 4 个网格

> ID：14875845
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:23:02.653
> 
> 标签：vb.net, silverlight, silverlight-5.0, vb.net-2010

使用 Silverlight 5 和 VB.Net，我尝试将 LayoutRoot 中的 4 个网格打印到 4 张单独的纸上，如下所示，但我只打印了最后一个网格。我明白为什么会这样，但我应该怎么做呢？我将网格缩放到其原始大小的 75%，因为这使它们可以横向放置在纵向的纸张上。

谢谢。

```
Imports System.Windows.Printing

Partial Public Class MainPage
    Inherits UserControl
    Public WithEvents pd As New PrintDocument

    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub Button1_Click(sender As Object, ByVal e As RoutedEventArgs) Handles Button1.Click
        pd.Print("My Test Print")
        Call ScaleUp()
    End Sub

    Private Sub pd_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs) Handles pd.PrintPage
        Dim ScaleDown As New ScaleTransform
        ScaleDown.ScaleX = "0.75"
        ScaleDown.ScaleY = "0.75"
        CompChartGrid.RenderTransform = ScaleDown
        AttChartGrid.RenderTransform = ScaleDown
        CompDetGrid.RenderTransform = ScaleDown
        AttDetGrid.RenderTransform = ScaleDown
        e.PageVisual = CompChartGrid
        e.HasMorePages = True
        e.PageVisual = AttChartGrid
        e.HasMorePages = True
        e.PageVisual = CompDetGrid
        e.HasMorePages = True
        e.PageVisual = AttDetGrid
        e.HasMorePages = False
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:38:52.043

You are nearly there. The trick is that the pd_PrintPage method will be called for each page to be printed. In your case, only the last page is printed because you are overwriting your intended visuals.

Try something like this instead:

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var doc = new PrintDocument();

    var pages = new Stack<UIElement>();
    pages.Push(AttDetGrid);
    pages.Push(CompDetGrid);
    pages.Push(AttChartGrid);
    pages.Push(CompChartGrid);

    doc.PrintPage += (x, y) =>
        {
            if (pages.Count > 0)
            {
                y.PageVisual = pages.Pop();
                y.HasMorePages = pages.Count > 0;
            }
        };

    doc.Print("My Printed document name");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T13:25:17.920

好的，我最后是这样做的：

```
Private Sub pd_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs) Handles pd.PrintPage

        Static Counter As Integer = 1
        If Counter = 1 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid1)
            PrintSurface.Children.Add(Grid1)
            e.PageVisual = PrintSurface
            Counter += 1
            e.HasMorePages = True
            Exit Sub
        End If
        If Counter = 2 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid2)
            PrintSurface.Children.Add(Grid2)
            e.PageVisual = PrintSurface
            Counter += 1
            e.HasMorePages = True
            Exit Sub
        End If
        If Counter = 3 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid3)
            PrintSurface.Children.Add(Grid3)
            e.PageVisual = PrintSurface
            Counter += 1
            e.HasMorePages = True
            Exit Sub
        End If
        If Counter = 4 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid4)
            PrintSurface.Children.Add(Grid4)
            e.PageVisual = PrintSurface
            Counter += 1
            e.HasMorePages = True
            Exit Sub
        End If

        If Counter = 5 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid5)
            PrintSurface.Children.Add(Grid5)
            e.PageVisual = PrintSurface
            Counter += 1
            e.HasMorePages = True
            Exit Sub
        End If
        If Counter = 6 Then
            Dim PrintSurface As New Canvas
            LayoutRoot.Children.Remove(Grid6)
            PrintSurface.Children.Add(Grid6)
            e.PageVisual = PrintSurface
            e.HasMorePages = False
            Exit Sub
        End If

    End Sub 
```

# html - 在固定大小的 div 的中心显示不同尺寸的图像

> ID：14875847
> 
> 赞同：0
> 
> 时间：2013-02-14T13:23:07.337
> 
> 标签：html, css

我正在从不同的网站获取新闻并希望将它们显示为[示例](http://jsfiddle.net/r55Er/1/)

[http://jsfiddle.net/r55Er/1/](http://jsfiddle.net/r55Er/1/)

问题在于图像，与文章关联的图像具有不同的维度。

我有一个 80x80 像素的图像容器“div”，我想在中心垂直和水平显示图像

我想以最好的方式显示图像...

我会很感激这方面的帮助，或者我如何在不损害设计的情况下以最好的方式展示图像。

```
<div class="news-wrapper">
    <div class="news-image"><img class="img" src="http://gulfnews.com/media/img/gulfnews_logo.png"/></div>
     <div class="news-title"> News Title 1</div>
     <div class="news-source"> Source 1</div>
     <div class="news-description"> Some Descriptionn</div>
</div>
<div class="news-wrapper">
    <div class="news-image"><img class="img" src="http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/intl/hdr-globe-central.gif"/></div>
     <div class="news-title"> News Title 1</div>
     <div class="news-source"> Source 1</div>
     <div class="news-description"> Some Descriptionn</div>
</div>
<div class="news-wrapper">
    <div class="news-image"><img class="img" src="http://news.bbcimg.co.uk/media/images/65881000/jpg/_65881249_65881241.jpg"/></div>
     <div class="news-title"> News Title 1</div>
     <div class="news-source"> Source 1</div>
     <div class="news-description"> Some Descriptionn</div>
</div>
<div class="news-wrapper">
    <div class="news-image"><img class="img" src="http://www.zawya.com/images/cia/large/130213070447ptjw.jpg"/></div>
     <div class="news-title"> News Title 1</div>
     <div class="news-source"> Source 1</div>
     <div class="news-description"> Some Descriptionn</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:32:33.953

如果您的图像相对约为 80 x 80 像素，只需应用它们具有您的单元格的背景。这样，它将始终居中..永远不会溢出..等等。

```
<div class="news-wrapper">
    <div class="news-image" style="background-image:url('http://www.zawya.com/images/cia/large/130213070447ptjw.jpg';"></div>
     <div class="news-title"> News Title 1</div>
     <div class="news-source"> Source 1</div>
     <div class="news-description"> Some Descriptionn</div>
</div>

.news-image {
    width:80px;
    height:80px;
    background-attachment:scroll;
    background-color:transparent;
    background-position:50% 50%;
    background-repeat:no-repeat
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:45:32.447

你需要`position:absolute`你的图像和`position:relative`你的`news-wrapper`，然后给`top:0;bottom:0;margin:auto`你的图像。我编辑了你的小提琴，你可以在这里查看[jsFiddle](http://jsfiddle.net/r55Er/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T14:10:54.510

要在中间垂直对齐图像，请尝试将 line-height 设置为等于容器的高度，并为图像设置 dispaly inline-block 与“vertical-align middle”。要水平对齐，只需为图像容器设置“文本对齐中心”。

```
.image-container {
     text-align: center;
     line-height: 80px; /* equals to container height */
}
img {
    display: inline-block;
    vertical-align: middle;
} 
```

[这是 jsfiddle 中的修改示例](http://jsfiddle.net/r55Er/4/)

# tsql - 顺序参考编号

> ID：14875849
> 
> 赞同：0
> 
> 时间：2013-02-14T13:23:14.537
> 
> 标签：tsql, sequential

我有一个表，目前只有两列，因为我正在学习，第一列是 Book_skey，这是系统使用 IDENTITY 函数自动生成的，但是我想在第二列中创建一个名为 BookRef 的自动字段其中第一行将是 B00000001 下一行将是 B00000002 等。

```
USE Occupancy

DECLARE @BookNumber INT
SET @BookNumber = 1
WHILE @BookNumber <= 5000

BEGIN
INSERT INTO Book(BookNumber)
SELECT @BookNumber
SET @BookNumber = @BookNumber + 1

END 
```

这可以做到吗？

谢谢

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:24:53.697

您只需要使用计算列。

```
CREATE TABLE Book (
    Book_skey       int IDENTITY(1,1)
   ,BookRef         as ('B' + RIGHT(CONVERT(CHAR(9), (100000000 + BookNumber)),8))
   ,BookNumber      int
)

SET NOCOUNT ON

DECLARE @BookNumber INT
SET @BookNumber = 1
WHILE @BookNumber <= 5000
  BEGIN
    INSERT INTO Book(BookNumber)
    SELECT @BookNumber

    SET @BookNumber = @BookNumber + 1
END

SELECT * FROM Book 
```

# ruby-on-rails - 最佳黑白工厂女孩，机械师和制造

> ID：14875853
> 
> 赞同：2
> 
> 时间：2013-02-14T13:23:33.507
> 
> 标签：ruby-on-rails, ruby, rspec

测试一个大型应用程序，最好是黑白工厂女孩、机械师或制造。由于 Factory Girl 制作真实对象，因此它会访问数据库并使测试变慢，而我想快速运行测试？

机械师和制造是工厂女孩的好选择吗？并且还想运行模型的所有回调，例如“after_save”等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:01:31.643

FactoryGirl 的方法不会命中数据库，例如：

```
FactoryGirl.build(:object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:04:39.587

我认为这个答案应该与性能无关，而是与便利有关。我曾经使用过 Facticator 和 FactoryGirl，我打赌 FactoryGirl 更方便，并且允许做一些其他制造商不提供的事情（例如特征、自动构建关联等）。FactoryGirl 还有一个更大的社区。所以我的回答是 FactoryGirl 是最好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:37:11.233

利用：

```
FactoryGirl.build(:object) 
```

..并使用`after_build`回调。您也可以构建关联的对象。但是，在您保存对象之前，它们不会有 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:17:47.400

在制造中，您有一个 Fabricate.attributes_for(:model) 执行一种*.build*但如果您有嵌套模型，并且您制造它们，您将*构建*主要对象，但已创建嵌套....

但是...如果您不保存所有数据，您如何真正测试您的应用程序？...

如果你想直接创建，可以做*Fabricate(:model)*

祝你好运^^

# sql - SQL 在 SP 中选择 maxDate

> ID：14875854
> 
> 赞同：2
> 
> 时间：2013-02-14T13:23:36.003
> 
> 标签：sql, sql-server, sql-server-2008

```
USE [MyDatabase]
GO
Object:  StoredProcedure [dbo].[SP_MyProcedure]    
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[SP_MyProcedure] 
-- Add the parameters for the stored procedure here
@StartDate  NVARCHAR(19),
@EndDate    NVARCHAR(19)
AS
BEGIN

SET NOCOUNT ON;

 Insert statements for procedure here
DECLARE @FirstQuery nvarchar(1500);
DECLARE @SecondQuery nvarchar(1500);
DECLARE @TSQL nvarchar(4000);

SET @FirstQuery =
    '
    SELECT * FROM OPENQUERY(LinkedServer,
    ''
    SELECT * FROM Server.Table
    WHERE Name IN 
    (SELECT Tagname COLLATE DATABASE_DEFAULT FROM LocalServer.MyServer.dbo."NameList"
    WHERE LOCATION = ''''X'''' AND SOURCE = ''''Y'''') AND TIMESTAMP >= ''''' + @StartDate + ''''' AND TIMESTAMP < ''''' + @EndDate + ''''''')'; 
```

我的问题是：如何在代码中包含 max(date)，以便将 @startDate 与数据库中列的最新可用日期进行比较，而不是今天的日期。您看到的代码工作正常，但是当我选择比数据库中最后一个现有日期更晚的日期时，查询会运行一段时间，然后返回未找到任何列的错误。

提前感谢您的任何建议。

帮助。以下部分代码不起作用，但我不知道为什么。有没有人有什么建议？谢谢

```
 -- Insert statements for procedure here
DECLARE @FirstQuery nvarchar(1500);
DECLARE @SecondQuery nvarchar(1500);
DECLARE @TSQL nvarchar(4000);
DECLARE @MaxTimeStamp nvarchar(19);

SET@MaxTimeStamp =
'SELECT MAX(TimeStamp) From OPENQUERY(LinkedServer)'

IF @StartDate <= @MaxTimeStamp
BEGIN

SET @FirstQuery =
    '
    SELECT * FROM OPENQUERY(LinkedServer,
    ''
    SELECT * FROM Server.Table
    WHERE Name IN 
    (SELECT Tagname COLLATE DATABASE_DEFAULT FROM LocalServer.MyServer.dbo."NameList"
    WHERE LOCATION = ''''X'''' AND SOURCE = ''''Y'''') AND TIMESTAMP >= ''''' + @StartDate + ''''' AND TIMESTAMP < ''''' + @EndDate + ''''''')';

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:30:28.930

好吧，您可以将其替换为子查询：

```
(select max(timestamp) from NameList) 
```

如果这是一个存储过程，您可能希望将其放入一个变量中，例如：

```
declare @MaxTimestamp datetime;
select @MaxTimestamp = max(TimeStamp) from NameList

-- in your query, something like
      coalesce(@StartTime, maxTimeStamp) 
```

如果性能是一个问题，请尝试在`NameList(Location, Source, Timestamp)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:34:00.950

尝试这个...

```
DECLARE @maxDate datetime;
SELECT @maxDate = MAX(timestamp) FROM OPENQUERY(...);

IF @StartDate <= @maxDate
BEGIN
  --Your original query here
END 
```

# asp.net - Asp.net Web API：HttpClient 下载大文件中断

> ID：14875856
> 
> 赞同：1
> 
> 时间：2013-02-14T13:23:43.170
> 
> 标签：asp.net, web-services, asp.net-web-api

我有一个 Web 服务（用 Asp.net Web API 制作），它返回一个大小约为 10MB 的 xml 文件。

该服务已经过 Fiddler 测试，并且正在运行

我正在尝试使用 HttpClient 类下载文件。问题是编译器永远不会超出`await client.GetAsync()`方法，即使 API 项目返回`HttpResponseMessage`.

这是我的功能

```
public async Task<XDocument> DownloadXmlAsync(string xmlFileName)
{
    using (HttpClient client = new HttpClient())
    {
        client.BaseAddress = new Uri("http://localhost:51734/");
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/xml"));

        // When the copiler enters this next command, it doesn't get outside anymore
        HttpResponseMessage response = await client.GetAsync("api/applications/ApplicationXml?fileName=" + xmlFileName);
        response.EnsureSuccessStatusCode();

        string stringResponse = await response.Content.ReadAsStringAsync();

        XDocument xDoc = new XDocument(stringResponse);

        return xDoc;
    }
} 
```

我还更新了 web.config 中的 maxRequestLength

```
<httpRuntime maxRequestLength="15360" /> 
```

我做错了什么？

**编辑**

调用函数

```
public async Task<ActionResult> Index()
{
   var xmlTask = DownloadXmlAsync("1.xml");

   // doesn't reach here
   var result = xmlTask.Result;

   return View();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:55:54.463

您通过调用`Result`. 相反，您应该`await`执行以下任务：

```
public async Task<ActionResult> Index()
{
   var xmlTask = DownloadXmlAsync("1.xml");

   // doesn't reach here
   var result = await xmlTask;

   return View();
} 
```

[我在我的博客上完整地解释了这个僵局，](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)但总体思路是这样的：

*   ASP.NET 一次只允许一个线程处理一个请求。
*   当你`await`a`Task`时，编译器将捕获一个“上下文”并在完成时使用它来恢复方法`Task`。对于 ASP.NET，这个“上下文”是一个请求上下文。
*   因此，当`DownloadXmlAsync`（异步）等待`GetAsync`完成时，它会返回一个不完整的任务到`Index`.
*   `Index`同步阻止该任务。这意味着请求线程被阻塞，直到该任务完成。
*   收到文件后，`GetAsync`完成。但是，`DownloadXmlAsync`无法继续，因为它正在尝试恢复该“上下文”，并且“上下文”中已经有一个线程：在任务中阻塞的那个。
*   因此，陷入僵局。

# sql - SQL子查询多个值

> ID：14875857
> 
> 赞同：0
> 
> 时间：2013-02-14T13:23:43.763
> 
> 标签：sql, oracle

我只需要一点关于 SQL 查询的帮助

这是情况

```
ID   FIRST_NAME LAST_NAME  START_DAT END_DATE  SALARY     CITY       DESCRIPTION
---- ---------- ---------- --------- --------- ---------- ---------- ---------------
01   Jason      Martin     25-JUL-96 25-JUL-06 1234.56    Toronto    Programmer
02   Alison     Mathews    21-MAR-76 21-FEB-86 6661.78    Vancouver  Tester
03   James      Smith      12-DEC-78 15-MAR-90 6544.78    Vancouver  Tester
04   Celia      Rice       24-OCT-82 21-APR-99 2344.78    Vancouver  Manager
05   Robert     Black      15-JAN-84 08-AUG-98 2334.78    Vancouver  Tester
06   Linda      Green      30-JUL-87 04-JAN-96 4322.78    New York   Tester
07   David      Larry      31-DEC-90 12-FEB-98 7897.78    New York   Manager
08   James      Cat        17-SEP-96 15-APR-02 1232.78    Vancouver  Tester

8 rows selected.

SQL> -- GROUP BY clause and AVG() function

SQL> SELECT city, AVG(salary)
2 FROM employee
3 GROUP BY city;

CITY AVG(SALARY)
---------- -----------
New York 6110.28

Toronto 1234.56

Vancouver 3823.78 
```

问题是我找不到一种方法来从每个`avg(salary)`城市中提取那些薪水更高的名字

例子：

温哥华有`avg(salary)`3823.78 所以我应该得到两个人的名字：alison 和 james，因为他们的薪水比`avg(salary)`纽约的高

现在我只去这个查询但不工作

```
select FIRST_NAME,SALARY,CITY 
from employee 
where SALARY > (  select avg(SALARY) 
                  from employee 
                  group by CITY
                ); 
```

它告诉我子查询返回超过 1 个值

希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:26:39.057

您的查询返回多个值。要将其限制为一个值，您需要一个条件`city`：

```
select FIRST_NAME,SALARY,CITY
from employee e
where SALARY > (select avg(SALARY) 
                from employee e2 
                where e2.city = e.city 
                group by CITY); 
```

这称为相关子查询。您也可以将其编写为连接，这是我将使用的语法。`group by CITY`严格来说，这是不必要的，但我认为它使子查询的意图更加清晰。

您可以通过执行以下操作将其重写为连接：

```
select e.FIRST_NAME, e.SALARY, e.CITY
from employee e join
     (select city, avg(salary) as avgSalary
      from employee
      group by city
     ) ec
     on e.city = ec.city
where e.salary > ec.avgSalary 
```

或者，我最喜欢的方式是什么。. .

```
select e.FIRST_NAME, e.SALARY, e.CITY
from (select e.*,
             avg(salary) over (partition by city) as avgSalary
      employee e
     ) e
where e.salary > e.avgSalary 
```

# google-app-engine - 使用 webapp2 延迟加载 Oauth2Decorator callback_handler

> ID：14875861
> 
> 赞同：1
> 
> 时间：2013-02-14T13:24:06.237
> 
> 标签：google-app-engine, python-2.7, oauth-2.0, webapp2

这很好用：

```
secrets = 'client_secrets-gae.json'
decorator = OAuth2DecoratorFromClientSecrets(os.path.join(os.path.dirname(__file__), secrets),
                                          scope='https://www.googleapis.com/auth/drive')
....

webapp2.Route('/oauth2callback', handler=decorator.callback_handler() ), 
```

但是我怎样才能[使用 webapp2](http://webapp-improved.appspot.com/guide/routing.html#custom-methods)延迟加载回调。我必须参考装饰器实例：

```
webapp2.Route(r'/products', handler='handlers.ProductsHandler', name='products-list', handler_method='list_products') 
```

**更新并解决**

此行`decorator.callback_handler()`创建一个请求处理程序对象。

```
decorator_callback_handler =  decorator.callback_handler()

.... 

webapp2.Route('/oauth2callback', handler='my_package.my_mod.decorator_callback_handler'), 
```

当然，我使用不同的模块来处理装饰器和 webapp2 路由，以从延迟加载中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:28:26.463

此行`decorator.callback_handler()`返回一个 webapp.RequestHandler，它在 OAuth 2.0 跳舞期间处理从服务器返回的重定向。

来自：oath2client.appengine 中的 callback_handler 文档字符串

所以解决方案是：

使用_api.py：

```
secrets = 'client_secrets-gae.json'
decorator = OAuth2DecoratorFromClientSecrets(os.path.join(os.path.dirname(__file__), secrets),
                                      scope='https://www.googleapis.com/auth/drive')

decorator_callback_handler =  decorator.callback_handler() 
```

并在 main.py 中延迟加载此处理程序：

```
app = webapp2.WSGIApplication([        
        ....                            # other routes                                             
        webapp2.Route('/oauth2callback', handler='package.use_api.decorator_callback_handler'),                      
    ], debug=True) 
```

# css - 如果我们仍然可以在 Asp.Net 中使用 CSS 处理服务器控件，为什么还要使用 Skin？

> ID：14875862
> 
> 赞同：0
> 
> 时间：2013-02-14T13:24:11.047
> 
> 标签：css, webforms, theming, skins

主题/皮肤和 CSS 之间的主要区别仅在于 HTML 和服务器端控件 (SSC)。我们使用皮肤文件来格式化和化妆品 SSC，这些文件不在 HTML 中，如`<asp:Label>`, `<asp:TextBox>`&`</asp:RadioButtonList>`等等...

但是，如果我们在 CSS 中使用渲染的 HTML SSC 而不是 Skin 文件来处理`<asp:Label>`&`<asp:TextBox>`等等... 即：当 SSC`<asp:TextBox>`在浏览器上渲染时它会显示`<input type="text">`，所以如果我们在我的 CSS 文件中编写以下样式而不是 Skin，它也可以工作...

```
 input[type=text], textarea, select 
  { 
    outline: none; 
    padding: 3px 0px 3px 3px; 
    margin: 5px 1px 3px 0px; 
    border: 1px solid #cccccc;
    background: #ffffff;  
    width: 150px; 
    color: #484848; 
    font-size: 12px; 
  } 
```

所以我的问题是，如果我们仍然可以使用 CSS 处理 SSC，我们真的需要 SKINS 吗？或者如果我遗漏了什么，请纠正我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:32:08.440

webforms 专注于服务器端处理。首次引入 webforms 时，它倾向于通过控件属性而不是 CSS 来设置样式控件。我倾向于将皮肤视为服务器端控件的类似 CCS 的样式。您甚至可以让皮肤设置 CssClass 属性。

自 2001 年以来，CSS 得到了改进，而且 IMO 皮肤提供的价值越来越少。所以你需要皮肤，不。他们提供价值吗？你很难说服我:)

# java - GWTUploader 在启动时添加文件

> ID：14875877
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:01.150
> 
> 标签：java, gwt

我使用 gwtupload ( [http://code.google.com/p/gwtupload/](http://code.google.com/p/gwtupload/) )，我需要添加启动文件。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:58:55.320

我可以推断您想将以前上传的文件添加到多上传器列表中。`MultiUploader` 虽然你可以在项目[网站](http://code.google.com/p/gwtupload/issues/list)上开一张票，但目前没有办法，我将在下一个版本中实现它。

但是您可以扩展`MultiUploader`并编写解决方法，此示例有效：

```
public class GwtTestApp implements EntryPoint {

  public void onModuleLoad() {
    MyMultiUploader uploader = new MyMultiUploader("file1.txt", "file2.doc");
    RootPanel.get().add(uploader);
  }

  public static class MyMultiUploader extends MultiUploader {

    private VerticalPanel panel;
    private Widget multiuploader;

    @Override
    protected void initWidget(Widget widget) {
      panel = new VerticalPanel();
      super.initWidget(panel);
      multiuploader = widget;
    }

    public MyMultiUploader(String ...files) {

      for (String f : files ) {
        Uploader u = (Uploader)getUploaderInstance();
        IFileInput i = u.getFileInput();
        IUploadStatus s = u.getStatusWidget();

        i.setVisible(false);
        s.setVisible(true);
        u.getForm().removeFromParent();

        u.setServletPath("whatever");
        s.setFileName(f);
        s.setStatus(Status.SUCCESS);

        final String name = f;
        s.addCancelHandler(new UploadCancelHandler() {
          public void onCancel() {
            Window.alert("Cancel " + name);
          }
        });

        panel.add(u);
      }

      panel.add(multiuploader);
    }

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:56:26.940

我认为我们需要在 servlet 中添加文件

```
Hashtable<String, String> receivedContentTypes = new Hashtable<String, String>();
/**
* Maintain a list with received files and their content types. 
*/
Hashtable<String, File> receivedFiles = new Hashtable<String, File>(); 
```

但我不知道怎么...

# submit - Open Graph API - 我们的应用程序的操作因同样的原因不断被拒绝

> ID：14875884
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:25.843
> 
> 标签：submit, facebook-opengraph

我们正在尝试为我们的应用程序使用 Open graph API，并希望使用以下操作：用户消息和标签。

我们了解我们必须提供分步说明。我们已经这样做了，但是我们不断从 Facebook 收到以下消息：您对 Shopgodt 的询问操作需要更新。

错误信息：

> 用户消息（需要批准）- 允许用户编写附加到此操作的个性化消息。标签（需要批准）- 允许我的应用程序的用户标记其他用户执行此操作。
> 
> 我们无法根据提供的使用说明测试此操作。我们在您的页面上找不到“提问”部分。包括所有必要的密码、测试用户凭据以及我们测试您的操作所需的登台服务器的链接。测试用户无法点赞页面，因此请不要将您的应用置于点赞门之后。如果您需要花钱触发动作，请提供免费的假冒产品或优惠券供测试用户购买。完成这些更改后，重新提交您的操作。 [https://developers.facebook.com/docs/technical-guides/opengraph/video-tutorials/](https://developers.facebook.com/docs/technical-guides/opengraph/video-tutorials/)

这些是我们提供的分步说明：

1.  访问[http://www.shopgodt.com](http://wwww.shopgodt.com)

2.  单击 Facebook 图标并输入这些凭据用户名：XXXX 密码：XXXX

3.  成功登录后单击下面快照中红色箭头突出显示的“提问”按钮。（快照上传）

4.  这将打开一个弹出窗口来询问问题

5.  单击任何图像（页面右侧），然后在“在此处输入您的问题”框中输入问题（如第 3 步图像所示）。

> 这是我们需要 USER MESSAGE 操作的地方。

1.  如果您在名为“键入朋友姓名”的文本框中输入姓名“XXXX”，它将显示您的朋友列表，选择您要标记的用户。（在这种情况下，只有 X 个朋友。）

> 这是我们需要 TAGS 操作的地方。

1.  点击“提交问题”

2.  然后转到 Facebook“新闻提要”，您应该会在提要上看到问题和链接。

我们非常勤奋地阅读有关 OpenGRaph API 的信息，我们已尝试在我们的说明中详细说明。我们只是不确定为什么会收到此错误。这是我们完成的第二次提交，并且对它发生的原因感到非常困惑。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:09:10.130

1.  在你上面的问题中，你写的是“www”而不是“www”，希望你在提交到 facebook 时写得正确。

2.  facebook 将于 2013 年 2 月 6 日开始删除自定义操作。请在此处查看相应的文档[http://developers.facebook.com/roadmap/completed-changes/](http://developers.facebook.com/roadmap/completed-changes/)。它说

**内容消费的自定义操作结束**

我们将不再显示仅由用户消费内容发布的自定义 Open Graph 操作。如果您拥有其中一项操作并且之前已获得批准，您将收到我们的电子邮件。开发人员应停止发布这些操作，因为这样做会从 2 月 6 日开始返回错误。可以在用户简单地消费内容时发布的唯一操作是内置操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:38:45.173

正如其他用户所指出的，您网站的 URL 有错字。确保您指向正确的网站，以便 Facebook 可以进行测试。

您是否使用从您的应用创建的 Facebook 测试用户？如果没有，请检查应用程序设置页面并单击开发人员角色。您将能够从页面的最后一部分创建一个测试用户。您可以向 Facebook 提供一个链接，该链接会自动将他们登录到帐户中。

您提供了“提问”按钮的屏幕截图（您可以包括它吗？）。您为其提供登录详细信息的用户是否可以使用此按钮？确保与您提供给 facebook 的用户一起测试该过程。

第 3 步和第 5 步针对同一件事给出了不同的说明。一个说单击图像，另一个说单击按钮。它是哪一个？澄清这一点，看看它是否有所作为。

最后，在测试您的网站时，我注意到您没有请求“publish_actions”权限。这意味着该操作实际上并未发布。

解决上述问题并重新提交您的操作。希望下次能得到批准。

# php - 在 PHP 中解析格式化的文本文件

> ID：14875886
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:26.800
> 
> 标签：php, parsing, templates, text

有没有一种简单的方法来解析我将在下面发布的以下数据。数据来自网络。

我使用`$rows = explode("\n", $txt_file);`then`$parts = explode('=', $line_of_text);`来获取键名和值。但是，我不知道如何处理我不想要的额外信息。

此外，我不知道如何摆脱多余的空间。该文件似乎是为某种简单的解析而制作的。我查看了整个网站以找到解决方案。但是，此数据与我在此站点上找到的示例完全不同。

```
# This file holds all the timelines available at this time.
# All lines starting with # is ignored by parser...
#

STARTINFO
description     =       Rubi-Ka 2
displayname     =       Rimor (Rubi-Ka 2)
connect         =       cm.d2.funcom.com
ports           =       7502
url             =       
version         =       18.5.4
ENDINFO

STARTINFO
description     =       Rubi-Ka 1
displayname     =       Atlantean (Rubi-Ka 1)
connect         =       cm.d1.funcom.com
ports           =       7501
url             =       
version         =       18.5.4
ENDINFO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:59:09.827

您可以使用[修剪](http://php.net/manual/en/function.trim.php)功能摆脱空白。

为了只保留您想要的列，您可以将它们的键存储在一个数组中，并在解析时对其进行检查。这是一个示例（尽管相当冗长）。

```
<?
$lines = explode("\n", $data);
$result = array();
$count = 0;
// an array of the keys we want to keep
// I have the columns as keys rather then values for faster lookup
$cols_to_keep = array( 'url'=>null, 'description'=>null, 'ports'=>null, 'displayname' => null);

foreach($lines as $line)
{
  //skip comments and empty lines
  if(empty($line) || $line[0] == '#')
  {  continue; }

  //if we start a new block, initalize result array for it
  if(trim($line) == 'STARTINFO')
  {
    $result[$count] = array();
    continue;
  }

  // if we reach ENDINFO increment count
  if(trim($line) == 'ENDINFO')
  {
    $count++;
    continue;
  }

  //here we can split into key - value
  $parts = explode('=', $line);

  //and if it's in our cols_to_keep, we add it on
  if(array_key_exists(trim($parts[0]), $cols_to_keep))
  { $result[$count][ trim($parts[0]) ] = trim( $parts[1] );  }
}
print_r($result);
?> 
```

# php - 类继承的目录名

> ID：14875887
> 
> 赞同：2
> 
> 时间：2013-02-14T13:25:27.857
> 
> 标签：php, inheritance, dirname

我有一个父类，它包含一个图像路径的公共变量，它是通过类构造函数设置的

```
abstract class Parent_Class {
     protected $image_path;

     public function __construct($image_path_base) {
         $this->image_path = $image_path_base . '/images/';         
    }
} 
```

基本路径取决于子类或更确切地说是它们的文件位置。

```
class ChildA_Class {
    public function __construct() {
         parent::__construct(dirname(__FILE__));         
         ...
    }
}

class ChildB_Class {
    public function __construct() {
        parent::__construct(dirname(__FILE__));
        ...         
    }
} 
```

有没有办法消除`dirname(__FILE__)`子类中的逻辑并将逻辑移向父类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:47:38.797

What you want to do seems strange to me, but here is one possible solution to your problem using reflection and late static binding.

```
abstract class ParentClass
{
    protected $imagePath;

    public function __construct()
    {
        // get reflection for the current class
        $reflection = new ReflectionClass(get_called_class());

        // get the filename where the class was defined
        $definitionPath = $reflection->getFileName();

        // set the class image path
        $this->imagePath = realpath(dirname($definitionPath) . "/images/");
    }
} 
```

Every child class would automatically have an image path based on where the child class was defined.

# android - findpreference 或与 Android >3.0 和 Android <3.0 兼容的替代方案？

> ID：14875893
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:51.633
> 
> 标签：android, preferences

findpreference() 正在杀死我，我希望我的应用程序使用广泛的 API 运行，一次适用于旧设备和新设备，问题是 Android 3.0+ 不推荐使用该方法，然后需要使用偏好片段新版本，但旧版本不支持偏好片段。那么最好的方法是什么？可能会复制设置菜单并通过 build.VERSION 在运行时选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:37:36.373

最后，我使用preferenceFragment 复制了设置活动，一个用于Android < 3.0，另一个用于Android >3.0，效果很好。

# asp.net - 返回新的 RedirectResult() 与返回 Redirect()

> ID：14875894
> 
> 赞同：21
> 
> 时间：2013-02-14T13:25:54.367
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, redirect, actionresult

以下两个控制器 ActionResult 返回语句有什么区别：

```
return new RedirectResult("http://www.google.com", false); 
```

和

```
return Redirect("http://www.google.com"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-14T13:32:51.747

直接从**[源头](http://aspnetwebstack.codeplex.com/SourceControl/BrowseLatest)**

```
// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.

using System.Diagnostics.CodeAnalysis;
using System.Web.Mvc.Properties;

namespace System.Web.Mvc
{
    // represents a result that performs a redirection given some URI
    public class RedirectResult : ActionResult
    {
        [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "0#", Justification = "Response.Redirect() takes its URI as a string parameter.")]
        public RedirectResult(string url)
            : this(url, permanent: false)
        {
        }

        [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "0#", Justification = "Response.Redirect() takes its URI as a string parameter.")]
        public RedirectResult(string url, bool permanent)
        {
            if (String.IsNullOrEmpty(url))
            {
                throw new ArgumentException(MvcResources.Common_NullOrEmpty, "url");
            }

            Permanent = permanent;
            Url = url;
        }

        public bool Permanent { get; private set; }

        [SuppressMessage("Microsoft.Design", "CA1056:UriPropertiesShouldNotBeStrings", Justification = "Response.Redirect() takes its URI as a string parameter.")]
        public string Url { get; private set; }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
            {
                throw new ArgumentNullException("context");
            }
            if (context.IsChildAction)
            {
                throw new InvalidOperationException(MvcResources.RedirectAction_CannotRedirectInChildAction);
            }

            string destinationUrl = UrlHelper.GenerateContentUrl(Url, context.HttpContext);
            context.Controller.TempData.Keep();

            if (Permanent)
            {
                context.HttpContext.Response.RedirectPermanent(destinationUrl, endResponse: false);
            }
            else
            {
                context.HttpContext.Response.Redirect(destinationUrl, endResponse: false);
            }
        }
    }
} 
```

第二个参数确定[响应是 302（临时）还是 301 永久重定向](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。默认情况下，该值为`false`。

第二种方法是打开`Controller`的，只是一种方便的方法。这种方法已经出现在 MVC 的多个版本中（至少可以追溯到 2 个版本），但是 IIRC，`RedirectResult`我认为在 MVC 4 中添加了永久部分（我不记得在 MVC 中看到它） 3）。

```
// Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.

using System.Diagnostics.CodeAnalysis;
using System.Globalization;
using System.IO;
using System.Security.Principal;
using System.Text;
using System.Web.Mvc.Async;
using System.Web.Mvc.Properties;
using System.Web.Profile;
using System.Web.Routing;
namespace System.Web.Mvc
{
    [SuppressMessage("Microsoft.Maintainability", "CA1506:AvoidExcessiveClassCoupling", Justification = "Class complexity dictated by public surface area")]
    public abstract class Controller : ControllerBase, IActionFilter, IAuthorizationFilter, IDisposable, IExceptionFilter, IResultFilter, IAsyncController, IAsyncManagerContainer
    {
      // omitted for brevity

      [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "0#", Justification = "Response.Redirect() takes its URI as a string parameter.")]
      protected internal virtual RedirectResult Redirect(string url)
      {
          if (String.IsNullOrEmpty(url))
          {
              throw new ArgumentException(MvcResources.Common_NullOrEmpty, "url");
          }

          return new RedirectResult(url);
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-07T08:50:38.890

***this.Redirect(string url)*** - 它将在内部创建 RedirectResult 类的新对象并进行临时重定向。

***new RedirectResult(string url, bool Permanent)*** - 它将重定向，但为您提供永久或临时重定向的选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T13:30:09.603

他们做同样的事情。控制器的 Redirect 方法创建一个新的 RedirectResult。如果您实例化 RedirectResult，您还可以添加一个参数来确定重定向是否是永久的（或不是）。

# sql-server - 将预算构建到数据库中

> ID：14875895
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:54.647
> 
> 标签：sql-server, database-design, referential-integrity

我正在将预算构建到 SQL Server 数据库中，以便通过 Web 应用程序或桌面应用程序跟踪某些项目。我的问题是，如果将预算保持在五年以上，最好将行项目放在一个表中并附上其描述，而将所有年份放在另一个表中，比如五年内每个月有 60 列，或者每年有一个表及其给定的订单项。出于查询目的，这种方式似乎更容易，但对于参照完整性，另一种方式似乎更好。任何见解都会很棒

基本上我试图用它来比较和报告 5 年的假设与实际结果随着时间的推移

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:29:05.470

五年的 60 列肯定违反了规范化规则。那种方式是疯狂的......

我可以看到超越年份的类别（例如“所得税”、“住房”、“食品”）。

我可以看到按时间戳分组的类别的事务。

我可以看到参考类别的预测和实际值。

在您提出的任何一个设计中，我都没有看到任何这些。

# objective-c - 将图像插入imageview后更改图像纵横比

> ID：14875897
> 
> 赞同：0
> 
> 时间：2013-02-14T13:25:55.257
> 
> 标签：objective-c, xcode, uiimageview

所以我试图将图像从相机加载到图像视图中。我已经完成了，但是图像纵横比发生了变化。

我尝试为 imageview 设置内容模式，但没有效果。这是我的做法：

```
UIImage *picture=[UIImage imageWithData:slika];
    imageview = UIViewContentModeScaleAspectFit;
    [imageview setImage:picture forState:UIControlStateNormal]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:44:43.923

图像视图是您自己的视图吗？或者它是，例如，单元格的默认 imageView？

你应该这样写：

```
imageView.contentMode = UIViewContentModeScaleAspectFit;
imageView.image = [UIImage imageNamed:picture]; 
```

或者

```
[imageView setImage:picture]; 
```

UIImageView没有方法`[imageview setImage:picture forState:UIControlStateNormal];`，它仅适用于 UIButton（可能适用于其他一些 UIControl，但 UIImageView 不是 UIControl 的子类 - 它是 UIView 的直接子类）。但是按钮不会缩放保留纵横比的图像。

# biztalk - 在当事人协议中设置 EDIFACT 分隔符

> ID：14875898
> 
> 赞同：2
> 
> 时间：2013-02-14T13:25:58.750
> 
> 标签：biztalk, biztalk-2010, edi, edifact

我目前正在 BizTalk Server 2010 中实施 EDI 解决方案。这是场景：

BizTalk 负责 X.400 邮箱和客户的 ERP 软件之间的正确消息路由。它还用于使用 SharePoint Web 服务将有关交换消息的信息放入 SharePoint 站点。
我正在使用角色链接和 BizTalk 方管理来应用正确的设置（发送端口、UNB6 段中的密码等）。

现在我有以下问题：
当我尝试从客户的 ERP 系统中获取传出的 INVOIC 消息，提取编排中的相关信息并将其写入 SharePoint 站点时，使用 EDI 接收管道的接收端口会暂停，并显示以下内容错误信息：

```
An output message of the component "EDI disassembler" in receive pipeline 
"**********.Pipelines.FileNamePromotionEDIReceivePipeline, **********.Pipelines, 
Version=1.0.0.0, Culture=neutral, PublicKeyToken=****************" is suspended 
due to the following error: 
     Error: 1 (Miscellaneous error)
     33: Invalid occurence outside message, package or group.
The sequence number of the suspended message is 1\. 
```

发生这种情况是因为消息在每个段分隔符之后使用 CR 和 LF 作为后缀。现在我可以将 CR 和 LF 的 ASCII 十六进制代码添加到管道的“EfactDelimiters”设置中，但问题是还有其他没有 CR 和 LF 的消息，然后无法使用相同的管道接收这些消息。顺便说一句，当我使用管道获取其中一条*没有CR 和 LF 的消息时，也**没有*将 CR 和 LF 设置为分隔符，接收端口也被挂起，这一次由于使用点而不是逗号而导致错误消息小数分隔符（尽管我在管道中启用了“UseDotAsDecimalSeparator”选项）。同样，只有更改 EfactDelimiters 才有帮助。

我认为当事方协议中的“字符集和分隔符”页面应该使这成为可能：为每个业务方单独设置分隔符。但是我在这些设置中所做的更改似乎没有任何效果。我将“UNA6 Suffix”设置为“CR LF”，将“Decimal Notation (UNA3)”设置为“.(Decimal)”，重新启动主机实例......同样的问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:23:56.000

我从未使用过 biztalk，但我知道我的 EDIFACT，而且据我所知，那些包含 CR/LF 的消息在语法上是错误的。[UNA6 后缀似乎是 Microsoft 的补充，因为我在UNECE](http://www.unece.org/)的 EDIFACT 的官方文档中找不到它的踪迹。

通常，您想在 EDIFACT 消息中用作特殊字符的字符由特殊（可选）`UNA`段设置，该段始终位于首位。当您编写时，您设置分隔符/定界符，我真的不知道您的意思是什么，因为它可以指设置已创建消息的选项（消息中使用哪些定界符），设置定界符用于接收程序解析，或者它可以引用在`UNA`段中打印的字符。

知道，在该`UNA`段中，我无法知道使用任何 UNA6 后缀（如文档中明确指出的那样，该`UNA`段的长度必须恰好为 9 个字符，请参阅[8.3 交换格式规则](http://www.unece.org/fileadmin/DAM/trade/untdid/texts/d423.htm#p8.3)）。这使我得出结论，您为创建的消息设置了选项。如果可以避免的话，我不建议使用 UNA6 后缀。人类阅读消息可能很好，但它不属于那里，对机器阅读没有用处。

如果接收程序没有选项允许 CR/LF 的可选发生，并且您无法避免将这些消息混合到某种消息中，那么除了以某种方式插入一个摆脱 CR 的小程序外，我认为您没有其他方法/如果。

最重要的原则当然是让发送程序和接收程序用相同的语法说话，否则无法工作。小数点分隔符的问题也是如此。从[语法规则 10.1](http://www.unece.org/tradewelcome/areas-of-work/un-centre-for-trade-facilitation-and-e-business-uncefact/outputs/standards/unedifact/tradeedifactrules/part-4-edifact-rules-for-electronic-data-interchange-for-administration-commerce-and-transport/part-4-unedifact-rules-chapter-22-syntax-rules.html)开始，允许使用逗号或点，这是一个非常宽松的定义。如果你想在保存方面，发送一个`UNA`片段，指定你使用哪个，然后只使用那个。

我不太确定，这对您解决具体问题有多大帮助，因为它可能只是一个关于如何配置*biztalk*的问题，但我认为一些背景信息应该是有用的。

# sql - PostGIS 查询在执行 ST_DUMP(ST_UNION) 时不使用 gist 索引

> ID：14875901
> 
> 赞同：0
> 
> 时间：2013-02-14T13:26:15.347
> 
> 标签：sql, postgresql, postgis, spatial-index

我的查询：

```
DROP TABLE IF EXISTS tmp;
CREATE TEMP TABLE tmp AS SELECT *, ST_BUFFER(the_geom::GEOGRAPHY, 3000)::GEOMETRY AS buffer FROM af_modis_master LIMIT 20000;
CREATE INDEX idx_tmp_the_geom ON tmp USING gist(buffer); 
EXPLAIN SELECT (DUMP(ST_UNION(buffer))).path[1], (DUMP(ST_UNION(buffer))).geom FROM tmp; 
```

解释的输出：

```
Aggregate  (cost=1705.52..1705.54 rows=1 width=32)
  ->  Seq Scan on tmp  (cost=0.00..1625.01 rows=16101 width=32) 
```

Seq Scan 意味着它没有使用索引，对吧？为什么不？

（这个问题首先发布在这里：[https](https://gis.stackexchange.com/questions/51877/postgis-query-not-using-gist-index-when-doing-a-st-dumpst-union) : //gis.stackexchange.com/questions/51877/postgis-query-not-using-gist-index-when-doing-a-st-dumpst-union。抱歉重新发布但这里的社区更加活跃，所以也许会更快地提供答案。）

更新：即使添加基于缓冲区过滤的 where 子句也会导致 Seq Scan：

```
ANALYZE tmp;
EXPLAIN SELECT (DUMP(ST_UNION(buffer))).path[1], (DUMP(ST_UNION(buffer))).geom FROM tmp WHERE ST_XMIN(buffer) = 0.0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:28:39.547

像您这样的查询永远不会使用索引。这样做会用大量的随机磁盘 I/O（甚至可能除了普通磁盘 I/O 之外）来代替对表的扫描。

本质上，您并没有根据标准进行选择，因此索引将比仅按物理顺序从磁盘中提取数据并对其进行处理要慢。

现在，如果您仅拉出具有 where 条件的单行，您的索引可能会有所帮助，那么您可能会发现它可能使用索引，也可能不使用索引，具体取决于表的大小。非常小的表永远不会使用索引，因为额外的随机磁盘 I/O 永远不会成功。请记住，没有任何查询计划能胜过单页的顺序扫描......

# elasticsearch - Elasticsearch 查询太多结果

> ID：14875902
> 
> 赞同：4
> 
> 时间：2013-02-14T13:26:19.467
> 
> 标签：elasticsearch, dsl

我正在尝试设置一个简单的搜索，该搜索将通过自定义排序返回给我简单的结果，我得到的排序根据自定义分数很好。

问题是对于这个查询

```
"query": {
    "query_string": {
        "query": query_term,
        "fields": ["name_auto"],
    }
} 
```

**注意：name_auto 是弹性体上的 Edge N gram 字段**

如果查询没有任何意义，我也总是会得到一个结果集。

例子：

我有一个 elastcisearch 索引，其中填充了所有 android 应用程序的名称。如果我搜索人**脸**，我会返回与它相关的所有结果，这些结果是按 Play 商店、menans [facebook、facebook messenger、...] 上的评论数量排序的

问题是，当我查询诸如**facesomeuselesschars**之类的内容时，我仍然得到与以前相同的结果，但可以肯定没有任何内容与“someuselesschars”匹配。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:33:12.950

ElasticSearch 将始终返回与您的查询匹配的结果，即使这些结果的分数很差。由于您的 ngram，您对“facesomeuselesschars”的查询将匹配其中包含“face”的任何内容（例如，查询的前四个字符将匹配索引中的多个标记）。

查询中的其余字符只会降低返回匹配的分数，但不会阻止它被返回。

如果要设置结果必须达到的最低分数，可以使用[min_score](http://www.elasticsearch.org/guide/reference/api/search/min-score.html)参数。

# php - 将爆炸的标签数组连接到带有链接的字符串

> ID：14875905
> 
> 赞同：0
> 
> 时间：2013-02-14T13:26:41.397
> 
> 标签：php, arrays, for-loop, explode, string-concatenation

使用下面的自定义函数，我的目标是为标签数组的每个元素提供特定链接。我对该函数的输入是一个**字符串**，如 (tag1, tag2, tag3)。我的输出是（以链接形式）`tag1,`

“tag1”很好，但为什么我不能得到我期望的结果：“tag1，tag2，tag3”（链接形式）

我在 php.net 和本网站中阅读了有关术语 ( `array`, `explode`, `for`, `.=`) 的示例，但我无法解决我的问题。

你能指导我吗

```
function tag_linkify ($article_tags)
{
$array_of_tags = explode(",", $article_tags);
$sayac = count($array_of_tags);
$linked_tags ="";
for ($i=0; $i<$sayac; $i++)
    {
        $linked_tags .= '<a href="'.'">'.$array_of_tags[$i].'</a>, ';
    }
echo substr_replace($linked_tags, '', -1, 2);
}

tag_linkify (tag1,tag2,tag3); 
```

谢谢
问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:30:32.830

使用**`implode`**

```
function tag_linkify ()
{
$array_of_tags = get_func_args();;
$sayac = count($array_of_tags);
$linked_tags =array();
for ($i=0; $i<$sayac; $i++)
    {
        $linked_tags[] = '<a href="'.'">'.$array_of_tags[$i].'</a> ';
    }
echo "(".implode(',', $lined_tags).")";
}

tag_linkify (tag1,tag2,tag3); 
```

我希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:35:54.400

改进 Sedz 帖子：

```
function tag_linkify ($article_tags)
{
$array_of_tags = explode(",", $article_tags);
echo '<a href="">' . implode('</a>,<a href="">', $array_of_tags) . '</a>';
} 
```

tag_linkify ("tag1,tag2,tag3");

顺便提一句。您的 tag_linkify 调用中的参数错过了它们的引号和

```
'<a href="'.'">' 
```

真的和

```
'<a href="">' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:42:27.477

如果我正确理解您的问题，我会这样做：

```
tag_linkify ($tag1, $tag2, $tag3);

function tag_linkify () 
{

    $tags = get_func_args(); // get all tags in an array
    $final = '';
    // loop through the tags
    forech($tags as $tag)
    {
        // return or echo depends on what you doing with your data
        $final .='<a href="">'. $tag . '</a>'; 
    }

    return $final;
} 
```

[获取函数参数](http://php.net/manual/en/function.func-get-args.php)

# javascript - js中的空间验证？

> ID：14875907
> 
> 赞同：1
> 
> 时间：2013-02-14T13:26:46.797
> 
> 标签：javascript, html

我想限制网站名称（此处）上空间的使用..

```
<tr>
    <td>
        <h4>Website Name</h4>
    </td>
    <td>
        <input type="text" name="wname" id="wname" size="30" required  onfocus="validateWebsite();" oninput="validateWebsite();">
        <select name="domain">
            <option selected>.com</option>
            <option>.in</option>
            <option>.net</option>
            <option>.org</option>
            <option>.edu</option>
            <option>.int</option>
        </select>
    </td>
</tr> 
```

该`main.js`文件包含以下代码。
我想限制用户进入空间。使用可用的代码它不起作用：

```
function validateWebsite()  {
    var s = document.getElementById('wname');
    if (s.indexOf(" ") !== -1){
        wname.setCustomvalidity('');
    }else{
        wname.setCustomValidity('Invalid Website');
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:33:22.967

这：

```
if (s.indexOf(" ") !== -1) 
```

应该：

```
if (s.value.indexOf(" ") === -1) 
```

此外，第一个`setCustomvalidity`拼写错误（小写“v”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:36:57.503

试试这个...

```
 var s = document.getElementById('wname').value;
    if(s.trim().length == 0 || s.trim().indexOf(' ') != -1)
    {
         // Your code when string is just blank or having spaces
    }
    else
    {
         // Your code when string is not blank and not having any spaces
    } 
```

希望能帮助到你...

# java - 划分 IF-ELSE-ENDIF 循环的逻辑

> ID：14875911
> 
> 赞同：1
> 
> 时间：2013-02-14T13:27:08.683
> 
> 标签：java, algorithm, logic

这是我的第一个问题，如果有任何问题，请纠正我。我在一个文档系统中有一些旧规则，我试图将它们转换为新的文档系统。我有很多`IF-ENDIF`并`IF-ELSE-ENDIF`相互嵌套，如下所示。需要一些逻辑来将以下输入转换为相应的输出。需要算法帮助。谢谢

```
INPUT:  
IF (Cond 1)  
    IF(Cond 2)  
    ENDIF  
    IF(Cond3)  
    ELSE  
    ENDIF  
ELSE  
    IF(Cond4)  
    ELSE  
        IF(Cond5)  
        ELSE  
        ENDIF  
    ENDIF  
    IF(Cond6)  
    ENDIF  
ENDIF 
```

所需输出：

```
 IF(Cond1) AND (Cond2)  
    IF(Cond1) AND (Cond3)  
    IF(Cond1) AND !(Cond3)  
    IF!(Cond1) AND (Cond4)  
    IF!(Cond1) AND !(Cond4)  AND (Cond5)  
    IF!(Cond1) AND !(Cond4) AND !(Cond5)  
    IF!(Cond1) AND (Cond6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:43:00.807

假设您将输入读取并解析为树状数据结构，其中每个节点代表一个“if-else”语句，而子节点是嵌套的 if-else 语句，这里有一些粗略的伪代码，应该可以为您提供大致的思路：

```
process(tree,output)
  if tree == null
    write output to file
    return
  for each child in body of if
     process(child,output + "AND <condition of root node in tree>")
  for each child in body of else
     process(child,output + "AND !<condition of root node in tree>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:59:55.560

我将假设您首先具有可以解析文件的逻辑。如果是这样，那么您应该最终得到一个抽象语法树，其中每个节点看起来像这样：

```
If
  |
  +--- Condition
  |
  +--- Positive statement
  |
  +--- Negative statement 
```

或者

```
Sequence
  |
  +--- Statement 1
  |
  +--- Statement 2
  |
  ...
  |
  +--- Statement n 
```

或者

```
Terminal 
```

其中 Terminal 代表一个具体的陈述。它们隐含在您的原始输入文件中。例如，“IF(COND2) ENDIF”将表示如下：

```
If
  |
  +--- Cond2
  |
  +--- Terminal
  |
  +--- (null) 
```

在您的情况下，您的实际树看起来像这样：

```
If
  |
  +--- Cond1
  |
  +--- Sequence
  |      |
  |      +--- If
  |      |      |
  |      |      +--- Cond2
  |      |      |
  |      |      +--- Terminal
  |      |      |
  |      |      +--- (null)
  |      |
  |      +--- If
  |             |
  |             +--- Cond3
  |             |
  |             +--- Terminal
  |             |
  |             +--- Terminal
  |
  +--- If
       ... 
```

要生成输出，您只需递归地沿着树向下走，沿途构建一堆条件，然后当您到达一条语句时，输出整个条件堆栈，它们之间带有 AND。这是一些伪代码：

```
void treeWalk(root):
    treeWalk(root, []);

void treeWalk(root, conditions):
    case root of:
        If(cond, positive, negative):
            if (positive is not null):
                treeWalk(positive, conditions + cond)
            if (negative is not null):
                treeWalk(negative, conditions + !cond)
        Sequence(statements):
            for each statement in statements:
                treeWalk(statements, conditions)
        Terminal:
            print "IF "
            for each condition in conditions:
                if (condition is not the last condition):
                    print " AND "
                print condition 
```

在这里，我使用 + 表示将项目附加到列表中。假设 !cond 会导致打印出一个“！”的条件。在前面。

我希望这会有所帮助！

# gdal - 在 WCF Rest 服务中使用 GDAL 的异常

> ID：14875915
> 
> 赞同：0
> 
> 时间：2013-02-14T13:27:14.473
> 
> 标签：gdal

我正在开发一个使用 GDAL 库的 WCF REST 服务（.net 4）。它在我的开发机器上运行良好，但在服务器（Windows Server 2008 R2）上引发异常。代码失败于

```
OSGeo.GDAL.Gdal.AllRegister(); 
```

这是一个例外：

```
20130214081020 Exception Message: The type initializer for 'OSGeo.GDAL.GdalPINVOKE' threw an exception.
20130214081020 Exception Stack Trace:    at OSGeo.GDAL.GdalPINVOKE.AllRegister()
   at OSGeo.GDAL.Gdal.AllRegister()
   at RasterValues.GetDemElevation(String latitude, String longitude)
20130214081020 Inner exception Message: The type initializer for 'SWIGExceptionHelper' threw an exception.
20130214081020 Inner exception stack trace:    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.GDAL.GdalPINVOKE..cctor() 
```

我已将 GDAL 文件复制到服务器，并将路径添加到 PATH 环境变量中。

对我所缺少的有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:36:08.647

事实证明，我需要将 *_wrap.dll 文件添加到我的服务的 bin 文件夹中。

# php - 返回多维数组中键=值的数组行

> ID：14875916
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:27:16.097
> 
> 标签：php, arrays, multidimensional-array, array-filter

大批：

```
array(
      ['name'=>'kevin','value'=>'10'],
      ['name'=>'sam','value'=>'20']
     ); 
```

例如，我如何返回 name='sam' 的值？

以及如何在更深的阵列中做到这一点

```
array(
      [0]=>array( 'inputs'=>
                    array(['name'=>'kevin','value'=>'10'],['name'=>'sam','value'=>'20']
                 ),
      [1]=>array( 'inputs'=>
                    array(['name'=>'kim','value'=>'10'],['name'=>'kirki','value'=>'20']
                 )
     ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:31:48.550

```
$arr = array(
    array("name"=>"A","info"=>"one"),
    array("name"=>"B","info"=>"two"),
    array("name"=>"C","info"=>"three")
);

foreach($arr as $v){
    if ($v['name']==="A"){
        echo $v['info'];
    }
} 
```

在深层次

```
$arr = array(
    array("input"=>array(
        "name"=>"A",
        "info"=>"one"
    )),
    array("input"=>array(
        "name"=>"B",
        "info"=>"Two"
    ))
);

foreach($arr as $subarr){ // First foreach iterate through arrays and next foreach iterate through values of each sub array
    foreach($subarr as $v){
        if ($v['name']==="A"){
            echo $v['info'];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:58:46.197

你需要一个递归 array_search - 上面的所有答案只处理一个确切的深度量（在这种情况下为 2）。

就像是

```
function recursive_array_search($needle,$haystack) {
  foreach ($haystack as $key=>$value) {
    if ($needle===$value OR (is_array($value) && recursive_array_search($needle,$value) !== false)) {
        return $value['value'];
    }
  }
  return false;
}

recursive_array_search('sam', $start_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:34:45.837

```
for($i=0;$i<count($array);$i++)
{
   if($array['name']=="sam")
   {
      echo $array['value'];
   }
} 
```

对于下一个数组，您可以这样做....

```
for($i=0;$i<count($array);$i++)
{
   for($j=0;$j<count($array[$i]['inputs']);$j++)
   {
       if($array[$i]['inputs'][$j]['name']=="sam")
       {
          echo $array[$i]['inputs'][$j]['info'];
       }          
   }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T13:30:25.357

```
$new_array = array();
foreach ($old_array as $value) {
    $new_array[$value['name']] = $value['value'];
}

var_dump($new_array['kevin']); // prints 10 
```

# jquery - jQuery empty() 列表视图

> ID：14875917
> 
> 赞同：1
> 
> 时间：2013-02-14T13:27:15.917
> 
> 标签：jquery, listview

我想知道如何以正确的方式清空列表。在 div 中有一个列表然后清空 div 还是列表更好？

我知道这是一个蹩脚的问题，但请帮助我理解这个`empty()`功能:)

**案例）** 如果我运行这个脚本会发生什么：

```
$('#mylist).empty(); 
```

...在此列表中：

```
<ul data-role="listview" id="mylist" data-inset="true" data-theme="a"><li>Hello!</li></ul> 
```

是否变成：A）：

```
<ul data-role="listview" id="mylist" data-inset="true" data-theme="a"><li></li></ul> 
```

还是变成：B）：

```
<ul data-role="listview" id="mylist" data-inset="true" data-theme="a"></ul> 
```

或者它会变成这样：C）：

```
<ul></ul> 
```

看起来它变成了这样，因为下次我在运行 empty() 之后尝试将东西添加到我的“mylist”列表中。**我希望它仍然具有列表视图格式**，而不是这个：

```
 <ul></ul>. 
```

**我的代码片段：**

```
$('#mylist').empty();
var newlist = "<ul data-role=" + "'listview'" +" id=" + "'mylist'" + " data-inset=" + "'true'" + " data-theme=" + "'a'" + "><li>Hello!</li></ul>";
$('#mylist').append(newlist).listview().trigger('create'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:33:49.627

它变成 B)。但据我了解，您的问题是列表视图样式不适用于新添加的列表项。看看[这个](http://forum.jquery.com/topic/dynamically-generated-listview) 根据它，你应该这样做：

```
$('#mylist').empty();
var newlist = "<ul data-role=" + "'listview'" +" id=" + "'mylist'" + " data-inset=" + "'true'" + " data-theme=" + "'a'" + "><li>Hello!</li></ul>";
$('#mylist').append(newlist).listview("refresh").trigger('create'); 
```

请参阅`.listview().`更改为`.listview("refresh").`。

# php - 从不同的内部数组树枝中获取价值

> ID：14875918
> 
> 赞同：0
> 
> 时间：2013-02-14T13:27:21.070
> 
> 标签：php, twig

如何从我使用 twig 模板引擎的两个不同数组中获得组合结果

大批：-

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => This is title
            [labels] => Array
                (
                    [0] => This is label-1
                    [1] => This is lable-2
                )

            [price] => Array
                (
                    [0] => 50
                    [1] => 90
                )

            [desc] => great item
            [tags] => item,great
            [time] => 1352129710
        )

) 
```

我想要的是

*   这是标题

*   这是标签 1 50
*   这是标签 2 90

我试过的

```
<ul>
     {% for item in market %}
    <li>{{ item.title }}</li>
    <ul>
         {% for key in item.labels %}
        <li>{{ key }} - **HOW TO DISPLAY PRICE HERE FROM [price]=>Array(..) **</li>
         {% endfor %}
    </ul>
     {% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:40:02.793

您可以尝试使用`loop.index0`来获取数组索引。文档[在这里](http://twig.sensiolabs.org/doc/recipes.html#accessing-the-parent-context-in-nested-loops)。

试试下面的代码：

```
<ul>
 {% for item in market %}
<li>{{ item.title }}</li>
<ul>
     {% for key in item.labels %}
    <li>{{ key }} - {{ item.price[loop.index0] }}</li>
     {% endfor %}
</ul>
 {% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:40:21.047

您可以使用[循环](http://twig.sensiolabs.org/doc/tags/for.html#the-loop-variable)变量。

所以 ：`{{item.price[loop.index0]}}`

小心两件事：

*   使用`index0`代替，`index`否则您将迭代您的数组
*   `price`和`labels`数组必须具有相同的大小

# jquery - Flexslide 自定义导航

> ID：14875919
> 
> 赞同：1
> 
> 时间：2013-02-14T13:27:21.773
> 
> 标签：jquery, html, flexslider

我正在尝试创建一个自定义导航栏，使用链接到 Flexslider 中的特定幻灯片

```
$('.flexslider').flexslider(0); }); 
```

功能，但无济于事。我有 4 个带有个人 ID 的链接，

```
<a class="homelink 1" id="#slide1" href="#"></a>
<a class="headerlink 2" id="#slide2" href="#">About Us</a>
<a class="headerlink 3" id="#slide3" href="#">Gallery</a>
<a class="headerlink 4" id="#slide4" href="#">Contact</a> 
```

使用这段脚本

```
$("#slide1").click(function() { $('.flexslider').flexslider(0); });
$("#slide2").click(function() { $('.flexslider').flexslider(1); });
$("#slide3").click(function() { $('.flexslider').flexslider(2); });
$("#slide4").click(function() { $('.flexslider').flexslider(3); }); 
```

手指滑动和键盘导航工作正常。任何帮助将不胜感激谢谢！！

# iphone - ASIHTTPRequest 将响应数据转换为 NSArray

> ID：14875920
> 
> 赞同：1
> 
> 时间：2013-02-14T13:27:24.270
> 
> 标签：iphone, ios, objective-c, asihttprequest, nskeyedarchiver

我正在使用 ASIHTTPRequest 从服务器获取 JSON 响应。我想将此响应转换为 NSArray。我的代码：

```
 NSURL *url = [NSURL URLWithString:@"http://chirkov.net.ua/iosnettest/request.php?act=showdata&query=2;0;3;0;ASC"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request startSynchronous];
NSError *error = [request error];
if (!error) { 
    NSData *responseData = [[NSMutableData alloc] initWithData:[request responseData]];
    NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithData:responseData];
    NSLog(@"array = %@",array);
} 
```

但有异常`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSKeyedUnarchiver initForReadingWithData:]: incomprehensible archive (0xffffffef, 0xffffffbb, 0xffffffbf, 0x5b, 0x7b, 0x22, 0x69, 0x64`。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:46:27.923

您获取 JSON 数据，因此您必须使用 NSJSONSerialization 转换该数据。看看类参考。

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

还要检查这个[使用 JSON](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:13:16.527

您可以像这样使用 NSJSONSerialization：

```
NSError *jsonError = nil;
NSArray *jsonObject = (NSArray *)[NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&jsonError]; 
```

# iphone - 如何为 iphone 5 转换现有的 UIView 高度

> ID：14875922
> 
> 赞同：2
> 
> 时间：2013-02-14T13:27:35.733
> 
> 标签：iphone, ios, objective-c, uiview, iphone-5

嗨，我已经为 iPhone4 开发了应用程序，现在我想将应用程序转换为 iPhone5，我有一个名为 settingsView 的 UIView，它是通过单击 UIButton 弹出的。我想知道如何为 iPhone5 调整 settingsView 的高度。

```
 -(IBAction)settingsButtonChanged:(UIButton *)sender
{
    UIImageView *settingsImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"settingsViewImage.png"]];
    settingsImage.frame = CGRectMake(25.0, 40.0, 280.0, 370.0);

    settingsView.frame = CGRectMake(0.0, 20.0, 280.0, 370.0);
    settingsView.backgroundColor = [UIColor clearColor];
    [settingsView addSubview:settingsImage];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:40:11.080

如果您使用新的自动布局系统，您可以设置约束来自动调整视图的布局以利用屏幕大小。例如，如果您在视图顶部附近有几个元素，中间有一个表格，底部附近有一些按钮，您可以添加以下约束：

*   使顶部元素与视图顶部保持固定距离
*   保持顶部元素之间的间距固定
*   使底部按钮与视图底部保持固定距离
*   调整表格的高度，使表格在较大的屏幕上增大，在较小的屏幕上缩小

您可以自己计算并进行调整，但自动布局系统的全部意义在于您不必费心——让视图为您完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:22:37.377

也许，您想使用两个故事板，一个用于 iPhone 3.5"，另一个用于 iPhone 4"。通过将此代码放在您的应用程序委托上，您将能够使这些故事板工作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0){
            //move to your iphone5 storyboard
            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"iphoneFiveStoryboard" bundle:[NSBundle mainBundle]];
            UIViewController *vc =[storyboard instantiateInitialViewController];

            self.window.rootViewController = vc;
            [self.window makeKeyAndVisible];
        }
        else{
            //move to your iphone4s storyboard
            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
            UIViewController *vc =[storyboard instantiateInitialViewController];

            self.window.rootViewController = vc;
            [self.window makeKeyAndVisible];
        }}
    // Override point for customization after application launch.
    return YES;
} 
```

现在您只需要转到：文件 -> 新建... -> 文件 -> 用户界面 -> 故事板

并将情节提要命名为“iphoneFiveStoryboard”...

现在您可以用 4" 视图重新制作所有故事板！

希望你能理解，我试图解释我能做的最好的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T13:29:36.157

使用`self.view.frame.size.height`，您可能需要将其除以某个值以匹配我注意到的宽度比例 320:280

```
-(IBAction)settingsButtonChanged:(UIButton *)sender
{
    UIImageView *settingsImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"settingsViewImage.png"]];
    settingsImage.frame = CGRectMake(25.0, 40.0, 280.0, self.view.frame.size.height);
    settingsView.backgroundColor = [UIColor clearColor];
    [settingsView addSubview:settingsImage];

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T13:32:00.383

您必须检查在代码行之上`iPhone 4`或`iPhone 5`之下运行的应用程序是否可以帮助您：-

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
        if (screenBounds.size.height == 568)
        {
            // code for 4-inch screen
            //for eg:-
            [self.view setFrame:CGRectMake(0, 0, 320, 568)];
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-25T22:13:06.307

你可以试试这个-

```
-(IBAction)settingsButtonChanged:(UIButton *)sender
{
    UIImageView *settingsImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"settingsViewImage.png"]];
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    int height = 0;
    if (screenBounds.size.height == 568) {
        // Height for iPhone 5 screen
        height = 370+ 88; // it may be your desired height
    } else {
        // Height for iPhone 4 screen
       height = 370;
    }
    settingsImage.frame = CGRectMake(25.0, 40.0, 280.0, height);
    settingsView.frame = CGRectMake(0.0, 20.0, 280.0, height);
    settingsView.backgroundColor = [UIColor clearColor];
    [settingsView addSubview:settingsImage];

} 
```

# sql - 如何在选择语句中为子查询添加列别名？

> ID：14875925
> 
> 赞同：5
> 
> 时间：2013-02-14T13:27:55.373
> 
> 标签：sql, oracle, select, alias

我正在尝试运行在 select 语句中使用子查询的查询。
这有效：

```
select   
(select sysdate from dual),   
(select 'municipality' from dual),  
(select count(*) from municipality)  
from dual; 
```

但是生成的列名很难看，因此我想添加列别名。

我正在尝试运行以下查询：

```
select   
(select sysdate from dual) as sysdate,   
(select 'municipality' from dual) as tablename,  
(select count(*) from municipality) as count  
from dual; 
```

这失败了 ORA 00923: From keyword not found where expected 错误。不知何故，我错过了一些东西。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:29:01.527

尝试用双引号括起来，

```
select
   (select sysdate from dual) as "sysdate",
   (select 'municipality' from dual) as "tablename",
   (select count(*) from municipality) as "count"
from dual; 
```

`SysDate`是保留关键字。虽然，`COUNT`是一个聚合函数，但它是允许使用的。

*   [Oracle 保留关键字](http://docs.oracle.com/cd/B19306_01/em.102/b40103/app_oracle_reserved_words.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:20:57.543

您在代码中遇到的唯一错误是使用关键字 sysdate 和 count 作为别名，这是不行的……使用 AS 也是可选的。这按预期工作：

```
select   
 (select sysdate from dual)  s_date,            -- NOT sysdate
 (select 'municipality' from dual)  tablename,  
 (select count(*) from dual) as cnt             -- NOT count
 from dual; 
```

使用计数是可以的，但在现实世界中这是不可取的，专业人士不会使用关键字。

# scala - 传入单位的scala foreach

> ID：14875930
> 
> 赞同：1
> 
> 时间：2013-02-14T13:28:18.693
> 
> 标签：scala, foreach

我是 Scala 的初学者，请原谅我的无知。

这是一个代码片段，其行为有点难以理解。

`def times(n: Int) = (body: Unit) => (0 until n) foreach(n=>body)`

`times(5){ println("index") }`

输出是：索引只打印一次。

然而，这个：

`def times(n: Int) = (0 until n) foreach(n=>println("index"))`

打印 10 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:44:31.293

```
def times(n: Int) = (body: Unit) => (0 until n) foreach(n=>body) 
```

方法`times`创建接受`Unit`和返回的函数`Unit`。

`times(5)`接受`Unit`，因此`times(5){ println("index") }`将其参数评估`println("index")`为`Unit`。

要评估`println("index")` `n`时间，您必须将其作为函数传递，如下所示：

```
def times(n: Int) = (body: Unit => Unit) => (0 until n) foreach(_ => body()) 
```

用法：

```
times(5){ _ => println("index") } 
```

使用`parameter groups`and可能会更好`pass by name`：

```
def times(n: Int)(body: => Unit) { (0 until n) foreach( _ => body) } 
```

用法：

```
scala> times(5){ println("index") }
index
index
index
index
index 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:40:04.087

您的第二个功能应该按预期工作。

但是，您的第一个功能输入错误，您需要它是正确的：

```
def times(n: Int)(body: => Unit) = (0 until n) foreach(n=>body) 
```

否则语义如下。（你的功能：）

```
def times(n: Int) = (body: Unit) => (0 until n) foreach(n=>body) 
```

如果您调用它将`times(n)`返回一个作为参数并运行`function``Unit``(0 until n) foreach(n => body)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:10:14.627

起初有一种趋势认为`Unit`是“一段代码”的意思，这根本不是真的。`Unit`有一个值：`()`. 而已。

所以`body`当你做的*时候价值不会*`times(5){ println("index") }`，它就会。如果你做五次，五次什么都不会发生。*`{ println("index") }``()``()`*

 *发生的事情`{ println("index") }`是执行，打印某些内容，然后`Unit`返回并分配给`body`. 像这样：

```
scala> val body = { println("index") }
index
body: Unit = ()

scala> (0 until 5) foreach {n => body}

scala> 
```

您可以使用按名称参数做您想做的事情，在这种情况下，该参数将表示*一个计算结果为 的表达式`Unit`*，而不仅仅是`Unit`。例如：

```
def times(n: Int)(body: => Unit) = (0 until n) foreach(n=>body) 
```

参数类型的`=>`前缀意味着参数是按名称传递的。它*不会更改*类型，它会更改[评估策略](http://en.wikipedia.org/wiki/Evaluation_strategy)（有关更多信息，请参见链接）。*

# linq - 展平表数据

> ID：14875935
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:28:40.403
> 
> 标签：linq, tsql

我的环境是 VS2012，C#

主表：`Journal (JournalId int)`

明细表：`JournalLine (JournalId int, AccountId int, Debit money, Credit money)`

每个日记帐记录有两个 JournalLine 记录，一个用于借方，另一个用于贷方。

我的报告需要以下数据：

`JournalId, AccountId (Debit > 0), AccountId (Credit > 0)`对于每个日记帐记录。

我想要一份借方账户和相应的贷方账户的清单。

有没有办法使用 LINQ 或 TSQL 来获取这些数据？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:34:20.820

您可以使用 Linq group join 来获取按期刊分组的行

```
var query = from j in db.Journal
            join l in db.JournalLine 
                 on j.JournalId equals l.JournalId into lines
            select new {
                j.JournalId,
                DebitAccount = lines.Single(x => x.Debit > 0).AccountId,
                CreditAccount = lines.Single(x => x.Credit > 0).AccountId
            }; 
```

# git - GIT GUI 并使用 --no-ff 选项合并

> ID：14875938
> 
> 赞同：4
> 
> 时间：2013-02-14T13:28:52.737
> 
> 标签：git, branching-and-merging, git-merge, git-gui

我从去年开始使用 GIT，它真的很有帮助......

我读了很多关于使用分支等的最佳方法...我实际上只有一个问题，我主要使用 GIT GUI

```
git-gui version 0.17.GITGUI
git version 1.8.0.msysgit.0

Tcl/Tk version 8.5.11 
```

而且我从未找到与该选项进行简单合并的`--no-ff`选项

有没有办法使用这个参数？或在 GIT GUI 中将其设置为默认值？

参考： http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T14:55:11.717

我在 GUI 中找不到选项，但您可以将其设置为默认行为。打开终端窗口并将[选项](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)[设置`merge.ff``false`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)为：

```
$ git config --global merge.ff false 
```

如果您只想为特定的 repo 设置它，请删除该`--global`标志。

# php - 与 ob_start() 混淆

> ID：14875942
> 
> 赞同：0
> 
> 时间：2013-02-14T13:29:05.237
> 
> 标签：php

所以我有一个文件，它从另一个文件加载内容。这两个文件都需要一个连接到db的文件，顶部的连接文件有ob_start()，下面有session_start()，很好。当我查看父文件（从另一个文件加载内容（使用 JS））时，我得到：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/xxxx/public_html/child_file.page.php:1）在 /home/xxxx/public_html/connection .inc.php 在第 3 行

所以然后在子文件中我把 ob_start() 放在顶部，但仍然有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:41:25.980

如果**session_start()**在所有代码之前并且**include**或**require**：

**1) 在< ?php**之前检查空格和换行符

 **2) 检查页面 Unicode 像：**UTF-8** 你的页面必须像 ISO-8859-1

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T13:31:28.020

`session_start();`
需要在任何其他可能输出到屏幕的东西之前。因此，例如在这种情况下，您可以输入：

```
session_start();
ob_start(); 
```**

# ios - iPhone iOS 4 上的 Google Webfonts

> ID：14875946
> 
> 赞同：1
> 
> 时间：2013-02-14T13:29:23.753
> 
> 标签：ios, font-face

我已经使用 Google Webfonts 有一段时间了。我知道它应该与 iPhone、iPod 等上的 iOS4 及更高版本兼容。

我最近查看了我的第二代 iPod 上运行 4.2.1 版的几个站点（就我可以在第二代 iPod 上升级它而言）并且 Google Webfonts 无法正常工作。现在我知道这些以前在设置网站之前检查我的 iPod 时有效。其他不使用 Google Webfonts 的 @font-face 字体在这些网站上运行良好。

我使用如下标准链接标签：

```
<link href='http://fonts.googleapis.com/css?family=Alex+Brush' rel='stylesheet' type='text/css' /> 
```

我检查了第 4 代 iPod，所有字体都显示正常，所以它必须是 iOS 版本

为什么 Google Webfonts 突然停止在 iOS 4 上运行？我怎样才能让它再次工作。或者我需要能够检测 iOS 是否为 < iOS4，这样我就可以使用 @font-face 为 truetype 字体提供单独的 CSS，而不是依赖于 Google Webfonts。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:40:56.177

我只能确认我的网站也停止显示来自 Google 的 webfonts，但仍然显示来自 Myfonts.com 的 webfonts，在装有 iOS 4.2.1 的旧 iPhone 3G 上。Myfonts.com 的 Webfonts 与 HTML、CSS、JS 等一起存储在我的服务器上，而 Google Webfonts 像往常一样从 Google 服务器动态加载。作为旁注，基于 Android 2.3 的手机仍能正确显示 Google webfont。

# ios - iOS在UITableView中传递行标签

> ID：14875950
> 
> 赞同：0
> 
> 时间：2013-02-14T13:29:47.307
> 
> 标签：ios, arrays, uitableview, segue

当您点击该行辅助按钮时，我试图传递表格行的标签，因为它与 plist 中数组的键匹配，因此下一页知道要从哪个数组加载设置。

这是我目前正在使用的代码`performSegueWithIdentifier`：

```
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
SettingsViewController *destViewController = segue.destinationViewController;
destViewController.nameViewer = [viewerKeys objectAtIndex:indexPath.row]; 
```

不幸的是，每次它选择第一行时......我知道，因为使用`NSLog`它总是给出相同的输出（第一行的名称）。有任何想法吗？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:38:28.557

问题是，当您点击单元格的辅助按钮时，单元格本身不会被选中（这是正常行为，因为辅助按钮会触发不同的委托方法），所以您总是`0`.

但是，您可以做的是在`tableView:accessoryButtonTappedForRowWithIndexPath:`委托方法中使用选定的索引设置一个 ivar，并将该 ivar 传递给您的目标控制器。我希望这是有道理的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:46:49.963

使用`-prepareForSegue:sender:`代替`-prepareForSegue:`并使用以下内容：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSIndexPath *indexPath = [[[segue sourceViewController] tableView] indexPathForCell:sender];

    SettingsViewController *destViewController = segue.destinationViewController;

    destViewController.nameViewer = [viewerKeys objectAtIndex:indexPath.row];
} 
```

# java - Java比较器问题

> ID：14875951
> 
> 赞同：0
> 
> 时间：2013-02-14T13:29:54.590
> 
> 标签：java, priority-queue

我正在使用结果集从 MySQL 数据库表中获取所有信息，并将所有值添加到数组中

```
public void populateQueueFromDB() {
        // create priority queue
        try {
            String url = "jdbc:mysql://localhost:3306/project";
            Connection conn = DriverManager.getConnection(url, "root", "nbuser");

            PreparedStatement stmt = conn.prepareStatement("SELECT user_id,s_date,e_date,d_date,department,projectname,projectapplication,priority,cores,disk_space,analysis FROM booking");
            ResultSet rs;
            rs = stmt.executeQuery();

            //List<JobRequest> jobList = new ArrayList<JobRequest>();

            while (rs.next()) {
                JobRequest job = new JobRequest();
                User user = new User();
                user.setUserID(rs.getString("user_id"));
                job.setUserID(user.getUserID()); // changes the /user id to the job.setuser id so can call for my queue print.
                job.setStartDate(rs.getString("s_date"));
                job.setEndDate(rs.getString("e_date"));
                job.setDeadDate(rs.getString("d_date"));
                job.setDepartment(rs.getString("department"));
                job.setProjectName(rs.getString("projectname"));
                job.setProjectApplication(rs.getString("projectapplication"));
                job.setPriority(rs.getInt("priority"));
                job.setCores(rs.getInt("cores"));
                job.setDiskSpace(rs.getInt("disk_space"));
                job.setAnalysis(rs.getString("analysis"));

                schedulerPriorityQueue.addJob( job );

            }
            schedulerPriorityQueue.printQueue();

            conn.close();

        } catch (Exception e) {
            System.err.println("Got an exception! ");
            System.err.println(e.getMessage());
        }

    } 
```

从这里我开始调用我的比较器来排序数据，这取决于优先级是 1、2、3，然后对队列进行排序。其他一些代码命名等，但本质上它会将我发送到比较器

```
public class JobQueueComparator implements Comparator<JobRequest> {

    @Override
    public int compare(JobRequest object1, JobRequest object2) {
        if(object1.getPriority() < object2.getPriority()){
            return 1;
        } else {
            return -1;
        }
    }

} 
```

但是我从比较器获得的输出是优先级为 3、1 和 2。我已经从在线示例中对此进行了修改，但我不明白我所看到的比较器示例的返回值。

我将如何更改该比较器以对我的优先级进行排序，1 是最重要的，3 是最不重要的。我确保在将所有结果集添加到数组后打印输出，所以我知道它正在工作，因为它改变了我的排序，只是不知道如何按我想要的方式排序。

谢谢

编辑：调度程序优先队列

```
public class Queue {

    private Comparator<JobRequest> comparator = new JobQueueComparator(); //calls my comparator
    private PriorityQueue< JobRequest> scheduledJobs = new PriorityQueue<JobRequest>(100, comparator);

    public void addJob(JobRequest job) {
        // now add job to priority queue
        scheduledJobs.add(job); // add jobs from the resultset into queue
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:36:53.460

让自己轻松使用和使用`Integer`它的`compareTo`方法。

您的比较器方法如下所示

```
 @Override
public int compare(JobRequest object1, JobRequest object2) {
    Integer iO1 = Integer.valueOf(object1.getPriority());
    Integer iO2 = Integer.valueOf(object2.getPriority());
    return -(i01.compareTo(iO2));
} 
```

假设`getPriority`返回一个`int`或`String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:37:00.203

只需交换比较方法上的符号即可。这将颠倒顺序。

```
public int compare(JobRequest object1, JobRequest object2) {
    if(object1.getPriority() < object2.getPriority()){
        return -1;
    } else {
        return +1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:37:16.500

如果两个对象相等，您应该从比较器返回 0，如果对象 1 < 对象 2，则返回小于 0 的整数，如果对象 1 > 对象 2，则返回大于 0 的整数。目前 JobQueueComparator 永远不会返回 0。请尝试以下操作：

```
public class JobQueueComparator implements Comparator<JobRequest> {
    @Override
    public int compare(JobRequest object1, JobRequest object2) {
        return object1.getPriority() - object2.getPriority();
    }
} 
```

有关更多详细信息，请参阅[比较器文档](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:40:02.467

您错过了优先级相等的情况。我会使用这样的东西：

```
public class JobQueueComparator implements Comparator<JobRequest> {

@Override
public int compare(JobRequest object1, JobRequest object2) {
        return -(object1.getPriority() - object2.getPriority());
 }
} 
```

如果您考虑这样的优先级顺序，这将起作用：1、2、3。

# java - 尝试使用 JAXB 解组 EDMX 时出错

> ID：14875956
> 
> 赞同：1
> 
> 时间：2013-02-14T13:30:24.623
> 
> 标签：java, jaxb

我是 JAXB 的新手，我正在尝试取消编组某个 XML。
XML 是：

```
<edmx:Edmx xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx">
<edmx:DataServices xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" m:DataServiceVersion="3.0">
    <Schema xmlns:cg="http://schemas.microsoft.com/ado/2006/04/codegeneration" xmlns:sap="http://www.sap.com/Protocols/SAPData" xmlns="http://schemas.microsoft.com/ado/2009/11/edm" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" Namespace="smallApp">         
    </Schema>
</edmx:DataServices> 
```

我已经建立了一个看起来像这样的类模式：

Edmx.java

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "edmx:Edmx")
public class Edmx {

@XmlElement(name = "edmx:DataServices")
private DataService dataService;

public DataService getDataService() {
    return dataService;
}
} 
```

数据服务.java

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "edmx:DataServices")
public class DataService {

@XmlElement(name = "Schema")
private Schema schema;

public Schema getSchema() {
    return schema;
}
 } 
```

和 Schema.java

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "Schema")
public class Schema {

} 
```

然后，我构建了一个示例方法，它使用 Edmx.class 解组上述 XML，如下所示：

```
public class Parser {

public static void main(String[] args) {
    File fXmlFile = new File("somePathToXML");
    try {
        InputStream inputStream = new FileInputStream(fXmlFile);
        Edmx edmx = load(Edmx.class, inputStream);

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

/**
 * loads an object from an xml file
 * @param <T>
 * @param type
 * @param file
 * @return
 */
public static <T> T load(Class<? extends T> type, InputStream stream) {
    try {

        if(stream.available() == 0) {
            return null;
        }

        JAXBContext context = JAXBContext.newInstance(type);
        Unmarshaller um = context.createUnmarshaller();
        @SuppressWarnings("unchecked")
        T obj = (T) um.unmarshal(stream);
        return obj;
    } catch (JAXBException jaxbe) {
        System.out.println("failed to read from InputStream");
        jaxbe.printStackTrace();
        return null;
    } catch (IOException ioe) {
        System.out.println("InputStream is empty");
        return null;
    }

}
 } 
```

我不断收到的错误是：

 ****```
javax.xml.bind.UnmarshalException: unexpected element (uri:"http://schemas.microsoft.com/ado/2007/06/edmx", local:"Edmx"). Expected elements are <{}Schema>,<{}edmx:DataServices>,<{}edmx:Edmx>
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(Unknown Source)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(Unknown Source)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source) 
```**  **这很奇怪，因为我没有它不期望的元素:(

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:34:14.043

您可以执行以下操作：

**包信息**

您可以使用包级别`@XmlSchema`注释来指定模型的命名空间限定。下面我已经指定，除非另有说明，否则所有元素都将由`http://schemas.microsoft.com/ado/2007/06/edmx`命名空间限定。我还指定该命名空间的首选前缀是 edmx，它`http://schemas.microsoft.com/ado/2007/06/edmx`应该是默认命名空间。

```
@XmlSchema(
        namespace="http://schemas.microsoft.com/ado/2007/06/edmx",
        elementFormDefault=XmlNsForm.QUALIFIED,
        xmlns={
                @XmlNs(prefix="edmx", namespaceURI="http://schemas.microsoft.com/ado/2007/06/edmx"),
                @XmlNs(prefix="", namespaceURI="http://schemas.microsoft.com/ado/2009/11/edm")
        }
)
@XmlAccessorType(XmlAccessType.FIELD)
package forum14875956;

import javax.xml.bind.annotation.*; 
```

**edmx**

现在不需要在 `Edmx`类上指定命名空间信息。

```
package forum14875956;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "Edmx")
public class Edmx {

    @XmlElement(name = "DataServices")
    private DataService dataService;

    public DataService getDataService() {
        return dataService;
    }

} 
```

**数据服务**

在`DataService`类上，我们将在`schema`属性的映射上指定一个命名空间。

```
package forum14875956;

import javax.xml.bind.annotation.*;

public class DataService {

    @XmlElement(name = "Schema", namespace = "http://schemas.microsoft.com/ado/2009/11/edm")
    private Schema schema;

    public Schema getSchema() {
        return schema;
    }

} 
```

**架构**

`Schema`您可以使用`@XmlType`注解覆盖类属性的命名空间限定。

```
package forum14875956;

import javax.xml.bind.annotation.XmlType;

@XmlType(namespace="http://schemas.microsoft.com/ado/2009/11/edm")
public class Schema {

} 
```

**演示**

```
package forum14875956;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Edmx.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14875956/input.xml");
        Edmx edmx = (Edmx) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(edmx, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<edmx:Edmx xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
    <edmx:DataServices>
        <Schema/>
    </edmx:DataServices>
</edmx:Edmx> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)****

# string - iOS比较数组中的NSDictionaries

> ID：14875962
> 
> 赞同：0
> 
> 时间：2013-02-14T13:30:35.267
> 
> 标签：string, ios6, character-encoding, nsdictionary

我正在尝试使用 NSDictionaries 在数组中查找 NSDictionary 的索引，但是两者的编码存在问题。

数组 a：从网络服务器下载（作为 csv 字符串），然后转换为字典数组。

数组 b：从 plist 加载 [NSArray arrayWithContentsOfFile]。

字典和数组看起来不错，但 [indexOfObject] 没有给我任何结果。

通过将数据输出到控制台，我发现德语变音符号的编码方式不同。

数组a：将字符«ä»显示为\U00c3\U00a4 数组b：将字符«ä»显示为\U00e4

所以我想这就是函数返回 NSNotFound 的原因。

我试图以许多不同的方式投射字符串，但没有结果......

有趣的是，该功能曾经工作......

有任何想法吗？

[编辑]

好吧，事实证明我没有正确处理来自服务器的数据。

我不得不改变这个

```
NSString *dataStr=[[NSString alloc] initWithData:self.receivedData encoding:NSASCIIStringEncoding]; 
```

进入这个：

```
NSString *dataStr=[[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding]; 
```

# c# - 为什么我的主页失去焦点？

> ID：14875964
> 
> 赞同：3
> 
> 时间：2013-02-14T13:30:40.570
> 
> 标签：c#, xaml, windows-8, windows-runtime, focus

我有 Page，当我点击它的空白部分时它会失去焦点。我尝试将边框作为背景，但是当我点击它时它也会失去焦点。为什么会这样？

我真正需要做的是在用户打开 AppBar 或 Settings Charm 时禁用 WebView

一些演示问题的示例代码（观看输出窗口）：

XAML：

```
<Page
    x:Name="Pagey"
    x:Class="FocusTest.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FocusTest"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" GotFocus="Focus" LostFocus="LoseFocus">

    <Grid x:Name="RootGrid" Background="{StaticResource ApplicationPageBackgroundThemeBrush}" GotFocus="Focus" LostFocus="LoseFocus">
        <StackPanel>
            <Button x:Name="Clicky" Content="Clicky" GotFocus="Focus" LostFocus="LoseFocus" HorizontalAlignment="Center"></Button>
            <Border x:Name="Border" Width="100" Height="100" Background="Red" GotFocus="Focus" LostFocus="LoseFocus"></Border>
            <Button x:Name="Clicky2" Content="Clicky2" GotFocus="Focus" LostFocus="LoseFocus" HorizontalAlignment="Center"></Button>
        </StackPanel>
    </Grid>
</Page> 
```

后面的代码：

```
using System.Diagnostics;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace FocusTest
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        void Focus(object sender, RoutedEventArgs e)
        {
            Debug.WriteLine("Focus({0})", (sender as FrameworkElement).Name);
        }

        void LoseFocus(object sender, RoutedEventArgs e)
        {
            Debug.WriteLine("LoseFocus({0})", (sender as FrameworkElement).Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:54:01.137

看起来你`Border`在里面`RootGrid`所以每次点击`Border's tap event`都会发生并`LostFocus`触发事件。

更好的是，您可以`LostFocus`在相同的`RootGrid`. 然后它可能工作正常。
请尝试一下。谢谢。

# android - “aapt 编译资源的功能”是什么意思？

> ID：14875971
> 
> 赞同：2
> 
> 时间：2013-02-14T13:31:14.653
> 
> 标签：android, adt, aapt

最近发布了新版本的[eclipse adt 插件。](http://developer.android.com/tools/sdk/eclipse-adt.html)

根据[Tor Norbye 在 Google+ 上的帖子，](https://plus.google.com/u/0/116539451797396019960/posts/QZ1Cahr8q92)它有一个

> 新的 aapt 功能来编译资源。

这是什么意思？现在可以将资源打包在jar中吗？它对图书馆项目有什么改变吗？有人能解释一下这个新的 aapt 功能是做什么的吗？

我在[ADT 更改日志](http://developer.android.com/tools/sdk/tools-notes.html)和[Android 工具网站](http://tools.android.com/recent)上进行了搜索，但没有找到任何解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:50:00.330

发表这一行是一个小错误。（这是来自内部变更日志，被错误地复制到 Tor 的帖子中）。

此功能实际上尚未发布（它将成为平台工具组件的下一次更新的一部分）。

它也不是您不必担心的面向用户的功能。

这是 aapt 中处理单个 png 的一个新选项（类似于当前的“aapt crunch ...”命令，它对 res 文件夹中找到的所有 png 文件执行相同的操作）。

它被基于 Gradle 的新构建系统使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:34:38.323

aapt（Android 资产打包工具）编译资源。在 Google+ 上的评论中，Tor Norbye 没有直接知情。这可能是内部修订，因为外部功能集看起来很相似。

# triggers - 删除（或不插入）触发器中的新行

> ID：14875979
> 
> 赞同：0
> 
> 时间：2013-02-14T13:31:47.537
> 
> 标签：triggers, insert, db2

我使用 DB2 Express-C。我在一个表上有 ON INSERT 触发器，我将新行插入到另一个表中。有没有办法不将新行插入到定义触发器的表中？

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:20:06.857

Take a look at [create trigger](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp) and the INSTEAD OF option:

> Specifies that the associated triggered action replaces the action against the subject view. Only one INSTEAD OF trigger is allowed for each kind of operation on a given subject view (SQLSTATE 428FP).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:54:13.333

通常可以通过评估特殊寄存器（例如`CURRENT USER`）是否具有特定值来完成类似的操作。

```
create trigger trigger1
    after insert on schema.table
    referencing new as n
    for each row
    when (CURRENT USER <> 'NAMSARAY')
       insert into schema.tablecopy values (n.c1, n.c2, ...); 
```

如果您使用的是 DB2 9.7 或更高版本，您还可以考虑定义一个变量并使用该变量来控制触发器是否将执行其操作。

```
create variable schema.var1 smallint default 0; 
```

然后您可以在触发器中检查此变量的值。除非应用程序已将变量显式设置为预定值（以下示例中的 -9999），否则触发器将触发：

```
create trigger trigger2
    after insert on schema.table
    referencing new as n
    for each row
    when (schema.var1 <> -9999)
       insert into schema.tablecopy values (n.c1, n.c2, ...); 
```

# jquery - 仅加载与特定弹出窗口相关的 jquery

> ID：14875984
> 
> 赞同：0
> 
> 时间：2013-02-14T13:31:54.470
> 
> 标签：jquery, asp.net-mvc-2, jquery-ui-dialog

呼叫弹出按钮：

```
<div class="buttons">
    <button type="button" data-for="cleaning-info" class="actionButton dialog-link">
            Cleaning</button>
     <button type="button" data-for="notes-info" class="actionButton dialog-link">
            Notes</button>
 </div> 
```

Jquery UI 弹出窗口 1：

```
<div class="pet-profile dialog" id="cleaning-info" data-width="600" data-title="Pet Sitter Cleaning">
        <%  using (Html.BeginAbsoluteRouteForm("PetDetail", new { controller = "PetSitters", action = "SavePetSitterCleaningRecords", ownerKey = Model.Owner.Key, petKey = Model.Key }, FormMethod.Post, new { id = "addPetSitterCleaning" }))
            { %>

          <%: Html.CompleteEditorFor(m => m.PetSitterCleaningRecord.WhereIsTheScoop)%>
           <button type="submit" class="actionButton default">
                    Save</button>

        <%} %>
    </div> 
```

Jquery UI 弹出窗口 2：

```
<div class="pet-profile dialog" id="notes-info" data-width="550" data-title="Pet Sitter Notes">
    <%  using (Html.BeginAbsoluteRouteForm("PetDetail", new { controller = "PetSitters", action = "SavePetSitterNotes", ownerKey = Model.Owner.Key, petKey = Model.Key }, FormMethod.Post, new { id = "addPetSitterNotes" }))
        { %>

        <%: Html.CompleteEditorFor(m => m.PetSitterNote.Note1)%>
        <button type="submit" class="actionButton default">
                Save</button>

    <%} %>
</div> 
```

弹出窗口 1 和 2 的 Jquery 代码：

```
//popup 1
var dialogPetSitterCleaningInfo = $('#cleaning-info');

//save button
var petSitterCleaningSave = dialogPetSitterCleaningInfo.find($('.actionButton.default[type=submit]'));
var petSitterCleaningForm = dialogPetSitterCleaningInfo.find($("#addPetSitterCleaning"));

 //disable 
  petSitterCleaningForm.submit(function () {
  petSitterCleaningSave.attr('disabled', 'disabled');
  petSitterCleaningSave.addClass('disabled');
 });

//popup 2
var dialogPetSitterNotesInfo = $('#notes-info');

 //save button
 var petSitterNotesSave = dialogPetSitterNotesInfo.find($('.actionButton.default[type=submit]'));
 var petSitterNotesForm = dialogPetSitterNotesInfo.find($("#addPetSitterNotes"));

 //disable 
 petSitterNotesForm.submit(function () {
 petSitterNotesSave.attr('disabled', 'disabled');
 petSitterNotesSave.addClass('disabled');
 }); 
```

以上所有代码都在同一个文件中`CustomersHomeModal.aspx`

用户界面如下：

![在此处输入图像描述](../Images/097cc58f6d8f64adf0e55822004e2ac4.png)

**我的问题：**

按下相关弹出窗口的按钮时，如何仅调用相关的弹出 jquery 代码。目前首先运行自己加载所有jquery代码（与两个弹出窗口相关）。我需要避免这种情况。

如何做到这一点（简单的例子非常感谢）？