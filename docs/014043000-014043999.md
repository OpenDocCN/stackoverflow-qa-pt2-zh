# StackOverflow 问答 14043000-14043999

# asp.net - WebApi 和 MVC 控制器

> ID：14043005
> 
> 赞同：1
> 
> 时间：2012-12-26T16:02:37.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我计划在我的应用程序中同时具有 MVC 和 WebAPI 功能。将有一个使用简单的 MVC CRUD 控制器实现的管理站点，并且我还需要从远程客户端调用 RESTful API，并且将来可能从单页应用程序调用。我不太喜欢编写非常相似的类，它们仅在返回类型上有所不同——MVC 控制器返回包装在 View 中的数据，而 WebAPI 控制器只返回未包装的数据。在不重复太多代码的情况下实现我的目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:16:20.717

在我看来，如果你使用 WebAPI，你的标准 MVC 控制器不应该用于 CRUD。你的 API 控制器应该处理 CRUD 操作，你的 MVC 控制器应该返回视图。

通过这条路线，它为您提供了几个不同的选项，用于在视图中显示数据的方式：

**传统的**

如果您想坚持使用更“传统”的路线，您可以从 MVC 控制器调用 WebAPI 控制器服务器端，水合模型对象并返回强类型视图。您可以通过使用[HttpClient](http://msdn.microsoft.com/en-us/library/hh158944.aspx)类或[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类来进行 API 调用并反序列化响应来做到这一点。

**单页**

如果您想尝试更“现代”的路线，您可以尝试 danludwig 的建议并构建更多的单页应用程序。在这种情况下，您的 MVC 控制器将只返回一个 HTML + JavaScript 视图，该视图依赖于客户端框架来进行 API 调用和更新 DOM。[require](http://requirejs.org/) + [bone](http://kmalakoff.github.com/knockback/) + [knockback](http://backbonejs.org/) / [knockout](http://knockoutjs.com/)堆栈是一个很好的起点，但它确实有一些学习曲线。

无论哪种方式，你真的应该只在一个地方有 CRUD 逻辑，我相信这属于 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:18:43.710

一种方法是让您的 MVC 控制器不返回强类型视图模型。相反，他们可以返回普通的 HTML + javascript，可以使用诸如骨干网或淘汰赛之类的东西来调用您的 Api 操作方法并填充 DOM。

# c# - 递归组件列表后文本框属性变回

> ID：14043007
> 
> 赞同：1
> 
> 时间：2012-12-26T16:02:40.103
> 
> 标签：c#, winforms, inheritance, recursion, components

我有一个带有控件的 TabControl 表单。

在实例化表单之后，我调用一个函数来准备它来接收值。

该函数将 Text 属性从“0”更改为某个值。几行之后，我调用一个继承函数，递归列出表单上的所有文本框并添加到对象列表

当递归函数结束时，我查看列表，并且我的文本框具有先前的值。

* * *

附加信息

```
 // Textbox.text has "0"

    textBox.Text = "123";

 //Other components change

PrepareForm(); //inherited function that enumerates all TextBoxes (and other components) on that form in a list 
```

在 PrepareForm() 内部：

```
// Value is "123"
List<Control> lstControls = new List<Control>();

foreach (Control c in this.Controls)
{
    ListControls(lstControls, c);
} 

// The textbox on the list has the old value ("0") <- Edited 
```

* * *

```
protected void ListControls(List<Control> Controls, Control control)
    {
        if (control.HasChildren)
        {
            foreach (Control c in control.Controls)
            {
                ListControls(Controls, c);
            }
        }
 } 
```

编辑：表单调用 InitializeComponent() 并用“0”填充文本框，然后 form_load 返回。我将值更改为“123”并调用PrepareForm（），调用后文本框值为“123”，然后我调用recursive函数，当该递归函数返回时，值变回“0”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:08:01.453

`TabPage`我已经看到在为尚未显示的控件上存在的控件设置值时发生这种情况。换句话说，因为`TabPage`还没有被看到，这条线......

```
textBox.Text = "123"; 
```

...不会失败，但它也没有做任何事情。我可以解决这个问题的唯一方法是将值存储在某种缓存变量中，然后使用控件`OnVisibleChanged`并在那里设置值。

这是由`TabControl`.

# android - 在列表视图中显示来自单个数据库行的数据

> ID：14043017
> 
> 赞同：0
> 
> 时间：2012-12-26T16:03:28.247
> 
> 标签：android, sqlite, listview

我有一个包含多个条目的数据库表，见下文。这些行首先使用 SimpleCursorAdapter 显示在列表视图中，显示的值是竞争团队。选择一个项目后，我想将该行中的所有信息显示为详细显示所有信息，我该怎么做？

**编辑**：问题不在于如何开始活动等。这只是一个背景描述，以了解我想要做什么。问题是如何在列表视图中显示数据库中的一行！

数据库表图片：

![数据库表](../Images/40d44c7d0fcff6f29835854e4670f1d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:42:12.517

好的，与台式机/笔记本电脑的屏幕尺寸相比，Android 手机的屏幕尺寸要小得多。三星 Galaxy S III 约为 4.8 英寸，而笔记本电脑约为 13 英寸。因此，手机的 UI/UX 必须以不同的方式考虑，因此您甚至没有找到您正在寻找的单一实现。您将不得不重新考虑您的 UI。有一些关于 Android/手机的 UI/UX 的精彩博客。谷歌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:59:59.643

看到它..
[在列表视图中显示一行（每列一个列表视图条目）](https://stackoverflow.com/questions/10065011/display-a-single-row-in-a-listview-one-listview-entry-for-every-column)
也有帮助..
[http://appfulcrum.com/2011/09/21/listview-example-5-using-sqlite-数据库/](http://appfulcrum.com/2011/09/21/listview-example-5-using-sqlite-database/)

# mysql - 在 IN 中使用 %（如 LIKE）

> ID：14043024
> 
> 赞同：0
> 
> 时间：2012-12-26T16:03:52.620
> 
> 标签：mysql, concat, sql-like

> **可能重复：**
> [同时使用 SQL LIKE 和 IN](https://stackoverflow.com/questions/2318126/using-sql-like-and-in-together)

我有如下表。

```
create table tab1 (
    id int, col1 varchar(20), col2 varchar(20),
    col3 varchar(20), col4 varchar(20)
); 
```

我里面有价值观

```
insert into tab1 values
(1,'column011','column012','column013','column014'),
(2,'column021','column022','column023','column024'),
(3,'column031','column032','column033','column034'),
(4,'column041','column042','column043','column044')
; 
```

早些时候我有要求，**查找行，其中任何列都有数据为`column011`**. 所以我执行了下面的查询并得到了我想要的。

```
select * from tab1
WHERE 'column011' in (col1,col2,col3,col4); 
```

我在上面使用过，`CONCAT_WS`因为它是简单的查询。

```
select * from tab1 
where CONCAT_WS('-', col1, col2, col3, col4) LIKE '%column011%'; 
```

现在我得到要求，**查找行，其中任何列包含数据为`mn01`**. 所以我执行了下面的查询并得到了我想要的。

```
select * from tab1 
where CONCAT_WS('-', col1, col2, col3, col4) LIKE '%mn01%'; 
```

但是我想通过使用简单查询（第一个查询）来完成这项工作。所以我尝试了下面。

```
select * from tab1
WHERE '%mn01%' in (col1,col2,col3,col4); 
```

有什么方法可以通过修改上面的查询来做我想做的事吗？（最后查询）

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/b6018/7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:06:44.577

变量呢？

```
set @var = 'mn01';
select * from tab1
WHERE '%' & @var & '%' in (col1,col2,col3,col4); 
```

# batch-file - 批处理文件加载带有注释的ini文件

> ID：14043026
> 
> 赞同：1
> 
> 时间：2012-12-26T16:03:59.317
> 
> 标签：batch-file, comments, ini

我想使用批处理脚本来自动化一些我会给客户的工作。我想给他们一个**带有**注释的 INI 文件（这样他们就明白他们在设置什么）。

示例 INI：

```
[General]
;Set your operating system
OS=Windows7 
```

[从 Windows 批处理文件中读取 ini](https://stackoverflow.com/questions/2866117/read-ini-from-windows-batch-file)是一个好的开始，但对注释没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:43:22.317

FOR 语句具有 EOL 选项，该选项指定一个字符，该字符指示如果该行出现在一行的第一个位置，则该行将被忽略。默认的 EOL 字符是`;`，因此您无需执行任何特殊操作即可忽略以 . 开头的行`;`。

你的要求不是很清楚。我不确定您想对 [General] 之类的部分标签做什么（如果有的话）。我会忽略它们。

您可以使用 FIND 或 FINDSTR 过滤掉任何不包含`=`.

这是一个简单的脚本，它将加载 .ini 文件定义的变量。开头的行`;`是注释。节标题被忽略。

```
@echo off
for /f "delims=" %%A in ('findstr = example.ini') do %%A 
```

# c# - 显示 2 位小数（除非有更多有效数字）

> ID：14043027
> 
> 赞同：5
> 
> 时间：2012-12-26T16:04:00.997
> 
> 标签：c#, asp.net, math, significant-digits

> **可能重复：**
> [将浮点数显示为至少有 1 个小数位的字符串](https://stackoverflow.com/questions/8038994/display-float-as-string-with-at-least-1-decimal-place)

给定以下值：

*   23.50
*   15
*   19.3500
*   31.505
*   45.6670

如何实现以下显示：

*   23.50
*   15.00
*   19.35
*   31.505
*   45.667

我要做的是强制保留 2 位小数，除非有更多“重要”数字，在这种情况下，我也想显示它们。

注意：该值当前存储为`Decimal?`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:14:03.760

采用

```
yourNumber.ToString(".00######") 
```

# selenium-grid - Selenium 网格操作软件

> ID：14043029
> 
> 赞同：0
> 
> 时间：2012-12-26T16:04:10.197
> 
> 标签：selenium-grid

[我正在运行这里](http://www.code.google.com/p/selenium/wiki/Grid2)描述的硒网格。
我有集线器，一个节点在一台虚拟机上运行，​​其他节点在其他虚拟机上运行。

当我进入`http://hub:4444/grid/`控制台时，我可以看到节点和配置，但很多时候我需要：

*   重新启动整个网格
*   重启一个节点
*   添加节点
*   移除一个节点

目前，我通过登录所有节点并手动重新启动/更改来做到这一点。这非常耗时，尤其是当我需要重新启动整个网格时。

我的问题是，是否有一个软件可以让我定义机器，并且我可以快速做出这些更改。诸如网格操作/配置软件之类的东西，或者在这些情况下可以节省时间的一些最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:24:07.840

一年前我们遇到了同样的问题。我之前在 SO 中问过一些类似的问题。[如何维护 Selenium Grid？](https://stackoverflow.com/questions/6250268/how-to-maintain-selenium-grid). Selenium Grid 2.0 提供了一些集成这些功能的方法。

然而，我的组织实施了一些不同的事情。我们为网格维护创建了一些 UI 屏幕。步骤如下：

1.  获取数据库表中所有虚拟机的 IP 地址和 DNS
2.  创建 Hub 和 RC VM 之间的映射
3.  在所有 VM 的启动中放置一个小型 Java 程序，该程序将在 DB 上查找以找出它应该连接到哪个集线器以及它应该用于连接的浏览器配置。
4.  创建用于在集线器之间重新分配 VM 的 UI。来自 UI 的任何分配都将重新启动 VM，进而触发启动脚本。

构建上述解决方案需要一些时间和精力，但值得的是我使用一年后的感受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:52:35.393

您可以对 Amazon AWS 进行研究，也可以对其进行投资。

如果您的 selenium 集线器端口 (4444) 对公众开放，您可以使用 AWS API 启动具有启动批处理文件的实例，以便在主机启动时使用它。`java -jar server.jar -role node -hub http:hub:4444/grid/register`

这也允许您启动 X 数量的实例，比如 1000 个，每台机器运行 1 个测试。您可能会在一小时内运行整个自动化回归套件。

当你得到一个稳固的系统后，你可以通过命令行（或通过运行你的测试）启动，然后随心所欲地关闭实例，而无需任何配置。

**Selenium / Amazon**
[Amazon AWS](http://aws.amazon.com/ec2/pricing/)
[设置您的网格](http://www.theautomatedtester.co.uk/tutorials/selenium/selenium_grid_as_infrastructural_tool.htm)

**附加材料**
[Selenium Grid EC2 AMI](https://aws.amazon.com/amis/selenium-grid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T15:13:30.250

Selenium Grid 是您的测试基础架构，但听起来您需要在它之上有一层来管理此基础架构。

我建议使用 Docker 来管理您的网格。与传统的 VM 设置相比，使用 Docker 有一些巨大的好处：

1.  Docker 容器比 VM 更轻量级。每个节点需要担心的开销更少。

2.  Docker 有许多内置方法可以快速创建网格、放大或缩小节点以及快速重新启动整个网格。

3.  Docker 容器都可以在一台机器上运行，因此有一个中心控制点。不再需要单独访问每个 VM 来进行故障排除或性能维护。

如果你想看一个例子，我最近在我的公司做了这个，并在这里写了：

[http://www.conductor.com/nightlight/running-selenium-grid-using-docker-compose/](http://www.conductor.com/nightlight/running-selenium-grid-using-docker-compose/)

# python - 在 Python 中使用 subprocess.Popen 检查进程的状态

> ID：14043030
> 
> 赞同：12
> 
> 时间：2012-12-26T16:04:14.310
> 
> 标签：python, multiprocessing

如果我在 Python 中调用一个进程，`subprocess.Popen`如下所示：

`myproc = subprocess.Popen(...).communicate()`

查看其状态的正确方法是什么？不是输出到标准输出或标准错误，而是完成后的退出状态（例如，0 表示成功或另一个表示失败）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-26T16:12:29.653

`returncode`确实是答案，但解决方案不需要复杂。

```
process = subprocess.Popen(...)
stdoutdata, stderrdata = process.communicate()
print process.returncode 
```

[Python`subprocess`文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode)中的更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T16:15:00.997

进程在完成执行之前没有返回码。因此，如果它还没有完成，你必须决定你想要做什么：等待它，或者返回一些“我还没有完成”的指示符。

如果要等待，请使用[`communicate`](http://docs.python.org/3/library/subprocess.html#subprocess.Popen.communicate)然后检查`returncode`属性。

如果要检查是否设置了返回码，`None`如果没有设置返回，使用[`Popen.poll()`](http://docs.python.org/3/library/subprocess.html#subprocess.Popen.poll).

> Popen.poll()
> 
> 检查子进程是否已终止。设置并返回 returncode 属性。

（如果进程没有终止，`poll()`返回`None`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:08:14.490

您可能需要`wait`在子流程上调用 a ，然后（一旦完成）检查`returncode`子流程实例字段中的状态。

我有一个调用东西的小程序，也许它会有所帮助......

```
def singleProcessExecuter(command, ** kwargs):
    assert isinstance(command, list), "Expected 'command' parameter to be a list containing the process/arguments to execute. Got %s of type %s instead" % (command, type(command))
    assert len(command) > 0, "Received empty list of parameters"
    retval = {
            "exitCode": -1,
            "stderr": u"",
            "stdout": u"",
            "execTime": datetime.timedelta(0),
            "command": None,
            "pid": None
            }
    retval["command"] = command
    log.info("::singleProcessExecuter > At %s, executing \"%s\"" % (datetime.datetime.now(), " ".join(command)))
    #print("::singleProcessExecuter > At %s, executing \"%s\"" % (datetime.datetime.now(), " ".join(parameter)))
    cwd = kwargs.get("cwd", os.getcwd())
    user = kwargs.get("user", getUid())
    sheel = kwargs.get("shell", False)
    startDatetime = datetime.datetime.now()
    myPopy = subprocess.Popen(command, cwd=cwd, preexec_fn=os.seteuid(getUid(user)), shell=sheel, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
    retval["pid"] = myPopy.pid
    log.debug("::singleProcessExecuter > Command \"%s\" got pid %s" % (" ".join(command), myPopy.pid))
    try:
        retval["stdout"], retval["stderr"] = myPopy.communicate()
        myPopy.wait()
    except OSError, osErr:
        log.debug("::singleProcessExecuter > Got %s %s in myPopy.communicate() when trying get output of command %s. It is probably a bug (more info: http://bugs.python.org/issue1731717)" % (osErr, type(osErr), command[0]))
    except Exception, e:
        log.warn("::singleProcessExecuter > Got %s %s when trying to get stdout/stderr outputs of %s" % (type(e), e, " ".join(command)))
        log.debug("::singleProcessExecuter > Got %s %s when trying to get stdout/stderr outputs of %s. Showing traceback:\n%s" % (type(e), e, " ".join(command), traceback.format_exc()))
        raise
    retval["exitCode"] = myPopy.returncode
    retval["execTime"] = datetime.datetime.now() - startDatetime
    #print(":singleProcessExecuter > This is %s's retval:\n%s" % (" ".join(parameter), retval)) 
    return retval 
```

你可以试试：

```
print "This is the return: %s" % singleProcessExecuter(["ls", "-la"]) 
```

# java - Play Framework 2：在 public/images 中创建图像

> ID：14043037
> 
> 赞同：4
> 
> 时间：2012-12-26T16:05:07.267
> 
> 标签：java, scala, heroku, playframework, playframework-2.0

我创建了一个应用程序来生成条形码图像，该图像使用以下代码将图像存储在 public/images/barcode

```
String dir = Play.application().getFile("public/images/barcode").getAbsolutePath();
String barcode = "46062161";
BarcodePrinter.print(barcode,dir + "/"+barcode+".png"); 

public class BarcodePrinter{ 
  private static void Save_image(Image image,String filePath)
  {
    try 
    {
      BufferedImage bi = (BufferedImage) image;
      File outputfile = new File(filePath);
      ImageIO.write(bi, "png", outputfile);
    } catch (IOException e) 
    {
      Logger.info(e.getMessage());
    }
  }
} 
```

在我的视图文件中

```
@imgpath(barcode:String) = @{
"/assets/images/barcode/"+barcode+".png"
}
<img src="@imgpath(barcode)" /> 
```

此代码仅适用于开发，不适用于 heroku。我从日志中得到了这个错误

```
java.io.FileNotFoundException: /app/target/../public/images/barcode/46062161.png (No such file or directory) 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:13:49.280

无论如何，您可能不想写入 heroku 上的文件系统。这是文档的相关部分：

> 临时文件系统
> 
> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是任何其他 dyno 中的进程都看不到写入的文件，并且在停止或重新启动 dyno 时，写入的任何文件都将被丢弃。

最好的解决方案可能是像 S3 这样的云存储服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:33:16.207

在进入生产模式之前调用 dist 时，Play 会打包所有文件，这意味着路由器不会找到在此之后创建的文件。我还没有尝试过 2.1，这可能已被修复，我记得在邮件列表中看到了一些关于此的内容。我认为您想使用 ExternalAssets 类。

# c# - 正确的电子邮件发送类 asp.net 4.0 IIS 7.5 SMTP

> ID：14043038
> 
> 赞同：1
> 
> 时间：2012-12-26T16:05:16.507
> 
> 标签：c#, asp.net, class, email, smtp

有人有适合 asp.net 4.0 c# 的电子邮件发送类吗？

目前我有类似下面的东西

你会在课堂上提出什么建议？

```
public static string sendEmail(string srEmailAddress, string srFrom, string srSubject, string srBodyHTML, string srBodyText)
{
    using (MailMessage Email = new MailMessage(new MailAddress("noreply@monstermmorpg.com", srFrom), new MailAddress(srEmailAddress)))
    {
        Email.IsBodyHtml = true;
        Email.SubjectEncoding = Encoding.UTF8;
        Email.BodyEncoding = Encoding.UTF8;
        Email.Subject = srSubject;

        using (AlternateView textPart = AlternateView.CreateAlternateViewFromString(srBodyText, Encoding.UTF8, "text/plain"))
        {
            textPart.TransferEncoding = System.Net.Mime.TransferEncoding.QuotedPrintable;
            Email.AlternateViews.Add(textPart);
        }

        using (AlternateView htmlPart = AlternateView.CreateAlternateViewFromString(srBodyHTML, Encoding.UTF8, "text/html"))
        {
            htmlPart.TransferEncoding = System.Net.Mime.TransferEncoding.QuotedPrintable;
            Email.AlternateViews.Add(htmlPart);
        }

        try
        {
            using (SmtpClient smtpClient = new SmtpClient())
            {
                smtpClient.Host = "127.0.0.1";
                smtpClient.Port = 25;
                smtpClient.Send(Email);
                return "True";
            }
        }
        catch (Exception E)
        {
            return E.Message.ToString();
        }
    }
} 
```

c# 4.0 asp.net 4.0 IIS 7.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:10:01.693

`SmtpClient`是正确的。仅供参考，您可以在构造函数中指定`Host`and `Port`，但除此之外它很好。

```
using (SmtpClient smtpClient = new SmtpClient("127.0.0.1", 25))
{
    smtpClient.Send(Email);
    return true;
} 
```

不过，我会更改返回类型...要么返回 a `bool`of `true`or `false`，要么创建返回类型`void`并在调用代码中捕获异常。

编辑：回答你关于捕获异常的问题......而不是捕获`Exception`你的`sendEmail`方法内部（顺便说一句，这应该`SendEmail`遵循 C# 命名标准），你应该从你调用的地方捕获异常`sendEmail`。

```
try
{
    sendEmail(/*whatever parameters you need */);
}
catch(Exception e)
{
    //Do whatever you need to do with the exception... Display a notification
    // to the user, etc
} 
```

此外，您应该尽量不要捕获所有异常 - 只捕获您期望的异常 - 在这种情况下很可能是`SmtpException`.

# java - 通过 Maven 编译 Java 7 代码

> ID：14043042
> 
> 赞同：155
> 
> 时间：2012-12-26T16:05:26.443
> 
> 标签：java, maven

我的 pom 文件列表

```
<project>
  <build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
  ... 
```

然而`mvn clean install`，我得到

```
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Failure executing javac, but could not parse the error:
javac: invalid target release: 1.7
Usage: javac <options> <source files> 
```

`/usr/bin/java -version`是（`which java`点这里）

```
java version "1.7.0_10"
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

`javac`还指向正确的 Java 版本

```
/usr/bin/javac -> /Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home/bin/javac 
```

在这台机器上，我正在使用`zsh`（`echo $0`返回`-zsh`）

在我的`.zshrc`中，我定义了：

```
 33 # HOME
 34 JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home
 35 SCALA_HOME=/Library/Scala/current
 36 FORGE_HOME=~/tools/forge/
 37 
 38 # PATH
 39 PATH="/Library/Frameworks/Python.framework/Versions/3.2/bin:${PATH}"
 40 PATH=${PATH}:${JAVA_HOME}/bin
 41 PATH=${PATH}:/bin/
 42 PATH=${PATH}:/sbin/
 43 PATH=${PATH}:/usr/bin/
 44 PATH=${PATH}:/usr/sbin/
 45 PATH=${PATH}:/opt/local/bin/
 46 PATH=${PATH}:/opt/local/sbin/
 47 PATH=${PATH}:/usr/local/git/bin
 48 PATH=${PATH}:/usr/local/git/sbin
 49 PATH=${PATH}:/Applications/Xcode.app/Contents/Developer/usr/bin
 50 PATH=${PATH}:${SCALA_HOME}/bin
 51 PATH=${PATH}:${FORGE_HOME}/bin
 52 
 53 export PATH 
```

当我运行时，`mvn clean install --debug`我发现实际上我使用的是 Java 6

```
 1 Apache Maven 3.0.3 (r1075438; 2011-02-28 11:31:09-0600)
  2 Maven home: /usr/share/maven
  3 Java version: 1.6.0_35, vendor: Apple Inc.
  4 Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
```

可以在哪里定义？我有多次 source(d) 我的 .zshrc 。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-12-26T16:50:18.967

检查`mvn`maven 安装中的脚本以查看它是如何构建命令的。也许您或其他人在其中硬编码了 a`JAVA_HOME`并忘记了它。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-12-26T16:14:40.620

尝试使用更新版本的 maven 编译器插件：

```
 <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.2</version>
        <configuration>
            <source>1.7</source>
            <target>1.7</target>
        </configuration>
    </plugin> 
```

此外，在 Maven 中指定源文件编码最好在全局范围内完成：

```
<properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

**编辑**：由于这个答案仍然受到关注，我只想指出，maven 编译器插件的最新值（截至最新编辑）是 3.2，java 是 1.8，因为有关通过 maven 编译 java 8 代码的问题必然会很快就会出现:-)

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-11-17T21:04:02.913

我有同样的问题，为了解决这个问题，我关注了这篇博客文章：[http ://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/](http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/)

```
$ vim .bash_profile 

export JAVA_HOME=$(/usr/libexec/java_home)

$ source .bash_profile

$ echo $JAVA_HOME
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home 
```

特别[感谢@mkyong](https://twitter.com/mkyong)

编辑：现在我正在使用：[jEnv](http://www.jenv.be/) + [sdkman](http://sdkman.io/)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-09-05T07:52:00.520

请检查 pom.xml 中的以下标签

```
<properties>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
</properties> 
```

它应该指向所需的 jdk 版本

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-03-27T11:38:12.683

您必须检查 Maven 版本：

```
mvn -version 
```

您将找到 Maven 用于编译的 Java 版本。如果需要，您可能需要重置 JAVA_HOME。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2014-04-03T20:44:12.940

我有同样的问题。我发现这是因为 Maven 脚本查看了下面的 CurrentJDK 链接并找到了 1.6 的 JDK。即使您安装了最新的 JDK，也无法解决。虽然您可以在 $HOME/.bash_profile 脚本中设置 JAVA_HOME，但我选择修复符号链接，如下所示：

```
ls -l /System/Library/Frameworks/JavaVM.framework/Versions/
total 64
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.4 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.4.2 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.5 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.5.0 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.6 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 30 Oct 16:18 1.6.0 -> CurrentJDK
drwxr-xr-x  9 root  wheel  306 11 Nov 21:20 A
lrwxr-xr-x  1 root  wheel    1 30 Oct 16:18 Current -> A
lrwxr-xr-x  1 root  wheel   59 30 Oct 16:18 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 
```

注意 CurrentJDK 指向 1.6.0.jdk

为了修复它，我运行了以下命令（您应该检查您安装的版本并进行相应调整）。

```
sudo rm /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK
sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/ /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-28T22:11:45.373

诊断：

您可以通过运行“mvn --version”查看 Maven 使用的 java 版本

Debian的解决方案：

mvn 脚本通过查找 javac（which javac）在内部设置 JAVA_HOME 环境变量。因此，如果您同时安装了多个 java 版本，例如 JDK 6 和 JDK 7，并使用 Debian Alternatives 系统在它们之间进行选择，即使您将“java”的替代品更改为 JDK 7，mvn 仍将使用 JDK 6。您也必须更改“javac”的替代方案。例如：

```
# update-alternatives --set javac /usr/lib/jvm/java-7-openjdk-amd64/bin/javac 
```

编辑：

实际上，更好的解决方案是使用 update-java-alternatives (eg)

```
# update-java-alternatives -s java-1.7.0-openjdk-amd64 
```

如[https://wiki.debian.org/JavaPackage](https://wiki.debian.org/JavaPackage)中所述，因为这将改变各种 Java 工具的*所有替代品（大约有十几个）。*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-26T16:14:06.723

你能尝试一个更新的插件吗？在 Maven 网站上：

```
<version>3.0</version> 
```

我也看到了以下内容：

```
<compilerVersion>1.7</compilerVersion> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-20T19:00:46.547

尝试在 Eclipse 的 Properties 中更改 Java 编译器设置-

转到：Preferences->Java->Compiler->Compiler Compliance Level->1.7 Apply Ok

重启IDE。

确认项目的编译器设置-转到：项目属性->Java编译器->取消选中（在java构建路径上使用执行环境'JavaSE-1.6'的合规性。）并从下拉列表中选择1.7。（如果已经是 1.7 则忽略）

重启IDE。

如果问题仍然存在 - 使用终端中的命令运行单个测试用例 -

```
mvn -Dtest=<test class name> test 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-31T23:51:53.347

不确定这里使用的是什么操作系统，但是您可以使用 update-java-alternatives 来消除很多 java 版本的 futzing un debian/ubuntu 以设置默认的 jvm 系统范围。

```
#> update-java-alternatives -l
java-1.6.0-openjdk-amd64 1061 /usr/lib/jvm/java-1.6.0-openjdk-amd64
java-1.7.0-openjdk-amd64 1071 /usr/lib/jvm/java-1.7.0-openjdk-amd64
java-6-sun 63 /usr/lib/jvm/java-6-sun
java-7-oracle 1073 /usr/lib/jvm/java-7-oracle 
```

要设置一个新的，请使用：

```
#> update-java-alternatives -s java-7-oracle 
```

大多数应用程序无需设置 JAVA_HOME。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-10-13T12:21:20.377

在 Eclipse 中右键单击您的项目并打开“运行配置”..检查那里的 jre 版本。有时这在 Eclipse 中默认不会改变，甚至在构建路径中更改版本之后。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-10T09:42:44.680

对于需要（非默认`/etc/alternatives/java`）JVM 的特定编译，请考虑在`mvn`命令前加上`JAVA_HOME`这样的前缀，

```
JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/ mvn package 
```

这里我们假设默认是 Java 8，而对于手头的特定项目，我们需要 Java 7。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-09T08:23:27.610

{JAVA_1_4_HOME}/bin/javac你也可以试试...

```
<plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>
                <executable>{JAVA_HOME_1_7}/bin/javac</executable>
                <fork>true</fork>
        </configuration>
    </plugin> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-09-30T19:07:56.673

好的，我也自己解决了这个问题。更重要的是您的 JAVA_HOME，如果与 Maven 插件的源/目标属性相比，您没有更低的版本或没有版本，您将收到此错误。

确保在您的 JAVA_HOME 中有一个好的版本并将其包含在您的 PATH 中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-30T12:27:09.603

您可能指定了错误的 java 版本。java -version（在您的终端中）检查您正在使用的 java 版本。转到[maven-compile-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/)获取最新的 maven 编译器版本 如果您使用的是 java 6，并且 maven 编译器插件的最新版本是 3.1，您的插件可能会显示如下

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-10-10T22:29:30.550

以前的答案都没有完全解决我的用例。

需要删除正在构建的目录。干净的。然后重新安装。看起来像一个静默的权限问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-05-05T15:59:56.033

我在 IntelliJ IDEA 14 中遇到了这个问题，直到我进入文件菜单 --> 项目结构，将项目 SDK 更改为 1.7 并将项目语言级别更改为 7。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-02-10T15:40:22.127

我在使用 eclipse 时遇到了这个问题，我不得不更改项目的构建路径，以便它引用 jre 7

# python - 在 Google App Engine (Python) 中按文件名下载 Blob

> ID：14043045
> 
> 赞同：0
> 
> 时间：2012-12-26T16:05:37.923
> 
> 标签：python, google-app-engine, google-cloud-datastore

我知道我可以通过 BlobKey 获取 blob，但是如何获取与给定文件名关联的 blobkey？

简而言之，我想实现“按文件名获取文件”

我似乎找不到任何内置功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:56:10.093

您可以通过文件名找到 blob。您需要在 Datastore 中查询类型为 的实体`BlobInfo`。这些实体有一个属性`filename`。

但是请注意，不能保证文件名是唯一的：您可能会得到多个结果。然后，您可以使用该属性`creation`来查找最新的 blob。

有关更多信息，请阅读[https://developers.google.com/appengine/docs/python/blobstore/blobinfoclass](https://developers.google.com/appengine/docs/python/blobstore/blobinfoclass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:18:26.613

您上传的每个 blob 都会在 blobstore 中创建该 blob（具有该文件名）的新版本。当然，如果您上传了新版本，您可以删除 blob 的旧版本。但要确保您拥有最新版本的 blob（文件名），您必须将文件名存储在数据存储中并引用最新版本。此引用包含 blob_key。

# c# - 单独展开/折叠多个 HTML 表格

> ID：14043049
> 
> 赞同：0
> 
> 时间：2012-12-26T16:06:13.227
> 
> 标签：c#, javascript, html, model-view-controller

我正在尝试在网页上显示主详细信息报告。它现在的工作方式是我正在创建一个表来创建每个主行，然后在每个主行下是另一个包含详细信息的表。其中一些表是多行的。我将如何使详细信息行展开/折叠？这是我的详细信息行代码：

```
<table>
    <tr>
        <th>
            Bar Code &nbsp;
        </th>
        <th>
            Start Time
        </th>
        <th>
            Length &nbsp;
        </th>
        <th>
            End Time
        </th>
    </tr>

    <tbody id = '@ViewBag.i'>
        @foreach (var item in Model)
        { 
            <tr>
                <td>
                    @item.BarCode
                </td>
                <td>
                    @item.StartTime
                </td>
                <td>
                    @item.Length
                </td>
                <td>
                    @item.EndTime
                </td>
            </tr>
        }
    </tbody>
</table> 
```

在这种情况下，每次运行在另一个视图中生成此表的循环时，viewBag 都会递增。我之前尝试过一些代码，但我能得到的最接近的是展开/折叠，它只影响了第一个详细信息表。先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T16:25:01.330

[此示例](http://jsfiddle.net/etRRk/1/)听起来像是您正在寻找的最终结果。

所以基本上听起来你只需要使用`@ViewBag.i`来使每个表都独一无二。像这样：

```
<table>
    <tr>
        <th>
            Bar Code &nbsp;
        </th>
        <th>
            Start Time
        </th>
        <th>
            Length &nbsp;
        </th>
        <th>
            End Time
        </th>
    </tr>

    <tbody id = 'someTbodyID_@(ViewBag.i)'>
        @foreach (var item in Model)
        { 
            <tr>
                <td>
                    @item.BarCode
                </td>
                <td>
                    @item.StartTime
                </td>
                <td>
                    @item.Length
                </td>
                <td>
                    @item.EndTime
                </td>
            </tr>
        }
    </tbody>
</table>

<a href="#" id="clicker_@(ViewBag.i)">click me to collapse 1</a> 
```

然后在 js 中，包含 jQuery：

```
$(function(){
    $("#clicker_@(ViewBag.i)").click(  function(){
        $("#someTbodyID_@(ViewBag.i) tr").toggle();
    });        
});​ 
```

这将使用`@(ViewBag.i)` 使每个表格都独一无二，并提供一些可单击的内容以折叠`TR`该 tbody 中的所有内容。

我不确定你想用什么来点击折叠，所以我只是添加了`A`. 不过，您可以将点击事件添加到任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T17:03:32.217

我认为您可以在 javascipt 中使用此代码执行此操作：

```
function showHide(obj){  
var tbody = obj.parentNode.parentNode.parentNode.getElementsByTagName("someTbodyID_@(ViewBag.i)")[0];  
var old = tbody.style.display;  
tbody.style.display = (old == "none"?"":"none");  
} 
```

# c++ - 如何使用额外的解析器扩展 Clang？

> ID：14043060
> 
> 赞同：12
> 
> 时间：2012-12-26T16:06:48.033
> 
> 标签：c++, compiler-construction, llvm, clang

如何为具有特殊文件结尾的文件使用附加解析器扩展 Clang，即我可以开发一个`FrontendAction`说“嘿！我将处理文件结尾为 '.lorem' 的所有文件并返回一个抽象语法树（`clang::ASTContext`？）”？

我已经阅读过`clang::FrontendAction`，但是我无法弄清楚我应该在哪里以及如何扩展 Clang 以便能够使用额外的解析器来扩展编译器（`clang::Parser`而*不是*扩展当前的解析器）。`clang::driver::Driver`

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:01:58.097

这里有一些提示：

在`tools/clang/lib/Driver/Types.cpp`你有`lookupTypeForExtension`，它根据扩展名确定编译代码的“类型”。例如，对于`.m`它返回的扩展名`TY_ObjC`。您还拥有`isObjC`确定给定类型是否属于 Objective C 的谓词。

至于解析器如何知道它正在解析哪种语言......它通过 知道它`Preprocessor`，它有一个`LangOptions`成员。后者在 中定义了许多选项`include/clang/Basic/LangOptions.def`。例如，`ObjC1`和`ObjC2`。这些设置在 中`CompilerInvocation::setLangDefaults`，最终从 中调用`CompilerInvocation::CreateFromArgs`。

请记住，clang 驱动程序会将 clang 前端作为“子进程”调用，并向其传递额外的命令行参数。驱动是gcc兼容的，前端可以看成clang本身。

此外，恕我直言，向clang添加额外的解析器会很麻烦。虽然一切都是模块化的，但需要做很多工作来创建并将一切联系在一起。如果您的语言扩展了 ObjC，只需使用现有的解析器。如果您的语言完全不同，那么 clang 可能不是您的好选择。*

# css - 使用 CSS 在 asp.net 页面上动态调整 div 的大小

> ID：14043061
> 
> 赞同：0
> 
> 时间：2012-12-26T16:06:50.467
> 
> 标签：css, html, resize

我有一个使用母版页的网站，所有页面都继承自该母版页。母版页使用样式表进行布局和感觉。基本布局是这里

```
<html>
<body >
<form runat="server" >
<div class="page" >
    <div class="header">
        <div class="title">
        </div>           
        <div class="main">            
            <asp:ContentPlaceHolder ID="MainContent" runat="server">                 
            </asp:ContentPlaceHolder>
        </div>
        <div class="clear">
        </div>
    </div>
</div>
<div class="footer">
</div>
</form> 
```

我的问题是我希望主 div 根据 .page 的 Css 中的客户端窗口大小重新调整大小我将宽度设置为 85%，这工作正常，但是当我尝试将高度设置为百分比时它只是加载的屏幕内容的高度。如果我将它设置为像素值，它将显示适合该设置的高度，但我希望它根据客户端窗口增长和缩小。

我四处搜索并尝试了最小高度设置和我通过护目镜找到的其他东西，但它们都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:10:29.067

您应该使用 jQuery 或 javascript 分配高度。

```
var browser_height = $(window).height();

$('.main').css({'height':browser_height}); 
```

# javascript - 字符串和数组，并引用这些元素

> ID：14043062
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:07:00.860
> 
> 标签：javascript, ajax

我正在尝试将单词拆分，以便我可以计算每个单词中的音节，但目前我似乎无法隔离单词，我只能计算句子中的整个音节数，

```
 var text = $(this).val();
        var words = new Array(text.replace(/\s/g, ' ').split(' '));
        function countSyllables(words) {
            word = words.toString();
            var lWords = word.toLowerCase();
            var wordsArray=lWords.split(",");
            for (var z = 0; z < lWords.length; z++) {
                console.log(wordsArray, "- array of words");
                console.log(wordsArray[z], "- one item[z]"); 
```

我的问题似乎是我必须将数组转换为字符串来降低它，但是在这两种情况下我都不能引用每个单独的单词来计算音节：

```
[16:04:02.726] ["this", "is", "test", "text", "", "the", "words", "need", "to", "be", "separately", "analysed.", "hello"] - array of words    
[16:04:02.726] o - one item[z] 
```

这是最后一个字符，当我想引用这个词时

我确定这是一个简单的解决方案，但我无法理解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:21:09.497

这条线在很多层面上都是错误的：

```
var words = new Array(text.replace(/\s/g, ' ').split(' ')); 
```

你所追求的是，​​AFAIK，是这样的：

```
var words = text.split(/[^a-z0-9\-]+/gi); 
```

这会拆分字符串，使用所有空格、点、括号和其他标点符号作为分隔符。我已经排除了破折号 ( `-`)，以避免将单词算作`ice-cream`两个单词。如果您不关心这一点，或者如果您认为将破折号视为分隔符时结果更可靠，请*忽略*它们：

```
var words = text.split(/[^a-z0-9]+/gi);
console.log(text + ' is approx. ' + words.length + ' words long'); 
```

关于转换为小写的事情：为什么不将整个文本从一开始就转换为小写呢？

```
var words = text.toLowerCase().split(/[^a-z0-9\-]+/gi); 
```

哦，这段代码的输出不会在数组中留下空字符串：

```
'Foo... bar, Foobar and lorum ipsorum'.toLowerCase().split(/[^a-z0-9\-]+/gi);
//output: ["foo", "bar", "foobar", "and", "lorum", "ipsorum"]
//length returns 6, which I think is correct 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:13:46.267

我是个白痴，正在使用 lwords，但正在打印 wordsArray！，现在将它们全部更改为 wordsArray

# android - 附Android源代码：跟踪到View类时行号错误

> ID：14043066
> 
> 赞同：2
> 
> 时间：2012-12-26T16:07:14.760
> 
> 标签：android

我正在使用 eclipse 开发一个 Android 应用程序。我选择了 14 个项目构建目标并附加了 SDK 源（相同版本，14）。当我调试我的项目并尝试跟踪到 View 类时，调试器显示错误的行：它应该显示布局方法的第一行（第 11170 行），但它跟踪注释行（第 11395 行）。

有谁知道我做错了什么？如果这不是附加核心资源的正确方法，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:30:27.610

当 eclipse 中的行号不同步时对我有帮助的东西；

*   关闭活动
*   清理项目
*   重建项目
*   重新开启活动

尤其是在eclipse中用户之间共享文件的时候，无论是使用SVN软件还是直播项目共享插件，这都是一个非常持久的烦恼。

# php - Kendo ui AutoComplete 与 C# 简单源

> ID：14043068
> 
> 赞同：0
> 
> 时间：2012-12-26T16:07:42.753
> 
> 标签：php, asp.net, razor, autocomplete, kendo-ui

我尝试使用带有 C# 数据源的 Kendo UI 自动完成工具。在 PHP 中似乎很容易：

```
 <?php
        include("connection.php");

    $arr = array();

    $stmt = $db->prepare("SELECT StateID, StateName FROM USStates WHERE StateName LIKE ?");

    // get the StartsWith value and append a % wildcard on the end
    if ($stmt->execute(array($_GET["StartsWith"]. "%"))) {
        while ($row = $stmt->fetch()) {
            $arr[] = $row;    
        }
    }

    // add the header line to specify that the content type is JSON
    header("Content-type: application/json");

    echo "{\"data\":" .json_encode($arr). "}";
?> 
```

但我想使用 CSHtml 文件或类似的文件，您对如何完成此操作有任何想法吗？

我不想创建一个附有模型等的控制器……如果可以只用一页制作它，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:57:47.993

如果您正在使用 MVC 创建一个这样的控制器......

```
public class DataController : Controller
{
    public JsonResult GetStates()
    {
        var data = GetData();
        return Json(new
        {
            data = data.Select(r => new
            {
                StateId = r.ID,
                StateName = r.Name
            })
        });
    }
 } 
```

然后您所要做的就是将数据源 url 设置为 /data/GetStates

如果您使用网络表单，我将创建一个通用处理程序或网络服务（取决于您需要多少功能）

```
public class LoadStates : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        JavaScriptSerializer json = new JavaScriptSerializer();
        var data = GetData();
        context.Response.ContentType = "application/json";
        context.Response.Write(json.Serialize(new
        {
            data = data.Select(r => new
            {
                StateId = r.ID,
                StateName = r.Name
            })
        }));
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

为了完整起见..这是使用 ashx 网络服务实现相同目标的方法

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class WebService1 : System.Web.Services.WebService
{
    [WebMethod, ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string HelloWorld()
    {
        var data = GetData();
        return new
        {
            data = data.Select(r => new
            {
                StateId = r.ID,
                StateName = r.Name
            })
        };
    }
} 
```

# objective-c - 意外的应用程序支持路径

> ID：14043070
> 
> 赞同：2
> 
> 时间：2012-12-26T16:07:57.197
> 
> 标签：objective-c, macos, path

我正在使用以下两行来获取用户应用程序支持文件夹的正确路径，该文件夹应该是：**/Users/username/Library/Application Support**

```
NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

相反，我得到了这个：**/Users/username/Library/Containers/jumbosoft.de.Egg-Breakfast/Data/Library/Application Support**

显然我做错了什么。我就是没看出来？？？

罗纳德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:17:46.513

您的应用程序正在沙盒中运行（尽管有些人对此进行了辩论，但 Apple 坚持认为这不是“做错事”；-)）。

如果您不希望被沙盒化，请关闭 Xcode 项目设置中的设置。否则，只需确保您没有将任何*绝对*路径名知识硬连接到您的应用程序中，而是依赖于 API，例如您已经在使用的 API。

# django - Amazon Elastic Beanstalk 不提供 django 静态文件

> ID：14043073
> 
> 赞同：22
> 
> 时间：2012-12-26T16:08:06.337
> 
> 标签：django, amazon-web-services, amazon-elastic-beanstalk, django-staticfiles

我正在尝试在弹性 beantalk 上建立一个简单的 django 应用程序。我以为我已经弄清楚了应用程序的静态部分，因为它可以与 heroku 和手动设置的服务器一起使用。在调试中，我什至签入了静态目录中的静态文件以试图简化事情。映射似乎很奇怪，因为它似乎不遵循 STATIC_ROOT。

我的相关配置：settings.py

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__name__))
STATIC_ROOT = os.path.join(PROJECT_ROOT,'static/')
STATIC_URL = '/static/'
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

网址.py

```
(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

日志：

```
[Wed Dec 26 15:39:04 2012] [error] [client 10.29.203.20] File does not exist: /opt/python/current/app/css, referer 10.29.203.20 - - 
[26/Dec/2012:15:39:04 +0000] "GET /static/css/styles.css HTTP/1.1" 404 329 "http://" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11" 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-17T14:24:39.587

我今天遇到了同样的问题，我意识到我在 .ebextensions/.config 文件中忘记了这个选项。确保你也拥有它

```
option_settings:
  - namespace: aws:elasticbeanstalk:container:python:staticfiles
    option_name: /static/
    value: static/ 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-06-17T08:04:51.317

众所周知，最近版本的 EBS 中静态文件的命名空间已更改为`aws:elasticbeanstalk:environment:proxy:staticfiles`，如下所示：

```
option_settings:
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-04-18T12:00:31.503

要支持多个应用程序并执行此操作，您需要运行 collectstatic

设置.py

```
STATIC_ROOT = os.path.join(BASE_DIR, "static") 
```

确保您的根目录中有一个名为“static”的文件夹

在您的 ebs 配置文件中，例如。（02_python.config 或类似）

```
option_settings:
    ...
    "aws:elasticbeanstalk:container:python:staticfiles":
        /static/: "static/" 
```

然后在你上传到 ebs 之前运行`python manage.py collectstatic`

这会将所有静态文件收集在您已经在配置中指向的一个文件夹中。

然后就可以`eb deploy`正常运行了

可选地，如果您不想将静态文件两次提交到源代码管理并希望服务器为您执行此操作，请将其添加到您的配置中

```
container_commands:
01_collectstatic:
    command: "source /opt/python/run/venv/bin/activate && python manage.py collectstatic --noinput" 
```

所以你的文件应该是这样的：

```
container_commands:
01_collectstatic:
  command: "source /opt/python/run/venv/bin/activate && python manage.py collectstatic --noinput"

option_settings:
    "aws:elasticbeanstalk:container:python":
      WSGIPath: app/wsgi.py
    "aws:elasticbeanstalk:container:python:staticfiles":
      /static/: "static/" 
```

这将在您运行时为您运行 collect static`eb deploy`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-12-28T23:34:20.657

如果您的环境使用基于 Amazon Linux 2 的平台分支，则 .ebextensions 文件夹中的 .config 文件的正确设置

```
aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static 
```

在您的项目 **settings.py 中** ，您应该拥有：

```
STATIC_URL = '/static/'
STATIC_ROOT = 'static' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-11T01:15:51.340

对我来说，问题在于

```
STATIC_ROOT = os.path.join(os.path.dirname(__file__), 'static') 
```

相反，我将其更改为

```
STATIC_ROOT = 'static' 
```

另外，我的 .conf 文件有

```
option_settings:
  "aws:elasticbeanstalk:container:python:staticfiles":
    "/static/": "static/" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-05T20:35:17.373

所有以前的答案都没有帮助我这对我有用。

基本上我在里面创建了两个步骤`.ebextensions`

`01_django.config`

```
container_commands:
    01_migrate:
        command: "source /opt/python/current/env && source /opt/python/run/venv/bin/activate && cd /opt/python/current/app && python manage.py migrate --noinput"
        leader_only: true
    02_touch_superuser:
        command: "source /opt/python/current/env && source /opt/python/run/venv/bin/activate && cd /opt/python/current/app && python manage.py touch_superuser"
        leader_only: true
option_settings:
    aws:elasticbeanstalk:container:python:
        WSGIPath: config/wsgi.py
        NumProcesses: 2
        NumThreads: 10
    aws:elasticbeanstalk:application:environment:
        STAGING: 1
        DJANGO_SETTINGS_MODULE: config.settings.production
    aws:elasticbeanstalk:container:python:staticfiles:
        "/static/": "htdocs/static/"
        "/media/": "htdocs/media/" 
```

`config/wsgi.py`可能是您项目中的不同路径

`02_collec_static.config`

```
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/10_collect_static.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      set -xe

      source /opt/python/current/env
      source /opt/python/run/venv/bin/activate
      cd /opt/python/current/app && python manage.py collectstatic --noinput

      echo "Statics collected...!!" 
```

重要的是，您`settings/*.py`应该与 EBS 服务的静态路径相匹配，在我的情况下，这是我的配置。

```
...
PROJECT_PATH = dirname(dirname(dirname(__file__)))
MEDIA_ROOT = os.path.join(PROJECT_PATH, 'htdocs/media')
STATIC_ROOT = os.path.join(PROJECT_PATH, 'htdocs/static')
... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-04T08:18:29.833

我做了以下修复beantalk中的静态路径

```
STATIC_URL = '/static/'

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
STATIC_ROOT = os.path.join(BASE_DIR, 'static')

option_settings:
  ...
  ...
  "aws:elasticbeanstalk:container:python:staticfiles":
    "/static/": "static/" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-26T20:13:08.220

我为此挣扎了很长时间，认为问题出在：

```
option_settings:
  "aws:elasticbeanstalk:container:python:staticfiles":
    "/static/": "static/" 
```

但实际上我的问题在于 xxx.config 文件中的其他命令。基本上，确保其他行是正确的。

如果你想知道我的个人设置，我使用了上面显示的设置文件，并在我的项目的根目录中添加了静态目录。对于 settings.py 文件，这里是我对 static_url 和 root 的内容：

```
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/2.2/howto/static-files/

STATIC_URL = '/static/'
STATIC_ROOT = 'static' 
```

希望能帮助到你 ！

# php - 使用 ajax/jquery 进行 FORM 检查

> ID：14043074
> 
> 赞同：0
> 
> 时间：2012-12-26T16:08:11.050
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 ajax 和 jquery 发送表单以在同一页面上获取结果。我有这个代码，我从我的表单操作中链接：

```
function check()
{

    var html = $.ajax({
        type: "POST",
        url: "reg.php",
        data: $("#reg").serialize(),
        async: false
        }).responseText;
    if(html == "success") { 

        //Indicate a Successful Captcha
        $("#captcha-status").html("<p class=\"green bold\">Success! Thanks you may now proceed.</p>");
    } else {
        $("#captcha-status").html("<p class=\"red bold\">The security code you entered did not match. Please try again.</p>");

    }
} 
```

然后我得到了我的 php 文件：

```
$query = "SELECT * FROM teemo1 WHERE nick='$nick' and server='$server'";
$result = mysql_query($query) or die(mysql_error());

if (mysql_num_rows($result) )
{
    echo 'success';
}
else
{
$queryy =  

     echo 'fail';
}

 } 
```

我需要在我的页面中显示表单“数据已成功保存”，如果失败“数据不正确”，但我不知道如何将这些回声从 php 文件获取到我的 ajax 脚本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:13:37.823

尝试这个 ：

```
function check(){
    $.ajax({
    type: "POST",
    url: "reg.php",
    data: $("#reg").serialize(),
    async: false,
    success:function(html){
        if(html == "success") { 
            $("#captcha-status").html("<p class=\"green bold\">Success! Thanks you may now proceed.</p>");
        } else {
            $("#captcha-status").html("<p class=\"red bold\">The security code you entered did not match. Please try again.</p>");
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:14:45.177

您需要使用`success`function 并使用 success function 的传递值`parameter`，这就是`responseText`您的情况。

```
$.ajax({
    type: "POST",
    url: "reg.php",
    data: $("#reg").serialize(),
    async: false
}).success(function(responseText){        
     if(responseText == "success") {       
      $("#captcha-status").html("<p class=\"green bold\">Success! Thanks you may now proceed.</p>");
     } else {
         $("#captcha-status").html("<p class=\"red bold\">The security code you entered did not match. Please try again.</p>");

     }
}); 
```

# php - 检查PHP中'@'字符后的单词

> ID：14043076
> 
> 赞同：11
> 
> 时间：2012-12-26T16:08:18.820
> 
> 标签：php, character

我现在正在制作一个新闻和评论系统，但我现在被困在一个部分上一段时间了。我希望用户能够以**@username**之类的 Twitter 风格引用其他玩家。脚本看起来像这样：（不是真正的 PHP，只是想象脚本；3）

```
$string = "I loved the article, @SantaClaus, thanks for writing!";
if($string contains @){ 
    $word = word after @;
    $check = is word in database? ...
} 
```

而对于字符串中的所有@username，可能是用while() 完成的。我被卡住了，请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T16:22:12.290

这就是**正则表达式**的用武之地。

```
<?php
    $string = "I loved the article, @SantaClaus! And I agree, @Jesus!";
    if (preg_match_all('/(?<!\w)@(\w+)/', $string, $matches))
    {
        $users = $matches[1];
        // $users should now contain array: ['SantaClaus', 'Jesus']
        foreach ($users as $user)
        {
            // check $user in database
        }
    }
?> 
```

1.  `/`开头和结尾是*分隔符*（暂时不要担心这些）。
2.  `\w`代表*单词字符*，包括`a-z`, `A-Z`, `0-9`, 和`_`.
3.  The`(?<!\w)@`有点高级，但它被称为*否定的**lookbehind assertion*，意思是“`@`不跟随单词字符的一个”。这样您就不会包含电子邮件地址之类的内容。
**   意思是“`\w+`一个或多个单词字符”。被`+`称为*量词*。*   周围的括号`\w+` *捕获*带括号的部分，并出现在`$matches`.*

 *[正则表达式.info](http://www.regular-expressions.info/)似乎是一个受欢迎的教程选择，但网上还有很多其他的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T16:15:36.927

看起来像是 preg_replace_callback() 的工作：

```
$string = preg_replace_callback('/@([a-z0-9_]+)/', function ($matches) {
  if ($user = get_user_by_username(substr($matches[0], 1)))
    return '<a href="user.php?user_id='.$user['user_id'].'">'.$user['name'].'</a>';
  else
    return $matches[0];
}, $string); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T16:26:24.527

考虑使用 Twitter API 从文本中捕获用户名：[https ://github.com/twitter/twitter-text-js](https://github.com/twitter/twitter-text-js)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T16:33:19.030

这是一个符合您需要的表达式，但不会捕获电子邮件地址：

```
$str = '@foo I loved the article, @SantaClaus, thanks for writing to my@email.com';
preg_match_all('/(^|[^a-z0-9_])(@[a-z0-9_]+)/i', $str, $matches);
//$matches[2][0] => @foo
///$matches[2][1] => @SantaClause 
```

如您所见： my@email.com 未被捕获，但 @foo 和 @SantaClaus 字符串*是*......*

# python - 使用 Python 的 datetime 模块，我可以得到 UTC-11 当前所在的年份吗？

> ID：14043080
> 
> 赞同：4
> 
> 时间：2012-12-26T16:08:30.210
> 
> 标签：python, django, datetime, timezone, utc

我想知道 UTC-11 时区（进入新年的最后一个时区）当前所在的年份，但我不知道该怎么做。

我可以访问该`pytz`库以及 Django 的新`timezone`模块，并且我正在使用时区感知的 UTC 日期时间对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T16:24:01.623

最简单的方法是完全跳过时区处理，只使用`timedelta(hours=11)`从属性中减去`datetime`并查看`year`属性。

```
>>> (datetime.datetime.utcnow() - datetime.timedelta(hours=11)).year
2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:25:45.223

实际上，时区比这更棘手......您可能有具有相同偏移量但在节电日期等方面具有不同设置的时区（甚至更恶劣的行为：[https ://stackoverflow.com/a/6841479 /289011](https://stackoverflow.com/a/6841479/289011) )

我认为对于这种特定情况，您可能会更好：

```
>>> "%s" % (datetime.datetime.utcnow() - datetime.timedelta(hours=11))
'2012-12-26 00:25:30.029864' 
```

只为这一年：

```
>>> "%s" % (datetime.datetime.utcnow() - datetime.timedelta(hours=11)).year
'2012' 
```

`datetime.utcnow()`编辑：是的，使用，而不是`datetime.now()`......（我的坏）是个好主意

# sql-server - 如何在 SQL Qry 中获取平均日期

> ID：14043082
> 
> 赞同：2
> 
> 时间：2012-12-26T16:08:55.963
> 
> 标签：sql-server, tsql

我正在尝试获取 sql 中的平均日期，但不确定如何执行此操作。我有以下字段：

```
ID   Date1             Date2                   Date3
1    05/04/2012        08/09/2012             07/02/2012 
```

我想添加另一列显示 ID 号 1 的平均日期。我只完成了平均数字，但从未完成平均日期。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T16:14:42.820

你可以使用这样的东西，它将日期转换为 a`float`然后取平均值：

```
select t.id, t.date1, t.date2, t.date3, src.AvgDate
from yourtable t
inner join 
(
  select id, cast(avg(date) as datetime) AvgDate
  from
  (
    select id, cast(cast(date1 as datetime) as float) date
    from yourtable
    union all
    select id, cast(cast(date2 as datetime) as float) date
    from yourtable
    union all
    select id, cast(cast(date3 as datetime) as float) date
    from yourtable
  ) x
  group by id
) src
  on t.id = src.id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f31ce/4)

由于您的日期值跨越多个列，因此我先执行`unpivot`or`union all`以获取单个列中的值，然后取该值的平均值。

这是使用该`UNPIVOT`函数的另一个示例：

```
select t.id, t.date1, t.date2, t.date3, src.AvgDate
from yourtable t
inner join 
(
  select id, cast(avg(date) as datetime) AvgDate
  from
  (
    select id, cast(cast(date as datetime) as float) date
    from yourtable
    unpivot
    (
      date
      for col in (date1, date2, date3)
    ) unpiv
  ) x
  group by id
) src
  on t.id = src.id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f31ce/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:27:02.500

```
select id, date1, date2, date3
,Cast(
(cast(date1 as Float) + cast(date2 as Float) + cast(date3 as Float))/3
as Datetime) as AvgDate
from yourtable 
```

# android - 图像未按 XML ImageView 中的定义显示

> ID：14043084
> 
> 赞同：0
> 
> 时间：2012-12-26T16:09:01.193
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我是安卓新手。我可以从手机中检索图像。但是，我没有得到 xml 文件中定义的所需高度和宽度。图像仍然显示为矩形而不是正方形（它只是我原始照片的按比例缩小。但是，我只需要图像的方形裁剪（图像的一部分没有缩放）。

XML 文件（图像视图）：

```
<ImageView 
    android:id="@+id/photo"
    android:layout_width="=100dp"
    android:layout_height="100dp" 
    android:scaleType="center"
    android:adjustViewBounds="false" 
    android:gravity="center"/> 
```

代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.item_view, null);
        holder = new ViewHolder();
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    Uri fileURI = Uri.parse(itemArrayList.get(position).getPhoto());
    holder.itemImage.setImageURI(fileURI);
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:09:12.003

您已将`ImageView`layout_width 和 layout_height设置`dp`为非像素。所以在 hdpi 设备上 100dp 实际上是 150px 和 200 在 xhdpi 上。这可能是您的问题的原因。您可以以 px 为单位设置宽度和高度，并将图像放在 drawable-nodpi 文件夹中（不执行缩放）。您也可以使用[createBitmap (Bitmap source, int x, int y, int width, int height)](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int%29)方法来获取您想要的图像的一部分。

# jquery - 手风琴+切换菜单

> ID：14043086
> 
> 赞同：0
> 
> 时间：2012-12-26T16:09:07.787
> 
> 标签：jquery, menu, toggle, accordion

我有带有手风琴和切换效果的 jquery 菜单。但它适用于错误：有时它会关闭所有元素。

你能帮助做到最好吗？

HTML：

```
<ul id="accordion">
    <li>
        <a href="#">Level 1</a>
        <ul>
            <li><a href="#">11</a></li>
            <li><a href="#">12</a></li>
        </ul>
    </li> 
     <li>
        <a href="#">Level 2</a>
        <ul style="display: none;">
            <li><a href="#">21</a></li>
            <li><a href="#">22</a></li>
        </ul>
    </li> 
</ul> 
```

JS：

```
var sel = '#accordion'
$(sel + ' li a').toggle(
        function() {
            var checkElement = $(this).next();
            if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
                return false;
            }
            if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
                $(sel + ' ul:visible').slideUp('normal').removeClass('selected');
                checkElement.addClass('selected').slideDown('normal', function() {

                });
                return false;
            }
        },
        function() {
            $(sel + ' ul:visible').removeClass('selected').slideUp('normal', function() {

            });
        }
    );​ 
```

演示：http: [//jsfiddle.net/uG6zB/11/](http://jsfiddle.net/uG6zB/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:05:59.763

我查看了您的代码，但据我了解，我不确定切换是您尝试执行的最佳功能。

我改变`toggle`了`click`，我改变了你的逻辑。

javascript 现在看起来像这样：

```
var sel = '#accordion'
$(sel + ' li a').click( function(){
    var checkElement = $(this).next();
    if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
        checkElement.slideUp('normal').removeClass('selected');
    }
    else if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
        $(sel + ' ul:visible').slideUp('normal').removeClass('selected');
        checkElement.addClass('selected').slideDown('normal', function() {

        });
    }
}); 
```

使用这个 javascript，我能够让菜单上下移动，而没有任何古怪的行为。 [小提琴](http://jsfiddle.net/kJMAr/1/)

# c++ - 将模板类更改为常规类 - C++

> ID：14043090
> 
> 赞同：3
> 
> 时间：2012-12-26T16:09:41.370
> 
> 标签：c++, templates

我有一个模板类：

```
template<typename T>
class A {
public:
 virtual void func(T t);
 virtual void func2(T t);
 .
 .
 .
 virtual void funcN(T t);
} 
```

基本上很多类继承形式 A，但 T 始终是 B 或 C 两种类型之一。

目前我在课堂上所做的每一个改变都会导致很长的构建时间。

由于 T 可以是 B 或 C，我想将班级变成普通班级。

任何想法如何以一种智能和干净的方式进行此更改，而无需复制每个功能两次？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:28:30.417

最简单的解决方案可能是使用明确的专业化。您保留模板，但您明确告诉编译器要为哪些类实例化它。

将包含的头文件更改`class A`为仅包含类及其成员的声明（就像您对常规类所做的那样）。然后创建一个包含`A.cpp`成员函数实现`A`和显式特化的文件，如下所示

```
#include <A.h>
#include <B.h>
#include <C.h>

//... Implementation of A

template class A<B>; // explicit instantiation for B
template class A<C>; // and for C 
```

并将此文件添加到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:19:48.350

如果不求助于 hack，例如使用预处理器来定义你的可能模板类的共享部分，你就无法避免模板而不引入一些代码重复。

如果`B`and`C`不共享一个共同的祖先，您可以为`A<B>`and引入非模板类`A<C>`，并从它们继承，如下所示：

```
class AofB : public A<B> {};

class AofC : public A<C> {};

class SomeClass1 : public AofB { // this used to be A<B>
    ...
};

class SomeClass2 : public AofC { // this used to be A<C>
    ...
}; 
```

但是，这不太可能改变编译速度。

如果`B`并且`C`确实共享许多通用功能，请考虑制作一个非模板版本，该版本使用和多态`A`的共同祖先。但是，这可能并不总是可取的，因为它会迫使您在模板参数的实例之前就足够的情况下使用指针/引用。`B``C``T`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:30:24.560

如果我没看错，你真正的问题是“如何在使用这个模板类时缩短构建时间”，而不是“我如何取消这个类的模板”。

问题很可能源于必须重新编译所有文件而不是模板实例化，但即便如此，想到的最明显的解决方案（假设虚函数`A`都使用`B`和`C`对象作为参数）是从编译时更改为运行时多态性。

引入一个通用的基类，`B`然后`C`不需要`A`模板化，它可以简单地接受对`BC_Parent`对象的指针/引用，利用通用接口来完成所需的工作。这应该有助于立即缩短编译时间，但如果需要更多节省，您现在可以使用 pimpl 模式进一步将您的更改与使用它们的客户端类隔离开来。

在任何情况下，当实际接口发生`A`变化时，您都无法避免完全重新编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T16:20:42.990

一种可能性是拥有`B`并`C`从一个公共基类派生，并`A`对该基类的指针或引用进行操作：

```
class base {};
class B : public base {};
class C : public base {};

class A {
public:
    virtual void func(base &b);
    virtual void func2(base &b);
    // ...
    virtual void funcN(base &b);
}; 
```

这*将*避免由于 A 中的更改而重新编译 B 和 C——但会以运行时的一些额外成本为代价。具体来说，A 必须通过指针或引用来处理 B 和 C 对象，这会带来一些开销。

# c# - 与visual studio 2010 express和2012 express打开ac#项目的区别

> ID：14043093
> 
> 赞同：6
> 
> 时间：2012-12-26T16:10:02.240
> 
> 标签：c#, visual-studio-2010, visual-studio-2012

在将系统升级到 Windows 8 和 Visual Studio 12 Express 之前，我使用 express 2010 版本工作了几个月。我尝试运行适用于 Windows 8 的 Visual Studio，但是当我尝试从 2010 年打开我的 c# 项目时，它告诉我这个版本只支持窗口商店应用程序。

我的问题是哪个 VS 2012 express 版本允许我处理我的 C# 项目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T16:12:37.963

你有适用于 Windows 8 的 VS2012 Express，你想要的是适用于 Windows 桌面的 VS2012 Express

来源： http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)

# wpf - WPF 在子元素中禁用工具提示

> ID：14043095
> 
> 赞同：1
> 
> 时间：2012-12-26T16:10:17.500
> 
> 标签：wpf, grid, visibility, tooltip

请帮助我 - 如何禁用 Grid 中子元素的工具提示？

```
<Grid x:Name="root">
    <Border HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Margin="0,0,52,0">

        <Popup Placement="Bottom">
               <StateButton x:Name="FullScreenButton"
                                    Command="{Binding Path=FullScreenCommand}"
                                    wpfutil:CustomToolTipService.Content="Exit full screen (Esc)"
                                    ToolTip="{CustomToolTipExtension}"/>
        </Popup>
    </Border>

    <Border     HorizontalAlignment="Center"
                VerticalAlignment="Bottom">

        <Popup Placement="Bottom">
                <Border x:Name="OverlayControlHolder"
                        SnapsToDevicePixels="True"/>
        </Popup>
    </Border>
</Grid> 
```

我需要在主网格上绑定 IsEnabled 工具提示属性。我怎样才能达到它？提前致谢

# javascript - 在移动“返回”按下后运行 javascript

> ID：14043096
> 
> 赞同：6
> 
> 时间：2012-12-26T16:10:20.327
> 
> 标签：javascript, jquery, asp.net-mvc, mobile

我们有一个移动站点（MVC 风格的 ASP.NET），除其他外，它显示全屏 HTML 幻灯片。

为了显示这一点，我们在 mobileHTMLMovie 视图上运行代码，如下所示：

```
$( function() {
    $(document).bind('pageinit', function() {
    $("header").hide();
    $(".subHeader").hide();
    $(".subHeaderAccent").hide();
    $("footer").hide();
    $(".ui-content").css("width", "100%").css("height", "100%").css("margin","0").css("background-color", "#000");
    });
}); 
```

我们看到的问题是，当用户按下“后退”按钮（他/她仅限于硬件控件，因为此代码禁用了所有包装元素，包括我们的 HTML 移动按钮）时，元素仍然隐藏。

我一直无法找到在他们登陆的页面上运行“反转”代码的方法（显示而不是隐藏，从“.ui-content”中删除样式属性）。他们到达的页面没有运行 document.ready，电影页面没有运行“onunload”或“onbeforeunload”，以及我在网上找到的另一个建议（.live('click') '[data-rel=back]' 元素）也没有工作。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:28:51.827

您可以尝试使用 History 对象并绑定到`popstate`事件吗？基本上，当幻灯片显示时，你会推入一个新的状态，然后当用户按下时，它可能会触发弹出。

**例子：**

```
$(function() {
    $(document).bind('pageinit', function() {
        $("header").hide();
        $(".subHeader").hide();
        $(".subHeaderAccent").hide();
        $("footer").hide();
        $(".ui-content").css("width", "100%").css("height", "100%").css("margin","0").css("background-color", "#000");

        window.history.replaceState("slideshow", "Slideshow", "slideshow");
    });

    window.addEventListener('onpopstate', function(event) {
        if (event.state === "slideshow") {
            //Close the slideshow
        }
    }
}); 
```

我不确定页面的流程是什么，但您可以使用`replaceState`或`pushState`取决于幻灯片的启动方式

**资源**

*   [https://developer.mozilla.org/en-US/docs/DOM/window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history)
*   [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

# client - Weblogic 不支持 EJB3？

> ID：14043097
> 
> 赞同：3
> 
> 时间：2012-12-26T16:10:23.513
> 
> 标签：client, weblogic, ejb-3.0

我使用 WebLogic Server 10.3.5.0，在其上使用 EJB 2.x 时没有遇到任何问题，但我想部署 EJB3，但它不起作用。我是 java ee 的新手，但是我阅读了很多信息，但没有找到答案。我尝试： 1\. 创建我的简单计算器应用程序

```
package test;

import javax.ejb.Remote;
import java.lang.annotation.*;

@Remote
public interface Calculator {

    public int add(int x, int y);
}

package test;

import javax.ejb.Stateless;
import javax.ejb.Remote; 

@Stateless(name="CalculatorBean", mappedName="EJBCalculatorBean")
@Remote(Calculator.class)
public class CalculatorBean {

    public int add(int x, int y){
        return x + y;
    }

} 
```

这是我的 ejb-jar.xml：

```
<?xml version="1.0"?>

<ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd"
version="3.0" xmlns="http://java.sun.com/xml/ns/javaee">

  <enterprise-beans>

    <session>
      <ejb-name>Calculator</ejb-name>
      <remote>test.Calculator</remote>
      <ejb-class>test.CalculatorBean</ejb-class>
      <session-type>Stateless</session-type>
      <transaction-type>Container</transaction-type>
    </session>
  </enterprise-beans>

  <assembly-descriptor>

    <container-transaction>
        <method>
            <ejb-name>Calculator</ejb-name>
            <method-name>*</method-name>
        </method>
        <trans-attribute>NotSupported</trans-attribute>
    </container-transaction>
  </assembly-descriptor>

</ejb-jar> 
```

我的`weblogic-ejb-jar.xml`：

```
<?xml version="1.0"?>
<!DOCTYPE weblogic-ejb-jar PUBLIC
'-//BEA Systems, Inc.//DTD WebLogic 6.0.0 EJB//EN'
'http://www.bea.com/servers/wls600/dtd/weblogic-ejb-jar.dtd'>

<weblogic-ejb-jar>

    <weblogic-enterprise-bean>
        <ejb-name>Calculator</ejb-name>
        <jndi-name>EJBCalculatorBean</jndi-name>
    </weblogic-enterprise-bean>

</weblogic-ejb-jar> 
```

我也有一个非常简单的application.xml。我将它打包到一个展开的 EAR 文件夹中，然后从 weblogic 控制台安装它。当我尝试“激活更改”时，它失败并显示服务器缺少主界面的消息。

1.  据我所知，EJB3 不需要主界面。
2.  在 EJB3 中，我不必在描述符中指定任何 ejb 信息。注释必须为服务器提供信息。

我对吗？可能是什么问题？

我也尝试使用 appc 工具，但它也错过了主界面。

提前谢谢！

我清理了我的所有 EJB 条目`ejb-jar.xml`，`weblogic-ejb-jar.xml`最后它工作了。问题是我无法从运行在不同 JVM 上的客户端访问我的 bean。这是我的客户代码：

```
import java.util.Hashtable;
import javax.naming.Context;
import javax.naming.InitialContext;
import test.Calculator;

public class Test {

    ;

    /**
     * @param args
     */
    public static void main(String[] args) {

        {
            try

            {
            Hashtable<String, String> env = new Hashtable<String, String>();
            env.put(Context.INITIAL_CONTEXT_FACTORY,"weblogic.jndi.WLInitialContextFactory");
            env.put(Context.SECURITY_PRINCIPAL,"myuser");
            env.put(Context.SECURITY_CREDENTIALS, "mypassword");
            env.put(Context.PROVIDER_URL,"t3://myweblogic:7001");
            InitialContext ctx = new InitialContext(env);

            System.out.println("Initial Context created");

            Calculator calculator  = (Calculator)ctx.lookup("EJBCalculatorBean#test.Calculator");

            System.out.println("lookup successful");
            System.out.println("Calling EJB method . . .");
            System.out.println(calculator.add(3, 6));
            System.out.println("Output will be in Managed server console");
            }

            catch (Exception e)
            {
            e.printStackTrace();
            }

    }
    }
} 
```

在`wlclient.jar;javax.ejb.jar;calculator.jar`我的类路径上有。`calculator.jar`是我部署到服务器的那个（它包含`Calculator.class`和`CalculatorBean.class`）当我在 weblogic 使用的同一 JVM 中运行时，此客户端工作正常，但在不同的 JVM 中出现此错误：

```
Caused by: java.lang.ClassNotFoundException
        ... 24 more
javax.naming.NamingException: Unhandled exception in lookup [Root exception is org.omg.CORBA.MARSHAL:   vmcid: SUN  minor code: 257 completed: Maybe]
        at weblogic.corba.j2ee.naming.Utils.wrapNamingException(Utils.java:83)
        at weblogic.corba.j2ee.naming.ContextImpl.lookup(ContextImpl.java:291)
        at weblogic.corba.j2ee.naming.ContextImpl.lookup(ContextImpl.java:227)
        at javax.naming.InitialContext.lookup(InitialContext.java:392)
        at Test.main(Test.java:37) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:21:13.600

Weblogic 10.3.5 确实支持 EJB3。

您是否尝试`SimpleCalculator`从测试窗口中调用您的 bean `Console`？这样您就可以验证它是否正常工作。

Wrt部署，只需将`.ear`文件放入`DOMAIN_HOMES/applications/my_domain/`文件夹中，它将自动部署，您不必每次都通过控制台部署。

在控制台中测试完这个`SimpleCalculator`bean之后，就可以试试lookup了，这次能用吗？

# postgresql - PostgreSQL B+ 树实现

> ID：14043098
> 
> 赞同：-3
> 
> 时间：2012-12-26T16:10:27.247
> 
> 标签：postgresql, b-tree

我在哪里可以获得 PostgreSQL B+ 树的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:37:54.423

您可以从以下位置下载源代码

[http://www.postgresql.org/ftp/source/](http://www.postgresql.org/ftp/source/)

至于寻找 B+ 树的实现，那是留给您的练习。

# xpages - Xpages 在 extlib 对话框中获取组件值

> ID：14043105
> 
> 赞同：1
> 
> 时间：2012-12-26T16:10:47.483
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

我在 extlib 对话框的面板中定义了一个文档数据源（称为 document1）。在此面板中，它包含对话框内容和对话框按钮栏。在对话框内容中，包含一个自定义控件，该控件具有所有组件，例如 dojo 编辑框、列表框、单选按钮等。在对话框按钮栏中，它包含一个保存按钮。保存时，我无法通过以下 getComponent document.getDocument.getxxx 从任何组件获取值：

```
 print (getComponent.getValue("control"));
 print (document1.getDocument(true).getValueInString("control"));
 print (document1.getValue("control")); 
```

有趣的是知道 document1.sertValue("control", newvalue) 和 document1.getDocument(true).isNewNote() 都在工作。

对话框从重复中的视图列打开。所有数据都正确显示在对话框中。我可以保存修改后的数据，检索它们并毫无问题地显示它们。唯一让我无法获得他们处理价值的东西。

Save 事件处理程序已完全更新，并为面板设置了部分执行模式

面板忽略其参数并将范围设置为请求但没有运气。

非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:56:53.790

您需要考虑和/或检查许多事项：

*   确保您确实掌握了该控件。由于它位于自定义控件中，因此您可以轻松拥有多个控件。在这种情况下，您要么需要自己的功能`getComponentChild(parentName,controlName) or (IMHO better) you read it from the compositeData of the customControl (which is a MAP)`
`*   when you bind a control, it is esier to go after its binding than to use `getValue()`. So when you bind to `document.subject`, look for that value (or `viewScope.someValue` if you bound it to the viewScope)`
*   `if validation fails in the submission or you query at an earlier phase, you can't use `getValue()` but need to use getSubmittedValue()`因为它包含验证发生之前的原始值

让我们知道怎么回事

# c# - WPF 是否可以在另一个线程中托管控件？

> ID：14043113
> 
> 赞同：1
> 
> 时间：2012-12-26T16:11:30.803
> 
> 标签：c#, wpf, multithreading, .net-4.0

我有一个 WPF 应用程序，它的主窗口在“默认”UI 线程中启动。我还有其他几个窗口，每个窗口都有自己的 UI 线程（通过调用`System.Windows.Threading.Dispatcher.Run()`）

但是出于特定原因，我希望将这些窗口作为用户控件托管在主窗口中。

是否有可能（将在一个线程中创建的控件托管在另一个线程中创建的窗口中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:17:17.207

很确定答案是否定的，基于不使用 DependencyObject 作为 ViewModel 的基础的论点之一是线程问题。

[KenB 关于这个主题](http://kentb.blogspot.co.uk/2009/03/view-models-pocos-versus.html)

我引用：

> DependencyObject 具有线程亲和性——它只能在创建它的线程上访问。

# razor - 输入隐藏显示不正确的 ID (Guid.Empty)

> ID：14043115
> 
> 赞同：5
> 
> 时间：2012-12-26T16:11:39.217
> 
> 标签：razor, model, asp.net-mvc-4

我想要一个输入（隐藏）字段来存储某个实体的 Id ...

但是这段代码：

```
@Html.HiddenFor(model => model.Id) 
```

生成此 HTML 标记的结果：

```
<input id="Id" name="Id" type="hidden" value="00000000-0000-0000-0000-000000000000" /> 
```

这很奇怪，因为我敢肯定`Model.Id != Guid.Empty`。我可以通过注入`@Model.Id`HTML 来确认它。这工作正常：

```
<input type="hidden" id="Id" name="Id" value="@Model.Id" /> 
```

为什么 View Engine 决定放置这些零而不是正确的 Id？

**编辑**：我没有添加原始代码，因为它非常复杂，但这里是一个超级简单的示例，它显示了几乎相同的行为（它在输入值中使用空字符串而不是 Guid.Empty）：

看法：

```
@using MvcApplication4.Models
@model Foo

@using (Html.BeginForm())
{
    @Html.HiddenFor(model => model.Id)
    @Model.Id

    <input type="submit" value="ok" />
} 
```

控制器：

```
namespace MvcApplication4.Controllers
{
    public class HomeController : Controller
    {
        [HttpGet]
        public ActionResult Index()
        {
            Foo foo = new Foo();
            return View(foo);
        }  

        [HttpPost]
        public ActionResult Index(Foo foo)
        {
            foo.Id = Guid.NewGuid();
            return View(foo);
        } 
    }
} 
```

模型：

```
using System;

namespace MvcApplication4.Models 
{
    public class Foo
    {
         public Guid? Id { get; set; }
    }
} 
```

在后期操作之后问题当然是可见的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T18:33:34.293

这解释了一切。[在这个问题](https://stackoverflow.com/questions/13958390/value-using-html-extension-is-different-than-what-it-is-supposed-to-be-if-two-mo/13958559#13958559)中，您遇到的问题与其他人相同。请查看已接受的答案及其与您的问题相关的*评论。*

# html - 我要检查文本字段

> ID：14043119
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:12:08.327
> 
> 标签：html, asp-classic

我是 HTML 和 ASP 的初学者，我应该编写一个程序，当用户名和密码为 admin 并且用户单击按钮时，程序会打开一个新的 ASP 页面，否则程序会在表中显示无效的用户名或密码。

我写了这段代码，但是当我点击按钮时，程序总是显示新的 ASP 页面！我在记事本中写了这段代码。

```
<html>
<body>

<form method="post" action="Exam1.asp">
    <table cellpadding="20" border="1" align="center" style="text-align:left;">
        <colorgroup>
        <col style="background-color:pink">
            <col style="background-color:pink">
        </colorgroup>

        <tr>
            <td>
                <p>UserName:</p>
                <p>Password:</p>
            </td>
            <td>
                <input type="text" name="Username">
                <br>
                <br>
                <input type="password" name="Password">
            </td>
        </tr>
        <tr>
            <td><input type="submit" value="Button"></td>
            <td>
                <%If Session("Username")="admin"&Session("Password")="admin" Then%>
                    <form method="post" action="Exam1.asp">
                    </form>
                <%Else%>
                    Invalid username or password.
                <%End If%>
            </td>
        </tr>
    </table>
</form>

</body>
</html> 
```

感谢帮助。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:24:57.240

当您单击名为 的提交按钮`Button`时，它会将您带到`Exam1.asp`用户在表单中键入的信息并将其发送给它。`Sesson("Username")`并且`Sesson("Password")`尚未在您的代码中定义，但`Exam1.asp`它们将保存用户键入的数据。

# c# - 有没有办法在 ServiceStack 中禁用默认端点？

> ID：14043122
> 
> 赞同：3
> 
> 时间：2012-12-26T16:12:21.587
> 
> 标签：c#, rest, servicestack

默认情况下，服务堆栈启用了[默认端点](https://github.com/ServiceStack/ServiceStack/wiki/Endpoints)。

我可以使用以下方法禁用 Soap 端点：

```
SetConfig(new EndpointHostConfig 
{
    EnableFeatures = Feature.All.Remove(Feature.Soap)
}); 
```

我只想留下 REST 端点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:35:38.980

ServiceStack 中的大多数功能都封装在[模块化和可配置的插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)中。由于预定义的路由功能会**自动为您预先注册**（即默认启用），因此您需要在 AppHost.Configure() 中明确删除它，就像您使用任何插件一样：

```
Plugins.RemoveAll(x => x is PredefinedRoutesFeature); 
```

警告：通常不建议这样做，因为它会破坏[内置 ServiceClient 的](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)工作，因为除非使用显式路由指定，否则它会退回到使用预期存在的预定义路由。

基本上，如果您打算使用 .NET 服务客户端，我强烈建议您不要删除此功能，我看不出有什么好的理由删除它，因为它不属于通用代码路径，因此不会导致任何性能损失- 它只是限制了内置功能。

# android - 从 Github 下载 Android 库到 IntelliJ Idea

> ID：14043123
> 
> 赞同：1
> 
> 时间：2012-12-26T16:12:22.550
> 
> 标签：android, github, intellij-idea, android-library

是否可以从 Github 将 Android 库直接下载到 IntelliJ Idea 12 中的 Android 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T16:26:49.120

[您可以使用JitPack](https://jitpack.io)将 Android 库直接下载到您的构建中。基本上你告诉它你想要哪个存储库，它会为你构建它。构建完成后，您可以将该库用作依赖项。

如果您使用的是 gradle，那么您可以将其添加到 build.gradle：

```
repositories {
    maven { url "https://jitpack.io" }
}

dependencies {
    compile 'com.github.Owner:Repository:Version'
} 
```

您也可以在 jitpack.io 网站上输入 github repo url，它会为您提供粘贴到构建文件中的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:27:08.013

它应该适用于库项目的源代码，在项目目录下执行检出，然后为该目录配置一个新模块，启用 Android 方面并启用**“库项目”**选项，然后将此模块作为[依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)项添加到您的主应用程序。

# c# - 为什么此超链接会失败或消失？

> ID：14043124
> 
> 赞同：0
> 
> 时间：2012-12-26T16:12:23.710
> 
> 标签：c#, hyperlink, winrt-xaml, windows-phone-8, windows-store-apps

我试图替换这两个按钮中的第二个：

```
 <Button x:Name="buttonRecordWhereabouts" Margin="24" Tap="ButtonRecordWhereabouts_OnTap">Record My Whereabouts...</Button>
    <Button x:Name="buttonlinkManageInvitations" Grid.Row="1" Tap="ButtonlinkManageInvitations_OnTap">Manage Invitations...</Button> 
```

...使用此超链接：

```
 <Hyperlink x:Name="hyperlinkManageInvitations" Grid.Row="1" Click="HyperlinkManageInvitations_OnClick">Manage Invitations...</Hyperlink> 
```

...并在超链接的 Click 处理程序中使用此代码：

```
private void HyperlinkManageInvitations_OnClick(object sender, RoutedEventArgs e)
{
    NavigationService.Navigate(
        new Uri("//TaSLs_Pages/InvitationManagePage.xaml", UriKind.Relative));
} 
```

但是，这样做会导致 XAML 编辑器停止呈现我的页面，因为 "Grid.Row="1"" 无法识别。？？？所以我删除了它，这解决了语法错误，不仅是超链接，还有它“消失”之前的按钮——也就是说，它们不再在页面上可见。

所以不可能将超链接放在特定的单元格中（在我的例子中是第 0 列，第 1 行），还是什么？

到目前为止，我已经在按钮的（我现在放回去了）点击事件中获得了超链接的点击事件代码；这是在 Windows Phone 中导航的方式吗（与 Windows Store 应用程序中的*Frame.Navigate(typeof()) 不同？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:53:39.420

`Hyperlink`旨在在 a 内部使用`RichTextBox`。在您的情况下，您应该使用`HyperlinkButton`.

```
<HyperlinkButton x:Name="hyperlinkManageInvitations" Grid.Row="1" Click="HyperlinkManageInvitations_OnClick">Manage Invitations...</HyperlinkButton> 
```

# android - 当 TextToSpeechService 不存在时在 Android API 8 中使用什么

> ID：14043125
> 
> 赞同：0
> 
> 时间：2012-12-26T16:12:24.390
> 
> 标签：android

当 TextToSpeechService 不存在时在 Android API 8 中使用什么。 [http://developer.android.com/reference/android/speech/tts/TextToSpeechService.html](http://developer.android.com/reference/android/speech/tts/TextToSpeechService.html)

我可以用别的吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:50:35.547

Android 1.6有[TextToSpeech](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#getEngines%28%29) API。 [本](http://android-developers.blogspot.com/2009/09/introduction-to-text-to-speech-in.html)教程应该会有所帮助。

# grails - 使用 Grails Jenkins 插件构建时执行脚本出错？

> ID：14043127
> 
> 赞同：1
> 
> 时间：2012-12-26T16:12:29.463
> 
> 标签：grails, groovy, jenkins

当尝试使用 Jenkins 编译一个简单的 Grails 2.1 应用程序时，由于以下原因，我遇到了失败：

> 错误执行脚本编译时出错：启动失败：/tmp/jenkins-grails/projects/EskridgeBudget/scriptCache/_GrailsCompile_groovy.class（没有这样的文件或目录）

在我得到的链条上更进一步：

> 无法加载 Logmanager“org.apache.juli.ClassLoaderLogManager”

这可能相关也可能不相关。

我可以在同一个盒子上成功地从命令行构建同一个项目。

## 版本信息

*   Grails 命令行版本是`Grails version: 2.1.1`.
*   詹金斯版本是`1.492`
*   Grails Jenkins 插件版本是`1.6.3`

## 完整的控制台输出：

> 由用户匿名开始在工作区 /srv/jenkins/jobs/MyBudget-BUILD/workspace [workspace] $ hg showconfig paths.default [workspace] $ hg pull --rev default [workspace] $ hg update --clean --rev默认 0 个文件已更新，0 个文件已合并，0 个文件已删除，0 个文件未解决 [工作区] $ hg log --rev 。--template {node} [工作空间] $ hg log --rev 。--template {rev} [工作空间] $ hg log --rev ac19aee9ab6db38a6b42c72f41d0bc0fa0c59511 [工作空间] $ hg log --template "{desc|xmlescape}{file_adds|stringify|xmlescape}{file_dels|stringify|xmlescape}{files|stringify| xmlescape}{parents}\n" --rev default:0 --follow --prune ac19aee9ab6db38a6b42c72f41d0bc0fa0c59511 [workspace] $ grails -Dgrails.work.dir=/tmp/jenkins-grails compile --non-interactive 参数：-Dgrails。工作。
> 
> | 加载 Grails 2.1.1 | 配置类路径 | 错误执行脚本编译时出错：启动失败：/tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure1.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure2.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure2_closure6.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure2_closure6_closure7.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure3.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure3_closure8.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure3_closure8_closure9.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure4.class（没有这样的文件或目录）
> 
> /tmp/jenkins-grails/projects/MyBudget/scriptCache/_GrailsCompile_groovy$_run_closure5.class（没有这样的文件或目录）
> 
> 10 个错误（使用 --stacktrace 查看完整跟踪） 构建步骤 'Build With Grails' 将构建标记为失败 Finished: FAILURE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:15:33.960

确保`/tmp/jenkins-grails/`Jenkins 进程有权使用的路径。（和/或：当您在 Jenkins 之外成功运行时，以相同的方式设置 grails 工作目录，如果您目前没有，则进行验证）。

# ios - iOS 设置屏幕创意

> ID：14043130
> 
> 赞同：0
> 
> 时间：2012-12-26T16:12:45.233
> 
> 标签：ios

我正在构建一个通用应用程序，现在正在“设置”屏幕上工作。设置屏幕很简单，带有一个滑块控件和两个开关控件。我没有使用设置包并使用简单的 NSUserDefaults 类。我正在检查 pttrns.com 网站，非常喜欢下面屏幕截图中的设置屏幕。我想开发一个类似的，想知道它是如何完成的，并从这里的人那里得到一些想法。我是 iOS 新手，非常感谢任何帮助。

另外，我可以免费下载任何指向良好背景的指针（类似于下面显示的）？![在此处输入图像描述](../Images/72d9571cb64f2094294100004a173339.png) 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:20:45.970

一个很好的背景和图案网站是[Subtle Patterns](http://www.subtlepatterns.com "微妙的图案")。我已经在几个项目中使用了它并且喜欢它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:22:47.780

从外观上看，他们使用的是 grouped `UITableView`，每个“设置”控件都有一个部分，每个控件的描述作为部分页脚。

因此，设置一个具有时髦背景的分组表格视图，就像*Erway Software*建议的那样，然后如果您需要帮助将 UISwitches 添加到您的表格视图，只需看看这个问题：[UISwitch in a UITableView cell](https://stackoverflow.com/questions/3770019/uiswitch-in-a-uitableview-cell) - add a method that update NSUserDefaults every相应的 Switch 值改变的时间。

# html - 固定列数上的动态单元格数

> ID：14043131
> 
> 赞同：1
> 
> 时间：2012-12-26T16:13:02.993
> 
> 标签：html, css, layout

是否可以在具有固定列数（例如 4）的容器内分配动态数量的单元格。我想做的是：

```
<div class="container_4">
    <div class="cell">Cell 1</div>
    <div class="cell">Cell 2</div>
    <div class="cell">Cell 3</div>
    <div class="cell">Cell 4</div>
    <div class="cell">Cell 5</div>
    <div class="cell">Cell 6</div>
    <div class="cell">Cell 7</div>
</div> 
```

在不指定每 4 个单元格后行结束的位置的情况下，这应该如下所示：

```
Cell 1    Cell 2    Cell 3    Cell 4
Cell 5    Cell 6    Cell 7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:22:44.270

如果我做对了，这可能对你有用：

```
#container_4 {
    width: 400px; /* Change to your container width */
}

.cell {
    width: 25%; /* Use different percentages for a different number of columns */
    float: left;
} 
```

然后，如果您需要单元格上的边距，请进行数学运算，例如：

```
.cell {
    width: 23%; /* 1/4 the container width - margin x 2 */
    margin: 1%; /* Your margin */
    float: left;
} 
```

或者使用 CSS3 属性`box-sizing`并用填充来给你的盒子边距：

```
.cell {
    width: 25%;
    padding: 1%;
    float: left;
    /* This will make the specified with include padding's and borders */
    box-sizing: border-box; /* Standard syntax */
    -moz-box-sizing: border-box; /* Firefox */
    -webkit-box-sizing: border-box; /* Safari */
} 
```

*注意：该`box-sizing`属性不适用于**ie7**。在 quirks 模式下，**ie6**默认使用 " `border-box`" 模型（有关 ie6 盒子模型错误的更多信息，请参见[此处](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:37:50.940

## CSS

```
.container_4{
width:480px;
height:160px;
background:#EFEFEF;
}

.cell{
border:solid 1px #999;
float:left;
height:58px;
margin-left:10px;
margin-top:10px;
width:98px;
background-color:White;
} 
```

[在这里演示](http://jsfiddle.net/MyX7N/)

# html - 具有不同高度和宽度的 CSS Sprites

> ID：14043132
> 
> 赞同：0
> 
> 时间：2012-12-26T16:13:04.113
> 
> 标签：html, css, sprite

下午，希望你们都有一个美好的圣诞节。

为了尽可能减少 HTTP 请求，我想制作一个包含所有用于背景的图案的精灵。我已经为网站制作了 2 个精灵，但都使用特定的高度和/或宽度尺寸

是否可以使用背景重复 X 和 Y 和/或使用 width=100% 的精灵？

我有这些文件：

```
blog.png (65px*65px)
contacts.png (67px*100px)
intro.png (50px*50px)
portfolio.png (80px*80px) 
```

对于每个我都有这样的 CSS：

```
#intro{width:100%;background:url(../img/pat/intro.png) repeat}
#portfolio{width:100%;background:url(../img/pat/portfolio.png) repeat;padding-bottom:30px}
#contact{background:url(../img/pat/contacto.png) repeat;padding-bottom:50px} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:19:21.533

精灵和重复并没有真正结合起来。有一个技巧，`-moz-image-rect`但[它似乎是 Gecko-only](https://stackoverflow.com/questions/5051784/css-sprites-and-repeating-backgrounds)。

当然，您可以将多个 Y 重复图像并排放置在一起，或者将多个 X 重复图像放在一起；但是如果你想在 X 和 Y 方向上重复，它必须是一个单一的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:18:35.760

我认为不可能这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:18:48.877

CSS2 sprite 很难应用，因为您仅限于将 sprite 用于具有指定宽度/高度的非重复模式。例如，我会使用 css sprite 进行具有固定宽度/高度的图像翻转，然后`background-position: 0 -10px;`如果图像高 10px 并且通过垂直堆叠图像创建 css sprite 则只需调用。

CSS3 通过允许您进行背景裁剪或其他创新方式为您提供更好的控制。我会做一个谷歌搜索以了解更多信息。

如果由我来决定，我不会花这么多时间在这么小的成本节约策略上。HTTP 调用和带宽比以往任何时候都便宜且成本更低。您最好将时间花在压缩 html、减少后端瓶颈以及利用缓存或保存图像上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:58:12.287

根据它们重复的方式，有 4 种类型的 CSS 背景图像，其中 3 种可以组合成 CSS 精灵，唉，3 种不同的精灵（仍然比 30 幅图像更高效）。

*   `no-repeat`1 个精灵中的背景，
*   `repeat-x`第二个精灵中的背景，
*   `repeat-y`第三个精灵的背景，
*   重复的背景必须保持原样

你有不同大小的背景，比如`repeat-x`背景，宽度为 32、33、50 和 80 像素。我得到的建议是选择最大的一个并制作一个带有这种大小的条纹的精灵（这里是 80 像素）。然后，无论每个图像的确切宽度如何，您只需应用`background-position`、、等。如果您将 32px 图像替换为 33px 之一，您将不必替换所有以下图像并在 Photoshop 中将所有图层仔细翻译 1px！ 如果除了一个 80 像素的宽度之外，所有宽度都为 33 像素，那么您可以选择通过安全性制作 40 像素的条纹并将其放在最后，使其成为一种特殊情况。`0``-80px``-160px``background-position`
`80px`

与精灵无关，您还可以阅读有关新`background-*`属性的信息（如`background-size: cover`）：

*   [http://www.css3files.com/background/](http://www.css3files.com/background/)
*   [http://www.standardista.com/css3/css3-background-properties/](http://www.standardista.com/css3/css3-background-properties/)
*   [poylfill 用于较低版本的 IE](http://louisremi.github.com/background-size-polyfill/)

# algorithm - 需要数论优化

> ID：14043133
> 
> 赞同：0
> 
> 时间：2012-12-26T15:50:23.213
> 
> 标签：algorithm, number-theory

给定一个整数 n 找到最小整数 x 使得 φ(x) = n。

**(10^5 < n < 10^8)**

我知道搜索的下限是**n+1**而上限是

**n/((pow(e,0.577)*log(log(n))) + (3.0/(log(log(n)))))**

您能否提供任何其他方法来做同样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:16:36.200

您的问题已迁移到 stackexchange Mathematica。请参阅 Maxim Rytin 的 Mathematica 实现 invphi.nb，网址为[http://library.wolfram.com/infocenter/MathSource/696/](http://library.wolfram.com/infocenter/MathSource/696/)。此代码可以轻松处理您范围内的整数 n。

另见 Bressoud 和 Wagon 的《计算数论课程》第 3 章。

# asp.net-mvc - 比较字段

> ID：14043135
> 
> 赞同：1
> 
> 时间：2012-12-26T16:13:14.833
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq

嗨，我正在尝试创建一个注册页面。我正在使用 linq to sql 来创建数据模型。并创建了一个用于访问数据的附加类我不知道这是否是正确的方法，但这就是管理方式让它工作。

这是我的代码：

```
 [Required]
    [DataType(DataType.Password)]
    [Display(Name="Password")]
    public string password
    {
        get { return member.Password; }
        set { member.Password = value; }
    }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Confirm Password")]
    [Compare("Password" , ErrorMessage = "The password and confirm pasword do not match")]
    public string confirmPassword { get;set; } 
```

我的数据库没有确认密码的字段。我正在使用为会员 API 生成的数据库。

当我尝试提交数据时，出现此错误：

```
Could not find a property named Password. 
```

我怎样才能纠正这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:18:50.093

错误是绝对正确的。

`public string password`是小写的，而.Net（大部分）区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:18:41.010

将您的属性名称更改为

```
public string Password 
```

比较***属性***检查属性名称并且区分大小写，因此如果名称不相同，则会遇到您遇到的异常。

# c++ - 如何在运行控制台时更改文本

> ID：14043148
> 
> 赞同：5
> 
> 时间：2012-12-26T16:14:20.183
> 
> 标签：c++

> **可能重复：**
> [如何从 C++ 中的命令行中删除打印的字符](https://stackoverflow.com/questions/11271362/how-to-delete-printed-characters-from-command-line-in-c)

我的问题是，如何在 C++ 中运行控制台窗口时更改文本。例如。

如果我要展示这个。

```
cout<<"0%";
cout<<"25%";
cout<<50%";
cout<<75%";
cout<<"100%"; 
```

它会产生5个不同的单词。如果我希望它显示 0% 然后 25% 而无需创建一个新词，IE 用 25% 替换当前的 0%。这甚至可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T16:17:30.323

使用`cout << number << '\r' << flush`.

意思是“`'\r'`回车”（转到行首），`flush`意思是“确保我刚刚打印的内容现在到达输出。通常只有在提供行尾时才会打印输出。

编辑：如果您遇到输出长度变化的情况，例如倒计时，您必须用足够的空间填充输出以覆盖任何额外的输出。例如`cout << setw(3) << number ...`或`cout << number << " " ...`会工作。

但是请注意，如果您的行变得比终端/命令窗口的宽度更长，它可能会变得混乱。

# android - ListView 项中的动态线性布局

> ID：14043155
> 
> 赞同：1
> 
> 时间：2012-12-26T16:14:42.453
> 
> 标签：android, android-listview

我正在使用带有自定义适配器的 ListView，该适配器获取 JSONArray（来自 Facebook 请求）。每个 ListView 项都有两个 TextView 和一个或两个 ImageView，具体取决于帖子类型。每个列表项还有一个我称之为“评论框”的 LinearLayout。

当我在 xml 中定义列表项时，评论框仅包含标题的 TextView（“评论和喜欢”）。在自定义适配器中，解析评论数据（我希望如此），并以编程方式为每个评论添加 TextViews，这样我就不会无缘无故地创建和膨胀空的 TextViews。

我遇到的问题，这似乎是一个常见的 ListView 回收问题，是评论框在滚动列表时不保留其内容。我查看了 JSON 数据，数组中的每个对象都有相同的“评论”字段，所以我不认为数据中的任何内容都为 null，特别是如果所有其他数据加载和填充都很好. 我不知道我做错了什么，因为其他一切都有效，但这个。这是我的适配器的 getView() 方法。

```
public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    try {
        jsonObject = getItem(position);
        jsonFrom = jsonObject.getJSONObject("from");
        postType = jsonObject.getString("type");
        posterName = jsonFrom.getString("name");
        posterID = jsonFrom.getString("id");
        posterPhoto = "http://graph.facebook.com/" + posterID + "/picture?type=square";
        if (jsonObject.has("name")) {
            posterMessage = jsonObject.getString("name");
        }
        else if (jsonObject.has("story")){
            posterMessage = jsonObject.getString("story");
        }
        else if (jsonObject.has("message")){
            posterMessage = jsonObject.getString("message");
        }
        else{
            posterMessage = "No message.";
        }
        if(jsonObject.has("picture")){
            posterImageURL = jsonObject.getString("picture");
        }
        commentsData = jsonObject.getJSONObject("comments");
        commentsCount = commentsData.getInt("count");

    } catch (JSONException e) {
        e.printStackTrace();
    }

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.post_holder,null);
        holder = new ViewHolder();
        holder.posterName = (TextView) convertView.findViewById(R.id.posterName);
        holder.posterMessage = (TextView) convertView.findViewById(R.id.posterMessage);
        holder.posterProfilePhoto = (ImageView) convertView.findViewById(R.id.posterProfilePic);
        holder.posterImage = (ImageView) convertView.findViewById(R.id.posterImage);
        holder.commentsBox = (LinearLayout) convertView.findViewById(R.id.commentsBox);
        if(postType.equals("photo")){
            holder.posterImage.setVisibility(View.VISIBLE);
        }
        if(commentsCount!=0 && commentsCount!=null){
            try {
                commentsArray = commentsData.getJSONArray("data");
                for(int index = 0; index<commentsArray.length(); index++){
                    comment = commentsArray.getJSONObject(index);
                    commenterName = comment.getJSONObject("from").getString("name");
                    commenterId = comment.getJSONObject("from").getString("id");
                    commentMessage = comment.getString("message");
                    TextView commentMessageHolder = new TextView(activity);
                    commentMessageHolder.setText(Html.fromHtml("<b>"+commenterName+"</b>"+"  "+commentMessage));
                    holder.commentsBox.addView(commentMessageHolder, index+1);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }

        convertView.setTag(holder);
    } 
    else {
        holder = (ViewHolder) convertView.getTag();
        if(postType.equals("photo")){
            holder.posterImage.setVisibility(View.VISIBLE);
        }
        else{
            holder.posterImage.setVisibility(View.GONE);
        }
    }

    if (jsonObject != null) {
        holder.posterName.setText(posterName);
        if (posterMessage != null) {
            holder.posterMessage.setText(posterMessage);
        } else {
            holder.posterMessage.setText("No message for this post.");
        }

        imageLoader.displayImage(posterPhoto,holder.posterProfilePhoto);

        if(postType.equals("photo")){
            if(posterImageURL != null){
                holder.posterImage.setTag(posterImageURL);
                imageLoader.displayImage(posterImageURL, holder.posterImage);
            }
        }
    }

    return convertView;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:24:38.250

> 我遇到的问题，这似乎是一个常见的 ListView 回收问题，是评论框在滚动列表时不保留其内容。

主要问题是您`TextViews` **仅**`convertView`在is的情况下构建评论`null`，当用户滚动时，`ListView`您最终会得到那些最初设置的行视图（带有评论），您不会针对不需要的位置进行修改。将注释`for`循环移到您检查的 if 子句`convertView`之外`null`。

此外，您可能希望缓存该 json 解析，更不用说您需要考虑不要过度添加评论`TextViews`，因为回收的行视图可能已经有自己的评论`TextViews`。

# hibernate - 休眠中的@ManyToAny注解

> ID：14043158
> 
> 赞同：9
> 
> 时间：2012-12-26T16:15:11.170
> 
> 标签：hibernate, annotations

我无法理解 Hibernate 中 @ManyToAny 注释的使用。在什么情况下应该使用它？我用谷歌搜索了它，但几个网站上的解释刚刚在我脑海中浮现......

谁能用一个简单的例子解释一下？它与@ManyToMany 和@ManyToOne 有何不同？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T16:20:36.017

[javadoc](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/ManyToAny.html)说：

> 定义指向不同实体类型的 ToMany 关联。匹配相应的实体类型是通过元数据鉴别器列完成的。这种映射应该只是微不足道的。

因此，您可以在 Student 和 [Course or Teacher] 之间使用 ManyToAny，而不是在 Student 和 Course 之间使用 ManyToAny，并且元数据鉴别器列会说，对于给定的行，如果它指向 Course 或 Teacher。

# sql - 如何从 SQL Server 查询数据？

> ID：14043162
> 
> 赞同：5
> 
> 时间：2012-12-26T16:15:33.943
> 
> 标签：sql, sql-server, vb.net-2010, report-viewer2010

我在从数据库查询数据以在 VB.NET 中生成报告时遇到问题。我使用业务对象来做报告。这是我的示例数据：

```
___________________________________________________________________________
|    |               |          |             |           |               |
| Id |   Item        |   Unit   |  Unit Price |  Quantity |     Amount    |
|____|_______________|__________|_____________|___________|_______________|
|  1 |   Gasoline    |     L    |    $ 2.00   |     10    |   $ 20.00     |
|  1 |   Gasoline    |     L    |    $ 2.50   |     20    |   $ 50.00     |
|  2 |   Water       |  Bottle  |    $ 5.00   |     10    |   $ 50.00     |
|  3 |   Meat        |     Kg   |    $ 14.90  |     15    |   $ 223.50    |
|  1 |   Gasoline    |     L    |    $ 8.00   |     50    |   $ 400.00    |
|  4 |   Milk        |    Can   |    $ 7.45   |     30    |   $ 223.50    |
|  1 |   Gasoline    |     L    |    $ 6.99   |     10    |   $ 69.90     |
|____|_______________|__________|_____________|___________|_______________| 
```

在报告中，我想查看“Id”、“Item”、“Unit”、“Unit Price”（是的，如果它们具有不同的值，我将显示“Undefined”）、“Quantity”（总和相同项目的）和“金额”（相同项目的总和）。但是我试了几次，结果是错误的。如果它们的“单价”根本不是相同的价格，如何计算所有相同项目的“金额”。这是我的预期结果：

```
___________________________________________________________________________
|    |               |          |             |           |               |
| Id |   Item        |   Unit   |  Unit Price |  Quantity |     Amount    |
|____|_______________|__________|_____________|___________|_______________|
|  1 |   Gasoline    |     L    |  Undefined  |     90    |   $ 539.90    |
|  2 |   Water       |  Bottle  |    $ 5.00   |     10    |   $ 50.00     |
|  3 |   Meat        |     Kg   |    $ 14.90  |     15    |   $ 223.50    |
|  4 |   Milk        |    Can   |    $ 7.45   |     30    |   $ 223.50    |
|____|_______________|__________|_____________|___________|_______________| 
```

请帮我....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T16:52:27.937

如果我理解正确，这应该做你想要的：

```
SELECT  A.Id, 
        A.Item, 
        A.Unit, 
        CASE WHEN B.Id IS NOT NULL THEN 'Undefined' ELSE [Unit Price] END [Unit Price],
        A.Quantity,
        A.Amount
FROM (  SELECT  Id, Item, Unit,
                CAST(MIN([Unit Price]) AS VARCHAR(20)) [Unit Price], 
                SUM(Quantity) Quantity, SUM(Amount) Amount
        FROM YourTable
        GROUP BY Id, Item, Unit) A
LEFT JOIN ( SELECT Id
            FROM YourTable
            GROUP BY Id
            HAVING COUNT(DISTINCT [Unit Price]) > 1) B
    ON A.Id = B.Id 
```

添加了一个[sql fiddle](http://sqlfiddle.com/#!3/aa5b6/17)供您尝试。（归功于@bonCodigo，因为我的小提琴基于他已经拥有的小提琴，但使用了我的代码）。

这是结果：

```
ID  ITEM        UNIT        PRICE       QUANTITY    AMOUNT
1   Gasoline    L           Undefined   90          539.9
2   Water       Bottle      5.00        20          99.9
3   Meat        Kg          14.90       15          223.5
4   Milk        Can         7.45        30          223.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:30:47.183

请尝试此代码，

```
select Id, item, unit, sum(quantity) totoal_Qt ,
sum(amount) total_Px  from td
group by id, item, unit
; 
```

结果：

```
ID  ITEM        UNIT    TOTOAL_QT   TOTAL_PX
1   Gasoline    L       90          539.9
2   Water       Bottle  10          50
3   Meat        Kg      15          223.5
4   Milk        Can     30          223.5 
```

[SQLFIDDLE](http://sqlfiddle.com/#!3/aa5b6/1)

* * *

## 使用案例编辑

这是我能得到的最接近的。这是一个很好的问题。为此+1。因此，这个编辑过的答案的缺陷是它会为一个具有**多个的项目显示“未定义”，但是即使一个项目的多个条目具有`unit_prices`****相同`unit_price`**的 ，它也不会显示 unit_price 。答案是完整的`ANSI`语法。

* [SQLFIDDLE](http://sqlfiddle.com/#!3/64ee4/1)

更改了样本数据以测试各种场景。

```
ID  ITEM    UNIT    UNIT_PRICE  QUANTITY    AMOUNT
1   Gasoline    L   2   10  20
1   Gasoline    L   2.5     20  50
2   Water   Bottle  5   10  50
3   Meat    Kg  14.9    15  223.5
1   Gasoline    L   8   50  400
4   Milk    Can     7.45    30  223.5
1   Gasoline    L   6.99    10  69.9
2   Water   Bottle  5   10  49.9 
```

询问：

```
select distinct x.id, x.item, x.unit,
x.total_Qt, x.total_Amt,
case when x.unitPrice = 0
then 'Undefined'
else cast(y.unit_price as varchar(9))
end as UP
from(
select Id, item, unit, sum(quantity) total_Qt ,
sum(amount) total_Amt, 
case when count(unit_price)>1
then 0
else 1 
end unitPrice
from td
group by id, item, unit) as x
left join 
(select distinct id, item, unit, unit_price
 from td) as y
on x.id = y.id
and x.item = y.item
and x.unit = y.unit
; 
```

结果：

```
ID  ITEM        UNIT    TOTAL_QT    TOTAL_AMT   UP
1   Gasoline    L       90          539.9       Undefined
2   Water       Bottle  20          99.9        Undefined
3   Meat        Kg      15          223.5       14.90
4   Milk        Can     30          223.5       7.45 
```

# ios - iOS：如何将 Safari 加载到 UIViewController 上的 uiwebview？

> ID：14043167
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:16:23.573
> 
> 标签：ios, cocoa-touch, webview

我有一个带有 UIWebview 的控制器。我想在我的 webview 上加载一个带有地址栏和导航栏的网页，比如 safari。

我使用这种方法：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

但它总是显示在 safari 浏览器上。

如何使用地址栏和导航栏在我的 webview 上放置 safari？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:21:17.110

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"]; 
NSURLRequest *request = [NSURLRequest requestWithURL:url]; 

[_webView loadRequest:request]; //Where _webView is a reference to your webview 
```

# javascript - 显示我拍摄的照片的缩略图-Phonegap

> ID：14043174
> 
> 赞同：0
> 
> 时间：2012-12-26T16:17:08.847
> 
> 标签：javascript, css, html, cordova, thumbnails

我正在尝试创建我用相机拍摄的照片的缩略图，但我失败了，有人可以给我一个想法吗？

我正在使用 PhoneGap、javascript、html 和 css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:43:57.620

尝试这个：

```
$('#button').click(function(){
    navigator.camera.getPicture(
        function(imageURI){
            $('img').attr('src',imageURI).css({'background-size':  '100%', 'background-repeat': 'no-repeat', 'width': '100px'});
        },
        function(message) { alert('Get picture failed'); },
        { quality: 60, 
        destinationType: navigator.camera.DestinationType.FILE_URI, 
        sourceType: navigator.camera.PictureSourceType.CAMERA,
        mediaType: Camera.MediaType.PICTURE,
        correctOrientation: true  }
        );
}); 
```

# drupal - 本地主机 index.html 不显示

> ID：14043177
> 
> 赞同：0
> 
> 时间：2012-12-26T16:17:23.303
> 
> 标签：drupal

我试图安装 drupal 并根据网站的说明执行以下命令。

```
sed 's/www/www\/drupal/g' default > drupal 
```

当我输入 localhost 时，它似乎重定向到 localhost/drupal

现在我已经卸载了 drupal，当我在浏览器中输入 localhost 时出现 404 错误，我想撤销 sed 命令的效果，所以输入 localhost 只会重定向到 var/www/index.html

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:27:28.317

您必须查看您的虚拟主机配置文件

# iphone - 从主线程或web线程以外的线程获取web lock

> ID：14043178
> 
> 赞同：2
> 
> 时间：2012-12-26T16:17:29.457
> 
> 标签：iphone, ios, multithreading, uikit, webserver

我正在制作一个需要与服务器 (S3) 通信的 iPhone 应用程序。但是，当我执行此代码时：

```
- (void)submit
{
    dispatch_queue_t Q = dispatch_queue_create("Formula Submit", NULL);
    dispatch_async(Q, ^{
        NSMutableArray *formulas = [[NSArray arrayWithContentsOfURL:[NSURL URLWithString:@"https://urlremoved.com"]] mutableCopy];

        if (!formulas)
        {
            formulas = [[NSMutableArray alloc] init];
        }

       [_data addEntriesFromDictionary:[[NSDictionary alloc] initWithObjectsAndKeys:self.explanationTextView.text, @"explanation", nil]];

        [formulas addObject:_data];

        AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithAccessKey:@"Access Key Removed" withSecretKey:@"Secret Key Removed"];

        S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:@"File Name Removed" inBucket:@"Bucket Name Removed"];
        por.contentType = @"application/octet-stream";

        NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:formulas format:NSPropertyListBinaryFormat_v1_0 errorDescription:nil];

        por.data = plistData;
        [s3 putObject:por];
    });

    [self dismissModalViewControllerAnimated:YES];
} 
```

我在控制台中收到此错误/警告：

```
void _WebThreadLockFromAnyThread(bool), 0x20150be0: Obtaining the web lock from a thread other than the main thread or the web thread. UIKit should not be called from a secondary thread. 
```

此消息似乎不会以任何方式影响应用程序性能。它成功上传到 S3，没有明显问题。

本质上，我想知道是否有办法使此消息*消失*。

# javascript - PHP/JS; 将不可见的换行符或换行符转换为 html 标签以进行打印

> ID：14043182
> 
> 赞同：0
> 
> 时间：2012-12-26T16:17:36.757
> 
> 标签：javascript, printing, newline

我正在尝试使用 javascript 从 dbase 打印一个文本字段，其中文本字段由 php 提供给具有 id 的 textarea。print javascript 函数使用 getElementById 从 textarea 获取内容并打印出来。但这是问题所在。为了在文本区域中正确显示，文本字段中有换行符。这些在文本区域中是不可见的。它们只是显示为换行符。（它们在 dbase 表中使用 PHP admin 也是不可见的。它们也显示为换行符）。

但是，要在打印文本时显示换行符，需要将它们转换为 `<br>`. 否则，您会看到并打印一个通俗的句子。

我想我需要在 javascript 变量中搜索一些东西，也许是 \n 并替换为
但是，我似乎无法在打印页面中显示换行符（这是基于 html 的。）

谁能建议正确的方法来做到这一点？谢谢。

有缺陷的代码：js f

```
unction printit(id) {
var toprint = document.getElementById(id).innerHTML;
toprint = toprint.replace("\n","<br>");
win = window.open();
    self.focus();
    win.document.open();
    win.document.write('<'+'html'+'><'+'head'+'><'+'style'+'>');
    win.document.write('body, td { font-family: Verdana; font-size: 10pt;}');
    win.document.write('<'+'/'+'style'+'><'+'/'+'head'+'><'+'body'+'>');
    win.document.write(toprint); 
    win.document.write('<'+'/'+'body'+'><'+'/'+'html'+'>');
    win.document.close();
    win.print();
    win.close();
  } 
```

html

```
<textarea id="textarea">A whole bunch
of text
with line breaks
goes here
</textarea><a href="javascript:void(0);" onclick="printit('textarea');">Print text</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:22:08.407

您可能只替换第一个换行符。尝试使用全局标志来替换它们：

```
toprint = toprint.replace(/\n/g, '<br />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:46:01.553

我相信您需要完全按照它在文本区域中的显示方式打印出来。textarea 对其内容应用换行。这些不是换行符，因此不能被*替换*。

在打印之前将内容附加到与**textarea 宽度相同**的元素。

IE

```
...
win.document.write('<'+'/'+'style'+'><'+'/'+'head'+'><'+'body'+'>');

// element with same width as textarea
win.document.write('<div style="width: '+ document.getElementById(id).offsetWidth +'px">');
win.document.write(toprint); 
win.document.write('</div>'); 

win.document.write('<'+'/'+'body'+'><'+'/'+'html'+'>');
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T12:47:13.427

在 HTML 中显示换行符的最佳解决方案是使用 CSS *white-space*属性。

# google-drive-api - 如何集成 Google Drive 和 Spreadsheet API，以处理特定 Google Drive 文件夹中的电子表格？

> ID：14043184
> 
> 赞同：5
> 
> 时间：2012-12-26T16:17:42.827
> 
> 标签：google-drive-api, google-spreadsheet-api

Google Drive API 和 Google Spreadsheet API (v 3.0) 都支持获取与以下 URL 对应的 [KEY] 的方法：

https://docs.google.com/spreadsheet/ccc?key=[KEY]

我对 Google Drive API 使用 File.getId() 方法，对 Google Spreadsheet API 使用 SpreadsheetEntry.getId 或 .getKey() 方法。

谷歌云端硬盘 API...

```
for (File file : mResult) {
    System.out.println(file.getTitle());
    System.out.println(file.getId());
} 
```

谷歌电子表格 API...

```
SpreadsheetEntry spreadsheet = spreadsheets.get(0);
System.out.println(spreadsheet.getKey()); 
```

我的麻烦是我在 Drive 和 Spreadsheet API 之间找不到任何公共键，但是这两个键都链接到同一个资源......当用于替换浏览器中的 [KEY] 字段时，它们都检索同一个电子表格。

我正在尝试识别 Google Drive 中特定文件夹中存在的电子表格，然后使用电子表格 API 仅处理这些文件。SpreadSheet API 似乎只能返回 Google 驱动器上的所有文件——我看不到按文件夹限制结果的方法。因此，为什么我必须结合这两个 API。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T06:28:51.607

通过此 URL 通过 google id 获取工作表

```
https://spreadsheets.google.com/feeds/worksheets/" + googleId + "/private/full" 
```

“googleId”来自驱动 SDK。工作表更像是驱动器上的电子表格文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:41:22.813

遇到了完全相同的问题！

刚刚发现电子表格.getSpreadsheetLink().getHref() 返回一个以文件ID结尾的链接。

# javascript - Javascript：如何从文本文件的特定部分加载数据？

> ID：14043193
> 
> 赞同：2
> 
> 时间：2012-12-26T16:18:34.197
> 
> 标签：javascript, node.js

假设我有一个名为 test.txt 的文本文件，其内容如下：

```
Apples.Purchased: 100
Oranges.Purchased: 202
Bananas.Purchased: 140 
```

如何在文本文件中搜索“Oranges.Purchased”，获取其后面的数值并将其应用于 javascript 变量？

作为记录，我使用 fs.write 来保存数据：

```
var fs = require('fs');
fs.writeFile("test.txt", outputdata, function(err) {
        if(err) {
        console.log(err);
        } else {
            console.log("The file was saved!");
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:31:09.513

您可以将文件作为文本读取，然后使用正则表达式查找您的文本：

```
fs.readFile("test.txt", function(err, data){
  var regex = /^Oranges.Purchased: ([0-9]+)/;
  var result = regex.exec(data);
  console.log(result[1]);
}); 
```

虽然你会想要防弹（检查错误，不要只是假设你找到了文本等）。

但我一般不推荐这种方法。为什么不将文件写为 JSON：

```
{
  "Apples": {
    "Purchased": 100
  },
  "Oranges": {
    "Purchased": 140
  }
  "Bananas": {
    "Purchased": 202
  }
} 
```

可以在没有任何字符串争论的情况下生成和解析；你可以序列化你的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:22:56.267

解析成 JSON 是这里的理想解决方案。

但是，让我玩个鬼鼓吹，提供非json的解决方案，就是逐行扫描文件，比较关键字和目标值。如果它们匹配，那么我们将值分配给一个变量。

当然，这假设数据格式严格如您在此处显示的那样。也就是说，对于每一行，都有一个 (Keyword:Value) 对。如果没有，这可能会提高。

```
target = 'Oranges.Purchased'
value_to_save = None
file = open('/tmp/contents.txt', 'r')

for i in file.readlines():
    value_pair = i.split(':')
    if value_pair[0].strip('') == target:
        value_to_save = value_pair[1].strip('')
        break

print value_to_save 
```

# tsql - 创建视图并获取重复事务

> ID：14043205
> 
> 赞同：0
> 
> 时间：2012-12-26T16:19:36.120
> 
> 标签：tsql, view, outer-join

我有以下看法：

```
SELECT     t.CompanyCode, t.FlatFileName, t.RecordNumber, t.Status, t.Branch, t.SalesMonthYear, t.SalesCashOrLimboCode, t.PageNumber, t.Driver, t.Truck, 
                      t.CommonProductCode, t.CashCharge, t.SpecialFunction, t.ProductCode, t.UnitOfEntry, t.TransactionBranch, t.AccountNumber, t.ReferenceNumber, t.TransactionDate, 
                      t.PercentFullOrWhenDueCode, t.Quantity, t.DeliveryAccountNumberForTankRentals, t.Amount, t.SalesTax, t.ProductCode2Amount, t.TankSerialNumber, t.SalesMonth, 
                      t.TaxCode, t.SubjectToTax, t.SalesTaxRate, t.ExiseTaxRate, t.FrankHasntDecidedWhatThisFieldIs_ProbablyCentury, t.OriginalSalesMonth, t.AutoCharge, 
                      t.ProductCode2, t.ProductCode2SpecialFunction, t.DiscountCode, t.DiscountRate, t.DiscountDays, t.Century, t.TRFRPD, t.OpenItemAmountPaid, 
                      t.OpenItemReferenceNumber, t.InvoiceFlag, t.InvoiceNumber, t.Time, t.GasQuantity, t.AnodeReading, t.Reading, t.Reason, t.InventorySerialNumber, t.SName, 
                      t.ErrorCode, t.MasterBillingBranchAccountNumber, t.LeaseOnFile, t.PuchaseOrderNumber, t.BillOfLaden, t.Latitude, t.Longitude, t.ContractGasPrice, t.Balance, 
                      t.DeliveryAccount, t.BranchAccountNumber, t.LineNumber, t.DateTimeEntered, t.UserThatEntered, t.WorkstationThatEntered, t.YearMonthDayPosted, 
                      t.HourMinutePosted, t.UserThatPosted, t.WorkstationThatPosted, t.CreditCardNumber, t.CreditCardExperationDate, t.CreditViolation, t.TransactionId, t.CorporationId, 
                      t.IsUpdated, t.IsAdded, t.ClearUpdateAndAdded, p.Description
FROM         Company.Product AS p LEFT OUTER JOIN
                      Company.[Transaction] AS t ON p.ProductCode = t.ProductCode AND p.CorporationId = t.CorporationId 
```

我想要完成的主要事情是从产品表中获取产品描述并将其添加到事务表中。它必须基于 ProductCode。

我应该只获得每笔交易一次，但我会获得每笔交易的多个副本。我知道每个公司都有产品，所以我认为是因为它看到了这些？

从这个[网站](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)，它说使用左外连接：

> 此连接返回左表中的所有行以及右表中的匹配行。如果右表中没有匹配的列，则返回 NULL 值。

我没有在描述中得到空值，所以我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:26:46.590

我会改变你的桌子的顺序：

```
SELECT  <yourcols>
FROM   company.[transaction] AS t 
LEFT OUTER JOIN company.product AS p 
   ON t.productcode = p.productcode
   AND t.corporationid = p.corporationid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:24:52.680

您可能希望加入该产品的交易，因为每个产品都有不止一个交易。我会在您的联接中交换订单，并且我也不会在 OUTER 联接中使用，因为在您的场景中，您希望您查询的所有交易都存在 1-1（即没有没有产品的交易）

# algorithm - 寻找城市所连接的最大陆地的算法 ？

> ID：14043210
> 
> 赞同：4
> 
> 时间：2012-12-26T16:20:13.397
> 
> 标签：algorithm, data-structures, geospatial, connectivity, gaps-and-islands

我有一张世界地图的黑白照片。

我将像素转换为由坐标 (i, j) 索引的二进制值网格（0 表示水，1 表示陆地）。现在，假设我在陆地上随机选择一个点，这次是在美国德克萨斯州的某个地方。我想知道我可以到达的所有点的 (i, j) 坐标，*而不必穿越水*。在这种情况下，它将是整个北美和南美的任何 (i, j)（减去任何周围的岛屿）。

（这背后的动机是我试图在 c 中并行实现 SIR 感染模型。）

非常感谢您的帮助。

**编辑：**如果有任何近似方法，我也很感兴趣（如果错误地包括了一些小的近海岛屿，我不会过分大惊小怪。），也许是像四叉树这样的网格划分方法？再次感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T16:22:47.393

您正在寻找一种[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)。它可以递归地完成，也可以手动维护堆栈或使用队列。

# objective-c - 在 viewDidLoad 中显示 UIActivityIndi cator

> ID：14043212
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:20:26.767
> 
> 标签：objective-c, ios, uiactivityindicatorview

我正在开发一个应用程序，该应用程序通过 JSON 从网络服务器获取数据到`UITableViewController`.

加载数据需要时间，所以我想在`viewDidLoad`.

这是我的第一个应用程序，所以我需要更多关于如何做的简报。

## `viewDidLoad`方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *categoryId = catId;
    NSString *post =[NSString stringWithFormat:@"categoryId=%@",categoryId];
    NSString *cat = [NSString stringWithFormat:@"&cityId=%@",cityId];
    NSString *hostStr = @"http://localhost:8888/iphone-so/bycategory.json.php?";
    hostStr = [hostStr stringByAppendingString:post];
    hostStr = [hostStr stringByAppendingString:cat];

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
    NSError *error;
    productsRaw = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    products = [productsRaw objectForKey:@"products"];
    productKeys = [products allKeys];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:25:07.837

您可以使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)，只需将 MBProgressHUD.h 和 MBProgressHUD.m 文件添加到您的项目中（如果您启用了 ARC，您可能需要转换为 ARC）

```
 // Add right after your [super viewDidLoad]; ] your start connection method or in viewdidload whatever....
- (void)viewDidLoad
{
    [super viewDidLoad];
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading...";

     // rest of the code goes here
}

// Add at start of requestFinished AND requestFailed
[MBProgressHUD hideHUDForView:self.view animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:54:23.207

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // create the activity indicator
    UIActivityIndicator *indicator = [UIActivityIndicator alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGrey];

    // add it
    [self.view addSubview:indicator];

    // animate it
    [indicator startAnimating];

    // your code
    NSString *categoryId = catId;
    NSString *post =[NSString stringWithFormat:@"categoryId=%@",categoryId];
    NSString *cat = [NSString stringWithFormat:@"&cityId=%@",cityId];
    NSString *hostStr = @"http://localhost:8888/iphone-so/bycategory.json.php?";
    hostStr = [hostStr stringByAppendingString:post];
    hostStr = [hostStr stringByAppendingString:cat];

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
    NSError *error;
    productsRaw = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    products = [productsRaw objectForKey:@"products"];
    productKeys = [products allKeys];

    // stop animating the indicator
    [indicator stopAnimating];
} 
```

# java - 如何删除Java字符串中的嵌入式大括号？

> ID：14043226
> 
> 赞同：5
> 
> 时间：2012-12-26T16:21:34.220
> 
> 标签：java, regex, string, replaceall

我有一个 Java 字符串，它*可能*在一个较大的字符串中多次包含“ `{`”和“ ”对：`}`

```
"My name is {name}. I am a {animal}. I like to {activity} whenever it rains." 
```

等等。我正在尝试编写代码来删除这些对的所有实例：

```
"My name is . I am a . I like to whenever it rains." 
```

这些对可以出现在字符串中的*任何位置*，并且可能根本不会出现。显然 a`String#replaceAll(someRegex, "")`在这里是有序的，但我似乎无法`someRegex`正确：

```
// My best attempt.
String stripped = toStrip.replaceAll("{*}", ""); 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T16:26:06.097

要匹配`{`，您需要转义它。因为它在正则表达式中有一些特殊的含义。所以，你需要`\\{`和`\\}`。或者您也可以将它们包含在字符类中。

然后要匹配它们之间的任何内容，您可以使用`.*`. A`dot (.)`匹配任何字符。And`*`是一个量词，表示匹配`0 or more`。

所以，你的正则表达式将是： -

```
\\{.*?\\} 
```

或者： -

```
[{].*?[}] 
```

请注意，我在那里使用了一个不情愿的量词 - `.*?`。注意`?`最后。`}`在这种情况下，它用于匹配到第一个。如果您使用`.*`而不是`.*?`，您的正则表达式将覆盖从第一个`{`到最后一个的完整字符串`}`，并替换所有内容。

`character class`此外，一个特殊的正则表达式元字符，在 a -that 中使用时没有特殊含义`[]`。这就是为什么，当你这样使用它时，你不需要逃避它们。因此是第二个正则表达式。

这看起来很简单，不是吗？好的，现在是时候通过一些教程来了解更多关于`Regular Expression`. 您可以从[http://www.regular-expressions.info/tutorial.html开始](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:32:12.570

尝试使用最简单的正则表达式`\{\w*\}`，如下所示：

```
 String s  = "My name is {name}. I am a {animal}. I like to {activity} "+
                "whenever it rains.";
    System.out.println(s.replaceAll("\\{\\w*\\}", "")); 
```

上面的正则表达式将 {} 中包含的单词字符条带化。如果您想包含某些特殊字符，请将它们与`\w`大括号内提到的一起包含在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:27:20.503

`replaceAll("\\{.*?\\}", "")`应该做的工作

```
String stripped = "My name is {name}. I am a {animal}. I like to {activity} whenever it rains.".replaceAll("\\{.*?\\}", "");
System.out.println(stripped); 
```

印刷`My name is . I am a . I like to whenever it rains.`

# web-services - 在 iOS 中调用 restful web 服务

> ID：14043232
> 
> 赞同：2
> 
> 时间：2012-12-26T16:22:29.027
> 
> 标签：web-services

我从 iOS 调用 Web API，我调用方法 POST，我不能在 post 方法中传递参数

网络接口：

```
public class Person
{
    public int Id { get; set; }
    public String Name { get; set; }
} 
```

* * *

```
 // POST api/values
public void Post([FromBody]Person value)
{

} 
```

在 iOS 中

```
NSURL *url =[NSURL URLWithString:@"http://localhost:9281/api/values"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
[theRequest setHTTPMethod:@"POST"];

NSURLConnection *theConnection = [[NSURLConnection alloc]initWithRequest:theRequest delegate:self]; 
```

如何在POST方法中传递值参数Person？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:29:43.680

```
NSMutableURLRequest *request = [NSMutableURLRequest 
                                    requestWithURL:[NSURL URLWithString:@"http://www.domain.com/your/servlet"]];

NSString *params = [[NSString alloc] initWithFormat:@"foo=bar&key=value"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

这是来自这篇博文：http: [//www.deanoj.co.uk/ios-development/making-a-http-post-request-with-nsurlconnection/](http://www.deanoj.co.uk/ios-development/making-a-http-post-request-with-nsurlconnection/)

# css - 如何纠正与标题重叠的div

> ID：14043241
> 
> 赞同：2
> 
> 时间：2012-12-26T16:23:17.427
> 
> 标签：css, positioning

**编辑**：添加 jsFiddle：http: [//jsfiddle.net/gdHuh/](http://jsfiddle.net/gdHuh/)

在我的页面上有一个带有底部边框的标题。标题和边框之间有填充。浮动在标题区域的右侧，触摸底部边框，是一个搜索框。这是它的样子：

![在此处输入图像描述](../Images/b337959514fe26d240dce8cb4256319d.png)

但是，当标题和搜索框文本过长时，部分标题文本会被搜索框隐藏：

![在此处输入图像描述](../Images/f4cd638bc71cf4c2392dda50af49e31e.png)

这就是我希望它在这种情况下的样子：

![在此处输入图像描述](../Images/40814261b7778db11dbd0dc6f280565b.png)

这是我的 HTML：

```
<div class="row">
    <div class="column column8">
        <h1>Internship Reviews &amp; Rankings</h1>
    </div>
    <div class="findTop column column8">
        <div class="greyShaded findTab">
            <img class="verticalBottom" src="images/blueMagnify.png"/> 
            <a>Find an Internship Program</a> 
            <img class="verticalTextTop" src="images/greyArrowheadRight.png"/>
        </div>
    </div>
</div> 
```

和 CSS：

```
/* More Specific CSS */    
.findTab{
    float: right;
    margin: 0px 5px;
    padding: 5px 10px;
    font-weight: bold;
    line-height: 24px;
    border-left: 1px solid #ddd;
    border-top: 1px solid #ddd;
    border-right: 1px solid #ddd;
    background-color: #f5f5f5;
    font-family: "Helvetica Neue", arial, helvetica, sans-serif;
    font-size: 13px;
}
.findTop{
    border-bottom: 1px solid #ddd;
    margin-top: -23px;
}

/* More general CSS */
.row {
    clear: both;
    width: 100%;
    position: relative;
}
.column {
    margin: 0 15px;
    float: left;
    border: 0;
    padding: 0;
    position: relative;
}
.column8 {
    width: 610px;
}
h1{
    font-size: 28px;
    line-height: 32px;
    margin: 0px;
    padding: 0px;
    font-family: "Helvetica Neue", arial, helvetica, sans-serif;
    font-weight: bold;
} 
```

如何更改 HTML 和 CSS 以便正确布局元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T17:26:56.283

这是我的结果的[小提琴](http://jsfiddle.net/burn123/gdHuh/3/)

为了避免添加我使用的另一个类

```
.row div:nth-of-type(1){
  width:300px;
  margin-right:-20px;
} 
```

我还删除了`.column8`并将其替换为`.row div`，因为在这种代码格式中，这是最合适的

**编辑**

另一种选择是保持所有代码相同，但添加

```
h1 {
  width:300px;
} 
```

[小提琴](http://jsfiddle.net/burn123/gdHuh/4/)

此选项似乎更接近您正在寻找的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:11:27.433

我想在这种情况下，可以帮助您的最佳方法是使用 jQuery。我修改了一点你的代码，现在看起来像[这样](http://jsfiddle.net/stefanz/gdHuh/2/)。您可以调整“结果”区域的大小以确保一切正常。您也可以使用`white-space`css 属性（将其添加到类 'title' 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:37:22.763

一个答案是为标题设置一个宽度百分比（以允许不同的屏幕尺寸），然后`white-space: pre`让文本换行。如需更具体的建议，您需要提琴。

# linux - ls、pwd、find 等 Linux 命令源代码的输出部分是否定义为 return 或 printf？

> ID：14043242
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:23:17.870
> 
> 标签：linux, function, shell, command, printf

在 linux shell 中，如果我们输入“ls”，我们会得到类似“/Desktop,/Music...”的信息。

很明显，当我们在一些动态编程语言如haskell的交互环境中执行一些类似的函数时，环境的输出是函数的结果。尽管每个显示的结果都由“打印”隐式转换，但输出曾经是函数的结果。

好吧，我只想知道linux命令的输出是IO动作还是函数的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:44:21.460

函数不能启动 IO 活动吗？

基本的 linux/Unix 实用程序都是用 C 语言编写的，并使用广泛的函数库来收集信息。其中一些函数可能会启动磁盘读取和其他 I/O。输出通常使用`printf`函数生成，并带有适当的格式字符串和要匹配的参数。同样，更多的 I/O。

IHTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:04:29.180

C 语言将程序分解为函数。ls、find、pwd 等实用程序的大多数源代码都是用 C 编写的——作为 shell 的一部分（“bash”或类似的）——shell 通常也是用 C 编写的，或者作为单独的程序。

当然，如果对 C 内核代码进行了正确的绑定，您可以用 lisp、haskell、ocaml 或任何其他具有足够功能的语言编写整个 Linux 实用程序套件（其中大部分是关于字符串处理，绝大多数语言可以做）。

但是，函数式语言应该具有“真正的函数”，也就是说，函数不应该有任何副作用。根据定义，写入文件、读取文件或打印到屏幕是一种副作用——它会影响函数本身之外的东西，结果不是函数返回的结果。所以从这个意义上说，C 不是一种函数式编程语言。它具有经常具有副作用的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:41:50.643

不知道如何回答这个问题给你你想知道的细节。

当然，他们正在执行 IO 操作（读取文件、写入文件、写入标准输出——这也是一个文件），但他们当然也在函数中执行工作（格式化输出等）

# shell - Sed 和转义单引号

> ID：14043243
> 
> 赞同：0
> 
> 时间：2012-12-26T16:23:25.230
> 
> 标签：shell, sed, ksh

我在使用 sed 和单引号时遇到问题

我有一个这样的字符串：

```
-cmd af -i 3 -a 
```

我想将此字符串更改为

```
-cmd 'af -i 3 -a' 
```

现在我正在使用这个：

字符串存储在 buff 变量中

```
buff=$(echo $buff | sed -r "s/cmd /CMD '/g")"'" 
```

它回声正常 `-cmd 'af -i 3 -a'`

然后我调用一个以 buff 作为参数的函数，在使用 ksh -x 执行脚本时，我可以看到调用是 NOK

```
+ buff=$'-CMD \'af -i 3 -a \''
+ echo -CMD $'\'af' -i 3 -a $'\''
-CMD 'af -i 3 -a' #this is the echo
+ functionTest -CMD $'\'af' -i 3 -a $'\'' 
```

结果它总会给我

```
-CMD $'\'af' -i 3 -a $'\'' 
```

所以基本上看来我的单引号被解释为`$'\''`

我不知道为什么，我尝试了很多东西，比如转义字符，但它给了我完全相同的结果，即使`\x27`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:29:57.783

您如何看待奇数球的结果？

你所拥有的是原始的（`sed`在 Mac OS X 上不支持`-r`，但使用的正则表达式不需要非标准的 GNU 扩展选项`-r`）：

```
$ buff1="-cmd af -i 3 -a"
$ buff2=$(echo $buff1 | sed -e "s/cmd /CMD '/g")"'"
$ echo $buff2
-CMD 'af -i 3 -a'
$ 
```

我怀疑您的问题不在于转换，而在于您查看结果的方式。

* * *

### ksh测试

```
Osiris JL: cat so14043243.sh
buff1="-cmd af -i 3 -a"
buff2=$(echo $buff1 | sed -e "s/cmd /CMD '/g")"'"
echo $buff2
echo "$buff2"
Osiris JL: ksh -x so14043243.sh
+ buff1='-cmd af -i 3 -a'
+ sed -e $'s/cmd /CMD \'/g'
+ echo -cmd af -i 3 -a
+ buff2=$'-CMD \'af -i 3 -a\''
+ echo -CMD $'\'af' -i 3 $'-a\''
-CMD 'af -i 3 -a'
+ echo $'-CMD \'af -i 3 -a\''
-CMD 'af -i 3 -a'
Osiris JL: 
```

输出正确；跟踪有点混乱，但与您显示的相同。

输出的额外努力是有充分理由的`-x`；它消除了输出的歧义，以便您可以准确地确定什么是什么，如果您可以很好地阅读它。此外，您可以在之后复制'n'粘贴该行`+`并运行它并再次获得完全相同的结果。旧的 Bourne shell 有一个`-x`选项，它没有像这样进行字符映射，这可能会导致混乱，而且您当然不能可靠地复制'n'粘贴跟踪输出以再次执行命令。

关键是结果——回响的东西——是你想要和期待的，所以你无所事事（当它发生时）。但我同意，一开始可能会令人困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:32:51.773

它对我也很好。但是没有必要`sed`；bash 内置函数可以很好地做到这一点：

```
$ buff='-cmd af -i 3 -a'
$ buff=${buff/cmd /CMD \'}\'
$ echo $buff
-CMD 'af -i 3 -a' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:59:02.490

我认为@gniourf_gniourf 关于将字符串存储在变量中的初始评论基本上是正确的（即使您只是尝试存储命令参数）；请参阅[BashFAQ #050：我正在尝试将命令放入变量中，但复杂的情况总是失败！](http://mywiki.wooledge.org/BashFAQ/050).

现在，你有两个困惑。首先是您误解了`-x`打印的模式。它不会打印您正在运行的命令的参数，它会打印一个*将传递相同 arguments*的命令。在这种情况下，一些参数包含单引号，因此它给出了一个带引号和转义的字符串，*在去除引号后*，将产生与实际传递的参数相同的参数。例如，参数之一是`'af`，因此 -x 模式将其显示为`$'\'af'`。

其次，您似乎正在尝试在变量中嵌入单引号，以便您可以将多个单词作为单个参数传递给 functionTest（即您正在尝试运行相当于`functionTest -CMD 'af -i 3 -a'). If I'm right about what you're trying to do, you're doing it fundamentally wrong. When the shell parses a command line, it interprets quotes and escapes, *then* substitutes variables. It'll go back and split the replaced variables into words, but it will not go back and pay attention to quotes and escapes in the substituted text. So when it replaces`$buff `with`-CMD 'af -i 3 -a'`，它将它分成 5 个参数：“-CMD”、“'af”、“-i”、“3”和“-a'”。请注意，单引号被视为第二个和第五个参数，而不是包含一个长参数：

```
$ buff="-CMD 'af -i 3 -a'"
$ printargs $buff
Got 5 arguments:
  «-CMD»
  «'af»
  «-i»
  «3»
  «-a'» 
```

为了在没有这种混淆的情况下存储多个参数，您需要使用一个数组（再次参见@gniourf_gniourf 的评论和[BashFAQ #050](http://mywiki.wooledge.org/BashFAQ/050)）：

```
$ buff=(-CMD 'af -i 3 -a')
$ printargs "${buff[@]}"
Got 2 arguments:
  «-CMD»
  «af -i 3 -a» 
```

顺便说一句，如果你想复制这个，你需要 printargs。这是我写的一个非常简单的 shell 脚本来澄清这样的情况：

```
#!/bin/sh

echo "Got $# arguments:"
for arg; do
        echo "  «${arg}»"
done 
```

# c++ - weak_ptr 如何知道共享资源已过期？

> ID：14043245
> 
> 赞同：13
> 
> 时间：2012-12-26T16:23:57.253
> 
> 标签：c++, shared-ptr, smart-pointers, weak-ptr, refcounting

考虑以下代码：

```
#include <memory>
#include <iostream>

using namespace std;

struct MySharedStruct
{
  int i;
};

void print_value_of_i(weak_ptr<MySharedStruct> weakPtr)
{
  if (shared_ptr<MySharedStruct> sp = weakPtr.lock())
  { cout << "Value of i = " << sp->i << endl; }
  else
  { cout << "Resource has expired"; }
}

int main()
{
  shared_ptr<MySharedStruct> sharedPtr(new MySharedStruct() );
  sharedPtr->i = 5;

  weak_ptr<MySharedStruct> weakPtr;
  weakPtr = sharedPtr;

  print_value_of_i(weakPtr);

  sharedPtr.reset(new MySharedStruct() ); // <<----- How does weak_ptr know it has expired after this line executes?
  sharedPtr->i = 10;

  print_value_of_i(weakPtr);

  return 0;
} 
```

考虑到引用的资源基本上已被另一个资源替换，如何`weak_ptr`知道它已过期？跟踪什么来确定旧的`shared_ptr`共享*资源*已被销毁并被*新*的共享资源替换？此类方法的示例定义（如果相关）将不胜感激。`weak_ptr`**`lock``weak_ptr`**

 *** * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T16:30:53.577

从普通指针创建 a时分配的控制块`shared_ptr`包含对象的引用计数器和指向对象本身的指针以及自定义删除器对象（如果有）。当该引用计数器达到零时，对象被释放并且指针设置为空。因此，当对象引用计数器为零时，意味着对象已消失。

对于 x86 和 x86-64，它们使用原子操作并且没有显式锁定（没有互斥锁或自旋锁）。实现的技巧是一个特殊的无锁（忙自旋的代码语言）函数`atomic_conditional_increment`，如果它不为零，它只会增加对象引用计数器。`weak_ptr::lock`当多个线程尝试`shared_ptr`从同一个线程创建一个`weak_ptr`对象引用计数器为零时，它用于函数的实现以应对竞争。请参阅[http://www.boost.org/doc/libs/1_52_0/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp](http://www.boost.org/doc/libs/1_52_0/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp)

`shared_ptr`控制块本身在's 和's之间共享，`weak_ptr`并且它自己有另一个引用计数器，因此它一直保持活动状态，直到释放对它的最后一个引用。

当 a`shared_ptr`被重新分配时，它指向另一个控制块，因此一个控制块只指向一个相同的对象。换句话说，在控制块中没有一个对象被另一个对象替换。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-26T17:58:31.207

## 简短的回答

我怀疑大多数实现都是通过拥有一个共享控制块来实现这一点`weakPtr`的`sharedPtr`。复位时`sharedPtr`，它会减少`use_count`控制块中的a，`weakPtr`可用于测试指针是否有效。

## 长答案

但我认为这可能因实施而异。以下是 C++11 标准所说的应该发生的事情：

```
shared_ptr<MySharedStruct> sharedPtr(new MySharedStruct()); 
```

根据*20.7.2.2.1*，`sharedPtr`构造具有给定数据的所有权。

```
weak_ptr<MySharedStruct> weakPtr;
weakPtr = sharedPtr; 
```

根据*20.7.2.3.1*，`weakPtr`构造并分配`sharedPtr`. 分配后，`weakPtr`现在`sharedPtr`共享给定数据的所有权。

```
sharedPtr.reset(new MySharedStruct()); 
```

根据*20.7.2.2.4*，`reset(Y*)`相当于`shared_ptr(Y*).swap(*this)`. 换句话说，将其内容与拥有新数据 `sharedPtr`的临时对象交换。`shared_ptr`

交换后，`sharedPtr`将拥有新数据，临时将与 共享旧数据的所有权`weakPtr`。

根据*20.7.2.2.2*，临时对象随后被销毁：

*   由于临时拥有旧数据并且不与另一个`shared_ptr`实例共享该所有权，因此它会删除旧数据。
*   所有与临时共享所有权的实例都`shared_ptr`将报告`use_count()`比其先前值小一的 a。

这意味着`weakPtr.use_count() == 0`.

```
if (shared_ptr<MySharedStruct> sp = weakPtr.lock()) { 
  cout << "Value of i = " << sp->i << endl;
} else {
  cout << "Resource has expired"; 
} 
```

根据*20.7.2.3.5*，调用`lock`相当于

```
expired() ? shared_ptr<T>() : shared_ptr<T>(*this) 
```

...并且`expired()`相当于

```
use_count() == 0 
```

...这意味着`lock`将返回一个空的`shared_ptr`.**

# ruby-on-rails-3 - Rails 添加第二个显示视图

> ID：14043247
> 
> 赞同：0
> 
> 时间：2012-12-26T16:24:04.320
> 
> 标签：ruby-on-rails-3

我想要一个名为位置的表的第二个显示文件。该文件是views/locations/show2.html.erb

我已经添加了一个名为 index2.html.erb 的第二个索引，我通过它访问它

```
 locations_index2_path 
```

*   我有一条名为 get "locations/index2" 的路线

但是，如果我尝试类似的东西，它就不起作用：

```
location_show2_path(location) 
```

我还将它添加到位置控制器中：

```
def show2
  @location = Location.find(params[:id])
end 
```

谢谢！

更新 - 我得到“找不到没有 ID 的位置”参数：

```
{"format"=>"14"} 
```

网址：

```
http://localhost:5000/locations/show2.14 
```

路线：

```
 get "locations/show2" 
```

位置控制器：

```
 def show2
  @location = Location.find(params[:id])

  respond_to do |format|
    format.html # show2.html.erb
    format.json { render json: @location }
  end
end 
```

索引视图中的链接：

```
 <%= link_to 'Show', locations_show2_path(location),  :class => 'btn btn-mini btn-success' %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:04:47.370

这个新错误意味着您没有将 an 传递`params[:id]`给您的控制器上的操作。您可以通过在链接上添加信息来做到这一点：

```
 <%= link_to 'Show', locations_show2_path(:id => location.id) %> 
```

作为`show2`自定义路由，您必须指定要传递给控制器​​的参数的名称。希望能帮助到你。

# eclipse - 如何在 ScrollView 中添加滑动抽屉？

> ID：14043251
> 
> 赞同：2
> 
> 时间：2012-12-26T16:24:33.333
> 
> 标签：eclipse, scrollview, slidingdrawer

我目前正在开发一个 Android 应用程序，我正在尝试在滚动视图中添加一个滑动抽屉，但是当我这样做时它没有显示任何内容。
这是我的代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/japan_background"
    android:stretchColumns="1" >

    <TableRow>

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginTop="10dip"
            android:src="@drawable/jurong_west"
            android:tint="#55ff0000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FFFF00"
            android:padding="3dip"
            android:text="  Address: Jurong West Sports &amp;
                Recretion Centre
                20 Jurong West St 93 #04-01
                Singapore 648965
                Tel: 6795 9162 " >
        </TextView>
    </TableRow>

    <TableRow>

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginTop="10dip"
            android:src="@drawable/leisure_park"
            android:tint="#55ff0000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FFFF00"
            android:padding="3dip"
            android:text="  Address: Kallang Leisure Park
                5 Stadium Walk #04-01/02
                Singapore 397693
                Tel: 6887 1897 " >
        </TextView>
    </TableRow>

    <TableRow>

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginTop="10dip"
            android:src="@drawable/tampines_swimming"
            android:tint="#55ff0000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FFFF00"
            android:padding="3dip"
            android:text="  Address: Tampines Swimming Complex
                BLK 505 Tampones Ave 5 #01-03/04
                Singapore 529652
                Tel: 6260 8197 " >
        </TextView>
    </TableRow>

    <TableRow>

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginTop="10dip"
            android:src="@drawable/yio_chu_kang"
            android:tint="#55ff0000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FFFF00"
            android:padding="3dip"
            android:text="  Address: Yio Chu Kang Stadium
                2210 Ang Mo Kio Ave 9 #01-212
                Singapore 569777
                Tel: 6555 3655 " >
        </TextView>
    </TableRow>

    <TableRow>
    </TableRow>
</TableLayout></ScrollView> 
```

从技术上讲，我需要实现一个滑动抽屉，以允许用户在查看此布局后单击不同的按钮。

请帮我。

# c# - 如何将 WebEx 的 XML-API 与 SSO (SAML) 一起使用

> ID：14043254
> 
> 赞同：3
> 
> 时间：2012-12-26T16:24:53.980
> 
> 标签：c#, xml, single-sign-on, webex

我正在编写一个小工具，以使用支持票信息与我们的支持客户打开 WebEx。当网站使用用户名/密码时，我可以让它工作，现在我们使用 SSO。WebEx 服务器已设置为接受 SSO（由我们的 IT 经理 - 而不是我）。

WebEx 参考（链接如下）没有详细说明，官方网站上的 WebEx 开发论坛是如此休眠，并且没有关于该主题的答案，所以我决定在这里试试运气。
[在官方论坛上发布了同样的问题](http://developer.cisco.com/web/webex-developer/forum/-/message_boards/message/9742789?p_p_auth=XqL6p8dS)

任何人都知道如何使下面的代码真正起作用？标签中的内容并将代码中的以下行`<samlResponse>`替换为使其工作的内容：

```
 <samlResponse>samlResponse message will go here</samlResponse> 
```

*文档中的SAML 断言*（见下文）是什么意思？

## 到目前为止我发现了什么

WebEx 的[XML-API 文档](http://lksz.me/TYShyE)（第 68 页）描述了以下内容：

> 3.1 认证用户
> 
> AuthenticateUser API 将接受 SAML 断言来代替用户密码。返回的内容可用于后续 XML API 请求，而不用于超级管理员中定义的会话持续时间。这可以代替当前对 a 和对身份验证的要求。...
> 
> 以下架构图显示了 AuthenticateUser 请求消息的元素结构。

然后它提供了 XML 模式图和一个示例。

引用示例 .NET 代码（不使用 SAML）我想出了以下代码：

```
string strXMLServer = "https://varonis.webex.com/WBXService/XMLService";
WebRequest request = WebRequest.Create(strXMLServer);
// Set the Method property of the request to POST.
request.Method = "POST";
// Set the ContentType property of the WebRequest.
request.ContentType = "application/x-www-form-urlencoded";

// Create POST data and convert it to a byte array.
Func<StringBuilder, StringBuilder> webExXML =
    bodySB => new StringBuilder(1024) // Currently 294 bytes in length
        .AppendLine("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>")
        .Append("<serv:message xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"")
        .Append(" xmlns:serv=\"http://www.webex.com/schemas/2002/06/service\"")
        .Append(" xsi:schemaLocation=\"http://www.webex.com/schemas/2002/06/service")
        .Append(" http://www.webex.com/schemas/2002/06/service/service.xsd\">") 
        .AppendLine("<header>")
        .AppendLine("<securityContext>")
        .AppendLine("<siteName>siteName</siteName>")
        .AppendLine("<webExID>username</webExID>")
        .AppendLine("<password></password>")
        .AppendLine("<partnerID></partnerID>")
        .AppendLine("</securityContext>")
        .AppendLine("</header>")
        .AppendLine()
        .AppendLine("<body>")
        .Append(bodySB)
        .AppendLine()
        .AppendLine("</body>")
        .AppendLine("</serv:message>");

var xmlAuthBodyContent = new StringBuilder()
    .AppendLine("<bodyContent ")
    .AppendLine("xsi:type=\"java:com.webex.service.binding.user.AuthenticateUser\">")
    .AppendLine("<samlResponse>samlResponse message will go here</samlResponse>")
    .AppendLine("</bodyContent>");

byte[] byteArray = Encoding.UTF8.GetBytes(webExXML(xmlAuthBodyContent).ToString());

// Set the ContentLength property of the WebRequest.
request.ContentLength = byteArray.Length;

// Get the request stream.
Stream dataStream = request.GetRequestStream();
// Write the data to the request stream.
dataStream.Write(byteArray, 0, byteArray.Length);
// Close the Stream object.
dataStream.Close();
// Get the response.
WebResponse response = request.GetResponse();

DataSet DSResponse = new DataSet();
DSResponse.ReadXml(response.GetResponseStream());
DSResponse.GetXml().Dump(); 
```

我得到的结果是：

```
<serv:message xmlns:serv="http://www.webex.com/schemas/2002/06/service">
<serv:header>
    <serv:response>
    <serv:result>FAILURE</serv:result>
    <serv:reason>Authentication Server can't generate a valid session ticket</serv:reason>
    <serv:gsbStatus>PRIMARY</serv:gsbStatus>
    <serv:exceptionID>030048</serv:exceptionID>
    <serv:subErrors>
        <serv:subError>
        <serv:exceptionID>AS0062</serv:exceptionID>
        <serv:reason>Validate assertion failed</serv:reason>
        <serv:value />
        </serv:subError>
    </serv:subErrors>
    </serv:response>
</serv:header>
<serv:body>
    <serv:bodyContent />
</serv:body>
</serv:message> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:42:40.870

我终于[在 WebEx 论坛上得到了一个 Nathan Morrow 的回复](http://lksz.me/Wl6pks)，我在征得他的许可的情况下复制了这里的内容，以防有人在这里发现这很有用。

**答案：**

> SAML 断言是用于基于 SAML 的身份验证的 XML 样式文档。它包括身份验证所需的几个值和使用先前配置的信任证书的数字签名。您将需要与 IT 合作，以获得从正在使用的身份管理系统中检索 SAML 断言的访问权限。一旦您能够以 BASE64 格式检索 SAML 断言（在这种格式中它看起来不像 XML，只是一个字符块），然后您将把整个断言放入您的 authenticateUser 请求中的 samlResponse 元素中。

然后我询问了 WebEx One-Click 工具是如何做到的，他回答说：

> WebEx 生产力工具使用自定义内部 API 和 Web 浏览器功能访问您的公司身份验证门户以确认身份验证。在幕后有一个 SAML 断言。一旦您能够为您的工具检索断言，它也会在幕后向最终用户显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-26T20:40:07.063

为线程死灵道歉，但这里的答案并没有那么有帮助，我想我会在 C# 中包含一个完整的工作示例（针对 ADFS 3.0 服务器进行测试），从上面的代码和一些额外的项目中一起破解：

```
 var handler = new HttpClientHandler
        {
            UseDefaultCredentials = true,
            AllowAutoRedirect = true,
            CookieContainer = new System.Net.CookieContainer(),
            UseCookies = true
        };
        var client = new HttpClient(handler) {MaxResponseContentBufferSize = 256000};
        client.DefaultRequestHeaders.Add("User-Agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)");
        client.DefaultRequestHeaders.Add("Connection", "Keep-Alive");
        client.DefaultRequestHeaders.ExpectContinue = false;

        var samlResponseString = client
            .GetStringAsync(
                new Uri("https://AdfsServer/adfs/ls/IdpInitiatedSignOn.aspx?logintoRP=RPIdentifier")).Result;

        var parsedSamlResponse = "";
        Regex reg = new Regex("SAMLResponse\\W+value\\=\\\"([^\\\"]+)\\\"");
        MatchCollection matches = reg.Matches(samlResponseString);
        foreach (Match m in matches)
        {
            parsedSamlResponse =  m.Groups[1].Value;
        }        

        string strXMLServer = "https://mysite.webex.com/WBXService/XMLService";
        WebRequest request = WebRequest.Create(strXMLServer);
// Set the Method property of the request to POST.
        request.Method = "POST";
// Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";

// Create POST data and convert it to a byte array.
        Func<StringBuilder, StringBuilder> webExXML =
            bodySB => new StringBuilder(1024) // Currently 294 bytes in length
                .AppendLine("<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>")
                .Append("<serv:message xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"")
                .Append(" xmlns:serv=\"http://www.webex.com/schemas/2002/06/service\"")
                .Append(" xsi:schemaLocation=\"http://www.webex.com/schemas/2002/06/service")
                .Append(" http://www.webex.com/schemas/2002/06/service/service.xsd\">")
                .AppendLine("<header>")
                .AppendLine("<securityContext>")
                .AppendLine("<siteName>siteName</siteName>")
                .AppendLine("<webExID>adminUsername</webExID>")                    
                .AppendLine("</securityContext>")
                .AppendLine("</header>")
                .AppendLine()
                .AppendLine("<body>")
                .Append(bodySB)
                .AppendLine()
                .AppendLine("</body>")
                .AppendLine("</serv:message>");

        var xmlAuthBodyContent = new StringBuilder()
            .AppendLine("<bodyContent ")
            .AppendLine("xsi:type=\"java:com.webex.service.binding.user.AuthenticateUser\">")
            .AppendLine($"<samlResponse>{parsedSamlResponse}</samlResponse>")
            .AppendLine("<protocol>SAML2.0</protocol>")
            .AppendLine("</bodyContent>");

        byte[] byteArray = Encoding.UTF8.GetBytes(webExXML(xmlAuthBodyContent).ToString());

// Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;

// Get the request stream.
        Stream dataStream = request.GetRequestStream();
// Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);
// Close the Stream object.
        dataStream.Close();
// Get the response.
        WebResponse response = request.GetResponse();

        DataSet DSResponse = new DataSet();
        DSResponse.ReadXml(response.GetResponseStream());
        string xmlResponse = DSResponse.GetXml(); 
```

更改代码以反映您的 ADFS 服务器、RP 标识符、Webex 站点名称和管理员用户名。

缺少的重要部分：

*   从 ADFS 获取 SAMLResponse 的代码
*   块中的`protocol`标签`bodyContent`（设置为`SAML2.0`）

# plugins - Vticker 插件和 Twitter 插件 (jTweetAnywhere) 不能一起工作。

> ID：14043259
> 
> 赞同：0
> 
> 时间：2012-12-26T16:25:10.143
> 
> 标签：plugins, twitter, vticker

我希望使用 Vticker 显示我的推特提要（一次显示一条推文，然后淡出，另一条出现在其位置）。我使用了网站 (http://www.jugbit.com/jquery-vticker-vertical-news-ticker/) 上的说明，它向您展示了如何将 Vticker 与另一个插件一起使用，但它不起作用。似乎我的 twitter 提要正在正确显示，但没有被 Vticker 使用。Chrome 没有显示任何错误。有任何想法吗？

代码：JS：

```
<script>
$(document).ready(function() {
  $('.tweets').jTweetsAnywhere({
   username: 'twitternamehere',
   count: 5
   }).ajaxStop(function(){
  $('.tweets').vTicker({
   speed: 500,
   pause: 3000,
   showItems: 1,
   animation: 'fade',
   mousePause: false,
   height: 0,
   direction: 'up'
 });
 });    
 }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:31:19.487

[http://richhollis.github.io/vticker/](http://richhollis.github.io/vticker/)

我使用 Rich Hollis 版本的 vTicker 来替换 Google 废弃的 Google 新闻“newsshow”功能，以便在博客和网站中嵌入自定义 Google 新闻：

[http://www.gooplusplus.com/news-frame-guide.html](http://www.gooplusplus.com/news-frame-guide.html)

我的 javascript 知识相当基础，但我可以提示您可能会尝试的一些事情。

首先，richhollis jquery.vticker.min.js 对我不起作用，但他未压缩的 jquery.vticker.js 确实起作用。[（我通过http://jscompress.com/](http://jscompress.com/)制作了自己的 min.js 版本）

其次，如果引用 <DIV> ，您的 $('.tweets').etc 可能需要是 $('#tweets').etc ？

您可以在此处查看我的示例基于 vticker 的 HTML 源代码：

[http://www.gooplusplus.com/dark-nopic.html?snc&box#Science-News](http://www.gooplusplus.com/dark-nopic.html?snc&box#Science-News)

# asp.net - 限制移动应用程序访问服务器 API

> ID：14043261
> 
> 赞同：1
> 
> 时间：2012-12-26T16:25:18.087
> 
> 标签：asp.net, mobile

当我们构建网站时，通过 HTTP 请求在应用服务器上访问我们的 API。我们可以限制客户端调用API访问的域名。现在，如果我们构建移动应用程序，我们如何识别该应用程序是经过授权的？我们无法获得任何用户代理。有什么方法可以检查吗？

在服务器上，我们使用 ASP.Net 构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:45:33.377

> 我们可以限制客户端调用API访问的域名。

检查调用者的 IP/域可能是身份验证/授权的一个因素，但在我看来，它不应该是**唯一**的因素。这样的证据是可以伪造的，而且也不是细化的：你不知道用户到底是谁，只是他们（可能）来自哪里。

> 现在，如果我们构建移动应用程序，我们如何识别该应用程序是经过授权的？

使用适合业务需求的适当身份验证/授权机制。如果应用程序与特定用户的数据有关，则需要通过 SSL 将用户名和密码传递给您的 API。更好的是，熟悉[OpenAuth](http://www.dotnetopenauth.net/)。

# asp.net - 多视图和浏览器的后退按钮

> ID：14043264
> 
> 赞同：1
> 
> 时间：2012-12-26T16:25:25.543
> 
> 标签：asp.net, .net, multiview

我有一个包含 4 个步骤的多视图控件。当我单击浏览器后退按钮时，会出现上一步。我想摆脱它并希望浏览器转到上一页而不是上一步。帮我解决这个问题。

# android - Android：无法从按钮启动意图

> ID：14043284
> 
> 赞同：-2
> 
> 时间：2012-12-26T16:27:01.627
> 
> 标签：android, android-intent, android-activity

所以，我的应用程序很简单，在主屏幕中我应该单击一个按钮，该按钮将启动另一个带有选项卡的活动，但是一旦我单击该按钮，该活动就不会启动，并且我收到错误：此日志未找到源：

```
Thread [<3> main] (Suspended (exception RuntimeException))  
    <VM does not provide monitor information>   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2503  
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2519   
    ActivityThread.access$2200(ActivityThread, ActivityThread$ActivityRecord, Intent) line: 123 
    ActivityThread$H.handleMessage(Message) line: 1870  
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 123 
    ActivityThread.main(String[]) line: 4370    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 521  
    ZygoteInit$MethodAndArgsCaller.run() line: 868  
    ZygoteInit.main(String[]) line: 626 
    NativeStart.main(String[]) line: not available [native method] 
```

这是 mainActivity：Bienvenue.java：

```
public class Bienvenue extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_bienvenue);
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener(){
        public void onClick(View arg0) {
             // here i call new screen;
             Intent i = new Intent(Bienvenue.this, Histoire.class);
             startActivity(i);
             } 
    });

} 
```

这是清单的一部分：

```
<activity android:name=".Splash" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.category.MAIN" />

            <category android:name="android.intent.category.LUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Bienvenue" android:exported="false" android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.maghribouna.amine.ters.Bienvenue" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".Histoire" android:exported="false" android:label="@string/app_name">

    </activity> 
```

我看不出添加其他代码的理由，所以错误必须出现在这些代码中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:59:43.560

这就是问题所在

```
<activity android:name=".Splash" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.category.MAIN" />

   **<category android:name="android.intent.category.LUNCHER" />**

  </intent-filter>
</activity> 
```

它是

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
             // Launcher!
        <category android:name="android.intent.category.LAUNCHER" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:42:03.597

```
final Button button1 = (Button) findViewById(R.id.buttonIdName);
button1.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        startActivity(new Intent(Activity1.this, Activity2.class));
    }
}); 
```

这是我用来切换活动的代码。您的按钮需要使用在活动的布局 xml 中设置的 ID（然后在 R.java 中引用）。如果您的按钮 ID 是“buttonStart”，请确保 findViewById() 使用该名称。

如果您的问题比这更深，一些代码会很棒。

编辑：试试这个：

```
public class Bienvenue extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bienvenue);

    final Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            startActivity(new Intent(Bienvenue.this, Histoire.class));
        } 
    });

} 
```

# java - 需要一个 2000 到 9999 之间数字范围的快速正则表达式

> ID：14043292
> 
> 赞同：-5
> 
> 时间：2012-12-26T16:27:38.303
> 
> 标签：java, regex, range, numeric

我在正则表达式方面相当糟糕，并且不确定如何处理这个数字范围。

编辑：抱歉含糊不清，我需要检查输入的字符串是否在数字范围 2000 到 9999 之间，它之前或之后不会有任何数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T16:30:37.423

作为正则表达式，您可以编写

```
[2-9][0-9][0-9][0-9] 
```

或者

```
[2-9][0-9]{3} 
```

或者

```
[2-9]\d{3} 
```

或者

```
[2-9]\p{Digit}{3} 
```

假设它们没有前导零，这将为您提供 2000 到 9999 之间的所有数字。即 002000 或 +2000 将不匹配。

我会做的是

```
int i = Integer.parseInt(text);
if (2000 <= i && i <= 9999) 
   // ok. 
```

# google-app-engine - 将 App Engine 应用程序移植到 Python 2.7 时的 Yaml 脚本处理程序

> ID：14043296
> 
> 赞同：0
> 
> 时间：2012-12-26T16:28:04.847
> 
> 标签：google-app-engine, python-2.7, yaml

我在 App Engine 上将 Python 应用程序从 2.5 移植到 2.7，我发现脚本处理程序对于 WSGI 端点的工作方式不同。具体来说，当我的端点应用程序在子目录中定义时，yaml 无法解析。

```
- url: /crawl/route/.*
  script: crawl/crawler.app
  login: admin 
```

在 Python 2.5 中，“.app”扩展名为“.py”

如果脚本定义没有子目录，则此方法有效。实际上，根目录中的所有应用程序脚本都可以工作，而子目录中的所有应用程序脚本都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:07:35.447

它不是路径，它是一个 python 对象，所以使用

```
script: crawl.crawler.app 
```

# algorithm - 3D世界中三角形的2d图片（->面部特征）如何检测它是否是同一个三角形

> ID：14043304
> 
> 赞同：0
> 
> 时间：2012-12-26T16:28:54.037
> 
> 标签：algorithm, geometry, computer-vision

我有一张三角图。有几个三角形的 3 个点我怎么知道这是否是同一个三角形？（相同等于-相似，因为它们不需要具有相同的大小但需要具有相同的天使）

我最初的问题是使用眼睛边缘、嘴边缘和鼻子边缘来匹配人脸。我想到了口粮之类的东西，但是任何好的想法都会对我有所帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:33:15.063

对于 3D 空间中的每个三角形，将其点投影到由其三个角定义的平面上，然后将其与模板图像进行比较。

如果您实际上无法访问 3d 点，而只能访问它们的投影（就像被相机拍摄一样），那么您实际上无法解决这个问题。失真会导致许多实际上并不相似的三角形在此投影下看起来相同。

如果您假设所有点都位于与投影平面平行的平面上（例如，如果您直接拍摄墙壁照片），那么这与 3D 方面无关。只需像在 2D 中一样进行一致性检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:48:33.870

正如@Sancho 所说，如果您不知道三角形位于哪个平面，则无法在 3 空间中求解三角形。但是，如果您知道有关您的形状的某些属性（如您所说，一张脸），例如，眼睛总是 X距离，那么您可能会使用某些指标来确定它的方向（如果它旋转到平面等）

或者说，如果您知道眼睛的大小始终相同，如果一只眼睛比另一只眼睛小，您就知道它旋转到与相机平行的平面，如果您知道眼睛之间的距离，您可以推导出它旋转的角度.

# mysql - 多连接查询与使用函数之间的 MySQL 性能

> ID：14043308
> 
> 赞同：2
> 
> 时间：2012-12-26T16:29:14.967
> 
> 标签：mysql, database-performance

我有一个名为的表：`candidate_info`有三列是`id_user`，`id_type`和`value`：

*   id_type = 1 => 全名
*   id_type = 2 => 电子邮件
*   id_type = 3 => 邮寄地址
*   id_type = 4 => 电话号码

存储用户信息：

我考虑如下两个查询，它将从行组合到列：

表格原件：

```
Id User | Id Type | Value
1       | 1       | John
1       | 2       | john@g.com
1       | 3       | Ho Chi Minh
1       | 4       | 123
2       | 1       | Ana
2       | 2       | ana@g.com
2       | 3       | New York
2       | 4       | 456 
```

到新：

```
Id User | Fullname | Email        | Mailing_Address | Phone Number
1       | John     | john@g.com   | Ho Chi Minh     | 123
2       | Ana      | ana@g.com    | New York        | 456 
```

**1、第一次查询：**

```
select
    c1.id_user,
    c1.value as fullname,
    c2.value as email,
    c3.value as mailing_address,
    c4.value as phone_number
from
    candidate_info c1
        left join
    candidate_info c2 ON c1.id_user = c2.id_user
        left join
    candidate_info c3 ON c1.id_user = c3.id_user
        left join
    candidate_info c4 ON c1.id_user = c4.id_user
where
    c1.id_type = 1
    and c2.id_type = 2
    and c3.id_type = 3
    and c4.id_type = 4; 
```

**2.二次查询**

```
select 
    c.id_user,
    MAX(IF(c.id_type = 1, c.value, NULL)) as fullname,
    MAX(IF(c.id_type = 2, c.value, NULL)) as email,
    MAX(IF(c.id_type = 3, c.value, NULL)) as mailing_address,
    MAX(IF(c.id_type = 4, c.value, NULL)) as phone_number
from
    candidate_info c
where
    c.id_type in (1, 2, 3, 4)
group by c.id_user 
```

哪个更好？

编辑：更改`id_entry_field`为`id_type`,`join`以`left join`使其有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:34:37.307

您无法比较返回不同结果的查询。第一个版本会过滤掉没有4条记录的用户；第二个 - 不会。

如果您`LEFT JOIN`在第一个中使用，则比较是有意义的。在那种情况下，我会赌第二个；有一天，我比较了两种方法的性能（虽然不是在 mysql 上），Oracle 显示第一个版本更好，连接数达到 2；随着数量的增加，第二种方法的表现优于......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:34:57.503

第二个查询更好，因为它不像第一个查询那样创建大的笛卡尔积。相反，它只迭代表的记录一次，发出包含每个组的聚合数据的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:39:11.957

关于产生不同结果的查询，其他评论是正确的。假设每一行都有所有的整数（1、2、3、4），我会说运行一个测试应用程序来对它们进行基准测试。例如，将查询运行数千次，然后查看平均而言哪个更快。

# jquery - 获取 Twitter 时间线的要求是什么？

> ID：14043314
> 
> 赞同：-4
> 
> 时间：2012-12-26T16:29:59.280
> 
> 标签：jquery, json, twitter

我想知道为用户获取 Twitter 时间线的请求是什么？

我更喜欢在输出中获取 JSON。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:56:43.423

API 随着时间的推移发生了变化，前几天我清理了一些我的代码并更新了调用。你想要的是：https://api.twitter.com/1/statuses/user_timeline.json?screen_name=[username]

示例：[https ://api.twitter.com/1/statuses/user_timeline.json?screen_name=gutzman](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=gutzman)

有关更多信息，请阅读此处的文档：[https ://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

# javascript - 在 WebView 中调整 iframe 的大小

> ID：14043315
> 
> 赞同：1
> 
> 时间：2012-12-26T16:30:07.103
> 
> 标签：javascript, android, html, webview

我正在尝试`WebView`使用 iframe 在一个 html 中显示多个 html 文件

我在 html 文件中使用以下脚本来调整当前 html 中 iframe 的高度。

```
<body onload="resizeFrames()" link="#bb7722" vlink="#bb7722" alink="#bb7722" > 

    <script type="text/javascript">
        // Firefox worked fine. Internet Explorer shows scrollbar because of frameborder
        function resizeFrames() {
            var all_IFrames = document.getElementsByTagName('iframe');
            i = 0;
            while (frame = all_IFrames.item(i++)) {
                resizeFrame(frame);
            }            
        }
        function resizeFrame(f) {

            f.style.height = f.contentWindow.document.body.scrollHeight + "px";
        }
    </script>

    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="b.html"></iframe>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="c.html"></iframe> 
```

为了使 javascript 工作，我使用以下代码：

```
WebSettings webSettings = wb.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

我像这样加载html文件：

```
webView.loadUrl("file:///android_asset/a.html"); 
```

问题是调整后的 iframe 的大小有时太大而有时太小。

我在带有 android 2.2 的 Galaxy s 上对其进行了测试，所有帧都更小（最后被切断），而在其他带有 android 4.0.4 的设备中，所有帧都更大（添加空白空间）

如果我删除了`webSettings.setJavaScriptEnabled(true);`Galaxy s 中的问题消失了，但在第二个设备中，框架根本不会调整大小

完整的html代码：

```
<!DOCTYPE html>
<html>
<head>  
    <style>

    body{
    color: #aa6611;
    font-size:20px;
    }

    .link {
    font-weight: bold;
    color: #bb7722;
    }
    </style>

</head>

<body onload="resizeFrames()" link="#bb7722" vlink="#bb7722" alink="#bb7722" > 

    <script type="text/javascript">
        // Firefox worked fine. Internet Explorer shows scrollbar because of frameborder
        function resizeFrames() {
            var all_IFrames = document.getElementsByTagName('iframe');
            i = 0;
            while (frame = all_IFrames.item(i++)) {
                resizeFrame(frame);
            }           
        }
        function resizeFrame(f) {
            f.style.height = f.contentWindow.document.body.scrollHeight + "px";
        }
    </script>

    <a name="top"></a>

    <font size = "6" color="#ffaa55">Guide</font>
    <br /> 
    <br />

    <a href="#mainscreen" class="link" >Main screen</a> <br />
    <a href="#inventory" class="link">Inventory</a> <br />
    <a href="#store" class="link">Store</a> <br />
    <a href="#market" class="link">Market</a> <br />
    <a href="#creatureattackdialog" class="link">Creature Attack Dialog</a> <br />
    <a href="#userattackdialog" class="link">User Attack Dialog</a> <br />
    <a href="#miniattackdialog" class="link">Mini Attack Dialog</a> <br />
    <a href="#profile" class="link">Profile</a> <br />
    <a href="#creatureinfo" class="link">Creature info</a> <br />
    <a href="#userinfo" class="link">User info</a> <br />
    <a href="#iteminfo" class="link">Item info</a> <br />
    <a href="#lastattackers" class="link">Last Attackers</a> <br />
    <a href="#achievementshistory" class="link">Achievements History</a> <br />
    <a href="#achievementsDialog" class="link">Achievement info</a> <br />
    <a href="#options" class="link">Options</a> <br />

    <br /> 

    <p>
    <a name="mainscreen"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="mainscreen.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="inventory"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="inventory.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="store"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="store.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="market"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="market.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="creatureattackdialog"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="attackDialogCreature.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="userattackdialog"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="attackDialogUser.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="miniattackdialog"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="miniattackdialog.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="profile"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="profile.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="creatureinfo"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="creatureInfo.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="userinfo"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="userInfo.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="iteminfo"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="itemInfo.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="lastattackers"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="lastattackers.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="achievementshistory"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="acheivementhistory.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="achievementsDialog"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="acheivementDialog.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

    <p>
    <a name="options"></a>
    <iframe width="100%" scrolling="no" frameborder=0 border=0 src="optionsDialog.html"></iframe>
    </p>
    <a href="#top" class="link">Back</a> <br />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:23:34.430

您需要为 iframe 标记中的 onload 处理程序设置侦听器，每个侦听器一个，并在加载 iframe 而不是正文时调整每个侦听器的大小。

```
var iframe = document.getElementById('yourIF');
var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
iframe.style.height = (iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight) + "px"; 
```

# android - 为应用程序集成工具栏

> ID：14043318
> 
> 赞同：0
> 
> 时间：2012-12-26T16:30:12.603
> 
> 标签：android, xml, layout, menu

我正在尝试将底部工具栏集成到我的应用程序中。该栏将用于许多不同的活动，因此我在我的 XML 中使用以下行将其包含在每个布局中：

```
<include
    android:layout_height="0dip"
    layout="@layout/test2" /> 
```

test2.xml 的输出如下：

![在此处输入图像描述](../Images/9e4508662bdd6c46cd80d1ba780b0426.png)

当我将它包含在我的主要活动中时，输出如下所示：

![在此处输入图像描述](../Images/b7f5429641632edca8031d53d2a4a488.png)

我想让它尽可能靠近底部。我不知道该怎么做。我们欢迎所有的建议！

我的 activity_main.xml 文件如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:gravity="center|center_vertical"
android:orientation="vertical"
android:textAlignment="center"
android:weightSum="1" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="130dp"
    android:layout_weight="1"
    android:orientation="vertical"
    android:weightSum="1" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/homeTitle"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/orderBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_margin="10dp"
        android:text="@string/orderbtn" />

    <Button
        android:id="@+id/viewBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/viewbtn" />

    <Button
        android:id="@+id/feedbackBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/feedbackbtn" />

    <Button
        android:id="@+id/payBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_margin="10dp"
        android:text="@string/paybtn" />

    <include
    android:layout_height="0dip"
    layout="@layout/test2" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:48:22.107

将代码包装在相对布局中

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true">

     <include
         android:layout_height="0dip"
         layout="@layout/test2" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:33:45.397

BottomBar 顶部的布局应具有以下属性：

```
<Linearlayout
    ....
    android:layout_height="0dip"
    android:layout_weight="1"
     /> 
```

虽然你的底栏应该有

```
<Linearlayout
    ....
android:layout_height="wrap_content"
     /> 
```

**小心点：**

这与您的问题无关，但这样的底栏属于 iPhone。

Home 按钮实际上应该看起来像一个向上按钮：http: [//developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)

而其他三个部分应该属于ActionBar：http: [//developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

# android - 列表视图修复内容

> ID：14043319
> 
> 赞同：0
> 
> 时间：2012-12-26T16:30:13.063
> 
> 标签：android, android-layout, android-linearlayout

我正在尝试用 xml 文件做我自己的 listView，这就是我想要得到的：

![在此处输入图像描述](../Images/f4fe221c54d48d23ce988a64bd032f43.png)

这就是我得到的：

![在此处输入图像描述](../Images/c4090f52c75f49aacd01062797007c0e.png)

还有我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

  <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   android:orientation="vertical">

<LinearLayout 
   android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
   android:orientation="horizontal"
   android:gravity="center"
 >       

<ImageButton android:id="@+id/parkingState" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="4dip" 
    android:layout_marginRight="4dip"
    android:layout_marginLeft="4dip"
    android:background="@null"/>

 <LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical"
    android:gravity="center"
    >    

    <TextView android:id="@+id/LblTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textColor="#000000"
        android:textSize="14dip" />

    <TextView android:id="@+id/LblSubTitle"
        android:layout_marginLeft="12dip"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="normal"
        android:textColor="#444444"
        android:textSize="12px" /> 

</LinearLayout>

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical"
    android:gravity="center"
    >    

    <ImageButton android:id="@+id/favorite" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dip" 
        android:layout_marginRight="4dip"
        android:layout_marginLeft="4dip"
        android:background="@null"/>

   <ImageButton android:id="@+id/rent" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dip" 
        android:layout_marginRight="4dip"
        android:layout_marginLeft="4dip"
        android:background="@null"/>
</LinearLayout> 
```

我怎样才能得到第一张图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:37:39.330

包含@+id/LblTitle 和@+id/LblSubTitle 的LinearLayout 应该如下所示

```
 <LinearLayout 
    android:layout_width="0dp"
    android:layout_height="wrap_content" 
    android:layout_weight="1" 
    android:orientation="vertical"
    android:gravity="center"
    > 
```

所以它将占用所有剩余的宽度，并且不会与您的图片重叠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:38:14.900

尝试像这样更改您的文本线性布局

```
<LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical"
                android:gravity="center"
                > 
```

最终的：

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        >

    <ImageButton android:id="@+id/parkingState"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_marginTop="4dip"
                 android:layout_marginRight="4dip"
                 android:layout_marginLeft="4dip"/>

    <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:gravity="center"
            >

        <TextView android:id="@+id/LblTitle"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:textStyle="bold"
                  android:textColor="#000000"
                  android:textSize="14dip"/>

        <TextView android:id="@+id/LblSubTitle"
                  android:layout_marginLeft="12dip"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:textStyle="normal"
                  android:textColor="#444444"
                  android:textSize="12px"/>

    </LinearLayout>

    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center"
            >

        <ImageButton android:id="@+id/favorite"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="4dip"
                     android:layout_marginRight="4dip"
                     android:layout_marginLeft="4dip"/>

        <ImageButton android:id="@+id/rent"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="4dip"
                     android:layout_marginRight="4dip"
                     android:layout_marginLeft="4dip"/>
    </LinearLayout>
</LinearLayout> 
```

希望这会帮助你。

# architecture - SRS：可以包括这些吗？

> ID：14043323
> 
> 赞同：0
> 
> 时间：2012-12-26T16:30:32.993
> 
> 标签：architecture, documentation, requirements, srs

认为我们正在以表格格式创建 SRS 的“词汇表”。它具有“术语”和“定义”作为列。

我知道 SRS 的词汇表包括“术语”，例如 QA、HTML、KPI 等，以及它们在“定义”列下的含义。它似乎是我们描述“姓名缩写”的地方。但是，我可以在“条款”下添加以下内容并进行描述吗？（这是用于火灾和安全警报系统的 SRS，这是我们最后一年的项目之一）

```
zones
central manned control area
sprinkler 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:51:29.250

您的软件需求规范 (SRS) 中的词汇表的目的是帮助人们了解您使用的术语的含义。首字母缩写词没有什么特别之处。包括所有技术术语。

# html - 为什么这段代码在 iPhone 上加载时右侧有一个空格？

> ID：14043324
> 
> 赞同：0
> 
> 时间：2012-12-26T16:30:33.140
> 
> 标签：html, css

因此，在纵向和横向中，屏幕右侧 30% 左右只是白色，仅在 iPhone 和其他小屏幕上，好像宽度小于 100%。这是我的 HTML：

```
<div id="loading">
<div id="loading-message">
    <p>Please enable Javascript to view this site.</p>
    <p class="tar">-Thanks</p>
</div>
<div id="loadingBar">
    <div id="loadingBarInner"></div>
</div>
</div> 
```

和相关的CSS：

```
#loading {
background: gray;
width: 100%;
position: absolute;
height: 1800px;
box-shadow: inset 0px 0px 500px black;
}
#loading-message {
margin: auto;
border-radius: 30px;
padding: 100px;
box-shadow: 0px 0px 50px 10px black;
width: 300px;
margin-top: 200px;
font-size: 30px;
font-weight: bold;
}
#loadingBar {
margin: auto;
width: 350px;
height: 30px;
margin-top: 300px;
border-radius: 5px;
border: 2px solid black;
padding: 2px;
}
#loadingBarInner {
background: #6d0019; /* Old browsers */
height: 30px;
width: 0px;
border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:56:18.870

> **而不是在#loading-message**中使用固定填充，而是在**#loadingBar**和**#loading-** message中使用带百分比的填充，而不是使用 max-width 和 min-width 属性而不是固定宽度。你的 iphone 有大约 400 像素的宽度，你定义了 100 像素的填充和 350 像素的宽度。在大屏幕上没问题，但在你的 iphone 中，它总是会在右侧加载空白区域。

```
#loading {
background: gray;
width: 100%;
position: absolute;
height: 1800px;
box-shadow: inset 0px 0px 500px black;
}
#loading-message {
margin: 0 auto;
border-radius: 30px;
padding: 10%;
max-width:300px;
min-width:50px;
box-shadow: 0px 0px 50px 10px black;
margin-top: 200px;
font-size: 30px;
font-weight: bold;
}
#loadingBar {
margin: auto;
max-width:300px;
min-width:50px;
height: 30px;
margin-top: 300px;
border-radius: 5px;
border: 2px solid black;
}
#loadingBarInner {
background: #6d0019; /* Old browsers */
height: 30px;
width: 0px;
border-radius: 5px;
}​ 
```

> 你也可以使用媒体查询... [媒体查询](http://cssmediaqueries.com/what-are-css-media-queries.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T16:33:54.100

你有什么 iPhone？

尝试使用宽度。

# cocos2d-iphone - cocos2d如何使用fps_images.png？

> ID：14043325
> 
> 赞同：0
> 
> 时间：2012-12-26T16:30:35.910
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

有人可以向我解释 cocos2d 如何使用 png 作为字体吗？
我想做一些类似的事情，因为我的字体只包含数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:45:37.073

如果你对字符串**fps_images.png**进行全局搜索，你的 IDE 应该会让你真正接近 cocos CCDirector 类（2.0 版）中的以下行：

```
FPSLabel_ = [[CCLabelAtlas alloc]  initWithString:@"00.0" charMapFile:@"fps_images.png" itemWidth:12 itemHeight:32 startCharMap:'.'];
SPFLabel_ = [[CCLabelAtlas alloc]  initWithString:@"0.000" charMapFile:@"fps_images.png" itemWidth:12 itemHeight:32 startCharMap:'.'];
drawsLabel_ = [[CCLabelAtlas alloc]  initWithString:@"000" charMapFile:@"fps_images.png" itemWidth:12 itemHeight:32 startCharMap:'.']; 
```

然后查找 CCLabelAtlas。您的图像必须是固定宽度的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:04:12.230

如果您想重用包含的相同图像来制作除 FPS 显示之外的其他内容，则以下代码应该可以工作：

```
 CCLabelAtlas *scoreLabel = [[CCLabelAtlas alloc]  initWithString:@"00.0" charMapFile:@"fps_images.png" itemWidth:12 itemHeight:32 startCharMap:'.']; 
```

然后将其设置为您想要的数字，如下所示：

```
 [scoreLabel setString:[NSString stringWithFormat:@"%d", (int)score]]; 
```

# jquery - jquery mobile 和three.js 使文档加载两次

> ID：14043331
> 
> 赞同：2
> 
> 时间：2012-12-26T16:31:03.297
> 
> 标签：jquery, mobile, three.js

我在玩jquery mobile 和three.js。

这是我的代码

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

        <title>Hello World</title>
    </head>
    <body>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/jquery.mobile-1.2.0.js"></script>   
    <script src="js/three.min.js"></script>

    <script>

    var camera, scene, renderer;
    var geometry, material, mesh;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
        camera.position.z = 1000;

        scene = new THREE.Scene();

        geometry = new THREE.CubeGeometry( 200, 200, 200 );
        material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

        mesh = new THREE.Mesh( geometry, material );
        scene.add( mesh );

        renderer = new THREE.CanvasRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        document.body.appendChild( renderer.domElement );
        $(document).live("vclick", function (evt) {
            alert('list click');
        }); 
    }

    function animate() {

        // note: three.js includes requestAnimationFrame shim
        requestAnimationFrame( animate );

        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.02;

        renderer.render( scene, camera );

    }

    </script>   
    </body>
</html> 
```

这是来自three.js 的一个示例，效果很好。虽然如果我包含 jquery mobile 和 jquery 库，文档会加载两次。（有一个矩形，如果你向下滚动，有一个旋转的立方体，底部有一个文本“加载”两次。）

有人可以解释发生了什么吗？我只包括了两个 jquery 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:28:06.147

这是一个 jquery 移动怪癖。尝试将您的脚本移动到`head`，而不是`body`. 如果这不能解决问题，请将您的 three.js 代码移动到 jqm 的 pageinit 中：

```
$(document).bind('pageinit', function() {
     // your code here...
}) 
```

# css - 为什么当float元素嵌套在css中的另一个float元素中时祖先元素的宽度会变大

> ID：14043338
> 
> 赞同：0
> 
> 时间：2012-12-26T16:31:43.267
> 
> 标签：css

```
<html>
<head>
<style>
  div{
     border: 1px solid black;
     float: left;
  }

  p{
      border: 1px solid black;
      float: left;
  }
</style>
</head>
<body>
    <div>
     text
     <p>text</p>

    </div>
</body>

</html> 
```

这是我的代码，为什么 div 的宽度变大而 div 内的“文本”似乎偏离了原来的空间。我希望 div 的宽度是“文本”的宽度。**为什么**会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:03:16.423

```
<div class="A">
  size
  <div class="B">
      will
      <div class="C">
          be increased
      </div>
  </div>
</div> 
```

当您在另一个标签（如 div、p）中添加一些标签时，所有标签都具有 (float:left) 样式属性，外部标签宽度将增加内部标签宽度。

但由于高度不固定，它们将垂直显示.. div 的宽度将保持增加的大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:42:07.087

Remove `float: left;` of `p`

Regards.

# iphone - 获取更新的特定记录？

> ID：14043339
> 
> 赞同：1
> 
> 时间：2012-12-26T16:31:57.747
> 
> 标签：iphone, objective-c, ios5, ios6, abaddressbook

我想知道`AddressBook`在我的应用程序中修改哪个记录更新。因为如果用户有很多联系人会让应用程序变慢，所以我需要知道如何获取更新的特定联系人？

```
 ABAddressBookRef book = ABAddressBookCreate();
    ABAddressBookRegisterExternalChangeCallback(book, addressBookChanged, (__bridge void *)(self));

  void addressBookChanged(ABAddressBookRef reference,
                            CFDictionaryRef dictionary,
                            void *context){} 
```

# python - Python - 以深度优先顺序使用生成器迭代树

> ID：14043341
> 
> 赞同：3
> 
> 时间：2012-12-26T16:32:14.487
> 
> 标签：python, recursion, generator, yield, depth-first-search

我正在尝试在二叉树上进行 DFS。树是有效的。当 yield 被 print 替换时（当它不是生成器时），函数本身就可以工作。

```
class BinaryTree(object):
 def __init__(self, root):
    self.root = root

 def dfs(self):
    print "Depth First"
    return self.depth(self.root)

 def depth(self, Node):
    print "Starts"
    yield Node
    if Node.left != None:
        print "keep it up left" 
        self.depth(Node.left)
    if Node.right != None:
        print "keep it up right"    
        self.depth(Node.right)
    print "oh no" 
```

编辑：主要内容的摘录：

```
tree = BinaryTree(15) #adds the key 15 as the root
tree.addKey(10)       #adds additional entries
...
tree.addKey(5)
depthFirstSearch = tree.dfs()
for i in range(8): 
    print depthFirstSearch.next()
    print "outside of fnc" 
```

为了完整起见，树如下所示：

```
{15: {10: {3: {2: , }, {5: , }}, }, {17: , {60: {23: , }, }}} 
```

输出如下所示：

```
Depth First
Starts 
15
outside of fnc
keep it up left
keep it up right
oh no 
```

很明显，由于“保持”调试行，节点就在那里。不过，它似乎直接跳过了递归步骤。否则它将再次打印开始。我已经尝试替换在 self.depth(Node.right) 语句中添加 yield ，但这似乎没有任何帮助。return 语句在生成器内部也不好，这对我来说很有意义。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:39:37.857

在里面`BinaryTree.depth`，你正在递归，但你没有对递归调用做任何事情。

例如：

```
self.depth(Node.left) 
```

应该是这样的

```
for node in self.depth(Node.left):
    yield node 
```

在 Python 3.3+ 中，它可以很简单

```
yield from self.depth(Node.left) 
```

您的“main”中的 for 循环应该如下所示：

```
for node in depthFirstSearch:
    print node 
```

我还注意到你的深度优先搜索算法有正确的想法，但你实际上还没有搜索任何东西。不过，我猜你已经知道了。

# python - 使用 Flexmock 模拟 datetime.datetime.now

> ID：14043347
> 
> 赞同：5
> 
> 时间：2012-12-26T16:32:47.360
> 
> 标签：python, datetime, mocking

我正在尝试使用不同的工具进行模拟并找出最好的工具。我真的很喜欢 flexmock 的简单性，但我不知道如何模拟 datetime.datetime.now() 的行为。

如何在flexmock中模拟以下行为？

```
>>> from datetime import datetime
>>> mocker = Mocker()
>>> fake_datetime=mocker.replace(datetime)
>>> fake_datetime.now()
<mocker.Mock object at 0x027F1990>
>>> mocker.result(datetime(year=2012, month=12, day=12))
>>> mocker.replay()
>>> datetime.now()
datetime.datetime(2012, 12, 12, 0, 0) 
```

当我在 flexmock 中尝试相同时：

```
>>> from datetime import datetime  
>>> fake_datetime = flexmock(datetime)
Traceback (most recent call last):
  File "C:\virtualenvs\webui\lib\site-packages\flexmock.py", line 1194, in flexmock
    return _create_partial_mock(spec, **kwargs)
  File "C:\virtualenvs\webui\lib\site-packages\flexmock.py", line 1013, in 
_create_partial_mock
if (_attach_flexmock_methods(mock, Mock, obj_or_class) and
  File "C:\virtualenvs\webui\lib\site-packages\flexmock.py", line 1030, in
_attach_flexmock_methods
'Python does not allow you to mock builtin objects or modules. '
    'Python does not allow you to mock builtin objects or modules. '
MockBuiltinError: Python does not allow you to mock builtin objects or modules.
Consider wrapping it in a class you can mock instead 
```

或者

```
>>>flexmock(datetime).should_receive('datetime.now').and_return(datetime.datetime(2012,12,10))
>>> datetime.datetime.now()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'function' object has no attribute 'now' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:45:23.507

您的第一种方法有正确的想法，但不幸的是 Python 不允许您修改像 datetime.datetime 这样的内置对象。flexmock 猴子修补对象并在运行时劫持方法调用，这在这种情况下是不可能的。异常中的错误实际上提到了一个解决方案——您可以将 datetime.datetime 包装在您自己的类中，然后对其进行模拟。但是，如果您真的想做 Mocker 在您的示例中所做的事情，并且只是使用 now() 方法创建一个假对象来返回您想要的内容，那么您可以很容易地做到这一点：

```
fake_datetime = flexmock(now=lambda: datetime(year=2012, month=12, day=12)) 
```

但是，当然，对 datetime.now() 的常规调用不会被 flexmock 劫持，除非您将伪造的 datetime 对象注入到调用代码中。

您的第二种方法产生了错误，因为 flexmock 中的 datetime.should_receive('datetime.now') 用于链接方法调用。这意味着它需要像 datetime.datetime().now() 这样的调用，而不是 datetime.datetime.now()，因此它最终会抱怨 datetime，它希望它是一个没有方法 now() 的函数。

# networking - 如何通过 SOCKS 代理发送 UDP 数据包

> ID：14043348
> 
> 赞同：3
> 
> 时间：2012-12-26T16:32:49.693
> 
> 标签：networking, udp, socks, tunneling

我正在查看定义 socks 服务器时我的计算机生成的流量。我通过互联网阅读，发现它也可以通过代理服务器路由 udp。当我尝试使用使用 UDP 并允许袜子设置的不同应用程序时，它仅用于 tcp 流量。为什么？我已经定义了 SOCKS5，因为我知道 v4 不支持 udp（为什么？）我尝试了一个示例，Vuze 客户端 - 它的专家模式允许更喜欢 udp 流量，设置 socks 服务器，甚至在这一点上，任何 udp 都直接进入对等点。我的愿望是监控流量并查看它是如何传输的，它是通过与 socks 服务器的 UDP 连接，还是它实际上连接到 TCP 中的 socks 服务器并发送数据，然后通过 udp 发送到目的地？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-02T15:43:48.520

当客户端想要通过 SOCKS5 代理中继 UDP 流量时，客户端会通过 TCP 发出 UDP 关联请求。然后 SOCKS5 服务器返回一个可用的 UDP 端口给客户端以发送 UDP 包。

然后客户端开始发送 UDP 包，这些包需要中继到 SOCKS5 服务器上可用的新 UDP 端口。SOCKS5 服务器将这些 UDP 包重定向到远程服务器，并将来自远程服务器的 UDP 包重定向回客户端。

当客户端想要终止连接时，它会通过 TCP 发送一个 FIN 包。然后 SOCKS5 服务器终止为客户端创建的 UDP 连接，然后终止 TCP 连接。

# jboss7.x - JBPM 5.4 人工任务服务 - BaseHornetQTaskServer 和流程引擎通信

> ID：14043350
> 
> 赞同：1
> 
> 时间：2012-12-26T16:33:01.540
> 
> 标签：jboss7.x, jbpm, hornetq

我已经用 ***KnowledgeRuntime注册******了 AsyncHornetQHTWorkItemHandler***

 *```
AsyncHornetQTaskClient asyncHornetQTaskClient=new AsyncHornetQTaskClient("Async-Task-ProcEngine-Client");
        AsyncHornetQHTWorkItemHandler asyncHornetQHTWorkItemHandler = new AsyncHornetQHTWorkItemHandler(asyncHornetQTaskClient,knowledgeSession, OnErrorAction.RETHROW);
        asyncHornetQHTWorkItemHandler.setPort(5445);
        asyncHornetQHTWorkItemHandler.setIpAddress("localhost");
        logger.debug("Asycnhronous work-item-handler connecting....");
        asyncHornetQHTWorkItemHandler.connect();
        logger.debug("Asycnhronous work-item-handler connected.");
        knowledgeSession.getWorkItemManager().registerWorkItemHandler("Human Task", asyncHornetQHTWorkItemHandler); 
```

BaseHornetQTaskServer 配置为使用运行@端口 5445 的*独立*HornetQ 服务器

```
public CustomHornetQTaskServer(TaskService service, String host, int port) {
        super(new HornetQTaskServerHandler(service, SystemEventListenerFactory.getSystemEventListener()), host, port, true);
} 
```

创建流程实例时，在任务数据库中成功创建人工任务。

我正在使用我的 Web 应用程序中的**AsyncHornetQTaskClient**（用*SyncTaskServiceWrapper*包装）对任务执行（完成、跳过等）。

```
TaskService  client = new SyncTaskServiceWrapper(new AsyncHornetQTaskClient("Async-Task-Client"));
        client.connect("127.0.0.1", 5445);
        return client; 
```

流程引擎托管在单独的 VM 中，以作为**守护程序/后台服务运行**。人工任务服务嵌入在我托管在 Jboss 7 中的 Web 应用程序中。

**守护程序服务中的KnowledgeRuntime.WorkItemManager**将如何获取工作项已完成的事件？

我应该明确调用**KnowledgeRuntime.getWorkItemManager().completeWorkItem** 吗？

*环境*：JBPM 5.4.0.Final，HornetQ 2.2.14.Final，Jboss 7*

# ruby-on-rails - How to remove all `/` characters present at the end of a string?

> ID：14043351
> 
> 赞同：1
> 
> 时间：2012-12-26T16:33:01.347
> 
> 标签：ruby-on-rails, ruby, regex, string

I am using Ruby on Rails 3.2.9 and Ruby 1.9.3\. Given a string I would like to remove *all* `/` characters present *at the end* of that string. That is, for instance:

```
From "abc/"   to "abc"
From "abc//"  to "abc"
From "abc///" to "abc"
...
From "a/b/c///" to "a/b/c" 
```

How can I make that (maybe by using a regex)?

* * *

I tried:

```
string = string[0,string.length-1] if string.end_with?('/') 
```

but it works just for one character.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T16:38:36.687

```
"abc//".sub %r{/+$}, '' 
```

this will only delete `/` at the end of the string. I use `%r{}` to make a regexp because I don't have to escape the `/` in this case.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T18:56:00.327

Some benchmarks are in order.

Because Perry Horwich's answer is basically the same as Huluk's, I figured they'd have the same results. Heh, I was wrong. After looking at it and realizing it was doing a string search instead of a regex, I fixed it and added the fixed test.

After that, I did some fiddling to see what I could come up with. My solutions don't seem to be as straightforward as others, but the first does the job equally fast for short strings, maybe a tiny bit faster on the long strings. The second two are a wash as far as when dealing with short string or long, but both are very fast. I reverted to old-school techniques and did them how we'd do it in assembler "back in the day."

```
require 'benchmark'

n = 1_000_000

def huluk(s)
  s.sub %r{/+$}, ''
end

def apneadiving1(your_string)
  matches = your_string.match(/(.*?)\/*$/)
  matches[1]
end

def apneadiving2(your_string)
  your_string.scan(/(.*?)\/*$/).flatten.first
end

def fixed_perry_horwich(my_beginning_string)
  my_beginning_string.sub(/\/+$/,'')
end

def the_tin_man1(s)
  s.split(%r[/+$]).first
end

def the_tin_man2(s)
  s = s[0..-2] while s[-1] == '/'
  s
end

def the_tin_man3(s)
  s_len = s.length - 1
  s_len -= 1 while s[s_len] == '/'
  s[0..s_len]
end

puts "Ruby #{ RUBY_VERSION }"
puts "#{ n } iterations"

puts

[
  'abc//',
  'abc' * 50 + '//',
  'abc' * 10 + '////',
  '////////////'
].each do |sample_string|

  puts "sample string: #{ sample_string }"
  puts 'huluk:               %s' % huluk(sample_string)
  puts 'perry_horwich:       %s' % perry_horwich(sample_string)
  puts 'fixed_perry_horwich: %s' % fixed_perry_horwich(sample_string)
  puts 'apneadiving1:        %s' % apneadiving1(sample_string)
  puts 'apneadiving2:        %s' % apneadiving2(sample_string)
  puts 'the_tin_man1:        %s' % the_tin_man1(sample_string)
  puts 'the_tin_man2:        %s' % the_tin_man2(sample_string)
  puts 'the_tin_man3:        %s' % the_tin_man3(sample_string)
  puts

  Benchmark.bm(19) do |b|
    2.times do
      b.report('huluk')               { n.times { huluk(sample_string)               } }
      b.report('fixed_perry_horwich') { n.times { fixed_perry_horwich(sample_string) } }
      b.report('apneadiving1')        { n.times { apneadiving1(sample_string)        } }
      b.report('apneadiving2')        { n.times { apneadiving2(sample_string)        } }
      b.report('the_tin_man1')        { n.times { the_tin_man1(sample_string)        } }
      b.report('the_tin_man2')        { n.times { the_tin_man2(sample_string)        } }
      b.report('the_tin_man3')        { n.times { the_tin_man3(sample_string)        } }
      puts
    end
  end

  puts

end 
```

* * *

Results:

```
Ruby 1.9.3
1000000 iterations

```

```
sample string: abc//
huluk:               abc
perry_horwich:       abc//
fixed_perry_horwich: abc
apneadiving1:        abc
apneadiving2:        abc
the_tin_man1:        abc
the_tin_man2:        abc
the_tin_man3:        abc

                          user     system      total        real
huluk                 1.840000   0.000000   1.840000 (  1.849929)
fixed_perry_horwich   1.840000   0.010000   1.850000 (  1.847069)
apneadiving1          1.900000   0.010000   1.910000 (  1.900817)
apneadiving2          4.860000   0.010000   4.870000 (  4.883103)
the_tin_man1          1.830000   0.000000   1.830000 (  1.826547)
the_tin_man2          1.150000   0.000000   1.150000 (  1.151420)
the_tin_man3          1.170000   0.010000   1.180000 (  1.168161)

huluk                 1.820000   0.000000   1.820000 (  1.825440)
fixed_perry_horwich   1.830000   0.000000   1.830000 (  1.827306)
apneadiving1          1.850000   0.000000   1.850000 (  1.853751)
apneadiving2          4.830000   0.000000   4.830000 (  4.825394)
the_tin_man1          1.810000   0.000000   1.810000 (  1.811503)
the_tin_man2          1.150000   0.000000   1.150000 (  1.151865)
the_tin_man3          1.170000   0.000000   1.170000 (  1.172259)

```

```
sample string: abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc//
huluk:               abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
perry_horwich:       abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc//
fixed_perry_horwich: abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
apneadiving1:        abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
apneadiving2:        abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
the_tin_man1:        abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
the_tin_man2:        abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc
the_tin_man3:        abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc

                          user     system      total        real
huluk                 2.120000   0.000000   2.120000 (  2.122156)
fixed_perry_horwich   2.130000   0.010000   2.140000 (  2.136665)
apneadiving1          9.630000   0.030000   9.660000 (  9.656817)
apneadiving2         12.420000   0.030000  12.450000 ( 12.459432)
the_tin_man1          2.080000   0.010000   2.090000 (  2.090112)
the_tin_man2          1.570000   0.010000   1.580000 (  1.573887)
the_tin_man3          1.380000   0.000000   1.380000 (  1.388120)

huluk                 2.130000   0.010000   2.140000 (  2.134414)
fixed_perry_horwich   2.120000   0.010000   2.130000 (  2.129399)
apneadiving1          9.620000   0.020000   9.640000 (  9.646624)
apneadiving2         12.410000   0.020000  12.430000 ( 12.423327)
the_tin_man1          2.080000   0.010000   2.090000 (  2.090938)
the_tin_man2          1.580000   0.010000   1.590000 (  1.581131)
the_tin_man3          1.390000   0.000000   1.390000 (  1.400093)

```

```
sample string: abcabcabcabcabcabcabcabcabcabc////
huluk:               abcabcabcabcabcabcabcabcabcabc
perry_horwich:       abcabcabcabcabcabcabcabcabcabc////
fixed_perry_horwich: abcabcabcabcabcabcabcabcabcabc
apneadiving1:        abcabcabcabcabcabcabcabcabcabc
apneadiving2:        abcabcabcabcabcabcabcabcabcabc
the_tin_man1:        abcabcabcabcabcabcabcabcabcabc
the_tin_man2:        abcabcabcabcabcabcabcabcabcabc
the_tin_man3:        abcabcabcabcabcabcabcabcabcabc

                          user     system      total        real
huluk                 1.980000   0.010000   1.990000 (  1.983149)
fixed_perry_horwich   1.970000   0.010000   1.980000 (  1.979796)
apneadiving1          3.500000   0.010000   3.510000 (  3.513885)
apneadiving2          6.320000   0.020000   6.340000 (  6.348327)
the_tin_man1          2.070000   0.010000   2.080000 (  2.075045)
the_tin_man2          2.800000   0.000000   2.800000 (  2.801136)
the_tin_man3          1.840000   0.010000   1.850000 (  1.851506)

huluk                 1.980000   0.010000   1.990000 (  1.980867)
fixed_perry_horwich   1.980000   0.010000   1.990000 (  1.984776)
apneadiving1          3.510000   0.010000   3.520000 (  3.523383)
apneadiving2          6.340000   0.020000   6.360000 (  6.357442)
the_tin_man1          2.070000   0.000000   2.070000 (  2.074559)
the_tin_man2          2.800000   0.010000   2.810000 (  2.814275)
the_tin_man3          1.850000   0.010000   1.860000 (  1.855621)

```

```
sample string: ////////////
huluk:               
perry_horwich:       ////////////
fixed_perry_horwich: 
apneadiving1:        
apneadiving2:        
the_tin_man1:        
the_tin_man2:        
the_tin_man3:        

                          user     system      total        real
huluk                 1.980000   0.010000   1.990000 (  1.982700)
fixed_perry_horwich   1.980000   0.010000   1.990000 (  1.984354)
apneadiving1          1.860000   0.000000   1.860000 (  1.869155)
apneadiving2          4.840000   0.020000   4.860000 (  4.852445)
the_tin_man1          2.010000   0.000000   2.010000 (  2.020292)
the_tin_man2          5.060000   0.020000   5.080000 (  5.070202)
the_tin_man3          6.390000   0.020000   6.410000 (  6.412697)

huluk                 1.980000   0.010000   1.990000 (  1.987652)
fixed_perry_horwich   1.980000   0.010000   1.990000 (  1.981360)
apneadiving1          1.860000   0.000000   1.860000 (  1.871577)
apneadiving2          4.850000   0.020000   4.870000 (  4.857329)
the_tin_man1          2.010000   0.010000   2.020000 (  2.023877)
the_tin_man2          5.060000   0.010000   5.070000 (  5.067753)
the_tin_man3          6.410000   0.020000   6.430000 (  6.434523)

```

I tried to bracket the simple case of `"abc//"` and something I'd consider a "worser-case" of 152 characters, to antagonize the patterns and algorithms presented.

`huluk` and `fixed_perry_horwich` are a wash as far as which is faster, because the difference between them is compiled away as the source is interpreted by Ruby.

* * *

EDIT:

A couple changes:

*   I refactored the code to DRY it up.
*   I removed the `perry_horwich` test from the benchmarks, because it made no sense to test it.
*   I added a test for `'////////////'` at @pguardiario's recommendation. It shows the result of a worst-case test stripping the delimiters.

The take-away from the test results is to look at the sort of data being tested and select the algorithm that works best for the input. What works well for some inputs doesn't necessarily work as well for others. I found it interesting that the "old-school" methods outran solutions using regex for short trailing-delimiter strings. I think that's a result of Ruby setting up the calls to compiled code. Once the delimiter string got longer, the compiled code would have an advantage.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:38:54.780

Use a regexp to retrieve the expected part of the string:

```
/(.*?)\/*$/ 
```

See on [Rubular](http://rubular.com/r/LDNGMK6YpJ).

```
reg = /(.*?)\/*$/
matches = your_string.match(reg)
result = matches[1] 

#or
result = your_string.scan(reg).flatten.first 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:48:32.357

This will work for your example:

```
my_no_slash_terminated_string = my_beginning_string.sub(/\/+$/,'') 
```

Consider if you want to account for white space at or near the end of the string as well.

# windows-phone-7 - Windows Phone 7 - 如何确定当键盘可见时应该调整哪一行的大小？

> ID：14043355
> 
> 赞同：2
> 
> 时间：2012-12-26T16:33:17.480
> 
> 标签：windows-phone-7

我的问题是我有行网格：

```
 <Grid.RowDefinitions>
        <RowDefinition Height="139"/>
        <RowDefinition Height="72" />
        <RowDefinition Height="482*" />
        <RowDefinition Height="75" />
    </Grid.RowDefinitions> 
```

当键盘出现时，我希望第三行的顶部可见，但不幸的是一切都上升了（在可见区域上方）。

如何解决？我已经考虑过以某种方式确定应该调整哪一行的大小，但我不知道这是否可能。

# java - 获取图书 ID 并显示图书详细信息

> ID：14043357
> 
> 赞同：-2
> 
> 时间：2012-12-26T16:33:19.623
> 
> 标签：java, file

我的“AllBookRecords.txt”文件是这样的：

```
Name        Date        Number
second   2002   22
thired   2003   33
fourth   2004   44
fifth   2005   55 
```

我的搜索按钮代码是这样的：

```
private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String bookid=jTextField2.getText();
    File f=new File("D:\\AllBookRecords.txt");
    try{
        FileReader Bfr=new FileReader(f);
        BufferedReader Bbr=new BufferedReader(Bfr);
        String bs;
        while( (bs=Bbr.readLine()) != null ){
            if( bs.contains(bookid ) ){
                String[] Ust=bs.split("   ");
                String Bname=Ust[0];
                String Bdate=Ust[1];
                jLabel1.setText("Book Found,    "+ Bname + "    " + Bdate);
            }
        }
    }
    catch (IOException ex) {
        ex.printStackTrace();
    } 
} 
```

当我输入例如 33 并单击按钮时，结果只显示最后一条记录，如下所示：第五 2005

为什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:43:57.510

也许不是真正解决您的问题，但您按图书 ID 搜索图书的方式很容易产生错误。

您正在使用`String.contains(bookid)`检查整行是否包含书籍 ID。

例如：如果您的书 id 是`20`第一行将匹配，因为字符串`2002`包含书 id `20`：

```
"second   2002   22".contains("20"); // returns true because 2002 'contains' 20 
```

要解决此问题，您应该先拆分字符串，然后仅比较书籍 ID。

**更新：**对此的可能修复如下：

```
while( (bs=Bbr.readLine()) != null ){
    String[] Ust=bs.split("   ");
    String Bname=Ust[0];
    String Bdate=Ust[1];
    String id = Ust[2];
    if (id.equals(bookid.trim()) // only compare Id's + you should always trim user input
        jLabel1.setText("Book Found,    "+ Bname + "    " + Bdate);
        break;
    }
} 
```

# c# - dgv中的标题列排序，删除所有复选框

> ID：14043358
> 
> 赞同：0
> 
> 时间：2012-12-26T16:33:35.007
> 
> 标签：c#, datagridview, checkbox

当我在 datagridview 中使用排序（标题列）时，之前检查的所有行都未选中。为什么会这样？

有没有办法防止取消选中标题列排序的复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:35:38.660

因为您在没有选定数据的情况下重新绑定 datagridview 以便擦除，所以您必须保留选定的数据

# css - 将 HTML Canvas 设置为页面背景

> ID：14043359
> 
> 赞同：12
> 
> 时间：2012-12-26T16:33:38.103
> 
> 标签：css, html

我制作了一个 JS 动画，我想成为我主页的背景：http: [//geotheory.co.uk/](http://geotheory.co.uk/)。但是我对 Web 开发还很陌生，并且不清楚如何阻止 canvas 元素成为页面上的“内联”对象并将其设置在其他 HTML 元素之后。非常感谢您的建议。HTML 是：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>geotheory.co.uk</title>
    <style>
        canvas:focus{outline:none;}
        * {
        margin: 0;
        padding: 0;
        }
        h1 {color:#fff;}
        p {color:#fff;}
    </style>

</head>
<body  id="home" bgcolor="black">
    <!-- style="overflow:hidden;" -->
    <h1>Heading</h1>
    <p>paragraph 1</p>
    <p>paragraph 2</p>
    <script src="processing-1.4.1.min.js"></script>
    <div id="canvasContainer">
    <canvas data-processing-sources="rectangles.pde"></canvas>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-07-20T06:26:18.680

在 2018 年我会使用

```
html, body { 
  margin: 0;
  height: 100%;
}
canvas {
  width: 100%;
  height: 100%;
  display: block;
  position: fixed;
  top: 0;
  left: 0;
  z-index: -9999;
} 
```

原因如下：

我曾经推荐过，`canvas { width: 100vw; height: 100vh; ...}`但遗憾的是移动浏览器坏了`vh`，所以它没用，而且显然永远没用。请参阅[此博客文章](https://nicolas-hoizey.com/2015/02/viewport-height-is-taller-than-the-visible-part-of-the-document-in-some-mobile-browsers.html)。

`display: block;`修复了某些浏览器上滚动条的一些问题。某些页面使用`html, body { overflow: none; }`，但如果您的页面最终需要高于屏幕/窗口，这又没有意义。

`position: fixed;`使画布位置相对于窗口顶部，因此它不会随页面滚动。如果您使用`position: absolute`，那么如果页面高于屏幕/窗口，画布将从顶部滚动。例如[这个页面](https://twgljs.org)。

`top: 0; left 0;`把它放在左上角。没有它，它将默认为它的默认位置，即在正文的边缘内。通常这可以通过设置来解决，`body { margin: 0; }`但通常这意味着您最终需要一些其他容器来添加一个边距，否则您的正常内容会定位在窗口的边缘。

`z-index: -9999;`如果页面本身使用一些负值`z-index`

这是一个示例作为片段

```
var ctx = document.querySelector("canvas").getContext("2d");

function resize(canvas) {
  var width = canvas.clientWidth;
  var height = canvas.clientHeight;
  if (width != canvas.width || height != canvas.height) {
    canvas.width = width;
    canvas.height = height;
  }
}

function render(time) {
  time *= 0.001;
  resize(ctx.canvas);
  ctx.save();
  var w = ctx.canvas.width;
  var h = ctx.canvas.height;
  var hw = w / 2;
  var hh = h / 2;
  ctx.clearRect(0, 0, w, h);
  ctx.strokeStyle = "red";
  ctx.translate(hw, hh);
  ctx.rotate(time * 0.1);
  for (var ii = 0; ii < 100; ++ii) {
    ctx.rotate(Math.sin(time * 0.1) * 0.2);
    ctx.strokeRect(-hw, -hh, w, h);
    ctx.scale(0.9, 0.9);
  }
  ctx.restore();

  requestAnimationFrame(render);
}
requestAnimationFrame(render);
```

```
html, body {
  margin: 0;
  height: 100%;
}
canvas {
  width: 100%;
  height: 100%;
  display: absolute;
  position: fixed;
  top: 0;
  left: 0;
  z-index: -9999;
}
```

```
<canvas></canvas>
<pre>
  some content that is in front of the canvas

  Let's

  try

  to

  make

  sure

  it's 

  long 

  enough

  that 

  we 

  can

  scroll

  down

  the 

  page

  so 

  we 

  can 

  see 

  that 

  position: fixed;

  is

  a

  better

  choice

  than

  position: absolute;
</pre>
```

这[是 SO 之外的示例，](https://greggman.github.io/doodles/background-canvas-interactive.html)因此您可以更轻松地查看完整尺寸。

[`iframe`s 也工作](https://greggman.github.io/doodles/background-canvas-interactive-iframe.html)

请注意，如果您的画布动画是交互式的，那么画布前面的元素会吃掉鼠标/触摸事件。我知道没有简单的解决方案。您可以将除画布/iframe 之外的所有内容`pointer-events: none`标记为并将画布/iframe 标记为，`pointer-events: auto`但随后您会遇到无法选择页面上的文本且无法单击链接的问题。然后，您可以说设置`<a>`标签以`pointer-events: auto`使链接正常工作，但我确信根据您页面上的信息（尝试复制电子邮件地址或位置地址等），这里和那里都会出现问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T16:35:16.413

```
canvas {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:-1;
} 
```

# razor - ServiceStack Razor 继承指令没有智能感知

> ID：14043364
> 
> 赞同：7
> 
> 时间：2012-12-26T16:34:04.750
> 
> 标签：razor, servicestack

我正在学习 ServiceStack razor 并希望能更好地使用它（一般是 ServiceStack），但我无法让智能感知在模型上工作（通过**继承**指令）

![在此处输入图像描述](../Images/c4583e40a8f6e4f2deecc9d6ac5ff2df.png)

到目前为止，这是我的尝试：[http ://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html](http://www.ienablemuch.com/2012/12/self-hosting-servicestack-serving.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T06:08:54.637

我已经解释了让[Razor Intelli-sense 在这里工作](https://github.com/ServiceStack/RazorRockstars/issues/2#issuecomment-10934218)时遇到的麻烦，基本上让它工作很微妙，我现在决定最好首先专注于升级以使用当前的（向后不兼容的）Razor v2 .0 版本，然后再投入更多精力让智能感知发挥作用。这是我计划在不久的将来解决的问题。

顺便说一句：很好的文章 Michael，我已将它添加到[Wiki](http://github.com/ServiceStack/ServiceStack/wiki)和[社区资源](https://github.com/ServiceStack/ServiceStack/wiki/Community-Resources)中。

# iphone - 制作 UIView 风景

> ID：14043365
> 
> 赞同：1
> 
> 时间：2012-12-26T16:34:11.430
> 
> 标签：iphone, objective-c, uiimageview, uiinterfaceorientation

我创建了一个 iPhone 应用程序，它是一个选项卡栏应用程序，并且只能纵向显示。从一个选项卡中，我展示了一个包含视图的模式`UIImage`视图。

在将 iPhone 旋转到 90 度时，我可以只对那个视图进行横向定向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:48:33.410

是的你可以。

有一些设置，需要制作的代码部分。

还取决于哪个版本，希望不是针对所有 xcode 支持的，因为它太可怕了。最好只选择一个，比如最新的 iOS。

# c# - 在 DataTable 中分配值的更有效方法？

> ID：14043367
> 
> 赞同：0
> 
> 时间：2012-12-26T16:34:17.323
> 
> 标签：c#, performance, linq, datatable

我有一个包含两列的 DataTable：JobDetailID 和 CalculatedID。JobDetailID 并不总是唯一的。我希望给定 JobDetailID 的一个/第一个 CalculatedID 实例是 JobDetailID +“A”，并且当有多行具有相同的 JobDetailID 时，我希望连续的行是 JobDetailID +“B”、“C”等。具有相同 JobDetailID 的行不超过四五行。

我目前将其实现如下，但速度慢得令人无法接受：

```
private void AddCalculatedID(DataTable data)
{
    var calculatedIDColumn = new DataColumn { DataType = typeof(string), ColumnName = "CalculatedID" };
    data.Columns.Add(calculatedIDColumn);
    data.Columns["CalculatedID"].SetOrdinal(0);

    var enumerableData = data.AsEnumerable();

    foreach (DataRow row in data.Rows)
    {
        var jobDetailID = row["JobDetailID"].ToString();

        // Give calculated ID of JobDetailID + A, B, C, etc. for multiple rows with same JobDetailID
        int x = 65; // ASCII value for A
        string calculatedID = jobDetailID + (char)x;

        while (string.IsNullOrEmpty(row["CalculatedID"].ToString()))
        {
            if ((enumerableData
                .Any(r => r.Field<string>("CalculatedID") == calculatedID)))
            {
                calculatedID = jobDetailID + (char)x;
                x++;
            }
            else
            {
                row["CalculatedID"] = calculatedID;
                break;
            }
        }
    }
} 
```

假设我需要遵守这种输出格式，我该如何提高这种性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:23:52.320

您将此标记为 LINQ，但您使用的是迭代方法。可能最好的方法是使用两者的组合，迭代每个“分组”并为分组中的每一行分配计算的 ID。

```
foreach (var groupRows in data.AsEnumerable().GroupBy(d => d["JobDetailID"].ToString()))
{
    if(string.IsNullOrEmpty(groupRows.Key))
        continue;

    // We now have each "grouping" of duplicate JobDetailIDs.
    int x = 65; // ASCII value for A
    foreach (var duplicate in groupRows)
    {
        string calcID = groupRows.Key + ((char)x++);
        duplicate["CalculatedID"] = calcID;
        //Can also do this and achieve same results.
        //duplicate["CalculatedID"] = groupRows.Key + ((char)x++);
    }
} 
```

您要做的第一件事是在将有重复的列上分组。您将遍历这些分组中的每一个，并为每个分组重置后缀值。对于分组中的每一行，您将获取计算的 ID（同时增加后缀值）并将 ID 分配回重复的行。作为旁注，我们正在更改我们在此处列举的项目，这通常是一件坏事。但是，我们正在更改与我们的枚举声明 (GroupBy) 无关的数据，因此它不会改变我们的枚举行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:49:41.320

最好在获取数据的地方添加生成 CalculatedID 的代码，但是，如果不可用，您可能希望避免每次发现重复时扫描整个表。您可以将 a`Dictionary`用于已使用的键，如下所示：

```
private void AddCalculatedID(DataTable data)
{
    var calculatedIDColumn = new DataColumn { DataType = typeof(string), ColumnName = "CalculatedID" };
    data.Columns.Add(calculatedIDColumn);
    data.Columns["CalculatedID"].SetOrdinal(0);

    Dictionary<string, string> UsedKeyIndex = new Dictionary<string, string>();

    foreach (DataRow row in data.Rows)
    {
        string jobDetailID = row["JobDetailID"].ToString();
        string calculatedID;

        if (UsedKeyIndex.ContainsKey(jobDetailID))
        {
          calculatedID = jobDetailID + 'A';
          UsedKeyIndex.Add(jobDetailID, 'A');
        }
        else
        {
           char nextKey = UsedKeyIndex[jobDetailID].Value+1;
           calculatedID = jobDetailID + nextKey;
           UsedKeyIndex[jobDetailID] = nextKey;
        }

        row["CalculatedID"] = calculatedID;
    }
} 
```

这实际上会以内存换取速度，因为它将缓存所有使用的 JobDetailID 以及用于生成键的最后一个字符。如果您有大量这些 JobDetailID，这可能会占用大量内存，但我怀疑除非您有数百万行要处理，否则您会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T14:48:25.357

此方法一次性完成工作。例如，如果“JobDetailID”是整数而不是字符串，或者 DataTable 始终接收按“JobDetailID”排序的数据（您可以摆脱字典），您可以进一步优化它，但这里有一个草稿：

```
 private static void AddCalculatedID(DataTable data)
    {
        data.BeginLoadData();

        try
        {
            var calculatedIDColumn = new DataColumn { DataType = typeof(string), ColumnName = "CalculatedID" };
            data.Columns.Add(calculatedIDColumn);
            data.Columns["CalculatedID"].SetOrdinal(0);

            var jobDetails = new Dictionary<string, int>(data.Rows.Count);

            foreach (DataRow row in data.Rows)
            {
                var jobDetailID = row["JobDetailID"].ToString();
                int lastSuffix;

                if (jobDetails.TryGetValue(jobDetailID, out lastSuffix))
                {
                    lastSuffix++;
                }
                else
                {
                    // ASCII value for A
                    lastSuffix = 65;
                }

                row["CalculatedID"] = jobDetailID + (char)lastSuffix;
                jobDetails[jobDetailID] = lastSuffix;
            }
        }
        finally
        {
            data.EndLoadData();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:02:53.997

如果我理解您关于为行设置 CalculatedID 的想法，那么下面的算法就可以解决问题，它的复杂性是线性的。最重要的部分是`data.Select("","JobDetailID")`，我得到一个排序的行列表。我没有自己编译它，所以可能存在语法错误。

```
private void AddCalculatedID(DataTable data)
{
    var calculatedIDColumn = new DataColumn { DataType = typeof(string), ColumnName = "CalculatedID" };
    data.Columns.Add(calculatedIDColumn);
    data.Columns["CalculatedID"].SetOrdinal(0);

    int jobDetailID = -1;
    int letter = 65;
    foreach (DataRow row in data.Select("","JobDetailID"))
    {
        if((int)row["JobDetailID"] == jobDetailID)
        {
            row["CalculatedID"] = row["JobDetailID"].ToString() + (char)letter;
            letter++;
        }
        else
        {
            letter = 65;
            jobDetailID = (int)row["JobDetailID"];
        }
    }
} 
```

# git - CloudBees Git 权限

> ID：14043368
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:34:27.697
> 
> 标签：git, cloudbees

我们还没有这个要求，但是已经提出的一个问题是必要时保护 git 存储库。今天，我们有一个 CB“帐户”，我们的所有用户都是其中的一部分，因此他们都可以访问该帐户中的每个 git 存储库。此权限要求的推荐操作是否为该 git 存储库设置单独的帐户？我们可以有一个与多个帐户关联的用户/电子邮件地址，对吗？或者用户是否还需要为每个帐户使用完全不同的 CloudBees 登录名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:17:27.477

CloudBees Forge Git 存储库当前不支持细粒度权限或 ACL

我们的路线图上确实有这个（例如，支持组和角色，以及每个组/角色的权限），但是没有设置固定的交付日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:12:24.787

您的问题没有足够的细节来提供一个好的答案。

你自己主持这个吗？或其他地方（例如github）？这是一个对所有人免费开放源代码的公司开发团队吗？

就我个人而言，我的公司使用 github。我们有一个创建并拥有所有存储库的企业帐户。我们所有的开发人员都有自己的帐户。并且每个帐户都被授予根据需要访问存储库的权限。

上保护。

您是否正在考虑野外代码保护？还是来自您自己的开发人员？如果您谈论通过 git 进行部署，那么将服务器设置为不主动服务 /.git/ 目录（这可以通过 .htaccess 完成）是微不足道的。

如果您谈论保护自己的开发人员，那就是另一回事了。我已经谈到的每用户访问权限在一定程度上涵盖了这一点。除此之外，“保护”代码不被黑客攻击和破坏也很简单。最近[kernel.org 被黑](http://www.linuxfoundation.org/news-media/blogs/browse/2011/08/cracking-kernelorg)了，但他们无法破坏代码，因为它被 git 跟踪。git 对其跟踪的所有内容都使用加密安全的 SHA-1 哈希：树、blob、提交 ID 等。如果您的存储库中有任何更改，则后续提交的所有 sha 都会更改。您的所有开发人员都将拥有具有完整历史记录的 repo 的本地克隆，因此即使中心化 repo 被销毁，它也可以被*任何*本地克隆替换。

# java - 蚂蚁&“java.library.path 中没有 lwjgl”

> ID：14043374
> 
> 赞同：1
> 
> 时间：2012-12-26T16:34:54.130
> 
> 标签：java, ant, lwjgl

在 Eclipse 中，我尝试运行一个 ant 任务，如下所示：

```
<target name="run-win-64" depends="jar-win-64">
    <java jar="${deploy.dir}/eco.jar" fork="true" dir="${deploy.dir}" >
        <arg value="-Djava.library.path=lib/lwjgl/natives" />
    </java>
</target> 
```

我得到标题错误：java.lang.UnsatisfiedLinkError: no lwjgl in`java.library.path`

如果我在 Windows 控制台（在部署目录中）使用以下行启动我的小程序：

```
java -Djava.library.path=lib/lwjgl/natives -jar eco.jar 
```

一切都按预期运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:44:26.497

使用`<jvmarg>`而不是`<arg>`.

# c# - jquery中的循环列表并使用循环值

> ID：14043382
> 
> 赞同：0
> 
> 时间：2012-12-26T16:35:59.767
> 
> 标签：c#, jquery, asp.net, .net

在我的最后一个问题中，我在使用 jQuery 循环列表时遇到了问题。然后我们发现了这一点，并且效果很好：

```
public List<Sale> AllSales { get; set; }

for (var i = 0; i < <%= AllSales.Count %>; i++) {

} 
```

我现在需要使用循环内的值，所以我认为它会像这样简单：

```
 for (var i = 0; i < <%= AllSales.Count %>; i++) {
       var date = <%= AllSales[i].Date %>;
       alert(date);
   } 
```

当我第一次尝试这个时，它说“当前上下文中不存在名称'i'”，所以我只是用 0 而不是 i 而不是`AllSales[0]`. 然后什么也没有发生。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:37:46.047

你有`javascript loop`你想要的`iterate on server side list`这是不可能的。您可以使用`ajax`将数据发送到客户端。这是一篇关于使用 jQuery ajax 和 csharp的好[文章。](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

将用逗号分隔的列表的值分配给某个隐藏字段并在 javascript 中访问该隐藏字段可能是一种可能的解决方案。但是，如果您想使用列表对象的更多属性，那么这将是一个非常混乱的解决方案。使用`ajax`是最好的选择。

# ios - 后台线程中的核心数据锁

> ID：14043384
> 
> 赞同：27
> 
> 时间：2012-12-26T16:36:03.887
> 
> 标签：ios, cocoa-touch, cocoa, core-data, deadlock

我正在锁定核心数据。我真的不明白其中的原因。因为我在后台线程中处理时正在创建后台 MOC。您可以在下面看到发生这种情况时堆栈跟踪（我正在暂停应用程序的执行）的样子：

```
Thread 1, Queue : com.apple.main-thread

#0  0x32d2a0fc in __psynch_mutexwait ()
#1  0x3608b128 in pthread_mutex_lock ()
#2  0x365d2dac in -[_PFLock lock] ()
#3  0x365e3264 in -[NSPersistentStoreCoordinator executeRequest:withContext:error:] ()
#4  0x365e1e2a in -[NSManagedObjectContext executeFetchRequest:error:] ()
#5  0x3664a93e in -[NSManagedObjectContext(_NestedContextSupport) _parentObjectsForFetchRequest:inContext:error:] ()
#6  0x3664b0c8 in __82-[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]_block_invoke_0 ()
#7  0x3932bd28 in _dispatch_barrier_sync_f_slow_invoke ()

Thread 10, Queue : EventKitHelperSyncSerialBackgroundQueue

#0  0x32d19f04 in semaphore_wait_trap ()
#1  0x3932c300 in _dispatch_thread_semaphore_wait$VARIANT$mp ()
#2  0x3932a880 in _dispatch_barrier_sync_f_slow ()
#3  0x3663b9e6 in _perform ()
#4  0x3664adba in -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:] ()
#5  0x365e1e2a in -[NSManagedObjectContext executeFetchRequest:error:] ()
#6  0x000b11e4 in -[CoreDataHelper fetchEntity:predicate:andSortDescriptors:inManagedObjectContext:] at /Users/peterwarbo/Desktop/app/CoreDataHelper.m:110
#7  0x000ad648 in -[EventKitHelper processChangedCalendar] at /Users/peterwarbo/Desktop/app/EventKitHelper.m:242
#8  0x000ad3b4 in __54-[EventKitHelper syncInBackgroundWithCompletionBlock:]_block_invoke_0 at /Users/peterwarbo/Desktop/app/EventKitHelper.m:218
#9  0x3932711e in _dispatch_call_block_and_release ()
#10 0x3932aece in _dispatch_queue_drain$VARIANT$mp ()
#11 0x3932adc0 in _dispatch_queue_invoke$VARIANT$mp ()
#12 0x3932b91c in _dispatch_root_queue_drain ()
#13 0x3932bac0 in _dispatch_worker_thread2 ()
#14 0x36090a10 in _pthread_wqthread ()
#15 0x360908a4 in start_wqthread () 
```

在`EventKitHelperSyncSerialBackgroundQueue`我正在后台队列中进行一些核心数据处理。`Reminder`s 是`NSManagedObject`s。很抱歉代码量很大，但我认为最好不要遗漏任何重要细节。

**EventKitHelper.m**

```
- (void)syncInBackgroundWithCompletionBlock:(CalendarSyncCompletionBlock)block {

    DLogName()

    self.completionBlock = block;

    if (self.syncSerialBackgroundQueue == NULL) {
        self.syncSerialBackgroundQueue = dispatch_queue_create("EventKitHelperSyncSerialBackgroundQueue", 0);
    }

    dispatch_async(self.syncSerialBackgroundQueue, ^{

        [self processChangedCalendar];
    });
}

- (void)processChangedCalendar {

    DLogName()

    CoreDataHelper *cdHelper = [CoreDataHelper sharedInstance];

    // Store has been changed, events could be updated/deleted/added
    // Need to check if any of the user created Reminders are referencing the calendar
    // If so, update the affected Reminders

    // Predicate to fetch only Reminders that are of type (RMReminderDateServiceCalendarEvent or RMReminderDateServiceCalendarBirthday) AND status is not completed
    NSPredicate *userRemindersPredicate = [NSPredicate predicateWithFormat:@"(dateService == %@ OR dateService == %@) AND status != %@", @(RMReminderDateServiceCalendarEvent), @(RMReminderDateServiceCalendarBirthday), @(RMReminderStatusCompleted)];

    // Sort the user's Reminders with the earliest date first
    NSSortDescriptor *dateSortAsc = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES];

    // Creating a new MOC for thread safety
    NSManagedObjectContext *syncContext = [cdHelper threadedManagedObjectContext];
    self.syncContext = syncContext;

    NSArray *usersReminders = [[CoreDataHelper sharedInstance] fetchEntity:APReminderEntity predicate:userRemindersPredicate andSortDescriptors:@[dateSortAsc] inManagedObjectContext:syncContext];

    if (usersReminders.count == 0) {

        DLog(@"User doesn't have any Calendar Reminders, no need to sync")

        BOOL error = NO;

        self.completionBlock(error);

        return;

    } else {

        if (!self.isCalendarAccessAuthorized) {

            DLog(@"Calendar access is not authorized and we have Calendar Reminders, alert the user")

            BOOL error = YES;

            self.completionBlock(error);

            return;

        } else {

            DLog(@"Calendar access is authorized")
        }
    }

    if (!self.calendarchanged) {

        DLog(@"Calendar not updated, no need to sync")

        BOOL error = NO;

        self.completionBlock(error);

        return;
    }

    DLog(@"Calendar updated, syncing...")

    NSDate *earliestReminderDate = [(Reminder *) [usersReminders objectAtIndex:0] date];

    // Since there exists a possibility that a Calendar event can change date back in time, we should fetch events from our earliest Reminder date + 1 year back

    NSDate *eventsFromThisDate = [Utilities oneYearAgoForDate:[Utilities midnightDateForDate:earliestReminderDate]];

    NSDate *endDate = [NSDate distantFuture]; // This will get me events 4 years from now

    // Create the predicate
    NSPredicate *eventStorePredicate = [self.eventStore predicateForEventsWithStartDate:eventsFromThisDate endDate:endDate calendars:nil];

    // Fetch all events that match the predicate.
    NSArray *eventKitEvents = [self.eventStore eventsMatchingPredicate:eventStorePredicate];

    NSMutableArray *events = [NSMutableArray arrayWithCapacity:100];

    for (EKEvent *event in eventKitEvents) {

        NSString *eventTitle = [event title];
        NSDate *eventDate = [event startDate];
        NSDate *eventDateModified = [event lastModifiedDate];
        NSString *eventID = [event eventIdentifier];

        // Check if event is a Birthday event
        BOOL isBirthday = [event birthdayPersonID] != -1 ? YES : NO;

        RMReminderDateService dateService;

        if (isBirthday) {

            dateService = RMReminderDateServiceCalendarBirthday;

        } else {

            dateService = RMReminderDateServiceCalendarEvent;
        }

        RMDateEvent *calendarEvent = [[RMDateEvent alloc] initWithDate:eventDate
                                                          dateModified:eventDateModified
                                                                  name:eventTitle
                                                           dateService:dateService
                                                                 andID:eventID];

        BOOL eventAlreadyAdded = NO;

        if (!eventAlreadyAdded) {

            [events addObject:calendarEvent];
        }
    }

    for (Reminder *reminder in usersReminders) {

        NSPredicate *predicateID = [NSPredicate predicateWithFormat:@"ID == %@", reminder.dateServiceID];
        NSArray *eventsMatchingID = [events filteredArrayUsingPredicate:predicateID];

        RMDateEvent *event = [eventsMatchingID lastObject];

        if (event == nil) {

            // We couldn't find the event by ID, try to find it by date AND title

            NSPredicate *predicateDateAndTitle = [NSPredicate predicateWithFormat:@"date == %@ AND name == %@", reminder.date, reminder.dateText];

            NSArray *eventsMatchingDateAndTitle = [events filteredArrayUsingPredicate:predicateDateAndTitle];

            event = [eventsMatchingDateAndTitle lastObject];

            if (event == nil) {

                // We couldn't find the event, most likely it has been deleted from the user's events or the user has changed all values for our saved event :-(

            } else {

                // We found it by date AND title                
                [self processReminder:reminder forDateEvent:event];
            }

        } else {

            // We found it by ID
            [self processReminder:reminder forDateEvent:event];
        }
    }

    [self fetchEventsFromNow];
    [self processEventKitEvents];

    #warning TODO: Broadcast a message to update the Reminder date
    AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    [appDelegate setTabCountInBackground];

    self.calendarchanged = NO;

    DLog(@"Calendar sync done")

    BOOL error = NO;

    self.completionBlock(error);
}

- (void)processReminder:(Reminder *)reminder forDateEvent:(RMDateEvent *)event {

    NSDate *eventModifiedDate = [event dateModified];

    if ([eventModifiedDate compare:reminder.dateModified] == NSOrderedDescending) {

        // This event has been modified
        // Most important now is to check if the changed event date has passed
        NSDate *today = [NSDate date];

        if ([today compare:event.date] == NSOrderedDescending) {

            // Event date has passed

            if (reminder.isRepeating) {

                // We cancel the UILocalNotification and reschedule a new UILocalNotification for the next Reminder date status also set to overdue

                NSDate *reminderDate = [Utilities reminderDateFromDate:event.date andTime:reminder.date];

                // Cancel UILocalNotification
                [Utilities cancelUILocalNotificationForReminder:reminder];

                reminder.status = @(RMReminderStatusOverdue);

                reminder.date = reminderDate;
                reminder.dateModified = event.dateModified;
                reminder.dateServiceID = event.ID;
                reminder.dateText = event.name;

                NSDate *nextReminderDate = [Utilities nextReminderDateFromNowForReminder:reminder];
                reminder.date = nextReminderDate;

                // Re-schedule the Reminder
                [Utilities scheduleUILocalNotificationForReminder:reminder];

                // We change back to this old Reminder date to reflect the overdue status
                reminder.date = reminderDate;

                [[CoreDataHelper sharedInstance] saveInManagedObjectContext:self.syncContext];

            } else {

                // We should cancel the UILocalNotification for this Reminder and set the status for this Reminder to overdue

                NSDate *reminderDate = [Utilities reminderDateFromDate:event.date andTime:reminder.date];

                // Cancel UILocalNotification
                [Utilities cancelUILocalNotificationForReminder:reminder];

                reminder.status = @(RMReminderStatusOverdue);

                reminder.date = reminderDate;
                reminder.dateModified = event.dateModified;
                reminder.dateServiceID = event.ID;
                reminder.dateText = event.name;

                [[CoreDataHelper sharedInstance] saveInManagedObjectContext:self.syncContext];
            }

        } else {

            // Event date is in the future

            NSDate *reminderDate = [Utilities reminderDateFromDate:event.date andTime:reminder.date];

            // Cancel UILocalNotification
            [Utilities cancelUILocalNotificationForReminder:reminder];

            reminder.status = @(RMReminderStatusUpcoming);

            reminder.date = reminderDate;
            reminder.dateModified = event.dateModified;
            reminder.dateServiceID = event.ID;
            reminder.dateText = event.name;

            [[CoreDataHelper sharedInstance] saveInManagedObjectContext:self.syncContext];

            // Re-schedule the Reminder
            [Utilities scheduleUILocalNotificationForReminder:reminder];
        }
    }
} 
```

**CoreDataHelper.m**

```
- (NSArray *)fetchEntity:(NSString *)entity predicate:(NSPredicate *)predicate andSortDescriptors:(NSArray *)sortDescriptors inManagedObjectContext:(NSManagedObjectContext *)context {

    DLogName()

    if (context == nil) {

        // Use default MOC
        context = self.managedObjectContext;
    }

    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:entity inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];

    if (predicate != nil) {

        [request setPredicate:predicate];
    }

    if (sortDescriptors != nil) {

        [request setSortDescriptors:sortDescriptors];
    }

    NSError *error = nil;
    NSArray *entities = [context executeFetchRequest:request error:&error];

    if (entities == nil) {

        DLog(@"There was an error: %@", [error userInfo]);
    }

    return entities;
}

- (NSManagedObjectContext *)threadedManagedObjectContext {

    NSManagedObjectContext *threadedMoc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];
    threadedMoc.parentContext = self.managedObjectContext;

    return threadedMoc;
}

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext {

    if (_managedObjectContext != nil)
    {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        //_managedObjectContext = [[NSManagedObjectContext alloc] init];
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

- (void)saveInManagedObjectContext:(NSManagedObjectContext *)context {

    if (context == nil) {

        // Use default MOC
        context = self.managedObjectContext;

        NSError *error = nil;

        if (context != nil)
        {
            if ([context hasChanges] && ![context save:&error])
            {
                /*
                 Replace this implementation with code to handle the error appropriately.

                 abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
                 */
                DLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        }

    } else {

        NSError *error = nil;

        // First save (child) context
        if ([context hasChanges] && ![context save:&error])
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
             */
            DLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }

        // Then save parent context
        if ([self.managedObjectContext hasChanges])
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
             */

            [self.managedObjectContext performBlock:^{

                NSError *parentError = nil;
                [self.managedObjectContext save:&parentError];

                if (parentError) {

                    DLog(@"Unresolved error %@, %@", parentError, [parentError userInfo]);
                    abort();
                }
            }];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T22:40:18.240

不完全确定这是否适用于您，但我遇到了类似的错误。我解决了他们

1.  使用`NSPrivateQueueConcurrencyType`不`NSConfinementConcurrencyType`从主线程中取出处理。

2.  `executeFetchRequest`放入 MOC的`performBlockAndWait`.

所以在 CoreDataHelper.m 的 fetchEntity 方法中，你会有这样的东西：

```
[context performBlockAndWait:^{
   NSError *error = nil;
   NSArray *entities = [context executeFetchRequest:request error:&error];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T01:21:31.607

这可能无法给出完整的画面，但这是我采取的方法

每个托管对象都需要自己的线程。在同一个线程上，您可以反复使用同一个托管对象。但不在同一个队列中。（这是我倾向于的一个误解）后台队列可以有许多不同的线程，并且每个线程的 MOC 需要是唯一的。

这是我使用的方法。

ManagedObjectContextHolder.h

```
#import <Foundation/Foundation.h>

@interface ManagedObjectContextHolder : NSObject

+ (ManagedObjectContextHolder*) threadContextHolder;

@property (nonatomic, strong) NSManagedObjectContext *context;
@property (nonatomic, strong) NSString *contextThreadMocGuid;
@property (nonatomic, weak) NSThread *contextThread;

@end 
```

ManagedObjectContextHolder.m

```
#import "ManagedObjectContextHolder.h"

@interface HSContextSaveHandler : NSObject

@property (nonatomic, strong) NSArray *mocArray;

- (void) saveHappened:(NSNotification*) saveNotification;

@end

@implementation HSContextSaveHandler

@synthesize mocArray = _mocArray;

int saveFinished = 0;

- (MyAppDelegate*) appDelegete{
    return (MyAppDelegate*) [UIApplication sharedApplication].delegate;
}

- (void) saveHappened:(NSNotification *)saveNotification{
    if (saveNotification && saveNotification.userInfo){
        NSArray *staticArray = [NSArray arrayWithArray:self.mocArray];

        for (id item in staticArray) {
            if ([item isKindOfClass:[ManagedObjectContextHolder class]]) {
                ManagedObjectContextHolder *holder = item;
                if ([saveNotification object] != holder.context){
                    @try {
                        [holder.context mergeChangesFromContextDidSaveNotification:saveNotification];
                    }
                    @catch (NSException *exception) {
                        HSLogBrute(@"<<<<<<<< MERGE CHANGES FROM CONTEXT DID SAVE NOTIFICATION >>>>>>>>\n%@",saveNotification);
                    }
                }
            }
        }
        saveFinished = 3;
    }

}

@end

@interface NSThread (mocGuid)

- (NSString*) mocGuid;
- (void) setMocGuid:(NSString*) mocGuid;

@end

@implementation NSThread (mocGuid)

- (NSString *)mocGuid{
    return [self.threadDictionary valueForKey:@"mocGuid"];
}
- (void)setMocGuid:(NSString *)mocGuid{
    [self.threadDictionary setValue:mocGuid forKey:@"mocGuid"];
}

@end

@implementation ManagedObjectContextHolder

static NSMutableArray *_mocHolders;
static HSContextSaveHandler *_mocSaveHandler;
+ (NSMutableArray*) mocHolders{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _mocHolders = [NSMutableArray arrayWithCapacity:5];
        _mocSaveHandler = [[HSContextSaveHandler alloc] init];
        _mocSaveHandler.mocArray = _mocHolders;

        [[NSNotificationCenter defaultCenter] addObserver:_mocSaveHandler selector:@selector(saveHappened:) name:NSManagedObjectContextDidSaveNotification object:nil];
    });
    return _mocHolders;
}

+ (ManagedObjectContextHolder *)threadContextHolder{
    NSThread *currentThread = [NSThread currentThread];

    NSString *mocGuid = currentThread.mocGuid;

    ManagedObjectContextHolder *result = nil;

    NSMutableArray *removeList = [[NSMutableArray alloc] initWithCapacity:[self mocHolders].count];
    NSLog(@"Context Holders Count %d",[self mocHolders].count);
    for (ManagedObjectContextHolder *item in [self mocHolders]) {
        if (mocGuid != nil && item.contextThread == currentThread && item.contextThreadMocGuid == currentThread.mocGuid){
            result = item;
        }

        if (item.contextThread == nil) {
            [removeList addObject:item];
        }
    }

    if (removeList.count > 0){
        NSLog(@"Removing %d Context Holders for Nil Threads",removeList.count);
        [[self mocHolders] removeObjectsInArray:removeList];
    }
    if (result == nil){
        result = [[ManagedObjectContextHolder alloc] init];
        result.contextThread = currentThread;

        if (mocGuid == nil){
            mocGuid = [HSStaticContainer uuidAsShortString];
            currentThread.mocGuid = mocGuid;
        }

        result.contextThreadMocGuid = mocGuid;
        result.context = [[NSManagedObjectContext alloc] init];
        [result.contextcontext setPersistentStoreCoordinator:[self appDelegate].persistentStoreCoordinator];
        [result.context setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
        [[self mocHolders] addObject:result];
    }
    return result;

}

@synthesize context = _context;
@synthesize contextThreadMocGuid = _contextThreadMocGuid;
@synthesize contextThread = _contextThread;

- (id)init{
    self = [super init];
    if (self) {
        NSLog(@"Creating a Managed Object Context Holder. Here is the Stack Trace.\r\r%@",[NSThread callStackSymbols]);
    }
    return self;
}

@end 
```

# ruby-on-rails - Testing controllers with RSpec: Can't read variables

> ID：14043385
> 
> 赞同：0
> 
> 时间：2012-12-26T16:36:04.323
> 
> 标签：ruby-on-rails, model-view-controller, rspec, controllers

Having trouble testing variable values from a controller using RSpec.

Relevant controller code:

```
class ToysController < ApplicationController

  def claim
    toy = Toy.find(params[:toy_id])
    current_user.toys << toy
    toy.status = "claimed"
    render :index
  end

end 
```

This definitely works -- I know because I `puts toy.inspect` after it happens, and it's fine. But I can't test it. Here's what my current test looks like, after a lot of messy attempts:

```
require 'spec_helper'

describe ToysController do

  describe "GET 'claim'" do
    let(:james) {create(:user)}
    let(:toy) {create(:toy)}

    before do
      OmniAuth.config.mock_auth[:google] = {
          uid: james.uid
      }
      session[:user_id] = james.id
    end

    it "can be claimed by a user" do
      get :claim, toy_id: toy.id
      assigns(:toy).user.should eq james.id
    end

  end

end 
```

When I run the test, I get all sorts of errors on `assigns(:toy).user.should` indicating that `toy` is Nil. I've tried messing with the `assigns` syntax in lots of ways, because I was unable to find the docs for it.

What am I doing wrong? What's the right way to see what the controller does with the user and the toy passed to it?

**Edit:** Trying to phase over to instance variables, but it still doesn't do the trick. Here's my code again with instance variables (different var names, same results):

**Ideas controller:**

```
def claim
  @idea = Idea.find(params[:idea_id])
  current_user.ideas << @idea
  @idea.status = "claimed"
  render :index
end 
```

**Test:**

```
describe "GET 'claim'" do
  let(:james) {create(:user)}
  let(:si_title) {create(:idea)}

  before do
    OmniAuth.config.mock_auth[:google] = {
        uid: james.uid
    }
    session[:user_id] = james.id
  end

  it "can be claimed by a user" do
    get :claim, idea_id: si_title.id
    puts assigns(si_title).inspect

  end
end 
```

Output: `nil`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:58:13.797

**解决了！**测试现在如下所示：

```
describe "GET #claim" do
  let(:james) {create(:user)}
  let(:si_title) {create(:idea)}

  before do
    OmniAuth.config.mock_auth[:google] = {
        uid: james.uid
    }
    session[:user_id] = james.id
  end

  it "can be claimed by a user" do
    get :claim, idea_id: si_title.id
    assigns(:idea).user_id.should eq james.id
  end

end 
```

我的错：

1.  不使用冒号在`assigns`.
2.  在`assigns`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:44:05.483

尝试将`toy`Controller 中的变量替换为`@toy`. `assigns`只能访问实例变量。

# c - How do I display the content from a file using the function read in C?

> ID：14043389
> 
> 赞同：-2
> 
> 时间：2012-12-26T16:36:36.897
> 
> 标签：c

I want to input text from stdin and then display it on the screen, while numbering the lines. The last part of my program is not working, I don't know how to use the `read()` function correctly.

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <io.h>
#include <string.h>

int main()
{
    char s[201];
    int i=0, f = open("text.dat", O_RDWR | O_CREAT | O_TRUNC);
    while (fgets(s,200,stdin) != NULL)
        write(f,s,strlen(s));
    char *buf;
    while (read(f,buf,200) > 0)
        printf("%d %s", i++, *buf);
    close(f);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:41:08.940

First of all you consume `stdin`:

```
while (fgets(s,200,stdin) != NULL)
    write(f,s,strlen(s)); 
```

Then you attempt to read from the file `f`. However, the file `f` is already at its end, and so the first call to `read()` returns `0`. Since there is nothing to read. You would need to move the file pointer back to the beginning of the file.

But your `read()` based loop will still not do what you want. That's because you want line oriented input. So you should use `fgets` rather than `read`. Just in the same way that you handled `stdin` in a line oriented way, you need to handle your printing to `stdout`.

And as Mats points out, you never allocated buf. So if there had been anything to read, you would be de-referencing an un-initialized pointer.

Having said all of that, it would seem to me to make more sense to run just a single loop. Call `printf()` inside the loop that calls `write()`.

```
while (fgets(s,200,stdin) != NULL)
{
    write(f,s,strlen(s));
    printf("%d %s", i, s);
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:14:56.137

奇怪的输出：我原以为这部分会严重崩溃：

```
char *buf;
while (read(f,buf,200) > 0)
    printf("%d %s", i++, *buf); 
```

buf 没有初始化为任何东西，因此指向“那边”（“无用处”的一般方向）。我预计这会在 Linux/Unix 系统中导致 SIGSEGV（“分段错误”）。您绝不会在 DOS 下使用 Turbo/Borland C - 这是我可以想象的唯一不会崩溃的场景。Windows 不会说 SIGSEGV，但它仍然不允许您的代码工作。

当然，您可能会因为您在文件末尾而被保存，因此根本不读取任何内容。

也许你的意思是：

```
char buf[200];
while (read(f,buf,200) > 0) .... 
```

# xml - XML 中的默认命名空间真的需要 URI 吗？

> ID：14043391
> 
> 赞同：0
> 
> 时间：2012-12-26T16:36:45.207
> 
> 标签：xml, namespaces

既然 URI 并不真正指代 Web 位置，为什么 XML 中的默认命名空间需要 URI？为什么不能将任何元素的第一次出现放在某个标准的默认命名空间中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:00:55.187

[命名空间 rec](http://www.w3.org/TR/REC-xml-names/#sec-namespaces)需要命名空间的URI 引用，因此某些命名空间的默认状态没有区别。至于为什么它们中的任何一个都必须是 URI，而通常它们是不可解引用的（RDF 在这方面是不合规的），为什么要问为什么？在某些时候，有人认为这将是一个好主意，瞧，它就是这样设计的。

但是，您可能会混淆默认命名空间和根本没有命名空间。没有“标准默认”命名空间。

文档中的默认命名空间由“xmlns”属性（无冒号、无后缀）指定，并且可以具有作者喜欢的任何类似 URI 的值。它没有必须具有的标准值。

此外，xmlns 属性规范是可选的。如果它不存在 - 并且允许不存在 - 那么根本就没有默认命名空间。

# perl - Is Symbol::gensym still useful any more after perl 5.6?

> ID：14043392
> 
> 赞同：6
> 
> 时间：2012-12-26T16:36:55.213
> 
> 标签：perl

I saw such code:

```
my $fh = gensym;                                             
open $fh, ">$name" or die "Can't create $name: $!"; 
```

which can be written as :

```
open my $fh, ">$name" or die "Can't create $name: $!"; 
```

Is `gensym` just legacy or still useful in some occasions?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T16:54:47.353

遗产。旧模块有时需要全局而不是词法，但仅此而已。

```
use IPC::Open3 qw( open3 );
open(local *CHILD_STDIN, '<', '/dev/null') or die $!;
my $pid = open3(
   '<&CHILD_STDIN',
   my $CHILD_STDOUT = gensym(),
   my $CHILD_STDERR = gensym(),
   $cmd, @args,
); 
```

再三考虑，您也可以使用它们来创建别名（尽管[Data::Alias](http://perldoc.perl.org/perldoc?Data%3a%3aAlias)可以使用词法来做到这一点）。

```
my $foo;
our $bar; local *bar = \$foo;
$foo = 123; say $bar;  # 123
$bar = 456; say $foo;  # 456 
```

# iphone - Save or Serialize AFNetworking operations queue?

> ID：14043393
> 
> 赞同：8
> 
> 时间：2012-12-26T16:36:55.617
> 
> 标签：iphone, objective-c, ios, afnetworking

With `AFNetworking` you usually enqueue operations by doing the following:

```
[_httpClient enqueueHTTPRequestOperation:operation]; 
```

Is there a way to serialize or save the queue so it can be resumed after App Termination?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:38:50.447

实际上，如果您查看`AFURLConnectionOperation`它实现了`NSCoding`协议，并且`.m`文件通过实现[`initWithCoder:`](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.m#L797)和[`encodeWithCoder:`](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.m#L816)方法反映了这一点

尽管`AFHTTPClient`基类也`NSCoding`兼容，但它[不会序列化队列本身](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L703)

但是没有什么能阻止您利用现有的代码库并扩展编码/解码功能来序列化您的自定义子类中的队列操作`AFHTTPClient`

希望这是有道理的！

# java - Unstable GUI in Java

> ID：14043394
> 
> 赞同：1
> 
> 时间：2012-12-26T16:36:56.070
> 
> 标签：java, swing, user-interface, controls

I am writing a very simple GUI, that contains 3 buttons, 2 labels, 2 text fields and one text area. Strangely, the result is unstable: when running the class the GUI appears with random number of the controls. I tried various layout managers, changing the order among the control - nothing.

Can someone help?

```
package finaltestrunner;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class FinalTestGUI extends JFrame implements ActionListener
{   
public Boolean startState = false;

    JButton sofButton;
    JButton startStopButton;
    JButton exitButton;
        JTextField loopCounts;        
        JTextField trSnField;        
        JTextArea resultField = null;

    public FinalTestGUI() 
    {
// The constructor creates the panel and places the controls
    super();    // Jframe constructor

    JFrame trFrame = new JFrame();
    trFrame.setSize(1000, 100);
    trFrame.setVisible(true);
    trFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    trFrame.setTitle("Test runner");
    setFont(new Font("SansSerif", Font.PLAIN, 14));
//  trFrame.setLayout(new FlowLayout());

    JPanel trControlPanel = new JPanel();
    trControlPanel.setSize(1000, 100);
    trControlPanel.setLayout(new GridLayout(1,7));

        exitButton = new JButton("Exit");
    trControlPanel.add(exitButton);

    startStopButton = new JButton("Run ");
    trControlPanel.add(startStopButton);

    JLabel loopsLabel = new JLabel ("Loops count: ");
    trControlPanel.add(loopsLabel);

        loopCounts = new JTextField (5);
    trControlPanel.add(loopCounts);

    sofButton = new JButton("SoF");
    trControlPanel.add(sofButton);

    JLabel testLabel = new JLabel ("serial Number: ");
    trControlPanel.add(testLabel);

        trSnField = new JTextField (5);
    trControlPanel.add(trSnField);

    JTextArea trResultField = new JTextArea (80, 10);
    trFrame.add(trControlPanel);
//  cpl.add(trResultField);

    startStopButton.addActionListener(new ActionListener()
    {
            @Override
        public void actionPerformed (ActionEvent trStartStopButton)
        {
            startState = !startState;
            if (startState)
            {
                startStopButton.setText("Run ");
                startStopButton.setForeground(Color.red);
            }
            else
            {
                startStopButton.setText("Stop");
                startStopButton.setForeground(Color.green);
            }

        }
    });

    sofButton.addActionListener(new ActionListener()
    {
            @Override
        public void actionPerformed (ActionEvent trSofButton)
        {
                        loopCounts.setText("SOF\n");
        }
    });

    exitButton.addActionListener (new ActionListener()
    {
            @Override
        public void actionPerformed (ActionEvent trExitButton)
        {
                        System.exit(0);
        }
    });
    } // End of the constructor

    @Override
    public void actionPerformed (ActionEvent ae)  { }

    public void atpManager ()
    {
        String selectedAtp = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T16:47:35.877

这段代码有几个问题：

*   您已经从 JFrame 继承，因此您不需要创建另一个 JFrame
*   您正在展示您的框架，`setVisible(true)`然后向其添加组件。这会使您的布局无效，您需要之后重新验证（或移动`setVisible()`到您已经添加组件的位置）
*   您正在将组件直接添加到 JFrame，但您需要使用它的内容窗格。从[Java 1.5](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JFrame.html)开始，这些`JFrame.add()`方法会自动转发到内容窗格。在[早期版本](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html)中，必须检索内容窗格`JFrame.getContentPane()`才能将子组件添加到内容窗格。

尝试这个：

```
public FinalTestGUI()     {
  // The constructor creates the panel and places the controls
  super();    // Jframe constructor

  setSize(1000, 100);
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  setTitle("Test runner");
  setFont(new Font("SansSerif", Font.PLAIN, 14));
  setLayout(new FlowLayout());

  JPanel trControlPanel = new JPanel();
  trControlPanel.setSize(1000, 100);
  trControlPanel.setLayout(new GridLayout(1,7));

  exitButton = new JButton("Exit");
  trControlPanel.add(exitButton);

  startStopButton = new JButton("Run ");
  trControlPanel.add(startStopButton);

  JLabel loopsLabel = new JLabel ("Loops count: ");
  trControlPanel.add(loopsLabel);

  loopCounts = new JTextField (5);
  trControlPanel.add(loopCounts);

  sofButton = new JButton("SoF");
  trControlPanel.add(sofButton);

  JLabel testLabel = new JLabel ("serial Number: ");
  trControlPanel.add(testLabel);

  trSnField = new JTextField (5);
  trControlPanel.add(trSnField);

  JTextArea trResultField = new JTextArea (80, 10);
  // getContentPane().add(trControlPanel); // pre 1.5
  add(trControlPanel);                     // 1.5 and greater

  setVisible(true);
} 
```

# java - 拆分字符串方法

> ID：14043395
> 
> 赞同：0
> 
> 时间：2012-12-26T16:37:05.513
> 
> 标签：java, regex, string, split

我已经在 java 中编写了一个代码，如下所示

```
public class sstring  
{  
    public static void main(String[] args)  
    {  
    String s="a=(b+c); string st='hello adeel';";  
    String[] ss=s.split("\\b");  
    for(int i=0;i<ss.length;i++)  
        System.out.println(ss[i]);  
    }  
} 
```

这段代码的输出是

```
a
=(
b
+
c
);
string

st
='
hello

adeel
'; 
```

我应该怎么做才能拆分 =( 或 ); 等在两个单独的元素中，而不是单个元素中。在这个数组中。即我的输出可能看起来像

```
a
=
(
b
+
c
)
;
string

st
=
'
hello

adeel
'
; 
```

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:49:17.500

这与每个查找单词`\\w+`（小 w）或非单词字符`\\W`（大写 W）匹配。

这是[java 的 can split string 方法返回带有分隔符的数组以及](https://stackoverflow.com/questions/14032850/can-split-string-method-of-java-return-the-array-with-the-delimiters-as-well/14032866#14032866)@RohitJain 的上述注释的不被接受的答案。

```
public String[] getParts(String s) {
    List<String> parts = new ArrayList<String>();
    Pattern pattern = Pattern.compile("(\\w+|\\W)");
    Matcher m = pattern.matcher(s);
    while (m.find()) {
        parts.add(m.group());
    }
    return parts.toArray(new String[parts.size()]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:29:18.843

在那里使用此代码..

```
Pattern pattern = Pattern.compile("(\\w+|\\W)");
Matcher m = pattern.matcher("a=(b+c); string st='hello adeel';");
while (m.find()) {
System.out.println(m.group());
} 
```

# java - HTTP 基本身份验证而不是 TLS 客户端认证

> ID：14043397
> 
> 赞同：30
> 
> 时间：2012-12-26T16:37:22.147
> 
> 标签：java, web-services, security, rest, authentication

下面的答案来自[这个](https://stackoverflow.com/questions/454355/security-of-rest-authentication-schemes)问题；

> 授予的答案实际上根本没有解决这个问题。它仅在数据传输的上下文中提及 SSL，实际上并未涵盖身份验证。
> 
> 您确实在询问安全地验证 REST API 客户端。除非您使用 TLS 客户端身份验证，否则单独的 SSL 不是 REST API 的可行身份验证机制。没有客户端身份验证的 SSL 仅对服务器进行身份验证，这与大多数 REST API 无关。
> 
> 如果您不使用 TLS 客户端身份验证，则需要使用基于摘要的身份验证方案（如 Amazon Web Service 的自定义方案）或 OAuth 甚至 HTTP 基本身份验证（但仅通过 SSL）。

所以考虑到我将在**没有客户端认证的情况下使用 HTTPS，** 我的问题是海报说如果我们不使用**客户端 SSL 认证**服务器并不真正知道它与谁交谈。我在这里理解的是，如果我使用身份验证令牌来访问以针对服务器对客户端进行身份验证。然后服务器不知道谁在发送令牌，**即使**该令牌与我的服务器数据库中的用户 ID 配对。

首先

1-这是一个真正的问题吗？如果我特别使用 Https？（没有 TLS 客户端身份验证）

2-也是最重要的，假设这是一个重要的安全漏洞；如海报所述，Http基本身份验证如何在这里提供帮助？Http 基本身份验证只是在标头中发送编码的用户名密码。因此，当客户端收到一个令牌（**在他发送用户名密码后作为回报）**然后对于他的其余请求，他将在此标头中使用此令牌而不是密码，并且一切都很好吗？

仍然服务器不知道请求来自哪里，也许服务器有一个有效的令牌，在它的数据库中有一个匹配的用户，但不知道是谁真正**发送**它。（虽然我仍然很难看到令牌会通过 https 被盗并被其他人使用！）

每当我提出这个主题时，我都会收到回复..“嗯..你发送了一个令牌，但服务器不知道谁发送了这个令牌，不是很安全”所以我理解这一点，因为浏览器保持一种身份验证，服务器知道在哪里请求来自正确的地方然后我可以确定具有该令牌的配对用户（从我的数据库中检查）是“真正正确的”

或者也许这里所说的不正确

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-26T21:37:07.863

> [the] 海报说，如果我们不使用客户端 SSL 认证，服务器并不真正知道它在与谁交谈。

那不是我说的:) 这就是我说的：

> 除非您使用 TLS 客户端身份验证，否则单独的 SSL 不是 REST API 的可行身份验证机制。

*单独*是这里的关键词。还：

> 如果您不使用 TLS 客户端身份验证，则需要使用基于摘要的身份验证方案（如 Amazon Web Service 的自定义方案）或 OAuth 甚至 HTTP 基本身份验证（但仅通过 SSL）。

换句话说，TLS 客户端身份验证是对 REST API 客户端进行身份验证的*一种*方式。因为最初的 SO 问题是关于 SSL 的，所以我提到如果您仅依赖 TLS，TLS 客户端身份验证是唯一的“内置”身份验证形式。因此，如果您使用 TLS，并且您没有利用 TLS 客户端身份验证，则*必须*使用其他形式的身份验证来对您的客户端进行身份验证。

有很多方法可以对 REST 客户端进行身份验证。TLS 客户端身份验证只是其中之一（TLS 的唯一“内置”身份验证，通常非常安全）。然而，TLS 是一种*网络*级协议，大多数人认为对于许多最终用户来说配置过于复杂。因此，大多数 REST API 产品选择更易于使用的*应用程序*级协议，例如 HTTP，因为它对大多数人来说更易于使用（例如，只需设置一个 HTTP 标头）。

因此，如果您要使用 HTTP 标头路由，则必须使用标头值来验证 REST 客户端。

在 HTTP 身份验证中，您有一个标头 ,`Authorization`和它的值（标头名称相当不幸，因为它通常用于身份验证，而不是经常用于访问控制，即授权）。标`Authorization`头值是服务器用来执行身份验证的值，它（通常）由三个令牌组成

1.  HTTP 身份验证方案名称，后跟
2.  空格（几乎总是一个空格字符），后跟
3.  特定于方案的文本值。

一种常见的 HTTP 身份验证方案是该`Basic`方案，它非常……嗯……基本 :)。特定于方案的文本值只是以下计算值：

```
String concatenated = username + ":" + raw_password;
String schemeSpecificTextValue = base_64_encode(concatenated.toCharArray()); 
```

因此，您可能会看到相应的标题如下所示：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

服务器知道如何解析该值。它说“嘿，我知道`Basic`方案，所以我将采用尾随文本值，base64对其进行*解码*，然后我将获得用户名和提交的密码。然后我可以查看这些值是否与我存储的值匹配。”

这本质上是`Basic`身份验证。因为这个方案特别包括提交的*原始*密码 base64 编码，所以*除非*您使用 TLS 连接，否则它不被认为是安全的。TLS 保证（大部分）窥探者无法拦截标头（例如通过数据包检查）并查看密码是什么。这就是为什么您应该*始终*将 TLS 与 HTTP 基本身份验证一起使用。即使在公司内部网环境中。

当然，还有其他更安全的 HTTP 身份验证方案。一个示例是使用基于摘要的身份验证的任何方案。

基于摘要的身份验证方案更好，因为它们的方案文本值不*包含*提交的密码。相反，计算某些数据（通常是其他标头字段和值）的基于密码的散列，并将结果放入`Authorization`标头值中。服务器使用它在本地存储的密码计算相同的基于密码的哈希值。如果服务器的计算值与请求的标头值匹配，则服务器可以认为请求已通过身份验证。

这就是为什么这种技术更安全的原因：只传输散列 - 而不是原始密码本身。这意味着即使通过明文（非 TLS）连接也可以使用此技术对请求进行身份验证（但当然，如果请求数据本身不敏感，您只想这样做）。

一些基于摘要的身份验证方案：

*   [OAuth 1.0a，又名 RFC 5849](https://www.rfc-editor.org/rfc/rfc5849 "OAuth 1.0a")。
*   [HTTP 摘要访问](http://en.wikipedia.org/wiki/Digest_access_authentication "HTTP 摘要式访问认证")身份验证（由浏览器本机使用）。
*   [亚马逊 AWS 的自定义方案](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-query-api.html)。

Amazon 和其他类似的 REST 比 OAuth 1.0a 更安全，因为它们*始终*验证整个请求 - 包括请求实体有效负载（即 HTTP 标头之后的所有内容）。OAuth 1.0a 仅针对与使用或有效负载`application/x-www-form-urlencoded`的 REST API 无关的内容（目前大多数 REST API）执行此操作。`application/xml``application/json`

有趣的是，OAuth2*不是*基于摘要的——它使用了我认为不太安全的东西，称为“不记名令牌”（在许多情况下确实很好，但仍然不如银行、军事和政府通信中使用的摘要方案）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T17:13:06.153

当我们谈论“验证用户”时，我们真正的意思是“检查用户是否知道其他人不应该知道的事情”。那个“东西”可能是密码、证书、硬件安全令牌甚至是用户的视网膜图案，但在所有情况下，我们真正检查的是对这些信息的访问，而不是用户的身份（不管那是真的指）本身。

关键是，原则上，*所有*这些身份验证器都可能被窃取并用于冒充用户。可以记录密码，可以从存储它的磁盘复制证书，可以窃取硬件令牌（并且可能进行逆向工程和克隆），原则上甚至可以扫描、记录和伪造用户的视网膜图案。我们能做的最好的事情是，在每种情况下，都尽量让这件事变得“非常困难”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-26T17:10:59.200

也许我误解了这个问题。

您引用的答案对我说，如果您不使用*某种*形式的身份验证，无论是客户端证书、HTTP BASICAUTH 还是其他方式，服务器都不知道它正在与谁通信。

（也许这对您的应用程序没问题，也许不是，只有您可以回答。）

换句话说，如果您确实使用某种形式的身份验证，服务器确实知道它正在与谁通信；它正在与经过身份验证的凭据所属的“人”进行通信。

在这种情况下，身份验证是通过某些凭据建立身份的过程。

身份验证不能保证凭据没有被盗。SSL 保证（我不会说它“保证”）凭据在客户端和服务器之间的传输是安全的。

当您使用 GMail 时，您使用的是 SSL，Google 怎么知道它在与*您*交谈？

# iphone - 如何在 UIImage 中只显示图像的一部分？

> ID：14043398
> 
> 赞同：8
> 
> 时间：2012-12-26T16:37:24.400
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

我`UIImageView`在其中显示 50x100 图像。

我只想显示图像 50x50 的一部分（顶部）？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-29T22:51:10.610

*在UIImageView*中移动大图像的非常简单的方法如下。

让我们有一个大小为 (100, 400) 的图像，表示某个图片的 4 个状态，一个在另一个之下。我们想在大小为 (100, 100)的方形*UIImageView中显示 offsetY = 100 的第二张图片。*解决方案是：

```
UIImageView *iView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
CGRect contentFrame = CGRectMake(0, 0.25, 1, 0.25);
iView.layer.contentsRect = contentFrame;
iView.image = [UIImage imageNamed:@"NAME"]; 
```

这里的*contentFrame*是相对于真实*UIImage*大小的标准化帧。所以，“0”表示我们从左边框开始图像的可见部分，“0.25”表示我们有垂直偏移100，“1”表示我们要显示图像的全宽，最后，“0.25”表示我们只想显示图像高度的 1/4 部分。

因此，在局部图像坐标中，我们显示以下帧

```
CGRect visibleAbsoluteFrame = CGRectMake(0*100, 0.25*400, 1*100, 0.25*400)
or CGRectMake(0, 100, 100, 100); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-26T16:43:54.293

您可以使用[`CGImageCreateWithImageInRect`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreateWithImageInRect)CGImageRef 上的 Quartz 原语来裁剪图像，因此您将拥有类似以下内容：

```
CGImageRef imageRef = CGImageCreateWithImageInRect(originalImage.CGImage, cropRect);
UIImage* outImage = [UIImage imageWithCGImage:imageRef scale:originalImage.scale orientation:originalImage.imageOrientation]]; 
CGImageRelease(imageRef); 
```

计算时`cropRect`，请记住它应该以像素而不是点为单位给出，即：

```
float scale = originalImage.scale;
CGRect cropRect = CGRectMake(0, 0,
                         originalImage.size.width * scale, originalImage.size.height * 0.5 * scale); 
```

其中`0.5`因素说明了您只想要上半部分的事实。

如果您不想使用低级别，可以将图像添加到 a`UIView`作为背景颜色并使用`clipToBounds`CALayer 属性进行剪辑：

```
myView.backgroundColor = [UIColor colorWithBackgroundPattern:myImage];
myView.layer.clipToBounds = YES; 
```

另外，相应地设置`myView`界限。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-26T16:43:14.217

我可能有一个解决方案给你。看看这是否有效。在 Interface Builder 中有一个关于图像内容填充属性的选项。您可以将其设置为`top-left`. 按照界面生成器中的图像 -

![在此处输入图像描述](../Images/7c3a4c8c20aea1ee7f7a8c52603f2f8d.png)

在此之后将大小设置`UIImageView`为 50x50 并选中“剪辑子视图”...

# ant - HTML 5 Boiler plate ant script with absolute paths

> ID：14043399
> 
> 赞同：1
> 
> 时间：2012-12-26T16:37:26.287
> 
> 标签：ant, html5boilerplate

I am using the html5boiler plate ant build scripts and i am trying to integrate this into my existing platform where i all my css and js files are included using absolute paths. For example:

```
 <!-- scripts concatenated and minified via build script -->
        <script type="text/javascript" src="/static/js/common.js"></script>
        <script type="text/javascript" src="/static/js/overlay.js"></script>
        <script type="text/javascript" src="/static/js/init.js"></script>
        <script type="text/javascript" src="/static/js/base.js"></script>
        <!-- end scripts --> 
```

However, when i run the build script it tells me the directory does not exist. That is because its not using a relative path to find the files. If i take off the leading / then i can get it to work becuase its relative to my project source folder. Any idea how i can get this working without taking that leading slash off? The idea is to be able to take an existing project and make it work without any changes besides adding the comments in.

**UPDATE** The following ANT code is from the html5boiler plate ant build.xml. Basically, my paths in the file.root.page are absolute like i static above. Therefore the scripts.ordered property is outputting file names with an absolute path. So when it gets to the concat command it take an input of script.toconcat with are absolute paths starting with /static. I need to prepend a path to those absolute paths so i now have /content/test.war/static/js/common.js

So basically, im trying to prepend a path such as /content/test.war to the variable scripts.toconcat which under the covers is a list of absolute paths defined above.

```
<filelist id="file.root" dir="${dir.source}/../${dir.cssjsfileloc}" files="${file.root.page}"/>
    <echo message="Concatenating Main JS scripts based on ${file.root.page}..."/>
    <apply executable="java" parallel="false"
      outputproperty="scripts.ordered">
        <arg value="-cp"/>
        <arg value="${dir.build.tools}"/>
        <arg value="ScriptsToConcat"/>
        <first>
            <filelist refid="file.root"/>
        </first>
    </apply>
    <filelist id="scripts.toconcat" dir="./${dir.intermediateroot}/" files="${scripts.ordered}">
    </filelist> 
<!-- overwrite=no here means not to overwrite if the target is newer than the sources -->
    <concat destfile="./${dir.intermediate}/${dir.js}/scripts-concat.min.js" overwrite="no">
        <filelist refid="scripts.toconcat" />
    </concat> 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:38:11.017

这是蚂蚁。为什么不让 Ant 任务在替换之后运行呢？

您可以调用[replaceregexp](http://ant.apache.org/manual/Tasks/replaceregexp.html)，它是用于文件搜索和替换的目录节奏任务。

# ruby-on-rails - Rails 渲染导致语法错误未定义的局部变量或方法“名称”

> ID：14043410
> 
> 赞同：1
> 
> 时间：2012-12-26T16:38:42.397
> 
> 标签：ruby-on-rails, rake, haml, render

我正在编写一个 rake 任务，它读取数据库中所有校长的所有姓名，并尝试将此值传递给 HAML 模板。

为了提高效率，我使用了集合选项来呈现模板（请参阅下面的源代码）。但是当我尝试运行该任务时，我总是会收到以下错误消息：

```
undefined local variable or method `name' for #<Template:0x007f9094286078> 
```

这是此问题的任务代码：

```
task :template => :environment do

  #this class is responsible for rendering templates in a rake task  
  class Template < ActionView::Base
    include Rails.application.routes.url_helpers
    include ActionView::Helpers::TagHelper

    def default_url_options
      {host: 'yourhost.org'}
    end
  end

  firstNames = Array.new

  #stores the first names of all chancellors in an array
  for chans in Chancellor.all
    firstNames.push(chans.first_name)
  end

  #sets the path to the template
  template = Template.new(Rails.root.join('lib','tasks'))

  #trying to render the template with a collection
  finalString = template.render(:template => "_chancellor.xml.haml", 
      :collection => firstNames, :as => :name)

  puts finalString
end 
```

这是应该填写的haml模板：

```
%firstname #{name} 
```

我想得到如下输出：

```
<firstname>someName1</firstname>
<firstname>someName2</firstname>
<firstname>someName3</firstname> .... 
```

我什至尝试将 name 作为实例变量放入模板中，使其看起来像这样：

```
%firstname #{@name} 
```

但随后 firstname 的值为空，我将这一行作为输出：

```
<firstname></firstname> 
```

什么导致语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:46:08.300

此行中存在语法错误：

```
finalString = 
    template.render(:template => "_chancellor.xml.haml", 
    :collection => firstNames, :as => :name) 
```

将其更改为：

```
finalString = 
    template.render(:partial => "chancellor", collection => firstNames, :as => :name) 
```

转到此 URL 以查看您可以将哪些类型的参数传递给渲染函数。 [http://apidock.com/rails/ActionController/Base/render](http://apidock.com/rails/ActionController/Base/render)

# c# - 反序列化 Json 对象 - 日期时间

> ID：14043412
> 
> 赞同：7
> 
> 时间：2012-12-26T16:38:53.830
> 
> 标签：c#, wpf, web-services, microsoft-metro

我`web-api`返回一个用户对象。在那个对象中有一个`DateTime`属性。当我在我的应用程序中读取它时，我收到一个错误，因为代表 DateTime 的字符串无效，它丢失了`\Date ...`

> {System.Runtime.Serialization.SerializationException：反序列化用户类型的对象时出错。DateTime 内容 '1984-10-02T01:00:00' 不以 JSON 要求的 '/Date(' 开头并以 ')/' 结尾。--->

```
public static async Task<User> GetUser(string email)
    {
        try
        {
            using (HttpClient client = new HttpClient())
            {
                HttpResponseMessage response = await client.GetAsync(url + "?email="+email);
                if (response.IsSuccessStatusCode)
                {
                    string content = await response.Content.ReadAsStringAsync();
                    User user = DataService.Deserialize<User>(content);
                    return user;
                }
                return null;
            }
        }
        catch (Exception ex)
        {
            return null;
        }
    } 
```

这是我用来反序列化的方法。

```
public static T Deserialize<T>(string json) {
        try
        {
            var _Bytes = Encoding.Unicode.GetBytes(json);
            using (MemoryStream _Stream = new MemoryStream(_Bytes))
            {

                var _Serializer = new DataContractJsonSerializer(typeof(T));

                return (T)_Serializer.ReadObject(_Stream);
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T17:34:56.707

要解决这个问题，最简单的方法可能是将 DataContract 类型的值类型设置为“字符串”。然后，如果您需要使用 .NET 日期时间，则需要对字符串值执行 DateTime.Parse。这将消除您的反序列化问题。被序列化的原始类很可能使用字符串值开头，因为它缺少所需的日期格式。

请注意，当您执行 DateTime.Parse 时，如果存在时区信息，它会将其转换为您计算机的本地时间（我知道这很愚蠢）。仅供参考。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-26T19:12:09.903

[JSON 规范中没有用于交换日期的标准格式](https://stackoverflow.com/questions/10286204/the-right-json-date-format)，这就是为什么 JSON 中有这么多不同的异构日期格式！

`DataContractJsonSerializer`以自 1970 年以来以毫秒为单位的格式序列化日期，并被以下内容包围`Date()`：`Date(1335205592410)`并期望相同的格式反序列化回`DateTime`. 但是，您得到的 JSON 日期字符串是 ISO8601 格式，这是当今大多数浏览器/软件用于序列化日期的格式！

`JavaScriptSerializer`是 .Net 中的另一种 JSON 序列化器，它几乎可以序列化任何类型，包括与 JSON 字符串之间的匿名类型，并且它能够以 ISO8601 格式或`DataContractJsonSerializer`提供的格式反序列化 JSON 日期。

使用`JavaScriptSerializer`，您的 Deserialize 方法将如下所示：

```
public static T Deserialize<T>(string json)
{
    return new JavaScriptSerializer().Deserialize<T>(json);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-27T10:13:12.013

我在添加包 Json.net (Newtonsoft.Json) 时发现了如何修复它。

```
public async static Task<T> Deserialize<T>(string json)
    {
        var value = await Newtonsoft.Json.JsonConvert.DeserializeObjectAsync<T>(json);
        return value;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T20:47:12.187

会不会是 DateTime 实际上是作为“可为空的”返回的，比如“DateTime”？（带问号）？

因为那时，它可能是 NULL，因为和“.HasValue == false”。

只是在这里猜测...... :-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-07T11:00:26.953

只需像这样更改 DataContractJsonSerializer 上的 DateTimeFormat ：

```
 public static T Deserialize<T>(string json) {
    try
    {
        var settings = new DataContractJsonSerializerSettings 
        {
            DateTimeFormat = new System.Runtime.Serialization.DateTimeFormat("o")
        };
        var _Bytes = Encoding.Unicode.GetBytes(json);
        using (MemoryStream _Stream = new MemoryStream(_Bytes))
        {

            var _Serializer = new DataContractJsonSerializer(typeof(T), settings);

            return (T)_Serializer.ReadObject(_Stream);
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

# java - Create dynamic ArrayLists

> ID：14043416
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:39:14.987
> 
> 标签：java, arraylist, dynamic-arrays

I have a problem related to "dynamic ArrayLists". I have a List that contains usernames and their data. I want for every distinct username to create a single list that contains all data of this user. For example, I have an arraylist (username,tweet) that has: lefteris,"Plays ball", Kostas, "Plays basketball", lefteris, "Nice weather". And I want after that to create two lists. One list with kostas and his tweets and another with lefteris and its tweets (2 tweets). The parent arraylist may have 20 distinct usernames or more. How can I do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:28:43.007

几个库按照函数式语言提供的方式为 Java 添加了出色的集合处理功能。一个这样的库是[Google Guava](http://code.google.com/p/guava-libraries/)。Guava 提供了一个[MultiMap](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)，可以按照你想要的方式对事物进行分组。还有许多实用方法，例如[MultiMaps.index()](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#index%28java.lang.Iterable,%20com.google.common.base.Function%29)，它通过对列表的元素应用一些函数来计算键，将列表中的项目收集到映射中。有了这样的支持，只需要几行代码和一个[Function](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html)实现（任何其他语言的[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)）就可以解决您的问题：

```
import com.google.common.base.Function;
import com.google.common.collect.Lists;
import com.google.common.collect.Multimap;
import com.google.common.collect.Multimaps;

import java.util.Arrays;
import java.util.List;

public class Tweets {
    public static final int NAME = 0;
    public static final int TWEET = 1;

    public static void main(String[] args) {
        List<String> namesAndTweets = Arrays.asList(
            "lefteris", "Plays ball", 
            "Kostas", "Plays basketball", 
            "lefteris", "Nice weather");
        List<List<String>> nameTweetPairs = 
            Lists.partition(namesAndTweets, 2);
        Multimap<String, List<String>> namesAndTweetsByName =
            Multimaps.index(nameTweetPairs, get(NAME));
        Multimap<String, String> tweetsByName =
            Multimaps.transformValues(namesAndTweetsByName, get(TWEET));
        System.out.println(tweetsByName);
    }

    private static Function<List<String>, String> get(final int n) {
        return new Function<List<String>, String>() {
            @Override
            public String apply(List<String> nameAndTweet) {
                return nameAndTweet.get(n);
            }
        };
    }
} 
```

输出：

```
{lefteris=[Plays ball, Nice weather], Kostas=[Plays basketball]} 
```

**更新：**为了进一步解释代码，有三个基本步骤：

1.  获取名称和推文混合在一起的列表，并使用[Lists.partition()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#partition%28java.util.List,%20int%29)将其分解为 (name, tweet) 对。
2.  使用 MultiMaps.index() 从对构建 MultiMap，将名称作为映射键。这为您提供了一个映射，其中映射键是名称，映射值是 (name, tweet) 对。
3.  使用[MultiMaps.transformValues()](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#transformValues%28com.google.common.collect.Multimap,%20com.google.common.base.Function%29)将地图值从 (name, tweet) 对减少为仅推文。

PS有人知道是否有一个内置函数可以做我的`get()`工作吗？这似乎是一个应该提供的有用功能，但我在任何地方都找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:44:55.547

我建议你使用 hashmap 或 hashset 代替，因为如果你需要成对存储一些东西，散列是一个完美的解决方案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:53:19.223

我会使用以下数据结构：

```
HashMap<String, ArrayList<String>> 
```

然后，如果属性是单个项目，则您可以操作键入每个名称的“动态”属性列表：

```
Lefteris->("Plays ball", "Nice weather",...)
Kostas->("Plays basketball",...) 
```

如果属性是键值对，请执行以下操作：

```
HashMap<String, HashMap<String, Object>> 
```

数据看起来像：

```
Lefteris->(Sport->"Plays ball", Weather->"Nice",...)
Kostas->(Sport->"basketball",...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T16:53:19.863

由于您从文件中解析项目，因此您可以执行以下操作。

创建一个包含与特定用户名关联的推文的地图

```
Map<String,List<String>> userTweets = new HashMap<String,List<String>>(); 
```

然后，有一种方法将推文与特定用户相关联，验证它是否已添加到地图中，如果没有则添加它。

```
public void addTweetToUser(String user, String tweet) {
    if(userTweets.containsKey(user))
        userTweets.get(user).add(tweet);
    else {
        List<String> newUserTweets = new LinkedList<String>();
        newUserTweets.add(tweet);
        userTweets.put(user, newUserTweets);
    }
} 
```

另外，您可以通过创建一个`UserTweet`包含以下内容的对象来改进这一点：

```
public class UserTweet {
    private String user;
    private String tweet;

    //Constructor, Setters & Getters or all of them
} 
```

然后你的`addTweetToUser`方法可以有一个`UserTweet`参数。

当您想知道某个用户的推文时，您只需从`userTweets`地图中获取相应的列表即可。我还有删除推文和/或删除用户的方法，以防万一。

# insertion - Infinispan 缓存保留插入顺序

> ID：14043418
> 
> 赞同：2
> 
> 时间：2012-12-26T16:39:25.433
> 
> 标签：insertion, infinispan

我正在使用 Infinispan 5.0.1 来满足我的缓存需求。

我遇到的问题是我需要按照放入缓存中的相同顺序从缓存中取回数据。例如：

```
Cache<String, String> myCache = defaultCacheManager.getCache("myCache");
myCache.put("1", "ONE");
myCache.put("2", "TWO");
myCache.put("3", "THREE");
myCache.keySet();
Set<String> keySet = myCache.keySet();
for (String key : keySet) {
    System.out.println(myCache.get(key));
} 
```

这应该打印出来：一二三

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:25:03.927

目前我通过使用[ConcurrentLinkedHashMap](http://code.google.com/p/concurrentlinkedhashmap/)解决了这个问题， 并且效果很好。不过，如果有人知道“如何在 Infinispan 中做到这一点”的原始问题的答案，我将不胜感激。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T22:37:06.273

为什么要打印一二三？keySet() 返回一个 Set，它是一个无序的集合。请参阅 Set 的 Javadocs，以了解其合同。

# asp.net-mvc - 当身份模拟 = true 时 System.Web.Mvc.dll 无效

> ID：14043419
> 
> 赞同：1
> 
> 时间：2012-12-26T16:39:32.993
> 
> 标签：asp.net-mvc, web-config

我正在通过 Visual Studio 2012 启动的 iis express 上运行这个 MVC 4 站点。如果我将模拟更改为 false，它工作正常。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:33:56.163

当您想要在与 ASP.NET 应用程序的默认安全上下文不同的安全上下文下运行 ASP.NET 应用程序时，请使用 ASP.NET 模拟。

如果您为 ASP.NET 应用程序启用模拟，则该应用程序可以在两种不同的上下文之一中运行：作为通过 IIS 7 身份验证的用户或作为您设置的任意帐户。例如，如果您使用匿名身份验证并选择以经过身份验证的用户身份运行 ASP.NET 应用程序，则该应用程序将在为匿名用户设置的帐户（通常是 IUSR）下运行。同样，如果您选择在任意帐户下运行应用程序，它将在为该帐户设置的任何安全上下文下运行。

默认情况下，ASP.NET 模拟被禁用。如果启用模拟，您的 ASP.NET 应用程序将在通过 IIS 7 身份验证的用户的安全上下文中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:40:49.943

我不知道如何回答为什么该消息如此无用，但我可以说它似乎是开发 Web 主机（iis express）的产品，不在您尝试验证的用户的域中。

在我的示例中，我在通过 vpn 连接的家用计算机（未注册到域）上。将模拟设置为 false 并在 web.config 中启用 Windows 身份验证，它将正常工作。当您打开模拟时，它会给出无效消息。

如果您在从注册到域的机器（我在办公室的工作站）运行时打开了模拟，则它可以正常工作而不会出现错误消息。

希望这对其他人有帮助。

# ruby-on-rails - 如何在 Rails 中创建用户配置文件？

> ID：14043423
> 
> 赞同：1
> 
> 时间：2012-12-26T16:39:44.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Devise 进行用户注册和身份验证，但也希望拥有用户配置文件，例如 /user/john-doe，其中包含该人可以添加的所有字段，例如公司名称、电话号码等。

有什么 Rails 方法可以开箱即用地完成它吗？有什么宝石吗？如果没有，有人可以给我一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:57:44.030

没有添加公司名称，电话等的宝石（至少我知道:)），但通常我所做的是，

我通过迁移将上述列添加到表中

前任： `add_column :users, :company_name, :string`

然后我相应地更新模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, *:company_name*

end 
```

然后我运行这个命令来复制设计视图

```
rails generate devise:views 
```

然后我用新的 text_boxes 等更新相应的视图。

高温高压

# php - 复制数据库表期间脚本卡住 - Mysql - PHP

> ID：14043424
> 
> 赞同：4
> 
> 时间：2012-12-26T16:39:47.890
> 
> 标签：php, mysql, database, duplicates, copy

[这是我上](https://stackoverflow.com/questions/14038348/copy-duplicate-backup-database-tables-effectively-mysql/14038444#comment19394628_14038444)一个问题的后续问题。

我使用下面的代码来复制数据库表，但有时如果表很大，脚本会挂起并且页面一直在等待，当我比较两个表中的行数时，我发现类似于这个

> 原始表数：855057
> 备份表数：855022

所以看起来这个过程没有完全完成，这带来了一些问题，为什么它在执行插入语句时卡住了？

请记住，在大多数情况下，两者的计数实际上是相同的，即使它完成了复制，它仍然会挂起。

这是我的代码：

```
//duplicate tables structure 
 $query = "CREATE TABLE $this->dbName.`$newTableName` LIKE $this->dbName.`$oldTable`";
    ..
    ..

//duplicate tables data
  $query = "INSERT INTO $this->dbName.`$newTableName` SELECT * FROM $this->dbName.`$oldTable`";
    ..
    .. 
```

附言。我从本地主机运行复制脚本到位于远程服务器中的备份数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:13:31.787

您将需要通过运行 show full processlist 来检查查询是否仍在运行。您还必须记住，如果表引擎是 innodb，也会创建撤消日志，因为在中断的情况下事务将不得不回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:41:35.610

使用锁表

```
// duplicate tables structure 
$query = "CREATE TABLE $this->dbName.`$newTableName` LIKE $this->dbName.`$oldTable`";

// lock source and target table
$query = "LOCK TABLES $this->dbName.`$newTableName` WRITE, $this->dbName.`$oldTable` AS source WRITE";

// duplicate tables data
$query = "INSERT INTO $this->dbName.`$newTableName` SELECT * FROM $this->dbName.`$oldTable` AS source";

// unlock
$query = "UNLOCK TABLES"; 
```

# jquery - jquery mobile - make back button submit form from previous page?

> ID：14043430
> 
> 赞同：4
> 
> 时间：2012-12-26T16:40:19.120
> 
> 标签：jquery, jquery-mobile, browser-history

Right now i have a mobile page that is a search form. User searches and gets back some results. Each result is a link with further details about the result. The user clicks the details and then clicks back. This brings them back to the search page, but the previous search is no longer there.

What is the best way to redo the search (or cache results) of the search when the user goes back to the search form?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T16:59:50.237

您几乎没有选择，这完全取决于您是否打开/关闭了 ajax。如果您的 ajax 已打开，则可以这样做：

I. 对包含表单页面的 div 容器使用这个 sintax：

```
<div class="page" data-role="page" data-dom-cache="true"> 
```

由于***data-dom-cache="true"*** jQM 不会从 DOM 中删除该页面，并且您的所有表单数据都会被记住。

二、代替经典的表单提交，使用 $.ajax 提交您的数据，然后手动更改页面。这仅在页面未使用服务器端代码呈现时才有效。

三、在表单提交之前，将所有表单数据存储在某个 javascript 对象中，然后在表单页面 pagebeforeshow 事件中再次加载它。

四。如果关闭了 ajax 并且您使用 phonegap 作为应用程序包装器，请将您的表单数据存储在本地 SQL 轻数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:51:32.587

查看此示例以使用搜索输入进行搜索：

[jQuery Mobile 示例 - 分页搜索结果](http://www.raymondcamden.com/index.cfm/2011/2/25/jQuery-Mobile-Example--Paged-Search-Results)

# python - Django/Python email notification for events

> ID：14043431
> 
> 赞同：5
> 
> 时间：2012-12-26T16:40:20.730
> 
> 标签：python, django, email, notifications, reminders

I work on a page in Django, where users can set custom reminders for different dates (max. 3 per date). The reminders should send via e-mail. Its similar to Google Calendar, where you can set multiple reminders for each event in x-minutes, x-hour or x-days before the date starts. I wonder, how I can solve it combined with Django. Since there will be a lot of users and dates, which should of course also run perfomant. Should I do this with a cron job? Is there a python way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T17:02:48.090

另一种传统方式是使用 django-celery： http: [//pypi.python.org/pypi/django-celery/](http://pypi.python.org/pypi/django-celery/)

您可以使用**celerybeat**命令运行定期任务。您也可以从 django 视图开始挂起的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:48:38.253

您可以使用 cron 作业。要创建管理命令：请参阅[此处的文档](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

此外，您可以将电子邮件生成创建为基于队列的分布式实现，以提高性能。您也可以使用[Django-mailer](http://code.google.com/p/django-mailer/)应用程序。

# php - 创建查询结果的输出文件时出现问题

> ID：14043435
> 
> 赞同：2
> 
> 时间：2012-12-26T16:41:07.847
> 
> 标签：php, mysql

以下是我的 sql 查询，当我从 phpmyadmin 运行它时它运行良好，但是当我通过 PHP 运行相同的查询时，查询没有工作并给我以下错误。请让我知道如何从我的 php 文件运行此查询，以便它将在指定文件夹中创建输出文件。谢谢，

**询问**

```
SELECT * FROM lahore_student INTO OUTFILE 'b://uploaded//data.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '".'"'."'
LINES TERMINATED BY '\n' 
```

`Output: It creates file to my b drive in FOLDER named as Uploaded`

**错误**：文件 'b:uploadeddata.csv' 已存在

`NOTE: The uploaded folder was empty`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:47:24.087

看起来您正试图在 Windows 系统上运行它，这需要对目录分隔符进行特殊处理。

尝试：

```
SELECT * FROM lahore_student INTO OUTFILE 'b:\\uploaded\\data.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '".'"'."'
LINES TERMINATED BY '\n' 
```

或者：

```
SELECT * FROM lahore_student INTO OUTFILE 'b:/uploaded/data.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '".'"'."'
LINES TERMINATED BY '\n' 
```

另请注意，这不会覆盖现有文件（这是您遇到的错误）。因此，您需要确保首先删除具有该名称的任何文件。

请参阅`The “\” path name separator character`MYSQL 文档中此页面上的部分：http: [//dev.mysql.com/doc/refman/5.0/en/limits-windows.html](http://dev.mysql.com/doc/refman/5.0/en/limits-windows.html)

# macos - TTF_OpenFont() 返回 NULL

> ID：14043437
> 
> 赞同：6
> 
> 时间：2012-12-26T16:41:15.790
> 
> 标签：macos, qt, ubuntu, null, sdl-ttf

以下是事实：我在 Ubuntu 上使用代码块。我已经安装了 SDL 和 SDL_ttf 并成功地包含并链接了它们。我想将文本渲染到字体 FreeSerif 的屏幕上。

这是问题所在：当程序到达 TTF_OpenFont("FreeSerif.ttf,20") 行时，它返回 NULL，如果将其传递给 TTF_RenderText_Solid 函数，则会导致段错误。我已将字体文件添加到项目中，但它仍然无法正常工作。

这是代码：
`TTF_Init();`

```
TTF_Font *font = TTF_OpenFont("FreeSerif.ttf",20); //This returns NULL 

if(!font){printf("Unable to open font");exit(1);} //The program exits here 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-07T09:52:50.927

我有同样的问题，它似乎是一个路径错误，TTF_GetError() 抛出这个：

> 无法打开 Arial.ttf

您应该使用绝对路径而不是相对路径设置字体。对我来说，它是

> /图书馆/字体/Arial.ttf

代替 ：

> 宋体.ttf

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T08:20:52.140

您必须指定**完整的路径名**。那，或者您必须确定该文件位于程序的当前目录中（与可执行文件的目录不同）。

所以改用这个：

```
TTF_Font *font = TTF_OpenFont("/path/to/FreeSerif.ttf",20); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T13:30:30.343

```
// load font.ttf at size 20 into font

TTF_Font *font;

font=TTF_OpenFont("font.ttf", 20);

if(!font) {
    printf("TTF_OpenFont: %s\n", TTF_GetError());
   // handle error
} 
```

`font.ttf`找不到路径它返回 NULL 值

`if(!font) not check null value and TTF_GetError()`它返回最后一个错误。

# python - 如何在 python 3 中使用线程从键盘获取输入？

> ID：14043441
> 
> 赞同：0
> 
> 时间：2012-12-26T16:41:38.263
> 
> 标签：python, multithreading, python-3.x

我正在制作一个蛇游戏，它要求玩家在`WASD`不停止游戏进程的情况下按下按键来获取玩家的输入。所以我不能`input()`用于这种情况，因为这样游戏就会停止滴答作响以获取输入。

我发现了一个`getch()`无需按回车即可立即提供输入的功能，但此功能也会停止游戏滴答以获取类似`input()`. 我决定使用线程模块通过`getch()`不同的线程获取输入。问题是 getch() 在不同的线程中不起作用，我不知道为什么。

```
import threading, time
from msvcrt import getch

key = "lol" #it never changes because getch() in thread1 is useless

def thread1():
    while True:
        key = getch() #this simply is almost ignored by interpreter, the only thing it
        #gives is that delays print() unless you press any key
        print("this is thread1()")

threading.Thread(target = thread1).start()

while True:
    time.sleep(1)
    print(key) 
```

那么为什么`getch()`在它的时候没用`thread1()`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:30:38.653

问题是您在`key`内部创建了一个局部变量，`thread1`而不是覆盖现有的变量。快速简便的解决方案是声明`key`为 global inside `thread1`。

最后，您应该考虑使用锁。我不知道这是否有必要，但我想如果你尝试`key`在线程中写入一个值同时打印出来，可能会发生奇怪的事情。

工作代码：

```
import threading, time
from msvcrt import getch

key = "lol"

def thread1():
    global key
    lock = threading.Lock()
    while True:
        with lock:
            key = getch()

threading.Thread(target = thread1).start()

while True:
    time.sleep(1)
    print(key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:29:51.813

我尝试使用 getch 但它对我不起作用......（这里是win7）。

您可以尝试使用 tkinter 模块 // 但我仍然无法使其与线程一起运行

```
# Respond to a key without the need to press enter
import tkinter as tk    #on python 2.x use "import Tkinter as tk"

def keypress(event):
    if event.keysym == 'Escape':
        root.destroy()
    x = event.char
    if x == "w":
        print ("W pressed")
    elif x == "a":
        print ("A pressed")
    elif x == "s":
        print ("S pressed")
    elif x == "d":
        print ("D pressed")
    else:
        print (x)

root = tk.Tk()
print ("Press a key (Escape key to exit):")
root.bind_all('<Key>', keypress)
# don't show the tk window
root.withdraw()
root.mainloop() 
```

正如 Michael0x2a 所说，您可以尝试使用为游戏制作而制作的库 - pygame 或 pyglet。

@EDIT @Michael0x2a：你确定你的代码有效吗？无论我按什么，它总是打印相同的键。

@EDIT2：谢谢！

# android - No Longer want ActivityManager - Not a service issue

> ID：14043442
> 
> 赞同：7
> 
> 时间：2012-12-26T16:41:43.763
> 
> 标签：android, android-activity

I am working on a open source application (droidwall fork) and i am stuck with one of the issue were the iptables rules were not applied properly when the system reboots. it works perfectly on most of the android versions. But on some specific ROMS (CM 10.1) it gives the following logcat

```
12-26 08:39:27.116 I/ActivityManager(582): 
No longer want dev.ukanth.ufirewall (pid 2297): empty #17 
```

My code works somethings like below,

```
private Handler mHandler = new Handler(Looper.getMainLooper());
@Override
public void onReceive(final Context context, final Intent intent) {
    if (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {
        if (Api.isEnabled(context.getApplicationContext())) {
            final Handler toaster = new Handler() {
                public void handleMessage(Message msg) {
                    if (msg.arg1 != 0) Toast.makeText(context, msg.arg1, Toast.LENGTH_SHORT).show();
                }
            };

            mHandler.post(  
            // Start a new thread to enable the firewall - this prevents ANR
            new Runnable() {
                @Override
                public void run() {
                    if (!Api.applySavedIptablesRules(context.getApplicationContext(), false)) {
                        // Error enabling firewall on boot
                        final Message msg = new Message();
                        msg.arg1 = R.string.toast_error_enabling;
                        toaster.sendMessage(msg);
                        Api.setEnabled(context.getApplicationContext(), false, false);
                    }
                }
            });
            // Start a new thread to enable the firewall - this prevents ANR
        }
        /*Intent i = new Intent(context, StartupService.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startService(i);*/
    } 
```

You can find my Api.java class [here](https://github.com/ukanth/afwall/blob/master/src/dev/ukanth/ufirewall/Api.java).

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T17:10:51.790

> 12-26 08:39:27.116 I/ActivityManager(582): 不再需要 dev.ukanth.ufirewall (pid 2297): empty #17

此日志意味着您已达到允许的最大空进程。（在你的情况下，16 是最大值）

更多关于android doc 中的[空进程](http://developer.android.com/guide/components/processes-and-threads.html)：

> 不包含任何活动应用程序组件的进程。保持这种进程处于活动状态的唯一原因是出于缓存目的，以便在下次组件需要在其中运行时缩短启动时间。系统通常会杀死这些进程，以平衡进程缓存和底层内核缓存之间的整体系统资源。

因此，不确定您拥有的日志是否与您的 iptables 规则问题*直接*相关。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T10:06:26.583

方法`onReceived()`完成后，系统假定您已完成`BroadcastReceiver`并将托管进程设置为最低优先级。而且我们知道toaster Handler的`handleMessage()`方法是异步调用的，在`onReceived()`方法结束后调用，并不能保证进程还在执行回调方法

在大多数Android版本上，系统启动时运行的进程数- up 不是很多，并且您的进程（优先级最低）有机会在回调方法之前保持活动状态`handleMessaged()`被调用，但使用 ROMS (CM 10.1)，可能有太多进程在运行，系统必须杀死低优先级进程以释放资源，以便高优先级进程可以正常运行，您的进程是一个很好的候选者被杀。

我建议您启动一个服务来执行那些异步任务，这使您的进程具有更高的优先级（默认为服务进程优先级，或者您可以使用`startForeground()`方法来获取前台进程优先级）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:46:07.243

也许您可以延迟使用 mHandler.post 来测试您的案例，例如 20 秒？

# clearcase-ucm - 最佳实践：从 UCM ClearCase 中删除过时的工件

> ID：14043450
> 
> 赞同：1
> 
> 时间：2012-12-26T16:42:09.200
> 
> 标签：clearcase-ucm

我们在 ClearCase UCM 中有一个流。我们在这个流上创建视图并为构建目的获取代码。复制的总数据为 10 GB。这是一个巨大的代码库。我决定调查是什么让它变得如此庞大。

我发现：

> 1) 多个版本的第三方应用程序存储在 ClearCase 中
> 
> 2) 但我们的应用程序只使用最新的第三方应用程序
> 
> 3) 有很多过时和冗余的代码可用

我提议：

> **1) 使用rmname（不是 rmelement**）删除旧版本的第三方应用程序，这将确保元素历史记录的可用性
> 
> 2）去除所有冗余代码

**共检测到 5 GB 的过时数据。**

我的逻辑：

我认为这是保持开发流程清洁的最佳方式。也就是说，组织开发流的最佳方式是拥有最好、最干净和最精简的源代码。

此外，由于所有 HISTORY 将始终在 ClearCase 中可用，因此无需担心删除元素。

我觉得陈旧、冗余和过时的代码和工件属于历史，而不是当前的开发流程。

最后，如果我们在 VOB 中有膨胀，我觉得像制作基线等 ClearCase 操作将需要更多时间。由于我们为每晚构建做一个增量基线，我不认为这些过时的项目是基线。但我觉得所有 ClearCase 操作都会受到膨胀的影响。

**我的逻辑正确吗？我对 UCM ClearCase 的理解正确吗？** **请让我知道在这种情况下的最佳做法。**

**尽管当前流中已过时 5 GB 数据，但我工作场所的人们不想删除过时的文件。**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:01:12.810

在这种情况下，最佳实践实际上与 UCM 是分开的。
我也开始在 ClearCase 中存储第三方二进制文件。它不能很好地扩展，Vob 开始变得臃肿，而且太大而无法轻松管理（即备份）。

我现在更喜欢将第三方存储在[像 Nexus 这样的工件存储库](http://www.sonatype.org/nexus/)中，并在我的构建过程中添加一个小的 maven 脚本，以便下载正确版本的正确二进制文件，如 pom.xml 文件中所述。

请注意，要从 vob、rmelem 或 rmver 中删除旧版本的二进制文件，实际上是不可取的（超链接损坏的风险），但我曾经这样做：

```
cleartool rmver -data aLargeBinary@/main/.../branch/OldVersion 
```

这将*保留*ClearCase 中的版本，但会删除版本内容（即大型二进制文件本身）：这允许 Vob 变得更小。

* * *

话虽如此，我同意您的一般政策（尤其是关于*冗余*代码）

# javascript - 在 d3.js 多系列行上叠加圆圈、文字等

> ID：14043455
> 
> 赞同：1
> 
> 时间：2012-12-26T16:42:55.657
> 
> 标签：javascript, d3.js, charts, dom-events, graphing

我有经过轻微修改的[多系列折线图代码](http://bl.ocks.org/3884955)以支持我的数据集。这就是我想要做的，而且我看过的任何解决方案似乎都没有适合我。我希望在线上的每个点上覆盖一些元素（圆形、矩形、隐藏，无论哪个），这样我就可以`mouseover`在该点上附加一个元素以显示一个包含 d.time、d.jobID 和多少数据的框这与平均值不同。如果可能的话，我希望解决方案只对主线（变化线）执行此操作，而不是绘制代表平均值的两条线。在这里，我有一张原样的图表图片，用于目视检查。如果这不起作用，我也附上它。

我在下面发布了一些代码：

```
d3.tsv("values.tsv", function(error, data) {
color.domain(d3.keys(data[0]).filter(function(key) { return key !== "time" && key !==   "jobID"; }));

data.forEach(function(d) {
  d.time = parseDate(d.time);
  d.jobID = parseInt(d.jobID);
});

var points = color.domain().map(function(name) {
return {
  name: name,
  values: data.map(function(d) {
    return {time: d.time, jobID: d.jobID, value: parseFloat(d[name],10)};
  })
};
}); 
```

……

```
svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + height + ")")
  .call(xAxis);

svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
.append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", 7)
  .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("mbps");

var point = svg.selectAll(".point")
  .data(points)
.enter().append("g")
  .attr("class", "point");

point.append("path")
  .attr("class", "line")
  .attr("d", function(d) { return line(d.values); })
  .style("stroke", function(d) { return color(d.name); });

point.append("text")
  .datum(function(d) { return {name: d.name, jobID: d.jobID, value: d.values[d.values.length - 1]}; })
  .attr("transform", function(d) { return "translate(" + x(d.value.time) + "," + y(d.value.value) + ")"; })
  .attr("x", 6)
  .attr("dy", ".7em")
  .text(function(d) { return d.name; });
}); 
```

我已经尝试了以下代码，只是为了看看它是否适用于我的实现：

```
point.append("svg:circle")
     .attr("stroke", "black")
     .attr("fill", function(d, i) { return "black" })
     .attr("cx", function(d, i) { return x(d.time) })
     .attr("cy", function(d, i) { return y(d.value) })
     .attr("r", function(d, i) { return 3 }); 
```

D3.JS 似乎是一个非常棒的作品，我很幸运拥有它。

编辑：[jsfiddle](http://jsfiddle.net/F6WYP/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:40:24.477

诀窍是将数据再次传递给选择，然后对其结果进行操作。查看[Mike 的教程](http://bost.ocks.org/mike/nest/)以了解一些背景和示例。

我已更改您的 jsfiddle 以在[此处](http://jsfiddle.net/F6WYP/11/)添加圆圈。附加`svg:title`元素或做其他事情以显示更多信息应该很简单。请注意，我修改了您的代码以稍微创建数据点以包含每个元素的名称。这样，只需要一个额外的选择级别（将所有点视为相同，并在一次通过中添加它们）。从代码设计的角度来看，解决这个问题的更简洁的方法是增加 2 个级别——首先选择单行的点（并添加一个`svg:g`元素对它们进行分组），然后在该组中添加点. 但是，这会使代码变得更加复杂且难以理解。

# php - 通过php将Access数据库导出到MySql

> ID：14043456
> 
> 赞同：3
> 
> 时间：2012-12-26T16:42:57.247
> 
> 标签：php, mysql, sql, ms-access, ms-access-2010

我在 MS Access 中有一个数据库，我想通过 php 脚本将此数据库导出到 mysql 中。

通过脚本将 csv 文件导入 mysql 非常容易，但是如何将我的 Access 数据库从 php 脚本导出到 csv 文件？然后我将能够简单地将该 csv 文件导入 mysql 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:04:31.867

对不起，

我不认为 php 是这里的解决方案，php 不能强制您的 ms 访问数据库将自身导出到 csv 文件或更多文件

我有同样的问题，我不建议尝试直接上传 ms access db，以防它很大，请改用 navicat

[http://www.navicat.com/](http://www.navicat.com/)

**与您的问题相关的个人故事**

这是我的故事，我有一个大小约为 200 Mb 的 ms acces db，两个表有 ~1000 行和 ~50000 行以及许多其他有用的表链接到这些表，我只需要配置与 mysql 服务器的连接然后上传该文件，没过多久，我的数据被迁移到mysql，没有任何数据丢失，请记住，您应该注意导入表格等，如果您想更新现有数据库，请记住您可以设置列映射（旧的 ms 访问 db 到新的 mysql 结构）

# jqplot - jqplot 条形图忽略了我的浮点数。如何修复它们？

> ID：14043457
> 
> 赞同：3
> 
> 时间：2012-12-26T16:43:03.763
> 
> 标签：jqplot

我正在尝试使用 jqplot 生成条形图。我所有的值都是浮点数，如下所示：

```
var s1 = [17.1, 18.2];
var s2 = [50.2, 53];
var s3 = [93.9, 93];
var s4 = [34.1, 34]; 
```

但它会将它们四舍五入为整数。

这是工作示例：http: [//jsfiddle.net/JkBKs/](http://jsfiddle.net/JkBKs/)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T05:52:21.453

试试这个，它有效

```
 axes:
        {
            xaxis:{
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
            },
            yaxis: {
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer, 
                    min: 0 ,
                    tickOptions: {
                                  formatString: '%.1f'
                                } 

                   }
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T02:31:57.353

请查看“formatString”内容

```
seriesDefaults: {
                renderer:$.jqplot.BarRenderer,
                // Show point labels to the right ('e'ast) of each bar.
                // edgeTolerance of -15 allows labels flow outside the grid
                // up to 15 pixels.  If they flow out more than that, they
                // will be hidden.
                pointLabels: { show: true, location: 'e', edgeTolerance: -15, formatString: '%.1f' },
                // Rotate the bar shadow as if bar is lit from top right.
                shadowAngle: 135,
                // Here's where we tell the chart it is oriented horizontally.
                rendererOptions: {
                    barDirection: 'horizontal'
                }
            },
            axes: {
                yaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                }
            } 
```

# mysql - MySQL 中的 IF 和 Case 语句

> ID：14043458
> 
> 赞同：4
> 
> 时间：2012-12-26T16:43:04.707
> 
> 标签：mysql, if-statement, case-statement

如果 5 大于 2，我想选择 *，如果为 false，则选择特定列。我哪里错了？

```
SELECT IF(5>2, *, column_x),
CASE whereheard_name WHEN 'Newspaper' THEN 'a'
         WHEN 'TV' THEN 'b' 
         WHEN 'Internet' THEN 'c'
         ELSE '-'
    END 
    AS result
FROM whereheard; 
```

谢谢楼上的回答。这是我正在使用的以下示例存储过程：

```
DELIMITER $$

USE `registration`$$

DROP PROCEDURE IF EXISTS `test2`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `test2`()
BEGIN
    IF(5>2) THEN
            SELECT * FROM whereheard;
        ELSE
            SELECT whereheard_name FROM whereheard;
        END IF;
END$$

DELIMITER ; 
```

这就是我所说的：

```
CALL test2(),        
CASE whereheard_name WHEN 'Newspaper' THEN 'a'
         WHEN 'TV' THEN 'b' 
         WHEN 'Internet' THEN 'c'
         ELSE '-'
    END 
    AS result
FROM whereheard; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:10:07.333

您不能在 SQL 中执行此操作（我的意思是特定语句不能具有动态列数）。您可以编写完成这项工作的存储过程：

```
CREATE PROCEDURE FOO .....
.....
IF (5>2) THEN
 SELECT * FROM ...
ELSE
 SELECT column1 FROM ....
END IF; 
```

# wxpython - WxPython DataViewListCtrl 项数据

> ID：14043470
> 
> 赞同：1
> 
> 时间：2012-12-26T16:44:09.663
> 
> 标签：wxpython

我正在使用 DataViewListCtrl 并添加项目

> 附加项（[“test123”]）

如何添加与每个项目关联的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-27T00:33:41.757

老问题，我知道，但应该有一个答案。

`AppendItem(["test123", "data for second column", "third column", "etc..."])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:00:32.190

到目前为止，我还没有使用过该控件，但似乎我们 AssociateModel 将类对象组与控件相关联。有关更多信息，请参阅 wxPython 演示。就个人而言，我更喜欢使用 ObjectListView，它是通用 wx.ListCtrl 的包装器。它的工作原理要简单得多。

您可以在此处阅读更多相关信息：http: [//www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)

# java - 分隔线在 PullToRefreshListView 中消失

> ID：14043474
> 
> 赞同：1
> 
> 时间：2012-12-26T16:44:28.930
> 
> 标签：java, android

我想在我已经开发的应用程序中使用 Pull-To-Refresh Library，源代码在[这里](https://github.com/chrisbanes/Android-PullToRefresh)。

我在 Android 2.3.5 上运行启动器示例。

问题是当我们添加`PullToRefreshListView`到我们的黑色背景列表时，项目（分隔符）之间的白色分隔符消失了。

在我自己的应用程序和链接示例中，这对我来说是一样的。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T13:50:30.160

尝试应用下面的代码，它以编程方式工作。listview.getRefreshableView().setDividerHeight(0);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:54:40.213

我应该修改 activity_ptr_list.xml 文件。我忘了修复`android:divider`：

```
<com.handmark.pulltorefresh.library.PullToRefreshListView
        android:id="@+id/pull_refresh_list"
        android:cacheColorHint="#00000000"
        android:divider="#FFFFFF" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:07:10.953

尝试将下一个样式应用于您的 ListView：

`<item name="android:cacheColorHint">@android:color/transparent</item>`

# java - Java HttpURLConnection 登录时没有cookie

> ID：14043476
> 
> 赞同：0
> 
> 时间：2012-12-26T16:44:43.873
> 
> 标签：java

我目前正在尝试使用 HttpURLConnection 登录，然后获取会话 cookie...

我已经在我自己的服务器上的一些测试页面上尝试过，并且效果很好。当我发送时，`a=3&b=5`我得到`8`了 cookie（PHP 页面将两者加在一起）！但是当我在另一个页面上尝试时，输出只是页面，就好像我没有用 POST 发送任何内容:(

欢迎提出一般性的改进建议！:)

我的代码：

```
HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setRequestMethod("POST");
conn.setRequestProperty("useragent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0");
conn.setRequestProperty("Connection", "keep-alive");
DataOutputStream out = new DataOutputStream(conn.getOutputStream());
out.writeBytes("USER=tennox&PASS=*****");
out.close();

BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
String response = new String();
while ((line = in.readLine()) != null) {
    response = response + line + "\n";
}
in.close();

System.out.println("headers:");
int i = 0;
String header;
while ((header = conn.getHeaderField(i)) != null) {
    String key = conn.getHeaderFieldKey(i);
    System.out.println(((key == null) ? "" : key + ": ") + header);
    i++;
}
String cookies = conn.getHeaderField("Set-Cookie");
System.out.println("\nCookies: \"" + cookies + "\""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:58:50.837

cookie 路径最初应设置为`; Path=/`，还需要在 POST 的请求标头中设置一个 Set-Cookie。

最好用[HttpClient](http://hc.apache.org/httpcomponents-client-ga/)重写它。

# c# - SQLite blob 字段不接收参数值

> ID：14043479
> 
> 赞同：1
> 
> 时间：2012-12-26T16:45:04.530
> 
> 标签：c#, sqlite, system.data.sqlite

我正在尝试使用 SQLite 为通常从服务器请求数据的 .NET 应用程序创建离线缓存。我已经让数据库和表定义部分工作正常，并且在大多数情况下加载数据也工作正常。我在我的测试表中缓存了大约 14,000 行，并且数据大多是正确的。问题是我似乎无法让`System.Data.SQLite`包装器保留`byte[]`包含 SQL 时间戳值的数据。

首先，我应该注意我意识到我可以将时间戳编码为其他内容（例如字符串或数字数据），但如果可能的话，我更愿意使用本机 BLOB 功能。所以让我们从那里开始。

表 DDL 现在看起来像这样：

```
CREATE TABLE Accounts
(
    AccountID Int NOT NULL,
    -- ...
    Timestamp BLOB
) 
```

但是我应该注意，我也尝试过`VARBINARY`, `VARBINARY(4000)`,`BINARY`和`GENERAL`for`Timestamp`的列类型，结果没有区别。

在插入时，我生成了一个参数化的 SQL 命令，如下所示（为清楚起见，删除了许多字段）：

```
INSERT INTO Accounts (AccountID, Timestamp)
SELECT @AccountID, @Timestamp
WHERE NOT EXISTS (SELECT 1 FROM Accounts WHERE AccountID = @AccountID) 
```

该参数`@Timestamp`被赋予一个`DbType`并`Binary`具有适当的大小，并且插入行中的所有其他数据看起来都很好。但由于某种原因，`Timestamp`保留为空。为什么会这样？

该值可验证为`byte[8]`具有预期内容的 a。实际上，如果我将列类型更改为具有字符串关联性并给它一个`DbType.String`，则该列将存储“System.Byte []”。

该列具有空值的事实是肯定的，首先只需使用 SQLite 数据库浏览器打开数据库文件并查看，其次是因为使用 a 在第二个表中设置列`(SELECT MAX(Timestamp) FROM Accounts)`会使字段为空，根据文档发生当且仅当每一行的时间戳为空。

那么我可能会错过什么？

** 编辑 **

请注意：这是[SQLite](http://www.sqlite.org/)，而不是 SQL CE。有些回应似乎混淆了两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:39:34.457

嗯，这真的很奇怪。当我意识到 SQLite 数据库浏览器对我撒谎时，我有了一个突破——它在 0x0 处截断二进制数据，这是我所有时间戳值的第一个字节，并将这些字段报告为空。我在尝试插入随机字节数据而不是时间戳后发现了这一点，此时我看到数据在 GUI 中通过。显然它将数据视为以空字符结尾的字符串，而我一开始并不知道它是如此幼稚。

现在，我一直在使用 SQLite 数据库浏览器作为代理来调试问题（当我尝试读取时间戳值时出现了 DBNulls）。但是当我回去查看是否仍然从 System.Data.SQLite 包装器中获取 DBNull 时，我发现当仅使用原始时间戳数据运行代码时，不再生成 DBNull。在某个时候，代码开始工作了——我只是没有注意到，因为我愚蠢地依赖 GUI 向我显示数据。

奇怪的是，我尝试追溯我的步骤，撤消我为找出解决问题的具体原因所做的事情。但是现在我无法重现最初的错误，尽管起初它是绝对一致的（我无法绕过它的事实促使我首先使用 GUI）！但是我并没有将每个损坏的版本都检查到源代码管理中，所以在这一点上我真的不知道问题是什么。

无论如何，这个故事至少有一个寓意，那就是，如果您不确定 GUI 的功能，请不要相信它。很难说我已经有了工作代码多久了，只是不知道而已。

# php - 用 php 和 MySql 重命名列名

> ID：14043480
> 
> 赞同：2
> 
> 时间：2012-12-26T16:45:06.420
> 
> 标签：php, mysql, sql, alter-table, alter

我正在尝试使用 php 和 mysql 将 c 列的名称更改为 novaC。我所看到的所有地方似乎都给出了相同的解决方案，但它似乎不起作用：

```
if(isset($_GET["rename"])){
    mysql_query("ALTER TABLE myTable
    RENAME COLUMN c to novaC");
} 
```

如果我输入：`ALTER TABLE aaa RENAME COLUMN c to novaC`直接在 MySql 中它给出：

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLUMN c to novaC' at line 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T16:48:22.747

```
if(isset($_GET["rename"])){ 
    mysql_query("ALTER TABLE myTable CHANGE c  novaC varchar(9999)"); 
} 
```

[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T16:51:25.490

```
alter table tablename change oldColumn newColumn varchar(10) ; 
```

[参考：Alter Table - MySQL 命令](http://php.about.com/od/learnmysql/p/alter_table.htm)

# plugins - crm 2011如何获取插件正在执行的stepid

> ID：14043482
> 
> 赞同：2
> 
> 时间：2012-12-26T16:45:18.540
> 
> 标签：plugins, dynamics-crm-2011, dynamics-crm

在 crm 2011 中，在插件的 Execute 方法中，我如何知道正在执行的注册步骤的 id？例如，我有两个步骤来预创建帐户。execute 方法将运行两次，每个步骤一次。我需要在 execute 方法中知道实际运行的步骤的 stepid。我在上下文中找不到它。

更新：

我在这里更新以解释该场景，因为在评论中我没有足够的字符。所以场景：

我有一个自动编号实体的解决方案，使用户能够按照他们想要的方式格式化他们的数字。

为此，我有一个实体（自动编号），他们在其中配置格式、实体和他们想要编号的字段。每次为自动编号实体创建记录时，它将在要编号的实体（例如帐户）的创建消息的预操作中动态创建和注册一个步骤。执行该步骤时，它将加载自动编号记录以了解如何对帐户字段进行编号。

创建的步骤必须链接到自动编号记录，并且自动编号实体具有存储步骤 ID 的属性。此属性在创建步骤时在自动编号实体的预创建时填充。此链接属性允许在用户删除自动编号记录时取消注册该步骤，因为它确切地知道要取消注册的步骤。如果有更多插件注册到帐户，它还允许用户设置执行步骤的顺序。

我遇到的问题是当我想为同一实体编号 2 个或更多属性时。在这种情况下，用户将创建自动编号实体的 2 条记录，以便对帐户的 2 个字段进行编号。在这种情况下，我将在帐户中注册 2 个步骤。创建帐户时，一个步骤将为一个字段编号，另一步骤将为另一个字段编号。这就是为什么我需要知道正在执行的步骤的 ID 以便加载正确的自动编号记录。

很抱歉解释繁琐，但这种情况有点复杂，我不确定我是否足够清楚，但如果你愿意，我会尝试更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:35:07.567

The [OwningExtension](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.owningextension.aspx) property available on the `IPluginExecutionContext` will return an `EntityReference` to the `SdkMessageProcessingingStep` which should provide all the information you need.

What are you trying to achieve by registering the same plugin twice for the same Message and Stage? I'm struggling to think of a valid scenario.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T20:47:41.440

您可以从上下文中获取消息的名称。通常，我会做类似的事情。

```
public void Execute(IServiceProvider serviceProvider)
{
  IPlugingExecutionContext context 
    = (IPlugingExecutionContext)serviceProvider
      .getService(typeof(IPlugingExecutionContext));

  switch(context.MessageName)
  {
    case "Create" ExecuteCreate(); break;
    case "Retrieve" ExecuteCreate(); break;
    case "Update" ExecuteCreate(); break;
    case "Delete" ExecuteCreate(); break;
    default ExecuteFunctionality(Context.MessageName);
  }
} 
```

Then, of course, you need to implement those methods too. And usually I have a private field that hold the reference to *context*. It's good to be able to access it easily when the need arises. Also, you can (and should) check if the message is supported by your plug in, if there's a *Target* and if it's of the right entity type. Stuff like that.

# c# - WPF 数据绑定 TooWay XAML 到 C# 和 C# 到 XAML

> ID：14043483
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:45:21.120
> 
> 标签：c#, xaml, binding

我有 XAML 代码：

```
<TextBox Name="textBoxMask1"/>
<TextBox Name="textBoxMask2"/>
<TextBox Name="textBoxMask3"/>
...
<TextBox Name="textBoxMask9"/> 
```

和 C# 中的类：

```
private static string mask1;
public static string Mask1
{
    get { return mask1; }
    set { mask1 = value; }
}

private static string mask2;
public static string Mask2
{
    get { return mask2; }
    set { mask2 = value; }
}

private static string mask3;
public static string Mask3
{
    get { return mask3; }
    set { mask3 = value; }
}
....
private static string mask9;
public static string Mask9
{
    get { return mask9; }
    set { mask9 = value; }
} 
```

我想将这些 TextBoxes 与 Properties -> textBoxMask1 与 Mask1 等绑定。之前我是通过 TextChanged 完成的，但我想进行绑定。TooWay Binding，因为我想在另一个 C# 类中预定义 Mask1、Mask2、Mask3、...、Mask9，并且可能稍后更改这些值 - 也在某些 C# 代码中 - 我希望我的更改在布局中可见（XAML ) 并在 C# 代码中 - 所以前。从 C# 更改 Property Mask1 将更改 TextBox textBoxMask1 中的 Text，更改 textBoxMask1 中的 Text 将更改 Property Mask1。我不明白，如何在对象 XAML 和 C# 之间建立连接（绑定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:10:45.307

对于普通的绑定，您不需要您的属性是静态的，只需公开即可。这里有一个例子：

C# 代码（用于一个属性）

```
private string mask1;
public string Mask1
{
    get { return mask1; }
    set 
        { 
           mask2 = value;
           RaisePropertyChanged("Mask1");
        }
} 
```

对于绑定来说，包含属性的类实现 INotifyPropertyChanged 接口，并且在每个属性的 setter 中引发相应的事件，这一点非常重要。另一种选择是将所有属性设为DependecyProperty，但这通常是矫枉过正。

至于 XAML：

```
<TextBox Name="textBoxMask1" Text="{Binding Mask1, Mode=TwoWay}"/> 
```

（TwoWay Binding 是 Text 属性的默认设置，但明确放置它并没有什么坏处）。

只需确保包含您的 TexBoxes（通常是 UserControl）的对象的 DataContext 设置为您的 C# 类的有效实例。

顺便说一句，这是一个非常基本的问题，这就是为什么你得到了反对票而在我之前没有答案。所期望的是，您提出的问题对您来说是一个真正的问题，并给出了非常具体的答案，而不是像“教我如何做到这一点”之类的东西。

如果这回答了您的问题，请不要忘记将其标记为答案（左上角的“勾号”标记）。投票也将不胜感激。

希望它有帮助，问候。

# matrix - 如何找到魔方的方向？

> ID：14043484
> 
> 赞同：4
> 
> 时间：2012-12-26T16:45:21.380
> 
> 标签：matrix, orientation, webgl, three.js, rubiks-cube

我正在尝试使用 three.js 在 webgl 中制作一个魔方游戏（你可以[在这里](http://christophebelpaire.github.com/rubikjs/)尝试）。而且我在女巫轴上检测到问题我必须根据立方体的旋转来旋转我的立方体。例如，如果立方体处于原始位置/旋转，如果我想从下到上旋转左层，我必须在 Y 轴上进行旋转。但是我在 Y 轴上旋转了我的立方体 90 度，我将不得不在 Z 轴上旋转它以从下到上旋转我的左层。

我试图找到一种方法来根据立方体的方向获得正确的旋转轴。目前，如果我想将前层从下向上移动，我检查立方体旋转矩阵轴的女巫向量与向量（0,1,0）最平行。但它不适用于像这样的边缘情况，例如：

![立方体方向](../Images/0b0261a81b3e593f1193364116f18d4f.png)

我想有一些简单的方法可以做到这一点，但我在矩阵和数学方面还不够好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T23:52:57.473

可以`AxisHelper`显示场景的轴，您可以使用这些轴来确定方向。

```
var axishelper = new THREE.AxisHelper(40);
axishelper.position.y = 300;
scene.add(axishelper); 
```

您还可以使用 Chrome 开发人员工具或 Firebug 来`log`检查您的立方体并检查`position`和`rotation`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T03:42:19.187

您可以将每个立方体的方向存储在其自己的 4x4 矩阵（即“模型”矩阵）中，该矩阵告诉您如何从立方体的本地坐标到世界坐标。现在，由于您想将立方体旋转到世界坐标中的轴（即矢量），您需要将轴转换为立方体坐标。这正是模型矩阵的*逆*产生的结果。

# c - C中带有const的“私有”结构成员

> ID：14043486
> 
> 赞同：9
> 
> 时间：2012-12-26T16:45:30.697
> 
> 标签：c, struct, constants, private

为了获得干净的代码，使用一些 OO 概念可能很有用，即使在 C 中也是如此。我经常编写由一对 .h 和 .c 文件组成的模块。问题是模块的用户必须小心，因为私有成员在 C 中不存在。使用 pimpl 习惯用法或抽象数据类型是可以的，但它添加了一些代码和/或文件，并且需要更重的代码。我讨厌在不需要访问器时使用访问器。

这是一个想法，它提供了一种让编译器抱怨对“私人”成员的无效访问的方法，只需要一些额外的代码。这个想法是定义两次相同的结构，但为模块的用户添加了一些额外的“const”。

当然，使用演员表仍然可以写入“私人”成员。但重点只是避免模块用户出错，而不是安全地保护内存。

```
/*** 2DPoint.h module interface ***/
#ifndef H_2D_POINT
#define H_2D_POINT

/* 2D_POINT_IMPL need to be defined in implementation files before #include */
#ifdef 2D_POINT_IMPL
#define _cst_
#else
#define _cst_ const
#endif

typedef struct 2DPoint
{
    /* public members: read and write for user */
    int x;

    /* private members: read only for user */
    _cst_ int y;
} 2DPoint;

2DPoint *new_2dPoint(void);
void delete_2dPoint(2DPoint **pt);
void set_y(2DPoint *pt, int newVal);

/*** 2dPoint.c module implementation ***/
#define 2D_POINT_IMPL
#include "2dPoint.h"
#include <stdlib.h>
#include <string.h>

2DPoint *new_2dPoint(void)
{
    2DPoint *pt = malloc(sizeof(2DPoint));
    pt->x = 42;
    pt->y = 666;

    return pt;
}

void delete_2dPoint(2DPoint **pt)
{
    free(*pt);
    *pt = NULL;
}

void set_y(2DPoint *pt, int newVal)
{
    pt->y = newVal;
}

#endif /* H_2D_POINT */

/*** main.c user's file ***/
#include "2dPoint.h"
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    2DPoint *pt = new_2dPoint();

    pt->x = 10;     /* ok */
    pt->y = 20;     /* Invalid access, y is "private" */    
    set_y(pt, 30);  /* accessor needed */
    printf("pt.x = %d, pt.y = %d\n", pt->x, pt->y);  /* no accessor needed for reading "private" members */

    delete_2dPoint(&pt);

    return EXIT_SUCCESS;
} 
```

现在，问题来了：这个技巧是否符合 C 标准？它适用于 GCC，编译器不会抱怨任何事情，即使有一些严格的标志，但我怎么能确定这真的没问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:55:46.430

这几乎可以肯定是未定义的行为。

禁止写入/修改声明为的对象`const`，这样做会导致 UB。此外，您采用的方法重新声明`struct 2DPoint`为两种技术上不同的类型，这也是不允许的。

请注意，这（通常作为未定义的行为）并不意味着它“肯定不会工作”或“它必须崩溃”。事实上，我觉得**它起作用是很合乎逻辑的，**因为如果一个人聪明地阅读源代码，他可能很容易发现它的目的是什么，以及为什么它可能被认为是正确的。然而，编译器并不智能——充其量，它是一个有限自动机，不知道代码**应**该做什么；它只（或多或少）遵守语法的句法和语义规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T17:29:11.247

这违反了 C 2011 6.2.7 1。

6.2.7 1 要求同一结构在不同翻译单元中的两个定义具有兼容的类型。不允许有`const`一个而不是另一个。

在一个模块中，您可能会引用这些对象之一，并且这些成员对于编译器来说似乎是 const。当编译器写入对其他模块中的函数的调用时，它可能会将来自 const 成员的值保存在寄存器或其他缓存中，或者保存在源代码后面的部分或完全评估的表达式中，而不是函数调用。那么，当函数修改成员并返回时，原来的模块不会有改变的值。更糟糕的是，它可能会使用更改值和旧值的某种组合。

这是非常不恰当的编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T16:55:21.810

用 Bjarne Stroustrup 的话来说：C 不是为*支持*OOP 而设计的，虽然它*支持*OOP，这意味着可以用 C 编写 OOP 程序，但很难做到。因此，如果您*必须*用 C 编写 OOP 代码，使用这种方法似乎没有错，但最好使用更适合该目的的语言。

通过尝试用 C 编写 OOP 代码，您已经进入了一个必须覆盖“常识”的领域，因此只要您负责正确使用它，这种方法就可以了。您还需要确保它被彻底和严格地记录在案，并且与代码有关的每个人都知道它。

**编辑**哦，您可能必须使用演员才能绕过`const`. 我不记得 C 风格的演员表是否可以像 C++ 一样使用`const_cast`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T19:30:23.107

您可以使用不同的方法 - 声明两个`struct`s，一个用于没有私有成员（在标头中）的用户，另一个用于在您的实现单元中内部使用的私有成员。所有私有成员都应该放在公共成员之后。

您总是将指针传递给`struct`并在需要时将其转换为内部使用，如下所示：

```
/* user code */
struct foo {
    int public;
};

int bar(void) {
    struct foo *foo = new_foo();
    foo->public = 10;
}

/* implementation */
struct foo_internal {
    int public;
    int private;
};

struct foo *new_foo(void) {
    struct foo_internal *foo == malloc(sizeof(*foo));
    foo->public = 1;
    foo->private = 2;
    return (struct foo*)foo;  // to suppress warning
} 
```

C11 允许[未命名的结构字段](http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html)（GCC 有一段时间支持它），因此如果使用 GCC（或符合 C11 的编译器），您可以将内部结构声明为：

```
struct foo_internal {
    struct foo;
    int private;
}; 
```

因此不需要额外的努力来保持结构定义的同步。

# asp.net - Preinit 和其他事件一样吗？

> ID：14043497
> 
> 赞同：0
> 
> 时间：2012-12-26T16:46:13.627
> 
> 标签：asp.net

**[PreInit](http://wiki.asp.net/page.aspx/1512/aspnet-page-life-cycle-events/)**页面生命周期的入口点是预初始化阶段，称为“PreInit”。这是唯一允许以编程方式访问母版页和主题的事件。您可以在此事件中动态设置母版页和主题的值。您还可以在此事件中动态创建控件。

但是这个定义对于像 load init 等其他事件是有效的。对吗？

我的意思是，这项工作也可以在其他活动中完成。

**查询**PreInit 的独特含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:51:58.647

有时可能会有重叠，具体取决于您正在执行的操作，但最好坚持实际的 ASP.NET 页面生命周期并使用正确的事件。[MSDN](http://msdn.microsoft.com/en-us/library/ms178472.aspx#lifecycle_events)上对每个事件的操作都有很好的细分。

`Init`例如在创建控件后引发，因此任何动态更改都不会立即生效。

# jsf-2 - 更新在复合组件中作为参数传递的值

> ID：14043500
> 
> 赞同：0
> 
> 时间：2012-12-26T16:46:30.383
> 
> 标签：jsf-2, richfaces, composite-component

我使用[这个](https://stackoverflow.com/questions/6358066/how-to-implement-a-dynamic-list-with-a-jsf-2-0-composite-component)问题来创建一个具有时间选择器行为的复合组件。

这是我的复合 xhtml

```
<ui:composition xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:cc="http://java.sun.com/jsf/composite"
xmlns:rich="http://richfaces.org/rich">
<cc:interface componentType="customTimeBean">
    <cc:attribute name="date" type="java.util.Date" required="true" />
</cc:interface>
<cc:implementation>
    <rich:inputNumberSpinner value="#{cc.hours}" minValue="0"
        maxValue="23" />
    <h:outputLabel value=":" />
    <rich:inputNumberSpinner value="#{cc.minutes}" minValue="0"
        maxValue="59" />
</cc:implementation>
</ui:composition> 
```

这是我的面孔组件

```
@FacesComponent(value = "customTimeBean")
public class CustomTimeBean extends UINamingContainer {

    private Date getDate() {

        Date d = (Date) getAttributes().get("date");
        if (d == null) {
            //throw new RuntimeException("Date no debe ser nulo");
            d = new date();
        }
        return d;
    }

    public void setMinutes(int value) {

        getDate().setMinutes(value);
    }

    public void setHours(int value) {

        getDate().setHours(value);
    }

    public int getMinutes() {

        return getDate().getMinutes();
    }

    public int getHours() {

        return getDate().getHours();
    }

    public void setSeconds(int value) {

        getDate().setHours(value);
    }

    public int getSeconds() {

        return getDate().getSeconds();
    }

} 
```

以及用法

```
<sigh:time date="#{bean.date}" hasSeconds="false"/> 
```

我的测试用例：

```
<h:outputLabel value="#{controller.date}" id="date" />
<sigh:time date="#{controller.date}" />
<a4j:commandButton render="date" /> 
```

“控制器”：

```
@ManagedBean
public class Controller  {

    Date date;

    public Date getDate() {

        return date;
    }

    public void setDate(Date date) {

        this.date = date;
    }
} 
```

这很好用，但是，当我将空日期作为属性传递时，这不起作用，如何更新 Bean (controller.date) 中的值？

在我的测试用例中，当我按下 a4j:commandButton 并且控制器中的日期为空时，输出标签不显示任何内容（日期为空），当日期不为空时，每次单击按钮时都会更新日期。

对不起，我的英语不好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:05:35.173

只需更换

```
throw new RuntimeException("Date no debe ser nulo"); 
```

经过

```
d = new Date(); 
```

* * *

**与具体问题**无关**`Date`，您在那里使用的方法已**弃用**。另请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)。主要原因是它没有正确处理时区/夏令时。您应该在复合材料内部使用[`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)。**

# java - 在maven项目中导入外部jar而不创建依赖项

> ID：14043502
> 
> 赞同：1
> 
> 时间：2012-12-26T16:46:39.803
> 
> 标签：java, maven, import, jar

> **可能重复：**
> [Maven：通过相对路径将依赖项添加到 jar](https://stackoverflow.com/questions/2229757/maven-add-a-dependency-to-a-jar-by-relative-path)

我需要在 java maven 项目中仅使用构建路径导入 .jar 文件而不创建依赖项。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:51:12.887

您的意思是您的 jar 仅用于编译而不是*传递*依赖？

```
<dependency>
  <groupId>foo</groupId>
  <artifactId>bar</artifactId>
  <version>1.0</version>
  <scope>provided</scope>
</dependency> 
```

**提供**：此范围仅在编译和测试类路径上可用，并且不可传递。

查看更多关于[依赖范围的信息](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)

# version-control - Bazaar (bzr) VCS：复制/克隆具有历史记录的文件？即“bzr 副本”？

> ID：14043505
> 
> 赞同：0
> 
> 时间：2012-12-26T16:46:43.437
> 
> 标签：version-control, bazaar

**问：**[Bazaar](http://bazaar.canonical.com/)是否支持复制文件并保留原始文件和克隆文件的历史记录？

几年前，我正在为我公司的 VCS 评估 Bazaar。我非常喜欢它，但有一个重要因素最终将我们引向了不同的方向：缺乏`bzr copy`（或同等）。这对某些团队可能不是特别相关，但对我们来说这是一个非常常见的操作。

我知道过去曾广泛讨论过这个问题（请参阅下面的参考资料），但我不清楚是否曾经实施过任何事情。

*参考*

*   [Bazaar 网站上的文章](http://wiki.bazaar.canonical.com/BzrFileCopies)
*   [AskUbuntu上的问题](https://askubuntu.com/questions/32199/split-a-text-file-into-two-files-without-losing-revision-history)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:14:28.620

正如您可能在[这里](https://answers.launchpad.net/bzr/+question/217670)看到的那样，它尚未实施，如果它很快发生的话，我会感到非常惊讶:(

# java - 从 googlemaps v2 中删除折线

> ID：14043506
> 
> 赞同：8
> 
> 时间：2012-12-26T16:47:10.767
> 
> 标签：java, android, eclipse, google-maps

我正在尝试从`GoogleMaps V2`

在标记拖动上，我想将从上一个标记绘制的折线更改为拖动的标记，

这是用于标记拖动的类，但在其中我如何删除折线？

```
 mMap.setOnMarkerDragListener(new OnMarkerDragListener() 
        {

            public void onMarkerDragStart(Marker marker) 
            {
            }

            public void onMarkerDragEnd(Marker marker) 
            {
mMap.addPolyLine(///)
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-26T16:49:30.680

您可以调用`clear()`以从`GoogleMap`. 或者，您可以调用`remove()`、或从地图中删除单个元素。`Marker``Polyline``Polygon`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-19T13:56:21.373

如果您想从地图中删除一个`Polyline`，则必须以稍微不同的方式添加它：

```
List<Polyline> lines = new ArrayList<Polyline>();

lines.add(googleMap.addPolyline(new PolylineOptions()
        .addAll(lineCoordinates)
        .width(width)
        .color(color))); //the line will appear on the map here

lines.get(0).remove(); // the line should disappear 
```

# javascript - 我可以切换多次出现的类的特定实例吗？

> ID：14043507
> 
> 赞同：2
> 
> 时间：2012-12-26T16:47:14.640
> 
> 标签：javascript, jquery

我正在构建一个网站设计的工作模型，我希望广告空间消失以说明页面为空时的外观。我可以在没有唯一标识每个空间的情况下完成此操作吗？我希望这会奏效：

```
<script type="text/javascript">
    $('.adSpace').click(function() {
    $this.toggle('fast');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T16:48:12.707

使用`$(this)`而不是`$this`. $this 在这里没有定义。

**[现场演示](http://jsfiddle.net/ZPtzR/)**

```
<script type="text/javascript">
    $('.adSpace').click(function() {
       $(this).toggle('fast');
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T16:53:31.247

`$this`不是对象。你应该使用 `$(this)`.

`this`：**java脚本对象**

`$(this)`:**将其转换为 jQuery 对象**

您可以使用

```
$('.adSpace').click(function() {
   $(this).toggle('fast');
}); 
```

# php - “请求此资源需要用户访问令牌。” 用于通知的 Facebook 图表

> ID：14043512
> 
> 赞同：1
> 
> 时间：2012-12-26T16:47:25.750
> 
> 标签：php, facebook, facebook-graph-api, facebook-canvas

注意：当用户接受我使用我的应用程序的权限时。我要求他们接受`manage_notifications`

我感到很困惑。我在网上对此进行了研究，似乎我得到了已弃用和错误信息的混合，我正在尝试使用我的 facebook 画布应用程序使用 facebook graph 向用户发送通知。以下是我的做法，但它不起作用。

```
public function getAccessToken() {
    $app_id = $this->settings['app_id'];
    $app_secrete = $this->settings['app_secrete'];
    $url =  "https://graph.facebook.com/oauth/access_token?".
            "client_id={$app_id}".
            "&client_secret={$app_secrete}".
            "&grant_type=client_credentials";
    $c = curl_init($url);
    // necessary so CURL doesn't dump the results on your page
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($c);
    $result = explode("=", $result);
    curl_close ($c);
    return $result[1];
} 
```

结果通过了这样的事情 `access_token=523216317ewwer235|K4A1XugBpajwrweu1K2k12jzckdU`。所以这就是我`=`在代码中爆炸符号的原因。每次用户进入我的应用程序时，我都会调用此函数。我获取访问代码并`$token`按照以下代码传递它。

```
public function alertUser($userid,$token,$message="You have a notification") {
    $inviteMessage = $message;
    $inviteMessage = urlencode($inviteMessage);
    $url = "https://graph.facebook.com/{$userid}/notifications?access_token={$token}&".
    "template={$inviteMessage}&ref=notify";
    $c = curl_init($url);
    // necessary so CURL doesn't dump the results on your page
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($c);
    curl_close ($c);        
    $r = json_decode($result);
} 
```

我得到以下回复

```
object(stdClass) {
    error => object(stdClass) {
        message => 'A user access token is required to request this resource.'
        type => 'OAuthException'
        code => (int) 102
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T18:50:06.673

您必须使用 POST 请求才能使通知起作用：

`curl_setopt ($c, CURLOPT_POST, true);`

显然您正在发出 GET 请求，试图请求资源。

# android - 使用笔记本电脑网络摄像头作为 Android 模拟器的 Cameta

> ID：14043515
> 
> 赞同：1
> 
> 时间：2012-12-26T16:47:41.780
> 
> 标签：android, android-emulator

我正在尝试将笔记本电脑网络摄像头用作 sdk 版本 10 和 16 的模拟器的后置摄像头，但在这两种情况下，尽管模拟器没有显示 SD 购物车内存不足或请求许可，但模拟器都找不到我的网络摄像头使用网络摄像头。当我运行模拟器的默认相机应用程序时，它显示灰色和黑色的网格，一个贪婪的矩形在这里和那里移动，当捕捉照片时它在屏幕上捕捉到相同的东西。谁能给我任何解决方案。我完整的模拟器配置是：

![在此处输入图像描述](../Images/6fa8ab011c0932160eb17ee37a89be0a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T23:15:27.903

此链接可能会有所帮助[Android：如何在模拟器中使用网络摄像头？](https://stackoverflow.com/questions/14012924/android-how-to-use-webcam-in-emulator)

短篇小说是：

1.  转到 AVD 管理器
2.  选择您的设备
3.  转到设备属性
4.  将后置摄像头下拉值更改为“webcam0”

如果这一切都不起作用，您可以尝试使用 genymotion 模拟器[http://www.genymotion.com/](http://www.genymotion.com/)

它的工作速度更快，并且很容易将您的笔记本电脑网络摄像头用作设备的后置摄像头

# ruby - Ruby 哈希键的可用类型

> ID：14043518
> 
> 赞同：3
> 
> 时间：2012-12-26T16:47:52.653
> 
> 标签：ruby

键必须是字符串或整数，还是可以是任何对象类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:50:17.533

一个非常常见的类型是 Symbol，你没有提到。但它可以是任何对象，真的。

```
class Foo; end

f1, f2 = Foo.new, Foo.new

h = {
  f1 => 3,
  f2 => 4
}

h # => {#<Foo:0x007fed4b04bb00>=>3, #<Foo:0x007fed4b04bad8>=>4}
h[f1] # => 3
h[f2] # => 4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T16:51:45.580

[没有记录？](http://www.ruby-doc.org/core-1.9.3/Hash.html)

> [Hash] 类似于 Array，除了索引是通过**任何对象类型的任意键完成的**，而不是整数索引。

（强调我的。）

# c++ - 使用 std::thread 和良好实践并行化循环

> ID：14043520
> 
> 赞同：1
> 
> 时间：2012-12-26T16:48:08.537
> 
> 标签：c++, c++11, parallel-processing, std, stdthread

> **可能重复：**
> [C++ 2011：std::thread：并行循环的简单示例？](https://stackoverflow.com/questions/10792157/c-2011-stdthread-simple-example-to-parallelize-a-loop)

考虑以下将计算分布在向量元素上的程序（我以前从未使用过 std::thread ）：

```
// vectorop.cpp
// compilation: g++ -O3 -std=c++0x vectorop.cpp -o vectorop -lpthread
// execution: time ./vectorop 100 50000000 
// (100: number of threads, 50000000: vector size)
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <vector>
#include <thread>
#include <cmath>
#include <algorithm>
#include <numeric>

// Some calculation that takes some time
template<typename T> 
void f(std::vector<T>& v, unsigned int first, unsigned int last) {
    for (unsigned int i = first; i < last; ++i) {
        v[i] = std::sin(v[i])+std::exp(std::cos(v[i]))/std::exp(std::sin(v[i])); 
    }
}

// Main
int main(int argc, char* argv[]) {

    // Variables
    const int nthreads = (argc > 1) ? std::atol(argv[1]) : (1);
    const int n = (argc > 2) ? std::atol(argv[2]) : (100000000);
    double x = 0;
    std::vector<std::thread> t;
    std::vector<double> v(n);

    // Initialization
    std::iota(v.begin(), v.end(), 0);

    // Start threads
    for (unsigned int i = 0; i < n; i += std::max(1, n/nthreads)) {
        // question 1: 
        // how to compute the first/last indexes attributed to each thread 
        // with a more "elegant" formula ?
        std::cout<<i<<" "<<std::min(i+std::max(1, n/nthreads), v.size())<<std::endl;
        t.push_back(std::thread(f<double>, std::ref(v), i, std::min(i+std::max(1, n/nthreads), v.size())));
    }

    // Finish threads
    for (unsigned int i = 0; i < t.size(); ++i) {
        t[i].join();
    }
    // question 2: 
    // how to be sure that all threads are finished here ?
    // how to "wait" for the end of all threads ?

    // Finalization
    for (unsigned int i = 0; i < n; ++i) {
        x += v[i];
    }
    std::cout<<std::setprecision(15)<<x<<std::endl;
    return 0;
} 
```

代码中已经嵌入了两个问题。

第三个问题是：这段代码完全没问题，还是可以使用 std::threads 以更优雅的方式编写？我不知道使用 std::thread 的“良好做法”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:38:50.867

关于第一个问题，如何计算每个线程要计算的范围：我提取了常量并给它们命名，以使代码更易于阅读。对于良好的实践，我还使用了一个[lambda](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)，它使代码更容易修改 - lambda 中的代码只会在这里使用，而该函数`f`可以在整个程序的其他代码中使用。利用这一点将代码的共享部分放在一个函数中，并专门化在 lambda 中只使用一次的代码。

```
const size_t itemsPerThread = std::max(1, n/threads);
for (size_t nextIndex= 0; nextIndex< v.size(); nextIndex+= itemsPerThread)
{
    const size_t beginIndex = nextIndex;
    const size_t endIndex =std::min(nextIndex+itemsPerThread, v.size())
    std::cout << beginIndex << " " << endIndex << std::endl;
    t.push_back(std::thread([&v,beginIndex ,endItem]{f(v,beginIndex,endIndex);});
} 
```

高级用例将使用线程池，但其外观取决于您的应用程序设计，而 STL 并未涵盖。有关线程模型的一个很好的示例，请参见[Qt 框架](http://doc.qt.digia.com/qt/thread-basics.html)。如果您刚刚开始使用线程，请将其保存以备后用。

第二个问题已经在评论中回答了。该`std::thread::join`函数将等待（阻塞）直到线程完成。通过在每个线程上调用 join 函数并到达 join 函数之后的代码，您可以确定所有线程都已完成并且现在可以删除。

# android - Android - 获取 Webview 媒体播放器实例

> ID：14043525
> 
> 赞同：2
> 
> 时间：2012-12-26T16:48:31.773
> 
> 标签：android, webview, html5-video

我有个问题。当我在我的 webview ( `<video>`) 中播放 HTML 5 视频对象时，LogCat 返回几条类似这样的错误消息：

```
E/MediaPlayer(17981): mOnBufferingUpdateListener is null. 
Failed to send MEDIA_BUFFERING_UPDATE message. 
```

我知道几个侦听器尚未实现，但我无法获取播放器实例。

**编辑**

我在 ICS (4.0.3) 上，我已经尝试过这个解决方案：

*   [WebView 和 HTML5 <视频>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

# oracle11g - oracle 导出和导入数据泵

> ID：14043530
> 
> 赞同：0
> 
> 时间：2012-12-26T16:48:54.143
> 
> 标签：oracle11g, datapump

我有一个关于 Oracle 数据泵的快速问题。我有一个包含不同模式（超过 8 个）的小型 oracle 数据库 11gR2。我想将此数据库移动到新服务器，并且我正在尝试使用 impdp/expdp 方法。我在系统用户下完全导出了数据库。新服务器也运行 11gR2。现在如果在新服务器上创建一个具有相同表空间的新数据库，我可以使用完全导入吗？这是推荐的方法吗？我知道我可以在模式方面做到这一点，但是这需要我首先创建角色和其他支持对象，并确定哪些模式实际上有对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:45:00.383

我认为没有“推荐”的方式来做到这一点。您不妨问一下要放入 Oracle 数据库的“推荐”数据是什么。这取决于您的需求。

我在过去使用“完整”导入/导出时遇到的唯一问题是，导出还包括您不想覆盖新数据库的 SYSTEM（和其他默认 Oracle 模式）。（实际上，这曾经给我带来了旧的 imp/exp 命令的一些问题——但理论上它与 Data Pump 的问题相同）。

幸运的是，Data Pump 允许您从导出中排除某些对象。当我进行完全导出时，我倾向于在创建 db 时排除已在新数据库中创建的所有模式。在参数文件中包含以下内容：

`EXCLUDE=SCHEMA:" IN ('SYS','SYSTEM','WMSYS','OUTLN','MGMT_VIEW','XDB','ANONYMOUS','SYSMAN','ORDSYS','ORDSYS','ORDPLUGINS','SI_INFORMTN_SCHEMA','MDSYS','EXFSYS','DBSNMP','DMSYS','CTXSYS','DIP','TSMSYS','ORACLE_OCM')"`

# web-services - 月相网络服务

> ID：14043531
> 
> 赞同：1
> 
> 时间：2012-12-26T16:48:54.637
> 
> 标签：web-services

我正在寻找一种将当前月相作为某种字符串返回的 Web 服务，例如“Waxing 88%”或稍后可以存储在数据库中的类似字符串。这是针对移动应用程序的，因此宁愿不使用一些建议的算法来计算它。

没有找到这个，你对在设备上用 JavaScript 计算这个有什么看法？这会不会太耗费资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:55:07.270

根据我发现的一篇描述月相计算的文章，我已经可以告诉你，通过互联网发送网络请求，等待然后解析响应，最后处理计算比简单地在设备。它几乎肯定会使用更少的计算能力、更少的电池电量和更少的网络带宽。

您可以在此处找到简化的计算方法：

[http://www.voidware.com/moon_phase.htm](http://www.voidware.com/moon_phase.htm)

该项目使用 JavaScript 来计算和显示月相信息，可能与您更相关：

[https://github.com/tingletech/moon-phase](https://github.com/tingletech/moon-phase)

# php - 寻找一个 PHP 正则表达式或函数来使用 . 为安全起见的电子邮件

> ID：14043541
> 
> 赞同：7
> 
> 时间：2012-12-26T16:50:04.860
> 
> 标签：php, javascript, html, regex, joomla

由于 gmail 允许使用**.** 在他们的电子邮件中，所以有人喜欢这个垃圾邮件发送者。

```
q.i.n.ghu.im.i.n.g.o.u.r@gmail.com 
```

可以通过在他的命名结构中删除和/或添加另一个句点来完成。这恰好是在 Joomla 安装上，所以我特别希望创建一个组件，以便我可以添加到多个站点，或者如果有一个简单的正则表达式来添加内联现有代码。此外，有什么正在做的事情吗，因为这似乎与新命名的**松散类型的电子邮件地址**类似……这对我来说很疯狂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:03:34.283

如果您的目标是将此地址与其他与其等效的地址进行匹配（因为您已经将它们列入黑名单），那么我只需在存储之前将地址标准化为最基本的状态。将其小写，在@处拆分，如果右侧是“gmail.com”，则从左侧删除所有点并将两半重新组合在一起。

1.  从 JOE.SCHMOE@GMAIL.COM 开始
2.  小写到 joe.schmoe@gmail.com
3.  拆分为 joe.schmoe 和 gmail.com
4.  由于右侧是 gmail.com，因此从左侧删除点
5.  重新组装到 joeschmoe@gmail.com

现在你已经有了可以阻止/禁止/任何东西的基地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:59:33.910

你可以做一些*简单*的事情，比如：`/^(?:[^@]+\.){5,}[^@]+@(?:[^@]+\.)+[^@]+/`

这只是快速折腾，并非用于验证，而是告诉您他们的电子邮件是否有问题的指针。这里的关键是`{5,}`量词，表示如果电子邮件有 5 个或更多点（如`a.b.c.d.e.f`），它将匹配。换句话说，被标记为 setchy。

我希望这有帮助！

说明：[http ://regex101.com/r/lB5vG3](http://regex101.com/r/lB5vG3)

# android - AppBaseTheme 在 Android 应用程序中的作用

> ID：14043543
> 
> 赞同：7
> 
> 时间：2012-12-26T16:50:17.567
> 
> 标签：android, android-theme

我无法理解 Android 中的 AppBaseTheme 会发生什么。在styles.xml 我有以下代码

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="mycolor">
    <item name="android:background">@layout/header_gradient</item>
    <item name="android:padding">5dip</item>
</style>
<style name="myParentTheme" parent="android:Theme.Light">
    <item name="android:attr/windowTitleSize">40dip</item>
    <item name="android:attr/windowTitleBackgroundStyle">@style/mycolor</item>
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
</style> 
```

在 AndroidManifest.xml 中，当我使用 android:theme="@style/myParentTheme" 时，标题的颜色和大小设置为我想要设置的内容。但是文本字段的样式更改为旧的常规文本框。当我使用 android:theme="@style/AppTheme" 时，UI 看起来非常“类似 Android”，但我对标题的特定设置没有任何效果。删除 parent="AppBaseTheme" 使 AppTheme 样式的行为就像 myParentTheme 样式一样。

此外，当我在 Style 标记的 name 属性中键入时按 Ctrl+Space 时，为什么看不到所有 R.attr 元素？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T16:58:02.863

如果您选择使用 Eclipse 新建项目向导创建活动，Eclipse 将为您定义`AppTheme`资源`AppBaseTheme`。`AppBaseTheme`通常会有三个定义，in `res/values/`、`res/values-v11/`和`res/values-v14/`。`AppTheme`将继承自`AppBaseTheme`.

目的是让您将大部分特定于应用程序的样式信息放入 中`AppTheme`，而不是发明您自己的主题（例如，`myParentTheme`）。`AppBaseTheme`将主要确保您从正确的操作系统提供的主题（例如，`Theme.Light`vs. `Theme.Holo.Light`vs. `Theme.Holo.Light.DarkActionBar`）继承。`AppBaseTheme`如果您愿意，您还可以将特定于版本的样式信息添加到适当的位置。

> 在`AndroidManifest.xml`我使用时`android:theme="@style/myParentTheme"`，标题的颜色和大小都设置为我想要设置的。但是文本字段的样式更改为旧的常规文本框。

那是因为您继承自`Theme.Light`，它使用原始（非全息）小部件集。

> 当我使用`android:theme="@style/AppTheme"`UI 时，它看起来非常“像 Android”，但我对标题的特定设置没有任何效果。

那是因为您决定创建`myParentTheme`而不是将样式定义放入`AppTheme`.

# python - ValueError：时间数据“22.12.2012 17:00”与格式“%d.%m.%Y %I:%M”不匹配，上午/下午

> ID：14043552
> 
> 赞同：1
> 
> 时间：2012-12-26T16:50:39.047
> 
> 标签：python, google-app-engine, datetime

在 python 中将字符串解析为日期时间对象有一个小问题。以下代码适用于某些值，但并非总是如此，并且不知道这种代码和平有什么问题。

```
datetime.datetime.strptime("22.12.2012 17:00", '%d.%m.%Y %I:%M') 
```

> ValueError：时间数据 '22.12.2012 17:00' 与格式 '%d.%m.%Y %I:%M' 不匹配

我认为问题与时间和上午/下午有关？因为错误仅在时间 > 12:00 时弹出，并且字符串“22.12.2012 17:00”工作正常。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:53:04.130

尝试使用 %H 令牌而不是 %I：

```
import datetime
datetime.datetime.strptime("22.12.2012 17:00", '%d.%m.%Y %H:%M') 
```

%I 用于 12 小时日期格式。%H 用于 24 小时日期格式，如文档中所述：http: [//docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)

# python - 在 Pandas 中引用/计算 DataFrame 中的前一列

> ID：14043553
> 
> 赞同：0
> 
> 时间：2012-12-26T16:50:47.280
> 
> 标签：python, pandas

我在 Python 和 Pandas 中设置我的第一个分析（两者都是新手），并且有一些关于如何正确设置的问题/问题。

本质上，我正在尝试按时间序列查看用户行为，但我的用户数比天数还多，因此我尝试每月查看一次。我已经建立了`DataFrame`这种方式：

```
df2 = pd.DataFrame({'ID':range(100)})
df2['Day1'] = random.sample(xrange(1000), 100)
df2['Day2'] = random.sample(xrange(1000), 100)
df2['Day3'] = random.sample(xrange(1000), 100) 
```

我尝试通过多种方式向“ID”列添加索引，但 1) 不确定我是否需要它，以及 2) 我的任何方法都不会采用。这是我尝试过的：

```
df2 = pd.DataFrame({'ID':range(100)}, index_col='ID')
df2 = pd.DataFrame({'ID':range(100)}, index_col=0)
df2.index(0)
df2.index('ID')
df2.reindex(index='ID')
df2.reindex(index=0) 
```

我试图创建一个新数据框的最终输出，它将显示第 2 天的值是否比第 1 天小 95%，第 3 天是否比第 2 天小 95% - 以后（假设我有`DataFrame`100 列）。我看起来的输出可能如下所示：

```
ID   Day2   Day3
1    NaN    1
2    NaN    NaN
3    NaN    NaN
4    1      NaN 
```

我相信确定这一点的适当方法是运行一个 for 循环，如下所示：

```
for i in df2:
  if (Day2-Day1)/Day1 < .95:
    print 1 
```

但是，我不确定如何引用函数中的列，也不确定如何使该函数灵活地包含`DataFrame`. 我应该如何引用这个函数的列？

我应该如何引用这个函数的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:21:58.513

使用面板可能有一种更简单的方法，但我还没有时间序列方面的经验。这就是我将如何使用 DataFrames 完成您想要的：

首先制作一个假人`DataFrame`：

```
In [231]: df2 = DataFrame(np.random.rand(100,3)*100, columns=['Day1','Day2','Day3'])

In [232]: df2.head()
Out[232]:
        Day1       Day2       Day3
0  93.347819  92.866771  91.381466
1   7.819967  26.415094  79.477087
2  98.792627  92.940538  83.774519
3  64.182073  22.563504  15.631763
4  82.460359  89.743872  87.511540 
```

现在，`DataFrame`通过删除第一列来创建一个新的`df2`

```
In [233]: df3 = df2.ix[:,1:]

In [234]: df3.head()
Out[234]:
        Day2       Day3
0  92.866771  91.381466
1  26.415094  79.477087
2  92.940538  83.774519
3  22.563504  15.631763
4  89.743872  87.511540 
```

ix 表示法允许您对列进行切片。一开始可能会令人困惑，但它在英文中的意思是：“取所有行，只取从 1 到结尾的列”。

此时两者`DataFrames`具有相同的索引。您不需要创建自己的“ID”，除非您需要它用于其他用途。Pandas 会自动`DataFrames`为您编制索引。这对齐了`DataFrames`所有类型的操作。它对列做同样的事情。它将`DataFrames`按列名排列并执行您想要的任何操作。由于您想除以“下一天”，我们必须更改以下列`df3`：

```
In [235]: df3.columns = df2.columns[:-1]

In [236]: df3.head()
Out[236]:
        Day1       Day2
0  92.866771  91.381466
1  26.415094  79.477087
2  92.940538  83.774519
3  22.563504  15.631763
4  89.743872  87.511540 
```

现在我们已经重命名了列，所以它们将按照我们想要的方式对齐。执行除法计算很容易，因为 Pandas 将完成所有对齐。无需循环！

```
In [244]: df4 = (df2/df3 < .95)

In [245]: df4.head()
Out[245]:
    Day1   Day2   Day3
0  False  False  False
1   True   True  False
2  False  False  False
3  False  False  False
4   True  False  False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:21:22.437

由于当前形式的 pandas 假设时间序列数据在索引中按时间排列，而不是按列排列，因此转置 DataFrame 至少暂时可以使用许多内置方法，例如 `shift`// `diff`/ `pct_change`etc。

```
In [78]: df = DataFrame(np.random.rand(100, 3) * 100,
                        columns=['Day1', 'Day2', 'Day3'])

In [79]: df.head()
Out[79]: 
        Day1       Day2       Day3
0  27.113276   0.827977  37.059887
1  48.817798  19.335033  12.476411
2  27.001015  18.147742  33.094676
3  38.428321  95.609824  72.395564
4  63.626472  36.207677   1.328216

In [80]: dft = df.T

In [82]: dft.ix[:, :5]
Out[82]: 
              0          1          2          3          4          5
Day1  27.113276  48.817798  27.001015  38.428321  63.626472  25.900132
Day2   0.827977  19.335033  18.147742  95.609824  36.207677   0.191767
Day3  37.059887  12.476411  33.094676  72.395564   1.328216  37.011027

In [89]: dft.pct_change().ix[:, :5]
Out[89]: 
              0         1         2         3         4           5
Day1        NaN       NaN       NaN       NaN       NaN         NaN
Day2  -0.969462 -0.603935 -0.327887  1.488004 -0.430934   -0.992596
Day3  43.759576 -0.354725  0.823625 -0.242802 -0.963317  191.999688

In [94]: chg = (dft.pct_change().dropna() < .95).T.astype(int)

In [95]: chg.head()
Out[95]: 
   Day2  Day3
0     1     0
1     1     1
2     1     1
3     0     1
4     1     1 
```

# excel - 尝试格式化电子表格中的列时出现运行时错误 438

> ID：14043554
> 
> 赞同：1
> 
> 时间：2012-12-26T16:50:55.937
> 
> 标签：excel, vba

Sheets("重新格式化").Column("F").NumberFormat = "$#,##0.000"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:56:50.203

为了更好地调试复杂的表达式，请将其分成更小的部分。在你的情况下：

```
Set sh = Sheets("Reformatted")
Set rg = sh.Column("F")
Let rg.NumberFormat = "$#,##0.000" 
```

分成多个语句，您可以使用调试器单步执行，并准确找出较大语句的哪一部分导致问题。由于错误发生在 Column 语句上，您可以推断错误消息指的是`Column`.

# ios - Titanium - 从相机拍照时如何防止弹出框消失？

> ID：14043558
> 
> 赞同：1
> 
> 时间：2012-12-26T16:51:11.093
> 
> 标签：ios, camera, titanium, image-gallery, popover

我正在使用 Titanium Studio 2.1 并为 iOS 5.1 开发，我们正在开发一个显示用于显示所选图像的弹出框的应用程序，当您按下按钮并显示对话框时，可以选择图像，在所述对话框中可以选择从图库中选择图像或从相机中拍摄新图像。

从图库中选择图像时，会显示通常的弹出式图库，并且可以毫无问题地选择图像。但是，选择相机选项后，显示了相机界面，但我们打开以显示图像的开口显示在相机接口的顶部。然后，如果我们尝试拍照，弹出框将被隐藏，因为我们按下了弹出框边界之外。

我想这样做，这样弹出框就不会出现在相机界面的前面并在拍照时消失。

有没有办法做到这一点？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:20:34.147

您是否在调用 showCamera 时设置了 autohide: false ？你需要showControls: false, autohide: false，然后调用Ti.Media.takePicture()来拍照。

[http://docs.appcelerator.com/titanium/latest/#!/api/CameraOptionsType-property-autohide](http://docs.appcelerator.com/titanium/latest/#!/api/CameraOptionsType-property-autohide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:50:36.023

我找到了一种在弹出窗口上显示相机的方法，这样它就不会全屏显示，并且在单击时会隐藏另一个弹出窗口。

这是代码：

```
Ti.Media.showCamera({
    inPopOver: true, // set this to true
    popoverView: btnCamera, // "view" for the pointer arrow direction
    success: function (event) {
        alert('success');
    },
    cancel: function () {
        alert('cancel');
    },
    error: function (error) {
        alert('error');
    },
    saveToPhotoGallery: false,
    allowEditing: false,
    mediaTypes: [
        Ti.Media.MEDIA_TYPE_PHOTO
    ]
}); 
```

这很棒，因为 iPad 上的全屏摄像头看起来很糟糕。

# plugins - 高级自定义字段 wordpress 插件 - 选项页面简码

> ID：14043560
> 
> 赞同：0
> 
> 时间：2012-12-26T16:51:13.923
> 
> 标签：plugins, wordpress

我正在使用带有选项页面插件的高级自定义字段插件 (http://www.advancedcustomfields.com)，因此我可以在整个主题中（在多个页面上）使用全局变量。

我不知道 PHP，我正在尝试通过在 WYSIWYG 编辑器内不同页面的内容中使用简码来从选项页面获取自定义字段。

这可能吗？经过几天的尝试，我无法弄清楚该怎么做。任何人都可以帮忙吗？我试过去插件的支持，但没有得到任何回报。

请帮忙！我真的需要让这个工作！

参考资料： http: [//www.advancedcustomfields.com/docs/functions/using-shortcodes/](http://www.advancedcustomfields.com/docs/functions/using-shortcodes/)

[http://www.advancedcustomfields.com/add-ons/options-page/](http://www.advancedcustomfields.com/add-ons/options-page/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:15:48.207

想了个办法。我可以使用他们提供的简码来引用特定的帖子/页面 ID，从而实现只需将其放入一次并在多个页面上呈现的目标，只要简码存在且格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T01:16:14.640

根据此示例，在您的简码中使用选项的 post_id ：

```
[acf field="myfieldname" post_id="option"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-02T03:08:46.197

### 块类型：文本块（所见即所得字段）

```
Text:
[acf field="NAME-OF-ACF-FIELD" post_id="options"]

Image (Return Format: Image URL) and alt text:
<img src="[acf field='NAME-OF-ACF-FIELD' post_id='options']" alt="[acf field='NAME-OF-ACF-FIELD' post_id='options']" /> 
```

# excel - 具有多个 if 要求的 Excel Countif

> ID：14043569
> 
> 赞同：2
> 
> 时间：2012-12-26T16:52:05.580
> 
> 标签：excel, date, countif

我有一个 Excel 文档，它有一个日期列 (A) 和一个包含字符串 (B) 的列，一张一张。在另一张纸上，我正在计算。如果 A 列中的单元格介于 DATE(2012,1,1) 和 DATE(2012,6,1) 之间，并且 B 列中的同一行在任何部分（*字符串*）中包含“字符串”，那么它应该计算该行。谷歌提到使用 SUMPRODUCT 但我只能在工作之间获得日期。以下是日期之间的 SUMPRODUCT。

```
=SUMPRODUCT(--('Sheet1'!A:A>=DATE(2012,1,1)),--('Sheet1'!A:A>=DATE(2012,6,1))) 
```

我尝试使用它作为最终值，但它不正确。

```
=SUMPRODUCT(--('Sheet1'!A:A>=DATE(2012,1,1)),--('Sheet1'!A:A>=DATE(2012,6,1)),--('Sheet1'!B:B="*"&"string"&"*")) 
```

编辑：显然上述工作，但字符串必须等于该值。* 未被识别为通配符。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T18:17:22.940

如果您在 SUMPRODUCT 中使用整列，则必须使用 Excel 2007 或更高版本（否则不起作用），并且**可以**在 COUNTIFS 中使用通配符

`=COUNTIFS('Sheet1'!A:A,">="&DATE(2012,1,1),'Sheet1'!A:A,"<="&DATE(2012,6,1),'Sheet1'!B:B,"*String*")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:51:12.890

您遇到的问题是由于您不能在`SUMPRODUCT`. 您可以绕过它的一种方法（假设您需要使用`SUMPRODUCT`）是使用`SEARCH`或`FIND`创建必要的数组以在`SUMPRODUCT`. 这是一个在单元格中包含目标字符串的示例`D1`（请注意，这需要作为数组公式输入`Ctrl+Shift+Enter`）：

```
=SUMPRODUCT(
    --(Sheet1!A:A>=DATE(2012,1,1)),
    --(Sheet1!A:A<=DATE(2012,6,1)), 
    IFERROR(IF(SEARCH(D1,Sheet1!B:B)>0,1,0),0)) 
```

`IFERROR`占不匹配的原因，但它是 Excel 2007 的一项功能。如果您没有使用 Excel 2007，您可以尝试：

```
=SUMPRODUCT(
    --(Sheet1!A:A>=DATE(2012,1,1)),
    --(Sheet1!A:A<=DATE(2012,6,1)),
    IF(ISERROR(IF(SEARCH(D1,Sheet1!B:B)>0,1,0)),0,IF(SEARCH(D1,Sheet1!B:B)>0,1,0))) 
```

此外，在您的示例公式中，您需要`<=`在与六月的比较中将符号切换为 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T18:10:23.550

Sumproduct 不允许使用通配符。您可以使用 ISNUMBER(SEARCH("string",range)) 搜索字符串。公式如下。

```
=SUMPRODUCT(--('Sheet1'!A:A>=DATE(2012,1,1)),--('Sheet1'!A:A<=DATE(2012,6,1)),--(ISNUMBER(SEARCH("string",'Sheet1'!B:B)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:46:19.613

您使用的是哪个版本的 Excel？如果是2007或者以后的，可以使用COUNTIFS；[这是语法的链接。](http://office.microsoft.com/en-us/excel-help/countifs-function-HA010047494.aspx) 您可能必须使用两列，即使使用 COUNTIFS。在 Sheet2 上，A 列应使用以下公式检查 Sheet1、B 列是否包含“字符串”：

```
=IF(ISERR(FIND("string",'Sheet1'!B1)), FALSE, TRUE) 
```

您需要将“Sheet1”！B1 替换为您需要的任何单元格，然后将其向下拖动以使其具有与 Sheet1，B 列相同的行数。然后您可以使用 COUNTIFS：

```
=COUNTIFS('Sheet1'!A:A, ">=" DATE(2012,1,1), 'Sheet1'!A:A, ">=" & DATE(2012,6,1), A:A, TRUE. 
```

# ruby-on-rails - 创建一个 has_many 关联，其中条件适用于 ruby on rails 中的主表？

> ID：14043572
> 
> 赞同：0
> 
> 时间：2012-12-26T16:52:25.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我`authentications`有很多用作primary_key和`groups`foreign_key ，没问题。`uid``organizer_id`

但`uid`在属性范围内是唯一的`provider`。我想确保我的关联只获取`groups`where `authentication.provider == 'meetup'`。我试过了：

```
has_many :groups, :primary_key => "uid", :foreign_key => "organizer_id", :conditions => {:provider => "meetup"} 
```

但这只是试图找到`groups`所有`provider == "meetup"`

如何在主表上指定条件`authentications`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:57:02.323

尝试：

```
has_many :groups, :primary_key => "uid", :foreign_key => "organizer_id", :include => :authentication, :conditions => {:authentication => {:provider => "meetup"}} 
```

更新：

如果 Group **belongs_to**身份验证使用“organizer_id”作为 foreign_key，那么只需：

```
Group.includes(:authentication).where(:authentication => {:provider => "meetup"}) 
```

# php - Symfony 1.4 如果我想改变一个表单域怎么办？

> ID：14043574
> 
> 赞同：0
> 
> 时间：2012-12-26T16:52:34.850
> 
> 标签：php, symfony-1.4

假设我有一个用户注册表单。由于密码必须以 md5 编码存储，最好的办法是将其转换为 redhand，但它看起来`request`是只读的。如何在处理过程中更改表单域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:28:14.067

您可以为表单使用自定义验证器。像这样创建一个类：

```
<?php

class encodeValidator extends sfValidatorBase
{
  /**
  * @see sfValidatorBase
  */
  protected function doClean($value)
  {
     return md5($value); //md5 can be replaced with another encoding method
  }
} 
```

接下来，当您创建表单时，添加您创建的自定义验证器，如下所示：

```
$this->setWidget('field_name', new sfWidgetFormInputText());
$this->validatorSchema['field_name'] = new encodeValidator(); 
```

# node.js - node.js 在向 mongodb 插入许多记录时静默停止

> ID：14043575
> 
> 赞同：3
> 
> 时间：2012-12-26T16:52:47.663
> 
> 标签：node.js, mongodb

我有一个非常简单的 mongodb 数据库，其中包含一个名为“test”的集合，我需要向集合中插入 133.306 条记录。这些记录存储在 JSON 文件中。这个文件的大小是 21Mb。50.000 条记录在一秒钟内成功插入。70.000 条记录插入挂起脚本。

编码：

```
var path = require('path'),
    fs = require('fs'),
    mongodb = require('mongodb'),
    safe = { safe : true },
    rowset;

rowset = JSON.parse(fs.readFileSync(path.join(__dirname, 'test.js')));
console.log('Total records: ' + rowset.length);
rowset = rowset.slice(0, 50000); // OK
// rowset = rowset.slice(0, 70000); // FAIL
console.log('Inserting ' + rowset.length + ' records');

mongodb.MongoClient.connect('mongodb://127.0.0.1:27017/browser',
    function (err, client) {
        if (err) throw err;

        client.createCollection('test', safe, function (err, collection) {
            if (err) throw err;

            collection.insert(rowset, safe, function (err) {
                if (err) throw err;

                client.close(function (err) {
                    if (err) throw err;

                    console.log('done');
                });
            });
        });
    }); 
```

mongod 输出的最后几行：

```
Wed Dec 26 16:50:46 [initandlisten] connection accepted from 127.0.0.1:52003 #854 (4 connections now open)
Wed Dec 26 16:50:46 [initandlisten] connection accepted from 127.0.0.1:52004 #855 (5 connections now open)
Wed Dec 26 16:50:46 [initandlisten] connection accepted from 127.0.0.1:52005 #856 (6 connections now open) 
```

这是行集中的典型记录：

```
{ _id: 133306,
  product: 23089,
  version: '1.0.0',
  update: null,
  edition: null,
  lang: null,
  entries: [ 54344, 54345 ] } 
```

也许脚本达到了某些阈值或限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:18:59.943

我在我的电脑上用你所说的类型的 150000 个条目测试了你的脚本，它就像一个魅力。对于 20MB 的 json 文件，该过程需要额外的 140MB RAM。

您可以使用以下命令从 mongodb 监控打开的连接：

```
db.$cmd.sys.inprog.findOne( { $all : true } ) 
```

**更新：**

我试图插入 600000 个条目，但它挂了。你是对的。在这种情况下，您应该使用 mongoimport。我生成了一个包含 1 000 000 个条目的文件，mongo import 在不到一分钟的时间内将它们插入。我需要处理的一些问题：导入文件的格式应如下 BSON（json 超集）：

```
 {"product": 23089,"version": "1.0.0","update": null,"edition": null,"lang": null,"entries": [ 54344, 54345 ]}
 {"product": 23089,"version": "1.0.0","update": null,"edition": null,"lang": null,"entries": [ 54344, 54345 ]}
 {"product": 23089,"version": "1.0.0","update": null,"edition": null,"lang": null,"entries": [ 54344, 54345 ]} 
```

*   每行一个文档

*   文档之间没有逗号分隔符

*   您不应该将它们包含在数组中 []

这是我用于导入的命令：

```
c:\mongodb\bin>
mongoimport --collection browser12 --file E:\Nodejs\StackOverflow.com\Mongodb\veryBigjson.json --dbpath C:\mongodb\data --port 27016 -d browser12 --ignoreBlanks 
```

# wordpress - wordpress 中的自定义内容类型模板

> ID：14043580
> 
> 赞同：0
> 
> 时间：2012-12-26T16:53:07.547
> 
> 标签：wordpress

我是 wordpress 的新手，正在处理网站更改。该网站是由另一位开发商开发的。

wordpress 版本是 3.4.1

它有一个名为“电影”的高级字段组，其中包含某些自定义字段，如“标题”、“发布日期”、“持续时间”、“预告片视频”等。

该站点使用高级自定义字段，并有一个模板为“content-films.php”。此页面提取任何电影的内容并显示。

我需要为电影开发一个按次付费页面，用户可以在通过贝宝付款后观看整部电影。

我被困在模板选择上。“content-films.php”是一个包含电影描述和预告片视频的页面。我需要再创建一个模板来实现每部电影的按次付费页面。

我找不到任何关于将模板实现为 'content-films.php' 的文档。我为 single-post_type.php 找到了一些，但我的网站没有使用它。

请帮助我了解我应该创建哪个模板来实现电影的按次付费页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:06:40.850

您应该创建一个页面模板。将其命名为您想要的任何名称，例如 test.php，并将其放在主题文件夹中。在此文件的开头，您必须添加一个注释，告诉 wordpress 这是一个页面模板。

```
<?php
/*
Template Name: Test
*/
?> 
```

然后从 wordpress 管理员创建一个新页面，并将其分配给您刚刚创建的模板（编辑器右侧的下拉菜单）。

# c++ - 如何在 QT 中逐步加载小部件？

> ID：14043584
> 
> 赞同：1
> 
> 时间：2012-12-26T16:53:22.520
> 
> 标签：c++, qt, user-interface

我有一个自定义小部件，它在行中显示许多项目：

```
void update(){ //this is a SLOT which is connected to a button click
    QVBoxLayout *layout = this->layout();
    if (layout == NULL){
        layout = new QVBoxLayout;
        this->setLayout(layout);
    } else {
        QLayout_clear(layout); //this is a function that I wrote that deletes all of the items from a layout
    }
    ArrayList *results = generateData(); //this generates the data that I load from
    for (int i = 0; i < results->count; i++){
        layout->addWidget(new subWidget(results->array[i]));
    }
} 
```

问题是大约有 900 个项目，并且配置文件显示简单地将子对象添加到布局中需要 50% 的时间（构建需要另外 50% 的时间）。总体而言，加载所有项目大约需要 3 秒。

当我单击按钮加载更多数据时，整个 UI 会冻结 3 秒钟，然后在一切完成后所有项目一起出现。有没有办法在创建更多项目时逐步加载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:51:11.027

@Adri 通常是正确的，但“另一个线程”必须再次成为 UI 线程。关键是允许 UI 线程的事件循环继续旋转。快速而肮脏的方法是放入`QCoreApplication::processEvents()`您的`for()`循环中。肮脏，因为正如[文档所说](http://doc.qt.digia.com/qt/qcoreapplication.html#processEvents)，它应该被称为“偶尔”。即使没有 UI 事件，它也可能会产生一些开销，并且您正在搞乱 Qt 的性能优化，即何时以及多久旋转一次循环。在大块`result`.

更干净和正确的方法是创建一个私有插槽，它弹出一个结果元素（或块，以加快速度），添加到布局并增加索引。然后它会自动召回，直到结束`results`。`connect()`问题是使用强制连接类型来定义`Qt::QueuedConnection`，因此它会在已经排队的 UI 事件（如果有的话）之后被延迟。

而且因为你只在一个线程中运行，你不需要任何锁定`results`。

**根据 OP 的要求添加示例：**

虽然@TomPanning 解决方案是正确的，但它隐藏了您不需要的 QTimer 背后的真正解决方案 - 您不需要任何计时，您只需要针对特定​​参数值的特定非计时器行为。这个解决方案做同样的事情，减去 QTimer 层。另一方面，@TomPanning 有一个很好的观点，即普通的 ArrayList 不是很好的数据存储，因为它们之间可能会发生交互。

`something.h`

```
signals: void subWidgetAdded();
private slots: void addNextWidget();
ArrayList* m_results;
int m_indexPriv; 
```

`something.cpp`

```
connect(this,SIGNAL(subWidgetAdded()),
        this,SLOT(addNextWidget(),
        Qt::QueuedConnection);

void addWidget() {
  // additional chunking logic here as you need
  layout->addWidget(new subWidget(results->array[m_indexPriv++]));
  if( m_indexPriv < results->count() ) {
    emit subWidgetAdded(); // NOT a recursion :-)
  }
}

void update() {
  // ...
  m_results = generateData();
  m_indexPriv = 0;
  addNextWidget(); // slots are normal instance methods, call for the first time
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T02:47:09.987

正如 Pavel Zdenek 所说，第一个技巧是只处理部分结果。您希望同时处理尽可能多的开销，以便（我们将在下一步中执行的操作）的开销很低，但您不想做任何会使系统看起来没有响应的事情。基于广泛的研究，[Jakob Nielsen 说](http://www.useit.com/papers/responsetime.html)“0.1 秒大约是让用户感觉到系统在瞬间做出反应的极限”，因此粗略估计你应该将你的工作分成大约 0.05 秒的块（再留出 0.05 秒系统对用户的交互做出实际反应）。

第二个技巧是使用`QTimer`超时为 0 的 a。正如[QTimer 文档](http://doc.qt.digia.com/qt/qtimer.html)所说：

> 作为一种特殊情况，一个超时时间为 0 的 QTimer 将在窗口系统的事件队列中的所有事件都被处理后立即超时。这可以用来做繁重的工作，同时提供一个快速的用户界面。

所以这意味着接下来将执行一个超时为 0 的计时器，除非事件队列中有其他内容（例如，鼠标单击）。这是代码：

```
void update() {
    i = 0; // warning, this is causes a bug, see below
    updateChunk();
}

void updateChunk() {
    const int CHUNK_THRESHOLD = /* the number of things you can do before the user notices that you're doing something */;
    for (; i < results->count() && i < CHUNK_THRESHOLD; i++) {
         // add widget
    }
    // If there's more work to do, put it in the event queue.
    if (i < results->count()) {
        // This isn't true recursion, because this method will return before
        // it is called again.
        QTimer::singleShot(0, this, SLOT(updateChunk()));
    }
} 
```

最后，稍微测试一下，因为有一个问题：现在用户可以在循环的“中间”与系统交互。例如，用户可以在您仍在处理结果时单击更新按钮（在上面的示例中，这意味着您将索引重置为 0 并重新处理数组的第一个元素）。因此，更强大的解决方案是使用列表而不是数组，并在处理时将每个元素从列表的前面弹出。然后无论添加什么结果都会附加到列表中。

# javascript - 对灰度图像进行着色

> ID：14043585
> 
> 赞同：2
> 
> 时间：2012-12-26T16:53:28.730
> 
> 标签：javascript, image, html, svg, svg-filters

我正在尝试使用用户选择的前景色和背景色（仅限于红色、绿色、蓝色、青色、洋红色、黄色、黑色和白色）对灰度图像进行动态着色。我想要的效果如下：

[原始灰度 http://crawdad.cornell.edu/test/1.png](http://crawdad.cornell.edu/test/1.png) [红色前景 http://crawdad.cornell.edu/test/2.png](http://crawdad.cornell.edu/test/2.png) [红色前景，黄色背景 http://crawdad.cornell.edu/test /3.png](http://crawdad.cornell.edu/test/3.png)

从左到右，这些显示原始灰度图像，用户选择红色作为背景颜色的图像，以及具有红色背景/黄色前景的相同图像。

每次用户选择颜色时在画布中重绘图像是不切实际的（图像将是 800x800 像素，我需要为动画创建 30 帧）。

我只针对最新版本的 WebKit、Firefox 和 Internet Explorer，所以 html5、css3 和 svg 效果很好。图片可以是直接的 html`<img>`标签，也可以`<image>`在`<svg>`标签内（后者实际上更可取）。

一个理想的解决方案可能涉及 svg 过滤器（我没有经验，他们可以这样做吗？）。另一种可能性可能会将我的灰度图像视为 alpha 通道，其上方为纯色，下方为纯色（不确定我将如何即时执行此操作）。

对于有 Adob​​e Director 经验的人来说，我想要的效果和 Director 的 color 和 bgColor 属性一样。（我正在将一个项目从 Director 转换为 html5/javascript。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:38:26.793

[欢迎来到SVG 滤镜效果](http://www.w3.org/TR/SVG/filters.html)的美妙世界，一切皆有可能，但要花很长时间才能弄清楚。下面是一个如何用红色和蓝色做你想做的事情的例子。混合可能不是您想要的，您可能会从为颜色添加一些透明度中受益。

```
<svg>
  <defs>
    <filter x="0%" y="0%" width="100%" height="100%" id="mk">
      <feImage xlink:href="http://crawdad.cornell.edu/test/1.png" result="img"/>
      <feBlend in="img" in2="SourceGraphic" mode="multiply"> </feBlend>
    </filter>
  </defs>

  <rect width="100" height="100" fill="red" filter="url(#mk)" />
  <rect x="110" width="100" height="100" fill="blue" filter="url(#mk)" />
</svg> 
```

该[`feBlend`](http://www.w3.org/TR/SVG/filters.html#feBlendElement)元素还有一些您可以尝试的模式。您也可能对[`feComposite`](http://www.w3.org/TR/SVG/filters.html#feCompositeElement)and元素感兴趣。[`feColorMatrix`](http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:23:57.623

好的，我有一个使用 SVG 过滤器的解决方案。

```
<defs>
    <filter id="colorize">
        <feComponentTransfer color-interpolation-filters="sRGB">
            <feFuncR id="fR" type="table" tableValues="0 1"/>
            <feFuncG id="fG" type="table" tableValues="0 1"/>
            <feFuncB id="fB" type="table" tableValues="0 1"/>
        </feComponentTransfer>
    </filter>
</defs>
<image  filter="url(#colorize)" x="0" y="0" width="100" height="100" xlink:href="urlOfGrayscaleImage"/> 
```

然后使用 JavaScript 设置`tableValues`（为了简化，我给了`feFuncR`et al `id`s）如下。每个`tableValues`中的第一个数字是应该替换图像中黑色的值，第二个数字是应该替换白色的值。因此，要将黑色/白色更改为红色/黄色，`tableValues`for `feFuncR`、`feFuncG`和`feFuncB`分别为“1 1”、“0 1”和“0 0”。（将 0-255 的 rgb 范围映射到 0-1。）

设置`color-interpolation-filters="sRGB"`很关键。在其他人向我指出之前，我昨天试图解决这个问题而发疯了。

注意：截至 2012 年 12 月 27 日，Safari 会忽略`color-interpolation-filters="sRGB"`，而 Chrome 和 Firefox 会使用它。我希望 Safari 发布一个使用更新的 WebKit 的版本；这不是 Safari 中唯一一个挥之不去的 SVG 错误，它早已在 Chrome 中得到修复。

我希望这对某人有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:45:51.837

也许您可以选择节点并更改它们的属性。

[例如](http://codepen.io/joe/pen/EksCI)：

```
document.querySelector('#g2161').setAttribute('style','fill:blue'); 
```

*   原始 svg [http://upload.wikimedia.org/wikipedia/commons/8/84/Example.svg](http://upload.wikimedia.org/wikipedia/commons/8/84/Example.svg)

# ruby - 在 D3 (JSON) 中从 Ruby 读取数据

> ID：14043587
> 
> 赞同：0
> 
> 时间：2012-12-26T16:53:30.807
> 
> 标签：ruby, json, d3.js

我很困惑如何从 ruby​​ 类中读取数据。假设我有一个名为“Points”的课程。我想要的是从这个“点”中读取所有数据。我所做的是这样的：

```
 var allPoints = <%= Point.all.to_json %>;
                d3.json('allPoints', 
                    function(data){ .......} 
```

我不知道为什么，但不知何故 d3 无法读取变量 allPoints。可能有什么我忘记输入代码的吗？或者也许还有另一种方法可以从 Ruby 中读取所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:00:39.647

[d3.json()](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)用于执行 AJAX 调用并从服务器检索 JSON 数据，然后将其传递给提供的回调。看来您正在做的是生成一个页面，其中您的数据作为 JavaScript 嵌入在页面中。要使用这个对象，只需使用它。使用回调函数中的任何代码，将名称替换`data`为`allPoints`.

# javascript - 修复输入字段后，html5 oninvalid 不起作用

> ID：14043589
> 
> 赞同：19
> 
> 时间：2012-12-26T16:54:11.117
> 
> 标签：javascript, html

我的表单中有这个输入代码：

```
<input maxlength="255" id="information_name" name="information[name]" oninvalid="check(this)" placeholder="Nombre Completo" required="required" size="30" style="width:528px;height:25px;" tabindex="3" type="text"> 
```

我用这个 javascritp 代码更改了 oninvalid 消息：

```
<script>
 function check(input) {
   if (input.value == "") {
     input.setCustomValidity('Debe completar este campo.');
   } else  {
     input.setCustomValidity('Debe corregir este campo.');
   }

 }
</script> 
```

这就是问题所在，如果我点击提交并且该字段为空，则该字段会显示错误，因此我需要填写该字段，但是在填写该字段后，即使该字段不为空，我仍然会收到警告。

我做错了什么？？？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-05-09T04:52:05.340

如果您设置了一个值，`setCustomValidity()`则该字段无效。即设置非零长度字符串会导致浏览器认为该字段无效。为了使您的新输入生效，您必须清除自定义有效性。只需您可以使用以下内容：

```
<input required maxlength="255" id="information_name" minlength=1 name="information[name]" oninvalid="setCustomValidity('Should not be left empty.')" 
   oninput="setCustomValidity('')" /> 
```

无需为此使用 Javascript。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T13:59:30.177

您可以使用 设置自定义有效性消息`setCustomValidity`，但是任何非空白字符串都会导致该字段的行为就好像它具有无效值一样。您需要`setCustomValidity('')`清除该字段的无效状态。

如果您的有效性很简单并且通过字段属性进行控制，您可以使用它`object.willValidate`来进行测试并设置自定义有效性消息：

`oninvalid="this.setCustomValidity(this.willValidate?'':'your custom message')"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T00:11:52.007

如果您`setCustomValidity`使用任何不是空字符串的值，那么这将导致`input`处于`invalid`状态。因此，您的条件是检查一个值，然后将该字段设置为`invalid`任一方式。仅`setCustomValidity`当字段中的值实际无效时，否则将其设置为空字符串：

```
<script>
 function check(input) {
   if (input.value == "") {
     input.setCustomValidity('Debe completar este campo.');
   } else  {
     input.setCustomValidity('');
   }
 }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-29T20:31:57.720

只对我`oninvalid="this.setCustomValidity(this.willValidate ? '' :'You must choose the account type from the list')"`有用。在 IE 中使用时有很多问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-16T06:55:14.057

问题是自定义有效性错误消息需要再次重置为空白/空，否则该字段将永远不会验证（即使数据正确）。

我用于`oninvalid`设置自定义有效性错误消息，然后用于`onchange`将消息设置回默认值（空白/空），然后当再次检查表单时，如果数据更正，它将正确提交，否则将设置自定义错误有问题再留言。

所以是这样的：

```
<input type="number" oninvalid="this.setCustomValidity('You need to enter an INTEGER in this field')" onchange="this.setCustomValidity('')" name="int-only" value="0" min="0" step="1"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-04T20:40:22.217

对于 React Hooks Typescript 用户

```
const inputRef = useRef<HTMLInputElement>(null);

function setCustomValidity(customMsg?: string) {
  inputRef.current?.setCustomValidity(
    typeof customMsg === 'string' ? '' : t.errors.requiredField,
  );
}

<input
  ref={inputRef}
  onInvalid={() => setCustomValidity()}
  onInput={() => setCustomValidity('')}
/> 
```

# javascript - 使用javascript查找带有下一个和上一个选项的html文档中所有出现的文本

> ID：14043592
> 
> 赞同：1
> 
> 时间：2012-12-26T16:54:27.923
> 
> 标签：javascript

我已经使用 javascript 在 html 中实现了文本搜索，我也可以突出显示它，现在我正在寻找使用下一个和上一个按钮在 html 文档中导航，如果有人可以提出一些非常棒的选项和解决方案。提前致谢。

作为参考，我使用以下代码突出显示搜索文本。

```
function MyApp_HighlightAllOccurencesOfStringForElement(element,keyword) {
  if (element) {
    if (element.nodeType == 3) {        // Text node
      while (true) {
        var value = element.nodeValue;  // Search for keyword in text node
        var idx = value.toLowerCase().indexOf(keyword);

        if (idx < 0) break;             // not found, abort

        var span = document.createElement("span");
        var text = document.createTextNode(value.substr(idx,keyword.length));
        span.appendChild(text);
        span.setAttribute("class","MyAppHighlight");
        span.style.backgroundColor="yellow";
        span.style.color="black";
        text = document.createTextNode(value.substr(idx+keyword.length));
        element.deleteData(idx, value.length - idx);
        var next = element.nextSibling;
        element.parentNode.insertBefore(span, next);
        element.parentNode.insertBefore(text, next);
          element.parentNode.insertBefore();
        element = text;
        MyApp_SearchResultCount++;  // update the counter

      }
    } else if (element.nodeType == 1) { // Element node
      if (element.style.display != "none" && element.nodeName.toLowerCase() != 'select') {
        for (var i=element.childNodes.length-1; i>=0; i--) {
          MyApp_HighlightAllOccurencesOfStringForElement(element.childNodes[i],keyword);
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:52:07.770

这是一个带有这个想法的 jsfiddle：（请参阅在[http://jsfiddle.net/TAxdp/](http://jsfiddle.net/TAxdp/)工作）

```
function goNext(){
    jump(1);
}
function goPrev(){
    jump(-1);
}

function jump(howHigh){
    prevSelected = currSelected;
    currSelected = currSelected + howHigh;

    if (currSelected < 0){
        currSelected = MyApp_SearchResultCount + currSelected;
    }
    if (currSelected >= MyApp_SearchResultCount){
        currSelected = currSelected - MyApp_SearchResultCount;
    }

    prevEl = document.getElementsByClassName("MyAppHighlight")[prevSelected];
    if (prevEl){
        prevEl.style.backgroundColor="yellow";
    }
    el = document.getElementsByClassName("MyAppHighlight")[currSelected];
    el.style.backgroundColor="green";
    el.scrollIntoView(true); //thanks techfoobar
} 
```

ps“突出显示全部”必须在下一个/上一个之前单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:12:57.103

您可以使用以下方法浏览匹配项`scrollIntoView()`：

例如，遍历到第一个匹配：

`document.getElementsByClassName("MyAppHighlight")[0].scrollIntoView(true);`

[scrollIntoView() 的文档](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)

# .net - 在 Singleton 生命周期映射上调用 GetInstance 会返回单例还是创建新实例？

> ID：14043598
> 
> 赞同：1
> 
> 时间：2012-12-26T16:54:58.097
> 
> 标签：.net, structuremap

我在方法中有以下映射`ObjectFactory.Initialize`：

```
expression.For<IFoo>().Singleton()
                      .Use<SomeFoo>()
                      .Ctor<string>("url").Is(<fetch from config>)
                      .Ctor<string>("username").Is(<fetch from config>) 
```

这可以确保我声明`IFoo`为依赖项的类始终获得相同的实例。

但是，在我的应用程序中有一个场景，我需要模拟`SomeFoo`对象对特定用户的行为方式。我使用如下方式创建依赖项`GetInstance`：

```
var args = new ExplicitArguments();
args.SetArg("url", <dynamic url>);
args.SetArg("user", <logged in user>);

ObjectFactory.GetInstance<IFoo>(args); 
```

我希望这个带有特定参数的调用会构造一个新对象，而不是返回对单例的引用。

在这种情况下会发生什么，为什么？我需要什么来维护 90% 的情况下的单例，但在罕见的 10% 中创建一个新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:04:35.610

所以我尝试了这个，发现每次我用 调用`GetInstance`时`ExplicitArguments`，都会创建一个新的唯一对象。但是每次我`GetInstance`不带任何参数调用时，都会返回单例引用。

# wpf - Razor 模板的 JavaScript 错误

> ID：14043603
> 
> 赞同：-1
> 
> 时间：2012-12-26T16:55:12.457
> 
> 标签：wpf, razor, template-engine, razor-2

我正在使用 Razor v2 模板引擎从 WPF 呈现 HTML 页面，但从模板中的 JavaScript 收到错误。违规代码如下：

```
13    <script type="text/javascript">
14      var ie7 = (document.all && !window.opera && window.XMLHttpRequest) ? true : false;
15      if(!ie7){
16          WebFontConfig = {
17              google: { families: [ 'Droid Serif', 'Droid Sans', 'Satisfy', 'PT Sans' ] }
18          };
19      (function() {
20          var wf = document.createElement('script');
21          wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
22          '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
23          wf.type = 'text/javascript';
24          wf.async = 'true';
25          var s = document.getElementsByTagName('script')[0];
26          s.parentNode.insertBefore(wf, s);
27          })();
28      }
29      </script> 
```

错误是：

```
{c:\Users\Echilon\AppData\Local\Temp\0sdz13xb.0.cs(15,28) : error CS1002: ; expected} 
```

我尝试将脚本部分包装在`<text>`标签中，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:11:38.053

我最终改用了[Spark 视图引擎](https://github.com/SparkViewEngine/spark)，它支持`<ignore>`标签来指定要忽略的文本。

# ajax - 在jquery ui自动完成中结合本地源和远程源

> ID：14043608
> 
> 赞同：5
> 
> 时间：2012-12-26T16:55:29.697
> 
> 标签：ajax, jquery-ui, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

我在javascript中本地包含了一个常用术语列表，然后我也想通过ajax响应从服务器获取json响应。怎么做到呢？

```
var projects = ["apple", "orange"];

$('#search').autocomplete({
    source: projects
}); 
```

然后追加来自ajax的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T19:36:54.330

您将采取的方法是将您从服务器返回的结果与本地结果数组结合起来。您可以通过将函数传递给`source`自动完成选项来完成此操作：

您必须执行三个步骤：

1.  发出 AJAX 请求并从服务器获取结果。
2.  过滤本地数组
3.  合并结果

这应该很简单。像这样的东西会起作用：

```
$("input").autocomplete({
    source: function(request, response) { 
        /* local results: */
        var localResults = $.ui.autocomplete.filter(localArray, request.term);

        /* Remote results: */
        $.ajax({
            /* AJAX options omitted... */
            success: function(data) {
                /* Process remote data using $.map, if necessary, then concatenate local
                 * and remote results. 
                 */
                response(data.concat(localResults));
            }
        });
    }
}); 
```

我在这里制定了一个完整的例子：http: [//jsfiddle.net/FZ4N4/](http://jsfiddle.net/FZ4N4/)

# c++ - 返回 std::pair 时会发生 RVO 吗？

> ID：14043609
> 
> 赞同：9
> 
> 时间：2012-12-26T16:55:39.073
> 
> 标签：c++, c++11, std-pair, rvo, nrvo

一个函数需要向调用者返回两个值。最好的实施方式是什么？

选项1：

```
pair<U,V> myfunc()
{
...
return make_pair(getU(),getV());
}

pair<U,V> mypair = myfunc(); 
```

选项 1.1：

```
// Same defn
U u; V v;
tie(u,v) = myfunc(); 
```

选项 2：

```
void myfunc(U& u , V& v)
{
u = getU(); v= getV();
}

U u; V v;
myfunc(u,v); 
```

我知道 Option2 没有副本/移动，但看起来很难看。选项 1、1.1 中是否会发生任何复制/移动？让我们假设 U 和 V 是支持复制/移动操作的巨大对象。

问：理论上是否可以按照标准进行任何 RVO/NRVO 优化？如果是，是否已实现 gcc 或任何其他编译器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T17:06:40.270

> **返回时会发生RVO`std::pair`吗？**

是的，它可以。

> **保证会发生吗？**

不它不是。

* * *

**C++11 标准：第 12.8/31 节：**

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。

复制省略不是保证功能。它是一种优化编译器被允许尽可能*执行*。没有什么特别的`std::pair`。如果编译器足以检测到优化机会，它就会这样做。所以你的问题是编译器特定的，但是同样的规则也适用于`std::pair`任何其他类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T03:07:40.240

虽然不能保证 RVO，但在 C++11 中，你定义的函数我相信至少必须移动返回，所以我建议留下更清晰的定义而不是扭曲它以接受输出变量（除非你有使用它们的特定政策）。

此外，即使此示例确实使用了 RVO，您对 make_pair 的显式使用也意味着您将始终拥有至少一个额外的对构造，因此会进行移动操作。更改它以返回一个大括号初始化的表达式：

```
return { getU(), getV() }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:14:47.973

RVO 或复制省略取决于编译器，因此如果您想拥有 RVO 并避免调用复制构造函数，最好的选择是使用指针。

在我们的产品中，我们使用使用指针和提升容器指针来避免复制构造函数。这确实使性能提升了 10% 左右。

提出您的问题，在选项 1 中，不会调用 U 和 V 的复制构造函数，因为您没有返回 U 或 V，而是返回 std::pair 对象，因此将调用它的复制构造函数，并且大多数编译器肯定会在这里使用 RVO 来避免这种情况.

谢谢尼拉吉·拉蒂

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-20T08:01:29.333

如果您需要在创建对之后`u`和`v`之后做额外的工作，我发现以下模式在 C++17 中非常灵活：

```
pair<U,V> myfunc()
{
  auto out = make_pair(getU(),getV());
  auto& [u, v] = out;
  // Work with u and v
  return out;
} 
```

这应该是编译器使用命名返回值优化的一个非常简单的案例

# c++ - Solaris 上的 Boost 库

> ID：14043611
> 
> 赞同：1
> 
> 时间：2012-12-26T16:55:50.547
> 
> 标签：c++, boost, solaris

我们目前使用 RogueWave 的 SourcePro 库 tools.h++，DB 模块。我们正在寻找开源替代方案。Boost是第一个出现的。但是我没有在 boost.org 网站上发布的 Boost 回归测试中看到 SunStudio 编译器。那么 boost 支持 Sun Studio 吗？

此外，在 Solaris 上和 Sun Studio 的库似乎不兼容，需要与 STLPort 链接。

现在这在我们的案例中是不可能的，因为我们重要的第三方库不是针对 STLport 编译的。那么还有其他选择吗？除了 boost 之外，我们还对其他第三方库开放，但开源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:42:10.140

升压回归测试人员都是志愿者。

显然没有人愿意为 Sun Studio 运行一个 boost 测试机器人。因此 boost“不支持”Sun Studio。

改变这种情况的最好方法是自愿运行这样的测试机器人；这样做的说明在[http://www.boost.org/development/running_regression_tests.html](http://www.boost.org/development/running_regression_tests.html)

一旦测试机器人到位并定期（例如，每天）报告结果，那么您应该针对测试失败的库提交错误报告。

我们过去曾有人运行过 Solaris 测试，但显然他们无法继续。

# php - 将数据放入多维数组

> ID：14043612
> 
> 赞同：1
> 
> 时间：2012-12-26T16:55:58.480
> 
> 标签：php, arrays, parsing, multidimensional-array

我有一个非常金发的时刻，请原谅我......

我正在使用 PHP。

因此，在文本文档中，我有很多这样的内容：

```
Animals
Animals / Farm
Animals / Farm / Chickens
Animals / Farm / Chickens / Hens
Animals / Farm / Chickens / Roosters
Animals / Farm / Cows
Animals / Farm / Cows / Bulls
Animals / Farm / Donkeys & Mules
Animals / Farm / Ducks
Animals / Farm / Geese
Animals / Farm / Goats
Animals / Farm / Horses
Animals / Farm / Horses / Draft Horses
Animals / Farm / Horses / Draft Horses / American Cream Draft
Animals / Farm / Horses / Draft Horses / Belgian Draft Horse
Animals / Farm / Horses / Draft Horses / Clydesdale
Animals / Farm / Horses / Draft Horses / Percheron
Animals / Farm / Horses / Draft Horses / Shire Horse
Animals / Farm / Horses / Draft Horses / Spotted Draft Horse
Animals / Farm / Horses / Gaited Horses
Animals / Farm / Horses / Gaited Horses / American Saddlebred
Animals / Farm / Horses / Gaited Horses / McCurdy Plantation Horses
Animals / Farm / Horses / Gaited Horses / Missouri Fox Trotting
Animals / Farm / Horses / Gaited Horses / Paso Fino
Animals / Farm / Horses / Gaited Horses / Peruvian Paso
Animals / Farm / Horses / Gaited Horses / Rocky Mountain
Animals / Farm / Horses / Gaited Horses / Spotted Saddle Horse
Animals / Farm / Horses / Gaited Horses / Tennessee Walking
Animals / Farm / Horses / Ponies
Animals / Farm / Horses / Ponies / Australian Riding Pony
Animals / Farm / Horses / Ponies / Chincoteague
Animals / Farm / Horses / Ponies / Connemara
Animals / Farm / Horses / Ponies / Dales
Animals / Farm / Horses / Ponies / Dartmoor
Animals / Farm / Horses / Ponies / Exmoor
Animals / Farm / Horses / Ponies / Fell
Animals / Farm / Horses / Ponies / Haflinger
Animals / Farm / Horses / Ponies / Icelandic
Animals / Farm / Horses / Ponies / New Forest
Animals / Farm / Horses / Ponies / Quarter
Animals / Farm / Horses / Ponies / Shetland
Animals / Farm / Horses / Ponies / Sport Ponies
Animals / Farm / Horses / Ponies / Welsh Pony 
```

我需要将它放入一个多维数组中，以便我可以从中构建一个多级菜单。我引入数据没有问题，问题在于解析。我在匹配换行符时遇到了麻烦，而且，假设我把它炸开了。我如何获得一堆数组，例如：

```
array(
    0=>Animals
    1=>Farm
    2=>Horses
    3=>Ponies
    4=>Welsh Ponies); 
```

进入我需要的东西？.....看起来很简单，我遇到了一个主要问题......

请在正确的方向上提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:16:24.940

Assuming it's PHP ;), here are some building blocks:

1.  Split a multiline text: [https://stackoverflow.com/a/3997362/1665128](https://stackoverflow.com/a/3997362/1665128)

2.  For each line, explode it into a temporary array using ' / ' as a delimiter: [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

3.  Convert the temp array into a map: [http://php.bigresource.com/convert-a-simple-array-to-associative-array--lZQwGgRfV.html](http://php.bigresource.com/convert-a-simple-array-to-associative-array--lZQwGgRfV.html) and the original [How to convert a simple array to an associative array?](https://stackoverflow.com/questions/6153360/how-to-create-convert-a-simple-array-to-associative-array)

4.  Add the map to your multidimensional array: [http://webcheatsheet.com/PHP/multidimensional_arrays.php](http://webcheatsheet.com/PHP/multidimensional_arrays.php)

# excel - EXCEL VBA 动态数据输入

> ID：14043615
> 
> 赞同：2
> 
> 时间：2012-12-26T16:56:05.997
> 
> 标签：excel, vba

![在此处输入图像描述](../Images/d875ff16e701982d8d4e13d3b8d5a8ef.png)

1.  Range("D:D") 中的红色颜色框是参考的值`Me.ComboBox1.Value`
2.  黄色和绿色分别是来自`Me.TextBox1`和的数据`Me.TextBox2`。在 Me 中，`Me.TextBox1`和`Me.TextBox2`中的值将根据在`Me.ComboBox1`.
3.  因此，在这种情况下，我希望根据用户选择的红色输入黄色和绿色。
4.  另一个额外的事情是我`.OffSet(1,0).EntireRow.Insert`为最后一行黄色和绿色数据放了一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:25:30.157

这应该这样做：

```
nextrow = Sheets("DB Cust").Range("C" & Sheets("DB Cust").Rows.Count).End(xlUp).Row + 1 
```

**更新**在您的编辑之后，我认为您可能需要类似的东西。请注意，这取决于每个数据块的 E 列中始终存在一个值才能使其正常工作：

```
Dim lngNewRow As Long
Dim strLookupValue As String

strLookupValue = "A" ' or B/C/D etc.

lngNewRow = Sheets("DB Cust").Range("D:D").Find(strLookupValue).Offset(, 1).End(xlDown).Row + 1
Sheets("DB Cust").Rows(lngNewRow).Insert
Sheets("DB Cust").Cells(lngNewRow, "E").Value = "Data for column E"
Sheets("DB Cust").Cells(lngNewRow, "F").Value = "Data for column F" 
```

关于您的第 4 点，如果“D”是列表中的最后一个值，那么为什么您需要插入额外的空白行，大概它下面的所有行都是空白的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:42:35.670

我不确定，但你跟注范围的方式对我来说似乎很奇怪。尝试不同的方式来定义您的计数范围。

改变这个：

```
nextrow = WorksheetFunction.CountA(Sheets("DB Cust").Range("C:C")) + 2 
```

对此：

```
Dim myWB as Workbook, DBcust as Worksheet
Set myWB = Excel.ActiveWorkbook
Set DBcust = myWB.Worksheets("DB Cust")

nextrow = Excel.WorksheetFunction.CountA(DBcust.Range(DBcust.Cells(1,3),DBcust.Cells(DBcust.UsedRange.Rows.Count,3)) + 2 
```

我将书籍和工作表分配给一个变量以获得更高的可靠性，但如果您愿意，您可以再次明确说明它们。此代码假定工作簿是当前活动的工作簿，否则您必须使用工作簿名称设置变量。

此外，看起来您不需要“With”块中偏移函数的“rfound”部分。. . 这就是“With”的用途。这只是一件小事，但像这样毫无意义的代码只会让你更加头疼，所以我的建议是把它拿出来。

我还没有将它加载到 VBA IDE 中，所以请仔细检查拼写错误。谢谢！

更新：

阅读您的评论后，我仔细查看了您的代码以及您正在尝试做什么。看起来您正在尝试将 textbox1 的值（无论可能是什么......如果您稍微解释一下这部分会有所帮助）到一个与用户在组合框 1 中定义的搜索结果位置偏移的单元格中。nextrow 变量位于行偏移参数内，但该位置已经是您想要的位置。尝试改变这个：

```
With rfound

rfound.Offset(nextrow, 1).Value = TextBox1.Value
rfound.Offset(nextrow, 2).Value = TextBox1.Value
rfound.Offset(nextrow, 3).Value = TextBox1.Value
rfound.Offset(nextrow, 4).Value = TextBox1.Value
rfound.Offset(nextrow, 5).Value = TextBox1.Value
rfound.Offset(nextrow, 6).Value = TextBox1.Value
rfound.Offset(nextrow, 7).Value = TextBox1.Value
rfound.Offset(nextrow, 8).Value = TextBox1.Value
MsgBox ("Data entry success")

End With 
```

对此：

```
With rfound

.Offset(0, 1).Value = TextBox1.Value
.Offset(0, 2).Value = TextBox1.Value
.Offset(0, 3).Value = TextBox1.Value
.Offset(0, 4).Value = TextBox1.Value
.Offset(0, 5).Value = TextBox1.Value
.Offset(0, 6).Value = TextBox1.Value
.Offset(0, 7).Value = TextBox1.Value
.Offset(0, 8).Value = TextBox1.Value
MsgBox ("Data entry success")

End With 
```

您可能会注意到我还按照我之前的建议删除了多余的“rfound”。看看这是否有效，如果有效，您可能希望一起删除 newrow 变量。

祝你好运，让我们知道进展如何。

# android - 我的应用程序中的背景音乐无法启动

> ID：14043618
> 
> 赞同：0
> 
> 时间：2012-12-26T16:56:30.733
> 
> 标签：android

我正在尝试将背景音乐添加到我的应用程序中。我读了很多例子，但我总是遇到同样的问题。音乐没有开始，我也没有错误信息。

我有一门管理背景音乐的课程

```
import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.IBinder;

public class BackgroundSoundService extends Service {
private static final String TAG = null;
MediaPlayer player;
public IBinder onBind(Intent arg0) {

    return null;
}
@Override
public void onCreate() {

    super.onCreate();
       player = MediaPlayer.create(this, R.raw.jingle);
        player.setLooping(true); // Set looping
        player.setVolume(100,100);
        player.start();
}
@Override
public void onStart(Intent intent, int startId) {

    super.onStart(intent, startId);
}
public void onDestroy() {

    super.onDestroy();
}

protected void onNewIntent() {
    player.pause();
}
} 
```

而且，在我的主类中，在 onCreate 方法中，我使用

```
 Intent svc=new Intent(this, BackgroundSoundService.class);
            startService(svc); 
```

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.giocobambini"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.giocobambini.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>   

        <activity
            android:name="com.example.giocobambini.BackgroundSoundService"
            android:label="@string/title_activity_background_sound_service" >
        </activity>

    </application>

</manifest> 
```

也许问题是 minSdkVersion="8"！！也许不支持 minSdkVersion 8 背景音乐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:04:10.503

该**服务**应在启动**服务**之前使用 android 清单文件声明。此过程将在标签内完成，如下所示。

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >

<service android:name="BackgroundSoundService"  android:enabled="true"></service>
</application> 
```

# jquery - 如何获得此滚动触发效果

> ID：14043623
> 
> 赞同：5
> 
> 时间：2012-12-26T16:56:53.003
> 
> 标签：jquery, html, css

有这个网站[http://lamoulade.com/#!/home](http://lamoulade.com/#!/home)具有整洁的伪动画效果，当用户滚动时会启动。如果我能得到一些关于使用什么来实现这一目标的指示，以推动我朝着正确的研究方向前进，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:09:08.833

你正在寻找的东西叫做`parallax Effect`

一些视差教程：

*   [http://webdev.stephband.info/parallax.html](http://webdev.stephband.info/parallax.html)
*   [http://www.ianlunn.co.uk/blog/code-tutorials/jquery-vertical-parallax-background/](http://www.ianlunn.co.uk/blog/code-tutorials/jquery-vertical-parallax-background/)
*   [http://www.richardshepherd.com/smashing/parallax/background.html](http://www.richardshepherd.com/smashing/parallax/background.html)
*   [http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)
*   [http://www.netmagazine.com/tutorials/building-parallax-scrolling-storytelling-framework](http://www.netmagazine.com/tutorials/building-parallax-scrolling-storytelling-framework)
*   [http://www.webdesignshock.com/one-page-website/](http://www.webdesignshock.com/one-page-website/)
*   [http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/)
*   [http://www.franckmaurin.com/the-parallax-effects-with-jquery/](http://www.franckmaurin.com/the-parallax-effects-with-jquery/)

jQuery视差插件：

*   [http://webdev.stephband.info/parallax.html](http://webdev.stephband.info/parallax.html)
*   [http://jonraasch.com/blog/scrolling-parallax-jquery-plugin](http://jonraasch.com/blog/scrolling-parallax-jquery-plugin)
*   [https://github.com/davecranwell/jQuery-scroll-parallax](https://github.com/davecranwell/jQuery-scroll-parallax)
*   [http://www.davecranwell.com/content/jquery-scroll-parallax-plugin](http://www.davecranwell.com/content/jquery-scroll-parallax-plugin)

一些非常好的视差站点的更多示例，查看源代码并查看它们使用的内容：

*   [http://www.ok-studios.de/home/](http://www.ok-studios.de/home/)
*   [http://www.nikebetterworld.com/about](http://www.nikebetterworld.com/about)
*   [http://www.laurentiuswonen.com/jaarverslag2010/](http://www.laurentiuswonen.com/jaarverslag2010/)
*   [http://www.nintendo.com.au/gamesites/mariokartwii/](http://www.nintendo.com.au/gamesites/mariokartwii/)
*   [http://2011.beercamp.com/](http://2011.beercamp.com/)
*   [http://www.beetle.com/](http://www.beetle.com/)
*   [http://activatedrinks.com/](http://activatedrinks.com/)
*   [http://www.culturesolutions.co.uk/](http://www.culturalsolutions.co.uk/)
*   [http://kalendiar.lenm.cz/](http://kalendiar.lenm.cz/)
*   [http://www.davegamache.com/sandbox/best-of-2010/](http://www.davegamache.com/sandbox/best-of-2010/)
*   [https://victoriabeckham.landrover.com/INT](https://victoriabeckham.landrover.com/INT)

[取自DBUK](https://stackoverflow.com/users/898416/dbuk)的好答案

# haskell - Haskell IO 隐藏文件或前奏不明确

> ID：14043628
> 
> 赞同：1
> 
> 时间：2012-12-26T16:57:44.830
> 
> 标签：haskell

我最近下载了 ghci，但是当我尝试编译我的 .hs 文件时，它说 IO 模块位于隐藏包 haskell98-2.0.0.1 中。当我使用 暴露它时`ghc-pkg expose haskell98-2.0.0.1`，它的基础和前奏就出现了问题，说前奏是模棱两可的。

我怎样才能解决这个问题，以便我可以正确编译我的程序？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:53:40.803

如果你使用 ghc，你应该使用 System.IO 模块，它是`base`包的一部分。Haskel-98 是……好吧，现在已经过时了。如果你想坚持使用haskell-98（这将使大多数现有库无法使用），你应该公开`haskell98`和隐藏`base`，因为两者都`base`包含`haskell98`模块`Prelude`，所以编译器无法猜测要导入哪一个，它必须导入前奏一些方式因为标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:55:34.453

在这里要做的正确的事情（正如 permeakra 指出的那样）是使用`System.IO`模块，这是通过放置

```
import System.IO 
```

在文件顶部附近（在模块声明下（如果有的话），但在其他所有内容之上）。

# oracle - qrtz_blob_triggers 表创建错误

> ID：14043630
> 
> 赞同：0
> 
> 时间：2012-12-26T16:57:48.377
> 
> 标签：oracle, quartz-scheduler

当我尝试运行 Quartz 提供的脚本来创建表时，我收到“缺少右括号”错误。所有其他表的创建都没有任何问题。这是引发错误的命令：

```
CREATE TABLE qrtz_blob_triggers
(
SCHED_NAME VARCHAR2(120) NOT NULL,
TRIGGER_NAME VARCHAR2(200) NOT NULL,
TRIGGER_GROUP VARCHAR2(200) NOT NULL,
BLOB_DATA BLOB NULL,
CONSTRAINT QRTZ_BLOB_TRIG_PK PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP),
CONSTRAINT QRTZ_ BLOB_TRIG_TO_TRIG_FK FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) 
    REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP)
); 
```

有没有人遇到过这个错误？我通常可以捕捉到“缺少右括号”错误，但这个错误让我很难过。顺便说一句，错误指向 FOREIGN 和 KEY 之间的空格。

# android - onCreateOptionsMenu(Menu menu) 和 onPrepareOptionsMenu(Menu menu) 有什么区别？

> ID：14043631
> 
> 赞同：53
> 
> 时间：2012-12-26T16:57:55.823
> 
> 标签：android, android-menu, oncreateoptionsmenu

`onCreateOptionsMenu(Menu menu)`解释和之间的区别`onPrepareOptionsMenu(Menu menu)`。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-26T17:00:32.130

`onCreateOptionsMenu()`被调用一次。
`onPrepareOptionsMenu()`每次打开菜单时都会调用。

* * *

从[`onCreateOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)文档中：

> 这只调用一次，第一次显示选项菜单。要在每次显示菜单时更新菜单，请参阅[`onPrepareOptionsMenu(Menu)`](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)。

# java - 在我发起的共享活动完成后，共享期间使用的应用程序打开而不是我自己的应用程序

> ID：14043635
> 
> 赞同：1
> 
> 时间：2012-12-26T16:58:12.573
> 
> 标签：java, android

这是我正在使用的下面的代码。我想做的是使用电子邮件、短信、facebook 等应用程序在 edText (TextView) 中共享文本。

问题是，在我尝试重新打开应用程序时共享文本后，最后选择的应用程序会打开（如电子邮件、消息、Facebook 应用程序）。

```
Intent intentf = new Intent(Intent.ACTION_SEND);
intentf.setType(text/plain);
intentf.putExtra(Intent.EXTRA_TEXT, edText.getText().toString());
startActivity(Intent.createChooser(intentf, "Share with")); 
```

如何让我自己的应用程序重新打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:49:18.667

以防有人可能有同样的问题。我添加完成（）；在我的代码结束时结束了我的活动并解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:03:32.303

因为您的应用程序现在正在“使用”该应用程序作为编辑器。如果您回击或完成共享，您将返回您的应用程序。如果您查看最近的应用程序列表，将显示您的图标，但显示共享应用程序编辑器屏幕图像。所有应用程序都相同，例如使用浏览器尝试并作为电子邮件共享。

# jquery - Node.js 如何解析/执行从节点服务器接收的 javascript？

> ID：14043637
> 
> 赞同：1
> 
> 时间：2012-12-26T16:58:24.463
> 
> 标签：jquery, node.js, http

我是 Node 的新手，我有以下问题，我有一个[http://mydomain.com/mypage.php](http://mydomain.com/mypage.php)可以做一些事情，我想调用[http://mydomain.com:8080](http://mydomain.com:8080)（位于节点服务器）。

```
var server = require('http').createServer(function(req, res){
                  res.writeHead(200, {'Content-Type': 'text/javascript'});
                  res.end('$("#messages").append("<br> test123");');

                });
server.listen(8080); 
```

似乎工作，因为我收到我的客户：

```
$("#messages").append("<br> test123"); 
```

但代码接收，不是执行！

任何想法 ？

提前感谢丹妮

php 代码简化（mypage.php）：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>demo game </title>

<script src="/js/jquery-1.8.3.min.js"></script>

<script src="http://127.0.0.1:8080"></script>

</head>

<body>

<div id="messages"></div>
<input type="text" id="text-input">
<input type="button" value="Send" id="send-button">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:12:43.693

尝试返回这个

```
$(function(){
  $("#messages").append("<br> test123"); 
}) 
```

这可能会发生，因为脚本在加载之前正在执行 `div#messages`，因此没有引用`div#messages`

# php - 多维数组不返回所有 MySQLi 行

> ID：14043640
> 
> 赞同：0
> 
> 时间：2012-12-26T16:58:58.417
> 
> 标签：php, codeigniter

从下图可以看出，我只在前端返回了一行。我应该得到不止一排返回。有人知道我做错了什么吗？

![在此处输入图像描述](../Images/b2d8738662162664c57f973213c087c6.png)

```
public function chatBoxMembers() {
        $userid = $this->session->userdata('userid');
        $wow = $this->db->get_where('messages', array('messageRecipientId' => $userid));
        foreach($wow->result() as $row) {
            $imUser = array();
            $imUser['friendId'] = $row->messageSentById;
            $imUser['messageBody'] = $row->messageBody;
            $imUser['readStatus'] = $row->readStatus;
            $imUser['activityStatus'] = $row->activityStatus;
            $imUsers[] = $imUser;
        } echo json_encode(array($imUser));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:03:34.273

也许你想要：**echo json_encode(array($imUsers));**

$imUsers 没有 $imUser ？

# signalr - SignalR 中的保证交付

> ID：14043641
> 
> 赞同：14
> 
> 时间：2012-12-26T16:59:08.290
> 
> 标签：signalr

我正在为中等负载的 Web 应用程序评估 SignalR。

我们预计约 500 条消息/秒，这对 SignalR 来说应该不是问题。

但是，我们担心此解决方案的可靠性。我们的环境有一个有问题的网络，客户端失去其网络连接约 30 秒的情况并不少见。是否有任何机制可以确保一旦客户端重新连接，它会获取在其离线期间发送的所有消息？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T07:01:36.660

处理此问题的一种相当简单的方法是为每条消息分配一个随每条消息递增的 ID。客户端需要跟踪他收到的最新消息，并且在重新连接时只需将该消息 ID 发送到服务器；然后服务器需要将所有丢失的消息发送到客户端。实施起来应该相当简单。

编辑：我认为您不必在服务器上适当地维护任何真实状态-我认为几乎所有这些状态都可以推送到您的数据存储区或您的客户端。客户端将发送它收到的最后一条消息的 ID 或时间戳：

`$.connection.myHub.server.updateMe(lastMessageId);`

您需要某种支持数据存储 - 因此，当服务器接收到`updateMe()`消息时，它将对数据库进行查询并提取所有 ID 大于它刚刚收到的行的行。它将这些作为其`UpdateMe()`方法返回值的一部分返回给客户端。然后它会尝试通过调用客户端上的方法来传递与通常相同的任何新消息。

至于无状态是 SignalR 的目标：我无法对此发表评论，除了观察到我无法想象任何相当复杂的现实世界应用程序不需要有某种支持数据存储，无论它是否在 SignalR或其他一些框架（WCF、XSockets 等）几乎没有什么区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:41:27.987

您当然可以使用某种排队框架，但要以最小的努力实现这一点，您可以这样做......

服务器端：http : //pastebin.com/tuicQYGq 客户端：[http :](http://pastebin.com/tuicQYGq) [//pastebin.com/a8EbusuG](http://pastebin.com/a8EbusuG)

我正在使用 XSockets.NET，它是一个实时通信平台（自 2009 年以来），并且 XSockets.NET 中的控制器具有状态，因此这很容易做到。

编辑：哦...要对此进行测试，请使用两个浏览器，例如 chrome 和 safari，然后断开一个浏览器...从另一个浏览器发送一些消息，然后重新连接以查看消息出现。你必须在 localhost 上使用两个不同的浏览器，因为 xsockets 会给每个浏览器一个唯一的 storage-id。

编辑：将 Func 添加到队列中，以便您可以针对特定客户端，即使它们处于脱机状态。现在，如果您愿意，只有符合条件的客户端才会收到消息。

问候乌夫

# intellij-idea - Intellij 不会打开项目文件或创建新的项目文件

> ID：14043644
> 
> 赞同：2
> 
> 时间：2012-12-26T16:59:35.743
> 
> 标签：intellij-idea

我最近购买了 Intellij 12 的许可证，但我似乎无法在 OSX Mt. Lion 上使用它。项目中的所有文件都有一个红色的 J 图标，并且不会以任何方式打开（单击或拖放）。

![在此处输入图像描述](../Images/8f8e59c39eef6800b7bf044f0b3d996d.png)

如果我尝试创建一个像 JavaScript 文件这样的新文件，对话框将保持打开状态并且不会创建该文件。

我有：

*   重新安装 Intellij 3 次擦除所有以前的配置
*   重新创建/创建新项目
*   在备用项目文件夹中创建的项目
*   重新启动我的电脑
*   检查文件目录和文件权限

我根本找不到问题。RubyMine 仍然可以正常工作。还有其他人遇到这个问题并知道如何纠正它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:31:17.360

某些插件可能会破坏 IntelliJ IDEA 功能。在这种情况下，问题是由使用 JDK 1.7 编译并针对 JDK 1.7 语言级别的**Markdown**插件引起的。IDEA 在 Mac 上运行在 JDK 1.6 下，因此插件会破坏 IDE（您可以在`idea.log`: `Help`|中找到异常`Reveal Log in ...`）。

`~/Library/Application Support/IntelliJIdea12`要解决此问题，请手动从目录中删除有故障的插件。其他基于 IntelliJ IDEA 平台的产品或在不同操作系统下运行的用户可以参考[此文档](http://devnet.jetbrains.net/docs/DOC-181)找到插件目录的位置。

# java - 启用直接打印需要 128 MB 内存

> ID：14043649
> 
> 赞同：3
> 
> 时间：2012-12-26T17:00:20.627
> 
> 标签：java, pdf, lpr

我正在为远程打印开发一个新的 android 应用程序（使用 java）。
与打印机的通信是通过 LPR 标准 (RFC 1179)。
我用 Java 编写了 LPR 客户端，并用它来打印 PDF 文档。
第一次打印的非常好。
然后我尝试再次打印同一个文档，我收到了一个奇怪的错误：

> “PDF 状态页
>  PDF 文件未打印。启用直接 PDF 打印需要 128 MB 内存。”

我搜索了这个问题，并没有找到太多。
当我使用原始驱动程序时，此问题不会出现。
有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T19:52:35.397

我只是遇到了这个问题，并认为我会为我的情况提供一个答案。我迁移到新服务器，尝试打印 PDF 时出现标题错误。我忘记安装打印机驱动程序了。

我只是将旧`ppd`文件复制到`/etc/cups/ppd/`，重新启动杯子，错误就消失了。

# java - shutdown.jar 工作，但 shutdwon.exe 不工作

> ID：14043650
> 
> 赞同：3
> 
> 时间：2012-12-26T17:00:21.687
> 
> 标签：java, exe, executable-jar, shutdown, exe4j

我刚刚创建了一个用于关闭 PC 的 GUI 程序。它工作正常，所以我制作了一个也可以工作的 jar 文件。现在我`.exe`使用`exe4j`and创建了一个文件`lauch4j`。它会启动，但是当我单击关机按钮时没有任何反应，`.exe`程序不起作用。这让我很生气，因为没有错误消息出现。

这是一个代码。

```
public void actionPerformed(ActionEvent e){
String str=e.getActionCommand();
    if(e.getSource()==b1) {
        try {
            Runtime runtime = Runtime.getRuntime();
            Process proc = runtime.exec("shutdown -s -t 0");
            System.exit(0);
        } catch(IOException e2) {
            e2.printStackTrace();
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:37:04.123

使用从 Java 应用程序开始的绝对路径`shutdown.exe`：

```
runtime.exec(System.getenv("SystemRoot") + "\\System32\\"
             + "shutdown -s -t 0"); 
```

如果您的 Java 应用程序是`shutdown.exe`，则`runtime.exec`真正启动您的 Java 应用程序而不是系统实用程序。

# oracle - PL/SQL 函数：从函数中提取多行

> ID：14043652
> 
> 赞同：1
> 
> 时间：2012-12-26T17:00:34.230
> 
> 标签：oracle, function, plsql, multiple-records

我的数据库中有多个表。我必须找出这些表的名称。所以我写了以下程序：

```
CREATE OR REPLACE FUNCTION fun_tablefinder( keyword VARCHAR2 )
RETURN NUMBER
IS
 v_query VARCHAR2(200);tablename VARCHAR2(20);
 tablename NUMBER;

 BEGIN

v_query:='SELECT count(TABLE_NAME) FROM USER_TAB_COLUMNS WHERE TABLE_NAME LIKE ''%'||upper(keyword)||'%''';
EXECUTE IMMEDIATE v_query INTO tablename;
RETURN tablename;
END; 
```

但是我的查询中有错误，我无法修复：

```
tablename:= fun_tablefinder('ubl'); is not working 
```

而且我对如何在调用此函数时提取多行感到困惑。如何使用循环来处理这些结果？

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:17:21.507

您需要一个返回嵌套表的函数。在我的函数版本中，我使用`dbms_debug.vc2coll`数据类型，即 Oracle 内置的集合类型。

请注意使用 BULK COLLECT 来填充具有多行的集合。

```
create or replace function     fun_tablefinder( keyword VARCHAR2 )
    RETURN dbms_debug.vc2coll
IS
   tablenames dbms_debug.vc2coll;

BEGIN

    SELECT TABLE_NAME
    bulk collect into tablenames
    FROM USER_TABLES 
    WHERE TABLE_NAME LIKE upper(keyword)||'%';
    RETURN tablenames;
END; 
```

不知道为什么要使用动态 SQL，这是完全没有必要的。此外，您可能希望查询每个表返回一行的 USER_TABLES，而不是从 USER_TAB_COULMNS 获得的多次命中。

要使用此查询，只需像这样部署 TABLE() 函数即可：

```
select * 
from table ( fun_tablefinder('UBL') ); 
```

* * *

显然，这是对 SQL 函数的微不足道的使用，对于直接 SQL 查询就足够的场景来说，这完全是过度设计。

# javascript - chrome for mobile 忽略高度 100%

> ID：14043657
> 
> 赞同：0
> 
> 时间：2012-12-26T17:01:04.807
> 
> 标签：javascript, html, css, google-chrome

我有这个 html：http: [//jsfiddle.net/nsabu/](http://jsfiddle.net/nsabu/)

```
<!doctype html>
<html lang="en">
<head>
    <style>
    html, body, img {
        height: 100%;
    }
    body {
        padding: 0;
        margin: 0;
    }
    </style>
</head>

<body>
    <img src="https://s3.amazonaws.com/dev.storage.mediabox.io/1/_content/664536771c9060e8459805d4ed7103fa-40/198-40_100_2.jpg?AWSAccessKeyId=ASIAJNMOEPRUOJXCJJ5Q&Expires=1356669400&Signature=Su6bomRoQ8FT6yllzIzPGGyaqWU%3D&x-amz-security-token=AQoDYXdzENr%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEa0AFP2Myc69na3yO7inJ7d9KqZwS620cUDmdLiSIQmtR3wrgxetmy1N3JNCVAdz1mOTqqwKiKpPXY5dVf0OxTBY%2BLUoAovSz9OjUojB0JQlXqMVeNbAzhq723O32OZR08l6F2S0oyIOgwjr%2FGkzj2JhNunzfido49SdTjEiX2p5WozIVODRqnxkqrXrDL4z1vMunQkivQ8U2VKlL4s8z3mEwd3tvWUaOu0%2B%2BUFvHiGH23V05pXQEnZnlLKQ%2B6NNwmmp2Rt5EsmMvvTJi4CYbjM6cJIJjP7IYF" />
</body>
</html> 
```

当我在 chrome 上运行它时，我得到了 100% 的图像高度。当我用 chrome 在平板电脑或手机上运行它时，浏览器会忽略 100% 的高度。问题是什么？如何告诉 chrome 移动浏览器考虑高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-04T10:29:37.640

试试`height: 100vh;`吧（CSS3，所有浏览器都支持）。或许能解决你的烦恼。有关更多信息，请参见此处：[https ://stackoverflow.com/a/16837667](https://stackoverflow.com/a/16837667)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:08:01.393

添加视口标签

```
<!doctype html>
<html lang="en">
<head>
    <meta name="viewport" content="initial-scale=1"/>
    <style>
    html, body, img {
        height: 100%;
    }
    body {
        padding: 0;
        margin: 0;
    }
    </style>
</head>

<body>
    <img src="https://s3.amazonaws.com/dev.storage.mediabox.io/1/_content/664536771c9060e8459805d4ed7103fa-40/198-40_100_2.jpg?AWSAccessKeyId=ASIAJNMOEPRUOJXCJJ5Q&Expires=1356669400&Signature=Su6bomRoQ8FT6yllzIzPGGyaqWU%3D&x-amz-security-token=AQoDYXdzENr%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEa0AFP2Myc69na3yO7inJ7d9KqZwS620cUDmdLiSIQmtR3wrgxetmy1N3JNCVAdz1mOTqqwKiKpPXY5dVf0OxTBY%2BLUoAovSz9OjUojB0JQlXqMVeNbAzhq723O32OZR08l6F2S0oyIOgwjr%2FGkzj2JhNunzfido49SdTjEiX2p5WozIVODRqnxkqrXrDL4z1vMunQkivQ8U2VKlL4s8z3mEwd3tvWUaOu0%2B%2BUFvHiGH23V05pXQEnZnlLKQ%2B6NNwmmp2Rt5EsmMvvTJi4CYbjM6cJIJjP7IYF" />
</body>
</html> 
```

# event-handling - 如何访问 fxml 文件中的节点以处理它们的事件？

> ID：14043663
> 
> 赞同：0
> 
> 时间：2012-12-26T17:01:37.653
> 
> 标签：event-handling, javafx-2

我有一个 fxml 文件（我使用场景生成器创建了该文件），我想处理一个按钮的 mouseEvent。我怎样才能做到这一点？？有没有办法在场景构建器本身中处理事件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:01:50.593

是的，您可以在 Scenebuilder 本身中为鼠标事件指定操作，转到 Inspector Panel -> Code panel。

> 代码面板使您能够指定在选定元素上发生拖放、键盘、鼠标或任何其他事件时应采取的操作。

![在此处输入图像描述](../Images/dfeecbb147949412f846754b903cb4fc.png)

参考：
[Scene Builder Inspector 面板](http://docs.oracle.com/javafx/scenebuilder/1/user_guide/inspector-panel.htm)

# vba - 对象变量未设置错误 - 但它是

> ID：14043666
> 
> 赞同：0
> 
> 时间：2012-12-26T17:01:47.327
> 
> 标签：vba, outlook

我在名为 ExportTimeSheetsToDatabase() 的子例程中收到 Object Not Set Error 消息。

尝试跟随：

1.  TimeSheetCollection 是 TimeSheet 类型的集合
2.  首先，我调用子例程 ReadWeeklyTimeSheets()，它设置 TimeSheetCollection 对象，读取今天的邮件项，并根据从邮件项正文中获得的值设置每个 TimeSheet 中的属性。为了清楚起见，我添加了 TimeSheet 类的缩短版本。
3.  接下来，调用名为 ExportTimeSheetsToDatabase() 的子例程。在 Debug.print 语句中，我收到有关 Item.MondayStart 和 Item.MondayEnd 属性的错误消息。如果我在周二到周五包括所有其他属性，他们都会抱怨相同的错误消息。

我不明白为什么我会收到错误！在子例程 ReadWeeklyTimeSheets() 中，我进行如下调用： tsheet.MondayStart = MonStart

在 TimeSheet 类中，pMonStart 的属性设置为：

```
Public Property Let MondayStart(Value As TimeFrame)
  Set pMonStart = Value
End Property 
```

所以我知道它正在被设置。为什么在 ExportTimeSheetsToDatabase() 子例程中出现此错误？您会注意到，在子例程 ReadWeeklyTimeSheets() 中，我执行了一个调用 tsheet.ToString 的 Debug.print 语句。这可以很好地打印 tsheet 中的所有属性。当我在 ExportTimeSheetsToDatabase() 子例程中调用 Debug.print 时，我正在访问集合中的同一个 TimeSheet 对象。

请指教，

艾伦

```
'Global variable
Public TimeSheetCollection As Collection
...
Sub ReadWeeklyTimeSheets()
  Dim tsheet As TimeSheet
  Dim kvPairs As Collection
  ...
  Set TimeSheetCollection = New Collection
  Dim DefaultTF As TimeFrame
  'set the default TimeFrame
  Set DefaultTF = New TimeFrame
  DefaultTF.Initialize = "00:00"
  ...
  For Each oitem In ItemsToProcess
    If TypeName(oitem) = "MailItem" Then
     Set myMailItem = oitem
     Debug.Print "Subject: " & myMailItem.Subject
     If CheckSubject(myMailItem.Subject, TimeSheetSubjectTitle) Then
       Set kvPairs = GetTimeSheetKeyValuePairs(myMailItem.body)
       'Iterate over the Collection and load up
       'an instance of TimeSheet object
       Set tsheet = New TimeSheet
       For Each Item In kvPairs

         If LCase(Item.Key) = LCase("EmployeeID") Then
           tsheet.EmployeeID = Item.Value
         ElseIf LCase(Item.Key) = LCase("StartDate(DD/MM/YYYY)") Then
            tsheet.StartDate = CDate(Item.Value)
         ElseIf LCase(Item.Key) = LCase("EndDate(DD/MM/YYYY)") Then
            tsheet.EndDate = CDate(Item.Value)
         ElseIf LCase(Item.Key) = LCase("MonStart") Then
            If Item.Value <> "" Then
              Set MonStart = New TimeFrame
              MonStart.Initialize = Item.Value
              tsheet.MondayStart = MonStart  '<<<Calling this sets the object in the TimeSheet
            Else
              tsheet.MondayStart = DefaultTF
            End If
         ElseIf LCase(Item.Key) = LCase("MonEnd") Then
             If Item.Value <> "" Then
             Set MonEnd = New TimeFrame
             MonEnd.Initialize = Item.Value
             tsheet.MondayEnd = MonEnd  '<<<Calling this sets the object in the TimeSheet
         Else
             tsheet.MondayEnd = DefaultTF
         End If
       ElseIf ... 'And so on thru to Friday

       End If
      Next Item

      'Add each Time Sheet object to the TimeSheetCollection
      TimeSheetCollection.Add tsheet

      Debug.Print tsheet.ToString  '<<<The TimeSheet object prints everything just fine
    End If
   End If
 Next oitem     
End Sub

_______________________________

Sub ExportTimeSheetsToDatabase()
  Dim Item As TimeSheet
  Dim strInsertQuery As String

  'Iterate over the collection to obtain each TimeSheet object
  'and insert the data from each as a new record into the database
  For Each Item In TimeSheetCollection
   'THIS DEBUG STATEMENT IS WHERE I GET THE ERROR OBJECT NOT SET
   'ON Item.MondayStart and Item.MondayEnd
   Debug.Print Item.EmployeeID & ", " & Item.StartDate & ", " & Item.EndDate & "," & Item.MondayStart & "," & Item.MondayEnd & ", Toal Hours: " & Item.TotalWeeklyHours
  Next Item

 End Sub
_______________________________
'CLASS MODULE TIMESHEET
Private pEmployeeID As Integer
Private pStartDate As Date
Private pEndDate As Date
Private pMonStart As TimeFrame
Private pMonEnd As TimeFrame
Private pMonBreak As Double
Private pTuesStart As TimeFrame
Private pTuesEnd As TimeFrame
Private pTuesBreak As Double
Private pWedStart As TimeFrame
Private pWedEnd As TimeFrame
Private pWedBreak As Double
Private pThursStart As TimeFrame
Private pThursEnd As TimeFrame
Private pThursBreak As Double
Private pFriStart As TimeFrame
Private pFriEnd As TimeFrame
Private pFriBreak As Double
Public Property Get EmployeeID() As Integer
   EmployeeID = pEmployeeID
End Property
Public Property Let EmployeeID(Value As Integer)
   If Value > 0 Then
       pEmployeeID = Value
   Else
     MsgBox "Employee ID " & Value & " is an incorrect value." & vbCrLf & "Employee ID must be a positive integer"
   End If

End Property
Public Property Get StartDate() As Date
 StartDate = pStartDate
End Property
Public Property Let StartDate(Value As Date)
 pStartDate = Value
End Property
Public Property Get EndDate() As Date
 EndDate = pEndDate
End Property
Public Property Let EndDate(Value As Date)
 pEndDate = Value
End Property
Public Property Get MondayStart() As TimeFrame
 MondayStart = pMonStart
End Property
Public Property Let MondayStart(Value As TimeFrame)
  Set pMonStart = Value
End Property
Public Property Get MondayEnd() As TimeFrame
 MondayEnd = pMonStart
End Property
Public Property Let MondayEnd(Value As TimeFrame)
 Set pMonEnd = Value
End Property
Public Property Get MondayBreak() As Double
  MondayBreak = pMonBreak
End Property

...

Public Property Get ToString() As String
   ToString = "EmployeeID = " & CStr(pEmployeeID) & vbCrLf & _
           "StartDate = " & CStr(pStartDate) & vbCrLf & _
           "EndDate = " & CStr(pEndDate) & vbCrLf & _
           "MondayStart = " & pMonStart.ToString & vbCrLf & _
           "MondayEnd = " & pMonEnd.ToString & vbCrLf & _
           "MondayBreak = " & CStr(pMonBreak) & vbCrLf & _
           "TuesdayStart = " & pTuesStart.ToString & vbCrLf & _
           "TuesdayEnd = " & pTuesEnd.ToString & vbCrLf & _
           "TuesdayBreak = " & CStr(pTuesBreak) & vbCrLf & _
           "WednesdayStart = " & pWedStart.ToString & vbCrLf & _
           "WednesdayEnd = " & pWedEnd.ToString & vbCrLf & _
           "WednesdayBreak = " & CStr(pWedBreak) & vbCrLf & _
           "ThursdayStart = " & pThursStart.ToString & vbCrLf & _
           "ThursdayEnd = " & pThursEnd.ToString & vbCrLf & _
           "ThursdayBreak = " & CStr(pThursBreak) & vbCrLf & _
           "FridayStart = " & pFriStart.ToString & vbCrLf & _
           "FridayEnd = " & pFriEnd.ToString & vbCrLf & _
           "FridayBreak = " & CStr(pFriBreak)
End Property

 __________________________ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:47:00.203

好的。所以我进入了 Class Module TimeSheet 并将所有 Let 属性更改为 Set，如下所示：

```
Public Property Set MondayStart(ByRef Value As TimeFrame)
  Set pMonStart = Value
End Property

Public Property Set MondayEnd(ByRef Value As TimeFrame)
  Set pMonEnd = Value
End Property

Public Property Set TuesdayStart(ByRef Value As TimeFrame)
  Set pTuesStart = Value
End Property

Public Property Set TuesdayEnd(ByRef Value As TimeFrame)
  Set pTuesEnd = Value
End Property

 ... 'and so on 
```

为了防止在分配值时出现另一个“对象未设置”错误消息，我不得不再次使用 Set 关键字：

```
 Set MonStart = New TimeFrame
 MonStart.Initialize = Item.Value
 Set tsheet.MondayStart = MonStart  '<<<Had to use Set here too. Is that normal??? 
```

这正常吗？对我来说，在属性声明和属性主体中使用 Set 关键字似乎是多余的，然后在为属性赋值时也必须使用它！

设置完所有属性并调用子例程 ExportTimeSheetsToDatabase() 后，我仍然在 Debug.println 语句中收到错误消息 Object Not Set on Item.MondayStart 和 Item.MondayEnd。其他属性保存它们的值，如 Item.EmployeeID、Item.StartDate 和 Item.EndDate。但它们不是对象。它们只是原始数据类型。我希望你能看到问题，因为我在这棵树上看不到森林。

艾伦

# oracle - Oracle 更新/插入卡住，DB CPU 100%，并发高，来自客户端的 SQL*Net 等待消息

> ID：14043668
> 
> 赞同：2
> 
> 时间：2012-12-26T17:02:06.313
> 
> 标签：oracle, jdbc, database-administration

我们有一个使用瘦 JDBC 驱动程序在 Weblogic 上针对 Oracle 11g DB 运行的 JavaEE 应用程序。最近我们在生产中发生了一系列事件，其中更新和插入某个表被卡住或花费比正常时间更长的时间，没有明显的原因。这导致应用程序使用越来越多的数据库连接（通常在连接池中处于空闲状态），数据库 CPU 和并发性猛增（如 OEM 中所见），整个数据库陷入停顿。在这些事件中，DBA 找不到插入和更新卡住的任何原因（没有数据库锁）。他们确实看到了很多“**来自客户端的 SQL*Net 等待消息**”事件。

他们的理论是，应用程序（jdbc 客户端）在插入/更新语句期间以某种方式卡住，原因与数据库无关，同时没有确认数据库对这些语句的响应。事实上，应用程序继续发出越来越多的这些语句，占用了越来越多的连接，这是 CPU 和并发性猛增的原因，导致数据库无响应。

我不相信 - 如果所有会话都忙于等待客户，CPU 怎么会这么高？我们无法始终如一地重现这些事件，所以我们真的在这里处于黑暗中......

有没有人见过这样的事情或有任何想法，建议这可能是由什么引起的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:06:33.613

您所描述的是“连接风暴”。配置不当的连接池将通过打开新连接来服务等待请求来“处理”缓慢响应的连接。这些额外的请求给已经承受压力的服务器带来了更大的压力（如果没有压力，初始连接就不会滞后）。这会引发一个糟糕的响应循环，从而产生额外的连接，最终杀死服务器。

您可以通过将数据源的最大容量设置为合理的值来避免连接风暴。“合理”的定义会根据您的服务器的能力而有所不同，但它可能比您想象的要低。最好的建议是将最大容量设置为与初始容量相同的值。

一旦你阻止了连接风暴，你就可以专注于导致最初减速的数据库进程。

* * *

大量`SQL*Net wait message from client`事件表明客户端正在做某事而没有联系数据库。这就是为什么您的 DBA 认为问题出在应用程序上的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T09:30:54.217

我遇到了一个类似的问题，我在这里记录了：[Unkillable Oracle session waiting on "SQL*Net message from client" event](https://stackoverflow.com/q/31606858/521799)。`CLOB`就我而言，问题是由绑定到`CLOB`s 似乎在 Oracle 中引起严重问题的位置的类型绑定变量引起的。以下语句产生与您观察到的相同行为：

```
CREATE TABLE t (
  v INT, 
  s VARCHAR2(400 CHAR)
);

var v_s varchar2(50)
exec :v_s := 'abc'

MERGE INTO t                      
USING (
  SELECT 
    1 v, 
    CAST(:v_s AS CLOB) s 
  FROM DUAL
) s 
ON (t.s = s.s) -- Using a CLOB here causes the bug.
WHEN MATCHED THEN UPDATE SET
  t.v = s.v        
WHEN NOT MATCHED THEN INSERT (v, s) 
VALUES (s.v, s.s); 
```

可能在其他情况下，其他语句也会`MERGE`暴露这种行为，从而产生僵尸会话，因为 Oracle 似乎运行了一些无限循环，从而产生了观察到的 CPU 负载。

# android - 从手机锁恢复不会调用onStart？

> ID：14043670
> 
> 赞同：0
> 
> 时间：2012-12-26T17:02:12.480
> 
> 标签：android

我发现在应用程序启动时执行电话锁定会使我的初始 AsyncTask 失步，因为它在解锁后不会调用 onStart（我将 Activity 附加和分离到任务的位置）。显然，手机锁定模式与使用 Home 或 Back 按钮的任何应用程序都不同，因为在后者中，我的应用程序可以处理它们。似乎锁定/解锁模式不会关闭应用程序，但它也不会让它运行，所以在我看来这是一种非常愚蠢的意外行为，因为我“丢失”了我的 AsyncTask 和我的应用程序没有正确初始化。

我如何在手机解锁上执行一些逻辑，因为解锁/锁定似乎没有调用任何生命周期方法？我是否必须区分锁定开/关和屏幕开/关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:21:06.357

我很确定[这个](https://stackoverflow.com/questions/3446202/android-detect-phone-unlock-event-not-screen-on)问题会告诉你你想知道什么。

基本上你想要做的是创建一个`Broadcast Receiver`监听以下意图：

```
Intent.ACTION_USER_PRESENT 
```

当用户解锁屏幕时，系统会发送意图。[你可以在这里](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)查看它的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:22:51.260

有关生命周期的良好描述，请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)文档，并带有图表。

很可能您的活动因屏幕关闭而被终止以节省资源（电池电量）。正如文档所述，您基本上可以在 Android 想要释放资源的任何时候被杀死。因此，您应该始终将您的活动设计为能够随时停止和重新启动。
我曾经遇到过类似的问题。我的应用程序仅处于横向模式，并且在关闭屏幕时，android 屏幕保护程序获得了控制权（它处于纵向模式），因此发送了一个销毁并重新创建活动的orientationChange。

一个简单的解决方案是声明您将管理自己的屏幕方向更改：

```
<activity ... android:configChanges="orientation" ... > 
```

如果您的活动被声明为仅横向（您无需执行任何操作），这很容易，但如果您的活动可以旋转，则可能会变得更难......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:39:02.507

I found a solution which works for me. Due to Squonks comment I saw that onResume will be executed. I was able to adapt the logic of my app so my app can handle the AsyncTask (attaching/detaching + showing progress dialog + initialization) in onResume now.

# spring - Spring 与 JAXB 有何关系？

> ID：14043671
> 
> 赞同：2
> 
> 时间：2012-12-26T17:02:15.410
> 
> 标签：spring, jaxb, cxf

我正在学习[CXF 框架](http://en.wikipedia.org/wiki/Apache_CXF)，我知道它同时使用[Spring](http://en.wikipedia.org/wiki/Spring_Framework)和[JAXB](http://en.wikipedia.org/wiki/JAXB)。

我的理解是 CXF 将 Spring 用于 IoC 和 AOP，并且它使用 JAXB 作为默认的数据绑定组件。

所以 Spring 使用 XML 来绑定 POJO，而 CXF 也使用 XML (JAXB)。

但是 Spring 是否完全依赖 JAXB？

如果是这样，出于什么目的？

澄清这一点将有助于我更好地理解各个组件之间的关系。框图会更好。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:42:17.267

Spring 不依赖于任何特定的 XML 绑定技术。

开箱即用 Spring 通过几种不同的映射技术支持 XML-to-POJO 编组（以及相反的解编组），其中包括 JAXB。您可以轻松地使用 Castor、XMLBeans、JiBX 和 XStream，或者实现自己的编组器/解组器以使用 Spring 的 OXM 功能。有关详细信息，请参阅[Spring 参考手册的 OXM 章节](http://static.springsource.org/spring-ws/site/reference/html/oxm.html)。

请注意，如果您实际上没有使用 Spring 的 OXM 功能，则不需要指定编组器/解组器实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:11:04.063

我不熟悉 CXF 源代码，但听起来像 Spring 和 JAXB 之间的关系，就像在其中连接的那样，可以说是一臂之力 - 每个模块都有自己的（就像你描述的那样）但每个模块都可以替换为另一个做同样事情并符合通用接口的框架。

看：

[基于组件的开发](http://en.wikipedia.org/wiki/Component-based_software_engineering)

[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)

[接口编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

# html - 为什么该消息没有出现在 Chrome 的手风琴上方？

> ID：14043673
> 
> 赞同：2
> 
> 时间：2012-12-26T17:02:29.780
> 
> 标签：html, twitter-bootstrap

我正在尝试新的 HTML5 验证，当我尝试使用标签`required`内的属性时，消息*This field can't be blank*没有正确显示。当我在 Twitter Bootstrap 手风琴中插入 this 标记并尝试使用 Google Chrome (v. 23) 提交表单时，就会出现问题。`<input>`*`<input>`*

 *对于其他浏览器，消息显示在手风琴上方（我在 Firefox 17 中对其进行了测试），但对于 Chrome，由于手风琴，一半的消息被隐藏。

这个[JSFiddle](http://jsfiddle.net/TdxnT/)显示了这个问题。

我该如何解决这个问题？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:05:32.583

问题是您在元素中`overflow:hidden;`设置了一个属性`div#collapseOne`，因此您只需将其设置为`visible`.

```
#collapseOne {
    overflow:visible;            
} 
```

请参阅[jsfiddle](http://jsfiddle.net/TdxnT/1/)。*

# ios - 在空中更新和发布 3.5？

> ID：14043676
> 
> 赞同：0
> 
> 时间：2012-12-26T17:02:48.993
> 
> 标签：ios, flash, air, publish

我需要发布一个 3.5 的应用程序才能让它在 iPhone 5 上运行。我下载了 de air 3.5 并安装它，我下载了 air 3.5 sdk 文件，我不知道该怎么做，事情是在发布设置 我只有 air 3.2 而不是 air 3.5，这正是我所需要的。有人知道我错过了什么吗？我必须在某个地方或类似的地方复制 sdk 文件吗？谢谢。

![在此处输入图像描述](../Images/f0c9af8b0afed38cee339f6f10036b4c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:05:41.873

感谢 Sunil D。我找不到它。这是我发现用 Flash CS5.5 或 CS6 更新 Air SDK 的解决方案[http://active.tutsplus.com/tutorials/workflow/enable-the-latest-air-sdk-in-flash-professional-cs5-5 /](http://active.tutsplus.com/tutorials/workflow/enable-the-latest-air-sdk-in-flash-professional-cs5-5/)

# java - LogCat 入口含义

> ID：14043677
> 
> 赞同：0
> 
> 时间：2012-12-26T17:02:49.190
> 
> 标签：java, android, logcat, android-logcat

这是在我的 LogCat 中，我不知道它是什么意思。有人可以理解这一点。谢谢！

```
12-26 17:51:04.141: W/dalvikvm(9109): threadid=1: thread exiting with uncaught exception (group=0x40af6300)
12-26 17:51:04.151: E/AndroidRuntime(9109): FATAL EXCEPTION: main
12-26 17:51:04.151: E/AndroidRuntime(9109): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.to_doliste/com.example.to_doliste.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2243)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2278)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread.access$600(ActivityThread.java:142)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1280)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.os.Looper.loop(Looper.java:156)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread.main(ActivityThread.java:5099)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at java.lang.reflect.Method.invoke(Method.java:511)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at dalvik.system.NativeStart.main(Native Method)
12-26 17:51:04.151: E/AndroidRuntime(9109): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ListActivity.onContentChanged(ListActivity.java:250)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:281)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.Activity.setContentView(Activity.java:1897)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at com.example.to_doliste.MainActivity.onCreate(MainActivity.java:17)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.Activity.performCreate(Activity.java:4543)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
12-26 17:51:04.151: E/AndroidRuntime(9109):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2199)
12-26 17:51:04.151: E/AndroidRuntime(9109):     ... 11 more
12-26 17:53:16.211: W/dalvikvm(10189): threadid=1: thread exiting with uncaught exception (group=0x40af6300)
12-26 17:53:16.221: E/AndroidRuntime(10189): FATAL EXCEPTION: main
12-26 17:53:16.221: E/AndroidRuntime(10189): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.to_doliste/com.example.to_doliste.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2243)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2278)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1280)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.os.Looper.loop(Looper.java:156)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread.main(ActivityThread.java:5099)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at java.lang.reflect.Method.invoke(Method.java:511)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at dalvik.system.NativeStart.main(Native Method)
12-26 17:53:16.221: E/AndroidRuntime(10189): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ListActivity.onContentChanged(ListActivity.java:250)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:281)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.Activity.setContentView(Activity.java:1897)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at com.example.to_doliste.MainActivity.onCreate(MainActivity.java:17)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.Activity.performCreate(Activity.java:4543)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
12-26 17:53:16.221: E/AndroidRuntime(10189):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2199)
12-26 17:53:16.221: E/AndroidRuntime(10189):    ... 11 more
12-26 17:56:31.941: W/dalvikvm(12002): threadid=1: thread exiting with uncaught exception (group=0x40af6300)
12-26 17:56:31.951: E/AndroidRuntime(12002): FATAL EXCEPTION: main
12-26 17:56:31.951: E/AndroidRuntime(12002): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.to_doliste/com.example.to_doliste.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2243)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2278)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1280)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.os.Looper.loop(Looper.java:156)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread.main(ActivityThread.java:5099)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at java.lang.reflect.Method.invoke(Method.java:511)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at dalvik.system.NativeStart.main(Native Method)
12-26 17:56:31.951: E/AndroidRuntime(12002): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ListActivity.onContentChanged(ListActivity.java:250)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:281)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.Activity.setContentView(Activity.java:1897)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at com.example.to_doliste.MainActivity.onCreate(MainActivity.java:17)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.Activity.performCreate(Activity.java:4543)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
12-26 17:56:31.951: E/AndroidRuntime(12002):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2199)
12-26 17:56:31.951: E/AndroidRuntime(12002):    ... 11 more
12-26 17:56:33.251: D/Process(12002): killProcess, pid=12002
12-26 17:56:33.251: D/Process(12002): dalvik.system.VMStack.getThreadStackTrace(Native Method)
12-26 17:56:33.251: D/Process(12002): java.lang.Thread.getStackTrace(Thread.java:599)
12-26 17:56:33.251: D/Process(12002): android.os.Process.killProcess(Process.java:813)
12-26 17:56:33.251: D/Process(12002): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:104)
12-26 17:56:33.251: D/Process(12002): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
12-26 17:56:33.251: D/Process(12002): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T17:04:30.633

这里

> 您的内容必须有一个 ID 属性为 'android.R.id.list' 的 ListView 12-26 17:51:04.151: E/AndroidRuntime(9109): at

意味着您必须将您的 ListView id 设置为在 xml 布局中列出：

```
<ListView android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:05:04.433

```
17:56:31.951: E/AndroidRuntime(12002): 
    Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
12-26 17:56:31.951: E/AndroidRuntime(12002): at android.app.ListActivity.onContentChanged(ListActivity.java:250) 12-26 17:56:31.951: E/AndroidRuntime(12002): at 
```

看来您正在尝试使用 ListView 但没有带有 id`list`的条目`xml`。

```
<ListView android:id="@android:id/list"
         ....../> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:07:03.407

通常只需在错误消息中查找“caused by”：

```
Caused by: java.lang.RuntimeException: Your content 
must have a ListView whose id attribute is 'android.R.id.list' 
```

您必须为您的自定义列表视图 xml 布局文件提供预期的列表 ID，以便它可以找到它。

```
android:id="@android:id/list" 
```

# android - 带有 Sencha 的应用程序在 Android 中冻结

> ID：14043678
> 
> 赞同：1
> 
> 时间：2012-12-26T17:02:48.743
> 
> 标签：android, cordova, android-emulator, sencha-touch-2

我使用 Phonegap 为 Android 构建了一个应用程序。我的问题是在模拟器应用程序冻结在“appLoadingIndicator”。我使用这个命令

```
sencha app build testing -d phonegapp/assets/www 
```

使用 Sencha cmd v3.0.0.250。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:54:29.917

这可能是语法问题，例如缺少逗号。我还注意到您正在使用新的 Sencha Cmd。如果您仍然遇到问题，可以查看我的教程：[http ://cclerville.blogspot.com/2013/01/sencha-touch-21-phonegap-220-android_3.html](http://cclerville.blogspot.com/2013/01/sencha-touch-21-phonegap-220-android_3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:02:43.920

确保您在需要加载依赖项的类上使用“需要”配置。

如果您尝试在 Chrome 中（在您的桌面上）运行应用程序，开发者控制台（通常）会在您同步加载依赖类时显示警告。

这是人们经常遇到的绊脚石，因此它可能是也可能不是您的问题的原因。正如@cclerville 指出的那样，它也可能是某种语法错误。

# c - 如何启用 UDP 校验和

> ID：14043680
> 
> 赞同：6
> 
> 时间：2012-12-26T17:02:55.917
> 
> 标签：c, sockets, network-programming, udp, checksum

我正在从事一个涉及 VxWorks 设备和 Linux 机器之间的 UDP 套接字通信的项目。在这个项目中，我想利用 UDP 标头的校验和字段。

似乎在 VxWorks 套接字接口中，`checksum`默认启用了传出 UDP 数据包字段。

但是，对于通常的 Unix 套接字接口，似乎没有任何标志或其他方法可以打开 UDP 套接字来检查传入数据包的校验和并为传出数据包填充它。

对于通常的 Unix 套接字接口，是否存在这样的标志？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:12:18.477

我不是专家，但在这件事上唯一[`man 7 udp`](http://www.kernel.org/doc/man-pages/online/pages/man7/udp.7.html)要说的是它默认启用：

> UDP 生成并检查校验和以捕获传输错误。

它没有提到任何禁用它的方法。

编辑：我懒得去查找当前的内核源代码，但是[这个页面](http://leapster.org/linux/kernel/udp/#udp_recvmsg)建议带有无效校验和的数据包被简单地丢弃（`csum_copy_err`部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-02T22:02:35.390

（我不是专家。以下可能完全错误。）

网络接口（或驱动程序或类似的东西）应该检查传入数据包的校验和。所有位为零的校验和表示“传出接口未生成校验和”。接口必须检查任何其他校验和（包括所有位为 1，也就是校验和字段使用的补码编码中的“负零”），如果检查失败，则必须丢弃数据包。

因此，您*永远不能*禁用对传入数据包的 UDP 校验和*检查*（如果这些数据包提供了校验和）。这只是 UDP 标准的强制性部分。

接收接口可以丢弃没有校验和的数据包，^([1])或者可以将它们传递给应用程序（或者可以让应用程序配置其所需的行为，尽管如果可能的话，我不知道该怎么做）。

您唯一可能能够控制的是发送接口是否在*传出*数据包上*生成*校验和。它将是特定于平台的。我在下面收集了一些方法，它们可能有效，也可能无效；警告讲师。

 *如果您只是采用您平台的默认行为，您将默认生成 UDP 校验和——我会在上面投入资金。

> [1] — [RFC 8085](https://www.rfc-editor.org/rfc/rfc8085#section-3.4)：“允许应用程序选择性地丢弃校验和为零的 UDP 数据报 [ [RFC1122](https://www.rfc-editor.org/rfc/rfc1122#page-78) ]。”

* * *

[这篇 1999 年的 comp.protocols.tcp-ip 帖子](https://groups.google.com/forum/#!topic/comp.protocols.tcp-ip/YXx6cHkihAU)[`ndd`](http://www.softpanorama.org/Net/Solaris/ndd.shtml)表明，在 Solaris 上，您可以通过命令行全局禁用对传出数据包生成 UDP 校验和：

```
ndd -set /dev/udp udp_do_checksum 0 
```

该`ndd`实用程序特定于 Solaris 内核，在 Linux 或 FreeBSD 上不存在。此外，即使[是 Solaris 文档](https://docs.oracle.com/cd/E26505_01/html/E37386/chapter4-57.html#glfbi)也说：

```
udp_do_checksum
  This parameter controls whether UDP calculates the checksum
  on outgoing UDP/IPv4 packets.

Default
  1 (enabled)

When to Change
  Do not change this parameter. 
```

（在 Linux 和 FreeBSD 上，[`/dev/udp`“并不真正存在”；这是 Bash 提供的虚构。](https://unix.stackexchange.com/a/311099)我不知道`/dev/udp`在 Solaris 上是否“真正存在”。）

* * *

[Microsoft 的文档](https://msdn.microsoft.com/en-us/library/windows/desktop/ms738603(v=vs.85).aspx)暗示，在 Windows 上，您可以使用记录的选项以编程方式在每个套接字的基础上禁用 UDP 校验和生成：

```
DWORD trueValue = 1;
int rc = setsockopt(fd, IPPROTO_UDP, UDP_NOCHECKSUM, (const char*)&yes, sizeof yes);
if (rc != 0) { perror("setsockopt"); abort(); } 
```

* * *

[该线程](https://forums.developer.apple.com/thread/71824)意味着在 FreeBSD（例如 Mac OS X）上，您可以使用其他未记录的（但截至 2018 年 1 月）选项以编程方式在每个套接字上禁用校验和生成：

```
int yes = 1;
int rc = setsockopt(sock, IPPROTO_UDP, UDP_NOCKSUM, (void*)&yes, sizeof yes);
if (rc != 0) { perror("setsockopt"); abort(); } 
```

* * *

最后，[这个线程](https://linux-tips.com/t/how-to-disable-udp-checksum-control-in-kernel/362)意味着在 Linux 上，您可以使用其他未记录的（但截至 2018 年 1 月存在）选项以编程方式在每个套接字上禁用校验和生成：

```
int yes = 1;
int rc = setsockopt(sock, SOL_SOCKET, SO_NO_CHECK, (void*)&yes, sizeof yes);
if (rc != 0) { perror("setsockopt"); abort(); } 
```

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-18T09:29:26.887

关于@zneak 的评论，[RFC6936](https://www.rfc-editor.org/rfc/rfc6936.txt)现在允许在某些受限条件下（例如隧道流量）在 IPv6 上使用 UDP 零校验和。Linux 为此定义了`UDP_NO_CHECK6_TX`和`UDP_NO_CHECK6_RX`套接字选项，请参阅[此提交](https://github.com/torvalds/linux/commit/1c19448c9ba6545b80ded18488a64a7f3d8e6998)。*

# perl - Stein 的 Perl 网络编程 - 仍然有用吗？

> ID：14043681
> 
> 赞同：10
> 
> 时间：2012-12-26T17:03:08.340
> 
> 标签：perl, sockets, networking, fork

*Lincoln Stein 的Network Programming with Perl*在 IMO 中是一本很棒的书，但最新版本（实际上是唯一的版本）是 2001 年版权所有，与 Perl 5.6 是同时代的。

我对使用**IO::Socket**和创建健壮的**fork**（有时是**exec**）服务器特别感兴趣。我正在使用 Perl 5.14。

有没有人了解这本书，或者了解 Perl 历史，知道 Perl 或 CPAN 从那时起发生了哪些进步，这可能会使本书中的某些主题过时或不太理想？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T17:23:21.603

我还没有读过整本书，几年前（2 或 3 年）看过它。是的，它在非抽象网络访问方面非常出色。然后，我们遇到了[C10K 问题](http://www.kegel.com/c10k.html)。它产生了一些不同的范例，即由单个（或少数）CPU 内核管理的异步多路复用 I/O 资源。[因此，您可以使用AnyEvent](https://metacpan.org/module/AnyEvent)和/或[Coro](https://metacpan.org/module/Coro)创建非常强大的网络服务器（[请参阅此快速介绍](http://www.slideshare.net/miyagawa/asynchronous-programming-with-anyevent)）。实际上，许多服务器是混合的：它们多路复用外部侦听器并将调用路由到预先分叉的服务器（请参阅[Plack::Loader::Shotgun](https://metacpan.org/module/Plack::Loader::Shotgun)和[Mojolicious 的 hypnotoad](https://metacpan.org/module/Mojo::Server::Hypnotoad)）。

**PS -**请注意，我故意过度简化；不幸的是，我不知道异步 Perl 的全面指南。

# entity-framework - EF5 错误：级联外键 FK_... 其中引用列 X 是标识列。无法创建约束

> ID：14043686
> 
> 赞同：1
> 
> 时间：2012-12-26T17:03:31.670
> 
> 标签：entity-framework, ef-code-first, code-first, entity-framework-5, fluent

我正在开发一个 Entity Framework 5 Code First 项目。现在我无法创建错误：

```
"Cascading foreign key 'FK_dbo.DriverLicense_dbo.Person_PersonId' where the referencing column 'DriverLicense.PersonId' is an identity column.\r\nCould not create constraint 
```

这些是我的实体，为什么我会收到该错误？我不是说 PersonId 是 DriverLicense 实体中的身份。

```
public class DriverLicense
{
    public long DriverLicenseId { get; set; }
    public long LicenseNumber { get; set; }
    public long PersonId { get; set; }
    public virtual Person Person { get; set; }
}

public class DriverLicenseMap : EntityTypeConfiguration<DriverLicense>
{
        public DriverLicenseMap()
        {
            this.HasKey(t => t.DriverLicenseId);

            // Table & Column Mappings
            this.ToTable("DriverLicense");
            this.Property(t => t.DriverLicenseId).HasColumnName("DriverLicenseId");
            this.Property(t => t.LicenseNumber).HasColumnName("LicenseNumber");
            this.Property(t => t.PersonId).HasColumnName("PersonId");

            this.HasRequired(t => t.Person)
                .WithMany(t => t.DriverLicenses)
                .HasForeignKey(d => d.PersonId);

        }
}

public class Person
{
    public Person()
    {
        this.DriverLicenses = new List<DriverLicense>();
    }

    public long PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual ICollection<DriverLicense> DriverLicenses { get; set; }
}

 public class PersonMap : EntityTypeConfiguration<Person>
    {
        public PersonMap()
        {
            // Primary Key
            this.HasKey(t => t.PersonId);

            // Properties
            this.Property(t => t.FirstName)
                .IsRequired()
                .HasMaxLength(50);

            this.Property(t => t.LastName)
                .IsRequired()
                .HasMaxLength(50);

            // Table & Column Mappings
            this.ToTable("Person");
            this.Property(t => t.PersonId).HasColumnName("PersonId");
            this.Property(t => t.FirstName).HasColumnName("FirstName");
            this.Property(t => t.LastName).HasColumnName("LastName");

        } 
```

提前致谢！吉列尔莫。

**编辑：**使用 SQL Profiler 我可以看到：

```
CREATE TABLE [dbo].[DriverLicense] (
    [DriverLicenseId] [bigint] NOT NULL,
    [LicenseNumber] [bigint] NOT NULL,
    [PersonId] [bigint] NOT NULL IDENTITY,
    CONSTRAINT [PK_dbo.DriverLicense] PRIMARY KEY ([DriverLicenseId])
) 
```

**我不明白为什么将 PersonId 创建为 Identity**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:43:30.377

好的，我找到了问题所在。我正在使用迁移，并且有一个未决的模型错误。因此，如果您处于同样的情况，请检查您的待处理迁移！：） 谢谢！吉列尔莫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T06:37:39.993

我也有同样的问题：

您必须将此`public long PersonId { get; set; }`属性更改为`public long? PersonId { get; set; }`

因为当您第一次尝试添加新的 DriverLicense 时，您无法将 DriverLicense.PersonId 分配给任何对象（因为您没有任何要分配的 Person）**，因此**您必须将 PersonId 属性设置为可为空。

**编辑：** [这个链接可以帮助你](https://stackoverflow.com/questions/28034896/when-an-entity-has-more-than-one-0-1n-relationships-to-another-enitity-how-to)

# javascript - 通过jQuery在插件gmap3中添加自动完成输入

> ID：14043694
> 
> 赞同：2
> 
> 时间：2012-12-26T17:03:45.250
> 
> 标签：javascript, jquery, google-maps, jquery-gmap3

我想在插件 gmap3 中添加自动完成输入，单击地址移动标记后，它会放置并获取纬度和经度，但我做不到。我试过：

**演示：http:** [//jsfiddle.net/ezJUm/](http://jsfiddle.net/ezJUm/)

```
<div id="content">
    <input id="searchTextField" type="text">
    <div id="map_canvas" class="line"></div>
    <div id="latlng" class="line">click the map</div>
    <div id="address" class="line">click the map</div>
</div>

$(document).ready(function () {
    // create the map
    var map = $("#map_canvas").gmap3({
        lat: 43.0566,
        lng: -89.4511,
        zoom: 12
    });
    //*********************** Autocomplete *********************************
    var lat = 26.535266981346876,
        lng = 54.02773082256317,
        latlng = new google.maps.LatLng(lat, lng),
        image = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';

    mapG = new google.maps.Map(document.getElementById('map_canvas')),
    marker = new google.maps.Marker({
        position: latlng,
        map: mapG,
        icon: image
    });
    var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input, {
        types: ["geocode"]
    });
    autocomplete.bindTo('bounds', mapG);
    var infowindow = new google.maps.InfoWindow();
    //*********************** Autocomplete *********************************

    // add click handlers
    map.onclickReverseGeocode(function (address) {
        $("#address").html(address);
    });
    map.onclickGetLatLng(function (latlng) {
        $("#latlng").html(latlng[0] + ',' + latlng[1]);
    });
});​ 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:14:33.597

您需要像这样在 autoComplete 对象上设置 place_changed 事件侦听器。[这](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)是一个自动完成的例子。

```
google.maps.event.addListener(autocomplete, 'place_changed', function() {
      infowindow.close();
      marker.setVisible(false);
      input.className = '';
      var place = autocomplete.getPlace();
        console.log(place);
      if (!place.geometry) {
        // Inform the user that the place was not found and return.
        input.className = 'notfound';
        return;
      }

      // If the place has a geometry, then present it on a map.
      if (place.geometry.viewport) {
        mapG.fitBounds(place.geometry.viewport);
      } else {
        mapG.setCenter(place.geometry.location);
        mapG.setZoom(17);  // Why 17? Because it looks good.
      }
      var image = new google.maps.MarkerImage(
          place.icon,
          new google.maps.Size(71, 71),
          new google.maps.Point(0, 0),
          new google.maps.Point(17, 34),
          new google.maps.Size(35, 35));
      marker.setIcon(image);
      marker.setPosition(place.geometry.location);

      var address = '';
      if (place.address_components) {
        address = [
          (place.address_components[0] && place.address_components[0].short_name || ''),
          (place.address_components[1] && place.address_components[1].short_name || ''),
          (place.address_components[2] && place.address_components[2].short_name || '')
        ].join(' ');
      }

      infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
      infowindow.open(mapG, marker);
    }); 
```

我已经更新了 jsFiddle - [http://jsfiddle.net/ezJUm/1/](http://jsfiddle.net/ezJUm/1/)

# java - 为什么 netbeans 不能正确显示波斯字符

> ID：14043696
> 
> 赞同：2
> 
> 时间：2012-12-26T17:03:54.287
> 
> 标签：java, file, netbeans

当我从 java 中的 .csv 文件中读取时

它可以正常工作，

但对于非英语（波斯语）字符，它显示“？”

我在 netbeans.conf 中将 -J-Dfile.encoding=UTF-8 添加到我的 netbeans_default_options

但这还不正确

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:05:22.783

您可能想尝试`UTF-16`而不是`UTF-8`显示波斯字符。

这是 Joel Spolsky关于差异的优秀[博客文章。](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:13:21.130

使用程序员编辑器[JEdit](http://jedit.org)检查编码（可以从 Web 启动）。

阅读

```
BufferedReader in = new BufferedReader(
        new InputStreamReader(new FileInputStream(file), "UTF-8")); 
```

这显式设置了字符编码，比全局系统属性 file.encoding 更好。

或者尝试“ **ISO-639-3** ”而不是“UTF-8”。

# php - 另一个不工作的动态表（搜索引擎）

> ID：14043698
> 
> 赞同：1
> 
> 时间：2012-12-26T17:04:12.123
> 
> 标签：php, mysql, dynamic

您好 php 的另一个问题我不确定为什么它不起作用，但这里是代码：

```
 <?php include 'db.inc.php';function search_results($keywords){$returned_results = array();
$where = "";

$keywords = preg_split('/[\s]+/', $keywords);
$total_keywords = count($keywords);

foreach($keywords as $key=>$keyword){
    $where .="`keywords` LIKE '%$keyword%'";
    if ($key != ($total_keywords - 1 )){
        $where .= " AND ";
    }
}

$results = "SELECT `document_name` ,LEFT(`first_paragraph`,70) as `first_paragraph` FROM `documents` WHERE $where ";
$results_num = ($results = mysql_query($results)) ? mysql_num_rows($results) : 0 ;
if ($results_num == 0){
    return false;
}else {

    while($results_row = mysql_fetch_assoc($results)){
    $returned_results[] = array(
                'title' => $results_row['document_name'],
                'description' => $results_row['first_paragraph']
    );
}

return $returned_results;

}
}

?> 
```

我目前正在尝试使用 PDO 来实现它，但我不确定如何.. 我不确定这是否是问题，但我没有从 mysql Thx 得到任何东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:40:48.137

现在不要将整个 WHERE 条件放在单引号中，您正在执行以下操作：

```
SELECT document_name ,LEFT(first_paragraph,70) as first_paragraph FROM documents WHERE '`keywords` LIKE '%keyword%'' 
```

它应该只是：

```
SELECT document_name ,LEFT(first_paragraph,70) as first_paragraph FROM documents WHERE `keywords` LIKE '%keyword%' 
```

您可以通过一些基本的调试轻松发现这一点。

*   总是编写代码来捕获和记录数据库错误（你没有这样的代码）
*   如果数据库错误没有告诉您您想要什么，请记录您尝试运行的查询并尝试直接在数据库上运行它。

最后，我在这里根本看不到任何 PDO，您正在使用`mysql_*`已弃用且不应使用的 functoins。

# solr - 有没有办法将 js 库文件导入我的 DIH 脚本？

> ID：14043708
> 
> 赞同：1
> 
> 时间：2012-12-26T17:04:52.083
> 
> 标签：solr, search-engine, solrnet, dataimporthandler, dih

我正在使用 DIH 导入一些数据，我想使用脚本转换器在索引之前执行一些转换。由于转换有点复杂，我正在使用外部 js 库。

我的问题是：有没有办法将 js 库文件导入到我的 DIH 脚本中？

像：

```
<script src="lib/proj4js.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:53:11.713

不幸的是，似乎没有办法将 js 文件导入 DIH 数据 conf 文件。这是我从 solr 用户的邮件列表中得到的答案：

[solr 用户邮件列表](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201212.mbox/browser)

似乎脚本转换器代码中没有处理脚本导入的地方。

:(

# ruby - ruby 1.9.3 安装在 mac os 10.8.2 上

> ID：14043710
> 
> 赞同：-2
> 
> 时间：2012-12-26T17:05:06.700
> 
> 标签：ruby, macos

**我正在尝试安装 ruby​​ 1.9.3，并且此代码继续运行。我已经安装了 libksba，但不能通过请帮帮我**

```
 MarioVMtz$ rvm install ruby-1.9.3-p362

  Notes for Mac OS X 10.8.2, Xcode 4.5.2.

For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26"
For IronRuby: Install Mono >= 2.6
For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba'
For Opal: Install Nodejs with NPM. See http://nodejs.org/download/

To use an RVM installed Ruby as default, instead of the system ruby:

    rvm install 1.8.7 # installs patch 357: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
    rvm alias create default 1.8.7

And reopen your terminal windows.

Xcode and gcc:

Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc. Instead they ship with llvm-gcc (to which gcc is a symlink) and clang, neither of which are supported for building Ruby. Xcode 4.1 was the last version to ship gcc, which was /usr/bin/gcc-4.2.
: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:32:38.413

我终于在（新的）Mac OsX 10.8.2 上进行了安装。主要问题是没有gcc就无法编译ruby，甚至系统中确实存在gcc4.2。

首先你必须检查你的 gcc 版本

```
$ gcc --version
    i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
    Copyright (C) 2007 Free Software Foundation, Inc.
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

你也应该得到最新的 rvm

```
$ rvm get latest 
```

现在，将 gcc 编译器指向 rvm，以便 rvm 可以使用它来编译 ruby

```
$ CC=/usr/bin/gcc rvm install 1.9.3 
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p374.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Fetching yaml-0.1.4.tar.gz to /Users/bubuzzz/.rvm/archives
Extracting yaml to /Users/bubuzzz/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/bubuzzz/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/bubuzzz/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/bubuzzz/.rvm/usr
Building 'ruby-1.9.3-p374' using clang - but it's not (fully) supported, expect errors.
Installing Ruby from source to: /Users/bubuzzz/.rvm/rubies/ruby-1.9.3-p374, this may take a while depending on your cpu(s)...
ruby-1.9.3-p374 - #downloading ruby-1.9.3-p374, this may take a while depending on your connection...
ruby-1.9.3-p374 - #extracted to /Users/bubuzzz/.rvm/src/ruby-1.9.3-p374 (already extracted)
ruby-1.9.3-p374 - #configuring
ruby-1.9.3-p374 - #compiling
ruby-1.9.3-p374 - #installing 
Retrieving rubygems-1.8.25
######################################################################## 100.0%
Extracting rubygems-1.8.25 ...
Removing old Rubygems files...
Installing rubygems-1.8.25 for ruby-1.9.3-p374 ...
Installation of rubygems completed successfully.
Saving wrappers to '/Users/bubuzzz/.rvm/bin'.
ruby-1.9.3-p374 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p374 - #importing default gemsets, this may take time ...
Install of ruby-1.9.3-p374 - #complete 
Ruby 'ruby-1.9.3-p374' was built using clang - but it's not (fully) supported, expect errors. 
```

安装结束时有一个小问题（警告消息），但至少，ruby 现在可以工作了

```
$ ruby --version
ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-darwin12.2.1] 
```

干杯

# java - JNLP PersistenceService 的安全性

> ID：14043712
> 
> 赞同：3
> 
> 时间：2012-12-26T17:05:28.697
> 
> 标签：java, jnlp

我正在开发一个嵌入在浏览器中的 JavaFX 应用程序，我想使用作为[JNLP](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/examples.html#PersistenceService)一部分的 PersistenceService 来存储应用程序设置。

之前没用过PersistenceService，有几个关于PersistenceService的问题：

(a) 它是否以任何方式加密或保护通过它存储的数据？

(b) 使用 Persistence Service 存储刷新令牌是否合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:23:40.333

不，它不会自动加密。如果您要在那里存储机密数据，您应该自己加密它（显然，使用仅存储在服务器端的密钥。）

# objective-c - 目标c编译器错误

> ID：14043714
> 
> 赞同：0
> 
> 时间：2012-12-26T17:05:45.873
> 
> 标签：objective-c, compilation

我正在尝试编译我的项目，但该过程不断失败并出现以下错误：

```
ld: duplicate symbol _OBJC_CLASS_$_house_regions in /Users/user/Library/Developer/Xcode/DerivedData/apptitle-alexsszihsvwirciwtciskwavrbg/Build/Intermediates/apptitle.build/Debug-iphoneos/apptitle.build/Objects-normal/armv7/munro_regions-77CBC76A.o and /Users/user/Library/Developer/Xcode/DerivedData/apptitle-alexsszihsvwirciwtciskwavrbg/Build/Intermediates/apptitle.build/Debug-iphoneos/apptitle.build/Objects-normal/armv7/house_regions-77CBC76A.o for architecture armv7
Command /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang failed with exit code 1 
```

我查看了我的**house_regions.m**和**.h**文件以查看是否有任何内容，但我不确定我在寻找什么`_OBJC_CLASS`？

我是否需要为此提供更多信息才能对人们有意义？我真的不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:10:22.907

好像是说您在文件“munro_regions”和文件“house_regions”中定义了一个名为“House_Regions”的类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:12:56.800

重复的符号意味着存在双重包含。没有看到代码我无法猜测出什么问题。
也许你使用了 include 指令而不是 import。所以该文件被包含了不止一次，它会找到重复的定义。

# python - Python：如何检查字符串的编码并在不同的地方插入空格？

> ID：14043715
> 
> 赞同：1
> 
> 时间：2012-12-26T17:05:53.447
> 
> 标签：python, string, unicode, encoding, ascii

每当我看到编码差异时，如何遍历字符串并插入空格？例如，输入：

`Bar bar black sheep就是其中 famous 的一家club`

应该产生这个输出：

`Bar bar black sheep 就是其中 famous 的一家 club`

我尝试了以下方法，但有没有更简单的方法来执行以下操作？

```
# -*- coding: utf8 -*-
sentence = 'Bar bar black sheep就是其中 famous 的一家club'

currIsAscii = None
prevIsAscii = None
newsentence = ""

for i in sentence:
  try:
    i.decode('ascii')
    currIsAscii = True
  except:
    currIsAscii = False
  if prevIsAscii != currIsAscii:
    newsentence+=" "
    newsentence+=i
  else:
    newsentence+=i
  prevIsAscii = currIsAscii

  while "  " in newsentence:
    newsentence = newsentence.replace("  ", " ")

print newsentence.strip() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:22:15.093

[这](http://youtu.be/sgHbC6udIqc)是 Ned Batchelder 关于所有这些编码优点的相当不错的 pycon 演讲，它对我很有帮助，我希望它也会对你有用。

# python - 如何检测哪些快捷方式映射到 Vim 中的特定命令？

> ID：14043719
> 
> 赞同：2
> 
> 时间：2012-12-26T17:06:17.747
> 
> 标签：python, vim, plugins

简而言之，我想在 Vim 插件中提供一个帮助窗口，它可以检测用户在其 .vimrc 中映射到插件命令的快捷方式。

有没有办法查看用户可能映射或未映射到插件命令的快捷方式？

（注意，我**不是**在寻找一种方法来查看特定快捷方式将执行什么命令，这是一个很容易找到的常见问题解答）。

例如，在用户的 .vimrc 中，他们可以添加如下一行：

```
map <leader>1 :MyCoolPluginCommand<cr> 
```

在我的插件界面中，我想显示一个快速帮助窗口，该窗口显示一个小抄，例如

```
"Cool Command 1: <leader>1" 
```

我唯一的想法是尝试解析他们的 vimrc 并使用一组复杂的正则表达式来获取字符串值。有更好的办法吗？谢谢！

**[编辑]**该插件调用了一个 python 脚本，所以我也用 python 标记了这个问题，以防万一解决方案成为可能。（使用`import vim`所以我可以 eval() 东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:10:28.133

`:map`为您提供所有映射的列表；它应该比 .vimrc 更容易解析。

它还将显示来自其他地方的映射（例如系统范围或命令行）。

# graphics - 实施 Schlick 近似的问题

> ID：14043720
> 
> 赞同：1
> 
> 时间：2012-12-26T17:06:21.700
> 
> 标签：graphics, 3d, rendering, raytracing, fresnel

因此，我正在为我正在构建的光线追踪器创建折射玻璃球体，并尝试根据本网站另一位用户的建议实现 Schlick 的菲涅尔折射近似值，以使我的玻璃看起来更逼真。但是在实施之后，我的玻璃看起来仍然很平淡。除了有一些镜面反射外，外观几乎没有任何区别，但它看起来有点像我人为地将镜面球体与折射球体组合在一起。我希望堆栈溢出有一种简单的方法来上传图片，这样我就可以告诉你我的意思。

我在下面发布了我的代码，以向您展示我实现 Schlick 近似的部分。在计算出近似值后，我进行了两次递归调用来对场景进行光线追踪：一次用于反射光线，一次用于折射光线。

```
 if (hit->mat->IsRefractive())
    {    

        temp.Refract(hit, total2);
        total2++;

        float Ro = powf(((1.8-1.0)/(1.8+1.0)),2.0f); //Refractive index is 1.8
        STVector3 V = myray.GetD()/myray.GetD().Length(); //Normalized view vector
        STVector3 L = AllLights[0]->GetDirection(hit->point); // Light vector
        L = L/L.Length(); //Normalize light vector
        STVector3 H = (V+L);
        H = H/H.Length();
        float costheta = STVector3::Dot(H, V);
        float F = Ro + (1.0f - Ro)*powf((1.0f-costheta), 5);
        STColor3f Krf = STColor3f(F, F, F);
        STColor3f Kr2 = STColor3f(1.0-F, 1.0-F, 1.0-F);
        Ray temp2(myray.GetE(), myray.GetEnd());
        temp2.Reflect(hit);
        result += Krf*RayTrace(temp2, total, total2);
        result += Kr2*RayTrace(temp, total, total2);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-10T09:47:52.217

这就是问题所在： float costheta = STVector3::Dot(H, V); 要使用 Schlick 近似计算从玻璃中重新出现的光量，您需要使用折射角而不是入射角。当光线进入玻璃时，使用入射角。

# android - 使用多个 JSON 数组解析 JSON

> ID：14043721
> 
> 赞同：0
> 
> 时间：2012-12-26T17:06:21.850
> 
> 标签：android, json

当有多个数组时，我无法解析 JSON。这是 JSON 的一个示例：

```
{
   "topics":[
      {
         "posts":[
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Topic #1",
               "contents":"Hello!"
            },
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Reply #1",
               "contents":"Hello!"
            },
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Reply #2",
               "contents":"Hello!"
            }
         ]
      },
      {
         "posts":[
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Topic #2",
               "contents":"Hello!"
            },
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Reply #1",
               "contents":"Hello!"
            },
            {
               "date":"01/01/01 01:01",
               "user":"Example",
               "subject":"Example Reply #2",
               "contents":"Hello!"
            }
         ]
      }
   ]
} 
```

在每个`posts`数组中，第一个是主题本身，然后是回复，回复的数量各不相同，这只是一个示例。

我要做的是从`user`主帖中获取我想忽略的回复。`subject``contents`

在查看了一些教程后，我到目前为止所尝试的是：

```
try {
    JSONArray threads = jo.getJSONArray(THREADS_TAG); // jo is a JSONObject parameter.

    for (int i = 0; i < threads.length(); i++) {
        JSONObject c = threads.getJSONObject(i);
        JSONObject post = c.getJSONObject(POSTS_TAG);

        Log.i(TAG, "Name: " + post.getString(NAME_TAG));
    }
    } catch (JSONException e) {
        Log.e(TAG, "Exception:");
        e.printStackTrace();
} 
```

但是我遇到了这个问题，我遇到了一个例外：

> org.json.JSONArray 类型的帖子无法转换为 JSONObject

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:13:54.490

你可以做这样的事情

```
try {
    JSONArray threads = jo.getJSONArray("topics");

    for (int i = 0; i < threads.length(); i++) {
        JSONArray posts = threads.getJSONObject(0).getJSONArray("posts");
        user[i]=posts.getJSONObject(0).getString("user");
        subject[i]=posts.getJSONObject(0).getString("subject");
        contents[i]=posts.getJSONObject(0).getString("contents");
    }
    } catch (JSONException e) {
        Log.e(TAG, "Exception:");
        e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:13:39.057

将 JsonArray 解析更改为：

```
 for (int i = 0; i < threads.length(); i++) {

        JSONObject cjsontopic = threads.getJSONObject(i);
        JSONArray jsonarrayposts=cjsontopic.getJSONArray("posts");

        for (int j = 0; j < jsonarrayposts.length(); j++) {
                JSONObject cjsontopic = jsonarrayposts.getJSONObject(j);
        String strpost = cjsontopic.getString(POSTS_TAG);

        String struser = cjsontopic.getString("user");
        String strsubject = cjsontopic.getString("subject");
        String strcontents = cjsontopic.getString("contents");
        //... get other elemets
        Log.i(TAG, "Name: " +strpost);
     }

   } 
```

目前您正在尝试在 JsonObject 中获取字符串，您的 Json 格式就像`JsonObject-->JsonArray-->JsonObject-->JsonArray-->JsonObject-->getString`

# ruby-on-rails - 如何列出 Rails 3 应用程序中所有定义的环境？

> ID：14043723
> 
> 赞同：11
> 
> 时间：2012-12-26T17:06:29.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我想知道是否有一种方法可以列出 Rails 应用程序中所有已定义的环境。

例如，如果一个应用程序有 4 个已定义的环境（生产、登台、开发、测试），我想获得以下数组

```
 ["production", "staging", "development", "test"] 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T18:12:15.453

我不确定您是否可以通过某些 Rails API 获取已定义环境的列表。环境文件是[根据当前环境动态](https://github.com/rails/rails/blob/a05f3e5f96f7a8aa55483d91becdbe49b81833fd/railties/lib/rails/engine/configuration.rb#L55)加载的。因此，如前所述，您可以将`config/environments`任何`.rb`文件的目录通配到目录中。

```
Dir.glob("./config/environments/*.rb").map { |filename| File.basename(filename, ".rb") } 
```

如果您想获取 中`database`定义的所有环境的列表`database.yml`，您可以从以下位置获取列表：

```
ActiveRecord::Base.configurations.to_h.keys 
```

假设您实际上正在使用 AR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:42:44.943

尝试这个

```
Env_path = "#{RAILS_ROOT}/config/environments"
all_env = Dir.entries(Env_path) - ['.','..']
environments = []
all_env.each{|env| environments << env.gsub(".rb", '')} 
print environments 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:20:36.897

在 Rails 3 中，您可以执行以下操作作为`Rails.root`返回[Pathname](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html)对象

```
Dir[Rails.root.join('config', 'environments', '*.rb')].map { |fname| File.basename(fname, '.*') } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-20T15:02:55.223

干得好：

```
environments = Dir.entries(Rails.root.join("config","environments").to_s).grep(/\.rb$/).map { |fname| fname.chomp!(".rb") } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T18:07:44.473

扫描 .rb 的配置/环境。作为想法。

# signalr - SignalR 在 chrome 上执行时需要很长时间

> ID：14043726
> 
> 赞同：2
> 
> 时间：2012-12-26T17:06:45.060
> 
> 标签：signalr

我使用[SignalR](http://signalr.net/)开发了一个简单的 Web 应用程序，只是为了了解如何使用它。我使用的课程::

```
public class HealthCheck : Hub
{
    public static List<string> messages = new List<string>();
    public void GetServiceState()
    {
        Clients.updateMessages(messages);
    }
    public void UpdateServiceState()
    {
        messages.Add(DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss"));            
        Clients.updateMessages(messages);
    }
} 
```

然后我使用的网页::

```
<script type="text/javascript">
    $(function () {
        // creates a proxy to the health check hub
        var healthCheckHub = $.connection.healthCheck;
        // handles the callback sent from the server
        healthCheckHub.updateMessages = function (data) {                
            $("li").remove();
            $.each(data, function () {
                $('#messages').append('<li>' + this + '</li>');
            });
        };
        $("#trigger").click(function () {
            healthCheckHub.updateServiceState();
        });
        // Start the connection and request current state
        $.connection.hub.start(function () {
            healthCheckHub.getServiceState();
        });
    });
</script>
<ul id="messages">
</ul>
<button type="button" id="trigger">
    Send request</button> 
```

我所有的问题是，当我单击按钮时，大约需要 40 秒或 1 分钟才能看到结果......

在 FF 或 IE9 上，我很快就能得到结果。

我的代码或 signalR 或浏览器中的问题也是如此。我正在使用 SignalR V 0.5.3

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:37:40.700

最后我发现了问题...

我在 chrome 上出现问题的根源是我的防病毒软件。

我正在使用 AVG Internet Security 2013。我需要做的就是禁用“在线防护”。

有关详细信息，我在这里找到了解决方案 :: [Connect Pending in Chrome](https://github.com/SignalR/SignalR/issues/266)

# javascript - 自动调整 textarea 的大小是颠簸的 + 高亮括号

> ID：14043727
> 
> 赞同：0
> 
> 时间：2012-12-26T17:06:46.850
> 
> 标签：javascript, jquery, textarea, syntax-highlighting, parentheses

我正在尝试创建一个简单的文本区域，它将根据文本进行扩展。我还想语法高亮括号。这一切都运作*良好*，但并不完美。我正在使用隐藏`<pre>`在背景中的内容来执行此操作，其中包含正确调整区域大小所需的所有值。隐藏的`<pre>`也包含我括号的所有颜色。

首先，textarea 的大小调整是颠簸的。出于某种原因，当您按 Enter 时，文本会跳起来。很容易复制。只需输入类似的内容

```
test
test 
```

然后回车，你就会明白我的意思了。

其次，突出括号的问题。如果我插入一些相当大`)))))))))))))))))))(((((((((((((((((((((((((((((((((((((((((((((`的东西，例如：颜色会变得一团糟。我不知道为什么。

重现错误的更疯狂的东西是

```
 )))))))))))))))))))((((((((((((((((((((((((((((((((((((((((((((())))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))) 
```

任何帮助表示赞赏，一个问题或另一个！

这是带有代码的小提琴的链接：http: [//jsfiddle.net/Axvgf/41/](http://jsfiddle.net/Axvgf/41/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:54:06.283

如果括号不匹配，则不应计算深度。例如

```
)))(()) 
```

深度应该是，

```
undefined, undefined, undefined, 1, 2, 2, 1 
```

或者

```
0, 0, 0, 1, 2, 2, 1 
```

只需将不匹配的括号涂成红色，并将匹配的括号按其级别着色。

* * *

当你按下回车键时，文本会跳起来，因为你忽略了文本底部的空行。你也应该增加它的高度。

**css**

```
.defaultEm:{
  font-size:1em;
  position:absolute;
  line-height:1;
  padding:0;
  visibility:hidden
} 
```

**脚本**

```
function getDefaultFontSize(pa){
     pa= pa || document.body;
     var who= document.createElement('span');
     who.className= 'defaultEm';
     who.appendChild(document.createTextNode('M'));
     pa.appendChild(who);
     var fs= [who.offsetWidth, who.offsetHeight];
     pa.removeChild(who);
     return fs;
} 
```

和

```
var newHeight = $(newId + " pre").height() + getDefaultFontSize()[1]; //adding a height of line 
```

固定高度：http: [//jsfiddle.net/ACF8e/](http://jsfiddle.net/ACF8e/)

# javascript - 将用户脚本从 Firefox/Chrome 转换为 Internet Explorer 9？

> ID：14043732
> 
> 赞同：-1
> 
> 时间：2012-12-26T17:07:11.000
> 
> 标签：javascript, internet-explorer, internet-explorer-9, userscripts, document.evaluate

我是一名非计算机科学或编程专业的学生，​​但我一直在为我的父母寻找一个脚本，他们是外国人并且不懂互联网术语。

我在 userscripts.org 上找到了下面的脚本（全部归功于作者），它就像一个魅力。但是，我的父母太固执，无法从 IE9 切换到 Chrome 或 Firefox，所以我下载了 IE7Pro 并在那里安装了脚本。

这里的问题是安装在 IE9 上的用户脚本似乎根本不起作用，我试图找出原因。Chrome/Firefox 与 Internet Explorer 的 javascript 是否存在基本差异？

我该如何解决这些问题以使其在 IE 中工作？我只上过入门的 C 编程课程，在这个领域几乎没有经验，所以如果有人能简单地向我解释一下，那就太好了。

这是供参考的代码，如果有人可以指出它在哪里/为什么不起作用，那将是很大的帮助。它不会太长，它会为我节省无数小时来学习一些我并不真正需要学习的东西。太感谢了。

```
var words = {
    ///////////////////////////////////////////////////////
    // Syntax: 'Search word' : 'Replace word',
    "your a": "you're a",
    "im*o": "in my honest opinion",
    ///////////////////////////////////////////////////////
    "": ""
};

//////////////////////////////////////////////////////////////////////////////
// This is where the real code is
// Don't edit below this
//////////////////////////////////////////////////////////////////////////////

// prepareRegex by JoeSimmons
// Used to take a string and ready it for use in new RegExp()
String.prototype.prepareRegex = function () {
    return this.replace(/([\[\]\^\&\$\.\(\)\?\/\\\+\{\}\|])/g, "\\$1");
};

// Function to decide whether a parent tag will have its text replaced or not
function isOkTag (tag) {
    return (
        new RegExp (
            "(," + tag + ",) | (," + tag + "$)",
            "g"
        ).test (",pre,blockquote,code,input,button,textarea")
    ) == false;
}

// Convert the "words" JSON object to an Array
var regexs          = new Array(),
    replacements    = new Array();

for (var word in words) {
    if (word != "") {
        regexs.push (new RegExp (word.prepareRegex ().replace (/(\\)?\*/g, function (e) {
            return ((e !== "\\*") ? "[^ ]*" : "*");
        } ), "gi"));
        replacements.push (words[word]);
    }
}

// Do the replacement
var texts = document.evaluate (
        ".//text()[normalize-space(.)!='']", document.body, null, 6, null
    ),
    text = "",
    len = regexs.length;

for (var i = 0, l = texts.snapshotLength;  (this_text = texts.snapshotItem(i));  i++) {
    if (isOkTag (this_text.parentNode.tagName)  &&  (text = this_text.textContent) ) {
        for (var x = 0;  x < len;  x++) {
            text = this_text.textContent = text.replace(regexs[x], replacements[x]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:31:15.870

对 Internet Explorer 的用户脚本支持参差不齐，而且很快就会过时。也就是说，[有些人报告说让*IE7Pro*与 IE9 一起工作取得了一些成功。](https://superuser.com/a/347894/41023)

但是 IE javascript 和 Chrome、Firefox 等的 javascript 可能有很大的不同。[***在iescripts.org***](http://www.iescripts.org/help/index.html)
[**的教程中有一个完整的部分，关于将用户脚本移植到 IE （特别是第 5 节）。**](http://www.iescripts.org/help/index.html)

 *阅读该教程并按照列出的指南诚实地尝试移植代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:19:40.443

IE 不支持[document.evaluate 。](https://stackoverflow.com/questions/1934019/javascript-document-evaluate-problem)不知道脚本的作用，因此为您的人安装真正的浏览器可能会更容易。

也许[jQuery](http://api.jquery.com/text/)可以帮助你。*

# javascript - 如何使用切换按钮？

> ID：14043733
> 
> 赞同：0
> 
> 时间：2012-12-26T17:07:31.923
> 
> 标签：javascript, jquery, html, css, arduino

我正在开发一个使用以太网屏蔽的 Arduino 项目。Adruino 连接到我的笔记本电脑（服务器）并读取一个[PHP](http://en.wikipedia.org/wiki/PHP)文件，告诉它打开或关闭继电器。

用户界面是一个 HTML 页面。提交表单的值打开和关闭。这些值被发送到处理程序页面进行处理，以便 Arduino 可以读取它。

我想使用 CSS/JavaScript 样式的切换按钮来替换看起来丑陋的提交按钮。

[http://proto.io/freebies/onoff/](http://proto.io/freebies/onoff/)是我想使用的按钮。如何提取切换状态的值并在我的 HTML 页面上实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:28:04.273

您需要为切换按钮单击创建一个 JavaScript [Ajax事件处理程序。](http://en.wikipedia.org/wiki/Ajax_%28programming%29)Ajax 请求应该转到[PHP](http://en.wikipedia.org/wiki/PHP)页面，然后该页面将切换/设置按钮状态。您需要某种方式来存储按钮的状态，也许只是一个文件？不需要太复杂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:21:37.170

好吧，使用 JavaScript 将需要您使用我目前不熟悉的 Ajax。我还建议使用写入文本文件而不是使用 Arduino 的[PHP](http://en.wikipedia.org/wiki/PHP)文件。试图保护，是否不能像使用 PHP API 的任何服务器一样向 Arduino 发送请求？

```
<?php
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://192.168.0.5');//depending on your arduino's address
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST['on/off']);
    //You may want to validate your variables.
?> 
```

但我不确定 Arduino 是否可以读取发送变量。如果它有效，如果我是对的，变量应该出现在序列中吗？

### 更多网站信息。

使用表格是您的最佳选择。要使用切换，您可以使用 JavaScript 代码发布表单 onClick。

```
<form name="toggleForm" action="poster.php" method="POST"> <!-- Post method to get your variables. poster.php will be the script above.-->
    <input id="on" name="on/off" onClick="send()" value="on" type="radio"/>
    <input id="off" name="on/off" onClick="send()" value="off" type="radio"/>
</form> 
```

javascript提交表单onClick：

```
<script>
    function send(){
        document.toggleForm.submit();
    }
</script> 
```

CSS使它看起来很漂亮：

```
<style>
    #on{background:#00FFFF;content:'On';}
    #off{background:#00FFFF;content:'Off';}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:21:43.350

**Xocoatzin**的解决方案是好的。但如果你喜欢**纯 CSS**解决方案，这里是[DEMO](http://jsbin.com/oqitor/1/edit)。

有一个隐藏`input`类型`checkbox`：

```
<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="onoffswitch1" checked=""> 
```

它可用于获取服务器端的值以及其他脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:17:19.557

1 **Store the status of your system somehow**

You can use a database, a file, a service for this.

2 **The Arduino should connect to your server via a [PHP](http://en.wikipedia.org/wiki/PHP) script**

This script is returns the status of the system to whatever value is set

3 **Create the user interface**

This can be another PHP script. It should display your button.

4 **Use jQuery to capture the click event.**

Then fire an [Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29) call to the server and change the status of the system, the server should return the new status, use `$.ajax` success callback function to check for the new status and update your user interface (you have to do this again in case the status could not be persisted you prevent your UI to go out of sync)

# blackberry-10 - 如何从黑莓10级联中的复选框选定项目中获取值..？

> ID：14043735
> 
> 赞同：2
> 
> 时间：2012-12-26T17:07:37.700
> 
> 标签：blackberry-10, blackberry-cascades

我有一个带有复选框的列表视图。我想在列表视图中获取所选项目的值。我怎样才能实现上述..？

我已经发布了下面的截图：

![截屏](../Images/885c1ee06090d75f1f262603cc3fcacc.png)

这是我尝试过的：

// 列表视图声明及其元素：

```
ListView {
                verticalAlignment: VerticalAlignment.Center
                horizontalAlignment: HorizontalAlignment.Center
                layout: FlowListLayout {
                }
                dataModel: grouplistdatamodel
                listItemComponents: [

                    ListItemComponent {
                        type: "item"
                        Container {
                            Container {
                                layout: StackLayout {
                                    orientation: LayoutOrientation.TopToBottom
                                }
                                verticalAlignment: VerticalAlignment.Center
                                horizontalAlignment: HorizontalAlignment.Center
                                preferredWidth: 768
                                Container {
                                    verticalAlignment: VerticalAlignment.Center
                                    layout: StackLayout {
                                        orientation: LayoutOrientation.LeftToRight
                                    }
                                    CheckBox {
                                        verticalAlignment: VerticalAlignment.Center
                                    id:checkboxvalues
                                  text: ListItemData.firstname
                                   onCheckedChanged: {

                                   }

                                    }

                                }
                            }
                            Divider {
                                horizontalAlignment: HorizontalAlignment.Fill
                            }
                        }
                    }
                ]
                onTriggered: {
                _test.showToast(userid);
                }
                onCreationCompleted: {
                    group_DataSource.load();
                }
            } 
```

请帮我解决这个问题。提前致谢..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:49:08.327

我不确定您到底想做什么，但这是我如何存储用户检查的所有数据的方式。

开`onCheckedChanged`：

```
ListView {
    ...
    listItemComponents: [
        ...
        onCheckedChanged: {
            ListItem.view.checkedDataChanged(ListItemData.firstname, checked);
        }
        ...
    ]
    function checkedDataChanged(data, isChecked) {
        controller.checkedDataChanged(data, isChecked);
    }
}
... 
```

在列表控制器的 C++ 类中定义的`checkedDataChanged`位置。`Q_INVOKABLE`

然后，您可以管理`QList`例如轻松选择的数据。

希望这可以帮助 ！

# git - 创建后看不到新分支

> ID：14043740
> 
> 赞同：1
> 
> 时间：2012-12-26T17:08:06.010
> 
> 标签：git, svn, git-svn

我创建了一个新分支并使用浏览器检查它是否已创建，但我没有看到它。

```
$ git svn branch -n -m "Students line" student_line --destination branches
Copying https://<my_site>/svn at r294 to https://<my_site>/svn/branches/student_line... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T18:33:16.230

请注意，`-n`开关是 的同义词`--dry-run`：

> **`-n`**
> **`--dry-run`**
> 
> 这可以与 dcommit、rebase、branch 和 tag 命令一起使用。
> 
> 对于 dcommit，打印出一系列 git 参数，这些参数将显示哪些差异将提交给 SVN。
> 
> 对于 rebase，显示与当前分支关联的上游 svn 存储库关联的本地分支以及将从中获取的 svn 存储库的 URL。
> 
> 对于分支和标签，显示在创建分支或标签时将用于复制的 url。

删除`-n`并真正做到这一点。

一般来说，要与 Subversion 同步，请确保您有一个干净的分支，然后通过运行两个命令来更新 git 的视图：

```
$ git svn fetch
$ git svn rebase 
```

# refresh - 如何只刷新页面的一侧

> ID：14043741
> 
> 赞同：1
> 
> 时间：2012-12-26T17:08:19.103
> 
> 标签：refresh

有关示例，请参阅[http://myownmealplanner.com/mealplans/add/5](http://myownmealplanner.com/mealplans/add/5)如果您将餐块拖到页面右侧，那么在您单击[返回餐块列表](/mealplans/add)后它应该会停留在那里，但当然它不是因为整个页面都被刷新了。我尝试为膳食计划图块添加一个锚点（如返回顶部按钮），但整个页面仍然被刷新。我想不出用 jquery、javascript 或 php 来做这件事的任何方法。有任何想法吗？您应该能够从 500 卡路里列表中添加图块，然后例如添加 300 卡路里列表。现在我只有 500 卡路里的瓷砖，但你可以看到它应该如何工作。这是用 cakephp 框架制作的，但它与普通网站基本相同。

如果您从[http://myownmealplanner.com/mealplans/add/5](http://myownmealplanner.com/mealplans/add/5)开始并单击“100 cal tile” div，您会收到 ajax 消息“请求成功的 MEAL TILES”，因为

```
<div id="clickMe">100 cal tiles</div>
<div id="result"></div>
<script type="text/javascript">
$("#clickMe").click(function() {
  $('#result').load('test');
});
</script> 
```

但是，Cakephp 的问题在于它似乎只有一个 ajax.ctp 文件用于所有负载，所以我不能制作 8 条单独的消息，每个瓦片集合一个。例如，如何在不使用与其他文件相同的 ajax.ctp 文件的情况下加载名为 test 的 CTP？我需要为每个回调一个单独的 ajax.ctp。

# node.js - Node.js 和 underscore.js——模板

> ID：14043744
> 
> 赞同：1
> 
> 时间：2012-12-26T17:08:46.737
> 
> 标签：node.js, express, underscore.js

好的，所以我的问题非常基本。我正在使用带有下划线的 Node.js 作为注册的模板引擎，使用 Expressjs 框架。我正在尝试创建部分。我希望能够做一些你用其他语言做的事情：

```
<% include('header') %>
    <body id="content">
        <span>Blah</span>
    </body>

<% include('footer') %> 
```

你明白了。那么，有没有人知道在 Node 上使用下划线来实现这一点的方法？

# 编辑：

```
<%
var isReturned = false;
var isSuccess = false;
if(typeof user != 'undefined'){
    var isReturned = true;
}
if(typeof errors == 'undefined'){
    var errors = null;
}

if(typeof success != 'undefined'){
    isSuccess = true;
}
%>
<% _.template('header') %>
    <h1><%= title %></h1>
    <% if(isSuccess){ %>
        <div style="background-color: green; border: 1px solid black; color: white; width: auto; display: inline-block; padding: 0.5em; border-radius: 5px;">You have successfully registered! <a href="/login">Click Here</a> to login.</div>
    <% } %>

    <form id="register" name="register" action="/register" method="POST">
        <table>
            <tr>
                <td>
                    <label for="firstName">First Name:</label>
                </td>
                <td>
                    <input type="text" size=15 name="firstName" value="<% if(isReturned){ %> <%= user.firstName %> <% } %>"/>
                </td>
                <% if(errors != null && typeof errors.firstName !== 'undefined' && errors.firstName !== null){ %>
                    <td class="error"><%= errors.firstName.msg %></td>
                <% } %>
            </tr>
            <tr>
                <td>
                    <label for="lastName">Last Name:</label>
                </td>
                <td>
                    <input type="text" size=15 name="lastName" value="<% if(isReturned){ %> <%= user.lastName %> <% } %>"/>
                </td>
                <% if(errors != null && typeof errors.lastName !== 'undefined' && errors.lastName !== null){ %>
                    <td class="error"><%= errors.lastName.msg %></td>
                <% } %>
            </tr>
            <tr>
                <td>
                    <label for="email">E-mail:</label>
                </td>
                <td>
                    <input type="text" size=15 name="email" value="<% if(isReturned){ %> <%= user.email %> <% } %>"/>
                </td>
                <% if(errors != null && typeof errors.email !== 'undefined' && errors.email !== null){ %>
                    <td class="error"><%= errors.email.msg %></td>
                <% } %>
            </tr>
            <tr>
                <td>
                    <label for="password">Password:</label>
                </td>
                <td>
                    <input type="password" size=15 name="password"/>
                </td>
                <% if(errors != null && typeof errors.password !== 'undefined' && errors.password !== null){ %>
                    <td class="error"><%= errors.password.msg %></td>
                <% } %>
            </tr>
            <tr>
                <td>
                    <label for="confirm">Confirm Password:</label>
                </td>
                <td>
                    <input type="password" size=15 name="confirm"/>
                </td>
                <% if(errors != null && typeof errors.confirm !== 'undefined' && errors.confirm !== null){ %>
                    <td class="error"><%= errors.confirm.msg %></td>
                <% } %>
            </tr>
            <tr>
                <td colspan=2>
                    <input type="submit" size=15 name="submit" value="Register"/>
                </td>
            </tr>
        </table>
    </form>
<% _.template('footer') %> 
```

这是我在收到评论后尝试的（我没有指定特定的 url，因为 expressjs 连接了一个视图目录，并且只指定模板的名称适用于项目的所有其他部分）。它现在只是不解析页眉和页脚模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T18:18:36.500

尽管 underscore.js 的模板引擎非常基础，但模板可以执行任意 JavaScript 代码这一事实使您几乎可以做任何事情。

我设置了这个小辅助函数来渲染基于带有 id 的脚本块的模板：

```
_.include = function(id, data) { 
    var template = document.getElementById(id).innerHTML;
    return _.template(template)(data); 
} 
```

而这种 HTML 和模板的组合：

```
<script type="text/html" id='header'>
    This is the header
</script>

<script type="text/html" id='footer'>
    This is the footer
</script>

<script type="text/html" id='full'>
    <%= _.include('header') %>
        <h1><%= title %></h1>
    <%= _.include('footer') %>
</script>

<div id='target'>
    This text will be replaced by the output of rendering the templates
</div> 
```

​ 有了这些，渲染模板、页眉和页脚就这么简单：

```
document.getElementById('target').innerHTML = _.include('full', { "title": "Title"}); 
```

​ 请注意，我还没有将任何内容传递`_include`给模板中的调用。您可能可以传递您获得的参数（我只是还没有找到上下文变量的名称），或者您可以显式地传递一个带有任何页眉和页脚需要的新对象：

```
<%= _.include('header', { 'title': title }) %> 
```

可以在这里找到包含代码和 HTML 的小提琴：http: [//jsfiddle.net/tUzcU/2/](http://jsfiddle.net/tUzcU/2/)

# c++ - CppUnit 在 Mac OS X 上使用 Clang 链接错误

> ID：14043745
> 
> 赞同：7
> 
> 时间：2012-12-26T17:08:51.010
> 
> 标签：c++, macos, linker, clang, cppunit

我正在尝试使用 CppUnit 编译一个测试程序。问题是，使用此示例代码：

```
//[...]

class EntityComponentTest : public CppUnit::TestFixture
{
CPPUNIT_TEST_SUITE( EntityComponentTest );
CPPUNIT_TEST( testGetComponents );
CPPUNIT_TEST_SUITE_END();
Entity e;

public:
void setUp(){
    e.addComponent("1", new TestComponent("Hello 1"));
    e.addComponent("2", new TestComponent("Hello 2"));
}

void tearDown(){}

void testGetComponents()
{
    TestComponent &first = static_cast<TestComponent&>(e.getComponent("1"));
    TestComponent &second = static_cast<TestComponent&>(e.getComponent("2"));

    CPPUNIT_ASSERT(first.msg == "Hello 1");
    CPPUNIT_ASSERT(second.msg == "Hello 2");

}

};
CPPUNIT_TEST_SUITE_REGISTRATION( EntityComponentTest );
int main(void)
{
//followed from tutorial
CppUnit::TextUi::TestRunner run;
CppUnit::TestFactoryRegistry &r = CppUnit::TestFactoryRegistry::getRegistry();
run.addTest(r.makeTest());

run.run("", false, true);

return 0;
} 
```

我收到链接错误：

```
 Undefined symbols for architecture x86_64:
  "CppUnit::SourceLine::SourceLine(std::__1::basic_string<char,    std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from:
  EntityComponentTest::testGetComponents() in EntityComponentTest.cpp.o
  "CppUnit::TextTestRunner::run(std::__1::basic_string<char, std::__1::char_traits<char>,   std::__1::allocator<char> >, bool, bool, bool)", referenced from:
  _main in EntityComponentTest.cpp.o
  "CppUnit::TestFactoryRegistry::getRegistry(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
  _main in EntityComponentTest.cpp.o
  CppUnit::AutoRegisterSuite<EntityComponentTest>::AutoRegisterSuite() in   EntityComponentTest.cpp.o
  "CppUnit::Message::Message(std::__1::basic_string<char, std::__1::char_traits<char>,  std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>,  std::__1::allocator<char> > const&)", referenced from:
  EntityComponentTest::testGetComponents() in EntityComponentTest.cpp.o
 "CppUnit::TestCase::TestCase(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
  CppUnit::TestCaller<EntityComponentTest>::TestCaller(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, void (EntityComponentTest::*)(), EntityComponentTest*) in EntityComponentTest.cpp.o
 "CppUnit::TestSuite::TestSuite(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)", referenced from:
  EntityComponentTest::suite() in EntityComponentTest.cpp.o
 "CppUnit::TestSuiteBuilderContextBase::getTestNameFor(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) const", referenced from:
  EntityComponentTest::addTestsToSuite(CppUnit::TestSuiteBuilderContextBase&) in EntityComponentTest.cpp.o
 "CppUnit::Test::findTestPath(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, CppUnit::TestPath&) const", referenced from:
  vtable for CppUnit::TestCaller<EntityComponentTest> in EntityComponentTest.cpp.o
 "CppUnit::Test::resolveTestPath(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) const", referenced from:
  vtable for CppUnit::TestCaller<EntityComponentTest> in EntityComponentTest.cpp.o
 "CppUnit::Test::findTest(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) const", referenced from:
  vtable for CppUnit::TestCaller<EntityComponentTest> in EntityComponentTest.cpp.o
 ld: symbol(s) not found for architecture x86_64
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在调用 clang 时使用了 -lcppunit 标志。当我在我的 Linux 机器上运行 make 文件时，它编译得很好。

```
libcppunit-1.12.1.0.0.dylib
libcppunit-1.12.1.dylib
libcppunit.a
libcppunit.dylib 
```

在我的 /usr/local/lib/. 我什至尝试安装到 /usr/lib 并发生相同的链接错误。任何帮助将不胜感激。

非常感谢！

编辑：我发现了问题。我正在使用 libc++，因为我在我的项目中使用了 std::shared_ptr。问题是我尝试使用 libc++ 编译 CppUnit，但它会引发链接错误。看来它必须用 libstdc++ 编译，这需要我安装 Fink 或 Macports，这样我才能安装最新版本的 gcc 和 libstdc++。我真的希望避免这种情况，因为尝试设置它会一团糟。我真的也希望避免对 shared_ptr 使用 Boost。

这有可能吗？如果不是，我可能会放弃并安装 MacPorts

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:42:27.710

我有同样的问题。将“C++标准库”设置为“libstdc++(GNU C++标准库)”后就OK了。

# iphone - 如何制作一个安装在手机上但访问网站数据的 iPhone 或 iPad 应用程序？

> ID：14043752
> 
> 赞同：2
> 
> 时间：2012-12-26T17:09:23.527
> 
> 标签：iphone, ipad, 3d, viewer

我想为我的公司制作一个 iPhone 或 iPad 应用程序，它是一个 3d 模型查看器。通过与其他人的多次讨论，我意识到最好让客户在手机上使用该应用程序并使用他们的用户名和密码登录。这将允许他们访问他们被允许访问的 3d 模型。由于 ipad 和 iphone 不支持 webgl，它不能使用 webGL 进行 3d 查看。

我没有使用当前在应用商店中的模型查看器的原因是因为我希望它特定于我的公司，而不仅仅是我们让客户下载的一些随机应用程序。我们希望它成为我们公司的应用程序。

任何人都可以通过教程或链接提供建议，向我展示如何实现这一点？我将不胜感激！

总结一下：我需要帮助我学习如何制作适用于 iPhone 或 iPad 的应用程序的信息，该应用程序将在设备本身上有一个界面，但可以从我们的网站检索（并允许查看）3d 模型，具体基于用户的他们登录信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:20:54.957

一个很好的起点是[Ray Wenderlich](http://www.raywenderlich.com/tutorials)。这个网站有一个很棒的教程列表，可以帮助你创建你正在寻找的东西。

基本上，这需要一些工作，如果你没有任何 iOS 经验，你将不得不从头开始。Ray 的网站有丰富的信息。

[这](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)将帮助您启动一个基本的应用程序。

[本文](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)讨论如何创建一个带有 Web 服务后端的应用程序。

至于显示 3D 信息，这将需要更多的工作。该站点有一个[OpenGL EL](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)系列。我不确定你在找什么。

祝好运并玩得开心点！

# odbc - 使用 Informatica

> ID：14043756
> 
> 赞同：1
> 
> 时间：2012-12-26T17:09:46.133
> 
> 标签：odbc, sql-server-2012, informatica-powercenter, informatica

我正在为一个项目设置开发环境，在 Windows Server 2008 R2 机器上使用 informatica 9.1 和 SQL Server 2012。

安装等已经完成，到目前为止没有报告任何问题。

当我们尝试运行我们的第一个映射/工作流时，SQL Server 数据库连接正在成为一个瓶颈。

我尝试创建与 SQL Server 和 odbc 的本机连接，两者似乎都不起作用，有问题的会话无法初始化。错误信息最终是

> 未能准备会话

我在这里错过了什么吗？有什么经验吗？

免责声明：这是我第一次尝试在 SQL Server 上托管 Infa 存储库，并且使用源和目标作为 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:52:36.287

这个问题现在有点老了，但刚刚遇到它并记得我在 Infa 9 上遇到了类似的问题（但在 Oracle 上托管了 repo）。

对我来说，“无法准备会话”错误的原因是工作流使用的一个或多个对象被检出。再次签入工作流引用的所有内容后，错误消失并且工作流成功完成。

# c# - NHibernate 搜索条件

> ID：14043758
> 
> 赞同：1
> 
> 时间：2012-12-26T17:09:59.160
> 
> 标签：c#, nhibernate, nhibernate-criteria

我有属性字符串数据的类定义

```
public class Definition
{
  string Type  {get; set; }
  string Data  { get; set; }
} 
```

然后 Data 包含一些保存为字符串的 XML

```
<Definition>
    <Property>
     <Key>DefinitionId</Key>
     <Value>5</Value>
    </Property>   
</Definition> 
```

我需要获取所有定义 ID 为 5 的定义。

最好的方法是什么？获取所有定义并解析它们，或者我可以用 NHibernate 做点什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:32:55.080

如果您的数据库支持 Xml 查询，您可以使用 NHibernate 查询 Xml 类型。假设您正在使用 Sql Server 2005+ ...

**第 1 步 -*类定义***

将您的课程定义更改为：

```
public class Definition
{
  string Type  {get; set; }
  XDocument Data  { get; set; }
} 
```

您的映射应该选择 XDocument 类型并为数据库中的列创建适当的`Xml`列类型。`Data`

**第 2 步 -*查询***

有几种不同的查询方式，但归结为同一件事。下面的代码显示了通过 QueryOver api 进行的查询：

```
session.QueryOver<Definition>()
       .Where
        (
            Restrictions.Eq
            (
                Projections.SqlProjection
                (
                   "Data.value('(/Definition/Property/Value)[1]', 'int') as DefinitionId",
                   new string[] { "DefinitionId" },
                   new IType[] { NHibernateUtil.Int32 }
                ),
                5
            )
        )
       .List(); 
```

上面的查询使用标准的 Sql Server XQuery 来查询 Xml 字段。XQuery 语言的一点介绍：http: [//blog.sqlauthority.com/2012/04/27/sql-server-introduction-to-discovering-xml-data-type-methods-a-primer/](http://blog.sqlauthority.com/2012/04/27/sql-server-introduction-to-discovering-xml-data-type-methods-a-primer/)

# qt - 可以在 QListview 和 QTreeview 之间共享相同的模型/数据吗？

> ID：14043760
> 
> 赞同：1
> 
> 时间：2012-12-26T17:10:15.817
> 
> 标签：qt, listview, treeview, models, pyside

假设我的数据如下所示：

```
Record:
   type - string  #formatted ISO date/time string
   ctime - string #actually just a unix timestamp
   source - string
   data- string 
```

服务于列表视图，模型的数据方法如下所示：

```
def data(self, index, role):
    record = self.contents[index.row()]
    if role == QtCore.Qt.DisplayRole:
        return "%s: %s - %s" % ( record['source'], record['data'], record['time'], ) 
```

至于树视图，实际的主体将呈现相同的内容，但树节点的第一行将以 Record.type 为中心。查看 def 数据的签名，我假设我可能只是从角色中枢转，还是需要在抽象上再退一步，让核心模型管理数据，然后代理到列表和树模型？

再退一步，是否有关于 QT ( pySide ) 数据层如何工作的良好/简洁的文档来源？这可能是另一个问题，但它也可能导致这个问题的答案，所以我把它放在这里。

# java - 需要调用方法“super.paint()”的地方

> ID：14043765
> 
> 赞同：2
> 
> 时间：2012-12-26T17:10:47.900
> 
> 标签：java, swing, paintcomponent

我一直在制作游戏，并希望在我绘制图形以添加按钮的组件上。在这个论坛上说我必须在方法“paintComponent”中调用方法“super.paint()”，但我的程序工作不正确。我不明白我必须在哪里调用这个方法。可能是我必须使用容器。谢谢你的帮助。

```
package mygame;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;
import java.awt.geom.RoundRectangle2D;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JPanel;
import javax.swing.Timer;

public class DrawPictures extends JComponent
{
    static 
    {
        flagLeft = true;
        flagLeft  = true;      
    }

    public void setStringForMoveBall(String string)
    {
        stringForMoveBall = string;
    }

    public String getStringForMoveBall ()
    {
        return stringForMoveBall;
    }

    public DrawPictures() 
    {  
        start = new JButton("Start game");
        stop = new JButton("Stop game");
        changeColorBall = 0;
        stringForMoveBall = "";
        this.offset = 8;
        marginBetweenRectangles = 70;
        height = radiusWidth = 50;
        top = radiusHeight = 30;
        width = 60;
        left = 20;
        this.counter = 11;
        rectangles = new ArrayList<RoundRectangle2D>();
        ball = new Ellipse2D.Double( 400,570,top, top );
        FullCollection(rectangles);
        pusherFoot = new RoundRectangle2D.Double( 350, 600, 150, 50,radiusWidth,radiusHeight );
        panel = new JPanel();
        panel.add(stop);
        panel.add(start);
        add(panel);        
        timerForBall = new Timer(40, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e)
            {

                repaint();
            }
        } );
        timerForBall.start();
    }

    private void DrawRectangles( Graphics2D drawer )
    {

            for( int i = 0; i != rectangles.size(); ++i ) 
            {
                if ( i % 4 == 0)
                {
                    drawer.setColor( Color.RED );
                    drawer.fill(rectangles.get(i));
                }
                else if ( i % 3 == 0)
                {
                    drawer.setColor( Color.CYAN );
                    drawer.fill(rectangles.get(i));
                }
                else if ( i % 5 == 0)
                {
                    drawer.setColor( Color.YELLOW );
                    drawer.fill(rectangles.get(i));
                }
                else if ( i % 7 == 0)
                {
                    drawer.setColor( Color.WHITE );
                    drawer.fill(rectangles.get(i));
                }
                else if ( i % 8 == 0)
                {
                    drawer.setColor( Color.MAGENTA );
                    drawer.fill(rectangles.get(i));
                }
                else if ( i % 9 == 0)
                {
                    drawer.setColor( Color.GREEN );
                    drawer.fill(rectangles.get(i));
                }

                else 
                {
                    drawer.setColor( Color.ORANGE );
                    drawer.fill(rectangles.get(i));
                }
        }
    }

    @Override protected void paintComponent( Graphics graphics )
    {

        drawer = (Graphics2D)graphics;
        DrawRectangles(drawer);
         super.paint(graphics);/*where I must call it*/
        drawer.setColor(Color.YELLOW);
        drawer.fill(pusherFoot);
        MoveFootRectangle(pusherFoot);
        drawer.setColor(Color.GREEN);
        drawer.fill(ball);
        MoveBall( );

    }        

   private void CheckHitBallWithRectangles( )
   {    
       for( int i = rectangles.size() - 1; i > 0; --i )
       {
           if( ball.getMinY() >= rectangles.get(i).getMinY() &&
               ball.getMinY() <= rectangles.get(i).getMaxY() &&
               ball.getMaxX() >= rectangles.get(i).getMinX() &&
               ball.getMaxX() <= rectangles.get(i).getMaxX() )
           {
               if ( CompareStringsForMoveBall("") )
               {
                   stringForMoveBall = "DownAndLeftFromTopSide";
                   rectangles.remove(i);
                   --i;  
               }
               if( CompareStringsForMoveBall("UpAndRightFromLeftSide") )
               {
                   stringForMoveBall = "DownAndRightFromTopSide";
                   rectangles.remove(i);
                   --i;
               }
           }
           if(     ball.getMinY() >= rectangles.get(i).getMinY() &&
                   ball.getMinY() <= rectangles.get(i).getMaxY() &&
                   ball.getMinX() >= rectangles.get(i).getMinX() &&
                   ball.getMinX() <= rectangles.get(i).getMaxX())
           {
               if ( CompareStringsForMoveBall("") )
               {
                    stringForMoveBall = "DownAndLeftFromTopSide";
                    rectangles.remove(i);
                    --i;
               } 
           }

           if ( ball.getMaxY() >= rectangles.get(i).getMinY() &&
             ball.getMaxY() <= rectangles.get(i).getMaxY() &&
             ball.getMaxX() >= rectangles.get(i).getMinX() &&
             ball.getMaxX() <= rectangles.get(i).getMaxX())
           {
               if( CompareStringsForMoveBall("DownAndRightFromTopSide") )
               {
                   stringForMoveBall = "DownAndLeftFromTopSide";
                    rectangles.remove(i);
                    --i;
               }
               if( CompareStringsForMoveBall("UpAndRightFromLeftSide") )
               {
                   stringForMoveBall = "DownAndRightFromTopSide";
                    rectangles.remove(i);
                    --i;
               }
           }
           if ( ball.getMinX() >= rectangles.get(i).getMinX() &&
                ball.getMinX() <= rectangles.get(i).getMaxX()&&
                ball.getMinY() >= rectangles.get(i).getMinY() &&
                ball.getMinY() <= rectangles.get(i).getMaxY())
           {
                rectangles.remove(i);
                --i;
           }        
       }
   }    
    private void MoveFootRectangle(RoundRectangle2D pusher) 
    {

            if( flagLeft && pusher.getX() >= 0)
            {
                pusher.setFrame(pusher.getX() - 30, pusher.getY(), 150, 60);
                flagLeft = false;
            }
            if( flagRight && pusher.getX() <= 730 )
            {
                pusher.setFrame(pusher.getX() + 30, pusher.getY(), 150, 60);
                flagRight = false;                 
            }

    }

   public static void SetStatusFlagLeft( )
   { 
       flagLeft = true; 
   }
   public static void SetStatusFlagRight( )
   {
       flagRight = true;
   }
   private void MoveBallYLessNull( )
   {
       if( CompareStringsForMoveBall( "" ) )
        {
            stringForMoveBall = "DownAndLeftFromTopSide";              
        }
        else if( CompareStringsForMoveBall( "UpAndRightFromLeftSide" ) )
        {
            stringForMoveBall = "DownAndRightFromTopSide";
        }
   }
   private void MoveBallXLessNull( )
   {
       if (  CompareStringsForMoveBall( "DownAndLeftFromTopSide" ) )  
        {
            stringForMoveBall = "DownAndRightFromTopSide"; 
        }
        else if( stringForMoveBall.compareTo( "" ) == 0 )
        {
        stringForMoveBall = "UpAndRightFromLeftSide";
        }
   }

    private void MoveBall()
    {     
         if ( CompareStringsForMoveBall( "" ) )
         {
             ball.setFrame(ball.getX() - offset, ball.getY() - offset, top, top);
         }
         if ( CompareStringsForMoveBall( "DownAndLeftFromTopSide" ) )
         {
             ball.setFrame(ball.getX() - offset, ball.getY() + offset, top, top);
         }

         if( ball.getX() < 0  )
         {
            MoveBallXLessNull();            
         }
         if( ball.getY() < 0 )
         {
            MoveBallYLessNull();             
         }
         if ( CompareStringsForMoveBall( "UpAndRightFromLeftSide" ) )
         {
             ball.setFrame(ball.getX() + offset, ball.getY() - offset, top, top );
         }

        if ( CompareStringsForMoveBall( "DownAndRightFromTopSide" ) )
         {
             ball.setFrame(ball.getX() + offset, ball.getY() + offset, top, top);
         }

        if ( ball.getMaxY() == pusherFoot.getMinY() && 
                ball.getCenterX() > pusherFoot.getMinX() 
             && ball.getCenterX() < pusherFoot.getMaxX() )
        {
            MoveBallHitWithFoot();
        }

        if( ball.getMaxX() > 880)
        {
            MoveBallForXMoreWidth();
        }

        CheckHitBallWithRectangles();
    }

    public void MoveBallForXMoreWidth( )
   {
       if ( CompareStringsForMoveBall( "DownAndRightFromTopSide" ) ) 
        {
            setStringForMoveBall("DownAndLeftFromTopSide");
        }
        else if( CompareStringsForMoveBall( "UpAndRightFromLeftSide" ) ) 
        {
           setStringForMoveBall("");               
        } 
   }

    public void MoveBallHitWithFoot( )
   {
       if ( CompareStringsForMoveBall( "DownAndRightFromTopSide" ) )
        {
           setStringForMoveBall("UpAndRightFromLeftSide") ;
        }
       else if ( CompareStringsForMoveBall( "DownAndLeftFromTopSide" ) ) 
        {
           setStringForMoveBall("");   
        }
   }
    public boolean CompareStringsForMoveBall( String moveforball )
   {
       if ( (getStringForMoveBall()).compareTo(moveforball) == 0 )
       { 
           return true;
       }
       else
       {
          return false;
       }
   }

   private void FullCollection(ArrayList<RoundRectangle2D> newrectangles)
   {
       int counterTop = 0;

       for( int i = 0; i <= counter; ++i )
       {
            newrectangles.add(new RoundRectangle2D.Double
              ( top + counterTop,left,width,height,radiusWidth,radiusHeight ));
            counterTop += marginBetweenRectangles;
       }

       counterTop = 0;

       for( int i = 0; i <= counter; ++i )
       {
            newrectangles.add(new RoundRectangle2D.Double
            ( top + counterTop,left + marginBetweenRectangles,width,height,radiusWidth,radiusHeight ));
            counterTop += marginBetweenRectangles;
       }

       counterTop = 0;

       for( int i = 0; i <= counter; ++i )
       {
            newrectangles.add(new RoundRectangle2D.Double
           ( top + counterTop,left + marginBetweenRectangles * 2,width,height,radiusWidth,radiusHeight ));
            counterTop += marginBetweenRectangles;
       }

   }
   private ArrayList<RoundRectangle2D> rectangles;
   private Ellipse2D ball;
   private int width,left,top,height, counter,radiusWidth,
           radiusHeight,marginBetweenRectangles,offset,changeColorBall;
   private RoundRectangle2D pusherFoot;
   private Timer timerForBall;
   private static boolean flagLeft,flagRight;
   private String stringForMoveBall;
   private Graphics2D drawer;
   private JButton start,stop;
   private JPanel panel;

} 
```

在框架上添加组件的类

```
package mygame;

import javax.swing.JFrame;

public class FrameForGame extends JFrame  
{
    public FrameForGame() 
    {
        setTitle("MyGame");
        setSize(WIDTH_H, HEIGHT_H);
        setLocation(150, 50);
        DrawPictures pictures = new DrawPictures();
        event = new ForEvents();
        addKeyListener(event); 
        add(pictures);
    }
    private int WIDTH_H = 1200;
    private int HEIGHT_H = 700;
    private ForEvents event;
       } 
```

主班

```
package mygame;

import java.awt.EventQueue;
import javax.swing.JFrame;

    public class MyGame {

        /**
         * @param args the command line arguments
         */
        public static void main(String[] args) 
        {
            EventQueue.invokeLater(new Runnable() {

                @Override
                public void run() 
                {
                    FrameForGame button = new FrameForGame();
                    button.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    button.setVisible(true);
                }
            });
        }
    } 
```

键盘处理类

```
package mygame;

import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JOptionPane;

/**
 *
 * @author TNV
 */
public class ForEvents extends KeyAdapter implements KeyListener

{

    @Override
    public void keyPressed(KeyEvent ke) 
    {
        if( ke.getKeyCode() == KeyEvent.VK_LEFT )
        {
            //JOptionPane.showMessageDialog(null, "Hello");
            DrawPictures.SetStatusFlagLeft();
        }
        if( ke.getKeyCode() == KeyEvent.VK_RIGHT )
        {
            DrawPictures.SetStatusFlagRight();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:31:44.027

> On this forum said I must call method `super.paint()` in method `paintComponent`

Where did you get that from?

You should be calling `super.paintComponent(g);` in overridden `paintComponent(..)` like so:

```
@Override 
protected void paintComponent(Graphics graphics)
{
    super.paintComponent(graphics);

    //do other drawings here 

    drawer = (Graphics2D)graphics;
    DrawRectangles(drawer);
    drawer.setColor(Color.YELLOW);
    drawer.fill(pusherFoot);
    MoveFootRectangle(pusherFoot);
    drawer.setColor(Color.GREEN);
    drawer.fill(ball);
    MoveBall( );
} 
```

*   Also dont use `KeyListener`/`KeyAdapter` for Swing components rather use [`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

*   Dont extend `JFrame` class unnecessarily

# google-app-engine - 来自 servlet javax.servlet.UnavailableException 的未捕获异常：java.security.AccessControlException

> ID：14043768
> 
> 赞同：2
> 
> 时间：2012-12-26T17:10:55.913
> 
> 标签：google-app-engine, servlets, ringojs

在我将我的网络应用程序部署到谷歌应用程序引擎服务器后，一切似乎都很好：

```
99% Closing update: new version is ready to start serving.
99% Uploading index definitions.

Update completed successfully.
Success.
Cleaning up temporary files... 
```

但是，当尝试从 url: 对其进行测试时`myappname.appspot.com`，我收到了这个常见错误：

```
Error: Server Error
The server encountered an error and could not complete your request.

If the problem persists, please report your problem and mention this error message and the query that caused it. 
```

在我的应用程序的日志中，这是我得到的错误：

```
Uncaught exception from servlet
javax.servlet.UnavailableException: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at org.mortbay.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:415)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:451)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

我是 GAE 新手，所以我需要了解如何解决此类错误。提前谢谢。

**PS：**如果这有帮助，我正在部署一个`ringojs`项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:09:30.693

在 App Engine 上使用 Java 线程的方式存在一些限制：

[https://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)

# c++ - 构建带有 .v2 扩展名的 Boost 日期/时间 Jamfile

> ID：14043770
> 
> 赞同：2
> 
> 时间：2012-12-26T17:11:03.140
> 
> 标签：c++, boost, linker, makefile, jam

我正在尝试构建 Boost date_time 库，以便可以将其链接到我的 Makefile 中。我在“libs/date_time/build”中看到一个孤独的“Jamfile.v2”，如果我输入 jam，我会得到：

```
Jamfile: No such file or directory
...found 7 target(s)... 
```

我现在不知道该怎么做，在 Boost 文档中找不到有关 date_time 安装的任何信息。

以下是文档中的文字：

```
# Boost.date_time build and test Jamfile
#
#  Based on boost.python Jamfile
#
# To run all tests quietly: jam test
#
# Declares the following targets:
#   1\. libboost_date_time, a static link library to be linked with all
#      Boost.date_time modules
#

project boost/date_time
    : requirements
        <define>DATE_TIME_INLINE
    <link>shared:<define>BOOST_ALL_DYN_LINK=1   
    <link>static:<define>BOOST_DATE_TIME_STATIC_LINK    
    : usage-requirements    
        <define>DATE_TIME_INLINE
        <link>shared:<define>BOOST_DATE_TIME_DYN_LINK=1
    : source-location ../src
    ;

# Base names of the source files for libboost_date_time
CPP_SOURCES = greg_month greg_weekday date_generators ;

lib boost_date_time : gregorian/$(CPP_SOURCES).cpp ;

boost-install boost_date_time ; 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:26:22.370

没关系，我刚刚找到了文档： http: [//www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html)

显然没有必要为日期时间构建任何东西。仍然有一些问题，但这将是一个不同的问题。

乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:07:57.870

只是为了帮助其他尝试使用 date_time 库的人。您不需要构建任何东西，只需在代码中包含所需的头文件即可。如果您收到此错误：

```
/usr/include/c++/4.6/boost/date_time/date_formatting.hpp:44: undefined reference to `boost::gregorian::greg_month::as_short_string() const'
/usr/include/c++/4.6/boost/date_time/date_formatting.hpp:49: undefined reference to `boost::gregorian::greg_month::as_long_string() const' 
```

只需 sudo 进入该文件并注释掉这些行。该文档说您需要自己编写这些函数。

# c# - 使用 ReSharper 在 Visual Studio 的自动格式化中换行和换行

> ID：14043776
> 
> 赞同：56
> 
> 时间：2012-12-26T17:11:34.407
> 
> 标签：c#, .net, visual-studio, architecture, resharper

我在一个 C# 项目中工作并使用 Visual Studio 2012。当 Visual Studio 尝试格式化我的代码时，它会换行并使我的代码看起来难以阅读。原始代码（对我和我的团队来说看起来很不错）：

```
if (list.Any(x => x.Type == (int) EnumType.Customer))
{

} 
```

当 Visual Studio 尝试格式化时：

```
if (
    list.Any(
        x => x.Type ==
                (int) EnumType.Customer))
{
  // Other break codes
} 
```

还有很多其他部分破坏了我的代码。我喜欢某些部分的自动格式化，但我的问题是：有没有办法在 Visual Studio 中从自动格式化中禁用此断线？*

PS：我也安装了 ReSharper。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-26T17:22:13.227

长线解决方案：

ReSharper，菜单*Options* → *Code Editing* → *C#* → *Formatting Style* → *Line Breaks And Wrapping*。

并禁用*Wrap long lines*：

![在此处输入图像描述](../Images/8b2441652f6eb8fcc5643590726f5592.png)

它真的让我疯狂！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:16:55.920

在 ReSharper 的设置中，在*语言*部分，您可以更改 C# 代码的格式样式。您要禁用的选项类似于“缩进匿名方法主体”。您还可以查看选项以根据您的喜好进一步自定义格式样式。

# ruby-on-rails - 编写 rspec 以测试错误，但抛出错误并阻止测试通过

> ID：14043777
> 
> 赞同：3
> 
> 时间：2012-12-26T17:11:46.013
> 
> 标签：ruby-on-rails, error-handling, rspec

我写了一个测试，我希望结果会引发错误。

```
it{ Authentication.create_with_omniauth!(nil, nil).should raise_error } 
```

结果确实会抛出错误，但验证失败。显然它正在抛出一个错误。:)

```
2) Authentication methods: self.create_with_omniauth!: with bad input 
     Failure/Error: it{ Authentication.create_with_omniauth!(nil, nil).should raise_error }
     ArgumentError:
       ArgumentError
     # ./app/models/authentication.rb:13:in `create_with_omniauth!'
     # ./spec/models/authentication_spec.rb:69:in `block (5 levels) in <top (required)>' 
```

怎么办？你如何测试错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:25:43.143

您应该使用**expect {}.to raise_error**语法

```
expect { Authentication.create_with_omniauth!(nil, nil) }.to raise_error 
```

或者

```
lambda { Authentication.create_with_omniauth!(nil, nil) }.should raise_error 
```

如果您使用 Rspec 1.XX

查看文档

[https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher#expect-any-error](https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher#expect-any-error)

[http://rspec.rubyforge.org/rspec/1.2.9/classes/Spec/Matchers.html#M000176](http://rspec.rubyforge.org/rspec/1.2.9/classes/Spec/Matchers.html#M000176)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:23:10.230

我没有使用omniauth的经验，但是这样的事情有用吗？

```
describe "authentication" do
  context "when nil" do
    let(:nil_authentication) { Authentication.create_with_omniauth!(nil, nil) }
    subject { -> { nil_authentication } }
    it { should raise_error }
  end
end 
```

# java - 如何将 GLSurfaceView 保存到纹理/缓冲区/位图

> ID：14043779
> 
> 赞同：3
> 
> 时间：2012-12-26T17:11:59.413
> 
> 标签：java, android, opengl-es, bitmap

我正在使用 GLSurfaceView 为 Android 开发应用程序。有一刻我必须在那一刻用它的图像替换我的 GLSurfaceView。问题是，如何获得正确的图像？我使用了这段代码：

```
 v.setDrawingCacheEnabled(true);
    v.measure(View.MeasureSpec.makeMeasureSpec(500, View.MeasureSpec.AT_MOST),
            View.MeasureSpec.makeMeasureSpec(500, View.MeasureSpec.AT_MOST));
    v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());

    v.buildDrawingCache(true);
    Bitmap b = Bitmap.createBitmap(v.getDrawingCache());
    v.setDrawingCacheEnabled(false); // clear drawing cache
    return b; 
```

但它总是返回黑色位图。

也许我们可以制作位图以外的东西（也可以放在 GLSurfaceView 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:19:37.410

我认为它不适用于`GLSurfaceView`. 帧缓冲区可能位于 GPU 内部，在 CPU 上无法直接访问。

您可以使用[帧缓冲区对象](http://www.opengl.org/wiki/Framebuffer_Object)将图像渲染为纹理，然后使用`glReadPixels`将数据下载到缓冲区并将缓冲区转换为`Bitmap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:07:53.507

将 GLSurfaceView 保存到位图。它的工作正确。

```
MyRenderer Class :

@Override
public void onDrawFrame(GL10 gl) {

try {
    int w = width_surface ;
    int h = height_surface  ;

    Log.i("hari", "w:"+w+"-----h:"+h);

    int b[]=new int[(int) (w*h)];
    int bt[]=new int[(int) (w*h)];
    IntBuffer buffer=IntBuffer.wrap(b);
    buffer.position(0);
    GLES20.glReadPixels(0, 0, w, h,GLES20.GL_RGBA,GLES20.GL_UNSIGNED_BYTE, buffer);
    for(int i=0; i<h; i++)
    {
         //remember, that OpenGL bitmap is incompatible with Android bitmap
         //and so, some correction need.        
         for(int j=0; j<w; j++)
         {
              int pix=b[i*w+j];
              int pb=(pix>>16)&0xff;
              int pr=(pix<<16)&0x00ff0000;
              int pix1=(pix&0xff00ff00) | pr | pb;
              bt[(h-i-1)*w+j]=pix1;
         }
    }           
    Bitmap inBitmap = null ;
    if (inBitmap == null || !inBitmap.isMutable()
         || inBitmap.getWidth() != w || inBitmap.getHeight() != h) {
        inBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    }
    //Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    inBitmap.copyPixelsFromBuffer(buffer);
    //return inBitmap ;
    // return Bitmap.createBitmap(bt, w, h, Bitmap.Config.ARGB_8888);
    inBitmap = Bitmap.createBitmap(bt, w, h, Bitmap.Config.ARGB_8888);

    ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
    inBitmap.compress(CompressFormat.JPEG, 90, bos); 
    byte[] bitmapdata = bos.toByteArray();
    ByteArrayInputStream fis = new ByteArrayInputStream(bitmapdata);

    final Calendar c=Calendar.getInstance();
     long mytimestamp=c.getTimeInMillis();
    String timeStamp=String.valueOf(mytimestamp);
    String myfile="hari"+timeStamp+".jpeg";

    dir_image=new File(Environment.getExternalStorageDirectory()+File.separator+
             "printerscreenshots"+File.separator+"image");
    dir_image.mkdirs();

    try {
        File tmpFile = new File(dir_image,myfile); 
        FileOutputStream fos = new FileOutputStream(tmpFile);

        byte[] buf = new byte[1024];
        int len;
        while ((len = fis.read(buf)) > 0) {
            fos.write(buf, 0, len);
        }
        fis.close();
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

       Log.v("hari", "screenshots:"+dir_image.toString());

    }
}catch(Exception e) {
    e.printStackTrace() ;
} 
```

# mingw - 像 sh.exe 一样将脚本传递给 Msys

> ID：14043780
> 
> 赞同：2
> 
> 时间：2012-12-26T17:12:09.133
> 
> 标签：mingw

我有一个需要 rsync 的项目。我的脚本中有以下代码...

```
"C:\Program Files\Git\bin\sh.exe" "<locationto>\git.sh"
"C:\MinGW\msys\1.0\msys.bat" "<locationto>\rsync.sh" 
```

我这样做是因为我需要 rsync 而安装的 Git 版本没有它。第一个命令执行良好，但 msys.bat 似乎不接受参数。

有没有办法可以强制 MSys 以与 sh.exe 相同的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:21:39.840

我通过以下方式解决了这个问题

1.  将 msys.bat 复制到 msys2.bat
2.  编辑 msys2.bat

要进行此更改...

> :startsh if NOT EXIST %WD%sh.exe goto notfound start %WD%sh --login -i exit

到

> :startsh if NOT EXIST %WD%sh.exe goto notfound start %WD%sh --login -i -c "/c/[location]/rsync.sh" exit

最后，您改为运行 msys2.bat。

# android - 抛出 NullPointerException 的新活动

> ID：14043783
> 
> 赞同：2
> 
> 时间：2012-12-26T17:12:22.957
> 
> 标签：android, xml, nullpointerexception, android-activity

如何简单地显示另一个 xml 文件？我创建了一个新的活动调用`about.java`来做到这一点，但它与`NullPointerException`. 这是我的主要课程`about.class`：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case 1:
            Log.d("**MYLOG**", "Refresh clicked .. ");
            Intent intent = new Intent(this, MainActivity.class);
            this.startActivity(intent);
            return true;
        case 2:
            //setContentView(R.layout.about);
            Log.d("**MYLOG**", "About clicked .. ");
            Intent intent2 = new Intent(this, About.class);
            this.startActivity(intent2);
            return true; 
```

这是我的 about.class

```
public class About extends Activity {

public About() {
     Log.d("**MYLOG**", "Inside About.java ..");
     setContentView(R.layout.about);

}
} 
```

和我的 about.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">
        <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:typeface="sans"
        android:textSize="18dp"
        android:text="About page"
        android:gravity="center"></TextView> 
```

这是我的日志：

```
12-26 14:28:43.560: D/**MYLOG**(1141): Inside About.java ..
12-26 14:28:43.560: D/AndroidRuntime(1141): Shutting down VM
12-26 14:28:43.560: W/dalvikvm(1141): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-26 14:28:43.600: E/AndroidRuntime(1141): FATAL EXCEPTION: main
12-26 14:28:43.600: E/AndroidRuntime(1141): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{wia.home/wia.home.About}: java.lang.NullPointerException
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.os.Looper.loop(Looper.java:137)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at java.lang.reflect.Method.invoke(Method.java:511)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-26 14:28:43.600: E/AndroidRuntime(1141):     at dalvik.system.NativeStart.main(Native Method)
12-26 14:28:43.600: E/AndroidRuntime(1141): Caused by: java.lang.NullPointerException
12-26 14:28:43.600: E/AndroidRuntime(1141):     at android.app.Activity.setContentView(Activity.java:1867) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:46:10.650

奇怪的是日志没有指定抛出 NullPointerException 的行。不过，我在您的代码中可以看到，您应该在 onCreate 中调用 setContentView，而不是在构造函数中。试试看，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T19:46:11.070

始终`Activity`在`onCreate`回调中设置内容视图：

```
public class About extends Activity {

     public void onCreate(Bundle saved) {
        super.onCreate(saved);
         Log.d("**MYLOG**", "Inside About.java ..");
         setContentView(R.layout.about);
     }
} 
```

您不应该尝试使用 的构造函数，从该方法开始`Activity`初始化，因为从该回调向前有效。`Activity``onCreate``Context`

# javascript - firefox 插件：使用请求 API 的简单示例（对本地文件的 ajax 调用）。无法实现网站中给出的那个

> ID：14043785
> 
> 赞同：2
> 
> 时间：2012-12-26T17:12:33.010
> 
> 标签：javascript, jquery, firefox-addon

```
 var Request = require("request").Request;
 var latestTweetRequest = Request({
  url: "http://api.twitter.com/1/statuses/public_timeline.json",
  onComplete: function (response) {
 var tweet = response.json[0];
console.log("User: " + tweet.user.screen_name);
console.log("Tweet: " + tweet.text);
  }
});

// Be a good consumer and check for rate limiting before doing more.
Request({
  url: "http://api.twitter.com/1/account/rate_limit_status.json",
  onComplete: function (response) {
    if (response.json.remaining_hits) {
  latestTweetRequest.get();
} else {
  console.log("You have been rate limited!");
}
}
}).get(); 
```

以上是本页给出的示例代码。[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html)。我所知道的是：

简单案例：
我们有 main.js 和 script.js 。我们通常在 main.js 中编写 API（SDK）相关的东西，在 script.js 中编写我们的普通 javascript。我尝试将上面的代码复制到 main.js 但没有用。

要求：包含 main.js 和 script.js 的简单示例，显示使用本地文件调用 ajax 的用法。例如，请将其中保存的一些文本的 samplefile.txt 上传到“数据”目录并进行一些 ajax 调用并从文件中获取数据。而已 。

# c++ - 删除一个对象及其在 C++ 中的 vars

> ID：14043787
> 
> 赞同：-1
> 
> 时间：2012-12-26T17:12:37.033
> 
> 标签：c++

我有一堂课，我想删除它。类内部是各种变量、字符串、向量等。

当我从另一个班级打电话时：

```
delete myClass; 
```

当我创建一个新的 myClass 时，变量似乎仍然存在。

我是否需要手动删除里面的每个var：

```
myClass::~myClass()
{
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:18:06.683

当该对象被销毁时，该对象的任何成员都将被销毁。例如：

```
struct A
{
  int x;
  char y;
  float* z;
};

void foo()
{
  A* ap = new A{5, 6};
  ap->z = new float(13.37f); // This will be leaked
  delete ap;
  // You may find that the following still works:
  // std::cout << ap.x << std::endl;
} 
```

之后`delete ap`， 指向的对象`ap`被销毁。它的所有成员都被销毁了: `x`, `y`, 并且`z`现在已经消失了。但是，请注意，这`z`只是一个指针。指针将被销毁，但不是`float`它指向的对象。您也需要确保自己`delete ap->z`。简单的判断方法是我们有两个`new`s 但只有一个`delete`- 这是一个很好的迹象，表明存在内存泄漏。此代码将泄漏动态分配的`float`.

如上面的代码注释中所述，您可能会发现尝试访问对象的成员仍然可以正常工作，并且您甚至可以获得正确的值。但是，这并不好。如果您尝试访问已被`delete`d 的对象的任何部分，您会得到*未定义的行为*。这意味着任何事情都可能发生，包括看起来工作正常。任何调用未定义行为的 C++ 都是完全不可靠的，并且可能会破坏宇宙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:17:37.660

如果它们是指向第一个实例唯一的类实例的指针，则必须删除它们。否则，它们将与它们的容器一起被删除。

# c++ - 如何在 C++ 中使用 pthreads 或 curses 同时将多个字符串输出到屏幕

> ID：14043788
> 
> 赞同：1
> 
> 时间：2012-12-26T17:12:37.720
> 
> 标签：c++, string, position

我在 DEV C++ 上编译我的应用程序，并使用 pthreads 库进行多线程。我的主线程包括将“Hello World”打印到屏幕的开头（0,0）。我新创建的线程包括将“星期一”打印到屏幕中间的顶行 (0,60)。由于我使用的是 pthread，它们同时执行，这很好。但是，由于只有 1 个光标，它一次只能打印一个。我希望它们都在它们执行的确切时刻被打印出来。我用简单的 cout << "Hello World"; 写到屏幕上。

我是否需要某种类型的 curses 库来在它们执行的确切时间编写多个字符串？或者我可以通过标准 C++ 来实现吗？请记住，我想输出 2 个东西，它一次输出一个。如何在不同坐标处同时输出 2 个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:35:54.840

就像 David H 在评论中所说，使用一个线程写入显示器，并有一个队列。

队列可能包含一些这样的数据：

```
class printing
{
 public:
   printing(int x, int y, const std::string &str);

 private:
   const std::string m_str;
   int m_x;
   int m_y;
};

std::queue<printing> print_queue; 
```

您将需要一个互斥锁或类似的东西来向队列添加/删除东西。

```
std::mutex print_queue_mutex;

void add_printing(printing &pr)
{
    print_queue_mutex.lock();
    print_queue.push_back(pr);
    print_queue_mutex.unlock();
} 
```

我会让您弄清楚如何执行实际的“从队列中打印”功能。它遵循相同的原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:45:36.413

创建线程在写入屏幕之前必须获取的锁。

# php - 要解决“条件赋值”问题，使用 !==false 会减慢脚本的速度。为什么？

> ID：14043789
> 
> 赞同：4
> 
> 时间：2012-12-26T17:12:39.833
> 
> 标签：php, mysql, zend-framework, zend-studio

我正在使用 zend studio 在 php 中进行编码。

在以下代码`zend studio`行中显示警告，但它工作正常并立即向我显示表格。 `while...``assignment in condition`

```
$oDB = new db;
print '<strong>Twitter Database Tables</strong><br />';
$result = $oDB->select('SHOW TABLES');
while ($row = mysqli_fetch_row($result)) {
    print $row[0] . '<br />';
} 
```

但是，当我使用以下代码解决此警告时，它不会显示警告，`zend studio`但会在很长一段时间后向我显示表格，`20 to 30 seconds`并在结果下显示很长的空白。为什么？

```
$oDB = new db;
print '<strong>Twitter Database Tables</strong><br />';
$result = $oDB->select('SHOW TABLES');
while (( $row = mysqli_fetch_row($result)) !==FALSE) {
    print $row[0] . '<br />';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:17:42.020

根据[手册](http://php.net/manual/en/mysqli-result.fetch-row.php)：

> mysqli_fetch_row() 返回对应于获取行的字符串数组，如果结果集中没有更多行，则返回 NULL。

您正在检查 BOOL 响应，因此脚本继续。使用 != FALSE 或 !== NULL。

代码可以是：

```
while (($row = mysqli_fetch_row($result)) != FALSE) { 
```

或者

```
while (($row = mysqli_fetch_row($result)) !== NULL) { 
```

# gcc - 如何使用汇编代码获得双精度 cos 函数值？

> ID：14043791
> 
> 赞同：1
> 
> 时间：2012-12-26T17:12:54.250
> 
> 标签：gcc, assembly

我现在正在运行以下汇编代码来获取`cos`函数值：

```
float cosx( float radians ) {
    float result;

    __asm__ __volatile__ ( "fld %1;"
                            "fcos;"
                            "fstp %0;"
                            : "=m" (result)
                            : "m" (radians)
    ) ;
    return result ;
} 
```

但是，上面的函数可以接受float参数，得到的函数值也是float类型。因此，我正在编写一个可以接受双参数的类似函数，并且返回的函数值也应该达到双精度：

```
double cosx( double radians ) {
    double result;

    __asm__ __volatile__ ( "fld %1;"
                            "fcos;"
                            "fstp %0;"
                            : "=m" (result)
                            : "m" (radians)
    ) ;
    return result ;
} 
```

然而，第二个功能已被证明不能正常工作。因此，我想知道我应该怎么做才能使第二个功能正常工作。谢谢！我正在使用 gcc 来编译上述代码。

**编辑：** 在这里，我将说明为什么第二个功能不能正常工作：

```
int main() {
    float theta ;
    printf( "Enter theta  : " ) ;
    scanf( "%f", &theta ) ;  
     printf( "cosx(%f) = %lf\n", theta, cosx(theta) );  // line 5
     printf( "cosx(%f) = %lf\n", theta, cosx(double(theta)) ); // line 6

    return 0 ;
} 
```

As we can see line5 and line6 invoke the first and the second function respectively. We expect they can have the same value. However, the output of the demonstration program is as follows:

```
Enter theta in  :  0.5236 // pi/6
cos(0.5236) = 0.8660;
cos(0.5236) = 0.0000; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:59:40.893

GCC is picky about the operand types:

```
__asm__ __volatile__ ( "fld %1;"
                        "fcos;"
                        "fstp %0;"
                        : "=m" (result)
                        : "m" (radians) 
```

Should be:

```
__asm__ __volatile__ ( "fldl %1;"
                        "fcos;"
                        "fstpl %0;"
                        : "=m" (result)
                        : "m" (radians) 
```

Though you could also write it as:

```
__asm__ __volatile__ ( "fldl %1;"
                      "fcos;"
                      : "=t" (result)
                      : "m" (radians)
                      ) ; 
```

(and the same for the `float` version)

# objective-c - NSString writeToFile、NSSavePanel 和写权限

> ID：14043795
> 
> 赞同：3
> 
> 时间：2012-12-26T17:13:06.223
> 
> 标签：objective-c, cocoa

我只学习 Cocoa/Objective C 几天了，所以很抱歉这可能很简单/很明显，但这让我很困惑。

我已经编写了这个处理程序，用于将 3 个浮点数保存到一个文本文件中。但是，当我运行它时，文件没有被保存。任何人都可以建议我的代码中是否存在错误，或者您是否认为还有其他东西（例如文件写入权限）阻止了文件被写入。

研究使我研究了沙盒，但这很快就变得令人困惑，我希望仅在调试中从 xcode 运行应用程序就可以让我写入我的用户目录。

继承人的代码：

```
- (IBAction)saveResultsAction:(id)sender {

    //Sets up the data to save
    NSString *saveLens = [NSString stringWithFormat:@"Screen width is %.02f \n Screen Height is %.02f \n Lens is %.02f:1",
        self.myLens.screenWidth,
        self.myLens.screenHeight,
        self.myLens.lensRatio];

    NSSavePanel *save = [NSSavePanel savePanel];

    long int result = [save runModal];

    if (result == NSOKButton) {
        NSURL *selectedFile = [save URL];
        NSLog(@"Save URL is %@", selectedFile);
        NSString *fileName = [[NSString alloc] initWithFormat:@"%@.txt", selectedFile];
        NSLog(@"Appended URL is %@", fileName);
        [saveLens writeToFile:fileName
                   atomically:YES
                     encoding:NSUTF8StringEncoding
                        error:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:16:33.063

NSURL 对象不是 POSIX 路径..

它是一个 URL 并获取它的描述不会使它成为一个路径

* * *

`NSString *fileName = [selectedFile.path stringByAppendingPathExtension:@"txt"];`

* * *

但如前所述，您根本不必附加 .txt 。只需使用面板返回的内容。否则，会出现沙盒错误，因为您无权访问修改后的文件名:)

`NSString *fileName = selectedFile.path;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:27:29.103

问题是您不需要将文件扩展名附加到 URL。扩展名已经存在。您可以直接这样做：

```
if (result == NSOKButton)
{   
    [saveLens writeToURL: [save URL]
                atomically:YES
                  encoding:NSUTF8StringEncoding
                     error:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:59:37.890

`NSError`我看到您已经接受了答案，但了解如何使用指针调试此类问题也可能会有所帮助。

Cocoa 使用`NSError`with 方法调用来生成错误条件，从而丰富地封装错误。（Objective-C 也有例外，但它们是为程序员错误的情况保留的，例如数组索引超出范围，或者永远不应该出现的 nil 参数。）

当您有一个接受错误指针的方法时，通常它还会返回一个`BOOL`指示整体成功或失败的值。以下是获取更多信息的方法：

```
NSError *error = nil;
if (![saveLens writeToFile:fileName
                atomically:YES
                  encoding:NSUTF8StringEncoding
                     error:&error]) {
    NSLog(@"error: %@", error);
} 
```

甚至：

```
NSError *error = nil;
if (![saveLens writeToFile:fileName
                atomically:YES
                  encoding:NSUTF8StringEncoding
                     error:&error]) {
    [NSApp presentError:error];
} 
```

# java - 在战争项目中加载文件图像

> ID：14043799
> 
> 赞同：3
> 
> 时间：2012-12-26T17:13:44.640
> 
> 标签：java, spring, file-io

我正在做一个 javaEE 应用程序，我正在使用 spring 注入我的 ejbs 和 WAS7，目前我正在 Windows 环境中运行它，但最终它将在 unix 环境中运行。所以我创建了一个java类作为我的spring控制器，我应该从jsp获取一些数据并将其转换为excel。因此，当我尝试从我的网络内容文件夹中获取图像时，我可以将其放入我的 excel 中，但找不到文件。这是我到目前为止没有成功的尝试：

```
 String path = File.separatorChar + "img" + File.separatorChar +  File.separatorChar + "logoCorporativo.jpg";
    System.out.println(path);

    try {
        FileInputStream fis = new FileInputStream(path);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

和

```
 String path = File.separator + "img" + File.separator +  File.separator + "logoCorporativo.jpg";
        System.out.println(path);

    try {
        FileInputStream fis = new FileInputStream(path);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我发现当我在浏览器中输入“http://localhost:9080/AdminMapasWeb/img/logoCorporativo.jpg”时，我可以看到图像。

有没有人收到 FileNotFound 异常？？？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:19:03.710

采用

```
File file = getRequest().getServletContext().getRealPath("/img/logoCorporativo.jpg"); 
```

getRealPath 将 URL 根相对路径（使用斜杠“/”）转换为文件。如果战争没有在部署时自行解包，getRealPath 将返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:18:53.250

您的文件被打包在 *.war 存档中，因此它不是文件系统上的独立文件（就像它正在开发中一样）尝试使用 getClass().getClassLoader.getResourceAsStream() 来获取它

# versioning - 共享网络主机的版本控制解决方案

> ID：14043802
> 
> 赞同：1
> 
> 时间：2012-12-26T17:14:13.987
> 
> 标签：versioning, shared-hosting

我正在与位于世界各地的一些志愿者开发人员建立一个网站。我们正在使用 HostGator 共享托管计划，因此我们获得了 cPanel、FTP 等，但没有服务器上的版本控制。

对于良好的开发实践，最好有一个可用的站点测试版本，并在其背后提供版本控制系统。但是，我们都在 NAT 后面的网络上，所以即使我们使用集中式版本控制系统（GitHub 等），我们仍然必须将更改下拉到本地服务器（即 192.0.0.x 私有 SQL/ HTTP 服务器）用于版本之间的测试。

是否有任何（免费首选）系统可用于版本化测试站点？由于成本和维护复杂性，我一直在避免使用 VPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:30:10.403

> 是否有任何（免费首选）系统可用于版本化测试站点？

因为

*   测试站点是“带有生产代码的站点，用于测试环境”
*   版本化站点与“版本化代码”是同一个对象

**任何可用于管理*某些代码的***SCM**都可以用于此任务。Web 开发与任何其他在后台使用 VCS 的软件开发**没有**任何*显着差异：只有构建和部署过程有变化，因为您***

 ***   在 Web 的情况下无需编译
*   必须部署到*某个目的地*才能运行|测试|使用开发的结果

创建*本地测试环境*（为团队中的每个开发人员（？）分别创建），使用任何选择的 SCM（DVCS 可能会更好，更容易，也许）和您的 SCM（或手工）的适当 *-hooks 以交付更改从工作空间|存储库到测试站点的代码**

# linux - 如何在 GRUNT shell 中取消命令

> ID：14043805
> 
> 赞同：4
> 
> 时间：2012-12-26T17:14:45.577
> 
> 标签：linux, shell, hbase, apache-pig

这可能是一个更普遍的问题：linux 中的许多工具都有自己的 shell。就我而言，我使用 pig 和 hbase。有时当你在shell中执行一个命令时，它会返回很多结果，我想取消它。例如，假设您执行 cat 'a.txt' 并且该文件很大。在不退出外壳的情况下取消它的最佳方法是什么。如果我按 Ctrl+c 它将退出 shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:31:58.303

`kill <job_id>` 将终止具有指定 id 的 mapreduce 作业。这不完全是您正在寻找的，但我知道没有更简单的解决方案。

# css - 用新的卢比符号替换卢比的网站设计问题

> ID：14043809
> 
> 赞同：2
> 
> 时间：2012-12-26T17:15:12.690
> 
> 标签：css, web

如何在设计网站时包含新的印度卢比符号？

```
<span class="add-on">**Rupees**</span><input id="prependedInput" type="text" style="width:67px"></div>
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#" style="float: none; margin-left: -3px;"><span class="caret"></span></a> 
```

我想用新的新符号替换**卢比**怎么做？有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:20:24.847

1）这个有一个CSS......

```
 <link rel="stylesheet" type="text/css" href="http://cdn.webrupee.com/font">

 <span class="WebRupee">Rs</span> 
```

2）如果你想要一个 JavaScript 替代品

```
<script src="http://cdn.webrupee.com/js" type="text/javascript"></script> 
```

如果您在网页的 HEAD 区域添加上述脚本引用，则所有使用“Rs”。或“Rs”将转换为印度卢比符号。

3）如果计算机支持Unicode 6.0，那么印度卢比符号可以使用以下HTML代码显示在网页中：[₹] ₹

# html - 如何使用? I can only use: data.. , not: Can I change the syntax: into this style: data style? undefined method `attribute_method_matcher' for nil:NilClass I'm getting this error "undefined method `attribute_method_matcher' for nil:NilClass". My controller name is Cad Its function is def index @cadempty = Cad.new @caddata = Cad.all end The error is on creating the new object. If I comment Cad.new the code works fine. Earlier I thought it could be because I have a method named 'new' and I was Using User.new to create a blank object for the form. But its not the error I renamed the method to something else and the error still exists. I have no idea what I'm doing wrong. htmldata-urihtml-object 4 1 回答 1 This answer is useful 2 不。 对象元素的子节点： 提供替代内容以防无法加载对象数据 以 HTML 而非 URI 的形式表示 您可以得到的最接近的方法是解码嵌入在 URI 中的 HTML（尽管声称它是text/html，但 URI 似乎没有解析为任何理智的东西），然后使用它而不是根本没有对象。 于 2012-12-26T17:17:22.613 回答 Related 2 php - 将变量替换为多行 shell 变量 1 .net - 更改一个类的服务接口是否需要更新所有类的服务引用？ 2 ios - 无法让 postnotification 正常工作 7 html - 杂散结束标签“头” 1 ios - 开发自定义 ios/ipad 应用程序以访问 Active Directory 中的 windows 共享文件夹 1 php - MySQL 在同一个表上的多个连接在 while 循环中只选择 1 行 2 java - 如何在Java中将节点与下一个节点链接 1 vb6 - VB6 DatePicker 语言格式 2 excel - Excel求和和过滤 1 variables - 生成线程后 gdb 无法访问变量 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14043811
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, data-uri, html-object

I can only use:

```
<object> data.. </object>, 
```

not:

Can I change the syntax:

```
<object data="data:text/html;base64,drgsdrgsdrgsdrgsdrgsdrgsdrg=="></object> 
```

into this style:

```
<object>data</object> style? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:17:22.613

不。

对象元素的子节点：

1.  提供*替代*内容以防无法加载对象数据
2.  以 HTML 而非 URI 的形式表示

您可以得到的最接近的方法是解码嵌入在 URI 中的 HTML（尽管声称它是`text/html`，但 URI 似乎没有解析为任何理智的东西），然后使用它而不是根本没有对象。

# ruby-on-rails - nil:NilClass 的未定义方法“attribute_method_matcher”

> ID：14043813
> 
> 赞同：7
> 
> 时间：2012-12-26T17:15:55.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到此错误“nil:NilClass 的未定义方法 `attribute_method_matcher'”。

我的控制器名称是 Cad 它的功能是

```
 def index
     @cadempty = Cad.new
     @caddata = Cad.all

  end 
```

错误在于创建新对象。如果我评论`Cad.new`代码工作正常。

早些时候我认为这可能是因为我有一个名为“new”的方法，并且我正在使用`User.new`为表单创建一个空白对象。但这不是我将方法重命名为其他方法的错误，并且错误仍然存​​在。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T17:22:04.580

也许您在数据库表中的列名之一是保留字。

> 避免使用语言中保留字的方法名称。

# php - How set requirements for text input field (html/php) ?

> ID：14043814
> 
> 赞同：4
> 
> 时间：2012-12-26T17:15:57.997
> 
> 标签：php, html, input, filtering

In my php script i have this input field.

```
 <input type="text" name="try" size="10" id="try" maxlength="5" > 
```

What is the easy way to make i require 5 characters and show an error message if they are not only letters.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:23:29.880

使用 HTML5，您可以使用以下[`pattern`](http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-pattern)属性：

```
<input type="text" name="try" size="10" pattern="[A-Za-z]{5}" title="5 alphabetic characters exactly"> 
```

这将允许正好 5 个字符，只能是大写或小写字母字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:23:47.593

您可能可以在客户端的 jQuery 中做到这一点。您还需要在服务器端执行此操作，因为 JavaScript 可以（并且将）被攻击媒介绕过。像这样的正则表达式将在 PHP 中进行服务器端验证。

$rgx = '/[AZ]{5,}/i';

结合方法...

[http://www.laprbass.com/RAY_temp_axxess.php?q=abcde](http://www.laprbass.com/RAY_temp_axxess.php?q=abcde)
[http://www.laprbass.com/RAY_temp_axxess.php?q=ab](http://www.laprbass.com/RAY_temp_axxess.php?q=ab)
[http://www.laprbass.com/RAY_temp_axxess.php?q= abcdefg](http://www.laprbass.com/RAY_temp_axxess.php?q=abcdefg)

```
<?php // RAY_temp_axxess.php
error_reporting(E_ALL);

// A REGEX FOR 5+ LETTERS
$rgx = '/^[A-Z]{5,}$/i';

if (isset($_GET['q']))
{
    if (preg_match($rgx, $_GET['q']))
    {
        echo 'GOOD INPUT OF 5+ LETTERS IN ';
    }
    else
    {
        echo "VALIDATION OF {$_GET['q']} FAILED FOR REGEX: $rgx";
    }
}

// CREATE THE FORM
$form = <<<ENDFORM
<form>
<input type="text" name="q" pattern="[A-Za-z]{5,}" title="At least 5 alphabetic characters" />
<input type="submit" />
</form>
ENDFORM;
echo $form; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:29:44.077

假设页面提交给自己。

又快又脏。

```
<?php
$errors = array();
if (isset($_POST['try']) & strlen($_POST['try']) != 5 & ctype_alpha( $_POST['try'] != true) {
$error['try'] = "This field must contains 5 characters and contain only a-z and A-Z";
// stop whatever you normally do if submitted.
}
?> 
```

稍后在显示此字段的页面上。

```
<?php if (isset($errors['try'])) { echo $errors['try']; } ?>
<input type="text" name="try" size="10" id="try" maxlength="5" > 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T17:23:03.863

```
<input type="text" pattern=".{5,}" required /> 
```

尝试这个

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T17:25:02.880

validate your form before view like this and use strlen to check the length of input:

```
if(isset($_POST['mySubmit'])) {
    if(strlen($_POST['try']) < 5) {
        $error = "Too short";
    }
    else {
        $valid = true;
        //Do whathever you need when form is valid
    }
}
else {
    if(isset($error)) {
        echo "<p>$error</p>";
    }

    //echo your form here
    echo "<form method='post' action='thisPhpScript.php'>
              <input type='text' name='try' size='10' id='try' maxlength='5' >
          </form>";
} 
```

Haven't tested this so might have syntax errors.

# mysql - MySQL Replace with Char Function

> ID：14043815
> 
> 赞同：3
> 
> 时间：2012-12-26T17:15:59.527
> 
> 标签：mysql, replace, char

I try to create a MySQL function to parse a given string into a version I can use in an URL. So I have to eliminate some special characters and I try to do it with a loop to keep the code simple and to not have to specify any character.

My current code is:

```
DECLARE parsedString VARCHAR(255);

# convert to low chars
SET parsedString    =   CONVERT(paramString USING latin1);
SET parsedString    =   LOWER(parsedString);

# replace chars with A
SET @x = 223;

charReplaceA: WHILE @x <= 229 DO
    SET @x = @x + 1;

    SET parsedString    =   REPLACE (parsedString, CHAR(@x USING ASCII), 'a');
END WHILE charReplaceA;

# convert to utf8 and return
RETURN CONVERT(parsedString USING utf8); 
```

If I try to use my code it doesn't work. Somehow it doesn't recognize the CHAR(@x USING ASCII) part.

```
SELECT urlParser('aäeucn'); 
```

returns

```
aäeucn 
```

If I change my code to

```
SET parsedString    =   REPLACE (parsedString, 'ä', 'a'); 
```

it somehow works and returns

```
aaeucn 
```

Does anyone have any idea how to use REPLACE() with CHAR()? I don't want to specify any possible character.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:27:14.707

你可以试试

```
REPLACE(CONVERT('aäeucn' USING ascii), '?', 'a') 
```

将国际字符转换为 ascii 时，所有非 ascii 字符均由文字“？”表示 特点。然后您不必执行循环（因此它可能会运行得更快）。

还要考虑在 URL 中编码国际字符的其他方法。
见[http://www.w3.org/International/articles/idn-and-iri/](http://www.w3.org/International/articles/idn-and-iri/)

* * *

回复您的评论：

如果您需要逐个字符替换，我不会在 SQL 函数中执行此操作。MySQL 函数效率不高，编码和调试很麻烦。我建议将 utf8 字符串取回您的应用程序并在那里进行字符翻译。

您没有指定您正在使用哪种应用程序编程语言，但就其价值而言，PHP 支持`strtr()`可用于此场景的函数。手册页中甚至还有一个将 i18n 字符映射到 ascii 字符的示例：http: [//php.net/strtr](http://php.net/strtr)

```
$addr = strtr($addr, "äåö", "aao"); // That was easy! 
```

该解决方案将比 MySQL 存储函数更快、更容易编写代码。

# php - 在 IdP 身份验证之后/SP 重定向之前将文本附加到用户的帐户

> ID：14043820
> 
> 赞同：3
> 
> 时间：2012-12-26T17:16:21.240
> 
> 标签：php, authentication, single-sign-on, saml, saml-2.0

在验证 IdP 之后，并且在系统将他们重定向到 SP 之前，我需要将电子邮件域 (@domain.com) 附加到用户的帐户。

我正在使用此页面寻求帮助，但无法断言我是否会按字面输入附加文本，或者通过引用从 LDAP 检索到的另一个属性：http: [//simplesamlphp.org/docs/stable/simplesamlphp-authproc](http://simplesamlphp.org/docs/stable/simplesamlphp-authproc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:49:45.473

您必须在 metadata/saml20-idp-hosted.php 应用过滤器

使用[PHP 过滤器](http://simplesamlphp.org/docs/stable/core%3aauthproc_php)：

```
'authproc.idp' => array(
    60 => array(
        'class' => 'core:PHP',
        'code' => '
             if (!empty($attributes["uid"])) {
                  $mail = $attributes["uid"][0] . "@domain.com";
                  $attributes["mail"] = array($mail);
             } //Closing bracket was missing
        ',
    ),
 ), 
```

例如，此过滤器基于“uid”属性创建“邮件”属性。请注意，$attributes 处的属性值始终是一个数组。

# android - How to get location in Android within a service

> ID：14043824
> 
> 赞同：-2
> 
> 时间：2012-12-26T17:17:07.260
> 
> 标签：android, service, gps, locationlistener

I want to start a service which will run in the background, and will show latitude and longitude every 30 to 45 seconds. Below is my code which I'm using:

```
public class LocalService extends Service implements LocationListener {
    private final static String TAG = "LocalService";
    LocationManager lm;

    public LocalService() {
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        subscribeToLocationUpdates();
    }

    public void onLocationChanged(Location loc) {
        Log.d(TAG, loc.toString());
        Toast.makeText(getApplicationContext(), loc.getLatitude() + " - " + loc.getLongitude(), Toast.LENGTH_LONG).show();
        Log.i("Location", loc.getLatitude() + " - " + loc.getLongitude());
    }

    public void onProviderEnabled(String s) {
    }

    public void onProviderDisabled(String s) {
    }

    public void onStatusChanged(String s, int i, Bundle b) {
    }

    public void subscribeToLocationUpdates() {
        this.lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 30, 0, this);
    }
} 
```

I'm calling my service like this:

```
startService(new Intent(TimerServiceActivity.this,
         LocalService.class)); 
```

This is my manifest code for service:

```
<service android:name="LocalService" > 
```

Whenever I am running this code it gives me an error message that unfortunately, `TimerService` has stopped.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:21:42.573

您是否在清单中添加了权限？

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

相反，我强烈建议使用针对电池使用优化的这个库，并且使用起来相当简单：

[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

> 基于 Reto Meier 的博客文章 A Deep Dive Into Location 中的概念和改编自 android-protips-location 的一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:41:56.227

您需要先订阅提供程序。为此，请在 onCreate() 方法的开头添加：

```
 locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    provider = locationManager.getBestProvider(criteria, false);

    Location location = locationManager.getLastKnownLocation(provider);
    Log.v(TAG, "Init");
    // Initialize the location fields
    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        onLocationChanged(location);
    } 
```

# windows - Where to add roaming setting in Windows 8 tutorial - Beginner

> ID：14043825
> 
> 赞同：1
> 
> 时间：2012-12-26T17:17:13.063
> 
> 标签：windows, windows-8

I am new to Windows 8 development. i am following the tutorial provided by the Windows 8 team and i have run across some problem.

Can someone please tell me where i should insert the following code block explained in the [tutorial](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx). (In step 2)

```
 Windows.Storage.ApplicationDataContainer roamingSettings = 
            Windows.Storage.ApplicationData.Current.RoamingSettings;
        roamingSettings.Values["userName"] = nameInput.Text; 
```

I was looking at `MainPage.xaml.cs` but it doesn't have any definition of a TextField. So where should i add this code block.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:29:11.347

该定义位于 MainPage.xaml 而不是 MainPage.xaml.cs：

```
 <TextBox x:Name="nameInput" Width="300" HorizontalAlignment="Left"
                     TextChanged="NameInput_TextChanged"/> 
```

MainPage.xaml.cs 是 xaml 的部分类，因此在 xaml 中声明的任何控件都可以从 .cs 文件中获得。

[请参阅此处](http://msdn.microsoft.com/en-us/library/windows/apps/jj676794.aspx#view_codexaml)的完整示例。

# javascript - 使用 innerHTML 和/或替换修改 HTML 文本

> ID：14043828
> 
> 赞同：1
> 
> 时间：2012-12-26T17:17:20.120
> 
> 标签：javascript, jquery, netbiscuits

所以在这一点上，我已经被这个 jQuery 问题困扰了好几天。我正在开发一个源自 Mobile 的 Web 应用程序，我的公司通过 NetBiscuits for mobile 进行开发。

长话短说 NetBiscuits 使用他们自己的标记，我无法让这个字符串“[BR][BR]”出现在错误消息中。[BR] 是换行的 BML，我需要一些 jQuery 来将这个傻瓜从我们的网络应用程序中取出！

[ ] 本质上需要是 < > 或什么都没有（首选）

我给了表单：errors 一个“erMsg”的 div id。这是我在javascript中的代码：

```
document.getElementById("erMsg").value = document.getElementById("erMsg").innerHTML(erMsg.replace('[BR][BR]', '<br><br>')); 
```

我尝试了无数的方法和实践，包括使用 jQuery 和 JS、innerHTML 和 replace()。任何帮助都将被最亲切地接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:19:28.157

`innerHTML`不是函数，而是属性。你分配给它。

尝试这个：

```
var elem = document.getElementById('erMsg');
elem.innerHTML = elem.innerHTML.replace(/\[br\]/ig,'<br />'); 
```

# javascript - Highchart 缩放和 X 轴与类别的字符串数组

> ID：14043831
> 
> 赞同：3
> 
> 时间：2012-12-26T17:17:29.213
> 
> 标签：javascript, highcharts

我现在正在调整一个高图。以前，我们在带有相关日期的图表上绘制点。该图表还`maxZoom:14 * 24 * 3600000`允许用户进一步向下钻取。

现在我将日期转换为 Year + Q#。所以现在不是 2011 年 9 月，而是在 X 轴上显示 2011 年第三季度。

但现在我有两个问题。

1）首先是它不允许我缩放，因为我将一个字符串数组传递`categories`到图表中。我希望它仍然能够缩放，即使 X 轴是字符串。据我所知，缩放虽然使用秒来在 X 轴上的日期之间进行插值。

2）第二个，当我突出显示图表上的数据点时`Invalid date`，即使我已将图表指定为`linear`。有没有一种方法可以添加一个显式值以在此处突出显示（即转换为 Year Quarter 之前的实际日期值？）

有没有办法解决这些问题？

相关代码：

```
plotData=[];
var month = window.countryData.scorecards[i].month - 1;
var year = window.countryData.scorecards[i].year;
categoriesQuarters.push(year + " Q" + parseInt(month/3 + 1));
plotData.push(value);  //Value is either a number or a string, depending on the graph.
....
xAxis: {
        type: 'linear',
        categories: categoriesQuarters
        },
series: [{
                name: graphData.country,
                data: plotData
            }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:52:53.077

使用标签格式化程序来做到这一点。

```
xAxis: {
    labels: {
        formatter: function() {
            var date = Highcharts.dateFormat('%Y-%m', this.value);
            date = date.split('-');
            return date[0] + " Q" + parseInt(date[1]) / 3 + 1;
        }
    }
} 
```

[**演示**](http://jsfiddle.net/JDUt2/)

# apache - 如何在 Nginx 中执行此操作

> ID：14043832
> 
> 赞同：1
> 
> 时间：2012-12-26T17:17:28.763
> 
> 标签：apache, nginx

我想知道如何将此 apache htaccess 转换为 nginx。

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^url/([^/]+)$ process.php?tk=$1 [L] 
```

这个对吗？

```
disable_symlinks off;
rewrite ^url/([^/]+)$ process.php?tk=$1 [L] 
```

# sql-server - 来自 cmd 的 dbmail 电子邮件

> ID：14043841
> 
> 赞同：0
> 
> 时间：2012-12-26T17:18:10.677
> 
> 标签：sql-server, sqlcmd, dbmail

是否可以使用 dbmail 从 cmd 发送电子邮件附件？我正在使用批处理文件使用 dbmail 发送电子邮件附件，但出现错误。这是我的代码：

```
sqlcmd -q "EXEC msdb.dbo.sp_send_dbmail @profile_name = 'ProfileName',
  @recipients='example@test.com',
  @subject='Test Attachment ',
  @body='Using dbmail to send attachment',
  @file_attachments='C:\document\example.txt'" 
```

# django - Nginx：unix:/ 和 unix:/// 之间的区别

> ID：14043842
> 
> 赞同：1
> 
> 时间：2012-12-26T17:18:26.340
> 
> 标签：django, nginx, uwsgi

两者之间的确切区别是什么：

```
uwsgi_pass unix:/foo/bar.sock 
```

和

```
uwsgi_pass unix:///foo/bar.sock 
```

在 nginx cfg 中获取 uwsgi 通行证？

django 生产环境的更好选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:50:49.817

[文档](http://wiki.nginx.org/HttpUwsgiModule)推荐`uwsgi_pass unix:/var/run/example.com.sock;`的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:33:28.470

和...之间的不同：

```
uwsgi_pass unix:/foo/bar.sock 
```

和

```
uwsgi_pass unix:///foo/bar.sock 
```

与之间相同：

```
uwsgi_pass unix:/foo/bar.sock 
```

和

```
uwsgi_pass unix:////////////////foo////bar.sock 
```

或者，与之间相同：

```
root /data/www/site.ru; 
```

和

```
root ///data/www/site.ru; 
```

我敢肯定，现在你已经明白了。;)

# java - 如何为所有 HttpClient 请求方法添加参数？

> ID：14043843
> 
> 赞同：13
> 
> 时间：2012-12-26T17:18:33.157
> 
> 标签：java, http, rest, apache-httpclient-4.x

我正在编写一些使用 Apache`HttpClient`版本`4.2.2`来访问 RESTful 3rd 方 API 的 Java 代码。此 API 具有利用HTTP `GET`、`POST`和. 需要注意的是，我使用的是 4.xx 版本而不是 3.xx，因为 API 从 3 到 4 发生了很大变化。我发现的所有相关示例都是针对 3.xx 版本的。`PUT``DELETE`

所有 API 调用都要求您提供`api_key`作为**参数**（无论您使用哪种方法）。这意味着无论我是在进行 GET、POST 还是其他方式，我都需要提供此`api_key`信息以便调用对服务器端进行身份验证。

```
// Have to figure out a way to get this into my HttpClient call,
// regardless of whether I'm using: HttpGet, HttpPost, HttpPut
// or HttpDelete...
String api_key = "blah-whatever-my-unique-api-key"; 
```

因此，我试图弄清楚如何提供`HttpClient`与`api_key`我的请求方法无关的方法（这又取决于我尝试使用的 RESTful API 方法）。它看起来`HttpGet`甚至不*支持*参数的概念，并且`HttpPost`使用了一个叫做`HttpParams`; 但是这些`HttpParams`似乎只存在于 3.xx 版本的`HttpClient`.

所以我问：**将我的`api_key`字符串附加/添加到所有四个**的正确 v4.2.2 方法是什么：

*   `HttpGet`
*   `HttpPost`
*   `HttpPut`
*   `HttpDelete`

提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-27T03:49:42.903

您可以使用***URIBuilder***类为所有 HTTP 方法构建请求 URI。URI builder 提供***setParameter***方法来设置参数。

```
URIBuilder builder = new URIBuilder();
builder.setScheme("http").setHost("www.google.com").setPath("/search")
    .setParameter("q", "httpclient")
    .setParameter("btnG", "Google Search")
    .setParameter("aq", "f")
    .setParameter("oq", "");
URI uri = builder.build();
HttpGet httpget = new HttpGet(uri);
System.out.println(httpget.getURI()); 
```

输出应该是

```
http://www.google.com/search?q=httpclient&btnG=Google+Search&aq=f&oq= 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-15T10:15:34.170

如果您想传递一些 http 参数并发送 json 请求，也可以使用这种方法：

（注意：我添加了一些额外的代码，以防它帮助任何其他未来的读者，并且导入来自 org.apache.http 客户端库）

```
public void postJsonWithHttpParams() throws URISyntaxException, UnsupportedEncodingException, IOException {

    //add the http parameters you wish to pass
    List<NameValuePair> postParameters = new ArrayList<>();
    postParameters.add(new BasicNameValuePair("param1", "param1_value"));
    postParameters.add(new BasicNameValuePair("param2", "param2_value"));

    //Build the server URI together with the parameters you wish to pass
    URIBuilder uriBuilder = new URIBuilder("http://google.ug");
    uriBuilder.addParameters(postParameters);

    HttpPost postRequest = new HttpPost(uriBuilder.build());
    postRequest.setHeader("Content-Type", "application/json");

    //this is your JSON string you are sending as a request
    String yourJsonString = "{\"str1\":\"a value\",\"str2\":\"another value\"} ";

    //pass the json string request in the entity
    HttpEntity entity = new ByteArrayEntity(yourJsonString.getBytes("UTF-8"));
    postRequest.setEntity(entity);

    //create a socketfactory in order to use an http connection manager
    PlainConnectionSocketFactory plainSocketFactory = PlainConnectionSocketFactory.getSocketFactory();
    Registry<ConnectionSocketFactory> connSocketFactoryRegistry = RegistryBuilder.<ConnectionSocketFactory>create()
            .register("http", plainSocketFactory)
            .build();

    PoolingHttpClientConnectionManager connManager = new PoolingHttpClientConnectionManager(connSocketFactoryRegistry);

    connManager.setMaxTotal(20);
    connManager.setDefaultMaxPerRoute(20);

    RequestConfig defaultRequestConfig = RequestConfig.custom()
            .setSocketTimeout(HttpClientPool.connTimeout)
            .setConnectTimeout(HttpClientPool.connTimeout)
            .setConnectionRequestTimeout(HttpClientPool.readTimeout)
            .build();

    // Build the http client.
    CloseableHttpClient httpclient = HttpClients.custom()
            .setConnectionManager(connManager)
            .setDefaultRequestConfig(defaultRequestConfig)
            .build();

    CloseableHttpResponse response = httpclient.execute(postRequest);

    //Read the response
    String responseString = "";

    int statusCode = response.getStatusLine().getStatusCode();
    String message = response.getStatusLine().getReasonPhrase();

    HttpEntity responseHttpEntity = response.getEntity();

    InputStream content = responseHttpEntity.getContent();

    BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
    String line;

    while ((line = buffer.readLine()) != null) {
        responseString += line;
    }

    //release all resources held by the responseHttpEntity
    EntityUtils.consume(responseHttpEntity);

    //close the stream
    response.close();

    // Close the connection manager.
    connManager.close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-08T19:12:34.077

这里很重要的一点是明确地说出你必须使用的 apache 的包，因为有不同的方法来实现一个 get 请求。

例如，您可以使用`Apache Commons`或`HttpComponents`。在这个例子中，我将使用`HttpComponents (org.apache.http.*)`

**请求类：**

```
package request;

import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.utils.URIBuilder;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

import Task;

public void sendRequest(Task task) throws URISyntaxException {

    URIBuilder uriBuilder = new URIBuilder();
    uriBuilder.setScheme("http")
            .setHost("localhost")
            .setPort(8080)
            .setPath("/TesteHttpRequest/TesteDoLucas")
            .addParameter("className", task.getClassName())
            .addParameter("dateExecutionBegin", task.getDateExecutionBegin())
            .addParameter("dateExecutionEnd", task.getDateExecutionEnd())
            .addParameter("lastDateExecution", task.getDateLastExecution())
            .addParameter("numberExecutions", Integer.toString(task.getNumberExecutions()))
            .addParameter("idTask", Integer.toString(task.getIdTask()))
            .addParameter("numberExecutions" , Integer.toString(task.getNumberExecutions()));
    URI uri = uriBuilder.build();

    HttpGet getMethod = new HttpGet(uri);

    CloseableHttpClient httpclient = HttpClients.createDefault();

    CloseableHttpResponse response = null;

    try {
        response = httpclient.execute(getMethod);
    } catch (IOException e) {
        //handle this IOException properly in the future
    } catch (Exception e) {
        //handle this IOException properly in the future
    }
} 
```

我正在使用 Tomcat v7.0 服务器，然后上面的类接收一个任务并将其发送到链接*[http://localhost:8080/TesteHttpRequest/TesteDoLucas](http://localhost:8080/TesteHttpRequest/TesteDoLucas)*中的特定 servlet 。

我的动态 Web 项目名为*TesteHttpRequest*，我的 servlet 由 url */TesteDoLucas 参与*

**任务类：**

```
package bean;

public class Task {

    private int idTask;
    private String taskDescription;
    private String dateExecutionBegin;
    private String dateExecutionEnd;
    private String dateLastExecution;
    private int numberExecutions;
    private String className;

    public int getIdTask() {
        return idTask;
    }

    public void setIdTask(int idTask) {
        this.idTask = idTask;
    }

    public String getTaskDescription() {
        return taskDescription;
    }

    public void setTaskDescription(String taskDescription) {
        this.taskDescription = taskDescription;
    }

    public String getDateExecutionBegin() {
        return dateExecutionBegin;
    }

    public void setDateExecutionBegin(String dateExecutionBegin) {
        this.dateExecutionBegin = dateExecutionBegin;
    }

    public String getDateExecutionEnd() {
        return dateExecutionEnd;
    }

    public void setDateExecutionEnd(String dateExecutionEnd) {
        this.dateExecutionEnd = dateExecutionEnd;
    }

    public String getDateLastExecution() {
        return dateLastExecution;
    }

    public void setDateLastExecution(String dateLastExecution) {
        this.dateLastExecution = dateLastExecution;
    }

    public int getNumberExecutions() {
        return numberExecutions;
    }

    public void setNumberExecutions(int numberExecutions) {
        this.numberExecutions = numberExecutions;
    }

    public String getClassName() {
        return className;
    }

    public void setClassName(String className) {
        this.className = className;
    }
} 
```

**小服务程序类：**

```
package servlet;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/TesteDoLucas")
public class TesteHttpRequestServlet extends HttpServlet {
     private static final long serialVersionUID = 1L;

     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String query = request.getQueryString();
        System.out.println(query);
     }

     protected void doPost(HttpServletRequest request, HttpServletResponse   response) throws ServletException, IOException {
        doGet(request, response);
        }
    } 
```

发送的查询参数将显示在控制台。

> className=java.util.Objects%3B&dateExecutionBegin=2016%2F04%2F07+22%3A22%3A22&dateExecutionEnd=2016%2F04%2F07+06%3A06%3A06&lastDateExecution=2016%2F04%2F07+11%3A11%3A11&numberExecutions=10&idTask=1 10

要修复编码，您可以查看此处：[HttpServletRequest UTF-8 Encoding](https://stackoverflow.com/questions/16527576/httpservletrequest-utf-8-encoding)

# c# - 为什么我的静态字典没有初始化？

> ID：14043849
> 
> 赞同：0
> 
> 时间：2012-12-26T17:19:28.097
> 
> 标签：c#

我正在使用一个大字典，我只想创建一次来存储一些信息以及一个静态函数来从中提取信息，如下所示：

```
public static class AceMimeInfo
{
    static Dictionary<string, Info> mimedictionary = new Dictionary<string, Info>
    {
        {".abap", new Info("abap", "ABAP")},
        {".asciidoc", new Info("asciidoc", "AsciiDoc")},
        {".c9search_results", new Info("c9search", "C9Search")},
        {".coffee", new Info("coffee", "CoffeeScript")},
        {".cf", new Info("coffee", "CoffeeScript")},
        {".xul", new Info("xml", "XML")},
        {".xbl", new Info("xml", "XML")},
        {".xq", new Info("xquery", "XQuery")},
        {".yaml", new Info("yaml", "YAML")}
    };

    public class Info
    {
        public string Mode;
        public string Name;

        public Info(string mode, string name)
        {
            Mode = mode;
            Name = name;
        }
    }

    public static string GetMode(string fileext)
    {
        string fe;

        fe = fileext.ToLower();
        if(!fe.StartsWith("."))
            fe = "." + fe;

        if (mimedictionary.ContainsKey(fe))
            return mimedictionary[fe].Mode;
        return "";
    }
} 
```

但是，当我逐步`GetMode`使用调试器时，字典`mimedictionary`始终为空。我需要做些什么来确保不是这种情况？任何有关这样做的更好方法的建议也将不胜感激。

我这样称呼`GetMode`它：

```
string mode = AceMimeInfo.GetMode("filename.cpp"); 
```

提前致谢

**更新：**

我尝试了上面的代码，它确实有效。上面的字典是我实际使用的字典的较短版本（因为它很长）。

这是我正在使用的实际课程 - 它不起作用。当我缩短字典时，它确实有效。

```
public static class AceMimeInfo
{
    static Dictionary<string, Info> mimedictionary = new Dictionary<string, Info>
    {
        {".abap", new Info("abap", "ABAP")},
        {".asciidoc", new Info("asciidoc", "AsciiDoc")},
        {".c9search_results", new Info("c9search", "C9Search")},
        {".coffee", new Info("coffee", "CoffeeScript")},
        {".cf", new Info("coffee", "CoffeeScript")},
        {".cfm", new Info("coldfusion", "ColdFusion")},
        {".cs", new Info("csharp", "C#")},
        {".css", new Info("css", "CSS")},
        {".dart", new Info("dart", "Dart")},
        {".diff", new Info("diff", "Diff")},
        {".patch", new Info("diff", "Diff")},
        {".dot", new Info("dot", "Dot")},
        {".glsl", new Info("glsl", "Glsl")},
        {".frag", new Info("glsl", "Glsl")},
        {".vert", new Info("glsl", "Glsl")},
        {".go", new Info("golang", "Go")},
        {".groovy", new Info("groovy", "Groovy")},
        {".hx", new Info("haxe", "Haxe")},
        {".haml", new Info("haml", "HAML")},
        {".htm", new Info("html", "HTML")},
        {".html", new Info("html", "HTML")},
        {".xhtml", new Info("html", "HTML")},
        {".c", new Info("c_cpp", "C/C++")},
        {".cc", new Info("c_cpp", "C/C++")},
        {".cpp", new Info("c_cpp", "C/C++")},
        {".cxx", new Info("c_cpp", "C/C++")},
        {".h", new Info("c_cpp", "C/C++")},
        {".hh", new Info("c_cpp", "C/C++")},
        {".hpp", new Info("c_cpp", "C/C++")},
        {".clj", new Info("clojure", "Clojure")},
        {".jade", new Info("jade", "Jade")},
        {".java", new Info("java", "Java")},
        {".jsp", new Info("jsp", "JSP")},
        {".js", new Info("javascript", "JavaScript")},
        {".json", new Info("json", "JSON")},
        {".jsx", new Info("jsx", "JSX")},
        {".latex", new Info("latex", "LaTeX")},
        {".tex", new Info("latex", "LaTeX")},
        {".ltx", new Info("latex", "LaTeX")},
        {".bib", new Info("latex", "LaTeX")},
        {".less", new Info("less", "LESS")},
        {".lisp", new Info("lisp", "Lisp")},
        {".scm", new Info("lisp", "Lisp")},
        {".rkt", new Info("lisp", "Lisp")},
        {".liquid", new Info("liquid", "Liquid")},
        {".lua", new Info("lua", "Lua")},
        {".lp", new Info("luapage", "LuaPage")},
        {".lucene", new Info("lucene", "Lucene")},
        {".make", new Info("makefile", "Makefile")},
        {".md", new Info("markdown", "Markdown")},
        {".markdown", new Info("markdown", "Markdown")},
        {".m", new Info("objectivec", "Objective-C")},
        {".ml", new Info("ocaml", "OCaml")},
        {".mli", new Info("ocaml", "OCaml")},
        {".pl", new Info("perl", "Perl")},
        {".pm", new Info("perl", "Perl")},
        {".pgsql", new Info("pgsql", "pgSQL")},
        {".php", new Info("php", "PHP")},
        {".phtml", new Info("php", "PHP")},
        {".ps1", new Info("powershell", "Powershell")},
        {".py", new Info("python", "Python")},
        {".r", new Info("r", "R")},
        {".Rd", new Info("rdoc", "RDoc")},
        {".Rhtml", new Info("rhtml", "RHTML")},
        {".ru", new Info("ruby", "Ruby")},
        {".gemspec", new Info("ruby", "Ruby")},
        {".rake", new Info("ruby", "Ruby")},
        {".rb", new Info("ruby", "Ruby")},
        {".scad", new Info("scad", "OpenSCAD")},
        {".scala", new Info("scala", "Scala")},
        {".scss", new Info("scss", "SCSS")},
        {".sass", new Info("scss", "SCSS")},
        {".sh", new Info("sh", "SH")},
        {".bash", new Info("sh", "SH")},
        {".bat", new Info("sh", "SH")},
        {".sql", new Info("sql", "SQL")},
        {".styl", new Info("stylus", "Stylus")},
        {".stylus", new Info("stylus", "Stylus")},
        {".svg", new Info("svg", "SVG")},
        {".tcl", new Info("tcl", "Tcl")},
        {".tex", new Info("tex", "Tex")},
        {".txt", new Info("text", "Text")},
        {".textile", new Info("textile", "Textile")},
        {".typescript", new Info("typescript", "Typescript")},
        {".ts", new Info("typescript", "Typescript")},
        {".str", new Info("typescript", "Typescript")},
        {".xml", new Info("xml", "XML")},
        {".rdf", new Info("xml", "XML")},
        {".rss", new Info("xml", "XML")},
        {".wsdl", new Info("xml", "XML")},
        {".xslt", new Info("xml", "XML")},
        {".atom", new Info("xml", "XML")},
        {".mathml", new Info("xml", "XML")},
        {".mml", new Info("xml", "XML")},
        {".xul", new Info("xml", "XML")},
        {".xbl", new Info("xml", "XML")},
        {".xq", new Info("xquery", "XQuery")},
        {".yaml", new Info("yaml", "YAML")}
    };

    public class Info
    {
        public string Mode;
        public string Name;

        public Info(string mode, string name)
        {
            Mode = mode;
            Name = name;
        }
    }

    public static string GetMode(string fileext)
    {
        string fe;

        fe = fileext.ToLower();
        if(!fe.StartsWith("."))
            fe = "." + fe;

        if (mimedictionary.ContainsKey(fe))
            return "ace/mode/" + mimedictionary[fe].Mode;
        return "";
    }
} 
```

调试器输出：

`{"The type initializer for 'TestApp.AceMimeInfo' threw an exception."}`

**更新二：**重复键在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:56:48.490

您不止一次向字典添加键，这导致静态初始化程序引发异常。您可以通过检查`InnerException`引发的异常的属性来确定这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:29:31.853

这很可能只是一个调试器工件。运行时可能会延迟静态字段的初始化，直到真正需要它们。仅查看调试器中的字段不会触发该初始化，因此调试器可以观察程序本身未观察到的未初始化字段。

如果您的类有一个静态构造函数，它甚至会被迫延迟所有静态初始化，直到您实例化该类、访问静态字段或调用静态方法。

我很确定您的代码不会看到`mimedictionary == null`. 你可以添加一个`Debug.Assert(mimedictionary!=null)`，你会看到它没有被触发。

* * *

另一种可能导致麻烦的可能性是在初始化程序中构建一些循环调用。但是您发布的代码没有此属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:41:15.783

我无法重现该问题。字典已填满，在我的测试中包含 9 个条目。问题是您的参数“filename.cpp”不是字典中的键。并且也不包含“.cpp”。例如，如果您使用“.cf”调用它，它会起作用。

如果您也想将其应用于文件名，请使用此代码：

```
public static string GetMode(string fileOrExt)
{
    string ext = System.IO.Path.GetExtension(fileOrExt);
    if (ext == String.Empty) {
        ext = fileOrExt;
        if (!ext.StartsWith(".")) {
            ext = "." + ext;
        }
    }
    Info info;
    if (mimedictionary.TryGetValue(ext, out info)) {
        return info.Mode;
    }
    return "-";
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-26T17:25:13.947

I would suggest you create a static constructor and initialize all your static types there like in the following example:

```
public class AcmeMimeInfo
{
    private static List<string> list;
    static AcmeMimeInfo()
    {
        list = new List<string>();
    }
} 
```

# wordpress - Wordpress 模板代码搞砸了

> ID：14043850
> 
> 赞同：0
> 
> 时间：2012-12-26T17:19:28.127
> 
> 标签：wordpress, newline

这是我的 wordpresss 模板代码一次又一次发生的屏幕截图：

[https://www.box.net/shared/zrql76wiimr790587yxj](https://www.box.net/shared/zrql76wiimr790587yxj)

起初我认为这是一个记事本++问题。但这也发生在 phpstorm 上。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:26:19.100

Your code isn't messed up, this is a question about how your system handles lineendings.

Linux and OSX save lineendings differently from Windows.

Linux and OSX saves lineendings with a `Line Feed` (LF):

**\n**

While windows saves it with `Carriage Return + Line Feed` (CR+LF):

**\r\n**

So what is probably happening is that your file has been written on a system that doesn't save lineendings in the windows format. Your editor most probably supports these kind of line endings and can handle it, look into the menus of your editor.

** Below is part of an edit and not part of my answer.**

You can check [EditorConfig](http://editorconfig.org/) which can be helpful when you are trying to keep settings across projects and/or editors and also, if you keep your code under git, [Dealing with line endings](https://help.github.com/articles/dealing-with-line-endings) article from Github may be also helpful.

***End of edit***

Read more here: [Wiki article](http://en.wikipedia.org/wiki/Newline)

# javascript - 访问多维 JSON 数组中的深层 Json 元素

> ID：14043851
> 
> 赞同：0
> 
> 时间：2012-12-26T17:19:29.197
> 
> 标签：javascript, jquery, json

这是代码

```
var txt = '{"tblCommoHier":[ {"DEPT":[' + '{"DEPT":"100","DEPT_NAME":"Collectibles" },' + '{"DEPT":"105","DEPT_NAME":"Commodities" },' + '{"DEPT":"140","DEPT_NAME":"Souvenir" }]}]}';              
var obj = eval ("(" + txt + ")"); 
```

我正在尝试代码

```
obj.tblCommoHier.DEPT[1].DEPT 
```

伸手到*tblCommoHier下的**DEPT*元素的第一个元素，但我不断收到错误说未定义。

 *有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:23:05.567

一般来说，避免使用`eval`. 该`JSON`对象具有`parse`从字符串转换为 JSON 的方法。此外，当取消引用嵌套在数组中的对象时，您必须记住您的数组索引。JSON 对象的前两层具有数组值。正确的公式是：

```
var txt = '{"tblCommoHier":[ {"DEPT":[' + '{"DEPT":"100","DEPT_NAME":"Collectibles" },' + '{"DEPT":"105","DEPT_NAME":"Commodities" },' + '{"DEPT":"140","DEPT_NAME":"Souvenir" }]}]}';

var obj = JSON.parse(txt);

var elem = obj.tblCommoHier[0].DEPT[0].DEPT; 
```

这产生`"100"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:21:25.117

你要

```
obj.tblCommoHier[0].DEPT[0].DEPT 
```

这将产生“100”

如果您使用的是 jQuery，则应`$.parseJSON`使用`eval`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T17:24:06.503

`tblCommoHier`本身就是一个数组，所以你应该使用：

```
obj.tblCommoHier[0].DEPT[1].DEPT 
```

如果你想测试任何东西，看看这个[jsFiddle](http://jsfiddle.net/Fmvxf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:31:34.130

试试这个：http: [//jsfiddle.net/jbTLB/](http://jsfiddle.net/jbTLB/)

```
var txt = '{"tblCommoHier":[ {"DEPT":[' + '{"DEPT":"100","DEPT_NAME":"Collectibles" },' + '{"DEPT":"105","DEPT_NAME":"Commodities" },' + '{"DEPT":"140","DEPT_NAME":"Souvenir" }]}]}';
var obj = $.parseJSON(txt);
console.log(obj.tblCommoHier[0].DEPT[0].DEPT);
    //-----------------------------------^------this will get the 100 
```*

# mysql - MySQL 在 ANY 和 ALL 之间进行选择

> ID：14043875
> 
> 赞同：6
> 
> 时间：2012-12-26T17:21:47.140
> 
> 标签：mysql, sql

我有一个 mysql 表 T1，由两列 INT 组成，它们将 car_id 链接到 part_id。一个car_id可以有多个part_id，同一个part_id可以对应多个car_id。例如，

```
car_id   part_id
  1        1  
  1        2  
  1        8  
  2        3  
  3        4  
  4        2  
  4        6  
     ...  
  10       1  
  10       2  
     ...  
  20       1  
  20       2  
  20       8 
```

要获取与 car_id = 1 关联的所有 part_id，我运行查询，

```
SELECT car_id, part_id FROM T1 WHERE car_id=1 
```

并得到结果：

```
car_id   part_id
  1        1  
  1        2  
  1        8 
```

现在，我想找到所有剩余的至少包含（例如 >= 2/3）与 car_id=1 关联的 part_id 的 car_id。（在这个例子中，我应该得到所有 car_ids 至少有 2 个 part_ids 1,2 和 8，如我的 SELECT 查询之后所示。所以，我应该得到 car_ids 1,10 和 20）。

我可以使用以下方法找到包含所有 part_ids 1、2 和 8 的 car_ids：

```
SELECT car_id, part_id 
      FROM T1 
      WHERE part_id = ALL (SELECT part_id FROM T1 WHERE car_id=1). The result is car_ids 1 and 20\. 
```

我可以使用以下方法找到包含任何值 1、2 和 8 的 car_id：

```
SELECT car_id, part_id 
       FROM T1 
       WHERE part_id = ANY (SELECT part_id FROM T1 WHERE car_id=1). The result is car_ids 1,4,10 and 20. 
```

如何在 ANY 和 ALL 之间指定某个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:25:23.567

To get all `car_id`s that have 2 or more of car `1`'s `part_id`s do

```
SELECT car_id, 
       group_concat(part_id) as part_ids
FROM T1
WHERE part_id in (SELECT part_id FROM T1 WHERE car_id = 1)
group by car_id
having count(distinct part_id) >= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:13:45.603

试试这个查询。我已经尽我所能

```
SELECT 
    car_id,
    GROUP_CONCAT(part_id)
FROM cars
WHERE FIND_IN_SET
    (part_id ,(SELECT GROUP_CONCAT(part_id) FROM cars WHERE car_id = 1)) 
GROUP BY car_id
HAVING COUNT(part_id) >= 2 
```

这是 sqlfiddle 演示[http://sqlfiddle.com/#!2/8e563/17](http://sqlfiddle.com/#!2/8e563/17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:04:26.260

这是一种方法：

```
select car_id
from (select cp.car_id,
             sum(case when cp.part_id is not null and cp1.part_id is not null then 1 else 0 end) as PartsInCommon,
             sum(case when cp.part_id is not null and cp1.part_id is null then 1 else 0 end) as ThisCarOnly,
             sum(case when cp.part_id is null and cp1.part_id is not null then 1 else 0 end) as ThatCarOnly
      from CarParts cp full outer join
           (select part_id
            from CarParts cp
            where car_id = 1
           ) cp1
           on cp.part_id = cp1.part_id
      group by cp.car_id
     ) t
where PartsInCommon / (PartsInCommon + ThisCarOnly + ThatCarOnly) >= 2.0/3 
```

此查询计算两辆汽车或其中一辆汽车共有的零件数量。然后该`where`子句定义特定条件。

如果您想要零件列表，那么 Juergen 对 的想法是正确的`group_concat()`，尽管您没有在问题中指定这一点。

# windows-8 - WinJS 中的 PageControl 和 HtmlControl 有什么区别？

> ID：14043876
> 
> 赞同：1
> 
> 时间：2012-12-26T17:21:51.293
> 
> 标签：windows-8, winjs

在什么情况下你应该使用其中一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:39:49.350

HTML 控件的意图是仅仅在适当的位置显示现有的 HTML 页面，目标只是呈现它。使用页面控件，您可以使用行为对其进行扩展，将其与更多页面控件组合在一起，并使其与您的导航模型一起使用。

# javascript - jQuery同位素队列洗牌/随机动画

> ID：14043879
> 
> 赞同：1
> 
> 时间：2012-12-26T17:22:01.320
> 
> 标签：javascript, jquery, jquery-isotope

我想将[jQuery Isotope](http://isotope.metafizzy.co) shuffle 方法设置为每 30 秒对加载的 DOM 元素执行一次动画随机播放，前提是有人在加载了插件的页​​面上。

我已经成功地将动画绑定到一个事件，但是当我使用or`.hover()`时我似乎无法让它触发。无论用户交互/输入如何，我都希望动画触发。`setInterval()``.queue()`

```
var iso_shuffle = function() {
    $('#isotope').isotope('shuffle');
}

setInterval(iso_shuffle(), 2500); 
```

为什么前面的代码不会触发随机化，但这样做：

```
$('#isotope').hover(function() {
    iso_shuffle()
}); 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:23:55.160

`iso_shuffle()`立即调用该函数。该函数不返回任何内容。所以你`setInterval`实际上是在做相当于：

```
setInterval(undefined, 2500); 
```

您想使用函数名称作为回调`setInterval`：

```
setInterval(iso_shuffle, 2500); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T17:23:47.930

您需要传递函数本身，而不是其返回值：

```
setInterval(iso_shuffle, 2500); 
```

# ruby-on-rails - 分组在多个嵌套表单条目上的单选按钮

> ID：14043884
> 
> 赞同：3
> 
> 时间：2012-12-26T17:22:20.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, radio-button, nested-forms

我正在使用带有 simple_form 和 cocoon 的 RoR 来处理这个结构：`Node has_many :addresses`

每个`Address`都有一个布尔`:main`字段，它将每个节点地址中的一个标记为主要地址（实际上是用于 SNMP 监视的地址）。

我有一个嵌套表单来管理这些地址，但我找不到一种干净的方式来选择主要地址。

从逻辑上讲，我应该使用单选按钮组，每个地址都是一个单选组选项，但是，在嵌套形式中，每个单选按钮将属于一个地址并具有不同的名称，这意味着它们位于不同的组中。

我可以将单选按钮输入链接到 Node 中的虚拟属性，并在回调中将选定地址`:main`字段设置为`true`，但是如何将每个按钮链接到其地址（我可以使用地址 ID 作为按钮值，但新添加的地址有还没有身份证）。

这是我的节点表单的简化版本（括号代表单选按钮，括号代表文本输入）：

```
Name : [MyNode1         ]

| Address    | Main |
|------------|------|
| [10.0.0.1] | (*)  |
| [10.0.0.2] | ( )  |
| [10.0.0.3] | ( )  | 
```

我唯一的其他解决方案是一个 JS 提供的选择框（当我更改地址列表中的某些内容时，选项会更新），但它肯定不如一个简单的无线电组干净和合乎逻辑......

**编辑** 一个“可接受的”解决方法是将单选按钮分组到属性以外的东西上`name`（例如：`data-group`属性）。有人知道可以做到这一点的任何好的 JS/jQuery 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:17:37.400

我有一个类似的问题，标题有很多 Role 对象（一个 HMT 粘合模型，它说明了哪个 Person 对该标题做了什么——作者、编辑、翻译等等）。每个标题都有一个主要人物，通常是作者，但有时是编辑或策展人，就像百科全书一样。尽我所能，正如您所见，我无法让 Rails 在新创建的嵌套模型中使用单选按钮。这就是我最终做的事情：

在嵌套角色部分中：

```
<p>
<%= f.collection_select :name, person_roles, :to_s, :titleize, {:prompt => "Role"}, {:class => 'combo'} %>
&nbsp;
<%= f.collection_select :person_id, Person.order(:sort_name), :id, :reverse_name, :prompt => "Person" %>
<%- if ! f.object.new_record? -%>
&nbsp;
<%= radio_button_tag 'title[role_id]', f.object.id, (@title.role_id == f.object.id) %>
<%= label_tag :role_id, "Primary", :for => "title_role_id_#{f.object.id}" %>
<%- end -%>
<%- if ! f.object.new_record? -%>
&nbsp;
<%= f.link_to_remove "Delete", :class => 'delete' %>
<%- end -%> 
```

在标题模型中：

```
has_many :roles, :dependent => :destroy
has_many :people, :through => :roles
belongs_to :role #the primary person, like the author or editor

accepts_nested_attributes_for :roles, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true

after_create :set_primary

def set_primary
  self.update_attributes( :role_id => self.roles.first.id ) if self.roles && self.roles.first
end 
```

因此，除非保存了嵌套模型，否则单选按钮甚至不会出现。添加新的嵌套模型将为您提供一个缺少单选按钮和删除链接的表单（因为在保存该嵌套子项之前两者都不起作用）。

# python - Python 2,3 干净地将整数转换为“字节”

> ID：14043886
> 
> 赞同：40
> 
> 时间：2012-12-26T17:22:27.857
> 
> 标签：python

我发现的最短方法是：

```
n = 5

# Python 2.
s = str(n)
i = int(s)

# Python 3.
s = bytes(str(n), "ascii")
i = int(s) 
```

我特别关心两个因素：可读性和可移植性。对于 Python 3，第二种方法很难看。但是，我认为它可能是向后兼容的。

有没有我错过的更短，更清洁的方式？我目前制作了一个 lambda 表达式来用一个新函数修复它，但也许这是不必要的。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-26T18:13:19.127

**答案1：**

要在 Python 2 或 Python 3 中将字符串转换为字节序列，请使用字符串的`encode`方法。如果您不提供使用编码参数`'ascii'`，这对于数字数字来说总是足够好的。

```
s = str(n).encode() 
```

*   Python 2：http: [//ideone.com/Y05zVY](http://ideone.com/Y05zVY)
*   Python 3：http: [//ideone.com/XqFyOj](http://ideone.com/XqFyOj)

在 Python 2`str(n)`中已经产生了字节；将`encode`进行双重转换，因为此字符串被隐式转换为 Unicode 并再次转换回字节。这是不必要的工作，但它是无害的，并且与 Python 3 完全兼容。

* * *

**答案 2：**

以上是实际提出的问题的答案，即以人类可读的形式生成一串 ASCII 字节。但由于人们不断来到这里试图获得*不同*问题的答案，我也会回答这个问题。如果您想转换`10`为`b'10'`使用上面的答案，但如果您想转换`10`为`b'\x0a\x00\x00\x00'`，请继续阅读。

该[`struct`模块](https://docs.python.org/3/library/struct.html)专门用于在各种类型及其作为字节序列的二进制表示之间进行转换。从类型到字节的转换是用[`struct.pack`](https://docs.python.org/3/library/struct.html#struct.pack). 有一个格式参数`fmt`决定它应该执行哪种转换。对于 4 字节整数，这将`i`用于有符号数或`I`无符号数。有关更多可能性，请参阅[格式字符表](https://docs.python.org/3/library/struct.html#format-characters)，并在输出多于一个字节时查看[字节顺序、大小和对齐表以获取选项。](https://docs.python.org/3/library/struct.html#byte-order-size-and-alignment)

```
import struct
s = struct.pack('<i', 5) # b'\x05\x00\x00\x00' 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-11-14T00:26:19.443

您可以使用[结构的 pack](https://docs.python.org/2/library/struct.html#struct.pack)：

```
In [11]: struct.pack(">I", 1)
Out[11]: '\x00\x00\x00\x01' 
```

“>”是[字节顺序（大端）](https://docs.python.org/2/library/struct.html#byte-order-size-and-alignment)，“I”是[格式字符](https://docs.python.org/2/library/struct.html#format-characters)。因此，如果您想做其他事情，您可以具体说明：

```
In [12]: struct.pack("<H", 1)
Out[12]: '\x01\x00'

In [13]: struct.pack("B", 1)
Out[13]: '\x01' 
```

*这在 python 2 和[python 3](https://docs.python.org/3/library/struct.html)上都是一样的。*

注意：逆运算（字节到 int）可以用[unpack](https://docs.python.org/2/library/struct.html#struct.unpack)完成。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-21T11:41:30.733

我找到了唯一可靠、便携的方法

```
bytes(bytearray([n])) 
```

只是 bytes([n]) 在 python 2 中不起作用。通过 bytearray 走风景路线似乎是唯一合理的解决方案。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-27T16:26:07.040

在 Python **3中将****int**转换为**字节**：

 **```
 n = 5    
    bytes( [n] )

>>> b'\x05' 
```

;) 猜这会比乱搞字符串要好

来源：[http ://docs.python.org/3/library/stdtypes.html#binaryseq](http://docs.python.org/3/library/stdtypes.html#binaryseq)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-21T10:14:53.297

从整数到字节：

```
bytes_string = int_v.to_bytes( lenth, endian ) 
```

其中 lenth 是 1/2/3/4....，endian 可以是“大”或“小”

将字节格式转换为 int：

```
data_list = list( bytes ); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-20T16:29:24.320

在 Python 3.x 中，您可以将整数值（包括其他答案不允许的大值）转换为一系列字节，如下所示：

```
import math

x = 0x1234
number_of_bytes = int(math.ceil(x.bit_length() / 8))

x_bytes = x.to_bytes(number_of_bytes, byteorder='big')

x_int = int.from_bytes(x_bytes, byteorder='big')
x == x_int 
```**

# asp.net - DLL 中缺少 ASP.NET Web 引用

> ID：14043889
> 
> 赞同：1
> 
> 时间：2012-12-26T17:22:35.303
> 
> 标签：asp.net, missing-data, web-reference

我正在使用在 Visual Studio 2008 中创建的 .NET 3.5 类库，后来在 Visual Studio 2010 中更新和重新编译。发生了最奇怪的事情：解决方案资源管理器中列出的 Web 引用之一实际上并未编译进入 DLL（通过使用 .NET Reflector 检查 DLL 来证明），并且分别没有错误或警告。我尝试使用谷歌搜索并搜索此站点，但找不到任何适用的信息。任何关于为什么会发生这种情况的建议将不胜感激！希望提供的信息足够；否则我应该能够提供更多。

**编辑：** Web 引用的命名空间显示在解决方案资源管理器中，但不在对象浏览器中。我的一些同事说这是 Web 服务本身的问题。我应该提到它是一个 SAP Web 服务，在开发过程中，我们正在与一个最近升级的测试环境进行交互，并且可能会出现问题。一旦我更加确定，我会确认这是否是原因，所以请不要犹豫，同时分享任何相关信息。

**编辑（2）：**请参阅我对[Cyborgx37 的回答](https://stackoverflow.com/questions/14043889/asp-net-web-reference-missing-from-dll/14043969#14043969)的第一个回复以进一步澄清，包括生成的客户端错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:52:12.097

这有点令人费解：我所做的只是将 Web 引用放入对象浏览器中 - 因此在编译时进入实际的 DLL 中 - 将其重命名为其他名称，然后将其恢复为旧名称（保留此名称是可选的）名称相同）。一定喜欢奇怪的微软问题。希望这可以帮助其他最终遇到同样问题的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:29:26.450

如果我理解正确，您想知道为什么引用的程序集没有编译*到*您的 DLL 中。

引用的程序集通常不会编译到 DLL 中。您的 DLL 将包含一个指向外部资源的指针，而 .NET 将尝试使用几种策略之一来定位它（然后将其加载到内存中，以便您的应用程序可以使用它）。

您可能会发现这篇文章很有启发性：

> **[运行时如何定位](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.100%29.aspx)**
> *程序集 要成功部署 .NET Framework 应用程序，您必须了解公共语言运行时如何定位和绑定到构成应用程序的程序集。...*

# java - 使用 Intellij idea 初始化 Jmockit 警告

> ID：14043890
> 
> 赞同：1
> 
> 时间：2012-12-26T17:22:36.390
> 
> 标签：java, testing, intellij-idea, testng, jmockit

我在想法上运行 jmockit 时遇到问题。我有使用 jmockit 模拟的 testng 测试用例。我正进入（状态：

```
WARNING: JMockit was initialized on demand, which may cause certain tests to fail;
please check the documentation for better ways to get it initialized.
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:108)
Caused by: java.lang.NullPointerException
    at mockit.internal.startup.Startup.redefineMethods(Startup.java:184)
    at mockit.internal.startup.Startup.redefineMethods(Startup.java:176)
    at mockit.internal.annotations.MockClassSetup.applyClassModifications(MockClassSetup.java:190)
    at mockit.internal.annotations.MockClassSetup.redefineMethodsInClassHierarchy(MockClassSetup.java:151)
    at mockit.internal.annotations.MockClassSetup.redefineMethods(MockClassSetup.java:140)
    at mockit.Mockit.setUpMocks(Mockit.java:249)
    at mockit.integration.testng.internal.TestNGRunnerDecorator.<init>(TestNGRunnerDecorator.java:67)
    at mockit.integration.testng.internal.TestNGRunnerDecorator.registerWithTestNG(TestNGRunnerDecorator.java:60)
    at mockit.integration.testng.Initializer.<init>(Initializer.java:29)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.testng.internal.ClassHelper.newInstance(ClassHelper.java:48)
    at org.testng.TestNG.setListenerClasses(TestNG.java:637)
    at org.testng.TestNG.configure(TestNG.java:1372)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:187)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173)
    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111) 
```

这是罐子的顺序： ![在此处输入图像描述](../Images/7473ccf07d398be7402ada93975ddcfb.png)

[在第 4 部分中](http://jmockit.googlecode.com/svn/trunk/www/gettingStarted.html)，它说明了订单是什么，我正在下订单，但仍然收到警告，这后来导致问题。

有谁知道是什么问题？我在用

*   jdk1.6.0_25
*   Intellij 理念 11.1.2
*   testng-6.3.1
*   jmockit-0.999.16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:41:38.663

您正在使用来自 Maven 的不完整 TestNG jar，您需要使用来自 TestNG 站点 ( `testng.org/testng-xxx.zip`) 的完整发行版，有关详细信息，请参阅此答案：

*   [如何将 IntelliJ IDEA 测试插件更新到 TestNG 6.8 版？](https://stackoverflow.com/q/13452618/104891)

# html - 无法删除区域 MVC4 Internet 应用程序

> ID：14043896
> 
> 赞同：0
> 
> 时间：2012-12-26T17:22:55.970
> 
> 标签：html, css

在下面的屏幕截图中，我选择了一个带有萤火虫的区域。这是标准的 mvc4 互联网应用程序模板。

如您所见，所选区域上方的区域包括：

*   标题
*   身体
*   页脚

我无法删除突出显示的区域（在页脚下）。我怎样才能删除它以使页脚实际上位于底部？

也有人能解释一下这个区域到底是什么吗？我让我完全困惑。

![在此处输入图像描述](../Images/c6697534c820c01ed6a619c63539a4d9.png)

问候 P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:56:11.520

页脚下方的区域只是......空白区域。HTML 元素自上而下堆叠。

如果你想在底部有一个固定的页脚，应用这样的样式：

```
footer {
   position:fixed;
   left:0px;
   bottom:0px;
}​ 
```

# java - 仅针对 Swing 中的特定目标启用 drop

> ID：14043897
> 
> 赞同：3
> 
> 时间：2012-12-26T17:22:58.023
> 
> 标签：java, swing, awt, drag-and-drop

`JList`我正在尝试使用两个实例在 java 中实现拖放。基本流程工作正常。但是，当我从一个列表中拖动一个字符串时，我只想将放置目标限制为第二个列表。我注意到，当我将一个字符串从一个列表拖到我的桌面时，它会创建一个包含该字符串的文件。

有没有办法避免这种情况？

```
public class SampleDnD extends JFrame{

    public static void main(String[] args) {
        new SampleDnD();

    }
    /**
     * new form of frame sample contain 2 JLists with drag enabled.
     */
    public SampleDnD(){
        JList l1 = new JList();
        JList l2 = new JList();
        JScrollPane jScrollPane1 = new javax.swing.JScrollPane();
        JScrollPane jScrollPane2 = new javax.swing.JScrollPane();
        DefaultListModel listModel1 = new DefaultListModel();
        DefaultListModel listModel2 = new DefaultListModel();

        String[] list1 = new String[]{"1","3","5","7","9"};
        String [] list2 = new String[]{"0","2","4","6","8"};
        for(int index=0;index<list1.length;index++){
            listModel1.add(index, list1[index]);
            listModel2.add(index, list2[index]);
        }
        l1.setModel(listModel1);
        l2.setModel(listModel2);
        l1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        l2.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        l1.setDropMode(DropMode.INSERT);
        l1.setDragEnabled(true);
        l2.setDragEnabled(true);
        l1.setTransferHandler(new ListTransferHandler());
        l2.setDropMode(DropMode.INSERT);
        l2.setTransferHandler(new ListTransferHandler());
        jScrollPane1.setViewportView(l1);
        jScrollPane2.setViewportView(l2);

        Container cp = getContentPane();
        cp.setLayout(new BoxLayout(cp,BoxLayout.Y_AXIS));
        setPreferredSize(new Dimension(800,500));
        getContentPane().add(jScrollPane1);
        getContentPane().add(jScrollPane2);
        setVisible(true);
        pack();

    }
    public class ListTransferHandler extends TransferHandler {

        /**
         * We only support importing strings.
         */
        public boolean canImport(TransferHandler.TransferSupport info) {
            // Check for String flavor
            if (!info.isDataFlavorSupported(DataFlavor.stringFlavor)) {
                return false;
            }
            return true;
       }

        /**
         * Bundle up the selected items in a single list for export.
         * 
         */
        protected Transferable createTransferable(JComponent c) {
            JList list = (JList)c;
            String value = (String)list.getSelectedValue();
            return new StringSelection(value);
        }

        /**
         * We support only move actions.
         */
        public int getSourceActions(JComponent c) {
            return TransferHandler.MOVE;
        }
        /**
         * Perform the actual import.  This demo only supports drag and drop.
         */
        public boolean importData(TransferHandler.TransferSupport info) {
            if (!info.isDrop()) {
                return false;
            }
            JList list = (JList)info.getComponent();
            DefaultListModel listModel = (DefaultListModel)list.getModel();
            JList.DropLocation dl = (JList.DropLocation)info.getDropLocation();
            int index = dl.getIndex();
            boolean insert = dl.isInsert();
            // Get the string that is being dropped.
            Transferable t = info.getTransferable();
            String data;
            try {
                data = (String)t.getTransferData(DataFlavor.stringFlavor);
            } 
            catch (Exception e) { return false; }

            if (insert) {
                listModel.add(index++, data);
            } else {
                // If the items go beyond the end of the current
                // list, add them in.
                if (index < listModel.getSize()) {
                    listModel.set(index++, data);
                } else {
                    listModel.add(index++, data);
                }
            }
            return true;
        }
        /**
         * Remove the items moved from the list.
         */
        protected void exportDone(JComponent c, Transferable data, int action) {
            JList source = (JList)c;
            DefaultListModel listModel  = (DefaultListModel)source.getModel();
            if(action == TransferHandler.MOVE)
            {
                listModel.remove(source.getSelectedIndex());
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T07:20:20.350

有点晚了，但可能对其他人有帮助：您需要创建自己的 DatFlavor，它只会被您自己的应用程序接受。

```
DataFlavor myObjectDataFlavor = new DataFlavor(MyObject.class, "java/MyObject"); 
```

通过这个而不是默认的`DataFlavor.javaFileListFlavor`or `DataFlavor.stringFlavor`。你的类`MyObject`是一个 Pojo，只包含一个 String 类型的类变量或一个整数或任何你需要的东西。

# ruby - $b.link(:text => "Sign up").when_present.click 在雅虎上不起作用

> ID：14043903
> 
> 赞同：2
> 
> 时间：2012-12-26T17:23:43.470
> 
> 标签：ruby, selenium, watir, watir-webdriver

我是 Watir WebDriver 的新手。我在玩这个框架，我包含了下面的代码，但第二行不起作用

```
$b = Watir::Browser.new :ie #browser
$b.goto "www.yahoo.com" 
$b.link(:text => "Sign up").when_present.click 
```

我不知道为什么它没有获得注册链接。我在雅虎上看到了源码，如下

```
<span class="tab-caption small y-txt-2">New here? <a href="http://hsrd.yahoo.com/_ylt=A2KLtVHgLNtQHnMBTk.bvZx4/SIG=13tjppi7u/EXP=1356627552/**https%3A//edit.yahoo.com/registration%3F.src=fpctx%26.intl=us%26.done=http%253A%252F%252Fwww.yahoo.com%252F" class="y-link-1">Sign Up</a></span> 
```

我的代码有什么问题？我也试过没有`when_present`，它说元素不可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:40:03.687

通过文本定位元素是区分大小写的。

由于链接显示“注册”，您的定位器还需要显示“注册”（而不是“注册”）：

```
$b.link(:text => "Sign Up").when_present.click 
```

请注意，如果要使定位器不区分大小写，可以使用带有忽略大小写修饰符的正则表达式：

```
$b.link(:text => /sign up/i).when_present.click 
```

# asp.net - 自定义 AutoMapper ValueResolver 是（不）适合获取数据的地方吗？

> ID：14043915
> 
> 赞同：2
> 
> 时间：2012-12-26T17:24:14.440
> 
> 标签：asp.net, automapper

假设在我的 ASP.NET MVC 项目中，我有一个 ViewModel 用于编辑产品的表单。在许多其他字段中，我有一个产品类型列表，我希望用户能够从下拉列表中进行选择。

当我将域对象映射到 ViewModel 时，我正在调用服务来获取域对象，然后使用 AutoMapper 将其映射到 ViewModel。为了填写该产品类型列表的下拉列表，我调用了另一个服务，该服务从数据库中获取该数据并使用它来填充我的 ViewModel 上的另一个属性。

我正在努力解决的是，在控制器中显式调用该辅助服务是否更好，而不是可能将该调用放入自定义 ValueResolver 类并配置我的映射以使用它。

我喜欢从我的控制器中删除对产品类型服务的依赖的前景（因为其中有很多，并且控制器最终会产生很多依赖），但我担心放置这种逻辑（其中可以访问数据库）进入 ValueResolver 是对 ValueResolver 的不当使用，并且可能违反我所说的最小意外原则。（即，我可能不希望映射代码会导致数据库请求。）

这是使用 ValueResolver 的常见问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:29:17.863

[Jimmy Bogard](https://stackoverflow.com/users/58508/jimmy-bogard)在[AutoMapper 邮件列表](https://groups.google.com/d/topic/automapper-users/LXCJA7IMVFw/discussion)中回答：

> 是的，这绝对不是罕见的。下拉列表数据源......伙计，它们是我们 ViewModel 世界中最难弄清楚的事情。
> 
> 请记住，您需要担心 POST 场景、重新填写验证失败的信息等。

# asp.net - Web.config anonymousIdentification cookieName 通过中等信任中的代码？

> ID：14043918
> 
> 赞同：2
> 
> 时间：2012-12-26T17:24:38.967
> 
> 标签：asp.net, web-config, webconfigurationmanager

在 Medium Trust 中工作时，是否有一种简单的方法可以从 web.config 中为 anonymousIdentification 部分读取 cookieName？

我想要做的是阻止创建成千上万的匿名用户，因为：

1.  人们关闭了 cookie，或者
2.  访问者是没有 cookie 功能的蜘蛛/机器人。

我试图通过检查 Application_BeginRequest 中是否存在表单身份验证或匿名标识 cookie 来实现这一点。如果没有 cookie，我会设置一个标志来阻止将任何内容保存到数据库中。

但为了做到这一点，我必须知道 cookie 的名称。为此，我尝试这样做：

```
AuthCookieName = FormsAuthentication.FormsCookieName;
var anonSection = (AnonymousIdentificationSection)WebConfigurationManager.GetSection("system.web/anonymousIdentification");
if (anonSection != null)
    AnonCookieName = anonSection.CookieName; 
```

虽然检索到 auth cookie 名称没有任何问题，但 WebConfigurationManager 会引发安全异常：**System.Security.SecurityException: Request for the permission of type 'System.Configuration.ConfigurationPermission, System.Configuration, Version=4.0.0.0, Culture=neutral , PublicKeyToken=b03f5f7f11d50a3a' 失败。**

我知道这是一个信任问题，因为当我给予高或完全信任时，异常就会消失。但是，重要的是这在中等信任中有效，我无法修改 machine.config。

有没有办法`requirePermission="false"`在我的应用程序的 web.config 级别为 anonymousIdentification 部分设置？

我是否必须在 XML 文档中加载 web.config 并手动解析它？

其他想法？

* * *

还有比这更好的吗？我只跑一次`Application_Start()`。

```
XmlDocument config = new XmlDocument();
config.Load(Server.MapPath("~/Web.config"));
XmlNode anonSection = config.SelectSingleNode("configuration/system.web/anonymousIdentification");
if (anonSection != null)
{
    XmlAttribute nameAttr = anonSection.Attributes["cookieName"];
    if (nameAttr != null)
        AnonCookieName = nameAttr.Value;
}
if (string.IsNullOrWhiteSpace(AnonCookieName))
    AnonCookieName = ".ASPXANONYMOUS"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T21:59:48.447

根据微软的说法，Medium Trust 已经死了。但如果你必须这样做，这应该有效：

```
XmlDocument config = new XmlDocument();
config.Load(Server.MapPath("~/Web.config"));
XmlNode anonSection = config.SelectSingleNode("configuration/system.web/anonymousIdentification");
if (anonSection != null)
{
    XmlAttribute nameAttr = anonSection.Attributes["cookieName"];
    if (nameAttr != null)
        AnonCookieName = nameAttr.Value;
}
if (string.IsNullOrWhiteSpace(AnonCookieName))
    AnonCookieName = ".ASPXANONYMOUS"; 
```

# python - 模块如何从一个导入可见，而从另一个导入不可见？

> ID：14043920
> 
> 赞同：0
> 
> 时间：2012-12-26T17:24:42.757
> 
> 标签：python, python-import, pymysql

所以我有一个正在使用的应用程序，`pymysql`纯 python mysql 客户端实现。在我做出回应之前，我想强调一个事实，即我不愿意使用不同的 mysql 驱动程序。

我有一个实现由 MySQL 支持的数据结构的模块。该模块的要点如下：

```
import pymysql
class Whatever:
    def __init__(self):
        # Debug statement
        print dir(pymysql)
        # use the cursors submodule
        self.conn = pymysql.connect( ... , cursorclass=pymysql.cursors.DictCursor) 
```

当我在我的测试文件中导入它时，一切都很好。这是`print`语句的输出。特别是，我提请您注意游标模块：

```
['BINARY', 'Binary', 'Connect', 'Connection', 'DATE', 'DATETIME', 'DBAPISet', 'DataError', 
'DatabaseError', 'Date', 'DateFromTicks', 'Error', 'FIELD_TYPE', 'IntegrityError', 
'InterfaceError', 'InternalError', 'MySQLError', 'NULL', 'NUMBER', 'NotSupportedError', 
'OperationalError', 'ProgrammingError', 'ROWID', 'STRING', 'TIME', 'TIMESTAMP', 'Time', 
'TimeFromTicks', 'Timestamp', 'TimestampFromTicks', 'VERSION', 'Warning', '__all__', 
'__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', 
'__version__', 'apilevel', 'charset', 'connect', 'connections', 'constants', 'converters', 
'cursors', 'err', 'escape_dict', 'escape_sequence', 'escape_string', 'get_client_info', 
'install_as_MySQLdb', 'paramstyle', 'sys', 'thread_safe', 'threadsafety', 'times', 'util', 
'version_info'] 
```

当我从我的主文件中导入模块时，我得到一个`AttributeError`：

```
Traceback (most recent call last):
  File "xxx.py", line 72, in <module>
    passwd='', db='test_db')
  File "yyy.py", line 26, in __init__
    passwd=passwd, db=db, cursorclass=pymysql.cursors.DictCursor)
AttributeError: 'module' object has no attribute 'cursors' 
```

打印的输出`dir`如下：

```
['BINARY', 'Binary', 'Connect', 'Connection', 'DATE', 'DATETIME', 'DBAPISet', 
'DataError', 'DatabaseError', 'Date', 'DateFromTicks', 'Error', 'FIELD_TYPE', 
'IntegrityError', 'InterfaceError', 'InternalError', 'MySQLError', 'NULL', 'NUMBER', 
'NotSupportedError', 'OperationalError', 'ProgrammingError', 'ROWID', 'STRING', 'TIME', 
'TIMESTAMP', 'Time', 'TimeFromTicks', 'Timestamp', 'TimestampFromTicks', 'VERSION', 
'Warning', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', 
'__path__', '__version__', 'apilevel', 'charset', 'connect', 'constants', 'converters', 
'err', 'escape_dict', 'escape_sequence', 'escape_string', 'get_client_info', 
'install_as_MySQLdb', 'paramstyle', 'sys', 'thread_safe', 'threadsafety', 'times', 
'version_info'] 
```

值得注意的是，`cursors`缺席。两种情况下的检查`pymysql.__file__`都是一样的，输出是：

```
__init__.py     charset.py  connections.py  constants   converters.pyc  cursors.pyc err.pyc     times.py    util.py
__init__.pyc    charset.pyc connections.pyc converters.py   cursors.py  err.py      tests       times.pyc   util.pyc 
```

显然`cursors.py`在那里。那么给了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:40:50.820

您需要`import pymysql.cursors`在文件顶部添加显式。

子`cursors`包未在`pymysql`'s中列出，`__all__`因此在您执行时不会导入`import pymysql`。

# c++ - 具有透明客户区的窗口

> ID：14043921
> 
> 赞同：3
> 
> 时间：2012-12-26T17:24:47.157
> 
> 标签：c++, winapi, background, window

我像这样注册窗口类：

```
WNDCLASSEX wctt;
wctt.cbSize        = sizeof(WNDCLASSEX);
wctt.style         = CS_DBLCLKS;
wctt.lpfnWndProc   = WndProcTooltip;
wctt.cbClsExtra    = 0;
wctt.cbWndExtra    = 0;
wctt.hInstance     = m_hAppInstance;
wctt.hIcon         = NULL;
wctt.hCursor       = LoadCursor(NULL, IDC_SIZE);
wctt.hbrBackground = NULL;
wctt.lpszMenuName  = NULL;
wctt.lpszClassName = _T("myWindow");
wctt.hIconSm       = NULL;
RegisterClassEx(&wctt) 
```

如您所见，我使用`wctt.hbrBackground = NULL`; 所以它没有背景。

窗口是这样创建的：

```
::CreateWindowEx(WS_EX_TOPMOST | WS_EX_TOOLWINDOW,
_T("myWindow"),
NULL,
WS_VISIBLE | WS_POPUP,
50,
50,
150,
100,
NULL,
NULL,
m_hAppInstance,
NULL); 
```

在绘画部分，我在窗口上绘制图标：

```
PAINTSTRUCT     ps;
HDC             hdc;
BITMAP          bitmap;
ICONINFO        iconinfo;
hdc = ::BeginPaint(hWnd, &ps);
::SetBkMode(hdc,TRANSPARENT);
::GetIconInfo(localIcon, &iconinfo);
::GetObject(iconinfo.hbmColor, sizeof(bitmap), &bitmap);
::DeleteObject(iconinfo.hbmColor);
::DeleteObject(iconinfo.hbmMask);
::DrawIconEx(hdc, 0,0, localIcon, bitmap.bmWidth, bitmap.bmHeight, 0, NULL, DI_NORMAL); 
```

图标大小小于窗口大小，我在弹出窗口下方的窗口中获得当前视图的背景。

但是现在当我移动窗口（或最小化弹出窗口下方的窗口）时，背景并没有改变。

我试图制作一个计时器，每次都进行流动：

```
RECT rcClient;
GetClientRect(hWnd, &rcClient);
InvalidateRect(hWnd,&rcClient,TRUE); 
```

这使打印功能再次运行，但图标的背景没有改变。

我应该做些什么`WM_ERASEBKGND`吗？
有谁知道如何使它工作？

谢了，兄弟们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:47:59.977

仅仅让背景保持未上色是不够的；您还需要在必要时让您*下方*的窗口重新绘制自己。

[`WS_EX_TRANSPARENT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx)如果窗口是由同一线程创建的同一层次结构的一部分，则为您的窗口提供扩展样式就足够了。这会导致下面的窗口首先自行绘制，因此背景始终是最新的。

否则，您需要使用[`SetWindowRgn`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145102%28v=vs.85%29.aspx)以使您的窗口实际上不存在于您要绘制的边界之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T18:18:50.523

看看[分层窗口](http://msdn.microsoft.com/en-us/library/ms997507.aspx)。此功能允许创建不同形状的半透明窗口。

在您的窗口类中添加`WS_EX_LAYERED`扩展属性。

您可以使用以下两个功能控制窗口的透明度：

1.  [`SetLayeredWindowAttributes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.85%29.aspx)：

    1.  `bAlpha`控制整个窗口的不透明度，如果你传入 `LWA_ALPHA`.`dwFlags`

        > 当 bAlpha 为 0 时，窗口是完全透明的。当 bAlpha 为 255 时，窗口是不透明的。

    2.  `crKey`设置透明的颜色。

        > 窗口以这种颜色绘制的所有像素都是透明的。

2.  [`UpdateLayeredWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633556%28v=vs.85%29.aspx)为您提供对窗口透明度的精确控制，您可以为窗口的不同部分赋予不同级别的透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:30:26.577

如果您尝试创建一个非矩形窗口，这还不够。设置“无背景”只是意味着不会绘制背景，您会看到该位置内存中发生的任何事情。

要创建非矩形窗口，请查看[`SetWindowRgn`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145102%28v=vs.85%29.aspx)函数。

# c# - ListView 的 DataTemplate 中的单选按钮组

> ID：14043922
> 
> 赞同：2
> 
> 时间：2012-12-26T17:24:50.790
> 
> 标签：c#, wpf, listview, mvvm, .net-4.0

我的问题是以下答案的扩展。它指出单选按钮的 GroupName 范围很广，通常最好让 GroupName 由容器自动分配。

[https://stackoverflow.com/a/6062697/907920](https://stackoverflow.com/a/6062697/907920)

如果我使用静态 GroupName，则所有 RadioButtons 都共享该组。（如链接中的答案所示。）

但是，如果我不使用 GroupName，那么每个单独的 RadioButton 都会被视为单独在一个组中。为了自动分配 GroupName，我只能假设它使用 DataTemplate 或 CellTemplate 作为它的“父级”。

我在 StackPanel 中有一个问题列表。每个问题都显示在 UserControl 中。每个问题都包含一个答案列表视图。每个答案都有一个布尔属性，指示已选择答案，它绑定到 DataTemplate 内的 RadioButton。

我的精简 XAML 如下

```
 <ListView ItemsSource="{Binding AnswerList}" >
      <ListView.View>
        <GridView>
          <!-- Other columns here -->
          <GridViewColumn>
            <GridViewColumn.CellTemplate>
              <DataTemplate>
                <RadioButton IsChecked="{Binding Path=AnswerChecked}" />
              </DataTemplate>
            </GridViewColumn.CellTemplate>
          </GridViewColumn>
        </GridView>
      </ListView.View>
    </ListView> 
```

我认为除了使用 ListView 之外我没有其他选择，因为我需要能够关闭和打开其他列，并且需要显示两个或更多答案。

有没有办法让我告诉单选按钮它是 UserControl 的一部分，而不是用于 GroupName 的 DataTemplate？

我考虑为每个 UserControl 分配一个 GUID 并将 RadioButtons 的 GroupName 绑定到 GUID 的字符串，但这似乎过于笨拙。

编辑：为了视觉参考，用户界面是这样流动*的*，括号中是我的注释：

（绑定到问题集合的问题堆栈面板）

1.  问题控制（包含绑定到答案集合的 ListView '|' 分隔列）
    *   [ ] | 答案 1（带有文本“答案 1”的未选中答案对象）
    *   [ ] | 答案 2
    *   [*] | 答案 3（带有文本“答案 3”的选中答案对象）
2.  第十六任总统是谁
    *   [ ] | 卡尔·马克思
    *   [*] | 亚伯拉罕·林肯
    *   [ ] | 理查德尼克松
3.  一摩尔氢气的重量是多少
    *   [ ] | 10克
    *   [ ] | .1g
    *   [ ] | 1克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:34:37.253

你应该能够摆脱这样的事情

```
 <RadioButton GroupName="{Binding}" IsChecked="{Binding Path=AnswerChecked}" /> 
```

这应该将它们组合在一起。

如果 ListView 是 QuestionControl 的一部分，为什么不绑定 QuestionText 因为问题应该是唯一的

```
<RadioButton GroupName="{Binding Path=TheQuestionText}" IsChecked="{Binding Path=AnswerChecked}" /> 
```

您可能必须`FindAncestor`使用`Questioncontrol`从`DataTemplate`

```
 <RadioButton GroupName="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type QuestionControl}}, Path=QuestionText"}  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:49:53.093

这让我摆脱了困境，但我不会接受。该解决方案远非最佳。

我切换到使用 CheckBox，并在 VM 中将此代码添加到 Answer 的 PropertyChanged 回调中，并将属性“AllowAnswer”添加到 Answer 对象。

```
 void AnswerItemChanged(object sender, PropertyChangedEventArgs e)
    {
    if (e.PropertyName == "AnswerChecked")
    {
        bool hasAnswer = false;
        foreach(Answer answer in Answers)
        {
            if (answer.AnswerChecked == true)
            {
                hasAnswer = true;
                break;
            }
        }

        foreach (Answer answer in Answers)
        {
            substep.PropertyChanged -= AnswerItemChanged;

            if (hasAnswer && !answer.AnswerChecked )
            {
                answer.AllowAnswer = false;
            }
            else 
            {
                answer.AllowAnswer = true;
            }

            substep.PropertyChanged += AnswerItemChanged;
        }
    }
    } 
```

这允许 CheckBox 模仿 RadioButton 的互斥锁功能。然而，在实践中它更加笨拙，因为用户现在必须取消选择一个答案才能选择另一个答案。

# geometry - 3D平面法向量如何与其旋转相关

> ID：14043924
> 
> 赞同：0
> 
> 时间：2012-12-26T17:24:53.833
> 
> 标签：geometry

我想要做什么[http://www.youtube.com/watch?v=CaTI2d0tQME](http://www.youtube.com/watch?v=CaTI2d0tQME) 3:15

在我的 3D api 中有 quad.rotation[x,y,z], quad[x,y,z] 这是它的中心和宽度/高度。我知道顶点是从所有给定的计算出来的。法线可以从顶点计算，但我有一种感觉，我应该能够从旋转中得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:34:49.550

是的你可以 ！

您的四边形必须是面向轴的（沿 X、Y 或 Z 轴，这是其在其局部空间中的法线向量）。将此向量与四边形旋转矩阵组合在一起，您将在世界空间中拥有新的、漂亮且闪亮的法线向量！

一点警告：如果四边形变换矩阵是由任何 3D 引擎生成的，它可能包含会使法线向量混乱的缩放因子。在这种情况下，经典解决方案是计算矩阵的转置逆矩阵，或者使用四边形的旋转值生成自定义变换矩阵。

# asp.net - 在 asp.net 中创建动态菜单

> ID：14043925
> 
> 赞同：-1
> 
> 时间：2012-12-26T17:24:59.157
> 
> 标签：asp.net, linq

我正在尝试创建一个包含所有类别的侧边菜单（稍后在子菜单上创建子类别）

在网上找到了这段代码，但我不确定发生了什么

```
asp:Repeater id="MenuRepeater" runat="server">
                    <headertemplate>
                        <ul>
                    </headertemplate>
                        <itemtemplate>
                            <li></a></li>
                        </itemtemplate>
                    <footertemplate>
                        </ul>
                     </footertemplate>
                </asp:Repeater> 
```

我应该在 li 标签之间输入什么以及使用 LINQ 需要什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:32:18.640

Repeater 是 DataBound 控件，因此它需要 IDataSource 将数据绑定进/出它，您可以编写 LINQ 查询以从数据库中获取菜单并调用 .ToList() 方法并将其绑定到转发器控件。

例如：

```
<asp:Repeater id="MenuRepeater" runat="server">
     <headertemplate>
           <ul>
     </headertemplate>
     <itemtemplate>
           <li><%# Bind("MenuItem") %></li>
     </itemtemplate>
     <footertemplate>
           </ul>
     </footertemplate>
</asp:Repeater> 
```

在后面的代码中，您将创建 IQueryable 对象并通过调用 .ToList() 将其转换为 IList，如下所示：

```
var query = from m in Context
select m.MenuItem;

MenuRepeater.DataSource = query.ToList();
MenuRepeater.DataBind(); 
```

# node.js - Node.js 连接仅适用于本地主机

> ID：14043926
> 
> 赞同：53
> 
> 时间：2012-12-26T17:25:01.810
> 
> 标签：node.js, connect

我编写了一个小型 Node.js 应用程序，使用`connect`提供网页，然后定期向其发送更新。它还接受用户观察并将其记录到磁盘文件中。

只要我在本地主机上，它就可以正常工作，但我无法让同一 Intranet 上的其他计算机看到它。我正在使用端口 3000，但更改为端口 8080 或 80 并没有帮助。

这是我用来设置连接的代码：

```
var io = require('socket.io'),
  connect = require('connect');

var app = connect().use(connect.static('public')).listen(3000);
var chat_room = io.listen(app); 
```

如上所述，我尝试将端口号更改为 8080 或 80，并没有看到任何区别，所以我认为这不是防火墙问题（但我可能是错的）。在阅读了处理 HTTP 的类似问题后，我还考虑过将 0.0.0.0 添加到`listen()`方法中，但似乎不需要`listen()`IP 掩码参数。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-12-26T19:21:34.143

很可能您的服务器套接字绑定到环回 IP 地址`127.0.0.1`而不是“所有 IP 地址”符号 IP `0.0.0.0`（注意这不是网络掩码）。要确认这一点，请运行`sudo netstat -ntlp`（如果您使用的是 linux）或`netstat -an -f inet -p tcp | grep LISTEN`（OSX）并检查您的进程绑定到哪个 IP（查找带有“：3000”的行）。如果您看到“127.0.0.1”，那就是问题所在。通过将“0.0.0.0”传递给`listen`调用来修复它：

```
var app = connect().use(connect.static('public')).listen(3000, "0.0.0.0"); 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2016-01-07T15:56:37.083

为了让其他用户访问您的本地机器，我通常使用[ngrok](https://www.npmjs.com/package/ngrok)。Ngrok 将你的 localhost 暴露给网络，并且有一个易于安装和启动的 NPM 包装器：

```
$ npm install ngrok -g
$ ngrok http 3000 
```

请参阅此示例用法：

[![在此处输入图像描述](../Images/d667bbc668b04a5ab5d71534906373df.png)](https://i.stack.imgur.com/HtO3W.gif)

在上面的示例中，在本地运行的sails 实例：**localhost:3000**现在可以在 Internet 上使用：http: **[//69f8f0ee.ngrok.io](http://69f8f0ee.ngrok.io)**或**[https://69f8f0ee.ngrok.io](https://69f8f0ee.ngrok.io)**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-04T15:36:17.180

绑定到 0.0.0.0 是成功的一半。有一个 ip 防火墙（与系统首选项中的不同）阻止 TCP 端口。因此，端口也必须通过以下方式解除阻塞：

```
sudo ipfw add <PORT NUMBER> allow tcp from any to any 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-07T04:44:40.183

**在您的应用上，使其可从网络中的任何设备访问：**

```
app.listen(3000, "0.0.0.0"); 
```

**适用于 Azure、GCP 和 AWS 中的 NodeJS**

对于部署在资源管理器中的 Azure vm，请检查您的虚拟网络安全组并打开端口或端口范围以使其可访问，否则如果 vm 部署在旧版本的 azure 中，则在您的云端点中。

只需为 GCP 和 AWS 寻找等效的

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-29T11:14:27.640

对于这个问题，我有一个非常简单的解决方案：`process.argv`为您提供传递给节点应用程序的参数列表。因此，如果您运行：

```
node server.js 0.0.0.0 
```

你会得到：

```
process.argv[0] //=> "node"
process.argv[1] //=> "server.js"
process.argv[2] //=> "0.0.0.0" 
```

因此，您可以使用`process.argv[2]`将其指定为要收听的 IP 地址：

```
http.listen(3000, process.argv[2]); 
```

现在，您的应用正在侦听“所有”IP 地址，例如[http://192.168.1.4:3000/your_app](http://192.168.1.4:3000/your_app)。

我希望这会对某人有所帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-12T22:51:12.237

**Fedora**或**Centos**发行版检查您的 selinux 和 firewalld，在我的情况下，firewalld 阻止了连接：

```
Selinux：$sestatus
SELinux 状态：启用
SELinuxfs 挂载：/sys/fs/selinux
SELinux 根目录：/etc/selinux
加载的策略名称：targeted
当前模式：{{checkmode}}
配置文件中的模式：{{checkconfig}}
策略 MLS 状态：已启用
政策拒绝未知状态：允许
最大内核策略版本：30

防火墙状态：$systemctl status firewalld

```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-14T00:27:49.407

就我而言，我必须同时使用符号 IP 地址“0.0.0.0”并在收听服务器 **“cors”时回调：“^2.8.5”、** **“express”：“^4.17.1”、**

```
const cors = require("cors");
app.use(cors());

const port = process.env.PORT || 8000;
app.listen(port,"0.0.0.0" ,() => {
  console.log(`Server is running on port ${port}`);
}); 
```

您也可以使用您的本地 IP 地址而不是“0.0.0.0”，在 OS Ubuntu 中，您可以使用命令找到您的 IP 地址

```
ifconfig | grep "inet " | grep -v 127.0.0.1 
```

[![在此处输入图像描述](../Images/414b8ecf816193c0ca139471e22f6baa.png)](https://i.stack.imgur.com/gnQzT.png) 然后使用IP地址：

```
app.listen(port,"192.168.0.131" ,() => {
  console.log(`Server is running on port ${port}`);
}); 
```

如果你使用固定的IP地址比如“192.168.0.131”，那么你必须在调用服务器的时候使用它，比如，我的react客户端的api调用配置如下：

```
REACT_APP_API_URL = http://192.168.0.131:8001/api 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-24T08:33:12.293

使用这条线为我工作（只需在运行时添加**--listen**）：

```
node server.js -p 3000 -a : --listen 192.168.1.100 
```

希望能帮助到你...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-26T16:02:07.863

在解决这个问题很长一段时间后，我设法通过允许端口 8080 上的传入连接来解决它。

由于您写道该`.listen(8080, "0.0.0.0")`解决方案对您不起作用，因此请确保允许端口 8080 上的连接通过您的防火墙。

[这篇文章](https://blogs.msdn.microsoft.com/mandi/2014/11/03/how-to-create-a-windows-firewall-inbound-rule/)帮助我在 Windows 防火墙设置中创建了一个新的入站规则。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-14T13:13:47.180

同样的问题，对我来说，解决方案是编辑`server.js`文件第 161 行

```
 var server = app.listen(argv.port, '**<server.ip.adress.here>**', function() {
 console.log('Cesium development server running publicly.  Connect to localhost:%d/', server.address().port);
    }); 
```

替换 `localhost>`为`<server.ip.adress.here>`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-01T17:32:34.280

检查您的防病毒**防火墙**设置。

我有一个在 Windows 10 PC 上运行的 NodeJS 服务器，但是当我将 IP 地址和端口（例如[http://102.168.1.123:5000](http://102.168.1.123:5000)）放入本地网络上另一台计算机的浏览器时，什么也没发生，尽管它在主机上运行良好电脑。

（要查找您的 Windows IP 地址，请运行 CMD，然后运行 ​​IPCONFIG）

**Bar Horing Amir**的回答指向 Windows 防火墙设置。在我的 PC 上，Windows 防火墙已关闭 - 因为 McAfee 防病毒软件添加了自己的防火墙。

在装有 NodeJS 的计算机上的**McAfee**防火墙设置下将端口 5000 添加到**“端口和系统服务”**后，我的系统开始在其他计算机上运行。其他杀毒软件也会有类似的设置。

 ***我会认真建议首先在 Windows 上尝试此解决方案。*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-03T10:23:02.880

我在这个线程上尝试了许多解决方案，但没有一个对我有用。如果有人遇到与我相同的问题，这就是我解决问题的方法。

在我的反应应用程序中，我将 localhost 更改为 nodejs 服务器 IP。

```
// Interface to server using Axios
const api = axios.create({ 
  baseURL: 'http://server_ip_addr:4000' 
});
```**

# objective-c - 如何在运行时识别协议方法是可选的？

> ID：14043930
> 
> 赞同：6
> 
> 时间：2012-12-26T17:25:17.313
> 
> 标签：objective-c, ios, cocoa, ios5, protocols

我已经定义了我的协议。我已经提到我的两个协议方法是可选的。在运行时，如何确定特定方法是否可选？有没有办法找出来？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T17:41:05.310

这应该做你想要的：

```
BOOL MethodInProtocolIsRequired(Protocol *protocol, SEL methodSelector)
{
    struct objc_method_description methodDesc = protocol_getMethodDescription(protocol, methodSelector, YES, YES);
    return methodDesc.name != NULL;
} 
```

请注意，我没有评论在运输代码中使用它的可取性，特别是因为您还没有解释为什么要这样做。另请注意，当为协议不包含的方法提供选择器时，此函数将返回 NO。这基本上是合理的（毕竟，如果协议不包含方法，则不需要！），但是您可以通过检查协议是否包含作为可选方法的方法并返回不同的东西来为函数添加复杂性所有三种方案（必需、可选、不在协议中）。

编辑：这里的简单测试程序：[https ://gist.github.com/4381753](https://gist.github.com/4381753)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T17:40:11.990

（我不知道答案在我的脑海中。1分钟的谷歌搜索帮助了我。）

您可以使用`protocol_copyMethodDescriptionList()`作为 Objective-C 运行时库 (libobjc) 一部分的函数来执行此操作。此函数的第二个参数是一个布尔标志，指示是否需要在协议中复制的方法。因此，如果方法在此函数返回的列表中（使用适当的参数调用），那么它是必需的方法。

```
SEL sctr = @selector(isThisMethod:requiredIn:theProtocol:);

struct objc_method_description *methods;
unsigned int nMethods;
methods = protocol_copyMethodDescriptionList(
    objc_getProtocol("MyProtocolName"), // or @protocol(MyProtocolName) if you don't need this kind of dynamism
    YES, // required?
    YES, // instance method? (in general, protocols declare instance methods)
    &nMethods
);

BOOL isRequired = NO;
int i;
SEL s;
const char *sctrStr = sel_getName(sctr);
for (i = 0; i < nMethods; i++) {
    s = methods[i].name;
    const char *sStr = sel_getName(s);
    if (strcmp(sctrScr, sStr) == 0) {
        isRequired = YES;
        break;
    }
}

free(methods);

if (isRequired) {
    // required
} else {
    // optional
} 
```

所以，这是可能的，但这有点矫枉过正，正如我在对你的问题的评论中已经提到的那样，你不应该测试一个可选或必需的方法，你应该测试一个响应特定选择器的实例。

编辑：是的，我应该在文档中进一步阅读，而不是复制整个宇宙。正如 Andrew Madsen 指出的那样，这可以简化为几行：

```
struct objc_method_description method;
method = protocol_getMethodDescription(
    objc_getProtocol("MyProtocolName"), // or @protocol(MyProtocolName)
    @selector(isThisSelector:required:)
    YES, // required?
    YES // instance method?
);

if (method.name != NULL) {
    // required
} else {
    // optional
} 
```

# python - 蟒蛇时间偏移

> ID：14043934
> 
> 赞同：30
> 
> 时间：2012-12-26T17:25:42.940
> 
> 标签：python, time

如何在 python 中对当前时间应用偏移量？

换句话说，能够得到当前时间减去 x 小时和/或减去 m 分钟和/或减去 s 秒和/或减去 ms 毫秒

例如

```
curent time = 18:26:00.000

offset = 01:10:00.000

=>resulting time = 17:16:00.000 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-26T17:26:26.573

使用 a [`datetime.datetime()`](http://docs.python.org/2/library/datetime.html#datetime-objects)，然后添加或减去[`datetime.timedelta()`实例](http://docs.python.org/2/library/datetime.html#timedelta-objects)。

```
>>> import datetime
>>> t = datetime.datetime.now()
>>> t - datetime.timedelta(hours=1, minutes=10)
datetime.datetime(2012, 12, 26, 17, 18, 52, 167840) 
```

`timedelta()`对象不支持算术运算`datetime.time()`；如果您需要使用现有`datetime.time()`对象的偏移量，只需使用它`datetime.datetime.combine()`来形成一个`datetime.datetime()`实例，进行计算，然后使用以下方法再次“提取”时间`.time()`：

```
>>> t = datetime.time(1, 2)
>>> dt = datetime.datetime.combine(datetime.date.today(), t)
>>> dt
datetime.datetime(2012, 12, 26, 1, 2)
>>> dt -= datetime.timedelta(hours=5)
>>> dt.time()
datetime.time(20, 2) 
```

# spring - 在 JUnit 中使用多个上下文加载器时自动装配异常

> ID：14043935
> 
> 赞同：0
> 
> 时间：2012-12-26T17:25:53.423
> 
> 标签：spring, maven, junit4, maven-surefire-plugin

我为 JUnit 创建了 2 个类 A、B，每个类都有自己的 ContextLoaders 用于加载应用程序上下文。现在，当我独立运行这些类中的每一个时，JUnit 测试运行良好。

但是，当我在这两个类上进行 maven 构建或运行 JUnit 时，第一个运行的类 A 运行得非常好，但第二个会引发异常（无法自动装配字段......预期一个找不到...... ）。这是我想要做的： -

//带上下文加载器**的A类****A_ContextLoader**

```
@runwith(springjunit4classrunner.class)
@ContextConfiguration(loader = A_ContextLoader.class)
public class A {
     @Test
     public void testMethod1() {
       ...
     }
} 
```

//带有上下文加载器的**B类****B_ContextLoader**

```
@runwith(springjunit4classrunner.class)
@ContextConfiguration(loader = B_ContextLoader.class)
public class B {
     @Test
     public void testMethod2() {
        ...
     }
} 
```

据我了解，当第二类开始执行时，它使用现有上下文而不是初始化新上下文。在我的情况下，我不可能将两个上下文加载器合并到一个类中。

那么有什么方法可以在 A 类执行结束时“卸载”应用程序上下文。或者在 B 开始执行时如何要求 JUnit 重新初始化上下文？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:41:28.223

在第一个解决方法中，尝试添加`@DirtiesContext`到睾丸。然后这个带注释的睾丸的上下文在其他测试中没有被使用。

# python - What is the best way to make an event happen at a set rate? Using time.sleep() is very unreliabe. Can things be locked to a timer of sorts?

> ID：14043937
> 
> 赞同：2
> 
> 时间：2012-12-26T17:26:04.847
> 
> 标签：python

I'd like a function to be performed at a set rate, say, 6 times a second. What it is the best way to go about this with Python?

I tried a simple time.sleep() thing at the end of my loop, but that, of course, acts nothing like a reliable clock. Any change in CPU usage, and suddenly the "timer" has drifted quite far from where it started.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:39:04.293

试试[`celery`](http://celeryproject.org/)。例子：

```
from celery.task import tasks, PeriodicTask
from datetime import timedelta

class Every100MillisecondsTask(PeriodicTask):
    run_every = timedelta(milliseconds=100)

    def run(self, **kwargs):
        logger = self.get_logger(**kwargs)
        logger.info("Execute 10 times per second") 
```

未经测试，但应该可以工作。您可以更改这些值以获得所需的分辨率。您甚至可以以微秒为单位传递 timedelta。实际上改编自[这个答案](https://stackoverflow.com/questions/7848512/celery-schedule-periodic-tasks-starting-at-a-specific-time)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:50:52.023

像这样的东西应该工作。它不会漂移，因为它固定在固定的开始时间。

```
import time

def repeat(func, interval):
    start = time.time()
    tick = interval / 50.0
    count = 0
    while True:
        if time.time() >= start + interval * count:
            func()
            count += 1
        time.sleep(tick) 
```

如果您想`foo`每秒运行六次函数，请执行以下操作：

```
def foo(): 
    print '.',

repeat(foo, 1.0 / 6) 
```

**编辑：** 我喜欢 mccrustin 使用 celery 的答案，但如果你需要自己动手，这个答案应该可以。

# sql-server - SQL Server log file fills under Simple recovery model

> ID：14043943
> 
> 赞同：3
> 
> 时间：2012-12-26T17:26:44.433
> 
> 标签：sql-server

I have a database in SQL Server 2008 R2 that has millions of files stored in it as varbinary blobs. I set up a process last week to do the following:

1.  Use some Entity Framework code to get the row (i.e. entity) that has the blob.
2.  Copy the blob stream to an object store.
3.  Update entity in the database with the new Object ID from the store.

I have 30 threads doing this constantly and the process will still take several days. A couple days ago the database log file filled up and I'm sure it had to be caused by this process. I decided point-in-time backups are not critical for this database and set the database to use the Simple recovery model. Then yesterday I got errors from my process again that said the log file filled up! How is this possible in simple mode?! Any idea what I can do to stop this from happening? When I monitor the log file SQL Server lets it get to 7% full and then truncates it down to zero so I'm super confused. It seems as though the log file starts to grow unchecked when the full backup begins...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:32:38.033

Even in Simple Recovery mode, SQL Server will populate the log file in order to maintain ACID compliance and permit rollbacks (or "roll-forwards" in certain-disaster recovery scenarios). So you need to have enough room in there to at least handle the transactions that it may receive at one time and if not it will either autogrow or present an error.

Now as a practical matter you have a couple of options. The simplest is to just give it sufficient space to handle the transactions. Another is to break it up into fewer transactions since in Simple Recovery it will permit that space to be reused once the transaction is fully committed and finalized.

**Edit for clarity and responding to comments:** SQL Server will place almost all actions (there are some exceptions, but they aren't material here) in an implicit transactions even if an explicit one is not called. So, if you say execute a command that inserts a million rows it will have an implicit transaction for that insert and even in simple recovery mode all of those million rows will impact the transaction log until the transaction is fully committed and complete. If you want it to release the space faster, rewrite your code so that instead of one statement inserting a million rows you have ten statements inserting a hundred thousand each.

It wasn't clear from your question that it was *only* growing during the full backups, but yes the backup process does affect its ability to release space in the log while it is occurring. That is because a full backup also includes the data from the log file so the Server needs to make sure that information is available during the backup process. There is a related discussion at [In Recovery](http://www.sqlskills.com/blogs/paul/post/debunking-a-couple-of-myths-around-full-database-backups.aspx).

I would generally be extremely reluctant to postpone a scheduled backup, but it may help in this particular scenario. It also sounds like breaking your transactions up into smaller pieces may ultimately be the way to go though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:12:04.653

> It seems as though the log file starts to grow unchecked when the full backup begins...

So it only grows while you are doing a full backup? That would make sense to be because a full backup contains all data pages as well as the range of log records that were generated during the backup procedure.

So while the backup is running the log probably cannot be truncated. Note, that this is (educated) speculation on my part.

You can confirm this by looking at the sys.databases.log_reuse_wait_desc value.

# android - Android 广告：横向对比。屏幕自动旋转

> ID：14043944
> 
> 赞同：0
> 
> 时间：2012-12-26T17:26:47.023
> 
> 标签：android, landscape, autorotate

我正在开发一个所有环境都在风景中的应用程序。

# 清单.xml

```
 <activity 
        android:name=".Main"
        android:screenOrientation="landscape"/> 
```

# 主.java

```
public class Startup extends Activity implements AdListener {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);   
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                         WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

    interstitialAd = new InterstitialAd(this, MY_PUBLISHER_ID); // Create an ad.  
    interstitialAd.setAdListener(this); // Set the AdListener.
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    interstitialAd.loadAd(adRequest); 
```

# 截图：

广告已加载，但未正确显示；屏幕底部（广告下方）有很多白色空白区域，广告似乎处于纵向模式但被切碎，如下图所示：

![不正确渲染的图像](../Images/f8051ba302fd5e6f83f581a3c1d1f9a3.png)

但是，我发现如果我**走出**应用程序并将系统屏幕设置为能够`SCREEN AUTO_ROTATABLE`，则广告可以正常显示，如下所示：

![正确渲染的图像](../Images/5cc52b4a91536ee133adf877efbcba45.png)

# 问题：

1.  我相信`interstitialAd`可以支持景观？但这怎么能修改呢？

2.  如果`interstitialAd`不能修改，如何强制系统设置`SCREEN AUTO_ROTATABLE`间接解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:39:16.413

听起来这应该在服务器端配置，如此处所述：[https ://developers.google.com/mobile-ads-sdk/docs/dfp/advanced](https://developers.google.com/mobile-ads-sdk/docs/dfp/advanced)

> 无需为横向模式定义单独的广告单元。您只需将横向尺寸（例如智能手机为 480x320）添加到定位到插页式广告单元的订单项，并在常规纵向尺寸之外添加横向尺寸的广告素材。

我无权访问 DFP，因此无法验证这是否可行。

# c# - 如何比较两个 lambda 表达式？

> ID：14043948
> 
> 赞同：15
> 
> 时间：2012-12-26T17:27:14.380
> 
> 标签：c#, .net, lambda

> **可能重复：**
> [如何检查两个 Expression<Func<T, bool>> 是否相同](https://stackoverflow.com/questions/673205/how-to-check-if-two-expressionfunct-bool-are-the-same)

我需要比较两个 lambda 表达式，以检查相等性。基本上，以下两个 lambda 是相同的：

```
Expression<Func<int, bool>> exp1 = (Foo f) => f.Bar().StartsWith("F");
Expression<Func<int, bool>> exp2 = (Foo b) => b.Bar().StartsWith("F"); 
```

我如何检查是否`exp1`做同样的事情`exp2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:48:15.903

您可能需要使用 IComparer 或模拟类

查看[c-sharp-lambda-expressions-and-icomparer](https://stackoverflow.com/questions/4870197/c-sharp-lambda-expressions-and-icomparer)和comparison [-simple-lambda-expressions](http://www.codethinked.com/comparing-simple-lambda-expressions-with-moq)

# indexing - 防止谷歌索引/缓存

> ID：14043952
> 
> 赞同：0
> 
> 时间：2012-12-26T17:27:49.593
> 
> 标签：indexing, http-headers, privacy

有没有一种**可靠**的方法可以防止谷歌抓取/索引/缓存页面？

我正在考虑创建一个用户可以使用临时 url 临时共享信息的产品。

这些信息不是很机密，但我绝对不希望它出现在某些缓存甚至搜索结果中。

这样做最可靠的方法是什么，可能的陷阱是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:32:59.610

制作一个 robots.txt 文件。有关信息，请参见[http://www.robotstxt.org/](http://www.robotstxt.org/)。

您也可以`<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">`在`<HEAD>`您的 index.html 中使用。

Google 的 robots.txt 处理规范在[这里](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt)。

# c - 如何定义函数指针数组并且函数没有相同的输入参数定义？

> ID：14043953
> 
> 赞同：1
> 
> 时间：2012-12-26T17:27:53.843
> 
> 标签：c, function, pointers

是否可以定义一个函数指针数组（并且函数没有相同的输入参数），如以下代码所示？

如果是，我必须在函数定义中添加什么`int (*handler)(/*what Ihave to put here ?*/);`

```
struct handler_index {
    const char *name;
    int (*handler)(/*what Ihave to put here ?*/);
};

int handler0 (int a, int b)
{
    printf("%d\n",a+b);
}

int handler1 (int a, int b, int c)
{
    printf("%d\n",a+b+c);
}

int handler2 (int a, int b, int c, int d)
{
    printf("%d\n",a+b+c+d);
}

const struct handler_index handler_index[] = {
  [0] = {"handler0", handler0},
  [1] = {"handler1", handler1},
  [2] = {"handler2", handler3},
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T17:29:04.057

什么都不放：

```
int (*handler)(); 
```

这意味着该函数具有未指定（但非可变）数量和类型的参数。

任何返回`int`和 且具有固定可变参数数量的函数都可以分配给`handler`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T18:47:15.413

虽然`int (*handler)()` 确实允许该函数使用可变数量的参数，但我看不到任何好处。当你有一段代码需要一些东西时，函数指针很有用，找到“正确的事情”（例如，将“名称”与其他地方的一些输入进行比较），并调用函数指针来做它必须做的任何事情。函数指针调用代码需要知道函数有多少个参数（否则它将如何传递正确的参数数量和顺序。

我实际上根本没有看到任何有意义的用途。是的，您可以将可变数量的参数传递给函数，但代码必须知道函数接受哪些参数。

除非在结构的定义中以某种方式指定了参数 - 但是您需要为结构定义不同的内容以允许这样做。

我建议您需要考虑您要实现的目标，然后想出解决问题的方法，很可能使用不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:29:40.560

什么都不放。只是空括号。

```
int (*handler)(); 
```

# python - 使用 pandas.DataFrame 的概率张量乘法

> ID：14043958
> 
> 赞同：4
> 
> 时间：2012-12-26T17:28:37.157
> 
> 标签：python, statistics, pandas, probability, matrix-multiplication

我正在寻找一种在 python 中存储和使用条件概率的好方法。

我正在考虑使用`pandas`数据框。如果某些条件概率`X`是`P(X=A|P1=1, P2=1) = 0.2`等`P(X=B|P1=2, P2=1) = 0.9`，我会使用数据框

```
 A    B
P1 P2          
1  1   0.2  0.8
   2   0.5  0.5
2  1   0.9  0.1
   2   0.9  0.1 
```

`P1`并给定和`P2`作为系列的边际概率

```
1    0.4
2    0.6
Name: P1

1    0.7
2    0.3
Name: P2 
```

我想获得 的边际概率系列`X`，即系列

```
A    0.602
B    0.398
Name: X 
```

我可以得到我想要的

```
X = sum(
    sum(
        X.xs(i, level="P1")*P1[i]
        for i in P1.index
        ).xs(j)*P2[j]
    for j in P2.index
    )
X.name="X" 
```

但这并不容易推广到更多的依赖项，第一个`xs`有`level`和第二个没有之间的不对称看起来很奇怪，并且在使用时像往常一样`pandas`我非常确定使用它的技巧和方法会有更好的解决方案。

是`pandas`一个很好的工具，我是否应该以另一种方式表示我的数据，以及进行此计算的最佳方法是什么，它本质上是一个索引张量积，在`pandas`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:24:23.600

向量化的一种方法是通过使用标签数组进行索引来访问系列 P1 和 P2 中的值。

```
In [20]: df = X.reset_index()

In [21]: mP1 = P1[df.P1].values

In [22]: mP2 = P2[df.P2].values

In [23]: mP1
Out[23]: array([ 0.4,  0.4,  0.6,  0.6])

In [24]: mP2
Out[24]: array([ 0.7,  0.3,  0.7,  0.3])

In [25]: mp = mP1 * mP2

In [26]: mp
Out[26]: array([ 0.28,  0.12,  0.42,  0.18])

In [27]: X.mul(mp, axis=0)
Out[27]: 
       A      B
P1 P2              
1  1   0.056  0.224
   2   0.060  0.060
2  1   0.378  0.042
   2   0.162  0.018

In [28]: X.mul(mp, axis=0).sum()
Out[28]: 
A    0.656
B    0.344

In [29]: sum(
    sum(
    X.xs(i, level="P1")*P1[i]
    for i in P1.index
    ).xs(j)*P2[j]
    for j in P2.index
    )
Out[29]: 
A    0.656
B    0.344 
```

（或者，在不重置索引的情况下访问 MultiIndex 的值，如下所示。）

```
In [38]: P1[X.index.get_level_values("P1")].values
Out[38]: array([ 0.4,  0.4,  0.6,  0.6]) 
```

# jquery-mobile - 有没有办法在 trigger.io 应用程序中启用滚动反弹？

> ID：14043959
> 
> 赞同：1
> 
> 时间：2012-12-26T17:28:40.723
> 
> 标签：jquery-mobile, trigger.io

我正在使用 jquerymobile 和 trigger.io 创建一个 IOS 应用程序。在我的列表视图中，如果我上下滚动，我不会得到熟悉的 BOUNCE 效果？这是否在 trigger.io 应用程序中禁用？可以开启吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:01:40.183

AFAIK 我认为没有办法简单地“打开它”。您可能需要查看 javascript 解决方法，例如 Cubiq.org 的 iScroll4 [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

# git - 合并后的Git壁球历史

> ID：14043961
> 
> 赞同：34
> 
> 时间：2012-12-26T17:28:47.563
> 
> 标签：git, git-merge, squash

我将一个大型项目的上游与我的本地 git 存储库合并。在合并之前，我有少量易于阅读的历史记录，但在合并之后，大量历史记录现在在我的存储库中。我不需要来自上游仓库的所有历史提交。

在此上游合并之后，我想保留其他提交。如何将所有从上游合并的历史压缩到一个提交中，同时保留上游合并后所做的提交？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-10-03T04:32:36.180

使用此处找到的策略从主分支进行多次合并后，我能够压缩多个提交：[https ://stackoverflow.com/a/17141512/1388104](https://stackoverflow.com/a/17141512/1388104)

```
git checkout my-branch            # The branch you want to squash
git branch -m my-branch-old       # Change the name to something old
git checkout master               # Checkout the master branch
git checkout -b my-branch         # Create a new branch
git merge --squash my-branch-old  # Get all the changes from your old branch
git commit                        # Create one new commit 
```

如果您需要将压缩的分支推送到您之前推送到的远程存储库，您将不得不强制更新，例如`git push origin my-branch -f`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-28T13:38:24.440

我最终使用的解决方案是手动重新创建历史记录。我这样做主要是因为我不想花太多时间寻找一个优雅的解决方案，而且没有太多的历史记录（大约 30 次提交，我必须手动合并）。

所以，我在合并巨大的上游之前创建了一个分支：

```
git checkout -b remove-history-fix <commit ID before merge> 
```

`--squash`然后使用该选项重新合并上游。

```
git merge --squash <upstream tag> 
```

然后从旧分支（具有大量上游历史记录的分支）合并后手动挑选提交。

```
git cherry-pick <commit ID> 
```

在所有这些提交合并到我的**remove-history-fix**分支之后，我删除了带有上游历史记录的分支。

```
git branch -D <upstream-history-branch> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-28T05:42:43.163

几个选项供您选择：

## 限制记录

不完全符合您的要求，但可能是一个不错的选择，而且容易得多。这允许您像往常一样使用 git，但隐藏所有您不想看到的东西（假设问题是历史记录使您的日志混乱而不是原始存储空间。我认为压缩分支中的合并不会如果您首先为合并操作获取上游，请防止 git 包含来自上游的所有提交。）。

在这种情况下，您将执行正常的合并，但在记录时您将添加`--first-parent`到命令中。

例如，如果没有我可能拥有的选项（假设“sample more”1 到 3 实际上是更多的提交）

```
$ git log --oneline
0e151bf Merge remote-tracking branch 'origin/master' into nosquash
f578cbb sample more 3
7bc88cf sample more 2
682b412 sample more 1
fc6e1b3 Merge remote-tracking branch 'origin/master'
29ed293 More stuff
9577f30 my local change
018cb03 Another commit
a5166b1 Initial 
```

但是，如果我将`--first-parent`它添加到此：

```
$ git log --oneline --first-parent
0e151bf Merge remote-tracking branch 'origin/master'
fc6e1b3 Merge remote-tracking branch 'origin/master'
9577f30 my local change
018cb03 Another commit
a5166b1 Initial 
```

请注意，在我分支后来自 master 的所有提交（“我的本地更改”是我的分歧提交）都消失了。只有我所做的提交才会显示，包括我合并的时候。如果我在合并期间使用了更好的提交消息，我什至可能知道这批更改是什么。

## 替换历史

这是你问的。

从[https://git-scm.com/book/en/v2/Git-Tools-Replace获取灵感](https://git-scm.com/book/en/v2/Git-Tools-Replace)

我们在这里要做的是压缩遥控器的历史，从我们的角度用我们压缩的版本替换它们的历史，然后合并压缩的版本。

在我的示例存储库中，上游添加的我尚未合并的修订是 682b412 "sample more 1" to origin/master (f578cbb "sample more 3") （尽管对于这个示例来说并不长，假设有 50 个提交或介于两者之间）。

我想要的第一件事是远程端的本地分支：

```
git checkout -b squashing origin/master 
```

接下来，我要快速压扁它

```
git reset --soft 682b412~
git commit -m "Squashed upstream" 
```

注意波浪`~`字符。这导致我们的分支位于我们想要压缩的范围内的第一个提交的父级，并且因为我们指定`--soft`了 ，所以我们的索引仍然是我们想要压缩的范围内的最后一个提交。提交行产生一个单一的提交，由我们的第一个到最后一个组成，包括在内。

此时，origin/master 和 squashing 分支具有相同的树内容但不同的历史。

现在，我们告诉 git，当它看到对 origin/master 的原始提交的引用时，使用我们的压缩提交来代替。使用`git log`我可以看到新的“Squashed upstream”提交是 1f0bc14，所以我们这样做：

```
git replace f578cbb 1f0bc14 
```

从这里开始，您的 git 将使用“压缩的上游”提交。

回到我们原来的分支（如果它是“master”）

```
git checkout master
git merge f578cbb 
```

这似乎合并了原始主机（f578cbb），实际上获得了 1f0bc14 的内容，但将其记录为具有 f578cbb 的父 SHA1

我们不再需要 squashing 分支，因此您可以摆脱它。

现在，假设上游添加了更多功能。在这个简单的示例中，在上游的 repo 中，日志可能会显示：

```
84f5044 new feature
f578cbb sample more 3
7bc88cf sample more 2
682b412 sample more 1
29ed293 More stuff
018cb03 Another commit
a5166b1 Initia 
```

但是，在我们获取上游之后，如果我们从我们的 repo 中查看它的日志，我们会看到：

```
84f5044 new feature
f578cbb squashed upstream
29ed293 More stuff
018cb03 Another commit
a5166b1 Initial 
```

请注意，它似乎也对我们造成了压缩历史，更重要的是，压缩的上游 SHA1 显示了上游历史中使用的那个（对他们来说，这实际上是“样本更多 3”提交）。

因此，合并继续正常工作

```
git merge origin/master 
```

但是我们没有这么杂乱的日志：

```
4a9b5b7 Merge remote-tracking branch 'origin/master' for new feature
46843b5 Merge remote-tracking branch 'origin/master'
84f5044 new feature
f578cbb squashed upstream
fc6e1b3 Merge remote-tracking branch 'origin/master'
29ed293 More stuff
9577f30 my local change
018cb03 Another commit
a5166b1 Initial 
```

如果上游的“新功能”提交同样是大量的提交，我们可以重复这个过程来压缩它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:34:22.183

没有办法做到这一点，因为您将无法与该远程存储库或同一项目的任何其他内容再次推送或合并。压缩时，您正在更改历史记录，从而导致您的存储库和远程存储库之间的 sha1-hash 不同。

你将不得不忍受庞大的历史。

# jsp - 尝试进行ajax调用，使用jqgrid显示Json数据

> ID：14043963
> 
> 赞同：2
> 
> 时间：2012-12-26T17:29:05.823
> 
> 标签：jsp, jquery, jqgrid, struts2, struts2-json-plugin

在对 struts2 动作类的 ajax 调用之后，我有以下 json-data：

```
{"jsonData":[{"age":1,"name":"Aifa"},{"age":2,"name":"Afraa"},{"age":27,"name":"Zafar"}],"searchId":0,"searchName":""}

function setAjaxOutput()    {
        if(httpObject.readyState == 4)  {
            document.getElementById('intValueDiv').innerHTML = httpObject.responseText;

            var jsonString = httpObject.responseText;
            alert(jsonString);
            var jsonString2 = JSON.parse(jsonString);            
            alert(jsonString2.jsonData[2].name);           
          }

     } 
```

json 数据将在 httpObject.responseText 中。

现在使用 jqgrid，看起来，上面的代码不是必需的，但我还不知道如何使用 jqgrid 进行 ajax 调用，接收 json 数据，并在表格中显示。

我正在尝试使用 jqgrid 以网格格式仅显示从动作类返回的 jsonData-array。代码如下。

```
[{"age":1,"name":"A"},{"age":2,"name":"Ab"},{"age":3,"name":"abc"}] 
```

我可以调用 click()，但想调用`'jQuery("#list2").jqGrid()`.

你能否让我知道，我想如何进行更改，所以我可以：

1）发送ajax请求：

url: 'callAJax.action?start=1&t='+Math.random()+ 'testFlag=1'

```
Should single quotes be replaced with double quotes? Please let me know. 
```

另外，我如何找到，无论是 divId1 还是 divId2，都在下面单击。

```
 var $target = $(event.target);
  if( $target.is("div") ) { // div is tag, how to check for id.

    testFlag=1/2;
  } 
```

2) 而且，当 json 数据显示在网格中时，我想为每一行添加按钮，单击该按钮时，我想读取行数据，并对 action-class url 进行 Ajax 调用。

请让我知道，如何实现这一点。

```
<%@taglib prefix="s" uri="/struts-tags" %>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>

        <head>
            <title>AJAX JSP PAGE</title>
            <link rel="stylesheet" href="styles/jqx.base.css"
            type="text/css" />
            <link rel="stylesheet" href="styles/jqx.classic.css" type="text/css" />
            <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
            <script type="text/javascript" src="jqxcore.js"></script>
            <script type="text/javascript" src="jqxbuttons.js"></script>
            <script type="text/javascript" src="jqxscrollbar.js"></script>
            <script type="text/javascript" src="jqxmenu.js"></script>
            <script type="text/javascript" src="jqxgrid.js"></script>
            <script type="text/javascript" src="jqxdata.js"></script>
            <script type="text/javascript">
                var start = 0;
                var idAndName = "";
                var rowId = 0;
                var searchId = 0;
                var searchName = "";

                $(document)
                    .ready(function () {

                    alert("document loaded.");

                    $("#editgrid")
                        .jqGrid({

                        url: 'callAJax.action?t=1',
                        datatype: "json",
                        myType: 'GET',
                        colNames: ['name', 'age'],

                        colModel: [

                        {
                            name: 'name',
                            index: 'name',
                            width: 80,
                            editable: true,
                            editoptions: {
                                size: 10
                            }
                        },

                        {
                            name: 'age',
                            index: 'age',
                            width: 90,
                            editable: true,
                            editoptions: {
                                size: 25
                            }
                        }

                        ],

                        rowNum: 10,
                        rowList: [10, 20, 30],
                        pager: '#pagered',
                        sortname: 'name',
                        viewrecords: true,
                        sortorder: "desc",
                        caption: "Editing Example",
                        editurl: "index.jsp"

                    });

                    $("#bedata")
                        .click(function (event) {

                        alert("Inside click function.");
                        jQuery("#editgrid")
                            .jqGrid('getGridParam', 'selrow');

                    });

                });
            </script>
        </head>

        <body>
            <center>
                 <h1>
                Use Ajax in Struts2
            </h1>

                <br/>
                <br/>
                <table id="editgrid"></table>
                <div id="pagered"></div>
                <input type="button" id="bedata" value="Edit Selected" />
            </center>
            <br/>
        </body>

    </html> 
```

发生了什么，当我跑步时？

回答：

当我完全删除时`$("#editgrid")..jqGrid({})`，我看到消息“已加载文档”。

当我单击按钮时，我看到消息“内部单击功能”。

但是，当我部分或全部添加`$("#editgrid")..jqGrid({})`块时，我只看到“已加载文档”，但在单击按钮时，未显示“内部单击功能”消息。

如果您想了解更多信息，请告诉我。一如既往，谢谢！！

# android - 如何在通知中添加声音？

> ID：14043977
> 
> 赞同：25
> 
> 时间：2012-12-26T17:29:52.513
> 
> 标签：android, audio, notifications

如何为 NotificationCompat.Builder 创建的通知添加声音？我在 res 中创建了一个 raw 文件夹并在那里添加了声音。那么我现在如何将它添加到通知中呢？这是我的通知代码

```
 int NOTIFY_ID=100;
    Intent notificationIntent = new Intent(this, Notification.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);

    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
            .setContentIntent(pendingIntent)
            .setSmallIcon(R.drawable.notification)
            .setContentTitle("Warning")
            .setContentText("Help!")

    NotificationManager mgr = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    mgr.notify(NOTIFY_ID, mBuilder.build()); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-26T17:33:29.030

我猜这里的问题是如何用 a 引用声音`Uri`，因为类中有一个明显的方法`NotificationCompat.Builder`- `setSound(Uri soundUri)`。

要访问您的`raw`资源，您需要创建`Uri`以下内容：

> android.resource://[PACKAGE_NAME]/[RESOURCE_ID]

所以代码最终可能看起来像这样：

```
Uri sound = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.notifysnd);
mBuilder.setSound(sound); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-26T17:35:44.707

使用通知播放声音：

```
Notification notification = new Notification(icon, tickerText, when); 
```

做正常的通知程序

要在通知中播放默认声音：

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

要在通知中播放自定义声音：

```
notification.sound = Uri.parse("file:///sdcard/notification/notification.mp3"); 
```

然后只需使用通知管理器发送通知。如果同时使用这两个语句，应用程序将默认使用默认声音。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-23T00:25:17.973

对于 Android 8 (Oreo) 及更高版本，您应该使用[Notification Channel](https://developer.android.com/training/notify-user/channels)来显示通知，如果您没有禁用它，它们会自动发出声音。

对于较旧的设备，您可以使用 Notification Builder 设置声音。您可以使用`Notification.Builder.setSound()`设置自定义声音，也可以使用

`Notification.Builder.setDefaults(NotificationCompat.DEFAULT_SOUND)` 设置默认声音。

振动和灯光也有[默认设置](https://developer.android.com/reference/android/app/Notification.Builder#setDefaults(int))

# php - 更改字段输出的最佳方法？

> ID：14043984
> 
> 赞同：1
> 
> 时间：2012-12-26T17:31:10.680
> 
> 标签：php, drupal-7

我正在使用 Drupal 7

我有一个日期字段。

它显示应按预期选择的日期。

但是，我会在某些 php 验证下将显示更改为“这个日期几乎结束”，或者在不同的验证下显示“这个日期现在已关闭”。

我不能在 reides 上使用字符串，因为它不接受 php。我是否必须使用自定义模块并使用钩子形式 alter 或 node api？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:41:25.023

是的，您必须使用模块来调整图像字段的显示方式。您可以使用 hook_field_formatter_info() 和 hook_field_formatter_view() 创建新的显示格式，也可以通过检查 $display['type'] 使用 hook_field_formatter_view() 挂钩现有显示。我会推荐前者。

这是两个钩子如何协同工作的示例：

```
function modulename_field_formatter_info()
{
    return array(
        'modulename_formatter' => array(
        'label' => t('Custom Date Format'),
        'field types' => array('date'),
        ),
    );
}

function modulename_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, $items, $display)
{
    if ($display['type'] != 'modulename_formatter')
        return;

    foreach ($items as $delta => item)
    {
        if ($item['date'] < time()) //Or 'datetime' or 'datestamp'
            $element[$delta]['#markup'] = 'this date is now closed.';
    }
    return $element;
} 
```

我可能有一些索引错误，但它们应该非常接近。

[http://api.drupal.org/api/drupal/modules!field!field.api.php/function/hook_field_formatter_info/7](http://api.drupal.org/api/drupal/modules!field!field.api.php/function/hook_field_formatter_info/7) http://api.drupal.org/api/drupal/modules!field!field.api .php/function/hook_field_formatter_view/7

# visual-studio - 使用重定向标准输入使用 Visual Studio 进行调试

> ID：14043986
> 
> 赞同：23
> 
> 时间：2012-12-26T17:31:32.837
> 
> 标签：visual-studio, debugging, visual-c++, visual-studio-2012, visual-studio-debugging

我正在使用 Visual Studio 调试 c++ 控制台应用程序。每次调试这个程序时，我都厌倦了插入相同的输入。我想多次使用相同的输入。

我这样做没有在命令行中使用命令进行调试：Program.exe < 1.in

是否可以使用从文件重定向的标准输入进行调试？？？

我已经尝试过查看 procejt 属性。我尝试将 Command 设置为 $(TargetPath) < 1.in 而不是 $(TargetPath)。我还尝试将命令参数设置为 < 1.in。这些方法都没有奏效。

我正在使用 Visual Studio 2012。但这可能在所有版本的工作室中都是相同的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-26T18:09:35.800

这是受支持的调试方案。您必须确保调试器可以找到该文件。将命令设置保留为`$(TargetPath)`。命令参数设置的一个可能值是：

```
 < "$(ProjectDir)test.txt" 
```

如果输入文件“test.txt”位于项目目录中。或者键入文件的完整路径以确保。描述此功能的 MSDN 文章[可在此处获得](http://msdn.microsoft.com/en-us/library/kcw4dzyf%28v=VS.110%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-18T04:49:38.490

我只是在项目中创建了一个名为 stdin.txt 的文件 1）将构建操作设置为内容 2）复制到输出目录：如果更新则复制

然后在构建时将 stdin.txt 复制到与可执行文件相同的文件夹中。

然后在项目属性调试|命令行参数中输入以下<stdin.txt

无需使用路径宏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T17:36:24.877

如果您不想弄乱路径，您可以右键单击文件夹中`add`的文件夹，然后将所需文件中的内容粘贴到该文件夹​​中。然后将命令参数更改为新文件名。`new file``source files``solution explorer`

# android - 找不到 com.slidingmenu.lib.SlidingMenuActivity.apk

> ID：14043988
> 
> 赞同：0
> 
> 时间：2012-12-26T17:31:38.937
> 
> 标签：android

我正在尝试使用适用于 Android 的 SlidingMenu 库，但出现以下错误：

```
Could not find com.slidingmenu.lib.SlidingMenuActivity.apk 
```

和另一个错误：

```
E/AndroidRuntime(24767): java.lang.NoClassDefFoundError: com.slidingmenu.lib.SlidingMenu 
```

我已将 正确添加`com.slidingmenu.lib.SlidingMenuActivity`到 Java Build 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-31T01:13:02.150

我发现在 2012 年 6 月和现在（2013 年 8 月）之间的某个时间，包名称发生了变化。执行全局搜索和替换`com.slidingmenu.lib`以`com.jeremyfeinstein.slidingmenu.lib`解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:00:01.100

**Android 疑难解答“找不到 somelibrary.apk”**

[找不到 Library.apk！](https://stackoverflow.com/questions/6337673/could-not-find-library-apk)

**Android 'java.lang.NoClassDefFoundError com.somelibrary.mylibrary' 疑难解答**

[排查 Java 中的 NoClassDefFoundError](https://stackoverflow.com/questions/5376311/noclassdeffounderror-java)

# html - How can I hide my page source for my website?

> ID：14043989
> 
> 赞同：-9
> 
> 时间：2012-12-26T17:31:40.153
> 
> 标签：html, css

I want to hide my page sources for my website. But I am having some problems to find the code that would hide my page sources. I am using HTML and CSS.

I have tried searching on Google, but I was unable to find it. I would appreciate if anyone could tell me that code to hide page sources.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:34:12.300

是不可能的。无论您使用了多少 JavaScript 技巧（顺便说一下，也可以从搜索引擎中隐藏您的网站）- 浏览器将始终构建一个任何人都可以查看的适当 DOM 树，例如使用 firebug。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:34:06.007

你不能。页面的来源是浏览器呈现它的方式。这是您的服务器在发出请求时返回的内容。

任何开发人员都可以创建一个 Web 客户端，发出请求，然后简单地将文本转储到屏幕上……从而显示您的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:35:31.673

你不能......你能做的最好的事情是混淆 html 和 css，这样人们就不能轻松阅读它，但如果他们想要的话，无论如何都有一些方法可以获取你的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:37:43.983

它很复杂，不能用于您可能想到的每个页面，但请考虑使用 phantomjs 在服务器端呈现您的页面并提供该页面而不是常规 HTML。复杂的部分是让您的链接或其他媒体表现得像他们应该的那样。

实际上这几乎是不可能的……而且通常完全没用……算了吧！

# objective-c - iOS 内存管理 - 说明

> ID：14043994
> 
> 赞同：1
> 
> 时间：2012-12-26T17:32:44.693
> 
> 标签：objective-c, ios, ios5, memory-management, dealloc

我知道`alloc`并且`retain`会增加对象的引用计数。是否有任何其他不同的方法可以实际增加引用计数？何时/如何`dealloc`调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T17:37:28.543

*   `alloc`分配一个保留计数为 1 的对象。
*   以 开头的方法`new`也返回一个保留计数为 1 的对象。
*   `retain`将计数增加 1。
*   `release`并且`autorelease`（在运行循环结束时）将其减 1。
*   以类名（不带前缀）开头的方法返回一个自动释放的对象，这意味着如果您自己不保留它，它将在循环结束时释放。
*   最后，复制对象的方法（通常以 开头`copy`）也会创建一个保留计数为 1 的副本。

`dealloc`当对象的保留计数降至 0 时调用。

PS。如果您还不知道，请考虑使用[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T17:36:16.870

有了这些，保留计数就会增加。

1.  新的，但是它可以被看作是alloc+init。

2.  保持

3.  复制创建保留计数 = 1 的新对象

4.  mutableCopy 使用保留计数=1 创建新对象

`dealloc`一旦保留计数达到 0，就会自动调用。