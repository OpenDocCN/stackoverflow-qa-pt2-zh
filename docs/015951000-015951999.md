# StackOverflow 问答 15951000-15951999

# sql-server - 清除方案中的所有数据，保持结构完整

> ID：15951005
> 
> 赞同：0
> 
> 时间：2013-04-11T14:10:03.047
> 
> 标签：sql-server, sql-server-2008, testing

我们将很快对产品进行一段时间的测试。该产品是一个带有 SQL Server 2008R2 后端的 Web 应用程序。

我们的数据库中有几个模式（Customer、DataEntry 和其他一些）。

我找到了在不破坏参照完整性或数据结构的情况下[擦除数据库中所有数据的](http://www.mikemarks.net/blog/delete-all-data-from-a-database/)方法，这与我们想要做的很接近。我发现的问题是我们实际上需要一些表中的一堆数据。本质上，我们只想擦除客户模式。

我们编写了一个脚本，它将为客户加载测试数据，但是有没有办法改变我链接文章中的技术以仅针对特定模式？有没有更好的方法来清除架构中的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:18:22.090

对我来说也是一个常见的场景。我通常编写我所谓的重置脚本，按照必要的顺序从目标表中删除所有数据以防止引用错误，然后重新设置主键。

```
DELETE FROM < table 1 >
DELETE FROM < table 2 >
... etc ...    
DBCC CHECKIDENT (< table 1 >, RESEED, 0)
DBCC CHECKIDENT (< table 2 >, RESEED, 0)
... etc ... 
```

编辑

更全面地回答原始问题。要将数据保留在特定表中，您需要修改执行删除/截断的代码块，并以类似的方式修改重新设置 idents 的代码。

```
EXEC sp_MSForEachTable '
    IF object_id(''?'') != < table name > AND object_id(''?'') != < table name > AND ... etc ...
    BEGIN
        IF OBJECTPROPERTY(object_id(''?''), ''TableHasForeignRef'') = 1
            DELETE FROM ?
        ELSE
            TRUNCATE TABLE ?
    END
'
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:41:57.773

只需将@schemaID 设置为您希望删除的模式的名称，剩下的就交给它了。如果你最终得到一个 FK 依赖循环，它将中断并告诉你该怎么做......

```
Declare @schemaID Nvarchar(256)
Set     @schemaID = 'Schema' -- Set this to the name of the schema you wish to blow away

If      Object_ID('tempdb..#tables') Is Not Null Drop Table #tables
Create  Table #tables (tID Int, SchemaName Nvarchar(256), TableName Nvarchar(256))

Insert  #tables
Select  Row_Number() Over (Order By s.name, so.name), s.name, so.name
From    sysobjects so
Join    sys.schemas s
        On  so.uid = s.schema_id
Where   so.xtype = 'u'
And     s.name = @schemaID

Declare @SQL Nvarchar(Max),
        @schema Nvarchar(256),
        @table Nvarchar(256),
        @iter Int = 1,
        @loopCatch Int = 0

While   Exists (Select  1
                From    #tables)
Begin
        Select  @schema = SchemaName,
                @table = TableName
        From    #tables
        Where   tID = @iter

        If      Exists (Select  1
                        From    sysobjects o
                        Join    sys.schemas s1
                                On  o.uid = s1.schema_id
                        Join    sysforeignkeys fk
                                On  o.id = fk.rkeyid
                        Join    sysobjects o2
                                On  fk.fkeyid = o2.id
                        Join    sys.schemas s2
                                On  o2.uid = s2.schema_id
                        Join    #tables t
                                On  o2.name = t.TableName Collate Database_Default
                                And s2.name = t.SchemaName Collate Database_Default
                        Where   o.name = @table
                        And     s1.name = @schema)
        Begin
                Update  t
                Set     tID = (Select Max(tID) From #tables) + 1
                From    #tables t
                Where   tableName = @table
                And     schemaName = @schema

                Set     @iter = @iter + 1
        End
        Else
        Begin
                Set     @Sql = 'Truncate Table [' + @schema + '].[' + @table + ']'

                Begin   Try
                        Exec    sp_executeSQL @SQL;

                        Delete  t
                        From    #tables t
                        Where   tableName = @table
                        And     schemaName = @schema

                        Set     @iter = @iter + 1
                End     Try
                Begin   Catch
                        Print @SQL

                        Update  t
                        Set     tID = (Select Max(tID) From #tables) + 1
                        From    #tables t
                        Where   tableName = @table
                        And     schemaName = @schema

                        Set     @iter = @iter + 1
                        Set     @loopCatch = @loopCatch + 1;

                        If      @loopCatch > 5
                        Begin
                                Select  'WARNING: Endless FK redundancy loop. Drop the constraints and these tables, truncate and reapply constraints manually'
                                Union   All
                                Select  '[' + SchemaName + '].[' + TableName + ']'
                                From    #tables;                

                                Break;
                        End                     
                End     Catch
        End
End 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:23:48.223

这是在数据库和模式上参数化的。如果没有提供模式，它将清除指定数据库中的所有数据。

通过禁用约束适当地处理具有外键引用的表。如果程序失败（通常不应该这样做），请确保在修复问题原因后成功运行它，这应确保约束检查恢复正常。

如果您在模式之间有外键，这将无法正确处理外键引用，但是，可以很容易地对其进行修改以处理此问题。

```
create procedure [removeData] (@database_name sysname, @schema_name sysname = null)
as
    set nocount on

    create table #tables (
        TableName varchar(900) not null primary key,
        HasFKRef bit not null
    );

    declare @sql nvarchar(4000),
            @table_name varchar(900);

    if (db_id(@database_name) is null)
        raiserror ('You must at least specify the database name', 16, 1);

    set @sql = 'select ''['' + TABLE_CATALOG + ''].['' + TABLE_SCHEMA + ''].['' + TABLE_NAME + '']'' as TableName, (case when exists(select * from [' + @database_name + '].INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc inner join [' + @database_name + '].INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc on rc.UNIQUE_CONSTRAINT_CATALOG = tc.CONSTRAINT_CATALOG and rc.UNIQUE_CONSTRAINT_SCHEMA = tc.CONSTRAINT_SCHEMA and rc.UNIQUE_CONSTRAINT_NAME = tc.CONSTRAINT_NAME where tc.TABLE_NAME = t.TABLE_NAME) then 1 else 0 end) as HasFKRef
        from [' + @database_name + '].INFORMATION_SCHEMA.TABLES t
        where TABLE_TYPE = ''BASE TABLE'' and TABLE_SCHEMA = isnull(@schema_name, TABLE_SCHEMA)';

    insert into #tables
        exec sp_executesql @sql, N'@schema_name sysname', @schema_name;

    declare @curse cursor 
    set @curse = cursor fast_forward for
    select sql from (
        select 'alter table ' + TableName + ' nocheck constraint all' as sql, 1 as sort
        from #tables
        union all
        select 'truncate table ' + TableName, 2 as sort
        from #tables
        where HasFKRef = 0
        union all
        select 'delete from ' + TableName, 3 as sort
        from #tables
        where HasFKRef = 1
        union all
        select 'alter table ' + TableName + ' with check check constraint all', 4 as sort
        from #tables
    ) t
    order by sort, sql

    open @curse

    fetch next from @curse into @sql

    while (@@fetch_status = 0)
    begin
        exec (@sql)

        fetch next from @curse into @sql
    end

    close @curse
GO 
```

# visual-studio-2010 - 将项目导入 Visual Studio。为什么会有这么多错误？

> ID：15951008
> 
> 赞同：0
> 
> 时间：2013-04-11T14:10:08.940
> 
> 标签：visual-studio-2010, import

这并不是真正的特定编码，但我们目前有一个可以正常运行的项目。我的任务是对其进行一些更改。我将项目的所有文件导入到 Visual Studio 2010。由于所有错误，我无法完成任何工作！

你对我有什么建议吗？该项目没有源文件，所以我创建了一个项目并自己制作了一个。

我尝试了另一个版本的 Visual Studio，但错误仍然存​​在。这个项目到底是如何运作的？

此外，我无法与创作者交谈。

谢谢您的帮助！

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:15:55.870

在没有看到您遇到的具体错误的情况下，我猜您遇到了以下两种情况之一：

*   源代码引用了您尚未在开发计算机上安装的 .NET 程序集。纠正此问题的唯一方法是获取这些程序集的副本以安装它们。程序集名称应包含在错误消息中，这将为您提供一个很好的起点。
*   最初开发它的 .NET 框架版本与您现在尝试使用的版本之间的差异也可能导致大量错误。如果错误专门引用了版本号，这很可能是您遇到的问题。如果是这种情况，您可以通过多种方式升级程序引用的各个文件版本，但老实说，我已经有大约 8 年没有这样做了，所以我目前对如何做一无所知.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:16:22.187

我不明白 ？你有一个想要开始使用 VS2010 的“项目”（什么样的项目？）？

您将文件添加到新的 VS2010 项目并开始构建它并发生许多错误？

什么样的错误？语言 (C++/C#) 错误？缺少包括缺少？缺少图书馆？

你能展示一些你得到的错误吗？

# node.js - 是否有 .mocha 文件可以在其中指定默认值，例如 --no-colors？

> ID：15951010
> 
> 赞同：87
> 
> 时间：2013-04-11T14:10:19.057
> 
> 标签：node.js, configuration, config, mocha.js, dotfiles

我想为 mocha 设置一些默认值，而不必每次都键入它们。mocha 是否在任何地方寻找配置文件/点文件，就像 jshint 寻找`.jshintrc`和 npm 寻找的那样`package.json`？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-11T16:08:32.910

是的。您可以创建一个文件`./test/mocha.opts`并在该文件中指定`--no-colors`.

有关更多信息，请参阅[Mocha Doc](http://mochajs.org/#mochaopts)上的*mocha.opts 。*

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-06-13T15:07:33.170

摩卡推荐`mocha --config=.mocharc.json`。

也有新的格式，比如 yaml。看一些[例子](https://github.com/mochajs/mocha/tree/master/example/config)。

* * *

老答案：

默认值为`./test/mocha.opts`. 您可以使用参数传递自定义路径`--opts`：

`mocha --opts ./mocha.opts`

例如，如果您不将测试存储在`test/`文件夹中，而是在代码文件旁边，则很有用。

任何名称和扩展名似乎都可以使用，因此`mocha --opts .mocharc`如果您希望它与 . 等兼容`.jshintrc`，您甚至可以这样做`.babelrc`。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-02-21T10:10:31.043

在 mocha 6+ 中`mocha.opts`，`legacy`定义配置的新位置是一个文件，该文件可以具有[文档中描述的](https://mochajs.org/#configuring-mocha-nodejs)`.mocharc`不同格式（JSON、YAML、JS）或添加到使用键的 JSON 配置。`package.json``mocha`

指定您自己的 mocha 配置路径是使用但 mocha按照文档（JS、YAML、YML、JSON）中描述的顺序默认`--config <file>`使用任何文件，并且还自动使用优先级低于给定配置文件的key from 。`.mocharc.*``mocha``package.json`

# html5-video - 可以配置 MIME 类型的 Github Pages 文件吗？

> ID：15951012
> 
> 赞同：16
> 
> 时间：2013-04-11T14:10:24.623
> 
> 标签：html5-video, mime-types, mp4, github-pages

我们在 Github Pages 存储库中有一个 MP4 视频文件。该文件的 MIME 类型为`application/octet-stream`，这意味着 Internet Explorer 不喜欢它。它应该作为 type `video/mp4`。有没有办法配置 Github Pages 以使用正确的 MIME 类型，或者我们应该为视频找到替代托管解决方案？[帮助页面](https://help.github.com/categories/20/articles)中未涉及此主题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-09T22:27:29.920

该主题在这里解决：[https ://help.github.com/articles/mime-types-on-github-pages/](https://help.github.com/articles/mime-types-on-github-pages/)

> GitHub Pages 在 1,000 多个文件扩展名中支持 750 多种 MIME 类型。支持的 MIME 类型列表是从 [mime-db 项目](https://github.com/jshttp/mime-db)生成的，该项目聚合了来自 Apache 和 Nginx 项目的 MIME 类型以及互联网内容类型的官方 IANA 列表。
> 
> [MIME 类型](https://en.wikipedia.org/wiki/Internet_media_type)是服务器发送的附加标头，用于向浏览器提供有关所请求文件类型以及下载后如何处理文件的信息。
> 
> 要添加或修改 MIME 类型以在 GitHub 页面上使用，请参阅[mime-db 贡献说明](https://github.com/jshttp/mime-db#adding-custom-media-types)。

mime-db 项目目前报告`mp4`为`video/mp4`：

```
"video/mp4": {
  "source": "apache",
  "compressible": false,
  "extensions": ["mp4","mp4v","mpg4"]
}, 
```

来源：[https ://github.com/jshttp/mime-db/blob/46a40f0524a01fb3075a7ecde92e8e04fc93d599/db.json#L6233](https://github.com/jshttp/mime-db/blob/46a40f0524a01fb3075a7ecde92e8e04fc93d599/db.json#L6233)

如果 Github 页面仍在报告`mp4`文件，`application/octet-stream`您应该联系 Github 支持。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-07T12:19:04.417

答案是不。

然而，[伊恩之前的回答](https://stackoverflow.com/a/16411902)并不完全正确。您可以使用 github 来托管网页。那里有很多开发者博客。

对于视频，我使用 Amazon s3，因为存储和提供视频内容的成本几乎为零，您可以根据需要设置 mimetypes。

上个月我以 9 美元的价格存储了大约 60GB 的视频并提供了 8GB 的​​服务，所以这是值得的。

* * *

## 回答 #3

> 赞同：-21
> 
> 时间：2013-05-07T05:38:22.730

你不应该将 Github 用作网络服务器，因为它是一个代码托管站点。他们管理您的代码存储库，只关心显示代码。

# django - Django私人文件上传

> ID：15951014
> 
> 赞同：1
> 
> 时间：2013-04-11T14:10:35.103
> 
> 标签：django, file-upload, permissions, file-permissions

我希望管理员用户能够附加与我的模型相关的私人任意文件（一个共享点）。由于 Django 主要用作发布平台，所以到目前为止我发现的所有示例都将文件上传到静态目录，在那里它们可以公开访问。如何允许管理员上传与它们相关的模型具有相同身份验证权限的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:51:51.707

您可以做的是在您的 Web 服务器中设置一个特定位置，该位置被归类为仅限内部，您的 Django 应用程序中的业务逻辑将发送带有特定标头的重定向，从而允许您的 Web 服务器静态地提供文件。

我之前使用 X-Accel-Redirect 使用 Nginx 完成了此操作，因此我将在我的示例中使用它，但我相信 Apache2 和其他 Web 服务器（我认为是 X-Sendfile？）中存在等效功能。

在您的 Nginx 配置中，设置一个位置，该位置为您上传受访问保护的文件的目录提供服务：

```
location /protected/ {
    internal;
    alias /var/www-priv/;
} 
```

此目录中的文件将无法通过 /protected/{filepath} 的 URL 从外部访问，但如果您从 Django 应用程序返回带有标头 X-Accel-Redirect = /protected/{filepath} 的响应，则可以访问。

使用 /media/{filepath} 之类的 url 创建一个视图，您可以在其中执行必要的业务逻辑来控制对其的访问（您可能希望使路径参数更加详细，以便您可以捕获应用程序标签、模型和对象为访问控制而附加文件的 ID，例如 /media/{app_label}/{model}/{object_id}/{filename}）

然后你就做

```
response = HttpResponse()
response['X-Accel-Redirect'] = "/protected" + filepath
return response 
```

Bob 是你的叔叔 - 将向用户提供受保护的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:40:28.893

我认为最强大的方法是编写[自定义文件存储](https://docs.djangoproject.com/en/dev/howto/custom-file-storage/)

这并没有那么困难（但对于您的需求可能有点过分了）。然后你可以通过这种方式将你的自定义存储绑定到你的模型：

```
from django.db import models
from django.db.models.fields.files import FileField
from myapp.storage import MyCustomStorage

class MyModel(models.Model):
    path = FileField( ... , storage=MyCustomStorage(), blank=False) 
```

然后，您可以在自定义存储类中实现业务逻辑。这样做，您可以将私有文件存储在本地文件系统、数据库或远程系统（如 Google AppEngine）中。

干杯!

# php - 使用 Git、Bitbucket 和 PHP 自动化部署

> ID：15951031
> 
> 赞同：4
> 
> 时间：2013-04-11T14:11:18.063
> 
> 标签：php, git, deployment, bitbucket

当我将 git push 到我的 bitbucket 存储库时，我正在尝试设置自动部署。我有一个我从[这个博客](http://brandonsummers.name/blog/2012/02/10/using-bitbucket-for-automated-deployments/)中利用的 php 部署脚本，但是当脚本运行时，它会记录它只是从以前的提交更新。

这是一个例子。假设我登录到我的服务器并输入 git pull。服务器将使用最新更改进行更新，并假设该提交的哈希为 001。但是，如果我进行多次提交，我们将它们称为 002、003 和 004，假设我在每次提交后将这些更改推送到 bitbucket，我的脚本应该每次都运行. 脚本会运行，但每次它都会保留从 001 开始的更改。只有当我登录服务器并输入 git pull 时，服务器才会更新为 004。你知道这是什么原因吗？

```
// Make sure we're in the right directory
exec('cd '.$this->_directory, $output);
$this->log('Changing working directory... '.implode(' ', $output));

// Discard any changes to tracked files since our last deploy
exec('git reset --hard HEAD', $output);
$this->log('Reseting repository... '.implode(' ', $output));

// Update the local repository
exec('git pull '.$this->_remote.' '.$this->_branch, $output);
$this->log('Pulling in changes... '.implode(' ', $output));

// Secure the .git directory
exec('chmod -R og-rx .git');
$this->log('Securing .git directory... ');

if (is_callable($this->post_deploy))
{
 call_user_func($this->post_deploy, $this->_data);
}

$this->log('Deployment successful.'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:14:37.057

我建议发布的不是基于你的 master 中的最新版本，而是基于最新的标签。

`/home/my-user/my-application/1.0.12/www`
`/home/my-user/my-application/1.0.13/www`

等等。这提供了回滚功能。您可以创建一个 PHP 脚本，通过 SSH 连接到您的服务器并基于该标签创建一个新的克隆。如果你使用 Composer，你可以使用它来执行命令。如果没有，您可以使用 makefile 来完成。

编辑：我忘了提到你实际上是如何链接它的。

你有一个符号链接
`/home/my-user/my-application/www -> /home/my-user/my-application/1.0.12/www`

当您的整个部署脚本完成且没有错误时，您将符号链接切换为：
`/home/my-user/my-application/www -> /home/my-user/my-application/1.0.13/www`

您的应用程序现在无需停机即可运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-28T18:42:53.303

一种非常简单有效的方法是使用*bitbucket 管道*，您可以创建一个 YAML 脚本来编译您的依赖关系，并在每次提交时自动或手动将代码推送到服务器。

以下是 Bitbucket Pipelines YAML 脚本的示例：

```
image: php:7.1.1

pipelines:
  default:
    - step:
       caches:
         - composer
       script:
         - apt-get update && apt-get install -y unzip
         - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer
         - composer install
    - step:
       deployment: staging
       name: Deploy to Staging Server
       script:
         - apt-get update
         - apt-get -qq install rsync 
         - echo "Upload Project files..."
         - rsync -avH * -e "ssh" root@$IP_SERVER:/var/www/html/ 
```

此脚本在 Docker 实例中安装 Composer 依赖项并将项目文件推送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T08:52:13.447

问题是文件权限。

我正在关注该博客文章的相同链接。我发现 php 和 nginx 进程使用的“www-data”用户没有对您的存储库代码的写入权限。它甚至不能使用 git。

为了验证这一点，请尝试在服务器上作为“www-user”执行“git pull”。您可以通过“sudo su www-data”切换到它。您会发现它甚至无法将其识别为有效的 git 存储库，并且无法在没有错误的情况下运行您的“deploy.php”脚本。

您需要为您的存储库设置适当的权限，以便 www-data 可以访问它。

或者你改变整个方法。按照这篇文章[http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)我觉得这是一个比上面更好的方法。我最终使用了这种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T11:33:07.230

你想`post-update`在你推送到的遥控器中设置一个钩子。

在默认情况下，git 不会检出您推送到远程的任何数据。这就是为什么默认 git 配置拒绝推送到*签出分支*，因为当您推送到签出分支时，签出文件不再与 HEAD 保持同步。

但是，当远程接收到对分支的推送时，您可以在`post-update`钩子中对此做出反应。要查看会发生什么，您应该首先从一些日志记录开始：

```
echo "post update `date`: $*" >> /home/ingo/test/githooks.out 
```

例如，当我推送到新分支时，我得到了这条线

```
post update Mi 24\. Jun 13:01:14 CEST 2015: refs/heads/new 
```

，其中`$*`包含我推送到的分支。

有了这个，您可以简单地编写一个脚本来签出该分支。我更喜欢检查分离的头，因为将多个模块存储库（无子模块）的工作组合到已部署的版本中要简单得多。请参阅我对源代码部署的[回答](https://stackoverflow.com/questions/30939511/how-to-automate-deployment-of-source-compiled-code-excluding-git-history-to/30940591#30940591)，了解如何在 git 存储库之外签出代码并使用它。

例如你可以做

```
for b in $*
do B=`basename $b`
if [ "$B" = "publish" ] # react on changes to the publish branch
then git --work-tree "PATH TO THE PUBLISHED WORK TREE" checkout publish
do_some_extra_work # to change permissions or inform your team leader
fi done 
```

当然，您也可以执行结帐步骤，即在拉动时完成

```
if [ "`cat HEAD`" = "ref: refs/heads/master" ]
# only do that checkout if the repository is in a sane state
then git merge new # I assume you push to new
fi 
```

很酷的是，您将在执行推送的终端的遥控器上看到钩子的输出：

```
# git push remote master:new
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 296 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: Updating f81ba5b..a99a710
remote: Fast-forward
remote:  a.txt | 2 ++
remote:  1 file changed, 2 insertions(+)
To ../remote
    db48da1..a99a710  master -> new 
```

# java - JSONObject ClassNotFoundException

> ID：15951032
> 
> 赞同：15
> 
> 时间：2013-04-11T14:11:19.310
> 
> 标签：java, json, maven, intellij-idea, classnotfoundexception

我在 IntelliJ 工作并使用 Maven。我有一个类使用`JSONObject`：

```
import org.json.JSONObject;

try {
  JSONObject documentObj = new JSONObject(document);
} catch (Exception e) {
  throw new RuntimeException("Failed to convert JSON String to JSON Object.", e);
} 
```

pom.xml 文件中的 Maven 依赖项：

```
<dependency>
  <groupId>org.json</groupId>
  <artifactId>json</artifactId>
  <version>20090211</version>
</dependency> 
```

我可以做一个`mvn clean package`并成功构建。但是当我尝试运行它时，我得到：

> 错误：java.lang.ClassNotFoundException：org.json.JSONObject

还有什么我在这里想念的吗？谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-11T14:18:18.263

将[json jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/json/json/20090211/json-20090211.jar)添加到您的类路径

或使用`java -classpath json.jar ClassName`

或者将此添加到您的 maven pom.xml 依赖项中：

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20090211</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-07-15T08:11:07.023

截至今天（2020 年 7 月 15 日），您需要使用最新的 Maven 存储库，如下所示：

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20200518</version>
</dependency> 
```

对于未来的任何新版本，您可以在这里查看：

*   [https://mvnrepository.com/artifact/org.json/json](https://mvnrepository.com/artifact/org.json/json)

然后只需将**20200518**替换为最新**的新版本值**即可。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-24T10:20:57.333

使用最新的 Maven 依赖项为我解决了这个问题

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20171018</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-07T17:25:53.417

最初我正在使用`net.sf.json-lib`，但每当我尝试使用`.put()`方法时，它都会与 JSONArray 产生问题

以下解决了我的问题：

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>LATEST</version>
</dependency> 
```

虽然我不是很喜欢使用`LATEST`，但因为它是一个数字版本号，而不是更容易理解的版本控制，所以我发现这个对我有用。

# c# - 皮肤 id 映射出现问题是 asp.net

> ID：15951033
> 
> 赞同：0
> 
> 时间：2013-04-11T14:11:28.343
> 
> 标签：c#, asp.net

这可能是一个基本问题，但对我来说很难，因为我是第一次尝试。

我在这个结构 App_Themes\Theme2\Button2.skin 中定义了皮肤 (Button2.skin)。因此我在皮肤文件下添加了以下几行

```
<asp:Button runat="server" SkinID="Button2"
  BackColor="Green" 
  ForeColor="White" 
  Font-Name="Arial" 
  Font-Size="19px" /> 
```

在我的页面中，我为 Label 定义了 skinid，如下所示，即使它说“皮肤 ID 值未定义主题或样式表主题”

```
<asp:Button ID="CompanyName" runat="server"  SkinID="Button2" Text="Label"></asp:Label> 
```

我错过了什么，但我不知道到底是什么？请帮我找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:38:09.653

最后，我发现了问题所在。这是因为当前页面缺少主题属性。

```
<%@ Page Title="Contoso Home Page" Theme="Theme2" Language="C#" /> 
```

# python - 多个模块的django结构

> ID：15951036
> 
> 赞同：3
> 
> 时间：2013-04-11T14:11:34.900
> 
> 标签：python, django, module, tablename

我对 django 和 python 也很陌生。我想尝试一个用 django 编写的项目。

假设项目有 3 个模块

1.  用户
    *   CRUD
    *   忘记密码
    *   登录
2.  预订
    *   CRUD
    *   搜索
3.  默认（基本上是供网络用户查看）
    *   主页
    *   关于我们

所有这些对于同一实体都有不同的业务逻辑。

我应该为此创建 3 个应用程序吗？如果 3 个不同的应用程序，那么表名都是不同的，因为它会自动为表名添加前缀。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:23:03.000

这个真的没有正确答案。一般来说，将任何编程任务分解为“模块”的方式在很大程度上取决于个人喜好。

我对这个主题的看法是从单个模块开始，只有在“必要”时才将其分解为更小的模块，例如当单个模块变得过大时。

对于应用程序，如果所有应用程序共享相同的数据库表，您可能会发现在单个应用程序中完成所有操作会更容易。我认为只有当您想在多个项目之间共享同一个应用程序时才真正需要使用多个 Django 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:39:52.053

我同意@aya 的回答，并且我也支持您的多个模块的结构。在我的项目中，我创建了 18 个应用程序。每个应用程序执行不同的规则：

```
 1\. accounts 
      - login
      - forgot password
      - register
      - profile
 2\. common
      //in here all the common function use by different apps
 3\. front
      - home
      - testimonial
 4\. guides
      //tutorials 
```

还有更多的应用程序...

我这样安排，以便于跟踪、调试和查找代码。如果您的问题是表的名称，您可以设置`class Meta of db_table`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:22:34.683

我自己对 Django 和 Python 也比较陌生。在实践中，试着让你的 Django 应用程序做一件事并且把它做好。如果您发现应用程序变得越来越复杂，则可能值得将其拆分为多个应用程序。

我不会担心数据库表名，因为 Django 会为您处理数据库交互。如果你给你的应用程序和模型命名得当，你的代码应该是相当自我记录的。

我最近从电子书[2 Scoops of Django](https://django.2scoops.org/)中学到了很多关于如何设置和布局 Django 项目的“最佳实践” 。我与他们没有任何关系，但我从中学到了很多。

此外，如果您还没有，请[务必阅读 Django 教程。](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)

希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:40:40.197

专注于使您的应用程序可重用。这样，您将在下一个项目中节省大量时间。关于它的好文章可以在[Django 的网站上找到](https://docs.djangoproject.com/en/dev/intro/reusable-apps/)。

如果您有紧密集成的模块或相互依赖，那么将它们放在单独的应用程序中并没有真正的好处，因为您永远不会单独使用它们。组织在单独的 Python 模块中就可以了。

在考虑项目组织时，也不要考虑“我的表将如何命名”。表格可以很容易地重命名，而糟糕的设计会给你带来麻烦，因为项目会增长。

# css - 表格单元格 div 的透明度

> ID：15951038
> 
> 赞同：0
> 
> 时间：2013-04-11T14:11:39.113
> 
> 标签：css, internet-explorer

我的标记如下。元素的`background`属性设置为，具有一定的透明度。在 IE9 中，透明度似乎不起作用。如果我删除from样式，那么透明度会起作用，但单元格不再是 100% 高。这仅在 IE 中。它适用于 Chrome。没试过FF。`#template``rgba``display: table-cell``#template`

我正在寻求帮助，弄清楚为什么会发生这种情况以及如何解决它。

我知道如果我删除`display: table-...`样式，它会起作用，但是我的布局需要这些样式。除了 for `display: table-cell`，`#template`我最初没有，但发现没有它，IE9 不会让它 100% 高。我需要它是 100% 高。

[http://jsfiddle.net/d6nUN/](http://jsfiddle.net/d6nUN/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body {
        height: 100%;
      }
      #container {
        display: table;
        height: 100%;
        width: 100%;
      }
      #container #content {
        background-color: #ff6622;
        display: table-row;
        height: 100%;
      }
      #template {
        background: rgba(255, 255, 255, 0.3);
        display: table-cell;
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div id="content">
        <div id="template">text</div>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:24:00.497

尝试以`#template`这种方式拉伸：

```
#template {
    ...
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
} 
```

[http://jsfiddle.net/pfUe7/2/](http://jsfiddle.net/pfUe7/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:29:07.103

我做了一些研究，看到了以下内容：

[rgba 背景与 IE 过滤器替代：IE9 呈现两者！](https://stackoverflow.com/questions/6506085/rgba-background-with-ie-filter-alternative-ie9-renders-both)

`#template`在您的规则集中尝试以下声明：

```
 filter: progid:DXImageTransform.Microsoft.alpha(30); 
```

您可能必须使此 CSS 规则特定于 IE9，但至少您可以使用`table-cell`.

参考：http: [//msdn.microsoft.com/en-us/library/ms532910%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532910%28v=vs.85%29.aspx)

# jquery - 只播放一次声音 Jquery

> ID：15951041
> 
> 赞同：1
> 
> 时间：2013-04-11T14:11:40.930
> 
> 标签：jquery, audio, hover, playback

我正在尝试实现这样的目标，将鼠标悬停在图像上时，会播放声音，并且我希望声音只播放一次，这意味着在初始悬停后，随后的悬停将不再触发声音播放，目前我正在尝试这段代码，但它不起作用

```
$(document).ready(function(){

$("#bg")[0].play();

var pring = 0;

$(function(){
$('#apDiv5').hover(
 function(){$("#phone")[0].play();},
 function(){$("#phone")[0].stop();
 pring++;
 if (pring > 1) {function(){$("#phone")[0].stop();}
 }});

});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:13:13.210

```
$('#apDiv5').one('hover', function() { 
```

This will make your hover event occur only once.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:25:12.900

尝试这个。[http://jsfiddle.net/WAeQU/](http://jsfiddle.net/WAeQU/) 使用 jQuery`off`如果小提琴不起作用，它至少应该让你上路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:22:47.063

您始终可以向播放音频的元素添加一个特殊的类并测试它是否已经具有该类：

`**[LIVE DEMO](http://jsbin.com/ifafip/3/edit)**`

```
$(function(){

   function playOnHover(el, audioFile){      
      $(el).addClass('played');
      var sound = new Audio( audioFile );   
      sound.play();      
   }

   $('#apDiv5').on('mouseenter', function(){
      if(!$(this).hasClass('played')) playOnHover( this, "sound.ogg" );
   });

}); 
```

# c# - Windows Phone 7：mp3 流媒体延迟

> ID：15951042
> 
> 赞同：1
> 
> 时间：2013-04-11T14:11:47.477
> 
> 标签：c#, streaming, mp3, windows-phone

我在 windows phone 7 (nokia lumia 800) 上播放音频时遇到问题：

该应用程序是windows phone 7.1，我在诺基亚lumia 800（WP7.8）和lumia 820（WP8.0）上试过

我将 URL ( [http://abc.radiostreaming.dk/](http://abc.radiostreaming.dk/) ) 放入我的播放列表：

```
AudioTrack track = new AudioTrack(this.streamURI, "FOO", "BAR", "", null);
BackgroundAudioPlayer.Instance.Track = track; 
```

我使用不同的事件处理程序订阅了 BackgroundAudioPlayer.Instance.PlayStateChanged 以更改 UI（在“播放”和“停止”之间来回更改按钮，并更新“正在播放”-文本字段）

当我按下播放时，UI 会通过事件处理程序更新以显示“缓冲”图标，然后在 BackgroundAudioPlayer.Instance.PlayerState 更改为 PlayState.Playing 时再次将其更改为“正在播放”。

在诺基亚 lumia 820 UI 上，声音按预期工作，在 lumia 800 BackgroundAudioPlayer.Instance.PlayStateChanged 上触发（更改为“正在播放”）并且耳机中有一个微弱的滴答声，但在出现之前有 5-6 秒的延迟音乐开始播放。

延迟当然很烦人（声音在 820 上几乎立即播放），但如果我能检测到它并相应地更新 UI，这是可以接受的，现在只使用

```
BackgroundAudioPlayer.Instance.PlayStateChanged. 
```

关于我可以订阅的其他事件的任何想法，或者调整声音开始播放速度的方法（也许调整缓冲？到目前为止还没有运气......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:36:37.803

我做了一个解决方法：当我得到

```
BackgroundAudioPlayer.Instance.PlayStateChanged -> PlayState.Playing 
```

我检查BackgroundAudioPlayer.Instance.Position.Milliseconds，如果它为0，则流并没有真正播放，所以我只是每100ms重新检查一次，然后只在BackgroundAudioPlayer.Instance.Position.Milliseconds时将UI从“缓冲”更改为“正在播放” > 0

它解决了问题，但比你想要的更混乱，哦，好吧:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:17:57.567

首先，排除与服务器的连接问题。两个设备是否在同一个 WiFi 连接上？[如果是这样，请尝试来自WAUG](http://waug.fm)的这个流 URL ，我已经设置了一个大的初始缓冲区刷新：

```
http://143.226.75.100/waug_mp3_128k 
```

一些设备和软件尝试开始解码，但很快意识到它们没有足够的数据。一些解码器需要比其他解码器更多的数据。有没有办法在播放之前增加缓冲区大小？如果没有，您可能必须自己管理此缓冲区并选择更大的大小。

# string - 如何从文本文件中传递和选择字符串？

> ID：15951043
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:11:47.557
> 
> 标签：string, text, command-line

我想在文本文件中搜索以“double”开头的字符串并将行号传递给两个变量（假设我知道必须有两行具有“double”）。接下来，我想获取这些字符串中的数字并将它们传递给其他两个变量。之后，我想删除文本中的那些行。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:36:11.990

为了将行号存储在 2 个变量中，请`var1`尝试`var2`以下操作：

```
read var1 var2 <<< $(grep -Fnm 2 double file | cut -d: -f1) 
```

现在`var1`并`var2`包含包含单词的行的行号`double`。

要将它们“传递”给其他两个变量：

```
foo="$var1"
bar="$var2" 
```

要删除行，请使用`sed`如下所示：

```
sed "${var1}d;${var2}d;" file 
```

# c++ - 并行化 for 循环不会带来性能提升

> ID：15951044
> 
> 赞同：16
> 
> 时间：2013-04-11T14:11:49.427
> 
> 标签：c++, winapi, tbb, ppl, parallel-for

我有一个将拜耳图像通道转换为 RGB 的算法。在我的实现中，我有一个嵌套`for`循环，它遍历拜耳通道，从拜耳索引计算 rgb 索引，然后从拜耳通道设置该像素的值。这里要注意的主要事情是每个像素都可以独立于其他像素进行计算（不依赖于先前的计算），因此该算法是并行化的自然候选者。然而，计算确实依赖于所有线程将同时访问但不会改变的一些预设数组。

但是，当我尝试将主要`for`与 MS并行化时`cuncurrency::parallel_for`，性能并没有得到任何提升。事实上，对于在 4 核 CPU 上运行的大小为 3264X2540 的输入，非并行版本的运行时间约为 34 毫秒，并行版本的运行时间约为 69 毫秒（平均超过 10 次运行）。我确认该操作确实是并行化的（为该任务创建了 3 个新线程）。

使用英特尔的编译器`tbb::parallel_for`给出了接近准确的结果。作为比较，我从实现的算法开始，`C#`其中我还使用了`parallel_for`循环，在那里我遇到了接近 X4 的性能提升（我选择了这个算法，`C++`因为`C++`即使使用单核，这个特定任务也更快）。

有什么想法阻止我的代码很好地并行化吗？

我的代码：

```
template<typename T>
void static ConvertBayerToRgbImageAsIs(T* BayerChannel, T* RgbChannel, int Width, int Height, ColorSpace ColorSpace)
{
        //Translates index offset in Bayer image to channel offset in RGB image
        int offsets[4];
        //calculate offsets according to color space
        switch (ColorSpace)
        {
        case ColorSpace::BGGR:
            offsets[0] = 2;
            offsets[1] = 1;
            offsets[2] = 1;
            offsets[3] = 0;
            break;
        ...other color spaces
        }
        memset(RgbChannel, 0, Width * Height * 3 * sizeof(T));
        parallel_for(0, Height, [&] (int row)
        {
            for (auto col = 0, bayerIndex = row * Width; col < Width; col++, bayerIndex++)
            {
                auto offset = (row%2)*2 + (col%2); //0...3
                auto rgbIndex = bayerIndex * 3 + offsets[offset];
                RgbChannel[rgbIndex] = BayerChannel[bayerIndex];
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T18:08:55.577

首先，您的**算法是 memory bandwidth bounded**。也就是说，内存加载/存储将超过您所做的任何索引计算。

`SSE`/之类的向量运算`AVX`也无济于事-您没有进行任何密集计算。

增加每次迭代的工作量也是没有用的——两者`PPL`都`TBB`足够聪明，不会在每次迭代中创建线程，他们会使用一些好的分区，这会额外尝试保持局部性。例如，这里引用自[`TBB::parallel_for`](http://threadingbuildingblocks.org/docs/help/reference/algorithms/parallel_for_func.htm)：

> 当工作线程可用时，`parallel_for`执行迭代是不确定的顺序。不要依赖任何特定的执行顺序来确保正确性。但是，为了提高效率，**确实期望 parallel_for 倾向于对 values 的连续运行进行操作**。

真正重要的是减少内存操作。对输入或输出缓冲区的任何多余遍历都会影响性能，因此您应该尝试删除您的`memset`或并行执行。

您正在完全遍历输入和输出数据。即使您在输出中跳过某些内容 - 这并不重要，因为现代硬件上的内存操作是通过 64 字节块进行的。因此，计算`size`您的输入和输出、`time`算法度量、划分`size`/`time`比较结果与系统的最大特征（例如，用[benchmark](http://www.sisoftware.co.uk/)度量）。

我对 和 进行了测试，`Microsoft PPL`结果是（我使用了你身高的 8 倍）：`OpenMP``Native for`

```
Native_For       0.21 s
OpenMP_For       0.15 s
Intel_TBB_For    0.15 s
MS_PPL_For       0.15 s 
```

如果删除`memset`则：

```
Native_For       0.15 s
OpenMP_For       0.09 s
Intel_TBB_For    0.09 s
MS_PPL_For       0.09 s 
```

如您所见`memset`（高度优化的）对大量执行时间负责，这表明您的算法是如何受内存限制的。

[**完整的源代码**](http://ideone.com/PU8mMb)：

```
#include <boost/exception/detail/type_info.hpp>
#include <boost/mpl/for_each.hpp>
#include <boost/mpl/vector.hpp>
#include <boost/progress.hpp>
#include <tbb/tbb.h>
#include <iostream>
#include <ostream>
#include <vector>
#include <string>
#include <omp.h>
#include <ppl.h>

using namespace boost;
using namespace std;

const auto Width = 3264;
const auto Height = 2540*8;

struct MS_PPL_For
{
    template<typename F,typename Index>
    void operator()(Index first,Index last,F f) const
    {
        concurrency::parallel_for(first,last,f);
    }
};

struct Intel_TBB_For
{
    template<typename F,typename Index>
    void operator()(Index first,Index last,F f) const
    {
        tbb::parallel_for(first,last,f);
    }
};

struct Native_For
{
    template<typename F,typename Index>
    void operator()(Index first,Index last,F f) const
    {
        for(; first!=last; ++first) f(first);
    }
};

struct OpenMP_For
{
    template<typename F,typename Index>
    void operator()(Index first,Index last,F f) const
    {
        #pragma omp parallel for
        for(auto i=first; i<last; ++i) f(i);
    }
};

template<typename T>
struct ConvertBayerToRgbImageAsIs
{
    const T* BayerChannel;
    T* RgbChannel;
    template<typename For>
    void operator()(For for_)
    {
        cout << type_name<For>() << "\t";
        progress_timer t;
        int offsets[] = {2,1,1,0};
        //memset(RgbChannel, 0, Width * Height * 3 * sizeof(T));
        for_(0, Height, [&] (int row)
        {
            for (auto col = 0, bayerIndex = row * Width; col < Width; col++, bayerIndex++)
            {
                auto offset = (row % 2)*2 + (col % 2); //0...3
                auto rgbIndex = bayerIndex * 3 + offsets[offset];
                RgbChannel[rgbIndex] = BayerChannel[bayerIndex];
            }
        });
    }
};

int main()
{
    vector<float> bayer(Width*Height);
    vector<float> rgb(Width*Height*3);
    ConvertBayerToRgbImageAsIs<float> work = {&bayer[0],&rgb[0]};
    for(auto i=0;i!=4;++i)
    {
        mpl::for_each<mpl::vector<Native_For, OpenMP_For,Intel_TBB_For,MS_PPL_For>>(work);
        cout << string(16,'_') << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T08:42:10.637

## 同步开销

我猜想**循环的每次迭代完成的工作量太小了**。如果您将图像分成四部分并并行运行计算，您会注意到很大的增益。**尝试以减少迭代次数和每次迭代更多工作的方式设计循环**。这背后的原因是同步完成了太多。

## 缓存使用

一个重要的因素可能是数据如何拆分（分区）以进行处理。**如果处理的行在**下面的坏情况下被分开，那么**更多的行将导致缓存未命中**。每增加一个线程，这种效果就会变得更加重要，因为行之间的距离会更大。如果您确定并行化功能执行合理的分区，那么手动工作拆分不会给出任何结果

```
 bad       good
****** t1 ****** t1
****** t2 ****** t1
****** t1 ****** t1
****** t2 ****** t1
****** t1 ****** t2
****** t2 ****** t2
****** t1 ****** t2
****** t2 ****** t2 
```

还要确保您**以相同的对齐方式访问您的数据**；每次调用`offset[]`和都可能`BayerChannel[]`是缓存未命中。您的算法非常占用内存。几乎所有操作都是访问内存段或写入内存段。防止缓存未命中和最小化内存访问至关重要。

## 代码优化

下面显示的优化可能由编译器完成，可能不会给出更好的结果。值得知道他们可以做到。

```
 // is the memset really necessary?
    //memset(RgbChannel, 0, Width * Height * 3 * sizeof(T));
    parallel_for(0, Height, [&] (int row)
    {
        int rowMod = (row & 1) << 1;
        for (auto col = 0, bayerIndex = row * Width, tripleBayerIndex=row*Width*3; col < Width; col+=2, bayerIndex+=2, tripleBayerIndex+=6)
        {
            auto rgbIndex = tripleBayerIndex + offsets[rowMod];
            RgbChannel[rgbIndex] = BayerChannel[bayerIndex];

            //unrolled the loop to save col & 1 operation
            rgbIndex = tripleBayerIndex + 3 + offsets[rowMod+1];
            RgbChannel[rgbIndex] = BayerChannel[bayerIndex+1];
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T09:10:59.370

我的建议来了：

1.  并行计算更大的块
2.  摆脱模/乘法
3.  展开内部循环以计算一个完整像素（简化代码）

    ```
    template<typename T> void static ConvertBayerToRgbImageAsIsNew(T* BayerChannel, T* RgbChannel, int Width, int Height)
    {
        // convert BGGR->RGB
        // have as many threads as the hardware concurrency is
        parallel_for(0, Height, static_cast<int>(Height/(thread::hardware_concurrency())), [&] (int stride)
        {
            for (auto row = stride; row<2*stride; row++)
            {
                for (auto col = row*Width, rgbCol =row*Width; col < row*Width+Width; rgbCol +=3, col+=4)
                {
                    RgbChannel[rgbCol+0]  = BayerChannel[col+3];
                    RgbChannel[rgbCol+1]  = BayerChannel[col+1];
                    // RgbChannel[rgbCol+1] += BayerChannel[col+2]; // this line might be left out if g is used unadjusted
                    RgbChannel[rgbCol+2]  = BayerChannel[col+0];
                }
            }
        });
    } 
    ```

这段代码比原始版本快 60%，但仍然只有笔记本电脑上非并行版本的一半。正如其他人已经指出的那样，这似乎是由于算法的内存有界性。

编辑：但我对此并不满意。`parallel_for`从到时，我可以大大提高并行性能`std::async`：

```
int hc = thread::hardware_concurrency();
future<void>* res = new future<void>[hc];
for (int i = 0; i<hc; ++i)
{
    res[i] = async(Converter<char>(bayerChannel, rgbChannel, rows, cols, rows/hc*i, rows/hc*(i+1)));
}
for (int i = 0; i<hc; ++i)
{
    res[i].wait();
}
delete [] res; 
```

转换器是一个简单的类：

```
template <class T> class Converter
{
public:
Converter(T* BayerChannel, T* RgbChannel, int Width, int Height, int startRow, int endRow) : 
    BayerChannel(BayerChannel), RgbChannel(RgbChannel), Width(Width), Height(Height), startRow(startRow), endRow(endRow)
{
}
void operator()()
{
    // convert BGGR->RGB
    for(int row = startRow; row < endRow; row++)
    {
        for (auto col = row*Width, rgbCol =row*Width; col < row*Width+Width; rgbCol +=3, col+=4)
        {
            RgbChannel[rgbCol+0]  = BayerChannel[col+3];
            RgbChannel[rgbCol+1]  = BayerChannel[col+1];
            // RgbChannel[rgbCol+1] += BayerChannel[col+2]; // this line might be left out if g is used unadjusted
            RgbChannel[rgbCol+2]  = BayerChannel[col+0];
        }
    };
}
private:
T* BayerChannel;
T* RgbChannel;
int Width;
int Height;
int startRow;
int endRow;
}; 
```

这现在比非并行版本快 3.5 倍。从我目前在分析器中看到的情况来看，我假设 parallel_for 的工作窃取方法会导致大量等待和同步开销。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T13:05:43.653

我没有使用 tbb::parallel_for 而不是 cuncurrency::parallel_for，但如果你的数字是正确的，它们似乎会带来太多的开销。但是，我强烈建议您在测试时运行 10 次以上的迭代，并确保在计时之前进行尽可能多的热身迭代。

我使用三种不同的方法准确地测试了你的代码，平均超过 1000 次尝试。

```
Serial:      14.6 += 1.0  ms
std::async:  13.6 += 1.6  ms
workers:     11.8 += 1.2  ms 
```

首先是串行计算。第二个是使用四个对 std::async 的调用来完成的。最后一个是通过将四个作业发送到四个已经启动（但正在休眠）的后台线程来完成的。

收益不大，但至少是收益。我在 2012 MacBook Pro 上进行了测试，双超线程内核 = 4 个逻辑内核。

作为参考，这是我的 std::async 并行：

```
template<typename Int=int, class Fun>
void std_par_for(Int beg, Int end, const Fun& fun)
{
    auto N = std::thread::hardware_concurrency();
    std::vector<std::future<void>> futures;

    for (Int ti=0; ti<N; ++ti) {
        Int b = ti * (end - beg) / N;
        Int e = (ti+1) * (end - beg) / N;
        if (ti == N-1) { e = end; }

        futures.emplace_back( std::async([&,b,e]() {
            for (Int ix=b; ix<e; ++ix) {
                fun( ix );
            }
        }));
    }

    for (auto&& f : futures) {
        f.wait();
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-21T12:52:23.323

**要检查或要做的事情**

*   您使用的是 Core 2 或更旧的处理器吗？他们有一个非常**狭窄的内存总线**，很容易用这样的代码饱和。相比之下，4 通道 Sandy Bridge-E 处理器*需要*多个线程来使内存总线饱和（单个内存绑定线程不可能使其完全饱和）。
*   你填充了所有的**记忆通道**吗？例如，如果您有一个双通道 CPU，但只安装了一个 RAM 卡或两个在同一通道上，您将获得一半的可用带宽。
*   你如何**计时**你的代码？
    *   应该像 Evgeny Panasyuk 建议的那样在应用程序内部完成计时。
    *   您应该在同一个应用程序中进行多次运行。否则，您可能正在计时一次性启动代码以启动线程池等。
*   **`memset`**正如其他人所解释的那样，删除多余的 。
*   正如 ogni42 和其他人所建议的那样，**展开**你的内部循环（我没有费心检查该解决方案的正确性，但如果它是错误的，你应该能够修复它）。这与并行化的主要问题是正交的，但无论如何这是一个好主意。
*   在进行性能测试时，请确保您的机器**处于空闲状态。**

**额外的时间**

我已将 Evgeny Panasyuk 和 ogni42 的建议合并到一个简单的 C++03 Win32 实现中：

```
#include "stdafx.h"

#include <omp.h>
#include <vector>
#include <iostream>
#include <stdio.h>

using namespace std;

const int Width = 3264;
const int Height = 2540*8;

class Timer {
private:
    string name;
    LARGE_INTEGER start;
    LARGE_INTEGER stop;
    LARGE_INTEGER frequency;
public:
    Timer(const char *name) : name(name) {
        QueryPerformanceFrequency(&frequency);
        QueryPerformanceCounter(&start);
    }

    ~Timer() {
        QueryPerformanceCounter(&stop);
        LARGE_INTEGER time;
        time.QuadPart = stop.QuadPart - start.QuadPart;
        double elapsed = ((double)time.QuadPart /(double)frequency.QuadPart);
        printf("%-20s : %5.2f\n", name.c_str(), elapsed);
    }
};

static const int offsets[] = {2,1,1,0};

template <typename T>
void Inner_Orig(const T* BayerChannel, T* RgbChannel, int row)
{
    for (int col = 0, bayerIndex = row * Width;
         col < Width; col++, bayerIndex++)
    {
        int offset = (row % 2)*2 + (col % 2); //0...3
        int rgbIndex = bayerIndex * 3 + offsets[offset];
        RgbChannel[rgbIndex] = BayerChannel[bayerIndex];
    }
}

// adapted from ogni42's answer
template <typename T>
void Inner_Unrolled(const T* BayerChannel, T* RgbChannel, int row)
{
    for (int col = row*Width, rgbCol =row*Width;
         col < row*Width+Width; rgbCol +=3, col+=4)
    {
        RgbChannel[rgbCol+0]  = BayerChannel[col+3];
        RgbChannel[rgbCol+1]  = BayerChannel[col+1];
        // RgbChannel[rgbCol+1] += BayerChannel[col+2]; // this line might be left out if g is used unadjusted
        RgbChannel[rgbCol+2]  = BayerChannel[col+0];
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    vector<float> bayer(Width*Height);
    vector<float> rgb(Width*Height*3);
    for(int i = 0; i < 4; ++i)
    {
        {
            Timer t("serial_orig");
            for(int row = 0; row < Height; ++row) {
                Inner_Orig<float>(&bayer[0], &rgb[0], row);
            }
        }
        {
            Timer t("omp_dynamic_orig");
            #pragma omp parallel for
            for(int row = 0; row < Height; ++row) {
                Inner_Orig<float>(&bayer[0], &rgb[0], row);
            }
        }
        {
            Timer t("omp_static_orig");
            #pragma omp parallel for schedule(static)
            for(int row = 0; row < Height; ++row) {
                Inner_Orig<float>(&bayer[0], &rgb[0], row);
            }
        }

        {
            Timer t("serial_unrolled");
            for(int row = 0; row < Height; ++row) {
                Inner_Unrolled<float>(&bayer[0], &rgb[0], row);
            }
        }
        {
            Timer t("omp_dynamic_unrolled");
            #pragma omp parallel for
            for(int row = 0; row < Height; ++row) {
                Inner_Unrolled<float>(&bayer[0], &rgb[0], row);
            }
        }
        {
            Timer t("omp_static_unrolled");
            #pragma omp parallel for schedule(static)
            for(int row = 0; row < Height; ++row) {
                Inner_Unrolled<float>(&bayer[0], &rgb[0], row);
            }
        }
        printf("-----------------------------\n");
    }
    return 0;
} 
```

以下是我在三通道 8 路超线程 Core i7-950 机器上看到的时序：

```
serial_orig          :  0.13
omp_dynamic_orig     :  0.10
omp_static_orig      :  0.10
serial_unrolled      :  0.06
omp_dynamic_unrolled :  0.04
omp_static_unrolled  :  0.04 
```

“静态”版本告诉编译器在循环入口处平均分配线程之间的工作。这避免了尝试进行工作窃取或其他动态负载平衡的开销。对于这个代码片段，它似乎没有什么不同，即使工作负载在线程之间是非常统一的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T11:02:23.850

可能会发生性能下降，因为您试图在“行”数量的内核上分配 for 循环，这将不可用，因此它再次变得像具有并行开销的顺序执行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T11:23:05.387

对并行 for 循环不太熟悉，但在我看来，争用在于内存访问。看来您的线程正在重叠访问相同的页面。

你能把你的数组访问分成与页面边界有点对齐的 4k 块吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-15T16:09:25.873

在没有为串行代码优化 for 循环之前谈论并行性能是没有意义的。这是我的尝试（一些好的编译器可能能够获得类似的优化版本，但我宁愿不依赖它）

```
 parallel_for(0, Height, [=] (int row) noexcept
    {
        for (auto col=0, bayerindex=row*Width,
                  rgb0=3*bayerindex+offset[(row%2)*2],
                  rgb1=3*bayerindex+offset[(row%2)*2+1];
             col < Width; col+=2, bayerindex+=2, rgb0+=6, rgb1+=6 )
        {
            RgbChannel[rgb0] = BayerChannel[bayerindex  ];
            RgbChannel[rgb1] = BayerChannel[bayerindex+1];
        }
    }); 
```

# javascript - Dojo/connect "onKeyPress" ENTER event works locally but not on test server

> ID：15951046
> 
> 赞同：0
> 
> 时间：2013-04-11T14:12:05.077
> 
> 标签：javascript, dojo, keyevent, dojox.grid, dijit.form

My onKeyPress ENTER key event works when deployed (in IE) on my localhost but does not work (in IE) when deployed on the test server. On the test server the ENTER event works in FireFox and also Chrome, just not in IE on the test server (but IE on the localhost it works)

```
 <script type="dojo/connect" event="onKeyPress" args="evt">
            // append a ENTER key press event handler to combobox to allow quick submit
             var key = evt.charOrCode;
             if (key == dojo.keys.ENTER) {
                if (!submitSearch(false)) {
                    dojo.stopEvent(evt);
                }
             }
        </script> 
```

Can anyone offer insight as to why would this be?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:23:35.197

I think you're using the wrong event. Try using the `"onKeyDown"` event.

The **keypress** event should only be used when the pressed key also results in a character, such as the letters A-Z and so on (in a textbox for example).

I don't think the Enter-key (in this example) should trigger it, so that's why it might be worth trying to use the **keydown** event. Because that event will fire independently of the type of key that was pressed.

For some reasons IE considered the "Enter" key on your first machine as a visible character while on the second machine it didn't (could have to do with different versions), but anyways, I think the **keydown** event would be better.

You can read more about events (and browser support) [here](http://www.quirksmode.org/dom/events/index.html#t010).

# matlab - MATLAB: Making a video using writeVideo

> ID：15951048
> 
> 赞同：3
> 
> 时间：2013-04-11T14:12:09.213
> 
> 标签：matlab, matlab-guide

I am currently trying to make a video using the writeVideo function in MATLAB. I have made a GUI using GUIDE which includes a slider, a few checkboxs, and a single axes (tagged as axes1). When I move the slider, the axes will plot certain shapes that change according to the slider value.

What I am trying to do is record a video of the GUI being used to show the functionality in a presentation. However, when I play back the video (after making it using writeVideo), it shows the slider value moving and the checkboxes being checked correctly, but the plot never changes (i.e. it will only show the original shape). This seems to be some refresh error, however, anything I have tried has not worked (refresh, drawnow, etc.)

Any idea why this is happening? The following is the code I am trying to implement:

```
vidObj = VideoWriter('test.avi','Motion JPEG AVI');
open(vidObj);
flag = 0;
if flag<12 %movie will be 12 frames long
    flag = flag+1;
    if slider<1  
        plot something...
    elseif slider>=1 && slider<2
        plot something else...
    etc...
    elseif slider<=5
        plot something else...
    end

    hFigure = findobj('Name','gui');
    currFrame = getframe(hFigure);
    writeVideo(vidObj,currFrame);

    clear hfigure currFrame image;
else
    fprintf('done\n')
    close(vidObj);   
end 
```

As stated, I can then use implay to play back the test.avi file, however, the plot never updates.

Thanks in advance

Note: I am using MATLAB R2012b

EDIT:

The following is how I ended up creating my video: maybe this will help someone who was facing similar issues to the one stated above.

I basically gave up on using getframe and decided to 1) get screenshots, then 2) turn the screenshots into a movie. To get the screenshots, I first ran my program then, in the command window, invoked the following code using the java toolkit

```
i = 1;
while true
    robo = java.awt.Robot;
    t = java.awt.Toolkit.getDefaultToolkit();

    %# Set screen size
    rectangle = java.awt.Rectangle(0,0,1000,640);

    %# Get the capture
    image = robo.createScreenCapture(rectangle);

    %# Save it to file
    filehandle = java.io.File(sprintf('capture%d.jpg', i));
    javax.imageio.ImageIO.write(image,'jpg',filehandle);

    pause(.4) %# Wait for 0.4 seconds
    i = i + 1;
end 
```

This then continually ran in the background and took snap shots of the screen and stored them into the current directory. to stop it from running, just use Ctrl C. Once I had the screen shots, I used the following code to create the movie:

```
vidObj = VideoWriter('test.avi','Motion JPEG AVI');
open(vidObj);
for i=7:87 %these are the frames I wanted in my movie
    x = num2str(i);
    im = horzcat('capture',x);
    im1 = horzcat(im,'.jpg')
    imdata = imread(im1);
    writeVideo(vidObj,imdata);
end
close(vidObj); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:28:43.907

getframe 有时会出现问题。我不确定我能给出答案，而且由于我的声誉，我不能简单地发表评论，但这个[链接](https://stackoverflow.com/questions/13719138/in-matlab-writing-images-to-avi-without-displaying-using-videowriter/15184319#15184319) 可能会有所帮助。从 GUI 中获取图形后，将其转换为图像，然后再转换为框架。值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T22:12:00.847

如果您将显示器设置更改为 16 位颜色，它将解决您遇到的问题。这已记录在提供的链接上。我之前的答案已被删除，因为我只提供了链接并告诉您如何解决问题（对不起），但是如果您实际单击链接并查看他们所说的内容或将显示器设置更改为 16 位颜色，一切都会正常工作。从链接中您可以看到人们自 2009 年以来就遇到了这个问题，但它在 2013 年 4 月进行了更新，所以它仍然是一个问题，将显示器设置更改为 16 位颜色仍然是一个解决方案。

希望这可以帮助！

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/257389](http://www.mathworks.com/matlabcentral/newsreader/view_thread/257389)

# ios - 如何使用 NSMutableString 将字符串填充到固定宽度？

> ID：15951049
> 
> 赞同：1
> 
> 时间：2013-04-11T14:12:15.350
> 
> 标签：ios, objective-c, nsmutablestring

我正在尝试将字符串写入文本文件。然后该文本文件将被另一个程序读取。第二个程序期望文本文件中的不同“字段”是固定宽度。因此，当我使用我的应用程序编写文本文件时，我需要在我的实际数据之间添加空格以使所有内容正确排列。如何添加这些空间？

* * *

到目前为止，我已经尝试编写一个将源字符串和目标长度作为输入的函数。如果目标比源长，它只是附加“”。此例程的代码如下：

```
- (NSString *) makeStringFrom:(NSString *)source withLength:(NSInteger)length
{
    // Method to add spaces to the end of a string to get it to a certain length
    if ([source length] > length)
    {
        // String is too long - throw warning and send it back
        NSLog(@"Warning - string is already longer than length supplied.  Returning source string");
        return source;
    }
    else if ([source length] == length)
    {
        // String is already correct length, so just send it back
        return source;
    }
    else
    {
        // String is too short, need to add spaces
        NSMutableString *newString = [[NSMutableString alloc] initWithString:source];
        NSLog(@"newString initial length = %d",[newString length]);
        for (int current = [source length]; current < length; current ++)
        {
            [newString stringByAppendingString:@" "];
            NSLog(@"hit");
        }

        NSLog(@"target length = %d.  newString length = %d",length,[newString length]);
        return newString;
    }
} 
```

这显然行不通。即使在 NSLog(@"hit"); 运行多次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:21:41.487

有一种[`stringByPaddingToLength:withString:startingAtIndex:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByPaddingToLength%3awithString%3astartingAtIndex%3a)方法`NSString`可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:19:04.537

你想改变：

```
[newString stringByAppendingString:@" "]; 
```

进入：

```
newString = [newString stringByAppendingString:@" "]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:18:13.927

你在这里犯了一个愚蠢的错误

```
 [newString stringByAppendingString:@" "]; 
```

这**将返回一个新字符串，并且不会影响调用者对象**。你需要存储它

```
newString=[newString stringByAppendingString:@" "]; 
```

或者干脆

```
[newString appendString:@" "]; 
```

# php - 这是使用openId的方式吗？

> ID：15951054
> 
> 赞同：0
> 
> 时间：2013-04-11T14:12:24.813
> 
> 标签：php, openid, lightopenid

我不想编写自己的登录函数，所以我想使用 openId。我找到了库 lightopenid 并对 google-example 文件进行了一些修改，它看起来像这样：

```
<?php
session_start();
# Logging in with Google accounts requires setting special identity, so this example shows how to do it.
require 'openid.php';
try {
    # Change 'localhost' to your domain name.
    $openid = new LightOpenID('127.0.0.1');
    if(!$openid->mode) {
        if(isset($_GET['login'])) {
            $openid->identity = 'https://www.google.com/accounts/o8/id';
            header('Location: ' . $openid->authUrl());
        }
?>
<form action="?login" method="post">
    <button>Login with Google</button>
</form>
<?php
    } elseif($openid->mode == 'cancel') {
        echo 'User has canceled authentication!';
    } else {
        echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.';
        if ($openid->validate()) {
            $_SESSION['auth'] = true;
        }
    }
} catch(ErrorException $e) {
    echo $e->getMessage();
} 
```

所以我在那里添加了一个 $_SESSION 东西......现在想我可以在每个受保护页面的顶部使用一些代码，如下所示：

```
<?php session_start(); 
if (!$_SESSION['auth']) { exit; } ?> 
```

我希望以正确的方式完成此操作，以便一切安全等等。你会这样做还是我做错了什么？我可能会使用 cookie 来代替...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:00:02.313

我没有尝试过您的代码，但如果它基于[捆绑的 Google 示例](http://gitorious.org/lightopenid/lightopenid/blobs/master/example-google.php)，它应该没问题。当然，使用此代码，您的网站不会向任何 OpenID 所有者开放，只对 Google 用户开放。

但是，正如您已经注意到的，LightOpenID 只负责身份验证过程，因此您的应用程序需要收集和存储它所需的身份验证详细信息，因为在每个页面请求上再次进行身份验证会很痛苦。最重要的是身份。身份是一个 URL，它是“登录”或“用户名”的 OpenID 等价物。正如[“Configuracion”wiki 页面](http://code.google.com/p/lightopenid/wiki/Configuration)`$openid->identity`所解释的那样，您需要在成功验证*后*立即获取它，届时它将更改`https://www.google.com/accounts/o8/id`为 Google 分配给用户的任何唯一 URL。您可能想知道它：

*   您可以为不同的用户分配不同的权限。
*   您可以跨不同会话识别用户。

现在，您应该如何存储身份？

*   使用 cookie 来确定用户是否经过身份验证是最糟糕的解决方案。您无需成为黑客即可破解它——所有现代浏览器都包含易于使用的 GUI 工具来编辑 cookie。

*   服务器端会话是行业标准。在我关于身份的评论之后，我至少会存储这个：

    ```
    $_SESSION['openid'] = $openid->identity; 
    ```

*   除了会话之外，如果您生成的用户数据需要跨会话持续存在，您还需要一个数据库。（这取决于您的需求。）

**编辑：**

由于请求过期，您无法验证两次。这是一种安全机制。如果您需要重用它，请将其存储到变量中：

```
$is_valid = $openid->validate();
echo 'User ' . ($is_valid ? $openid->identity . ' has ' : 'has not ') . 'logged in.';
if ($is_valid) {
    $_SESSION['auth'] = true;
} 
```

# google-drive-api - 有没有办法获得谷歌文档编辑时间？

> ID：15951055
> 
> 赞同：1
> 
> 时间：2013-04-11T14:12:24.953
> 
> 标签：google-drive-api, google-drive-realtime-api

我无法准确检测用户从 Google Drive 编辑文档所花费的时间（不是文档创建时间和上次修改的更改条目之间的差异）。我指的是 Microsoft Word 在总编辑时间中计算的内容。

![在此处输入图像描述](https://i.stack.imgur.com/SnUwP.png)

是否有解决方案可以帮助我使用 Google Drive API 进行计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:32:17.273

Google Drive SDK 目前不提供编辑时间，我想不出任何解决方法来确定它与现有功能。

# java - Android '\' special character

> ID：15951056
> 
> 赞同：0
> 
> 时间：2013-04-11T14:12:26.410
> 
> 标签：java, backslash

I have an android application where I have to find out if my user entered the special character '\' on a string. But i'm not obtaining success by using the string.replaceAll() method, because Java recognizes \ as the end of the string, instead of the " closing tag. Does anyone have suggestions of how can I fix this? Here is an example of how I tried to do this:

```
private void ReplaceSpecial(String text) {
     if (text.trim().length() > 0) {
    text = text.replaceAll("\", "%5C");
} 
```

It does not work because Java doesn't allow me. Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:13:15.637

Try this: You have to use escape character '\'

```
text = text.replaceAll("\\\\", "%5C"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:17:24.357

尝试

```
text = text.replaceAll("\\\\", "%5C"); 
```

`replaceAll`使用正则表达式语法 where`\`是特殊字符，因此您需要对其进行转义。为此，您需要传递`\\`给正则表达式引擎，但要创建表示正则表达式的字符串，`\\`您需要将其写为`"\\\\"`（`\`也是 String 中的特殊字符，每个都需要另一个转义`\`）

* * *

为了避免这种正则表达式混乱，您可以使用`replace`正在处理文字的

```
text = text.replace("\\", "%5C"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:13:08.433

`text = text.replaceAll("\", "%5C");`

Should be:

`text = text.replaceAll("\\\\", "%5C");`

**Why?**

Since the backward slash is an escape character. If you want to represent a real backslash, you should use double `\` (`\\`)

Now the first argument of [replaceAll](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) is a *regular expression*. So you need to escape this too! (Which will end up with 4 backslashes).

Alternatively you can use [replace](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28char,%20char%29) which *doesn't* expect a regex, so you can do:

`text = text.replace("\\", "%5C");`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T14:13:57.340

第一个参数 to`replaceAll`被解释为正则表达式，因此您实际上需要四个反斜杠：

```
text = text.replaceAll("\\\\", "%5C"); 
```

字符串文字中的四个反斜杠表示实际中的两个反斜杠`String`，这反过来表示匹配单个反斜杠字符的正则表达式。

或者，按照[Pshemo](https://stackoverflow.com/a/15951159/592139)的建议，使用`replace`而不是，它将其第一个参数视为文字字符串而不是正则表达式。`replaceAll`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T14:14:25.863

首先，由于“\”是 Java 中的转义字符，因此您需要使用两个反斜杠来获得一个反斜杠。其次，由于 replaceAll() 方法将正则表达式作为参数，因此您还需要转义该反斜杠。因此，您需要使用

```
text = text.replaceAll("\\\\", "%5C"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-13T11:57:34.057

我可能会迟到，但并非最不重要。

添加`\\\\`以下正则表达式以启用`\`.

**示例正则表达式：**

```
private val specialCharacters = "-@%\\[\\}+'!/#$^?:;,\\(\"\\)~`.*=&\\{>\\]<_\\\\"
private val PATTERN_SPECIAL_CHARACTER = "^(?=.*[$specialCharacters]).{1,20}$" 
```

希望能帮助到你。

# highslide - iframe 弹出窗口在 IE10 中未正确关闭

> ID：15951059
> 
> 赞同：0
> 
> 时间：2013-04-11T14:12:30.573
> 
> 标签：highslide

在 Microsoft 昨天（2013 年 4 月 10 日）推出的最新更新集之后，我们遇到了使用 iframe 和嵌入式 FlowPlayer 视频无法正确/完全关闭的 highslide 弹出窗口的问题。弹出窗口部分关闭并留下一个框，视频仍在后台播放。

弹出窗口在其他浏览器中工作正常（即使是兼容模式下的 IE10）。我在没有最新更新的 IE10 系统上进行了测试，它运行良好。

查看问题的示例 URL：[http ://www.cliptraining.com/toc.cfm?category=Excel_2010](http://www.cliptraining.com/toc.cfm?category=Excel_2010)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:18:25.523

编辑答案：

对于单个扩展器，即不属于幻灯片库的扩展器，添加它似乎可以修复它：

hs.objectLoadTime = '之后';

如果您有一个图库（即一系列包含下一个/上一个导航的扩展器），问题就会变得更加复杂。除了单个扩展器修复之外，蛮力修复似乎是：

hs.transitions = ['fade'];

我仍然需要做一些对照实验来缩小范围。

# tfs - How do I use TFS to autobuild a non default configuration

> ID：15951062
> 
> 赞同：0
> 
> 时间：2013-04-11T14:12:39.403
> 
> 标签：tfs, tfsbuild

We have a large code base with various labels which need autobuilding. We are using TFS 2012 Express and VS 2010

Our code is build by a batch file so I have created a dummy solution which the autobuild builds, the build instructions for this solution just run the batch file.

I had the idea of using different configurations in this solution to build different labels.

So, as well as debug and release configurations I added one called LABEL which calls a different batch file and added a new automatic build in TFS which calls this solution with the 'label' configuration in the box Required - Configurations to build.

However, when I try to run it it fails claiming that the 'label' configuration does not exist.

Does anyone know how to do this?

Extra: It seems to work if I use the Release configuration to call one batch file and the Debug one to call another but it still cannot find user created configurations?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T10:17:58.740

如果假设“自动构建”意味着“通过 TFS 构建定义构建”。

如果“标签”是指源代码控制标签，那么在对构建进行排队时，可以将其“获取版本”参数设置为标签 - 例如，用于标签`MyLabel`使用`LMyLabel`。

如果“标签”是指批处理文件构建内部的一些定义，那么您可以通过 MSBuild 属性传递它：通过添加`"/p:label=mylabel"`到“MSBuild 参数”在构建定义中定义它。然后，在解决方案调用您的批处理的地方，您可以使用`$(label)`它从构建定义中获取值。

此外，您可以修改构建模板以直接调用批处理文件，并在构建定义中设置一个参数，然后模板将其传递给批处理文件，而不是这个 hacky .sln。

# php - Magento Product Flat Data and Catalog Search Index issue

> ID：15951067
> 
> 赞同：9
> 
> 时间：2013-04-11T14:12:57.160
> 
> 标签：php, mysql, magento

We are running Magento store having 8k products. The tow indexing is not working. Throwing some errors. **Product Flat Data Error**

```
Product Flat Data index process unknown error:
exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1005 Can't create table './bofc_magento/#sql-f22_6554c.frm' (errno: 121)' in /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('ALTER TABLE `ca...', Array)
#5 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('ALTER TABLE `ca...', Array)
#6 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(327): Varien_Db_Adapter_Pdo_Mysql->query('ALTER TABLE `ca...')
#7 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(2548): Varien_Db_Adapter_Pdo_Mysql->raw_query('ALTER TABLE `ca...')
#8 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(816): Varien_Db_Adapter_Pdo_Mysql->addForeignKey('FK_CAT_PRD_FLAT...', 'catalog_product...', 'entity_id', 'catalog_product...', 'entity_id', 'CASCADE', 'CASCADE')
#9 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(1390): Mage_Catalog_Model_Resource_Product_Flat_Indexer->prepareFlatTable(1)
#10 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Flat/Indexer.php(296): Mage_Catalog_Model_Resource_Product_Flat_Indexer->reindexAll()
#11 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Indexer/Flat.php(336): Mage_Catalog_Model_Product_Flat_Indexer->reindexAll()
#12 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Index/Model/Process.php(207): Mage_Catalog_Model_Product_Indexer_Flat->reindexAll()
#13 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Index/Model/Process.php(253): Mage_Index_Model_Process->reindexAll()
#14 /var/www/vhosts/beadsofcambay.com/httpdocs/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#15 /var/www/vhosts/beadsofcambay.com/httpdocs/shell/indexer.php(198): Mage_Shell_Compiler->run()
#16 {main} 
```

**Catalog Search Index**

```
Catalog Search Index index process unknown error:
exception 'Zend_Cache_Exception' with message 'Could not determine temp directory, please specify a cache_dir manually' in /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Cache.php:209
Stack trace:
#0 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Cache/Backend.php(197): Zend_Cache::throwException('Could not deter...')
#1 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Cache/Backend/File.php(123): Zend_Cache_Backend->getTmpDir()
#2 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Cache.php(153): Zend_Cache_Backend_File->__construct(Array)
#3 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Cache.php(94): Zend_Cache::_makeBackend('File', Array, false, false)
#4 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Locale/Data.php(940): Zend_Cache::factory('Core', 'File', Array, Array)
#5 /var/www/vhosts/beadsofcambay.com/httpdocs/lib/Zend/Locale.php(668): Zend_Locale_Data::getContent('en_US', 'date', NULL)
#6 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php(763): Zend_Locale::getTranslation(NULL, 'date', Object(Zend_Locale))
#7 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php(699): Mage_CatalogSearch_Model_Resource_Fulltext->_getStoreDate(1, NULL)
#8 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php(634): Mage_CatalogSearch_Model_Resource_Fulltext->_getAttributeValue(145, NULL, 1)
#9 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php(230): Mage_CatalogSearch_Model_Resource_Fulltext->_prepareProductIndex(Array, Array, 1)
#10 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php(128): Mage_CatalogSearch_Model_Resource_Fulltext->_rebuildStoreIndex(1, NULL)
#11 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Fulltext.php(83): Mage_CatalogSearch_Model_Resource_Fulltext->rebuildIndex(NULL, NULL)
#12 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/CatalogSearch/Model/Indexer/Fulltext.php(446): Mage_CatalogSearch_Model_Fulltext->rebuildIndex()
#13 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Index/Model/Process.php(207): Mage_CatalogSearch_Model_Indexer_Fulltext->reindexAll()
#14 /var/www/vhosts/beadsofcambay.com/httpdocs/app/code/core/Mage/Index/Model/Process.php(253): Mage_Index_Model_Process->reindexAll()
#15 /var/www/vhosts/beadsofcambay.com/httpdocs/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#16 /var/www/vhosts/beadsofcambay.com/httpdocs/shell/indexer.php(198): Mage_Shell_Compiler->run()
#17 {main} 
```

Both indexes are run from command line. I Googled both errors but did not find any suitable solutions.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:03:35.853

几天前我遇到了同样的问题。

1 - 请进行数据库备份

2 - 关闭 Magento 中的使用平面产品和类别选项，并将索引模式从产品平面数据切换到手动更新；

3 - 现在进入您的数据库。删除 catalog_product_flat_xx 表；

4 - 您必须通过 SSH 重新索引目录。它应该如下所示：

```
usr/local/bin/php public_html/shell/indexer.php --reindex catalog_product_flat 
```

Magento 将为每个商店创建新表。我可以花点时间。

完成后，您可以激活 Flat products 选项并检查 Magento 是否可以自己进行重新索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T05:25:46.647

我无法重新索引`catalog_product_flat`索引过程。花了一天时间在互联网上尝试了几种解决方案。我能够解决这个问题。下面是步骤。

1.  创建面临索引问题的 Magento Db 的克隆。
2.  将数据库转储到新创建的数据库中。
3.  截断`catalog_product_flat_1`单个商店的表，对于多个商店，将有多个表`catalog_product_flat_*`，其中`*`商店 id 是。这里截断所有的表。
4.  将 mangento 运行实例指向新创建的数据库并配置数据库，以便该站点正常运行。
5.  现在运行命令`php document_root/shell/indexer.php --reindex catalog_product_flat`或尝试从管理员重新索引。`php document_root/shell/indexer.php --reindexall`用于重新索引所有过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:21:52.213

截断产品平面数据，然后再次运行此脚本。应该是外键约束问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:37:34.873

当我尝试手动更改具有 FK（关系）的列时，我看到了该错误。**截断**平面索引表应该让它消失——如果失败，也可以尝试 DELETE FROM 而不是 TRUNCATE。

有多少属性设置为在前端可见（并添加到平面表中）？MySQL 每行有 64k 的限制，如果你破坏它可能会发生坏事（比如损坏的表......）

第二个错误看起来只是错误的缓存设置 (local.xml) 或 var 文件夹的文件权限问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-22T09:08:59.440

我在目录搜索中重新索引时遇到了同样的问题...... 10 天后，我找到了解决方案。

我得到的目录搜索索引错误：

> 带有消息“SQLSTATE [HY000]”的异常“PDOException”：一般错误：1785 当@@GLOBAL.ENFORCE_GTID_CONSISTEN CY = 1 时，只能在自动提交的语句或单语句事务中完成对非事务表的更新，而决不能在与更新事务表相同的语句。

解决方案是：

1.  丢弃表`catalogsearch_fulltext`
2.  `catalogsearch_fulltext`使用现有结构再次创建表。
3.  `catalogsearch_query`使用打击提到的查询更新表。

    更新目录搜索查询 SET is_processed = 0

然后打开您的 SSH 并运行命令以使其再次工作：

```
[~/public_html/shell]# php indexer.php reindexall 
```

# xml - Deleting xml node in PL/SQL

> ID：15951068
> 
> 赞同：1
> 
> 时间：2013-04-11T14:12:57.343
> 
> 标签：xml, oracle, plsql, xmltype

How can I remove a node from xmltype using PL/SQL? Example:

```
<people>
   <person>
      <personNO>1</personNO>
   </person>
   <person>
      <personNO>2</personNO>
   </person>
</people> 
```

I try to remove whole node person if /people/person/personNO is 1\. My xml document is in the l_xml xmltype variable. So far I've got:

```
SELECT deletexml(l_xml, '/people/person[personNO="1"]')
INTO l_xml
FROM dual; 
```

It doesn't seem to work at all. Can you please suggest any solution?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:33:45.620

定义“根本不起作用”，因为它可以正常工作：

（在 10.2.0.4 + 11.2.0.3 上测试）

```
SQL> declare
  2    l_xml xmltype;
  3  begin
  4
  5    l_xml := xmltype.createXML('<people>
  6     <person>
  7        <personNO>1</personNO>
  8     </person>
  9     <person>
 10        <personNO>2</personNO>
 11     </person>
 12  </people>');
 13
 14    select deletexml(l_xml, '/people/person[personNO="1"]')
 15      into l_xml
 16      from dual;
 17
 18    dbms_output.put_line(l_xml.getstringval());
 19  end;
 20  /
<people><person><personNO>2</personNO></person></people>

PL/SQL procedure successfully completed. 
```

所以 person no = 1 的整个 person 节点被删除。如果您打算清除每个节点（如果 personNO 1 存在于其中任何一个节点中），那么您希望将 xpath 设置为`/people/person[../person/personNO="1"]`

# javascript - Map API to Generate Routes Based on Distance

> ID：15951071
> 
> 赞同：2
> 
> 时间：2013-04-11T14:13:04.183
> 
> 标签：javascript, google-maps-api-3

I am looking for a Javascript API like Google Maps which can produce routes based on distance criteria. For example, I give a start point and an end point which are the same and I want 5-10 different routes which start and end there but are about 5 miles long. Is there anything out there which can do that?

I know that Google Maps can do that with just a start and end but no distance parameter. I just want to have distance be a parameter and have the start and end points be the same.

# javascript - Ajax 与图像加载优先级

> ID：15951075
> 
> 赞同：0
> 
> 时间：2013-04-11T14:13:12.703
> 
> 标签：javascript, ajax, image, jquery

我有以下情况：

我有大约 50 个 ajax 请求（全部在 javascript 循环中发送），它们必须用文章信息填充表格。这些文章还包括图像。

我的问题：

当我将来自 ajax 请求的答案（表格行）放在表格中时，它不会在中间加载图像。它将等到所有请求都收到后，然后开始加载图像。

有没有办法让图像首先加载？或者至少在每个 ajax 请求之后。我的意思是它不是一个同步请求，即使那样它也不应该阻止图像传输，据我所知......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:38:41.327

您必须在 base64 中对图像进行编码才能获得所需的内容。但这将包括一些开销。

还有……烤的话。

# android - 如何在 Android 上监控 CPU 的使用情况？

> ID：15951081
> 
> 赞同：2
> 
> 时间：2013-04-11T14:13:23.317
> 
> 标签：android, monitoring, cpu-usage, multicore

我知道我可以通过使用来监控总使用量，例如：

```
adb top -m 10 
```

但我有兴趣分别监控每个 CPU。在 Linux 上使用 top，我可以使用交互式命令 '1' 分别显示每个 CPU 的使用情况。我怎样才能在安卓上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:43:22.270

看起来你不能：

```
# top -h
Usage: top [ -m max_procs ] [ -n iterations ] [ -d delay ] [ -s sort_column ] [ -t ] [ -h ]
    -m num  Maximum number of processes to display.
    -n num  Updates to show before exiting.
    -d num  Seconds to wait between updates.
    -s col  Column to sort by (cpu,vss,rss,thr).
    -t      Show threads instead of processes.
    -h      Display this help screen. 
```

您可以使用[systrace](http://developer.android.com/tools/help/systrace.html)跟踪每个 cpu 进程的执行时间。另请参阅[使用 Systrace 分析显示和性能](http://developer.android.com/tools/debugging/systrace.html)。如果你有一个 root 设备，busybox 可能有一个更完整的实现。

# c++ - 编译器何时执行 RVO？

> ID：15951082
> 
> 赞同：1
> 
> 时间：2013-04-11T14:13:27.357
> 
> 标签：c++, return-value-optimization

似乎有很多关于编译器何时执行 RVO 或为什么在这样那样的情况下不执行它的问题。

在阅读[http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)之后 ，我似乎也无法理解它。

基本上，编译器似乎“通常”会执行某种优化，但在极少数情况下它不能。

如果我正确理解 Dave Abrahams 的文章，他并不真正建议按价值返回，除非是为了更好的可读性。对我来说，这表明为了可读性和一致性，始终传递大输出值的引用可能是一个好主意。

那么我应该传递引用以避免复制还是有什么方法可以找出编译器是否会优化掉一个副本？

此外，找出编译器是否会以特定方式进行优化的努力实际上比仅仅通过引用传递要少吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:21:44.547

这篇文章的全部意义在于告诉您，您*不必担心这一点*。优化是一个黑匣子，除非在最罕见的情况下，否则您不应该关心它。

编译器在*认为 RVO 适用时*执行 RVO 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:19:15.810

任何体面的编译器都会支持它。除非您确定需要支持不需要的编译器，否则请继续使用它。

# asp.net - .net 应用程序中的图像调整大小/裁剪/翻转

> ID：15951086
> 
> 赞同：1
> 
> 时间：2013-04-11T14:13:30.997
> 
> 标签：asp.net, .net, crop, image-resizing, image-rotation

我正在编写一个 ASP.NET (MVC C#) 应用程序，用户必须在其中上传一些图像，并且应该能够**裁剪**和**旋转**（垂直/水平）。应用程序应自动**调整**图像大小以适合页面。

您是否建议手动调整大小或使用 imageresizing.net（免费许可证）之类的东西？imageresizing.net 的优缺点？关于裁剪和旋转工具以及 jCrop 的任何建议（可能结合了这两种功能的工具）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:29:28.280

如果适合您的需求，我总是建议使用已有的东西。您节省了开发时间，但更重要的是您节省了维护和测试时间。如果您正在使用库：有人已经对其进行了测试和验证，因此您可以专注于您的核心。这样，您“被迫”使您的软件模块化，并且在以后需要优化该部分时，您可以开发自己的库。

# c# - 多次使用 AutoResetEvent

> ID：15951092
> 
> 赞同：0
> 
> 时间：2013-04-11T14:13:43.583
> 
> 标签：c#, .net

我在 .Net 4.0 C# 应用程序中对一个 Web 服务进行了两次异步调用。这些是通过使用 AutoResetEvent 来控制的`WaitOne()`。

在我的本地机器上，这是按预期工作的。但是当我将它部署在服务器中时，第二步的成功处理程序在第一次调用中被调用。

需要进行哪些更改才能使线程正常运行？

```
if (userID != null)
{
    AddressBookRequest req = new AddressBookRequest
    {
        contactsSearchCriteria = new ContactsSearchCriteria
        {
            searchUserID = userID.Trim()
        },
        HeaderParams = new HttpHeaderParms
        {
            UserId = userID.Trim(),
            UserPrincipalName = userID.Trim() ,
            ContentType = "application/xml"
        }
    };
    lookupServicesAssociate.SearchContactDetailsAsync(req);
    autoRestEvent = new AutoResetEvent(false);
    lookupServicesAssociate.SearchContactDetailsCompleted +=
        new EventHandler<ServiceResponseEventArgs<ContactDetailsPreview[]>>(AssociateSearchContactDetailsCompleted);
    autoRestEvent.WaitOne();
}

if (reportsToUserID != null)
{
    AddressBookRequest req1 = new AddressBookRequest
    {
        contactsSearchCriteria = new ContactsSearchCriteria
        {
            searchUserID = reportsToUserID.Trim()
        },
        HeaderParams = new HttpHeaderParms
        {
            UserId = reportsToUserID.Trim(),
            UserPrincipalName = reportsToUserID.Trim(), 
            ContentType = "application/xml"
        }
    };
    lookupServiceReports.SearchContactDetailsAsync(req1);
    lookupServiceReports.SearchContactDetailsCompleted +=
        new EventHandler<ServiceResponseEventArgs<ContactDetailsPreview[]>>(ReportsToAssociateSearchContactDetailsCompleted);
    autoRestEvent.WaitOne();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:33:10.133

如果我正确阅读了您的代码，则说明您处于危险的竞争状态。你有：

```
lookupServicesAssociate.SearchContactDetailsAsync(req);
autoRestEvent = new AutoResetEvent(false);
lookupServicesAssociate.SearchContactDetailsCompleted +=
    new EventHandler<ServiceResponseEventArgs<ContactDetailsPreview[]>>(AssociateSearchContactDetailsCompleted);
autoRestEvent.WaitOne(); 
```

在第一行中，您调用 async 方法。然后，您创建`AutoResetEvent`并分配事件处理程序。

如果`SearchContactDetailsAsync`在您分配回调之前完成，您`WaitOne`将永远不会完成，因为回调不会被执行并且事件永远不会发出信号。

你真的应该写：

```
autoRestEvent = new AutoResetEvent(false);
lookupServicesAssociate.SearchContactDetailsCompleted +=
    new EventHandler<ServiceResponseEventArgs<ContactDetailsPreview[]>>(AssociateSearchContactDetailsCompleted);
lookupServicesAssociate.SearchContactDetailsAsync(req);
autoRestEvent.WaitOne(); 
```

虽然老实说，我想知道你为什么要启动一个异步任务然后等待它完成。您正在有效地同步进行。

说了这么多，我不得不同意 Pako 的评论：除非`UserID == null`. 这引发了另一个潜在问题：如果`autoResetEvent`is`null`和`UserID == null`，则第二个`WaitOne`将抛出`NullReferenceException`。如果多个线程正在执行此代码，每个线程都会创建一个不同`AutoResetEvent`的别人的信号。

# silverlight - Silverlight 键盘快捷键

> ID：15951094
> 
> 赞同：0
> 
> 时间：2013-04-11T14:13:51.200
> 
> 标签：silverlight, keyboard-shortcuts

我尝试在 Silverlight 中实现键盘快捷键并输入代码：

```
private void link(object sender, KeyEventArgs e) {
    if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == Key.A) {
        MessageBox.Show("alert message");
    }
} 
```

当我按`Ctrl`+时，此代码工作正常`A`。

有没有机会为没有 2 个字母的组合设置`ModifierKeys`，例如`A`+ `T`？

# ajax - 根据 h:selectOneRadio 选择，通过 ajax 有条件地渲染 h:selectOneMenu 和 h:inputText

> ID：15951095
> 
> 赞同：1
> 
> 时间：2013-04-11T14:13:52.363
> 
> 标签：ajax, jsf-2

我有一个带有 2 个单选按钮的表单：“type1”和“type2”。如果选择“type1”，则必须显示下拉菜单。如果选择“type2”，则必须显示文本字段。

这是视图和控制器：

`test.xtml`

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:rich="http://richfaces.org/rich"
            xmlns:a4j="http://richfaces.org/a4j">

    <h:form>

        <h:selectOneRadio 
            id="type"
            label="Type"
            value="#{testBean.type}">
            <f:selectItem itemLabel="Type1" itemValue="type1" />
            <f:selectItem itemLabel="Type2" itemValue="type2" />
            <f:ajax execute="@all" render="selectBox inputBox"/>
        </h:selectOneRadio>

        <h:selectOneMenu
            id="selectBox"
            label="Service"
            value="#{testBean.service}"
            rendered="#{testBean.isType1}"
            style="width:285px">
            <f:selectItem itemLabel="Medium"  itemValue="medium" />
            <f:selectItem itemLabel="Basic"   itemValue="basic" />
            <f:selectItem itemLabel="Premium" itemValue="premium" />
        </h:selectOneMenu>
        <h:inputText 
            id="inputBox"
            size="50"
            value="#{testBean.custom}"
            rendered="#{!testBean.isType1}" />

    </h:form>

</ui:composition> 
```

`TestBean.java`

```
package com.test.backing;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name = "testBean")
@SessionScoped
public class TestBean implements Serializable
{
private static final long serialVersionUID = -4337084623546767911L;

private String type = "type1";
private String service;
private String custom;

public Boolean getIsType1()
{
    if(type.equals("type1"))
    {
        System.out.println(type+":true");
        return true;
    }
    else
    {
        System.out.println(type+":false");
        return false;
    }
}

public String getType()
{
    return type;
}
public void setType(String type)
{
    this.type = type;
}

public String getService()
{
    return service;
}

public void setService(String service)
{
    this.service = service;
}

public String getCustom()
{
    return custom;
}

public void setCustom(String custom)
{
    this.custom = custom;
}

} 
```

当我启动我的应用程序时，我的标准输出中有以下内容：

```
type1:true
type1:true
type1:true
type1:true
type1:true
type1:true 
```

但是，当我选择另一种类型时，UI 中没有任何反应。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:48:14.330

JSF 生成 HTML。JS/Ajax 适用于 HTML。JS/Ajax 通过在 HTML DOM 树中查找 HTML 元素`document.getElementById()`并根据 Ajax 响应替换其内容来更新 HTML 元素。但是，如果一个 JSF 组件被指示不呈现 HTML，那么 JS/Ajax 就无法在 HTML DOM 树中找到它，因此无法替换任何东西。

您只能对**始终**呈现的 JSF 组件的 HTML 表示进行 ajax 更新。因此，将它们包装在例如 a`<h:panelGroup>`中。

```
<h:selectOneRadio ...> 
    <f:ajax ... render="selectAndInputBox" />
</h:selectOneRadio>
<h:panelGroup id="selectAndInputBox">
    <h:selectOneMenu ... rendered="..." />
    <h:inputText ... rendered="..." />
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/)

* * *

**与具体问题无关**，这种`getIsType1()`方法很笨拙。只需直接在视图中进行比较即可摆脱它。

```
<h:selectOneMenu ... rendered="#{testBean.type == 'type1'}" />
<h:inputText ... rendered="#{testBean.type != 'type1'}" /> 
```

或者，更符合您最初的问题，

```
<h:selectOneMenu ... rendered="#{testBean.type == 'type1'}" />
<h:inputText ... rendered="#{testBean.type == 'type2'}" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:13:37.737

尝试用以下代码替换 xhtml 代码

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:rich="http://richfaces.org/rich"
            xmlns:a4j="http://richfaces.org/a4j">

<h:head>

</h:head>

<h:form prependId="false">

    <h:selectOneRadio 
        id="type"
        label="Type"
        value="#{testBean.type}">
        <f:selectItem itemLabel="Type1" itemValue="type1" />
        <f:selectItem itemLabel="Type2" itemValue="type2" />
        <f:ajax execute="@all" render="selectInputPanel"/>
    </h:selectOneRadio>
    <h:panelGroup id="selectInputPanel">
    <h:selectOneMenu
        id="selectBox"
        label="Service"
        value="#{testBean.service}"
        rendered="#{testBean.isType1}"
        style="width:285px">
        <f:selectItem itemLabel="Medium"  itemValue="medium" />
        <f:selectItem itemLabel="Basic"   itemValue="basic" />
        <f:selectItem itemLabel="Premium" itemValue="premium" />
    </h:selectOneMenu>
    <h:inputText 
        id="inputBox"
        size="50"
        value="#{testBean.custom}"
        rendered="#{!testBean.isType1}" />
    </h:panelGroup>
</h:form></ui:composition> 
```

您的代码中的主要问题是，

1.  缺少 h:head 以导入 jsf ajax 所需的 jsf.js。
2.  请按照@BaluC 的建议将您的组件包装到一个 panelGroup 中，因为一旦组件未呈现（页面上不可用），那么其上的 ajax 将无法使用其 ID。

[关于 getIsType1() 方法调用的次数是由于渲染属性，有关更多信息，请在此处](https://stackoverflow.com/questions/4281261/why-is-the-getter-called-so-many-times-by-the-rendered-attribute?lq=1)查看@Baluc 的答案

# sql - SQL Server：自动删除所有条目

> ID：15951097
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:14:02.053
> 
> 标签：sql, sql-server-2008-r2, windows-server-2008-r2

我有一个带有 SQL Server 2008 R2 的 Windows 2008 R2 服务器。

我有一个每小时从第三方填充的数据库。数据库有`datetime`列（示例：2012-11-22 11:59:00.000）。

我只需要当天的数据，为了停止数据库填满，我想每天自动删除所有早于当天的条目。

我不知道从哪里开始。

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:18:47.450

您可以创建一个[SQL Server 代理作业](http://msdn.microsoft.com/en-us/library/ms190268.aspx)，该作业运行查询以在指定的计划中删除所需的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:17:53.803

您可以在插入时使用触发器来删除早于一天的条目。请参阅[http://msdn.microsoft.com/en-us/library/aa258254(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258254(v=sql.80).aspx)关于创建触发器

```
CREATE TRIGGER insDelete
ON yourTable
FOR INSERT
BEGIN
   delete from yourTable where datetimeColumn < getdate()-1
END 
```

# oauth - VB中是否有用于OAuth 2的库

> ID：15951098
> 
> 赞同：2
> 
> 时间：2013-04-11T14:14:04.110
> 
> 标签：oauth, vbscript, vb6, iis-6, oauth-2.0

我正在尝试为使用 VB（不是 VB.net）在 ASP over IIS 6 上实现的旧站点实现 OAuth 2 连接

我试图找到一个实现 OAuth 2 的库，但找不到。有这样的图书馆吗？如果没有，我有什么选择？

对不起，如果这个问题是微不足道的，我是 VB 的新手......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T20:01:32.273

你在寻找这样的东西[吗？](http://scottdesapio.com/VBScriptOAuth/)

这个库应该可以帮助您开始在 VBS 中使用 OAuth。您需要从[这里](http://scottdesapio.com/VBScriptOAuth/oAuthASPExample.zip)获得的一切，将 OAuth 文件夹放入您的项目中，然后按照提供的代码示例进行操作。

尽管他使用 Twitter 作为示例，但它可以用于任何支持 OAuth 的服务。

# css - 是否可以在 a:hover 的同一个链接标签内独立更改两种样式？

> ID：15951099
> 
> 赞同：0
> 
> 时间：2013-04-11T14:14:16.570
> 
> 标签：css, hover

我有一个锚链接，它有一个图像和两个文本范围，一个标题和一个不同颜色的标语，我希望它们在悬停链接时以不同方式改变。

```
<style>
span.title {color: #666;}
span.tagline {color: #aaa;}
</style>

<a class="button" href="http://www.link.com" target="_blank">
<div style="display:block">
<img src="images/button.png">
<span class="title">TITLE</span><br>
<span class="tagline">tagline</span>
</div>
</a> 
```

我想知道是否可以使用类似的东西：

```
<style>
a.button:hover span.title {color: #000;}
a.button:hover span.tagline {color: #2ae;}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:16:16.833

是的，这是可能的。伪类`:hover`不必是选择器中的最后一个元素。

***现场演示：http:** [//jsfiddle.net/H35rf/](http://jsfiddle.net/H35rf/)*

[为了将来参考，在提问之前在jsFiddle](http://jsfiddle.net/)中自己尝试一下会更容易/更快。

# vb.net - 引发基类事件 VB.NET 实体框架部分类

> ID：15951100
> 
> 赞同：0
> 
> 时间：2013-04-11T14:14:17.507
> 
> 标签：vb.net, entity-framework

我有一个部分类来向实体框架类添加一些功能。当我更改仅在类的部分部分中的任何属性时，我想 RaiseEvent PropertyChanged。

我得到：派生类不能引发基类事件

```
Partial Class Person
    Sub NotifyPropertyChanged(ByVal name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
    End Sub
End Class 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:22:27.787

该问题与部分类无关。问题是它`Person`派生自另一个类，并且您试图从类中引发在基类中声明的事件`Person`。

解决方案是在引发事件的基类中创建一个受保护的方法，并从 person 类中调用它。

# objective-c - 将数组写入 plist 并填充 tableview

> ID：15951104
> 
> 赞同：2
> 
> 时间：2013-04-11T14:14:32.347
> 
> 标签：objective-c, xcode, uitableview, nsmutablearray, plist

我有一个返回带有一堆字符串的 NSMutableArray 的方法。如何将此数组（带字符串）添加到 plist 文件并使用它来填充 UITableView？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T16:27:41.543

创建一个包含值的数组

```
NSArray *array = [NSArray arrayWithObjects:@"One",
                  @"Two",
                  @"Three",
                  @"Four", nil]; 
```

在文档目录中创建文件路径，您可以在那里写入文件，而不是在应用程序包中

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentFolder = [path objectAtIndex:0];
NSString *filePath = [documentFolder stringByAppendingFormat:@"myfile.plist"]; 
```

将数组保存到 Plist 文件

```
[array writeToFile:filePath atomically:YES];
NSLog(@"file Stored at %@",filePath); 
```

要从 plist 读取数组，请使用以下代码

```
NSArray *plistArray = [NSArray arrayWithContentsOfFile:filePath];
NSLog(@"%@",plistArray); 
```

虽然如果你仍然没有得到你可以参考教程[here](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-plist-in-iphone/)

# jquery - 添加和删 除动态文本框

> ID：15951107
> 
> 赞同：2
> 
> 时间：2013-04-11T14:14:46.720
> 
> 标签：jquery

我有以下代码向我的页面添加文本区域。它还附加了一个“删除”按钮，以便用户可以删除文本区域。问题是，当用户单击删除按钮和文本区域中的任何位置时，文本区域被删除......我不确定为什么会发生这种情况。

有人可以快速查看我的代码吗？也许我错过了一些东西。

谢谢！

```
$("#btnAddTools").click(function () {
        if(counter>10){
            alert("Only 10 learning Tools allowed per page.");
            return false;
        }   

        var newTextBoxDiv = $(document.createElement('div')).attr("id", 'Tools' + counter);
        newTextBoxDiv.after().html(
              "<label></label>" +
              "<textarea id='tbTools'" + counter + "' name='txtTools' rows='3' cols='50'></textarea>" +

              '&nbsp;&nbsp;<input type="button" value="Remove" class="removeTools">').click(function () {
                   $(this).remove();
                   counter--;
                });
        newTextBoxDiv.appendTo("#ToolsGroup");
        counter++;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:20:09.170

使用此代码：

```
newTextBoxDiv.after().html(
          "<label></label>" +
          "<textarea id='tbTools'" + counter + "' name='txtTools' rows='3' cols='50'>    </textarea>" +

          '&nbsp;&nbsp;<input type="button" value="Remove" class="removeTools">').click(function () { 
```

您将单击功能应用于按钮、标签和整个 TextArea。

一种解决方法是创建一个单独的函数并在代码中的按钮上使用 onClick。

像这样的东西：

```
newTextBoxDiv.after().html(
      "<label></label>" +
      "<textarea id='tbTools'" + counter + "' name='txtTools' rows='3' cols='50'>    </textarea>" +

      '&nbsp;&nbsp;<input type="button" value="Remove" onClick="functionName(param)" class="removeTools">'); 
```

然后有一个单独的功能：

```
function functionName(param) {
  //code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:23:56.027

您可以使用此代码

```
var counter=0;
$("#btnAddTools").click(function () {
    if(counter>10){
        alert("Only 10 learning Tools allowed per page.");
        return false;
    }   

    var newTextBoxDiv = $(document.createElement('div')).attr("id", 'Tools' + counter);
    newTextBoxDiv.after().html(
          "<label></label>" +
          "<textarea id='tbTools'" + counter + "' name='txtTools' rows='3' cols='50'></textarea>" +

          '&nbsp;&nbsp;<input type="button" value="Remove" class="removeTools">');
    newTextBoxDiv.appendTo("#ToolsGroup");
    counter++;
});
$(document).on('click','.removeTools'.function(){
    $(this).prev().remove();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:24:39.623

您的代码中的问题是您将点击事件添加到您添加的**全新**html 中。

请检查这个新代码

```
var counter = 0;
$("#btnAddTools").click(function () {
    if (counter > 10) {
        alert("Only 10 learning Tools allowed per page.");
        return false;
    }

    var newTextBoxDiv = $(document.createElement('div')).attr("id", 'Tools' + counter);
    newTextBoxDiv.after().html(
        "<label></label>" +
        "<textarea id='tbTools'" + counter + "' name='txtTools' rows='3' cols='50'></textarea>" +

        '&nbsp;&nbsp;<input type="button" value="Remove" class="removeTools" onclick="removeTextArea(this);">');
    newTextBoxDiv.appendTo("#ToolsGroup");
    counter++;
});

function removeTextArea(textAreaElement) {
    $(textAreaElement).parent().remove();
    counter--;
} 
```

# apache-flex - 如何从 Flash Builder (Flex 3.5) 获得比“未定义”更好的信息？

> ID：15951116
> 
> 赞同：1
> 
> 时间：2013-04-11T14:15:15.323
> 
> 标签：apache-flex, debugging, flash-builder

我以前在控制台窗口中看到过“未定义”本身，但我可以弄清楚它的含义。这一次，我将它放在`CollectionEvent (super(type, bubbles, cancelable);`) 的构造函数的开头行中。我认为它是由对`XMLListCollection`. 似乎没有任何未定义的地方——`this`指针看起来不错，所有参数也都不错。它有相当大的堆栈跟踪，但没有关于未定义内容的有用信息。如何进入下一个调试步骤？

```
不明确的
    在 mx.events::CollectionEvent()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\events\CollectionEvent.as:116]
    在 mx.collections::ListCollectionView/handlePropertyChangeEvents()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1245]
    在 mx.collections::ListCollectionView/listChangeHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1120]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::XMLListAdapter/itemUpdateHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:523]
    在 mx.collections::XMLListAdapter/itemUpdated()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:321]
    在 mx.collections::XMLListAdapter/xmlNotification()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:620]
    在函数/()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:81]
    在 AddressNode/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressNode.as:192]
    在 AddressTree/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressTree.as:37]
    在 UMTAControl/ValidateDisplayLines_()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:90]
    在 UMTAControl/OnChangeXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:82]
    在 UMTAControl/OnChXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:79]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::ListCollectionView/dispatchEvent()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:879]
    在 mx.collections::ListCollectionView/handlePropertyChangeEvents()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1248]
    在 mx.collections::ListCollectionView/listChangeHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1120]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::XMLListAdapter/itemUpdateHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:523]
    在 mx.collections::XMLListAdapter/itemUpdated()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:321]
    在 mx.collections::XMLListAdapter/xmlNotification()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:620]
    在函数/()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:81]
    在 AddressNode/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressNode.as:192]
    在 AddressTree/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressTree.as:37]
    在 UMTAControl/ValidateDisplayLines_()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:90]
    在 UMTAControl/OnChangeXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:82]
    在 UMTAControl/OnChXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:79]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::ListCollectionView/dispatchEvent()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:879]
    在 mx.collections::ListCollectionView/handlePropertyChangeEvents()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1248]
    在 mx.collections::ListCollectionView/listChangeHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1120]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::XMLListAdapter/itemUpdateHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:523]
    在 mx.collections::XMLListAdapter/itemUpdated()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:321]
    在 mx.collections::XMLListAdapter/xmlNotification()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:620]
    在函数/()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:81]
    在 AddressNode/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressNode.as:192]
    在 AddressTree/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressTree.as:37]
    在 UMTAControl/ValidateDisplayLines_()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:90]
    在 UMTAControl/OnChangeXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:82]
    在 UMTAControl/OnChXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:79]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::ListCollectionView/dispatchEvent()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:879]
    在 mx.collections::ListCollectionView/handlePropertyChangeEvents()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1248]
    在 mx.collections::ListCollectionView/listChangeHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1120]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.collections::XMLListAdapter/itemUpdateHandler()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:523]
    在 mx.collections::XMLListAdapter/itemUpdated()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:321]
    在 mx.collections::XMLListAdapter/xmlNotification()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:620]
    在函数/()[C:\autobuild\3.5.0\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:81]
    在 AddressNode/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressNode.as:192]
    在 AddressTree/DisplayLinesInLabels()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\AddressTree.as:37]
    在 UMTAControl/ValidateDisplayLines_()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:90]
    在 UMTAControl/OnChangeXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:82]
    在 UMTAControl/OnChXML()[C:\Users\PL\Documents\projects\AMHS-FlexProject\src\ubimex\modules\MTARoutingControl\UMTAControl.as:79]
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:35:15.130

没错，那些“未定义”的其他实例都是由于无限递归导致堆栈溢出（而不是那种提供深思熟虑的反馈）。

我想象这些回调类似于 MFC 模型，其中消息被排队并且仅在应用程序开发人员的代码完成执行时处理（我认为有时可能会合并重复的消息）。显然这不是这里发生的事情——正在进行更改并立即执行回调。我想我将无法可靠地检测到对此的更改`XMLListCollection`:(

多谢你们。

# facebook - 如何在用户授予 Thunderclap.it 等许可 60 多天后在 Facebook 时间轴上发布

> ID：15951119
> 
> 赞同：1
> 
> 时间：2013-04-11T14:15:19.470
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

在thunderclap.it 上，用户选择支持的原因，授予发布权限（publish_actions），当原因“过期”时，它会自动同时发布到所有承诺用户的订阅源。

对于最长 60 天的任何原因（长期访问令牌），这都可以。

60 天后过期的原因怎么可能？例如，这封邮件会过期，并会在 166 天后自动在您的墙上发布一条消息。

[https://www.thunderclap.it/projects/982-lights-of-the-city-by-tpr](https://www.thunderclap.it/projects/982-lights-of-the-city-by-tpr)

当前的access_token可以吗？

需要做什么才能实现此功能（自动发布到用户的提要，无论用户在线/离线，也无论他上次登录应用程序是什么时候）？

我读过的所有内容都表明，在用户授予许可后最多 60 天内这是可能的。为了延长这个时间，您需要用户重新使用应用程序（获取新的访问令牌）。

那么，这在 Thunderclap.it 上是如何工作的呢？

# twitter-bootstrap - Twitter引导轮播导航箭头脱离图像

> ID：15951120
> 
> 赞同：0
> 
> 时间：2013-04-11T14:15:20.070
> 
> 标签：twitter-bootstrap, carousel

我在我的引导轮播中放了一些 940x120 的图像，我希望轮播的导航箭头不在图像中，所以它们不会覆盖它。如果这样做：

```
.carousel-navigation.left {  
    margin-left: -45px;
}

.carousel-navigation.right {
    margin-right: -45px;
} 
```

当 Carousel 循环浏览图像时，图像会在左侧弹跳，就像它跟随箭头初始位置半秒，然后回到正确的位置，但这种循环时的效果并不好。我怎样才能避免这种情况？

这是我的例子：http: [//jsfiddle.net/WmMXa/3/](http://jsfiddle.net/WmMXa/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:15:20.070

我发现该错误仅在使用 LESS CSS 时发生（我使用的是嵌套规则），如果我在纯 CSS 中执行此操作，则图像不会反弹并正常工作。很高兴知道。

# javascript - ajax 响应数据的类型（Spidermonkey vs V8）

> ID：15951122
> 
> 赞同：1
> 
> 时间：2013-04-11T14:15:26.163
> 
> 标签：javascript, jquery, v8, spidermonkey

我在向[Google Elevation](https://developers.google.com/maps/documentation/elevation/)服务执行 Ajax 请求时注意到了这一点：

```
jQuery.ajax({
   url: elevation_url,
   method: "get",
   async: false,
   data: {
      locations : elevation_points.join("|"), 
      sensor : false
   },
   success: function(data){
      console.log(typeof data);
   }
}); 
```

Firefox（版本 19）输出：

> 细绳

而 Chrome（版本 26）输出：

> 目的

因此，我需要确保，例如`my_function(data.status) ...`在 Chrome 中，同时`my_function(jQuery.parseJSON(data)) ...`在 Firefox 中进行操作。

欢迎任何想法，谢谢！

**编辑**

正如建议的那样，添加`dataType: "json"`到 ajax 选项解决了这个问题。

# c++ - DDS DomainParticipantFactory 错误 CORBA

> ID：15951127
> 
> 赞同：1
> 
> 时间：2013-04-11T14:15:36.590
> 
> 标签：c++, ubuntu, data-distribution-service

我正在尝试创建一个程序来测试 Opensplice DDS。但是，我面临一些问题，我已经被困了很长时间。

当我尝试创建一个时，`DomainParticipantFactory`我收到一个错误，上面写着`CORBA:NO_IMPLEMENT`. 如果我不创建该程序，该程序就可以工作，`DomainParticipant`所以我认为问题出在那儿。

```
DDS::DomainParticipantFactory_var dpf = DDS:DomainParticipantFactory::get_instance();
// get_instance() causes the crash. 
```

有人会遇到这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:17:06.437

因为我找到了我的解决方案，所以我在这里发布以防有人得到它。

问题是由于库重叠导致的不当行为。

我将CCPP和SACPP链接在一起。这产生了某种系统不太喜欢的爆炸性混合。

所以不要链接错误的库。根据您是否使用 CORBA 系统，请谨慎选择。

# sql-server - 如何访问 SQL Azure 中的 sys.certificates 表？

> ID：15951133
> 
> 赞同：0
> 
> 时间：2013-04-11T14:15:53.767
> 
> 标签：sql-server, azure, certificate, azure-sql-database

我尝试从`sys.certificates`SQL Azure 中的表中查询所有项目 - 来自主数据库和常用数据库 - 每次它产生

> 无效的对象名称“sys.certificates”

错误信息。相同的查询在本地 SQL Express 上运行良好。

在 SQL Azure 中是否无法访问此表？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:26:00.290

SQL Azure 通常不支持证书和加密

检查这些：

[http://msdn.microsoft.com/en-us/library/ee336253.aspx](http://msdn.microsoft.com/en-us/library/ee336253.aspx)

[http://msdn.microsoft.com/en-us/library/ff394115.aspx](http://msdn.microsoft.com/en-us/library/ff394115.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:27:34.623

Azure SQL 不支持它

请参阅：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336238.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336238.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:43:02.160

TechNet 上有关于 SQL Azure 支持和不支持哪种加密的更深入的解释：

[http://technet.microsoft.com/en-us/magazine/hh351833.aspx](http://technet.microsoft.com/en-us/magazine/hh351833.aspx)

> SQL Azure 当前不支持 SQL Server 支持的标准数据加密机制。其中包括透明数据加密、非对称密钥、对称密钥和 Transact-SQL 函数，例如 ENCRYPTBYPASSPHRASE 和 DECRYPTBYPASSPHRASE、CREATE/ALTER/DROP DATABASE ENCRYPTION KEY 或 CREATE/ALTER/DROP MASTER KEY。

# python - 你如何引发 python 异常并包含 Sentry 的附加数据？

> ID：15951136
> 
> 赞同：15
> 
> 时间：2013-04-11T14:16:02.367
> 
> 标签：python, django, exception, sentry

Sentry 可以检测与异常相关的其他数据，例如：

![在此处输入图像描述](https://i.stack.imgur.com/VdTOX.jpg)

你如何用你自己的`additional data`字段从 Python（它是一个 Django 应用程序）中引发这样的异常？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-16T21:59:53.600

我使用库记录异常，`logging`因此在稍微调试代码后，我注意到了`extra`参数：

```
import logging
logger = logging.getLogger('my_app_name')

def do_something():

    try:
        #do some stuff here that might break

    except Exception, e:
        logger.error(e, exc_info=1, extra={'extra-data': 'blah', }) 
```

传递 exc_info=1 与调用`logger.exception`. 但是，`exception()`不接受使用参数所需的 kwargs `extra`。

这些值将显示在 Sentry Error 仪表板的“附加数据”部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-29T17:40:22.170

[wes 的回答](https://stackoverflow.com/a/19414701/220652)对我没有帮助，因为我想实际**提出**一个异常，**而不仅仅是记录**它。

这是我所做的（`client`是 Raven Sentry 客户端）：

```
client.extra_context({'foo': 'bar'})
raise RuntimeError('Whoops, something went wrong!') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:21:56.120

您可以尝试以下两种方法之一：

```
>>> # Raise the exception with the data you want.
>>> raise Exception('extra information')
Traceback (most recent call last):
  File "<pyshell#64>", line 1, in <module>
    raise Exception('extra information')
Exception: extra information
>>> # Catch an exception and add extra arguments.
>>> try:
    raise Exception()
except Exception as error:
    error.args += ('extra information',)
    raise

Traceback (most recent call last):
  File "<pyshell#68>", line 2, in <module>
    raise Exception()
Exception: extra information
>>> 
```

您可以通过添加更多参数来添加任意数量的附加数据字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T14:38:54.530

[Sentry 处理程序](https://github.com/getsentry/raven-python/blob/master/raven/handlers/logbook.py)在捕获异常消息时在您的屏幕截图中添加该信息，并从 traceback 获取该信息，*而*不是异常本身。

`.capture()`您可以通过向;传递额外的关键字参数来添加额外的字段 例如，如果您传入对象，[Django 客户端会为您执行此操作。](https://github.com/getsentry/raven-python/blob/master/raven/contrib/django/client.py)`request`

目前，没有从异常中获取其他数据。您必须自己扩展异常处理才能添加这样的设施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-09T21:40:22.557

现有的答案都不能很好地满足我的确切用例（即从 django`Request`对象添加额外的上下文到哨兵数据中）。经过一番挖掘后，最终效果很好的是使用该[`SENTRY_CLIENT`设置](https://docs.sentry.io/clients/python/integrations/django/#additional-settings)覆盖了客户端。

这是一个完整的简单用例：

```
from raven.contrib.django.raven_compat import DjangoClient

class CustomSentryClient(DjangoClient):

    def get_data_from_request(self, request):
        result = super(EToolsSentryClient, self).get_data_from_request(request)
        if getattr(request, 'custom_field', None):
            if 'extra' not in result:
                result['extra'] = {}
            result['extra']['custom_field'] = request.custom_field
        return result 
```

然后`settings.py`你只需添加

```
SENTRY_CLIENT = 'myapp.CustomSentryClient' 
```

# sql - sql-server 触发器连接不起作用

> ID：15951141
> 
> 赞同：0
> 
> 时间：2013-04-11T14:16:17.293
> 
> 标签：sql, sql-server, insert, left-join, inner-join

我一直在研究这个触发器，但无法弄清楚。我从这里的人那里得到了一些帮助，取得了很大的进步，但还没有完成。

这是我加入的触发器。插入没有发生....我无法调试，也看不到错误（如果有）。不幸的是，我正在使用 SQL 网络工具

```
CREATE trigger Posts_Raw_To_Queue_Trigger  ON SendNotificationPostsRaw 
FOR INSERT
AS
BEGIN
  INSERT INTO SendNotificationPostsQueue (UserID,PostID,SpecialityID)
  SELECT I.PostID, I.UserID, P.CategoryId   
  FROM INSERTED AS I JOIN PostCategoryRelations AS P ON I.PostID= P.PostId
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:54:10.147

试试这个——

```
CREATE TRIGGER dbo.Posts_Raw_To_Queue_Trigger

    ON dbo.SendNotificationPostsRaw

    -- please write this if SendNotificationPostsRaw is table 
    AFTER INSERT
    -- or write this if SendNotificationPostsRaw is view
    INSTEAD OF INSERT

    --FOR INSERT

AS BEGIN

    -- check if thete are any rows
    IF NOT EXISTS(
        SELECT 1 
        FROM INSERTED i
    ) RAISERROR('Nothing to insert', 16, 1)

    INSERT INTO dbo.SendNotificationPostsQueue 
    (
          UserID
        , PostID
        , SpecialityID
    )
    SELECT  
          I.PostID
        , I.UserID
        , P.CategoryID
    FROM INSERTED AS I
    JOIN PostCategoryRelations P ON I.PostID = P.PostId

END 
```

# crystal-reports - 水晶报表SetDataSource上的Appcrash

> ID：15951142
> 
> 赞同：1
> 
> 时间：2013-04-11T14:16:19.860
> 
> 标签：crystal-reports, report, crash

我正在使用安装了 Crystal Reports for .Net 的 Visual Studio 10。我的开发环境是一台装有 Windows 8 的 64 位电脑。在我的开发电脑上一切正常，但是当我在客户端电脑上安装应用程序时，我在报告类的 SetDataSource 上收到 Appcrash windows 错误。关于崩溃的唯一信息是 KernelBase.dll 是故障模块。当我查看 Windows 事件查看器时，它说有一个 filenotfoundexception，但没有给出它正在寻找的文件的名称。

客户端电脑是 32 位 windows 7 电脑。我在上面安装了最新的 32 位运行时文件。

你能帮我找出问题所在吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T13:31:30.880

有点晚了，但对于那些遇到这个常见问题的人。yourApp.exe.config 包含这一行

```
`<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup> 
```

将其更改为

```
<startup useLegacyV2RuntimeActivationPolicy="true"><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup> 
```

问题解决了

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-14T16:07:35.587

我知道这个线程很旧，但是在使用 Crystal Reports 将我的项目升级到 VS 2017 时遇到了类似的问题（kernelbase.dll 中的 appcrash）。在 SetDataSource 调用中遇到了崩溃。将该行添加到我的 app.config 文件中，问题就解决了。希望这可以帮助其他人，因为这个解决方案真的帮助了我！

# tfs - 有没有办法自定义 TFS 2012 看板中的工作项颜色？

> ID：15951145
> 
> 赞同：9
> 
> 时间：2013-04-11T14:16:24.970
> 
> 标签：tfs, azure-devops, kanban

我想使用颜色或图标来区分工作项类型（即产品待办事项与错误），以改善董事会的可视化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-11T13:22:49.437

在 TFS 2013 中是可能的。

1.  打开命令提示符
2.  cd %programfiles(x86)%\Microsoft Visual Studio 12.0\Common7\IDE
3.  witadmin exportprocessconfig /collection:your col. /p:项目 /f:文件
4.  编辑导出的文件，见下文
5.  witadmin importprocessconfig /collection:your col. /p:项目 /f:文件

流程配置应该包含一个部分工作项颜色，如果该部分丢失，只需添加它（例如，在 ProjectProcessConfiguration 结束之前的末尾）

```
<WorkItemColors>
 <WorkItemColor primary="FF009CCC" secondary="FFD6ECF2" name="Product Backlog Item" />
 <WorkItemColor primary="FFF2CB1D" secondary="FFF6F5D2" name="Task" />
 <WorkItemColor primary="FFCC293D" secondary="FFFAEAE5" name="Bug" />
</WorkItemColors> 
```

主要颜色用于列表，次要颜色用于板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-01T20:35:15.557

我有同样的问题。在过去的 7 个月左右的时间里，我构建了一个 chrome 插件，可以在业余时间做这个（以及更多）作为一个项目来学习 Javascript 并使我的日常工作更轻松。我们的团队和其他一些团队从不久前就开始使用它并取得了不错的效果。现在它以 TFS Kanban buddy 的名义在 Chrome 商店中免费提供。

[https://chrome.google.com/webstore/detail/tfs-kanban-buddy/bnkanimchogkpkjbabhoficohanbhalp](https://chrome.google.com/webstore/detail/tfs-kanban-buddy/bnkanimchogkpkjbabhoficohanbhalp)

如果有人想摆弄它，该代码也可以在 GitHub 上找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T23:14:15.940

不，没有非破解方法可以改变卡片的颜色。然而，据传此功能“在积压中”。

# mysql - 在 mysql 中检索随时间推移的运行总记录增长

> ID：15951146
> 
> 赞同：3
> 
> 时间：2013-04-11T14:16:26.607
> 
> 标签：mysql, count, cumulative-sum

我有一个 Drupal 站点，其中有一个跟踪用户的表。我想做的是随着时间的推移绘制会员增长图。所以我想按摩mysql返回这样的东西：

```
date | # of users (total who have registered up to the given date)
1/1/2014 | 0
1/2/2014 | 2
1/3/2014 | 10 
```

**其中“# of users”是截至给定日期注册帐户的用户总数（running-total）——而不是在特定日期注册的用户数**（检索起来很简单）。

`{users}`我表的每一行都有一个`uid`列、一个`name`列和一个`created`（时间戳）列。

因此，我`{users}`表中的示例记录将是：

```
name: John Smith
uid: 526
created: 1365844220 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T09:30:12.913

尝试：

```
select u.created, count(*)
from (select distinct date(created) created from `users`) u
join `users` u2 on u.created >= date(u2.created)
group by u.created 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!8/172c9/1)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T11:36:08.557

我最终使用了一个包含变量的解决方案，基于[此处](https://stackoverflow.com/questions/8359077/mysql-running-total-with-count)发布的 Stack Overflow 答案。该解决方案似乎比提供的其他答案更灵活、更高效。

```
 SELECT u.date,
  @running_total := @running_total + u.count AS count
  FROM (
    SELECT COUNT(*) AS count, DATE_FORMAT(FROM_UNIXTIME(created), '%b %d %Y') AS date
    FROM {users}
    WHERE created >= :start_time AND created <= :end_time
    GROUP BY YEAR(FROM_UNIXTIME(created)), MONTH(FROM_UNIXTIME(created)), DAY(FROM_UNIXTIME(created))
  ) u
  JOIN (
    SELECT @running_total := u2.starting_total
    FROM (
      SELECT COUNT(*) as starting_total
      FROM {users}
      WHERE created < :start_time
    ) u2
  ) initialize; 
```

请注意，分组依据、日期格式和范围要求只是我特定项目的具体细节。**该解决方案的更通用形式（根据原始问题）是：**

```
 SELECT u.date,
  @running_total := @running_total + u.count AS count
  FROM (
    SELECT COUNT(*) AS count, DATE(FROM_UNIXTIME(created)) AS date
    FROM {users}
    GROUP BY date
  ) u
  JOIN (
    SELECT @running_total := 0
  ) initialize; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:34:25.130

不知道表结构，所以根据您的需要调整查询

```
SELECT DATE(created), COUNT(*) AS Users FROM users GROUP BY DATE(created) 
```

当您只想显示注册用户添加的日期时

```
HAVING COUNT(*) > 0 
```

在查询的和

# java - 安装 Eclipse/ADT 之前在 Linux 上配置 Android SDK？

> ID：15951147
> 
> 赞同：0
> 
> 时间：2013-04-11T14:16:28.260
> 
> 标签：java, android, linux, sdk, adt

我阅读了[Lars Vogel 的 Android 开发教程](http://www.vogella.com/articles/Android/article.html)，然后直接前往[Android SDK 下载页面](http://developer.android.com/sdk/index.html)。

我已经安装了 Eclipse Java EE IDE（Juno；4.2），并且只想安装 Android SDK，然后安装 ADT Eclipse 插件，这样我就可以从现有的 Eclipse 实例开始工作。因此，我下载了 64 位 linux（我在 Ubuntu 上）“仅限 SDK”.tgz 并将其解压缩到我的`~/sandbox/android-sdk`目录中。

在我去安装 ADT 插件之前，我需要提前执行 SDK 的任何“设置”/配置步骤吗？如果是这样，是什么？我什至对这里的可选调优感兴趣。我之所以问，是因为上面引用的文章是针对 Windows 用户的，我发现的大多数其他教程也是如此。我担心 Windows SDK 提供的一些开箱即用的功能可能必须为我们 Linux 居民手动处理。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:19:17.247

根据我的经验，我相信答案是否定的，在安装 ADT 插件之前您不需要做任何其他事情。如果您愿意，您可以从其中打开 SDK 管理器`~/sandbox/android-sdk/tools/android`并安装一些 SDK，但没有理由不能在安装 ADT 后从 Eclipse 中执行此操作。

# c++ - 链接到 /clr DLL 时出现 C++ 链接器错误（未解决的外部）

> ID：15951162
> 
> 赞同：0
> 
> 时间：2013-04-11T14:17:37.317
> 
> 标签：c++, dll, linker, clr

我有一个打开 /clr 选项的 DLL。我的 DLL 中有以下声明：

```
int __declspec(dllexport) __cdecl  test(); 
```

另外，我有一个带有 /clr 选项的控制台。并在我的 main.cpp 文件中有以下声明：

```
int __declspec(dllimport) __cdecl  test(); 
```

我在控制台应用程序的属性设置中添加了对 DLL 项目的引用。但是我仍然从编译器那里得到关于测试功能的未解决的外部问题。

我设法通过手动添加对编译器生成的 lib 文件的引用来进行编译。但是后来我无法在 DLL 函数中打断点（它说源代码与原始版本不同或符号尚未加载......）

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:16:23.157

如果您的 DLL 不使用任何托管功能，只需`/clr`从该项目中删除该选项并重新编译。如果您仍然收到错误，则可能与控制台应用程序中的引用有关。

如果 DLL 使用托管功能，您需要的是这样的：

**动态链接库**：

```
#include "stdafx.h"

namespace Test1
{
    public ref class Test2
    {
        public:
            static int test()
            {
                return 1;
            }
    };
} 
```

**控制台应用程序**：

```
#include <iostream>

int main(int argc, char* argv[])
{
    int i = Test1::Test2::test();        
    std::cout << i << std::endl;
    return 0;

} 
```

# c - 高效的 Rice 解码实现

> ID：15951163
> 
> 赞同：1
> 
> 时间：2013-04-11T14:17:38.203
> 
> 标签：c, implementation, compression

我对[Rice](http://en.wikipedia.org/wiki/Golomb_coding)解码器（和编码器）做了一个简单的实现：

```
void rice_decode(int k) {
    int i = 0
    int j = 0;
    int x = 0;
    while(i < size-k) {
        int q = 0;
        while(get(i) == 0) {
            q++;
            i++;
        }
        x = q<<k;
        i++;
        for(j=0; j<k; j++) {
            x += get(i+j)<<j;
        }
        i += k;
        printf("%i\n", x);
        x = 0;
    }
} 
```

具有`size`输入位集的大小、`get(i)`返回位集的`i`第 - 位的原语以及`k`Rice 参数。由于我关心性能，我还使用预计算进行了更精细的实现，速度更快。然而，当我打开`-O3`标志时`gcc`，天真的实现实际上优于后者。

**我的问题是：**是否知道任何现有的 Rice 编码器/解码器（我更关心解码）的有效实现，它比这更好（我能找到的那些要么更慢，要么相当）？或者，您是否有任何聪明的想法可以使解码比预计算更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:43.337

There are some textbook bithacks applicable here.

`while (get(i) == 0) { q++; i++;}` finds the least significant bit set in a stream.

That can be replaced with `-data & data`, which returns a single bit set. That can be converted to index 'q' with some hash + LUT (e.g the one involving modulus with 37\. -- or using SSE4 instructions with crc32, I'd bet one can simply do `LUT[crc32(-data&data) & 63]`;

The next loop `for(j=0; j<k; j++) x += get(i+j)<<j;` OTOH should be replaced with `x+= data & ((1<<k)-1);` as one simply gets k bits from a stream and treats them as an unsigned integer.

Finally one shifts `data>>=(q+k);` and reads in enough bytes from input stream.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:20:44.127

赖斯编码可以看作是变[长编码的一种变体。](http://en.wikipedia.org/wiki/Variable-length_code)因此，在过去，我使用基于表的技术来生成自动机/状态机，这些机器可以快速解码固定的霍夫曼代码和水稻代码。在网络上快速搜索[快速可变长度代码](https://www.google.com/search?q=fast%20variable-length%20codes)或[快速霍夫曼](https://www.google.com/search?q=fast%20huffman)会产生许多适用的结果，其中一些是基于表格的。

# visual-studio-2012 - VS2012 创建发布包时出错：执行发布时出现异常访问路径被拒绝

> ID：15951164
> 
> 赞同：7
> 
> 时间：2013-04-11T14:17:39.793
> 
> 标签：visual-studio-2012, msbuild, msdeploy

我正在尝试使用 VS2012 发布应用程序，当我尝试制作包时，我收到一个错误，即拒绝访问路径。我已经检查并且我的用户完全控制并验证了路径。

VS 正在尝试访问那里的 .pubmxl 文件。

我也尝试过以管理员身份运行 VS2012。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T19:14:06.893

我遇到了同样的问题（[VS2012: Access to path is denied when execution publish](https://stackoverflow.com/questions/16528835/vs2012-access-to-path-is-denied-when-executing-publish)）并找到了一种允许 Visual Studio 访问文件的方法。

如果在 Visual Studio 中打开 pubxml 文件，进行编辑并保存文件，Visual Studio 就能够使用该文件成功发布。希望这对你也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T09:48:02.417

创建一个新的个人资料对我有用。当我尝试更改现有配置文件的路径时出现此错误，不幸的是我找不到原始 pubxml 文件，否则我只需将其复制到新位置并遵循建议 #1（编辑位置中的文件VS2012）。创建新配置文件很容易，因为无论如何设置都不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T16:30:12.737

我遇到过这个问题，我注意到这些文件是“只读的”。选择文件并删除“只读”属性使我能够成功发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T03:26:36.913

听起来 TFS 再次具有岩石功能。从本地仓库中删除发布配置文件，然后获取最新版本，那么你应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-23T21:29:33.903

我遇到了同样的问题，并通过删除我的发布配置文件并创建一个新配置文件来解决它。

# javascript - 如何解决十进制验证码中的错误？

> ID：15951171
> 
> 赞同：0
> 
> 时间：2013-04-11T14:17:57.247
> 
> 标签：javascript, regex, dom

它将用于 21.22 或 1.11 或其他东西.. 但错误是它允许数字前面的点并且它允许多个点，例如 123.2.2

```
<HTML>
<HEAD>
    <script type="text/Javascript">
function testNum(inval)
{
 var ex = /^\d*(?:\.\d{0,2})?$/;
 if(ex.test(inval.value)==false){
   inval.value = inval.value.substring(0,inval.value.length - 1);
  }
}
</script>  </HEAD>   <BODY>
 <input type="text" id="" onkeyup="testNum(this);" />
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:20:57.130

更改`\d*`为`\d+`(`+`相当于`{1,}`) 以确保您的点前至少有一位数字。

至于多点问题，不，它不匹配几个点。

此外，您可能希望将您的更改`\d{0,2}`为`\d{1,2}`，例如匹配 12\. 并没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:22:01.713

它似乎不允许我使用多个点，但这`\d*`意味着起始数字是（是）可选的。

```
/^\d+(?:\.\d{0,2})?$/ 
```

# c# - 属性更改时的 WPF 调用方法

> ID：15951173
> 
> 赞同：3
> 
> 时间：2013-04-11T14:18:01.257
> 
> 标签：c#, wpf, properties

在 C# 中，如何在属性发生变化时调用方法（方法和属性都属于同一个类）？

例如，

```
class BrowserViewModel
{
    #region Properties

    public List<TreeViewModel> Status { get; private set; }
    public string Conditions { get; private set; }

    #endregion // Properties

    // i'd like to call this method when Status gets updated
    void updateConditions
    {
         /* Conditions = something depending on the TreeViewItem select status */
    }
} 
```

捆绑

```
<TreeView Grid.Row="1"
    x:Name="StatusTree"
    ItemContainerStyle="{StaticResource TreeViewItemStyle}"
    ItemsSource="{Binding Path=Status, Mode=OneTime}"
    ItemTemplate="{StaticResource CheckBoxItemTemplate}"
/> 
```

**用例**（如果你好奇的话）

该属性`Status`绑定到`TreeView`xaml 中的控件。当它更新时，我想调用一个更新属性的方法`Conditions`。此属性绑定到`TextBox`xaml 中的 a。

我是 C# Eventing 的新手，所以有点迷茫。

## 编辑

1.  类`TreeViewModel`实现`INotifyPropertyChanged`。
2.  `Conditions`通过从 中获取`IsChecked`值来更新`TreeView`。
3.  状态列表的大小永远不会改变。When a TreeViewItem is selected/unselected the TreeViewModel changes.
4.  [TreeViewModel 源（此](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=28306)页面上的 FooViewModel ）
5.  上面的绑定代码。
6.  不必为`IsChecked`.

    ```
     <HierarchicalDataTemplate 
            x:Key="CheckBoxItemTemplate"
            ItemsSource="{Binding Children, Mode=OneTime}"
            >
                <StackPanel Orientation="Horizontal">
                <!-- These elements are bound to a TreeViewModel object. -->
                <CheckBox
                    Focusable="False" 
                    IsChecked="{Binding IsChecked}" 
                    VerticalAlignment="Center"
                    />
                <ContentPresenter 
                    Content="{Binding Name, Mode=OneTime}" 
                    Margin="2,0"
                    />
                </StackPanel>
        </HierarchicalDataTemplate> 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T14:25:24.640

我假设您想在列表中添加/删除/更改`updateConditions`时触发`item`，而不是列表引用本身发生更改时触发。

由于您在 TreeViewModel 中实现 INotifyPropertyChanged，我认为您需要使用`ObservableCollection<T>`而不是普通的`List<T>`. 在这里查看：http: [//msdn.microsoft.com/en-us/library/ms668604.aspx](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

> 表示一个动态数据集合，它在添加、删除项目或刷新整个列表时提供通知。

```
class BrowserViewModel
{
    #region Properties

    public ObservableCollection<TreeViewModel> Status { get; private set; }
    public string Conditions { get; private set; }

    #endregion // Properties

    // i'd like to call this method when Status gets updated
    void updateConditions
    {
         /* Conditions = something */
    }

    public BrowserViewModel()
    {
        Status = new ObservableCollection<TreeViewModel>();
        Status.CollectionChanged += (e, v) => updateConditions();
    }
} 
```

每当添加/删除/更改项目时，CollectionChanged 都会触发。据我所知，当它的引用发生变化或它的任何属性发生变化（通过 通知`INotifyPropertyChanged`）时，它会认为它“已更改”

刚刚在这里检查过：http: [//msdn.microsoft.com/en-us/library/ms653375.aspx](http://msdn.microsoft.com/en-us/library/ms653375.aspx)

> ObservableCollection.CollectionChanged 事件在添加、删除、更改、移动项目或刷新整个列表时发生。

`ObservableCollection<T>`驻留在`System.Collections.ObjectModel`名称空间中，在`System.dll`程序集中。

# php - 在数组中搜索元素并从中删除 php

> ID：15951174
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:18:03.620
> 
> 标签：php, arrays, search

我有`$days`下面这样的数组：

```
$days= array ("Monday 1 April 2013","Tuesday 2 April 2013","Wednesday 3 April"); 
```

我会搜索它以删除从星期一和星期日开始的每个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:21:12.053

您可以使用[preg_grep](http://php.net/preg_grep) () 来获取匹配正则表达式的数组元素。要获取与该表达式*不*匹配的元素，请将表达式[设为负前瞻](http://php.net/regexp.reference.assertions)( `?!`)：

```
$days = array ("Monday 1 April 2013", "Tuesday 2 April 2013", "Wednesday 3 April");
$result = preg_grep('/^(?!Monday|Sunday)/', $days);
print_r($result); 
```

结果是

```
Array
(
    [1] => Tuesday 2 April 2013
    [2] => Wednesday 3 April
) 
```

正则表达式的`^(?!Monday|Sunday)`意思是“查找任何出现的`^`（主题字符串的开头），其后没有出现“Monday”或“Sunday”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:21:18.020

```
$days = array_filter($days, function($el){
    return !(strpos($el, 'Monday') === 0 || strpos($el, 'Sunday') === 0);
}); 
```

[键盘示例](http://codepad.viper-7.com/MgwQmT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:27:37.747

```
$new_array=array();

$days= array ("Monday 1 April 2013","Tuesday 2 April 2013","Wednesday 3 April");

foreach($days as $key=>$val)
{

$words = explode(' ',$val);
    if($words[0]!='Monday' || $words[0]!='Sunday') 
{

$new_array[]=$val;

}

}    

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:22:32.840

尝试这个：

```
for($i=0;$i<count($days);$i++) {
    $words = explode(' ',$days[$i]);
    if($words[0]==='Monday' || $words[0]==='Sunday') unset($days[$i]);    
} 
```

# wpf - Validation.ErrorTemplate 大小

> ID：15951179
> 
> 赞同：3
> 
> 时间：2013-04-11T14:18:19.497
> 
> 标签：wpf, xaml, wpf-controls

我有以下控件模板，我将其`Validation.ErrorTemplate`用作 TextBoxes：-

```
<ControlTemplate x:Key="ControlValidationErrorTemplate">
  <DockPanel LastChildFill="True">
    <Border Background="Red"
            DockPanel.Dock="right"
            Padding="2,0,2,0"
            ToolTip="{Binding ElementName=valAdorner, Path=AdornedElement.(Validation.Errors), Converter={x:Static val:ValidationErrorsConverter.Instance}}">
      <TextBlock Text="!"
                 VerticalAlignment="center"
                 HorizontalAlignment="center"
                 FontWeight="Bold"
                 Foreground="white" />
    </Border>
    <AdornedElementPlaceholder x:Name="valAdorner"
                               VerticalAlignment="Center">
      <Border BorderBrush="red"
              BorderThickness="1" />
    </AdornedElementPlaceholder>
  </DockPanel>
</ControlTemplate> 
```

当 TextBox 包含无效内容时，上述模板应用红色边框，并在 TB 右侧立即添加一个包含感叹号的红色框。

问题是，感叹号与 TB 右侧的任何内容重叠，而不是更改布局以适应感叹号。我在 DataGrids 中遇到了类似的问题 - 感叹号与包含单元格的右侧边缘重叠，而不是增加列宽以适应它。

使用 Snoop，模板似乎显示在“装饰层”中，我认为这是一个单独的可视化树？这可以解释为什么不重新计算窗口的布局以考虑感叹号。任何人都可以提出一种方法来实现我想要的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:58:50.350

正如我所怀疑的，这是由于在装饰层上呈现了错误模板，因此它不会影响窗口的布局。请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9de3c9e5-5759-4f88-9184-175d3eaabdad/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9de3c9e5-5759-4f88-9184-175d3eaabdad/)

我现在改用这个控制模板：-

```
<ControlTemplate x:Key="ControlValidationErrorTemplate">
  <Grid>
    <Polygon Points="9,9 9,0 0,0"
             Stroke="Red"
             StrokeThickness="1"
             Fill="Red"
             HorizontalAlignment="Right"
             VerticalAlignment="Top"
             ToolTip="{Binding ElementName=valAdorner, Path=AdornedElement.(Validation.Errors), Converter={x:Static val:ValidationErrorsConverter.Instance}}" />
    <AdornedElementPlaceholder x:Name="valAdorner"
                               VerticalAlignment="Center">
      <Border BorderBrush="red"
              BorderThickness="1" />
    </AdornedElementPlaceholder>
  </Grid>
</ControlTemplate> 
```

这会在控件周围绘制一个红色边框，一个小的红色三角形与控件的右上角重叠 - 将鼠标悬停在该控件上会显示一个包含错误消息的工具提示。

# c# - 拉伸不适用于 WPF 模板化按钮

> ID：15951180
> 
> 赞同：4
> 
> 时间：2013-04-11T14:18:19.743
> 
> 标签：c#, wpf, xaml, templates, button

**我在 WPF 中创建了一个模板化按钮：**

```
<ControlTemplate TargetType="{x:Type Button}"
                 x:Key="BoutonGris">
  <Button  Foreground="White"
           BorderBrush="Transparent"
           HorizontalAlignment="Center"
           VerticalAlignment="Center"
           HorizontalContentAlignment="Stretch"
           VerticalContentAlignment="Stretch">
    <Button.Content>
      <Border CornerRadius="3"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">
        <ContentPresenter />
        <Border.Style>
          <Style TargetType="{x:Type Border}">
            <Setter Property="Background"
                    Value="#58585a" />
            <Style.Triggers>
              <Trigger Property="IsMouseOver"
                       Value="True">
                <Setter Property="Background"
                        Value="{DynamicResource DegradeCouleurTheme}" />
              </Trigger>
            </Style.Triggers>
          </Style>
        </Border.Style>
      </Border>
    </Button.Content>
    <Button.Style>
      <Style TargetType="{x:Type Button}">
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
              <ContentPresenter />
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
    </Button.Style>
  </Button>
</ControlTemplate> 
```

**我在我的窗口中使用这个按钮：**

```
<Button x:Name="BtnRestoreDefault" Template="{DynamicResource BoutonGris}" Content="Rest. défaut" Height="27"  Width="88" Click="Button_Click_RestoreDefault"/> 
```

我的问题是按钮似乎没有高度=“27”和宽度=“88”。

**这是我在 VS2012 中的结果：**

![](https://i.stack.imgur.com/wOnUJ.png)

按钮大小合适，但灰色区域没有。我在模板上使用了 Stretch 关键字，但没有发现错误。

如果我对 Horizo​​ntalAlignment、Horizo​​ntalContentAlignment、VerticalAlignment 和 VerticalContentAlignment 使用 Stretch，灰色的大小合适，但是文本内容在左/上！我想要一个中心文本。

有人有想法吗？

非常感谢，

此致，

尼克修斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T14:33:41.173

这应该可以解决问题。

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonGris">
    <Button  Foreground="White" BorderBrush="Transparent" 
             HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
             HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" >
        <Button.Content>
            <!-- A lot of your code -->
        </Button.Content>
        <!-- A lot of your code -->
    </Button>
</ControlTemplate> 
```

一个问题，为什么你`Button`的`ControlTemplate`for a 中有 a `Button`？通常，我希望像`Border`这里这样的简单控件，因为您想重新实现视觉外观。

**编辑**

其中之一`ContentPresenter`应该这样声明。

```
<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/> 
```

我不确定是哪一个。但你可以同时尝试。;o)

# c# - 在 C# 中安装期间出现 sqlconnection 错误

> ID：15951181
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:18:20.727
> 
> 标签：c#, sqlconnection

我创建了一个软件，它在 Visual Studio 中运行良好。但是当我将它部署在任何计算机上时，它在尝试连接到数据库时会出现以下错误：-

```
************** Exception Text **************
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at System.Data.SqlClient.SqlConnection.PermissionDemand()
   at System.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.Common.DbDataAdapter.QuietOpen(IDbConnection connection, ConnectionState& originalState)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
   at DentalGood.frmLogin.startLogin() in E:\PRGS\DentalGood\DentalGood\frmLogin.cs:line 28
   at KryptonForm.frmMain.btnLogin_Click(Object sender, EventArgs e) in E:\PRGS\DentalGood\DentalGood\frmMain.cs:line 216
   at ComponentFactory.Krypton.Ribbon.KryptonRibbonGroupButton.OnClick(EventHandler finishDelegate)
   at ComponentFactory.Krypton.Ribbon.KryptonRibbonGroupButton.PerformClick(EventHandler finishDelegate)
   at a5.d(Object A_0, EventArgs A_1)
   at eq.b(Object A_0, EventArgs A_1)
   at ek.b(EventArgs A_0)
   at ek.a(Control A_0, Point A_1, MouseButtons A_2)
   at ComponentFactory.Krypton.Toolkit.ToolTipController.MouseUp(Control c, Point pt, MouseButtons button)
   at ComponentFactory.Krypton.Toolkit.ViewBase.MouseUp(Point pt, MouseButtons button)
   at ComponentFactory.Krypton.Toolkit.ViewBase.MouseUp(Point pt, MouseButtons button)
   at ComponentFactory.Krypton.Toolkit.ViewBase.MouseUp(Point pt, MouseButtons button)
   at ComponentFactory.Krypton.Toolkit.ViewBase.MouseUp(Point pt, MouseButtons button)
   at ComponentFactory.Krypton.Toolkit.ViewManager.MouseUp(MouseEventArgs e, Point rawPt)
   at ComponentFactory.Krypton.Toolkit.ViewControl.OnMouseUp(MouseEventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at ComponentFactory.Krypton.Toolkit.ViewControl.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.6400 (Win8RTMGDR.050727-6400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll 
```

已经在 program.cs 文件中初始化了 ConnectionString。它将连接字符串存储在一个文件中，并在需要连接时加载它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:58:26.313

首先，从字符串中排除服务器的名称。改为键入点 (.)。这意味着您连接到安装在 localhost 上的 sql server。它将为您提供测试应用程序连接字符串的机会。

其次，您不能将连接字符串存储在文件中，而是在程序代码中生成它。您可以键入类似的内容（不在 Program.cs 中）：

```
 public Form2()
    {
        InitializeComponent();
        conn = "";
    }

  private void btnOK_Click(object sender, EventArgs e)
    {
         conn = CreateConn(conn, comboBox1.Text);
         SqlConnection connect = new SqlConnection(conn);
         MessageBox.Show(connect.ConnectionString.ToString());
    }
    public static string CreateConn(string connectString, string param)
    {
        connectString = String.Format("Data Source={0};Initial Catalog=db_Raspisanie;Integrated Security=True", 
            param);
        return connectString;
    } 
```

**UPD2。***在 ComboBox1 属性 SelectedText 中，您可以编写（本地），如果他在存储数据库的本地服务器上工作，这将为用户提供不必每次都键入服务器名称的机会。*

这是一个非常简单的方法，`MessabeBox.Show`它会向您显示您获得的连接字符串。

**UPD。**

如果您需要将其存储在文件中（为此我使用 .txt），您可以使用以下代码：

```
 /*Code of Form2, which is Login like*/
  public static string conn;
    private void Form2_Load(object sender, EventArgs e)
    {

    }

    private void btnOK_Click(object sender, EventArgs e)
    {
         conn = CreateConn(conn);
         SqlConnection connect = new SqlConnection(conn);

         //MessageBox.Show(connect.ConnectionString.ToString());

         Form1 fr = new Form1();
         fr.ShowDialog();
    }
      public static string CreateConn(string connectString)
    {
        string fileName = Application.StartupPath + "\\string.txt";
        FileStream fs = new FileStream(fileName, FileMode.Open);
        StreamReader strem = new StreamReader(fs);
        conn = strem.ReadLine();
        connectString = conn;
        strem.Close(); fs.Close();

        return connectString;
    }

       /*Code of Form1 which is main form*/

 public Form1()
    {
        InitializeComponent();
        string param = "";
        param = Form2.conn;
         con = new SqlConnection(param);
    }
    SqlConnection con;
    SqlDataAdapter da;
    DataSet ds;
    private void Form1_Load(object sender, EventArgs e)
    {
        da = new SqlDataAdapter("Select * from Table1", con);
        ds = new DataSet();
        da.Fill(ds, "Table1");
        dataGridView1.DataSource = ds.Tables["Table1"];

    } 
```

.txt 文件的内容与您编写的相同：

```
 Server=.;database=db_Raspisanie;trusted_connection=true 
```

似乎是我根据需要包含了所有内容。如果它给出例外，请写，我测试过，但可能是。

# linux - 将 cron 设置为 5 分 30 秒

> ID：15951185
> 
> 赞同：0
> 
> 时间：2013-04-11T14:18:29.893
> 
> 标签：linux, cron, crontab

嘿，我得到了每 5 分钟运行一次的 crontab，它看起来像这样

```
*/5    *       *       *       *       blablalba 
```

我怎样才能让它每 5 分 30 秒运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:29:14.540

不要使用 Cron，而是让您的脚本使用它作为最后一行重新启动自己：

```
echo /path/to/script | at now + 330 seconds 
```

或者在时间上更“精确”：计算运行脚本所花费的秒数，并将其从 330 秒（500 万和 30 秒）中取出：

```
#beginning of script
seconds_at_start=$(date +%s)
....
#end of script
seconds_at_end=$(date +%s)
nb_seconds=$((330 + seconds_at_start  -  seconds_at_end))
echo /path/to/script | at now + $nb_seconds seconds 
```

注意：您可能希望使用`bc`计算部分来避免遇到奇怪的行为，以防您的 shell 版本无法处理与`date +%s`...

如果您的 at 版本不允许“现在 + XX 秒”，那么您可以：

```
compute the number of seconds the script ran for
compute how many seconds to sleep (  sleep N ) to reach the next minute
and then : echo /path/to/script | at now + X minute 
```

# symfony - 在服务器上找不到类，在本地运行良好

> ID：15951187
> 
> 赞同：1
> 
> 时间：2013-04-11T14:18:34.050
> 
> 标签：symfony, capifony

我正在使用 symfony2.1、github 和 capfony（用于部署）

当我开始这个项目时，这些组合效果很好。

但是，由于我将 SonataUserBundle 和 FOSUserbundle 添加到项目中

> 帽部署

命令返回错误，例如

> PHP 致命错误：在第 26 行的 /var/www/html/muty/releases/20130410144941/app/AppKernel.php 中找不到类 'Sonata\AdminBundle\SonataAdminBundle'

但我在这里有 SonataAdminBundle。

[应用程序名称]/vendor/sonata-project/admin-bundle/Sonata/AdminBundle 和 AppKernel.php

```
public function registerBundles()
{
    $bundles = array(
     .....
        new Sonata\AdminBundle\SonataAdminBundle(),
        new Sonata\CacheBundle\SonataCacheBundle(),
        new Sonata\BlockBundle\SonataBlockBundle(),
        new Sonata\jQueryBundle\SonatajQueryBundle(),
        new Knp\Bundle\MenuBundle\KnpMenuBundle(),
        new Sonata\DoctrineORMAdminBundle\SonataDoctrineORMAdminBundle(),
        new FOS\UserBundle\FOSUserBundle(),
    .....
    );
} 
```

这些结构在本地运行良好，但无法部署

我使用作曲家而不是供应商。

恕我直言，似乎供应商文件夹未正确部署，我正确吗？或者还有其他地方可以检查吗？请给我一些想法！

多谢

我的 deploy.rb 是

```
set :application, "myapplication"
set :domain,      "myapplication"
set :deploy_to,   "/var/www/html/myapplication"
set :app_path,    "app"

set :repository,  "git@github.com:myname/myapplication.git"
set :scm,         :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, or `none`

set :default_shell,         "TERM=dumb sudo -u app /bin/sh"
set :branch, "master"
set :scm_username, "myname"
set :scm_passphrase, "mypass"
set   :use_sudo,      false
set :user, 'app'
set :model_manager, "doctrine"
# Or: `propel`

role :web,        "49.212.***.***"                         # Your HTTP server, Apache/etc
role :app,        "49.212.***.***"                         # This may be the same as your     `Web` server
role :db,         "49.212.***.***", :primary => true       # This is where Symfony2     migrations will run

set  :keep_releases,  3
set :clear_controllers,     false #app_dev.php should be deployed
#set :shared_files,        ["app/config/parameters.yml"]
#set :shared_children,     [app_path + "/logs", web_path + "/uploads"]

set :use_composer, true
set :update_vendors, true
set :deploy_via,            :remote_cache

set :writable_dirs,       ["app/cache", "app/logs"]
set :permission_method,   :chown #
set :use_set_permissions, false

# Be more verbose by uncommenting the following line
logger.level = Logger::MAX_LEVEL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:55:15.037

我认为问题是`SonataAdminBundle`在作曲家尝试与您的应用程序交互（很可能是预热缓存）时没有安装它，这会触发错误。

首先要尝试的是添加`vendor`到`shared_children`，如下所示：

> 设置 :shared_children, [app_path + "/logs", web_path + "/uploads", "vendor"]

其次，每次部署时更新供应商可能不是一个好主意（并且实际上可能由于不兼容的依赖项而导致问题）：

> 设置：update_vendors，假

如果这两个都失败，请尝试从头开始部署到新文件夹（使用上述设置）并查看它是否引发任何错误。

# node.js - 在客户端（但不在服务器上）重新定义 `require` 以进行代码共享

> ID：15951195
> 
> 赞同：0
> 
> 时间：2013-04-11T14:19:02.090
> 
> 标签：node.js, include, express, coffeescript

我想在 Express 上的服务器和客户端之间共享一段咖啡脚本代码。我将服务器目录中的文件链接到`/public`目录中，以便客户端可以加载它。它确实具有外部依赖项，我为客户端静态解析。为了在客户端尝试调用时删除错误消息`require`，我认为一个简单的条件声明就可以了。

```
console.log require
unless require?
  require = (what) ->
    console.info "this is the client, you asked me to load #{what}"
    return {} 
```

但是，当在服务器上运行时，`undefined`将被打印并被`require`覆盖。嵌入式 Javascript 也是如此：

```
`if( typeof require == "undefined" )
  var require = function(what) {
    console.info( "this is the client, you asked me to load "+what );
    return {};
  }
` 
```

如果我只运行：

```
console.log require 
```

在服务器上，它按预期打印一个对象结构。似乎`require`至少在评估并执行了条件之后才注入。

我怎样才能`require`安全地覆盖，或者我可以使用什么其他范例在客户端和服务器之间共享代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:08:53.200

我建议使用[browserify](http://browserify.org/)在客户端和服务器之间共享代码。它允许您像编写服务器一样遵循通用 js 模式编写 javascript，但提供了一种机制来为客户端构建模块，其中**require()**在浏览器中工作。

**通过转换**过程 ，browserify 支持 CoffeeScript 。[Coffeeify](https://github.com/substack/coffeeify)是 CoffeeScript 转换实现的一种实现。

# sharepoint-2010 - Sharepoint 2010 蓝丝带标签

> ID：15951198
> 
> 赞同：1
> 
> 时间：2013-04-11T14:19:09.453
> 
> 标签：sharepoint-2010, sharepoint-designer

我在 Sharepoint 2010 中创建了新的母版页，但我错误地错过了 Blue Ribbon。我已经尝试了各种方法来取回那个蓝丝带，有人可以给我准确且唯一的 Sharepoint 2010 蓝丝带代码示例。

我从 v4.master 复制/过去了以下代码，但仍然无法正常工作：

```
<div id="s4-ribbonrow" class="s4-pr s4-ribbonrowhidetitle">
    <div id="s4-ribboncont">
        <SharePoint:SPRibbon
            runat="server"
            PlaceholderElementId="RibbonContainer"
            CssFile="">
            <SharePoint:SPRibbonPeripheralContent
                runat="server"
                Location="TabRowLeft"
                CssClass="ms-siteactionscontainer s4-notdlg">
                       <span class="ms-siteactionsmenu" id="siteactiontd">
                       <SharePoint:SiteActions runat="server" accesskey="<%$Resources:wss,tb_SiteActions_AK%>" id="SiteActionsMenuMain"
                        PrefixHtml=""
                        SuffixHtml=""
                        MenuNotVisibleHtml="&amp;nbsp;"
                        >
                        <CustomTemplate>
                        <SharePoint:FeatureMenuTemplate runat="server"
                            FeatureScope="Site"
                            Location="Microsoft.SharePoint.StandardMenu"
                            GroupId="SiteActions"
                            UseShortId="true"
                            >
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_EditPage"
                                Text="<%$Resources:wss,siteactions_editpage%>"
                                Description="<%$Resources:wss,siteactions_editpagedescriptionv4%>"
                                ImageUrl="/_layouts/images/ActionsEditPage.png"
                                MenuGroupId="100"
                                Sequence="110"
                                ClientOnClickNavigateUrl="javascript:ChangeLayoutMode(false);"
                                />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_TakeOffline"
                                Text="<%$Resources:wss,siteactions_takeoffline%>"
                                Description="<%$Resources:wss,siteactions_takeofflinedescription%>"
                                ImageUrl="/_layouts/images/connecttospworkspace32.png"
                                MenuGroupId="100"
                                Sequence="120"
                                />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_CreatePage"
                                Text="<%$Resources:wss,siteactions_createpage%>"
                                Description="<%$Resources:wss,siteactions_createpagedesc%>"
                                ImageUrl="/_layouts/images/NewContentPageHH.png"
                                MenuGroupId="200"
                                Sequence="210"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="if (LaunchCreateHandler('Page')) { OpenCreateWebPageDialog('~site/_layouts/createwebpage.aspx') }"
                                PermissionsString="AddListItems, EditListItems"
                                PermissionMode="All" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_CreateDocLib"
                                Text="<%$Resources:wss,siteactions_createdoclib%>"
                                Description="<%$Resources:wss,siteactions_createdoclibdesc%>"
                                ImageUrl="/_layouts/images/NewDocLibHH.png"
                                MenuGroupId="200"
                                Sequence="220"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="if (LaunchCreateHandler('DocLib')) { GoToPage('~site/_layouts/new.aspx?FeatureId={00bfea71-e717-4e80-aa17-d0c71b360101}&amp;ListTemplate=101') }"
                                PermissionsString="ManageLists"
                                PermissionMode="Any"
                                VisibilityFeatureId="00BFEA71-E717-4E80-AA17-D0C71B360101" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_CreateSite"
                                Text="<%$Resources:wss,siteactions_createsite%>"
                                Description="<%$Resources:wss,siteactions_createsitedesc%>"
                                ImageUrl="/_layouts/images/newweb32.png"
                                MenuGroupId="200"
                                Sequence="230"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="if (LaunchCreateHandler('Site')) { STSNavigate('~site/_layouts/newsbweb.aspx') }"
                                PermissionsString="ManageSubwebs,ViewFormPages"
                                PermissionMode="All" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_Create"
                                Text="<%$Resources:wss,siteactions_create%>"
                                Description="<%$Resources:wss,siteactions_createdesc%>"
                                MenuGroupId="200"
                                Sequence="240"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="if (LaunchCreateHandler('All')) { STSNavigate('~site/_layouts/create.aspx') }"
                                PermissionsString="ManageLists, ManageSubwebs"
                                PermissionMode="Any" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_ViewAllSiteContents"
                                Text="<%$Resources:wss,quiklnch_allcontent%>"
                                Description="<%$Resources:wss,siteactions_allcontentdescription%>"
                                ImageUrl="/_layouts/images/allcontent32.png"
                                MenuGroupId="300"
                                Sequence="302"
                                UseShortId="true"
                                ClientOnClickNavigateUrl="~site/_layouts/viewlsts.aspx"
                                PermissionsString="ViewFormPages"
                                PermissionMode="Any" />
                             <SharePoint:MenuItemTemplate runat="server" id="MenuItem_EditSite"
                                Text="<%$Resources:wss,siteactions_editsite%>"
                                Description="<%$Resources:wss,siteactions_editsitedescription%>"
                                ImageUrl="/_layouts/images/SharePointDesigner32.png"
                                MenuGroupId="300"
                                Sequence="304"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="EditInSPD('~site/',true);"
                                PermissionsString="AddAndCustomizePages"
                                PermissionMode="Any"
                            />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_SitePermissions"
                                Text="<%$Resources:wss,people_sitepermissions%>"
                                Description="<%$Resources:wss,siteactions_sitepermissiondescriptionv4%>"
                                ImageUrl="/_layouts/images/Permissions32.png"
                                MenuGroupId="300"
                                Sequence="310"
                                UseShortId="true"
                                ClientOnClickNavigateUrl="~site/_layouts/user.aspx"
                                PermissionsString="EnumeratePermissions"
                                PermissionMode="Any" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_Settings"
                                Text="<%$Resources:wss,settings_pagetitle%>"
                                Description="<%$Resources:wss,siteactions_sitesettingsdescriptionv4%>"
                                ImageUrl="/_layouts/images/settingsIcon.png"
                                MenuGroupId="300"
                                Sequence="320"
                                UseShortId="true"
                                ClientOnClickNavigateUrl="~site/_layouts/settings.aspx"
                                PermissionsString="EnumeratePermissions,ManageWeb,ManageSubwebs,AddAndCustomizePages,ApplyThemeAndBorder,ManageAlerts,ManageLists,ViewUsageData"
                                PermissionMode="Any" />
                            <SharePoint:MenuItemTemplate runat="server" id="MenuItem_CommitNewUI"
                                Text="<%$Resources:wss,siteactions_commitnewui%>"
                                Description="<%$Resources:wss,siteactions_commitnewuidescription%>"
                                ImageUrl="/_layouts/images/visualupgradehh.png"
                                MenuGroupId="300"
                                Sequence="330"
                                UseShortId="true"
                                ClientOnClickScriptContainingPrefixedUrl="GoToPage('~site/_layouts/prjsetng.aspx')"
                                PermissionsString="ManageWeb"
                                PermissionMode="Any"
                                ShowOnlyIfUIVersionConfigurationEnabled="true" />
                        </SharePoint:FeatureMenuTemplate>
                        </CustomTemplate>
                      </SharePoint:SiteActions></span>
                <asp:ContentPlaceHolder id="PlaceHolderGlobalNavigation" runat="server">
                        <SharePoint:PopoutMenu
                            runat="server"
                            ID="GlobalBreadCrumbNavPopout"
                            IconUrl="/_layouts/images/fgimg.png"
                            IconAlt="<%$Resources:wss,master_breadcrumbIconAlt%>"
                            IconOffsetX=0
                            IconOffsetY=112
                            IconWidth=16
                            IconHeight=16
                            AnchorCss="s4-breadcrumb-anchor"
                            AnchorOpenCss="s4-breadcrumb-anchor-open"
                            MenuCss="s4-breadcrumb-menu">
                            <div class="s4-breadcrumb-top">
                                <asp:Label runat="server" CssClass="s4-breadcrumb-header" Text="<%$Resources:wss,master_breadcrumbHeader%>" />
                            </div>
                            <asp:ContentPlaceHolder id="PlaceHolderTitleBreadcrumb" runat="server">
                                <SharePoint:ListSiteMapPath
                                    runat="server"
                                    SiteMapProviders="SPSiteMapProvider,SPContentMapProvider"
                                    RenderCurrentNodeAsLink="false"
                                    PathSeparator=""
                                    CssClass="s4-breadcrumb"
                                    NodeStyle-CssClass="s4-breadcrumbNode"
                                    CurrentNodeStyle-CssClass="s4-breadcrumbCurrentNode"
                                    RootNodeStyle-CssClass="s4-breadcrumbRootNode"
                                    NodeImageOffsetX=0
                                    NodeImageOffsetY=353
                                    NodeImageWidth=16
                                    NodeImageHeight=16
                                    NodeImageUrl="/_layouts/images/fgimg.png"
                                    RTLNodeImageOffsetX=0
                                    RTLNodeImageOffsetY=376
                                    RTLNodeImageWidth=16
                                    RTLNodeImageHeight=16
                                    RTLNodeImageUrl="/_layouts/images/fgimg.png"
                                    HideInteriorRootNodes="true"
                                    SkipLinkText="" />
                                </asp:ContentPlaceHolder>
                        </SharePoint:PopoutMenu>
                        <div class="s4-die">
                            <asp:ContentPlaceHolder id="PlaceHolderGlobalNavigationSiteMap" runat="server" Visible="false">
                            </asp:ContentPlaceHolder>
                        </div>
                </asp:ContentPlaceHolder>
                <SharePoint:PageStateActionButton id="PageStateActionButton" runat="server" Visible="false" />
            </SharePoint:SPRibbonPeripheralContent>
            <SharePoint:SPRibbonPeripheralContent
                runat="server"
                Location="TabRowRight"
                ID="RibbonTabRowRight"
                CssClass="s4-trc-container s4-notdlg">
    <SharePoint:DelegateControl runat="server" ID="GlobalDelegate0" ControlId="GlobalSiteLink0" />
     <a href="#" tabindex="-1" style="display:none"></a><a href="#" tabindex="-1" style="display:none"></a>
     <div class="s4-trc-container-menu">
         <div>
            <wssuc:Welcome id="IdWelcome" runat="server" EnableViewState="false">
            </wssuc:Welcome>
            <wssuc:MUISelector ID="IdMuiSelector" runat="server"/>
        </div>
    </div>
    <SharePoint:DelegateControl ControlId="GlobalSiteLink2" ID="GlobalDelegate2" Scope="Farm" runat="server" />
    <span>
        <span class="s4-devdashboard">
            <Sharepoint:DeveloperDashboardLauncher
                ID="DeveloperDashboardLauncher"
                NavigateUrl="javascript:ToggleDeveloperDashboard()"
                runat="server"
                ImageUrl="/_layouts/images/fgimg.png"
                Text="<%$Resources:wss,multipages_launchdevdashalt_text%>"
                OffsetX=0
                OffsetY=222
                Height=16
                Width=16 />
        </span>
    </span>
            </SharePoint:SPRibbonPeripheralContent>
        </SharePoint:SPRibbon>
    </div>
    <div id="notificationArea" class="s4-noti">
    </div>
    <asp:ContentPlaceHolder ID="SPNavigation" runat="server">
            <SharePoint:DelegateControl runat="server" ControlId="PublishingConsole" Id="PublishingConsoleDelegate">
           </SharePoint:DelegateControl>
    </asp:ContentPlaceHolder>
    <div id="WebPartAdderUpdatePanelContainer">
        <asp:UpdatePanel
            ID="WebPartAdderUpdatePanel"
            UpdateMode="Conditional"
            ChildrenAsTriggers="false"
            runat="server">
            <ContentTemplate>
                <WebPartPages:WebPartAdder ID="WebPartAdder" runat="server"/>
            </ContentTemplate>
            <Triggers>
                <asp:PostBackTrigger ControlID="WebPartAdder" />
            </Triggers>
        </asp:UpdatePanel>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:21:10.520

给你，这应该是功能区：

功能区行可以在您的 Masterpage 的 css 文件中找到：类/ID 是 'body #s4-ribbonrow'

默认 CSS 为：
min-height:43px；
背景颜色：#21374c；

只需更换 bgColour 就可以了。

# php - API Youtube，如何获得喜欢和不喜欢

> ID：15951199
> 
> 赞同：6
> 
> 时间：2013-04-11T14:19:11.417
> 
> 标签：php, api, youtube, google-api, youtube-api

在一个网站上，我使用 API Youtube 和 ZendGdata 来检索用户的所有视频，并使用视频和他的信息创建网页。

现在我需要在我的网站上添加一个喜欢或不喜欢视频的系统，我需要检索喜欢和不喜欢的数量。

（是的，这里有2个问题^^）

所以，我检索例如标题`$videoEntry->getVideoTitle();`，查看次数，`$videoEntry->getVideoViewCount();`但我如何检索喜欢/不喜欢的数量？

以及如何在我的网站上为视频投票？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T14:50:57.830

如果您查看`videos`YouTube 3.0 API 中的资源，其中包含的值包括：

*   `likeCount`
*   `dislikeCount`

此处的完整详细信息：[https ://developers.google.com/youtube/v3/docs/videos](https://developers.google.com/youtube/v3/docs/videos)

如果您使用的是 YouTube 2.0 API，请查看`<yt:rating>`包含以下字段的标签：

*   `numLikes`
*   `numDislikes`

更多信息在这里：[https ://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:rating](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:rating)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-12-03T04:41:57.780

Cormac 答案的更新是 youtube 将删除它，您只能自己使用它。

```
注意：statistics.dislikeCount 属性将于 2021 年 12 月 13 日设为私有。这意味着只有在 API 请求经过视频所有者身份验证后，该属性才会包含在 API 响应中。有关详细信息，请参阅修订历史记录。

```

# arrays - MsgBox 中的多行值

> ID：15951205
> 
> 赞同：0
> 
> 时间：2013-04-11T14:19:22.450
> 
> 标签：arrays, ms-access, vb6, vba

如何在一个 msgbox 中检索存储在 vSum 变量多行中的值，在多个 msgbox 中逐个检索

```
Dim rSEL, rSUM, rDes As DAO.Recordset
Dim vItem_id, vQnty, vSum As Integer
Dim vDes As String
If Not IsNull(itemId) And Not IsNull(qnty_in) Then
    If qnty_in <= 0 Or qnty_in > balance Or IsNull(balance) Then
        Cancel = True
    End If
    Set rSEL = CurrentDb.OpenRecordset("SELECT item_id,item_qnty 
               FROM basketQnty_tbl WHERE basket_id=" & basketId)
    'Check to see if the recordset actually contains rows
    If Not (rSEL.EOF And rSEL.BOF) Then
    rSEL.MoveFirst
    Do Until rSEL.EOF
        'Save itemId into a variable
        vItem_id = rSEL!item_id
        vQnty = (rSEL!item_qnty) * qnty_in
        Set rSUM = CurrentDb.OpenRecordset("SELECT sum(qnty_in*qnty_type) 
                   as QN FROM sales_tbl WHERE itemid=" & vItem_id)
        Set rDes = CurrentDb.OpenRecordset("SELECT itemDesc 
                   FROM items_main WHERE itemId=" & vItem_id)
        vSum = rSUM!QN
        vDes = rDes!itemDesc
        'Move to the next record. Don't ever forget to do this.
        If vQnty > vSum Then
            MsgBox "you have only (" & vSum & " ) of Item (" & vDes & " ) in the stock"
            Cancel = True
        End If
    rSEL.MoveNext
    Loop
    End If
   rSEL.Close
End If 
```

我该如何解决？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:08:01.400

创建一个数组变量来保存所有的消息字符串。让它比你需要的大，然后 Redim Preserve 在你知道你有多少条消息后将它减小到适当的大小。最后，使用 Join 将所有消息显示在一个 MsgBox 中。这是一个例子。

```
Dim rSEL, rSUM, rDes As DAO.Recordset
Dim vItem_id, vQnty, vSum As Integer
Dim vDes As String
Dim aMsg() As String
Dim lCnt As Long

If Not IsNull(itemId) And Not IsNull(qnty_in) Then

    If qnty_in <= 0 Or qnty_in > balance Or IsNull(balance) Then
        Cancel = True
    End If

    Set rSEL = CurrentDb.OpenRecordset("SELECT item_id,item_qnty FROM basketQnty_tbl WHERE basket_id=" & basketId)
    'Check to see if the recordset actually contains rows
    If Not (rSEL.EOF And rSEL.BOF) Then
        rSEL.MoveFirst

        ReDim aMsg(1 To rSEL.RecordCount * 10) 'make it bigger than you'll need

        Do Until rSEL.EOF
            'Save itemId into a variable
            vItem_id = rSEL!item_id
            vQnty = (rSEL!item_qnty) * qnty_in
            Set rSUM = CurrentDb.OpenRecordset("SELECT sum(qnty_in*qnty_type) as QN FROM sales_tbl WHERE itemid=" & vItem_id)
            Set rDes = CurrentDb.OpenRecordset("SELECT itemDesc FROM items_main WHERE itemId=" & vItem_id)
            vSum = rSUM!QN
            vDes = rDes!itemDesc
            'Move to the next record. Don't ever forget to do this.
            If vQnty > vSum Then
                lCnt = lCnt + 1
                aMsg(lCnt) = "you have only (" & vSum & " ) of Item (" & vDes & " ) in the stock"
            End If
           rSEL.MoveNext
        Loop
        If lCnt >= 1 Then
            ReDim Preserve aMsg(1 To lCnt)
            MsgBox Join(aMsg, vbNewLine)
            Cancel = True
        End If
    End If
   rSEL.Close

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:26:46.363

您可以使用 a`StringBuilder`来构造生成的消息。这比串联字符串更高效，因为`StringBuilder`有一个高效的内存管理，即它不会在每次字符串操作后分配新的内存；相反，它与内部缓冲区一起使用。

```
Dim sb As StringBuilder

sb = New StringBuilder()

...
Do Until rSEL.EOF
    ....
    sb.Append("you have only (") _
      .Append(vSum) _
      .Append(" ) of Item (") _
      .Append(vDes) _
      .AppendLine(" ) in the stock")
    rSEL.MoveNext
Loop
MsgBox sb.ToString() 
```

* * *

或者，您可以将字符串生成器与`String.Format`

```
...
Do Until rSEL.EOF
    ....
    sb.AppendLine( _
        String.Format("you have only ({0} ) of Item ({1} ) in the stock", vSum, vDes) _
    )
    rSEL.MoveNext
Loop
MsgBox sb.ToString() 
```

这更容易阅读。

或者更简单：

```
 ...
    sb.AppendFormat("you have only ({0} ) of Item ({1} ) in the stock", vSum, vDes) _
      .AppendLine()
    ... 
```

# vb.net - 如何在 VB 中为电子邮件正文硬编码 HTML？

> ID：15951208
> 
> 赞同：0
> 
> 时间：2013-04-11T14:19:45.373
> 
> 标签：vb.net, html-email

对不起，如果这个标题不是很容易理解的要点。这是我的第一篇文章。

基本上在我的程序中是发送电子邮件的选项。它是电子客票。我已将“IsBodyHtml”设置为 true。它发送它很好。完全没有问题。

但是，在 HTML 代码中，我想插入一些与每个客户相关的字段。

当我将设置设置`ETicket.Body =`为 HTML 代码时，我得到了许多错误，因为诸如“宽度”和“高度”等词被作为 VB 词拾取。

作为一个短期修复，所以我可以测试 HTML 正文是否确实有效，我将代码放入富文本框中，然后设置`ETicket.Body = RichTextBox1.Text`. 它有效，但其中没有我想要的数据。

与每个客户相关的数据保存在一个数组中。知道如何让 VB 接受 HTML 代码吗？或者如何将数组中的数据放入富文本框中的相关位置？

谢谢！

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:23:09.703

这可能是由于 HMTL 标记中的双引号引起的。尝试在 HTML 上进行查找和替换，并将双引号 (") 替换为单引号 (')。

# bash - 如何使 bash 脚本可移植？

> ID：15951210
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:19:47.747
> 
> 标签：bash, portability

我编写了一个依赖于当前文件夹结构的 bash 脚本，我应该怎么做才能使它在任何其他文件夹中运行（变得可移植）？让我解释一下：我希望脚本删除当前正在运行的脚本目录中的所有文件，或者删除父文件夹中的所有文件，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:48:48.040

我们需要更多信息来为您提供正确的答案...但是如果您需要使其可移植，一些提示是将您需要的任何文件存储在网络共享上，然后简单地制作一个新文件夹`/`，`/temporaryScriptFolder/`然后挂载网络共享到那个空文件夹，让您可以轻松访问任何必要的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:04:37.443

不要在脚本中使用绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:01:41.270

```
cd "$(dirname "$0")" 
```

将此添加到脚本的顶部以将其添加到`cd`安装脚本的目录中。然后您可以使用相对路径，它们将相对于脚本目录而不是用户的`pwd`.

如果由于某种原因`dirname`不可用，这里有一个等效的语句来`basename`代替。

```
cd "${0%%/$(basename "$0")}" 
```

# jquery - 加载网站时如何单击按钮

> ID：15951211
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:19:53.417
> 
> 标签：jquery

PHP：

```
<script type="text/javascript" src="click.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">

<?php

$uret = rand(300000,688255);

    echo 
    '<form action="albo.php" method="post" >
    <input type="text" name="uret" value="'.$uret.'" />
    <div id="button"><input type="submit" value="Gonder" /></div>

    </form>';

?> 
```

点击.JS

```
$(document).ready(function() {
    $('#button').click();
} 
```

我要做的就是在 a.php 加载时单击该提交按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:21:21.300

```
$(function() {
    setInterval(function() {
        $('#button').click();
    }, 4000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:50:39.743

**扳机**

```
$("#button input[type='submit']").trigger("click"); 
```

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:22:04.993

你可以使用这个代码

```
$(function() {
    setInterval(function() {
        $('#button').click();
    }, 4000);
}); 
```

颠倒添加`js`文件的顺序，先加载`jquery.js`再加载`click.js`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
<script type="text/javascript" src="click.js"></script> 
```

# javascript - 当用户在输入字段中键入字符时突出显示 DIV 的文本

> ID：15951214
> 
> 赞同：6
> 
> 时间：2013-04-11T14:20:01.060
> 
> 标签：javascript, html

我看过很多关于使用 javascript 在 DIV 中突出显示文本的帖子，但没有一个完全符合我的要求。

我需要做的是在用户输入搜索词时逐个字符地突出显示特定 DIV 中的文本。相反，当用户退格或删除字符时，我需要“取消突出显示”同一 DIV 的文本。

我想这已经有人在某个地方完成了，但我还没有在这里或谷歌找到一个完全符合我需要的帖子。

任何反馈表示赞赏。

此代码在用户在输入字段中键入字符时执行。问题在于，在某些情况下，它会在我键入时将字符串“”插入表中，我不知道为什么，所以我正在寻找不同的解决方案。

感谢您的反馈意见！

```
function filterTable(Stxt, table) {
     dehighlight(document.getElementById(table));
     if (Stxt.value.length > 0)
       highlight(Stxt.value.toLowerCase(), document.getElementById(table));
  }

  function dehighlight(container) {
     for (var i = 0; i < container.childNodes.length; i++) {
       var node = container.childNodes[i];
       if (node.attributes && node.attributes['class'] && node.attributes['class'].value == 'highlighted') {
           node.parentNode.parentNode.replaceChild(
           document.createTextNode(node.parentNode.innerHTML.replace(/<[^>]+>/g, "")),node.parentNode);
           return;
       } else if (node.nodeType != 3) {
           dehighlight(node);
       }
     }
  }

  function highlight(Stxt, container) {
    for (var i = 0; i < container.childNodes.length; i++) {
        var node = container.childNodes[i];
        if (node.nodeType == 3) {
            var data = node.data;
            var data_low = data.toLowerCase();
            if (data_low.indexOf(Stxt) >= 0) {
                var new_node = document.createElement('span');
                node.parentNode.replaceChild(new_node, node);
                var result;
                while ((result = data_low.indexOf(Stxt)) != -1) {
                    new_node.appendChild(document.createTextNode(data.substr(0, result)));
                    new_node.appendChild(create_node(
                    document.createTextNode(data.substr(result, Stxt.length))));
                    data = data.substr(result + Stxt.length);
                    data_low = data_low.substr(result + Stxt.length);
                }
                new_node.appendChild(document.createTextNode(data));
            }
        } else {
            highlight(Stxt, node);
        }
    }
  }

  function create_node(child) {
    var node = document.createElement('span');
    node.setAttribute('class', 'highlighted');
    node.attributes['class'].value = 'highlighted';
    node.appendChild(child);
    return node;
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:29:36.780

这可以很容易地使用正则表达式来更改 div 的内容。这是一个简单的实现：

```
var s = document.getElementById('s');    // your input
var div = document.getElementById('a');  // the div to change
var t = a.textContent || a.innerText;
s.onkeyup = function(){
   div.innerHTML = this.value
   ? t.replace(new RegExp('('+this.value+')','ig'), '<span class=highlight>$1</span>')
   : t;
}; 
```

[演示](http://jsbin.com/iriwaw/2/edit)（点击“用JS运行”）

* * *

**编辑 ：**

即使你有桌子和东西，这个更复杂的版本也能工作：

```
var s = document.getElementById('s');
var div = document.getElementById('a'); 

function changeNode(n, r, f) {
  f=n.childNodes; for(c in f) changeNode(f[c], r);
  if (n.data) {
    f = document.createElement('span');
    f.innerHTML = n.data.replace(r, '<span class=found>$1</span>');
    n.parentNode.insertBefore(f, n);
    n.parentNode.removeChild(n);
  }
}
s.onkeyup = function(){
  var spans = document.getElementsByClassName('found');
  while (spans.length) {
    var p = spans[0].parentNode;
    p.innerHTML = p.textContent || p.innerText;
  }
  if (this.value) changeNode(
    div, new RegExp('('+this.value+')','gi')
  );
}; 
```

**[演示](http://jsbin.com/iriwaw/3/edit)**（点击“用JS运行”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:36:38.423

我的[Rangy](http://code.google.com/p/rangy)库对此提供了支持，尽管我承认这是一个相当大的脚本，仅用于此用途。

演示：[http ://rangy.googlecode.com/svn/trunk/demos/textrange.html](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:01:31.033

我做了一个使用正则表达式的演示。

```
// Input element
var input = document.getElementById("highlighter"), 
    // Text container element
    divText = document.getElementById("text"),
    // using textContent property if it exists
    textProp = ("textContent" in divText) ? "textContent" : "innerText",
    // Getting text to discard html tags (delete line 6 and use divText.innerHTML if you want to keep the HTML tags)
    originalText = divText[textProp];

function handler(){
    // if Input.value is empty clear the highlights
    if(!this.value){
        divText.innerHTML = originalText;
        return true;
    }
    // Regex to group the matches, with tags 'global' and 'case insensitive'
    var regex = new RegExp("("+this.value+")", "ig");
    // replace text with the new one ($1 refers to first group matched by regex)
    divText.innerHTML = originalText.replace(regex, "<span class='highlight'>$1</span>");

};
// adding listener to input.. IE uses attachEvent method
input.addEventListener("keyup", handler, false); 
```

[JSFiddle 演示](http://jsfiddle.net/fernandosavio/HDqeN/)

# wpf - WPF：如何设置单选按钮组的初始状态？

> ID：15951215
> 
> 赞同：0
> 
> 时间：2013-04-11T14:20:01.370
> 
> 标签：wpf, xaml, triggers, styles

在选中或取消选中其中一个单选按钮之前，我只想为我的单选按钮组提供一个初始样式：

```
<Style x:Key="RadioButtonStyle" TargetType="{x:Type RadioButton}">
    <Setter Property="Foreground" Value="Red"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RadioButton}">
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="true">
                        <Setter Property="Foreground" Value="Blue"/>
                    </Trigger>
                    <Trigger Property="IsChecked" Value="false">
                        <Setter Property="Foreground" Value="Green"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在这个例子中，不幸的是，我所有的单选按钮都是绿色的，而我希望它们是红色的，直到用户单击其中一个（此时，单击的按钮变为蓝色，而其他按钮变为绿色）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:39:58.697

您只需为每个 RadioButton设置**isChecked属性。**像这样

```
 <RadioButton GroupName="players" Grid.Column="2" Grid.Row="1" Name="hvP1" IsChecked="True"/>
   <RadioButton GroupName="players" Grid.Column="2" Grid.Row="2" Name="hvP2" IsChecked="False"/>
   ... 
```

# r - x轴上的因子太多

> ID：15951216
> 
> 赞同：3
> 
> 时间：2013-04-11T14:20:01.283
> 
> 标签：r, ggplot2

假设因子变量是有序的，那么处理图中太多因子的最佳方法是什么？默认看起来不太好：

```
ggplot(data.frame(x=factor(trunc(runif(10000, 0, 100)), ordered=T)), aes(x=x)) +
  geom_histogram() 
```

![丑陋的例子](https://i.stack.imgur.com/evC8x.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:26:43.830

您可以翻转值。

```
ggplot(data.frame(x=factor(trunc(runif(10000, 0, 100)), ordered=T)), aes(x=x)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_histogram()

flip <- ggplot(data.frame(x=factor(trunc(runif(10000, 0, 100)), ordered=T)), aes(x=x)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_histogram() 
```

如果您的口味仍然太稠密，您可以设置手动休息时间。在这种情况下，我使用五个。

```
prune <- ggplot(data.frame(x=factor(trunc(runif(10000, 0, 100)), ordered=T)), aes(x=x)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_x_discrete(breaks = seq(0, 100, by = 5)) +
  geom_histogram()

library(gridExtra)
grid.arrange(flip, prune) 
```

![在此处输入图像描述](https://i.stack.imgur.com/0AGw9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:55:13.393

使用不同的可视化方法 - `dotplot()`. 您用一个点表示频率，并将您的因子移动到 y 轴以水平而不是垂直显示它。这种加排序为您提供了每个因素频率的简单直观指标。标签上有点密集，但如果放大，仍会显示因素。这是示例`lattice`

```
library(lattice)
d <- sort(table(factor(trunc(runif(10000, 0, 100)))))
dotplot(d, col=1, cex=0.5, scales = list(y = list(cex=0.5))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/d3hFu.png)

但也许你想要的是像因子频率直方图这样的东西，虽然我不知道你会用它做什么。只是不要旋转 x 轴标签，这会使它不可读。

```
d <- factor(trunc(runif(10000, 0, 100)))
histogram(d, scales = list(x = list(at=seq(1,length(levels(dd)),5)))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/vHaCa.png)

# ember.js - EmberJS：无法将 hasMany 数组的长度降低两级

> ID：15951223
> 
> 赞同：7
> 
> 时间：2013-04-11T14:20:16.517
> 
> 标签：ember.js, has-many

我试图创建一个计算属性来获取所有页面长度的总和。

但我不知道如何访问一个孩子，所以我可以得到那个孩子的孩子。

```
App.Document = DS.Model.extend({
    name: DS.attr('string'),
    spreads: DS.hasMany('App.Spread'),

    pagesCount: function() {
                // Here is where i go wrong, i can get the length of spreads, but not access a spread to get the page length.
                var spreadsLength = this.get('spreads.length');
                var firstSpread = this.get('spreads')[0];
                return firstSpread.get('pages.length');
    }.property('spreads')
});

App.Spread = DS.Model.extend({
    document: DS.belongsTo('App.Document'),
    pages: DS.hasMany('App.Page')
})

App.Page = DS.Model.extend({
    spread: DS.belongsTo('App.Spread'),
    page_name: DS.attr('string'),
    page_items: DS.hasMany('DS.PageItem')
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T22:41:08.683

下面是一个**示例，说明如何访问**点差数组中的第一个对象：

```
App.Document = DS.Model.extend({
    name: DS.attr('string'),
    spreads: DS.hasMany('App.Spread'),

    pagesCount: function() {
        // Here is where i go wrong, i can get the length of spreads, but not access a spread to get the page length.
        var spreadsLength = this.get('spreads.length');

        var firstSpread = this.get('spreads').objectAt(0);
        // var firstSpread = this.get('spreads.firstObject'); // elegant way to first Object

        return firstSpread.get('pages.length');
    }.property('spreads.firstObject.pages.length')
}); 
```

但我想你想在这里获得总页数。**因此，这是一个如何迭代点差并求和页数的示例**：

```
App.Document = DS.Model.extend({
    name: DS.attr('string'),
    spreads: DS.hasMany('App.Spread'),

    pagesCount: function() {
        // Here is where i go wrong, i can get the length of spreads, but not access a spread to get the page length.
        var spreadsLength = this.get('spreads.length');
        var ret = 0;
        this.get("spreads").forEach(function(spread)){
            ret += spread.get('pages.length');
        }
        return ret;
    }.property('spreads.@each.pages.length')
}); 
```

**注意：**查看我通过`property`. 由于 ComputedProperty 依赖于这些路径，因此您需要在此处声明它们。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-07-15T09:11:53.780

```
App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('st    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

});ring'),
  phone: D    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields)    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

}); {
    return fields.firstName && fields.lastNameenter code here
  }

});
    return fields.firstName && fields.lastNameenter code here
  }

});S.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

});

App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

});
  phone: DS.attr('string'),
  status: DS.attr('    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && field    App.User = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  phone: DS.attr('string'),
  status: DS.attr('string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

});s.lastNameenter code here
  }

});string', { defaultValue: 'new' }),
  notes: DS.attr('string'),
//  projects: DS.hasMany("project", {async: true}),
    projectsCount: function() {
//    alert(this.get('projects'));
        return this.get('projects.length');
    }.property('id'),

  fullName: function() {
    return this.get('firstName') + ' ' + this.get('lastName')
  }.property('firstName', 'lastName')

}),

App.User.reopenClass({

  valid: function(fields) {
    return fields.firstName && fields.lastNameenter code here
  }

}); 
```

# python - 如何在 Google 电子表格中同步计算机本地数据？

> ID：15951228
> 
> 赞同：1
> 
> 时间：2013-04-11T14:20:42.420
> 
> 标签：python, sync, google-sheets, google-spreadsheet-api

我想创建一个在计算机后台运行的系统，当我打开计算机时，它会将计算机打开的时间发送到 Google SpreadSheet 上的电子表格以及关闭时间它还同步时间在 Google 电子表格的电子表格中，计算机已关闭。

我怎么能创造这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:46:59.173

**Google Apps 脚本**将让您创建一个“网络应用程序”，您可以将参数传递给它。有很好的文档说明如何做到这一点，与使用 GData 样式的电子表格 API 相比，应该是一种快速简便的方法。（没有 Auth2 等）

# java - 无法从文件中读取多个对象

> ID：15951230
> 
> 赞同：2
> 
> 时间：2013-04-11T14:20:57.037
> 
> 标签：java, file, object, objectinputstream

我试图将 (Lieu) 对象放入 an`ArrayList`但在代码末尾，我的列表仍然是空的。我一直在网上寻找答案，但我发现的只是“将您的对象写入集合然后阅读集合”。但是该文件已经写入，我需要找到一种方法将所有（Lieu）对象放入 ArrayList 中。

这是编写代码（我无法修改）：

```
public static void main(String[] args) {
        Lieu<Double, String> p1;
        Lieu<Double, String> p2;
        Lieu<Double, String> p3;
        SegmentGeo<String> e1;
        SegmentGeo<String> e2;
        SegmentGeo<String> e3;
        Parcelle<String> p = new Parcelle<String>();
        ArrayList<Mesure<Point<Double>, String>> segs;
        p1 = new Lieu<Double, String>(45.573715, -73.900295, "p1");
        p2 = new Lieu<Double, String>(45.573882, -73.899748, "p2");
        p3 = new Lieu<Double, String>(45.574438, -73.900099, "p3");
        e1 = new SegmentGeo<String>(p1, p2, "Parcelle test");
        e2 = new SegmentGeo<String>(p2, p3, "Parcelle test");
        e3 = new SegmentGeo<String>(p3, p1, "Parcelle test");
        segs = new ArrayList<Mesure<Point<Double>, String>>();
        segs.add(e1);
        segs.add(e2);
        segs.add(e3);
        try {
            p.setMesures(segs);
        } catch (TrajectoireNonValideException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ObjectOutputStream ois = null;
        try {
            ois = new ObjectOutputStream(new FileOutputStream("essai.txt"));
            ois.writeObject(p.informationCumulee());
            ois.writeObject(p1);
            ois.writeObject(p2);
            ois.writeObject(p3);
        } catch (EOFException ex) {
            System.out.println("Fin de fichier atteinte.");
        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        } finally {
            try {
                if (ois != null) {
                    ois.close();
                }
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    } 
```

这就是我想要做的：

```
public void actionPerformed(ActionEvent arg0) {
    JFileChooser chooser = new JFileChooser();
    int retour = chooser.showOpenDialog(getParent());
    if(retour==JFileChooser.APPROVE_OPTION){
          try{
       FileInputStream fis = new FileInputStream(chooser.getSelectedFile().getName());
       ObjectInputStream ois = new ObjectInputStream(fis);
       champNom.setText((String) ois.readObject());//that's just to display the name
       while (ois.available()!=0) 
       { 
            temp = (Lieu)ois.readObject();
            l.add(temp);
       }
       ois.close();
       System.out.print(l.size());//The size is 0
       }
       catch (FileNotFoundException e) {
           e.printStackTrace();
       }
       catch (IOException e) {
           e.printStackTrace();
       } 
       catch (ClassNotFoundException e) {
           e.printStackTrace();
       }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:01:05.517

正如 Joetjah 所说，[`available()`](http://download.java.net/jdk7/archive/b123/docs/api/java/io/ObjectInputStream.html#available%28%29)听起来不像。

一种不是超级优雅但效果惊人的解决方案是只捕获`Exception`当没有任何内容可读取或其他异常时将抛出的 s ，如下所示：

```
 try {
        while (true)
            l.add((Lieu<Double,String>)ois.readObject());
    } catch (ClassNotFoundException | IOException e) {
        //Expecting a EOFException here
    } finally {
        try {
            ois.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

每当读取时抛出异常（并且在某些时候会有一个！），它将停止读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:33:54.457

[可用不做你认为它做的事](http://www.coderanch.com/how-to/java/AvailableDoesntDoWhatYouThinkItDoes)

available() 不会返回要读取的数据量，而是可以在没有阻塞的情况下读取的数据量（暂停以等待来自文件/套接字/数据库/等的更多数据）。在某些情况下，这可能会在仍有应读取的字节时返回零 - 0 表示现在有 0 个字节可用（没有阻塞）。这可能由于各种原因而发生 - 硬盘驱动器可能正忙于重新定位其磁性阅读器，或者网络连接可能正忙，或者您可能正在某个地方等待用户输入某些内容，然后才能发送他们的信息。或者可能是因为您正在阅读的文件确实没有额外的字节要读取，因为您已经到了结尾。使用 available() 您无法知道是否应该尝试读取字节。

使用流复制文件的更正确方法是检查 read 的返回值是否为文件结尾值 (-1)：

```
InputStream is = // some input
OutputStream os = // some output
byte buffer = new byte[1024];
int bytesRead;
while ((bytesRead = is.read(buffer)) != -1) {   
   os.write(buffer, 0, bytesRead);
} 
```

当这段代码完成时，你就知道所有的字节都真的被读取和复制了，因为 while 循环直到 read() 返回 -1 才完成，表示输入结束。

现在，在您的情况下，我建议将其转向其他方向，例如：

```
FileInputStream fis = new FileInputStream(chooser.getSelectedFile().getName());
ObjectInputStream ois = new ObjectInputStream(fis);
Object obj = ois.readObject();
while (obj != null) 
{ 
    champNom.setText((String)obj); 

    if (obj instanceof Lieu<Double, String>) 
        l.add(obj);

    obj = ois.readObject();
}
ois.close();
System.out.print(l.size()); 
```

# iphone - 如何使用 Xcode 的 iPhone 模拟器测试持久内存

> ID：15951237
> 
> 赞同：0
> 
> 时间：2013-04-11T14:21:15.310
> 
> 标签：iphone, ios, objective-c, xcode, persistence

我有一个 NSMutableArray 的自定义对象保存到持久内存，如下所示：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
        [NSKeyedArchiver archiveRootObject:[PlayerMenuController savedPlayers] toFile:@"/Users/Dec/Library/Application Support/iPhone Simulator/6.0/Applications/9BC31B2A-/savedPlayers"];
} 
```

加载然后进行测试，如下所示：

```
NSMutableArray *loadedArray = [NSKeyedUnarchiver unarchiveObjectWithFile:@"/Users/Dec/Library/Application Support/iPhone Simulator/6.0/Applications/9BC31B2A-/savedPlayers"];
if (loadedArray != nil)
{
    [[PlayerMenuController savedPlayers] setArray:loadedArray];
}

for (int i = 0; i < [[PlayerMenuController savedPlayers] count]; i++)
{
    Player *p = [[PlayerMenuController savedPlayers] objectAtIndex:i];
    NSLog(@"%@ %u",[p getName],[p getSaveId]);
}
NSLog(@"%u",[[PlayerMenuController savedPlayers] count]); 
```

为了测试这一点，我打开我的应用程序，将一些对象保存到数组中，最小化应用程序，然后通过任务管理器/双击主页关闭应用程序。当我再次打开我的应用程序时，调试器显示为已分离，没有调用任何断点或 NSLog。

如何在多次使用中调试我的应用程序，以便测试我的应用程序保存和加载数据的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:35:39.667

只需通过 XCode 再次以调试模式运行应用程序。不要通过单击模拟器上的应用程序图标来运行它。如果您不更改代码，它将不会重建。您将拥有相同的捆绑包和设置。

此外，按下 XCode 中的停止按钮来停止应用程序，而不是在模拟器中将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:30:43.973

您可以在以下位置查看模拟器“内容”：

`~/Library/Application Support/iPhone Simulator/`

然后，您将不得不通过进入每个应用程序来猜测您的应用程序目录。然后在`Documents`文件夹下查看。你的 plist 应该在那里。

# ruby-on-rails - 是否有任何用 Rails 编写的表单构建器工具、任何 gem 或插件？

> ID：15951240
> 
> 赞同：2
> 
> 时间：2013-04-11T14:21:21.280
> 
> 标签：ruby-on-rails, ruby

寻找非程序员可以拖放并创建实体和表单以执行简单业务流程的东西。似乎它不会那么难，但不想重新发明轮子。

需要明确的是，我正在寻找能够赋予应用程序用户构建表单和实体的能力的东西，有点像 Salesforce 在创建实体、扩展实体以及允许您构建自己的表单而无需编写的能力方面提供的东西任何代码。

# javascript - 如何在 MongoDB 中对数据进行建模？

> ID：15951242
> 
> 赞同：0
> 
> 时间：2013-04-11T14:21:21.570
> 
> 标签：javascript, mongodb

我是非关系数据库的新手，因此我想知道如何为我的数据建模。我的项目是一个简单的待办事项应用程序，其中包含项目和任务。请参阅下文了解我目前的做法，并让我知道它是否正确或我可以做得更好：

```
projects: [{
   _id: 23423423423,
   name: projectName1,
   tasks: [{
               _id: 3423423423423324,
               title: "do something",
               isCompleted: "false"
          },
          {
               _id: 23223423423324,
               title: "do something else now",
               isCompleted: "false"
          },
          {
               _id: 232234233423423,
               title: "i have completed this",
               isCompleted: "true"
          }]
  },
  {
   _id: 2342123123,
   name: projectName2,
   tasks: [{
               _id: 3423423423422314,
               title: "build this",
               isCompleted: "false"
          },
          {
               _id: 2322342342234234,
               title: "build something else now",
               isCompleted: "false"
          },
          {
               _id: 2322342323423423,
               title: "i have completed building this",
               isCompleted: "true"
          }]
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:26:24.833

假设`projects`实际上是集合名称，那么这看起来不错，如果不是，那么为每个项目制作一个文档并使用`user_id`某种方式将它们链接在一起可能会更高效。

您可能想在这里记住的一件事是在特定时间段内您获得了多少新任务或任务更新。这样做的一个原因是，如果您的子文档`tasks`随着时间的推移持续增长，您可能会面临某些碎片问题（[http://www.10gen.com/presentations/storage-engine-internals](http://www.10gen.com/presentations/storage-engine-internals)可以解释更多），如果这成为问题（我非常怀疑很多）你可以使用2大小分配的力量：http: [//docs.mongodb.org/manual/reference/command/collMod/#usePowerOf2Sizes](http://docs.mongodb.org/manual/reference/command/collMod/#usePowerOf2Sizes)

但是，总的来说，这似乎是正确的。

# c++ - c ++：从析构函数中抛出异常

> ID：15951247
> 
> 赞同：1
> 
> 时间：2013-04-11T14:21:29.600
> 
> 标签：c++, exception-handling, destructor

这是一道面试题。我告诉他，如果堆栈展开已经在进行中，程序可能会终止。除此之外，如果异常处理得当，您会发现任何问题。我告诉他没有，只要处理得当。但他看起来对我的反应不太满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:27:28.643

好吧，您无法知道是否已经存在活动异常。如果存在，如果您让另一个异常从析构函数中逃脱，程序将终止。

因此，我并没有真正遵循您的论点：

> 我告诉他没有，只要处理得当。

除了首先不让它从析构函数中逃脱之外，您如何“正确处理”它？如果我是面试官，那将是我的下一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:12:37.157

如果您*从*析构函数中抛出，这意味着异常实际上正在离开析构函数。所以*正确处理*的部分是不可能的：你无法知道它将如何处理。

还有一个额外的微妙问题：在许多不平凡的情况下，除非假定析构函数不会抛出，否则不可能（或至少非常昂贵）编写异常安全的代码。如果你的析构函数抛出异常，你的类的用户将不能用它写出好的代码。例如：不可能为容器编写异常安全的析构函数，除非它包含的对象的析构函数保证不会抛出。不会调用`terminate()`，但容器析构函数会泄漏资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:52:50.153

从析构函数中抛出是*没有意义*的。

析构函数中唯一可恢复的错误是关闭/刷新文件时的 I/O 错误（或网络的类似错误等）。但从这些条件中恢复是微不足道的。只需报告错误并继续。无论如何，您不需要该文件，您只是试图关闭它！因为一个你甚至不需要的文件中的错误而放弃你正在做的任何事情都是浪费的。

析构函数中可能发生的所有其他类型的故障，例如无法解锁互斥锁或释放内存块，可能无法恢复，因此需要调用`terminate()`.

另一方面，分配资源的错误，或在计算过程中未能执行某些 I/O，需要抛出，因为计算无法继续。但这不应该发生在析构函数中，或者如果发生，它应该在析构函数中处理（为什么？再一次，让它传播出去是没有意义的，这不会停止错误*并且*会放弃可能是愉快地继续）。

因此，即使从析构函数中抛出非常安全且定义明确，它也不会给我们带来太多好处。

# ios - 如果为空则删除目录

> ID：15951248
> 
> 赞同：3
> 
> 时间：2013-04-11T14:21:32.650
> 
> 标签：ios, objective-c, nsfilemanager

我正在尝试使用以下代码检查文件夹是否为空，如果是则将其删除：

```
NSArray *folderContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:theDirectory error:&error];
if (!folderContents){
    if (folderContents.count == 0)
    {
        NSLog(@"empty");
        [[NSFileManager defaultManager] removeItemAtPath:theDirectory error:&error];
    }  
} 
```

这没有奏效，我猜我错过了一些愚蠢的东西，但会感谢任何指针。

*   更新：问题是我自己的愚蠢 - 迷路`!`在第二行。删除它，它可以按预期工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:24:31.357

你要这个：

```
NSError *error = nil;
NSArray *folderContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:theDirectory error:&error];
if (folderContents) {
    if (folderContents.count == 0) {
        NSLog(@"empty");
        [[NSFileManager defaultManager] removeItemAtPath:theDirectory error:&error];
    }
} else {
    // log error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:33:44.477

有时 POSIX 方法更有效：

```
#include <unistd.h> 

if (rmdir([theDirectory fileSystemRepresentation]) == 0) {
    // directory successfully removed (must have been empty!)
} else if (errno == ENOTEMPTY) {
    // directory not empty
} else {
    // other error
} 
```

`rmdir()`仅当目录为空时才删除目录，因此无需在之前枚举目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:34:02.257

我猜“theDirectory”要么为零，要么指向一个不存在的目录，因为只有在这些情况下，“！folderContents”才会评估为真。如果“theDirectory”指向一个现有文件夹，您将得到一个空数组并且不会进入“if”块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:24:10.450

尝试这个：

```
NSArray *folderContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:theDirectory error:&error];
//if (!folderContents)
if (folderContents.count == 0)
{
    NSLog(@"empty");
    [[NSFileManager defaultManager] removeItemAtPath:theDirectory error:&error];
} 
```

# javascript - jquery datepicker - 如果有特定的类，则显示周数

> ID：15951249
> 
> 赞同：0
> 
> 时间：2013-04-11T14:21:35.007
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我正在使用 jquery ui datepicker，但我只想在输入元素具有特定类时才显示周数...

这是我尝试过但没有成功的方法......

```
$(".myCal").datepicker({
    showWeek: function(dateText, inst) { $(this).hasClass("showWeek"); }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:38:21.903

由于使用了类选择器，**每个**方法都需要遍历所有匹配的元素，然后使用 $(this)。

```
$(".myCal").each(function () {
    $(this).datepicker({
        showWeek: $(this).hasClass('showWeek')
    });
}); 
```

[http://jsfiddle.net/Ubw3L/5/](http://jsfiddle.net/Ubw3L/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:25:21.040

```
$('.myCal').each(function () {
  $(this).datepicker({
    showWeek: $(this).hasClass('showWeek');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:29:27.577

你能试试这个

```
$(".myCal").datepicker({
    showWeek: $(this).hasClass("showWeek");
}); 
```

正如[API](http://api.jqueryui.com/datepicker/#option-showWeek)所述，`showWeek`接受布尔值。

# c# - 通过路径加载 XML 文件

> ID：15951250
> 
> 赞同：3
> 
> 时间：2013-04-11T14:21:39.760
> 
> 标签：c#, .net, xml

我在一个文件夹中有 814,652 个 XML 文件，文件名是从 1 到 814,652 的整数。

在我的应用程序中，我将一些 xml 文件加载到数据表中，但加载不是即时的，有时最多延迟 3 秒。

是因为文件夹包含太多文件吗？

如果我可以将文件分成多个文件夹，那会加快速度吗？

我只是根据从数据网格中的选定行获得的文件名一次读取一次

请注意，我不需要遍历文件列表，我只需要加载指定的文件名。

```
 int filename = ;//get the value from the focused row in the datagrid
 mydatatable.ReadXml(path + @"\xmlfiles\" + filename + ".xml"); 
```

更新：将文件划分为子文件夹并最小化每个文件夹的文件数量使其更慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:01:25.883

假设您有 NTFS 文件系统（FAT32 不会在一个目录中保存 800k 文件），[**这篇文章**](https://stackoverflow.com/questions/4356918/ntfs-directory-has-100k-entries-how-much-performance-boost-if-spread-over-100-s)提供了您问题的答案，以及一些指标和建议。不，分成几个目录只会损害性能。

在我看来，最好将所有文件合并为一个，并将其映射到内存中，或者使用更方便的存储，专门为快速索引和访问而设计，如数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:18:03.380

我最终使用 sql server 将文件分成表并使用 EXI 压缩 XML。

# java - 水平微调器 android

> ID：15951254
> 
> 赞同：0
> 
> 时间：2013-04-11T14:21:42.767
> 
> 标签：java, android, android-spinner

我正在尝试在 android 中制作一个水平微调器，就像这个[Wheel Spinner](https://code.google.com/p/android-wheel/)但水平的。关于如何在android中做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-25T08:46:04.230

[android.widget.Gallery](http://developer.android.com/reference/android/widget/Gallery.html)怎么样？

# underscore.js - 下划线模板：无法切换到工作

> ID：15951255
> 
> 赞同：15
> 
> 时间：2013-04-11T14:21:43.033
> 
> 标签：underscore.js, underscore.js-templating

我无法在下划线模板中使用简单的 switch 语句。它使用了一个名为 UserType 的变量的值，我通过 <%= UserType %> 显示它来检查它是否存在。

代码出现：

```
<% switch(UserType) { %>
    <% case 13: %>
        <button id="schoolButton" value="schools" class="gridChooser k-textbox">Schools</button> 
    <% case 12: %>
        <button id="teacherButton" value="teachers" class="gridChooser k-textbox">Teacher</button> 
    <% case 8: %>
        <button id="classButton" value="classes" class="gridChooser k-textbox">Classes</button> 
        <button id="testButton" value="tests" class="gridChooser k-textbox">Test</button> 
<% } %> 
```

非常感谢任何帮助-谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T17:16:28.073

问题是下划线在将模板转换为 JavaScript 时会添加分号终止符。所以，一个简单的`switch`像这样：

```
<% switch(x) { %>
<% case 11: %>
    <button>
<% } %> 
```

变成如下所示的 JavaScript：

```
switch(x) { ;
case 11: ;
    // something to output '<button>' goes here
} ; 
```

但是 JavaScript[`switch`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch)需要包含`case`语句，而空语句（即`;`in `switch(x) { ;`）不符合条件。

我想不出任何理智的方法来解决这个问题，所以我只是切换到一个`if`并继续解决更有趣的问题：

```
<% if(UserType === 13) { %>
    <button id="schoolButton" value="schools" class="gridChooser k-textbox">Schools</button> 
<% } else if(UserType === 12) { %>
    <button id="teacherButton" value="teachers" class="gridChooser k-textbox">Teacher</button> 
<% } else if(UserType === 8) { %>
    <button id="classButton" value="classes" class="gridChooser k-textbox">Classes</button> 
    <button id="testButton" value="tests" class="gridChooser k-textbox">Test</button> 
<% } %> 
```

你也可以把它翻过来并使用`print`：

```
<% switch(UserType) {
   case 13:
       print('<button id="schoolButton" ...');
   ...
} %> 
```

但这有点难看（恕我直言）。有关详细信息，请参阅[`_.template`文档](http://underscorejs.org/#template)。

* * *

请注意，这种分号技巧也是为什么您`if`的 s 必须在下划线模板中包含大括号的原因，即使 JavaScript 不需要它们。所以这行不通：

```
<% if(pancakes) %>
    <%= pancakes %> 
```

但这将：

```
<% if(pancakes) { %>
    <%= pancakes %>
<% } %> 
```

这同样适用于循环。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-01T03:55:07.323

你可以做：

```
<% switch(UserType) { case 13: %>
  <button id="schoolButton" value="schools" class="gridChooser k-textbox">Schools</button> 
  <% break; case 12: %>
  <button id="teacherButton" value="teachers" class="gridChooser k-textbox">Teacher</button> 
  <% break; case 8: %>
  <button id="classButton" value="classes" class="gridChooser k-textbox">Classes</button> 
  <button id="testButton" value="tests" class="gridChooser k-textbox">Test</button> 
<% break; } %> 
```

这不是一个“舒适”的解决方案，但也没有错。只是工作。

# java - Spring MVC Web 应用程序：应用程序上下文启动两次

> ID：15951257
> 
> 赞同：24
> 
> 时间：2013-04-11T14:21:46.070
> 
> 标签：java, spring, tomcat, spring-mvc, web.xml

我正在开发一个 Spring MVC REST API。一切正常，这很好，但我从日志中注意到，每次我重新启动我的应用程序时，applicationContext 都会加载两次：一次是当 tomcat 加载 war 文件时，第二次是当第一次访问 web 应用程序时客户。

我举几个例子：

在我启动tomcat之后：

```
Apr 11, 2013 10:14:35 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
Apr 11, 2013 10:14:36 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
2013-04-11 10:14:36 INFO  ContextLoader:273 - Root WebApplicationContext:     initialization started
2013-04-11 10:14:36 INFO  XmlWebApplicationContext:510 - Refreshing Root     WebApplicationContext: startup date [Thu Apr 11 10:14:36 EDT 2013]; root of context hierarchy
2013-04-11 10:14:36 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions     from ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]
2013-04-11 10:14:36 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-general.xml]
2013-04-11 10:14:37 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-db.xml]
2013-04-11 10:14:37 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-security.xml]
2013-04-11 10:14:37 INFO  SpringSecurityCoreVersion:33 - You are running with Spring Security Core 3.1.3.RELEASE
2013-04-11 10:14:37 INFO  SecurityNamespaceHandler:59 - Spring Security 'config' module version is 3.1.3.RELEASE 
```

...

然后此刻我做了第一个 API 调用：

```
INFO: Initializing Spring FrameworkServlet 'mvc-dispatcher'
2013-04-11 10:15:25 INFO  DispatcherServlet:455 - FrameworkServlet 'mvc-dispatcher': initialization started
2013-04-11 10:15:25 INFO  XmlWebApplicationContext:510 - Refreshing WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Thu Apr 11     10:15:25 EDT 2013]; parent: Root WebApplicationContext
2013-04-11 10:15:25 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]
2013-04-11 10:15:25 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-general.xml]
2013-04-11 10:15:25 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-db.xml]
2013-04-11 10:15:25 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [config-security.xml]
2013-04-11 10:15:25 INFO  SecurityNamespaceHandler:59 - Spring Security 'config' module version is 3.1.3.RELEASE 
```

这肯定不是正常行为？？我的 web.xml 看起来像这样：

http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

```
<display-name>REST API</display-name>

<!-- Servlets -->
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
</context-param>

<!-- filters -->
<filter>
    <filter-name>httpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>httpMethodFilter</filter-name>
    <servlet-name>mvc-dispatcher</servlet-name>
</filter-mapping>
<filter>
    <filter-name>etagFilter</filter-name>
    <filter-class>org.springframework.web.filter.ShallowEtagHeaderFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>etagFilter</filter-name>
    <servlet-name>mvc-dispatcher</servlet-name>
</filter-mapping>
<filter>
    <filter-name>CompressingFilter</filter-name>
    <filter-class>com.planetj.servlet.filter.compression.CompressingFilter</filter-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>statsEnabled</param-name>
        <param-value>false</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CompressingFilter</filter-name>
    <servlet-name>mvc-dispatcher</servlet-name>
</filter-mapping>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- listeners -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-11T17:28:45.307

`mvc-dispatcher`正在加载 2x，因为这就是您定义它的方式

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
</context-param> 
```

并且在

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

第一种方法通常用于加载诸如“全局”或“根”上下文之类的内容，您可以在其中放置由多个 servlet 上下文共享的所有 bean/资源。

第二种方法通常用于加载特定的 servlet 上下文。正如[这篇文章中的第一个答案](https://stackoverflow.com/q/11409237/866172)所指出的，它使用命名约定来查找 mvc-dispatcher 配置文件，因此您无需显式定义它。

您是否在 mvc-dispatcher-servlet.xml 中定义了所有内容？如果是这样，您可以删除

```
<context-param>
  ..
</context-param> 
```

定义，否则您可以（我建议为将来的可维护性）将您的配置分成多个文件。然后在 root-context.xml （通过第一种方法）之类的东西中加载共享 bean/资源，并在 servletname-servlet.xml 下为每个 servlet 上下文加载每个 servlet 特定配置。

# android - 当前上下文中不存在名称“资产”

> ID：15951258
> 
> 赞同：2
> 
> 时间：2013-04-11T14:21:46.510
> 
> 标签：android, xamarin.android, assets

我对这行代码有疑问。想在设备上创建 sqlite 数据库。

```
 string dbPath = System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal) + "\\test.db";
        if (!System.IO.File.Exists(dbPath))

            using (System.IO.Stream sr = ***Assets***.Open("test.db"))
            {
                using (System.IO.Stream srTo = System.IO.File.Create(dbPath))
                {
                    sr.CopyTo(srTo);
                }
            } 
```

此消息给出：名称“资产”在当前上下文中不存在

有一个类似的项目，但比big更全面。没有错误。他们的资产在我遵循的定义中定义了 c 驱动器中的一个 cs 文件，提供了对 Android.Content.ContextWrapper 的引用。不在项目路径上。[文件如何被添加应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:29:29.053

如果您没有在活动中执行此操作，则需要对活动/上下文的引用。您需要将其传递给构造函数中的辅助类。

```
public yourClass(Activity context.......){

      context.Assets.Open("your.db");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T06:55:04.957

你可以这样做：

```
using (System.IO.Stream sr = Android.App.Application.Context.Assets.Open("test.db"))
{
     using (System.IO.Stream srTo = System.IO.File.Create(dbPath))
     {
          sr.CopyTo(srTo);
     }
} 
```

# facebook - Facebook 应用程序 ID 被 .me 域拒绝？

> ID：15951261
> 
> 赞同：1
> 
> 时间：2013-04-11T14:21:53.587
> 
> 标签：facebook, app-id

您好，我刚刚尝试获取 .me 域的应用程序 ID，但它给出了一个错误：

```
Error
You have specified an App Domain but have not specified a valid integration URL.
o-star.me must be derived from one of: Site URL, Mobile Site URL, Canvas URL, Secure Canvas URL, Page Tab URL or Secure Page Tab URL. 
```

谢谢

# java - 如何从 PrimeFaces 上传文件的 byte[] 获取 KeyStore

> ID：15951265
> 
> 赞同：1
> 
> 时间：2013-04-11T14:22:02.973
> 
> 标签：java, file-upload, jsf-2, primefaces, keystore

我正在尝试`KeyStore`从 PrimeFaces获取 a `UploadFile`，但这仅返回 a `byte[]`。如何将其转换回`KeyStore`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:58:01.993

仔细查看[`KeyStore`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html)javadoc。[在您在上一个问题](https://stackoverflow.com/questions/15646599/download-link-encodedkeystore)中学到的采用 的[`store()`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html#store%28java.io.OutputStream,%20char%5B%5D%29)方法旁边，还有一种采用 的方法。`OutputStream`[`load()`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html#load%28java.io.InputStream,%20char%5B%5D%29)`InputStream`

PrimeFaces根据返回 a 的方法[`UploadedFile`](http://www.primefaces.org/docs/api/3.4/org/primefaces/model/UploadedFile.html)旁边的 javadoc也有返回 a 的方法。`getContents()``byte[]``getInputStream()``InputStream`

所以，总而言之，这应该做：

```
try (InputStream inputStream = uploadedFile.getInputStream()) {
    keyStore.load(inputStream, password);
} 
```

经验教训：学习如何查找和解释 javadocs 并进行数学计算 :)

顺便说一句，如果你真的没有办法得到 a `InputStream`at ，而只能得到 a `byte[]`，那么你总是可以把它包裹在 an 中[`ByteArrayInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html)。

# jdbc - 使用 JDBC 4 驱动程序类型的 java 应用程序是否需要 db2 绑定

> ID：15951266
> 
> 赞同：2
> 
> 时间：2013-04-11T14:22:03.463
> 
> 标签：jdbc, db2

我们的 java 应用程序将访问旧的大型机 db2 数据库。我记得在我之前的项目中，C++ 应用程序在部署之前需要 db2 绑定。在目前的项目中，所有的大型机应用，Cobol包也都需要做db2绑定。

使用 jdbc4 驱动程序的 java 应用程序是否也需要 db2 绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:25:12.357

IBM 提供的 JDBC 类型 IV 驱动程序将处理您需要做的所有事情。

驱动程序将 Java 对象适当地映射到 DB2。

我不知道在这种情况下“绑定”是什么意思。Java 不是 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:16:24.033

如果您使用标准 JDBC，那么您正在创建不需要在 DB2 端进行绑定的动态 SQL (PrepareStatement)。

但是，如果您使用 SQLj，您将需要“预编译”该代码以生成您的 .java 文件和另一个要在数据库中绑定的文件。

连接到大型机（系统 z 或 i）还是连接到 DB2 LUW 并不重要。这个概念对于所有平台都是相同的，因为 DB2 就是 DB2。

SQLj 不是很流行，但是在调优查询和改进数据访问方面非常强大，但是，正如您在 C 中所做的那样，代码必须分多个阶段进行开发，并且每次访问计划都必须重新绑定必须修改（新的统计数据、安全性等）

Data Studio 中的 SQLj 非常易于使用，而 DB2 中的 SQLj 与 Oracle 中的并不完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T12:00:29.267

如果您的 DB2 版本支持动态语句缓存并启用（咨询您的 DBA），您可以使用 JDBC Type-4 驱动程序访问大型机 DB2 数据库（使用准备语句）而无需绑定。

DB2 将生成访问路径并将其在第一个请求中存储到缓存中。否则，您需要使用类似 SQLJ 的技术并绑定它们。

# iphone - iPhone 数据结构和访问器代码建议

> ID：15951271
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:22:18.607
> 
> 标签：iphone, data-structures

我需要一个基于代码的解决方案来存储以下数据而不使用 CoreData。最好我可以根据它的索引访问每一行，并且每个数据字段可能使用一个键/对？

我正在寻找的PHP等价物是这样的；

```
echo $arr[0]['Image'];
Apple.png 
```

![在此处输入图像描述](https://i.stack.imgur.com/jqCq2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:23:59.893

`NSMutableArray`最简单的方法是使用`NSMutableDictionary`对象。

NSMutableArray 有一个`-writeToURL:`方法可以用来将它保存到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:24:22.380

您可以使用 plist、sqlite 或任何其他数据存储，看看这个[链接](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk_store-data/)。如果你使用像 Sqlite 这样的选择查询将得到`Apple.png`.

# delphi - 如何将UTC转换为当地时间

> ID：15951273
> 
> 赞同：1
> 
> 时间：2013-04-11T14:22:26.383
> 
> 标签：delphi, delphi-2010, utc

我必须为 ePrescribe 开发一个应用程序，并且需要将 UTC 时间值（例如 '2010-01-01T16:09:04.5Z'）转换为本地时间。Delphi 2010，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:36:24.480

您必须先手动解析字符串。从中提取各个值，然后您可以将它们放入 Win32`SYSTEMTIME`记录并调用[`SystemTimeToTzSpecificLocalTime()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724949.aspx)以将其从 UTC 转换为本地。然后，您可以根据`SYSTEMTIME`需要使用转换后的内容，例如将其转换为`TDateTime`using [`SystemTimeToDateTime()`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.SystemTimeToDateTime)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:28:08.773

您的计算机提供您的时区。您可以使用它们来操纵 UTC 时间，通过添加小时和分钟来进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T09:48:22.997

您可以使用`TXSDateTime`单元中的课程`XSBuiltIns`

```
program Project1;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  XSBuiltIns;

var xsDateTime: TXSDateTime;
    input, output:  string;
    date: TDateTime;

begin
  try
    { TODO -oUser -cConsole Main : Insert code here }
    input := '2010-01-01T16:09:04.5Z';
    xsDateTime := TXSDateTime.Create;
    xsDateTime.XSToNative(input);
    date := xsDateTime.AsDateTime;
    output := 'Parsed date/time: ' + FormatDateTime('yyyy-mm-dd hh:nn:ss', date);
    writeln(output);
    readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

输出：

```
Parsed date/time: 2010-01-01 19:09:04 
```

# php - ReferenceError：未定义 show_agent_stats

> ID：15951274
> 
> 赞同：0
> 
> 时间：2013-04-11T14:22:28.997
> 
> 标签：php, javascript

我正在尝试在单击按钮时显示的脚本中显示 MySQL 表查询。单击按钮时，它会调用一个输出到 DIV 标签的函数。该函数位于另一个名为functions.php 的脚本页面中，并且包含在当前页面vicidial.php 的顶部。单击按钮时，我收到上述错误消息，我确定它很简单但没有看到它，这是调用按钮和我希望将结果打印到的 DIV 标签；

```
 (vividial.php)
    <button onclick="show_agent_stats();">Hey there</button>
    <div id="agent_stats"></div>

     (functions.php)
      function show_agent_stats(){

    ?>

    <script type="text/javascript">
    var oldHTML = document.getElementById("agent_stats").innerHTML;
    var newHTML = "<?php include("dbtable.php");?>";
        return document.getElementById("agent_stats").innerHTML= newHTML;

            <?php
            } 
```

非常感谢您找到此错误根源的任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:25:19.860

`<button onclick="show_agent_stats();">Hey there</button>`

以上是试图访问一个名为`show_agent_stats()`. 您已在 中创建了此函数`PHP`。

我强烈建议对服务器端代码和运行时代码之间的区别进行一些研究。

# typo3 - TYPO3 6.0.4 未找到扩展的默认控制器

> ID：15951275
> 
> 赞同：0
> 
> 时间：2013-04-11T14:22:30.240
> 
> 标签：typo3, extbase

我使用扩展生成器创建了我的第三个扩展，但这个扩展无法正确安装。我得到错误：

> 无法确定扩展“NtImpressions”和插件“Gallery”的默认控制器。请在 ext_localconf.php 中检查 TYPO3\CMS\Extbase\Utility\ExtensionUtility::configurePlugin()。

我没有修改扩展文件中的任何内容。插件完全由扩展生成器生成。这是 ext_localconf.php

```
<?php
if (!defined('TYPO3_MODE')) {
    die ('Access denied.');
}    
\TYPO3\CMS\Extbase\Utility\ExtensionUtility::configurePlugin(
    'Xxx.' . $_EXTKEY,
    'Gallery',
    array(
        'Galerie' => 'list, show',          
    ),
    array(
        'Galerie' => '',

    )
);    
?> 
```

和 ext_tables.php

```
<?php
if (!defined('TYPO3_MODE')) {
    die ('Access denied.');
}    
\TYPO3\CMS\Extbase\Utility\ExtensionUtility::registerPlugin(
    $_EXTKEY,
    'Gallery',
    'Galerie'
);    
\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addStaticFile($_EXTKEY, 'Configuration/TypoScript', 'Impressionen');    
\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addLLrefForTCAdescr('tx_ntimpressions_domain_model_galerie', 'EXT:nt_impressions/Resources/Private/Language/locallang_csh_tx_ntimpressions_domain_model_galerie.xlf');
\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::allowTableOnStandardPages('tx_ntimpressions_domain_model_galerie');
$TCA['tx_ntimpressions_domain_model_galerie'] = array(
    'ctrl' => array(
        'title' => 'LLL:EXT:nt_impressions/Resources/Private/Language/locallang_db.xlf:tx_ntimpressions_domain_model_galerie',
        'label' => 'bezeichnung',
        'tstamp' => 'tstamp',
        'crdate' => 'crdate',
        'cruser_id' => 'cruser_id',
        'dividers2tabs' => TRUE,    
        'versioningWS' => 2,
        'versioning_followPages' => TRUE,
        'origUid' => 't3_origuid',
        'languageField' => 'sys_language_uid',
        'transOrigPointerField' => 'l10n_parent',
        'transOrigDiffSourceField' => 'l10n_diffsource',
        'delete' => 'deleted',
        'enablecolumns' => array(
            'disabled' => 'hidden',
            'starttime' => 'starttime',
            'endtime' => 'endtime',
        ),
        'searchFields' => 'bezeichnung,beschreibung,bilder,bilder_beschreibung,',
        'dynamicConfigFile' => \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::extPath($_EXTKEY) . 'Configuration/TCA/Galerie.php',
        'iconfile' => \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::extRelPath($_EXTKEY) . 'Resources/Public/Icons/tx_ntimpressions_domain_model_galerie.gif'
    ),
);    
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:55:38.943

我猜名称空间设置不正确，TYPO3 无法确定您的控制器`GalerieController->listAction`。

第一部分`configurePlugin`在 TYPO3 6.0 中注册了命名空间，因此您需要将这个命名空间添加到所有类中。命名空间被解析为可以找到具有该类的文件的路径。这相当于旧语法。

旧语法：

```
class Tx_YourExtension_Controller_YourController {
    //...
} 
```

就是现在

```
<?php
namespace YourVendor\YourExtension\Controller; 

class YourController {
    //...
} 
```

所以下面的配置

```
\TYPO3\CMS\Extbase\Utility\ExtensionUtility::configurePlugin(
'Xxx.' . $_EXTKEY,
... 
```

将 Xxx 注册为 Vendor，因此您的所有类都需要在该命名空间中

```
<?php
namespace Xxx\Gallery\Controller

class GalleryController {
    // ...
} 
```

其中“Gallary”是大写驼峰式的扩展键。

# php - PHP 如何仅使用 preg_match 创建 if 语句？

> ID：15951276
> 
> 赞同：0
> 
> 时间：2013-04-11T14:22:31.113
> 
> 标签：php, regex

如有必要，我会尝试附加一个 URL，并在不需要时跳过它。我的想法是，我现在正在学习 php，我想尽可能多地使用正则表达式。是否可以使用 preg_match 使这段代码更简洁？例子：

```
<?php
$facebook_url = str_replace("facebook.org","facebook.com", trim($_REQUEST['facebook_url']));

$position = strpos($facebook_url, "facebook.com");

if ($position === false) {
  $facebook_url = "http://www.facebook.com/" . $facebook_url;
}

?> 
```

但是使用：

```
 if  (!preg_match("/^(http:///www.facebook.com | facebook.com)/i"), $facebook_url)) {
    $facebook_url = "http://www.facebook.com/" . $facebook_url;     
} 
```

我觉得这应该按照我理解 php 语法的方式工作，但有些东西不能正常工作。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:26:57.173

我不知道您为什么要“尽可能多地”使用正则表达式，而不是尽可能多地使用正则表达式，这应该很少。在您的情况下，原始代码要快得多，您仍然可以用更少的代码来完成：

```
if (stripos($facebook_url, "facebook.com") === false) { 
```

您的正则表达式需要在交替之后`.com`或之前有一个空格。`facebook`正则表达式中的空间很重要。

# java - 如何从 Java/JNDI 向 LDAP 查询来自 Windows 用户的电子邮件？

> ID：15951279
> 
> 赞同：3
> 
> 时间：2013-04-11T14:22:32.107
> 
> 标签：java, ldap, jndi

我在网上搜索过，但找不到任何解决方案。
另外，我尝试了很多不同的解决方案，但都没有奏效。
请在看待这种情况时保持开放的心态。

要求：

*   应该使用 Java/J2SE（控制台、GUI 等）。
*   不要只使用任何外部或第三方 jar/包 JNDI。
*   不要询问或存储用户密码。
*   **从 LDAP 中的 Windows 登录用户获取电子邮件。**

假设：

*   不需要深入研究 LDAP 服务器的细节，它可以在其他语言上工作，如 VBS/.Net/等。但不是Java。

笔记：

*   VBS 甚至可以要求其他用户（不是登录的用户）工作。

    我不知道 LDAP 服务器配置，但上面的信息对于那些知道它的人来说应该是有意义的。

一段运行良好的 VBS 代码：

```
Dim objSysInfo, objUser<br>
Set objSysInfo = CreateObject("ADSystemInfo")
Set objUser = GetObject("LDAP://" & objSysInfo.UserName)
MsgBox objUser.mail 
```

**我怎样才能让它工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T00:15:45.407

这里的问题不是 JNDI 部分，它以与`ADSystemInfo.UserName`. 您可以查看是否`System.getProperty("user.name")`返回正确的东西，否则您会进入一些 ActiveX Bridge 的东西来模拟您发布的 VB 代码。

LDAP 部分只是非常直接地映射到 JNDI，你不应该对那部分有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:36:58.643

Windows 和 VBS API 使用“SASL GSSAPI 机制来实现单点登录 (SSO)”从客户端到 Active Directory 服务器。

有许多版本的 Windows Active Directory 和无数不同的方法，可以在您的实现中设置各种参数。所以你的成功可能会有所不同。

我发现一篇文章可能会帮助您指出正确的方向： [http ://dmdaa.wordpress.com/2010/04/10/utilize-sasl-gssapi-mechanism-to-achieve-single-sign-on-sso-对于-jndi-ldap-client/](http://dmdaa.wordpress.com/2010/04/10/utilize-sasl-gssapi-mechanism-to-achieve-single-sign-on-sso-for-jndi-ldap-client/)

# jquery - 如何在同一页面中运行类似的代码

> ID：15951283
> 
> 赞同：1
> 
> 时间：2013-04-11T14:22:43.507
> 
> 标签：jquery, slider

我会尽量做到更具体。

我有一个使用这个 jquery 代码的滑块：

```
$(document).ready(function() {

//rotation speed and timer
var speed = 4000000;
var run = setInterval('rotate()', speed);   

//grab the width and calculate left value
var item_width = $('#slidesx1 li').outerWidth(); 
var left_value = item_width * (-1); 

//move the last item before first item, just in case user click prev button
$('#slidesx1 li:first').before($('#slidesx1 li:last'));

//set the default item to the correct position 
$('#slidesx1 ul').css({'left' : left_value});

//if user clicked on prev button
$('#prevx1').click(function() {

    //get the right position            
    var left_indent = parseInt($('#slidesx1 ul').css('left')) + item_width;

    //slide the item            
    $('#slidesx1 ul:not(:animated)').animate({'left' : left_indent}, 500,function(){    

        //move the last item and put it as first item               
        $('#slidesx1 li:first').before($('#slidesx1 li:last'));           

        //set the default item to correct position
        $('#slidesx1 ul').css({'left' : left_value});

    });

    //cancel the link behavior            
    return false;

});

//if user clicked on next button
$('#nextx1').click(function() {

    //get the right position
    var left_indent = parseInt($('#slidesx1 ul').css('left')) - item_width;

    //slide the item
    $('#slidesx1 ul:not(:animated)').animate({'left' : left_indent}, 500, function () {

        //move the first item and put it as last item
        $('#slidesx1 li:last').after($('#slidesx1 li:first'));                  

        //set the default item to correct position
        $('#slidesx1 ul').css({'left' : left_value});

    });

    //cancel the link behavior
    return false;

});        

//if mouse hover, pause the auto rotation, otherwise rotate it
$('#slidesx1').hover(

    function() {
        clearInterval(run);
    }, 
    function() {
        run = setInterval('rotate()', speed);   
    }
); 

//a simple function to click next link
   //a timer will call this function, and the rotation will begin :)  
   function rotate() {
  $('#nextx1').click();
  }

  }); 
```

我想在同一页面中有多个滑块，但我不能对所有滑块使用相同的代码。

我试图复制代码并更改元素，例如：'slidesx1' for 'slidesx2'。但它没有用。

我想我必须将 '$(document).ready(function() {..' 更改为其他内容。

有人能帮我吗？

# image - JavaFx 图像大小调整

> ID：15951284
> 
> 赞同：5
> 
> 时间：2013-04-11T14:22:49.577
> 
> 标签：image, javafx

我有一个带有菜单顶部的边框窗格，左侧有一个网格，中间有一个图像。我希望图像与边框中心的大小相同，因为现在图像越过了我的网格。

我试过这个：

```
 imageView.fitWidthProperty().bind(box.widthProperty()); 
```

其中 imageView 是我的图像的名称，而 box 是 BorderPane 对象。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:04:50.377

请参阅 JavaFX 功能请求[RT-21337 添加 ImageViewPane 和 MediaViewPane 控件](https://bugs.openjdk.java.net/browse/JDK-8091216)，其中包含示例实现的代码附件，该示例`ImageViewPane`实现会将`ImageView`其包含的大小调整为该区域可用的区域。要获得所需的行为，您*可能*还需要在 上实现computeMinWidth[和](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html#computeMinWidth%28double%29)computeMinHeight[以便](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html#computeMinHeight%28double%29)`ImageViewPane`它们返回零而不是图像的最小大小。

* * *

> 现在图像越过了我的网格

这是因为图像的最小尺寸当前大于[BorderPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/BorderPane.html)中心的可用空间：

> 默认情况下，BorderPane 不会剪切其内容，因此如果子项的最小尺寸使其无法适应其空间，则子项的边界可能会超出其自身的边界。

防止中心内容溢出边界的一些潜在替代方法：

1.  在中心节点上手动设置一个[剪辑](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#clipProperty%28%29)，以防止它溢出边界。
2.  `ImageView`在上面链接的`ImageViewPane`示例中动态调整大小。
3.  将`ImageView`放在[ScrollPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html)中。
4.  使用[css -fx-background-image 属性](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)来显示和动态调整图像大小，而不是使用`ImageView`.
5.  在设置边框内容之前先设置边框的中心，这样它将在边框内容下方呈现。
6.  当节点大于可用显示区域时，使用不与节点重叠的边框窗格（例如 HBoxes、VBoxes 等）不同的构造。

> 我试过这个：`imageView.fitWidthProperty().bind(box.widthProperty());`

我从提供的代码中猜测这不起作用，因为图像的封闭框是某种可动态调整大小的窗格，因此框的最小宽度由图像的宽度决定，反之亦然。

# java - 抽象类、接口和自动装配

> ID：15951286
> 
> 赞同：3
> 
> 时间：2013-04-11T14:22:59.373
> 
> 标签：java, spring, annotations, autowired

我有以下主要课程：

```
public class Startup implements UncaughtExceptionHandler {

@Autowired
private MessageListener messageListener;

private static Startup startup;

public static void main(String[] args) {
        Startup start = new Startup();
        start.init(args); 
}

public void init(String[] args) {

    context = new ClassPathXmlApplicationContext("applicationContext.xml");
    startup = (Startup) context.getBean( "startup" );
    startup.start(); //here the messageListener is used
} 
```

// 这里是调用使用 messageListener 的方法的主类 }

```
@Component
public class ProdMessageListener 
    extends AbstractMessageListener implements MessageListener {...} 
```

和

```
public abstract class AbstractMessageListener 
    implements MessageListener {...} 
```

也

```
@Component
public interface MessageListener extends QueueAware {...}

@Component
public interface QueueAware {...} 
```

我的 Spring 上下文用于定位所有类和接口。但是 bean 不被识别，我得到：

> 没有为依赖找到 [com.ware.messaging.listener.MessageListener] 类型的合格 bean。

任何想法为什么自动装配不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:29:21.080

只需确保您已将基础包添加到 spring 上下文配置中，如下所示，以允许 spring 将所有组件加载到容器中

```
 <context:component-scan base-package="pakage1.package2"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:57:46.050

你知道问题是什么吗？Spring 似乎没有自动装配静态字段。现在一切正常。

# apache-flex - Group 的均匀空间子级

> ID：15951291
> 
> 赞同：1
> 
> 时间：2013-04-11T14:23:08.443
> 
> 标签：apache-flex, flex-spark

通过这个简单的 3 个按钮示例，我怎样才能使按钮间隔均匀。

```
<s:HGroup width="100%">
    <s:Button label="button 1" />
    <s:Button label="button 2" />
    <s:Button label="button 3" />
</s:HGroup> 
```

它目前显示为：

![当前的](https://i.stack.imgur.com/SHNFc.png)

我想要这样的东西：

![后](https://i.stack.imgur.com/sdNlt.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:43:58.003

将间隔元素放在按钮之间，并将它们的宽度设置为 100%，以便它们占据所有可用空间。

您可以使用旧的 mx [Spacer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Spacer.html)来完成这项工作：

```
<s:HGroup width="100%">
    <s:Button label="button 1" />
    <mx:Spacer width="100%"/>
    <s:Button label="button 2" />
    <mx:Spacer width="100%"/>
    <s:Button label="button 3" />
</s:HGroup> 
```

但如果您想避免使用 mx 类，请使用最轻量级的 Spark 类来实现`IVisualElement`. 据我所知，这将是[GraphicElement](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/supportClasses/GraphicElement.html)。

```
<s:HGroup width="100%">
    <s:Button label="button 1" />
    <s:GraphicElement width="100%"/>
    <s:Button label="button 2" />
    <s:GraphicElement width="100%"/>
    <s:Button label="button 3" />
</s:HGroup> 
```

Spacer 扩展了 UIComponent，因此它比 GraphicElement 重。

# eclipse - 尝试在 SVN 中共享以前删除的项目我收到奇怪的消息

> ID：15951295
> 
> 赞同：0
> 
> 时间：2013-04-11T14:23:13.437
> 
> 标签：eclipse, svn, subversive

我错误地将本地开发的项目共享到主干中。我在 Eclipse SVN Repository Exploring 视图中删除了它。它不再出现在存储库视图中。然后我尝试将项目共享到正确的分支中，并收到以下消息：

> 项目“Project1”已经存在于存储库中并且有一些内容。要将本地项目连接到指定位置，应检出存储库文件夹内容。请考虑应用本地更改可能会导致资源冲突。例如，如果本地文件与远程目录同名，则该文件的工作副本将被阻止。
> 
> 你要继续吗 ？

我可以看到在 SVN 中没有具有该名称的项目。

在尝试不成功地找到对此消息的任何引用后，我选择是继续。然后看起来它正在上传多个不属于该项目的项目和文件——对话框上的标题是共享项目而不是共享项目——所以我按下了取消。

有人知道这里发生了什么吗？

# c# - 为什么 onClientClick="window.open("dest.aspx")" 刷新我的当前页面？

> ID：15951296
> 
> 赞同：1
> 
> 时间：2013-04-11T14:23:16.417
> 
> 标签：c#, asp.net, navigation

好的，所以我正在使用这个

```
onClientClick="window.open("dest.aspx")" 
```

在按钮属性中。它通过在新选项卡中打开目标链接来达到目的，但同时它正在重新加载我不想要的当前页面。

为什么会这样？请帮忙！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T14:25:07.677

试试这个

```
onClientClick="window.open("dest.aspx");return false" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:24:50.023

有关 window.open 的参数参考，请参见[http://www.w3schools.com/jsref/met_win_open.asp 。](http://www.w3schools.com/jsref/met_win_open.asp)

# windows - PowerShell 1 - 检查文件是否已在使用中

> ID：15951302
> 
> 赞同：0
> 
> 时间：2013-04-11T14:23:54.097
> 
> 标签：windows, powershell

我正在编写一个复制日志文件的脚本，并且我想确保在复制之前没有写入日志文件。

我创建了一个函数，它应该通过尝试打开文件来检查这种情况。假设是，如果另一个应用程序打开了文件，该函数将在 $oFile.Open 调用中检测到这种情况。

我通过在记事本中打开测试文件来测试此功能，然后运行该功能，它没有报告任何问题。换句话说，即使文件已经在记事本中打开，$oFile.Open 也会返回 true。

有人可以帮我理解这里发生了什么吗？

谢谢

```
function isFileLocked([string]$Path) {

 $oFile = New-Object System.IO.FileInfo $Path
 ### Make sure the path is good
 if ((Test-Path -Path $Path) -eq $false)
 {
  echo "Bad Path"
  return $false
 }
      #Try opening file
  $oStream = $oFile.Open([System.IO.FileMode]::Open, [System.IO.FileAccess]::ReadWrite, [System.IO.FileShare]::None)
  if ($oStream)
  {
    echo "Got valid stream so file must not be locked"
    $oStream.Close()

     return $false

  } else {
   echo "InValid stream so file is locked"
  return $true

  }
 }

  $file="C:\Users\Tom\Daily_Reviews_0001-1191.journal"
  $result = isFileLocked($file)
  echo $result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:26:52.620

并非所有程序都保留文件句柄。记事本打开文件，读取其内容，然后将其关闭。所以没有办法知道哪些程序可能打开了文件，但这也意味着您不需要知道文件是否打开，只有当您的代码使用句柄时才需要知道文件是否打开。

# python - Python轴突二进制文件

> ID：15951319
> 
> 赞同：2
> 
> 时间：2013-04-11T14:24:41.310
> 
> 标签：python, mingw

我想在 python 中阅读 Axon Binary File (ABF)；我找到了这个[http://www.stimfit.org/doc/sphinx/stfio/index.html](http://www.stimfit.org/doc/sphinx/stfio/index.html)但构建说明仅适用于 Linux ......目前我正在使用 Windows 和 pythonxy 发行版。有人可以帮助我了解如何仅使用 mingw32 和 python 构建 stfio 库吗？:)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:55:47.690

您要链接的模块的[谷歌代码页有可用的](https://code.google.com/p/stimfit/)[Windows 安装程序文件](https://code.google.com/p/stimfit/downloads/list)。

# java-native-interface - jni system.loadlibrary 如何与 C 文件中的全局变量交互

> ID：15951320
> 
> 赞同：0
> 
> 时间：2013-04-11T14:24:43.027
> 
> 标签：java-native-interface, global-variables

如果我在 C 文件中有一个全局变量 int A=0。我有C中的功能：

```
int a()
{
  A++;
  return A;
} 
```

如果我在 Java 应用程序中调用 a() 一次，我将返回 A=1。如果我再次调用 a()，我将返回 A=2; 所以我猜当本机库加载到java应用程序中时，全局变量被固定到内存中？请让我知道我的猜测是否正确。谢谢

# android - 安卓。存储数据的最佳和最安全的方式是什么（来自 Web 服务的更新）

> ID：15951329
> 
> 赞同：0
> 
> 时间：2013-04-11T14:24:59.327
> 
> 标签：android, database, web-services, security

我看到了类似的问题，但它们不符合我的要求。

我有一个应用程序不时需要从 Web 服务进行更新。数据包含 url、description、title 等字段。从 200k 到 400k 条目。它在本地使用，并且经常在这些数据中进行搜索（取决于用户的活动）。

用户不应访问数据，并且搜索需要尽可能快。我知道没有办法让它 100% 不可读，一切都可以逆向工程和解密（我必须将加密密钥保存在手机上）。我的目标是让它尽可能地困难。

我有几个选择：1.加密服务器上的数据并将其作为二进制文件发送到手机。每次需要时解密它 2\. 也将数据作为文件发送。读取它，存储到本地数据库 3\. 将它作为 JSON（可能已加密）获取，存储到数据库或文件

使用 JSON 有一个优势，因为它更容易实现本地数据和远程数据之间差异的更新。

还有一个关于数据库的问题。每次我想查找某些东西时，我是否应该存储所有加密并解密的条目？它可能会影响手机的性能。

还有一个可能的保护层 - 使加密密钥动态化。每天一次从服务器获取密钥，重新加密存储的数据，第二天密钥更改。但是我认为这是一个开销。告诉我是否不是。

你会选择什么选项？有没有更好的解决方案？

PS数据库将每天更新。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:34:36.853

我会将数据存储在 SQLite 中，但也会使解密方案更加复杂，至少使用两个密钥......一个存储在共享库中，另一个从服务下载并使用该密钥解锁。

这也适用于您的构思策略 - 您可以拥有一个 APK 随附的“设备”密钥 - 作为硬编码字节 [] 嵌入 .SO 中，另一个“每日”密钥将用于打开“每日” ' 数据更新。虽然，我宁愿使用字节数组格式的“每日”密钥，但永远不要以任何形式将它保存在设备上，除非它只在使用期间在内存中解密。这将是对我所做的升级，我只是将该密钥保存为 base64 编码的设备密钥加密字符串。

使用 SQLite 相当简单，您可以在此处查看 - [Android Database to Array](https://stackoverflow.com/questions/15415623/android-database-to-array/15415841#15415841)。

我在这里做了类似于我正在解释的事情（但是没有更新每日密钥） -[没有解密我加密的内容](https://stackoverflow.com/questions/12198228/not-decrypting-what-i-crypted)。

看看并讨论:)

# node.js - 访问在本地计算机上运行的 node.js

> ID：15951334
> 
> 赞同：0
> 
> 时间：2013-04-11T14:25:10.150
> 
> 标签：node.js, webserver

我在 Mac 上运行 node.js 服务器并希望与其他人共享 URL。

当我在正确的端口上访问我的公共 IP 时，这不起作用。

是否有另一种设置方式使其可公开访问？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T11:59:13.523

`<Your Mac's IP>:<node server's Port>`在本地尝试另一台计算机。您也可以使用`<Your external IP>:<node server's Port>`，但您需要在路由器中端口转发端口。

# iphone - iphone开发：与服务器通信并推送到另一个视图

> ID：15951342
> 
> 赞同：1
> 
> 时间：2013-04-11T14:25:26.660
> 
> 标签：iphone, ios, objective-c, cocoa-touch, connection

好吧，假设我有两个视图控制器“ViewControllerA”和“ViewControllerB”。我正在做的是当在 viewControllerA 中按下按钮时，我的本地服务器返回一个值并将其存储在变量“用户”中。之后，我将此变量传递给 viewControllerB。

实际上我可以成功地完成这两个过程，但不能同时完成。我的意思是我可以接收来自服务器的响应并将其存储在字符串变量中。我通过使用委托方法来做到这一点：

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

所以这边没有问题。

另一方面，我也可以使用以下方法将变量从 viewControllerA 传递给 viewControllerB：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"vcSegue"]){
        ViewControllerB *controller = (ViewControllerB *)segue.destinationViewController;
        controller.stringVariable = @"content of the string";
    }
} 
```

我的想法是，当我想将我拥有的字符串变量从服务器传递到 viewControllerB 时，我遇到了一个变量为空的问题。那么如何控制推送动作呢？因为我的理解是`-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`应该在`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`我的意思之后工作，我应该成功地从服务器获得响应，然后应该执行推送操作，但我不知道该怎么做。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:30:12.303

您可能需要考虑允许 ViewController B 通过可能传递一个 ID 并让它自己调用来加载它自己的详细数据。您可以在加载数据时显示进度 HUD。

如果你想传递一个标识符，你可以使用自定义的 init 函数：

```
- (id)initWithEvent: (NSString *) identifier
{
    self = [super init];
    if (self) {
        // Custom initialization
        theIdentifier = identifier;                
     }
      return self;
} 
```

# c# - 为什么我在以下代码中收到“服务器标签格式错误”？

> ID：15951347
> 
> 赞同：0
> 
> 时间：2013-04-11T14:25:33.800
> 
> 标签：c#, asp.net, webforms

我知道我错过了一些东西，但我有限的经验阻碍了我。有什么建议吗？谢谢你的帮助！

页面代码：

```
<asp:Repeater ID="Repeater1" runat="server">
            <ItemTemplate>
                <asp:Image runat="server" ID="image1" ImageUrl="<%# DataBinder.Eval(Container.DataItem, "url") %>" />
            </ItemTemplate>
        </asp:Repeater> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        var dt = new DataTable("images");
        dt.Columns.Add("url");
        dt.Rows.Add("http://www.boeing.com/assets/images/defense-space/military/p8a/images/P8-A_index.jpg");
        dt.Rows.Add("http://www.tractorbynet.com/forums/attachments/power-trac/258427d1333048884-p-8-replacing-p3c-p-8a_mma_changed_wing_lg.jpg");

        var ds = new DataSet();
        ds.Tables.Add(dt);

        Repeater1.DataSource = ds.Tables[0];
        Repeater1.DataBind();
    } 
```

错误： ![在此处输入图像描述](https://i.stack.imgur.com/FNEni.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:32:21.127

使用单引号作为

```
ImageUrl='<%# DataBinder.Eval(Container.DataItem, "url") %>' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:27:35.593

这是因为您的“”在这里与您的 URL 参数混合匹配：

```
<asp:Image runat="server" ID="image1" ImageUrl="<%# DataBinder.Eval(Container.DataItem, "url") %>" /> 
```

应该：

```
<asp:Image runat="server" ID="image1" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "url") %>' /> 
```

# java - java 弃用

> ID：15951349
> 
> 赞同：-4
> 
> 时间：2013-04-11T14:25:35.960
> 
> 标签：java, annotations, deprecated

我将弃用java中的一个类。

```
@Deprecated
class deprecatedClass 
```

我有这个不推荐使用的类的列表，所以也要在`@Deprecated`这里添加标签。

```
@Deprecated
List<deprecatedClass> listOfDeperecatedClass 
```

我有一个方法叫做

```
private populateListOfDeperecatedClass 
```

这是一种私有方法。那么我是否也需要`@Deprecated`为此方法添加标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:29:00.357

检查[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.6)以了解有关已弃用的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:29:47.440

标记私有方法@Deprecated 是没有意义的。这是您班级用户的信息，如果此方法是私有的并且未提及使用，请不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:29:03.323

是的，如果包含该方法的类未被弃用。所有 private 修饰符的意思是不能从类外部调用该方法。如果您不将其标记为已弃用，则仍然可以从类中调用它，而无需通知用户它已弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:29:33.613

将私有方法标记为已弃用没有什么意义。它可以......根据定义......只能由当前类使用。要么立即更换/删除它，要么保持原样。

弃用主要用于标记不同类之间有问题或过时的依赖关系。

话虽如此，弃用私有方法是合法的……如果您认为它会有所帮助。

# javascript - 我可以使用 javascript 检测移动设备并限制对普通浏览器的访问吗？

> ID：15951352
> 
> 赞同：2
> 
> 时间：2013-04-11T14:25:45.573
> 
> 标签：javascript, redirect, mobile, browser

我希望我的网页检测用户是否正在使用手持设备，如果是，则允许访问移动站点，如果没有则重定向到主站点。我假设这将在 JavaScript 中完成。任何人都可以帮助我或指出我正确的方向。

编辑

我仍然想使用 javascript，因为它是我在整个项目中使用的语言。

解决了

```
<script language="javascript"> 

 var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
          if (mobile) {
              window.location.replace("http://scmweb.infj.
              ulst.ac.uk/~b00519427/finalwebsite/homepage.html");
          }
          else
            window.location.replace("http://scm.ulster.ac.uk/");

   </script> 
```

解决了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:30:42.883

要真正强制执行特定站点，JS 不是正确的选择，因为它很容易被禁用。因此，我会提出服务器端的决定和执行。为此，您可以使用 .htaccess 文件和 USER_AGENT 规则，如[本答案](https://stackoverflow.com/questions/3680463/mobile-redirect-using-htaccess)中所述。

# mysql - 在 VALUES 子句 MYSQL 中执行语句

> ID：15951353
> 
> 赞同：1
> 
> 时间：2013-04-11T14:25:47.277
> 
> 标签：mysql, stored-procedures, sql-insert

我正在尝试使用存储过程中 EXECUTE 语句中的值填充表。有没有办法执行这个或类似的东西。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `mysql`.`ShowUserGrants` $$
CREATE PROCEDURE mysql.ShowUserGrants()
BEGIN
   DECLARE done BOOLEAN DEFAULT FALSE;
   DECLARE strGrant CHAR(100);
   DECLARE cur1 CURSOR 
      FOR SELECT CONCAT("SHOW GRANTS FOR '",user,"'@'",host,"';") 
          FROM mysql.user 
          WHERE host!='localhost';
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = true;

   OPEN cur1;

   read_loop:LOOP
     FETCH cur1 INTO strGrant;
    IF done THEN
  CLOSE Cur1;
      LEAVE read_loop;
    END IF;
    SET @a = strGrant;
    PREPARE strStmt FROM @a;
    INSERT INTO user_grants (grants) VALUES(EXECUTE strStmt);
/*  EXECUTE strStmt; */
    DEALLOCATE PREPARE strStmt; 
  END LOOP;

END $$
DELIMITER ; 
```

EXECUTE 语句按我的意愿工作，但需要填充表 user_grants。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T16:57:08.313

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `mysql`.`ShowUserGrants` $$

CREATE PROCEDURE mysql.ShowUserGrants()
BEGIN
   DECLARE done BOOLEAN DEFAULT FALSE;
   DECLARE strGrant CHAR(100);
   DECLARE cur1 CURSOR 

      FOR SELECT CONCAT("SHOW GRANTS FOR '",user,"'@'",host,"';") 
          FROM mysql.user
          WHERE host!='localhost';

   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = true;

   OPEN cur1;

   read_loop:LOOP

     FETCH cur1 INTO strGrant;

     IF done THEN
       CLOSE Cur1;
       LEAVE read_loop;
     END IF;

    SET @a = 'INSERT INTO user_grants(grants) VALUES(?)';
    PREPARE strStmt FROM @a;
    SET @var = strGrant;
    EXECUTE strStmt USING @var;
    DEALLOCATE PREPARE strStmt; 
  END LOOP;
END $$

DELIMITER ; 
```

或者更好，将 sp body 替换为

```
INSERT INTO user_grants(grants)
    SELECT CONCAT("SHOW GRANTS FOR '",user,"'@'",host,"';")
    FROM mysql.user 
    WHERE host!='localhost'; 
```

# html - 仅将 html 表转换为一堆 div

> ID：15951360
> 
> 赞同：0
> 
> 时间：2013-04-11T14:26:11.687
> 
> 标签：html, html-table

我需要你的帮助。

如何转换现有的 HTML 表格，如下所示，并将表格转换为功能齐全的 div 表格，同时仅使用 s 创建表格？

下面是我的 HTML 代码：

```
<!DOCTYPE html>

<html>

<head>

<style type="text/css">
#test {
    border: 0;
    width: 100%;
    border-collapse: collapse;
}
#test td {
    border: 1px solid blue;
}
</style>

</head>

<body>
<table id="test">
    <tr>
        <td>row1col1</td>
        <td>row1col2</td>
        <td>row1col3</td>
    </tr>
    <tr>
        <td>row2col1</td>
        <td>row2col2</td>
        <td>row2col3</td>
    </tr>
    <tr>
        <td>row3col1</td>
        <td>row3col2</td>
        <td>row3col3</td>
    </tr>
    <tr>
        <td>row4col1</td>
        <td>row4col2</td>
        <td>row4col3</td>
    </tr>
</table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:35:18.407

您可以使用 Notepad++ 之类的程序并开始替换。

`<td>`用`<div>`和`</td>`替换所有`</div>`

然后，将所有替换`<tr>`为`<div class="tr">`，最后`</tr>`替换为另一个`</div>`

完成所有表格标签的转换后，您可以设置如下内容：

```
div {display:table-cell}
div.tr {display:table-row} 
```

~~`display`和不同的玩~~

`table`然后手动删除开始和结束标签（这很简单）。

最后你可以设计一点样式，在内部添加一些`border`and 。`padding``div`

[你可以在这里](http://www.table2css.com/articles/how-convert-manually-your-html-tables-css)得到一些额外的信息

编辑：由于 BenM 是对的，我更新了 anwser 因为需要更多信息。

# java - 为什么 Adapters getView(..) 方法中的条件不适用于 ListView

> ID：15951366
> 
> 赞同：0
> 
> 时间：2013-04-11T14:26:28.490
> 
> 标签：java, android, listview, baseadapter

我有一个 ListView，在其中显示一些产品。我使用扩展 BaseAdapter 类的对象来填充 ListView，更准确地使用 getView(..) 方法。我在每个 itemView 上都有一个 TextView“链接”，如果用户点击它将转到网页。在我的基本适配器中，只有当我的产品包含链接时，我才会在 TextView 上设置一个侦听器。我已经在我的 getView(..) 方法中完成了调试，一切正常，但是在它退出 getView 方法后，如果有一个项目没有链接，它将从另一个项目中获取链接/侦听器列表视图。

适配器类：

```
public class MatchListBaseAdapter extends BaseAdapter {

private static ArrayList<Match> matchesArrayList;
private LayoutInflater l_Inflater;
private OnClickListener onClickListener;

public MatchListBaseAdapter(Context context, View.OnClickListener listener, ArrayList<Match> results,Activity a) {
    matchesArrayList = results;
    onClickListener = listener;
    l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
    return matchesArrayList.size();
}

public Object getItem(int position) {
    return matchesArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.itemlist_match, null);
        holder = new ViewHolder();

        holder.name = (TextView) convertView.findViewById(R.id.oferNameMLI2);
        holder.expireDate = (TextView) convertView.findViewById(R.id.expireDateMLI);
        holder.price = (TextView) convertView.findViewById(R.id.priceMLI);
        holder.companyName = (TextView) convertView.findViewById(R.id.compNameMLI);
        holder.productImage = (ImageView) convertView.findViewById(R.id.productImageMLI);
        holder.companyImage = (ImageView) convertView.findViewById(R.id.companyImageMLI);
        holder.description = (TextView) convertView.findViewById(R.id.moreDetailsMLI);
        holder.digitalySigned = (ImageView) convertView.findViewById(R.id.digitalSignatureImageView);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag(); 
    }

        //populating the holder.. doesn`t have any relevance..

    if(matchesArrayList.get(position).getCompanyLink() != null){
        holder.companyImage.setOnClickListener(onClickListener);
        holder.companyImage.setTag(position);
    }

    return convertView;
}

static class ViewHolder {

    TextView name;
    TextView expireDate;
    TextView price;
    TextView companyName;
    TextView description;
    ImageView productImage;
    ImageView companyImage;
    ImageView digitalySigned;
} 
```

}

创建活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview_layout);

    matches = DataManager.getInstance().getListSubscription().get(DataManager.getInstance().getSubscriptionPosition()).getMatchesList();

    ListView lv1 = (ListView) findViewById(R.id.listView_layout);
    DataManager.getInstance().setAdapterMatch(new MatchListBaseAdapter(this, this, matches,this));
    lv1.setAdapter(DataManager.getInstance().getAdapterMatch());

} 
```

只想再次提一下，我已经在 getView(..) 方法中进行了调试，没关系，流程是正确的，但是之后`the items in the listView that doesn't supposed to have a listener on the TextView it had from the other items.`

`Also this happens always for the first item in the listView .. and it is populated with the link from the last item in the listView that contains a link.`

我已经为此问题进行了很多搜索，但没有找到任何相关内容，但我认为我的 convertView 有问题，但我无法弄清楚..

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:52:25.327

问题是，当您重用视图而不为其设置显式`onClickListener`时，它仍然包含来自另一个产品的旧侦听器 - 来自被重用的视图。尝试进行如下更改：

```
if(matchesArrayList.get(position).getCompanyLink() != null){
    holder.companyImage.setOnClickListener(onClickListener);
    holder.companyImage.setTag(position);
}
else {
    holder.companyImage.setOnClickListener(null);
} 
```

# nginx - 使用 Nginx 时的 Delayed_Job NoMethodError

> ID：15951367
> 
> 赞同：0
> 
> 时间：2013-04-11T14:26:39.590
> 
> 标签：nginx, ruby-on-rails-3.2, delayed-job, nomethoderror

我在使用 Nginx 的生产环境中实现**Delayed_Job_Active_Record gem 时遇到问题。**用户提交了一个“联系我们”表单，Nginx 调用了相关的控制器操作，以下代码行失败：

```
@contact.delay.send_contact_form 
```

其中相关方法为：

```
def send_contact_form
   ContactMailer.contact_us(self).deliver
end 
```

**开发环境：OK**

*   在我的本地机器上，我有 Webrick 提供的页面。一切运行良好，延迟的作业通过“Delayed_Jobs”表并发送电子邮件。

**生产环境 - Rails 控制台：好的**

*   在服务器上，如果我手动创建`@contact`和调用`@contact.delay.send_contact_form`，延迟的作业会通过延迟的作业表并发送电子邮件。

**生产环境 - Webrick：好的**

*   在服务器上，如果我启动 Rails Webrick 服务器并`@contact`通过 Web 界面输入数据，然后提交作业，则会通过延迟的作业表并发送电子邮件。

**生产环境 - Nginx：错误**

*   该应用程序目前由 Nginx 提供服务。
*   如果我通过 Nginx 访问界面并输入数据`@contact`并提交页面会挂起。
*   生产日志在控制器操作上给出以下错误，（参考上面的行）：

    > NoMethodError（#< Contact:0x000000052962b0> 的未定义方法“延迟”）

我还确认 Rails、Ruby 以及 Delayed_Job_Active_Record 和 Daemons gem 的版本在两种环境中是相同的。

任何帮助将不胜感激，因为我已经坚持了一段时间。我想找到一个与 Nginx 一起使用的解决方案，它可以为我提供与“延迟作业”相同的功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T09:04:38.677

事实证明，问题在于 Unicorn/Nginx 在部署代码更新时没有重新启动，导致它们的配置不正确。将 Devise 和其他 gem 添加到应用程序时也会出现此问题。

最初的解决方案是在部署后（通过 Capistrano）登录到 VPS shell 并运行以下命令：

**重启独角兽：**

```
/etc/init.d/unicorn_esg stop
/etc/init.d/unicorn_esg start 
```

其中 *unicorn_esg* 是我的 deploy.rb 配置中使用的应用程序的 Unicorn 引用。

**重启 Nginx：**

```
sudo service nginx restart 
```

下一步是将其合并到 deploy.rb 脚本的末尾，以便在每次部署结束时自动运行。

# java - 如何查看一个类是否内置在 Java 中？

> ID：15951378
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:26:57.550
> 
> 标签：java, import, stringbuffer

我目前正在做一个 Java 项目，并且觉得 StringBuffer 对执行这个特定任务有很大帮助，我正在“构建”一个矩阵的字符串表示：

```
/**
 * Returns a String representation of the Matrix using the getIJ getter
 * function. You should use MaF.dF to format the double numbers to a
 * sensible number of decimal places and place the numbers in columns.
 * 
 * @return A String representation of the Matrix
 */
public String toString() {
    //String stringBuilder = new String
    StringBuffer beep = new StringBuffer;
    for(i=0; i<m-1; i++){
        for(j=0; j<n-1; j++){

        }
    // You need to fill in this method
} 
```

我已经在 J​​ava 程序中单独尝试过，看起来还不错，但是后来我尝试了一些在线的示例 Java 程序，但它没有编译。是`StringBuffer`内置在 Java 中的，还是需要导入包？我不允许为此项目导入任何包。

另外，如果有人能告诉我 MaF.dF 到底是什么？它是如何使用的？我认为它是 MaInput 的一部分，我在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:30:11.893

`StringBuffer` **内置于 Java中**，您无需导入任何包。（它的包是`java.lang`“自动”导入的。）

请参阅：[http ://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)

检查下面的代码。它在没有任何导入的情况下运行。

```
public class StringBufferUse {
    public static void main(String[] args) {
        StringBuffer sb = new StringBuffer();
        sb.append("a");
        sb.append("b");
        sb.append(123);
        System.out.println(sb.toString()); /* prints "ab123" */
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:31:26.410

使用[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)而不是[`StringBuffer`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html). `String`这是构建s的推荐方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:33:19.393

您可以在 JDK 的 Javadoc 中找到 JDK 的类：

[http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

您不必显式地从`java.lang`. 对于其他类，您需要定义导入语句或使用完全限定的名称（例如`java.util.List`，而不是简单的`List`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T14:33:24.253

这就是[Javadoc](http://docs.oracle.com/javase/7/docs/api/)的用途。

只需确保您的文档与您使用的 Java 版本相匹配。这适用于 Java 7，如果您使用的是 Java 1.6 或 Java 1.5，请确保您查看的是正确的文档。

检查 1.7 的 Javadoc，是的，[StringBuffer](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)在那里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T14:34:04.597

> StringBuffer 是内置在 Java 中的，还是需要导入包？

[StringBuffer](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)在`java.lang`. 如有疑问，请务必查看 Internet 上的大量 Java 文档资源。

> 另外，如果有人能告诉我 MaD.dF 到底是什么/它是如何使用的[我认为它是 MaInput 的一部分，我在网上找不到任何东西]，那将非常有帮助。

我认为评论指的是对象 MaD.dF 或其他东西。如果您发布了代码的其他部分或指向您获取代码的链接，这将很有用。

# java - 类不从另一个类检索信息

> ID：15951382
> 
> 赞同：0
> 
> 时间：2013-04-11T14:27:01.033
> 
> 标签：java

杂货店

```
import java.awt.*;

import javax.swing.*;
import java.awt.event.*;
import java.text.DecimalFormat;

/**
   Grocery shop class

*/

public class Grocery_shop extends JFrame
{

   private quantitypanel qty; // A panel for quantity
   private Grocery_items items;       // A panel for routine charge checkboxes
   private JPanel buttonPanel; // A panel for the buttons
   private JButton calcButton;         // Calculates everything
   private JButton exitButton;         // Exits the application

   private invoiceClass invoice;

   /**
      Constructor
   */

   public Grocery_shop()
   {
      // Display a title.
      setTitle("Victor's Grocery Shop");

      // Specify what happens when the close button is clicked.
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

 // Create a NonRoutinePanel object.
      qty = new quantitypanel();
    //  qty.setBackground(Color.white);

      // Create a RoutinePanel object.
      items = new Grocery_items( qty );

      // Build the panel that contains the buttons.
      buildButtonPanel();

      // Add the panels to the content pane.
      add(items, BorderLayout.WEST);
      add(qty, BorderLayout.EAST);
      add(buttonPanel, BorderLayout.SOUTH);

      // Pack and display the window.
      pack();
      setVisible(true);
   }

   /**
      The buildButtonPanel method creates a panel containing
      buttons.
   */

   private void buildButtonPanel()
   {
      // Create a button to calculate the charges.
      calcButton = new JButton("Add Charges");

      // Add an action listener to the button.
      calcButton.addActionListener(new CalcButtonListener());

      // Create a button to exit the application.
      exitButton = new JButton("Exit");

      // Add an action listener to the button.
      exitButton.addActionListener(new ExitButtonListener());

      // Put the buttons in their own panel.
      buttonPanel = new JPanel();
      buttonPanel.add(calcButton);
      buttonPanel.add(exitButton);
   }

   /**
      CalcButtonListener is an action listener class for the
      calcButton component.
   */

   private class CalcButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {
         double totalCharges; // Total charges

         // Create a DecimalFormat object to format output.
         DecimalFormat dollar = new DecimalFormat("#,##0.00");

         // Calculate the total charges
         totalCharges = items.getCharges(); 
                 //+ nonRoutine.getCharges();

         // Display the message.
         JOptionPane.showMessageDialog(null, "Total Charges: $" + 
                                             dollar.format(totalCharges));
         invoice = new invoiceClass();
         invoice.getClass();
      }
   } // End of inner class

   /**
      ExitButtonListener is an action listener class for the
      exitButton component.
   */

   private class ExitButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {

         System.exit(0);
      }
   } // End of inner class

   /**
      The main method creates an instance of the JoesAutomotive
      class, causing it to display its window.
   */

   public static void main(String[] args)
   {
      Grocery_shop grocery = new Grocery_shop();
   }
} 
```

Grocery_items

```
import java.awt.*;
import javax.swing.*;

import java.text.DecimalFormat;

/**
   RoutinePanel class

*/

public class Grocery_items extends JPanel
{
   // Named constants for charges
   private final double Baked_Beans  = 0.35;
   private final double Cornflakes = 1.75;
   private final double Sugar = 0.75;
   private final double Tea_Bags = 1.15;
   private final double Instant_Coffee = 2.50;
   private final double Bread = 1.25;
   private final double Sausage = 1.30;
   private final double Eggs = 0.75;
   private final double Milk = 0.65;
   private final double Potatoes = 2.00;

   private quantitypanel qty; // A panel for quantity

   private JCheckBox baked_beans_box;     // Check box for baked_beans
   private JCheckBox CornflakesBox;       // Check box for cornflakes
   private JCheckBox SugarBox; // Check box for sugar box
   private JCheckBox Tea_Bags_Box;    // Check box for tea bag
   private JCheckBox Instant_Coffee_Box;    // Check box for Instant_Coffee_Box
   private JCheckBox Bread_Box;       // Check box for bread box
   private JCheckBox SausageBox;  // Check box for sausage box
   private JCheckBox eggbox;  // Check box for egg box
   private JCheckBox milkbox;  // Check box for milk
   private JCheckBox potatoesbox;  // Check box for potatoes

 //  private JTextField baked_beans_JT; 
   /**
      Constructor
   */

   public Grocery_items(quantitypanel qty)
   {
    this.qty = qty;
      DecimalFormat dollar = new DecimalFormat("#,##0.00");

      // Create the check boxes.
      baked_beans_box = new JCheckBox("Baked_Beans ($" +
                                dollar.format(Baked_Beans) + ")");

      CornflakesBox = new JCheckBox("Cornflakes ($" +
                              dollar.format(Cornflakes) + ")");
      SugarBox = new JCheckBox("Sugar ($" + 
                                    dollar.format(Sugar) + ")");
      Tea_Bags_Box = new JCheckBox("Tea Bags ($" + 
                                 dollar.format(Tea_Bags) + ")");
      Instant_Coffee_Box = new JCheckBox("Instant Coffee_Box ($" + 
                                 dollar.format(Instant_Coffee) + ")");
      Bread_Box = new JCheckBox("Bread Box ($" + 
                              dollar.format(Bread) + ")");
      SausageBox = new JCheckBox("Suasages ($" + 
                                   dollar.format(Sausage) + ")");
      eggbox = new JCheckBox("Eggs ($" + 
              dollar.format(Eggs) + ")");

      milkbox = new JCheckBox("Milk ($" + 
              dollar.format(Milk) + ")");
      potatoesbox = new JCheckBox("Potatoes ($" + 
              dollar.format(Potatoes) + ")");

      // Create a GridLayout manager.
      setLayout(new GridLayout(10, 1));

      // Create a border.
      setBorder(BorderFactory.createTitledBorder("Grocery Items"));

      // Add the check boxes to this panel.
      add(baked_beans_box);
      add(CornflakesBox);
      add(SugarBox);
      add(Tea_Bags_Box);
      add(Instant_Coffee_Box);
      add(Bread_Box);
      add(SausageBox);
      add(eggbox);
      add(milkbox);
      add(potatoesbox);

   }

   /**
      The getCharges method calculates the routine charges.
      @return The amount of routine charges.
   */

   public double getCharges()
   {
      double charges = 0;

      if (baked_beans_box.isSelected())
         charges += Baked_Beans * qty.getBeanqty();
      if (CornflakesBox.isSelected())
         charges += Cornflakes;
      if (SugarBox.isSelected())
         charges += Sugar;
      if (Tea_Bags_Box.isSelected())
         charges += Tea_Bags;
      if (Instant_Coffee_Box.isSelected())
         charges += Instant_Coffee;
      if (Bread_Box.isSelected())
         charges += Bread;
      if (SausageBox.isSelected())
         charges += Sausage;
      if (eggbox.isSelected())
          charges += Eggs;
      if (milkbox.isSelected())
          charges += Milk;
      if (potatoesbox.isSelected())
          charges += Potatoes;

      return charges;
   }
} 
```

数量面板

```
 //import java.awt.LayoutManager;
    import java.awt.GridLayout;
    //import javax.swing.JCheckBox;
    //import javax.swing.JLabel;
    import javax.swing.BorderFactory;
    import javax.swing.JOptionPane;
    import javax.swing.JPanel;
    import javax.swing.JTextField;

    public class quantitypanel extends JPanel {
         private JTextField baked_beans_JT;     // JTextField box for baked_beans
           private JTextField Cornflakes_JT;       // JTextField box for cornflakes
           private JTextField Sugar_JT; // JTextField box for sugar box
           private JTextField Tea_Bags_JT;    // JTextField box for tea bag
           private JTextField Instant_Coffee_JT;    // JTextField box for Instant_Coffee_Box
           private JTextField Bread_JT;       // JTextField box for bread box
           private JTextField Sausage_JT;  // JTextField box for sausage box
           private JTextField egg_JT;  // JTextField box for egg box
           private JTextField milk_JT;  // JTextField box for milk
           private JTextField potatoes_JT;  // JTextField box for potatoes

           public quantitypanel()
           {

               //create JTextField.
               baked_beans_JT = new JTextField(5);
               Cornflakes_JT = new JTextField(5);
               Sugar_JT = new JTextField(5);
               Tea_Bags_JT = new JTextField(5);
               Instant_Coffee_JT = new JTextField(5);
               Bread_JT = new JTextField(5);
               Sausage_JT = new JTextField(5);
               egg_JT = new JTextField(5);
               milk_JT = new JTextField(5);
               potatoes_JT = new JTextField(5);

               //initialize text field to 0
               baked_beans_JT.setText("0");
               Cornflakes_JT.setText("0");
               Sugar_JT.setText("0");
               Tea_Bags_JT.setText("0");
               Instant_Coffee_JT.setText("0");
               Bread_JT.setText("0");
               Sausage_JT.setText("0");
               egg_JT.setText("0");
               milk_JT.setText("0");
               potatoes_JT.setText("0");

               //set Layout manager
               setLayout(new GridLayout(10, 1));

               //create border and panel title

              setBorder(BorderFactory.createTitledBorder("Amount"));

              //add text fields to the panel.
              add(baked_beans_JT);
              add(Cornflakes_JT);
              add(Sugar_JT);
              add(Tea_Bags_JT);
              add(Instant_Coffee_JT);
              add(Bread_JT);
              add(Sausage_JT);
              add(egg_JT);
              add(milk_JT);
              add(potatoes_JT);

           }

           public double getBeanqty()
             {
                 try
           {
                 return Double.parseDouble(baked_beans_JT.getText());

           }

           catch(NumberFormatException ev){
               JOptionPane.showMessageDialog(null, "invalid");
           }
                return 0;

           }

    }

invoiceClass

import java.awt.*;

import javax.swing.*;

import java.awt.event.*;
import java.text.DecimalFormat;

public class invoiceClass {
    private Grocery_items items;
    private quantitypanel qty; // A panel for quantity

    {
         double total; // Total charges

 DecimalFormat dollar = new DecimalFormat("#,##0.00");

 qty = new quantitypanel();

 items = new Grocery_items(qty);

         // Calculate the total charges

         double payment = 0.0;
         String input;
     input = JOptionPane.showInputDialog(null, "enter a your payment");
     payment = Double.parseDouble(input);
     total = payment - items.getCharges(); 
      JOptionPane.showMessageDialog(null, "your change is: " + total);

}
} 
```

请使用上面的代码，我正在尝试为该程序制作收据。

我希望在此代码`total = payment - items.getCharges();`中让系统获取总费用并将其从用户输入的数字中减去。在这种情况下，系统只识别付款。

请帮忙..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:54:12.197

`items.getCharges()`返回 0的原因`invoiceClass`是每次`CalcButtonListener` `Action`发生 a 时都会创建一个新实例。这将创建一个新`Grocery_items`实例。

反过来，这会创建新的 GUI 元素，包括复选框。这些复选框在应用程序中不可见，因为它们尚未添加。现在当你去调用时，新创建`getCharges`的选择状态将是（默认状态），所以不会添加任何费用`JCheckBoxes``Grocery_items``false``JCheckBox`

```
public double getCharges() {
   double charges = 0;

if (baked_beans_box.isSelected()) // now false!
   charges += Baked_Beans * qty.getBeanqty(); 
if (...) 
```

因此，解决方案不是创建`Grocery_items`而是`quantitypanel`使用原始实例。

旁白：使用 Java 命名约定具有以*大写*开头的类，例如`QuantityPanel`. 通常不使用下划线，例如`GroceryItems`

# c - 光标在错误的窗口中等待

> ID：15951387
> 
> 赞同：2
> 
> 时间：2013-04-11T14:27:24.287
> 
> 标签：c, sockets, cursor, client, ncurses

我正在开发一个简单的聊天。聊天客户端基于ncurses，有两个窗口：

*   用户输入消息的“输入”窗口。
*   “输出”窗口，用户可以在其中看到其他用户的消息。

我的客户端有两个线程，一个用于从用户那里获取消息，一个用于显示来自服务器的消息。

当用户键入消息时，它们会按预期显示在输入窗口中。

![输入窗口中的光标](https://i.stack.imgur.com/AAV0R.png)

问题是，一旦发送了消息，光标就会在输出窗口中等待，直到按下某个键。

![输出窗口中的光标](https://i.stack.imgur.com/L7sQN.png)

这很烦人（当客户失去焦点时也会发生这种情况）。如何强制光标位于某个窗口中？

相关代码在这里：

```
WINDOW* in;
WINDOW* out;
...
void chatter(int sockfd)
{
    ...
    pthread_create(&sendt, NULL, sender, &sockfd);

    while (1)
    {
        bytes = recv(sockfd, msg, sizeof msg - 1, 0);

        if (bytes != 0)
        {
            if (bytes == -1)
            {
                wprintw(out, "Error receiving message: %s\n", strerror(errno));
            }
            else
            {
                msg[bytes] = '\0';
                wprintw(out, "%s", msg);
            }

            wrefresh(out);
        }
        else
        {
            break;
        }
    }

    pthread_cancel(sendt);
    pthread_detach(sendt);
    ...
}

void* sender(void* pfd)
{
    char msg[MAX_MSG] = "";
    int sockfd = *(int *)pfd;

    while (1)
    {
        mvwgetnstr(in, 0, 0, msg, sizeof msg - 2);
        strcat(msg, "\n");

        if (send(sockfd, msg, strlen(msg) + 1, 0) == -1)
        {
            wprintw(out, "Error sending message: %s\n", strerror(errno));
        }

        werase(in);
    }

    return NULL;
} 
```

# delphi - 停止当前应用程序并运行更新应用程序

> ID：15951389
> 
> 赞同：0
> 
> 时间：2013-04-11T14:27:32.333
> 
> 标签：delphi, delphi-xe3

我正在尝试编写自己的更新源代码来从网络更新我的应用程序，基本上我使用两个 INI 文件。一个在网络上，一个在客户端。客户端保存当前版本号和服务器端 ini 的 url。服务器端 ini 保存最新版本和新下载的 url。

无论如何，一切似乎都很好。文件下载很好，但我想知道如何关闭当前应用程序以运行新下载的文件（安装程序）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:31:56.840

为什么不简单地运行更新程序并立即关闭当前应用程序？

```
ShellExecute(nil, nil, PathToUpdater, nil, nil, SW_SHOWNORMAL);
Application.Terminate; // Or some other way 
```

更新程序肯定不介意原始进程在其生命周期中存在几毫秒吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T14:46:35.950

正常的程序是这样的：

1.  主程序检测到更新已准备就绪。
2.  主程序以静默方式将更新下载到临时位置。下载在后台线程中执行。
3.  下载完成并验证后，主程序重新启动。
4.  每当程序启动并注意到有新的更新等待安装时，它就会终止并运行一个单独的可执行文件来执行更新。
5.  更新完成后，程序将再次重新启动。

这样做的主要好处是用户不必等待下载发生。一个可能需要时间并且可能失败的过程。从而为用户提供尽可能少的停机时间。

有一个棘手的场景需要处理。那是程序启动更新程序然后自行关闭的时间。如果在更新打开可执行文件之前主进程没有关闭，那么更新程序可能会失败。处理这个问题的最优雅的方法是让主程序将其 PID 传递给更新程序。然后更新程序可以打开该进程的句柄并等待它发出信号。

另一种非常相似的方法是这样的：

1.  主程序检测到更新已准备好并触发单独的可执行文件以执行更新。或者，主程序会定期启动更新程序以检查是否有可用的更新。
2.  更新过程以静默方式将更新下载到临时位置。
3.  下载完成并验证后，更新程序会通知主进程终止。
4.  一旦主进程终止（更新程序等待它这样做），更新程序就会执行更新。
5.  更新完成后，主程序重新启动。

老实说，第二种方法对我来说似乎更有吸引力。它具有更好的关注点分离。主程序与其业务有关。更新者关心它的工作。显然，他们之间必须有互动和合作，但这被保持在最低限度。

# database - 在一个工作簿中将 210 个工作表合并为一张工作表

> ID：15951392
> 
> 赞同：-4
> 
> 时间：2013-04-11T14:27:37.563
> 
> 标签：database, excel, vba

我在一张工作表中有 210 张纸。如何将 210 张纸合并为一张纸？第一个工作表的第一行是数据标签，而其他工作表的第一行是没有标签的数据。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:35:22.637

像这样的东西：

```
Sub CopySheets()
'
Dim xSheet As Worksheet
Dim oRange As Range
Dim sTargetSheet As String
'
' this is the results sheet name
sTargetSheet = "Sheet2"

For Each xSheet In ThisWorkbook.Worksheets
    If xSheet.Name <> sTargetSheet Then
        xSheet.UsedRange.Copy
        Worksheets(sTargetSheet).Range("A" & Worksheets(sTargetSheet).Rows.Count).End(xlUp).PasteSpecial xlPasteAll
    End If
Next
End Sub 
```

那应该让你开始。

# jquery - 在spring客户端中获取用户信息

> ID：15951399
> 
> 赞同：3
> 
> 时间：2013-04-11T14:28:06.743
> 
> 标签：jquery, spring, authentication

我有一个使用 spring3 执行用户身份验证的 spring 3 应用程序。在服务器端，我可以访问从 SecurityContextHolder.getContext() 登录的当前用户。但我想在我的 jquery 页面中访问在客户端登录的当前用户。spring 3 是否提供任何功能？有人可以就此提出一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:00:46.097

据我所知，在 Spring Security 中没有将主体和权限公开给 JavaScript 的神奇方法。

你可以尝试自己做。提供一个控制器，负责加载主体和权限（通过 SecurityContextHolder）并将它们打印为 JSON。从您的页面中调用此控制器并在 JS 中使用结果。

从安全的角度来看，您不能信任此信息（例如，因为用户可以使用 Chrome 检查器修改您的 JS）。您可以做两件事来使其更安全：

1.  缩小你的 JS 文件。
2.  确保从 JS 执行的所有操作也将在服务器端进行检查。

祝你好运。

# php - CakePHP：如何使用可能为空的搜索参数的 Find 方法 + AJAX 请求

> ID：15951402
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:21.050
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我正在使用 CakePHP v2.3.x 并且在编辑页面上我需要使用搜索结果动态更新页面......

我正在从我的一个`Views/Tests/admin_edit.php`视图页面对我的`QuestionsController.php`.

这是处理请求的操作（到目前为止）：

```
public function admin_search() {
    if ($this->request->is('post')) {
        $searchdata = $this->request->data;
        $r = $this->Question->find('all', array('conditions' => array('Question.id' => $searchdata['id'])));
        echo json_encode($r);
        exit;

    }
} 
```

它目前只返回 ID 与用户输入的问题匹配的问题，但完成的版本将搜索几个不同的字段。我知道如何通过向条件数组添加额外的键/值对来做到这一点。但是，**我不知道如何使这些字段可选。**如果用户输入问题名称而不是 id 怎么办，反之亦然？是否有配置使 CakePHP 将忽略任何空字段条件？

同样，有没有办法设置运算符，例如，我可以匹配子字符串或整数范围？**更新**：我在文档中找到了[这个。](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:34:44.950

我会先自己删除任何空条目。

因此，假设您有一个`$searchdata`包含三个可选字段的数组，其中一个是空白的。首先构建您的条件数组：

```
$searchdata = array("id" => 1, "name" => "", "type" => "foo");
$conditions = array('Question.id' => $searchdata['id'], 'Question.name' => $searchdata['name'], "Question.type" => $searchdata['type']); 
```

（或者如果你想变得花哨）

```
foreach($searchdata AS $key => $value) $conditions['Question.' . $key] = $value; 
```

现在清理`$conditions`，摆脱空值：

```
$conditions = array_filter($conditions); 
```

多田：

```
$r = $this->Question->find('all', array('conditions' => $conditions)); 
```

见[http://3v4l.org/JN6PA](http://3v4l.org/JN6PA)

# forms - 如何将 2 个 Web 表单合并为 1 个？

> ID：15951404
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:24.110
> 
> 标签：forms

我需要将这 2 个表单合并为 1 个，以便将电子邮件地址传递给所有 3 个来源。

可能吗？

表格一：

```
<form method="post" id="transparent_redirect_form" name="transparent_redirect_form" action="https://joinalpha.com/launch/signup.php/taster">
<input type="text" id="signup_email_address" name="signup_email_address" placeholder="you@business.com" />
<input type="submit" value="Subscribe" />
</form> 
```

表格 2：

```
<form method="post" action="http://joinalpha.com/blog/signup/"><input type="hidden" name="ip" value="213.106.180.209" />
<input type="text" name="email" id="s2email" value="you@business.com" onfocus="if (this.value == 'you@business.com') {this.value = '';}" onblur="if (this.value == '') {this.value = 'you@business.com';}" />
<input type="submit" name="subscribe" value="Subscribe" />
</form> 
```

每个表单只有一个字段和一个操作 - 将电子邮件地址发送到某处......

任何线索我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:32:06.037

我建议使用javascript。

在表单之外创建一个按钮或其他东西，然后调用表单的提交，然后使用 DOM 更改表单中的操作，并再次调用提交。

# crontab - 重新启动 crontab 在重新启动时不起作用

> ID：15951405
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:28.033
> 
> 标签：crontab

这是 crontab：`@reboot cd /var/test/ && php gearman_test.php`

但是每当我 ssh 并运行时，`ps -aux | grep .php`我都看不到`gearman_test.php`

如果我复制粘贴命令（没有@reboot），它可以从任何目录工作。

如果我现在跑步，`ps -aux | grep .php` 我会看到`gearman_test.php`

系统日志显示： `Apr 11 17:11:48 server CRON[2441]: (root) CMD (cd /var/test/ && php gearman_test.php)`

我也尝试`&`在最后添加一个，但它没有用。

# javascript - Javascript如何将参数转换为键？

> ID：15951406
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:32.667
> 
> 标签：javascript, json, object

我正在尝试以下代码：

```
function doSomething(field, value) { 
   var someObj = { field : value };
   console.log("The object looks like : %j, someObj);
} 
```

我称之为 doSomething('emailid', 'a@b.com');

```
The output was {field : 'a@b.com'}. 
```

如何使字段从函数调用中获取值？

```
Would like to get these values :  {'emailid', 'a@b.com'} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:31:46.460

当您使用对象文字语法定义对象时，您可以像以前一样指定键的名称，`{field: value}`或者您可以使用字符串文字来定义键，例如`{"field": value}`. 不幸的是，没有办法用对象文字语法用变量代替键，但是有一种方法可以实现您的结果。

```
function doSomething(key, value) {
  var someObj = {};
  someObj[key.toString()] = value;
  return someObj;
} 
```

那应该执行您的任务。

# c# - 我们如何验证 mvc3 中的以下下拉列表

> ID：15951407
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:38.643
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3

鉴于我有并且我无法验证下面的 mvc 代码

```
 @Html.DropDownList("PriorityId", (IEnumerable<SelectListItem>)@ViewBag.Priority, "--Please Select One--", new { @id = "ddlPriority", @class = "dropdown" }) 
```

在控制器中我有

```
 private void PriorityDropdownList()
       {
           IEnumerable<SelectListItem> priorityDropdownlist =_PriorityObj.PriorityDropdownlistGet();
           if (priorityDropdownlist != null)
           {
               ViewBag.Priority = priorityDropdownlist;
           }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:37:34.503

尽量避免使用**ViewBag / ViewData**将数据发送到您的视图。根据验证的需要，使用带有数据注释的强类型视图和 ViewModel。

```
public class CreateIssueVM
{
  [Required]
  public string Name { set;get;}

  public List<SelectListItem> Priorities { get; set; }

  [Required]
  public int SelectedPriority { set;get;}
} 
```

在这里，我用属性装饰了`Name`and属性。也就是说，用户需要输入这些，否则会弹出表单提交的验证信息。`SelectedPriority``Required`

在您的`GET`操作中，设置集合属性值并将其发送到视图。

```
public ActionResult Create()
{
  var vm=new CreateIssueVM();
  vm.Priorities =GetPriorities();
  return View(vm);
} 
```

假设`GetPriorities` 方法返回优先级的集合`SelectListItem`。

```
public List<SelectListItem> GetPriorities()
{
  List<SelectListItem> prioList=new List<SelectListItem>();
  prioList.Add(new SelectListItem { Text = "High", Value = "1" });
  prioList.Add(new SelectListItem { Text = "Low", Value = "2" });
  // to do :read from db and add to list instead of hardcoding
  return prioList;
} 
```

现在在我们看来，它是强类型的`CreateIssueVM`

```
@model CreateIssueVM
@using(Html.BeginForm())
{
  @Html.DropDownListFor(x=>x.SelectedPriority,
                     new SelectList(Model.Priorities ,"Value","Text"),"select")
  @Html.ValidationMessageFor(x=>x.SelectedPriority)
  <input type="submit" />
} 
```

`ModelState.IsValid`当您提交表格时，您可以通过检查属性来检查表格是否有效。

```
[HttpPost]
public ActionResult Create(CreateIssueVM model)
{
  if(ModelState.IsValid)
  {
    // save and redirect
  }
  vm.Priorities =GetPriorities();
  return View(vm);
} 
```

如果您也想实现客户端验证，您可以简单地在视图中包含相关的 jquery 非侵入式验证脚本，并在 web.config 中启用客户端验证。

# javascript - asp.net 和 javascript

> ID：15951409
> 
> 赞同：0
> 
> 时间：2013-04-11T14:28:41.547
> 
> 标签：javascript, asp.net

我在 javascript 中为 asp 文本框赋值，如下所示：

```
var tempStorytxt = document.getElementById("<%=txtStory.ClientID%>");
tempStorytxt.Value = TempValue;
alert(tempStorytxt.Value); 
```

但是当我按如下方式在代码隐藏中访问时，txtStory 中没有任何内容

```
 int StoryId = int.Parse(txtStory.Text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:03:13.427

尝试这个;

```
<asp:Button ID="btnTest" runat="server" OnClientClick="setVal()" OnClick="btnTest_Click" Text="Test" /> 
```

你的js函数；

```
 function setVal()
 {
   var tempStorytxt = document.getElementById("<%=txtStory.ClientID%>");
   tempStorytxt.setAttribute("value", tempValue);
   alert(tempStorytxt.getAttribute("value"));
 } 
```

并在按钮单击事件中；

```
 int StoryId = int.Parse(txtStory.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:53:14.677

试试这个：

```
document.getElementById("<%= txtStory.ClientID%>").value = TempValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:35:26.310

使用小 V 作为**txtStorytxt.value**而不是***txtStorytxt.Value***

# c# - c#继承：将父对象强制转换为子对象

> ID：15951411
> 
> 赞同：1
> 
> 时间：2013-04-11T14:28:45.907
> 
> 标签：c#, inheritance, casting

我们知道不可能将父对象强制转换为其子类之一。

那么解决以下问题的好方法是什么：假设我有一个父类“Person”和两个子类：Customer 和 Employee。请注意，Person 类**不是**抽象的（意味着它可以被实例化）。现在我得到了以下方法签名：

```
public Person GetPersonById(long id) 
```

这使得返回 Person 或其子类之一成为可能。如果我使用这种方法，我可以通过 GetType() 检查它是否是孩子。但是，我无法轻松访问特定于子类的字段/方法，因为我不能只转换它。一种方法是为每个子类实现一个构造函数，该构造函数将父类作为参数并返回一个新的子类实例。这样做的缺点是我仍然会有很多重复的代码（因为我还必须为每个孩子分配每个父字段）。

我能想到的另一种方法是将方法更改为：

```
public object GetPersonById(long id) 
```

这样，我可以返回任何课程。我只是检查返回的类的类型，然后正确地转换它。但不知何故，这种方法似乎很脏。

有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:31:15.450

如果它确实是，您可以`Person`转换为：`Customer``Customer`

```
var customer = person as Customer;
if(customer != null)
{
    // the person was really a Customer
} 
```

如果您愿意，可以创建三种方法而不是一种：

```
public Person GetPersonById(long id)
public Customer GetCustomerById(long id)
public Employee GetEmployeeById(long id) 
```

或者使用泛型（但在这种特殊情况下，我对泛型感觉不好）：

```
public T GetPersonById<T>(long id) where T : Person 
```

并称之为：

```
var person = GetPersonById<Employee>(123); 
```

但是您仍然需要在通话时指定您想要获取的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:30:59.090

但实际上，如果对象属于该类型，您可以将父对象转换为它的子类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:30:47.567

使用“是”关键字

```
if(instance is ChildClass)
{
    //...
} 
```

# jquery - 什么是 jQuery 尖括号选择器，比如 $(' ')？

> ID：15951412
> 
> 赞同：8
> 
> 时间：2013-04-11T14:28:45.923
> 
> 标签：jquery, jquery-selectors

有时我会看到类似[`$('<img/>')`](https://stackoverflow.com/questions/6124409/image-size-before-is-in-dom). 与此有何`$('<img/>')`不同，`$('img')`我可以在哪里阅读更多相关信息？

我尝试查看[jQuery 选择器](http://api.jquery.com/category/selectors/)，但没有发现与此格式相关的任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:30:14.500

当传递一个看起来像 HTML 的字符串时，jQuery 函数被重载以构造新的 jQuery 元素。从[文档](http://api.jquery.com/jQuery/#jQuery2)：

> 如果一个字符串作为参数传递给 $()，jQuery 会检查该字符串以查看它是否看起来像 HTML（即，它以 开头`<tag ... >`）。如果不是，则字符串被解释为选择器表达式，如上所述。但是如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。然后创建并返回一个引用这些元素的 jQuery 对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T14:30:01.087

`$('<img/>')` **创建**一个图像，而`$('img')`选择所有当前存在的图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T14:30:16.243

`$('<img />')`创建一个`<img />`要插入 DOM 的新元素。

`$('img')`选择所有现有`<img />`元素。

通常，人们会使用`$('<img />')`以下方式在 DOM 中创建元素：

```
var toAppend = $('<img />');
toAppend.appendTo($('#myDiv')); 
```

而您可以使用`$('img');`选择器来处理 CSS（作为任意示例）：

```
$('img').css('marginTop', 20); 
```

以上将在 DOM 中的每个图像的顶部添加 20px 的边距。

# php - 将用户名和密码与 txt 中的 md5 进行比较？

> ID：15951413
> 
> 赞同：1
> 
> 时间：2013-04-11T14:28:53.807
> 
> 标签：php

我有一个 php 文件：

```
<?php  
 if (isset($_POST['submit'])) { 
    $file_name = 'hash.txt'; 
    $user = md5($_POST['user']); 
    $password = md5($_POST['password']); 
    $handle = fopen('hash.txt',"r"); 
    $read_file = file($file_name);

    if ($user == $read_file[0] and $password == $read_file[1]) { 
        echo 'correct !'; 
    } else { 
        echo 'incorrect !'; 
    } 
} else { 
    echo 'please input something'; 
}
?> 
<body> 
<form action="file_handle3.php" method="post"> 
User<input type="text" name="user"/><br/> 
Password <input type="password" name="password"/> 
<input type="submit" name="submit" value="submit"/> 
    </body> 
```

文件 txt : hash.txt 第一行是 hello 第二行是 world

5d41402abc4b2a76b9719d911017c592

7d793037a0760186574b0282f2f435e7

我想比较 do value 用户输入并将它们转换为 md5 然后与 txt 文件中的比较。我不知道为什么我的代码即使我输入准确的值也不会输出正确的答案（用户：你好密码：世界）。对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:31:39.583

当您使用 file() 时，文件中的每一行都成为数组中的一个项目。

但是，该数组中的每个字符串都*包含*换行符 (\n)。所以你需要确保你做类似的事情......

```
trim($read_file[0],"\r\n"); 
```

...第一的。

# c# - 其他计算机中的 C# 应用程序错误

> ID：15951419
> 
> 赞同：0
> 
> 时间：2013-04-11T14:29:10.873
> 
> 标签：c#, winforms, visual-studio

当我在我开发的计算机上运行我的应用程序时，它可以工作。当我在其他计算机上运行该应用程序时，我收到以下错误。

> ****** *** ******异常文本******* *** ****** System.IO.FileNotFoundException：无法加载文件或程序集“itextsharp，版本=5.4.0.0，Culture=neutral，PublicKeyToken=8354ae6d2174ddca”或其依赖项之一。O sistema não pode encontrar o arquivo especificado。文件名：'itextsharp，版本=5.4.0.0，文化=中性，PublicKeyToken=8354ae6d2174ddca'
> 在 System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks) 在 System.Windows.Forms.Button.OnMouseUp(MouseEventArgs 事件) 在 System.Windows.Forms.Button.OnMouseUp(MouseEventArgs 事件) 的 LoadImagesFromFolder.cc2215415.button3_Click_1(Object sender, EventArgs e)。 Windows.Forms.Control.WndProc(Message& m) 在 System.Windows.Forms.ButtonBase.WndProc(Message& m) 在 System.Windows.Forms.Button.WndProc(Message& m) 在 System.Windows.Forms.NativeWindow.Callback( IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)*****
> 
>  *****警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> ****** *** ******加载的程序集******* *** ****** mscorlib 程序集版本：4.0.0.0 Win32 版本：4.0.30319.296 (RTMGDR.030319-2900)*****
> 
>  *****## 代码库：file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/mscorlib.dll
> 
> LoadImagesFromFolder 程序集版本：1.0.0.0 Win32 版本：1.0.0.0 代码库：file:///C:/Users/Felipe/Desktop/LoadImagesFromFolder.exe ------------------ ---------------------- System.Windows.Forms 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1002 构建者：RTMGDR CodeBase：file:/// C:/windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll ---------------- ------------------------ System.Drawing 程序集版本：4.0.0.0 Win32 版本：4.0.30319.1001 构建者：RTMGDR CodeBase：file:/// C:/windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll -------------------- -------------------- 系统组装版本：4.0.0.0 Win32 版本：4.0.30319.1001 构建者：RTMGDR
> 
> ## 代码库：file:///C:/windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
> 
> ****** *** ******即时调试******* *** ******要启用即时 (JIT) 调试，此应用程序或计算机 (machine.config) 的 .config 文件必须在 system.windows.forms 部分中设置 jitDebugging 值。还必须在启用调试的情况下编译应用程序。*****
> 
>  *****例如：
> 
> 启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。***************

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:34:16.537

您还需要将 itextsharp.dll 复制到新计算机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:32:36.907

`System.IO.FileNotFoundException`：尝试访问磁盘上不存在的文件失败时引发的异常。

如果您的代码没有 PathDiscovery 权限，则此异常的错误消息可能仅包含文件或目录名称，而不是完全限定的路径。

目标操作系统中遗漏了一些东西。很可能它无法加载另一个依赖项。检查`itextsharp.dll`目标操作系统上是否存在（靠近应用程序 EXE 文件）

在您的参考 Set Copy to local to true 中，将`itextsharp.dll`.its 自动复制`itextsharp.dll`到 exe 文件附近的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:34:10.820

看起来缺少 iTextSharp 程序集。如果 iTextSharp 在全局程序集缓存中，请检查 Visual Studio 中的参考设置并将 Copy local 设置为 true。在此之后 bin 文件夹还包含 iTextSharp.dll 并且可以再次复制到 PC。******

# android - ProgressBar 背景在模拟器上显示，但在手机上不显示

> ID：15951421
> 
> 赞同：2
> 
> 时间：2013-04-11T14:29:20.800
> 
> 标签：android, android-emulator, progress-bar

我在 ListView 中使用 ProgressBars。背景为白色，ProgressBar 默认为白色。

```
<ProgressBar
        android:id="@+id/timerProgress"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp" /> 
```

当我在 4.2.2 模拟器中打开应用程序时，一切看起来都很正常（灰色背景的蓝条）

但在我的 4.2.2 (Gnex) 手机上，它只是蓝色条，根本没有背景（父视图中的白色背景）。

知道问题可能是什么吗？

编辑：在（反向）之前使用了自定义 ProgressBar，但它与 android 默认值相同。

# javascript - 如何获取没有路径的url的路径名

> ID：15951423
> 
> 赞同：1
> 
> 时间：2013-04-11T14:29:20.990
> 
> 标签：javascript

再会

我正在使用这个函数来获取当前窗口的路径名：

```
var pathname = window.location.pathname;

if(pathname == '/someDir'){
   do something
} 
```

现在，如果您没有路径，例如：[http://mydomain.com](http://mydomain.com) ，您会怎么做？

现在我能做的是：

```
var hostname = document.location.hostname;

if(hostname == 'mydomain.com'){
   do something on the home page only!;
} 
```

但是上面代码的问题是它将在所有页面上执行，因为主机名无处不在......即 mydomain.com/contact

**那么我如何只定位主页（“mydomain.com”）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:33:05.017

尝试这个。

```
var hostname = document.location.hostname;
var pathname = document.location.pathname;

if(hostname == 'mydomain.com' && pathname == '/'){
   do something on the home page only!;
} 
```

你会注意到我添加了一个检查是否`pathname`等于'/'。这将是您的主页，除非您另外配置了服务器。

如果用户最终到达那里，您可能还想检查路径名`'/index.htm'`（或任何您的索引文件，如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:32:49.367

这可能是显而易见的，但怎么样

```
var pathname = window.location.pathname;
if (pathname === "/") {
  do something on the home page only!;
} 
```

没有任何理由检查主机名，因为您的代码只会在您自己的域“mydomain.com”上执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:33:25.180

看看 James Padolsey 的 URL 解析器。这是一个简单的 JS 函数，它将为您提供 URL 的任何部分（主机、主机名查询字符串、路径等。）

[http://james.padolsey.com/javascript/parsing-urls-with-the-dom/](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)

# iphone - 打包静态库时如何隐藏标题？

> ID：15951427
> 
> 赞同：0
> 
> 时间：2013-04-11T14:29:31.787
> 
> 标签：iphone

我想将我的私有头文件放入我的静态库中，因此客户只能看到公共头文件和 .a 文件，但是在打包库时将头文件设置为“私有”不起作用。仅将公共头文件和源文件（.a）添加到客户的项目会导致错误：找不到“私有”头文件...请帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:43:26.377

没有任何具体的事情可以继续，我可以描述我过去遇到的事情。您的 .h 文件可能`#import`与对您的私有标头的引用一起使用。您需要将它们移动到您的 .m 文件中。如果由于未声明的类等原因导致 .h 文件出现问题，则必须使用前向声明`@class`或其他类似技术。

# django - 在 Django 上将视图呈现为 PDF

> ID：15951428
> 
> 赞同：1
> 
> 时间：2013-04-11T14:29:31.983
> 
> 标签：django, pdf, render

我目前正在尝试将 HTML+CSS DJango 视图呈现为 PDF，因此不是呈现页面，而是正确生成了来自 CSS 文件的具有正确样式的 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:12:57.847

这是您[在 Django 中使用 PISA 生成 PDF](http://20seven.org/journal/2008/11/11/pdf-generation-with-pisa-in-django/)的指南，这里是[Django 文档](https://docs.djangoproject.com/en/1.5/howto/outputting-pdf/)（如 @Ngenator 所述）

# java - 简单到复杂方程的字符串方程

> ID：15951436
> 
> 赞同：0
> 
> 时间：2013-04-11T14:29:53.627
> 
> 标签：java, string, arraylist, equation, parentheses

我正在尝试编写一个程序，通过使用 Arraylist 将方程分解为单独的部分，以字符串的形式求解任何方程（从简单到复杂）。它首先检查括号，然后进入它可以找到的最深的括号集，并解决里面的操作集，从更强的运算符开始，然后继续。它继续检查直到没有更多的括号，然后它会做剩下的事情，从更强的运算符开始。数组列表中剩余的数字就是答案。但我遇到了麻烦。这是我的代码：

```
import java.util.ArrayList;

public class StringEquation
{
    public static void main(String[] args) 
    {
        String s = "80+5+3*(11%(3*2)-(5+1)+6)-(10+10)+(2*2)*5";

        ArrayList<String> equation = new ArrayList<>();

        String ns = "";

        String b;

        int nsi;

        int si;

        int res = 0;

        boolean hasParen = false;

        for(int c=0; c<s.length(); c++)
        {
             b = s.substring(c,c+1);
             if("0".equals(b)||"1".equals(b)||"2".equals(b)||"3".equals(b)||"4".equals(b)||"5".equals(b)||"6".equals(b)||"7".equals(b)||"8".equals(b)||"9".equals(b))
             {
                 ns += b;
                 if(c==s.length()-1)
                 {
                     nsi = Integer.parseInt(ns);
                     equation.add(Integer.toString(nsi));
                 }
             }
             else if(("+".equals(b)||"-".equals(b)||"*".equals(b)||"/".equals(b)||"%".equals(b))&&!"".equals(ns))
             {
                nsi = Integer.parseInt(ns);
                equation.add(Integer.toString(nsi));
                equation.add(b);
                ns = "";
             }
             else if("(".equals(b))
             {
                 equation.add(b);
             }
             else if (")".equals(b))
             {
                nsi = Integer.parseInt(ns);
                equation.add(Integer.toString(nsi));
                equation.add(b);
                ns = "";
             }
             else if("+".equals(b)||"-".equals(b)||"*".equals(b)||"/".equals(b)||"%".equals(b))
             {
                 equation.add(b);
             }
        }

        while(true) //checks for parentheses
        {
            for(int d=0; d<equation.size(); d++)
            {
                if("(".equals(equation.get(d)))
                {
                    hasParen = true;
                }

                if(hasParen==true)
                {
                    while(!")".equals(equation.get(d)))
                    {
                        d++;
                    }
                    while(!"(".equals(equation.get(d)))
                    {
                        d--;
                    }
                    d++;

                    while(!")".equals(equation.get(d+1)))
                    {
                        if("-".equals(equation.get(d))) //checks to see if the String number on the Arraylist is negative
                        {
                            equation.remove(d);
                            si = Integer.parseInt(equation.get(d));
                            si *= -1;
                        }
                        else
                        {
                            si = Integer.parseInt(equation.get(d));
                        }

                        switch(equation.get(d+1))
                        {
                            case "*": si *= Integer.parseInt(equation.get(d+2)); 
                            equation.set(d, Integer.toString(si));
                            equation.remove(d+1);
                            equation.remove(d+2);
                                break;
                            case "/": si /= Integer.parseInt(equation.get(d+2));
                            equation.set(d, Integer.toString(si));
                            equation.remove(d+1);
                            equation.remove(d+2);
                                break;
                            case "%": si %= Integer.parseInt(equation.get(d+2));
                            equation.set(d, Integer.toString(si));
                            equation.remove(d+1);
                            equation.remove(d+2);
                                break;
                            default: d+=2;
                        }
                    }

                    while(!"(".equals(equation.get(d)))
                    {
                        d--;
                    }
                    d++;

                    while(!")".equals(equation.get(d+1)))
                    {
                        if("-".equals(equation.get(d))) //checks to see if the String number on the Arraylist is negative
                        {
                            equation.remove(d);
                            si = Integer.parseInt(equation.get(d));
                            si *= -1;
                        }
                        else
                        {
                            si = Integer.parseInt(equation.get(d));
                        }

                        switch(equation.get(d+1))
                        {
                            case "+": si += Integer.parseInt(equation.get(d+2)); 
                            equation.set(d, Integer.toString(si));
                            equation.remove(d+1);
                            equation.remove(d+2);
                                break;
                            case "-": si -= Integer.parseInt(equation.get(d+2));
                            equation.set(d, Integer.toString(si));
                            equation.remove(d+1);
                            equation.remove(d+2);
                                break;
                        }
                    }

                    if("(".equals(equation.get(d-1))&&")".equals(equation.get(d+1)))
                    {
                        equation.remove(d-1);
                        equation.remove(d+1);
                    }

                    hasParen = false;

                    d = 0;
                }
            }
            break;
        }

        for(int e=0; e<equation.size(); e+=2) //does all multiplication, division and modulus first
        {
            if("-".equals(equation.get(e))) //checks to see if the String number on the Arraylist is negative
            {
                equation.remove(e);
                si = Integer.parseInt(equation.get(e));
                si *= -1;
            }
            else
            {
                si = Integer.parseInt(equation.get(e));
            }

            switch(equation.get(e+1))
            {
                case "*": si *= Integer.parseInt(equation.get(e+2)); 
                equation.set(e, Integer.toString(si));
                equation.remove(e+1);
                equation.remove(e+2);
                    break;
                case "/": si /= Integer.parseInt(equation.get(e+2));
                equation.set(e, Integer.toString(si));
                equation.remove(e+1);
                equation.remove(e+2);
                    break;
                case "%": si %= Integer.parseInt(equation.get(e+2));
                equation.set(e, Integer.toString(si));
                equation.remove(e+1);
                equation.remove(e+2);
                    break;
                default: e+=2;
            }
        }

        for(int f=0; f<equation.size(); f+=2) //does the rest (addition and subtraction)
        {
            if("-".equals(equation.get(f))) //checks to see if the String number on the Arraylist is negative
            {
                equation.remove(f);
                si = Integer.parseInt(equation.get(f));
                si *= -1;
            }
            else
            {
                si = Integer.parseInt(equation.get(f));
            }

            switch(equation.get(f+1))
            {
                case "+": si += Integer.parseInt(equation.get(f+2)); 
                equation.set(f, Integer.toString(si));
                equation.remove(f+1);
                equation.remove(f+2);
                    break;
                case "-": si -= Integer.parseInt(equation.get(f+2));
                equation.set(f, Integer.toString(si));
                equation.remove(f+1);
                equation.remove(f+2);
                    break;
            }
        }

        System.out.print(equation.get(0)); //Arraylist should only have the answer of the string equation by this point.

        //The part below was to see if lines 25-59 had obtained the whole equation in seperate parts within the arraylist.

//        for(int i=0; i<equation.size(); i++)
//        {
//            System.out.print(equation.get(i));
//        }
//        System.out.println("\n");
    }
} 
```

当我运行它时，它给了我这个错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "("
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:481)
    at java.lang.Integer.parseInt(Integer.java:527)
    at stringequationfull.StringEquationFull.main(StringEquationFull.java:87)
Java Result: 1 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:58:14.160

你真的应该为此使用解析/词法分析框架，然后在解析树的顶部实现方程求解器。

这是一个起点：[如何为 Java 中的某些语法编写 LALR 解析器？](https://stackoverflow.com/questions/5401132/how-to-write-lalr-parser-for-some-grammar-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:32:45.830

[请参阅Integer#parseInt](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)的文档：

> 抛出：**NumberFormatException** - 如果字符串不包含可解析的整数。

您收到的错误消息非常有用。

您正在尝试 parse `"("`，这**不是**可解析的整数。

使用调试器将在一分钟内为您解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:16:06.860

如前所述，您正在尝试将“（”解析为整数。

但这不是你的主要问题。

主要问题是你有大量的代码，这不必要地难以推理。

您需要将字符串转换为树状结构而不是数组列表，这样您就可以更轻松且无错误的方式进行计算。

由于您的问题很简单，因此我不建议您为此任务使用解析器生成器。（需要太长时间恕我直言）。但是，您仍然需要设计数据结构以满足您的要求。

有很多数学方程解析器，您可以检查这些解析器以获得灵感。

一般来说，你会有类似的东西：

```
Class Statement{}

class AddStatement extends Statement{
    Statement lhs;
    Statement rhs;
}

Class constant extends Statement{
    int value;
} 
```

您将需要为您支持的所有操作创建类，然后将输入递归解析到此结构中。如果做得好，评估就变得简单了。

我不会详细介绍，因为网上有足够的资源可用于指导。

如果您希望可以继续使用上面的代码，但我建议您以某种方式弄清楚如何将其拆分为更易于调试和祝您好运的小块

# android - 片段中的 MapFragment 与使用 Google Maps api v2 的片段中的 MapView

> ID：15951437
> 
> 赞同：3
> 
> 时间：2013-04-11T14:29:53.983
> 
> 标签：android, android-fragments, google-maps-android-api-2

我有一个具有操作栏的应用程序，其中一个片段包含一个 mapFragment。另外，我必须在地图顶部叠加列表。MapFragment 现在作为较少的功能（我不能让 setInfoWindowAdapter 在其中工作）。所以我的问题是我应该在片段中使用 Mapview 还是在片段中使用 MapFragment？最佳做法是什么？我已经阅读了很多文章，但没有一个确切地提到哪个是最好的选择以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:29:01.110

如果做得正确，两者都是正确的。

从支持库 v11 开始支持片段内的片段。

要记住两件事：

1.  你不能把 MapFragment 放到 xml
2.  你必须使用 getChildFragmentManager

检查此链接以了解如何在片段中正确添加 MapFragment：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1)

# ms-access - 使用 DoCmd.TransferSpreadsheet acImport 方法将错误从 Excel 导入 Access

> ID：15951438
> 
> 赞同：0
> 
> 时间：2013-04-11T14:29:56.693
> 
> 标签：ms-access, ms-access-2007, vba, ms-access-2010

将数据从 Excel 导入 Access 时出现一些导入错误。

我正在使用该`DoCmd.TransferSpreadsheet acImport, ...`方法进行导入。

失败的数据列包含纯数字条目和字符串的混合。这是无法导入的字符串条目。

我可以对 Excel 电子表格的这一列中的数据做些什么，以确保它完整地传递给 Access？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:49:02.140

虽然您`Excel.Application`上一个问题的代码在那里“计数行”，但它还可以检查第一个数据行中该列的单元格。如果它是数字，您的代码可以`'`在开头粘贴撇号 ( ) 以强制它成为标签，然后保存 Excel 文件。然后，当 Access`TransferSpreadsheet`方法查看第一行时，它将决定该列是文本，而不是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:45:20.057

我发现了一些解决方法：

1.  在 Excel 中对有问题的列进行排序，以便您的数字显示为最顶部的组，而您的字母数字显示在底部。

2.  突出显示现在分组在列中的所有数字

3.  转到数据 > 文本到列

4.  向导页面 1：选择“分隔”

5.  向导页面 2：勾选“选项卡”

6.  向导页面 3：选择“文本”并完成

数字将存储为带有前导撇号的文本，并且应该在 Access 中导入 ok

[资源](http://office.microsoft.com/en-gb/excel-help/three-ways-to-convert-numbers-to-text-HA001136619.aspx)

如果有人想加入，可能有更好的方法来做到这一点。

# resteasy - RestEasy Client 3.0.* 处理大型内容

> ID：15951439
> 
> 赞同：1
> 
> 时间：2013-04-11T14:29:58.227
> 
> 标签：resteasy

我们使用的是 RestEasy Client 3.0*。
我们正在尝试在请求正文中发布非常大的内容。
当内容长度小于 1 MB 时，以下代码运行正常。
当内容长度非常大（大约 500 MB）时，请求会卡住。
代码如下所示：

```
InputStream inputStream = new FileInputStream(tempFile);
ResteasyClient client = new ResteasyClientBuilder().build();
ResteasyWebTarget target = client.target("<SomeUrl>");
response = target.request(MediaType.WILDCARD).post(Entity.entity(inputStream, MediaType.WILDCARD)); 
```

我应该如何更改代码以支持大型内容？

**一周后......**
由于没有人回答我 - 我使用了很好的旧 Spring 解决方案（见下文）。
Spring 比 RestEasy 客户端好吗？

```
InputStream inputStream = new FileInputStream(tempFile);
SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();
factory.setBufferRequestBody(false);
RestTemplate r = new RestTemplate(factory);

RequestCallback requestCallback = new RequestCallback() {
     @Override
     public void doWithRequest(ClientHttpRequest clientHttpRequest) throws IOException {
         List<org.springframework.http.MediaType> MEDIA_TYPES = Collections.unmodifiableList(Arrays.asList(org.springframework.http.MediaType.ALL));
         clientHttpRequest.getHeaders().setAccept(MEDIA_TYPES);
         OutputStream requestOutputStream = clientHttpRequest.getBody();
         try {
             int copiedBytes = IOUtils.copy(inputStream, requestOutputStream);
         } finally {
             IOUtils.closeQuietly(requestOutputStream);
         }
      }
};

ResponseExtractor<Response> responseExtractor = new ResponseExtractor<Response>() {
    @Override
    public Response extractData(ClientHttpResponse response) throws IOException {
        return Response.status(response.getRawStatusCode()).build();
    }
};

response = r.execute(url, HttpMethod.POST, requestCallback, responseExtractor); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T21:43:50.827

我猜在 Spring 4.0.1 中你可以使用 Apache HTTP 客户端和 HttpComponentsClientHttpRequestFactory 而不是 SimpleClientHttpRequestFactory。这是原始注释：[SPR-10728](https://github.com/spring-projects/spring-framework/pull/312)

```
<bean id="restTemplateStreaming" class="org.springframework.web.client.RestTemplate">
    <constructor-arg>
        <bean class="org.springframework.http.client.HttpComponentsClientHttpRequestFactory">
            <property name="bufferRequestBody" value="false" />
            <property name="httpClient">
                <bean class="com.spotfire.server.http.spring.HttpClientFactory">
                    <property name="clientBuilder">
                        <bean class="org.apache.http.impl.client.HttpClientBuilder">
                            <property name="connectionManager" ref="poolingHttpClientConnectionManager" />
                            <property name="redirectStrategy">
                                <bean class="org.apache.http.impl.client.LaxRedirectStrategy" />
                            </property>
                        </bean>
                    </property>
                </bean>
            </property>
        </bean>
    </constructor-arg>      
</bean> 
```

注意但是回调实现也发生了变化。你不能再调用 clientHttpRequest.getBody(); 相反，您必须使用如下所示的有点复杂的结构：

```
class StreamingRequestCallback implements RequestCallback {

private final InputStream inputStream;

StreamingRequestCallback(InputStream inputStream) {
  this.inputStream = inputStream;
}

@Override
public void doWithRequest(final ClientHttpRequest request) throws IOException {
  request.getHeaders().add("Content-type", MediaType.APPLICATION_OCTET_STREAM_VALUE);

  ((StreamingHttpOutputMessage) request).setBody(new StreamingHttpOutputMessage.Body() {
    @Override
    public void writeTo(final OutputStream outputStream) throws IOException {
      IOUtils.copy(inputStream, outputStream);
    }
  });
} 
```

};

# ios - 在@implementation 中使用“self”

> ID：15951441
> 
> 赞同：3
> 
> 时间：2013-04-11T14:30:02.130
> 
> 标签：ios, objective-c, trigger.io

我正在尝试通过制作 TriggerIO 本机插件来播放语音音频，**但是**`iPodMusicPlayer`我无法访问该`self`对象。

```
#import "alert_API.h"

@implementation alert_API

+ (void)play:(ForgeTask*)task text:(NSString *)filename {
    NSURL* url = [[NSBundle mainBundle] URLForResource:@"Rondo_Alla_Turka_Short" withExtension:@"aiff"];
    NSAssert(url, @"URL is valid.");
    NSError* error = nil;

    /* ERROR: /Users/gsquare567/forge-workspace/plugins/audio/inspector/ios-inspector/ForgeModule/alert/alert_API.m:45:13: Member reference type 'struct objc_class *' is a pointer; maybe you meant to use '->'? */
    self->player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

    /* ERROR: /Users/gsquare567/forge-workspace/plugins/audio/inspector/ios-inspector/ForgeModule/alert/alert_API.m:45:13: Incomplete definition of type 'struct objc_class' */
    if(!self.player)
    {
        NSLog(@"Error creating player: %@", error);
    }

    [task success:nil];
}

@end 
```

该属性定义在`alert_API.h`：

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>

@interface alert_API : NSObject

@property (nonatomic, strong) AVAudioPlayer* player;
+ (void)play:(ForgeTask*)task text:(NSString *)filename;

@end 
```

我需要在这里做什么才能通过`player`我的 API 访问该属性？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:32:50.100

您的`play:text:`方法是静态的，意思`self`不是引用具有属性的实例，而是引用`alert_API`. 您可以将方法更改为实例方法（`- (void)`而不是`+ (void)`）：

```
- (void)play:(ForgeTask*)task text:(NSString *)filename; 
```

或者如果你想保持方法静态，你必须实现一个返回玩家单例的静态方法：

```
+ (AVAudioPlayer *)playerInstance; 
```

然后使用`[alert_API playerInstance]`从您的方法访问播放器。

# jquery - 需要为jqgrid中全选复选框上的所有行触发事件

> ID：15951442
> 
> 赞同：4
> 
> 时间：2013-04-11T14:30:02.993
> 
> 标签：jquery, jqgrid

我现在写了一些东西`onSelectRow`，当我在事件中选择特定记录时，`OnselectRow`即使我触发`setSelection`它执行的方法也会执行此代码。但是当我选择全选复选框时，所有行都被选中而不执行`OnselectRow`

我需要的是当我选择顶部复选框时，我需要为`onSelectRow`网格的每条记录执行事件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T18:12:56.617

嘿，伙计，您需要的只是重写事件中所有记录的所有循环，`onSelectAll`您可以从那里触发它。例如

```
 onSelectRow: function(id,status){
          ... some code for this id ...
     },onSelectAll:function(id,status){

         for(i=0;i<id.length;i++){
               .... same some code for id[i] .....
         }

     } 
```

就是这样。不客气 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:08:45.090

存在`onSelectAll`回调，应该用于处理`click`多选列标题中“全选”复选框的事件。

# api - 用于读取“加一”计数的 Google+ API

> ID：15951450
> 
> 赞同：2
> 
> 时间：2013-04-11T14:30:19.517
> 
> 标签：api, google-api, google-plus

是否有任何*官方*的 Google API 用于获取给定 URL 的“加一”操作数？

有一种[常用方法](https://stackoverflow.com/a/11744589/89818)似乎没有使用官方 API。

我们是否可以使用这个 API？即使我们是，它也可能随时停止工作，对吧？

[官方 Google+ API](https://developers.google.com/+/api/latest/)中的 API 端点都需要一些活动 ID，因此无法为您提供任何给定 URL 的“加一”计数，可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:13:58.233

这目前不是我们 API 的功能。[您可以通过在我们的问题跟踪器 ( https://code.google.com/p/google-plus-platform/issues/entry?template=Feature%20Request%20-%20REST%20API](https://code.google.com/p/google-plus-platform/issues/entry?template=Feature%20Request%20-%20REST%20API) )中提交来请求该功能。我们使用这些报告和他们收到的星数来跟踪开发者的反馈。

此外，您是正确的，任何未经官方支持和记录的方法调用 ( [https://developers.google.com/+/api/latest/](https://developers.google.com/+/api/latest/) ) 都可能在未来随着我们继续构建我们的 API 而发生变化。有时聪明的开发人员会找到很酷的做事方式，但我们不保证不受支持的功能不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:55:34.553

对于您网站上的网站分析，您可以在 Google +1 上获得活动并通过 Google 分析进行分享。您甚至可以设置[自定义分析来监控它](http://support.google.com/analytics/answer/1366830)。

对于 +1 小部件，没有用于访问计数的官方 API，并且由于您提到的原因（它可能会停止工作，可能无法正常工作），可能应该避免引用的 API。我能想到人们不应该以编程方式从网络上的任意站点提取分析的几个原因——这可能是谷歌不存在第一方的部分原因。如果您认为这是一项重要功能，请[在问题跟踪器中添加或加注功能请求](https://code.google.com/p/google-plus-platform/)- 您应该将其添加到小部件部分。

对于 Google+ 上的网络内活动，[活动资源](https://developers.google.com/+/api/latest/activities#resource)记录了您在查看 Google+ 上的内容时可用的所有内容。例如，您可以为帖子 +1，然后分享 +1 并跟踪 Google+ 上的分析，如果您这样做，您应该能够使用“plusoners”列表来确定人数在帖子上 +1 的人。在此处使用 API Explorer 查看它的实际效果：

[+GusClass 的活动](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.list?userId=%252BGusClass&collection=public&_h=1&)

# javascript - 将 RGB 转换为 HEX 失败

> ID：15951454
> 
> 赞同：2
> 
> 时间：2013-04-11T14:30:34.790
> 
> 标签：javascript, hex, rgb

在[这个](https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb)问题和许多其他问题之后，我正在尝试将 rgb 值转换为十六进制值。

复制/粘贴最常用和接受的答案，我制作了这个脚本

```
function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }

function rgbToHex(rgb) {

            var colors = rgb.split("(")
            colors = colors[1].split(")")
            colors = colors[0].split(",")

            var r = 255 - parseInt(colors[0])
            var g = 255 - parseInt(colors[1])
            var b = 255 - parseInt(colors[2])

            return componentToHex(r) + componentToHex(g) + componentToHex(b);
        }

alert(rgbToHex("rgb(0, 51, 255)")) 
```

结果：

```
ffcc00 
```

预期结果：

```
0033ff 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:33:26.617

直接使用`parseInt`结果，而不是`255`减去值：

```
var r = parseInt(colors[0])
var g = parseInt(colors[1])
var b = parseInt(colors[2]) 
```

您当前通过输出与输入值*互补*（而不是*等效*）的值来产生*完全相反*的颜色。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:42:43.857

而不是`255 - parseInt(colors[i])`，它应该是`parseInt(colors[i])`。

在您当前的实现中 - 如果红色为 0，则 255 - 0 = 255，十六进制为 FF。**

# wpf - 为什么在将 Label.Content 绑定到非字符串而不是字符串时应用隐式 TextBlock 样式？

> ID：15951456
> 
> 赞同：19
> 
> 时间：2013-04-11T14:30:41.510
> 
> 标签：wpf, styles, label, implicit-style

我在看[这个问题](https://stackoverflow.com/questions/15922964/why-does-binding-affect-height)，发现绑定`Label.Content`到非字符串值将应用隐式`TextBlock`样式，但绑定到字符串不会。

这是一些重现问题的示例代码：

```
<Window.Resources>
    <Style TargetType="Label">
        <Setter Property="FontSize" Value="26"/>
        <Setter Property="Margin" Value="10"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="FontSize" Value="26"/>
        <Setter Property="Margin" Value="10"/>
    </Style>
</Window.Resources>

<Grid>
    <StackPanel Orientation="Horizontal">
        <Label Content="{Binding SomeString}" Background="Red"/>
        <Label Content="{Binding SomeDecimal}" Background="Green"/>
    </StackPanel>
</Grid> 
```

绑定值的代码在哪里

```
SomeDecimal = 50;
SomeString = SomeDecimal.ToString(); 
```

最终结果如下所示，`Margin`隐式 TextBlock 样式的属性仅应用于绑定到非字符串的 Label：

![在此处输入图像描述](https://i.stack.imgur.com/wU6z1.png)

两个标签都呈现为

```
<Label>
    <Border>
        <ContentPresenter>
            <TextBlock />
        </ContentPresenter>
    </Border>
</Label> 
```

[当我用Snoop](http://snoopwpf.codeplex.com/)查看 VisualTree 时，我可以看到这两个元素看起来完全相同，除了第二个 TextBlock 应用了隐式样式的 Margin ，而第一个没有。

![在此处输入图像描述](https://i.stack.imgur.com/MFWrY.png)

我使用 Blend 提取了默认标签模板的副本，但没有看到任何奇怪的地方，当我将模板应用于我的两个标签时，会发生同样的事情。

```
<Label.Template>
    <ControlTemplate TargetType="{x:Type Label}">
        <Border BorderBrush="{TemplateBinding BorderBrush}" 
                BorderThickness="{TemplateBinding BorderThickness}" 
                Background="{TemplateBinding Background}" 
                Padding="{TemplateBinding Padding}" 
                SnapsToDevicePixels="True">
            <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" 
                              Content="{TemplateBinding Content}" 
                              ContentStringFormat="{TemplateBinding ContentStringFormat}" 
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                              RecognizesAccessKey="True" 
                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Label.Template> 
```

还应该注意的是，将默认值设置`ContentTemplate`为 a`TextBlock`确实会使两个项目在没有隐式样式的情况下呈现，因此它必须与 WPF 尝试将非字符串值呈现为 UI 的一部分有关。

```
<Window.Resources>
    <Style TargetType="Label">
        <Setter Property="FontSize" Value="26"/>
        <Setter Property="Margin" Value="10"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>
    <Style x:Key="TemplatedStyle" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock Text="{Binding }"/>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="FontSize" Value="26"/>
        <Setter Property="Margin" Value="10"/>
    </Style>
</Window.Resources>

<Grid>
    <StackPanel Orientation="Horizontal">
        <Label Content="{Binding SomeString}" Background="Red"/>
        <Label Content="{Binding SomeDecimal}" Background="Green"/>
        <Label Content="{Binding SomeString}" Background="Red" 
               Style="{StaticResource TemplatedStyle}"/>
        <Label Content="{Binding SomeDecimal}" Background="Green" 
               Style="{StaticResource TemplatedStyle}"/>
    </StackPanel>
</Grid> 
```

![在此处输入图像描述](https://i.stack.imgur.com/piPF5.png)

是什么逻辑导致插入 UI 的非字符串使用隐式 TextBlock 样式绘制，但插入 UI 的字符串不绘制？这发生在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:54:01.383

**编辑：（**也许把它移到底部？）

我又戳了一下——**我想我找到了问题的症结所在**（强调“我认为”）

**将其放入某些`Button1_Click`或某些**内容中（再次，我们需要对此进行“懒惰”处理-因为我们需要构建可视化树-我们不能在“已加载”上执行此操作，因为我们刚刚制作了模板-这需要更好的初始化技术，但是这只是一个测试，所以谁在乎）

```
void Button_Click(object sender, EventArgs e)
{
var insideTextBlock = FindVisualChild<TextBlock>(_labelString);
var value = insideTextBlock.GetProperty<bool>("HasImplicitStyleFromResources"); // false
value = insideTextBlock.GetProperty<bool>("ShouldLookupImplicitStyles"); // true

var boundaryElement = insideTextBlock.TemplatedParent; // ContentPresenter and != null

insideTextBlock = FindVisualChild<TextBlock>(_labelDecimal);
value = insideTextBlock.GetProperty<bool>("HasImplicitStyleFromResources"); // true
value = insideTextBlock.GetProperty<bool>("ShouldLookupImplicitStyles"); // true

boundaryElement = insideTextBlock.TemplatedParent; // == null !! 
```

正如这里提到[的 Application.Resources 与 Window.Resources 中的隐式样式？](https://stackoverflow.com/questions/9035878/implicit-styles-in-application-resources-vs-window-resources)
( `FindImplicitStyleResource`in `FrameworkElement`) 使用类似...

```
boundaryElement = fe.TemplatedParent; 
```

> 并且似乎**如果没有`TemplatedParent`**（并且由于在`TextBlock`内部构造的方式`DefaultTemplate`） -**没有“边界”集 - 并且搜索隐式资源/样式 - 一直传播**。

* * *

* * *

**原始答案：（**如果您刚到，请先阅读此内容）

（@dowhilefor 和@Jehof 已经谈到了主要的事情）
我不确定这是一个“答案”——它仍然是一个猜测工作——但我需要更多的空间来解释我认为正在发生的事情。

您可以在网络上找到“ContentPresenter 源”代码 - 它比使用反射器更容易 - 只需 'google' 即可，出于明显的原因，我不会在此处发布它 :)

这是关于`ContentTemplate`为`ContentPresenter`（并按此顺序）选择的...

```
ContentTemplate // if defined 
ContentTemplateSelector // if defined
FindResource // for typeof(Content) - eg if defined for sys:Decimal takes that one
DefaultTemplate used internally by the presenter
...specific templates are chosen based on typeof(Content) 
```

事实上，它与使用的`Label`任何 ContentControl 或控件模板没有任何关系`ContentPresenter`。或者你可以绑定到资源等。

这是**内部发生的事情的**再现-**我的目标是为“字符串”**或任何类型的内容重现类似的行为。

在 XAML 中，只需“命名”标签（这不是错字，故意在两者中放入字符串以平衡游戏环境）......

```
<Label Name="_labelString" Content="{Binding SomeString}" Background="Red"/>
<Label Name="_labelDecimal" Content="{Binding SomeString}" Background="Green"/> 
```

从后面的代码（模仿演示者所做的最小代码）：
注意：我这样做是`Loaded`因为我需要访问隐式创建的演示者

```
void Window1_Loaded(object sender, RoutedEventArgs e)
{
FrameworkElementFactory factory = new FrameworkElementFactory(typeof(TextBlock));
factory.SetValue(TextBlock.TextProperty, new TemplateBindingExtension(ContentProperty));
var presenterString = FindVisualChild<ContentPresenter>(_labelString);
presenterString.ContentTemplate = new DataTemplate() { VisualTree = factory };

// return;

var presenterDecimal = FindVisualChild<ContentPresenter>(_labelDecimal);
presenterDecimal.ContentTemplate = new DataTemplate(); 
// just to avoid the 'default' template kicking in

// this is what 'default template' does actually, the gist of it
TextBlock textBlock = new TextBlock();
presenterDecimal.SetProperty(typeof(FrameworkElement), "TemplateChild", textBlock);
textBlock.Text = presenterDecimal.Content.ToString(); 
```

第一部分 (for `_labelString`) 的作用与 'text' 模板对字符串的作用相同。

如果你`return`在那之后 - 你会得到两个相同的框，没有隐式模板。

第二部分（for `_labelDecimal`）模仿为“十进制”调用的“默认模板”。

> 最终结果的行为应与原始示例相同。我们为`string`and构建了模板，`decimal`但我们可以在内容中放入任何东西（当然，如果它有意义的话）。

**至于为什么**-我的猜测是这样的（尽管还不确定-我猜有人会加入一些更明智的事情）...

根据此链接[FrameworkElementFactory](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelementfactory(v=vs.100).aspx)

> 此类是一种以编程方式创建模板的弃用方式，模板是 FrameworkTemplate 的子类，例如 ControlTemplate 或 DataTemplate；使用此类创建模板时，并非所有模板功能都可用。以编程方式创建模板的推荐方法是使用 XamlReader 类的 Load 方法从字符串或内存流加载 XAML。

而且我猜它不会为 TextBlock 调用任何已定义的样式。

而“其他模板”（默认模板）——实际上是`TextBlock`沿着这些线构造了 and ——它实际上采用了隐式样式。

坦率地说，这就是我所能得出的结论，没有了解整个 WPF 的“内部”以及实际应用样式的方式/位置。

* * *

我使用此代码[在 WPF itemscontrol 中查找控件](https://stackoverflow.com/questions/980120/finding-control-within-wpf-itemscontrol/984862#984862)用于`FindVisualChild`.
而这`SetProperty`只是反映 - 对于我们需要访问才能完成所有这些操作的那个属性。例如

```
public static void SetProperty<T>(this object obj, string name, T value) { SetProperty(obj, obj.GetType(), name, value); }
public static void SetProperty<T>(this object obj, Type typeOf, string name, T value)
{
    var property = typeOf.GetProperty(name, BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
    property.SetValue(obj, value, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:45:06.550

在经历了这个问题和大家的宝贵意见之后，我对 TextBlock Styling 做了一些研究。

据我了解，这里的问题不在于标签或文本块，而在于内容呈现器和使用内容呈现器的控件，如标签、按钮和 ComboBoxItem。

来自 MSDN 的内容演示者的属性之一：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)

**" 如果有一个 TypeConverter 将 Content 的类型转换为字符串，ContentPresenter 使用该 TypeConverter 并创建一个 TextBlock 来包含该字符串。显示 TextBlock"**

在上面的示例中，对于 SomeString 内容演示者将其转换为文本块并应用 TextBlock 边距 (10) 以及标签边距 (10) 使其变为 20。

为了避免这种情况，您需要覆盖 contentpresenter 中的 TextBlock 样式，如下所示

```
 <ContentPresenter >
                               <ContentPresenter.Resources>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="Margin" Value="5" />
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter> 
```

以下是对您的代码的更改。

```
 <Window.Resources>
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="Margin" Value="10"/>

            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>

                    <ControlTemplate TargetType="Label">
                        <Grid>
                            <Rectangle Fill="{TemplateBinding Background}" />
                            <ContentPresenter >
                                <ContentPresenter.Resources>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="Margin" Value="5" />
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                        </Grid>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Foreground" Value="Pink" />
        </Style>
    </Window.Resources>

    <Grid>
        <StackPanel Orientation="Horizontal">
            <Label Content="{Binding SomeString}" Background="Red" />
            <Label Content="{Binding SomeDecimal}" Background="Green"/>
        </StackPanel>
    </Grid>
</Window> 
```

这个解释只是基于我的理解。让我知道你的意见。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:22:15.620

根据我的评论，我在问题中添加了更多信息。它不是一个直接的答案，但为所描述的问题提供了额外的信息。

下面的 XAML 将直接在 Visual Studio 的设计器中显示所描述的行为，我已将其缩小到 ContentPresenter，这似乎是问题的根源。该样式适用于第一个 ContentPresenter (`intPresenter`和`boolPresenter`)，但不是最后一个使用字符串作为 Content ( `stringPresenter`) 的样式。

```
<Window.Resources>
  <system:Int32 x:Key="intValue">5</system:Int32>
  <system:Boolean x:Key="boolValue">false</system:Boolean>
  <system:String x:Key="stringValue">false</system:String>
  <Style TargetType="{x:Type TextBlock}">
    <Setter Property="FontSize" Value="26" />
    <Setter Property="Margin" Value="10" />
  </Style>
</Window.Resources>

 <Grid>
   <StackPanel Orientation="Horizontal">
     <ContentPresenter x:Name="intPresenter" 
                       VerticalAlignment="Center"
                       Content="{StaticResource intValue}" />
     <ContentPresenter x:Name="boolPresenter" 
                       VerticalAlignment="Center"
                       Content="{StaticResource boolValue}" />
     <ContentPresenter x:Name="stringPresenter"
                       VerticalAlignment="Center"
                       Content="{StaticResource stringValue}" />
   </StackPanel>
  </Grid> 
```

在调试器中，我分析了`stringPresenter`使用 DefaultStringTemplate 而`intPresenter`不是。

[![在此处输入图像描述](https://i.stack.imgur.com/WTOQU.png)](https://i.stack.imgur.com/WTOQU.png)

[也很有趣的是`Language`of the`intPresenter`被设置，而由`stringPresenter`它不是。]

该方法的实现看起来像这样（取自dotPeek）

```
private bool IsUsingDefaultStringTemplate
    {
      get
      {
        if (this.Template == ContentPresenter.StringContentTemplate || this.Template == ContentPresenter.AccessTextContentTemplate)
          return true;
        DataTemplate dataTemplate1 = ContentPresenter.StringFormattingTemplateField.GetValue((DependencyObject) this);
        if (dataTemplate1 != null && dataTemplate1 == this.Template)
          return true;
        DataTemplate dataTemplate2 = ContentPresenter.AccessTextFormattingTemplateField.GetValue((DependencyObject) this);
        return dataTemplate2 != null && dataTemplate2 == this.Template;
      }
    } 
```

StringContentTemplate 和 AccessTextTemplate 使用 FrameworkElementFactory 来生成视觉效果。

# javascript - jsonp请求收到401未授权

> ID：15951457
> 
> 赞同：1
> 
> 时间：2013-04-11T14:30:42.337
> 
> 标签：javascript, json, api, jsonp

我正在使用 select2 插件连接 LinkedIn 的公司搜索 API。我需要的是让它与 jsonp 一起工作，这样我就可以避免使用常规 json 请求时出现的“Access-Control-Allow-Origin”错误[我已经确认当我禁用默认安全设置时 json 请求有效在 Chrome 中。]。“工作”是指我希望 jsonp 请求 url 像 json 请求 url 一样对我进行身份验证，但我继续收到 401 未经授权的错误。

我认为我的问题在于 jsonp 设置的 url 中的“回调”参数。例如，由 json 创建的经过 LinkedIn 身份验证的公司搜索 url 是：

[http://api.linkedin.com/v1/company-search?keywords=mcdonalds&oauth_consumer_key=xxx&oauth_nonce=xxx&oauth_signature=xxx&oauth_signature_method=xxx&oauth_timestamp=xxx&oauth_token=xxx](http://api.linkedin.com/v1/company-search?keywords=mcdonalds&oauth_consumer_key=xxx&oauth_nonce=xxx&oauth_signature=xxx&oauth_signature_method=xxx&oauth_timestamp=xxx&oauth_token=xxx)

使用 jsonp 它类似于：

[http://api.linkedin.com/v1/company-search?callback=jQuery19107866718948353082_1365690327081&keywords=mcdonalds&oauth_consumer_key=xxx&oauth_nonce=xxx&oauth_signature=xxx&oauth_signature_method=xxx&oauth_timestamp=xxx&oauth_token=](http://api.linkedin.com/v1/company-search?callback=jQuery19107866718948353082_1365690327081&keywords=mcdonalds&oauth_consumer_key=xxx&oauth_nonce=xxx&oauth_signature=xxx&oauth_signature_method=xxx&oauth_timestamp=xxx&oauth_token=xxx)

唯一明显的区别是“callback=jQuery...”参数。这是我的 JavaScript：

```
function generateUrl(term) {
    (function ($) {

    var apiKey = 'xxx';
    var apiSecret = 'xxx';
    var memberToken = 'xxx';
    var memberSecret = 'xxx';
    var action = 'GET';
    var path = 'http://api.linkedin.com/v1/company-search';
    var nonce = '1234';
    var timestamp = Math.floor((new Date()).getTime()/1000);
    var version = '1.0';
    var args = "keywords=" + term;
    // var format = 'json';

    if (args != '') { args += '&'; }
    args += "&oauth_nonce=" + nonce + "&oauth_timestamp=" + timestamp + "&oauth_version=" + version;

    OAuthSimple().reset();
    this.results = (new OAuthSimple()).sign({
      path:path,
      action:action,
      parameters:args,
      signatures:{
        'consumer_key':apiKey, 'shared_secret': apiSecret,
        'access_token':memberToken,'access_secret':memberSecret}
      }
    );

    }
    (jQuery));
    return results.signed_url.slice(results.signed_url.indexOf('?') + 1);
  }

    $("#linkedin").select2({
      placeholder: "Search for a company.",
      minimumInputLength: 1,
      allowClear: true,
      ajax: {
        url: 'http://api.linkedin.com/v1/company-search',
        dataType: 'jsonp',
        data: function (term, page) {
          return generateUrl(term);
        },
        results: function (data, page) {
          return { results: data.companies.values };
        }
      },
      formatResult: companyFormatResult,
      formatSelection: companyFormatSelection,
      dropdownCssClass: "bigdrop_3"
  });

  function companyFormatResult(company) {
    return company.name;
  }

  function companyFormatSelection(company) {
    return company.name;
  } 
```

它可能与我的 url 参数的语法有关吗？当“关键字”参数不是在“公司搜索”之后立即出现时，我遇到了问题？在普通的 json 请求中，但是将 jsonp 请求中的回调参数移动到 url 的末尾似乎没有帮助。

先感谢您。

# javascript - OOP Javascript，为什么这个对象不能像预期的那样工作？

> ID：15951465
> 
> 赞同：0
> 
> 时间：2013-04-11T14:30:59.827
> 
> 标签：javascript, oop, object

## 我想达到什么目标？

我有一个名为 Looper 的课程。我想给每个对象一个名字和一个自己的活套。

## 我期望的结果

```
Created Looper Object...
one
Created Looper Object...
two
one - 1
two - 1
one - 2
two - 2
one - 3
two - 3
one - 4
two - 4
one - 5
two - 5
....... 
```

## 我的代码

使用此代码，我希望它可以工作.. 

```
var Looper = (function (window, document, $) {

    this.i = 1;

    var Looper = function () {
        console.log('Created Looper Object...');
    }

    var getName = function () {
        return this.name;
    }

    var setName = function (newName) {
        this.name = newName;
    }

    var loop = function () {
        console.log(getName() + ' - ' + this.i);
        this.i = this.i + 1;
    }

    var startLoop = function () {
        window.setInterval(loop, 1000);
    }

    Looper.prototype = {
        getName: getName,
        setName: setName,
        start: startLoop
    }

    return Looper;
})(window, document, jQuery);

var one = new Looper();
one.setName('one');
console.log(one.getName());
one.start();

var two = new Looper();
two.setName('two');
console.log(two.getName());
two.start(); 
```

## [jsFiddle 示例](http://jsfiddle.net/dvepq/)

## 我的结果

但它并没有...... 

```
Created Looper Object...
one
Created Looper Object...
two
result - 1
result - 2
result - 3
result - 4
result - 5
....... 
```

有人能告诉我为什么没有吗？

我的问题是可以`this.name`为每个对象设置。

但我不能`this.i`为每个对象设置。他们互相超越`i`。看起来`this.i`是静态的？！？！？

当我使用`console.log(two.getName());`它时也有效。但在循环内`this.name`是`result`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:49:48.967

您需要`this.i = 1;`在构造函数内部创建属性：

```
var Looper = function () {
    this.i = 1;
    console.log('Created Looper Object...');
} 
```

在您当前的代码中，[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)指的是全局对象 ( `window`)，因此您实际上是在创建一个全局变量（这是某种“静态”，是的）。

类似的事情发生在调用 from 的函数中[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)，`this`再次设置为全局对象（这就是它找到数字的原因）。您需要在实例上显式[调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)您的`loop`方法`Looper`，例如通过

```
var startLoop = function () {
    var that = this;
    window.setInterval(function() {
       loop.call(that); // "that" refers to the Looper object, while "this" does not
       // if "loop" were a method on the Looper, it's equivalent to
       // that.loop()
    }, 1000);
} 
```

或通过[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
var startLoop = function () {
    window.setInterval(loop.bind(this), 1000);
} 
```

此外，在`loop`函数内部，您需要`getName`作为当前 Looper 对象的方法调用：

```
this.getName() 
```

似乎增加了一点混乱，您的所有函数/方法不仅可以在对象的（继承的）属性上访问，而且还可以作为模块中的局部变量访问。请注意，[JavaScript 没有类](https://stackoverflow.com/a/13418980/1048572)，并且`this`不像在 Java 中那样工作——您总是需要明确区分变量和属性。您的模块应该看起来更像这样：

```
var Looper = (function() {

    function Looper() {
        this.i = 1;
        this.name = null;
        console.log('Created Looper Object:', this);
    }

    Looper.prototype.getName = function() {
        return this.name;
    };
    Looper.prototype.setName = function(newName) {
        this.name = newName;
    };
    Looper.prototype.start = function() {
        var that = this;
        window.setInterval(function() {
            console.log(that.getName() + ' - ' + that.i);
            that.i++;
        }, 1000);
    };

    return Looper;
}); 
```

# java - 点[0,0,0]的OpenGL位置

> ID：15951466
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:02.663
> 
> 标签：java, opengl, transformation

在 opengl 中，任何函数都可以在使用此代码后告诉我点 [0,0,0] 的位置：

```
glPushMatrix();
glRotatef(1, 0, 1, 0); 
```

与转换前的点 [0,0,0] 比较还是我只需要计算它？

例如，如果我得到了转变

```
glTranslatef(1, 0, 0); 
```

我想得到[1,0,0]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:34:09.723

是的，[您可以在转换后获取特定顶点的坐标](https://stackoverflow.com/a/5596318/1743852)

例如：

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glTranslatef(100.0, 50.0, 0.0);
glRotatef(-25.0, 0.0, 1.0, 0.0);  

glGetFloatv(GL_MODELVIEW_MATRIX , *your_matrix*);
//print your matrix to check if that is the desired transformation coordinates 
```

# javascript - 什么是在 js 中使用事件构造函数的好例子？

> ID：15951468
> 
> 赞同：15
> 
> 时间：2013-04-11T14:31:09.960
> 
> 标签：javascript, events, dynamic

我试图弄清楚如何在 JavaScript 中正确创建和触发事件，所以在学习过程中遇到了这个页面：

[https://developer.mozilla.org/en-US/docs/DOM/document.createEvent](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)

顶部告诉我以下内容：

> createEvent 方法已弃用。请改用事件构造函数。

谷歌搜索 JS 事件构造函数并不是很有成效——主题一般都在谈论构造函数，但不是我想要的。有人可以向我解释什么是事件构造函数并提供一个很好的例子来说明它们的用法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-25T06:16:55.293

来自[https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent)：

似乎事件现在被封装在一个名为 CustomEvent 的类中。您可以将旧的 document.createEvent 视为返回事件对象的工厂方法。现在，您现在可以直接创建对象，而不是使用 document.createEvent 来创建对象。

```
 //this is the new way
    var my_event = new CustomEvent('NewEventName');
    var my_element = document.getElementById('TargetElement');
    my_element.dispatchEvent(my_event); 
```

是替代品

```
 //this is the old way
    var my_event = document.createEvent('NewEventName');
    var my_element = document.getElementById('TargetElement');
    my_element.dispatchEvent(my_event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:00:02.923

你想使用 addEventListener()

[https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

这是我用于附加事件的库代码，我在 stackoverflow 上找到了这些并将它们放在我的应用程序全局命名空间中：

```
var app={}

app.listenEvent=function(eventTarget, eventType, eventHandler) { 
   if (eventTarget.addEventListener) {
      eventTarget.addEventListener(eventType, eventHandler,false); 
   } 
  else if (eventTarget.attachEvent) {
      eventType = "on" + eventType;
      eventTarget.attachEvent(eventType, eventHandler); 
  } 
  else {
     eventTarget["on" + eventType] = eventHandler; 
  }
}

app.cancelEvent=function(event) {
    if (event.preventDefault) 
       event.preventDefault()
    else 
       event.returnValue = false; 
}

app.cancelPropagation=function(event) {
    if (event.stopPropagation) { 
        event.stopPropagation();
    } else {
     event.cancelBubble = true; }
 } 
```

所以要添加一个事件监听：

```
app.listenEvent(document.aform.afield, 'focus', function(){console.log(arguments)} ) 
```

这些功能很棒，它们适用于所有浏览器。

# sharepoint-2010 - 让 .dep 文件在 Windows Server 2008 R2 上工作

> ID：15951476
> 
> 赞同：2
> 
> 时间：2013-04-11T14:31:28.447
> 
> 标签：sharepoint-2010

我正在使用与 SharePoint 集成的 MS BI 堆栈来处理与仪表板相关的项目。我有一个在 Windows Server 2008 R2、SQL 2012 和 SharePoint 2010 上运行的已配置 POC 服务器。我正在尝试运行我已经在完全 2008 环境中的 MS 虚拟实验室上完成的 MS 教程之一，但在我的 SQL 中这样做2012 / SharePoint 2010 环境，这需要我使用 .dep 文件来设置教程。当我第一次尝试运行它时，我得到 Windows 不知道要使用哪个程序运行它，但由于服务器位于没有网络访问的沙盒区域，它无法在网络上搜索正确的程序。在教程中它提到该文件是通过命令提示符运行的，所以我尝试用它打开它，不幸的是什么也没发生，

首先是让 .dep 文件恢复为没有默认关联程序可以运行或找出真正正确的程序，第二个是实际获取运行 .dep 文件和设置环境所需的文件对于教程。不幸的是，MS 没有详细的清单。

我尝试使用 GPMC.MMC 删除文件关联，但由于它连接到我们的活动目录，因此默认功能与技术网文章中关于这样做的内容不匹配，我不想在我们的活动目录上造成错误. 任何有关如何使这项工作的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T08:42:33.483

您可以尝试下载离线培训套件。

该培训工具包应包含一个名为“assets”的文件夹。在此文件夹中，您可以找到软件“DependencyChecker.msi”的安装。只需进行此安装。安装将 .dep 文件与“依赖检查器工具”相关联

其次，您可以搜索“如何安装 Microsoft Dependency Checker Tool”。

在下一个链接中，Microsoft 谈到了该工具。

[http://msdn.microsoft.com/en-us/identitytrainingcourse_silverligthandidentity2010.aspx](http://msdn.microsoft.com/en-us/identitytrainingcourse_silverligthandidentity2010.aspx)

# c# - 有没有办法将控件设置为工具提示？

> ID：15951477
> 
> 赞同：1
> 
> 时间：2013-04-11T14:31:32.977
> 
> 标签：c#, winforms, controls, tooltip

我想知道是否可以使用`ToolTip.SetToolTip`或类似的东西将控件作为工具提示打开，而不仅仅是一个字符串（即`SetToolTip(controlToWhichToAdd, panelToDisplayAsToolTip)`，而不是将字符串作为第二个参数传递）。

如果这不可能，我猜下一个最好的办法是在`mouse_enter`控件上的事件上显示鼠标位置上的面板，并在`mouse_leave`.

或者是否有其他做法可以更轻松地实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:36:36.927

[您可以为Tooltip.Popup 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.popup.aspx)编写一个处理程序，并取消弹出窗口以显示您自己的面板。不过，您需要在适当的时候清理它。

例如：

```
private void ToolTip1_Popup(Object sender, PopupEventArgs e)
{
  e.Cancel = true;
  //Do work here to display whatever control you'd like
} 
```

如果您只是在工具提示显示中寻找更多格式选项，另一种选择是类似于[此 CodeProject entry](http://www.codeproject.com/Articles/32376/A-Professional-HTML-Renderer-You-Will-Use)，它实现了启用 HTML 的工具提示：

![在此处输入图像描述](https://i.stack.imgur.com/ihWcX.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:42:26.253

这是开箱即用的。你有两个选择。第一个选项是覆盖[Draw Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.draw.aspx)，这将让您自定义工具提示的外观。这是[一个例子](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.draw.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)。如果使用此方法，请确保将[OwnerDraw](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.ownerdraw.aspx)属性设置为！`true`

虽然如果您只需要一些简单的定制，第一种方法会起作用，但如果您需要更灵活的选项，第二种方法效果最好。第二种选择是执行您已经建议的操作并创建自己的工具提示。简单地说，您将首先为[MouseEnter 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)创建一个事件处理程序。当该事件触发时，您将启用[Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)。此计时器将是显示工具提示之前发生的延迟。最后，您只需让您的面板出现在鼠标坐标处。

假设您有一个带有按钮和计时器的表单，并且您希望该按钮具有作为面板的工具提示：

```
public partial class Form1 : Form
{
    private Panel _myToolTipPanel;

    private void Form1_Load(object sender, EventArgs e)
    {
        _myToolTipPanel = new Panel {Visible = false};
        Controls.Add(_myToolTipPanel);

        Label myLabel = new Label();
        myLabel.Text = "Testing";
        _myToolTipPanel.Controls.Add(myLabel);
    }

    private void button1_MouseEnter(object sender, EventArgs e)
    {
        timer1.Enabled = true;
    }

    private void button1_MouseLeave(object sender, EventArgs e)
    {
        timer1.Enabled = false;
        _myToolTipPanel.Visible = false;
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        timer1.Enabled = false;
        Point position = Cursor.Position;
        Point formPoisition = PointToClient(position);

        _myToolTipPanel.Visible = true;
        _myToolTipPanel.Location = formPoisition;
    }
} 
```

当然，现在您必须对工具提示进行一些美化，但这是一般的想法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:47:15.257

一种方法可能是继承 ToolTip 控件，然后**覆盖 SetToolTip 和 Show**方法。在 SetToolTip 内部，私有方法 - **SetToolTipInternal**需要重写，但大部分功能可以重用 - 它使用鼠标事件（离开、移动）来绑定区域。但由于工具提示使用内部的窗口来显示气球窗口。你将不得不重写相当多的代码。

**但这可能很耗时，并且需要进行大量测试。**

# php - 包含特定文件的理想方式

> ID：15951480
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:35.357
> 
> 标签：php, include

我一直在尝试找到一种方法来做到这一点，但似乎想不出一个干净、简单的方法。当用户提交表单（比如注册表单）时，表单验证如下：

```
 $('form').submit(function(e) {
        e.preventDefault();
        var $formId = $(this).attr('id');
        $.ajax({
            url : "validation_check.php",
            type : "POST",
            data : $("#" + $formId).serialize(),
            success : function(data) {
                $('#' + $formId + ' :input.form_errors').removeClass('form_errors');
                data = $.parseJSON(data);
                if (jQuery.isEmptyObject(data)) {
                    document.forms[$formId].submit();
                } else {
                    $.each(data, function(i, item) {
                        $('#' + $formId + ' :input#' + i).addClass('form_errors');
                    });
                }
            }
        });
    }); 
```

`validation_check.php`只是这样做：

```
echo json_encode(validate($_POST)); 
```

最后，`validate()`函数

```
$errors = array();

// need to only include if on the registration page
include_once 'register.val.php';

if (isset($data['email']) && ($data['email'] == '' || filter_var($data['email'], FILTER_VALIDATE_EMAIL) == false)) {
        $errors['email'] = 'Not a valid email';
}

return $errors; 
```

`include_once 'register.val.php';`只包含一些 if 语句，如上面的电子邮件之一。我的问题是，如何确定要包含哪个文件？如果我正在注册，那么我只想包含`register.val.php`. 如果我要保存信息，我只想包含`edit.val.php`. 关于以简洁干净的方式做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:45:02.180

将 $_GET 传递给名为 action 的脚本，其值为 register 或 edit：

```
validation_check.php?action=register 
```

然后你可以做一个 if （如果你想添加更多动作，也可以做一个 switch）

```
if($_GET['action'] === 'register')
    include_once('register.val.php');
else
    include_once('edit.val.php'); 
```

如果您愿意，也可以通过邮件发送操作。

# jquery - 显示隐藏多个块

> ID：15951482
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:40.607
> 
> 标签：jquery

我的 js 的以下部分显示并隐藏了一个名为 gallery_item_details_list 的 ul 类，它工作得很好。

```
 var detailsBlock = $(location.hash);
        $(".gallery_item_details_list .gallery_item_details").css("display", "none");
        detailsBlock.css("display", "block");
        var galleryItem = $("#gallery-item-" + location.hash.substr(17));
        detailsBlock.find(".prev").attr("href", (galleryItem.prevAll(":not('.isotope-hidden')").first().length ? galleryItem.prevAll(":not('.isotope-hidden')").first().find(".open_details").attr("href") : $(".gallery:not('.horizontal_carousel')").children(":not('.isotope-hidden')").last().find(".open_details").attr("href")));
        detailsBlock.find(".next").attr("href", (galleryItem.nextAll(":not('.isotope-hidden')").first().length ? galleryItem.nextAll(":not('.isotope-hidden')").first().find(".open_details").attr("href") : $(".gallery:not('.horizontal_carousel')").children(":not('.isotope-hidden')").first().find(".open_details").attr("href")));
        var visible=parseInt($(".gallery_item_details_list").css("height"))==0 ? false : true;
        var galleryItemDetailsOffset;
        if(!visible)
        {
            $(".gallery_item_details_list").css("display", "block").animate({height:detailsBlock.height()}, 500, 'easeOutQuint', function(){
                $(this).css("height", "100%");
                $(location.hash + " .image_carousel").trigger("updateSizesCustom");
            }); 
```

我现在的问题是，如何修改此代码以显示/隐藏另外一个名为例如contact_block 的类？我试图将代码更改为：

```
 $(".gallery_item_details_list .gallery_item_details .contact_block").css("display", "none"); 
```

和

```
 $(".gallery_item_details_list .contact_block").css("display", "block").animate({height:detailsBlock.height()}, 500, 'easeOutQuint', function(){ 
```

但这似乎不起作用。

一些专家的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:35:56.770

在每个选择器之间使用逗号：

```
$(".gallery_item_details_list .gallery_item_details, .contact_block").hide(); 
```

您原来的工作选择器是：

```
".gallery_item_details_list .gallery_item_details" 
```

这意味着选择`.gallery_item_details`元素的后代`.gallery_item_details_list`元素。当您尝试在*没有*`.contact_block`逗号的情况下添加到末尾时，这意味着查找作为元素后代元素的后代的元素。*`.contact_block``.gallery_item_details``.gallery_item_details_list`*

# symfony - Symfony2 唯一约束已在使用中

> ID：15951484
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:44.863
> 
> 标签：symfony, doctrine-orm

我的 UserTrack 实体

```
/**
 * @ORM\Entity(repositoryClass="JJ\MainBundle\Repository\UserTrackRepository")
 * @ORM\Table
 * @UniqueEntity({"user", "track"})
 * @JMS\ExclusionPolicy("all")
 */
class UserTrack implements RateableInterface
...
    /**
     * @ORM\ManyToOne(targetEntity="JJ\MainBundle\Entity\User", inversedBy="user_tracks", fetch="EXTRA_LAZY")
     */
    protected $user;
...
    /**
     * @ORM\ManyToOne(targetEntity="JJ\MainBundle\Entity\Track", inversedBy="user_tracks")
     * @JMS\Expose
     */
    protected $track;
... 
```

当我打电话时：

```
$this->validator->validate($userTrack); 
```

这是我的例外（当我更新我的实体时）：

```
message": "JJ\\MainBundle\\Entity\\UserTrack.user:\n This value is already used.\n", 
```

虽然我可以清楚地看到它是独一无二的： ![在此处输入图像描述](https://i.stack.imgur.com/lJ1b6.png)

请赐教...

# android - close() 从未在数据库上显式调用，android 数据库未关闭

> ID：15951487
> 
> 赞同：1
> 
> 时间：2013-04-11T14:31:48.560
> 
> 标签：android, sqlite

测试.java：

```
 SQLiteDatabase db=openOrCreateDatabase("data",MODE_PRIVATE,null);
    db.execSQL("CREATE TABLE IF NOT EXISTS location(ID INTEGER PRIMARY KEY AUTOINCREMENT,NAME VARCHAR(100),CBcode VARCHAR(100));");
    Cursor c1 = db.rawQuery("Select NAME from location", null);
    Cursor c2 = db.rawQuery("Select CBcode from location", null);
    if(c1==null || c2 == null)
    {
        Toast.makeText(getBaseContext(), "Database values empty, please refer Help option    befor you start using the app..", Toast.LENGTH_LONG).show();
    }
    else
    {
    c1.moveToFirst();
    c2.moveToFirst();
    int col1=c1.getColumnIndex("NAME");
           int col2=c2.getColumnIndex("CBcode");
            for(c1.moveToFirst(); c1.moveToLast(); c1.moveToNext())
            {
                    for(c2.moveToFirst(); c2.moveToLast(); c2.moveToNext())
                    {
                            if(loc_name == c1.getString(col1))
                            {
                              my_cb = c2.getString(col2);
                              c2.close();
                              c1.close();
                              Toast.makeText(getBaseContext(), "alarm has been set", Toast.LENGTH_LONG).show();
                              break;
                            }
                            else
                            {
                            //  Toast.makeText(getBaseContext(), "No such values in database, please read Help carefully before using lovisis!", Toast.LENGTH_LONG).show();
                            }
                    }
            }
    }
    db.close(); 
```

在我上面的代码中，我试图访问数据库并在字符串匹配时开始一个新的活动，但是我越来越接近从来没有在数据库错误上显式调用。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:22:50.210

纳豆，

我已将您的代码更改如下，它对我有用。请检查并让我知道。

```
 SQLiteDatabase db=openOrCreateDatabase("data",MODE_PRIVATE,null);
                db.execSQL("CREATE TABLE IF NOT EXISTS location(ID INTEGER PRIMARY KEY AUTOINCREMENT,NAME VARCHAR(100),CBcode VARCHAR(100));");
                Cursor c1 = db.rawQuery("Select NAME from location", null);
                Cursor c2 = db.rawQuery("Select CBcode from location", null);
                if(c1==null || c2 == null)
                {
                    Toast.makeText(getBaseContext(), "Database values empty, please refer Help option befor you start using the app..", Toast.LENGTH_LONG).show();
                }
                else
                {
                    c1.moveToFirst();
                    c2.moveToFirst();

                    int col1=c1.getColumnIndex("NAME");
                    int col2=c2.getColumnIndex("CBcode");

                    while(c1.moveToNext() && c2.moveToNext())
                    {
                            if(loc_name.equals(c1.getString(col1)))
                            {
                               my_cb = c2.getString(col2);
                               Toast.makeText(getBaseContext(), "alarm has been set", Toast.LENGTH_LONG).show();
                            }
                            else
                            {
                            //  Toast.makeText(getBaseContext(), "No such values in database, please read Help carefully before using lovisis!", Toast.LENGTH_LONG).show();
                            }
                    }
                }
                c2.close();
                c1.close();
                db.close(); 
```

你的错误是，1\. 两个 for 循环很昂贵，使用 && 的 while，如图所示。2\. 同时关闭 c1 和 c2。

# python - 在 Python 中使用 scipy 绘制树状图

> ID：15951488
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:48.837
> 
> 标签：python, numpy, scipy

scipy`dendrogram`文档说：

```
dendrogram(Z, ...)
    The dendrogram illustrates how each cluster is
    composed by drawing a U-shaped link between a non-singleton
    cluster and its children. ...It is expected that the distances in Z[:,2] be
    monotonic, otherwise crossings appear in the dendrogram. 
```

我不清楚关于“预计 Z[:,2] 中的距离是单调的，否则在树状图中会出现交叉点”这句话？图中的交叉点是指什么？有人可以举一个例子，说明特定距离矩阵会发生这种情况并解释原因吗？

这是穿越的例子吗？在我看来，这只是由距离矩阵中的一些对称性产生的...... ![在此处输入图像描述](https://i.stack.imgur.com/wKU2a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:40:33.613

Z 应该指定集群的合并（合并了 2 个集群）和它们发生的“时间”，其中“时间”是树状图的 y 轴（这就是距离的意思）。Z 通常被构造为使“时间”按递增顺序排列，这也便于绘制 U 形不会相互重叠。如果你以不同的顺序绘制 U，它们可能会相互重叠，看起来会很混乱——这就是所谓的交叉。

我跑了一个简短的例子，这是一个交叉口的例子：

![在此处输入图像描述](https://i.stack.imgur.com/8mmmJ.png)

底线：坚持正确的顺序。

# json - 如何将 json 对象从控制器返回到 MVC4 中的视图？

> ID：15951491
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:53.327
> 
> 标签：json, asp.net-mvc-4

我需要将 json 对象返回到从控制器生成的完整视图中。原因是需要解析该数据的第 3 方 jquery 软件，截至目前，我必须进行第二次服务器调用以获取 json 数据，而理论上我应该能够在 actionresult 中获取数据并将其传递到视图中。

为了澄清，我需要在不使用模型的情况下从 actionresult 返回包含 html 和 json 对象的视图。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:24:36.003

如果您真的不想使用视图模型，那么您可以在控制器操作中分配`Data`属性。`ViewBag`

或者，您可能想查看可通过 NuGet 获得的[NGon](https://github.com/brooklynDev/NGon)，看看它是否适合您的需求。

# comparison - 为什么设置差异函数不能将列表与文件中的数据进行比较？

> ID：15951492
> 
> 赞同：3
> 
> 时间：2013-04-11T14:31:54.187
> 
> 标签：comparison, format, lisp, common-lisp, set-difference

这是我的文件和功能：

List1.txt => 猫狗虎熊

List2.txt => 猫狗老虎

这些文件在 winodws xp 上是 ANSI 编码的。

```
(defun get-file (filename)
  (with-open-file (stream filename)
  (loop for line = (read-line stream nil)
  while line collect line)))

(defparameter *file1* (get-file "list1.txt"))
(defparameter *file2* (get-file "list2.txt"))

(set-difference *file1* *file2*) 
```

我认为输出只是“熊”。但是，它返回 ("cat", "dog", "tiger", "bear") 作为差异。我假设它必须与我从文件中读取信息有关，但我被困在那里。感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:45:15.800

Common Lisp`EQL`用作默认测试。你想要`string-equal`的或类似的。

```
CL-USER > (set-difference '("cat" "dog" "tiger" "bear")
                          '("cat" "dog" "tiger")
                          :test #'string-equal)
->
("bear") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:12:07.987

除了 Rainer 已经提到的`:test`关键字参数之外[`set-difference`](http://clhs.lisp.se/Body/f_set_di.htm)，您的代码中还有另一个问题。您的函数`get-file`返回一个行列表，其中每一行只是一个字符串。您可能希望将这些行拆分为单词。您可以使用`split-sequence`函数轻松完成（谷歌获取`split-sequence`Common Lisp 包或使用

```
(ql:quickload :split-sequence) 
```

如果你安装了[quicklisp](http://www.quicklisp.org/)。因此，您的函数可能如下所示：

```
(defun get-file (path)
  (with-open-file (s path)
    (let* ((len (file-length s))
           (data (make-string len)))
      (read-sequence data s)
      (mapcar #'(lambda (string) (string-trim '(#\Space #\Tab #\Newline) string))
        (split-sequence:split-sequence '#\Space data :remove-empty-subseqs t)))))

(defparameter *file1* (get-file "list1.txt"))
(defparameter *file2* (get-file "list2.txt"))

(format t "~s~%" (set-difference *file1* *file2* :test #'string-equal)) 
```

这将正确地打印：

```
("bear") 
```

# php - 对一组实体symfony2进行排序

> ID：15951494
> 
> 赞同：0
> 
> 时间：2013-04-11T14:31:54.903
> 
> 标签：php, symfony

我有一组实体，我想根据该实体的一个属性对其进行排序。我看到像 sort() 这样的函数是在 php 中定义的，但我想添加将基于该元素进行比较的元素。有任何想法吗？？？

```
$qb->select('a')
     ->from('TelnOperatorBundle:Subnumber', 'a')
     ->where('a.numberrange = :id')
     ->setParameter('id', $id);

 //$entites=$qb->getQuery()
             // ->getResult();
 $entites = $qb->getQuery()->getResult();
asort($entites);
//var_dump($entites);

foreach($entites as $entite)
{
  //$entite est une instance d'Article pour notre exemple
   echo($entite->getId());
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:45:46.480

如果没有理由需要无序数组并且您的实体由 Doctrine 处理，您只需在控制器中使用此代码：

```
$this->getDoctrine()->getRepository('TelnOperatorBundle:Subnumber')->findBy(
    array('numberrange' => $id),
    array('numberrange' => 'asc')
); 
```

第一个数组保存`WHERE`子句的值，第二个数组保存`ORDER BY`.

* * *

如果您想创建自己的查询 - 例如在存储库中使用 - 只需添加：

```
[…]
->where('a.numberrange = :id')
->addOrderBy('a.numberrange', 'desc')
[…] 
```

到您的查询。

* * *

在这两种情况下，结果都按您的数据库排序。所以没有必要自己做这件事。

# caching - Symfony2 缓存日志在看起来很成功时显示“未命中”

> ID：15951516
> 
> 赞同：1
> 
> 时间：2013-04-11T14:32:44.183
> 
> 标签：caching, symfony

我正在尝试确保我的应用程序正确缓存我的页面。我的控制器中有以下代码

```
//...in controller
$response = $this->render('FrontBundle:Page:index.html.twig', $data);
$response->setPublic();
$response->setMaxAge(600);
$response->setSharedMaxAge(600);
//this appears only on the first page load
echo 'this was not cached';
return $response; 
```

当我第一次加载页面时，我看到**这没有缓存**，每次后续刷新都不会显示此消息，所以我很确定我的缓存正在被命中。

但是，当我查看我的日志文件时，我会在每个请求中看到类似以下内容

```
[11-Apr-2013 UTC] GET /_wdt/462e0da5f0afdfb7ad62760f48e41429e2b86fbd: miss 
```

我不应该`hit`在第一页加载后看到吗？

这是我在 app_dev.php 中使用的代码，如此处[所示](http://symfony.com/doc/master/book/http_cache.html#symfony2-reverse-proxy)

```
$kernel = new AppKernel('dev', true);
$kernel->loadClassCache();
$kernel = new AppCache($kernel);
$request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response);
error_log($kernel->getLog()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T00:21:59.533

> 我不应该在第一页加载后看到点击吗？

`/_wdt`对那个 URL 的请求不是对*Symfony 的* `Web Debug Toolbar`请求，它们从不被缓存。你只看到它们，因为你在`dev`环境中。

此外，从缓存服务的请求看起来像`GET /some_page: fresh`

# excel - 添加安装和引用

> ID：15951518
> 
> 赞同：3
> 
> 时间：2013-04-11T14:32:49.187
> 
> 标签：excel, add-in, vba

我想检查插件是否已安装并被引用。下面的代码检查插件是否安装。我如何检查它是否在excel中引用。

通过引用，我的意思是工具 > 插件 > 插件 Dailog 框 > 如果插件已安装 > 检查是否检查了具有特定名称的插件。

我希望最好没有任何循环。

```
Sub Demo() 
    Dim b As Boolean 
    b = CheckAddin("Solver add-in") 
    MsgBox "Solver is " & IIf(b, "", "not ") & "installed" 
End Sub 

Function CheckAddin(s As String) As Boolean 
    Dim x As Variant 
    On Error Resume Next 
    x = AddIns(s).Installed 
    On Error Goto 0 
    If IsEmpty(x) Then 
        CheckAddin = False 
    Else 
        CheckAddin = True 
    End If 
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:54:47.037

```
Sub Sample()
    Dim wbAddin As Workbook

    On Error Resume Next
    Set wbAddin = Workbooks(AddIns("My Addin").Name)

    If Err.Number <> 0 Then
        On Error GoTo 0
        'Set wbAddin = Workbooks.Open(AddIns("My Addin").FullName)
        Debug.Print "Not Referenced"
    Else
        Debug.Print "Referenced"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:54:01.163

您需要测试插件是否打开，就像任何其他工作簿一样。如果加载了插件，这将返回 True：

```
Function AddinIsLoaded(AddinName As String) As Boolean
On Error Resume Next
AddinIsLoaded = Len(Workbooks(AddIns(AddinName).Name).Name) > 0
End Function 
```

例如：

```
Sub Test
Debug.Print AddinIsLoaded("Solver add-in")
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T16:30:35.687

我遇到了一个问题，即使函数返回 True，在尝试使用该插件时我仍然会收到错误消息。事实证明，可以安装插件，但不能“打开”。所以，除了检查插件外，我还要检查插件文件是否打开。如果没有，我打开插件。在这里查看我的问题和答案：

[Excel VBA检查插件是否已安装但未打开](https://stackoverflow.com/questions/39413928/excel-vba-checking-if-addin-is-installed-but-not-open/39414003#39414003)

# java - 使用反射调用带有数组参数的方法

> ID：15951521
> 
> 赞同：15
> 
> 时间：2013-04-11T14:32:58.893
> 
> 标签：java, reflection, method-invocation

我正在尝试编写一个方法，通过将字符串数组作为参数传递给方法来执行另一个类的静态方法。

这是我所拥有的：

```
public static void
executeStaticCommand(final String[] command, Class<?> provider)
{
    Method[] validMethods = provider.getMethods();

    String javaCommand = TextFormat.toCamelCase(command[0]);

    for (Method method : validMethods) {
        if (method.getName().equals(javaCommand)) {
            try {
                method.invoke(null, new Object[] { new Object[] { command } });
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                Throwable ex = e.getCause();
                ex.printStackTrace();
            }
            break;
        }
    }
} 
```

这样：

```
String[] args = new String[] { "methodName", "arg1", "arg2" }; 
executeStaticCommand(args, ClassName.class); 
```

应该执行这个：

```
public class ClassName {
    public static void methodName(String[] args) {
        assert args[1].equals("arg1");
    }
} 
```

但是我得到了`IllegalArgumentException`s。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-11T14:48:23.780

你有两个问题：

1.  目标参数类型是`String[]`，但您传入的是`Object[]`
2.  您将整个命令数组作为参数传递，其中包括方法名称

问题都在内部`try`块中，所以我只显示该代码。

```
String[] args = Arrays.copyOfRange(command, 1, command.length - 1);
method.invoke(null, new Object[]{args}); // must prevent expansion into varargs 
```

感谢[Perception](https://stackoverflow.com/users/680925/perception)提醒我可变参数问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:41:08.177

您尝试调用的方法需要 String 数组，但是您将 Object 数组作为参数传递。将其更改为字符串数组，或者如果方法需要 Object，则可以传递任何类型。

method.invoke(null,(Object) 命令);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:41:22.860

基于[这个问题](https://stackoverflow.com/questions/2467544/invoking-a-static-method-using-reflections)，看起来电话应该是

```
 method.invoke(null, command); 
```

# php - Sql 查询绑定变量与指定它们

> ID：15951528
> 
> 赞同：2
> 
> 时间：2013-04-11T14:33:15.803
> 
> 标签：php, mysql, pdo, bind

我正在 mySql 中创建一个简单的查询，以将表单中的一些值插入到我的数据库中。

我的问题很简单，但是参考了绑定变量与将它们指定到 sql 语句中的区别。

捆绑：

```
$query = "INSERT INTO test (name, lastName, price) VALUES (:name, :lastName, :price)";
$apply = $con -> prepare($query);
$apply -> execute (array(':name'=>$name,':lastName'=>$lastName,':price=>$price')); 
```

典型的：

```
$query = "INSERT INTO test (name, lastName, price) VALUES ($name, $lastName, $price)";
Execute the query.... 
```

即使对于上述简单情况，是否真的推荐使用绑定选项？这是为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:52:13.473

尽管无需绑定（通过手动格式化所有变量）就可以使查询完全安全，但使用准备好的语句来表示查询中的数据确实是唯一正确的方法。

使用准备好的语句的重要性经常被误判，所以，我想澄清一下真正的好处：

*   准备好的语句使正确的格式化（或处理）*不可避免*。
*   *准备好的语句在唯一合适的地方进行*正确的格式化（或处理）——就在查询执行之前，而不是其他地方，所以，我们的安全不会依赖于像这样不可靠的来源
    *   一些 PHP 的“魔法”功能，它会破坏数据而不是使其安全。
    *   一个（或几个）程序员的好意，他们可以决定在程序流的某个地方格式化（或不格式化）我们的变量。这是非常重要的一点。
*   准备好的语句影响进入查询的值，但不影响源变量，源变量保持不变，可以在进一步的代码中使用（通过电子邮件发送或显示在屏幕上）。
*   准备好的语句可以显着缩短应用程序代码，在后台进行所有格式化（*仅在驱动程序允许的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:35:58.870

这是必要的，因为您有用户定义的值，并且用户可以轻松地操纵它们，以破坏您的查询结构并执行不需要的命令。

如果数据仅由服务器操作，则没有必要。但由于它使用来自用户可以操作的超全局数据（cookie、会话、发布、获取、请求......），所以这是必须的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:36:15.937

因为它更安全。

如果这三个变量都填充了用户数据，则无需清理输入。此外，如果您需要多次重复该查询，则整体执行应该更快。

而且我个人认为，当您必须在几个月后再次阅读查询时，阅读和调试会更容易......

# facebook - 在页面选项卡中嵌入 Flash

> ID：15951535
> 
> 赞同：0
> 
> 时间：2013-04-11T14:33:27.580
> 
> 标签：facebook, flash, tabs

任何人都可以在最新的 Chrome 中使用在 Page Tab URL 中显示 flash 的解决方案？出于安全原因，Chrome 会阻止嵌入。控制台错误：

不安全的 JavaScript 尝试从 URL https://[PAGE_TAB_URL] 的框架访问具有 URL https://www.facebook.com/pages/[CUT] 的框架。被访问的框架将“document.domain”设置为“facebook.com”，但请求访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。

我知道，我可以在画布模式 (apps.facebook.com/appname) 下显示 flash，但我想将它嵌入到 Page Tab 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:42:18.793

好吧，我曾经遇到过同样的问题，我构建了一个 facebook iframe 应用程序，该应用程序允许用户使用网络摄像头拍摄照片，而负责使用网络摄像头的 .swf 始终会触发该错误。

如果您嵌入 youtube 视频，chrome 会触发该错误，但视频仍在播放，在我的情况下，.swf 对象刚刚冻结，我无法拍摄任何照片，甚至无法更改闪光灯设置。

解决方案是在用户操作后添加这个 .swf，在这种情况下是单击，只是尝试不要在页面上嵌入 flash，只需放置一个按钮，在用户单击后添加嵌入代码。

# testing - 跨浏览器UI测试

> ID：15951537
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:33:38.363
> 
> 标签：testing, cross-browser

当我们开发任何网站时，它看起来不错，但客户可能会使用不同的浏览器查看页面，然后他/她会遇到问题。我搜索可以使用不同浏览器和不同版本从本地计算机查看我的页面的工具或方式。我发现很少有网站提供此功能，并且看到它们非常慢，并且它们正在提供我不想要的页面图像，而我想在浏览器中查看我的页面。所以我想要一个工具，它允许我选择浏览器和版本，然后在该浏览器中显示我的页面和特定版本。我可能会更改版本，页面应该刷新以更改浏览器或版本。我希望必须有很多可用的工具，但不幸的是我没有得到正确的一个。谁能指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:38:53.047

Adobe 几周前关闭了 BrowserLab，但为您可以在[此页面](http://blogs.adobe.com/browserlab/2013/03/13/browserlab-is-shutting-down-on-march-13-2013/)上使用的其他服务提供了一些指导。有[Spoon.net 浏览器沙箱](http://spoon.net/browsers/)，但它会在您的计算机上安装 VM，我从不喜欢这样。

我个人在 Windows 上使用带有旧版本 IE 的 VMWare 虚拟机，在 Mac VM 上使用 Safari。设置它需要更多的努力，但我发现它效果最好。

# linux - Net Link Linux 用户代码绑定套接字调用对于多播组 ID（非零值）总是失败

> ID：15951547
> 
> 赞同：2
> 
> 时间：2013-04-11T14:33:58.737
> 
> 标签：linux, sockets, linux-kernel, netlink

您好我正在尝试实现网络链接用户代码和内核代码，每件事都适用于单播（src_addr.nl_groups = 0;）。对于多播，用户代码绑定调用对于非零 src_addr.nl_groups 值总是失败。真的不确定为多播设置什么价值以及如何进一步进行。我检查了内核源代码树中 netlink_broadcast 的使用情况，所以我把相同的组 ID 值（RTMGRP_LINK）放在这里。对于单播，我在互联网上找到了很多帮助，但对于多播，我不这么认为。所以请帮助我进一步进行。

我得到的错误是：

绑定：没有这样的文件或目录

./a.out：无法绑定套接字（3）和错误：-1：没有这样的文件或目录

```
#include <sys/socket.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <stdio.h>
#include <linux/netlink.h>
#include <linux/rtnetlink.h>
#define NETLINK_TEST 28
#define GROUP_IB 1
#define MAX_PAYLOAD 1024
struct sockaddr_nl src_addr, dst_addr;
struct nlmsghdr *nlh = NULL;
struct msghdr msg;
struct iovec iov;
int sock_fd;

int main(int argc, char ** argv)
{
    int err;
    sock_fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_TEST);
    if (sock_fd<0) {
            char s[BUFSIZ];
            sprintf( s, "%s: can't assign fd for socket", argv[0] );
            perror(s);
            return -1;
    }

    memset(&src_addr, 0, sizeof(src_addr));
    src_addr.nl_family = AF_NETLINK;
    src_addr.nl_pid = getpid();
    src_addr.nl_groups = 0; // Unicast
    //src_addr.nl_groups = RTMGRP_LINK; /* Multicast, bind call always fails for non zero values */

    err = bind(sock_fd, (struct sockaddr*)&src_addr, sizeof(src_addr));
    perror("bind");
    if (err<0) {
            char s[BUFSIZ];
            sprintf( s, "%s: can't bind socket (%d)and err : %d", argv[0], sock_fd,err );
            perror(s);
            return -1;
    }

    memset(&dst_addr, 0, sizeof(dst_addr));
    nlh = (struct nlhmsghdr *) malloc(NLMSG_SPACE(MAX_PAYLOAD));
    memset(nlh, 0, NLMSG_SPACE(MAX_PAYLOAD));

    iov.iov_base = (void *)nlh;
    iov.iov_len = NLMSG_SPACE(MAX_PAYLOAD);
    msg.msg_name = (void *)&dst_addr;
    msg.msg_namelen = sizeof(dst_addr);
    msg.msg_iov = &iov;
    msg.msg_iovlen = 1;

    printf("pid : %d\n Waiting for messages from kernel...\n",getpid());
    recvmsg(sock_fd, &msg, 0);
    printf("Message : %s\n", NLMSG_DATA(nlh));
    close(sock_fd);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T23:21:59.507

Netlink 套接字绑定对你是什么用户很敏感——如果你没有以“root”身份运行有问题的程序，至少在 RedHat 6 上，我已经看到它们确实会失败。

在更改逻辑之前，尝试以 root 1st 身份运行。如果您遇到与正常操作相同的故障，那么您知道这不是（必然）权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T09:47:36.700

问题是

sock_fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_TEST);

您的内核模块是否定义了 NETLINK_TEST 系列？您自己的家族可能必须在内核模块中得到支持，并且它应该使用`nlmsg_multicast()` RTMGRP_LINK 将消息发布到正确的组中，该组是在 NETLINK_ROUTE 中定义的组。

此示例代码是多播的示例

```
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <unistd.h>

 #define MYPROTO NETLINK_USERSOCK
 #define MYMGRP 21

 int open_netlink(void)
 {
    int sock;
    struct sockaddr_nl addr;
    int group = MYMGRP;

    sock = socket(AF_NETLINK, SOCK_RAW, MYPROTO);
    if (sock < 0) {
        printf("sock < 0.\n");
        return sock;
    }

    memset((void *) &addr, 0, sizeof(addr));
    addr.nl_family = AF_NETLINK;
    addr.nl_pid = getpid();

    /* addr.nl_groups = MYMGRP; */

    if (bind(sock, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
        printf("bind < 0.\n");
        return -1;
    }

    if (setsockopt(sock, 270, NETLINK_ADD_MEMBERSHIP, &group, sizeof(group)) < 0) {
        printf("setsockopt < 0\n");
        return -1;
    }

    return sock;
}

void read_event(int sock)
{
    struct sockaddr_nl nladdr;
    struct msghdr msg;
    struct iovec iov;
    char buffer[65536];
    int ret;

    iov.iov_base = (void *) buffer;
    iov.iov_len = sizeof(buffer);
    msg.msg_name = (void *) &(nladdr);
    msg.msg_namelen = sizeof(nladdr);
    msg.msg_iov = &iov;
    msg.msg_iovlen = 1;

    printf("Ok, listening.\n");
    ret = recvmsg(sock, &msg, 0);
    if (ret < 0)
        printf("ret < 0.\n");
    else
        printf("Received message payload: %s\n", NLMSG_DATA((struct nlmsghdr *) &buffer));
}

int main(int argc, char *argv[])
{
    int nls;

    nls = open_netlink();
    if (nls < 0)
        return nls;

    while (1)
        read_event(nls);

    return 0;
} 
```

内核模块：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/netlink.h>
#include <net/netlink.h>
#include <net/net_namespace.h>

#define MYPROTO NETLINK_USERSOCK

#define MYGRP 21

static struct sock *nl_sk = NULL;

static void send_to_user(void)
{
    struct sk_buff *skb;
    struct nlmsghdr *nlh;
    char *msg = "Hello from kernel";
    int msg_size = strlen(msg) + 1;
    int res;

    pr_info("Creating skb.\n");
    skb = nlmsg_new(NLMSG_ALIGN(msg_size + 1), GFP_KERNEL);
    if (!skb) {
        pr_err("Allocation failure.\n");
        return;
    }

    nlh = nlmsg_put(skb, 0, 1, NLMSG_DONE, msg_size + 1, 0);
    strcpy(nlmsg_data(nlh), msg);

    pr_info("Sending skb.\n");
    res = nlmsg_multicast(nl_sk, skb, 0, MYGRP, GFP_KERNEL);
    if (res < 0)
        pr_info("nlmsg_multicast() error: %d\n", res);
    else
        pr_info("Success.\n");
}

static int __init hello_init(void)
{
    pr_info("Inserting hello module.\n");

    nl_sk = netlink_kernel_create(&init_net, MYPROTO, NULL);
    if (!nl_sk) {
        pr_err("Error creating socket.\n");
        return -10;
    }

    send_to_user();

    netlink_kernel_release(nl_sk);
    return 0;
}

static void __exit hello_exit(void)
{
    pr_info("Exiting hello module.\n");
}

module_init(hello_init);
module_exit(hello_exit);

MODULE_LICENSE("GPL"); 
```

# javascript - Ctrl Z 和 document.execCommand

> ID：15951549
> 
> 赞同：3
> 
> 时间：2013-04-11T14:34:03.790
> 
> 标签：javascript

在 Safari 上，我将文本粘贴到可编辑的文本区域中。当我执行`document.execCommand("undo", false, null)`时没有任何反应，并且文本出现时带有额外的换行符。

我必须手动按下`Ctrl``Z`才能删除文本。

在随后的尝试中，当我执行时`document.execCommand("undo", false, null)`，文本与源文档中的显示完全相同，并且文本被删除！

它第一次不起作用，但在我第一次手动按下**之后**`Ctrl``Z`的所有后续尝试中都会起作用。

我真的需要`document.execCommand("undo", false, null)`进行**所有**尝试，而不仅仅是从第二个开始。

有没有人有这个问题的经验谁知道解决方案？

# php - 如何在 PHP 中选择一个随机数但具有正态概率分布？

> ID：15951563
> 
> 赞同：12
> 
> 时间：2013-04-11T14:34:33.900
> 
> 标签：php

在 php 中，如何生成一个随机数，假设具有特定均值和标准偏差的正态分布？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T14:56:24.180

```
function nrand($mean, $sd){
    $x = mt_rand()/mt_getrandmax();
    $y = mt_rand()/mt_getrandmax();
    return sqrt(-2*log($x))*cos(2*pi()*$y)*$sd + $mean;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:00:56.647

尝试使用 PHP 的[`stats_rand_gen_normal`](http://php.net/manual/en/function.stats-rand-gen-normal.php)函数。我相信它可以满足您的需求，并且不需要您重新发明轮子：

> 生成单个随机偏离正态分布的均值、av 和标准差 sd (sd >= 0)

# c# - 从解决方案中获取所有项目引发错误

> ID：15951570
> 
> 赞同：1
> 
> 时间：2013-04-11T14:34:50.680
> 
> 标签：c#, visual-studio, envdte

我正在调试中，我得到了对当前解决方案的引用作为 DTE2。（[来自“阿达拜伦”](https://stackoverflow.com/questions/4724381/get-the-reference-of-the-dte2-object-in-visual-c-sharp-2010)）

当我在 vsSolution.Projects 上尝试 foreach 循环时，经常出现以下错误：

> 消息过滤器指示应用程序正忙。（来自 HRESULT 的异常：0x8001010A (RPC_E_SERVERCALL_RETRYLATER)）

点击继续，我仍然可以循环浏览所有项目。我得到错误的任何理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:45:11.610

我不确定它为什么会引发异常，但您可以使用`try catch`. 它不会一直失败。当失败时，您可以重试一次，它可以工作。[这](https://stackoverflow.com/questions/15580580/autoformat-code-from-command-line/15581025#15581025)是我另一篇文章中的类似问题。

# c++ - 将图像添加到 CImageList(MFC) 时出错

> ID：15951572
> 
> 赞同：4
> 
> 时间：2013-04-11T14:34:57.200
> 
> 标签：c++, mfc

我正在使用以下代码将图像添加到 CImageList：

```
CImageList ImageList;

ImageList.Create(64, 64, ILC_COLOR32, 0, 1);

      Find image path and load image . . .
HBITMAP hBitmap = LoadBitmapFromFile(finder.GetFilePath(), NULL, 64, 64);

int nImage = ImageList.Add(CBitmap::FromHandle(hBitmap), RGB(0,0,0));

HBITMAP LoadBitmapFromFile(const char* pszFilePath, HDC hDC, long lMaxHeight, long lMaxWidth)
{
    // Macro that MFC needs to manage its state within a DLL
    AFX_MANAGE_STATE(AfxGetStaticModuleState())

    // The item object which will be used to read in the file
    CxImage image;
    // Load the image from the file
    if(image.Load(pszFilePath))
    {
        ResizeImage(image, lMaxHeight, lMaxWidth);

        // Get a handle to a bitmap version of the image which the given DC can use
        return image.MakeBitmap(hDC);
    }
    return NULL;
}

void ResizeImage(CxImage& image, long lMaxHeight, long lMaxWidth)
{
    const DWORD ulImgHeight = image.GetHeight();
    const DWORD ulImgWidth = image.GetWidth();

    long nHeightDif = ulImgHeight - lMaxHeight;
    long nWidthDif = ulImgWidth - lMaxWidth;
    if(nHeightDif > 0 || nWidthDif > 0)
    {
        double rScaleFactor = 1.0;
        if(nHeightDif > nWidthDif)
            rScaleFactor = (double)lMaxHeight / (double)ulImgHeight;
        else
            rScaleFactor = (double)lMaxWidth / (double)ulImgWidth;

        long nNewHeight = (long)(ulImgHeight * rScaleFactor);
        long nNewWidth = (long)(ulImgWidth * rScaleFactor);

        image.Resample2(nNewWidth, nNewHeight);
    }
} 
```

Add 方法似乎是在添加图像，但会重复为新图像返回相同的索引值。当图像列表显示在列表框中时，所有添加的图像都显示相同的图像并返回相同的索引，但列表中图像下方显示的文件名是正确的。

我已经尝试了几件事来确定 wnat 正在发生，但都无济于事。这个问题似乎与图像大小或形状（h. vs. w.）无关。我已经通过在图片控件上显示图像验证了正确的图像附加到加载图像的 HBITMAP，但列表控件上的图像不正确。

如果我使用以下方法添加图像：

```
int nImage = ImageList.Add(CBitmap::FromHandle(hBitmap), (CBitmap *)NULL); 
```

没有加载任何重复的图像。而不是重复索引 Add 返回 -1。我找不到有关 CImageList 错误的文档。有谁知道可能会发生什么？

# asp.net-mvc - 对齐问题 btn 日历和网格

> ID：15951573
> 
> 赞同：0
> 
> 时间：2013-04-11T14:35:01.230
> 
> 标签：asp.net-mvc, vertical-alignment, alignment

在面板内，我有一个 asp 日历和一个 asp detailsView。我试图让它们彼此并排显示，但无法正确对齐。我想要左上角的日历，右上角的 detailsView，网格的顶部与日历匹配。

```
<asp:Panel ID="detailsPanel" runat="server"> 
<asp:Calendar ID="calendars" VerticalAlign="top" HorizontalAlign="left" runat="server" OnSelectionChanged="LoadRequestedDate_OnClick" OnDayRender="cal_DayRender"></asp:Calendar>
<asp:DetailsView ID="DetailsView1" runat="server" DataSourceID="DetailsDataSource" HorizontalAlign="right" VerticalAlign="top" > 
```

后表示例现在看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/2PA55.jpg)

只需要对齐顶部iv尝试 `<td align="left">`正确但没有gd

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:41:50.867

有几种方法可以做到这一点。我给你两个.​​.一个简单，一个正确:)

a.) 简单：使用 HTML 表格，如：

```
<table>
  <tr>
    <td>PUT_CALENDAR_HERE</td>
    <td>PUT_DETAILS_HERE</td>
  </tr>
</table> 
```

b.) 正确：使用 CSS 修改定位：

```
float:left; // apply this to calendar 
```

注意：您可能需要其他样式来调整位置。如果您提供纯 HTML，我可以尝试在 jsFiddle 中制作原型（否则我只会使用一些占位符创建它）。顺便说一句：您要么没有粘贴完整的 HTML，要么您缺少面板的结束标记。

编辑：这是一个 jsFiddle 来解决您的表格定位问题：http: [//jsfiddle.net/KdhnV/](http://jsfiddle.net/KdhnV/)

# c - 哪种方法对初始化 wchar_t 字符串是正确的？

> ID：15951574
> 
> 赞同：11
> 
> 时间：2013-04-11T14:35:02.213
> 
> 标签：c, arrays, string-literals, wchar-t

我正在编写一个程序，我需要初始化一个保存文本的消息缓冲区。我能够使它工作，但是我正在编写以下用于初始化 C 中的字符串的各种方法，我想了解其中的区别。`wchar_t`另外，初始化/`char`字符串最合适的方法是什么？

**方法一：**

```
wchar_t message[100]; 
```

根据我的理解，这将分配 200 字节的内存空间（我认为`wchar_t`在 Windows 操作系统上的大小为 2 字节）。此内存分配是静态的，它将在编译时在可执行文件的 .data 部分内分配。

message 本身也是一个内存地址，它指向字符串的第一个字符。

这种初始化字符串的方法对我很有用。

**方法二：**

```
wchar_t *message;
message=(wchar_t *) malloc(sizeof(wchar_t) * 100); 
```

此方法将首先将变量 message 初始化为指向`wchar_t`. 它是一个宽字符数组。

接下来，它将为这个字符串动态分配内存。我想我已经正确地编写了它的语法。

当我在我的程序中使用此方法时，它不会读取字符串中空格后的文本。

```
Example text: "This is a message" 
```

它只会将“This”读入变量消息中，之后不会出现任何文本。

**方法三：**

```
wchar_t *message[100]; 
```

这会将 message 定义为 100 个宽字符的数组和指向`wchar_t`. 这种初始化消息的方法效果很好。但是，我不确定这是否是正确的方法。因为 message 本身指向字符串中的第一个字符。那么，用大小初始化它，对吗？

我想更深入地理解它，初始化字符串的正确方法。同样的概念也可以扩展到字符串。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-11T15:07:14.533

神奇的是*encoding-prefix* `L`：

```
#include <wchar.h>

...

wchar_t m1[] = L"Hello World";
wchar_t m2[42] = L"Hello World";
wchar_t * pm = L"Hello World";

...

wcscat(m2, L" again");

pm = calloc(123, sizeof *pm);
wcspy(pm, L"bye"); 
```

另见[C11 标准的相关部分](http://port70.net/~nsz/c/c11/n1570.html#6.4.5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:39:55.680

这实际上取决于您想做什么以及如何使用数据。如果您在全局范围内需要它，请务必定义一个静态数组。如果你只需要在一个方法中，在方法中做同样的事情。如果你想在函数之间传递数据，在更长的生命周期内，`malloc`内存并使用它。

`wchar_t`但是，您的方法 III 是错误的 - 它是一个包含 100 个指针的数组。如果要创建一个 100 的大`wchar_t`数组和一个指针，则需要使用：

```
wchar_t message[100], *message_pointer; 
```

另外，关于术语：你只是在方法 I 中*声明*一个变量，你从来没有给它分配任何东西。

# thunderbird - Thunderbird 中的文件夹图标在哪里配置？

> ID：15951581
> 
> 赞同：1
> 
> 时间：2013-04-11T14:35:28.010
> 
> 标签：thunderbird

我的 Thunderbird 配置文件出了点​​问题：现在左侧文件夹三个窗格中的每个文件夹都有相同的标准黄色文件夹图标。

我的意思是收件箱、垃圾箱等的特殊图标不见了。

我尝试暂时重命名配置文件夹，然后重新启动 Thunderbird，现在所有特殊图标又回来了。

所以问题似乎出在配置文件文件夹中。

我不想删除我的个人资料文件夹，因为它包含我所有的电子邮件...... :-(

任何想法？

# 编辑

我忘记提及我正在使用的雷鸟版本：Earlybird v.22.0a2。

作为旁注，如果我删除配置文件并让 Thunderbird 重新创建一个新配置文件，则左侧窗格树上的所有特殊文件夹图标（收件箱、已发送邮件、垃圾箱等）都会重新创建并显示正常。但是......正如我在最初的问题中一直在问的那样，我想避免重新创建整个邮件存档，因为我有大量的邮件......

# >>> 解决了！<<<

最后我能够确定有问题的插件！它是 Remove Duplicate Messages (Alternate) v0.3.7 禁用它并从以下链接安装 Remove Duplicate Messages (original) v0.1.13：[https ://addons.mozilla.org/en-US/thunderbird/addon/remove-duplicate -messages/](https://addons.mozilla.org/en-US/thunderbird/addon/remove-duplicate-messages/) 为我解决了问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T18:34:11.337

在我的情况下，必须禁用“删除重复消息（替代）”、“工具栏按钮 1.0”和“颜色文件夹 1.0”插件才能在 tb v24 中恢复（非黄色）文件夹图标。后两者在 tb v23 上运行良好，“禁用插件兼容性检查”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T07:39:58.653

感谢您报告此行为！到目前为止，这是我见过的唯一提到它的地方。就我而言，该错误出现在新的 Thunderbird v24.0 常规版本中，它是由 JunQuilla v1.0.2 扩展引起的。开发者已经在 AMO 网站上发布了 v1.0.3 来解决这个问题。目前 TB 中的“检查更新”功能未找到此版本，但您可以直接从扩展的 AMO 页面下载（单击“查看其他版本”链接）。

希望这可以帮助！

（彼得）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:39:00.713

听起来像是用户错误，而不是错误。

左窗格可让您选择配置文件的哪个部分。它可以在您选择或取消选择时折叠或增长；听起来你取消了选择。

顺便说一句，我认为这个问题属于[超级用户。](https://superuser.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T00:48:42.180

我遇到了同样的问题（从 TB 17 更新到 24.0.1 之后）。它在更新“压缩标题”和“额外文件夹列”附加组件后解决。

# c#-4.0 - VS2012中的CR使用C#.net桌面应用程序

> ID：15951582
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:35:32.937
> 
> 标签：c#-4.0

在 VS2012 中使用 SAP CR 时，在选择水晶报表查看器的数据源时出现问题，并且错误消息是“添加强类型报表文档时发生错误。报表可能已损坏或无效。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:39:44.103

尝试使用 ReportDocument.Load 方法加载报表。这将允许您在不将它们添加到项目的情况下使用报告，并且还允许您在运行时查看完整的错误

# java - MapReduce 作业中的多个键

> ID：15951583
> 
> 赞同：1
> 
> 时间：2013-04-11T14:35:37.047
> 
> 标签：java, hadoop, mapreduce

我是hadoop新手。我正在尝试运行 MapReduce（Java 编程），其中键是多个键（文本）。我应该使用哪种类型的数组来存储这些键以将它们作为参数传递给 outputCollector？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:45:02.117

您应该编写自己的类，`implements WritableComparable<YourClassName>`将键一起存储在一个简洁的对象中。请参阅[此链接](http://my.safaribooksonline.com/book/databases/hadoop/9780596521974/serialization/id3548156)以获取一个很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:29:40.880

如果它只是一些文本值，我建议将它们作为分隔字符串发送。它既方便又直接。否则，您可以按照 Quetzalcoatl 的建议进行操作。您可能会发现这两个问题很有用： [如何在 Hadoop MapReduce 中将对象设置为 Map 输出的值？](https://stackoverflow.com/questions/13877077/how-do-i-set-an-object-as-the-value-for-map-output-in-hadoop-mapreduce/13877688#13877688) [如何（在 Hadoop 中）将数据放入正确类型的 map 和 reduce 函数中？](https://stackoverflow.com/questions/10961474/how-in-hadoop-is-the-data-put-into-map-and-reduce-functions-in-correct-types/10965026#10965026)

# javascript - 使用 jQuery NestedSortable 插件列出嵌套列表的数量

> ID：15951589
> 
> 赞同：1
> 
> 时间：2013-04-11T14:35:48.283
> 
> 标签：javascript, jquery, jquery-plugins, nested-sortable

## 问题/问题

我在获取列表编号（*sortIndex*）时遇到问题。在“示例列表”中获得 sortIndex 之后，我想将 sortIndex 提供给 toArray 函数。所以当这个函数确实创建了一个数组时，会有一个 sortIndex init。请参阅“数组示例”

使用的 jQuery 插件： [mjsarfatti jQuery nestedSortable](https://github.com/mjsarfatti/nestedSortable)

## 示例列表

**html中的列表：**

```
 <ol class="sortable ui-sortable">
    <li id="category_1"><div>Car</div>
       <ol>
           <li id="category_2"><div>Color</div>
                <ol>
                    <li id="category_3"><div>Red</div></li>
                    <li id="category_4"><div>Black</div></li>
                </ol>
           </li>
       </ol>
    </li>
    <li id="category_5"><div>Motor</div></li>
    <li id="category_6"><div>Truck</div></li>
    </ol> 
```

列表示例，为您提供上述列表的视图。

```
[sortIndex] [Name]
1\. Car
    1\. Color
       1\. Red
       2\. Black
2\. Motor
3\. Truck 
```

## 数组示例

使用 nestedSortable toArray，最好将 sortIndex 添加到 array()，如下所示：

```
["storage":"ArrayObject":private]=>
  array(1) {
    ["newList"]=>
    array(7) {
      [0]=> //This is the OL
      array(5) {
        ["item_id"]=>
        string(0) ""
        ["parent_id"]=>
        string(4) "none"
        ["depth"]=>
        string(1) "0"
        ["left"]=>
        string(1) "1"
        ["right"]=>
        string(2) "38"
      }
      [1]=> // Car
      array(6) {
        ["item_id"]=>
        string(1) "1"
        ["parent_id"]=>
        string(0) ""
        ["sort_index"]=>
        string(1) "1"
        ["depth"]=>
        string(1) "1"
        ["left"]=>
        string(1) "2"
        ["right"]=>
        string(1) "9"
      }
      [2]=> // Color
      array(6) {
        ["item_id"]=>
        string(1) "2"
        ["parent_id"]=>
        string(1) "1"
        ["sort_index"]=>
        string(1) "1"
        ["depth"]=>
        string(1) "2"
        ["left"]=>
        string(1) "3"
        ["right"]=>
        string(1) "8"
      }
      [3]=> // Red
      array(6) {
        ["item_id"]=>
        string(1) "3"
        ["parent_id"]=>
        string(1) "2"
        ["sort_index"]=>
        string(1) "1"
        ["depth"]=>
        string(1) "3"
        ["left"]=>
        string(1) "4"
        ["right"]=>
        string(1) "5"
      }
      [4]=> // Black
      array(6) {
        ["item_id"]=>
        string(1) "4"
        ["parent_id"]=>
        string(1) "2"
        ["sort_index"]=>
        string(1) "2"
        ["depth"]=>
        string(1) "3"
        ["left"]=>
        string(1) "6"
        ["right"]=>
        string(1) "7"
      }
      [5]=> // Motor
      array(6) {
        ["item_id"]=>
        string(2) "5"
        ["parent_id"]=>
        string(0) ""
        ["sort_index"]=>
        string(1) "1"
        ["depth"]=>
        string(1) "1"
        ["left"]=>
        string(2) "10"
        ["right"]=>
        string(2) "11"
      }
      [6]=> // Truck
      array(6) {
        ["item_id"]=>
        string(2) "6"
        ["parent_id"]=>
        string(0) ""
        ["sort_index"]=>
        string(1) "1"
        ["depth"]=>
        string(1) "1"
        ["left"]=>
        string(2) "10"
        ["right"]=>
        string(2) "11"
      }
   }
} 
```

## 嵌套排序插件的 toArray 函数

这是 NestedSortable 插件的 toArray 函数。我确实插入了

> “排序索引”：，

在

> ret.push()

toArray 函数：

```
toArray: function(options) {

            var o = $.extend({}, this.options, options),
                sDepth = o.startDepthCount || 0,
                ret = [],
                left = 2;

            ret.push({
                "item_id": o.rootID,
                "parent_id": 'none',
                "depth": sDepth,
                "left": '1',
                "right": ($(o.items, this.element).length + 1) * 2
            });

            $(this.element).children(o.items).each(function () {
                left = _recursiveArray(this, sDepth + 1, left);
            });

            ret = ret.sort(function(a,b){ return (a.left - b.left); });

            return ret;

            function _recursiveArray(item, depth, left) {

                var right = left + 1,
                    id,
                    pid;

                if ($(item).children(o.listType).children(o.items).length > 0) {
                    depth ++;
                    $(item).children(o.listType).children(o.items).each(function () {
                        right = _recursiveArray($(this), depth, right);
                    });
                    depth --;
                }

                id = ($(item).attr(o.attribute || 'id')).match(o.expression || (/(.+)[-=_](.+)/));

                if (depth === sDepth + 1) {
                    pid = o.rootID;
                } else {
                    var parentItem = ($(item).parent(o.listType)
                                             .parent(o.items)
                                             .attr(o.attribute || 'id'))
                                             .match(o.expression || (/(.+)[-=_](.+)/));
                    pid = parentItem[2];
                }

                if (id) {
                        ret.push({"item_id": id[2], "parent_id": pid, "sort_index": , "depth": depth, "left": left, "right": right});
                }

                left = right + 1;
                return left;
            }

        }, 
```

就像我说的那样，给 toArray 函数提供一个 sort_Index 会很好，但我已经找了好几天了，我对如何解决这个问题一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:50:41.430

## 问题解决了

*通过编辑 jQuery 插件。*

将此行添加到 _recursiveArray(item, depth, left) 函数：

```
si = ($(item).index(o.item)); 
```

定义变量 si：

```
var right = left + 1,
    id,
    pid,
    si; 
```

并在 ret.push 中添加您的变量，如下所示：

```
ret.push({"item_id": id[2], "parent_id": pid, "sort_index": si+1, "depth": depth, "left": left, "right": right}); 
```

所以它看起来像这样：

```
toArray: function(options) {

    var o = $.extend({}, this.options, options),
        sDepth = o.startDepthCount || 0,
        ret = [],
        left = 2;

    ret.push({
        "item_id": o.rootID,
        "parent_id": 'none',
        "sort_index" : this.element.index(this.element),
        "depth": sDepth,
        "left": '1',
        "right": ($(o.items, this.element).length + 1) * 2
    });

    $(this.element).children(o.items).each(function () {
        left = _recursiveArray(this, sDepth + 1, left);
    });

    ret = ret.sort(function(a,b){ return (a.left - b.left); });

    return ret;

    function _recursiveArray(item, depth, left) {

        var right = left + 1,
            id,
            pid,
            si;

        if ($(item).children(o.listType).children(o.items).length > 0) {
            depth ++;
            $(item).children(o.listType).children(o.items).each(function () {
                right = _recursiveArray($(this), depth, right);
            });
            depth --;
        }

        id = ($(item).attr(o.attribute || 'id')).match(o.expression || (/(.+)[-=_](.+)/));

        if (depth === sDepth + 1) {
            pid = o.rootID;
        } else {
            var parentItem = ($(item).parent(o.listType)
                                     .parent(o.items)
                                     .attr(o.attribute || 'id'))
                                     .match(o.expression || (/(.+)[-=_](.+)/));
            pid = parentItem[2];
        }

        si = ($(item).index(o.item));

        if (id) {
                ret.push({"item_id": id[2], "parent_id": pid, "sort_index": si+1, "depth": depth, "left": left, "right": right});
        }

        left = right + 1;
        return left;
    }

}, 
```

# c# - 在 asp.net 中使用 ajax 下拉列表事件更新下拉列表

> ID：15951590
> 
> 赞同：0
> 
> 时间：2013-04-11T14:35:49.997
> 
> 标签：c#, asp.net, ajax, asp.net-ajax, asp.net-3.5

在 aspx 页面上，我有两个下拉控件：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:DropDownList ID="DropDownList3" runat="server" DataSourceID="dsClients" DataTextField="Client_Name"
        DataValueField="Client_Name" AutoPostBack="True" OnSelectedIndexChanged="DropDownList3_SelectedIndexChanged" ondatabound="DropDownList3_DataBound">
    </asp:DropDownList>
    <asp:DropDownList ID="ddQualIDInsert" runat="server" DataSourceID="dsQual" DataTextField="Project_Name"
        DataValueField="Qual_ID">
    </asp:DropDownList>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="DropDownList3" EventName="SelectedIndexChanged" />
</Triggers>
</asp:UpdatePanel> 
```

在文件后面的代码中，我有代码根据第一个下拉菜单中的选定值更新和重建第二个下拉选项：

```
protected void DropDownList3_SelectedIndexChanged(object sender, EventArgs e)
{
   dsQual.Where = "Client_Name = \"" + ((DropDownList)sender).SelectedValue +"\"";
} 
```

有时会填充下拉菜单，但大多会引发错误：状态信息对此页面无效并且可能已损坏。

# python-3.x - Python & Beautiful Soup - 搜索结果字符串

> ID：15951591
> 
> 赞同：0
> 
> 时间：2013-04-11T14:35:51.167
> 
> 标签：python-3.x, beautifulsoup

我正在使用 Beautiful Soup 来解析 HTML 表。

*   Python 3.2 版
*   靓汤4.1.3版

尝试使用 findAll 方法查找行中的列时遇到问题。我收到一个错误，说列表对象没有属性 findAll。我通过堆栈交换的另一篇文章找到了这种方法，这不是问题。（[BeautifulSoup HTML 表格解析](https://stackoverflow.com/questions/2059328/beautifulsoup-html-table-parsing)）

我意识到 findAll 是 BeautifulSoup 的一种方法，而不是 python 列表。奇怪的是 findAll 方法在我在表列表中找到行时起作用（我只需要页面上的第二个表），但是当我尝试在行列表中查找列时。

这是我的代码：

```
from urllib.request import URLopener
from bs4 import BeautifulSoup

opener = URLopener() #Open the URL Connection
page = opener.open("http://www.labormarketinfo.edd.ca.gov/majorer/countymajorer.asp?CountyCode=000001") #Open the page
soup = BeautifulSoup(page)

table = soup.findAll('table')[1] #Get the 2nd table (index 1)
rows = table.findAll('tr') #findAll works here
cols = rows.findAll('td') #findAll fails here
print(cols) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:41:23.273

`findAll()`返回一个*结果列表*，您需要遍历这些或选择*一个*`findAll()`以使用它自己的方法到达另一个包含的元素：

```
table = soup.findAll('table')[1]
rows = table.findAll('tr')
for row in rows:
    cols = rows.findAll('td')
    print(cols) 
```

或选择*一行*：

```
table = soup.findAll('table')[1]
rows = table.findAll('tr')
cols = rows[0].findAll('td')  # columns of the *first* row.
print(cols) 
```

请注意，`findAll`已弃用，您应该`find_all()`改用。

# android - 在Android中解除警报后调用onResume方法？

> ID：15951593
> 
> 赞同：10
> 
> 时间：2013-04-11T14:35:52.920
> 
> 标签：android, android-alertdialog, onresume

我想知道当用户在警报对话框上按下“是”并且此对话框被关闭时，该事件是否执行用户所在活动的 onResume 方法。

因为我有一个“清理”按钮，询问用户他是否真的确定清理表单（活动）的所有字段，以便用空字段重绘活动。表单是动态创建的，所以我不不知道 GUI 中的元素将它们设置为空...

对不起，我的英语不好！！

谢谢和问候！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T14:50:38.883

不确定这是否是应该采取的方法，但你应该能够做我认为你要求的事情。如果出于某种原因，这是您想要实现的目标。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Do you want to clean?")
      .setPositiveButton("Yes", new DialogInterface.OnClickListener()
      {
        public void onClick(DialogInterface dialog, int id)
        {
          dialog.dismiss();
          ((ActivityName) appContext).onResume();
        }
      })
      .setNegativeButton("No", new DialogInterface.OnClickListener()
      {
        public void onClick(DialogInterface dialog, int id)
        {
          dialog.dismiss();
        }
      });
    builder.create().show();
} 
```

你真的会想要调用你的 clean 函数，**而不是**像生命周期调用那样的成功，而对失败什么都不做。

解决此问题的另一种潜在方法是使用标志将当前活动带回前面。

```
Intent intent = new Intent(this, CurrentlyRunningActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

正如所指出的那样，这也将提供一种无需直接引用 onResume() 调用即可调用主要活动的方法；但是，我确实想直接回答被问到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:45:35.817

要查看是否调用了某个方法，您可以在该方法处放置一个断点`onResume()`，以查看会发生什么。如果您不熟悉 Acitvity 生命周期，那么这样做将帮助您熟悉它并阅读提供的文档。

现在，我认为您不应该`layout`仅仅为了清除一些`Views`. 在我看来，`setText()`当用户单击“确定”或其他任何内容时，通过使用或其他方法重置所有字段会更有效。如果需要重绘某些内容，可以使用[invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)`Views`

我也推荐观看

[Google I/O-Turbo 为您的 UI 充电](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)

[Activity LifeCycle](http://developer.android.com/reference/android/app/Activity.html) <--理解很重要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:38:18.123

AFAIK 这是不可能的，因为为了显示对话框，活动已经通过了 onResume 状态。查看以下页面，了解有关 Android 应用程序生命周期的更多信息（它确实帮助我更好地理解）：

[应用生命周期](http://www.herongyang.com/Android/Activity-onCreate-and-Callback-Methods.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:42:15.470

如果不确定何时调用 onResume，请在 onResume 方法中添加日志。

# java - 匿名用户的 Tomcat/spring 会话管理

> ID：15951594
> 
> 赞同：7
> 
> 时间：2013-04-11T14:35:53.387
> 
> 标签：java, spring, session, tomcat, spring-security

我有下一个用例：

我们有网上商店，用户可以在其中选择一些商品然后购买。他可以在登录应用程序之前将商品添加到他的购物车。所有这些项目都必须存储在他的会话中。当用户单击“支付”按钮时，我们将询问他的凭据/卡/等。

我的问题：当我在将商品添加到购物车之前登录时，一切正常。但是，当我尝试以匿名用户身份将商品添加到购物车时，商品并未存储。以匿名用户身份刷新每个页面后，我总是收到不同的 JSESSIONID。

我决定创建一个简单的应用程序来说明我的问题。我认为没有我的消息来源就无法修复。

这是我的应用程序：

[https://github.com/AlexTestAccount/simple_test](https://github.com/AlexTestAccount/simple_test)

这很简单。它只包含一个控制器和会话 bean，我尝试在其中保存一些东西。

要运行它，您需要 gradle、tomcat 并定义环境变量 CATALINA_HOME，而不是您可以使用：

梯度部署

ps对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:50:39.407

启用调试日志级别`org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy`

登录时必须有log语句：

```
>Invalidating session with Id '<originalSessionId>' <and : without> migrating attributes 
```

如果它打印“没有迁移属性”，那么您需要将弹簧安全配置`SessionFixationProtectionStrategy.migrateSessionAttributes`为`true`（但这应该是默认设置）

另一个问题可能是，当您从 http 切换到 https 时，tomcat 会更改会话。要验证这是问题所在：首先切换到 https（未登录）并将商品放入您的购物车，然后检查它们是否消失。但是当从 http 切换到 https 时，tomcat 通常应该保留会话内容（但不是相反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:17:32.447

对不起，是环境问题。我只是清理了本地主机的所有 cookie，现在一切正常。

# linux - 与 MSVC++ 的选项 /d1reportSingleClassLayout 等效的 Linux 是什么？

> ID：15951597
> 
> 赞同：7
> 
> 时间：2013-04-11T14:02:43.427
> 
> 标签：linux, c++

我正在将开发转移到 Linux，但我找不到如何在 g++ 或 clang++ 下从 MSVC++ 获得类似于 /d1reportSingleClassLayout 的输出。如果这些编译器没有这样的功能，是否有提供类似可视化的外部工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T16:15:53.040

您需要使用调试信息（`-g`选项）编译文件，然后用于`pahole`显示结构布局。 `pahole`通常可从`dwarves`包中获得（[源](http://git.kernel.org/cgit/devel/pahole/pahole.git/)；[在 GitHub 上](https://github.com/acmel/dwarves)；[在 Ubuntu 中](https://launchpad.net/ubuntu/precise/+package/dwarves)）。

```
$ g++ -ggdb -c -o myfile.o myfile.cpp
$ pahole -C MyClass myfile.o
class MyClass {
public:

    int ()(void) * *           _vptr.MyClass;        /*     0     4 */
    int                        i;                    /*     4     4 */
    const char  *              c;                    /*     8     4 */
    void MyClass(class MyClass *, const class MyClass  &);

    void MyClass(class MyClass *);

    virtual void ~MyClass(class MyClass *, int);

    /* size: 12, cachelines: 1, members: 3 */
    /* last cacheline: 12 bytes */
}; 
```

该`-C`选项允许您选择要检查的类/结构。

如果您无权访问，则可以从或`pahole`以可读性差得多的形式获得相同的信息。论文[https://www.kernel.org/doc/ols/2007/ols2007v2-pages-35-44.pdf](https://www.kernel.org/doc/ols/2007/ols2007v2-pages-35-44.pdf)与其他工具一起描述。`readelf -wi myfile.o``eu-readelf -winfo myfile.o``pahole``dwarves`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-29T16:35:29.773

您也可以[使用 Clang 前端](http://eli.thegreenplace.net/2012/12/17/dumping-a-c-objects-memory-layout-with-clang/)来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T09:31:06.847

`-fdump-class-hierarchy`g++支持怎么样？

*   [是否有任何 g++ 选项可以转储类布局和 vtables？](https://stackoverflow.com/questions/2549618/is-there-any-g-option-to-dump-class-layout-and-vtables)

# formbuilder - CMSMS FormBuilder 的表单在文件太大时简单地重新加载而不会出错

> ID：15951599
> 
> 赞同：0
> 
> 时间：2013-04-11T14:36:12.607
> 
> 标签：formbuilder, cmsmadesimple

将 CMSMS 1.6.6 与 FormBuilder 插件 0.6.1 一起使用

我有一个大小限制为 5000KB 的文件上传字段和一些扩展名：JPG、GIF、PNG。

**BUG：**当我尝试发送带有大文件（如 10MB FLV）作为附件的完整表单时，我绝对没有收到任何错误消息，并且表单只是重新加载（不是 .thank you" 模板）。

但是，如果我尝试上传错误的文件扩展名，但在大小限制范围内（如 FLV 2MB），则会收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T08:44:01.433

您正在使用 CMS Made Simple 的旧版本（1.6.6\. 来自 2009 年），Formbuilder 版本也是如此。

我强烈建议您备份当前安装，然后升级到最新版本的 CMS Made Simple，目前是 1.11.6。请注意它需要 PHP 5.3 并且 GCB 名称受到限制。请阅读发行说明。

如果升级后问题仍然存在，您可以提交错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T12:36:47.263

事实上，这个错误甚至不是 CMSMS 也不是 FormBuilder——它是一个 MaxUpload 问题。

我通过在 CMS 文件夹中放置一个 php.ini 文件（允许托管）来解决它，其中包含以下几行：

upload_max_filesize = "250M" post_max_size = "250M"

# c - 简单的 UDP 服务器不能接受数据包

> ID：15951600
> 
> 赞同：1
> 
> 时间：2013-04-11T14:36:15.563
> 
> 标签：c, linux, networking, network-programming

我有一个简单的 UDP 服务器程序

```
 #include <sys/socket.h>
    #include <netinet/in.h>
    #include <stdio.h>
    #include <string.h>

    int main(int argc, char**argv)
    {
       int sockfd,n;
       struct sockaddr_in servaddr,cliaddr;
       socklen_t len;
       char mesg[1000];

       sockfd=socket(AF_INET,SOCK_DGRAM,0);

       bzero(&servaddr,sizeof(servaddr));
       servaddr.sin_family = AF_INET;
       servaddr.sin_addr.s_addr=htonl(INADDR_ANY);
       servaddr.sin_port=htons(54000);
       bind(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr));

       for (;;)
       {
          len = sizeof(cliaddr);
          n = recvfrom(sockfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&len);
          sendto(sockfd,mesg,n,0,(struct sockaddr *)&cliaddr,sizeof(cliaddr));
          printf("-------------------------------------------------------\n");
          mesg[n] = 0;
          printf("Received the following:\n");
          printf("%s",mesg);
          printf("-------------------------------------------------------\n");
       }
    }
    ~ 
```

我编译它

```
 gcc -m32 -o udp_server udp_server.c 
```

并在几台 linux 机器上运行它（`./udp_server`），它工作正常，我使用 udp 客户端客户端将数据包发送到这些机器上的 UDP 服务器，它们被接受

但是我有一台新机器（姑且称它为A），相对于其他linux机器来说比较奇怪，如图 [https://superuser.com/questions/581442/ifconfig-command-not-found](https://superuser.com/questions/581442/ifconfig-command-not-found) 反正它没有“eth0”和接口是：

```
 [root@kitch proxy]# ip link show
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: em1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
    link/ether 00:1a:a0:23:86:6c brd ff:ff:ff:ff:ff:ff 
```

首先，我在上面运行程序的 32 位版本，我得到了

```
-bash: ./udp_server: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
```

然后，其次，我编译没有'-m32'的UDP程序并在机器A上运行它，它运行正常然后我使用UDP客户端向A上的UDP服务器发送数据包我可以在这台机器上捕获发送的数据包，但是UDP 服务器不接受这些数据包，

这有什么潜在的原因吗？也许绑定在这里不起作用，因为这台机器很特殊？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:48:42.900

一些最近的 Linux 发行版（例如 Fedora）已将接口名称从 更改`ethX`为`emX`，因此，它没有任何问题。

你遇到了那台机器的问题，因为服务器根本没有运行，正如这条线所声称的：

```
-bash: ./udp_server: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
```

我猜您已经在未安装的机器上以某种`32bit`模式（查看`-m32` `gcc`参数）编译程序。`64bit``32bit library support`

`-m32`不带选项重新编译它。

# c# - 在 WPF 中绑定高度和宽度时如何减少绑定异常的数量？

> ID：15951602
> 
> 赞同：2
> 
> 时间：2013-04-11T14:36:19.843
> 
> 标签：c#, wpf, mvvm, binding, double

我想将项目的宽度和高度绑定到模型。

某些项目的宽度和高度是指定的，但大多数应设置为“自动”模式。

所以我创建了具有属性的模型：

```
 public double? Height
    {
        get
        {
            return this.height;
        }

        set
        {
            this.height = value;
            this.OnPropertyChanged("Height");
        }
    } 
```

我将它绑定到我的视图。

如果**height == null**我的控件大小设置为自动，这没关系。但我有例外：

```
 System.Windows.Data Error: 5 : Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=Height;
target property is 'Height' (type 'Double') 
```

如何强制我的控件将高度设置为“自动”并避免生成异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:44:23.713

我相信这是该`TargetNullValue`属性在绑定 expersions 中的用途：

```
Height="{Binding Height, TargetNullValue=auto}" 
```

这应该可以满足您的需要。您还可以编辑您的 get 方法来处理 null 事件，但您可能必须将数据类型更改为 object 才能返回`auto`：

```
public object Height
{
    get
    {
        if (this.height == null) return "auto";
        return this.height;
    }
    set
    {
        this.height = value;
        this.OnPropertyChanged("Height");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:41:19.350

您可以绑定到您的 Height 属性并使用 ValueConverter。实现接口 IValueConverter 并将其添加到您的绑定中。这样，当存在无效值时，您可以返回“自动”。

这应该在您的 xaml 中

```
<res:HeightConverter x:key=HeightConverter/>

<label height="{Binding MyHeight, ValueConverter={StaticResource HeightConverter}"/> 
```

这在你的转换器中

```
Public Class HeightConverter : IValueConverter ......

if(value = Nothing){Return "auto"} 
```

只是我脑海中的一些代码，所以不要介意任何语法问题，但基本上就是这样

您也可以使用它来修改和覆盖一些多余的值。提供了很大的灵活性

# sql - 使用动态 WHERE 子句的慢查询

> ID：15951604
> 
> 赞同：2
> 
> 时间：2013-04-11T14:36:22.020
> 
> 标签：sql, sql-server, sql-server-2008

我知道下面的查询不是最好的，但现在它必须完成这项工作：

```
FROM dbo.CE_Summons_ext0 s with (nolock)
     INNER JOIN dbo.CE_Fines_ext0 f with (nolock)
       ON (f.ref_no = s.ref_no AND f.doc_type = s.doc_type)
     INNER JOIN dbo.CE_charge_status c with (nolock)
       ON f.status = c.status_no
     INNER JOIN dbo.CE_COURT_DESC crt_desc with (nolock)
       ON crt_desc.COURT = s.COURT
     INNER JOIN dbo.CE_CntParms_ext0 param with (nolock)
       ON param.REF_NO = s.ref_no
     INNER JOIN dbo.CE_Court_result crt_result with (nolock)
       ON crt_result.COURT_RESULT = param.COURT_RESULT
  WHERE   s.SUMMONS_NO = isnull(nullif(@sms_summons_no, ''), s.SUMMONS_NO)
      AND s.ref_no = isnull(nullif(@scp_ref_no,''), s.ref_no)
      AND s.COURT =  isnull(nullif(@sms_court,'') , s.COURT)
      -- AND f.STREET1 = isnull(nullif(@street1,''), f.STREET1) 
      -- AND f.acc_name = isnull(nullif(@offender_name,''), f.acc_name)
      -- AND f.id_no = isnull(nullif(@offender_id,''), f.id_no)
      -- AND f.acc_name = isnull(nullif(@owner_name,''), f.acc_name)
      -- AND f.id_no = isnull(nullif(@owner_id,''), f.id_no)
  END 
```

`WHERE`如果我取消注释最后一个条件，它的运行速度非常慢。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:50:04.343

这看起来好像您正在根据参数的值确定 where 子句。就性能而言，最有效的方法通常是使用动态 SQL 动态构建查询，这样您就不必在 where 子句中使用函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:50:47.620

当您执行查询时（在这两种情况下），请转到 SSMS 中的查询菜单并选择包括实际执行计划。这将告诉您查询中速度较慢的特定部分以及原因。

我意识到这不是您问题的直接答案，但它是一种非常有用的方法，您可以通过它研究和解决自己的问题以及学习如何更好地诊断慢查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:45:27.923

尝试用这个替换：

```
(@Street1 IS NULL OR @Street1 = '' OR f.STREET1 = @Street1) 
```

# php - 如何避免使用此脚本重复产品（Magento）

> ID：15951612
> 
> 赞同：1
> 
> 时间：2013-04-11T14:36:49.300
> 
> 标签：php, magento, zend-framework

我正在开发一个页面，显示所有具有特价的产品。

如果我有一个“正常”的设置，这会很容易，但我的商店只显示分组产品。所有简单产品都只是与分组产品相关联的 SKU。分组产品包含描述、产品名称等所有一般信息，简单产品包含 SKU、价格、增值税等信息。

考虑到这一点，我想我会拉出所有有特价的简单产品并加载它们的“父”分组产品。

这可行，但出现了一个新问题：分组产品与多个特价 SKU 相关联。这意味着，该产品将在页面上显示两次、三次甚至更多。考虑到我的代码，这是有道理的：

```
<?php $storeId = Mage::app()->getStore()->getStoreId(); ?>

<?php
$todayDate = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);
$special= Mage::getResourceModel('reports/product_collection')
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('visibility', array('neq'=>1))
    ->addAttributeToFilter('special_price', array('neq'=>''))
    ->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
    ->addAttributeToFilter('special_to_date', array('or'=> array(
    0 => array('date' => true, 'from' => $todayDate),
    1 => array('is' => new Zend_Db_Expr('null')))
), 'left')
    ->addAttributeToSort('special_from_date', 'desc');
$special->load();
?>

<div class="cat-misc">
    <?php $_columnCount = 4;?>

    <?php foreach ($special as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
    <?php endif ?>

        <?php $parentIds = Mage::getModel('catalog/product_type_grouped')->getParentIdsByChild($_product->getId()); ?>
        <?php if(isset($parentIds[0])):?>
            <?php foreach ($parentIds as $parentId): ?>
                <?php $parent = Mage::getModel('catalog/product')->load($parentId); ?>
                <?php if ($parent->getStoreId() == $storeId): ?>
                    <?php $_product = Mage::getModel('catalog/product')->load($parentId);?>
                    <?php endif; ?>
                <?php endforeach; ?>
        <?php endif; ?>

    <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">

        <div class="produtos_wrapper">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(158, 158); ?>" width="158" height="158" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" /></a>

            <?php
            $newFromDate = Mage::getModel('catalog/product')->load($_product->getID())->getNewsFromDate();
            $newToDate = Mage::getModel('catalog/product')->load($_product->getID())->getNewsToDate();

            $now = date("Y-m-d H:m:s");

            if($newFromDate < $now && $newToDate > $now) {
                echo "<div id='simbolo_novo' class='simbolo_novo'></div>";
            }
            ?>

            <div class="titulos_wrapper">
                <p class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->htmlEscape($_product->getName()) ?></a><br /><span class="subtitulo"><?php echo nl2br($_product->getShortDescription()); ?></span> </p>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
            </div>
        </div>

        <div class="actions">
            <?php if($_product->isSaleable()): ?>

            <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
            <?php endif; ?>

            <?php if ($this->helper('wishlist')->isAllow()) : ?>

            <?php endif; ?>
            <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>

            <?php endif; ?>
            </ul-->
        </div>
    </li>
    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
        <?php endif ?>

    <?php endforeach; ?>

    <div class="toolbar-bottom">
        <?php echo $this->getToolbarHtml() ?>
    </div>
</div> 
```

我的问题是，我如何限制这个脚本只显示一次分组产品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:40:15.957

你可以这样做：

```
$shown_skus = array() ; //Create an array to trace already displayed products

foreach($products as $product){
  if (!in_array($product['sku'], $shown_skus, true)){ //If there is no sku in array
    $shown_skus[] = $product['sku'] ; //Add the sku to the array
    //And display the product as it has not been displayed yet.
  }
} 
```

如果该解决方案适合您，请报告。

# c++ - excel xll：函数内部调用函数的名称

> ID：15951614
> 
> 赞同：2
> 
> 时间：2013-04-11T14:36:57.093
> 
> 标签：c++, visual-studio-2010, excel, dll, xll

我有使用 microsoft excel sdk 的 c++ xll 程序。是否有任何 excel4v() 或 excel12v() 函数可以告诉我调用它的 excel 用户定义函数的名称。

例如说我有两个 excel 用户定义函数 my_func1() 和 my_func2()。假设我有另一个函数 func()，它由 my_func1() 和 my_func2() 调用。在 func() 中，我想放置这个 excel4v/excel12v 函数来确定哪个用户定义的函数（my_func1() 或 my_func2()）正在调用 func()。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:17:53.060

为什么不给 func 添加一个参数并让 my_func1 和 my_func2 告诉 func 他们是谁？为什么要把 Excel4 拖进去呢？

# c# - grid1 中的选定项目显示其在 grid2 中的 tablee2 中的相关项目

> ID：15951618
> 
> 赞同：0
> 
> 时间：2013-04-11T14:37:09.383
> 
> 标签：c#, datagridview, ado.net

我正在努力实现以下目标：

I have my first grid which shows the entries from my db `table foo`, when selecting one, I need to recover from column[0] cell[0], an id which I'll use for a query afterwards. 此查询将使用来自 的所有一对多实例填充 grid2 `table bar`。但我得到一个空点异常，我不知道为什么......

```
private void button1_Click_1(object sender, EventArgs e)
        {
            SqlConnection sc = new SqlConnection(@"Data Source = WARZARU-NB\SQLEXPRESS; Database = proj_1; Integrated Security = True");

            dataSet.Clear();

            dataAdapter.SelectCommand = new SqlCommand("select * from students WHERE id=@index", sc);
      // EXCEPTION here
            dataAdapter.InsertCommand.Parameters.Add("@index", SqlDbType.Int).Value = dgParent.CurrentCell.Value; 
            dataAdapter.Fill(dataSet, "grades");

            dgChild.DataSource = dataSet.Tables["grades"];

            dgParent.AutoResizeColumns();
            dgParent.AutoResizeRows();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:15:22.540

仍然不是正确的方法，但它有效......

```
 private void dgParent_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            SqlConnection sc = new SqlConnection(@"Data Source = WARZARU-NB\SQLEXPRESS; Database = proj_1; Integrated Security = True");
        if (dgParent.SelectedCells.Count > 0)
        {
            dgChild.DataSource = null;
            int selectedrowindex = dgParent.SelectedCells[0].RowIndex;
            DataGridViewRow selectedRow = dgParent.Rows[selectedrowindex];
            string a = Convert.ToString(selectedRow.Cells["id"].Value);
            MessageBox.Show(a);

            SqlCommand updateCommand1 = new SqlCommand("Select * FROM tableChild WHERE studentID = @id", sc);
            updateCommand1.Parameters.Add(new SqlParameter("id", a));
            dataAdapter = new SqlDataAdapter(updateCommand1);

            dataSetChild.Clear();
            dataAdapter.Fill(dataSetChild, tableChild);
            dgChild.DataSource = dataSetChild.Tables[tableChild];
        }

        dgParent.AutoResizeColumns();
        dgParent.AutoResizeRows();
    } 
```

# javascript - JavaScript - 检测 NodeLIst 中被点击的元素的索引

> ID：15951619
> 
> 赞同：2
> 
> 时间：2013-04-11T14:37:15.503
> 
> 标签：javascript, function, unique

我通过以下方式获取具有共享 className 的 HTML 元素来创建 NodeList：

```
> var btn = document.getElementsbyClassName("btn") 
```

这是 HTML 代码：

```
 <div id="main">
    <div class="btn">
    </div>
    <div class="btn">
    </div>
    <div class="btn">
    </div>
    <div class="btn">
    </div>   
 </div> 
```

因此，这个特定的 NodeList 对象的长度为 4。

现在我想在单击其中一个元素时调用一个函数。我通过使用 for 循环来实现这一点：

```
for(var i = 0; i < btn.length ; i++) {
  btn[i].onclick = doSomething;
};

function doSomething() {
  // here come some code.
}; 
```

但是如何获得触发 te 事件的 NodeList 的索引？以及如何为数组的每个元素分配唯一名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:57:19.247

这是我要做的：

```
var btn = document.getElementById('main').getElementsByTagName('div');
for(var i = 0; i < btn.length ; i++) {
    btn[i].id = "btn"+i;
    if(btn[i].className=="btn")
        btn[i].onclick = doSomething;
};

function doSomething() {
    var num = this.id.substr(3);
  alert("Div " + num + " clicked");
}; 
```

（我拿出 getElementsByClassName() 让它跨浏览器。这当然是假设你还没有实现你自己的覆盖来让它跨浏览器的方法）。

**编辑：**对于您的 innerHTML 问题，请查看附加的小提琴以查看它是否正常工作：http: [//jsfiddle.net/TdCD8/](http://jsfiddle.net/TdCD8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:46:44.990

您可以将其包含在函数签名中：

```
for(var i = 0; i < btn.length ; i++) {
  btn[i].onclick = doSomething(i);
};

function doSomething(i) {
    return function() {
        btn[1].innerHTML = i;
    }
}; 
```

# c# - 下载文件并同时读取

> ID：15951621
> 
> 赞同：1
> 
> 时间：2013-04-11T14:37:22.333
> 
> 标签：c#, .net

我用这种方法下载了一个文件：

```
WebClient WC = new WebClient();
WC.DownloadFile(url, filePath); 
```

我希望同时读取文件：

```
var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.None); 
```

但我总是：

```
The process cannot access the file 'filePath' because it is being used by another process. 
```

可以同时下载和阅读吗？

# 编辑

我现在下载文件：

```
var req = (HttpWebRequest)HttpWebRequest.Create(url);
                var fileStream = new FileStream(filePath,
                    FileMode.Create, FileAccess.ReadWrite, FileShare.ReadWrite);

                using (var resp = req.GetResponse())
                {
                    using (var stream = resp.GetResponseStream())
                    {
                        byte[] buffer = new byte[0x10000];
                        int len;
                        while ((len = stream.Read(buffer, 0, buffer.Length)) > 0)
                        {
                            fileStream.Write(buffer, 0, len);
                        }
                    }
                } 
```

仍然得到错误....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:47:32.300

```
var req = (HttpWebRequest)HttpWebRequest.Create(url);
using (var resp = req.GetResponse())
{
    using (var stream = resp.GetResponseStream())
    {
        byte[] buffer = new byte[0x10000];
        int len;
        while ((len = stream.Read(buffer, 0, buffer.Length))>0)
        {
            //Do with the content whatever you want
            // ***YOUR CODE*** 
            fileStream.Write(buffer, 0, len);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:53:15.983

试试这种方式：

```
HttpWebRequest request = (HttpWebRequest) WebRequest.Create("http://www.domain.com/file.txt");
HttpWebResponse response = (HttpWebResponse) request.GetResponse();

var stream = response.GetResponseStream();
byte[] buffer = new byte[8192];
int bytesRead = 0;
while ((bytesRead = stream.Read(buffer, 0, 8192)) > 0)
{
    // handle your raw data
    // you needed raw data = buffer[0 to bytesRead - 1]

}
stream.Close();
response.Close(); 
```

# android - Actionbarsherlock 谷歌地图不显示瓷砖

> ID：15951624
> 
> 赞同：1
> 
> 时间：2013-04-11T14:37:39.647
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

我正在尝试使用静态 actionbarsherlock 获取 Google 地图。我已经完成了，但未加载地图（未加载图块）。我确定我的 Google Map 键是正确的，但我不知道是什么问题。

你能帮助我吗？在 zip 文件中有我的小项目。

[http://www.michelepierri.it/DEMOCHOOSER.zip](http://www.michelepierri.it/DEMOCHOOSER.zip)

这是我的代码：

MapSimple.java

```
package com.actionbarsherlock.sample.maps;

import com.actionbarsherlock.ActionBarSherlock;
import com.actionbarsherlock.app2.SherlockMapActivity;

import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.google.android.maps.MapView;

import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.widget.Toast;

public class MapSimple extends SherlockMapActivity {
    ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //MapView for the lose :(
        Toast.makeText(this, R.string.map_warning, Toast.LENGTH_LONG).show();

        setContentView(R.layout.map_simple);
        MapView mapView = (MapView)findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        mSherlock.setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //Used to put dark icons on light action bar

        menu.add("Save")
            .setIcon( R.drawable.ic_compose)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        menu.add("Search")
            .setIcon( R.drawable.ic_search)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        menu.add("Refresh")
            .setIcon( R.drawable.ic_refresh)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return true;
    }
} 
```

DemoChooser.java

```
 /*
 * Copyright (C) 2011 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.actionbarsherlock.sample.maps;

import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import com.actionbarsherlock.app.SherlockListActivity;

import java.text.Collator;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class DemoChooser extends SherlockListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String path = intent.getStringExtra("com.example.android.apis.Path");

        if (path == null) {
            path = "";
        }

        setListAdapter(new SimpleAdapter(this, getData(path),
                android.R.layout.simple_list_item_1, new String[] { "title" },
                new int[] { android.R.id.text1 }));
        getListView().setTextFilterEnabled(true);
    }

    protected List<Map<String, Object>> getData(String prefix) {
        List<Map<String, Object>> myData = new ArrayList<Map<String, Object>>();

        Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory("com.actionbarsherlock.sample.plugins.MAPS");

        PackageManager pm = getPackageManager();
        List<ResolveInfo> list = pm.queryIntentActivities(mainIntent, 0);

        if (null == list)
            return myData;

        String[] prefixPath;
        String prefixWithSlash = prefix;

        if (prefix.equals("")) {
            prefixPath = null;
        } else {
            prefixPath = prefix.split("/");
            prefixWithSlash = prefix + "/";
        }

        int len = list.size();

        Map<String, Boolean> entries = new HashMap<String, Boolean>();

        for (int i = 0; i < len; i++) {
            ResolveInfo info = list.get(i);
            CharSequence labelSeq = info.loadLabel(pm);
            String label = labelSeq != null
                    ? labelSeq.toString()
                    : info.activityInfo.name;

            if (prefixWithSlash.length() == 0 || label.startsWith(prefixWithSlash)) {

                String[] labelPath = label.split("/");

                String nextLabel = prefixPath == null ? labelPath[0] : labelPath[prefixPath.length];

                if ((prefixPath != null ? prefixPath.length : 0) == labelPath.length - 1) {
                    addItem(myData, nextLabel, activityIntent(
                            info.activityInfo.applicationInfo.packageName,
                            info.activityInfo.name));
                } else {
                    if (entries.get(nextLabel) == null) {
                        addItem(myData, nextLabel, browseIntent(prefix.equals("") ? nextLabel : prefix + "/" + nextLabel));
                        entries.put(nextLabel, true);
                    }
                }
            }
        }

        Collections.sort(myData, sDisplayNameComparator);

        return myData;
    }

    private final static Comparator<Map<String, Object>> sDisplayNameComparator =
        new Comparator<Map<String, Object>>() {
        private final Collator   collator = Collator.getInstance();

        public int compare(Map<String, Object> map1, Map<String, Object> map2) {
            return collator.compare(map1.get("title"), map2.get("title"));
        }
    };

    protected Intent activityIntent(String pkg, String componentName) {
        Intent result = new Intent();
        result.setClassName(pkg, componentName);
        return result;
    }

    protected Intent browseIntent(String path) {
        Intent result = new Intent();
        result.setClass(this, DemoChooser.class);
        result.putExtra("com.example.android.apis.Path", path);
        return result;
    }

    protected void addItem(List<Map<String, Object>> data, String name, Intent intent) {
        Map<String, Object> temp = new HashMap<String, Object>();
        temp.put("title", name);
        temp.put("intent", intent);
        data.add(temp);
    }

    @Override
    @SuppressWarnings("unchecked")
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Map<String, Object> map = (Map<String, Object>)l.getItemAtPosition(position);

        Intent intent = (Intent) map.get("intent");
        startActivity(intent);
    }
} 
```

# php - ZF2 ServiceLocatorAwareInterface getServiceLocator 给了我 Zend\Validator\ValidatorPluginManager

> ID：15951627
> 
> 赞同：3
> 
> 时间：2013-04-11T14:37:46.833
> 
> 标签：php, zend-framework2, validation, service-locator

对于我的 ZF2 表单验证，我需要自定义验证器中的实体管理器。我 Zend\ServiceManager\ServiceLocatorAwareInterface 在我的验证器中获取服务定位器，这样我就可以从那里获取实体管理器。

我的问题是这个 Zend\ServiceManager\ServiceLocatorAwareInterface::setServiceLocator 注入了“Zend\Validator\ValidatorPluginManager”而不是所需的 ServiceLocator。

有谁知道如何解决这个问题？

我的抽象控制器

```
abstract class AbstractController extends AbstractActionController
{    
    /**
     * This property contains the doctrine entitymanager.
     * @var Doctrine\ORM\EntityManager
     */
    protected $_entityManager;

    /**
     * This method returns the doctrine entitymanager.
     * @return \Doctrine\ORM\EntityManager
     */
    public function getEntityManager()
    {
        var_dump(spl_object_hash($this->getServiceLocator())); echo '<br>';
        if (null === $this->_entityManager)
            $this->_entityManager = $this->getServiceLocator()->get('doctrine.entitymanager.orm_default');
        return $this->_entityManager;
    }
} 
```

我的验证器：

```
class EntityUnique extends AbstractValidator implements ServiceLocatorAwareInterface
{
    protected $_serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        var_dump(spl_object_hash($serviceLocator)); echo '<br>';
        $this->_serviceLocator = $serviceLocator;
    }

    function getServiceLocator()
    {
        return $this->_serviceLocator;
    }
} 
```

执行此操作时，两个 var_dumps 都会产生另一个对象哈希：

```
string(32) "000000005e4258390000000024a7f829"
string(32) "000000005e425a2d0000000024a7f829" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:00:49.910

这样做的原因是在您的验证器中，您正在被`Zend\Validator\ValidatorPluginManager`注入。如果您希望`getServiceLocator`在`Zend\Validator\ValidatorPluginManager`.

例如看`someMethod()`下面的方法：

```
class EntityUnique extends AbstractValidator implements ServiceLocatorAwareInterface
{
    protected $_serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        var_dump(spl_object_hash($serviceLocator)); echo '<br>';
        $this->_serviceLocator = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->_serviceLocator;
    }

    public function someMethod() 
    {
        $validatorPluginManager = $this->getServiceLocator();
        $serviceLocator = $validatorPluginManager->getServiceLocator(); // HERE

    }
} 
```

希望这可以帮助 ：）

斯托扬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:55:32.373

我最终让它工作了。我不知道这是否是最佳做法，所以如果您有任何反馈，请不要犹豫。我的验证器最终是这样的：

```
<?php
namespace Flex\Validator;

use Doctrine\ORM\EntityManager;
use Zend\Stdlib\ArrayUtils;
use Zend\ServiceManager\ServiceManager;
use Zend\Validator\AbstractValidator;

class EntityUnique extends AbstractValidator
{
    const EXISTS                = 'exists';

    protected $messageTemplates = array(
        self::EXISTS    => 'A %entity% entity allready exists.',
    );
    protected $messageVariables = array(
        'entity'        => '_entity',
    );

    protected $_context;
    protected $_entity;
    protected $_excludes        = array();
    protected $_filters         = array();
    protected $_property;
    protected $_serviceLocator;

    public function __construct($options = null)
    {
        if ($options instanceof \Traversable)
            $options            = ArrayUtils::iteratorToArray($options);

        if (is_array($options))
        {
            if (isset($options['entity']))
                $this->_entity        = $options['entity'];
            if (isset($options['exclude']))
            {
                if (!is_array($options['exclude']))
                    throw new \Exception('Exclude option should be an array');
                if (isset($options['exclude']['property']) && isset($options['exclude']['value']))
                    $this->_excludes[] = array(
                        'property'    => $options['exclude']['property'],
                        'value'       => $options['exclude']['value'],
                    );
                else
                    foreach ($options['exclude'] as $exclude)
                    {
                        if (!isset($exclude['property']) || !isset($exclude['value']))
                            throw new \Exception('exclude shoud contain a property and value');
                            $this->_excludes[] = array(
                                    'property'    => $exclude['property'],
                                    'value'       => $exclude['value'],
                            );
                    }

            }
            if (isset($options['filter']))
            {
                if (!is_array($options['filter']))
                    throw new \Exception('Filter option should be an array');
                if (isset($options['filter']['property']) && isset($options['filter']['value']))
                    $this->_filters[] = array(
                        'property'    => $options['filter']['property'],
                        'value'       => $options['filter']['value'],
                    );
                else
                    foreach ($options['filter'] as $filter)
                    {
                        if (!isset($filter['property']) || !isset($filter['value']))
                            throw new \Exception('Filters shoud contain a property and value');
                            $this->_filters[] = array(
                                    'property'    => $filter['property'],
                                    'value'       => $filter['value'],
                            );
                    }

            }
            if (isset($options['property']))
                $this->_property          = $options['property']; 
            if (!isset($options['serviceLocator']))
                throw new \InvalidArgumentException(__CLASS__ . ' requires the option serviceLocator.');
            $ServiceManagerInstance   = 'Zend\ServiceManager\ServiceManager';
            if (!($options['serviceLocator'] instanceof $ServiceManagerInstance))
                throw new \InvalidArgumentException(__CLASS__ . ' expects the option serviceLocator to be an instance of Zend\ServiceManager\ServiceManager.');

            $this->_serviceLocator    = $options['serviceLocator']; 
        }
        parent::__construct(is_array($options) ? $options : null);
    }
    public function isValid($value, $context = null)
    {
        $this->setValue($value);
        $this->_context  = $context;

        $entityManager   = $this->_serviceLocator->get('doctrine.entitymanager.orm_default');
        $queryBuilder    = $entityManager->createQueryBuilder();
        $queryBuilder->from($this->_entity, 'e')
            ->select('COUNT(e)')
            ->where('e.' . $this->_property . ' = :value')
            ->setParameter('value', $this->getValue());

        if (count($this->_excludes))
            foreach ($this->_excludes as $key => $exclude)
            {
                $exclude['value']        = $this->parse($exclude['value']);
                if ($exclude['value'] !== null)
                    $queryBuilder->andWhere('e.' . $exclude['property'] . ' = :exclude_' . $key)
                        ->setParameter('exclude_' . $key, $exclude['value']);
                else
                    $queryBuilder->andWhere('e.' . $exclude['property'] . ' IS NULL');
            }

        if (count($this->_filters))
            foreach ($this->_filters as $key => $filter)
            {
                $filter['value']        = $this->parse($filter['value']);
                if ($filter['value'] !== null)
                    $queryBuilder->andWhere('e.' . $filter['property'] . ' = :filter_' . $key)
                        ->setParameter('filter_' . $key, $filter['value']);
                else
                    $queryBuilder->andWhere('e.' . $filter['property'] . ' IS NULL');
            }

        $query = $queryBuilder->getQuery();
        if ((integer) $query->getSingleScalarResult() !== 0)
        {
            $this->error(self::EXISTS);
            return false;
        }
        return true;
    }
    private function parse($input, $current = null)
    {
        if (!is_array($input))
            return $input;
        if ($current === null)
            $current     = $this;

        $currentKey      = array_shift($input);
        if (is_object($current) && property_exists($current, $currentKey))
            $current     = $current->$currentKey;
        elseif (is_array($current) && array_key_exists($currentKey, $current))
            $current     = $current[$currentKey];
        else
            return null;

        if (count($input))
            return $this->parse($input, $current);

        if (strlen($current) == 0)
            return null;

        return $current;
    }
} 
```

这是这样加载的：

```
<?php
namespace FlexCategories\Form;

use Zend\Form\Form;
use Zend\InputFilter\InputFilterProviderInterface;
use Zend\ServiceManager\ServiceManager;
use Zend\ServiceManager\ServiceManagerAwareInterface;

class CategoryForm extends Form implements InputFilterProviderInterface, ServiceManagerAwareInterface
{
    private $_serviceManager;

    public function init()
    {
        /* */
    }
    public function getInputFilterSpecification()
    {
        return array(
            'name'         => array(
                'filters'     => array(
                    array(
                        'name'    => 'Zend\Filter\StringTrim'
                    ),
                ),
                'required'    => true,
                'validators'  => array(
                    array(
                        'name'    => 'Flex\Validator\EntityUnique',
                        'options' => array(
                            'entity'    => 'FlexCategories\Entity\Category',
                            'filter'   => array(
                                array('property'     => 'parent',
                                      'value'        => array('_context', 'parent')),
                            ),
                            'property'  => 'name',
                            'serviceLocator'    => $this->_serviceManager,
                        ),
                    ),
                ),
            ),
        );
    }

    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this->_serviceManager = $serviceManager;
        $this->init();

        return $this;
    }
} 
```

该表单在 service_manager => invokables 中注册，并通过服务管理器在控制器中检索。

这对我有用。我希望有人能够从中学习或给我反馈以创建更好的解决方案。

# ios - 何时设置 XIB 插座属性？

> ID：15951630
> 
> 赞同：4
> 
> 时间：2013-04-11T14:37:55.180
> 
> 标签：ios, ios6, xib

我正在尝试使用 xib 文件实现继承。是的，有点奇怪，但让我告诉你为什么。

我有一个类，SLBaseViewController，我的许多视图控制器都继承自它。当我想要一个子视图控制器时，我以通常的方式创建它：

```
 SLHomeViewController *controller = [[SLHomeViewController  alloc] initWithNibName:@"SLHomeViewController" bundle:nil]; 
```

这工作正常。SLHomeViewController 是一个 SLBaseViewController（它是一个 UIViewController）。

我这样做是因为我有其他想要继承 SLBaseViewController 行为的视图控制器。就我而言，我有一个在我的应用程序中通用的导航 UI 小部件，因此 SLSceneViewControll 也从 SLBaseViewController 继承，并且 SLHomeViewController 和 SLSceneViewController 都获得了自定义导航小部件行为。

自定义导航小部件还具有跨 SLBaseViewControllers 通用的位置信息。所以我实现了一个穷人的方式来做xib继承。

```
@interface SLBaseViewController : UIViewController <SLNavBarViewControllerDelegate>
@property (strong, nonatomic) IBOutlet UIView *navBarExtendedFPO; 
```

并且继承在 initWithNibName 中完成

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        Class callingClass = [self class];
        Class slBaseViewControllerClass = NSClassFromString (SL_BASE_VC_CLASS_NAME);
        if (callingClass !=  slBaseViewControllerClass) {
            SLBaseViewController *controller = [[SLBaseViewController  alloc] initWithNibName:@"SLBaseViewController" bundle:nil];
            // now load all the properties by hand
            self.navBarExtendedFPO = controller.navBarExtendedFPO;
        }
    }
    return self;
} 
```

如果我创建一个 SLHomeViewController 是加载 SLBaseViewController 的 xib，然后从中复制有趣的属性。如果 initWithNibName 检测到它正在加载 SLBaseViewController 它什么也不做，从而防止无限循环。

当然，问题是尚未设置出口属性。所以它只是复制零。

那么这些插座属性是什么时候设置的呢？

或者 - 有没有更好的方法来做我想做的事情？在我手动复制属性之前，这一切似乎都很美好。这对我来说似乎很脆弱。

（注意，我对仅限 iOS6 的解决方案很好。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:16:44.300

这是因为 UIViewController 的延迟初始化。

UIViewController 的视图只有在调用 view 属性后才会被加载。

像那样：

```
controller.view 
```

所以，在你的情况下，你可以在`controller.view`之前打电话`self.navBarExtendedFPO = controller.navBarExtendedFPO;`

为了更清楚地解释视图生命周期，有一个例子：

您的 SLBaseViewController 中有被覆盖的方法，类似于XIB 文件`self.label`中定义的方法`navBarExtendedFPO`

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSLog(@"initWithNibName: view loaded - %d , IBOuttlet loaded - %d", [self isViewLoaded], self.label != nil);
    }
    return self;
}

- (void)loadView {
    NSLog(@"loadView1: view loaded - %d , IBOuttlet loaded - %d", [self isViewLoaded], self.label != nil);
    [super loadView];
     NSLog(@"loadView2: view loaded - %d , IBOuttlet loaded - %d", [self isViewLoaded], self.label != nil);
}

- (void)viewDidLoad
{
    NSLog(@"viewDidLoad1: view loaded - %d , IBOuttlet loaded - %d", [self isViewLoaded], self.label != nil);
    [super viewDidLoad];
    NSLog(@"viewDidLoad2: view loaded - %d , IBOuttlet loaded - %d", [self isViewLoaded], self.label != nil);
} 
```

并且有创建 SLBaseViewController 的方法

```
SLBaseViewController *testController = [[SLBaseViewController alloc] initWithNibName:@"SLBaseViewController" bundle:nil];
NSLog(@"after initialization: view loaded - %d , IBOuttlet loaded - %d", [testController isViewLoaded], testController.label != nil);
UIView * testView = testController.view;
NSLog(@"after calling testView.view: view loaded - %d , IBOuttlet loaded - %d", [testController isViewLoaded], testController.label != nil); 
```

所以，有我们的日志：

```
initWithNibName: view loaded - 0 , IBOuttlet loaded - 0
after initialization: view loaded - 0 , IBOuttlet loaded - 0
loadView1: view loaded - 0 , IBOuttlet loaded - 0
loadView2: view loaded - 1 , IBOuttlet loaded - 1
viewDidLoad1: view loaded - 1 , IBOuttlet loaded - 1
viewDidLoad2: view loaded - 1 , IBOuttlet loaded - 1
after calling testView.view: view loaded - 1 , IBOuttlet loaded - 1 
```

# compilation - 在 linphone for android 上制作期间进程冻结

> ID：15951633
> 
> 赞同：1
> 
> 时间：2013-04-11T14:38:05.213
> 
> 标签：compilation, android-ndk, freeze, mingw32, linphone

几天来，我一直在尝试为 android 构建 linphone，但我已经到了无法解决构建过程中遇到的问题的地步。

我一直在一步一步地遵循提供的自述文件，并尝试了在 SO questions 中解释的几种方法，但没有让我通过这一点。

[http://pastebin.com/gxmc2gwZ](http://pastebin.com/gxmc2gwZ)

上面的 pasbin 链接显示了我运行 make 时 mingw32 窗口的输出。最后它只是持有。感觉就像 make 进入了一个无限循环。我让它在一夜之间运行，但它停留在那个确切的位置。阻止它的唯一方法是 ctrl-c。

到目前为止，我已经使用了 3 个不同的 android NDK 构建，认为可能存在不兼容性。r8e、r7c 和 r7 不起作用。r7 甚至没有走到这一步。

我也尝试过使用 SHELL="sh -x" 运行 make，但结果输出几乎没有差异（如预期的那样）。

我试过在谷歌上搜索，但所有点击总是在日志中显示错误。我的没有。

如果有人知道什么会导致它挂起，那将是非常感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:13:51.697

我通过在命令提示符下从项目根目录运行 ndk-build.cmd 解决了这个问题，而不是在名为 linux 版本的 mingw 中使用 make。我的项目现在正在编译。

# neo4j - 密码查询速度低

> ID：15951634
> 
> 赞同：0
> 
> 时间：2013-04-11T14:38:05.337
> 
> 标签：neo4j, cypher

我使用查询

```
"START a=node("+str(node1)+"),
       b =node("+str(node2)+") 
MATCH p=shortestPath(a-[:cooperate*..200]-b) 
RETURN length(p)" 
```

查看 a 和 b 之间的路径。我有很多节点，所以当我运行查询时，有时它运行得很快，有时运行得很慢。我使用 neo4j 1.9 社区。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:18:02.853

查询时间与搜索的图表数量成正比。您的查询允许非常深入的搜索，深度可达 200。如果 a。和 b。非常接近，您不会搜索太多图形，并且查询将很快返回。如果一个。和 b。被 200 条边分开，您将搜索一个非常大的图（也许是整个图？），对于一个大图来说这会慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:22:05.047

两个查询之间的图形是否发生变化，这两个节点是否可能在查询之间相对于彼此位于不同的位置？例如，如果您生成一些随机数据来填充图表？

# coldfusion - 在 Coldfusion 中管理大型结构

> ID：15951637
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:38:11.560
> 
> 标签：coldfusion

我有一个很长的`KEY:VALUE`coldfusion配对列表。作为样本

```
<!--- Info --->
request.INFO = StructNew();
request.INFO.isImportArchiv = false;
request.INFO.lImportArchiv = "";
request.INFO.recordcount = 0;
request.INFO.recordImported = 0;
request.INFO.recordInvalid = 0;
request.INFO.recordNotImported = 0;
request.INFO.recordNotInDB = 0
request.INFO.isImportOK = false;
request.INFO.recordInDBInserted = 0;

<!---  Log messages --->
request.LOG = StructNew();
request.LOG.import =            "*************************";
request.LOG.importStart =       "*************************";
request.LOG.importFinished =    "*************************";
request.LOG.import*** =         "*************************";
request.LOG.importAborted =     "*************************";
request.LOG.*** =               "*************************";
request.LOG.****** =            "*************************";
request.LOG.count =             "*************************";
request.LOG.onvalidObjects =    "*************************";
request.LOG.count*** =          "*************************";
request.LOG.count***** =        "*************************";
request.LOG.******** =          "*************************";
request.LOG.***** =             "*************************";
request.LOG.********** =        "*************************";
request.LOG.************** =    "*************************";
request.LOG.************** =    "*************************";
request.LOG.**************** =  "*************************"; 
```

有没有更好的方法来管理 ColdFusion 中的此类信息结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:22:22.777

只要您使用的是 CF8 或更高版本，您就可以使用结构文字来减少一些输入：

```
<cfscript>
request.INFO = {
    isImportArchiv = false,
    lImportArchiv = "",
    recordcount = 0,
    recordImported = 0,
    recordInvalid = 0,
    recordNotImported = 0,
    recordNotInDB = 0,
    isImportOK = false,
    recordInDBInserted = 0
};
</cfscript> 
```

# java - Android 媒体播放器错误 (-19, 0)

> ID：15951639
> 
> 赞同：2
> 
> 时间：2013-04-11T14:38:17.650
> 
> 标签：java, android, audio, media-player

单击按钮时，我尝试重放声音。但我得到了错误 (-19, 0) （这意味着什么^^）

我的代码：

```
final Button xxx = (Button)findViewById(R.id.xxx);

        xxx.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.plop); 
                mp.start();
            }
        }); 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:54:35.137

我遇到了同样的问题，我通过添加以下代码解决了它：

```
mp1 = MediaPlayer.create(sound.this, R.raw.pan1);
mp1.start();
    mp1.setOnCompletionListener(new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
        mp.release();

        };
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T14:26:29.533

您需要在开始新的媒体播放器之前释放之前的媒体播放器。

声明`MediaPlayer`为实例变量，然后：

```
mp = null;
final Button xxx = (Button)findViewById(R.id.xxx);

        xxx.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (mp != null) {
                  mp.stop();
                  mp.release();
                }

                mp = MediaPlayer.create(getApplicationContext(), R.raw.plop); 
                mp.start();
            }
        }); 
```

或者在您的情况下，由于您始终播放相同的声音，您不需要释放播放器并创建新的，只需重用旧的。

```
final MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.plop);
mp.prepare(); // Blocking method. Consider to use prepareAsync

final Button xxx = (Button)findViewById(R.id.xxx);

        xxx.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mp.stop();
                mp.start();
            }
        }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-19T20:38:35.477

我通过这段代码解决了这个问题：

```
 public static void playSound() {
    mMediaPlayer = new MediaPlayer();
    try {
        AssetFileDescriptor afd = context.getAssets().openFd("type.mp3");
        mMediaPlayer.setDataSource(afd.getFileDescriptor(),
                afd.getStartOffset(), afd.getLength());
        mMediaPlayer.prepare();
        mMediaPlayer.start();
        mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer arg0) {
                // TODO Auto-generated method stub
                arg0.release();
            }
        });
    } catch (IllegalArgumentException | IllegalStateException | IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我希望能帮助你。

# objective-c - 目标 C 和 ARC

> ID：15951641
> 
> 赞同：0
> 
> 时间：2013-04-11T14:38:18.980
> 
> 标签：objective-c, memory-management, automatic-ref-counting

首先，我是 Objective C 的新手，我在互联网上阅读了一些内容。在 iOS 和 MAC 上，我可以在没有任何内存管理知识（如释放、保留、自动释放等）的情况下使用 ARC。在 MAC 上的某些地方我可以使用 ARC，但在 iOS 上我需要手动管理，在某些地方它说我可以在 iOS 上使用 ARC 但我需要做一些手动管理。那么什么是正确答案呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:40:41.223

> ARC 在 Xcode 4.2 中支持 OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5。弱引用在 OS X v10.6 和 iOS 4 中不受支持。

资料来源：[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# javascript - 在 html 文件的单行中引用多个 js 文件

> ID：15951645
> 
> 赞同：4
> 
> 时间：2013-04-11T14:38:22.957
> 
> 标签：javascript

有没有一种简单的方法来引用 HTML 文件中的所有 js 文件，而不是一个一个地引用它？

而不是这个 -

```
<script type="text/javascript" src="js/controllers/mainCtrl.js"></script>
<script type="text/javascript" src="js/controllers/browseCtrl.js"></script>
... 
```

我正在寻找这样的东西-

```
<script type="text/javascript" src="js/controllers/*.js"></script> 
```

或者是否有一种工具可以将这些文件的内容复制到一个文件中并引用该文件？这将最小化 HTTP 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:41:38.450

> 有没有一种简单的方法来引用 HTML 文件中的所有 js 文件，而不是一个一个地引用它？

对于一些“容易”的价值。浏览器没有内置任何东西可以做到这一点。

> 或者是否有一种工具可以将这些文件的内容复制到一个文件中并引用该文件？

有许多。`cat`是最简单的。

从您常用的构建工具中调用它。

您可以在开发期间使用[require.js](http://requirejs.org/)`r.js`之类的东西在运行时将它们组合起来，并从您的构建工具中通过 Node调用以打包您的登台和实时环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:52:45.663

你可以[试试 Require.js](http://requirejs.org/)。Require.js 是唯一通过脚本标签加载的 JavaScript 文件。当您退出开发时，您可以使用 Require.js 的 r.js 将所有内容压缩并合并到一个文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:42:31.237

我一直使用这个工具来缩小我的 JS 文件：

[在线 Javascript 压缩工具](http://www.jscompress.com/)

您可以上传多个文件，它会为您将它们连接成一个。它还产生比 YUI 压缩器更小的文件大小，而且大多数时候谷歌的 JS 编译器也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-28T19:24:54.003

我不确定为什么还没有提到这一点，但我确实认为这个线程有点过时了。因为我在寻找解决这个问题的过程中偶然发现了这个问题，所以我想我会在这里快速写一篇关于[GruntJS](http://gruntjs.com/)的文章，以供其他 JS 新手查找。

本质上，正确配置的 Gruntfile.js 将能够围绕 JS 执行各种任务，包括但不限于：连接文件、缩小文件、代码检查等等。

您可以`grunt`在 Ubuntu 上安装：

```
$ sudo apt-get install nodejs
$ sudo npm -g install grunt-cli
$ cd /path/to/my/project
--- Assumming you have a package.json file already in place ---
$ npm install grunt --save-dev
--- Install grunt plugins you wish to use ---
$ npm install grunt-contrib-concat --save-dev
$ npm install grunt-contrib-uglify --save-dev
$ npm install grunt-contrib-jshint --save-dev
$ npm install grunt-contrib-watch --save-dev 
```

在[GruntJS 网站上](http://grunjs.com)，有一篇关于如何使用 GruntJS 的很好的文章，但这里有一个示例 Gruntfile.js，它将：

1.  lint 所有 JS 文件（`app.js`在当前目录和目录`.js`中的所有文件`ngmodules`）。
2.  将文件连接并保存到`dist/package-name.js`.
3.  缩小连接文件并将其保存到`dist/package-name.min.js`.

`Gruntfile.js`：

```
module.exports = function(grunt) {

  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    concat: {
      options: {
        separator: ';'
      },
      dist: {
        src: ['app.js', 'ngmodules/**/*.js'],
        dest: 'dist/<%= pkg.name %>.js'
      }
    },
    uglify: {
      options: {
        banner: '/*! <%= pkg.name %> <%= grunt.template.today("dd-mm-yyyy") %> */\n'
      },
      dist: {
        files: {
          'dist/<%= pkg.name %>.min.js': ['<%= concat.dist.dest %>']
        }
      }
    },
    jshint: {
      files: ['Gruntfile.js', 'app.js', 'ngmodules/**/*.js'],
      options: {
        // options here to override JSHint defaults
        globals: {
          jQuery: true,
          console: true,
          module: true,
          document: true
        }
      }
    },
    watch: {
      files: ['<%= jshint.files %>'],
      tasks: ['jshint']
    }
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-concat');

  grunt.registerTask('default', ['jshint', 'concat', 'uglify']);

}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-01T09:04:54.870

还有 Gulp ( [http://gulpjs.com/](http://gulpjs.com/) )，它可以与各种插件一起使用。这是一个将 *.js 文件连接到一个文件 (main.js) 中的示例，然后重命名生成的文件并最终将其缩小：

```
var gulp = require('gulp'),
rename = require('gulp-rename'),
uglify = require('gulp-uglify'),
concat = require('gulp-concat');

gulp.task('scripts', function(){
return gulp.src('./src/js/*.js')
.pipe(concat('main.js'))
.pipe(rename({suffix: '.min'}))
.pipe(uglify())
.pipe(gulp.dest('./src/js/*.js')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T14:39:58.943

您可以尝试将您的 javascript 文件或插件合并为一个：

```
<script type="text/javascript" src="js/controllers/plugins.js"></script> 
```

不过，您必须手动完成。另一种选择是编写一个服务器端脚本来组合和缩小所有的 javascript 文件。

# android - Android AsyncTask 无法下载图像

> ID：15951649
> 
> 赞同：0
> 
> 时间：2013-04-11T14:38:31.183
> 
> 标签：android, asynchronous

我希望有人可以帮助我解决我一直遇到的问题。我正在使我的应用程序在高于 3.0 的版本上运行，因此我只能在 UI 线程上执行 GUI 任务。我有以下代码，我没有得到任何编译错误，但它不起作用。在日志中，我收到以下错误：

**I/AndroidRuntime(464)：注意：附加线程 'Binder Thread #3' 失败**

谢谢您的帮助！

```
new DownloadImageTask().execute(imgURL); //imgURL is declared as string URL

    private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

     protected void onPostExecute(Bitmap result) {
        ((ImageView) findViewById(R.id.imgCity)).setImageBitmap(bmp);
     }

    protected Bitmap doInBackground(String... params) {
        return loadImage(params[0]);
    }

}

public Bitmap loadImage(String poiURLimg) {

    try {
        URL ulrn = new URL(poiURLimg);
        HttpURLConnection con = (HttpURLConnection) ulrn.openConnection();
        InputStream is = con.getInputStream();
        bmp = BitmapFactory.decodeStream(is);
        if (null != bmp)
        return bmp;
    } catch (Exception e) {
    }
    return bmp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:46:35.987

Binder Thread #3 错误与您的应用程序中的代码无关。有许多潜在的原因通常与日食中的某些事情有关。您可以阅读[这篇文章](https://stackoverflow.com/questions/5540670/android-eclipse-failing-to-debug)，其中提供了一些示例。

至于为什么无法加载位图 - 在您`onPostExecute`的设置中，您正在将位图设置为`ImageView`bmp。Bmp 是创建位图的 loadImage 方法返回的值的名称。它不是您作为参数传递到的位图的名称`onPosExecute`- 那是位图结果。将 bmp 更改为结果，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:44:54.577

有几件事要尝试。首先，确保您已将 INTERNET 权限添加到您的 AndroidManifest.xml 文件中。你需要它来从互联网上下载图像，如果没有它，你的应用程序将会崩溃（尽管听起来这不是你的问题）

尝试将此用于您的 loadImage() 方法：

```
public static Bitmap loadImage(String src)
    {
        try
        {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        }
        catch (IOException e)
        {
            e.printStackTrace();
            return null;
        }
    } 
```

这是我目前在我的应用程序中编写和使用的一个 DownloadImageTask 示例（所以我知道它可以正常工作）：

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap>
{
    @Override
    protected Bitmap doInBackground(String... params)
    {
        return loadImage(params[0]);
    }

    @Override
    protected void onPostExecute(Bitmap result)
    {
        if (isCancelled() || result == null)
            return;

        ((ImageView) findViewById(R.id.image_view)).setImageBitmap(result);
    }
} 
```

# java - droidtext 添加图像不起作用

> ID：15951656
> 
> 赞同：0
> 
> 时间：2013-04-11T14:38:47.010
> 
> 标签：java, image, pdf, android-droidtext

我正在拼命尝试将图像插入到现有的带有 droidtext 的 pdf 中。

这个项目的原始版本是用 iText 制作的。所以代码已经存在并被修改以适应 Android。

我所做的是将现有的 PDF 作为背景。在此 pdf 中的指定位置插入文本和十字。就像填写表格一样。到目前为止，这工作得很好，无需大幅更改代码。

现在我想在页面底部设置一个图像来签署表格。我使用了我的原始代码并对其进行了一些调整。这根本不起作用。我试图将图像设置在特定位置。也许这就是错误。

所以我试着用“官方”的方式来做。Pengiuns.jpg 图像位于 SD 卡上。

```
try {
Document document = new Document();
File f=new File(Environment.getExternalStorageDirectory(), "SimpleImages.pdf");
PdfWriter.getInstance(document,new FileOutputStream(f));
document.open();
document.add(new Paragraph("Simple Image"));
String path = Environment.getExternalStorageDirectory()+"/Penguins.jpg";

if (new File(path).exists()) {
    System.out.println("filesize: " + path + " = " + new File(path).length());
}

Image image =Image.getInstance(path);
document.add(image);
document.close();
} catch (Exception ex) {
    System.out.println("narf");
} 
```

但仍然没有任何图像。我得到的是一个PDF，上面写着“简单图像”，没有别的。我可以访问图片。我通过 if() 获得了正确的文件大小。不抛出异常。

所以我的问题是，如何将 SD 卡上的图像放入我的 pdf 文件中？这里有什么错误？但最重要的是，如何将图像设置到 pdf 中具有大小的特定位置？在我的原始代码中，我使用 setAbsolutePosition( x, y ) 。当我在代码中使用 Eclipse 时，它​​并没有抱怨，但它真的有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T17:59:30.913

您获得“简单图像”的原因是因为您拥有它`Paragraph`。要添加图像，请使用：

```
Image myImg1 = Image.getInstance(stream1.toByteArray()); 
```

如果您想将其作为最后一页的页脚，您可以使用以下代码，但它适用于文本。您可以尝试对其进行操作以获取图像：

```
Phrase footerText = new Phrase("THIS REPORT HAS BEEN GENERATED USING INSPECTIONREPORT APP");
HeaderFooter pdfFooter = new HeaderFooter(footerText, false);
doc.setFooter(pdfFooter); 
```

这是示例代码。在这里，我已将图像上传到 Imageview，然后添加到 pdf。希望这可以帮助。

```
private String NameOfFolder = "/InspectionReport"; 

Document doc = new Document();

try {   //Path to look for App folder 
    String path = Environment.getExternalStorageDirectory().getAbsolutePath() + NameOfFolder;
    String CurrentDateAndTime= getCurrentDateAndTime();   

    // If App folder is not there then create one
    File dir = new File(path);
    if(!dir.exists())
        dir.mkdirs();

    //Creating new file and naming it
    int i = 1;  

    File file = new File(dir, "Inspection"+Integer.toString(i)+"-" + CurrentDateAndTime+".pdf");
    while(file.exists()) {
        file = new File(dir, "Inspection"+Integer.toString(i++)+"-" + CurrentDateAndTime+".pdf");}

        String filep= file.toString();
        FileOutputStream fOut = new FileOutputStream(file);

        Log.d("PDFCreator", "PDF Path: " + path);
        PdfWriter.getInstance(doc, fOut);
        Toast.makeText(getApplicationContext(),filep , Toast.LENGTH_LONG).show();

        //open the document
        doc.open();

        ImageView img1 = (ImageView)findViewById(R.id.img1);
        ByteArrayOutputStream stream1 = new ByteArrayOutputStream();
        Bitmap bitmap1 = ((BitmapDrawable)img1.getDrawable()).getBitmap();
        bitmap1.compress(Bitmap.CompressFormat.JPEG, 100 , stream1);
        Image myImg1 = Image.getInstance(stream1.toByteArray());
        myImg1.setAlignment(Image.MIDDLE);

        doc.add(myImg1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T06:35:18.547

试试下面的代码：

```
/* Inserting Image in PDF */
ByteArrayOutputStream stream = new ByteArrayOutputStream();

Bitmap bitmap = BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.android);

bitmap.compress(Bitmap.CompressFormat.JPEG, 100 , stream);

Image myImg = Image.getInstance(stream.toByteArray());

myImg.setAlignment(Image.MIDDLE);

//add image to document
doc.add(myImg); 
```

# .net - “无效”日期时间字符串的问题

> ID：15951657
> 
> 赞同：0
> 
> 时间：2013-04-11T14:38:47.573
> 
> 标签：.net, datetime, cultureinfo

我遇到了无法识别 DateTime 字符串的问题。使用我们的许可程序，您可以生成一个具有与之关联的到期日期时间的密钥。但是，我们在世界其他地方的一些客户无法应用此密钥，并且返回的错误是“字符串未被识别为有效的日期时间”。

我查看了我发送给他们的密钥，解密后，DateTime 对我来说看起来不错。我需要考虑的世界不同地区的日期时间格式是否存在差异？（现在我假设 .NET 只会“弄清楚”，我认为现在可能并非如此）如果是这样，我将如何格式化我们的 DateTime 以便它可以在任何部分工作世界的？

**编辑**这是日期时间字符串：“10/16/2122 4:36:17 PM”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:44:05.383

我会自发地尝试使用 .ToString() 方法来应用自定义格式。

例子：

```
string date = DateTime.Now.ToString("yyyy-MM-dd"); // International standard 
```

您可以按照[MSDN 自定义日期和时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)帮助按照您需要的方式对其进行格式化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:45:15.170

我的猜测是您的密钥是这样生成的：

```
string key = date.ToString(); 
```

这将为不同的国家提供不同的结果。
通过给出修复格式使密钥唯一生成：

```
string key = date.ToString("yyyyMMdd"); 
```

然后您可以将其解析回所有国家/地区的日期：

```
var date = DateTime.ParseExact(key, "yyyyMMdd", CultureInfo.InvariantCulture); 
```

进一步阅读[这里](https://stackoverflow.com/questions/3477735/convert-datetime-to-string-formatyyyymmdd)。
[在这里您可以找到您梦寐以求的所有日期格式。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:48:37.903

应该是文化问题吧。使用 InvariantCulture 确保您始终使用相同的格式

```
string datestring  = DateTime.Now.ToString(System.Globalization.CultureInfo.InvariantCulture)

DateTime date = DateTime.Parse(datestring, System.Globalization.CultureInfo.InvariantCulture); 
```

# symfony - Doctrine：检索可能尚未保存到数据库的实体

> ID：15951663
> 
> 赞同：0
> 
> 时间：2013-04-11T14:39:12.747
> 
> 标签：symfony, doctrine

我正在解析一个包含许多项目的大型 XML 文件。每个项目都有许多类别，可以重复。这是一个示例 XML。

```
<item>
    <category>Category1</category>
    <category>Category2</category>
    <category>Category3</category>
    <category>Category4</category>
    <category>Category5</category>
</item>
<item>
    <category>Category1</category>
    <category>Category2</category>
    <category>Category3</category>
    <category>Category7</category>
    <category>Category9</category>
</item> 
```

使用学说来处理上面描述的多对多关系，我有一个这样的示例代码：

```
$em = $this->getDoctrine()->getEntityManager();

foreach ($items as $item) {

    [...]

    $categories = ... //Array with category names, parsed from the XML.

    foreach ($categories as $category) {

        //This will check if the 'item' entity 
        //already has a category with that name.
        $exists = $entity->getCategories()->exists(function($key, $element) use ($category) {
            return $category == $element->getName();
        });

        if (!$exists) {

            //If there's already one on the database, we'll load it.
            //Otherwise, we'll save a new Category..
            $query = $this->_entityManager->createQueryBuilder();
            $query->select('c')
                  ->from("MyBundle:Category, 'c');
                  ->where("c.name = :name")
                  ->setParameter("name", $category);

            }

            $result = $query->getQuery()->getOneOrNullResult();

            if ($result != null) {
                $item->addCategory($result);
            } else {
                $categoryEntity = new Category($category);
                $em->persist($categoryEntity);
                $item->addCategory($categoryEntity);
            }

        }

    }

} 
```

问题是：`flush()`当我完成所有项目的循环时，我只有实体管理器。因此，`$query->getQuery()->getOneOrNullResult()` *总是*返回`null`，导致我创建重复的类别。

在上面的 XML 示例中，我有以下内容：

```
| item |
| 1    |
| 2    |

| category.id, category.name |
| 1,           Category1     |
| 2,           Category2     |
| 3,           Category3     |
| 4,           Category4     |
| 5,           Category5     |
| 6,           Category1     |
| 7,           Category2     |
| 8,           Category3     |
| 9,           Category7     |
| 10,          Category9     |

| item | category |
| 1    | 1        |
| 1    | 2        |
| 1    | 3        |
| 1    | 4        |
| 1    | 5        |
| 2    | 6        |
| 2    | 7        |
| 2    | 8        |
| 2    | 9        |
| 2    | 10       | 
```

我想要以下内容：

```
| item |
| 1    |
| 2    |

| category.id, category.name |
| 1,           Category1     |
| 2,           Category2     |
| 3,           Category3     |
| 4,           Category4     |
| 5,           Category5     |
| 6,           Category7     |
| 7,           Category9     |

| item | category |
| 1    | 1        |
| 1    | 2        |
| 1    | 3        |
| 1    | 4        |
| 1    | 5        |
| 2    | 1        |
| 2    | 2        |
| 2    | 3        |
| 2    | 9        |
| 2    | 10       | 
```

简单地添加`$em->flush()`after`$em->persist($categoryEntity)`解决了它，但我还不想刷新东西（或者就此而言，只刷新一个类别）。有很多未完成的事情要做，我不想打断我的交易。如果需要，我仍然希望能够回滚到最开始并排除所有未使用的类别（并且，显然，无需运行其他查询）。

我的问题是：有没有办法同时访问数据库和学说的内部实体映射来检索可能有或没有 ID 的实体？还是我必须自己创建这个映射，运行 DQL 并检查我的映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:41:14.470

Doctrine2 无法为您执行此操作，但很容易将新创建的类别存储在循环中，并在您从数据库中获得 MISS 时检查它们。

```
 $_created_categories = array();

    if (!$exists) {
        // If there's already one on the database, we'll load it.
        // Otherwise, we'll save a new Category..

        $query = $this->_entityManager->createQueryBuilder();
        $query->select('c')
              ->from("MyBundle:Category, 'c');
              ->where("c.name = :name")
              ->setParameter("name", $category);

        $result = $query->getQuery()->getOneOrNullResult();

        if ($result) {
            $item->addCategory($result);
        elseif ( isset($_created_categories[$category]) ) {
            $item->addCategory($_created_categories[$category]);
        } else {
            $categoryEntity = new Category($category);
            $em->persist($categoryEntity);
            $item->addCategory($categoryEntity);

            $_created_categories[$category] = $categoryEntity;
        }
    } 
```

将新类别实体存储在数组中没有内存开销，`$_created_categories`因为所有对象都通过 PHP 中的引用进行操作。

# html - 将带有 html 文件的子目录映射到 JSP servlet

> ID：15951665
> 
> 赞同：1
> 
> 时间：2013-04-11T14:39:22.923
> 
> 标签：html, jsp, tomcat, servlets, mapping

我知道我可以映射 HTML 文件，以便 JSP 引擎处理具有 .html 扩展名的文件与处理 .jsp 文件相同。但是，我想做的比这更精确。我希望我的 JSP 引擎 Tomcat 5.5**仅**将特定子目录 SecAuth 中的那些 HTML 文件视为 JSP 文件。

我在 Tomcat 的 web.xml 文件中添加了以下内容，但它没有工作（事实上，随后出现了错误）：

```
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>SecAuth/*.html</url-pattern>
</servlet-mapping> 
```

清楚我要完成的工作吗？任何帮助，将不胜感激。

谢谢你。

# c++ - 如何测量在多核系统上运行的多个应用程序之间的消息延迟？

> ID：15951669
> 
> 赞同：2
> 
> 时间：2013-04-11T14:39:29.557
> 
> 标签：c++, winapi, timing

我正在开发一个由三个主要软件组件组成的系统。客户端应用程序、核心应用程序和交换应用程序都运行在同一台服务器上。消息在客户端应用程序中接收，中继到核心应用程序，然后转发到适当的交换应用程序。

我想测量我们系统内部的消息延迟，因此在客户端收到消息时加上时间戳，在核心和消息从交换模块发出时的时间戳。

使用 QueryPerformanceCounter() 跨多个应用程序对事件进行计时是否合理？似乎计数器在运行多个内核的应用程序中不可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:13:07.720

添加一个交换应用程序如何打开客户端连接，然后循环一个带有时间戳的消息，例如 10000 次。延迟会加起来，因此您可以有效地使用墙上时间戳，计算结束开始并除以 10000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T21:07:25.297

正如 Chad 指出的那样，QueryPerformanceCounter 可以很好地用于此目的。来自 MSDN “一般来说，[来自 QPC] 的性能计数器结果在多核和多处理器系统中的所有处理器上都是一致的，即使是在不同的线程或进程上测量时也是如此。”只提到了几个例外......

1.  在某些处理器上运行的 Pre-vista 操作系统可能会违反这种一致性......
2.  不同的线程可能会关闭 1 个刻度。“术语滴答指的是等于 1 ÷（从 QueryPerformanceFrequency 获得的性能计数器的频率）的时间段。”

# linux - 在运行时加载 Linux 库

> ID：15951672
> 
> 赞同：4
> 
> 时间：2013-04-11T14:39:39.733
> 
> 标签：linux, ld, elf, dlopen, shared-libraries

我认为 Linux 的一个主要设计缺陷是在以二进制而不是源代码形式分发程序时共享对象地狱。

这是我的具体问题：我想以 ELF 二进制形式发布一个 Linux 程序，它应该在尽可能多的发行版上运行，因此我的强制依赖关系尽可能低：在任何情况下都需要的唯一库是 libpthread、libX11、librt和 libm（当然还有 glibc）。当我使用 gcc 构建程序时，我正在动态链接这些库。

然而，可选地，我的程序还应该支持 ALSA（声音接口）、Xcursor、Xfixes 和 Xxf86vm 扩展以及 GTK。但是只有当它们在用户系统上可用时才应该使用它们，否则我的程序应该仍然可以运行但功能有限。例如，如果 GTK 不存在，我的程序将退回到终端模式。因为我的程序应该仍然能够在没有 ALSA、Xcursor、Xfixes 等的情况下运行。我无法动态链接这些库，因为如果其中一个库不存在，程序将根本无法启动。

所以我需要手动检查库是否存在，然后使用 dlopen() 将它们一一打开，并使用 dlsym() 导入必要的函数符号。然而，这会导致各种问题：

**1) 库命名约定：** 共享对象通常不只是简单地称为“libXcursor.so”，而是具有某种版本扩展名，如“libXcursor.so.1”，甚至是“libXcursor.so.0.2000”等非常有趣的东西。这些扩展似乎因系统而异。那么调用 dlopen() 时应该选择哪一个呢？在这里使用硬编码名称似乎是一个非常糟糕的主意，因为名称因系统而异。所以我想到的唯一解决方法是扫描整个库路径并查找以“libXcursor.so”前缀开头的文件名，然后进行一些自定义版本匹配。但是我怎么知道它们真的兼容呢？

**2) 库搜索路径：**到底我应该在哪里查找 *.so 文件？这也因系统而异。有一些默认路径，例如 /usr/lib 和 /lib，但 *.so 文件也可能位于许多其他路径中。所以我必须打开 /etc/ld.so.conf 并解析它以找出所有库搜索路径。这不是一件容易的事，因为 /etc/ld.so.conf 文件也可以使用某种*包含*指令，这意味着我必须解析更多的 .conf 文件，对由循环*包含*指令引起的可能的无限循环进行一些检查等等。真的没有更简单的方法来找出 *.so 的搜索路径吗？

所以，我的实际问题是：难道没有更方便、更简单的方式来实现我想做的事情吗？创建一个具有一些可选依赖项（如 ALSA、GTK、libXcursor）的 Linux 程序真的那么复杂吗……但没有它也应该可以工作！做我想做的事有某种标准吗？还是我注定要以骇人听闻的方式去做？

感谢您的意见/解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:29:43.720

> 我认为 Linux 的一个主要设计缺陷是在以二进制而不是源代码形式分发程序时共享对象地狱。

就系统的创建者而言，这不是设计缺陷。这是一个优势——它鼓励您以源代码形式分发程序。哦，你想卖你的软件？抱歉，这不是 Linux 优化的用例。

> 库命名约定：共享对象通常不是简单地称为“libXcursor.so”，而是具有某种版本扩展名，如“libXcursor.so.1”，甚至是“libXcursor.so.0.2000”等非常有趣的东西。

是的，这称为外部库版本控制。[在这里](http://docs.oracle.com/cd/E19082-01/819-0690/chapter5-5/index.html)阅读。从该描述中应该可以清楚地看出，如果您在通常会给您`libXcursor.so.1`作为运行时参考的系统上使用标头编译二进制文件，那么您*唯一*兼容的共享库是`libXcursor.so.1`，并且尝试`dlopen` `libXcursor.so.0.2000`将导致不可预知的崩溃。

任何提供`libXcursor.so`但不提供`libXcursor.so.1`的系统要么是损坏的安装，要么与您的二进制文件不兼容。

> 库搜索路径：到底我应该在哪里查找 *.so 文件？

您*不*应该尝试使用它们的完整路径打开这些库中的任何一个。只需调用，运行时加载程序就会在*系统适当的*位置`dlopen("libXcursor.so.1", RTLD_GLOBAL);`搜索库。

# maven - maven插件检测哈德森

> ID：15951673
> 
> 赞同：0
> 
> 时间：2013-04-11T14:39:40.687
> 
> 标签：maven, hudson, maven-plugin

我正在为 maven 编写一个插件，我想知道它是否在 hudson 上运行。然后我想知道哪个用户触发了构建。

是否有提供对此访问权限的 API（@component）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:24:14.710

通常在 Hudson 中运行期间存在一些环境变量，例如[JOB_ID](http://wiki.hudson-ci.org/display/HUDSON/Building+a+software+project#Buildingasoftwareproject-HudsonSetEnvironmentVariables)等，您可以使用它们来检测是否在 Hudson 中运行。

# java - 自动电子邮件发送失败

> ID：15951674
> 
> 赞同：1
> 
> 时间：2013-04-11T14:39:45.217
> 
> 标签：java, android, email, jakarta-mail

我正在使用[这篇文章](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)来帮助我发送自动电子邮件，但我遇到了一个问题，似乎什么都没有发生，也没有产生错误。

我使用了 AsyncTask 但它根本不发送邮件。

> 公共类 Sender 扩展 AsyncTask< Void, Void, Void> {
> 
> ```
>  private Exception exception;
> 
>   protected Void doInBackground(String... arg0) {
> 
>       Log.v("aws", "OPEN   asa");
> 
>       Mail m = new Mail("email@email.com", "password");
>       String[] toArr = {"to@mail.com"};
>       m.setTo(toArr);
>       m.setFrom("from@gmail.com"); 
>       m.setSubject("This is an email sent using my Mail JavaMail wrapper from an >Android device."); 
>       m.setBody("Email body.");
> 
>         try { 
>           //m.addAttachment("/sdcard/filelocation"); 
> 
>           if(m.send()) { 
>               Log.v("aws", "OK SENT");
>           } else { 
>               Log.v("aws", "NOT SENT");
>           } 
>         } catch(Exception e) { 
>             Log.v("aws", "EXCEPTION . NOT SENT"); 
>         }
>       return null;
>   }
> 
>   @Override
>   protected Void doInBackground(Void... arg0) {
>       // TODO Auto-generated method stub
>       return null;
>   }
> 
>   protected void onPostExecute(Void... arg0) {
>       // TODO: check this.exception 
>       // TODO: do something with the feed
>    } 
> ```
> 
> }

我曾经`new Sender().execute();`执行过该任务，但什么也没发生，也没有抛出任何错误。

我究竟做错了什么？

**编辑**

代码有两个`doInBackground`这样的第二个覆盖了我的工作`doInBackground`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:44:16.993

请注意，您`doInBackground()`的代码中有两个方法，`@Override`版本是由`AsyncTask`. 只需将代码从错误的`doInBackground()`版本移动到正确的版本并删除错误的版本。

# r - R Programming - 防止“应用”重复超出数据范围的结果

> ID：15951678
> 
> 赞同：0
> 
> 时间：2013-04-11T14:39:50.217
> 
> 标签：r, apply, records

我有一个数据集（在数据框中）。我正在使用 apply 向数据集中添加一个新列，其中新列的行使用该行中其他列的元素执行一个函数。Apply 有效，但在将函数应用到每一行之后，它会继续超出范围，只是一遍又一遍地应用值。

这是我开始的数据：

```
Abbreviation    Name    X    Y    Z     A    B    C
JM              Jim     3    4    5     6    7    8
JS              Jess    5    6    7     8    9    10 
```

使用以下命令，我得到以下结果： 命令：

```
df_new$Test <- apply(df_new,1, function(row) (df_new[,8]/df_new[,6])/(df_new[,5]/df_new[,3])) 
```

返回的数据（来自视图（df_new））

```
Abbreviation    Name    X    Y    Z     A    B    C     Test
JM              Jim     3    4    5     6    7    8     .8
JS              Jess    5    6    7     8    9    10    .89
                                                        .8
                                                        .89
                                                        .8
                                                        .89 
```

此外，当我使用以下命令将此数据写入 csv 时，我得到以下输出： 命令：

write.csv(df_new,file="Df_new.csv", row.names=FALSE)

```
Abbreviation    Name    X    Y    Z     A    B    C     Test Test.1  Test.2    Test.3
JM              Jim     3    4    5     6    7    8     .8   .8      .8        .8
JS              Jess    5    6    7     8    9    10    .89  .89     .89       .89 
```

理想情况下，从上面，我只想要 df_new[1:2,1:9]; 但是，即使尝试创建仅保留该信息的对象，仍然会导致额外的行（在 View(df_new) 中）或额外的列（写入 .csv 时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:44:41.407

请注意，您提供了一个`apply`带有参数“row”的函数，但您从未在函数中使用它。我也不明白为什么你需要使用 apply ，因为我认为

```
df_new$Test <- (df_new[,8]/df_new[,6])/(df_new[,5]/df_new[,3]) 
```

应该给你你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:44:35.247

`apply`在这种情况下你真的不需要使用。利用 R 是矢量化的事实，只需执行以下操作：

```
df_new$Test <- (df_new$C / df_new$A) / (df_new$Z / df_new$X)
# Abbreviation Name X Y Z A B  C      Test
# 1           JM  Jim 3 4 5 6 7  8 0.8000000
# 2           JS Jess 5 6 7 8 9 10 0.8928571 
```

R 将 sum 中的每一列视为一个向量，并按元素对它们进行操作。它使用所有向量中的第一个元素返回第一个值，然后使用所有向量中的第二个元素返回第二个值，然后任何向量中都没有更多元素，因此返回两个数字的向量。

# c++ - 模板参数数量错误的模板模板参数

> ID：15951683
> 
> 赞同：5
> 
> 时间：2013-04-11T14:39:54.730
> 
> 标签：c++, templates

考虑具有通过模板模板参数和两个策略定义设置的策略的模板类 C：

```
template<class T> struct PolicyOne { };
template<class T, int U, int V> struct PolicyTwo { };
template<class T, template<class> class POLICY> struct C { POLICY<T> policy; };

void f()
{
    C<int, PolicyOne> mc1;
    C<int, PolicyTwo<1, 2> > mc2; // doesn't work this way
} 
```

`PolicyTwo`由于模板参数数量错误而不起作用。如果您指定其他模板参数的类型，有没有办法`PolicyTwo`用作`POLICY`模板参数？

我使用的是 C++03，所以别名声明不可用。我知道[这个问题](https://stackoverflow.com/q/2795023/427532)，但在那里我看不到我的问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:01:10.270

根据策略的使用方式，您可以使用继承代替别名模板进行管理：

```
template<int U, int V> struct PolicyTwoAdaptor {
  template<class T> struct type: PolicyTwo<T, U, V> { }; };
C<int, PolicyTwoAdaptor<1, 2>::type> mc2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:20:09.583

我看不到如何用你当前的机制解决这个问题，但你可以反转它的工作方式，它应该可以很好地编译（甚至可以通过删除类模板参数来降低复杂性）：

```
template <typename T> struct PolicyBase { typedef T value_type; };
template<class T> struct PolicyOne : public PolicyBase<T> { };
template<class T, int U, int V> struct PolicyTwo : public PolicyBase<T> { };
template<class POLICY> struct C { POLICY policy; typedef typename POLICY::value_type T; };

void f()
{
    C<PolicyOne<int> > mc1;
    C<PolicyTwo<int, 1, 2> > mc2; // doesn't work this way
} 
```

基本思想是将类型 tempalte 参数移出策略用户，并为其提供完全实例化的策略。然后策略通过 typedef（如果需要）将其模板类型返回给策略用户。

# forms - Drupal 7表单托管文件默认值不起作用

> ID：15951685
> 
> 赞同：1
> 
> 时间：2013-04-11T14:39:55.643
> 
> 标签：forms, file, drupal-7, managed

我正在使用 druapl 7 表单来允许用户上传幻灯片的图像。托管文件非常适合上传和保存文件，我可以看到数据库中的条目。当什么都没有时，一切都很好。但是当表单重新加载时，我无法获得适用于上传图像的默认值。

```
$form['slideshow_0_slide_0_fieldset']['slideshow_0_slide_0_image'] = array(
    '#name' => "files[slideshow_0_slide_0_image]",
    '#type' => 'managed_file',
    '#size' => '25',
    '#title' => t('Image 0'),
    '#upload_location' => 'public://',
    '#default_value' => variable_get( $managed_file_fid, '' )
); 
```

我也试过这个没有成功：

```
'#default_value' => file_load( $managed_file_fid, '' ) 
```

为了使默认值起作用，我在这里缺少什么？

# postgresql - 哪些哈希算法最适合在 Postgres 中生成唯一 ID？

> ID：15951686
> 
> 赞同：2
> 
> 时间：2013-04-11T14:39:56.483
> 
> 标签：postgresql, hash

我有一个大型地理空间数据集（约 30m 记录），我目前正在将其导入 PostgreSQL 数据库。我需要为每条记录分配一个唯一 ID，但递增整数可能不是一个好主意，因为如果我需要重新导入数据集，就无法可靠地重新创建它。

似乎确定投影中几何数据的唯一散列可能是可靠标识符的最佳选择。能够在 Postgres 中计算散列将是有益的，而且速度也将是有益的。

在这种情况下，我的选择是什么？有没有非常适合这种情况的特定方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:58:43.067

如果您需要一个依赖于（并且可以从中重新创建）数据的唯一标识符，最直接的选项似乎是[MD5](http://www.postgresql.org/docs/9.1/static/functions-string.html)哈希，它包含在 Posgresql 中（不需要额外的库）并且非常有效并且 - 为此场景安全。

pgcrypto[模块](http://www.postgresql.org/docs/9.2/static/pgcrypto.html)提供了额外的散列算法，例如 SHA1。

当然，您需要断言要散列的数据是唯一的。

# c# - 将标签文本显示为警告消息并在几秒钟后将其隐藏？

> ID：15951689
> 
> 赞同：19
> 
> 时间：2013-04-11T14:40:05.813
> 
> 标签：c#, .net, winforms

我有验证用户是否是管理员的按钮。如果当前登录的用户不是管理员，则标签将显示为警告消息，然后在几秒钟后隐藏。我尝试在警告消息之后使用`lblWarning.Hide();`and `lblWarning.Dispose();`，但问题是，它甚至在显示警告消息之前就隐藏了消息。这是我的代码。

```
private void button6_Click(object sender, EventArgs e)
{
    if (txtLog.Text=="administrator")
    {
        Dialog();
    }

    else
    {
       lblWarning.Text = "This action is for administrator only.";
       lblWarning.Hide();
    }

} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T14:45:49.687

你会想用`Timer`. 你可能会实现这样的事情：

```
var t = new Timer();
t.Interval = 3000; // it will Tick in 3 seconds
t.Tick += (s, e) =>
{
    lblWarning.Hide();
    t.Stop();
};
t.Start(); 
```

而不是这个：

```
lblWarning.Hide(); 
```

因此，如果您希望它可见超过 3 秒，那么只需花费您想要的时间并将其乘以 1000，因为`Interval`它以毫秒为单位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-04T13:43:42.503

如果您在 2020 年使用 UWP XAML，并且您的 msgSaved 标签是 TextBlock，则可以使用以下代码：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromSeconds(2);
msgSaved.Visibility = Visibility.Visible;
timer.Tick += (s, en) => {
        msgSaved.Visibility = Visibility.Collapsed;
        timer.Stop(); // Stop the timer
    };
timer.Start(); // Starts the timer. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:12:12.720

当然你可以只使用 Thread.Sleep

```
lblWarning.Text = "This action is for administrator only.";
System.Threading.Thread.Sleep(5000);
lblWarning.Hide(); 
```

其中 5000 = 您要暂停/等待/睡眠的毫秒数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T18:27:02.193

以下解决方案适用于 wpf 应用程序。当您启动计时器时，将启动一个单独的线程。要从该线程更新 UI，您必须使用 dispatch 方法。请阅读代码中的注释并相应地使用代码。必需的标头

> 使用 System.Timers；

```
private void DisplayWarning(String message, int Interval = 3000)
    {
        Timer timer = new Timer();
        timer.Interval = Interval;
        lblWarning.Dispatcher.Invoke(new Action(() => lblWarning.Content = message));
        lblWarning.Dispatcher.Invoke(new Action(() => lblWarning.Visibility = Visibility.Visible));

        // above two line sets the visibility and shows the message and interval elapses hide the visibility of the label. Elapsed will we called after Start() method.

        timer.Elapsed += (s, en) => {
            lblWarning.Dispatcher.Invoke(new Action(() => lblWarning.Visibility = Visibility.Hidden));
            timer.Stop(); // Stop the timer(otherwise keeps on calling)
        };
        timer.Start(); // Starts the timer. 
    } 
```

用法 ：

```
DisplayWarning("Warning message"); // from your code 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-16T16:29:09.273

此功能在标签上显示特定持续时间的特定味精，包括文本样式

```
public void show_MSG(string msg, Color color, int d)
    {
        this.Label.Visible = true;
        this.Label.Text = msg;
        this.Label.ForeColor = color;
        Timer timer = new Timer();
        timer.Interval = d;
        timer.Tick += (object sender, EventArgs e) =>
        {
            this.Label.Visible = false;
        }; timer.Start();

    } 
```

# java - 事件派发线程

> ID：15951692
> 
> 赞同：0
> 
> 时间：2013-04-11T14:40:21.313
> 
> 标签：java, swing, event-dispatch-thread, invokelater, eventqueue

事件调度线程和任何普通线程（如主线程）在创建摆动组件和处理事件方面有什么区别，事件调度线程在主线程上的特点是什么

通过编码，这两段代码有什么区别：

```
 public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
   } 
```

* * *

```
 public static void main(String args[]) {
     new NewJFrame().setVisible(true);
   } 
```

EDT 做了哪些主线程或任何其他普通线程无法完成的工作？

# c# - 在我的查询构建器中添加多个（非硬编码）方面

> ID：15951696
> 
> 赞同：1
> 
> 时间：2013-04-11T14:40:30.680
> 
> 标签：c#, elasticsearch, faceted-search, plainelastic.net

我对 Elastic Search 和我在 C# 中使用的 Elastic Search API 很陌生：[PlainElastic.Net](https://github.com/Yegoroff/PlainElastic.Net)。

我有一个简单的请求，但我坚持下去：如何在我的查询构建器中添加多个（非硬编码）方面？

```
//code has been simplified 

//list of fields I want to be added in my facet part of the querybuilder
List<string> FacetFields = new List<string>{"field1", "field2", "fieldN"};

//qb is already instantiated with a simple ES query 
//I want now to add facets definition

qb.Facets(_facets =>
    FacetFields.ForEach(_ff => 
        _facets.Terms(t => t
           .FacetName("FacetsFor" + _ff)
           .Field(_ff)
        );
    });
); 
```

这不编译，错误是：

> 无法将 lambda 表达式转换为委托类型“ `System.Func<PlainElastic.Net.Queries.Facets<MyType>,PlainElastic.Net.Queries.Facets<MyType>>`”，因为块的某些返回类型不能隐式转换为返回类型委托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:48:23.850

我不是 C# 的人，但与我的 Ruby 代码相比，我认为你的东西是由内而外的。

目的是让最终的 JSON 看起来像

```
"facets" : {
  "facet_name1" : { "terms" : {"field" : "tags"} }
  "facet_name2" : { "terms" : {"field" : "user"} }
} 
```

查看您的代码，您的结果可能是术语位于每个子句之外，其中包含方面名称。如果那是代码实际在做的事情，那是不正确的。

如果您有办法查看库生成的 JSON 或查询后来自 elasticsearch 的输出，那么您肯定能够看到 ES 接收到的查询是什么样的，我认为这对于调试我自己的查询至关重要。

在每个命名的面内，您也可以添加额外的过滤，但首先让简单的情况起作用，一个面，然后是两个，然后是更复杂的过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:26:07.777

这个编译错误的原因是`List<T>.ForEach()`返回`void`和`qb.Facets()`期望类型的结果`Facets<MyType>`。

所以你的代码应该是这样的：

```
List<string> FacetFields = new List<string>{"field1", "field2", "fieldN"};

qb.Facets(_facets => {
    FacetFields.ForEach(_ffield => 
        _facets.Terms(t => t
           .FacetName("FacetsFor" + _ffield)
           .Field(_ffield)
        )
    );
    // Return configured _facets as expected by qb.Facets
    return _facets;
});

// Get generated JSON
string jsonQuery = qb.BuildBeautified(); 
```

# html - 添加到 HTML 页面的文本框

> ID：15951701
> 
> 赞同：0
> 
> 时间：2013-04-11T14:40:42.440
> 
> 标签：html, textbox

我正在尝试创建一个文本框，当输入它时会自动在框下方添加该文本。我知道这听起来有点毫无意义，但我真的需要这个并且无法弄清楚如何做到这一点。我将不胜感激所有帮助。我遇到过

```
**HTML**

<input name="name" id="name" />
**jQuery**

$("#name").change(function() {
$("#idOfPElementWhichYouWantToEdit").text($(this).val());
}); 
```

但它对我不起作用，我已经尝试过了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:44:33.853

您的代码按预期运行（请参阅此[jsFiddle](http://jsfiddle.net/mTtV4/)）。

给你一些提示。使用 DOM 元素时，请确保将 jQuery 代码包装在[`DOMReady`](http://api.jquery.com/ready/)事件周围。您可以`$(function() { });`按如下方式使用快捷方式：

```
$(function() {  
    $("#name").change(function() {
        $("#idOfPElementWhichYouWantToEdit").text($(this).val());
    });
}); 
```

您还应该被告知`change()`仅在`input`元素模糊（即失去焦点）时触发。对于“实时”更改，请考虑使用[`keyup()`](http://api.jquery.com/keyup/)如下：

```
$(function() {  
    $("#name").keyup(function() {
        $("#idOfPElementWhichYouWantToEdit").text($(this).val());
    });
}); 
```

你可以在这个[jsFiddle看到上面的操作](http://jsfiddle.net/mTtV4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:44:10.300

不要使用`change`事件，而是尝试`keyUp`输入事件。

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

在输入失去焦点之前不会触发更改事件，这就是为什么它不会随您而更新的原因。

# azure - 我的服务器没有在 azure 上部署最新的 git 代码

> ID：15951702
> 
> 赞同：2
> 
> 时间：2013-04-11T14:40:44.990
> 
> 标签：azure

我的服务器没有在 azure 上部署最新的 git 代码。我也检查了 web.config 文件——它只是没有获取最新的代码。在过去的 3 个月里，它一直运行良好。

地址是 pastg.azurewebsites.net

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:20:10.100

尝试以下方法，看看是否有帮助：

*   转到该站点的仪表板
*   单击“删除 git 存储库”
*   单击“从源代码管理设置部署”并重新设置连接

您没有在问题中指定它，但我假设您正在链接到 github？

# javascript - 为backbone.js创建和定义基础视图

> ID：15951704
> 
> 赞同：2
> 
> 时间：2013-04-11T14:40:54.683
> 
> 标签：javascript, backbone.js, underscore.js, extend

我正在尝试扩展主干视图以添加布局“骨架”的基本实现。这将用于使用不同的组件拼凑一个页面。下面列出的问题是所有嵌套对象布局部分的范围更改。我可以为所有这些指向相同范围的闭包创建闭包，还是仅限于单个对象层？也许我想错了？

```
 define(['backbone', 'underscore'
], function (backbone, _) {
    var base = backbone.View.extend({});

    _.extend(base.prototype, {
        sections: {
            head: {},
            body: {
                nav: {},
                main: {
                    header: {
                        title: "",
                        description: "",
                        inner_html: function () {
                            return this.render().el
                        },
                        menu_items: [],
                        changed: false,
                        scripts: function () { }
                    },
                    content: {
                        title: "",
                        description: "",
                        inner_html: function () {
                            return this.render().el
                        },
                        scripts: function () { }
                    },
                    buttons: {
                        items: [], // { id: "save", value: "Save" }, { id: "edit", value: "Edit" }
                        changed: false,
                        scripts: function () { }
                    }
                },
                footer: {}
            }
        }
    });

    return base;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:48:25.723

这看起来很像 Marionette 的布局视图和区域。你可能不需要自己写这个。我经常使用 Marionette 的 Layout、Regions 和专用视图，而没有 App 和 Module 部分。

# javascript - 延迟运行一个函数 3 秒？

> ID：15951708
> 
> 赞同：1
> 
> 时间：2013-04-11T14:41:04.807
> 
> 标签：javascript, jquery, sharepoint-2010, sharepoint-designer

我希望延迟运行此功能 3 秒：

```
<script type="text/javascript">
$('#FormsPageID table tr:nth-child(12) td:nth-child(2) div span span input')
  .on('focus', function(){
      var $this = $(this);
      if($this.val() == '4/11/2013'){
          $this.val('');
      }
  })
  .on('blur', function(){
      var $this = $(this);
      if($this.val() == ''){
          $this.val('4/11/2013');
      }
  });
</script> 
```

我遇到的所有示例都涉及在 X 秒后使用 setTimeout 或显示元素。但我不确定这将如何适用于我的职能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:42:24.837

使用 setTimeout ：

```
setTimeout(function(){$('#FormsPageID table tr:nth-child(12) td:nth-child(2) div span span input')
 .on('focus', function(){
      var $this = $(this);
      if($this.val() == '4/11/2013'){
          $this.val('');
      }
  })
  .on('blur', function(){
      var $this = $(this);
      if($this.val() == ''){
          $this.val('4/11/2013');
      }
  });}, 3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:42:55.823

您需要使用[setTimeout()](http://www.w3schools.com/jsref/met_win_settimeout.asp)因为它被触发一次，另一方面[setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)被触发，直到调用清除间隔。

**[现场演示](http://jsfiddle.net/sWrjE/)**

```
$('#FormsPageID table tr:nth-child(12) td:nth-child(2) div span span input')
   .on('focus', function(){
    var $this = $(this);
    if($this.val() == '4/11/2013'){
       setTimeout(function(){ 
             $this.val('4/11/2013');
       }, 3000); 
     }
}).on('blur', function(){
      var $this = $(this);
      if($this.val() == ''){
          setTimeout(function(){ 
             $this.val('4/11/2013');
          }, 3000); 
      }
}); 
```

**设置超时**

> setTimeout() 方法在指定的毫秒数后调用函数或计算表达式。

**设置间隔**

> setInterval() 方法以指定的时间间隔（以毫秒为单位）调用函数或计算表达式。
> 
> setInterval() 方法将继续调用该函数，直到调用 clearInterval() 或关闭窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:49:28.920

JQuery 有自己的 .delay() 函数。对于文档：[http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

尽管我无法为自己的 atm 进行测试。这可能会给你一个小想法，如何实现这一点。

```
<script type="text/javascript">
$('#FormsPageID table tr:nth-child(12) td:nth-child(2) div span span input').delay(3000).focus(function () { 
    var $this = $(this);
    if($this.val() == '4/11/2013'){
        $this.val('');
    }
  }).delay(3000).blur(function() {
    var $this = $(this);
    if($this.val() == ''){
        $this.val('4/11/2013');
    }
  });
</script> 
```

# google-app-engine - 从应用引擎端点提供 blob

> ID：15951709
> 
> 赞同：5
> 
> 时间：2013-04-11T14:41:07.083
> 
> 标签：google-app-engine, google-cloud-endpoints, google-eclipse-plugin, gae-eclipse-plugin

我想从我的 google 端点服务器向 android 应用程序提供 blob；不是指向 blob 的链接，而是实际的 blob。我是否必须在 Base64 中对 blob 进行编码才能从端点发送它，还是由应用引擎处理？

请不要将此问题与从前端发送图像到后端的反向路径混淆。我想从服务器发送到客户端。我需要对 blob 进行编码还是 app-engine 会处理它？哦，我正在使用Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:12:06.523

不，您不必在 Base64 中编码 blob。您可以在要返回的对象中包含一个包含字节数组的字段。编组将由 Cloud Endpoints 层为您处理。

# python - 如何从 Python 中的 scipy 中的链接/距离矩阵计算集群分配？

> ID：15951711
> 
> 赞同：24
> 
> 时间：2013-04-11T14:41:10.927
> 
> 标签：python, numpy, scipy, cluster-analysis

如果你在 Python 的 scipy 中有这个层次聚类调用：

```
from scipy.cluster.hierarchy import linkage
# dist_matrix is long form distance matrix
linkage_matrix = linkage(squareform(dist_matrix), linkage_method) 
```

那么从这个到集群分配的单个点的有效方法是什么？即一个长度向量，`N`其中`N`是点数，其中每个条目`i`是点的簇数`i`，给定由给定阈值`thresh`在结果聚类上生成的簇数？

澄清一下：集群编号将是它在对树应用阈值后所在的集群。在这种情况下，您将为所在集群的每个叶节点获得一个唯一的集群。在每个点属于一个“最具体的集群”的意义上，这是由您切割树状图的阈值定义的。

我知道这`scipy.cluster.hierarchy.fclusterdata`会给你这个集群分配作为它的返回值，但我是从定制的距离矩阵和距离度量开始的，所以我不能使用`fclusterdata`. 问题归结为：我如何计算`fclusterdata`正在计算的内容——集群分配？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-15T19:18:18.137

如果我理解正确，那就是[fcluster](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.fcluster.html#scipy.cluster.hierarchy.fcluster)的作用：

> `scipy.cluster.hierarchy.fcluster(Z, t, criterion='inconsistent', depth=2, R=None, monocrit=None)`
> 
> 从由链接矩阵 Z 定义的层次聚类形成平面聚类。
> 
> ...
> 
> 返回： 一个长度为 n 的数组。T[i] 是原始观测值 i 所属的平面簇数。

所以只要打电话`fcluster(linkage_matrix, t)`，`t`你的门槛在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-02T16:28:38.943

如果您想查看每个集群级别的成员以及它们的聚集顺序，请参阅[https://stackoverflow.com/a/43170608/5728789](https://stackoverflow.com/a/43170608/5728789)

# c# - 修改现有的访问控制条目

> ID：15951712
> 
> 赞同：1
> 
> 时间：2013-04-11T14:41:11.223
> 
> 标签：c#, .net, windows

**我在 FileSystemRights 解释中犯了一个逻辑错误，这导致它始终应用读取权限，无论输入什么其他内容。**

我正在制作一个 ps cmdlet，它旨在提供用户名列表并修改与用户同名的文件夹的权限。根据我的测试，此脚本将为用户创建新的特殊 acl 条目以允许或拒绝条目，但是如果条目已存在，它将不会修改该条目。即，如果用户已经具有读访问权限并且我尝试授予写访问权限，则它不会更改条目。我不确定如何在不完全删除旧权限的情况下修改现有权限。

```
 DirectoryInfo diDirInfo = new DirectoryInfo(FolderName);
        DirectorySecurity dsDirSecurity = diDirInfo.GetAccessControl();

       //These just interpet the objects for the rights and the allow/deny entries from the command line
        FileSystemRights FSR = genFSR();
        AccessControlType ACT = genAct();

        dsDirSecurity.AddAccessRule(new FileSystemAccessRule(UserName, FSR, ACT));
        diDirInfo.SetAccessControl(dsDirSecurity); 
```

我尝试了 ModifyAccessRule 并得到了相同的行为。

```
 FileSystemAccessRule fsaRule = new FileSystemAccessRule(UserName, FSR, ACT);      
  dsDirSecurity.ModifyAccessRule(AccessControlModification.Add, fsaRule, out modified); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:49:40.530

使用`ModifyAccessRule`而不是`AddAccessRule`.

请参阅[http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.objectsecurity.modifyaccessrule.aspx](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.objectsecurity.modifyaccessrule.aspx)

# entity-framework - 具有现有数据库的实体框架

> ID：15951714
> 
> 赞同：7
> 
> 时间：2013-04-11T14:41:13.827
> 
> 标签：entity-framework

我希望在我现有的项目中实现实体框架版本 4.3.1，它不遵循这个 EF。数据库已经开发，目前正在使用应用 ado.net。在这种情况下，我如何开始使用 EF ，是数据库优先，代码优先。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T15:06:56.737

即使数据库已经存在，我仍然使用 Code First 方法，使用注释映射表，因为域比 EDMX 文件更有组织。如果有很多表，可视化 EDMX 可能会变得非常无用，因为整个设计都会因数据和连接而过度拥挤。

您可以通过两个步骤开始使用这种方法：

1）例如，创建一个域模型类，`Customer`并使用数据注释将其映射到您的表：

```
[Table("tbl_cust")]
public class Customer
{
    [Key]
    [Column("cust_id")]
    public int CustomerId { get; set; }
    [Column("cust_name")]
    public string Name { get; set; }
    // Add other properties below
 } 
```

2）创建一个上下文类，从每个模型派生`DbContext`并设置`DbSet<T>`属性，在我们的例子中我们只有一个，所以：

```
public class MyApplicationContext: DbContext
{
    public MyApplicationContext() : base("name=ConnectionStringName") { }

    public DbSet<Customer> Customers { get; set; }
} 
```

现在，您的代码中的任何地方都可以实例化派生`DbContext`类并使用 Linq 进行查询：

```
var _db = new MyApplicationContext();
var customer = _db.Customers.Where(c => c.CustomerId == 37).FirstOrDefault(); 
```

不要忘记使用 NuGet 添加对 EntityFramework 程序集的引用。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:42:52.467

由于您的数据库已经存在，显而易见的选择是数据库优先。如果数据库是按照常识设计的，它（大部分）效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:56:37.793

我认为问题是您是否想使用 EF 设计器来可视化您的数据库。由于您正在查看 EF 4.3.1（实际上您应该查看 EF5 而不是 4.3.1 - EF5 是最新版本）我假设您不关心设计器。在这种情况下，您可以使用 EF Power Tools 对数据库进行逆向工程。这将创建一组与您的数据库匹配的类。请注意，由于数据库已经创建，EF 将无法检测到您的类中的更改（与 Code First 创建的数据库相反，当附加信息存储在数据库中并且 EF 能够判断模型是否已更改时）。请务必阅读这篇[博文](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)- 它包含许多您可能会发现有助于做出决定的细节。如果您关心能够在设计器中看到您的模型，您可以使用 VS 对数据库进行逆向工程。如果您使用 VS2012，您将默认获得 EF5 和 DBContext。与使用 Code First 的区别在于，模型不是基于您的类构建 EF 需要的模型，而是保存在作为项目一部分的 edmx 文件中（并用于为您生成代码）

# html - Doctype 导致底部边距显示在图像下方

> ID：15951715
> 
> 赞同：1
> 
> 时间：2013-04-11T14:41:14.107
> 
> 标签：html, css, doctype

这让我发疯，所以我想我会问是否有人可以解释为什么当图像放置在具有背景颜色的 div/cell 内时，为什么在图像下方添加了狭窄的底部边距。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html>
<head>
<title>Problem</title>
</head>

<style type="text/css">
.color_table {
    background-color: #8c0067;
    width: 200px;
    align: center;
}
.color_div {
    background-color: #8c0067;
    width: 200px;
}
</style>

<body>

<table>
<tr>
<td class="color_table">
<img src="http://www.gravatar.com/avatar/4253171452772bb013319698f2ddbfc4?s=128&d=identicon&r=PG">
</td>
</tr>
</table>

<hr>

<div class="color_div">
<img src="http://www.gravatar.com/avatar/4253171452772bb013319698f2ddbfc4?s=128&d=identicon&r=PG">
</div>

</body>
</html> 
```

如果我删除 doctype 行 div 和 td 按我的预期工作，即图像下方不会出现边距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:51:39.660

**解决方案**

```
/* place in your css or between <style> */
img {
   vertical-align: top;   
} 
```

**为什么是这样？**

将文本放在图像旁边后，您将看到问题。由于字母 yg j，线条的间距越来越大。这就是为什么你在图像上有空间。

**在这个例子中你明白我的意思**

[http://jsfiddle.net/UrxmN/2/](http://jsfiddle.net/UrxmN/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T12:01:24.057

我遇到了页面在页面底部显示填充的问题

```
img { display:block ; } 
```

上面写在css文件中解决了我的问题。希望这对其他人有帮助

# ios - “在捆绑包 NSBundle 中找不到名为 'MainStoryboard' 的故事板”

> ID：15951716
> 
> 赞同：5
> 
> 时间：2013-04-11T14:41:17.323
> 
> 标签：ios, objective-c, xcode

我已经在一个应用程序上工作了很长时间，突然我得到了这个：

> “在捆绑包 NSBundle 中找不到名为 'MainStoryboard' 的故事板”

我已经在 StackOverflow 上标记了类似的问题，我尝试了所有方法，包括： - 重命名情节提要文件 - 重新添加情节提要文件 - 清理项目 - 在模拟器上重置内容和设置

我还检查了 plist 文件和 Copy Bundle Resources，情节提要名称应如此。这没有任何作用。

我正在和朋友一起开发应用程序，我们正在使用 Git。奇怪的是，同样的版本对他来说效果很好。

但是，在 Copy Bundle Resources 中，MainStoryboard.storyboard 和 InfoPlist.strings 是红色的。但他们已经红了很长时间，没有任何麻烦。而我的朋友（项目工作正常）他们也是红色的。

![在此处输入图像描述](https://i.stack.imgur.com/Lu9Ad.png)

想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T14:45:07.473

我建议检查此文件是否未本地化（没有实际本地化），以删除本地化并重新添加文件。

如果这不起作用，您是否尝试过从 Git 克隆项目的新副本？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T16:43:11.393

对于它的价值，我刚刚在 Xcode 5 中的一个新项目中遇到了这个问题，试图将部署目标设置回 5.0。空的实用程序应用程序在 iOS 6+ 上的模拟器上可以正常启动，但在 iOS 5.0/5.1 上会因上述警告而崩溃。

在 Project Navigator 和 File Inspector 选项卡中选择故事板，我发现“English”图标很简单且未选中。我检查了它：

![在此处输入图像描述](https://i.stack.imgur.com/Xq42p.png)

然后单击“可本地化的字符串”，我收到警报： ![在此处输入图像描述](https://i.stack.imgur.com/PqHJi.png)

转换后，文件检查器如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/5dF1v.png)

并且应用程序不再崩溃。Project Navigator 现在同时显示 Base 和 English 故事板：

![在此处输入图像描述](https://i.stack.imgur.com/O66Dq.png)

我将留给更有知识的人来解释这里发生了什么以及丢失“可本地化字符串”以支持故事板扩散的后果是什么......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T14:59:08.333

*   从位于 XCode 左侧面板的项目下选择**MainStoryboard.storyboard**
*   单击XCode 右侧的**文件检查器。**
*   **选中Target Membership**下的*Project Target*复选框。
***   *对infoplist.strings*执行相同的操作**   清理项目并运行它。***

 *****或者**

*   从**复制捆绑资源中删除文件**
*   **通过单击+**号添加这两个文件。
*   清理项目并运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-22T05:38:46.350

1.  转到您的应用程序中的构建阶段。
2.  点击“**复制捆绑资源**”
3.  如果不是单击底部的“ **+ ”图标，则找到您的主故事板文件，然后将您的主故事板文件添加到其中。**
4.  现在再次运行该项目。***

# solr - solr join 用例（不是 in 而不是 in）

> ID：15951719
> 
> 赞同：1
> 
> 时间：2013-04-11T14:41:23.077
> 
> 标签：solr

Solr 从版本 4 开始实现 !join 查询。

我想知道以下情况是否可能。
例如，我们有以下形式的文档：
doc1:
    field1:123
    field2:A
    field3:456

doc2:
    field1:123
    field2:B
    field3:789

doc3:
    field1:23456
    field2:A
    field3:264

我们需要检索字段 field2 等于 B 的所有文档，并且没有其他具有相同字段 field1 值的文档包含字段 field2 的值为 A。

在 SQL 中，这可以通过“not in”操作来完成：
select * from doc where field2 = 'B' and field1 not in (select field1 from doc where field2 = 'A')

连接运算符等效于 SQL in 运算符。

我们可以使用 solr join 或其他函数来实现我们的需求吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T15:28:58.550

为此，您需要使用[嵌套查询](https://lucidworks.com/blog/nested-queries-in-solr/)。这是相同的问题和答案：

[https://stackoverflow.com/a/27191274/4304116](https://stackoverflow.com/a/27191274/4304116)

这是您的示例的查询：

```
q=-_query_:"{!join from=doc_id to=id}field2:'A'" 
```

它将返回 field2 没有“A”值的所有文档。

您也可以添加到 q 另一个条件（如果您只需要“B”值）：

```
q={!join from=doc_id to=id}field2:'B'" 
```

它将返回 field2 的所有具有“B”值的文档。

# python - 如何重新调整 defaultdict(list)s - Python

> ID：15951721
> 
> 赞同：0
> 
> 时间：2013-04-11T14:41:26.507
> 
> 标签：python, list, map, tuples, defaultdict

我需要一个 defaultdict 可以`finaldict`从第一个文件中获取给定的查询词列表。

最终的 dict 是两个文件中共享相同 ID 的一对单词的字典。例如`foo, oof`共享相同的`1243`ID `1453`。是为了方便后面的词对搜索，当我尝试搜索时`('foo','oof')`，它会返回`['1243','1453']`。如果我在 finaldict 中搜索`('foo','duh')`，它不会返回任何内容，因为 wordpair 不共享任何相同的 ID。

```
query = ['foo','barbar']

finaldict = defaultdict(list)

finaldict = {('foo','oof'):['1243','1453']
('foo','rabrab'):['2323']
('barbar','duh'):['6452']} 
```

我一直在这样做，但**有没有更简单的方法来实现`finaldict`？**

```
query = ['foo','barbar']
from collections import defaultdict

dict1 = defaultdict(list)
dict2 = defaultdict(list)

dict1['foo'] = ['1234','1453','2323']; 
dict1['bar'] =['5230']; dict1['barbar'] =['6452']

dict2['1243']=['oof']
dict2['1453']=['oof']
dict2['4239']=['rba']
dict2['2323']=['rabrab']
dict2['6452']=['duh']

tt = defaultdict(defaultdict)
for p in sorted(query):
  for ss in sorted(dict1[p]):
    if len(dict2[ss]) != 0 and dict2[ss] != None:
      tt[p][ss] = dict2[ss]

finaldict = defaultdict(set)

for src in tt:
  for ss in tt[src]:
    for trg in tt[src][ss]:
      finaldict[(src, trg)].add(ss)

print finaldict[('foo','oof')] 
```

上面的代码输出：

```
>>> print finaldict[('foo','oof')]
set(['1453'])
>>> for i in finaldict:
...     print i, finaldict[i]
... 
('foo', 'rabrab') set(['2323'])
('barbar', 'duh') set(['6452'])
('foo', 'oof') set(['1453']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:02:48.263

```
{(k1,v):k2 for k1 in dict1 for k2 in dict2 
           for v in dict2[k2] if k2 in dict1[k1]} 
```

{('barbar', 'duh'): '6452', ('foo', 'oof'): '1453', ('foo', 'rabrab'): '2323'}

# umbraco - 在 Umbraco 中为添加/编辑/删除/搜索功能创建条目表单

> ID：15951723
> 
> 赞同：0
> 
> 时间：2013-04-11T14:41:38.307
> 
> 标签：umbraco

这被反复问了很多次，但是我找不到适合我的问题的解决方案。

我想创建一个包含以下元素的条目表：

文本框、下拉字段（自动填充）、复选框、单选按钮

经过我的研究

我发现我需要为上述表单创建用户控件或脚本文件并通过宏访问它。

我不想使用用户控制，因为我的首选是控制器视图模型（即 cshtml）

我想按照 MVC 方法来创建上面的表单。所以

1) 我需要为添加/编辑/删除/搜索数据输入表单创建一个单独的项目吗？2）或者我需要为相同的创建cshtml文件（对这种方法不太清楚）

我正在寻找这个更易于定制的数据输入表单，我也可以在其他应用程序中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:56:14.290

从 Umbraco 4.10 到 6.0.x，您可以在 Umbraco 中使用 MVC，因此无需使用用户控件。您可能想要使用[SurfaceController](http://our.umbraco.org/documentation/Reference/Mvc/surface-controllers)来添加您想要的任何操作。其余的是标准 MVC（用于构建文本框、下拉菜单等的 Razor 视图）。

查看[Umbraco MVC 文档](http://our.umbraco.org/documentation/reference/mvc/)，其中解释了如何在 Umbraco 项目中使用 MVC。

# file-io - 什么是用来打开文件扩展名 .bp2 的？

> ID：15951725
> 
> 赞同：-3
> 
> 时间：2013-04-11T14:41:42.290
> 
> 标签：file-io

全名是文件名.tp2.bp2。我似乎找不到任何好的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:47:16.310

谷歌搜索`.bp2`，第一个结果是这样的

[http://www.allfileextensions.net/site/extension/how-do-i-open-a-bp2.html](http://www.allfileextensions.net/site/extension/how-do-i-open-a-bp2.html)

AutoCAD 2013 打开它

# excel - excel表格中应该只有一个标题

> ID：15951726
> 
> 赞同：1
> 
> 时间：2013-04-11T14:41:47.377
> 
> 标签：excel, vba

![在此处输入图像描述](https://i.stack.imgur.com/8YDwW.png)

我必须格式化一个excel表。它包含多个空行，在几行之后重复。新的 vb 脚本和这种类型的 excel 工作。我怎样才能做到这一点。有人可以帮我对此进行宏编码吗？？？这是快照

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T19:47:14.013

我会用 for/next 循环处理一个项目。您可以获得报告中的总行数，以便知道何时停止寻找要格式化的内容。您可以使用 if 和 end if 语句在循环中进行任何类型的测试。这是一个更改第一列中任何数据格式的示例。

```
Option Explicit
Sub Format_Report()

Dim Nbr_of_Sheets As Integer
Dim LastLine_Data As Long
Dim Loop_Ctr As Long
Dim LastLine_Plug_Code As Long

Application.ScreenUpdating = False

Nbr_of_Sheets = ActiveWorkbook.Sheets.Count

Sheet1.Select  ' Always select sheet 1 no matter what the name
Range("A1").Select
LastLine_Data = Cells(Rows.Count, "A").End(xlUp).Row
For Loop_Ctr = 1 To LastLine_Data
    If Cells(Loop_Ctr, 1).Value <> "" Then

        With Cells(Loop_Ctr, 1)
            .Font.Bold = True
            .Font.Name = "Arial Black"
            .Font.Size = 14
        End With

    End If
Next Loop_Ctr
Application.ScreenUpdating = True

End Sub 
```

# c++ - 如何查找有关包含的问题 - 可视化包含树

> ID：15951728
> 
> 赞同：3
> 
> 时间：2013-04-11T14:41:49.607
> 
> 标签：c++, c, visual-studio, include

**设想**

有时我会在系统头文件中遇到编译器错误。目前例如：

> c:\Programme\Microsoft Visual Studio 9.0\VC\ce\include\streambuf(55)：错误 C2143：语法错误：在 'string' 之前缺少 ')'

与往常一样，这是一条错误的错误消息，当然我的代码中存在问题。但是，编译器无法告诉我哪里疼。所以我一直在寻找通常的嫌疑人，例如某些头文件中的“使用命名空间XXX”或类似的东西。

我的问题是，我什至不知道文件 streambuf 是通过哪种方式包含到我的代码中的。至少我不直接包含它。

**具体问题**

有没有办法获得某种“包含树”？就像是

```
myClass.cpp
  + myClass.h
    + ios
      ...
      + streambuf 
```

所以我将能够更好地确定错误位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:50:58.160

我通常使用

```
cl /c /P /d1PP file.cpp 
```

这将创建一个`file.i`. 这是经过预处理的文件——它包含所有已处理的标头，即如果标头的特定部分在 ifdef 下，并且您尚未定义该内容，则它将不包含该块。/d1PP（我认为未记录）还向您展示了宏的实际定义位置。您还将看到谁包含`streambuf`在您的代码中以及在什么时候。

然后我编译`file.i`为

```
cl /c /Tp file.i (or cl /c /Tc file.i - if it's C and not C++) 
```

对于可视化，试试这个 - [http://www.codeproject.com/Articles/3478/Include-File-Hierarchy-Viewer](http://www.codeproject.com/Articles/3478/Include-File-Hierarchy-Viewer)

# java - Quartz Scheduler - 在作业之间仅更新 JobDataMap

> ID：15951731
> 
> 赞同：4
> 
> 时间：2013-04-11T14:41:51.803
> 
> 标签：java, quartz-scheduler

我有一个 Quartz Job，我可以用一些 Cron Trigger 来安排它。

```
ReportSchedule reportSchedule = ... // my object
JobDetail jobDetail = new JobDetail(reportSchedule.getScheduleName(), 
                                    reportSchedule.getScheduleGroup(),
                                    ExtendedReportJob.class /* my job */);

jobDetail.getJobDataMap().put("reportSchedule", reportSchedule);
jobDetail.setDescription(reportSchedule.getScheduleDescription());
CronTrigger trigger = ...; // depends on the report schedule 

scheduler.scheduleJob(jobDetail, trigger); 
```

此代码成功地将作业和详细信息写入**数据库**。

该`reportSchedule`对象包含作业所需的特定参数。但是，我可能想更改参数。

我可以做到这一点

```
scheduler.deleteJob(name, group);
scheduler.scheduleJob(jobDetail, trigger); 
// where jobDetail.getJobDataMap() has the updated reportSchedule 
```

但是，这样做会立即触发作业，因为触发取决于报告计划，我不想更改它（我想保留原始日期）。所以我的问题是：有没有办法在不改变工作的情况下修改工作之间的`JobDetail`或？`JobDataMap``Trigger`

我正在使用石英 1.6.0。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T18:22:19.973

解决方案很简单，只需要知道 API。

该类`Scheduler`具有以下方法

```
Scheduler#addJob(JobDetail, boolean); 
```

如果参数设置为，则传递的`JobDetail`将覆盖前一个。`boolean``true`

所以

```
// name and group are the primary key of the job detail
final JobDetail jobDetail = new JobDetail(name, group, ExtendedReportJob.class);

// reportSchedule is the object I've previously modified
jobDetail.getJobDataMap().put(ORStatics.REPORT_SCHEDULE, reportSchedule);
jobDetail.setDescription(reportSchedule.getScheduleDescription());

// overwrite the previous job, however retaining the triggers       
scheduler.addJob(jobDetail, true); 
```

将更新持久存储中的作业详细信息。由于包含 的表的主键`JobDetail`将保持不变，因此我们不需要更改触发器。他们仍将按计划执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:37:02.803

如何获取触发器`getTrigger(String triggerName, String triggerGroup)`并将其存储在变量中。然后用你的新 jobDataMap 创建一个新工作并使用旧触发器？

# ios - UITextField.text 属性返回 nil

> ID：15951737
> 
> 赞同：0
> 
> 时间：2013-04-11T14:42:10.307
> 
> 标签：ios, xcode, textbox, null, uitextfield

我有这个代码：（nomEquipo 是一个 UITextField 类变量）

```
nomEquipo = [[UITextField alloc] initWithFrame: CGRectMake(5, yPosition, modificar.frame.size.width - 10, 30)];
[nomEquipo setPlaceholder: @"Nombre del equipo"];
[nomEquipo setBorderStyle: UITextBorderStyleRoundedRect];
[nomEquipo setAutocorrectionType: UITextAutocorrectionTypeNo];
[nomEquipo setReturnKeyType: UIReturnKeyDone];
[nomEquipo addTarget: self action: @selector(ocultarTeclado:) forControlEvents: UIControlEventTouchUpInside];
[modificar addSubview: nomEquipo]; 
```

然后在其他方法中：

```
- (IBAction) crearEquipoReal:(id)sender
{
    NSLog(@"%@",nomEquipo.text);
    if ([nomEquipo.text length] == 0)
    {
        UIAlertView *alerta = [[UIAlertView alloc] initWithTitle: @"Aviso"
                                                         message: @"Debe introducir al menos el nombre del equipo"
                                                        delegate: self
                                               cancelButtonTitle:@"Aceptar"
                                               otherButtonTitles:nil, nil];
        [alerta show];
    }
} 
```

这个 NSLog 返回：

```
2013-04-11 15:40:10.184 GeoRuta_v1[7157:907] (null) 
```

我在 UITextFields 中放置文本的代码：

```
-(void)didChangeComboBoxValue:(AJComboBox *)comboBox selectedIndex:(NSInteger)selectedIndex
{
    if (comboBox == self.combo)
    {
        equipoActual = (Equipo *) [listaEquipos objectAtIndex: selectedIndex];
        nomEquipoActual = equipoActual.nombreEquipo
        user.idEquipo = equipoActual.idEquipo;
    }
    else if (comboBox == self.equiposMod)
    {
        Equipo *aux = (Equipo *) [listaEquiposMod objectAtIndex: selectedIndex];
        user.idEquipo = aux.idEquipo;
        descEquipo2.text = aux.descEquipo;
        nomEquipo2.text = aux.nombreEquipo;
    }
} 
```

当它突然发生时，我感到惊讶，它已经工作了 2 天，我对其进行了编程。

谢谢你的帮助。

**EDIT1：** * [FIX] 我用 2 UITextField 修复，因为我生成了`nomEquipo`两次 .... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:44:54.470

nomEquipo 指针很可能引用了 nil，这就是您看到 (null) 的原因。Nil 对象可以接收选择器，它们只会返回 nil。

在代码执行之前，您应该在控制台中使用断点和“po nomEquipo”调试代码。

# php - MySQL中的组合主键

> ID：15951739
> 
> 赞同：0
> 
> 时间：2013-04-11T14:42:18.103
> 
> 标签：php, mysql, primary-key, composite-primary-key

这可能听起来有点愚蠢 - 但我想设置以下场景：

```
ClientID,AdvertID  
  1,1  
  2,1  
  3,1  
  2,2  
  2,3  
  1,2 
```

因此，ClientID 和 AdvertID 都必须是主键，但只有 AdvertID 是自动递增的。AdvertID 必须重新启动与其链接到的 ClientID 相关的编号。此外，ClientID 也将是一个外键。

到目前为止，我所做的只是在 PHPMyAdmin 中创建表时创建了一个组合主键，但这只是继续自动增量值，而不考虑实际的 clientID

有人知道怎么做这个吗？我知道这是可能的，我以前见过。我只是不知道它是怎么做到的。

提前致谢！

PS：为了清楚起见，这是针对 MySQL v5.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:48:39.410

```
LOCK TABLES tbl WRITE;

select AdvertID from tbl where ClientID = :c_id //save the number somewhere

insert into tbl (ClientID, AdvertID) value (:c_id, :saved_ad_id+1)

UNLOCK TABLES 
```

首先，获得对表的独占写入权限（只是为了确保避免竞争条件）

然后，搜索您的客户当前的广告值，如果需要将 null 转换为 0，然后将其增加 +1

第三步，将情侣存入数据库

最后，解锁表。

不需要自动递增字段，因为此表中没有真正的自动递增字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:45:07.420

据我所知，您无法设计一个结构来处理值何时应根据其父键重新开始递增。每当收到新的 ClientID 时，它取决于您的服务器端逻辑（在您的情况下为 PHP）制作相关案例，从头开始填充 AdvertID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:48:38.530

我唯一能想到的是一个插入前触发器，它为你的键执行自动计数逻辑。

# ios - 如何将图像从 AVCapture 裁剪为显示器上看到的矩形

> ID：15951746
> 
> 赞同：46
> 
> 时间：2013-04-11T14:42:40.950
> 
> 标签：ios, avcapturesession

这让我发疯，因为我无法让它工作。我有以下情况：

我正在使用 an`AVCaptureSession`和 an`AVCaptureVideoPreviewLayer`创建自己的相机界面。界面显示一个矩形。下面是`AVCaptureVideoPreviewLayer`填满整个屏幕的。

我希望以某种方式裁剪捕获的图像，以使生成的图像准确地显示在显示器上的矩形中看到的内容。

我的设置如下所示：

```
_session = [[AVCaptureSession alloc] init];
AVCaptureSession *session = _session;
session.sessionPreset = AVCaptureSessionPresetPhoto;

AVCaptureDevice *camera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if (camera == nil) {
    [self showImagePicker];
    _isSetup = YES;
    return;
}
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

captureVideoPreviewLayer.frame = self.liveCapturePlaceholderView.bounds;
[self.liveCapturePlaceholderView.layer addSublayer:captureVideoPreviewLayer];

NSError *error;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:camera error:&error];
if (error) {
    HGAlertViewWrapper *av = [[HGAlertViewWrapper alloc] initWithTitle:kFailedConnectingToCameraAlertViewTitle message:kFailedConnectingToCameraAlertViewMessage cancelButtonTitle:kFailedConnectingToCameraAlertViewCancelButtonTitle otherButtonTitles:@[kFailedConnectingToCameraAlertViewRetryButtonTitle]];
    [av showWithBlock:^(NSString *buttonTitle){
        if ([buttonTitle isEqualToString:kFailedConnectingToCameraAlertViewCancelButtonTitle]) {
            [self.delegate gloameCameraViewControllerDidCancel:self];
        }
        else {
            [self setupAVSession];
        }
    }];
}
[session addInput:input];

NSDictionary *options = @{ AVVideoCodecKey : AVVideoCodecJPEG };
_stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
[_stillImageOutput setOutputSettings:options];

[session addOutput:_stillImageOutput];

[session startRunning];
_isSetup = YES; 
```

我正在捕捉这样的图像：

```
[_stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     if (error) {
         MWLogDebug(@"Error capturing image from camera. %@, %@", error, [error userInfo]);
         _capturePreviewLayer.connection.enabled = YES;
     }
     else
     {
         NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
         UIImage *image = [[UIImage alloc] initWithData:imageData];

         CGRect cropRect = [self createCropRectForImage:image];
         UIImage *croppedImage;// = [self cropImage:image toRect:cropRect];
         UIGraphicsBeginImageContext(cropRect.size);
         [image drawAtPoint:CGPointMake(-cropRect.origin.x, -cropRect.origin.y)];
         croppedImage = UIGraphicsGetImageFromCurrentImageContext();
         UIGraphicsEndImageContext();
         self.capturedImage = croppedImage;
         [_session stopRunning];             
     }
 }]; 
```

在该`createCropRectForImage:`方法中，我尝试了各种方法来计算要从图像中切出的矩形，但到目前为止还没有成功。

```
- (CGRect)createCropRectForImage:(UIImage *)image
{
    CGPoint maskTopLeftCorner = CGPointMake(self.maskRectView.frame.origin.x, self.maskRectView.frame.origin.y);
    CGPoint maskBottomRightCorner = CGPointMake(self.maskRectView.frame.origin.x + self.maskRectView.frame.size.width, self.maskRectView.frame.origin.y + self.maskRectView.frame.size.height);

    CGPoint maskTopLeftCornerInLayerCoords = [_capturePreviewLayer convertPoint:maskTopLeftCorner fromLayer:self.maskRectView.layer.superlayer];
    CGPoint maskBottomRightCornerInLayerCoords = [_capturePreviewLayer convertPoint:maskBottomRightCorner fromLayer:self.maskRectView.layer.superlayer];
    CGPoint maskTopLeftCornerInDeviceCoords = [_capturePreviewLayer captureDevicePointOfInterestForPoint:maskTopLeftCornerInLayerCoords];
    CGPoint maskBottomRightCornerInDeviceCoords = [_capturePreviewLayer captureDevicePointOfInterestForPoint:maskBottomRightCornerInLayerCoords];

    float x = maskTopLeftCornerInDeviceCoords.x * image.size.width;
    float y = (1 - maskTopLeftCornerInDeviceCoords.y) * image.size.height;
    float width = fabsf(maskTopLeftCornerInDeviceCoords.x - maskBottomRightCornerInDeviceCoords.x) * image.size.width;
    float height = fabsf(maskTopLeftCornerInDeviceCoords.y - maskBottomRightCornerInDeviceCoords.y) * image.size.height;

    return CGRectMake(x, y, width, height);
} 
```

那是我目前的版本，但甚至没有得到正确的比例。有人可以帮帮我吗！

我也尝试过使用这种方法来裁剪我的图像：

```
- (UIImage*)cropImage:(UIImage*)originalImage toRect:(CGRect)rect{

    CGImageRef imageRef = CGImageCreateWithImageInRect([originalImage CGImage], rect);

    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);
    CGColorSpaceRef colorSpaceInfo = CGImageGetColorSpace(imageRef);
    CGContextRef bitmap = CGBitmapContextCreate(NULL, rect.size.width, rect.size.height, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

    if (originalImage.imageOrientation == UIImageOrientationLeft) {
        CGContextRotateCTM (bitmap, radians(90));
        CGContextTranslateCTM (bitmap, 0, -rect.size.height);

    } else if (originalImage.imageOrientation == UIImageOrientationRight) {
        CGContextRotateCTM (bitmap, radians(-90));
        CGContextTranslateCTM (bitmap, -rect.size.width, 0);

    } else if (originalImage.imageOrientation == UIImageOrientationUp) {
        // NOTHING
    } else if (originalImage.imageOrientation == UIImageOrientationDown) {
        CGContextTranslateCTM (bitmap, rect.size.width, rect.size.height);
        CGContextRotateCTM (bitmap, radians(-180.));
    }

    CGContextDrawImage(bitmap, CGRectMake(0, 0, rect.size.width, rect.size.height), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);

    UIImage *resultImage=[UIImage imageWithCGImage:ref];
    CGImageRelease(imageRef);
    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return resultImage;
} 
```

有没有人有方法的“正确组合”来完成这项工作？:)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2017-01-01T20:16:14.570

在斯威夫特 3 中：

```
private func cropToPreviewLayer(originalImage: UIImage) -> UIImage {
    let outputRect = previewLayer.metadataOutputRectConverted(fromLayerRect: previewLayer.bounds)
    var cgImage = originalImage.cgImage!
    let width = CGFloat(cgImage.width)
    let height = CGFloat(cgImage.height)
    let cropRect = CGRect(x: outputRect.origin.x * width, y: outputRect.origin.y * height, width: outputRect.size.width * width, height: outputRect.size.height * height)

    cgImage = cgImage.cropping(to: cropRect)!
    let croppedUIImage = UIImage(cgImage: cgImage, scale: 1.0, orientation: originalImage.imageOrientation)

    return croppedUIImage
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-07-08T10:21:45.420

我已经通过使用`metadataOutputRectOfInterestForRect`函数解决了这个问题。

它适用于任何方向。

```
[_stillImageOutput captureStillImageAsynchronouslyFromConnection:stillImageConnection
                                               completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error)
 {
     if (error)
     {
         [_delegate cameraView:self error:@"Take picture failed"];
     }
     else
     {

         NSData *jpegData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
         UIImage *takenImage = [UIImage imageWithData:jpegData];

         CGRect outputRect = [_previewLayer metadataOutputRectOfInterestForRect:_previewLayer.bounds];
         CGImageRef takenCGImage = takenImage.CGImage;
         size_t width = CGImageGetWidth(takenCGImage);
         size_t height = CGImageGetHeight(takenCGImage);
         CGRect cropRect = CGRectMake(outputRect.origin.x * width, outputRect.origin.y * height, outputRect.size.width * width, outputRect.size.height * height);

         CGImageRef cropCGImage = CGImageCreateWithImageInRect(takenCGImage, cropRect);
         takenImage = [UIImage imageWithCGImage:cropCGImage scale:1 orientation:takenImage.imageOrientation];
         CGImageRelease(cropCGImage);

     }
 }
 ]; 
```

takenImage 仍然是`imageOrientation`依赖图像。您可以删除方向信息以进行进一步的图像处理。

```
UIGraphicsBeginImageContext(takenImage.size);
[takenImage drawAtPoint:CGPointZero];
takenImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-22T19:19:45.287

在**斯威夫特 4**中：

我更喜欢*从不*强制解包以避免崩溃，所以我使用选项和`guards`在我的。

```
private func cropToPreviewLayer(originalImage: UIImage) -> UIImage? {
    guard let cgImage = originalImage.cgImage else { return nil }

    let outputRect = previewLayer.metadataOutputRectConverted(fromLayerRect: previewLayer.bounds)

    let width = CGFloat(cgImage.width)
    let height = CGFloat(cgImage.height)
    let cropRect = CGRect(x: outputRect.origin.x * width, y: outputRect.origin.y * height, width: outputRect.size.width * width, height: outputRect.size.height * height)

    if let croppedCGImage = cgImage.cropping(to: cropRect) {
        return UIImage(cgImage: croppedCGImage, scale: 1.0, orientation: originalImage.imageOrientation)
    }

    return nil
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T17:50:18.327

AVMakeRectWithAspectRatioInsideRect 这个 api 来自 AVFoundation，它将返回给定裁剪大小的图像的裁剪区域。

# python - pydot 和 graphviz 错误：无法导入 dot_parser，无法加载 dot 文件

> ID：15951748
> 
> 赞同：107
> 
> 时间：2013-04-11T14:42:43.840
> 
> 标签：python, python-2.7, graphviz, pydot

当我用 pydot 运行一个非常简单的代码时

```
import pydot
graph = pydot.Dot(graph_type='graph')

for i in range(3):

  edge = pydot.Edge("king", "lord%d" % i)
  graph.add_edge(edge)

vassal_num = 0
for i in range(3):
  for j in range(2):
    edge = pydot.Edge("lord%d" % i, "vassal%d" % vassal_num)
    graph.add_edge(edge)
    vassal_num += 1

graph.write_png('example1_graph.png') 
```

它向我打印错误消息：

```
Couldn't import dot_parser, loading of dot files will not be possible. 
```

我正在使用 python 2.7.3

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-07-27T22:07:48.033

回答`pydot >= 1.1`：

(upstream) 的不兼容问题`pydot`已由[6dff94b3f1 修复](https://github.com/erocarrera/pydot/commit/6dff94b3f1dbcf68e5a83ce17a36b098c06d7c6b)，因此`pydot >= 1.1`将[与`pyparsing >= 1.5.7`](https://github.com/erocarrera/pydot/commit/e26af21426fcf15955f7b11b348b14dc6bd5178c).

* * *

答案适用于`pydot <= 1.0.28`：

对于遇到此问题的任何其他人，这是由于 pyparsing 从 1.x 到 2.x 版本的变化。要使用 pip 安装 pydot，首先安装旧版本的 pyparsing：

```
pip install pyparsing==1.5.7
pip install pydot==1.0.28 
```

如果您没有安装`pyparsing`using `pip`，而是使用`setup.py`了 ，请查看此[解决方案](https://stackoverflow.com/questions/1550226/python-setup-py-uninstall)以卸载软件包。谢谢@qtips。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-01-31T20:22:33.910

pip repo 中有一个名为 pydot2 的新包，它与 pyparsing2 一起正常工作。我无法降级我的包，因为 matplotlib 依赖于较新的 pyparsing 包。

注意：来自 macports 的 python2.7

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-31T11:49:44.407

pydot 使用了来自 pyparsing 的私有模块变量（_noncomma）。下面的差异修复了它以用于 pyparsing 2.0.1：

```
diff --git a/dot_parser.py b/dot_parser.py
index dedd61a..138d152 100644
--- a/dot_parser.py
+++ b/dot_parser.py
@@ -25,8 +25,9 @@ from pyparsing import __version__ as pyparsing_version
 from pyparsing import ( nestedExpr, Literal, CaselessLiteral, Word, Upcase, OneOrMore, ZeroOrMore,
     Forward, NotAny, delimitedList, oneOf, Group, Optional, Combine, alphas, nums,
     restOfLine, cStyleComment, nums, alphanums, printables, empty, quotedString,
-    ParseException, ParseResults, CharsNotIn, _noncomma, dblQuotedString, QuotedString, ParserElement )
+    ParseException, ParseResults, CharsNotIn, dblQuotedString, QuotedString, ParserElement )

+_noncomma = "".join( [ c for c in printables if c != "," ] )

 class P_AttrList: 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-30T16:53:53.023

我分叉了 pydot 存储库 [1]，应用了 Gabi Davar 补丁和一些更改以支持 python-3。该软件包在 PyPI [2] 中可用。

干杯

*   [1] [https://pypi.python.org/pypi/pydot2/1.0.32](https://pypi.python.org/pypi/pydot2/1.0.32)
*   [2] [https://pypi.python.org/pypi/pydot2](https://pypi.python.org/pypi/pydot2)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-06-29T05:04:32.947

`$ sudo pip uninstall pydot`

`$ sudo pip install pydot2`

请参阅以下链接：http: [//infidea.net/troubleshooting-couldnt-import-dot_parser-loading-of-dot-files-will-not-be-possible/](http://infidea.net/troubleshooting-couldnt-import-dot_parser-loading-of-dot-files-will-not-be-possible/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-11T15:29:29.163

解决方案不是从某个地方安装 pydot，而是从官方 ubuntu 存储库安装“python-pydot”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-17T20:05:12.327

现在至少还有两个版本似乎支持 PyParsing-2 和 Python-3：

*   [Carlos Jenkins的](https://github.com/carlos-jenkins/pydotplus)[PyDotPlus](https://pypi.python.org/pypi/pydotplus)带有一个不错的 travis buildbot 和精美的[文档](http://pydotplus.readthedocs.org/)。但是，您需要将其文件夹名称从 更改`site-packages\pydotplus`为`site-packages\pydot`以使其与导入 pydot 的现有程序一起使用。
*   [pydot3k](https://pypi.python.org/pypi/pydot3k)由[bmcorser 提供](https://bitbucket.org/bmcorser/pydot3k/overview)。**可悲的是，没有工作！**
*   [James Mills 的prologic/pydot](https://bitbucket.org/prologic/pydot)从官方 pydot Google 代码页链接到 ...

    > Python 3 兼容性的一个分支

*   这是 David Villa 的 pydot2 的工作链接，可以正常工作： [https://pypi.python.org/pypi/pydot2/1.0.32](https://pypi.python.org/pypi/pydot2/1.0.32)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-28T02:57:37.537

我又遇到了问题，我的上述解决方案不起作用。如果这对您来说是正确的，并且您也在使用 El Capitan 的 Mac 上使用 Anaconda，请尝试以下操作：

```
conda install --channel https://conda.anaconda.org/RMG graphviz`
conda install --channel https://conda.anaconda.org/RMG pydot 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-09-15T21:23:25.787

经过我在这里看到的这么多尝试后我最后做了什么（它适用于 networkx 的伪序列）：

```
apt-get remove python-pydot
pip install pydotplus
apt-get install libcgraph6
apt-get install python-pygraphviz

# pip freeze | grep pydot
 pydotplus==2.0.2
# pip freeze | grep pyparsing
pyparsing==2.2.0
# pip freeze | grep graphviz
pygraphviz==1.2
# python -c 'import pydotplus'
# 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-10T01:29:17.347

这对我有用（Mac OS X 10.9 和 Python 2.7.10 在 Anaconda 上）：

```
conda uninstall pydot 
```

然后，

```
conda install pydot 
```

然后在 pydot 安装后将 Pyparsing 降级（从 2.x 到 1.5.7）。未来的 Google 员工：这让我能够正确安装和导入 Theano。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-14T14:58:09.080

在 OSX Mavericks 上，以下方法成功了……我遇到了同样的错误，但在底部也有人抱怨 graphviz 可执行文件不存在……我认为问题是我在其他模块之前安装了 graphviz？

```
brew uninstall graphviz
brew install graphviz 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-28T05:25:37.387

当其他解决方案不起作用时，这是解决问题的一种快速而肮脏的方法：

此示例来自 Ubuntu 16.04 上的 python 2.7。

编辑文件 python2.7/site-packages/keras/utils/visualize_util.py 并注释下面的代码段。

```
if not pydot.find_graphviz():
    raise ImportError('Failed to import pydot. You must install pydot'
                      ' and graphviz for `pydotprint` to work.') 
```

find_graphviz() 在较新版本的 pydot 上是多余的，上面的调用不起作用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-12-24T11:49:33.610

我也遇到了这个问题，我的 pydot==1.0.28 而 pyparsing==2.2.0\. 我通过从谷歌下载最新的 pydot 1.2.3(tar.gz) 解决了这个问题，然后离线安装。当我在 ubuntu 14.04 中更新 pydot 时，它说 pydot 1.0.28 是最新版本。因此我从谷歌下载了 1.2.3 版本。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-04-14T08:42:19.553

您需要将 pyparsing 从 2.x 版本降级到 1.5.7 版本才能使 pydot 正常工作。

对于 win-64，使用 Conda，这对我有用：

```
conda install -c https://conda.anaconda.org/Trentonoliphant pyparsing=1.5.7 
```

然后我禁用/卸载了 2.x 版本并在我的脚本中重新加载了 pyparsing：

```
pyparsing = reload(pyparsing)
pydot = reload(pydot) 
```

要检查您是否运行了正确的版本：

```
print pyparsing.__version__ 
```

# java - Jtidy过滤器似乎没有被调用

> ID：15951749
> 
> 赞同：0
> 
> 时间：2013-04-11T14:42:50.003
> 
> 标签：java, servlets, jboss7.x, servlet-filters, jtidy

我正在尝试在一个非常简单的 hello world Struts 项目上测试 Jtidy 过滤器。

我正在关注[过去在这里给出的其他答案](https://stackoverflow.com/questions/2671138/how-can-you-strip-html-comments-out-of-a-page-generated-with-jsp-jstl)。

在部署或访问 JSP 期间我没有收到任何错误。但似乎过滤器什么也没做。即没有从创建的 html 中删除 html 注释。

Struts 过滤器似乎工作正常.. 因为我的 Action 类被调用了。

这是我的 web.xml：

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

  <display-name>Struts 2 Web Application</display-name>

  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>

    <filter>
        <filter-name>JTidyFilter</filter-name>
        <filter-class>org.w3c.tidy.servlet.filter.JTidyFilter</filter-class>

        <init-param>
            <param-name>config</param-name>
            <param-value>indent: auto; indent-spaces: 2; hide-comments: true</param-value>
        </init-param>
    </filter>

  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

    <filter-mapping>
        <filter-name>JTidyFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

我在这里可能做错了什么？如果我没有得到任何异常，我怎样才能知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:53:49.063

首先，我必须更改过滤器的执行顺序，以便最后调用 Jtidy 过滤器（在 Struts 过滤器完成其工作之后）：

**新的 web.xml：**

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

  <display-name>Struts 2 Web Application</display-name>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher </filter-class>
    </filter>

    <filter>
        <filter-name>JTidyFilter</filter-name>
        <filter-class>org.w3c.tidy.servlet.filter.JTidyFilter</filter-class>

        <init-param>
            <param-name>config</param-name>
            <param-value>indent: auto; indent-spaces: 2; hide-comments: true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>JTidyFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

其次，我必须在类路径上不仅有`jtidyservlet`jar，还有`jtidy`jar（没有后者，编译正常，但我会`java.lang.ClassNotFoundException: org.w3c.tidy.TidyMessageListener`在运行时得到一个）。

**在我的 pom.xml 中：**

```
<dependency>
    <groupId>jtidy</groupId>
    <artifactId>jtidyservlet</artifactId>
    <version>r8-SNAPSHOT</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>jtidy</artifactId>
    <version>r8-21122004</version>
</dependency> 
```

我还必须`jtidyservlet`手动将 jar 添加到我的本地 maven 存储库中：

1.  下载地址：http `jtidyservlet-r8-SNAPSHOT.jar`: [//jtidy.sourceforge.net/nightly/](http://jtidy.sourceforge.net/nightly/)

2.  把它放进去`C:\TEMP`

3.  从命令行运行：

`SET LOCAL_JARS=C:\TEMP`

`mvn install:install-file -DgroupId=jtidy -DartifactId=jtidyservlet -Dversion=r8-SNAPSHOT -Dpackaging=jar -Dfile=%LOCAL_JARS%\jtidyservlet-r8-SNAPSHOT.jar -DgeneratePom=true`

# ios - 用于组织 UIViewController 转换的设计模式

> ID：15951757
> 
> 赞同：0
> 
> 时间：2013-04-11T14:43:09.943
> 
> 标签：ios, objective-c, design-patterns

我试图想出一种好方法来组织 UIViewControllers 之间的转换，从而从控制器本身中删除逻辑。我根据我喜欢的 Pro ObjC 设计模式一书提出了一个模式，但我想知道如何改进它。

简而言之，模式。原谅半伪代码。

我对 UINavigation 控制器进行了子类化，并创建了一个所有视图控制器在需要转换时调用的方法。

```
-(void)requestViewChangeByObject:(id)object withData:(object*)someData{

    if ([object isKindOfClass:[ViewController1 class]]) {
        [self showViewController2Animated:YES withSomeData:nil];    
    }

    if ([object isKindOfClass:[ViewController2 class]]) {
        [self showViewController3Animated:YES withSomeData:someData];
    }

    if...
} 
```

然后我只是为每个控制器定义了方法。有些只是实例化并推送控制器和一些设置属性或传递信息。

```
-(void)showViewController2Animated:(BOOL)animated withSomeData:(object*)someDataVariable{

    viewController2 *VC2 = [viewController2 defaultViewController];
    [self pushViewController:VC2 animated:animated];
}

-(void)showViewController3Animated:(BOOL)animated withSomeData:(object*)someDataVariable{

    viewController3 *VC3 = [ViewController3 defaultViewController];
    VC3.someData = someDataVariable 
    [self pushViewController:VC3 animated:animated];
} 
```

我这样做的原因是因为它使应用程序在改变控制器顺序和随着设计和需求的变化添加/删除控制器方面更加灵活。我们还倾向于重复使用应用程序，这使得重新设计和重组以构建新应用程序变得更加容易。

我遇到的主要问题是应用程序越复杂，所有 if 语句的方法就越大。如果请求来自 viewController3，那么如果涉及的逻辑不仅仅是推送 viewController2，它可能会让人感到困惑。我真的很想知道如何改进它，以便它更灵活并且不太可能引起混乱和错误。

其次，当您将传递数据添加到问题中时，它不是很灵活。我最终取出了接受数据对象的参数，并创建了一个单独的单例管理器对象来处理保存/获取我需要的数据，我知道这不是好的设计。但是，当我尝试在 Apple 建议的控制器之间来回传递数据时（即在控制器上设置属性，如上面的代码），它变得一团糟，我觉得有更好的方法来做到这一点。

因此，对此的任何建议将不胜感激。

# ios - 使用 GCD 线程更新在 For 循环中加载的图像 - iOS

> ID：15951762
> 
> 赞同：0
> 
> 时间：2013-04-11T14:43:27.083
> 
> 标签：ios, xcode, multithreading, grand-central-dispatch

我有以下 For 循环，它遍历 NSMutableArray 并调用 setImage 方法：

```
//Code to iterate through pictures and create ImageView class for each one.
for (int i =0; i<=[pictureThumbnailArray count]-1; i++) {
    NSLog(@"Thumbnail count is %d", [pictureThumbnailArray count]);
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^(void) {
    [self setImage:[pictureThumbnailArray objectAtIndex:i]:i];
                   });
} 
```

setImage 方法在图片上设置各种参数，最后添加到主线程的子视图中：

```
dispatch_sync(dispatch_get_main_queue(), ^(void) {
        [self.view addSubview:onePicture];
        }); 
```

问题是图像随机出现在屏幕上，而不是按顺序加载。任何人都可以建议我如何改善这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:01:11.863

[全局后台队列](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_get_global_queue)是并发的，而不是串行的，这意味着它不保证排序。您可以创建一个自定义串行队列：

```
dispatch_queue_t queue = dispatch_queue_create("com.example.MyQueue", NULL); 
```

并在你的`dispatch_async`.

# c++ - 如何使用 C++ 在 Visual Studio 2012 中为 Windows 商店应用程序创建添加程序

> ID：15951763
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:43:32.920
> 
> 标签：c++, visual-studio-2012

我正在尝试在 Visual Basic 中使用 C++ 制作一个简单的添加 Windows 商店应用程序。

1）我添加了 3 个文本框，（1 代表第 1 个，第 2 个代表第 2 个，第 3 个代表显示加法结果。）。

2）我添加了一个按钮，单击该按钮会添加两个文本框的数据并显示在结果中。

所以我想在文本框中从用户那里获取输入，当单击添加按钮时，结果显示在 Result(3rd) 文本框中。

如何将 num1.text 和 num2.text 转换为整数并添加？

这是我的 XAML 代码：

```
<Page
    x:Class="winstore_c__1stapp.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:winstore_c__1stapp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <TextBlock HorizontalAlignment="Left" Margin="534,179,0,0" TextWrapping="Wrap" Text="Addition" VerticalAlignment="Top" Height="77" Width="438" FontSize="24"/>

        <TextBox x:Name="num1" HorizontalAlignment="Left" Margin="301,301,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="195" AcceptsReturn="True" TextChanged="num1_TextChanged"/>

        <TextBlock HorizontalAlignment="Left" Margin="153,301,0,0" TextWrapping="Wrap" Text="1st Number" VerticalAlignment="Top" Height="32" Width="114" FontSize="14"/>

        <TextBlock HorizontalAlignment="Left" Margin="684,301,0,0" TextWrapping="Wrap" Text="2nd number" VerticalAlignment="Top" Height="32" Width="114"/>

        <TextBox x:Name="num2" HorizontalAlignment="Left" Margin="803,301,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="195"/>

        <TextBlock HorizontalAlignment="Left" Margin="210,529,0,0" TextWrapping="Wrap" Text="Addition is:-" VerticalAlignment="Top" Height="43" Width="116" FontSize="20"/>

        <TextBox x:Name="num3" HorizontalAlignment="Left" Margin="358,529,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="306" TextChanged="c_TextChanged"/>

        <Button x:Name="mybutton" Content="Click to ADD" HorizontalAlignment="Left" Margin="522,421,0,0" VerticalAlignment="Top" Click="Button_Click_1" Width="153"/>

</Grid>
</Page> 
```

这种从用户那里获取输入并对其进行操作的问题对于像我这样的初学者来说非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:45:34.693

你需要做这样的事情：

```
int firstNumber = Int32.TryParse(num1.Text, 0);
int secondNumber = Int32.TryParse(num2.Text, 0);
num3.Text = (firstNumber + secondNumber).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:48:43.677

你可以使用`std::istringstream`：

```
std::istringstream inp(num1.text);
int value;
inp >> value; 
```

还有其他用于将文本转换为数字的功能。在 Web 和 StackOverflow 上搜索“C++ 转换文本编号”。

# android - 从视频文件创建缩略图返回空位图

> ID：15951766
> 
> 赞同：7
> 
> 时间：2013-04-11T14:43:41.210
> 
> 标签：android, android-camera, video-thumbnails

我发送了启动摄像机的意图

```
PackageManager pm = getPackageManager();
    if(pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)){
            Intent video = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
            File tempDir= new File(Environment.getExternalStoragePublicDirectory(
                      Environment.DIRECTORY_PICTURES), "BCA");
            if(!tempDir.exists())
            {
                if(!tempDir.mkdir()){
                    Toast.makeText(this, "Please check SD card! Image shot is impossible!", Toast.LENGTH_SHORT).show();
                }
            }

                String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss",Locale.US).format(new Date());
                File mediaFile = new File(tempDir.getPath() + File.separator +
                "VIDEO_"+ timeStamp + ".mp4");
                Uri videoUri = Uri.fromFile(mediaFile);
                video.putExtra(MediaStore.EXTRA_OUTPUT, videoUri);
                video.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
                startActivityForResult(video, VIDEO_REQUEST);

    }else{
        Toast.makeText(this, "This device does not have a rear facing camera",Toast.LENGTH_SHORT).show();
    } 
```

我拍摄了一个视频，它被正确存储，当`onActivityResult`被解雇时，我使用意图获取`uri`其存储位置以创建位图

这是 uri 的一个例子`file:///storage/emulated/0/Pictures/BCA/VIDEO_20131227_145043.mp4`

```
 Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(intent.getDataString(), MediaStore.Video.Thumbnails.MICRO_KIND); 
```

但位图每次都是空的。因此，由于文档说`May return null if the video is corrupt or the format is not supported`我检查了目录中的视频，并且它播放良好，而且它的`.mp4`文件受支持，所以我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-30T20:30:18.160

您可以尝试[MediaMetadataRetriever](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)或[FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever)。这是一个例子：

```
FFmpegMediaMetadataRetriever mmr = new FFmpegMediaMetadataRetriever();
mmr.setDataSource(intent.getDataString());
Bitmap b = mmr.getFrameAtTime();
mmr.release(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-30T10:06:41.923

我记得，`filePath`来自[createVideoThumbnail](http://developer.android.com/reference/android/media/ThumbnailUtils.html#createVideoThumbnail%28java.lang.String,%20int%29)的参数应该是经典文件路径，而不是`URI`.

```
...

Uri videoUri = intent.getData();
final String realFilePath = getRealPathFromUri();
Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(realFilePath, MediaStore.Video.Thumbnails.MICRO_KIND);
...

public String getRealPathFromURI(final Uri contentURI) {
    Cursor cursor = getContentResolver().query(contentURI, null, null, null, null);
    if (cursor == null) { // Source is Dropbox or other similar local file path
        return contentURI.getPath();
    } else {
        cursor.moveToFirst();
        int idx = cursor.getColumnIndex(MediaStore.MediaColumns.DATA);
        if ( idx == -1 ) {
            return contentURI.getPath();
        }
        String rvalue =  cursor.getString(idx);
        cursor.close();
        return rvalue;
    }
} 
```

**编辑：**

基于 的源代码`createVideoThumbnail`，我创建了另一个实现：

```
public static Bitmap createVideoThumbnail(Context context, Uri uri, int kind) {
    Bitmap bitmap = null;
    MediaMetadataRetriever retriever = new MediaMetadataRetriever();
    try {
        retriever.setMode(MediaMetadataRetriever.MODE_CAPTURE_FRAME_ONLY);
        retriever.setDataSource(context, uri);
        bitmap = retriever.captureFrame();
    } catch (IllegalArgumentException ex) {
        // Assume this is a corrupt video file
    } catch (RuntimeException ex) {
        // Assume this is a corrupt video file.
    } finally {
        try {
            retriever.release();
        } catch (RuntimeException ex) {
            // Ignore failures while cleaning up.
        }
    }
    if (kind == Images.Thumbnails.MICRO_KIND && bitmap != null) {
        bitmap = ThumbnailUtils.extractThumbnail(bitmap,
                ThumbnailUtils.TARGET_SIZE_MICRO_THUMBNAIL,
                ThumbnailUtils.TARGET_SIZE_MICRO_THUMBNAIL,
                ThumbnailUtils.OPTIONS_RECYCLE_INPUT);
    }
    return bitmap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-15T17:20:22.780

Use this file "mediaFile" and convert it into URI

```
 Uri uri=Uri.fromFile(mediaFile); 
```

Then pass that URI in the below method. This is working fine at my side.

```
Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(uri.getPath(), MediaStore.Video.Thumbnails.MICRO_KIND); 
```

Hope this will help you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T19:32:06.640

我遇到了这个问题并以这种方式解决了它：

1.  创建为您找到文件路径的[FileUtils](https://gist.github.com/AmirHadifar/11a591ed8c1add1e0f68)类（我找不到该类的引用，所以我创建了一个要点）

    ```
    String correctedUri = FileUtils.getPath(mContext, Uri.parse(localUri)); 
    ```

2.  使用以下代码

    ```
    Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(correctedUri, MediaStore.Video.Thumbnails.MICRO_KIND); 
    ```

**已编辑：** 请参阅[此](https://stackoverflow.com/questions/1334694/android-is-it-possible-to-display-video-thumbnails/34082262#34082262)解决方案，它具有更好的性能和更容易。

# php - 漂亮的 URL 重写后显示的文件扩展名

> ID：15951770
> 
> 赞同：2
> 
> 时间：2013-04-11T14:43:54.197
> 
> 标签：php, apache, mod-rewrite, apache2

我有一个这样的重写规则：

```
RewriteRule ^listings/?(.*)$ listings.php?slug=$1 [L] 
```

我会有像“site.com/listings/Awesome-Place-Or-Thing”这样的网址。我想`slug`为这个 URL 包含“Awesome-Place-Or-Thing”。使用当前规则，我得到：

```
var_dump($_GET);

'slug' => string '.php/Awesome-Place-Or-Thing' 
```

如何摆脱“.php/”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:42:43.480

这是凌乱的解决方案

```
RewriteRule ^listings/?\.php/(.*)$ listings.php?slug=$1 [L] 
```

# bash - \卷曲... | bash ...斜线是做什么用的？

> ID：15951772
> 
> 赞同：38
> 
> 时间：2013-04-11T14:44:05.143
> 
> 标签：bash, shell

查看为所有类型的项目（例如，用于 rvm）出现的魔法安装程序，您将始终看到如下命令：

```
\curl ... | bash 
```

例如

```
\curl -L https://get.rvm.io | bash -s stable 
```

我想知道为什么这些命令以斜杠开头 - 没有它它们似乎运行良好。

有什么建议么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-11T14:47:21.873

这用于调用“原始”命令，避免使用可能的别名调用它。也就是说，禁用命令上可能的别名`curl`并调整为原始别名。

如果你有

```
alias grep='grep --color=auto' 
```

然后你做`grep`，它会有颜色。因此，如果您不想要颜色，则只需编写`\grep`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-11T14:47:39.863

这是一个反斜杠

它是以该名称（或函数）而不是 ALIAS 开头的命令。

确保同时绕过**函数**和**别名**：

```
command somecommand 
```

要绕过**别名**（从而启动一个函数，或者如果没有函数，则启动该命令）：

```
\somecommand 
```

让我们看看哪个优先于哪个（我使用 bash 2.05b ... ymmv）

我将定义一个函数和一个与命令 (ls) 同名的别名：

```
$ alias ls='echo A'
$ function ls { echo B ; } 
```

使用“type -all ls”显示评估顺序：

```
$ type -all ls
ls is aliased to `echo A'
ls is a function
ls ()
{
    echo B
}
ls is /usr/bin/ls 
```

但是我们也可以通过尝试来发现：

```
$ ls
A
$ \ls
B
$ command ls
file1 file2 file3 
```

因此，优先顺序似乎是：路径中采用的**别名**-before-**函数**-before-**命令**。

当然，如果你精确的相对/绝对路径，那么它就会被强制为指向的命令：

```
$ /usr/bin/ls
file1 file2 file3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T14:47:42.780

它绕过了一个可能的别名`curl`。

# c# - 在方法名称中使用“异步”后缀是否取决于是否使用了“异步”修饰符？

> ID：15951774
> 
> 赞同：135
> 
> 时间：2013-04-11T14:44:06.300
> 
> 标签：c#, .net, async-await, naming-conventions, naming

使用“Async”为方法名称添加后缀的约定是什么？

是否应该*仅*`async`将“异步”后缀附加到使用修饰符声明的方法？

```
public async Task<bool> ConnectAsync() 
```

或者该方法只返回`Task<T>`or就足够了`Task`吗？

```
public Task<bool> ConnectAsync() 
```

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2014-07-08T08:30:14.457

我认为即使从 Microsoft 文档来看，真相也是模棱两可的：

> 在 Visual Studio 2012 和 .NET Framework 4.5 中，任何带有`async`关键字（`Async`在 Visual Basic 中）的方法都被视为异步方法，C# 和 Visual Basic 编译器执行必要的转换以使用 TAP 异步实现该方法。异步方法应该返回一个`Task`或一个`Task<TResult>`对象。

[http://msdn.microsoft.com/en-us/library/hh873177(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh873177(v=vs.110).aspx)

那已经不对了。任何方法`async`都是异步的，然后它说它应该返回一个`Task`或`Task<T>`- 这对于调用堆栈顶部的方法是不正确的，例如 Button_Click 或`async void`.

当然，你必须考虑公约的意义是什么？

您可以说`Async`后缀约定是向 API 用户传达该方法是可等待的。对于可等待的方法，它必须返回`Task`void 或`Task<T>`返回值的方法，这意味着只有后者可以以 . 为后缀`Async`。

或者您可能会说`Async`后缀约定是为了传达该方法可以立即返回，放弃当前线程以执行其他工作并可能导致竞争。

这个微软文档引用说：

> 按照惯例，您将“Async”附加到具有 Async 或 async 修饰符的方法的名称中。

[内容现在只能通过 Wayback Machine 获得](https://web.archive.org/web/20120819123954/http://msdn.microsoft.com/en-us/library/hh191443.aspx)

这甚至没有提到您自己的异步方法返回`Task`需要`Async`后缀，我认为我们都同意他们这样做。

* * *

所以这个问题的答案可能是：两者都有。在这两种情况下，您都需要使用关键字附加`Async`到方法并返回or 。`async``Task``Task<T>`

* * *

我要请 Stephen Toub 澄清情况。

**更新**

所以我做了。这是我们的好人写的：

> 如果公共方法是返回任务并且本质上是异步的（与已知始终同步执行以完成但由于某种原因仍返回任务的方法相反），它应该具有“异步”后缀。这就是指导方针。此处命名的主要目的是让功能的使用者非常清楚，被调用的方法可能不会同步完成其所有工作；当然，它也有助于同时使用同步和异步方法公开功能的情况，以便您需要名称差异来区分它们。该方法如何实现其异步实现与命名无关：是否使用 async/await 来获得编译器的帮助，或者是否直接使用 System.Threading.Tasks 中的类型和方法（例如
> 
> 当然，指南总是有例外的。在命名的情况下，最值得注意的是整个类型的存在理由是提供以异步为中心的功能，在这种情况下，在每个方法上都使用 Async 将是矫枉过正的，例如，任务本身的方法会产生其他任务.
> 
> 至于返回 void 的异步方法，不希望将它们放在公共表面区域，因为调用者无法知道异步工作何时完成。但是，如果您必须公开一个返回 void 的异步方法，您可能确实希望有一个名称来传达正在启动的异步工作，如果有意义的话，您可以在此处使用“Async”后缀。鉴于这种情况应该是多么罕见，我认为这确实是一种逐案决定。
> 
> 我希望这会有所帮助，史蒂夫

斯蒂芬开场白的简洁指导已经足够清楚了。它不包括在内`async void`，因为想要创建具有这种设计的公共 API 是不寻常的，因为实现异步 void 的正确方法是返回一个普通`Task`实例并让编译器发挥它的魔力。但是，如果您确实想要一个`public async void`，则建议附加`Async`。其他栈顶`async void`方法（例如事件处理程序）通常不是公共的，也无关紧要/合格。

对我来说，它告诉我，如果我发现自己想知道`Async`在 an 上添加后缀`async void`，我可能应该把它变成 an`async Task`以便调用者可以等待它，然后附加`Async`。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2017-12-14T10:19:45.100

我构建了很多 API 服务和其他应用程序，这些应用程序调用我的大部分代码异步运行的其他系统。

我自己遵循的经验法则是：

> 如果同时存在返回相同内容的非异步和异步方法，我将在异步方法后缀为 Async。否则不行。

**例子：**

只有一种方法：

```
public async Task<User> GetUser() { [...] } 
```

具有两个签名的相同方法：

```
public User GetUser() { [...] }

public async Task<User> GetUserAsync() { [...] } 
```

这是有道理的，因为返回的是相同的数据，但唯一不同的是*返回数据的方式*，而不是数据本身。

我还认为这种命名约定的存在是因为需要引入异步方法并仍然保持向后兼容性。

我认为新代码不应该使用 Async 后缀。这与前面提到的 String 或 Int 的返回类型一样明显。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-04-11T14:45:34.787

> 使用“异步”为方法名称添加后缀的约定是什么。

基于[任务的异步模式 (TAP)](http://msdn.microsoft.com/en-us/library/hh873175.aspx)规定方法应始终返回`Task<T>`(or `Task`) 并以*Async*后缀命名；这与`async`. 两者都`Task<bool> Connect()`可以正常编译和运行，但您不会遵循 TAP 命名约定。**`async`**`Task<bool> Connect()`

> 该方法是否应该包含`async`修饰符，或者它只返回Task就足够了？

如果方法的主体（不管返回类型或名称）包括`await`，您**必须**使用`async`; 并且编译器会告诉你“'await' 运算符只能在异步方法中使用......”。返回`Task<T>`or`Task`还不足以避免使用`async`. 有关详细信息，请参阅[异步（C# 参考）](http://msdn.microsoft.com/en-US/library/vstudio/hh156513.aspx)。

> 即这些签名中的哪一个是正确的：

两者并正确遵循 TAP 约定。您*始终*可以使用该关键字，但如果正文不使用.**`async`**`Task<bool> ConnectAsync()``Task<bool> ConnectAsync()`*`async``await`*

 ** * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-11T14:47:21.900

> 或者它只返回任务就足够了？

那。`async`关键字不是这里的真正问题。如果您在不使用`async`关键字的情况下实现异步，则该方法在一般意义上仍然是“异步”。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-17T13:56:18.327

我认为它应该使用异步后缀，如果它返回一个任务，无论该方法是否使用`async`修饰符声明。

其背后的原因是名称是在接口中声明的。该接口声明返回类型是 a `Task`。然后该接口有两个实现，一个实现使用`async`修饰符实现它，另一个不使用。

```
public interface IFoo
{
    Task FooAsync();
}

public class FooA : IFoo
{
    public Task FooAsync() { /* ... */ }
}

public class FooB : IFoo
{
    public async Task FooAsync() { /* ... */ }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-04-11T14:54:00.863

由于`Task`和`Task<T>`都是等待类型，它们代表*一些*异步操作。或者至少他们应该代表。

您应该为方法添加后缀`Async`，在某些情况下（不一定是全部），该方法不返回值，而是返回正在进行的操作的包装器。该包装器通常是 a `Task`，但在 Windows RT 上它可以是`IAsyncInfo`. 跟随您的直觉并记住，如果您的代码的用户看到该`Async`函数，他或她将知道该方法的调用与该方法的结果是分离的，并且他们需要采取相应的行动。

请注意，有些方法如`Task.Delay`and `Task.WhenAll`which return`Task`但没有`Async`后缀。

另请注意，有些`async void`方法表示*触发并忘记*异步方法，您最好注意该方法是以这种方式构建的。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-05-26T16:30:44.097

在[使用 async 和 await (C#) 进行异步编程中](https://msdn.microsoft.com/en-us/library/mt674882.aspx)，Microsoft 提供了以下指导：

> **命名约定**
> 
> 按照惯例，您将“Async”附加到具有 **async**修饰符的方法的名称中。
> 
> 您可以忽略事件、基类或接口协定建议不同名称的约定。例如，您不应该重命名常见的事件处理程序，例如`Button1_Click`.

我发现此指南不完整且令人不满意。这是否意味着在没有`async`修饰符的情况下，这个方法应该被命名`Connect`而不是`ConnectAsync`？

```
public Task<bool> ConnectAsync()
{
    return ConnectAsyncInternal();
} 
```

我不这么认为。正如@Servy 的[简明回答](https://stackoverflow.com/a/15951872/1497596)和[@Luke](https://stackoverflow.com/users/107783/luke-puplett) [Puplett](https://stackoverflow.com/users/1159478/servy)的更[详细的回答](https://stackoverflow.com/a/24627122/1497596)所示，我相信*应该*命名这个方法是合适的，并且确实期望这个方法（因为它返回一个等待）。为了进一步支持这一点，[@John Skeet](https://stackoverflow.com/users/22656/jon-skeet)在[这个](https://stackoverflow.com/a/17887084/1497596)对另一个问题的回答中将附加到方法名称，而不管修饰符是否存在。*`ConnectAsync``Async``async`*

 *最后，关于[另一个问题](https://stackoverflow.com/q/35987375/1497596)，请考虑[@Damien_The_Unbeliever](https://stackoverflow.com/users/15498/damien-the-unbeliever)的[评论](https://stackoverflow.com/questions/35987375/always-use-the-async-and-await-keywords-in-asynchronous-methods-in-a-library#comment59721767_35987375)：

> `async/await`是您的方法的*实现*细节。就您的*调用者*而言，无论您的方法是声明的`async Task Method()`还是声明的，都无关紧要。（事实上​​，您可以稍后在这两者之间自由切换，而不会被视为重大更改。）`Task Method()`

 *由此，我推断它是*方法的异步性质*决定了它应该如何命名。该方法的用户甚至不知道`async`在其实现中是否使用了修饰符（没有 C# 源代码或 CIL）。***

# javascript - 位掩码：如何确定是否只设置了一位

> ID：15951776
> 
> 赞同：15
> 
> 时间：2013-04-11T14:44:09.540
> 
> 标签：javascript, bitmask, bit-masks

如果我有一个基本的位掩码......

```
cat = 0x1;
dog = 0x2;
chicken = 0x4;
cow = 0x8;

// OMD has a chicken and a cow
onTheFarm = 0x12; 
```

...我如何检查是否只设置了一种动物（即一位）？

的值`onTheFarm`必须是 2 ^n，但我如何以编程方式检查（最好在 Javascript 中）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T14:53:24.090

您可以使用此代码计算在非负整数值中设置的位数（从[this answer](https://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer)适应JavaScript ）：

```
function countSetBits(i)
{
    i = i - ((i >> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
    return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;
} 
```

它应该比单独检查每个位更有效。但是，如果符号位设置在`i`.

编辑（全部归功于 Pointy 的评论）：

```
function isPowerOfTwo(i) {
    return i > 0 && (i & (i-1)) === 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:49:08.330

你必须一点一点地检查，功能或多或少是这样的：

```
function p2(n) {
  if (n === 0) return false;
  while (n) {
    if (n & 1 && n !== 1) return false;
    n >>= 1;
  }

  return true;
} 
```

一些 CPU 指令集包含“计数集位”操作（古老的 CDC Cyber​​ 系列就是其中之一）。它对于一些实现为位集合的数据结构很有用。如果你有一个作为整数字符串实现的集合，位位置对应于集合数据类型的元素，那么获得基数涉及对位进行计数。

*编辑*哇看着 Ted Hopp 的回答我偶然发现了这个：

```
function p2(n) {
  return n !== 0 && (n & (n - 1)) === 0;
} 
```

那是来自[这个很棒的“技巧”集合](http://aggregate.org/MAGIC/)。像这样的问题是研究数论的好理由:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:57:59.330

如果您想查看是否只设置了一个位，您可以利用[logarithms](http://www.mclph.umn.edu/mathrefresh/logs.html)，如下所示：

```
var singleAnimal = (Math.log(onTheFarm) / Math.log(2)) % 1 == 0; 
```

`Math.log(y) / Math.log(2)`找到`x`in`2^x = y`并`x % 1`告诉我们是否`x`是一个整数。`x`如果设置了一个位，则只会是整数，因此只选择了一种动物。

# java - Eclipse ADT 错误：无法运行程序 adb

> ID：15951778
> 
> 赞同：6
> 
> 时间：2013-04-11T14:44:10.847
> 
> 标签：java, android, eclipse, adb, adt

我在 Ubuntu 上，刚刚为 64 位 linux 安装了 Android SDK（“仅限 SDK”）。然后我为 Eclipse 安装了 ADT 插件。当我重新启动 Eclipse 时，它​​要求我打开 SDK 管理器并安装一些 OS SDK，因此我安装了一些开发工具和最新的（我相信是 4.2.2）Android 发行版。然后我重新启动 Eclipse 并没有收到任何错误或控制台警告。

然后我尝试打开几个 Android 视图（Heap、LogCat 等）并收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/kw9ZS.png)

这是什么，为什么我会看到它？我能做些什么来纠正它？提前致谢！

**更新：**在有问题的目录上运行`ls -l`会产生：

```
myUser@myMachine:~$ ls -l ~/sandbox/dsi/workbench/android-sdk/21.1/android-sdk-linux/platform-tools/
total 27960
-rwxrwxr-x 1 myUser myUser  1122758 Apr 11 10:29 aapt
-rwxrwxr-x 1 myUser myUser  1226659 Apr 11 10:29 adb
-rwxrwxr-x 1 myUser myUser   269818 Apr 11 10:29 aidl
drwxrwxr-x 2 myUser myUser     4096 Apr 11 10:29 api
-rwxrwxr-x 1 myUser myUser   444481 Apr 11 10:29 dexdump
-rwxrwxr-x 1 myUser myUser     2603 Apr 11 10:29 dx
-rwxrwxr-x 1 myUser myUser   176550 Apr 11 10:29 fastboot
drwxrwxr-x 2 myUser myUser     4096 Apr 11 10:29 lib
-rwxrwxr-x 1 myUser myUser 24867619 Apr 11 10:29 llvm-rs-cc
-rw-rw-r-- 1 myUser myUser   467531 Apr 11 10:29 NOTICE.txt
drwxrwxr-x 4 myUser myUser     4096 Apr 11 10:29 renderscript
-rw-rw-r-- 1 myUser myUser    16648 Apr 11 10:29 source.properties
myUser@myMachine:~$ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-19T10:05:53.867

如果您使用的是 ubuntu 13.10（可能还有其他版本 >= 12.10），您可能需要安装

```
apt-get install lib32ncurses5 lib32stdc++6 zlib1g:i386 libc6-i386 
```

反而。ia32-libs 在 13.10 上不再可用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T17:05:35.920

你的 Ubuntu 版本是多少？在ubuntu 12.04之前，必须安装ia32-libs

```
sudo apt-get install ia32-libs 
```

# android - OpenGL ES 2.0：假设混合在移动设备上相对便宜？

> ID：15951780
> 
> 赞同：0
> 
> 时间：2013-04-11T14:44:13.040
> 
> 标签：android, performance, opengl-es-2.0, blending

在所有地方，我都读到 Blending 对性能的影响是多么严重，直到我看到一条评论说，由于它们的架构，它在 iOS 设备上并没有那么昂贵。

现在，Apple 的超级控制世界与 Android 有点不同，但我已经做了一些测试，看起来我的 Blending 对性能的影响只有从 RGB555 切换到 RGBA8888 的一半（在我尝试过的两台设备上） ）。

问题：

*   是否有任何经验法则表明，虽然 Android 设备的硬件可能存在很大差异，但它们的“按屏幕分辨率计算的 GPU 计算能力”不会低于某个阈值？

*   这样的规则是否也适用于混合？

*   某处是否有一些基础测试设备列表，这是一些系统市场分析的结果？形式如下：如果它在这些设备上运行，它几乎可以在任何合理的设备上运行？

*   您是否使用混合，它给您的客户带来什么体验？

我看到了使用混合的替代方法，所以我很想知道要投资什么，或者我是否应该避免，嗯，未知数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:43:05.827

我怀疑是否有任何经验法则，同样在 Apple 世界中，明天他们可能会决定切换到其他架构，而你的所有假设都被搞砸了。对于 Android，有太多的供应商和架构来决定哪个混合阈值应该对每个都有好处。唯一的经验法则是在您真正需要时使用混合。所以你的问题的答案是：假设混合在移动设备上相对便宜是不安全的。混合需要从内存中读取，而移动设备上的内存速度很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:50:54.953

我做了一些我认为我会分享的额外研究。如果您感谢我的调查，请告诉我（点赞？），我可能会在了解更多信息时分享更多信息。

只有 1.8% 的 Android 设备运行 API 8/2.2/Froyo 之前的版本，98.2% 的 Android 设备支持 OpenGL ES 2.0（尽管 2.2 API 存在一些缺陷）。

对于支持 GLES20（给定最大时钟频率）的上述品牌的最弱芯片，我发现了以下峰值/最大值/...信息：

*   Adreno 200（每秒 2200 万个三角形，每秒 1.33 亿像素）
*   Mali-200（16 mtps，275 mpps）
*   PowerVR SGX520（7 mtps，100 mpps）
*   Tegra APX 2500（40 mtps、400 或 600 mpps，取决于来源）

根据今天我能找到的最便宜的 Android 设备使用

*   MARVELL PXA910 800MHz（10 或 20 mtps，200 mpps）

如果不需要绘制一半的三角形（通过剔除），每秒 2000 万个三角形似乎是理论上的最大值。

我发现 Marvell 区分两个峰值的事实有点可疑。也许有人应该对我在营销幻灯片和论坛上找到的 Tegra 数据持怀疑态度。另外，我有一个带有 PowerVR SGX530（14 mtps，200 mpps）的设备，它至少以与我在 1024x600 下尝试的 Tegra 2 T20 设备（71 mtps，1200 mpps）相同的速度渲染我的 800x480 屏幕的测试应用程序.

我有两台与 Tegra 2 T20 相同的设备，一台运行 Android 3 的运行我的测试应用程序比运行 Android 2 的一台运行得更快。不过，两者都运行非官方的 Android 版本。我认为这可能会导致 GPU 利用率不理想，但 CPU 负载显示为低得离谱。也许 SurfaceView 的开销开始变得显着超过一定的帧速率——但 PowerVR 设备也运行 Android 2。

到目前为止，这与 alpha 混合没有太大关系（除了我在 Nvidia 芯片上读到的，这是在片段着色器中隐式完成的），但我觉得在那里记录起点是值得的。但请继续关注更新。

# c - 在 C 中编码和解码数据

> ID：15951783
> 
> 赞同：0
> 
> 时间：2013-04-11T14:44:14.430
> 
> 标签：c, data-structures, encoding, decoding

我必须编写一个 C 程序来编码数据并将其存储到缓冲区中，以便稍后在该缓冲区上执行一些操作。我有以下结构：

```
typedef uint64_t time64;
typedef int32_t sint32;

typedef struct
{
    sint32 latitude;
    sint32 longitude;
    int16_t elevation; 
}ThreeDLocation;

typedef struct
{
    uint8_t permission_indices;
    char* data;
    time64 expiry_time;
    ThreeDLocation generation_location;
}data; 
```

我想将`data`结构编码/解码到单个缓冲区中。我认为这被称为“序列化”和“反序列化”。

谁能给我一些关于如何解决这个问题的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:04:15.570

您可以尝试将一个整数指向结构并以这种方式读出：

```
data blockdata;
int* serialdata;
int i;
int n = sizeof(data);
filldata(&blockdata);
serialdata = (int*)&blockdata;

for(i = 0; i < n; i++)
{
   globalbuffer[index++] = serialdata[i];
} 
```

不确定这是否有帮助

# sql - SQL 查询错误

> ID：15951786
> 
> 赞同：2
> 
> 时间：2013-04-11T14:44:17.993
> 
> 标签：sql, sql-server, msg

我坚持这个错误：

> 消息 8120，级别 16，状态 1，第 2 行列“Subjects.off_CODE”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我不知道这个查询有什么问题。

```
use Enlistment
go

SELECT Subjects.off_CODE, Subjects.subj_CODE, Subjects.description, 
Subjects.unit, COUNT(Enlistment.off_CODE) FROM Enlistment, Subjects
WHERE Subjects.off_CODE = 11315
GROUP BY Enlistment.off_CODE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:51:40.140

如果选择了该列，它必须出现在 GROUP BY 子句中，除非它包含在聚合函数中（就像错误消息所说的那样）。

```
use Enlistment
go

SELECT Subjects.off_CODE, Subjects.subj_CODE, Subjects.description, 
Subjects.unit, COUNT(Enlistment.off_CODE) FROM Enlistment, Subjects
WHERE Subjects.off_CODE = 11315
GROUP BY Subjects.off_CODE, Subjects.subj_CODE, Subjects.description, 
Subjects.unit 
```

因此，在您的示例中，唯一不必包含在 GROUP BY 子句中的字段是**Enlistment.off_CODE**，因为它用于聚合函数 COUNT （**COUNT(Enlistment.off_CODE)**）。所有其他字段都必须包含在 GROUP BY 子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:46:57.847

你试过这个：

```
GROUP BY Enlistment.off_CODE, Subjects.off_CODE 
```

或者

```
SELECT DISTINCT Subjects.off_CODE, Subjects.subj_CODE, Subjects.description, 
Subjects.unit, COUNT(Enlistment.off_CODE) FROM Enlistment, Subjects
WHERE Subjects.off_CODE = 11315
GROUP BY Enlistment.off_CODE, Subjects.off_CODE 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:47:17.897

您正在告诉查询对您未选择的列进行 GROUP BY。您需要确保选择 GROUP BY 字段中包含的列。

@Question3CPO 会起作用，只是它在 SELECT 语句中包含 Subjects.subj_CODE 并且可能不包含在函数中。

# class - 从 Haxe 编译 SWC 时如何排除类？

> ID：15951787
> 
> 赞同：1
> 
> 时间：2013-04-11T14:44:18.403
> 
> 标签：class, default, haxe, swc

这个问题专门针对在 FlashDevelop 中从 Haxe 创建 SWC（而不是从 AS3 代码）。

是否有编译器参数来指定一些不在 SWC 中编译的类？如果是这样，是否有可能在编译其他所有内容时摆脱“Main”、“Lib”等（默认情况下嵌入在 SWC 中的最常见的类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:13:03.700

对于 Nape，我将 swcs 编译为：

```
haxe --macro "include('nape')" --macro "include('zpp_nape')" ... 
```

没有`-main`标志，这将构建一个 .swc，其中仅包含`nape`和`zpp_nape`包中的类。

这仍将包括 haxe 标准库，但到目前为止还没有人抱怨。

# java - 如何使用 maven 对具有嵌入式码头和所有依赖项的 Spring Web 应用程序进行 tar？

> ID：15951790
> 
> 赞同：1
> 
> 时间：2013-04-11T14:44:24.630
> 
> 标签：java, spring, maven

我有一个带有嵌入式 Jetty 服务器的简单 Spring Web 应用程序，我想将它打包成一个包含所有依赖项的 tar，以便我可以使用包装器将它作为 Windows 服务器上的服务运行。我该怎么做呢？如果我需要发布任何代码，请索取。谢谢！

编辑：为澄清起见，我只是在询问如何将所有内容放在一起。我已经知道如何将它绑定到包装器中。谢谢。

Edit2：为了清楚我的应用程序是如何工作的，下面是我的应用程序上下文。我有一个 main() 函数，我希望服务包装器调用它来实例化这些 bean。

```
 <bean id="myHandler" class="my.package.MyHandler"></bean>
<bean id="server" class="org.mortbay.jetty.Server" init-method="start"
    destroy-method="stop">
    <constructor-arg value="8080" />
    <property name="handler" ref="myHandler" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:53:16.027

如果您使用的是 Maven，也许最好的办法是使用“maven-war-plugin”将您的应用程序打包成一个 WAR 文件（没有嵌入式服务器）（看看：[http ://maven.apache.org /plugins/maven-war-plugin/](http://maven.apache.org/plugins/maven-war-plugin/)）。

您将获得一个可以在任何 servlet 容器中运行的标准部署文件 (WAR)。

您还可以看看这个 Maven 插件：[http ://maven.apache.org/plugins/maven-assembly-plugin/introduction.html](http://maven.apache.org/plugins/maven-assembly-plugin/introduction.html)

# javascript - javascriptExecutor 执行后无法执行处理步骤

> ID：15951795
> 
> 赞同：1
> 
> 时间：2013-04-11T14:44:33.813
> 
> 标签：javascript, selenium, webdriver, selenium-webdriver

我想`Mouse Hover`在我的应用程序中执行一些任务。我通过使用 javascriptExecutor 做到了这一点。在进入我的应用程序之前，我尝试了一些开放的应用程序。下面是使用的代码

**使用代码**

```
try{
driver = new FirefoxDriver();  
driver.manage().window().maximize();  
driver.get("http://www.hdfcbank.com/");  
WebElement ele = driver
                .findElement(By.xpath("//li[6]/div/a"));  
String javaScript = "var evObj = document.createEvent('MouseEvents');"
            + "evObj.initMouseEvent(\"mouseover\",true, false, window, 0, 0, 0,    0, 0, false, false, false, false, 0, null);"
            + "arguments[0].dispatchEvent(evObj);";  
JavascriptExecutor js = (JavascriptExecutor) driver;  
js.executeScript(javaScript, ele);
driver.findElement(By.xpath("//li[6]/div[2]/div[2]/div/ul/li[2]/a")).click();
catch(Exception e){
e.printStackTrace();
driver.quit();
} 
```

当我执行上述代码时，我可以进行鼠标悬停，但单击操作失败。一件重要的事情是它无法执行`quit()`命令，因为我的浏览器挂起，直到我手动关闭。我的控制台没有收到任何错误。我不知道如何调试它。

任何帮助将不胜感激。

我知道`Mouse Hover`也可以通过`Action Builder`类来实现，但我需要它在 javascriptExecutor 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:43:43.467

```
catch(Exception e){
e.printStackTrace();
driver.quit();
} 
```

您的代码是说您仅在发生异常时退出... move driver.quit(); 在捕获之外

# actionscript-3 - 关于 AS3 中的字符串消息

> ID：15951796
> 
> 赞同：0
> 
> 时间：2013-04-11T14:44:34.797
> 
> 标签：actionscript-3, flash, apache-flex, text, flashdevelop

您好，我有大约 10 条字符串消息要显示在屏幕上，但问题是它们太长了，所以我觉得编辑它们很笨拙。

有没有办法将所有这些消息存储在资源文件中，以便我可以轻松编辑它并使用此资源文件在我的 AS3 项目中显示我的 10 条消息？（我将它们保存在纯 *.as 文件中）

例如，人们在开发游戏时是如何做这样的事情的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:47:45.437

您似乎只是在寻找`word wrap`启用了选项的编辑器。他们有很多。`Notepad++`例如，如果您想将自动换行与语法高亮结合起来，您可以使用。

您一定要关注 RIAstar 的链接 - 资源包为您提供了将所有字符串放在一个简单文件中的可能性，在不更改代码的情况下为不同语言提供不同的字符串，独立于主应用程序构建和加载资源。

顺便说一句，当您`enter`在带引号的字符串文字内按时，IDE 会自动添加`+`和`"`签名。你知道这个功能吗？

# android - 恢复 IntentService

> ID：15951798
> 
> 赞同：0
> 
> 时间：2013-04-11T14:44:35.537
> 
> 标签：android, multithreading, intentservice

有什么办法可以重新启动我的`IntentService`？我发现，当我的应用程序最小化时，一切正常，但是当系统过载时（例如，有来电，同时，消息传递等），系统停止我的应用程序（当前活动）。但问题出在`IntentService`- 它也停止了，我需要它一直工作。

Android 文档说：“服务根据需要启动，依次使用工作线程处理每个 Intent，并在其工作结束时自行停止。” 我`IntentService`根据文档所说的创建了我的。而且因为`IntentService`总是在另一个线程中，我不知道为什么会出现这种问题。谢谢你的帮助。

# r - 过滤掉 3 个数据集之间的共同观察值

> ID：15951799
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:44:36.547
> 
> 标签：r

我有 3 个数据集 (txt.gz)，并且我已经对它们进行了子集化，以仅包含 p 值为 1*10^-6 或更小的观察值。

下一步是检查一个通用名称变量（该名称是指 SNP，遗传学）。

当前表：

```
name        pval

rs2575876   8.20660e-07

rs11834972  4.20460e-07

rs11050138  4.23080e-07

rs12313631  7.13600e-07

rs485538    5.99060e-07 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:37:13.427

如果我理解正确：

对于名为 b 的数据库，table(b$name) 将让您查看名称重复了多少次。

编辑：试试这个

1.  创建列出每个数据集中名称的不同值的表

    a2 <- 唯一的（a$names）

    b2 <- 唯一的（b$names）

    c2 <- 唯一的（c$names）

2.  附加它们

    R1<- rbind(a2,b2,c2)

3.  检查此表中的重复

    x<- data.frame（表（R1））

4.  随心所欲地操作数据框。即查找出现在多个数据集中的所有名称

    x[x$names>1,]

# php - 在本地文本文件中查找重复项

> ID：15951802
> 
> 赞同：6
> 
> 时间：2013-04-11T14:44:44.803
> 
> 标签：php

请有人可以帮助我使用此重复检查功能。当谈到 PHP 时，我还是很新鲜，所以如果这是一个简单的修复，请原谅。

我将电子邮件地址列表存储到一个名为 list.txt 的文件中。这是文件的内容（每个都在一个新行上）：

```
bob@foo.com
sam@bar.com
tracy@foobar.com 
```

现在我有一个功能（不工作）应该检查电子邮件是否已经在列表中：

```
function is_unique($email) {
   $list = file('list.txt');

   foreach($list as $item){
      if($email == $item){
          return false;
          die(); 
      }
   }
   return true;
} 
```

当我在这个测试中调用函数时，使用现有的电子邮件地址，它仍然返回 true：

```
if( is_unique('bob@foo.com') ) {
    echo "Email is unique";
} else {
    echo "Duplicate email";
}

// Returns true even though bob@foo.com is in the list 
```

我感谢任何人的意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:50:21.140

可以使用，但是在迭代时`list`必须`trim()`使用，因为它们仍然有换行符：`item``list`

```
if($email == trim($item)) 
```

**更新：**正如[尼克](https://stackoverflow.com/users/1011145/nick)所提到的，可选标志`FILE_IGNORE_NEW_LINES`将大大降低执行速度和代码：

```
function is_unique($email) {
   $list = file('list.txt',FILE_IGNORE_NEW_LINES);
   return in_array($email,$list) ? false : true;  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:56:07.403

要么记得[修剪](http://uk3.php.net/manual/en/function.trim.php)你的电子邮件，要么更好的解决方案是`FILE_IGNORE_NEW_LINES`在你使用[文件功能](http://uk3.php.net/manual/en/function.file.php)时使用，这将允许你使用 PHP 的内置数组搜索（应该更快）。例如：

```
function is_unique($email) {
   $list = file('list.txt',FILE_IGNORE_NEW_LINES);

   return !in_array($email,$list);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:50:54.000

您可以逐行阅读文件并将该行的内容与您的新电子邮件进行比较。

像这样的东西：

```
function is_unique($email) 
{
   $file = fopen("list.txt", "r") or exit("Unable to open file!");

   while(!feof($file))
   {
      if($email == $file){
      return false;
      die();
   }
   fclose($file);
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:47:03.027

您可以做的是使用 fopen 读取文件并分别读取每一行。然后，您只需检查名称是否已经存在。您也可以打开它，将整个文件放在一个数组中（每行 = 数组行）并抛出一个 array_unique 以过滤掉双精度数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:54:23.513

列出所有不重复的电子邮件：

```
$list=array_unique(file('list.txt')); 
```

检查是否存在重复：

```
$list1=file('list.txt');
$list2=array_unique(file('list.txt'));
count($list1)==count($list2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T14:57:04.617

您想在每行文件的末尾注意回车和换行

```
$fp = fopen('emails.txt', 'r');
while (!feof($fp))
{
   $eml = fgets($fp);
   if(trim($eml, " \n\r") == $email)
   {
      return false;
   }
}
return true; 
```

# android - 某些系统通知未在 AccesibilityService 下注册

> ID：15951803
> 
> 赞同：0
> 
> 时间：2013-04-11T14:44:47.060
> 
> 标签：android, wifi, accessibilityservice

像许多其他人一样，我希望我的应用程序检测通知，因为我的应用程序需要为每个通知隐藏。

大多数状态栏通知都能正常到达。但是 2 个系统通知不会注册：

*   每次设备检测到开放无线网络时都会显示可用的 Wifi。

*   连接为 MTP 的媒体存储。

我在 nexus 设备上运行 4.2.2。

我的可访问性服务信息如下：

```
<?xmlversion="1.0" encoding="utf-8"?> 
    <accessibility-service xmlns:android="http://schemas.android.com/apk/res/android" 
        android:accessibilityEventTypes="typeNotificationStateChanged" 
        android:accessibilityFeedbackType="feedbackAllMask"
        android:accessibilityFlags="flagIncludeNotImportantViews"
        /> 
```

谢谢你。

# java - 如何在不使用 toString() 的情况下从 JAVA 中的 XmlObject 中提取信息？

> ID：15951813
> 
> 赞同：3
> 
> 时间：2013-04-11T14:45:17.407
> 
> 标签：java, xml, xmlbeans

我有一个 XmlObject (org.apache.xmlbeans.XmlObject) obj 。

```
 XmlObject obj;
    ...
    obj.toString(); //<xml-fragment>n2</xml-fragement>
    // content ="n2"
    String content = obj.toString().substring(14, obj.length() - 15) 
```

在内容中存储“n2”的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T14:51:52.740

来自[SimpleValue 的 javadoc](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/SimpleValue.html) -“所有 XmlObject 实现都可以强制转换为 SimpleValue”

所以正确的做法是：

```
//to get the string value
((SimpleValue)obj).getStringValue();
//to set the string value
((SimpleValue)obj).setStringValue("n2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:54:09.603

像这样的东西？

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document document = db.parse(new File("input.xml"));
    NodeList nodeList = document.getElementsByTagName("Xml-Fragment"); 
```

那里有你的节点列表，可以从中获取任何你想要的东西。

# javascript - Liferay 事件强制渲染

> ID：15951816
> 
> 赞同：1
> 
> 时间：2013-04-11T14:45:18.657
> 
> 标签：javascript, ajax, liferay, ipc, portlet

我有一个 Liferay portlet，我通过 AJAX 执行一些操作。当我在 serverResource 中处理这些操作时，我想强制所有客户端呈现。我已经尝试了一些东西，但它们似乎只适用于每个客户。我所说的客户端是指在我的站点中执行操作的用户（即单击按钮以更改搜索容器中实体的状态）。

我尝试通过在更新实体时触发事件来使用客户端 IPC。当我的 AJAX 调用成功时，我触发了该事件，但该事件没有被我的其他客户端（我打开同一页面的第二个浏览器）捕获，因此除非我刷新我不刷新的页面，否则它不会刷新想要做。

我查看了配置发送方/接收方 portlet（我的一个 portlet 是发送方和接收方），但这看起来需要我提交会导致我的页面刷新的操作，所以不能使用它。我确实从 processAction 调用了 include 认为它会触发所有客户端的渲染，但只在发出 ajax 请求的客户端上工作。

在这一点上，我不知道如何强制所有客户端刷新，除非我设置像 ajax 轮询例程，这可能是我唯一的前进道路，但任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:13:26.343

JSR 286 标准化了服务器端 IPC，屏幕上没有单个 portlet 的 Ajax 动态刷新。您必须让自己的 portlet 知道您将通过 JS 自己触发的事件，并且不能依赖门户容器中的任何（标准化）开箱即用的东西。

AFAIK serveResource 无法触发事件（但我没有仔细检查规范），如果确实如此，那么如果没有自定义代码，事件肯定不会通过 Ajax 触发任何渲染

# c - 我遇到了分段错误 C 的问题

> ID：15951817
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:45:20.913
> 
> 标签：c, segmentation-fault

我正在尝试打开一个文件并查看文件中有多少行、单词、字符和句子。一切编译正常，但是当程序运行时，它会打印指令，然后出现“分段错误（核心转储）”错误。我知道文件可以正常打开，所以我猜我在 processFile 中做错了什么。帮助会很棒！

PS #include "lib09.h" 是 main() 之后的三个函数

```
#include <stdio.h>
#include <stdlib.h>
#include "lib09.h"

int main(void)
{
   FILE *fileIn;
   int *lines = 0,
        *words = 0,
        *sentences = 0,
        *characters = 0;

   printInstructions();

   fileIn = fopen("input09.txt", "r");

   if (fileIn == NULL)
        {
        printf("\n\nERROR\n");
        printf("FILE DOES NOT EXIST.\n");
        printf("TRY AGAIN\n\n");
        }

   else
        {
        processFile(fileIn);
        printReport(lines, words, characters, sentences);
        }

   return 0;
}

//
//Prints Instructions
//
void printInstructions()
{
   printf("\n====================================================\n");
   printf("  Program reads a file and returns the number of  \n");
   printf("lines, words, characters, and sentences in the file.\n");
   printf("====================================================\n\n");

   return;
}

//
//Processes File
//
int processFile(FILE *fileIn)
{
        int ch,
        *lines = 0,
        *sentences = 0,
        *characters = 0,
        *words = 0;

   while(fscanf(fileIn, "%d", &ch) != EOF)
   {
      ch = fgetc(fileIn);

                if(ch == '\n' || ch == 60)
                        return *lines++;

                if(ch == '.')
                        return *sentences++;

                if(ch != ' ' || ch != '.' || ch != '\n')
                        return *characters++;

                if(ch == ' ')
                        return *words++;
   }

   fclose(fileIn);

   return 0;
}

//
//Prints Values from File
//
void printReport(int *words, int  *lines, int *characters, int *sentences)
{
   printf("This file contains %d lines.\n", *lines);
   printf("This file contains %d words.\n", *words);
   printf("This file contains %d characters.\n", *characters);
   printf("This file contains %d sentences.\n\n", *sentences);

   return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:06:24.780

at main:

```
int lines = 0,
    words = 0,
    sentences = 0,
    characters = 0;
...
processFile(fileIn, &lines, &word,&sentences, &characters); 
```

at processFile

```
processFile(FILE* fileIn, int* lines, int* word, int* sentences, int* characters){
...
} 
```

note:

`fscanf(fileIn, "%d", &ch)` <- wrong

`return *lines++;` <- do not return

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:51:06.477

使这些 int 不是指向 int 的指针

```
 *lines = 0,
 *sentences = 0,
 *characters = 0,
 *words = 0; 
```

通过删除每个中的 * 以及当你增加它们时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:49:56.433

*lines、*words 等都是从未初始化到正确内存地址的指针。

如果您在 main 之外将它们创建为整数并删除所有 *prefixes 它应该可以工作。

# python - 如何从字典中获取任意值的元组？

> ID：15951818
> 
> 赞同：0
> 
> 时间：2013-04-11T14:45:23.007
> 
> 标签：python, dictionary, key, tuples

如何从匿名字典中获取任意值的元组？

```
def func():
    return dict(one=1, two=2, three=3)

# How can the following 2 lines be rewritten as a single line,
# eliminating the dict_ variable?
dict_ = func()
(one, three) = (dict_['one'], dict_['three']) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:48:36.467

一个中间变量可能比这个单行更可取（更具可读性）：

```
>>> (one,three) = (lambda d:(d['one'],d['three']))(func()) 
```

（除了将中间值移动到动态生成的函数中之外，它实际上什么也没做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:46:58.463

循环`func()`结果？

```
one, three = [v for k, v in sorted(func().iteritems()) if k in {'one', 'three'}] 
```

如果您使用的是 Python 3，请替换`.iteritems()`为。`.items()`

演示：

```
>>> def func():
...     return dict(one=1, two=2, three=3)
... 
>>> one, three = [v for k,v in sorted(func().iteritems()) if k in {'one', 'three'}]
>>> one, three
(1, 3) 
```

请注意，这种方法要求您将目标列表保持在排序的键顺序中，这对于应该简单明了的东西来说是一个奇怪的限制。

这比您的版本*详细得多。*它没有什么问题，真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:21:21.307

不要那样做，在大多数情况下，中间 dict 是可以的。可读性很重要。如果你真的发现自己在这种情况下太频繁了，你可以使用装饰器来猴子补丁你的函数：

```
In     : from functools import wraps

In     : def dictgetter(func, *keys):
  .....:     @wraps(func)
  .....:     def wrapper(*args, **kwargs):
  .....:         tmp = func(*args, **kwargs)
  .....:         return [tmp[key] for key in keys]
  .....:     return wrapper

In     : def func():
   ....:         return dict(one=1, two=2, three=3)
   ....: 

In     : func2 = dictgetter(func, 'one', 'three')

In     : one, three = func2()

In     : one
Out    : 1

In     : three
Out    : 3 
```

或类似的东西。

当然，您也可以进行monkeypatch，以便在调用时指定所需的字段，但我猜您需要一个包含这些机制的普通函数。

这将与上面的 def wrapper 的主体非常相似地实现，并且使用如下

```
one, three = getfromdict(func(), 'one', 'three' ) 
```

或类似的东西，但你也可以重新使用上面的整个装饰器：

```
In     : two, three = dictgetter(func, 'two', 'three')()

In     : two, three
Out    : (2, 3) 
```

# ruby - Ruby从数组中排序和删除重复项

> ID：15951819
> 
> 赞同：0
> 
> 时间：2013-04-11T14:45:26.470
> 
> 标签：ruby, sorting

这是我的数组中的项目列表： 如果您看到生成的文件带有日期（例如，`update.20130410.xml`）。我应该只获取最新的文件并删除其余文件。让我们假设数组值是排序的，所以如果我们只是在重复模式中挑选最上面的项目应该没问题。请帮我。

原始数组：

```
theOneBig.xml
theSecondFine.xml
theTestOne.xml
OtherImp.xml
mrss.xml
update.20130410.xml
update.20130402.xml
update.20120314.xml
update.20120313.xml
update.20120312.xml
update.20120301.xml
update.20130411.xml
file.update.20130410.xml
file.update.20130409.xml
file.update.20130409.xml 
```

我想得到的输出是

```
theOneBig.xml
theSecondFine.xml
theTestOne.xml
OtherImp.xml
mrss.xml
update.20130410.xml
file.update.20130410.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:31:15.500

假设列表已经正确排序，日期总是以句点开头和结尾，并且您永远不会有一个数字序列以*不是*日期的句点开头和结尾，那么这应该可以工作（对于 Ruby 1.9.3） ：

```
original_array.uniq {|f| f.gsub(/(?<=\.)\d+(?=\.)/, '') } 
```

当您向 提供块时`Array#uniq`，它使用返回值来确定“唯一性”。

# plone - 如何限制 Plone 上的图像文件扩展名？

> ID：15951825
> 
> 赞同：2
> 
> 时间：2013-04-11T14:45:35.473
> 
> 标签：plone

我有一个 Plone 应用程序，可以在其中上传 ATImages 图像。我想验证扩展文件（主要是禁止 pdf 文件）。有一个像[http://blablba.com/createObject?type_name=Image](http://blablba.com/createObject?type_name=Image) 这样的 url 调用创建的

我想我可以编写一个扩展 ATImages 的新类，创建一个带有验证器的表单，但它看起来有点复杂，而且 content_type 注册表上的一些设置似乎就足够了（或其他地方）。

你会怎么做？（禁止pdf？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T07:47:38.320

我们遇到了类似的问题。

Archetypes 在其魔法期间会触发几个事件，其中包括“验证后事件”（IObjectPostValidation）。通过这种方式，我们添加了对内容类型的检查。

订户（zcml）：

```
<subscriber provides="Products.Archetypes.interfaces.IObjectPostValidation"
            factory=".subscribers.ImageFieldContentValidator" /> 
```

快速而肮脏的实施：

```
from Products.Archetypes.interfaces.field import IImageField
from plone.app.blob.interfaces import IBlobImageField
from Products.Archetypes.interfaces import IObjectPostValidation
from zope.interface import implements
from zope.component import adapts
# import your message factory as _

ALLOWED_IMAGETYPES = ['image/png',
                      'image/jpeg',
                      'image/gif',
                      'image/pjpeg',
                      'image/x-png']

class ImageFieldContentValidator(object):
    """Validate that the ImageField really contains a Imagefile.
    Show a Errormessage if it doesn't.
    """
    implements(IObjectPostValidation)
    adapts(IBaseObject)

    img_interfaces = [IBlobImageField, IImageField]

    msg = _(u"error_not_image",
            default="The File you wanted to upload is no image")

    def __init__(self, context):
        self.context = context

    def __call__(self, request):
        for fieldname in self.context.Schema().keys():
            field = self.context.getField(fieldname)
            if True in [img_interface.providedBy(field) \
                            for img_interface in self.img_interfaces]:
                item = request.get(fieldname + '_file', None)
                if item:
                    header = item.headers
                    ct = header.get('content-type')
                    if ct in ALLOWED_IMAGETYPES:
                        return
                    else:
                        return {fieldname: self.msg} 
```

# android - 安卓谷歌地图视图

> ID：15951831
> 
> 赞同：0
> 
> 时间：2013-04-11T14:45:50.737
> 
> 标签：android, google-maps, android-mapview

android应用程序中的谷歌地图显示空白网格？？？我使用 Google Maps Api v2 并获得了我的 Android Api 密钥，将其放入教程中的 activity_main.xml 中，还在清单文件中获得 Internet 权限，使用 google.android.aps 库。不知道怎么解决？

# c - 文件系统上的 UNIX 套接字在哪里？

> ID：15951835
> 
> 赞同：2
> 
> 时间：2013-04-11T14:45:59.473
> 
> 标签：c, sockets, pipe, unix-socket

我正在使用 Unix 域套接字。想知道它在系统中的位置。

如果我使用系统调用创建套接字对

```
socketpair(AF_UNIX,SOCK_STREAM,0,fd) ; 
```

我读过它是未命名的套接字（未使用绑定绑定到路径名的套接字）。另一方面，命名套接字或更好的套接字使用绑定调用绑定到文件系统路径名，存储在我们指定的某个目录中。例如

```
 struct sockaddr_un {
               sa_family_t sun_family;               /* AF_UNIX */
               char        sun_path[UNIX_PATH_MAX];  /* pathname */
           }; 
```

这里 sun_path 可以是 /tmp/sock 文件。

所以，同样，我想知道未命名的套接字在系统中或内存或内核中的任何位置是否有任何位置？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:34:00.857

我不是内核专家，所以把它当作一个（受过教育的？）猜测。

```
#include <sys/un.h>
#include <sys/socket.h>
#include <stdio.h>
#include <string.h>

int main()
{
    struct sockaddr_un sun;
    socklen_t socklen;
    int fd[2];
    if(socketpair(AF_UNIX,SOCK_STREAM,0,fd) < 0) {
        perror("socketpair");
        return 111;
    }
    socklen = sizeof(sun);
    memset(&sun, 0, sizeof sun);
    sun.sun_path[0] = '!'; /* replace with any character */
    if(getsockname(fd[0], (struct sockaddr *)&sun, &socklen) < 0) {
        perror("getsockname");
        return 111;
    }
    printf("sunpath(%s)\n", sun.sun_path);
    return 0;
} 
```

这个程序说套接字没有相应的路径，所以我的猜测是 unix 套接字对永远不会与文件名相关联——它只是作为内核中的数据结构保持活动状态，直到所有引用都关闭。

当然欢迎更好的答案:)

# excel - 等待 shell 命令完成

> ID：15951837
> 
> 赞同：41
> 
> 时间：2013-04-11T14:46:05.333
> 
> 标签：excel, shell, vba, batch-file

我在 Excel VBA 中运行一个简单的 shell 命令，该命令在指定目录中运行一个批处理文件，如下所示：

```
Dim strBatchName As String
strBatchName = "C:\folder\runbat.bat"
Shell strBatchName 
```

有时批处理文件可能需要更长的时间才能在某些计算机上运行，​​并且存在依赖于批处理文件才能完成运行的正在进行的 VBA 代码。我知道您可以设置如下所示的等待计时器：

```
Application.Wait Now + TimeSerial(0, 0, 5) 
```

但这可能不适用于某些速度太慢的计算机。有没有办法系统地告诉 Excel 继续执行其余的 VBA 代码，直到*shell*完成运行？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-11T14:52:12.840

请改用 WScript.Shell，因为它有一个`waitOnReturn`选项：

```
Dim wsh As Object
Set wsh = VBA.CreateObject("WScript.Shell")
Dim waitOnReturn As Boolean: waitOnReturn = True
Dim windowStyle As Integer: windowStyle = 1

wsh.Run "C:\folder\runbat.bat", windowStyle, waitOnReturn 
```

[（从等待 Shell 完成](https://stackoverflow.com/questions/8902022/wait-for-shell-to-finish-then-format-cells)复制的想法 ，然后格式化单元格 - 同步执行命令）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-13T14:59:52.870

添加以下子：

```
Sub SyncShell(ByVal Cmd As String, ByVal WindowStyle As VbAppWinStyle)
VBA.CreateObject("WScript.Shell").Run Cmd, WindowStyle, True
End Sub 
```

如果您添加对您的引用，`C:\Windows\system32\wshom.ocx`您还可以使用：

```
Sub SyncShell(ByVal Cmd As String, ByVal WindowStyle As VbAppWinStyle)
Static wsh As New WshShell
wsh.Run Cmd, WindowStyle, True
End Sub 
```

这个版本应该更有效率。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-09T07:26:51.610

将 bat 文件保存在“C:\WINDOWS\system32”上并使用下面的代码它正在工作

```
 Dim wsh As Object
   Set wsh = VBA.CreateObject("WScript.Shell")
   Dim waitOnReturn As Boolean: waitOnReturn = True
   Dim windowStyle As Integer: windowStyle = 1
   Dim errorCode As Integer

   errorCode = wsh.Run("runbat.bat", windowStyle, waitOnReturn)

If errorCode = 0 Then
    'Insert your code here
Else
    MsgBox "Program exited with error code " & errorCode & "."
End If 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-05T21:27:28.360

这就是我`VB`在继续之前等待流程完成的方式。这不是我写的，也不是我的功劳。

它是在其他一些开放论坛中提供的，对我来说效果很好：

子例程需要以下声明`RunShell`：

```
Option Explicit

Private Declare Function OpenProcess Lib "kernel32" (ByVal dwDesiredAccess As Long, ByVal bInheritHandle As Long, ByVal dwProcessId As Long) As Long

Private Declare Function GetExitCodeProcess Lib "kernel32" (ByVal hProcess As Long, lpExitCode As Long) As Long

Private Declare Function CloseHandle Lib "kernel32" (ByVal hObject As Long) As Long

Private Const PROCESS_QUERY_INFORMATION = &H400

Private Const STATUS_PENDING = &H103&

'then in your subroutine where you need to shell:

RunShell (path and filename or command, as quoted text) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-18T12:20:22.853

您在 Run 命令的括号中提出的更改对我来说适用于 VBA

```
Dim wsh As Object
Set wsh = VBA.CreateObject("WScript.Shell")
Dim waitOnReturn As Boolean: waitOnReturn = True
Dim windowStyle As Integer: windowStyle = 1
Dim errorCode As Integer
wsh.Run "C:\folder\runbat.bat", windowStyle, waitOnReturn 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T14:52:41.310

要么将外壳链接到一个对象，要么让批处理作业终止外壳对象（退出），并在外壳对象 = 无时让 VBA 代码继续？

或者看看这个： [Capture output value from a shell command in VBA?](https://stackoverflow.com/questions/2784367/capture-output-value-from-a-shell-command-in-vba)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-05-08T16:05:34.637

将 wsh 调暗为新的 wshshell

chdir "批处理文件目录"

wsh.run "批处理文件的完整路径",vbnormalfocus, true

完成儿子

# installation - 尝试安装 Quartz.net，运行服务器时出现问题

> ID：15951842
> 
> 赞同：3
> 
> 时间：2013-04-11T14:46:18.453
> 
> 标签：installation, quartz.net

所以我一直按照[这里](http://geekswithblogs.net/TarunArora/archive/2012/11/16/install-quartz.net-as-a-windows-service-and-test-installation.aspx)的说明安装 Quartz.NET。但是，当我尝试从命令 prmopt 运行“Quartz.Server.exe -i”时，我收到此错误：

```
Topshelf.HostFactory Error: 0 : The service terminated abnormally, Topshelf.Host
ConfigurationException: The service was not properly configured:
[Failure] Command Line An unknown command-line option was found: SWITCH: i (True
)
[Success] Name QuartzServer
[Success] DisplayName Quartz Server
[Success] Description Quartz Job Scheduling Server
[Success] ServiceName QuartzServer
   at Topshelf.Configurators.ValidateConfigurationResult.CompileResults(IEnumera
ble`1 results)
   at Topshelf.HostFactory.New(Action`1 configureCallback)
   at Topshelf.HostFactory.Run(Action`1 configureCallback) 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:15:21.483

尝试使用不带“-i”的命令行

```
C:\Program Files (x86)\Quartz.Net>Quartz.Server.exe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T07:05:51.827

如果您想将其安装为服务，只需使用：

```
Quartz.Server.exe install 
```

而不是 -i 或 -install 或 /install 或 ....

如果您将在没有任何参数的情况下运行它，它将作为命令行应用程序运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T10:57:10.050

我遇到了同样的错误，并且在通过 services.msc 运行时得到了“拒绝访问”。最后问题是由于石英配置中的错误配置条目（错误的委托）。

# android - Android：日历与自定义通知的集成

> ID：15951847
> 
> 赞同：0
> 
> 时间：2013-04-11T14:46:32.990
> 
> 标签：android, android-intent, calendar, notifications

我需要在我的 android 应用程序中集成一个日历，我可以从中设置新事件。我知道可以调用 android 日历（使用意图），但我需要的略有不同，原因是：

我需要在到达事件的时间时，启动一些代码，并且不发生默认通知！换句话说，我想在事件警报响起时创建一个自定义通知。也许我需要使用 AlarmManager

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:01:34.500

如果您的问题是您需要在指定时间启动某种意图，那么您可以使用 AlarmManager。它允许您安排您的应用程序在某个时间点运行。当警报响起时，系统会广播已为其注册的 Intent。

有关 AlarmManager 的更多信息，您可以查看此链接：[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

# wordpress - wordpress 短代码显示在预览帖子中

> ID：15951856
> 
> 赞同：1
> 
> 时间：2013-04-11T14:46:46.947
> 
> 标签：wordpress, wordpress-theming

[http://www.mytwins.gr/site/](http://www.mytwins.gr/site/)

在第三篇博文中，您将看到一个`[frame align="none"]Της Εύης Σταθάτου[/frame]`丑陋的 schortcode 出现。只有单击它，它才能正常工作。

这是为什么？，你怎么能从预览帖子中隐藏代码？提前致谢。

ps 我试图从视觉中隐藏短代码并以文本模式输入，但仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:53:04.993

正如@Ravi 建议的那样，确保您的插件已启用。但是，您的短代码似乎出现在您的摘录中（假设您正在使用`the_excerpt()`出现在主页上的摘要？）

我会建议一个方便的正则表达式片段：

```
$myExcerpt = get_the_excerpt();
$myExcerpt = preg_replace( '|\[(.+?)\](.+?\[/\\1\])?|s', '', $myExcerpt);
echo $myExcerpt; 
```

这应该会阻止原始短代码出现。

# php - ExtJS 如何在一个请求中提交表单和商店？

> ID：15951857
> 
> 赞同：1
> 
> 时间：2013-04-11T14:46:48.303
> 
> 标签：php, ajax, extjs, datagrid, extjs4

想象两种形式和一个网格。表格 A 由组合框组成。这些框显示来自数据库的数据。用户选择组合框，结果是网格存储的新记录。也可以将新值/记录放入组合框中。（无数据库插入）表单 B 由几个文本字段组成。它的一种MasterDetail。Grid 是 Master，Form B 是 Detail。最后，我想在一个请求（ajax）中提交表单 B 和网格存储。在服务器端，我想存储详细数据并将它们与现有记录连接起来，甚至创建新记录并连接它们。我想将该操作运行到事务上下文中。

现在我不知道什么是好的/最佳做法。我尝试使用网格存储的同步方法并将表单（表单 B）值包含为 extraParams。这可行，但有可能在成功请求后我需要使用相同的（未触及的）存储进行另一个请求（仅表单 B 更改），因此我将不得不重置记录状态。（同步仅执行更改）

也许一个简单的 Ext.ajax.request() 可以完成这项工作，但是如何通过商店？我可以添加表单 B 值作为参数，但我不知道如何添加商店？我是否需要自己将每个记录项添加到参数配置中？

信息：服务器端是 php，db 是 mysql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:47:46.780

如果表单 B 值是有关记录的详细信息，则扩展模型以包含这些字段，并且根本不在网格视图中显示它们。
然后，表单 B 中的每次更改都会导致记录字段发生更改，从而导致更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:31:50.340

```
{// form submit button

            id: 'save-frm',
            text: 'Save',
            handler: function(btn) {
                //btn.setDisabled(true);
                frm = this.up('form').getForm();
                if(frm.isValid()){

                    var store_data = new Array();
                    your_store.each(function(node){
                            store_data.push(JSON.stringify({id: node.data.id, name: node.data.name}))
                    })
                     frm.submit({
                          waitMsg: 'Enregistrement en cours...',
                          submitEmptyText: false, 
                          params:{store_data: JSON.stringify(store_data)}, 
                          success: function(form, action){
                                //
                          },
                         failure: function(form, action){                           
                             //
                         }
                    });
                }
            }
 } 
```

您可以将商店数据作为提交表单的参数发送，也可以在 PHP 端使用 Ajax.request 来获取商店数据`$store_data = json_decode($_POST['store_data']);`

# c++ - 在 NTFS、FAT、EXT4 上测试写入/读取速度

> ID：15951858
> 
> 赞同：1
> 
> 时间：2013-04-11T14:46:51.250
> 
> 标签：c++, c, benchmarking, fat32, ext4

我必须用 C（或 C++）编写一个程序，`Linux`用于测试不同文件系统上的写入和读取速度。我必须确保所有数据都写入磁盘（不在缓存中）。

所以我的第一个问题——我应该使用什么函数来打开一个新文件？我之前使用`open`了带参数的函数，`O_DIRECT`除了`O_SYNC`一件事之外一切都很好 - 编写像 1KB 这样的小文件非常慢，比如 0.01MB/s。

我尝试改用`fopen`函数`open`，并使用函数`fflush`来确保所有数据都直接写入磁盘，并且我首先在`FAT32`文件系统上对其进行了测试。在 5 秒内将 1000 个 1KB 的文件写入磁盘（此处为 SD 卡）。大约 0.18MB/s，我认为这是正确的。

现在问题出现在测试`EXT4`和`NTFS`文件系统时。上`EXT4`。1KB 文件的写入速度类似于 12MB/s（错误），在测试 100KB 传输时为 180MB/s（非常错误，我的 SD 卡的传输速率只有 20MB/s）。

我写文件的实际代码如下所示：

```
clock_gettime(CLOCK_REALTIME, &ts);

for ( int i = 0; i < amount; ++i)
{
    p = fopen(buffer2, "w+");

    fwrite(buff, size*1024, 1, p);
    if ( fflush(p) != 0 ) { cout << "fflush error"; return 0; } 

    fclose(p);
}

clock_gettime(CLOCK_REALTIME, &ts2);

time2 = diff2(ts,ts2); 
```

仅适用于`FAT32`文件系统。第二个代码（之前使用过）如下所示：

```
for ( int i = 0; i < amount; ++i)
{
    int fd = open(buffer2, O_WRONLY | O_CREAT, 0777);
    if ( error(fd, "open") ) return false;

    if ( (write(fd, buff, size*1024)) < 0 ) { perror("write error"); return 0; }

    if ( (fsync(fd)) == -1 ) { perror("fsync"); return 0; }

    close(fd);
} 
```

适用于所有文件系统，但小文件写入速度极慢。也许我应该为不同的文件系统使用不同的代码？有任何想法吗？

`EDIT`：

我发现了为什么写小文件很慢。这是因为`fsync`功能，在不同的文件系统上需要不同的时间。我打电话给`fsync`每一次写，所以这就是问题所在。

当所有文件都被写入时，有什么方法可以在最后调用它？或者也许每隔几秒钟？我必须使用不同的线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:52:59.913

请参阅[如何确保在关闭 fstream 之前将数据写入磁盘？](https://stackoverflow.com/questions/7522479/how-do-i-ensure-data-is-written-to-disk-before-closing-fstream)但我认为您不能确保数据实际上在磁盘上，而不是在磁盘控制器的缓存中，甚至在驱动器的板载缓存中

# xml - 需要从soap服务获取xml数据

> ID：15951863
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:47:03.113
> 
> 标签：xml, soap

我需要从我的供应商那里获得一个 xml，其中包含将在 Excel 中处理的数据。不幸的是，我没有编写 php 脚本来获取该数据的经验。

我的问题是有没有其他方法可以获取这些数据？一些专门的软件女巫会连接到我的供应商 wsdl 地址并获取该数据？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:50:51.810

为了测试 Web 服务，我一直使用 SoapUI - [http://www.soapui.org/](http://www.soapui.org/)

这是一个非常简洁的工具，并且有很多功能。如果您使用的免费版本应该可以满足您的需求，那就是调用服务并以 XML 格式检索数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:58:07.197

我自己没有使用过，但这看起来很有希望：

[http://www.urdalen.no/wsdl2php/index.php](http://www.urdalen.no/wsdl2php/index.php)

这将从提供​​的 WSDL 生成客户端代码，然后您只需编写代码即可从生成的 PHP 代码中获取所需内容。

# php - mysqli 和获取数据

> ID：15951864
> 
> 赞同：1
> 
> 时间：2013-04-11T14:47:09.503
> 
> 标签：php, mysqli

我是mysqli的新手，我写了一个如下的函数。

**1 -**我找不到`SELECT *`查询方法，不得不`bind_result`将每个列值分配给同名变量。（例如`name`#row 的列值存储到`$name`）

*我认为`bind_result()`对`SELECT *`查询没有功能？*

**2 -**所以我尝试了另一种选择，获取所有行并通过循环手动将它们分配给适当的变量。我想我应该使用`$query->fetch_all()`or `$query->fetch_assoc()`for 循环，但我遇到了这个：

`Fatal error: Call to undefined method mysqli_result::fetch_all()`

或者

`Fatal error: Call to undefined method mysqli_result::fetch_assoc()`

但是我做了一个`phpinfo()`并看到 mysqlnd 已启用并且 php 版本是 5.4.7（运行 XAMPP v1.8.1）

并且**3-**我最终所做的是下面的想法也不起作用。

```
function the_names($name)
{
    global $db;
    if($query = $db->prepare("SELECT * FROM users where name=?"))
    {
        $query->bind_param('s', $name);
        if($query->execute())
        {
            $query->store_result();
            if($query->num_rows > 1)
            {
                while($row = $query->fetch())
                {
                    echo $row['name']; // Here is the problem
                }
            }
            else
                echo "not valid";
            $query->close();
        }
    }
} 
```

我需要一种方法来存储所有获取的数据`bind_result()`，或者将它们存储在一个数组中以供以后使用，最好同时了解两者。tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:58:53.813

一句话回答你所有的问题 - [**PDO**](https://stackoverflow.com/tags/pdo/info)
它有你试图从 mysqli 得到的一切（徒劳）：

```
function the_names($name)
{
    global $db;
    $query = $db->prepare("SELECT * FROM users where name=?");
    $query->execute(array($name));
    return $query->fetchAll();
}

$names = the_names('Joe');
foreach ($names as $row) {
    echo $row['name'];
} 
```

注意使用函数的正确方法。它不应该**回**显任何东西，而**只返回**数据以供将来使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T03:47:25.823

如果您的 mysqli 代码没有，`binding_param()`您可以编写如下代码：

```
$mysqli = new mysqli("localhost" , "root" , "" , "database_name");
$result = $mysqli->query( "SELECT * FROM users where name=" . $name) ;
while ( $row =  $result->fetch_assoc() ) {
    echo $row["name"];
} 
```

如果使用`binding_param()`代码，还需要设置`bind_result()`

```
$db = new mysqli("localhost" , "root" , "" , "database_name");
function the_names($name){
    global $db;

    /* Prepared statement, stage 1: prepare */
    if (!($query = $db->prepare("SELECT * FROM users where name=?"))) { # prepare sql
    echo "Prepare failed: (" . $db->errno . ") " . $db->error;
    }

    /* Prepared statement, stage 2: bind and execute */
    if (!$query->bind_param("s", $name)) { # giving param to "?" in prepare sql
        echo "Binding parameters failed: (" . $query->errno . ") " . $query->error;
    }

    if (!$query->execute()) {
        echo "Execute failed: (" . $query->errno . ") " . $query->error;
    }

    $query->store_result(); # store result so we can count it below...
    if( $query->num_rows > 0){ # if data more than 0 [ that also mean "if not empty" ]

        # Declare the output field of database
        $out_id    = NULL;
        $out_name  = NULL;
        $out_age   = NULL;
        if (!$query->bind_result($out_id, $out_name , $out_age)) {
            /* 
             * Blind result should same with your database table !
             * Example : my database
             * -users
             * id   (  11     int )
             * name ( 255  string )
             * age  (  11     int )
             * then the blind_result() code is : bind_result($out_id, $out_name , $out_age)
             */
            echo "Binding output parameters failed: (" . $query->errno . ") " . $query->error;
        }

        while ($query->fetch()) {
            # print the out field 
            printf("id = %s <br /> name = %s <br /> age = %s <br />", $out_id, $out_name , $out_age);
        }

    }else{
        echo "not valid";
    }

}
the_names("panji asmara"); 
```

参考 ：

[http://php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

# php - Symfony2 如何动态添加所需的表单字段

> ID：15951869
> 
> 赞同：0
> 
> 时间：2013-04-11T14:47:20.450
> 
> 标签：php, forms, validation, symfony

在 Form-Builder 中，我可以选择 a`Credit Card`或`Bill Payment Type`.

根据选择的内容，将加载其他表单域`i.e. CC-Number or Bank Account`。

如果选择了信用卡，我需要将 CC-Number 输入作为必填字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:15:50.663

我自己找到了一个适合我需要的解决方案：

如果一个字段是必需的，它具有 required="required" 属性。所以我做了一点 jQuery，它在隐藏或显示的元素上删除或添加此属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:33:03.543

您可以按照[后端的食谱条目进行](http://symfony.com/doc/master/cookbook/form/dynamic_form_modification.html#cookbook-form-events-underlying-data)操作，客户端所需的 Javascript 代码由您决定。

# .net - 使excel在html表中显示尾随零

> ID：15951870
> 
> 赞同：0
> 
> 时间：2013-04-11T14:47:21.287
> 
> 标签：.net, excel, html-table, zero

如何在 excel 中查看的 html 表中显示尾随零？

我已经检查了记事本++ 中的 html，所以我知道它们在那里。

该表是在 .ashx 中构建的，扩展名为 .xls。

**细节**

我希望为用户自动格式化数字。

我希望仍然能够将数字操作为数字（如果显示为文本）。

**我如何在 ashx 中建表**

```
If sqlDataset.Tables(0).Rows.Count > 0 Then
    context.Response.BufferOutput = False
    Dim response As HttpResponse = context.Response

    context.Response.AddHeader("content-disposition", "attachment; filename=Total Quote Sheet " & DateTime.Now() & ".xls")
    context.Response.ContentType = "application/ms-excel"
    Dim outputHTML As String

    Using sw As StringWriter = New StringWriter
        Using ht As HtmlTextWriter = New HtmlTextWriter(sw)

            Dim table As New Table

            Dim headings = {"Article Number", "Quantity Quote", "SAP Supplier #", "Cost Code", "Unit Cost", "Extended Cost", "SAP Description", "Status"}
            Dim HeaderRow As New TableRow
            HeaderRow.ForeColor = Drawing.Color.White
            For Each heading As String In headings
                Dim Cell As New TableCell
                Cell.Text = heading
                Cell.BorderWidth = 1
                Cell.BorderColor = Drawing.Color.Black
                Cell.BorderStyle = BorderStyle.Solid
                Cell.BackColor = System.Drawing.ColorTranslator.FromHtml("#003797")
                HeaderRow.Cells.Add(Cell)
            Next

            table.Rows.Add(HeaderRow)

            For u As Integer = 0 To sqlDataset.Tables(0).Rows.Count - 1

                Dim DataRow As New TableRow
                Dim dataColumnNames = {"AN", "QB", "SSN", "CC", "UC", "EC", "AD", "BAI"}
                For Each dataColumnName As String In dataColumnNames
                    Dim Cell As New TableCell
                    Cell.Text = sqlDataset.Tables(0).Rows(u).Field(Of Object)(dataColumnName)
                    Cell.BorderWidth = 1
                    Cell.BorderColor = Drawing.Color.Black
                    Cell.BorderStyle = BorderStyle.Solid
                    If dataColumnName = "BAI" Then
                        Select Case sqlDataset.Tables(0).Rows(u).Field(Of Object)(dataColumnName)
                            Case "U"
                                Cell.Text = "Undecided"
                            Case "A"
                                Cell.Text = "Accepted"
                            Case "R"
                                Cell.Text = "Rejected"
                        End Select
                    End If
                    DataRow.Cells.Add(Cell)
                Next

                table.Rows.Add(DataRow)
            Next
            table.RenderControl(ht)
            outputHTML = sw.ToString()
            context.Response.Write(outputHTML)
        End Using
    End Using

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:50:25.980

您需要将值显示为文本。有三种方法可以做到这一点，一种是将单元格格式设置为文本，使用 text() 函数，或者如果您正在导入它，您可以将数据类型更改为文本。

# python - 如何在 Windows 上命名/查找特定运行的 python 脚本进程？

> ID：15951878
> 
> 赞同：1
> 
> 时间：2013-04-11T14:47:35.597
> 
> 标签：python, windows, process, kill, pythonw

**在窗户上：**

我有两个脚本：

1.  客户端.py
2.  控制台.py

**Q1：** 客户端可以运行多次，但只能运行单个实例。它正在使用 pythonW.exe 运行

**Q2：** 可以同时运行多个console.py。但是最后一个关闭应该杀死client.py

**限制：**

1.  强烈宁愿不写任何文件。（即使用按窗口名称、PID 等搜索...）
2.  强烈建议不要为 python 安装任何额外的模块。即使用ctypes等...

对于第一季度，我尝试做`ctypes.windll.user32.SetWindowTextA ("NAME")`然后搜索它。它适用于 python.exe 但不适用于 pythonW.exe 因为那时没有控制台窗口。

谢谢！

# html - 在 Jade 有视频

> ID：15951881
> 
> 赞同：0
> 
> 时间：2013-04-11T14:47:42.170
> 
> 标签：html, html5-video, pug

我正在 Expressjs 中使用 Node.js 和 Jade 创建一个网站，我想嵌入一个视频。我还想要一个能够快进和快退的视频播放器。我想知道 Jade 是否有能力做到这一点，因为我到处搜索，找不到一个在 Jade 中播放视频的例子。

我知道 HTML5 有视频标签，但我在尝试转换它时遇到了问题，它不会播放我的视频。这是我的玉代码：

```
video(width='320', height='240', controls='controls', autoplay='autoplay')
 source(src='/movieTest.ogg', type='video/ogg')
  object(data='/movieTest.ogg', width='320', height='240')
   embed(width='320', height='240', src='/movieTest.ogg') 
```

我可以在 Jade 中执行此操作还是需要另一种方法？（如果你告诉我怎么做就超级有用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-08T15:44:50.727

你有几件事要解决。您的代码没有很好的缩进并且不正确，因为它有错误（注意**autoplay**属性）。下面你可以看到一段正确的代码：

```
video(width='320', height='240', autoplay='')
    source(src='/video/movie.mp4', type='video/mp4')
    source(src='/video/movie.ogg', type='video/ogg') 
```

视频应存储在Express 脚手架的公用文件夹中**。**

[您可以在http://audiolibros.azurewebsites.net/](http://audiolibros.azurewebsites.net/)查看演示。

[您可以在GitHub 上](https://github.com/pmargom/NodeMySQLSamples/blob/master/views/index.jade)查看源代码。

最后，一个很棒的转换 html2jade.org 的工具可以帮助你

希望这可以帮助，

问候。

# java - 如何在 Netbeans 上为 Java 桌面应用程序设置单选按钮初始值？

> ID：15951883
> 
> 赞同：2
> 
> 时间：2013-04-11T14:47:45.910
> 
> 标签：java, swing, netbeans, jradiobutton

我正在开发的这个应用程序有三个单选按钮，但我需要打开 JFrame 并选择其中一个，另外两个不选择。

在 JFrame 加载后，我调用以下方法：

```
private void initJRadio() {
    jRadioButton1.setSelected(false);
    jRadioButton2.setSelected(true);
    jRadioButton3.setSelected(false);
} 
```

但是在加载 JFrame 时出现以下异常：

> StockJFrame.initJRadio 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常（StockJFrame.java:139）

其中 StockJFrame 是类名，139 是“jRadioButton1.setSelected(false);”的行号

在此类的 Source 窗格中，Netbeans 添加了以下行：

```
jRadioButton1 = new javax.swing.JRadioButton();
jRadioButton2 = new javax.swing.JRadioButton();
jRadioButton3 = new javax.swing.JRadioButton();

jRadioButton1.setText(/*label value*/);
jRadioButton1.setToolTipText(/*some tooltip text*/);
jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        jRadioButton1ActionPerformed(evt);
    }
});

jRadioButton2.setText(/*label value*/);
jRadioButton2.setToolTipText(/*some tooltiptext*/);
jRadioButton2.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        jRadioButton2ActionPerformed(evt);
    }
});

jRadioButton3.setText(/*label value*/);
jRadioButton3.setToolTipText(/*some tooltip text*/);
jRadioButton3.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        jRadioButton3ActionPerformed(evt);
    }
}); 
```

如何正确设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:01:59.363

在您的代码中的某个时刻，`jRadioButton1`（和其他）必须（它们可能已经）通过`jRadioButton1 = new javax.swing.JRadioButton()`.

如果我没记错的话，NetBeans 生成的代码默认情况下会在一个名为`initComponents()`. 此外，`initComponents()`通常在构造函数中调用。

找出初始化发生的位置（`initComponents()`或其他地方）并确保`initJRadio()`仅 在此**之后**调用。

**更新：**

发布更多代码后，您可以在`initJRadio()`粘贴的最后一个命令之后立即调用。（即，`jRadioButton3.addActionListener(new ... });`）。

PS.:`java.lang.NullPointerException`意思是你的对象还`null`没有被初始化，也就是如上所述，它还没有被初始化。

# c# - 如何使用 REST (ListData.svc) 更新文档属性？

> ID：15951887
> 
> 赞同：1
> 
> 时间：2013-04-11T14:47:51.007
> 
> 标签：c#, rest, sharepoint, sharepoint-2013

我想请教专家。有谁知道如何使用 REST (ListData.svc) 更新文档属性？

我可以使用波纹管代码更新列表项属性。但是在将波纹管用于文档库时出现 500 内部错误。

```
 HttpClientHandler handler = new HttpClientHandler();
        handler.CookieContainer = _cookieContainer;
        HttpClient cl = new HttpClient(handler);

        cl.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("application/json"));
        cl.DefaultRequestHeaders.IfMatch.Add(System.Net.Http.Headers.EntityTagHeaderValue.Any);

        JsonObject updateObj = new JsonObject();
        updateObj["title"] = JsonValue.CreateStringValue("titletest");
        updateObj["column01"] = JsonValue.CreateStringValue("columntest01");
        HttpContent jsonContent = new StringContent(updateObj.Stringify(), Encoding.UTF8, "application/json");

        HttpResponseMessage res = cl.PutAsync("http://xxxxx.sharepoint.com/_vti_bin/ListData.svc/announcements(1)", jsonContent).Result; 
```

# umbraco - umbraco - 如何按文档类型获取所有节点

> ID：15951888
> 
> 赞同：3
> 
> 时间：2013-04-11T14:47:52.077
> 
> 标签：umbraco

如何按特定获取所有节点`Document Type`？

例如，我想在所有节点后面使用`Document Type: s3Article`. 我怎样才能做到这一点？

* * *

新信息：

```
 IEnumerable<Node> nodes = uQuery.GetNodesByType("s3Article").Where(x => x.NiceUrl.Contains("en"));

    lvArticles.DataSource = nodes;
    lvArticles.DataBind(); 
```

这是我的代码。我必须使用`Where(x => x.NiceUrl.Contains("en"))`，因为我有 2 种语言版本 - 没有`Where`收到来自所有目录的 doctype 节点`s3Article`，但我只想从一种语言版本中获取。

问题在这里：

```
<a href='<%# umbraco.library.NiceUrl(Tools.NumericTools.tryParseInt( Eval("id"))) %>'><%# Eval("title")%></a>
<%# Tools.TextTools.makeIMGHTML("../.."+ Eval("img").ToString(),"180") %>
<%# umbraco.library.StripHtml(Limit(Eval("Article"), 1000))%>
<%# Eval("author")%> 
```

> System.Web.HttpException：DataBinding：“umbraco.presentation.nodeFactory.Node”不包含名为“title”的属性。

标题、img、文章、作者也会出现同样的问题。只有 ID 工作得很好。如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:02:30.487

您可以使用[uQuery](http://our.umbraco.org/documentation/Reference/Querying/uQuery/) [`GetNodesByType(string or int)`](http://our.umbraco.org/documentation/Reference/Querying/uQuery/Content/Nodes#GetNodesByType%28stringorint%29)方法：

```
IEnumerable<Node> nodes = uQuery.GetNodesByType("s3Article"); 
```

或者，您可以使用扩展方法获取所有后代节点，然后按类型查询它们，如以下答案所示：

[Umbraco 4.6+ - 如何在 C# 中按 doctype 获取所有节点？](https://stackoverflow.com/a/8360342/1110395)

* * *

您可以使用它来将数据绑定到用户控件中的控件，如下所示：

```
lvArticles.DataSource = nodes.Select(n => new {
    ID: n.Id,
    Title: n.GetProperty("title").Value,
    Author: n.GetProperty("author").Value,
    Article: n.GetProperty("article").Value,
    Image: n.GetProperty("img").Value,
});
lvArticles.DataBind(); 
```

只有您需要在 select 语句中剥离 html、将图像 id 转换为 url 等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T18:54:08.503

正如 Shannon Deminick 提到的，uQuery 有点过时了。ExamManager 将是最快的执行时间。[https://our.umbraco.org/forum/developers/api-questions/45777-uQuery-vs-Examine-vs-IPublishedContent-for-Querying](https://our.umbraco.org/forum/developers/api-questions/45777-uQuery-vs-Examine-vs-IPublishedContent-for-Querying)

我还发现它是使用 ExamineManager 的搜索构建器的最简单和最易读的方法。非常灵活，并且由于 U 团队使用的 Fluent Builder 模式而具有非常易读的额外好处。

这将搜索所有节点，因此如果您需要在特定分支中，您可以使用 .ParentId(1234) 等。

```
var query = ExamineManager.Instance.CreateSearchCriteria()
                          .NodeTypeAlias("yourDocumentType")
                          .Compile();

IEnumerable<IPublishedContent> myNodes = Umbraco.TypedSearch(query); 
```

我更喜欢类型化节点，但如果你更喜欢动态节点，你也可以只使用“Search()”而不是“TypedSearch()”。

另一个示例包括特定属性值“myPropValue”==“ABC”，

```
var query = ExamineManager.Instance.CreateSearchCriteria()
                    .NodeTypeAlias("yourDocumentType")
                    .Or() //Other predicate .And, .Not etc. 
                    .Field("myPropValue", "ABC")
                    .Compile(); 
```

参考 - [https://our.umbraco.org/documentation/reference/querying/umbracohelper/](https://our.umbraco.org/documentation/reference/querying/umbracohelper/)

# xamarin.ios - UITableView RowSelected 没有被调用？

> ID：15951889
> 
> 赞同：2
> 
> 时间：2013-04-11T14:48:02.977
> 
> 标签：xamarin.ios, xamarin, uitableview

我有`UITableView`一个子`UITableViewSource`类：

```
table = new UITableView(window.Bounds);
table.Source = new CellSource();

public class CellSource : UITableViewSource
{
    // etc etc 
```

我正在尝试获取选定的行，因此`RowSelected`在我的源类中实现了该方法：

```
public override void RowSelected(UITableView tableview, NSIndexPath indexpath) {
    Console.WriteLine("User tapped");
} 
```

但是，点击单元格根本没有任何响应，即使只是尝试写入控制台也是如此。

如果有帮助，我可以发布完整的课程吗？

谢谢。

**编辑**

所以，在我创建我的之后`UITableView`：

```
table = new UITableView(window.Bounds);
table.AutoresizingMask = UIViewAutoresizing.All;
table.SeparatorStyle = UITableViewCellSeparatorStyle.None;
table.BackgroundColor = UIColor.Clear;
table.Source = new CellSource(); 
```

我使用我的源类来解析 XML 文件，并填充一个列表：

```
List<Treasure> treasures = new List<Treasure>();

protected class Treasure {
    public string cellTitle { get; set; }
    public string cellTag { get; set; }
    public string cellImage { get; set; }
    public string audioFile { get; set; }
    public string mainTitle { get; set; }
    public string mainTag { get; set; }
    public string mainBody { get; set; }
    public string mainImage { get; set; }
    public string mainCaption { get; set; }
}

public CellSource (/*string[] items*/)
{
    Console.WriteLine("CellSource called");
    string fileName = "treasuresiPhone.xml";
    XDocument doc = XDocument.Load(fileName);
    treasures = doc.Descendants("treasures").FirstOrDefault().Descendants("treasure").Select(p=> new Treasure() {
        cellTitle = p.Element("celltitle").Value,
        cellTag = p.Element("celltagline").Value,
        cellImage = p.Element("cellimage").Value
    }).ToList();

    numCells = treasures.Count();       
} 
```

然后我在另一个类中创建一个`CGBitmapContext`，返回图像，并将其设置为单元图像：

```
public UIImage DrawCell (string cellImage) {
    string cellI = cellImage;
    //create a new graphics context
    int width = 320;
    int height = 110;
    CGBitmapContext ctx = new CGBitmapContext(IntPtr.Zero, width, height, 8, 4*width, CGColorSpace.CreateDeviceRGB(), CGImageAlphaInfo.PremultipliedFirst);

    //load an image
    var imagePath = (@cellI);
    var image = UIImage.FromFile(imagePath).CGImage;
    ctx.DrawImage(new RectangleF(0, 0, width, height), image);

    UIImage returnedImage = new UIImage();
    returnedImage = FromImage(ctx.ToImage());

    return returnedImage;
} 
```

我添加了一些其他测试内容，例如标签，并覆盖了该`RowSelected`方法：

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath) {
    UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);

    cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);
    cell.UserInteractionEnabled = false;
    UILabel secondViewLabel = new UILabel();

    //if there are no cells create a new one
    if (cell == null) {
        Console.WriteLine("cell == null");
    } else {

        //create a new cellobject - this grabs the image and returns a CGBitmapContext
        CellObject _cellObject = new CellObject();
        cell.ImageView.Image = _cellObject.DrawCell(treasures[indexPath.Row].cellImage);

        //add text
        secondViewLabel.Tag = 1;
        secondViewLabel.Text = treasures[indexPath.Row].cellTitle;
        secondViewLabel.TextColor = UIColor.White;
        secondViewLabel.TextAlignment = UITextAlignment.Center;
        secondViewLabel.Lines = 0;
        secondViewLabel.LineBreakMode = UILineBreakMode.WordWrap;
        secondViewLabel.Font = UIFont.FromName("Helvetica", 16);
        secondViewLabel.BackgroundColor = UIColor.FromRGB(205, 54, 51);

        //get the width of the text
        SizeF labelSize = secondViewLabel.StringSize(secondViewLabel.Text, secondViewLabel.Font);

        secondViewLabel.Frame = new RectangleF(0, 110 - (labelSize.Height + 10), labelSize.Width + 20, labelSize.Height + 10);

        //add a second view
        UIView secondView = new UIView();
        secondView.AddSubview(secondViewLabel);
        cell.ContentView.AddSubview(secondView);
    }
    return cell;
}

public override void RowSelected(UITableView tableview, NSIndexPath indexpath) {
    Console.WriteLine("User tapped");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:57:28.200

在 Monotouch`UITableViewSource`中是组合的`UITableViewDataSource`和`UITableViewDelegate`用于`UITableView`. 因此，当您扩展此类时，您可以利用数据源和委托中的方法。

说到这里，我会稍微修改一下你的代码（见评论）。

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
{
    UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);

    // if there are no cells create a new one
    if (cell == null) {
        cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);      

        // why do you set the interaction to false? Setting it to false disable interaction for your cell
        cell.UserInteractionEnabled = true;

        // create label and view here. You customize the cell with additional elements once

    }

    // update image and label here (you need to grab a reference for your label for example through the tag)

    return cell;
} 
```

另请参阅 Xamarin 文档中的[使用表格和单元格。](http://docs.xamarin.com/guides/ios/user_interface/tables)

希望能帮助到你。

# html - 没有固定尺寸的 HTML 标题/侧边栏布局

> ID：15951892
> 
> 赞同：0
> 
> 时间：2013-04-11T14:48:11.573
> 
> 标签：html, css, layout

我目前正在设计一个布局非常简单的网站，由左侧的标题和侧边栏组成，如下所示：

```
+--------------+
| Header       |
+---+----------+
| N | Page     |
| a | content  |
| v |          |
+---+----------+ 
```

有数百个站点具有类似的布局。但是，它们似乎都分别为侧边栏和标题使用了固定的宽度和高度——这是我非常不喜欢的；为什么我的侧边栏不应该完全占据它所需要的空间？

我目前的方法使用以下文档结构：

```
<body>
  <div id="container">
    <header>
      <!-- Header -->
    </header>
    <div id="page">
      <nav id="mainNav">
        <!-- Navigation sidebar -->
      </nav>
      <div id="content">
        <!-- Content -->
      </div>
    </div>
  </div>
</body> 
```

风格与

```
html, body {
  height: 100%;
  margin: 0;
}

#container {
  display: table
  width: 100%;
}

#page {
  display: table-row;
}

header {
  caption-side: top;
  display: table-caption;
}

nav#mainNav {
  display: table-cell;
  white-space: nowrap;
  width: 0; /* to achieve minimum width */
}

#content {
  display: table-cell;
} 
```

这接近我想要的。被`<header>`样式化为表格标题，因为它必须跨越整个宽度（也因为它有点有意义）。现在，我还希望布局占据所有可用高度。但是，设置`height: 100%`为`#container`（伪表）会使整个事物高于视口，因为高度不包括任何标题。

有什么方法可以完成这个相当微不足道的任务，而不必手动设置高度和宽度（以及相应的边距）？

# eclipse - Eclipse .settings 文件夹和 .project 文件位置

> ID：15951896
> 
> 赞同：2
> 
> 时间：2013-04-11T14:48:24.977
> 
> 标签：eclipse, workspace

我有一个巨大的 maven 项目，其中包含很多模块，并使用 intellij IDEA 进行编码，使用 eclipse 来格式化代码并使用 SVN 作为 VCS。所以 eclipse 创建了这些 .settings 文件夹和 .project 文件，并在项目文件夹中弄得一团糟。
我想要实现的是将这些 .project 和 .settings 移动到其他位置，以便在 intellij idea 文件树中不包含它们，也不在 SVN 中对其进行跟踪。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:51:29.257

颠倒你的想法。在 Eclipse 元数据文件的存在不会打扰您的位置创建 Eclipse 项目。然后将您的源目录链接到项目中。

新建 -> 文件夹 -> 高级 -> 链接到备用位置

# soap - SoapUI 端点随机错误

> ID：15951898
> 
> 赞同：7
> 
> 时间：2013-04-11T14:48:26.600
> 
> 标签：soap, soapui, jax-rpc

我不了解 SoapUI 和他的模拟服务的行为。我正在使用 SoapUI（测试用例）的客户端和带有 JAX-RPC 的 Java EE 应用程序。

**我的问题是：**

当我尝试从我的 Java 客户端或 SoapUI 的测试用例调用任何 web 服务时，mockservice 在第一次调用时返回一个很好的消息，在第二次调用时返回下面的错误，不管调用是否相同。但是，如果我在等待，它会起作用...

所以，我在 SOAPui 中启用了选项：“*在每个 SOAP 请求后关闭 HTTP 连接*”，它一直有效......

**所以我的问题是：**

“**这是模拟服务的正常行为吗，如何用我的java客户端实现这个？** ”

谢谢你们。

```
 <soapenv:Fault>
         <faultcode>Server</faultcode>
         <faultstring>Missing operation for soapAction [] and body element [null] with SOAP Version [SOAP 1.1]</faultstring>
      </soapenv:Fault> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:22:31.527

好的，我在 SoapUI 的论坛上找到了解决方案：[http ://www.soapui.org/forum/viewtopic.php?t=5648](http://www.soapui.org/forum/viewtopic.php?t=5648)

> 当您将设置标志“所有模拟请求的 HTTP 设置/日志线路内容”设置为 true 时。=>取消选中标志，它工作正常！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-02T11:28:39.420

非常感谢 ！

我有同样的问题，使用 SoapUI 5.1.2 Pro。在收到对 MockService 的第一个异步响应后，MockService 停止并且无法再接收到我发送的请求的任何响应。错误消息是：Thu Jul 02 12:59:44 CEST 2015:ERROR:An error occurred [Missing operation for soapAction [XXXX] and body element [null] with SOAP Version [SOAP 1.1]]，有关详细信息，请参阅错误日志

在 SoapUI 设置中：文件->首选项->Http 设置：“启用模拟 HTTP 日志”，取消选中框：“记录所有模拟请求的线路内容”。

现在我连续收到了几个异步响应，然后对它们进行响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T07:59:42.587

当两个模拟服务在 SoapUI 上使用相同的端点地址（包括端口和路径）运行时，可能会发生同样的问题。

# git - Cygwin下的Git提示输入ssh-askpass

> ID：15951911
> 
> 赞同：0
> 
> 时间：2013-04-11T14:48:50.637
> 
> 标签：git, cygwin, openssh

`ssh-askpass`通常是提示您输入密码的 GUI 样式程序的别名，它通常带有 X 或显示管理器... Cygwin 没有提供这样的东西/我不想为此安装 X...

会发生什么/为什么我会收到此提示？为什么它不能从终端读取它？

**编辑：**

这就是`git config --list`为我打印的内容：

```
git config --list
core.symlinks=false
core.autocrlf=false
color.diff=auto
color.status=auto
color.branch=auto
color.interactive=true
pack.packsizelimit=2g
help.format=html
http.sslcainfo=/bin/curl-ca-bundle.crt
sendemail.smtpserver=/bin/msmtp.exe
diff.astextplain.textconv=astextplain
rebase.autosquash=true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:55:19.733

经过一番挣扎和搜索，我终于找到了这个：[https](https://superuser.com/questions/158673/cygwin-git-bizarre-terminal-issue) ://superuser.com/questions/158673/cygwin-git-bizarre-terminal-issue 糟糕的默认值、不一致的 API 和包维护者的糟糕组合超出了日常工作。 ..

# php - if, else if echo 语句

> ID：15951917
> 
> 赞同：4
> 
> 时间：2013-04-11T14:49:09.320
> 
> 标签：php, mysql, if-statement

如果值为 1，则单元格 bg 为绿色，单元格中带有 #1 如果值为 0，则单元格 bg 为黄色，其中包含 0。

我想显示“是”而不是“1”和“否”而不是“0”

```
 if($row['play']  == 1){
        echo "<td bgcolor='green'>" . $row['play'] . "</td>";
        }
     else if ($row['play']  == 0){
        echo "<td bgcolor='yellow'>" . $row['play'] . "</td>";
        } 
```

值来自复选框 (1) 和隐藏字段 (0) MySQL 字段为 BOOL。

有没有更简单/更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:51:02.313

你可以这样做：

```
 if($row['play']  == 1){
    echo "<td bgcolor='green'>Yes</td>";
    }
 else if ($row['play']  == 0){
    echo "<td bgcolor='yellow'>No</td>";
    } 
```

但我会说那`switch/case`件事更舒服：

```
switch( $row['play'] ) {
   case 1:
       echo "<td bgcolor='green'>Yes</td>";
       break;

   default:
       echo "<td bgcolor='yellow'>No</td>";
       break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:51:39.730

您可以将其转换为 int，然后在它高于零时创建一个条件：

```
if((int)$row['play'] > 0) {
    echo "<td bgcolor='green'>Yes</td>";
}
else {
    echo "<td bgcolor='yellow'>No</td>";
} 
```

这样，`play`可以是 1, 2, 3, 4, 5, ..etc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:51:41.363

```
$words = array(
 0 => "No",
 1 => "Yes"
) ;

if($row['play']  == 1){
  echo "<td bgcolor='green'>" . $words[(int)$row['play']] . "</td>";
} else if ($row['play']  == 0){
  echo "<td bgcolor='yellow'>" . $words[(int)$row['play']] . "</td>";
} 
```

甚至更好：

```
$map = array(
  0 => array("word"=>"No", "color"=>"yellow"),
  0 => array("word"=>"Yes", "color"=>"green"),
) ;

$current = (int) $row['play'] ;
echo "<td bgcolor='{$map[$current]['color']}'>{$map[$current]['word']}</td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:53:12.723

试试这个

```
if($row['play']  == 1)
{
    echo "<td bgcolor='green'>Yes</td>";
}
 else if ($row['play']  == 0)
{
    echo "<td bgcolor='yellow'>No</td>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:53:35.637

这样的事情会做到 -

```
echo "<td bgcolor='" . $row['play'] == 1 ? "green" : "yellow" . "'> . $row['play'] == 1 ? "No" : "Yes" . "</td>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T14:54:04.440

您可以通过执行以下操作来减少 echo 语句：

```
if($row['play']  == 1){
   $color = 'green';
   $text = 'yes';
}
else
{
   $color = 'red';
   $text = 'no'; 
}
// Assign the color and text values based on the input.

echo "<td bgcolor=$color>$data</td>"; 
```

# c# - NAudio - 如果再次调用 Play() 则播放停止

> ID：15951919
> 
> 赞同：0
> 
> 时间：2013-04-11T14:49:17.260
> 
> 标签：c#, naudio

我正在编写游戏并将 NAudio 与 WaveOut 一起使用。发生碰撞时播放声音。问题是声音播放了几次，如果碰撞再次发生几秒钟后，声音就不会播放了。我正在使用这段代码。

```
WaveOut device = new WaveOut();
WaveStream source = new Mp3FileReader("hit.mp3");

device.Init(source); 
```

玩它，

```
source.Position = 0;
source.CurrentTime = TimeSpan.Zero;
device.Play(); 
```

我忘记了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T19:12:44.347

试着看看 Mark Heath 的这个指令，关于如何使用 NAudio 进行“一劳永逸”的音频播放：

[http://mark-dot-net.blogspot.co.uk/2014/02/fire-and-forget-audio-playback-with.html](http://mark-dot-net.blogspot.co.uk/2014/02/fire-and-forget-audio-playback-with.html)

# ruby-on-rails - 在迁移期间跳过 ActiveRecord concat 的验证？

> ID：15951920
> 
> 赞同：0
> 
> 时间：2013-04-11T14:49:18.540
> 
> 标签：ruby-on-rails, ruby, rails-migrations

我有一个使用 ActiveRecord concat 方法将对象添加到另一个对象的 has_many 关系的迁移。自创建迁移以来，我已向包含验证的父模型添加了一个新属性。

不幸的是，早期的迁移被破坏了，因为 concat 试图保存父对象，并且验证找不到关联的属性（它还不存在）。我是否错误地进行了数据迁移？

这是迁移：

```
class RemoveTransportKeyFromInvites < ActiveRecord::Migration
  def up
    Invite.find_each do |invite|
      transport_key = Invite.where(id: invite.id).pluck(:transport_key).first
      guest_user = GuestUser.first_or_create!(transport_key: transport_key)
      guest_user.invites << invite
    end
    remove_column :invites, :transport_key
  end

  def down
    add_column :invites, :transport_key, :string
  end
end 
```

和模型：

```
class Invite < ActiveRecord::Base
  # some code omitted
  validates_presence_of :inviter_email
  # rest of code omitted 
```

导致此错误：

```
undefined method `inviter_email' for #<InviteToMeal:0x007f8ece07c060> 
```

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:13:28.783

规定的方法是在迁移中定义一个“存根”模型，以便不会加载真实模型（带有验证）。 `find_each`并且其他 ActiveRecord 调用仍然有效。

```
class RemoveTransportKeyFromInvites < ActiveRecord::Migration
  class Invite < ActiveRecord::Base; end

  def up
    # etc.. 
```

有关更多信息，请参阅[本指南](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations)。

# ruby-on-rails-3 - NilClass 的未定义方法“model_name”：编辑表单中的类

> ID：15951921
> 
> 赞同：0
> 
> 时间：2013-04-11T14:49:20.970
> 
> 标签：ruby-on-rails-3, model, routes

我有一个可以创建和编辑记录的 rails 应用程序。我创建了一个表单来输入数据，当我使用新/创建操作时它可以正常工作。它会创建一个记录没有问题。但是当我点击编辑操作时，它给了我一个 NilClass:Class 的未定义方法'model_name'。

我不确定这意味着什么。有人可以帮帮我吗？

形式：

```
<%= form_for(@patient) do |f| %>

<%= f.label :Patient_Last_Name %>
<%= f.text_field :patient_last %>
<%= f.label :Patient_First_Name %>
<%= f.text_field :patient_first %>
<%= f.label :Patient_DOB %>
<%= f.date_select :patient_dob %>

<%= f.label :Primary_Diagnosis %>
<%= f.collection_select(:diagnosis_id, Diagnosis.all, :id, :diagnosis_name)%></br>
<%= f.label :Primary_Physician %>
<%= f.collection_select(:physician_id, Physician.all, :id, :physician_name)%></br>
<%= f.button :submit %>
<% end %> 
```

查看代码：

```
<td><%= link_to 'Edit', edit_patient_path(patient), :class => 'btn btn-close btn-mini'%></td> 
```

控制器代码：

```
 def edit
    @patient = Patient.find(params[:id])
  end 
```

编辑视图：

```
<%= render 'form' %> 
```

当我从表单中删除部分渲染时，URL 将转到正确的路由/url。但是当呈现部分表单时，我不断收到该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:26:13.357

我的控制器中有一个额外的结束语句，它切断了包含编辑操作的类的一半。这不允许我使用编辑操作。一旦这个错字被修复，事情就开始正常工作了。

对困惑感到抱歉。

# android - 如何正确更新此科尔多瓦插件？(execute() CallbackContext PluginResult)

> ID：15951924
> 
> 赞同：1
> 
> 时间：2013-04-11T14:49:23.290
> 
> 标签：android, cordova, admob

我正在尝试更新在 github 上找到的尚未更新的插件 (AdMob)

[https://github.com/rajpara11/phonegap-plugins/blob/master/Android/AdMobPlugin/AdMobPlugin.java](https://github.com/rajpara11/phonegap-plugins/blob/master/Android/AdMobPlugin/AdMobPlugin.java)

相关代码是有效的，但需要一些修复：

```
public boolean execute(String action, JSONArray inputs, CallbackContext callbackContext)
{
    PluginResult result = null;

    if (ACTION_CREATE_BANNER_VIEW.equals(action)) {
        result = this.executeCreateBannerView(inputs);
    } else if (ACTION_REQUEST_AD.equals(action)) {
        result = executeRequestAd(inputs);
    } else {
        Log.d(LOGTAG, String.format("Invalid action passed: %s", action));
        callbackContext.error(String.format("Invalid action passed: %s", action));
    }

    // ...

} 
```

我需要添加的是对`result`变量的检查，我正在考虑做这样的事情

```
if(result == PluginResult.Status.OK)
{
    callbackContext.success();
    return true;
}
return false; 
```

但当然它不会工作......我怎样才能正确更新它？文档没有帮助，

而且我的Java还不够忍者:(

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:54:29.363

我在核心插件中看到的方法是在类的开头有一个私有的 CallbackContext 变量，然后在你的 execute() 中，设置`this.callbackContext = callbackContext` 现在你可以使用 execute() 方法来比较操作的值字符串并委托给您的私有方法。在这些方法中，您将执行 callbackContext.sendPluginResult(...)。根据操作是否有效，您在 execute() 中返回 true 或 false。

所以我认为它应该看起来像：

```
public boolean execute(String action, JSONArray inputs, CallbackContext callbackContext)
{
    this.callbackContext = callbackContext;

    if (ACTION_CREATE_BANNER_VIEW.equals(action)) {
       this.executeCreateBannerView(inputs);
       return true;    // return true because this is a valid action
    } else if (ACTION_REQUEST_AD.equals(action)) {
        executeRequestAd(inputs);
        return true;
    } else {
        Log.d(LOGTAG, String.format("Invalid action passed: %s", action));
        return false;
        // could possibly do the following to send NO_RESULT:
        // callbackContext.sendPluginResult(newPluginResult.Status.NO_RESULT));
    }
} 
```

然后：

```
private void executeCreateBannerView(inputs){
    //after doing all of your work:
    callbackContext.success();
    // or callbackContext.sendPluginResult() to pass data back 

} 
```

希望这可以帮助。

# jquery - jQuery/CSS3 无法让动画并行运行

> ID：15951926
> 
> 赞同：1
> 
> 时间：2013-04-11T14:49:25.033
> 
> 标签：jquery, jquery-animate, css-transitions, parallax

# 问题演示

[http://jsfiddle.net/8yTY8/2/](http://jsfiddle.net/8yTY8/2/)

# 解释

我试图让一个元素移动，并让一个 CSS 类在内部元素上运行一些动画。但是，如果我在外部元素上运行 jquery 动画之前应用该类，则该类将不起作用（它甚至不会移动到新位置，更不用说动画了）。

看看我的意思运行动画。然后注释掉`$('#box .inner-box').addClass('animate')`并取消注释它说“它在这里不起作用”的同一行。

# 这个是来做什么的？

这是用于我的自定义滑块，因此当幻灯片进入时，内容已经在动画化（这样看起来好多了）。

那么我怎样才能让它们并行运行呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:01:20.390

根据您的示例，您没有使用相同的选择器。这对我有用：

```
$(document).ready(function() {
    $('#box .inner-box').addClass('animate');  // it doesn't work here!
    $('#box').animate({top:'150px'}, 2000, 'swing', function() {
        //$('#box .inner-box').addClass('animate');
    });        
}); 
```

请注意我必须如何更改第一行（它在这里不起作用！）以添加`.inner-box`到选择器，就像您在动画完成函数中所做的那样。

那是你想要做的吗？它似乎对我来说是并行动画。

[http://jsfiddle.net/8yTY8/3/](http://jsfiddle.net/8yTY8/3/)

# jvm - JVM 是否曾经重新编译编译过的代码？

> ID：15951934
> 
> 赞同：1
> 
> 时间：2013-04-11T14:49:45.457
> 
> 标签：jvm, runtime, jit

JVM（其中任何一个）是否曾经重新编译已经在运行时编译的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:38:40.140

这取决于您所说的重新编译是什么意思，但是当证明错误或不再相关时，HotSpot VM 将丢弃依赖于乐观假设的代码。见[去优化](https://wikis.oracle.com/display/HotSpotInternals/PerformanceTechniques#PerformanceTechniques-Deoptimization)：

> 去优化是将优化的堆栈帧更改为未优化的堆栈帧的过程。对于编译方法，它也是丢弃具有无效乐观优化的代码，并用优化程度较低但更健壮的代码替换它的过程。

第四点特别有趣：

> 如果加载的类使早期的类层次结构分析无效，则任何线程中的任何受影响的方法激活都将被强制到安全点并取消优化。

这适用于[本文](http://www.stanford.edu/class/cs343/resources/java-hotspot.pdf)所述的乐观方法内联：

> 类层次分析 (CHA) 用于检测当前仅存在一种合适方法的虚拟呼叫站点。然后乐观地内联此方法。如果稍后加载的类添加了另一个合适的方法，因此乐观假设不再成立，则该方法将被取消优化。

# java - 实现 LRU 缓存的最佳方法

> ID：15951935
> 
> 赞同：3
> 
> 时间：2013-04-11T14:49:46.177
> 
> 标签：java, multithreading, caching, collections, lru

我想创建一个有效的 LRU 缓存实现。我发现最方便的方法是使用`LinkedHashMap`，但不幸的是，如果许多线程都在使用缓存，它会很慢。我的实现在这里：

```
/**
 * Class provides API for FixedSizeCache.
 * Its inheritors represent classes         
 * with concrete strategies     
 * for choosing elements to delete
 * in case of cache overflow. All inheritors
 * must implement {@link #getSize(K, V)}. 
 */
public abstract class FixedSizeCache <K, V> implements ICache <K, V> {
    /**
     * Current cache size.
     */
    private int currentSize;

    /**
     *  Maximum allowable cache size.
     */
    private int maxSize;

    /**
     * Number of {@link #get(K)} queries for which appropriate {@code value} was found.
     */
    private int keysFound;

    /**
     * Number of {@link #get(K)} queries for which appropriate {@code value} was not found.
     */
    private int keysMissed;

    /** 
     * Number {@code key-value} associations that were deleted from cache
     * because of cash overflow.
     */
    private int erasedCount; 

    /**
     * Basic data structure LinkedHashMap provides
     * convenient way for designing both types of cache:
     * LRU and FIFO. Depending on its constructor parameters
     * it can represent either of FIFO or LRU HashMap.
     */
    private LinkedHashMap <K, V> entries;

    /** 
     * If {@code type} variable equals {@code true}
     * then LinkedHashMap will represent LRU HashMap.
     * And it will represent FIFO HashMap otherwise.
     */ 
    public FixedSizeCache(int maxSize, boolean type) {

        if (maxSize <= 0) {
            throw new IllegalArgumentException("int maxSize parameter must be greater than 0");
        }

        this.maxSize = maxSize;
        this.entries = new LinkedHashMap<K, V> (0, 0.75f, type);
    }

    /** 
     * Method deletes {@code key-value} associations 
     * until current cache size {@link #currentSize} will become 
     * less than or equal to maximum allowable
     * cache size {@link #maxSize}
     */
    private void relaxSize()  {

        while (currentSize > maxSize) {

             // The strategy for choosing entry with the lowest precedence
             // depends on {@code type} variable that was used to create  {@link #entries} variable. 
             // If it was created with constructor LinkedHashMap(int size,double loadfactor, boolean type)
             // with {@code type} equaled to {@code true} then variable {@link #entries} represents
             // LRU LinkedHashMap and iterator of its entrySet will return elements in order
             // from least recently used to the most recently used.
             // Otherwise, if {@code type} equaled to {@code false} then {@link #entries} represents
             // FIFO LinkedHashMap and iterator will return its entrySet elements in FIFO order -
             // from oldest in the cache to the most recently added.

            Map.Entry <K, V> entryToDelete = entries.entrySet().iterator().next();

            if (entryToDelete == null) {
                throw new IllegalStateException(" Implemented method int getSize(K key, V value) " +
                        " returns different results for the same arguments.");  
            }

            entries.remove(entryToDelete.getKey());
            currentSize -= getAssociationSize(entryToDelete.getKey(), entryToDelete.getValue());
            erasedCount++;
        }

        if (currentSize < 0) {
            throw new IllegalStateException(" Implemented method int getSize(K key, V value) " +
                    " returns different results for the same arguments.");
        }
    }

    /** 
     * All inheritors must implement this method
     * which evaluates the weight of key-value association.
     * Sum of weights of all key-value association in the cache
     * equals to {@link #currentSize}.  
     * But developer must ensure that
     * implementation will satisfy two conditions:
     * <br>1) method always returns non negative integers;
     * <br>2) for every two pairs {@code key-value} and {@code key_1-value_1}
     * if {@code key.equals(key_1)} and {@code value.equals(value_1)} then 
     * {@code getSize(key, value)==getSize(key_1, value_1)};
     * <br> Otherwise cache can work incorrectly.
     */
    protected abstract int getSize(K key, V value);

    /** 
     * Helps to detect if the implementation of {@link #getSize(K, V)} method
     * can return negative values. 
     */
    private int getAssociationSize(K key, V value)  {

        int entrySize = getSize(key, value);

        if (entrySize < 0 ) {
            throw new IllegalStateException("int getSize(K key, V value) method implementation is invalid. It returned negative value.");
        }

        return entrySize;
    }

   /**
    * Returns the {@code value} corresponding to {@code key} or
    * {@code null} if  {@code key} is not present in the cache. 
    * Increases {@link #keysFound} if finds a corresponding {@code value}
    * or increases {@link #keysMissed} otherwise. 
    */
    public synchronized final V get(K key)  {

        if (key == null) {
            throw new NullPointerException("K key is null");
        }

        V value = entries.get(key);
        if (value != null) {
            keysFound++;
            return value;
        }

        keysMissed++;
        return value;
    }

    /** 
     * Removes the {@code key-value} association, if any, with the
    *  given {@code key}; returns the {@code value} with which it
    *  was associated, or {@code null}.
    */
    public synchronized final V remove(K key)  {

        if (key == null) {
            throw new NullPointerException("K key is null");
        }

        V value = entries.remove(key);

        // if appropriate value was present in the cache than decrease
        // current size of cache

        if (value != null) {
            currentSize -= getAssociationSize(key, value);
        }

        return value;
    }

   /**
    * Adds or replaces a {@code key-value} association.
    * Returns the old {@code value} if the
    * {@code key} was present; otherwise returns {@code null}.
    * If after insertion of a {@code key-value} association 
    * to cache its size becomes greater than
    * maximum allowable cache size then it calls {@link #relaxSize()} method which
    * releases needed free space. 
    */
    public synchronized final V put(K key, V value)  {

        if (key == null || value == null) {
            throw new NullPointerException("K key is null or V value is null");
        }

        currentSize += getAssociationSize(key, value);      
        value = entries.put(key, value);

        // if key was not present then decrease cache size

        if (value != null) {
            currentSize -= getAssociationSize(key, value);
        }

        // if cache size with new entry is greater
        // than maximum allowable cache size
        // then get some free space

        if (currentSize > maxSize) {
            relaxSize();
        }

        return value;
    }

    /**
     * Returns current size of cache. 
     */
    public synchronized int currentSize() {
        return currentSize;
    }

    /** 
     * Returns maximum allowable cache size. 
     */ 
    public synchronized int maxSize() {
        return maxSize;
    }

    /** 
     * Returns number of {@code key-value} associations that were deleted
     * because of cache overflow.   
     */
    public synchronized int erasedCount() {
        return erasedCount;
    }

    /** 
     * Number of {@link #get(K)} queries for which appropriate {@code value} was found.
     */
    public synchronized int keysFoundCount() {
        return keysFound;
    }

    /** 
     * Number of {@link #get(K)} queries for which appropriate {@code value} was not found.
     */
    public synchronized int keysMissedCount() {
        return keysMissed;
    }

    /**
     * Removes all {@code key-value} associations
     * from the cache. And turns {@link #currentSize},
     * {@link #keysFound}, {@link #keysMissed} to {@code zero}.  
     */
    public synchronized void clear() {
        entries.clear();
        currentSize = 0;
        keysMissed = 0;
        keysFound = 0;
        erasedCount = 0;
    }

    /**
     * Returns a copy of {@link #entries}
     * that has the same content.
     */
    public synchronized LinkedHashMap<K, V> getCopy() {
        return new LinkedHashMap<K, V> (entries);
    }
} 
```

如果我们有很多线程试图调用 let say`get()`方法，这个实现会很慢（因为同步）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:54:37.240

我不知道这是否有益，但是如果您可以用 ConcurrentHashMap 替换您`LinkedHashMap`的，[那么](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)您将提高吞吐量 -`ConcurrentHashMap`使用分片来允许多个同时读取和写入。它也是线程安全的，所以你不需要同步你的读者和作者。

除此之外，将您对`synchronized`关键字的使用替换为[ReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。这将允许多个同时阅读器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T14:53:46.587

尽量不要重新实现可用的东西：[Guava Caches](http://code.google.com/p/guava-libraries/wiki/CachesExplained)。它几乎具有您需要的所有功能：基于大小的驱逐、并发、加权。如果它符合您的需求，请使用它。如果不是尝试实施你的，但总是先评估（在我看来）。只是一个建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T15:17:40.407

您需要像这样运行性能测试

```
Map<Object, Object> map = Collections.synchronizedMap(new LinkedHashMap<Object, Object>(16, 0.7f, true) {
    @Override
    protected boolean removeEldestEntry(Map.Entry<Object, Object> eldest) {
        return size() > 1000;
    }
});
Integer[] values = new Integer[10000];
for (int i = 0; i < values.length; i++)
    values[i] = i;

long start = System.nanoTime();
for (int i = 0; i < 1000; i++) {
    for (int j = 0; j < values.length; j++) {
        map.get(values[j]);
        map.get(values[j / 2]);
        map.get(values[j / 3]);
        map.get(values[j / 4]);
        map.put(values[j], values[j]);
    }
}
long time = System.nanoTime() - start;
long rate = (5 * values.length * 1000) * 1000000000L / time;
System.out.printf("Performed get/put operations at a rate of %,d per second%n", rate); 
```

在我的 2.5 GHz i5 笔记本电脑上打印

```
Performed get/put operations at a rate of 27,170,035 per second 
```

您每秒需要多少百万次操作？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T18:38:57.613

如前所述，问题的主要原因是更新 LRU 算法中的共享数据结构。为了克服这个问题，您可以使用分区，或者使用另一种驱逐算法，然后使用 LRU。有一些现代算法比 LRU 表现更好。请参阅我在[cache2k 基准页面](http://cache2k.org/benchmarks.html)上对该主题的比较。

cache2k eviction 实现 CLOCK 和 CLOCK-Pro 具有完全读取并发，无需锁定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T15:59:26.250

LRU 方案本身涉及对共享结构的排他性修改。因此，争论已经给出，您无能为力。

如果您不需要严格的 LRU 并且可以容忍驱逐策略的一些不一致，那么这些东西会查找并且更亮。您的条目（值包装器）需要一些使用统计信息，并且您需要一些基于上述使用统计信息的过期策略。

然后，您可以基于 LRU 类似的结构`ConcurrentSkipListMap`（即您可能将其视为数据库索引），当缓存即将到期时，使用该索引并基于它使元素到期。您将需要仔细检查等等，但这是可行的。更新索引是免费的，但规模很大。请记住，这`ConcurrentSkipListMap.size()`是一个昂贵的操作 O(n)，所以你不应该依赖任何一个。实现并不难，但也不是微不足道的，除非你有足够的争用（核心）同步（LHM）可能是最简单的方法。

# asp.net-mvc - DotNetOpenauth：MVC 网站作为资源服务器

> ID：15951938
> 
> 赞同：1
> 
> 时间：2013-04-11T14:49:52.257
> 
> 标签：asp.net-mvc, oauth-2.0, dotnetopenauth

我正在尝试在 ASP.Net MVC 3.0 站点上创建资源服务器。有没有与此相关的样本。

我的主要目标是使用另一个 OAuth2.0 身份验证服务器保护资源服务器上的 MVC 视图...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:46:47.127

DotNetOpenAuth 项目有一个用 ASP.NET 编写的示例 ResourceServer（Web 窗体不是 MVC）

源代码位于：[https ://github.com/AArnott/dotnetopenid/tree/master/samples/OAuthResourceServer](https://github.com/AArnott/dotnetopenid/tree/master/samples/OAuthResourceServer)

# liferay - Liferay 将其数据保存在哪里？

> ID：15951943
> 
> 赞同：2
> 
> 时间：2013-04-11T14:50:03.663
> 
> 标签：liferay, portlet

假设我正在向 Liferay 门户内的不同 portlet 添加数据。所有这些数据都保存在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:59:35.487

Liferay 附带的大多数开箱即用的 portlet，如博客、论坛、Wiki、Web 内容都存储在 Liferay 数据库中。如果您有一个配置了 Liferay（如 MySQL 或 Oracle）的生产就绪数据库，您可以正确查看表格和实际数据。

Liferay 默认附带 Hypersonic 数据库，用于快速演示。它将所有信息保存在一个文件中。所有与超音速相关的文件都保存在您提取 Liferay 的任何地方的“data\hsql”文件夹中。如果要查看超音速数据库数据，可以使用 DbVisualizer 查看表格。

您还可以创建自定义 portlet。这些数据必须存储在哪里完全取决于您。如果需要，您可以将数据保存在 Liferay 的数据库中，但这不是强制性的。将自定义 portlet 的数据保存在何处由您决定

# wpf - 通知父级 WPF 用户控件依赖属性已更改的最佳方法是什么？

> ID：15951946
> 
> 赞同：0
> 
> 时间：2013-04-11T14:50:05.717
> 
> 标签：wpf, vb.net, binding

我正在 VB.net 中构建一个 WPF 用户控件。此控件绑定到后面的 xaml.vb 代码中的依赖属性。

没有 ViewModel。

这是一个旨在通过将其拖放到其他 WPF 表单上来使用的控件。当依赖属性更改时引发事件的最佳方法是什么。

我是否需要使背后的代码实现 INotifyPropertyChanged 或只是引发自定义事件？

我想我真的在问最佳实践。

# django - 40 个字符的 Django URL，字母数字

> ID：15951948
> 
> 赞同：1
> 
> 时间：2013-04-11T14:50:10.343
> 
> 标签：django, django-urls

我尝试了以下网址：

```
 url(r'^complete/(?P<id>\d+)/$', 'order_complete', name='checkout_complete'), 
```

我传递的 ID 看起来像这样`bupkrqpltfeqpctnnagjprzegq`，最多 40 个字符。

我该如何处理？

![在此处输入图像描述](https://i.stack.imgur.com/QaMeu.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:06:59.503

我假设图像显示允许的字符？

```
url(regex=r'^complete/(?P<id>[\w{}.-]{1,40})/$',
    view='order_complete',
    name='checkout_complete'), 
```

您的模式只允许使用数字 ( `\d`)。

我的模式：

```
[\w{}.-] #  a character that is a word character (a-zA-Z0-9 or _), {, }, ., or - 
{1,40}   #  1 to 40 times 
```

# c# - 扩展方法 - 如何在继承中返回正确的类型？

> ID：15951950
> 
> 赞同：3
> 
> 时间：2013-04-11T14:50:11.597
> 
> 标签：c#, extension-methods

我正在尝试从我的 Repository 类创建一个通用方法。这个想法是一种做某事并返回调用它的类的实例的方法。

```
public class BaseRepository { }

public class FooRepository : BaseRepository { }

public class BarRepository : BaseRepository { }

public static class ExtensionRepository
{
    public static BaseRepository AddParameter(this BaseRepository self, string parameterValue)
    {
        //...
        return self;
    }
}

// Calling the test:
FooRepository fooRepository = new FooRepository();
BaseRepository fooWrongInstance = fooRepository.AddParameter("foo");

BarRepository barRepository = new BarRepository();
BaseRepository barWrongInstance = barRepository.AddParameter("bar"); 
```

好吧，这样我就可以获得 BaseRepository 实例。但我需要获取调用此方法的 FooRepository 和 BarRepository 实例。任何想法？太感谢了！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:51:48.713

您可以尝试使用泛型

```
public static class ExtensionRepository
{
    public static T AddParameter<T>(this T self, string parameterValue) where T:BaseRepository 
    {
        //...
        return self;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:11:29.037

当初为什么要回国`self`？据我所知（不知道你的方法体内有什么）你没有将新对象分配给`self`. 因此，您返回的实例与调用者已经拥有的实例相同。

也许你可以让它返回`void`：

```
public static void AddParameter(this BaseRepository self, string parameterValue)
{
    //...
} 
```

用法：

```
FooRepository fooRepository = new FooRepository();
fooRepository.AddParameter("foo");
// fooRepository is still fooRepository after the call

BarRepository barRepository = new BarRepository();
barRepository.AddParameter("bar");
// barRepository is still barRepository after the call 
```

# jquery - Jquery检测所选按钮的ID？

> ID：15951951
> 
> 赞同：0
> 
> 时间：2013-04-11T14:50:16.627
> 
> 标签：jquery, button

嗨，这是让我转圈圈。

考虑这些单选按钮：

```
<input type="radio" class="win" id="50" value="1" name="match1" />
<input type="radio" class="cover" id="50" value="2" name="match1" />

<input type="radio" class="win" id="51" value="1" name="match2" />
<input type="radio" class="cover" id="51" value="2" name="match2" />

<input type="radio" class="win" id="52" value="1" name="match3" />
<input type="radio" class="cover" id="52" value="2" name="match3" /> 
```

提交表单时，我想知道任何被选中的按钮的 id。

有些按钮对可能根本没有被选中。

我试过了：

```
for (var x=1; x<4; ++x){

     if($('form #'+$(this).attr("id")+'input:radio[name=match'+x+']').prop('checked', true)){
          alert('Checked;);
     }

} 
```

但它总是 evlautes 为真。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:51:20.863

您将值设置为 true。`,true`从`prop`通话中删除：

```
if($('form #'+$(this).attr("id")+'input:radio[name=match'+x+']').prop('checked')){
      alert('Checked;);
} 
```

当您使用它设置属性时，`.prop('checked', true)`它会返回您调用它的 jQuery 元素 - 并且计算结果为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:51:20.967

您是`setting`if 中的已检查属性，而不仅仅是`getting`

*改变*

```
if($('form #'+$(this).attr("id")+'input:radio[name=match'+x+']').prop('checked', true)) 
```

*至*

```
if($('form #'+$(this).attr("id")+'input:radio[name=match'+x+']').prop('checked')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:59:09.617

这是您的场景的完整工作代码，示例 jsFiddle 位于：http: [//jsfiddle.net/CV4x8/](http://jsfiddle.net/CV4x8/)

```
<input type="radio" class="win" id="50" value="1" name="match1" />
<input type="radio" class="cover" id="50" value="2" name="match1" />

<input type="radio" class="win" id="51" value="1" name="match2" />
<input type="radio" class="cover" id="51" value="2" name="match2" />

<input type="radio" class="win" id="52" value="1" name="match3" />
<input type="radio" class="cover" id="52" value="2" name="match3" />

<button id="getChecked"></button>

function alertChecked() {
   for (var i = 0, x = 4; i < x; i++) {
       if ( $('input[name=match' + i + ']').is(':checked')) {
           alert("Checked");
        }
    }
}

$('#getChecked').click(function() {
    alertChecked();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:54:08.910

我相信这会回答你的问题：

```
for (var i = 0, len = 4; i < len; i++) {
    if ( $('input[name=match' + i + ']:checked').val() ) {
        alert("Checked");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T15:06:43.710

首先，不要使用多个 ID，也不要以数字开头，因为它不是有效的 HTML。

```
$("input[type='radio']:checked").each(function( index ) {
     $('#output').append($(this).attr('id')+' is checked<br />');
}); 
```

这是一个适用于您的情况的 jsFiddle：http: [//jsfiddle.net/RGZH7/3/](http://jsfiddle.net/RGZH7/3/)

# javascript - 停止执行 getCurrentPosition 方法

> ID：15951952
> 
> 赞同：8
> 
> 时间：2013-04-11T14:50:20.410
> 
> 标签：javascript, jquery, jquery-mobile, google-maps-api-3, geolocation

我在 Javascript 中使用 getCurrentPosition 方法。我想实现一个按钮，当它被单击时停止执行“getCurrentPosition”方法。我尝试使用 throw/try/catch 块，但它似乎不起作用：

```
    尝试 {
        $('#cancel').on("点击", function() {
            $.mobile.loading('隐藏');
            抛出“停止”；
        });
        navigator.geolocation.getCurrentPosition(foundLocation, noLocation, {enableHighAccuracy: true, timeout : 30000 });
    }
    捕捉（呃）{警报（呃）；返回假；}

```

有任何想法吗？在 JS 中甚至有可能吗？我有一个想法，但我不知道是否可以使用 JS 方法触发超时，以便 getCurrentPosition 中断？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T15:19:00.137

# 解决方案：

方法**navigator.geolocation.getCurrentPosition**是一个异步函数，所以不要指望像那样停止它。

您应该改用其他称为：**[navigator.geolocation.watchPosition](http://www.thedotproduct.org/2010/04/example-of-navigator-geolocation-watchposition/)**的函数。它的工作方式与 getCurrentPosition 相同，但在您的情况下使它有用的是另一个名为**[navigator.geolocation.clearWatch](http://www.tutorialspoint.com/html5/geolocation_clearwatch.htm)**的函数，该函数用于停止 watchPosition。

# 例子：

```
geoLoc = navigator.geolocation;
watchID = geoLoc.watchPosition(showLocation, errorHandler, options);
geoLoc.clearWatch(watchID); 
```

# sql - 如何在 SQL Azure 中创建登录名、用户和授予数据库权限？

> ID：15951955
> 
> 赞同：1
> 
> 时间：2013-04-11T14:50:21.447
> 
> 标签：sql, azure

我正在尝试向我刚刚创建的用户授予权限，并且关联的登录名已登录到我的主人。

我无法授予任何权限，因为它说您无权执行此操作。

我给了自己主人的 dbowner 权利，但仍然如此。

有什么帮助吗？

可能是我创建的数据库没有架构 dbo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:27:17.820

**更新：**
我以为你说你添加的用户没有任何权限，我的错！那么答案仍然可能会有所帮助:-)

我不是 SQL 专家，所以这可能无法回答您的问题，但我今天必须做这样的事情，列出我的步骤可能会有所帮助。

如果您想添加用户而无需编写大量 SQL 查询，则 可以使用[Azure 用户管理控制台 (AUMC)等图形工具。](http://aumc.codeplex.com/)

连接到您的服务器，转到登录并创建一个新登录名（如果您也想授予服务器访问权限），然后转到用户，选择您的数据库，创建一个新用户，然后在这里您可以将用户链接到您的登录名刚刚创建并授予数据库权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:32:04.563

这是有关授予用户/登录权限的文档：

[http://blogs.msdn.com/b/sqlazure/archive/2010/06/21/10028038.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/06/21/10028038.aspx)

```
EXEC sp_addrolemember 'db_datareader', 'readonlyuser'; 
```

# php - 如何使模型在 Phalcon PHP 框架中使用默认值？

> ID：15951959
> 
> 赞同：5
> 
> 时间：2013-04-11T14:50:37.350
> 
> 标签：php, frameworks, phalcon

如果一张表在某些字段上有默认值并且不允许使用 NULL，那么人们会期望插入脚本使用这些默认值，就像 MariaDB/MySQL 通常那样。例如，如果表 products 有一个 AI 字段“id”、一个必填字段“name”和两个必填字段“active”和“featured”，它们都默认为 1，那么查询

```
INSERT INTO products (name) VALUES ('someName'); 
```

自动插入 1 作为 active 和 features 的值。但是，当像这样使用 Phalcon 的模型时：

```
$product = new Products();
$product->setName('someName');
$product->save(); 
```

返回验证错误，说“活动”和“特色”是必需的。

在模型生成期间我应该提供一个标志，以便 Phalcon 工具收集默认值并将其输入到模型类中，还是另一种方式让 Phalcon 在找到时自动使用默认值？我认为最好的方法是忽略未设置的字段。我可以让模型这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T15:33:30.337

您可以在特定插入中使用原始数据库值来避免这种情况：

```
<?php

use Phalcon\Db\RawValue;

$product = new Products();
$product->setName('someName');
$product->setType(new RawValue('default')); //use default here
$product->save(); 
```

或者，一般在创建/更新特定字段之前：

```
use Phalcon\Db\RawValue;

class Products extends Phalcon\Mvc\Model
{
    public function beforeValidationOnCreate()
    {
        $this->type = new RawValue('default');
    }
} 
```

或者在生成的每个 SQL INSERT 中忽略这些字段：

```
use Phalcon\Db\RawValue;

class Products extends Phalcon\Mvc\Model
{
    public function initialize()
    {
        $this->skipAttributesOnCreate(array('type'));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T10:22:22.250

虽然我发现从 Phalcon 包含这种邪恶的方法来读取列默认值的方面来看，twistedxtra 的答案令人着迷，但我相信从架构的角度来看，这可能是错误的方法，因为您依赖数据库来定义您的属性的默认值模型。

我会在声明属性时设置默认值并将逻辑保留在应用程序层中。但这只是我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T16:58:10.943

使用如下

skipAttributesOnCreate 将确保 Phalcon 不会尝试在该列中放置一个值。数据库将应用默认值。

```
public function initialize()
{
    $this->setSource('table_name');
    $this->skipAttributesOnCreate(['name_of_column']);
} 
```

# asp.net - ASP.net MVC 站点：将所有“非 WWW”请求重定向到 WWW

> ID：15951963
> 
> 赞同：6
> 
> 时间：2013-04-11T14:50:42.010
> 
> 标签：asp.net, asp.net-mvc, routing, seo, iis-6

最近我将一个 ASP.net 站点迁移到 ASP.net MVC 站点。之前有两个主机头，一个是 mydomain.com，另一个是 www.mydomain.com。我的 SEO 说你应该只使用一个 URL“www.domain.com”来获得 SEO 优势。

我正在寻找一个选项来执行 301 永久重定向所有 mydomain.com 请求到 www.mydomain.com。

该站点托管在 IIS6 中，并在 ASP.net MVC 4 中开发。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T14:56:28.010

您可以从您的 web.config 文件中执行此操作

```
<system.webServer>
    <rewrite>
        <rules>
          <rule name="Redirect to WWW" stopProcessing="true">
            <match url=".*" />
            <conditions>
              <add input="{HTTP_HOST}" pattern="^example.com$" />
            </conditions>
            <action type="Redirect" url="http://www.example.com/{R:0}"
                 redirectType="Permanent" />
          </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T14:58:57.147

您可以在 IIS 中使用 config 或 Url Rewriter，但我发现的最佳方法就是像这样`Application_BeginRequest()`在您的文件中添加一些代码`global.asax.cs`：

```
var HOST = "www.mydomain.com";

if ( !Request.ServerVariables[ "HTTP_HOST" ].Equals(
  HOST,
  StringComparison.InvariantCultureIgnoreCase )
)
{
  Response.RedirectPermanent(
    ( HttpContext.Current.Request.IsSecureConnection ? "https://" : "http://" )
    + HOST
    + HttpContext.Current.Request.RawUrl );
} 
```

因为您是在代码中执行此操作，所以您可以根据每个请求拥有所需的任何逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:43:30.633

不幸**的是，URL 重写模块不适用于 IIS6**（仅 IIS7 或更高版本）。您是否考虑过创建自己的 HttpModule，类似这样的东西？

[IIS 6 如何从 http://example.com/* 重定向到 http://www.example.com/*](https://stackoverflow.com/questions/1872227/iis-6-how-to-redirect-from-http-example-com-to-http-www-example-com/1872647#1872647)

或者，您可能会使用如下其中之一的第 3 方解决方案：

[http://iirf.codeplex.com/](http://iirf.codeplex.com/)

[http://www.urlrewriting.net/149/en/home.html](http://www.urlrewriting.net/149/en/home.html)

[http://www.isapirewrite.com/](http://www.isapirewrite.com/)

[http://urlrewriter.net/](http://urlrewriter.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T17:25:23.220

（需要 IIS 7 或更高版本）

来自[http://www.codeproject.com/Articles/87759/Redirecting-to-WWW-on-ASP-NET-and-IIS](http://www.codeproject.com/Articles/87759/Redirecting-to-WWW-on-ASP-NET-and-IIS)

（类似于上述解决方案，但不需要您添加自己的域名。）

```
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <rule name="WWW Rewrite" enabled="true">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTP_HOST}" negate="true"
                            pattern="^www\.([.a-zA-Z0-9]+)$" />
                    </conditions>
                    <action type="Redirect" url="http://www.{HTTP_HOST}/{R:0}"
                        appendQueryString="true" redirectType="Permanent" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

请注意，您很可能会在标签下方看到波浪线，并显示标签无效的消息。我收到了这条消息，但事实上，它工作得很好。

如果你想让智能感知工作，你可以在这里尝试这个更新......

[http://ruslany.net/2009/08/visual-studio-xml-intellisense-for-url-rewrite-1-1/](http://ruslany.net/2009/08/visual-studio-xml-intellisense-for-url-rewrite-1-1/)

有关 httpRedirect 的更多信息可以在这里找到...

[http://www.iis.net/configreference/system.webserver/httpredirect](http://www.iis.net/configreference/system.webserver/httpredirect)

# iphone - 使用 AVFoundation 在自定义播放器中播放 youtube 视频

> ID：15951965
> 
> 赞同：1
> 
> 时间：2013-04-11T14:50:49.940
> 
> 标签：iphone, ios, youtube-api, avfoundation, mpmovieplayer

AVFoundation 允许开发人员创建自定义视频播放器，而不是使用 Apple 自己的全屏 MPMoviePlayer。

在我的项目中，我使用这种方法来实现类似于 YouTube iOS 应用程序所做的事情，即在播放发生的顶部有一个“画布”视图，以及底部的几个控件和文本标签：

![一个非常熟练的绝地](https://i.stack.imgur.com/02Hmz.png)

如您所知，YouTube URL “指向” HTML 数据，它旨在用于 UIWebView。点击此 UIWebView 内的缩略图会弹出一个全屏播放器，这是我试图避免的。

我想知道 YouTube API 是否提供指向实际视频（mp4 文件）的 URL，以便我可以在 AVFoundation 中使用它。

我想找到一种合法的方式来做到这一点，所以它应该明确地遵守苹果和谷歌的服务条款。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:36:56.017

实现这一点的最简单方法是添加一个覆盖 UIView，您可以将其放置在屏幕的任何部分上。并将其置于 UIWebView 之上，并将其设置为不响应用户交互。由于您可以更改大小和位置并使其透明，因此您可以有效地选择您想要和不想要的用户交互。而且您不会以任何方式与 YouTube ToS 混为一谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:00:20.297

[http://www.youtube.com/get_video_info?video_id=](http://www.youtube.com/get_video_info?video_id=)附加视频 id 包含 mp4 url​​，可能需要一些正则表达式工作（在这里找到：[https ://github.com/hellozimi/HCYoutubeParser/blob/master/YoutubeParser /Classes/HCYoutubeParser.m](https://github.com/hellozimi/HCYoutubeParser/blob/master/YoutubeParser/Classes/HCYoutubeParser.m) )

# jquery - 使用 jQuery 添加多个背景

> ID：15951967
> 
> 赞同：0
> 
> 时间：2013-04-11T14:50:53.453
> 
> 标签：jquery, html, css, function, background-image

我正在尝试用 jQuery 做手风琴。当您将鼠标悬停时，它应该将颜色更改为橙​​色，但同时保留背景图像。mouseleave 上也是一样的，但是我打不开。如何使用 jQuery 添加多个背景？

这是我正在使用的代码：

```
$(".wrap-faq").on("mouseover", hoverFaq);

function hoverFaq() {
  $(this).css("background", "#f7941e");
  $(this).css("backgroundImage", "url(...img/bkg_leer_artic.png) center repeat");
}

$(".wrap-faq").on("mouseleave", unHoverFaq);

function unHoverFaq() {
  $(this).css("background", "#e0e0e0");
  $(this).css("backgroundImage", "url(...img/bkg_leer_artic.png) center repeat");
} 
```

当您单击按钮时，我还尝试添加一个`active`类，因此它保持橙色，但这也不起作用。

jQuery：

```
$(".wrap-faq ").on("click", accordion);
function accordion() {
  if (!$(this).hasClass("active")) {
    $(".wrap-faq ").next().slideUp();
    $(this).next().slideToggle();
    $(".wrap-faq ").removeClass("active");
    $(this).addClass("active");
  }
} 
```

CSS：

```
.active {
background:#f7941e url("../img/bkg_leer_artic.png") center repeat;
}

.wrap-faq {
background:#e0e0e0 url("../img/bkg_leer_artic.png") center repeat;
margin-bottom:2px;
cursor:pointer;
} 
```

这是我的 JSFiddle：http: [//jsfiddle.net/xtatanx/3zvgY/5/](http://jsfiddle.net/xtatanx/3zvgY/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:23:31.110

[小提琴](http://jsfiddle.net/3zvgY/6/)

要保持橙色，您需要在规则中添加 !important 以覆盖内联 mouseout 样式：

```
.faq.active {
    background: #f7941e !important; 
} 
```

就背景图像而言，您需要将它们放在某个照片托管站点上，然后在 jsFiddle 上从该托管站点引用它们的链接，以便我们可以在那里看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:34:55.327

我正在努力理解你想要做什么，但我认为你想改变背景颜色，同时仍然保留背景图像。

这个小提琴展示了我是如何做到的（~~为图像道歉~~- 实际上，我不会为图像道歉，SuperDog 规则）。 [http://jsfiddle.net/Town/MtFa4/](http://jsfiddle.net/Town/MtFa4/)

您正在使用`background`，这是所有`background-`CSS 声明的快捷方式，因此当您这样做时

```
$(this).css("background", "#e0e0e0"); 
```

您正在覆盖`background-image`声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:08:44.250

我看到很多人使用`.css()`. 这可能令人沮丧并且难以排除故障，因为所有这些更改都应用于内联样式。

相反，请尝试使用`toggleClass()`,`.addClass()`和`.removeClass()`。然后，您的样式以一种更有条理且更易于操作的格式定义，而不是添加多个`.css()`功能。而且由于您已经在 CSS 中预定义了这些样式，所以我不明白您为什么要使用这些样式`.css()`。

# ios - 在 iOS 中实现基于位置的服务的最佳实践

> ID：15951974
> 
> 赞同：3
> 
> 时间：2013-04-11T14:51:04.437
> 
> 标签：ios, gps, battery, location-based-service

在 iOS 应用程序中使用某些基于位置的服务的最佳（即最低功耗）方式是什么？例如，每 x 秒/分钟检查一次背景中的位置。我已经阅读了有关地理围栏的信息，但我对它并不熟悉（它更新位置的频率等）。

感谢您分享任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:27:31.107

没有最佳实践，这在很大程度上取决于您的应用程序，它需要哪种位置精度。您需要多快改变位置等。

要么您需要精确到 30m 以下，然后您需要 GPS，它使用 Power（在最佳位置质量下可以进行 8 小时的录制，而无需使用手机）

或者您需要的精度要低得多，通常为 1 公里，然后它可以与蜂窝塔或 Wifi 位置一起使用，从而使用更少的功率。

在这两者之间没有什么可靠的。（例如 100m 的低功耗精度，实际上并不存在，至少我不会相信这样的设置，没有公布的测量结果，在较低的精度设置下，iphone 的准确度是多少）。

# plone - product.carousel 未向匿名观众显示

> ID：15951977
> 
> 赞同：1
> 
> 时间：2013-04-11T14:51:09.070
> 
> 标签：plone

我遇到了一个奇怪的问题，即 product.carousel 没有向匿名用户显示。登录到我的 Plone 站点后，我可以很好地看到轮播。我退出的那一刻，它就消失了。工作流设置为 single_state，因此它会自动发布。我还仔细检查了确保每个轮播横幅都“已发布”......仍然没有运气。

如果这有所作为，我正在使用 Plone 4.2.1.1。

# javascript - angularjs ng-class 方法被多次调用

> ID：15951984
> 
> 赞同：8
> 
> 时间：2013-04-11T14:51:33.790
> 
> 标签：javascript, angularjs

在这个例子中，我有 2 个 ng-class，每个调用不同的控制器方法，由于某种原因，每个方法被调用 3 次，知道吗？可能的错误？

```
var navList = angular.module('navList', []);

navList.controller('navCtrl', ['$scope', '$location', function ($scope, $location) {
    $scope.firstClass = function () {
        console.log('firstClass');
        return 'label label-success' ;
    };     
    $scope.secondClass = function () {
        console.log('secondClass');
        return 'label' ;
    };     

}]); 
```

[http://jsfiddle.net/uDPHL/72/](http://jsfiddle.net/uDPHL/72/)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T15:25:29.087

这不是一个错误。当 Angular 编译类似的东西时`ng-class="firstClass()"`，它会为它设置一个 $watch。摘要循环可能会多次评估每个 $watch ：

> Angular 进入 $digest 循环。该循环由两个较小的循环组成，它们处理 $evalAsync 队列和 $watch 列表。$digest 循环不断迭代，直到模型稳定，这意味着 $evalAsync 队列为空，$watch 列表没有检测到任何变化。--[概述文档](http://docs.angularjs.org/guide/concepts#runtime)

还

> 在观察者注册到作用域后，监听器 fn 被异步调用（通过 $evalAsync）来初始化观察者。在极少数情况下，这是不可取的，因为当 watchExpression 的结果没有改变时调用了侦听器。-- [$watch 文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)

因此，预计至少有两次。

# php - PHP代码中的Mysql查询不起作用

> ID：15951985
> 
> 赞同：1
> 
> 时间：2013-04-11T14:51:34.567
> 
> 标签：php, mysql, string, request, timestamp

这是我只想 `"tbl_name,itime_end,itime_start"`在时间戳中的某个日期之上选择的代码：

```
$reponse = $bdd->query('
SELECT 
tbl_name,
itime_end,
itime_start 
FROM table_ref 
WHERE `itime_start` > ".$Timestamp_UserStartDate." 
') 
```

`itime_start`并且`$Timestamp_UserStartDate`在时间戳中

但是当我做一个gettype时，`$timestamp_USerStartDate`它是一个整数并且`$itime_start`是一个字符串。一个`echo $timestamp_USerStartDate;`给：`1365408000` 和一个`echo $donnees['itime_start'];`给：`1364998028`...

结果是所有选择的数据都没有被过滤就显示出来了！提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:56:36.643

首先，你真的不应该以你正在做的方式注入你的变量。您应该绑定变量占位符，然后再填充它们。但是，您的代码的问题在于您没有以您想要的方式结束单括号。试试下面的行

```
$reponse = $bdd->query('SELECT tbl_name,itime_end,itime_start FROM table_ref WHERE `itime_start` > "'.$Timestamp_UserStartDate.'" ') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:01:34.680

如果您查看生成的查询，您会发现它不是您想要的。

```
$reponse = $bdd->query("
    SELECT 
        tbl_name,
        itime_end,
        itime_start 
    FROM table_ref 
    WHERE `itime_start` > " . $Timestamp_UserStartDate
); 
```

只要两者都是 UNIX 时间戳`itime_start`，就会做你所期望的。`$Timestamp_UserStartDate`

# c++ - 用简单的英语理解 MPI_Allgatherv

> ID：15951988
> 
> 赞同：3
> 
> 时间：2013-04-11T14:51:38.157
> 
> 标签：c++, mpi

在过去的几周里，我一直在学习如何实现 MPI，我很难理解如何为 MPI_Allgatherv 设置一些输入参数。我将使用一个玩具示例，因为我需要在这里采取一些小步骤。我所做的一些研究列在这篇文章的末尾（包括我之前的问题，这导致了我这个问题）。首先，快速总结一下我要完成的工作：

--总结--我正在使用一个 std::vector A，让多个处理器在 A 的不同部分上工作，然后获取 A 的更新部分并将这些更新重新分配给所有处理器。因此，所有处理器都以 A 的副本开始，更新 A 的部分，并以完全更新的 A 副本结束。--结束--

假设我有一个包含 5 个名为“mydata”的元素的 std::vector < double >，初始化如下：

```
for (int i = 0; i < 5; i++)
{
    mydata[i] = (i+1)*1.1;
} 
```

现在假设我在 2 个节点上运行我的代码（int tot_proc = 2）。我使用“int id_proc”识别“当前”节点，因此，根处理器的 id_proc = 0。由于 mydata 中的元素数量是奇数，我无法在处理器之间平均分配工作。假设我总是将工作分解如下：

```
if (id_proc < tot_proc - 1)
{
   //handle mydata.size()/tot_proc elements
}
else
{
   //handle whatever is left over
} 
```

在此示例中，这意味着： id_proc = 0 将适用于 mydata[0] 和 mydata[1]（2 个元素，因为 5/2 = 2）......并且...... id_proc = 1 将适用于 mydata[2] - mydata[4 ]（3 个元素，因为 5/2 + 5%2 = 3）

一旦每个处理器都处理了它们各自的 mydata 部分，我想使用 Allgatherv 将结果合并在一起，以便每个处理器上的 mydata 包含所有更新的值。我们知道 Allgatherv 有 8 个参数：（1）要发送的元素/数据的***起始地址***，（2）要发送的元素数量，（3）要发送的数据类型，在这个例子中是 MPI_DOUBLE，（4 ）您希望接收数据的位置的地址（没有提及“起始”地址），（5）正在接收的元素数量，（6）内存中相对于参数中接收位置的“位移” 4，（7）接收的数据类型，再次，MPI_DOUBLE，以及（8）你正在使用的通信器，在我的例子中就是 MPI_COMM_WORLD。

现在这里是混乱开始的地方。由于处理器 0 处理前两个元素，处理器 1 处理后 3 个元素，因此处理器 0 需要发送前两个元素，处理器 1 需要发送最后 3 个元素。对我来说，这表明 Allgatherv 的前两个论点应该是：

处理器 0：MPI_Allgatherv(&mydata[0],2,…</p>

处理器 1：MPI_Allgatherv(&mydata[2],3,…

（Q1）我说得对吗？如果是这样，我的下一个问题是关于参数 2 的格式。假设我创建了一个 std::vector < int > sendcount，使得 sendcount[0] = 2 和 sendcount[1] = 3。

(Q2) 参数 2 是否需要引用 sendcount 的第一个位置，还是需要将引用发送到与每个处理器相关的位置？换句话说，我应该做什么：

Q2 - 选项 1

处理器 0：MPI_Allgatherv(&mydata[0], &sendcount[0],…</p>

处理器 1：MPI_Allgatherv(&mydata[2], &sendcount[0],…</p>

Q2 - 选项 2

处理器 0: MPI_Allgatherv(&mydata[0], &sendcount[id_proc], ... (这里 id_proc = 0)

处理器 1：MPI_Allgatherv(&mydata[2], &sendcount[id_proc], ... (这里 id_proc = 1)

...关于论点 4。由于我将 mydata 的不同部分收集回自身，我怀疑这个论点看起来与论点 1 相似。即它应该类似于 &mydata[?]。（Q3）这个参数可以简单地作为对 mydata 开头的引用（即 &mydata[0]），还是我必须像对参数 1 所做的那样更改索引？(Q4) 想象一下我使用了 3 个处理器。这意味着处理器 1 将发送位于向量“中间”的 mydata[2] 和 mydata[3]。由于向量的元素是连续的，因此必须拆分处理器 1 接收的数据（一些在前面，而 ​​mydata[4] 在后面）。我是否必须在这个论点中解释这种分裂，如果是这样，如何解释？

...对我来说更令人困惑的是论点 5，但今天早上我有了一个想法。使用玩具示例：如果处理器 0 发送 2 个元素，那么它将接收 3 个元素，对吗？同样，如果处理器 1 发送 3 个元素，那么它接收 2 个元素。（Q5）所以，如果我要创建一个 std::vector < int > recvcount，我不能将它初始化为：

```
for (int i = 0; i < tot_proc; i++)
{
    recvcount[i] = mydata.size() - sendcount[i];
} 
```

如果这是真的，那么我是将它作为 &recvcount[0] 还是 &recvcount[id_proc] 传递给 Allgatherv（类似于参数 2）？

最后是参数 6。我知道这与我对参数 4 的输入有关。我的猜测如下：如果我要在所有处理器上将 &mydata[0] 作为参数 4 传递，那么位移是内存中的位置数我需要移动才能到达实际需要接收数据的第一个位置。例如，

处理器 0: MPI_Allgatherv( ... , &mydata[0], ... , 2, ... );

处理器 1：MPI_Allgatherv( ... , &mydata[0], ... , 0, ... );

(Q5) 我是否正确地认为上述两行的意思是“处理器 0 将接收从位置 &mydata[0+2] 开始的数据。处理器 1 将接收从位置 &mydata[0+0] 开始的数据”。?? 当需要像第四季度那样拆分数据时会发生什么？最后，由于我将向量的一部分收集回自身（通过覆盖它来用更新的 mydata 替换 mydata），因此这告诉我除根进程之外的所有处理器都将从 &mydata[0] 开始接收数据。（Q6）如果这是真的，那么对于所有不是根的处理器来说，位移不应该是 0 吗？

我读过的一些链接： [MPI_allgather 和 MPI_allgatherv](https://stackoverflow.com/questions/5865553/difference-between-mpi-allgather-and-mpi-allgatherv) [之间的区别 MPI_Allgather 和 MPI_Alltoall 函数之间的区别？](https://stackoverflow.com/questions/15049190/difference-between-mpi-allgather-and-mpi-alltoall-functions) [std::vector](https://stackoverflow.com/questions/5040879/problem-with-mpi-gatherv-for-stdvector?rq=1) [C++ 的 MPI_Gatherv 问题：使用 MPI 的gatherv 连接不同长度的向量](https://stackoverflow.com/questions/14591784/c-using-mpis-gatherv-to-concatenate-vectors-of-differing-lengths) [http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Allgatherv.html](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Allgatherv.html) [https://computing。 llnl.gov/tutorials/mpi/#Routine_Arguments](https://computing.llnl.gov/tutorials/mpi/#Routine_Arguments)

我之前关于 stackoverflow 的帖子： [MPI C++ 矩阵加法、函数参数和函数返回](https://stackoverflow.com/questions/15886878/mpi-c-matrix-addition-function-arguments-and-function-returns)

我读过的大多数教程等都只是掩盖了 Allgatherv。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:53:35.860

这里的部分困惑是您正在尝试进行就地收集。您正在尝试从同一个数组发送和接收。如果您这样做，则应使用[MPI_IN_PLACE](http://www.open-mpi.org/doc/v1.4/man3/MPI_Allgatherv.3.php#sect8)选项，在这种情况下，您无需明确指定发送位置或计数。如果您从不同的缓冲区发送而不是接收到的缓冲区，这些就在那里，但就地收集受到更多限制。

所以这有效：

```
#include <iostream>
#include <vector>
#include <mpi.h>

int main(int argc, char **argv) {
    int size, rank;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (size < 2) {
        std::cerr << "This demo requires at least 2 procs." << std::endl;
        MPI_Finalize();
        return 1;
    }

    int datasize = 2*size + 1;
    std::vector<int> data(datasize);

    /* break up the elements */
    int *counts = new int[size];
    int *disps  = new int[size];

    int pertask = datasize/size;
    for (int i=0; i<size-1; i++)
        counts[i] = pertask;
    counts[size-1] = datasize - pertask*(size-1);

    disps[0] = 0;
    for (int i=1; i<size; i++)
        disps[i] = disps[i-1] + counts[i-1];

    int mystart = disps[rank];
    int mycount = counts[rank];
    int myend   = mystart + mycount - 1;

    /* everyone initialize our data */
    for (int i=mystart; i<=myend; i++)
        data[i] = 0;

    int nsteps = size;
    for (int step = 0; step < nsteps; step++ ) {

        for (int i=mystart; i<=myend; i++)
            data[i] += rank;

        MPI_Allgatherv(MPI_IN_PLACE, 0, MPI_DATATYPE_NULL,
                       &(data[0]), counts, disps, MPI_INT, MPI_COMM_WORLD);

        if (rank == step) {
            std::cout << "Rank " << rank << " has array: [";
            for (int i=0; i<datasize-1; i++)
                std::cout << data[i] << ", ";
            std::cout << data[datasize-1] << "]" << std::endl;
        }
    }

    delete [] disps;
    delete [] counts;

    MPI_Finalize();
    return 0;
} 
```

运行给

```
$ mpirun -np 3 ./allgatherv
Rank 0 has array: [0, 0, 1, 1, 2, 2, 2]
Rank 1 has array: [0, 0, 2, 2, 4, 4, 4]
Rank 2 has array: [0, 0, 3, 3, 6, 6, 6] 
```

# vb.net - Visual Basic 窗体应用程序自定义关闭按钮

> ID：15951999
> 
> 赞同：1
> 
> 时间：2013-04-11T14:51:51.027
> 
> 标签：vb.net, exit

我创建了一个新的 UI 样式，例如 Visual Studios 2012（例如上面的带有关闭按钮的行）

现在，当我单击它时尝试关闭应用程序（悬停工作正常），但是当我单击它时，表单会关闭，但程序不会停止调试。

有什么办法可以让程序停止调试？

Me.Close()、Application.Exit() 和 Application.ExitThread()**不起作用**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:40:26.160

查看您的项目属性菜单。可以选择程序何时结束。选项将像“第一个表单打开关闭”、“最后一个表单关闭”等。

可能是您打开了另一个表单，只是隐藏了它，没有关闭它。因此它仍然是打开的，应用程序不会关闭。

或者，只需键入将强制程序关闭的单词“End”

问候

乔